# StackOverflow 问答 13600000-13600999

# python - Appfog Django admin css 丢失

> ID：13600005
> 
> 赞同：1
> 
> 时间：2012-11-28T07:32:29.230
> 
> 标签：python, django, appfog

我正在使用[http://appfog.com](http://appfog.com)我有 DEBUG = True 和 ADMIN_MEDIA_PREFIX = '/static/admin/' 缺少管理员的 css。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:26:22.877

如果 DEBUG=True**并且**它正在运行开发服务器，则 Django 仅提供静态文件。

[文档](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)：

> 当您使用内置的 runserver 管理命令时，此视图会自动启用并在 STATIC_URL 处为您的静态文件提供服务 [...] 如果您正在使用其他服务器进行本地开发，则要启用此视图，您将添加几个行到您的 URLconf。第一行位于文件的顶部，最后一行位于底部。

例子：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
# ... the rest of your URLconf goes here ...
urlpatterns += staticfiles_urlpatterns() 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T21:58:30.060

对 appfog使用 dbieber 的[Django 模板，](https://github.com/dbieber/django-appfog-helloworld)这是对我有用的方法：

1.  在您的项目目录中为静态文件创建一个目录，然后设置一个 URL 以让 appfog 服务器为这些文件提供服务：

    ```
    cd <project>
    mkdir static 
    ```

2.  在 urls.py 中，确保 urlpattern 设置为包含静态文件（如果您使用模板，这已经存在）：

    ```
    urlpatterns += patterns('', 
     ...
     url(r'^static/(?P<path>.*)$', 
         'django.views.static.serve',
         {'document_root': settings.STATIC_ROOT), 
     ) 
    ```

3.  将所有静态文件收集到静态目录中

    ```
    python manage.py collectstatic 
    ```

4.  部署到 appfog

    ```
    af update <appname> 
    ```

# css - 如何防止在每个页面中加载背景图像？

> ID：13600007
> 
> 赞同：0
> 
> 时间：2012-11-28T07:32:40.980
> 
> 标签：css, html, jquery-mobile, ios6, background-image

我正在使用 jquery 手机。我在 css body{} 标记内的索引页面中定义了一个背景图像。背景很好，但它也会自动加载到不同的页面中，尽管我没有在后续页面中声明正文 css 部分。如何防止这种情况？并且 css body{background: url()} 仅在索引页面上工作。这是我的代码

```
 <style type="text/css">
            body {
                background: url(images/login2.png);
                background-repeat:repeat-y;
                background-position:center;
                background-attachment:scroll;
                background-size:100% 100% ;
            }
            .ui-page {
                background: transparent;
            }
            .ui-content{
                background: transparent;
            }
            </style>

        </head>

<body>

        <div align="center" data-role="fieldcontain" id="contentConfirmation" name="contentConfirmation">

            <div >
                <label class="userlabelclass" for="url" style="float:left" ><p>Username:</p></label>
                <input class="userfieldclass" id="Lusername" name="uid_r" type="text" value="John Doe" " style="width:230px;float:right">
              </div>  

    <div >
                    <label class="pswdlebelclass" for="url" style="float:left"><p>Password:</p></label>
                    <input class="pswdfieldclass" id="Lpassword" name="pwd_r" type="password" value="123456789" style="width:230px;float:right">
                    <label class="forgotclass" for="url" style="float:left"><p>Forgot Password?</p></label>

    </div>

         <div align="center">
                <a href="listview_page.html" data-role="button" data-inline="true" data-theme="e" class="buttonclass" >Log In</a>
         </div>
   </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:22:47.007

Jquery 移动导航使用 Ajax 仅加载`body`您导航到的页面的一部分。这意味着`header`后续页面的 被忽略，`header`第一页的 被“应用”到所有页面。如果您希望您的背景仅适用于您的第一页，我建议：

1.  您创建一个`data-role="page"`div 来保存第一页的内容，如使用 jquery mobile 时所推荐的那样
2.  您将背景应用于此特定页面元素

# bash - ftp while 出错

> ID：13600009
> 
> 赞同：-1
> 
> 时间：2012-11-28T07:32:52.367
> 
> 标签：bash, shell, unix

任何人都可以帮助解决什么问题？

```
 Host='192.153.222.1'
   User='ftpuser'
   passwd='apple'
   logfile='a.log'

   while :; do
   ftp -n -p -v $HOST < example.script >> $logfile
   grep -qF "Connected" $logfile &&
   grep -qF "File successfully transferred" $logfile && break
   done

   quote USER $USER
   quote PASS $PASSWD 
```

example.script 包含

```
 put example.txt 
```

错误是

./example.sh：第 20 行：语法错误：文件意外结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:46:07.447

为什么你`<<`在这条线上使用？

```
ftp -n -p -v $HOST << example.script >> $logfile 
```

将其更改为

```
ftp -n -p -v $HOST < example.script >> $logfile 
```

它会工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:45:30.800

一些修复：

*   你错过了结束语：

    主机='192.153.222.1'

*   使用单个`<`，否则它是“此处的文档”：

    ftp -n -p -v "$HOST" <example.script >> "$logfile"

# php - 如何使用php使用while循环制作子xml节点

> ID：13600010
> 
> 赞同：0
> 
> 时间：2012-11-28T07:32:54.520
> 
> 标签：php, mysql, xml, appendchild

```
$xml = new DOMDocument();
$root=$xml->createElement("ROOT");
$xml->appendChild($root);

$data=$xml->createElement("DATA");

while($row=db_fetch_object($result))
{
    $data=$xml->createElement("ITEM");
    $item->setAttribute("COMPANY",$row->field_windmill_fabrikant_value);
    $item->setAttribute("HEIGHT",$row->field_windmill_ashoogte_value);
    $item->setAttribute("POWER",$row->field_windmill_vermogen_value);
    $item->setAttribute("LOCATION",$row->field_windmill_provincie_value);
    $item->setAttribute("START_YEAR",$row->field_windmill_startjaar_value);
    $data->appendChild($item);
}

$root->appendChild($data);
echo $xml->saveXML(); 
```

在这里，我想将 ITEM 作为子节点附加到数据，但 ITEM 被附加到项目而不是数据。我正在使用 PHP。任何人都可以帮助它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:49:31.397

只需更换

```
$data=$xml->createElement("ITEM"); 
```

和

```
$item=$xml->createElement("ITEM"); 
```

结果将是

```
<?xml version="1.0"?>
<ROOT>
    <DATA>
        <ITEM COMPANY="COMPANY0" HEIGHT="HEIGHT0" POWER="POWER0" LOCATION="LOCATION0" START_YEAR="START_YEAR0"/>
        <ITEM COMPANY="COMPANY1" HEIGHT="HEIGHT1" POWER="POWER1" LOCATION="LOCATION1" START_YEAR="START_YEAR1"/>
        <ITEM COMPANY="COMPANY2" HEIGHT="HEIGHT2" POWER="POWER2" LOCATION="LOCATION2" START_YEAR="START_YEAR2"/>
    </DATA>
</ROOT> 
```

# ajax - ExpressionEngine - 如何实现 Ajax？

> ID：13600011
> 
> 赞同：0
> 
> 时间：2012-11-28T07:33:07.107
> 
> 标签：ajax, expressionengine

[这个](https://stackoverflow.com/questions/6588954/expression-engine-controllers)问题有一个答案，基本上是说让模板组和模板像控制器一样工作并像数据一样输出 JSON。

这是在 ExpressionEngine 中执行此操作的正确方法吗？还是有本地的、更“自然”的方式来做 Ajax？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:07:28.273

这里的最佳方法可能取决于您正在使用的数据。如果您希望从核心频道条目模块输出 JSON 格式的内容，那么我建议您使用 Rob Sanchez 的[ExpressionEngine JSON 插件](https://github.com/rsanchez/json)。

如果您正在使用自定义构建的模块，那么您不妨进一步扩展它并实现 JSON 方法。例如，如果您有一个 Widgets 模块，您可以`json()`在其中创建一个方法，然后通过`{exp:widgets:json var="foo"}`.

# batch-file - 使用批处理文件同时处理

> ID：13600012
> 
> 赞同：1
> 
> 时间：2012-11-28T07:33:07.717
> 
> 标签：batch-file, cmd, batch-processing, simultaneous

我想在批处理文件中同时处理不同的文件，我使用的命令是

> 对于 (AXUD*,DSET*,APEC*) 中的 %%f 执行 teqc +qc %%f

但据我观察，程序是一个一个处理文件，先处理AXUD，再处理完DSET文件

我怎样才能让它同时处理所有 3 个文件。

希望能帮上忙

比你提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:27:08.467

```
for %%f in (AXUD*,DSET*,APEC*) do (
  START teqc +qc %%f
) 
```

可能是这样吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:56:40.610

您需要在后台模式下启动每个文件，这可以使用 start 命令的 /B 参数来完成

PS：无需使用**,**或**;分隔表达式**

```
@Echo OFF

:: By Elektro H@cker

For %%# in (AXUD* DSET* APEC*) DO (
    START /B teqc +qc %%#

    REM If you have files with space in filenames then you better try to use this:
    REM START /D /B "C:\Full path to teqc\" teqc.exe +qc "%%#"
)

Pause&Exit 
```

# c# - 调试器菜单“设置下一条语句”在VS2012单元测试项目中不起作用？

> ID：13600015
> 
> 赞同：0
> 
> 时间：2012-11-28T07:33:15.167
> 
> 标签：c#, unit-testing, visual-studio-2012

我遇到了奇怪的问题，调试器菜单“设置下一条语句”不能在 VS2012 单元测试项目中工作？它总是弹出警告对话框，显示“无法将下一条语句设置到此位置”。但我可以在其他类型的项目中使用这个菜单，例如 asp.net、winform、wpf 等。有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:25:18.030

我知道发生了什么事。似乎在单元测试中使用 fakes 框架的缺陷。如果我在单元测试中删除假货程序集，则 set next 语句可以正常工作。如果我添加任何假货组件，它就不起作用。

# php - mysql在php中使用时是否支持内连接和外连接

> ID：13600016
> 
> 赞同：-1
> 
> 时间：2012-11-28T07:33:15.067
> 
> 标签：php, mysql

我的项目有更多过滤器需要连接查询，嵌套查询来获取所需的结果，有很多过滤器所以我担心 php 是否支持这些东西，因为我知道 MINUS 查询不起作用在 php(mysql) 中。如果有人在使用联接时遇到任何问题？如果是，那么解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:34:33.750

是的，多次使用没有任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:37:54.493

联接与日期基有关，为什么它们会在 PHP 中产生一些问题，它们会正常工作... [使用联接的 reff](https://stackoverflow.com/questions/4897954/joining-tables-from-different-database) 另请参阅[用于 reff 的多个数据库联接](https://stackoverflow.com/questions/4845351/multiple-database-joins)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:36:57.893

它适用于所有连接类型。我已经使用了所有类型，直到现在都没有遇到任何问题。

# c#-4.0 - 并行 foreach 并发字典 添加

> ID：13600017
> 
> 赞同：1
> 
> 时间：2012-11-28T07:33:18.463
> 
> 标签：c#-4.0, task-parallel-library, concurrent-programming, concurrent-collections

我有电话簿中的条目：姓名+地址。来源在一个网站上，计数超过 1K 条记录。

问题是：

**我如何使用/** `ConcurrentDictionary`实现`ParallelForeach`**？**

我还不如问它会更好地执行：

`ConcurrentDictionary`&`ParallelForeach`

对比

`Dictionary`&`foreach`

由于名称**不允许重复**作为键，而且我认为我理解正确，只有当键不存在时才`ConcurrentDictionary`具有自己的 add() 内置函数。`TryAdd`所以不允许添加已经处理好的重复键的问题，所以从那时起我可以清楚地看到平衡正在转向`ConcurrentDictionary`而不是标准顺序`Dictionary`

那么如何从任何给定的数据源添加名称和地址并通过 Parallelforeach 将其加载到 ConcurrentDictionary

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:38:37.160

> 计数超过 1K 条记录。

1K多多少？因为 1K 记录会在眨眼之间添加，不需要任何并行化。

此外，如果您通过网络获取数据，则该成本将*大大*超过添加到字典的成本。因此，除非您可以并行*获取*数据，否则使代码更复杂以将数据并行添加到字典是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-27T00:20:06.800

这是一个老问题，但这可能对某人有所帮助：

如果您试图通过 ConcurrentDictionary 分块并进行一些处理：

```
using System.Collections.Generic;
using System.Threading.Tasks;
using System.Collections.Concurrent;

namespace ConcurrenyTests
{
    public class ConcurrentExample
    {
        ConcurrentExample()
        {
            ConcurrentDictionary<string, string> ConcurrentPairs = new ConcurrentDictionary<string, string>();

            Parallel.ForEach(ConcurrentPairs, (KeyValuePair<string, string> pair) =>
            {
                // Do Stuff with
                string key = pair.Key;
                string value = pair.Value;
            });
        }
    }
} 
```

我认为您不能使用 Parallel.ForEach 来插入新字典，除非您已经有一个与您正在迭代的长度相同的对象。即包含您想要下载并插入到字典中的文本文档的 URL 列表。如果是这种情况，那么您可以使用以下内容：

```
using System.Threading.Tasks;
using System.Collections.Concurrent;

namespace ConcurrenyTests
{
    public class ConcurrentExample
    {
        ConcurrentExample()
        {
            ConcurrentDictionary<string, string> ConcurrentPairs = new ConcurrentDictionary<string, string>();
            ConcurrentBag<string> WebAddresses = new ConcurrentBag<string>();

            Parallel.ForEach(WebAddresses, new ParallelOptions { MaxDegreeOfParallelism = 4 }, (string webAddress) =>
            {
                // Fetch from webaddress
                string webText;
                // Try Add
                ConcurrentPairs.TryAdd(webAddress, webText);

                // GetOrUpdate
                ConcurrentPairs.AddOrUpdate(webAddress, webText, (string key, string oldValue) => webText);

            });
        }
    }
} 
```

如果从网络服务器访问，您可能需要增加或减少 MaxDefreeOfParallelism，这样您的带宽就不会被阻塞。

Parallel.ForEach：[https ://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreach?view=netcore-2.2](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreach?view=netcore-2.2)

ParallelOptions：[https ://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.paralleloptions?view=netcore-2.2](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.paralleloptions?view=netcore-2.2)

# android - ListView 删除项目时出现问题

> ID：13600018
> 
> 赞同：1
> 
> 时间：2012-11-28T07:33:18.750
> 
> 标签：android, listview, android-listview

我对 Android 开发还很陌生，并且仍在学习一些技能，但是遇到了 ListView 和 ArrayAdapter 删除项目的问题。我一直在尝试大量的示例并尽可能多地阅读材料，但我想我可能会遗漏一些东西。对于我的一生，我无法让它在我的代码中工作。

任何帮助，将不胜感激。我在这里包含了代码。

```
public class Favourites extends ListActivity implements OnClickListener {

private static final String TAG = "favourites";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.favourites);

    // Test list of strings- eventually to be replaced 
    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
              "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
              "Linux", "OS/2" };

    // First paramenter - Context
    // Second parameter - Layout for the row
    // Third parameter - ID of the TextView to which the data is written
    // Forth - the Array of data
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);

    setListAdapter(adapter);
    ListView list = getListView();

    Log.d(TAG,"adapter count: " + adapter.getCount());

    // Define listView Long Click listener
    list.setOnItemLongClickListener(new OnItemLongClickListener() {         
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
            String item = (String) getListAdapter().getItem(position);                    

            // Remove Item
            AlertDialog.Builder adb = new AlertDialog.Builder(Favourites.this);
            adb.setTitle("Delete?");
            adb.setMessage("Are you sure you want to remove " + item +" (" + position + ")");
            final int positionToRemove = position;
            final String removeItem = item;

            adb.setNegativeButton("Cancel", null);
            adb.setPositiveButton("Ok", new AlertDialog.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {        
                // *** Here is where I am experiencing issues ***
                adapter.remove(positionToRemove);
                adapter.notifyDataSetChanged(); 

                Toast.makeText(getApplicationContext(),
                      "Favourite "+ removeItem +" (" + positionToRemove + ") Removed!", Toast.LENGTH_LONG).show();
                }
             });
             adb.show();
             // Return true to consume the click event. In this case the
             // onListItemClick listener is not called anymore.  
             return true;
        }
    });

    // Close button
    View butClose = findViewById(R.id.closeButton);
    butClose.setOnClickListener(this);

    // Add button
    View butAdd = findViewById(R.id.addButton);
    butAdd.setOnClickListener(this);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:18:04.540

您实际上并没有直接从适配器中删除。您必须首先从 ArrayList 中删除，即您的数据。所以，改变

```
adapter.remove(positionToRemove);
adapter.notifyDataSetChanged(); 
```

至

```
values.remove(positionToRemove);
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:48:49.703

**对我有用的代码是：**

```
public void onClick(View v) 
{ 
 if (idx != 0) 
 { 
 String delete = (String) ((OdrLst.getAdapter()).getItem(idx));
 //Log.d("Itemdeleted",delete); 
 adapter.remove(delete); 
 adapter.notifyDataSetChanged(); 
 OdrLst.setAdapter(adapter); 
 //Log.d("adapter count after", adapter.getCount() + ""); 
 //Log.d("lv count after", OdrLst.getCount() + ""); 
 } 
} 
```

idx 它应该是您的索引位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:05:39.437

我在 HTC wildfire 和 Nexus 7 上遇到了类似的问题，`ListView`删除项目后没有刷新屏幕。但是有些设备没有遇到这样的问题 - 例如三星 S II 没有问题

修复很奇怪（至少对我来说），我`background="@android:color/black"`从布局中取出线`ListView`，一切都开始正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:53:24.460

您可以尝试调用`getListAdapter()`您使用对象“适配器”的位置。喜欢

```
getListAdapter().remove(positionToRemove);
getListAdapter().notifyDataSetChanged(); 
```

# c++ - 为 c++ 程序编写 MASM 函数

> ID：13600019
> 
> 赞同：2
> 
> 时间：2012-11-28T07:33:18.983
> 
> 标签：c++, c, assembly, masm

谁能指点我一个很好的教程/解释在汇编中编写函数的基础知识，然后将它们链接到 C++ 程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:20:20.043

1.  将`.asm`文件添加到项目并在其中实现所需的功能。编译后，您将获得`.obj`与汇编源文件相对应的标准文件。
2.  在汇编源代码中声明您的函数，`extrn`以允许从其他链接单元调用它们。
3.  在您的`C++`代码中将外部函数声明`asm`为`extern`并带有`C`链接 ( `extern "C"`) - 这是调用的汇编约定，您必须遵守。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:05:57.120

以下是您可以使用的几篇文章：http: [//courses.engr.illinois.edu/ece390/books/labmanual/c-prog-mixing.html](http://courses.engr.illinois.edu/ece390/books/labmanual/c-prog-mixing.html)

[http://lavernasbrute.blogspot.com/2010/02/calling-assembly-functions-in-c.html](http://lavernasbrute.blogspot.com/2010/02/calling-assembly-functions-in-c.html)

只是谷歌'C中的汇编函数'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:00:03.747

您可以使用内联 ASM，但可能不支持某些指令。但完全够了。如您所知，一些 CRT 功能是由内联 ASM 实现的。

```
__asm
{
    emit ...
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:40:48.753

看看[这个](http://www.deconflations.com/2011/masm-assembly-in-visual-studio-2010/)，应该有帮助

# object - 如何使用 OpenCV BackgroundSubtractorMOG2 获取移动对象的蒙版

> ID：13600021
> 
> 赞同：3
> 
> 时间：2012-11-28T07:33:31.557
> 
> 标签：object, opencv, background, mask, foreground

我想掩盖视频中的移动物体。我发现 OpenCV 有一些内置的 BackgroundSubtractors，这可能会节省我很多时间。但是，根据[官方参考](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=background#BackgroundSubtractorMOG2%20:%20public%20BackgroundSubtractor)，功能：

```
void BackgroundSubtractorMOG2::operator()(InputArray image, OutputArray fgmask, double learningRate=-1) 
```

应该输出一个掩码 fgmask，但它没有。调用上述方法后，fgmask 变量将包含“掩码的轮廓”。这很奇怪。我想要的只是一个用白色填充的简单封闭区域（例如）来表示移动的物体。我怎么能那样做？

任何回复或建议将不胜感激。非常感谢。

这是我的代码：

```
int main(int argc, char *argv[])
{
    cv::BackgroundSubtractorMOG2 bg = BackgroundSubtractorMOG2(30,16.0,false);
    cv::VideoCapture cap(0);
    cv::Mat frame, mask, _frame, _fmask;
    cvNamedWindow("mask", CV_WINDOW_AUTOSIZE);
    for(;;)
    {
        cap >> frame;
        bg(frame,fmask,-1);

        _frame = IplImage(frame);
        _fmask = IplImage(fmask);

        cvShowImage("mask", &_fmask);
        if(cv::waitKey(30) >= 0) break;
    }
    return 0;
} 
```

输出视频的快照是： ![在此处输入图像描述](../Images/93c96f63d7d3fd109045137760289f11.png)

ps 我的工作环境是 OSX 10.8 上的 OpenCV2.4.3 和带有苹果 LLVM 编译器 4.1 的 XCode 4.5.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T05:31:00.340

如果您想获取前景中充满白色像素的整个对象，那么我会请您告诉我一些您的经验。

我的问题是，对于您上面提到的代码，当您在相机前产生更多运动时，您会得到更多的白色像素吗？

如果是，那么有两个参数需要了解您的要求。

首先是历史参数。您在构造函数**BackgroundSubtractorMOG2(30,16.0,false) 中配置为 30；**. 你可以通过增加来测试这个参数，比如 300。它将保持前景中对象的运动历史。因此，如果您在 300 帧内完全从起始位置移动，那么您将根据需要将整个对象覆盖为白色像素。但它会逐渐被抹去。所以它不能给你100%的解决方案。

第二个参数称为学习率。在您提到的代码中**bg(frame,fmask,-1);** 其中 -1 是您的学习率。您可以将其设置为 0.0 到 1.0，默认值为 -1。当您将其设置为 0 时，您将获得不属于视频开头帧的对象所需的内容。您可以将这种对象称为“外来对象”。你会得到被白色像素覆盖的异物。

从我上面提到的信息中探索您的测试并分享您的经验。

# php - 将 JSON 字符串内容解析为 PHP 数组

> ID：13600024
> 
> 赞同：9
> 
> 时间：2012-11-28T07:33:48.837
> 
> 标签：php, json

我正在尝试解析 JSON 中的字符串，但不知道该怎么做。这是我试图解析为 PHP 数组的字符串的示例。

```
$json = '{"id":1,"name":"foo","email":"foo@test.com"}'; 
```

是否有一些库可以将 id、name 和 email 放入数组中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T07:36:06.853

可以使用 来完成[`json_decode()`](http://uk3.php.net/json_decode)，请务必将第二个参数设置为，`true`因为您想要一个数组而不是对象。

```
$array = json_decode($json, true); // decode json 
```

输出：

```
Array
(
    [id] => 1
    [name] => foo
    [email] => foo@test.com
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T07:35:34.693

尝试[`json_decode`](http://php.net/manual/en/function.json-decode.php)：

```
$array = json_decode('{"id":1,"name":"foo","email":"foo@test.com"}', true);
//$array['id'] == 1
//$array['name'] == "foo"
//$array['email'] == "foo@test.com" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T07:37:16.023

```
$obj=json_decode($json);  
echo $obj->id; //prints 1  
echo $obj->name; //prints foo 
```

把这个数组做这样的事情

```
$arr = array($obj->id, $obj->name, $obj->email); 
```

现在你可以像这样使用它

```
$arr[0] // prints 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-14T09:29:25.130

您可以使用[**json_decode()**](https://www.php.net/manual/ru/function.json-decode.php)

```
$json = '{"id":1,"name":"foo","email":"foo@test.com"}';  

$object = json_decode($json);

Output: 
    {#775 ▼
      +"id": 1
      +"name": "foo"
      +"email": "foo@test.com"
    } 
```

> *使用方法：* **$object->id** //1

```
$array = json_decode($json, true /*[bool $assoc = false]*/);

Output:
    array:3 [▼
      "id" => 1
      "name" => "foo"
      "email" => "foo@test.com"
    ] 
```

> *使用方法：* **$array['id']** //1

# php - Symfony 2.1 复选框的自定义字段

> ID：13600028
> 
> 赞同：0
> 
> 时间：2012-11-28T07:34:01.567
> 
> 标签：php, symfony

我使用了自定义表单字段教程[http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)，它在单选按钮中创建了一个性别选择。到现在为止还挺好。

我需要显示具有多项选择的复选框。我怎样才能添加它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:43:25.460

此字段可能呈现为几个不同的 HTML 字段之一，具体取决于此表[http://symfony.com/doc/current/reference/forms/types/choice.html#select-tag中显示的扩展选项和多个选项Symfony 书中的复选框或单选按钮](http://symfony.com/doc/current/reference/forms/types/choice.html#select-tag-checkboxes-or-radio-buttons)。

# ios - 每次打开项目时 Xcode 都会意外退出

> ID：13600029
> 
> 赞同：57
> 
> 时间：2012-11-28T07:34:05.700
> 
> 标签：ios, xcode, macos

我只是打开我的xcode，当我打开我当前的项目时，它显示警告，如“xcode 意外退出”，带有 3 个选项“忽略”、“报告”和“重新打开”，当我点击重新打开时，它会自动打开 xcode 窗口并再次自动打开它将关闭并显示相同的警告。

为什么会发生这种情况我不是新手，如果有人对此有想法请帮助我。如果我打开任何其他项目，那么它的打开没有问题...问题出在我当前的应用程序上。

版本：
xcode 是 4.3.1
mac OS X 版本是 10.7.3
请告诉我为什么会这样。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-11-28T08:10:36.503

Xcode 将一些用户状态信息存储在 Xcode 项目“文件”中，该文件实际上是一个文件夹。该状态信息可能已损坏。您通常可以丢弃`.xcodeproj`文件夹中**除**文件之外的所有内容`project.pbxproj`。这可能会解决您的问题。

打开包含您的文件的文件夹`.xcodeproj`。右键单击或按住 Control 单击该`.xcodeproj`文件，然后选择“显示包内容”。然后扔掉除了`project.pbxproj`文件之外的所有东西。

![清理 xcodeproj 包](../Images/605d44458b2a6dfabfb1e6c83c5daa6f.png)

如果您知道 Xcode 工作区是什么，并且您实际上正在使用它，那么您可能没有`project.xcworkspace`要丢弃的文件，或者您可能不想丢弃它。但是如果你不知道 Xcode 工作区是什么，那么你就没有使用它，所以你可以扔掉`project.xcworkspace`. Xcode 会自动重新创建它。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-02-08T07:52:24.893

删除派生数据对我有用。只需打开另一个项目或打开 xcode，而无需打开损坏的项目。最后打开首选项并转到位置选项卡。单击带有箭头的灰色圆圈（保存所有项目派生数据的位置。）[![在此处输入图像描述](../Images/68daae624130eeebd5181d5785bd6eb8.png)](https://i.stack.imgur.com/AH2l0.png)

在那里删除损坏的项目的派生数据，一切顺利。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-23T08:07:28.587

你可以运行 XcodeSystemResources.pkg。

```
/Applications/Xcode.app/Contents/Resources/Packages/XcodeSystemResources.pkg. 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-12T10:35:17.357

我建议打开终端并复制以下内容：

`rm -rf ~/Library/Developer/Xcode/DerivedData`

**注意：**感谢 zirinisp 提供了对我有用[的答案](https://stackoverflow.com/questions/38016143/how-to-delete-derived-data-in-xcode-8)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-12-11T09:04:01.513

转到 [ProjectName].xcworkspace 文件。右键单击。显示包裹内容。删除 xcuserdata 文件夹。删除后，运行项目，它肯定会工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-06T10:45:10.847

只需删除 Xcode 保存的状态即可。它对我有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-23T06:14:36.390

我正在使用 CocoaPod (XCode 8.2)，这些步骤解决了我的问题：

1.  转到项目文件夹
2.  打开 .xcworkspace 的包内容
3.  删除包内容中的 xcuserdata
4.  从垃圾箱中删除（可选）
5.  返回并打开 .xcworkspace（XCode 会提示重新打开，但不要这样做）
6.  继续您的项目:)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-11-21T10:32:40.607

打开项目文件夹显示来自 . **xcworkspace**或 . **xcodeproj**您将看到 2 个文件夹**xcshareddata**和**xcuserdata**请删除**xcuserdata**文件夹 尝试打开应用程序

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-30T12:37:42.127

如果您使用的是**CocoaPods**，只需按照 Rob 的说明进行操作，但要使用**.xcworkspace**文件，不要删除**.xcworkspacedata**文件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-03-11T11:05:55.447

现在是2021年，仍然有这个问题。重新启动没有帮助，操作系统更新没有帮助。

然后我更新了 App Store 中的所有内容（iMovie、Numbers、Pages、Keynote），Xcode 现在可以正常工作了。

请不要问为什么。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-02T09:30:55.033

我正在使用 CocoaPods，并遵循 Rob 对 .xcworkspace 文件的说明，如上面 Allecto 所示。在.xcworkspace 文件上“显示包内容”后，我唯一做的就是将xcuserdata 文件夹重命名为xcuserdataCrashApril2。然后我可以毫无问题地打开项目（工作区）。唯一的区别是 xcode 没有保存之前打开的 .swift 源代码文件的状态（这对我来说不是一个大问题）。

我想我可以删除 xcuserdataCrashApril2 文件，但我将它保留在那里以提醒下次发生这种情况时该怎么做。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-25T18:39:48.640

我正在使用**Xcode 8.3**

去`~/Library/Developer/Xcode`

删除派生数据文件夹，它对我有用。

可以帮助你。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-04T13:14:20.303

上面的所有建议都没有帮助我，所以我通过 pod init & pod install 添加了 pod 文件，并成功打开了新创建的 .xcworkspace。希望它可以帮助某人

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-28T13:25:47.730

XCode 10.3 也有这个错误。在我的情况下，我启动应用程序 - >它显示警报“意外退出”，我选择什么都没关系：重新打开与否 - 它再次崩溃。

**解决方案：重新启动 Mac :))**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-18T05:32:12.587

1.  先删除 Project.xcworkspace。
2.  打开终端
3.  转到应用程序文件夹
4.  运行命令 pod install
5.  删除派生数据
6.  打开 Project.xcworkspace

这个对我有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-03-13T09:24:32.437

我解决了

1.  转到项目文件夹
2.  打开 .xcodeproject 的包内容
3.  删除包内容中的 xcuserdata
4.  返回并删除 .xcworkspace

/// 请不要删除 .pbxproj

尝试打开您的项目并开始工作:)

# java - 如何使用java将数组划分为6（6）个元素

> ID：13600032
> 
> 赞同：-4
> 
> 时间：2012-11-28T07:34:20.230
> 
> 标签：java, arrays

我有一个数组，我想将一组 6（六）项写入文本文件。

```
Array:-
[C, A2, A, E, B, D, F,A3,C1,D1,G1] 

output:-
test1.txt:-[C, A2, A, E, B, D]

test2.txt:-[F,A3,C1,D1,G1]

   Object ia[] = al.toArray(); 
      for(int i=0; i<ia.length; i++) 
      {count=1;
            for(j=0;j<=5;j++)
            {
                System.out.println("Set"+ ia[j]); 
            }
            j=j;

     //     System.out.println( ia[i]); 
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:37:20.203

您可能正在寻找[`Arrays.copyOfRange()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28T%5B%5D,%20int,%20int%29).

**代码快照：**

```
String[] arr = { "C", "A2", "A", "E", "B", "D", "F","A3","C1","D1","G1"  };
System.out.println(Arrays.toString(Arrays.copyOfRange(arr, 0, 6)));
System.out.println(Arrays.toString(Arrays.copyOfRange(arr, 6, 11))); 
```

将产生（如预期）：

```
[C, A2, A, E, B, D]
[F, A3, C1, D1, G1] 
```

当然，您可以将其概括为`copyOfRange()`在以变量为参数的循环中调用（而不是硬编码为简单的代码快照）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:37:15.850

```
second_arr [] =new array[count];
for(int i=0;i<array.length;i++){
  if(i%count == 0 ){
   for(int j=0;j<count;j++)
         System.out.print(second_arr[j]+ " ");
  }
 second_arr[i%count]=arr[i]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:36:50.437

您可以使用[`PrintWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)（[此处](http://www.java-samples.com/showtutorial.php?tutorialid=329)的示例）。

你基本上循环你的数组元素，每次你达到一个索引，当除以 6 产生 0 时，你创建一个新文件并开始写入它。

# ajax - 如何使用 Jquery Ajax 调用将 div 值分配给 php 变量

> ID：13600034
> 
> 赞同：0
> 
> 时间：2012-11-28T07:34:28.937
> 
> 标签：ajax, jquery, html

我有一个href标签，我写了onclick func，

```
<a href="#" id="thumb" class="thumb" onclick="doThumb('<?php echo the_ID(); ?>');"><?php the_post_thumbnail('portfolio_thumbs'); ?></a> 
```

在 onclick() 函数中，代码是，

```
<script type="text/javascript">
   function doThumb(temp) 
   var tempThmb = temp;
   document.getElementById("selectedResult").innerHTML=tempThmb;
   return tempThmb;
}
</script> 
```

返回的值，我将它打印在一个空的 div 中。

```
<div id="selectedResult" name="selectedResult"></div>'; 
```

现在我的问题是，我在空 div 中得到结果，但我必须将 div 的值传递给 $my_postid。

```
$my_postid = "Should pass the value here";//This is page id or post id
$content_post = get_post($my_postid); 
```

我怎样才能做到这一点我必须使用ajax jquery，请帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:23:52.073

这在你正在做的方式中是不可能的。PHP是服务器端语言，javascript是客户端。一种方法是在`onclick`您的图像事件中发送一个 ajax 请求。并发送`id`in ajax 请求。ajax 将根据该 id 获取帖子并将返回给您。然后，您可以在任何地方显示该帖子内容。

**收到提问者代码后更新**

您无需在函数中进行初始操作。只需如下更改即可。

```
 function doThumb(temp) {
        var $mainCats=temp;
        alert ($mainCats);
        $.ajax ( {
            url:"<?php bloginfo('wpurl'); ?>/wp-admin/admin-ajax.php",
            type:'POST',
            data:'action=my_special_ajax_callc&main_catidc=' + $mainCats,
            onsuccess : function(data) {
                $("#selectedResults").removeAttr("disabled"); 
                $("#selectedResults").append(data); 
            }
       } );
   } 
```

# wpf - 数据绑定中的自引用

> ID：13600035
> 
> 赞同：0
> 
> 时间：2012-11-28T07:34:31.703
> 
> 标签：wpf, xaml, datatemplate

假设有一个组合框：

```
<ComboBox ItemsSource="{Path=ListOfItems}">
  <ComboBox.ItemTemplate>
    <DataTemplate>
      <CheckBox Tag="{Binding Path=this}"
        Content="{Binding Path=AProperty}" />
    </DataTemplate>
  </ComboBox.ItemTemplate>                                       
</ComboBox> 
```

现在我想要的是 ComboBox 的*Content*属性绑定到相应的*列表元素的*属性*AProperty*（工作正常），而*Tag*属性绑定到*列表元素*本身，这不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:39:36.070

要绑定到当前数据上下文，您可以使用`.`：

```
<CheckBox Tag="{Binding Path=.}" 
```

或者，实际上相同，完全省略路径：

```
<CheckBox Tag="{Binding}" 
```

# jquery - 我应该检查页面上是否存在该项目（jQuery）

> ID：13600045
> 
> 赞同：0
> 
> 时间：2012-11-28T07:35:27.010
> 
> 标签：jquery, select, input, null, isset

我想应用输入中的值来选择文档何时准备就绪。一切正常。

您是否建议检查两者是否`select#city`存在`input#city_hidden`以使此代码更好？

```
$(document).ready(function ()
{
  $("select#city").val($("input#city_hidden").val());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:41:57.693

该决定取决于许多因素，而不仅仅是这行代码。

从技术上讲，您不需要检查 select#city 是否存在。如果没有，jQuery 将什么也不做，因为 $("select#city") 选择器将为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:42:51.173

如果您 100% 确定 $("input#city_hidden") 和 $("select#city") 始终存在 - 没有理由检查。如果它们是您的 html 的一部分，我会说不需要检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:53:32.993

如果您真的想检查页面中是否存在项目，您可以在 if 语句中使用 .length 。

```
if($('#myDiv').length){
    //#myDiv exists because the length is not 0
} 
```

这是一个 jsFiddle：http: [//jsfiddle.net/Ajvp7/](http://jsfiddle.net/Ajvp7/)

# haskell - 如何创建 ADT 的拆箱实例？

> ID：13600049
> 
> 赞同：6
> 
> 时间：2012-11-28T07:35:35.290
> 
> 标签：haskell, unboxing, algebraic-data-types

我很难找到适用于如何使我的数据类型未装箱、用于未装箱向量的良好资源。我将如何制作数据类型

```
data Color = Yellow | Red | Green | Blue | Empty deriving (Show, Eq) 
```

是拆箱的一个实例？

编辑：经过一番探索之后，似乎通过强制某些函数中的参数严格，我可以说服 GHC 自动将它们拆箱。如果这适用于我的情况？我怎么知道哪些参数要严格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T12:28:34.887

您可以使用[vector-th-unbox](http://hackage.haskell.org/packages/archive/vector-th-unbox/latest/doc/html/Data-Vector-Unboxed-Deriving.html)包为您派生实例。您只需要提供与某些现有`Unbox`类型之间的转换功能：

```
colorToWord8 :: Color -> Word8
colorToWord8 = ...

word8ToColor :: Word8 -> Color
word8ToColor = ...

derivingUnbox "Color"
  [t| Color -> Word8 |]
  colorToWord8
  word8ToColor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:37:13.610

`GeneralizedNewtypeDeriving`在这里对您没有帮助，因为您正在处理“成熟”的 ADT，而不是包装已经是`Unbox`.

您的数据类型更适合盒装向量。如果`Data.Vector.Unboxed`您需要保存更原始的数字类型，如`Double`s、`Int`s 等，请使用。也许您可以创建`Color`的实例`Unbox`，但几乎可以肯定不值得[麻烦](http://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/Data-Vector-Unboxed.html)。导入`Data.Vector`，您将被设置：

```
import qualified Data.Vector as V

Color = Red | Blue deriving Show

someColors :: V.Vector Color
someColors = V.fromList [Red, Blue, Blue, Red] 
```

# netbeans - 将 Netbeans 与 phpunit 集成没有找到骨架生成器

> ID：13600050
> 
> 赞同：7
> 
> 时间：2012-11-28T07:35:43.120
> 
> 标签：netbeans, phpunit, integration

我有 netbeans 7.1.2 并安装了 phpunit 和骨架生成器，与[文档](http://netbeans.org/kb/docs/php/phpunit.html?print=yes#installing-phpunit)中的说明相同。在 netbeans 选项中，在 phpunit 的选项卡中没有用于添加骨架生成器脚本的字段，并且在尝试生成测试时会显示警告，说明未生成测试。见控制台。在控制台中写着：

塞巴斯蒂安伯格曼的 PHPUnit 3.7.9。

无法识别的选项--skeleton-test

无论如何告诉netbeans骨架脚本在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T03:24:24.027

问题只是针对 netbeans 的版本。安装netbeans 7.2.1，一切都会好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:49:41.183

试试这个 MAMP

sudo /Applications/MAMP/bin/php/php5.4.4/bin/pear install phpunit/DbUnit phpunit/PHPUnit_Selenium phpunit/PHPUnit_SkeletonGenerator phpunit/PHPUnit_Story

PHPUnit_SkeletonGenerator-1.2.0 安装在 /Applications/MAMP/bin/php/php5.4.4/bin/ 然后`phpunit-skelgen`在 netbeans中选择

# json - 处理breezejs中的引用

> ID：13600052
> 
> 赞同：1
> 
> 时间：2012-11-28T07:36:01.637
> 
> 标签：json, reference, knockout.js, breeze

我们正在使用 ASP.NET MVC4 和 Web Api + Ko + Breeze 使用 EF Code First 开发单页应用程序。

我们的（简化的）数据模型如下所示

```
class Product {
    public String Name { get; set; }
    public ICollection<ImageCollection> ImageSets { get; set;}
    public Image DefaultImage { get; set; }
}

class ImageCollection {
    public ICollection<Image> Images { get; set; }
}

class Image {
    public String ImageUrl { get; set; }
} 
```

DefaultImage 是一个导航属性（带有外键）并且是 ImageSets 中的图像之一。

我们公开了 Products() 的 Web API 方法和默认的 Breeze 配置。线路上的 JSON 序列化输出具有对象引用（即 PreserveReferencesHandling.Object），因此当我想绑定 ImageUrl 时，ko 无法解析该值。

html看起来像这样

```
 <img data-bind="attr: { src: DefaultImage().ImageUrl, title: Name}" /> 
```

当我将序列化程序切换为 PreserveReferencesHandling.None 时，绑定有效。

问题：如何使默认配置起作用？或者如果我为 Breeze 切换到 PreserveReferencesHandling.None 有什么陷阱/缺点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:20:33.023

通常，您不希望将 PreserveReferencesHandling 切换为 None，因为您将失去序列化循环引用的能力，并且您的有效负载会变得更大。

我实际上不明白为什么您的绑定在设置后会开始工作。理解这一点的第一步可能是在查询后检查 ko 对象是否实际包含正确的数据。

请记住，微风导航属性是延迟加载的，因此您可能没有在初始查询中加载它们。看一下“EntityAspect.loadNavigationProperty”方法。

# c++ - 数据类型类和读取器/解析器之间的耦合

> ID：13600053
> 
> 赞同：1
> 
> 时间：2012-11-28T07:36:03.200
> 
> 标签：c++

假设我有一个 Image 类

```
class Image {
private:
  unsigned char* data;
  int sizex;
  int sizey;

public:
  Image(std::string filename);
}; 
```

和一个从磁盘读取图像的类：

```
class JpegReader; 
```

在通过文件名构造函数读取图像时如何设计这些类？我想减少耦合并避免循环依赖。

一种选择是让 JpegReader 与 Image 类成为朋友，让它写入成员变量：

```
class JpegReader {
public:
  static void read(std::string filename, Image& image);
};

Image::Image(std::string filename) {
  JpegReader::read(filename, *this);
}

void JpegReader::read(std::string filename, Image& image) {
  image.data = readdata();
  image.sizex = readsizex();
  image.sizey = readsizey();
} 
```

另一种选择是使用所有成员变量作为参数的构造函数：

```
Image(unsigned char* aData, int aSizex, int aSizey) : data(aData),
                                                      sizex(aSizex),
                                                      sizey(aSizey) {}

void JpegReader::read(std::string filename, Image& image) {
  Image tmp(readdata(), readsizex(), readsizey());
  std::swap(tmp, image);
} 
```

或者让 read() 返回一个 Image，并让 Image 构造函数进行交换：

```
class JpegReader {
public:
  static Image read(std::string filename);
};

Image::Image(std::string filename) {
  Image tmp = JpegReader::read(filename);
  std::swap(*this, tmp);
}

Image JpegReader::read(std::string filename) {
  Image tmp(readdata(), readsizex(), readsizey());
  return tmp;
} 
```

你会如何设计它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:42:50.643

我可能会这样设计它：

```
class Image {
public:
  Image(unsigned char* aData, int aSizex, int aSizey) { ... }
} 
```

图像阅读器的抽象基类（允许您在不了解它们的情况下传递阅读器）：

```
class ImageReader {
public:
  virtual Image read(const std::string& filename) = 0;
}; 
```

`Image`具体阅读器（除了通过公共构造函数之外没有耦合）：

```
class JpegReader: public ImageReader {
public:
  virtual Image read(const std::string& filename) {
    return Image(readdata(), readsizex(), readsizey());
  }
}; 
```

# android - 如何检查用户的数据（用户名和电子邮件地址）是否存在于数据库中？

> ID：13600059
> 
> 赞同：-1
> 
> 时间：2012-11-28T07:36:14.010
> 
> 标签：android, sqlite

我在应用程序中创建了一个 SQLite 数据库。当用户注册时，我希望系统检查用户和电子邮件ID是否已经存在于数据库中，然后只创建一个新行是用户之前没有注册。如何实现检查部分？任何意见将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:28:23.453

mLogin.setOnClickListener(new OnClickListener() {

```
 @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            mCursor = db.execSQL("SELECT * FROM Friend where F_email='"+mUserId.getText().toString()+"' and Pass='"+mPassword.getText().toString()+"'");
            if(mCursor.getCount() > 0)
            {
                email_id = mUserId.getText().toString();
                Intent i1 = new Intent(getApplicationContext(),
                        BuddyInOut.class);
                startActivity(i1);
                mUserId.setText("");
                mPassword.setText("");
            }
            else {
                // AlertDialog on invalid User Name and Password
                AlertDialog.Builder mAlert = new AlertDialog.Builder(
                        Login.this);
                mAlert.setTitle("Login");
                mAlert.setMessage("Invalid Username or Password");
                mAlert.setPositiveButton("ok",
                        new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog,
                            int which) {
                        // TODO Auto-generated method stub
                    }
                });
                mAlert.show();
                mUserId.setText("");
                mPassword.setText("");
            }
        }
    }); 
```

# java - 休眠父子关系

> ID：13600060
> 
> 赞同：0
> 
> 时间：2012-11-28T07:36:19.187
> 
> 标签：java

假设我有实体 A 和实体 B。实体 A 与 B 有 @OneTomany 关系。

我只想在 A 中有一个或多个与之关联的子对象时才在 A 中保留行，否则会引发异常。

我怎样才能在hibernate中实现上述要求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:46:30.380

您忽略了提及您使用的是什么版本的 Hibernate。无论如何，这都属于验证的范围。幸运的是，在 Hibernate 3 和 4 中，您都可以使用 Hibernate Validator 来完成这项工作：

```
public class EntityB implements Serializable {
}

public class EntityA implements Serializable {
    @NotNull
    @Size(min = 1)
    private Set<EntityB> relatedEntities;
} 
```

您可能需要将 Hibernate Validator jar 拉入您的项目才能执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:51:17.720

实体类：Register.class

公共类注册{

私有长 regId；

@OneToMany(mappedBy = "reg")

私人设置地址集；

公共设置 getAddrSet() {

```
 return addrSet;

}

public void setAddrSet(Set<Address> addrSet) {
    this.addrSet = addrSet;
} 
```

}

实体类：Address.java

公共类地址{

对象值；

@ManyToOne

私人注册注册；

公共注册 getReg() {

```
 return reg;

}

public void setReg(Register reg) {
    this.reg = reg;
} 
```

}

公共无效类搜索对象（）{

公开列表 lst；公共注册 searchRegisterRow(Long regId){

```
 Session session = null;

 SessionFactory sessionFactory = null;

 register result = null; 

    try{    

       sessionFactory = new Configuration().configure().buildSessionFactory();      
        session =sessionFactory.openSession();
       String SQL_QUERY ="from Register r where r.redId = "+regId;
       Register reg = session.createQuery(SQL_QUERY);  

             for(Iterator it=lst.iterator();it.hasNext();){

                             reg=(Register)it.next();

            if(reg.getAddrSet().size() > 0){

                              result = reg;

                            }
                            else{

                                throw new Exception();

                            }

        }

        return result;
    }
    }catch(Exception e){

        System.out.println(e.getMessage());

    }finally{
        // Actual contact insertion will happen at this step
        session.flush();

        session.close();

        } 
```

} }

我认为您应该尝试上面的代码。这会帮助你。

# selenium-rc - 运行硒服务器

> ID：13600061
> 
> 赞同：0
> 
> 时间：2012-11-28T07:36:20.683
> 
> 标签：selenium-rc

当我尝试`server(rc)`在命令提示符下运行时，它说它已被使用。因此，我在 5555 中运行服务器并在脚本中进行了相同的更改。但是，它仍然显示

```
WARN - Failed to start: SocketListener0@0.0.0.0:4444 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:45:47.090

您是否尝试使用以下链接停止服务器？

**http://localhost:4444/selenium-server/driver/?cmd=shutDownSeleniumServer**

只需在您用于运行测试的浏览器中打开上述链接即可。

打开上述链接后，selenium 服务器停止。

然后您可以继续从端口 4444 启动服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T06:37:05.200

关闭在端口 4444 上运行的浏览器，然后重新启动 selenium 服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T06:27:53.647

我有同样的问题，输入这个

```
webdriver-manager --seleniumPort 4455 start 
```

它将在端口 4455 上启动它（您也可以尝试不同的数字）

# ruby-on-rails - rails3 中缺少模板操作错误

> ID：13600062
> 
> 赞同：0
> 
> 时间：2012-11-28T07:36:22.077
> 
> 标签：ruby-on-rails, ruby, actionview, actioncontroller, rufus-scheduler

我在控制器中定义了一个方法，如下所示：

```
def self.dailymail
  ....  #fill data from db

  ac = ActionController::Base.new()  
  kit = PDFKit.new(ac.render_to_string(:action => "formatinhtml.html.erb",:rawdata => data))
  pdf = kit.to_pdf
 ...   #send pdf in mail
 end 
```

formatinhtml 就像：

```
def formatinhtml
    @dailyrep = params[:rawdata]
    respond_to do |format|
      format.html # daily.html.erb
    end
end 
```

我必须使用 self.dailymail 以便我可以从模型调用它，然后从 rufus 调度程序调用它。
但是，我仍然收到错误，例如：

```
scheduler caught exception:
Missing template action_controller/base/daily.html with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :xls], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "F:/DEVELOPMENT/TrackIt/app/views"
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_view/path_set.rb:58:in `find'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_view/lookup_context.rb:109:in `find'... 
```

那么，我需要做什么？

**更新：**调试后，我发现`formatinhtml`实际上并没有调用动作；我已经定义了必要的路线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:27:14.540

您的“daily.html”所在的文件夹与您的控制器不同

# c++ - 为什么在“自动返回”功能中需要 decltype？

> ID：13600066
> 
> 赞同：3
> 
> 时间：2012-11-28T07:36:42.167
> 
> 标签：c++, c++11, auto, decltype

考虑[这段代码](http://ideone.com/eDHI42)：

```
#include <iostream>
#include <typeinfo>

using namespace std;

template<typename T1, typename T2>
auto add(T1 l, T2 r) -> decltype(l + r){
    return l + r;
}

class C {};

class B {};

class A {
public:
    C operator+(const B& b) {
        C c;
        return c;
    }
};

int main() {
    // Using add()
    A a;
    B b;
    auto c = add(a, b);

    cout << typeid(a).name() << endl;
    cout << typeid(b).name() << endl;
    cout << typeid(c).name() << endl;
    cout << endl;

    // Doing the same thing but not on a function
    A a2;
    B b2;
    auto c2 = a2 + b2;

    cout << typeid(a2).name() << endl;
    cout << typeid(b2).name() << endl;
    cout << typeid(c2).name() << endl;
} 
```

我只是有一个非常简单的问题：为什么我需要在第二种方法（不使用的方法）中放入不同`decltype()`的后缀返回类型？`add()``add()`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T07:45:05.277

> 为什么我需要将 decltype() 放在 add() 的后缀返回类型中，这与第二种方法（不使用 add() 的方法）不同？

因为这是 C++ 规则的一部分。解析器从左到右运行；在大多数情况下，如果尚未达到标识符，则解析器不知道它。标识符如函数参数。

因此，如果您使用表达式来确定返回值的类型，并且该表达式以某种方式使用参数，则必须将返回类型放在函数参数之后。

> 但是我的观点是，为什么编译器知道A + B返回C时不能自动推断返回类型？

因为这些是 C++ 的规则：函数必须具有直接在函数声明中指定的返回类型。不允许编译器推断它。

[然而。](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3386.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:42:43.917

> 为什么我需要将 decltype() 放在 add() 的后缀返回类型中

因为您将模板函数的返回类型声明为`auto`，并且您需要在函数声明之后以某种方式指定返回类型。

您也可以像这样指定它：

```
auto add(T1 l, T2 r) -> C 
```

但是，如果您将例如整数传递给该函数，那将不会很好地工作。

我没有看到第二个 add 函数，但如果你的意思是`operator+`，那么你指定了它的返回类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:59:14.177

您不必这样做 - 您可以在返回类型规范中放入任何类型的内容。如果您的问题是“为什么编译器不能为我推断出正确的类型？”：在少数情况下，它可以，但至少它需要查看定义。在某些情况下，编译器已经*推断*出返回类型：在由单个 return 语句组成的 lambdas 中

```
 auto l = [](int i) { return i>0; }; 
```

IIRC 雄心勃勃地放宽对这些返回类型声明的限制，例如，允许像您建议的那样仅使用自动返回类型的单行函数。

# php - 标头函数不起作用PHP

> ID：13600067
> 
> 赞同：1
> 
> 时间：2012-11-28T07:36:42.980
> 
> 标签：php, header

成功注册后我重定向了一个页面，代码工作正常，但标题功能不工作&页面不重定向。页面未重定向。我的代码如下

```
 <?php
error_reporting(E_ALL ^ E_NOTICE);
error_reporting(E_ALL ^ E_WARNING);

//include("lib/local_config.php");
include("lib/config.php");

$activation=md5(uniqid(rand(), true));

if(isset($_POST["tb_submit"]))
{
    $fname=$_POST["tb_fname"];
    $email=$_POST["tb_email"];
    $pass=$_POST["tb_pass"];
    $repass=$_POST["tb_repass"];
    $contact=$_POST["tb_contact"];

    $select_email=mysql_query("select email from user_reg where email='$email'");
    $rows=mysql_fetch_row($select_email);
    $e_id=$rows[0];

    if(!$email==$e_id && $pass==$repass)
    {
        $insert="insert into user_reg ( fname ,email ,password ,contact,Activation)    values      ('$fname' , '$email' , '$pass' ,'$contact' ,'$activation')";
        $insert_query=mysql_query($insert);

        if(mysql_affected_rows($connect) == 1)
        //if(mysql_affected_rows() == 1)
        {
            $to = $_POST['tb_email'];
            $subject = "Fundu App Creator - Registration confirmation mail ";
            $message = <<<DEMO
                      <html>
                      <head>

                      <link href='http://www.fundumobi.com/app/templatemo_style.css' type='text/css'  
                       rel='stylesheet' />
                     <link href='http://www.fundumobi.com/app/styles/frm.css' rel='stylesheet' 
                       type='text/css' />
                     <style type='text/css'>

                     .style1 {
                    font-size: 14px;
                    font-style: italic;
                    font-weight: bold;

                      }
                      .style2 {color: #FFFFFF}

                       </style>
                      </head>
                     <body>
                     <table width='50%' border='0' align='center'>
                     <tr>
                      <th height='100' bgcolor='#006784'>
                      <div id='site_logo'></div>    </th>
                     </tr>
                    <tr>
                    <td height='247'><div >
                      <div align='center' class='style1'>
                        <p>Your Registration is successful !!!! </p>
                        <p>Now Please click the following Button to complete the registration process:</p>
                        <p>&nbsp;</p><br/>
                        <div ><a href='http://www.fundumobi.com/app/activation.php?act=$activation'>      
                       <img src='images/button66535179.png'/></a></div>
                      </div></td>
                     </tr>
                     <tr>
                       <td height='64' bgcolor='#006784'><div 
                      align='center'>www.funduappcreator.com</div>    </td>
                     </tr>
                    </table>
                    </body>
                    </html>
                    DEMO;

            $from = "contact@fundumobi.com";

            mail($to, $subject, $message, 'From:'.$from);
            header("location:mesg.php");
        }
        else
        { // If it did not run OK.
            header("location:index.php?er=2");
        }
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:40:48.903

输出内容后不能发送标头。在这里，您在 PHP 标记之前输出空格：

```
 <?php
^^ remove this whitespace 
```

检查你的错误日志，你会发现：

> 警告：无法修改标头信息 - 标头已发送

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:41:11.403

您应该有一个`exit;`重定向代码之后。看到[这个评论](http://www.php.net/manual/en/function.header.php#109087)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:41:48.187

尝试，使用输出缓冲区

```
<?php ob_start() ?> 
```

在这段代码的顶部

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-21T11:29:42.450

用这个。它对我有用。将此函数放在代码的顶部：

```
function move_to(){
    header("Location:page_example.php");
} 
```

并在任何地方调用该函数：

```
move_to() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:58:39.557

使用 headers_sent 函数来检测问题。 [http://php.net/manual/en/function.headers-sent.php](http://php.net/manual/en/function.headers-sent.php)

> 检查是否或已发送标头。
> 
> 一旦标题块已经发送，您就不能使用 header() 函数添加更多标题行。使用此功能，您至少可以防止收到与 HTTP 标头相关的错误消息。另一种选择是使用输出缓冲。

```
// An example using the optional file and line parameters, as of PHP 4.3.0
// Note that $filename and $linenum are passed in for later use.
// Do not assign them values beforehand.
if (!headers_sent($filename, $linenum)) {
    header('Location: http://www.example.com/');
    exit;

// You would most likely trigger an error here.
} else {

    echo "Headers already sent in $filename on line $linenum\n" .
          "Cannot redirect, for now please click this <a " .
          "href=\"http://www.example.com\">link</a> instead\n";
    exit;
} 
```

对于您的代码：

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
error_reporting(E_ALL ^ E_WARNING);

//include("lib/local_config.php");
include("lib/config.php");

$activation=md5(uniqid(rand(), true));

if(isset($_POST["tb_submit"]))
{
    $fname=$_POST["tb_fname"];
    $email=$_POST["tb_email"];
    $pass=$_POST["tb_pass"];
    $repass=$_POST["tb_repass"];
    $contact=$_POST["tb_contact"];

    $select_email=mysql_query("select email from user_reg where email='$email'");
    $rows=mysql_fetch_row($select_email);
    $e_id=$rows[0];

    if(!$email==$e_id && $pass==$repass)
    {
        $insert="insert into user_reg ( fname ,email ,password ,contact,Activation)    values      ('$fname' , '$email' , '$pass' ,'$contact' ,'$activation')";
        $insert_query=mysql_query($insert);

        if(mysql_affected_rows($connect) == 1)
        //if(mysql_affected_rows() == 1)
        {
            $to = $_POST['tb_email'];
            $subject = "Fundu App Creator - Registration confirmation mail ";
            $message = <<<DEMO
                      <html>
                      <head>

                      <link href='http://www.fundumobi.com/app/templatemo_style.css' type='text/css'  
                       rel='stylesheet' />
                     <link href='http://www.fundumobi.com/app/styles/frm.css' rel='stylesheet' 
                       type='text/css' />
                     <style type='text/css'>

                     .style1 {
                    font-size: 14px;
                    font-style: italic;
                    font-weight: bold;

                      }
                      .style2 {color: #FFFFFF}

                       </style>
                      </head>
                     <body>
                     <table width='50%' border='0' align='center'>
                     <tr>
                      <th height='100' bgcolor='#006784'>
                      <div id='site_logo'></div>    </th>
                     </tr>
                    <tr>
                    <td height='247'><div >
                      <div align='center' class='style1'>
                        <p>Your Registration is successful !!!! </p>
                        <p>Now Please click the following Button to complete the registration process:</p>
                        <p>&nbsp;</p><br/>
                        <div ><a href='http://www.fundumobi.com/app/activation.php?act=$activation'>      
                       <img src='images/button66535179.png'/></a></div>
                      </div></td>
                     </tr>
                     <tr>
                       <td height='64' bgcolor='#006784'><div 
                      align='center'>www.funduappcreator.com</div>    </td>
                     </tr>
                    </table>
                    </body>
                    </html>
DEMO;

            $from = "contact@fundumobi.com";

            mail($to, $subject, $message, 'From:'.$from);
            if (!headers_sent($filename, $linenum)) 
            {
                header("location:mesg.php");
            }
            else
            {
                echo "Headers already sent in $filename on line $linenum\n" .
                  "Cannot redirect, for now please click this <a " .
                  "href=\"http://www.example.com\">link</a> instead\n";
                exit;
            }
        }
        else
        { // If it did not run OK.
            header("location:index.php?er=2");
        //use exit after redirection request
        exit;
        }
    }
}

?> 
```

**ps：**也可以看看“DEMO”；在您的代码中的位置，它应该在行首，不是吗？重定向后使用退出。在你之前删除空格

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-09T13:41:05.353

试试这个，这肯定会奏效

```
<script type="text/javascript">
<!--
   window.location="http://www.newlocation.com";
//-->
</script> 
```

# android - eclipse，新的android应用程序项目，“下一步按钮”在想要项目名称的部分被禁用

> ID：13600068
> 
> 赞同：15
> 
> 时间：2012-11-28T07:36:44.060
> 
> 标签：android, eclipse, eclipse-plugin, adt

我想开始为android编程所以我下载了Eclipse并在上面安装了ADT插件并下载了Android SDK现在当我想在“文件->新建->Android应用程序项目”中创建一个新的android项目时，它会将我引导到一个页面想要“应用程序名称”和“项目名称”等，所以我填写了这样的字段：

应用名称：你好

项目名称：你好

包名：test.example.hello

所需的最低 SDK：API8：Android 2.2(Froyo)

目标SDK：API16：Android 4.1（果冻豆）

编译：

主题：无

但是“下一步”按钮被禁用！在页面顶部它说：“包名称不能以点开头或结尾”并且主题字段附近有一个小红色东西（十字）所以我无法创建新项目我该怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T16:51:05.373

问题是`SDK Platform`我的电脑上没有安装，所以我打开`Window>Android SDK Manager`然后点击`SDK Platform`然后点击`Install 1 package`然后问题就解决了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-16T02:07:07.407

这对我有用。我去了帮助->“安装新软件...”，然后我添加了这个 URL（确保它是 https。https [://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T07:38:38.440

您不能拥有以“com.example”开头的包名称。由于您的包名称是 test.example 这不是问题。

正如警告所说，查看包裹的开头或结尾是否有任何句点。

检查屏幕截图。你的窗口应该看起来像这样。并确保您的包名称中没有多余的空格或句点。

![在此处输入图像描述](../Images/04b14f5ac1725fdcba5eb80d96735b58.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-16T05:18:58.157

转到 Window>Customize Perspective> Menu Visiblity（文件下会有 NEW 选项，您可以从 FILE>NEW 菜单中选择要创建的文件和项目的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-24T01:32:14.097

签入选项`Window-> Preferences-> General-> Startup and Shutdown`被`Android Development Toolkit`取消，勾选并重启eclipse。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-04T03:59:21.220

如果 Eclipse 仍在加载 Android 工具，则可能会发生这种情况。

等到 Eclipse 不忙后再试。（如果使用默认布局，您可以在 Eclipse 窗口的右下角看到 Eclipse 正在做什么）

# c - 三字字符

> ID：13600070
> 
> 赞同：2
> 
> 时间：2012-11-28T07:36:47.537
> 
> 标签：c, trigraphs

```
c99 standard  5.2.1.1 Trigraph sequences 
```

2 示例以下源代码行

```
printf("Eh???/n"); 
```

变为（在替换三元组序列后 ??/）

```
printf("Eh?\n"); 
```

据说它会替换三字母序列，但它不是。

正在打印`"Eh???/n"`

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:42:34.820

在 gcc 中默认禁用三元组。如果您使用 gcc，则编译`-trigraphs`以启用三元组：

```
gcc -trigraphs source.c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-07T03:31:38.360

printf 中的`??/`是一个三元字符，它是 C 预处理器的一部分。

如果使用 启用 trigraph `gcc -trigraphs source.c`，它将转换`??/`为`\`. 您的代码将如下所示：

`printf("Eh???/n"); // Before enable trigraph`

`printf("Eh?\n"); // After enable trigraph`

您可以访问[https://en.wikipedia.org/wiki/Digraphs_and_trigraphs#C](https://en.wikipedia.org/wiki/Digraphs_and_trigraphs#C)了解更多信息。

[C ??!??! 的](https://stackoverflow.com/q/7825055/8275080)可能重复 [运营商呢？](https://stackoverflow.com/q/7825055/8275080)

# ios - 开发类似于现有应用程序的 iphone 应用程序的最佳方法是什么？

> ID：13600073
> 
> 赞同：1
> 
> 时间：2012-11-28T07:36:54.667
> 
> 标签：ios

您好，我将开发一个与 appstore 中已有的应用程序类似的 iphone 应用程序。我想知道我是否可以从头开始应用程序，或者我可以自定义现有应用程序的代码。我需要知道最好的创建此类应用程序的方法。请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:37:58.690

除非其他应用程序的开发人员与您共享源代码，否则您必须从头开始。您不能只从应用商店中选择一个应用并对其进行编辑。

# ruby-on-rails - 索引 ElasticSearch 中方法的结果（Tire + ActiveRecord）

> ID：13600086
> 
> 赞同：11
> 
> 时间：2012-11-28T07:37:39.583
> 
> 标签：ruby-on-rails, elasticsearch, tire

我正在使用 Tire 和 ActiveRecord 为弹性搜索的数据集建立索引。我有一个 Artist 模型，它有_many :images。如何索引返回特定图像的 Artist 模型的方法？或者引用关联模型的方法？我想要的艺术家结果将包括与艺术家关联的主要图像的路径（原始图像和缩略图）。

我试过这个映射：

```
mapping do
  indexes :id,                  :index    => :not_analyzed
  indexes :name                     
  indexes :url
  indexes :primary_image_original       
  indexes :primary_image_thumbnail
end 
```

引用这些 Artist 方法：

```
 def primary_image_original  
        return images.where(:priority => 'primary').first.original
    end

    def primary_image_thumbnail
        return images.where(:priority => 'primary').first.thumbnail_150
    end 
```

这只是忽略了索引方法。基于[Elasticsearch、Tire 和 Nested queries/associations with ActiveRecord](https://stackoverflow.com/questions/11692560/elasticsearch-tire-and-nested-queries-associations-with-activerecord)等其他答案，我尝试了这个：

```
mapping do
  indexes :id,                  :index    => :not_analyzed
  indexes :name 
  indexes :url
  indexes :images do
    indexes :original
    indexes :thumbnail_150
    indexes :priority
  end
end

def to_indexed_json
    to_json(include: { images: { only: [:original, :thumbnail_150, :priority] } } )
end 
```

但这也不会返回我所追求的。我花了几个小时在谷歌上搜索并阅读了 elasticsearch 和 Tire 文档，但还没有找到可以遵循的这种模式的工作示例。谢谢你的想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:20:15.403

因此，在此处包含您对索引问题的解决方案。

### 索引关联

索引方法的一种方法是将其包含在`to_json`调用中：

```
def to_indexed_json
  to_json( 
    :only   => [ :id, :name, :normalized_name, :url ],
    :methods   => [ :primary_image_original, :primary_image_thumbnail, :account_balance ]
  )
end 
```

另一种，更可取的是，使用`:as`映射块中的选项：

```
mapping do
  indexes :id, :index    => :not_analyzed
  indexes :name             
  # ...

  # Relationships
  indexes :primary_image_original, :as => 'primary_image_original'
  indexes :account_balance,        :as => 'account_balance'
end 
```

### 导入时对抗*n+1 个查询*

索引速度慢的问题很可能是由于数据库中的*n+1 个*查询：对于您索引的每个艺术家，您都会发出一个图像查询（原始和缩略图）。一种更高效的方法是在一个查询中加入关联的记录；请参阅Rails 指南中的[*Eager Loading Associations*](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)。

Tire[`Index#import`](http://rubydoc.info/gems/tire/Tire/Index:import)方法和 import Rake 任务允许您传递参数，然后将这些参数沿线路发送到 paginate 方法。

所以让我们比较一下幼稚的方法：

```
bundle exec rake environment tire:import CLASS=Article FORCE=true
Article Load (7.6ms)  SELECT "articles".* FROM "articles" LIMIT 1000 OFFSET 0
Comment Load (0.2ms)  SELECT "comments".* FROM "comments" WHERE ("comments".article_id = 1)
Comment Load (0.1ms)  SELECT "comments".* FROM "comments" WHERE ("comments".article_id = 2)
...
Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE ("comments".article_id = 100) 
```

当我们传递`include`片段时：

```
bundle exec rake environment tire:import PARAMS='{:include => ["comments"]}'  CLASS=Article FORCE=true 
Article Load (8.7ms)  SELECT "articles".* FROM "articles" LIMIT 1000 OFFSET 0
Comment Load (31.5ms) SELECT "comments".* FROM "comments" WHERE ("comments".article_id IN (1,2, ... ,100)) 
```

好多了:) 请尝试一下，如果它解决了您的问题，请告诉我。

* * *

您也可以在 Rails 控制台中尝试一下：`Article.import`vs `Article.import(include: ['comments'])`. . *附带说明一下，这个确切的问题是在Tire*`params`的整个导入工具链中支持哈希的原因。

# ruby-on-rails - 包括控制器内重新打开的类

> ID：13600094
> 
> 赞同：0
> 
> 时间：2012-11-28T07:38:22.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, recurly

我想通过重新打开它来向[Recurly::Account](https://github.com/recurly/recurly-client-ruby)类添加自定义方法，然后在我的控制器中使用它。

像这样的东西：

```
#reopen class
class Recurly::Account

  #my custom method
  def my_meth_1
  end

end

class MyController
  def index
    account = Recurly::Account.find( ... ) #gem method
    account.my_meth_1 #my custom method
  end
end 
```

我应该在哪个文件中重新打开 Recurly::Account 类，它应该如何包含在我的控制器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:11:38.397

我认为`lib`文件夹是一个很好的地方。

只需像这样创建一个文件

```
# lib/recurly.rb

class Recurly::Account
  def my_meth_1
  end
end 
```

> 它应该如何包含在我的控制器中？

您可能需要打开自动加载`lib`，请参阅本主题如何做到这一点[Rails 3 自动加载](https://stackoverflow.com/questions/4073856/rails-3-autoload)。之后，您可以直接从控制器调用它。

# eclipse-plugin - Eclipse 插件：获取线的偏移量

> ID：13600098
> 
> 赞同：0
> 
> 时间：2012-11-28T07:38:32.330
> 
> 标签：eclipse-plugin

我是插件开发的新手，我正在编写/扩展一个 Eclipse 插件。我最初有一个文本文件，其中包含带有以下数据的代码审查结果。

```
**line_from=70=**     **line_to=80=**     **date=2012/11/20 10:32:54=**     **reviewer=ccc=**     **responsible=xx=**    **revision_nr=1.40=**     **offset=1458=**     **length=344=** 
```

基于某些条件，我说 70 到 80 的行号与 100 到 110 相同。现在我想添加一个标记并突出显示 100-110 的行，但我没有这个位置的偏移量。有人可以告诉我如何从行号中获取偏移量。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T18:43:58.667

我认为现在回答你为时已晚，但也许我可以帮助其他有同样问题的人。

要解决此问题，您可以使用[IDocument 接口](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/text/IDocument.html)。

```
IDocument document = (IDocument) MyPlugin.getEditor().getDocumentProvider().getDocument(MyPlugin.getEditor().getEditorInput()); 
```

因此文档将加载在编辑器中打开的文件。您只需要使用 getLineOffset() 方法，该方法返回线的偏移量。

# iphone - 使用相机测量从 iPhone 相机到物体的距离

> ID：13600103
> 
> 赞同：1
> 
> 时间：2012-11-28T07:38:40.483
> 
> 标签：iphone, xcode

我想实现一个应用程序来测量相机和聚焦对象之间的距离。请帮我启动这个应用程序。即使我不知道如何启动这个应用程序。请给我一些想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:58:55.543

这非常困难！Iphone 有许多功能，要实现这一点，您需要跟踪光束或类似激光的东西。您可以尝试使用 GPS 并获取距离，但专注于对象肯定需要一些预加载的数据。我建议一种叫做“视差法”的方法，天文学家很难用这种方法来测量地球与恒星之间的距离。这绝对是可能的，但需要大量的研发，iPhone相机有局限性，在你使用视差方法之前需要一些研发，因为它需要相机以不同的角度捕捉照片。还有很多数学的东西（比如三角函数）绝对是可能的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T08:14:43.353

有一个简单的方法，无论如何，它不是那么准确。您需要获取使用您的应用程序的人的高度，或者更具体地说，获取镜头的高度（实际空间中的 y 位置）。通过使用三角形公式，您可以测量距离。

想象一个三角形，其中`A`用户的脚、`B`iPhone 摄像头和`C`您想知道距离的对象的底部。你有`c`，人的高度（或相机镜头的高度），角度`α`，这是 90° 和`β`你可以通过加速度计从 iPhone 获得的角度。剩下的就是数学：

```
γ = 180 - α - β
b = c * sin(β) / sin(γ) 
```

但是有一些限制：您要测量距离的对象和用户必须在同一水平面上，或者至少用户必须知道要测量到英尺水平的点。从大约 10 米开始，这种方法变得非常不准确。并且：您必须通过减去偏移量来归一化加速度计——例如让用户将其平放在水平面上。

![在此处输入图像描述](../Images/ecc9af92760264ef8929c67563fec5ed.png)

希望这可以帮助。

（对不起我糟糕的数学英语；））

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T08:09:58.530

虽然理论上你可以做到这一点，但我认为这实际上不能用 iPhone 相机完成。优点是，iPhone 相机的焦距是固定的，所以如果你知道要测量的物体的大小，就可以计算出到它的距离。如果您不知道尺寸，则需要从不同角度制作几张图片或一段视频。但是你需要知道每帧的距离或位置。你可以使用 GPS，但它不够准确，除非我们谈论的是几百米外的物体。如果是这种情况，您将需要来自彼此相距很远的位置的对象的不同图像才能获得不错的准确性。总的来说，理论上是可能的，但我怀疑你会得到任何令人满意的结果。

# email - 通过 cakephp shell 发送电子邮件致命错误：找不到类“CakeLog”

> ID：13600106
> 
> 赞同：1
> 
> 时间：2012-11-28T07:38:47.627
> 
> 标签：email, shell, cakephp

我正在尝试使用 cakephp shell 发送电子邮件。以下是我的代码：

```
 <?php
error_reporting(0);
class EmailShell extends AppShell {
    public $uses = array('Email');

    public function show() {
        $Email = new CakeEmail();
        $Email->from('abc@gmail.com');
        $Email->to('xyz@gmail.com');
        $Email->subject('Forgot Password');
        $Email->send();
    }
}
?> 
```

当我在 shell 中运行它时，我收到以下错误：

```
 Fatal error: Class 'CakeLog' not found in /mnt/public_html/music_directory/web/cakephp/app/Config/bootstrap.php on line 172 
```

我哪里错了？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:41:32.347

如果您实际上在早期（在您自己的引导程序中）使用 CakeLog 类，则需要断言它已加载。

在使用该类之前，您忘记了以下语句：

```
 App::uses('CakeLog', 'Log'); 
```

# javascript - 当 HTML 元素滚动到视图中时是否会触发 Javascript 事件？

> ID：13600108
> 
> 赞同：6
> 
> 时间：2012-11-28T07:39:01.863
> 
> 标签：javascript, jquery, html, dom

我想在元素滚动到视图时加载元素以减少服务器负载，例如缩略图，但希望它们的占位符`divs`在页面加载时就存在。`div`要做到这一点，我认为当它变得可见时我需要某种触发器。

[建议使用 jquery-appear](http://code.google.com/p/jquery-appear/)，但我似乎无法从任何地方获得它的副本（Google 给了我一个 403 错误）

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:44:50.857

我认为 jQuery way points 是您可能需要的插件：

[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

以下是调用航点插件的方法：

```
$(document).ready(function() {
    var $loading = $("<div class='loading'><p>Loading more items&hellip;</p></div>"),
    $footer = $('footer'),
    opts = {
        offset: '100%'
    };

    $footer.waypoint(function(event, direction) {
        $footer.waypoint('remove');
        $('body').append($loading);
        $.get($('.more a').attr('href'), function(data) {
            var $data = $(data);
            $('#container').append($data.find('.article'));
            $loading.detach();
            $('.more').replaceWith($data.find('.more'));
            $footer.waypoint(opts);
        });
    }, opts);
}); 
```

# jquery - 如何在 asp.net 代码隐藏中获取 HiddenField 值

> ID：13600109
> 
> 赞同：3
> 
> 时间：2012-11-28T07:39:04.867
> 
> 标签：jquery, asp.net, jquery-1.5

如何在 asp.net 代码隐藏中获取 HiddenField 值？提前致谢！

```
 public partial class ReadCard : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            this.ClientScript.RegisterStartupScript(this.GetType(), "MyClick ", "<script>ReadCard();</script> ");
            string b= HiddenField1.Value; //How to get the value "123"??
        }
    } 
```

aspx：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <script src="jquery-1.5.2.min.js" type="text/javascript"></script>
         <script type="text/javascript">
             function ReadCard() {
                 $("#HiddenField1").val("123");
             }
        </script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:HiddenField ID="HiddenField1" runat="server" />
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:41:08.830

客户端 ID 不一定与服务器 ID 相同（除非您使用`CliendIDMode=Static`. 您可以插入服务器标签来获取客户端 ID。

另请注意，您必须将脚本放在`document.ready`标签内，或者将脚本放在页面底部——否则脚本将找不到 HiddenField1，因为它还没有加载到 DOM 中。

```
$(document).ready(function() {
    $("<%= HiddenField1.ClientID %>").val("123");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:44:15.880

尝试 ：

```
$("#<%= HiddenField1.ClientID %>").val("123"); 
```

在 .cs 文件中：

```
string b= HiddenField1.Value; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T07:41:17.287

你的问题是你如何设置它。

```
$("#<%=HiddenField1.ClientID%>").val("123"); 
```

您需要使用呈现的控件 ID。

跟进。这段代码

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            this.ClientScript.RegisterStartupScript(this.GetType(), "MyClick ", "<script>ReadCard();</script> ");
            string b= HiddenField1.Value; //How to get the value "123"??
        } 
```

实际上是一样的：

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            HiddenField1.Value = "123";
        } 
```

因为您实际上尝试通过注册 javascript 代码来设置值，但是为什么呢？您可以直接从后面的代码中设置该值。

你真的不会在哪里获得那个价值？

# sql - 解决 QUERY 以显示 TOP 5 畅销产品

> ID：13600110
> 
> 赞同：1
> 
> 时间：2012-11-28T07:39:10.303
> 
> 标签：sql, oracle, sqlplus

我有一个包含和`Customer_Invoice`列的表。我想以降序显示特定商品和已售商品数量的前 5 件商品，即如果商品 A 的数量为 5，商品 B 的数量为 3，则商品 A 应位于顶部，商品 B 将排在第二位。`item_name``Quantity`

```
|  ITEMCODE | QUANTITY |
------------------------
|     kb434 |        1 |
| A4tech123 |        4 |
|   HDD40GB |        4 |
|    Cell12 |        4 |
|    Icd123 |        2 |
| A4tech123 |        6 | 
```

在上图中，我希望`A4tech123`在第 1 个没有`HDD40GB`第 2 个没有，`Cell12`在第 3 个没有，依此类推。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T07:41:35.883

```
select top 5 Item_code, sum(Quantity)
from customer_invoice
group by Item_code
Order by sum(Quantity) desc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T07:41:58.440

```
select top 5 item_name , sum(Quantity) as Quantity from Customer_Invoice 
group by item_name 
ORDER BY sum(Quantity) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:52:44.580

如果您使用 postgres 作为数据库，请使用以下查询：

```
select Item_code, Quantity from customer_invoice order by Quantity desc limit 5 
```

或者

如果您使用任何其他数据库，请使用此查询：

```
select top 5 Item_code, Quantity from customer_invoice order by Quantity desc 
```

我没有检查第二个，因为我使用的是 Postgres DB，所以在使用之前确认该查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-29T01:35:25.807

```
CREATE TABLE invoice
    (ITEMCODE varchar(9), QUANTITY int)
;

INSERT INTO invoice
VALUES
    ('kb434', 1),
    ('A4tech123', 4),
    ('HDD40GB', 4),
    ('Cell12', 4),
    ('Icd123', 2),`
    ('A4tech123', 6)
;

SELECT ITEMCODE,
       SUM(QUANTITY) as total_quantity,
       ROW_NUMBER() OVER (order by sum(QUANTITY) desc) as rank_n
FROM invoice
GROUP BY ITEMCODE 
```

[http://sqlfiddle.com/#!18/da13e/6](http://sqlfiddle.com/#!18/da13e/6)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-28T07:43:27.567

```
SELECT TOP 5 * FROM Customer_Invoice ORDER BY QUANTITY 
```

# ios - 使用 UIKit 制作一个简单的绘图应用程序

> ID：13600121
> 
> 赞同：0
> 
> 时间：2012-11-28T07:39:54.383
> 
> 标签：ios, xcode, uikit, drawing

我正在制作一个绘图应用程序。我想像这样[http://www.not1.xpg.com.br/wp-content/uploads/2011/04/imagens-disney-colorir-mickey.gif为透明的PNG文件着色](http://www.not1.xpg.com.br/wp-content/uploads/2011/04/imagens-disney-colorir-mickey.gif)

但我想以这样的方式着色，这样当我在它们上着色时黑线不会消失。

而且当我使用橡皮擦时，橡皮擦不应该擦除黑线，应该清除颜色而不是绘制白色。

我该如何解决这些问题？任何帮助将非常感激。

到现在我已经做到了。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{      
    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];
    lastPoint = [touch locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    mouseSwiped = YES;
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];

    UIGraphicsBeginImageContext(self.view.frame.size);
    [self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush );
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);

    CGContextStrokePath(UIGraphicsGetCurrentContext());
    self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    [self.tempDrawImage setAlpha:opacity];
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    if(!mouseSwiped)
    {
        UIGraphicsBeginImageContext(self.view.frame.size);
        [self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, opacity);
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        CGContextFlush(UIGraphicsGetCurrentContext());
        self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }

    UIGraphicsBeginImageContext(self.mainImage.frame.size);
    [self.mainImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) blendMode:kCGBlendModeNormal alpha:1.0];
    [self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) blendMode:kCGBlendModeNormal alpha:opacity];
    self.mainImage.image = UIGraphicsGetImageFromCurrentImageContext();
    self.tempDrawImage.image = nil;
    UIGraphicsEndImageContext();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:10:12.187

您可能在谈论透明度/ alpha 值。您可以在绘图时使用特定颜色来完成所有这些操作。对于擦除，请使用`[UIColor clearColor]`，如果您想“在不消失的情况下绘制黑线”，请使用 alpha 值低于 1 的颜色。例如`[UIColor colorWithRed:1 green:0 blue:0 alpha:0.5]`，在现有内容上方绘制一条半透明的红线。

# java - Java 验证 Java 代码中的 HTML 字符串

> ID：13600126
> 
> 赞同：0
> 
> 时间：2012-11-28T07:40:20.153
> 
> 标签：java, html, swing

我正在尝试验证我的 HTML 中的字符串位置作为我的 Java 程序中的标记，以便如果有人更改 HTML 标记字符串，我的 Java 程序会检查该字符串是否是我写的。

这是我的java ...

```
public void init()
{
    String name = getParameter("author");
    String course = getParameter("class");

    if (name == "goes here")
    JOptionPane.showMessageDialog (null, "Good, it will setVisible(true)", "Library System", JOptionPane.WARNING_MESSAGE);
    if (name != "goes here")
        JOptionPane.showMessageDialog (null, "NOT good and will setVisible(false)", "Library System", JOptionPane.WARNING_MESSAGE);

    Container contain = getContentPane();
    contain.add(new LibraryPanel(name, course));
    setVisible(true);
} 
```

这是我的HTML...

```
<html>
<body>
<applet code=3.LibraryFrame.class width=650 height=700>
    <param name=author value="goes here">
    <param name=class value="className">
</applet>

</body>
</html> 
```

因此，当我的 HTML 标记中的字符串正确时，它总是说它不匹配。我什至在我的 showMessageDialog 中放置了 name 和 course 变量并且它匹配。

关于为什么它没有正确验证的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:44:34.977

始终将字符串与`equals()`而不是与进行比较`==`。

应该是

```
if ("David Duke".equals(name)) 
```

因为`==`比较引用数据类型的引用。

您也可以摆脱第二条`if`语句并使用`else`它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T07:44:45.320

```
if (name == "David Duke") 
```

永远不要在 Java 中使用`==`or`!=`来比较字符串。改用`equals()`：

```
if (name.equals("David Duke")) 
```

请注意，`==`检查它左右两个参数是否引用完全相同的对象 - 它不**检查**两个对象的内容是否相同。

# c - 传递函数指针并像普通对象的指针一样比较它们是否安全？

> ID：13600128
> 
> 赞同：5
> 
> 时间：2012-11-28T07:40:27.747
> 
> 标签：c, function-pointers

事情是这样的，我有几个功能，

```
void foo() {}
void bar() {} 
```

我想像普通对象的指针一样传递这些函数，

```
int main()
{
    void (*fptr1)() = foo;
    void (*fptr2)() = fptr1;
    void (*fptr3)() = bar;

    if (fptr1 == foo)
        printf("foo function\n");
    if (fptr2 == foo)
        printf("foo function\n");
    if (fptr3 == foo)
        printf("foo function\n")
} 
```

我可以这样使用这些函数指针吗？我写了一个程序来测试它，看起来还可以。此外，我认为，与可能位于`stack`or中的普通对象不同`heap`，函数位于`text segment`（对吗？），所以当我提到 时`foo`，它是否给了我`foo`文本段中函数所在的物理地址？

**跟进**

如果我确实使用 DLL，请考虑一下：首先，为函数 ptr`fptr`分配一个函数，

```
ReturnType (*fptr)(ArgType) = beautiful_func; 
```

这里有两种情况，

1) 如果 beautiful_func 不在 DLL 中，那么使用 this 是安全的`fptr`。

2）如果它在DLL中，那么以后，我认为使用它会不安全`fptr`，因为它现在可能指的是一个完全不同的函数，它不是`fptr`天生的，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:11:10.747

您可以通过简单地 == 它们来检查两个函数指针是否相等，因为它们只是普通指针。这很明显。

但是，当您说“比较”时，请检查您的真实想法：

*   您是否有兴趣检测到您被赋予了不同的“东西”
*   或者你有兴趣检测你被赋予了不同的功能吗？

比较指针（不仅是函数指针！它适用于所有指针）有点冒险：您不是在检查内容（逻辑标识），而只是检查位置（“物理”标识）。大多数时候它确实是一样的，但有时，要小心，你会偶然发现副本。

很明显，如果您创建一个编号为 1、2、3、4 的数组，然后分配另一个数组并将内容复制到那里，那么您会得到两个不同的指针，对吧？但是该数组可能对您来说是相同的，这取决于您需要它的用途。

对于函数指针，问题是一样的，甚至更多：**您实际上并不知道**编译器/链接器对您的代码做了什么。它可能优化了一些东西，它可能将一些未导出的函数合并在一起，如果它注意到它们相等，它可能复制或内联其他函数。

尤其是在处理更大的单独“子项目”时可能会发生这种情况。想象一下，您编写了一个排序函数，然后将其包含在子项目 A 和子项目 B 中，编译/构建所有内容，然后链接并运行。你会以一种或两种功能结束吗？在您真正检查并正确调整链接选项之前，这是一个难题。

这比数组复杂一些。对于数组，如果数组不同，您将获得不同的指针。这里，同一个函数可能有很多不同的地址。在C++ 中使用模板时**可能**会特别明显，但这又取决于链接器的工作表现如何。哦，很好的例子：DLL。使用基于相似代码的三个 DLL，他们几乎可以保证拥有静态链接到的所有内容的三个副本。

当谈论 DLL 时……您知道它们可以将其他代码加载/卸载到您的内存中，对吗？这意味着当您加载 DLL 时，在某个地址 XYZ 处会出现一个函数。然后你**卸载**它，它就消失了。但是当你现在加载不同的 DLL 时呢？当然，操作系统可以重新使用空间，并且可以将新加载的 DLL 映射到与前一个相同的区域。大多数时候你不会注意到它，因为新加载的 DLL 将被映射到不同的区域，但**它可能会发生**。

这意味着虽然您可以比较指针，但您得到的唯一答案是：指针是否相同？

*   如果它们不一样，那么您根本**不知道**；不同的函数指针**并不**意味着函数不同。可能是这样，在 99% 的情况下会是这样，但不必不同

*   如果它们相同：

    *   如果您没有多次加载/卸载各种动态库，您可能会假设没有任何变化，并且您可以肯定得到与以前相同的函数/对象/数组

    *   如果您正在使用可卸载的动态模块，则最好不要假设，除非您**绝对**确定**没有任何**指针来自将来将被卸载的 DLL。请注意，某些库使用动态库来实现“类似插件”的功能。小心它们的指针，并注意插件加载/卸载通知。卸载动态库时，您的函数可能会发生变化。

编辑跟进：

除非您（或您使用的某些库）曾经**卸载**DLL，否则您的指向函数的指针是安全的。

一旦加载了 DLL，唯一能改变这个 DLL 所占用的地址含义的坏事就是**卸载动态模块**。

如果您确定：

*   （1）您的指向函数的指针不针对动态模块中的函数（仅指向静态链接的代码）
*   (2) 或者它以动态模块为目标，但该动态模块**永远不会被卸载**（好的：直到程序退出或崩溃）
*   (3) 或者它以动态模块为目标，并且您确切知道哪个动态模块，并且该动态模块有时会在运行时**卸载**，但是您的代码会收到有关该事实的一些“事先通知”

那么您的函数指针可以安全地存储、使用和比较，前提是您添加了一些安全措施：

*   对于 (1)，不需要安全措施：功能不会被替换
*   对于（2），不需要安全措施：直到程序退出才能获得功能
*   对于（3），需要采取安全措施：**您**必须听取这些通知，一旦您收到有关 DLL 被卸载的通知，您**必须立即忘记**所有指向 DLL 的指针。您仍然可以安全地记住其他任何内容。当它再次加载时，您仍然可以安全地重新记住它。

如果您怀疑指向函数的指针确实以动态模块中的函数为目标，该函数将在程序退出之前的某个时间点卸载，并且：

*   您实际上并不知道该指针指向哪个 DLL
*   或者该 DLL 将在任何时候被**卸载，恕不另行通知**

那么你的函数指针根本**无法安全使用**。我的意思是无论如何。不要储存它，因为它可能会立即蒸发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:51:42.993

> 它是否给了我函数 foo 在文本段中的物理地址？

除非您正在使用原始操作系统或任何其他特殊操作系统，否则**不！**

地址不是**物理地址，而是[虚拟地址](http://en.wikipedia.org/wiki/Virtual_address_space)！**

基本上，操作系统采用了一种机制，允许程序甚至大于物理内存。所以操作系统在幕后完成了处理映射的工作。

对不起，如果我让你感到困惑。**您的理解是正确的**（以您使用函数指针的方式使用函数指针是完全可以的），但地址不是物理地址（指的是实际寻址主存储器时使用的数字）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T08:14:16.287

是的，C 标准允许您将函数指针与运算符 == 和 != 进行比较，例如从 C11 6.5.9 开始：

> 两个指针比较相等当且仅当两者都是空指针，两者都是指向同一个对象（包括指向对象的指针和其开头的子对象）或函数的指针，

函数的确切位置取决于您的平台，它可能位于文本段中，也可能位于其他位置。[在具有虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)的操作系统上运行时，地址通常是虚拟地址，而不是物理内存地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T07:49:06.123

考虑到指针比内存地址存储的事实，归结为一个数字，是的，你可以这样比较。至于其他问题，取自[此处](http://www.geeksforgeeks.org/archives/14268)，文本段将被定义为“目标文件或内存中的程序部分之一，其中包含可执行指令。”，这意味着该指针应该包含某个位置的地址文本段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:44:28.537

是的，您可以使用这种方式。而你的理解是正确的。

# jquery - 动态滚动框

> ID：13600140
> 
> 赞同：1
> 
> 时间：2012-11-28T07:41:39.610
> 
> 标签：jquery

我正在尝试实现在[http://demo.webdeveloperplus.com/dynamic-scrollbox/中找到的动态滚动框](http://demo.webdeveloperplus.com/dynamic-scrollbox/)

但它有一个问题是一遍又一遍地获取相同的列表。所以我试图只查看我的 aa.html 文件中的项目。

我的 aa.html 文件具有以下内容：

```
<p>Item1</p>
<p>Item2</p>
<p>Item3</p>
<p>Item4</p>
<p>Item5</p>
<p>Item6</p>
<p>Item7</p>
<p>Item8</p> 
```

我的实现脚本是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Scrolling Dynamic Content box</title>
<script type="text/javascript" src="js/jquery-1.3.2.js" ></script>
<script type="text/javascript">
$('document').ready(function(){
    updatestatus();

});
function updatestatus(){
    //Show number of loaded items
    var totalItems=$('#content p').length;
    $('#status').text('Loaded '+totalItems+' Items');
    $.get('aa.html', function(data) {
        var dom = $('<div/>').append(data);
        var tnoi = dom.find('p').length;
        alert("Total number of items = " + tnoi + ", Items of Current file = " + totalItems);
            if(totalItems < tnoi)
                scrollalert();

});

}
function scrollalert(){
    var scrolltop=$('#scrollbox').attr('scrollTop');
    var scrollheight=$('#scrollbox').attr('scrollHeight');
    var windowheight=$('#scrollbox').attr('clientHeight');
    var scrolloffset=20;
    if(scrolltop>=(scrollheight-(windowheight+scrolloffset)))
    {
        //fetch new items
        $('#status').text('Loading more items...');
        $.get('aa.html', '', function(newitems){
            $('#content').append(newitems);
            updatestatus();
        });
    }
    setTimeout('scrollalert();', 1500);
}
</script>

<style type="text/css" >
    #container{ width:400px; margin:0px auto; padding:40px 0; }
    #scrollbox{ width:400px; height:300px;  overflow:auto; overflow-x:hidden; border:1px solid #f2f2f2; }
    #container > p{ background:#eee; color:#666; font-family:Arial, sans-serif; font-size:0.75em; padding:5px; margin:0; text-align:right;}
</style>
</head>
<body>
  <div id="container">
    <div id="scrollbox" >
        <div id="content" >

        </div>
    </div>
    <p><span id="status" ></span></p>
</div>

<hr />
<p>
Demo Provided By: <a href="http://webdeveloperplus.com" title="Web Developer Plus - Ultimate Web Development & Design Resource" >Web
Developer Plus</a></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:57:20.280

问题是您总是`$.get()`来自同一个静态 HTML URL。您需要执行以下操作之一：

1.  使用指向某个动态 URL 的 URL，其中服务器在每个 GET 上返回连续批次的项目。（虽然这有点问题，因为它需要服务器跟踪客户端状态。）
2.  在 JavaScript 端保留一个计数器，每次`$.get()`使用计数器构建不同的 URL 时都会递增。例如

    ```
    var batch=0;  //at outer scope, or the top of your namespace
    ...
        batch += 1
        $.get('aa'+batch+'.html', '', function(newitems){ 
    ```

然后你可以有一组静态文件：`aa1.html`, `aa2.html`, `aa3.html`, 包含连续的批次。或者你可以有一个带有批处理参数的动态脚本

```
 $.get('aa?batch='+batch, '', function(newitems){ 
```

* * *

根据评论更新：

听起来您只需将整个内容加载到滚动框中一次。

如果您将脚本简化为简单的东西，例如：

```
<script type="text/javascript">
    $('document').ready(function(){
        $.get('aa.html', function(data) {
            $('<div/>').append(data);
        });
    });
</script> 
```

# ios - SVG 字体在 iOS 上不起作用

> ID：13600147
> 
> 赞同：2
> 
> 时间：2012-11-28T07:42:03.807
> 
> 标签：ios, svg, font-face, arabic

我将这些阿拉伯字体转换为与 CSS @font-face 一起使用，它们可以在桌面上工作，但不能在 iOS 上工作。我按照其他线程的建议尝试了很多东西，但没有任何乐趣。

这是页面：[http](http://bit.ly/WuBnaa) ://bit.ly/WuBnaa <- 在桌面上效果很好，而不是在 iOS 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:00:51.283

您的@font-face 中没有 svg 字体，请参见[此处](http://i4ideas.net/fatemi52/fatemi52.css)：

```
@font-face {
    font-family: 'AlFatemi52';
    src: url('http://i4ideas.net/fatemi52/alfatemi152-webfont.eot');
    src: url('http://i4ideas.net/fatemi52/alfatemi152-webfont.eot?#iefix') format('embedded-opentype'),
         url('http://i4ideas.net/fatemi52/alfatemi152-webfont.woff') format('woff'),
         url('http://i4ideas.net/fatemi52/alfatemi152-webfont.ttf') format('opentype');
    font-weight: normal;
    font-style: normal;
} 
```

如果您也将上述字体转换为 svg 字体，请确保您也获得了阿拉伯文范围（大多数在线转换服务会删除 ascii 范围之外的所有内容）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T08:34:45.460

总结一下：iOS 上的 WebKit 不支持 SVG 格式。

您将不得不提出另一种格式，因为没有人知道（Apple 除外）何时会实施（如果有的话）。

# .net - 如何确定 Visual Studio 中的 .NET 项目类型？

> ID：13600149
> 
> 赞同：18
> 
> 时间：2012-11-28T07:42:09.393
> 
> 标签：.net, visual-studio

您能否告诉我如何确定 Visual Studio 中现有 .NET 项目的类型？项目类型是指：C# 应用程序、WPF 应用程序等。

我从同事那里转移了一堆项目。有许多库项目，每个项目都执行单独的工作，例如：声明实体，进行同步。

它们在 Visual Studio 解决方案资源管理器上都有相同的图标。我只想知道这些项目基于哪个模板。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T07:56:58.777

我猜按项目类型，您会想到用于创建项目的项目模板......

找到输出类型右键单击项目 -> 属性 -> 应用程序 -> 输出类型

至于c#和其他项目的区别：c#项目文件的文件扩展名为.csproj，而即VB项目使用.vbproj

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-28T07:55:34.120

`.csproj/.vbproj`项目文件中的 XML 标签之一是`<ProjectTypeGuids>`元素。
此标签保存项目的类型。

这是**[从 GUID 到项目类型的翻译](http://www.mztools.com/articles/2008/mz2008017.aspx)**

因此，用 C# 编写的 WPF 项目将有 2 个 GUID，一个用于 WPF，一个用于 C#：

```
<ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

然而 VB.Net 中的 WPF 项目将如下所示：

```
<ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{F184B08F-C81C-45F6-A57F-5ABD9991F28F}</ProjectTypeGuids> 
```

注意第一个 GUID 是相同的，因为它是一个 WPF 应用程序，第二个 GUID 更改为反映 C# vs VB.Net

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-29T21:04:09.877

要确定项目是应用程序还是库，请找到输出类型。在 Visual Studio 中：

1.  右键单击项目
2.  单击属性 > 应用程序 > 在“输出类型：”下查看
3.  它将是“控制台应用程序”、“Windows 应用程序”或“类库”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T19:25:19.853

轻松解决。

如果您想知道它是 WCF 项目还是 ASP.NET Web 服务，只需在文件资源管理器中打开项目的文件夹即可。您可以将鼠标悬停在图标上，工具提示将显示项目类型，如图所示。此外，您可以在文件资源管理器中的**类型**列下查看，它也会在那里显示。

WCF 网络服务项目： [![WCF 网络服务](../Images/65ef0d8fdbc2e8079743b40190938d9d.png)](https://i.stack.imgur.com/mmAb4.jpg)

ASP.NET Web 服务项目： [![ASP.NET 网络服务](../Images/86514a15e174a6f56a7a52d94f21ca5a.png)](https://i.stack.imgur.com/vz2WE.jpg)

另请注意，如果您的项目在其**Properties**文件夹中有 Resources.Designer.cs 或 Settings.Designer.cs，则它可能是 WinForms 应用程序。

# ios - OTA只适用于企业账户？

> ID：13600151
> 
> 赞同：0
> 
> 时间：2012-11-28T07:42:14.737
> 
> 标签：ios, ota

我有一个苹果个人账户（99 美元）。是否可以让我的客户通过 OTA 测试应用程序？谢谢。我的意思是给他一个链接[http://www.xxxx.com/app.html](http://www.xxxx.com/app.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:08:53.380

您还可以使用[Testflight 之](http://testflightapp.com/)类的服务。他们也使用带有 AdHoc 配置的 OTA 进行安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:46:28.867

是的，您需要客户设备的[UDID](http://www.tuaw.com/2008/08/08/iphone-101-find-udid-with-a-single-click/)，将其添加到您的配置文件中并向他/她发送 ipa 和配置文件。然后，他/她可以使用[iTunes](http://www.apple.com/de/itunes/)或[iPhone 配置实用程序](http://support.apple.com/kb/DL1465)( [Windows](http://support.apple.com/kb/DL1466) ) 在设备上“安装”这两个文件。

# javascript - 排版效果在 IE9 上无法正常工作

> ID：13600155
> 
> 赞同：2
> 
> 时间：2012-11-28T07:42:25.540
> 
> 标签：javascript, jquery, html, css

如何让这个 Typography Effects 脚本在 IE 上正常工作？它在 Firefox、Chrome、Safari 上运行良好。
[http://tympanus.net/Tutorials/TypographyEffects/index6.html](http://tympanus.net/Tutorials/TypographyEffects/index6.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:05:16.380

您不能使用它，因为低于 v.10 的 IE 不支持过渡和文本阴影。您只能在 Chrome、Firefox 等现代浏览器上看到它...

你也可以在这里查看其他浏览器的兼容性：http: [//caniuse.com/#search=text-shadow](http://caniuse.com/#search=text-shadow)

# c++ - 将 3D 模型导入 OpenGL/C++ 项目的推荐文件格式和图形库？

> ID：13600158
> 
> 赞同：29
> 
> 时间：2012-11-28T07:42:28.037
> 
> 标签：c++, opengl, graphics, 3d, file-format

如果您想：

*   在 3D 编辑器中为对象建模，例如 Blender、Maya 等
*   将模型导出为数据/文件格式
*   使用 OpenGL 和 C/C++ 将模型导入项目

然后：

*   您建议导出到哪种文件格式，即简单性、可移植性和兼容性（即常见/流行）？
*   您建议使用哪些图形库将模型导入您的 OpenGL C/C++ 项目（即最好是开源的）？
*   此外，是否存在也捕获动画的数据/文件格式，即“动画模型”格式，以便动画可以在 3D 编辑器中建模并以某种方式在代码内部调用（例如，可访问动画序列中的帧或其他一些保存/加载与随时间变化相关的详细信息的范例）？

一般来说，我将简单作为首要任务，即帮助我开始结合我在艺术和计算机科学方面的背景。我是马萨诸塞大学计算机科学专业的学生，​​同时，我在大学选修平面设计以及在夏季/冬季课程期间在波士顿艺术学院学习课程，是一种“伪”艺术双专业所以，换句话说，我不是一个完整的新手，但与此同时，我真的不想要那些因疯狂的高级配置而过载的选项，这使得开始一个基本的演示项目变得太困难；即，作为了解如何弥合这两个世界之间差距的第一步，例如创建一个具有用户可以与之交互的 3D 角色的程序。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T07:56:01.183

**[COLLADA](https://collada.org/mediawiki/index.php/COLLADA_-_Digital_Asset_and_FX_Exchange_Schema)**（我在最后用“啊”说）和[Assimp](http://assimp.sourceforge.net/)（就这么说）。

那么，为什么选择 COLLADA？简单的：

*   COLLADA 是由 Khronos（特别是 Sony）制定的开放标准。开放标准格式的美妙之处在于它是一个标准！您可以放心，符合标准的产品的任何输出也会被其他符合标准的产品正确读取。不过遗憾的是，一些 3D 建模产品在其衡量 COLLADA 标准一致性方面并没有那么特别。但还是请放心：Blender、Maya、3ds Max 等所有 3d 建模大牌对该格式都有很好的支持。
*   COLLADA 使用 XML。如果您计划创建自己的阅读器或作家，这会使您变得更加简单。
*   **补充：**我认为，COLLADA 是唯一与特定公司无关的格式。这对我们来说是一件非常好的事情，你知道的。
*   **附加 2：**众所周知，COLLADA 的解析速度很慢。确实如此。但想想看：所有其他非二进制格式（如 fbx）也有同样的问题。对于您的需求，COLLADA 应该就足够了。
*   **附加 3：** COLLADA 支持动画！

对于导入器库，我强烈推荐 Assimp。为什么？

*   Assimp 支持您可以想象的任何流行格式。它具有适用于所有格式的统一界面，因此切换到另一种格式不那么痛苦。
*   Assimp 是可扩展的。因此，您可以导入您的专有格式，但仍不修改您的代码。
*   **附加 4：** Assimp 是**开源**的！让我们支持开源软件！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T07:59:56.107

首先，[在这里](https://stackoverflow.com/questions/4776408/whats-a-good-c-library-for-loading-models-for-use-in-opengl) 您可以阅读有关建议的模型加载 lbs.Lib [Assimp](http://assimp.sourceforge.net/)非常好，并且支持多种格式。对于首选格式。Collada-我不推荐，因为这是基于 XML（文本）的格式，解析速度很慢。Obj 格式也很普遍，但也存在与 Collada 相同的问题。如果您想编写自己的解析器，它仍然很好，因为它的结构非常简单。但我建议使用二进制的 3D。虽然它不支持动画.当今最流行的同时支持静态网格和动画的格式是FBX。您可以[免费下载](http://usa.autodesk.com/fbx/)Autodesk 的 FBX SDK 并将其连接到您的引擎。我选择 FBX 的原因是因为 SDK 和格式都非常强大。例如，在 FBX 中，您不仅可以嵌入几何体和动画，还可以嵌入场景对象作为灯光、相机等.Autodesk 文档也非常好。希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T08:49:11.103

我建议使用您自己的自定义格式，基本上只是程序中使用的顶点缓冲区和索引缓冲区的二进制转储。（在那里使用 d3d 术语，我知道 opengl 具有相同的概念，但不记得它们是否有不同的名称）。

然后，我将使用 assimp 编写一个单独的程序，该程序几乎可以采用任何格式并以您的自定义格式写出文件。然后，您可以使用 collada 或其他任何东西来存储您的实际模型，但不会在运行时加载该格式的复杂性和缓慢性。

# emacs - 如何让 Emacs 显示与实际存储的字符不同的字符？

> ID：13600160
> 
> 赞同：8
> 
> 时间：2012-11-28T07:42:28.920
> 
> 标签：emacs, elisp

我想使用 Elisp 为 Emacs 实现动态文本替换（仅替换显示，不替换实际存储的文件）。

例如，在 LaTeX 文档中，我想键入`\alpha`，然后让 Emacs 将其显示为`α`，这样更易​​于阅读。但在结果`.tex`文件中，我仍然想要`\alpha`, 而不是`α`被保存。（备注：我可以自己使用XeTeX或LuaTeX直接支持UTF-8。但出于合作和期刊要求，我不希望将UTF-8字符直接保存在`.tex`文件中。或者我可以使用预览在 AUCTeX 中。但这在我编辑公式时无济于事）

一个现有的例子是在 org-mode 中，当我们输入 时`[[link][name]]`，在输入 last 之后`]`，显示的文本只被名称替换，带有超链接。另一方面，当保存这个文件时，保存的内容是原始的`[[link][name]]`，与显示的不同。

任何想法如何实施？

PS：替换Emacs 手册[的文本部分的显示规范关闭。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Replacing-Specs.html#Replacing-Specs)但是，我需要指定起点和终点，而不是替换所需的字符串。这意味着我需要在每个用户输入后进行搜索以确定起点和终点。由于算法的性能和复杂性，这看起来不切实际。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:55:43.610

一种方法是为相关模式添加字体锁定关键字，并用于`compose-region`显示新字形来代替旧字符串：

```
(font-lock-add-keywords
 'latex-mode `(("\\(\\\\alpha\\)"
                (0 (progn (compose-region (match-beginning 1)
                                          (match-end 1) "α")
                          nil))))) 
```

* * *

另请注意，`org-mode`它已经内置了这种功能，不仅适用于您提到的链接，还适用于类似 LaTeX 的实体：

```
(setq org-pretty-entities t) 
```

# extjs - 将新数据添加到商店后如何重新加载网格数据

> ID：13600164
> 
> 赞同：0
> 
> 时间：2012-11-28T07:42:43.273
> 
> 标签：extjs, extjs3

我有两个网格；我称它们为子网格和父网格。当我将新行（数据）添加到父网格中时，我想重新加载父网格。我试图使用代码中的 afteredit 函数对其进行编辑。如果我取消注释掉警报中的第 2 行，那就可以了。但是没有警报，新添加的行将被隐藏。我不明白我的代码出了什么问题。请谁能告诉我在我将新行添加到我的网格后该怎么做以及如何立即重新加载网格？

这是我的后期编辑功能

```
 afteredit : function (roweditor, changes, record, rowIndex) 
   { //alert('alert me');
      if (!roweditor.initialized) {
         roweditor.initFields();
      }
      var fields = roweditor.items.items;
      // Disable key fields if its not a new row
      Ext.each(fields, function (field, i) {
         field.setReadOnly(false);
         field.removeClass('x-item-disabled');
      });

        this.grid.getSelectionModel().selectRow(0);
        this.grid.getView().refresh();
   },

xt.ux.grid.woerp = 
{
   configRowEditor: 
   {
      saveText: "Save",
      cancelText: "Cancel",
      commitChangesText: WOERP.constants.gridCommitChanges,
      errorText: 'Errors',
      listeners: 
      {
         beforeedit: WOERP.grid.handler.beforeedit,
         validateedit: WOERP.grid.handler.validateedit,
         canceledit: WOERP.grid.handler.canceledit,
         afteredit: WOERP.grid.handler.afteredit,
         aftershow: WOERP.grid.handler.aftershow,
         move: WOERP.grid.handler.resize,
         hide: function (p) 
         {
            var mainBody = this.grid.getView().mainBody;
            if (typeof mainBody != 'undefined') 
            {
               var lastRow = Ext.fly(this.grid.getView().getRow(this.grid.getStore().getCount() - 1));
               if (lastRow != null) 
               {
                  mainBody.setHeight(lastRow.getBottom() - mainBody.getTop(), 
                  {
                     callback: function () 
                     {
                        mainBody.setHeight('auto');
                     }
                  });
               }
            }
         },
         afterlayout: WOERP.grid.handler.resize
     }
   }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:39:05.857

AFAIK`RowEditor`是一个插件，用于`GridPanel`更改来自商店的基础数据。通常更新也是由商店进行的。如果您想知道何时保存数据，则应将事件处理程序附加到存储中。例子：

```
grid.getStore().on('save', function(){ [...] }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:21:14.167

最后我找到了解决方案。当我将重新加载功能添加到将隐藏新添加的行的 afteredit 方法中。因此，在将数据提交到该数据网格存储后，网格重新加载对我来说效果很好。无论如何，非常感谢所有试图帮助的人

这我的代码看起来像

```
record.commit();
grid.getView().refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:49:28.590

我认为编辑网格后存在一个**保存按钮。**所以在`handler`Save**你**可以赶上事件

或使用

```
Ext.getCmp('your_saveButtonId').on('click', function(component, e) {
   // Here they will be checking for modified records and sending them to backend to save.
   // So here also you can catch save event
} 
```

# panel - 如何在 plesk panel 11 中添加 DKIM 以及如何创建 DKIM 记录...？

> ID：13600170
> 
> 赞同：0
> 
> 时间：2012-11-28T07:42:58.517
> 
> 标签：panel, plesk, records, dkim

如何在平行 plesk panel 11 中添加 DKIM 以及如何创建 DKIM 记录...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:17:06.477

我确实在平行论坛中问过同样的问题，他们在这里重播。

我的问题：

Parallels Plesk Panel 11.x for Windows

我已经在我的服务器中启用了 DomainKeys-Signature。

现在我想启用 DKIM，如何？

====================================================

结果总结

====================================================

SPF检查：通过

DomainKeys 检查：通过

**DKIM 检查：中性**

发件人ID检查：通过

SpamAssassin 检查：火腿

==================================================== ========

**他们的回应**

Plesk 11 中没有 DKIM 自动化。

为了使用 DKIM，您应该：

1) 在邮件域中手动添加正确的 TXT 记录

2) 在您的邮件服务器软件中启用 DKIM

参考： http: [//forum.parallels.com/showthread.php?p=678592](http://forum.parallels.com/showthread.php?p=678592)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:19:31.910

plesk 不支持 dkim。域密钥是，但它们是不同的。要启用域密钥，只需在 plesk 帮助部分搜索中键入域密钥，将逐步向您展示。

# eclipse-plugin - 清晰案例 - Eclipse 集成

> ID：13600172
> 
> 赞同：1
> 
> 时间：2012-11-28T07:43:11.757
> 
> 标签：eclipse-plugin, clearcase

1.  目前我![在此处输入图像描述](../Images/f79cb96bb7568a228f2abfd7e372acdb.png)在本地机器上有以下版本的透明案例。
2.  我从 url 下载了插件“com.rational.clearcase.win32-20081031A”：“ [http://www3.software.ibm.com/ibmdl/pub/software/rationalsdp/clearcase/ccplugin/com.rational.clearcase.win32- 20081031A.zip](http://www3.software.ibm.com/ibmdl/pub/software/rationalsdp/clearcase/ccplugin/com.rational.clearcase.win32-20081031A.zip) "，其中包括![在此处输入图像描述](../Images/c5c03223e0b9101bbf2dae3377230449.png)功能和插件文件夹中的以下文件。3.然后我从eclipse帮助->软件更新->搜索和安装->在此处给出插件文件夹的本地路径，如下![在此处输入图像描述](../Images/7c8e1fe5f927c3c8deba04fb7bde8286.png)图所示 4.它安装在eclipse上；但是当我尝试通过连接时它给了我以下![在此处输入图像描述](../Images/4d3cbea7b16d6bb340de52fbc6d25513.png)错误。

你能建议它出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:49:24.363

该插件不适用于 CCRC（ClearCase 远程客户端），仅适用于完整的基本 ClearCase 安装。

CCRC 带有它自己的 Eclipse 界面，您可以在其中找到所有必要的 ClearCase 命令。

如果您想要一个 CCRC 插件（与您下载的[SCM 适配器](http://www-01.ibm.com/support/docview.wss?uid=swg24025674)不同），您需要从您的 CCRC 服务器下载它，[正如我在您的最后一个问题中详述的那样](https://stackoverflow.com/a/13560168/6309)。

# ios - 无法在 ios 中使用 ZipArchieve 解压缩？

> ID：13600177
> 
> 赞同：1
> 
> 时间：2012-11-28T07:43:34.167
> 
> 标签：ios, unzip

我已经下载了一个文件（ZipSecretExcel.zip），它存储在文档目录中。我现在正在尝试使用 ZipArchieve 使用以下代码在文档目录中解压缩此文件：

```
 NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES) objectAtIndex:0];

     NSString *zipFilePath = [documentsDirectory stringByAppendingPathComponent:@"ZippSecretExcel.zip"];

     NSString *output = [documentsDirectory stringByAppendingPathComponent:@"UnZipSecret"];

     ZipArchive* za = [[ZipArchive alloc] init];

     if( [za UnzipOpenFile:zipFilePath] ) {
     if( [za UnzipFileTo:output overWrite:YES] != NO ) {
     //unzip data success
     //do something
     //NSLog(@"Folder successfully zipped");
     }

     [za UnzipCloseFile];
     } 
```

但是，文件夹成功压缩日志消息永远不会被打印，这意味着解压缩失败。谁能告诉我我做错了什么？

# c# - 参数化 sql 查询 - asp.net / c#

> ID：13600179
> 
> 赞同：5
> 
> 时间：2012-11-28T07:44:07.770
> 
> 标签：c#, asp.net, sql, parameterized

所以我最近了解到我绝对应该使用参数化查询来避免 SQL 注入等安全问题。这一切都很好，我得到了它的工作。

这段代码显示了我如何做的一些代码：

```
param1 = new SqlParameter();
param1.ParameterName = "@username";
param1.Value = username.Text;
cmd = new SqlCommand(str, sqlConn);
cmd.Parameters.Add(param1);

//and so on 
```

但问题是，我有超过 14 个变量需要保存到数据库中，这就像一个注册表单。如果我必须写 14 次这些行来参数化每个变量，它看起来会非常混乱。有没有更动态的方式来做到这一点？就像使用 for 循环或其他东西并以某种方式参数化循环中的每个变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T07:45:36.980

使用单行[SqlParameterCollection.AddWithValue](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)方法

```
cmd.Parameters.AddWithValue("@username",username.Text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:48:01.737

或您可以尝试的其他变体

```
command.Parameters.Add(new SqlParameter("Name", dogName)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T07:51:26.910

给你... 通过[dapper](https://www.nuget.org/packages/Dapper)：

```
connextion.Execute(sql, new {
    username = username.Text,
    id = 123, // theses are all invented, obviously
    foo = "abc",
    when = DateTime.UtcNow
}); 
```

映射到`ExecuteNonQuery`，但还有其他方法，例如`Query<T>`（通过名称非常有效地将数据绑定到`T`每行类型的对象中），`Query`（例如`Query<T>`，但使用`dynamic`）和其他一些方法（绑定多个网格或多个对象等）。所有可笑的优化（IL 级元编程）都尽可能快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T07:53:02.680

另一种技术，你可以使用..

```
List<SqlParameter> lstPrm = new List<SqlParameter>();

 lstPrm.Add(new SqlParameter("@pusername", usernameValue ));
 lstPrm.Add(new SqlParameter("@pID", someidValue));
 lstPrm.Add(new SqlParameter("@pPassword", passwordValue)); 
```

添加您可以迭代的末尾以将参数插入到您的`command object`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T10:26:09.607

使用我的 SqlBuilder 类。它使您可以**编写参数化查询，而无需创建参数，也不必担心它的名称。**您的代码将如下所示...

```
var bldr = new SqlBuilder( myCommand );
bldr.Append("SELECT * FROM CUSTOMERS WHERE ID = ").Value(myId);
//or
bldr.Append("SELECT * FROM CUSTOMERS NAME LIKE ").FuzzyValue(myName);
myCommand.CommandText = bldr.ToString(); 
```

您的代码将更短且更具可读性。与串联查询相比，您甚至不需要额外的行。你需要的课在这里...

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Data;
using System.Data.SqlClient;

public class SqlBuilder
{
private StringBuilder _rq;
private SqlCommand _cmd;
private int _seq;
public SqlBuilder(SqlCommand cmd)
{
    _rq = new StringBuilder();
    _cmd = cmd;
    _seq = 0;
}
public SqlBuilder Append(String str)
{
    _rq.Append(str);
    return this;
}
public SqlBuilder Value(Object value)
{
    string paramName = "@SqlBuilderParam" + _seq++;
    _rq.Append(paramName);
    _cmd.Parameters.AddWithValue(paramName, value);
    return this;
}
public SqlBuilder FuzzyValue(Object value)
{
    string paramName = "@SqlBuilderParam" + _seq++;
    _rq.Append("'%' + " + paramName + " + '%'");
    _cmd.Parameters.AddWithValue(paramName, value);
    return this;
}
public override string ToString()
{
    return _rq.ToString();
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T07:24:24.647

更好的是，使用[我闪亮的新 Visual Studio 扩展](https://visualstudiogallery.msdn.microsoft.com/eaf390af-afc1-4994-a442-ec95923dafcb)。您在自己的文件中完整地在 sql 中声明参数。我的扩展程序将在您保存文件时运行您的查询，并使您成为一个在运行时调用的包装类，以及一个用于访问您的结果的结果类，智能感知无处不在。您将看到您的 sql 参数作为包装类的 Execute() 方法的参数。您将永远不必在 C# 中编写另一行参数代码、阅读器代码、cmd 甚至连接（除非您想自己管理）。没了没了:-)

# java - JVM 内部如何解释 010 或 0110 数字

> ID：13600182
> 
> 赞同：0
> 
> 时间：2012-11-28T07:44:15.760
> 
> 标签：java

为什么 java JVM 将 int i = 010 或 int i = 0110 视为八进制值，而不是整数值 10 或 110？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T07:48:02.097

在设计 Java 时，C 和 C++ 是它最大的竞争对手。Java 的设计者想让 Java 像 C 和 C++ 一样，这样精通这些语言的程序员会发现过渡更容易。Java 的许多语法，包括八进制文字，都受到 C 或 C++ 语法的启发。

八进制值与虚拟机无关。八进制值仅存在于源代码中。翻译由编译器执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T07:48:05.637

不仅在 Java 中，这种行为几乎在所有编程语言中都存在，如 C、C++ 等。根据编程规范，如果一个数字以**0**为前缀，那么它将被视为八进制数，如果它以**0x**为前缀，那么它将被视为十六进制数。

特别是在Java中，如果你想声明二进制数，那么你必须在它前面加上**0b**。但是您只能在`Java 7 or later(if exists)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:46:49.527

您不应该混淆`javac`Java 编译器的功能和 JVM 的功能。

编译器愚弄了类似语言的`javac`Java 规范和约定，将数字开头`0`视为八进制、`0x`十六进制，在 Java 7`0b`中视为二进制。

JVM 只看到二进制数字而不是文本，因此它不知道您是使用 0100 还是 0x40 还是 64 还是 0xb1000000，因为数字已经被转换。

简而言之，JVM 不知道`010`它是 javac 编译器的工作，因为这就是语言规范所说的它应该做的事情。

# python - Python - 检查打开的文件

> ID：13600195
> 
> 赞同：0
> 
> 时间：2012-11-28T07:45:12.733
> 
> 标签：python, python-3.x

我有一个如下所示的文本文件：

```
BALLOTS CAST
Riding 0
YES YES NO YES
NO NO NO NO 
.
.
.
YES NO YES YES

Riding 1
YES NO NO YES
NO NO YES NO 
.
.
.
YES YES YES YES 
```

等等。我有用户输入的骑行号码`riding`，然后我需要为该骑行制作一个投票列表。例如，如果骑行选择是 0，那么我需要一个 list `[[YES YES NO YES], [NO NO NO NO], ..., [YES NO YES YES]]`。

我需要找出一种使用方法`readline()`和`while`循环。这大概是我所拥有的：

```
ballots = open(FILENAME, 'r')
line = ballots.readline().rstrip()
L = []
i = 0
if riding.isdigit():
    while i < ???:
        line = ballots.readline().rstrip()
        i += 1
        if line == 'Riding ' + riding:
            while line != '\n':
                L.append(line.rstrip().split()) 
```

但我只是得到一个空列表。我也尝试了这个，`180`而不是`???`因为那是有多少行，但我不知道实际放在它的位置上的是什么。我试过`max(enumerate(ballots))[0]`了，但它`ballots`完全清空了列表（或者以其他方式使所有内容都为空）。

谁能指出我的错误以及我应该改变什么？正如我所说，我必须使用`readline()`并且`while`我不能导入任何东西。

另外，我提出的原因`if riding.isdigit()`是因为还有选择`all`骑行的选项。有用：

```
if riding == 'all':
    line = ballots.readline().rstrip()
    for line in ballots:
        if line[0:6] != 'Riding' and line != '\n':
            L.append(line.rstrip().split()) 
```

唯一的问题是我不知道如何使用`while`循环而不是`for`循环......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:28:07.143

看看 Pickle：[http](http://docs.python.org/2.7/library/pickle.html?highlight=pickle#pickle) ://docs.python.org/2.7/library/pickle.html?highlight=pickle#pickle 它对于保存和恢复 python 对象到文件非常有用，例如列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:57:52.910

您需要使用状态变量来检测何时应该读取行，以及何时完成`break`循环：

```
lines = []
with open(FILENAME, 'r') as ballots:
    foundriding = False
    ballots.next()  # skip first line
    for line in ballots:
        if line.rstrip() == 'Riding ' + riding:
            foundriding = True
            continue
        if not foundriding: 
            continue
        line = line.rstrip()
        if line and not line.startswith('Riding '):
            lines.append(line)
        else:
            break 
```

上面的代码将跳过所有行，直到找到正确的`Riding <number>`行，此时它将设置`foundriding`为 True。设置标志后，它将添加所有后续行，`lines`直到找到一个空行或另一个以`Riding`. 那时它将打破阅读循环。

另一种选择是使用[`itertools.takewhile()`](http://docs.python.org/2/library/itertools.html#itertools.takewhile)：

```
from itertools import takewhile
with open(FILENAME, 'r') as ballots:
    ballots.next()  # skip first line
    for line in takewhile(lambda l: l.rstrip() != 'Riding ' + riding, ballots):
        pass  # skip lines
    lines = [l.rstrip() for l in takewhile(lambda l: l.rstrip() and not l.startswith('Riding '), ballots)] 
```

`takewhile`将从选票中取行，直到测试返回 False。之后，我们可以通过不同的测试来获取更多行，即该行不为空且不以`Riding`.

两种解决方案都不需要读取整个文件。当我们找到正确的骑行并且所有投票都已读入时，我们停止阅读`lines`。

我`ballots`像迭代器一样使用文件对象。这与 ; 方法不太一样`.readline()`。如果`.readline()`是一个硬性要求（呃，老师和家庭作业），你也可以`ballot.readline()`变成一个迭代器：

```
ballotiterator = iter(ballots.readline, '') 
```

然后使用`ballotiterator`代替`ballots`你看到的任何地方`for line in ballots`，`ballots.next()`或`takewhile(..., ballots)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:03:20.680

使用正则表达式的另一种解决方案：

```
import re
with open("test.txt") as infile:
    text = infile.read()
    if riding.isdigit():
        section = re.search(r"(?sm)^Riding " + riding + r".*?(?=Riding|\Z)", text)
        matches = re.findall(r"(?:(?:YES|NO) ?)+", section.group(0))
        result = [s.split() for s in matches]
        print(result) 
```

`riding`设置为，这将`"1"`导致

```
[['YES', 'NO', 'NO', 'YES'], ['NO', 'NO', 'YES', 'NO'], ['YES', 'YES', 'YES', 'YES']] 
```

当然，您可能想使用

```
result = [[True if value == "YES" else False for value in s.split()] 
                                             for s in matches] 
```

相反，为了得到

```
[[True, False, False, True], [False, False, True, False], [True, True, True, True]] 
```

不进行错误检查（例如`Riding x`，输入文件中是否存在标记的段），但可以轻松添加。

# android - 如何在eclipse中编辑run.sh文件

> ID：13600196
> 
> 赞同：0
> 
> 时间：2012-11-28T07:45:14.873
> 
> 标签：android, eclipse

我需要在 windows 的 eclipse 中编辑 run.sh 文件。我按照[此处](https://github.com/nelenkov/virtual-pki-card)的说明进行操作，并且我已经完全安装了 Android 应用程序，并且在我的 Xperia 上还可以，但是在第四行中构建主机客户端部分时，我不知道 run.sh 有什么我也不知道知道如何编辑它，顺便说一下，我猜它是一个 Linux 文件。而且我不得不说我没有安装 CyanogenMod 软件，因为根据它的网站它不兼容 Xperia p。我之前下载并导入的 se.pki.client 包中的 run.sh 文件中的代码如下。尽管我已经更改了第二行中的代码（给它我的 jdk 存储的路径），而有在第一行说“sh”这个词仍然有错误

```
#!/bin/sh

JAVA_HOME=C:\ProgramFiles\java\jdk1.7.0\   
$JAVA_HOME/bin/java -Dsun.security.smartcardio.library=/usr/local/lib/libpcsclite.so -cp bin/ org.nick.sepkiclient.Main $* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:24:41.463

.sh 文件在 linux 中等同于批处理文件。从您发布的代码中，它只运行 java 命令（给它一堆命令行输入），您应该能够通过替换 Windows 路径的路径在 Windows 终端中运行相同的命令。如果脚本的内容多于 3 行，您将需要尝试将每一行转换为有效的 windows 命令（取决于脚本的复杂性，这可能是不可能的。）

您的另一个选择是安装像[Cygwin](http://www.cygwin.com)这样的软件，它添加了一个 POSIX 恭维 shell（以及许多其他 linux-ish 修改）。这应该允许您在 Windows 中“本机”运行 .sh 文件（它需要对脚本进行一些摆弄以提供正确的路径）。确保在安装之前阅读有关 cigwin 的信息，它对您的系统有很大的改变，您可能不习惯。

每个选项都有其缺点，并且都需要一点 shell 脚本知识。可能只是更容易运行 Linux 来完成你的工作（它在 VM 中表现得相当好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:59:30.523

确保将其设置为 unix 文件。

窗口>首选项>常规>工作区

选择行分隔符，然后选择 Unix 并测试文件编码为 UTF-8

作为最后的手段，从 shell 对文件运行 dos2unix。

# android - 简单的 DELETE 语句在 SQlite 中不起作用

> ID：13600199
> 
> 赞同：4
> 
> 时间：2012-11-28T07:45:27.600
> 
> 标签：android, sqlite, sql-delete

> **可能重复：**
> [Android 删除查询](https://stackoverflow.com/questions/6337764/android-delete-query)

我有 db，现在它有 17 条记录。这是我的代码：

```
SQLiteDatabase db=openOrCreateDatabase("mydb", MODE_PRIVATE, null);
c= db.rawQuery("DELETE FROM tbl1 where cat='12'",null);
db.close(); 
```

这是一个非常简单的查询，但每次我在模拟器上运行应用程序时，它都可以完美运行，没有任何错误，但我也没有删除任何内容。

谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:23:02.657

db.execSQL("DELETE FROM tbl1 where cat=12");

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:02:39.837

try this

```
public void deleteContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
    db.close();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T08:34:29.640

试试这个代码，

```
db.delete(String table, String whereClause, String[] whereArgs); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:49:18.340

用它：

```
db.delete(DATABASE_TABLE, KEY_NAME + "=" + name, null)
```

您的代码中的问题 - '12'。插入更改：

```
c= db.rawQuery("DELETE FROM tbl1 where cat=12",null);
```

# blackberry - 使用 paymentSDK 在 BlackBerry 中查询应用内购买

> ID：13600202
> 
> 赞同：1
> 
> 时间：2012-11-28T07:45:31.377
> 
> 标签：blackberry, java-me

我在我的项目中使用了 paymentdk.jar，并且成功地将我的应用程序连接到 BlackBerry 应用程序世界。我的供应商门户中的商品处于草稿模式，并且具有非消耗性（1 次购买）许可类型。单击按钮时，我正在调用购买功能，当我完成贝宝付款时，它就成功了。请注意，我的钱没有被扣除。但是当我再次点击购买商品时，我再次输入了付款方式。我的一些查询是：

1) 当物品在供应商门户中处于草稿状态时，我们可以购买吗？

2）当一个项目被购买时，应用程序世界是否会因为许可证类型是非消耗品而改变其购买状态？如果是，需要多长时间才能反映

3) GOODS 有哪些不同的状态类型？现在它在草稿中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:31:57.040

第一个问题的答案 - 您可以在草稿模式下购买物品（为此您必须创建一个沙盒帐户）。如果您购买了非消耗品，应用程序世界将其状态更改为购买。

# c++ - 检查 argv[i] 是否存在 C++

> ID：13600204
> 
> 赞同：15
> 
> 时间：2012-11-28T07:45:37.383
> 
> 标签：c++, input, main

如果我运行一个 C++ 程序

```
./program arg1 
```

argv[1] 存在，但是有没有办法检查 argv[2] 是否存在？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-28T07:46:48.930

是的，看看 的值`argc`：

```
if (argc > 2) {
  ... use argv[2] ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T07:57:10.007

**是**的，`argv[i]`以 结尾`NULL`。`argc`传递`number of arguments`给主函数。从下面的代码中得到一个想法。

```
#include<stdio.h>
int main(int argc, char* argv[]){
    int i=0;
    while(argv[i]!=NULL){
        printf("\n %s is argv %d ",argv[i],i);
            i++;
    }

    printf("\n");
}

desktop:~$ gcc main.c  -o main 
desktop:~$ ./main grijesh thisiscrazy4

   ./main is argv 0 
    grijesh is argv 1
    thisiscrazy4 is argv 2 
```

这里 argv 是 -`"./main","grijesh","thisiscrazy4",NULL` 并且 argc = 3。

`argv[0]`是可执行文件名（执行路径），可用于标记错误语句。
`argv`称为参数向量和`argc`参数计数器。您也可以使用其他变量名。

阅读包含环境变量 [的 main() 函数的完整语法。](http://en.wikipedia.org/wiki/Main_function)

```
int main (int argc, char *argv[], char *envp[])
{
  return 0;
} 
```

[学习听](http://crasseux.com/books/ctutorial/Environment-variables.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T07:51:46.940

的原型`main`说明了一切：

```
int main(int argc, char **argv); 
```

这里的第一个参数，`argc`携带的值`Number_Of_Arguments(argv[])_Present`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T07:47:03.937

你可以换一种方式试试。测试一下`argc`，就可以知道有没有了`argv[n]`。

# c - 在 Windows 7 x64 上安装 GCC Make

> ID：13600213
> 
> 赞同：0
> 
> 时间：2012-11-28T07:46:15.260
> 
> 标签：c, compiler-construction

我在与 Ada 合作时安装了 GNAT 2012，它带有一个 GCC 版本。我可以使用 gcc 很好地从命令提示符编译 C 文件，但显然不包括“make”。

我将如何开始工作？我应该只安装最新版本的 GCC 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:49:10.403

Make 不是 GCC 的一部分。在 Windows 上，您可以使用[MSYS](http://www.mingw.org/wiki/MSYS)。它包括 make 和其他有用的工具。

# jquery - $.ajax POST 随机不会提交数据

> ID：13600215
> 
> 赞同：1
> 
> 时间：2012-11-28T07:46:21.113
> 
> 标签：jquery, ajax, database, post

我正在一个网站上更新有关 D&D 角色的信息。在这个特定页面上有可编辑的 div，我在其中进行更改并通过（非常不一致的）ajax POST 脚本提交。

不知何故，POST 不会提交任何更改，它可能是完全随机的。有时它可以工作并更新数据库，有时则不能。当然，你们不可能对我的服务器进行 POST，但 ajax 如下：

```
<script type="text/javascript">
 $(document).ready(function() {
      $("#actor_result").load('xml/actortoxml.php?owner=cederman&id=2');
      $('#save_editable').click(function() {
        var name = $(document).find('#actorname').text();
        var current = $(document).find('#currenthealth').text();
        var max = $(document).find('#maxhealth').text();
        var effects = $(document).find('#actoreffects').text();
        var notes = $(document).find('#actornotes').text();
        $.ajax({
            url: 'actor_profile.php',
            type: 'POST',
            data: {
                update: 'true',
                actorid: 2,
                actorname: name, currenthealth: current, maxhealth: max, actoreffects: effects, actornotes: notes
            },
        });
        window.location = 'actor_profile.php?id=2'
    });

/*
   var refreshId = setInterval(function() {
      $("#actor_result").load('xml/actortoxml.php?owner=cederman&id=2');
   }, 300000);
   $.ajaxSetup({ cache: false });
*/
});
</script>​ 
```

在此处查看小提琴以进行说明：http: [//jsfiddle.net/CgLmW/2/](http://jsfiddle.net/CgLmW/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:56:47.450

由于`$.ajax`是异步的，因此您在 ajax 请求完成之前重定向离开页面。此重定向会导致 ajax 请求在成功完成之前被终止。

将您的重定向语句移动到成功回调。

```
$.ajax({
    url: 'actor_profile.php',
    type: 'POST',
    data: {
        update: 'true',
        actorid: 2,
        actorname: name, currenthealth: current, maxhealth: max, actoreffects: effects, actornotes: notes
    },
    success : function() {
        // gets called when ajax request completes successfully
        window.location = 'actor_profile.php?id=2';     
    },
    error : function(err) {
        // in case of error
        console.log(err);
        alert('error');
    }
}); 
```

# javascript - 将 XML 转换为 JavaScript 对象

> ID：13600219
> 
> 赞同：4
> 
> 时间：2012-11-28T07:46:30.333
> 
> 标签：javascript, jquery, xml

我有一个包含以下内容的 XML 文件：

```
<directory>
  <app>
    <title>Carrot</title>
    <url>www.carrot.com</url>
  </app>
  <app>
    <title>Cucumber</title>
    <url>www.cucumber.com</url>
  </app>
</directory> 
```

假设我已经能够阅读它并将内容存储为字符串：

```
s = '<directory><app><title>Carrot</title><url>www.google.com</url></app><app><title>Cucumber</title><url>www.cucumber.com</url></app></directory>'; 
```

如何将其转换为如下的 JavaScript 对象？

```
{
  "directory": {
    "app": [
      { "title": "Carrot", "url": "www.carrot.com" },
      { "title": "Cucumber", "url": "www.cucumber.com" }
    ]  
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:49:58.657

我使用这个插件... [http://www.thomasfrank.se/xml_to_json.html](http://www.thomasfrank.se/xml_to_json.html)

它总是对我很有魅力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:53:50.033

我认为您正在寻找以下问题的答案[Convert XML to JSON (and back) using Javascript](https://stackoverflow.com/questions/1773550/xml-json-conversion-in-javascript)

### Javascript 中的 XML <-> JSON 转换

引用的答案

> 我认为这是最好的：[在 XML 和 JSON 之间转换](http://goessner.net/download/prj/jsonxml/)
> 
> 请务必阅读 Xml.com O'Reilly 站点上的随附文章（链接到 > 底部）。作者详细介绍了这些转换的问题，我认为 > 你会发现这些问题很有启发性。O'Reilly 主持这篇文章的事实应该表明 > Stefan 的解决方案是有价值的。

# android - 如何在android中支持MOV（快速时间）？

> ID：13600229
> 
> 赞同：17
> 
> 时间：2012-11-28T07:47:07.367
> 
> 标签：android, media-player, mov

我想在 .mov 文件中播放 android。但是 videoview 或 mediaplayer 不支持这种 meida 格式。我怎样才能添加对它的支持？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T09:16:26.410

一般来说，Android 不支持除[此处列出](http://developer.android.com/guide/appendix/media-formats.html)的媒体格式之外的任何其他媒体格式。话虽如此，有不少 3rd 方播放器可以播放更多奇特的格式，其中大多数可能基于 ffmpeg。您可能想查看适用于 Android 的[开源 Dolpin 播放器](http://code.google.com/p/dolphin-player/)（实际播放器也可在[Play 商店](https://play.google.com/store/apps/details?id=com.broov.player)中获得）以获得更多指示 - 但不确定默认情况下是否支持 mov 播放。

然而，由于现在大多数 mov 文件实际上都是 H.264 编码的，为什么不重新复用（或重新编码，取决于源）到 Android 可以很好地使用的东西，例如 mp4 容器？在 Android 上的视频支持方面，H.264 绝对是一种方式，正如前面链接中的“视频编码建议”部分所指出的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-13T11:50:06.740

我知道这是一个老问题，但是时代变了。现在我们可以将 ExoPlayer 用作自定义视频播放器（如 VideoView），它支持的格式比 android 上的 VideoView 更多。

它使用起来非常简单，只需播放视频，但如果您需要，它还具有强大的自定义功能。

[https://google.github.io/ExoPlayer/](https://google.github.io/ExoPlayer/)

试一试，如果这对您有帮助，请回复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T18:33:08.920

还是试着玩一下吧。Quicktime .mov 规范是 MP4 规范的前身。只有几个原子/盒子有区别。在大多数情况下，您可以将 MP4 播放为 .mov，将 .mov 播放为 MP4。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-19T00:06:26.317

我发现即使是 MX Player、BS Player 和 VLC for Android 等大牌播放器也无法正确播放 .mov 文件，尤其是那些在我妻子的 iphone 4s 上重新录制的文件。在我的 Nexus 7 和 Nexus 10 上播放非常不稳定，在我的 HTC One (M7) 上完全无法观看。我发现并安装的播放器可以完美地播放新旧 iphone 电影剪辑 (.mov)，可从 Google Play 商店免费获得。这是我找到的最好的播放器，相信我已经尝试了很多： [在 Android 设备上播放 .MOV 文件](http://www.4u3.biz/Articles/computers/operating-systems/android/playing-.mov-files-on-an-android-device.html) 希望这可以帮助一些使用 Android 设备希望查看 iphone .mov 文件的人。

# android - 在圆圈内显示地图

> ID：13600230
> 
> 赞同：1
> 
> 时间：2012-11-28T07:47:09.630
> 
> 标签：android, google-maps

我正在做一个项目，我需要在圆圈内显示地图。如何在圆圈内显示地图视图。 ![在此处输入图像描述](../Images/fc9534d33dbc6dea578fa4a37e5a184b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:22:28.010

您可以使用 FrameLayout 组合布局。第一项必须是 MapView，然后是 ImageView，该 ImageView 引用了具有该圆圈透明的 png。希望有帮助。

编辑添加一个例子：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="whateverYourApiKeyIs"/>

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/fullSizeImageWithTransparentCircle"/>

</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:14:10.223

既然你写了这么糟糕的问题。请允许我以同样的方式回答。
取一张地图。
圆角造型

我什[至会给你一个圆角的链接](https://stackoverflow.com/questions/1683185/android-listview-with-rounded-corners)

# joomla - 如何为 joomla 1.5.26 升级美德玛特

> ID：13600233
> 
> 赞同：3
> 
> 时间：2012-11-28T07:47:26.683
> 
> 标签：joomla, upgrade, virtuemart

我有在 joomla 1.5.23 上运行的 1.1.7 版。
现在我已经升级到 joomla 1.5.26，我需要将 1.1.7 升级到 2.0.12，这是 joomla 1.5.x 的稳定兼容版本。
有关如何执行此操作的任何帮助，我无法安装新版本，因为我的所有用户数据都将在新版本的全新安装中丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:01:39.260

您无法将低于 2.0 的 VM 版本更新到 2.x 版本。

因为 VM 改变了 VM 2 的整个架构（他们实现了 MVC）。所以你不能直接升级，你需要安装新的VM 2.x并一一实施旧的更改。在进行任何更新之前，你应该保留备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:13:21.967

我找到了一些简单的指南

打开你的 ftp 客户端并转到“服务器-> 管理员-> 组件”并将“com_virtuemart”更改为其他内容，我将其更改为“old_com_virtuemart”（您也可以对“服务器->组件”执行此操作</p>

1.  将您的产品/制造商/供应商图像移动到图像/故事/虚拟市场并在正确的子文件夹中。（类别、制造商、产品、供应商）
2.  禁用所有美德市场扩展
3.  将您的默认 Joomla 前端语言设置为产品描述中使用的语言。在更新 Virtue Mart 以安装正确的默认 Virtue Mart 语言表之前执行此步骤非常重要。
4.  现在转到您的站点并转到安装程序
5.  安装美德市场 2.0（如前所述，不要安装 2.1/2.0.1/2.2 等）
6.  安装程序完成后，安装示例数据
7.  安装示例数据后返回安装程序并安装 AIO 组件
8.  去管理员那里，为您的商店设置语言，即使您的商店不是多语言的，并保存 Virtue Mart 配置。
9.  现在进入美德市场的配置并启用“启用数据库更新工具”。
10.  完成后，转到工具->工具和迁移->并单击选项卡迁移
11.  首先选择“一切”，然后点击“开始迁移”</li>
12.  只需多次单击“开始迁移”即可迁移所有产品
13.  现在安装 jupgrade (http://redcomponent.com/free-downloads/cat_view/931-jupgrade)
14.  安装完成后转到组件升级并单击首选项
15.  确保“分发”设置为 Joomla 2.5，并确保所有内容都设置为“否”，除了“保留原始位置？” 和“删除以前的迁移”并保存
16.  现在点击大按钮升级
17.  升级完成后，访问 www.your-site.com/jupgrade 并登录（如果组件没有升级，请不要担心，您只需重新安装它们，但可能需要一些时间......）如果 Virtue mart 仍在您的升级站点上，那么您不必按照步骤操作，转到步骤 27
18.  再次安装美德商城2.0，然后安装示例数据
19.  安装 AIO 组件
20.  现在转到管理员，为您的商店设置语言，即使您的商店不是多语言的，并保存 Virtue Mart 配置。
21.  现在进入 mercurial 中的配置并启用“启用数据库更新工具”。
22.  完成后，转到工具->工具和迁移->并单击选项卡迁移
23.  首先选择“Everything”，然后点击“Start Migration”</li>

无论您选择哪种 VirtueMart 升级方式，都不要忘记备份您的商店数据。因此，如果出现任何错误（有时会发生），您将能够更新您的商店。

# java - 如何使用 Java 中的 Aspose lib 将 Office 文件转换为 pdf

> ID：13600235
> 
> 赞同：2
> 
> 时间：2012-11-28T07:47:30.300
> 
> 标签：java, aspose, pdf-conversion

我是 Aspose 的新手。我所知道的是，它是一个用于文档创建、转换等的有用库。请指导我如何将任何文件（MS office）转换为 pdf 文件，因为在我的项目中，上传的文档必须首先转换为 pdf，然后保存在一些文件中硬盘上的文件夹。我已经为 java 下载了 Aspose.Words 和 Aspose.Pdf。任何示例代码或链接都会非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:23:31.170

我的名字是 Nayyer，我是 Aspose 的开发布道者。

*   Aspose.Words for Java 提供将 word 文件转换为 PDF 的功能。更多详细信息，请查看 [将word文件转换为PDF](http://www.aspose.com/docs/display/wordsjava/How+to++Convert+a+Document+to+PDF)此外，它支持多种文档格式，即DOC、DOCX、ODT、RTF、EPUB等。请查看[支持的文件格式以获取更多信息](http://www.aspose.com/docs/display/wordsjava/File+Formats+and+Conversions)。
*   Aspose.Cells for Java 提供将 Excel 工作表转换为 PDF 的功能。有关详细信息，请访问[将 Excel 文件转换为 PDf](http://www.aspose.com/docs/display/cellsjava/Converting+to+PDF+Files) 请查看
*   Aspose.Slides for Java 提供将 PowerPoint 演示文稿转换为 PDF 的功能。有关更多详细信息，请查看 [将演示文稿转换为 PDf](http://www.aspose.com/docs/display/slidesjava/Converting+to+PDF+File)
*   Aspose.Pdf for Java 提供将文本、图像、HTML、XML 文件转换为 Pdf 格式的功能。

# asp.net-mvc-3 - 在我的 ActionResult 中设置传递的值

> ID：13600244
> 
> 赞同：0
> 
> 时间：2012-11-28T07:48:04.490
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0

我有两个独立的类来模拟我的表。首先，当创建新用户时，该用户在证书表中没有记录。因此，在证书视图中，我添加了一个按钮来为这个新用户添加证书详细信息。这是我的用户视图代码：我省略了分页/搜索和过滤代码以使其简单

```
public ActionResult Index()
var recipients = from s in db.User
                         select s;
 return View(recipients.ToList()); 
```

这是显示相关数据的详细信息视图：

```
 public ViewResult Details(int id)
   {

   var certificateDetails = db.Certificate.Where(p => p.ID == id);
   return View(certificateDetails);
   } 
```

添加新用户也意味着添加新的证书详细信息。我希望当用户单击特定用户的详细信息时，如果这些详细信息不会被重定向到同时设置了 User.ID 和 CertificateID 的创建证书视图。实际上 CertificateID 是 AI，但来自 User 的 ID 是外键。我会使用 Fluent API，但也不擅长使用它，因此必须在代码中处理这个看似很小的挑战。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:53:44.487

如果我正确理解您的问题，您希望它在您查看 Details() 时，如果证书详细信息不存在，然后重定向到一个页面来创建它们？

只需检查实体是否存在。如果没有，则返回一个[RedirectToAction()](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)并在路由数据集合中传递您需要的任何数据。

```
public ViewResult Details(int id)
{
    var certificateDetails = db.Certificate.FirstOrDefault(p => p.ID == id);

    if (certificateDetails == null)
        return RedirectToAction("Create", "Certificate", new { userId = id });

    return View(certificateDetails);
} 
```

您还需要使用 Create() 操作创建证书控制器。

# ruby - 无法在 Firefox 17 上运行 selenium 套件

> ID：13600247
> 
> 赞同：2
> 
> 时间：2012-11-28T07:48:16.887
> 
> 标签：ruby, selenium-webdriver

我的套件在 Firefox-16 中运行良好。将 firefox 版本更新为 17。但我的测试用例失败并抛出以下异常。我的 selenium webdriver 版本是 2.26.0。我的测试套件是红宝石。

Selenium::WebDriver::Error::UnknownError：在 PATH 中找不到 firefox 二进制文件。确保已安装 Firefox。操作系统似乎是：WIN8 构建信息：版本：'2.26.0'，修订：'18041'，时间：'2012-11-01 19:33:38' 系统信息：os.name：'Windows 8'，os .arch: 'amd64', os.version: '6.2', java.version: '1.7.0_09' 驱动程序信息: driver.version: FirefoxDriver (org.openqa.selenium.WebDriverException)。

如果我尝试在 webdriver 2.25.0 上运行，我的测试套件只会在执行过程中挂起。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T09:26:42.453

稍微降级 Firefox。当前版本的 Selenium 不支持 v17，尽管查看这里的提交更改，您可以看到他们已经修复了它，大概为 v2.27 做好了准备：

[https://code.google.com/p/selenium/source/list](https://code.google.com/p/selenium/source/list)

您可以从这里下载旧版本的 Firefox：

[http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/](http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/)

或者

[http://www.oldapps.com/firefox.php](http://www.oldapps.com/firefox.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:06:18.410

应该支持升级到 Selenium 2.28.0 和 FireFox 17。

# ruby-on-rails - Tesseract 适用于仅包含且仅包含文本的图像 - 裁剪图像以仅从图像中获取文本部分

> ID：13600248
> 
> 赞同：2
> 
> 时间：2012-11-28T07:48:21.233
> 
> 标签：ruby-on-rails, ruby, ocr, tesseract

Tesseract 适用于仅包含文本的图像。但是如果有文本和图像，而我们只想让文本被识别怎么办。

我正在使用 Tesseract 对图像中的文本进行 OCR 识别。Tesseract 正在从仅包含文本的图像中提供准确的文本。但是，当我检查包含汽车及其车号的图像时，T​​esseract 为车号提供了不同的乱码文本。我应用了灰度优化、阈值和其他效果来获得准确的文本输出并提高输出的准确性，但它仍然给出了不同编码混合的不同文本。同样，我正在寻找其他方法来提取此类文本。

谁能知道如何使用 Tesseract OCR 或任何替代方法从此类图像中获取文本，以便仅文本部分保留在图像中，以便 Tesseract 可以在输出中提供准确的文本。

裁剪图像是获取唯一文本的一种替代方法，但如何使用 ImageMagick 或任何其他选项来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:02:59.893

如果您确切知道文本在图像上的位置，则可以将这些区域的坐标与图像一起发送到 Tesseract 以进行识别。看看 Tesseract API 方法`TesseractRect`或`SetRectangle`.

# unity3d - 如何在unity3d的多人游戏中设置lapTimer？

> ID：13600249
> 
> 赞同：1
> 
> 时间：2012-11-28T07:48:33.227
> 
> 标签：unity3d, unityscript, game-development

由于我是编码和 unity3d 的新手，我发现很难为我的多人游戏赛车游戏设置单圈计时器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:29:37.320

就代码而言。

```
Time.time 
```

会给你时间（duh）

所以你会做如下的事情

```
function Awake() {
    startTime = Time.time;
}

function OnGUI () {
   var currentLap = Time.time - startTime;
} 
```

currentLap 是脚本启动后的当前时间。因此，您可以在比赛开始时在“Awake()”方法中运行代码。然后在屏幕上显示当前单圈时间是多少。

从 Unity Developer Network 中找到了一个很好的示例，这可能正是您在[此处寻找的内容](http://answers.unity3d.com/questions/11458/how-to-make-a-timer-in-the-game.html)

# iphone - 如何在 iOS 中使用 Instrument

> ID：13600260
> 
> 赞同：2
> 
> 时间：2012-11-28T07:49:17.200
> 
> 标签：iphone, objective-c, ios, xcode, instruments

我已经用仪器运行了我的应用程序，但我遇到了内存泄漏，但我不知道内存泄漏发生在什么时候。

我怎么知道在哪一点内存泄漏。

![在此处输入图像描述](../Images/05773a95f85cf57c52196f78f15767c4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:37:03.423

查看这篇来自大书呆子牧场的文章[“使用 Instruments 实际发现内存管理错误” 。](http://blog.bignerdranch.com/590-actually-finding-a-memory-management-error-with-instruments/)创建“堆”是开始缩小乍一看没有明显内存管理错误的代码部分的好方法。但是正如 ACB 已经说过的，如果系统库泄漏（极少数情况），那么您无能为力。但大多数情况下，内存问题总是存在于您应用程序的代码中！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:51:07.110

它说负责任的库是quartzcore，它只有16个字节。只要它不在应用程序中并且操作系统导致相同，您就无法对此做太多事情。我建议你忽略这一点。

如果您遇到问题，请检查分配工具 -> 实时字节部分，并检查当您同时选择大量图像时内存是否正在增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:53:43.340

我可以从您的屏幕截图中看到**您的应用程序已经**在您的设备/模拟器中运行，并且您正尝试使用仪器再次运行它，尝试**从设备完全关闭您的应用程序，然后**使用仪器再次启动它。

[**您可以从Apple.developer InstrumentsUserGuide**](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)阅读有关 Xcode 仪器的更多详细信息[](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)

 **我还在[**Raywenderlich 博客中找到了另一个很好的教程**](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

另一个好文件在[**这里**](http://gigaom.com/apple/apples-instruments-for-developers/)**

# python - django 中 IntegerField 中 MaxValueValidator 的 schemamigration 导致 TypeError

> ID：13600265
> 
> 赞同：0
> 
> 时间：2012-11-28T07:49:37.047
> 
> 标签：python, django, django-south, typeerror

我正在尝试`schemamigration`在我的模型上使用南（我正在使用`django 1.4 and python 2.6 on ubuntu`）

最初我的模型是

```
class Review(models.Model):
    reviewdate=models.DateField(default=date.today)
    description=models.TextField()
    author=models.ForeignKey(User,null=True) 
```

我添加了一个字段

```
from django.core.validators import MinValueValidator,MaxValueValidator

class Review(models.Model):
    reviewdate=models.DateField(default=date.today)
    description=models.TextField()
    author=models.ForeignKey(User,null=True)
    rating = models.IntegerField(MinValueValidator(1),MaxValueValidator(10),default=5,help_text='integers 1 to 10') 
```

当我跑步时

```
python manage.py schemamigration myapp --auto 
```

我明白了`TypeError`

```
...
File "/home/me/Django-1.4/django/db/models/base.py", line 198, in __new__
    new_class._prepare()
  File "/home/me/Django-1.4/django/db/models/base.py", line 255, in _prepare
    cls.__doc__ = "%s(%s)" % (cls.__name__, ", ".join([f.attname for f in opts.fields]))
TypeError: Error when calling the metaclass bases
    sequence item 6: expected string, MaxValueValidator found 
```

有人可以告诉我我错在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:58:16.947

你的语法不正确。您应该将验证器作为`validators`参数列表提供：

```
models.IntegerField(validators=[MinValueValidator(1), MaxValueValidator(10)], default=5, help_text='integers 1 to 10') 
```

[有关更多信息，请参阅在实践中使用验证](https://docs.djangoproject.com/en/dev/ref/forms/validation/#using-validation-in-practice)的文档。

# database - oracle sql根据成绩计算gpa

> ID：13600266
> 
> 赞同：1
> 
> 时间：2012-11-28T07:49:37.653
> 
> 标签：database, oracle, plsql

嗨，我是 Oracle SQL 的新手，我想编写一个 SQL 语句，可以从表中读取成绩并为学生生成 gpa。以下是我编写的示例代码，但它不起作用：

```
select id,
declare gpa = 0;
BEGIN
    IF grade = 'A+' THEN gpa = gpa + 4.5;
    ELSIF grade = 'A' THEN gpa = gpa + 4;
    ELSIF grade = 'B+' THEN gpa = gpa + 3.5;
    ELSIF grade = 'B' THEN gpa = gpa + 3;
    ELSIF grade = 'C+' THEN gpa = gpa + 2.5;
    ELSIF grade = 'C' THEN gpa = gpa + 2;
    ELSE gpa = gpa + 0;
    END IF
    gpa = gpa/count(grade)
END
gpa from table where id in ('s11','s12','s13','s14')
group by id 
```

表中数据示例如下：

```
id                   grade
--------------------------
s11                  A
s11                  B+
s11                  A+
s11                  C
s12                  C+
s12                  A
s12                  D
s12                  B
s13                  A+
s13                  C+
s13                  B
s13                  A
s13                  A
....
....
....
.... 
```

有人可以帮忙吗？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:56:54.690

尝试这样的事情：

```
select id, sum(case name 
                    when 'A+' then 4.5 
                    when 'A' then 4
                    when 'B+' then 3.5
                    when 'B' then 3
                    when 'C+' then 2.5
                    when 'C' then 2
                    else 0
               end
               )/count(*) gpa
from table 
where id in ('s11','s12','s13','s14')
group by id 
```

# eclipse - 尽管启动器工作正常，但无法在 Eclipse 上运行 Google appengine python 应用程序

> ID：13600267
> 
> 赞同：0
> 
> 时间：2012-11-28T07:49:49.370
> 
> 标签：eclipse, google-app-engine, pydev

我正在关注本教程： [http ://www.mkyong.com/google-app-engine/google-app-engine-python-hello-world-example-using-eclipse/](http://www.mkyong.com/google-app-engine/google-app-engine-python-hello-world-example-using-eclipse/)

我创建了一个项目并尝试在本地运行它。它没有用，但是当我在 Google appengine 启动器上运行它时，它运行得很好。

我注意到eclipse没有在项目中创建 .project 和 .pydevproject 文件

这是控制台内容：

```
WARNING  2012-11-28 07:48:10,265 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
Invalid arguments
Runs a development application server for an application.

dev_appserver.py [options] <application root>

Application root must be the path to the application to run in this server.
Must contain a valid app.yaml or app.yml file.

Options:
  --address=ADDRESS, -a ADDRESS
                             Address to which this server should bind. (Default
                             localhost).
  --clear_datastore, -c      Clear the Datastore on startup. (Default false)
  --debug, -d                Use debug logging. (Default false)
  --help, -h                 View this helpful message.
  --port=PORT, -p PORT       Port for the server to run on. (Default 8080)

  --allow_skipped_files      Allow access to files matched by app.yaml's
                             skipped_files (default False)
  --auth_domain              Authorization domain that this app runs in.
                             (Default gmail.com)
  --backends                 Run the dev_appserver with backends support
                             (multiprocess mode).
  --blobstore_path=DIR       Path to directory to use for storing Blobstore
                             file stub data.
  --clear_prospective_search Clear the Prospective Search subscription index
                             (Default false).
  --clear_search_indexes     Clear the Full Text Search indexes (Default false).
  --datastore_path=DS_FILE   Path to file to use for storing Datastore file
                             stub data.
                             (Default c:\users\gideon\appdata\local\temp\dev_appserver.datastore)
  --debug_imports            Enables debug logging for module imports, showing
                             search paths used for finding modules and any
                             errors encountered during the import process.
  --default_partition        Default partition to use in the APPLICATION_ID.
                             (Default dev)
  --disable_static_caching   Never allow the browser to cache static files.
                             (Default enable if expiration set in app.yaml)
  --disable_task_running     When supplied, tasks will not be automatically
                             run after submission and must be run manually
                             in the local admin console.
  --enable_sendmail          Enable sendmail when SMTP not configured.
                             (Default false)
  --high_replication         Use the high replication datastore consistency
                             model. (Default false).
  --history_path=PATH        Path to use for storing Datastore history.
                             (Default c:\users\gideon\appdata\local\temp\dev_appserver.datastore.history)
  --multiprocess_min_port    When running in multiprocess mode, specifies the
                             lowest port value to use when choosing ports. If
                             set to 0, select random ports.
                             (Default 9000)
  --mysql_host=HOSTNAME      MySQL database host.
                             Used by the Cloud SQL (rdbms) stub.
                             (Default 'localhost')
  --mysql_port=PORT          MySQL port to connect to.
                             Used by the Cloud SQL (rdbms) stub.
                             (Default 3306)
  --mysql_user=USER          MySQL user to connect as.
                             Used by the Cloud SQL (rdbms) stub.
                             (Default )
  --mysql_password=PASSWORD  MySQL password to use.
                             Used by the Cloud SQL (rdbms) stub.
                             (Default '')
  --mysql_socket=PATH        MySQL Unix socket file path.
                             Used by the Cloud SQL (rdbms) stub.
                             (Default '')
  --persist_logs             Enables storage of all request and application
                             logs to enable later access. (Default false).
  --require_indexes          Disallows queries that require composite indexes
                             not defined in index.yaml.
  --search_indexes_path=PATH Path to file to use for storing Full Text Search
                             indexes (Default c:\users\gideon\appdata\local\temp\dev_appserver.searchindexes).
  --show_mail_body           Log the body of emails in mail stub.
                             (Default false)
  --skip_sdk_update_check    Skip checking for SDK updates. If false, fall back
                             to opt_in setting specified in .appcfg_nag
                             (Default false)
  --smtp_host=HOSTNAME       SMTP host to send test mail to.  Leaving this
                             unset will disable SMTP mail sending.
                             (Default '')
  --smtp_port=PORT           SMTP port to send test mail to.
                             (Default 25)
  --smtp_user=USER           SMTP user to connect as.  Stub will only attempt
                             to login if this field is non-empty.
                             (Default '').
  --smtp_password=PASSWORD   Password for SMTP server.
                             (Default '')
  --task_retry_seconds       How long to wait in seconds before retrying a
                             task after it fails during execution.
                             (Default '30')
  --use_sqlite               Use the new, SQLite based datastore stub.
                             (Default false)
  --port_sqlite_data         Converts the data from the file based datastore
                             stub to the new SQLite stub, one time use only.
                             (Default false)
  --[enable|disable]_console Enables/disables the interactive console.
                             (Default enabled if --address is unset,
                              disabled if --address is set) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:01:27.267

我设法在本地运行项目有 2 个运行配置。

1.  右键单击项目-> Python 在主选项卡中运行项目文本字段浏览到项目在主模块路径中的应用程序服务器 C:\Program Files (x86)\Google\google_appengine\dev_appserver.py 在参数选项卡程序参数“${project_loc}/ src" 确保你把 ""

在工作目录中检查其他 ${project_loc:/selected 项目名称}

波纹管应用运行

1.  右键单击项目-> PyDev Google App
    在主选项卡中运行项目文本字段浏览到项目在主模块路径中的应用程序服务器 ${GOOGLE_APP_ENGINE}/dev_appserver.py 在参数选项卡中程序参数“${workspace_loc:HelloWorld/src}”确保你把“”放在工作目录检查其他 ${workspace_loc:HelloWorld}

下次可以直接点击配置

上传到云 appengine 运行配置。

右键单击项目 --> PyDev Google App
在主选项卡中运行 项目文本字段浏览到项目 在主模块路径中的应用程序服务器 ${GOOGLE_APP_ENGINE}/appcfg.py 在参数选项卡中程序参数更新“${workspace_loc:HelloWorld/src}”确保你把“”确保更新在工作目录中的“”之外检查默认$ {project_loc：/选定的项目名称}

IDE 应该保护开发人员免受命令行的特殊性质的影响 我花了 7 个小时尝试使用错误的教程运行项目

# c# - 您如何以编程方式在 C# 中找到真正的 URL 而不是转发链接？

> ID：13600268
> 
> 赞同：6
> 
> 时间：2012-11-28T07:49:57.127
> 
> 标签：c#, url

提出这个问题的另一种方法是：如何以编程方式将 TinyURL 链接扩展至其真实位置？

我想做的是找到一种以编程方式获取链接的方法：

```
http://www.baidu.com/link?url=mW91GJqjJ4zBBpC8yDF8xDhiqDSn1JZjFWsHhEoSNd85PkV8Xil7qccoOX3rynaE 
```

（使用 baidu.com 搜索 Jessica Alba 的第一个链接）并让它返回实际链接：

```
http://baike.baidu.com/view/270790.htm 
```

这只是一个例子。我想做的不是特定于杰西卡，而是在我的元搜索引擎项目中使用百度网站作为我的搜索引擎组的一部分。

也许有一种使用`WebBrowser`该类的方法，但我没有看到该 URL 的成员。

也许有一种使用方式`WebRequest`和`WebResponse`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:05:59.677

给你，这很好，很容易！

```
var WReq = WebRequest.Create("http://www.baidu.com/link?url=mW91GJqjJ4zBBpC8yDF8xDhiqDSn1JZjFWsHhEoSNd85PkV8Xil7qccoOX3rynaE");
WReq.Method = "HEAD";   // Only download the headers, not the page content
var ActualURL = WReq.GetResponse().ResponseUri.ToString();
MessageBox.Show(ActualURL); 
```

![](../Images/fdddc27ba9ac755e7f24a982ca96cf65.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T07:51:55.163

向 tinied URL 发出请求，并解析出 HTTP 响应`Location`标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:54:29.900

```
string url = "http://www.baidu.com/link?url=mW91GJqjJ4zBBpC8yDF8xDhiqDSn1JZjFWsHhEoSNd85PkV8Xil7qccoOX3rynaE";
var req = (HttpWebRequest)HttpWebRequest.Create(url);
req.AllowAutoRedirect = false; //<--!!!!
var resp = req.GetResponse();
var realUrl = resp.Headers["Location"]; //http://baike.baidu.com/view/270790.htm 
```

PS：这里的重点是**`req.AllowAutoRedirect = false`**

# vba - VBA 每天运行一次宏

> ID：13600270
> 
> 赞同：1
> 
> 时间：2012-11-28T07:50:00.880
> 
> 标签：vba, time, excel

我需要一些代码来每天运行一次宏，不管你打开文件多少次宏在哪里。

如果文件没有打开一天它不必运行宏，只需在打开时执行。

我猜它必须有一个“内部”变量或类似的东西，它可以保存宏今天是否已经运行的信息。

此外，为了让它更难，我想，宏每天都会打开一个不同的工作簿。

有什么想法吗。

我是新手，如果这很清楚，请原谅我。提前致谢。

[编辑：我在这里](http://www.mrexcel.com/forum/excel-questions/560086-how-run-macro-first-time-workbook-opened-date.html)找到了一些代码：

这似乎可以做到，但你必须创建一个额外的工作表，我不想那样做。

这是代码：

```
Private Sub Workbook_Open()
Dim rngFindTodaysDate As Range
    With ThisWorkbook.Worksheets("Status")

        On Error GoTo X
        Set rngFindTodaysDate = .Range("A1").End(xlDown).Find(Date)
        If rngFindTodaysDate Is Nothing Then
            .Range("A" & .Range("A" & Rows.Count).End(xlUp).Row + 1) = Date

            '''''  your Code  Here

        End If
    End With
    X:
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:28:02.507

您可以使用 Windows 任务计划程序每天自动打开一次文件。这里有一个非常好的[分步教程，](http://krgreenlee.blogspot.co.uk/2006/04/excel-running-excel-on-windows-task.html)其中包含所需的 VB 脚本代码。

如果用户也可能手动打开文件，您将需要一个状态变量来记录该宏是否已在当天运行。最好的选择可能是有一张专门用来记录这一点的纸。也许叫它`RunTimes`。然后，您可以将以下行添加到您的`Workbook_Open`事件中：

```
If Date > Application.Max(Sheets("RunRecords").Range("A:A")) Then
    Call YourMacroName
    Sheets("RunRecords").Range("A" & Rows.Count).End(xlUp).Offset(1, 0) = Date
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:06:40.000

在您的工作簿中使用（命名的）范围，一个单元格，其中最后一次运行宏的时间和日期由宏本身存储：

```
Sheetx.Range("rLastRun").Value2 = Now() 
```

将其添加到宏的末尾或至少**在**以下检查之后，您的宏检查最后一次运行单元格值是否在今天之前。那么总数将如下所示：

```
If Sheetx.Range("rLastRun").Value2 < Date Then

    <your macro>

    Sheetx.Range("rLastRun").Value2 = Now()

End If 
```

* * *

对于每次打开不同的文件，您必须更加具体，因为到目前为止提供的信息我们无法提供帮助。问自己以下问题：

1.  文件属性中是否有任何逻辑？
2.  除了时间戳之外，它是否每次都具有相同的名称（例如*Input20121128.xls*和*Input20121127.xls*？
3.  文档名称是否在有限的可能名称池中？
4.  它总是在同一个文件夹中吗？
5.  它是否有特定的创建者、日期、时间……？

提供信息后，您的文件查找将是：

```
Dim strInputfile As String

<other code>

strInputfile = "<standardfolderstring>" & Format(Date, "dd/mm/yyyy") & " Test.xlsx" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:36:14.920

这是逻辑，请仔细研究。

在工作表目标的单元格中存储一个值：例如 0 以运行宏。然后当触发宏时，将该值更改为：例如 1。然后无论工作表打开多少次并调用宏，因为单元格值为 1，宏将退出并且不完成整个过程

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T09:09:52.490

就我个人而言，我更喜欢其他人建议解决这个问题的想法......可能使用单个单元格，填充当前日期并将日期涂成白色以隐藏它......如果不试试这个：

如果您不想拥有工作表，则可以使用外部文本文件，例如在同一目录中。当 XLS 打开时，它将读取文本文件以查看当前日期，然后如果它与今天不匹配，则运行您每天一次的代码并将文本文件更新为今天的日期，否则什么也不做。

```
Public txt_file_location As String
Public txt_file_name As String
Private Sub Workbook_Open()

    txt_file_location = "C:\Documents and Settings\Chris\Desktop"
    txt_file_name = "test.txt"
    Dim dateToday As Date
    Dim dateInFile As Date
    dateToday = Date ' will be used for both comparison and for writing to txt file if need be
    dateInFile = txtfile_read(txt_file_location, txt_file_name)    ' On open - read the text file to check what the current date is.

    If (dateToday <> dateInFile) Then

        ' ok the date in the text file is different to today's date, so your script needs to be called here

        Call do_some_work ' a function that runs once a day...

        ' Now we need to update the textfile to todays date to prevent rerunning
        Call save_to_text_file(txt_file_location, txt_file_name, dateToday)
    Else
        MsgBox ("The script has already ran today")
    End If

End Sub
Sub do_some_work()

    ' here could be one of the functions that needs to run once a day
    MsgBox ("Some work was done!")

End Sub
Function txtfile_read(txt_file_dir, file_name)
    Dim iFileNumber As Long
    Dim strFilename As String
    strFilename = txt_file_dir & "\" + file_name
    iFileNumber = FreeFile()
    Open strFilename For Input As #iFileNumber
    Dim txt As Variant
    Do While Not EOF(iFileNumber)
        Line Input #iFileNumber, myLine
        txtfile_read = myLine
    Loop
    Close #iFileNumber
End Function
Function save_to_text_file(txt_file_dir, file_name, content_to_be_written)
    Dim iFileNumber As Long
    Dim strData As String
    Dim strFilename As String
    strFilename = txt_file_dir & "\" + file_name
    iFileNumber = FreeFile()
    Open strFilename For Output As #iFileNumber
    Print #iFileNumber, content_to_be_written
    Close #iFileNumber
End Function 
```

# servicestack - Servicestack 注册因泛型类型而崩溃

> ID：13600275
> 
> 赞同：3
> 
> 时间：2012-11-28T07:50:58.967
> 
> 标签：servicestack

如果我的服务有一个基类，例如

```
public abstract class BaseService<T,R> : ServiceStack.ServiceInterface.Service
{
    public R Get(T request)
    {
    }
} 
```

然后服务堆栈崩溃

试图加载格式不正确的程序。

我认为Servicestack在注册服务时应该忽略抽象的泛型类。有没有办法告诉 servicestack 忽略某些服务类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:54:15.017

默认情况下，ServiceStack 将程序集中的所有类型都包括为服务的候选对象。当它尝试实例化该类时，它会得到该异常。

通过覆盖宿主类中的 CreateServiceManager，您可以注入您自己的类型过滤，以便排除抽象和未封闭的泛型。

```
 protected override ServiceManager CreateServiceManager(params Assembly[] assembliesWithServices)
    {
        return new ServiceManager(
            new Container(),
            new ServiceController(
                () =>
                assembliesWithServices.SelectMany(
                    assembly => assembly.GetTypes().Where(t => !t.IsAbstract && !t.IsGenericTypeDefinition))));
    } 
```

# php - PHP - 选择单选按钮后直接显示消息

> ID：13600278
> 
> 赞同：1
> 
> 时间：2012-11-28T07:51:22.883
> 
> 标签：php, javascript, html, radio-button, messagebox

我正在使用 PHP 脚本，但是说我有两个单选按钮，对吗？

在选择一个或另一个时，我如何实际执行代码，例如（主要意图|显示消息框）？

假设我有一个名为`RadioButton1`“一旦”的单选按钮`checked/selected`，`message box`会出现一个说法`RadioButton1 Selected`？

仅通过PHP可以做到这一点吗？还是我需要集成一个发布到 PHP 页面的 html 页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:00:01.623

像这样使用 Javascript 进行客户端交互。下面的代码监听`onchange`事件并显示一个`alert()`.

**[jsFiddle 演示](http://jsfiddle.net/JDMk9/)**

```
<input type="radio" name="myradio" value="RadioButton1" />
<input type="radio" name="myradio" value="RadioButton2" />
<input type="radio" name="myradio" value="RadioButton3" />

<script>
​window.onload = function()
{
    var radios = document.getElementsByName("myradio");
     for(var i=0; i<radios.length; i++)
     {
        radios[i].onchange = function()
        {
            if(this.checked)
            {
                alert(this.value + " selected");
            }
        }
     }             
}​
</script> 
```

前 3 行是单选按钮 HTML。之后，我们有了`<script>`表示[Javascript](http://en.wikipedia.org/wiki/JavaScript)代码的标签。Javascript 正在向`onload`事件中添加一些代码，这简单的意思是：在页面加载时执行此代码。接下来，我们将所有单选按钮元素放入一个名为的数组`radios`中 - 为此我们使用`getElementsByName()`传递单选按钮组名称，即`myradio`. 接下来我们遍历数组中的每个单选按钮并分配一个`onchange`处理程序，这意味着：当每个单选按钮更改时执行此代码。在其中，我们检查单选按钮是否存在`checked`，如果是，我们显示警报，显示单选按钮的值，即`RadioButton1`, `RadioButton2`, `RadioButton3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:55:46.713

选择表单元素是在客户端的浏览器中完成的，而 PHP 是一种服务器端语言。在某些数据实际发送回服务器之前，它绝对不知道用户点击了什么，例如，在提交表单时通过 POST 请求。

所以不，PHP 无法实现您所追求的。

不过有一个简单的方法。JavaScript 在客户端执行，因此您可以轻松地将事件侦听器附加到单选按钮并在需要时显示消息框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:56:19.007

仅使用 php 是不可能的！尝试使用 Jquery，因为最简单的是这样做

```
$(document.body).on('click', '#radio-btn', function(){
    $.get( 'file1.php' , function (data) {
          //whatever you want to do after fetching the data from a php file
    }); 
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T07:57:58.340

单独使用 php 是不可能的，但你可以使用 Jquery ajax 来做到这一点。为此，请在单击单选按钮时发出 ajax 请求，并使用响应的数据填充消息框。让我用一个例子来解释：

```
<div id='msg_box'>Message will be displayed here</div> 
```

单击单选按钮调用 javascript 函数说 ajaxCallForMessage()

```
<script type="text/javascript">
function ajaxCallForMessage(){
$.ajax({
url: "Url of the page which contain message/?btn_name=xy",
 mthod: "GET"
}).done(function ( data ) {
$('#msg_box').append(data);
}); 
```

}

```
</script> 
```

确保您包含 jquery。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T08:08:36.383

如果我正确理解了您的问题，我建议您只需通过 Javascript 即可。

一旦用户选择了 RadioButton1，就会在页面中触发“点击”事件。我猜你知道你可以通过添加如下`onClick`属性来捕获它：

```
<input type="radio" name="Radio1" value="RadioOption1" onclick="showMessage()"> Option 1 
```

然后您需要做的就是创建一个 Javascript 函数`showMessage`，将一些 html 添加到页面（可能是一个段落）以及您想要显示的消息。您可以轻松地在 Javascript 中执行此操作，例如使用 jQuery append 或 html 函数。

```
function showMessage() {
   // Example displaying an alert
   alert("Message to be displayed here")
} 
```

如果确实需要从服务器获取信息，我只会在这里介绍 PHP。在这种情况下，您应该做的可能是从页面到服务器的 GET / POST（例如，通过 jQuery [get](http://api.jquery.com/jQuery.get/)或[post](http://api.jquery.com/jQuery.post/)方法使用 AJAX）。您将调用一个 PHP 脚本，该脚本返回一些信息，这些信息随后将通过 Javascript 显示在页面中。

但是，如果您只需要显示一条简单的消息，例如“已选择选项 1”，您应该在 Javascript 中执行此操作，而无需与服务器交互。

我希望这有帮助。

问候， 罗曼

# session - 以编程方式注销当前用户

> ID：13600280
> 
> 赞同：2
> 
> 时间：2012-11-28T07:51:30.010
> 
> 标签：session, symfony, fosuserbundle, symfony-2.0

我正在尝试以编程方式从侦听器内部注销当前用户。我在[这里](https://stackoverflow.com/questions/8455398/symfony-2-logout-userinterfaceerasecredentials/8456507#8456507)读到

```
$this->get('security.context')->setToken(null);
$this->get('request')->getSession()->invalidate(); 
```

做的伎俩，但后来我不能再打电话`$this->container->get('security.context')->getToken()->getUser();`了，因为令牌现在是`NULL`。

如何注销用户但仍让应用程序正常运行？我在我的控制器函数中调用了 getUser()，所以我应该将令牌设置回与未经身份验证的用户相对应的东西。我怎样才能做到这一点？

此外，如果有一种方法可以以编程方式启动一个新会话并设置一个 Flash 消息以通知用户他已注销，那将是非常棒的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:05:05.110

尝试

```
$anonToken = new AnonymousToken('theTokensKey', 'anon.', array());
$this->get('security.context')->setToken($anonToken); 
```

第一个参数是令牌的密钥（即'50cdf89882454'）

# iphone - 如何处理主页按钮 - iPhone/iPod

> ID：13600281
> 
> 赞同：1
> 
> 时间：2012-11-28T07:51:31.707
> 
> 标签：iphone, ipod

我正在为 iPhone 开发游戏。我实际上没有 iPhone，所以我在 iPod 设备（**版本 4.2.1**）上测试我的游戏。当我按下主页按钮时，游戏从第一级开始。我觉得这很奇怪，因为在模拟器中，按下主页按钮后，游戏从我停止的相同状态开始。我不确定为什么 iPod 上的行为不同，也许我需要以不同的方式处理**AppDelegate**方法（它不是根据设备自动处理吗？）

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:03:30.053

您正在测试应用程序的设备似乎不支持多任务处理。较旧的 iPod touch 和 iPhone 不支持关闭应用程序而不是暂停应用程序的多任务处理。

所有可以运行 iOS 4.3 或更高版本的设备都将支持后台。无法更新到 4.2.1 以上的设备将不支持后台，如果您按下主页按钮，应用程序将被关闭。

您需要将游戏状态保存在应用程序委托中`applicationWillTerminate:`

```
- (void)applicationWillTerminate:(UIApplication *)application {
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
} 
```

在此处保存当前游戏状态并读入`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

# android - 无法暂停活动

> ID：13600287
> 
> 赞同：0
> 
> 时间：2012-11-28T07:51:49.250
> 
> 标签：android

在开始另一个活动时，我在保存我的活动状态时遇到了一些问题。它告诉我它无法暂停活动。这意味着什么？

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putParcelable(SAVED_LOCATION, locationTracker.getCurrentLocation(null));
    outState.putSerializable(SAVED_MAP, selectedMap);
    outState.putBoolean(SAVED_FOLLOWMODE, mapDisplay.getFollowMode());  //line 280
    float[] geoCenter = mapDisplay.getScreenCenterGeoLocation();
    if (geoCenter != null) {
        outState.putSerializable(SAVED_CENTER, geoCenter);
    }
    float zoomLevel = mapDisplay.getZoomLevel();
    outState.putFloat(SAVED_ZOOMLEVEL, zoomLevel);
    if (safetyReminder != null) {
        outState.putBundle(SAVED_SAFETY_REMINDER, safetyReminder.onSaveInstanceState());
    }
    // Save to original intent to have this available at will
    getIntent().putExtra(SAVED_INSTANCESTATE, outState);

} 
```

堆栈跟踪：

```
 11-27 23:45:25.968: E/AndroidRuntime(5666): FATAL EXCEPTION: main
11-27 23:45:25.968: E/AndroidRuntime(5666): java.lang.RuntimeException: Unable to pause activity {edu.android.hvz/edu.android.hvz.CustomMaps}: java.lang.NullPointerException
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3348)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3305)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3288)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.ActivityThread.access$2500(ActivityThread.java:125)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2040)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.os.Looper.loop(Looper.java:123)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at java.lang.reflect.Method.invokeNative(Native Method)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at java.lang.reflect.Method.invoke(Method.java:521)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at dalvik.system.NativeStart.main(Native Method)
11-27 23:45:25.968: E/AndroidRuntime(5666): Caused by: java.lang.NullPointerException
11-27 23:45:25.968: E/AndroidRuntime(5666):     at edu.android.hvz.CustomMaps.onSaveInstanceState(CustomMaps.java:280)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.Activity.performSaveInstanceState(Activity.java:1036)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1180)
11-27 23:45:25.968: E/AndroidRuntime(5666):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3330)
11-27 23:45:25.968: E/AndroidRuntime(5666):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:59:11.563

在使用`mapDisplay`变量之前添加检查..

```
@Override
public void onSaveInstanceState(Bundle outState) {
super.onSaveInstanceState(outState);
outState.putParcelable(SAVED_LOCATION, locationTracker.getCurrentLocation(null));
outState.putSerializable(SAVED_MAP, selectedMap);
if(mapDisplay != null) {
    outState.putBoolean(SAVED_FOLLOWMODE, mapDisplay.getFollowMode());  //line 280
    float[] geoCenter = mapDisplay.getScreenCenterGeoLocation();
    if (geoCenter != null) {
        outState.putSerializable(SAVED_CENTER, geoCenter);
    }
    float zoomLevel = mapDisplay.getZoomLevel();
    outState.putFloat(SAVED_ZOOMLEVEL, zoomLevel);
}
if (safetyReminder != null) {
    outState.putBundle(SAVED_SAFETY_REMINDER, safetyReminder.onSaveInstanceState());
}
// Save to original intent to have this available at will
getIntent().putExtra(SAVED_INSTANCESTATE, outState);

} 
```

# ruby - 使用正则表达式检查至少 8 位数字的字符串

> ID：13600290
> 
> 赞同：3
> 
> 时间：2012-11-28T07:52:02.243
> 
> 标签：ruby, regex

我的正则表达式如下：

```
 /^(\d|-|\(|\)|\+|\s){12,}$/ 
```

这将允许数字 (, ) 和空格。但我想确保字符串包含至少 8 位数字。一些允许的字符串如下：

```
 (1323  ++24)233
      24243434 43
      ++++43435++4554345  434 
```

它不应该允许这样的字符串：

```
 ((((((1213)))
     ++++232+++ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T07:55:01.000

一开始在您的正则表达式中使用`Look ahead`..

```
/^(?=(.*\d){8,})[\d\(\)\s+-]{8,}$/
  ---------------
          |
          |->this would check for 8 or more digits 
```

* * *

`(?=(.*\d){8,})`是0`zero width look ahead`到`checks`多个字符 (ie `.*`) 后跟一个数字 (ie `\d`) 8 到很多次 (ie `{8,0}`)

`(?=)`被称为零宽度，因为它不消耗字符..它只是**检查**

* * *

要将其限制为 14 位数，您可以这样做

```
/^(?=([^\d]*\d){8,14}[^\d]*$)[\d\(\)\s+-]{8,}$/ 
```

* * *

[在这里](http://regexpal.com/)试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:19:33.327

无需提及`^`,`$`或 , or 的“或更多”部分`{8,}`，`{12,}`不清楚它的来源。

以下使意图变得透明。

```
r = /
  (?=(?:.*\d){8})    # First condition: Eight digits
  (?!.*[^-\d()+\s])  # Second condition: Characters other than `[-\d()+\s]` should not be included.
/x 
```

导致：

```
"(1323  ++24)233" =~ r #=> 0
"24243434 43" =~ r #=> 0
"++++43435++4554345  434" =~ r #=> 0
"((((((1213)))" =~ r #=> nil
"++++232+++" =~ r #=> nil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:50:42.460

这是一个非正则表达式解决方案

```
numbers = ["(1323  ++24)233", "24243434 43" , "++++43435++4554345  434", "123 456_7"]

numbers.each do |number|
  count = 0
  number.each_char do |char| 
    count += 1 if char.to_i.to_s == char
    break if count > 7
  end
  puts "#{count > 7}"
end 
```

# image - 在 Joomla 2.5 中，如何在“列出所有类别”布局中添加类别图像和标题

> ID：13600293
> 
> 赞同：0
> 
> 时间：2012-11-28T07:52:21.243
> 
> 标签：image, layout, joomla, joomla2.5, categories

在 Joomla 2.5.8 中，我创建了一个使用“列出所有类别”类型的菜单项。我想显示父类别的图像和标题以及每个子类别的图像，如下所示：

-- 父类图片 --

父类别标题 父类别描述

SubCategory1 标题 Subcategory1 图片 -- SubCategory1 描述

SubCategory2 标题 Subcategory2 图片 -- SubCategory2 描述

SubCategory3 标题 Subcategory3 图片 -- SubCategory3 描述

SubCategory4 标题 Subcategory4 图片 -- SubCategory4 描述

我正在使用文件 template/html/com_content/categories/default.php 并尝试从 blog.php 文件中复制代码：

```
<?php if ($this->params->get('show_description_image') && $this->category->getParams()->get('image')) : ?>
            <img src="<?php echo $this->category->getParams()->get('image'); ?>"/>
        <?php endif; ?> 
```

但它打破了页面并加载了一个空白页面。子类别的标题及其描述显示，我只是缺少父标题和图像。

在菜单项的选项中，我将类别标题、描述和图像全部设置为显示。

对此的任何帮助将不胜感激。

**这是默认的.php 代码：**

```
<?php
/**
 * @package     Joomla.Site
 * @subpackage  com_content
 * @copyright   Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */

// no direct access
defined('_JEXEC') or die;

JHtml::addIncludePath(JPATH_COMPONENT.'/helpers');

?>
<?php if ($this->params->get('show_page_heading')) : ?>
                <h1>
                    <?php echo $this->escape($this->params->get('page_heading')); ?>
                </h1>
                <?php endif; ?>
                <?php if ($this->params->get('show_base_description')) : ?>
                    <?php   //If there is a description in the menu parameters use that; ?>
                        <?php if($this->params->get('categories_description')) : ?>
                            <?php echo  JHtml::_('content.prepare', $this->params->get('categories_description'), '', 'com_content.categories'); ?>
                        <?php  else: ?>
                            <?php //Otherwise get one from the database if it exists. ?>
                            <?php  if ($this->parent->description) : ?>
                                <div class="category-desc">
                                    <?php  echo JHtml::_('content.prepare', $this->parent->description, '', 'com_content.categories'); ?>
                                </div>
                            <?php  endif; ?>
                        <?php  endif; ?>
                    <?php endif; ?>
                <?php
                echo $this->loadTemplate('items');
                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T08:51:33.713

答案在这里：http: [//forum.joomla.org/viewtopic.php?p=2613555](http://forum.joomla.org/viewtopic.php?p=2613555)

> 显示图像的代码，如果类别有图像并且选择了“显示类别图像”（Joomla 2.5，它也应该适用于 1.7）。
> 
> 对于父类别，在 templates/mytemplate/html/com_content/categories/default.php

```
<?php if ($this->params->get('show_description_image') && $this->parent->getParams()->get('image')) : ?>
     <img src="<?php echo $this->parent->getParams()->get('image'); ?>" alt=" "/>
<?php endif; ?> 
```

> 对于子类别，在 templates/mytemplate/html/com_content/categories/default_items.php

```
<?php if ($this->params->get ('show_description_image') && $item->getParams()->get('image')) :?>
     <img src="<?php echo $item->getParams()->get('image');?>" alt=" "/>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-25T00:16:32.890

这是 Joomla 3.x 版本的解决方案。它适用于类别和子类别。模板/mytemplate/html/com_content/categories/default_items.php

```
<?php if ($item->getParams()->get('image')) : ?>
  <img src="<?php echo $item->getParams()->get('image');?>" alt="">
<?php end if; ?> 
```

# javascript - 如何确保在集合中创建的 Backbone 模型的正确顺序？

> ID：13600294
> 
> 赞同：3
> 
> 时间：2012-11-28T07:52:26.127
> 
> 标签：javascript, backbone.js

我在文件列表中的特定索引处异步上传文件（使用 FormData）：

```
files.create({position: index + 1 }, {at: index}); // files is Backbone.Collection 
```

然后服务器保存上传文件并在特定位置之后移动文件的位置，以释放新插入文件的位置。

然后在客户端我听添加事件并使用选项中的索引来插入文件视图。

```
files.on("add", function(model, collection, options) {
    // insert file view at options.index position
}) 
```

我还更新`position`了集合中所有模型的属性：

```
files.on("add remove", function(){ 
  this.each(function(m, index) {
    m.set({position: index + 1});
  })
}); 
```

问题是当我在同一索引位置一次上传多个文件时，文件视图以错误的顺序附加到列表中。

如何确保`position`主干集合中文件模型的正确顺序和属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:32:23.027

不使用 javascript 发起的位置，而是使用服务器生成的 id，例如 unix 时间戳，并且由于 mu 建议太短，请使用

```
comparitor: function() { 
    return -this.timestamp // negative ensures latest items show up on top, and olders at the bottom 
} 
```

如果您需要更具体的排序，您可以随时使用更精细的微时间，或者简单地在服务器端生成增量 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:20:51.430

我能够覆盖对 ajax 请求进行排队的 collection.create。为此，我使用了[此答案](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me/3314877#3314877)中的代码。

```
var Documents = Backbone.Collection.extend({

  model: Document,

  url: "/a/documents",

  initialize: function() {
    this.on("add remove", this.updatePositions, this);
    this.ajaxQueue = $({});
  },

  updatePositions: function(model, collection, options) {
    this.each(function(m, index) {
      m.set({position: index + 1});
    })
  },

  create: function(model, options) {
    var jqXHR
      , dfd = $.Deferred()
      , promise = dfd.promise()
      , coll = this;

    // queue our ajax request
    this.ajaxQueue.queue(doRequest);

    // add the abort method
    promise.abort = function(statusText) {
      // Proxy abort to the jqXHR if it is active
      if (jqXHR) {
        return jqXHR.abort(statusText);
      }

      // If there wasn't already a jqXHR we need to remove from queue
      var queue = this.ajaxQueue.queue()
        , index = $.inArray(doRequest, queue);

      if (index > -1) {
        queue.splice(index, 1);
      }

      // Reject the deferred
      dfd.rejectWith(options.context || options,
                     [promise, statusText, ""]);

      return promise;
    };

    // Run the actual collection.create
    function doRequest(next) {
      options = options ? _.clone(options) : {};
      model = coll._prepareModel(model, options);
      if (!model) return false;
      if (!options.wait) coll.add(model, options);
      var success = options.success;
      options.success = function(nextModel, resp, xhr) {
        if (options.wait) coll.add(nextModel, options);
        if (success) {
          success(nextModel, resp);
        } else {
          nextModel.trigger('sync', model, resp, options);
        }
      };
      jqXHR = model.save(null, options)
        .done(dfd.resolve)
        .fail(dfd.reject)
        .then(next, next);
    };

    return promise;
  }

}); 
```

# mysql - MySQL 错误 - 添加主键

> ID：13600295
> 
> 赞同：1
> 
> 时间：2012-11-28T07:52:27.207
> 
> 标签：mysql, key, primary-key

我的 mysql 服务器有一个大错误。MySQL 昨天崩溃了，但一切正常。如果我今天想进行更新，我在添加主键时遇到了问题。我需要将主键添加到表 A13_product 这里是创建脚本

```
CREATE TABLE `A13_product` (
`id` INT(11) NOT NULL,
`users_id` INT(11) NULL DEFAULT NULL,
`product_set_id` INT(11) NULL DEFAULT NULL,
`producer_id` INT(11) NULL DEFAULT NULL,
`photos_id` INT(11) NULL DEFAULT NULL,
`photogallery_id` INT(11) NULL DEFAULT NULL,
`name` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`price` DECIMAL(15,5) NULL DEFAULT NULL,
`price_recycling` DECIMAL(15,5) NULL DEFAULT NULL,
`description_short` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_en` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_de` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_sk` TEXT NULL COLLATE 'utf8_czech_ci',
`has_comments` TINYINT(1) NULL DEFAULT NULL,
`active` TINYINT(1) NULL DEFAULT NULL,
`warranty` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`date_add` DATETIME NULL DEFAULT NULL,
`date_edit` DATETIME NULL DEFAULT NULL,
`view_count` INT(11) NULL DEFAULT NULL,
`url` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`sticky` TINYINT(1) NULL DEFAULT NULL,
`delivery_date` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`possible_buy` TINYINT(1) NULL DEFAULT NULL,
`var1` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var2` VARCHAR(255) NOT NULL DEFAULT '' COLLATE 'utf8_czech_ci',
`var3` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var4` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var5` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`poradi` INT(11) NOT NULL DEFAULT '0',
`tax_rates_id` INT(11) NULL DEFAULT NULL,
`cache_url` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`description_en` TEXT NULL COLLATE 'utf8_czech_ci',
`name_en` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`ics` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var_cz` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var_en` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`branch` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`cast` VARCHAR(10) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`podc` VARCHAR(10) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`weight` DECIMAL(15,5) NULL DEFAULT NULL,
`image` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`stupen` VARCHAR(40) NOT NULL COLLATE 'utf8_czech_ci'
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

这是一个 SQL 命令，我需要执行

```
ALTER TABLE A13_product ADD PRIMARY KEY(`id`); 
```

错误是

```
SQL Error (156): Table 'c2****.A13_product#1' already exists 
```

在表中不使用键，当我给 DROP 键时，他告诉我表中没有键

当我查看表 TABLE_contrastion 中的 INFORMATION_SCHEMA 时，表 A13_product 没有键

请问有谁知道，问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:12:06.837

您不能像使用外键或索引或默认值那样在列上删除 NOT NULL 约束。这可能是您不能删除主键（如果存在）的原因。相反，只需使用“更改”或“修改”语法并省略 NOT NULL 位：

```
alter table A13_product modify id INT(11) default null; 
```

列上的任何预先存在的索引或外键都不会受到影响。然后，尝试这样做：

```
ALTER TABLE A13_product DROP PRIMARY KEY, ADD PRIMARY KEY(id,id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:16:10.937

只需将您的创建表结构更改为：

```
CREATE TABLE `A13_product` (
`id` INT(11) NOT NULL,
`users_id` INT(11) NULL DEFAULT NULL,
`product_set_id` INT(11) NULL DEFAULT NULL,
`producer_id` INT(11) NULL DEFAULT NULL,
`photos_id` INT(11) NULL DEFAULT NULL,
`photogallery_id` INT(11) NULL DEFAULT NULL,
`name` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`price` DECIMAL(15,5) NULL DEFAULT NULL,
`price_recycling` DECIMAL(15,5) NULL DEFAULT NULL,
`description_short` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_en` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_de` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_sk` TEXT NULL COLLATE 'utf8_czech_ci',
`has_comments` TINYINT(1) NULL DEFAULT NULL,
`active` TINYINT(1) NULL DEFAULT NULL,
`warranty` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`date_add` DATETIME NULL DEFAULT NULL,
`date_edit` DATETIME NULL DEFAULT NULL,
`view_count` INT(11) NULL DEFAULT NULL,
`url` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`sticky` TINYINT(1) NULL DEFAULT NULL,
`delivery_date` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`possible_buy` TINYINT(1) NULL DEFAULT NULL,
`var1` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var2` VARCHAR(255) NOT NULL DEFAULT '' COLLATE 'utf8_czech_ci',
`var3` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var4` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var5` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`poradi` INT(11) NOT NULL DEFAULT '0',
`tax_rates_id` INT(11) NULL DEFAULT NULL,
`cache_url` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`description_en` TEXT NULL COLLATE 'utf8_czech_ci',
`name_en` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`ics` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var_cz` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var_en` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`branch` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`cast` VARCHAR(10) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`podc` VARCHAR(10) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`weight` DECIMAL(15,5) NULL DEFAULT NULL,
`image` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`stupen` VARCHAR(40) NOT NULL COLLATE 'utf8_czech_ci'
CREATE TABLE `A13_product` (
`id` INT(11) NOT NULL,
`users_id` INT(11) NULL DEFAULT NULL,
`product_set_id` INT(11) NULL DEFAULT NULL,
`producer_id` INT(11) NULL DEFAULT NULL,
`photos_id` INT(11) NULL DEFAULT NULL,
`photogallery_id` INT(11) NULL DEFAULT NULL,
`name` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`price` DECIMAL(15,5) NULL DEFAULT NULL,
`price_recycling` DECIMAL(15,5) NULL DEFAULT NULL,
`description_short` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_en` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_de` TEXT NULL COLLATE 'utf8_czech_ci',
`description_long_sk` TEXT NULL COLLATE 'utf8_czech_ci',
`has_comments` TINYINT(1) NULL DEFAULT NULL,
`active` TINYINT(1) NULL DEFAULT NULL,
`warranty` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`date_add` DATETIME NULL DEFAULT NULL,
`date_edit` DATETIME NULL DEFAULT NULL,
`view_count` INT(11) NULL DEFAULT NULL,
`url` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`sticky` TINYINT(1) NULL DEFAULT NULL,
`delivery_date` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`possible_buy` TINYINT(1) NULL DEFAULT NULL,
`var1` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var2` VARCHAR(255) NOT NULL DEFAULT '' COLLATE 'utf8_czech_ci',
`var3` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var4` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var5` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`poradi` INT(11) NOT NULL DEFAULT '0',
`tax_rates_id` INT(11) NULL DEFAULT NULL,
`cache_url` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`description_en` TEXT NULL COLLATE 'utf8_czech_ci',
`name_en` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`ics` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var_cz` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`var_en` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`branch` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`cast` VARCHAR(10) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`podc` VARCHAR(10) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`weight` DECIMAL(15,5) NULL DEFAULT NULL,
`image` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8_czech_ci',
`stupen` VARCHAR(40) NOT NULL COLLATE 'utf8_czech_ci',
PRIMARY KEY (`id`)
) COLLATE='utf8_general_ci' ENGINE=InnoDB; 
```

# actionscript-3 - 哪些设备支持 adobe air？

> ID：13600300
> 
> 赞同：2
> 
> 时间：2012-11-28T07:52:56.843
> 
> 标签：actionscript-3, mobile, air, adobe

我愿意将我的旧 Flash 和网络应用程序/游戏切换到 adobe air，以便移动用户也可以使用它们，并且需要知道 adobe air 在设备中的知名度。所以我的努力​​没有白费。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:08:46.697

有一些移动设备在本地运行 FlashPlayer。正如您所说，可以将 AIR 应用程序编译为本机应用程序，从而允许您为 Android 和 IOS 设备发布，从而扩大覆盖范围。

**支持 FlashPlayer 的设备： http:**
[//www.adobe.com/devnet-apps/flashruntimes/certified-devices.html](http://www.adobe.com/devnet-apps/flashruntimes/certified-devices.html)

**Android 设备：**
[http ://en.wikipedia.org/wiki/Comparison_of_Android_devices](http://en.wikipedia.org/wiki/Comparison_of_Android_devices)

**IOS 设备：**
[http ://en.wikipedia.org/wiki/List_of_iOS_devices](http://en.wikipedia.org/wiki/List_of_iOS_devices)

*小提示：如果我错了，没有运行 Adob​​e AIR（？）的设备纠正我*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:53:41.970

查看[Adob​​e AIR 技术规格](http://www.adobe.com/products/air/tech-specs.html)

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:19:57.593

在我实际遇到的移动设备中，AIR 本身并不是真正“知名”的。相反，AIR 将编译**为本机**应用程序，这意味着 iOS 的 .IPA 或 Android 的 .APK。在这种情况下，从技术上讲，这些设备上的“AIR”不是本机二进制文件。

[如果您在http://www.flashdevelop.org/](http://www.flashdevelop.org/)下载免费的 FlashDevelop，您可以使用他们预制的 AIR for Mobile 模板来查看这些是如何编译的。

**Windows 8 / Metro / Surface** Adob​​e 路线图专注于 Metro / Windows 8 的 Flash Player，但 Adob​​e 在其他地方表示 AIR 将成为实现此目标的工具 (http://blogs.adobe.com/digitalmedia/2011/09/flash- support-on-windows-8-and-metro/)，但尚未发布/支持[http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)。

**Blackberry** Blackberry 10 和 Playbook 有一个 Blackberry SDK。我没有玩过这些，但您可以在[https://developer.blackberry.com/air/找到更多信息](https://developer.blackberry.com/air/)

# html - 在不增加宽度的情况下增加文本的高度

> ID：13600306
> 
> 赞同：0
> 
> 时间：2012-11-28T07:53:22.053
> 
> 标签：html, css

我想增加 html 中文本的高度，而不按比例增加其宽度。当我增加 时`font-size`，增加是水平方向和垂直方向。

* * *

您可能会认为它就像拉伸文本的高度，而其宽度保持不变。我可以使用 CSS 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:57:40.553

这可能会为你做。

```
.higher {
    transform:scale(1,2);
    -webkit-transform:scale(1,2);
    -moz-transform:scale(1,2);
    -ms-transform:scale(1,2);
    -o-transform:scale(1,2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:01:20.037

您可以使用 CSS3 中的 scale 变换属性：

```
.condensed {
    -webkit-transform: scale(1, 2);
       -moz-transform: scale(1, 2);
        -ms-transform: scale(1, 2);
         -o-transform: scale(1, 2);
            transform: scale(1, 2);
}​ 
```

因为它需要两个值，所以您可以缩放字母的高度和宽度。

[http://jsfiddle.net/Kyle_Sevenoaks/8bT8q/](http://jsfiddle.net/Kyle_Sevenoaks/8bT8q/)

如您所见，如果您切换值，则字母会以另一种方式拉伸。

[http://jsfiddle.net/Kyle_Sevenoaks/8bT8q/1/](http://jsfiddle.net/Kyle_Sevenoaks/8bT8q/1/)

请注意，这是一个 CSS3 属性，并非所有浏览器都支持（主要是 IE<9）。

还要考虑到元素将有效地保持其宽度，因为我的文本没有被缩放，所以如果你有一些布局怪癖，这可能是原因。

[http://jsfiddle.net/Kyle_Sevenoaks/8bT8q/2/](http://jsfiddle.net/Kyle_Sevenoaks/8bT8q/2/)

这里我设置了缩放的bg颜色`<h1>`来展示效果。

# yii - 当你使用 Less 时，YII 上的“forceCompile”是什么意思？

> ID：13600314
> 
> 赞同：0
> 
> 时间：2012-11-28T07:53:36.467
> 
> 标签：yii

我有这个：

```
'components'=>array(
  'less'=>array(
    'class'=>'ext.less.components.LessCompiler',
    'forceCompile'=> true, //YII_DEBUG, // indicates whether to force compiling
    //'compress'=>false, // indicates whether to compress compiled CSS
    //'debug'=>false, // indicates whether to enable compiler debugging mode
    'paths'=>array(
      'less/style.less'=>'css/style.css',
    ),
  ), 
```

如果我启用 forceCompile，我的网站会非常慢。我会想象，因为它会在每个页面加载时重新生成 css。我的问题是禁用它。如果我禁用它：

1.  我对 style.less 所做的任何更改都不会反映在浏览器中吗？
2.  如果是这样，Less 的意义何在？那么它肯定不能实际用于生产吗？或者您是否禁用 forceCompile 以便它只生成一次？

任何关于 forceCompile 的澄清将不胜感激！

（是的，我一直在寻找一个明确的解释……我能找到的最好的就是[这个](http://www.yiiframework.com/forum/index.php/topic/26348-extension-less/)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:49:47.287

首先让我告诉你[less](https://stackoverflow.com/tags/less/info "https://stackoverflow.com/tags/less/info")有什么意义：

1.  less 是一种[元语言](http://en.wikipedia.org/wiki/Metalanguage "http://en.wikipedia.org/wiki/Metalanguage")，因此总的来说，使用 less 可以帮助您编写**易于维护的 css**，尽管使用的“*语言*”语法较少。作为一个常见示例，您可以在 less 中定义变量，这些变量根据您的 less 文件中的其他*语句编译为 css 值。*或者，您可以像在大多数其他支持 OOP 的语言中一样使用混合、嵌套、继承概念。

2.  因此，您编写可理解、**可读的** *伪/元 css*代码，并在编译时转换为实际 css。

* * *

现在扩展：

即使您禁用`forceCompile`，在*style.less*中所做的更改也应该反映出来，因为扩展程序会检查文件是否被修改（来自*LessCompiler.php*的以下行应该让您相信这一点）：

```
if ($this->forceCompile || $this->hasChanges())
    $this->compileAll();

// ...

/**
 * Returns whether any of files configured to be compiled has changed.
 * @return boolean the result.
 */
protected function hasChanges() {
    // ...
        $compiled = $this->getLastModified($destination);
    // ...
        $modified = $this->getLastModified($dir);
    // ...
}

/**
 * Returns the last modified for a specific path.
 * @param string $path the path.
 * @return integer the last modified (as a timestamp).
 */
protected function getLastModified($path){ 
    //...
} 
```

因此`forceCompile`将始终编译您在 中指定的文件`paths`，并且您不应在生产中启用它。该`hasChanges`调用应该处理*较少的已修改文件*，并编译它们，正如您在上面看到的那样，扩展程序会自动完成。

# bash - 一个接一个地运行一个命令，即使我挂起第一个命令（Ctrl-z）

> ID：13600319
> 
> 赞同：70
> 
> 时间：2012-11-28T07:53:57.170
> 
> 标签：bash, shell, command, signals, suspend

我知道在 bash 中，我可以通过用分号分隔命令一个接一个地运行命令，例如

```
$ command1; command2 
```

或者，如果我只想`command2`在`command1`成功时运行，请使用`&&`：

```
$ command1 && command2 
```

这可行，但如果我暂停`command1`使用`Ctrl-z`，在第一种情况下，它会`command2`立即运行，而在第二种情况下，它根本不会运行。如何按顺序运行命令，但仍然能够挂起第一个命令，但在我重新启动它（使用`fg`）并完成之前不能运行第二个命令？我更喜欢输入尽可能简单的东西，因为我想以交互方式执行此操作。或者也许我只需要在某处设置一个选项。

顺便说一句，什么是正确的术语是什么`Ctrl-z`？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-11-28T08:03:40.803

以下应该做到这一点：

```
(command1; command2) 
```

注意添加的括号。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-28T08:45:30.657

在 Bash 中，当您将作业置于后台（使用 CTRL+Z 或 &）时，它不会等待作业完成，并给出退出代码为零（成功）。您已经观察到了这么多，并且记录在`man`页面中。

逻辑“AND” && 的行为是从左到右进行测试。每个部分都必须成功，因此如果第一个部分不成功，则第二个部分将不会运行。因此，使用 && 它从左到右运行命令，直到其中一个失败。成功的定义是退出代码 ($?) 为零。

将此与逻辑“或”|| 进行对比，后者从左到右运行命令，直到其中一个*起作用*。

@NPE 给出的 subshel​​l 解决方案的解释也可以在以下`man`页面中找到：

*'a ; 形式的复合命令和命令序列；乙; 尝试暂停进程时，不会优雅地处理 c'。当一个进程停止时，shell 立即执行序列中的下一个命令。将命令序列放在括号之间就足够了，以强制它进入一个子shell，它可以作为一个单元停止。*

CTRL+Z 的正确术语是*挂起*字符，同样来自`man`页面：

*在进程运行时键入挂起字符（通常是 ^Z、Control-Z）会导致该进程停止并将控制权返回给 bash。*

（很抱歉引用了`man`这么多页面，但它们确实是你的朋友，值得一读）

If you look at `stty -a` you will see something like this:

```
susp = ^Z; 
```

So you can alter it, hence the phrase "typically". Don't do that though, it will confuse the heck out of everyone. The terminal driver raises a SIGTSTP signal which is trapped by Bash.

# visual-c++ - 在哪里为 VS2012 中的 Debug 构建定义 DEBUG 符号？

> ID：13600320
> 
> 赞同：1
> 
> 时间：2012-11-28T07:53:59.627
> 
> 标签：visual-c++, visual-studio-2012

我有 Win32 DLL 应用程序。选择调试版本。我写了这样的代码：

```
#if DEBUG
fflush(logFile);
#endif 
```

但是`fflush(logFile);`是灰色的，所以我认为它不会被执行。但我希望它被执行。这是否意味着在 Debug`DEBUG`中未定义符号？在VS2012中哪里可以定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:22:05.373

预处理器定义在项目设置下定义，如屏幕截图所示（注意`_DEBUG`那里）：

![在此处输入图像描述](../Images/ea2e4b59ec7128606ad0bc15c5ccafd7.png)

请注意，如果`_DEBUG`您想检查它是否已定义，而不是将其（可能缺少定义）与零进行比较。你要：

`#if defined(_DEBUG)`

或者

`#ifdef _DEBUG`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:46:30.010

默认情况下，Visual Studio C++ 项目将为`_DEBUG`调试项目配置定义宏。它将具有值`1`，因此您可以使用`#if`or对其进行测试`#ifdef`。

但请注意，宏以下划线开头 - 如果您想使用名称`DEBUG`（也许您有使用该名称的现有代码），您需要自己将其添加到项目属性中（`C/C++ | Preprocessor | Preprocessor definitions`）。或者，您可以将以下内容放在每个翻译单元（可能）中包含的标题中`stdafx.h`：

```
#if _DEBUG
#undef DEBUG
#define DEBUG 1
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:03:47.417

每个项目都有两个版本：调试和发布。调试构建已`DEBUG`定义，就像您使用以下定义一样：

```
#define DEBUG 
```

它使代码能够以不同的方式生成。代码（函数、类等）的编写者可能会添加额外的诊断来帮助调试。Debug 版本仅用于调试，您不要将此版本（即使用 Debug 版本生成的 EXE）提供给客户。

另一个`DEBUG`未定义符号的构建是用于发布构建。发布版本适用于代码级别、编译器设置级别和链接器级别的优化代码。大多数诊断、断言、调试辅助功能将被禁用 - 以生成优化的可执行文件。

不管谁写了上面的代码，脑子里都写了同样的东西。只有在调试构建正在运行时才能刷新文件。您可以注释`#if`and `#endif`，并让`fflush`行编译，或者您可以使用 Release build。这一切都取决于你。

# search - SugarCRM 中的搜索和一对多关系

> ID：13600323
> 
> 赞同：1
> 
> 时间：2012-11-28T07:54:10.243
> 
> 标签：search, contacts, categories, sugarcrm

我正在尝试为我在 SugarCRM 中的联系人创建类似标签的类别字段。我已经阅读了一些文档，创建了一个模块并将其与我的联系人连接为 1 到 N 关系。问题是，编辑表单只允许选择一个类别，但是您可以在联系人视图中添加任意数量的类别。但是当你搜索时，它只查找在编辑表单中设置了类别的联系人，而不会关注列表中设置的其他类别。

创建 1 到 N 关系以便所有项目都用于搜索结果的正确方法是什么？

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:17:01.680

您应该能够使用 MultiSelect 字段进行标记，并在搜索期间正确提取。

# python - Python if_py 和 VIM：BufAdd，将内容插入新缓冲区

> ID：13600326
> 
> 赞同：1
> 
> 时间：2012-11-28T07:54:13.240
> 
> 标签：python, vim

当我打开一个缓冲区（通过 :tabnew 或任何其他方式）时，如果没有与缓冲区关联的文件名，我想插入一些默认文本（最近打开的文件）。

```
au BufAdd * call My_dir(expand("<afile>"))

function! My_dir(fname)
python << EOF
import vim
blah = vim.eval('a:fname')
if str(blah) == 'None':
    cb = vim.current.buffer
    cb.append("yuck")
EOF
endfunction 
```

问题是，fname 将是“无”，但 current.buffer 是我之前所在的缓冲区！如何获取我刚刚打开的缓冲区以便我可以将东西放入其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:58:12.357

您遇到的问题是该`BufAdd`事件是在创建窗口之前触发的，并且显然是在 Vim 的当前缓冲区设置为新创建的缓冲区之前。

您需要做的就是使用该`BufWinEnter`事件：

```
au BufWinEnter * call My_dir(expand("<afile>")) 
```

我用这个小改动尝试了你的功能，它奏效了。

# java - 如何在 swt 中处理一个小部件并在同一个地方再次创建该小部件？

> ID：13600328
> 
> 赞同：2
> 
> 时间：2012-11-28T07:54:20.063
> 
> 标签：java, swt

我正在开发一个`swt`应用程序，我想在其中放置一个按钮，并再次想在同一个地方重新创建它。但我得到小部件已处置错误。我该怎么做？○

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:41:52.830

您可以尝试替代路径...这不是释放按钮，而是隐藏它。如果您使用的是，`GridLayout`您可以使用它[`GridData#exclude`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/layout/GridData.html#exclude)来确保按钮被隐藏并且它的空间被其他人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:50:51.593

如果您不使用 GridLayout，您可以设置按钮不可见调用`Control:setVisibile(boolean)`。

# nhibernate - 休眠查询 /查询结束 按子查询排序

> ID：13600329
> 
> 赞同：3
> 
> 时间：2012-11-28T07:54:23.050
> 
> 标签：nhibernate, sql-order-by, subquery, queryover

我在让 Nhibernate 3.3.2.4000 生成 orderby 子句中使用的正确子查询时遇到问题，如下所示：

```
select *
from dbo.Person p inner join dbo.Task t on p.Task_FK = p.TaskId    
order by (select p.CustomerNumber where p.IsMain=1) desc 
```

我们有两个实体：`Task`和`Person`

一项任务可以有 N 个人与之相关。即 Task 有一个 IList 属性。

如何让 Nhibernate 生成正确的子查询？我已经用查询 API 做到了这样的事情：

```
query = query.OrderBy(x => x.Persons.Single(t => t.CustomerNumber)); 
```

但我不确定如何正确生成原始 sql 查询中显示的 where 子句。以某种方式使用queryover api可能更容易完成吗？

非常欢迎任何建议或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:09:12.950

```
Task task = null
Person person = null;
var subquery = QueryOver.Of<Task>()
    .Where(t => t.Id == task.Id)
    .JoinQueryOver(t => t.Persons, () => person)
    .Where(p => p.IsMain)
    .Select(() => person.CustomerNumber);

var query = session.QueryOver(() => task)
    .OrderBy(Projections.SubQuery(subquery))
    .FetchMany(x => x.Persons)

return query.List(); 
```

# visual-c++ - 无法将“cocos2d::CCPoint”转换为“cocos2d::CCPoint”

> ID：13600330
> 
> 赞同：2
> 
> 时间：2012-11-28T07:54:23.240
> 
> 标签：visual-c++, cocos2d-x

我是 C++ 和 cocos2d-x 的新手，所以我不明白为什么会出错。代码

```
void
MainLayer::ccTouchesBegan(CCSet *pTouches, CCEvent *pEvent)
{
    // Get any touch and convert the touch position to in-game position.
    CCTouch* touch = (CCTouch*)pTouches->anyObject();
    CCPoint position = touch->locationInView();
    position = CCDirector::sharedDirector()->convertToGL(position);

   __pShip->setMove(position);
} 
```

这是功能代码。

```
Ship::setMove(CCPoint *newPosition)
{
    __move=*newPosition;
} 
```

如您所见，它使用*CCPoint*类型作为参数，但它与*位置* Header 失败：

```
class Ship : public AnimatedObject
{
public:
    Ship();
    bool init(const char* frameName, CCSpriteBatchNode* pSpriteSheet);
    void setMove(CCPoint* newPosition);
    void move();

 private:
     /**
     * A CCMoveTo action set in the move() method.
     */
    cocos2d::CCFiniteTimeAction* __pMoveAction;

    /**
    * This value specifies the ship's speed.
    */
    float   __speed;

     /**
     * This value specifies position to which the ship should move.
     * It's set in touch events callbacks in MainLayer class.
     */
    CCPoint  __move;    
}; 
```

我究竟做错了什么？为什么此代码无法转换 CCPoints？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:03:51.877

采用：

```
__pShip->setMove(&position);  // Address-of 
```

或者改变函数本身：

```
Ship::setMove(CCPoint newPosition) // better: const CCPoint& newPosition
{
    __move = newPosition;
} 
```

如果`CCPoint`是一个小类，按值使用（如图所示），或者如果它更大（复制成本高），则使用注释原型。

# android - 图像不显示在 HTC 的愿望，但它适用于其他设备

> ID：13600334
> 
> 赞同：0
> 
> 时间：2012-11-28T07:54:54.173
> 
> 标签：android

我正在使用布局，它适用于模拟器和其他设备，但不适用于 HTC 图像，因为微调器和背景不显示。请帮我。谢谢

[我的问题与设备中未显示的 Android 背景图像](https://stackoverflow.com/questions/9338639/android-background-image-not-shown-in-device)完全一样？

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
android:orientation="vertical" >

<TextView
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:background="@color/header_bg"
    android:gravity="center"
    android:text="@string/title_activity"
    android:textColor="@color/white"
    android:textSize="25dp"
    android:textStyle="bold" />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_marginTop="1dp"
    android:background="@color/header_bg" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="18dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="21dp"
                    android:text="@string/duration"
                    android:textColor="@color/header_bg"
                    android:textSize="15dp"
                    android:textStyle="bold" />

                <Spinner
                    android:id="@+id/spinner_duration"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="15dp"
                    android:layout_toLeftOf="@+id/Ptxt_duration"
                    android:background="@drawable/spin_small"
                    android:entries="@array/array_duration" />

                <TextView
                    android:id="@+id/Ptxt_duration"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="26dp"
                    android:text="@string/minutes"
                    android:textColor="@color/minute_txt"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="18dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="21dp"
                    android:text="@string/endbell"
                    android:textColor="@color/header_bg"
                    android:textSize="15dp"
                    android:textStyle="bold" />

                <Spinner
                    android:id="@+id/spinner_dEndbell"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="8dp"
                    android:layout_toLeftOf="@+id/btn_duration_preview"
                    android:background="@drawable/spin_big"
                    android:entries="@array/array_endbell" />

                <Button
                    android:id="@+id/btn_duration_preview"
                    android:layout_width="wrap_content"
                    android:layout_height="25dp"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="16dp"
                    android:background="@drawable/btn_preview"
                    android:text="@string/preview"
                    android:textColor="@color/white"
                    android:textSize="15dp" />
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="18dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="21dp"
                    android:text="@string/preparationTime"
                    android:textColor="@color/header_bg"
                    android:textSize="15dp"
                    android:textStyle="bold" />

                <Spinner
                    android:id="@+id/spinner_preparation"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="15dp"
                    android:layout_toLeftOf="@+id/Ptxt_pre"
                    android:background="@drawable/spin_small"
                    android:entries="@array/array_pretime"
                    android:gravity="center" />

                <TextView
                    android:id="@+id/Ptxt_pre"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="26dp"
                    android:text="@string/minutes"
                    android:textColor="@color/minute_txt"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="18dp" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="21dp"
                    android:text="@string/endbell"
                    android:textColor="@color/header_bg"
                    android:textSize="15dp"
                    android:textStyle="bold" />

                <Spinner
                    android:id="@+id/spinner_pEndbell"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="8dp"
                    android:layout_toLeftOf="@+id/btn_pre_preview"
                    android:background="@drawable/spin_big"
                    android:entries="@array/array_endbell" />

                <Button
                    android:id="@+id/btn_pre_preview"
                    android:layout_width="wrap_content"
                    android:layout_height="25dp"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="16dp"
                    android:background="@drawable/btn_preview"
                    android:text="@string/preview"
                    android:textColor="@color/white"
                    android:textSize="15dp" />
            </RelativeLayout>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/layout_bg" >

                <CheckBox
                    android:id="@+id/check_interval"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:button="@drawable/selector_checkbox"
                    android:paddingLeft="21dp"
                    android:text="@string/setintervalbell"
                    android:textColor="@color/color_checkbox_txt"
                    android:textStyle="bold" />
            </LinearLayout>

            <RelativeLayout
                android:id="@+id/relative_bell"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="15dp" >

                <TextView
                    android:id="@+id/txt_playevery"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="21dp"
                    android:text="@string/playevery"
                    android:textColor="@color/header_bg"
                    android:textSize="15dp"
                    android:textStyle="bold" />

                <Spinner
                    android:id="@+id/spinner_intervalTime"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="13dp"
                    android:layout_toLeftOf="@+id/Ptxt_interval"
                    android:background="@drawable/spin_small"
                    android:entries="@array/array_belltime" />

                <TextView
                    android:id="@+id/Ptxt_interval"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="26dp"
                    android:text="@string/minutes"
                    android:textColor="@color/minute_txt"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/relative_time"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp" >

                <TextView
                    android:id="@+id/txt_intervalBell"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="21dp"
                    android:text="@string/intervalbell"
                    android:textColor="@color/header_bg"
                    android:textSize="15dp"
                    android:textStyle="bold" />

                <Spinner
                    android:id="@+id/spinner_intervalBell"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_marginLeft="2dp"
                    android:layout_marginRight="8dp"
                    android:layout_toLeftOf="@+id/btn_interval_preview"
                    android:layout_toRightOf="@+id/txt_intervalBell"
                    android:background="@drawable/spin_big"
                    android:entries="@array/array_endbell" />

                <Button
                    android:id="@+id/btn_interval_preview"
                    android:layout_width="wrap_content"
                    android:layout_height="25dp"
                    android:layout_alignParentRight="true"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="16dp"
                    android:background="@drawable/btn_preview"
                    android:text="@string/preview"
                    android:textColor="@color/white"
                    android:textSize="15dp" />
            </RelativeLayout>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/layout_bg" >

                <CheckBox
                    android:id="@+id/check_disturb"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:button="@drawable/selector_checkbox"
                    android:paddingLeft="20dp"
                    android:text="@string/donotdisturb"
                    android:textColor="@color/color_checkbox_txt"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/layout_bg" >

                <CheckBox
                    android:id="@+id/check_whitenoise"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="8dp"
                    android:button="@drawable/selector_checkbox"
                    android:paddingLeft="20dp"
                    android:text="@string/whitenoise"
                    android:textColor="@color/color_checkbox_txt"
                    android:textStyle="bold" />
            </LinearLayout>

            <Button
                android:id="@+id/save"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_marginBottom="8dp"
                android:layout_marginTop="34dp"
                android:background="@drawable/selector_btn_start"
                android:gravity="center"
                android:text="@string/save"
                android:textColor="@color/white"
                android:textStyle="bold" />
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:32:22.167

几天前我遇到了类似的问题，背景在 Nexus 上不可见，但在模拟器上可见。我使用的是高分辨率的图像。我把它缩小了，它起作用了。看看可能对你有帮助。

已编辑

有两种方法：

1.  打开 Adob​​e Photoshop（或任何其他类似工具）并打开图像按 ALT+CTRL+I 并定义新的图像大小。并替换您的图像。这是更简单的方法。注意：我将图像尺寸更改为 1280 x 800，这对我来说最初是 2000 x 1800 左右。

2.  首先从背景中删除图像。在您的代码中，您可以首先将图像作为位图并将其缩小（参见下面的链接），然后将图像添加到您的背景中。

请参阅[如何将图像（位图）调整为给定大小？](https://stackoverflow.com/questions/8471226/how-to-resize-image-bitmap-to-for-examle-800x480-in-code)

# web-applications - 将 .war 添加到 solr 4 webapps

> ID：13600342
> 
> 赞同：1
> 
> 时间：2012-11-28T07:55:29.637
> 
> 标签：web-applications, migrate, solr4

我是 Solr 的新手。我们之前使用的是 solr 3，并在 solr webapps 目录中添加了一个 customer service.war 文件。另外在 solr.war 中添加了一个 custom.jar 文件。它工作正常。

现在对于 solr 4：我已将所有新字段添加到 schema.xml 文件，使用自定义 .jar 更新了 solr.war 文件，并将 service.war 文件放在 webapps 目录中......其余部分保持不变。我能够运行 solr 服务，没有显示异常或错误。

但是当我的 Web 应用程序调用 solr 时，它应该运行我放在 webapps 中的 service.war 文件......它给出了错误：

响应 - POST http..localhost..8983/myapp/service 返回的响应状态为 404 Not Found

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:04:34.243

完成：我想通了。在 Solr 4 中，我们需要在 context 文件夹中为每个添加的 webapps.war 创建 .xml 文件......

例如：在上下文文件夹中有一个文件 solr.xml ：复制该文件并将其命名为与您已添加到 webapps 文件夹中的新 webapps.war 文件相同

编辑新的 .xml 文件；将上下文路径更改为：/您的 webapps 名称将 .war 文件名更改为您的 .war 文件，如果您希望 tomcat 将其提取到某个文件夹特定的位置。例如 solr 在 solr-webapps 中提取它。你可以在 yourwebapp-webapps 中提取它。

请记住，如果您使用相同的提取位置，那么 .war 文件服务之一将不会启动。

我希望我清楚....

# javascript - JS：寻找一种将世界中的点转换为屏幕中的点的快速方法

> ID：13600344
> 
> 赞同：0
> 
> 时间：2012-11-28T07:55:34.563
> 
> 标签：javascript, performance, html

我想将世界坐标中的点列表转换为屏幕中的点（像素）。基本上我想将世界中的一堆（worldX，worldY）坐标乘以屏幕矩阵。

问题是这个过程非常缓慢。

编码：

```
for (int i = 0; i < cnt; i++)
{
   worldX = getWorldX(i);
   worldY = getWorldY(i);

   screenX = wtsMat.vx1 * worldX + wtsMat.vy1 * worldY + wtsMat.tx;
   screenY = wtsMat.vx1 * worldX + wtsMat.vy2 * worldY + wtsMat.ty;

  ...
  //Do something with screenX and screenY
} 
```

我想知道是否有更好更快的方法来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:51:34.743

考虑到它的工作，我猜计算是正确的，它只是一个速度问题。

此外，由于您遗漏了部分代码，我认为如果您对 sceenX 和 screenY 不执行任何操作，它也会很慢，所以它全部在您发布的循环中。看到这是一个非常简单的计算，您的 cnt 必须非常高才能使其变慢。

您可以做一些事情来加快速度：

```
//store object vars locally for quicker access
var wtsMatVx1 = wtsMat.vx1; 
var wtsMatVy1 = wtsMat.vy1; 
var wtsMatVy2 = wtsMat.vy2; 
var wtsMatTx = wtsMat.tx; 
var wtsMatTy = wtsMat.ty; 

while (cnt--)
{
   //while-- is faster according to tests

   var worldX = getWorldX(i); //dont use a global scope, which is used if you dont use var
   var worldY = getWorldY(i); //dont use a global scope

   var screenX = wtsMatVx1 * worldX + wtsMatVy1 * worldY + wtsMatTx;
   var screenY = wtsMatVx1 * worldX + wtsMatVy2 * worldY + wtsMatTy;

  ...
  //Do something with screenX and screenY
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:40:24.760

wtsMat 变量在循环期间不会改变，那么为什么不将它们定义为变量而不是属性呢？

你的代码应该是这样的：

```
var worldX, worldY, screenX, screenY;
var wtsMatVx1 = wtsMat.vx1;
var wtsMatVy1 = wtsMat.vy1;
var wtsMatTx = wtsMat.tx;
var wtsMatVx2 = wtsMat.vx2;
var wtsMatVy2 = wtsMat.vy2;
var wtsMatTy = wtsMat.ty;
var i = cnt;
for (i; i > 0; i--)
{
    worldX = getWorldX(i);
    worldY = getWorldY(i);

    screenX = wtsMatVx1 * worldX + wtsMatVy1 * worldY + wtsMatTx;
    screenY = wtsMatVx1 * worldX + wtsMatVy2 * worldY + wtsMatTy;

    ...
    //Do something with screenX and screenY
} 
```

PS：为了计算`screenY`你使用`wtsMat.vx1`，不应该是这样`wtsMat.vx2`吗？

# shell - 为什么声明 shell 脚本变量时没有前面的 `$`？

> ID：13600345
> 
> 赞同：0
> 
> 时间：2012-11-28T07:55:36.347
> 
> 标签：shell

我注意到，在 shell 脚本中，当我们声明一个变量时，前面的美元符号是不需要的，虽然当我们以后想要访问这个变量时，我们应该在这个变量名的前面加上一个美元符号。

就像：

```
#!/bin/sh
VAR_1=Hello
VAR_2=Unix

echo "$VAR_1 $VAR_2" 
```

这与其他语言不同，就像`Perl`我们总是有变量名前面的美元符号，我只是想知道 shell 脚本这样做的任何充分理由，或者它只是一个约定......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T07:59:37.947

Shell 是与 Perl 不同的语言，是与 C++ 不同的语言，是与 Python 不同的语言。您可以为每种语言添加“具有不同规则”。

在 shell 中，标识符之类`VAR_1`的变量命名，美元符号用于调用扩展。`$var`替换为`var`' 内容；`${var:-foo}`如果设置了，则替换为`var`' 的内容，如果`foo`未设置变量，则替换为单词。扩展也适用于非变量，例如，如果包含具有完整路径和扩展名的文件名，您可以像`${${var##*/}%.*}`只留下文件基名一样进行链式扩展。`var`

在 Perl 中，变量前面的符号告诉 Perl 如何解释标识符：`$var`是标量、`@var`数组、`%var`散列等。

在 Ruby 中，变量前面的 sigil 告诉 Ruby 它的作用域：`var`是局部变量，`$var`是全局`@var`变量，是对象的实例变量，`@@var`是类变量。

在 C++ 中，我们在变量名前面没有符号。

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:59:26.237

在 shell 中，`$`符号不是变量名的一部分。它只是告诉shell 用同名变量的内容替换后面的单词，即`$foo`“在此处插入变量的内容`foo`”。

这在分配给变量时不使用，因为您明确不想插入旧内容；您想使用变量本身（在某些方面这类似于取消引用指针）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:00:18.160

它基本上是一个语法约定。

DOS/.bat 文件语法的工作方式相同。

1）创建一个变量，没有元字符。

2）要“取消引用”变量的内容，请使用元字符。

```
DOS:
set VAR=123
echo %VAR% 
```

# javascript - JQuery：播放通知声音：IE8错误

> ID：13600351
> 
> 赞同：2
> 
> 时间：2012-11-28T07:55:51.320
> 
> 标签：javascript

这段代码非常适合 crome 和 firefox .. 但在 IE8 中出错

```
if($('#soundcheck').is(':checked')){
                    //alert('checked');
                    var audio = document.createElement('audio');
                    document.body.appendChild(audio);
                    audio.src = system_base_url+'/sound/horn.wav';
                    audio.play();

                  } 
```

IE8 说：对象不支持这个属性或方法，它指向：

```
audio.play(); 
```

有人对IE8有类似经验吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:59:15.853

该`<audio>`标记是 HTML5 并且仅在较新的浏览器中受支持，例如 Internet Explorer 9、Firefox、Opera、Chrome 和 Safari。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:55:46.800

IE 8 及更早版本不支持 Audio 标签，您需要使用一些 hack。希望它可以提供帮助。

```
<audio id='audio' controls>
      <source src="audioes/song.ogg" type="audio/ogg" />
      <source src="audioes/song.mp3" type="audio/mp3" />
      <div>Your browser doesn't support HTML5 audio</div>
      <%--Fall back on the WMP plugin--%>
      <object id='mediaPlayer' type="audio/mpeg" width="200" height="40"><param name="src" value="audioes/song.mp3" /></object>
</audio>

<script type="text/javascript">
function play () {
    var audio = document.getElementByID('audio');
    var mediaPlayer = document.getElementByID('mediaPlayer');
    //HTML5 Audio is Supported
    if(audio['play']) 
    {
    audio.play();
    }
    //HTML5 Audio is NOT Supported
    else
    {
    mediaPlayer.object.play();
    }
}
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:00:16.897

有同样的问题！尝试：

```
 <a href="javascript: void(0);" onclick="playSound('sound.mp3');">...</a>

<script language="javascript" type="text/javascript">
  function playSound(soundfile) {
  document.getElementById("dummy").innerHTML=
  "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
  }
</script> 
```

# java - 从队列中接收消息数

> ID：13600357
> 
> 赞同：0
> 
> 时间：2012-11-28T07:56:06.013
> 
> 标签：java, activemq, message-queue

我正在接收来自 Active MQ 队列的消息。

有没有办法一次接收多条消息？还是必须通过循环来完成？

此外，如果我想说 30 条消息运行一个过程，并且只有当该过程有效时，才会 `message.acknowledge();`为所有消息返回一个。

我的意思是如果程序失败，我不想从队列中删除这 30 个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:18:39.253

您必须循环执行。通常，最好使用消息驱动的 bean 来消费消息，但它不适合这种情况，因为它们逐条接收消息并且您无法指定确切的数量。因此，使用`MessageConsumer`和手动交易：

```
@Resource
UserTransaction utx;

@Resource(mappedName="jms/yourConnectionFactory");
ConnectionFactory cf;

@Resource(mappedName="jms/yourQueue");
Queue queue;

..    
Connection conn = null;
Session s = null;
MessageConsumer mc = null;
try {
    utx.begin();
    conn = cf.createConnection();
    s = conn.createSession(true, Session.CLIENT_ACKNOWLEDGE); //TRANSACTIONAL SESSION!
    mc = s.createConsumer(queue);
    conn.start(); // START CONNECTION'S DELIVERY OF INCOMING MESSAGES
    for(int i=0; i<30; i++)
    {
          Message msg = mc.receive();
          //BUSINESS LOGIC
    }
    utx.commit();
} catch(Exception ex) {
  ..
} finally { //CLOSE CONNECTION, SESSION AND MESSAGE CONSUMER
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:40:33.420

I don't have any experience in ActiveMQ. But I think in case of queue listeners, basic logic should be the same independent to the queue implementation.

For your first question I don't know any way of retrieving multiple messages from a queue. I think best way would be to fetch it one by one inside a loop.

For your second question, message will not be discarded from the queue till the underlying transaction which read the message commits. So you could read whole bunch of messages in a single transaction and roll it back in case of an error. It shouldn't erase any existing messages from the queue.

May I ask why do you need 30 messages to run a procedure. Usually when we use a queue, each message should be able to process independently.

# android - Android：Button 单击以显示 datepicker，然后 datepicker 中的日期。Button 在 ArrayAdapter 的每个列表视图项中

> ID：13600359
> 
> 赞同：1
> 
> 时间：2012-11-28T07:56:14.623
> 
> 标签：android, android-arrayadapter, android-datepicker

我在 listview 中有一个按钮，它是从 arrayadpater 类填充的。我已经设法通过使用 showdialog 来单击按钮以显示日期选择器。但是现在我希望日期选择器中的日期显示在同一个按钮上。问题是该 datesetlistener 在活动文件中，我如何使用它在 arrayadapter 类中的按钮上显示日期。？请帮忙！！

LessonDetailsActivity.java

```
private Button pPickDate;
private int pYear;
private int pMonth;
private int pDay;
/**
 * This integer will uniquely define the dialog to be used for displaying
 * date picker.
 */
static final int DATE_DIALOG_ID = 0;

/**
 * Callback received when the user "picks" a date in the dialog private
 * DatePickerDialog.OnDateSetListener pDateSetListener = new
 * DatePickerDialog.OnDateSetListener() {
 * 
 * public void onDateSet(DatePicker view, int year, int monthOfYear, int
 * dayOfMonth) { pYear = year; pMonth = monthOfYear; pDay = dayOfMonth;
 * updateDisplay(); //displayToast(); } };
 */

DatePickerDialog.OnDateSetListener dateListener = new DatePickerDialog.OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker view, int yr, int monthOfYear,
            int dayOfMonth) {
        // TODO Auto-generated method stub
        pYear = yr;
        pMonth = monthOfYear;
        pDay = dayOfMonth;
        Log.d("Date",
                String.valueOf(new StringBuilder()
                        // Month is 0 based so add 1
                        .append(pMonth + 1).append("/").append(pDay)
                        .append("/").append(pYear).append(" ")));

    }

};

/** Updates the date in the TextView */
private void updateDisplay() {
    pPickDate.setText(new StringBuilder()
            // Month is 0 based so add 1
            .append(pMonth + 1).append("/").append(pDay).append("/")
            .append(pYear).append(" "));
}

// public static final String[] lessonTitles = new String[] {
// "Intro to fine wood working", "Your Workplace tools and materials" };

// public static final String[] lessonIds = { "5", "6" };

// public static final int[] progressValues = { 100, 100 };

// public static final String[] lessonGrades = { "80", "78"};

// public static final String[] lessonRetakeGrades = { "0", "0" };

// public static final String[] planExamDates = new String[] {
// "00/00/0000","00/00/0000" };

// public static final String[] actualExamDates = new String[] {
// "00/00/0000","00/00/0000" };

// public static final String[] retakePlanExamDates = new String[] {
// "00/00/0000","00/00/0000" };

// public static final String[] retakeActualExamDates = new String[] {
// "00/00/0000","00/00/0000" };

ListView listView;
List<LessonRowItem> rowItems;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_lesson_listview);

    savedInstanceState = this.getIntent().getExtras();
    TextView textViewCourseTitle = (TextView) findViewById(R.id.label_course_title);
    textViewCourseTitle.setText((String) savedInstanceState
            .get("course_title"));

    String courseId = (String) savedInstanceState.get("course_id");
    DataBaseHandler db = new DataBaseHandler(this);
    List<Lesson> lessonList = db.getLessonDetails(courseId);
    int size = lessonList.size();

    final String[] lessonTitles = new String[size];
    final String[] lessonIds = new String[size];
    final int[] progressValues = new int[size];
    final String[] lessonGrades = new String[size];
    final String[] lessonRetakeGrades = new String[size];
    final String[] planExamDates = new String[size];
    final String[] actualExamDates = new String[size];
    final String[] retakePlanExamDates = new String[size];
    final String[] retakeActualExamDates = new String[size];

    int j = 0;
    for (Lesson lesson : lessonList) {

        lessonTitles[j] = lesson.getLessonTitle();
        lessonIds[j] = lesson.getLessonId();

        if ("0".equals(lesson.getCompleted())) {
            progressValues[j] = 0;
        } else {
            progressValues[j] = 100;
        }

        lessonGrades[j] = lesson.getGrade();
        lessonRetakeGrades[j] = lesson.getRetakeGrade();
        planExamDates[j] = lesson.getPlanExamDate();
        actualExamDates[j] = lesson.getActualExamDate();
        retakePlanExamDates[j] = lesson.getRetakePlanExamDate();
        retakeActualExamDates[j] = lesson.getRetakeActualExamDate();
        j++;

    }

    rowItems = new ArrayList<LessonRowItem>();

    for (int i = 0; i < lessonGrades.length; i++) {
        LessonRowItem item = new LessonRowItem(lessonTitles[i],
                lessonIds[i], progressValues[i], lessonGrades[i],
                lessonRetakeGrades[i], planExamDates[i],
                actualExamDates[i], retakePlanExamDates[i],
                retakeActualExamDates[i]);
        rowItems.add(item);

    }

    listView = (ListView) findViewById(R.id.my_lesson_list);
    LessonListViewAdapter adapter = new LessonListViewAdapter(this,
            R.layout.my_lesson_list_item, rowItems);
    listView.setAdapter(adapter);

    pPickDate = (Button) findViewById(R.id.label_lesson_plan_exam_date_value);
    // pPickDate.setOnClickListener((OnClickListener) this);
    /**
     * Listener for click event of the button
     * pPickDate.setOnClickListener(new View.OnClickListener() { public void
     * onClick(View v) { showDialog(DATE_DIALOG_ID); } });
     */

    /** Get the current date */
    final Calendar cal = Calendar.getInstance();
    pYear = cal.get(Calendar.YEAR);
    pMonth = cal.get(Calendar.MONTH);
    pDay = cal.get(Calendar.DAY_OF_MONTH);

    /** Display the current date in the TextView */
    updateDisplay();
}

/**
 * Create a new dialog for date picker
 * 
 * @Override protected Dialog onCreateDialog(int id) { switch (id) { case
 *           DATE_DIALOG_ID: return new DatePickerDialog(this,
 *           pDateSetListener, pYear, pMonth, pDay); } return null; }
 */

protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:

        return new DatePickerDialog(LessonDetailsActivity.this,
                dateListener, pYear, pMonth, pDay);

    }
    return null;

}
} 
```

LessonListArrayAdapter.java

```
 public class LessonListViewAdapter extends ArrayAdapter<LessonRowItem> {

Context context;
static final int DATE_DIALOG_ID = 0;

public LessonListViewAdapter(Context context, int resourceId,
        List<LessonRowItem> items) {
    super(context, resourceId, items);
    this.context = context;

}

public long getItemId(int position) {
    return position;
}

@Override
public int getPosition(LessonRowItem item) {
    // TODO Auto-generated method stub
    return super.getPosition(item);
}

public static int getDateDialogId() {
    return DATE_DIALOG_ID;
}

/* private view holder class */
private class ViewHolder {
    TextView textviewLessonTitle;
    TextView textviewLessonId;
    ProgressBar progressBarLessonLevel;
    TextView textviewLessonGrade;
    TextView textviewLessonRetakeGrade;
    TextView textviewPlanExamDate;
    TextView textviewActualExamDate;
    TextView textviewRetakePlanExamDate;
    TextView textviewRetakeActualExamDate;

}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = new ViewHolder();
    LessonRowItem rowItem = getItem(position);

    LayoutInflater mInflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.my_lesson_list_item, null);

        holder.textviewLessonTitle = (TextView) convertView
                .findViewById(R.id.label_lesson_title);
        holder.textviewLessonId = (TextView) convertView
                .findViewById(R.id.label_lesson_id_value);
        holder.progressBarLessonLevel = (ProgressBar) convertView
                .findViewById(R.id.progressbar_lesson_level);
        holder.textviewLessonGrade = (TextView) convertView
                .findViewById(R.id.label_lesson_grade_value);
        holder.textviewLessonRetakeGrade = (TextView) convertView
                .findViewById(R.id.label_lesson_retake_grade_value);
        holder.textviewPlanExamDate = (TextView) convertView
                .findViewById(R.id.label_lesson_plan_exam_date_value);
        holder.textviewActualExamDate = (TextView) convertView
                .findViewById(R.id.label_lesson_actual_exam_date_value);
        holder.textviewRetakePlanExamDate = (TextView) convertView
                .findViewById(R.id.label_lesson_retake_plan_exam_date_value);
        holder.textviewRetakeActualExamDate = (TextView) convertView
                .findViewById(R.id.label_lesson_retake_actual_exam_date_value);

        convertView.setTag(holder);
    } else

        holder = (ViewHolder) convertView.getTag();

    holder.textviewLessonTitle.setText(rowItem.getLessonTitle());
    holder.textviewLessonId.setText(rowItem.getLessonId());
    holder.progressBarLessonLevel.setProgress(rowItem.getLessonProgress());
    holder.textviewLessonGrade.setText(rowItem.getLessonGrade());
    holder.textviewLessonRetakeGrade
            .setText(rowItem.getRetakeLessonGrade());
    holder.textviewPlanExamDate.setText(rowItem.getPlanExamDate());
    holder.textviewActualExamDate.setText(rowItem.getActualExamDate());
    holder.textviewRetakePlanExamDate.setText(rowItem
            .getRetakePlanExamDate());
    holder.textviewRetakeActualExamDate.setText(rowItem
            .getRetakeActualExamDate());

    holder.textviewPlanExamDate
            .setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    Log.d("Date Picker", "Shown");
                    ((Activity) LessonListViewAdapter.this.context)
                            .showDialog(DATE_DIALOG_ID);

                }
            });

    holder.textviewPlanExamDate.setText(String.valueOf(new StringBuilder()
            // Month is 0 based so add 1
            .append("77").append("/").append("77").append("/").append("77")
            .append(" ")));

    /*
     * holder.textviewCousreTitle.setText(rowItem.getCourseTitle());
     * holder.progressBarModuleLevel
     * .setProgress((rowItem.getTotalCompleteLesson() * 100) /
     * rowItem.getTotalLesson());
     * holder.textviewModuleStatus.setText(rowItem.getTotalCompleteLesson()
     * + "/" + rowItem.getTotalLesson() + " lessons");
     * holder.textviewModuleAverage.setText(rowItem.getModuleAverage() +
     * ""); holder.textviewStartDate.setText(rowItem.getStartDate());
     * holder.textviewEndDate.setText(rowItem.getEndDate());
     */

    return convertView;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:41:21.197

您已经在使用自定义数组适配器，因此不需要做太多其他事情。您需要做的是在您的适配器中设置一个方法来存储您要在其中使用的日期字符串。然后你就可以在监听器中执行你的操作了。例如：

在你的听众中：

```
DatePickerDialog.OnDateSetListener dateListener = new DatePickerDialog.OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker view, int yr, int monthOfYear,
            int dayOfMonth) {

        ...

        String dateSet = String.valueOf(monthOfYear + 1) + "/"
                + String.valueOf(dayOfMonth) + "/"
                + String.valueOf(yr) + " ";

        adapter.setDateSet(dateSet);
    }
}; 
```

然后在您的适配器中：

```
public class LessonListViewAdapter extends ArrayAdapter<LessonRowItem> {

    Context context;
    static final int DATE_DIALOG_ID = 0;
    String dateSet;

    public void setDateSet(String dateSet) {
        this.dateSet = dateSet;
    }

        ... 
```

现在您有机会在您想到的数组适配器中的按钮上设置字符串，注意字符串为空时的情况。有关此类内容的更多信息，请查看此[链接](http://mattgemmell.com/2008/12/08/what-have-you-tried/)

**编辑：**

```
private Button pPickDate;
private int pYear;
private int pMonth;
private int pDay;
private LessonListViewAdapter adapter; // <-- add this 
```

改变这个：

```
LessonListViewAdapter adapter = new LessonListViewAdapter(this,
                R.layout.my_lesson_list_item, rowItems); 
```

到：

```
 adapter = new LessonListViewAdapter(this,
            R.layout.my_lesson_list_item, rowItems); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T13:28:26.123

可以直接调用datepicker

```
new DatePickerDialog(context, pickerListener, year, month,
                                day).show();

private DatePickerDialog.OnDateSetListener pickerListener = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        @Override
        public void onDateSet(DatePicker view, int selectedYear,
                              int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;    
            Log.d("@DatePickerDialog","Time:"+year);    
            date_dialog.setText(day + "-" + (month + 1) + "-" + year);    
        }    
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-10T12:12:08.480

可以帮助某人，我在 Recyclerview Adapterclass 中使用了这个

```
 Calendar mcurrentTime = Calendar.getInstance();
        int hour = mcurrentTime.get(Calendar.HOUR_OF_DAY);
        int minute = mcurrentTime.get(Calendar.MINUTE);

        TimePickerDialog mTimePicker;
        mTimePicker = new TimePickerDialog(CurrentActivity.this, new TimePickerDialog.OnTimeSetListener() {
            @Override
            public void onTimeSet(TimePicker timePicker, int selectedHour, int selectedMinute) {
                textview.setText( selectedHour + ":" + selectedMinute);//your view here
            }
        }, hour, minute, true);
        mTimePicker.setTitle("Select Time");
        mTimePicker.show(); 
```

我用这个如下

```
holder.othrs.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            /*DialogFragment newFragment = new TimePickerFragment();
            newFragment.show(((Dashboard2)context).getSupportFragmentManager(), "timePicker");*/

           // Calendar mcurrentTime = Calendar.getInstance();
            //int hour = mcurrentTime.get(Calendar.HOUR_OF_DAY);
            //int minute = mcurrentTime.get(Calendar.MINUTE);

            TimePickerDialog mTimePicker;
            mTimePicker = new TimePickerDialog(context, new TimePickerDialog.OnTimeSetListener() {
                @Override
                public void onTimeSet(TimePicker timePicker, int selectedHour, int selectedMinute) {
                    holder.time.setVisibility(View.VISIBLE);
                    holder.time.setText( selectedHour + ":" + selectedMinute);
                }
            }, 0, 0, true);
            mTimePicker.setTitle("Over Time in (Hrs:Mins)");
            mTimePicker.show();
        }

    }); 
```

# jquery - 使用jquery从html表中收集数据

> ID：13600367
> 
> 赞同：0
> 
> 时间：2012-11-28T07:56:49.783
> 
> 标签：jquery, html, html-table, collect

我需要从 HTML 表中收集数据并将其发送到服务器。我必须使用 JQuery。有我的桌子

```
 <table id="table" border=1>
    <thead> <tr>
    <th>First</th>
    <th>Last</th>
    <th>Date of birth</th>
    <th>City</th>
    </tr></thead>
    <tbody>
    <tr>
    <td>TEXT1</td>
    <td>TEXT2</td>
    <td>TEXT3</td>
    <td>TEXT4</td>
    </tr>
    <tr>
    <td>TEXT5</td>
    <td>TEXT6</td>
    <td>TEXT7</td>
    <td>TEXT8</td>
     </tr>
    <tr>
    <td>TEXT9</td>
    <td>TEXT10</td>
    <td>TEXT11</td>
    <td>TEXT12</td>
   </tr>
   </tbody>
   </table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:34:27.963

您可以通过这种方式实现它，

首先，我们从表格单元格中选择所有数据，然后通过 jquery ajax 将其发送到服务器端

***jQuery代码：***

```
<script  type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript">
$(function(){
    var dataArr = [];
    $("td").each(function(){
        dataArr.push($(this).html());
    });
    $('#sendServer').click(function(){
        $.ajax({
              type : "POST",
              url : 'server.php',
              data : "content="+dataArr,
              success: function(data) {
                  alert(data);// alert the data from the server
              },
              error : function() {
              }
        });
    });
});
</script> 
```

***html代码：***

```
<table id="table" border=1>
    <thead> <tr>
    <th>First</th>
    <th>Last</th>
    <th>Date of birth</th>
    <th>City</th>
    </tr></thead>
    <tbody>
    <tr>
    <td>TEXT1</td>
    <td>TEXT2</td>
    <td>TEXT3</td>
    <td>TEXT4</td>
    </tr>
    <tr>
    <td>TEXT5</td>
    <td>TEXT6</td>
    <td>TEXT7</td>
    <td>TEXT8</td>
     </tr>
    <tr>
    <td>TEXT9</td>
    <td>TEXT10</td>
    <td>TEXT11</td>
    <td>TEXT12</td>
   </tr>
   </tbody>
   </table>

<input id="sendServer" name="sendServer" type="button" value="Send to Server" /> 
```

在您的服务器端***PHP 代码***中（这里我发回已发布到服务器的内容，仅用于示例）

```
<?php 
echo $_REQUEST['content'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:00:14.340

[在 jQuery 中将 HTML 表数据转换为 JSON 对象的](https://stackoverflow.com/questions/2240005/convert-a-html-table-data-into-a-json-object-in-jquery)可能重复项

但解决方案是

```
var tbl = $('table#whatever tr').map(function() {
  return $(this).find('td').map(function() {
    return $(this).html();
  }).get();
}).get(); 
```

然后只需使用 $.json （或您想要的任何库）将其转换为 JSON 字符串。

# android-intent - JellyBean Newcastle ANDROID 4.1.1 设备解锁后的屏幕尺寸问题

> ID：13600372
> 
> 赞同：2
> 
> 时间：2012-11-28T07:56:55.863
> 
> 标签：android-intent, android-4.2-jelly-bean, screen-size

我观察到，当设备锁定时活动发生变化时，活动的底部会在解锁设备时被切断。

例如，将设备的睡眠时间设置为 15 秒，并编写代码在手机空闲时间 20 秒后更改活动。现在，如果我让手机闲置 21 秒并解锁手机，改变的活动就会被切断。我观察到软菜单显示在吃掉我活动底部的活动上。我已经放置了日志并分析了解锁后我的窗口高度为 1845，而在正常情况下为 1701。

我用来获取窗口大小的代码是::

```
int initialWidth = getWindowManager().getDefaultDisplay().getWidth();
int initialHeight = getWindowManager().getDefaultDisplay().getHeight();
DisplayMetrics displayMetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
int statusBarHeight = getDefaultStatusBarHeight(displayMetrics.densityDpi);
Rect screenSize= new Rect();
screenSize.right = initialWidth;
screenSize.bottom = initialHeight - statusBarHeight; //screenSize is what we are using           //to display screen.

//code we are using to get status bar heigth.
private int getDefaultStatusBarHeight(int densityDpi) {
    int statusBarHeight = 0;
    switch (densityDpi) {
    case 120:
        statusBarHeight = 19;
        break;

    case 160:
        statusBarHeight = 25;
        break;

    case 240:
        statusBarHeight = 38;
        break;

    default:
        statusBarHeight = Math.round((float) densityDpi * 25 / 160);
    }
    return statusBarHeight;
} 
```

我在 Newcastle ANDROID 4.1.1 中遇到了这个问题，它有像 ICS 设备这样的软菜单栏。

有人遇到过同样的问题吗？如果是，那么解决方案是什么？

# python - Python if_py 和 VIM：exec('import re') 不起作用

> ID：13600378
> 
> 赞同：0
> 
> 时间：2012-11-28T07:57:11.960
> 
> 标签：python, vim

我有一个自动完成脚本，我想修改它以完成类名、属性、方法等。在 python 中，当我这样做时：`re.co<TAB>`它应该给我一个匹配方法的列表。问题是，我不想解析`re.py`文件。我宁愿：

```
import re 
```

然后`dir(re)`获取方法列表。但是怎么做？？？我试过：

```
imp_obj = exec('import re') 
```

它拒绝工作`if_py`！`2 + 2`虽然有效..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:01:07.927

最好的方法是使用内置`__import__`函数来导入模块，如下所示：

```
imp_obj = __import__('re') 
```

您的代码可能不起作用，因为`import`它没有返回一个值，而`exec('import re')`.

一般来说，`exec`在用户输入的文本上使用是个坏主意，因为它更有可能执行您不想执行的任意代码。

# curl - curl命令行和推特

> ID：13600383
> 
> 赞同：0
> 
> 时间：2012-11-28T07:57:21.903
> 
> 标签：curl, twitter

我正在使用命令行调用 twitter 搜索，并且除了第一页之外的搜索之外，它运行良好。

```
curl --silent --include -k https://mobile.twitter.com/search?q=michael 
```

工作正常，我在解析后找到“加载旧”结果链接，并提出

```
curl --silent --include -k https://mobile.twitter.com/search?max_id=273642014212501504&q=michael 
```

调用这个，只返回注册页面，没有搜索结果——

但是，如果我将带有 max_id 的 url 粘贴到浏览器中，结果会正确显示。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T11:36:53.773

Twitter 有一个[搜索 API](https://dev.twitter.com/docs/api/1/get/search)。你应该使用它。

```
curl -si http://search.twitter.com/search.json?q=michael 
```

和

```
curl -si http://search.twitter.com/search.json?q=michael&max_id=273642014212501504 
```

两者都可以正常工作并返回易于解析的 json，应该可以满足您的需求。

如果您更喜欢[atom](http://en.wikipedia.org/wiki/Atom_%28standard%29)中的结果，请替换`search.json`为。`search.atom`

# html - 从mysql数据库登录验证servlet

> ID：13600388
> 
> 赞同：0
> 
> 时间：2012-11-28T07:57:47.870
> 
> 标签：html, servlets, jdbc

我试图创建一个简单的登录表单，它采用用户名和密码，检查 mysql 数据库表。对不起，我是这个 java 东西的初学者......如果它匹配它重定向到主页。但我不能执行它。有人可以帮我解决这个问题。感谢您的快速回复。我得到的 tomcat 错误是请求的资源 (/UserDemo/firstserv) 不可用。我知道其中还有更多错误。那就是我在这里发帖……帮帮我……

SerExam.java

```
 package myPack;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.*;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public class SerExam extends HttpServlet
{
      Connection con;
      PreparedStatement ps;
      ResultSet rs;
      public void init(ServletConfig config)throws ServletException
      {
            try
               {
                        Class.forName("oracle.jdbc.driver.OracleDriver");
                        con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","tiger");
               }
                  catch (ClassNotFoundException e)
                     {
                        System.out.println(e);
                     }
                  catch (SQLException e)
                     {
                        System.out.println(e);
                     }
      }
      protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
      {
            doPost(request, response);
            {
                response.setContentType("text/html");
                PrintWriter pw=response.getWriter();
                String username=request.getParameter("username");
                String password=request.getParameter("password");
                pw.println("<html><body>");
                try
                {
                      ps=con.prepareStatement("select * from loginvalidation where username=? and password=?");
                      ps.setString(1, username);
                      ps.setString(2, password);
                      rs=ps.executeQuery();
                      if(rs.next())
                      {
                            pw.println("<h3>welcome " +" " + username +"</h3>");
                            RequestDispatcher rd1=request.getRequestDispatcher("./home.html");
                            rd1.include(request,response);
                            //or
                            //response.sendRedirect("./home.html");
                            pw.println("<form method=\"post\" action=\"Login.html\">");
                            pw.println("<input type=\"submit\" name=\"logout\" " + "value=\"Logout\">");
                            pw.println("</form>");

                      }
                      else
                      {
                            pw.println("<center><h3>invalid username/password Enter Correct username/password</h3></center>");
                            RequestDispatcher rd2=request.getRequestDispatcher("./Login.html");
                            rd2.include(request,response);
                            //or
                            //response.sendRedirect("./Login.html");
                      }
                }
                catch (SQLException e)

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{
    }
    } 
```

登录.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Login page</title>
</head>
<body>
<center>
<form action="./firstserv" method="post">
username &nbsp;&nbsp;&nbsp;
<input type="text" name="username" />
<br>
<br>
password &nbsp;&nbsp;&nbsp;
<input type="password" name="password"></input><br><br>
&nbsp;&nbsp;&nbsp;
<input type="submit" value="login"></input>
&nbsp;&nbsp;&nbsp;
<a href="./reg.html">new user</a>
</form>
</center>
</body>
</html> 
```

reg.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Registration Form</title>
</head>
<body>
registration page under construction...............

</body>
</html> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>UserDemo</display-name>
    <servlet>
        <description>
        </description>
        <display-name>SerExam</display-name>
        <servlet-name>SerExam</servlet-name>
        <servlet-class>
        myPack.SerExam</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>SerExam</servlet-name>
        <url-pattern>/home.html</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:01:59.757

您的 servlet 映射到`/home.html`：

```
<servlet-mapping>
    <servlet-name>SerExam</servlet-name>
    <url-pattern>/home.html</url-pattern>
</servlet-mapping> 
```

当您访问时`firstserv`：

```
<form action="./firstserv" method="post"> 
```

* * *

边注：

**永远不要**在数据库中以纯文本形式存储密码：

```
ps=con.prepareStatement("select * from loginvalidation where username=? and password=?");
ps.setString(1, username);
ps.setString(2, password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:02:10.360

将您的 servlet 映射标记更改为

```
<servlet-mapping>
    <servlet-name>SerExam</servlet-name>
    <url-pattern>/MyServlet</url-pattern>
</servlet-mapping> 
```

然后您可以将`MyServlet`其用作表单的操作参数，以便`SerExam`根据上述 servlet 映射将带有表单参数的请求发送给您的 servlet。

```
<form action="MyServlet" method="post"> 
```

并且当您`POST`在表单中使用方法时，您的 servlets`doPost`方法将被调用，我可以从您的代码中看到您没有在`doPost`方法中编写任何代码。

删除它（这是您方法`doPost(request,response);`中的第一行。`doGet`

因此，将您的 servlet 代码更改为：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
       //your existing code inside doGet with that doPost call removed   
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{

     doGet(request,response);
} 
```

在您的代码正常运行之前，您仍然需要完成许多事情。

因此，我希望您查看我们的[Servlet wiki](https://stackoverflow.com/tags/servlets/info)，以便您获得基本的了解。

# db2 - 从 db2 中的左外连接返回不同的列

> ID：13600398
> 
> 赞同：0
> 
> 时间：2012-11-28T07:58:33.027
> 
> 标签：db2

```
SELECT
    nzy.NZPYYD
    ,nzy.NZZSYG
    ,nzy.NZJRYG
        ,acn.ANITCD

FROM
    ACNTRA acn

        LEFT OUTER JOIN NZYTFL nzy
            ON (
                nzy.NZCNO1 = acn.ANCNO1
                AND nzy.NZCNO2 = acn.ANCNO2
                AND nzy.NZCNO3 = acn.ANCNO3
                AND nzy.NZCNO4 = acn.ANCNO4
                AND nzy.NZCNO5 = acn.ANCNO5
                AND nzy.NZSLKI = acn.ANSLKI
                AND nzy.NZDLTM = ''
            )

                                WHERE
                                    acn.ANDLTM = ''
                                    AND acn.ANTKCD = '1029'
                                    AND nzy.NZTXKB = 1 
```

这里的问题是它给出了 2 行结果。我想从左外连接的结果中得到一个唯一的行。有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:01:27.387

If both rows are identical, try

```
SELECT DISTINCT
    nzy.NZPYYD
    ,nzy.NZZSYG
    ,nzy.NZJRYG
        ,acn.ANITCD 
```

If not, you can try to `SUM()`, `CONCAT()`, `MAX()` or whatever the column with different values.

Difficult to be more precise without a sample output.

# objective-c - 在 Objective C 中声明和初始化字符串变量的最佳方法

> ID：13600403
> 
> 赞同：3
> 
> 时间：2012-11-28T07:59:06.237
> 
> 标签：objective-c

我是 Objective C 的新手。我们可以通过其中之一创建字符串对象。任何人都可以分辨出哪种方法是最好的，最简单的方法吗？

```
NSString *simpleString = @"This is a simple string";
NSString *anotherString = [NSString stringWithString:@"This is another simple string"];
NSString *oneMorestring = [[NSString alloc] initWithString:@"One more!"];
NSMutableString *mutableOne = [NSMutableString stringWithString:@"Mutable String"];
NSMutableString *anotherMutableOne =[[NSMutableString alloc] initWithString:@"A retained one"];
NSMutableString *thirdMutableOne =[NSMutableString stringWithString:simpleString]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:04:56.090

这真的取决于你想做什么。

对于简单地从常量创建字符串，您的第一个示例是最好的。

`stringWithString`几乎只是创建一个字符串的副本，所以我不怎么使用它。

您可能想签出`stringWithFormat`和`stringByAppendingString`。这是我最常使用的两个。

如果启用 ARC，则无需担心保留字符串。Alloc/init 或类工厂方法在 ARC 下本质上是等效的，因此请使用您最喜欢的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:09:50.297

如果字符串是常量，第一种方法是创建字符串实例的最简单和最好的方法。第一种方法也更受欢迎，因为它遵循现代 Objectice-C 语言。

NSString 和 NSMutableString 之间的主要区别在于 NSString 对象是常量。我们不能改变或更新它的价值。但是 NSMutableString 具有更改或更新其值的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:08:27.233

没有什么是最好的方法......这取决于我们的要求。然而大多数时候我们选择手动分配和初始化版本的 NSString 或 NSMutableString。

前 3 个是常量字符串，接下来的三个是您可以操作的字符串。

第 1 行：只是一个 const 字符串。

第 2 行：您正在将一个 const 字符串复制到另一个字符串。

第 3 行：您正在手动分配和初始化它。由您或 ARC（编译器）来发布它。

与其余可变版本类似。

# ios - Xcode：多个应用程序目标的一个测试目标

> ID：13600408
> 
> 赞同：38
> 
> 时间：2012-11-28T07:59:20.823
> 
> 标签：ios, xcode, unit-testing, ocunit

我想知道您是否可以将一个单元测试包链接到多个目标。因此，可以使用一个测试包测试所有应用程序目标。

我在所有应用程序目标之间有一些共享代码，但也有一些基于正在运行的应用程序目标的特定计算。

目前，如果我想测试不同的应用程序目标，我必须将 Build Settings 中的 Bundle Loader 选项设置为使用的应用程序目标的 .app 文件。

我对你们所有人的问题是：是否**可以在不为每个应用程序目标创建多个测试包目标且不总是更改 Bundle Loader 选项的情况下完成此操作？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-11-15T16:01:32.637

你需要：

*   选择您要测试的目标
*   转到`Test navigation`选项卡
*   右键单击要启用的测试目标
*   点击`Enable [name_of_your_target]`

[![在此处输入图像描述](../Images/28b188734ec204aef02addd8df3353fd.png)](https://i.stack.imgur.com/tVeK8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-14T12:49:51.687

不，在这一点上你不能。就像扩展一样，您必须为每个项目的目标创建一个新的。

它不是很有用，但如果代码与另一个目标不同，测试可能会因为缺少代码而不是代码失败而失败。
这就是为什么它是不允许的。

对不起，否定的答案。

# sql - 从 XML 列中提取某些值

> ID：13600410
> 
> 赞同：1
> 
> 时间：2012-11-28T07:59:25.823
> 
> 标签：sql, sql-server

我有以下 sql 查询：

```
 select         
I.N.value('@DRN', 'varchar(50)') as DRN,
I.N.value('@CR_GUID', 'varchar(50)') AS CR,
I.N.value('@DR_GUID', 'varchar(50)') AS DR,
I.N.value('@AMOUNT', 'money') as Amount,
I.N.value('@DATE', 'Date') as ProDate
from Table as T
cross apply T.column.nodes('/ITEMS/ITEM') as I(N) 
```

目前它将带回所有内容，例如：

```
DRN    CR         DR        Amount        Prodate
12     2p1rf      684pb     4686.23       2012-11-14
12     586io      fdc25     4686.23       2012-11-16
13     hnv7p      19i6f     1800.00       2012-11-20
14     cd7k0      9s2vc      570.50       2012-11-20
15     pm78s      qw3d5     8500.00       2012-11-23 
```

我如何从结果中排除以下内容，这是来自 xml 列中的同一行？

```
 DRN    CR         DR        Amount        Prodate
*12*     2p1rf      684pb     4686.23       2012-11-14
*12*     586io      fdc25     4686.23       2012-11-16 
```

我只希望查询带回 xml 列中的一项而不是多个值的行。

谢谢你

然后我如何才能只带回具有多个项目的行中的第一个项目：

```
 DRN    CR         DR        Amount        Prodate
*12*     2p1rf      684pb     4686.23       2012-11-14
*12*     586io      fdc25     4686.23       2012-11-16 
```

所以我只想查看日期为 2012-11-14 的项目，而不是与该行有关的所有内容？我希望这是有道理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:03:54.970

You should be able to do an inline aggregate and filter on that

```
SELECT
    X.DRN, X.CR, X.DR, X.Amount, X.ProDate
FROM
    (
    SELECT
        COUNT(*) OVER (PARTITION BY I.N.value('@DRN', 'varchar(50)')) AS CountPerDRN,
        I.N.value('@DRN', 'varchar(50)') as DRN,
        I.N.value('@CR_GUID', 'varchar(50)') AS CR,
        I.N.value('@DR_GUID', 'varchar(50)') AS DR,
        I.N.value('@AMOUNT', 'money') as Amount,
        I.N.value('@DATE', 'Date') as ProDate
    from
        MyTable as T
        cross apply
        T.Mycolumn.nodes('/ITEMS/ITEM') as I(N)
    ) X
WHERE
   X.CountPerDRN= 1 
```

Edit, after question addition

Simply change the inline aggregate to a window function
In this case, I've chosen the row based on the lowest `ProDate`

```
SELECT
    X.DRN, X.CR, X.DR, X.Amount, X.ProDate
FROM
    (
    SELECT
        ROW_NUMBER() OVER (
                  PARTITION BY I.N.value('@DRN', 'varchar(50)')
                  ORDER BY I.N.value('@DATE', 'Date')
                  ) AS rnPerDRN,
        I.N.value('@DRN', 'varchar(50)') as DRN,
        I.N.value('@CR_GUID', 'varchar(50)') AS CR,
        I.N.value('@DR_GUID', 'varchar(50)') AS DR,
        I.N.value('@AMOUNT', 'money') as Amount,
        I.N.value('@DATE', 'Date') as ProDate
    from
        MyTable as T
        cross apply
        T.Mycolumn.nodes('/ITEMS/ITEM') as I(N)
    ) X
WHERE
   X.rnPerDRN = 1 
```

# r - 捕获 stat_smooth 数据或参数

> ID：13600413
> 
> 赞同：2
> 
> 时间：2012-11-28T07:59:29.950
> 
> 标签：r, ggplot2, smooth, gam, loess

我正在绘图，`ggplot2`我想知道是否有一种方法可以捕获由它生成的点，`stat_smooth`或者至少知道它使用了哪些参数。

```
 ggplot(data=ICLR, aes(x=  AÑO_MES, y=  ICLRr, size=PatMensualFondo ))  + 
    xlab("Patrimonio Medio") + ylab("% Cobertura Media") + 
    stat_smooth( mapping = aes (group = 1)) +
    geom_point() 
```

超过 1000 分我得到这个：`" geom_smooth: method="auto" and size of largest group is >=1000, so using gam with formula: y ~ s(x, bs = "cs"). Use 'method = x' to change the smoothing method. "`我知道它用过`gam method`，但还有什么？

如果我不能像这个线程中所说的那样捕获数据点：

[可以在 ggplot stat_smooth 调用后提取模型拟合参数吗？](https://stackoverflow.com/questions/2666805/can-one-extract-model-fit-parameters-after-a-ggplot-stat-smooth-call)

我怎样才能复制 stat_smooth 所做的事情？

# javascript - 显示和隐藏 RadioButton - Javascript

> ID：13600418
> 
> 赞同：0
> 
> 时间：2012-11-28T07:59:44.510
> 
> 标签：javascript, radio-button, arcgis, if-statement

我在 HTML 中将这段代码用于 RadioButton：

```
<fieldset>
  <div class="someclass">
  <span>Tekeningen: </span>
    <label for="ValSR2">UIT:</label>
  <input dojoType="dijit.form.RadioButton" id="valSR2" name="group3" checked="checked" value="Show" onchange='Tekeningen(this);' value="Show" type="radio" />
    <label for="ValSlope2">AAN:</label>
 <input dojoType="dijit.form.RadioButton" id="valSlope2" name="group3" value="Hide" onchange='Tekeningen(this);' type="radio"/>
 </div>
</fieldset> 
```

这作为函数：

```
function Tekeningen(evt){
        dojo.connect(map, "onLoad", mapLoadHandler);
        var tekeningen = new esri.layers.ArcGISDynamicMapServiceLayer("https://gis.strukton.com/ArcGIS/rest/services/Tekeningen_Data/MapServer", { id: "Tekeningen", "visible":true});

                if(evt.value === "Hide"){
                    alert("removelayer");

//var tek = map.getLayer("Tekeningen");
            //      tek.hide();
            map.removeLayer(tekeningen);

                }
          else if(evt.value === "Show"){        
                            //  map.removeLayer(tekeningen);        
                                        alert("addlayer");

                                        map.addLayer(tekeningen);

          }
      } 
```

但是当我打开它时，我会收到两个警报，当我关闭它时也会收到警报。有谁知道我做错了什么？

**编辑**

我正在搜索我在 value="hide" 部分做错了什么以及为什么函数看不到该值.."

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:13:46.043

我在 jsFiddle 中尝试了一个简化的函数，它适合我：

[http://jsfiddle.net/UFDDR/](http://jsfiddle.net/UFDDR/)

```
function Tekeningen(evt){
    if(evt.value === "Hide"){
        alert("removelayer");
    }
    else if(evt.value === "Show"){        
        alert("addlayer");
    }
} 
```

# java - 在java中生成一个范围内的随机数（正数和负数）

> ID：13600421
> 
> 赞同：0
> 
> 时间：2012-11-28T07:59:55.510
> 
> 标签：java, random

> **可能重复：**
> [使用 Java 在一个范围内生成随机数](https://stackoverflow.com/questions/363681/generating-random-number-in-a-range-with-java)

我正在尝试创建一种方法来生成两个数字之间的随机数，但我希望它适用于以下任何范围（包括）：

```
1 to 10
-5 to -10
-10 to 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:08:22.740

给你看一些代码，它只是演示这个想法：

```
int myRand(int min, int max) {
    int r = rand();
    int range = max - min + 1;
    return r % range + min;
} 
```

# php - php从数组值中获取文件扩展名

> ID：13600424
> 
> 赞同：0
> 
> 时间：2012-11-28T08:00:00.177
> 
> 标签：php

我是新的php，它的学习过程。

我有一个 html 上传表单。我正在尝试重命名上传的文件。所以以下是获取文件扩展名的 php 代码，然后我添加了一个 php uniqid(); 重命名它。

**获取文件扩展代码：**

```
$img = $_FILES['images']['name'];

function getExtension($str)
{
     $i = strrpos($str,".");
     if (!$i) { return ""; } 

     $l = strlen($str) - $i;
     $ext = substr($str,$i+1,$l);
     return $ext;
}

$extension =  getExtension($img);
$id = uniqid();
$newimg = $id.'.'.$extension; 
```

好吧，这对我来说只适用于一个上传文件，**但是**如果我有多个上传表单，那么我如何使用此功能获得多个文件扩展名？

**要获取以下多个文件是我的 php 代码：**

```
$uploaded_files = array();
$upload_directory = dirname(__file__) . '/uploaded/'; //set upload directory    

for ($i = 0; $i < count($_FILES['images']['name']); $i++)
            {
                $number_of_file_fields++;

                if ($_FILES['images']['name'][$i] != '')
                { //check if file field empty or not
                    $number_of_uploaded_files++;

$uploaded_files[] = $_FILES['images']['name'][$i];

if (move_uploaded_file($_FILES['images']['tmp_name'][$i], $upload_directory .   $_FILES['images']['name'][$i]))
                    {
                        $number_of_moved_files++;
                    }

                }

            } 
```

**HTML 表单**

```
<table width="1020" border="0" cellspacing="7" cellpadding="0">   
<tr>
 <td valign="top" width="250">
     Upload your property picture
 </td>
 <td>
    <div id="file_container">
        <input name="images[]" type="file" class="tr2"  />
        <br />
    </div>
 <a href="javascript:void(0);" onClick="add_file_field();">Add another</a>
 <input type="submit" value="Save & Continue" name="Submit" class="submit" />
 </td>  
</tr> 
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:08:56.863

```
function changeFilename($str)
{
     $pathinfo = pathinfo($str);
     return uniqid() . "." . $pathinfo['extension'];
}
$oldarray = array("hello.txt","ytuwe.php");
$newarray = array_map("changeFilename", $oldarray);
var_dump($newarray); 
```

这是一个演示：http: [//ideone.com/gPi61D](http://ideone.com/gPi61D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:13:41.963

为什么不使用 PHP 中的[pathinfo](http://php.net/manual/en/function.pathinfo.php)函数来获取文件扩展名？

```
$extension = pathinfo($img, PATHINFO_EXTENSION);
$id = uniqid();
$newimg = $id.'.'.$extension; 
```

# r - 查找重复项

> ID：13600426
> 
> 赞同：-1
> 
> 时间：2012-11-28T08:00:03.430
> 
> 标签：r, duplicates

我有这种格式的 ID 数据和它出现的次数。我想编写一个返回 ID 出现两次以上的函数。

```
 ID    Freq
  100    1
  101    1
  102    1
  103    1
  104    1
  105    2
  106    1
  107    1
  108    1 
```

这是我的代码

```
if (data$Freq>=2){
  return(data$ID)
} else {
  print("no duplicates of years")
} 
```

收到以下分析器和警告

```
[1] "no duplicates of years"
Warning message:
In if (x$Freq > 1) { :
  the condition has length > 1 and only the first element will be used 
```

我做错了什么？

**编辑：**

谢谢大家的回复。我想我创建频率表的方式有问题

```
x=as.data.frame(table(data$cid)) 
```

`cid`在哪里`ID`。当我尝试查看第一列中的元素时，即

```
> x$var1[1:20,] 
```

我得到NULL，而这

```
>x$Freq[1:20,] 
```

会回来

```
Error in x$Freq[1:20, ] : incorrect number of dimensions' 
```

但`x[1:20,]`返回一个数据框，显示`x`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:12:53.617

有一个命令`duplicated()`可以在不参考您的 $Freq 列的情况下执行此操作：

```
data$ID[duplicated(data$ID)] 
```

你自己的代码不能像错误提示的那样工作，因为`if()`需要一个 TRUE/FALSE 条件，它只会查看 data$Freq 的第一个元素，它是 1 然后停止。

如果你想做这样的事情 then `which()`or a 就是你想要的：

```
df= data.frame(freq=rep(1:2,5), id=1:10)

 df

   freq id
1     1  1
2     2  2
3     1  3
4     2  4
5     1  5
6     2  6
7     1  7
8     2  8
9     1  9
10    2 10

df$id[which(df$freq>1)]
[1]  2  4  6  8 10 
```

甚至

```
df$id[df$freq>1]
[1]  2  4  6  8 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:12:31.107

正如@Andrie 建议的那样，`ifelse`可能有用：

根据您的其他信息，这是一个可重现的示例：

```
set.seed(1)

data <- as.data.frame(table(data.frame(cid = sample(100:120, 30, replace=TRUE))))

> ifelse(data$Freq-1, as.character(data$Var1), "no duplicates of years")
#  [1] "no duplicates of years" "no duplicates of years" "no duplicates of years"
#  [4] "no duplicates of years" "104"                    "105"                   
#  [7] "107"                    "108"                    "no duplicates of years"
# [10] "no duplicates of years" "113"                    "no duplicates of years"
# [13] "no duplicates of years" "116"                    "118"                   
# [16] "119"                    "no duplicates of years" 
```

并且只显示频率 > 1 的 ID：

```
data$Var1[as.logical(data$Freq - 1)]
# [1] 104 105 107 108 113 116 118 119
# 17 Levels: 100 101 102 103 104 105 107 108 110 112 113 114 115 116 118 ... 120 
```

# javascript - 如何循环遍历特定标签内的每个标签？

> ID：13600430
> 
> 赞同：3
> 
> 时间：2012-11-28T08:00:08.953
> 
> 标签：javascript, html

我正在创建一个函数，它有一个贯穿特定 div 中每个标签的 for 循环。例如，这里是 div：

```
<div>
 <input id="inputid"></input>
 <a id="aid"></a>
 <div id="divid"></div>
</div> 
```

javascript中是否有一个“for each tag in x”函数可以让我循环遍历它？请记住，我不能在 jquery 中执行此操作，并且每个标记都可能不同，如上所示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T08:05:17.840

如果您想要包含在 div 中的所有元素（包括子项的子项等）并且您只想要元素（而不是其他类型的节点）并且您希望它在所有浏览器中工作，那么您可以`getElementsByTagName("*")`像这样使用：

```
var allTags = document.getElementById('container').getElementsByTagName("*");
for (var i = 0, len = allTags.length; i < len; i++) {
    // allTags[i] is an element within the container object
    // allTags[i].id is the id of the element (if there is one)
} 
```

`document.getElementById('container')`只是获取容器元素的一些方法 - 您可以使用任何适合获取包含父元素的方法。

`getElementsByTagName("*")`可以采用如图所示的通配符，因此它返回节点中包含的所有元素，并且可以在任何元素上调用它以仅从包含该元素的元素中检索元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:02:49.597

试试这个：

```
var div = getElementById('containerDivId');
for (var i = 0; i < div.childNodes.length; i++)
{
    console.log(div.childNodes[i]);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T08:08:50.013

我你想遍历所有孩子的所有标签（不仅仅是第一级孩子）

```
jQuery(element).find('*').each( function (index,value) { 
        $.each(value.attributes, function(i, attrib){
        var name = attrib.name,
           value = attrib.value;
         // do whatever you wann do 
         console.log({ attributeName : name, attributeValue: value});
      });
}); 
```

# php - 如何查看脸书公开信息

> ID：13600431
> 
> 赞同：0
> 
> 时间：2012-11-28T08:00:10.387
> 
> 标签：php, facebook

我想在facebook查看用户的公开信息，如果我没有登录，我只能看到用户的收藏夹、音乐、其他、其他名称相似的人等。但是如果我登录了，我可以看到用户的信息，例如工作和教育，家庭，联系方式等。

有没有办法让我在不登录 facebook 的情况下查看用户的公开信息？我想这样做是因为我需要使用 PHP 获取配置文件的页面源（包含联系信息等信息），然后将源放入文本文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:44:43.903

您可以通过任何 SDK（如[PHP SDK](https://github.com/facebook/facebook-php-sdk) ）获取使用 Graph API 或 FQL 的任何用户的公开可用数据。[您可以检索的公共数据是在用户文档](http://developers.facebook.com/docs/reference/api/user/)的权限字段中不需要访问令牌或应用程序访问令牌的公共数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:30:56.897

如果您有用户 ID，您可以在浏览器中点击[http://graph.facebook.com/ {user_id}](http://graph.facebook.com/)

# c# - 如何在asp.net中gridview的一个单元格中从数据库中获取2个数据？

> ID：13600442
> 
> 赞同：1
> 
> 时间：2012-11-28T08:01:11.333
> 
> 标签：c#, asp.net, data-binding, gridview

我想在gridview的一个单元格中显示我的sql server数据库中的2个数据，我试过这个：

```
<asp:GridView ID="engpodataGV1" runat="server" AutoGenerateColumns="False" Width="910px"
                            DataKeyNames="PONumber" OnSelectedIndexChanged="engpodataGV1_SelectionChanged">
<Columns>
 <asp:TemplateField HeaderText="Complition Time">
     <ItemTemplate>
      <asp:Label ID="Label8" runat="server" ForeColor="Black" Font-Bold="false" Text='<%# Eval("CompletionTime") + Eval("CompletionTimeFormat") %>'></asp:Label>
       </ItemTemplate>
       <ControlStyle Width="100px" />
       <ItemStyle BorderStyle="Solid" BorderWidth="1px" />
      </asp:TemplateField>
 </Columns>
</asp:GridView> 
```

我的问题是：这是正确的方法吗？现在我已经对其进行了测试，但我在`+`做什么时遇到错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:16:45.530

您实际上并不需要标签，项目模板接受任何标记。特别是，它甚至可以是：

```
 <ItemTemplate>
       <%# Eval("CompletionTime") %>&nbsp;<%# Eval("CompletionTimeFormat") %>
   </ItemTemplate> 
```

# java - 使用 ant 构建项目时包含 .properties 文件

> ID：13600443
> 
> 赞同：7
> 
> 时间：2012-11-28T08:01:15.153
> 
> 标签：java, ant, build

如何在使用 Ant 编译项目的源代码时包含 .properties、.xml 和其他资源文件？这是我的构建文件：

```
<?xml version="1.0"?>
<project name="NmzAzzist" basedir="." default="main">
    <property name="src.dir" value="Source/Myproj" />
    <property name="build.dir" value="ReleaseBuild/classes" />
    <property name="jar.dir" value="ReleaseBuild" />

    <path id="master-classpath">
        <fileset dir="lib">
            <include name="*.jar" />
        </fileset>
    </path>

    <target name="clean" description="Clean output directories">
        <delete dir="${build.dir}" />
    </target>

    <target name="build" description="Compile source tree java files">
        <echo>Compiling the source code</echo>
        <mkdir dir="${build.dir}" />
        <javac destdir="${build.dir}" source="1.5" target="1.5" includeantruntime="false">
            <compilerarg value="-Xlint:unchecked" />
            <src path="${src.dir}" />
            <classpath refid="master-classpath" />

        </javac>
    </target>

    <target name="jar" depends="build">
        <mkdir dir="${jar.dir}" />
        <echo>building jar!</echo>

        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${build.dir}">
            <manifest>
                <attribute name="Main-Class" value="com.ushustech.nmsazzist.NMSAzzistApp" />
            </manifest>
        </jar>
    </target>

    <target name="run" depends="jar">
        <java jar="${jar.dir}/${ant.project.name}.jar" fork="true" />
    </target>

    <target name="main" depends="clean,run" />

</project> 
```

现在我的构建只是编译 Java 文件和生成类。但是我在各种文件夹（包括源文件夹）中有一些属性和 XML 文件，我想将它们包含在输出目录中，但现在没有放置在那里。我感谢完成这项任务的任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T08:12:04.350

`jar`在运行任务之前复制这些资源文件。

```
<copy todir="${build.dir}">
    <fileset dir="${src.dir}">
       <exclude name="**/*.java"/>
    </fileset>
</copy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-15T17:14:06.067

这可以解决问题：

```
<target name="dist" depends="compile">
    <echo>packaging classes</echo>
    <jar jarfile="${dist.dir}/${project.distname}.jar" basedir="${build.dir}">
      <fileset dir="${src}">
        <include name="*.properties" />
      </fileset>
    </jar>
 </target> 
```

# algorithm - Matrix Chain Multiplication + Dynamic Programming + Recurrance Relation

> ID：13600448
> 
> 赞同：0
> 
> 时间：2012-11-28T08:01:37.573
> 
> 标签：algorithm, dynamic-programming

I am going over my review worksheet and was looking for some help with finding the recurrence relation for chained matrix multiplication using dynamic programming.

The problem verbatim: Consider the optimal parenthesization problem for the chained matrix product `M0M1…Mn - 1` with associated dimension sequence `(d0, d1, … ,dn)`. Derive the recurrence relation on which the dynamic programming solution for this problem is based, i.e., a recurrence relation for the minimum number mij of multiplications over all parenthesizations of the chained product `MiM1…Mj` . Don’t forget the initial condition.

I understand the formula for `M[i,j]` `(M[i,j] = M[i,k] + M[k+1,j] + pqr)`. This definitely has recursion. But how to I determine the recurrence relation? Is this not the recurrence relation already? Also what is mean by "associated dimension space"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:43:59.493

请参阅第 6.5 节（链矩阵乘法）[请参阅http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf](http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf)

这里的关联维度是指每个矩阵的维度，即 M0 的维度为 d0，M1 的维度为 d1，M2 的维度为 d2 .... 等等。

# javascript - Can I join Maqetta and Aptana together? Is it Useful?

> ID：13600450
> 
> 赞同：3
> 
> 时间：2012-11-28T08:01:45.430
> 
> 标签：javascript, web, aptana, maqetta

I'm a newbie in Javascript Programming. (But I should be an expert. =_+') (and newbie in English Language also. ^^;)

Nowadays, I got the assignment that I should make the company standard framework for web programmers.

From my search results, I think... Maqetta is suitable for UI Design Draft, and... Aptana is suitable for JavaScript Programming. (It's just my thought.)

and I'm considering jQuery+jQueryUI+a... as Library Bases.

So, I'll set the standard IDE like this form : Eclipse + Maqetta Plugin + Aptana Plugin + jQuery(+a) Libraries.. for my Web Programmers. and Rough steps for programming are 1\. UI Designing using Maqetta... 2\. Script Coding using Aptana...

Though I'm a beginner for JavaScript but I have the duty on my Web Programmers, I wanna ask for comments about this set-up. Is it possible? Is it Not-Bad? Is it Useful?

Thank you in advance...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:44:06.190

Jon Ferraiolo 对 maqetta-users 的回答：

> 我能想到一起使用 Maqetta 和 Aptana 的最好方法是下载 Maqetta 以在本地运行 (http://maqetta.org/downloads/) 并在本地运行它，这将导致 Maqetta 保存 HTML/CSS/JS它在您的本地文件系统上创建的文件。然后您可以使用 Aptana 打开任何这些文件进行源代码编辑。
> 
> ZIP 文件包含一个带有说明的 README 文件。
> 
> 当您在本地将 Maqetta 安装到*installfolder*中，并第一次从浏览器运行 Maqetta 时，它将创建一个安装文件夹 / *maqetta* /users/。您应该看到一个文件夹“a/”。这就是 Maqetta 保存您创建的文件的地方。您应该能够在 Aptana 中打开这些文件进行源代码编辑。请注意，如果您创建多个项目（通过新建项目命令），每个新项目将获得自己的文件夹（例如，“b/”、“c/”等）。不幸的是，没有简单的方法来判断这些文件夹中的哪个映射到哪个项目（目视检查除外）。

# php - 如何使用带有 php 变量传递的 php 代码调用 javascript 函数

> ID：13600451
> 
> 赞同：1
> 
> 时间：2012-11-28T08:01:47.493
> 
> 标签：php, javascript

这是我的 php 代码：

```
<?php
  $typeid = 65;
  $subledgerid = 'subledger'.$typeid;
  $loadledger = 'loadledgers';
   ?>
   <script type="text/javascript">view_subledger('<?php echo $subledgerid;?>',<?php echo $typeid;?>,'<?php echo $loadledger;?>');</script> 
```

这不是调用`view_subledger()`.

但是当我调用这样的东西时，它会正常工作：

```
<script type="text/javascript">view_subledger('subledger65',65,'loadledgers');</script> 
```

我怎么称呼这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:09:40.247

这是最安全的方法：

```
<?php

$typeid = 65;
$subledgerid = 'subledger'.$typeid;
$loadledger = 'loadledgers';

?>

<script type="text/javascript">
view_subledger.apply(window, <?php print json_encode(array(
  $typeid,
  $subledgerid,
  $loadledger
)); ?>);
</script> 
```

生成以下代码：

```
<script type="text/javascript">
view_subledger.apply(window, [65,"subledger65","loadledgers"]);
</script> 
```

json_encode() 将确保变量被正确转义，并且使用 .apply() 方法可以将参数数组传递给 JS 函数。

另一个建议的版本：

```
<?php
$typeid = 65;
$subledgerid = 'subledger'.$typeid;
$loadledger = 'loadledgers';
$param_str = implode(', ', array_map('json_encode', array(
  $typeid,
  $subledgerid,
  $loadledger
)));
?>

<script type="text/javascript">
view_subledger(<?php print $param_str; ?>);
</script> 
```

生成以下内容：

```
<script type="text/javascript">
view_subledger(65, "subledger65", "loadledgers");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:08:05.830

为什么是`<?php } ?>`在剧本之后？应该是这样的：

```
<?php
$typeid = 65;
$subledgerid = 'subledger'.$typeid;
$loadledger = 'loadledgers';
?>
<script type="text/javascript">view_subledger('<?php echo $subledgerid;?>',<?php echo $typeid;?>,'<?php echo $loadledger;?>');</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:08:58.450

这是您在文件中的所有代码吗？所有这一切看起来都不错，并且必须在 $subledgerid、$typeid、$loadledger 正确的情况下工作。但是这条线呢？

```
 <?php } ?> 
```

它必须使脚本崩溃

# security - Security Vulnerability: Web Server Uses Plain-Text Form Based Authentication

> ID：13600454
> 
> 赞同：5
> 
> 时间：2012-11-28T08:02:01.547
> 
> 标签：security

I have a server on which apache tomcat 6.0.16 is installed and there are no web applications running.

But I have a axis2.war which is hosting few web services. Now after performing a Qualsys Security vulnerability check it gave me the following result:

Service name: Web server Vulnerability description: Web Server Uses Plain-Text Form Based Authentication Severity (scale of 1-5, 5 is highest): 3

I have searched for this error and what I gather is that this error happens for websites which requests web pages from a web server and the form of authentication used is plain text based. But my doubt is we do not have any web apps on the server running so which authentication it is asking for? Or if it is related to axis2.war?

Any suggestions would be of great help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:40:46.273

基本上是说您正在通过未加密的端口（例如端口 80）传输数据。禁用端口 80 并在端口 443 上启用，应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-24T18:25:55.303

这意味着 Web 服务器允许通过端口 HTTP/80（基于纯文本形式的身份验证）的 POST 请求。

即使您的网站将您重定向到 HTTPS，也没有关系，因为有人可以将请求强制发送到 HTTP。

例如，如果网站配置错误，允许纯文本 POST 请求，某人可以将网站保存在本地并提交未加密的表单。或者攻击者可以创建一个虚假网站（克隆它，使其看起来相同）并通过 HTTP/80 将登录表单重定向到原始网站，这样用户就不会注意到。然后，他可能能够通过嗅探网络流量来获取其他用户的登录凭据。

以下是常规重定向响应的示例：

```
% curl -I http://example.com/
HTTP/1.1 301 Moved Permanently 
```

这是 POST 请求的示例：

```
% curl -X POST -I http://example.com/ 
```

或者：

```
curl -d'foo=bar' http://example.com/login 
```

如果您的网站以`HTTP/1.1 200 OK`或类似的方式响应，则建议在端口 80 上禁止除 GET 和 HEAD 之外的所有请求。

# java - using LIKE and OR in the where clause of select statement result to this ' Too few parameters. Expected 1.'

> ID：13600460
> 
> 赞同：1
> 
> 时间：2012-11-28T08:02:18.290
> 
> 标签：java, ms-access, jdbc, sql-like

When I query in my database microsoft access, with this code..

```
dc.rs = dc.st.executeQuery("select count(*) from Accounts where username like '%"+searchTF.getText()+"%' OR firstname like '%"+searchTF.getText()+"%'"); 
```

I got this result, not sure if this is error because it is written in black text.

```
[Microsoft][ODBC Microsoft Access Driver] Too few parameters. Expected 1. 
```

I want to search by username or by firstname that's why i put an OR there.

Do anyone know where I got some problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:20:19.457

Microsoft Access 使用 * 作为通配符

MS Access 还根据此页面使用单引号

[http://refactoringself.com/2011/06/22/ms-access-error-too-few-parameters-expected-x/](http://refactoringself.com/2011/06/22/ms-access-error-too-few-parameters-expected-x/)

使用准备好的语句

```
String queryString = "select count(*) from Accounts where username like ? OR firstname like ?";
PreparedStatement  stmt= con.prepareStatement(queryString );
stmt.setString(1, "*" + searchTF.getText() + "*");
stmt.setString(2, "*" + searchTF.getText() + "*");
stmt.executeQuery(); 
```

或不太安全的方式

```
dc.rs = dc.st.executeQuery("select count(*) from Accounts where username like " + 
    "\'*" + searchTF.getText() + "\'* OR firstname like \'*" + searchTF.getText() + "*\'"); 
```

# c# - GUID/RAW stored in oracle match almost, except for last 4 characters

> ID：13600462
> 
> 赞同：6
> 
> 时间：2012-11-28T08:02:23.037
> 
> 标签：c#, .net, oracle, guid

We have noticed some strange behavior in our production data concerning the GUIDs we are storing from a .Net DataSet into an Oracle RAW column.

We have the following set up:

*   **Table A** has a RAW column **Id**
*   **Table B** has an RAW column **ResponsibleObjectId**

The ResponsibleObjectId column is filled with the ID of table A when it is created in function of Table A (not always the case, so there is no FK on the column).

This happens in our .Net server layer. The two tables are in 2 separate DataSets. These 2 datasets are then saved to an oracle DB (11g).

Most of the times this works, but in a few cases (like 1/10.000.000 rows) the resulting guids are not entirely the same:

```
ResponsibleObjectId                 ID
665B8FFDE5A04163A96D96A25702665B    665B8FFDE5A04163A96D96A257023065
325C8AB000434503B8D2F980B33B325C    325C8AB000434503B8D2F980B33B4B58
AF831B5207E04D2ABE0E3ADAC802AF83    AF831B5207E04D2ABE0E3ADAC8023FA1
88DD5AF244DC4EA08075DB53CA1988DD    88DD5AF244DC4EA08075DB53CA19072E
75A5E5111DEE4021BA6EB016178775A5    75A5E5111DEE4021BA6EB01617876E66 
```

They match, expect for the last 4 characters.

We save the GUIDs using a stored procedure as follows:

**.Net DAL**

```
OracleCommand cmdSpInsert = (OracleCommand)database.GetStoredProcCommand("PKG_TableB.InsertTableB");
database.AddInParameter(cmdSpInsert, "PAR_ResponsibleObjectId", DbType.StringFixedLength, 36, "ResponsibleObjectId", DataRowVersion.Current); 
```

**Oracle SP**

```
PROCEDURE InsertTableB
(
    ...
    PAR_ResponsibleObjectId IN CHAR,
    ...
)
IS BEGIN
    INSERT INTO StockMov
           (
                ...
                HEXTORAW(REPLACE(UPPER(PAR_ResponsibleObjectId), '-','')),
                ...
           );
END InsertTableB; 
```

We have no idea what is causing this strange behavior. We've seen it happen in one similar case on 2 different columns in our Table A as well, so it does not seem related specifically to table B.

If any extra information is needed, please ask and I'll update the question.

Any help is greatly appreciated in solving our mystery! :)

**Edit** As asked in the comments, the assignment of the ResponsibleObjectId column very simple, like this:

```
dataSetB.ResponsibleObjectId = dataSetA.Id 
```

Also the two datasets are saved in the same transaction.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:43:08.243

byte[] idGuid = Guid.NewGuid().ToByteArray();

数据集A.Id = idGuid；

dataSetB.ResponsibleObjectId = idGuid;

/* 不要做 dataSetB.ResponsibleObjectId = dataSetA.Id

不要进行任何数据类型转换 - 保持二进制/原始 */

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:40:23.967

我们有一些非常强烈的迹象表明这些问题的发生是因为他们的数据库设置不符合我们的要求。oracle 数据库没有在专用机器上运行，并且没有足够的内存。

在很多情况下，这些事件可能与其 RAC 上的问题相匹配。

我们现在将尝试说服客户升级他们的数据库服务器。

# algorithm - 搜索引擎停用词 - 最佳实践

> ID：13600467
> 
> 赞同：4
> 
> 时间：2012-11-28T08:03:10.747
> 
> 标签：algorithm, search-engine, elasticsearch, information-retrieval, stop-words

在为搜索引擎分析文档时，通常不索引所谓的*停用词。*停用词是语言中经常出现的常用词，例如`a`、`the`和。`this`这个想法是，如果停用词被编入索引，它们会在索引中占用太多空间，并且对搜索结果的质量几乎没有影响。

我想知道是否总是这样。

在现代搜索引擎中，索引停用词是否会使索引大小爆炸？还是只是微幅增长。

此外，删除停用词如何影响短语搜索？搜索“披头士”和“披头士”似乎是两件截然不同的事情。

我正在使用 elasticsearch 构建应用程序，但这个问题同样适用于 Solr、直接 lucene 或任何其他变体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:08:49.170

1.  停用词的主要问题不是索引大小，而是答案的质量。它们往往占主导地位（具有非常高的[tf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)值，因此可能使返回的结果错误），而不是索引的大小。
    在任何情况下，索引停用词都不会显着增加索引的大小（而且它肯定不会“爆炸”）

2.  克服它的一种方法是在索引[n-grams](http://en.wikipedia.org/wiki/N-gram)时使用停用词（而不是完全省略它们） 。我不知道它是否真的完成了，但它绝对可以帮助改善返回的结果。

另外：停用词并不*总是** 省略。例如，在讽刺检测器中 - 似乎（根据经验）停用词对答案非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:11:09.450

我认为所有搜索引擎都以不同的方式处理这个问题。您可以在以下网址阅读这些内容：[http ://searchenginewatch.com](http://searchenginewatch.com)

但是，如果您只是一个正在构建（小）应用程序的人，我认为您不应该关注这些小细节，而忽略这些词并专注于更相关的词。

# sql - 使用 Oracle 数据库中的 SQL 从 XML Clob 中提取数据

> ID：13600480
> 
> 赞同：19
> 
> 时间：2012-11-28T08:04:07.403
> 
> 标签：sql, xml, oracle, parsing, clob

我想使用 sql 从表 TRAPTABCLOB 中提取 Decision 的值，该表具有列 testclob，XML 存储为 clob。

示例 XML 如下。

```
 <?xml version="1.0" encoding="UTF-8"?>
<DCResponse>
    <Status>Success</Status>
    <Authentication>
        <Status>Success</Status>
    </Authentication>
    <ResponseInfo>
        <ApplicationId>5701200</ApplicationId>
        <SolutionSetInstanceId>
                        63a5c214-b5b5-4c45-9f1e-b839a0409c24
                    </SolutionSetInstanceId>
        <CurrentQueue />
    </ResponseInfo>
    <ContextData>
        <!--Decision Details Start-->
        <Field key="SoftDecision">A</Field>
        <Field key="**Decision**">1</Field>
        <Field key="NodeNo">402</Field>
        <Field key="NodeDescription" />
        <!--Decision Details End-->
        <!--Error Details Start-->
        <Field key="ErrorResponse">
            <Response>
                <Status>[STATUS]</Status>
                <ErrorCode>[ERRORCODE]</ErrorCode>
                <ErrorDescription>[ERRORDESCRIPTION]</ErrorDescription>
                <Segment>[SEGMENT]</Segment>
            </Response>
        </Field>
        <Field key="ErrorCode">0</Field>
        <Field key="ErrorDescription" />
    </ContextData>
</DCResponse> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-28T09:22:42.340

尝试

```
SELECT EXTRACTVALUE(xmltype(testclob), '/DCResponse/ContextData/Field[@key="Decision"]') 
FROM traptabclob; 
```

[这](http://www.sqlfiddle.com/#!4/cc513/4)是一个 sqlfiddle 演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:10:43.000

这应该工作

```
SELECT EXTRACTVALUE(column_name, '/DCResponse/ContextData/Decision') FROM traptabclob; 
```

我假设**只是为了突出显示？

# sql - Select after update in a stored procedure

> ID：13600481
> 
> 赞同：3
> 
> 时间：2012-11-28T08:04:16.143
> 
> 标签：sql, locking, sql-update, firebird, procedure

I am trying to write procedure without using directly lock statements.

```
SET TERM ^ ;
ALTER PROCEDURE PROC_GETSTATUS (
    IDTBL1 Integer )
RETURNS (
    STATUS Varchar(255) )
AS
declare variable t int;

BEGIN

   t=gen_id(RPUSING,1);
   update  TBL1 a set a.STATUS=cast('USINGBY' as varchar(255))||cast(:t as varchar(255)) where a.STATUS='free' and a.ID=:IDTBL1 order by a.LASTUPDATED rows 1 to 1;

   STATUS=cast('USINGBY' as varchar(255))||cast(:t as varchar(255));
   SUSPEND;
   END^
SET TERM ; ^

GRANT EXECUTE
 ON PROCEDURE PROC_GETSTATUS TO  SYSDBA; 
```

When I'm selecting data from this by query like:

```
select * from TBL1 a where a.STATUS in (select b.STATUS from PROC_GETSTATUS(1)); 
```

It returns null. But this select

```
select * from TBL1 a where a.STATUS like '%USINGBY%' 
```

in current transaction returns updated data. How to rewrite this query by one select to procedure in current transaction?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:47:27.130

为什么不返回更新记录的 id 及其新状态？

```
CREATE OR ALTER PROCEDURE PROC_GETSTATUS (
  IDTBL1 INTEGER)
RETURNS (
  ID INTEGER,
  STATUS VARCHAR(255))
AS
BEGIN
  FOR
    SELECT FIRST 1 a.id 
    FROM tbl1 a
    WHERE a.status='free' AND a.id=:IDTBL1 
    ORDER BY a.lastupdated 
    INTO :ID
  DO BEGIN
    STATUS = 'USINGBY' || gen_id(RPUSING,1); 
    UPDATE tbl1 a SET a.status = :STATUS
      WHERE a.id = :ID;
    SUSPEND;
  END 
END 
```

然后在查询中使用它：

```
SELECT a.*, p.status FROM tbl1 a LEFT JOIN proc_getstatus(1) p ON a.id = p.id 
```

# javascript - 即使没有传递任何内容，JavaScript 布尔变量也为真

> ID：13600483
> 
> 赞同：0
> 
> 时间：2012-11-28T08:04:36.860
> 
> 标签：javascript, variables

我有以下 if 子句：

```
if(trackingEnabled && tracking) {
  // do something
} 
```

这两个变量都是函数参数。在某些情况下，`tracking`变量被设置为布尔值，在某些情况下不是。

如果我查找变量的类型（在我不传递值的情况下），那么它是一个简单的对象。

我现在的问题是，当我没有向函数传递任何内容时，为什么跟踪变量被解释为布尔值（值为真）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:26:07.783

你能粘贴整个代码（方法调用）。我在 IE9、FF14 和 Chrome 23 中尝试了下面的代码，以及 if statemenet 永远不会执行的代码，而 typeof b 被分别评估为 undefined 和 object 以进行方法调用。

```
function f(a,b){
 console.log("Type of b is " + typeof b);
 if(a && b){
     console.log(a);
     console.log(typeof a);
     console.log(b);
     console.log(typeof b);
 }
}
f(true);
f(true,null); 
```

我看到两个可能的原因

1）你有一些东西传入函数

2) 你有一些奇怪的 Javascript 执行环境

# javascript - Handlebars - 获取块的不变内容

> ID：13600486
> 
> 赞同：4
> 
> 时间：2012-11-28T08:04:40.490
> 
> 标签：javascript, handlebars.js, client-side-templating

我想获得车把中块的未更改/未渲染/任何内容。所以，假设我有以下内容：

```
{{#template}}
    <tr><td>{{name}}</td><td>{{price}}</td></tr>
{{/template}} 
```

如果我有一个名为“模板”的助手，我希望能够引用原始内容块 - 而不是“编译”模板块。所以，我希望能够在`<tr><td>{{name}}</td><td>{{price}}</td></tr>`没有`{{name}}`和`{{price}}`被“渲染”的情况下获得字符串。

现在，看起来我唯一可以访问的是“this.options.fn”，它似乎只是一个预编译的模板片段。

有没有办法做到这一点？到目前为止，我所看到的只是对编译内容的引用。

注意 - 如果甚至可以说“我真的想把它打印出来”，那也可以。例如，Smarty 中的 {literal}，它将忽略所有内容，直到 {/literal}。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:10:28.077

```
<script type="text/template" id="my-template">
  <tr><td>{{name}}</td><td>{{price}}</td></tr>  
</script>

var uncompiledTemplate = $( '#my-template'); 
```

# django - Django 反向 prefetch_related 的外键返回数组

> ID：13600492
> 
> 赞同：2
> 
> 时间：2012-11-28T08:05:10.350
> 
> 标签：django, django-models, django-orm

从[这个例子](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)开始，我想执行这样的反向查询：

```
result = Topping.objects.all().prefetch_related('pizza_set') 
```

我希望这会返回一个数组数组。在每个单独的数组中，返回到比萨饼的反向查找本身应该是一个数组。

```
result = ['name':'Pineapple', 'pizza_set':[{'name':'Hawaiian'... ... }]] 
```

照原样，我的查询没有通过 Pizza_set。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:44:34.920

首先，这里没有“数组”（在 Python 中我们称之为“列表”，但没关系）。调用的结果`all()`是一个 QuerySet，它是一个类似列表的容器——它包含的东西也不是列表，而是相关类型的对象——在这种情况下是`Topping`实例。每个实例都是从数据库中填充的，并且使用点`prefetch_related`- 如您的链接中所述 - 是它为每个实例填充一个内部缓存，然后在您调用相关集时使用该缓存。您不需要直接访问该属性，但是当您调用`obj.pizza_set.all()`Topping 查询集中的任何项目时，它将被使用，您可以通过检查数据库命中来验证这一点。

# ios - Iphone app ios 未知键异常

> ID：13600496
> 
> 赞同：3
> 
> 时间：2012-11-28T08:05:17.960
> 
> 标签：ios

我在xcode中不断收到这个异常

```
2012-11-27 23:42:51.239 MichaelWidickProject[9640:c07] Application windows are expected to have a root view controller at the end of application launch
2012-11-27 23:42:52.825 MichaelWidickProject[9640:c07] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<InheritController 0x8e40cc0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key you.'
*** First throw call stack:
(0x1c93012 0x10d0e7e 0x1d1bfb1 0xb7d711 0xafeec8 0xafe9b7 0xb29428 0x2350cc 0x10e4663 0x1c8e45a 0x233bcf 0xf8e37 0xf9418 0xf9648 0xf9882 0xf9b2a 0x110ef5 0x110fdb 0x111286 0x111381 0x111eab 0x111fc9 0x112055 0x2173ab 0x6892d 0x10e46b0 0x228ffc0 0x228433c 0x2284150 0x22020bc 0x2203227 0x22038e2 0x1c5bafe 0x1c5ba3d 0x1c397c2 0x1c38f44 0x1c38e1b 0x1bed7e3 0x1bed668 0x1865c 0x1f6d 0x1e95)
libc++abi.dylib: terminate called throwing an exception 
```

我正在尝试单击一个按钮，然后使该按钮将视图控制器推到导航视图控制器上。我已经尝试了我能想到的一切。太奇怪了，我的教授无法弄清楚。请帮忙

```
InheritController *gameOne = [[InheritController alloc] initWithNibName:@"BasicMathLevelOne" bundle:nil];
gameOne.title = @"Level One:Basic Game";
[self.navigationController pushViewController:gameOne animated:NO]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:17:05.553

错误消息听起来像是“BasicMathLevelOne.xib”中的连接断开。这是 KVC 尝试`InheritController`为键“you”设置值的结果，但该类没有符合 KVC 的访问器（还有吗？）。

要找到错误发生的确切位置，请在 Xcode 中设置异常断点（按 Command-6，单击左下角的“+”，选择“添加异常断点”）。在调试器中运行应用程序应使其停止在发生错误的位置。

哦，好吧，再找一个教授。

# linux - 无法强制 Git 添加 linux /dev 设备

> ID：13600498
> 
> 赞同：1
> 
> 时间：2012-11-28T08:05:21.020
> 
> 标签：linux, git

我运行这个`git add --force /dev/`cmd 来将 /dev 设备添加到我的仓库中，我得到的`git-status`和以前一样。我独立添加文件夹中的每个文件，但我得到相同的 git-status。

这是我的测试，我得到相同的结果，git 可以跟踪块和字符设备吗？

```
yangchar@yangchar:~/verify$ git add ttyS0 --force
yangchar@yangchar:~/verify$ ll 

-rw-r--r-- 1 yangchar yangchar    71 2012-11-28 10:59 hello.c
-rw-r--r-- 1 yangchar yangchar     0 2012-11-28 11:04 new.c
drwxr-xr-x 4 yangchar yangchar  4096 2012-11-28 11:15 ooxx/
-rw-r--r-- 1 yangchar yangchar    31 2012-11-28 10:47 README.md
crw-r----- 1 yangchar yangchar 4, 64 2012-11-28 16:05 ttyS0

yangchar@yangchar:~/verify$ git st

# On branch master

nothing to commit (working directory clean) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:15:33.947

不，您不能将设备文件添加到 git 存储库。这是来自 git 的[dir.c](https://github.com/git/git/blob/master/dir.c#L1088)的评论：

```
/*
 * Read a directory tree. We currently ignore anything but
 * directories, regular files and symlinks. That's because git
 * doesn't handle them at all yet. Maybe that will change some
 * day.
 *
 * Also, we ignore the name ".git" (even if it is not a directory).
 * That likely will not change.
 */ 
```

Linux 中的设备文件是一种特殊的文件，是什么让它们的内容很难跟踪（不可能？）。

# java - 严格模式抱怨资源泄漏

> ID：13600504
> 
> 赞同：4
> 
> 时间：2012-11-28T08:05:46.437
> 
> 标签：java, android, inputstream, android-strictmode, bytearrayoutputstream

严格模式抱怨以下内容：**在附加的堆栈跟踪中获取了资源，但从未释放。有关避免资源泄漏的信息，请参阅 java.io.Closeable。：**

```
**response = httpclient.execute(httpPost);** 
```

下面是我的代码：

```
 HttpClient httpclient = new DefaultHttpClient();

    String url = "example";
    HttpPost httpPost = new HttpPost(url);

    HttpResponse response;
    String responseString = "";
    try {
        httpPost.setHeader("Content-Type", "application/json");

**response = httpclient.execute(httpPost);**

        StatusLine statusLine = response.getStatusLine();
        if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            response.getEntity().writeTo(out);
            out.close();
            responseString = out.toString();
        } else {
            response.getEntity().getContent().close();
            throw new IOException(statusLine.getReasonPhrase());
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    return responseString; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-09T20:31:08.350

从 4.3 开始，不推荐使用 kenota 指出的方法。

而不是`HttpClient`你现在应该使用`CloseableHttpClient`如下所示：

```
 CloseableHttpClient client= HttpClientBuilder.create().build(); 
```

然后你可以使用以下方法关闭它：

```
 client.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T08:17:05.250

正如 Praful Bhatanagar 指出的，您需要在*finally*块中释放资源：

```
HttpClient httpclient = new DefaultHttpClient();
//... code skipped
String responseString = "";
try {
//... code skipped
} catch (IOException e) {
} finally {
     httpClient.getConnectionManager().shutdown();
} 
```

# android - android：我获取具有属性的节点我如何获取它的子节点

> ID：13600510
> 
> 赞同：0
> 
> 时间：2012-11-28T08:06:04.283
> 
> 标签：android, xml, xml-parsing, android-parser

xml 可在[http://thecybersoft.us/BridalExpo/Getmember.xml获得](http://thecybersoft.us/BridalExpo/Getmember.xml)

```
 XPathFactory xpathfactory = XPathFactory.newInstance();
    XPath xpath = xpathfactory.newXPath();
    try {
         xpathexpression = xpath.compile("//@[name()='diffgr:id']");//bookstore//book
            result = xpathexpression.evaluate(doc,XPathConstants.NODESET);
           Log.v(result.toString(), "Value of result");
    } catch (XPathExpressionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

在上面的代码中，我按属性获取节点，如何获取各个节点的子节点。还有这个xml的根节点是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:48:51.930

您必须像这样遍历节点：

```
 XPathFactory xpathfactory = XPathFactory.newInstance();
   XPath xpath = xpathfactory.newXPath();
    try 
           {

                    expr = xpath.compile("//@[name()='diffgr:id']");
        result = expr.evaluate(rootDoc, XPathConstants.NODESET);
        nodes = (NodeList) result;
        for (int i = 0; i < nodes.getLength(); i++)

                   {
       userDTO.setUser_id((int)Integer.parseInt(nodes.item(i).getTextContent()));
        } 
```

如此迭代，您将获得子节点。您所说的“根不”是什么意思。我不明白你的意思

# jquery - Jquery自动完成，在新文本上设置id 0

> ID：13600523
> 
> 赞同：1
> 
> 时间：2012-11-28T08:06:48.723
> 
> 标签：jquery, jquery-autocomplete, jquery-ui-autocomplete

下面的代码填充了我的文本框的自动完成功能。

```
$.ajax({
                type: "POST",
                url: "MyService.asmx/GetCompanies",
                dataType: "json",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $('#txtCompany').autocomplete({
                        minLength: 0,
                        source: data.d,
                        focus: function (event, ui) {
                            $('#txtCompany').val(ui.item.value);
                            return false;
                        },
                        select: function (event, ui) {
                            $('#txtCompany').val(ui.item.value);

                            $('#HFCompId').val(ui.item.Name);
                            return false;
                        }
                    });
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            }); 
```

当用户选择一个名称时，该名称的 id 被复制到`HFCompID`，并且做得很好。但我还需要通过不在自动完成中的同一个文本框添加新名称。在用户使用新名称的情况下，我需要将值设置`HFCompID`为 0。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:55:43.227

其实我自己想出来了:)希望它是正确的方法。现在它的工作。`select`在活动结束后添加了这个

```
change: function (event, ui) {
                            if (ui.item == null) {
                                $('#HFCompId').val(0);
                            }
                        } 
```

# vb.net - Visual Studio 编译的应用程序无法在 XP 上运行

> ID：13600526
> 
> 赞同：0
> 
> 时间：2012-11-28T08:06:57.687
> 
> 标签：vb.net, visual-studio-2008, runtime

我有两个桌面应用程序（让我们说“x”和“y”）。两者都是用 Visual Studio 2008 vb.net 语言编写的。两者都有相同的引用，相同的所有设置（逐步检查），都在同一台机器（w7）上编译，但只有一个（'x'）在所有其他机器（以及 w7 和 xp）上工作，另一个（' y') 仅适用于 w7。我错过了什么？我在 xp 这样的我们上收到错误 ('y')`An unhandled exception ('System.InvalidOperationException') occurred in OVA.exe [4020]. Just-In-Time debugging this exception failed with the following error: No installed debugger has Just-In-Time debugging enabled. In Visual Studio, Just-In-Time debugging can be enabled from Tools/Options/Debugging/Just-In-Time.` 正如我所说的设置是相同的（除了名称和源位置因几个文件夹而异）。即时调试已启用。我什至评论了应用程序“y”中的所有代码，只留下了没有事件处理的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:46:47.527

根据[http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx)

```
"The exception that is thrown when a method call is invalid for the object's current state." 
```

看到您注释掉了仅留下表单的事件处理程序。它可能是其中一个控件的初始化。或者你在 New() 函数中做了什么特别的事情？如果是这样，你能把它贴在这里吗？

# google-chrome - 可以通过随机 Web 请求调用 Chrome/Firefox 插件吗？

> ID：13600529
> 
> 赞同：0
> 
> 时间：2012-11-28T08:07:37.843
> 
> 标签：google-chrome, firefox, browser-plugin

我对 Chrome/Firefox 浏览器中的插件有疑问。Chrome/Firefox 插件是否有可能被一些随机的 Web 请求调用，而不是html 中的标签`embed`？`object`

例如，一个页面有一个带有 MIME jpeg 的 web 请求，浏览器捕获下载的原始图像数据并将数据发送到新创建的插件实例。我在这里描述的这个场景可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:53:44.373

使用插件：

*   使用提到的对象/嵌入标签
*   作为整页内容的处理程序（例如，在 PDF 中看到）

在这些场景之外，插件不用于处理任何内容/请求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T08:34:24.407

一些代理插件已经做了你想要的，比如 FoxyProxy、Proxy SwitchySharp 等。

# javascript - 切换/选择以更改 div

> ID：13600530
> 
> 赞同：0
> 
> 时间：2012-11-28T08:07:44.747
> 
> 标签：javascript, jquery, toggle, image

我正在尝试通过此处显示的相应拨动开关（图像）构建一组简单的 div；

[问题] [http://jsfiddle.net/hAJe2/9](http://jsfiddle.net/hAJe2/9)

HTML：

```
<div id="maindiv">
    <div class="div1">div #1
    </div>
    <div class="div2">div #2
    </div>
    <div class="div3">div #3
    </div>
    <div class="div4">div #4
    </div>
</div>
<div id="imagediv">
    <img src="http://placehold.it/80x80/0066cc/ffffff" class="img-swap">
    <img src="http://placehold.it/80x80/0066cc/ffffff" class="img-swap">
    <img src="http://placehold.it/80x80/0066cc/ffffff" class="img-swap">
    <img src="http://placehold.it/80x80/ffff33/000000" class="img-swap">
    <img src="http://placehold.it/80x80/ffff33/000000" class="img-swap">
</div> 
```

CSS：

```
#maindiv{margin:0 auto; text-align:center; font-family:arial, sans-serif;}

.div1{width:100px; height:50px; display:block; background:#33ff33; margin:10px auto;  line-height:50px; display:inline-block;}

.div2{width:100px; height:50px; display:block; background:#33ff33; margin:10px auto; line-height:50px; display:inline-block;}

.div3{width:100px; height:50px; display:block; background:#ff3333; margin:10px auto; line-height:50px; display:inline-block;}

.div4{width:100px; height:50px; display:block; background:#ff3333; margin:10px auto; line-height:50px; display:inline-block;}

#imagediv{background:#cccccc;}

img{margin:10px; cursor:pointer;} 
```

查询：

```
$(function(){
  $(".img-swap").on('click', function() {
    if ($(this).attr("class") == "img-swap") {
      this.src = this.src.replace("0066cc","cccccc");
    } else {
        this.src = this.src.replace("cccccc","0066cc");
    }

    if ($(this).attr("class") == "img-swap") {
      this.src = this.src.replace("ffff33","ccccc8");
    } else {
        this.src = this.src.replace("ccccc8","ffff33");
    }
    $(this).toggleClass();
  });
}); 
```

我想要能够做的是。Div#1、Div#2 为绿色，Div#3、Div#4 默认为红色。

1.如果点击蓝色图片，Div的1、2、3为绿色。
2.如果点击黄色图片，Div的1和4是绿色的。
3.在任何给定时间只能点击一张图片（五张中的一张）。因此，如果我单击蓝色，然后单击黄色，黄色将被覆盖，因此 Div 的 1 和 4 将变为绿色。（请注意，按下的图像将变为灰色，如上例所示。）

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:48:28.137

查看更新[的小提琴](http://jsfiddle.net/hAJe2/26/)

我清理了你的 CSS 代码。添加了用于处理事件的数据属性。这是带有注释的javascript代码

```
$(function(){
  // declare current var for later use
  var current;
  // if an element with the class img-swap is clicked
  $(".img-swap").on('click', function() {
     // set this image to grey (dont know if this is the right img url, but seems so)
     $(this).attr('src', 'http://placehold.it/80x80');
     // remember if we need to do swap1 (green, green, green, red) or swap 2 (green, red, red, green)
     current = $(this).hasClass('swap1') ? 'swap1' : 'swap2'; 
     // iterate over all our divs
     $('#maindiv div').each(function() {
        // remove the current classes (green AND red)
        $(this).removeClass('red green')
        // get the class from the data-attribute (data-swap1 or data-swap2) and add this class
        $(this).addClass($(this).data(current));   
     }); 
  });
}); 
```

编辑：你可能不应该对类名使用“绿色”和“红色”，我只是为了说明而这样做

edit2：如果您希望只允许单击一次 img-swap，只需在单击处理程序中首先检查 img-src：查看小提琴的另一个更新：http: [//jsfiddle.net/hAJe2/ 27/](http://jsfiddle.net/hAJe2/27/)

# php - php用数组解析多维stdclass对象

> ID：13600531
> 
> 赞同：3
> 
> 时间：2012-11-28T08:07:46.330
> 
> 标签：php, arrays, web-services, parsing, stdclass

我正在使用 php 访问 wsdl 网络服务。读出效果很好，但解析结果似乎有点困难：我试图 var_dump() 结果来了解结果的样子。这是我用来转储结果的 PHP 代码：

```
 foreach($result as $var => $value) {

  var_dump($value);
    echo "<br />";

} 
```

这就是我得到的：

```
object(stdClass)#3 (3) {
 ["Successful"]=> bool(true) 
 ["MessageId"]=> string(0) "" 
 ["MlsMessageText"]=> string(0) "" 
 } 

object(stdClass)#4 (3) { 

["RowCount"]=> int(3) 
["ColumnCount"]=> int(3) 
["Columns"]=> object(stdClass)#5 (1) { 

    ["Column"]=> array(3) { 

            [0]=> object(stdClass)#6 (2) { 

                ["Name"]=> string(5) "RowID" 
                ["Rows"]=> object(stdClass)#7 (1) { 

                    ["string"]=> array(3) { 
                    [0]=> string(5) "12001" 
                    [1]=> string(5) "12002" 
                    [2]=> string(5) "12003" } } } 

            [1]=> object(stdClass)#8 (2) { 

                ["Name"]=> string(8) "PersonID" 
                ["Rows"]=> object(stdClass)#9 (1) { 

                    ["string"]=> array(3) { 
                    [0]=> string(11) "12033310001" 
                    [1]=> string(11) "12033310002" 
                    [2]=> string(11) "12033310003" } } } 

            [2]=> object(stdClass)#10 (2) { 

                ["Name"]=> string(10) "PersonName" 
                ["Rows"]=> object(stdClass)#11 (1) { 

                    ["string"]=> array(3) { 
                    [0]=> string(10) "Jack Jones" 
                    [1]=> string(11) "Jenifer Row" 
                    [2]=> string(12) "Marin Banker" } } }

        } 
    } 
} 
```

这是一个相当复杂的答案，我不知道如何通过循环解析它。最后我想得到一个包含数据的表。

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:14:52.590

[对象是可迭代的](http://php.net/manual/en/language.oop5.iterations.php)。所以你可以用 foreach 遍历它们。只需在其中创建带有 foreach 循环的递归函数。比如这样：

```
function loop($input)
{
    foreach ($input as $value)
    {
        if (is_array($value) || is_object($value))
            loop($value);
        else
        {
            //store data
            echo $value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:29:42.060

问题是他们将表转换`column -> row`为`row -> column`，您可以通过创建一个新表并反转列和行来做到这一点。

```
$table = array();

foreach ($result['xxx']->Columns->Column as $colnr => $coldata) {
    foreach ($coldata->Rows->string as $rownr => $rowdata) {
        $table[$rownr][$coldata->Name] = $rowdata;
    }
}

print_r($table); 
```

顺便说一句，`$result['xxx']`不起作用，`'xxx'`应该用正确的密钥替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T06:05:22.590

我有类似的问题。我从 JSON 形式的代码中获取结果。当我使用 json_decode 时，我注意到通过 var_dump 方法在解码期间在数组中创建了一些对象。

您在下面看到的 var_dump 是我的 var

```
$result. 
```

如果我想从我的 var 访问“状态”数组，我使用了以下内容，效果很好:)

```
$result[0]->status 
```

我想要那些有我的查询结果的数据。

```
array(1) {
  [0]=>
  object(stdClass)#3 (3) {
    ["status"]=>
    string(9) "Connected"
    ["message"]=>
    string(34) "Connected to database successfully"
    ["data"]=>
    array(1) {
      [0]=>
      object(stdClass)#2 (10) {
        ["id"]=>
        string(36) "cc569871-6544-11e3-945d-0e184c35292b"
        ["login_name"]=>
        string(22) "tkamran@premierbpo.com"
        ["login_password"]=>
        string(8) "Lead6291"
        ["notes"]=>
        NULL
        ["created_by"]=>
        string(7) "default"
        ["created_on"]=>
        string(19) "2013-12-15 12:52:46"
        ["last_modified_by"]=>
        string(7) "default"
        ["last_modified_on"]=>
        string(19) "2013-12-15 12:52:46"
        ["is_current"]=>
        string(3) "yes"
        ["is_active"]=>
        string(3) "yes"
      }
    }
  }
} 
```

# sql - 如何在 IBM DB2 9.7 中选择第一行并更新它

> ID：13600533
> 
> 赞同：0
> 
> 时间：2012-11-28T08:07:55.963
> 
> 标签：sql, db2

可以在 T-SQL 中使用公用表表达式来变魔术，但是在 DB2 9.7 中如何做到这一点呢？

```
1\. select the first row in a table
2\. Update that specific row 
```

这两个步骤必须在一个事务中执行。请帮忙 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:17:01.383

不需要 CTE，也不需要游标！只需定义将该行作为全选返回的查询，然后对其运行更新：

```
UPDATE (
    SELECT *
    FROM schema.table
    WHERE thing1 = 'blah'
      AND thing2 = 'something'
    ORDER BY key
    FETCH FIRST ROW ONLY
)
SET thing3 = 'updated' 
```

在 DB2 Linux/Unix/Windows 9.7 上测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:34:21.950

当您在游标上迭代时，您可以在 DB2 中使用类似的东西。

这是一个例子：

```
begin
 declare at_end sqlstate;
 declare name anchor emp.name;
 declare continue handler for not found
   set at_end = TRUE;
 declare c cursor for
   select tabname from emp
   for update;
 open c;
 fetch c into name;
 if at_end <> TRUE then 
  update emp
    set name = 'foo'
    where current of c;
 end if;
end@ 
```

此代码将仅更新从选择中检索到的第一行。

这将在发出 select 语句时创建意图更新锁，然后在更新语句中转换为排他锁。这使得一旦选择完成，没有其他事务可以修改该行。

# c# - 如何将数据库中的数据处理成数组？

> ID：13600534
> 
> 赞同：1
> 
> 时间：2012-11-28T08:07:56.977
> 
> 标签：c#, database, linq-to-sql

目前我正在开发一个 WPF 应用程序`C#`，`Linq`并且我得到了一个不可编辑的数据库（如下图所示）。有谁可以教我如何将“统计”的数据存储到四个数组中。

1.  第一个数组：“HomeShot”
2.  第二个数组：“HomeScore”
3.  第三个数组：“AwayShot”
4.  第四个数组：“AwayScore”

![在此处输入图像描述](../Images/4f94698b157060b6c54c2c5a24d00fa5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:49:52.863

正如我在评论中提到的，与 Derek 的回答类似，您可能需要一个表示数据网格中一行的单一类型。（通常，数据网格绑定到业务对象类型，因此值得一提的是，如果您在程序中的其他地方使用该类型，则可能有一个类型具有比该数据网格所需更多的属性。）对于这些示例，我将使用Derek 的`Statistics`类型，经过一些修改和名称更改，并假设您将数据网格绑定到实现的集合`ICollection<Statistic>`：

```
public class Statistic
{
    public Statistic(int id, int homeshot, int homescore, int awayshot, int awayscore)
    {
        ID = id;
        HomeShot = homeshot;
        HomeScore = homescore;
        AwayShot = awayshot;
        AwayScore = awayscore;
    }

    public int ID { get; set; }
    public int HomeShot { get; set; }
    public int HomeScore { get; set; }
    public int AwayShot { get; set; }
    public int AwayScore { get; set; }
} 
```

~~您没有提供有关如何从数据库中检索信息的任何信息，因此我假设您使用的是 DbDataReader。如果你使用 linq to SQL，这个例子看起来会有些不同：~~

 ~~```
while (dataReader.Read())
{
    int id = (int)dataReader["ID"];
    string statisticSource = (string)dataReader["Statistic"];
    int[] data = ExtractData(statisticSource);
    Statistic statistic = new Statistic(id, data[0], data[1], data[2], data[3]);
    statCollection.Add(statistic);
} 
```~~  ~~ExtractData 方法的实现有许多选项，具体取决于保证 Statistic 字符串格式的一致性。方法签名甚至有几个选项。我假设它返回一个包含四个值的 int 数组。其他实现可能会返回一个字符串索引的集合或其他东西。

此外，您可以在 Statistic 构造函数中调用字符串解析逻辑。为此，请使用此签名创建一个构造函数：

```
public Statistic(int id, string statisticSource)
{
    ID = id;
    int[] data = ExtractData(statisticSource);
    HomeShot = data[0];
    HomeScore = data[1];
    AwayShot = data[2];
    AwayScore = data[3];
} 
```

~~在这种情况下，客户端代码如下所示：~~

 ~~```
while (dataReader.Read())
{
    int id = (int)dataReader["ID"];
    string statisticSource = (string)dataReader["Statistic"];
    Statistic statistic = new Statistic(id, statisticSource);
    statCollection.Add(statistic);
} 
```~~ 

或者，事实上，如果您更喜欢更少的行和更复杂的表达式：

```
while (dataReader.Read())
    statCollection.Add(new Statistic((int)dataReader["ID"], (string)dataReader["Statistic"])); 
```

 ~~糟糕，我刚刚注意到 linq to SQL 标记。我假设 Linq to SQL 将表作为`DbStatistic`实例序列提供给您。在这种情况下，您的客户端代码将如下所示：

```
foreach (var dbStatistic in dbStatistics)
{
    int[] data = ExtractData(dbStatistic.Statistic);
    Statistic statistic = new Statistic(dbStatistic.ID, data[0], data[1], data[2], data[3]);
    statCollection.Add(statistic);
} 
```

或这个：

```
foreach (var dbStatistic in dbStatistics)
{
    Statistic statistic = new Statistic(dbStatistic.ID, dbStatistic.Statistic);
    statCollection.Add(statistic);
} 
```

或这个：

```
foreach (var dbStatistic in dbStatistics)
    statCollection.Add(new Statistic(dbStatistic.ID, dbStatistic.Statistic)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:04:47.220

我认为处理此类问题的更好方法是首先学习如何操作字符串，以便您可以将其分解为 4 部分。

我能想到的最简单的方法就是简单地获取数字：-

```
public List<int> statValues = new List<int>();

string input = "HOME SHOT 5 SCORE 2, AWAY SHOT 3 SCORE 0";
string result = Regex.Replace(input, @"[^\d]", ""); 
```

这将为您提供 5230。然后您可以将其拆分为整数：-

```
foreach (var c in result)
            {
                statValues.Add((int)c);
            } 
```

一旦你解决了这个问题，我会看看构建一个代表你的数据的类，如下所示：-

公共类统计{

```
public Statistics(int homeshot, int homescore, int awayshot, int awayscore)
{

    HomeShot = homeshot;
    HomeScore = homescore;
    AwayShot = awayshot;
    AwayScore = awayscore;
}

public int HomeShot { get; set; }
public int HomeScore { get; set; }
public int AwayShot { get; set; }
public int AwayScore { get; set; } 
```

}

然后，您需要查看创建统计列表对象：-

```
List<Statistics> listofStats = new List<Statistics>(); 
```

当您操作数据库中的每个条目时，将一个新项目添加到您的列表中，如下所示：-

```
listofStats.Add(new Statistics(statValues[0],statValues[1],statValues[2],statValues[3])); 
```

从数据库中的所有条目构建此列表后，您可以将其用作 DataGridView 的数据源。

我已经做了很多事情了，希望它有所帮助。我相信其他人会有更清洁的方法来做到这一点。~~~~

# vb.net - 如何使用 directshow 在 vb.net 中捕获图像？

> ID：13600559
> 
> 赞同：0
> 
> 时间：2012-11-28T08:09:44.853
> 
> 标签：vb.net, directshow

我设法使用了来自互联网的示例代码，但它所做的只是显示来自我的网络摄像头的图像。有人可以帮我如何在 vb 中使用 directshow 捕获图像吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T08:31:08.277

您需要[DirectShow.NET](http://directshownet.sourceforge.net/)才能在 VB.NET 中捕获，因为您无法直接从 VB.NET 与 DirectShow 交互。DirectShow.NET 附带[示例](https://sourceforge.net/projects/directshownet/files/DirectShowSamples/2010-February/)，包括具有视频捕获功能的示例。CapWMV 正在解决您发布的问题（虽然它是 C#，但您会在 VB.NET 中找到其他问题）：

```
Samples\Capture\CapWMV
----------------------
Capture from video capture devices to WMV files. 
```

# objective-c - 单例类的音频

> ID：13600560
> 
> 赞同：0
> 
> 时间：2012-11-28T08:09:46.413
> 
> 标签：objective-c, audio

我创建了一个 Singleton 类来充当音频播放器，它将在启动时开始播放音频，并且可以从另一个类中关闭。

在另一个班级，当我打电话时

```
[[Singleton singleton] audioPlayer stop]; 
```

它给了我错误

```
'Expected :' 
```

我了解 OOP，但我认为我从未尝试过访问对象的对象。有任何想法吗？

```
//  Singleton.m

#import "Singleton.h"

@implementation Singleton

#pragma mark Singleton Methods

+ (id)sharedManager {
static Singleton *singleton = nil;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    singleton = [[self alloc] init];
});
return singleton;
}

- (id)init {
if (self = [super init]) {

    boy = false;
    girl = false;

    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/Mathletics Theme.mp3", [[NSBundle mainBundle] resourcePath]]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = -1;
    audioPlayer.volume = 0.85f;

    if (audioPlayer == nil)
        NSLog([error description]);
    else
        [audioPlayer play];

    audioPlayer.numberOfLoops = -1;

    if (audioPlayer == nil)
        NSLog([error description]);
    else
        [audioPlayer play];
}
return self;
}

@end

//  Singleton.h

#import <Foundation/Foundation.h>
#import <AVFoundation/AVFoundation.h>

@interface Singleton : NSObject {

AVAudioPlayer *audioPlayer;

}

@property (nonatomic, retain) AVAudioPlayer *audioPlayer;

+ (id)singleton;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:11:09.987

在你的 Singleton 类中，你可能有这样的方法`+ (MySingleton *) instance`

所以使用`[[Singleton instance] audioPlayer stop];`

或者

```
Singleton *singleton = [Singleton instance];
[singleton.audioPlayer stop]; 
```

**带有 NSString 的 MySingleton 示例**

```
MySingleton *mySingleton = [MySingleton instance];
mySingleton.myString = @"hi sigletone";    
NSLog(@"%@",mySingleton.myString); 
```

**示例 MySingleton.h**

```
@interface MySingleton : NSObject

   @property (nonatomic,retain) NSString *myString;

  + (MySingleton *) instance;

@end 
```

**示例 MySingleton.m**

```
#import "MySingleton.h"

@implementation MySingleton

- (id) initSingleton
{
    if ((self = [super init]))
    {
        // Initialization code here.
    }

    return self;
}

+ (MySingleton *) instance
{
    // Persistent instance.
    static MySingleton *_default = nil;

    // Small optimization to avoid wasting time after the
    // singleton being initialized.
    if (_default != nil)
    {
        return _default;
    }

#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_4_0
    // Allocates once with Grand Central Dispatch (GCD) routine.
    // It's thread safe.
    static dispatch_once_t safer;
    dispatch_once(&safer, ^(void)
                  {
                      _default = [[MySingleton alloc] initSingleton];
                  });
#else
    // Allocates once using the old approach, it's slower.
    // It's thread safe.
    @synchronized([MySingleton class])
    {
        // The synchronized instruction will make sure,
        // that only one thread will access this point at a time.
        if (_default == nil)
        {
            _default = [[MySingleton alloc] initSingleton];
        }
    }
#endif
    return _default;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:45:16.903

你错过了括号 [ ]

```
[[[Singleton singleton] audioPlayer] stop]; 
```

但从您的代码来看，这似乎不是唯一的问题

```
[[singleton sharedManager /*your method].audioPlayer stop]; 
```

audioPlayer 必须是单例的属性才能使 var 可用

```
@property(readonly) AVPlayer *audioPlayer; 
```

# c# - 如何使用 C# 中的 ZedGraph 从 X 轴的 PointPair 获取日期时间？

> ID：13600564
> 
> 赞同：2
> 
> 时间：2012-11-28T08:10:06.257
> 
> 标签：c#, zedgraph

我能够使图形 X 轴以 DateTime 格式显示，但是当我的鼠标指向曲线项时我无法获取日期时间，PointPair 仅以双精度返回数据。我如何获得日期？

```
myPane.XAxis.Type = AxisType.Date;
myPane.XAxis.Scale.Min = new XDate(DateTime.Now);  // We want to use time from now
myPane.XAxis.Scale.Max = new XDate(DateTime.Now.AddMinutes(5));  // to 5 minutes per default
myPane.XAxis.Scale.MinorUnit = DateUnit.Second;         // set the minimum x unit to time/seconds
myPane.XAxis.Scale.MajorUnit = DateUnit.Minute;         // set the maximum x unit to time/minutes
myPane.XAxis.Scale.Format = "T"; 
```

下面是函数

```
private string MyPointValueHandler(ZedGraphControl control, GraphPane pane, CurveItem curve, int iPt)
{
        // Get the PointPair that is under the mouse
        PointPair pt = curve[iPt];

        if( curve.Label.Text == "Temperature" )
            return curve.Label.Text + " is " + pt.Y.ToString("f2") + " ºC at " + pt.X.ToString("f2");
        else
            return curve.Label.Text + " is " + pt.Y.ToString("f2") + " % at " + pt.X.ToString("f2");

} 
```

我想要这样的结果，例如： 下午 4:20:12 温度为 23ºC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T00:47:35.583

```
 PointPair pt = curve[iPt];
    XDate the_date = new XDate(pt.X);

    if( curve.Label.Text == "Temperature" )
        return curve.Label.Text + " is " + pt.Y.ToString("f2") + " ºC at " + the_date.DateTime;
    else
        return curve.Label.Text + " is " + pt.Y.ToString("f2") + " % at " + the_date.DateTime; 
```

# parameters - Twilio 在 Twilio 的 HTTP 请求中传入参数

> ID：13600565
> 
> 赞同：1
> 
> 时间：2012-11-28T08:10:16.580
> 
> 标签：parameters, sms, twilio

我不确定这是否可能，但我在这里绝望。任何建议都会有所帮助。

我们的网络应用程序向我们的客户发送短信提醒，以提醒他们他们的事件。我们希望添加一个功能，允许用户通过回复 0 或 1 来确认或删除该事件。但不幸的是，这些信息不足以对该事件执行任何修改。用户可能有 10 个事件，想要确认 8 个并删除 2 个。那么如何通过消息传递事件 ID 等信息呢？让用户输入事件 id 对用户来说不是一个实用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-25T18:20:01.113

在评论中解决：

> 在您这边，您应该将事件 ID 存储在数据库或类似的数据库中，然后当您[发送 SMS](https://www.twilio.com/docs/api/rest/sending-messages)时，只需在 SMS 正文中发送事件 ID。

例子：

> “回复 2879345 以确认您正在参加 id 为 2879345 的派对”

# node.js - 什么是 async.series 的简单实现？

> ID：13600573
> 
> 赞同：3
> 
> 时间：2012-11-28T08:11:07.413
> 
> 标签：node.js, asynchronous

我有两个功能：

```
function one(next){
  Users.find({}, function(err, docs){
    if( err)
      next( err );
    } else {
      next( null );
    }
  });
}

function two(next){
  Something.find({}, function(err, docs){
    if( err)
      next( err );
    } else {
      next( null );
    }
  });
} 
```

我可以使用异步库：

```
async.series( [one, two], function( err ){
  ...
}); 
```

在这里，如果 one() 返回 err，则立即调用回调（设置 err）。async.series的*简单、基本的实现是什么？*我查看了库的代码`async`（这太棒了），但它是一个旨在做很多事情的库，我在遵循它时遇到了真正的麻烦。

你能告诉我一个简单的 async.series 实现吗？它会简单地一个接一个地调用函数，并且——如果其中一个调用带有错误的回调——用`err`set 调用最终的回调？

谢谢...

默克。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:47:20.163

一种实现是这样的：

```
 function async_series ( fn_list, final_callback ) {
     // Do we have any more async functions to execute?
     if (fn_list.length) {
         // Get the function we want to execute:
         var fn = fn_list.shift();
         // Build a nested callback to process remaining functions:
         var callback = function () {
             async_series(fn_list,final_callback);
         };
         // Call the function
         fn(callback);
     }
     else {
         // Nothing left to process? Then call the final callback:
         final_callback();
     }
 } 
```

上面的代码不处理结果或错误的处理。要处理错误，我们可以简单地检查回调中的错误条件并在错误时立即调用最终回调：

```
 function async_series ( fn_list, final_callback ) {
     if (fn_list.length) {
         var fn = fn_list.shift();
         var callback = function (err) {
             if (err) {
                 final_callback(err); // error, abort
             }
             else {
                 async_series(fn_list,final_callback);
             }
         };
         fn(callback);
     }
     else {
         final_callback(null); // no errors
     }
 } 
```

通过在闭包中跟踪结果数组或将其传递给对 async_series 的下一次调用，可以类似地处理结果。

请注意，最终的最终回调可以假定没有错误，因为它是通过`if(err)(else)async_series`调用到达那里的。

# visual-studio-2012 - 使用连接到 TFS 2012 的最低要求

> ID：13600574
> 
> 赞同：1
> 
> 时间：2012-11-28T08:11:08.833
> 
> 标签：visual-studio-2012

是否可以通过 http 连接到安装了 TFS 的服务器？使用 tfs 所需的最少工具是什么？团队网络访问？团队探险家？他需要升级到 vs.net 2012 吗？或者这不需要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:56:28.297

如果您使用的是 Visual Studio 2010 或 2012，则不需要其他工具。只需转到团队资源管理器并输入 tfs 的 url。

# jquery - 在页面内容底部之前停止 350 像素的 Jquery 粘性页脚

> ID：13600579
> 
> 赞同：1
> 
> 时间：2012-11-28T08:11:35.240
> 
> 标签：jquery, footer, sticky

我将如何使用 Jquery 制作一个粘在浏览器底部的页脚，直到它在内容结束前达到 350 像素。基本上我在内容底部有另一个大页脚，我希望粘性页脚保持粘性，直到您滚动到 350px 页脚，它会保持在最后一个页脚的顶部，以便您可以阅读内容

基本上类似于制作一个粘性页脚，然后在内容底部的底部之前 350 像素停止粘性页脚并使其与页面一起滚动。

我在网上找到了这个，但我知道找出内容结尾的代码，而不是可查看浏览器的结尾，会有所不同......虽然它确实可以作为一般的粘性页脚

```
$(function(){
positionFooter(); 
function positionFooter(){
    if($(document).height() < $(window).height()){
        $("#globalFooter").css({position: "absolute",top:($(window).scrollTop()+$(window).height()-$("#globalFooter").height())+"px" - })
    }   
}

$(window)
    .scroll(positionFooter)
    .resize(positionFooter)
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:25:15.407

我编写了一个示例来演示如何创建粘性页脚。在示例中，该值`bottomBound`将是您的其他非粘性页脚的高度。

使用`DOCTYPE`声明很重要，因为`$(window).height()`没有它就会中断。

代码在这里：[GitHub -stickyFooter](https://github.com/emmerich/stickyNav/blob/master/demo/stickyFooter.html)和[JSFiddle](http://jsfiddle.net/PBn8q/5/)。

对于那些对使用页眉而不是页脚感兴趣的人，这里还有一些例子：[GitHub - stickyNav](https://github.com/emmerich/stickyNav)

编辑：重组答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:47:43.333

我想你的意思是这样的：http: [//jsfiddle.net/BramVanroy/ZVzEe/](http://jsfiddle.net/BramVanroy/ZVzEe/)

```
var secondary = $("#secondary-footer");

secondary.hide().addClass("fixed").fadeIn("fast");

$(window).scroll(function() {
    if (secondary.offset().top >= ($(document).height() - 350)) {
        secondary.removeClass("fixed");
    }
    else if(secondary + ":not('.fixed')") {
        secondary.addClass("fixed");
    }
});​ 
```

# java - 将列表传递给 Java 中的 SQL 语句

> ID：13600581
> 
> 赞同：0
> 
> 时间：2012-11-28T08:11:54.340
> 
> 标签：java, sql

> **可能重复：**
> [使用 JDBC 参数化 IN 子句的最佳方法是什么？](https://stackoverflow.com/questions/2861230/what-is-the-best-approach-using-jdbc-for-parameterizing-an-in-clause)

我想知道是否可以将列表传递给 SQL 语句。我一直在谷歌搜索，我发现的大多数答案都没有使用保存所有 SQL 查询的单独 .xml 文件。

我的 sql.xml 文件包含：

```
<sql name="getResultSet"><![CDATA[
SELECT ColumnName FROM TableName 
WHERE OtherColumnName IN(?) 
WITH UR;  ]]>
</sql> 
```

在我的 action.java 中：

```
String fileName = "sql.xml";
ListQuery query = new ListQuery(getDefaultsDataSource(), SQLParser.getSql(fileName, "getResultSet"), new int[] {Types.ARRAY});
List rows = (List) query.execute(new Object[] { values }); 
```

'values' 将是用户输入，例如：

值 = 名称 1、名称 2、名称 3、...

'values' 将是 IN(?) 中的值

我该怎么做？有更好的方法吗？谢谢！

# java - 使用spring mvc进行静态内容渲染

> ID：13600582
> 
> 赞同：1
> 
> 时间：2012-11-28T08:11:59.797
> 
> 标签：java, spring, spring-mvc

我是春天的新手，正在尝试。

我有一个包含 css 和图像的 jsp 文件，如下所示

```
<link href="css/style.css" rel="stylesheet" type="text/css" /> 
```

现在我有一个 url 路径，`/localhost/myapp/test/tst`它被映射到一个控制器，然后将它转发到查看 jsp

view.jsp 存在

```
/web-inf/jsp/view.jsp 
```

但是当点击路径时`/localhost/myapp/test/tst`，css和图像路径被解析为

```
/localhost/myapp/test/tst/css/style.css 
```

Actaully 我希望它 `/localhost/myapp/css/style.css` 在 webapp 的根目录中出现 css 和 html

我如何在我的春季配置中关注

```
 <mvc:annotation-driven />
    <mvc:resources mapping="/images/**" location="/images/" />
    <mvc:resources mapping="/css/**" location="/css/" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:25:48.953

您的 CSS href 当前与您的页面相关，您需要通过添加前导斜杠（加上上下文等）使其相对于服务器根目录。添加 contextPath 也是一个好主意，这样如果/当您更改 webapp 名称或将其部署为根 webapp 时，资源仍然有效。

```
<link href="${pageContext.request.contextPath}/css/style.css" rel="stylesheet" type="text/css" /> 
```

# php - 在 PHP 中的 if/else 语句中访问时变量超出范围

> ID：13600584
> 
> 赞同：0
> 
> 时间：2012-11-28T08:12:03.357
> 
> 标签：php, sql, session

我是 PHP 脚本的新手，来自 Java 背景。到目前为止，这是一件微不足道的事情，对我来说已经变成了脑筋急转弯。所以这就是问题所在，我为一个变量分配了一些值，当尝试在 if/else 语句中使用该值时，该变量实际上并不拥有先前分配的值。这是代码： -

```
<?php
    session_start();

    $email = $_POST["Email"];   
    $password = $_POST["Password"];

    $db_username="root";
    $db_password="root";
    $database="mydb";
    $localhost = "mysql";

    $con = mysql_connect($localhost,$db_username,$db_password);
    mysql_select_db($database,$con) or die( "Unable to select database");

    $query = "select * from photobook.users where email ='$email' and password ='$password';" ;

    $result = mysql_query($query);

    $num=mysql_num_rows($result);

    if($num == 1){
        while($row = mysql_fetch_array($result))
             {
                $_SESSION['email'] = $row['email'];

                $_SESSION['username'] = $row['username'];   
             }

        header("location: home.php");

    }

    else{

        include "photoBookProtocol.php";

                print "<br>email value after photobookprotocol file include is $email";
                print "<br>password value after photobookprotocol file include is $password";

        $obj=new Protocol();

        $var = $obj->loginCheck($email,$password);

                print "value of var received is $var";

        if($var == 0){
            session_destroy();
                        print "<br>user does not exist";
            //header("location: login.php");
        }
        else{
            $_SESSION['email'] = $var[0];
            $_SESSION['username'] = $var[1];
            print "<br>user exists";
            header("location: home.php");

        }   
    }

    mysql_close($con);
?> 
```

因此，当我在“else”子句中的 loginCheck($email, $password) 中传递 $email 和 $password 时，什么都没有传递。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:16:38.497

您的变量范围没有任何问题，因此：

*   POST 数据中没有任何内容
*   包含覆盖两个变量
*   `loginCheck()`正在接收正确的变量，但函数中存在错误

附带说明一下，由于您的脚本依赖于 POST 数据，因此您应该有一个条件来检查是否存在所需的数据，然后再继续：

```
if(isset($_POST['Email'], $_POST['Password']))
{
    // something posted
} 
```

# isolatedstorage - windows phone 8 的独立存储？

> ID：13600587
> 
> 赞同：3
> 
> 时间：2012-11-28T08:12:19.113
> 
> 标签：isolatedstorage, windows-phone-8

我需要为我的 windows phone 应用程序创建隔离存储，它是一个商业应用程序，可以显示你所有的商业文件，从那里你可以拒绝和接受商业文件，现在我的问题是我不知道从哪里开始隔离存储？我已经通过谷歌，但它没有任何意义，所以如果有人可以给我一个链接或教程，那就太棒了，我怎样才能在我的 app.xaml 文件中制作隔离存储，这样我就可以使用它了再次？

[这是给我基本理解的链接，但都在 buttonclick 上？](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:30:38.073

[在隔离存储文件](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragefile%28v=vs.105%29.aspx)的 msdn 页面上有一个非常全面的示例。如果您需要仔细检查放置在那里的一些文件，可以使用 sdk 附带的[独立存储资源管理器工具。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286408%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T03:55:36.693

你试过 IsoStoreSpy 吗？它同时支持WP7和WP8

它也适用于我的 WP8 模拟器

见这里[http://isostorespy.codeplex.com/](http://isostorespy.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T15:48:35.120

> 公共静态独立存储设置应用设置=独立存储设置.应用设置；

if (appSetting.Keys.Count == 0) appSetting.Add("key",value);

if (appSetting.Keys.Count > 0) appSetting.Remove("TEACHER");

if (appSetting.Contains("key"))

...

# linux - 如何在linux中确定定时器频率

> ID：13600592
> 
> 赞同：6
> 
> 时间：2012-11-28T08:12:33.497
> 
> 标签：linux, module, linux-kernel, linux-device-driver

我需要编写一个内核模块来计算 Linux Kernel Timer (Interrupt) Frequency 。

有人告诉我我需要在我的模块中使用计时器，但我不知道如何清楚地做到这一点:(

我的最终目标是将结果（频率）写入某个文件（例如：/proc/osfreq/）。

=)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T12:15:20.197

获取cpu的时间频率的方法有很多：

```
1\. zcat /proc/config.gz |grep CONFIG_HZ

# CONFIG_HZ_100 is not set
CONFIG_HZ_250=y
# CONFIG_HZ_1000 is not set
CONFIG_HZ=250 
```

表示 250 赫兹

```
2\. cat /proc/interrupts |grep LOC; sleep 1;cat /proc/interrupts |grep LOC

LOC:   43986173   44089526   43986113   44089117
LOC:   43986424   44089777   43986364   44089368 
```

表示有 4 个逻辑 CPU，其频率为：43986424 - 43986173 ~=250。

此外，您可以在内核空间的 proc.c 中获取 var cpu_khz 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-24T22:28:06.197

可以直接用printk打印模块中全局变量HZ的值，用$dmesg加载模块后查看内核日志，就可以找到HZ的值。

# youtube-api - 使用 c# 发送任意消息 youtube

> ID：13600593
> 
> 赞同：0
> 
> 时间：2012-11-28T08:12:44.027
> 
> 标签：youtube-api

我正在尝试使用 C# 向 YouTube 用户发送任意消息。我了解到，如果在 C# 中使用 YouTube API，您只能向联系人发送消息。试图查看是否有人知道如何发送给任意用户，类似于“TubeToolbox”，非常流行的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:43:24.423

YouTube API 根本不支持这一点。

# javascript - 视差移动网页所需的插件

> ID：13600595
> 
> 赞同：-1
> 
> 时间：2012-11-28T08:12:57.993
> 
> 标签：javascript, parallax

我需要建立一个像这样具有视差滚动效果的网页，

[飞人乔丹 2012](http://www.nike.com/jumpman23/aj2012/)

我已经搜索了文档和插件来构建一个类似上面的文件，但仍然没有弄清楚如何并且现在我在恐慌中迷失了...... :(

有谁知道我可以参考的任何插件或参考资料？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:20:39.350

有一个名为 Jarallax 的插件，你可以在[这里查看](http://www.jarallax.com/)

那里的网站上有几个例子。

基本上插件的作用是让您为滚动位置添加特定的 css。

假设有 margin-top: 0; 为 0%，保证金排名前 10；100%

它计算在当前滚动位置添加的边距顶部。

酷插件创建视差滚动到多个元素。

# ios - UIView 动画隐藏和显示

> ID：13600597
> 
> 赞同：0
> 
> 时间：2012-11-28T08:13:07.080
> 
> 标签：ios, objective-c, cocoa-touch, block

我开始使用 UIView 动画。并且无法使此类代码正常工作。这是我所拥有的

```
if(_Language.hidden == true)
{
    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^ {
                        _Language.alpha = 1.0;
                     }
                     completion:^(BOOL finished) {
                         _Language.hidden = false;
                     }];
}
else
{
    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^ {
                         _Language.alpha = 0.0;
                     }
                     completion:^(BOOL finished) {
                         _Language.hidden = true;
                     }];
} 
```

此代码以这种方式工作。隐藏动画按预期工作。但显示动画只等待 1 秒，然后弹出对象而没有任何过渡。谁能告诉我我在这里缺少什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T08:16:59.323

只有在动画结束后才将属性更改`hidden`为 true，因此在动画完成之前它不会出现。你应该在动画开始之前做：

```
if(_Language.hidden == true)
 {
 _Language.hidden = false;
[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationCurveEaseInOut
                 animations:^ {
                    _Language.alpha = 1.0;  
                 }];
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T08:16:56.390

你`_Language.hidden`的设置为`true`，因此当它动画时，屏幕上不会出现任何内容。您需要在制作动画之前使其可见。将 hidden 属性设置为 false，然后显示动画。当您将其添加到完成块中时，反向仅适用于隐藏。

```
_Language.hidden = false;
[UIView animateWithDuration:1.0 ... 
```

并将其从完成块中删除，

```
completion:^(BOOL finished) {
                     }]; 
```

# php - 使用 PHP 将 PDF 转换为 JPG 图像

> ID：13600598
> 
> 赞同：4
> 
> 时间：2012-11-28T08:13:21.603
> 
> 标签：php, pdf, imagemagick, jpeg

我正在使用 ImageMagik 尝试将 PDF 的内容转换为 JPG，但总是得到一个空的 jpg。我已经确保所有测试的烫发都是 777，所以我有点迷失如何继续。

这是我正在运行的脚本

```
<?php

    exec('convert testfile.pdf output.jpg', $output, $return_var);

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T08:17:46.933

试试这个。

```
<?php
    $pdf = 'testfile.pdf';
    $save = 'output.jpg';

    exec('convert "'.$pdf.'" -colorspace RGB -resize 800 "'.$save.'"', $output, $return_var);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:17:14.517

使用二进制文件的绝对路径，如下所示：

```
exec('/usr/bin/convert testfile.pdf output.jpg', $output, $return_var); 
```

但是请确保您的`convert`二进制文件实际上已打开，`/usr/bin`您可以使用以下命令进行检查：

`which convert`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:19:44.607

```
convert -normalize yourfile.pdf[0] yourdestination.jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-10T18:03:49.307

ImageMagick 内部使用 GhostScript，通常 ImageMagick 的转换速度比 Ghoastscript 慢，所以如果您只对将 pdf 转换为图像感兴趣，那么 Ghostscript`gs`命令会更快。下面是我几天前写的 Ghostscript 的示例包装器。

[PDFLib-PHP](https://github.com/imalhasaranga/PDFLib)

```
$pdflib = new ImalH\PDFLib\PDFLib();
$pdflib->setPdfPath($pdf_file_path);
$pdflib->setOutputPath($folder_path_for_images);
$pdflib->setImageQuality(95);
$pdflib->setDPI(300);
$pdflib->setPageRange(1,$pdflib->getNumberOfPages());
$pdflib->convert(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-11T13:05:17.843

在这里你有我的解决方案。直接在您的 php 代码中使用 Imagick。

将所有 PDF 页面转换为 JPG

```
 // create Imagick object
 $imagick = new Imagick();
 // Reads image from PDF
 $imagick->readImage('file.pdf');
 // Writes an image
 $imagick->writeImages('converted.jpg', false); 
```

将特定的 PDF 页面转换为 JPG

```
 // create Imagick object
 $imagick = new Imagick();
 // Read image from PDF
 $imagick->readImage('test.pdf[0]');
 // Writes an image
 $imagick->writeImages('converted_page_one.jpg'); 
```

处理这个问题的另一种方法是使用**spatie/pdf-to-image**库。

干杯!

# c# - 如何在 C#.NET 中获得准确的下载/上传速度？

> ID：13600604
> 
> 赞同：11
> 
> 时间：2012-11-28T08:13:55.490
> 
> 标签：c#, .net, network-interface

我想通过使用 C# .NET 的网络接口获得准确的下载/上传速度我知道它可以使用`GetIPv4Statistics().BytesReceived`和让线程休眠一段时间来计算。但它并没有给出我在浏览器中得到的输出。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T09:05:15.583

这是来自 LINQPad 的快速代码片段。它使用一个非常简单的移动平均线。它使用“Speedtest.net”显示“准确的速度”。要记住的是 Kbps 以*位*为单位，并且 HTTP 数据通常是压缩的，因此对于高度可压缩的数据，“下载的字节”将明显更小。另外，不要忘记这些天任何旧进程都可能在互联网上做任何旧事情（没有更严格的防火墙设置）..

我喜欢弗林登伯格的回答（不要更改接受），并且我注意到一些投票周期会返回与他/她的结论一致的“0”。

使用后果自负。

```
void Main()
{
    var nics = System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces();
    // Select desired NIC
    var nic = nics.Single(n => n.Name == "Local Area Connection");
    var reads = Enumerable.Empty<double>();
    var sw = new Stopwatch();
    var lastBr = nic.GetIPv4Statistics().BytesReceived;
    for (var i = 0; i < 1000; i++) {

        sw.Restart();
        Thread.Sleep(100);
        var elapsed = sw.Elapsed.TotalSeconds;
        var br = nic.GetIPv4Statistics().BytesReceived;

        var local = (br - lastBr) / elapsed;
        lastBr = br;

        // Keep last 20, ~2 seconds
        reads = new [] { local }.Concat(reads).Take(20);

        if (i % 10 == 0) { // ~1 second
            var bSec = reads.Sum() / reads.Count();
            var kbs = (bSec * 8) / 1024; 
            Console.WriteLine("Kb/s ~ " + kbs);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-19T18:45:47.743

请试试这个。检查互联网连接速度。

```
 public double CheckInternetSpeed()
 {
        // Create Object Of WebClient
        System.Net.WebClient wc = new System.Net.WebClient();

        //DateTime Variable To Store Download Start Time.
        DateTime dt1 = DateTime.Now;

        //Number Of Bytes Downloaded Are Stored In ‘data’
        byte[] data = wc.DownloadData("http://google.com");

        //DateTime Variable To Store Download End Time.
        DateTime dt2 = DateTime.Now;

        //To Calculate Speed in Kb Divide Value Of data by 1024 And Then by End Time Subtract Start Time To Know Download Per Second.
        return Math.Round((data.Length / 1024) / (dt2 - dt1).TotalSeconds, 2);            
    } 
```

它为您提供 Kb/Sec 的速度并分享结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T08:54:12.540

通过查看您在[NetworkInterface.GetIPv4Statistics().BytesReceived 中发布的问题的另一个答案 - 它返回什么？](https://stackoverflow.com/questions/13579530/networkinterface-getipv4statistics-bytesreceived-what-does-it-return)我相信问题可能是您使用的间隔很小。我相信计数器只计算整个包，例如，如果您正在下载一个文件，则包可能会变得像`64 KB`( , IPv4 max package size) 一样大，如果您的最大下载吞吐量是并且您正在测量间隔，那么`65,535 bytes`这是相当多的。`60 KB/s``200 ms`

鉴于您的速度是`60 KB/s`我会将运行时间设置为 10 秒，以平均获得至少 9 个包裹。如果您正在为各种连接编写它，我建议您使解决方案动态化，即如果速度很高，您可以轻松减少平均间隔，但在连接速度较慢的情况下，您必须增加平均间隔。

要么按照@pst 的建议进行移动平均，要么简单地将睡眠时间增加到 1 秒。

并且一定要除以实际花费的时间，而不是传递给 的时间`Thread.Sleep()`。

**关于间隔的额外思考**

我的过程是这样的，测量 5 秒并收集数据，即收到的字节数以及数据包的数量。

```
var timePerPacket = 5000 / nrOfPackets; // Time per package in ms
var intervalTime = Math.Max(d, Math.Pow(2,(Math.Log10(timePerPacket)))*100); 
```

这将导致间隔从大约几十毫秒缓慢增加到每个数据包的时间。这样，我们每个时间间隔总是至少（平均）获得一个包，如果我们使用 10 Gbps 连接，我们不会发疯。重要的是测量时间不应与接收的数据量成线性关系。

# iphone - UIView：以两倍大小绘制

> ID：13600605
> 
> 赞同：0
> 
> 时间：2012-11-28T08:14:00.357
> 
> 标签：iphone, cocoa-touch, uiview

我有一个带有动态生成的图形上下文的 UIView。它的正常大小是 100x100，但它可以放大到 200x200，所以我希望它的大小实际上是 200x200，以便看起来很好并且不会模糊，但是它显示出来。

如何始终在 drawRect 中将其绘制为 200x200，以 100 的大小或 200 的大小显示？如果我以 100x100 显示它，则传递给 drawRect 的矩形小于我需要绘制的区域。

我的代码：

```
 - (void) drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    // prevent the drawings to be flipped
    CGContextTranslateCTM(ctx, 0, rect.size.height);
    CGContextScaleCTM(ctx, 1.0, -1.0);

    CGContextDrawImage(ctx, CGRectMake(0, 0, rect.size.width, rect.size.height), [UIImage imageNamed:@"actionBg.png"].CGImage);

    // generate the overlay
    if ([self isActive] == NO && self.fullDelay != 0) { // TODO: remove fullDelay check!
        UIGraphicsBeginImageContextWithOptions(rect.size, NO, 0.0);
        CGContextRef overlayCtx = UIGraphicsGetCurrentContext();

        int segmentSize = (rect.size.height / [self fullDelay]);

        for (int i=0; i<[self fullDelay]; i++) {
            float alpha = 0.9 - (([self fullDelay] * 0.1) - (i * 0.1));
            [[UIColor colorWithRed:120.0/255.0 green:14.0/255.0 blue:14.0/255.0 alpha:alpha] setFill];

            if (currentDelay > i) {
                CGRect r = CGRectMake(0, i * segmentSize, rect.size.width, segmentSize);
                CGContextFillRect(overlayCtx, r);
            }
            [[UIColor colorWithRed:1 green:1 blue:1 alpha:0.3] setFill];
            CGRect line = CGRectMake(0, (i * segmentSize) + segmentSize - 1 , rect.size.width, 1);
            CGContextFillRect(overlayCtx, line);
        }

        UIImage *overlay = UIGraphicsGetImageFromCurrentImageContext();
        UIImage *overlayMasked = [TDUtilities maskImage:overlay withMask:[UIImage imageNamed:@"actionMask.png"]];

        // prevent the drawings to be flipped
        CGContextTranslateCTM(ctx, 0, rect.size.height);
        CGContextScaleCTM(ctx, 1.0, -1.0);

        // put the overlay
        CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
        CGContextDrawImage(ctx, rect, overlayMasked.CGImage);
        CGContextSetBlendMode(ctx, kCGBlendModeNormal);

        UIGraphicsEndImageContext();
    }

    // prevent the drawings to be flipped
    CGContextTranslateCTM(ctx, 0, rect.size.height);
    CGContextScaleCTM(ctx, 1.0, -1.0);

    // draw the delay symbol
    CGContextDrawImage(ctx, rect, [UIImage imageNamed:@"delaySymbol.png"].CGImage);

    CGContextSetAlpha(ctx, 0.8);
    // draw the symbol
    NSString *imgName = [K_ACTION_IMAGES objectAtIndex:[self actionType]];
    CGContextDrawImage(ctx, rect, [UIImage imageNamed:imgName].CGImage);

    CGContextSetAlpha(ctx, 1);

    // draw the delay number
    imgName = [NSString stringWithFormat:@"%d.png", [self fullDelay]];
    CGContextDrawImage(ctx, rect, [UIImage imageNamed:imgName].CGImage);

    // draw the priority number
    imgName = [NSString stringWithFormat:@"%d.png", [self actionType]];
    CGContextDrawImage(ctx, CGRectMake(32, 0, rect.size.width, rect.size.height), [UIImage imageNamed:imgName].CGImage);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:51:30.370

设置框架后，您是否为查看调用 setNeedsDisplay 方法

# xml - XSL 转换，输出为文本

> ID：13600607
> 
> 赞同：-1
> 
> 时间：2012-11-28T08:14:09.963
> 
> 标签：xml, xslt

```
Sample XSLT:

    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="no" omit-xml-declaration="yes" method="text" encoding="utf-8"/>
<xsl:strip-space elements="*"/>
<xsl:template match="main">
<xsl:value-of select="name"/>
SSN: <xsl:value-of select="ssn"/>
<xsl:text>
</xsl:text>
<xsl:value-of select="address1"/>
DOB: <xsl:value-of select="dob"/>
<xsl:text>
</xsl:text>
<xsl:value-of select="address2"/>
GENDER: <xsl:value-of select="gender"/>
EYE COLOR: <xsl:value-of select="eye"/>
HEIGHT: <xsl:value-of select="height"/>
HAIR COLOR: <xsl:value-of select="hair"/>
WEIGHT: <xsl:value-of select="weight"/>
</xsl:template>
</xsl:stylesheet>

Sample XML:

    <main>
<name>CHTP CLS DEBY</name>
<dob>1999-01-08</dob>
<ssn>18454512</ssn>
<address1>115 Z 88TH UL #226-F</address1>
<address2>ARVADA, CO 80004</address2>
<gender>M</gender>
<eye>Blue</eye>
<hair>Brown</hair>
<height>182</height>
<weight>69</weight>
</main> 
```

我想实现这样的目标，

```
CHTP CLS DEBY                              SSN: *****4512
115 Z 88TH UL #226-F                                 DOB: 1999-01-08
ARVADA, CO 80004                        

Gender:         M
Eye Color:      Blue                                   Height: 182        
Hair Color:     Brown                                  Weight: 69 
```

使用 XSL 转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:22:35.983

在 XSLT 1.0中没有通用的等价物，`printf("%-30s", something)`我使用的常用技巧是创建一个包含一长串空格的变量，然后获取适当长度的子字符串。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="no" omit-xml-declaration="yes" method="text" encoding="utf-8"/>
  <xsl:strip-space elements="*"/>

  <xsl:variable name="spaces"
    select="'                                                                   '"/>

  <xsl:template match="main">
    <xsl:call-template name="print-padded">
      <xsl:with-param name="str" select="name" />
      <xsl:with-param name="width" select="43" />
    </xsl:call-template>
    <xsl:text>SSN: </xsl:text>
    <xsl:value-of select="ssn" />
    <xsl:text>&#x0A;</xsl:text>

    <xsl:call-template name="print-padded">
      <xsl:with-param name="str" select="address1" />
      <xsl:with-param name="width" select="53" />
    </xsl:call-template>
    <xsl:text>DOB: </xsl:text>
    <xsl:value-of select="dob" />
    <xsl:text>&#x0A;</xsl:text>

    <!-- and so on for the other elements -->
  </xsl:template>

  <xsl:template name="print-padded">
    <xsl:param name="str" select="''" />
    <xsl:param name="width" select="0" />
    <xsl:value-of select="$str" />
    <xsl:value-of select="substring($spaces, 1, $width - string-length($str))" />
  </xsl:template>
</xsl:stylesheet> 
```

我更喜欢对换行符使用字符引用，因为这对于（意外或故意）重新格式化`.xsl`文件更加健壮。

编辑：我注意到您还试图混淆 SSN，您可以使用相同的技巧

```
<xsl:variable name="stars" select="'*******************'" />
<xsl:value-of select="substring($stars, 1, string-length(ssn) - 4)" />
<xsl:value-of select="substring(ssn, string-length(ssn) - 4)" /> 
```

# html - 伪类：用于自定义复选框之前仅适用于 webkit

> ID：13600614
> 
> 赞同：4
> 
> 时间：2012-11-28T08:15:03.150
> 
> 标签：html, css, checkbox

> **可能重复：**
> [“输入”元素之前的 CSS 内容生成](https://stackoverflow.com/questions/4574912/css-content-generation-before-input-elements)

我正在尝试仅使用 css 进行自定义复选框。这适用于基于 webkit 的浏览器（chrome、safari），但不适用于其他浏览器。

```
input[type=checkbox]:before {
  content:'';
  display:inline-block;
  width:24px;
  height:24px;
  margin-top:-8px;
  margin-left:-12px;
  background: url('../img/icons/checkbox_unchecked.png') left center no-repeat;
  border: 1px solid gray;
}
input[type=checkbox]:checked:before {
  background: url('../img/icons/checkbox_checked.png') left center no-repeat;
}​ 
```

为什么这只适用于基于 webkit 的浏览器？ [http://jsfiddle.net/jdB4a/](http://jsfiddle.net/jdB4a/)这里是jsfiddle，我只是把图片改成背景色，效果还是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:10:58.190

很抱歉，您无法使用 -webkit- 以外的任何浏览器实现此目的。最好的方法是在其中放置一个带有标签的跨度并将样式放置在其上并放置 opacity: 0; 在复选框上。听起来比它更复杂。无论如何，这里有一个演示链接，它解释了如何实现 css3 多浏览器自定义复选框，希望对您有所帮助。

[http://acidjs.wemakesites.net/imageless-css-3-custom-checkboxes-and-radio-buttons.html](http://acidjs.wemakesites.net/imageless-css-3-custom-checkboxes-and-radio-buttons.html)

# silverlight - 在 wp7 silverlight 中多次旋转同一图像

> ID：13600616
> 
> 赞同：0
> 
> 时间：2012-11-28T08:15:06.873
> 
> 标签：silverlight, windows-phone-7, animation, image-rotation

我使用这个函数来旋转我的图像：

```
 public void rotateMe(Image img, double duration, int degrees, double xPoint, double yPoint)
    {
        Duration Time_duration = new Duration(TimeSpan.FromSeconds(duration));
        Storyboard MyStory = new Storyboard();
        MyStory.Duration = Time_duration;

        DoubleAnimation My_Double = new DoubleAnimation();
        My_Double.Duration = Time_duration;
        MyStory.Children.Add(My_Double);

        RotateTransform MyTransform = new RotateTransform();
        Storyboard.SetTarget(My_Double, MyTransform);
        Storyboard.SetTargetProperty(My_Double, new PropertyPath("Angle"));

        My_Double.To = degrees;
        img.RenderTransform = MyTransform;
        img.RenderTransformOrigin = new System.Windows.Point(xPoint, yPoint);

        MyStory.Begin();

        MyStory.Completed += new EventHandler(MyStory_Completed);
    } 
```

问题是当我尝试再次向相反方向旋转时，它会旋转原始图像，而我想旋转新图像。

有任何想法吗？

# youtube-api - 如何从 webmatrix 网站的已知 id 获取 youtube 视频标题？

> ID：13600617
> 
> 赞同：-1
> 
> 时间：2012-11-28T08:15:16.890
> 
> 标签：youtube-api, webmatrix

我想在这里使用 YouTube atom 提要检索视频的标题：http: [//gdata.youtube.com/feeds/api/videos/uRTXEjjrOko](http://gdata.youtube.com/feeds/api/videos/uRTXEjjrOko)然后我想将此标题添加到我的数据库中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:28:05.310

Linq TO XML 是用于处理 XML 的推荐 API。你会得到这样的标题：

```
@using System.Xml.Linq;
@{
    var url = "http://gdata.youtube.com/feeds/api/videos/uRTXEjjrOko";
    var video = XDocument.Load(url);
    XNamespace media = video.Root.GetNamespaceOfPrefix("media");
    var title = video.Descendants(media + "title").First().Value;
} 
```

如果您想获得指向缩略图的链接，您可以这样做：

```
var thumbnail = video.Descendants(media + "thumbnail").First().Attribute("url").Value; 
```

实际上有 4 个缩略图链接。上面的代码只是抓住了第一个。一旦你提取了你想要的所有值，你就可以在方法中将它们与你的 SQL 一起使用`Database.Execute`。

# c# - WPF 初学者：绑定和模板

> ID：13600618
> 
> 赞同：0
> 
> 时间：2012-11-28T08:15:28.480
> 
> 标签：c#, wpf

我现在开始使用 wpf（来自 Windows 窗体），现在我想创建一个小工具来玩 wpf。我知道有绑定和模板，并且了解它们的作用，并且知道我必须填充 Window.DataContext 并且可以绑定到此，但是对于我的示例，我并没有把它们全部放在一起，也许有人可以帮助我，以便更好地理解这一点。

型号是

```
    类视图模型
    {
        public List'Bank ListOfBanks { get; 放; }
    }

    类银行
    {
        public List'Account ListOfAccounts { get; 放; }
    }

    类账户
    {
        公共字符串描述{get; 放; }
        公共十进制钱{得到; 放; }
    }

```

我想要做的是有一个（一些漂亮的蓝色）矩形的动态列表（Count = ListOfBanks 属性中的银行数），并且在这个 Rectangle 中应该是一个包含两列（Description 和 Money 属性）的网格，应该有就像银行模型的 ListOfAccounts 属性中有 Accounts 这样的行。

我所知道的是

```
    公共主窗口（）
    {
        初始化组件（）；

        this.DataContext = new ViewModel();
    }

```

我知道这并不多。而且我知道如何将网格列与帐户属性绑定，仅此而已。

如果有人可以帮助我，那就太好了。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:22:44.210

一种简单的方法是使用嵌套`ItemsCollection`：

```
<ItemsControl ItemsSource="{Binding ListOfBanks}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
        <StackPanel>
            <TextBlock Text="{Binding ListOfAccounts.Count,StringFormat='Number of Accounts: {0}'}" />
            <ItemsControl ItemsSource="{Binding ListOfAccounts}">
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding Description}" />
                        <TextBlock Grid.Column="1" Text="{Binding Money,StringFormat='{}{0:C}'}" />
                    </Grid>
                </DataTemplate>
            </ItemsControl>
        </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

ItemsControl 是一个基本的重复控件——如果你想要花里胡哨的使用`ListBox`（项目选择）或`DataGrid`（排序、分组、自动列等）。

# .net - WiX：无法从程序集中加载“ReadRegistry”任务 [...] 此程序集由比当前加载的运行时更新的运行时构建

> ID：13600619
> 
> 赞同：3
> 
> 时间：2012-11-28T08:15:31.413
> 
> 标签：.net, visual-studio, visual-studio-2008, wix

我使用 Visual Studio 2008 开发了一个针对 .NET Framework 3.5 版的应用程序。现在我想为使用 WiX 的应用程序创建一个安装程序。我安装了 WiX 工具包，然后在与我的项目相同的解决方案中创建了一个 WiX 项目。但是，由于某些版本依赖性问题（似乎），我什至无法构建由 Visual Studio 创建的空模板。

我对 WiX 真的很陌生，所以我只能推测其原因。我尝试在我的开发机器上重新安装框架（它是 v4，顺便说一句），但没有帮助。

完整的错误信息：

```
C:\Programme\MSBuild\Microsoft\WiX\v3.x\wix200x.targets(499,5): error MSB4062:
The "ReadRegistry" task could not be loaded from the assembly
C:\Programme\MSBuild\..\WiX Toolset v3.7\bin\WixTasks.dll.
Could not load file or assembly
'file:///C:\Programme\WiX Toolset v3.7\bin\WixTasks.dll'
or one of its dependencies. This assembly is built by a runtime newer than the
currently loaded runtime and cannot be loaded. Confirm that the <UsingTask>
declaration is correct, and that the assembly and all its dependencies are available. 
```

错误消息中的文件路径是正确的，所有这些文件都存在。根据我从消息中得到的信息，WiX 尝试加载的 dll 太新，无法用于我的安装程序，它使用的是旧（框架？）版本。该消息还指向一个`<UsingTask>`元素，但是我在相关文件的任何地方都找不到这样的元素......

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:17:35.050

这是 WiX v3.7 RC 中的一个已知错误，已在本周的版本 v3.7.1126.0 中修复。

# android - 从 Android 应用程序将照片发布到 Facebook，从 Android 图库拍摄的照片

> ID：13600623
> 
> 赞同：2
> 
> 时间：2012-11-28T08:16:07.737
> 
> 标签：android, facebook, post, image

我目前正在开发一个 Android 应用程序目标构建是 4.0 Ice-Cream Sandwich。

到目前为止，我可以使用以下代码在 Facebook 上发布普通文本：

```
public void postToWall() {

      // post on user's wall.

        facebook.dialog(this, "feed", new DialogListener() {

    @Override
    public void onFacebookError(FacebookError e) {
    }

    @Override
    public void onError(DialogError e) {
    }

    @Override
    public void onComplete(Bundle values) {
    }

    @Override
    public void onCancel() {
    }
        });

} 
```

但是，我无法将带有字幕的照片发布到 Facebook。我在网上搜索，我发现的代码之一是：

```
public void postToWall() {
        // post on user's wall.
        byte[] data = null;

        Bitmap bi = BitmapFactory.decodeFile(photoToPost);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();

        Bundle params = new Bundle();
        params.putString("method", "photos.upload");
        params.putByteArray("picture", data);

        AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
        mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null);

    } 
```

问题是，上面的代码不起作用，因为我不知道是什么：

1.*照片发布*

2\. *mAsyncRunner* .request 不断给我一个错误，指出我不能输入“null”，因为这是一个无效的论点

3\. *SampleUploadListener*，据说来自 FacebookSDK 不能正常工作（我不断收到创建类的错误）

这里有更简单的代码吗？或者有人可以向我解释我遇到的错误。

到目前为止，我正在使用“On Click”将普通文本发布到 Facebook 上，它指向这种方法。我的目标是将带有标题的照片上传到 Facebook。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:29:08.143

1-这是您将发送到墙上的照片，它可以是来自您的 SD 卡或其他任何地方的图像

2-这是来自 Facebook SDK 的一个类，它接受 facebook 对象（你之前创建的一个）

3-这又是来自 Facebook SDK 的一个类

您的 Facebook SDK 似乎有问题尝试使用右键单击项目 >> 属性 >> Android 再次设置它并查看库是否存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:23:19.390

请参阅此[链接](http://w2davids.wordpress.com/android-facebook-integration/)。这将向您展示如何在 Facebook 墙上发布图像以及如何在墙上发布文本。

它很好学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:31:09.853

问题在于以下行

```
mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null); 
```

您将 null 作为图形路径传递，这应该是这样的 = "me/feed"

**更新** 写这行代码

```
mAsyncRunner.request("me/feed", params, "POST", new SampleUploadListener(), null); 
```

那么它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:45:50.380

```
public class CardShared extends Activity{

public static final String APP_ID = "YOUR APP ID";
private Facebook mFacebook;
private AsyncFacebookRunner mAsyncRunner ;
boolean isLoggedIn = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   // setContentView(R.layout.main);
    mFacebook = new Facebook(APP_ID);
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);

    //Implementing SSO
    mFacebook.authorize(this, new String[]{"publish_stream"}, new DialogListener(){

        public void onComplete(Bundle values) {

            sharePicture(values.getString(Facebook.TOKEN));
            Toast.makeText(getApplicationContext(), "Picture Shared Successfully", Toast.LENGTH_SHORT).show();
            CardShared.this.finish();
        }

        public void onFacebookError(FacebookError e) {
            Log.d("FACEBOOK ERROR","FB ERROR. MSG: "+e.getMessage()+", CAUSE: "+e.getCause());
        }

        public void onError(DialogError e) {
            Log.e("ERROR","AUTH ERROR. MSG: "+e.getMessage()+", CAUSE: "+e.getCause());
        }

        public void onCancel() {
            Log.d("CANCELLED","AUTH CANCELLED");
        }
    });
}

//updating Status
public void sharePicture(String accessToken){

    byte[] data = null;
    try {
        Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.image_to_be_uploaded);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        image.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();

        Bundle params = new Bundle();
        params.putString("method", "photos.upload");
        params
                .putString(Facebook.TOKEN, mFacebook
                        .getAccessToken());
        params.putByteArray("picture", data);
        mAsyncRunner.request(null, params, "POST",
                new SampleUploadListener(), null);

    } catch (Exception e) {
        e.printStackTrace();
    }

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    Log.d("onActivityResult","onActivityResult");
    mFacebook.authorizeCallback(requestCode, resultCode, data);
}
public class SampleUploadListener extends BaseRequestListener {

    public void onComplete(final String response, final Object state) {
        try {

            Log.d("Facebook-Example", "Response: " + response.toString());
            JSONObject json = Util.parseJson(response);
            final String f = json.getString("src");

        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }
    }
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T13:40:55.460

像这样放

```
mAsyncRunner.request("me/feed", params, "POST", new SampleUploadListener()) 
```

# java - 在 Terracotta 集群上创建两个不同的缓存时出现 NullPointerException

> ID：13600626
> 
> 赞同：0
> 
> 时间：2012-11-28T08:16:16.377
> 
> 标签：java, nullpointerexception, ehcache

我目前正在使用 EhCache 的企业版在我们的应用程序中实现缓存。正如[这里](http://ehcache.org/documentation/recipes/programmatic)所解释的，我通过在我用来管理 EhCache 创建的 EhCache 类中使用以下构造函数以编程方式创建两个不同的缓存实例：

```
public class EhCache implements ICacheAccess {    

    private String name;
    private Cache ehCache;
    private CacheAttributes attrs;

    public EhCache(final String name, final CacheAttributes attrs) {
                this.name = name;
                this.attrs = attrs;

                Configuration configuration = new Configuration();

                TerracottaClientConfiguration terracottaConfig 
                    = new TerracottaClientConfiguration();

                configuration.addTerracottaConfig(terracottaConfig);

                final CacheConfiguration cfg = new CacheConfiguration(name, attrs.cacheSize)          
                    .eternal(attrs.eternal).terracotta(new TerracottaConfiguration())
                    .timeToLiveSeconds(attrs.timeToLiveSeconds)
                    .timeToIdleSeconds(attrs.timeToIdleSeconds)
                    .statistics(attrs.statistics).overflowToOffHeap(true).maxBytesLocalOffHeap(200,MemoryUnit.MEGABYTES);

                configuration.addCache(cfg);    

                CacheConfiguration defaultCache = new CacheConfiguration("default",
                        1000).eternal(false);
                configuration.addDefaultCache(defaultCache);

                CacheManager mgr = CacheManager.create(configuration);        
                ehCache = mgr.getCache(name);        
                LOGGER.log("ehcache is "+ehCache);           
            } 
} 
```

然后我使用以下方法创建我的 EhCache 类的两个实例：

```
public void testCreateCache(String name) {
        CacheAttributes attrs = new CacheAttributes();        
                attrs.timeToIdleSeconds = 0;
                attrs.timeToLiveSeconds = 0;

        Cache cache = new EhCache(name, attrs);
    } 
```

我在 main 方法中调用了上述方法两次：

```
testCreateCache("cache1");
testCreateCache("cache2"); 
```

缓存 1 创建成功，但缓存 2 为空。

如果我交换创建缓存的顺序：

```
 testCreateCache("cache2");
 testCreateCache("cache1"); 
```

缓存 2 已成功创建，但缓存 1 为空。

我无法理解为什么会发生这种情况。第一个缓存创建成功，但第二个缓存始终为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:30:03.627

我认为您的问题是您调用 CacheManager.create() 两次，因为 CacheManager 是单例。将两个缓存都添加到配置对象后，尝试调用一次。

# php - 具有重新计数和禁用按钮功能的 Textarea-N

> ID：13600629
> 
> 赞同：0
> 
> 时间：2012-11-28T08:16:23.760
> 
> 标签：php, javascript, jquery, textarea

JS

```
$(document).ready(function(){

    $('.comment').bind("blur focus keydown keypress keyup", function(){recountss();});
    $('input.comment_button').attr('disabled','disabled');

    $('#form').submit(function(e){
        tweet();
    });

});

function recountss()
{
    var maxlen=280;
    var current = maxlen-$('.comment').val().length;
    $('.counters').html(current);

    if(current<0 || current==maxlen)
    {
        $('.counters').css('color','#D40D12');
                 $('input.comment_button').attr('disabled','disabled').addClass('inact');
    }
    else if (!$.trim($(".comment").val())) 
    {
            $('input.comment_button').attr('disabled','disabled').addClass('inact');
    }
    else
            $('input.comment_button').removeAttr('disabled').removeClass('inact');

    if(current<10)
    {
        $('.counters').css('color','#D40D12');

    } 
    else if(current<20)
    {
        $('.counters').css('color','#5C0002');
    }
    else
    {
        $('.counters').css('color','#C0C0C0');
    } 
```

* * *

HTML

```
<form method="post" action="" id="form">
<textarea name="comment" class="comment" id="ctextarea<?php echo $msg_id;?>" ></textarea>
<input type="hidden" name="uid" id="uid" value="<?php echo $uid; ?>"/>
<div class="p"></div>
    <input type="submit"  value="Comment"  id="<?php echo $msg_id;?>" class="comment_button"/>
    <span class="counters">
        280
    </span>
</form> 
```

我使用jquery。我有超过 1 个文本区域，如果我输入 textarea-1，它可以工作，如果没有任何文本，按钮禁用，并且重新计算工作良好。

但是如果我输入textarea-2、textarea-3、textarea-N，就不行了。那么我该怎么做才能使所有作品？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:07:49.973

如果每个元素`<textarea>`都有自己的`maxlen=280`，最好从 using `class`-更改`$('.comment')`为`id`- `$('#ctextarea-'+i)`on all elements - `<textarea>`, `<button>`,`<span>`等。

这是未经测试的，但应该可以帮助您指出正确的方向。

```
$(document).ready(function(){

    var i=1;
    var numtextarea = 1; 
    $('#form').find('textarea').each(function(){numtextarea++;} //find number of <textarea>'s
    while(i<numtextarea){ // loop through each <textarea>
    $('#ctextarea-'+i).bind("blur focus keydown keypress keyup", function(){recountss(i);});
    $('#comment_button-'i).attr('disabled','disabled'); 
    }
    });
    $('#form').submit(function(e){
        tweet();
    });
});

    function recountss(i)
    {
        var maxlen=280;
        var current = maxlen-$('#ctextarea-'+i).val().length;
        $('#counters-'+i).html(current);
        if(current<0 || current==maxlen)
        {
            $('#counters-'+i).css('color','#D40D12');
            $('#comment_button-'+i).attr('disabled','disabled').addClass('inact');
        }
        else if (!$.trim($("#ctextarea-'+i).val())) {
            $('#comment_button-'+i).attr('disabled','disabled').addClass('inact');
        }
        else
            $('#comment_button-'+i).removeAttr('disabled').removeClass('inact');

        if(current<10)
            $('#counters-'+i).css('color','#D40D12');

        else if(current<20)
            $('#counters-'+i).css('color','#5C0002');

        else
            $('#counters-'+i).css('color','#C0C0C0');
    } 
```

你的表格应该看起来像 -

```
<form method="post" action="" id="form">

<textarea name="comment" class="comment" id="ctextarea-1" ></textarea>
<input type="hidden" name="uid" id="uid" value="1"/>
<div class="p"></div>
<input type="submit"  value="Comment"  id="comment_button-1" class="comment_button"/>
<span id="counters-1">
    280
</span>

<textarea name="comment" class="comment" id="ctextarea-2" ></textarea>
<input type="hidden" name="uid" id="uid" value="2"/>
<div class="p"></div>
<input type="submit"  value="Comment"  id="comment_button-2" class="comment_button"/>
<span id="counters-2">
    280
</span>

...

<textarea name="comment" class="comment" id="ctextarea-N" ></textarea>
<input type="hidden" name="uid" id="uid" value="N"/>
<div class="p"></div>
<input type="submit"  value="Comment"  id="comment_button-N" class="comment_button"/>
<span id="counters-N">
    280
</span>

</form> 
```

# iphone - 在 ViewController.m 中，self.username 和 _username 有什么区别

> ID：13600636
> 
> 赞同：-4
> 
> 时间：2012-11-28T08:16:53.497
> 
> 标签：iphone, objective-c, ios, object-code

```
@synthesize username = _username;
//Method1
    - (void) viewDidLoad
{
self.username = @"admin";
}

//Method2
- (void) viewDidLoad
{
   _username = @"admin"
} 
```

两者都有效，有什么区别？
我可以使用 _username 吗？当我使用 self.username 时，它​​将转到 @synthesize 用户名；
self.username 是一个方法吗？<br/> _username 只是一个变量？
我用几种方法写了_username。它也可以在视图中工作。self.username 是否比 _username 快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:47:29.913

将`self.username`调用设置器，`username`这就是断点跳转到`synthesize`语句的原因。

当您使用 _variable 时，可以使用 _variable 访问该属性。在你的情况下：

`self.username`将值存储到 ivar`_username`并且`_username = @"admin";`还将值存储到`_username`ivar。表示两者都保存到相同的 ivar `_username`。

> 清单 4-2 使用 @synthesize 您可以使用 property=ivar 的形式来指示应该为属性使用特定的实例变量，例如：
> 
> @synthesize firstName, lastName, age=yearsOld;
> 
> 这指定了 firstName、lastName 和 age 的访问器方法应该被合成，并且属性 age 由实例变量 yearsOld 表示。合成方法的其他方面由可选属性决定

请参考[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:39:55.683

我建议您阅读[苹果文档 - Declared Properties](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html)。`self.username`相当于其他语言的getter和setter方法。只是关于这一点的几件事。在 ARC 之前，它用于帮助确保遵循内存管理部分（处理保留、释放、参数的副本）。`_username`多用于`init`不建议使用`self.param`in`init`和等方法时`dealloc`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:31:55.413

self.username 与 _username 之间的区别。

self.username 使用访问器（setter 和 getter）。他们调用方法，并在方法中访问 ivar。

_username 直接使用 ivar。没有方法调用，所以这可能会节省一些开销。

self.username 使您的类符合 KVO，而 _username 绕过它。

# jquery - 如何乘以输入变量？

> ID：13600641
> 
> 赞同：0
> 
> 时间：2012-11-28T08:17:09.157
> 
> 标签：jquery, variables

如何使用 Javascript 将输入的数字相乘？

这是一个完全的初学者问题——你是一个乐于助人的好人。

html

```
<input type="number" id="height" value="0" /> 
```

javascript

```
$(document).ready(function() {

    function display_height() {
        var new_height = $("#height").val() * 3);
        $("new_height").show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:23:03.177

字符串上没有`show`方法。尝试提醒您的身高：

```
$(document).ready(function() {

    function display_height() {
        var new_height = $("#height").val() * 3;
        alert(new_height);
    }
    display_height();
}); 
```

此外，您还有一些小问题，例如不匹配的括号和大括号，我已更正了这些问题。

我怀疑你真正想要的是让用户能够增加输入，在这种情况下你需要一个按钮：

```
<input id="multiply" type="button" value="Multiply!"> 
```

和一个点击处理程序：

```
$('#multiply').click(display_height); 
```

你可以在这里看到一个演示：http: [//jsfiddle.net/4wgaE/1/](http://jsfiddle.net/4wgaE/1/)

要将字符串解析为数字，请`parseFloat`像这样使用：

```
var new_height = parseFloat( $("#height").val() ) * 3; 
```

# asp.net - 带有单个可选参数的 ASP.NET MVC 路由，例如 site.com/optionalparameter

> ID：13600645
> 
> 赞同：1
> 
> 时间：2012-11-28T08:17:16.410
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-routing

我一直在为需要支持的网站测试一些替代方案，例如

```
site.com
site.com/Controller/Action/id
site.com/various.aspx
site.com/optionalparameter  <-- these two go to the same controller
site.com/optionalparameter/ <-- these two go to the same controller 
```

我实际上需要验证可选参数是否可以接受，但我可以将它定向到将验证它的控制器。到目前为止，其他规则似乎都有效，但我还不能让单个可选参数正常工作。

url 中的可选参数可以带或不带斜杠“/”（至少不带）。我发现了类似的问题，但它们似乎有“optionalParam/xx/yy”，因此规则有更多参数并且它们似乎工作正常，但这是将非 mvc 站点转换为使用 MVC 路由的一种特殊情况.

我正在尝试做但不起作用的示例。

```
routes.MapRoute(
    "optionalParamRoute", 
    "{name}",
    new { controller = "Home", action = "Index", name = "" }
); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:55:17.900

尝试移动到您的 optionalParamRoute 参数的顶部：

```
routes.MapRoute(
    "optionalParamRoute", 
    "{name}",
    new { controller = "Home", action = "Index", name = "" }
);

// other routes 
```

# linux - Eclipse CWT 崩溃并显示灰色窗口

> ID：13600646
> 
> 赞同：3
> 
> 时间：2012-11-28T08:17:18.313
> 
> 标签：linux, eclipse, opencv, crash

我正在为大学编写一个 OpenCV 程序，但在使用 Eclipse 时遇到了一些麻烦。

我正在使用 Eclipse Juno 运行 64 位 Linux Mint (13)。[我使用本指南](http://www.samontab.com/web/2012/06/installing-opencv-2-4-1-ubuntu-12-04-lts/)安装了 OpenCV ，但我安装了 2.4.3 版。由于我在 MacOS 上的合作伙伴与我共享的项目不起作用，我创建了一个普通的 C++ 项目。我在构建设置中添加了所需的信息，如下所示：

```
Cross GCC Compiler -> -I -> "/usr/local/include/opencv" and "/usr/local/include/opencv2"
Cross G++ Linker -> Libraries -> -I -> "cv" and "highui"
                              -> -L -> "/usr/local/lib" 
```

这是我正在使用的代码。对，它什么都不做：

```
#include <iostream>

#include <opencv2/opencv.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main(int argc, char** argv) {

    return 0;
} 
```

所以，每次我运行它时，我都会得到一个丑陋的灰色窗口，就像一个消息窗口一样，但里面什么都没有。这与包含代码的实际程序相同，因此与 OpenCV 命令无关。有时，这个窗口会随着 Eclipse 的终止而消失，然后没有响应。有时，它甚至可以幸存下来，我必须开始一个新的 X 会话。

这是它的样子：

![](../Images/43c7926a31ff320171d0568f33f15ee9.png)

您可以看到的错误消息与崩溃本身无关，但之前已显示。有时它只是说“找不到二进制文件”，这些消息来自。它以某种方式找不到库。

这是 pkg-config --libs opencv

```
/usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so 
/usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so 
/usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so 
/usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so 
/usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so 
/usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so 
/usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so 
/usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so 
/usr/local/lib/libopencv_videostab.so 
```

这是 pkg-config --cflags opencv

```
-I/usr/local/include/opencv -I/usr/local/include 
```

我猜它必须与我的 OpenCV/CWT 设置有关。由于我尝试了很多变化，有人知道我做错了什么吗？

# ios - 将指南针的航向计算到特定坐标而不是北

> ID：13600648
> 
> 赞同：4
> 
> 时间：2012-11-28T08:17:28.000
> 
> 标签：ios, algorithm, geolocation, ios6, mapkit

我无法正确使用此算法。我正在尝试制作一个指向某个位置的指南针，而不仅仅是指向，比如说，北方。出了点问题。我花了很多时间试图弄清楚这一点，但我就是找不到。有任何想法吗？

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading{

double distanceEast = (location.longitude > 0 && otherLocation.longitude < 0) ? 180 - location.longitude + otherLocation.longitude - -180: otherLocation.longitude - location.longitude;

    if (distanceEast < 0) {
        distanceEast += 360;
    }

    double distanceWest = (location.longitude < 0 && otherLocation.longitude > 0) ? -180 - location.longitude - 180 - otherLocation.longitude : location.longitude - otherLocation.longitude;

    if (distanceWest < 0) {
        distanceWest += 360;
    }

    float latitudinalDifference = (otherLocation.latitude - location.latitude);
    float longitudinalDifference = fmin(distanceEast,distanceWest);

    float arcTan = atan(longitudinalDifference / latitudinalDifference);

        float oldRadian = (-manager.heading.trueHeading *M_PI /180.0f)+arcTan+M_PI;
        float newRadian = (-newHeading.trueHeading *M_PI /180.0f)+arcTan+M_PI;

        CABasicAnimation *animation;
        animation=[CABasicAnimation animationWithKeyPath:@"transform.rotation"];
        animation.fromValue = [NSNumber numberWithFloat:oldRadian];
        animation.toValue = [NSNumber numberWithFloat:newRadian];
        animation.duration = 0.5f;
        directionsArrow.layer.anchorPoint = CGPointMake(0.5, 0.5);

        [directionsArrow.layer addAnimation:animation forKey:@"rotationCompass"];
        directionsArrow.transform = CGAffineTransformMakeRotation(newRadian);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:30:18.410

```
double lon = location.longitude - otherLocation.longitude;
double y = sin(lon) * cos(otherLocation.latitude);
double x = cos(location.latitude) * sin(otherLocation.latitude) - sin(location.latitude) * cos(otherLocation.latitude) * cos(lon);
double angle = atan2(y, x); 
```

`angle`是两个位置之间的方位角。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:25:56.793

[*位置感知编程指南*](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html#//apple_ref/doc/uid/TP40009497-CH3-SW6)[中的“地图坐标系”](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html#//apple_ref/doc/uid/TP40009497-CH3-SW6)说：“具体而言，在墨卡托地图投影上，在地图上任意两点之间绘制的直线会产生可用于地球表面实际导航的航向。 ” 这让我认为您应该将地图坐标转换为地图点 ( `MKMapPointForCoordinate`) 并调用`atan`地图点之间的差异。（实际上，您可能应该使用`atan2`，而不是`atan`。）您尝试过吗？

# c# - mvc4 web api - 将 uint/int/enum 视为 long，float/double 视为 double

> ID：13600649
> 
> 赞同：1
> 
> 时间：2012-11-28T08:17:29.930
> 
> 标签：c#, asp.net-mvc, json, asp.net-web-api

我的任务是使用 ASP.NET MVC4 Web API 创建 RESTfull 服务。其中一种服务方法如下所示：

```
[HttpPost]
public HttpResponseMessage TagAdd([FromBody] Tag tag)
{
   HttpResponseMessage result;
   Tag tmpTag = new Tag();
   tmpTag.Name = tag.Name;
   tmpTag.DataType = tag.DataType;
 } 
```

**这里的标签看起来像这样：**

```
public class Tag : Dictionary<Tag.Property, object>
{
public enum Property : int
{
    Name = 0,
    DataType
}
public enum NativeDataType : int
{
    Undefined = 0,
    Scaled,
    Float,
}
public string Name
{
    get
    {
        object value;
        return TryGetValue(Property.Name, out value) ? (string)value : null;
    }
    set
    {
        this[Property.Name] = value;
    }
}
public NativeDataType DataType
{
    get
    {
        object value;
        return TryGetValue(Property.DataType, out value) ? (NativeDataType)(value) : NativeDataType.Undefined;
    }
    set
    {
        this[Property.DataType] = value;
    }
} 
```

}

**这里当前的问题是**，当我发送以下 JSON 请求时，枚举 NativeDataType 正在处理： {"Name":"ABCD","DataType":2}

不幸的是，标记类是在另一个程序集中定义的。正因为如此

tmpTag.DataType = tag.DataType; 由于跨界问题导致异常（无效转换）的语句。

1.  如何解决这个问题？
2.  为什么 enum 的处理时间一样长？即使我观察到 uint，int，long，enum 被视为 long 和 float，double 在调用堆栈中被视为 double。
3.  我可以得到如下的准确值

    对象值 = 空；tag.TryGetValue(Tag.Property.DataType, out value); tmpTag.DataType = Convert.ToInt32(值);

但是，而不是逐个访问 Tag 元素并将它们转换为精确类型，有没有最简单的方法可以自动转换并发送到另一个程序集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:00:36.273

除了转换它，你可以做一个简单的演员吗？此外，从 int 继承应该默认为 INT32，但由于某种原因，您会得到 int64（长）。尝试显式地从 int32 继承。

# kineticjs - 调整 Kinetic.Group() 的大小

> ID：13600653
> 
> 赞同：0
> 
> 时间：2012-11-28T08:18:06.990
> 
> 标签：kineticjs

我创建了一个 Kinetic.Group()。我已经向组中添加了一些图像。

```
 var TestGroup = Kinetic.Group();
    TestGroup.add(SomeImage);
    TestGroup.add(SomeOtherImage); 
```

现在我想重新调整整个组的大小。我尝试使用

```
 TestGroup.setSize(100,100); 
```

但它不起作用。任何人都可以帮助解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:22:59.157

我认为 Jonke 是正确的 - 尝试使用：

```
TestGroup.setScale(1.5, 1.5); 
```

如果您希望组内的对象明显变大，然后重绘。

如果您只想调整组的大小，这并不一定意味着它应该显示任何可见的变化。

# php - 查找相同的表行

> ID：13600655
> 
> 赞同：1
> 
> 时间：2012-11-28T08:18:12.933
> 
> 标签：php, mysql, sql

在购买表中。当客户购买同一本书时，将 1 行添加到表中。所以当在购买页面看到购买清单时，它是这样的：

```
buy1 price1 downloadlink1
buy1 price1 downloadlink1
buy1 price1 downloadlink1
buy2 price2 downloadlink2
buy2 price2 downloadlink2
buy2 price2 downloadlink2 
```

但我想在同一行价格和下载链接删除，只有第一行显示这个值是这样的：

```
buy1 price1 downloadlink1
buy1 
buy1 
buy2 price2 downloadlink2
buy2 
buy2 
```

我怎样才能使用sql查询？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:33:44.990

好吧，如果它是 MS SQL 服务器，我可以建议使用`row_number over()` 但是在你的情况下，我可以建议试试这个（我想你的表中有一些 id）

```
select
    A.sub,
    case when A.frst = 1 then A.user else null end as user,
    case when A.frst = 1 then A.versionid else null end as versionid,
    case when A.frst = 1 then A.hard else null end as hard,
    case when A.frst = 1 then A.active else null end as active,
    case when A.frst = 1 then A.res else null end as res
from
(
    select
        *,
        case
            when exists
            (
                select * 
                from buy as tt
                where
                    tt.sub = t.sub and tt.res = t.res and
                    tt.user = t.user and tt.versionid = t.versionid and
                    tt.hard = t.hard and tt.active = t.active and
                    tt.id < t.id
            ) then 0
            else 1
        end as frst
    from buy as t
) as A
order by A.sub, A.frst desc 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!2/359fe/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:23:59.107

`distinct`在执行下载链接时在 sql 查询中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:24:32.553

> 如果该用户未将特定项目添加到表中，则将行添加到表中
> 
> 如果该项目已经存在（使用项目 ID 和用户 ID 检查）更新表

# rest - 在钛移动应用程序代码中调用 web 服务总是返回状态码为 0 的响应

> ID：13600658
> 
> 赞同：2
> 
> 时间：2012-11-28T08:18:17.613
> 
> 标签：rest, mobile, titanium, httpclient, titanium-mobile

我是钛加速器家族的新手。另外我不确定之前是否有人发布过同样的问题。没找到所以贴在这里。

我正在开发一个移动应用程序。在我的应用程序中，我试图调用一个托管在本地环境中的 Web 服务，但它总是返回状态码为 0 的响应和错误消息“无法访问主机”。所以我认为我部署在远程位置的 Web 服务应该有问题。因此，我尝试调用其他一些网络服务，如 twitter，但它是相同的.. :( 在调用 twitter 网络服务时它也给了我一个错误。

我还检查了跨域策略问题。因此，我也尝试在服务器上为 Web 服务设置规则，但没有成功。以下是我正在使用的代码片段和环境详细信息。

1.  **应用类型：**手机
2.  **钛 SDK：** 2.1.4 GA
3.  **设备：**网络浏览器
4.  **主机操作系统：** Windows 7
5.  **钛工作室：**钛工作室，构建：2.1.2.201208301612

我正在调用的示例 Web 服务的文件位于以下位置：

1.  **http://db.tt/XoSCujux** (api.php)
2.  **http://db.tt/bJG2A5XT** (Rest.inc.php)
3.  **http://db.tt/Hxt6Oojx** (.htaccess)

**代码：**

```
//declare the http client object
            var xhr = Titanium.Network.createHTTPClient();

            //this method will process the remote data
            xhr.onload = function() { 
                //check to see if we are refreshing the data via our 
                //pull and release mechanism

                //create a json object using the JSON.PARSE function
                result = JSON.parse(this.responseText);

                Ti.API.info(result);
                console.log(result);

                var msgTitle = "data:";
                var msgText = result;
                var alertBox = Ti.UI.createAlertDialog({
                            title: msgTitle,
                            message: msgText
                        });
                alertBox.show();    
            };  

            //this method will fire if there's an error in accessing the remote data
            xhr.onerror = function(e) {  
                //log the error to our titanium developer console 
                Ti.API.error(this.status + ' - ' + this.statusText);
                console.log(this.status + ' - ' + this.statusText); 

                var msgTitle = "Error : " + this.status;
                var msgText = "Error Text : " + this.statusText;
                var alertBox = Ti.UI.createAlertDialog({
                            title: msgTitle,
                            message: msgText
                        });
                alertBox.show();    

                 Ti.API.debug("STATUS: " + this.status);
                    Ti.API.debug("TEXT:   " + this.responseText);
                    Ti.API.debug("ERROR:  " + e.error);
                    alert('There was an error retrieving the remote data. Try again.' +  e.error);
            };  

            //open up the recipes xml feed
            xhr.open("POST", "http://127.0.0.1/rest_example/api.php?rquest=locations");

            //finally, execute the call to the remote feed
            xhr.send(); 
```

任何帮助将非常感激。

# netty - netty 4中没有UDP管道

> ID：13600662
> 
> 赞同：2
> 
> 时间：2012-11-28T08:18:39.207
> 
> 标签：netty

嗨，我正在使用 netty 4 示例（qotm）创建一个使用“引导程序”的 UDP 服务器。此类不允许处理程序的管道。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T05:56:29.763

您可以指定`ChannelInitializer`for `Bootstrap.handler(..)`，就像在管道中具有多个处理程序的其他示例一样。

请记住，UDP 是无连接的，因此 UDP 通道使用*单个*管道处理来自多个远程主机的所有数据包。要为不同的协议设置不同的管道，您必须创建多个 UDP 通道并将它们绑定到不同的端口，就像您在 Netty 3 中所做的那样。

# android - 如何通过套接字（多个设备）查询另一个android设备的数据库

> ID：13600664
> 
> 赞同：0
> 
> 时间：2012-11-28T08:18:51.173
> 
> 标签：android, database, sockets, serversocket

我通常是 android 编程的新手，虽然我还没有看到这个问题的答案：我很清楚使用 wi-fi 在两个或多个 android 设备之间创建连接的必要性。就 serversocket 和 serverclient 而言，我很好奇是否有人可以提示我如何访问和查询 android 设备中的 sqlite 数据库，以便在每个设备中的两个数据库之间进行通信。同样对于服务器端，如果我希望它能够与客户端的数据库进行通信，我将如何去做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:11:46.790

检查[这个](http://www.java2s.com/Code/Android/Database/extendsSQLiteOpenHelper.htm)和[这里](https://stackoverflow.com/questions/3548533/full-android-database-helper-class-for-existing-sqlite-database)的数据库。

为了从 android 设备与服务器通信，最好使用带有 JSON 作为数据的 Restful webservice。 [这](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/) [可能](http://p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/) 会帮助你[。](https://stackoverflow.com/questions/3197335/restful-api-service)还有[这个](http://www.josecgomez.com/2010/04/30/android-accessing-restfull-web-services-using-json/)

# java - OutputSteam.write(int) 仅将 1 个字节写入文件？

> ID：13600667
> 
> 赞同：2
> 
> 时间：2012-11-28T08:19:08.540
> 
> 标签：java, io

您好，我有以下代码：

```
int i=12345;
DataOutputStream dos=new DataOutputStream(new FileOutputStream("Raw.txt"));
dos.write(i);
dos.close();
System.out.println(new File("Raw.txt").length()); 
```

文件大小报告为 1 个字节。为什么整数长度为 4 字节时不是 4 字节？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T08:20:09.357

因为你只写了一个字节给它。请参阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#write%28int%29)以了解`DataOutputStream.write(int).`它写的`byte,`不是`int.`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T08:20:53.727

虽然该[`DataOutputStream.write`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#write%28int%29)方法接受一个`int`参数，但它实际上只写入该参数的低 8 位。所以你实际上只写了一个字节......因此文件是一个字节长。

如果你想写整个`int`你应该使用该`writeInt(int)`方法。

* * *

这种奇怪的根本原因是（我相信）该`write(int)`方法被定义为与该方法一致，`OutputStream.write(int)`而该方法又被定义为与 一致`InputStream.read()`。 `InputStream.read()`读取 a`byte`并将其作为`int`... 返回，其值`-1`用于指示流结束条件。

# android - 向 Toast 显示查询

> ID：13600673
> 
> 赞同：1
> 
> 时间：2012-11-28T08:19:40.283
> 
> 标签：android, sqlite, android-listview

我尝试从我的数据库中选择与在我的列表视图中单击的项目匹配的特定字段，当我运行应用程序并单击应用程序崩溃的任何项目时，我的代码有什么问题？

这是来自 logcat 的错误

```
11-28 16:08:50.168: E/AndroidRuntime(27284): FATAL EXCEPTION: main
11-28 16:08:50.168: E/AndroidRuntime(27284): android.database.sqlite.SQLiteException: near "General": syntax error: , while compiling: SELECT Region,City,Address,Contact FROM tblHospitals WHERE HospitalName = Bernardino General Hospital
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at com.dr.droid.lee.Health.onListItemClick(Health.java:54)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.app.ListActivity$2.onItemClick(ListActivity.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.widget.AbsListView.performItemClick(AbsListView.java:1071)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2527)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.widget.AbsListView$1.run(AbsListView.java:3181)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.os.Handler.handleCallback(Handler.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.os.Handler.dispatchMessage(Handler.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.os.Looper.loop(Looper.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at android.app.ActivityThread.main(ActivityThread.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at java.lang.reflect.Method.invokeNative(Native Method)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at java.lang.reflect.Method.invoke(Method.java:511)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
11-28 16:08:50.168: E/AndroidRuntime(27284):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的课程文件

```
public class Health extends ListActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.health);
        displayHospitals();
        }

    public void displayHospitals (){
        final ListView lv = getListView();
        DbHelper tblHL = new DbHelper(this);
        tblHL.open();
        ArrayList<String> result = tblHL.getHData();
        result = tblHL.getHData();
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, result));
        lv.setTextFilterEnabled(true);

         tblHL.close();
         }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String hosp = (String)getListAdapter().getItem(position);
        String quer = "SELECT Region,City,Address,Contact FROM tblHospitals WHERE HospitalName = " +hosp ;
        SQLiteDatabase mydb = openOrCreateDatabase("dbDrDroid", MODE_PRIVATE, null);
        Cursor c = mydb.rawQuery(quer, null);
        c.moveToFirst();
        Toast.makeText(this, c.toString(), Toast.LENGTH_SHORT).show();
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:29:44.547

您必须更改以下行

```
String quer = "SELECT Region,City,Address,Contact FROM tblHospitals WHERE HospitalName = '" +hosp+"'" ; 
```

因为`HospitalName`是文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:26:50.357

我认为您需要这样做以确保您的查询正确处理医院名称中的空格：

```
String quer = "SELECT Region,City,Address,Contact FROM tblHospitals WHERE HospitalName = \"" +hosp + "\""; 
```

# android - 如何在Android中使用解锁事件调用服务？

> ID：13600677
> 
> 赞同：0
> 
> 时间：2012-11-28T08:19:57.117
> 
> 标签：android, service, unlock

我喜欢在用户解锁手机时让应用程序启动服务。当我开始解锁手机时，什么也没有发生，当我登录应用程序时（登录后它将运行ThirdActivity.java），应用程序被强制停止。错误日志显示如下：

```
11-28 14:28:52.846: E/AndroidRuntime(6439): FATAL EXCEPTION: main
11-28 14:28:52.846: E/AndroidRuntime(6439): java.lang.RuntimeException: Unable to start  activity    ComponentInfo{com.example.android.project/com.example.android.project.ThirdActivity}:   java.lang.NullPointerException: println needs a message
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.os.Looper.loop(Looper.java:156)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.ActivityThread.main(ActivityThread.java:4987)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at java.lang.reflect.Method.invokeNative(Native Method)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at java.lang.reflect.Method.invoke(Method.java:511)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at dalvik.system.NativeStart.main(Native Method)
11-28 14:28:52.846: E/AndroidRuntime(6439): Caused by: java.lang.NullPointerException: println needs a message
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.util.Log.println_native(Native Method)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.util.Log.d(Log.java:138)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at com.example.android.project.ThirdActivity.onCreate(ThirdActivity.java:52)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.Activity.performCreate(Activity.java:4538)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
11-28 14:28:52.846: E/AndroidRuntime(6439):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
11-28 14:28:52.846: E/AndroidRuntime(6439):     ... 11 more 
```

在我添加以下代码之前，它照常运行：

```
 intentFilter = new IntentFilter();
    intentFilter.addAction(MyService.MY_ACTION);
    registerReceiver(intentReceiver, intentFilter);

    private BroadcastReceiver intentReceiver = new BroadcastReceiver() {...};
    protected void displayNotification(){...} 
```

有人对这个问题有什么建议吗？

这是 StartMyServiceAtBootReceiver.java

```
public class StartMyServiceAtBootReceiver extends BroadcastReceiver{

    public void onReceive(Context context, Intent intent) {
          if (intent.getAction().equals(Intent.ACTION_USER_PRESENT)) {
                 HttpTest(context);                             
           }
     }

    public static boolean isNetworkAvailable( Context startMyServiceAtBootReceiver ) {
        Context context = startMyServiceAtBootReceiver.getApplicationContext();
        ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity == null) {
        return false;
        } else {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null) {
        for (int i = 0; i < info.length; i++) {
        if (info[i].getState() == NetworkInfo.State.CONNECTED) {
        return true;
        }
        }
        }
        }
        return false;
        } 

    public static void HttpTest( final Context startMyServiceAtBootReceiver)
    {
    if(isNetworkAvailable( startMyServiceAtBootReceiver) ){

         Intent start = new Intent(startMyServiceAtBootReceiver, MyService.class);
         start.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         startMyServiceAtBootReceiver.startService(start);
    }
    }

  } 
```

我的服务.java

```
public class MyService extends Service{

int counter = 0;
static final int UPDATE_INTERVAL = 15000;
private Timer timer = new Timer();
DefaultHttpClient httpclient;
HttpPost httppost;
String line,result;
HttpResponse response;
InputStream is;
BufferedReader reader;
StringBuilder sb;
final static String MY_ACTION = "MY_ACTION";

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public int onStartCommand(Intent intent, int flags, int startId){
    doSomethingRepeatedly();
    return START_STICKY;        
}

private void doSomethingRepeatedly(){
    timer.scheduleAtFixedRate(new TimerTask(){
        public void run(){
        //  Log.d("MyService", String.valueOf(++counter));
            try{
             httpclient = new DefaultHttpClient();
                httppost = new HttpPost("http://www.kryptoquest.com/testing/checking.php");
                response = httpclient.execute(httppost);
                is = response.getEntity().getContent();
        }catch(Exception e){
            Log.e("log_tag", "Error:"+e.toString());
        }

        //convert response to string
        try{
                    reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                sb = new StringBuilder();
                line = null;
                while ((line = reader.readLine()) != null) {

                        sb.append(line + "\n");

                }
                Log.d("test",sb.toString());
                is.close();

                result = sb.toString();

             Intent intent = new Intent();
             intent.setAction(MY_ACTION);

             intent.putExtra("DATAPASSED", result);

             sendBroadcast(intent);

        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        }
    },10000,UPDATE_INTERVAL);
}

public void onDestroy(){
    super.onDestroy();

    if(timer != null){
        timer.cancel();
    }

    Toast.makeText(this, "Service Destroyed", Toast.LENGTH_SHORT).show();
}

  } 
```

第三活动.java

```
public class ThirdActivity extends ListActivity{
Bundle b;
String user,line,result,datapassed;
DefaultHttpClient httpclient;
HttpPost httppost;
HttpResponse response;
InputStream is = null;
BufferedReader reader;
StringBuilder sb;
ArrayList<NameValuePair> nameValuePairs;
ListView lv;
IntentFilter intentFilter;
int notification = 1;
String str = "";
String[] data;
int dlength;

public void onCreate(Bundle savedInstancesState){
    super.onCreate(savedInstancesState);
    setContentView(R.layout.list_screen);
    lv = (ListView) findViewById(android.R.id.list);
    Log.d("dg",user);
    getList();
    intentFilter = new IntentFilter();
    intentFilter.addAction(MyService.MY_ACTION);
    registerReceiver(intentReceiver, intentFilter);
    user = getIntent().getExtras().getString("user");
}

    public void getList(){
    new Thread(){
        public void run(){
            try{
                 httpclient = new DefaultHttpClient();
                 httppost = new HttpPost("http://www.kryptoquest.com/tracker/friendlist.php");
                 response = httpclient.execute(httppost);
                 is = response.getEntity().getContent();
            }catch(Exception e){
                Log.e("log_tag", "Error:"+e.toString());
            }

            //convert response to string
            try{
                    reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    sb = new StringBuilder();
                    line = null;
                    while ((line = reader.readLine()) != null) {

                            sb.append(line + "\n");

                    }
                    Log.d("test",sb.toString());
                    is.close();

                    result = sb.toString();

                    final String[] friend = result.split("[*]");

                    runOnUiThread(new Runnable()
                    {
                        public void run(){                              
                            setListAdapter(new ArrayAdapter<String>(ThirdActivity.this,android.R.layout.simple_list_item_1,friend)); 
                        }
                    });

            }catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
            }
        }
    }.start();
}

 private BroadcastReceiver intentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
        datapassed = intent.getStringExtra("DATAPASSED");
        if(datapassed.length()>0){

            data = datapassed.split("[*]");
            dlength = data.length;

            for(int i=0;i<dlength;i++){
                if(i==dlength-1){
                    str += String.valueOf(data[i]);                 
                }else{
                    str += String.valueOf(data[i]) + ",";
                }   
            }
            Log.d("dataServices",str);
            displayNotification();
                str = "";           
        }
        }
        };

        protected void displayNotification(){
            Intent i = new Intent(this,NotificationView.class);
            i.putExtra("notification", notification);
            i.putExtra("name",str);
            Log.d("String",str);
            PendingIntent pi = PendingIntent.getActivity(this, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);

            NotificationManager mnotis =(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

            Notification notis = new Notification(R.drawable.notices2,"Reminder:You have " + dlength + " new friend request",System.currentTimeMillis());
            notis.setLatestEventInfo(this,"Friend Request", str + "has sent you a friend request",pi);
            notis.vibrate = new long[]{100,250,100,500};
            mnotis.notify(0, notis);
        }
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:40:59.613

在`onCreate()`此行 `Log.d("dg",user);`中，此行`user`变量始终为空，因为您在方法末尾分配了值`onCreate()`。将此行移动到`onCreate()`方法的末尾并检查空值，`log.d`如果值不为空，则仅调用 ..

# google-maps-api-3 - 如何利用谷歌地图 MarkerCluster 捕捉多边形而不是标记？

> ID：13600685
> 
> 赞同：2
> 
> 时间：2012-11-28T08:20:26.567
> 
> 标签：google-maps-api-3

每个人！

如何利用谷歌地图 MarkerCluster 捕捉 Polygon 而不是 Marker ？

我的程序在谷歌地图上有大约 20,000 个标记，当数据加载到地图中时它变得非常慢。然后我使用 JS 代码绘制一个多边形作为标记的替换。它会跑得更快。也许标记的PNG图像加载会对速度产生负面影响。

最后，我读到了这篇文章

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html)

'MarkerCluster' 功能很棒。但是，它只能用于 Google Marker 方面。

```
var markerClusterer = new MarkerClusterer(map, **markerArray**) 
```

那么是否有一些解决方案可以将多边形放入这个集群机制中？

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T09:19:57.790

我试探性地做了一个例子。

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
    <style>
      html, body, #map_canvas {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }
    </style>

    <script type='text/javascript'>
      var mapCanvas;

      function initalize() {

        // Creating a map
        var mapDiv = document.getElementById("map_canvas");
        mapCanvas = new google.maps.Map(mapDiv, {
          mapTypeId : google.maps.MapTypeId.ROADMAP
        });

        // Generate bunch of path data
        var sw = new google.maps.LatLng(-19.448292, -152.012329);
        var ne = new google.maps.LatLng(76.150236, 58.925171);
        var bounds = new google.maps.LatLngBounds(sw, ne);
        mapCanvas.setCenter(bounds.getCenter());
        mapCanvas.setZoom(3);

        var baseLat, baseLng, category, json = [], path;
        for (var i = 0; i < 100; i++) {
          baseLat = Math.random() * (ne.lat() - sw.lat()) + sw.lat();
          baseLng = Math.random() * (ne.lng() - sw.lng()) + sw.lng();

          path = [
            new google.maps.LatLng(baseLat, baseLng),
            new google.maps.LatLng(baseLat + 1, baseLng + 1),
            new google.maps.LatLng(baseLat, baseLng + 2)
          ];
          json.push(path);
        }

        var bounds, polyList = [];
        for (var i = 0, length = json.length; i < length; i++) {
          var polyline = createPolygon(json[i]);
          polyList.push(polyline);
        }
        var clusterer = new MarkerClusterer(mapCanvas, polyList);
      }

      function createPolygon(path) {
        var polygon = new google.maps.Polygon({
          path : path,
          strokeOpacity : 1,
          strokeColor : "red"
        });

        var lastPath = null,
            lastCenter = null;
        polygon.getPosition = function() {
          var path = this.getPath();
          if (lastPath == path) {
            return lastCenter;
          }
          lastPath = path;
          var bounds = new google.maps.LatLngBounds();
          path.forEach(function(latlng, i) {
            bounds.extend(latlng);
          });

          lastCenter = bounds.getCenter()
          return lastCenter;
        };
        return polygon;
      }

      google.maps.event.addDomListener(window, "load", initalize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

![在此处输入图像描述](../Images/e03023f1330cd9ac2dfa24accb20efb0.png)

# javascript - Javascript中的正则表达式来验证美国电话号码

> ID：13600690
> 
> 赞同：1
> 
> 时间：2012-11-28T08:20:44.433
> 
> 标签：javascript, regex

我`/^\d{3}\ ?-? ?\d{3}\ ?-? ?\d{4}$/;`用来验证美国电话号码。谁能告诉我如何修改这个表达式以使`()`第一组数字成为可选的。

例如：它应该适用于`(123)234-2345`, `123-345-4567`, `123 - 345 - 4567`,`123345-6789`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:26:31.870

带或不带大括号的区号

```
(?:\(\d{3}\)|\d{3}) 
```

可选`-`，周围有可选空格

```
(?: *- *)? 
```

3 位数

```
\d{3} 
```

和 4 位数字

```
\d{4} 
```

现在一起

```
^(?:\(\d{3}\)|\d{3})(?: *- *)?\d{3}(?: *- *)?\d{4}$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:22:11.380

```
/^\(?\d{3}\)? ?-? ?\d{3} ?-? ?\d{4}$/ 
```

# android - 等不及 onPause 内的线程结束

> ID：13600693
> 
> 赞同：1
> 
> 时间：2012-11-28T08:21:04.200
> 
> 标签：android, multithreading, onpause

我需要在应用程序挂起之前销毁一个线程。这是我的代码：

```
public class MyThread extends Thread
{
   public boolean mRun = false;;
   @Override
   public void run()
   {
        while (mRun)
        {
              .....
        }
    }
 } 
```

活动：

```
 @Override
 public void onPause() {
    if (mThread != null)
    {       
        mThread.mRun = false;           
        try { mThread.join(); }
        catch (InterruptedException e) { }
    }
    super.onPause();
} 
```

但我很确定android系统不会等待我的线程结束并在它之前暂停我的应用程序。我如何强制线程结论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:34:01.353

这就是我在代码中使用的方式满足您的要求。希望这对您也有帮助。如果您找到更好的解决方案，请分享。

在下面的代码片段中，`mThread`线程是在`onCreate`. `OnDestroy`是在您的活动销毁之前调用的方法。它是清空已分配资源的最佳位置。

```
@Override
public void onDestroy() {
    super.onDestroy();
    if(null != mThread) {
        Thread dummyThread = mThread;
        mThread = null;
        dummyThread.interrupt(); // Post an interrupt request to this thread.
       }
} 
```

干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:30:17.380

您确定没有收到 InterruptedException 吗？尝试在 catch 语句中添加一个堆栈跟踪...并检查您的线程是否为 isAlive()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:37:20.893

你不能这样做。Thread.join 是一个潜在的阻塞操作，不能在 UI 线程上执行（onPause 在 UI 线程上）。

您可以要求您的线程停止，（将 mRun 设置为 false 是一种普遍接受的这样做方式），但您不能明确地等待它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:33:19.277

可以肯定的是，将线程标记为守护进程，如果在线程中执行重复性任务（例如在循环中），请始终检查标志。此外，调用中断将负责阻塞 IO 或网络调用。

```
myThread.setDaemon(true) 
```

和

```
cancelFlag = true;
myThread.interrupt(); 
```

# networking - 如何使用静默安装从 rhq-server 安装 rhq-agent？

> ID：13600694
> 
> 赞同：2
> 
> 时间：2012-11-28T08:21:06.207
> 
> 标签：networking, jboss, rhq

是否可以仅通过指定代理 IP 地址以静默方式从 rhq-server 安装 rhq-agent。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:46:33.047

在 Linux 上：

创建以下脚本并调用 script.sh &

这将在后台运行

伪代码

> 代理 IP > /dev/null 的 ssh
> 
> curl jar 文件来自 https://$rhq-server-ip-address:$port/agentupdate/download > /dev/null
> 
> ssh root@$agent-ip "java -jar /path/to/rhq-enterprise-jar --install > /dev/null"

这将安装没有输出的代理。

# php - 初学者的PHP编码帮助

> ID：13600699
> 
> 赞同：2
> 
> 时间：2012-11-28T08:21:44.583
> 
> 标签：php, javascript, html

我有`$abc = "http://somewebsite.com/somefile.jpg"`。如何在输入框中显示此 URL，以便用户只需单击即可轻松复制链接？提前感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:24:54.763

标准输入：`$input = "<input type='text' value='$abc' />"`

如果你想`copy`通过点击 - 你需要 swf/js。但是你可以在这个**[问题](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)**上寻找这样的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:43:20.630

您可以在页面呈现之前将您的 URL 放在这样的输入框中......

文件.php

```
<?php
  $abc = "http://somewebsite.com/somefile.jpg";
?>
<input type="text" name="someURL" value="<?php echo $abc;?>" /> 
```

或文件.php

```
<?php
  $abc = "http://somewebsite.com/somefile.jpg";
  echo "<input type=\"text\" name=\"someURL\" value=\"".$abc."\" />";
?> 
```

至于复制 - 繁琐的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:30:16.397

复制主要在 Flash 中完成，出于安全原因，大多数浏览器不允许从 javascript 访问剪贴板。您需要将要复制的数据传递到 Flash，然后将其放在剪贴板中。

也许这可以帮助你：[http ://code.google.com/p/zeroclipboard/](http://code.google.com/p/zeroclipboard/)

# plsql - 如何在 PL/SQL 中使用“-”分隔符连接两列

> ID：13600705
> 
> 赞同：8
> 
> 时间：2012-11-28T08:22:15.380
> 
> 标签：plsql, concatenation

我只想用分隔符'-'连接两列。

这是两列，要连接。

![在此处输入图像描述](../Images/e2d08cce2565aa5e505d416daa9d5422.png)

我正在使用此查询来连接它们

```
select concat(amt,endamt)as amount from mstcatrule 
```

它给了我这个结果

![在此处输入图像描述](../Images/4644c1bf89b5a05cc43d1985cc453404.png)

但我希望 2 列的数据应该用“-”分隔

我想要的结果是：

```
AMOUNT
0-0
100-99999999999
100-500 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T09:45:20.577

选择：

```
select amt || '-' || endamt as amount from mstcatrule; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-28T08:27:08.697

用两个 concats 来做：

```
select concat(concat(amt, '-'), endamt) as amount from mstcatrule; 
```

`concat(amt,'-')`将`amt`与破折号连接起来，结果字符串与. 连接起来`endamt`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T20:08:36.780

另一种方法是使用双管。

选择amt || '-' || endamt 作为来自 mstcatrule 的金额；

您可能需要将 amt 和 endamt 转换为 varchar

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-10-16T05:30:39.577

**您可以在查询下使用的替代方案**

```
select concat(amt,'-',endamt) as amount from mstcatrule; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-03-19T07:50:28.290

查询的通用格式

```
Select concat(column1,'-',column2) as concatedCols from table_Name 
```

仅适用于**Postgresql**

# regex - 使用正则表达式从数字中检索数万

> ID：13600706
> 
> 赞同：-3
> 
> 时间：2012-11-28T08:22:19.117
> 
> 标签：regex, .htaccess

知道如何制作一个从数字中检索数万的正则表达式吗？

我的意思是所有正整数都应该返回整数除以 10000 向下舍入。对于 0 将是 0，对于 999 也将是 0，对于 12345678 将是 1234，依此类推。

我在想一系列的条件，比如

“如果数字在 1 到 4 位之间，则返回 0，否则，如果数字有 5 位，则返回第一个，否则，如果数字有 6，则返回第一个 2，依此类推”。

我的数字在 1 到 9.99 亿之间。

这是为了一个`RewriteRule`in `htaccess`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:13:41.443

这是一个非常简单的答案，我不确定为什么你的问题被标记了。我只能为你用 VB 或 C# 编写它，但你也许能明白这一点。

```
Dim rmTens As String = Regex.Replace(Regex.Match(input, "([\d,. ]*)(?:\d[,. ]*){4}(?:$|[^\d,. ])").Groups(1).Value, "[,. ]", "")
If rmTens = "" Then rmTens = "0" 
```

这是一个快速的方法，但它会捕获所有数字、逗号、小数和空格（所有有效的数字字符），直到匹配三个数字（允许格式错误的混乱），而不是任何其他数字允许值。

# linux - Apache 虚拟主机的问题

> ID：13600707
> 
> 赞同：0
> 
> 时间：2012-11-28T08:22:22.440
> 
> 标签：linux, apache, virtual-hosts, server-configuration

我最近刚刚建立了一个运行两个域的基于 RHEL 的服务器。但是，我很难从浏览器访问这两个域。我的配置是：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName domainA.com
    ServerAlias domainA.com *.domainA.com
    DocumentRoot /home/domainA/public_html
    <Directory "/home/domainA/public_html">
         allow from all
         Options +Indexes
    </Directory>    
</VirtualHost> 
<VirtualHost *:80>
     ServerName domainB.com
     ServerAlias domainB.com *.domainB.com
     DocumentRoot /home/domainB/public_html
     <Directory "/home/domainB/public_html">
          allow from all
          Options +Indexes
     </Directory>
</VirtualHost> 
```

问题是当我导航到 domainA.com 时，我点击了正确的 Virtualhost（这很好），但是当我导航到 domainB.com 时，它会显示 Apache 测试页面。

**编辑**

我在网络服务器和网络之间有一个防火墙。我测试了管理域 A 和域 B 的规则。

域 A 达到目标并返回状态 200。
域 B 到达目标并返回状态 403（权限被拒绝）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:09:54.757

您需要做的是查看启用站点和可用站点。这是谷歌搜索时的第一个条目：http: [//www.debian-administration.org/articles/412](http://www.debian-administration.org/articles/412) 看起来很合理，应该可以帮助您整合它。

问题是您需要为要在此 apache2 上运行的所有站点单独输入条目。配置文件中的简单条目不会这样做。只有第一个作品，其余的或多或少被忽略了。使用启用站点和可用站点创建单独的条目是此处的方法。

# matlab - 使用matlab高度相关的位置

> ID：13600709
> 
> 赞同：0
> 
> 时间：2012-11-28T08:22:27.713
> 
> 标签：matlab, octave, cross-correlation

我有一个或多或少重复的信号（从一个到另一个不完全相同，请参见左边的图）。如果我使用自相关，我会得到一些最大值（右图），但它并没有告诉我在哪里（哪个样本数）相关性很高。它给了我滞后，但我丢失了位置信息，即信号发生的原始数据中的样本数。例如在自动校正中。图中，样本 500 处的第二个峰值应对应于数据图中样本 750 处的信号。我可以通过使用一个在数据轨迹上移动并找到最大值的小窗口来做到这一点，但这需要太多时间。在matlab中有没有更快的方法来做到这一点？谢谢。 ![在此处输入图像描述](../Images/b633fa5a924dc3f1a3a486af9e077827.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:56:55.167

我认为你误解了自相关。5000 处的相关峰值不是由于时间序列中的单个位置，而是因为当偏移 5000 个样本时，*整个*时间序列与其自身相似。该峰值很大程度上是由于时间序列峰值 18000 和时间序列峰值 7500。例如，如果您没有真正的周期性时间序列（也就是说，如果脉冲之间的间隔不均匀）。

如果您可以隔离一个脉冲示例，并选择您想要的位置作为您的 t=0，那么该脉冲与时间序列的相关性将为您提供您想要的。每个脉冲都会在它发生的时间位置清楚地亮起。那么你只需要一个寻峰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:00:52.803

是的，您可以使用获得最大振幅的元素的索引

```
treshold = max(a)/2
ind = find(a>=treshold) 
```

其中 a 是包含相关结果的矩阵。

# php - 巴黎PHP中的MySQL查询不同

> ID：13600710
> 
> 赞同：0
> 
> 时间：2012-11-28T08:22:27.970
> 
> 标签：php, mysql, sql, idiorm

我需要使用 Paris/idiorm PHP 来构建我的查询。我尝试了很多可能性，但找不到解决方案。我是 PHP 和 SQL 的新手，对 ORM 了解不多。我只是认为有人会帮助我构建查询以获取上次更新时间戳的不同名称。

```
-----------------------------------------
id  |   name       |    timestamp
-----------------------------------------
1   |   testuser   |  2012-11-19 17:02:48
2   |   testuser   |  2012-11-28 11:15:46
3   |   testuser   |  2012-11-19 11:02:49
4   |   testadmin  |  2012-11-28 10:50:05
5   |   testadmin  |  2012-11-28 11:15:46
----------------------------------------- 
```

我进行了以下查询，并且能够获取名称及其第一个时间戳，但无法获取最新的时间戳

```
 $output = ORM::for_table('sample')
                ->raw_query('SELECT id,name,timestamp FROM sample GROUP BY name',array())
                ->find_many(); 
```

希望有一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:24:15.347

获取子查询中每个名称的最新时间戳，然后将其加入自身。尝试，

```
SELECT a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT name, MAX(timestamp) maxStamp
            FROM tableName
            GROUP BY name
        ) b ON a.name = b.name AND
                a.timestamp = b.maxStamp 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/c2e4b/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:29:13.067

```
 $output = ORM::for_table('sample')
                ->raw_query('SELECT DISTINCT(name),id,timestamp FROM sample ORDER BY id DESC',array())
                ->find_many(); 
```

希望这可以帮助

我尝试向您订购 DESC，您将获得用户的最后或最新日志

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:25:34.227

```
$output = ORM::for_table('sample')
  ->distinct()
  ->raw_query('SELECT id,name,timestamp FROM sample GROUP BY name',array())
  ->find_many(); 
```

# mysql - SQL异常查询，查找连续元素之间的最大增量

> ID：13600721
> 
> 赞同：0
> 
> 时间：2012-11-28T08:23:13.367
> 
> 标签：mysql, sql

我遇到了一个有趣的问题。我有一张工人身份证和他们来访天数的表格。这是转储：

```
CREATE TABLE `pp` (
  `id` int(11) DEFAULT '1',
  `day` int(11) DEFAULT '1',
  `key` varchar(45) NOT NULL,
 PRIMARY KEY (`key`)
) 

INSERT INTO `pp` VALUES 
   (1,1,'1'),
   (1,20,'2'),
   (1,50,'3'),
   (1,70,'4'),
   (2,1,'5'),
   (2,120,'6'),
   (2,90,'7'),
   (1,90,'8'),
   (2,100,'9'); 
```

所以我需要找到至少一次旷工超过 50 天的工人。例如，如果工人在第 5 天、第 95 天、第 96 天、第 97 天访问，如果我们查看 deltas，我们可以看到最大的 delta (90) 超过 50，因此我们应该将这个工人包含在结果中。问题是我如何有效地找到不同工人访问之间的增量？

我什至无法想象如何使用 mysql 表作为结果数据数组。

所以我们需要为不同的工人分离天的价值，对它们进行排序，然后找到每个工人的最大增量。但是怎么做？例如，有什么方法可以在 sql 中枚举排序数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:42:24.937

试试这个查询 -

**编辑：**

```
SELECT t.id, t.day1, t.day2 FROM (
  SELECT p1.id, p1.day day1, p2.day day2 FROM pp p1
    JOIN (SELECT * FROM pp ORDER BY day) p2
      ON p1.id = p2.id AND p1.day < p2.day
   GROUP BY p1.id, p1.day
  )  t
GROUP BY t.id
HAVING MAX(day2 - day1) >= 50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:33:00.460

这是我用来处理此类问题的一种方法：

```
SELECT distinct t3.id  FROM
(SELECT t1.id, t1.day, MIN(t2.day) nextday
FROM pp t1
JOIN pp t2 ON t1.id=t2.id AND t1.day<t2.day
GROUP BY t1.id, t1.day
HAVING nextday-t1.day >50) t3 
```

（**编辑**这个版本稍微好一点）这会找到所有 delta > 50 的 ID。（我假设这就是你所追求的）

要查看它的工作原理：[SQL fiddle](http://sqlfiddle.com/#!2/87955/3)

要找到最大增量：

```
SELECT t3.id, MAX(t3.nextday-t3.day)  FROM
(SELECT t1.id, t1.day, MIN(t2.day) nextday
FROM pp t1
JOIN pp t2 ON t1.id=t2.id AND t1.day<t2.day
GROUP BY t1.id, t1.day) t3
GROUP BY t3.id 
```

背后的逻辑是找到“下一个”项目，无论这意味着什么。由于这是一个有序属性，下一项可以定义为在那些值大于所检查值的行中具有最低值......然后将“下一个”值连接到原始值，计算增量，并仅返回适用的那些。如果您还需要其他列，只需在外部选择上对原始表执行 JOIN。

我不确定这是否是关于性能的最佳解决方案，但我只为一次性报告编写查询，我可以用它来让查询运行一段时间。

但是，可能会出现一个语义错误：如果有人在第 1、第 2 和第 3 天在场，但**之后从未出现**，则不会发现缺席。为了克服这个问题，您可以在表中添加一个特殊的行，其中包含`UNION`一个 select 指定所有 s 的明天计数的表`ID`，但这会使该查询令人作呕，以至于不尝试将其写下来......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:15:12.523

这也可能是一个解决方案：

```
select distinct pp.id
from pp
where pp.day-(select max(day)
              from pp pp2
              where
                pp2.id=pp.id and
                pp2.day<pp.day)>=50 
```

（因为天不是按键排序的，所以我不是在搜索前一个键，而是在当前日期之前的最大天数）

# jquery - 如何更改锚点位置

> ID：13600726
> 
> 赞同：1
> 
> 时间：2012-11-28T08:23:46.610
> 
> 标签：jquery, html, hyperlink, position, anchor

因为我使用 jquery 选项卡并链接到它们，所以我的站点中有一堆锚点。但是，当我单击链接时，我想更改锚点聚焦我的屏幕的位置。我真的不在乎它的焦点在哪里，只要它比现在高得多，而不是直接在锚的顶部。我需要在不使用会破坏站点其余部分的情况下执行此操作，因为锚点周围都有内容。

锚点在这里（tab1 是锚点）：

```
<div class="tab_container">
<div id="tab1" class="tab_content"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:05:49.453

尝试这个：

```
$(function () { 
    $('a[href^="#"]').click(function(e){        
        e.preventDefault();
        $('html,body').scrollTop($(this.hash).offset().top - 50);
    });
}); 
```

选择`a[href^="#"]`器将应用于所有具有以开头`a`的属性的标签。`href``#`

如果您需要更改希望滚动条在锚点上方的距离，请修改`- 50`最后的 。

[jsFiddle在这里](http://jsfiddle.net/92YaQ/1/)

`animate`如果你想要花哨的页面滑动，你也可以将 scrollTop 包裹起来；）

```
$('html,body').animate({scrollTop: ($(this.hash).offset().top - 50)}, 500); 
```

[Slidey jsFiddle 在这里](http://jsfiddle.net/92YaQ/2/)

# php - 最佳实践 php 数组和 RAM 使用

> ID：13600729
> 
> 赞同：3
> 
> 时间：2012-11-28T08:23:53.967
> 
> 标签：php, mysql, arrays, memory

我有 12 个 mysql 数据库表，例如 table1、table2、....table12。每个表有 200,000 条记录。每条记录包括国家、用户类型、包列。我想获得以上 3 列的统计信息。为此，首先，我正在创建数组。然后使用数组，我得到统计数据。

```
for ($i=1; $i<=12; $i++)
{
   $query="SELECT `country`, `usertype`, `package` FROM `table$i`";
   $result=mysql_query($query);
   while ($row = mysql_fetch_assoc($result))
   {
      $country= $row['country'];
      $usertype= $row['usertype'];
      $package= $row['package'];

      $stat_array[$country][$usertype][$package]= 1 + $stat_array[$country][$usertype][$package]
   }
} 
```

需要很多时间才能得到结果。这是获得统计数据的最佳方法吗？请教我一个好方法。另外，这会使用更多的 RAM 内存吗？我需要一种减少内存使用的方法

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:35:47.397

12 个查询？请注意，`UNION`在`SQL`. 试试这个：

```
for ($i=1; $i<=12; $i++)
   $query=($i>1?'UNION ALL ':'')."SELECT `country`, `usertype`, `package` FROM `table$i` ";
$result=mysql_query($query);
// other code below 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:50:06.463

全部在查询中。下面的查询将为您提供每个国家、用户类型和包的计数结果。显然，您可以使用循环来创建 12 个表联合，但为了便于阅读，我将其全部写下来。

还要记住使用 UNION ALL 而不仅仅是 UNION。如果使用 UNION 会丢弃重复行，但是如果表 1 的某个组的计数为 100，而表 2 的同一组也有 100，则您要返回 100 两次，因此总和为 200。如果您使用 UNION 它会返回 100 一次，总和显然也是 100。

```
SELECT SUM(cnt) as total, `country`, `usertype`, `package` FROM
(
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table1 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table2 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table3 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table4 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table5 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table6 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table7 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table8 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table9 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table10 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table11 GROUP BY `country`, `usertype`, `package`
    UNION ALL
    SELECT COUNT(country) as cnt, `country`, `usertype`, `package` FROM table12 GROUP BY `country`, `usertype`, `package`

) temp
GROUP BY `country`, `usertype`, `package` 
```

附带说明：您不必这样做

```
$stat_array[$country][$usertype][$package]= 1 + $stat_array[$country][$usertype][$package]; 
```

你可以这样做：

```
$stat_array[$country][$usertype][$package]++; 
```

最后，如果您使用像您这样的多维数组，则在内部必须进行大量检查。简单地说，它会首先在数组中找到正确的国家，这将给出另一个数组。它将在该数组中找到用户类型，然后在第三个数组中再次执行相同的操作。

如果 $country、$usertype 和 $package 都是字符串，你最好加入字符串并使用它。

```
$key = $country.'_'.$usertype.'_'.$package;
$stat_array[$key]++; 
```

但我想这一切都取决于一旦你将数据存储在数组中，你想对它做什么。如果它只是打印总计数，您甚至不需要数组，而是直接在查询结果循环中打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:33:03.220

这里的问题之一是因为你在同一个函数中所有的 php 不会删除变量分配的内存。因此，您覆盖/创建一个新行，...。

您需要在 while 循环结束时取消设置行、国家、用户类型和包。这应该有助于记忆（至少在 PHP 5.3 之前，我在遍历大量数据行时遇到了类似的问题）。另一个问题是 stat_arr 变量，因为它为数据库中 3 个字段的每个组合创建 1 个数组字段。最坏的情况是您有 200k 个条目。这本身会占用很多内存。

此外，据我所知，您只想计算这 3 个列。这可以以不同的方式完成：

使用（我不知道您如何调用您的 ID/主字段，因此我在以下代码中将其称为 id）：

```
$Query = "SELECT count(id) AS c_u_p_statistics,`country`, `usertype`, `package` FROM `table$i` GROUP BY `country`, `usertype`, `package`"; 
```

这样您就不必手动汇总它们，而是可以通过 SQL 来完成（大多数时候效率更高）。

# mongodb - 具有现有值的 MongoDB 选择

> ID：13600730
> 
> 赞同：0
> 
> 时间：2012-11-28T08:23:57.663
> 
> 标签：mongodb, pymongo, database, nosql

我正在使用[PyMongo](http://api.mongodb.org/python/current/)从[MongoDB](http://www.mongodb.org/)获取数据。集合中的所有文档的结构如下所示：

```
{
    "_id" : ObjectId("50755d055a953d6e7b1699b6"), 
    "actor":
    {
        "languages": ["nl"]
    },
    "language":
    {
        "value": "nl"
    }
} 
```

我正在尝试获取该属性在该属性`language.value`内的所有对话`actor.languages`。

目前，我知道如何查找内部具有恒定值的 `actor.languages`所有对话（例如，所有带有*en* inside的对话`actor.languages`）。

但我一直坚持如何与`language.value`当前文档中的变量值 ( ) 进行相同的比较。

欢迎任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:42:45.963

如果您的查询集很小，您可以使用`$where`任何实际大小，并且您可能会开始看到问题，特别是因为此查询似乎需要在页面上实时运行，并且 JS 引擎是单线程的以及其他问题。

在这种情况下，我实际上会考虑一种更好的方法是通过客户端，它非常简单，根据其中一个值提取记录，迭代并测试它们的条件双精度值（即基于`language.value`nl 和测试`actor.languages`值提取对于之前的值）。

我想您可能可以使用聚合框架来做到这一点，但是，您至少不能在`$match`. 我想它会是这样的：

```
{$project: 
     {languages_value: "$language.value", languages: "$actor.languages"}
}, {$match: {"$languages": {$in:"$languages_values"}} 
```

如果你可以。但可能有办法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:08:42.813

```
db.testcoll.find({$where:"this.actor.languages.indexOf(this.language.value) >= 0"}) 
```

# java - 字符串日期到 java 时间戳转换

> ID：13600734
> 
> 赞同：-2
> 
> 时间：2012-11-28T08:24:18.543
> 
> 标签：java, datetime, timestamp

我正在尝试将 String 转换为 java Timestamp。我正在使用以下代码

```
SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy  HH:mm:ss:SSS");
Date parsedDate = dateFormat.parse(value);
Timestamp timestamp = new Timestamp(parsedDate.getTime());            
return timestamp; 
```

我的输入是 Input ::"10/01/2012 06:45:23:245946"

但我得到错误的输出 :: 2012-10-01 06:49:28.946

这段代码有什么问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:34:14.890

```
10/01/2012 06:45:23:245946 
```

在这里你已经过了 245946 毫秒，它实际上被转换为秒和分钟，它变成了`2012-10-01 06:49:28.946`.

```
245946 milliseconds = 245 seconds and 946 milliseconds 
245 seconds 946 milliseconds = 4 minutes, 5 seconds and 946 milliseconds

so 06:45:23+ 4 minutes 5 seconds and 946 milliseconds = 
06 hour 49 minutes 28 seconds 946 miliseconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:57:08.600

Step1：解析给定的日期

Step2：使用以下构造函数获取绝对时间戳

```
java.sql.Timestamp timestamp = new Timestamp((year-1900), (month-1), date, hour, min, sec,nano); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:30:55.607

没错，当您打印出来时，所有这些额外的毫秒都表示为完整的分钟和秒。您的输入包括 245946 毫秒，即 4 分钟、5 秒和 946 毫秒。因此，您的输出在 4 分 5 秒后显示为 946 尾随毫秒。

# android - 错误！！！错误的 Android API 版本：4.2，使用 rhodes 运行 android 4.2 时出现问题

> ID：13600738
> 
> 赞同：1
> 
> 时间：2012-11-28T08:24:29.760
> 
> 标签：android, rhomobile, rhodes

我遇到了同样的错误“错误！！！在安装的 Android SDK 中找不到 API 版本：1.6”。但是在添加这个块时，在我的 rhodes 应用程序的 build.yml 中：

android：版本：4.2 模拟器：rhoAndroid 现在我收到此错误：错误！！！错误的 Android API 版本：4

17 找到的 API 级别：16 17 请求的版本：4.2 对应的 API 级别错误！！！错误的 Android API 版本：4.2

在 build.yml android 中：版本：4.2

在 rhobuild.yml 中，所有必要的 android , ndk, jdk 设置都在那里 env: app: D:/ColumnMobility_ITSM 路径: android-ndk: D:/Android/android-ndk-r8b-windows/android-ndk-r8b java : C:/Program Files (x86)/Java/jdk1.6.0/bin 安卓: D:/Android/adt-bundle-windows-x86_64/adt-bundle-windows/sdk

**我用的是 rhodes 3.2.2，和 android 4.2sdk** 在哪里可以找到，rhodes 支持的 android 操作系统有哪些？

任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:50:49.040

Rhodes 3.3.1 及以上版本支持 Android SDK 4.0 和 NDK r7。使用 Rhodes 3.3.2，它还修复了 Android 4.0 上的数据库加密问题 [https://github.com/rhomobile/rhodes/blob/master/CHANGELOG](https://github.com/rhomobile/rhodes/blob/master/CHANGELOG)

# c# - 计算表面包含 4 个点的球心（C#）

> ID：13600739
> 
> 赞同：2
> 
> 时间：2012-11-28T08:24:31.103
> 
> 标签：c#, math

我正在使用一个名为 MIConvexHull 的 3D Voronoi 库，它为 3D 空间中的一系列点计算 3D Voronoi 图。但是，它没有提供有关 Voronoi 图结构的高级信息；报告的边缘只是一个坐标对列表，然后必须计算外心。

现在，该库提供了一系列 2D 点的外接中心计算的实现。正如您在此处看到的，开始（橙色）和结束（绿色）的坐标对如下所示：

![边缘坐标对](../Images/51b5c18fc3c1e4d3e7fa926b8342c670.png)

您可以直观地看到，如果您获取每个边中列出的顶点并制作一个圆，使得该圆的圆周接触所有边，则中心是边开始的地方。

我遇到的*问题*是我的点是 3D 的，因此它不会是返回的圆的中心，而是*球*的中心。不幸的是，高等数学并不是我的头脑能真正处理好的东西，所以我不知道如何解决这个问题。

**给定 3D 空间中的 4 个点，我如何获得一个球体的中心，使得所有点都位于球体的表面上？**

*编辑：*在 3D 中，将提供 4 个点，而不是 3 个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:36:27.693

我将上面链接的 Javascript 实现转换为 C#。这里是：

```
/// <summary>
/// Given four points in 3D space, solves for a sphere such that all four points
/// lie on the sphere's surface.
/// </summary>
/// <remarks>
/// Translated from Javascript on http://www.convertalot.com/sphere_solver.html, originally
/// linked to by http://stackoverflow.com/questions/13600739/calculate-centre-of-sphere-whose-surface-contains-4-points-c.
/// </remarks>
public class CircumcentreSolver
{
    private const float ZERO = 0;
    private double m_X0, m_Y0, m_Z0;
    private double m_Radius;
    private double[,] P = 
            {
                { ZERO, ZERO, ZERO },
                { ZERO, ZERO, ZERO },
                { ZERO, ZERO, ZERO },
                { ZERO, ZERO, ZERO }
            };

    /// <summary>
    /// The centre of the resulting sphere.
    /// </summary>
    public double[] Centre
    {
        get { return new double[] { this.m_X0, this.m_Y0, this.m_Z0 }; }
    }

    /// <summary>
    /// The radius of the resulting sphere.
    /// </summary>
    public double Radius
    {
        get { return this.m_Radius; }
    }

    /// <summary>
    /// Whether the result was a valid sphere.
    /// </summary>
    public bool Valid
    {
        get { return this.m_Radius != 0; }
    }

    /// <summary>
    /// Computes the centre of a sphere such that all four specified points in
    /// 3D space lie on the sphere's surface.
    /// </summary>
    /// <param name="a">The first point (array of 3 doubles for X, Y, Z).</param>
    /// <param name="b">The second point (array of 3 doubles for X, Y, Z).</param>
    /// <param name="c">The third point (array of 3 doubles for X, Y, Z).</param>
    /// <param name="d">The fourth point (array of 3 doubles for X, Y, Z).</param>
    public CircumcentreSolver(double[] a, double[] b, double[] c, double[] d)
    {
        this.Compute(a, b, c, d);
    }

    /// <summary>
    /// Evaluate the determinant.
    /// </summary>
    private void Compute(double[] a, double[] b, double[] c, double[] d)
    {
        P[0, 0] = a[0];
        P[0, 1] = a[1];
        P[0, 2] = a[2];
        P[1, 0] = b[0];
        P[1, 1] = b[1];
        P[1, 2] = b[2];
        P[2, 0] = c[0];
        P[2, 1] = c[1];
        P[2, 2] = c[2];
        P[3, 0] = d[0];
        P[3, 1] = d[1];
        P[3, 2] = d[2];

        // Compute result sphere.
        this.Sphere();
    }

    private void Sphere()
    {
        double r, m11, m12, m13, m14, m15;
        double[,] a =
                {
                    { ZERO, ZERO, ZERO, ZERO },
                    { ZERO, ZERO, ZERO, ZERO },
                    { ZERO, ZERO, ZERO, ZERO },
                    { ZERO, ZERO, ZERO, ZERO }
                };

        // Find minor 1, 1.
        for (int i = 0; i < 4; i++)
        {
            a[i, 0] = P[i, 0];
            a[i, 1] = P[i, 1];
            a[i, 2] = P[i, 2];
            a[i, 3] = 1;
        }
        m11 = this.Determinant(a, 4);

        // Find minor 1, 2.
        for (int i = 0; i < 4; i++)
        {
            a[i, 0] = P[i, 0] * P[i, 0] + P[i, 1] * P[i, 1] + P[i, 2] * P[i, 2];
            a[i, 1] = P[i, 1];
            a[i, 2] = P[i, 2];
            a[i, 3] = 1;
        }
        m12 = this.Determinant(a, 4);

        // Find minor 1, 3.
        for (int i = 0; i < 4; i++)
        {
            a[i, 0] = P[i, 0] * P[i, 0] + P[i, 1] * P[i, 1] + P[i, 2] * P[i, 2];
            a[i, 1] = P[i, 0];
            a[i, 2] = P[i, 2];
            a[i, 3] = 1;
        }
        m13 = this.Determinant(a, 4);

        // Find minor 1, 4.
        for (int i = 0; i < 4; i++)
        {
            a[i, 0] = P[i, 0] * P[i, 0] + P[i, 1] * P[i, 1] + P[i, 2] * P[i, 2];
            a[i, 1] = P[i, 0];
            a[i, 2] = P[i, 1];
            a[i, 3] = 1;
        }
        m14 = this.Determinant(a, 4);

        // Find minor 1, 5.
        for (int i = 0; i < 4; i++)
        {
            a[i, 0] = P[i, 0] * P[i, 0] + P[i, 1] * P[i, 1] + P[i, 2] * P[i, 2];
            a[i, 1] = P[i, 0];
            a[i, 2] = P[i, 1];
            a[i, 3] = P[i, 2];
        }
        m15 = this.Determinant(a, 4);

        // Calculate result.
        if (m11 == 0)
        {
            this.m_X0 = 0;
            this.m_Y0 = 0;
            this.m_Z0 = 0;
            this.m_Radius = 0;
        }
        else
        {
            this.m_X0 = 0.5 * m12 / m11;
            this.m_Y0 = -0.5 * m13 / m11;
            this.m_Z0 = 0.5 * m14 / m11;
            this.m_Radius = System.Math.Sqrt(this.m_X0 * this.m_X0 + this.m_Y0 * this.m_Y0 + this.m_Z0 * this.m_Z0 - m15 / m11);
        }
    }

    /// <summary>
    /// Recursive definition of determinate using expansion by minors.
    /// </summary>
    private double Determinant(double[,] a, int n)
    {
        int i, j, j1, j2;
        double d = 0;
        double[,] m = 
                {
                    { ZERO, ZERO, ZERO, ZERO },
                    { ZERO, ZERO, ZERO, ZERO },
                    { ZERO, ZERO, ZERO, ZERO },
                    { ZERO, ZERO, ZERO, ZERO }
                };

        if (n == 2)
        {
            // Terminate recursion.
            d = a[0, 0] * a[1, 1] - a[1, 0] * a[0, 1];
        }
        else
        {
            d = 0;
            for (j1 = 0; j1 < n; j1++) // Do each column.
            {
                for (i = 1; i < n; i++) // Create minor.
                {
                    j2 = 0;
                    for (j = 0; j < n; j++)
                    {
                        if (j == j1) continue;
                        m[i - 1, j2] = a[i, j];
                        j2++;
                    }
                }

                // Sum (+/-)cofactor * minor.
                d = d + System.Math.Pow(-1.0, j1) * a[0, j1] * this.Determinant(m, n - 1);
            }
        }

        return d;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:44:25.187

这是一个Javascript实现：

[http://www.convertalot.com/sphere_solver.html](http://www.convertalot.com/sphere_solver.html)

以及一些数学解释：

[http://steve.hollasch.net/cgindex/geometry/sphere4pts.html](http://steve.hollasch.net/cgindex/geometry/sphere4pts.html)

> 球体的方程 ... 通过将以下行列式设置为零来给出：
> 
> ```
> | x^2  + y^2  + z^2   x   y   z   1 |
> | x1^2 + y1^2 + z1^2  x1  y1  z1  1 |
> | x2^2 + y2^2 + z2^2  x2  y2  z2  1 | = 0.
> | x3^2 + y3^2 + z3^2  x3  y3  z3  1 |
> | x4^2 + y4^2 + z4^2  x4  y4  z4  1 | 
> ```

# charts - 仅按可见系列过滤 Highcharts 的图例

> ID：13600741
> 
> 赞同：9
> 
> 时间：2012-11-28T08:24:33.427
> 
> 标签：charts, highcharts

我们正在使用 Highcharts 并且有一些复杂的图表，其中包含大约 75 个系列。该系列并未在整个图表中使用，而仅用于三个月的范围。所以我们每年大约有 15 个系列，整个图表涵盖五年（大约 15*5 = 75 个系列）。然而，Highcharts 在其图例中显示了所有 75 个图表。目标是将图例最小化为仅可见系列。我们能够在 JS 代码中确定相关系列，并尝试切换相关系列的“showInLegend”标志，例如

```
chart.series[24].options.showInLegend = false 
```

但没有效果。我们尝试使用重新绘制图表

```
chart.redraw() 
```

但这没有任何效果……传说保持不变。

所以问题是：

*   是否可以根据更新的 showInLegend 选项重新绘制图例？
*   Highcharts 中是否有根据可见系列动态更新图例的机制？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T12:42:59.817

好吧，只是设置`showInLegend`并不能解决问题，还有一些钩子需要处理

请参阅 Halvor Strand 的答案以获取更新的方法

* * *

## 老把戏，但仍然有效

# 添加

```
item.options.showInLegend = true;
chart.legend.renderItem(item);
chart.legend.render(); 
```

# 去除

```
item.options.showInLegend = false;
item.legendItem = null;
chart.legend.destroyItem(item);
chart.legend.render(); 
```

其中，item 可以是点或系列

```
var item = chart.series[1]; 
```

**[动态添加删除图例 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/MtwGc/)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T12:43:59.823

您可以设置`showInLegend`为`false`创建图表时。

```
{
    name: 'Tokyo',
    data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
    showInLegend: false
} 
```

[**演示1**](http://jsfiddle.net/z28G6/)

如果要动态更新它，可以执行以下操作。

```
options.series[1].showInLegend = false;
chart = new Highcharts.Chart(options); 
```

您忘记强制图表重绘。

[**演示**](http://jsfiddle.net/pKPpm/)

或者`chart.legend.allItems[1].destroy();`删除第一个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-16T03:46:59.707

现在可以通过`Series.update`方法 ( [API](http://api.highcharts.com/highcharts#Series.update) ) 解决这个问题，而无需任何黑客攻击。例如：

```
chart.series[0].update({ showInLegend: false }); 
```

请参阅[此 JSFiddle 演示](http://jsfiddle.net/ykho28vw/1/)。方法签名是：

```
update(Object options, [Boolean redraw]) 
```

任何常规对象`options`的选项在哪里。`Series`您可以选择在重绘之前停止重绘以更改多个选项。

# build - 来自 TeamCity 中相同构建配置的工件依赖项

> ID：13600746
> 
> 赞同：4
> 
> 时间：2012-11-28T08:24:54.190
> 
> 标签：build, continuous-integration, teamcity

我想设置一个将执行增量构建的 TeamCity 构建。

为此，我想将构建输出（.dll 文件）存储为工件，并在每个后续构建中重用它们（在开始构建之前将最新的工件复制到构建代理）。

这将有效地将最后构建的工件放置在项目的输出文件夹中，因此 MSBuild 可以使用这些工件来确定它是否需要从源重新构建任何内容。

我试过这样做，但似乎 TeamCity 不允许从相同的构建配置配置工件依赖项。

例如，如果我有一个生成插件 DLL 集合的“构建插件”配置，我不能将它们用作相同构建配置的依赖项......

是否有任何固有的方法可以在 TeamCity 中克服这个问题，或者自己创建一个简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T14:57:46.297

似乎只有在使用模板时才能做到这一点。
您可以为构建创建模板。然后，您从该模板创建一个构建。之后，您将此构建添加到模板中的工件依赖项中。这允许循环依赖。
我没有找到其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-20T14:16:56.063

看起来你现在可以做到这一点！它似乎可以在 9.0.1 中使用，[TW-12984](http://youtrack.jetbrains.com/issue/TW-12984)说它应该可以追溯到 8.1。

# c# - 如何将图标添加到上下文菜单

> ID：13600750
> 
> 赞同：2
> 
> 时间：2012-11-28T08:25:15.423
> 
> 标签：c#, .net, visual-studio

我有一个带有`ContextMenu`附件的通知图标（而不是一个`ContextMenuStrip`，以保持 Windows 的外观和感觉），[详见此处](https://stackoverflow.com/questions/718386/how-can-i-use-the-windows-looknfeel-for-a-system-tray-context-menu/13598945#13598945)。

如何向上下文菜单项添加图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:45:36.607

如果***必须***使用 MenuItem，则必须自己绘制菜单项并添加图像。为此，将`OwnerDraw`属性设置为 true 并订阅该`DrawItem`事件。

**或者**

您可以派生自己的 MenuItem 类：

```
public class MyMenuItem : MenuItem
{
    public MyMenuItem()
    {
        OwnerDraw = true;

    }
    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        base.OnDrawItem(e);

        // Add paint logic here
    }
} 
```

有关如何在 MenuItem 上绘制的具体链接，请参见[此处](http://www.codeproject.com/Articles/4332/Putting-Images-Next-To-MenuItems-In-A-Menu-in-C)和[此处](http://www.java2s.com/Code/CSharp/GUI-Windows-Form/OwnerDrawnMenuControl.htm)

# c# - 如何根据属性中的唯一值选择列表的子序列

> ID：13600753
> 
> 赞同：0
> 
> 时间：2012-11-28T08:25:28.447
> 
> 标签：c#, linq, sequence, projection, subset

我有一个班级和一个这样的清单：

```
public class Person {
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime Birthday { get; set; }
}

// and my list is:
var persons = new List<Person>();
persons.add(/* add for example 20 person here */); 
```

这些人可能有重复的`FirstName`和`LastName`。我想选择所有`FirstName`与不同的人的子序列`LastName`。我的意思是我的主键（在关系数据库中）是`FirstName + LastName`.

我知道我可以通过迭代列表来做到这一点。但我在问一个`LINQ`解决方案。有吗？我可以选择指定的子序列`LINQ`吗？请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:40:50.853

你只想要独特的人吗？您可以使用`Enumerable.GroupBy`，然后计算每个组：

```
var uniquePersons = persons 
                   .GroupBy(p => new { p.FirstName, p.LastName })
                   .Where(g => g.Count() == 1)
                   .Select(g => g.First()); 
```

这是一个演示：http: [//ideone.com/nsbyyI](http://ideone.com/nsbyyI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:31:02.683

[通过Enumerable.ToLookup 方法](http://msdn.microsoft.com/en-us/library/bb549073.aspx)和[Enumerable.Select 方法](http://msdn.microsoft.com/en-us/library/bb548891.aspx)创建一个[`Lookup<TKey, TElement> Class`](http://msdn.microsoft.com/en-us/library/bb460184.aspx)基于`FirstName+LastName`键并仅从每个子集合中获取第一个（只要您从未说过任何关于它的 rder 或其他内容）：

```
var result = persons.ToLookup(p => string.Concat(p.FirstName, p.LastName))
                    .Select(l => l.First()); 
```

# dart - 升级 IndexedDB 时出现 Dart 异常

> ID：13600755
> 
> 赞同：3
> 
> 时间：2012-11-28T08:25:36.003
> 
> 标签：dart

当我尝试使用比浏览器当前具有的更高版本升级我的 indexedDB 数据库时出现异常，但有趣的部分中止是，它被升级了。这是设计使然还是我做错了什么。

我从 dart 示例 Todo 中得到了很大的启发，所以我的代码最终看起来像这样。

```
void open_db(String DB_name, int Version, String Store_Name){
  var request = window.indexedDB.open(DB_name, Version);
  request.on.success.add((e) => _onDbOpened(request.result));
  request.on.error.add((e) => print("Error opening db"));
  request.on.upgradeNeeded.add((e) => _onUpgradeNeeded(request.transaction, Store_Name));
}

void _onDbOpened(IDBDatabase db){
  _db = db;
  print("DB opened");
}

void _onUpgradeNeeded(IDBTransaction changeVersionTransaction, String Store_Name){
  changeVersionTransaction.on.error.add((e) => print("Error upgrading db"));
  changeVersionTransaction.on.complete.add((e) => print("Success upgrading db"));
  changeVersionTransaction.db.createObjectStore(Store_Name);
} 
```

当我使用 version=4 运行它并且浏览器只有 version=3 时，它会按预期跳转到 _onUpgradeNeeded，但我收到 IDBDatabaseException 消息：“ConstraintError: DOM IDBDatabase Exception 4”。

那么我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:48:43.657

谢谢你的提问！

您可能需要先检查商店是否存在。

```
 if (db.objectStoreNames.indexOf(storeName) == -1) {  
    db.createObjectStore(storeName);
  } 
```

这是一些使用 Dart 更新 IndexedDB 数据库的代码。请注意，这补偿了两种升级方式（Chrome 使用的旧方式，以及 Firefox 和较新版本 Chrome 使用的新方式）

```
_openDb(afterOpen()) {
    var request = window.indexedDB.open(DB_NAME, VERSION);
    if (request is IDBOpenDBRequest) {
      // New upgrade protocol. FireFox 15, Chrome 24, hopefully IE10.
      request.on.success.add(expectAsync1((e) {
            db = e.target.result;
            afterOpen();
          }));
      request.on.upgradeNeeded.add((e) {
          guardAsync(() {
              _createObjectStore(e.target.result);
            });
        });
      request.on.error.add(fail('open'));
    } else {
      // Legacy setVersion upgrade protocol. Chrome < 23.
      request.on.success.add(expectAsync1((e) {
            db = e.target.result;
            if (db.version != '$VERSION') {
              var setRequest = db.setVersion('$VERSION');
              setRequest.on.success.add(
                  expectAsync1((e) {
                      _createObjectStore(db);
                      var transaction = e.target.result;
                      transaction.on.complete.add(
                          expectAsync1((e) => afterOpen()));
                      transaction.on.error.add(fail('Upgrade'));
                    }));
              setRequest.on.error.add(fail('setVersion error'));
            } else {
              afterOpen();
            }
          }));
      request.on.error.add(fail('open'));
    }
  }

_createObjectStore(db) {
    try {
      // Nuke object store if it already exists.
      db.deleteObjectStore(STORE_NAME);
    }
    on IDBDatabaseException catch(e) { }  // Chrome
    on DOMException catch(e) { }          // Firefox
    db.createObjectStore(STORE_NAME);
  } 
```

请注意，此代码来自此测试：[http ://code.google.com/p/dart/source/browse/trunk/dart/tests/html/indexeddb_3_test.dart](http://code.google.com/p/dart/source/browse/trunk/dart/tests/html/indexeddb_3_test.dart)

# c# - 如何在 < 126 处获取字符代码

> ID：13600756
> 
> 赞同：0
> 
> 时间：2012-11-28T08:25:38.153
> 
> 标签：c#, javascript, bytearray

我只是在我的服务器端应用程序中创建一个 256 字节数组，然后将其发送到客户端。

**C＃：**

```
byte[] arr = new byte[256];
for (int i = 0; i < 256;i++ )
{
    arr[i] = (byte)i;
} 
```

然后我想用 JavaScript 在客户端获取所有字符代码（确切地说，字符的字节代码）。

**JavaScript：**

```
for(var i = 0;i<data.length;i++) {
    console.log(data.charCodeAt(i));
} 
```

后面的字符`126`，`charCodeAt(...)`返回`65536`。

正是我想知道我怎样才能得到这个字符代码`126`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:49:39.400

在这篇博文中有一些关于如何使用 charCodeAt 解析二进制数据的非常好的技巧：http: [//fhtr.blogspot.com/2009/12/3d-models-and-parsing-binary-data-with.html](http://fhtr.blogspot.com/2009/12/3d-models-and-parsing-binary-data-with.html)

如果您想在 JavaScript 中轻松读取二进制数据，也可以使用 jDataView：http: [//blog.vjeux.com/2011/javascript/jdataview-read-binary-file.html](http://blog.vjeux.com/2011/javascript/jdataview-read-binary-file.html)

# python - Pydev 没有在 Eclipse 中集成 Django？

> ID：13600759
> 
> 赞同：2
> 
> 时间：2012-11-28T08:25:49.110
> 
> 标签：python, django, windows, eclipse

我已经安装了 eclipse 和 pydev 和 django。当我打开命令行时，我看到：

```
C:\Users>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> django.VERSION
(1, 4, 2, 'final', 0)
>>> 
```

因此 django 已正确安装。

当我在 Eclipse 中创建一个新的 django 项目时，我得到：

![在此处输入图像描述](../Images/7ea89b46a1bd020eec60894e0f89076e.png)

一个没有 manage.py 等的空项目。

当我在 Eclipse 中创建一个项目时，我想拥有一个完整配置的 django 项目！

我的 Python 安装有什么问题？

我很欣赏你的回答！！！

**更新：**

现在我的 pythonpath 看起来像这样：

![在此处输入图像描述](../Images/52bb1f4fb768a571301630d9e0bb1c9b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:01:54.713

在 Django 集成工作之前，您需要确保您拥有一些设置（此外，pydev 集成要求您的项目位于 src 文件夹中，然后自动完成等功能才能正常工作。）

设置 PyDev 和集成 Django 的两个很好的指南：

[PyDev 设置](http://pydev.org/manual_101_root.html)

[PyDev Django 设置](http://pydev.org/manual_adv_django.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:20:12.490

没什么重要的，但是如果您安装 Eclipse 只是为了编写 Django 网站，您可以看看[Aptana Studio](http://www.aptana.com/)，它是一个带有 PyDev 和其他东西的 Eclipse IDE。不需要太多配置，以后可能会有用。

# magento - Cronjob 日志消息

> ID：13600761
> 
> 赞同：0
> 
> 时间：2012-11-28T08:25:55.237
> 
> 标签：magento, cron, crontab

在 Magento 的 cronjobs 遇到一些困难之后，我想自定义在重新索引过程之后发送的日志消息。

> 库存状态索引已成功重建
> 
> 产品属性索引重建成功
> 
> 产品价格指数重建成功
> 
> 产品属性索引重建成功
> 
> 产品价格指数重建成功
> 
> 产品属性索引重建成功
> 
> 产品价格指数重建成功

我想添加一个时间戳，但我找不到在哪里更改或编辑这些成功/错误消息。

在我的 magento 安装中，每天晚上大约有 15 个 cronjobs 运行，我想将所有 cronjobs 记录在一个日志文件中，其中包含开始时间戳、结束时间戳和成功/错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:37:25.437

我认为这个出色的 Fabrizio Branca 的扩展程序可以帮助您跟踪 cron 作业流程（我不是他的附属机构:)）它是免费的，您可以从[Fabrizio 站点](http://www.fabrizio-branca.de/magento-cron-scheduler.html)下载它 ，您可以在该站点找到有关扩展程序如何工作的一些信息或从[Magento Connect](http://www.magentocommerce.com/magento-connect/aoe-scheduler.html)

# cache-control - 找不到蒙德里安的 CacheControl 的句柄

> ID：13600763
> 
> 赞同：4
> 
> 时间：2012-11-28T08:26:01.227
> 
> 标签：cache-control, pentaho, mondrian

我使用 Mondrian 作为我的服务器 olap 引擎。

我有一个场景，我的一些维度数据正在发生变化。发生这种情况时，我想清除蒙德里安缓存。

我无法理解如何获得蒙德里安的缓存控制。

我有一个对`OlapConnection`对象的引用，但我找不到任何可以为 CacheControl 提供句柄的方法

有什么建议么？

约西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:06:14.940

bhuang3 给出的答案是对的。要从 olap4j 连接访问缓存控制：

```
OlapConnection.unwrap(mondrian.rolap.RolapConnection.class).getCacheControl(null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:29:08.657

好吧，您可以使用以下 API 来刷新多维数据集的缓存

```
mondrian.olap.CacheControl cacheControl = connection.getCacheControl(null);
mondrian.olap.Schema schema = connection.getSchema();
mondrian.olap.Cube cube = schema.lookupCube(cubeName, false);
mondrian.olap.CacheControl.CellRegion cellRegion = cacheControl.createMeasuresRegion(cube);
cacheControl.flush(cellRegion); 
```

或者您可以刷新模式缓存

```
cacheControl.flushSchemaCache(); 
```

或者，请阅读[此](http://mondrian.pentaho.com/documentation/cache_control.php)文档以获取更多详细信息。

# android - Unable to reach ' if ' condition within Spinner onItemSelected() in android?

> ID：13600767
> 
> 赞同：-1
> 
> 时间：2012-11-28T08:26:11.193
> 
> 标签：android, android-spinner

I create customized spinner for my application. I can get the selected spinner item and i can display it too. But I'm not able to reach my if condition within my spinner's onItemSelected() . I wasn't able to check my conditions within spinner. Where did I make a mistake ? can anybody tell me? And how can i resolve this? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:32:00.910

Just try like this . The if condition will works within spinner onItemSelected() . [http://pastie.org/5452818](http://pastie.org/5452818)

```
 @Override
public void onItemSelected(AdapterView<?> parent, View v, int position,long id)
{

  spinner_value =  parent.getSelectedItem().toString();
  Log.i("spinner_value", ".."+spinner_value);

       if(parent.getItemAtPosition(position).equals("January"))
        {
            Toast.makeText(this, "Success",Toast.LENGTH_SHORT).show();
        }
    }

    public void onNothingSelected(AdapterView<?> parent) 
    {

    } 
```

Just compare with parent.getItemAtPosition(position) it will works..... Thank you.

# internet-explorer - 特定版本的 IE 条件注释不起作用

> ID：13600768
> 
> 赞同：0
> 
> 时间：2012-11-28T08:26:15.640
> 
> 标签：internet-explorer

我只想要ie7 的条件评论。这是我只为ie7做的以下代码。

`<!--[if lte IE 7]> <link href="css/ie7.css" rel="stylesheet"> <![endif]-->`

它在 ie7 上运行良好，但为什么相同的 css 在 ie8 和 ie9 上运行。它应该只适用于ie7吧？代码是否缺少任何内容。如果是，请建议。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:30:04.273

你需要这个：

```
<!--[if IE 7]>
<link href="css/ie7.css" rel="stylesheet">
<![endif]--> 
```

在这里查看更多详细信息：[http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

您正在做的是包括 IE 7 及以下版本的 CSS 文件（lte -> 小于等于）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:31:48.900

用这个-

```
<!--[if IE 7]>
  According to the conditional comment this is IE 7<br />
<![endif]--> 
```

**更新-**

如果它仍然继续，请检查您的网站是否以兼容模式呈现，因为它呈现为 IE7

# php - 如何编码 php 文件以将我的多步骤表单连接到 MySQL 数据库？

> ID：13600769
> 
> 赞同：-3
> 
> 时间：2012-11-28T08:26:26.767
> 
> 标签：php, silverstripe

```
<?php
class JpResearchSurveyDbPage extends DataObject{
static $db = array(
'year_living' => 'Varchar(200)',
'other_public_transport' => 'Varchar(50)',
'year_living1' => 'Varchar(200)',
'type_of_mode_unfamiliar_services' => 'Varchar(50)'
);
enter code here
}
$host="localhost"; 
$username="sgevh_admin"; 
$password="q1w2e3r4t5";  
$db_name="sgevh_test";
$con = mysql_connect("$host","$username","$password");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("$db_name", $con);

$sql="INSERT INTO year (aaa,bbb,ccc,eee)
VALUES
('$_POST[year_living]','$_POST[other_public_transport]','$_POST[type_of_mode_unfamiliar_services]','$_POST[year_living1]')";

    //$sql="INSERT INTO month (ccc)
    //VALUES
    //('$_POST[type_of_mode_unfamiliar_services]')";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
echo "1 record added";
mysql_close($con);
?>` 
```

//这是我们用来将多步表单连接到数据库的测试 php 编码。

```
<?php
class JpResearchSurveyMultiForm extends MultiForm{
public static $start_step = 'JpResearchSurveyFirstStep';
public function finish($data, $form){
parent::finish($data, $form);
$firstStep = $this->getSavedStepByClass('JpResearchSurveyFirstStep');
$_JpResearchSurveyFirstPage = new JpResearchSurveyDbPage();
$firstStep->saveInto($_JpResearchSurveyFirstPage);

$secondStep = $this->getSavedStepByClass('JpResearchSurveySecondStep');
$secondStep->saveInto($_JpResearchSurveyFirstPage);

$_JpResearchSurveyFirstPage->write();
return $this->controller->customise(array(
'Form' => false,
'Content' => 'Thanks for registering!'
))->renderWith('Page');
}
}
?> 
```

//这是测试代码，它指示当我们按下“提交”按钮提交数据时表单的最后一步将做什么。当我们试用表单并使用我们的双页表单提交详细信息时，只有作为表单最后一步的第二页的字段数据存储在数据库中。

这两种编码中的哪一种给我们带来了无法在以前的表单会话中存储字段数据的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:44:42.337

最好将每个步骤保存在数据库中并更新每个步骤。而是使用会话和 cookie 来管理用户输入，并在最后一步将它们存储在数据库中。请记住在之后终止会话

# java - 从 txt 文件中读取每隔一行并保存到数组中

> ID：13600772
> 
> 赞同：0
> 
> 时间：2012-11-28T08:26:38.370
> 
> 标签：java, arrays

作业：你小表弟上的一所学校卖饼干。如果你表弟的班比其他班卖的饼干多，老师就答应带全班去野餐。当然，您的表弟自愿让您跟踪所有销售情况并确定获胜者。

每个班级都由老师的名字标识。每张销售单上都有老师的姓名和售出的箱子数量。您决定创建两个并行数组：一个保存老师的姓名，另一个记录售出的盒子数量。以下是数据示例：

第一个数字给出了班级的数量，然后是老师的名字，然后是售出的盒子数量 15 Smith 3 Courtney ... 依此类推

我的主要问题（因为我可以将它复制为“未来”平行数组）正在让每隔一行保存到一个数组中以存储已售出的盒子，因此数组“boxSold”看起来像

[1] 15
[2] 3

```
 package assignment5Package;

    import java.util.Scanner;

    import java.io.*;

    public class assignment5Demo 
    {

        /**
         * @param args
         * @throws IOException 
         */
        public static void main(String[] args) throws IOException 
        {
            // TODO Auto-generated method stub
            //create arrays, variables
            Scanner keyboard = new Scanner(System.in);
            BufferedReader input = new BufferedReader
                (new FileReader ("/Users/lee/Desktop/class/cs 113/Assignment5/cookies.txt"));

            System.out.println("How many sale slips are there");

            int numSaleSlips = keyboard.nextInt();
            int[] soldBox = new int[numSaleSlips];
            //______String[] teacherName = new String[numSaleSlips];
            int soldBoxIndex;
            int teacherNameIndex;
            //String soldBoxString; (line 50)

            //initializing both strings to 0 and "_"
            for (soldBoxIndex = 0; soldBoxIndex < numSaleSlips; soldBoxIndex++)
            {
                soldBox[soldBoxIndex] = 0;
            }

            //**for (teacherNameIndex = 0; teacherNameIndex < numSaleSlips; teacherNameIndex++)
            //**{
            //**    teacherName[teacherNameIndex] = "_";
            //**}

            //reading from the cookies.txt file
            for (soldBoxIndex = 0; soldBoxIndex < numSaleSlips; soldBoxIndex++)
            {
                if (soldBoxIndex % 2 != 0
                {
                    String soldBoxString;

                    soldBoxString = input.readLine(); //reads in value and assigns/re-assigns
                    soldBox[numSaleSlips] = (int) Double.parseDouble(soldBoxString); //type-casted to fit variable type, converts to double, stores in array
                    System.out.println(soldBox[soldBoxIndex]);
                }
                else 
                {
                    System.out.println("Error at " + soldBoxIndex +".");
                }

            }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:43:02.650

以下可能是一个快速而肮脏的解决方案，但可以完成工作：

```
for (soldBoxIndex = 0; soldBoxIndex < numSaleSlips; soldBoxIndex++)
{
    if (soldBoxIndex % 2 != 0
    {
        String soldBoxString;

        soldBoxString = input.readLine(); //reads in value and assigns/re-assigns
        soldBox[numSaleSlips] = (int) Double.parseDouble(soldBoxString); //type-casted to fit variable type, converts to double, stores in array
        System.out.println(soldBox[soldBoxIndex]);
    }
    else 
    {
        input.readLine(); //read the following line, but ignore its content, effectivly skipping the line
    }

} 
```

您可能还需要稍微处理一下 for 循环的数字，以适应跳过的行。

# .net - 如何在不首先转换为不安全字符串的情况下使用 DPAPI 加密 SecureString 以保存到磁盘？

> ID：13600773
> 
> 赞同：5
> 
> 时间：2012-11-28T08:26:41.543
> 
> 标签：.net, securestring

我想使用 DPAPI 加密 SecureString，以便将其保存到磁盘。

.net DPAPI 类是 ProtectedData 类，但是[ProtectedData.Protect](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.protect%28v=vs.110%29.aspx)有一个采用字节数组的重载。没有接受 SecureString 的重载。

在[Encrypting Passwords in a .NET app.config File](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)中，John Galloway 通过首先将 SecureString 转换为不安全的字符串来利用上述重载。我想避免这种情况，因为它首先破坏了使用 SecureString 的目的。

[ConvertFrom-SecureString](http://technet.microsoft.com/en-us/library/hh849814.aspx) PowerShell cmdlet 似乎可以满足我的需要，因为“如果未指定密钥，则使用 Windows 数据保护 API (DPAPI) 来加密标准字符串表示”，但我不确定如何使用此 cmdlet直接来自.net，或者即使这样做是个好主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T09:26:35.943

Jeff Griffin的博客文章[SecureString: Soup to Nuts, Part I](http://www.griffinscs.com/blog/?p=12)展示了如何做到这一点。方法是将 SecureString 转换为非托管 BSTR，然后使用 P/Invoke 调用非托管 DPAPI 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-04T03:12:46.230

对于将来遇到此问题的任何人，我已经为[SecureString](https://docs.microsoft.com/en-us/dotnet/api/system.security.securestring)编写了一对扩展方法，它们复制了[ProtectedData.Protect](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.protecteddata.protect) (SecureStringExtensions.Protect) 和[ProtectedData.Unprotect](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.protecteddata.unprotect) (SecureStringExtensions.AppendProtected) 的行为，但可以与安全无缝协作字符串而不是字节数组。

它们的设计既安全又健壮，所以我希望它们能派上用场。

```
/*
 * This code is licensed under a Creative Commons Attribution 4.0 International License.
 * See: https://creativecommons.org/licenses/by/4.0/
 */

using System;
using System.Runtime.InteropServices;
using System.Security;
using System.Security.Cryptography;

namespace MyNamespace
{
    /// <summary>Extension methods for <see cref="T:System.Security.SecureString" /> to enable safe serialisation and deserialisation of secure strings. This class cannot be inherited.</summary>
    /// <remarks>The <see cref="M:Protect(SecureString, System.Byte[], DataProtectionScope)" /> and <see cref="M:AppendProtected(SecureString, System.Byte[], System.Byte[], DataProtectionScope)" /> methods can be treated as secure string-based equivalents of <see cref="M:System.Security.Cryptography.ProtectedData.Protect(System.Byte[], System.Byte[], System.Security.Cryptography.DataProtectionScope)" /> and <see cref="M:System.Security.Cryptography.ProtectedData.Unprotect(System.Byte[], System.Byte[], System.Security.Cryptography.DataProtectionScope)" />, respectively.</remarks>
    /// <seealso cref="T:System.Security.Cryptography.ProtectedData" />
    public static class SecureStringExtensions
    {
        /// <summary>Specifies the scope of the data protection to be applied by the <see cref="Protect(SecureString, byte[], DataProtectionScope)" /> and <see cref="AppendProtected(SecureString, byte[], byte[], DataProtectionScope)" /> methods.</summary>
        /// <remarks>This enumeration is equivalent to <see cref="T:System.Security.Cryptography.DataProtectionScope" />.</remarks>
        /// <seealso cref="T:System.Security.Cryptography.DataProtectionScope" />
        public enum DataProtectionScope
        {
            /// <summary>
            /// The protected data is associated with the current user. Only threads running under the current user context can unprotect the data.
            /// </summary>
            CurrentUser,

            /// <summary>
            /// The protected data is associated with the machine context. Any process running on the computer can unprotect data.
            /// This enumeration value is usually used in server-specific applications that run on a server where untrusted users are not allowed access.
            /// </summary>
            LocalMachine
        }

        /// <summary>Encrypts the data in a secure string and returns a byte array that contains the encrypted data.</summary>
        /// <remarks>This method can be treated as equivalent to <see cref="M:System.Security.Cryptography.ProtectedData.Protect(System.Byte[], System.Byte[], System.Security.Cryptography.DataProtectionScope)" />, except that it encrypts a secure string instead of a byte array.</remarks>
        /// <param name="secureString">The secure string.</param>
        /// <param name="optionalEntropy">An optional additional byte array used to increase the complexity of the encryption, or <see langword="null" /> for no additional complexity.</param>
        /// <param name="scope">One of the enumeration values that specifies the scope of encryption.</param>
        /// <returns>A byte array representing the encrypted data.</returns>
        /// <exception cref="T:System.Security.Cryptography.CryptographicException">The encryption failed.</exception>
        /// <exception cref="T:System.OutOfMemoryException">The system ran out of memory while encrypting the data.</exception>
        /// <seealso cref="M:System.Security.Cryptography.ProtectedData.Protect(System.Byte[], System.Byte[], System.Security.Cryptography.DataProtectionScope)" />
        public static byte[] Protect(this SecureString secureString, byte[] optionalEntropy, DataProtectionScope scope)
        {
            byte[] result = null;
            NativeMethods.DATA_BLOB dataIn = null;
            NativeMethods.DATA_BLOB entropy = null;
            NativeMethods.DATA_BLOB dataOut = new NativeMethods.DATA_BLOB();
            GCHandle ptrOptionalEntropy = new GCHandle();

            try
            {
                // +++ Handle secureString
                dataIn = new NativeMethods.DATA_BLOB
                {
                    cbData = secureString.Length * sizeof(char),
                    pbData = Marshal.SecureStringToGlobalAllocUnicode(secureString)
                };
                // ---

                // +++ Handle optionalEntropy
                if (optionalEntropy != null)
                {
                    ptrOptionalEntropy = GCHandle.Alloc(optionalEntropy, GCHandleType.Pinned);

                    entropy = new NativeMethods.DATA_BLOB
                    {
                        cbData = optionalEntropy.Length,
                        pbData = ptrOptionalEntropy.AddrOfPinnedObject()
                    };
                }
                // ---

                // +++ Handle scope
                NativeMethods.CryptProtectFlags flags = NativeMethods.CryptProtectFlags.CRYPTPROTECT_UI_FORBIDDEN;

                if (scope.HasFlag(DataProtectionScope.LocalMachine))
                    flags |= NativeMethods.CryptProtectFlags.CRYPTPROTECT_LOCAL_MACHINE;
                // ---

                if (!NativeMethods.CryptProtectData(dataIn, IntPtr.Zero, entropy, IntPtr.Zero, IntPtr.Zero, flags, dataOut))
                    throw new CryptographicException(Marshal.GetLastWin32Error());
                else
                {
                    if (dataOut.pbData == IntPtr.Zero)
                        throw new OutOfMemoryException();

                    result = new byte[dataOut.cbData];
                    Marshal.Copy(dataOut.pbData, result, 0, dataOut.cbData);
                }
            }
            finally
            {
                if (dataOut.pbData != IntPtr.Zero)
                {
                    NativeMethods.ZeroMemory(dataOut.pbData, (UIntPtr)dataOut.cbData);
                    Marshal.FreeHGlobal(dataOut.pbData);
                }

                if (ptrOptionalEntropy.IsAllocated)
                    ptrOptionalEntropy.Free();

                if (dataIn != null)
                    Marshal.ZeroFreeGlobalAllocUnicode(dataIn.pbData);
            }

            return (result);
        }

        /// <summary>Decrypts the data in a specified byte array and appends it to a secure string.</summary>
        /// <remarks>This method can be treated as equivalent to <see cref="M:System.Security.Cryptography.ProtectedData.Unprotect(System.Byte[], System.Byte[], System.Security.Cryptography.DataProtectionScope)" />, except that it appends the decrypted data to a secure string instead returning it in a byte array.</remarks>
        /// <param name="secureString">The secure string.</param>
        /// <param name="encryptedData">A byte array containing data encrypted using the <see cref="M:Protect(SecureString, System.Byte[], DataProtectionScope)" /> method.</param>
        /// <param name="optionalEntropy">An optional additional byte array that was used to encrypt the data, or <see langword="null" /> if the additional byte array was not used.</param>
        /// <param name="scope">One of the enumeration values that specifies the scope of data protection that was used to encrypt the data.</param>
        /// <exception cref="T:System.ArgumentNullException">The <paramref name="encryptedData" /> parameter is <see langword="null" />.</exception>
        /// <exception cref="T:System.InvalidOperationException">The secure string is read only.</exception>
        /// <exception cref="T:System.Security.Cryptography.CryptographicException">The decryption failed.</exception>
        /// <exception cref="T:System.OutOfMemoryException">The system ran out of memory while decrypting the data.</exception>
        /// <seealso cref="M:System.Security.Cryptography.ProtectedData.Unprotect(System.Byte[], System.Byte[], System.Security.Cryptography.DataProtectionScope)" />
        public static void AppendProtected(this SecureString secureString, byte[] encryptedData, byte[] optionalEntropy, DataProtectionScope scope)
        {
            NativeMethods.DATA_BLOB dataIn = null;
            NativeMethods.DATA_BLOB entropy = null;
            NativeMethods.DATA_BLOB dataOut = new NativeMethods.DATA_BLOB();
            GCHandle ptrEncryptedData = new GCHandle();
            GCHandle ptrOptionalEntropy = new GCHandle();

            if (encryptedData == null)
                throw new ArgumentNullException("encryptedData");

            if (encryptedData.IsReadOnly)
                throw new InvalidOperationException();

            try
            {
                // +++ Handle encryptedData
                ptrEncryptedData = GCHandle.Alloc(encryptedData, GCHandleType.Pinned);

                dataIn = new NativeMethods.DATA_BLOB
                {
                    cbData = encryptedData.Length,
                    pbData = ptrEncryptedData.AddrOfPinnedObject()
                };
                // ---

                // +++ Handle optionalEntropy
                if (optionalEntropy != null)
                {
                    ptrOptionalEntropy = GCHandle.Alloc(optionalEntropy, GCHandleType.Pinned);

                    entropy = new NativeMethods.DATA_BLOB
                    {
                        cbData = optionalEntropy.Length,
                        pbData = ptrOptionalEntropy.AddrOfPinnedObject()
                    };
                }
                // ---

                // +++ Handle scope
                NativeMethods.CryptProtectFlags flags = NativeMethods.CryptProtectFlags.CRYPTPROTECT_UI_FORBIDDEN;

                if (scope.HasFlag(DataProtectionScope.LocalMachine))
                    flags |= NativeMethods.CryptProtectFlags.CRYPTPROTECT_LOCAL_MACHINE;
                // ---

                if (!NativeMethods.CryptUnprotectData(dataIn, IntPtr.Zero, entropy, IntPtr.Zero, IntPtr.Zero, flags, dataOut))
                    throw new CryptographicException(Marshal.GetLastWin32Error());
                else
                {
                    if (dataOut.pbData == IntPtr.Zero)
                        throw new OutOfMemoryException();

                    // Sanity check: can't be a valid string if length is not a multiple of sizeof(char)
                    if ((dataOut.cbData % sizeof(char)) != 0)
                        throw new CryptographicException();

                    for (int i = 0; i < dataOut.cbData; i += sizeof(char))
                        secureString.AppendChar((char)Marshal.ReadInt16(dataOut.pbData, i));
                }
            }
            finally
            {
                if (dataOut.pbData != IntPtr.Zero)
                {
                    NativeMethods.ZeroMemory(dataOut.pbData, (UIntPtr)dataOut.cbData);
                    Marshal.FreeHGlobal(dataOut.pbData);
                }

                if (ptrOptionalEntropy.IsAllocated)
                    ptrOptionalEntropy.Free();

                if (ptrEncryptedData.IsAllocated)
                    ptrEncryptedData.Free();
            }
        }

        private static class NativeMethods
        {
            [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Design", "CA1049:TypesThatOwnNativeResourcesShouldBeDisposable")]
            [StructLayout(LayoutKind.Sequential)]
            public class DATA_BLOB
            {
                public int cbData;
                public IntPtr pbData;
            }

            [Flags]
            public enum CryptProtectFlags : uint
            {
                CRYPTPROTECT_UI_FORBIDDEN = 0x01,
                CRYPTPROTECT_LOCAL_MACHINE = 0x04,
                CRYPTPROTECT_VERIFY_PROTECTION = 0x40
            }

            [DllImport("kernel32.dll", EntryPoint = "RtlZeroMemory")]
            public static extern void ZeroMemory(IntPtr destination, UIntPtr length);

            [DllImport("crypt32.dll", SetLastError = true)]
            public static extern bool CryptProtectData(DATA_BLOB pDataIn, IntPtr szDataDescr, DATA_BLOB pOptionalEntropy, IntPtr pvReserved, IntPtr pPromptStruct, CryptProtectFlags dwFlags, DATA_BLOB pDataOut);

            [DllImport("crypt32.dll", SetLastError = true)]
            public static extern bool CryptUnprotectData(DATA_BLOB pDataIn, IntPtr ppszDataDescr, DATA_BLOB pOptionalEntropy, IntPtr pvReserved, IntPtr pPromptStruct, CryptProtectFlags dwFlags, DATA_BLOB pDataOut);
        }
    }
} 
```

例子：

```
byte[] entropy = { 1, 2, 3, 4, 5 }; // Example entropy
string password = "This is my password";    // Don't store passwords like this!

// Add password to secure string
SecureString ss1 = new SecureString();
Array.ForEach(password.ToCharArray(), ss1.AppendChar);
ss1.MakeReadOnly();

// Encrypt secure string
byte[] protectedBytes = ss1.Protect(entropy, SecureStringExtensions.DataProtectionScope.CurrentUser);
Console.WriteLine("Encrypted secure string: {0}", Convert.ToBase64String(protectedBytes));

// Decrypt and add to a new secure string
SecureString ss2 = new SecureString();
ss2.AppendProtected(protectedBytes, entropy, SecureStringExtensions.DataProtectionScope.CurrentUser);
ss2.MakeReadOnly(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-23T17:20:05.577

在这个周末进行了大量挖掘之后，我想我已经想出了如何做到这一点，尽管让我先指出我绝不是专家，而且我自己仍然只是想出大部分。

据我所知，现在在使用 DPAPI 加密 SecureStrings 方面存在一些 API 差距。通过查看可用的方法，并阅读Jeff Griffin 的[SecureString: Soup to Nuts，第一部分](http://www.griffinscs.com/?p=12)，您似乎不能使用方便的花花公子 ProtectedData.Protect 和 Unprotect 方法，因为它们不采用字节数组，如果您将 SecureString 转换为字节数组，它将坐在那里不受保护地再次破坏目的。

因此解决方案涉及使用 P/Invoke 直接调用 ProtectedData 方法使用的底层 C++ 命令。我相信这就是 Jeff Griffin 的博客所做的，但实际扩展方法的链接似乎已经死了，所以我试图拼凑它们可能看起来的样子，这样它们就不会迷路，但同样，我没有安全感专家所以对这一切持保留态度：

我还发现这个示例作为参考非常有用：[http ://www.obviex.com/samples/dpapi.aspx](http://www.obviex.com/samples/dpapi.aspx)

```
public static class EncryptionExtensions
{
    public static string Decrypt(this byte[] data)
    {
        DATA_BLOB plainTextBlob = new DATA_BLOB();//we need to pass all of these as parameters
        DATA_BLOB cipherTextBlob = new DATA_BLOB();
        DATA_BLOB entropyBlob = new DATA_BLOB();//though atm I'm omitting entropy so this will just be empty.

        CRYPTPROTECT_PROMPTSTRUCT prompt = new CRYPTPROTECT_PROMPTSTRUCT();
        InitPrompt(ref prompt);//make it empty.

        try
        {
            // Convert ciphertext bytes into a BLOB structure.
            try
            {
                // Use empty array for null parameter.
                if (data == null)
                    data = new byte[0];

                // Allocate memory for the BLOB data.
                cipherTextBlob.pbData = Marshal.AllocHGlobal(data.Length);

                // Make sure that memory allocation was successful.
                if (cipherTextBlob.pbData == IntPtr.Zero)
                    throw new Exception(
                        "Unable to allocate data buffer for BLOB structure.");

                // Specify number of bytes in the BLOB.
                cipherTextBlob.cbData = data.Length;

                // Copy data from original source to the BLOB structure.
                Marshal.Copy(data, 0, cipherTextBlob.pbData, data.Length);
            }
            catch (Exception ex)
            {
                throw new Exception(
                    "Cannot initialize ciphertext BLOB.", ex);
            }

            // Call DPAPI to decrypt data.
            bool success = CryptUnprotectData(ref cipherTextBlob, null, ref entropyBlob, IntPtr.Zero, ref prompt, CryptProtectFlags.CRYPTPROTECT_UI_FORBIDDEN, ref plainTextBlob);

            // Check the result.
            if (!success)
            {
                // If operation failed, retrieve last Win32 error.
                int errCode = Marshal.GetLastWin32Error();

                // Win32Exception will contain error message corresponding
                // to the Windows error code.
                throw new Exception(
                    "CryptUnprotectData failed.", new Win32Exception(errCode));
            }

            return Marshal.PtrToStringAuto(plainTextBlob.pbData);//convert your pointer back into a string. Not sure why PtrToStringBTSR doesn't work but Auto seems to.
        }
        catch (Exception ex)
        {
            throw new Exception("DPAPI was unable to decrypt data.", ex);
        }
        // Free all memory allocated for BLOBs.
        finally
        {
            if (plainTextBlob.pbData != IntPtr.Zero)
                Marshal.FreeHGlobal(plainTextBlob.pbData);

            if (cipherTextBlob.pbData != IntPtr.Zero)
                Marshal.FreeHGlobal(cipherTextBlob.pbData);

            if (entropyBlob.pbData != IntPtr.Zero)
                Marshal.FreeHGlobal(entropyBlob.pbData);
        }
    }

    public static Byte[] Encrypt(this SecureString self, int length)
    {
        IntPtr unmanagedString = Marshal.SecureStringToBSTR(self);//get the basic unmanaged string representation
        int len = Marshal.ReadInt32(unmanagedString, -4) + 2; //get the length of the bstr structure from it's index, this doesn't include the null bytes hence + 2.

        DATA_BLOB plainTextBlob = new DATA_BLOB();//initiate our blobs
        DATA_BLOB cipherTextBlob = new DATA_BLOB();
        DATA_BLOB entropyTextBlob = new DATA_BLOB();
        CRYPTPROTECT_PROMPTSTRUCT prompt = new CRYPTPROTECT_PROMPTSTRUCT();

        try
        {
            //Processing code here. Resist the urge to Marshal.PtrToStringBSTR.

            plainTextBlob.cbData = len;//set the length of the array
            plainTextBlob.pbData = unmanagedString;//set the data to our pointer.
            InitPrompt(ref prompt);

            // Call DPAPI to encrypt data.

            bool success = CryptProtectData(ref plainTextBlob, null, ref entropyTextBlob, IntPtr.Zero, ref prompt, CryptProtectFlags.CRYPTPROTECT_UI_FORBIDDEN, ref cipherTextBlob);

            // Check the result.
            if (!success)
            {
                // If operation failed, retrieve last Win32 error.
                int errCode = Marshal.GetLastWin32Error();

                // Win32Exception will contain error message corresponding
                // to the Windows error code.
                throw new Exception(
                    "CryptProtectData failed.", new Win32Exception(errCode));
            }

            // Allocate memory to hold ciphertext.
            byte[] cipherTextBytes = new byte[cipherTextBlob.cbData];

            // Copy ciphertext from the BLOB to a byte array.
            Marshal.Copy(cipherTextBlob.pbData,
                            cipherTextBytes,
                            0,
                            cipherTextBlob.cbData);

            // Return the result.
            return cipherTextBytes;

        }
        finally
        {
            Marshal.ZeroFreeBSTR(unmanagedString); //free the buffer holding our secret

            if (cipherTextBlob.pbData != IntPtr.Zero)
                Marshal.FreeHGlobal(cipherTextBlob.pbData);

        }
    }

    //The below regions are all the PInvoke signatures. These translate C++ commands into usable C# commands. These come directly from pinvoke.net 
    #region PInvokeSignatures

    /// <summary>
    /// Initializes empty prompt structure.
    /// </summary>
    /// <param name="ps">
    /// Prompt parameter (which we do not actually need).
    /// </param>
    private static void InitPrompt(ref CRYPTPROTECT_PROMPTSTRUCT ps)
    {
        ps.cbSize = Marshal.SizeOf(typeof(CRYPTPROTECT_PROMPTSTRUCT));
        ps.dwPromptFlags = 0;
        ps.hwndApp = IntPtr.Zero;
        ps.szPrompt = null;
    }

    [DllImport("Crypt32.dll", SetLastError = true, CharSet = System.Runtime.InteropServices.CharSet.Auto)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool CryptProtectData(
        ref DATA_BLOB pDataIn,
        String szDataDescr,
        ref DATA_BLOB pOptionalEntropy,
        IntPtr pvReserved,
        ref CRYPTPROTECT_PROMPTSTRUCT pPromptStruct,
        CryptProtectFlags dwFlags,
        ref DATA_BLOB pDataOut
    );

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    private struct DATA_BLOB
    {
        public int cbData;
        public IntPtr pbData;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    private struct CRYPTPROTECT_PROMPTSTRUCT
    {
        public int cbSize;
        public CryptProtectPromptFlags dwPromptFlags;
        public IntPtr hwndApp;
        public String szPrompt;
    }

    [Flags]
    private enum CryptProtectPromptFlags
    {
        // prompt on unprotect
        CRYPTPROTECT_PROMPT_ON_UNPROTECT = 0x1,

        // prompt on protect
        CRYPTPROTECT_PROMPT_ON_PROTECT = 0x2
    }

    [Flags]
    private enum CryptProtectFlags
    {
        // for remote-access situations where ui is not an option
        // if UI was specified on protect or unprotect operation, the call
        // will fail and GetLastError() will indicate ERROR_PASSWORD_RESTRICTION
        CRYPTPROTECT_UI_FORBIDDEN = 0x1,

        // per machine protected data -- any user on machine where CryptProtectData
        // took place may CryptUnprotectData
        CRYPTPROTECT_LOCAL_MACHINE = 0x4,

        // force credential synchronize during CryptProtectData()
        // Synchronize is only operation that occurs during this operation
        CRYPTPROTECT_CRED_SYNC = 0x8,

        // Generate an Audit on protect and unprotect operations
        CRYPTPROTECT_AUDIT = 0x10,

        // Protect data with a non-recoverable key
        CRYPTPROTECT_NO_RECOVERY = 0x20,

        // Verify the protection of a protected blob
        CRYPTPROTECT_VERIFY_PROTECTION = 0x40
    }

    [DllImport("Crypt32.dll", SetLastError = true, CharSet = System.Runtime.InteropServices.CharSet.Auto)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool CryptUnprotectData(
        ref DATA_BLOB pDataIn,
        StringBuilder szDataDescr,
        ref DATA_BLOB pOptionalEntropy,
        IntPtr pvReserved,
        ref CRYPTPROTECT_PROMPTSTRUCT pPromptStruct,
        CryptProtectFlags dwFlags,
        ref DATA_BLOB pDataOut
    );

    #endregion
} 
```

# ruby - 从 ruby 中的服务器响应中获取值

> ID：13600774
> 
> 赞同：0
> 
> 时间：2012-11-28T08:26:43.517
> 
> 标签：ruby, parsing, response

我向服务器发送请求，服务器返回响应。如果我打印此响应，它看起来与下面提到的完全一样（带有数组和大括号）。我是 Ruby 新手，所以我有两个问题： 1\. 我应该将此响应添加到什么结构中？2\. 如何从该响应中获取值（例如 user_id 或 user_status 的值）。如何摆脱价值引号

**请求代码：**

```
def userGet(user_id_or_email)
uri = URI(SRV + '/userGet')
http = Net::HTTP.new(uri.host,uri.port)
req = Net::HTTP::Post.new(uri.path)
req['bla-bla'] = 'bla-bla'
req.set_form_data('search' => user_id_or_email)
res = http.request(req)
puts(res.read_body)
end 
```

**puts(res) 的输出**

```
array (
  'user_id' => 301877459,
  'login' => '0301877459',
  'email' => 'YS5raG96eWFfdHZhc2lsaWlAY29ycC5iYWRvby5jb20=',
  'passwd' => 'cc03e747a6afbbcbf8be7668acfebee5',
  'partner_id' => '105',
  'user_status' => 'active',
  'nickname' => 'Test',
  'fullname' => 'Test',
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:17:14.457

正如其他评论者所提到的，第一步是确定响应的编码。如果您可以轻松更改服务器返回数据的方式，则可以输出有效的 JSON 并使用诸如[this](http://flori.github.com/json/ "http://flori.github.com/json/")之类的 gem 。如果你不能，那么解析这种类型的响应的临时方法是定义一个这样的函数：

```
def parseResult(res)  
  # Remove the array wrapper and any leading/trailing whitespace
  parsed_string = res.gsub(/^\s*array\s*\(/, "").gsub(/[\s,]*\)[\s,]*$/, "")

  # Split the string into an array of key-value tuples
  parsed_array = parsed_string.split(',').collect do |tuple|
    tuple.split("=>").collect do |x|
      x.match(/^[\s',]*([^',]*)[\s',]*$/)[1]
    end 
  end

  # Convert the array of tuples into a hash for easy access
  Hash[parsed_array]
end 
```

这与[sawa](https://stackoverflow.com/users/314166/sawa%20https://stackoverflow.com/users/314166/sawa)的方法类似，但它假设您不能信任服务器返回的数据，因此无法安全地使用 eval。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:56:51.023

不知道这`array ( ... )`意味着什么，但假设它意味着一个哈希，你可以这样做：

```
string.eval(
  string
  .sub(/\A\s*array\s*\(/, "{")
  .sub(/\)\s*\z/, "}")
) 
```

# iphone - NSLog 修复缺失值/崩溃？

> ID：13600775
> 
> 赞同：4
> 
> 时间：2012-11-28T08:26:48.017
> 
> 标签：iphone, objective-c, ios

我的应用使用`Social.framework`和从 Facebook 导入喜欢`ACAccount`。我保存 Facebook 帐户标识符，`NSUserDefaults`以便应用程序可以在后续启动时自动导入新的喜欢。第一次导入工作正常。`ACAccount`问题在于在随后的启动中重新实例化。

所以我有一个`facebookAccount`看起来像这样的吸气剂：

```
- (ACAccount *)facebookAccount {
    if(!_facebookAccount) {
        ACAccountStore *accountStore = [[ACAccountStore alloc] init];
        NSString *accountIdentifier = [[NSUserDefaults standardUserDefaults] valueForKey:SWFacebookAccountIdentifierKey];

        if(accountIdentifier)
            _facebookAccount = [accountStore accountWithIdentifier:accountIdentifier];

    }
    return _facebookAccount;
} 
```

这会返回一个不完整的`ACAccount`对象：

```
type:(null)
identifier: B6E94A67-AF94-408F-A618-6CD4D78564DC
accountDescription: Facebook
username: samvermette@gmail.com
objectID: x-coredata://589C098E-F829-4284-841B-EE4A0003FF21/Account/p2
enabledDataclasses: {(
    )}
enableAndSyncableDataclasses: {(
    )}
properties: {
    fullname = "Sam Vermette";
    uid = 716308665;
}
parentAccount: (null)
owningBundleID:(null) 
```

这从最终使用此对象的方法中记录下来。如您所见，`type`值为`null`，这使我的应用程序抛出以下异常：

> NSInvalidArgumentException', reason: '此请求的帐户类型无效

现在，最奇怪的是，如果我在 getter`NSLog(_facebookAccount)`之前添加，键不为空，我的应用程序不会崩溃。我意识到修复此问题的 NSLog 可能暗示我的代码有问题，但我无法弄清楚到底是什么。有任何想法吗？`return``type`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:08:16.353

问题最终是 ARC 自动释放拥有`ACAccount`对象的帐户存储。

我通过将我的帐户存储分配给强大的属性来解决此问题

```
@property (nonatomic, strong) ACAccountStore *accountStore; 
```

# php - 来自模块控制器的 Opencart 调用函数

> ID：13600777
> 
> 赞同：3
> 
> 时间：2012-11-28T08:26:48.370
> 
> 标签：php, ajax, opencart

我试过在 Opencart 论坛（[线程链接](http://forum.opencart.com/viewtopic.php?f=20&t=86175&p=349196#p349196)）上问这个问题，但仍然无法完全理解，尽管有人试图向我解释这一点。我希望这里有人可以提供帮助。

我已经编写了一些扩展，之前我在控制器中有一个从视图调用的自定义函数，例如：如果我编辑 admin/controller/sale/customer.php 并在 index() 函数之后添加

```
public function foo(){
//code here
} 
```

我可以通过使用访问它

```
index.php?route=sale/customer/foo 
```

现在我在目录中有一个模块，我可以从视图中访问它的控制器中的一个函数，在下面的示例“foo”中？

my_module.php：

```
class ControllerModuleMyModule extends Controller {
   protected function index($setting) {
...
}
public function foo(){
...
} 
```

基本上，我想从模块所在的任何页面/路由对其进行 AJAX 调用。提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:59:34.097

这可以通过与任何模块相同的方式完成。例如，如果您添加`foo()`到`/catalog/controller/module/cart.php`您将使用

```
index.php?route=module/cart/foo 
```

与任何其他可访问的模块相比，模块控制器没有什么特别之处

# groovy - 如何使用 HTTPBuilder (HttpClient) 下载文件？

> ID：13600780
> 
> 赞同：3
> 
> 时间：2012-11-28T08:26:51.260
> 
> 标签：groovy, httpbuilder

我需要下载并保存文件。我正在尝试使用`HTTPBuilder`，因为它具有简单的 API 并***支持 cookies***。我写了以下代码：

```
//create new httpBuilder and set cookies
def httpBuilder = ...
def file = ...  
def inputStream = httpBuilder.get(uri: urlData.url, contentType: ContentType.BINARY)
FileUtils.copyInputStreamToFile(inputStream) 
```

1.  如何检查文件是否正确下载（不仅仅是文件的一部分）？
2.  `java.lang.OutOfMemoryError: Java heap space`线上出现大文件异常`def inputStream = httpBuilder.get...`怎么解决？
3.  下载文件可能不是最好的选择`HTTPBuilder`。下载***带有 cookie 支持***的文件的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:59:44.807

您是否尝试过使用自定义响应处理逻辑的 HttpBuilder GET 请求：

```
httpBuilder.get(uri: urlData.url, contentType: ContentType.BINARY) { 
   resp, inputStream ->
       FileUtils.copyInputStreamToFile(inputStream)
} 
```

如果 HttpBuilder 有奇怪的问题，那么您总是可以使用经过验证的、真正的[Apache HttpClient API](http://hc.apache.org/httpcomponents-client-ga/index.html)，它具有完整的 cookie 支持。

```
HttpGet req = new HttpGet(url);
HttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(req);
// validate response code, etc.
InputStream inputStream = response.getEntity().getContent(); 
```

您可以在执行请求时添加一个 localContext 来管理 cookie。

# java - eclipse中的空源选项卡

> ID：13600783
> 
> 赞同：2
> 
> 时间：2012-11-28T08:27:10.463
> 
> 标签：java, android, eclipse

当我打开我的 Java 文件时 - 我看到了......什么也没有

![在此处输入图像描述](../Images/6393f72606a7e89ecfb37afe3518409d.png)

但是当我重新启动 Eclipse - 一切都再次工作......之前它不会打开我的项目的另一个文件

**怎么了？我每次都无法重新启动eclipse**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:00:35.500

右键单击项目的根目录并选择`Refresh`. 可能文件与文件系统不同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:50:36.860

这可能是安装eclipse的问题。我建议你重新安装eclipse和adt插件。

# .htaccess - .htaccess 使用 GET 参数重写

> ID：13600784
> 
> 赞同：1
> 
> 时间：2012-11-28T08:27:11.350
> 
> 标签：.htaccess

我试图将这样的链接转换为
`http://localhost/photohosting/user/view.php?img=60`
用户浏览器中的类似内容：
`http://localhost/photohosting/60`
这里我的 .htacces 代码
`RewriteEngine on`
`RewriteRule ^view.php(.*)$ /photohosting/user/view.php?img=$1 [L,QSA]`
我不熟悉 .htaccess 所以我找不到错误。为什么这段代码不起作用？更新：我已将我的 .htaccess 更新为： `RewriteRule ^([a-zA-Z0-9_-]+)$ user/view.php?img=$1`现在链接类似的`http://localhost/photohosting/60`作品，但它错过了参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:46:40.697

尝试以下规则：

```
RewriteRule photohosting/([0-9]+)$ /photohosting/user/view.php?img=$1 [L,QSA] 
```

# java - 获取 Null 值 + 可能查询不起作用

> ID：13600785
> 
> 赞同：1
> 
> 时间：2012-11-28T08:27:12.287
> 
> 标签：java, jsp, servlets, nullpointerexception

实际上，我在我的应用程序中遵循 mvc-3 层架构。这是我的搜索选项的实现。在我的 servlet（控制器）中，我正在这样做：

```
 String select = request.getParameter("select");  // getting value
        String search = request.getParameter("search");  // getting value
        request.setAttribute("select", select);
        request.setAttribute("search", search);
        System.out.println("Select : "+select+" Search : "+search);

        int page = 1;
        int recordsPerPage = 20;
        if(request.getParameter("page") != null)
            page = Integer.parseInt(request.getParameter("page"));
        SearchDAO searchDAO=new SearchDAO();
        List<User> list1=searchDAO.searchAllUsers((page-1)*recordsPerPage,recordsPerPage,select,search);  //getting null value,doing SOP of list1
        int noOfRecords = searchDAO.getNoOfRecords();  //getting null value,doing SOP
        int noOfPages = (int) Math.ceil(noOfRecords * 1.0 / recordsPerPage);  //getting null value,doing SOP
        session.setAttribute("noOfRecords", noOfRecords);
        request.setAttribute("searchList", list1);
        request.setAttribute("noOfPages", noOfPages);
        request.setAttribute("currentPage", page); 
```

在 SearchDAO 中是：

```
public class SearchDAO {
private int noOfRecords;
Connection connection;
Statement stmt;

    public List<User> searchAllUsers(int offset ,int noOfRecords,String select,String search){
    private static Connection getConnection() throws SQLException,ClassNotFoundException{
    Connection con = ConnectionFactory.getInstance().getConnection();
    return con;  //ConnectionFactory is class for making the connection to DB.
}
     String query="select SQL_CALC_FOUND_ROWS * from info where '"+select+
"' like '%"+search+"%' order by serialNo asc limit 
" + offset + " , " + noOfRecords;

    List<User> list1 = new ArrayList<User>();
    User user1=null;

    try {
        connection = getConnection();
        stmt = connection.createStatement();
        ResultSet rs=stmt.executeQuery(query);
        while(rs.next()){
        user1=new User();
        user1.setSerial(rs.getInt(1));
            user1.setName(rs.getString(2));
            user1.setEmail(rs.getString(3));
            list1.add(user1);
            }

        rs.close();
        rs = stmt.executeQuery("SELECT FOUND_ROWS()");
        if(rs.next())
            this.noOfRecords = rs.getInt(1); 

    } catch (SQLException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }finally
    {
        try {
            if(stmt != null)
                stmt.close();
            if(connection != null)
                connection.close();
            } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    return list1;

}

public int getNoOfRecords() {
    return noOfRecords;
}
} 
```

*   已编辑如果我没有遵循正确的 mvc 架构，请随时发表评论并纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:44:40.367

AFAIK，创建一个 bean 类，在该类的帮助下，您可以在控制器和 DAO 之间进行通信，您无法使用 request.getAttribute（在您的 DAO 中）来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:32:57.690

*   检查您是否能够在 request.getParameter() 中检索参数；调用你的 servlet

*   检查您是否能够在请求范围内存储参数，例如
    request.setAttribute() 调用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:36:08.347

你的担心是对的：

```
'%"+request.getParameter("search)+"%' 
```

1.  首先，您从未在 SearchDAO 中初始化请求，并且您在其实例上调用 getParameter，因此 NullPointerException
2.  其次，您的 seachDAO 将如何获得请求？？，它不是一个 servlet，它只是简单的 POJO

# java - 用java的图形类画一条直线

> ID：13600786
> 
> 赞同：3
> 
> 时间：2012-11-28T08:27:20.993
> 
> 标签：java

我需要从两点画一条线，到目前为止我所做的是使用`drawLine(x1,y1,x2,y2)`. 但我想做的是画一条与这两点相交的线`(x1,y1)`和`(x2,y2)`。

我不想*在*它们之间画一条线，这是我所拥有的和我想要做的图像：

![线条图](../Images/bbf13913df503e6ec38b970a4e60cf96.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:32:40.200

你可以使用一些数学。得到你的线路的增加。你应该知道函数

f(x) = mx + b。使用您已经获得的两个点，您可以计算框架边界处的另外两个点，并在它们之间画一条线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:33:17.597

您需要计算线与图形上下文边界相交的坐标。

如果您有 (x1,y1) 和 (x2,y2)，请计算 x_a 和 y_a，使得 (x_a,0) 和 (0,y_a) 位于线上。如果 x_a = 0，则该行将从左边缘开始。如果 y_a = 0，则线将从上边缘开始。

重复该行的底部/右侧坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T16:07:19.607

Bresenham 线算法

```
private int sign (int x) {
    return (x > 0) ? 1 : (x < 0) ? -1 : 0;  
}

public void drawBresenhamLine (int xstart, int ystart, int xend, int yend, Graphics g){
    int x, y, dx, dy, incx, incy, pdx, pdy, es, el, err;

    dx = xend - xstart;
    dy = yend - ystart;

    incx = sign(dx);

    incy = sign(dy);

    if (dx < 0) dx = -dx;
    if (dy < 0) dy = -dy;

    if (dx > dy){
        pdx = incx; pdy = 0;
        es = dy;    el = dx;
    } else {
        pdx = 0;    pdy = incy;
        es = dx;    el = dy;
    }

    x = xstart;
    y = ystart;
    err = el/2;
    g.drawLine (x, y, x, y);

    for (int t = 0; t < el; t++)//if I multiply el a line will be longer
    {
        err -= es;
        if (err < 0) {
            err += el;
            x += incx;
            y += incy;
        } else {
            x += pdx;
            y += pdy;
        }

        g.drawLine (x, y, x, y);
    }
} 
```

# ios - 是否可以在 Info.plist 中设置特定于设备的 UIRequiredDeviceCapabilities

> ID：13600787
> 
> 赞同：1
> 
> 时间：2012-11-28T08:27:27.373
> 
> 标签：ios, app-store, info.plist

那么是否可以在 Info.plist 中设置特定于设备的 UIRequiredDeviceCapabilities，例如 UIRequiredDeviceCapabilities~ipod、UIRequiredDeviceCapabilities~ipad。我想支持的设备是：ipod 5+、iphone 4+、ipad 2+；在将应用程序发布到应用商店之前，是否可以测试这些限制。谢谢。关于特定于设备的键：http: [//developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:35:02.670

不，你不能。您只能请求**功能**- 您只能在运行时检查模型

也就是说，您可以结合某些功能来排除设备模型组

# c - 函数名周围的括号是什么意思？

> ID：13600790
> 
> 赞同：222
> 
> 时间：2012-11-28T08:27:44.917
> 
> 标签：c, function, parentheses

在我的一个项目源文件中，我找到了这个 C 函数定义：

```
int (foo) (int *bar)
{
    return foo (bar);
} 
```

注意： 旁边没有星号`foo`，所以它不是函数指针。或者是吗？递归调用在这里发生了什么？

* * *

## 回答 #1

> 赞同：338
> 
> 时间：2012-11-28T08:30:46.817

在没有任何预处理器的情况下，`foo`的签名相当于

```
int foo (int *bar) 
```

我看到人们在函数名称周围加上看似不必要的括号的唯一情况是，当同时存在同名的函数和类似函数的宏时，程序员想要防止宏扩展。

这种做法起初可能看起来有点奇怪，但 C 库通过[提供一些具有相同名称的宏和函数](https://softwareengineering.stackexchange.com/questions/159846/why-does-the-c-library-use-macros-and-functions-with-same-name)开创了先例。

一个这样的函数/宏对是`isdigit()`. 该库可能将其定义如下：

```
/* the macro */
#define isdigit(c) ...

/* the function */
int (isdigit)(int c) /* avoid the macro through the use of parentheses */
{
  return isdigit(c); /* use the macro */
} 
```

您的函数看起来几乎与上面相同，所以我怀疑这也是您的代码中发生的事情。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-28T08:34:20.957

括号不会更改声明 - 它仍然只是定义一个名为`foo`.

使用它们的原因几乎可以肯定是因为有一个类似函数的宏叫做`foo`定义：

```
#define foo(x) ... 
```

在函数声明中使用`(foo)`可防止此宏在此处展开​​。因此，可能发生的情况是，`foo()`正在定义一个函数，其主体从类函数宏扩展而来`foo`。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-28T08:30:34.393

括号没有意义。
您显示的代码不过是无限递归。

在定义函数指针时，您有时会看到奇怪的括号，它们确实意味着什么。但这里不是这种情况。

# java - GWT：带有滚动面板的可拖动弹出窗口

> ID：13600792
> 
> 赞同：0
> 
> 时间：2012-11-28T08:28:12.440
> 
> 标签：java, gwt

设计了一个可拖动的弹出窗口，按设计工作。现在`Popup`面板包含`ScrollPanel`它具有垂直滚动条，但是在尝试通过拖动滚动时不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:37:39.897

以下链接给出了可拖动的 ua 窗口框实现。您可以为其添加滚动面板。我试过了。有用。看看它。

[http://svn.clazzes.org/svn/gwt/branches/gwt-extras-0.1-branch/src/main/java/org/clazzes/gwt/extras/dialog/WindowBox.java](http://svn.clazzes.org/svn/gwt/branches/gwt-extras-0.1-branch/src/main/java/org/clazzes/gwt/extras/dialog/WindowBox.java)

# android - android - 将 dp 转换为浮点数

> ID：13600802
> 
> 赞同：10
> 
> 时间：2012-11-28T08:29:02.140
> 
> 标签：android, font-size

我的字体大小是 12dp。

我正在使用 设置字体`TextPaint`，因为我使用的是跨度。问题是`TextPaint`接受的参数是浮点数。我想知道如何将 12 dp 转换为浮点数？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-11-18T01:58:06.520

从`android.content.res.Resources.getDimension(int id):`

```
float twelveDp = TypedValue.applyDimension( TypedValue.COMPLEX_UNIT_DIP, 12, 
                mContext.getResources().getDisplayMetrics() ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-17T05:22:05.490

尝试这个：

```
public static float dipToPixels(Context context, float dipValue){
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    return TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,  dipValue, metrics);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-25T11:50:58.200

You can try following:

// Convert the sp to pixels

```
final float scale = getResources().getDisplayMetrics().scaledDensity;
int mTextSizeP = (int)  getResources().getDimensionPixelSize(R.dimen.text_size) / scale ); 
```

I have already have text_size defined in `res/values/dimens.xml` :

```
<resources>
    <dimen name="text_size">12sp</dimen>
</resources> 
```

# javascript - 链接单页 Web 应用程序的各个部分

> ID：13600803
> 
> 赞同：0
> 
> 时间：2012-11-28T08:29:03.637
> 
> 标签：javascript, jquery, html, knockout.js

我正在开发一个针对移动用户的单页网站（最终将移植到 Phonegap）。我已将我的屏幕分解为“卡片”，这些卡片基本上只是`<div>`我根据需要显示/初始化/隐藏的内容。

目前，我无法决定使用正确的结构来实现将这些面板链接在一起成为一个连贯的应用程序。我目前的实现是这样的（目前使用我熟悉的 Knockout）：

```
//Javascript
var LoginCard = function() {
    this.goToRegister = function() { 
        // IF registerCard is not initialized
        // THEN ko.applyBindings(new RegisterCard(), document.getElementById('registerCard'));
        // ELSE $('#registerCard').show();
    };
    this.doLogin = function() { /* Goes to home card after login */ };
}
var RegisterCard = function() {
    this.goToLogin = function() { /* Goes back to login card */ };
    this.doRegister = function() { /* Goes to login card after reg */ };
}
ko.applyBindings(new LoginCard(), document.getElementById('loginCard'));

//HTML
<div id="loginCard">
    <button data-bind="click: goToRegister" id="btnReg">Register Account</button>
    <button data-bind="click: doLogin" id="btnLogin">Login</button>
</div>
<div id="registerCard">
    <button data-bind="click: goToLogin" id="btnBackToLogin">Back To Login</button>
    <button data-bind="click: doRegister" id="btnDoReg">Submit Registration</button>
</div> 
```

如您所见，链接发生在视图模型本身内，因此不同的视图模型（例如 loginCard、registerCard、homeCard）彼此紧密耦合。

一个更“低级”的替代方案是使用 jQuery 绑定按钮事件，这样每张卡就不必知道其他卡的详细信息：

```
//But this means I have to specify a ton of unique IDs for all the elements in the page.
$('#btnReg').click(function() { /* Initialize and go to registerCard. */ }); 
```

我还考虑过使用 hash-routing/pushState，所以当点击事件仍在每个视图模型中时，它只需要知道要访问的 URL 吗？就像是：

```
var LoginCard = function() {
    this.goToRegister = function() { 
        window.location.hash = 'register';
        //or history.pushState('state', '', 'register';
    };
} 
```

这是我第一次尝试创建单页应用程序，所以我对设计选择感到非常困惑。哪一个会更好，或者任何人都可以提出标准的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:45:05.797

我建议您为路由创建另一个对象，该对象依赖于 SammyJS 或 CrossroadsJS 等路由库。

请参考我的爱好项目[MyStory.Spa](https://github.com/RayKwon/MyStory.Spa)，它也是单页应用程序样式的 web（不适用于移动应用程序），它使用 SammyJS 进行浏览器级路由。在 MyStory.Spa 架构中，webapp/app/infra/router.js 负责路由，有关路由、视图、视图模型的详细信息在 /webapp/app/infra/routing.table.js 中。

这样就可以解耦View、ViewModel、Model、Data Service、Routing等等。

# sql-server - 自定义 SQL datediff 函数

> ID：13600808
> 
> 赞同：0
> 
> 时间：2012-11-28T08:29:14.310
> 
> 标签：sql-server, tsql, datetime

有没有人看过任何自定义代码示例来确定两个日期之间的明显差异。即类似于脸书上的。

*   这是 2 秒前发布的
*   这是昨天发布的
*   这是 4 小时前发布的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:02:23.707

虽然同意这可能在表示层做得更好，但这可以构成 SQL 解决方案的基础 - 如果您在 SQL Server 上需要它，您当然也可以用您选择的 .Net 语言编写 CLR 函数.

```
declare @d datetime = '2012-10-11 00:52'
select 
    case 
        when diff < 60 then convert(varchar(5), DATEDIFF(s, @d, getdate())) + ' seconds'
        when diff < 3600 then convert(varchar(5), DATEDIFF(MI, @d, getdate())) + ' minutes'
        when diff < 86400 then convert(varchar(5), DATEDIFF(hh, @d, getdate())) + ' hours'
        when diff < 604800 then convert(varchar(5), DATEDIFF(D, @d, getdate())) + ' days'
        when diff < 2419200 then convert(varchar(5), DATEDIFF(WEEK, @d, getdate())) + ' weeks'
        else convert(varchar(5), DATEDIFF(MONTH, @d, getdate())) + ' months'
    end
from
    (select DATEDIFF(s, @d, getdate()) as diff) v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:26:37.820

感谢您的帮助，在这种情况下，我认为它太复杂并且无法在 SQL 中很好地实现，此外，客户端逻辑会更有效，因为我打算使用 jQuery 来更新这些值 ala facecrack。

[发现这个库非常适合我的目的。](http://timeago.yarp.com/)

# c++ - 在 C++ 控制台应用程序中编写位图

> ID：13600809
> 
> 赞同：1
> 
> 时间：2012-11-28T08:29:17.617
> 
> 标签：c++, mfc

我正在尝试在 mfc dll 中创建一个位图，我正在写

```
CDC *pDC = GetDC();
CDC memDC ;
memDC.CreateCompatibleDC(pDC);
CBitmap newbmp;
newbmp.CreateCompatibleBitmap(pDC, 300, 300);
ReleaseDC(pDC);
CBitmap *pOldBitmap = memDC.SelectObject(&newbmp); 
memDC.FillSolidRect(0,0,300,300,RGB(255,255,255));
CBrush brush;
CBrush *pOldBrush = memDC.SelectObject(&brush);
memDC.Rectangle(10, 10, 80, 80);
memDC.Ellipse(60,60,220,220);
memDC.SelectObject(pOldBrush);
memDC.SelectObject(pOldBitmap);
CImage img;
img.Attach((HBITMAP)newbmp.Detach());
img.Save(_T("C:\\atest.bmp"),Gdiplus::ImageFormatBMP); 
```

虽然这在 Cwindows 应用程序中可以正常工作，但我无法使其在控制台应用程序中工作，如何在控制台应用程序中获取 Device conext？我无法让 getDC 工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:46:51.747

在调用GetDC()之前，你必须有一个CWnd的句柄或点。但在控制台应用程序中，你不能调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:13:05.590

这对我有用：

```
 CDC *pDC;
    pDC = CDC::FromHandle(::GetDC(NULL));

    CDC memDC;
    memDC.CreateCompatibleDC(pDC);

    CBitmap newbmp;
    newbmp.CreateCompatibleBitmap(pDC, 300, 300);
    CBitmap *pOldBitmap = memDC.SelectObject(&newbmp); 

    memDC.FillSolidRect(0,0,300,300,RGB(255,255,255));
    CBrush brush;
    CBrush *pOldBrush = memDC.SelectObject(&brush);
    memDC.Rectangle(10, 10, 80, 80);
    memDC.Ellipse(60,60,220,220);
    memDC.SelectObject(pOldBrush);
    memDC.SelectObject(pOldBitmap);

    CImage img;
    img.Attach((HBITMAP)newbmp.Detach());
    img.Save(_T("C:\\atest.bmp"),Gdiplus::ImageFormatBMP);

    ::ReleaseDC(    NULL,
                    *pDC);
    ::ReleaseDC(    NULL,
                    memDC); 
```

当然，要使用 CDC 和 CBitmap，您需要将 MFC 用作共享 DLL，并在 stdafx.h 中添加一些头文件：

```
#include <afxwin.h>
#include <atlimage.h> 
```

希望能帮助到你，

哈维尔

# java - 在使用 XOM 创建 XML 时减少代码冗余

> ID：13600813
> 
> 赞同：0
> 
> 时间：2012-11-28T08:29:42.063
> 
> 标签：java, xml, xml-serialization, xom

我使用 XOM 作为我的 XML 解析库。我也用它来创建 XML。下面是用示例描述的场景。

**设想：**

代码：

```
Element root =  new Element("atom:entry", "http://www.w3c.org/Atom");
Element city = new Element("info:city", "http://www.myinfo.com/Info");
city.appendChild("My City");
root.appendChild(city);     
Document d = new Document(root);
System.out.println(d.toXML()); 
```

生成的 XML：

```
<?xml version="1.0"?>
<atom:entry xmlns:atom="http://www.w3c.org/Atom">
   <info:city xmlns:info="http://www.myinfo.com/Info">
       My City
   </info:city>
</atom:entry> 
```

请注意，在 XML 中，`info`命名空间是与节点本身一起添加的。但我需要将其添加到根元素中。像下面

```
<?xml version="1.0"?>
<atom:entry xmlns:atom="http://www.w3c.org/Atom" xmlns:info="http://www.myinfo.com/Info">
   <info:city>
       My City
   </info:city>
</atom:entry> 
```

为此，我只需要以下代码

```
Element root =  new Element("atom:entry", "http://www.w3c.org/Atom");
=> root.addNamespaceDeclaration("info", "http://www.myinfo.com/Info");
Element city = new Element("info:city", "http://www.myinfo.com/Info");
... ... ... 
```

问题在这里我不得不添加`http://www.myinfo.com/Info`两次。就我而言，有数百个命名空间。所以会有太多的冗余。有没有办法摆脱这种冗余？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:32:45.580

不，没有办法摆脱这种冗余，这是一个深思熟虑的决定。在 XOM 中，命名空间是元素本身的基本部分，而不是它在文档中的位置的函数。

当然，您总是可以为命名空间 URI 声明一个命名常量。

# android - 如何从我的 Android 应用程序检测是否连接到设备中的 Twitter 帐户？

> ID：13600814
> 
> 赞同：1
> 
> 时间：2012-11-28T08:29:41.783
> 
> 标签：android, android-twitter

让我试着清楚我想要什么。我有一个按钮，当我单击该按钮时，我想检测设备中是否有任何活动的 twitter 会话，或者我是否登录了设备中的 twitter 帐户。如果我已连接，我想使用 twitter 帐户，以某种方式将会话保存在我的应用程序中，并在我想通过 twitter 在我的应用程序中共享某些内容时使用它，而无需再次登录。

我发现的大多数示例都是从我的应用程序本身发推文，例如这个[http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)

我只是想检测一下，如果我连接到 Twitter 帐户，我想在我的应用程序中使用它，并在我调用 Share Intent 时使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:10:41.280

你可以在 TwitterApp.java (twitter4j) 中找到这个方法

```
public boolean isAuthenticated() {    
        try {
            AccessToken a = mSession.getAccessToken();
            mTwitter = new TwitterFactory().getInstance();
            mTwitter.setOAuthConsumer(Constants.CONSUMER_KEY,
                    Constants.CONSUMER_SECRET);
            mTwitter.setOAuthAccessToken(a);    

            try {
                mTwitter.getAccountSettings();
                return true;
            } catch (TwitterException e) {
                return false;
            }
        } catch (Exception e) {

            e.printStackTrace();
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:12:26.853

获取此首选项的默认值

`this.prefs = PreferenceManager.getDefaultSharedPreferences(this);`

并借助此值检查使用 isAuthenticated 方法的身份验证，该方法写在下面

```
if (TwitterUtils.isAuthenticated(prefs)) {

                    sendTweet();
                } else {
                    Intent i = new Intent(getApplicationContext(), PrepareRequestTokenActivity.class);
                       startActivity(i);
                }
public static boolean isAuthenticated(SharedPreferences prefs) {

    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    AccessToken a = new AccessToken(token,secret);
    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
    twitter.setOAuthAccessToken(a);

    try {
        twitter.getAccountSettings();
        return true;
    } catch (TwitterException e) {
        return false;
    }
} 
```

# java - 如何使用服务将图像存储在 SDCard 中？

> ID：13600817
> 
> 赞同：0
> 
> 时间：2012-11-28T08:29:51.280
> 
> 标签：java, android, android-intent

我正在获取图像 URL 并在 GridView 中设置该 URL。它在 Gridview 中成功显示。但我也想使用服务将图像存储在 SDCard 中。如何做到这一点。请有人帮我解决这个问题。谢谢。

```
public class MainActivity extends Activity {

ListView list;
GridView gv;
String TAG = "GRIDVIEW";
LazyAdapter adapter;
Bitmap bitmap;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    startService(new Intent(this, MyService.class));
    new loading().execute();
    // gv = (GridView) findViewById(R.id.grid_view);
    // startService(new Intent(MainActivity.this, MyService.class));
    // gv = (GridView) findViewById(R.id.grid_view);
    // gv.setAdapter(new LazyAdapter(MainActivity.this, mStrings));
    // gv.setHorizontalSpacing(10);
    // gv.setVerticalSpacing(40);

    // gv.setGravity(200);

}

ProgressDialog mprogress;

private class loading extends AsyncTask<String, Void, String> {

    protected void onPreExecute() {
        mprogress = new ProgressDialog(MainActivity.this);
        mprogress.setMessage("Loading...");
        mprogress.show();

        super.onPreExecute();

    }

    protected String doInBackground(String... params) {
        // startService(new Intent(MainActivity.this, MyService.class));
        return null;
    }

    protected void onPostExecute(String result) {
        getGirdview();
        mprogress.dismiss();
        super.onPostExecute(result);
    }

    private void getGirdview() {
        gv = (GridView) findViewById(R.id.grid_view);
        gv.setAdapter(new LazyAdapter(MainActivity.this, mStrings));
        gv.setHorizontalSpacing(10);
        gv.setVerticalSpacing(40);
    }

}

public String[] mStrings = {

        "http://a1.twimg.com/profile_images/97470808/icon_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG.png",
        };
    }

public class MyService extends Service {

String TAG = "GRIDVIEW";
Bitmap bitmap;
MainActivity mclass = new MainActivity();

public void onStart(Intent intent, int startId) {

    for (int i = 0; i < mclass.mStrings.length; i++) {

        String str = mclass.mStrings[i];
        bitmap = DownloadImage(str);
        // Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
        // R.drawable.ic_launcher);
        // File sd = Environment.getExternalStorageDirectory();
        File storagePath = new File(
                Environment.getExternalStorageDirectory(), "Wallpaper");
        storagePath.mkdirs();

        String fileName = "test" + i + ".png";
        File dest = new File(storagePath, fileName);
        try {
            FileOutputStream out;
            out = new FileOutputStream(dest);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    super.onStart(intent, startId);

}

public int onStartCommand(Intent intent, int flags, int startId) {

    // for (int i = 0; i < mStrings.length; i++) {
    //
    // String str = mStrings[i];
    // bitmap = DownloadImage(str);
    // // Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
    // // R.drawable.ic_launcher);
    // // File sd = Environment.getExternalStorageDirectory();
    // File storagePath = new File(
    // Environment.getExternalStorageDirectory(), "Wallpaper");
    // storagePath.mkdirs();
    //
    // String fileName = "test" + i + ".png";
    // File dest = new File(storagePath, fileName);
    // try {
    // FileOutputStream out;
    // out = new FileOutputStream(dest);
    // bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
    // out.flush();
    // out.close();
    // } catch (FileNotFoundException e) {
    // // TODO Auto-generated catch block
    // e.printStackTrace();
    // } catch (IOException e) {
    // // TODO Auto-generated catch block
    // e.printStackTrace();
    // }
    // }

    return super.onStartCommand(intent, flags, startId);
}

public IBinder onBind(Intent intent) {

    return null;
}

// public void onStart(Intent intent, int startId) {
//
// for (int i = 0; i < mStrings.length; i++) {
//
// String str = mStrings[i];
// bitmap = DownloadImage(str);
// // Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
// // R.drawable.ic_launcher);
// // File sd = Environment.getExternalStorageDirectory();
// File storagePath = new File(
// Environment.getExternalStorageDirectory(), "Wallpaper");
// storagePath.mkdirs();
//
// String fileName = "test" + i + ".png";
// File dest = new File(storagePath, fileName);
// try {
// FileOutputStream out;
// out = new FileOutputStream(dest);
// bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
// out.flush();
// out.close();
// } catch (FileNotFoundException e) {
// // TODO Auto-generated catch block
// e.printStackTrace();
// } catch (IOException e) {
// // TODO Auto-generated catch block
// e.printStackTrace();
// }
// }
// super.onStart(intent, startId);
// }

private InputStream OpenHttpConnection(String urlString) throws IOException {
    InputStream in = null;
    int response = -1;

    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();

    if (!(conn instanceof HttpURLConnection))
        throw new IOException("Not an HTTP connection");

    try {
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();

        response = httpConn.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();
        }
    } catch (Exception ex) {
        throw new IOException("Error connecting");
    }
    return in;
}

private Bitmap DownloadImage(String URL) {
    Bitmap bitmap = null;
    InputStream in = null;
    try {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in);
        in.close();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    Toast.makeText(MyService.this, "Image is Downloaded",
            Toast.LENGTH_SHORT).show();
    return bitmap;
}

public class ImageLoader {

MemoryCache memoryCache = new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews = Collections
        .synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService;

public ImageLoader(Context context) {
    fileCache = new FileCache(context);
    executorService = Executors.newFixedThreadPool(5);
}

final int stub_id = R.drawable.ic_launcher;

public void DisplayImage(String url, ImageView imageView) {
    imageViews.put(imageView, url);
    Bitmap bitmap = memoryCache.get(url);
    if (bitmap != null)
        imageView.setImageBitmap(bitmap);
    else {
        queuePhoto(url, imageView);
        imageView.setImageResource(stub_id);
    }
}

private void queuePhoto(String url, ImageView imageView) {
    PhotoToLoad p = new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url) {
    File f = fileCache.getFile(url);

    // from SD cache
    Bitmap b = decodeFile(f);
    if (b != null)
        return b;

    // from web
    try {
        Bitmap bitmap = null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) imageUrl
                .openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is = conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Throwable ex) {
        ex.printStackTrace();
        if (ex instanceof OutOfMemoryError)
            memoryCache.clear();
        return null;
    }
}

// decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f) {
    try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        FileInputStream stream1 = new FileInputStream(f);
        BitmapFactory.decodeStream(stream1, null, o);
        stream1.close();

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        FileInputStream stream2 = new FileInputStream(f);
        Bitmap bitmap = BitmapFactory.decodeStream(stream2, null, o2);
        stream2.close();
        return bitmap;
    } catch (FileNotFoundException e) {
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
}

// Task for the queue
private class PhotoToLoad {
    public String url;
    public ImageView imageView;

    public PhotoToLoad(String u, ImageView i) {
        url = u;
        imageView = i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;

    PhotosLoader(PhotoToLoad photoToLoad) {
        this.photoToLoad = photoToLoad;
    }

    @Override
    public void run() {
        try {
            if (imageViewReused(photoToLoad))
                return;
            Bitmap bmp = getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if (imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd = new BitmapDisplayer(bmp, photoToLoad);
            Activity a = (Activity) photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        } catch (Throwable th) {
            th.printStackTrace();
        }
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad) {
    String tag = imageViews.get(photoToLoad.imageView);
    if (tag == null || !tag.equals(photoToLoad.url))
        return true;
    return false;
}

// Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable {
    Bitmap bitmap;
    PhotoToLoad photoToLoad;

    public BitmapDisplayer(Bitmap b, PhotoToLoad p) {
        bitmap = b;
        photoToLoad = p;
    }

    public void run() {
        if (imageViewReused(photoToLoad))
            return;
        if (bitmap != null)
            photoToLoad.imageView.setImageBitmap(bitmap);
        else
            photoToLoad.imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
} 
```

}

```
public class LazyAdapter extends BaseAdapter {

private Context mContext;
String TAG = "GridView";
private Activity activity;
private String[] data;
private static LayoutInflater inflater = null;
public ImageLoader imageLoader;
Bitmap bitmap;

public LazyAdapter(Activity a, String[] d) {
    activity = a;
    data = d;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader = new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.length;
}

public Object getItem(int position) {
    return data;
}

public long getItemId(int position) {
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.item, null);
    }

    // TextView txt_name = (TextView) convertView.findViewById(R.id.text);
    // txt_name.setText("item" + position);

    ImageView image = (ImageView) convertView.findViewById(R.id.image);
    // image.setTag(data[position]);

    imageLoader.DisplayImage(data[position], image);

    return convertView;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:38:09.677

Environment.getExternalStorage() 将返回 sd 卡位置。获得位置后，您可以根据需要创建目录。看起来你正在这样做......那么你遇到的问题是什么？

此外，使用 IntentService 而不是服务......它会为您处理大部分管道工作。

# javascript - For-Loop doesn't finish without error message

> ID：13600826
> 
> 赞同：-2
> 
> 时间：2012-11-28T08:30:17.463
> 
> 标签：javascript, image-processing

I have this `for`-loop:

```
y1 = 0; y2 = 3264; x1 = 0; x2 = 4928; uc = 1; vc = 1; scale = 1;

for (var y = y1; y < y2; y++) {
    for (var x = x1; x < x2; x++) {
        sumR = 0;
        sumG = 0;
        sumB = 0;
        i = 0;

        for (var v = -vc; v <= vc; v++) {
            for (var u = -uc; u <= uc; u++) {
                if (kernel[i] != 0) {
                    var tempX = x + u < 0 ? 0 : x + u;
                    var tempY = y + v < 0 ? 0 : y + v;
                    tempX = tempX >= width ? width - 1 : tempX;
                    tempY = tempY >= height ? height - 1 : tempY;

                    sumR += pixels.data[((tempY * (pixels.width*4)) + (tempX * 4)) + 0] * kernel[i];
                    sumG += pixels.data[((tempY * (pixels.width*4)) + (tempX * 4)) + 1] * kernel[i];
                    sumB += pixels.data[((tempY * (pixels.width*4)) + (tempX * 4)) + 2] * kernel[i];
                }
                i++;
            }
        }
        tempArray.push(sumR * scale, sumG * scale, sumB * scale, 255);
    }
    console.log(y + "|" + y2);
} 
```

So basically it's about image processing, the loop stops at y = 3115 without any error, everything after the loop isn't computed it just "crashes" there. Do you guys have any ideas how this could happen? Can there be a problem with memory?

UPDATE: I think I made this abit unclear: if I use this algorithm for a image with size y2 = 1000 and x2 = 1000 everything is working fine. But if the images get bigger it just stopps working, there is no errormessage in the console!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:35:42.217

*   `uc + vc = 1;` is a invalid statement,
*   `uc` and `vc` don't seem to be defined anywhere,
*   `scale` isn't defined anywhere.

*   The second `x1` here should probably be `x2`:

    ```
    x1 = 0; x1 = 4928;
    //Should probably be:
    x1 = 0; x2 = 4928; 
    ```

~~This pretty much comes down to: *"debug your code".*~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:36:36.937

Okay finally I found the problem,

I initialized the array this way: `var tempArray = [];` above the for-loops, next step was that I tried to initialize it this way : `var tempArray = new Array(width * height * 4)`

The browser just stopped at that position now and didn't even enter the for-loops. So I guess the Array is just to big to create.

Solution: I am using a Typed Array now and everything is working:

```
var tempArray = new Uint8ClampedArray(width * height * 4); 
```

# asp.net - 支付网关集成错误解决

> ID：13600827
> 
> 赞同：1
> 
> 时间：2012-11-28T08:30:17.567
> 
> 标签：asp.net, asp.net-mvc-3, paypal, payment

我有一个需要支付网关集成的 Windows 应用程序。所有这些我都做过。

该过程包括以下内容... - 创建 Xml 请求标头 - 将其编码为 Url - 将 url 编码数据发送到带有文档中提供的链接的 Rest API。- 测试服务器执行事务并将响应发送回应用程序。

我做了什么来实现这些功能......

1) 我已经使用 'HttpWebRequest' 类来创建对 URL 的请求：我不会分享它，因为它安全且保密。

2) 我生成了 xml 标头并将其作为 url 编码发送。

3）服务器甚至响应应用程序。但状态不成功

我将发布请求格式和响应格式。

```
<?xml version="1.0" encoding="UTF-8"?>
    <payment xmlns="http://www.elastic-payments.com/schema/payment">
        <merchant-account-id>!@-merchant-account-id-@!</merchant-account-id>
        <request-id>!@-request-id-@!</request-id>
        <transaction-type>purchase</transaction-type>
        <requested-amount currency="AUD">!@-requested-amount-@!</requested-amount>
        <account-holder>
            <first-name>!@-first-name-@!</first-name>
            <last-name>!@-last-name-@!</last-name>
            <email>!@-email-@!</email>
            <phone>!@-phone-@!</phone>
            <address>
                <street1>!@-street1-@!</street1>
                <street2>!@-street2-@!</street2>
                <city>!@-city-@!</city>
                <state>!@-state-@!</state>
                <country>!@-country-@!</country>
                <postal-code>!@-postal-code-@!</postal-code>
            </address>
        </account-holder>
        <card>
            <account-number>!@-account-number-@!</account-number>
            <expiration-month>!@-expiration-month-@!</expiration-month>
            <expiration-year>!@-expiration-year-@!</expiration-year>
            <card-type>!@-card-type-@!</card-type>
            <card-security-code>!@-card-security-code-@!</card-security-code>
        </card>
        <notifications>
            <notification url="!@-notification-url-@!" transaction-state="failed" />
            <notification url="!@-notification-mail-@!" />
        </notifications>
        <custom-fields>
            <custom-field field-name="order no" field-value="!@-order no-@!" />
        </custom-fields>
       <ip-address>!@-ip-address-@!</ip-address>
   </payment> 
```

以下是从服务器返回的响应。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <payment xmlns="http://www.elastic-payments.com/schema/payment" self="http://sandbox-engine.thesolution.com/engine/rest/merchants/null/payments/null">
    <merchant-account-id ref="http://sandbox-engine.thesolution.com/engine/rest/config/merchants/null"/>
        <transaction-state>failed</transaction-state>
        <completion-time-stamp>2012-11-28T08:19:31.024Z</completion-time-stamp>
        <statuses>
            <status code="400.1018" description="The same Request Id for the Merchant Account is being tried a second time.  Please use another Request Id.  " severity="error"/>
            <status code="400.1009" description="The Transaction Type is invalid. Please check your input and try again." severity="error"/>
        </statuses>
        <requested-amount/>
        <api-id>elastic-api</api-id>
    </payment> 
```

我已经对请求标头进行了两次交叉检查，每次我都有唯一的请求 ID，即“hiren-”+GUID+DATETIMEWITHTIME

我什至已经对交易类型的网关文档进行了交叉检查，它是有效的，但即便如此，它也会给出同样的错误。

为了编码 url，我使用了以下代码字符串 sendString = "param=" + HttpUtility.UrlEncode(xmlData);

我在想上面的代码可能有错误，但它正在回复......所以需要帮助来解决问题。

请不要要求提供文档文件，但您可以要求提供额外信息。

# powershell - 组织 PowerShell Cmdlet 类

> ID：13600830
> 
> 赞同：1
> 
> 时间：2012-11-28T08:30:29.447
> 
> 标签：powershell

...任何人的想法？有标准吗？

PowerShell“cmdlet 结构”是“动词名词”——这很好，但会导致由动词组织的类。现在，PowerShell“外部接口”由 CmdLet 属性确定，不必与实际的类名称有关系。

我的想法是扭转这种局面 - 对类使用 NounVerb，以便特定名词的所有内容都在一起，然后根据名词中的“前缀”将它们打包到命名空间中（即，如果多个 cmdlet 形成组，则进入命名空间） .

这将在开发过程中保持 lsit 更小，并确保一个 oun 的所有 cmdlet 组合在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:12:21.890

我见过的最常见的做法（通过 SMA 上的 dotPeek）是为动词名词命名一个 C# cmdlet 类：VerbNounCommand，例如 GetJobCommand。这就是我们为 PowerShell 社区扩展中的 cmdlet 类名所做的。

OTOH，我认为这是一个完全取决于 cmdlet 作者的实现细节。这里最重要的是尝试使用认可的动词并选择一个好的名词（不要太笼统，避免复数）。

# javascript - 在 OSX 上重新加载 Google Chrome 页面

> ID：13600832
> 
> 赞同：1
> 
> 时间：2012-11-28T08:30:30.837
> 
> 标签：javascript, jquery, macos, google-chrome, reload

我遇到了非常奇怪的 Google Chrome 行为。

在我的 JavaScript 中，我在页面加载时滚动到特定部分。

代码很简单：

```
$('body').animate({ scrollTop: $('nav ul').position().top }, 1000); 
```

但问题是，当它滚动页面时，谷歌浏览器会重新加载页面并且 JavaScript 不会再次触发。

也许有人以前经历过这种情况并有解决方案或想法为什么会发生这种情况？

谢谢！

PS忘了举个活生生的例子（不要当作广告） - [csspandemic.com](http://csspandemic.com)

PPS 正如人们所建议的那样，它在 Windows 上运行良好，并且只在 OSX 上发生。（我改了标题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:30:10.757

看起来这是 Chrome 中的一个错误：http: [//crbug.com/61674](http://crbug.com/61674)。Chrome 不会重新加载页面——它会将滚动位置恢复到上次加载页面的位置。如果你滚动到页面中的不同位置然后刷新，你会看到跳转到了最后一个位置；相反，如果您以隐身模式加载页面，它可以正常工作，因为没有任何缓存的滚动位置。

不幸的是，我不知道有什么好的解决方法。我尝试更改 location.hash 以使缓存的滚动位置无效，但无济于事。

# java - 在姜饼中水平滑动后未触发操作栏的 onNavigationItemSelected(int position, long itemId)

> ID：13600835
> 
> 赞同：27
> 
> 时间：2012-11-28T08:30:38.550
> 
> 标签：java, android, actionbarsherlock, flags, android-gesture

我已经实现了选项卡视图以及水平滑动视图（以更改选项卡），导航模式作为应用程序的列表。我正在使用 ActionBarSherlock 和 TabPageIndicator。更改选项卡后，我使用片段重新加载内容。

在下拉微调器中，我有 2 个项目。每当活动重新加载或点击选项卡后，这些都会被选中。

但是，如果执行滑动以选择其他选项卡，则在 Gingerbread 版本中不会触发 onNavigationItemSelected(int position, long itemId) :( 我们已经在 Gingerbread 2.3.6、2.3.3 上对其进行了测试。

在`logcat`，我收到了这条`warning`消息`"View:onTouchEvent:ViewFlags" is DISABLED`

但是，它在 ICS、Froyo 等上运行良好。

您的帮助将不胜感激。

以下是代码片段：

```
public class MainPageActivity extends SherlockFragmentActivity implements
        ActionBar.OnNavigationListener {

    MenuItem menuItem;
    EditText searchText;
    public static Context mContext;
    public static DataAdapter dataAdapter;
    ArrayList<String> accountList;
    public static List<View> currentViewBeingChanged = new ArrayList<View>();

    public static LayoutInflater layoutInflater;
    public static String checktab = "running", nameComp;
    int isRefresh;
    public static boolean isAutoRefresh = true;
    public static ArrayList<String> listItems;
    public static boolean check;
    public static boolean isAtleastOnce = true, listToBeRefreshed = false;
    public static ActionBar actionBar;
    public static int itemPosition, listPosition;
    public static FragmentManager fragmentManager;
    InputMethodManager imm;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        mContext = this;

        layoutInflater = getLayoutInflater();

        fragmentManager = getSupportFragmentManager();

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_page);

        actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

        Context context = getSupportActionBar().getThemedContext();

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(context,
                android.R.layout.simple_spinner_dropdown_item);
        adapter.clear();
        for (int i = 0; i < ManageAccountLists.accountList.size(); i++) {
            adapter.add(ManageAccountLists.accountList.get(i));
        }

        actionBar.setListNavigationCallbacks(adapter, this);

        tabPagerFunction();

    }

    public void tabPagerFunction() {

        FragmentPagerAdapter adapter = new GoogleMusicAdapter(
                getSupportFragmentManager());
        adapter.notifyDataSetChanged();

        ViewPager pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(adapter);

        checktab = "running";

        final TabPageIndicator indicator = (TabPageIndicator) findViewById(R.id.indicator);
        indicator.setViewPager(pager);

        pager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int arg0) {

                System.out.println("Tab selected..................");

                if (arg0 == 0) {

                    // Running tab is selected
                    indicator.setCurrentItem(arg0);

                    checktab = "running";
                    RunningInstancesActivity runningInstancesActivity = new RunningInstancesActivity();
                    runningInstancesActivity.callThread();

                } else {

                    // Stopped tab is selected
                    indicator.setCurrentItem(arg0);
                    checktab = "stopped";
                    StoppedInstancesActivity stoppedInstancesActivity = new StoppedInstancesActivity();
                    stoppedInstancesActivity.callThread();
                    InstanceStatusUpdate.isOnPostExecute = false;

                }

            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {

            }

            @Override
            public void onPageScrollStateChanged(int arg0) {

            }
        });

    }

    class GoogleMusicAdapter extends FragmentPagerAdapter {

        private final String[] CONTENT = new String[] { "Running", "Stopped" };

        public GoogleMusicAdapter(FragmentManager fm) {
            super(fm);
            notifyDataSetChanged();

        }

        @Override
        public Fragment getItem(int position) {

            switch (position) {
            /** Running tab is selected */
            case 0:
                checktab = "stopped";
                return RunningInstancesActivity.newInstance(0);

                /** Stopped tab is selected */
            case 1:

                checktab = "running";
                return StoppedInstancesActivity.newInstance(1);
            }
            return null;

        }

        @Override
        public CharSequence getPageTitle(int position) {
            return CONTENT[position % CONTENT.length].toUpperCase();
        }

        public CharSequence getPageTitle(int position, int number) {
            return CONTENT[position % CONTENT.length].toUpperCase();
        }

        @Override
        public int getCount() {
            return CONTENT.length;
        }
    }

    @Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {

             System.out.println("Navigation item selected");

        // Performs fetching
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {

        System.out.println("Dispatch touvh event..");

        return super.dispatchTouchEvent(ev);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-26T10:54:35.927

尝试这样做

```
dependencies {

compile "com.android.support:appcompat-v7:18.0.+"
} 
```

并改用支持库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:20:10.203

据我记得，滑动后更新导航列表存在一些问题（在 ABS 中）。这就是我为解决这个问题所做的，它适用于 Android 2.3.7 (ABS) 以及 Android 4.0 (native AB)。

```
pager.setOnPageChangeListener(new OnPageChangeListener() {
    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        if (navigatioBarIsUsed) actionBar.setSelectedNavigationItem(position);
        if (tabsAreUsed) actionBar.getTabAt(position).select();
    }
}); 
```

在内部它会重新选择页面 - 这不是很好 - 但这是我找到的唯一解决方案。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T08:52:28.547

使用此代码..

在您的片段内部使用此代码。

```
@Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        // TODO Auto-generated method stub
        super.setUserVisibleHint(isVisibleToUser);
        if (isVisibleToUser) {
            Activity activity = getActivity();
            ActionBar actionBar = ((ActionBarActivity) activity)
                    .getSupportActionBar();
            actionBar.setIcon(getResources().getDrawable(R.drawable.nearby));

        }
    } 
```

# .htaccess - Htaccess 将非 www 重定向到 www

> ID：13600843
> 
> 赞同：2
> 
> 时间：2012-11-28T08:31:06.770
> 
> 标签：.htaccess, redirect, subdomain

我已经在网上搜索了一个很好的通用 .htaccess 脚本，用于将非 www 重定向到 www，目前我正在使用这个：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这工作正常，但如果我去一个子域 www。将被添加。有没有人有一个很好的重定向 .htaccess 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:03:57.343

试试这个 ：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} !^([^\.]+)\.([^\.]+)\.([a-z]{2,4})$
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T03:29:06.237

@Vince 如果请求的 url 类似于：

> [http://www.abc.example.com](http://www.abc.example.com)

恕我直言，我认为用你的方法它永远不会被重定向到：

> [http://www.example.com](http://www.example.com)

这个怎么样？

```
# Rewrite domain
RewriteCond %{HTTP_HOST} !^www\.([a-z1-9\-]+)\.([a-z]+)$ [NC] [and]
RewriteCond %{HTTP_HOST} ([a-z1-9\-]+)\.([a-z]+)$ [NC] 
RewriteRule ^(.*)$ http://www.%1.%2/$1 [R=301,L] 
```

此外，你们可能会发现这些参考资料很有用：

[https://www.drupal.org/node/93603](https://www.drupal.org/node/93603)

[http://www.askapache.com/htaccess/modrewrite-tips-tricks.html](http://www.askapache.com/htaccess/modrewrite-tips-tricks.html)

# mysql - 高度变化的数据库树结构

> ID：13600847
> 
> 赞同：0
> 
> 时间：2012-11-28T08:31:20.323
> 
> 标签：mysql, database, tree, relational-database, nested-sets

我正在开发一个项目，该项目在数据库中存储了很多层次结构关系数据。

我的情况有点类似于下面描述的情况。我对这个应用程序的主要关注是数据库（MySQL）的性能。我已经通过使用嵌套集和嵌套间隔找到了一个可能的解决方案。但是我认为那些可能无法完成这项工作。我的数据库具有相等的（读取/存储）比率，并且我已经读到提到的解决方案只有在数据库很少更改时才有效。

有没有人有这种问题的经验，接下来我该怎么办？

![解释 uml 中关系的图像](../Images/6270a688f181b22c1d2ce2883d891acd.png)

# cmake - 使用 CMake 和 CPack 的多个 debian 软件包的名称和描述

> ID：13600848
> 
> 赞同：4
> 
> 时间：2012-11-28T08:31:27.840
> 
> 标签：cmake, cpack

我目前正在尝试从我的项目中生成多个 debian 包。我唯一的问题是设置包的名称、描述、组等。

```
# --------------------------------------------------------------
# Required CMake version
# --------------------------------------------------------------
CMAKE_MINIMUM_REQUIRED (VERSION 2.8)

# --------------------------------------------------------------
# Project name
# --------------------------------------------------------------
PROJECT (MyProject)

# --------------------------------------------------------------
# Find all source and header files
# --------------------------------------------------------------
FILE (GLOB all_H "*.h")
FILE (GLOB all_SRC "*.cpp")

# --------------------------------------------------------------
# Set compiler flags
# --------------------------------------------------------------
SET (CMAKE_CXX_FLAGS "-Wall -Wextra -O0 -g3")

# --------------------------------------------------------------
# Add a shared library
# --------------------------------------------------------------
ADD_LIBRARY (mylib SHARED ${all_H} ${all_SRC})

# --------------------------------------------------------------
# Configure components
# --------------------------------------------------------------
SET (CPACK_DEB_COMPONENT_INSTALL 1)

# --------------------------------------------------------------
# Install
# --------------------------------------------------------------
INSTALL(TARGETS mylib DESTINATION ../lib COMPONENT main)
INSTALL(FILES ${all_H} DESTINATION ../include COMPONENT dev)

# --------------------------------------------------------------
# CPack package and package_source targets
# --------------------------------------------------------------
SET (CPACK_GENERATOR "TGZ;DEB")
SET (CPACK_SET_DESTDIR ON)

SET (CPACK_PACKAGE_NAME "mypackage")
SET (CPACK_PACKAGE_VENDOR "me")
SET (CPACK_PACKAGE_DESCRIPTION_SUMMARY "this is my package description")

SET (CPACK_DEBIAN_PACKAGE_DESCRIPTION "this is my package description
 here comes detailed description text.")

INCLUDE (CPack) 
```

该[手册](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aCPackComponent)有一些 CPack 组件的属性和命令，但我似乎没有找到正确的或正确的位置来更改每个包/组件的至少名称和描述。

我尝试在 INCLUDE(CPack) （这给我一个错误）之前和之后（这似乎被忽略）之前使用`SET (CPACK_COMPONENT_MAIN_DISPLAY_NAME "main display name")`and`SET (CPACK_COMPONENT_main_DISPLAY_NAME "main display name")`以及 cpack_add_component() 。

有没有人让它工作并知道正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-09T13:13:14.317

从最近几天开始，我正在寻找这样的解决方案。让我先解释一下我的要求，然后我是如何设法解决问题的。

我想从我的单个项目中创建 4 个包

1.  **主包**：包含所有二进制、静态/共享库、头文件、配置文件和脚本。
2.  **运行时包**：仅包含运行我的应用程序所需的可执行文件，即二进制、共享库和脚本。
3.  **配置包**：其中包含配置文件的基本骨架和占位符。
4.  **开发包**：其中包含共享/静态库和头文件。

生成 Master 包非常简单直接。但是如果我使用这种方式，那么我将无法使用其他软件包。因此，在挣扎和抓取文件和邮件档案之后，我找到了一种解决方案或解决方法。

在我的解决方案中，我正在为要创建的每个包创建一个额外的自定义目标。在该目标上，我正在创建其他 cmake 项目，其中包含要安装在该包中的文件列表（文件的绝对位置），构建该项目并最后通过调用 cpack 创建包。

[这](https://github.com/manthanrtilva/CMake-Debian)是我的解决方案。

可能有比这更好/可扩展的解决方案，如果有人遇到这种情况，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-01T11:45:29.747

我参加聚会有点晚了，但是在 CMake 中，CPack debian 软件包不支持 3.5 版之前的组件打包。

从 3.5 版开始，每个组件都添加了很多功能，因此解决问题的最简单方法是提高 CMake 的版本并设置文档中描述的变量：

[https://cmake.org/cmake/help/v3.5/module/CPackDeb.html](https://cmake.org/cmake/help/v3.5/module/CPackDeb.html)或更新的 [https://cmake.org/cmake/help/v3.9/module/CPackDeb.html](https://cmake.org/cmake/help/v3.9/module/CPackDeb.html)

# ruby-on-rails - 如何在 Ruby on Rails 中为表单元素添加 onchange 监听器？

> ID：13600850
> 
> 赞同：5
> 
> 时间：2012-11-28T08:31:38.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dom-events, onchange

我正在用 Ruby on Rails 编写一个表单，并希望有一个调用 Javascript 函数的选择框。在表单文件中，这是我用来尝试添加选择框的行：

```
<%= f.select :question_select, Question.all, :prompt => "New Question", :onchange => "displayQuestion(this)" %> 
```

在我的 application.js 文件中，我只有：

```
function displayQuestion(link) {
    alert("Changed question");
} 
```

我将动态地将这些表单元素添加到页面中，因此我不能只在 application.js 文件中使用 jQuery 将函数添加到特定的表单元素。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:40:05.777

您可能知道，Rails 3 强烈鼓励 UJS（不显眼的 JavaScript），这基本上意味着 JavaScript 承担了繁重的工作，并且您不应该将客户端交互性与表单生成器联系起来。我建议在这里做一些非常相似的事情——仅仅因为你动态地添加元素并不意味着你不能使用 jQuery 来观察它们的变化。

在您的模板中：

```
<%= f.select :question_select, Question.all, {prompt: "New Question"}, data: { question: true } %> 
```

这将创建如下内容：

```
<select id="..." data-question="true">
  ...
</select> 
```

然后，在 JavaScript 中，您可以使用事件委托来监视在整个文档中设置的`change`任何元素上的事件：`data-question`

```
$(function() {
  $(document).on('change', '[data-question]', function() {
    // this == the element that fired the change event
    alert('Changed question');
  });
}); 
```

* * *

注意：`data-question`您可以简单地向元素添加一个类，而不是使用 ，然后修改您的 jQuery 以使用该类：

```
$(function() {
  $(document).on('change', '.question', function() {
    // this == the element that fired the change event
    alert('Changed question');
  });
}); 
```

I generally try to minimize the use of CSS selectors in my JavaScript so that designers are free to change them to whatever they want without breaking things, but it works just as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:37:19.050

```
select_tag :variable, options_from_collection_for_select(:all, :id, :name), :onchange => 'your_onchange_handler()' 
```

# android - Google 钱包应用内付款不适用于 phonegap 框架

> ID：13600853
> 
> 赞同：1
> 
> 时间：2012-11-28T08:31:47.480
> 
> 标签：android, cordova, android-pay

我正在尝试使用 PhoneGap 框架实现移动网络版的谷歌钱包数字商品 api。

您可以在此处找到示例链接 [用于网站]： [https ://developers.google.com/in-app-payments/docs/tutorial](https://developers.google.com/in-app-payments/docs/tutorial)

它在 [google chrome] 浏览器上运行良好。但它不适用于移动设备。

编辑：在移动设备中，如果我点击“使用 Google 钱包购买”初始屏幕会出现，其中包含产品标题、数量以及“立即购买”按钮。但是在点击“立即购买”按钮后，出现空白屏幕，其中没有任何内容

有任何想法吗 ？

谢谢， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:04:50.387

该教程假设您将移动 Web 应用程序作为 Internet 上的站点托管，而不是在本地设备 ala phonegap 上。我敢打赌，如果您在移动浏览器中打开钱包页面，它会正常工作。

# c# - 有没有更优雅的方式来总结多个属性？

> ID：13600855
> 
> 赞同：0
> 
> 时间：2012-11-28T08:31:50.367
> 
> 标签：c#, .net

我有一个包含多个 Int32 类型属性的类：

```
public class MyClass
{
    public int C1 { get; set; }
    public int C2 { get; set; }
    public int C3 { get; set; }
    .
    .
    .
    public int Cn { get; set; }
} 
```

我想总结所有这些属性。而不是这样做：

```
int sum = C1 + C2 + C3 + ... + Cn 
```

有没有更有效/优雅的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:44:47.357

你可以伪造它，但我不确定它有多大用处：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            var test = new MyClass();
            // ...
            int sum = test.All().Sum();
        }
    }

    public class MyClass
    {
        public int C1 { get; set; }
        public int C2 { get; set; }
        public int C3 { get; set; }
        // ...
        public int Cn { get; set; }

        public IEnumerable<int> All()
        {
            yield return C1; 
            yield return C2; 
            yield return C3; 
            // ...
            yield return Cn; 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:48:14.813

如果您**真的**想在不必键入每个属性的情况下执行求和，您可以使用反射来迭代您的属性，但这会带来很大的性能成本。但是，为了好玩，您可以执行以下操作：

```
var item = new MyClass();
// Populate the values somehow
var result = item.GetType().GetProperties()
    .Where(pi => pi.PropertyType == typeof(Int32))
    .Select(pi => Convert.ToInt32(pi.GetValue(item, null)))
    .Sum(); 
```

PS：不要忘记添加`using System.Reflection;`指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T08:33:48.547

也许您可以使用具有 IEnumarable 接口与自定义类的数组或数据结构。然后你可以使用 linq 来做 Sum()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T08:36:42.373

如果有足够强烈的需要将值存储在单独的成员（属性、字段）中，那么是的，这是唯一的方法。但是，如果您有一个数字列表，请将它们存储在一个列表中，而不是单独的成员中。

或者，丑陋的：

```
new[]{C1,C2,C3,C4}.Sum() 
```

但无论如何，比单个“+”更多的字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T08:41:07.023

```
public class MyClass
{
    readonly int[] _cs = new int[n];

    public int[] Cs { get { return _cs; } }

    public int C1 { get { return Cs[0]; } set { Cs[0] = value; } }
    public int C2 { get { return Cs[1]; } set { Cs[1] = value; } }
    public int C3 { get { return Cs[2]; } set { Cs[2] = value; } }
    .
    .
    .
    public int Cn { get { return Cs[n-1]; } set { Cs[n-1] = value; } }
} 
```

现在您可以使用`Enumerable.Sum`with `MyClass.Cs`，并且您仍然可以将`C1`, `C2`, ... 映射到数据库字段。

# jquery - 由于某种原因，jQuery 表单在 Chrome 和 Firefox 中无法正确显示

> ID：13600856
> 
> 赞同：-4
> 
> 时间：2012-11-28T08:31:58.347
> 
> 标签：jquery, html, internet-explorer, firefox, google-chrome

我需要帮助来尝试让我的表单位于此处以在 Chrome 和 Firefox 中工作。它在 IE 中工作得很好，但在其他两个浏览器中格式被抛弃了。谢谢大家。

[http://ratzlaffcis4026.x10.mx/Week5/Assignment6/Form4.html](http://ratzlaffcis4026.x10.mx/Week5/Assignment6/Form4.html)

顺便说一句，这个表格是临时的，最终会被这个托管服务删除。因此，在这种情况下，由于 x10hosting 的政策，对于某些人来说，这可能不是一个好的资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:43:25.280

尝试使用`em`而不是`px`您的测量，作为`em`显示大小等的比例。

为了进一步阅读，[Kyle Schaffer](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)对不同单位的解释非常好。

# ios - 为什么 TLF 文本在设备模式下的调试中有效，但在临时发布中无效？

> ID：13600859
> 
> 赞同：1
> 
> 时间：2012-11-28T08:32:19.703
> 
> 标签：ios, actionscript-3, air, flex-mobile, tlf

我创建了一个包含文本 TLF 的 swf。

之后，我将其加载到 flex 移动应用程序中。

一开始我在加载它时遇到了很多问题。

1- 首先是因为我使用了 Loader，并且该项目是使用 Flash Professional 创建的。最好的方法是使用 Flash Professional 中包含的 Flash 库的 ProLoader 加载它。

2-有一次我终于在桌面上的模拟器中加载并尝试了它，我在我的 iPad 上以调试和快速编译模式进行了尝试。我有下一个错误：

> 错误 #2100：Loader.loadBytes() 中的 ByteArray 参数的长度必须大于 0。

我修复了它在 FLA 中使用发布设置库中的选项“在代码中组合”编译 swf。伟大的！iPad 中的 TLF 有效！在 iOS 作品中！

3-但是当我构建相同代码的版本（以前在设备中调试时工作）时，当我打开它时，**我只看到图像。不是文字。** *为什么在调试而不是发布时工作？*

你知道我忘记了什么吗？

提前非常感谢。

**编辑添加一些代码**

我嵌入了 swf 并将它们加载到项目渲染器中。该列表有一个 id 的数据提供者。我在每个项目渲染器中加载与 id 对应的 swf。

```
[Embed(source="/bin/histologia.swf")]
public const PAG_01:Class;

[Embed(source="/bin/histologia.swf")]
public const PAG_02:Class;

public function set data( value:Object ):void {
    ...
    var pagAsset:Class = pagesAssets.assets[value];
var pag:MovieClip = new pagAsset();
var SWFClass:ByteArray = pag.movieClipData;
var ldrContext:LoaderContext = new LoaderContext(false, new     ApplicationDomain(ApplicationDomain.currentDomain)); 
    ldrContext.allowLoadBytesCodeExecution = true;
    currentLoader.loadBytes(SWFClass, ldrContext); 
```

¿loadBytes 暗示运行时代码？=(我在一篇[Adob​​e 文章](http://webcache.googleusercontent.com/search?q=cache:gMnHCUJ8_JsJ:www.adobe.com/devnet/flash/articles/preloading-tlf-rsl.html%20&cd=2&hl=es&ct=clnk&gl=es)中读到了这个：

> 如果你使用 TLF 文本，我将代码、TLF 库合并到 swf 中，因为 iOS 不会在运行时加载 RSL。

但是我在做什么？？我如何嵌入和使用它？我认为这个[答案](https://stackoverflow.com/questions/8688645/is-it-possible-to-embed-or-load-swfs-when-making-iphone-apps-is-it-allowed-by-a/8916210#comment18598492_8916210)会对我有所帮助，但我不确定

**更新 2**

我已经更改了代码。使用来自@Jeff Ward 的 swf 合并，但结果是一样的。已加载 swf，但未显示 TLF 文本。

```
var pagAsset:Class = pagesAssets.assets[value];
var pag:MovieClip = new pagAsset();
addChild(pag); 
```

为什么？？

# django - 使用南数据迁移更改旧记录中的值

> ID：13600861
> 
> 赞同：1
> 
> 时间：2012-11-28T08:32:21.443
> 
> 标签：django, django-south, data-migration

以前我有一个像这样的 django 模型

```
class Review(models.Model):
    reviewdate=models.DateField(default=date.today)
    description=models.TextField()
    author=models.ForeignKey(User,null=True) 
```

我在 db 中有大约 500 条评论记录。

我在模型中添加了一个字段

```
from django.core.validators import MinValueValidator,MaxValueValidator

class Review(models.Model):
    reviewdate=models.DateField(default=date.today)
    description=models.TextField()
    author=models.ForeignKey(User,null=True)
    rating= models.IntegerField(validators=[MinValueValidator(1), MaxValueValidator(10)], default=5, help_text='integers 1 to 10') 
```

我运行`python manage.py schemamigration myapp --auto`成功，创建了一个`0002_auto__add_field_review_rating.py`文件

现在，我需要对 db 中的现有记录进行数据迁移。我必须跑吗

`python manage.py datamigration myapp somechanges`

然后实现创建的功能`somechanges.py`？由于我已经在新字段中定义`difficulty`了默认值 5，所以在运行 migrate 命令时不会采用吗？我是否必须在`somechanges.py`函数中明确设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:38:25.247

对于这种情况，您无需进行数据迁移。由于您为新字段指定了默认值，因此在应用架构迁移时将使用该默认值。

使用以下命令应用迁移：

```
./manage.py migrate myapp 
```

有关新字段默认值的更多信息，请参阅[高级更改](http://south.readthedocs.org/en/latest/tutorial/part2.html#defaults)South 教程。

# azure - 在查询/帖子/标题中发送 SQL 报告服务器登录用户名和密码

> ID：13600864
> 
> 赞同：1
> 
> 时间：2012-11-28T08:32:49.410
> 
> 标签：azure, reporting-services

我需要在 XML 中手动加载报告，以便能够从中绘制自定义图表。

我将能够加载 XML，但 Azure SQL 报告服务器在返回 XML 之前会询问用户名和密码。

有没有办法在标题/查询/内容中包含用户名和密码？

# mysql - mySQL 将多个表连接在一起

> ID：13600870
> 
> 赞同：4
> 
> 时间：2012-11-28T08:33:03.407
> 
> 标签：mysql, join, export-to-csv

我有大约 10 个表，所有表的列数各不相同，但都包含列“client_id”，这是将每个表中的所有记录链接在一起的关键。

我想抓取所有表中的所有列。

在 client_id 上将所有 10 个左右的表连接在一起的最佳方法是什么？

想要这样做的原因是因为我想将所有表导出到 1 个单个 CSV 文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:35:32.357

从包含所有客户端 ID 的表开始，并使用`USING`关键字左连接剩余的表：

```
 SELECT *
 FROM table1
 LEFT JOIN table2 USING (client_id)
 LEFT JOIN table3 USING (client_id)
 LEFT JOIN table4 USING (client_id)
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:35:14.450

```
select *
from table1 t1,
table2 t2,
table3 t3...
where t1.user_id=t2.user_id
and t1.user_id=t3.user_id... 
```

# java - java更新hashmap

> ID：13600874
> 
> 赞同：1
> 
> 时间：2012-11-28T08:33:21.550
> 
> 标签：java, hashmap, key

我在更改 HashMap> 中的值时遇到问题。首先我这样做：

```
HashMap<String, ArrayList<Integer>> countries = new HashMap<>();
ArrayList<Integer> medals = new ArrayList<>();
medals.add(0); medals.add(0); medals.add(0);
for(int i = 0; i < COUNTRY.length; i++){
    countries.put(COUNTRY[i], medals);
} 
```

我用静态数组中的键填充 HashMap，并添加一个用 0、0、0 填充的 ArrayList 的默认值。然后我这样做：

```
Integer plus = new Integer(1);
for(int j = 0; j < athletes.size(); j++){
    if(j == 3)
        break;
    Athlete a = athletes.get(j);
    ArrayList<Integer> medals = countries.get(a.getCountry());
    Integer medal = medals.get(j) + plus;
    medals.set(j, medal);
    countries.put(a.getCountry(), medals);
} 
```

我有一个 ArrayList，里面装满了已经按运动员成绩排序的运动员。我要做的是获取前 3 名运动员，并更新我的 HashMap 值，这样 ArrayList 将有 3 个数字，代表每个国家赢得了多少金、银和铜牌。问题是，当我尝试用新的 ArrayList 替换旧值时，它会用新的 ArrayList 替换 HashMap 中的所有值，而不仅仅是具有匹配键的值。

我不知道问题是什么，有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T08:36:07.707

问题出在这段代码中：

```
HashMap<String, ArrayList<Integer>> countries = new HashMap<>();
ArrayList<Integer> medals = new ArrayList<>();
medals.add(0); medals.add(0); medals.add(0);
for(int i = 0; i < COUNTRY.length; i++){
    countries.put(COUNTRY[i], medals);
} 
```

您只需创建列表的一个实例，并将其与每个国家/地区相关联。

一个可能的解决方法是在每次循环迭代中初始化一个新列表。

```
HashMap<String, List<Integer>> countries = new HashMap<>();
for(int i = 0; i < COUNTRY.length; i++){
    List<Integer> medals = Arrays.asList(0, 0, 0);
    countries.put(COUNTRY[i], medals);
} 
```

如果您的 List 的固定大小为 3，为什么不使用 simple`int[]`呢？

这是使用`int[]`

```
Map<String, int[]> countries = new HashMap<>();
for(int i = 0; i < COUNTRY.length; i++){
    countries.put(COUNTRY[i], new int[3]);
}
//
for(int j = 0; j < athletes.size(); j++){
    if(j == 3)
        break;
    Athlete a = athletes.get(j);
    int[] medals = countries.get(a.getCountry());
    medals[j]++;
    // last to lines could even be
    // countries.get(a.getCountry())[j]++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:38:01.503

您应该使用 google-guava 的[MultiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)。它正是为这种需要`Map<K,List<V>>`结构类型的情况而设计的。即同一键的多个值。

# html - .如何使用 css 创建流畅的布局，使其适用于所有设备以及横向和纵向模式

> ID：13600894
> 
> 赞同：-4
> 
> 时间：2012-11-28T08:34:53.927
> 
> 标签：html, css

我想在 CSS 的帮助下为移动设备创建一个流畅的布局..

你能推荐一些例子吗？

我已经尝试了一些示例，但我正在努力解决方向变化问题。

当我改变方向时，首先需要时间来重新调整架构，其次有时 Divs（架构）会有点扭曲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:38:21.240

试试这个链接[http://csslayoutgenerator.com/](http://csslayoutgenerator.com/)

您可以`fluid and fixed layout`使用上面链接中的选项创建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:52:03.573

有很多方法可以让您拥有固定和流畅的布局：

`Bootstrap`- [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

`Use of Media Queries`- 我最喜欢的

```
@media screen and (max-device-width : 320px)
{
  body or yourdiv element
  {
    width:<size>px/em/cm;
  }
}
@media screen and (max-device-width : 1204px)
{
  body or yourdiv element
  {
    width:<size>px/em/cm;
  }
} 
```

使用专门为移动设备设计的模板，如下所示：-

`Mobile Jquery`- 使用他们的 CSS [http://jquerymobile.com/](http://jquerymobile.com/)

# google-chrome - 部署托管在商店中的 chrome 扩展

> ID：13600900
> 
> 赞同：-1
> 
> 时间：2012-11-28T08:35:07.103
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

我想部署托管在 Chrome 商店中的 Chrome 扩展程序。

根据：

[http://developer.chrome.com/extensions/external_extensions.html](http://developer.chrome.com/extensions/external_extensions.html)

我需要包含一个 CRX 文件，那么如何从 Chrome 商店获取它？我无法使用我自己的 *.PEM 密钥打包它，因为它不会安装，而且密钥与 Chrome 商店中生成的密钥不同。

那么，请问，我该如何部署它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:19:29.477

crx 的全部内容都登陆了 chrome 目录，更具体地说：

> c:\Users\USERNAME\AppData\Local\Google\Chrome\User Data\Default\Extensions\

所有已安装的扩展都在此处按其 ID 列出。

# visual-studio-2012 - 使用 Visual Studio 2012 添加报告后的 Clickonce 部署

> ID：13600902
> 
> 赞同：1
> 
> 时间：2012-11-28T08:35:28.680
> 
> 标签：visual-studio-2012, clickonce, reportviewer, publish

我有一个使用单击一次发布到服务器的 ac# 应用程序，因此我们的公司客户可以运行它。我将我的视觉工作室从 2010 年升级到 2012 年。到目前为止，一切都很好，客户可以在我发布后正常运行应用程序。然后我在我的应用程序中添加了一个报表查看器项目，它在我的电脑上运行良好。但在发布客户端后会遇到此错误：无法安装或运行应用程序。该应用程序要求将程序集 microsoft.reportviewer.ProcessingObjectModel 版本 11.0.0.0 安装在您的 GAC 中。

我现在该怎么办，我搜索了很多但找不到解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:12:23.663

您需要添加报表查看器作为先决条件。这是 MSDN 的链接，描述了所需的内容。

[http://msdn.microsoft.com/en-us/library/ms251723.aspx](http://msdn.microsoft.com/en-us/library/ms251723.aspx)

# ontology - 为什么我的本体规则不起作用

> ID：13600906
> 
> 赞同：0
> 
> 时间：2012-11-28T08:35:43.827
> 
> 标签：ontology, owl, protege, swrl

我构建了一个简单的本体来测试 SWRL 规则如何推断本体中个体之间的新关系，但它不起作用。我的规则是：

```
(hasFather(?x, ?y)  ∧  hasMother(?x, ?z) → spouseOf(?y, ?z) 
```

并且可以读作

> x 有父亲 y，x 有母亲 z → y 是 z 的配偶）。

我的本体中有三个人：丈夫、妻子和儿子。我设定孩子有妈妈是妻子，有爸爸是丈夫。然后我的规则被用来设置丈夫是妻子的配偶。我使用[Jess](http://www.jessrules.com)插件来测试我的规则，但没有结果。为什么规则不起作用？我的规则有问题，还是 Jess on Protege 3.3 有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:23:46.337

你在本体中写的不是你在这个问题中写的规则。您的本体包含以下规则：

```
hasFather(?y, ?x) ∧ hasMother(?z, ?x) → spouseOf(?y, ?z) 
```

在 RDF/XML 文件中，交换`swrl:argument1`它就`swrl:argument2`可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:18:28.167

Sonvx, Pellet reasoner 可用于测试 SWRL 规则。Pellet reasoner 提供 Java API 来测试 SWRL 规则。[在这里下载颗粒](http://clarkparsia.com/pellet/)

让我知道你是否需要别的东西。

# c# - 如何在 Excel 二进制 (xls) 格式的文档属性中以编程方式查找时间的 UTC 偏移量？

> ID：13600907
> 
> 赞同：0
> 
> 时间：2012-11-28T08:35:44.733
> 
> 标签：c#, .net, excel

我们在这里讨论的是旧的二进制 xls 格式，即 Excel 2003 年份。

文档属性似乎将上次修改时间显示为本地时间。

我想转换为 UTC。

我们已经尝试过 Aspose 库。他们返回 DateTime.Kind = Unspecified。

我们没有原始文件——只有一个字节数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-21T17:38:02.057

您可以使用`File.GetLastWriteTimeUtc`或`FileInfo.LastWriteTimeUtc`。文件类型不相关。

# c# - C# powershell ErrorDetail 用法

> ID：13600911
> 
> 赞同：2
> 
> 时间：2012-11-28T08:36:07.990
> 
> 标签：c#, powershell

我有一个自定义的 powershell 命令衍生自`PSCmdlet`错误，我想提供自己的错误消息。根据 MSDN`ErrorDetails`属性，`ErrorRecord`这样做：

> 为错误记录提供附加错误信息，例如更详细的替换错误消息。

我怎么无法让它工作，我有`DisplayStrings.resx`，我已经用 ID 存储了我的自定义错误消息`InvalidOrNoSite`，但是当我执行以下代码时，它显示相同的旧样式错误，而不是我的自定义错误。

```
ErrorRecord err = new ErrorRecord(new ArgumentException(), "", ErrorCategory.InvalidArgument, this);
err.ErrorDetails = new ErrorDetails(this, "Resources.DisplayStrings.ResourceManager", "InvalidOrNoSite", null);
ThrowTerminatingError(err); 
```

有关如何使用 ErrorDetails 的任何示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:52:56.503

*如果*您`ErrorDetail`更改. _`non-terminating error`

微软文档中没有解释这种行为*[或者至少我没有找到它:)]*，但在我一年前买的一本书（Wrox - Professional Windows PowerShell Programming - February 2008）第 97 页报告`terminating error`说不行。

我的解决方法是在测试此变量后设置一个*“标志”*变量，`true`然后`catch`执行或不执行部分或全部以下代码。

# android - 实施 Google Place Actions 以添加新地点

> ID：13600913
> 
> 赞同：0
> 
> 时间：2012-11-28T08:36:10.680
> 
> 标签：android, google-maps, http-post, google-places

我可以使用下面的代码从 android 发布到 Google Place Actions 以在[此处](https://developers.google.com/places/documentation/actions#PlaceReportRequests)发布位置。

```
 public void postMyPlaces(final double lat, final double lng, String name){
    Log.i(TAG," postMyPlaces called");

    Thread t = new Thread(){

        @Override
        public void run() {
            super.run();

            String url = "https://maps.googleapis.com/maps/api/place/add/json?sensor=true&key=" +GOOGLE_API_KEY ;

            HttpParams httpParameters = new BasicHttpParams();
            // Set the timeout in milliseconds until a connection is established.
            // The default value is zero, that means the timeout is not used. 
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            // Set the default socket timeout (SO_TIMEOUT) 
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);

            HttpPost httpPost = new HttpPost(url);
            Log.i(TAG," postMyPlaces called "+ url);
            httpPost.setHeader("Content-type", "application/json");

            //Create a json request object to send it via HTTPS
            LocationModel uLocation = new LocationModel(Double.toString(lat),Double.toString(lng));
            MyPlacesModelImpl myPlacesPayload = new MyPlacesModelImpl("50","My Car","parking","en-AU",uLocation);

            StringEntity entity = null;
            try {
                entity = new StringEntity(myPlacesPayload.toJSON().toString());
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            httpPost.setEntity(entity);
            HttpResponse httpResponse = null;
            try {
                 httpResponse = httpClient.execute(httpPost);
                String resp = httpResponse.toString();
                Log.i(TAG,resp);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        };

    };
    t.start();

} 
```

我得到的响应是“OK”。但是如何查看我在地图中添加的这些地方？？？？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T05:50:28.007

“地点报告请求用于添加新地点或删除现有地点。新地点将立即在您的应用程序启动的**地点附近搜索**中可用，并将进入审核队列以考虑用于 Google 地图。新添加的地点将在经过审核程序批准之前，不会出现在 Places Text Search 或 Radar Search 结果或其他应用程序中。” （来自：[https](https://developers.google.com/places/documentation/actions#PlaceReports) ://developers.google.com/places/documentation/actions#PlaceReports ）

此网页包含**附近的地方搜索**： [https ://developers.google.com/places/documentation/search](https://developers.google.com/places/documentation/search)

# regex - 在 Geany 中查找替换命名组正则表达式

> ID：13600916
> 
> 赞同：12
> 
> 时间：2012-11-28T08:36:31.907
> 
> 标签：regex, geany

我正在尝试将公共方法替换为具有注释的方法的受保护方法。

这是因为我正在使用phpunit来测试其中一些方法，但它们确实不需要公开，所以我想在生产服务器上切换它们并在测试时切换回来。

这是方法声明：

```
public function extractFile($fileName){ //TODO: change to protected 
```

这是正则表达式：

```
(?<ws>^\s+)(?<pb>public)(?<fn>[^/\n]+)(?<cm>//TODO: change to protected) 
```

如果我将其替换为：

```
\1protected\3\//TODO: change back to public for testing 
```

它似乎正在工作，但我无法开始工作的是命名替换。我必须使用 \1 来获得第一组。如果您无法在替换文本中访问它们，为什么要命名这些组？我尝试了诸如 <ws>、$ws、$ws 之类的东西，但这不起作用。

如果我想用 <ws> 命名组替换 \1，替换文本是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T20:09:47.030

命名组语法与 .NET/Perl 使用的`?<ws>`相同。对于那些正则表达式引擎，命名组的替换字符串引用是`${ws}`. 这意味着您的替换字符串将是：

`${ws}protected${fn}\//TODO: change back to public for testing`

m.buettner 提到的`\k<ws>`引用仅用于实际正则表达式中的反向引用。

**额外的信息：**

似乎 Geany 还允许使用 Python 风格的命名组：

*   `?P<ws>`是捕获语法
*   `\g<ws>`是替换字符串语法
*   `(?P=ws)`是正则表达式反向引用语法

**编辑：**

看来我对解决方案的希望没有成功。从[手册](http://www.geany.org/manual/gtk/glib/glib-regex-syntax.html)中，

> 子模式可以用以下三种方式之一命名：Perl 中的 (?...) 或 (?'name'...) 或 Python 中的 (?P...)。*从模式的其他部分*捕获括号的引用，例如反向引用、递归和条件，可以按*名称*和编号进行。

再往下：

> *对命名子*模式的反向引用使用 Perl 语法 \k 或 \k'name' 或 Python 语法 (?P=name)。

和

> 按*名称*引用的*子*模式可能出现在引用之前或之后的*模式中。*

 **因此，我对使用命名组的语法的推断是正确的。不幸的是，它们只能用于匹配模式。这回答了您的问题“为什么命名组......？”。

这是多么愚蠢？如果您不遗余力地实现命名组及其在匹配模式中的用法，为什么不在替换字符串中实现用法呢？**

# javascript - 在jqgrid中的数据列表中按最大长度调整列宽

> ID：13600917
> 
> 赞同：0
> 
> 时间：2012-11-28T08:36:32.547
> 
> 标签：javascript, jquery, jqgrid

我想通过数据列表的最大长度调整列宽，我尝试在触发`loadComplete`事件上添加代码，并使用函数

```
 $myGrid.jqGrid('setColProp', 'column1', { width: 300 });
 $myGrid.jqGrid('setColProp', 'column1', { width: 80 }); 
```

但仍然对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:22:13.557

尝试这个：

```
$(function () {
    setTimeout(function () {
        $('span.ui-jqgrid-resize').dblclick(function () {
            var id = jQuery(this).parent().attr('id'); // First get the ID of the column that this separator belongs to. This is a tag with an ID for the column.
            var colName = id.split('_')[1];

            var testDiv = jQuery('#stringWidth'); // Test DIV for measuring string widths

            testDiv.addClass('ui-jqgrid ui-jqgrid-htable ui-jqgrid-sortable ui-th-column ui-state-hover ui-widget-content ui-widget-header ui-state-focus'); // Assign jqGrid header style classes
            var padding = parseInt(jQuery(jQuery(this).parent()).css('padding-left')) + parseInt(jQuery(jQuery(this).parent()).css('padding-right')); // Calculate jqGrid header padding
            testDiv.html(jQuery(jQuery(this).parent()).html()); // Assign jqGrid header text to test DIV
            var nw = testDiv.width() + padding; // Calculate jqGrid header text width

            testDiv.removeClass('ui-jqgrid ui-jqgrid-htable ui-jqgrid-sortable ui-th-column ui-state-hover ui-widget-content ui-widget-header ui-state-focus'); // De-assign jqGrid header style classes
            testDiv.addClass('ui-jqgrid ui-row-ltr jqgrow ui-widget-content'); // Assign jqGrid cell style classes

            jQuery.each(jQuery('td[aria-describedby=' + id + ']'), function () // Iterate over all of the rows and figure out which row is the widest.
            {
                padding = parseInt(jQuery(this).css('padding-left')) + parseInt(jQuery(this).css('padding-right')); // Calculate jqGrid cell padding
                testDiv.html(jQuery(this).html()); // Assign jqGrid cell text to test DIV
                w = testDiv.width() + padding; // Calculate jqGrid cell text width
                if (w > nw) { nw = w; }
            });

            // Code below adapted from the grid's "dragEnd" event handler
            var ts = jQuery('#grid')[0];
            var grid = ts.grid;
            var p = ts.p;
            var idx = jQuery.jgrid.getCellIndex(jQuery(this).parent());

            jQuery("#rs_m" + jQuery.jgrid.jqID(p.id)).css("display", "none");

            p.colModel[idx].width = nw;

            grid.headers[idx].width = nw;
            grid.headers[idx].el.style.width = nw + "px";
            grid.cols[idx].style.width = nw + "px";
            if (grid.footers.length > 0) { grid.footers[idx].style.width = nw + "px"; }

            if (p.forceFit === true) {
                nw = grid.headers[idx + p.nv].newWidth || grid.headers[idx + p.nv].width;
                grid.headers[idx + p.nv].width = nw;
                grid.headers[idx + p.nv].el.style.width = nw + "px";
                grid.cols[idx + p.nv].style.width = nw + "px";
                if (grid.footers.length > 0) { grid.footers[idx + p.nv].style.width = nw + "px"; }
                p.colModel[idx + p.nv].width = nw;
            }
            else {
                jQuery('table:first', grid.bDiv).css("width", p.tblwidth + "px");
                jQuery('table:first', grid.hDiv).css("width", p.tblwidth + "px");
                grid.hDiv.scrollLeft = grid.bDiv.scrollLeft;
                if (p.footerrow) {
                    jQuery('table:first', grid.sDiv).css("width", p.tblwidth + "px");
                    grid.sDiv.scrollLeft = grid.bDiv.scrollLeft;
                }
            }
        });
    }, 10);

}); 
```

# c++ - 使用指向成员函数的指针时出现编译错误

> ID：13600918
> 
> 赞同：1
> 
> 时间：2012-11-28T08:36:34.573
> 
> 标签：c++

这是状态机设计模式的一个例子。我遇到了一些问题，请解释并给出解决方案。

这是代码：

```
#include <iostream>
using namespace std;
class Machine
{
  class State *current;
  public:
    Machine();
    void setCurrent(State *s)
    {
        current = s;
    }
    void on();
    void off();
};

class State
{
  public:
    virtual void on(Machine *m)
    {
        cout << "   already ON\n";
    }
    virtual void off(Machine *m)
    {
        cout << "   already OFF\n";
    }
};

void Machine::on()
{
  current->on(this);
}

void Machine::off()
{
  current->off(this);
}

class ON: public State
{
  public:
    ON()
    {
        cout << "   ON-ctor ";
    };
    ~ON()
    {
        cout << "   dtor-ON\n";
    };
    void off(Machine *m);
};

class OFF: public State
{
  public:
    OFF()
    {
        cout << "   OFF-ctor ";
    };
    ~OFF()
    {
        cout << "   dtor-OFF\n";
    };
    void on(Machine *m)
    {
        cout << "   going from OFF to ON";
        m->setCurrent(new ON());
        delete this;
    }
};

void ON::off(Machine *m)
{
  cout << "   going from ON to OFF";
  m->setCurrent(new OFF());
  delete this;
}

Machine::Machine()
{
  current = new OFF();
  cout << '\n';
}

int main()
{
  void(Machine:: *ptrs[])() = 
  {
    Machine::off, Machine::on
  };
  Machine fsm;
  int num;
  while (1)
  {
    cout << "Enter 0/1: ";
    cin >> num;
    (fsm. *ptrs[num])();
  }
} 
```

这是错误：

> prog.cpp：在函数“int main()”中：
> prog.cpp:89：错误：无效使用非静态成员函数“void Machine::off()”<br> prog.cpp:89：错误：无效使用非静态成员函数 'void Machine::on()'<br> prog.cpp:97: 错误：在 '*' 标记之前预期 unqualified-id

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T08:45:04.923

有两个错误：

一，地址操作符对于创建指向成员的指针是强制性的。所以他们的数组初始化应该是：

```
void(Machine:: *ptrs[])() = 
{
  &Machine::off, &Machine::on
}; 
```

二，取消引用指向成员的指针的运算符是`.*`. 这是一个单一的标记，所以不允许有空格：

```
(fsm.*ptrs[num])(); 
```

# delphi - delphi 通过变量 TObject 引用事件对象

> ID：13600920
> 
> 赞同：0
> 
> 时间：2012-11-28T08:36:48.197
> 
> 标签：delphi

我有带有函数 getsomedata 的组件（键：字符串；侦听器：Tlistener）

哪个监听器声明如下事件：

```
Tlistener = procedure (name,age,sex:string) of object ; 
```

但是在我的组件侦听器管理器中，当我添加新的侦听器时，将侦听器参数作为 TObject 类。

```
ListenerManager.addListener(key:string;Listener:TObject); 
```

当我编译代码时，我收到错误消息

> 实际参数不够

因为事件对象（TListener）和ListenerManager参数（TObject）。

完整功能代码示例。

```
procedure getsomedata (key:string;listener:Tlistener) ; 
begin

ListenerManager.addListener(key,listener); //error Here >>> addListener input parameters (key:string;Listener:TObject);

end; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:14:13.357

在这段代码中：

```
procedure getsomedata (key:string;listener:Tlistener) ; 
begin
  ListenerManager.addListener(key,listener);
end; 
```

您正在尝试将类型变量传递`TListener`给`addListener`. 该参数的类型为 being `TObject`。

现在，`TListener`输入为

```
procedure(name,age,sex:string) of object; 
```

过程类型的变量不能传递给类型的参数`TObject`。

很难确切地知道正确的代码是什么样的，因为问题不包含足够的背景信息。也许`addListener`应该收到 a`TListener`而不是 a `TObject`。但这只是一个猜测。如果您想要更完整的建议，那么您需要在问题中添加足够的细节。

* * *

您在评论中声明：

> 我无法将参数类型更改`TObject`为`TListener`.

在这种情况下，你被卡住了。根本不可能将 a`TListener`转换为 a `TObject`。现在，您可以实现一个具有单个 type 字段的类`TListener`，并传递它。但我非常怀疑这是否真的是正确的解决方案。

# javascript - JavaScript array.forEach 是否按升序遍历元素

> ID：13600922
> 
> 赞同：43
> 
> 时间：2012-11-28T08:36:56.493
> 
> 标签：javascript, arrays, sorting, foreach

在 JavaScript 中，我可以有一个带孔的数组：

```
a = [];
a[0] = 100;
a[5] = 200;
a[3] = 300;

a.forEach(function(x) {alert(x);}); 
```

我找不到有关元素是否会按升序处理的信息，或者这不是可靠的事实。

我检查了“for .. in”循环以升序遍历数组索引，而对象的属性名称以它们添加到对象的相同顺序遍历（至少看起来如此）。

（即看起来数组是某种内部树，而对象是哈希表。）

我刚刚发现 Rhino JavaScript 也遍历了不存在的元素：http: [//ideone.com/7Z3AFh](http://ideone.com/7Z3AFh)（不像 for..in）。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-28T08:46:16.173

[ECMA-262 第 5 版](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.18)规范和[MDN 的`Array.forEach()`页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)都显示了 的算法`.forEach()`，并且它肯定会按索引升序迭代数组元素（跳过从未分配过值的索引）。

当然，某些浏览器可能无法正确实现该算法，但我不知道有哪些没有。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-28T08:45:47.053

[规范说](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-array.prototype.foreach) `forEach`将按数字顺序访问数组元素。它不会访问不存在的元素。有关详细信息，请参阅链接。因此，对于您的示例数组，它将访问 element `0`、 then `3`、 then `5`。将它们添加到数组中的顺序对访问它们的顺序没有影响。

> 我检查了“for .. in”循环以升序遍历数组索引，而对象的属性名称以它们添加到对象的相同顺序遍历（至少看起来如此）。

**规范没有**`for-in`定义访问对象属性的顺序，即使在 ES2015（又名 ES6）中也没有定义，尽管 ES2015[定义了对象属性的顺序](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-ordinary-object-internal-methods-and-internal-slots-enumerate) ——该顺序不适用于or 。（有关[此答案](https://stackoverflow.com/questions/30076219/does-es6-introduce-a-well-defined-order-of-enumeration-for-object-properties/30919039#30919039)的更多信息。）如果您想按 ES2015 中定义的顺序访问属性，您可以使用（对于未使用名称定义的属性）或（对于两者和字符串属性名称[记住数字属性名称是真的是字符串]）。两者*都*尊重财产秩序。**`for-in``Object.keys`[`Object.getOwnPropertyNames`](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-object.getownpropertynames)`Symbol`[`Reflect.ownKeys`](http://www.ecma-international.org/ecma-262/6.0/index.html#sec-reflect.ownkeys)`Symbol`**

 **** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T08:42:39.587

直接脱离[ECMAScript 标准](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

> **forEach**为数组中存在的每个元素按升序调用一次 callbackfn。callbackfn 仅对实际存在的数组元素调用；它不需要数组的缺失元素。

所以 Array.forEach 将跳过数组中的某些元素。你的例子

```
a.forEach( function( value ) { console.log( value ) }); // prints 100, 300, 200 
```

如果您确实想按升序遍历数组并且所有元素都是数字，那么您可以像这样预先对数组进行排序

```
a.sort( function( a, b ) { return a - b });
// this now prints 100, 200, 300
a.forEach( function( value ) { console.log( value ) }); 
```***

# android - Android 缓存框架

> ID：13600923
> 
> 赞同：1
> 
> 时间：2012-11-28T08:37:02.020
> 
> 标签：android, sqlite, caching, sharedpreferences, three20

在 iOS 开发中，有 three20 负责所有缓存（列表、webview 等），但是有没有类似的东西可以自动处理缓存？还是我们必须自己做这一切？如果是这样，推荐的方法是什么？Sqlite 数据库？共享首选项？

问题是我们有超过 10 种不同的视图（包括列表、网络视图和更多列表），并且我们正在从网络加载数据。如果在一段时间内无法加载，我们希望显示缓存的数据。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:04:13.470

`WebView`可能启用了缓存，但其他视图并非如此。您必须实现自己的缓存。然而，由于 SQLite 在 android 上可用，因此很容易实现基于数据库的缓存。例如`DataCache.java`在[这个项目](https://bitbucket.org/zedvoid/aalp/src)中。只需将其设置为 Application 类中的全局单例，并在代码中的任何位置使用即可。

# sql - 将转换后的 varchar 插入 datetime sql

> ID：13600924
> 
> 赞同：4
> 
> 时间：2012-11-28T08:37:08.973
> 
> 标签：sql, sql-server, sql-server-2008, datetime, insert

我需要`varchar`在我的表中插入一个。表中的类型是 a`datetime`所以我需要转换它。我不认为这会是一个大问题，但是它一直插入`1900-01-01 00:00:00.000`而不是我想要的日期。当我使用转换后的日期进行选择时，它会显示正确的日期。

我将向您展示代码：

```
INSERT INTO Item (CategoryId, [Date], Content, CreatedOn)
   SELECT 
       CategoryId, Convert(datetime, '28/11/2012', 103), Content, GetDate()
   FROM 
       Item i
   JOIN 
       Category c ON i.CategoryId = c.Id
   JOIN 
       Division d ON d.Id = c.DivisionId
   WHERE 
       Date = Convert(datetime, '31/03/2005', 103) 
       AND d.Id = '142aaddf-5b63-4d53-a331-8eba9b0556c4' 
```

where 子句完美运行，并为我提供了我需要的过滤项目，所有数据都正确插入，除了转换后的日期。就像我说的 1900-...

如果我只是这样选择：

```
SELECT CategoryId, Convert(datetime, '28/11/2012', 103), Content, GetDate()
FROM Item i
JOIN Category c ON i.CategoryId = c.Id
JOIN Division d ON d.Id = c.DivisionId
WHERE Date = Convert(datetime, '31/03/2005', 103) AND d.Id = '142aaddf-5b63-4d53-a331-8eba9b0556c4' 
```

我得到正确的日期是：`2012-11-28 00:00:00.000`。我尝试使用不同的转换，例如：

```
Convert(datetime, '20121128') 
```

但这只会带来同样的问题。任何人看到我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T08:48:11.833

如果必须使用基于字符串的日期格式，则应选择一种**安全**且适用于每个 SQL Server 实例的日期格式，无论日期格式、语言和区域设置如何。

该格式称为**ISO-8601**格式，它是

```
YYYYMMDD      (note: **NO** dashes!) 
```

或者

```
YYYY-MM-DDTHH:MM:SSS 
```

为一`DATETIME`列。

所以而不是

```
Convert(datetime, '28/11/2012', 103) 
```

你应该使用

```
CAST('20121128' AS DATETIME) 
```

然后你应该没事。

如果您使用的是 SQL Server **2008** - 您还可以考虑在只需要日期（没有时间部分）的情况下使用`DATE`（而不是）。`DATETIME`这比使用`DATETIME`和始终拥有时间部分更容易`00:00:00`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-09T18:35:12.520

只是想抛开一个事实，即多年后我在试图找到我的问题的答案时发现了这个 SO 问题（以及许多其他人喜欢它）。

如果您在存储过程中对此进行故障排除，则需要修改存储过程的参数。创建我正在故障排除的代码的程序员`@ddt CHAR(10)`在存储过程中没有任何修改解决了这个问题。我不得不将参数更改为`@ddt smalldatetime`.

# asp.net - 如何在 ASP.NET Web API 中设计模型

> ID：13600932
> 
> 赞同：1
> 
> 时间：2012-11-28T08:37:40.847
> 
> 标签：asp.net, model, asp.net-web-api

在 ASP.NET Web API 中：

1.  简单的 Model 类代码示例，如：

    ```
    public class Member
    {
      public int id { get; set; }
      public string name { get; set; }
    } 
    ```

2.  我们可以很容易地编写控制器代码来生成成员数据，例如：

    ```
    public Member getMember() {
      Member oMember = new Member {id: "A0001", name: "john"};
      return oMember;
    } 
    ```

3.  当客户端 AJAX 发送 GET 操作时，控制器将响应 XML（或 JSON）中的成员对象数据，例如：

    ```
    <Member>
      <id>A0001</id>
      <name>john</name>
    </Member> 
    ```

4.  我的问题是“如何”编写模型类代码以让控制器自动导出复杂性 XML 结果，如下所示：

    ```
    <Member>
      <name>john</name>
      <data>
        <id type="A">id1</id>
        <id type="B">id2</id>
      </data>
      <wallet>
        <item type="US">Dollar1</item>
        <item type="RMB">Dollar2</item>
      </wallet>
    </Member> 
    ```

5.  请给我一个“模型类”的示例代码，或者一个命中！也许我错过了什么，我是 ASP.NET Web API 初学者！

# c++ - 为什么需要 virtual 关键字？

> ID：13600934
> 
> 赞同：5
> 
> 时间：2012-11-28T08:37:52.737
> 
> 标签：c++, virtual

换句话说，为什么编译器不只是“知道”如果派生类中函数的定义发生了更改，并且指向该派生类的动态分配内存的指针调用了更改后的函数，那么该函数尤其应该被称为而不是基类的？

在什么情况下，virtual 关键字对程序员没有好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T08:43:40.653

`virtual`关键字告诉编译器实现**动态调度**。这就是语言的设计方式。如果没有这样的关键字，编译器将不知道是否要实现动态调度。

一般来说，动态调度的缺点`virtual`是，

*   它有轻微的性能损失。大多数编译器会使用 vtable 和 vptr 机制实现动态调度，其中要调用的适当函数是通过 vtable 决定的，因此在动态调度的情况下需要额外的间接。
*   它使您的课程成为非 POD。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:43:20.250

一个理由：

考虑位于单独模块中的基类，例如库。

以及应用程序中的派生类。

编译器在编译库期间如何知道给定函数是/必须是虚拟的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:11:50.037

C++ 的主要设计原则之一是[C++ 不会为未使用的功能产生开销（“零开销原则”）](http://en.wikipedia.org/wiki/C++#Philosophy)。这是因为专注于高性能

这就是为什么您需要选择虚拟函数等功能，而在 Java 等语言中，函数默认是虚拟的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T08:41:11.120

编译器不知道，因为它不知道。不使用虚拟功能可能是您的意图，因为每个功能总是有相关的成本。

# image - 与原始图像相比，特色图像小且质量低

> ID：13600937
> 
> 赞同：1
> 
> 时间：2012-11-28T08:38:07.103
> 
> 标签：image, wordpress

当我在 Wordpress 中上传特色图片时，它会减小图片的大小。图像质量也远低于原始图像。如何让 Wordpress 拥有更大、更高质量的特色图片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:06:34.753

`get_the_post_thumbnail()`在这里，您可以在数组中的函数参数中给出缩略图的大小，如下所示：

```
echo  get_the_post_thumbnail($id, array(100,100) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:55:54.903

您可以在设置 > 媒体下更改缩略图的大小。至于图像的质量，您可以调整 wordpress 在将原始图像缩小到缩略图大小时使用的 jpeg 压缩量（假设您使用的是 jpegs）。将以下内容添加到您的 functions.php 文件中。

`add_filter( 'jpeg_quality', create_function( '', 'return 90;' ) );`

如果您愿意，您可以将 90 提升到 100，但您最终会得到更大的图像文件大小。

请注意，这只会影响您上传到网站的任何新图像——即，WordPress 不会自动重新保存您已上传的所有图像的缩略图（以及中等和大，如果适用）版本。但是您可以使用插件强制重新生成缩略图图像......等待它......重新生成[缩略图](http://wordpress.org/extend/plugins/regenerate-thumbnails/)。如果您刚刚在媒体设置中更改了图像尺寸，它也特别方便。我一直在使用这个插件。这很不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:04:30.693

你可以用这些定义新的图像尺寸：

```
add_image_size( $name, $width, $height, $crop ); 
```

然后你可以在你的主题中使用它：

```
the_post_thumbnail( $name ); 
```

# sql - 连接中的非索引列

> ID：13600939
> 
> 赞同：0
> 
> 时间：2012-11-28T08:38:11.377
> 
> 标签：sql, oracle, indexing, database-performance

SQL> desc emp_1;

```
Name     Type         Nullable Default Comments 
-------- ------------ -------- ------- -------- 
EMP_ID   NUMBER                                 
EMP_NAME VARCHAR2(20) Y                         
DEPTNO   NUMBER(10)   Y 
```

SQL> 描述部门

```
Name      Type         Nullable Default Comments 
--------- ------------ -------- ------- -------- 
DEPT_ID   NUMBER       Y                         
DEPT_NAME VARCHAR2(20) Y 
```

SQL> 创建索引 abc_idex ON emp_1 (deptno);

```
Index created 
```

select /*+ index(emp_1 abc_idex) */ emp_name from emp_1 INNER JOIN dept ON emp_1.deptno = dept.dept_id

```
Explain Plan :- 
SELECT STATEMENT, GOAL = ALL_ROWS           271 100000  800000
 MERGE JOIN         271 100000  800000
  TABLE ACCESS BY INDEX ROWID   EXAMINBI    EMP_1   267 100000  500000
   INDEX FULL SCAN  EXAMINBI    ABC_IDEX    131 100000  
  SORT JOIN         4   4   12
   TABLE ACCESS FULL    EXAMINBI    DEPT    3   4   12 
```

select /*+ index(emp_1 abc_idex) */ emp_name from emp_1 INNER JOIN dept ON emp_1.deptno = dept.dept_id 和 emp_1.emp_name=dept.dept_name

```
Explain Plan:- 
SELECT STATEMENT, GOAL = ALL_ROWS           272 1   11
 HASH JOIN          272 1   11
  TABLE ACCESS FULL EXAMINBI    DEPT    3   4   24
  TABLE ACCESS BY INDEX ROWID   EXAMINBI    EMP_1   267 100000  500000
   INDEX FULL SCAN  EXAMINBI    ABC_IDEX    131 100000 
```

在您的帮助下，我正在清除我的索引概念。我的理解是，oracle 将跳过我的索引提示，因为它需要其他未索引的列（emp_name），但在第二种情况下，emp_1 表仍被索引扫描。我的问题在这种情况下是否会有所帮助，我使用另一列进行不使用索引的连接（在我们的示例 emp_name 中）？在这种情况下我们应该使用索引提示吗？*注意：- 我知道这是 emp_name 和 dept_name 不是逻辑连接，但只是为了测试目的，我创建了相同的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:59:06.297

> 我想知道它是否建议在加入时使用索引提示，您正在使用来自同一个表的非索引列。会有帮助吗？

大多数情况下**否**

一般情况下你根本不使用提示。正如您在此处看到的，您使用了一个提示，Oracle 已经遵循它并做了一些愚蠢的事情。您仅在非常有限的情况下使用提示，通常仅当您了解 Oracle 无法自行解决的数据的性质时。一般来说，我使用的唯一提示是基数提示，因为 Oracle 有时真的无法正确计算出基数。

不要假设您需要经常使用提示。你没有。即使提示现在有效，但当数据的性质发生变化时，它可能会停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:52:38.520

在您的情况下，使用 index 可能会减慢整个语句的速度。这是因为您正在查询整个表 DEPT 和 EMP_1。由于提示，Oracle 必须同时查询全表和索引。你真的想要这个吗？

在像这样的简单情况下，我更喜欢不使用提示。优化器做得很好。

如果您使用特定部门的声明，那么结果会更好

```
select emp_name
  from emp_1 INNER JOIN dept ON emp_1.deptno = dept.dept_id
  where dept.dname = 'any department' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:56:36.643

所以：

```
select /*+ cardinality(0)*/ emp_name 
from emp_1 
   INNER JOIN dept ON emp_1.deptno = dept.dept_id 
```

# objective-c - 上传大视频iOS时延长后台任务超时时间

> ID：13600947
> 
> 赞同：9
> 
> 时间：2012-11-28T08:38:41.720
> 
> 标签：objective-c, ios

我有一个应用程序，我必须在其中将大型视频上传到 Amazon s3 存储桶。我正在使用由 NSOperationQueue 管理的 NSOperations 来运行并发任务。

上传小视频（小于 200 Mb）时我没有问题。但问题是当我尝试上传大视频时，10 分钟后上传过程被中断。

我已经 `beginBackgroundTaskWithExpirationHandler:^`习惯了 10 分钟的窗口。我可以延长此超时期限的正确方法是什么？

如果我设法延长此超时时间，Apple 会拒绝该应用程序吗？

目前我在我的代码中有以下代码，我`AppDelegate`参考链接[iPhone - Backgrounding to poll for events](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events)

```
 - (void)applicationDidEnterBackground:(UIApplication *)application 
{

    UIApplication*    app = [UIApplication sharedApplication];
    dispatch_block_t expirationHandler;

    expirationHandler = ^{
        bgTask = [app beginBackgroundTaskWithExpirationHandler:expirationHandler];
    };

    bgTask = [app beginBackgroundTaskWithExpirationHandler:expirationHandler];
} 
```

通过这段代码，我看到后台任务永远不会被中断。正如您在过期处理程序中看到的那样，我已经启动了另一个后台任务事件，该事件导致一个无限运行的任务。即使上传完成后，我也可以编写结束后台任务的逻辑，但我对这种方法有疑问..

你们有什么感想？

无论如何都是黑客行为？苹果会因为以下方法拒绝该应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:29:02.327

后台任务背后的想法是防止应用程序在后台连续运行。换句话说，如果您试图绕过 Apple 实施的限制，那么他们就有理由拒绝您的申请。

他们是否会这样做的问题只能由苹果来回答。但是，正如 Daij-Djan 所提到的，在其他情况下您的应用程序可能会被终止。

几个月前，我遇到过类似的情况，即应用程序必须将大文件上传到 S3 存储桶。解决方案是使用分段上传来确保在您的应用程序处于活动状态时恢复上传过程。[您可以在 API 参考](http://docs.amazonwebservices.com/AWSiOSSDK/latest/)中阅读有关分段上传的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:42:21.457

看起来很hackisch但还不错恕我直言（相反）：D

如果苹果让它通过，你就是金子，但实际上你在滥用 bg 任务

**顺便说一句：即使这样，ios 也可能会取消你！+ 不要做 CPU 密集型/内存密集型工作，因为它可能会影响其他应用程序的性能**

# c# - 如何将浮点数组转换为字节数组？

> ID：13600949
> 
> 赞同：-2
> 
> 时间：2012-11-28T08:39:00.270
> 
> 标签：c#, arrays, floating-point, byte, converter

> **可能重复：**
> [将不同值类型的数组转换为字节数组](https://stackoverflow.com/questions/1385829/convert-an-array-of-different-value-types-to-a-byte-array)

我有 6 个浮点数，我需要将它们放入浮点数数组中，然后将它们转换为字节。开始了：

```
float x= g.transform.position.x;
float y= g.transform.position.y;
float z= g.transform.position.z;
float alpha = g.transform.rotation.eulerAngles.x;
float theta = g.transform.rotation.eulerAngles.y;
float phi =  g.transform.rotation.eulerAngles.z; 
```

将浮点数组转换为字节数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:48:59.850

```
byte[] data = new float[]{x,y,z,alpha,theta,phi}
                  .SelectMany(f => BitConverter.GetBytes(f)).ToArray(); 
```

或（取决于消费者的计算机架构）

```
byte[] data = new float[]{x,y,z,alpha,theta,phi}
              .SelectMany(f => BitConverter.GetBytes(f).Reverse()).ToArray(); 
```

您可能还想用`BitConverter.IsLittleEndian`@CodesInChaos 的建议来决定选择哪一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:53:32.587

```
float[] source = new float[100];
byte[] dest = new byte[source.Length * sizeof(float)];
Buffer.BlockCopy(source, 0, dest, 0, dest.Length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:25:37.747

这是一个厚颜无耻的方式：

```
float x = 1F;
float y = 2F;
float z = 3F;
float alpha = 4F;
float theta = 5F;
float phi = 6F;
byte[] raw = new byte[6 * sizeof(float)];
fixed (byte* ptr = raw)
{
    float* typed = (float*)ptr;
    typed[0] = x;
    typed[1] = y;
    typed[2] = z;
    typed[3] = alpha;
    typed[4] = theta;
    typed[5] = phi;
}
return raw; 
```

但是请注意，它对字节顺序做出了假设。如有必要，您可能需要检查`BitConverter.IsLittleEndian`和反转每个 4 字节块。

当然，如果您可以重新使用现有的缓冲区，那就更可取了。相同的方法 - 只需将现有`byte[]`参数作为参数传递，而不是每次都创建一个新参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T08:54:50.157

尝试类似：

```
var farray = new float[] {12.4f, 12.3f, 4.5f}; // or what ever values you want.
var bArray = new byte[farray.Length];
Buffer.BlockCopy(farray, 0, bArray, 0, bArray.Length);
        foreach (byte value in bArray)
            Console.Write("{0}  ", value); 
```

欲了解更多信息，请访问[MSDN](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T08:55:26.617

如果本机字节序和 LINQ 是可以接受的，LB 的答案很好。如果您想要一致的（小）字节序，请使用`BinaryWriter`：

```
using(var stream = new MemoryStream())
using(var writer = new BinaryWriter(stream))
{
   writer.Write(x);
   writer.Write(y);
   ...
   return stream.ToArray();
} 
```

* * *

如果你想使用大字节序，你可以使用下面的辅助方法：

```
byte[] GetBytesBigEndian(float f)
{
  var bytes = BitConverter.GetBytes(f);
  if(BitConverter.IsLittleEndian)
    Array.Reverse(bytes);
  return bytes;
}

using(var stream = new MemoryStream())
using(var writer = new BinaryWriter(stream))
{
   writer.Write(GetBytesBigEndian(x));
   writer.Write(GetBytesBigEndian(y));
   ...
   return stream.ToArray();
} 
```

如果这太慢了，还有一些`unsafe`技巧可以加快速度。

# c# - 如何为asp菜单控件中的每个菜单项设置单独的css

> ID：13600951
> 
> 赞同：0
> 
> 时间：2012-11-28T08:39:06.370
> 
> 标签：c#, asp.net

我有一个如下所示的菜单控件

**菜单 1 菜单 2 菜单 3 菜单 4**

如何为每个菜单设置单独的 ccs？menu1--css1 menu2--css2 menu3-css3 .. 像这样

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:40:36.877

如果我理解正确，您正在准备 4 个 css 文件，例如

```
.css1
{
}
.css2
{
}
.css3
{
}
.css4
{
} 
```

并且您的菜单项是men1 menu2 menu3 menu4，要实现此菜单，您必须在代码中使用repeater，因此从代码隐藏中，您可以附加css'<'e.item.itemindex'>'并将此css附加到您的控件。

# java - 无法使用 Jackson lib 反序列化 JSON

> ID：13600952
> 
> 赞同：2
> 
> 时间：2012-11-28T08:39:07.510
> 
> 标签：java, json, jackson

我有一个 JSON：

```
{
    "firstField": "Something One",
    "secondField": "Something Two",
    "thirdField": [
        {
            "thirdField_one": "Something Four",
            "thirdField_two": "Something Five"
        },
        {
            "thirdField_one": "Something Six",
            "thirdField_two": "Something Seven"
        }
    ],
    "fifthField": [
        {
            "fifthField_one": "Something… ",
            "fifthField_two": "Something...",
            "fifthField_three": 12345
        },
        {
            "fifthField_one": "Something",
            "fifthField_two": "Something",
            "fifthField_three": 12345
        }
    ]
} 
```

我有我的课：

```
public static class MyClass {
        @JsonProperty
        private String firstField, secondField;
        @JsonProperty
        private ThirdField thirdField;
        @JsonProperty
        private FifthField fifthField;

        public static class ThirdField {
            private List<ThirdFieldItem> thirdField;
        }

        public static class ThirdFieldItem {
            private String thirdField_one, thirdField_two;
        }

        public static class FifthField {
            private List<FifthFieldItem> fifthField;
        }

        public static class FifthFieldItem {
            private String fifthField_one, fifthField_two;
            private int fifthField_three;
        }
    } 
```

我正在使用 Jackson 库对它们进行反序列化：

```
public void testJackson() throws IOException {
    JsonFactory factory = new JsonFactory();
    ObjectMapper mapper = new ObjectMapper(factory);
    File from = new File("text.txt"); // JSON I mentioned above
    mapper.readValue(from, MyClass.class);
} 
```

但我得到了例外：

> org.codehaus.jackson.map.JsonMappingException：无法从 START_ARRAY 令牌中反序列化 Main$MyClass$ThirdField 的实例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:42:30.927

您将您的`thirdField`和`fifthField`属性定义为 JSON 中的数组。它们也需要是 Java bean 上的数组或集合：

```
public static class MyClass {
    @JsonProperty
    private String firstField, secondField;

    @JsonProperty
    private Collection<ThirdField> thirdField;

    @JsonProperty
    private Collection<FifthField> fifthField;

    /// ...
} 
```

当您将现有的 JSON 对象转换为 bean 时，请记住 JSON 数据非常类似于地图。如果您设想如何将地图中的数据映射到您的对象中，那真的很有帮助。您的`ThirdField`和`FifthField`对象需要映射 JSON 中的定义。这就是您的 JSON 所说的 a`ThirdField`是：

```
{
    "thirdField_one": "Something Four",
    "thirdField_two": "Something Five"
} 
```

从字面上将其转换为 Java bean 可为您提供：

```
public class ThirdField implements Serializable {
    private String thirdField_one;
    private String thirdField_two;

    // ...
} 
```

您可以添加注释等，以获得完整的 bean。对你的`FifthField`对象做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:22:12.157

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

由于并非总是可以更改您的域模型（[由 @Perception 回答](https://stackoverflow.com/a/13601002/383861)），以下是如何使用 MOXy 将原始对象模型映射到所需的 JSON。

**Java 模型**

在这个用例中，您可以利用`@XmlPath(".")`扩展。这告诉 MOXy 将目标对象的内容带入源节点。

```
@XmlAccessorType(XmlAccessType.FIELD)
public static class MyClass {
    private String firstField, secondField;

    @XmlPath(".")
    private ThirdField thirdField;

    @XmlPath(".")
    private FifthField fifthField;

    @XmlAccessorType(XmlAccessType.FIELD)
    public static class ThirdField {
        private List<ThirdFieldItem> thirdField;
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    public static class ThirdFieldItem {
        private String thirdField_one, thirdField_two;
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    public static class FifthField {
        private List<FifthFieldItem> fifthField;
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    public static class FifthFieldItem {
        private String fifthField_one, fifthField_two;
        private int fifthField_three;
    }
} 
```

**转换代码**

下面的演示代码展示了如何启用 MOXy 的 JSON 绑定。

```
public static void main(String[] args) throws Exception {
    Map<String, Object> properties = new HashMap<String, Object>(2);
    properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
    properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
    JAXBContext jc = JAXBContext.newInstance(new Class[] {MyClass.class}, properties);

    Unmarshaller unmarshaller = jc.createUnmarshaller();
    StreamSource json = new StreamSource("src/forum13600952/input.json");
    MyClass myClass = unmarshaller.unmarshal(json, MyClass.class).getValue();

    Marshaller marshaller = jc.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marshaller.marshal(myClass, System.out);
} 
```

**输入.json/输出**

Belos 是您问题的输入，经过稍微重新格式化以匹配 MOXy 产生的输出。

```
{
   "firstField" : "Something One",
   "secondField" : "Something Two",
   "thirdField" : [ {
      "thirdField_one" : "Something Four",
      "thirdField_two" : "Something Five"
   }, {
      "thirdField_one" : "Something Six",
      "thirdField_two" : "Something Seven"
   } ],
   "fifthField" : [ {
      "fifthField_one" : "Something...",
      "fifthField_two" : "Something...",
      "fifthField_three" : 12345
   }, {
      "fifthField_one" : "Something",
      "fifthField_two" : "Something",
      "fifthField_three" : 12345
   } ]
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# wcf - AppFabric 在特定 IIS 站点上使用时崩溃

> ID：13600957
> 
> 赞同：0
> 
> 时间：2012-11-28T08:39:21.033
> 
> 标签：wcf, appfabric

我正在一个小型网络场（5 个网络服务器）上设置一个 AppFabric 缓存集群。

缓存集群安装在运行 IIS 的同一台服务器上，如果这很重要的话。

我只为我的模型层使用 AppFabric 缓存，这意味着主要是从数据库查询创建的业务逻辑对象。没有页面缓存或类似的。

在主网站上启用时，这工作得很好。

然而，在 5 个 Web 服务器中的一个上有第二个 IIS 站点，它托管几个服务，其中包括 3 个 WCF 端点，以及 2 个老式的 ASMX Web 服务。

当我为此站点启用 AppFabric 缓存时，它会破坏整个集群。对 Get-CacheClusterHealth 的调用显示全部 5 个已完全消失（在未分配的命名缓存部分中为 100%）

模型代码实际上与我们用于主网站的 DLL 完全相同，所以我怀疑它是代码中的任何内容（因为主站点有效）

我在 IIS -> AppFabric 仪表板中注意到此错误：解析服务文件 myendpoint.svc 时发生错误

所以这让我想到：这可能是由 WCF 端点引起的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:06:27.920

这里有一个相关的问题：- [AppFabric Cache server and web application on the same physical machine](https://stackoverflow.com/questions/8148512/appfabric-cache-server-and-web-application-on-same-physical-machine)

Microsoft 不建议将缓存节点用作双重用途（也托管应用程序）。这可能是您的问题的原因。我们使用 appfabric 缓存集群，但我们将它们专用于 appfabric，仅此而已。在此处查看 MS 的文章：- [AppFabric 缓存物理架构](http://msdn.microsoft.com/en-us/library/ee790954.aspx)

# android - 更改方向时在android中自动适应屏幕

> ID：13600958
> 
> 赞同：0
> 
> 时间：2012-11-28T08:39:22.940
> 
> 标签：android

有没有办法在改变方向时自动适应屏幕？

因为当我以纵向模式查看我的应用程序时，所有图像似乎都很好，但是当我将其更改为横向时，图像变得像素化或被拉伸得很多。所以我想知道是否有自动调整屏幕。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:54:05.477

在 layout-land 文件夹中指定具有相同名称的不同布局并使用合适的可绘制对象。如需更多帮助，请参阅本教程

[http://www.androidpeople.com/android-portrait-amp-landscape-differeent-layouts](http://www.androidpeople.com/android-portrait-amp-landscape-differeent-layouts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:18:33.520

```
Display display;
int width;
int height; 
```

在 onCreate() 添加宽度 = display.getWidth(); 高度 = display.getHeight();

在 onResume() 添加

```
if(width<height){
 //you can add your layout here (landscape)
}else{
    //you can add your layout here (portrait)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:52:00.123

您必须有两种布局，一种用于纵向，另一种用于横向。如果您使用两种布局，则可以使用相同的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:01:33.263

有两种可能，

**选项 1：**您可以在`layout-port`、`layout-land`、`drawable`、中使用不同的 XML 布局`drawable-land`。在这些 XML 布局中，您可以修复与您的屏幕密度匹配的不同大小的图像。对于不同的图像集，您可以查看`ldpi`、`mdpi`、`hdpi`、`xhdpi`。

**选项 2：**您可以使用九个补丁图像。

如果您找到更好的解决方案，请分享。

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T11:44:37.383

您可以使用以下代码段来识别配置已更改

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

 // Checks the orientation of the screen and do your action here

} 
```

干杯。

# c - 编写具有固定和可变部分 C 的文件

> ID：13600959
> 
> 赞同：0
> 
> 时间：2012-11-28T08:39:24.377
> 
> 标签：c, text-files, binaryfiles

我有以下问题：日历文本文件和二进制文件**的名称应具有固定部分和可变部分。使用时间函数（在 time.h 中）或其他一些自动机制来确保**当您在更新日历后写回文件时，不会覆盖您读入的文件，而是写入文件的新版本这显然是最近的。知道我有一个管理日历的程序。是否可以使用库创建具有固定部分和可变部分的文件`time.h`？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:08:53.430

你的问题很模糊，所以答案只能是相似的。

根据您的规范，我猜您需要一个文件名 fe "calendar-YYYYMMDDhhmmss.bin" 和 "calendar-YYYYMMDDhhmmss.txt"

当你“man time.h”时，你可以看到，time-“library”提供了所有这些数据。在手册页的底部，您会看到一些相关的函数，例如“time()”和“strftime()”，它们可以帮助您获取时间戳并根据需要格式化时间。

如果您“http://www.whathaveyoutried.com”又卡住了，请更新您的问题，我们将进一步帮助您。

**伊迪丝**（对评论）：

这取决于您是否应该有很多文件，每个文件都包含一个“日历”，最新日期的文件是实际日历，旧的文件是备份；或者您有一个日历文件，其中每个“日历”都有一个新部分，那么您必须（为自己）定义如何组织这些实际和历史部分。

事实上，我更喜欢第一个解决方案，所以每次更新日历时，都会调用“fopen（path_filename_timestamp_txt，“w”）；”。在第二种情况下，您将调用“fopen(path_filename_txt, "a");" 和“fwrite（时间戳）；” 您的节标题；

请告诉我们，到目前为止你做了什么！（尽可能短，根据[http://sscce.org/](http://sscce.org/)）

# node.js - node.js async proxyRequest 与 http-proxy

> ID：13600960
> 
> 赞同：0
> 
> 时间：2012-11-28T08:39:25.993
> 
> 标签：node.js, mongodb, http-proxy

我绝望了。我认为，这不是什么大问题，但我找不到问题。我认为，最好的是，当我发布我的课程并描述问题时，我就有了。我剥离了功能，所以我做的最多看起来毫无用处，但相信我，没有剥离代码，它很有用:)

一切正常，很好，而不是一点，我在课后描述

首先，我的 main.js，这是我的起点

```
var proxy = require('./proxy');
var mongo = require('mongodb');
var mongoserver = new mongo.Server('localhost', 27017, {auto_reconnect:true});
var mongodb = new mongo.Db('proxy', mongoserver, {safe:false});
mongodb.open(function(err, db) {
    proxy.createServer(8000, db);
} 
```

代理.js

```
var httpProxy = require('./node_modules/http-proxy/lib/node-http-proxy');
var proxyhandler = require('./proxyhandler');

exports.createServer = function(port, mongodb) {
    return new Proxy(port, mongodb);
};

var Proxy = exports.Proxy = function(port, mongodb) {
    var handlers = {};
    var requestCallback = function(req, res, proxy) {
        var host = req.headers.host; //target host, find user modules by this
        if (!handlers[host]) {
            mongodb.collection('customerConfig', function(err, collection) {
                collection.findOne({host:host}, function(err, item) {
                    handlers[host] = proxyhandler.createHandler(mongodb, item);
                    handers[host].handle(req, res, proxy); //Marker 1
                });
            });
        } else {
            handers[host].handle(req, res, proxy); //Marker 2
        }
    };

    return httpProxy.createServer(requestCallback).listen(port);
}; 
```

代理处理程序.js

```
exports.createHandler = function (mongodb, item) {
    return new Handler(mongodb, item);
};

var Handler = function(mongodb, config) {
    this.handle = function (req, res, proxy) {
        var target = { host : 'google.de', port : 80 }; //normally this is set by "item"
        proxy.proxyRequest(req, res, target);
    };
}; 
```

所以，当我第一次查询代理时，浏览器只是挂起，直到他抛出超时。当我再次查询时，handle() 在 //Marker 1 被调用，一切正常，当 handle() 在 //Marker 2 被调用时

我调试了，我能够调试的，进入 http-proxy，到 http 并且无法找到问题。希望代码足以重播我的问题。

A，忘了....当我在 proxy.js 中调用 proxyRequest() 时，没有委托给 proxyhandler.js，一切正常，即使在 //Marker 1。

# javascript - 搜索引擎和内嵌模板

> ID：13600968
> 
> 赞同：2
> 
> 时间：2012-11-28T08:40:22.687
> 
> 标签：javascript, html, seo, handlebars.js

首先，我不是 SEO 专家，我是一名程序员，对我来说这个话题是模糊的 :-)。

搜索引擎遇到了怎么办`<script type= text/template>`？

我见过关于脚本标签的文本/模板类型的类似问题。

我们现在浏览器会忽略它，但是搜索引擎机器人对这个脚本类型做了什么？它会忽略它还是有风险被文本/模板脚本中的关键字索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:49:15.023

搜索引擎忽略脚本标签，句号。

# android - 为什么我的应用没有显示在默认启动器列表中？

> ID：13600971
> 
> 赞同：2
> 
> 时间：2012-11-28T08:40:29.770
> 
> 标签：android, launcher

我有一个应用程序，它将成为主屏幕，默认启动器。我通过在我的意图中使用 CATEGORY_LAUNCHER 和在清单文件中使用 CATEGORY_HOME 来实现这一点，家庭活动具有 ACTION_MAIN 和 CATEGORY_HOME。因为设置了多个家庭，所以 android 会提示用户选择一个，并且可以选择默认一个。我的模拟器上的这个列表中有许多默认应用程序，但我的应用程序不是其中之一。有人知道如何让我的应用程序进入列表吗？

这是我发送意图的方式：

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_LAUNCHER);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

这里是清单的相关部分：

```
<activity
        android:name=".NewHome"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:45:12.603

如果您想在默认启动器中显示您的应用程序。将您的代码更改为：

```
<activity
        android:name=".NewHome"
        android:label="@string/title_activity_main" >
        <intent-filter>
                 <action android:name="android.intent.action.MAIN" />  
                 <category android:name="android.intent.category.HOME" />  
                 <category android:name="android.intent.category.DEFAULT" /> 
        </intent-filter>
    </activity> 
```

# node.js - 什么工作得更快：$.get/post 或 app.get(.. res.render()) 在线用户超过 5000

> ID：13600975
> 
> 赞同：0
> 
> 时间：2012-11-28T08:40:45.097
> 
> 标签：node.js, jquery, express

我在nodejs（0.8.15）和express framework（>3.0）上创建站点，会有用户注册，很多聊天，发送私人消息，一些在线游戏，使用socket.io等等。

1）如果一次用户数量是 5000+ 用户在线，我应该如何加载页面以使我的网站快速：使用渲染加载页面

```
app.get('/', function(req, res) {
    res.render('anypage');
} 
```

和`app.post('/', ..)`

或与

```
$.ajax({ url: '/'
     , type: 'GET/POST'
     , dataType: 'html'
  })
  .done(function(data) {
     $('#content').load('anypage.html');
}); 
```

?

老实说，我想制作单页应用程序，但我担心性能和速度。

2）或者也许有另一种方法可以更快地加载页面？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:33:39.063

1) 你的选择……很奇怪。`app.get`在服务器端，而`$.ajax`在客户端。我假设您在谈论 AJAX 与经典链接、URL。但问题是使用单页应用程序**根本不会影响性能**，至少不会开箱即用。这完全取决于您如何实现它。

但通常 AJAX 更有效，因为您不必每次都下载相同的 HTML（基本布局）和/或图像。它也更加用户友好，因为从一页转到另一页时没有“闪烁”。另一方面，实现跨浏览器的单页应用程序更加困难。当您处理动态脚本加载和/或浏览器历史记录时，难度会更高。

2）有成千上万种提高加载速度的技术。但它们中的大多数都基于适当的缓存和水平缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:53:21.560

我认为您应该专注于通过 api 提供 JSON 服务的节点层，并使用像 Backbone.js + jQuery 这样的客户端框架来呈现页面。它将把 UI 的大部分繁重工作推给客户端，而不是服务器。

# git - 如何在 PhpStorm 中使用 git？

> ID：13600977
> 
> 赞同：0
> 
> 时间：2012-11-28T08:40:44.797
> 
> 标签：git, magento, phpstorm

我是版本控制的新手。我最近开始使用 PhpStorm，它很棒，但是我想使用 git。我在 BitBucket 上有一个私人仓库，但这是我正在努力理解的逻辑，所以希望得到一些指导。

据推测，git 的想法是允许协作以及版本控制，这意味着在任何时候，如果使用正确，项目的“最新”版本应该可以在线获得，例如在我的私人仓库中。然后允许的用户/合作者可以下载、修改然后提交回 repo。我想我理解那部分。

那么“实时”站点从何而来，即存在于人们访问的 Web 服务器上的站点？我们如何从 repo 推送到这里？我有点困惑。我有一些建议，在本地堆栈上的站点上工作是“最好的”，所以我正在使用 MAMP。所以我必须从 Web 服务器下载该站点，对 BitBucket 存储库进行初始提交，然后从这里签入/签出文件？如何完成“圈子”并从 repo 推送到 Web 服务器以“上线”？

有可能我弄错了棍子的一端，但我现在正在努力解决它。我已经完成了“try git”指南并阅读了几篇文章，但也许​​只有我一个人，但我真的不知道你是如何完成操作的。当然，最终的游戏是让网站在人们可以访问的网络服务器上运行和运行，而不是停留在某个等待编辑的存储库中？

我在我的大部分项目中都使用 Magento，所以你知道这会很快变得非常大，所以多轮上传/下载和移动将是一场噩梦。

任何有关该过程如何工作的建议或简化说明或解释都将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:56:24.667

> 当然，最终的游戏是让网站在人们可以访问的网络服务器上运行和运行，而不是停留在某个等待编辑的存储库中？

没有。这不是 git 的用途。Git 是一个版本控制系统，与网络服务器无关。有很多方法可以在 web 服务器上部署 git 存储库的内容，但 git 没有提供真正的“内置”或首选方法。最简单的方法是：

1.  在网络服务器上安装 git
2.  克隆服务器上的存储库
3.  `git pull`只要您希望它更新到当前状态，就在服务器上运行。

更多不需要 ssh 访问/完全自动化的解决方案，google 为“在网络服务器上部署 git repo”</p>

# java - 从 Java 运行 SQL 加载器 - 并非所有行都已加载

> ID：13600981
> 
> 赞同：4
> 
> 时间：2012-11-28T08:40:59.943
> 
> 标签：java, runtime, sql-loader

我正在尝试从 Java 方法运行 SQL Loader，但我遇到了问题。

我正在创建一个运行时进程来运行 SQLLDR 命令，但并未加载数据文件中的所有行。相反，无论数据文件中的总行数如何，它都会停留在相同的行数（5184 行）。

但是，当我复制完全相同的命令并直接从命令提示符运行它时，它运行良好并且所有行都被加载。

知道这个问题的原因是什么吗？我需要更改 Java 中的某种缓冲区大小吗？

谢谢！

```
// Run SQL Loader after creating the control file
        Runtime rt = Runtime.getRuntime();
        String sqlLoaderPath = "C:\\app\\product\\11.1.0\\client_1\\BIN\\";
        String cmd = sqlLoaderPath + "SQLLDR.EXE userid=***************************"
                            + "data=c:\\sqlldr\\sqlldr_data.dat "
                            + "control=c:\\sqlldr\\sqlldr_control.ctl "
                            + "log=c:\\sqlldr\\sqlldr_log.log "
                            + "discard=c:\\sqlldr\\sqlldr_discard.disc "
                            + "bad=c:\\sqlldr\\sqlldr_bad.bad ";
        Process proc = rt.exec(cmd);
        int exitVal = proc.waitFor();
        proc.destroy(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-22T19:38:54.510

我知道现在回答这个问题为时已晚，但写下来是因为我遇到了类似的问题。只需在 sql-loader 控制文件的选项子句中添加 SILENT=FEEDBACK 即可。Sql-loader 为输出流提供有限的缓冲区大小，读取失败会导致子进程通过 JAVA 挂起，因此只需在其选项中使用 SILENT 来停止 sql-loader 的输出流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-03T05:18:12.130

请查看下面的代码，我们如何使用。

```
String dbStr = "sqlldr "+dbuserid +"/" + dbpassword + "@" + dbServiceName;

String cmdStr = dbStr +" control="+controlFileName;
               cmdStr = cmdStr+" log="+logName;
               cmdStr = cmdStr+" data="+dataFilePath;
               cmdStr = cmdStr+" bad="+badName;
               cmdStr = cmdStr+" errors="+Utils.getPropertyString("sqlldr_allowed_error");

Process p = rt.exec( cmdStr );

        InputStream in = p.getInputStream();
        InputStreamReader isr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(isr);
        String line = null;

        while( (line = br.readLine()) != null ) {
            sb.append(line+"\n");
        }

        InputStream inE = p.getErrorStream();
        InputStreamReader iser = new InputStreamReader(inE);
        BufferedReader erbr = new BufferedReader(iser);

        while( (line = erbr.readLine()) != null ){
            sb.append( "\nError stream:" );
            sb.append(line);
        }

        try {

                eValue = p.waitFor();
                Utils.info_log.info("waitFor Value is :: "+eValue);

        } catch ( Exception e ) {
            Utils.info_log.info(Utils.dumpStackTrace(e).toString());
        } 
```

# java-me - 如何获取 GPS 发送的时间

> ID：13600984
> 
> 赞同：0
> 
> 时间：2012-11-28T08:41:10.813
> 
> 标签：java-me, gps

嗨，我正在开发 J2ME 应用程序，我很感兴趣是否可以获得 GPS 时间（时间由 GPS 卫星发送）？如何得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:50:36.700

[Location](http://www-users.cs.umn.edu/~czhou/docs/jsr179/lapi/)类有方法，`getTimestamp()`但我不确定它是否返回卫星定位时间。

[Location](http://www-users.cs.umn.edu/~czhou/docs/jsr179/lapi/)类有方法`getExtraInfo(String)`。如果您调用它，`application/X-jsr179-location-nmea`您将获得当前修复的[NMEA](http://www.gpsinformation.org/dale/nmea.htm)字符串。肯定有关于卫星定位时间的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:11:59.467

你不能使用返回坐标吗`javax.microedition.location.Coordinates`

然后，您可以在给定当前坐标的情况下计算出该时区的当前时间吗？

# javascript - 在一个页面上使用多个 Foundation 3 选项卡

> ID：13600987
> 
> 赞同：0
> 
> 时间：2012-11-28T08:41:27.193
> 
> 标签：javascript, jquery, backbone.js, zurb-foundation

我有一个我想要的例子：

[http://jsfiddle.net/challenge/m4BZt/](http://jsfiddle.net/challenger/m4BZt/)

我有这样一个模板（我正在使用`Backbone`库）：

```
<div class="four columns productView">
    <dl class="tabs">
        <dd class="active"><a href="#<%= Id %>-tab1">Purchase</a></dd>
        <dd class=""><a href="#<%= Id %>-tab2">Specification</a></dd>
    </dl>
    <ul class="tabs-content">
        <li class="active" id="<%= Id %>-tab1">
            <img src="http://placehold.it/400x300&amp;text=[img]">
            <h4><%= Title %></h4>
            <p>
                <a href="#" class="blue small nice button radius">Add to Cart »</a>
            </p>
        </li>
        <li id="<%= Id %>-tab2">
            <h4><%= Title %></h4>
            <p><%= Description %></p>
            <p>
                <a href="#" class="blue small nice button radius">Add to Cart »</a>
            </p>
        </li>
    </ul>
</div> 
```

但这打破了。`doesn't show me second tab content`尽管如此，它还是以某种方式`changes tab visually`将哈希符号和模型添加`Id with -tab[1|2] postfix`到`url bar`.

也许我错过了什么？我怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:06:39.277

我认为您的命名约定已关闭，选项卡和内容必须如下：

> 如果您需要功能选项卡，只需确保每个选项卡都链接到一个 ID，并且相应选项卡的 ID 为#tabnameTab。-[基金会文件](http://foundation.zurb.com/docs/tabs.php)

标签：`href="#ID"`

内容：`id="IDTab"`

试试下面的代码。

```
<div class="four columns productView">
    <dl class="tabs">
        <dd class="active"><a href="#<%= Id %>Buy">Purchase</a></dd>
        <dd class=""><a href="#<%= Id %>Spec">Specification</a></dd>
    </dl>
    <ul class="tabs-content">
        <li class="active" id="<%= Id %>BuyTab">
            <img src="http://placehold.it/400x300&amp;text=[img]">
            <h4><%= Title %></h4>
            <p>
                <a href="#" class="blue small nice button radius">Add to Cart »</a>
            </p>
        </li>
        <li id="<%= Id %>SpecTab">
            <h4><%= Title %></h4>
            <p><%= Description %></p>
            <p>
                <a href="#" class="blue small nice button radius">Add to Cart »</a>
            </p>
        </li>
    </ul>
</div> 
```

# python - python波浪号一元运算符作为否定numpy bool数组

> ID：13600988
> 
> 赞同：50
> 
> 时间：2012-11-28T08:41:29.690
> 
> 标签：python, numpy, boolean, multidimensional-array

应该是一个简单的问题，但我无法在任何地方找到答案。`~`python 中的运算符记录为按位反转运算符。美好的。不过，我注意到看似精神分裂的行为，也就是说：

```
~True -> -2
~1 -> -2
~False -> -1
~0 -> -1
~numpy.array([True,False],dtype=int) -> array([-2,-1])
~numpy.array([True,False],dtype=bool) -> array([False,True]) 
```

在前 4 个示例中，我可以看到 python 正在实现（如文档所示）`~x = -(x+1)`，输入被视为 int *，即使它是 boolean*。因此，对于标量布尔值，`~`不被视为逻辑否定。并不是说在使用 int 类型定义的布尔值的 numpy 数组上的行为是相同的。

那么为什么`~`在布尔数组上用作逻辑否定运算符（另请注意：`~numpy.isfinite(numpy.inf) -> True`？）？

`not()`我必须在标量上使用它是非常烦人的，但`not()`不能用于否定数组。然后对于一个数组，我必须使用`~`，但`~`不能否定一个标量......

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-28T09:59:32.340

`not`是通过`__nonzero__`特殊方法实现的，需要返回`True`or `False`，所以不能给出需要的结果。而是使用`~`运算符，它是通过`__not__`特殊方法实现的。出于同样的原因，`&`and`|`被用来代替`and`and `or`。

[PEP 335](http://www.python.org/dev/peps/pep-0335/)旨在允许布尔运算符的重载，但由于开销过大而被拒绝（例如，这会使`if`语句复杂化）。 [PEP 225](http://www.python.org/dev/peps/pep-0225/)建议了“元素级”运算符的通用语法，这将提供更通用的解决方案，但已被推迟。看来，目前的情况虽然尴尬，但不足以迫使改变。

`np.isfinite`在标量上调用时返回类型的值`np.bool_`，而不是`bool`。 `np.bool_`也是从 bool dtype 数组中提取标量值时获得的类型。如果您使用`np.True_`and`np.False_`代替`True`and`False`您将在`~`.

# c - 为什么负整数大于无符号整数？

> ID：13600991
> 
> 赞同：43
> 
> 时间：2012-11-28T08:41:44.770
> 
> 标签：c, int, unsigned, signed

```
int main(void) 
{ 
     unsigned int y = 10; 
     int x = – 4; 
     if (x > y) 
        Printf("x is greater");
     else 
        Printf("y is greater"); 
     getch(); 
     return (0); 
} 

Output: x is greater 
```

我认为输出会 y 更大，因为它是无符号的。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-28T08:58:07.743

因为`int`值被提升为`unsigned int`. 特别`0xFFFFFFFC`是在一个 32 位机器上，它作为一个`unsigned int`，`4294967292`比`10`

**C99 6.3.1.1-p2**

> 如果 int 可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为 int；否则，它将转换为**unsigned int**。这些被称为整数促销。整数提升不会改变所有其他类型。

要执行转换：

**C99 6.3.1.3-p2**

> 否则，如果新类型是无符号的，则通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。

这基本上意味着“添加 UINT_MAX+1”（无论如何，正如我所读的那样）。

关于为什么升职`unsigned int`偏袒；优先级：

**C99 6.3.1.8-p1**

> ...否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。
> 
> 否则，如果有符号整数类型的操作数的类型可以表示无符号整数类型的操作数的所有值，则将无符号整数类型的操作数转换为有符号整数类型的操作数的类型。

这告诉我`int`vs.`unsigned char`应该按预期工作。

**测试**

```
int main()
{
    int x = -4;
    unsigned int y = 10;
    unsigned char z = 10;

    if (x > y)
        printf("x>y\n");
    else
        printf("x<y\n");

    if (x > z)
        printf("x>z\n");
    else
        printf("x<z\n");
    return 0;
} 
```

**输出**

```
x>y
x<z 
```

看看那个。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-28T08:44:22.077

有符号和无符号值之间的比较将在“无符号空间”中进行。即，有符号值将通过添加转换为无符号值`UINT_MAX + 1`。在对负值使用 2-补码的实现中，不需要在后台对值进行特殊处理。

在这个例子中，`-4`变成了`0x100000000-4`=`0xFFFFFFFC`这显然是`> 10`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T08:47:06.200

当您在 C 中比较两个值时，它们都必须属于同一类型。在这种情况下 (`int`和`unsigned int`)，`int`值将被转换为`unsigned int`第一个。

其次，C 中的无符号整数运算是以该类型的最大值 + 1 为模完成的（也就是说，它“循环”，`UINT_MAX + 1`反之亦然`0`）。因此，将负值转换为无符号会导致非常大的数字。

标准中的相关部分说：

> **6.3.1.3 有符号和无符号整数**
> 
> 2
> 否则，如果新类型是无符号的，则在新类型可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-28T08:54:37.847

当您比较 an`int`和 an时`unsigned int`，`int`将转换为`unsigned int`. an`int`到 an的转换`unsigned int`是通过添加来完成的`UINT_MAX+1`（注意你`int`是负数）。所以实际上你在比较：

```
if (-3 + UINT_MAX > 10)  //Since -4 is converted to UINT_MAX+1-4 
```

这是真的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T08:47:36.593

int 值的第一位用于定义它是正数还是负数。（1 = 负数，0 正数）在比较之前，您的两个变量都被转换为 unsigned int，其中第一位中的 1 将被解释为您的数字的一部分。

这段代码应该可以正常工作：

```
int main(void) 

 { 

    unsigned int y = 10; 
    int x = – 4; 
    if (x > (int) y) 
    Printf("x is greater");
    else 
    Printf ("y is greater"); 
    getch ( ); 
    return (0); 

 } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-28T08:54:05.007

int x=-4（4 的 2 的补码是 1111 1100 =252）并且 unsigned int y=10 是（0000 1010 =10）所以 252 >10 所以 -4 大于 10。

# javascript - jQuery中动态生成元素内动态生成元素的事件绑定

> ID：13600994
> 
> 赞同：0
> 
> 时间：2012-11-28T08:42:00.200
> 
> 标签：javascript, jquery

我正在尝试在动态生成的 DOM 上使用“点击”。我知道我可以只使用 live 或 on，但是我的动态生成的内容在多个动态生成的内容中，并且 live/on 不再有效。

所以我的代码看起来像这样，但在 El_b 之前有更多元素：

```
El_a = document.createElement("li");
El_b = document.createElement("a");
El_b.id = "myEl";
El_a.appendChild(El_b); 
```

有没有办法使这项工作？

PS：我也试过 livequery jQuery 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:45:08.853

如果你想在 El_b 上的 click 事件上绑定一个函数，你可以这样做：

```
$(El_b).click(function() {
    // Your code here
}); 
```

但你可以使用`on`我认为。即使您创建了多个 DOM 元素。您可以使用`document`或`body`。例子 ：

```
$('body').on('click', 'li a.my_class', function() {
    // Your code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T08:44:13.027

就委托而言，您始终至少有一个可用的静态 DOM 元素，即`document`. 如果您找不到更接近的元素来委托，请委托给这个。

但是，这里似乎不需要委托。创建元素和附加监听器的整个过程可以浓缩为：

```
var a = $("<li/>").append($("<a/>").attr("id", "myElement")).click(function () {
    alert('hello');
}); 
```

如果，如您所说，您无法更改对象创建，您仍然可以通过其 ID 选择它并附加侦听器：

```
$('#myElement').click(function () {
    alert('hello');
}); 
```

此外，这些是*文档片段*，不是真正的文档，当然也不是 DOM。