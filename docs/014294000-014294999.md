# StackOverflow 问答 14294000-14294999

# mysql - 总结 MySQL 中的前 5 个值

> ID：14294003
> 
> 赞同：3
> 
> 时间：2013-01-12T13:56:48.093
> 
> 标签：mysql, select, group-by, sum, subquery

我有一个 MySQL 表，我在其中存储赛车锦标赛的结果，因此每一行都包含 - 在其他数据中 - 每个车手在某场比赛中的位置。我想得到某个驱动程序的前 5 名的总和（例如，如果驱动程序的最佳位置是 1、2、2、4、5，我希望 MySQL 返回 14）。我想要做的是：

```
SELECT driver, SUM(position)
FROM results
WHERE (race, season, position) IN
   (SELECT race, season, position
    FROM results
    WHERE driver = "Vettel"
    ORDER BY position ASC
    LIMIT 5) 
AND driver = "Vettel" 
```

当然，（种族、季节、位置）是“结果”表的主键。现在，问题是我不能真正让它工作，因为 MySQL 还不支持在内部子查询中使用 LIMIT。你会怎么做？

为了获得额外的积分 - 有没有办法通过一个查询来获得*每个*驱动程序的前 5 个结果的总和，而不是单个驱动程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:04:41.367

尝试这个：

```
SELECT driver, SUM(`position`)
FROM (SELECT driver, race, season, `position`, 
             IF(@lastDriver=(@lastDriver:=driver), @auto:=@auto+1, @auto:=1) indx 
      FROM results, (SELECT @lastDriver:=0, @auto:=1) A 
      ORDER BY driver, `position`) AS A  
WHERE indx <= 5 
GROUP BY driver ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T14:49:32.767

这是另一种方式...

```
SELECT a.season
     , a.driver
     , SUM(points) T5
  FROM
     ( SELECT x.season
            , x.driver
            , x.points
         FROM results x 
         JOIN results y 
           ON (y.season = x.season 
          AND y.driver = x.driver) 
          AND (y.position < x.position OR (y.position = x.position AND y.race < x.race))
        GROUP 
           BY x.season
            , x.driver
            , x.race
       HAVING COUNT(*) <=5
     ) a
 GROUP
    BY season
     , driver; 
```

# c++ - 如何告诉某些套接字从队列中获取数据？

> ID：14294007
> 
> 赞同：0
> 
> 时间：2013-01-12T13:57:24.127
> 
> 标签：c++, multithreading, qt, networking

我正在编写一个 C++/Qt 多线程服务器。由于它只是更大应用程序的一部分，因此我必须将收到的所有数据写入队列。比某人的另一部分处理此信息并给出响应，还将其放入队列中。
我想知道是否可以将此响应放在某个线程中的某个套接字，因为到目前为止我想出的唯一想法是发送一个信号，表明响应到达，它会唤醒所有线程并检查它是否是给他们的消息（通过检查套接字描述符）。

我的代码：
thread.h

```
#pragma once
#include "socket.hpp"
#include <QThread>

class Thread : public QThread
{
    Q_OBJECT
public:
    Thread(int socketId, QObject *parent = 0);
    void run();
signals:
    void error(QTcpSocket::SocketError socketerror);
private:
    int socketDescriptor;
}; 
```

线程.cpp

```
#include "thread.h"
#include <iostream>

Thread::Thread(int socketId, QObject *parent) :
    QThread(parent), socketDescriptor(socketId)
{
}

void Thread::run()
{
    Socket *tcpSocket = new Socket(socketDescriptor, this);
    connect(tcpSocket, SIGNAL(connectionClosed()), SLOT(quit()));
    exec();
} 
```

套接字.h

```
#pragma once

#include <QTcpSocket>
#include <boost/shared_ptr.hpp>

class Message;

class Socket : public QObject
{
    Q_OBJECT
public:
    Socket(int socketDescriptor, QObject* = 0);
    ~Socket();

    bool isActive();
    void emmiter();
signals:
    void connectionClosed();
private slots:
    void readClient();
    void discardClient();
public slots:
    void sendResponse(boost::shared_ptr<Message>);
private:
    void disconnect();
    quint16 nextBlockSize;
    QTcpSocket* socket;
}; 
```

套接字.cpp

```
void ClientSocket::sendResponse(boost::shared_ptr<Message> msg)
{
    if(this->socket->socketDescriptor() == msg->conn.socket)
    {
            //actuall sending is not important
    }
} 
```

上面的这个^是我知道的，但我知道这不好，特别是如果我有很多线程并且它们都检查socketDescriptor（）。此外，我必须从我的`Message`类中创建一个元对象，以便它可以在信号槽机制中使用。我想只向一个套接字发送信号。我该怎么做 ？将套接字对象放入线程中，并通过将 id 提供给线程来调用方法？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:01:04.663

> 我想知道是否可以将此响应放在某个线程中的某个套接字，因为到目前为止我想出的唯一想法是发送一个信号，表明响应到达，它会唤醒所有线程并检查它是否是给他们的消息（通过检查套接字描述符）。

No, that's not how you do it. A thread is like an employee. When you go to Burger King, you don't ask for Jane. If you see Jeff at the counter, you don't walk past him and go rummaging in the back for Jane to take your order. If she's busy with a customer, but Jeff is available, you don't wait for Jane. You let the first cashier who is available take your order.

When you receive data on a socket, have a thread, any thread, process that information. It doesn't matter which. You don't need to force some one particular thread to do it.

Think about threads as little as possible. They're just the vehicles that do the work. You should focus on what work you want done and the code to do it. If you have to think about the mechanics of assigning the work to workers excessively, you are doing something wrong.

If you have have cashiers (who can't cook) and cooks (who can't take orders), you'll always have to look around for the right employee to get the job done. But all threads are fundamentally equal, and equally capable of doing any job, so you only have this nightmare if you force yourself into it.

# php - 如果会话仍未被破坏，则从索引页面重定向用户

> ID：14294017
> 
> 赞同：0
> 
> 时间：2013-01-12T13:59:02.877
> 
> 标签：php

如果他打开一个新标签然后将我的页面的 index.php 输入到他的用户页面，如何重定向用户？我将在我的 index.php 中放入什么来执行此操作？我是 PHP 新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T14:03:28.857

像这样的东西：

```
session_start();
if (isset($_SESSION['user'])) {
    header('Location: user_page.php');
} 
```

确保您的 index.php 中没有任何 html 代码或高于此的间距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:03:40.147

我觉得这个问题在stackoverflow上已经得到了很多回答。

```
header("Location:filename")
exit(); 
```

# svg - 如何使用 SVG 蒙版制作 Luma 蒙版？

> ID：14294020
> 
> 赞同：1
> 
> 时间：2013-01-12T13:59:15.883
> 
> 标签：svg, alpha, mask, blend, compositing

我想在 SVG 中制作一个 Luma-Mask (Matte)。换句话说，我想将一个图层蒙版到不同图层的亮度通道（从 RGB 通道获取）。

如何才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:32:04.650

[Luminance masks](http://www.w3.org/TR/SVG2/masking.html#mask-property) are a new feature of the as yet unfinished SVG 2 specification. They have been implemented in [nightly Firefox](https://bugzilla.mozilla.org/show_bug.cgi?id=793617) and [Webkit](https://bugs.webkit.org/show_bug.cgi?id=97011). If you are using a [Nightly](http://nightly.mozilla.org/) or [Aurora Firefox](http://www.mozilla.org/en-US/firefox/aurora/) make sure layout.css.masking.enabled is set to true in about:config

# android - 在不同活动之间共享 ActionBar

> ID：14294021
> 
> 赞同：1
> 
> 时间：2013-01-12T13:59:20.987
> 
> 标签：android, android-fragments, android-actionbar

我有一个带有被`FragmentActivity`调用的应用程序，`MainActivity`它包含两个片段，一个左侧的菜单片段和一个右侧的内容片段。在大型设备上显示了这两个片段。在小型设备上，仅显示菜单片段，当用户按下所述菜单中的项目时，内容片段以新的`Activity`.

假设用户当前正在他的手机上使用该应用程序，并且只有菜单可见：

可以通过菜单中的用户选择来`ActionBar`操作。`MainActivity`当用户选择特定菜单项时，`Activity`会启动一个新菜单项以显示内容片段。当这个`Activity`弹出时`ActionBar`，这个新`Activity`的是一个新的`ActionBar`，因此与`ActionBar`( `FragmentActivity`)`MainActivity`不同。

我想我可以将`ActionBar`from传递`MainActivity`给`Activity`通过`Intent`extras 显示内容片段，或者制作`ActionBar`静态并像`MainActivity.actionBar`或类似的方式引用它，但我很快就遇到了问题:)

关于如何解决这个问题的任何建议？基本上，我想要的是在我的所有活动之间共享一个`ActionBar`参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:27:45.967

也许使用片段而不是活动会更好。我的意思是展示`menu fragment`，当你需要展示时，`content fragment`只需将`content fragment`其放入原处（容器）`menu fragment`。我认为组织片段替换/更改逻辑比尝试在不同活动之间共享操作栏更好/更容易。

# c# - #Eval 短日期

> ID：14294022
> 
> 赞同：23
> 
> 时间：2013-01-12T13:59:22.170
> 
> 标签：c#, asp.net, eval

我正在尝试将日期从和日期添加到我的产品中，这些值作为日期存储在我的数据库中。这些以这种格式存储`2013-01-15`。格式不是问题，但是当我在我的应用程序上显示它们时，会出现时间 ( `1/15/2013 12:00:00 AM`) 请问如何删除时间。您可以在下面找到方法 Im 数据绑定数据。

```
<asp:Label ID="Label4" runat="server" Text='<% # Eval("soDateTo") %>' Font-Bold="False" Font-Size="Small"></asp:Label> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-12T14:08:05.727

在 Eval 语句中尝试字符串格式化： [参见 ASP 论坛](http://forums.asp.net/t/1231290.aspx/1)

有几种方法可以格式化日期。

```
<asp:label id="DateAddedLabel" runat="server" text='<%#
Eval("DateAdded", "{0:d}") %>'></asp:label> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-12T14:08:43.073

尝试这个;

```
<asp:Label ID="Label4" runat="server" Text='<% # Eval("soDateTo", "{0:dd/MM/yyyy}") %>' Font-Bold="False" Font-Size="Small"></asp:Label> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-09T21:11:16.283

与 Daniel 的解决方案非常相似，但它处理 null：

```
<asp:label id="DateAddedLabel" runat="server" text=
    '<%# (String.IsNullOrEmpty(Eval("DateAdded").ToString())) 
    ? "No Date Available" : Eval("DateAdded", "{0:d}") %>'>
</asp:label> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-21T23:34:25.273

这已经得到了很好的回答，但我过去使用的`Label`s 比必要的要多得多，并认为我会提供一种没有的方法。

您可以忽略`Label`所有这些并将*Eval(...)*方法单独放置。

例如，如果您在`TemplateField`

```
<asp:TemplateField HeaderText="Date To">
    <ItemTemplate>
        <%# Eval("soDateTo", "{0:MM/dd/yyyy}") %>
    </ItemTemplate>
</asp:TemplateField> 
```

您可以使用它来稍微改进您的 CSS 控件，例如

```
<div id="client_since">
    <%# Eval("soDateTo", "{0:MM/dd/yyyy}") %>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T14:14:17.660

尝试这个：

```
> <asp:Label ID="Label4" runat="server" Text='<% # Eval("soDateTo", "{0:d}") %>'
> Font-Bold="False" Font-Size="Small"></asp:Label> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T14:06:18.497

使用`DateTime.ToShortDateString`Method 去掉日期的时间部分：

[http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-03T09:19:24.253

尝试这个;

```
<asp:Label ID="lbldate" runat="server" Text='<%# (Convert.ToDateTime(Eval("soDateTo"))).ToShortDateString()  %>'></asp:Label> 
```

# cakephp - CakePHP 权限：ACL 是否矫枉过正

> ID：14294025
> 
> 赞同：2
> 
> 时间：2013-01-12T13:59:47.427
> 
> 标签：cakephp, cakephp-2.2, cakephp-acl

我有两个主要的表：

1.  书籍（id，作者，isbn，...）
2.  用户（ID，用户名，密码，...）

我正在考虑构建一个应用程序，其中 User1 登录并可以：

1.  查看所有书籍的列表（例如，只有标题）
2.  仅查看他应该有权访问的某些书籍的详细信息（作者、isbn、...）

每个用户都可以访问特定的书籍集。我不需要各种角色。

我已经为上述设置了 MVC 和关系（habtm）。我现在正在考虑开发权限。您认为 CakePHP ACL 解决了这个问题还是有点矫枉过正？

如果它是矫枉过正，是否有另一种组件或更简单的方法来构建所需的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:39:31.147

## 是的，ACL 是多余的

ACL 是一个非常强大和灵活的系统——但它不是免费的，它带来了复杂性。除非您有一个绝对需要细粒度权限的用例（您描述的两个规则不适合此） - 不要使用 ACL。

## 限制预订他添加的用户

这条规则很容易实现——例如添加到相关的查找调用中：

```
$results = $BookModelInstance->find('all', array(
    'conditions' => array(
        'created_by' => AuthComponent::user('id')
    )
)); 
```

## 限制他购买的用户的书籍

这条规则[也很容易实现，](http://mark-story.com/posts/view/using-bindmodel-to-get-to-deep-relations)稍微复杂一点：

```
$BookModelInstance->bindModel(array(
    'hasOne' => array( // Yes, hasOne not hasMany
        'MyPurchase' => array(
            'className' => 'Purchase',
            'foriegnKey' => 'user_id'
        ) 
    )
));
$results = $BookModelInstance->find('all', array(
    'recursive' => 0, // to join hasOne+belongsTo associations into the query
    'conditions' => array(
        'MyPurchase.user_id' = AuthComponent::user('id'),
    )
)); 
```

bindModel 调用等效于`SELECT .. FROM books LEFT JOIN book_users`.. find 调用中的条件将因此将结果限制为有用户购买图书记录的图书。

## 把它们放在一起

自动应用这两个规则的简单实现是：

```
model Book extends AppModel {

    public $actsAs = array('Containable');

    public $restrictToUser = true;

    public function beforeSave($options = array()) {
        if (!$this->id) {
           // Store who created this book
           $this->data[$this->alias]['created_by'] = AuthComponent::user('id');
        }
        return true;
    }

    public function beforeFind($queryData) {
        if (!$this->restrictToUser) {
            // we don't want to apply user-level restrictions
            return true;
        }

        $userId = AuthComponent::user('id');
        if (!$userId) {
            // we want to restrict to the current user - there isn't one.
            return false;
        }

        // define the association to the purchase table
        $this->bindModel(array(
            'hasOne' => array(
                'MyPurchase' => array(
                    'className' => 'Purchase',
                    'foriegnKey' => 'user_id'
                ) 
            )
        ));

        //ensure the purchase table is included in the current query
        $queryData['contain']['MyPurchase'] = array();

        // restrict to rows created by the current user, OR purchased by the current user
        $queryData['conditions']['OR'] = array(
            $this->alias '.created_by' => $userId,
            'MyPurchase.user_id' => $userId
        );
        return $queryData;
    }
} 
```

这需要在 books 表中存在一个字段`created_by`（或等效字段），并使用可包含来确保该`purchases`表（或等效字段）包含在所有相关查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:12:26.230

最简单的解决方案：在控制器中添加一个条件，因此：

```
$this->set('books', $this->Book->find(
    'all',
    array('conditions' => array('Book.user_id' => $user['User']['id']))
); 
```

缺点：您可能会在这里创建重复的代码，因为此检查也必须在其他地方进行。此外，当您开始测试模型时，您只能测试它是否返回书籍，而不能测试模型方法，例如：getMyBooks($userId)。所以不，不是首选解决方案。

**下一个解决方案：签入模型**

它可以通过签入来完成，例如您的书籍模型。您可以只检查 afterfind() 方法是否允许返回的记录。在您的之前查找中，您还可以为所有查询添加附加条件。

一般来说，模型应该是胖的，所以我建议在那里实现明确的方法，例如：getAllBooks、getBooksOfUser($User)、getLatestBooksOfUser($User) 等。

为什么这是一个很好的实现？因为您现在在一个中心位置管理访问级别。您可以测试该模型，并确定它只返回该用户的书籍。

使用 beforeSave 等，您可以干预每次保存尝试并首先检查：嘿，您想保存它，但这真的是**您的**书吗？

**ACL 解决方案**

但总的来说，实施一些 ACL 解决方案（最好是内置的）可能是明智的，因为这可以让您的应用程序更加面向未来。它允许灵活性，例如：

> 每个用户都可以访问特定的书籍集。我不需要各种角色。

现在是这样，但未来可以改变它。因此，如果您需要快速解决方案，只需自定义过滤记录。但是想想未来。

# llvm - 从 .ll 文件生成可执行文件

> ID：14294026
> 
> 赞同：2
> 
> 时间：2013-01-12T13:59:51.823
> 
> 标签：llvm

`LLVM`我正在用java写一个前端。我的前端生成`.ll`文件。然后我使用以下命令将这些文件转换为可执行文件：

```
1\. for each .ll file I use `'llvm-as file.ll'` to create  a bitcode file
2\. use `'llvm-ld -o executable my-bitcode-files -L/usr/lib/i386-linux-gnu -lstdc++'` to 
```

生成可执行文件。

然后，当我运行可执行文件时，出现以下错误：

```
LLVM ERROR: Program used external function '_Znwm' which could not be resolved! 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:45:44.443

您需要生成本机可执行文件，而不是 IR + 包装器。尝试将 -native 添加到 llvm-ld cmdline。

# android - 为什么公共静态方法，DragEvent.obtain() 不可访问

> ID：14294029
> 
> 赞同：0
> 
> 时间：2013-01-12T14:00:48.963
> 
> 标签：android, drag-and-drop, static-methods

谁能解释为什么我无法访问 DragEvent.obtain() 方法。

根据 grepcode DragEvent 代码，方法被声明为公共静态。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/view/DragEvent.java#DragEvent.obtain%28android.view.DragEvent% 29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/view/DragEvent.java#DragEvent.obtain%28android.view.DragEvent%29)

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:09:43.130

首先，它不在`public` [当前版本的源代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/view/DragEvent.java)中。

其次，我认为您在 GrepCode 条目中看到的“隐藏：”指的是`@hide`注解，Android 在从源代码创建 SDK 时会使用该注解。标有 的类和方法`@hide`不属于公共 SDK。

# javascript - 使用 Object.create(null) 创建空对象的影响和好处

> ID：14294030
> 
> 赞同：8
> 
> 时间：2013-01-12T14:00:49.547
> 
> 标签：javascript, performance, object, jsperf

首先，我做了一个快速的 jsperf 测试用例，以显示明显的 :比使用语法
`Object.create(null)`创建对象要慢得多。[http://jsperf.com/js-object-creation-null-proto](http://jsperf.com/js-object-creation-null-proto)`{}`

但鉴于这一事实，前一种情况有时是否可以成为优化和性能方面的一个很好的选择？换句话说，操作最轻量级的 js 对象是否可以足够提高性能，以至于在某些情况下使用它成为一个合理的选择。

我指的是您将大量访问对象属性或大量使用 for in 循环的情况。

这种方法在库中使用是否风险太大，人们可能会被引导处理这些不拥有标准`Object`原型带来的标准属性的对象？

另外，您知道创建最轻量级 js 对象的另一种（更快）方法吗？

PS：我做了一个简短的测试案例来展示使用 a`Object.create(null)`和访问属性比 with 快一点的案例`{}`。
[http://jsperf.com/js-object-creation-and-accessing-properties](http://jsperf.com/js-object-creation-and-accessing-properties)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-18T20:04:43.660

我认为创建`Object.create(null)`通常不必要且不值得您牺牲浏览器兼容性和清晰度的对象。当您使用`{}`您本质上正在执行的语法创建`Object.create(Object.prototype)`一个对象时，它会创建一个可以访问`Object.prototype`. 这意味着您可以直接从对象访问方法`toString`，`hasOwnProperty`但也可以根据需要覆盖它们 - 尽管您应该尽可能避免这种情况。至于性能，差异*非常*小，对象只有两个属性（如 jsperf 所示）。如果您的对象有数百或数千个属性，则几乎不存在差异。

总之，如果你不想让你的代码表现得更好，你应该总是力求清晰，并尝试改进代码的高级算法设计（不是你还没有）；并且仅在绝对必要时才担心微优化。

# javascript - 对象方法传递对象方法的语法是什么？

> ID：14294031
> 
> 赞同：0
> 
> 时间：2013-01-12T14:01:03.230
> 
> 标签：javascript

使用 KineticJS，我想出了如何将函数作为 Gameboard 函数传递，但是 Gameboard 函数中的所有这些都认为现在是获得该函数的对象:(。

```
function Gameboard(){
//.... creates placeholders for stage layers and all objects
this.dice_layer=new Kinetic.Layer();

this.rolldice=function(){
     alert(this.toString());
     //..alter images
     this.dice_layer.draw();//<~~ thinks this is circle once passed through setUpGameBoard says dice_layer is undefined.  alert(this.toString()); shows this to be circle.
};

this.setUpGameBoard=function(){
   // ...draws board pawns creates a circle object
   var obj=this;//<~~ are there memory issues with this?  Is there a better way?
    circle.on("click",**obj**.rolldice.**bind**(obj);//** == ANSWER!!!!

 }; 
```

};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:09:07.660

问题是这一行：

```
 this.doSomething=function(fnction){ 
```

您声明`doSomething`为具有单个参数的函数，`fnction`但是当您调用它时，您传递了两个 - 一个字符串和一个函数。

```
 this.doSomething=function(str, fnction){ 
```

将按照您的预期行事。

[jsFiddle 演示](http://jsfiddle.net/BH2QJ/)

* * *

根据您对第二个问题的“解决方案”，您似乎想使用 ES5 的[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind). 它允许您`this`为特定的函数调用指定方法，因为 JavaScript 确实没有“方法”，您必须指定它们操作的对象。

```
 this.barfoo.doSomething(this.doBar.bind(this)); 
```

[可以将故障](http://jsfiddle.net/BH2QJ/3/)代码的示例[与使用 bind 的修复](http://jsfiddle.net/BH2QJ/2/)进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:41:13.127

可能您的简化并没有显示出真正的问题。我想像下面这样的东西会更类似于你的问题：

```
function foo(){
    this.doSomething = function(fnction){
        fnction();
   };
}

function bar(){
    this.myField = "Buzz"
    this.barfoo = new foo();
    this.doBar = function(){
        alert(this.myField);
    };
    this.barfoo.doSomething(this.doBar); // tried this
    //this.barfoo.doSomething(this.doBar());  also tried this  
    //this.barfoo.doSomething(bar.doBar);  also tried this  
    //this.barfoo.doSomething(bar.doBar());  also tried this  
} 
```

您可以在哪里注意到访问`this`相关属性的问题。

如果这确实是问题所在，那么您应该能够通过使用`call`or`apply`的方法来解决它：`foo``doSomething`

```
function foo() {
  this.doSomething = function (obj, fn) {
    fn.call(obj);
  };
} 
```

这就是你将如何使用它`bar`：

```
function bar() {
  this.myField = "Buzz";
  this.barfoo = new foo();
  this.doBar = function () {
    alert(this.myField);
  };
  this.barfoo.doSomething(this, this.doBar);
}

var myBar = new bar(); 
```

检查[jsFiddle](http://jsfiddle.net/8wNBb/1/)。

# javascript - 像框架一样的停靠页脚？

> ID：14294035
> 
> 赞同：1
> 
> 时间：2013-01-12T14:01:14.200
> 
> 标签：javascript, html, frames, audio-player

我正在设计一个乐队网站，而 Reverbnation 在页脚中有一个很酷的音乐播放器，它可以让音乐在更改页面时继续播放。

我查看了代码，但看不到任何使用框架的证据。这是我知道实现这样的目标的唯一方法。但是 HTML5 不再支持这种方式，对于 SEO 来说也是废话。

播放器的源代码中有一些 JavaScript，但我不知道足够的 JavaScript 来判断它是否负责。像这样的东西对我正在构建的网站非常有用。

我会尝试谷歌搜索，但我不知道我会用什么关键字来寻找关于这个主题的方法。

由于代码很长，如果有人愿意看一下，我将其剪切并粘贴在这里。

这是我的代码：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.6.3/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.6.3/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
  jQuery(function($) {

    if (!$("body").hasClass("new_sofia_navigation")) {
      $("body").addClass("new_sofia_navigation")
    }

    var $search_el = $('#sofia_header_search input[type=text]')
    $search_el.quickSearch({
      search_path: 'http://search.reverbnation.com/search/quick.json',
      use_jsonp: true
    });

    $("#sofia_header_search").submit(function(e) {
      var $form = $(this);
      e.preventDefault();
      Reverb.Navigate.go_to_page_url($form.attr('action') + '?' + $form.serialize());
    });

    var repositionSearchContainer = function() {
      $("#global_menu_search").find(".expanded_content").alignTo($("#global_menu_search"), "br-tr")
    }

    $("#menu_notifications, #global_menu_search, #menu_user_actions").bind("expand", function() {
      var $menu = $(this).find(".expanded_content"),
        $align_target = $("#global_menu_search"),
        align_offset = {
          top: 0,
          left: 0
        }
      if ($menu.hasAttr("data-align-target")) {
        $align_target = $("#" + $menu.attr("data-align-target"))
      }
      if ($menu.hasAttr("data-align-offset")) {
        var offsets = $menu.attr("data-align-offset").split(":")
        align_offset.left = parseInt(offsets[0]) || 0
        align_offset.top = parseInt(offsets[1]) || 0
      }
      $(this).find(".expanded_content").alignTo($align_target, "br-tr", align_offset)
    })

    $search_el.bind("quicksearch_disable", repositionSearchContainer).bind("quicksearch_enable", repositionSearchContainer)
    $("#menu_notifications:not(.no_notices)").bind("expand", function() {
      $.get("/page_object/reset_new_notice_count/artist_332065")
      $(this).addClass("no_notices")
    })

    $(window).trigger('user:login', {
      "type": "Artist",
      "feat_ownapp_apple": "0",
      "artist_bes": 5722,
      "feat_rpk": "P",
      "feat_fr_rap": "P",
      "feat_ownapp_push": "0",
      "feat_mega": "0",
      "feat_distro": "0",
      "feat_ownapp": "0",
      "feat_distro_p": "0",
      "feat_distro_e": "0",
      "is_admin": false,
      "feat_widg": "0",
      "feat_mega_max": "0",
      "artist_country": "UK",
      "genre": "Metal",
      "feat_fr": "P",
      "feat_bundle": "0",
      "feat_ownapp_droid": "0",
      "artist_bought": true,
      "control_room": "sofia",
      "name": "Soul Sanctuary",
      "id": 332065,
      "feat_sb": "0",
      "feat_fr_360": "0",
      "current_layout": "v3"
    });

  });
</script>

</div>

</div>

<script type="text/javascript">
  jQuery(function($) {
    Reverb.Notification.init('#standard_flash_message');
  });
</script>

</div>
<div id="docked_footer">
  <style type="text/css">
    #sm2-container {
      position: absolute;
      width: 1px;
      height: 1px;
      top: 0;
      left: 0;
      overflow: hidden;
    }
  </style>

  <div id="loading_gif">
    <img alt="16x16_black" src="http://gp1.wac.edgecastcdn.net/802892/production_static/images/spinners/16x16_black.gif?1357641892" />
    <span>Loading...</span>
  </div>

  <textarea id="template" style="display:none">
  <div class="player_queue_item" >
    <a href="javascript:trackEvent('V3 Footer Data','Click','Toggle Item');" class="toggle"></a>
    <a href="javascript:trackEvent('V3 Footer Data','Click','Remove Item');" class="remove" data-command="remove_song"></a>
    <a href="javascript:trackEvent('V3 Footer Data','Click','Play Item ');" class="play_state" data-command="play" ></a>
    <div class="content_wrap">
      <div class="content">
        <a href='{link}'><img src='{image}' /></a>
        <h3 title="{title}">{title_display}</h3>
        <a href='{link}'><h4 title="{artist}">{artist_display}</h4></a>
      </div>
    </div>
    <div class="actions" style="text-align:center">
      <a href="javascript:trackEvent('V3 Footer Data','Click','Download Button');" class="first" data-command="download">Download</a>
      <a href="javascript:trackEvent('V3 Footer Data','Click','Share Button');" data-command="share">Share</a>
      <a href="javascript:trackEvent('V3 Footer Data','Click','Favorite Button');" data-command="favorite">Favorite</a>
      <a href="javascript:trackEvent('V3 Footer Data','Click','Lyrics Button');" data-command="lyrics">Lyrics</a>
      <a href="javascript:trackEvent('V3 Footer Data','Click','Become Fan Button');" data-command="fan" class="last">Be a fan</a>
    </div>
  </div>
</textarea>

  <div id="sm2-container"></div>

  <div class="footer_content clearfix">
    <div class="footer_music_player" id="music_player">

      <div class="player_queue collapsed" id="player_queue">
        <div class="player_queue_content">
          <div class="player_queue_header">
            <a href="javascript:trackEvent('V3 Footer Data','Click','Collapse Queue');" data-command="toggle" class="collapse"></a>
          </div>

          <div class="player_queue_items card" data-card="queue_items">
            <div class="card_actions clearfix">
              <span data-role="title"></span>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Clear Queue');" data-command="clear_playlist" class="playlist_action">Clear</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Share All');" data-command="share_playlist" class="playlist_action">Share All</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Show Channels');" data-command="show_discover" class="playlist_action">Channels</a>
            </div>
            <div class="player_queue_list"></div>
          </div>

          <div class=" card" data-card="queue_discover">
            <div class="card_actions">
              <a href="javascript:trackEvent('V3 Footer Data','Click','Show Queue');" data-command="show_playlist" class="discovery_action">Show Queue</a>
            </div>
            <div class="player_queue_discover">
              <h1>ReverbNation Channels</h1>
              <h3>Select a Music Channel to Get Started</h3>

              <a href="javascript:trackEvent('V3 Footer Data','Click','Global Chart Toppers');" data-command="discover_global">Global Chart Toppers</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Local Chart Toppers');" data-command="discover_local">Local Chart Toppers</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Trending Artists');" data-command="discover_trending">Trending Artists</a>

              <a href="javascript:trackEvent('V3 Footer Data','Click','Alt/Rock/Indie');" data-command="discover_alt_rock_indie">Alt/Rock/Indie</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Electro/Pop/Dance');" data-command="discover_electro_pop_dance">Electro/Pop/Dance</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','HipHop/Rap/RB');" data-command="discover_hiphop_rap_rbsoul">HipHop/Rap/R&amp;B</a>

              <a href="javascript:trackEvent('V3 Footer Data','Click','Featured Artists');" data-command="discover_featured">Featured Artists</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','My Favorites');" data-command="discover_my_favorites">My Favorites</a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Custom Channel');" data-command="discover_custom_channel">Custom Channel</a>
            </div>
          </div>

          <div class="player_queue_custom_channel card" data-card="queue_custom_channel">
            <div class="card_actions">
              <a href="javascript:trackEvent('V3 Footer Data','Click','Show Queue');" data-command="show_playlist" class="discovery_action">Show Queue</a>
            </div>
            <form action="/c/audio_player/music_now" id="custom_channel_form" method="post" onsubmit="new Ajax.Request('/c/audio_player/music_now', {asynchronous:true, evalScripts:true, parameters:Form.serialize(this)}); return false;"> <label for="reverb_radio_genres_player_select">Select Genres:</label>
              <input id="reverb_radio_channel" name="reverb_radio[channel]" type="hidden" value="reverb_picks" />
              <select data-placeholder="Click to select genre(s)" id="reverb_radio_genres_player_select" multiple="multiple" name="reverb_radio[genres][]">
                <option value="alternative">Alternative</option>
                <option value="ambient">Ambient</option>
                <option value="americana">Americana</option>
                <option value="bluegrass">Bluegrass</option>
                <option value="blues">Blues</option>
                <option value="bollywoodtollywood">Bollywood/Tollywood</option>
                <option value="celtic">Celtic</option>
                <option value="childrens">Childrens</option>
                <option value="christianrock">Christian Rock</option>
                <option value="christiangospel">Christian/Gospel</option>
                <option value="classical">Classical</option>
                <option value="comedy">Comedy</option>
                <option value="country">Country</option>
                <option value="dj">DJ</option>
                <option value="dance">Dance</option>
                <option value="dubstep">Dubstep</option>
                <option value="electronicdancemusic">Electronic Dance Music</option>
                <option value="electronica">Electronica</option>
                <option value="experimental">Experimental</option>
                <option value="folk">Folk</option>
                <option value="funk">Funk</option>
                <option value="hiphop">Hip Hop</option>
                <option value="holiday">Holiday</option>
                <option value="house">House</option>
                <option value="indie">Indie</option>
                <option value="instrumental">Instrumental</option>
                <option value="jam">Jam</option>
                <option value="jazz">Jazz</option>
                <option value="latin">Latin</option>
                <option value="metal">Metal</option>
                <option value="other">Other</option>
                <option value="pop">Pop</option>
                <option value="punk">Punk</option>
                <option value="rbsoul">R&amp;B/Soul</option>
                <option value="rap">Rap</option>
                <option value="reggae">Reggae</option>
                <option value="rock">Rock</option>
                <option value="rockabilly">Rockabilly</option>
                <option value="singersongwriter">Singer Songwriter</option>
                <option value="ska">Ska</option>
                <option value="spiritual">Spiritual</option>
                <option value="spokenword">Spoken Word</option>
                <option value="world">World</option>
              </select>
              <input class="standard_button style_primary size_small" name="commit" type="submit" value="Ok" />
              <a href="javascript:;" data-command="back">Cancel</a>
            </form>
          </div>

        </div>
      </div>

      <div class="player_about" id="player_about">

        <a href="javascript:trackEvent('V3 Footer Data','Click','Toggle Playlist');" class="toggle_playlist" data-command="toggle_playlist" data-qtip="Toggle Playlist"></a>

        <div class="cards">
          <div class="song_info card" data-card="song_info">

            <div class="song_actions clearfix">
              <a href="javascript:trackEvent('V3 Footer Data','Click','Share');" class="share" data-command="share" data-qtip="Share"></a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Download');" data-command="download" data-qtip="Download" class="download"></a>
              <a href="javascript:trackEvent('V3 Footer Data','Click','Favorite');" class="thumb" data-command="recommend" data-qtip="Favorite"></a>
            </div>
            <a href="#" data-role="link"><img data-role="image" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /></a>
            <h3 data-role="title"></h3>
            <a href="#" data-role="link">
              <h4 data-role="artist"></h4>
            </a>
            <div class="progress_slider_wrap">
              <div class="player_slider progress_slider">
                <div class="progress">
                  <div class="progress_thumb small"></div>
                </div>
                <div class="time_progress extra_ui" style="word-break: normal !important;">12:123</div>
              </div>
            </div>
          </div>

          <div class="discover_music card" data-card="discover_music">
            <p>Not listening to anything?</p>
            <p>Try one of the <a href="javascript:trackEvent('V3 Footer Data','Click','Discover');" data-command="discover">ReverbNation Channels</a></p>
          </div>

          <div class="feedback card active" data-card="feedback">
          </div>
        </div>

      </div>

      <div class="player_song_control" id="player_control">
        <div class="buttons">
          <a href="javascript:trackEvent('V3 Footer Data','Click','Prev');" class="btn_prev" data-command="prev"></a>
          <a href="javascript:trackEvent('V3 Footer Data','Click','Play');" class="btn_play" data-command="play"></a>
          <a href="javascript:trackEvent('V3 Footer Data','Click','Pause');" class="btn_pause" data-command="pause" style="display:none;"></a>
          <a href="javascript:trackEvent('V3 Footer Data','Click','Next');" class="btn_next" data-command="next"></a>
        </div>
        <div class="player_slider volume_slider">
          <a href="javascript:trackEvent('V3 Footer Data','Click','Mute');" data-command="mute" class="volume_btn extra_ui"></a>
          <div class="progress">
            <div class="progress_thumb big"></div>
          </div>
        </div>
      </div>

    </div>

    <div class="footer_content_right" id="docked_footer_content_right">
      <div id="rabbit_hole_controls" class="footer_content_right_profile rabbit_hole_enabled">
        <center>
          <a href="#" id="rabbit-hole-wat">Wat</a>
          <a href="#" class="rabbit-hole-button" id="engage_rabbit_hole">Rabbit Hole</a>
          <a href="#" class="rabbit-hole-button" id="go_deeper">Go deeper</a> <br/>
          <a href="#" id="what_is_rabbit_hole">What's This?</a>
        </center>
      </div>
      <div id="rabbit_hole_tooltip" style="display: none"></div>

      <script language="Javascript">
        Reverb.playerReady(function() {
          var $tooltip = $j('#rabbit_hole_tooltip'),
            timeout_id;

          $tooltip.bind('display-tooltip', function(e, message) {
            $tooltip.html(message);

            $tooltip.trigger('tooltip-show');
            clearTimeout(timeout_id);

            timeout_id = setTimeout(function() {
              $tooltip.trigger('tooltip-hide');
            }, 10000)
          });

          $tooltip.bind('tooltip-show', function(e) {
            $tooltip.stop(true, true, true).
            animate({
              bottom: "-=10",
              opacity: 'show'
            });
          });

          $tooltip.bind('tooltip-hide', function(e) {
            $tooltip.stop(true, true, true).
            animate({
              bottom: "+=10",
              opacity: 'hide'
            });
          });

          $tooltip.click(function(e) {
            var info = MusicPlayer.getInstance().getCurrentSong()
            if (info && info.link) {
              Reverb.Navigate.go_to_page_url(info.link)
            }
            $tooltip.trigger('tooltip-hide');
          })

          $j('#rabbit-hole-wat').hover(function(e) {
            if ($tooltip.html() != "") {
              $tooltip.trigger('tooltip-show');
            }
          }, function(e) {
            $tooltip.trigger('tooltip-hide');
          });

          function recommendationTextFor(hash, current_song) {
            var reason = "Playing <em>" + current_song.artist + "</em> because";
            switch (hash.type) {
              case 'direct':
                reason += " they were recommended by <em>" + $j.escapeHTML(hash.name) + "</em>";
                break;

              case 'show_bill':
                reason += " they played a show with <em>" + $j.escapeHTML(hash.name) + "</em>" +
                  " on " + $j.escapeHTML(hash.latest_show_date) + ' in ' + $j.escapeHTML(hash.latest_show_location);
                break;

              case 'featured_artist':
                reason += " they're a featured artist";
                break;

              default:
                reason += " it's awesome";
                break;
            }

            if (hash.reason != null) {
              return $j.escapeHTML(hash.reason) + ". " + reason;
            } else {
              return reason;
            }
          }

          MusicPlayer.getInstance().bind('playlist_updated', function(e, player) {
            if ($j('#rabbit_hole_controls').hasClass('rabbit_hole_enabled')) {
              $j('#music_player .player_queue_item:last').addClass('in_rabbit_hole');
            }
          });

          MusicPlayer.getInstance().bind('song_play', function(e, player) {
            var current_song = player && player.getCurrentSong();
            if (current_song == null) {
              // Hopefully means we got the thing cleared
              $j('#rabbit_hole_controls').removeClass('rabbit_hole_enabled');
              $j('#rabbit_hole_tooltip').html('');
              Reverb.RabbitHoleCache = {};
              return;
            }
            if (Reverb.RabbitHoleCache[parseInt(current_song.id, 10)] != null) {
              $tooltip.trigger('display-tooltip', recommendationTextFor(Reverb.RabbitHoleCache[parseInt(current_song.id, 10)], current_song))
            }
          });
        })

        $j(function($) {

          var goToCurrentArtist = function() {
            // wee need a little delay to be sure the playlist is actually loaded before making any redirect
            // not the ideal solution, but it doesn't require a beautiful reaper
            window.setTimeout(function() {
              var info = MusicPlayer.getInstance().getCurrentSong()
              if (info && info.link) {
                Reverb.Navigate.go_to_page_url(info.link)
              }
            })

          }

          $('#engage_rabbit_hole').click(function(e) {
            var current_po;
            if ((CURRENT_PAGE_OBJECT || '').match(/artist_/)) {
              current_po = CURRENT_PAGE_OBJECT;
            } else {
              current_po = ''
            }

            trackEvent('V3 Footer Data', 'Click', 'Rabbit Hole');

            $.ajax('/c/audio_player/rabbit_hole_now/' + current_po, {
              type: 'get',
              beforeSend: function() {
                $j('#rabbit_hole_tooltip').trigger('display-tooltip', 'Loading…');
              },
              complete: goToCurrentArtist
            });
            return false;
          });

          $('#go_deeper').click(function(e) {
            e.preventDefault();
            var player = MusicPlayer.getInstance();

            trackEvent('V3 Footer Data', 'Click', 'Go Deeper');

            if (player.playingIndex < player.playlist.length - 1) {
              player.sendCommand('next');
              goToCurrentArtist()
            }

          });

          $('#what_is_rabbit_hole').click(function(e) {
            e.preventDefault();
            modal_open('/audio_player/modal/rabbit_hole_modal')
            trackEvent('V3 Footer Data', 'Click', 'What Is Rabbit Hole');
          });

          Reverb.RabbitHoleCache = Reverb.RabbitHoleCache || {};
        });
      </script>

    </div>
  </div>

  <div id="footer_marketing_wrap">
    <div id="footer_marketing" class="standard_footer_marketing standard_typography"></div>
  </div>

  <script type="text/javascript">
    jQuery(function($) {
      $("#player_about").qtip()

      var $form = $("#custom_channel_form")

      $("#music_player select").chosen().change(function() {
        window.setTimeout(function() {
          $form.center($form.parent())
        }, 0)

      })

      $form.center($form.parent())

      Reverb.playerReady(function() {

        var load_timeout;
        /* - No longer tied to profile page, will use server-side to check session cookie -
       var songs_container = $("#profile_songs_container"), current_song_id, load_timeout

       songs_container.delegate(".standard_play_button:not(.playing)","click", function(){
       current_song_id = $(this).attr("data-song-id")
       window.clearTimeout(load_timeout)
       })
       */
        MusicPlayer.getInstance().bind("playlist_updated", function fn(ev, player) {

          var song = player.getCurrentSong();
          /* - No longer tied to profile page, will use server-side to check session cookie -
         if(songs_container.is(":not(:visible)")){
         // detach the event listener, as the user left the original profile page
         player.unbind("playlist_updated", fn)
         }else if(song){
         // if the current sound might not be the one the user is listening to.
         // In order to be sure we're tracking the correct data, we have to check that the current song in the playlist is actually the one the user clicked on

         if(current_song_id+"" == song.id+""){
         current_song_id = false;
         */
          window.clearTimeout(load_timeout);
          var check_loaded = function() {
            if (song && player.currentSound && player.currentSound.getLoaded()) { // the load percentage is > 0
              //alert('before incrementing lp_song_plays');
              $.get("/artist/increment_lp_song_plays", {
                song_id: song.id
              });
            } else {
              load_timeout = window.setTimeout(check_loaded, 100);
            }
          }
          check_loaded();
          /*  }
           }*/
        });
      });

    })
  </script>

</div>
</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:29:49.863

您所指的页面是一个单页网站。他们不是在改变页面，而是用 javascript 和 ajax 请求改变一页的外观。这就是为什么玩家一直在玩。

# variables - 获取批处理变量

> ID：14294036
> 
> 赞同：0
> 
> 时间：2013-01-12T14:01:24.900
> 
> 标签：variables, batch-file, installation, registry, text-files

1.  你好呀。我正忙于批量制作脚本。我需要在其中插入一种“恢复”功能。我知道如何将变量写入文件。但是有可能找回吗？

2.  是否可以从注册表中获取变量？

3.  我找到了一个不错的 BAT => EXE 转换器。如果您运行 .exe 代替 .bat，它看起来非常专业。我希望用户下载我的批处理程序的 .exe 安装程序，然后安装真正的程序。但是是否可以将它（程序的放置文件）安装为.exe？我不太了解 .exe 语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:40:15.887

如果我正确理解你的问题，

1.  是否要将先前写入文件的变量读回批处理脚本？是的，只要您知道文件的格式，就可以将文件读入变量。

2.  是的，可以使用该`reg`命令从注册表中读取键和值。

3.  将 .bat 脚本转换为 .exe 后，您可以随意分发它。将其放在 .exe 安装程序中，将其压缩到存档中。

# jquery - 删除 jQuery File Upload 的单独发送按钮

> ID：14294037
> 
> 赞同：0
> 
> 时间：2013-01-12T14:01:41.233
> 
> 标签：jquery, jquery-plugins, jquery-file-upload

我想使用 jQuery File Upload 但我看到每个文件都添加了一个按钮来独立进行爬升。我希望我可以在按下提交按钮时删除该按钮以一次性上传文件。

我试图删除“to Gross”，但给出了故障代码。并且查看选项没有找到删除该选项的选项。我不想简单地隐藏css

我还将向每个文件添加一个输入文本和一个文本区域。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T17:59:17.940

很抱歉删除了这个线程，但它是谷歌的顶级结果 - 您寻找的答案只是将 AutoUpload 从 False 设置为 True。当一个简单的假到真修复它时，很多人试图绕过这个。

```
 $('#fileupload').fileupload({
        url: url,
        dataType: 'json',
        autoUpload: true,
        acceptFileTypes: /(\.|\/)(gif|jpe?g|png|mp4)$/i 
```

# sql - SQL Fact 表维度

> ID：14294041
> 
> 赞同：0
> 
> 时间：2013-01-12T14:02:48.573
> 
> 标签：sql, sql-server, sql-server-2008

[**大分辨率（点击这里）**](https://i.stack.imgur.com/58kdU.png)

![在此处输入图像描述](../Images/f769aea2259e91b711f7abcbc0dbfbad.png)

我们如何在名为 Patent 的事实表中放置 Inventor 表 (InventorID) 的主键的外键，以保持表的正确连接，如名为 Patent 的表 Patent 的主键与其外键之间的关系所指出的那样表发明人的专利。我们这样做是为了使用事实表专利的发明人表创建一个维度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:11:58.287

Your problem is that you have a many-to-many relationship between patents and inventors. You cannot readily implement this with a simple snowflake schema.

Basically, you need to introduce a new table at the patent-inventor level, to handle the many-to-many relationship between these entities.

You can think of this in two ways. The first is that you have a star flake schema with a fact table at a new level, patent-inventor. The patent and inventor levels are then dimensions off of this table.

The second is as a multiple fact tables, with the patent-inventor table connecting them.

What is important is that other dimensions that may be common to both patent and inventor are shared -- dimensions such as time and geography.

# c++ - 在带有语句的行之前通过单行注释进行错误处理

> ID：14294043
> 
> 赞同：12
> 
> 时间：2013-01-12T14:02:54.437
> 
> 标签：c++, comments

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T14:02:54.437

错误在注释中：对于我们来说，最后的 \ 字符代表一个目录，对于编译器来说，这意味着以下行是当前行的一部分。当然，每个开发人员都知道这一点，但在这种情况下，这个细节被很好地隐藏了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T14:07:05.710

很好的问题，MSDN 称这[条线拼接](http://msdn.microsoft.com/en-us/library/bxss3ska.aspx)。

> 所有以反斜杠 ( `\`) 结尾并紧跟换行符的行都与源文件中的下一行连接起来，形成物理行的逻辑行。除非它为空，否则源文件必须以换行符结尾，并且前面没有反斜杠。

# wordpress - Wordpress the_content('more') 无法显示 <--more-->

> ID：14294049
> 
> 赞同：0
> 
> 时间：2013-01-12T14:03:46.467
> 
> 标签：wordpress

我的`wordpress 3.5`博客有一个烦人的问题。

`the_content()`功能无法在首页/索引页面显示帖子的简短版本，而是完整显示帖子的内容。

我当前`the_content()`的`loop.php`文件代码行是：

```
<?php the_content('Read more...'); ?> 
```

我确实尝试搜索 wordpress 论坛 stackoverflow 和 codex，我尝试了这个：

```
<?php 
global $more;    // Declare global $more (before the loop).
$more = 0;       // Set (inside the loop) to display content above the more tag.
the_content("More...");
?> 
```

但它不起作用。

知道这个问题可能是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:00:00.490

您是否已`<!--more-->`在页面内容中添加了标签以显示更多链接？[取自the_excerpt()](http://codex.wordpress.org/Function_Reference/the_excerpt)上的 Codex ：

> 有时只使用`the_content()`函数更有意义。`the_content()`将根据是否`<!--more-->`使用标签来决定显示什么。标签将`<!--more-->`帖子/页面分为两部分：只有标签之前的内容应该显示在列表中。请记住，`<!--more-->`在显示单个帖子/页面时（当然）会被忽略。

# c - 如何使用C中的sort函数按升序对字符串数组进行排序

> ID：14294050
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:03:49.480
> 
> 标签：c, sorting

假设我有一个名为字典的结构，其中包含两个字符数组。我想根据第二个字符数组升序对字典类型数组“对”进行排序。如何使用排序功能做到这一点？我需要如何修改comp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:55:46.313

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

typedef struct
{
    unsigned char message[100];   // string to be sorted
                                  // (totally arbitrary length)
    unsigned char sortOrder[256]; // string containing ASCII chars
                                  // in their sort order
} Pair;

unsigned char rank[256]; // rank of each ASCII character

// qsort() comparison function
int sortByRank(const void *a, const void *b)
{
    return ((int)rank[*(signed char *)a] - (int)rank[*(signed char *)b]);
}

// Creates an array by which a character's relative position can be found
// solely from its value.  Characters of rank 0 will appear first when sorted.
// Characters not specified by sortOrder will appear first, since rank is
// global and automatically initialized to zeros.
void initRank(Pair pair)
{
    int i;

    for (i = 0; i < strlen(pair.sortOrder); i++)
        rank[pair.sortOrder[i]] = i;

    return;
}

int main()
{
    // Create an example pair.  Spaces will be the first characters in the
    // sorted result.
    Pair pair;
    strcpy(pair.message, "this is a test message (123).");
    strcpy(pair.sortOrder, " 321abcdefghijklm.nopqrstuvwxyz()");

    // In this solution, initRank() will need to be called any time the
    // sortOrder is changed.
    initRank(pair); 

    // Sort using the global rank array set by initRank()
    qsort(pair.message, strlen(pair.message), sizeof(char), sortByRank);

    printf("Sorted message: %s\n", pair.message);

    // Output:
    // Sorted message:      321aaeeeghiim.sssssttt()

    return 0;
} 
```

由于 rank[] 是全局的，这并不像可能的那么优雅，但上述解决方案通常演示了如何利用 C 的排序函数以相当简单的方式基于第二个字符串进行自定义排序。

# r - 回收和分配功能（`split<-`）

> ID：14294052
> 
> 赞同：16
> 
> 时间：2013-01-12T14:03:55.093
> 
> 标签：r, syntax, functional-programming

有人可以解释一下这一行 R 代码是如何工作的吗？

```
split(dat, f) <- lapply(split(dat, f), max) 
```

我以为这只是一个回收规则，但我真的无法理解。

数据示例：

```
dat <- c(1, 2, 3, 100, 200, 300)
f <- as.factor(c("a", "a", "b", "a", "b", "b"))
split(dat, f) <- lapply(split(dat, f), max)
dat
[1] 100 100 300 100 300 300 
```

代码做我想做的事（按组分配最大值），但问题是这是如何完成的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T14:15:20.987

拆分给出了值`dat[c(1,2,4)]`和`dat[c(3,5,6)]`来自向量。

分配等同于`dat[c(1,2,4)] <- 100 ; dat[c(3,5,6)] <- 300`，这就是回收发生的地方。

**已编辑**

至于会发生什么，以及为什么会产生向量分配，请参阅语言定义手册 (http://cran.r-project.org/doc/manuals/R-lang.pdf) 的第 21 页。来电：

```
split(def, f) <- Z 
```

被解释为：

```
‘*tmp*‘ <- def
def <- "split<-"(‘*tmp*‘, f, value=Z)
rm(‘*tmp*‘) 
```

请注意，`split<-.default`返回修改后的向量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T14:16:03.453

感谢评论，答案在`split<-.default`

只是为了解释它的行为，在这里我 `split<-.default`在问题中调用了我的调用结果

```
`split<-.default` <- function(dat, f,value = lapply(split(dat, f), max))
{
    ix <- split(seq_along(dat), f, drop = drop, ...)  ## the call of split here!!
    n <- length(value)
    j <- 0
    for (i in ix) {
        j <- j %% n + 1
        x[i] <- value[[j]]  ## here we assign the result of the first split
    }
    x
} 
```

# javascript - 关于请求响应的真正基本 AJAX

> ID：14294053
> 
> 赞同：0
> 
> 时间：2013-01-12T14:03:56.563
> 
> 标签：javascript, jquery, ajax, json

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:11:34.863

`transport` is an object representing the server's response, so you should be able to test for `transport.Error` and/or `transport.Response` to distinguish error and success responses.

# ruby - 如何使用 ruby 获取包含中文字符的整个字符串？

> ID：14294054
> 
> 赞同：2
> 
> 时间：2013-01-12T14:03:58.763
> 
> 标签：ruby, regex

例如，`1.txt`

```
a = "攻击力
非常高"

b = "防御力"
c = "防御力是#{example}"
d = "xyz" 
```

我想要结果：

```
"攻击力
非常高"

"防御力"

"防御力是#{example}" 
```

并且没有`"xyz"`，因为它不包含汉字。

我测试 `/(\p{Han}+)/`了，但这不是我想要的。

先感谢您。

这是我的示例：[正则表达式示例](http://rubular.com/r/PBGBqJegXw)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:14:05.283

这可能会对您有所帮助：`/([^[:ascii:]]+)/`选择输入中所有非 ascii 符号的正则表达式。我在你的例子上试过了，它真的只选择了汉字。

您正在搜索的正则表达式可能是：

```
/("[^"]*[^[:ascii:]]+[^"]*")/ 
```

如果我得到了正确的你需要的东西。

我做什么：

*   字符串应该以`"` `#"#[^"]*[^[:ascii:]]+[^"]*")`
*   然后有任意数量的非`"`字符`"#[^"]*#[^[:ascii:]]+[^"]*")`
*   然后至少一个非ascii符号`"[^"]*#[^[:ascii:]]+#[^"]*")`
*   然后有任意数量的非`"`字符`"[^"]*[^[:ascii:]]+#[^"]*#")`
*   并且应该以`"` `"[^"]*[^[:ascii:]]+[^"]*#"#)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:57:10.057

使正则表达式尽可能简单：

```
# encoding: utf-8
a = "攻击力
非常高"

b = "防御力"
c = "防御力是example"
d = "xyz"

puts [a,b,c,d].select{|str| str =~ /\p{Han}/ }
# 攻击力
# 非常高
# 防御力
# 防御力是example

or, in case of one string:

# encoding: utf-8
a = "攻击力非常高
防御力
防御力是example
xyz"
puts a.lines.select{|line| line =~ /\p{Han}/ }.join 
```

# powershell - 文件 IO，这是 Powershell 中的错误吗？

> ID：14294055
> 
> 赞同：11
> 
> 时间：2013-01-12T14:04:01.527
> 
> 标签：powershell, filestream

我在 Powershell 中有以下代码

```
$filePath = "C:\my\programming\Powershell\output.test.txt"

try
{
    $wStream = new-object IO.FileStream $filePath, [System.IO.FileMode]::Append, [IO.FileAccess]::Write, [IO.FileShare]::Read

    $sWriter = New-Object  System.IO.StreamWriter $wStream

    $sWriter.writeLine("test")
 } 
```

我不断收到错误：

> 无法转换参数“1”，其值为：“[IO.FileMode]::Append”，用于“FileStream”以键入“System.IO.FileMode”：“无法将值“[IO.FileMode]::Append”转换为由于枚举值无效，请键入“System.IO.FileMode”。请指定以下枚举值之一，然后重试。可能的枚举值为“CreateNew、Create、Open、OpenOrCreate、Truncate、Append”。

我尝试了 C# 中的等价物，

```
 FileStream fStream = null;
    StreamWriter stWriter = null;

    try
    {
        fStream = new FileStream(@"C:\my\programming\Powershell\output.txt", FileMode.Append, FileAccess.Write, FileShare.Read);
        stWriter = new StreamWriter(fStream);
        stWriter.WriteLine("hahha");
    } 
```

它工作正常！

我的 powershell 脚本有什么问题？顺便说一句，我在 powershell 上运行

```
Major  Minor  Build  Revision
-----  -----  -----  --------
3      2      0      2237 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-13T06:46:25.013

另一种方法是仅使用值的名称并让 PowerShell 将其转换为目标类型：

```
New-Object IO.FileStream $filePath ,'Append','Write','Read' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-12T16:16:41.760

当使用`New-Object`cmdlet 并且目标类型构造函数接受参数时，您应该使用`-ArgumentList`（New-Object 的）参数或将参数包装在括号中 - 我更喜欢用括号包装我的构造函数：

```
# setup some convenience variables to keep each line shorter
$path = [System.IO.Path]::Combine($Env:TEMP,"Temp.txt")
$mode = [System.IO.FileMode]::Append
$access = [System.IO.FileAccess]::Write
$sharing = [IO.FileShare]::Read

# create the FileStream and StreamWriter objects
$fs = New-Object IO.FileStream($path, $mode, $access, $sharing)
$sw = New-Object System.IO.StreamWriter($fs)

# write something and remember to call to Dispose to clean up the resources
$sw.WriteLine("Hello, PowerShell!")
$sw.Dispose()
$fs.Dispose() 
```

新对象 cmdlet 联机帮助： http: [//go.microsoft.com/fwlink/ ?LinkID=113355](http://go.microsoft.com/fwlink/?LinkID=113355)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T09:40:47.053

另一种方法可能是将枚举括在括号中：

```
$wStream = new-object IO.FileStream $filePath, ([System.IO.FileMode]::Append), `
    ([IO.FileAccess]::Write), ([IO.FileShare]::Read) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T16:02:10.300

如果您的目标是写入日志文件或文本文件，那么您可以尝试 PowerShell 中支持的 cmdlet 来实现这一目标吗？

```
Get-Help Out-File -Detailed 
```

# objective-c - 如何排队 NSUserAppleScriptTask 执行？

> ID：14294056
> 
> 赞同：1
> 
> 时间：2013-01-12T14:04:03.187
> 
> 标签：objective-c, applescript

我正在将一些执行 AppleScripts 的代码从 NSAppleScript 迁移到 NSUserAppleScriptTask，以便我可以对我的应用程序进行沙箱处理。我遇到的问题可以最好地证明如下：

AppleScript“test.scpt”很简单

```
on run
  display dialog "Hello World" buttons {"OK"} default button "OK"
end run 
```

如果我使用如下 NSAppleScript 连续执行 10 次，则脚本会执行 10 次，每次执行都等待上一次执行完成。

```
NSURL *script = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"scpt"]];

for (int i=0; i<10; i++) {

    NSDictionary *error = nil;
    NSAppleScript *task = [[NSAppleScript alloc] initWithContentsOfURL:script error:nil];
    [task executeAndReturnError:&error];
    if (error!=nil) {
        NSLog(@"AppleScript error: %@", error);
    }
    [task release];
} 
```

但是使用 NSUserAppleScriptTask 似乎任务是同时执行的。并发执行是一个“问题”，因为如果前一个脚本打开了一个对话框，下一个要执行的脚本就会出错。这可以证明如下：

```
NSURL *script = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"scpt"]];

for (int i=0; i<10; i++) {

    NSError *error;
    NSUserAppleScriptTask *task = [[NSUserAppleScriptTask alloc] initWithURL:script error:&error];
    [task executeWithCompletionHandler:^(NSError *error) {
        if (error){
            NSLog(@"Script execution failed with error: %@", [error localizedDescription]);
        }
    }];

   [task release];

} 
```

这会为 10 次执行中的 9 次生成以下错误：

```
execution error: "Hello World" doesn’t understand the «event sysodlog» message. (-1708) 
```

我认为正确的解决方案是使用 gcd 或 NSOperationQueue 对每个操作进行排队，但我没有设法构建一个队列，等待 NSUserAppleScriptTask 的完成块在它开始下一个任务之前执行。

任何人都可以提出一个解决方案，它会给我与 NSAppleScript 方法给我的行为相同的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:22:16.280

您可以从调度队列（或操作队列）运行脚本并使用`NSConditionLock`等待每个脚本完成。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSConditionLock *lock = [[NSConditionLock alloc] initWithCondition:0];

    NSURL *script = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"scpt"]];
    for (int i=0; i<10; i++) {
        NSError *error;
        NSUserAppleScriptTask *task = [[NSUserAppleScriptTask alloc] initWithURL:script error:&error];
        [task executeWithCompletionHandler:^(NSError *error) {
            if (error){
                NSLog(@"Script execution failed with error: %@", [error localizedDescription]);
            }
            [lock lock];
            [lock unlockWithCondition:1];
        }];
        [task release];

        //This will wait until the completion handler of the script task has run:
        [lock lockWhenCondition:1];
        [lock unlockWithCondition:0];
    }
    [lock release];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:44:17.027

（受上面 omz 评论的启发，我写这个作为答案。）

您可以使用任务的完成处理程序开始执行下一个任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:45:18.407

你是如何通过沙盒的？无论我尝试什么，我都会得到类似的东西：

```
Script execution error: The file “create.scpt” couldn’t be opened because you don’t have permission to view it. 
```

关闭沙盒或手动执行脚本时，一切正常

权利：

```
com.apple.security.temporary-exception.apple-events
com.apple.systemevents
com.apple.applescript 
```

泰。

编辑：似乎如果我将脚本放入 ~/Library/Application Scripts/com.myapp/ 并执行该脚本一切正常

# python - 使用 Python 从 Gmail 中提取信息

> ID：14294057
> 
> 赞同：7
> 
> 时间：2013-01-12T14:04:10.897
> 
> 标签：python, gmail, extract, imaplib

我已经通过解决方案**从 Gmail 邮箱中选定的已接收电子邮件中提取有用信息**。

此示例的目的是获取从提供石油月度价格的时事通讯发送的所有邮件。您可以在 EIA 网站上免费订阅此类通讯。所有此类时事通讯都到达我的 gmail 邮箱的同一个文件夹中，并以“$”开头。

电子邮件的内容是这样的

![在此处输入图像描述](../Images/fcd19ee69f8365594d62999806450691.png)

我的目标是编写一个脚本来获取最后 10 封此类电子邮件（过去 10 个月），并绘制美国不同地区相对于时间的石油价格。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-12T14:04:10.897

Python`email`库会有所帮助。

```
import email, getpass, imaplib, os, re
import matplotlib.pyplot as plt 
```

这个目录是你保存附件的地方

```
 detach_dir = "F:\OTHERS\CS\PYTHONPROJECTS" 
```

然后，您的脚本会向用户（或您自己）询问帐户功能

```
user = raw_input("Enter your GMail username --> ")
pwd = getpass.getpass("Enter your password --> ") 
```

然后连接到 gmail imap 服务器并登录

```
m = imaplib.IMAP4_SSL("imap.gmail.com")
m.login(user, pwd) 
```

选择一个文件夹，你可以使用整个 INBOX

```
m.select("BUSINESS/PETROLEUM") 
```

一个应该`m.list()`用来获取所有邮箱。搜索来自指定发件人的所有电子邮件并选择邮件 ID：

```
resp, items = m.search(None, '(FROM "EIA_eLists@eia.gov")')
items = items[0].split()  

my_msg = [] # store relevant msgs here in please
msg_cnt = 0
break_ = False 
```

我想要最后一封电子邮件，以便我使用`items[::-1]`

```
for emailid in items[::-1]:

    resp, data = m.fetch(emailid, "(RFC822)")

    if ( break_ ):
        break

    for response_part in data:

      if isinstance(response_part, tuple):
          msg = email.message_from_string(str(response_part[1]))
          varSubject = msg['subject']
          varDate = msg['date'] 
```

我只想要那些以`$`

```
 if varSubject[0] == '$':
              r, d = m.fetch(emailid, "(UID BODY[TEXT])")

              ymd = email.utils.parsedate(varDate)[0:3]
              my_msg.append([ email.message_from_string(d[0][1]) , ymd ])

              msg_cnt += 1 
```

我只想要 N=100 最后的消息

```
 if ( msg_cnt == 100 ):
                  break_ = True

l = len(my_msg)
US, EastCst, NewEng, CenAtl, LwrAtl, Midwst, GulfCst, RkyMt, WCst, CA = 
[0]*l, [0]*l, [0]*l, [0]*l, [0]*l, [0]*l, [0]*l, [0]*l, [0]*l, [0]*l 
absc = [k for k in range(len(my_msg))]
dates = [str(msg[1][2])+'-'+str(msg[1][3])+'-'+str(msg[1][0]) for msg in my_msg]
cnt = -1

for msg in my_msg:

    data = str(msg[0]).split("\n")
    cnt+=1
    for c in [k.split("\r")[0] for k in data[2:-2]]: 
```

使用正则表达式获取相关信息

```
 m = re.match( r"(.+)(=3D\$)(.+)" , c )  
        if( m == None ):
            continue 

        country, na, price = m.groups()

        if ( country == "US" or country == "USA" ) :
            US[cnt] = float(price)
        elif( country == "NewEng" ) :
            EastCst[cnt] = float(price)    
        elif( country == "EastCst" ) :
            NewEng[cnt] = float(price)  
        elif( country == "EastCst" ) :
            CenAtl[cnt] = float(price) 
        elif( country == "EastCst" ) :
            LwrAtl[cnt] = float(price)
        elif( country == "EastCst" ) :
            Midwst[cnt] = float(price)
        elif( country == "EastCst" ) :
            GulfCst[cnt] = float(price)
        elif( country == "EastCst" ) :
            RkyMt[cnt] = float(price)
        elif( country == "EastCst" ) :
            WCst[cnt] = float(price)
        elif( country == "EastCst" ) :
            CA[cnt] = float(price) 
```

用美国价格绘制所有这些曲线

```
plt.plot( absc, US )

plt.plot( absc, EastCst )    
plt.plot( absc, NewEng, '#251BE0' )    
plt.plot( absc, EastCst, '#1BE0BF' )
plt.plot( absc, CenAtl, '#E0771B' )
plt.plot( absc, LwrAtl, '#CC1BE0' )
plt.plot( absc, Midwst, '#E01B8B' ) 
plt.plot( absc, GulfCst, '#E01B3F' )
plt.plot( absc, RkyMt )
plt.plot( absc, WCst )
plt.plot( absc, CA )

plt.legend( ('US', 'EastCst', 'NewEng' , 'EastCst', 'CenAtl', 'LwrAtl', 'Midwst', 'GulfCst', 'RkyMt', 'WCst', 'CA')  )
plt.title('Diesel price')
locs,labels = plt.xticks(absc, dates)
plt.show() 
```

一些相关的有趣话题在这里

[只接收新电子邮件](https://stackoverflow.com/questions/13210737/get-only-new-emails-imaplib-and-python?lq=1)

[获取邮件正文](https://stackoverflow.com/questions/2230037/how-to-fetch-an-email-body-using-imaplib-in-python?lq=1)

[转发带附件的电子邮件](https://stackoverflow.com/questions/5572589/python-forward-imap-email-with-attachments-imaplib-smtplib?lq=1)

[在 gmail 中获取正文电子邮件](https://stackoverflow.com/questions/14029768/python-imaplib-fetch-body-emails-gmail)

结果仅针对三个区域

![我们的价格](../Images/8972adb90911c45531a072c3a5abc28f.png)

# c++ - static const char * const 和 static const char [] 有什么区别？

> ID：14294065
> 
> 赞同：1
> 
> 时间：2013-01-12T14:05:05.607
> 
> 标签：c++, c, memory, memory-management, static

> **可能重复：**
> [char a[] = “string”; 之间有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

数组版本是否会分配数组内存，所以一个 100 字节的字符串将在常量部分使用 100 个字节，在静态数组上使用 100 个字节，还是总共只使用 100 个字节？而指针版本，除了字符串的 100 字节之外，它会为指针分配字大小，还是将指针完全优化为常量部分地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:14:45.683

如果您使用的是普通计算机，则有一个`.rodata`部分：

```
#include <stdio.h>

static const char *s = /* string of 100 characters */;

int main(void)
{
  puts(s);
  return 0;
} 
```

它在节中分配`100 + sizeof(char *)`字节。`.rodata`

```
#include <stdio.h>

static const char s[100] = /* string of 100 characters */;

int main(void)
{
  puts(s);
  return 0;
} 
```

它在节中分配`100`字节。`.rodata`

# oracle - 从批处理文件执行 SQL

> ID：14294068
> 
> 赞同：3
> 
> 时间：2013-01-12T14:05:51.477
> 
> 标签：oracle, batch-file, sqlplus

我是批处理文件脚本的新手。

我想要的只是创建一个调用 SQL 文件并将结果存储在文本文件中的批处理文件。

任何人都可以帮助我，非常感谢您的帮助，

这是我第一次需要创建这样的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T16:55:55.897

使用批处理文件：

保存并运行：

```
@echo off
sqlplus -s -l user/pass@yourdb @yoursql.sql>your_log.log 
```

ps 一定要把你的 sql 脚本的最后一行作为，`exit;`否则批处理文件会挂起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T14:20:13.470

```
sqlcmd -S sqlservername -i yoursqlfile.sql -U username -P password -o outputfile.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T11:20:05.460

我创建了一个更高级的启动器，尝试一下（您可以在[http://www.unix.com/windows-and-dos-issues-and-discussions/256021-windowss-batch-launcher-oracle-找到最新版本sql-linux-sh-scripts-available-here.html](http://www.unix.com/windows-and-dos-issues-and-discussions/256021-windowss-batch-launcher-oracle-sql-linux-sh-scripts-available-here.html) )

无论如何，这是代码：

启动器.cmd

```
@ECHO OFF

rem Script Launcher by Fr3dY v1.4
rem ##############################
rem Version History:
rem 1.4 - Misc. fixes
rem 1.3 - Merged with 'server launcher', now accepts both SQL and SHELL SCRIPTS
rem 1.2 - Interactive prompt to show the file on screen
rem 1.1 - No need to add 'quit;' or 'exit;' in the .sql file anymore
rem       Fixed sqlplus waiting for username/password if the first attempt was unsuccessful
rem       Log file is generated automatically, including date and time in name
rem       Misc. fixes
rem 1.0 - Initial Version

:MAIN
::Path of PLINK
set PLINK="C:\Program Files (x86)\PuTTY\plink.exe"
::List with TNS NAMES
set dbservers=launcher-databases.txt
::List with LINUX SERVERS
set linuxservers=launcher-servers.txt

set dt=%DATE:~6,4%_%DATE:~3,2%_%DATE:~0,2%__%TIME:~0,2%_%TIME:~3,2%_%TIME:~6,2%
set dt=%dt: =0%

echo Choose launcher mode:
echo 1) Database scripts (.sql files)
echo 2) Shell scripts (.sh files)
set /p launchermode="Insert value: "
echo.

if %launchermode%==1 (
  set extension=sql
  set servers=%dbservers%
  set mode=DB
) else (
    if %launchermode%==2 (
      set extension=sh
      set servers=%linuxservers%
      set mode=OS
    ) else (echo "Incorrect value, exiting..." & goto :END)
)    

if exist %servers% (
  goto :LISTFILES
) else echo FILE %servers% NOT FOUND, ABORTING & goto :END

:LISTFILES
echo Listing *.%extension% files...
echo.
dir /b *.%extension%
echo.

set /p file=Name of the file to be launched (without extension)? 

if exist %file%.%extension% (
  goto :CONFIRMSHOW
) else echo FILE %file%.%extension% NOT FOUND, ABORTING & goto :END

:CONFIRMSHOW
echo.
set /p confirm=Show the script %file%.%extension% on screen now? 
if %confirm%==y (
  goto :SHOWSCRIPT
  ) else goto :CONFIRMEXEC
echo.

:SHOWSCRIPT
echo.
echo Content of %file%.%extension%
echo ######################
type %file%.%extension%
echo.
echo ######################
echo.

:CONFIRMEXEC
set /p confirm=Are you sure you want to execute this script? 
if %confirm%==y (
  set /p user=%mode% username?  
  goto :HInput
  ) else echo ABORTED & goto :END
echo.
echo Output saved to %file%_%dt%.log
echo.
Goto :END

:HInput
::Hidden.cmd
::Tom Lavedas, 02/05/2013, 02/20/2013
::Carlos, 02/22/2013
::https://groups.google.com/forum/#!topic/alt.msdos.batch.nt/f7mb_f99lYI
::Version 3.0     
SetLocal DisableDelayedExpansion
echo.
Echo Enter password:
Set "Line="
Rem Save 0x08 character in BS variable
For /F %%# In (
'"Prompt;$H&For %%# in (1) Do Rem"'
) Do Set "BS=%%#"

:HILoop
Set "Key="
For /F "delims=" %%# In (
'Xcopy /L /W "%~f0" "%~f0" 2^>Nul'
) Do If Not Defined Key Set "Key=%%#"
Set "Key=%Key:~-1%"
SetLocal EnableDelayedExpansion
If Not Defined Key echo. & Goto :HIEnd
If %BS%==^%Key% (Set /P "=%BS% %BS%" <Nul
Set "Key="
If Defined Line Set "Line=!Line:~0,-1!"
) Else Set /P "=*" <Nul
If Not Defined Line (EndLocal &Set "Line=%Key%"
) Else For /F delims^=^ eol^= %%# In (
"!Line!") Do EndLocal &Set "Line=%%#%Key%"
Goto :HILoop

:HIEnd
if %launchermode%==1 (
  goto :EXECDB
) else goto :EXECLINUX

:EXECDB
FOR /f %%A IN (%servers%) DO CALL ECHO DATABASE: %%A & ECHO DATABASE: %%A >> %file%_%dt%.log & sqlplus -S -L %user%/!Line!@%%A < %file%.%extension% >> %file%_%dt%.log
goto :END

:EXECLINUX
FOR /f %%A IN (%servers%) DO CALL ECHO SERVER: %%A & ECHO SERVER: %%A >> %file%_%dt%.log & echo y | %PLINK% %user%@%%A -pw !Line! "exit" & %PLINK% %user%@%%A -pw !Line! -batch -m %file%.%extension% >> %file%_%dt%.log & echo. >> %file%_%dt%.log
goto :END

:END
pause 
```

# vb.net - 从 VB.NET 中的第三方程序调度程序解析命令行

> ID：14294070
> 
> 赞同：0
> 
> 时间：2013-01-12T14:05:53.817
> 
> 标签：vb.net, vb.net-2010, vb6-migration

我在创建在 Oracle 数据库中执行存储过程的控制台 vb.net 程序时遇到问题。如果存储过程将在代码中进行硬编码，我可以这样做。问题是，存储过程需要放在供应商程序的参数中。目前，我们使用 VB6 程序来执行此操作。现在，他们想将此 vb6 程序转换为 .NET，但我不知道该怎么做。我尝试了下面的方法，但它没有从 3rd 方程序传递命令参数。

例子。这是第3方程序的截图：

[![外部项目](../Images/956cd31266093e1066f96d85d9af9b24.png)](https://i.stack.imgur.com/tX505.jpg)

PLSQLSUB.exe 程序是一个调用存储过程 CNC_UNLOCK_USERS 的 vb6。

这是 VB6 代码，目前正在运行，但我不知道如何在 VB.NET 中传递外部参数

```
Private Sub Form_Load()
  Dim cnTrecs As New ADODB.Connection
  Dim QY As New ADODB.Command

  Dim I As Integer

  Dim Procedures(10) As String

  Dim ColonPos As Integer

  Dim CommLine As String
  Dim CommLength As Integer
  Dim StartPos As Integer
  Dim FileName As String
  Dim CheckForFile As String
  Dim User As String
  Dim Pass As String
  Dim Userid As String
  Dim Password As String

  Dim PLSCount As Integer

  PLSCount = 0

  CommLine = Command()
  CommLength = Len(Trim(CommLine))

  If Trim(CommLine) <> "" Then
    StartPos = 1
    For I = 1 To 10
      ColonPos = InStr(StartPos, Trim(CommLine), ";")

      If ColonPos > 0 Then
        Procedures(I) = Mid(CommLine, StartPos, ColonPos - StartPos)
        PLSCount = PLSCount + 1
        StartPos = ColonPos + 1
      ElseIf I > 1 Then
        If (CommLength - StartPos) > 0 Then
          Procedures(I) = Mid(CommLine, StartPos, CommLength - StartPos)
          MsgBox (Procedures(I))
          PLSCount = PLSCount + 1
          Exit For
        Else
          Exit For
        End If
      Else
        Procedures(I) = Trim(CommLine)
        PLSCount = PLSCount + 1
        Exit For
      End If
    Next
    Exit Sub
  Else
    Unload Me
    Exit Sub
  End If

  CheckForFile = Dir("C:\VB\vbtext1.txt")
  If CheckForFile <> "" Then FileName = "d:\VB\vbtext1.txt"
    Open FileName For Input As #5   ' Open UserID and Password file.
      Line Input #5, Userid
      Line Input #5, Password
    Close #5
  End If
  User = Mid(Userid, 1) ' Set database userID
  Pass = Mid(Password, 1) ' Set database password

  cnTrecs.Open "DSN=PLSQLSUB;" _
                & "Uid=" _
                & Trim$(User) & ";PWD=" _
                & Trim$(Pass)

  For I = 1 To PLSCount ' Loop until end of plsql procedures
    Print #1, "The Stored Procedure " & Procedures(I) & " was submitted for execution     
on/at "; Format(Now, "dd-mmm-yyyy hh:mm:ss")

    Set QY.ActiveConnection = cnTrecs
    QY.CommandType = adCmdStoredProc
    QY.CommandText = Procedures(I)
    QY.Execute
    Print #1, "The Stored Procedure " & Procedures(I) & " completed execution on/at ";   
    Format(Now, "dd-mmm-yyyy hh:mm:ss")
    Print #1, " "
  Next I

  If cnTrecs.State = adStateOpen Then
    cnTrecs.Close
  End If
End Sub 
```

一位朋友告诉我使用以下代码，但我无法通过存储过程。任何帮助将不胜感激。

```
Dim CommandLineArgs As System.Collections.ObjectModel.ReadOnlyCollection(Of String) = My.Application.CommandLineArgs

For i As Integer = 0 To CommandLineArgs.Count - 1
   MessageBox.Show("The stored procedure is: " + CommandLineArgs(i))
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:46:14.477

If I understood you correctly, you want to convert existing VB6 to VB.NET, i.e. run a stored procedure from VB.NET. Because your SP does not have parameters, use below code:

```
Using conn As New OracleConnection("Server=YourOracle;Uid=uid;Pwd=pwd")
  conn.Open()
  Dim cmd As New OracleCommand
  cmd.Connection = conn
  cmd.CommandType = CommandType.StoredProcedure
  cmd.CommandText = "CNC_UNLOCK_USERS"
  Try
    cmd.ExecuteNonQuery()
  Catch ex As OracleException
    'do something
  End Try
End Using 
```

Based on [Executing stored procedure in vb.net](https://stackoverflow.com/questions/8488970/executing-stored-procedure-in-vb-net) (if you later need parameters, please refer to this link). User ID and password are stored in `d:\VB\vbtext1.txt`, according to your VB6 code. Not sure why it's checking similar location on C:, and never assigns the `FileName`.

If you need to pass name of stored procedure through command line, you need to switch `Startup object` to `Sub Main` (project properties -> Application tab), and then place similar code into a new class:

```
Public Class Class1
  Shared Sub Main(args() As String)
    'parse args and save it somewhere
    Form1.ShowDialog()
  End Sub
End Class 
```

Before showing a form, make sure you save `args(0)` as name of your stored procedure to be executed. Or you can have a custom `ShowDialog` on the form, that takes a parameter of type `String`, and call that. I would recommend you convert to console application, since it will now show its UI anyway. Then you simply execute above code in `Sub Main`, changing this line:

```
cmd.CommandText = "CNC_UNLOCK_USERS" 
```

to this:

```
cmd.CommandText = args(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:51:47.607

您可以使用[Environment.GetCommandLineArgs](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs%28v=vs.100%29.aspx)方法来检索命令行参数。在进一步查看您的问题时，您已经在做类似的事情，我的问题是您尝试导入 StoredProcedure 或要运行的 StoredProcedure 的名称。

# .htaccess - 删除“index.php？” 使用 .htaccess

> ID：14294079
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:07:10.840
> 
> 标签：.htaccess, url-rewriting

我正在使用启用扩展的 PHP 5.3.5`htaccess`开发 Wamp。

我面临的问题是我需要这样的东西`http://localhost/abc/aboutus`。

现在实际的 URL 是这样的`http://localhost/abc/index.php?aboutus`

我尝试了以下代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

并尝试使用它，`http://localhost/abc/aboutus`但它不起作用。但是当我尝试它时`http://localhost/abc/?aboutus`。

它工作正常，但我实际上想`?`从 URL 中删除。谁能告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:00:15.697

您必须`/abc/`在规则中考虑 URI 基础。因此，如果 htaccess 文件位于您的文档根目录中，则规则需要如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^abc/(.*)$ /abc/index.php?/$1 [L] 
```

但是，如果规则位于 /abc/ 文件夹中的 htaccess 文件中*，**则**它们*需要如下所示：

```
RewriteEngine On
RewriteBase /abc/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# php - 如何防止在网站的某些部分执行 php？

> ID：14294080
> 
> 赞同：0
> 
> 时间：2013-01-12T14:07:16.177
> 
> 标签：php, security, execution, suphp

我有一个运行 php 作为 suphp 的 LAMP 服务器，有几个网站。如果我没记错的话，通常可以通过将“php_flag engine off”放在相应目录的.htaccess文件中来阻止php代码在网站的某个部分运行，或者在VirtualHost中放置“php_flag engine off” Apache中的指令。但这显然仅对常规 mod_php 有效，对 suphp 无效。那么我怎样才能在 suphp 中实现同样的功能呢？

例如，我想禁用 www.foo.com/images/ 中的 PHP 代码，但在该站点的其他任何地方允许它。

我在 stackoverflow 上搜索过，但只找到了 mod_php 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:18:52.443

将以下内容添加到 .htaccess

```
RemoveHandler .php
RemoveType .php 
```

在您需要禁用 PHP 的文件夹中

# asp.net-web-api - 如何从 Windows Phone 8 发布到 Asp.Net MVC4 WebApi 并返回 JSON

> ID：14294081
> 
> 赞同：0
> 
> 时间：2013-01-12T14:07:21.973
> 
> 标签：asp.net-web-api, httpclient, windows-phone-8

我有以下 Asp.net MVC4 WebApi 方法定义：

```
public ApiResponse Process(string id, FormDataCollection form)... 
```

我用来从 ExtJS 发布表单数据并返回一个自定义类 ApiResponse {success(bool), msg(string), ds(DataSet) }，它很好地转换为 JSON。 **我可以从 Windows Phone 8 HttpClient 调用它吗？**内置版本似乎不允许我使用 NamedValueCollection。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:06:58.223

我对您的问题感到困惑如果我猜对了，您是在问您是否可以从 WP8 调用 JSON 端点。是的你可以。将生成的 JSON 带到[http://json2chsarp.com](http://json2chsarp.com)，它会为您生成 JSON.net 类。然后使用 JSON.Net 的 JsonDeserializer 将 JSON 文本反序列化回对象。

# c - 如何评估字符串表达式并返回 C 中的值？

> ID：14294083
> 
> 赞同：0
> 
> 时间：2013-01-12T14:07:43.807
> 
> 标签：c, string, expression, evaluation

我正在尝试评估作为字符数组的表达式并返回表达式的结果。

例如：

```
char *myeExpression []= "(1+2) * 3" 
```

应该返回结果 9。

这是我的代码：

```
struct node {
double element;
struct node *next;
} *head;

void push(int c);      // function to push a node onto the stack
int pop();             // function to pop the top node of stack
void traceStack();      // function to //print the stack values

 int prece(char j)
{
if(j=='*'||j=='/')
{
   j=3;
}
else
{
    if(j=='+'||j=='-')
    {
       j=2;
    }
    else
    {
       j=1;
    }
}
return j;
}

 int evaluate(char *  a) {
int i = 0, j = 0,k,l,a1,b1;   // indexes to keep track of current position
char *exp = (char *)malloc(sizeof(char)*100);
double res = 0;

char stack[5];
char tmp;
head = NULL;

//  converting an infix to a postfix

for(i=0;i<10;i++)
{
    a1=prece(a[i]);
    b1=prece(stack[k]);
    if(a1<=b1)
    {
        exp[l]=a[i];
        l++;
    }
    else
    {
        stack[k]=a[i];
        k++;

    }
}
for(i=k;i>0;i--)
{
    exp[l]=stack[i];
    l++;
}

//end
i=0;
j=0;
k=0;

while( (tmp=exp[i++]) != '\0') {    // repeat till the last null terminator
    // if the char is operand, pust it into the stack
    if(tmp >= '0' && tmp <= '9') {
        int no = tmp - '0';
        push(no);
        continue;
    }

    if(tmp == '+') {
        int no1 = pop();
        int no2 = pop();
        push(no1 + no2);
    } else if (tmp == '-') {
        int no1 = pop();
        int no2 = pop();
        push(no1 - no2);
    } else if (tmp == '*') {
        int no1 = pop();
        int no2 = pop();
        push(no1 * no2);
    } else if (tmp == '/') {
        int no1 = pop();
        int no2 = pop();
        push(no1 / no2);
    }
}
return pop();

}

void push(int c) {
if(head == NULL) {
    head = malloc(sizeof(struct node));
    head->element = c;
    head->next = NULL;
} else {
    struct node *tNode;
    tNode = malloc(sizeof(struct node));
    tNode->element = c;
    tNode->next = head;
    head = tNode;
}
}

 int pop() {
struct node *tNode;
tNode = head;
head = head->next;
return tNode->element;
} 
```

中缀表达式评估发生但不完全。得到错误的结果，即 3 而不是 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:46:56.920

您的代码没有明确忽略或以其他方式处理空白；这是麻烦的原因之一吗？编译器指出：

*   `k`未初始化
*   `l`未初始化

这些未初始化的值用作数组的索引。您用于`for (i = 0; i < 10; i++)`扫描字符串，无论其实际长度如何。这不是幸福的秘诀。

括号的优先级为 1（低）；通常，它们具有很高的优先级。在从中缀转换为前缀时，您需要决定如何处理它们。

您将事物与`stack[k]`将任何事物压入堆栈之前的优先级进行比较。一般来说，您的中缀到前缀转换似乎不可靠。在继续之前，您应该专注于正确地做到这一点。

你必须学会​​要么在调试器中运行你的代码，逐行逐行查看出错的地方，要么学习添加调试打印语句（这是我通常的工作方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:46:14.847

您可以学习 lex 和 yacc，因为它们消除了构建词法分析器和解析器的大部分困难。“calc”是一个可以计算简单算术表达式的标准示例。例如，您可以[在此处](http://www.cs.man.ac.uk/~pjj/cs2121/ho/node4.html)找到它。

# wpf - 滚动查看器中的网格

> ID：14294084
> 
> 赞同：0
> 
> 时间：2013-01-12T14:07:43.603
> 
> 标签：wpf, grid, scrollview

*   我使用了一个带有滚动查看器的 GroupBox ..在滚动查看器内部我放置了一个网格并开始放置我的控件（3 个文本块和 6 个文本框） - 在让我的滚动查看器滚动我的内容（其余 3 个文本框）之后我遇到了麻烦滚动查看器内的网格出现在下一张图片之类的东西后面
*   如何使网格具有与 GroupBox 相同的大小并且不会出现在控件后面？ ![在此处输入图像描述](../Images/6e1e819a276c128b522bcbf1bf5e6e11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:48:43.473

可以`VerticalAlignment="Stretch"`在 Grid 和`VerticalAContentlignment="Stretch"`ScrollViewer 上设置吗？

# java - 两个类和图像不出现

> ID：14294085
> 
> 赞同：1
> 
> 时间：2013-01-12T14:07:59.277
> 
> 标签：java, image, class, object, methods

我创建了两个类，其中一个扩展。我创建了一个对象，但没有出现文件（方法工作正常，因为出现了标题形式的 draw() 方法。所有代码：

```
public class Main_class extends JFrame implements ActionListener{
 //**************************// 
 public static void main(String[] args) {
       java.awt.EventQueue.invokeLater(new Runnable(){
 public void run(){
 new Main_class().setVisible(true);
 }
 });
}
 //**************************// 
 JPanel panel;

 JMenuBar mbar; 
 JMenuItem item;

 JMenuItem open;
 JMenu file;
 BufferedImage my_image;

public Main_class(){
setSize(800, 600);
setTitle("TEST");
setResizable(false);
setLocationRelativeTo(null);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

panel=new JPanel();

mbar=new JMenuBar();
setJMenuBar(mbar);

    file=new JMenu("File");
    mbar.add(file);

    open=new JMenuItem("Open");
    open.addActionListener(this);
    file.add(open);      
 }

@Override
public void actionPerformed(ActionEvent e) {
 String zrodlo=e.getActionCommand();
 image_class k=new image_class();
    if(zrodlo.equals("Open")) try {
        k.load(my_image);
    } catch (IOException ex) {
        Logger.getLogger(Main_class.class.getName()).log(Level.SEVERE, null, ex);
    }
}
} 
```

////////////////////////////////////

```
public class image_class extends Main_class{

public void load(BufferedImage my_image) throws IOException{
  JFileChooser open_chooser=new JFileChooser("//");
  FileNameExtensionFilter rast=new FileNameExtensionFilter("Pliki grafiki rastrowej(.jpeg,.png.,gif...)", "jpeg","jpg", "gif","png","bmp");
  open_chooser.setFileFilter(rast);
  int a=open_chooser.showOpenDialog(null);

  if(a==JFileChooser.APPROVE_OPTION){
  String image_name=open_chooser.getSelectedFile().getAbsolutePath();
  String roz=image_name.substring(image_name.lastIndexOf('.')+1);
  my_image=ImageIO.read(open_chooser.getSelectedFile());               
  draw();    
}
}

public void draw(){  
 panel=new JPanel(){
        protected void paintComponent(Graphics g){
            Graphics g2 = g.create();
            g2.drawImage(my_image, 0, 0, getWidth(), getHeight(), null);
            g2.dispose();             
        }         
 };   
 panel.setBounds(0, 0, 200, 200);
 add(panel);
 revalidate();  
 repaint();   
 System.out.print("LOADED!!!!!!");
 }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:19:00.790

您的图像不会像您一样出现

1.  永远不要通过调用显示你的第二个`JFrame`, , 。`image_class``setVisible`
2.  因为 Java 是*按值传递的*，所以您不是`my_image`在方法中分配给同名的类成员变量，而是分配给该变量的`load`本地副本：

代替

```
my_image = ImageIO.read(open_chooser.getSelectedFile()); 
```

和

```
this.my_image = ImageIO.read(open_chooser.getSelectedFile()); 
```

（或者干脆不传入变量）

建议您`JFrame`在这里使用单个，添加一个子类`JComponent`并在该组件上绘制图像。

有关的：

*   [使用多个 JFrame，好/坏做法？](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)
*   [如何将图像添加到 JPanel？](https://stackoverflow.com/questions/299495/java-swing-how-to-add-an-image-to-a-jpanel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:44:50.133

您的主要问题之一是您滥用继承。您的代码来自 image_class.java：

```
public void draw() {
  panel = new JPanel() {
     protected void paintComponent(Graphics g) {
        Graphics g2 = g.create();
        g2.drawImage(my_image, 0, 0, getWidth(), getHeight(), null);
        g2.dispose();
     }
  };
  panel.setBounds(0, 0, 200, 200);
  add(panel);
  revalidate();
  repaint();
  System.out.print("LOADED!!!!!!");
} 
```

您正在将新的 JPanel 添加到 Main_class 实例，但不是显示的实例，而是 image_class 继承的实例。这是两个完全不同的对象，对一个对象进行更改不会影响另一个对象。

解决方案不是为此滥用继承，而是在原始 GUI 中显示图像。

此外，您永远不应该处理从 JVM 提供给您的 Graphics 对象，因为这可能会产生令人讨厌的副作用。

# mysql - 一个 SQL 语句中的两个不同的分组

> ID：14294088
> 
> 赞同：1
> 
> 时间：2013-01-12T14:08:13.200
> 
> 标签：mysql, select, group-by, sum

我有一张地方表：

```
table place:
id INT,
name VARCHAR(255) 
```

和一张表格来计算每天到每个地方的访问量：

```
table place_visit:
place_id INT,
date DATE,
count INT 
```

现在我想在一个语句中获取：place.id、place.name、今天访问次数的总和和总访问次数的总和（从所有天数）。

这可能吗？我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:13:18.040

试试这个：

```
SELECT p.id, p.name, SUM(IF(CURDATE() = pv.date, pv.count, 0)) todayCnt, 
       SUM(pv.count) allCnt
FROM place p 
INNER JOIN place_visit pv ON p.id = pv.place_id 
GROUP BY p.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:12:42.557

```
SELECT  a.ID,
        a.name,
        SUM(CASE WHEN date = CURDATE() THEN b.count ELSE 0 END) dayVisit,
        SUM(b.count) overAllVisit
FROM    place a
        LEFT JOIN place_visit b
            ON a.ID = b.place_id
GROUP   BY a.ID, a.name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e796f/2)

# ruby-on-rails - 捕获 nil 对象并渲染视图

> ID：14294089
> 
> 赞同：0
> 
> 时间：2013-01-12T14:08:15.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我似乎无法从我的 api 调用中捕获 nil 响应，当没有结果时我收到此错误

```
undefined method `[]' for nil:NilClass 
```

因此，如果发生这种情况，我想显示一条消息，例如“找不到书”，所以我尝试了这些

```
 <% if @results.empty? %>
 <% if @results.nil? %>
 <% if @results.nil %> 
```

但他们都没有捕捉到错误

控制器

```
def results
results = book_search(params[:search])
@results = results
@book = Book.new
@book.author = results.first["artistName"]
@book.bookname = results.first["trackName"]
@book.image = results.first["artworkUrl100"].gsub("100x100-75.jpg", "200x200-75.jpg")
@book.description = results.first["description"]
end 
```

看法

```
<div class="container">
 <div class="row">
  <div class="span8 offset2">
   <% if @results.nil? %>
    <h1 class="resultTitle">sorry we can't find anything for that book.</h1>
     <%= link_to "Back To Search", root_path, :class => 'backButton' %>
   <% end %>

  <%= @results.first["trackName"] %> <br>
  <img src =<%= @results.first["artworkUrl100"] %>> <br>
  <%= @results.first["artistName"] %> <br>
  <%= truncate(remove_tags(@results.first["description"]), :length => 250) %> <br>

  <%= form_for @book do |f| %>
  <%= f.label :category_id, "Category" %>
  <%= f.collection_select(:category_id, Category.all, :id, :name, :prompt => 'Please select a Category') %>
  <%= f.hidden_field :author %>
  <%= f.hidden_field :bookname %>
  <%= f.hidden_field :image %>
  <%= f.hidden_field :description %>

   <%= f.submit 'Save book' %>
  <% end %>
 </div>
 </div>
 </div> 
```

关于它可能是什么的任何想法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:10:56.987

如果`@results`为 nil，后一个版本将返回 true。您在其他地方还有其他错误。

如果错误仍然出现，那么即使`@results.nil?`返回 true，您也可以访问结果。更具体地说，看看您调用方括号运算符的地方，`[]`因为错误是由其中一个引起的。

编辑：在聊天讨论后，我们发现了问题。首先在控制器 book_search 返回一个空数组，然后在调用`results.first["artistName"]`它时会导致错误，因为 results.first 为 nil。因此，为了解决这个问题，我们在控制器中添加了以下内容：

```
 def results
    results = book_search(params[:search])
    @results = results 
    unless @results.empty?
      @book = Book.new 
      @book.author = results.first["artistName"] 
      @book.bookname = results.first["trackName"] 
      @book.image = results.first["artworkUrl100"].gsub("100x100-75.jpg", "200x200-75.jpg") 
      @book.description = results.first["description"] 
    end
  end 
```

即检查是否只创建一本新书并在找到一本书时设置其属性。现在在视图中，应该添加一个检查以仅渲染视图的其余部分（如果结果不为空，则调用`[]`运算符的部分`@results`。这是使用 else 语句实现的：

```
 <div class="container">
 <div class="row">
  <div class="span8 offset2">
   <% if @results.empty? %>
    <h1 class="resultTitle">sorry we can't find anything for that book.</h1>
     <%= link_to "Back To Search", root_path, :class => 'backButton' %>
   <% else %>  <--- I've putted an else instead of end here!!!

    <%= @results.first["trackName"] %> <br>
    <img src =<%= @results.first["artworkUrl100"] %>> <br>
    <%= @results.first["artistName"] %> <br>
    <%= truncate(remove_tags(@results.first["description"]), :length => 250) %> <br>

    <%= form_for @book do |f| %>
    <%= f.label :category_id, "Category" %>
    <%= f.collection_select(:category_id, Category.all, :id, :name, :prompt => 'Please select a Category') %>
    <%= f.hidden_field :author %>
    <%= f.hidden_field :bookname %>
    <%= f.hidden_field :image %>
    <%= f.hidden_field :description %>

     <%= f.submit 'Save book' %>
    <% end %>
  <%end %> <--- Added an end for the if-else here.
 </div>
 </div>
 </div> 
```

所以我在代码中添加了一个 else 和一个 end 。为什么你需要这样做？好吧，因为即使在执行检查并显示消息之后，页面的其余部分仍然被评估并且这个位：`%= @results.first["trackName"] %> <br>`导致错误。`[]`如果您知道`@results`是空的，则不应尝试致电接线员。新版本在 else 情况下只显示页面的剩余部分，即 if`@results`不为空。

希望这可以说清楚。

# sql-server-2008-r2 - 在 SQL Server 2008 R2 中为备份文件设置密码

> ID：14294092
> 
> 赞同：1
> 
> 时间：2013-01-12T14:08:36.947
> 
> 标签：sql-server-2008-r2, database-backups

有没有办法为 SQL Server 2008 R2 的备份文件设置密码？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:27:02.993

请试试这个，我相信它不再被支持，`SQL Server 2012`所以我无法验证。

```
BACKUP DATABASE [Sandbox] TO  DISK = N'f:\..\Sandbox.bak' 
WITH PASSWORD = 'StackOverflow' 
```

**此密码提供的保护很弱。它旨在防止授权或未经授权的用户使用 SQL Server 工具进行错误还原。不妨碍通过其他方式读取备份数据或更换密码。保护备份的最佳做法是将备份磁带存储在安全位置或备份到受适当访问控制列表 (ACL) 保护的磁盘文件。ACL 应设置在创建备份的根目录上。**

[波尔](http://msdn.microsoft.com/en-us/library/ms186865%28v=sql.105%29.aspx)

# r - 功能行（）不工作

> ID：14294094
> 
> 赞同：-5
> 
> 时间：2013-01-12T14:08:47.473
> 
> 标签：r, plot, lines

我的功能线有问题。

这是我到目前为止所写的：

```
model.ew<-lm(Empl~Wage)

summary(model.ew)

plot(Empl,Wage)

mean<-1:500 

lw<-1:500

up<-1:500

for(i in 1:500){

  mean[i]<-predict(model.ew,data.frame(Wage=i*100),interval="confidence",level=0.90)[1]

  lw[i]<-predict(model.ew,data.frame(Wage=i*100),interval="confidence",level=0.90)[2]

  up[i]<-predict(model.ew,data.frame(Wage=i*100),interval="confidence",level=0.90)[3]

}

plot(Wage,Empl)

lines(mean,type="l",col="red")

lines(up,type="l",col="blue")

lines(lw,type="l",col="blue") 
```

我的问题是我的情节上没有出现任何线条，我不知道为什么。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:32:09.697

您确实需要阅读 R 的一些介绍性手册。转到此页面，然后选择一个说明使用 R 进行线性回归的手册： http: [//cran.r-project.org/other-docs.html](http://cran.r-project.org/other-docs.html)

首先我们需要做一些数据：

```
set.seed(42)
Wage <- rnorm(100, 50)
Empl <- Wage + rnorm(100, 0) 
```

现在我们运行您的回归并绘制线条：

```
model.ew <- lm(Empl~Wage)
summary(model.ew)
plot(Empl~Wage) # Note. You had the axes flipped here 
```

你的第一个问题是你翻转了轴。因变量 (Empl) 在垂直轴上。这就是你在情节上没有得到任何台词的主要原因。要获得预测线根本不需要循环，只需使用 matlines() 进行一次绘图调用：

```
xval <- seq(min(Wage), max(Wage), length.out=101)
conf <- predict(model.ew, data.frame(Wage=xval), 
    interval="confidence", level=.90)
matlines(xval, conf, col=c("red", "blue", "blue")) 
```

这里的所有都是它的。 ![在此处输入图像描述](../Images/1c6fab5c75ad901c9d5bdcdc9b83654f.png)

# database - 识别 Boyce Codd 范式

> ID：14294096
> 
> 赞同：1
> 
> 时间：2013-01-12T14:08:56.820
> 
> 标签：database, database-normalization, functional-dependencies, 3nf, bcnf

我试图弄清楚 3NF 和 BCNF 之间的差异，我想我已经到了那里，但如果有人能提供帮助，那就太好了。

以下是第 3 范式中的一系列关系（从[识别功能依赖关系](https://stackoverflow.com/questions/5773204/identifying-functional-dependencies)中得到帮助，而这些关系又从 Connolly & Begg 的数据库系统中获取）：

```
Client {clientNo(PK), clientName}
Owner {ownerNo(PK), ownerName}
Property {propertyNo (PK), propertyAddress, rent}
ClientRental {clientNo(PK), propertyNo(PK), rentStart, rentFinish, ownerNo(FK)} 
```

每个房产只有一个所有者，客户可以租用这些房产。假设每个房产的租金是固定的。

所以我的问题是：这些也在 BCNF 中吗？

我的预感是 ClientRental 关系不是因为 PropertyNo->ownerNo。所以 PropertyNo 是函数依赖的决定因素，但它不是超键。

我在正确的球场附近吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:06:25.593

表达差异的简短、非正式的方式是，在 BCNF 中，每个函数依赖的每个“箭头”都是候选键中的一个“箭头”。对于在 3NF 中但不在 BCNF 中的关系，除了候选键之外，至少会有一个“箭头”。

[3NF 表的维基百科条目不符合 BCNF](http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form#3NF_tables_not_meeting_BCNF)

一个常见的误解是，您可以标准化为 2NF*且不更高*，然后标准化为 3NF*且不更高*，然后标准化为 BCNF*且不更高*。事实上，修复部分关键依赖关系以达到 2NF 通常会使您保留 5NF 中的所有关系。也就是说，您从 2NF 中的一个关系到 5NF 中的多个关系，而在其间没有停留在 BCNF。

# jquery-ui-tabs - $(...).tabs 不是函数

> ID：14294098
> 
> 赞同：17
> 
> 时间：2013-01-12T14:08:58.080
> 
> 标签：jquery-ui-tabs

我在网站的两页上有此代码，但在一页上该功能不起作用。Firebug 向我展示了“ $(...).tabs 不是函数”。我不明白为什么，谁能告诉我什么是错的？

这是有效的：http: [//www.invat-online.net/variante-rezolva](http://www.invat-online.net/variante-rezolvate)

这不起作用： http: [//www.invat-online.net/variante-explicate-limba-romana/varianta-01](http://www.invat-online.net/variante-explicate-limba-romana/varianta-01)

这是代码：

```
<div id="tabss">
    <ul>
        <li><a href="#SubiectI">Subiect I</a></li>
        <li><a href="#SubiectII">Subiect II</a></li>
        <li><a href="#SubiectIII">Subiect III</a></li>
    </ul>
    <div id="SubiectI">content here</div>
    <div id="SubiectII">content here</div>
    <div id="SubiectIII">content here</div>
</div> 
```

```
$(document).ready(function() {
   $("#tabss").tabs();
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T14:17:23.343

You have relative paths to javascript files:

`javascript/jquery-ui-1.9.2.custom.min.js`

change them to absolute paths because you're using `mod_rewrite` module

`/javascript/jquery-ui-1.9.2.custom.min.js`

In first link the server is looking to the directory

`http://www.invat-online.net/javascript/my_js_file.js` (which exists)

but in the second one the path will be

`http://www.invat-online.net/variante-explicate-limba-romana/javascript/my_js_file.js` which do not exists

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-14T01:39:18.167

就我而言：

我正在使用

```
jquery-ui-1.10.3.minimal.min.js 
```

代替

```
jquery-ui-1.10.3.custom.min.js 
```

最小版本不包括 ui.tabs.js，因此没有 ui.tabs 功能。希望这对其他人有帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-12T14:18:16.223

The issue is that the jQuery UI js and css is not loading.

Try changing the path in you `<script>` tags to either the directory above `../javascript` or the website root `/javascript`.

```
<script src="/javascript/head.min.js"></script>
<script src="/javascript/jquery-ui-1.9.2.custom.min.js"></script>
<link href="/stylesheets/smoothness/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T14:18:24.037

Your first demo loads:

```
http://www.invat-online.net/javascript/jquery-ui-1.9.2.custom.min.js 
```

Your second demo attempts to load:

```
http://www.invat-online.net/variante-explicate-limba-romana/javascript/jquery-ui-1.9.2.custom.min.js 
```

The last one results in a 404\. You should correct the path of the later, perhaps instructing it to find jQuery UI in one directory above the current: `../jquery-ui-1.9.2.custom.min.js`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-25T19:50:20.730

尝试这个：

```
@section scripts{
$(document).ready(function() {
    $("#tabss").tabs();
});
} 
```

放入你`@Scripts.Render("~/bundles/jqueryui")`的`<body></body>`layout.cshtml

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-28T11:21:41.797

检查您的页面，您可能已经加载了多个版本的 jQuery

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-08T15:48:04.207

`Uncaught TypeError: $(...).tabs is not a function`在管理区域的 Django 项目中并在以下设置下使用 django-tabbed-admin 时，也可能会产生该错误：

*   姜戈 = 1.10.5
*   django-tabbed-admin=1.0.4
*   DEFAULT_JQUERY_UI_JS = 'tabbed_admin/js/jquery-ui-1.11.4.min.js'

问题是这个 Django 库的 jquery-ui-1.11.4.min.js 中的代码如下：

```
 /*! jQuery UI - v1.11.4 - 2015-07-27
    (...)*/
    jQuery = jQuery || django.jQuery.noConflict(false); 
```

django-tabbed-admin 上的代码以这种方式使用它（change_form.html）：

```
 <script type="text/javascript">
        (function($) {
            $(window).scrollTop()
            $('#tabs').tabs({
                {% if add %}
                // when adding, don't select a tab by default, we'll do it ourselves
                // by finding the first available tab.
                selected: -1
                {% endif %}
            });
        (....)
        })(django.jQuery);
    </script>
    <!-- end admin_tabs stuff --> 
```

为了解决这个问题，这应该是传递给 IIFE 而不是上面的 (django.jQuery) 的内容：

```
<script type="text/javascript">
        (function($) {
            (....)
        })((typeof window.jQuery == 'undefined' && typeof window.django != 'undefined')
  ? django.jQuery
  : jQuery)
    </script>
    <!-- end admin_tabs stuff --> 
```

我已经在项目中[报告](https://github.com/omji/django-tabbed-admin/issues/35)了这个问题，并创建了一个带有修复程序的[PR 。](https://github.com/omji/django-tabbed-admin/pull/36)等待它被批准，所以同时你可以按照我的简单修复对其进行排序。

我希望这可以帮助那里的人。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-25T15:08:42.603

我遇到了同样的问题，我意识到我的 jquery 和 bootstrap css 导入相互冲突。查看您已导入的那些并将这些导入减少到最低限度，看看哪个是冲突的。

这里有一个如何实现它的例子，我拿了那个例子并工作了，然后我适应了我的应用程序：

对于 jquery 1.9（点击**查看源**代码查看代码） [http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

对于 jquery 1.8（查看页面末尾的示例） [http://api.jqueryui.com/1.8/tabs/](http://api.jqueryui.com/1.8/tabs/)

希望能帮助到你！

# ssl - 使用heroku sslenpoint时，网站每天在特定时间段关闭

> ID：14294105
> 
> 赞同：1
> 
> 时间：2013-01-12T14:09:39.493
> 
> 标签：ssl, heroku

我的应用程序只能在每天下午 6 点至凌晨 2 点（格林威治标准时间 + 7）的时间段内访问，其他时间很好。

我将 SSL Endpoint 添加到应用程序，并将域点的 CNAME 配置为 .herokussl.com。

请有任何建议。

谢谢，-黄

# sql - 如何在 IBM DB2 中将 SELECT 放入触发器中

> ID：14294108
> 
> 赞同：3
> 
> 时间：2013-01-12T14:09:45.393
> 
> 标签：sql, sqlite, db2

我希望我的数据库在每次插入新行时都显示该表。我的代码能够编译，但在我插入新行后它不显示表格。

下面是我的代码：

```
create trigger show_all                                                                       
after insert ON Toy                                                                           
for each row mode db2sql                                                                      
select * from Toy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:09:54.313

这是不可能的。

触发器不会向导致触发器触发的语句（插入）返回值。此外，这种行为甚至是不可能的，因为多个触发器可以响应插入而触发，这会返回一些东西？

您可以创建一个执行插入然后返回选择结果的存储过程，然后调用该函数而不是直接插入。

# c++ - 错误 C2678：二进制“！=”：未找到运算符

> ID：14294116
> 
> 赞同：1
> 
> 时间：2013-01-12T14:11:32.327
> 
> 标签：c++, visual-c++, operator-overloading

**完整的错误信息：**

```
Error   1   error C2678: binary '!=' : no operator found which takes a left-hand operand of type 'const std::_List_iterator<_Mylist>' (or there is no acceptable conversion)    c:\ebooks\sourcecode\programing_game_ai_by_example\buckland_sourcecode\vs8 projects\buckland_chapter3-steering behaviors\path.h 54  1   Steering 
```

我对 [V]C++ 世界很陌生。我正在阅读通过示例书籍编程游戏 AI，并尝试研究/分析出版商网站上提供的[源代码。](http://www.jblearning.com/catalog/9781556220784/#ctl00_mainContent_pnlShowSamples2)

似乎整个源代码都是用 VS8 编写的，但我使用的是 VS12 Express 版本。项目转换似乎没有问题，预计所有项目都会收到 4 个警告（见下文）。

但问题是我遇到了一个编译错误，在我看来，我所拥有的基本知识是强类型列表的**运算符重载**，但我不确定它是否属实，如果它属实，我不知道如何修复它.

错误＃1的代码行：

```
Vector2D    CurrentWaypoint()const{assert(curWaypoint != NULL); return *curWaypoint;} 
```

问题变量的声明：

```
std::list<Vector2D>::iterator  curWaypoint; 
```

包含构造函数的扩展代码片段：

```
//constructor for creating a path with initial random waypoints. MinX/Y
  //& MaxX/Y define the bounding box of the path.
  Path(int    NumWaypoints,
       double MinX,
       double MinY,
       double MaxX,
       double MaxY,
       bool   looped):m_bLooped(looped)
  {
    CreateRandomPath(NumWaypoints, MinX, MinY, MaxX, MaxY);

    curWaypoint = m_WayPoints.begin();
  }

  //returns the current waypoint
  Vector2D    CurrentWaypoint()const{assert(curWaypoint != NULL); return *curWaypoint;}

  //returns true if the end of the list has been reached
  bool        Finished(){return !(curWaypoint != m_WayPoints.end());} 
```

现在我不确定在此之后去哪里，但列表和迭代器定义在[WindowsUtils.h](http://pastebin.com/gcudre2Q)文件中。

我没有粘贴相同的剩余错误，但是您可以在[此处访问整个 Path.h 文件](http://pastebin.com/kN4jrTwF)

有人可以告诉我如何解决这个问题吗？我总是害怕 c++，尤其是 vc++，但是如果有人指导我问题是什么并解决它，我可以自己修复它

**错误**

```
Error   1   error C2678: binary '!=' : no operator found which takes a left-hand operand of type 'const std::_List_iterator<_Mylist>' (or there is no acceptable conversion)    c:\ebooks\sourcecode\programing_game_ai_by_example\buckland_sourcecode\vs8 projects\buckland_chapter3-steering behaviors\path.h 54  1   Steering
Error   2   error C2678: binary '!=' : no operator found which takes a left-hand operand of type 'const std::_List_iterator<_Mylist>' (or there is no acceptable conversion)    c:\ebooks\sourcecode\programing_game_ai_by_example\buckland_sourcecode\vs8 projects\buckland_chapter3-steering behaviors\path.h 54  1   Steering
Error   3   error C2678: binary '!=' : no operator found which takes a left-hand operand of type 'const std::_List_iterator<_Mylist>' (or there is no acceptable conversion)    c:\ebooks\sourcecode\programing_game_ai_by_example\buckland_sourcecode\vs8 projects\buckland_chapter3-steering behaviors\path.h 54  1   Steering
Error   4   error C2678: binary '!=' : no operator found which takes a left-hand operand of type 'const std::_List_iterator<_Mylist>' (or there is no acceptable conversion)    c:\ebooks\sourcecode\programing_game_ai_by_example\buckland_sourcecode\vs8 projects\buckland_chapter3-steering behaviors\path.h 54  1   Steering
    5   IntelliSense: no operator "!=" matches these operands
            operand types are: const std::_List_iterator<std::_List_val<std::_List_simple_types<Vector2D>>> != int  c:\eBooks\SourceCode\programing_game_ai_by_example\Buckland_SourceCode\VS8 projects\Buckland_Chapter3-Steering Behaviors\Path.h 54  38  Steering 
```

以防万一这很重要，下面是我为本书源代码中的每个项目保留的警告

**常见的解决方案转换警告：** （注：与上述不同的项目）

```
Conversion Report - WestWorld1.vcproj: 
Converting project file 'C:\eBooks\SourceCode\programing_game_ai_by_example\Buckland_SourceCode\VS8 projects\Buckland_Chapter2-State Machines\WestWorld1\WestWorld1.vcproj'. 
Web deployment to the local IIS server is no longer supported. The Web Deployment build tool has been removed from your project settings. 
Done converting to new project file 'C:\eBooks\SourceCode\programing_game_ai_by_example\Buckland_SourceCode\VS8 projects\Buckland_Chapter2-State Machines\WestWorld1\WestWorld1.vcxproj'. 
This application has been updated to include settings related to the User Account Control (UAC) feature of Windows Vista. By default, when run on Windows Vista with UAC enabled, this application is marked to run with the same privileges as the process that launched it. This marking also disables the application from running with virtualization. You can change UAC related settings from the Property Pages of the project. 
VCWebServiceProxyGeneratorTool is no longer supported. The tool has been removed from your project settings. 
MSB8012: $(TargetPath) ('C:\eBooks\SourceCode\programing_game_ai_by_example\Buckland_SourceCode\VS8 projects\Buckland_Chapter2-State Machines\WestWorld1\.\Debug\WestWorld1.exe') does not match the Linker's OutputFile property value '.\Debug/WestWorld1.exe' ('C:\eBooks\SourceCode\programing_game_ai_by_example\Buckland_SourceCode\VS8 projects\Buckland_Chapter2-State Machines\WestWorld1\Debug/WestWorld1.exe') in project configuration 'Debug|Win32'. This may cause your project to build incorrectly. To correct this, please make sure that $(TargetPath) property value matches the value specified in %(Link.OutputFile). 
MSB8012: $(TargetPath) ('C:\eBooks\SourceCode\programing_game_ai_by_example\Buckland_SourceCode\VS8 projects\Buckland_Chapter2-State Machines\WestWorld1\.\Release\WestWorld1.exe') does not match the Linker's OutputFile property value '.\Release/WestWorld1.exe' ('C:\eBooks\SourceCode\programing_game_ai_by_example\Buckland_SourceCode\VS8 projects\Buckland_Chapter2-State Machines\WestWorld1\Release/WestWorld1.exe') in project configuration 'Release|Win32'. This may cause your project to build incorrectly. To correct this, please make sure that $(TargetPath) property value matches the value specified in %(Link.OutputFile). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:19:06.280

您无法将迭代器与 NULL 进行比较，这就是您得到这些错误的原因。据我所知，除非您将其设置为某物，否则无法检查是否和迭代器指向某物。将其设置`end()`为 NULL 迭代器（因为 end() 是容器中最后一个元素之后的元素，因此它基本上没有指向任何内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:22:05.923

比较一个`iterator`无效`NULL`：

```
assert(curWaypoint != NULL); 
```

我没有查看您的所有代码，但也许您的意思是将其与以下内容进行比较`end()`：

```
assert(curWaypoint != m_WayPoints.end()); 
```

您在构造函数中进行初始化`curWaypoint`，因此这应该可以按您的意愿工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:01:22.480

我的原始源代码副本与您的略有不同...

```
 //returns the current waypoint
  Vector2D    CurrentWaypoint()const{assert(*curWaypoint != NULL); return *curWaypoint;} 
```

TBL: In the copy of the code that I have, it is not testing the iterator, but it is testing what the iterator is pointing at. Unfortunately, I am getting the same error that you are.

# sublimetext2 - Sublime Linter not working in Windows

> ID：14294119
> 
> 赞同：9
> 
> 时间：2013-01-12T14:11:57.630
> 
> 标签：sublimetext2

As the title says.
The linter doesnt seem to work at all for me in Windows. I have tried it with javascript and php files with the correct syntax set.
Im following Jeffery Ways tutorial here -> [https://tutsplus.com/lesson/sublime-linter/](https://tutsplus.com/lesson/sublime-linter/)

I have installed package control, SublimeLinter and nothing, removed it installed sublimelinter beta and nothing too.

Any help please

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T02:02:33.370

来自[SublimeLinter 的 github 页面](https://github.com/SublimeLinter/SublimeLinter)：

“如果您打算编辑使用基于 Javascript 的 linter（Javascript、CSS）的文件，您的系统必须安装 Javascript 引擎……在 Windows 上，您必须安装 Javascript 引擎 Node.js，它可以从Node.js 网站。”

[节点.js](http://nodejs.org/)

像普通的 Windows 应用程序一样安装它。关闭 Sublime 并重新启动。棉绒应该起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T02:46:16.890

您需要将 SublimeLinter 指向 SublimeLinter.sublime-settings 中的 PHP 可执行文件。

更改此选项：

```
"sublimelinter_executable_map":
{
    "php": "C:\\wamp\\bin\\php\\php5.3.13\\php.exe"
}, 
```

编辑：

请参阅此链接以获取更多帮助

[http://fuzzytolerance.info/blog/2012/05/14/2012-05-15-getting-sublimelinter-running-on-windows/](http://fuzzytolerance.info/blog/2012/05/14/2012-05-15-getting-sublimelinter-running-on-windows/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-10T02:01:16.070

为了获得 SublimeLint linting js 文件，我必须按照此处的说明安装这个附加插件：

（我不需要遵循“Linter 配置”步骤）

[https://github.com/SublimeLinter/SublimeLinter-jshint#linter-installation](https://github.com/SublimeLinter/SublimeLinter-jshint#linter-installation)

# gcc - 如何在 NASM 中编写 GRUB stage1.S？

> ID：14294121
> 
> 赞同：3
> 
> 时间：2013-01-12T14:12:19.027
> 
> 标签：gcc, assembly, operating-system, nasm, bootloader

我正在尝试使用 NASM 和 gcc 编写多阶段引导加载程序。为此，我指的是 grub 引导加载程序源。

我已经写了一个 stage1 加载器，但是一直在写 MBR 的分区表。

在 grub stage1.S 中，他们使用这样的代码来跳过分区表：

```
. = _start + STAGE1_PARTEND
.word   STAGE1_SIGNATURE 
```

我怎样才能在 NASM 中做到这一点？

使用时间它会覆盖分区表。

所以请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:40:57.477

> 为 赋值。被视为与 .org 指令相同

（见此[页](http://tigcc.ticalc.org/doc/gnuasm.html#SEC49)）。

因此，您粘贴的代码将[当前原点](http://tigcc.ticalc.org/doc/gnuasm.html#SEC112)更改为`_start + STAGE1_PARTEND`并在其中放置一个带有该值的单词`STAGE1_SIGNATURE`。

因此，在 NASM 代码中，您应该能够执行以下操作：

```
fill: times _start+STAGE1_PARTEND-$ db 0
dw    STAGE1_SIGNATURE
                     ; .word is 16 bits on x86 (regardless of .code16 / .code64) 
```

另请参阅NASM 手册中的[此示例](http://www.nasm.us/doc/nasmdo12.html#section-12.1.3)，该示例显示了如何以这种方式填充 BIOS 引导扇区，以替代 MASM 样式`org`或 GAS 样式`. = new_position`，实际在平面二进制输出文件中查找和填充填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-25T17:36:50.020

```
times STAGE1_PARTEND-($-_start) db 0
dw STAGE1_SIGNATURE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:53:10.807

对，Nasm 将只接受一个“org”指令。Nasm 相当于“。” 是“$”，但我认为这对你也没有帮助。我手头没有 GRUB 代码，否则我会看。分区表“从何而来”？如果它是从磁盘读取的，则可能已经存在签名（？）。也许您可以在覆盖分区表之前简单地“停止”Nasm 代码并保留现有的签名？Nasm 几乎可以“做任何你想做的事”，但这可能是个例外。它不会像（G）一样“移动”（跳过）并在一个新的地方组装更多，就像在这里所做的那样——至少不容易。我可能需要下载 GRUB 代码来找出解决方法。可能像...

 `````
; stage1 code
; possible padding here?
%incbin "partition_table.bin"
dw (SIG) ; if not part of the .bin code? 
```` 

`... 或者其他的东西。``

# php - getMock - 同一类的多个实例

> ID：14294123
> 
> 赞同：1
> 
> 时间：2013-01-12T14:12:31.027
> 
> 标签：php, phpunit

如果我有一个与 B 类交互的 A 类，那么在我的测试中我想模拟 B 类，以便我可以单独测试 A 类。

这很容易在 PHPUnit 中使用`"getMock('classname')"`.

我目前的问题是：如果`class A`使用多个实例，`class B`我无法模拟它，`"getMock('B')"`因为如果多次调用它似乎`"getMock"`不会返回多个实例，但总是相同的模拟`class B`。

**以下示例：**

```
<?php

class A()
{
    private class_b_1;
    private class_b_2;

    public function setClassB1(B $class_b)
    {
        $this->class_b_1 = $class_b;
    }

    public function setClassB2(B $class_b)
    {
        $this->class_b_2 = $class_b;
    }   
} 
```

在我的测试中：

```
$mock_one_of_class_b = $this -> getMock('B');
$mock_two_of_class_b = $this -> getMock('B'); 
```

然后`$mock_one_of_class_b`是与 相同的对象`$mock_two_of_class_b`。

如何模拟一个类的多个实例`PHPUnit`？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:30:07.137

实际上，该`getMock`方法创建了模拟类的不同实例。看看这个例子：

```
class Foo
{
    protected $value;

    public function setValue($value)
    {
        $this->value = $value;
    }

    public function getValue()
    {
        return $this->value;
    }
} 
```

现在我们为它创建测试：

```
class FooTest extends \PHPUnit_Framework_TestCase 
{
    public function testFoo()
    {
        $a = $this->getMock('Foo', array('someNonExistingMethod'));
        $b = $this->getMock('Foo', array('someNonExistingMethod'));

        $a->setValue(1);
        $b->setValue(234);

        $this->assertEquals(1, $a->getValue(), 'This test will fail if "a" and "b" objects are the same');
    }
} 
```

注意`getMock`方法中的第二个参数。在那个论点中，你告诉`phpunit`哪些方法将被模拟。如果您根本不传递任何参数 - 然后`phpunit`假设您想要模拟对象中的所有方法。所以，如果你通过了，`array('someNonExistingMethod')`那么就不会有任何模拟方法（并且“真正的”方法将在调用时被调用）。

# c++ - Using Boost (Spirit) with g++ (and later Eclipse)

> ID：14294127
> 
> 赞同：0
> 
> 时间：2013-01-12T14:12:43.807
> 
> 标签：c++, eclipse, boost, g++, boost-spirit

How can I configure g++ to use boost libraries? I Googled and tried many combinations but failed. I managed to get it working a few weeks ago ...

```
g++ test.cpp -o test -lboost
g++ test.cpp -o test -lboost_spirit 
```

And afew with -I and -L flags ... but I always get

```
/usr/bin/ld: cannot find -lboost
collect2: error: ld returned 1 exit status 
```

Am on Arch Linux. I will also like to know how to use Boost with Eclipse ... Looks like boost should have installed correctly?

```
[jiewmeng@JM-LAPTOP ~]$ ls /usr/include/boost/
accumulators                  move
algorithm                     mpi
aligned_storage.hpp           mpi.hpp
any.hpp                       mpl
archive                       msm
array.hpp                     multi_array
asio                          multi_array.hpp
asio.hpp                      multi_index
assert.hpp                    multi_index_container.hpp
assign                        multi_index_container_fwd.hpp
assign.hpp                    next_prior.hpp
bimap                         non_type.hpp
bimap.hpp                     noncopyable.hpp
bind                          nondet_random.hpp
bind.hpp                      none.hpp
blank.hpp                     none_t.hpp
blank_fwd.hpp                 numeric
call_traits.hpp               operators.hpp
cast.hpp                      optional
cerrno.hpp                    optional.hpp
checked_delete.hpp            parameter
chrono                        parameter.hpp
chrono.hpp                    pending
circular_buffer               phoenix
circular_buffer.hpp           phoenix.hpp
circular_buffer_fwd.hpp       pointee.hpp
compatibility                 pointer_cast.hpp
compressed_pair.hpp           pointer_to_other.hpp
concept                       polygon
concept_archetype.hpp         pool
concept_check                 preprocessor
concept_check.hpp             preprocessor.hpp
config                        program_options
config.hpp                    program_options.hpp
container                     progress.hpp
crc.hpp                       property_map
cregex.hpp                    property_tree
cstdint.hpp                   proto
cstdlib.hpp                   ptr_container
current_function.hpp          python
date_time                     python.hpp
date_time.hpp                 random
detail                        random.hpp
dynamic_bitset                range
dynamic_bitset.hpp            range.hpp
dynamic_bitset_fwd.hpp        ratio
enable_shared_from_this.hpp   ratio.hpp
exception                     rational.hpp
exception.hpp                 ref.hpp
exception_ptr.hpp             regex
filesystem                    regex.h
filesystem.hpp                regex.hpp
flyweight                     regex_fwd.hpp
flyweight.hpp                 scope_exit.hpp
foreach.hpp                   scoped_array.hpp
foreach_fwd.hpp               scoped_ptr.hpp
format                        serialization
format.hpp                    shared_array.hpp
function                      shared_container_iterator.hpp
function.hpp                  shared_ptr.hpp
function_equal.hpp            signal.hpp
function_output_iterator.hpp  signals
function_types                signals.hpp
functional                    signals2
functional.hpp                signals2.hpp
fusion                        smart_ptr
generator_iterator.hpp        smart_ptr.hpp
geometry                      spirit
geometry.hpp                  spirit.hpp
get_pointer.hpp               statechart
gil                           static_assert.hpp
graph                         strong_typedef.hpp
heap                          swap.hpp
icl                           system
implicit_cast.hpp             test
indirect_reference.hpp        thread
integer                       thread.hpp
integer.hpp                   throw_exception.hpp
integer_fwd.hpp               timer
integer_traits.hpp            timer.hpp
interprocess                  token_functions.hpp
intrusive                     token_iterator.hpp
intrusive_ptr.hpp             tokenizer.hpp
io                            tr1
io_fwd.hpp                    tuple
iostreams                     type.hpp
is_placeholder.hpp            type_traits
iterator                      type_traits.hpp
iterator.hpp                  typeof
iterator_adaptors.hpp         units
lambda                        unordered
last_value.hpp                unordered_map.hpp
lexical_cast.hpp              unordered_set.hpp
limits.hpp                    utility
local_function                utility.hpp
local_function.hpp            uuid
locale                        variant
locale.hpp                    variant.hpp
logic                         version.hpp
make_shared.hpp               visit_each.hpp
math                          wave
math_fwd.hpp                  wave.hpp
mem_fn.hpp                    weak_ptr.hpp
memory_order.hpp              xpressive 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:28:17.757

没有 boost 库，也没有要链接的 boost_spirit 库。Spirit 是一个只有头文件的库，你只需要设置你的 boost 安装的包含路径。在 Linux 系统上，它通常安装在`/usr/include`默认设置下，因此您甚至不需要这样做。

要在 Arch Linux 上获得提升：

```
pacman -S boost boost-libs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:25:55.723

从[仅标题库](http://www.boost.org/doc/libs/1_35_0/more/getting_started/unix-variants.html#header-only-libraries)

> 唯一必须单独构建的 Boost 库是：
> 
> Boost.文件系统
> 
> Boost.IOStreams
> 
> Boost.ProgramOptions
> 
> Boost.Python（在构建和安装之前请参阅 Boost.Python 构建文档）
> 
> 升压正则表达式
> 
> Boost.序列化
> 
> 升压信号
> 
> Boost.Thread
> 
> 升压波
> 
> 一些库具有可选的单独编译的二进制文件：
> 
> Boost.DateTime 有一个二进制组件，仅当您使用其 to_string/from_string 或序列化功能，或者您的目标是 Visual C++ 6.x 或 Borland 时才需要该组件。
> 
> Boost.Graph 还有一个二进制组件，仅当您打算解析 GraphViz 文件时才需要它。
> 
> Boost.Test 可以在“仅头文件”或“单独编译”模式下使用，但建议在严重使用时单独编译。

您可能应该将环境变量设置为包含所需的路径。

# url - 我正在尝试制作链接缩短器，但出现错误

> ID：14294134
> 
> 赞同：0
> 
> 时间：2013-01-12T14:13:26.427
> 
> 标签：url, batch-file, cmd

我有一个错误“url 未被识别为内部或外部命令”，这是我的代码

```
@echo off
set /p firstline=<qwe.txt
echo %firstline%
for %%a in (%firstline%) DO (
echo & set text=http://adfoc.us/api/?key=c803bc5b2f2e8ad5ccb0166d4bc898ae&url=%%a
)
echo %text% > output.txt
pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:35:35.610

url 中的特殊字符`&`需要转义`^`或将特殊字符放在带引号的字符串`set text="One&Two"`中。此外，该 echo 语句在 set 语句之前什么也不做。

```
@echo off
set /p firstline=<qwe.txt
echo %firstline%
for %%a in (%firstline%) DO (
    set "text=http://adfoc.us/api/?key=c803bc5b2f2e8ad5ccb0166d4bc898ae^&url=%%a"
)
echo %text%>output.txt
pause 
```

# rest - 如何使用 System.Web.Http.OData.Delta 修补可枚举？

> ID：14294136
> 
> 赞同：5
> 
> 时间：2013-01-12T14:13:54.447
> 
> 标签：rest, asp.net-web-api, odata

试图利用[System.Web.Http.OData.Delta](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)在 ASP.NET Web API 服务中实现[PATCH](https://www.rfc-editor.org/rfc/rfc5789)方法，但似乎无法将更改应用于 type 的属性`IEnumerable<T>`。我正在使用 Delta 的最新 Git 版本（2012.2-rc-76-g8a73abe）。有没有人能够完成这项工作？

考虑这种数据类型，它应该可以在对 Web API 服务的 PATCH 请求中更新：

```
public class Person
{
    HashSet<int> _friends = new HashSet<int>();

    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public IEnumerable<int> Friends
    {
        get { return _friends; }
        set
        {
            _friends = value != null ? new HashSet<int>(value) : new HashSet<int>();
        }
    }

    public Person(int id, string firstName, string lastName)
    {
        Id = id;
        FirstName = firstName;
        LastName = lastName;
    }

    public Person()
    {
    }
} 
```

此 Web API 方法通过以下方式实现对 Person 的修补`Delta<Person>`：

```
public void Patch(int id, Delta<Person> delta)
{
    var person = _persons.Single(p => p.Id == id);
    delta.Patch(person);
} 
```

如果我向服务发送带有以下 JSON 的 PATCH 请求，`Friends`则应更新此人的属性，但可惜不会发生：

```
{"Friends": [1]} 
```

问题的关键在于如何`Friends`用这些数据让 Delta 更新。另请参阅[CodePlex 上的讨论](http://aspnetwebstack.codeplex.com/discussions/429382)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:42:55.290

问题可能是 Deta 会尝试将 JSON 分配`JArray`给您的`Hashset<int>`

如果您对 JsonMEdiaTypeFormatter 使用它并且您内化了 Delta 代码（意味着您可以修改它），您必须做这样的事情（这很粗糙，但有效）：

在里面， `bool TrySetPropertyValue(string name, object value)`of `Delta<T>`，它返回 false 的地方：

```
 if (value != null && !cacheHit.Property.PropertyType.IsPrimitive && !isGuid && !cacheHit.Property.PropertyType.IsAssignableFrom(value.GetType()))
        {
           return false;
        } 
```

改成：

```
var valueType = value.GetType();
var propertyType = cacheHit.Property.PropertyType;
if (value != null && !propertyType.IsPrimitive && !propertyType.IsAssignableFrom(valueType))
{
    var array = value as JArray;
    if (array == null)
        return false;

    var underlyingType = propertyType.GetGenericArguments().FirstOrDefault() ??
        propertyType.GetElementType();
    if (underlyingType == typeof(string))
    {
        var a = array.ToObject<IEnumerable<string>>();
        value = Activator.CreateInstance(propertyType, a);
    }
    else if (underlyingType == typeof(int))
    {
        var a = array.ToObject<IEnumerable<int>>();
        value = Activator.CreateInstance(propertyType, a);
    }
    else
        return false;
} 
```

这仅适用于集合`int`或`string`但希望将您推向一个好的方向。

例如，现在您的模型可以具有：

```
public class Team {
        public HashSet<string> PlayerIds { get; set; }
        public List<int> CoachIds { get; set; }
    } 
```

您将能够成功更新它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T10:45:50.247

您可以覆盖[Delta](https://msdn.microsoft.com/en-us/library/system.web.odata.delta(v=vs.118).aspx)`TrySetPropertyValue`类的方法并使用[JArray](http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Linq_JArray.htm)类：

```
public sealed class DeltaWithCollectionsSupport<T> : Delta<T> where T : class
{
    public override bool TrySetPropertyValue(string name, object value)
    {
        var propertyInfo = typeof(T).GetProperty(name);

        return propertyInfo != null && value is JArray array
            ? base.TrySetPropertyValue(name, array.ToObject(propertyInfo.PropertyType))
            : base.TrySetPropertyValue(name, value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:14:48.823

如果您使用的是 ODataMediaTypeFormatter，这应该可以工作。不过，有几点需要注意。1）您的收藏品必须是可设置的。2）整个集合被替换。您不能删除/添加单个元素。

此外，还有一个问题跟踪项目 1 - ['670 - Delta 应该支持不可设置的集合。](https://aspnetwebstack.codeplex.com/workitem/670)

# php - 如何从网站获取客户端系统信息？

> ID：14294140
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:14:00.327
> 
> 标签：php, web-applications, benchmarking

> **可能重复：**
> [如何通过 Java 获取系统/硬件信息？](https://stackoverflow.com/questions/4704073/how-can-i-get-system-hardware-info-via-java)

我正在用 PHP 做一个网站。
需要的功能之一是获取有关客户端 pc 的信息。
例如 ram..graphic card..etc..
为什么你会说？
我将在我的网站上提供游戏下载..
所以我需要为客户提供一种方法来测试游戏是否可以在他的机器上运行
那么有没有办法我可以做到这一点..？

我知道有一个网站会做这样的事情：[Canyourunit](http://www.systemrequirementslab.com/cyri)
需要做这样的事情......一个简单的会很好

编辑：是否有任何插件，库？

谢谢 :) 最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:18:37.757

This is not possible with PHP, JavaScript or anything like that. Even Flash doesn't allow this. You could try to create a Java Applet, i think Java is able to get some system properties. Have a look at this: [How can I get system/hardware info via Java?](https://stackoverflow.com/questions/4704073/how-can-i-get-system-hardware-info-via-java)

# c# - 字符串末尾数字的正则表达式？

> ID：14294154
> 
> 赞同：2
> 
> 时间：2013-01-12T14:15:32.937
> 
> 标签：c#, .net, regex, numbers

我想知道一个字符串是否以数字结尾（带/不带小数）。如果它结束，我想提取它。

```
"Test1" => 1
"Test"  => NOT FOUND
"Test123" => 123
"Test1.1" => 1.1 
```

我错过了一些细节。
1\. 在数字之前，字符串也可以包含特殊字符
2\. 它是单行，而不是多行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T14:20:41.067

试试这个模式，

```
\d+(\.\d+)?$ 
```

具有[非捕获组](https://stackoverflow.com/questions/3512471/what-is-a-non-capturing-group-in-regular-expressions)的版本：

```
\d+(?:\.\d+)?$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T14:32:00.573

匹配行开头、之后的任何字符和字符串末尾的数字（带有可选的小数部分）（允许尾随空格字符）。第一部分是惰性匹配，即它将匹配可能的最少字符数，将整数留给表达式的最后一部分。

```
^.*?(\d+(?:[.,]\d+)?)\s*$ 
```

我的测试用例

```
"Test1
"Test
"Test123
"Test1.1
test 1.2 times 1 is 1.2
test 1.2 times 1 is ?
test 1.2 times 1 is 134.2234
1.2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T18:27:03.763

在 c# 中使用以下正则表达式`(\d+)$`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T14:18:52.673

A regex for a string that ends with a number: `@"\d$"`. Use [http://regexpal.com/](http://regexpal.com/) to try out regexes.

Of course, that just tells you that the last character is a number. It doesn't capture anything other than the last character. To capture the number only this is needed: `@"\d*\.?\d+$"`.

If your string can be more complicated, eg "Test1.2 Test2", and you want both numbers: `@"\d*\.?\d+\b"`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T14:18:40.140

use this regex `[a-zA-Z]+\d+([,.]\d+)?\b$` if you want digit only use this one `(?<=[a-zA-Z]+)\d+([,.]\d+)?\b$`

# java - 如何使用随机访问文件将数据保存到文本文件中，然后更新这些数据？

> ID：14294155
> 
> 赞同：-2
> 
> 时间：2013-01-12T14:15:38.100
> 
> 标签：java, randomaccessfile

我很困惑如何保存我的数据，例如我有（学生 ID，姓名，姓氏）唯一的学生 ID 是整数，我想在按下（添加按钮）时将这些数据保存到文本文件，然后我想更新这些按下（UpdateButton）时的数据，数据被保存，但每次保存的数据出现在文件中时，我都使用向量数组，当按下（UpdateButton）时，数据不会返回到我的TextField进行更新.

```
 class BtnListenerAdd implements ActionListener{
 public void actionPerformed(ActionEvent a) {

        if (a.getSource()==btnAdd){
            Student s=new Student(tfname.getText(),tfsurname.getText());
            s.number=Integer.parseInt(tfno.getText());
            myVector.add(s);
               //System.out.println(s);

            try{
                java.io.RandomAccessFile raf =
                               new java.io.RandomAccessFile("e:\\random.txt", "rw");

                    for (int i = 0; i < myVector.size(); i++) {
                      raf.writeChars(myVector.toString());
                    }

                    raf.seek(0);
                    while (raf.getFilePointer() < raf.length()) {
                      System.out.println(raf.readChar());
                    }

                raf.close();
            }catch(Exception e){
                System.out.println( e.toString() );
            }
        }

        if (a.getSource()==btnList){
            ta1.setText("");
            for (Student s : myVector) {
                ta1.append(s.toString()+ "\n"); 
            }
        }           
        }

     }

  class BtnListenerUpdate implements ActionListener{

    public void actionPerformed(ActionEvent s) {

        if (s.getSource()==btnUpdate){
            Student l=new Student(tfname.getText(),tfsurname.getText());
            l.number=Integer.parseInt(tfno.getText());
            myVector.add(l);

            try{
                java.io.RandomAccessFile raf = 
                              new java.io.RandomAccessFile("e:\\random.txt", "rw");

                for(int i=0; i <myVector.size(); i++) {
                    raf.writeChar(myVector.size());
                }

                raf.seek(0);
               int no= raf.readInt();
               tfno.setText(no +  "");
               System.out.println(no);

               String nam = "";
                for(int x=0; x<50; x++){
                    nam += raf.readChar();
                }

                nam = "";
                for(int x=0; x<50; x++){
                    nam += raf.readChar();
                }

            }catch(Exception e){
                System.out.println( e.toString() );
            }
        }

    }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:21:11.513

您应该使用`FileOutputStream(File file, boolean append)`能够以附加模式将流初始化到文件的构造函数，从而将数据附加到文件末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:36:23.470

您不应该使用 RandomAccessFile 来存储文本。相反，它应该用于存储等长的记录。如果您想要做的只是将文本*附加*到文本文件的末尾，那么按照@Jack 在他的回答中建议的那样做 - 附加到文件（对他来说是 1+）。

我自己，我会使用 FileWriter，并将构造函数的 append 布尔参数设置为 true（类似于 Jack 向您展示的方式），并将其包装在 BufferedWriter 中，可能由 PrintWriter 包装。然后你可以使用`println(...)`.

此外，括号可能在您的输出中，因为您告诉他们在那里。`toString()`Student 的方法是什么样的？有些东西告诉我它输出括号。从那种方法中摆脱它们。

# vb.net - 如何获取当前时间戳

> ID：14294156
> 
> 赞同：7
> 
> 时间：2013-01-12T14:15:42.857
> 
> 标签：vb.net, datetime

我正在连接到一个 API，其中一个参数是 Long *（13 位）*来保存`timestamp`VB.Net 中的电流，它表示从`0:00:00 01.01.1970 in GMT`到当前时间经过的毫秒数。

格式应该是这样的`1290932238757`

我试过这个语法：

```
DirectCast((Datetime.Now - New DateTime(1970, 1, 1)).TotalMilliseconds, Int64) 
```

但输出是：

```
01/12/2013 02:06:24 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T14:37:13.417

如果我理解正确，这行得通吗？

```
Dim milliseconds = CLng(DateTime.UtcNow.Subtract(New DateTime(1970, 1, 1))
                                                       .TotalMilliseconds) 
```

我`DateTime.UtcNow`在示例中使用过，但您可以`DateTime.Now`根据您计划如何使用数据来使用。有关差异的更多信息，请参阅[此线程](https://stackoverflow.com/questions/62151/datetime-now-vs-datetime-utcnow)。

# rule - 如何在 booggie 2 的脚本中更改节点的属性？

> ID：14294157
> 
> 赞同：2
> 
> 时间：2013-01-12T14:15:43.793
> 
> 标签：rule, booggie

从这篇文章中可以看出（[如何在 booggie 2 中的脚本中将节点类型添加到图中？](https://stackoverflow.com/questions/13930657/how-can-i-add-a-node-type-to-the-graph-from-within-a-script-in-booggie-2)）可以在 booggie 中将节点/边添加到元模型并更改它们的属性。

是否也可以使用脚本更改图中已经存在的节点（或边）的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:13:07.003

`Nodes`我认为您可以使用and`Edges`属性获取当前图的所有节点/边。

试试这个：

```
edgeList = graph.Edges
nodeList = graph.Nodes 
```

之后，您可以遍历这些列表`for node in nodeList:`并整理出具有您想要更改的属性的元素，例如`if node.myAttribute == 42:`.

# php - 随机唯一的 Mysql Id

> ID：14294160
> 
> 赞同：3
> 
> 时间：2013-01-12T14:16:08.227
> 
> 标签：php, mysql, sql

我有一个表，想使用 1 个 mysql 查询为其生成随机唯一值。表结构如：

```
id | unique_id
1  | 1
2  | 5
3  | 2
4  | 7 
```

ETC

unique_id 是 integer(10) 无符号

所以我想每次都用唯一的随机值（在我的例子中不是 1、5、2、7）填充 unique_id 字段。

算法是：

```
1\. Get 1 unique random value, which will not have duplicates in unique_id field
2\. Create new row with unique_id = result of 1 query 
```

* * *

我试过了

```
SELECT FLOOR(RAND() * 9) AS random_number 
FROM table 
HAVING random_number NOT IN (SELECT unique_id FROM table) 
LIMIT 1 
```

但它不会产生唯一的价值..

注意：multiplier = 9 仅作为示例给出，使用这样的乘数很容易重现此问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:21:55.730

一种方法是使用`id`列，就像随机排列一样：

```
select id
from tables
order by rand()
limit 1 
```

（您的示例仅返回一个值。）

要为每个 id 返回一个可重复的随机数，您可以执行以下操作：

```
select id,
       (select count(*) from table t2 where rand(t2.id) < rand(t.id)) as randomnumber
from table t 
```

这样做是通过为随机数生成器播种来产生稳定的排序顺序。这保证了唯一性，尽管这不是特别有效。

使用变量的更有效的替代方法是：

```
SELECT  id, @curRow := @curRow + 1 AS random_number
FROM table CROSS JOIN (SELECT @curRow := 0) r
order by rand() 
```

注意：这会返回不超过表大小的随机数，不一定来自 id。这可能是件好事。

最后，您可以了解到您正在尝试使用一些技巧。计算一个 md5 哈希，然后将前四个字符转换为整数并在表中检查：

```
SELECT convert(hex(left(md5(rand()), 4)), unsigned) AS random_number 
FROM table 
HAVING random_number NOT IN (SELECT unique_id FROM table) 
LIMIT 1 
```

您需要将该值重新插入表中。而且，不能保证您实际上能够获得表中没有的值，但它应该适用于多达数百万个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:23:19.403

如果您可以使用 MD5 哈希作为 unique_ID，请选择 MD5(NOW())。这几乎肯定会每次都生成一个唯一的 ID。

参考：[MySQL 论坛](http://forums.mysql.com/read.php?24,425424,425491#msg-425491)

# c++ - C++：链表头尾指针

> ID：14294161
> 
> 赞同：1
> 
> 时间：2013-01-12T14:16:23.717
> 
> 标签：c++, linked-list

我不明白，当我调用`head->value`它时，它会返回添加到链接列表中的最后一个值。它不应该返回我第一个项目，因为`head`它只在它为空时设置？正确的？我在想代码中可能还有其他错误。

```
void LinkedListPQueue::enqueue(const string& elem) {
    cell *newCell = new cell;
    newCell->value = elem;
    newCell->next = NULL;
    if(this->isEmpty()) {
        this->head = this->tail = newCell;
    } else {
        // find smallest and put it there

        this->tail->next = newCell;
        this->tail = newCell;
    }
} 
```

在标题中声明

```
struct cell {
    std::string value;
    cell *next;
};
cell *head, *tail; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T14:23:35.097

我的 be`isEmpty`没有正确实现，所以每次添加新节点时，都会将 head 重新分配给该节点

# javascript - Facebook Open Graph 之类的操作需要“其他”属性

> ID：14294167
> 
> 赞同：0
> 
> 时间：2013-01-12T14:17:23.950
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-opengraph

我为我的应用程序创建了一个“喜欢”操作，但 facebook 创建了一个名为 other 的必需参考属性。不管

![facebook un解释属性](../Images/1cebd90dda6063fa82f0821a8290a901.png)

没有其他的回应：

```
"The action you're trying to publish is invalid because it does not specify any reference objects. At least one of the following properties must be specified: other." 
```

与其他人的回应：假

```
 "(#3503) "false" is an invalid value for property "other" with type "Reference"" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:23:01.117

事实证明，另一个字段应该是您希望对其应用操作的视频对象的 url。

# javascript - 点击图片后面的元素

> ID：14294169
> 
> 赞同：1
> 
> 时间：2013-01-12T14:18:02.480
> 
> 标签：javascript, jquery, html, css, image

我目前的系统面临一些问题。

查看这张图片： http: [//imgur.com/KgHu3](http://imgur.com/KgHu3) 我想在头像后面“点击”得到他身后的“物品”（桌子）。但我不能，因为图片是重叠的。

在这里你可以看到问题：http: [//imgur.com/tRqTz](http://imgur.com/tRqTz)

我该怎么做？是不可能的？还是我必须在 HTML5 Canvas 中制作它才能完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:30:23.263

最好的方法应该是只使用 CSS：

```
#avatarDiv{pointer-events:none;} 
```

**更新**

在这条评论之后，

> 我也应该可以右键单击“重叠”图片，只有图像透明的地方才能捕获父图像。

**这不再是一个解决方案。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:22:43.763

你可以让重叠的图片触发他的`parent()`点击事件。例如 ：

```
$('#myImage').click(function(){
    $(this).parent().trigger('click');
}); 
```

# asp.net - BootMetro 菜单项显示过大的行距

> ID：14294178
> 
> 赞同：0
> 
> 时间：2013-01-12T14:18:35.647
> 
> 标签：asp.net, css, twitter-bootstrap

我正在尝试使用 bootmetro 框架在我的标题中定义两个菜单。第一个是我的主菜单，第二个是我的用户菜单。

由于某种原因，第二次菜单显示错误，菜单项的行间距太大。

用于创建菜单的代码如下所示

```
<div class="dropdown">
    <a class="header-dropdown dropdown-toggle accent-color" data-toggle="dropdown" href="#">
        Actions
        <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
        <li><a href="#">item1</a></li>
        <li><a href="#">item2</a></li>
        <li><a href="#">item3</a></li>
        <li class="divider"></li>
        <li><a href="#">item4</a></li>
    </ul>
</div> 
```

我遇到的问题显示在下面的屏幕截图中。在我的第二个菜单中，菜单项没有完整的菜单。

**更新：**

问题似乎出在 bootmetro CSS 样式表中，并且 firebug 缩小了搜索范围（感谢 Thanh Trung！）。在检查模式下，我可以清楚地看到 a href 没有填充我的第二个菜单中的菜单项 (li)，而它确实占用了我的第一个菜单中的最大宽度。

bootmetro CSS 中的部分如下所示：

```
.dropdown-menu li > a {
  display: block;
  padding: 3px 20px;
  clear: both;
  font-weight: normal;
  line-height: 20px;
  color: #333333;
  white-space: nowrap;
} 
```

**附加问题**：这个“>”是什么原因？我以前从未见过。

在这两个菜单中，都使用了 CSS 类“下拉菜单”，但是，当我删除这个 CSS 类的主体时，只有第一个菜单会相应地发生变化。

**主要问题**：那么为什么这个类没有被我的第二个菜单项正确继承？

再次为完整起见，第二个菜单（显示工件的菜单）的 HTML 代码：

```
<div class="dropdown pull-left">
        <a class="header-dropdown dropdown-toggle pull-right" data-toggle="dropdown" href="#">
            <b class="icon-settings"></b>
        </a>
        <ul class="dropdown-menu pull-right">
            <li><a href="#">Settings</a></li>
            <li><a href="#">Settings</a></li>
            <li><a href="#">Settings</a></li>
            <li class="divider"></li>
            <li><a href="#">Log out</a></li>
        </ul>
    </div> 
```

![菜单 1](../Images/7875ecadbbdf9d8eec1a33f169dbba9e.png)

正确可视化的菜单

![菜单 2](../Images/d130e19afaca660fef4144a2ac83d248.png)

错误的可视化菜单

![菜单 3](../Images/75db882980153b451349704301d8d475.png)

检查：“a”未取全宽

![菜单 4](../Images/abefbe84253f59d702e5e7a9ae548fe5.png)

检查：列表项占全宽度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:25:11.683

因为代码是一样的，但是显示的时候有区别，说明是css影响了。没有给我们css，就不可能说出问题所在。

以下是可能影响元素总高度的 css 属性：height、line-height、padding、margin。

您可以使用 Firebug 或 Chrome 检查器来检查元素以查看其样式

**更新**

bootmetro.css 2018 行正在影响（覆盖）它

```
#top-info a {
   display: inline-block;
   height: 46px;   /**** should be removed or override *****/
   color: #5A5A5A;
} 
```

另外我建议你使用 Firebug（firefox 的一个插件）来检查元素，不要使用 Firefox 的检查器

# json - django-helpdesk email template

> ID：14294188
> 
> 赞同：0
> 
> 时间：2013-01-12T14:19:07.533
> 
> 标签：json, django-models, django-templates, email-templates

I'm new to Django, and need help with a question about email templates.

I'm using a Django-helpdesk apps and it's have a model name *Ticket*. Along with many other fields, I would like to add an extra field to it, that is, a field name `foo`. All database is updated, and when a user submitter a new ticket, an email is sent to the user with some info, i.e `submitter_email`, dates etc. Everything seems to be correct but the new field `foo` I've added is blank.

For example, in email templates we can retrieve a *ticket id* by calling in HTML field:

```
{{ ticket.ticket }} 
```

you'll get Ticket number `1234`, or:

```
{{ ticket.submitter_email }} 
```

If you want to retrieve a *submitter email*. But when I call:

```
{{ ticket.foo }} 
```

the `foo` is blank.

To mention: Django-Helpdesk email templates using JSON, and south, and I've checked that south is migrated corectly after the field `foo` is added.

Do I missed something here? I'm very thankful for your help.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:29:00.667

我找到了我的答案。您所需`foo`要做的就是将您的字段添加`safe_template_context(ticket)`到`lib.py`.

# c++ - 使用带有派生类的 boost 序列化错误 LNK2005（已在对象中定义）

> ID：14294193
> 
> 赞同：1
> 
> 时间：2013-01-12T14:19:54.747
> 
> 标签：c++, boost, boost-serialization

我正在使用 boost 序列化来保存和加载数据。我的目标是存储一个包含对象的向量。它们的类型是派生类。

链接器告诉我，在另一个类的 obj 文件中已经定义了一些东西（这与我的序列化无关）。

有人可以告诉我我的代码有什么问题吗？我错过了什么吗？
我的序列化派生类的代码是否正确？

* * *

这是**输出**：

> 错误 1 ​​错误 LNK2005: "public: static struct boost::archive::detail::extra_detail::guid_initializer const & const boost::archive::detail::extra_detail::init_guid::g" (?g@?$init_guid @VCYesNoElement@@@extra_detail@detail@archive@boost@@2ABU?$guid_initializer@VCYesNoElement@@@2345@B) 已在 ElementFactory.obj 中定义
> 
> 错误 2 错误 LNK2005: "public: static struct boost::archive::detail::extra_detail::guid_initializer const & const boost::archive::detail::extra_detail::init_guid::g" (?g@?$init_guid @VCYesNoElement@@@extra_detail@detail@archive@boost@@2ABU?$guid_initializer@VCYesNoElement@@@2345@B) 已在 ElementFactory.obj 中定义
> 
> 错误 3 错误 LNK2005: "public: static struct boost::archive::detail::extra_detail::guid_initializer const & const boost::archive::detail::extra_detail::init_guid::g" (?g@?$init_guid @VCYesNoElement@@@extra_detail@detail@archive@boost@@2ABU?$guid_initializer@VCYesNoElement@@@2345@B) 已在 ElementFactory.obj 中定义
> 
> 错误 4 错误 LNK2005: "public: static struct boost::archive::detail::extra_detail::guid_initializer const & const boost::archive::detail::extra_detail::init_guid::g" (?g@?$init_guid @VCYesNoElement@@@extra_detail@detail@archive@boost@@2ABU?$guid_initializer@VCYesNoElement@@@2345@B) 已在 ElementFactory.obj 中定义
> 
> 错误 5 错误 LNK2005: "public: static struct boost::archive::detail::extra_detail::guid_initializer const & const boost::archive::detail::extra_detail::init_guid::g" (?g@?$init_guid @VCYesNoElement@@@extra_detail@detail@archive@boost@@2ABU?$guid_initializer@VCYesNoElement@@@2345@B) 已在 ElementFactory.obj 中定义

* * *

这是**基类**（IElement）：

```
#ifndef __ELEMENT_H__
#define __ELEMENT_H__

#include <string>
#include <vector>
#include <cassert>

#include <boost\serialization\base_object.hpp>
#include <boost\serialization\export.hpp>
#include <boost\archive\binary_iarchive.hpp>
#include <boost\archive\binary_oarchive.hpp>

typedef enum eElementType
{
    eMultipleChoice,
    eYesNo,
    eKeyword,
    eText,
    eCloze
} eType;

class IElement
{

public:
    virtual ~IElement();

    void SetFrontText( const std::string& question );
    std::string GetFrontText();
    virtual eType GetType() = 0;

    int GetStatus();
    void StatusUp();
    void StatusDown();
    void Reset();

    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & boost::serialization::make_nvp( "Status", m_status );
        ar & boost::serialization::make_nvp( "FrontText", m_frontText );
    }

protected:
    bool VectorContainsString( std::vector<std::string>* _vec, const std::string& _str );
    bool RemoveStringFromVector( std::vector<std::string>* _vec, const std::string& _str );

    std::string m_frontText;

    int m_status;
};
BOOST_SERIALIZATION_ASSUME_ABSTRACT( IElement )

#endif // __ELEMENT_H__ 
```

* * *

这是**派生类**（CYesNoElement）：

```
#ifndef __YES_NO_ELEMENT_H__
#define __YES_NO_ELEMENT_H__

#include "Element.h"

class CYesNoElement : public IElement
{
public:
    CYesNoElement();
    virtual ~CYesNoElement();

    bool GetSolution();
    void SetSolution( bool solution );

    bool check( bool given_answer );

    // IElement
    virtual eType GetType();

    template<class Archive>
    void serialize(Archive & ar, unsigned int file_version)
    {
        BOOST_SERIALIZATION_BASE_OBJECT_NVP( IElement );
        ar & boost::serialization::make_nvp( "Solution", m_solution );
    }

private:
    bool m_solution;
};
BOOST_CLASS_EXPORT(CYesNoElement)

#endif // __YES_NO_ELEMENT_H__ 
```

* * *

这是链接器错误提示的类**CElementFactory ：**

```
#ifndef __ELEMENTFACTORY_H__
#define __ELEMENTFACTORY_H__

#include "ClozeElement.h"
#include "KeywordElement.h"
#include "MultipleChoiceElement.h"
#include "TextElement.h"
#include "YesNoElement.h"

class CElementFactory
{
public:
    CElementFactory(void);
    virtual ~CElementFactory(void);

    IElement* CreateElement( eType type );

private:
    CClozeElement* CreateClozeElement();
    CKeywordElement* CreateKeywordElement();
    CMultipleChoiceElement* CreateMultipleChoiceElement();
    CTextElement* CreateTextElement();
    CYesNoElement* CreateYesNoElement();
};

#endif // __ELEMENTFACTORY_H__ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:38:21.043

放入. `BOOST_CLASS_EXPORT(CYesNoElement)`_`.cpp`

# alignment - Span 在 Div CSS 中未正确对齐

> ID：14294195
> 
> 赞同：0
> 
> 时间：2013-01-12T14:19:57.447
> 
> 标签：alignment, html

`<span>`仅在内部水平对齐但不垂直对齐`<div>`

CSS：

```
.upload-cont{
    cursor:pointer;
    margin-left:130px;
    display:inline-block;
    border:2px dashed #a8a8a8;
    max-width:220px;
    max-height:180px;
    min-width:220px;
    min-height:180px;
}
.add-text{
    display:block;
    font-size:10px;
    font-weight:bold;
    color:#999;
    word-wrap:break-word;
    text-align:center;
    width:100px;
    margin:auto;
    vertical-align:middle;
} 
```

HTML：

```
<div class="upload-cont">
  <span class="add-text">Something</span>
</div> 
```

我应该怎么做才能垂直对齐`<span>`中间的`<div>`？

**检查这个jsfiddle：http:** [//jsfiddle.net/xdYUs/1/](http://jsfiddle.net/xdYUs/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:26:26.640

试试这个：http: [//jsfiddle.net/xdYUs/2/](http://jsfiddle.net/xdYUs/2/)

用于`position:relative;`容器和`position:absolute;`元素`span`。正如我所看到的，您的容器具有固定的宽度和高度。您可以通过设置元素的`top`和`left`属性来使用它`span`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:26:38.843

试试这个...

```
.add-text{
    display:block;
    font-size:10px;
    font-weight:bold;
    color:#999;
    text-align:center;
    width:100px;
    margin: 40% auto;
} 
```

[jsFiddle 示例](http://jsfiddle.net/xdYUs/3/)

问候...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:29:56.640

```
.add-text
{
    display:block;
    font-size:10px;
    font-weight:bold;
    color:#999;
    word-wrap:break-word;
    text-align:center;
    width:100px;
    margin:auto;
    vertical-align:middle;
    line-height:170px;
} 
```

line-height => 180px (container) - 10px (font size) = 170px

# html - Strange output in Clojure Web Crawler

> ID：14294196
> 
> 赞同：0
> 
> 时间：2013-01-12T14:20:11.073
> 
> 标签：html, recursion, web, clojure, output

I have the following problem. I'm doing WebCrawler for a school assignment, and I'm doing it in Clojure. Here is the code.

```
(defn crawl [url current-depth max-depth]
(def hrefs (get-links url))
(if (< current-depth max-depth)
    (map crawl hrefs (iterate eval (inc current-depth)) (iterate eval max-depth))
    hrefs))

(defn get-links [page] 
($ (get! page) td "a[href]" (attr "abs:href"))) 
```

The `get!` and `$` functions is not written by me, I've taken them from here: [https://github.com/mfornos/clojure-soup/blob/master/src/jsoup/soup.clj](https://github.com/mfornos/clojure-soup/blob/master/src/jsoup/soup.clj)

My problem is that when I call `(crawl "http://bard.bg" 0 0)` from repl I get the following output:

```
("http://www.bard.bg/genres/?id=1" "http://www.bard.bg/genres/?id=2" "http://www.bard.bg/genres/?id=4" "http://www.bard.bg/genres/?id=5" "http:/
("http://www.bard.bg/genres/?id=1" "http://www.bard.bg/genres/?id=2" "http://www.bard.bg/genres/?id=4" "http://www.bard.bg/genres/?id=5" "http:/
("http://www.bard.bg/genres/?id=1" "http://www.bard.bg/genres/?id=2" "http://www.bard.bg/genres/?id=4" "http://www.bard.bg/genres/?id=5" "http://www.bard.bg/genres/?id=6" "http://www.bard.bg/genres/?id=10" "http://www.bard.bg/genres/?id=17" "http://www.bard.bg/genres/?id=24"
... 
```

So where do the first `2` lazyseqs are coming from? Why are they *unfinished*?

Seems like the problem is in the Clojure-Soup and more specifically here:

```
(defmacro $ [doc & forms]
   (let [exprs# (map #(if (string? %) `(select ~%)
                  (if (symbol? %) `(select ~(str %))
                     (if (keyword? %) `(select ~(str "#"(name %)))
                        %))) forms)]
 `(->> ~doc ~@exprs#)))` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:00:06.730

我无法重现您描述的问题。在我的例子`(crawl "http://bard.bg" 0 0)`中，返回一个包含 174 个字符串的列表。

但是，我想借此机会向您指出函数`def`中的不正确用法。`crawl`而不是`def`你应该使用`let`. 此外，而不是`(iterate eval ...)`使用[`repeat`](http://www.clodoc.org/doc/clojure.core/repeat).

```
(defn crawl [url current-depth max-depth]
  (let [hrefs (get-links url)]
    (if (< current-depth max-depth)
      (map crawl hrefs (repeat (inc current-depth)) (repeat max-depth))
      hrefs))) 
```

有关讨论，请参见[clojure 中的 let vs def](https://stackoverflow.com/questions/622785/let-vs-def-in-clojure)。

# coding-style - 干净的 Lisp 可读性

> ID：14294198
> 
> 赞同：0
> 
> 时间：2013-01-12T14:20:14.363
> 
> 标签：coding-style, functional-programming, lisp

我仍在努力提高我的 lisp 阅读速度。因此，我的第一个倾向是尝试命名所有内容（通常在 let 绑定中）以弥补我的缓慢理解。在网上的例子中，总是有一些东西被绑定，而另一些东西只是被使用到位。

像这个解析 (1 2 4 + 4) 的愚蠢 s 表达式可以用 let 绑定编写：

```
 (let [first-nums  (take (- (count args) 2) args)
       last-num (last args)
       fun (nth args (- (count args) 2))]
    (reduce fun (conj first-nums last-num)))) 
```

或没有：

```
 (reduce (nth args (- (count args) 2))
          (conj (take (- (count args) 2) args)
                (last args))))) 
```

一方面，给“概念”赋予好的域名是我在使用 c 风格语言工作时非常相信的事情，即使 let 的范围定义得非常严格，但它仍然感觉非常反函数绑定状态。 **您何时使用绑定的标准是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T14:54:33.210

给事物起名字很好。它有助于使事情自我记录。没有什么问题。如果事情太明显，有时可能想摆脱它：

```
(let ((number1 12)
      (number2 30))
  (+ number1 number2)) 
```

以上并没有增加太多的表达`(+ 12 30)`。但是如果你想记录域值，那么而不是

```
(let ((number1 12)        ; border width
      (number2 30))       ; table width
  (+ number1 number2)) 
```

写得更好

```
(let ((table-width 30)
      (border-width 12))
   (+ table-width border-width)) 
```

剩下的一个问题是：当你有一个数据结构时，你想以某种方式使用它的一部分并且你想给这些部分临时命名——怎么做？

在您的示例中，`LET`介绍名称并提供手写代码来提取值。

稍微“更好”可能是一种更具描述性的方法：

```
(match-let (*args1 function arg2)                  ; a pattern
      expression                                   ; a data structure
   (reduce function (append args1 (list arg2))))   ; a body 
```

如果您必须经常在代码中处理此类模式，则上述内容将是有意义的。这将使代码更具声明性。

# c# - 尝试建立与 SQL Server Express 的连接时出错

> ID：14294199
> 
> 赞同：1
> 
> 时间：2013-01-12T14:20:17.900
> 
> 标签：c#, .net, sql-server-2008, visual-studio-2012

我在 Visual Studio 2012 中创建了一个网站，该网站与一个 SQL Server Express 数据库表进行交互，其中数据库是使用 SQL Server 2008 预先创建的。我将与数据库的连接添加到该站点，所有这些都运行良好。

现在我对一个新网站做同样的事情，但现在收到错误消息。

> *System.Data.SqlClient.SqlException (0x80131904): 用户登录失败*

错误发生在我尝试建立连接时，并且在我之前的项目中一切都很好，而且仍然是，在两种情况下都使用了完全相同的连接字符串。这个异常是从哪里突然来的？

```
try
{
    connectionString = "Data Source=.\\SQLEXPRESS;Initial Catalog=Employee,Integrated Security=True;";

    using (conn = new SqlConnection(connectionString))
    {
        conn.Open();
       .....
    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T14:24:13.757

您的连接字符串无效，您已使用`,`而不是`;`

```
connectionString = "Data Source=.\\SQLEXPRESS;Initial Catalog=Employee;Integrated Security=True;";
                                                                   // ^ here 
```

*   [SQL Server 2008 的连接字符串列表](http://connectionstrings.com/sql-server-2008)

# android - 对于 UsbManager 类型，方法 getAccessory(Intent) 未定义

> ID：14294203
> 
> 赞同：2
> 
> 时间：2013-01-12T14:20:49.000
> 
> 标签：android, adk

我正在研究一个关于 android 的项目，我正在尝试在设备和 ADK 之间建立连接，我的问题是`.getAccessory();`方法。它应该取自 UsbManager 类，但 eclipse 抛出以下错误：

**对于 UsbManager 类型，方法 getAccessory(Intent) 未定义**

我的代码示例在这里：

```
private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver(){

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String action = intent.getAction();
        if(ACTION_USB_PERMISSION.equals(action)){
            synchronized (this) {
                UsbAccessory accessory = UsbManager.getAccesory(intent);
                if(intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)){
                    openAccessory(accessory);//q
                }
            }
        }

        else if (UsbManager.ACTION_USB_ACCESSORY_DETACHED.equals(action)){
            UsbAccessory accessory = UsbManager.getAccessory(intent);
            if(accessory != null && accessory.equals(mAccesory)){
                closeAccessory();//q
            }
        }
    }

}; 
```

你知道该怎么做吗？

也许我错了，在这种情况下我可以用什么来完成它的任务？

编辑：JVM 也看不到`getInstance()`我在`OnCreate(Bundle savedInstanceState)`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:40:30.197

我刚刚完成了我的项目构建目标 4.0.3 到 Google API（API lvl 17），它已经解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T17:30:22.423

您必须从这些导入中使用 UsbManager 和 UsbAccessory：

```
import com.android.future.usb.UsbAccessory;
import com.android.future.usb.UsbManager; 
```

不是来自

```
import android.hardware.usb.UsbAccessory;
import android.hardware.usb.UsbManager; 
```

为了有 UsbManager.getAccessory(intent);

# c# - 如何用 C# 扩展 vbscript

> ID：14294205
> 
> 赞同：0
> 
> 时间：2013-01-12T14:21:15.147
> 
> 标签：c#, vbscript

我想用我用 c# 编写的代码来扩展 vbscript 的功能。我编写了一些类来自动化 SAP GUI，并希望在我拥有的所有 vbscript 文件中使用这些类。

我有数百个 vbscript 文件，并且知道将它们全部转换为 C# 需要数年时间。所以我认为将我的 c# 类公开给 vbscript 会更快。

你知道如何做到这一点或知道我可以学习的任何在线参考资料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:47:44.017

VB**脚本**运行在客户端浏览器运行时里面。

我知道在浏览器中运行的唯一 C# 解决方案是 silverlight。它仍然只是 c#。

`[ScriptableMember]`您可以通过使用属性装饰它们来从脚本语言（如 VB- of java-script）访问 c# 代码，如下所示：

```
/// <summary>
/// Members that can be called from javascript. (or vbscript)
/// </summary>
public sealed class LINEARVIEWER_SL_SCRIPTS {

    [ScriptableMember]
    public void ChangeNetwork(string pNetworkFilterId, string pNetworkFilter) {

        MainViewModel MainVM = (MainViewModel)((MainPage)Application.Current.RootVisual).DataContext;

        long SectionID;

        if (long.TryParse(pNetworkFilterId, out SectionID) == false) {
            throw new FormatException("'" + pNetworkFilterId + "' not a valid section / network ID.");
        }

        MainVM.RoadFilterViewModel.SelectSectionAsync(SectionID, /* completed handler = */ null);
    }
} 
```

您必须在 silverligh (c#) 应用程序启动时注册这些类，如下所示：

```
 private void Application_Startup(object sender, StartupEventArgs e) {

            ...

            HtmlPage.RegisterScriptableObject("LINEARVIEWER_SL_SCRIPTS", new LINEARVIEWER_SL_SCRIPTS());
        } 
```

然后，您可以从 java（或 vb）脚本中简单地调用这些方法，如下所示：

```
 function DoAddToLIV(pNetworkFilterId, pNetworkFilter) {
        ...
        gObjLIV.Content.LINEARVIEWER_SL_SCRIPTS.ChangeNetwork(pNetworkFilterId, pNetworkFilter);
        ...
    } 
```

`gObjLIB.Content`html 页面内的 silverlight 对象的 id 在哪里。

```
 var gObjLIV = null;

    function onSilverlightPluginLoaded(sender, args) {

        gObjLIV = sender.getHost();
    } 
```

您可以使用此参数将该函数挂钩到 ASPX 页面的 html 中的 silverlight 对象：

```
<param name="onLoad" value="onSilverlightPluginLoaded" /> 
```

如果我遗漏了什么或者您需要更多示例，请告诉我。我不介意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:33:18.267

我不知道您是从命令行还是从 Office 之类的工具中运行 VBScript。

如果是前者，您可以创建一个或多个命令行应用程序，您可以从任何脚本语言调用这些应用程序，并向其中传递参数和操作说明符，就像任何其他命令行工具一样。（在这种情况下还可以考虑迁移到 PowerShell - 它在命令行脚本编写方面比 VBScript 好得多，并且与 .NET 有很好的集成）。

如果是后者，您可能需要使用 RegAsm 注册您的 C# 类，然后按照任何其他 COM 类型创建您的 C# 类型的实例。有关详细信息，请参阅此帖子：[如何从 vbScript 调用 .NET 代码 (C#/vb.net)？](https://stackoverflow.com/questions/357440/how-do-i-call-net-code-c-vb-net-from-vbscript)

# javascript - 在网页中以透明背景全页显示图像

> ID：14294212
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:22:29.917
> 
> 标签：javascript, jquery

我想在单击时显示图像，就像它在本网站的[http://www.espncricinfo.com/](http://www.espncricinfo.com/)中显示的那样，当您单击它在具有透明背景的同一个完整窗口中打开的图像时。我怎么能做到这一点。我正在开发一个 php 网站。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:04:25.967

我喜欢使用[ColorBox，](http://www.jacklmoore.com/colorbox)它完成了我对图片所需的一切，还可以使用 iframe 完成页面。我从来没有看过花哨的盒子，但听说它非常相似。

[例子](http://www.jacklmoore.com/colorbox/example1/)

被触发`$('Selector').colorbox({Options});`

# java - :: simple-jndi 和配置的相对路径不起作用

> ID：14294213
> 
> 赞同：1
> 
> 时间：2013-01-12T14:22:34.493
> 
> 标签：java

**我的设置：**

***环境***

*   Ubuntu Linux 12.04 LTS

*   日食太阳神

*   GWT 2.4

*   Maven 2

*   简单的jndi

***项目***

对话地图域*（Java 项目文件夹）*

-> src/main/resources/jndi.properties *（简单-jndi配置）*

-> config/dialoguemaps.properties *（数据源配置）*

**我的问题：**

如果我在我的 jndi.properties 文件中使用绝对路径 - 它工作正常：

```
org.osjava.sj.root=/home/arno/.workspaces/dialoguemaps-trunk/dialoguemaps-domain/config/ 
```

但是如果我使用相对路径它不起作用：

```
org.osjava.sj.root=config/ 
```

我必须使用相对路径，但是如何 - 有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:23:49.267

问题很可能是您的相对路径与您认为的不相关。

您没有显示错误消息，但它可能包含 simple-jndi 试图解析的绝对路径。

我认为您将不得不确定绝对路径到底是什么，并对其进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-29T08:18:20.107

我知道这个问题已经过去了 7 年，但我会回答这个问题，因为我也遇到了与你类似的配置问题。处理它的最好方法是放一个“。” （点）在“配置”之前。就像是：

```
org.osjava.sj.root=./config/ 
```

控制台会提醒您它无法加载类，然后会编写一个尝试加载类的路径，例如：

```
[ERROR] ... Unable to load: C:\Users\name.surname\Desktop\appdirectory1\appdirectory2\appdirectory3\.\config 
```

然后你只需要放置一个丢失的目录。例如我把：

```
#org.osjava.sj.root=./src/main/resources 
```

它工作得很好。

# postgresql - PostgreSQL：选择第一行作为选择内的列

> ID：14294214
> 
> 赞同：0
> 
> 时间：2013-01-12T14:22:41.957
> 
> 标签：postgresql

我有 2 个表，例如`Customers`，`Orders`在表中`Customers`我有列`id`，`name`在表中我`Orders`有列`id`，，`customer_id`。`order_date`

现在我需要做出一个选择，它将返回每个 Customer's`id`和`name`最后一个`order_date`。

我试着做这样的：

```
select
    Customers.id,
    Customers.name,
    (select Orders.order_date from Orders where Orders.customer_id = Customer.id order by order_date desc) as last_order_date
from
    Customers 
```

但是它得到了错误的索引并且需要永远执行。在 PostgreSQL 中进行此选择的最佳方法是什么？

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:32:52.920

如果不限制 by `customer_id`，则查询最终将不得不扫描整个订单表。

```
SELECT c.id
      ,c.name
      ,MAX(o.order_date) AS last_order_date
FROM Customers c
LEFT OUTER JOIN Orders o ON (o.customer_id = c.id)
GROUP BY c.id, c.name 
```

# r - 将大文件读入 R

> ID：14294217
> 
> 赞同：4
> 
> 时间：2013-01-12T14:22:48.113
> 
> 标签：r, csv, ram

我是 R 的新手，但我知道它会阻塞“大”文件。我正在尝试读取一个 200MB 的数据文件。我已经尝试过使用 csv 格式并将其转换为制表符分隔的 txt，但在这两种情况下，我都会在文件加载之前用完 4GB 的 RAM。

R 会使用 4GB 或内存来加载 200MB 的文件是正常的，还是文件有问题，导致 R 继续读取除了数据之外的一堆虚无？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T14:25:56.673

从`?read.table`

```
Less memory will be used if colClasses is specified as one of the six atomic vector classes. 
```

...

```
Using nrows, even as a mild over-estimate, will help memory usage. 
```

使用这两个参数。

确保`numeric`为您的数字数据正确指定。请参见此处：[在 read.csv 中指定 colClasses](https://stackoverflow.com/questions/2805357/specifying-colclasses-in-the-read-csv)

并且不要低估 nrows。

如果您运行的是 64 位 R，则可以尝试 32 位版本。它将使用更少的内存来保存相同的数据。

另请参见：[在 R 中扩展内存大小限制](https://stackoverflow.com/questions/5749058/extend-memory-size-limit-in-r/5749139#5749139)

# python - 允许使用 xmlrpc 在字符串中传输任何 ASCII 字符

> ID：14294219
> 
> 赞同：2
> 
> 时间：2013-01-12T14:23:04.103
> 
> 标签：python, encoding, xml-rpc

我正在使用 xmlrpc 将字符串（任意 8 位字符）从服务器发送到客户端。事实证明，回车符`\r`（dec `13`hex 0xd）被抑制了。也就是说，当原始字符串由以下三个字符组成时（由它们的十六进制代码表示）：

```
0x3a 0xd 0xa 
```

然后我在客户端只收到“两个”字符：

```
0x3a 0xa 
```

如何配置 xmlrpc（在 python 中），以便能够接收完整的原始 3 字符字符串`0xd`？有没有一种方法可以在不使用二进制包装器或其他东西的情况下完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:15:42.450

当您在 XML-RPC 中将 str 对象作为字符串值传递时，它会被编码和解码为字符串。（顺便说一句，该字符串应该由 XML 中允许的字符组成，尽管这在您的情况下并不重要。）它不是二进制块，并且在解析 XML 时`\r\n`被转换为。`\n`恕我直言，无能为力，也没有任何选项可以挽救局面。

只需查看对您的字符串执行的操作和`dumps()`操作：`loads()``xmlrpclib`

```
>>> from xmlrpclib import dumps, loads
>>> s = '\x3a\x0d\x0a'
>>> e = dumps((s,)) # Just a tuple
>>> e
'<params>\n<param>\n<value><string>:\r\n</string></value>\n</param>\n</params>\n'
>>> loads(e)
((':\n',), None) 
```

因此，当`loads()`被执行时，`\r\n`序列被转换为`\n`，并且`\r`丢失了。当然，您可以使用转换后的字符串（例如`s.encode('hex')`，看起来很不错），但是，据我所知，如果您不能更改服务器行为（`s.decode('hex')`在参数上执行），则无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-17T10:46:22.337

作为 python3 的更新，使用 xmlrpc.client 代替 xmlrpclib：

```
>>> from xmlrpc.client import dumps, loads 
```

# opencv - opencv - 如何从几个小图像创建一个大图像？

> ID：14294222
> 
> 赞同：0
> 
> 时间：2013-01-12T14:23:24.080
> 
> 标签：opencv

我是opencv的新手。我的问题如下：我有一个很大的形象。我想取它的 4 个角，以便从每个角​​取一个 5X5 像素的区域。然后我想根据 4 个角创建一个大图像。

新图像的尺寸为 10X10。

解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:31:43.293

使用 C++ 接口，您可以这样做：

```
#include <opencv2/opencv.hpp>
cv::Mat CornersOnly(const cv::Mat& src, int cw, int ch)
{
    using namespace cv;
    int w(src.cols);
    int h(src.rows);
    CV_Assert(w >= cw);
    CV_Assert(h >= ch);
    Mat dst(2*ch, 2*cw, src.type());
    Mat(src, Rect(0,    0,    cw, ch)).copyTo(Mat(dst, Rect( 0,  0, cw, ch)));
    Mat(src, Rect(w-cw, 0,    cw, ch)).copyTo(Mat(dst, Rect(cw,  0, cw, ch)));
    Mat(src, Rect(0,    h-ch, cw, ch)).copyTo(Mat(dst, Rect( 0, ch, cw, ch)));
    Mat(src, Rect(w-cw, h-ch, cw, ch)).copyTo(Mat(dst, Rect(cw, ch, cw, ch)));
    return dst;
}
int main()
{
    cv::imwrite("Lenna_Corners.png", CornersOnly(cv::imread("Lenna.png"), 100, 100));
} 
```

输入：

![在此处输入图像描述](../Images/f3476b3f62a84ff01682c93d36019ed2.png)

输出：

![在此处输入图像描述](../Images/a030ef8e26c6342bcad89241c97433fb.png)

为了获得更好的可见性，我在此示例中使用了 100 而不是 5 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:22:10.077

这是一个通过在 OpenCV C 界面中组合图像的 4 个角来创建图像的简单函数。我不知道这是否是最好的方法，但它有效：

```
IplImage* getCorners(IplImage* img, int regionWidth, int regionHeight)
{
    IplImage* result = cvCreateImage(cvSize(regionWidth * 2,regionHeight * 2),img->depth,img->nChannels);

    //Copy Top Left Region
    cvSetImageROI(img,cvRect(0,0,regionWidth,regionHeight));
    cvSetImageROI(result,cvRect(0,0,regionWidth,regionHeight));
    cvCopy(img,result);

    //Copy Top Right Region
    cvSetImageROI(img,cvRect(img->width - regionWidth - 1,0,regionWidth,regionHeight));
    cvSetImageROI(result,cvRect(regionWidth,0,regionWidth,regionHeight));
    cvCopy(img,result);

    //Copy Bottom Left Region
    cvSetImageROI(img,cvRect(0,img->height - regionHeight - 1,regionWidth,regionHeight));
    cvSetImageROI(result,cvRect(0,regionHeight,regionWidth,regionHeight));
    cvCopy(img,result);

    //Copy Bottom Right Region
    cvSetImageROI(img,cvRect(img->width - regionWidth - 1,img->height - regionHeight - 1,regionWidth,regionHeight));
    cvSetImageROI(result,cvRect(regionWidth,regionHeight,regionWidth,regionHeight));
    cvCopy(img,result);

    //Reset Image Region Of Interest
    cvResetImageROI(img);
    cvResetImageROI(result);

    return result;
} 
```

我希望它有所帮助。:)

# iphone - iPhone dSYM 崩溃日志符号

> ID：14294223
> 
> 赞同：0
> 
> 时间：2013-01-12T14:23:31.087
> 
> 标签：iphone, ios, objective-c, xcode, crash-reports

我的应用程序在 iPhone 而不是模拟器上崩溃。我从我的设备（不包括命名符号）中获得了崩溃日志。

我找到了 dSYM 文件`~/Library/Developer/Xcode/Archive/YYYY-MM-DD/AppName.xcarchive/dSYMs/AppName.app.dSYM/Contents/Resources/DWARF/AppName`

我跑了：（.`atos -arch armv7 -o AppName 0x33c2f838`之后线程 0 上的哈希将哈希输出回给我，没有任何符号名称。`libsystem_kernel.dylib``atos`

我在做什么有什么问题？为什么要`atos`返回哈希？如何获取符号名称？

崩溃日志：

```
Incident Identifier: F415FF30-D0F9-4E53-997E-622CF775E141
CrashReporter Key:   fa0a3164a061d78d15ee4f1187d40172474ef57f
Hardware Model:      iPhone4,1
Process:         TipnTag [3170]
Path:            /var/mobile/Applications/1F6166EF-6048-4EBD-895E-B2873079C906/TipnTag.app/TipnTag
Identifier:      TipnTag
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-12 16:14:35.916 +0300
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_CRASH (SIGTRAP)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
(0x3bf3a29e 0x35e2997a 0x3bf3a1c0 0x3520948c 0x352111d2 0xbb986 0xbbacc 0x8bfa0 0x350b7540 0x3509c306 0x350b37c2 0x3506f7fe 0x38943d5e 0x389438fc 0x38944830 0x38944216 0x38944024 0x38943e84 0x3bf0f6c8 0x3bf0d9bc 0x3bf0dd12 0x3be80eb8 0x3be80d44 0x3a24e2e6 0x350c02f4 0x79248 0x791e4)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x33c2f838 0x33c1f000 + 67640
1   TipnTag                         0x0010166e 0x78000 + 562798
2   CoreFoundation                  0x3bf3a57c 0x3be78000 + 796028
3   libobjc.A.dylib                 0x35e29a62 0x35e21000 + 35426
4   libc++abi.dylib                 0x3a119078 0x3a118000 + 4216
5   libc++abi.dylib                 0x3a119110 0x3a118000 + 4368
6   libc++abi.dylib                 0x3a11a594 0x3a118000 + 9620
7   libobjc.A.dylib                 0x35e299cc 0x35e21000 + 35276
8   CoreFoundation                  0x3be80f1c 0x3be78000 + 36636
9   CoreFoundation                  0x3be80d44 0x3be78000 + 36164
10  GraphicsServices                0x3a24e2e6 0x3a249000 + 21222
11  UIKit                           0x350c02f4 0x35069000 + 357108
12  TipnTag                         0x00079248 0x78000 + 4680
13  TipnTag                         0x000791e4 0x78000 + 4580

Thread 1:
0   libsystem_kernel.dylib          0x33c30d98 0x33c1f000 + 73112
1   libsystem_c.dylib               0x36f96cf6 0x36f90000 + 27894
2   libsystem_c.dylib               0x36f96a12 0x36f90000 + 27154
3   libsystem_c.dylib               0x36f968a0 0x36f90000 + 26784

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x33c20648 0x33c1f000 + 5704
1   libdispatch.dylib               0x3a233974 0x3a22b000 + 35188
2   libdispatch.dylib               0x3a233654 0x3a22b000 + 34388

Thread 3:
0   libsystem_kernel.dylib          0x33c30d98 0x33c1f000 + 73112
1   libsystem_c.dylib               0x36f96cf6 0x36f90000 + 27894
2   libsystem_c.dylib               0x36f96a12 0x36f90000 + 27154
3   libsystem_c.dylib               0x36f968a0 0x36f90000 + 26784

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x33c1feb4 0x33c1f000 + 3764
1   libsystem_kernel.dylib          0x33c20048 0x33c1f000 + 4168
2   CoreFoundation                  0x3bf0f040 0x3be78000 + 618560
3   CoreFoundation                  0x3bf0dd9e 0x3be78000 + 613790
4   CoreFoundation                  0x3be80eb8 0x3be78000 + 36536
5   CoreFoundation                  0x3be80d44 0x3be78000 + 36164
6   WebCore                         0x37b5fa40 0x37b55000 + 43584
7   libsystem_c.dylib               0x36fa130e 0x36f90000 + 70414
8   libsystem_c.dylib               0x36fa11d4 0x36f90000 + 70100

Thread 5 name:  com.apple.NSURLConnectionLoader
Thread 5:
0   libsystem_kernel.dylib          0x33c1feb4 0x33c1f000 + 3764
1   libsystem_kernel.dylib          0x33c20048 0x33c1f000 + 4168
2   CoreFoundation                  0x3bf0f040 0x3be78000 + 618560
3   CoreFoundation                  0x3bf0dd9e 0x3be78000 + 613790
4   CoreFoundation                  0x3be80eb8 0x3be78000 + 36536
5   CoreFoundation                  0x3be80d44 0x3be78000 + 36164
6   Foundation                      0x36cbabc8 0x36c8d000 + 187336
7   Foundation                      0x36d3e678 0x36c8d000 + 726648
8   libsystem_c.dylib               0x36fa130e 0x36f90000 + 70414
9   libsystem_c.dylib               0x36fa11d4 0x36f90000 + 70100

Thread 6:
0   libsystem_kernel.dylib          0x33c30d98 0x33c1f000 + 73112
1   libsystem_c.dylib               0x36f96cf6 0x36f90000 + 27894
2   libsystem_c.dylib               0x36f96a12 0x36f90000 + 27154
3   libsystem_c.dylib               0x36f968a0 0x36f90000 + 26784

Thread 7:
0   libsystem_kernel.dylib          0x33c1feb4 0x33c1f000 + 3764
1   libsystem_kernel.dylib          0x33c20048 0x33c1f000 + 4168
2   CoreFoundation                  0x3bf0f040 0x3be78000 + 618560
3   CoreFoundation                  0x3bf0dd9e 0x3be78000 + 613790
4   CoreFoundation                  0x3be80eb8 0x3be78000 + 36536
5   CoreFoundation                  0x3be80d44 0x3be78000 + 36164
6   Foundation                      0x36c9178a 0x36c8d000 + 18314
7   Foundation                      0x36d35058 0x36c8d000 + 688216
8   TipnTag                         0x00116b10 0x78000 + 650000
9   Foundation                      0x36d3e678 0x36c8d000 + 726648
10  libsystem_c.dylib               0x36fa130e 0x36f90000 + 70414
11  libsystem_c.dylib               0x36fa11d4 0x36f90000 + 70100

Thread 8:
0   libsystem_kernel.dylib          0x33c30d98 0x33c1f000 + 73112
1   libsystem_c.dylib               0x36f96cf6 0x36f90000 + 27894
2   libsystem_c.dylib               0x36f96a12 0x36f90000 + 27154
3   libsystem_c.dylib               0x36f968a0 0x36f90000 + 26784

Thread 9:
0   libsystem_kernel.dylib          0x33c1feb4 0x33c1f000 + 3764
1   libsystem_kernel.dylib          0x33c20048 0x33c1f000 + 4168
2   CoreFoundation                  0x3bf0f040 0x3be78000 + 618560
3   CoreFoundation                  0x3bf0dd9e 0x3be78000 + 613790
4   CoreFoundation                  0x3be80eb8 0x3be78000 + 36536
5   CoreFoundation                  0x3be80d44 0x3be78000 + 36164
6   Foundation                      0x36c9178a 0x36c8d000 + 18314
7   Foundation                      0x36d35058 0x36c8d000 + 688216
8   TipnTag                         0x000cf77c 0x78000 + 358268
9   Foundation                      0x36d3e678 0x36c8d000 + 726648
10  libsystem_c.dylib               0x36fa130e 0x36f90000 + 70414
11  libsystem_c.dylib               0x36fa11d4 0x36f90000 + 70100

Thread 10:
0   libsystem_kernel.dylib          0x33c30d98 0x33c1f000 + 73112
1   libsystem_c.dylib               0x36f96cf6 0x36f90000 + 27894
2   libsystem_c.dylib               0x36f96a12 0x36f90000 + 27154
3   libsystem_c.dylib               0x36f968a0 0x36f90000 + 26784

Thread 11 name:  com.apple.CFSocket.private
Thread 11:
0   libsystem_kernel.dylib          0x33c30594 0x33c1f000 + 71060
1   CoreFoundation                  0x3bf131f2 0x3be78000 + 635378
2   libsystem_c.dylib               0x36fa130e 0x36f90000 + 70414
3   libsystem_c.dylib               0x36fa11d4 0x36f90000 + 70100

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x3c930fc8
    r4: 0xffffffff    r5: 0x0000000b      r6: 0x2fd88304      r7: 0x2fd889e0
    r8: 0x2fd88310    r9: 0x3cf0e8a8     r10: 0x2fd88554     r11: 0x0000000b
    ip: 0x00000025    sp: 0x2fd882e0      lr: 0x00101673      pc: 0x33c2f838
  cpsr: 0x00000010

Binary Images:
   0x78000 -   0x1a6fff +TipnTag armv7  <7bc47846a23f32fe8a5781dd61fdbbf5> /var/mobile/Applications/1F6166EF-6048-4EBD-895E-B2873079C906/TipnTag.app/TipnTag
0x2feed000 - 0x2ff0dfff  dyld armv7  <75594988728831d98e1f7c4c7b7ca29d> /usr/lib/dyld
0x33551000 - 0x33556fff  IOMobileFramebuffer armv7  <3a351ca1d4ae3146a787f3e13564294b> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x3362e000 - 0x33633fff  liblaunch.dylib armv7  <021ff140d6003f3281dfa29b79fa9e6e> /usr/lib/system/liblaunch.dylib
0x337b8000 - 0x337c4fff  libz.1.dylib armv7  <a3bba3842596315a81aa171a8bbda7b5> /usr/lib/libz.1.dylib
0x338af000 - 0x338eafff  AppSupport armv7  <74ed50d2f7d23ce696b029dd817749c0> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x338eb000 - 0x33950fff  CoreMedia armv7  <28a1fe1e729d37e0bb623201b2652a45> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x33c1f000 - 0x33c35fff  libsystem_kernel.dylib armv7  <4c2862d2e8f23119bfe114b0662c6241> /usr/lib/system/libsystem_kernel.dylib
0x33ea8000 - 0x33ea8fff  vecLib armv7  <66204595f7653ef29e5e26cb8629177a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x33f32000 - 0x33f43fff  libvMisc.dylib armv7  <a3d025234d1a3880a0e5f87879633ee0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x33f8f000 - 0x34167fff  ImageIO armv7  <fdfa8aa6307235b29435e5c8f6bc9819> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x34224000 - 0x3429afff  MapKit armv7  <e4016aefbae43bd886ed6e6e5375ba47> /System/Library/Frameworks/MapKit.framework/MapKit
0x342e8000 - 0x34420fff  CoreGraphics armv7  <903960bfcfe93adb943752851f88491e> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x345f6000 - 0x345fdfff  liblockdown.dylib armv7  <257ecb171a363e4298a63f72d7fffea2> /usr/lib/liblockdown.dylib
0x3461c000 - 0x34623fff  libsystem_notify.dylib armv7  <6e39f8511ecc3c3489829714eb6fde12> /usr/lib/system/libsystem_notify.dylib
0x34626000 - 0x346c6fff  UIFoundation armv7  <795a2f216cc3379c95eb645c633cc527> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x346e1000 - 0x34720fff  SystemConfiguration armv7  <44d84d23d10f344c90b4d9e9611ec976> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x34721000 - 0x34745fff  Bom armv7  <c76b4156e0463ecb922608d44c126d86> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x34748000 - 0x34748fff  libSystem.B.dylib armv7  <f2cad3bd15f63f448a9c5be732c65819> /usr/lib/libSystem.B.dylib
0x3481b000 - 0x34858fff  libGLImage.dylib armv7  <7db25f3d55b93f31868e37326fba1e57> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x34f83000 - 0x35008fff  libsqlite3.dylib armv7  <759ca29f533a33e88a81fddc3364bf19> /usr/lib/libsqlite3.dylib
0x35069000 - 0x355bcfff  UIKit armv7  <4f85b22a1eb73af08641066b29c4edb2> /System/Library/Frameworks/UIKit.framework/UIKit
0x355bd000 - 0x35631fff  ProofReader armv7  <cc89a352199a393ba0e46af69e670ef9> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x35697000 - 0x35784fff  libiconv.2.dylib armv7  <faa5abb937e3306ab87c7f7c38315839> /usr/lib/libiconv.2.dylib
0x3591f000 - 0x35934fff  libxpc.dylib armv7  <9fbb123276823c2383fc34b7a55404d7> /usr/lib/system/libxpc.dylib
0x35935000 - 0x35973fff  VideoToolbox armv7  <250b8df69b3c3f929f30463d218b7462> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x35974000 - 0x35976fff  OAuth armv7  <d3e2bc9ae64b31f0a89c52dc1c2797fc> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x35ba0000 - 0x35ba3fff  MobileSystemServices armv7  <6edd9c74c5a73c33809152446abe1538> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x35db1000 - 0x35db2fff  libsystem_sandbox.dylib armv7  <46cd200d99323aebbf6d81e5fb16424f> /usr/lib/system/libsystem_sandbox.dylib
0x35e21000 - 0x35f1ffff  libobjc.A.dylib armv7  <5224e803eca737a4b2c6451d136b3d28> /usr/lib/libobjc.A.dylib
0x35fa0000 - 0x35facfff  libbsm.0.dylib armv7  <e98708fbfa683df2a91d45dc765071a7> /usr/lib/libbsm.0.dylib
0x36233000 - 0x36295fff  CoreText armv7  <4a0bece315e9316fa1aa1b5923740f55> /System/Library/Frameworks/CoreText.framework/CoreText
0x3629c000 - 0x362b3fff  BackBoardServices armv7  <a5570d37cd3f30cbb9572a9cdb824126> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x362eb000 - 0x363a0fff  CoreImage armv7  <ad658acd554a386fb81bb137a237b5f4> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x363a1000 - 0x363b6fff  liblzma.5.dylib armv7  <2bfdc69b7f403270b2366e5e2448d520> /usr/lib/liblzma.5.dylib
0x36477000 - 0x36566fff  GeoServices armv7  <60e2738ccb9635e9874907d54ea27b68> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x3658f000 - 0x365bdfff  Security armv7  <fb75984442a435cd84aac722142d5a44> /System/Library/Frameworks/Security.framework/Security
0x365be000 - 0x365befff  Accelerate armv7  <22bee3e96cbc3538bfc50ca5be618cc0> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x36673000 - 0x36699fff  libtidy.A.dylib armv7  <134c41c587fb33dca014bd525f68a0c7> /usr/lib/libtidy.A.dylib
0x36749000 - 0x36768fff  WebBookmarks armv7  <ed705f425035329d96ede473f023ed84> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x36769000 - 0x367befff  CoreTelephony armv7  <e5b7289acd1231acb950569a81c10ac1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x36835000 - 0x36838fff  libmacho.dylib armv7  <2a9fe0b48f473d0f8fe2bf076cd12753> /usr/lib/system/libmacho.dylib
0x36863000 - 0x36b74fff  Altitude armv7  <6679eb99396833dfae5041e9a9667c8d> /System/Library/PrivateFrameworks/Altitude.framework/Altitude
0x36b81000 - 0x36bdafff  libvDSP.dylib armv7  <ad4c53081a263f0d96f63b9a80f2ae91> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x36bdb000 - 0x36becfff  SpringBoardServices armv7  <8b9821bc87ba354297392cb50da7be58> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x36c8d000 - 0x36e50fff  Foundation armv7  <2e1ac190c4f837e2a1059043dd7b1c63> /System/Library/Frameworks/Foundation.framework/Foundation
0x36e5e000 - 0x36eaafff  IMFoundation armv7  <fd1c50ba98f9307f8b06d074aed412b0> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x36f90000 - 0x37016fff  libsystem_c.dylib armv7  <d45dc8901531343caf9b7e703d3eba50> /usr/lib/system/libsystem_c.dylib
0x37a4f000 - 0x37a74fff  OpenCL armv7  <f7e2cb8404653022bf5cdea17bc5d06f> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x37aac000 - 0x37ae7fff  libCGFreetype.A.dylib armv7  <bc5b8d4a10863ce192acf26428e68da7> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x37b3f000 - 0x37b54fff  libmis.dylib armv7  <3afeeea531013420af75315d8d6dd332> /usr/lib/libmis.dylib
0x37b55000 - 0x38484fff  WebCore armv7  <29cc251f63fe3a9eb16e96742b88ac4f> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x384bb000 - 0x38514fff  MobileCoreServices armv7  <d831f1f9285535acac5035a29d84aaaf> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x38695000 - 0x38699fff  IOSurface armv7  <959e67366a553eca85e6ccfa2d668366> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x386ee000 - 0x386f1fff  AggregateDictionary armv7  <df4096b1cdc5335790db9a2a51e6b029> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x386f2000 - 0x386f5fff  libcache.dylib armv7  <e08b913e17753180b91728a8bd5dda7b> /usr/lib/system/libcache.dylib
0x38940000 - 0x38a55fff  QuartzCore armv7  <d96571a6986c3012b315cb860f4d65ca> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x38a56000 - 0x38a64fff  libsystem_network.dylib armv7  <d0fb0eda6cb53a4da859d598c59e7522> /usr/lib/system/libsystem_network.dylib
0x38af2000 - 0x38b0dfff  libRIP.A.dylib armv7  <51845c89677f3e77aeb221c44bda48f1> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x38b36000 - 0x38b3bfff  CrashReporterSupport armv7  <7bde3532f2953f3894eb725379575926> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x38cc0000 - 0x38cc9fff  libbz2.1.0.dylib armv7  <5258dce78afc3fd7934a5674b92ad785> /usr/lib/libbz2.1.0.dylib
0x38cd6000 - 0x38ce2fff  libMobileGestalt.dylib armv7  <0338ce49444332ec88cfc45c624bb39b> /usr/lib/libMobileGestalt.dylib
0x38ce5000 - 0x38cebfff  libAccessibility.dylib armv7  <9e8bfe02e370375ea8439ab895528982> /usr/lib/libAccessibility.dylib
0x38d13000 - 0x38df6fff  libBLAS.dylib armv7  <56d8e00447133cd89457deec007327cb> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x38f2c000 - 0x38f32fff  libcommonCrypto.dylib armv7  <690aaa493b5c3f9582499f174adf4964> /usr/lib/system/libcommonCrypto.dylib
0x38f33000 - 0x38f8bfff  CoreLocation armv7  <7bca9c29b3d23f61ba0e28af9e8ee357> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x38f8c000 - 0x38f93fff  OpenGLES armv7  <e035b741746c316dba8f1e59a568bf17> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x38fc1000 - 0x38fc3fff  libcompiler_rt.dylib armv7  <7add7c91a2673641b0c5f0433a203da6> /usr/lib/system/libcompiler_rt.dylib
0x390cf000 - 0x390ecfff  PersistentConnection armv7  <cd76b3fcb0db3922ad62f547ab2e55fb> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x39102000 - 0x39122fff  libxslt.1.dylib armv7  <7f6f63b31f333c41952f685fdd54a6cb> /usr/lib/libxslt.1.dylib
0x39127000 - 0x3918bfff  AddressBook armv7  <bdf14ca2b4fb32e5bdb2a9fafb460f09> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x3918c000 - 0x3918dfff  libremovefile.dylib armv7  <6a0dd04f0710329b9c1722db2235f5c3> /usr/lib/system/libremovefile.dylib
0x3918e000 - 0x391d7fff  IOKit armv7  <635953fdb81237e991ab57ccff92e97d> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x39203000 - 0x39204fff  DataMigration armv7  <25f8874067393208acc083124bc3eb86> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3924f000 - 0x3924ffff  libCVMSPluginSupport.dylib armv7  <1fd63e8305ab3ca190b1ef6ab2555f9d> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x39250000 - 0x39251fff  CoreSurface armv7  <aa216ca3e2e0381ea8cf9abbd6f430f4> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x39454000 - 0x39459fff  CommonUtilities armv7  <cb484bdaf5003e4baa13f83bafff62a9> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x394a2000 - 0x39648fff  JavaScriptCore armv7  <8171afa18a08371c89cab6c9d823d1c5> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x39660000 - 0x396abfff  libstdc++.6.dylib armv7  <55a7612b28c43cfcad7089b688591b80> /usr/lib/libstdc++.6.dylib
0x396b2000 - 0x396b7fff  libcopyfile.dylib armv7  <15aa2c3c8d523273913d4fc6717d3b7c> /usr/lib/system/libcopyfile.dylib
0x396eb000 - 0x396ecfff  libdyld.dylib armv7  <3a149b4730663b1ea84e4a0a68ccc689> /usr/lib/system/libdyld.dylib
0x39775000 - 0x3977cfff  XPCObjects armv7  <5bc4f7282e9d3945a6c1885217670667> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x39a01000 - 0x39ac6fff  CFNetwork armv7  <3e973794a4d13428bb974edcb2027139> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x39b83000 - 0x39b99fff  libCRFSuite.dylib armv7  <9b3fd56781103f209be2c43e48c1efc9> /usr/lib/libCRFSuite.dylib
0x39d40000 - 0x39d40fff  libkeymgr.dylib armv7  <8a2e3a8fdf9335e2867a33e2d1a9baf8> /usr/lib/system/libkeymgr.dylib
0x39d7b000 - 0x39d93fff  libsystem_info.dylib armv7  <be3d5625aed733ffb2d53400655fe110> /usr/lib/system/libsystem_info.dylib
0x39d94000 - 0x39d95fff  libdnsinfo.dylib armv7  <6c912cedc1e938ad914dfce91a529b68> /usr/lib/system/libdnsinfo.dylib
0x39d9b000 - 0x39d9efff  MobileInstallation armv7  <e6b6ae9d4f5f3831a40fcc370afc1429> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x39dcd000 - 0x39ddafff  TelephonyUtilities armv7  <19dbc34167323bca9510012b926d8cf7> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x39e40000 - 0x39e96fff  CoreAudio armv7  <a3a2eb3a29443b42a23aa8ecb1232846> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x39ea9000 - 0x39ed1fff  PrintKit armv7  <a8ef6136b9773d42ac20f7eb54279039> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x39f8b000 - 0x39f97fff  GenerationalStorage armv7  <74d50f4c8d243a35ad3ae89d85f2793a> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x39f98000 - 0x39fb1fff  DictionaryServices armv7  <e1f8d258d02c344cb0d17cec31818d3f> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x39fed000 - 0x39ff9fff  AccountSettings armv7  <0b7524e9a8ef36bf9e9f6a5c445478af> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x3a0cb000 - 0x3a0dcfff  Accounts armv7  <07b95faa96e73ffeb52694cbad7f3528> /System/Library/Frameworks/Accounts.framework/Accounts
0x3a0e2000 - 0x3a117fff  libcorecrypto.dylib armv7  <ebd023957d853fa8bd35309592e92dac> /usr/lib/system/libcorecrypto.dylib
0x3a118000 - 0x3a12bfff  libc++abi.dylib armv7  <c5a5f03138353747b539e620ef2bb5c0> /usr/lib/libc++abi.dylib
0x3a189000 - 0x3a18bfff  TCC armv7  <f641dd0500fa3f0087d93da665ea84b8> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x3a18f000 - 0x3a1a4fff  libresolv.9.dylib armv7  <e79b59a3406f34d9b37f8085955115ce> /usr/lib/libresolv.9.dylib
0x3a22b000 - 0x3a248fff  libdispatch.dylib armv7  <4abccf75caf33fa5a0c6037b2e1c5f41> /usr/lib/system/libdispatch.dylib
0x3a249000 - 0x3a254fff  GraphicsServices armv7  <c5879083e8693aba827c78a32abe2391> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3a2b4000 - 0x3a2bcfff  ProtocolBuffer armv7  <359ccc7700c93d58adbbd74ecfda80d9> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x3a2c9000 - 0x3a2e5fff  libsystem_m.dylib armv7  <7b2a25c750063de480f6a691f716b9d7> /usr/lib/system/libsystem_m.dylib
0x3a2e6000 - 0x3a2f8fff  DataAccessExpress armv7  <000fb77814ee3ca0841e14bbba48867d> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x3a322000 - 0x3a496fff  VectorKit armv7  <3b697bc4593d3e9596ae9f73ff75e5cb> /System/Library/PrivateFrameworks/VectorKit.framework/VectorKit
0x3a560000 - 0x3a560fff  liblangid.dylib armv7  <a04b639c18593885bd81bfa623a6f07c> /usr/lib/liblangid.dylib
0x3a593000 - 0x3a59cfff  AssetsLibraryServices armv7  <e51cbfefefbc30b6b47d99739123033e> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x3a59d000 - 0x3a59dfff  libsystem_blocks.dylib armv7  <993c9bfe8bf031548b9ddba63cc17015> /usr/lib/system/libsystem_blocks.dylib
0x3a9ac000 - 0x3a9b2fff  MobileKeyBag armv7  <a81d768a49cf37a1a111594d39cea3fe> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x3a9c4000 - 0x3a9cafff  libsystem_dnssd.dylib armv7  <6c1c1aaf9a3537d7ada4b519d14da7ab> /usr/lib/system/libsystem_dnssd.dylib
0x3b119000 - 0x3b171fff  ManagedConfiguration armv7  <fa250e174ca43d3c93a61e41f0df9771> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x3b1d5000 - 0x3b1d9fff  libGFXShared.dylib armv7  <6a8f59f89218372d9f24c4193a179008> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x3b202000 - 0x3b203fff  IOAccelerator armv7  <de8af6be681832008d180d7424d55f0d> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x3b214000 - 0x3b2c1fff  libxml2.2.dylib armv7  <ef245c0afc113f54b6f30921671edab2> /usr/lib/libxml2.2.dylib
0x3b5ee000 - 0x3b638fff  libc++.1.dylib armv7  <a361a382693032b9bdfb2860033b3024> /usr/lib/libc++.1.dylib
0x3b9ee000 - 0x3bb2cfff  vImage armv7  <a7fd7fcd7041356db2ca297402ab6e8c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x3bb2d000 - 0x3bb3cfff  CoreVideo armv7  <092f3aa965803a1aaea69af2ac5143f5> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x3bc6b000 - 0x3bdb4fff  libicucore.A.dylib armv7  <0253932c1b9038a0849ef73c38e076ca> /usr/lib/libicucore.A.dylib
0x3be4b000 - 0x3be4dfff  libCoreVMClient.dylib armv7  <4fd03b13dbfe32628adc789367f48ce1> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x3be78000 - 0x3bfaafff  CoreFoundation armv7  <e30fc309df7b3c9f8ac57f0f6047d65f> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3bfdb000 - 0x3c3eefff  FaceCoreLight armv7  <0cb7a12beb3d32c1abd1834be8328b7c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x3c409000 - 0x3c4e5fff  WebKit armv7  <2b33136aa86e383a83d32908bddc9667> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3c4e6000 - 0x3c4e6fff  libunwind.dylib armv7  <85e7546accc23ae1a973da4758512b7f> /usr/lib/system/libunwind.dylib
0x3c4e7000 - 0x3c514fff  MobileAsset armv7  <7ef1c10c0c493ad4b0073de317f2448d> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x3c549000 - 0x3c7fefff  libLAPACK.dylib armv7  <dd6f3958c3d536d6be90836682d2ffee> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:30:05.063

Xcode 可以为你符号化这种类型的崩溃日志。我认为最新的 Xcode 不允许拖入设备日志（无论如何对我不起作用），但您**可以**将文件放入 ~/Library/Logs/CrashReporter/MobileDevice/whatever-you-want/whatever-filename。崩溃，然后在 Xcode 中打开 Organizer。崩溃日志应该在设备日志中可见（顶部的日志，而不是设备日志之一），并且应该自动进行符号化。

我为此编写了一个脚本，并将其粘贴在一个单独的问题中：[Symbolicating iPhone App Crash Reports](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports/14242212#14242212)（我提到了 QuincyKit，但您上述格式的任何崩溃日志都可以正常工作）。

编辑：从 Kerni 的评论中，我注意到为了拖放到 Xcode Organizer，您需要（至少）1）正确命名文件（它需要扩展名“.crash”），以及 2）删除奇怪的字符，如 Kerni 解释在这里评论。可以修补 QK 客户端/服务器代码来执行此操作。请参阅上面链接的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:08:21.883

您可能想查看以下答案：[iOS 崩溃报告：atos not working as expected](https://stackoverflow.com/questions/13574933/ios-crash-reports-atos-not-working-as-expected/13576028#13576028)

除了使用您自己的应用程序的地址调用之外`atos`，您还必须首先计算正确的地址，因为`0x000791e4`运行时的地址会因[ASLR](http://en.wikipedia.org/wiki/ASLR)而变化。而且由于您的 dSYM 在构建时只知道地址布局，因此您需要先进行上述答案中提到的计算。

除此之外，那次崩溃的重要信息就在这`Last Exception Backtrace`部分。获得这个符号的最简单方法是将崩溃报告拖到 Xcode 管理器`Device Logs`部分。这会将`Last Exception Backtrace`零件转换为适当的堆栈跟踪。如果这不起作用，请搜索您的应用程序范围内的地址并手动符号化这些地址。您的应用程序的范围也显示在下面崩溃报告的第一行中`Binary Images`。

# php - 即使使用 mysql_real_escape_string，PHP 字符串中的单引号也会破坏 SQL 语句

> ID：14294224
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:23:31.473
> 
> 标签：php, html, mysql, sql

我有一个博客文章的表格，每当我有一个单引号（例如，那是）时，SQL 插入代码就会中断。我尝试过使用 mysql_real_escape_string：

```
$Description = mysql_real_escape_string($_POST['Description']); 
```

但这不起作用。我也尝试使用 htmlspecialchars()，但是对于这些帖子，我需要能够使用 HTML 代码来添加链接和图像。

我更新了 SQL 代码以像指南所说的那样做，但我仍然没有工作。然后如果没有单引号我可以更新它，所以代码确实有效，但是单引号会造成很多麻烦

```
 $SQL = "UPDATE Posts SET Title = '$Title',LinkTitle = '$LinkTitle',MainPicture = '$MainPic',Description ='".$Description."',Maintext = '$Main',Type = '$SubCategory',Featured = '$Featured'
    ,category = '$Category',thumbnail='$thumb'
    WHERE ID = '$id'"; 
```

**使固定**

感谢 Gaucho 的解决方案，问题是我使用 mysqli 连接到数据库。将连接代码更改为正常的 mysql_connect 解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:24:53.557

您应该使用准备好的语句，PDO 使这很容易做到。那么你不需要引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:25:21.870

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:44:35.860

使用此代码以及您的数据库名称和密码，并报告您正在获取的错误。

mysql_real_escape_string 不是您查询中的问题，因为在我的情况下它工作正常。让我们知道您的 PHP 和 MySQL 版本。

```
 <?php
     // Connect to your database
     mysql_connect("localhost","yourDBuserName","yourDBpassword");

     // Specify database
     mysql_select_db("yourDBname") or die;

     //Build SQL query
     $Description = mysql_real_escape_string("that's amore");
     $query = "select * from Posts where Description ='" . $Description . "'";
     $queryResult=mysql_query($query);
     if (!$queryResult) {
         $message  = 'Invalid query: ' . mysql_error() . "\n";
         $message .= 'Whole query: ' . $query;
         die($message);
     }
     die ($queryResult);
 ?> 
```

我什至建议你用 PhpEd 调试你的代码。注意：我的示例中 mysql_real_escape_string 的结果是“that\\'s amore”。任何不以 Invalid.. 开头的回显字符串都表示查询运行良好。

注意 2：这是连接到服务器的正确方法。

如果要使用 mySqli 进行连接，请使用以下代码进行连接，因为您的操作方式错误：

```
$mysqli = @new mysqli('yourDBaddress', 'yourDBuserName', 'yourDBpassword', 'yourDBname');

if ($mysqli->connect_errno) {
    die('Connect Error: ' . $mysqli->connect_errno);
} 
```

# java - 模型应该更改 UI 还是同时更改 UI？

> ID：14294230
> 
> 赞同：0
> 
> 时间：2013-01-12T14:24:50.170
> 
> 标签：java, android, model-view-controller, user-interface, separation-of-concerns

我开始想知道**模型**和 UI 之间的依赖关系和调用顺序，分别是控制器 -**活动类**：

当我想在方法中恢复我的 Android 应用程序的状态时，我`onRestoreInstanceState`应该：

1.  更新模型的状态，然后调用更新 UI 的活动？
2.  更新模型的状态，然后根据模型状态更新UI？

那么我应该更喜欢哪一个呢？

所以我在这里真正看到的只是如何订购依赖调用的指南，我知道 Android 并没有真正遵循 MVC，那么我应该使用什么作为方向呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:50:45.097

在典型的[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)实现中，人们会提醒视图模型已更新，以便它可以根据更新的模型重新渲染自己。正如维基百科所说：

> 当模型的状态发生变化时，模型会通知其关联的视图和控制器。此通知允许视图生成更新的输出，并允许控制器更改可用的命令集。

所以这很像你的 2 号：

> 更新模型的状态，然后根据模型状态更新UI？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:03:41.060

我认为 1 和 2 都可能发生，具体取决于您的应用程序是什么样的。

您的模型可以广播更改事件，可以说活动或片段可以对更新 UI 做出反应。

或者您可能有一个非常简单的模型，或者可能是一个从活动传递到活动的瞬态模型。在这种情况下，您可能更可能只更新该模型中的信息，然后命令 UI 刷新，同时传递模型。

我有点脱节，所以我认为只要你的清晰和一致，两者都很好。当我开始使用片段时，我可能会阅读对模型变化做出反应的最佳方式，他们可能更喜欢广播变化而不是直接调用更新/刷新。

# mysql - 服务器之间的数据库传输

> ID：14294233
> 
> 赞同：0
> 
> 时间：2013-01-12T14:24:55.400
> 
> 标签：mysql, database, web-services, webserver, phpfox

如何将我的数据从一个数据库 (000webhosting.com) 传输到另一个数据库 (shatellhost.com)？注意：我使用 000webhosting.com 免费托管服务，但无法创建完整备份。我的数据是 phpfox 社交网络。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:20:44.010

我在[这里](https://stackoverflow.com/questions/14295154/changing-mysql-database-address/)回答了你的另一个问题。您可以查看 PHPFox 文档以了解如何在代码中配置数据库连接，这通常与您第一次安装 PHPFox 时相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:01:44.027

000webhosting 为您提供了一个名为 phpmyadmin 的工具 - 在这里您可以导出整个数据库，然后您可以在新主机上导入导出的文件 - 您应该在主机管理中了解有关通过 phpmyadmin 连接到数据库的一些信息 :)

# php - 通过几个函数运行一个变量

> ID：14294238
> 
> 赞同：2
> 
> 时间：2013-01-12T14:25:27.590
> 
> 标签：php, function, variables

我试图通过几个函数运行一个变量以获得期望的结果。

例如，对[文本进行 slugify 的函数是](https://stackoverflow.com/questions/2955251/php-function-to-make-slug-url-string)这样工作的：

```
 // replace non letter or digits by -
        $text = preg_replace('~[^\\pL\d]+~u', '-', $text);

        // trim
        $text = trim($text, '-');

        // transliterate
        $text = iconv('utf-8', 'us-ascii//TRANSLIT', $text);

        // lowercase
        $text = strtolower($text);

        // remove unwanted characters
        $text = preg_replace('~[^-\w]+~', '', $text); 
```

但是，我们可以看到这个例子中有一个模式。该`$text`变量通过 5 个函数调用传递，如下所示`preg_replace(..., $text) -> trim($text, ...) -> iconv(..., $text) -> strtolower($text) -> preg_replace(..., $text)`：

有没有更好的方法可以编写代码以允许变量筛选多个函数？

一种方法是像这样编写上面的代码：

```
$text = preg_replace('~[^-\w]+~', '', strtolower(iconv('utf-8', 'us-ascii//TRANSLIT', trim(preg_replace('~[^\\pL\d]+~u', '-', $text), '-')))); 
```

...但这种写作方式是一个笑话和嘲弄。它阻碍了代码的可读性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:35:52.943

由于您的“功能管道”是固定的，因此这是最好的（并非巧合的是最简单的）方法。

如果要动态构建管道，那么您可以执行以下操作：

```
// construct the pipeline
$valuePlaceholder = new stdClass;
$pipeline = array(
    // each stage of the pipeline is described by an array
    // where the first element is a callable and the second an array
    // of arguments to pass to that callable
    array('preg_replace', array('~[^\\pL\d]+~u', '-', $valuePlaceholder)),
    array('trim', array($valuePlaceholder, '-')),
    array('iconv', array('utf-8', 'us-ascii//TRANSLIT', $valuePlaceholder)),
    // etc etc
);

// process it
$value = $text;
foreach ($pipeline as $stage) {
    list($callable, $parameters) = $stage;
    foreach ($parameters as &$parameter) {
        if ($parameter === $valuePlaceholder) {
            $parameter = $value;
        }
    }
    $value = call_user_func_array($callable, $parameters);
}

// final result
echo $value; 
```

**[看到它在行动](http://ideone.com/TalAvb)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:29:59.573

将其用作所有五个的组合

```
$text = preg_replace('~[^-\w]+~', '', strtolower(iconv('utf-8', 'us-ascii//TRANSLIT', trim(preg_replace('~[^\\pL\d]+~u', '-', $text), '-')))); 
```

但是请按照您的尝试使用。因为这是一种很好的做法，而不是写在一行中。

# kendo-ui - Kendo Grid DatePicker中的手动输入日期不起作用

> ID：14294240
> 
> 赞同：0
> 
> 时间：2013-01-12T14:25:34.943
> 
> 标签：kendo-ui

我面临一个我无法理解的问题。我正在使用带有 InCell 编辑的 Kendo Grid，并且我的模型中有一个 DateTime 字段。

当网格进入编辑模式时，会显示日历，但如果我从日历中选择值，网格只会保存输入的值。如果我手动输入该字段，则不会保存该值并且未标记的单元格已脏。

如果有帮助，我将 MVC 与 Razor sintax 一起使用。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:02:37.007

我在 Kendo 的论坛中找到了一种解决方法：

> *根据设计，当以编程方式设置值时，DatePicker 不会引发更改事件 - 只有在最终用户修改日期时才会引发。如果需要触发更改事件，可以使用 jQuery trigger()。*
> 
> *例如：*
> 
> `var datePicker = $("#datepicker").data("kendoDatePicker");`
> 
> `datePicker.value("01/01/2001");`
> 
> `datePicker.trigger("change");`

参考： [http ://www.kendoui.c​​om/forums/ui/date-time-pickers/datepicker-change-event.aspx](http://www.kendoui.com/forums/ui/date-time-pickers/datepicker-change-event.aspx)

所以基本上我所做的就是手动强制更改事件。

# javascript - 使用 createObjectURL 动态创建视频（流）

> ID：14294244
> 
> 赞同：3
> 
> 时间：2013-01-12T14:26:21.203
> 
> 标签：javascript, html, video-streaming, html5-video

我想知道是否可以即时创建 html5 视频。你们中的一些人可能会注意到新的 webrtc 及其与 video 标签的行为。

```
navigator.webkitGetUserMedia('video', gotStream, noStream);

function gotStream(stream) { 
  video.src = webkitURL.createObjectURL(stream);
} 
```

那个“界面”是什么样的“流”`gotStream(stream)`到底是什么，所以我可以自己生成一个？可能是通过计算事物或仅从服务器接收数据来显示视频。其次，我如何从这个“流”中获取数据？所以我可以从一个用户的网络摄像头中读取它，然后将它发送到我的服务器并让它通过接收用户。二进制数据传输不是我的问题，我已经有了这个工作。我只需要来自一个用户的“流”中的数据，并在想要查看用户网络摄像头的目标用户上重建该“流”。

关于“我自己在哪里获取这些信息”（API Docu 之类的）的任何进一步信息也将非常有帮助，因为我找不到任何信息。

我知道 PeerConnection 的东西，所以这里不需要提及。因为除了网络摄像头的东西之外，我还想将动态生成的视频从我的服务器传输到客户端，或者使用 ffmpeg 等通过动态可变带宽进行某种视频传输，但为此我需要将该数据传输到该`video`元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T19:21:23.633

您可能想查看 Whammy：[http](http://antimatter15.com/wp/2012/08/whammy-a-real-time-javascript-webm-encoder/) ://antimatter15.com/wp/2012/08/whammy-a-real-time-javascript-webm-encoder/ 。

目前，您可以定期将视频元素屏幕复制到画布，然后保存该画布以构建视频。Whammy 利用 webp（图像）和 webm（视频）格式的相似性，将从画布生成的 webp 图像连接到 webm 文件中。

您可以生成其他图像并以相同的方式将它们拼接在一起。请注意，这不支持音频。

# upload - 为什么proc上传这么慢？

> ID：14294246
> 
> 赞同：5
> 
> 时间：2013-01-12T14:26:28.533
> 
> 标签：upload, sas

我还在[runsubmit.com](http://www.runsubmit.com/questions/1052/why-is-proc-upload-so-slow)上发布了这个问题，这是一个 SE 网络之外的网站，用于解决 SAS 相关问题。

在工作中，我使用了 2 台 sas 服务器。当我通过 proc 上传将 sas 数据集从一个传输到另一个时，它的传输速度约为 2.5MB/s。但是，如果我将一台服务器上的驱动器映射为网络驱动器并复制并粘贴文件，它的运行速度会快得多，大约为 80MB/s（通过相同的千兆连接）。

谁能建议可能导致此问题的原因以及我可以做些什么来解决它或作为解决方法？

我还使用了第三台服务器，它无法在其他两个服务器上映射网络驱动器——SAS 是唯一可用的从该服务器传输文件的方法，因此我需要一个基于 SAS 的解决方案。尽管这一次的单个传输以 2.5MB/s 的速度运行，但我发现可以同时进行多个传输，每个传输速度为 2.5MB/s。

通过文件名和数据步骤的 SAS FTP 会比使用 proc 上传更快吗？接下来我可能会尝试，但我不想使用它——我们只有 SAS 9.1.3，所以 SFTP 不可用。

**更新 - 更多细节：**

*   我正在连接到一个生成器，我认为它使用“SAS 专有加密”（基于我记得在日志中看到的内容）。
*   在第一种情况下，上传是 Windows 客户端 -> Windows 远程，在第二种情况下是 Unix 客户端 -> Windows 远程。
*   所讨论的 SAS 数据集被压缩（即通过 SAS，而不是某些外部压缩实用程序）。
*   使用 proc upload 以二进制模式传输外部文件 (.bz2) 时，传输速率相似。
*   所有服务器都有由企业级控制器处理的非常快速的磁盘阵列（RAID 10 中至少 8 个驱动器）

**潜在的解决方案**

*   并行 PROC UPLOAD - 可能足够快，但 CPU 非常繁重
*   PROC COPY - 比 PROC UPLOAD 快得多，CPU 开销要少得多
*   SAS FTP - 不安全、未知速度、未知 CPU 开销

**更新 - 测试结果**

*   Parallel PROC UPLOAD：涉及大量设置*和大量 CPU，但运行良好。
*   PROC COPY：每个会话的传输速率与 proc 上传完全相同，并且使用了更多的 CPU 时间。
*   FTP：大约快 20 倍，最少的 CPU（100MB/s 对 2.5MB/s 每个并行 proc 上传）。

*我最初尝试了以下方法：

> 本地会话 -> 源服务器上的远程会话 -> 目标服务器上的 n 个远程会话 -> 重组目标服务器上的 n 个片段

尽管这导致 n 次同时传输，但它们均以原始速率的 1/n 运行，可能是由于源服务器上的 CPU 瓶颈。为了让它以 n 倍于单次传输的带宽工作，我必须将其设置为：

> 本地会话 -> 源服务器上的 n 个远程会话 -> 目标服务器上每个远程会话 1 个 -> 重新组合目标服务器上的 n 个片段

**SAS FTP 代码**

```
filename source ftp '\dir1\dir2'
host='servername'
binary dir
user="&username" pass="&password";

let work = %sysfunc(pathname(work));
filename target "&work";
data _null_;
infile source('dataset.sas7bdat') truncover;
input;
file target('dataset.sas7bdat');
put _infile_;
run; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:09:23.847

我对 PROC UPLOAD 的理解是，它正在执行文件的逐记录上传以及一些转换和检查，这在某些方面很有帮助，但不是特别快。另一方面，PROC COPY 会很高兴地复制文件，而无需非常小心地维护索引和约束之类的东西；但它会快得多。您只需为服务器的文件定义一个 libref。

例如，我登录到我的服务器并为其分配“unix”昵称。然后我在上面定义了一个库： `libname uwork server=unix slibref=work;`

然后我使用随机生成的 1e7 行数据文件执行以下 PROC COPY 代码。之后，我还 RSUBMIT 一个 PROC UPLOAD 以进行比较。

```
48   proc copy in=work out=uwork;
NOTE: Writing HTML Body file: sashtml.htm
49   select test;
50   run;

NOTE: Copying WORK.TEST to UWORK.TEST (memtype=DATA).
NOTE: There were 10000000 observations read from the data set WORK.TEST.
NOTE: The data set UWORK.TEST has 10000000 observations and 1 variables.
NOTE: PROCEDURE COPY used (Total process time):
      real time           13.07 seconds
      cpu time            1.93 seconds

51   rsubmit;
NOTE: Remote submit to UNIX commencing.
3    proc upload data=test;
4    run;

NOTE: Upload in progress from data=WORK.TEST to out=WORK.TEST
NOTE: 80000000 bytes were transferred at 1445217 bytes/second.
NOTE: The data set WORK.TEST has 10000000 observations and 1 variables.
NOTE: Uploaded 10000000 observations of 1 variables.
NOTE: The data set WORK.TEST has 10000000 observations and 1 variables.
NOTE: PROCEDURE UPLOAD used:
      real time           55.46 seconds
      cpu time            42.09 seconds

NOTE: Remote submit to UNIX complete. 
```

PROC COPY 仍然不如 OS 复制快，但速度要快得多。PROC UPLOAD 实际上比常规数据步骤要慢很多，因为它正在做一些检查；实际上，由于数据集的简单性，这里的数据步骤与 PROC COPY 相当（并且可能是我有 64k 块大小的事实，这意味着数据步骤正在使用服务器的 16k 块大小，而 PROC COPY 可能没有）。

```
52   data uwork.test;
53   set test;
54   run;

NOTE: There were 10000000 observations read from the data set WORK.TEST.
NOTE: The data set UWORK.TEST has 10000000 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           12.60 seconds
      cpu time            1.66 seconds 
```

一般来说，在“现实世界”的情况下，PROC COPY 比数据步骤快，但两者都比 PROC UPLOAD 快 - 除非您因为情况复杂而需要使用 proc upload（我从来没有看到过这样做的理由，但我知道这是可能的）。我认为 PROC UPLOAD 在旧版本的 SAS 中更为必要，但现在基本上不需要了，但鉴于我在硬件设置方面的经验相当有限，这可能不适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:04:14.107

FTP（如果可以从源服务器获得）比 proc 上传或 proc 复制快得多。它们都在逐个记录的基础上运行，并且可以通过快速网络连接受 CPU 限制，特别是对于非常宽的数据集。单个 FTP 传输将尝试使用所有可用带宽，而 CPU 成本可以忽略不计。

这假设目标服务器可以使用未修改的传输文件 - 如果不能，使其可用所需的时间可能会抵消 FTP 增加的传输速度。

# c# - 具有多个参数的 URL 作为 ASP.NET 中的查询字符串

> ID：14294248
> 
> 赞同：5
> 
> 时间：2013-01-12T14:26:39.043
> 
> 标签：c#, asp.net, escaping, query-string, adfs

在 ASP.NET 中，我构建了一个字符串`redirectURL`以重定向到`ADFS`具有多个查询字符串参数的表单。一个这样的复杂参数是`returnURL`具有多个参数的。

我的问题是实际返回时只有第一个参数`returnURL`可用。

```
E.g. redirectURL = <br> 
https://aaa.aaa/adfs/Form.aspx <br>
?DomainName=domain <br>
&AccountName=account <br>
&returnURL=https://bbb.bbb/MyPage.aspx?param1=111&param2=222 
```

我知道在识别`&amp symbol`实际参数和`returnURL`. 请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T14:37:22.403

编写链接时应使用**HttpUtility.UrlEncode ，解析链接时应使用****HttpUtility.UrlDecode**。

对于您的情况，它应该类似于：

```
"https://aaa.aaa/adfs/Form.aspx?DomainName=domain&AccountName=account&returnURL=" + 
    HttpUtility.UrlEncode("https://bbb.bbb/MyPage.aspx?param1=111&param2=222") 
```

然后在目标使用：

```
HttpUtility.UrlDecode(Request.QueryString["returnURL"]) 
```

# windows-phone-7 - WP7 Silverlight 应用程序中的计数器

> ID：14294250
> 
> 赞同：0
> 
> 时间：2013-01-12T14:26:54.553
> 
> 标签：windows-phone-7, counter

我正在用 c# silverlight 编写扫雷游戏。
1\. 我怎样才能在这个应用程序中添加一个计数器（只计算秒数）？
2\. 当应用程序进入后台（中键、搜索键、来电等）时，如何停止计数器？
3\. WP7正在关闭我的申请流程时，我该怎么办？例如将当前游戏保存到隔离存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:32:46.533

1）你需要使用[定时器](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

```
 timer.Tick += new EventHandler(timer_Tick); // Everytime timer ticks, timer_Tick will be called
        timer.Interval = (1000) * (10);             // Timer will tick evert 10 seconds
        timer.Enabled = true;                       // Enable the timer
        timer.Start();                              // Start the time

void timer_Tick(object sender, EventArgs e)
        {
           //Do something
        } 
```

2）您需要处理 OnNavigatedFrom 事件：

```
private void Application_Deactivated(object sender, DeactivatedEventArgs e)
{
    //Do something
} 
```

3) 这里有 4 个有用的事件：

```
 // Code to execute when the application is launching (eg, from Start)
// This code will not execute when the application is reactivated
private void Application_Launching(object sender, LaunchingEventArgs e)
{
    //Do something
}

// Code to execute when the application is activated (brought to foreground)
// This code will not execute when the application is first launched
private void Application_Activated(object sender, ActivatedEventArgs e)
{
    //Do something
}

// Code to execute when the application is deactivated (sent to background)
// This code will not execute when the application is closing
private void Application_Deactivated(object sender, DeactivatedEventArgs e)
{
    //Do something
}

// Code to execute when the application is closing (eg, user hit Back)
// This code will not execute when the application is deactivated
private void Application_Closing(object sender, ClosingEventArgs e)
{
    //Do something
} 
```

在这里您可以阅读有关处理此事件的更多信息：http: [//msdn.microsoft.com/en-us/library/hh821027.aspx](http://msdn.microsoft.com/en-us/library/hh821027.aspx)

# jquery - 在完成执行之前获取 jquery 的 slideToggle() 的最终高度 - 在 CSS 中没有固定高度

> ID：14294258
> 
> 赞同：1
> 
> 时间：2013-01-12T14:27:55.377
> 
> 标签：jquery, jquery-animate, height, slidetoggle

我需要`div B`在我的网站上根据另一个的运行时变化高度动态更新`div A`。`div A`使用 jquery `slideToggle()`[在`div A`] 内的几个 div 上，但`div B`只能（同时）更改以匹配`div A`. `panel_toggle1`并`panel1`包含在里面`div A`：

```
$(document).ready(function () {
    $("#panel_toggle1").click(function () {
        $("#panel1").slideToggle("slow", function () {
            var divAheight = $("#divA").height();
            $("#divB").animate({ height: divAheight }, "slow");
        });
    });
}); 
```

上面的代码基本上是我想要的，但是，由于`callback()`，它在对另一个 div 执行幻灯片效果之前等待`slideToggle()`完成（我被迫这样做，因为在完成之前不会`sliteToggle()`吐出 final ）。`height()``div A`

有没有办法做到这一点，以便同时`div A`顺利`div B`更新？即有没有办法让高度在完成*之前*`slideToggle()`更新（这样我就可以在与on相同的时间调用）？`div A` *`.animate()``div B``div A`*

 **注意：我不为 CSS 中的任何 div 使用固定高度，我想保持简单*

**或者**，有没有办法让我只用 CSS`div B`来匹配`div A`高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:47:40.670

如果您能够设置 divA 的固定目标高度，则解决方案将很简单，您只需将动画设置为同时运行，例如通过设置`queue=false`.

由于您似乎想在不知道原始动画的结果高度的情况下同时运行这些动画，因此一种解决方法是使用两个动画来实现效果：

```
var $divB = $("#divB");
$divB.animate({
   height: '600px' // some arbitrary height approaching target height
}, { duration: 5000 /* longer than the next animation */, queue: false });
$("#panel1").slideToggle({
   duration: 'slow', 
   queue: false,
   complete: function () {
       var divAheight = $("#divA").height();
       // stop the animation and begin another with the correct target height
       $divB.stop().animate({ height: divAheight }, "slow");
   }
}); 
```

在这里，两个 div 同时开始动画。当 slideToggle 动画完成时，代码停止 divB 的高度动画并开始一个新的 divB = divA 高度的高度动画。有点 hacky，但你必须等到第一个动画完成才能获得更新的高度。

另一种选择是执行计算以获取 slideToggle 结果的高度，然后同时运行动画：

```
var newHeight = $("#divA").height() - $("#panel1").height(); 
var $divB = $("#divB");
$divB.animate({
   height: newHeight + 'px'
}, { duration: 'slow', queue: false });
$("#panel1").slideToggle({
   duration: 'slow', 
   queue: false
}); 
```*

# c++ - 数字类型的类模板

> ID：14294267
> 
> 赞同：45
> 
> 时间：2013-01-12T14:28:44.873
> 
> 标签：c++, templates

如何编写只接受数字类型（、、、等）作为模板的`int`类`double`模板`float`？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-12T14:29:39.163

您可以使用[`std::is_arithmetic`](http://en.cppreference.com/w/cpp/types/is_arithmetic)类型特征。如果您只想启用具有此类类型的类的实例化，请将其与以下内容结合使用[`std::enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)：

```
#include <type_traits>

template<
    typename T, //real type
    typename = typename std::enable_if<std::is_arithmetic<T>::value, T>::type
> struct S{};

int main() {
   S<int> s; //compiles
   S<char*> s; //doesn't compile
} 
```

对于`enable_if`更易于使用的版本，以及免费添加的`disable_if`，我强烈建议您阅读这篇关于此事的[精彩文章](http://web.archive.org/web/20170705074036/https://rmf.io/cxx11/almost-static-if)。

在 C++ 中，上述技术有一个名为“替换失败不是错误”的名称（大多数使用首字母缩写词 SFINAE）。[您可以在wikipedia](https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)或[cppreference.com](http://en.cppreference.com/w/cpp/language/sfinae)上阅读有关此 C++ 技术的更多信息。

从 C++20 开始，[概念](https://en.cppreference.com/w/cpp/language/constraints)使这变得更容易并且不会破坏界面：

```
#include <concepts>

template<typename T>
concept arithmetic = std::integral<T> or std::floating_point<T>;

template<typename T>
  requires arithmetic<T>
struct S{};
// Shorthand: template<arithmetic T> struct S {}; 
```

请注意，有许多用户类型也意味着在算术上使用，因此在通用接口中更可取的是涵盖您正在寻找的*操作*而不是您正在寻找的*类型的更一般的概念。*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-05-10T18:05:50.380

我发现从该`template<typename T, typename = ...>`方法收到的错误消息非常神秘（VS 2015），但发现`static_assert`具有相同类型特征的 a 也可以工作，并让我指定错误消息：

```
#include <type_traits>

template <typename NumericType>
struct S
{
    static_assert(std::is_arithmetic<NumericType>::value, "NumericType must be numeric");
};

template <typename NumericType>
NumericType add_one(NumericType n)
{
    static_assert(std::is_arithmetic<NumericType>::value, "NumericType must be numeric");
    return n + 1;
}

int main()
{
    S<int> i;
    S<char*> s; //doesn't compile

    add_one(1.f);
    add_one("hi there"); //doesn't compile
} 
```

# php - 如何创建一个数组类型变量的集合，其中一些变量名称相似，而其他部分正在递增？

> ID：14294270
> 
> 赞同：1
> 
> 时间：2013-01-12T14:29:00.753
> 
> 标签：php

我想制作 10 个变量，名称分别为 answer-1、answer-2、answer-3 等。我可以以这种方式使用for循环来创建变量，如果不能，我该怎么做？

```
<?php
for(i=1;i<=10;i++){
$answer_+i=new array();
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:44:18.657

您的 PHP 语法完全错误（是的，您错过了一些`$`s 并添加了额外的`new`）。您可以使用以下语法创建它们。它称为[变量变量](http://php.net/manual/en/language.variables.variable.php)

```
for($i=1;$i<=10;$i++){
    ${"answer_$i"} = array();
} 
```

但我建议你为此使用数组。数组更方便。

```
for($i=1;$i<=10;$i++){
    $answer[$i] = array();
} 
```

这里`$answer_1`是你的意愿`$answer[1]`。最好是不使用显式索引

```
for($i=1;$i<=10;$i++){
    $answer[] = array();
} 
```

现在`$answer_1`将`$answer[0]`。`for`你可以通过,来循环它`foreach`，可以使用很多[数组函数](http://php.net/array)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:47:37.073

您可以按照另一个答案中的说明进行操作，但通常以下方法更适合：

```
<?php
$answers = array();
for($i=1;$i<=10;$i++){
$answers[]= array("blah", "123");
}
?> 
```

因此，您可以通过以下方式访问答案#4：

```
<?php
$answers = array();
for($i=1;$i<=10;$i++){
$answers[]= array("blah", $i);
}
echo $answers[3] //array indexes start at 0!
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:49:13.670

您应该考虑使用多维数组，例如：

```
$answers = array(
  1 => array(),
  2 => array()
); 
```

... 或者 ...

```
for($i=1;$i<=10;$i++)
  $answers[$i] = array(); 
```

# c++ - 强制在编译时评估常量表达式？

> ID：14294271
> 
> 赞同：11
> 
> 时间：2013-01-12T14:29:01.020
> 
> 标签：c++, c++11, evaluation, compile-time, constexpr

几天前，我问编译器根据哪些标准决定是否在编译期间计算 constexpr 函数。

[constexpr 函数何时在编译时进行评估？](https://stackoverflow.com/questions/14248235/when-does-a-constexpr-function-get-evaluated-at-compile-time)

事实证明， constexpr 仅在编译时评估，如果所有参数都是常量表达式并且您分配给它的变量也是常量表达式。

```
template<typename base_t, typename expo_t>
constexpr base_t POW(base_t base, expo_t expo)
{
    return (expo != 0 )? base * POW(base, expo -1) : 1;
}

template<typename T>
void foobar(T val)
{
    std::cout << val << std::endl;
}

int main(int argc, char** argv)
{
    foobar(POW((unsigned long long)2, 63));
    return 0;
} 
```

如果我被告知是真的，那么这个代码示例是非常不切实际的，因为 foobar 不采用 constexpr（由于某种原因，您不能将 constexpr 用于参数），POW 在运行时被评估，即使它本来是可能的在编译时计算它。强制编译时评估的明显解决方案是：

```
auto expr = POW((unsigned long long)2, 63);
foobar(expr); 
```

然而，这迫使我使用额外的代码行，每次我想确保在编译时评估 constexpr 时都不需要这样做。为了让这更方便一点，我想出了以下可疑的宏：

```
#define FORCE_CT_EVAL(func) [](){constexpr auto ___expr = func; return std::move(___expr);}()
foobar(FORCE_CT_EVAL(POW((unsigned long long)2, 63))); 
```

尽管它工作得很好，但我觉得好像有些不对劲。创建匿名 lambda 会影响性能吗？通过右值引用返回是否实际上将表达式移动到函数参数？std::move 如何影响性能？有没有更好的单班轮解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T19:18:26.643

只是为了不让它埋在评论中：

```
#include <type_traits>

#define COMPILATION_EVAL(e) (std::integral_constant<decltype(e), e>::value)

constexpr int f(int i){return i;}

int main()
{
    int x = COMPILATION_EVAL(f(0));
} 
```

### 编辑1：

这种方法的一个警告是，`constexpr`函数可以接受浮点并分配给`constexpr`浮点变量，但不能将浮点类型用作非类型模板参数。此外，其他类型的文字也有相同的限制。

你的 lambda 可以解决这个问题，但我想你需要一个默认捕获来在非`constexpr`东西被传递给函数时获得有意义的错误消息。那个结局`std::move`是可有可无的。

### 编辑2：

错误，您的 lambda 方法对我不起作用，我刚刚意识到，它甚至可以如何工作，lambda 不是`constexpr`函数。它也不应该为你工作。

似乎真的没有办法解决它，而是`constexpr`在本地范围内初始化一个变量。

### 编辑3：

哦，好吧，我的错，lambda的目的只是评估。所以它正在为此工作。相反，它的结果是无法遵循另一个编译时间评估。

### 编辑4：

在 C++17 上，[现在可以在`constexpr`contexts](http://wg21.link/n4487)中使用 lambda ，因此删除了 EDIT2/EDIT3 中提到的限制！所以 lambda 解决方案是正确的解决方案。[有关更多信息，请参阅此评论](https://stackoverflow.com/questions/14309245/single-expression-helper-for-compile-time-enforced-constexpr-function-evaluation/47088427?noredirect=1#comment81127611_47088427)。

# google-maps - 一种仅在 Google 地图上的 KML 文件中显示一行的方法

> ID：14294274
> 
> 赞同：1
> 
> 时间：2013-01-12T14:29:17.203
> 
> 标签：google-maps, kml

当我[将 KML 文件加载到 Google Earth](https://maps.google.com/maps?q=http://rioleo.org/dev/gps/data/2013-01-09T04-36-27Z.kml)时，它显示有两行，我可以在它们之间切换：

![在此处输入图像描述](../Images/099a2b99b9871ef0c6bf57b657bfda84.png)

但我似乎无法使用以下内容仅显示其中一行：

```
var ctaLayer = new google.maps.KmlLayer('http://rioleo.org/dev/gps/data/2013-01-09T04-36-27Z.kml');
ctaLayer.setMap(map); 
```

有没有办法只从 KML 文件中加载一个特定的行？如果没有，如何切换每一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:02:53.893

一种选择是将每一行放在单独的 KML 中`<Folder>`并使用`<open>`0/1

[KML 参考](https://developers.google.com/kml/documentation/kmlreference#open)

# c# - 循环顺序对象

> ID：14294276
> 
> 赞同：1
> 
> 时间：2013-01-12T14:29:34.857
> 
> 标签：c#, winforms, linq, for-loop, iqueryable

我有一个`IQueryable`问题的对象 q。

```
 DataClasses1DataContext dc = new DataClasses1DataContext();
        var q = from a in dc.GetTable<Questions>()
                select a ; 
```

有问题我有`questionId`和`question`。

![在此处输入图像描述](../Images/1a9a3f6e1b982c9ba6f96a949d613363.png)
`IQueryable`我如何根据下一个顺序 遍历数据，`button click event`以便我有第一个问题文本作为`Lebel.Text`我的`DropDown`答案`questionId`，然后在单击下一个问题后我转到第二个问题`IQueryable`并像这样继续直到完成所有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:35:36.097

```
var enumerator = q.AsEnumerable().GetEnumerator();

In event handler:

if(enumerator.MoveNext())
{
      var question = enumerator.Current;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:48:18.150

通常，直接使用`Enumerator`.

如果您需要即时获取问题，请在每次用户按下按钮时发出数据库请求：

```
Question question;

using (dataContext = new DataClasses1DataContext())
    question = dataContext.GetTable<Questions>().Skip(questionIndex).First(); 
```

如果您需要**可以**将所有问题保存在内存中，只需将它们全部投射到应用程序的内存中即可：

```
IList<Question> questions;

using (dataContext = new DataClasses1DataContext())
    questions = dataContext.GetTable<Questions>().ToList(); 
```

此外，保持 SQL（或任何其他数据库）连接保持活动超过其需要是一种不好的做法。原因有很多，其中一个最流行的原因是，在默认 C# 事务实现中读取表时，可能会锁定该表，使其无法处理其他请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:35:56.270

```
ctor()
{
    DataClasses1DataContext dc = new DataClasses1DataContext();
    var q = from a in dc.GetTable<Questions>()
            select a;
    _questionEnumerator = q.GetEnumerator();
}

void btn_click(object sender, EventArgs args)
{
    if (_questionEnumerator.MoveNext())
    {
        var row = _questionEnumerator.Current;
        // do stuff
    }    
} 
```

# php - What is the meaning of 'OFFSET' => 1 (WordPress)

> ID：14294286
> 
> 赞同：0
> 
> 时间：2013-01-12T14:30:29.730
> 
> 标签：php, wordpress

I have this php code for wordpress random post plugin:

```
<?php
global $post;
$tmp_post = $post;
$args = array( 'numberposts' => 5, 'orderby' => 'rand', 'post_status' => 'publish', 'offset' => 1);
$rand_posts = get_posts( $args );
foreach( $rand_posts as $post ) : ?>
    <li><h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2><p><?php the_excerpt(); ?>
    </p></li>
<?php endforeach; ?>
</ul>
<?php $post = $tmp_post; // reset the $post to the original ?> 
```

I wanna know what is the the meaning of the code `'offset' => 1`.i already understand to others such as:

*   Numberpost - how many post you would like to be displayed?
*   Orderby – randomly select from the list of our blog post.
*   Post_status – selects only the blog post which is on Publish status.
*   **Offset - ???**

can someone define this for me.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T14:33:42.600

The offset is used for pagination. From the [docs](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters):

> **offset** (int) - number of post to displace or pass over. Note: Setting offset parameter will ignore the paged parameter.

# android - 只有创建视图层次结构的原始线程才能接触其视图

> ID：14294287
> 
> 赞同：11
> 
> 时间：2013-01-12T14:30:45.463
> 
> 标签：android, imageview

我正在尝试让 ImageView 在我的可绘制文件夹中的 2 个图像之间进行动画处理。

我以为一切都会好起来的，但日志显示错误：`Only the original thread that created a view hierarchy can touch its views.`

这是我的代码：

```
public class ExerciseActivity extends Activity {
    private ExercisesDataSource datasource;
    private Cursor cursor;
    private ImageView image_1_view;
    private Timer _timer;
    private int _index;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_exercise);     

        datasource = new ExercisesDataSource(this);
        datasource.open();

        cursor = datasource.fetchExercise(exerciseDataID);

        image_1_view = (ImageView) findViewById(R.id.exercise_image);

        _index = 1;
        _timer = new Timer();
        _timer.schedule(new TickClass(), 1000);

    }

    public class TickClass extends TimerTask
    {
        private int columnIndex;

        @Override
        public void run() {
            if (_index == 1) {
                columnIndex = cursor.getColumnIndex(MySQLiteHelper.COLUMN_IMAGE_1);
                _index = 2;
            }
            else {
                columnIndex = cursor.getColumnIndex(MySQLiteHelper.COLUMN_IMAGE_2);
                _index = 1; 
            }   

            String image_1 = cursor.getString(columnIndex);
            image_1 = image_1.replace(".png", "");
            int resourceId = getResources().getIdentifier(getPackageName() + ":drawable/" + image_1, null, null);
            image_1_view.setImageDrawable(getResources().getDrawable(resourceId));
        }
    }
} 
```

我继续将类和函数设置为公共，但这并没有解决它。

所有资源和一切都很好，我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-12T14:35:51.200

您的代码在`TickClass`另一个线程上运行。要从这里进行 UI 工作，请使用`runOnUiThread`. 有关详细信息，请参阅[文档](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)。

```
runOnUiThread(new Runnable() {
    public void run() {
        image_1_view.setImageDrawable(getResources().getDrawable(resourceId));
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T14:39:12.337

您应该使用处理程序。[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

在 onCreate 中创建处理程序。然后将处理程序与另一个线程一起使用。将代码封装在帖子中，此代码将在 UI 线程上执行，这可能会更改 UI 组件。

“在 API 级别 1 中添加的公共最终布尔帖子 (Runnable r)

使 Runnable r 添加到消息队列中。可运行对象将在附加此处理程序的线程上运行。”

```
 handler.post( new Runnable() {

        @Override
        public void run() {
            image_1_view.setImageDrawable(getResources().getDrawable(resourceId));
        }
    }); 
```

# sql - 从数据库中选择一个随机行

> ID：14294288
> 
> 赞同：0
> 
> 时间：2013-01-12T14:30:46.427
> 
> 标签：sql, database, hsqldb

我正在寻找一种解决方案，它可以从 hsql db 返回随机行。

```
CREATE TABLE Playlist(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
); 
```

有任何想法吗？

更新：

```
SELECT LIMIT 0 1 RAND(), p.name as foo
From Playlist p
ORDER BY foo 
```

通过此语句，我得到一个随机数，但不是随机播放列表名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:39:02.883

你应该去[如何在 SQL 中请求随机行？](https://stackoverflow.com/questions/19412/how-to-request-a-random-row-in-sql)

它涵盖了很多关于如何做你需要的事情的选项。

```
SELECT p.name as foo
From Playlist p
ORDER BY RAND() LIMIT 1 
```

如果您使用的是 Oracle，则需要使用 Rownum 而不是 limit 的子选择。请参阅[如何限制 Oracle 查询在订购后返回的行数？](https://stackoverflow.com/questions/470542/how-do-i-limit-the-number-of-rows-returned-by-an-oracle-query-after-ordering)

# c# - WPF 多页应用程序 - 如何导航？

> ID：14294290
> 
> 赞同：0
> 
> 时间：2013-01-12T14:31:00.997
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio

我有一个窗口（主窗口），我希望顶部标题是静态的。（内容相同）。下面的内容是动态的，可以是页面或用户控件。

我认为我可以为此目的使用 Frame 或 ContentControl。到目前为止，一切都很好。如果我希望“下一步”按钮（移动另一个页面/用户控件）位于页面或用户控件*内部*，而不是主窗口的一部分，我会遇到麻烦。

如果是这样，我无法访问我的 Frame 或 ContentControl。（假设我的 ContenControl 的名称为 =“MainContent”。然后我无法执行 MainContent.Content(new AnotherPage()); - 因为我无法到达 MainContent）

这完全是正确继承的问题，但我无法弄清楚。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:40:58.530

知道了 ：）

this.Content = new Anotherpage();

我这里的关键词是“这个”

# c# - 在“使用（实现 iDisposable 的对象）”语句中返回方法是否正确？

> ID：14294294
> 
> 赞同：2
> 
> 时间：2013-01-12T14:31:57.247
> 
> 标签：c#, .net, idisposable, using

> **可能重复：**
> [如果我在方法的 using 块内返回一个值，那么 using 在返回之前会处理该对象吗？](https://stackoverflow.com/questions/2313196/if-i-return-a-value-inside-a-using-block-in-a-method-does-the-using-dispose-of)

我有这个代码（简化）：

```
bool method1()
{
      using (OleDbConnection con = new OleDbConnection(connString))
            {
                bool b = false;

                try
                {
                    con.Open();
                    b = true;

                }
                catch (Exception)
                {
                    b = false;
                }
                finally
                {
                    con.Close();
                    return b;
                }                
            }
} 
```

我在“使用”语句的右大括号之前返回。我的对象“con”是否仍然被 Disposed？使用以下代码更好吗？：

```
bool method1()
{
      bool b = false;
      using (OleDbConnection con = new OleDbConnection(connString))
            {
                try
                {
                    con.Open();
                    b = true;

                }
                catch (Exception)
                {
                    b = false;
                }
                finally
                {
                    con.Close();                    
                }                
            }

        return b;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T14:35:54.070

该`using`语句的全部意义在于它自动处理对象，即使从 using 块中抛出未处理的异常也是如此。

因此，一旦您的代码退出 using 块，无论是返回还是其他方式，我们都会处理正在“使用”的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T14:44:21.240

由于 .NET 自动处理对象的魔法，在 using 语句期间返回是完全安全的。整个想法是您不必考虑如何退出 using 块，您只知道当您离开它时，对象将被正确处理。因此，您的示例可以简化为：

```
bool method1()
{
    using (OleDbConnection con = new OleDbConnection(connString))
        {
            try
            {
                con.Open();
                return true;
            }
            catch (Exception)
            {
                return false;
            }          
    }
} 
```

con.Close() 可以被删除，也可以被处理自动调用。

如果您想了解幕后发生的事情，请查看此[内容。](https://stackoverflow.com/questions/421797/what-really-happens-in-a-try-return-x-finally-x-null-statement "这个")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T14:43:16.607

在第一个示例中，您设置了一个临时变量并将其返回。

关于 finally 中的返回：编译后发生的事情是你分支到方法的末尾，然后返回一个临时变量。

例如，结果完全相同。为了清楚起见，我个人更喜欢第一个，因为它更准确地类似于发生的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T14:35:38.767

两个代码段之间没有区别；`con`object 将在两个示例中被处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T14:44:28.467

`using`扩展为更复杂的附加`if`语句，例如

```
OleDbConnection con = new OleDbConnection(connString)
try
{
    con.Open();
}
finally
{
    // Check for a null resource.
    if (con != null)
        // Call the object's Dispose method.
        ((IDisposable)con).Dispose();
} 
```

因此，在您的示例中，您可能会`NullReferenceException`进入 finally 块。

所以如果你想返回操作和Dispose和对象的状态，我建议使用这个代码片段

```
using(OleDbConnection con = new OleDbConnection(connString))
{
    try
    {
        con.Open();
        return true;
    }catch(OleDbException ex)
    {
        //log error
        return false;
    }
} 
```

# algorithm - 什么定义了图形和树中的左右？

> ID：14294296
> 
> 赞同：-2
> 
> 时间：2013-01-12T14:32:05.077
> 
> 标签：algorithm, graph-theory

我正在学习树遍历，我似乎找不到任何明确的规则来说明 DFS 或 BFS 算法如何决定首先采用哪条路径。我见过`left first`or的变体`least first`。

是否被视为列表中的第一个孩子？
这是否意味着（对于给定节点）作为循环一部分的图中顶点的深度是使用向左路径获取的？
使用“最少优先”规则也不会使算法变慢吗？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:49:29.957

Left 仅对子节点较旧的树有意义。否则通常作者指的是`first in the list of child nodes`. 顶点的深度在不是树的图中也没有很好地定义，但是如果您参考给定节点的深度，通常是距起始节点的最短距离。

我不确定是什么`least first`意思，但如果它指的是节点的键值并且子节点中没有排序，那么找到最少的当然需要更多的时间。

希望这可以帮助。

# php - PHP - 在循环内循环分层嵌套问题和答案

> ID：14294304
> 
> 赞同：0
> 
> 时间：2013-01-12T14:33:16.643
> 
> 标签：php, loops, parent-child

我假装在一个层次结构中显示这个多维数组，在他们的父母下面显示孩子的评论。

```
$comments = Array
(
[0] => Array
    (
        [id] => 1
        [text] => What is the capital of Japan?
        [parent_id] => 0
    )
[1] => Array
    (
        [id] => 2
        [text] => What is the capital of Canada?
        [parent_id] => 0
    )
[2] => Array
    (
        [id] => 3
        [text] => I think is Kyoto
        [parent_id] => 1
    )
[3] => Array
    (
        [id] => 4
        [text] => You are wrong, is Tokyo
        [parent_id] => 3
    ) 
```

我在这里搜索了很多答案，但其中大多数都涉及对 DB 的多个查询，或者数组中不必要的子级字段。一个非常简单高效的循环函数就可以让它运行起来。我不是专家，我使用的是非常基本的代码，但这次效果不佳：

让我们发出一个带有仅显示父评论的函数的初始循环（父母有 [parent_id]=0）

```
echo '<ol>';
loopComments($comments, 0);
echo '</ol>'; 
```

以下是功能：

```
function loopComments($comments, $parent) {
    foreach ($comments as $post) {
        if ($post[parent_id] == $parent) {      
            printPost($post);
        }
    }
}

//The function below prints the post and searches for related answers
//sadly FAILS when looping again! 

function printPost($post) {
    echo "<li>".$post['text']."</li>";
    loopComments($comments, $post['parent_id']);
} 
```

可悲的是，我收到“警告：为 foreach() 提供的参数无效”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:45:58.930

我认为您的代码有问题。

步骤：
1\. 调用**loopComments**。
2.第一次在**loopComments中调用****printPost**。 3\. 在 printPost 中使用**注释**但在**printPost**中没有定义（在**printPost**外的调用函数**loopComments中****定义**。）

 ******所以，问题是：您应该在**printPost** **foreach**
循环中 使用变量*$posts*而不是*$comments*。

 ****** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:38:22.527

在您的`printPost()`函数中，您需要一个参数来解析注释变量，以便在函数内使用该数组

```
function printPost($post, $comments) {} 
```

当你打电话给它时，你会有

```
function loopComments($comments, $parent) {
    foreach ($comments as $post) {
        if ($post[parent_id] == $parent) {      
            printPost($post, $comments);
        }
    }
} 
```***********

# php - 应要求加入 zend 应用程序

> ID：14294307
> 
> 赞同：0
> 
> 时间：2013-01-12T14:33:43.230
> 
> 标签：php, zend-framework, module, content-management-system, zend-application

我怎么能`join`在另一个里面有 2 个或更多的 zend 应用程序？
换句话说，让我们假设我有这个结构：

```
 /core
        /application
        /public
        ...
    /app1
        /application
        /public
        ...
    /app2
        /application
        /public
        ... 
```

当访问[http://some_url.com/core](http://some_url.com/core)时，我想显示`core`应用程序，但是当我访问[http://some_url.com/app1](http://some_url.com/app1)时，我想显示`core`+`app1`应用程序。[基本上，它应该显示与http://some_url.com/core](http://some_url.com/core)
相同的内容，但应用程序中存在额外的链接/操作。`app1`

[http://some_url.com/app2](http://some_url.com/app2) (core + app2)也应该发生同样的事情。

我以为我可以`index.php`为应用程序 app1 和 app2 创建一个不同的应用程序以加载“核心”应用程序，但是我的问题是我不知道如果我这样做，我该如何访问 app1 或 app2 的控制器/操作，使用例如，
[http://some_url.com/app1/controller_A/action_B](http://some_url.com/app1/controller_A/action_B)

我正在使用 Zend Framework 1.11。

**编辑**

我在某处看到了一个名为`addControllerPath`. 谁能告诉我它是否适合我想要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:16:10.060

You can get the server uri, and choose your application in index.php

```
// Define path to application directory
$uri = $_SERVER["REQUEST_URI"];
if (strpos($uri, 'core') == 1) {
    defined('APPLICATION_PATH')
        || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../core'));
}
elseif (strpos($uri, 'app1') == 1) {
    defined('APPLICATION_PATH')
        || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../app1'));
}
elseif (strpos($uri, 'app2') == 1) {
    defined('APPLICATION_PATH')
        || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../app2'));
}
else {
    defined('APPLICATION_PATH')
        || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../default'));
} 
```

instead the Zend default

```
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application')); 
```

# android - Google Analytics for Android v2：发送期

> ID：14294309
> 
> 赞同：2
> 
> 时间：2013-01-12T14:33:53.163
> 
> 标签：android, google-analytics

我在为我的 Android 应用程序实施新的 v2 谷歌分析时想知道调度。

如果默认周期是 30 分钟，并且需要在 24 小时内上报数据，否则数据不会被处理，那么应用程序在一周只使用 2 次，持续时间大约 5 分钟的情况下如何处理？

从我读过的内容来看，我似乎无法发现该应用程序会一直在后台等待时间到并开始提交？有什么见解吗？否则我将不得不切换到手动调度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:46:41.243

我有同样的问题（虽然对于 v1 GA，我认为问题是一样的）。

我选择使调度明确。我尝试使用相同的规模超时在后台触发调度（每 30 分钟一次），但我对某些事件（如启动和暂停，以及当应用程序用户达到某些内部里程碑时）进行调度。请注意，我只是出于与您想的相同的原因而这样做。我没有找到任何更明确的东西或做任何验证行为的测试......

这样做的另一个原因是对发出调度调用的线程有更多的控制（而不是仅仅作为将一些新统计信息推送到 GA 的线程的副作用而触发）。

我认为本地存储的尚未推送的数据不会出现 24 小时超时。事实上，我认为问题在于数据会在其*推送*时间上加上时间戳，而不是它的实际记录时间。但我对这两种方式都没有信心......

# stored-procedures - 如何将存储过程 #1 的结果放入存储过程 #2 中的临时表中

> ID：14294311
> 
> 赞同：3
> 
> 时间：2013-01-12T14:34:19.160
> 
> 标签：stored-procedures, sql-server-2012, temp-tables

我试图将几个存储过程的结果组合到一个临时表中。各种存储过程的结果具有相同的列结构。本质上，我想 UNION ALL 各种存储过程的结果。一个重要的事实：每个存储过程都会创建一个临时表来存储其数据，并且每个返回的结果都基于对临时表的选择：

```
create proc SP1    
as
 .
 .  <snip>
 .
 select * from #tmp   -- a temporary table 
```

请注意，`select * from OPENQUERY(server, 'exec SP1')`如果 SP1 中的选择针对临时表不起作用（有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/14293865/using-openquery-exec-stored-procedure-to-create-new-temporary-table-fails-with)），是否有另一种方法可以让不同的存储过程 SP2 将执行 SP1 的结果放入临时表中？

```
 create proc SP2 as
  -- put results of executing SP1 into a temporary table:
  .
  .
  . 
```

注意：SP1 不能修改（例如，将其结果存储在具有会话范围的临时表中）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T14:44:41.587

创建您的临时表，使其适合您的存储过程的结果。

假设你的温度。表被称为“#MySuperTempTable”，你会做这样的事情......

```
INSERT INTO #MySuperTempTable (Column1, Column2)
EXEC SP1 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:21:50.800

```
INSERT INTO #MySuperTempTable 
EXEC SP1 
```

遵循上述代码风格，但 sqlserver 不编译指令。

# java - java中最接近网页重新加载的等价物

> ID：14294312
> 
> 赞同：1
> 
> 时间：2013-01-12T14:34:28.253
> 
> 标签：java, web-services, http, servlets

我正在通过 servlet 和 db 处理程序 java 类从数据库中获取一些数据，并将其托管在 url 上。由于数据库正在更改，我只注意托管更改而不是整个数据库数据。

我通过浏览器获得所需的功能，即在每次（手动）重新加载后，我得到我需要的数据，

```
1\. at the first page load, entire data gets displayed.
2\. at subsequent reloads, I get either null data if there is no change in the database, or the appended rows if the database extends. (the database can only extend). 
```

但是在一个java程序中，我没有得到相同的功能。使用`HttpUrlConnection`.

这是servlet的java客户端的代码......

```
public class HTTPClient implements Runnable {

private CallbackInterface callbackinterface;
private URL url;
private HttpURLConnection http;
private InputStream response;
private String previousMessage = "";

public HTTPClient() {
    try {
        url = new URL("http://localhost:8080/RESTful-Server/index.jsp");
        http = (HttpURLConnection) url.openConnection();
        http.connect();
    } catch (IOException e) {
    }
}

@Override
public void run() {
    while (true) {
        try {
            String currentmessage = "";

            response = http.getInputStream();
            if (http.getResponseCode() == HttpURLConnection.HTTP_OK) {
                BufferedReader buffread = new BufferedReader(new InputStreamReader(response));
                String line;

                for (; (line = buffread.readLine()) != null;) {
                    currentmessage += line;
                }
                if ((!currentmessage.equals(previousMessage)
                        || !previousMessage.equals(""))
                        && !currentmessage.equals("")) {
                    //this.callbackinterface.event(currentmessage);\
                    System.out.println(currentmessage + "\t" + previousMessage);
                }
                previousMessage = currentmessage;

                Thread.sleep(2500);
            } else {
                throw new IOException();
            }
        } catch (IOException | InterruptedException e) {
            System.err.println("Exception" + e);
        }

    }
} 
```

显示的类是一个线程，它每 2.5 秒读取一次连接。如果它在`getline()`.

我认为问题是由于类变量conn，并且在浏览器中重新加载没有被复制..

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:38:32.407

您基本上只连接（请求）一次并尝试多次读取响应，而它只能读取一次。您基本上每次都需要创建一个新的连接（请求）。您需要将连接的创建移动`url.openConnection()`到循环内部。顺便说一句，这条线`http.connect()`是多余的。您可以放心地忽略它。`http.getInputStream()`意志已经隐含地做到了。

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

# android - 如何使用 jsoup 获取电子邮件地址

> ID：14294316
> 
> 赞同：1
> 
> 时间：2013-01-12T14:35:19.930
> 
> 标签：android, html, parsing, email, jsoup

我有一张这样的桌子

```
 <TR BGCOLOR="#F9F9F9">
            <TD width="1%" nowrap><B>Tel:</B></TD>
            <TD>+39 04949 59599</TD>
            <TD width="1%" nowrap><B>Email:</B></TD>
            <TD><A HREF="javascript:void(0);"
                OnClick="Messenger('/do/home.pl/Messenger?email=mailaddress@gmail.com')">mailaddress@gmail.com</a></TD>
        </TR>
        <TR BGCOLOR="#F9F9F9">
            <TD width="1%" nowrap><B>Fax:</B></TD>
            <TD>+39 304040 303030</TD>
            <TD width="1%" nowrap><B>Skype:</B></TD>
            <TD></TD>
        </TR> 
```

我需要得到那个邮件地址，但我遇到了一些问题，因为我的代码给了我一个空文本。我试图解析表格的整个文本，但结果是除了邮件之外的所有文本！如果我解析那个 td 或者我使用 index 来找到那个 href 元素，也是一样的。我该如何解决这个问题？

这是我试过的代码

```
 Element info1 = doc.select("table").get(7); //this works
    Elements td = info1.select("td");
    String telefono="";
    String email="";    
Element tdtel=info1.select("td").get(1);
telefono = "Tel. :" + tdtel.text(); //this works
Element tdmail=info1.select("td").get(3);
Element linkmail =tdmail.select("a[href]").first(); //error here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:16:36.407

试试看嘛，

```
Elements elements = doc.select("A[HREF=javascript:void(0);]");
System.out.println(elements.get(0).text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:42:02.797

你需要`a`标签的内容，试试

```
Element linkmail =tdmail.select("a");
String mail = linkmail.text(); 
```

# php - 使用 phpMyAdmin 导出和导入大量数据？

> ID：14294330
> 
> 赞同：1
> 
> 时间：2013-01-12T14:36:45.443
> 
> 标签：php, sql, phpmyadmin

我在本地主机上的数据库中有 200,000 条记录，我想使用 phpMyAdmin 在服务器上添加所有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:44:55.800

> 大额导入方法

`$cfg['UploadDir'] = '';`在 config.inc.php 中有一个设置 ，将其设置为`$cfg['UploadDir'] = 'Upload';`并在目录 phpmyadmin 中创建一个名为**Upload**的文件夹，并将 sql 脚本复制到该文件夹​​中......你将开始在 phpmyadmin 导入部分看到这个文件名

# java - 听众共享偏好

> ID：14294331
> 
> 赞同：0
> 
> 时间：2013-01-12T14:36:50.203
> 
> 标签：java, android

我对这段代码有疑问。我想在我的应用程序中保留首选项值，但我的监听器有问题。不起作用，它不会保存新值。关于错误的任何想法？

编辑：`onResume()`有效，因为当我在我的应用程序上打开一个活动并关闭它时，sharepreferences 的值是正确的。对话和活动不保持价值。

```
public void onCreate(){
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
          listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
              public void onSharedPreferenceChanged(SharedPreferences prefs, String listpref) {
                    if(!preferencesChanged)preferenze();

            }
              };
      sp.registerOnSharedPreferenceChangeListener(listener); 
```

有一些按钮和其他由意图调用的信息活动。
一个 TextView，它显示数组中的一个值，什么都没有。

```
 public void onPause() {
        super.onPause();
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        sp.unregisterOnSharedPreferenceChangeListener(listener);

protected void onResume() {
        super.onResume();
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
        public void onSharedPreferenceChanged(SharedPreferences prefs, String listpref) {
        preferencesChanged = true;
                }
        };
        sp.registerOnSharedPreferenceChangeListener(listener);

protected void onStop(){
        super.onStop();
        if(preferencesChanged){
            //Update the app
            preferenze();
        }

public void preferenze()
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

        CheckboxPreference = prefs.getBoolean("checkboxPref", true);
        ListPreference = prefs.getString("listpref", ""); 
```

其他变量和大多数 if/else。

首选项.xml：

```
public class Preferences extends PreferenceActivity implements OnSharedPreferenceChangeListener{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.layout.preferences);

    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences prefs, String listpref) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:12:53.447

```
protected void onCreate(Bundle savedInstanceState) { // TODO Auto-generated method stub super.onCreate(savedInstanceState); addPreferencesFromResource(R.xml.settings); SharedPreferences sp = PreferenceManager .getDefaultSharedPreferences(this); sp.registerOnSharedPreferenceChangeListener(this); } 
```

I think, you are missing registerOnSharedPreferenceChangeListener

# java - 如何在纸牌游戏中将图像附加到 2 个变量？

> ID：14294337
> 
> 赞同：0
> 
> 时间：2013-01-12T14:37:54.057
> 
> 标签：java, eclipse, image, slick2d

我的最后一个问题措辞错误，所以我要重试。我正在用 Java 制作纸牌游戏，目前我有代码可以在数组列表中为 x 名玩家打印 4 张随机牌。我正在使用 slick 2d，目前有一个菜单和一个播放状态。我目前有 2 个变量连接到每张卡，a 范围为 0-3，b 范围为 0-12。

如何在播放状态下显示与这两个变量正确关联的图像？（例如，它不显示黑桃 A，而是显示黑桃 A 的图片）

代码：

```
Deck ()
{
    cards = new ArrayList < > ();
    for (int a = 0 ; a <= 3 ; a++)
    {
        for (int b = 0 ; b <= 12 ; b++)
        {
            cards.add (new Card (a, b));
        }
    }
} 
```

这是从牌组中抽牌的功能

```
public Card PlayerCardDraw ()
{
    Random generator = new Random ();
    int index = generator.nextInt (cards.size ());
    return cards.remove (index);
} 
```

这就是使用上述函数向玩家 1 的手牌添加一张牌的函数。我这样做是为了分开每个玩家的手牌。

```
public ArrayList <Card> p1Hand;
public ArrayList <Card> P1CardDraw ()
{

    p1Hand = new ArrayList < > ();
    p1Hand.add (PlayerCardDraw ());
    return p1Hand;
} 
```

我提到我使用的是 slick 2d，所以我认为我不必发布任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:45:21.417

如果我是你，我会重写/附加 Card 类以在初始化时附加图像。在公共目录中创建一个图像，并对其进行编码`a-bb.*`作为示例，并为该特定卡创建一个公共图像常量。那么它就像调用一个简单的getter来显示图像一样简单。

# objective-c - 需要在 UITableView 中从 FirstViewController 到 SecondViewController 完成 Facebook 帖子的历史记录

> ID：14294341
> 
> 赞同：0
> 
> 时间：2013-01-12T14:38:25.997
> 
> 标签：objective-c, xcode, facebook, uitableview, ios6

在我的第一个视图控制器中，我有一个使用 iOS 6 的本机 Facebook 集成的对话框。我希望在第一个视图控制器上发布的所有帖子的历史记录都在我的第二个视图控制器中，在`UITableViewCell`. 但是我一直无法弄清楚如何将它们两个链接起来，以便它可以获取提要。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 8;
}

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
        if (cell==nil) {

        }

    if (FBNativeDialogResultSucceeded) {

    cell.textLabel.text=@"someone posted on facebook";
    }

    return cell; 

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T14:56:17.960

您可以在 secondviewcontroller 中编写通知。如果第一个视图控制器中的发布完成，则发布通知。第二视图控制器收到通知，第二视图控制器中的表视图重新加载数据。

# xcode - 在任何控制台输出上使 XCode 中断

> ID：14294342
> 
> 赞同：5
> 
> 时间：2013-01-12T14:38:26.157
> 
> 标签：xcode, printf, xcode4.5, breakpoints

我发现[这篇文章](https://stackoverflow.com/questions/1538463/how-can-i-put-a-breakpoint-on-something-is-printed-to-the-terminal-in-gdb)解释了如何设置条件断点以中断任何 printf 函数。在 XCode 中实现类似功能的过程是什么？目的显然是调试器停止尝试在控制台中输出任何内容的时间和地点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T01:54:55.033

您可以使用 lldb 控制台在 NSLog 中添加断点，如下所示：

```
breakpoint set -n NSLog 
```

您基本上必须暂停执行，在控制台中编写该命令，然后继续执行。有关分步说明和重用命令的方法，请查看[此处](http://cocoaexposed.com/post/40480356516/set-breakpoints-for-specific-methods-or-functions)。

# iphone - 如何获取 xml 图像并在 UIcollectionview 中显示？（将 Json 的代码更改为 XML）

> ID：14294344
> 
> 赞同：2
> 
> 时间：2013-01-12T14:38:33.010
> 
> 标签：iphone, ios, objective-c, xml-parsing, uicollectionview

我是一个新手 xcode 程序员。

我已经阅读了使用 Flickr Json 显示 collectionview 的教程。这是两个链接：[http ://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

和

[http://www.raywenderlich.com/22417/beginning-uicollectionview-in-ios-6-part-22](http://www.raywenderlich.com/22417/beginning-uicollectionview-in-ios-6-part-22)

但现在我想为仅显示 XML 的站点 Danbooru 制作集合视图。

上面的教程使用了 4 个作者制作的文件，（Flickr.h、Flickr.m、FlickrPhoto.h、FlickrPhoto.m）

我认为 Flickr.m 文件是该应用程序的关键部分，因此将引用该代码：

```
#import "Flickr.h"
#import "FlickrPhoto.h"

#define kFlickrAPIKey @"d02c877c0a4220890f14fc95f8b16983"

@implementation Flickr

+ (NSString *)flickrSearchURLForSearchTerm:(NSString *) searchTerm
{
searchTerm = [searchTerm stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
return [NSString stringWithFormat:@"http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=%@&text=%@&per_page=20&format=json&nojsoncallback=1",kFlickrAPIKey,searchTerm];
}

+ (NSString *)flickrPhotoURLForFlickrPhoto:(FlickrPhoto *) flickrPhoto size:(NSString *) size
{
if(!size)
{
    size = @"m";
}
return [NSString stringWithFormat:@"http://farm%d.staticflickr.com/%d/%lld_%@_%@.jpg",flickrPhoto.farm,flickrPhoto.server,flickrPhoto.photoID,flickrPhoto.secret,size];
}

- (void)searchFlickrForTerm:(NSString *) term completionBlock:(FlickrSearchCompletionBlock) completionBlock
{
NSString *searchURL = [Flickr flickrSearchURLForSearchTerm:term];
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_async(queue, ^{
    NSError *error = nil;
    NSString *searchResultString = [NSString stringWithContentsOfURL:[NSURL URLWithString:searchURL]
                                                       encoding:NSUTF8StringEncoding
                                                          error:&error];
    if (error != nil) {
        completionBlock(term,nil,error);
    }
    else
    {
        // Parse the JSON Response
        NSData *jsonData = [searchResultString dataUsingEncoding:NSUTF8StringEncoding];
        NSDictionary *searchResultsDict = [NSJSONSerialization JSONObjectWithData:jsonData
                                                                          options:kNilOptions
                                                                            error:&error];
        if(error != nil)
        {
            completionBlock(term,nil,error);
        }
        else
        {
            NSString * status = searchResultsDict[@"stat"];
            if ([status isEqualToString:@"fail"]) {
                NSError * error = [[NSError alloc] initWithDomain:@"FlickrSearch" code:0 userInfo:@{NSLocalizedFailureReasonErrorKey: searchResultsDict[@"message"]}];
                completionBlock(term, nil, error);
            } else {

                NSArray *objPhotos = searchResultsDict[@"photos"][@"photo"];
                NSMutableArray *flickrPhotos = [@[] mutableCopy];
                for(NSMutableDictionary *objPhoto in objPhotos)
                {
                    FlickrPhoto *photo = [[FlickrPhoto alloc] init];
                    photo.farm = [objPhoto[@"farm"] intValue];
                    photo.server = [objPhoto[@"server"] intValue];
                    photo.secret = objPhoto[@"secret"];
                    photo.photoID = [objPhoto[@"id"] longLongValue];

                    NSString *searchURL = [Flickr flickrPhotoURLForFlickrPhoto:photo size:@"m"];
                    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:searchURL]
                                                              options:0
                                                                error:&error];
                    UIImage *image = [UIImage imageWithData:imageData];
                    photo.thumbnail = image;

                    [flickrPhotos addObject:photo];
                }

                completionBlock(term,flickrPhotos,nil);
            }
        }
    }
});
}

+ (void)loadImageForPhoto:(FlickrPhoto *)flickrPhoto thumbnail:(BOOL)thumbnail completionBlock:(FlickrPhotoCompletionBlock) completionBlock
{

NSString *size = thumbnail ? @"m" : @"b";

NSString *searchURL = [Flickr flickrPhotoURLForFlickrPhoto:flickrPhoto size:size];
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_async(queue, ^{
    NSError *error = nil;

    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:searchURL]
                                              options:0
                                                error:&error];
    if(error)
    {
        completionBlock(nil,error);
    }
    else
    {
        UIImage *image = [UIImage imageWithData:imageData];
        if([size isEqualToString:@"m"])
        {
            flickrPhoto.thumbnail = image;
        }
        else
        {
            flickrPhoto.largeImage = image;
        }
        completionBlock(image,nil);
    }

});
}

@end 
```

这就是 Json 的代码，通过搜索，我找到了一种使用 TBXML(opensource) 解析 XML 的方法

通过在另一个测试项目的 viewController 中实现以下代码，我可以在调试屏幕上看到图像的 URL：

```
void (^tbxmlSuccessBlock)(TBXML *) = ^(TBXML * tbxml){
TBXMLElement *elemRoot = nil, *elemImage = nil ;
elemRoot = tbxml.rootXMLElement;

if(elemRoot){
    elemImage = [TBXML childElementNamed:@"post" parentElement:elemRoot];

    while(elemImage){{
        NSString *localURL = [TBXML valueOfAttributeNamed:@"file_url" forElement:elemImage];
        NSLog(@"Local : %@", localURL);

       NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:localURL]];
        UIImage *image = [UIImage imageWithData:imageData];

        weatherPhoto.largeImage = image;
        elemImage=elemImage->nextSibling;
    }}
}};
void (^tbxmlFailureBlock) (TBXML *, NSError *) = ^(TBXML * tbxml, NSError * error){
NSLog(@"Error: %@", error);
};
- (void)parseXML{
NSURL *imageURL = [NSURL URLWithString:@"http://safebooru.org/index.php?page=dapi&s=post&q=index&limit=5"];
[TBXML newTBXMLWithURL:imageURL success:tbxmlSuccessBlock failure:tbxmlFailureBlock];}

- (void)viewDidLoad
{
[super viewDidLoad];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
[NSThread detachNewThreadSelector:@selector(parseXML) toTarget:self withObject:nil];

} 
```

到目前为止，这就是我得到的所有内容。获取 URL 文本。如何更改 Flickr.m 并使 XML 中的图像显示在 UIcollectionView 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:08:02.903

因此，我再次阅读了您的问题，并意识到您还问了其他问题。您是否在问如何让 Flickr.m 从 XML 加载图像？你没有。此类用于加载 flickr 照片。您需要编写自己的类，该类知道如何从 XML 中提取 url 并使用我给您的示例加载图像。

* * *

您需要创建一个 UIImage 实例并异步加载它。
例如：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    NSData * imageData = [NSData dataWithContentsOfURL:self.URL];
    self.image = [UIImage imageWithData:imageData];

    dispatch_async(dispatch_get_main_queue(), ^{
        if (self.image)
            [self setupImageView];
    }); 
```

您还可以使用 NSOperationQueue 或 NSURLConnection 来执行异步数据加载。

# android - 制作流畅的动画

> ID：14294345
> 
> 赞同：1
> 
> 时间：2013-01-12T14:38:50.890
> 
> 标签：android, android-animation

我有一个属性动画，但它并不流畅，即我在动画中跳跃。我尝试使用动画器的参数，例如插值器、持续时间和帧延迟，但无法获得平滑的效果。有没有人有一些技巧/例子？这是我当前设置动画师的代码：

```
rotationAnimator=new ObjectAnimator();
rotationAnimator.setTarget(rotationController);
rotationAnimator.setPropertyName("mapRotation");
rotationAnimator.setInterpolator(new LinearInterpolator());
ValueAnimator.setFrameDelay(24);
rotationAnimator.setDuration(ROTATION_DURATION);
rotationAnimator.setRepeatCount(ValueAnimator.INFINITE);
rotationAnimator.setRepeatMode(ValueAnimator.RESTART); 
```

（还有一个调用`setFloatValues`，但它在代码的后面，在我开始动画之前）

编辑：我被要求展示我正在制作的动画，所以这里是：

这是从动画中获取值的 setter 函数：

```
public void setMapRotation(float rotationDegrees)
{
    if ((rotationAnimator!=null)&&(rotationAnimator.isRunning()))
        rotationAnimator.cancel();
    rotationDegrees%=360;
    if (rotationDegrees<0) rotationDegrees+=360;
    rotationView.setRotationDegrees(rotationDegrees);
    if (rotationDegrees!=oldRotationDegrees)
    {
        notifyRotationListeners();
        oldRotationDegrees=rotationDegrees;
    }
} 
```

如果您查看代码，您会看到另一个函数被调用 (setRotationDegrees)，所以它是：

```
public void setRotationDegrees(float rotationDegrees)
{ 
    this.rotationDegrees=rotationDegrees%360;
    if (this.rotationDegrees<0) this.rotationDegrees+=360;
    Log.i("MapView","View degrees: " + this.rotationDegrees);
    invalidate();
} 
```

这就是失效后发生的情况：

```
@Override protected void dispatchDraw(Canvas canvas)
{
    Log.i("MapView","Redrawing");
    int saveCount=canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.rotate(rotationDegrees,getWidth()/2,getHeight()/2);
    canvas.setDrawFilter(drawFilter);
    canvas.getMatrix(rotationMatrix);
    super.dispatchDraw(canvas);
    canvas.restoreToCount(saveCount);
} 
```

我不知道这里有没有特别重的东西，但我可能错了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:53:31.973

在其上定义[`AnimatorSet`](http://developer.android.com/reference/android/animation/AnimatorSet.html)并设置插值器可能会解决您的问题：

```
rotationAnimator=new ObjectAnimator();
rotationAnimator.setTarget(rotationController);
rotationAnimator.setPropertyName("mapRotation");
ValueAnimator.setFrameDelay(24);
rotationAnimator.setDuration(ROTATION_DURATION);
rotationAnimator.setRepeatCount(ValueAnimator.INFINITE);
rotationAnimator.setRepeatMode(ValueAnimator.RESTART);

AnimatorSet animatorSet = new AnimatorSet();
animatorSet.getChildAnimations().add(rotationAnimator);
animatorSet.setInterpolator(new LinearInterpolator());
...
animatorSet.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-23T14:23:25.057

我已经通过将硬件加速直接添加到我的动画视图和视图容器（myViewContainer - 在我的情况下为RelativeLayout）来解决：

```
if(!myViewContainer.isHardwareAccelerated())
{
    myViewContainer.setLayerType(View.LAYER_TYPE_HARDWARE, null);
    myAnimatedView1.setLayerType(View.LAYER_TYPE_HARDWARE, null);
    myAnimatedView2.setLayerType(View.LAYER_TYPE_HARDWARE, null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:46:37.527

动画中间的跳跃更有可能是由您的 rotationController 类中的任何一个东西引起的，即接收动画值“mapRotation”。或者它可能与您的布局有关。

我会想象有一些非常强烈的东西，内存或 CPU 明智，这会导致抖动。

如果您的动画有很多布局，那么这可能是原因。如果您的代码中有很多 findViewByID 由于动画而被调用，那么这可能会导致速度变慢。

如果您只是为一个简单的图像制作动画，那么我不完全确定问题是什么。

我个人认为你的代码看起来不错，也许显示/描述你的动画。

[编辑] 我对使用画布制作动画的知识有限，因此我快速了解了您是如何使用我以前从未见过的 canvas.save() 和 canvas.restoreToCount() 的。

一切看起来都不错，尽管我确实觉得奇怪的是几个教程旋转画布而不是球图像来创建旋转。尽管如此，我发现改进动画的唯一参考是以下[链接](https://stackoverflow.com/questions/4938822/how-can-i-use-the-animation-framework-inside-the-canvas)中的评论，该评论建议使用 postInvalidateOnAnimation()。但不确定在哪里，也许不是 invalidate()。

# c# - 如何在 asp.net 中设计自定义数据视图？

> ID：14294349
> 
> 赞同：0
> 
> 时间：2013-01-12T14:39:14.997
> 
> 标签：c#, asp.net

如果我能在 asp.net 中获得与这个单词表相同的外观，那就是不干燥。我知道gridView，但我真的想要一个控制器在查看来自SQL Server的数据时给我更多的灵活性只是我想要一些关于如何设计相同外观的建议 ![在此处输入图像描述](../Images/d733500dba7b38ec05a1a18b51c9a545.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:56:56.890

看起来你必须使用一些 css，也许使用[jQuery DataTables](http://www.datatables.net/)并修改默认样式。[您可能会在此处](http://www.codeproject.com/Articles/177335/Refreshing-content-of-the-table-using-AJAX-in-ASP)找到一些如何实现的提示。您可以创建自己的 asp.net 控件或使用 ajax Web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:03:13.837

使用带有项目模板的 ListView。然后，您可以简单地将其创建为 HTML 表格。

[ListView Web 服务器控件概述](http://msdn.microsoft.com/en-us/library/bb398790%28v=vs.100%29.aspx)

# intuit-partner-platform - 如何查看我在 Intuit AggCat API 中创建的客户列表？

> ID：14294351
> 
> 赞同：0
> 
> 时间：2013-01-12T14:39:35.133
> 
> 标签：intuit-partner-platform, intuit, customer-account-data-api

discoverAndAddAccounts 将创建客户，而 deleteCustomer 将删除他们。在测试时，我创建了客户，现在我没有他们的 ID，所以我无法删除他们。

[我在https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/AggCat_API/0020_API_Documentation](https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/AggCat_API/0020_API_Documentation)上没有看到这种方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T21:58:09.720

不，没有获取此信息的 API。您将需要跟踪它们。

请提交支持票，我们将必须为您获取信息。

威廉

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T16:40:27.333

您是否尝试过使用 getCustomerAccounts。

[获取客户帐户](https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_&_Categorization_Apps/AggCat_API/0020_API_Documentation/0040getCustomerAccounts)

# python - python xmlrpc 对象有哪些类型？

> ID：14294353
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:39:57.783
> 
> 标签：python, types, python-2.7, xml-rpc

我定义一个python`xmlrpc`服务器如下（仅用于解释的近似示例）：

```
from SimpleXMLRPCServer import SimpleXMLRPCServer
server = SimpleXMLRPCServer(('localhost', 8000))
server.register_function(foo, "serial.send")
server.serve_forever() 
```

然后我可以使用`xmlrpc`如下客户端

```
import xmlrpclib
device = xmlrpclib.ServerProxy("http://localhost:8000/RPC2")
device.serial.send(...) 
```

在这里我可以检查是否`device`是`xmlrpclib.ServerProxy`with的一个实例

```
isinstance(device, xmlrpclib.ServerProxy) 
```

但什么是`device.serial`？我想检查它`device.serial`属于一个`xmlrpc`，而不是，例如，`serial`或`socket`其他东西。

这是我要检查的具体示例：

```
def foo(x):
   if isinstance(x, ...):
       print("xmlrpc access")
   else:
       print("direct access")

foo(device.serial) # expected output: 'xmlrpc access'
foo(serial.Serial(..)) # expected output: 'direct access'
foo(socket.Socket(...)) # expected outcome: 'direct access' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:49:51.557

如果您要求对 Python 对象进行任意检查，请使用 Python 的“检查”模块：

[http://www.ibm.com/developerworks/library/l-pyint/index.html](http://www.ibm.com/developerworks/library/l-pyint/index.html)

还检查

```
>> obj.__class__ 
```

或者

```
>> obj.__class__.__bases__ 
```

使您可以访问基类。

# c++ - 自定义类向量的迭代器查找方法

> ID：14294357
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:40:15.193
> 
> 标签：c++, stl, iterator

我想使用迭代器的 find 方法来检查我是否已经在向量中定义了一个类的实例。我已经为该类重载了 == 运算符。但是，我无法编译它。

我在这里想念什么？

提前谢谢。

这是代码中的一个片段：

```
vector<ContourEdgeIndexes>::iterator it = find(contourEdges.begin(),contourEdges.end(),contourEdgeCand);
        if(it != contourEdges.end()) {
            contourEdges.erase(it);
        }

compiler gives this error:
error: no matching function for call to     ‘find(std::vector<ContourEdgeIndexes>::iterator, std::vector<ContourEdgeIndexes>::iterator, ContourEdgeIndexes&)’

edit:
and here is the overloaded == operator:
bool operator == (ContourEdgeIndexes& rhs) {
    if((this->first == rhs.first) && (this->second == rhs.second))
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:56:03.293

`ContourEdgeIndexes`如果定义为成员，您的操作员应该接受对 的常量引用。运算符本身也应该是 const。

```
bool operator == (const ContourEdgeIndexes& rhs) const {
    return ((this->first == rhs.first) && (this->second == rhs.second));
} 
```

# java - 事件调度线程从列表异常 SWING 中移除

> ID：14294360
> 
> 赞同：1
> 
> 时间：2013-01-12T14:40:48.410
> 
> 标签：java, collections

嗨，当我尝试从 JPanel 中实现 State 接口的列表中删除一个元素时，我遇到了这个奇怪的异常。这是代码：

```
public static class ButtonListener implements ActionListener {
    private State state;

    public ButtonListener(State state) {
        this.state = state;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        state.applyMove(state.getMoves().get(0));
    }
} 
```

而 JPanel 是“applyMove”方法的实现：

```
public class RushHourBoard extends JPanel implements MouseListener, MouseMotionListener, State {
...
private List<Vehicle> vehicles;
...

@Override
public State applyMove(Move vehicleMove) {
    VehicleMove move = (VehicleMove) vehicleMove;
    Vehicle moved = move.getVehicle();
    vehicles.remove(moved);
    ... 
```

以及异常的痕迹：

```
Exception in thread "AWT-EventQueue-0" java.lang.UnsupportedOperationException
at java.util.AbstractList.remove(AbstractList.java:161)
at entrery.rushhour.RushHourBoard.applyMove(RushHourBoard.java:174)
at entrery.rushhour.MyDragDemo$ButtonListener.actionPerformed(MyDragDemo.java:59)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6504)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6269)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4860)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

这与 UI 线程安全策略有关吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:57:39.540

分配给的实例`RushHourBoard.vehicles`不支持删除。也许它来自`Arrays.asList`或`Collections.unmodifiableList`。

`List`，就像Java集合中的许多一样，是一个糟糕的接口。它是如此不具体，许多方法可能无法实现（有用）。即使有一个松散的契约，许多集合实现甚至不符合它们实现的接口的最小条款。

# doctrine-orm - 收藏#在教义中匹配一个协会

> ID：14294361
> 
> 赞同：0
> 
> 时间：2013-01-12T14:40:55.180
> 
> 标签：doctrine-orm

我想对关联对象使用 Collection#Matching，但它不起作用。进行一些挖掘，看起来 Doctrine 对这两个值进行了 in_array 调用。针是持久集合（我的关联），干草堆是我要匹配的实体数组。因为 needle 是 Persisted Collection，所以匹配失败。

这可能是一个错误还是不支持关联？如果它们不受支持，是否有解决方法？

例子：

```
$query = $em->createQuery("SELECT c FROM Entity\BidCategory c WHERE c.code IN(:categories)");
$query->setParameter('categories', array('CATEGORY_1', 'CATEGORY_2'));
$my_categories = $query->getResult();

$criteria = array(
"min_pub_date" => "01-07-2012",
"max_pub_date" => "01-08-2012"
);

$query = $em->createQuery("SELECT b From Entity\Bid b JOIN b.categories c WHERE b.pub_date > :min_pub_date AND b.pub_date < :max_pub_date");
$query->setParameter("min_pub_date", new DateTime($criteria['min_pub_date']));
$query->setParameter("max_pub_date", new DateTime($criteria['max_pub_date']));
$query->setMaxResults(1);
$bids = $query->getResult();

$criteria = Criteria::create()
->where(Criteria::expr()->in("categories", $my_categories));

$collection = new Doctrine\Common\Collections\ArrayCollection();
foreach($bids as $bid)
{
    $collection->add($bid);
}
$matched_bids = $collection->matching($criteria); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T00:20:39.017

标准功能不支持关联。该`Criteria::expr()->in()`方法适用于常规数组。

# javascript - 如何在 div 中显示 javascript 结果

> ID：14294364
> 
> 赞同：0
> 
> 时间：2013-01-12T14:41:09.257
> 
> 标签：javascript

嗨，我如何在 div 中显示 javascript 结果。代码是：

```
<script type='text/javascript'>
COUNTER_START = 40
function tick () {
    if (document.getElementById ('counter').firstChild.data > 0) {
        document.getElementById ('counter').firstChild.data = document.getElementById ('counter').firstChild.data - 1
        setTimeout ('tick()', 1000)
    } else {
        document.getElementById ('counter').firstChild.data = 'done'
    }
}
if (document.getElementById) onload = function () {
    var t = document.createTextNode (COUNTER_START)
    var p = document.createElement ('P')
    p.appendChild (t)
    p.setAttribute ('id', 'counter')

    var body = document.getElementsByTagName ('BODY')[0]
    var firstChild = body.getElementsByTagName ('*')[0]

    body.insertBefore (p, firstChild)
    tick()
}
</script> 
```

我希望它在这个 div 中显示倒数计数器

```
<div id="counter"></div> 
```

谢谢 :D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:42:23.757

您可以`innerHTML`为此使用：

```
document.getElementById("counter").innerHTML = /* ... HTML string here ... */; 
```

您可以稍微缩短该脚本：[Live Example](http://jsbin.com/iyibos/1) | [来源](http://jsbin.com/iyibos/1/edit)

```
(function() {

    var elm = document.getElementById('counter');
    var counter = 40;

    tick();

    function tick() {
        elm.innerHTML = String(counter);
        --counter;
        if (counter >= 0) {
            setTimeout(tick, 1000); // <=== Note, a function ref, not a string
        }
        else {
            elm = undefined; // Release it as we don't need it anymore
        }
    }

})(); 
```

我不确定段落元素的内容是什么，所以我没有包括它。如果它打算在（作为 a ，而不是 a ）`counter`的开头添加元素，那么只需更改`body``p``div`

```
var elm = document.getElementById('counter'); 
```

到

```
var elm = document.createElement('p');
document.body.insertBefore(elm, document.body.firstChild); 
```

甚至不需要`id`. [实例](http://jsbin.com/iyibos/2)| [来源](http://jsbin.com/iyibos/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:43:16.597

要更改 div 的内容，请使用

```
document.getElementById("counter").innerHTML="something"; 
```

# java - 从 Java 调用 dll（C++ 库）方法

> ID：14294366
> 
> 赞同：0
> 
> 时间：2013-01-12T14:41:16.910
> 
> 标签：java, dll, jnaerator

我有带有用 C++ 编写的头文件的 .dll 库（没有可用的源代码）。这个库使用了一些其他的 .dll 文件——我也有。我的任务是从 Java 中使用这个库（调用方法并接收结果）。

我发现可以为此目的使用 JNAerator。会是什么算法？我尝试`java -jar jnaerator.jar MyLib.dll MyLibHeader.h`了命令，但它输出

```
 ERROR: JNAeration failed ! 

     Missing output mode parameter -mode !
     Please use -h for help on the command-line options available. 
```

如何使用 -h 寻求帮助？我需要哪种模式？示例命令中只有一个 dll，但我想使用其中的三个，因为它们相互依赖。

可能它更适合我的任务吗？（一些教程将不胜感激）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:59:17.553

您需要`-mode`在命令行中指定参数。他们的[谷歌代码](http://code.google.com/p/jnaerator/wiki/CommandLineOptionsAndEnvironmentVariables)页面有这样的说法：

> -mode [mode: 'Jar' : 仅带绑定的 JAR | 'StandaloneJar' : 具有绑定和运行时依赖项的 JAR | 'Directory' : 在简单文件层次结构中绑定源 | 'Maven' : 准备构建的 Maven 项目中的绑定源 'AutoGeneratedMaven' : 自动重新生成其绑定的 Maven 项目>]

假设您使用“StandaloneJar”，那么您的命令行将是： `java -jar jnaerator.jar -mode StandaloneJar MyLibHeader.h MyLib.dll`.

我希望它有效，因为我对 JNAenerator 完全没有经验！

# apache - Apache 2 上的虚拟主机未按预期工作

> ID：14294370
> 
> 赞同：1
> 
> 时间：2013-01-12T14:41:47.003
> 
> 标签：apache, virtualhost

我正在尝试在我的 OSX 10.8.2 上设置开发服务器。部署的站点名称是`mattat.org.il`所以我想将其设置为`mattat.dev`.

这些是我遵循的步骤：

1.  取消注释虚拟主机的包含，在`httpd.conf`：

    `Include /private/etc/apache2/extra/httpd-vhosts.conf`

2.  添加了一个虚拟主机`httpd-hosts.conf`：

    ```
    NameVirtualHost *:80
    <VirtualHost *:80>
    DocumentRoot "/Users/matanya/Sites/matat"
    ServerName mattat.dev
    </VirtualHost>` 
    ```

3.  将服务器名称添加到`etc/hosts`：

    ```
    127.0.0.1 localhost
    255.255.255.255 broadcasthost
    ::1             localhost.
    fe80::1%lo0 localhost
    127.0.0.1 mattat.dev 
    ```

4.  重新启动阿帕奇。

现在，当我转到它时，`localhost`它会将我带到我为虚拟主机设置的目录，而不是把我带到根目录（即`Sites`）。当我去`mattat.dev`它时，它被识别为有效的 url，并简单地解释为谷歌搜索。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:01:55.980

.dev 不是有效的 TLD，您的浏览器没有将其视为 URL。`http://mattat.dev`应该管用。

如果无法识别 localhost，请检查您的 httpd.conf 中是否有一个默认目录，以便 Apache 在找不到虚拟主机时回退，或者为 localhost 添加第二个虚拟主机。

```
<Directory "/Users/matanya/Sites/">
    Options Indexes
    Order allow,deny
    Allow from all
</Directory> 
```

# windows-phone-7 - 如何清理新版本应用程序上的 IsolatedStorageSettings

> ID：14294375
> 
> 赞同：0
> 
> 时间：2013-01-12T14:42:09.910
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

`IsolatedStorageSettings`应用程序更新到新版本时可以清理吗？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:12:57.653

You can have a look at the [IsolatedStorageFile Class](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile%28v=VS.95%29.aspx) and the [Remove](http://msdn.microsoft.com/en-us/library/7ay840d1%28v=vs.95%29.aspx) method.

# visual-studio - Visual Studio 2008 调试器条中的这个图标是什么？

> ID：14294376
> 
> 赞同：1
> 
> 时间：2013-01-11T21:21:59.267
> 
> 标签：visual-studio, visual-studio-2008

另外，这条带子有合适的名称吗？是否有关于此处显示的其他类型图标的任何文档？

![截屏](../Images/5687a3e266e36e5a1e7ba68ae03a7e95.png)

如果您可能需要更多对诊断有帮助的信息，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:01:02.710

这是为了帮助突出显示由于另一个 VS 面板中的操作而导航到的行。

例如，如果您执行“查找全部”，然后单击其中一个结果，它将导航到匹配项，突出显示该行（您的行看起来是紫色的），并将该标记应用于帮助（进一步）在视觉上增强您可能正在寻找的线条。

# javascript - Dojo > ItemFileWriteStore > 如何只获取那些有变化的单元格（不是行中的每个单元格）

> ID：14294384
> 
> 赞同：0
> 
> 时间：2013-01-12T14:42:49.840
> 
> 标签：javascript, dojo

使用`_saveCustom()`or `onSet()`，我可以找出 an 中的值何时发生变化`ItemFileWriteStore`，但是，在这两种情况下，我都会得到行中的每个单元格，即使只有 1 个单元格（例如）发生了变化。

任何人都知道一种只找到那些已经改变的*细胞的方法吗？*现在，我唯一能想到的就是维护数据的单独副本并与之进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:02:55.080

我触发了通知处理并想出了这个，这似乎有效：

```
store.onSet = function(row, cellName, oldValue, newValue){
    if (oldValue !== newValue){
        alert(cellName + " changed  to: " + newValue);
    }
} 
```

# shell - 如何显示ascii字符代码

> ID：14294385
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:42:55.107
> 
> 标签：shell

我遇到了[这个](https://stackoverflow.com/questions/3892984/xxd-binary-dump-problems#answer-3893040)ascii的风格ascii表。
当然我可以将它存储在一个文件中`ascii`并用于`cat ascii`显示它的内容。但我想让它的行为更像一个命令。

* * *

**更新**
当我阅读[*cs:app*](https://rads.stackoverflow.com/amzn/click/com/0136108040)时，我发现我如何费心在文件中恢复它并使用其他命令。赶紧跑 [](https://rads.stackoverflow.com/amzn/click/com/0136108040) *`man ascii`*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:03:24.500

如果你的 shell 支持别名，你可以这样做：

```
alias ascii='cat ~/ascii' 
```

然后只需键入`ascii`et voila！

如果您使用的是 bash，请将上面的行放入您的行中，`.bashrc`以便在登录时保留它。其他外壳也有类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T07:42:18.033

```
Dec Hex    Dec Hex    Dec Hex  Dec Hex  Dec Hex  Dec Hex   Dec Hex   Dec Hex
  0 00 NUL  16 10 DLE  32 20    48 30 0  64 40 @  80 50 P   96 60 `  112 70 p
  1 01 SOH  17 11 DC1  33 21 !  49 31 1  65 41 A  81 51 Q   97 61 a  113 71 q
  2 02 STX  18 12 DC2  34 22 "  50 32 2  66 42 B  82 52 R   98 62 b  114 72 r
  3 03 ETX  19 13 DC3  35 23 #  51 33 3  67 43 C  83 53 S   99 63 c  115 73 s
  4 04 EOT  20 14 DC4  36 24 $  52 34 4  68 44 D  84 54 T  100 64 d  116 74 t
  5 05 ENQ  21 15 NAK  37 25 %  53 35 5  69 45 E  85 55 U  101 65 e  117 75 u
  6 06 ACK  22 16 SYN  38 26 &  54 36 6  70 46 F  86 56 V  102 66 f  118 76 v
  7 07 BEL  23 17 ETB  39 27 '  55 37 7  71 47 G  87 57 W  103 67 g  119 77 w
  8 08 BS   24 18 CAN  40 28 (  56 38 8  72 48 H  88 58 X  104 68 h  120 78 x
  9 09 HT   25 19 EM   41 29 )  57 39 9  73 49 I  89 59 Y  105 69 i  121 79 y
 10 0A LF   26 1A SUB  42 2A *  58 3A :  74 4A J  90 5A Z  106 6A j  122 7A z
 11 0B VT   27 1B ESC  43 2B +  59 3B ;  75 4B K  91 5B [  107 6B k  123 7B {
 12 0C FF   28 1C FS   44 2C ,  60 3C <  76 4C L  92 5C \  108 6C l  124 7C |
 13 0D CR   29 1D GS   45 2D -  61 3D =  77 4D M  93 5D ]  109 6D m  125 7D }
 14 0E SO   30 1E RS   46 2E .  62 3E >  78 4E N  94 5E ^  110 6E n  126 7E ~
 15 0F SI   31 1F US   47 2F /  63 3F ?  79 4F O  95 5F _  111 6F o  127 7F DEL 
```*

# php - 寻找完美的数据库排序规则

> ID：14294387
> 
> 赞同：1
> 
> 时间：2013-01-12T14:43:10.733
> 
> 标签：php, mysql, sql, collation

> **可能重复：**
> [UTF-8：一般？垃圾桶？统一码？](https://stackoverflow.com/questions/2344118/utf-8-general-bin-unicode)

我正在为正确的表找到正确的排序规则进行一些测试。假设如果一个表包含用户提交的数据（配置文件信息等）或身份验证数据（哈希等），那么一个排序规则`utf8_bin`会很好，而其余的都可以在`utf8_general_ci`哪个更快？

或者一切都应该是相同的排序规则？

# jquery - jQuery在动态编写的iframe上改变高度

> ID：14294388
> 
> 赞同：0
> 
> 时间：2013-01-12T14:43:13.657
> 
> 标签：jquery

我正在编写一个小部件：用 JavaScript 加载然后嵌入一个 iframe，这样我就可以毫无问题地获得 jQuery 支持，并且小部件中没有 CSS 问题。

该小部件嵌入到这样的网站上：

```
<script type="text/javascript">
var _sid = '1';
  (function() {
    var se = document.createElement('script'); se.type = 'text/javascript'; se.async = true;
    se.src = '//xxxxxxx.com/loader.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(se, s);
  })();
</script> 
```

在里面`loader.js`我正在向页面编写以下代码：

```
<div id="lHB" style="margin: 0px; padding: 0px; border: 0px; background-color: transparent; overflow: hidden; position: fixed; z-index: 10000001; display: block; right: 0px; bottom: 0px; height: 28px; width: 240px; background-position: initial initial; background-repeat: initial initial;" class="_FloatingButton">
    <iframe id="_iframe" src="http://www.xxxxxxx.com/index.php" frameborder="0" style="background-color: #eee; vertical-align: text-bottom; overflow: hidden; position: relative; width: 100%; height: 100%; margin: 0px; z-index: 999999;">
    </iframe>
</div> 
```

在我的内部`index.php`是我填充小部件内容的地方，我使用 jQuery 执行此操作。我从 iframe 加载它的原因是确保我不会遇到 CSS 问题和 jQuery 冲突。

index.php 包含：

```
<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"></head>
<body>
<script type="text/javascript">
var _sid = '1';
  (function() {
    var se = document.createElement('script'); se.type = 'text/javascript'; se.async = true;
    se.src = '//xxxxxxxxxx.com/hello.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(se, s);
  })();
</script>
</body>
</html> 
```

将`hello.js`小部件内容动态加载到`index.php`页面上。一切都很好，唯一的问题是：

我想`height: 28px;`从`loader.js`. `hello.js`我试图找到

```
$('#_iframe', window.parent.document).css('height', 220); 
```

但它不会找到`_iframe`：/

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T07:12:22.073

我写了这个脚本，它非常适合我。随意使用它！

```
function ResizeIframeFromParent(id) {
    if (jQuery('#'+id).length > 0) {
        var window = document.getElementById(id).contentWindow;
        var prevheight = jQuery('#'+id).attr('height');
        var newheight = Math.max( window.document.body.scrollHeight, window.document.body.offsetHeight, window.document.documentElement.clientHeight, window.document.documentElement.scrollHeight, window.document.documentElement.offsetHeight );
        if (newheight != prevheight && newheight > 0) {
            jQuery('#'+id).attr('height', newheight);
            console.log("Adjusting iframe height for "+id+": " +prevheight+"px => "+newheight+"px");
        }
    }
} 
```

您可以在循环中调用该函数：

```
<script>
jQuery(document).ready(function() {
    // Try to change the iframe size every 2 seconds
    setInterval(function() {
        ResizeIframeFromParent('iframeid');
    }, 2000);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:08:56.377

您需要将代码放在 document.load 中，以便在加载 iframe 内容后调整 iframe 的大小：

```
$(document).load(function () {
    $('#_iframe', window.parent.document).css('height', 220);
}); 
```

我在 iFrame 中加载 disqus 评论时也做了同样的事情。注意：确保您没有相同的原产地政策

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:00:26.907

如果我正确理解你的问题，我有同样的问题，让 iframe 动态改变它的高度，它包含页面。下面是我用来完成此操作的代码。

```
var iFrames = document.getElementsByTagName('iframe');

function iResize() {
  for (var i = 0, j = iFrames.length; i < j; i++) {
    iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';
  }
}
if ($.browser.safari || $.browser.opera) {
  $('iframe').load(function () {
    setTimeout(iResize, 1);
  });
  for (var i = 0, j = iFrames.length; i < j; i++) {
    var iSource = iFrames[i].src;
    iFrames[i].src = '';
    iFrames[i].src = iSource;
  }
} else {
  $('iframe').load(function () {
    this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
  });
} 
```

当然，您可以将其从标签名称更改为元素 ID。只需将其粘贴在包含 iframe 的首页上即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T11:42:01.400

您可以在小部件脚本中使用以下函数：

```
function resize_iframe() {
    var elem = window.parent.document.getElementById('my_ifrmae'),
        elem_height = $(document).height();
    $(elem).css({
    "height" : elem_height
    });
 } 
```

现在您所要做的就是在原始脚本的回调函数中调用上述函数。

希望这会有所帮助

# ruby-on-rails - 根据环境选择 rails 3 assets

> ID：14294391
> 
> 赞同：1
> 
> 时间：2013-01-12T14:43:24.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 3 应用程序中，我希望能够在我的开发环境中使用未缩小的 javascript 和 css 文件进行调试等，并在生产中使用缩小版本。

我可以想到一些 hacky 解决方案，但理想情况下我希望`javascript_include_tag`和朋友自动选择正确的资产文件。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:07:10.523

通常使用添加你的js

```
javascript_include_tag 
```

在你的`development.rb`集合中：

```
config.assets.compress = false 
```

并在 production.rb 中使用：

```
config.assets.compress = true 
```

# php - Jquery post 功能有效，但重复时失败

> ID：14294392
> 
> 赞同：1
> 
> 时间：2013-01-12T14:43:43.283
> 
> 标签：php, jquery, post

几天前我来这里遇到了一个问题，他们让它工作了。但是，当我去复制它时，它失败了。让我很困惑。

这是jquery

```
function loadSubCats(value)
{
    $.post("load_sub_cats.php",{ "catid": value },
            function(data) {
        $('#sub_categories').html(data);
    });
}
function loadSubCatsB(value)
{
    $.post("load_sub_catsb.php",{ "catidb": value },
            function(data) {
        $('#sub_categoriesb').html(data);
    });
} 
```

我有表单选择字段（文件中的 1 个，load_sub_cats.php 中的 1 个）

```
 echo"<select name='cselect2' onChange='loadSubCatsb(this.value)'  class='e1'><option value='0'>Please Select Location</option>"; 
```

现在解释这个问题，当我从主选择中选择一个值时，第二个选择看起来很好。但是当我选择它出现的表单时，第三个没有出现（甚至没有被调用）。我在父文件中有 jquery 以及两个 div。我已经尝试将这些包含在子文件中，但同样的问题。我似乎无法调用第三页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:28:00.560

我相信 javascript 用户定义的函数是区分大小写的。你有 -

```
function loadSubCatsB 
```

但打电话 -

```
onChange='loadSubCatsb(this.value)' 
```

尝试更改为 -

```
onChange='loadSubCatsB(this.value)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T14:52:45.763

您的 php echo 格式不正确！

试试这个：

```
echo '<select name="cselect2" onChange="loadSubCatsb(this.value)"  class="e1"><option value="0">Please Select Location</option></select>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:53:45.873

`live`尝试使用 jQuery 的函数，而不是 onChange 。IE：

代替：

```
onChange='loadSubCatsb(this.value) 
```

在您的 $().ready 或等效函数中使用它：

```
$('.e1').on('change', function() {
    var newValue = $(this).val();
    loadSubCatsB(newVal);
}); 
```

# wcf - IIS CRM 2011 Web 服务调用问题

> ID：14294394
> 
> 赞同：0
> 
> 时间：2013-01-12T14:44:09.570
> 
> 标签：wcf, web-services, iis-7, dynamics-crm-2011, dynamics-crm

我有一个简单的程序，一个 asp.net 网站，我在其中添加了一个 web 服务

其中一种网络方法访问了 CRM `

```
 [WebMethod]
public bool RecordExists (String projectName)
{
    var service = GetService("http://localhost/EventoCorp/");

    Entity project = new Entity("new_project");

    /*PROJECT DETAILS*/
    project.Attributes["new_name"] = projectName;
    var request = new RetrieveDuplicatesRequest
    {
        BusinessEntity = project,
        MatchingEntityName = "new_project",
        PagingInfo = new PagingInfo() { PageNumber = 1, Count = 50 }
    };

    Console.WriteLine("Retrieving duplicates");
    var response = service.Execute(request);
    EntityCollection collection = (EntityCollection)response.Results["DuplicateCollection"];

    return collection.Entities.Count > 1 ? true : false;
} 
```

当我按 F5 时。该项目运行良好。我调用此记录存在方法，它正确地从 CRM 2011 中获取数据

但是，当我在 IIS 7.5 上部署此应用程序时。我受到这个非常无信息异常的欢迎

```
System.ServiceModel.FaultException: The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the &lt;serviceDebug&gt; configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs. 
```

服务器堆栈跟踪：

```
 at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

我是 CRM 2011 新手。不知道发生了什么。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:57:16.310

此异常发生在您尝试连接 Web 服务时使用的客户端中。它只说服务器端发生了未处理的异常，但没有关于异常的信息。还有一些建议可以启用`IncludeExceptionDetailInFaults`，以便将未处理的异常详细信息传递给客户端。但是还有其他方法可以查看发生了什么，它[附加](https://stackoverflow.com/questions/210250/how-do-i-attach-the-debugger-to-iis-instead-of-asp-net-development-server)到 IIS 进程并调试您的 Web 服务。
此外，最好在您的代码中添加异常处理，因为现在代码完全不安全。当您访问 CRM 时，可能会发生不同的异常，例如身份验证异常等。您也可以只获取 null 而不是您认为存在的集合。
当您将此代码部署到 IIS 时，可能会出现身份验证问题，因为 IIS 在 NETWORK SERVICE 帐户下工作。如果 CRM 使用 Windows 身份验证，则您的请求可能不会被授权。

# url - 如何批量访问文本文件中的不同行

> ID：14294399
> 
> 赞同：-2
> 
> 时间：2013-01-12T14:44:20.230
> 
> 标签：url, text, batch-file, line

为了澄清它首先我正在制作一个使用 input.txt 文件作为输入和输出作为 output.txt 的 url 缩短脚本，您可以在 input.txt 中放置无限链接

这就是我得到的

```
@echo off
set /p firstline=<input.txt
echo %firstline%
for %%a in (%firstline%) DO (
set "text=http://adfoc.us/api/?key=c803bc5b2f2e8ad5ccb0166d4bc898ae^&url=%%a"
)
echo %text%>output.txt 
```

示例 input.txt 有 600 行，我想将它们全部放在 output.txt 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:26:18.543

我假设您有一个 input.txt 文件，其中包含 600 行仅包含 url 部分，并且您希望使用固定的 http 和关键部分来完成这些行。如果这是真的，那么下面的批处理文件会这样做：

```
@echo off
(for /F "delims=" %%a in (input.txt) DO (
   echo http://adfoc.us/api/?key=c803bc5b2f2e8ad5ccb0166d4bc898ae^&url=%%a
)) >output.txt 
```

安东尼奥

PS - 如果我的回答是正确的，那么您不是在制作“网址缩短脚本”，而是恰恰相反！这个脚本获取一个 url 并通过添加 http 和关键部分来*放大*它，不是吗？

# java - 基于类反序列化json时发生异常，类内部有接口类型

> ID：14294401
> 
> 赞同：1
> 
> 时间：2013-01-12T14:44:26.937
> 
> 标签：java, json, gson

我得到了 json 文件和第三方类：Dealer 和接口 IDealerAttributes（我不能更改它们中的任何一个）；（我删除了包名和导入以使代码简单）

```
    JSON文件
    {
      "serviceURL": "com.mycompany.serviceURL",
      “经销商属性”：[
        {
          “语言”：“语言0”，
          "dealerAttributeName": "dealerAttributeName0",
          “更新日期”：0
        },
        {
          “语言”：“语言 1”，
          "dealerAttributeName": "dealerAttributeName1",
          “更新日期”：1
        }
      ]
    }

    类经销商{
        私有字符串服务URL；
        私有列表dealerAttributes；

        公共经销商（）{
            经销商属性 = 新的 ArrayList();
        }

        //Getter 和 Setter...
    }

    公共接口 IDealerAttributes {
        公共字符串 getLanguage();
        公共字符串 getDealerAttributeName();
        公共长 getUpdateDate();
    }

```

一旦我使用：

```
gson.fromJson(jsonObj.toString(), Dealer.class);

```

我将从这一行得到例外：

```
将 json 字符串解组为对象的异常：com.google.gson.JsonParseException：JsonDeserializer com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter@60e26ffd 无法反序列化 json 对象 [{"language":"language0","dealerAttributeName":"dealerAttributeName0" ,"updateDate":0},{"language":"language1","dealerAttributeName":"dealerAttributeName1","updateDate":1}] 给定类型 java.util.List

```

如何根据 Dealer.class、IDealerAttributes 读取这个 json 文件？

但是我可以添加一个类，比如说：

```
    公共类 DealerAttributes 实现 IDealerAttributes {
        私有字符串语言；
        私人字符串经销商属性名称；
        私人长更新日期；

        公共 DealerAttributes() {
        }

        //Getter 和 Setter...
    }

```

由于我是 json/gson 的新手，请您提供详细说明来帮助我吗？谢谢。

[已添加] 考虑 Dealer 类中是否有 100 个字段，并且在 Dealer 中使用/嵌套了另外 100 个接口。我在想是否有人有使用这种方式的经验：（MyType 是接口）

```
gson.registerTypeAdapter(MyType.class, new MyType());` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:15:30.350

您可以将其映射到地图列表，然后使用像[http://code.google.com/p/orika/](http://code.google.com/p/orika/)这样的 BeanMapper来获取更多信息性错误消息

# user-interface - 使用 Jubula 进行 GUI 测试

> ID：14294406
> 
> 赞同：0
> 
> 时间：2013-01-12T14:44:55.343
> 
> 标签：user-interface, automated-tests, gui-testing, jubula

任何人都可以帮助在 Jubula 中进行 GUI 测试吗？我有一个 java GUI 项目，我创建了 jar 文件并将其放入 Jubula 但在这一步之后我什么也做不了，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:30:50.503

是 Rcp 应用程序还是正常的？如果是 rcp 请创建 exe 并将其加载到 jubula。下面有一些教程。

[http://jmhofer.johoop.de/?p=163](http://jmhofer.johoop.de/?p=163)试着按照这个

# c# - 无法基于现有的 EF 类添加 web-api 控制器

> ID：14294408
> 
> 赞同：1
> 
> 时间：2013-01-12T14:45:03.727
> 
> 标签：c#, visual-studio-2010, entity-framework, asp.net-mvc-4

我创建了一个 EntityFramework ORM。我尝试使用向导添加新控制器；

![在此处输入图像描述](../Images/8ad04168fa850eb250ffa011d2c2a16c.png)

并得到以下错误：

![在此处输入图像描述](../Images/2c8538760943d7eb4d9f2fa6a396c378.png)

我该如何解决这个问题？我试图清理和重建，但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:47:40.763

基于此[`site`](http://blog.divergencehosting.com/2011/01/27/the-specified-named-connection-is-either-not-found-in-the-configuration-error/)；

> 如果您使用 Entity Framework 并将 edmx/app.config 与您的主网站分开放置，您将获得此信息。app.config 文件中的连接信息需要复制/与您网站根目录上的 web.config 中包含的连接信息相同。设置它，这个错误就会消失。

还要检查[使用 EF4 作为单独项目而不是我的 MVC 项目的编译器错误](https://stackoverflow.com/questions/4114181/compiler-error-using-ef4-as-a-separate-project-than-my-mvc-project)

# java - Android 记事本提供程序 classnotfound 错误 ing google drive sdk 示例

> ID：14294411
> 
> 赞同：5
> 
> 时间：2013-01-12T14:45:16.093
> 
> 标签：java, android, google-drive-api

在学习了来自 android 的 google drive quickstart 之后。我下载了他们的例子并得到了这个错误：

```
01-13 03:38:39.039: E/AndroidRuntime(29967): java.lang.RuntimeException: Unable to get provider com.example.android.notepad.NotePadProvider: java.lang.ClassNotFoundException: com.example.android.notepad.NotePadProvider in loader dalvik.system.PathClassLoader[/data/app/com.example.android.notepad-1.apk]
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.app.ActivityThread.installProvider(ActivityThread.java:3561)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.app.ActivityThread.installContentProviders(ActivityThread.java:3313)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3269)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.app.ActivityThread.access$2200(ActivityThread.java:117)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.os.Looper.loop(Looper.java:130)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at java.lang.reflect.Method.invokeNative(Native Method)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at java.lang.reflect.Method.invoke(Method.java:507)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at dalvik.system.NativeStart.main(Native Method)
01-13 03:38:39.039: E/AndroidRuntime(29967): Caused by: java.lang.ClassNotFoundException: com.example.android.notepad.NotePadProvider in loader dalvik.system.PathClassLoader[/data/app/com.example.android.notepad-1.apk]
01-13 03:38:39.039: E/AndroidRuntime(29967):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
01-13 03:38:39.039: E/AndroidRuntime(29967):    at android.app.ActivityThread.installProvider(ActivityThread.java:3546)
01-13 03:38:39.039: E/AndroidRuntime(29967):    ... 12 more 
```

我按照[这里](https://developers.google.com/drive/examples/android)的说明进行操作。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:49:13.790

您的 Android 版本很可能是旧版本，因为此[ContentProvider.PipeDataWriter](http://developer.android.com/reference/android/content/ContentProvider.PipeDataWriter.html)已添加到 API 11 更高版本（也称为 Honeycomb 及更高版本）中。

[注意示例源](https://code.google.com/p/google-drive-sdk-samples/source/browse/android/src/com/example/android/notepad/NotePadProvider.java#51)中的关键行

```
public class NotePadProvider extends ContentProvider 
                            implements 
                            PipeDataWriter<Cursor> {
    // SNIP 
} 
```

查看示例的[原始来源](https://code.google.com/p/google-drive-sdk-samples/source/browse/android/AndroidManifest.xml#30)`AndroidManifest.xml`表明所需的 SDK 的最低版本是 16（即 Android Ice Cream Sandwich 或更高版本）

```
<uses-sdk android:minSdkVersion="16" /> 
```

在较旧版本的 Android 上运行它，即使最低版本已更改以反映您当前的 Android 版本，例如用于 Gingerbread 的 SDK 9、用于 Froyo 的 8 或用于 Eclair 的 7，它也会严重失败，`ClassNotFoundException`因为由于在早期版本的 Android 中不存在。`ContentProvider``PipeDataWriter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:10:22.260

尝试以下操作：

1.  从 SDK 管理器的“附加”下下载 google_play_services
2.  将 /extras/google/google_play_services/libproject 导入您的工作区（它作为库导入）
3.  从 NotesList 中删除 google_play_services.jar（谷歌快速入门）
4.  转到项目属性 > Android > 添加库 > 添加 google_play_services 库。
5.  清洁并运行

我想 jar 一定有某种问题，我刚刚完成了（当我尝试上传图片快速入门时遇到了一些类似的错误，这是解决它的方法），它就像一个魅力。希望能帮助到你 ：）

# transfer - 将 pimcore 站点转移到另一台服务器

> ID：14294412
> 
> 赞同：2
> 
> 时间：2013-01-12T14:45:17.547
> 
> 标签：transfer, pimcore

嗨，

我对 Pimcore 真的很陌生（我是一个 joomla 人），我的朋友问我是否可以帮助他将基于 Pimcore 的页面转移到另一台服务器。我做了一个 sql 转储并将所有文件从服务器复制到我的 hd，然后在新服务器上导入 sql 数据库，更改数据库中的用户名并将所有文件复制回服务器上。此外，我对 config 文件夹中 system.xml 文件中的 db 进行了正确的更改。但现在我得到的只是一个空白屏幕，但后端部分工作（我看不到文件和页面）。我真的很感激一些帮助！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T15:59:15.957

有几件事可能会出错，但首先要检查：

*   MySQL 用户可以访问导入的视图。在服务器之间导入视图时，这是一个很常见的问题，

*   Apache Linux 用户对整个**网站/var**文件夹具有读/写访问权限，仅访问**/var/config**是不够的。例如，Pimcore 将缓存文件写入**website/var/cache**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T13:51:15.903

您`mod_rewrite`在 apache 中丢失，或者您的虚拟主机不允许覆盖。

# php - 如何从包含标记的字符串中提取 URL？

> ID：14294414
> 
> 赞同：-4
> 
> 时间：2013-01-12T14:45:31.043
> 
> 标签：php, regex

```
$string = '[url=http://domain.com]My Webpage[/url][img]http://domain.com/image1.jpg[/img][center][img]http://domain.com/image2.gif[/img][/center][center][thumb]http://domain.com/image3.png[/thumb][/center]';
preg_match_all('/.*?\[img|thumb\](http.+?)\[\/.*+/', $string, $matches);
var_dump($matches); 
```

试图获取图像数组（image1.jpg、image2.gif、image3.png）。图像可能介于`[img][\img]`和之间`[thumb][\thumb]`。而且我还需要检查一整行`[center][thumb]http://domain.com/image3.png[/thumb][/center]`以将其更改为其他图像。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:57:46.980

以下模式将其全部提取出来。

```
@\[(img|thumb)\](.+?)\[/\\1@ 
```

[爱迪生](http://ideone.com/bLkj3X)

# eclipse - Eclipse：执行时间

> ID：14294415
> 
> 赞同：3
> 
> 时间：2013-01-12T14:45:36.660
> 
> 标签：eclipse, execution-time

如何在 Eclipse 中查看每次执行后的执行时间？
就像在 NetBeans中一样`BUILD SUCCESSFUL (total time: 3 seconds)`。

# php - php中的选择选项

> ID：14294417
> 
> 赞同：2
> 
> 时间：2013-01-12T11:46:15.240
> 
> 标签：php, html

如果我的服务器帐户中有一个包含以下代码的插件：

```
function script_options() {
    $scripts = array(
        'Forum' => array(
            '403' => 'phpBB2',
            '5' => 'phpBB3',
            '417' => 'Simple Machines Forum',
        ),
        'Blog' => array(
            '410' => 'b2evolution',
            '418' => 'Movable Type',
            '409' => 'Textpattern',
            '400' => 'WordPress',
        ),
        'Wiki' => array(
            '413' => 'DokuWiki',
        ),
    );
    $result = '<option value="">'.__rp('none','none').'</option>';
    foreach ($scripts as $group => $list) {
        $result .= "<optgroup label=\"$group\">";
        foreach ($list as $script_key => $script_value) {
            $result .= "<option value=\"$script_key\"".($script_key == isset($_GET['script'])?$_GET['script']:false ? ' selected="selected"':'').">$script_value</option>";
        }
        $result .= '</optgroup>';
    }
    return $result;
} 
```

我怎样才能做出第一选择`('400' 'Wordpress')`；如果用户没有选择它自己选择`Wordpress`的任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:10:50.723

看来您并没有完全理解这段代码的作用，所以让我为您总结一下。

让我们从最后开始，逆向工作：当函数返回时，`$result`变量包含一个 HTML 片段，其中包含一堆`<optgroup>`标签，而这些标签包含`<option>`标签。我假设这个 HTML 被粘贴到`<select>`这个函数之外的某个标签中（顺便说一句，`<select>`是一个*HTML*的东西；PHP 有一个`select()`与此完全无关的函数，所以为了避免混淆，不要将 HTML`<select>`称为“PHP 中的选择选项” ）。

`foreach`在此之前的循环`$result`通过连接各个 HTML 块来构造值，而这些循环又派生自在函数开头声明的嵌套关联数组。如果你仔细观察这些循环，你会发现生成的 HTML 的树结构遵循嵌套数组的树结构：每个顶级元素都变成一个`<optgroup>`，并且名称是从数组键派生的；每个二级元素变成一个`<option>`，其中键进入`value`属性（确定提交包含表单时使用的值），值进入用户可见的标签内容。数组元素是按顺序访问的，因此数组中最先出现的内容也会在生成的 HTML 中出现。

在这种情况下，您需要了解两件事`<select>`：首先，您可以通过添加`selected`标签来定义默认选择哪个选项（表达这一点的标准方式是`<option selected="selected">...</option>`）；在您的`<select>`. 其次，如果您的选项都没有`select`属性，则第一个成为默认值。

现在，这对你意味着什么？很简单：您可以让您的代码设置`selected`WordPress 条目的属性；这样，您的选项的顺序与现在、optgroups 和所有选项完全相同，但 WordPress 将被预先选择。或者您可以将 WordPress 的元素作为第一个元素，将其放在 中的第一个元素，`<select>`并且应该预先选择它，因为没有选项具有`selected`属性。

# node.js - 在express js中为请求对象分配默认值

> ID：14294440
> 
> 赞同：0
> 
> 时间：2013-01-12T14:48:14.790
> 
> 标签：node.js, express, connect

我将如何确保特定对象可用于我以 express 处理的每个请求？

```
var somethingImportant = "really important";
var app = express();

// This is just a hypothetical example of what I'm after...
app.mixThisInWithRequest({
    somethingImportant: somethingImportant
});

app.use(function (request, response, next) {
   console.log(request.somethingImportant);
}); 
```

鉴于上面的示例，是否有类似于该`mixThisInWithRequest`功能的设施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:58:51.550

将其添加到`request`中间件中的对象中，在`app.use`您需要的时候尽早添加：

```
var somethingImportant = "really important";
var app = express();

app.use(function (request, response, next) {
    request.somethingImportant = somethingImportant;
    next();
});
app.use(function (request, response, next) {
   console.log(request.somethingImportant);
}); 
```

# c# - 来自 XML 的 C# 类定义

> ID：14294448
> 
> 赞同：3
> 
> 时间：2013-01-12T14:49:25.517
> 
> 标签：c#, xml, visual-studio-2010, class

为了在我的程序中构建灵活性，我想为用户提供自定义工具条按钮的选项。

每个按钮后面都有一个类定义，所有按钮都具有相同的结构；但是，结构会因用户而异，具体取决于他们将如何使用该程序。一个例子是让一个按钮定义零件号，另一个按钮定义数量或制造商等。

我最初的想法是将定义放入 XML 文件中，然后在绘制工具条时读取文件以定义每个按钮显示的序列位置、颜色和文本，然后从 XML 中的其他字段为每个按钮创建类.

我想我可以设置一个限制并对每个数据类型进行硬编码，但我想知道这是否可以以某种方式动态完成？

我已经从 VS2010 XML > Create Schema 菜单中创建了一个 XSD，并打开了我的 XML 文件，但它是特定于我现在拥有的 XML 类型的，当然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:08:13.470

您可以考虑使用`XML Serialization`. 但请注意，此方法存在一些限制，因为它在序列化时不会拉取所有图形。它将主要占用公共财产。有关详细信息，请参阅。. .

> [http://support.microsoft.com/kb/815813](http://support.microsoft.com/kb/815813)

我希望这就是你的意思`dynamic`。

这是您可能感兴趣的网站，但 XAML 比这更深入

> 一个非常简单的 UI 定制 [http://msdn.microsoft.com/en-us/library/bb613545.aspx](http://msdn.microsoft.com/en-us/library/bb613545.aspx)

以下是有关 XAML 的更多资源。. .

> 我相信在第 18 章或第 4 部分中，他简要介绍了 CIL 代码和 XAML 代码以及如何动态加载它们。. . [http://www.amazon.com/Pro-NET-Framework-Professional-Apress/dp/1430242337](https://rads.stackoverflow.com/amzn/click/com/1430242337)
> 
> 本书专门针对WPF平台。 [http://www.amazon.com/Pro-WPF-4-5-Presentation-Professional/dp/1430243651/ref=sr_1_1?s=books&ie=UTF8&qid=1358010247&sr=1-1&keywords=C%23+wpf](https://rads.stackoverflow.com/amzn/click/com/1430243651)

# javascript - 如何使用 Javascript 在图像上创建链接

> ID：14294452
> 
> 赞同：5
> 
> 时间：2013-01-12T14:49:35.217
> 
> 标签：javascript, image, hyperlink

```
<div id="mydiv">
<img src="myimage.jpg" />
</div>
<script language="javascript">
var a=document.createElement('a');
a.href='http://mylink.com';
document.getElementById('mydiv').appendChild(a);
</script> 
```

该脚本无法在图像上创建链接

```
<div id="mydiv">
    <a href="http://mylink.com"><img src="myimage.jpg" /></a>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T14:51:25.630

您将链接放在图像*之后*。

您需要移动图像，使其位于链接内。

```
var image = document.getElementById('mydiv').getElementsByTagName('img')[0];
a.appendChild(image); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T10:51:23.363

```
 <div id="mydiv">
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Cat_November_2010-1a.jpg/220px-Cat_November_2010-1a.jpg" />
</div>

<script language="javascript">
var a=document.createElement('a');
a.href='http://mylink.com';
var image = document.getElementById('mydiv').getElementsByTagName('img')[0];
b=a.appendChild(image);
document.getElementById('mydiv').appendChild(a);
</script> 
```

谢谢你的主意。这项工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-07T13:36:02.633

这是一个不需要额外 div 并在 HTML 页面中的每个图像周围放置一个链接的解决方案：

```
<!-- jQuery -->
<script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>

<script type="text/javascript" charset="utf8">
  $(document).ready(function(){
    var images = document.getElementsByTagName('img');
    for (var i = 0; i < images.length; i++) {
      var image = images[i];
      var parentElement = image.parentElement;
      var a = document.createElement('a');
      a.href = image.getAttribute('src');
      a.appendChild(image);
      parentElement.appendChild(a);
    }
  });
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-28T22:16:12.473

### 对于单个图像

您可以通过元素对象、ID 或第一`src`个子字符串匹配传递图像。采用可选的目标属性，例如“_blank”。不需要 jQuery。

```
// By img element object
// (used by the functions below)
var addImageLink = function( elem, target ){
    if( !elem || !( 'tagName' in elem ) ){ return; }
    var image = elem;
    var parent = image.parentElement;
    var a = document.createElement( 'a' );
    a.href = image.getAttribute( 'src' );
    if( target ){ a.setAttribute( 'target', target ); }
    a.appendChild( image );
    parent.appendChild( a );
};

// By img element id
// <img src="images/gallery/1.jpg" id="image1" />
// <script> addImageLinkById( 'image1' ); </script>
var addImageLinkById = function( id, target ){
    addImageLink( document.getElementById( id ), target );
};

// By img element src (first match)
// <img src="images/gallery/1.jpg"/>
// <script> addImageLinkBySrc( '/1.jpg' ); </script>
var addImageLinkBySrc = function( src, target ){
    var image, images = document.getElementsByTagName( 'img' );
    if( typeof src == 'undefined' ){ src = ''; }
    for( var i = 0; i < images.length; i++ ){
        if( images[ i ].src.indexOf( src ) < 0 ){ continue; }
        addImageLink( images[ i ], target ); return;
    }
}; 
```

### 用于遍历所有图像

此解决方案在每个图像周围放置一个链接。这是 Falko 答案的扩展版本。

*   不使用 jQuery
*   可选择通过 href 子字符串将图像列入白名单，例如“images/gallery/”
*   指定一个可选的目标属性，例如“_blank”
*   不会跳过图像的后半部分
    ^([（我在尝试他的代码时遇到了这个问题，但这可能是我做错了）])

```
var addImageLinks = function( filter, target ){

    var parent, a, image;
    var images = document.getElementsByTagName( 'img' );
    var hasTarget = ( typeof target != 'undefined' );
    var hasFilter = ( typeof filter != 'undefined' );

    for( var i = 0; i < images.length; i++ ){

        image = images[ i ];
        if( hasFilter && ( image.src.indexOf( filter ) < 0 ) ){ continue; }

        // Skip over already-wrapped images, by adding an attribute
        if( image.getAttribute( 'data-wrapped-link' ) ){ continue; }
        image.setAttribute( 'data-wrapped-link', '1' );

        // Add the link
        parent = image.parentElement;
        a = document.createElement( 'a' );
        a.href = image.getAttribute( 'src' );
        if( hasTarget ){ a.setAttribute( 'target', target ); }
        a.appendChild( image );
        parent.appendChild( a );

        // We inserted a "new" image, so go back one step so we don't miss any
        // (due to being inside the "i < images.length" loop)
        i--;

    }

};

// Then:
// <img src="images/gallery/a.jpg"/>
// <img src="images/gallery/b.jpg"/>
// <img src="images/gallery/c.jpg"/>
// <img src="images/icons/a.gif"/> <- ignored

// Near bottom of the page (or in an onLoad handler, etc):
// </script> addImageLinks( 'images/gallery/', '_blank' ); </script> 
```

# android - Android 应用程序在连接到 Web 服务时崩溃

> ID：14294459
> 
> 赞同：2
> 
> 时间：2013-01-12T14:50:24.053
> 
> 标签：android, jax-ws

我从 Android 客户端连接到我的网络服务时遇到问题。在我的 MainActivity 类中，程序在以下行崩溃：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

问题绝对不是方法名称，而是名称空间的问题，但我不知道出了什么问题。

GameAndroidUtil:

```
private static final String NAMESPACE = "http://game.webcentral.pl/";
private static final String SOAP_ACTION = "";
private static final String WSDL_URL = "http://localhost:8080/ReversiGameWS/services/GameWS?wsdl"; 
```

主要活动：

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try {
            GameAndroidUtil.testGameWS();
        } catch (SoapFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

我的 GameWS.wsdl：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://game.webcentral.pl" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:impl="http://game.webcentral.pl" xmlns:intf="http://game.webcentral.pl" xmlns:tns1="http://data.game.webcentral.pl" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<!--WSDL created by Apache Axis version: 1.4
Built on Apr 22, 2006 (06:55:48 PDT)-->
 <wsdl:types>
  <schema elementFormDefault="qualified" targetNamespace="http://game.webcentral.pl" xmlns="http://www.w3.org/2001/XMLSchema">
   <import namespace="http://data.game.webcentral.pl"/>
   <element name="addMove">
    <complexType>
     <sequence>
      <element name="sessionId" type="xsd:string"/>
      <element name="move" type="xsd:int"/>
     </sequence>
    </complexType>
   </element>
   <element name="addMoveResponse">
    <complexType/>
   </element>
   <element name="fault" type="tns1:GameException"/>
   <element name="login">
    <complexType>
     <sequence>
      <element name="userName" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="loginResponse">
    <complexType>
     <sequence>
      <element name="loginReturn" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="getGameStatus">
    <complexType>
     <sequence>
      <element name="sessionId" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="getGameStatusResponse">
    <complexType>
     <sequence>
      <element name="getGameStatusReturn" type="tns1:GameStatus"/>
     </sequence>
    </complexType>
   </element>
  </schema>
  <schema elementFormDefault="qualified" targetNamespace="http://data.game.webcentral.pl" xmlns="http://www.w3.org/2001/XMLSchema">
   <complexType name="GameException">
    <sequence/>
   </complexType>
   <complexType name="GameStatus">
    <sequence>
     <element name="lastMove" nillable="true" type="xsd:int"/>
     <element name="yourMove" type="xsd:boolean"/>
    </sequence>
   </complexType>
  </schema>
 </wsdl:types>

   <wsdl:message name="loginResponse">

      <wsdl:part element="impl:loginResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="loginRequest">

      <wsdl:part element="impl:login" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="GameException">

      <wsdl:part element="impl:fault" name="fault">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="addMoveRequest">

      <wsdl:part element="impl:addMove" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="addMoveResponse">

      <wsdl:part element="impl:addMoveResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getGameStatusRequest">

      <wsdl:part element="impl:getGameStatus" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getGameStatusResponse">

      <wsdl:part element="impl:getGameStatusResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:portType name="GameWS">

      <wsdl:operation name="addMove">

         <wsdl:input message="impl:addMoveRequest" name="addMoveRequest">

       </wsdl:input>

         <wsdl:output message="impl:addMoveResponse" name="addMoveResponse">

       </wsdl:output>

         <wsdl:fault message="impl:GameException" name="GameException">

       </wsdl:fault>

      </wsdl:operation>

      <wsdl:operation name="login">

         <wsdl:input message="impl:loginRequest" name="loginRequest">

       </wsdl:input>

         <wsdl:output message="impl:loginResponse" name="loginResponse">

       </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getGameStatus">

         <wsdl:input message="impl:getGameStatusRequest" name="getGameStatusRequest">

       </wsdl:input>

         <wsdl:output message="impl:getGameStatusResponse" name="getGameStatusResponse">

       </wsdl:output>

         <wsdl:fault message="impl:GameException" name="GameException">

       </wsdl:fault>

      </wsdl:operation>

   </wsdl:portType>

   <wsdl:binding name="GameWSSoapBinding" type="impl:GameWS">

      <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>

      <wsdl:operation name="addMove">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="addMoveRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="addMoveResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

         <wsdl:fault name="GameException">

            <wsdlsoap:fault name="GameException" use="literal"/>

         </wsdl:fault>

      </wsdl:operation>

      <wsdl:operation name="login">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="loginRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="loginResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getGameStatus">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="getGameStatusRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="getGameStatusResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

         <wsdl:fault name="GameException">

            <wsdlsoap:fault name="GameException" use="literal"/>

         </wsdl:fault>

      </wsdl:operation>

   </wsdl:binding>

   <wsdl:service name="GameWSService">

      <wsdl:port binding="impl:GameWSSoapBinding" name="GameWS">

         <wsdlsoap:address location="http://localhost:8080/ReversiGameWS/services/GameWS"/>

      </wsdl:port>

   </wsdl:service>

</wsdl:definitions> 
```

Web 服务中的我的 GameWS.java：

```
package pl.webcentral.game;

import java.util.HashMap;

@WebService(targetNamespace = "http://game.webcentral.pl/", portName = "GameWS",        serviceName = "GameWSService")
public class GameWS {

// Further code

} 
```

我究竟做错了什么？我真的什么都试过了。Web 服务本身工作正常。

更新的 LogCat：

```
 01-12 16:54:27.930: E/AndroidRuntime(1070): FATAL EXCEPTION: main
01-12 16:54:27.930: E/AndroidRuntime(1070): java.lang.RuntimeException: Unable to start activity ComponentInfo{pl.webcentral.androidclient1/pl.webcentral.androidclient1.MainActivity}: java.lang.RuntimeException: Unexpected exception
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.os.Looper.loop(Looper.java:137)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.lang.reflect.Method.invokeNative(Native Method)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.lang.reflect.Method.invoke(Method.java:511)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at dalvik.system.NativeStart.main(Native Method)
01-12 16:54:27.930: E/AndroidRuntime(1070): Caused by: java.lang.RuntimeException: Unexpected exception
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.GameAndroidUtil.callGameLogin(GameAndroidUtil.java:76)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.GameAndroidUtil.testGameWS(GameAndroidUtil.java:18)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.MainActivity.onCreate(MainActivity.java:24)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.Activity.performCreate(Activity.java:5008)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-12 16:54:27.930: E/AndroidRuntime(1070):     ... 11 more
01-12 16:54:27.930: E/AndroidRuntime(1070): Caused by: java.net.ConnectException: failed to connect to localhost/127.0.0.1 (port 8080) after 20000ms: isConnected failed: ECONNREFUSED (Connection refused)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.isConnected(IoBridge.java:224)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.connectErrno(IoBridge.java:161)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.connect(IoBridge.java:112)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.net.Socket.connect(Socket.java:842)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at org.ksoap2.transport.ServiceConnectionSE.openOutputStream(ServiceConnectionSE.java:120)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:176)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.GameAndroidUtil.callGameLogin(GameAndroidUtil.java:69)
01-12 16:54:27.930: E/AndroidRuntime(1070):     ... 16 more
01-12 16:54:27.930: E/AndroidRuntime(1070): Caused by: libcore.io.ErrnoException: isConnected failed: ECONNREFUSED (Connection refused)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.isConnected(IoBridge.java:208)
01-12 16:54:27.930: E/AndroidRuntime(1070):     ... 36 more
01-12 16:54:32.910: I/Process(1070): Sending signal. PID: 1070 SIG: 9 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T17:32:40.310

`localhost:8080`您正在尝试通过指定托管服务的系统的地址来连接到 Web服务。Android 模拟器在虚拟机 (QEMU) 中运行。因此，`localhost:8080`将是**仿真器自己的环回地址，而不是系统的环回地址。**

So, you can either go to CommandPrompt in your Windows to get the IP address of your system or just use `http://10.0.2.2:8080/...` instead of using `localhost`.

```
private static final String WSDL_URL = "http://10.0.2.2:8080/ReversiGameWS/services/GameWS?wsdl"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:53:28.283

问题很可能是您试图在 UI 线程上执行 Web 调用。

检查你的 logcat，你可能会看到这个错误。

您不需要在 UI 线程上进行长时间运行的调用（如 Web 服务调用），并且需要使用 AsyncTasks 将它们移出线程。

如果不是这种情况，您将需要包含您的 logcat 输出，以便我们了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:24:59.857

`java.lang.VerifyError`当您针对与运行时使用的库不同的库进行编译时，可能会出现结果。

例如，当我尝试运行针对 Xerces 1 编译的程序时发生了这种情况，但在类路径中找到了 Xerces 2。所需的类（在`org.apache.*`命名空间中）是在运行时找到的，所以***不是***`ClassNotFoundException`结果。类和方法发生了变化，因此在运行时找到的方法签名与编译时的签名不匹配。

 *通常，编译器会标记方法签名不匹配的问题。DVM 将在加载类时再次验证字节码，并`VerifyError`在字节码尝试执行不应允许的操作时抛出 - 就像调用一个返回的方法，`String`然后将该返回值存储在一个包含`List`.

请确保您在编译时使用正确版本的任何 jar 或库。*

# php - 在在线 c 编译器中显示错误

> ID：14294461
> 
> 赞同：1
> 
> 时间：2013-01-12T14:50:41.560
> 
> 标签：php, c, compiler-errors

大家好，我有 ac 编译器启动并运行显示输出，但问题是它不显示错误....

```
 shell_exec("gcc xyz.c -o ab.out ");

      $output=exec("./ab.out");
      echo $output; 
```

所以它显示输出但在编译时没有发生任何错误。任何帮助都将受到应有的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:06:39.417

您运行的命令的任何错误输出都将转到 STDERR，并且 exec、shell_exec 函数都不会为您提供。一种方法是重定向它

```
exec("gcc test.c 2>&1", $out); 
```

最简洁的方法是使用[proc_open](http://php.net/proc_open)函数。

```
$descriptorspec = array(
   1 => array("pipe", "w"),  // stdout
   2 => array("pipe", "w") // stderr 
);

$process = proc_open('gcc test.c', $descriptorspec, $pipes);

if (is_resource($process)) {
    $stderr = stream_get_contents($pipes[2]);
    $stdout = stream_get_contents($pipes[1]);
    fclose($pipes[1]);
    fclose($pipes[2]);
    $return_value = proc_close($process);
} 
```

# c# - 使用 User32.dll SendMessage 将字符串发送到另一个 Windows 窗体应用程序

> ID：14294462
> 
> 赞同：2
> 
> 时间：2013-01-12T14:50:44.287
> 
> 标签：c#, winforms, com-interop, sendmessage

我有一个奇怪的问题。

我正在使用 SendMessage 将字符串发送到同一 Windows 窗体应用程序的所有正在运行的实例。

我可以成功发送 IntPtr 指针的数值的字符串表示形式，如下所示：

```
 unsafe private void SendString(IntPtr handle, IntPtr myHandle)
    {
        string s = handle.ToString(); // This will work and the value will be received.
                                      // Try with "123553" which wont work.
                                      // How can that be?
        IntPtr lpData = Marshal.StringToHGlobalUni(s);

        COPYDATASTRUCT data = new COPYDATASTRUCT();
        data.dwData = 0;
        data.cbData = s.Length * 2;
        data.lpData = lpData;

        IntPtr lpStruct = Marshal.AllocHGlobal(
            Marshal.SizeOf(data));

        Marshal.StructureToPtr(data, lpStruct, false);

        int hTarget;
        var succes = Int32.TryParse(s, out hTarget);

        if (succes)
            SendMessage(hTarget, WM_COPYDATA, handle, lpStruct);
    } 
```

接收应用程序正确输出类似“123553”的值。

但是，如果我手动将值分配给`s`什么都没有收到：

```
 string s = "123553"; 
```

**有谁知道为什么在 IntPtr 上调用 ToString 并对值进行硬编码不会产生相同的行为？**

自己运行应用程序的代码在这里：

```
 public const int WM_COPYDATA = 0x004a;

    [StructLayout(LayoutKind.Sequential)]
    public struct COPYDATASTRUCT
    {
        [MarshalAs(UnmanagedType.I4)]
        public int dwData;
        [MarshalAs(UnmanagedType.I4)]
        public int cbData;
        [MarshalAs(UnmanagedType.SysInt)]
        public IntPtr lpData;
    }

    [DllImport("User32.dll")]
    private static extern bool SendMessage(int hWnd,
        int wMsg, IntPtr wParam, IntPtr lParam);

    public Form1()
    {
        InitializeComponent();
    }

    unsafe protected override void WndProc(ref Message message)
    {
        if (message.Msg == WM_COPYDATA)
        {
            COPYDATASTRUCT data = (COPYDATASTRUCT)
                message.GetLParam(typeof(COPYDATASTRUCT));

            string str = new string((char*)(data.lpData),
                0, data.cbData / 2);

            Debug.WriteLine(str);
        }
        base.WndProc(ref message);
    }

    unsafe private void SendString(IntPtr handle, IntPtr myHandle)
    {
        string s = handle.ToString();
        IntPtr lpData = Marshal.StringToHGlobalUni(s);

        COPYDATASTRUCT data = new COPYDATASTRUCT();
        data.dwData = 0;
        data.cbData = s.Length * 2;
        data.lpData = lpData;

        IntPtr lpStruct = Marshal.AllocHGlobal(
            Marshal.SizeOf(data));

        Marshal.StructureToPtr(data, lpStruct, false);

        int hTarget;
        var succes = Int32.TryParse(s, out hTarget);

        if (succes)
            SendMessage(hTarget, WM_COPYDATA, handle, lpStruct);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Process currentProcess = Process.GetCurrentProcess();

        var handles = (from process in Process.GetProcesses()
                       where
                         process.Id != currentProcess.Id &&
                         process.ProcessName.Equals(
                           currentProcess.ProcessName,
                           StringComparison.Ordinal)
                       select process.MainWindowHandle).ToList<IntPtr>();

        foreach (var handle in handles)
        {
            SendString(handle, this.Handle);
            Debug.WriteLine(string.Format("Sending handle {0} from handle {1}", handle, this.Handle));
        }
    } 
```

资料来源：

[检测应用程序的另一个实例是否已在运行](https://stackoverflow.com/questions/3190209/detecting-if-another-instance-of-the-application-is-already-running)

[使用 WM_COPYDATA 进行进程间通信 (VFP9)](http://www.news2news.com/vfp/?example=536&ver=vcs)

# sql - 如何与存储过程结果进行连接？

> ID：14294464
> 
> 赞同：2
> 
> 时间：2013-01-12T14:50:51.743
> 
> 标签：sql, stored-procedures, join, informix

我想在查询和存储过程的结果之间建立连接（出于某种原因）。

我的查询是：

```
SELECT COUNT(a.values_key) AS docscount,b.main_code,b.year  
FROM SP_name_should_be_here a  
INNER JOIN  dmr23req  b 
  ON a.values_key = b.req_year || ',' || b.req_ser  
  AND a.newstateserial = 17  
  AND a.taskcode = 35  
GROUP BY b.main_code,b.year 
```

* * *

我的存储过程`dmr_get_full_in`需要两个参数

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:09:26.523

答案是您应该在 FROM 子句中使用[“迭代器函数” ：](https://www.ibm.com/support/knowledgecenter/SSGU8G_12.1.0/com.ibm.sqls.doc/ids_sqs_1021.htm)

```
FROM TABLE(FUNCTION stored_procedure(arg1, arg2)) AS alias(col1, col2, ....) 
```

“别名”并不总是必需的，但请仔细查看直接执行过程的输出中的列名：

```
EXECUTE stored_procedure(arg1, arg2) 
```

如果它包含唯一的列名，你会没事的；如果没有，你不会，你需要`AS alias(col1, col2, ...)`符号。

* * *

这是您查询的类似物（或多或少）。

可以以不同方式编写但有效的琐碎函数：

```
CREATE FUNCTION SimpleElements(lo INTEGER, hi INTEGER) RETURNING INTEGER AS Atomic_Number;
    DEFINE an INTEGER;
    FOREACH SELECT Atomic_Number
              INTO an
              FROM Elements
             WHERE Atomic_Number BETWEEN lo AND hi
             ORDER BY Atomic_Number
        RETURN an WITH RESUME;
    END FOREACH;
END FUNCTION; 
```

使用查询`TABLE(FUNCTION stored_procedure(arg1, arg2))`：

MOD 函数用作生成一些要计数的组的简单方法，但它说明了作为练习要点的符号。

```
SELECT COUNT(*) AS group_count, MOD(b.atomic_number, 3) AS mod_num
  FROM TABLE(FUNCTION SimpleElements(1, 10)) AS a(Atomic_Number)
  JOIN Elements AS b
    ON a.atomic_number = b.atomic_number
 GROUP BY mod_num
 ORDER BY mod_num; 
```

输出：

```
3       0
4       1
3       2 
```

### 元素表

```
CREATE TABLE elements
(
    atomic_number   INTEGER NOT NULL UNIQUE CONSTRAINT c1_elements
                    CHECK (atomic_number > 0 AND atomic_number < 120),
    symbol          CHAR(3) NOT NULL UNIQUE CONSTRAINT c2_elements,
    name            CHAR(20) NOT NULL UNIQUE CONSTRAINT c3_elements,
    atomic_weight   DECIMAL(8,4) NOT NULL,
    stable          CHAR(1) DEFAULT 'Y' NOT NULL
                    CHECK (stable IN ('Y', 'N'))
);

INSERT INTO elements VALUES(  1, 'H',   'Hydrogen',        1.0079, 'Y');
INSERT INTO elements VALUES(  2, 'He',  'Helium',          4.0026, 'Y');
INSERT INTO elements VALUES(  3, 'Li',  'Lithium',         6.9410, 'Y');
INSERT INTO elements VALUES(  4, 'Be',  'Beryllium',       9.0122, 'Y');
INSERT INTO elements VALUES(  5, 'B',   'Boron',          10.8110, 'Y');
INSERT INTO elements VALUES(  6, 'C',   'Carbon',         12.0110, 'Y');
INSERT INTO elements VALUES(  7, 'N',   'Nitrogen',       14.0070, 'Y');
INSERT INTO elements VALUES(  8, 'O',   'Oxygen',         15.9990, 'Y');
INSERT INTO elements VALUES(  9, 'F',   'Fluorine',       18.9980, 'Y');
INSERT INTO elements VALUES( 10, 'Ne',  'Neon',           20.1800, 'Y');
INSERT INTO elements VALUES( 11, 'Na',  'Sodium',         22.9900, 'Y');
INSERT INTO elements VALUES( 12, 'Mg',  'Magnesium',      24.3050, 'Y');
INSERT INTO elements VALUES( 13, 'Al',  'Aluminium',      26.9820, 'Y');
INSERT INTO elements VALUES( 14, 'Si',  'Silicon',        28.0860, 'Y');
INSERT INTO elements VALUES( 15, 'P',   'Phosphorus',     30.9740, 'Y');
INSERT INTO elements VALUES( 16, 'S',   'Sulphur',        32.0650, 'Y');
INSERT INTO elements VALUES( 17, 'Cl',  'Chlorine',       35.4530, 'Y');
INSERT INTO elements VALUES( 18, 'Ar',  'Argon',          39.9480, 'Y');
… 
```

# asp.net-mvc-3 - Asp.Net MVC 3 未在发布时将集合绑定到模型

> ID：14294466
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:51:11.307
> 
> 标签：asp.net-mvc-3, razor, collections, enums, model-binding

我有一个具有许多属性的对象，其中一个是其他一些复杂对象的数组，
就像这样

```
class obj1
{
 public string prop1 {get; set;}
 public string prop2 {get; set;}
 public obj2[] array {get; set;}
}
class obj2
{
 SomeEnum Type{get; set;}
 string Content{get; set;}
} 
```

我为 obj2 数组创建了一个编辑器模板，将其命名为 obj2ArrayTemplate
，如下所示

```
@for (int i = 0; i < Model.Length; i++)
{
    @Html.EditorFor(model=>model[i],"obj2Template")
} 
```

obj2 的编辑器模板将其命名为 obj2Template
，如下所示

```
<div class="editor-label">
    @Html.DisplayFor(model=>model.Type,"SomeEnum",ViewData)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Content)
    @Html.ValidationMessageFor(model => model.Content)
</div> 
```

现在因为属性`Type`if 的类型`SomeEnum`是 an `enum`，因此不能由 Asp.Net MVC 直接呈现，
我也为此创建了一个模板，
类似于这样

```
<input type="text" value="@Model.ToString()" id="@ViewData.TemplateInfo.HtmlFieldPrefix" name="@ViewData.TemplateInfo.HtmlFieldPrefix"/> 
```

视图正在正确呈现，并且组合呈现视图的 HTML 是

```
<div class="editor-field">
    <input class="text-box single-line" id="array__0__Content" name="array.[0].Content" type="text" value="FBID" />
</div>
<div class="editor-label">
<input type="text" value="Blog" id="array.[1].Type" name="array.[1].Type"/>
</div>
<div class="editor-field">
    <input class="text-box single-line" id="array__1__Content" name="array.[1].Content" type="text" value="SOme random blog" />
</div>
<div class="editor-label">
<input type="text" value="Twitter" id="array.[2].Type" name="array.[2].Type"/>
</div>
<div class="editor-field">
    <input class="text-box single-line" id="array__2__Content" name="array.[2].Content" type="text" value="Twitter Profile" />
</div> 
```

当我发回包含此 html
chrome 的表单时，向我显示了此发布的数据

```
prop1:val1
prop2:val2
array.[0].Type:Facebook
array.[0].Content:FBID
array.[1].Type:Blog
array.[1].Content:SOme random blog
array.[2].Type:Twitter
array.[2].Content:Twitter Profile 
```

`array of obj2`但仍然是类型模型中的数组字段`obj1`是`null`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:42:47.167

可以破解那个:)
检查从服务器发布的请求我发现请求中有一个 .(dot) 额外的，所以数组没有被填充
所以而不是

```
array.[0].Type:Facebook
array.[0].Content:FBID
array.[1].Type:Blog
array.[1].Content:SOme random blog
array.[2].Type:Twitter
array.[2].Content:Twitter Profile 
```

这应该发回

```
array[0].Type:Facebook
array[0].Content:FBID
array[1].Type:Blog
array[1].Content:SOme random blog
array[2].Type:Twitter
array[2].Content:Twitter 
```

而且我没有发现为什么 Asp.Net MVC 框架会添加那个额外的点的明显原因。当我以 MVC 的方式做所有事情时，
我改变了我的代码以包含一些小技巧。
我将这个添加到 obj 2 的编辑器模板中

```
@{
    ViewData.TemplateInfo.HtmlFieldPrefix = ViewData.TemplateInfo.HtmlFieldPrefix.Replace(".", "");
    } 
```

所以现在一切都运行良好。

# ios - 我的视图控制器没有加载 Game Center

> ID：14294470
> 
> 赞同：1
> 
> 时间：2013-01-12T14:51:31.717
> 
> 标签：ios, objective-c, game-center

我正在按照教程进行基于 Game Center 回合的比赛、井字游戏，但我的视图控制器未加载。它在我使用源代码时有效，但不适用于我自己输入的代码，来自书中。我已经检查并找不到任何区别。

我确实进入了游戏中心，当我点击“轮到你玩”时，它会加载带有“开始游戏”按钮的初始屏幕，而不是原始代码中的“tictactoeGameViewController”。

如果有人可以在这里帮助我，我将不胜感激:-)

这是我的代码：

```
#import "ViewController.h"
#import "tictactoeGameViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(IBAction)beginGame:(id)sender {

GKMatchRequest *match = [[GKMatchRequest alloc]init];
[match setMaxPlayers:2];
[match setMinPlayers:2];

GKTurnBasedMatchmakerViewController *tmvc = nil;
tmvc = [[GKTurnBasedMatchmakerViewController alloc]initWithMatchRequest:match];
[tmvc setTurnBasedMatchmakerDelegate:self];
[self presentModalViewController:tmvc animated:YES];
[tmvc release];
[match release];

}

- (void)viewDidLoad {

[super viewDidLoad];

if ([GameCenterManager isGameCenterAvailable]) {
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(localUserAuthenticationChanged:) name:GKPlayerAuthenticationDidChangeNotificationName object:nil];
    gcManager = [[GameCenterManager alloc]init];
    [gcManager setDelegate:self];
    [gcManager authenticateLocalUser];
}
}

-(void)processGameCenterAuthentication:(NSError *)error {
if (error != nil) {
    NSLog(@"An error occured during authentication: %@", [error localizedDescription]);
}
}

-(void)localUserAuthenticationChanged:(NSNotification *)notif {
NSLog(@"Authentication Changed: %@", notif.object);
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

#pragma mark - GCTurnBasedMatchHelperDelegate

-(void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController didFindMatch:(GKTurnBasedMatch *)match {

[self dismissModalViewControllerAnimated:YES];

tictactoeGameViewController *gameVC = [[tictactoeGameViewController alloc]init];
gameVC.match = match;
[[self navigationController]pushViewController:gameVC animated:YES];
[gameVC release];

}

-(void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController playerQuitForMatch:(GKTurnBasedMatch *)match {
[match participantQuitOutOfTurnWithOutcome:GKTurnBasedMatchOutcomeQuit withCompletionHandler:^(NSError *error) {
    if (error) {
        NSLog(@"An error occured ending match: %@", [error localizedDescription]);
    }
}];
}

-(void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController didFailWithError:(NSError *)error {
NSLog(@"Turned Based Matchmaker Failed with Error: %@", [error localizedDescription]);
}

-(void)turnBasedMatchmakerViewControllerWasCancelled:(GKTurnBasedMatchmakerViewController *)viewController {
[self dismissModalViewControllerAnimated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T20:50:17.830

我确实找到了解决方案：

ViewController 必须是 RootViewController 所以我改变了：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

// Override point for customization after application launch.
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

到：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

ViewController *controller = [[ViewController alloc] init];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:controller];
self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible];
return YES;
} 
```

# cocos2d-iphone - Cocos2D：使用自定义间隔运行父更新方法

> ID：14294472
> 
> 赞同：0
> 
> 时间：2013-01-12T14:52:00.060
> 
> 标签：cocos2d-iphone

我正在尝试为我的游戏构建一个小级别系统。我想要一个更新方法来处理我的游戏主逻辑。所以我在父类 .h 文件中声明了一个方法：

级别.h：

```
-(void)gameLogicTick:(ccTime)dt; 
```

然后我在 Level.m 中实现，不认为确切的代码是相关的。

我创建了一个名为 Forest 的 Level 子类。在 Forest 初始化方法中，我想指定*gameLogicTick*的间隔，我这样做了：

```
[self schedule:@selector(gameLogicTick:)interval:5.0f]; 
```

这使我的游戏崩溃（5 秒后），没有任何调试消息。

那么如何创建一个计划更新方法，我可以在其中指定当前类的时间间隔？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:57:44.787

不要尝试弄乱父类`gameLogicTick:`方法。让那个人全速完成它的事情。在您的 Forest.m 中，只需调用

```
[self schedule:@selector(update:) interval: 5.0f]; 
```

然后确保您`update:(ccTime)`在 Forest 实现中具有适当的增量。只是不要将其命名为与您的父类的方法相同，您不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:20:09.503

你做什么都没问题。也许 Forest 对象被释放（例如，因为它从未作为子节点添加到父节点）并且下次 CCScheduler 更新计划的方法时，它将尝试在已发布的实例上运行您的方法。

您应该在 Xcode 中启用全局异常断点以获取更多崩溃信息以及发生崩溃的确切行。

# node.js - Assert.fail (node.js)：Operator 参数是什么意思？

> ID：14294474
> 
> 赞同：8
> 
> 时间：2013-01-12T14:52:06.507
> 
> 标签：node.js, unit-testing, assert

Node.js 单元测试模块有基本的断言 assert.fail：

```
assert.fail(actual, expected, message, operator) 
```

是什么`operator`意思？我对单元测试真的很陌生...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T15:12:56.413

文档内容： 的值`operator`用于分隔 的值`actual`和`expected`提供错误消息时的值。这在 Node.js[的 assert 模块文档中](http://nodejs.org/api/assert.html#assert_assert_fail_actual_expected_message_operator)有所描述。

但是，如果您在交互式 shell 中尝试此操作，您会发现该参数似乎被忽略了：

```
> assert.fail(23, 42, 'Malfunction in test.', '###')
AssertionError: Malfunction in test.
    at repl:1:9
    at REPLServer.self.eval (repl.js:111:21)
    at Interface.<anonymous> (repl.js:250:12)
    at Interface.EventEmitter.emit (events.js:88:17)
    at Interface._onLine (readline.js:199:10)
    at Interface._line (readline.js:517:8)
    at Interface._ttyWrite (readline.js:735:14)
    at ReadStream.onkeypress (readline.js:98:10)
    at ReadStream.EventEmitter.emit (events.js:115:20)
    at emitKey (readline.js:1057:12) 
```

当你看一下 assert 模块的实现时，这一切都是有道理的[，第 101-109 行](https://github.com/joyent/node/blob/8e311d28b0927a3c02a1fa027945254e1a33712b/lib/assert.js#L101-109)：

```
function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
} 
```

因此，更好的描述可能是它不会在消息中*自动*使用，但如果您捕获异常并自己创建适当的消息，则*可以使用它。*因此，如果您要创建自己的测试框架，此参数可能很有用。

如果您省略参数，您可以强制 Node.js 使用该`message`参数，例如通过`undefined`显式传递：

```
> assert.fail(23, 42, undefined, '###')
AssertionError: 23 ### 42
[...] 
```

# css - 将箭头形状添加到活动选项卡

> ID：14294476
> 
> 赞同：2
> 
> 时间：2013-01-12T14:52:23.280
> 
> 标签：css, twitter-bootstrap, tabs

如何在活动选项卡下添加箭头形状？

```
.nav-tabs2 .active { background-image:url(http://www.asiarooms.com/assets/themes/v1/images/areas/details/menu-arrow.png); background-repeat:no-repeat; background-position:bottom center; } 
```

[http://jsfiddle.net/DJHZb/13/](http://jsfiddle.net/DJHZb/13/)

```
<div class="box-head tabs">
  <ul class="nav2 nav-tabs2">
   <li class="active">
    <a href="#0" data-toggle="tab" class="firstelement">Active Tab</a></li>
   <li><a href="#1" data-toggle="tab">Inactive Tab</a></li>
   <li><a href="#2" data-toggle="tab">Inactive Tab #2</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T15:16:12.427

Take a look at "css speech bubble" the idea is the same: [http://nicolasgallagher.com/pure-css-speech-bubbles/demo](http://nicolasgallagher.com/pure-css-speech-bubbles/demo/)

You have to mess with pseudo css ::after and ::before (which doesn't work in some IE), and borders to create a square or an triangle that overlapping each other.

Example:

```
.active::after {
content: "";
position: absolute;
bottom: -15px;
left: 50px;
border-width: 15px 15px 0;
border-style: solid;
border-color: #F3961C transparent;
display: block;
width: 0;
} 
```

Here is an explanation how to create triangle with a box and border: [http://www.sitepoint.com/pure-css3-speech-bubbles/](http://www.sitepoint.com/pure-css3-speech-bubbles/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T10:10:42.820

对于这样的代码（使用引导程序）：

```
<body>
  <div class="panel panel-primary">
    <div class="panel-heading" style="font-size:large">
       Klujo
    </div>

    <div class="panel-body">
        <div class="wizard">
            <a >
                Step 1<br>
        Authorize the app
            </a>
            <a class="active">
                Step 2<br>
        Post your jobs
            </a>

        </div>
   </div>

  </div>
</body> 
```

你可以像这样使用css：

```
.wizard a {
    background: #efefef;
    display: inline-block;
    margin-right: 5px;
    min-width: 150px;
    outline: none;
    padding: 10px 40px 10px;
    position: relative;
    text-decoration: none;
}

.wizard .active {
    background: #007ACC;
    color: #fff;
}

.wizard a:before {
    width: 0;
    height: 0;
    border-top: 25px inset transparent;
    border-bottom: 35px inset transparent;
    border-left: 20px solid #fff;
    position: absolute;
    content: "";
    top: 0;
    left: 0;
}

.wizard a:after {
    width: 0;
    height: 0;
    border-top: 35px inset transparent;
    border-bottom: 25px inset transparent;
    border-left: 21px solid #efefef;
    position: absolute;
    content: "";
    top: 0;
    right: -20px;
    z-index: 2;
}

.wizard a:first-child:before,
.wizard a:last-child:after {
    border: none;
}

.wizard a.active:after {
    border-left: 21px solid #007ACC;
} 
```

得到想要的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-12T18:49:23.417

```
 </body>   
  <style>   
    .tool {
     position: relative;
     display: inline-block;
     border-bottom: 1px dotted red;
     }

   .tool .text {
    visibility: hidden;
    width: 100%;
    background-color: blue;
    color: white;
    text-align: center;
    border-radius: 5px;
    padding: 5px 0;
    position: absolute;

    top: -1px;
     left: 110%;
     }

    .tool .text::after {
     content: "";
      position: absolute;
      top: 10%;
      right: 99%;
       margin-top: -2px;
      border-width: 5px;
      border-style: solid;
      border-color: transparent blue transparent transparent;
      }
     .tool:hover .text {
     visibility: visible;
       }
     </style>   

     <div class="tool">Mouse Hover
      <span class="text">I Can pop up on the right side of these   words</div>
      </body> 
```

# python - python中的正则表达式

> ID：14294483
> 
> 赞同：0
> 
> 时间：2013-01-12T14:53:06.810
> 
> 标签：python, regex, expression

```
for line in open(fname, 'r'): 
    if re.search('#', line):
        #print(line)
        pass
    elif re.search('# segment: retract', line):
        print(line)
        print('break here')
        break
    else:
        outfile.write(line) 
```

elif 语句不起作用，任何人都可以帮助我使用匹配的正则表达式

“#段：收回”

该代码甚至没有输入 elif 语句。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:56:07.193

if 子句的第一个表达式将始终匹配包含“#”的行。因此，您在 elif 子句中更具体的条件将永远不会匹配，因为始终执行 if 子句中更通用的条件。因此，您将首先测试更具体的条件并将更通用的条件移动到 elif 部分。

```
for line in open(fname, 'r'): 

    if re.search('# segment: retract', line):
        print(line)
        print('break here')
        break
    elif re.search('#', line):
        #print(line)
        pass
    else:
        outfile.write(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T14:57:30.133

我不认为这是正则表达式是概率。条件需要反转

```
if re.search('# segment: retract', line):
    print(line)
    print('break here')
    break
elif re.search('#', line):
    #print(line)
    pass
else:
    outfile.write(line) 
```

问题是第一个 if 条件捕获所有以开头的行`#`，否则永远不会发生。

# python - 在 sourceforge 中设置 python

> ID：14294492
> 
> 赞同：1
> 
> 时间：2013-01-12T14:52:08.407
> 
> 标签：python, cgi, sourceforge

我正在尝试在我的 sourceforge 存储库中托管一个示例程序 test.py。我从目录上传了我的文件`/home/project-web/motiur/cgi-bin/`，然后转到`motiur.sourceforge.net/cgi-bin/test.py`. 不幸的是，我收到了一个错误，提示 headers 过早结束。

test.py 的源代码：

```
#!/usr/local/bin/python
import cgi, cgitb
print "Content-type:text/html\n"
print "<html><body>This is another test</body></html>" 
```

确切的错误是：

```
An error has been encountered in accessing this page. 
  1\. Server: motiur.sourceforge.net 
  2\. URL path: /cgi-bin/test.py 
  3\. Error notes: Premature end of script headers: test.py 
  4\. Error type: 500 
  5\. Request method: GET 
  6\. Request query string: 
  7\. Time: 2013-01-12 14:49:39 UTC (1358002179) 
```

顺便说一句，我在 Windows 中使用 filezilla 并将文件权限设置为 755，即每个人都可以执行该文件。这是一个菜鸟问题，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:48:50.790

尝试这个：

```
print 'Content-type: text/html'
print ''
print '<html><body>This is another test</body></html>' 
```

您可能需要在响应正文之前使用两个 '\n\n'。

**编辑**

然后试试这个：

```
#!/usr/bin/env python 
```

在顶部而不是

```
#!/usr/local/bin/python 
```

# ruby-on-rails - Rails rspec 意外的标识符

> ID：14294494
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:54:16.680
> 
> 标签：ruby-on-rails, ruby, rspec

我正在阅读 RoR 教程，遇到了以下错误，似乎无法弄清楚。我完全复制了示例代码，但我的 rspec 测试仍然无法运行（控制台甚至不会创建新用户）

感谢任何帮助，谢谢！

错误：

```
user@ubuntu:~/Ruby/rails_projects/sample_app$ bundle exec rspec spec/
No DRb server is running. Running in local process instead ...
/home/user/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load': /home/user/Ruby/rails_projects/sample_app/spec/models/user_spec.rb:51: syntax error, unexpected tIDENTIFIER, expecting keyword_end (SyntaxError)
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `block in load'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:66:in `rescue in run'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:62:in `run'
    from /home/user/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

这是我的 rspec 测试：需要 'spec_helper'

```
describe User do

  before { @user = User.new(name: "Example User", email: "user@example.com") }

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }

  it { should be_valid }

  describe "when name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
  end

  describe "when name is too long" do
    before { @user.name = "a"* 51 }
    it { should_not be_valid }
  end

  describe "when email format is not valid" do
    it "should be invalid" do
      addresses = %w[user@foo,com user_at_foo.org example.user@foo. 
                    foo@bar_baz.com foo@bar+baz.com]
      addresses.each do |invalid_address|
        @user.email = invalid_address
        @user.should_not be_valid
      end
    end
  end

  describe "when email format is valid" do
    it "should be valid" do
      addresses = %w[user@foo.com A_US-ER@f.b.org first.last@foo.jp a+b@baz.cn]
      addresses.each do |valid_address|
        @user.email = valid_address|
        @user.should be_valid
      end
    end
  end

  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end
end 
```

这是我的用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:03:50.133

这一行有一个错字：

```
 @user.email = valid_address| 
```

有尾随| 那不应该在那里

# linq-to-xml - 将命名空间添加到现有 XDocument

> ID：14294497
> 
> 赞同：8
> 
> 时间：2013-01-12T14:54:59.497
> 
> 标签：linq-to-xml

我需要使用 Linq to xml 操作一些 xml 文件。

我有一个要加载的现有 XDocument

现在我似乎无法为其添加名称空间。

我愿意：

```
//Load an existing xml into a XDocument
XDocument xdoc=XDocument.Load(myXml);

//Create a namespace
 XNamespace myNS="http://www.w3.org/2001/XMLSchema-instance/MyShinyNewNamespace";
 xAttribute myAttr=new XAttribute(XNamespace.Xmlns +"myNS",myNS);

  //Add new namepsace to root

 xdoc.Root ????

What do you do here? 
```

如何检索我的命名空间？

如何删除/替换？

非常感谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-12T15:38:22.887

首先，虽然 XML 标记允许您使用

```
<root xmlns="http://example.com/ns">
  <foo>
    <bar>baz</bar>
  </foo>
</root> 
```

使用单个命名空间声明属性将根元素以及那些后代元素放入声明的命名空间中，当您操作树模型时，您需要更改`Name`所有元素的，因此您需要例如

```
XNamespace myNs = "http://example.com/ns";

foreach (XElement el in xdoc.Descendants()) 
{
  el.Name = myNs + el.Name.LocalName;
} 
```

如果您还想设置某个前缀，请另外`pf`设置

```
 xdoc.Root.Add(new XAttribute(XNamespace.Xmlns + "pf", myNs)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T22:37:40.117

要从一个 xdocument 动态添加到另一个 xdocument，请参阅[http://www.hanselman.com/blog/GetNamespacesFromAnXMLDocumentWithXPathDocumentAndLINQToXML.aspx](http://www.hanselman.com/blog/GetNamespacesFromAnXMLDocumentWithXPathDocumentAndLINQToXML.aspx)

# joomla - joomla 3 vs 2.5 扩展开发差异

> ID：14294499
> 
> 赞同：2
> 
> 时间：2013-01-12T14:55:06.767
> 
> 标签：joomla, twitter-bootstrap, joomla2.5, upgrade, joomla-extensions

我是 joomla 用户，我为 joomla 2.5 创建了一些扩展和模板，但现在我升级到 joomla 3，因为引导框架和响应式模板。我需要你的帮助：

**如何更新 joomla 2.5 扩展以与 joomla 3 一起使用并做出响应？**

我用谷歌搜索了一段时间，找不到关于“扩展”的任何答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:03:58.300

这是一个大问题，但这里有一些基本步骤。

首先，确保您的 2.5 代码是干净的。也就是说，如果您仍在使用 2.5 中已弃用的任何类，请先在 2.5 版本中更新它们，或者先在 3 版本中进行更新。如果你没有记录弃用的类，你应该这样做以确保你不会错过任何东西。特别是，您希望摆脱 JRequest 并查找您可能扩展的任何方法，这些方法本身扩展了 JObject，并确保您不依赖这些方法。此外，您需要确保已将所有扩展 JModel 更改为扩展 JModelLegacy（对于 JView 和 JController 类似）。根据输出的复杂性，您可能会遵循核心代码作为管理员布局的模型。对于我的前端经验，您主要只是更改布局文件以使用较新的类和 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:49:02.887

如果您使用[Component Creator](http://www.notwebdesign.com/joomla-component-creator/)开发您的组件框架，您可以指定是否要构建 Joomla 2.5 或 Joomla 3.0 兼容代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T20:37:30.647

由于 2.5 是当前的 LTS 版本，直到 3.5；大多数核心更改已被弃用而不是被完全删除。这意味着您仍然可以使用它们，而且目前迁移 2.5 组件所需的东西并不多。我肯定会通读 Soren 提供的演练，但这里有三个“主要”更改，以使 2.5 组件在 3.1 及更高版本的 Joomla 上工作......当然有警告！:D

1) 确保所有视图类都扩展 JViewLegacy

2) 确保您的主控制器扩展 JControllerLegacy 而不是 JController

3) 确保您的主要组件入口点（组件根目录中的 my_component_name.php 文件）使用 JControllerLegacy::getInstance('my_component_name') 而不是 JController::getInstance('my_component_name')

# gem - 宝石安装 sqlite3 -v '1.3.7'

> ID：14294501
> 
> 赞同：1
> 
> 时间：2013-01-12T14:55:22.640
> 
> 标签：gem, rvm, bundle, sqlite3-ruby

当我尝试用这个安装 sqlite3 - >`gem install sqlite3 -v '1.3.7'`

出现此错误：

> 构建原生扩展。这可能需要一段时间... 错误：安装 sqlite3 时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /home/arthur/.rvm/rubies/jruby-1.7.2/bin/jruby extconf.rb 
> ```
> 
> NotImplementedError：未启用 C 扩展支持。将 -Xcext.enabled=true 传递给 JRuby > 或设置 JRUBY_OPTS 或修改 .jrubyrc 以启用。
> 
> (根) 在 /home/arthur/.rvm/rubies/jruby-1.7.2/lib/ruby/shared/mkmf.rb:8 需要在 org/jruby/RubyKernel.java:1027 (根) 在 /home/arthur /.rvm/rubies/jruby-1.7.2/lib/ruby/shared/rubygems/custom_require.rb:1（根）在 extconf.rb:3
> 
> Gem 文件将继续安装在 /home/arthur/.rvm/gems/jruby-1.7.2/gems/sqlite3-1.3.7 > 以供检查。结果记录到 /home/arthur/.rvm/gems/jruby-1.7.2/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out

# google-app-engine - 是否可以摆脱 Google App Engine 上的成功部署检查？

> ID：14294512
> 
> 赞同：1
> 
> 时间：2013-01-12T14:56:49.407
> 
> 标签：google-app-engine

通过 部署本地 GAE 应用程序时`appcfg.py`，它会检查部署是否成功，例如：

```
Will check again in 32 seconds.
Checking if deployment succeeded. 
```

是否有可能摆脱这些检查，或减少检查次数（例如在 4 秒处停止）？我知道这些检查可能是必要的，并且我可能试图破坏纯粹的目的，但我很好奇这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:25:16.097

我不这么认为。部署遵循严格的程序。成功部署您的 cron 脚本后，将上传/构建索引。这是一个单向过程，第一次检查部署是否成功，然后更新、构建索引、cron 脚本和任何其他我不知道的东西是完全有意义的。

# javascript - 删除javascript中的第一个孩子

> ID：14294518
> 
> 赞同：6
> 
> 时间：2013-01-12T14:57:18.903
> 
> 标签：javascript, element

我正在尝试使用 DOM删除第`li`一个。但由于某种原因，它不起作用。`ol``removeChild()`

这是我的 JavaScript：

```
document.getElementById('queue').removeChild(
    document.getElementById('queue').childNodes[0]
); 
```

这是我的 HTML：

```
<ol id="queue">
    <li>Surprised Kitty (Original)<span class="nodisplay">0Bmhjf0rKe8</span></li></ol> 
```

我尝试提醒`childNodes[0]`，它返回`[Object Text]`，这似乎有点奇怪，当我期待这个对象时。

希望我已经清楚了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T15:00:24.593

试试这个单行：

```
document.getElementById('queue').removeChild(document.getElementById('queue').getElementsByTagName('li')[0]); 
```

扩展解释：

```
var queue = document.getElementById('queue'); // Get the list whose id is queue.
var elements = queue.getElementsByTagName('li'); // Get HTMLCollection of elements with the li tag name.
queue.removeChild(elements[0]); // Remove the child from queue that is the first li element. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T14:59:35.790

`<ol id="queue">`和标签之间`<li>`是空格和换行符。这些组成了一个文本节点。因此元素的第一个子`#queue`元素是一个文本节点。

您可以使用该[`.children`](http://www.quirksmode.org/dom/w3c_core.html#t71)属性而不是`.childNodes`，它只考虑元素节点，或者遍历所有子节点，直到找到第一个`li`节点，如[dystroy 建议的那样](https://stackoverflow.com/a/14294530/218196)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T14:58:33.367

子节点不仅是您考虑的元素，也是文本节点。您可以遍历节点并删除第一个`LI`.

```
var p = document.getElementById('queue');
for (var i=0; i<p.childNodes.length; i++) {
   if (p.childNodes[i].tagName=='LI') {
       p.removeChild(p.childNodes[i]);
       break;
   }
} 
```

[示范](http://jsfiddle.net/vBP6b/)

请注意，这更像是一种解释，而不是最实用的解决方案。Javascript 为您提供其他迭代解决方案，其中包括[getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.tagName)，因此您可以这样做：

```
var p = document.getElementById('queue');
p.removeChild(p.getElementsByTagName('li')[0]); 
```

[示范](http://jsfiddle.net/wrcur/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-12T15:02:20.347

删除队列包含的所有列表：

```
var list=document.getElementById('queue');

list.removeChild(list.getElementsByTagName('li')[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-25T06:25:46.540

您可以使用这一行代码。这将始终删除父元素的第一个子元素。

JavaScript：

```
document.querySelector('#queue').firstElementChild.remove(); 
```

HTML：

```
<ol id="queue">
    <li>
        Surprised Kitty (Original)
        <span class="nodisplay">0Bmhjf0rKe8</span>
    </li>
</ol> 
```

# c++ - 当我开始一个新项目时，Visual Studio 2012 忘记了 SDL 配置？

> ID：14294526
> 
> 赞同：1
> 
> 时间：2013-01-12T14:58:10.047
> 
> 标签：c++, visual-studio, opengl, visual-studio-2012, sdl

我按照该站点的说明进行操作：http: [//lazyfoo.net/SDL_tutorials/lesson01/windows/msvsnet2010e/index.php](http://lazyfoo.net/SDL_tutorials/lesson01/windows/msvsnet2010e/index.php)

一切正常，但是当我开始新项目（C++->Win32->Empty Project）时，所有配置都被忘记了，我必须再次设置配置。我需要做什么？

对于配置，我去 Project->Properties 然后按照上层站点的说明进行操作。

我希望你能理解我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:28:02.953

使用属性表。在主菜单上，转到“查看->其他 Windows->属性管理器”。您应该看到一个树视图，它的根是您的项目。这应该扩展到所有配置的列表，默认情况下将是“调试”和“发布”。如果展开这些，您应该会看到应用于每个配置的属性表列表。您应该看到一个名为“Microsoft.Cpp.Win32.user”的应用程序同时应用于“调试”和“发布”。您可以对其进行编辑，您的设置将加载到您创建的每个新项目中。或者，您可以使用所有自定义设置创建一个新的属性表，然后将其加载到项目中供您自行决定使用。

更多信息：http: [//msdn.microsoft.com/en-us/library/a4xbdz1e.aspx](http://msdn.microsoft.com/en-us/library/a4xbdz1e.aspx)

# php - 如何通过if语句在php中使用多个标题

> ID：14294528
> 
> 赞同：0
> 
> 时间：2013-01-12T14:58:30.630
> 
> 标签：php, redirect

当 $_SESSION['user'] 不为空（用户已登录）时，我想将 login.php 重定向到 index.php

```
<?php
    session_start();
    if (isset($_SESSION['user'])){
        header ('refresh:3 ; URL:index.php');
    }
?> 
```

但是当用户登录页面时不会重定向到 index.php

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T15:00:26.260

这应该有效：

```
<?php
    session_start();
    if (isset($_SESSION['user'])){
        header('Location: http://www.yoursite.com/');
        die();
    }
?> 
```

如果要在 x 秒后重定向用户，请使用

```
 <?php
        session_start();
        if (isset($_SESSION['user'])){
            header( "refresh:3;url=whatever.php" ); 
        }
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:00:46.690

你这样做是错的。[如何执行此操作的示例以及有关标头的更多信息。](https://stackoverflow.com/questions/283752/refresh-http-header)

```
<?php
session_start ();
if (isset($_SESSION['user'])
{
    header ('Refresh: 3; url=index.php');
    //                      ^
}
?> 
```

你用`:`的应该是等号。

# sass - @import "compass/css3" 在哪里？zurb的基础从何而来？

> ID：14294531
> 
> 赞同：10
> 
> 时间：2013-01-12T14:58:36.643
> 
> 标签：sass, compass-sass, zurb-foundation

我只是想了解所有来自 Zurb 的 SASS、Compass 和前端框架基金会。

我已经正确安装了所有东西，并且设置了我的第一个基础模板。现在我正在尝试配置要从基础框架中包含的内容。

在foundation.scss 文件中有一行：

```
@import "compass/css3"; 
```

我一生都无法弄清楚这个文件的来源。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T15:22:46.220

该文件来自指南针本身： [http ://compass-style.org/reference/compass/css3/](http://compass-style.org/reference/compass/css3/)

# android - 画布绘制文本方向

> ID：14294532
> 
> 赞同：11
> 
> 时间：2013-01-12T14:58:40.340
> 
> 标签：android, canvas, rotation

如何使该文本垂直书写？如何将文本旋转 90 度？单独写每个字母是愚蠢的，但现在，我不知道另一种方式。

```
 Paint paint = new Paint();
 public DrawView(Context context, double arr[])
{
    super(context);
    paint.setColor(Color.BLACK);
}
   @Override
   public void onDraw(Canvas canvas)
    {
      canvas.drawText("Test",50, 50, paint);
    } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-12T15:41:21.350

简单地旋转文本（或其他任何东西）很容易：使用该[`rotate()`](http://developer.android.com/reference/android/graphics/Canvas.html#rotate(float,%20float,%20float))方法旋转画布（然后将其旋转回来，否则您绘制的所有内容都会旋转）：

```
canvas.save();
canvas.rotate(90f, 50, 50);
canvas.drawText("Text",50, 50, paint);
canvas.restore(); 
```

`save()`和方法分别保存和恢复画布的`restore()`状态。因此，您绘制的其余元素不会旋转。如果您只想绘制文本，则不需要这两种方法。

如果要将字符串的字符放在一起，则需要分别处理每个字符。首先，您需要获取字体高度，并且在绘制每个字符时，您需要一遍又一遍地增加这个高度的 y 坐标。

```
int y = 50;
int fontHeight = 12; // I am (currently) too lazy to properly request the fontHeight and it does not matter for this example :P
for(char c: "Text".toCharArray()) {
    canvas.drawText(c, 50, y, paint);
    y += fontHeight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T23:22:47.707

正确的版本是：Canvas canvas_front = new Canvas(bitmap_front);

```
 Paint paint = new Paint();
    paint.setColor(Color.rgb(140, 0, 0));
    paint.setAlpha(80);
    paint.setStrokeWidth(2);

 canvas_front.drawLine(0, (float) (frontIV.getHeight() * 0.9),frontIV.getWidth(), (float) (frontIV.getHeight() * 0.9), paint);

    canvas_front.save();
    canvas_front.rotate((float)  90 , 50, 50);
    canvas_front.drawText("Text",50, 50, paint);
    canvas_front.restore();
    frontIV.setImageBitmap(bitmap_front); 
```

# sql-server - 必须声明一个标量变量

> ID：14294539
> 
> 赞同：-1
> 
> 时间：2013-01-12T14:59:25.707
> 
> 标签：sql-server, error-handling, scalar

我正在创建一个列，它会给我一个随机数，但我遇到了一些错误。

```
CREATE TABLE tblBookInfo
(
AccessionNumber NVARCHAR(MAX)
 RandomNumber NVARCHAR(10);
 AccNo NVARCHAR(MAX)
 @Upper INT;
 @Lower INT

SET @Lower = 1
SET @Upper = 9999

Select @RandomNumber = Round (((@Upper - @Lower -1)* RAND() + @Lower), 0)

SET @AccNo = 'LIBBOOKS' + RandomNumber
SELECT @AccNo

Set AccessionNumber = AccNo
) 
```

错误：

```
'RandomNumber' 附近的语法不正确。
必须声明标量变量“@Lower”。
必须声明标量变量“@Upper”。
必须声明标量变量“@Upper”。
必须声明标量变量“@AccNo”。
必须声明标量变量“@AccNo”。

```

谢谢你的帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:09:28.253

它不是很清楚您要完成什么，但这是我以正确语法对您的代码的**解释。**`T-SQL`我不准备猜测你在下面要做什么。

```
CREATE TABLE tblBookInfo 
(   
    AccessionNumber NVARCHAR(MAX),
    RandomNumber NVARCHAR(10), 
    AccNo NVARCHAR(MAX) 
)
DECLARE @Upper          INT, 
        @Lower          INT,
        @RandomNumber   INT

SET @Lower = 1 SET @Upper = 9999

SELECT @RandomNumber = Round (((@Upper - @Lower -1)* RAND() + @Lower), 0)

SELECT @RandomNumber 
```

# php - 在mysql中求一个整数的排名

> ID：14294542
> 
> 赞同：2
> 
> 时间：2013-01-12T14:59:38.647
> 
> 标签：php, mysql, sql, ranking

> **可能重复：**
> [Mysql rank 函数](https://stackoverflow.com/questions/3333665/mysql-rank-function)

我有以下国家表

```
country  clicks
-------  ------
0        222
66       34 
175      1000
45       650 
```

在这种情况下，我如何获得国家 45 的排名，即 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:01:13.500

订购者`country ASC`：

```
SELECT 1+COUNT(*) AS ranking
FROM countryTable
WHERE country < 45 ; 
```

订购者`clicks DESC`：

```
SELECT 1+COUNT(*) AS ranking
FROM countryTable AS t
  JOIN countryTable AS c
      ON c.clicks > t.clicks
WHERE t.country = 45 ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:01:24.687

您可以获得 2 等级，如下所示：

```
Select * from tabeName order by clicks limit 1,1 
```

3级：

```
Select * from tabeName order by clicks limit 2,1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:08:47.793

这将显示国家 45 的正确排名 (2)。您没有指定如何对平局进行排名，因此您可能需要更改比较以适合您。不存在的国家排名为 0。

```
SELECT COUNT(*) rank 
FROM countryTable a
JOIN countryTable b
  ON a.clicks <= b.clicks
WHERE a.country = 45 
```

[SQLfiddle 在这里](http://sqlfiddle.com/#!2/4fe22/2)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T15:01:55.860

```
SELECT *
FROM 
(
  SELECT  @ranking:= @ranking + 1 rank,
          a.country,
          a.clicks
  FROM    tableName a, (SELECT @ranking := 0) b
  ORDER BY a.clicks DESC
) s
WHERE country = 45 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/51c7e3/3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T15:04:21.450

`X`是您需要寻找的等级：

```
SELECT * FROM T ORDER BY clicks DESC LIMIT X-1,1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T15:08:26.903

这是另一种（惊人的快速）方式（尽管限制为 256 行）：

```
SELECT country
     , clicks
     , FIND_IN_SET(clicks,(SELECT GROUP_CONCAT(DISTINCT clicks ORDER BY clicks DESC) FROM country_clicks)) rank
FROM country_clicks 
```

或者，如果您愿意...

```
SELECT FIND_IN_SET(clicks,(SELECT GROUP_CONCAT(DISTINCT clicks ORDER BY clicks DESC) FROM country_clicks)) rank
   FROM country_clicks
  WHERE country = 45; 
```

# opengl - 减少使用 OpenGL 渲染填充点的 3D 立方体时的负面感知效果

> ID：14294543
> 
> 赞同：0
> 
> 时间：2013-01-12T14:59:41.370
> 
> 标签：opengl, 3d, visualization, cube, points

我需要使用 OpenGL 渲染一个简单的 3D 立方体，其中填充了位于常规 64x64x64 网格上的点。可以在[此处](http://www.qpic.ws/?v=unbenanntkkk.png)找到图像。

这很难解释，但由于从 3d 到 2d 的投影，显然存在一些感知困难。我试图用随机生成的偏移量来置换这些点，这有点帮助，但并不真正令人满意。

我认为这种效果甚至有一个名称，但我找不到它，所以如果有人可以命名它并可能提供一些建议来减少它，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:13:04.523

You might be thinking of [Moiré patterns](http://en.wikipedia.org/wiki/Moir%C3%A9_pattern). MSAA (multi-sample anti-aliasing) might help, or perhaps the introduction of jitter. See also: [Supersampling](http://en.wikipedia.org/wiki/Supersampling)

Alternatively, you could draw the points using point sprites or billboarding, which can be implemented very efficiently using modern (GL) geometry shaders.

# java - 当集成测试失败时，通过 Cargo 的 Glassfish 容器不会被 maven 停止

> ID：14294545
> 
> 赞同：1
> 
> 时间：2013-01-12T15:00:10.753
> 
> 标签：java, maven, glassfish, integration-testing, cargo

我已经将 Cargo 设置为在 Maven 配置文件中的预集成测试阶段启动 glassfish 的实例。然后我的测试在集成测试阶段运行，最后，cargo 在集成测试后阶段关闭 tomcat 实例。

当所有测试都通过时，这很好用，但是如果任何测试失败，maven 构建就会失败，并且似乎永远不会达到 post-integration-test 阶段，这会使 glassfish 实例运行（我无法在不杀死它的情况下停止它过程）。

难道我做错了什么？有没有办法确保货物关闭我的 glassfish 实例，即使集成测试阶段失败？

我的行家简介：

```
<profile>
    <!-- run integration tests against the app deployed to a container -->
    <id>integration</id>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <!-- override the exclusion and include integration tests -->
                            <excludes>
                                <exclude>none</exclude>
                            </excludes>
                            <includes>
                                <include>***IntegrationTest.java</include>
                            </includes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <version>${cargo.plugin.version}</version>
                <executions>
                    <execution>
                        <id>start-server</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>start</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>stop-server</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <container>
                        <containerId>glassfish3x</containerId>
                        <artifactInstaller>
                            <groupId>org.glassfish.main.distributions</groupId>
                            <artifactId>glassfish</artifactId>
                            <version>${glassfish.version}</version>
                        </artifactInstaller>
                    </container>
                    <configuration>
                        <properties>
                            <cargo.datasource.datasource.mysql>
                                cargo.datasource.jndi=jdbc/TrackerPool|
                                cargo.datasource.driver=com.mysql.jdbc.Driver|
                                cargo.datasource.url=jdbc:mysql://localhost/[database]|
                                cargo.datasource.transactionsupport=LOCAL_TRANSACTION|
                                cargo.datasource.username=[username]|
                                cargo.datasource.password=[password]
                            </cargo.datasource.datasource.mysql>
                        </properties>
                    </configuration>
                </configuration>
            </plugin>
        </plugins>
    </build>
</profile> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:59:47.630

问题只是基于 maven-surefire-plugin 的错误使用，该插件旨在与单元测试相关，但**不适**用于集成测试。为此，存在[maven-failsave-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/plugin-info.html)可以解决您的问题。

maven-failsave-plugin 的使用使您无需[为集成测试定义包含规则](http://maven.apache.org/surefire/maven-failsafe-plugin/integration-test-mojo.html#includes)。Maven 中用于集成测试的通常命名约定是这样的：

```
 IT*.java
 *IT.java
 *ITCase.java 
```

所以我建议相应地命名你的集成测试，这样你就不需要任何类型的排除/包含规则，既不需要 maven-surefire-plugin （单元测试）也不需要 maven-failsafe-plugin （集成测试）。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.13</version>
    <executions>
        <execution>
            <goals>
                <goal>integration-test</goal>
                <goal>verify</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

仅当您希望在集成测试失败的情况下使构建失败时才需要验证目标。你必须像这样调用maven：

```
mvn -Pprofile clean verify 
```

# mysql - SQL : 错误 1005: 无法创建表 'obl2.itemsubjects' (errno: 121)

> ID：14294561
> 
> 赞同：5
> 
> 时间：2013-01-12T15:01:31.723
> 
> 标签：mysql, sql, database-design, create-table

我有以下表格：

```
CREATE  TABLE `OBL2`.`item` (
`itemID` INT NOT NULL AUTO_INCREMENT ,
`itemName` VARCHAR(45) NOT NULL ,
PRIMARY KEY (`itemID`) ,
INDEX `itemName` (`itemName` ASC) );

CREATE  TABLE `OBL2`.`subject` (
`subjectID` INT NOT NULL ,
`subjectName` VARCHAR(45) NOT NULL ,
PRIMARY KEY (`subjectID`) ); 
```

现在由于连接是多对多的，每个项目可以有多个主题，每个主题可以与许多项目相关 - 我想设置一个连接表。这是我的代码：

```
CREATE  TABLE `OBL2`.`itemsubjects` (
`itemID` INT NOT NULL ,
`subjectID` INT NOT NULL ,
PRIMARY KEY (`itemID`, `subjectID`) ,
INDEX `itemID_idx` (`itemID` ASC) ,
INDEX `subjectID_idx` (`subjectID` ASC) ,
CONSTRAINT `itemID`
FOREIGN KEY (`itemID` )
REFERENCES `OBL2`.`item` (`itemID` )
ON DELETE CASCADE
ON UPDATE CASCADE,
CONSTRAINT `subjectID`
FOREIGN KEY (`subjectID` )
REFERENCES `OBL2`.`subject` (`subjectID` )
ON DELETE CASCADE
ON UPDATE CASCADE); 
```

但由于某种原因，第三张表的代码未被接受。我收到一条错误消息：

> 错误 1005：无法创建表 'obl2.itemsubjects'（错误号：121）

我在互联网上阅读了有关该错误的信息，它说这是 MYSQL 的一个已知问题，但没有解决方案。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:05:29.610

MySQL 文档在**[`FOREIGN KEY`Constraints](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)**中说（强调我的）：

> *如果`CONSTRAINT`给出了符号子句，则**符号**值在数据库中必须是**唯一的**。如果没有给出子句，InnoDB 会自动创建名称。*

因此，`itemsubject`表创建失败的原因是您有另一个（外键）约束，命名为`itemID`，或者`subjectID`在数据库的其他某个表中命名。

最好有一个跨数据库的标准命名约定。就像`ColumnName_idx`索引一样，您可以使用`ReferencedTable_ReferencingTable_FK`外键约束：

```
CREATE  TABLE OBL2.itemsubjects (
  itemID INT NOT NULL ,
  subjectID INT NOT NULL ,
  PRIMARY KEY 
    (itemID, subjectID) ,
  INDEX itemID_idx                           -- I like these 
    (itemID ASC) ,
  INDEX subjectID_idx                        -- two
    (subjectID ASC) ,
  CONSTRAINT item_itemsubject_FK             -- what I propose, here
    FOREIGN KEY (itemID)
    REFERENCES OBL2.item (itemID)
      ON DELETE CASCADE
      ON UPDATE CASCADE,
  CONSTRAINT subject_itemsubject_FK          -- and here 
    FOREIGN KEY (subjectID)
    REFERENCES OBL2.subject (subjectID)
      ON DELETE CASCADE
      ON UPDATE CASCADE
); 
```

# javascript - 如何将事件侦听器添加到整个窗口，除了定义的甜甜圈（或环形）

> ID：14294562
> 
> 赞同：0
> 
> 时间：2013-01-12T15:01:34.950
> 
> 标签：javascript, d3.js

我正在尝试向`selection.on("click" function() { } )`整个浏览器窗口添加一个事件侦听器，特别是 a ，但定义的区域（即甜甜圈或环形）除外。换句话说，我想在用户单击浏览器窗口中除定义区域（这里特别是甜甜圈或环形）之外的任何位置时执行特定功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:45:48.643

我对 d3.js 不熟悉，但从您发布的代码看来，您仍在处理常规 DOM 事件。做你想做的事情的基本方法是绑定这样的事件：

*   应该处理所有点击的事件绑定到文档/正文。
*   *然后将另一个事件绑定到不应*导致第一个处理程序触发的元素并调用该`stopPropagation()`事件对象的方法。这将防止它冒泡到前一个处理程序，因此它永远不会执行。

# node.js - node.js 的断言库？

> ID：14294567
> 
> 赞同：6
> 
> 时间：2013-01-12T15:02:01.400
> 
> 标签：node.js, unit-testing, assert, nodeunit, chai

node.js assert 为单元测试提供的断言非常有限。甚至在我编写第一个测试之前，我就已经创建了一些断言，因为很明显我将继续重复使用它们。

你能推荐一些好的断言库来测试常见的 javascript 情况（对象结构、对象类等）吗？

理想情况下，它应该与 nodeunit 很好地集成（或者更好地扩展它的断言）——我的断言没有，我必须将它们`test`作为额外的变量传递......

我见过的唯一一个是[柴](http://chaijs.com)。你能说什么呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-04T00:56:58.477

这在某种程度上也是一个偏好问题——您更喜欢使用`assert`语法还是 BDD 风格的断言 ( `smth.must.equal(...)`) 进行测试。

对于断言风格，[Chai 的断言](http://chaijs.com/api/assert/)可能会很好用。*它具有比 Node 自己的断言*模块更多的内置匹配器。

如果您发现 BDD 风格更具可读性和流畅性，那么这三个都可以：

*   [柴.js](http://chaijs.com/api/bdd/)。
*   [Must.js 真的](https://github.com/moll/js-must)是你的。
*   [应该.js](https://github.com/visionmedia/should.js)。

当涉及到各种匹配器时，它们的主要区别在于其 API 的简单性或复杂性。但是，它们的基本平等断言是可以互换的——`foo.must.equal(42)`或者`foo.should.equal(42)`。

在选择 Chai.js 和 Should.js 时，你需要注意一件事，我认为这是一个*基本的设计错误*——他们断言属性访问的做法，而不是将匹配器作为函数调用。我写了[一篇关于断言属性访问](https://github.com/moll/js-must#asserting-on-property-access)以及它如何在测试中导致误报的评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:35:45.700

柴太棒了 我已经为 Node 和浏览器测试尝试了很多不同的设置，但唯一让我满意的是[Mocha](http://visionmedia.github.com/mocha/) + [Chai](http://chaijs.com/) + [Sinon](http://sinonjs.org/)。但是选择一个断言库也是一个风格问题，我个人喜欢`chai.expect`它的链式 API，它拥有你需要的所有方法：类型验证、对象属性检查、异常……我也发现它非常灵活。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T15:10:43.197

我使用自己的断言库[node-assertthat](https://github.com/goloroden/node-assertthat)。它的特点是它的语法看起来非常流畅并且（恕我直言）非常易读（受 NUnit for .NET 的启发），例如：

```
var actual = [...],
    expected = [...];

assert.that(actual, is.equalTo(expected)); 
```

基本上它工作得很好，但是还没有实现太多的断言。所以它是否“好”我不会决定——这取决于你。

它使用了一个比较库，它提供了诸如按结构比较对象和其他一些不错的东西：[compare.js](https://github.com/goloroden/comparejs)。

例如，如果你需要对象并且你想知道它们是否相等（通过它们的值），你可以这样做

```
cmp.equal(foo, bar) 
```

或简称：

```
cmp.eq(foo, bar) 
```

您还可以按结构比较对象，例如检查两个对象是否实现相同的接口。你可以这样做

```
cmp.equalByStructure(foo, bar) 
```

或简称：

```
cmp.eqs(foo, bar); 
```

再一次，我会让你决定它是否“好”，但至少我对两者都非常满意。

*PS：我知道 StackOverflow 不是宣传你自己的项目的地方，但我认为在这种情况下，答案迫使我这样做，因为在这种情况下，“你能推荐”的答案是“我自己的工具”**我**是最合适的。因此，请不要将此帖子视为垃圾邮件。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-29T13:25:18.550

您可能对[Hamjest](https://github.com/rluba/hamjest)感兴趣，这是一个基于[Hamcrest](http://hamcrest.org)的 JavaScript 匹配器库。

我提供了一个与框架无关的断言和匹配器库，可以与 nodeunit、mocha、jasmin 等一起使用。

与 Chai、Jasmin 和类似框架相比，它有两个主要优势：

1.  匹配器可以嵌套和组合以创建非常有表现力的断言。
2.  断言错误非常详细地描述了不匹配的原因（例如，哪个属性不匹配，缺少哪个元素等），而不是仅仅重复断言。

*免责声明：我是 Hamjest 的主要作者。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-23T20:20:08.850

[Expect](https://github.com/mjackson/expect)是一个用于 NodeJS 和浏览器的易于使用的可扩展断言库。[我已经在Mocha](https://mochajs.org/)中使用过它几次，我可以说它有你需要的任何断言。[您可以在此处](https://github.com/mjackson/expect)了解如何使用它。例子：

```
var pi = Math.PI;
expect(pi)
  .toExist()
  .toBeLessThan(4)
  .toBeGreaterThan(3); 
```

# php - spl_autoload_register w/ 多个目录

> ID：14294568
> 
> 赞同：0
> 
> 时间：2013-01-12T15:02:04.537
> 
> 标签：php

当我执行以下代码时：

```
// autoload classes
spl_autoload_register(function($class) {
    require_once("$class.php");
}); 
```

它适用于与脚本位于同一目录中的所有类。但是，位于另一个目录中的任何类都将无法加载。以下解决方案有效：

```
define('ABSOLUTE_PATH', "/var/www/application");

// autoload classes
spl_autoload_register(function($class) {
    // class directories
    $dir = array(ABSOLUTE_PATH,
                 ABSOLUTE_PATH . '/models');

    foreach($dir as $path) {
        $file = sprintf('%s/%s.php', $path, $class);
        if(is_file($file)) {
            require_once($file);
        }
    }
}); 
```

但这感觉很丑。我读过[你可以使用命名空间](http://us1.php.net/manual/en/function.spl-autoload-register.php#92514)，但我似乎无法让它或其他任何东西工作。有人可以向我展示一个更优雅的解决方案，如果存在的话，我不必对目录路径进行硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:26:37.387

为了自动加载类，您可以在[https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md使用 PSR-0 标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)

SplClassLoader 的要点位于此处[https://gist.github.com/221634](https://gist.github.com/221634)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T00:32:01.073

是的。您可以使用 spl_autoload_register 从多个目录自动加载类。这包括带有**命名空间**的类。:)

6行代码，包括括号：

```
spl_autoload_register(function ($class) {

   $file = str_replace('\\', '/', $class) . '.php';

   if(file_exists($file)) {

      require_once $file;

   } // end if

}); 
```

试试看，如果有什么我可以帮忙的，请告诉我。

干杯:)

# mysql - 在mysql表中选择多行作为一

> ID：14294570
> 
> 赞同：1
> 
> 时间：2013-01-12T15:02:22.907
> 
> 标签：mysql, sql

我有几行记录，但需要通过查询将它们全部合并为一个。

这里是：

![http://img341.imageshack.us/img341/7808/captn.png](../Images/a3292849372d69f55be73e75a020cd1b.png)

[**大图链接**](http://img341.imageshack.us/img341/7808/captn.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:04:07.627

```
SELECT  MAX(rbr) maxRBR,
        id, date,
        MAX(pr1) maxPr1,
        MAX(pr2) maxPr2,
        ....
FROM tableName
GROUP BY id, date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:04:39.923

```
SELECT id, dat, MAX(pr1) pr1, MAX(pr2) pr2, ...
FROM table
GROUP BY id, dat 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T15:06:23.807

对于要合并非空值的每个字段，您可以使用以下命令：

```
SELECT 
    id, 
    date,
    COALESCE(field1),
    COALESCE(field2)
FROM 
    table
GROUP BY 
    id 
```

# javascript - 在屏幕行中间设置一些图像，同时调整窗口大小

> ID：14294573
> 
> 赞同：0
> 
> 时间：2013-01-12T15:02:35.230
> 
> 标签：javascript, css, html

我为移动设备构建了一个 HTML 网站，因此`width`每个设备上的窗口都会发生变化，我试图在行的中间显示 2 个图像 - 在标题位置，所以图像之间会有一点空间，并且在调整大小的同时窗口 我希望这 2 个图像自动移动并以相同的空间保持在行的中间。我尝试了一些代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<style>
#box {
  width: 55%;
  padding-left: 45%;
}

.imgSize {
  width: 150px;
  height: 150px;
}
</style>

<div id="box">
<div id="img1"> <image src = "http://icons.iconarchive.com/icons/sniffels/christmas/256/house-icon.png" class="imgSize"></div>
<div id="img2"> <image src ="http://icons.iconarchive.com/icons/archigraphs/collection/256/House-icon.png" class="imgSize"></div>
</div>

</html> 
```

但是结果一个图像覆盖了另一个图像，或者被窗户覆盖的图像......任何想法如何将它们设置在一行的中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:39:11.120

亚历克斯先生..

试试这个..

```
 #box {
    width: 100%;
    text-align:center;
    background-color:#000;
    }

    .imgSize {
    width: 150px;
    height: 150px;
    align:center;
    } 
```

还请查看[http://jsfiddle.net/7nJND/](http://jsfiddle.net/7nJND/)并在（8 个 html 或 Javascript）和 Result 之间拖动中间。您可以在中心看到您的图像。

祝你好运 ！

# java - 我在使用 Java 布局时遇到问题

> ID：14294574
> 
> 赞同：1
> 
> 时间：2013-01-12T15:02:35.857
> 
> 标签：java, swing, layout

这是我的第一个 GUI 应用程序，我无法使它看起来整洁。我尝试了几种布局并对其进行了修改，例如流、网格、边框。当我运行程序时，一切都混杂在一起。

我希望它看起来像：

```
Unloaded Measurement      |textfield| |textfield|
Loaded Rider Measurement  |textField| |textfield|
Loaded Bike Measurement   |textField| |Textfield|

                   |Button|
_______________________________________________________________________________________

Race Sag: |TextField|
Free Sag: |TextField|
Race Sag Notes: |       TextField         |
Free Sag Notes: |       TextField         | 
```

这是一个屏幕截图，可帮助您了解我的问题： ![截屏](../Images/d8f61cd57159d8bfc698ea209dd6c4bb.png)

顶部用于用户输入，底部用于计算输出。我希望我已经提供了足够的细节来帮助解决这个问题。我真的很感谢任何提供帮助的人！这是我的代码：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.StringTokenizer;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Main extends JFrame {

private static final long serialVersionUID = 1L;
private JPanel panel;
private JLabel messageLabel;
private JLabel messageLabel1;
private JLabel messageLabel2;
private JLabel raceSagLabel;
private JLabel freeSagLabel;
private JTextField wholeTextField;
private JTextField wholeTextField1;
private JTextField wholeTextField2;
private JTextField fracTextField;
private JTextField fracTextField1;
private JTextField fracTextField2;
private JTextField raceSagText;
private JTextField freeSagText;
private JTextField noteText;
private JTextField noteText1;
private JButton calcButton;
private final int WINDOW_WIDTH = 575;
private final int WINDOW_HEIGHT = 400;

/*===============================================================================
    Project : test.java - SagCalculator
    Author  : Brian Green
    Date    : Jan 10, 2013
    Abstract:   

  ===============================================================================*/
public static void main(String[] args) {
    @SuppressWarnings("unused")
    Main sc = new Main();
}
public Main(){
    setTitle("Rider Sag Calculator");
    setSize(WINDOW_WIDTH, WINDOW_HEIGHT); 
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //setLayout();
    buildPanel();
    add(panel);
    setVisible(true);
}
private void buildPanel(){
    messageLabel = new JLabel("Enter Unloaded Stand Measurement");
    messageLabel1 = new JLabel("Enter Loaded with Rider Measurement");
    messageLabel2 = new JLabel("Enter Loaed without Rider Measurement");
    wholeTextField = new JTextField(3);
    fracTextField = new JTextField(3);
    wholeTextField1 = new JTextField(3);
    fracTextField1 = new JTextField(3);
    wholeTextField2 = new JTextField(3);
    fracTextField2 = new JTextField(3);
    calcButton = new JButton("Calculate");
    raceSagLabel = new JLabel("Race Sag: ");
    raceSagText = new JTextField(5);
    freeSagLabel = new JLabel("Free Sag: ");
    freeSagText = new JTextField(5);
    noteText = new JTextField(30);
    noteText1 = new JTextField(30);

    calcButton.addActionListener(new CalcButtonListener());
    panel = new JPanel();

    panel.add(messageLabel);
    panel.add(wholeTextField);
    panel.add(fracTextField);
    panel.add(messageLabel1);
    panel.add(wholeTextField1);
    panel.add(fracTextField1);
    panel.add(messageLabel2);
    panel.add(wholeTextField2);
    panel.add(fracTextField2);
    panel.add(calcButton);  
    panel.add(raceSagLabel);
    panel.add(raceSagText);
    panel.add(freeSagLabel);
    panel.add(freeSagText);
    panel.add(noteText);
    panel.add(noteText1);

} 
```

如果由于某种原因您需要查看更多代码，请告诉我。我很乐意提供。谢谢您的帮助！

我把这一切都解决了！我要感谢@trashgod 的建议： ![在此处输入图像描述](../Images/95737356e1e420e9e0aecf84c4b76336.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:38:02.573

使用此处的其他一些建议（包括 GridBagLayout）可以实现您想要的布局，但迄今为止最简单的解决方案是使用[JGoodies FormLayout](http://www.jgoodies.com/freeware/libraries/forms/)，因为它明确设计用于创建需要排列字段和标签的布局.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:13:04.143

Try calling pack() on your JFrame, the layout doesn't get applied immediately when you set it. Alternatively, you can use validate(), which should lay out the component as well. Btw. in your sample code you don't set a layout manager.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:44:28.250

`GroupLayout`，请参见[此处](https://stackoverflow.com/a/8504753/230513)，在带标签的表单上做得很好，并且可以作为子面板进行管理。

![图片](../Images/aba51f1c897c991db7f52100c661b442.png)

# python - 使用哪个：自我还是超级？

> ID：14294576
> 
> 赞同：1
> 
> 时间：2013-01-12T15:02:45.453
> 
> 标签：python, oop

我正在包装一个 python 类双端队列以使我的代码更具可读性：

```
from collections import deque

class Queue(deque):
    def enqueue(self,a):
        super(Queue, self).append(a)

    def dequeue(self,a):
        super(Queue, self).popleft(a) 
```

我的问题是我应该在这里使用哪一个，self.append() 还是 super(Queue, self).append()，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:05:11.133

鉴于这两个选择，您应该使用`self.append`，因为您使用的代码`super`不是有效的 Python。

正确的替代版本是`super(Queue, self).append`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T19:43:49.370

`super()`用于调用派生类中重新定义的基类方法。如果您的类正在定义`append()`和`popleft()`扩展其行为的方法，那么在`super()`内部使用`append()`and是合理的`popleft()`。但是，您的示例没有从 重新定义任何内容`deque`，因此不需要`super()`.

以下示例显示了何时`super()`使用：

```
class Queue(deque):
    def append(self, a):
        # Now you explicitly call a method from base class
        # Otherwise you will make a recursive call
        super(Queue, self).append(a)
        print "Append!!!" 
```

然而，在多重继承的情况下，`super()`比仅仅允许从基类调用方法更复杂。详细了解需要了解MRO（方法解析顺序）。因此，即使在上面的示例中，通常最好这样写：

```
class Queue(deque):
    def append(self, a):
        # Now you explicitly call a method from base class
        # Otherwise you will make a recursive call
        deque.append(self, a)
        print "Append!!!" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:07:41.643

去吧`self`（撇开你的使用`super`不正确，如 Borealid 所说）。

但是，我相信在这种情况下最好**不要**扩展`deque`，而是包装它。

```
from collections import deque

class Queue(object):
    def __init__(self):
        self.q = deque

    def enqueue(self, a):
        return self.q.append(a)

    def dequeue(self, a):
        return self.q.popleft(a) 
```

另外，请注意返回 - 在您的代码中它们丢失并且您无法获得出列值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T15:08:26.533

谁告诉你甚至考虑使用`super`而不是一个好主意`self`？您想影响队列的单个实例，而不是将 a 附加到模块范围（不要介意 super.append 抛出的事实`AttributeError`）

```
from collections import deque

class Queue(deque):
    def enqueue(self, a):
        self.append(a)

    def dequeue(self, a):
        self.popleft(a) 
```

# objective-c - 如何使用 AudioServices 播放音效 - Objective C

> ID：14294581
> 
> 赞同：1
> 
> 时间：2013-01-12T15:03:01.087
> 
> 标签：objective-c, audio

我一直在网上搜索一种在 Objective C 中播放声音的方法，我找到了很多答案。但是，当我尝试播放某些东西时，会弹出三个“Apple Mach-O Linker Errors”。

这是我的代码：

**视图控制器.m**

```
-(IBAction)shoot{
    tempSound *sound = [[tempSound alloc]init];
    [sound playSound:@"test" :@"wav"]  
} 
```

**临时声音.h**

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>

@interface tempSound : NSObject{
    SystemSoundID audioEffect;
}

-(void)playSound: (NSString*) fName : (NSString*) ext;

@end 
```

**临时声音.m**

```
@implementation tempSound

-(void)playSound:(NSString *)fName :(NSString *)ext
{
    NSString *path  = [[NSBundle mainBundle] pathForResource : fName ofType :ext];

    if ([[NSFileManager defaultManager] fileExistsAtPath:path]) {

        NSURL *pathURL = [NSURL fileURLWithPath:path];
        AudioServicesCreateSystemSoundID((__bridge CFURLRef)pathURL, &audioEffect);
        AudioServicesPlaySystemSound(audioEffect);
    }

    else{
        NSLog(@"Error, file not found: %@",path);
    }

}

@end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T15:08:42.113

您必须链接到 AudioToolbox 框架。（如果您使用的是 Xcode，您可以在“构建阶段”部分的“与二进制文件链接”选项卡中添加它；如果您使用的是命令行工具链，您应该添加`-framework AudioToolbox`链接器标志。）

# java - Java/超时后的测试和操作

> ID：14294585
> 
> 赞同：1
> 
> 时间：2013-01-12T15:03:32.773
> 
> 标签：java, testing

我有一个测试，有：

```
@test(timeout = 50000) 
```

如果测试因为超时而失败，我想做一些操作，然后才做。

我尝试下一个：

```
@Test(timeout=60000)
    public void test1() {
    try{
              // code
    }
    catch(Exception e){
        //operations after time out
    }
    } 
```

但它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:08:42.880

无法使用 JUnit 的`timeout`参数执行您在此处描述的操作，因为它不提供回调来处理超时后的操作。

但是，您当然可以编写自己的测试工具来做到这一点。在下面的示例中，我希望代码在一秒钟内执行，但我的实际代码执行需要 2 秒钟。在这种情况下，我们捕获`TimeoutException`并且您可以在该捕获块中执行您的附加操作。

```
@Test
public void testMe() {

    // test must finish within one second
    int expectedExecutionInSeconds = 1;

    RunnableFuture<String> runnableFuture = new FutureTask<String>(new Callable<String>() {
        public String call() throws Exception {
            // your actual code goes in here
            Thread.sleep(2000);
            return "ok";
        }
    });

    ExecutorService executorService = Executors.newSingleThreadExecutor();
    executorService.execute(runnableFuture);

    try {
        String result = runnableFuture.get(expectedExecutionInSeconds, TimeUnit.SECONDS);
        assertEquals("ok", result);
    }
    catch (TimeoutException ex) {
        // stop code
        runnableFuture.cancel(true);

        System.out.println("do other stuff");
    }
    catch (Exception e) {
        fail("other stuff is failing");
    }

    executorService.shutdown();
} 
```

# javascript - 做活动时画布变黑

> ID：14294587
> 
> 赞同：1
> 
> 时间：2013-01-12T15:03:42.243
> 
> 标签：javascript, jquery, html, canvas

我曾尝试使用 jCanvas 在我的头像系统上制作座位。以前在此过程中，我确实绘制了图像（画布的背景）。

字段应该放在画布上，当我运行它时会这样做，但是当我单击下面的“图层”时，它会将先前设置的背景变为黑色？

```
g.addLayer({
method: 'drawRect',
x: left_px, y: top_px,
width: client.constants.ROOM_GRID_WIDTH, height: client.constants.ROOM_GRID_HEIGHT,
// Event bindings
mousedown: function(params) {
    alert("clicked!");
}}).drawLayers(); 
```

绘图背景：

```
$("canvas").drawImage({
 source: "http://xxxx.dk/framework/gfxs/rooms/"+callback[1],
 x: 0, y: 0,
 width: 760,
 height: 552,
 fromCenter: false
 }); 
```

# ruby - AWS SDK S3 示例给出网络错误

> ID：14294594
> 
> 赞同：0
> 
> 时间：2013-01-12T15:04:32.293
> 
> 标签：ruby, amazon-web-services, amazon-s3, rubygems, aws-sdk

我正在尝试学习使用适用于 Ruby 的 AWS 开发工具包，我首先在 S3 上运行示例程序。但是 S3 示例给了我这个错误：

```
/var/lib/gems/1.9.1/gems/aws-sdk-1.8.0/lib/aws/core/client.rb:318:in 'return_or_raise':AWS::Core::Client::NetworkError (AWS::Core::Client::NetworkError)
from /var/lib/gems/1.9.1/gems/aws-sdk-1.8.0/lib/aws/core/client.rb:419:in 'client_request'
from (eval):3:in 'put_object'
from /var/lib/gems/1.9.1/gems/aws-sdk-1.8.0/lib/aws/s3/s3_object.rb:1655:in 'write_with_put_object'
from /var/lib/gems/1.9.1/gems/aws-sdk-1.8.0/lib/aws/s3/s3_object.rb:600:in 'write'
from s3/upload_file.rb:31:in 'main' 
```

我已经检查过使用`s3cmd`，它工作正常。

我使用的是 Ruby 1.9.1，AWS SDK 版本是 1.8.0。

# c - gdb - 检测到 SIGSEGV 但无法确定哪个函数和哪一行

> ID：14294595
> 
> 赞同：0
> 
> 时间：2013-01-12T15:04:39.657
> 
> 标签：c, gdb, segmentation-fault

[http://d.pr/f/FIjf](http://d.pr/f/FIjf) 请检查 main.c。我分配了一个字符串`char *s3 = "0,9,8,7,6,5,4,3,2,1";`，运行时会有一个 SIGSEGV。当我取消注释这一行时，就没有 SIGSEGV。那么为什么这个字符串赋值会导致 SIGSEGV 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:05:45.440

您很可能正在修改导致**Undefined Behavior(UB)**的字符串文字。

`s3`指向存储在只读实现定义的内存中的字符串文字，并且任何修改此字符串文字的尝试都会导致未定义的行为。事实上，你很幸运你的代码崩溃了，因为 UB 不一定要求崩溃，但它可以给你奇怪的或几乎任何结果。

# java - GAE、GWT 和 HTTP 会话

> ID：14294597
> 
> 赞同：0
> 
> 时间：2013-01-12T15:04:49.500
> 
> 标签：java, google-app-engine, gwt, servlets

我正在构建一个基于 Google Application Engine (GAE) 和 Google Web Toolkit (GWT) 的 Web 应用程序。

客户端（GWT）通过以下方式与服务器交互：

*   通过 RPC (servlet) 询问从服务器上托管的数据集中选择的图像的 URL；
*   在浏览器中显示图像；
*   将用户单击的点的坐标存储在临时结构中；
*   当用户询问另一张图片时，客户端会将用户点击的图片发送到服务器。

一旦服务器接收到用户点击，它将它们存储在数据库中，同时保存用户标识符。由于我不想使用任何形式的用户身份验证，我尝试使用 HTTP 会话来区分不同的用户。

HTTP 会话是在 servlet 中创建的，其说明如下：

```
public SessionInfo getSessionInfo() {
  HttpServletRequest request = this.getThreadLocalRequest();
  HttpSession session = request.getSession();
  if(session.isNew()) session.setMaxInactiveInterval(-1);

  Integer i = (Integer) session.getAttribute("access_count");
  if(i == null) {
    i = new Integer(1);
  } else {
    i = new Integer(i.intValue()+1);
  } // if
  session.setAttribute("access_count", i);  
  SessionInfo sInfo = new SessionInfo(session.getId(), i.intValue());
  return sInfo;
} 
```

从文档中我了解到以下说明：

```
session.setMaxInactiveInterval(-1); 
```

将使会话永不过期。但是，**每次在浏览器上刷新页面时都会创建一个新会话**。会话已启用。

我有两个问题：

*   为什么刷新会导致创建新会话？不应该保留旧的吗？
*   您对通过服务的不同用途跟踪用户的更好方法有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:21:40.400

我不明白为什么每次都会创建一个新会话，您的代码对我来说看起来不错。您可以尝试设置超时`web.xml`以查看是否有任何不同：

```
<session-config>
  <session-timeout>-1</session-timeout>
</session-config> 
```

# javascript - 使用复选框获取行值

> ID：14294599
> 
> 赞同：3
> 
> 时间：2013-01-12T15:05:04.177
> 
> 标签：javascript, jquery, html

大家好？你能帮忙吗？我在 HTML 中有这个表格。我想要实现的是，当我单击该行时，复选框将被选中并且该行将被突出显示。是否可以隐藏复选框列？

```
<table border="1" id="estTable">
<thead>
    <tr>
        <th></th>
        <th>Name</th>
        <th>Age</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><input type="checkbox"></td>
        <td>Chris</td>
        <td>10</td>
    </tr>
    <tr>
        <td><input type="checkbox"></td>
        <td>Cass</td>
        <td>15</td>
    </tr>
    <tr>
        <td><input type="checkbox"></td>
        <td>Aldrin</td>
        <td>16</td>
    </tr>

</tbody>

</table>
<input type="button" value="Edit" id="editbtn"/>

<div id="out"></div> 
```

我有这个 javascript 来获取所选行的值。我希望一次打印一行。

```
 $('#editbtn').click(function(){

    $('#estTable tr').filter(':has(:checkbox:checked)').find('td').each(function() {
         $('#out').append("<p>"+$(this).text()+"</p>");
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:16:05.553

如果我正确理解“一次打印一行”，我认为您需要在执行新调用之前清空“输出”选择器

```
$('#editbtn').click(function(){

    $('#out').empty();

    $('#estTable tr').filter(':has(:checkbox:checked)').find('td').each(function() {
        $('#out').append("<p>"+$(this).text()+"</p>");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:17:09.467

## *[jsBin 演示](http://jsbin.com/iyewed/2/edit)*

CSS：

```
.highlight{
    background:gold;
} 
```

jQuery：

```
$('#estTable tr:gt(0)').click(function( e ){ 
  var isChecked = $(this).find(':checkbox').is(':checked');
  if(e.target.tagName !== 'INPUT'){
      $(this).find(':checkbox').prop('checked', !isChecked);
  }
  $(this).toggleClass('highlight');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:34:40.367

当您使用类向源代码添加更多上下文时，这会变得容易一些：

```
<tr>
    <td class="select hidden">
        <input type="checkbox">
    </td>
    <td class="name">Chris</td>
    <td class="age">10</td>
</tr> 
```

然后你可以做这样的事情：

```
$(document).ready(function () {
    'use strict';
    $('#estTable tbody tr').click(function (e) {
        //when the row is clicked...
        var self = $(this), //cache this
            checkbox = self.find('.select > input[type=checkbox]'), //get the checkbox
            isChecked = checkbox.prop('checked'); //and the current state
        if (!isChecked) {
            //about to be checked so clear all other selections
            $('#estTable .select > input[type=checkbox]').prop('checked', false).parents('tr').removeClass('selected');
        }
        checkbox.prop('checked', !isChecked).parents('tr').addClass('selected'); //toggle current state
    });
    $('#editbtn').click(function (e) {
        var selectedRow = $('#estTable .select :checked'),
            tr = selectedRow.parents('tr'), //get the parent row
            name = tr.find('.name').text(), //get the name
            age = parseInt(tr.find('.age').text(), 10), //get the age and convert to int
            p = $('<p />'); //create a p element
        $('#out').append(p.clone().text(name + ': ' + age));
    });
}); 
```

## 现场演示：http: [//jsfiddle.net/Lf9rf/](http://jsfiddle.net/Lf9rf/)

# php - php表单javascript onSubmit不起作用

> ID：14294602
> 
> 赞同：0
> 
> 时间：2013-01-12T15:05:15.477
> 
> 标签：php, javascript, forms, show-hide, onsubmit

又是一个问题……这几乎让我发疯了好几个小时：-/

我的问题：

我的网站上有一个上传表单，上传工作正常。但我想在上传时给用户一个反馈，因为它可能需要几秒钟，具体取决于文件大小。

我想过在 div 中显示一个 gif 动画进度条并用 javascript 显示它。我试过了，但是当我点击提交按钮时它不会出现......当我添加 onSubmit="....return false;" 上传就不行了。。。

这是我的代码：

在头部：

```
<script type="text/javascript">
function showHide() {
var div = document.getElementById('progressBar');
if (div.style.display == 'none') {
 div.style.display = 'block';
}
else {
 div.style.display = 'none';
}
}
</script> 
```

身体：

```
 <div id="progressBar" style="display:none;height:40px;width:250px;margin:0px auto;">
 <img src="img/progressbar.gif" alt="Progress Bar">
 </div> 

 <form name="photo" id="upload_big" enctype="multipart/form-data" action="<?php echo $_SERVER["PHP_SELF"];?>" method="post" onsubmit="showHide();">
 <input class="linkinput" type="file" name="image" size="20"/>
 <input type="submit" name="upload" id="uploadbutton" value="Upload image"/> 
```

我会很感激任何帮助......因为我是一个菜鸟 -> 请帮助我变得更好而不是评判;-)

谢谢楼上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:22:15.070

使用[jQuery](http://jquery.com/)：

```
$(function() {
   $('#upload_big').submit(function() {
      showHide();
   });
}); 
```

* * *

有时，表单提交会禁止您在页面上投射更多 JavaScript 功能。为了安全起见，您还应该基于`<input type="submit">`单击而不是基于表单提交事件的功能：

```
$(function() {
   $('input#uploadbutton').click(function(e) {
      showHide();
      e.preventDefault();
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:25:47.763

这是因为当提交事件触发时，浏览器已经发送了表单，并且会转到另一个页面。

# javascript - Alfresco Share 客户端同步表单验证

> ID：14294604
> 
> 赞同：2
> 
> 时间：2013-01-12T15:05:41.683
> 
> 标签：javascript, forms, share, alfresco, validation

我在注册场景中有一个 Alfresco Share 客户端表单，我想验证是否使用了所选用户名。

我可以以同步方式添加 Alfresco 表单验证器吗？

到目前为止，我的表格是这样的：

```
this.widgets.saveForm = new Alfresco.forms.Form(this.id + "-form");
this.widgets.saveForm.addValidation(Dom.get(this.id + "-username"), this.validateUsername, me, "blur", this.msg("validation-hint.username-taken")); 
```

但是**this.validateUsername**需要向 repo 端 Web 服务发出**Alfresco.util.Ajax.request**，该服务检查所选用户名的可用性。所以基本上，当响应出现时，我原来的 validateUsername 方法已经完成，返回 false（可能）。

到目前为止，我的进展是禁用提交按钮（这就是我将“**我**”传递给验证处理程序的原因），如果用户名很好，则启用成功/失败回调。

制作同步验证器的好方法是什么？

一个附带的问题是，是否有更好的方法将验证处理程序的范围设置为“ **this** ”，而不是通过**我**（这个也可以，这只是为了确保我不会错过更好的方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:00:12.287

这是创建站点表单的一个片段。它做同样的事情并检查短名称是否已经存在，如果被采用则显示错误。

```
createSiteForm.doBeforeFormSubmit =
         {
            fn: function()
            {
               var formEl = Dom.get(this.id + "-form");
               formEl.attributes.action.nodeValue = Alfresco.constants.URL_SERVICECONTEXT + "modules/create-site"; 

               this.widgets.okButton.set("disabled", true);
               this.widgets.cancelButton.set("disabled", true);

               // Site access
               var siteVisibility = "PUBLIC";
               if (this.widgets.isPublic.checked)
               {
                  if (this.widgets.isModerated.checked)
                  {
                     siteVisibility = "MODERATED";
                  }
               }
               else
               {
                  siteVisibility = "PRIVATE";
               }
               this.widgets.siteVisibility.value = siteVisibility;

               this.widgets.panel.hide();
               this.widgets.feedbackMessage = Alfresco.util.PopupManager.displayMessage(
               {
                  text: Alfresco.util.message("message.creating", this.name),
                  spanClass: "wait",
                  displayTime: 0
               });
            },
            obj: null,
            scope: this
         };

         // Submit as an ajax submit (not leave the page), in json format
         createSiteForm.setAJAXSubmit(true,
         {
            successCallback:
            {
               fn: this.onCreateSiteSuccess,
               scope: this               
            },
            failureCallback:
            {
               fn: this.onCreateSiteFailure,
               scope: this
            }
         }); 
```

所以这是客户端 JavaScript 文件 create-site.js，它在提交之前执行 ajax 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:10:27.827

我的解决方法是这样的：

1.  向表单添加自定义验证，并将“var me = this”传递给验证器函数以获取范围。

    this.widgets.saveForm.addValidation(Dom.get(this.id + "-username"), **this.validateUsername** , **me** , "blur", this.msg("validation-hint.username-taken"));

2.  添加一个验证处理函数，它将 a. 禁用提交按钮并将“检查” CSS 类设置为适当的表单，以便用户获得反馈。代码片段：

    ```
    validateUsername: function Reg_validateUsername(el, me) {
    var val = this.fieldId.value;
    var username = trim(val);
    me.widgets.registerButton.set("disabled", true);
    Dom.addClass(me.id + "-username-img", "checking");
    Dom.removeClass(me.id + "-username-img", "hidden");
    Alfresco.util.Ajax.request({
        url: "/alfresco/service/slingshot/register/username-available?username=" + username
        , method: "GET"
        , successCallback: {
            fn: me.onUsernameAvailable
            , scope: me
        }
        , failureCallback: {
            fn: me.onUsernameTaken
            , scope: me
        }
    }); 
    ```

3.  编写一个后端 webscript **username-available.get**，只有当用户名是免费的（并且有效，即使我有另一个验证器）时才会返回成功。

4.  **onUsernameAvailable**会将提交按钮设置为再次启用并再次运行验证（因为其他字段）并将 CSS 类更改为“有效”。

5.  **onUsernameTaken**将 CSS 类设置为“taken”。

这就是我最终这样做的方式。

# css - Phonegap 使用 pt 而不是 px

> ID：14294605
> 
> 赞同：0
> 
> 时间：2013-01-12T15:05:44.143
> 
> 标签：css, cordova, pixel, units-of-measurement

我目前正在开发一个 PhoneGap 应用程序，我正在 Android Samsung Galaxy S2 上对其进行测试，但我想针对 Android 和 iOS。

我想要一个固定的标题，根据iPhone 上的[http://www.idev101.com/code/User_Interface/sizes.html](http://www.idev101.com/code/User_Interface/sizes.html)`44pts`标题很高。因为我不想重新发明轮子，所以我认为它的大小是合理的，我也使用它。

我的 index.html 中有以下内容（注意`target-densitydpi=device-dpi`）

```
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> 
```

和下面的CSS

```
header {
    height:40pt;
    padding:2pt 0;
} 
```

但是当我将应用程序部署到我的手机并用尺子测量它时，标题几乎完全`7mm`高。但根据我的数学，它应该是`15.5mm`（`1.552 = 44 * 2.54 * 1/72)`

我做错了什么？还是我误解了`pt`单位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:11:05.867

Don't use pts for anything but print. It is specifically for print as 72pts = 1 inch. Use %, px, or ems.

Here's a good article with a roundup of the different units and their uses. [http://css-tricks.com/css-font-size/](http://css-tricks.com/css-font-size/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T05:54:10.003

检查像素密度，例如

```
var devicePixelRatio = window.devicePixelRatio || 1;
alert(devicePixelRaio); 
```

# sql - SQL - 选择电影最多的播放列表

> ID：14294607
> 
> 赞同：0
> 
> 时间：2013-01-12T15:06:18.483
> 
> 标签：sql, database, hsqldb

我正在为一个查询而苦苦挣扎。

我有两张桌子：

```
CREATE TABLE Playlist(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
);

CREATE TABLE PlaylistMovies(
    mid INTEGER FOREIGN KEY REFERENCES Movie(movieid) ON DELETE CASCADE,
    pid INTEGER FOREIGN KEY REFERENCES Playlist(id) ON DELETE CASCADE,   
    PRIMARY KEY (mid, pid)
); 
```

我想找到电影最多的播放列表（计算中）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:27:34.863

请尝试一下：

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/f94f9/3)

询问：

```
select top 1 pl.pid, p.name,
         count(pl.mid) as count_id
  from playlistmovies pl
  left join playlist p
  on p.id = pl.pid
  group by pl.pid, p.name
  order by count_id desc
; 
```

结果：

```
| PID | NAME | COUNT_ID |
-------------------------
|   1 |   p1 |        5 | 
```

# android - Android蓝牙作为客户端我无法连接我的arduino

> ID：14294610
> 
> 赞同：0
> 
> 时间：2013-01-12T15:06:31.647
> 
> 标签：android, bluetooth, arduino

我有一个问题，我无法与我的蓝牙屏蔽建立连接，我一直在使用另一个应用程序，如果设备工作，由连接的灯指示，但使用此应用程序，不会发生这种情况。调用此方法时应用程序崩溃 mmSocket.connect()，如果这不是坏套接字获取 tmp = mmDevice.createRfcommSocketToServiceRecord (MY_UUID); 请帮助我是新手=）

```
import java.io.IOException;
import java.util.UUID;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnLongClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.Toast;

public class ConfigView extends Activity implements OnClickListener, OnLongClickListener , OnItemSelectedListener {

Button bnt1;
Spinner listDevicesFound;
public  BluetoothAdapter mBluetoothAdapter;
private  BluetoothSocket mmSocket;
private  BluetoothDevice mmDevice;
private final UUID MY_UUID = UUID.fromString("6170d0f0-5bc3-11e2-bcfd-0800200c9a66");
ArrayAdapter<String> btArrayAdapter;
String deviceToConnect;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.configview);

    bnt1 =(Button) findViewById(R.id.button1);
    bnt1.setOnClickListener(this);
    bnt1.setOnLongClickListener(this);
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    listDevicesFound = (Spinner) findViewById(R.id.spinner1);
    listDevicesFound.setOnItemSelectedListener(this);
    btArrayAdapter = new ArrayAdapter<String>(ConfigView.this, android.R.layout.simple_list_item_1);
    listDevicesFound.setAdapter(btArrayAdapter);
    registerReceiver(ActionFoundReceiver,new IntentFilter(BluetoothDevice.ACTION_FOUND));

    //ScanDevices 
    btArrayAdapter.clear();
    mBluetoothAdapter.startDiscovery();

}

@Override
protected void onDestroy() {
 // TODO Auto-generated method stub
 super.onDestroy();
 unregisterReceiver(ActionFoundReceiver);
}

//Buttons Listeners
@Override
public void onClick(View v) {
    if (v.getId() == R.id.button1)
    { 
      String address = deviceToConnect.substring(deviceToConnect.length() - 17);
      Toast.makeText(getApplicationContext(), address, Toast.LENGTH_SHORT).show();
      mmDevice = mBluetoothAdapter.getRemoteDevice(address);

      BluetoothSocket tmp = null;

        // Get a BluetoothSocket to connect with the given BluetoothDevice
        try {
            // MY_UUID is the app's UUID string, also used by the server code
            tmp = mmDevice.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) { }
        mmSocket = tmp;
    }

    mBluetoothAdapter.cancelDiscovery();

    try {
        // Connect the device through the socket. This will block
        // until it succeeds or throws an exception
        mmSocket.connect();
    } catch (IOException connectException) {
        // Unable to connect; close the socket and get out
        try {
            mmSocket.close();
        } catch (IOException closeException) { }
        return;
    }

}
@Override
public boolean onLongClick(View v) {
    // TODO Auto-generated method stub
    if (v.getId() == R.id.button1)
    { 
         try {
             mmSocket.close();
         } catch (IOException e) { }
    }
    return true;
}

private final BroadcastReceiver ActionFoundReceiver = new BroadcastReceiver(){

      @Override
      public void onReceive(Context context, Intent intent) {
       // TODO Auto-generated method stub
       String action = intent.getAction();
       if(BluetoothDevice.ACTION_FOUND.equals(action)) {
                 BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                 btArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                 btArrayAdapter.notifyDataSetChanged();
             }
      }};

public void onItemSelected(AdapterView<?> arg0, View v, int position,
        long id) {
    // TODO Auto-generated method stub
    deviceToConnect = btArrayAdapter.getItem(position);
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
   deviceToConnect = ""; 
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:52:12.877

您提供的 UUID 是什么？

要连接到远程设备上运行的任何蓝牙配置文件，您需要使用 UUID [您要连接的服务的] 建立套接字连接。

有关不同服务的 UUID 的详细列表，请参阅 www.bluetooth.org 中的分配编号.pdf

# python - 反向双重排序

> ID：14294612
> 
> 赞同：3
> 
> 时间：2013-01-12T15:07:10.967
> 
> 标签：python

很容易实现常规的双重排序：

```
pairs = [(1, 2), (2, 1), (1, 3), (2, 4), (3, 1)]

sorted(pairs,key=lambda x: (x[0],x[1]))
# out: [(1, 2), (1, 3), (2, 1), (2, 4), (3, 1)] 
```

我很感兴趣如何以相反的顺序使用第二个元素。这可以通过首先按第一项分组对然后将排序的第二项添加在一起来轻松实现。我已经使用`itertools.groupby`和实现了这一点`defaultdict`。尽管如此，它仍然比常规的双重排序复杂得多，所以我想知道是否有一个巧妙的技巧可以以更简洁的方式完成它。

```
double_sort(pairs)
# out: [(1, 3), (1, 2), (2, 4), (2, 1), (3, 1)] 
```

*PS！我知道如何做到这一点，`numpy.argsort`并且最希望看到一个标准的 lib 方法。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:11:59.563

这适用于数字和类似的数据类型

```
sorted(pairs, key=lambda x: (x[0], -x[1])) 
```

这仅适用于 Python 2 中的所有可比较类型 :(

```
sorted(pairs, lambda x, y: cmp(x[0], y[0]) or cmp(y[1], x[1])) 
```

# c++ - 用c++画圆

> ID：14294615
> 
> 赞同：2
> 
> 时间：2013-01-12T15:07:30.227
> 
> 标签：c++, visual-c++

下面的代码在 x 和 z 坐标平面上为我绘制了一圈 3d 球体对象。

```
 double radiusCircle =0.5;
 double i;
 double j;

 for(i = 0.0f;i<6.0f;i+=0.2f){
     sphere1 = new Sphere;
     sphere1->position.x = radiusCircle *cos(i * (2.0 * 3.14) /6)+4;
     sphere1->position.z = radiusCircle *sin(i * (2.0 * 3.14) / 6 )+2;
 } 
```

我也试图将它们堆叠在 y 轴上，但无法正确处理。我想知道是否有人可以帮助我这样做。

基本上，我想要上面的代码在一个圆圈中绘制 30 `sphere1`，但我也希望它有 4 高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:49:39.080

```
 double radiusCircle =0.5;
 double i;
 double j;

for (y = 0; y < 4; y++) {
     for(i = 0.0f;i<6.0f;i+=0.2f){
         sphere1 = new Sphere;
         sphere1->position.x = radiusCircle *cos(i * (2.0 * 3.14) /6)+4;
         sphere1->position.z = radiusCircle *sin(i * (2.0 * 3.14) / 6 )+2;
         sphere1->position.y = sphere1.radius * 2 * y; // <-- assign position.y to the sphere height
     }
} 
```

# jquery - 在rails中加载表单后调用javascript函数

> ID：14294623
> 
> 赞同：2
> 
> 时间：2013-01-12T15:08:29.360
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我正在加载更改添加表单下拉列表的下拉值。但是在编辑时，如果两个值都被选中，则必须填充两者。现在我想这样做： -

我制作了一个 javascript 函数，它将获取第一个下拉列表的选定值并执行 ajax 调用并获取第二个下拉列表的数据。

现在的问题是我应该何时以及如何调用该函数？

一种方法是在表单加载后调用该函数。这就是我需要你帮助的地方。如何在表单加载后调用该函数？

这是功能：

```
function getTypeOfLocation(munId){
        $('#cad_type_of_location_id > option').remove();
        $.getJSON("/cad/get_typeoflocation?" + 'id=' + munId, function(data) {

            if (data.length != 0) {
                var opt = $('<option />'); // here we're creating a new select option with for each city
                opt.val(data[0].id);
                opt.text(data[0].name);
                $('#cad_type_of_location_id').append(opt); //here we will append these new select options to a dropdown with the id 'cities'

             } else {
                   var opt = $('<option value=""> No Data </option>');
                   $('#cad_type_of_location_id').append(opt);
             }
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:53:04.017

您可以使用`on()`委托`change`处理程序，以便在`select`运行代码时不需要存在。基本上这意味着您可以在表单存在之前在页面加载代码中创建委托更改处理程序。

```
$(document).on( 'change', '#ID_of_select', function(){
   getTypeOfLocation( $(this).val() );
}) 
```

# c# - 使用 haar-cascades 从面部检测眼睛和嘴巴

> ID：14294627
> 
> 赞同：0
> 
> 时间：2013-01-12T15:08:50.200
> 
> 标签：c#, .net, winforms, emgucv

我已经从脸上提取了眼睛和嘴巴，但想从眼睛和嘴巴中提取情绪..但是，嘴巴没有被正确检测到..这是我的代码..

```
private void timer1_Tick(object sender, EventArgs e)
{
    using (Image<Bgr, byte> nextFrame = cap.QueryFrame())
    {
        if (nextFrame != null)
        {
            // there's only one channel (greyscale), hence the zero index
            //var faces = nextFrame.DetectHaarCascade(haar)[0];
            Image<Gray, byte> grayframe = nextFrame.Convert<Gray, byte>();
            Image<Gray, Byte> gray = nextFrame.Convert<Gray, Byte>();
            Image<Gray, Byte> gray1 = nextFrame.Convert<Gray, Byte>();

            var faces = grayframe.DetectHaarCascade(
                            haar, 1.4, 4,
                            HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
                            new Size(nextFrame.Width / 8, nextFrame.Height / 8)
                            )[0];

            MCvAvgComp[][] eyes = gray.DetectHaarCascade(eye, 1.1, 1, Emgu.CV.CvEnum.HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, new Size(20, 20));
            gray.ROI = Rectangle.Empty;

            MCvAvgComp[][] mouthsDetected = gray.DetectHaarCascade(mouth, 1.1, 10, Emgu.CV.CvEnum.HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, new Size(20, 20));
            gray1.ROI = Rectangle.Empty;

            foreach (MCvAvgComp mouthsnap in mouthsDetected[0])
            {
                Rectangle mouthRect = mouthsnap.rect;
                // mouthRect.Offset(f.rect.X, f.rect.Y);
                nextFrame.Draw(mouthRect, new Bgr(Color.Red), 2);
                detectedmouth = mouthRect;

            }
            foreach (MCvAvgComp eyesnap in eyes[0])
            {
                Rectangle eyeRect = eyesnap.rect;
                // mouthRect.Offset(f.rect.X, f.rect.Y);
                nextFrame.Draw(eyeRect, new Bgr(Color.Green), 2);
            }
            foreach (var face in faces)
            {
                nextFrame.Draw(face.rect, new Bgr(Color.LightGreen), 3);
                facesnap = face.rect;
            }

            pictureBox1.Image = nextFrame.ToBitmap();
        }
    }

}

private void Form1_Load(object sender, EventArgs e)
{
    cap = new Capture(0);
    // adjust path to find your xml
    //haar = new HaarCascade("haarcascade_frontalface_alt2.xml");
    haar = new HaarCascade("haarcascade_frontalface_alt_tree.xml");
    mouth = new HaarCascade("Mouth.xml");

    eye = new HaarCascade("haarcascade_eye_tree_eyeglasses.xml");
}

private void button1_Click(object sender, EventArgs e)
{
    Image snap = pictureBox1.Image;

    snap.Save("c:\\snapshot.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);

    pictureBox2.Image = snap;
    pictureBox3.Image = cropImage(snap,facesnap);
    pictureBox4.Image = cropImage(snap, detectedmouth);

}

private static Image cropImage(Image img, Rectangle croparea)
{
    Bitmap bmpImage = new Bitmap(img);
    Bitmap bmpCrop = bmpImage.Clone(croparea, bmpImage.PixelFormat);
    return (Image)(bmpCrop);
} 
```

请帮助我使用 c# 进行情绪检测和更好的嘴巴检测。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:39:00.553

我会尝试在面部矩形中寻找嘴巴，而不是检查孔图。

```
var faces = grayframe.DetectHaarCascade(
                            haar, 1.4, 4,
                            HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
                            new Size(nextFrame.Width / 8, nextFrame.Height / 8)
                            )[0];
 foreach (var f in faces)
 {
    //draw the face detected in the 0th (gray) channel with blue color
    image.Draw(f.rect, new Bgr(Color.Blue), 2);

     //Set the region of interest on the faces
     gray.ROI = f.rect;
     var mouthsDetected = gray.DetectHaarCascade(mouth, 
                              1.1, 10, 
                              Emgu.CV.CvEnum.HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, 
                              new Size(20, 20));
     gray.ROI = Rectangle.Empty;

     foreach (var m in mouthsDetected [0])
     {
          Rectangle mouthRect = m.rect;
          mouthRect.Offset(f.rect.X, f.rect.Y);
          image.Draw(mouthRect , new Bgr(Color.Red), 2);
     }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:33:41.753

我将面部区域划分为顶部和底部的 2 个矩形......并将底部矩形应用于 gray.ROI。它有效..这是两个矩形的代码..

```
 int halfheight = facesnap.Height/2;
                    int start = facesnap.X;
                    int start1 = facesnap.Y;

                    Rectangle top = new Rectangle(start,start1,facesnap.Width,halfheight);
                    int start2 = top.Bottom;

                    Rectangle bottom = new Rectangle(start, start2, facesnap.Width, halfheight);
                    nextFrame.Draw(bottom, new Bgr(Color.Yellow), 2);
                    //Set the region of interest on the faces
                    gray.ROI = bottom;
                    MCvAvgComp[][] mouthsDetected = gray.DetectHaarCascade(mouth,
                                                    1.1, 10,
                                                  Emgu.CV.CvEnum.HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
                                                    new Size(20, 20)); 
```

# java - 为什么这个递归斐波那契函数运行得这么差？

> ID：14294630
> 
> 赞同：2
> 
> 时间：2013-01-12T15:09:00.787
> 
> 标签：java, recursion, tail-call-optimization

如果我运行以下代码：

```
public static void main(String[] argsv) {

    long whichFib = 45;
    long st;
    st = System.currentTimeMillis();
    System.out.println(recursiveFib(whichFib));
    System.out.println("Recursive version took " + (System.currentTimeMillis() - st) + " milliseconds.");

    st = System.currentTimeMillis();
    System.out.println(iterativeFib(whichFib));
    System.out.println("Iterative version took " + (System.currentTimeMillis() - st) + " milliseconds.");

}

public static long recursiveFib(long n) {

    if (n == 0)
        return 0;
    if (n == 1 || n == 2)
        return 1;

    return recFib(n - 1) + recFib(n - 2);
}

public static long iterativeFib(long n) {

    if (n == 0)
        return 0;
    else if (n == 1 || n == 2)
        return 1;

    long sum = 1;
    long p = 1;
    long u = 1;

    for (int i = 2; i < n; i++) {
        sum = p + u;
        p = u;
        u = sum;
    }

    return sum;
} 
```

我得到以下输出：

> 1134903170 递归版本耗时 5803 毫秒。1134903170 迭代版本耗时 0 毫秒。

我觉得我在这里做错了什么。我认为尾调用（递归斐波那契方法中的最后一行）将由编译器优化，使其在速度上更接近迭代版本。有谁知道为什么运行如此缓慢？它只是一个写得不好的函数吗？

注意我使用的是 Oracle JDK 1.7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T15:11:13.160

```
return recFib(n - 1) + recFib(n - 2); 
```

由于您要进行两次递归调用，而不是一次，因此编译器不太可能进行传统的尾调用优化。

您可以查看[此页面](http://tratt.net/laurie/tech_articles/articles/tail_call_optimization)，了解如何使用尾调用优化编写递归斐波那契求解器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T15:17:46.000

正如其他答案所述，您的函数不是尾递归的，这是斐波那契的尾递归版本：

```
long fibonacci(int n) {
    if (n == 0)
        return 0;
    else
        return fibonacciTail(n, 1, 0, 1);
}

long fibonacciTail(int n, int m, long fibPrev, long fibCurrent) {
    if (n == m)
        return fibCurrent;
    else
        return fibonacciTail(n, m + 1, fibCurrent, fibPrev + fibCurrent);
} 
```

此外，JVM 不进行尾调用优化，因此将为每个递归调用分配一个堆栈帧，这使得这是一个相当昂贵的操作。然而，重要的是要注意这在技术上是依赖于实现的，有关执行 TCO 的 IBM SDK 链接的评论，请参阅[此](https://stackoverflow.com/questions/3616483/why-does-the-jvm-still-not-support-tail-call-optimization)SO 问题以获取更多信息。

一个优化的版本是手动进行尾调用优化，将上面的代码转换为带有变量重新分配的 while 循环：

```
long fibonacciIter(int n) {
    int m = 1;
    long fibPrev = 0;
    long fibCurrent = 1;
    while (n != m) {
        m = m + 1;
        int current = fibCurrent;
        fibCurrent = fibPrev + fibCurrent;
        fibPrev = current;
    }
    return fibCurrent;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:11:42.053

在递归版本中，您正在递归地创建函数，这很昂贵，因为函数调用涉及将变量推入堆栈、堆栈管理等，而迭代在同一个堆栈上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T16:08:38.063

在递归代码中，调用次数与答案成正比，即 O(exp(n))

在迭代方法中，运行时间与它循环的次数成正比。在）

更糟糕的是，循环是比递归调用快得多的操作，因此即使相同迭代的订单仍然会快得多。

您可以像这样编写迭代 fib。

```
public static long iterativeFib(int n) { // no chance of taking a long
    long a = 0, b = 1;    
    while(n-- > 0) {
        long c = a + b;
        a = b;
        b = c;
    }
    return c;
} 
```

> 有谁知道为什么运行如此缓慢？它只是一个写得不好的函数吗？

Java 不是一种函数式语言，它不进行尾调用优化。这意味着迭代通常比 Java 中的递归快得多。（有例外）

# mysql - mysqldump 没有转储任何表

> ID：14294632
> 
> 赞同：0
> 
> 时间：2013-01-12T15:09:15.933
> 
> 标签：mysql, database, backup, mysqldump

我无法备份我的 MySQL 数据库。我使用以下命令：

```
mysqldump --user=user --password=password db > db.sql 
```

这是输出文件的样子：

```
-- MySQL dump 10.11
--
-- Host: localhost    Database: db
-- ------------------------------------------------------
-- Server version   5.0.96-community

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

就是这样。没有`CREATE TABLE`，也没有`INSERT`……我还在类似问题的帖子中注意到，`-- Dump completed on YYYY-MM-DD HH:MM:SS`输出的末尾总是有 a ，这里不是这种情况。我的用户名和密码正确，用户拥有所有可能的权限。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T18:47:01.590

试试这个：

```
mysqldump -u username -p DB_Name > dumpfile.sql 
```

它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:39:26.683

尝试相同但使用正常的mysql命令，即，如果你有

```
mysqldump --user=root --password=secret db 
```

然后尝试

```
mysql --user=root --password=secret db 
```

您应该能够以这种方式查看所有表和数据，如果不是，则可能是用户错了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T13:29:25.287

自从提出这个问题后，我的网络主机停用了该`shell_exec()`命令，所以现在我使用 PHP 脚本来备份我的数据库。这是我正在使用的功能：

```
function backup_tables($host, $user, $pass, $name, $tables='*', $backup_path) {
    $link = mysql_connect($host,$user,$pass);
    mysql_select_db($name,$link);

    //get all of the tables
    if($tables == '*') {
        $tables = array();
        $result = mysql_query('SHOW TABLES');

        while($row = mysql_fetch_row($result)) {
            $tables[] = $row[0];
        }
    }
    else {
        $tables = is_array($tables) ? $tables : explode(', ',$tables);
    }

    $droptables = 'DROP TABLE IF EXISTS ';

    for ($i = sizeof($tables) - 1; $i >= 0; $i--) {
        $droptables .= '`' . $tables[$i] . '`';
        if ($i > 0) {
            $droptables .= ', ';
        } else {
            $droptables .= ';';
        }
    }

    //cycle through
    foreach($tables as $table) {
        $result = mysql_query('SELECT * FROM '.$table);
        $num_fields = mysql_num_fields($result);

        // $droptables.= '`' . $table . '`, ';
        $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
        $data .= "\n\n".$row2[1].";\n\n";

        for ($i = 0; $i < $num_fields; $i++) {
            while($row = mysql_fetch_row($result)) {
                $data .= 'INSERT INTO '.$table.' VALUES(';

                for ($j = 0; $j < $num_fields; $j++) {
                    if (isset($row[$j])) {
                        $row[$j] = addslashes($row[$j]);
                        $row[$j] = ereg_replace("\n","\\n",$row[$j]);
                        $data .= '"'.$row[$j].'"' ;
                    } else {
                        $data .= 'NULL';
                    }

                    if ($j < ($num_fields-1)) {
                        $data .= ',';
                    }
                }

                $data .= ");\n";
            }
        }

        $data .= "\n\n\n";
    }

    $return = $droptables . $return;

    //save file
    $date = date('Ymd-His');
    $filename = 'db-backup-' . $date . '.sql';
    $handle = fopen($backup_path.$filename,'w+');
    fwrite($handle, utf8_encode($return));
    fclose($handle);

    $gzfile = $filename . '.gz';
    $handle = gzopen($backup_path.$gzfile, 'w9');
    gzwrite($handle, file_get_contents($backup_path.$filename));
    gzclose($handle);
} 
```

示例用法：`backup_tables('localhost','user','pass','database', 'users, posts, comments, subscriptions', '/home/user/db_backups/');`. 您只需要记住将带有外键的表放在列表的末尾。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-06-27T10:48:41.890

试试这个 mysql -u root -p db_name < mydb.sql

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-12-14T07:28:38.870

这对我有用。请尝试一次

```
mysql -u <username> -p"<password>" database_name < sqlfile.sql 
```

# delphi - 狂欢报告，Delphi 中的预览窗口

> ID：14294636
> 
> 赞同：1
> 
> 时间：2013-01-12T15:09:48.420
> 
> 标签：delphi, preview, rave-reports

是否可以更改 RvSystem1.Execute 触发的默认预览窗口中的界面元素描述？

![在此处输入图像描述](../Images/728c81f58182ebf042d3e601f980dcc3.png)

我需要它们（文件、页面、缩放等）以我的母语（不是英语）。

问候阿蒂克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T00:24:27.917

好吧，我不得不这样做很长时间，据我记得，我只需要更改位于 C:\Program Files\Borland\Delphi\Rave\ 上的文件 Preview.dfm、status.dfm、setup.dfm Lib 到我想要的语言

# android - 更改 android 布局 xml 时 Eclipse 未启动

> ID：14294639
> 
> 赞同：1
> 
> 时间：2013-01-12T15:10:22.833
> 
> 标签：android, eclipse

完成 android/eclipse 新手问题...

我正在编写一个应用程序并在应用程序的布局 xml 中进行了很多更改。我的问题是，当我进行这些更改时，Eclipse 无法识别项目已过期，因此当我单击**运行**或**运行 > 运行方式 > Android 应用程序**时，什么也没有发生。我必须去**运行>运行配置...>运行**才能运行我的应用程序。相反，当我编辑任何 java 代码时，单击**Run**将立即启动我的应用程序。

算不上一场灾难，但它会变得烦人。任何人都可以帮忙吗？

我正在使用 Eclipse 的 Android Developer Tools 构建，构建：v21.0.1-543035，Eclipse 平台 v3.8.0。

谢谢！

编辑：**项目 > 自动构建**已打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:19:48.400

确保在您的 Eclipse 项目中 - 选择自动构建。每当您完成更改时，EClipse 将自动编译它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:18:43.560

我发现了问题。默认情况下，Eclipse 仅在编辑窗格显示 *.java 文件而不是 *.xml 文件时启动应用程序。因此，当它接收我的更改时，当我单击“运行”时，它不知道该怎么做。

# html - 通过单选按钮的 onclick 事件传递控制

> ID：14294640
> 
> 赞同：0
> 
> 时间：2013-01-12T15:10:26.937
> 
> 标签：html, jsp

我们可以让单选按钮像提交按钮一样吗？IE，。是否可以通过 onClick 或单选按钮的任何其他事件（如提交按钮）将控件从 JSP 或 HTML 的一个页面传递到另一个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:20:56.013

是的，您可以使用弧形按钮的 onclick 功能。您可以在该功能中做任何您想做的事情...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:23:17.727

从 HTML 表单中任何 HTML 输入元素的任何 HTML DOM 事件处理程序内部[，](https://developer.mozilla.org/en-US/docs/HTML/Element/form)[可以](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)通过[HTML](https://developer.mozilla.org/en-US/docs/DOM/event)输入元素的属性访问父[HTML 表单元素。](https://developer.mozilla.org/en-US/docs/DOM/HTMLFormElement)HTML 表单元素又具有触发提交的功能。`form``submit()`

所以，这应该这样做：

```
<form ...>
    <input type="radio" ... onclick="this.form.submit()" />
    ...
</form> 
```

`this`引用当前的 HTML 输入元素。

以下简写也是有效的：

```
<form ...>
    <input type="radio" ... onclick="form.submit()" />
    ...
</form> 
```

```
<form ...>
    <input type="radio" ... onclick="submit()" />
    ...
</form> 
```

但如果您出于某种原因在全局范围内手动创建了 JS 变量`form`或 JS 函数，它们可能会干扰。`submit()`

请注意，这一切都是基本的 HTML/JS，本质上与 JSP 无关。[JSP](https://stackoverflow.com/tags/jsp/info)仅仅是一个 HTML（和 CSS/JS）代码生成器。

# android-ndk - 如何在 Google TV 上播放 RTSP（或使用 ffmpeg）

> ID：14294641
> 
> 赞同：0
> 
> 时间：2013-01-12T15:10:32.557
> 
> 标签：android-ndk, ffmpeg, rtsp, google-tv

简而言之，我必须在 Google TV 设备（Sony nsz-gs7）上播放 RTSP。我该怎么做？

我尝试过的事情：

*   使用 NDK 编译 ffmpeg，然后 ffmpeg 将 rtsp 转换为 udp 等 - 失败，因为 Google TV 不支持 NDK（请参阅：[https](https://developers.google.com/tv/faq#ndk) ://developers.google.com/tv/faq#ndk ）。此方法使用 ffmpeg 作为库。
*   将 ffmpeg 可执行文件（使用 NDK 编译）放入应用程序中，然后从命令行调用该应用程序。（参见：[http](http://gimite.net/en/index.php?Run%20native%20executable%20in%20Android%20App) ://gimite.net/en/index.php?Run%20native%20executable%20in%20Android%20App - 第一种方法）。我可以部署可执行文件并设置其权限，但无法执行；我得到“未找到”错误（它的路径是正确的）。**我想，如果我能**在 Google TV 中运行一个可执行文件，问题就会得到解决。
*   尝试在 VideoView 中显示，例如[Google TV VideoView 播放 YouTube rtsp 视频](https://stackoverflow.com/questions/10388535/google-tv-videoview-playing-youtube-rtsp-videos)，它也不起作用。

这些方法都适用于 Android 手机，但我无法让它们在 Google TV 上运行。

显示 RTSP 或运行可执行文件的任何提示？还是我必须等待 NDK 支持？

更新：如果有可以播放 RTSP 流的应用程序，我们也可以将其用作临时修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:50:59.923

当前版本的 Google TV 在内部基于 FFMpeg ，当然[应该播放 RTSP 内容](https://stackoverflow.com/questions/10388535/google-tv-videoview-playing-youtube-rtsp-videos)，如果您尝试该示例，您将需要刷新 RTSP 内容的 url，因为 YouTube 不会让它们保持很长时间。由于 RTSP 是一种传输格式，而不是编解码器，您可能想说明您的编码是什么。

也就是说，我自己从来没有让 RTSP 工作过——所以我不是根据经验说话，但我确实相信我的同事 Shawn，他为上面的链接写了答案。

我们在 Google I/O 2012 上宣布的功能之一是能够用 Java 编写您自己的传输流和编解码器。该软件目前在 LG 上，并将在未来几个月内出现在大多数其他软件上。

如果您有紧急需要，请在 Google 或 Google+ 上给我写信。

# python - 哪种设置更有效？用 pypy 烧瓶，还是用 gevent 烧瓶？

> ID：14294643
> 
> 赞同：25
> 
> 时间：2013-01-12T15:10:33.517
> 
> 标签：python, performance, gevent, pypy

“pypy”和“gevent”都应该提供高性能。Pypy 据说比 CPython 快，而 gevent 基于 co-routines 和 greenlets，据说这可以使 Web 服务器更快。

但是，它们彼此不兼容。

我想知道哪种设置更有效（就速度/性能而言）：

*   在 pypy 上运行的内置 Flask 服务器

或者：

*   gevent 服务器，在 CPython 上运行

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-05T03:12:20.587

简短的回答是：使用 PyPy*速度更快*，并且使用 gevent具有*更高的并发性。*

可以同时使用 gevent 和 PyPy（我们在 PubNub 为多个项目执行此操作），尽管它可能很棘手。从 PyPy 2.2 开始，需要一些补丁来实现其套接字实现。我们在 github 上有一个实验分支：[https](https://github.com/pubnub/gevent/tree/pypy-hacks) ://github.com/pubnub/gevent/tree/pypy-hacks - 与[pypycore](https://github.com/gevent-on-pypy/pypycore)结合使用。

我们的建议？将 Flask 与 PyPy*和*gevent 一起使用。两全其美！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-27T17:45:42.610

Pypy 与 Gevent +1.1 ( [http://www.gevent.org/changelog.html](http://www.gevent.org/changelog.html) ) 兼容。它也与 Python 3 兼容。那么，为什么不同时使用两者呢？Pypy 将提高处理性能，而 Gevent 将通过使用地下异步连接来帮助执行 IO 绑定任务（例如数据库查询、Web 请求）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:36:38.347

内置烧瓶服务器是一个 BaseHTTPServer 左右，从不使用。最好的情况很可能是 tornado + pypy 或类似的东西。使用前进行基准测试。这也很大程度上取决于你在做什么。Web 服务器 + Web 框架基准测试通常是 hello world 类型的基准测试。你的应用真的是这样吗？

干杯，菲亚尔

# c++ - 字符串类错误，不能添加到类中

> ID：14294648
> 
> 赞同：1
> 
> 时间：2013-01-12T15:11:09.613
> 
> 标签：c++

字符串类在我的计算机中不起作用？这是我的代码，我讨厌在上面创建一个项目，是否有任何语法错误，我的书使用完全一样，有什么问题？

```
#include <string>
#ifndef LAB_PROJECT_H
#define LAB_PROJECT_H

struct Node
{
  Node* nextptr;
  Node* prevptr;
  string student_name;
  string father_name;
  int registration;
  string section;
  string major;
 string area;
 }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T15:12:55.693

You need to use fully qualified name for `string` for example.

```
std::string student_name; 
```

# c++ - 编译时（constexpr）浮点模？

> ID：14294659
> 
> 赞同：6
> 
> 时间：2013-01-12T15:12:01.277
> 
> 标签：c++, algorithm, c++11, floating-point, modulo

考虑以下在编译时根据参数类型计算积分或浮点模数的函数：

```
template<typename T>
constexpr T modulo(const T x, const T y)
{
    return (std::is_floating_point<T>::value) ? (x < T() ? T(-1) : T(1))*((x < T() ? -x : x)-static_cast<long long int>((x/y < T() ? -x/y : x/y))*(y < T() ? -y : y))
    : (static_cast<typename std::conditional<std::is_floating_point<T>::value, int, T>::type>(x)
      %static_cast<typename std::conditional<std::is_floating_point<T>::value, int, T>::type>(y));
} 
```

这个函数的主体可以改进吗？（我需要为整数和浮点类型提供一个函数）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:17:21.340

这是清理它的一种方法：

```
#include <type_traits>
#include <cmath>

template <typename T>  //     integral?       floating point?
bool remainder_impl(T a, T b, std::true_type, std::false_type) constexpr
{
    return a % b;  // or whatever
}

template <typename T>  //     integral?        floating point?
bool remainder_impl(T a, T b, std::false_type, std::true_type) constexpr
{
    return std::fmod(a, b); // or substitute your own expression
}

template <typename T>
bool remainder(T a, T b) constexpr
{
    return remainder_impl<T>(a, b,
             std::is_integral<T>(), std::is_floating_point<T>());
} 
```

如果您尝试在非算术类型上调用此函数，则会出现编译器错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:50:48.087

我宁愿这样定义它（模板别名+模板重载）：

```
#include <type_traits>

using namespace std;

// For floating point types

template<typename T, typename enable_if<is_floating_point<T>::value>::type* p = nullptr>
constexpr T modulo(const T x, const T y)
{
    return (x < T() ? T(-1) : T(1)) * (
            (x < T() ? -x : x) -
            static_cast<long long int>((x/y < T() ? -x/y : x/y)) * (y < T() ? -y : y)
            );
}

// For non-floating point types

template<typename T>
using TypeToCast = typename conditional<is_floating_point<T>::value, int, T>::type;

template<typename T, typename enable_if<!is_floating_point<T>::value>::type* p = nullptr>
constexpr T modulo(const T x, const T y)
{
    return (static_cast<TypeToCast<T>>(x) % static_cast<TypeToCast<T>>(y));
}

int main()
{
    constexpr int x = modulo(7.0, 3.0);
    static_assert((x == 1.0), "Error!");
    return 0;
} 
```

它更长但更清洁 IMO。我假设“单一功能”是指“可以统一调用的东西”。如果您的意思是“单个函数*模板*”，那么我只会保留模板别名改进并保留重载。但是，正如另一个答案中提到的，不清楚为什么您确实*需要*一个单一的功能模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:48:22.897

你问，

> “这个功能的本体可以改进吗？”

当然。现在它是一团意大利面条：

```
template<typename T>
constexpr T modulo(const T x, const T y)
{
    return (std::is_floating_point<T>::value) ? (x < T() ? T(-1) : T(1))*((x < T() ? -x : x)-static_cast<long long int>((x/y < T() ? -x/y : x/y))*(y < T() ? -y : y))
    : (static_cast<typename std::conditional<std::is_floating_point<T>::value, int, T>::type>(x)
      %static_cast<typename std::conditional<std::is_floating_point<T>::value, int, T>::type>(y));
} 
```

你澄清说……

> “（我需要为整数和浮点类型提供一个函数）”

那么模板**不是**一个单一的功能。这是一个模板。函数是从它生成的。

这意味着您的问题建立在错误的假设之上。

移除该假设后，简化函数体的一种方法（当然应该这样做）是针对浮点类型与其他数字类型专门化模板。为此，将函数模板实现放在一个类中（因为 C++ 不支持函数的部分特化，只支持类）。

然后你可以使用各种*格式化技巧*，包括 "0?0 : blah" 技巧来使函数更具可读性，包括线条和*缩进*等等！:-)

* * *

**附录**：深入研究您的代码我看到您随意转换`long int`并`int`无视调用者的类型。那不好。编写一堆自动化测试用例，使用各种参数类型和大/小值调用函数可能是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T16:49:20.820

```
template <class T>
constexpr
T
modulo(T x, T y)
{
    typedef typename std::conditional<std::is_floating_point<T>::value,
                                        int,
                                        T
                                     >::type Int;
    return std::is_floating_point<T>() ?
              x - static_cast<long long>(x / y) * y :
              static_cast<Int>(x) % static_cast<Int>(y);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T17:05:28.937

我相信有更简单的：

```
// Special available `%`
template <typename T, typename U>
constexpr auto modulo(T const& x, U const& y) -> decltype(x % y) {
    return x % y;
} 
```

注意：基于`%`so 的检测也适用于自定义类型，只要它们实现了操作符。我在做的时候也做了混合类型。

```
// Special floating point
inline constexpr float modulo(float x, float y) { return /*something*/; }

inline constexpr double modulo(double x, double y) { return /*something*/; }

inline constexpr long double modulo(long double x, long double y) { return /*something*/; } 
```

`fmod`注意：不幸的是，我不相信它会更干净`constexpr`；因此，我选择为浮点类型使用非模板模数，它允许您执行*魔术*以计算可能基于类型的二进制表示的精确模数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-11T17:19:26.030

如果你愿意，你可以做的更简单：

```
template<typename A, typename B>
constexpr auto Modulo(const A& a, const B& b) -> decltype(a - (b * int(a/b)))
{
    return a - (b * int(a/b));
} 
```

# http - Network protocol for consistent mobile clients requests

> ID：14294668
> 
> 赞同：0
> 
> 时间：2013-01-12T15:13:00.930
> 
> 标签：http, mobile, tcp, protocols

Is there a protocol (or framework) that ensures that when a request fails, it fails on both the client side (iOS, Android, etc) and server side, and when it succeeds, successes on both sides?

The request might be completed on the server but because of dropped network connection, the client does not receive the response and thinks that the request failed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:37:07.930

[Post-Redirect-Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式可以适应这一点。post 部分用于提交请求，重定向后的 get 将指向“结果”页面，客户端可以在该页面中获取状态（进行中、失败、成功等）。

显然，客户端不应从网络问题中得出请求失败的结论。它应该只是准备等待和/或重试以获得状态。

有趣的情况是初始请求提交是不完整的，即什么都没有，甚至重定向都没有返回。这就是适应的地方。初始数据提交应该在服务器生成事务标识符之后，客户端可以将其用作状态请求的替代方案。（例如，带有静态字段“请保存并使用此跟踪 ID 进行状态查询”的表单。）

如果您的问题是这种回退是否可以在协议级别自动化，那么很遗憾，答案是否定的。

# javascript - 这三种形式的自调用匿名函数有什么区别？

> ID：14294669
> 
> 赞同：9
> 
> 时间：2013-01-12T15:13:02.420
> 
> 标签：javascript, function, self-invoking-function

> **可能重复：**
> [“(function ( ) { } ) ( )” 和 “(function ( ) { } ( ) )” 在 JavaScript 中的功能是否相同？](https://stackoverflow.com/questions/5938802/are-function-and-function-functionally-equal-i)

我正在阅读下面的文档。

[http://addyosmani.com/resources/essentialjsdesignpatterns/book/#patternity](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#patternity)

当我查看这些示例时，匿名函数的自调用具有三种形式。

一个是

```
(function() {
    //do something
})(); 
```

另一个是

```
function() {
    //do something
}(); 
```

另一个是

```
(function() {
    //do something
}()); 
```

这三种形式有什么区别？

感谢您的阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T15:14:41.700

第一个和最后一个实际上是相同的。差异是风格问题。

第二个是不安全的，因为（取决于它的位置）它可能是函数*声明*而不是函数*表达式*，并且您不能立即调用函数声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:15:55.547

进行中的函数不是有效的语法：

```
function() {
    //do something
}(); 
```

# ajax - Using fileuploader.js in codeigniter along with csrf in ajax

> ID：14294672
> 
> 赞同：1
> 
> 时间：2013-01-12T15:13:17.520
> 
> 标签：ajax, codeigniter, csrf, fine-uploader

How do I use fileuploader.js in Codeigniter with csrf, in ajax?

I am using the images_crud library [http://www.web-and-development.com/image-crud-an-automatic-multiple-image-uploader-for-codeigniter/](http://www.web-and-development.com/image-crud-an-automatic-multiple-image-uploader-for-codeigniter/)

I keep getting

```
The action you have requested is not allowed. 
```

**Added..**

I have added the `create` method in the controller :

```
/**
 * pages form
 */
public function create(){

    if(!isset($this->data['output'])){
        $this->data = array_merge($this->data, 
                        array(  'output'    => '' , 
                                'js_files'  => array() , 
                                'css_files' => array()
                            )
                        );
    }

    //-------------------------
    //for file uploading
    $image_crud = new image_CRUD();

    $image_crud->set_primary_key_field('id');
    $image_crud->set_url_field('filename');
    $image_crud->set_table('news')
        ->set_image_path('public/documents');

    $output = $image_crud->render();

    $this->data['output']=$output->output;
    $this->data['js_files']=$output->js_files;
    $this->data['css_files']=$output->css_files;
    //-------------------------

    //display
    $this->load->view('templates/admin_header');
    $this->load->view('admin/index.php');
    $this->load->view('admin/create_pages.php', $this->data);
    $this->load->view('templates/admin_footer');
} 
```

And the `create_pages` in view :

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?>
<?php echo validation_errors()?>

<?php 
foreach($css_files as $file): ?>
<link type="text/css" rel="stylesheet" href="<?php echo $file; ?>" />
<?php endforeach; ?>
<?php foreach($js_files as $file): ?>
<script src="<?php echo $file; ?>"></script>
<?php endforeach; ?>

<?php echo form_open(site_url('admin/pages/save'),array('style'=>'width:700px;'))?>

<label>
    Title
    <input type='text' name='title' value='<?php echo @$title?>' />
</label>
<br/>

content :
<textarea name="content" id="content" >
    <?php echo @$content?>
</textarea>
<br/>

<?php echo $output?>

<input type='submit' name='submit' value='save' />
</form> 
```

I have added `image_crud.php` and `image_moo.php` in the library.

I am getting `500 Internal Server Error` with the url being [http://example.com/mole/pages/create/upload_file?qqfile=1355936206.9151.jpg](http://example.com/mole/pages/create/upload_file?qqfile=1355936206.9151.jpg)

which I wanted to be [http://example.com/mole/admin/pages/create/upload_file?qqfile=1355936206.9151.jpg](http://example.com/mole/admin/pages/create/upload_file?qqfile=1355936206.9151.jpg)

I am not sure why the `fileuploader.js` is taking a different url for uploading.

**Added**

Well, I have not made much changes to the codings avilaible from [http://www.web-and-development.com/image-crud-an-automatic-multiple-image-uploader-for-codeigniter/](http://www.web-and-development.com/image-crud-an-automatic-multiple-image-uploader-for-codeigniter/)

```
$(function(){
<?php if ( ! $unset_upload) {?>
    createUploader();
<?php }?>
    loadColorbox();
});
function loadColorbox()
{
$('.color-box').colorbox({
    rel: 'color-box'
});
}
function loadPhotoGallery(){
$.ajax({
    url: '<?php echo $ajax_list_url?>',
    dataType: 'text',
    data:$('input[type=hidden]').eq(1).prop('name')+':'+$('input[type=hidden]').eq(1).prop('value'),
    beforeSend: function()
    {
        $('.file-upload-messages-container:first').show();
        $('.file-upload-message').html("<?php echo $this->l('loading');?>");
    },
    complete: function()
    {
        $('.file-upload-messages-container').hide();
        $('.file-upload-message').html('');
    },
    success: function(data){
        $('#ajax-list').html(data);
        loadColorbox();
    }
});
}
function createUploader(){
        var uploader = new qq.FileUploader({
            element: document.getElementById('file-uploader-demo1'),
            template: '<div class="qq-uploader">' +
                '<div class="qq-upload-drop-area"><span><?php echo $this->l("upload-drop-area");?></span></div>' +
                '<div class="qq-upload-button"><?php echo $this->l("upload_button");?></div>' +
                '<ul class="qq-upload-list"></ul>' +
                '</div>',
            fileTemplate: '<li>' +
                '<span class="qq-upload-file"></span>' +
                '<span class="qq-upload-spinner"></span>' +
                '<span class="qq-upload-size"></span>' +
                '<a class="qq-upload-cancel" href="#"><?php echo $this->l("upload-cancel");?></a>' +
                '<span class="qq-upload-failed-text"><?php echo $this->l("upload-failed");?></span>' +
                '</li>',
            action: '<?php echo $upload_url?>',
            debug: true,
            onComplete: function(id, fileName, responseJSON){
                loadPhotoGallery();
            }
        });
}
function saveTitle(data_id, data_title)
{
    $.ajax({
        url: '<?php echo $insert_title_url; ?>',
        type: 'post',
        data: {primary_key: data_id, value: data_title},
        beforeSend: function()
        {
            $('.file-upload-messages-container:first').show();
            $('.file-upload-message').html("<?php echo $this->l('saving_title');?>");
        },
        complete: function()
        {
            $('.file-upload-messages-container').hide();
            $('.file-upload-message').html('');
        }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T02:04:34.873

在这里你有两个问题。

**首先：**您需要为每个 ajax 请求设置**csrf 令牌。**这很**简单**。

**第二：**上传时需要设置**csrf token**。这是不可能的。

但请确保您在这里还有其他选择。**不用担心！**.

每种方法，如编辑标题或删除等。你可以这样解决：

在你`list.php`的一开始：

```
 $this->set_css('assets/image_crud/css/fileuploader.css');
    $this->set_css('assets/image_crud/css/photogallery.css');
    $this->set_css('assets/image_crud/css/colorbox.css');

    $this->set_js('assets/image_crud/js/jquery-1.8.2.min.js');
    $this->set_js('assets/image_crud/js/jquery-ui-1.9.0.custom.min.js');
    $this->set_js('assets/image_crud/js/fileuploader.js');
    $this->set_js('assets/image_crud/js/jquery.colorbox-min.js');
    $CI =& get_instance(); // create codeigniter reference instance. 
```

*然后：*

```
function saveTitle(data_id, data_title)
{
        $.ajax({
            url: '<?php echo $insert_title_url; ?>',
            type: 'post',
            data: {primary_key: data_id, value: data_title,
            '<?php echo $CI->security->get_csrf_token_name(); ?>':'<?php echo $CI->security->get_csrf_hash(); ?>'},
            beforeSend: function()
            {
                $('.file-upload-messages-container:first').show();
                $('.file-upload-message').html("<?php echo $this->l('saving_title');?>");
            },
            complete: function()
            {
                $('.file-upload-messages-container').hide();
                $('.file-upload-message').html('');
            }
            });
} 
```

简单的解决方案。只需添加`csrf_token_name`and `csrf_hash_value`。

现在对于**第二个问题**，我说这是不可能的，因为**qq.fileuploader** 使用`$_GET`and not `$_POST`，所以`params`他们提供的属性只是为您添加了一个 get**参数，**该参数不会被**csrf_verify()**方法解析。 **如何解决它：**只需转到您的`config/config.php`并将以下代码添加到它的末尾：

```
if(stripos($_SERVER["REQUEST_URI"],'/upload_file') === FALSE)
{
    $config['csrf_protection'] = TRUE;
}
else
{
    $config['csrf_protection'] = FALSE;
} 
```

这将为您禁用上传 csrf 检查（仅在上传时将被禁用），并将在下一个请求时重新启用它。

我已经测试了这段代码，它可以 100% 工作。:)

**更新：**主要问题在于 image_crud 的开发人员没有考虑**多部分编码请求**（从新结果中我可以看到）。他正在使用旧版本的**Fineuploader**。该问题已通过**Fineuploader 3.0+**解决，但尚未在**image_crud**中解决，这在使用多部分编码请求时会出现问题。

*希望我有所帮助。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:03:48.653

image_crud 的作者刚刚推出了一个使用最新版本的 Fine Uploader 的新版本。IE 问题和您可能遇到的其他问题应在最新版本中修复。您现在应该能够使用 csrf 令牌，而无需进行最少的重新配置。

# java - Add extra number beside array

> ID：14294673
> 
> 赞同：-2
> 
> 时间：2013-01-12T15:13:57.263
> 
> 标签：java, arrays, multidimensional-array

i want setting an array and below is my code

```
 public static void setArray()
{
    int i = 5;
    int j = 5;
    int testarray[][] = new  int[i][j];

    for(int x = 0;x<i;x++)
    {
        for(int y=0;y<j;y++)
        {
            System.out.print("0 ");
        }
        System.out.println("");     
    } 
} 
```

the result is something like this: 0 0 0 0 0

0 0 0 0 0

0 0 0 0 0

0 0 0 0 0

0 0 0 0 0

if i want to put a number/alphabet beside to let the user know which column, how can i do that ?

Expected Result:

====================

1 2 3 4 5

A|0 0 0 0 0

B|0 0 0 0 0

C|0 0 0 0 0

D|0 0 0 0 0

E|0 0 0 0 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:21:25.467

您需要另一个初始 for 循环来打印数字，然后您需要在第二个 for 循环中添加另一个打印语句来打印每一行的字母：

```
System.out.print(" ");
for (int x = 0; x < i; x++) {  // this prints the numbers on the first row
    System.out.print(" " + x);
}
System.out.println();

for (int x = 0; x < i; x++) {
    System.out.print((char) ('A' + x) + "|");  // this prints the letters
    for (int y = 0; y < j; y++) {
        System.out.print("0 ");
    }
    System.out.println("");
} 
```

```
  0 1 2 3 4
A|0 0 0 0 0
B|0 0 0 0 0
C|0 0 0 0 0
D|0 0 0 0 0
E|0 0 0 0 0

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:17:36.197

您需要打印 1、2、3、4、5 ..`column`次数并打印 A、B、C、D .. 直到达到`row`s 的数量。自己尝试编码，没那么难（我不想提供现成的代码）

# tizen - 如何将 Tizen 应用程序部署到 Tizen 模拟器？

> ID：14294677
> 
> 赞同：6
> 
> 时间：2013-01-12T15:15:00.297
> 
> 标签：tizen, tizen-web-app, tizen-native-app, tizen-emulator

我看到 Tizen 有[Smart Development Bridge](https://developer.tizen.org/help/index.jsp?topic=/org.tizen.gettingstarted/html/dev_env/commands.htm)（sdb，类似于 Android 的 adb），但它没有 Android Debug Bridge 在 Android 上的“安装”命令。

有人可以给我在 Tizen 模拟器上部署/执行 Tizen 应用程序的步骤吗？

我希望能够在 Tizen 开发环境之外执行此操作（这些步骤是 QA 要求的）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T12:15:27.277

**对于 Web 应用程序（小部件：**

```
sdb push app.wgt /tmp/Application.wgt
sdb shell wrt-installer -i /tmp/Application.wgt 
```

对于使用[命令行界面工具的小部件 web-install](https://developer.tizen.org/help/topic/org.tizen.web.appprogramming/html/ide_sdk_tools/command_line_interface.htm) ::

```
web-install -w Application.wgt -i application_uri_id.org 
```

或使用 webtizen：

```
webtizen install -w Application.wgt -i application_uri_id.org 
```

**对于本机包：**

```
sdb push your.tpk /opt/apps/PKGS/Application.tpk
sdb shell pkgcmd -q -i -t tpk -p /opt/apps/PKGS/Application.tpk 
```

对于使用[命令行界面工具 native-install 的本机](https://developer.tizen.org/help/topic/org.tizen.native.appprogramming/html/ide_sdk_tools/command_line_interface.htm)：

```
native-install -p your.tpk 
```

使用 sdb：

```
sdb install /home/user/your.tpk 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T18:48:33.727

```
sdb push app.wgt /sdcard/app.wgt
sdb shell wrt-installer -i /sdcard/app.wgt 
```

您可以在 Preferences > Tizen SDK > Web > Launch 中查看 eclipse 用于部署应用程序的所有命令

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-25T07:32:59.970

使用 Tizen SDK 2.3.1 及更高版本。我们可以安装/卸载小部件/应用程序

`sdb install Application.wgt`

`sdb uninstall Application.wgt`

`sdb`就像 android `adb`shell 实用程序。如果它在系统路径上不可用。转到它的安装/可用目录，并与小部件的路径一起运行它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T16:09:44.233

```
sdb push your.tpk /opt/apps/PKGS/your.tpk
sdb shell pkgcmd -q -i -t tpk -p /opt/apps/PKGS/your.tpk 
```

这就是日食的做法。希望它会有所帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T16:36:55.820

从 2.0a 开始就有了 CLI。我将描述如何使用 2012 年发布的 2.0：C:\tizen-sdk\tools\ide\bin\ 有 CLI 工具。您需要 web-install 和 web-run 1\. intall app web-install.bat -w tizenapp.wgt 2 运行已安装的应用程序： web-run -i XXXXXX 其中 XXX 是应用程序 ID（在您的 config.xml 中找到它）

对于本机应用程序 (tpk) 可用的相同工具 native-install 和 native-run 在有关此工具的文档中查看更多信息[https://developer.tizen.org/help/index.jsp?topic=%2Forg.tizen.native.appprogramming% 2Fhtml%2Fide_sdk_tools%2Fcommand_line_interface.htm](https://developer.tizen.org/help/index.jsp?topic=%2Forg.tizen.native.appprogramming%2Fhtml%2Fide_sdk_tools%2Fcommand_line_interface.htm)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-19T05:47:52.130

1.  `sdb push app.wgt /tmp/Application.wgt`
2.  `sdb shell wrt-installer -i /tmp/Application.wgt`

第二个命令对我`wrt-installer`不起作用，sdb 无法识别

# dart - I don't understand UTC date formatting using DateFormat in Dart

> ID：14294680
> 
> 赞同：2
> 
> 时间：2013-01-12T15:15:12.840
> 
> 标签：dart, date-format

When UTC date is formatted by `DateFormat#format()`, I expect to get a `String` of UTC date formatted, but not.

Please look at the code below. These tests are passed.

My question is why does `DateFormat#format()` return a time of 12:00 past UTC date? What am I missing here?

```
Date date(int millisecondsSinceEpoch, bool isUtc) =>
    new Date.fromMillisecondsSinceEpoch(millisecondsSinceEpoch, isUtc:isUtc);

DateFormat df = new DateFormat("yyyy-MM-dd hh:mm");

// JST (+9.00)
expect(date(0, false).toString(), equals("1970-01-01 09:00:00.000"));
expect(df.format(date(0, false)), equals("1970-01-01 09:00"));

expect(date(0, true).toString(), equals("1970-01-01 00:00:00.000Z"));
// Why 12 o'clock?
expect(df.format(date(0, true)), equals("1970-01-01 12:00")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:24:51.337

您编写的格式字符串使用小写字母`hh`，即 12 小时制。使用大写`HH`的小时来获得 24 小时制。您在最后一行得到的输出当前是午夜 12 点，而不是 24 小时制的 00 小时。

[请参阅DateFormat](http://api.dartlang.org/docs/bleeding_edge/intl/DateFormat.html)中的显式模式语法

# jquery - can jQuery load,post,get methods receive a var=value response?

> ID：14294681
> 
> 赞同：1
> 
> 时间：2013-01-12T15:15:23.087
> 
> 标签：jquery, post

i've been playing around w/ these things and it seems that the callback function has only one response variable..

```
$.post(link, $("#form").serializeArray(), sendFormResponse); 
```

where sendFormResponse function does the magic ...

however i have only 1 variable (response) to play with..

i needed at least 2

if i could get this .post method to return 2 variables: 1) status = (ok,error,adjust, etc) 2) statusMessage (or response) = (more strings)

both of w/c are generated from php side, that would be super.. coz i can evaluate what to do depending on my php's responses..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:30:10.093

You should be looking at data in the success method. Usually I would setup a standard response json object which I can validate myself.

```
$.post('ajax/test.php', function(response) {
  if (response.success) {
      alert(response.data.key1);
      // will display "value1"
  } else {
      alert(response.errorText);
  }
}); 
```

test.php

```
<?php
// so ajax client can interpret content appropriately
header('Content-Type: application/json');

// hide all php notices/warnings/errors 
// (you really should be logging them)
// ** Any text other than the json encoded string
// will break the clients parsing abilities **
ini_set('display_errors', false);

$response = array(
    "success" => true,
    "errorText" => "",
    "data" => array(
        "key1" => "value1"
    )
);

echo json_encode($response, JSON_FORCE_OBJECT);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:18:50.650

传递给回调（或在响应中返回）的参数可以是一个对象，它可以有无限的属性，也可以是一个包含多个元素的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T15:22:57.547

从您的 PHP 发送一个 JSON 编码的数组

```
echo json_encode(array('success' => 'ok', 'data1' => $data1, 'data2' => $data2)); //etc. 
```

然后，您可以在 Javascript 中引用成功标志和数据。

```
$.post(link, $("#form").serializeArray(), function(data) {
   if (data.success == 'ok') {
       alert('data1 = ' + data.data1);
   } 
   else {
      alert (data.error);
   }
}); 
```

# c# - 客户端偶尔不会检测到挂断，因此不会重新连接

> ID：14294685
> 
> 赞同：0
> 
> 时间：2013-01-12T15:16:04.193
> 
> 标签：c#, .net-3.5, signalr

我在.Net 3.5（SignalR的RC）中使用SignalR，我发现大约每天一次，当使用长轮询作为传输时，它会连接，但从未检测到超时，保持在“连接”状态尽管连接已经关闭，但仍处于状态。

通常它每 2 分钟重新连接一次，但是在这样做了 ~ 一天之后，它只是连接，然后永远不会断开/重新连接。

除了一个看门狗定时器来检查这个，还有什么我可以看的吗？我正在使用一个非常普通的 SignalR 客户端实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:40:58.750

SignalR 客户端（btw .NET 35 不再支持）不检测客户端断开连接。该逻辑将在 1.0 之后添加。

# scala - 如何在 Debian 上为 IntelliJ 使用 Scala 插件？

> ID：14294695
> 
> 赞同：1
> 
> 时间：2013-01-12T15:16:47.830
> 
> 标签：scala, intellij-idea, debian

我有 IntelliJ Idea Community Edition v 123.72，在一个 Debian 不稳定的盒子上有 Scala 插件 0.6.371，它有包 scala 和 scala-library v 2.9.2+dfsg-1。在创建新的 Scala 模块时，我被要求输入“SCALA_HOME”或“现有库”，其中有两个空的下拉菜单，分别是“编译器库”和“标准库”。

是否可以将发行版 scala 包与插件一起使用？如果是这样，我该如何填写“新项目表”？

如果没有，我在哪里可以找到 Scala 的 Linux 二进制发行版？

（这一切看起来都很简单，但我的 Google-fu 让我失望了。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:37:14.153

[在此处](http://www.scala-lang.org/downloads)下载最新版本的 Scala ，然后将 scala home 设置为解压缩目录（可以在任何地方）。IntelliJ 将负责其余的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T06:36:57.827

或者，使用 mkdir 和 ln -s 重新创建 intelliJ 正在寻找的目录结构。

Debian 包管理器在整个根目录中安装了 scala 的零碎部分。我在 /usr/share/java 中找到了 intelliJ 正在寻找的库

要创建系统链接并满足 intelliJ，您可以尝试以下操作：

```
mkdir /usr/share/java/lib
ln -s /usr/share/java/scala-library-X.X.X.jar /usr/share/java/lib/scala-library.jar
ln -s /usr/share/java/scala-compiler-X.X.X.jar /usr/share/java/lib/scala-compiler.jar
export SCALA_HOME=/usr/share/java 
```

为什么 aptitude 将 scala nuggets 放在各处，而不是像 /usr/lib/scala 这样更常见的中心位置，这对我来说仍然是个谜。任何人？

# postgresql - PostgreSQL PQstatus 总是返回 CONNECTION_OK

> ID：14294696
> 
> 赞同：2
> 
> 时间：2013-01-12T15:16:58.440
> 
> 标签：postgresql, libpq

我正在尝试使用 PQstatus 检查与 PostgreSQL 服务器的连接状态，即使拔下连接到服务器的电缆，它也总是返回 CONNECTION_OK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:34:58.327

假设您的问题是“为什么会发生”，而答案“这是预期的行为”是不够的。

的文档`PQstatus`不承诺*测试*连接，例如通过向服务器发送任何内容并等待答案。它只返回客户端库已知的连接状态。如果 (1) 连接发生问题，(2) 客户端库有机会注意到它，则此状态可能会发生变化。

`SELECT 1`如果您想注意何时拔下电缆，请定期向服务器发送类似的内容。UPD：还有一个`pg_ping`函数`libpq`，它可以做同样的事情，而不需要毫无意义的查询。

即使对于底层 TCP 层，拔下电缆通常也不会中断连接。*系统永远不知道它是否会被重新插入*，所以这是不明智的。有一个`SO_KEEPALIVE`选项，但它通常不会太早考虑连接“中断”（例如，Linux 上的默认设置是在*3 小时不活动*后发送 keepalive 探测）。

而且即使连接断开，`libpq`实际上也应该尝试读取或写入套接字以将其检测为错误。这不会发生，直到您以某种方式实现它 - 例如通过执行上面建议的查询。

# html - CSS 选择/过渡属性值似乎是错误的

> ID：14294698
> 
> 赞同：0
> 
> 时间：2013-01-12T15:17:08.150
> 
> 标签：html, css, css-selectors, css-transitions

我`#footer a`之前使用了选择器，但是在删除`#footer`以使更改适用于`<a>`页面上的所有 's 之后，除了类为 div 中的那些之外`.navbar`，没有链接得到以下选择器分配：`a:not(.navbar a)`, `a:not(.navbar a):hover`, `a:not(.navbar a):active`（也可以在 Google Chrome 元素检查器中看到)

我创建了 2 个 jsFiddles 来代表我想说的：

1.  [第一个版本的工作示例](http://jsfiddle.net/DJDavid98/DXUUa/)
2.  [坏了，新代码](http://jsfiddle.net/DJDavid98/VJ43W/1/)

我必须再次修复它，所以它适用于整个页面，除了一个 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:34:53.283

你不能`a:not(.navbar a)`在 CSS 中做。

如果你知道你的`a`will 总是直接嵌套在`.navbar`其中并且你想排除它`a`，你可以选择`:not(.navbar) > a`。但是如果嵌套级别是任意的，并且您想排除`a`嵌套在 中的任何位置`.navbar`，那么您可能很难为此编写 CSS 选择器。类似的东西`:not(.navbar) a`总是可以匹配树中更高的其他元素。有关为什么它不起作用的另一个示例，请参[见此答案。](https://stackoverflow.com/questions/7084112/css-negation-pseudo-class-not-for-parent-ancestor-elements/7084147#7084147)

最简单的解决方案是将效果应用于所有`a`元素，然后在 中撤消它们`.navbar a`：

```
.navbar a {
  text-shadow:none;
  padding:0;
  -webkit-transition-property: none;
  -moz-transition-property: none;
  -o-transition-property: none;
  transition-property: none;
} 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/VJ43W/4)

# java - NetBeans 7.2，启动一个maven spring项目并添加hibernate

> ID：14294700
> 
> 赞同：4
> 
> 时间：2013-01-12T15:17:14.483
> 
> 标签：java, spring, hibernate, maven, netbeans

我正在尝试迁移到 maven 作为构建系统，以便对依赖项进行更标准的管理。

这是我做的步骤和我问的简单的（maven newbie）问题。这个过程是我能想象的最简单的，所以这个问题应该很容易重现。

1.  让我们从文件、新项目、Maven、Web 应用程序开始。在以下表格中，我保留所有默认值，但对于我选择“Apache Tomcat 7.0.11.0”的应用程序服务器字段。我注意到这个向导没有提出任何框架（Sring、Hibernate 等），而标准的非 Maven 项目创建向导确实允许包含框架的选择。

如果我们现在看一下这个项目，这就是我们所看到的：

![在此处输入图像描述](../Images/0e56cb4b0494453ae77c1a7a1d543889.png)

**所以第一个问题是：为什么已经包含了 spring，甚至在此之前我已经明确添加了它？**

让我们看看项目属性：
![在此处输入图像描述](../Images/89a21c1f42b85164ebd0b72be913bfd9.png)

所以没有选择任何框架。我只想将 spring 用于它的依赖注入容器（稍后我可能会添加 spring 安全性，但这不是此刻的优先事项）。**如上所述，我是否需要再次添加它，因为已经包含了一些核心模块？**

2.  在项目属性中，在框架节点中，我添加了 Hibernate 并选择了一个数据库连接。依赖关系现在变为如下。

![在此处输入图像描述](../Images/a529eed3fff587da1e99776d4d95c676.png)

其中两个（我在屏幕截图中突出显示了它们）被标记为“尚未下载依赖项。构建项目以纠正错误”（当您将指针移到它们上方时，您可以看到此消息作为提示）。我已经构建了项目，但错误仍然存​​在。
在 Maven 的输出中，我看到：

```
无法在项目 CreatingMavenSpringProject 上执行目标：无法解析项目 com.mycompany:CreatingMavenSpringProject:war:1.0-SNAPSHOT 的依赖项：无法解析以下工件：javax.sql:jdbc-stdext:jar:2.0，javax.transaction： jta:jar:1.0.1B：在 unknown-jars-temp-repo（文件：C:\Users\agostino\Documents\NetBeansProjects\CreatingMavenSpringProject/lib）中找不到工件 javax.sql:jdbc-stdext:jar:2.0 - > [帮助1]

要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。
使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。

```

我已经按照建议进行了尝试：

```
org.apache.maven.lifecycle.LifecycleExecutionException: 未能执行目标o
n 项目CreatingMavenSpringProject：无法解析项目的依赖关系
 com.mycompany:CreatingMavenSpringProject:war:1.0-SNAPSHOT: 以下工件
cts 无法解析：javax.sql:jdbc-stdext:jar:2.0, javax.transaction:jta:
jar:1.0.1B：无法在文件：C:\Users\agost 中找到 javax.sql:jdbc-stdext:jar:2.0
ino\Documents\NetBeansProjects\CreatingMavenSpringProject/lib 被缓存在
本地存储库，直到更新间隔才会重新尝试解析
f unknown-jars-temp-repo 已过或强制更新
        在 org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDe
未决（LifecycleDependencyResolver.java:210）
        在 org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resol
veProjectDependencies（LifecycleDependencyResolver.java:117）
        在 org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAr
eResolved(MojoExecutor.java:258)
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor
.java:201)
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor
.java:153)
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor
.java:145)
        在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute（生命周期
eStarter.java:161)
        在 org.apache.maven.DefaultMaven.doExecute（DefaultMaven.java:320）
        在 org.apache.maven.DefaultMaven.execute（DefaultMaven.java:156）
        在 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke（NativeMethodAccessorImpl。
爪哇：39）
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke（DelegatingMethodAcces
sorImpl.java:25)
        在 java.lang.reflect.Method.invoke(Method.java:597)
        在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced（Laun
cher.java:290)
        在 org.codehaus.plexus.classworlds.launcher.Launcher.launch（Launcher.jav
一个：230）
        在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        在 org.codehaus.plexus.classworlds.launcher.Launcher.main（Launcher.java：
352)
引起：org.apache.maven.project.DependencyResolutionException：无法解决
项目 com.mycompany:CreatingMavenSpringProject:war:1.0-S 的 olve 依赖项
NAPSHOT：无法解析以下工件：javax.sql:jdbc-stdext:ja
r:2.0, javax.transaction:jta:jar:1.0.1B: 找不到 javax.sql:jdbc-stdext:j
ar:2.0 在文件中：C:\Users\agostino\Documents\NetBeansProjects\CreatingMavenSpringP
roject/lib 已缓存在本地存储库中，将不会重新尝试解析
d 直到 unknown-jars-temp-repo 的更新间隔已经过去或更新
 被迫
        在 org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(D
efaultProjectDependenciesResolver.java:189)
        在 org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDe
未决（LifecycleDependencyResolver.java:185）
        ... 22 更多
引起：org.sonatype.aether.resolution.DependencyResolutionException：fol
降低工件无法解决：javax.sql:jdbc-stdext:jar:2.0, javax.tra
nsaction:jta:jar:1.0.1B: 在文件:C 中找不到 javax.sql:jdbc-stdext:jar:2.0
:\Users\agostino\Documents\NetBeansProjects\CreatingMavenSpringProject/lib 是 c
在本地存储库中疼痛，直到更新后才会重新尝试解析
unknown-jars-temp-repo 的时间间隔已过或强制更新
        在 org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDepe
ndencies（DefaultRepositorySystem.java:375）
        在 org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(D
efaultProjectDependenciesResolver.java:183)
        ... 23 更多
引起：org.sonatype.aether.resolution.ArtifactResolutionException：后续
翼工件无法解析：javax.sql:jdbc-stdext:jar:2.0, javax.trans
操作：jta:jar:1.0.1B：在文件：C:\ 中找不到 javax.sql:jdbc-stdext:jar:2.0 失败
Users\agostino\Documents\NetBeansProjects\CreatingMavenSpringProject/lib 是 cac
在本地存储库中，直到更新才会重新尝试解析
 unknown-jars-temp-repo 的间隔已过或强制更新
        在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(Def
aultArtifactResolver.java:538)
        在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArti
事实（DefaultArtifactResolver.java:216）
        在 org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDepe
ndencies(DefaultRepositorySystem.java:358)
        ... 24 更多
引起：org.sonatype.aether.transfer.ArtifactNotFoundException: 失败
在文件中找到 javax.sql:jdbc-stdext:jar:2.0:C:\Users\agostino\Documents\NetBeansPro
jects\CreatingMavenSpringProject/lib 被缓存在本地存储库中，resolut
在 unknown-jars-temp-repo 的更新间隔之前不会重新尝试 ion
已过去或强制更新
        在 org.sonatype.aether.impl.internal.DefaultUpdateCheckManager.newExcept
离子（DefaultUpdateCheckManager.java:230）
        在 org.sonatype.aether.impl.internal.DefaultUpdateCheckManager.checkArti
事实（DefaultUpdateCheckManager.java:204）
        在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(Def
aultArtifactResolver.java:427)
        ... 26 更多

```

**现在我被困在这一点上，请注意，当您尝试添加 hibernate 时，这是 maven 项目的开箱即用行为。如何解决这个问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:37:49.407

使用 Tomcat 7.0.27 我没有看到第一个问题（Spring 依赖项），但我可以复制第二个问题（无法下载依赖项）。检查`pom.xml`我发现它有错误，例如这种依赖：

```
<dependency>
    <groupId>unknown.binary</groupId>
    <artifactId>derbyclient</artifactId>
    <version>SNAPSHOT</version>
</dependency> 
```

和这个存储库：

```
<repository>
    <id>unknown-jars-temp-repo</id>
    <name>A temporary repository created by NetBeans for libraries and jars it 
    could not identify. Please replace the dependencies in this repository with 
    correct ones and delete this repository.</name>
    <url>file:${project.basedir}/lib</url>
</repository> 
```

即使 Netbeans wiki 页面显示了使用 Maven 项目选择框架的示例，我还是建议从“依赖项”节点的“添加依赖项...”选项添加依赖项。

**编辑：**`pom.xml`在不同的机器上重复相同的步骤后添加错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-04T21:41:37.690

您可以通过在存储库部分下添加以下存储库来手动修改 POM 文件：

```
<repositories>
   ...
   <repository>
      <id>java.net-m2</id>
      <name>java.net - Maven 2</name>
      <url>https://repository.jboss.org/nexus/content/repositories/java.net-m2</url>
   </repository>
</repositories> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T21:02:02.003

You can always download the dependencies manually. For example you can download - jdbc-stdext-2.0.jar from [http://download.java.net/maven/2/javax/sql/jdbc-stdext/2.0/jdbc-stdext-2.0.jar](http://download.java.net/maven/2/javax/sql/jdbc-stdext/2.0/jdbc-stdext-2.0.jar) - jta-1.0.1B.jar from [http://download.java.net/maven/2/javax/transaction/jta/1.0.1B/jta-1.0.1B.jar](http://download.java.net/maven/2/javax/transaction/jta/1.0.1B/jta-1.0.1B.jar)

then put the jars in the correct location in your .m2 repository. - .m2/repository/javax/sql/jdbc-stdext/2.0/jdbc-stdext-2.0.jar - .m2/repository/javax/transaction/jta/1.0.1B/jta-1.0.1B.jar

then run maven clean and build.

# actionscript-3 - 我的加载程序没有在 Actionscript 3 中调用完成事件

> ID：14294701
> 
> 赞同：0
> 
> 时间：2013-01-12T15:17:27.960
> 
> 标签：actionscript-3, event-handling, bulkloader

在我的 flash & actionscript 应用程序中，Bulk-Loader 不会调度完成事件。我的负载元素：

```
private var yukleyici:BulkLoader = new BulkLoader("yukleyicii");

yukleyici.add("mouse_simge.png", {id:"mouseSimge"});
yukleyici.add("para_ikon.png", {id:"paraikon"});
yukleyici.add("arkp_puan.png", {id:"arkpPuan"});
yukleyici.add("fav2.png", {id:"tecrube"});
yukleyici.add("muzik_arkaplan.mp3", {id:"muzik"});
yukleyici.add("logo.png", {id:"logoo"});
yukleyici.add(Facebook.getImageUrl(String(uidvar), "large"), {id:"profilfoto", type:BulkLoader.TYPE_IMAGE, context:context1});

yukleyici.addEventListener(BulkLoader.COMPLETE, completeHandler);
yukleyici.start(); 
```

但是这段代码不会启动我的**completeHandler**函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:25:59.653

您可能也应该设置一个[错误处理程序](http://code.google.com/p/bulk-loader/wiki/GettingStarted#Listening_for_events:)，以查看实际发生的情况，您只需连接处理程序以成功加载。

```
yukleyici.addEventListener(BulkLoader.ERROR, onAllError); 
```

# jakarta-ee - 有状态会话 bean Java EE 6 中的“创建”方法在哪里

> ID：14294706
> 
> 赞同：0
> 
> 时间：2013-01-12T15:17:54.090
> 
> 标签：jakarta-ee, stateful-session-bean

当我看到有关 Stateful Session Bean Java EE 6 的示例时，我从来没有看到 create 方法，这是接口：

```
public interface Cart {
 public void initialize(String person) throws BookException;
 public void initialize(String person, String id)
     throws BookException;
 public void addBook(String title);
 public void removeBook(String title) throws BookException;
 public List<String> getContents();
 public void remove();
} 
```

但是在客户端的应用程序中，我看到它调用了 create 方法，如下所示：

```
cart.create("Duke DeEarl", "123"); 
```

我无法理解，你能帮帮我吗？

源示例：[http ://docs.oracle.com/javaee/6/tutorial/doc/bnbod.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbod.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:40:31.400

只是它是 Java EE 6 教程中的一个错字，正确的代码应该是

```
cart.initialize("Duke DeEarl", "123"); 
```

# java - 生成准确位置

> ID：14294707
> 
> 赞同：0
> 
> 时间：2013-01-12T15:18:01.877
> 
> 标签：java, android, geolocation

我的应用程序描述： *该应用程序将随时随地 24/7 生成用户位置。浏览用户位置的另一个应用程序将向他显示具有 1-10 分钟空间的位置（我还没有决定），当然，将打印的位置记录将是最准确的。*

我尝试了不同类型的东西，但例如一分钟内我无法获得最准确的位置。许多人建议将一分钟作为参数发送到 requestLocationUpdate ，但它会每分钟生成一个位置，但我想在那一分钟内获得最准确的位置，所以我想我也会生成所有那一分钟的位置并选择最准确的。

我遇到了很多错误，例如获得一个非常糟糕的城市级位置（你一直在纽约市的 xx:xx.. 我不是在寻找那个）。有许多考虑因素，例如电池安全性和准确性。我同意在位置数量上妥协（意味着每 10 分钟打印一次用户位置，而不是 1 分钟）。

无论如何，我很困惑，如果有人有一个计划（不是代码级别）如何管理我想听的那个系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:58:51.140

如果您在户外，GPS 位置提供商应该为您提供仪表的精确度。如果您每分钟都使用 采样`requestLocationUpdate`，那应该就足够了。

不可能“在给定的时间间隔内获取 N 个样本并只保留最准确的样本”，如果需要，您应该进行计算并保留位置缓冲区。无论如何，我认为在这种应用程序中付出努力是不值得的。

如果您希望移动设备在 GPS + 互联网连接处于活动状态的情况下持续使用 4-6 小时以上，那么电池寿命将是一个问题。

# java - 从 MapReduce 获取特定数据

> ID：14294711
> 
> 赞同：3
> 
> 时间：2013-01-12T15:19:22.487
> 
> 标签：java, hadoop, mapreduce

我有以下文件作为输入，它由 10000 行组成，如下所示

```
250788965731,20090906,200937,200909,621,SUNDAY,WEEKEND,ON-NET,MORNING,OUTGOING,VOICE,25078,PAY_AS_YOU_GO_PER_SECOND_PSB,SUCCESSFUL-RELEASEDBYSERVICE,5,0,1,6.25,635-10-104-40163\. 
```

如果第 18 列小于 10 并且第 9 列是早上，我必须打印第一列。我做了以下代码。我没有得到输出。输出文件为空。

```
public static class MyMap extends Mapper<LongWritable, Text, Text, DoubleWritable> {

    public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
        String line = value.toString();
        String[] day=line.split(",");
        double day1=Double.parseDouble(day[17]);
        if(day[8]=="MORNING" && day1<10.0)
        {
        context.write(new Text(day[0]),new DoubleWritable(day1));
        }
    }
}
public static class MyReduce extends Reducer<Text, DoubleWritable, Text,DoubleWritable> {

    public void reduce(Text key, Iterator<DoubleWritable> values, Context context) 
      throws IOException, InterruptedException {

        String no=values.toString();
        double no1=Double.parseDouble(no);
        if(no1>10.0)
        {
        context.write(key,new DoubleWritable(no1) );
        }

    }
} 
```

请告诉我我做错了什么？流量是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:19:07.370

我可以看到一些问题。

首先，在您的`Mapper`, 您应该在比较s时使用`.equals()`而不是。否则，您只是在比较引用，即使对象内容相同，比较也会失败。由于 Java String 实习，它可能会成功，但如果这是最初的意图，我会避免过分依赖它。`==``String``String`

在您的`Reducer`中，我不确定您想要实现什么，但无论如何我都可以发现一些错误的事情。输入键是`Iterable<DoubleWritable>`，因此您应该对其进行迭代并对每个单独的值应用您需要的任何条件。这是我将如何重写您的`Reducer`：

```
public static class MyReduce extends Reducer<Text, DoubleWritable, Text,DoubleWritable> {

    public void reduce(Text key, Iterator<DoubleWritable> values, Context context) 
      throws IOException, InterruptedException {

        for (DoubleWritable val : values) {
             if (val.get() > 10.0) {
                 context.write(key, val);
             }
        }
    }
} 
```

但整体逻辑没有多大意义。如果您只想在第 18 列小于 10 且第 9 列为 时打印第一列`MORNING`，那么您可以使用 a`NullWritable`作为映射器的输出键，并将第 1 列写`day[0]`为输出值。`Reducer`在这种情况下，您可能甚至不需要 ，您可以使用`job.setNumReduceTasks(0);`.

让我思考的一件事是，如果您的输入只有 10k 行，您真的需要 Hadoop 工作吗？在我看来，一个简单的 shell 脚本（例如 with `awk`）对于这个小数据集就足够了。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:10:19.603

1.  我相信这是一个映射器唯一的工作，因为您的数据已经具有您想要检查的值。
2.  您的映射器已发出值，`day1 < 10.0`而您的减速器仅发出值，即。`day1 > 10.0`因此，您的减速器不会输出任何值。

所以我认为你的减速器应该是这样的：

```
String no=values.toString();
double no1=Double.parseDouble(no);
if(no1 < 10.0)
{
context.write(key,new DoubleWritable(no1) );
} 
```

我认为这应该得到你想要的输出。

# java - Hibernate：对多对多映射进行排序

> ID：14294712
> 
> 赞同：3
> 
> 时间：2013-01-12T15:19:29.490
> 
> 标签：java, hibernate, jpa, dbunit

考虑以下带有 JPA 注释的映射

```
@ManyToMany(cascade = { CascadeType.ALL })
@JoinTable(name = "infotype_validations", 
    joinColumns = { @JoinColumn(name = "info_type_id") }, 
    inverseJoinColumns = { @JoinColumn(name = "validation_id") }
)
@OrderBy(value="validation_id desc")
public Set<Validation> getValidation() {
    return validation;
} 
```

我的意图是在数据库中有一个可连接的对象，并且每次在我的服务中调用 getValidation() 时，都会返回按validation_id 排序的记录。现在为了测试我的功能，我使用了 DbUnit。每次我启动一个测试类时，我的数据库都会被创建，hibernate 会创建我的表，然后 DbUnit 会用数据填充它们。当我评论 @OrderBy 我的测试通过但当我取消评论它时，我得到 table infotype_validations can't be found。我查看了在线可用的文档，似乎完全有可能在这种映射中使用@OrderBy。那么我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:27:46.717

您需要使用字段名称而不是列名称。

```
//Assuming the field is validationId
@OrderBy(value="validationId desc")
public Set<Validation> getValidation() {
    return validation;
} 
```

还要确保该`infotype_validations`表存在于您的数据库中并且拼写匹配。

# javascript - JSON.parse reviver 函数有 n+1 个键？

> ID：14294714
> 
> 赞同：2
> 
> 时间：2013-01-12T15:20:05.333
> 
> 标签：javascript, json, parsing, reviver-function

*我想测试在解析 JSON 字符串时[可以提供 reviver 函数的代码重载。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse#highlighter_131907)*

所以这段代码：

```
JSON.parse('{"p": 5}', function(k, v) { if (k === "") return v; return v * 2; }).p; 
```

产量`10`（好的）。

但后来我问自己，“这是什么`if (k === "")`东西？” 让我们删除它！：

```
JSON.parse('{"p": 5}', function(k, v) { return v*2;}).p; //undefined !! 
```

也许是因为 5 是一个整数？让我们尝试`parseInt`：

```
JSON.parse('{"p": 5}', function(k, v) { return parseInt(v)*2;}).p; //undefined !! 
```

很奇怪...

所以我想看看是哪些键（虽然这里只有一个）造成了麻烦：

```
JSON.parse('{"p": 5}', function(k, v) { alert(v)}).p; 
```

有 2 个警报：

*   `5`

*   `[object Object]`

恕我直言`k`and`v`用于`key`and `value`，实际上这里只有一个键。

**这个其他警报是什么**？**为什么**我**必须检查`if (k === "")`？**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:23:54.220

答案在您提供的链接中...

> 最终使用空字符串和最高值调用 reviver 以允许转换最高值。

`v`是对象本身的情况`k === ""`**

# android - 全屏画廊代码

> ID：14294718
> 
> 赞同：1
> 
> 时间：2013-01-12T15:20:49.570
> 
> 标签：android

我只是为全屏画廊实现找到了一些解决方案，但我无法让代码工作。也许任何人都可以帮助我。

我需要一个没有缩略图库的全屏图像切换器，我可以用手指在图片之间切换。

我收到以下错误：firstActivity 无法解析为类型 slide_in_right 无法解析或不是字段 slide_out_left 无法解析或不是字段

我对 android 编码很陌生 :)

请帮我

```
package com.example.prog;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.view.animation.AnimationUtils;
import android.widget.ImageSwitcher;
import android.widget.ImageView;
import android.widget.ViewSwitcher.ViewFactory;
import android.util.Log;
import android.view.MotionEvent;
import android.widget.ViewSwitcher;
import android.widget.Gallery;
import android.widget.Gallery.LayoutParams;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.view.Window;
import android.content.Context;

public class l2_AltInvestActivity extends Activity implements ViewFactory {

ImageSwitcher imageSwitcher;

 Integer[] imageList = {
R.drawable.fr_l1_01,
R.drawable.fr_l1_02,
R.drawable.fr_l1_03,
R.drawable.fr_l1_04,
R.drawable.fr_l1_05
};

int curIndex=0;
int downX, upX;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mmenutest);

    imageSwitcher = (ImageSwitcher) findViewById(R.id.switcher);
    imageSwitcher.setFactory(this);
    imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_in));
    imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_out));
    imageSwitcher.setImageResource(imageList[curIndex]);
    imageSwitcher.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                downX = (int) event.getX();
                Log.i("event.getX()", " downX " + downX);
                return true;
            }
            else if (event.getAction() == MotionEvent.ACTION_UP) {
                upX = (int) event.getX();
                Log.i("event.getX()", " upX " + downX); 

                if (upX - downX > 100) {
                    imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(firstActivity.this,android.R.anim.slide_in_left));
                    imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(firstActivity.this,android.R.anim.slide_out_right));
                    //curIndex  current image index in array viewed by user
                    curIndex--;
                    if (curIndex < 0) {
                        curIndex = 5; //maximum
                    }

                    //imageList :-image list array
                    imageSwitcher.setImageResource(imageList[curIndex]);
                    //GalleryActivity.this.setTitle(curIndex);
                }
                else if (downX -upX > -100) {
                    curIndex++;
                    if (curIndex > 4) {
                        curIndex = 0;
                    }
                    imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,android.R.anim.slide_in_right));
                    imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,android.R.anim.slide_out_left));
                    imageSwitcher.setImageResource(imageList[curIndex]);
                    //GalleryActivity.this.setTitle(curIndex);
                }
            return true;
            }
        return false;
        }
    });
} //END onCreate

@Override
public View makeView() {
    ImageView i = new ImageView(this);
    i.setScaleType(ImageView.ScaleType.FIT_CENTER);
    i.setLayoutParams(new ImageSwitcher.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    i.setBackgroundColor(0xFF000000);
    return i;   
} //END makeView

 } // END Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:33:14.527

使用当前活动上下文来访问资源，而不是在当前代码中尝试通过传递`firstActivity.this`.

```
imageSwitcher.setInAnimation(AnimationUtils.
        loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_in_left));
imageSwitcher.setOutAnimation(AnimationUtils.
        loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_out_right)); 
```

使用`l2_AltInvestActivity.this`而不是`firstActivity.this`

# listbox - 如何在页面呈现时使用 Javascript 预选项目

> ID：14294720
> 
> 赞同：0
> 
> 时间：2013-01-12T15:21:01.280
> 
> 标签：listbox, listboxitem

我有一个 drupal 呈现的网络表单，它为 SELECT 列表生成以下 HTML。该列表主要用于在餐厅预订餐桌。我的客户希望我根据一天中的时间预先选择餐点。因此，如果它在午夜和下午 3:00 之间，则应自动预先选择午餐。下午 3:00 至晚上 10:30 后，表格应显示预选晚餐。

```
<select class="form-select required" name="submitted[meal]" id="edit-submitted-meal">
  <option selected="selected" value="1">Lunch</option>
  <option value="2">Dinner</option>
  <option value="3">Sunday Dining</option>
</select> 
```

我创建了以下 JS 片段希望实现目标，但它似乎不适用于页面加载

```
window.onload() {
  var today = new Date("<?php echo date("Y-m-d H:i:s"); ?>");
  var day = date.getDay();
  var hour = date.getHours();
  var meallist = document.getElementbyId("#edit-submitted-meal");
  if  (day == 0) {
    meallist.options[3].selected==true;
  }
  else {  
    if (hour > 15 && hour < 22) {
      meallist.options[2].selected==true;
    }
    else if (hour > 22 && hour < 24 {
      meallist.options[1].selected==true;
    }
    else if (hour > 0 && hour < 15 {
      meallist.options[1].selected==true;
    }
  }
} 
```

将不胜感激任何帮助。先感谢您。

PS：PHP 代码将日期注入到 javascript 中，因此当页面呈现时，该行变为 var today = new Date("2013-01-15 15:49:45");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:58:44.583

您的 javascript 语法有错误

```
 window.onload(){
      //your code here
   } 
```

应该

```
 window.onload = (function(){ 
      //your code here
    }); 
```

此外，在使用 document.getElementById 时，您不想包含“#”

并设置一个变量，如

```
 meallist.options[1].selected==true; 
```

你只想使用一个 =

```
 meallist.options[1].selected=true; 
```

另请记住，选项数组是基于 0 的。例如 options value=3 实际上是

```
 meallist.options[2] not [3] 
```

可以在此处找到简化版本 [http://jsfiddle.net/N7Yhr/](http://jsfiddle.net/N7Yhr/)

您的控制台窗口中是否还有其他错误（萤火虫等）？

# javascript - jQuery .css() 中的 CSS 框阴影

> ID：14294721
> 
> 赞同：10
> 
> 时间：2013-01-12T15:21:15.580
> 
> 标签：javascript, jquery, css, box-shadow

Firefox 18 似乎无法识别`-moz-box-shadow`或`box-shadow`CSS 属性。

如果我使用`border-color`，一切正常。

```
$($this).hover(
    function () {
        //$(this).css('border-color', '#ff0');
        $(this).css('box-shadow', '10px', '10px', '5px', '#888');
        //$(this).css('-moz-box-shadow', '10px', '10px', '5px', '#888');
    }, function () {
        $(this).css('border-color', '');
        //$(this).css('border-width', '');
    }
); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-12T15:23:32.427

您需要将参数转换为一个字符串文字。函数的值参数`css(property name, value)`是一个参数。

```
 $(this).css('box-shadow', '10px 10px 5px #888'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T15:23:52.303

这个：

```
$(this).css('box-shadow', '10px', '10px', '5px', '#888'); 
```

是不正确的语法。您需要为 CSS 属性设置一个值：

```
$(this).css('box-shadow', '10px 10px 5px #888'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-12T15:23:23.260

需要是：

```
$(this).hover(function() {
   $(this).css('box-shadow', '10px 10px 5px #888');
}, function() {
   $(this).css('border-color', '');
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-14T13:45:50.963

它应该是：

```
$(this).css('-webkit-box-shadow', '10px 10px 5px #888');
$(this).css('-moz-box-shadow', '10px 10px 5px #888');
$(this).css('box-shadow', '10px 10px 5px #888'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-11T09:34:38.650

对于 Safari、Google Chrome 和 Opera 使用

```
$(this).css('-webkit-box-shadow', '10px 10px 5px #888'); 
```

对于 Mozilla Firefox 使用

```
$(this).css('-moz-box-shadow', '10px 10px 5px #888'); 
```

对于其他网络浏览器，请使用

```
$(this).css('box-shadow', '10px 10px 5px #888'); 
```

# iphone - 当segue push动画时UISearchBar背景淡入淡出

> ID：14294722
> 
> 赞同：0
> 
> 时间：2013-01-12T15:21:17.247
> 
> 标签：iphone, xcode, cocoa-touch, ios6, uinavigationbar

我创建了两个视图，它们的转换由导航视图控制器控制。我有一个`UIView`包含一个`UISearchBar`. 然后`UIView`将其设置为第一个视图中的导航栏`titleView`。

现在，问题是，每当我从第一个视图转到第二个视图时，我都可以看到`UISearchBar`淡入淡出背后的浅色背景。

我自己做了一些故障排除，发现背景属于`UISearchBar`而不是`UIView`包含它。我也尝试了许多代码来使`UISearchBar`背景透明，但实际上没有一个代码使它透明。

![在此处输入图像描述](../Images/f80799467e151813df540506dc112c2c.png)

**编辑：**我做了更多的摆弄，发现淡入淡出的颜色是`UISearchBar`. 因此，如果我将色调更改为黑色，它会变暗。我认为可以解决此问题的唯一方法是将`UISearchBar`alpha 的背景设置为 0，但我找不到任何可以更改 a 中 a 的 alpha 的`UISearchBar`代码`UINavigationBar`。

**编辑：**我真的找不到任何代码将背景色调`UISearchBar`变为 alpha 0。有没有人有解决方法或替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:19:59.307

我意识到该栏实际上是范围栏的背景。我不确定为什么即使我禁用它它仍然出现。我的解决方案是将背景图像设置为透明图像。

```
[self.searchBar setScopeBarBackgroundImage:[UIImage imageNamed:@"transpixel.png"]]; 
```

# http - HTTP/1.1 领域中实体的年龄是多少

> ID：14294727
> 
> 赞同：1
> 
> 时间：2013-01-12T15:21:43.867
> 
> 标签：http, cache-control, if-modified-since

我已经为这个问题苦苦挣扎了好几天。

存储在缓存中的对象的年龄是多少。特别是，我想知道 Cloud Front。如果我指定

> 缓存控制：max-age=60，公共

当我在 T = N 上传它，然后 10 分钟过去了，我的实体的官方年龄是 600 秒吗？换句话说，一个实体的年龄是现在 - T 吗？

例如，如果我将一个过期日期为 30 分钟的文件推送到 S3，然后我在 1 周内不推送它的新版本，Cloud Front 是否会重新验证（GET If-Modified-Since）该实体每个请求？或者它会每 30 分钟重新验证一次实体，并在每次重新验证后将年龄设置回 0？

我在这里寻找年龄的定义，但我不太确定答案是什么：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:27:12.800

该`max-age`指令指定时间（以秒为单位），在此之后客户端应认为给定 URL 的内容无效。

这意味着如果您的 max-age 为 10 分钟，则在 t 时刻获取资源，然后如果您需要 t + 9 分钟的内容，则不会获取该内容。但它的到期日期在客户端保持不变。

这意味着在 t + 10 分钟后的任何时刻，将再次获取内容，并重新计算其到期时间（因为它可能同时发生了变化）。

至少，客户*应该*是这样操作的。

max-age=0 相当于“总是再次获取该资源”。

# python - 模糊的无效语法味精，

> ID：14294732
> 
> 赞同：0
> 
> 时间：2013-01-12T15:22:19.743
> 
> 标签：python, syntax, printing

Python 3：来自“用 Python 发明游戏”的编码刽子手。语法 msg 说“无效语法”并突出显示打印功能。我认为问题在于刽子手单词列表和拆分方法。谢谢你的帮助。

```
import random
HANGMANPICS = ['''

  +---+
  |   |
      |
      |
      |
      |
      |
=========''', '''

  +---+
  |   |
  O   |
      |
      |
      |
      |
=========''', '''

  +---+
  |   |
  O   |
  |   |
      |
      |
      |
=========''', '''

  +---+
  |   |
  O   |
 /|   |
      |
      |
      |
=========''', '''

  +---+
  |   |
  O   |
 /|\  |
      |
      |
      |
 =========''', '''

  +---+
  |   |
  O   |
 /|\  |
 /    |
      |
      |
=========''', '''

  +---+
  |   |
  O   |
 /|\  |
 / \  |
      |
      |
=========''']

words = '''ant baboon badger bat bear beaver camel cat clam
cobra cougar coyote crow deer dog donkey duck eagle ferret
fox frog goat gooose hawk lion lizard llama mole monkey
moose mouse mule newt otter owl panda parrot pigeon python
rabbit ram rat raven rhino salmon seal shark sheep skunk
sloth snake spider stork swan tiger toad trout turkey
turtle weasel whale wolf wombat zebra'''.split()

def getRandomWord (wordList):
    wordIndex = random.randint(0, len(wordList) -1)
    return wordList[wordIndex]

def displayBoard (HANGMANPICS, missedLetters, correctLetters, secretWord):
    print(HANGMANPICS[len(missedLetters)]
    print()           #this print statement is highlighted w/invalid syntax msg

    print('Missed letters:', end=' ')
    for letter in missedLetters:
    print(letter, end=' ')
    print()

    blanks = '_' * len(secretWord)

for i in range(len(secretWord)):    #replaces blanks w/correctly guessed ltrs
    if secretWord[i] in correctLetters:
        blanks = blanks[:i] + secretWord[i] + blanks[i + 1:]

for letter in blanks:               #show secret word w/spaces between ltrs
    print(letter, end=' ')

print() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:23:06.603

您忘记了在刚才的那一行*之前*的右括号`print()`：

```
print(HANGMANPICS[len(missedLetters)]  # Note the missing `)` here 
```

当您在 Python 中遇到无法解释的语法错误时，请检查*前*一行；Python 期望在那里找到`print()`函数的更多参数，而下一行违反了这一期望。

# php - 使用 curl 和 php 时，firefox 加载了 3 次图像

> ID：14294733
> 
> 赞同：0
> 
> 时间：2013-01-12T15:22:20.190
> 
> 标签：php, firefox, caching, curl

当我通过 PHP 通过 curl 加载图像但在 Firefox 中打开它时，它通过检查缓存或其他内容向我显示图像已加载 3 次。

我正在使用篡改数据，我看到了下面显示的这个问题。

![篡改数据的输出](../Images/3d6e7d1e942327e1dd6f02eb63a607d7.png)

我试过使用`header('Cache-Control: no-cache, no-store, max-age=0, must-revalidate');`但没有解决方案。

此外，通过使用随机获取数据来强制下载图像并且没有缓存仍然无法正常工作。

# java - 在 Hibernate + Java 上性能较慢，但当我将 TOAD 与相同的本机 Oracle 查询一起使用时速度较快

> ID：14294735
> 
> 赞同：15
> 
> 时间：2013-01-12T15:22:21.460
> 
> 标签：java, oracle, hibernate

我检测到 Oracle 上的休眠和本机查询存在性能问题。当我在 TOAD 上执行带有多个参数的复杂 SQL 查询时，我会以毫秒为单位得到结果。但是，当我使用 Hibernate 执行相同的查询时，这个时间会大大增加（最多四秒甚至更多）。

我的 SQL 查询相当复杂，返回一个唯一值（因此，问题与安装类所需的时间无关），它包含多个格式为“:nameParameter”的参数。此查询存储在字符串中。例如，

```
String myNamedNativeQuery = "select count(*) from tables "+
                            "where column1 = :nameParameter1 "+ 
                            "and column2 = :nameParameter2";  
                            //actually my sentence is much more complex!! 
```

当我在 TOAD 上执行句子时，它会在几毫秒内解决。但是在 Hibernate 中使用这句话

```
SQLQuery query = session.createSQLQuery("myNamedNativeQuery");

query.setParameter(nameParameter1, value1);
query.setParameter(nameParameter2, value2);

query.uniqueResult(); 
```

需要几秒钟才能获得相同的结果。

我意识到，如果我直接在本机查询上替换参数，然后使用 Hibernate 执行语句，时间会大大减少。它会是这样的：

```
String strQuery = session.getNamedQuery("myNamedNativeQuery").getQueryString();

myNamedNativeQuery = myNamedNativeQuery.replace("nameParameter1", value1);
myNamedNativeQuery = myNamedNativeQuery.replace("nameParameter2", value2);

SQLQuery query = session.createSQLQuery("myNamedNativeQuery");
query.uniqueResult(); 
```

有谁知道发生了什么？？

提前致谢。

PS：Oracle版本是9i和Hibernate 3.2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T16:05:57.687

我认为这段代码发生了什么：

```
SQLQuery query = session.createSQLQuery("myNamedNativeQuery");
query.setParameter(nameParameter1, value1);
query.setParameter(nameParameter2, value2);
query.uniqueResult(); 
```

这是：

在第 1 行：根据命名参数的一些预期值创建查询计划。

在第 4 行：使用 value1 和 value2 执行查询，但这些值不是第 1 行详细说明的查询计划的“好值”，因此，数据库正在为实际值执行一个非常不合适的计划，它需要很多时间。

**为什么 ？**

查看源代码`HibernateSessionImpl.createSQLQuery(...)`我发现了这行代码：

```
SQLQueryImpl query = new SQLQueryImpl(
                sql,
                        this,
                        factory.getQueryPlanCache().getSQLParameterMetadata( sql )
        ); 
```

这是`getQueryPlanCache()`用一些参数元数据调用的。我认为这个元数据还不够*好*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T22:39:35.967

我给你的答案是：

删除所有绑定参数并使用 StatelessSession 而不是 Session

使用 SQLQuery 而不是使用包含参数值的完整 SQL 进行查询

```
StatelessSession session = sessionFactory.openStatelessSession(); 
```

我有类似的问题，直到我得到更好的解决方案，这就是我设法使它工作的原因。请参阅 [Hibernate 参数化 sql 查询慢速和活动 oracle 会话](https://stackoverflow.com/q/32596761/1266286?stw=2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-11T16:22:53.563

`<property name = "hibernate.temp.use_jdbc_metadata_defaults">false</property>`

将此添加到您的 hibernate.cfg.xml 或更新您的应用程序属性文件。

# google-apps-script - 对话框和弹出窗口都显示为页面底部的 div

> ID：14294736
> 
> 赞同：0
> 
> 时间：2013-01-12T15:22:44.363
> 
> 标签：google-apps-script

GAS 对对话框和弹出窗口具有所有这些控件。我知道在 GWT 中它们工作得很好，但在 GAS 中，它们只是显示为 div，在页面底部周围有一个漂亮的蓝色边框。

我应该导入我不知道的样式表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T13:33:28.293

您可能正在代码中将它们添加到您的应用程序中。**不要这样做。** 只需创建对话框并根据需要调用 .show() 或 .hide() 即可。

# c# - 何时调用 CanExecute？

> ID：14294738
> 
> 赞同：35
> 
> 时间：2013-01-12T15:22:49.530
> 
> 标签：c#, .net, wpf

在演示中，我有一个按钮来切换 bool 字段`isAsking`。我创建了一个只能在`isAsking==true`.

一旦我按下 Toggle 按钮，`okButton.IsEnable`立即更改，这表明该命令找到了`isAsking`.

我感到很困惑，为什么命令对象会注意到一个字段的变化。什么时候`CanExecute`会调用？

虽然编写 WPF 应用程序有一段时间了，但我对 WPF 命令还是很陌生。请对此案例进行解释，如果可能，请指出一些相关的文章或博客（我已经阅读了太多关于剪切/粘贴命令的文章）。

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="WpfApplication1.MainWindow"
        Title="MainWindow" Height="350" Width="525" x:Name="mainWindow" >
    <StackPanel>
        <Button Name="okButton" Content="Ok" />
        <Button Content="Toggle"  Click="Button_Click_1"/>
    </StackPanel>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    private bool isAsking;

    public MainWindow()
    {
        InitializeComponent();

        CommandBinding cb = new CommandBinding();
        cb.Command = okCommand;
        cb.CanExecute += CanOKExecute;
        cb.Executed += cb_Executed;
        mainWindow.CommandBindings.Add(cb);
        okButton.Command = okCommand;
    }

    private RoutedCommand okCommand = new RoutedCommand("ok", typeof(MainWindow));

    void cb_Executed(object sender, ExecutedRoutedEventArgs e)
    {

    }

    void CanOKExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = isAsking;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        isAsking = !isAsking;
    }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-12T15:43:10.220

技术上的答案是`CanExecute`每当引发事件时都会调用[`CommandManager.RequerySuggested`](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.requerysuggested.aspx)它。根据文档，这将是...

> ...当 CommandManager 检测到可能改变命令执行能力的条件时。

实际上，这只是意味着您无需担心何时`CanExecute`调用：WPF 会在认为合适时调用它，而根据我的经验，这几乎总是能满足您的要求。

例外情况是，如果您有一个后台任务会导致`CanExecute`基于 UI 未触发的某些内容更改其返回值。在这种情况下，您可能需要手动强制 WPF 运行时重新查询`CanExecute`，您可以通过调用[`CommandManager.InvalidateRequerySuggested`](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.invalidaterequerysuggested.aspx)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-13T02:39:40.923

我尝试搜索“CommandManager 检测条件”并找到[这篇出色的文章](http://northhorizon.net/2012/better-commands-in-wpf/)。

通过查看.NET Framework源码，作者发现它`CommandManager`本身并没有检测到条件，而不是当`Keyboard.KeyUpEvent`, `Mouse.MouseUpEvent`, `Keyboard.GotKeyboardFocusEvent`, or`Keyboard.LostKeyboardFocusEvent`发生时，它会重新评估CanExecute方法。

这篇文章包括其他信息，但以上部分对我来说已经足够了。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-13T08:34:08.903

`RoutedCommand`包含一个`CanExecuteChanged`内部挂钩事件的`CommandManager.RequerySuggested`事件 -

```
 public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    } 
```

并`CommandManager.RequerySuggested`引发了事件

> 每当命令管理器检测到命令源的更改时，在您的情况下是 Window。因此，当单击按钮时，commandManager 会引发 RequerySuggested 事件并因此执行为您的命令注册的 CanExecute 谓词。

此外，CommandManager 有一个静态方法 -`InvalidateRequerySuggested`它强制 CommandManager 引发 RequerySuggestedEvent。因此，您也可以调用它来手动验证您的命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-15T04:55:39.897

默认情况下展开[评论](https://stackoverflow.com/questions/14294738/when-is-canexecute-called#comment19853612_14294916)

假设我们有以下

```
public class SomeClass : ViewModelBase {
   public ICommand ConnectButtonCommand { get; }
   public SomeClass(){
      //...
      ConnectButtonCommand = new DelegateCommand(ConnectButton_Click, ConnectButton_CanExecute);
      //...
   }
   public DoSomething(){
      //do something that affects the result of ConnectButton_CanExecute
      ((DelegateCommand)ConnectButtonCommand).RaiseCanExecuteChanged();
   }
   private void ConnectButton_Click() {/*...*/}
   private bool ConnectButton_CanExecute() {/*...*/}
} 
```

我正在开发一个将 Prism 用于 MVVM 的 UWP 应用程序。通用 Windows 平台与 WPF 非常相似。

# css - 元素不会移动

> ID：14294740
> 
> 赞同：0
> 
> 时间：2013-01-12T15:22:53.133
> 
> 标签：css, html

我在 div 中有一个元素，但在给出顶部边距时遇到了一些问题。

而不是移动div中的元素，我只能让它移动整个div。

这是我想给边缘顶部的紫色圆圈。

[http://jsfiddle.net/9J8R5/](http://jsfiddle.net/9J8R5/)

```
#step1 {
    width:100px;
    height:100px;
    border-radius:50px;
    background-color:#5020B8;
    left:0;
    right:0;
    margin-left:auto;
    margin-right:auto;
    top:1em;
    font-size:60px;
    color:#ffffff;
    font-family:Cusmyrb;
    line-height:105px;
    text-align:center;
    padding:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:31:01.537

For how the CSS box model works, check the [W3C](http://www.w3.org/TR/CSS2/box.html)

To fix your problem you have two options:

1.  use margin, as you mentioned, but add some content before the circle. E.g. [jsFiddle](http://jsfiddle.net/9J8R5/2/)
2.  use `padding-top` on `#completeinfo`, instead of `margin-top`. E.g. [jsFiddle](http://jsfiddle.net/9J8R5/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:34:44.817

由于边距折叠，边距顶部不会以您期望的方式出现在子元素上。

> 如果没有边框、内边距、内联内容或间隙将块的外边距顶部与其第一个子块的外边距顶部分开，或者没有边框、内边距、内联内容、高度、最小高度或最大-height 将块的边距底部与其最后一个子块的边距底部分开，然后这些边距折叠。折叠的边距最终在父级之外。

来源：[https ://developer.mozilla.org/en-US/docs/CSS/margin_collapsing](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

如果您真的希望 margin-top 存在于子元素上，这些添加中的任何一个都将为您完成：

```
#competeinfo {
    border: 1px solid transparent;
} 
```

[http://jsfiddle.net/9J8R5/5/](http://jsfiddle.net/9J8R5/5/)

或者

```
#competeinfo {
    overflow: hidden;
} 
```

[http://jsfiddle.net/9J8R5/6/](http://jsfiddle.net/9J8R5/6/)

否则，在父元素上填充可能是最好的选择。

# python - 如何注释掉 XML 使用元素树

> ID：14294743
> 
> 赞同：3
> 
> 时间：2013-01-12T15:23:16.363
> 
> 标签：python, xml, elementtree

我想注释掉这样的文字：

```
<name>cranberry</name> 
```

但是，我的脚本返回如下输出：

```
<!-- &lt;name&gt;cranberry&lt;/name&gt; --> 
```

我的脚本：

```
import xml.etree.ElementTree as ET
from xml.etree.ElementTree import Comment

tree = ET.parse(r"C:\sample.xml") 
root = tree.getroot() 
comment = ET.Comment("<name>cranberry</name>")
root.insert(0,comment)
tree.write(r"C:\sample1.xml") 
```

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:56:07.357

Python 2.6 中包含的较旧的 ElementTree 库确实会无条件地在注释中对数据进行 XML 转义：

```
$ python2.6 -c "from xml.etree import ElementTree as ET; print ET.tostring(ET.Comment('<'))"
<!-- &lt; --> 
```

你有几个选择：

*   升级到 Python 2.7；它正确处理评论序列化：

    ```
    $python2.7 -c "from xml.etree import ElementTree as ET; print ET.tostring(ET.Comment('<'))"
    <!--<--> 
    ```

*   安装外部[ElementTree](http://pypi.python.org/pypi/elementtree/)库。

*   使用 Minidom（不推荐，DOM API 过于冗长）：

    ```
    from xml.dom import minidom

    doc = minidom.parse(r"C:\sample.xml")

    comment = doc.createComment("<name>cranberry</name>")
    doc.documentElement.appendChild(comment)

    doc.writexml(r"C:\sample1.xml") 
    ```

# scala - 如何在基类中用可用的scala方法替换静态变量

> ID：14294748
> 
> 赞同：0
> 
> 时间：2013-01-12T15:23:30.117
> 
> 标签：scala, static, companion-object

我需要的：

```
trait Base {
  import scala.math.{Pi=>mPi, cos=>msoc, sin=>msin}
  static val Pi : Float = mPi.toFloat
  static def cos(phi : Float) : Float = mcos(phi).toFloat
  static def sin(phi : Float) : Float = msin(phi).toFloat
  // ...
  // some useful functions
}
// children use float defined pi, cos and sin without additional boilerplate
class Child1 extends Base
// ...
class Child2 extends Base 
```

那显然行不通。我试过的

```
trait Base {
  import Base._
  // some useful functions
}
object Base {
  // utility functions
  import scala.math.{Pi=>mPi, cos=>mcos, sin=>msin}
  val Pi : Float = mPi.toFloat
  def cos(phi : Float) : Float = mcos(phi).toFloat
  def sin(phi : Float) : Float = msin(phi).toFloat
}
class Child1 extends Base {
  // use sin and cos inside
} 
```

并且编译器会给出错误，`Child1`因为它对函数`sin`和`cos`.

如何在将由其后代继承的基类中定义静态成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:45:20.150

如何选择混合特征或从对象导入成员？

而且我认为后者更好。

```
trait MathUtils { 
  def cos(phi : Float) : Float = ...
}
class Child1 extends MathUtils { cos(1.0F) } 
```

或者

```
object MathUtils { 
  def cos(phi : Float) : Float = ...
}
class Child1 { 
  import MathUtils._
  cos(1.0F)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:32:22.133

你为什么要考虑静态？您需要做的就是创建一个没有参数列表的方法，该方法返回`Float`常量的形式。

正如您所发现的那样，无论好坏，类或特征范围中的导入都不是继承的。

```
package rrs.scribble

trait   FloatMath
{
  import scala.math.{Pi => mPi, cos => mcos, sin => msin}

  def Pi: Float = mPi.toFloat
  def cos(phi: Float): Float = mcos(phi).toFloat
  def sin(phi: Float): Float = msin(phi).toFloat
}

object  FM1
extends FloatMath
{
  val twoPi = 2.0f * Pi
} 
```

在 REPL 中：

```
scala> import rrs.scribble.FM1._
import rrs.scribble.FM1._

scala> twoPi
res0: Float = 6.2831855

scala> cos(twoPi)
res1: Float = 1.0 
```

如您所见， , , 等的静态`Pi`类型`twoPi`都是`cos`,`Float`不是`Double`.

# ruby - 如何在 ruby 中动态设置嵌套哈希？

> ID：14294751
> 
> 赞同：14
> 
> 时间：2013-01-12T15:23:38.357
> 
> 标签：ruby, hash, nested

假设我有一个嵌套哈希：

```
h = { 'one' =>
        {'two' =>
            {'three' => 'a'}
        }
     } 
```

我可以这样改变它：

```
h['one']['two']['three'] = 'b' 
```

如何以变量为键更改嵌套值？

假设我有以下变量：

```
key = "one.two.three" 
```

要动态访问它，我使用以下内容：

```
key.split('.').inject(h,:[]) 
```

但是当然这样设置是行不通的：

```
key.split('.').inject(h,:[]) = 'b' # fails 
```

那么如何动态设置嵌套哈希的值呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-12T15:28:10.973

`Hash#[]=`是一个单一的方法。您不能`Hash#[]`一直到最后一个键并`=`对其进行操作。相反，请忽略最后一个键并`Hash#[]=`单独对其进行操作。

```
*key, last = key.split(".")
key.inject(h, :fetch)[last] = "b" 
```

# c# - 在 Asp.Net 中使用简单选项卡时在回发后保留活动选项卡

> ID：14294754
> 
> 赞同：0
> 
> 时间：2013-01-12T15:23:48.040
> 
> 标签：c#, javascript, jquery, asp.net

我正在为 ASP.NET Web 应用程序使用[简单选项卡。](http://www.htmldrive.net/items/show/542/Simple-Tabs-w-CSS-jQuery.html)您可以在此处查看简单选项卡的 [演示](http://www.htmldrive.net/items/demo/542/Simple-Tabs-w-CSS-jQuery)。

即使在回发之后，我也想保留活动选项卡。

我尝试编写以下代码，但无法取得进展。

```
 $(document).ready(function () {
            debugger;
            //Default Action
            var activeTab;
            if (activeTab == undefined) { <-- Added by me but the variable activeTab is refreshing every time and is undefined for every post back.
                $(".tab_content").hide(); //Hide all content
                $("ul.tabs li:first").addClass("active").show(); //Activate first tab
                $(".tab_content:first").show(); //Show first tab content
            }
            //On Click Event
            $("ul.tabs li").click(function () {
                debugger;
                $("ul.tabs li").removeClass("active"); //Remove any "active" class
                $(this).addClass("active"); //Add "active" class to selected tab
                $(".tab_content").hide(); //Hide all tab content
                activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
                $(activeTab).fadeIn(); //Fade in the active content
                return false;
            });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:32:20.150

走了很多路之后。

在 asp.net 页面中使用以下隐藏字段。

```
<asp:HiddenField ID="hdnActiveTab" runat="server" Value="0" /> 
```

现在修改代码如下。

```
 $(document).ready(function () {
        //debugger;
        //Default Action
        var setActiveTab = $get("<%=hdnActiveTab.ClientID%>").value;
        if (setActiveTab == 0) {
            $(".tab_content").hide(); //Hide all content
            $("ul.tabs li:first").addClass("active").show(); //Activate first tab
            $(".tab_content:first").show(); //Show first tab content
        } else {$(".tab_content").hide(); 
            switch (setActiveTab) {
                case "#tab1":
                    $("ul.tabs li:eq(0)").addClass("active").show(); $(".tab_content:eq(0)").show();
                    break;
                case "#tab2":
                    $("ul.tabs li:eq(1)").addClass("active").show(); $(".tab_content:eq(1)").show();
                    break;
                case "#tab3":
                    $("ul.tabs li:eq(2)").addClass("active").show(); $(".tab_content:eq(2)").show();
                    break;
                case "#tab4":
                    $("ul.tabs li:eq(3)").addClass("active").show(); $(".tab_content:eq(3)").show();
                    break;
            }
        }
        //On Click Event
        $("ul.tabs li").click(function () {
            //debugger;
            $("ul.tabs li").removeClass("active"); //Remove any "active" class
            $(this).addClass("active"); //Add "active" class to selected tab
            $(".tab_content").hide(); //Hide all tab content
            var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
            $get("<%=hdnActiveTab.ClientID%>").value = activeTab; //Preserve Active Tab Even After PostBack
            $(activeTab).fadeIn(); //Fade in the active content
            return false;
        });

    }); 
```

# apache-flex - 如何在我的 TabbedViewNavigator 中选择一个选项卡？

> ID：14294768
> 
> 赞同：2
> 
> 时间：2013-01-12T15:26:02.273
> 
> 标签：apache-flex, select, mobile, swipe, tabbar

我给我的移动应用程序提供了两种导航方式，一方面是滑动（左/右）的方式，另一方面是底部的普通标签栏用手指“指向”。因此，当我添加滑动功能时，我意识到当我滑动到另一个页面时，栏不会更新它们的按钮 - 我正在寻找一些命令来选择我的滑动选项卡的特定按钮。

```
init():
        protected function init():void{
            this.addEventListener( TransformGestureEvent.GESTURE_SWIPE, handleSwipe );  
        }

handleSwipe():

        private function handleSwipe(event:TransformGestureEvent):void
        {
            var slideViewTransition:SlideViewTransition = new SlideViewTransition();    
            // Swipe was to the right
            if (event.offsetX == 1 ) {
                slideViewTransition.direction = ViewTransitionDirection.RIGHT;
                navigator.pushView( views.HomeView, null, null, slideViewTransition );
                play("swipeee");
            }
                // Swipe was to the left
            else if (event.offsetX == -1 ) {
                slideViewTransition.direction = ViewTransitionDirection.LEFT;
                navigator.pushView( views.HomeView, null, null, slideViewTransition );
                play("swipeee");
            }
        } 
```

我想我必须从我的 tabbedViewNavigator MainClass 中获取数据......但我不知道如何

# java - 将二进制字符串分成几个两个字符？

> ID：14294771
> 
> 赞同：1
> 
> 时间：2013-01-12T15:26:36.853
> 
> 标签：java, substring

我有一个像`"100010"`. 我想把它分成几个两个字符，比如 -> `"10"`, `"00"`, `"10"`。

我该怎么做？不幸的是，我对此一无所知。

```
String str = "100010";  
int counter=0,end=1;  

for (int h = 0; h < str.length(); h++) {
     String ss = str.substring(counter, end);
     System.out.print(ss);
     counter = counter + 2;
     end = end + 2;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:44:10.017

由于您想拆分每 2 个字符，因此您需要保持 和 之间的`counter`差异`end`等于`2`. 该变量`h`是多余的，实际上会导致`StringIndexOutOfBoundsException`：

```
String str = "100010"; 
int counter = 0;
int end = 2;

while (end <= str.length()) {

   String ss = str.substring(counter, end);
   System.out.println(ss);

   counter += 2;
   end += 2;
} 
```

或者，您可以对每 2 个字符进行一次正则表达式拆分。这使用正则表达式look-behind结合`\G`，零宽度断言匹配上一个匹配结束的位置：

```
for (String s: "100010".split("(?<=\\G..)")) { System.out.println(s);  } 
```

两个版本都产生：

```
10
00
10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T14:28:26.207

```
private String[] StringSpliter(String OriginalString) {
    String newString = "";
    for (String s: OriginalString.split("(?<=\\G..)")) { 
        if(s.length()<3)
            newString += s +"/";
        else
            newString += StringSpliter(s) ;
    }
    return newString.split("/");
} 
```

# c - 单线程模式下的并行合并非常慢

> ID：14294773
> 
> 赞同：0
> 
> 时间：2013-01-12T15:26:52.677
> 
> 标签：c, algorithm, merge, parallel-processing

我有两组已排序的元素，并希望以某种方式将它们合并在一起，以便稍后将其并行化。我有一个简单的合并实现，它具有数据依赖性，因为它使用最大函数和可并行化合并的第一个版本，它使用二进制搜索来查找排名并计算给定值的索引。

getRank 函数返回小于或等于给定针的元素数。

```
#define ATYPE int

int getRank(ATYPE needle, ATYPE *haystack, int size) {
    int low = 0, mid;
    int high = size - 1;
    int cmp;
    ATYPE midVal;

    while (low <= high) {
        mid = ((unsigned int) (low + high)) >> 1;
        midVal = haystack[mid];
        cmp = midVal - needle;

        if (cmp < 0) {
            low = mid + 1;
        } else if (cmp > 0) {
            high = mid - 1;
        } else {
            return mid; // key found
        }
    }

    return low; // key not found
} 
```

合并算法对两个排序集 a、b 进行操作，并将结果存储到 c 中。

```
void simpleMerge(ATYPE *a, int n, ATYPE *b, int m, ATYPE *c) {
    int i, l = 0, r = 0;

    for (i = 0; i < n + m; i++) {
        if (l < n && (r == m || max(a[l], b[r]) == b[r])) {
            c[i] = a[l];
            l++;
        } else {
            c[i] = b[r];
            r++;
        }
    }
}

void merge(ATYPE *a, int n, ATYPE *b, int m, ATYPE *c) {
    int i;
    for (i = 0; i < n; i++) {
        c[i + getRank(a[i], b, m)] = a[i];
    }
    for (i = 0; i < m; i++) {
        c[i + getRank(b[i], a, n)] = b[i];
    }
} 
```

当有很多元素时合并操作很慢并且仍然可以并行化，但是 simpleMerge 总是更快，即使它不能并行化。

所以我现在的问题是，你知道并行合并的更好方法吗？如果是，你能给我指出一个方向还是我的代码很糟糕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:54:46.867

合并函数使用的算法最好通过渐近分析。复杂度为 O(n+m)。你找不到更好的算法，因为 I/O 需要 O(n+m)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:04:12.803

功能复杂度`simpleMerge`：

`O(n + m)`

功能复杂度`merge`：

`O(n*logm + m*logn)`

在没有过多考虑这一点的情况下，我对并行化它的建议是在每个函数的中间找到一个值，使用类似于 getRank 函数的东西，并从那里使用简单的合并。这可以是`O(n + m + log m + log n) = O(n + m)`（即使你做了一些，但不断的查找以找到中间的值）。

# url - CakePHP-为控制器制定 URL 路由规则

> ID：14294774
> 
> 赞同：0
> 
> 时间：2013-01-12T15:27:00.810
> 
> 标签：url, cakephp, routing

我创建了一个控制器“企业”和操作方法调用“show_details”

```
function show_details($id = null,$title = null){
         $this->set('Business', $this->Businesses->findById($id));
         $this->render('Business');
    } 
```

当前的 url 将是`http://127.0.0.1:8080/caketest/businesses/show_details/1/Hattion_National_Bank_Plc`.

但我需要将 Url 显示为`http://127.0.0.1:8080/caketest/Hattion_National_Bank_Plc` 我该怎么做？routes.php 中的 URL 路由规则是什么。

我是 cakePHP 的新手，所以我尝试这样做，但失败了。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:07:25.953

将此添加到您的`config/routes.php`并尝试在没有方法名称的情况下点击 url。

```
Router::connect('/businesses/*', array('controller' => 'businesses', 'action' => 'show_details')); 
```

# iolanguage - 如何在io语言中传递一个方法但不激活它

> ID：14294780
> 
> 赞同：1
> 
> 时间：2013-01-12T15:27:29.260
> 
> 标签：iolanguage

我想实现一个方法 dim(x,y) 为矩阵（y 行，x 列）分配空间。

我想通过传递一个可选函数'filler'来使“dim（x，y）”更强大，然后'dim'会将位于（x，y）的元素设置为filler（x，y）

我的代码如下：

```
List2D dim := method(x, y, z,
    target := list()
    filler := if(z == nil, 
        method(return nil),
        z)
    for(i, 1, y, 
        subTarget := list()
        for(j, 1, x,
            subTarget append( filler(i,j) ))
            target append(subTarget) )
    return target) 
```

当使用 2 个参数调用“dim”时它运行良好，但失败了

`List2D dim(3,2, method(x,y, 10*x+y))`

在行`filler := if(z == nil` 抛出异常异常说`nil does not respond to '*'`

我意识到当与 nil 比较时，参数“z”被激活了。

所以我想知道如何让我的“List2D dim”正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T15:51:06.607

好吧，基本上，你会想要这样的东西：

```
List2D dim := method(x, y,
    target := list
    blk := call evalArgAt(2) # Get the third argument, and evaluate it in the context of the sender
    if(blk isNil, blk := block setScope(call sender))

    for(i, 1, y,
        subTarget := list
        for(j, 1, x,
            subTarget append(blk call(i, j))
            target append(subTarget)
        )
    )
    target
) 
```

基本上，这里发生的事情是因为你的填充物，你想给它参数，最简单的方法就是传入一个`Block`. `Block`您可以使用消息来执行此操作，但实际上，如果您引入了一个新的范围，那么您最终会设置自己的副本，这是您应该这样做的。如果第三个参数计算为`nil`，然后我们将创建一个新函数并将其范围设置为调用上下文；就好像用户传入了一个没有参数的空函数一样，因此，即使它没有定义任何参数，您也可以将参数传递给它。事实上，我们并不真正需要将其范围限定为调用者，但如果您在方法调用中创建块，则应始终将块的范围限定为调用上下文。这将允许访问该块内调用上下文的词法范围；您可能正在推送用户在其中提供的一些消息。准备好后，只需使用该方法显式调用该`call`方法。

如果您的`filler`方法不需要任何参数，我只需在第二个索引处获取原始消息参数，而不是对其进行评估。这将对一些大型矩阵产生一些重大的性能改进。

# javascript - jQuery.extend 和 jQuery.fn.extend

> ID：14294782
> 
> 赞同：2
> 
> 时间：2013-01-12T15:27:37.900
> 
> 标签：javascript, jquery

我正在做一些测试，`extend`在我做了一些观察后我有点困惑。初步观察：

```
console.log($.extend === $.fn.extend); // trure
// and since $ === jQuery then ...
console.log(jQuery.extend === jQuery.fn.extend); // true 
```

到目前为止一切都很好，不是吗？鉴于上述结果，我认为这样做：

```
// SNIPPET 1
$.extend({
   log: function(m) {
      console.log(m);
   }
}); 
```

还有这个：

```
// SNIPPET 2
$.fn.extend({
   log: function(m) {
      console.log(m);
   }
}); 
```

是一回事。但事实上，事情的发展方式非常不同。实际上，如果您运行 SNIPPET 1 然后执行以下操作：

```
$("body").log("whatever"); 
```

你得到一个错误（日志没有定义）。但你可以这样做：

```
$.log("whatever"); 
```

如果你改为运行 SNIPPET 2 你会得到相反的结果，也就是说：

```
$("body").log("whatever"); // this will work
$.log("whatever"); // this won't 
```

有没有搞错？`.extend`我很欣赏扩展执行它的对象（`$`vs ）的事实，`$.prototype`但我没有得到的是它是如何做到的！特别是考虑到以下事实：

```
$.extend === $.fn.extend // true 
```

功能是一样的！！它如何产生两种不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:44:35.667

里面的功能`this`会有所不同。在第一种情况下它将是`$`，在第二种情况下`$.fn`。

看看[源代码](https://github.com/jquery/jquery/blob/1.8-stable/src/core.js#L277)：

```
jQuery.extend = jQuery.fn.extend = function() {
    var options, name, src, copy, copyIsArray, clone,
        target = arguments[0] || {},
        i = 1,
        length = arguments.length,
        deep = false;

    // ...

    // extend jQuery itself if only one argument is passed
    if ( length === i ) {
        target = this;
         --i;
    }

    // ...
}; 
```

[了解更多关于`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this).

# ios - 访问另一个视图控制器

> ID：14294790
> 
> 赞同：2
> 
> 时间：2013-01-12T15:28:30.020
> 
> 标签：ios, cocoa-touch, uikit, viewcontroller

我正在尝试从另一个视图控制器（iOS）访问一些东西。

我有我的 ViewController.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITextFieldDelegate> {
    ...
}

@end 
```

视图控制器.m：

```
#import "ViewController.h"
#import "ViewController2.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
   ViewController2.someVar = @"cakes"; // this is where I'm trying to set something in vc2
} 
```

ViewController2.h：

```
#import <UIKit/UIKit.h>

@interface ViewController2 : UIViewController <UITableViewDataSource, UITableViewDelegate, UISearchDisplayDelegate>
{
   ...
}

@property (nonatomic, copy) NSString *someVar;

@end 
```

ViewController2.m：

```
#import "ViewController2.h"

@interface ViewController2 ()

@end

@implementation ViewController2

@synthesize someVar;

etc. 
```

但是在我尝试访问这个 var 的那一行，它给了我以下错误：

在“ViewController2”类型的对象上找不到属性“someVar”。

我将以什么方式访问这个其他视图控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:34:17.313

您必须`ViewControlle2`在`Viewcontroller.m`.

```
ViewController2 *myVC2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
myVC2.someVar = @"cakes"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T21:51:09.733

另一种方法是使用委托。如果您在 AppDelegate 中创建了 ViewController1，您还应该在 AppDelegate 中创建 ViewController2，或者在您创建 ViewController 的任何地方创建。然后您 ViewController1 将向 AppDelegate 发送一条消息以从 ViewController2 获取数据，反之亦然。这使得 ViewController1 和 ViewController2 不再相互依赖。

所以在 AppDelegate.h 我们会有这样的东西

```
@interface AppDelegate : NSObject <MyViewControllerDelegate>

@property (nonatomic) ViewController1 *viewController1;
@property (nonatomic) ViewController2 *viewController2;

@end 
```

然后在两个视图控制器中，您可以在 .h 中添加这一行

```
@property (nonatomic) id<MyViewControllerDelegate> delegate; 
```

这只是为我们提供了一个变量，用于从 ViewController 的 .m 中引用委托

您还需要创建 MyViewControllerDelegate 协议，因此在一个名为 MyViewControllerDelegate.h 的文件中

```
@protocol MyViewControllerDelegate

- (ViewController1 *) viewController1;

- (ViewControlelr2 *) viewController2;

@end 
```

然后，当您在 AppDelegate.m 中创建 ViewControllers 时，您还应该将 AppDelegate 设置为 ViewController 的委托。

```
self.viewController1 = [[ViewController1 alloc] init];
self.viewController1.delegate = self;
self.viewController2 = [[ViewController2 alloc] init];
self.viewController2.delegate = self; 
```

因此，完成所有这些委托设置后，您应该能够通过委托从 viewController1 访问 viewController2.someVar，方法是：

```
self.delegate.viewController2.someVar = @"Cakes"; 
```

希望这不会太啰嗦。

# ios - 如何将最新版本的通行证与旧版本进行比较以确定哪些字段已更改？

> ID：14294792
> 
> 赞同：2
> 
> 时间：2013-01-12T15:28:36.350
> 
> 标签：ios, passbook

Passbook[编程指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Updating.html#//apple_ref/doc/uid/TP40012195-CH5-SW66)说：

> 设备将通行证的最新版本与之前的版本进行比较，以确定哪些字段已更改。

我的问题是：在我自己的应用程序中，如何确定哪些字段发生了变化？通行证是否有诸如版本号之类的字段来指示相同通行证类型 ID 和序列号的通行证更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:39:29.683

也来自[Passbook Programming Guide](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Apps.html#//apple_ref/doc/uid/TP40012195-CH6-SW1)。

> 要在通行证库更改时接收通知，请注册 PKPassLibraryDidChangeNotification 通知。将 PKPassLibrary 的实例作为对象传递。pass 库不是单例的。每个实例都发送自己的通知，并且您需要来自此特定实例的通知。使用 addObserverForName:object:queue:usingBlock: 方法来指定您想要在主队列上响应并提供一个块来处理通知。通知的用户信息字典描述了更改的内容。或者，使用 dispatch_async 和 dispatch_get_main_queue 函数在主线程上响应。

没有版本号，但您可以检查 manifest.json 的内容或哈希。如果任何哈希值发生了变化，您将知道通行证已更改。

# java - ThreadLocal HashMap vs ConcurrentHashMap 用于线程安全的未绑定缓存

> ID：14294796
> 
> 赞同：9
> 
> 时间：2013-01-12T15:28:44.453
> 
> 标签：java, performance, caching, thread-local, concurrenthashmap

我正在创建一个具有以下特征的记忆缓存：

*   缓存未命中将导致计算和存储条目
    *   这种计算非常昂贵
    *   这个计算是幂等的
*   无界（条目从未被删除），因为：
    *   输入将导致最多 500 个条目
    *   每个存储的条目都非常小
    *   缓存的寿命相对较短（通常不到一个小时）
    *   总的来说，内存使用不是问题
*   将有数千次读取 - 在缓存的生命周期内，我预计 99.9%+ 的缓存命中率
*   *必须是线程安全的*

什么会具有卓越的性能，或者在什么条件下一种解决方案比另一种更受青睐？

线程本地哈希映射：

```
class MyCache {
    private static class LocalMyCache {
        final Map<K,V> map = new HashMap<K,V>();

        V get(K key) {
            V val = map.get(key);
            if (val == null) {
                val = computeVal(key);
                map.put(key, val);
            }
            return val;
        }
    }

    private final ThreadLocal<LocalMyCache> localCaches = new ThreadLocal<LocalMyCache>() {
        protected LocalMyCache initialValue() {
            return new LocalMyCache();
        }
    };

    public V get(K key) {
        return localCaches.get().get(key);
    }
} 
```

并发哈希映射：

```
class MyCache {
    private final ConcurrentHashMap<K,V> map = new ConcurrentHashMap<K,V>();

    public V get(K key) {
        V val = map.get(key);
        if (val == null) {
            val = computeVal(key);
            map.put(key, val);
        }
        return val;
    }
} 
```

我认为如果有很多线程，因为每个线程的所有缓存未命中，ThreadLocal 解决方案最初会更慢，但是在数千次读取之后，摊销成本将低于 ConcurrentHashMap 解决方案。我的直觉正确吗？

还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:37:09.940

使用 ThreadLocal 作为缓存不是一个好习惯

在大多数容器中，线程通过线程池重用，因此永远不会被 gc。这会导致一些有线的东西

使用 ConcurrentHashMap 你必须管理它以防止内存泄漏

如果你坚持，我建议在丰富的 maxsize 之后使用 week 或 soft ref 和 evict

如果您正在寻找内存缓存解决方案（不要重新发明轮子）尝试番石榴缓存 [http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T15:49:36.157

> 这种计算非常昂贵

我认为这是您创建缓存的原因，这应该是您最关心的问题。

虽然解决方案的速度可能略有不同 << 100 ns，但我怀疑能够在线程之间共享结果更为重要。即 ConcurrentHashMap 可能是最适合您的应用程序的，因为从长远来看，它可能会为您节省更多的 CPU 时间。

简而言之，与多次计算同一事物的成本（对于多个线程）相比，您的解决方案的速度可能很小

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T17:12:09.480

请注意，您的 ConcurrentHashMap 实现不是线程安全的，并且可能导致一个项目被计算两次。如果您直接存储结果而不使用显式锁定，那么要正确处理它实际上是相当复杂的，如果性能是一个问题，您当然希望避免这种情况。

值得注意的是，ConcurrentHashMap 具有高度可扩展性，并且在高争用情况下运行良好。我不知道 ThreadLocal 是否会表现得更好。

除了使用库之外，您还可以从[Java 并发实践清单 5.19 中](http://www.javaconcurrencyinpractice.com/listings/Memoizer.java)获得一些灵感。这个想法是将 a 保存`Future<V>`在您的地图中，而不是 a `V`。这有助于使整个方法线程安全，同时保持高效（无锁）。我粘贴下面的实现以供参考，但本章值得一读，以了解每个细节都很重要。

```
public interface Computable<K, V> {

    V compute(K arg) throws InterruptedException;
}

public class Memoizer<K, V> implements Computable<K, V> {

    private final ConcurrentMap<K, Future<V>> cache = new ConcurrentHashMap<K, Future<V>>();
    private final Computable<K, V> c;

    public Memoizer(Computable<K, V> c) {
        this.c = c;
    }

    public V compute(final K arg) throws InterruptedException {
        while (true) {
            Future<V> f = cache.get(arg);
            if (f == null) {
                Callable<V> eval = new Callable<V>() {
                    public V call() throws InterruptedException {
                        return c.compute(arg);
                    }
                };
                FutureTask<V> ft = new FutureTask<V>(eval);
                f = cache.putIfAbsent(arg, ft);
                if (f == null) {
                    f = ft;
                    ft.run();
                }
            }
            try {
                return f.get();
            } catch (CancellationException e) {
                cache.remove(arg, f);
            } catch (ExecutionException e) {
                throw new RuntimeException(e.getCause());
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T00:18:35.670

性能问题无关紧要，因为解决方案并不相同。

ThreadLocal 哈希映射不在线程之间共享，因此甚至不会出现线程安全问题，但它也不符合您的规范，这并没有说明每个线程都有自己的缓存。

线程安全的要求意味着所有线程之间共享一个缓存，这完全排除了 ThreadLocal。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T15:42:07.640

鉴于实现这两种方法相对容易，我建议您同时尝试它们并*在稳态负载下*进行测试，看看哪一种性能最适合您的应用程序。

我的猜测是 the`ConcurrentHashMap`会快一点，因为它不必`Thread.currentThread()`像 a do 那样进行本机调用`ThreadLocal`。但是，这可能取决于您存储的对象以及它们的哈希编码的效率。

我可能也值得尝试将并发映射调整为`concurrencyLevel`您需要的线程数。默认为 16。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T16:32:39.613

两种解决方案的查找速度可能相似。如果没有其他问题，我更喜欢 ThreadLocal，因为多线程问题的最佳解决方案是单线程。

但是，您的主要问题是您不希望对同一个键进行并发计算；所以每把钥匙都应该有一把锁；这样的锁通常可以通过 ConcurrentHashMap 来实现。

所以我的解决方案是

```
class LazyValue
{
    K key;

    volatile V value;

    V getValue() {  lazy calculation, doubled-checked locking }
}

static ConcurrentHashMap<K, LazyValue> centralMap = ...;
static
{
    for every key
        centralMap.put( key, new LazyValue(key) );
}

static V lookup(K key)
{
    V value = localMap.get(key);
    if(value==null)
        localMap.put(key, value=centralMap.get(key).getValue())
    return value;
} 
```

# visual-studio - 在解决方案资源管理器中突出显示项目名称

> ID：14294797
> 
> 赞同：0
> 
> 时间：2013-01-12T15:28:51.897
> 
> 标签：visual-studio, visual-studio-2012

我的解决方案有 17 个项目。在它们之间导航时（通常所有项目都已扩展），我经常迷路。有没有办法在解决方案资源管理器中突出显示（标记）**所有**项目名称？

在文件之间导航不是问题——我正在使用 Resharper 的导航。

# c# - 对话框中的 MVC 3 部分视图不起作用

> ID：14294798
> 
> 赞同：0
> 
> 时间：2013-01-12T15:28:53.877
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

我有一个数据表网页，显示数据表中的用户列表。在用户页面上有一个按钮创建新用户。单击此按钮会启动一个模态 jQuery 对话框，供用户输入新用户的详细信息。有一个取消按钮，它只是关闭对话框，还有一个保存用户按钮，单击它会调用我的控制器中的 DoSaveUser 方法。我可以从调试中看到我进入了 DoSaveUser 方法，如果创建用户成功说用户已保存，该方法最后应该返回到 PartialView。但是，如果您输入详细信息，我的对话框不会被成功消息替换 - 即使用户正在创建 - 即 - 在我点击保存按钮之后 - 如果我随后取消对话框并刷新原始用户页面，我可以看到数据表用我的新用户更新。

UserList 页面上的代码（对话框中的字段不仅仅是名字，但已删除它们以使问题的代码更少）。因此，当单击 CreateUser 按钮时，我的 newUserDialog 就会启动。

```
<div id="newUserDialog">

@using (Html.BeginForm("DoSaveUser", "MyController", FormMethod.Post, new { id = "saveForm" }))
{

     <div id="resultContainer">
        <table class="ui-widget-content" style="width: 565px; margin-top: 10px;">
            <tr>
                <td style="width: 100px;">
                </td>
                <td class="label">
                    Forename :
                </td>
                <td class="value">
                    @Html.TextBoxFor(model => model.Forename, new { style = "width:150px" })
                </td>
            </tr>
        </table>
        <div class="ui-widget-content Rounded" style="width: 565px; margin-top: 10px; text-align: center;">
            <input id="Cancel" type="button" class="dialog-button" value="Cancel" style="margin: 5px" />
            <input id="DoSaveUser" type="submit" class="dialog-button" value="Save User" style="margin: 5px" />
        </div>
    </div>
} 
```

单击对话框上保存用户的 Javascript 代码 - 提交表单。

```
$(function () {
    $('#saveForm').submit(function () {

        var formData = $("#saveForm").serializeArray();

        $.ajax({
            url: this.action,
            type: this.method,
            data: formData,
            dataType: "json",
            success: function (result) {
                $('#resultContainer').html(result);
            }
        });
        return false;
    });
}); 
```

现在在我的控制器中的我的 DoSaveUser 方法中，我可以设置一个断点并点击并查看所有正确发送的相应字段的值 - 一旦我保存到数据库，这就是返回。

```
return PartialView("UserSuccess", model); 
```

这就是 cshtml 中包含的所有视图。请注意，我想要的是结果容器 Div，其中包含我的所有文本框字段和标签，这些字段和标签将被成功替换为用户创建。然后我需要在此页面上单击确定，单击该按钮将关闭对话框并刷新 UserList 页面并显示使用新用户更新的数据表。但是，当我单击保存时，文本框只停留在 Div 上，并且 Div 不会更改 - 但如果我随后取消对话框并刷新页面，我可以看到数据表已用我的新用户更新。有什么我想念的吗？（注意 - 我已将 jquery.unobtrusive-ajax.js 添加到我的 _Layout 页面）

```
@model MyProject.Models.UserModel
@{
    ViewBag.Title = "UserSuccess";
}
 <div id="resultContainer">
User Created Successfully
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:37:57.787

你确定你的初始 html 确实有一个`#resultContainer`div 吗？如果你不

```
$('#resultContainer').html(result); 
```

线不会匹配任何东西。另一方面，如果你这样做，你会得到重复的嵌套`#resultContainer`div，这也是一个错误（id 必须是唯一的）。

正确的做法是`div`在原始 html 中添加一个空：

```
<div id="resultContainer"></div> 
```

在您的视图中输出只是 要进入 div的*内容。*

```
@model MyProject.Models.UserModel
@{
    ViewBag.Title = "UserSuccess";
}
User Created Successfully 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:00:07.973

我不得不说你正在做的不是在 ASP.NET MVC 应用程序中使用对话框和局部视图的好方法。我可以给你一些简单的代码来展示一个想法：

如果 list.cshtml 是用户页面列表，而 edit.cshtml 是包含编辑表单的部分视图。

在列表页面上：

```
$(".grid-row .edit").click(function(){
    editUser($(this).attr("data-id"));
});
function editUser(id){
  var $dialog=$("#dialogEditUser");
  if($dialog.length == 0){
    $dialog=$("<div id='dialogEditUser'>").appendTo("body");
  }
  $dialog.dialog({
    ...
    open:function(){
        $dialog.load("/user/edit/"+id, function(){
            //todo: handle form events
        });
      }
  });
  $dialog.dialog("open");
} 
```

您还可以在静态方法中创建打开对话框功能，例如：

```
MvcSolution.Dialog = function (id, title, options) {
  var $dialog = $("#" + id);
  if ($dialog.length == 0) {
    $dialog = $("<div id='" + id + "' class='dialog' title='" + title + "'></div>").appendTo("body");
  }
  $dialog.dialog(options);
  $dialog.dialog("open");
}; 
```

[你可以在这里](https://mvcsolution.codeplex.com)找到一个好的 MVC 的 c# 和 js 框架

# c# - webbrowser control - 释放应用程序的资源

> ID：14294799
> 
> 赞同：2
> 
> 时间：2013-01-12T15:28:56.430
> 
> 标签：c#, .net

我的问题是我创建了一个简单的应用程序，其中我有 webbrowser 控件。它每 20 秒导航到一个新站点。在应用程序占用的一些导航内存增加之后。我尝试处理、删除并重新创建 webrouser 控件，但未能成功。释放应用程序所有资源的唯一方法是重新启动它。我花了很多精力试图解决这个问题。请给我一些提示或链接，我可以在其中阅读。提前致谢。

实际的代码比演示的要大得多，但想法是一样的。代码如下所示：

```
for (int i = 0; i < 100000; i++)
{
    webBrowser1.Navigate("http://stackoverflow.com");
    Wait(20000);
} 
```

方法定义：

```
private void Wait(long value)
{
    Stopwatch sw = new Stopwatch();
    sw.Start();

    while (sw.ElapsedMilliseconds < value)
        Application.DoEvents();
} 
```

现在问题并不实际，因为解决方案是通过使用另一个名为 WebKitBrowser 的浏览器控件找到的。感谢所有试图帮助我的人。这是我在这个精彩网站上的第一个问题。我很喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:08:02.177

问题仍然存在。我尝试使用下面链接中显示的方法，但没有成功。[如何修复 IE WebBrowser 控件中的内存泄漏？](https://stackoverflow.com/questions/904478/how-to-fix-the-memory-leak-in-ie-webbrowser-control)

它会暂时减少内存，然后再次显着增加。如此循环。这是修改后的代码：

```
 public partial class Form1 : Form
   {

       [DllImport("KERNEL32.DLL", EntryPoint = "SetProcessWorkingSetSize", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
       internal static extern bool SetProcessWorkingSetSize(IntPtr pProcess, int dwMinimumWorkingSetSize, int dwMaximumWorkingSetSize);

       [DllImport("KERNEL32.DLL", EntryPoint = "GetCurrentProcess", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
       internal static extern IntPtr GetCurrentProcess();

      private void button1_Click(object sender, EventArgs e)
        {

           for (int i = 0; i < 100000; i++)
              {
                 webBrowser1.Navigate("http://stackoverflow.com");
                 while (webBrowser1.ReadyState != WebBrowserReadyState.Complete) Application.DoEvents();

                // anytime when I want to reduce the occupied memory I do this
                IntPtr pHandle = GetCurrentProcess();
                SetProcessWorkingSetSize(pHandle, -1, -1);
              }
        }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:56:24.650

您正在阻止您的主 UI 线程消息循环并使用`Application.DoEvents`，这是邪恶的！

取而代之的是，您可以使用`System.Windows.Forms.Timer`这样的：

```
class Form1 : Form
{
  Timer _Timer;
  int _Index = 0;

  public Form1()
  {
    _Timer = new Timer { Enabled = true, Interval = 20000 };
    _Timer.Tick += ( s, e ) => TimerTick();
  }

  void TimerTick()
  {
     if ( _Index >= 100000 )
     {
       _Timer.Dispose();
       _Timer = null;
       return;
     }

     webBrowser.Navigate( ... );

     _Index++;
   } 
```

我猜这会解决你的问题。无论如何，这是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:29:51.500

我使用 WebKit 浏览器解决了这个问题。这里是那些也有兴趣使用它的人的链接：[http ://webkitdotnet.sourceforge.net/basics.php?p=4](http://webkitdotnet.sourceforge.net/basics.php?p=4)

# javascript - 当“about.blank”不适用时，在 windows.open 上的 Chrome 上设置页面标题

> ID：14294800
> 
> 赞同：0
> 
> 时间：2013-01-12T15:28:58.440
> 
> 标签：javascript, jquery, xml, google-chrome

我需要在 Chrome 的新窗口中显示 xml 字符串。而且我想为窗口设置一个标题。我发现[将 XML 文档（通过 ajax 调用获得）渲染到一个新的窗口](https://stackoverflow.com/questions/5581592/render-xml-document-obtained-through-ajax-call-to-a-new-window)解决方案。但我不知道如何为窗​​口设置标题。如果有任何解决方案？基本上这里是一个新的窗口创建代码部分：

```
var newWindow = window.open('data:text/xml; charset=utf-8,' + encodeURIComponent(document)); 
```

# java - Spring - 如何将 Web 应用程序引导到先前创建的 ApplicationContext

> ID：14294801
> 
> 赞同：1
> 
> 时间：2013-01-12T15:29:13.393
> 
> 标签：java, spring, servlets, spring-mvc, jboss

我有一个大量使用 spring 并打包为**.sar**存档的应用程序。

在应用程序部署时在托管 bean 中创建的 Spring 上下文：

```
AbstractRefreshableApplicationContext springContext = new ClassPathXmlApplicationContext(spring.xml); 
```

现在我需要向这个应用程序添加网络功能，所以我将它重新打包为**.ear**并将**.war**嵌入其中。

一些 servlet 注册在`web.xml`：

```
<servlet>
    <servlet-name>myServlet</servlet-name>
    <servlet-class>me.myself.MyServlet</servlet-class>
  </servlet> 
```

我如何将 springContext 中的 bean 自动装配到`MyServlet`？

# haskell - 使用 QuickCheck 在随机参数处评估函数

> ID：14294802
> 
> 赞同：2
> 
> 时间：2013-01-12T15:29:24.850
> 
> 标签：haskell, quickcheck

我正在尝试使用 quickcheck 来生成给定函数的随机参数（假设它的所有类型都有 Arbitrary 实例和 Show 实例）以及在这些参数处对函数的评估。我只需要打印参数的值并在之后评估答案。所以我期望一个具有以下类型的函数

```
randomEvaluate :: Testable a => a -> IO ( [String] -- arguments
                                        , String ) -- Answer after evaluating
                                                   -- IO is just needed to get a new random number generator. If I pass a generator then I think probably I will not need IO here. 
```

我仍然不确定这里的类型，但我认为`Testable a`可以。我仍然无法真正得到我需要的东西。`Rose`我对快速检查数据类型等的混乱感到困惑`Result`。

更新

假设我有一个功能

```
add :: Int -> Int -> Int
add a b = a+b 
```

然后我假设一个行为像

```
> randomEvaluate add
(["1","3"],"4") 
```

其中 1 和 3 是为 生成的随机值，`Int`而 4 是`f 1 3`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T16:10:09.593

我认为除了模块`Test.QuickCheck.Arbitrary`和`Test.QuickCheck.Gen`.

## 只有一个参数

下面是一些简单的代码，它只提供了一个参数的函数所需的内容：

```
import Test.QuickCheck.Arbitrary
import Test.QuickCheck.Gen
import System.Random

randomEvaluate :: (Arbitrary a, Show a, Show b) => (a -> b) -> IO (String, String)
randomEvaluate f = do
    stdGen <- newStdGen
    let x = unGen arbitrary stdGen 1000
    let y = f x
    return (show x, show y) 
```

在这里你可以看到它的实际效果：

```
*Main> randomEvaluate (\(a,b) -> a + b)
("(-292,-655)","-947")
*Main> randomEvaluate (\(a,b) -> a + b)
("(586,-905)","-319")
*Main> randomEvaluate (\(a,b) -> a + b)
("(547,-72)","475") 
```

如您所见，如果您对它进行 uncurry，则可以将它与具有多个参数的函数一起使用。如果这还不够的话，事情会变得有点困难，但应该可以通过一些类型类技巧来实现。

## 多个参数，显式标记的返回类型

这是一种需要“仅”将函数的返回值包装在新类型中的方法。（使用非 Haskell98 功能可能可以避免这种情况）：

```
class RandEval a where
    randomEvaluate :: StdGen -> a -> ([String], String)

newtype Ret a = Ret a

instance Show a => RandEval (Ret a)  where
    randomEvaluate _ (Ret x) = ([], show x)

instance (Show a, Arbitrary a, RandEval b) => RandEval (a -> b) where
    randomEvaluate stdGen f = (show x : args, ret)
        where (stdGen1, stdGen2) = split stdGen
              x = unGen arbitrary stdGen1 1000
              (args, ret) = randomEvaluate stdGen2 (f x) 

doRandomEvaluate :: RandEval a => a -> IO ([String], String)
doRandomEvaluate f = do
    stdGen <- newStdGen
    return $ randomEvaluate stdGen f 
```

在这里查看它的实际效果：

```
*Main> doRandomEvaluate (\a b -> Ret (a && b))
(["False","True"],"False")
*Main> doRandomEvaluate (\a b -> Ret (a + b))
(["944","758"],"1702")
*Main> doRandomEvaluate (\a b c -> Ret (a + b + c))
(["-274","413","865"],"1004")
*Main> doRandomEvaluate (\a b c d -> Ret (a + b + c + d))
(["-61","-503","-704","-877"],"-2145") 
```

## 带有语言扩展的多个参数

如果还不需要显式标记返回值，这可行，但使用语言扩展：

```
{-# LANGUAGE FlexibleInstances, UndecidableInstances, OverlappingInstances #-}

import Test.QuickCheck.Arbitrary
import Test.QuickCheck.Gen
import System.Random
import Control.Arrow

class RandEval a where
    randomEvaluate :: StdGen -> a -> ([String], String)

instance (Show a, Arbitrary a, RandEval b) => RandEval (a -> b) where
    randomEvaluate stdGen f = first (show x:) $ randomEvaluate stdGen2 (f x) 
        where (stdGen1, stdGen2) = split stdGen
              x = unGen arbitrary stdGen1 1000

instance Show a => RandEval a where
    randomEvaluate _ x = ([], show x)

doRandomEvaluate :: RandEval a => a -> IO ([String], String)
doRandomEvaluate f = do
    stdGen <- newStdGen
    return $ randomEvaluate stdGen f 
```

这是帖子中的原始用例：

```
*Main> doRandomEvaluate ( (+) :: Int -> Int -> Int )
(["-5998437593420471249","339001240294599646"],"-5659436353125871603") 
```

但现在您对 GHC 如何解决重叠实例一时心血来潮。例如，即使使用这个不错的（但也不是 Haskell98）实例来显示布尔函数：

```
type BoolFun a = Bool -> a

instance Show a => Show (BoolFun a) where
    show f = "True -> " ++ show (f True) ++ ", False -> " ++ show (f False)

aBoolFun :: Bool -> BoolFun Bool
aBoolFun x y = x && y 
```

您看不到此实例在使用中`doRandomEvaluate`：

```
*Main> doRandomEvaluate aBoolFun 
    (["False","False"],"False") 
```

使用原始解决方案，您可以：

```
*Main> doRandomEvaluate (Ret . aBoolFun)
(["False"],"True -> False, False -> False")
*Main> doRandomEvaluate (Ret . aBoolFun)
(["True"],"True -> True, False -> False") 
```

## 一个警告

但请注意，这是一个滑坡。对上面的代码做一个小改动，它在 GHC 7.6.1 中停止工作（但在 GHC 7.4.1 中仍然有效）：

```
instance (Show a, Arbitrary a, RandEval b) => RandEval (a -> b) where
    randomEvaluate stdGen f = (show x:args, ret)
        where (stdGen1, stdGen2) = split stdGen
              x = unGen arbitrary stdGen1 1000
              (args, ret) = randomEvaluate stdGen2 (f x) 
```

[SPJ 解释了](http://hackage.haskell.org/trac/ghc/ticket/7578#comment:1)为什么这不是一个真正的错误——对我来说这是一个明显的迹象，表明这种方法将类型类黑客技术推得太远了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T15:36:12.957

QuickCheck 非常简单：

```
Prelude> import Test.QuickCheck 
```

提供了一个简单的驱动函数：

```
Prelude Test.QuickCheck> :t quickCheck
quickCheck :: Testable prop => prop -> IO () 
```

所以定义一些在“可测试”中找到的类型：

```
Prelude Test.QuickCheck> let prop_commut a b = a + b == b + a
Prelude Test.QuickCheck> :t prop_commut
prop_commut :: (Eq a, Num a) => a -> a -> Bool 
```

并运行它：

```
Prelude Test.QuickCheck> quickCheck prop_commut 
+++ OK, passed 100 tests. 
```

如需更全面的治疗，[请参阅 RWH](http://book.realworldhaskell.org/read/testing-and-quality-assurance.html)

# c# - 避免竞争条件创建 StorageFolder

> ID：14294803
> 
> 赞同：2
> 
> 时间：2013-01-12T15:29:27.260
> 
> 标签：c#, windows-8, windows-store-apps

我正在对一个新的 Win8 Store 应用程序进行单元测试，并注意到我想要避免的竞争条件。所以我正在寻找一种方法来避免这种竞争条件。

我有一个类，在实例化时调用一个方法以确保它具有本地 StorageFolder。我的单元测试只是实例化对象并测试文件夹是否存在。有时文件夹不是，有时它是，所以我认为这是一个竞争条件，因为 CreateFolderAsync 是异步的（显然）。

```
public class Class1
{
    StorageFolder _localFolder = null;

    public Class1()
    {
        _localFolder = ApplicationData.Current.LocalFolder;
        _setUpStorageFolders();
    }

    public StorageFolder _LocalFolder
    {
        get
        {
            return _localFolder;
        }

    }

    async void _setUpStorageFolders()
    {
        try
        {
            _localFolder = await _localFolder.CreateFolderAsync("TestFolder", CreationCollisionOption.FailIfExists);

        }
        catch (Exception)
        {
            throw;
        }
    }
} 
```

我的单元测试如下所示：

```
 [TestMethod]
    public void _LocalFolder_Test()
    {
        Class1 ke = new Class1();

        // TODO: Fix Race Condition 
        StorageFolder folder = ke._LocalFolder;

        string folderName = folder.Name;

        Assert.IsTrue(folderName == "TestFolder");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:08:39.507

正如 Iboshuizen 建议的那样，我会同步执行此操作。这可以通过`async`、`task`和来完成`await`。有一个陷阱 - 无法在构造函数内部完成设置，`Class1`因为构造函数不支持 async/await。因为这个`SetUpStorageFolders`现在是公开的，并且是从测试方法中调用的。

```
public class Class1
{
    StorageFolder _localFolder = null;

    public Class1()
    {
        _localFolder = ApplicationData.Current.LocalFolder;
                // call to setup removed here because constructors
                // do not support async/ await keywords
    }

    public StorageFolder _LocalFolder
    {
        get
        {
            return _localFolder;
        }

    }

      // now public... (note Task return type)
    async public Task SetUpStorageFolders()
    {
        try
        {
            _localFolder = await _localFolder.CreateFolderAsync("TestFolder", CreationCollisionOption.FailIfExists);

        }
        catch (Exception)
        {
            throw;
        }
    }
} 
```

测试：

```
 // note the signature change here (async + Task)
 [TestMethod]
    async public Task _LocalFolder_Test()
    {
        Class1 ke = new Class1();
        // synchronous call to SetupStorageFolders - note the await
        await ke.SetUpStorageFolders();

        StorageFolder folder = ke._LocalFolder;

        string folderName = folder.Name;

        Assert.IsTrue(folderName == "TestFolder");
    } 
```

# magento - Java 中是否有类似 Magento 的电子商务平台？

> ID：14294805
> 
> 赞同：2
> 
> 时间：2013-01-12T15:29:52.497
> 
> 标签：magento, e-commerce

有谁知道类似于 Magento 的电子商务平台（在能力和复杂程度方面），但是用 Java 编写的？

# javascript - 如何使用原型设计来实现异常类

> ID：14294807
> 
> 赞同：1
> 
> 时间：2013-01-12T15:30:03.863
> 
> 标签：javascript, prototype

我正在尝试在 JavaScript 中创建一个 Exception 类，尽管我已经使用 JavaScript 很长时间了，但我在原型设计方面遇到了一点问题，但我从未真正正确使用过原型设计

所以这是我的代码，

```
// load the Object Prototype
Exception = Object;

Exception.prototype = new function () {
    // set defaults
    this.name = "Exception";
    this.message = "";
    this.level = "Unrecoverable";
    this.html = "No HTML provided";

    // code so that the console can get the name from this.name insted of using [object Object]
    this.getName = function(){
        return this.name;
    }

    // this is the exec of the object prototype the code that is executed when the new Exception call is made
    this.exec = function(msg, name, lvl, html){
        // create a return variable
        var ret;
        // check that msg is defined and is not empty
        if(typeof(msg) == "undefined" || msg == ""){
            throw new Exception("Can't throw exception without a msg");
        }

        // set up this Exception Object values
        this.name = (typeof(name) == "undefined")? this.name : name;
        this.level = (typeof(lvl) == "undefined")? this.level : lvl;
        this.message = msg;
        this.html = (typeof(this.html) == "undefined")? this.html : html;

        // delete the getName function so it does not get set though to the console
        delete this.getName;
        // save the Exception object to our return variable
        ret = this;
        // re add the getName object to the Exception Object so that it can be called from the console
        this.getName = function(){
            return this.name;
        }
        // return the saved Exception object without the getName method
        return ret;
    }
} 
```

但由于某种原因在控制台中它返回作为参数给出的字符串`msg`

这是我收到的控制台输出

```
throw new Exception("test");
test
    0: "t"
    1: "e"
    2: "s"
    3: "t"
    length: 4
    __proto__: String 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:21:59.537

从您的代码来看，我认为这是您想要做的：

```
Exception.prototype = new Error;
Exception.prototype.constructor = Exception;

function Exception(message, name, level, html) {
    if (typeof message !== "string")
        throw new Exception("Expected an error message.");

    this.message = message;
    this.name = name || "Exception";
    this.level = level || "Unrecoverable";
    this.html = html || "No HTML provided";
} 
```

有关更多信息，请参阅[MDN 文档](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Error "错误 - JavaScript |  MDN")。

**编辑：**如果您在原型继承方面遇到问题，那么我建议您花一些时间了解它：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:12:48.840

这是满足您要求的异常“类”的示例：

```
/*
  This is a constructor function. It creates a new Exception object.
  Use it with the 'new' keyword , e.g. var e = new Exception("Another error").
 */
function Exception( message, name, level, html ) {   

    if ( !message ) {
        throw 'No exceptions without a message!';
    }  

    /*
      These properties may have different values for each instance so set
      them here in the constructor rather than adding them to the prototype.
     */
    this.message = message;
    this.name = name || "Exception";
    this.level = level || "Unrecoverable"; 
    this.html = html || "No HTML provided"; 
 }

/*     
  Overwrite the toString method inherited from Object.prototype
  by adding a toString method that shows the name and message.
  This method is the same for each instance so add it to the
  prototype object instead of having to create and add it to
  'this' in the constructor every time an instance is created.
 */
Exception.prototype.toString = function () {
    return this.name + ': ' + this.message; 
} 
```

试试看

```
try {
    throw new Exception("test");
} catch (e) {
    console.log( e instanceof Exception);    // true
    console.log( e instanceof Error);        // false
    console.log( e );       
    // Exception {message: "test", name: "Exception", level: "Unrecoverable"...
}

throw new Exception("test");                 // Uncaught Exception: test 
```

除了向上面添加`toString`方法`Exception.prototype`之外，另一种确保对象的`toString`方法`Exception`返回它们`name`的方法`message`是从内置`Error`对象的原型继承。

```
Exception.prototype = Error.prototype; 
```

如果未在构造函数中设置对象，这也会使对象的默认`name`值为“错误” - 但在我们的情况下不需要这样做。`Exception``Exception`

这也意味着添加到的任何属性`Error.prototype`都将存在。

```
var e = new Exception("Another");   

Error.prototype.about = 'This is an Error';

console.log( e.about );                  // 'This is an Error'
console.log( e instanceof Exception);    // true
console.log( e instanceof Error);        // true 
```

或者，`Error.prototype`我们可以从`Error`Aadit M Shah 的回答中的实例继承，而不是继承。

```
Exception.prototype = new Error(); 
```

以创建一个新`Error`对象为代价，这避免了，因为它们现在不指向同一个对象，因此可能会出现更改`Exception.prototype`影响的潜在问题`Error.prototype`。更改`Error.prototype`仍然会影响`Exception.prototype`，因为它们是通过`Error`对象继承的。

似乎满足您需求的最简单方法可能是避免从`Error`对象继承或`Error.prototype`完全避免继承，并且只添加您自己的`toString`方法，`Exception.prototype`如第一个示例所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T06:52:35.187

首先解决OP“子类化”错误的原因；IE 有几个第三方 JavaScript 控制台。

我试过 Firebug lite，它会做你需要的。记录某些内容时，控制台中不再有 [object:Object] ：

[https://getfirebug.com/firebuglite](https://getfirebug.com/firebuglite)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T16:18:18.427

不得不编辑这个，因为我之前发布的一些信息不是真的或很有帮助。

我之前说过，JavaScript 没有私有方法或属性；这是不真实的。私有方法可以通过使用闭包来完成： [https](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures) ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures 根据文档，它会带来性能损失。

```
var Counter = (function() {
  var privateCounter = 0;
  function changeBy(val) {
    privateCounter += val;
  }
  return {
    increment: function() {
      changeBy(1);
    },
    decrement: function() {
      changeBy(-1);
    },
    value: function() {
      return privateCounter;
    }
  }  
})(); 
```

要“子类化”现有对象，您必须使用原型，因为 JavaScript 不是基于类的语言。这是一个暴露 JavaScript 中原型的缺点的示例。以下优秀文档没有提及或至少给出适当警告的是“子”对象共享“父”对象的延迟复制实例。更准确地说，如果两个对象具有相同的原型（共享相同的父对象），它们共享该父对象属性的相同实例。 [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model) 那里的一些示例代码：

```
function Employee () {
  this.name = "";
  this.dept = "general";
  this.objectVal=[];
}
function Manager () {
  this.reports = [];
}
Manager.prototype = new Employee;

var bob=new Manager();
bob.name="bob";
bob.objectVal.push("should not be in jane");
var jane=new Manager();
jane.name="jane";
console.log(jane.name);//correct
console.log(jane.objectVal);//incorrect shows ["should not be in jane"] 
```

简单的值是正确的，但对象的值不是。在该文档的后面，有一个针对这个问题的解决方案，即：

```
function Manager () {
  Employee.call(this);
  this.reports = [];
}
Manager.prototype = new Employee; 
```

Manager 中的 Employee.call(this) 所做的是它使用 Manager 的 this 上下文调用 Employee 函数。因此，this.name、this.dept 行成为 Manager 的直接属性，不是通过原型设计，而是通过它们在 Manager 的 this 上下文中初始化的事实。

行 Manager.prototype = new Employee; 可以省略，但 (bob instanceof Employee) 将评估为 false。

因此，在创建自己的类时，您可以使用 this.something 语法将所有需要“由子实例唯一继承”并且是“父”中的对象值的属性。

“父”的方法可以（并且根据一些文档应该）用原型语法指定：

```
//var Employee=function(){....}
Employee.prototype.EmployeeMethod=function(){}
//or
//var Employee=function(){....}
Employee.prototype={EmployeeMethod:function(){},AnotherOne:function(){},....}; 
```

如果您想“子类化”错误（将错误作为异常原型），那么问题是您没有编写错误，我无法使用错误作为原型并使用它的属性：

```
var Exception=function(msg){
// both don't work
//    Error.call(Exception.prototype,msg);
    Error.call(this,msg);
}
Exception.prototype=new Error;

var e=new Exception("my message");
console.log(e.message);//empty string 
```

不确定为什么会这样，调用 Error.call(this,msg) 会将 Error 的属性设置为 Exceptions 属性（将它们复制到 Exception），如果它们位于定义为 this.someProperty 的 Error 函数体中。调用 Error.call(Exception.prototype,msg) 不会将属性复制到 Exception 但 Exception 仍然会通过原型链具有这些属性。

以下链接是一篇文章，您可以在其中找到一个优雅的子类化解决方案，尽管我没有完全理解代码（解决方案在第 2 部分）： [http ://www.lshift.net/blog/2006/07/24 /subclassing-in-javascript-part-1](http://www.lshift.net/blog/2006/07/24/subclassing-in-javascript-part-1)

# jquery - 为选择字段jquery过滤数据属性设置默认值

> ID：14294809
> 
> 赞同：0
> 
> 时间：2013-01-12T15:30:09.067
> 
> 标签：jquery, data-binding

```
filterJobs: function()
{
    var team = $('#selectOne').val();
    var specialty = $('#selectTwo').val();
    var level = $('#selectThree').val();
    //var defSelectTeam=

    $('.jobs').hide()
            .filter('[data-team="' + team + '"][data-specialization="' + specialty + '"][data-level="' + level + '"]')
            .show();
    var newNumJobs = $('.jobs:visible').length;
    $('table:visible:odd').css({'background-color': ' #F1F1F1'});
    $('table:visible:even').css({'background-color': '#FFFFFF'});
    if (newNumJobs <= this.pageSize)
    {
        $("#dvJobs span").text("Showing " + newNumJobs + " of " + newNumJobs + " jobs");
    }
    else
    {
        $("#dvJobs span").text("Showing " + this.pageSize + " of " + newNumJobs + " jobs");
    }

    this.buildPaginator(newNumJobs);
}, 
```

大家好，任何线索如何修改此过滤功能以进行选择过滤现在它可以工作，我需要设置一个默认值，在更改过滤之前显示所有选项？我只需要指出正确的大方向，我对 js 很垃圾，但正在努力改进。在此先感谢，html是这个//////，它通过从表格中删除数据属性来工作，该部分工作正常，只需要设置一个默认值，我正在考虑设置几个数据属性，但这似乎很乱。或设置一个检查值的 if 块，如果它的“选择一个”显示全部。抱歉扯淡了。

```
<select id="selectOne">
    <option value="Select One">Select One </option>
    <option value="Engineering">Engineering </option>
    <option value="SoftwareDevelopment" >Software Development</option>
    <option value="HumanResources" >Human Resources</option>
    <option value="MarkettingAndSales">Marketting and Sales</option>
    <option value="Administrative">Administrative</option>
    <option value="Others">Others</option>
</select>
<label>Specialty:</label>
<select id="selectTwo">
    <option class="Select One" >Select One </option>
    <option class="MarkettingAndSales" value="Sales">Sales </option>
    <option class="HumanResources" value="Recruitment">Recruitment </option>
    <option class="Administrative" value="OfficeGeneral">Office General </option>
    <option class="Engineering SoftwareDevelopment" value="WebDevelopment">Web Development </option>
    <option  class="SoftwareDevelopment" value="ApplicationDevelopment">Application Development </option>
    <option class="SoftwareDevelopment" value="UIUXDesign">UI/UX Design</option>
    <option class="Others" value="ScientificResearch">Scientific Research</option>
    <option  class="Engineering Others" value="ComputerHardwareNetworking">Computer Hardware  Networking</option>
    <option  class="Others" value="Others">Others</option>
</select>
<label>Level:</label>
<select id="selectThree">
    <option>Senior</option>
    <option>Intermediate</option>
    <option>Junior</option>
</select> 
```

提前致谢。更新：我对其进行了一些修改以显示分页，但我想我在 if/else 块中使用了错误的 val 函数？

```
filterJobs: function()
{
    var team = $('#selectOne').val();
    var specialty = $('#selectTwo').val();
    var level = $('#selectThree').val();
    var newNumJobs = $('.jobs:visible').length;
    if (team === 'SelectOne' && specialty === 'SelectOne')
    {
        $('.jobs').show();
    }
    else
    {
        $('.jobs').hide()
                .filter('[data-team="' + team + '"][data-specialization="' + specialty + '"][data-level="' + level + '"]')
                .show();

        $('table:visible:odd').css({'background-color': ' #F1F1F1'});
        $('table:visible:even').css({'background-color': '#FFFFFF'});
    }
    if (newNumJobs <= this.pageSize)
    {
        $("#dvJobs span").text("Showing " + newNumJobs + " of " + newNumJobs + " jobs");
    }
    else
    {
        $("#dvJobs span").text("Showing " + this.pageSize + " of " + newNumJobs + " jobs");
    }

    this.buildPaginator(newNumJobs);
} 
```

为了澄清起见，我添加了被过滤的标签，希望有助于理解我的问题。

```
<table data-team="<?php print $name['team']; ?>" data-specialization="<?php print $name['speciality']; ?>" data-level="<?php print $name['level']; ?>" cellpadding="0" cellspacing="0" border="0" width="670px" class="jobs"><tr><td>
    <tr><td colspan="4"><strong>Research Assistant</strong></td>
        <td></td><td></td><td></td></tr>
    <tr>
        <td width="100">Location : </td>
        <td colspan="3">Madrid</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td> Job Code : </td>
        <td width="460">6767676</td>
        <td></td>
        <td></td> 
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:43:20.130

我不是积极的我理解你的问题，但如果你只想要下拉菜单的默认选择，则不需要 jQuery。只需添加`selected='selected'`要在 html 中设置为默认值的选项即可。像这样：

```
<select id="selectOne">
    <option value="Select One">Select One </option>
    <option value="Engineering" selected="selected">Engineering </option>
    ...etc... 
```

在这种情况下，您也可以摆脱“选择一个”选项，并将其设为标签或其他东西。

编辑：

如果需要，您还可以使用 jQuery 动态应用选定的过滤器：

```
$('#optionId').attr('selected', 'selected'); 
```

编辑2：

好的，请阅读有关原始问题的其他评论。我想我更清楚问题是什么。我同意在更改处理程序中进行过滤是最好的。就像是：

```
$('#selectOne, #selectTwo, #selectThree').change(filterJobs); 
```

此外，如果您需要在页面加载时执行此过滤，请按照上面和 jQuery 调用设置“已选择”

```
$('#selectWhichever').trigger('change'); 
```

这将触发更改处理程序，而无需实际选择一个值。

# java - How to test write to file in Java?

> ID：14294811
> 
> 赞同：5
> 
> 时间：2013-01-12T15:30:56.943
> 
> 标签：java, unit-testing, file-io, junit

I'm beginner, and keep yourself in hands. I have some easy program, and I need do junit test for write method. I have some collection in input. How I can do this? This my code:

```
// write to file
public void write(String fileName, 
        List<FigureGeneral> figuresList) {
    try {
        PrintWriter out = new PrintWriter(
                new File(fileName).getAbsoluteFile());
        try {
            for (int i = 0; i < figuresList.size(); i++) {
                out.println(figuresList.get(i).toString());
            }
        } finally {
            out.close();
        }
    } catch (IOException e) {
        System.out.println("Cannot write to file!");
    }
} 
```

And I want to know, coz after this I read from file, can we join both tests(write/read) or better do this individually(coz if our test fall we don't know where is problem - in read or write)? How should make this correctly at junit(with prepare to test, and test itself)? Better show on example, this way better to understand.

Thanks, Nazar.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T02:12:42.560

你可能根本不需要模拟。尝试在测试中使用 StringWriter。

```
// write to file
public void write(String fileName, List<FigureGeneral> figuresList) {
  try {
    Writer out = new FileWriter(new File(fileName).getAbsoluteFile());
    write(out, figuresList);
  } catch (IOException e) {
    System.out.println("Cannot write to file!");
  }
}

@VisibleForTesting void write(Writer writer, List<FigureGeneral> figuresList) {
  PrintWriter out = new PrintWriter(writer);
  try {
    for (int i = 0; i < figuresList.size(); i++) {
      out.println(figuresList.get(i).toString());
    }
  } finally {
    out.close();
  }
}

@Test public void testWrite() {
  List<FigureGeneral> list = Lists.newArrayList();
  list.add(...); // A
  list.add(...); // B
  list.add(...); // C
  StringWriter stringWriter = new StringWriter();
  write(stringWriter, list);
  assertEquals("A.\nB.\nC.\n", stringWriter.toString()); 
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-12T15:52:17.107

我建议您围绕 IO 类（`PrintWriter`您的案例中的类）制作一个接口包装器，以便您可以使用模拟对象进行输出。您不必测试 Java `PrintWriter`，您想测试您的功能，对吗？

所以你的课将是

```
class MyClass {

    MyWriter out;

    public void setOut(MyWriter out) {
        this.out = out;
    }

    // write to file
    public void write(String fileName, List<FigureGeneral> figuresList) {
        try {
            try {
                for (int i = 0; i < figuresList.size(); i++) {
                    out.println(figuresList.get(i).toString());
                }
            } finally {
                out.close();
            }
        } catch (IOException e) {
            System.out.println("Cannot write to file!");
        }
    }
} 
```

界面的签名`MyWriter`非常简单。

```
interface MyWriter {

    void println(Object x); // You can add other println methods here.

    void close();

} 
```

然后你可以使用[EasyMock](http://www.easymock.org/EasyMock3_1_Documentation.html)来写一个测试。测试方法将类似于

```
@Test
public void testWrite() {
    MyWriter out = EasyMock.createMock(MyWriter.class);
    EasyMock.expect(mock.println(EasyMock.anyObject())).times(3);
    EasyMock.expect(mock.close()).times(1);

    List<FigureGeneral> list = ...
    list.add(...);
    list.add(...);
    list.add(...);

    replay(mock);

    MyClass myClass = new MyClass();
    myClass.setOut(out);
    myClass.write("mockFileName", list);        

    verify(mock);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:37:17.393

你似乎有正确的想法，所以我不确定你到底需要什么帮助......

> 我们可以加入两个测试吗（写/读）

是的。

> 或者更好地单独执行此操作（因为如果我们的测试失败，我们不知道问题出在哪里 - 在读取或写入中）？

更好但更难维护。

> 应该如何在junit正确地做到这一点（准备测试，并测试自己）？

在代码或文本文件中创建一些虚拟数据。

在第一种情况下，写出文件并将其读回，以检查它是否相同。

在第二种情况下，您可以读取文本文件并再次将其写出来，并检查它是否相同。

# android - Clipping/Masking a MapView on Android

> ID：14294814
> 
> 赞同：1
> 
> 时间：2013-01-12T15:31:18.067
> 
> 标签：android, canvas, android-mapview, masking, clipping

I am trying to show a MapView as a circle on Android just like that:

```
protected void onDraw(Canvas canvas) {
    Path path = new Path();
    path.addCircle(400,200,100,Direction.CW);
    canvas.clipPath(path);
    super.onDraw(canvas);
} 
```

Unfortunately the MapView (v2: `com.google.android.gms.maps.MapView`) component seems to ignore that and instead just taking the bounds/rect of that circle to draw the map :(

I've been searching the web for a while now, not finding a nice solution for that.

Is this even possible? (The Blundell solution is not working for me because I want the background to be visible around the map)

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T15:50:35.143

Android 从 API 级别 11 开始支持硬件加速。问题是当硬件加速打开时，并非所有绘图操作都支持。并且`Canvas.clipPath`是其中之一。可以在[此处找到不支持的操作的完整列表](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

`clipPath`您可以尝试在不使用或仅禁用硬件加速的情况下实现您想要的功能。

要在应用程序级别禁用硬件加速，请确保您拥有`targetSdkVersion`11 或更高版本并`hardwareAccelerated`在以下位置使用标记`AndroidManifest`：

```
<application android:hardwareAccelerated="false" ...> 
```

您可以使用以下方法仅为特定视图禁用硬件加速。

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public void enableHardwareAcceleration(View view, boolean enabled) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        if (enabled) {
            view.setLayerType(View.LAYER_TYPE_HARDWARE, null);
        } else {
            view.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
        }
    }
} 
```

请注意，您必须使用`TargetApi`注释并检查设备的android版本是否为`Honeycomb`或更高，否则`Eclipse`可能会产生错误。

如果您的问题中的代码不起作用，请尝试将其替换为：

```
@Override
protected void dispatchDraw(Canvas canvas) {
    Path path = new Path();
    int count = canvas.save();

    path.addCircle(400,200,100,Direction.CW);

    canvas.clipPath(path);
    super.dispatchDraw(canvas);
    canvas.restoreToCount(count);
} 
```

# c++ - Moving along 2D vector (tower defense) in c++

> ID：14294815
> 
> 赞同：4
> 
> 时间：2013-01-12T15:31:18.783
> 
> 标签：c++, game-physics

I'm writing a simple tower defence and I'm stuck on a bit where my tower has to shoot enemy.

With this code:

```
void Bullet::move(int x, int y, int speed) 
{

    Punkt delta = {(x + speed) - this->x, (y + speed) - this->y};
    if (abs(delta.x) > 1 && abs(delta.y) > 1)
    {
        this->x += delta.x / this->speed;
        this->y += delta.y / this->speed;
    }
    else
    {
        this->dead = true;
    }
} 
```

Where method arguments are target position and speed. It's supposed to move bullet along vector till it reaches the target but the vector changes because the target is moving. For now the bullet ends up like this (black is the tower, blue is the bullet and red is enemy)

![error](../Images/90b69f1f69b826aa85dd4b4052b3ee17.png)

And I know the problem is that my bullet is targeting something that already moved so my question is - how to improve this code so it works properly? I don't know how to wrap my head around vectors and balistics so thanks in advance for keeping it simple.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:39:54.850

我以前见过的这个问题的合理解决方案如下：

1.  尽力预测子弹和敌人的良好碰撞点在哪里。一种天真的方法是简单地预测当前的敌人位置。
2.  在预测的位置发射子弹
3.  当子弹到达预测位置时，让子弹消失，播放伤害动画，并降低敌人的生命值——不管子弹是否真的击中

这样，如果你的数学足够聪明，它看起来会很好。但除此之外，游戏仍然可以正常运行。

如果敌人在你向他们开火后可以改变速度（例如，他们被特殊地形或区域效应炮塔减速），这种方法也会更加稳健。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:40:09.010

如果你正在射击一个移动的目标，你需要在子弹到达它的时间内瞄准它的位置，那么你有两个已知的位置，所以你知道矢量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:08:16.817

好吧，我在gamedev论坛上看了一些，我得到了解决方案（我什至设法理解）。这一切都是为了正确计算（正如每个人所说，转换为浮动是必要的）。下面是懒人的代码：

```
float dx = x - this->x;
float dy = y - this->y;
float dx2, dy2;
float distance;
float vx, vy;

distance = sqrt(dx * dx + dy * dy);
dx2 = dx / distance;
dy2 = dy / distance;

vx = dx2 * this->speed;
vy = dy2 * this->speed;

if (distance > 10) // 10 is hitbox size
{
    this->x += vx; // still float, its converted to int when applying to surface
    this->y += vy;
}
else
{
    this->dead = true;
} 
```

# java - Eclipse Maven build package

> ID：14294817
> 
> 赞同：0
> 
> 时间：2013-01-12T15:31:27.067
> 
> 标签：java, eclipse, maven-3

I have a java project that is being built with Maven. Instead of generating the packages from the command line with "mvn package", I would like to generate them from Eclipse. Looking at the Project->Properties->Maven->Life Cycle mappings, I see that plugin execution for "war:war" within the lifecyle phase "package" is "ignored" and the source is "uninteresting". Where is this data maintained? How do I change it? I tried the obvious, double or right clicking on this war:war and package nodes in Eclipse.

I see lifecycle-mapping-metadata.xml. But, I see no mention of package or war in here.

Any help is appreciated.

Thanks, Scott

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:46:00.797

右键单击 Eclipse 中的项目，**Run As...**，**Maven Package**（或**Maven Build...**，然后指定包目标）。这将在 Eclipse 中使用其嵌入式 Maven 运行时执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:46:55.183

您需要创建一个 Maven 运行配置（假设您安装了 eclipse maven 插件，例如 m2e）并定义您想要从那里运行的目标。完成后，此配置将可供使用，因为它现在将成为您工作区元数据的一部分。

# java - Fastest alternative to JSP scriplets while still using java classes?

> ID：14294820
> 
> 赞同：3
> 
> 时间：2013-01-12T15:31:52.350
> 
> 标签：java, jsp, jakarta-ee, jstl, el

I've never really done much web work, but for a project i have to write dynamic website in java.

So originally i started using scriplets in the jsp combined with standard java classes to reduce the amount of code in the jsp files. This was working great for me and i was producing results very quickly.

However when i looked online i saw that this way was disregarded almost a decade ago.

So i started looking into the JSTL libary and the the EL. However after searching for a very long while found it hard to wrap my head round and often got sidetracked with researching the benefits of JSF, pre processing servlets and much more. This project will never actually go into 'production' it will be presented to someone along with my code.

So my question is, what is the fastest and easiest way to display information from my database into a jsp while using standard java classes (Which i am used to, and have already created) to do the most of the work (create connection etc).

I have goggled this endlessly and it has only made me more confused. Much of the infromation from google just involved variables from the pages scope or the request scope, not getting information from java classes.

Thanks very much

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:13:40.567

尽管这是一个小型、简单的项目，但我还是建议使用 Grails 框架。它的设置和使用都非常简单，并且将为您提供 Web MVC 框架的所有好处。

使用 Grails，您可以编写从数据库中检索数据的控制器类，并将其公开给 GSP 页面（非常类似于 JSP）以进行显示。

# clojure - OutOfMemoryError in lazy-seq

> ID：14294821
> 
> 赞同：2
> 
> 时间：2013-01-12T15:31:53.603
> 
> 标签：clojure

> **Possible Duplicate:**
> [Recursive function causing a stack overflow](https://stackoverflow.com/questions/2946764/recursive-function-causing-a-stack-overflow)

Working through the example lazy-seq [here](http://clojuredocs.org/clojure_core/clojure.core/lazy-seq#example_1000).

```
(defn sieve [s]
  (cons (first s)
        (lazy-seq (sieve (filter #(not= 0 (mod % (first s)))
                             (rest s)))))) 
```

If I try to generate more than a couple of thousand primes or so, I get an OutOfMemoryError. Based on my research (but I am very new to clojure) I suspect this may be a problem of the class "hold onto head" but cannot figure out why that would be or how it might be remedied. How can this function be altered so as not to run out of memory when generating larger numbers of primes?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:29:09.543

您可以在不创建惰性序列的情况下使用版本。它工作得更快、更便宜：

```
 (defn sieve* [res s]
      (if (empty? s)
        res
        (recur (conj res (first s))
               (filter #(not= 0 (mod % (first s)))
                       (rest s)))))

(defn sieve [n]
  (sieve* [] (range 2 n)))

(sieve 10000)
=> [2 3 5 7 11 13 17 ... 9941 9949 9967 9973] 
```

这是更有效的版本：

```
(defn sieve* [res n maxn]
  (if (> n maxn)
    res
    (if (some #(= 0 (mod n %))
              (take (round (sqrt (count res))) res))
      (recur res (inc n) maxn)
      (recur (conj res n) (inc n) maxn))))

(defn sieve [n]
  (sieve* [] 2 n))

(last (sieve 1000000))
=> 999983 
```

**更新。**相当快/便宜的懒惰版本

```
(defn primes-seq* [primes]
  (let [last-prime (last primes)]
    (cons last-prime
          (lazy-seq
           (primes-seq*
            (conj primes
                  (first (let [compare-primes
                               (take (round (sqrt (count primes)))
                                     primes)]
                           (drop-while (fn [n]
                                         (some #(= 0 (mod n %))
                                               compare-primes))
                                       (iterate inc (inc last-prime)))))))))))

(def primes-seq (primes-seq* [2]))

(last (take 50000 primes-seq))
=> 611953 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:21:51.870

给定的算法通过“记住”所有先前的素数来工作，所以如果你继续走足够长的时间，你将会破坏堆栈。

以下可能效率较低但不会耗尽内存（从我的[4clojure](http://4clojure.com)解决方案改编为[#116](http://www.4clojure.com/problem/116)）：

```
(defn prime-seq []
  (letfn [(is-prime [x]
            (not (some #(= (rem x %) 0) (range 2 x))))]
    (filter is-prime (range))))

(take 20 (prime-seq))
;=> (0 1 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61)
(nth (prime-seq) 10000)
;=> 104723 
```

# php - bandwidth usage curl php get headers

> ID：14294823
> 
> 赞同：1
> 
> 时间：2013-01-12T15:32:05.187
> 
> 标签：php, curl, header, bandwidth

if i use curl via php to get just header of a url. it's cost to get all content of response bandwidth for my request? or just as lenght of header i get. my code is something like these:

```
<?php

$url='http://www.yahoo.com';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_NOBODY, true);
$buffer = curl_exec($ch);
$curl_info = curl_getinfo($ch);
curl_close($ch);
$header_size = $curl_info[header_size];
$header = substr($buffer, 0, $header_size);

echo $header; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:35:57.170

使用`CURLOPT_NOBODY`使 curl 发送`HEAD`请求，因此您只得到响应的标头，没有内容。

# java - 无法使用 .getResource().getPath() 打开文件

> ID：14294829
> 
> 赞同：2
> 
> 时间：2013-01-12T15:32:26.243
> 
> 标签：java, javafx-2

一年前，我为毕业工作编写了 JavaFX 2.0 应用程序。但是一年过去了，我遇到了以前有效的代码问题。

所以，在代码中我想获取文件夹并列出它的文件：

```
File dir = new File(getClass().getResource("media/images/backgrounds/").getPath()); 
File[] files = dir.listFiles();
for (File file : files) {
    list.add(file.toURI().toString());
} 
```

我在 "for (File file : files) {" 线上得到 java.lang.NullPointerException

```
System.out.print(getClass().getResource("media/images/backgrounds/").getPath()); 
```

返回文件：/D:/JavafxApp1/JavafxApp/dist/run2054723721/JavafxApp.jar!/javafxapp/media/images/backgrounds/

我不想用另一种方法从 JAR 文件的流中读取文件。这种获取文件的方法一年前已经 100% 有效，但为什么现在不起作用？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:48:53.347

它不起作用，因为您的文件夹在 jar 中。我想一年前他们不是。我认为对于目录位于 jar 之外的情况，您不需要单独的代码：

我发现[这个例子](https://stackoverflow.com/a/3923685/1319284)展示了如何使用 getResourceAsStream 列出目录的文件。然后，反过来，您可以通过 getResourceAsStream 访问这些资源。你永远不会知道你是在罐子里面还是外面:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T16:50:53.633

不要创建一个`File`它不能用于访问 jar 内的资源。

```
getClass().getResource() 
```

已经返回您`URL`，因此请使用该 URL 或其他选项`getResourceAsStream()`

# java - Which syntax to use for better performance and resource utilisation

> ID：14294830
> 
> 赞同：0
> 
> 时间：2013-01-12T15:32:53.333
> 
> 标签：java, android, performance, coding-style

After reading several articles on how to fine-tuning my code, I found out that the way we are declaring objects and variables could drasticatly impact the performance of our application. This is more and more important as time constraint is now an integral part of some aspects of the Android platform (e.g. result must be provided within 5 sec for some operations).

Now, I found the following code in one of my fragment class (perfectly functional):

```
Activity myA = getActivity();
if(myA instanceof MainActivity) {
((MainActivity) myA).doNext();
} 
```

Knowing that objects creation/destruction and ressources allocation are some of the factors contributing to drain-out the device’s batteries, I had in mind to rewrite my code to:

```
if(getActivity() instanceof MainActivity) {
((MainActivity ) getActivity()).doNext();
} 
```

From a functional perspective, both codes are delivering the same results. However, what is the most suitable approach? I’m asking because I see pros and cons to both approach and I’m unable to find the appropriate way to evaluate the performance and I’m also not clear on which counters (memory usage, function' speed, used CPU cycles, etc) the evaluation should be performed.

Thanks for your contribution in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:43:00.410

猜测可能是性能瓶颈是非常常见的浪费时间。您必须衡量对整个程序有影响的因素，而不是猜测。

> 知道对象的创建/销毁是因素之一

创建一些对象并不重要。创建太多对象很重要。您应该使用分析器来确定多少是太多以及创建最多的对象。

> 从功能的角度来看，两种代码都提供了相同的结果。但是，最合适的方法是什么？

什么感觉都是最简单的。我相信将方法添加`doNext`到返回的类中`getActivity()`是最好的，这样您就可以编写以下内容是最清楚的。

```
getActivity().doNext(); 
```

> 我找不到合适的方法来评估性能

使用 CPU 和内存分析器，或为系统的不同组件编写性能测试。

> 应该执行评估哪些计数器（内存使用情况、函数速度、使用的 CPU 周期等）。

如果你不能使用分析器，我会从经过时间开始。即 System.nanoTime()。这通常是您所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T15:39:11.047

声明/赋值不是 Java 中的对象创建。它只将引用放在堆栈上。第一个更清晰，可能更快（`getActivity`仅调用一次）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:40:16.747

取决于`getActivity()`做什么。2段代码的区别在于第二段调用了函数2次。函数调用本身是非常快的，但是函数正在做的事情可能并不快。

如果你不确定这个函数是什么，你可以使用第一个函数，尽管第二个函数更易读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T15:38:05.137

如果`getActiviy`不创建新对象，而是根据某些标准返回创建的对象并且不是计算密集型的，那么第二种方法更好。但是，如果每次调用`getActivity`时都创建新对象和/或`getActivity`计算密集型，那么第一种方法会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T00:13:54.767

如果每次调用 getActivity() 返回不同的对象，则第二个版本*不正确，*如果不正确，则第二个版本只是多余的。两者都不是喜欢第二个版本的理由，也没有任何其他理由喜欢它。正如 Pater Lawrey 所说，不要浪费时间去猜测你的性能问题出在哪里。措施。

# ruby-on-rails - How to limit the total returned results when using ElasticSearch with Tire (A Ruby on Rails Gem)?

> ID：14294837
> 
> 赞同：7
> 
> 时间：2013-01-12T15:33:49.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

I tried to use `Post.search(keyword, :size => 10)` and `Post.search(keyword).size(10)`. but non of these will work.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T15:51:23.347

您可以使用`size`扩展查询 DSL 指定选项：

```
Post.search do
  query { string keyword }
  size 10
end 
```

或者您可以设置`:per_page`选项

```
Post.search(keyword, :per_page => 10) 
```

# java - Spring Roo/STS: ServiceImpl method is not visible in Controller class

> ID：14294838
> 
> 赞同：0
> 
> 时间：2013-01-12T15:33:59.660
> 
> 标签：java, interface, spring-roo

I have the Roo-generated project in STS and try to customise update/delete methods to work with MongoDB (for cascade update and delete). I created service methods to update (delete) childs when the parent is updated (deleted):

```
 public class NoteServiceImpl implements NoteService {
    @Autowired
    MongoTemplate mongoTemplate;

    public void updateNotesWithNoteBook(Notebook notebook) {
        Update update = new Update().set("notebook.name", notebook.getName())
                .set("notebook.author", notebook.getAuthor());

        Query query = Query.query(Criteria.where("notebook._id").is(
                new ObjectId(notebook.getId().toString(16))));
        mongoTemplate.updateMulti(query, update, Note.class);
    }
...the similar for delete action 
```

NoteService interface is Roo-generated and looks as follows:

```
@RooService(domainTypes = { org.dp.mongo.shortnotes.domain.Note.class })
public interface NoteService {
} 
```

Than I made push-in refactor of update and detete methods from Roo controller*.aj of the parent entity Notebook to the Notebook controller class, and added calls to the child' service methods:

```
@RequestMapping("/notebooks")
@Controller
@RooWebScaffold(path = "notebooks", formBackingObject = Notebook.class)
public class NotebookController {
    @Autowired
    private NoteService noteService;

    @RequestMapping(method = RequestMethod.PUT, produces = "text/html")
    public String update(@Valid Notebook notebook, BindingResult bindingResult,
            Model uiModel, HttpServletRequest httpServletRequest) {
        if (bindingResult.hasErrors()) {
            populateEditForm(uiModel, notebook);
            return "notebooks/update";
        }
        uiModel.asMap().clear();
        notebookService.updateNotebook(notebook);
        **noteService.updateNotesWithNoteBook(notebook);**
        return "redirect:/notebooks/"
                + encodeUrlPathSegment(notebook.getId().toString(),
                        httpServletRequest);
    }

    the similar for delete method... 
```

And finally got errors that noteService doesn't have method updateNotesWithNoteBook and delete method. How to fix them?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:14:44.920

NoteService接口中是否存在updateNotesWithNoteBook方法？

你必须把它放在接口中，这就是你从控制器调用的。

# svg - How make slideshow for images and video with SVG?

> ID：14294842
> 
> 赞同：0
> 
> 时间：2013-01-12T15:34:19.587
> 
> 标签：svg, jquery-svg

I have two images(png) and two video (mp4). Need to make slideshow in next sequence:

*   play video #1;
*   show image and show some text with fade effect on bottom of image;
*   show another image with some movement and zoom to center effect;
*   play video #2;

Need to use SVG only. I mean just run example.svg and it should play slideshow above.

```
<svg width='100%' height='100%' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
    <foreignObject id='v1' width="640" height="420">
        <iframe xmlns="http://www.w3.org/1999/xhtml" width="640" height="420" src="video1.ogg" frameborder="0"/>
    </foreignObject>
    <image width="640" height="1136" xlink:href="1.jpg">
        <animate id='a1' attributeType="CSS" attributeName="opacity" begin='v1.end' from="1" to="0" dur="5s" repeatCount="1" />
   </image>
</svg> 
```

Thanks in advance

# image - Manage Dynamic Thumbnails on Amazon S3 / Cloudfront

> ID：14294843
> 
> 赞同：0
> 
> 时间：2013-01-12T15:34:28.400
> 
> 标签：image, amazon-web-services, amazon-s3

I just wanted to ask if there was a speedy of dynamically showing thumbnails of images uploaded on S3\. Lets say profile pictures.

I have 3 sizes of these pictures being shown Actual, 150x150 and 25x25\. At the moment I am dynamically resizing them on the fly on my server - not S3.

```
http://www.mydomain.com/images/25X25/image.jpg 
```

Above is a URL that checks if a thumbnail exists and if not generates it. I allow only 3 sizes at the moment.

Soon we would be shifting to S3\. Is such thing possible at S3 also - do I have to get the original image, resize it and then reupload on S3 - all on the fly - of course with cache enabled?

Or should I do this when I upload the actual image itself - make 2 more thumbnails (with easily readable filename lile image_25_25 and image_150_150) and upload those too along with it?

So eventually every upload results in

```
https://bucket.s3.amazonaws.com/image.jpg
https://bucket.s3.amazonaws.com/image_25_25.jpg
https://bucket.s3.amazonaws.com/image_150_150.jpg 
```

Which do you think is a good option? Or Suggestions please - will be really thankfull to you all (err - always am - such an amazing place this is to get help!)

Cheers!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:53:07.527

我认为您的方法在很大程度上取决于您进行此更改的主要目标是什么，您希望处理什么样的上传量，这些缩略图上的典型点击率是多少，以及您对成本的限制是什么执行此缩略图（即执行处理所需的服务器资源和存储成本）。

如果#1 最重要的事情是加快最终用户的图像下载时间，而不考虑成本，那么在上传时构建缩略图可能是最佳选择（可能与在 S3 存储桶前使用 Cloudfront 一起使用） . 这也将使您的应用程序无法尝试动态地为这些图像的请求提供服务。一个缺点显然是最终用户的上传过程可能需要更长的时间（如果您需要在向最终用户指示成功之前在 S3 中创建和可用的文件），当然您最终不得不占用服务器资源和每个上传图像的存储空间，无论该图像是否会被使用。

如果您更关心使用最少的资源和存储量，那么您可以继续采用使用 Web 应用程序处理图像请求并在 S3 中根据需要创建图像的方法。您可能会使用 s3fs 之类的东西（打开其缓存功能）来使这些图像在您的应用程序服务器的本地安装上可用，以帮助加快进程，但如果您的整体目标是提供最佳的用户体验（即最快的下载）。

# uiview - load/reload xib uiview

> ID：14294845
> 
> 赞同：0
> 
> 时间：2013-01-12T15:34:42.103
> 
> 标签：uiview, keyboard, load, xib, init

I am trying to load xib file for custom keyboard with the following code. After that, I need to unload and then reload again. I don't understand how to reload this code. I would like to know how to do.

```
- (id)init {
UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];
CGRect frame;

if(UIDeviceOrientationIsLandscape(orientation))
    frame = CGRectMake(0, 0, 480, 162);
else
    frame = CGRectMake(0, 0, 320, 216);

  self = [super initWithFrame:frame];

if (self)

{   
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"PMCustomKeyboard" owner:self  options:nil];
    [[nib objectAtIndex:0] setFrame:frame];
    self = [nib objectAtIndex:0];

    [[NSBundle mainBundle] loadNibNamed:@"KeyBoardAccView_iPhone" owner:self options:nil];

}

[self.altButton setTitle:kAltLabel forState:UIControlStateNormal];

[self.returnButton setTitle:kReturnLabel forState:UIControlStateNormal];
self.returnButton.titleLabel.adjustsFontSizeToFitWidth = YES;

[self loadCharactersWithArray:kChar];

[self.spaceButton setBackgroundImage:[PMCustomKeyboard imageFromColor:[UIColor colorWithWhite:0.5 alpha:0.5]]
             forState:UIControlStateHighlighted];
self.spaceButton.layer.cornerRadius = 7.0;
self.spaceButton.layer.masksToBounds = YES;
self.spaceButton.layer.borderWidth = 0;
[self.spaceButton setTitle:kSpaceLabel forState:UIControlStateNormal];

return self;
}

-(void)setTextView:(id<UITextInput>)textView {

if ([textView isKindOfClass:[UITextView class]])
    [(UITextView *)textView setInputView:self];
else if ([textView isKindOfClass:[UITextField class]])
    [(UITextField *)textView setInputView:self];

_textView = textView;

NSLog(@"setTextView");
}

-(id<UITextInput>)textView {
return _textView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T22:45:02.507

我刚刚发布了一个关于如何从 .xib 文件加载自定义 UIView 的示例项目。

[https://github.com/PaulSolt/CompositeXib](https://github.com/PaulSolt/CompositeXib)

您将需要一个额外的 UIView 插座和这个名为 WidgetView 的类/.xib 文件的代码：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if(self) {
        [self setup];      
    }
    return self;
}

- (void)setup {
    [[NSBundle mainBundle] loadNibNamed:@"WidgetView" owner:self options:nil];
    [self addSubview:self.view];
} 
```

# android - 如何通过单击按钮停止循环

> ID：14294849
> 
> 赞同：0
> 
> 时间：2013-01-12T15:35:06.357
> 
> 标签：android, android-button

如何用按钮停止循环？

onClick 创建一些动态复选框，在循环中我想检查它们是否被选中。

这是我到目前为止尝试的代码。

*编辑：改写问题。*

我需要一个循环，直到用户按下按钮，就像这样

while(!button.isPressed()){}

```
protected void onCreate(Bundle savedInstanceState) 
{
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragen);    

            View weiterButton = findViewById(R.id.weiterButton);
        weiterButton.setOnClickListener(this);    

}

public void onClick(View v) 
{
        switch (v.getId()) {
        case R.id.weiterButton:
                 View weiterButton = findViewById(R.id.weiterButton);
                 weiterButton.setOnClickListener(this);
                 while(!weiterButton.isPressed())
                 {
                     // do things
                 }
           break;
} 
```

# java - AlertDialog 上 RatingBar 的问题

> ID：14294850
> 
> 赞同：2
> 
> 时间：2013-01-12T15:35:13.040
> 
> 标签：java, android, android-alertdialog, ratingbar

我正在尝试使用 RatingBar 执行 AlertDialog，但我遇到了一个我不知道如何修复的错误。这是我的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle(getResources().getString(R.string.messageAskFB))
    .setCancelable(true)
    .setPositiveButton("Post on Facebook", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {
            try {
                Intent act = new Intent (RutaActualActivity.this, ActualizaEstado.class);
                act.putExtra(getString(R.string.package_name), mens);
                startActivity(act);
                } catch (Throwable e) {
                    e.printStackTrace();
                }

            }
    });

LayoutInflater inflater = getLayoutInflater();
View dialoglayout = inflater.inflate(R.layout.layout_dialog, (ViewGroup) getCurrentFocus());
final int id_poiii=p.getId_poi();

builder.setView(dialoglayout);

AlertDialog lala = builder.create();

RatingBar rat = (RatingBar) lala.findViewById(R.id.dialogRatingBar);
rat.setOnRatingBarChangeListener(new OnRatingBarChangeListener() { 

    public void onRatingChanged(RatingBar ratingBar, float rating,  boolean fromUser) { 
        TaskRating rattask = new TaskRating();
        rattask.execute(id_poiii,ratingBar.getNumStars());
    } 
});

Button buttpost = (Button) lala.findViewById(R.id.dialogfacebook);
buttpost.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        Intent act = new Intent (RutaActualActivity.this, ActualizaEstado.class);
        act.putExtra(getString(R.string.package_name), mens);
        startActivity(act);
    }
});

lala.show(); 
```

这是 layout_dialog 的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/dialogfacebook"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/titleAskFB" />

    <TextView
        android:id="@+id/dialogTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/rate_this_point"
        android:textSize="20sp" />

    <RatingBar
        android:id="@+id/dialogRatingBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />

</LinearLayout> 
```

问题是 'rat' 和 'buttpost' 的 findViewById 为空，而且我不知道另一种将侦听器添加到该评级栏和按钮的方法。有任何想法吗？任何帮助，将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:40:09.337

尝试从 AlertDialog 布局中找到 Button 和 RatingBar ：

```
RatingBar rat = (RatingBar) dialoglayout.findViewById(R.id.dialogRatingBar);

Button buttpost = (Button) dialoglayout.findViewById(R.id.dialogfacebook); 
```

# vb.net - VB 程序无法在 Vista 上运行

> ID：14294855
> 
> 赞同：1
> 
> 时间：2013-01-12T15:35:48.853
> 
> 标签：vb.net, windows-vista

我在 VB 中制作了一个程序，它在运行 Win 7 的 3 台计算机上运行起来就像一个魅力。但是当我尝试在运行 Windows Vista Home Premium 64 位的 PC 上运行它时，我收到了这个错误：

![错误信息](../Images/da64446a76f9d00e8f05167004e3de14.png)

它在 Win 7 中完美运行的事实让我认为这可能是我能找到的一些简单的修复方法。也许改变编译选项或类似的东西。如果有人对此有所了解，我将非常感谢您的帮助！

我正在使用 VB 2010 Express，我正在从 Desktop 运行 .exe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:29:39.130

此错误是由以下原因产生的：

```
WebBrowser.Navigate 
```

这是一个与您的问题非常相似的问题，使用时出现同样的错误`WebBrowser.Navigate`：

[如何修复“请求的资源正在使用中。（来自 HRESULT 的异常：0x800700AA）”](https://stackoverflow.com/questions/2190390/the-requested-resource-is-in-use-exception-from-hresult-0x800700aa)

这绝对是客户端错误，我还可以看到标题为“Internet Explorer 脚本错误”的后窗口 - 您的 Vista 是否已完全更新？

此错误实际上与操作系统架构无关，它通常发生在 IE 执行其他操作时，例如：显示`window.alert`消息框。

如果可能的话，我说发布您的完整代码，并复制该错误窗口中提供的整个消息并在此处发布，而不是您当前拥有的屏幕截图。

您是否在应用程序中使用**Add-in Express ？**

如果是这样，试试这个作为一个快速测试，看看它是否仍然产生错误，从这个[讨论](http://www.add-in-express.com/forum/read.php?FID=10&TID=6798)中得到它：

```
private void adxieCommandItem1_OnClick(object sender, object htmlDoc) 
{ 
this.SendMessage(0x400 + 1000, IntPtr.Zero, IntPtr.Zero); 
} 

private void IEModule_OnSendMessage(AddinExpress.IE.ADXIESendMessageEventArgs e) 
{ 
if (e.Message == 0x400 + 1000) 
{ 
object dummy = Type.Missing; 

try 
{ 
IEApp.Navigate("http://www.add-in-express.com";, ref dummy, ref dummy, ref dummy, ref dummy); 
} 
catch (Exception err) 
{ 
MessageBox.Show(err.Message); 
} 
} 
} 
```

# c# - 单元测试：如何测试具有大量底层对象和业务逻辑的方法

> ID：14294861
> 
> 赞同：3
> 
> 时间：2013-01-12T15:36:30.070
> 
> 标签：c#, unit-testing, mocking, moles, coupling

我对单元测试真的很陌生，尽管我在研究上花了很多时间，但我无法找出适合我的情况的正确方法。

我的代码库很大（大约 3 年的工作），不幸的是，耦合度很高，很难测试，也没有对其进行过单元测试。

因此，例如，当尝试测试一个集合类`ProductCollection`时，更具体地说，`bool MoveElementAtIndex(Product productToMove, int newIndex)`它的，我遇到了以下问题：

*   首先我必须初始化这个`new ProductCollection()`
*   构造函数初始化另一个手工类：`new KeyedList<ID, Product>`. 我想这不应该在这个构造函数中调用，因为我不是在测试`KeyedList`.
*   接下来，我正在尝试向其中添加 3 个产品`ProductCollection`。
*   然后我首先创建这些 3 `new Product()`。
*   但是`Product`类的构造函数做了几件事
*   它为新创建的产品计算一个唯一 ID：`this.ID = IDUtils.ComputeNewIDBasedOnTheMoonPhase()`。我想我也不应该测试这个，因为它不是我的范围。我应该如何避免这种深度的调用？
*   相同的 Product 构造函数为此产品分配了一些默认属性：`this.Properties = new ProductProperties(folderPathToDefaultProperties)`. 这不应该从我的简单`FieldCollection.MoveElementAtIndex`测试中调用，对吧？
*   假设我现在终于有了我的产品对象，我正在尝试将它们添加到我的收藏中。
*   但`ProductCollection.Add(MyProduct)`检查底层证券是否`KeyedList`已经包含该产品。这也是我应该避免的业务逻辑，与我的测试无关。问题是如何？
*   此外，在这种`Add`方法中，会引发一些事件，通知系统一些事情（例如，新产品已添加到集合中）。我想这些也不应该被解雇。
*   最后，当我添加了我的产品时，我调用了所需的 SUT：移动元素方法。
*   但是这个方法也有可能超出我的测试范围的逻辑：它验证底层`KeyedList`实际上包含这些字段，它调用`KeyedList.Remove()`，`KeyedList.Insert()`为其移动逻辑，并触发像`CollectionModified`.

如果您能解释一下如何正确地进行此单元测试，如何避免调用底层对象，我将不胜感激。

我正在考虑微软的 Moles 框架（VS2010），因为我的印象是它不需要我重构所有东西，因为这绝对不是一个选择。但是已经尝试过了，仍然找不到合适的使用方法。

另外，我的印象是，这个具体的例子对我的情况有很多帮助，因为现实世界中的代码通常是这样的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:53:54.023

您的代码在设计时没有考虑到单元测试，这使得这样做非常困难。我建议您正确设计和单元测试您的新代码，并尝试重构最重要的事情，以便您可以对其进行单元测试。

例子：

> 但是 Product 类的构造函数做了几件事。它为新创建的产品计算一个唯一 ID：this.ID = IDUtils.ComputeNewIDBasedOnTheMoonPhase()。我想我也不应该测试这个，因为它不是我的范围。我应该如何避免这种深度的调用？

要解决此问题，您应该将接口 IUtils 传递给您的 Product 构造函数。要测试您的 Product 类，您可以创建一个返回设定值的 IUtils 模拟。您可以对 ProductProperties 执行相同的操作。

> 此外，在这个 Add 方法中，会引发一些事件，通知系统一些事情（例如，新产品已添加到集合中）。我想这些也不应该被解雇。

这归结为设计。您可以在单元测试时使用观察者模式并且没有任何观察者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T16:00:01.267

这是一个常见问题，也是我们有框架为我们伪造对象的原因。存根或模拟允许我们围绕类创建测试工具，而无需实例化许多其他类和服务。有许多这样的框架。这是一个非常有用的三个常见框架的博客。 [http://www.richard-banks.org/2010/07/mocking-comparison-part-1-basics.html](http://www.richard-banks.org/2010/07/mocking-comparison-part-1-basics.html)。

我自己对单元测试很陌生，发现 Roy Osherove 的《单元测试的艺术》一书非常有帮助。Roy 有一个博客，这些是他关于单元测试的一些帖子[http://osherove.com/display/Search?moduleId=10002929&searchQuery=Unit+Testing](http://osherove.com/display/Search?moduleId=10002929&searchQuery=Unit+Testing)

需要考虑的另一件事是您的类的耦合程度。做起来可能不是那么容易，但你可能想看看 Dependency Injection。这允许类更松散耦合，因此更容易测试。我发现 Mark Seemann 的 .NET 中的 Dependency Injection 一书是一个很好的介绍。

在我的研究之后，我选择了[NUnit](http://www.nunit.org)作为测试框架，[NSubstitute](http://nsubstitute.github.com/)用于模拟和存根，[Fluent Assertions](http://fluentassertions.codeplex.com/)使编写测试更容易，[NInject](http://www.ninject.org/)用于依赖注入

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T16:01:12.093

我建议使用[ApprovalTest](http://approvaltests.sourceforge.net/)。这是开始测试没有最佳设计的遗留系统的好工具。

现在不要在单元测试和集成测试的差异之间烦恼，也不要为完全隔离你的类而烦恼。您的代码可能不是最适合可测试性的，当您开始将所有内容相互隔离时 - 您最终会得到巨大的排列部分和非常脆弱的测试。

另一方面，您必须隔离外部资源（Web 服务、数据库、文件系统等）。此外，所有非确定性行为都应该被隔离（`Random`、当前时间、用户输入等）

我只是建议创建一个验证测试的安全网，这将帮助您朝着可测试性的方向更改软件，并告诉您是否对代码进行了重大更改。

阅读 Michael Feathers[有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T15:41:07.247

您应该使用 microsoft moles 框架或 microsoft fakes 框架。这些框架使您能够更改函数的行为。

在适当的单元测试中，应模拟所有外部方法调用以隔离要测试的代码。Moles / Fakes 在创建模拟对象 / 存根等方面非常有用。

更新：理论上，最好模拟所有外部方法调用以隔离代码。即使在某些实际情况下，您也必须模拟所有外部方法：

```
void UpdateSomeX(X x)
{
   this.validator.Validate(x);
   x.UpdateDate = DateTime.Now;
   this.context.Attach(x);
   this.unitOfWork.Save();
} 
```

你猜怎么着; 您最终将模拟所有外部方法调用。那你需要测试这个方法吗？答案是肯定的，但是“是”的细节超出了这个问题的范围。

# c# - 读取带有许多字符串的二进制流 - 检查文件结尾

> ID：14294863
> 
> 赞同：0
> 
> 时间：2013-01-12T15:36:49.850
> 
> 标签：c#, for-loop, binaryfiles

我需要知道如何`EOF`在包含大量`strings`. 我有这个记录

```
public struct hiScoreValue{
    public string playerName;
    public int encryptedScoreValue;
    public string scoreMD5Checksum;
} 
```

这基本上循环到文件末尾，除了用于文件识别目的的小标题和存储一些额外内容`checksums`以使作弊更加困难。

那么检查文件是否已结束，我最好的选择是什么？捕捉`EndOfStream`异常或者有没有更简单的方法，类似于[这里](http://www.dotnetperls.com/binaryreader)的一个：（基本上是获取流的长度并增加大小）；

# hadoop - Hadoop 实时场景的 POC

> ID：14294864
> 
> 赞同：6
> 
> 时间：2013-01-12T15:36:57.990
> 
> 标签：hadoop, real-time, bigdata, hadoop-streaming

我有一点问题。我想了解 Hadoop 以及如何使用它来实时处理数据流。因此，我想围绕它建立一个**有意义的 POC**，以便当我必须在一些潜在雇主面前证明我对它的了解或在我现在的公司中介绍它时，我可以展示它。

我还想提一下，我的硬件资源有限。只有我的笔记本电脑和我 :) 我了解 Hadoop 的基础知识，并编写了 2-3 个基本的 MR 作业。我想做一些更有意义或更真实的事情。

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T17:50:25.013

我想指出几点。

如果您只想用一台笔记本电脑进行 POC，那么使用 Hadoop 就没有什么意义了。

此外，正如其他人所说，Hadoop 不是为实时应用程序设计的，因为运行 Map/Reduce 作业有一些开销。

话虽如此，Cloudera 发布了[Impala](http://blog.cloudera.com/blog/2012/10/cloudera-impala-real-time-queries-in-apache-hadoop-for-real/)，它与 Hadoop 生态系统（特别是 Hive 元存储）一起工作以实现实时性能。请注意，要实现这一点，它不会生成 Map/Reduce 作业，并且目前处于测试阶段，因此请谨慎使用。

所以我真的建议你去 Impala，这样你仍然可以使用 Hadoop 生态系统，但如果你也在考虑替代方案，这里有一些其他的框架可以使用：

*   [Druid](https://github.com/metamx/druid)：由 MetaMarkets 开源。看起来很有趣，尽管我自己没有使用过。
*   [Storm](http://storm-project.net/)：没有与 HDFS 集成，它只是处理数据。
*   [HStreaming](http://www.hstreaming.com/)：与 Hadoop 集成。
*   [雅虎 S4](http://incubator.apache.org/s4/)：似乎非常接近 Storm。

最后，我认为您应该真正分析您的需求，看看是否需要使用 Hadoop，因为它只是在实时空间中开始。还有其他几个项目可以帮助您实现实时性能。

* * *

如果您想展示项目的想法，我建议您查看[此链接](http://atbrox.com/2010/02/08/parallel-machine-learning-for-hadoopmapreduce-a-python-example/)。她举了一些例子：

*   金融/保险
    *   例如根据行业/公司指标、投资组合多样性和货币风险将投资机会分类为好或不好。
    *   根据交易和信用卡持有人的位置、日期、金额、购买的物品或服务、交易历史和类似交易，将信用卡交易分类为有效或无效。
*   生物学/医学
    *   将蛋白质分类为结构或功能类别
    *   诊断分类，例如基于图像的癌症肿瘤
*   互联网
    *   文档分类和排名
    *   恶意软件分类、电子邮件/推文/网络垃圾邮件分类
*   生产系统（例如能源或石化行业）
    *   根据传感器的实时和历史数据分类和检测情况（例如甜蜜点或风险情况）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:18:04.130

如果您想亲身体验一个**很有前途**的流式传输框架，请尝试 BDAS SPARK 流式传输。注意，这还没有发布，但是你可以在你的笔记本电脑上使用 github 版本（**[https://github.com/mesos/spark/tree/streaming](https://github.com/mesos/spark/tree/streaming)**）有很多示例可以帮助你入门。

此外，这与现有框架相比具有许多优点，1\. 它使您能够在一个堆栈中结合实时和批量计算 2\. 它会给您一个 REPL，您可以在其中以交互式方式尝试您的即席查询。3\. 您可以在笔记本电脑上以本地模式运行它。还有许多其他优点，但我相信这三个足以满足您入门的需要。

您可能需要学习 scala 才能尝试 REPL :-(

有关更多信息，请查看[http://spark-project.org/](http://spark-project.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:30:13.453

Hadoop 是一个面向高吞吐量的框架，适用于批处理。如果您对实时处理和分析大量数据集感兴趣，请查看 twitterstorm。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T16:32:46.110

我敢肯定的经典问题之一是最实时的。期权交易。这里的关键是在 twitter、facebook、youtube 上关注新闻和趋势，然后确定可能的 PUT 或 CALL 候选人。您将需要良好的技能和使用 Nutch/Lucene 精心实施 Mahout，然后使用趋势数据来了解当前情况和系统应该推荐投注（选项）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T03:14:08.110

我显然有偏见，但我也建议实时查看[GridGain 。](http://www.gridgain.com)[GridGain](http://www.gridgain.com)是提供 ACID NoSQL 数据存储和快速内存 MapReduce 的内存数据平台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T16:35:28.507

我认为您可以运行 POC，例如，在 mapreduce 中进行回归的在线/递归算法。但请记住，这只会证明您的“学习规则”有效。也许（从未尝试过）你可以通过告诉你的减速器将它们写入一个可以被另一个线程读取的临时文件来实时使用结果。

Mahout 还允许您在几个不同`SequenceFile`的 s 中设置您的数据库。您可以使用它来模拟在线流并对“在线”数据集进行分类/聚类。您甚至可以在算法开始运行之前将部分数据与其他数据一起复制到文件夹中。 *Mahout in Action*详细说明了如何做到这一点。

看看以下数据集之一是否符合您的口味： http: [//archive.ics.uci.edu/ml/datasets.html](http://archive.ics.uci.edu/ml/datasets.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-10T12:20:52.260

如果您想构建一些实时应用程序，那么我建议您使用**Apache Spark**框架，它用于实时处理并支持**多语言** **API**（Scala、Java、Python、R）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-13T13:16:02.253

我一直在寻找这样的东西 -

[https://www.kaggle.com/competitions](https://www.kaggle.com/competitions)

这些都是定义明确的问题，其中许多是大数据问题。其中一些需要实时处理。

但是感谢所有回答的人。

# php - 如何使用 php dom 或正则表达式解析 @import URL？

> ID：14294867
> 
> 赞同：2
> 
> 时间：2013-01-12T15:37:10.127
> 
> 标签：php, regex, dom, domdocument

给定html，例如：

```
<!-- main layout and navbar stylesheets -->
<style type="text/css" media="all and (min-width:481px)">
  @import url("/styles/main.css?v=11") screen, projection;
  @import url("/styles/navbar.css?v=11") screen, projection;
</style> 
```

如何使用 php dom 或 regex 从那块 html 中获取 @import URL？

*至于我尝试了什么*，这是我所做的，但它没有这样做：

```
preg_match("/(url\([\'\"]?)([^\"\'\)]+)([\"\']?\))/", $html, $matches); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:24:55.527

您**必须使用 DOM**。但**是否使用 RegEx 取决于您**。使用 dom 解析 style 的内容。

```
 $doc = new DOMDocument();
   $doc->loadHTML($html);
   $nodes = $doc->getElementsByTagName("style");
   for($i=0;$i<$nodes->length;$i++){
       $style = $nodes->item($i)->textContent;
       // parse import rules on $style here. 
       // read bellow.
   } 
```

之后，您要么使用某种用 PHP 编写的 css 解析器（例如[PHP-CSS-Parser](https://github.com/sabberworm/PHP-CSS-Parser)），要么应用正则表达式。

像下面这样的正则表达式（根据你的报价转义）会很好地解析它。

```
!@import\s+url\((['"])(.+?)\\1\)! 
```

请参阅[示例](http://codepad.viper-7.com/0EgepZ)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T16:30:31.850

这是另一种方法：

```
<?php
$html = 
'
<!-- main layout and navbar stylesheets -->
<style type="text/css" media="all and (min-width:481px)">
  @import url("/styles/main.css?v=11") screen, projection;
  @import url("/styles/navbar.css?v=11") screen, projection;
</style>
';

if(preg_match_all('/url\(\"([^)]+)\"\)/', $html, $matches)){
  foreach($matches[1] as $url){
      print $url . "<br />";
  }
}else{
  print "No matches";
}

?> 
```

**phpfiddle 链接**：[http ://phpfiddle.org/main/code/w69-ecy](http://phpfiddle.org/main/code/w69-ecy)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:28:17.320

这是使用 php regexp 的工作代码:)

还包括一个工作小提琴：http: [//phpfiddle.org/main/code/yc5-61s](http://phpfiddle.org/main/code/yc5-61s)

```
<?php    
$inputString = '<!-- main layout and navbar stylesheets -->
<style>url1</style>
<style type="text/css" media="all and (min-width:481px)">
  @import url("/styles/main.css?v=11") screen, projection;
  @import url("/styles/navbar.css?v=11") screen, projection; url
  @import url("http://www.jirilmon/style.css?v=99") screen, projection; url
</style>';

if(preg_match_all('/(@import) (url)\(([^>]*?)\)/',$inputString, $matches)){
  print_r($matches[3]);
}else{
  print "No matches";
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-07T13:52:03.083

试试这个 [https://regex101.com/r/QrQxBN/1](https://regex101.com/r/QrQxBN/1)

与

```
@import "font-awesome.min.css";
@import "simple-line-icons.css";
@import url(http://fonts.googleapis.com/css?family=Montserrat:700,400);
@import url('http://fonts.googleapis.com/css?family=ggg');
@import url("http://fonts.googleapis.com/css?family=ggg"); 
```

正则表达式

```
preg_match_all ("/@import[ ]*['\"]{0,}(url\()*['\"]*([^;'\"\)]*)['\"\)]*/ui", $csscontent, $urlscss2);
var_dump($cssFile);
var_dump($urlscss2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T17:18:31.097

优秀的解决方案，但是不够宽，我不得不修改它以使其更宽并获取@import的不同格式。

```
/@import (url\(\"?)?(url\()?(\")?(.*?)(?(1)\")+(?(2)\))+(?(3)\")/ig 
```

使用这个正则表达式，你也可以抓住它：

```
@import url(comments.css);
@import "/style/main.css"
@import url("style-1024.css") 
```

工作示例：[http ://regex101.com/r/uC4sH2/1](http://regex101.com/r/uC4sH2/1)

# java - 重绘不叫画

> ID：14294872
> 
> 赞同：0
> 
> 时间：2013-01-12T15:37:37.277
> 
> 标签：java, swing, draw, java-2d, repaint

我正在尝试在 while 循环中使用重绘来调用绘制函数。我不太熟悉重绘的工作原理。

我对 repaint 所做的研究表明，它会在调用 draw 方法之前等待操作完成，这可能是我处于 while 循环中的问题。

然而，我也读到我试图调用 repaint 的方式也应该有效，所以我现在很困惑。在我的代码中加入一些系统输出似乎不会启动我的任何绘图功能。

什么会导致这个？我的代码在下面列出。

游戏窗口.java

```
package Game;
import java.awt.Frame;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.*;

import Game.Login;

//our window class that will set up the framework of the game
public class GameWindow {
    public static boolean stillLoading = true;
    public static GridBagConstraints gBC = new GridBagConstraints();
    public static JFrame frame = new JFrame();
    private static boolean useFullScreen = false;

    public GameWindow() {

        //Set game Title
        frame.setTitle("Gaian Empires");
        frame.setLayout(new GridBagLayout());

        //set size of the frame
        if(useFullScreen) { // full screen

            // Disable decorations for the frame.
            frame.setUndecorated(true);
            //put frame to full screen.
            frame.setExtendedState(Frame.MAXIMIZED_BOTH);
        } else { // windowed mode
            // set size of the frame
            frame.setSize(1024,768);
            // put frame to center of screen
            frame.setLocationRelativeTo(null);
            // make it so frame can not be resized
            frame.setResizable(false);
        }

        //Exit the application when user closes frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // create instance of the framework so that it extends the canvas 
        // class and puts it to frame
        Login.CreateLogin();    
        frame.setVisible(true);
        frame.add(new Framework());

        stillLoading = false;
    }

    public static void main(String[] args) {
        // Use the event dispatch to build UI for safety.
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new GameWindow();
            }
        });
    }
} 
```

游戏.java

```
package Game;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.geom.Line2D;

import Game.Login;

public class Game {
    public static boolean login = true;
    public static boolean loginDone = false;

    public Game()
    {
        Framework.gameState = Framework.GameState.GAME_CONTENT_LOADING;

        Thread threadForInitGame = new Thread() {
            @Override
            public void run(){
                // Sets variables and objects for the game.
                Initialize();
                // Load game files (images, sounds, ...)
                LoadContent();

                Framework.gameState = Framework.GameState.PLAYING;
            }
        };
        threadForInitGame.start();
    }

    /**
     * Set variables and objects for the game.
     */
    private void Initialize()
    {

    }

    /**
     * Load game files - images, sounds, ...
     */
    private void LoadContent()
    {

    }    

    /**
     * Restart game - reset some variables.
     */
    public void RestartGame()
    {

    }

    /**
     * Update game logic.
     * 
     * @param gameTime gameTime of the game.
     * if the game is using the mouse for something. @param mousePosition current mouse position.
     */
    public void UpdateGame(long gameTime)
    {
        if (GameWindow.stillLoading) {
            return;
        }
        //System.out.println("UPDATE!");
        if (login == true) {
            Login.showLogin();
            login = false;
        }
    }

    /**
     * Draw the game to the screen.
     * 
     * @param g2d Graphics2D
     * @param mousePosition current mouse position.
     */
    public void Draw(Graphics2D g2d, Point mousePosition)
    {
        System.out.println("drawing!"); 
    }
} 
```

画布.java

```
package Game;

import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.image.BufferedImage;

import javax.swing.*;

public abstract class Canvas extends JPanel implements KeyListener, MouseListener {

    // Keyboard states - Here are stored states for keyboard keys - is it down or not.
    private static boolean[] keyboardState = new boolean[525];

    // Mouse States - here are the stored mouse states for mouse key being down or not
    private static boolean[] mouseState = new boolean[3];

    private static boolean noMouse = false; // removes mouse pointer from game.

    public Canvas() {
        // use double buffer to draw the screen
        this.setDoubleBuffered(true);
        this.setFocusable(true);
        //this.setBackground(Color.black);

        // If you will draw your own mouse cursor or if you just want that mouse cursor disappear, 
        // insert "true" into if condition and mouse cursor will be removed.
        if (noMouse) {
            BufferedImage blankCursorImg = new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB);
            Cursor blankCursor = Toolkit.getDefaultToolkit().createCustomCursor(blankCursorImg, new Point(0, 0), null);
            this.setCursor(blankCursor);
        }

        // adds keyboard listener to receive events from jpanel
        this.addKeyListener(this);
        // adds mouse listener to receive events from jpanel
        this.addMouseListener(this);
    }

    // This method is Override in Framework.java and is used for drawing to the screen
    public abstract void Draw(Graphics2D g2d);

    // i think this needs @Override but the system won't allow it.  
    public void paintComponenet(Graphics g) {
        System.out.println("painting");
        Graphics2D g2d = (Graphics2D)g;
        super.paintComponent(g2d);
        Draw(g2d);
    }

    // Keyboard
    /**
     * Is keyboard key "key" down?
     * 
     * @param key Number of key for which you want to check the state.
     * @return true if the key is down, false if the key is not down.
     */
    public static boolean keyboardKeyState(int key) {
        return keyboardState[key];
    }

    // Methods of keyboard listener
    @Override
    public void keyPressed(KeyEvent e) {
        keyboardState[e.getKeyCode()] = true;
    }

    @Override
    public void keyReleased(KeyEvent e) {
        keyboardState[e.getKeyCode()] = false;
        keyReleasedFramework(e);
    }

    @Override
    public void keyTyped(KeyEvent e){
    }

    public abstract void keyReleasedFramework(KeyEvent e);
    // Mouse
    /**
     * Is mouse button "button" down?
     * @param button Number of mouse button for which you want to check the state.
     * @return true if the button is down, false if the button is not down.
     */
    public static boolean mouseButtonState(int button)
    {
        return mouseState[button - 1];
    }

    // Sets mouse key status.
    private void mouseKeyStatus(MouseEvent e, boolean status)
    {
        if(e.getButton() == MouseEvent.BUTTON1)
            mouseState[0] = status;
        else if(e.getButton() == MouseEvent.BUTTON2)
            mouseState[1] = status;
        else if(e.getButton() == MouseEvent.BUTTON3)
            mouseState[2] = status;
    }

    // Methods of the mouse listener.
    @Override
    public void mousePressed(MouseEvent e)
    {
        mouseKeyStatus(e, true);
    }

    @Override
    public void mouseReleased(MouseEvent e)
    {
        mouseKeyStatus(e, false);
    }

    @Override
    public void mouseClicked(MouseEvent e) { }

    @Override
    public void mouseEntered(MouseEvent e) { }

    @Override
    public void mouseExited(MouseEvent e) { }
} 
```

框架.java

```
package Game;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.KeyEvent;
import java.awt.event.MouseEvent;

public class Framework extends Canvas {

    // frame width and height
    public static int frameWidth;
    public static int frameHeight;

    //time variables
    public static final long secInNanosec = 1000000000L;
    public static final long milisecInNanosec = 1000000L;

    // FPS
    private final int GAME_FPS = 60;

    // pause between update cycles
    private final long GAME_UPDATE_PERIOD = secInNanosec / GAME_FPS;

    // states of game
    public static enum GameState{STARTING, VISUALIZING, GAME_CONTENT_LOADING, MAIN_MENU, OPTIONS, PLAYING, GAMEOVER, DESTROYED}

    // current game state
    public static GameState gameState;

    // game time
    private long gameTime;

    // help calc game time
    private long lastTime = 0;

    // The actual game
    private Game game = new Game();

    public Framework ()
    {
        super();

        gameState = GameState.VISUALIZING;

        //start game in new thread
        Thread gameThread = new Thread() {
            @Override
            public void run(){
                GameLoop();
            }
        };
        gameThread.start();
    }

    /**
     * Set variables and objects.
     */
    private void Initialize()
    {

    }

    /**
     * Load files - images, sounds, ...
     */
    private void LoadContent()
    {

    }

    /**
     * In specific intervals of time (GAME_UPDATE_PERIOD) the game/logic is updated and then the game is drawn on the screen.
     */
    private void GameLoop()
    {
        // wait some time so that we get correct frame/window resolution.
        long visualizingTime = 0, lastVisualizingTime = System.nanoTime();

        // calculate the time for how long we should put threat to sleep to meet FPS.
        long beginTime, timeTaken, timeLeft;

        while(true)
        {
            beginTime = System.nanoTime();

            switch (gameState)
            {
            case PLAYING:                   
                gameTime += System.nanoTime() - lastTime;                    

                game.UpdateGame(gameTime);

                lastTime = System.nanoTime();
                break;
            case GAMEOVER:
                //...
                break;
            case MAIN_MENU:
                //...
                break;
            case OPTIONS:
                //...
                break;
            case GAME_CONTENT_LOADING:
                //...
                break;
            case STARTING:
                // Sets variables and objects.
                Initialize();
                // Load files - images, sounds, ...
                LoadContent();

                // When all things that are called above finished, we change game status to playing or main menu
                gameState = GameState.PLAYING;
                break;
            case VISUALIZING:
                // this.getWidth() method doesn't return the correct value immediately 
                // So we wait one second for the window/frame to be set to its correct size. Just in case we
                // also insert 'this.getWidth() > 1' condition in case when the window/frame size wasn't set in time,
                // so that we get approximately size.
                if(this.getWidth() > 1 && visualizingTime > secInNanosec)
                {
                    frameWidth = this.getWidth();
                    frameHeight = this.getHeight();

                    // When we get size of frame we change status.
                    gameState = GameState.STARTING;
                }
                else
                {
                    visualizingTime += System.nanoTime() - lastVisualizingTime;
                    lastVisualizingTime = System.nanoTime();
                }
                break;
            case DESTROYED:
                break;
            default:
                break;
            }

            // Repaint the screen.
            repaint();

            // calculate the time for how long we should put threat to sleep to meet FPS.
            timeTaken = System.nanoTime() - beginTime;
            timeLeft = (GAME_UPDATE_PERIOD - timeTaken) / milisecInNanosec; // In milliseconds
            // If the time is less than 10 milliseconds, then we will put thread to sleep for 10 millisecond so that some other thread can do some work.
            if (timeLeft < 10) 
                timeLeft = 10; //set a minimum
            try {
                //Provides the necessary delay and also yields control so that other thread can do work.
                Thread.sleep(timeLeft);
            } catch (InterruptedException ex) { }
        }
    }

    /**
     * Draw the game to the screen. It is called through repaint() method in GameLoop() method.
     */
    @Override
    public void Draw(Graphics2D g2d)
    {
        System.out.println("Paint!");
        switch (gameState)
        {
        case PLAYING:
            System.out.println("we are firing draw");
            game.Draw(g2d, mousePosition());
            break;
        case GAMEOVER:
            //...
            break;
        case MAIN_MENU:
            //...
            break;
        case OPTIONS:
            //...
            break;
        case GAME_CONTENT_LOADING:
            //...
            break;
        case DESTROYED:
            break;
        case STARTING:
            break;
        case VISUALIZING:
            break;
        default:
            break;
        }
    }

    /**
     * Starts new game.
     */
    @SuppressWarnings("unused")
    private void newGame()
    {
        // We set gameTime to zero and lastTime to current time for later calculations.
        gameTime = 0;
        lastTime = System.nanoTime();

        game = new Game();
    }

    /**
     *  Restart game - reset game time and call RestartGame() method of game object so that reset some variables.
     */
    @SuppressWarnings("unused")
    private void restartGame()
    {
        // We set gameTime to zero and lastTime to current time for later calculations.
        gameTime = 0;
        lastTime = System.nanoTime();

        game.RestartGame();

        // We change game status so that the game can start.
        gameState = GameState.PLAYING;
    }

    /**
     * Returns the position of the mouse pointer in game frame/window.
     * If mouse position is null than this method return 0,0 coordinate.
     * 
     * @return Point of mouse coordinates.
     */
    private Point mousePosition()
    {
        try
        {
            Point mp = this.getMousePosition();

            if(mp != null)
                return this.getMousePosition();
            else
                return new Point(0, 0);
        }
        catch (Exception e)
        {
            return new Point(0, 0);
        }
    }

    /**
     * This method is called when keyboard key is released.
     * 
     * @param e KeyEvent
     */
    @Override
    public void keyReleasedFramework(KeyEvent e)
    {

    }

    /**
     * This method is called when mouse button is clicked.
     * 
     * @param e MouseEvent
     */
    @Override
    public void mouseClicked(MouseEvent e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:05:30.273

这看起来像问题：

```
// i think this needs @Override but the system won't allow it.  
public void paintComponenet(Graphics g) { 
```

您尝试覆盖的方法是`paintComponent`. 你有一个错字。

值得关注编译器警告并了解问题所在。该`@Override`错误告诉您您正在尝试覆盖超类中不存在的方法。

# mysql - Mysql Select 每个映射只返回 1 个条目

> ID：14294875
> 
> 赞同：-1
> 
> 时间：2013-01-12T15:37:57.487
> 
> 标签：mysql, select

我有 5 个关系：A、B、A_B、C、D。我正在尝试获取 A&B 对并选择有关的更多信息

```
SELECT A.aName, B.bName, C.cName, D.dName 
FROM `A` , `B` , `A&B` , `C` , `D`
WHERE B.bName= A_B.bName
AND A.aName = A_B.aName
AND A.cName = C.cName
AND C.dName = D.dName 
```

但这不是我想的那样，它只代表每个 A 一个条目，即使 A 有更多的 A_B 映射。

更新2：

表A有

```
-------------
t1key | t2key
--------------
a1        c1
a2        c2
a3        c1
a4        c1

Table B
------------
t3key | t4key
-------------
b1      XXX
b2      XXX
b3      XXX
b4      XXX
b5      XXX

Table A&B
------------
t1key | t3key
-------------
a1      b1
a1      b2
a1      b3
a3      b1
a4      b2

Table C
------------
t2key | t4key
-------------
c1      d1
c2      d2
c3      d1
c4      d3
c5      d1 
```

结果应该是

```
a1   b1 c1 d1
a1   b2 c1 d1
a1   b3 c1 d1
a3   b1 c2 d2
a4   b2 c1 d1 
```

如您所见， a1 在此结果中有 3 个条目...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:01:35.217

您应该做的第一件事是避免“老式”隐式连接语法并学习使用显式语法（使用`ON`条件的连接）。这将使一切更容易理解。接下来了解不同类型的连接，尤其是`LEFT JOIN`.

考虑到这一点，看看这是否符合您的要求：

```
SELECT A.aName, B.bName, C.cName, D.dName
FROM  `A&B`
LEFT JOIN `A`
ON   A.aName = A_B.aName
LEFT JOIN `B`
ON   B.bName = A_B.bName
LEFT JOIN `C` 
ON   C.cName = A.cName
LEFT JOIN `D`
ON  D.dName = C.dName 
```

# javascript - 更改文化后坐标格式错误

> ID：14294877
> 
> 赞同：1
> 
> 时间：2013-01-12T15:38:00.473
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, google-maps, google-maps-api-3

我显示带有标记的谷歌地图。
When selected language is English it's ok, but when I change language map is not displayed and I think it is because `lat/lng`is written differently:

```
English: 44.012/22.098
Other: 44,012/22,098 
```

在这种情况下我该怎么办？

我从数据库中获取坐标并将其存储在这些属性中：

```
public double Longitude { get; set; }
public double Latitude { get; set; } 
```

在这里我得到南，南

```
var c = new google.maps.LatLng(latitude, longitude); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:57:21.533

谷歌地图需要这样格式的 lat lng 值：`41.112469`因此，如果您的值包含逗号字符，请将它们替换为点并`LatLng`使用该值创建您的对象。

```
var lat = '44,012';
var lng = '22,098';
lat = lat.replace(/\,/g,'.');
lng = lng.replace(/\,/g,'.'); 
```

# ruby-on-rails-3 - 日期.今天时区

> ID：14294880
> 
> 赞同：1
> 
> 时间：2013-01-12T15:38:21.520
> 
> 标签：ruby-on-rails-3, date, activerecord, scope, timezone

我有一个范围，它从数据库中提取所有调用，状态为打开，分配了单位，并且 transfer_date <= Date.today。

```
scope :open_calls, lambda { open_status.includes(:call_units).where(["call_units.unit_id IS NOT NULL"]).where("EXTRACT(DAY FROM transfer_date) <= ? AND EXTRACT(MONTH FROM transfer_date) <= ?", Date.today.day, Date.today.month).order("calls.id ASC") } 
```

我遇到的问题是，如果我将呼叫的转移日期设置为今天晚上 9:30，则呼叫不包含在范围内。我认为这与 UTC/时区有关。我试图找出编写此范围的最佳方法是什么，以便我可以拉出所有调用 <= Date.today 并显示正确的结果。

我在查询中使用 postgres btw ergo EXTRACT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:00:51.957

到目前为止，我已经使用了这个范围，并且能够在一天结束时将所有呼叫拉到今天。看起来它也适用于时区问题。

```
scope :open_calls, lambda { open_status.includes(:call_units).where(["call_units.unit_id IS NOT NULL"]).where("transfer_date <= ?", Time.zone.today.end_of_day) } 
```

# html - div 父 div 不包含子 div

> ID：14294887
> 
> 赞同：1
> 
> 时间：2013-01-12T15:39:25.437
> 
> 标签：html, css

我有这样的事情：

```
<div id="page">
  <---some content here -->
  <div id="container">
    <div id="child">
    </div>
  </div>
</div> 
```

现在，`#page`它没有任何格式。它适用于`some content`，我的意思是，当内容更大时，`#page`高度也更高。但是，当我今天应用`#container`它时，它是定位`absolute`的，并且它里面有一个`#child`定位的`relative`，它似乎`#container`不在里面`#page`- 这意味着如果`#container`增长，高度`#page`没有变化，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T15:41:37.090

绝对定位的元素会从文档的正常流程中移除，导致它们在其高度增加时不会增加其父级的高度。

> 相对定位的元素仍被认为在文档中的正常元素流中。相反，绝对定位的元素会从流中取出，因此在放置其他元素时不会占用空间。**[全文](https://developer.mozilla.org/en-US/docs/CSS/position)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T15:43:16.217

凯文的回答揭示了（为什么不可能）自动调整的技巧。

对于定位，请注意，如果 #container 是`absolute`，并且您希望它引用 #page，那么 #page 应该是`relative`，`absolute`或者`fixed`，不是`static`（默认值）。

否则，定位将参考 HTML 元素/视口，即窗口的可见区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-10T13:11:02.387

在 . 上设置`overflow: auto`（或任何其他有效值）`container`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T15:41:50.953

`.container`是一个 css 类（由 指示`.`），例如在 html 中它会是

```
<div class="container"> 
```

您正在使用 ID，在 css 中是

```
#container { .... } 
```

# jquery - 尝试淡出时会重复 FadeIn 和 FadeOut

> ID：14294895
> 
> 赞同：0
> 
> 时间：2013-01-12T15:40:41.053
> 
> 标签：jquery, fadein, fadeout

这可能很容易解决，我错过了一些明显但无法真正找到它的东西。

当我单击背景封面时，我希望 div 歌曲标题淡入背景覆盖，它工作得很好，但是当我单击 div 歌曲标题时，我希望歌曲标题淡出，这就是问题的开始。

我尝试了几种不同的方法来解决这个问题，但没有成功。问题是，当我单击歌曲标题 div 时，它会按原样淡出，但半秒钟后它又会淡入，我无法解决这个问题。

```
$(".backgroundcover").click(function() { 
    $(".songtitle").fadeIn("fast");
});

$(".songtitle").click(function() { 
    $(".songtitle").fadeOut("fast");
}); 
```

如果我把它改成这个，它工作得很好，但只有一次，所以我只能淡入 div 一次！

```
$(".backgroundcover").click(function() { 
    $(".songtitle").fadeIn("fast");
});

$(".songtitle").click(function() { 
    $(".songtitle").fadeOut({opacity : 0}, 400);
}); 
```

和 HTML：

```
<div class="backgroundcover">
    <div class="songtitle"><a href="#">Hejsan testar</a>Destiny's child - Unknown</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:51:48.983

这种行为的原因是`.songtitle`click 事件的处理程序允许事件冒泡到它的父级，这导致`.backgroundcover`处理程序也被调用（这会使文本淡入）。

当您使用 jQuery 时，您可以通过`false`从处理程序返回来防止事件传播：

```
$(".songtitle").click(function() { 
    $(".songtitle").fadeOut({opacity : 0}, 400);
    return false;
}); 
```

您可以[在此处查看一个工作示例](http://jsfiddle.net/stevegreatrex/ef6YE/)。

# ruby - 日期和时间在视图中显示错误的日期？

> ID：14294896
> 
> 赞同：0
> 
> 时间：2013-01-12T15:40:56.070
> 
> 标签：ruby, ruby-on-rails-3, controller, timestamp

我有一个运行 Ruby 1.9.3p362 的 Rails 3.2.11 应用程序。

在其中一个模型中，我列出了表中的所有调用：

```
@calls = Call.all 
```

这会在视图中使用以下代码正确输出所有调用：

```
<% @calls.each do |call| %>
    <%= call.time.strftime("%d %b. %Y -  %H:%M") %></td>
<% end %> 
```

表中最近的时间戳为 2013-01-12 14:34:00。使用上面的代码一切正常。最新的通话显示在表格底部，如下所示：

```
12 Jan. 2013 - 14:34 
```

但是，当我尝试颠倒顺序并按时间对调用进行排序时，最新的时间戳会出现混乱：

```
@calls = Call.order('time DESC') 
```

将以下时间戳放在顶部：

```
31 Dec. 2013 - 19:27 
```

有谁知道为什么会这样？一旦我添加了订单过滤器，它就会弄乱时间戳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:12:49.243

I am not 100% sure, but I think the following should give you the timestamps in descending order

```
 @calls = Call.all.reverse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:37:09.107

尝试这个：

```
 @calls = Call.descend_by_time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:40:24.720

你可以试试这个查询：

```
@calls = Call.all.where(:destination => ['123']).desc(:time) 
```

其中`:time`是用于排序的属性名称。

如果您使用`updated_at`每个模型表中普遍存在的属性进行排序，那么您可以替换`:time`为`:updated_at`.

# morris.js - Morris.js 条形图未呈现悬停在文本上

> ID：14294900
> 
> 赞同：3
> 
> 时间：2013-01-12T15:41:24.480
> 
> 标签：morris.js

我正在使用 Morris.js 条形图。出于某种原因，应该出现在 HOVER OVER 上的数字被列在左下角。有人为什么吗？

![莫里斯](../Images/d2ca52020933940f26bb3da30b25fa04.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T20:05:27.623

没有任何代码，很难给出一个好的答案。但是，它可能与您的 CSS 文件有关。

莫里斯用这个来放置胡佛

CSS

```
.morris-hover{position:absolute;z-index:1000;} 
```

JS [morris.hover.coffee](https://github.com/oesmith/morris.js/blob/master/lib/morris.hover.coffee)

也许您有一些与此冲突的 CSS？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-18T19:29:46.313

是的，问题一定出在css上。确保您的 rails 应用程序的 stylesheets 目录中有 morris.css，并且还记得通过添加以下行在 application.css 中包含 css：*=
在适当的位置需要 morris。有同样的问题，并通过要求 css 解决。

# cmd - 为什么这两种情况下的错误级别存在差异？

> ID：14294901
> 
> 赞同：0
> 
> 时间：2013-01-12T15:41:33.157
> 
> 标签：cmd, taskkill, errorlevel

场景 1：calc.exe 正在运行

```
taskkill /IM calc.exe /f | if "%ERRORLEVEL%"=="0" taskkill /IM calc.exe /f 
```

这将 1 设置为错误级别。

场景 2：calc.exe 没有运行

```
taskkill /IM calc.exe /f 
```

这将 128 设置为错误级别。

有人可以解释一下为什么会发生这种情况，以及是否有办法在第一种情况下将错误级别设为 128 以及类似于第二种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:09:53.740

我试验了`taskkill`,`tasklist`和`find`。所有返回不一致的错误级别。这使得***无法***可靠地使用 errorlevel 来了解进程是否正在运行或是否已真正终止。但是，我确实找到了一种不使用错误级别的方法：

```
@echo off

setlocal ENABLEDELAYEDEXPANSION

set _i=0
for /f "delims=" %%i in ('tasklist ^| find /i "%1"') do set /a _i+=1

if !_i! GTR 0 (

  echo Found !_i! instances of %1\.  Terminating all instances...
  taskkill /im "%1" /f > nul 2>&1

  echo Verifying that %1 has been terminated...
  set _i=0
  for /f "delims=" %%i in ('tasklist ^| find /i "%1"') do set /a _i+=1

  if !_i! EQU 0 (
    echo %1 was successfully terminated.
  ) else (
    echo %1 was *not* teriminated.  There are still !_i! instances running.
  )

) else (
  echo %1 is not running.
)

set _i=
endlocal 
```

您需要启用延迟扩展，以便`_i`可以正确评估变量。

该`for ... %%i`行代码集`_i`等于进程在内存中的实例数。由于`find`不返回一致的错误级别，我们可以使用此技术可靠地找到它在内存中的 # 次...

# c - C 检索 Windows 中的启动设置/选项

> ID：14294903
> 
> 赞同：0
> 
> 时间：2013-01-12T15:41:49.310
> 
> 标签：c, windows, winapi, boot, bcdedit

我想知道如何使用 C 和 win32 api 从 bcdedit.exe 获得类似的信息。可能吗？还是应该使用系统命令并将日志写入文件： bcdedit.exe > blaa.txt ？

# git - Git：如何在变基期间修复提交

> ID：14294905
> 
> 赞同：7
> 
> 时间：2013-01-12T15:41:56.597
> 
> 标签：git, rebase

我遇到了以下问题：

在 git rebase 期间，自动解析的提交之一出现错误，即作为自动解析的结果，在头文件中第二次引入了函数声明并且编译失败。

我的问题是：是否有可能回到自动解决的提交，手动解决它，然后继续 rebase，假设我仍在 rebase 过程中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T16:31:31.087

您应该首先完成原始变基，以便您的存储库处于已知状态。然后使用交互式变基编辑引入错误的提交非常容易。检查要修复的提交的 sha1，然后执行

```
git rebase -i <sha1>^ 
```

将打开一个编辑器，其中包含从 HEAD 到您要修复的提交的提交。从列表中找到提交（应该是第一个），将“pick”一词替换为“edit”，保存并退出编辑器。

现在您可以修复错误，然后执行

```
git commit -a --amend
git rebase --continue 
```

就是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-03T12:18:53.733

尽管变基中的变基不起作用，但可以到`git commit --amend`最后提交的修改。
如果问题是由在当前被 rebase 之前的提交引起的（即最后一次提交），您可以修改它而不会对 rebase 过程产生任何副作用。

所以当我遇到这种情况时，我做了以下事情：

1.  取消当前正在重新设置的手动修改：

    ```
    $ git reset HEAD <files being rebased> 
    ```

2.  对导致问题的最后一次提交进行修复：

    ```
    $ git add <files with compilation fix> 
    ```

3.  将编译修复添加到最后提交的修改中：

    ```
    $ git commit --amend 
    ```

4.  返回当前正在重新设置的手动修改：

    ```
    $ git add <files being rebased> 
    ```

希望这可以帮助。

# android - 在代码中为活动创建按钮

> ID：14294912
> 
> 赞同：0
> 
> 时间：2013-01-12T15:42:37.140
> 
> 标签：android

我没有看到最后一个按钮（bx），当第一个按钮数组太大时，例如尺寸为 12，当尺寸为 2 时我看到它。为什么按钮不转换到第二行。

```
protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        LinearLayout linLayout = new LinearLayout(this);
        linLayout.setOrientation(LinearLayout.HORIZONTAL); 
        LayoutParams linLayoutParam = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
        setContentView(linLayout, linLayoutParam);
        int size=20;
        Button[] mButtonsArray = new Button[size];

        LayoutParams Lpx= new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        for (int i=0; i< size;i++) 
        {
       mButtonsArray[i]= new Button(this);
            mButtonsArray[i].setText(name);
            linLayout.addView(mButtonsArray[i], Lpx);
        }
       Button bx = new Button(this);
       bx.setText("back");
        linLayout.addView(bx, Lpx);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:46:54.223

> 为什么按钮不转换到第二行

因为这不是水平的`LinearLayout`工作方式。它水平放置所有孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:47:18.897

因为，你`LinearLayout linLayout`有重力`HORIZONTAL`

```
linLayout.setOrientation(LinearLayout.HORIZONTAL); 
```

如果你想在第二行添加最后一个按钮，那么你必须创建一个**Root LinearLayout**，然后添加其他带有重力`VERTICAL`的父按钮，然后将此 LinearLayout 添加到带有 Gravity 的 Main Root LinearLayout 。`LinearLayout``HORIZONTAL``VERTICAL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:48:15.580

LinearLayout 视图不换行。所以按钮将超过屏幕的右边缘，因此不可见。

您可能想探索 GridView

```
[http://developer.android.com/reference/android/widget/GridView.html][1] 
```

# lwuit - 代号打开 t9 而不是虚拟键盘

> ID：14294913
> 
> 赞同：1
> 
> 时间：2013-01-12T15:42:40.270
> 
> 标签：lwuit, codenameone

`TextField`当客户端专注于输入数据时，如何打开 T9 或默认操作系统键盘而不是代号的 VKB（虚拟键盘） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:32:47.353

您可以使用`TextArea`该类而不是`TextField`始终使用本机编辑的类。不幸的是，由于 J2ME 的限制，它将转到本机编辑屏幕，但如果您对此感到满意，那么这就是您应该采用的方式。

# c# - datagridview cellclick 事件的工作方式类似于 cellcontentclick

> ID：14294917
> 
> 赞同：5
> 
> 时间：2013-01-12T15:43:15.577
> 
> 标签：c#, datagridview

我是 C# 和 Visual Studio 的新手，我正计划使用 datagridview 开发库存系统。当我测试它并使用 cellclick 事件时，它就像 cellcontentclick 事件一样工作，我必须点击内容以确保它是应用程序读取的点击，有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T15:54:54.063

使用 cellclick 事件比 cellcontentclick 好得多。如果单元格内只有文本，则很可能会有大量空白区域，如果您使用的是 cellcontentclick，则不会触发事件。如果事件仅在单击文本时触发，那将产生令人困惑的用户体验。

仅当您有特定原因使用 cellcontentclick 时才使用它，并且在 99% 的情况下，您应该使用 cellclick。

# matlab - 使用频域检测图像中的平行线

> ID：14294920
> 
> 赞同：4
> 
> 时间：2013-01-12T15:43:24.767
> 
> 标签：matlab, image-processing

我有一个带有直线的图像。我想使用频域检查线条是否平行。我在图像上做fft，我得到了变换图像。

有谁知道我如何使用变换图像来查找线是否平行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T06:20:13.923

所以这里有两种情况，使用一些随机角度或相同角度，2条可变长度的线，以及它们的绝对值ffts。 ![样品图片](../Images/7e0b55a477fe05f3a5c91c8bb3b3f8af.png)

因此，有很多方法可以通过查看它们的 fft 来判断它们是否平行，我将在一个更简单的方向上给出提示，从 fft'ed 图像的中心开始......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T13:40:25.023

如果您只有 2 行，那么 FFT 是个坏主意。它缓慢而复杂。

**最简单的实现**是平滑图像。计算梯度角度`(atan2(gradY,gradX))`，而不仅仅是将它们放在直方图中。如果您有一个清晰的峰 - 线是平行的。否则他们不是。从直方图中您还可以知道每条线的角度（局部最大值代表一条线）。

**最快的运行时间**是使用连接组件样式。

1.  循环搜索黑色图像，直到找到白色像素。这是一行的开头
2.  递归遍历像素邻居，直到找到最远的像素。这是行的结尾
3.  当您知道起点和终点时，您可以通过 计算每条线的斜率`atan2(endY-startY,endX-startX)`。现在你分析地比较这些线。如果它们的斜率差异大于 0.1 弧度（5 度），则线不被视为平行。此解决方案适用于任意数量的线条，它还给出了每条线条的所有像素列表 + 线条的数学方程为 AX+BY+C = 0。

**如果你还坚持FFT**我建议旋转原始图像或 FFT 图像，以便至少有一条线平行于 Y 轴（FFT 的表示在 X 轴上）。比检查第二条线是否平行更容易。如果它们平行，则它们都与 y 轴对齐，并且意味着整个 FFT 变换位于 X 轴上。只需检查几个中心行上方的 FFT 的所有像素是否为零。如果不是，则表示线不平行，因为第一条线位于 FFT 图像的 X 轴上，第二条线上下移动。Ps 我没有解释如何旋转图像，所以至少有一条线与 Y 轴对齐。如果您在原始图像上执行此操作，只需计算梯度的方向（角度），找到最大值并将图像旋转（减去最大值，以度为单位）。在 FFT 图像上，您可以执行相同的操作，

重要提示：您的问题从其他人那里得到了许多不准确的答案。这里有一些更正

1.  不要使用 Hough 或 Radon 变换！它相对较慢，对于您只有 2 行的简单任务来说完全是多余的。
2.  当您使用 FFT 时，您实际上可以知道线条的位置。到目前为止，我们使用 FFT 的幅度图像，但也有相位图像，并且线的位置被编码在相位图像中。

最后：我建议您实施我表示为最快运行时间的解决方案。如果图像有 N 个像素，您将平均`O(N)`步数，而只有 FFT 至少需要`O(N*log(N))`步数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:57:42.427

如果您对确定许多等距平行线的周期性感兴趣，则可以使用 FFT。在这种情况下，FFT 变换的图像应该为您提供特定频率的峰值。通过阈值处理，您还可以消除图像中的这些线条。但是，您实际上不会找到图像中线条的位置。

为了找到平行线，您可以使用其他技术，例如：

*   [霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)（不是专门针对平行线）
*   [氡变换](http://en.wikipedia.org/wiki/Radon_transform)（[查看如何使用氡变换检测线条](http://www-rohan.sdsu.edu/doc/matlab/toolbox/images/transf10.html)）

# sql - 如何同时列出 2 个表的所有约束？

> ID：14294921
> 
> 赞同：0
> 
> 时间：2013-01-12T15:44:03.317
> 
> 标签：sql, oracle, oracle-apex

我需要一点帮助。我知道您可以使用 Oracle Apex Application Express 4.0.2.00.07 中的 SQL 命令功能一次查看 1 个表的约束。我想知道如何修改下面的命令以在同一命令中查看我的其他表的约束。这可能吗？（例如`tblOrder, tblProduct`）

```
SELECT constraint_name, 
       constraint_type
  FROM USER_CONSTRAINTS
 WHERE table_name = 'tblCustomer'; 
```

如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:45:47.297

```
SELECT constraint_name, constraint_type
FROM USER_CONSTRAINTS
WHERE table_name IN ('tblOrder', 'tblProduct','tblCustomer'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:49:57.293

您可以只使用`IN`，列出表格；

```
SELECT table_name, constraint_name, constraint_type 
FROM USER_CONSTRAINTS 
WHERE table_name IN ('tblCustomer', 'tblOrder', 'tblProduct') 
```

...或者由于 USER_CONSTRAINTS 仅包含当前用户的表，因此只需通过删除`WHERE`完全列出用户拥有的所有表的所有约束；

```
SELECT table_name, constraint_name, constraint_type 
FROM USER_CONSTRAINTS 
```

# hibernate - MS SQL Server 在 Hibernate 的高并发上会降低性能

> ID：14294925
> 
> 赞同：3
> 
> 时间：2013-01-12T15:44:26.640
> 
> 标签：hibernate, sql-server-2008-r2

我目前在我的项目中使用 MS SQL Server 2008。

我们已经对我们的解决方案进行了性能测试，我们发现执行一些查询所花费的时间变得非常慢。

例如。如果只有 1 个事务进入系统，则执行选择查询所需的时间约为 40 毫秒。

如果并发性很高，对于同一个查询，执行 select 查询的时间最多可能需要 30 秒。

无论如何我们可以调整数据库或任何类型的？

这是 Hibernate 生成的查询。

```
SELECT . . . 
FROM TERMINAL this_ 
LEFT OUTER JOIN MERCHANT merchant2_ ON this_.MERCHANT_FK=merchant2_.ID 
LEFT OUTER JOIN MOBILE_USER mobileuser3_ ON this_.MOBILEUSER_FK=mobileuser3_.ID 
LEFT OUTER JOIN MERCHANT merchant4_ ON mobileuser3_.MERCHANT_FK=merchant4_.ID 
WHERE this_.MOBILEUSER_FK=7 AND this_.STATUS='ACTIVE' LIMIT 1 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T07:08:38.553

如果表中没有太多数据，这可能会更快；

```
SELECT . . . 
FROM TERMINAL this_ 
LEFT OUTER JOIN MOBILE_USER mobileuser3_ ON this_.MOBILEUSER_FK=mobileuser3_.ID 
LEFT OUTER JOIN MERCHANT merchant4_ ON mobileuser3_.MERCHANT_FK=merchant4_.ID 
WHERE this_.MOBILEUSER_FK=7 AND this_.STATUS='ACTIVE' and 
this_.MERCHANT_FK in (SELECT merchant2_.ID FROM MERCHANT merchant2_) 
```

# javascript - JS文件未加载

> ID：14294927
> 
> 赞同：0
> 
> 时间：2013-01-12T15:44:47.973
> 
> 标签：javascript, dom

我在我的 HTML 文件的末尾调用了这个函数——它基本上只是我在网上找到的教程中的一些花哨的菜单内容。由于某种原因，从未调用过 javascript（包括在下面）。我什至尝试添加一个`alert()`来确认这一点，但我从未看到警报弹出窗口，所以我知道它没有被调用，但该文件确实存在于我的服务器上的那个位置。

有什么想法吗？

`<script type="text/javasvcript" src="js/filestorage.js" />`

**文件存储.js**

```
/**
 * On DOMReady initialize page functionality
 */
$(document).ready(function(){

    // Test we load this file
    alert("READY!");

    //Add functionality into the menu buttons
    prepareMenu();
});

/**
 * Prepares the menu buttons for selecting
 * filetypes
 * @return NULL
 */
function prepareMenu()
{
    $("#menu li").click(
        function () {
            $("#menu li").each(
                function(){
                    $(this).removeClass("active");
                }
            );
            $(this).addClass("active");
            HideFiles($(this).children().html());
        return false;
    });
    //Select the first as default
    $("#menu li:first").click();
}

/**
 * Shows only the selected filetypes
 * @param selector
 * @return bool
 */
function HideFiles(selector)
{
    //show all files
    if(selector === "All files")
    {
        $("#files > li").show();
        return true;
    }
    else
    {
        //show only the selected filetype
        $("#files > li").hide();
        $("#files > li." + selector).show();
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T15:46:27.017

您的`type`属性中有错字，这可能是未加载脚本的原因。script 元素还必须有一个结束 script 标签。

**这个：**

```
<script type="text/javasvcript" src="js/filestorage.js" /> 
```

**应该是这样的：**

```
<script type="text/javascript" src="js/filestorage.js"></script> 
```

甚至这个，因为 JavaScript 是默认类型：

```
<script src="js/filestorage.js"></script> 
```

# batch-file - 如何在 BAT 中获得代币 2 以后

> ID：14294928
> 
> 赞同：2
> 
> 时间：2013-01-12T15:44:51.687
> 
> 标签：batch-file, cmd, token

该命令`svn status`返回如下内容：

```
?       SomeClient\BUTCHERED.docx
M       SomeClient\Development notes.txt
?       SomeClient\Received\~$formation for prospective clients.docx
M       SomeClient\Sales\Estimates.xlsx
M       SomeClient\Sales\Specification.docx
?       SomeClient\Sales\~$Estimates.xlsx
?       SomeClient\Sales\~$ecification.docx
?       SomeClient\removed.docx
?       SomeClient\site spec1.docx
?       SomeClient\~$TCHERED.docx
?       SomeClient\~$emoved.docx
?       SomeClient\~$te spec1.docx 
```

据此[，](http://svnbook.red-bean.com/en/1.0/re26.html "svn状态")前 5 列是 1 个字符宽。

如何仅将文件名输出到文本文件？这就是我所拥有的：

```
for /F "tokens=2*" %%U in ('svn status C:\SVN-EDGE') do echo %%U 
```

但是，一旦它在文件名中出现空格，它就会停止回显。如果我将其更改为`do echo %%U %%V`，我会得到正确的输出。

这是正确的方法吗？一段时间以来，我一直在搞乱令牌和分隔符。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T17:24:22.163

`*`分配一个新变量。

将令牌 1 映射到`%%A`然后忽略它并使用`%%B`

```
for /F "tokens=1*" %%A in ('svn status C:\SVN-EDGE') do echo %%B 
```

with`tokens=2*` `%%U`匹配令牌 2 并且`%%V`匹配`*`

* * *

如果第一部分的长度始终相同，则可以使用延迟的子字符串来跳过它：`!line:~8!`

```
setlocal EnableDelayedExpansion

for /f "delims=" %%a in ('svn status C:\SVN-EDGE') do (
    set line=%%a
    set line=!line:~8!
    echo !line!
) 
```

运行`set /?`以获取有关延迟扩展和变量操作的更多信息。

# audio - 如何在 Windows CE 6.0 R3 上 P/Invoke WaveOut API

> ID：14294930
> 
> 赞同：0
> 
> 时间：2013-01-12T15:45:28.823
> 
> 标签：audio, pinvoke, windows-ce, waveout, waveoutwrite

如何在 Windows CE 6.0 R3 上 P/Invoke WaveOut API？

当我把这个

```
[DllImport("winmm.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern MMRESULT waveOutOpen(ref IntPtr hWaveOut, int uDeviceID, ref WAVEFORMATEX lpFormat, DelegateWaveOutProc dwCallBack, int dwInstance, int dwFlags);

[DllImport("winmm.dll")]
public static extern MMRESULT waveInOpen(ref IntPtr hWaveIn, int deviceId, ref WAVEFORMATEX wfx, DelegateWaveInProc dwCallBack, int dwInstance, int dwFlags);

[DllImport("winmm.dll", SetLastError = true)]
public static extern MMRESULT waveInStart(IntPtr hWaveIn);

[DllImport("winmm.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern uint waveInGetDevCaps(int index, ref WAVEINCAPS pwic, int cbwic);

[DllImport("winmm.dll", SetLastError = true)]
public static extern uint waveInGetNumDevs();

[DllImport("winmm.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern uint waveOutGetDevCaps(int index, ref WAVEOUTCAPS pwoc, int cbwoc);

[DllImport("winmm.dll", SetLastError = true)]
public static extern uint waveOutGetNumDevs();

[DllImport("winmm.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern MMRESULT waveOutWrite(IntPtr hWaveOut, ref WAVEHDR pwh, int cbwh);

[DllImport("winmm.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern MMRESULT waveOutPrepareHeader(IntPtr hWaveOut, ref WAVEHDR lpWaveOutHdr, int uSize); 
```

它适用于 Window XP, 7，但在 Wnidows CE 6.0 上会抛出消息“Can't P/Invoke winmm.dll”。

我究竟做错了什么？WaveOut API 是移动到其他 dll 还是其他什么？

无论如何，SoundPlayer（来自 .NET Compact Framework 3.5）工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:03:16.230

将 winmm.dll 更改为 coredll.dll 就完成了！

# java - Java中的返回值

> ID：14294933
> 
> 赞同：1
> 
> 时间：2013-01-12T15:45:56.823
> 
> 标签：java

我在理解非常基本的 Java 代码时遇到了一些麻烦，我不知道最终如何编译 x=2。因为通过我的逻辑它应该是4。代码本身：

```
public class eksami_harjutused {

public static int x=2;
   public static int y=2;  

   public static void main(String[] args) {     
     foo(bar(foo(x)));      
     System.out.println("main x,y: "+x+" "+y);
   }  

   public static int foo(int x) {     
     x++;
     y++;   
     System.out.println("foo x,y: "+x+" "+y);
     return x;
   }

   public static int bar(int x) {
     int z=0, y=10, u=0;    
     --y;
     for(y=1; y<(x*x); y++) {
       for(z=1; z<x; z++) { 
         u++;
       }
     }
     System.out.println("bar x,y: "+x+" "+y);
     return z;       
   }           
} 
```

它打印出来：

富 x,y: 3 3

条 x,y：3 9

富 x,y: 4 4

主要 x,y: 2 4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T15:50:03.010

好吧，`x`是按值传递的——因为它是`int`类型，所以对被调用函数的任何修改`x`都不会影响`x`调用函数。您可以考虑将 value 的副本提供`x`给被调用者，并且被调用者可以对它做任何事情而不会影响`x`调用者的范围。

Java 中的所有基本类型都是按值传递的。其余部分通过引用传递（对象 - 请注意数组是对象）。

另一件事是`foo`and`bar`方法中的变量遮蔽效果：`x`被声明为`foo`and的参数`bar`，因此类成员`x`被遮蔽。`x`对in`foo`和方法的任何访问`bar`都将引用传入的参数，而不是类成员`x`。

`x`方法中打印的值`main`来自类成员`x`，在程序执行过程中永远不会触及。

相反，您可以看到变量`y`在 2 次方法调用中被修改了两次`foo`，因为`y`in`foo`方法将引用类成员`y`。然而， `y`in`bar`方法是指在方法中`y`声明的局部变量`bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:53:48.643

因为 int 是按值传递的，所以您不会期望 x 在 foo() 中递增。您可以尝试 org.apache.commons.lang.mutable.MutableInt 因为 Integer 类也是不可变的。

# html - Unicode 通过 CSS :before

> ID：14294935
> 
> 赞同：86
> 
> 时间：2013-01-12T15:46:08.077
> 
> 标签：html, css, unicode, encoding, icons

我在我的网页上使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，我想在`:before`伪元素内显示一个图标。

根据[文档/备忘](http://fortawesome.github.io/Font-Awesome/cheatsheet/)单，我必须输入`&#xf066;`才能获取此字体，但它不起作用。我认为这是正常的，因为`:before`.
所以我用谷歌搜索了一下，发现如果你想在 中显示 HTML 实体`:before`，你必须使用转义的十六进制引用。
所以我正在寻找十六进制引用，`&#xf066;`但我什么也没找到。我相信那是因为这些都是“私人使用”的价值，不管这意味着什么。

有什么办法让它工作`:before`吗？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2014-08-15T15:26:21.707

在 CSS 中，FontAwesome unicode 仅在声明正确的字体系列（版本 4 或更低）时才有效：

```
font-family: "FontAwesome";
content: "\f066"; 
```

更新 - 版本 5 有不同的名称：

自由的

```
font-family: "Font Awesome 5 Free" 
```

临

```
font-family: "Font Awesome 5 Pro" 
```

品牌

```
font-family: "Font Awesome 5 Brands" 
```

请参阅此相关答案： [https ://stackoverflow.com/a/48004111/2575724](https://stackoverflow.com/a/48004111/2575724)

根据评论（BuddyZ），这里有更多信息[https://fontawesome.com/how-to-use/on-the-desktop/setup/getting-started](https://fontawesome.com/how-to-use/on-the-desktop/setup/getting-started)

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2013-01-12T15:52:57.340

`&#xf066;`is的转义十六进制引用`\f066`。

```
content: "\f066"; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-12T15:53:23.257

[Fileformat.info](http://www.fileformat.info/info/unicode/char/f066/index.htm)是一个很好的参考。在您的情况下，它已经是十六进制，所以十六进制值为`f066`. 所以你会这样做：

```
content: "\f066"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-12T18:40:01.330

图标字体技巧中使用的代码点通常是私人使用的代码点，这意味着它们没有普遍定义的含义，不应该用于开放信息交换，只能通过相关方之间的私人协议。但是，私人使用代码点可以表示为任何其他 Unicode 值，例如在 CSS 中使用类似 的符号`\f066`，正如其他人所回答的那样。如果您的文档是 UTF-8 编码的并且您知道如何在您的创作环境中通过其编号键入任意 Unicode 值（当然它通常会使用未知符号显示），您甚至可以这样输入代码点特点）。

但是，这不是使用图标字体的正常方式。通常，您使用随字体提供的 CSS 文件并使用`<span class="icon-resize-small">foo</span>`. 然后 CSS 代码将负责在元素的开头插入符号，您不需要知道代码点编号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-11T04:07:28.867

首先在您的 HTML 文件中链接 fontwaesome CSS 文件，然后创建一个 after 或 before 伪类，如 "font-family: "FontAwesome"; content: "\f101";" 然后保存。我希望这项工作很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-22T14:59:57.867

重要的事情 - 你必须添加字体重量（字体重量：900）才能让它工作。

# c - 如何在 C 中检查 ndarray 的数据类型

> ID：14294936
> 
> 赞同：7
> 
> 时间：2013-01-12T15:46:11.550
> 
> 标签：c, numpy

谁能告诉我如何检查`ndarray`已传递给 C 代码的数据类型？

`float32`在具体示例中，如果数组的数据类型是or ，我想调用不同的函数`double/float64`。所以像

```
if( Dtype(MyArray) == NPY_FLOAT )
{
   DoSomething_float( MyArray );
}
else
{
   DoSomething_double( MyArray );
} 
```

我已经找到了

```
PyTypeNum_ISFLOAT(num)
PyDataType_ISFLOAT(descr)
PyArray_ISFLOAT(obj) 
```

在 numpy C API 中，但我不明白如何使用它们。我已经尝试找到一个有启发性的示例，但没有找到。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T15:53:16.180

你快到了，因为你正在寻找`PyArray_TYPE`：

```
int typ=PyArray_TYPE(MyArray);

switch(typ) {
case NPY_FLOAT:
    DoSomething_single(MyArray);
    break;
case NPY_DOUBLE:
    DoSomething_double(MyArray);
    break;
default:
    error("unknown type %d of MyArray\n", typ);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T16:06:30.160

如果您正在处理 a `PyArrayObject* arr`，那么执行此操作的漫长而复杂的方法是检查`arr->descr->type`or `arr->descr->type_num`which 持有：

> `char PyArray_Descr.type` 指示数据类型的传统字符代码
> 
> `int PyArray_Descr.type_num`唯一标识数据类型的数字。对于新的数据类型，此编号在注册数据类型时分配

`PyArrayObject`正如@umlauete 回答所指出的那样，有更简洁的方法可以将其合并到您的代码中，但了解您的和`PyArray_Descr`结构中的内容总是一件好事。并且总是“阅读[文档](http://docs.scipy.org/doc/numpy/reference/c-api.types-and-structures.html)，卢克！”

# php - 如何将包含查询的变量传递到另一个页面？

> ID：14294937
> 
> 赞同：0
> 
> 时间：2013-01-12T15:46:24.413
> 
> 标签：php, html, mysql

我想将包含查询的变量传递给另一个 php 页面。我有如下变量。

```
$search_type = $_POST['search_type'];
$search_brand = $_POST['search_brand'];

$result = "SELECT * FROM vehicle_info WHERE type='".$search_type."' AND brand='".$search_brand; 
```

然后我创建一个指向不同页面的链接，我想将**$result**变量传递给该页面。

```
<?php echo "<a href='$secondpage.php?data=$result'>Click Here</a>"; ?> 
```

但是当我点击这个链接时，整个数据并没有与 URL 一起执行。当我单击链接时，我的 URL 如下所示

```
.../secondpage.php?data=SELECT%20*%20FROM%20vehicle_info%20WHERE%20type= 
```

URL 不包含变量（$search_type 和 $search_brand）那么我怎样才能做到这一点呢？请帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:55:21.093

```
$search_type = $_POST['search_type'];
$search_brand = $_POST['search_brand'];

$result = mysql_query("SELECT * FROM vehicle_info WHERE type='".$search_type."' AND brand='".$search_brand) or die(mysql_error());  

while($row = mysql_fetch_array( $result )) {
    extract($row);
    echo "<a href='secondpage.php?searchtype=$type&searchbrand=$brand'>Click Here</a>";
} 
```

所有这一切都假设您的 secondpage.php 采用值 searchtype 和 searchbrand 来显示结果。问题是，您没有获取结果，您显示的是查询本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:51:59.750

您可以使用 $_SESSION 来存储查询，也可以使用 json-encode 函数对字符串进行编码并将其传递给链接

# sql - SQL查询存储过程参数

> ID：14294940
> 
> 赞同：1
> 
> 时间：2013-01-12T15:46:46.280
> 
> 标签：sql

我想知道原因，当我们在更新、删除或插入中创建存储过程时

```
update TABLE_NAME set column_name = @variable_name 
```

没事。

为什么我们不能传递参数或变量来选择喜欢

```
select @column_variable from @table_variable 
```

我知道作为一种解决方法，您需要使用动态 SQL，但它不起作用的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:01:54.890

If this is about SQL Server, then the reason why you cannot parametrise column names and table names with this statement,

```
select @column_variable from @table_variable 
```

is because this can already be a valid statement and interpreted in a *different* way:

*   `@name` would be interpreted as a reference to a scalar variable whose value is to be returned as a dataset column;

*   `@name` would be interpreted as a *table variable* name, i.e. the name of a variable of a `table` type.

In each of these cases, the use of `@name` to denote a parameter holding the name of an actual column or table to select from would simply be *very* confusing.

On the other hand, one might think that a different syntax could have been devised for this (i.e. specifically for parametrisation of names) and yet it hasn't.

My opinion (and I have to admit that it's just my opinion) why there isn't such a syntax is that by building parametrisable names into SQL you would probably end up with less efficient query planner. If at the time of query compilation you don't know what and whence the query is trying to select, you can't really build a really efficient plan for it, can you.

Of course, building a query plan could have been delayed until the time when the name parameters have been evaluated, but the planner would have had to build a plan *every time* such a query is invoked, unlike now, when the query plan is stored once and then used many times.

# java - Android：拖放多个图像

> ID：14294945
> 
> 赞同：3
> 
> 时间：2013-01-12T15:47:23.383
> 
> 标签：java, android, drag-and-drop

我有这个“拖放”的东西。

所以基本上我们正在制作一个原型，让用户（孩子）将糖果拖放到罐子里。下面的代码仅适用于一个糖果（1 个图像），第二个图像根本不会移动。我不知道为什么。

任何答案都将受到高度赞赏，我希望你能解释一下，因为我在这个 android 开发中真的很新。谢谢你。

这些是我研究了一段时间的代码

```
package com.example.mathventure;

import com.example.mathventure.R.drawable;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.Rect;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.AbsoluteLayout;
import android.widget.ImageView;

@SuppressLint("NewApi")
public class AddTutActivity extends Activity {
    private static int candyInJar = 3;
    private int candyOutJar = 2;
    private int totalCandy;
    //private String candyId;
    private ImageView[] candies = new ImageView[11];
    private ImageView[] candiesOut = new ImageView[candyOutJar];
    private AbsoluteLayout tutLayout;
        @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add_tut);

        tutLayout = (AbsoluteLayout) findViewById(R.id.tutLayout);
        tutLayout.setOnTouchListener(new touchListener());
        candiesOut[0] = (ImageView) findViewById(R.id.candyOut1);
        candiesOut[1] = (ImageView) findViewById(R.id.candyOut2);
        candiesOut[0].setOnTouchListener(new touchListener());
        candiesOut[1].setOnTouchListener(new touchListener());

        totalCandy = candyInJar + candyOutJar;
        for(int i=0;i<candies.length;i++){
            candies[i] = new ImageView(this);
        }
        candies[0].setBackgroundResource(R.drawable.candy_jar_0);
        candies[1].setBackgroundResource(R.drawable.candy_jar_1);
        candies[2].setBackgroundResource(R.drawable.candy_jar_2);
        candies[3].setBackgroundResource(R.drawable.candy_jar_3);
        candies[4].setBackgroundResource(R.drawable.candy_jar_4);
        candies[5].setBackgroundResource(R.drawable.candy_jar_5);
        candies[6].setBackgroundResource(R.drawable.candy_jar_6);
        candies[7].setBackgroundResource(R.drawable.candy_jar_7);
        candies[8].setBackgroundResource(R.drawable.candy_jar_8);
        candies[9].setBackgroundResource(R.drawable.candy_jar_9);
        candies[10].setBackgroundResource(R.drawable.candy_jar_10);

        candies[candyInJar] = (ImageView) findViewById(R.id.candyInJar);

    }

    private boolean dragging = false;
    private Rect hitRect = new Rect();

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_add_tut, menu);
        return true;
    }

    class touchListener extends Activity implements OnTouchListener{

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            boolean eventConsumed = true;
            int x = (int)event.getX();
            int y = (int)event.getY();
            int dragging = 0;
            int action = event.getAction();
            if (action == MotionEvent.ACTION_DOWN) {
                if (v == candiesOut[0]) {
                    dragging = 0;
                    eventConsumed = false;
                }
                if (v == candiesOut[1]){
                    dragging = 1;
                    eventConsumed = false;
                }
            } else if (action == MotionEvent.ACTION_UP) {

                if (dragging == 0) {
                    candies[candyInJar].getHitRect(hitRect);
                    if (hitRect.contains(x, y)){
                        candiesOut[0].setImageDrawable(null);
                        candies[candyInJar].setImageResource(drawable.candy_jar_4);
                    }
                }
                else if(dragging == 1){
                    candies[candyInJar].getHitRect(hitRect);
                    if (hitRect.contains(x, y)){
                        candiesOut[1].setImageDrawable(null);
                        candies[candyInJar].setImageResource(drawable.candy_jar_5);
                    }
                }
                eventConsumed = false;

            } else if (action == MotionEvent.ACTION_MOVE) {
                if (v != candiesOut[0] && v != candiesOut[1]) {
                    if (dragging != 1) {
                        setAbsoluteLocationCentered(candiesOut[dragging], x, y);
                    }
                }
            }

            return eventConsumed;
        }

        private void setAbsoluteLocationCentered(View v, int x, int y) {
            setAbsoluteLocation(v, x - v.getWidth() / 2, y - v.getHeight() / 2);
        }

        private void setAbsoluteLocation(View v, int x, int y) {
            AbsoluteLayout.LayoutParams alp = (AbsoluteLayout.LayoutParams) v.getLayoutParams();
            alp.x = x;
            alp.y = y;
            v.setLayoutParams(alp);
        }

        private void setSameAbsoluteLocation(View v1, View v2) {
            AbsoluteLayout.LayoutParams alp2 = (AbsoluteLayout.LayoutParams) v2.getLayoutParams();
            setAbsoluteLocation(v1, alp2.x, alp2.y);
        }
    }

} 
```

这个是针对 xml 的：

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".AddTutActivity" 
    android:id="@+id/tutLayout">

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="116dp"
    android:fontFamily="123Marker"
    android:text="3 candies + 2 candies = ?"
    android:textColor="@android:color/black"
    android:textSize="50sp" />

<TextView
    android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fontFamily="123Marker"
    android:text="Below is a sample question on addition. Now, you need to move the 2 candies you wanted to add into the candy jar."
    android:textColor="@android:color/black"
    android:textSize="25sp" 
    android:background="#FF3300"/>

<ImageView
    android:id="@+id/candyInJar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="178dp"
    android:layout_x="149dp"
    android:layout_y="167dp"
    android:src="@drawable/candy_jar_3" />

<ImageView
    android:id="@+id/candyOut1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="94dp"
    android:layout_x="489dp"
    android:layout_y="347dp"
    android:src="@drawable/candy" />

<ImageView
    android:id="@+id/candyOut2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="544dp"
    android:layout_y="346dp"
    android:src="@drawable/candy" />

</AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:23:06.277

您可能想查看这个库和示例； [https://github.com/2dwarfs/MultiTouchControllerTutorial](https://github.com/2dwarfs/MultiTouchControllerTutorial)

它将帮助您创建可拖动和可捏合的图像，并且您可以添加任意数量的图像，就像添加 Drawable 一样简单。

您可以按原样使用它，将其调整为只能拖动，或者从中吸取一些教训和灵感。

# pointers - Fortran 中的空指针

> ID：14294947
> 
> 赞同：4
> 
> 时间：2013-01-12T15:47:24.657
> 
> 标签：pointers, fortran

我正在向 Fortran 代码添加一个模块，并遇到以下问题。我有一个`Info`包含其他几个变量的派生数据类型，其中一个 4D 指针数组（它是一个水文代码，所以它是 3 个空间组件和 1 个变量组件）。为了使我的子程序更易于阅读，我只是创建一个指针`q`并指向`Info%q`，如下所示：

```
 real,pointer::q(:,:,:,:)
    q=>Info%q
    ...
    some work on q 
```

我遇到的问题是：我应该使用`deallocate(q)`before`nullify(q)`吗？或者，由于`q`指向代码中其他地方所需的数组，我应该只使用`nullify`?

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T16:55:56.743

只能作废！否则原始指针将未定义，数组将不再存在！

# r - 在许多长度不等的行块内按顺序编号

> ID：14294948
> 
> 赞同：3
> 
> 时间：2013-01-12T15:47:35.513
> 
> 标签：r

我的实际数据集由每个 的重复测量值组成`id`，其中测量值的数量可能因人而异。一个简化的例子是：

```
dat <- data.frame(id = c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 3L, 3L, 3L))
dat
##    id
## 1   1
## 2   1
## 3   1
## 4   1
## 5   1
## 6   1
## 7   2
## 8   2
## 9   3
## 10  3
## 11  3 
```

我正在尝试按变量顺序编号`dat`行。`id`结果应该是：

```
dat
##    id s
## 1   1 1
## 2   1 2
## 3   1 3
## 4   1 4
## 5   1 5
## 6   1 6
## 7   2 1
## 8   2 2
## 9   3 1
## 10  3 2
## 11  3 3 
```

你会怎么做？我尝试使用 选择每行的最后一行`id`，`duplicated()`但这可能不是这样，因为它适用于整个列。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T15:50:45.773

使用`ave()`. 第一项是您要应用该功能的项目；其他项目是您的分组变量，并且`FUN`是您要应用的功能。有关`?ave`更多详细信息，请参阅。

```
transform(dat, s = ave(id, id, FUN = seq_along))
#    id s
# 1   1 1
# 2   1 2
# 3   1 3
# 4   1 4
# 5   1 5
# 6   1 6
# 7   2 1
# 8   2 2
# 9   3 1
# 10  3 2
# 11  3 3 
```

如果你有一个大数据集或者正在使用`data.table`包，你可以使用“ `.N`”，如下所示：

```
library(data.table)
DT <- data.table(dat)
DT[, s := 1:.N, by = "id"]
## Or
## DT[, s := sequence(.N), id][] 
```

或者，您可以使用`rowid`，如下所示：

```
library(data.table)
setDT(dat)[, s := rowid(id)][]
#     id s
#  1:  1 1
#  2:  1 2
#  3:  1 3
#  4:  1 4
#  5:  1 5
#  6:  1 6
#  7:  2 1
#  8:  2 2
#  9:  3 1
# 10:  3 2
# 11:  3 3 
```

* * *

为了完整起见，这里是“tidyverse”方法：

```
library(tidyverse)
dat %>% 
  group_by(id) %>% 
  mutate(s = row_number(id))
## # A tibble: 11 x 2
## # Groups: id [3]
##       id     s
##    <int> <int>
##  1     1     1
##  2     1     2
##  3     1     3
##  4     1     4
##  5     1     5
##  6     1     6
##  7     2     1
##  8     2     2
##  9     3     1
## 10     3     2
## 11     3     3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T15:58:06.053

```
dat <- read.table(text = "
    id          
    1 
    1 
    1 
    1 
    1 
    1 
    2 
    2 
    3 
    3 
    3", 
header=TRUE)

data.frame(
    id = dat$id,
    s = sequence(rle(dat$id)$lengths) 
) 
```

给出：

```
 id s
1   1 1
2   1 2
3   1 3
4   1 4
5   1 5
6   1 6
7   2 1
8   2 2
9   3 1
10  3 2
11  3 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T15:56:06.003

使用`tapply`但不优雅`ave`

```
 cbind(dat$id,unlist(tapply(dat$id,dat$id,seq_along)))
  [,1] [,2]
11    1    1
12    1    2
13    1    3
14    1    4
15    1    5
16    1    6
21    2    1
22    2    2
31    3    1
32    3    2
33    3    3 
```

# java - 损坏的 JSON 编码？

> ID：14294949
> 
> 赞同：1
> 
> 时间：2013-01-12T15:47:44.210
> 
> 标签：java, json, serialization, gson

我正在将同一类的 JSON 对象从 servlet 发送到小程序，但此类中的所有字符串变量都缺少一些字符，例如：'ą'、'ę'、'ś'、'ń'、'ł' . 但是，“ó”会正常显示 (?)。例如：“Zaznacz prawid **?** ow **?** operacj **?** por **ó** wnywania dw **ó** ch zmiennych typu”

**解决方案** 我希望我能更彻底地解释它，但正如亨利注意到的那样，是 IDE 导致了这个问题。我使用谷歌票上的farmer1992类解决了它。它打印转义的 unicode 字符 (\u...) - 这是我的小程序正确编码字符的唯一方法。此外，我必须不时重新启动 NetBeans IDE 以强制 Tomcat servlet 正常工作（我不知道为什么 :) ）。

Servlet 代码（已更新解决方案）：

```
//begin of the servlet code extract
public void sendToApplet(HttpServletResponse response, String path) throws IOException
{
    TestServlet x = new TestServlet();
    x.load(path);

    String json = new Gson().toJson(x);
    response.setCharacterEncoding("UTF-8");
    response.setContentType("application/json;charset=UTF-8");

    PrintWriter out = response.getWriter();
    //out.print(json);
    //out.flush();
    GhettoAsciiWriter out2 = new GhettoAsciiWriter(out);
    out2.write(json);
    out2.flush();

}
//end of the servlet code extract 
```

小程序代码：

```
//begin of the applet code extract
public void retrieveFromServlet(String path) throws MalformedURLException, IOException
{
    String encoder = URLEncoder.encode(path, "UTF-8");
    URL urlServlet = new URL("http://localhost:8080/ProjektServlet?action=" + encoder);
    URLConnection connection = urlServlet.openConnection();
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);
    connection.setRequestProperty("Content-Type", "application/json;charset=UTF-8");

    InputStream inputStream = connection.getInputStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(inputStream));
    String json = br.readLine();
    Test y = new Gson().fromJson(json, Test.class);
    inputStream.close();
}
//end of the applet code extract 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:58:41.153

这些字符应该以 \uxxxx 形式编码

你可以看到这张票 [http://code.google.com/p/google-gson/issues/detail?id=388#c4](http://code.google.com/p/google-gson/issues/detail?id=388#c4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:52:23.280

有了这条线

```
BufferedReader br = new BufferedReader(new InputStreamReader(inputStream)); 
```

将使用平台字符编码（可能是也可能不是 UTF-8）。尝试使用显式设置编码

```
BufferedReader br = new BufferedReader(new InputStreamReader(inputStream, "UTF-8")); 
```

# jquery - jquery.validate.js 破坏 twitter 引导模式

> ID：14294951
> 
> 赞同：-1
> 
> 时间：2013-01-12T15:48:18.443
> 
> 标签：jquery, twitter-bootstrap, jquery-validate, modal-dialog

当将 jquery.validate（用于电子邮件目的。）与 twitter 引导程序结合使用时，除非您在框外单击，否则模式窗口无法关闭（它会使按钮无用。）。在 jquery 代码中有一个`.cancel`用于抑制验证的类，但这似乎没有帮助。

我创建了一个精简的[jsfiddle](http://jsfiddle.net/eldereko/N9jR5/)，以及我正在处理的实际[页面（特别是衬衫和滑板的信息按钮。）。](http://cincitucky.com/booty-q.php)

我花了过去五个小时试图找到一个解决方案，你可能对这个问题有任何见解绝对会摇滚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:16:41.823

当我用最新的 1.10.0 版本替换您的 4 或 5 年旧版本 (1.5.5) 时，似乎工作正常

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js"></script> 
```

工作：http: [//jsfiddle.net/QAkpk/](http://jsfiddle.net/QAkpk/)

另请参阅文档： [http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

以下是如何正确使用 jsFiddle，为您的启迪：

[http://jsfiddle.net/rMt8g/](http://jsfiddle.net/rMt8g/)

请注意，只有 的内容*放置*`<body></body>`在`HTML`窗格中。使用`Add Resources`面板包含外部文件，并从面板中选择 jQuery 版本`Choose Framework`。

# php - PHP中的Excel自定义时间格式解码

> ID：14294958
> 
> 赞同：0
> 
> 时间：2013-01-12T15:49:28.240
> 
> 标签：php, excel, timestamp

我在 PHP 中处理了大量电子表格，其中一个单元格包含一个时间戳，该时间戳具有以下自定义格式：`[h]:mm:ss.0;@`

这会将诸如 2.09491E-05 之类的数字转换为 0:00:01.8

当我将它读入 php 时，我只能得到 2.09491E-05 的值，但我不知道如何将其转换为秒。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:00:55.857

在 Excel 中，一天等于 1。因此，为了将 Excel 表示的 1.81 秒 2.09491E-05 转换为每秒等于 1 的数字，只需乘以一天中的秒数，即 24* 60*60 或 86,400：

```
2.09491E-05 * 86,400 = 1.81 
```

# java - 字母在数组的元素中

> ID：14294959
> 
> 赞同：0
> 
> 时间：2013-01-12T15:49:32.693
> 
> 标签：java, arrays, string

如何查看字符串数组的元素是否包含某个字母？我需要它来做刽子手。使用的单词数组是 Words。continueGame() 是我放这个的地方。我想我可以得到我的随机词，然后找出这个字母是否在那个随机词中。我怎么做？

```
 public void continueGame(){
    letterSelected = JOptionPane.showInputDialog(null, "Take another guess!");

        if(getWords().indexOf(getWords()) == (letterSelected)){

        }

        if(! getWords().contains(letterSelected)){
         guesses++;
         continueGame();
        }else{
           System.out.println(letterSelected);
        }
    checkBodyParts();
    JOptionPane.showInputDialog(null, "");
} 
```

#

```
/**Get the random word from the array*/
public String getWords (){
    String randomWord = words[randy.nextInt( words.length)];
    return randomWord;
}

/**Get the indexes of the letter of the random word indices don't start with 1*/
public String getSelected(){
    return letterSelected;
}

/**Finds index of the letter of randomWord*/
public int getIndex(){
    int index = getWords().indexOf(getSelected());
    return index;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:14:47.883

I don't really understand the snippet you gave us.

But you can consider the following code to find word of an `Array` that contains a specified character :

```
String[] words = {"foo", "bar", "qux"};
for (String word : words)
{
    if (word.indexOf('a') != -1)
    {
        System.out.println("Matched word '" + word + "' for character 'a'");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:14:50.687

I just don't get your logic. You are returning new random word everytime you call getWords(). You should assign randomly generated word to some variable and then work with this variable.

To your concrete problem it should be something like this:

```
// get your random word
String myGeneratedRandomWord = getWords ();

// your method 
public void continueGame(){
   letterSelected = JOptionPane.showInputDialog(null, "Take another guess!");
   if(myGeneratedRandomWord.indexOf(letterSelected ) != -1) {
        // it contains the letter
   }
   else {
        // wrong guess
   }
} 
```

Read more about [String.indexOf()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29) method.

# ubuntu - Openal - alGetError() 总是返回 AL_INVALID_OPERATION

> ID：14294960
> 
> 赞同：5
> 
> 时间：2013-01-12T15:49:33.703
> 
> 标签：ubuntu, openal

我正在使用笔式驱动器运行 ubuntu 12.04。我已经安装了 openAL 并且我的主要是：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iostream>
#include <al.h> 
#include <alc.h>

// Buffers hold sound data.
ALuint Buffer;
using namespace std;
string ErrorCheck(ALenum error)
{
    if(error == AL_INVALID_NAME)
    {
        return "Invalid name";
    }
    else if(error == AL_INVALID_ENUM)
    {
        return " Invalid enum ";
    }
    else if(error == AL_INVALID_VALUE)
    {
        return " Invalid value ";
    }
    else if(error == AL_INVALID_OPERATION)
    {
        return " Invalid operation ";
    }
    else if(error == AL_OUT_OF_MEMORY)
    {
        return " Out of memory like! ";
    }

    return " Don't know ";

}

int main(int argc, char **argv)

{
    ALenum error;   

    error = alGetError();
    cout << "\n\tInitial error at start of program - " << ErrorCheck(error);

    error = alGetError();
    cout << "\n\tError persists - " << ErrorCheck(error);

    cout << "\n\tGenerating buffer...";
    alGenBuffers(1, &Buffer);

    error = alGetError();
    if(error != AL_NO_ERROR)
    {
        cout << "\n\tError generating buffer - "<< ErrorCheck(error) << "\n\n";
        return 0;
    }

    return 0;
} 
```

这使用该行编译没有错误

```
g++ main.cpp -I/usr/include/AL -lopenal -lalut 
```

但是当程序运行时，对 alGetError() 的每次调用都会返回 AL_INVALID_OPERATION 我认为调用 alGetError() 是为了重置错误标志，所以我在开始时调用它两次，第二次调用至少应该不返回错误。我真的被困住了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:51:52.527

该线程的答案仍然适合您的问题。我没有在您的代码中看到任何 OpenAL 上下文的创建。

[http://opensource.creative.com/pipermail/openal/2008-May/011130.html](http://opensource.creative.com/pipermail/openal/2008-May/011130.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-24T15:34:33.067

我相信我遇到了同样的问题。如果未设置当前上下文，则`alGetError()`返回。`AL_INVALID_OPERATION`显然这是令人困惑的，因为它表示错误函数本身的错误，而不是它实际检索到的错误，可以说应该是不同的错误代码。

以下内容直接取自 OpenAL-Soft 源 ( [https://github.com/kcat/openal-soft/blob/master/OpenAL32/alError.cpp](https://github.com/kcat/openal-soft/blob/master/OpenAL32/alError.cpp) )：

```
AL_API ALenum AL_APIENTRY alGetError(void)
START_API_FUNC
{
    ContextRef context{GetContextRef()};
    if(UNLIKELY(!context))
    {
        constexpr ALenum deferror{AL_INVALID_OPERATION};
        WARN("Querying error state on null context (implicitly 0x%04x)\n", deferror);
        if(TrapALError)
        {
#ifdef _WIN32
            if(IsDebuggerPresent())
                DebugBreak();
#elif defined(SIGTRAP)
            raise(SIGTRAP);
#endif
        }
        return deferror;
    }

    return context->LastError.exchange(AL_NO_ERROR);
}
END_API_FUNC 
```

# php - 显示给用户的权限与 dfined 不同

> ID：14294962
> 
> 赞同：-1
> 
> 时间：2013-01-12T15:49:37.567
> 
> 标签：php, facebook

在我的应用程序的权限部分，我有这个扩展权限

```
manage_pages publish_stream status_update photo_upload video_upload create_note share_item publish_checkins 
```

当单击“预览配置您的权限”时，对话框和权限是正确的，但是当我想从我的应用程序登录时，应用程序中的请求只是基本用户信息，此文本显示在下方“此应用程序可能代表您发布，包括状态更新、照片等。”

但我想要管理页面权限并且没有它

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T16:11:44.077

the problem was i must set the all needed scopes in the first request for facebook

scopes must be comma separated

# ios - 从另一个视图控制器清除视图

> ID：14294963
> 
> 赞同：1
> 
> 时间：2013-01-12T15:49:40.917
> 
> 标签：ios, objective-c, ios6

我有一个 viewController，在其中我有一个视图，我可以在其中通过点击在 Paint 中进行绘制。在那个控制器中，我有一种清除屏幕的方法-

```
- (void) clearS
{
    [(TouchTrackerView *)self.view clear];
} 
```

现在，因为我不想用按钮占据我的屏幕，所以我在另一个屏幕上有按钮，可以将应用程序重置为起始位置，我希望它清除屏幕。该按钮属于不同的视图控制器，除此之外，我希望它调用我的绘图视图控制器并要求它清除屏幕。所以我有设置通知，就像在绘图视图控制器中这样：

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(clearS) name:@"clearScreen" object: nil]; 
```

像这样在我的视图控制器中单击一个按钮：

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"clearScreen" object: nil]; 
```

据我了解，当单击按钮时，会发布通知并调用方法。它崩溃了。

```
[(TouchTrackerView *)self.view clear] 
```

据我了解，问题是在方法调用的那一刻，“self”变量是我的非绘图视图控制器，它试图对自身的视图执行清晰的方法，它缺乏并崩溃。

如何将方法发送到正确的视图控制器？我的想法有问题吗？也许可以用更好的方式来解决这个问题？

**编辑：** 我发现了问题，

```
[(TouchTrackerView *)self.view clear] 
```

调用view是UIScrollView，不支持clear方法。所以我制作了一个包含正确视图的属性，并将其更改为

```
[(TouchTrackerView *)self.correctView clear] 
```

它就像一个魅力。

我之所以选择通知，是因为它只有两行代码，而且我是初学者，我很难将我的头脑围绕在代表身上，所以我将保持原样，尤其是它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:11:17.993

我认为通知，本质上是一种一对多的通信方法，在这里不适合使用。更好的方法是将一个作为另一个的委托 -> 一旦按下按钮并调用相应的 IBAction，委托（在您的情况下，您用于绘图的视图控制器）应该收到一条消息并执行任何操作这是它需要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:19:03.233

除非您尝试广播多个对象可能感兴趣的某些信息，否则我会避免通知。

更好的方法可能是为绘画视图控制器创建一个委托协议——

所以 PaintingViewControllerDelegate 协议可能有这样的方法

*   (void)paintingViewControllerWillClear:(PaintingViewController*)paintingViewController;
*   (void)paintingViewControllerDidClear:(PaintingViewController*)paintingViewController;

现在带有按钮的控制器成为了 PaintingViewController 的委托，并且该对象根据需要提供了 PaintingViewControllerDelegate 协议的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:56:20.487

在哲学层面上，虽然我很同情其他人的意见，即您可以用[委托](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)模式（或者，更好的委托[协议](https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/Protocol.html#//apple_ref/doc/uid/TP40008195-CH45-SW1)模式）替换通知，但令我震惊的是，这不是让两个控制器进行通信的适当示例直接对彼此。您可能应该使用[MVC](https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html#//apple_ref/doc/uid/TP40008195-CH32-SW1)模型，其中编辑视图控制器`A`设计用于编辑绘图（从而更新模型并协调视图）和重置视图控制器`B`应该只更新/重置模型。如果`A`需要通知模型更改，则在模型和控制器之间应用委托协议模式`A`。但我不认为`B`应该完全沟通`A`。

在实际层面上，通知完全没有理由不能正常工作。不幸的是，您分享的内容不足以让我们回答这个问题。您应该分享错误消息的细节，我们可能会为您提供更多帮助。

# php - 使用 api 在页面墙上发帖没有提供分享按钮

> ID：14294965
> 
> 赞同：1
> 
> 时间：2013-01-12T15:49:43.520
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试使用 facebook api 在页面墙上分享帖子。一切都很完美。但分享按钮并没有出现在喜欢和评论旁边。

这是我的代码

```
$message_body = array(
                    'access_token' =>Yii::app()->session['page_access_token'],
                'message' => $message,
                'actions' => array(
                 array(
                    'name' => Yii::t('UserController', ' Get details '),
                    'link' => Yii::app()->createAbsoluteUrl ('user/adminmoreaboutprovider?&postId='.$fbPostId ),

                    ),
                    ),
                    );

$facebook->api("/".$userpage."/feed","post",$message_body); 
```

知道如何在那里带来共享链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:52:16.600

```
$msg_body = array(
        'message' => $message,
        'actions' => array(
                            array(
                                'name' => 'Get details',
                                'link' =>  Yii::app()->createAbsoluteUrl('user/adminmoreaboutprovider?&postId='.$fbPostId ),
                            )
                        )
    ); 
 $ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/6creeks/feed');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $msg_body);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);  //to suppress the curl output 
$result= curl_exec($ch);  
curl_close ($ch); 
```

这给了我分享 lin，但页面墙上缺少获取详细信息链接。有没有办法把这两者结合起来？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:14:07.610

使用 curl，您可以使用以下命令发布帖子（是的，以及共享按钮）。

```
curl -F 'access_token=XXXX' -F 'message=test' https://graph.facebook.com/[PAGE NAME]/feed 
```

希望这可以在 PHP 中使用。

# android - Android SQLite 3、JOINS 或多个查询？

> ID：14294967
> 
> 赞同：1
> 
> 时间：2013-01-12T15:49:51.933
> 
> 标签：android, sqlite, join

我正在编写一个支持 SQLite 3 的小型 Android 应用程序。ATM 我正在​​实现一些 DB-Functions 并问自己是否最好有一个大的连接查询，或者是否可以使用多个查询来提高应用程序的性能。

假设我有 3 个表“drivers”、“driven_runs”、“race_disciplines”。每个driven_run 都有一个驱动程序和一个race_discipline。假设我想获得某个车手在某个学科中的所有比赛学科。

**解决方案 1**

我已经编写了一个带有 Driver-Object 作为回报的函数 getDriver(driverID) 和一个带有 Race Discipline 作为回报的函数 getRaceDiscipline(disciplineID)。所以我只想创建一个函数

```
public ArrayList<DrivenRun> getDrivenRunsOnDiscipline(short driverID, short disciplineID) {
    ArrayList<DrivenRun> drivenRuns = new ArrayList<DrivenRun>();
    String sql = "SELECT * FROM " + DBHelper.TABLE_DRIVEN_RUNS + " WHERE " 
            + DBHelper.DRIVEN_RUNS_COLUMN_DRIVER_ID + "=" + driverID + " AND " 
            + DBHelper.DRIVEN_RUNS_COLUMN_RACE_DISCIPLINE_ID + "=" + disciplineID + ";";
    Cursor result = rawQuery(sql);
    if (result.moveToFirst()) {
        do {
            Driver driver = getDriver(driverID);
            RaceDiscipline discipline = getRaceDiscipline(disciplineID);
            DrivenRun run = new DrivenRun();
            run.setDriver(driver);
            run.setDiscipline(discipline);
            run.setResult("WHATEVER");
            drivenRuns.add(run);
        } while(result.moveToNext());
    }
    return drivenRuns;
} 
```

在这种情况下，将依次执行 3 个查询，但编码要简单得多。

**解决方案 2**

我会创建一个大的连接查询，比如

```
String sql = "SELECT * FROM driven_runs CROSS JOIN drivers CROSS_JOIN race_disciplines WHERE driven_runs.driver_id=drivers.id AND driven_runs.race_discipline_id=race_disciplines.id"
Cursor result = rawQuery(sql); 
```

并将手动创建 Driver 和 DrivenRun 对象。

这个解决方案需要更多的编写，但只执行一个查询（或者数据库在连接 3 个表时也执行 3 个查询？）

长话短说，是否可以使用解决方案 1，因为在性能方面没有太大区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:58:53.133

一般来说，选择更简单的代码，直到有很好的性能理由不这样做。鉴于无论如何这都是 SQLite，我认为不会有太大的性能差异，因为查询的开销非常低。

过早的优化是万恶之源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T22:51:40.337

你应该使用正确的连接语法，这样你的查询就不会那么麻烦了：

```
SELECT THECOLUMNSYOUREALLYNEED
FROM driven_runs JOIN
     drivers
     on  driven_runs.driver_id=drivers.id join
     race_disciplines
     on driven_runs.race_discipline_id=race_disciplines.id
where driver.id = YOURDRIVEIDHERE and race_discipline = YOURDISCIPLINEIDHERE 
```

此外，只返回您需要的列。`where`其次，在子句中插入适当的 id 。您的版本正在返回所有内容，这是完全没有必要的。

这是一个非常简单的查询，它完成了 SQL 数据库最擅长的工作——将大表连接在一起。即使使用 SQLite，您最好还是让数据库来完成这项工作。至少，它将节省一些从数据库层到应用程序层的往返通信。

在更复杂的环境中，数据库将利用多处理器、多磁盘和智能缓存结果来进一步优化查询响应。

# javascript - 在primefaces数据表上使用监听器执行行点击

> ID：14294968
> 
> 赞同：4
> 
> 时间：2013-01-12T15:49:55.910
> 
> 标签：javascript, ajax, jsf, jsf-2, primefaces

问题很短。我创建了一个`p:datatable`，但在其中`p:column`我实际上有一个`div`元素。不幸的是，数据表应该有可选择的行，而 div 不会合作;)。所以解决方法是手动调用，在div元素上有onclick监听，但是应该怎么调用数据表的rowSelection呢？是否有一些 Primefaces 元素的功能列表？

编码：

```
<p:dataTable var="user" value="#{rec.friends}" rowKey="#{user.id}" widgetVar="friendscrollist"
        rendered="#{not empty rec.friends}" scrollable="true" rowIndexVar="findex"
        scrollHeight="500" scrollWidth="220" selectionMode="single" selection="#{rec.chosenFriend}" styleClass="friendscroll">
                <p:column width="198" id="friend#{findex}">
    <div class="friendlist" onclick="friendscrollist.clickRow(#{findex})" />
                </p:column>
                <p:ajax update=":leftform" event="rowSelect" />
                <p:ajax update=":leftform" event="rowUnselect" />
</p:dataTable> 
```

当然它是一个简化版本，只有你需要的东西。所以问题是在**`div onclick?`**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T17:13:18.303

正是您所需要的`<p:dataTable widgetVar>`has`unselectAllRows()`和functions。`selectRow(index)`

```
<div onclick="friendscrollist.unselectAllRows(); friendscrollist.selectRow(#{findex})"> 
```

`friendscrollist.`不幸的是，这些功能没有可用的文档，但在 Chrome/Firebug 中，当您进入JS 控制台时，您可以在自动完成列表中看到所有可用功能的列表。下面是来自 Chrome 的屏幕：

![在此处输入图像描述](../Images/06824536fa5396b49dea69bc7fbf64c5.png)

查看 JS 源代码或基于函数名称的常识应该告诉/提示您这些函数的作用。

* * *

**更新**：我的立场得到纠正，其中一些功能实际上记录在[PrimeFaces 3.4 User's Guide](http://www.primefaces.org/documentation.html)中。它们位于第 146 页第 3.26 章“数据表”的“客户端 API”部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T17:35:16.520

接受的解决方案适用于单个选择表，但不适用于多选。解决这个问题的另一种方法应该适用于两者是使用以下而不是`<div>`

```
<h:panelGroup layout="block"> 
```

这将`<div>`在您的列内呈现，并且不会干扰 onclick 事件处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-20T07:24:10.993

对于分页，您可以通过这种方式控制每页问题的行数：

```
friendscrollist.selectRow(#{rowIndex} - friendscrollist.paginator.getCurrentPage() * friendscrollist.paginator.cfg.rows); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T14:25:49.230

如果启用了分页，您可以执行以下操作：

```
onmouseup="friendscrollist.unselectAllRows();friendscrollist.selectRow(#{rowIndex} - friendscrollist.paginator.getCurrentPage() * 15);" 
```

当 15 是表中的行数时。

我没有找到一种以编程方式获取行数的方法......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T07:24:30.640

我想为所有遇到类似问题的右键单击或上下文菜单的人添加其他信息。如果您正在使用，则无法捕获右键单击事件`<p:graphicimage>`。不知何故，`<img>`标签的 oncontextmenu 事件在 primefaces 中被删除。

如果要通过右键单击行内的图像内容来选择行，则应使用 tag 和 oncontextmenu 事件。

```
<img src="..." oncontextmenu="dataTable.unselectAllRows();dataTable.selectRow(#{rowIndex});"/> 
```

# asp.net - Asp.Net MVC 4 默认网址 - 缺少尾随斜杠会弄乱 href 链接

> ID：14294971
> 
> 赞同：1
> 
> 时间：2013-01-12T15:50:01.827
> 
> 标签：asp.net, asp.net-mvc, url-rewriting, routes

我的项目配置为使用项目 url aka “localhost/AppName/”，没有特定页面或任何内容，一切正常，但如果用户删除最后一个斜杠，我的 href 将停止工作，因为它忽略了“AppName”，所以对于例如，如果我有一个名为 Books/Index 的操作，如果用户删除最后一个斜杠“localhost/AppName”并按 Enter，然后单击链接以导航到书籍/索引，则完整路径将为“ localhost/Books/Index”这将不起作用，因为它在 localhost 之后缺少“AppName”。

我尝试更改路线并创建重写规则，但仍然没有运气.. 我不确定为什么会发生这种情况，这让我担心，我考虑过改变链接的生成方式，但我**认为**执行“/”会更好，对此的任何想法将不胜感激。

顺便说一句，我正在使用默认路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:24:59.207

有一些方法试图解决这个问题，你可以谷歌它，你可以尝试一些解决方案。但没有一个是完美的。

在我的选择中，真正的解决方法就是取消使用相对路径。在您的情况下，您不应该使用书籍/索引作为 href，而是应该始终使用 url 帮助程序来创建绝对路径。

这个问题的原因来自于asp.net的路由机制，所以根治就是停留在路由机制上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T13:22:26.120

其实我也有这个问题..我不确定这是否是正确的解决方案，但这对我来说很好！使用@Url.Action() 作为href ..

```
<a href = @Url.Action("ActionName","ControllerName")> 
```

# c# - 将其修饰函数的功能包装在一些外部代码中的属性

> ID：14294977
> 
> 赞同：3
> 
> 时间：2013-01-12T15:50:23.703
> 
> 标签：c#, .net

> **可能重复：**
> [通过属性的 C# 包装方法](https://stackoverflow.com/questions/2206554/c-sharp-wrap-method-via-attributes)

我想实现这样的功能：

```
[Wrap]
public void Foo()
{           
    /* foo logic */
} 
```

其中`[Wrap]`attribute是一个属性，它将函数逻辑包装在一些外部代码中——例如让它成为一个事务范围：

```
using(var scope = new TransactionScope())
{
    /* foo logic */
    scope.Complete();
} 
```

这样的属性怎么写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:52:23.607

这是一个[*面向方面编程*](http://en.wikipedia.org/wiki/Aspect-oriented_programming)的例子，其中`Wrap`一个*方面*是。

C# 没有对面向方面编程的内置支持，但有一些插件（例如[postsharp）](http://www.sharpcrafters.com/)支持它。

# c++ - 处理稍后调用删除的对象是否安全

> ID：14294982
> 
> 赞同：1
> 
> 时间：2013-01-12T15:51:03.713
> 
> 标签：c++, qt

我正在考虑这样的写作方法：

```
QString getData() {
    QNetworkReply *reply = getReply();
    reply->deleteLater();
    return QString::fromUtf8(reply->readAll()).trimmed();
} 
```

安全吗？如果我被迫这样写：

```
QString getData() {
    QNetworkReply *reply = getReply();
    QString result = QString::fromUtf8(reply->readAll()).trimmed();
    reply->deleteLater();
    return result;
} 
```

我要避免 QString 两次（是吗？，一次将其放入结果中，第二次将其按值返回），这是我想避免的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:56:50.680

从[deleteLater](http://doc.qt.io/qt-4.8/qobject.html#deleteLater)文档中：

> 计划删除此对象。
> 
> 当控制返回事件循环时，该对象将被删除。如果调用此函数时事件循环没有运行（例如，在 QCoreApplication::exec() 之前对对象调用 deleteLater()），则一旦启动事件循环，该对象将被删除。

所以你在那里做的事情是安全的。显然，分发可能被持久化的对象（或其成员）的引用或指针是错误的。但是，如果您要退回副本，那很好。

但是你正在做的事情可能会或可能不会做你想做的事情。`readAll`不阻塞，它返回*当前可用*的数据。这意味着一次调用`readAll`可能只会读取部分响应 - 除非您确保所有数据都已通过其他方式到达。

其他需要注意的事情，来自文档：

> 请注意，进入和离开新的事件循环（例如，通过打开模式对话框）不会执行延迟删除；对于要删除的对象，控件必须返回到调用 deleteLater() 的事件循环。

因此，在做这种事情时唯一需要担心的是调用以某种方式重新进入“当前”事件循环的函数。但如果通过以下方式完成，则不会发生这种情况[`QCoreApplication::processEvents`](http://doc.qt.io/qt-4.8/qcoreapplication.html#processEvents)：

> 如果您正在运行一个连续调用此函数的本地循环，而没有事件循环，则不会处理 DeferredDelete 事件。

所以这也被覆盖了。延迟删除逻辑相当复杂，但在正常情况下是安全的。如果您正在深入研究 Qt 内部结构（或调用可能在那里做一些可疑事情的代码），请保持警惕。但是对于正常的代码流，`deleteLater`只要您没有可能持续存在的悬空引用（或指针），它就是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:54:47.580

做什么`deleteLater`？从它的名字来看，我希望它会在稍后的某个时间点注册要删除的对象（事务结束？会话结束？）。如果是这样，只要没有出现稍后的时间点，您就可以安全地使用它。唯一的问题是知道该点何时发生，但是对于事务结束或会话结束之类的事情，您可能是安全的——如果您的函数是在事务或会话中调用的，则事务或会话在您返回之前不会结束。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T16:13:31.760

It is safe, but you'd better not use `deleteLater` at all, because

> The object will be deleted when control returns to the event loop. If the event loop is not running when this function is called (e.g. deleteLater() is called on an object before QCoreApplication::exec()), the object will be deleted once the event loop is started.

means that object can be deleted mmm... never. This pretend to work like GC, but it is even worse:

```
class A: public QObject
{
    char x[10000000];
};

void process()
{
    A* a = new A();
    //delete a;
    a->deleteLater();
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    for (int k = 0; k < 1000000; ++k) {
        process();
    }
    return a.exec();
} 
```

At least it is not C++ idiomatic, that uses RAII.

From the other size, copying `QString` is a cheap operation, because `QSring` uses copy-on-write ideome.

# php - 使用 htaccess 设置 cookie 路径

> ID：14294983
> 
> 赞同：0
> 
> 时间：2013-01-12T15:51:03.500
> 
> 标签：php, .htaccess, cookies

在我的（远程）服务器中，对于 cookie，默认设置`path`为 not `/`。我需要那条路`/`。

当然，我可以在创建 cookie 时设置路径：

```
 setcookie("name", "value" ,time() + 3600, "/"); 
```

但我感兴趣，如何通过`.htaccess`文件设置默认 cookie 路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:17:13.373

php.ini 的这个参数是：

```
session.cookie_path 
```

因此，在 htaccess 文件中，您可以执行以下操作：

```
php_value session.cookie_path yourpath 
```

您也可以使用 php 函数`session_set_cookie_params()`，但它可能对您的需要有点重。

# ruby - @,x,X 指令如何与 Ruby pack()/unpack() 方法一起使用？

> ID：14294988
> 
> 赞同：1
> 
> 时间：2013-01-12T15:51:49.540
> 
> 标签：ruby, ruby-1.9.3

我刚刚浏览了[Ruby Doc](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-frozen-3F)。但是没有足够的代码来理解以下三个在现实生活中是如何使用的：

`@`, `X`, `x`.

谁能用一个简单的片段来解释它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:22:43.533

我会给你几个例子，并会和你一起学习：

```
[1,2,3,4].pack("CCCC")
=> "\x01\x02\x03\x04" 
```

所以以无符号字符序列化。新字节中的每个字母。

```
[1,2,3,4].pack("CCXCC")
=> "\x01\x03\x04"
[1,2,3,4].pack("CCXXC")
=> "\x03" 
```

将“X”视为退格指令

```
[1,2,3,4].pack("CCxC")
=> "\x01\x02\x00\x03"
[1,2,3,4].pack("CCxxC")
=> "\x01\x02\x00\x00\x03" 
```

'x' 放置零值字节。

```
[1,2,3,4].pack("CC@C")
=> "\x01\x03"
[1,2,3,4].pack("CC@@C")
=> "\x01\x03"
[1,2,3,4].pack("CC@@CC")
=> "\x01\x03\x04"
[1,2,3,4].pack("CC@CC")
=> "\x01\x03\x04"
[1,2,3,4].pack("CC@C@C")
=> "\x01\x04"
[1,2,3,4].pack("CC@C@@C")
=> "\x01\x04" 
```

'@' 似乎是一个退格键，但不会同时支持多个操作。最后一个解释与文档中的文本完全无关：

> @ 移动到绝对位置

但它似乎在做什么。

**在以下上下文中查看时，编辑**顺便说一句`@`似乎更合乎逻辑`unpack`：

```
[1,2,3,4,5].pack("CCCCC").unpack("CCC@CCCCC@CC")
=> [1, 2, 3, 1, 2, 3, 4, 5, 1, 2] 
```

再次从头开始拆包。

**EDIT2**这里是解包上下文中其他两个指令的解释：

```
[1,2,3,4,5].pack("CCCCC").unpack("CCCXC")
=> [1, 2, 3, 3]
[1,2,3,4,5].pack("CCCCC").unpack("CCCXXC")
=> [1, 2, 3, 2]
[1,2,3,4,5].pack("CCCCC").unpack("CCCxC")
=> [1, 2, 3, 5] 
```

所以'x'忽略下一个解码字节，'X'将使前一个字节成为下一个再次读取的字节。'X' 可以堆叠。

这是我第一次尝试总结结果：

`pack`：

*   'x' 放置零字节
*   'X' 像退格指令一样工作，这意味着前一个字节实际上不会被打包
*   '@' 对我来说有无法解释的行为

`unpack`：

*   'x' 跳过用于解包的下一个字节
*   'X' 将阅读器向后移动，这意味着将再次读取最后一个读取的字节。
*   '@' 将读者移到开头。这意味着所有字节将再次被解包。

***注意***阅读器是我为了便于解释而编造的一个词，绝不是正式的。

**EDIT3**这里也解释了“\x01”符号：

```
a = [17, 22, 31]
=> [17, 22, 31]
a.pack("CCC")
=> "\x11\x16\x1F" 
```

这似乎代表十六进制表示。我链接的所有网站显然都使用十进制表示。否则，可以看出这些是给定数字的十六进制表示。

# gwt - GWT 在页面加载后注入 jQuery 脚本

> ID：14294994
> 
> 赞同：0
> 
> 时间：2013-01-12T15:52:22.667
> 
> 标签：gwt

我有带有脚本文件 custom.js 的 html 页面，它是 GWT 的引导程序

```
<!DOCTYPE html>
<html>
<head>
    <!-- -->
    <script type="text/javascript" src="login/login.nocache.js"></script>
    <script type="text/javascript" src="common/js/custom.js"></script>
</head> 
        <div id="gwt-inject-place"/> 
</html> 
```

没关系，一切正常。但是在 custom.js 中，我需要在 login/login.nocache.js 在`<div id="gwt-inject-place"/>`. 通常 custom.js 在注入发生之前以某种方式运行。

那么我应该怎么做才能注入 JavaScript jquery 文件呢？

```
alert('global');
jQuery(document).ready(function () 
{
 alert('inner');
} 
```

这注入 custom.js 但只`global alert`显示。

```
public void onModuleLoad(){
  RootPanel.get("gwt-inject-place").add(view);
  ScriptInjector.fromUrl("../common/js/custom.js").inject();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:12:04.663

来自谷歌文档：

```
<script src="js-url"/> 
```

自动注入位于 src 指定位置的外部 JavaScript 文件。有关详细信息，请参阅自动资源包含。

所以，你必须把注射剂放在`module.gwt.xml`

更多信息：[链接](http://www.gwtapps.com/doc/html/com.google.gwt.doc.DeveloperGuide.Fundamentals.Modules.ModuleXml.html)

# xml - 什么是 XPath 表达式以仅查找第一次出现？

> ID：14294997
> 
> 赞同：63
> 
> 时间：2013-01-12T15:52:38.517
> 
> 标签：xml, xpath, expression

我使用了这个 Xpath 表达式`"//span[@class='Big']"`，并获得了该页面中`<span>`标记和`class='Big'`.

我的问题是，如果我只想要页面上的第一次出现，而不是所有出现，那么正确的`Xpath`表达方式是什么？

谢谢，纳林

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-01-12T16:05:36.487

**正确答案（注意括号）**：

```
(//span[@class='Big'])[1] 
```

**在一般情况下，以下表达式是错误的：**

```
//span[@class='Big'][1] 
```

因为它选择`span`文档中的每个元素，满足第一个谓词中的条件，并且是*它的父元素的第一个这样的子*元素——在一个 XML 文档中可以有很多这样的元素，并且它们都会被选中。

更详细的解释见：[https ://stackoverflow.com/a/5818966/36305](https://stackoverflow.com/a/5818966/36305)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-13T17:45:41.990

如果您期望[`class`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class)属性***等于*** `Big`（没有任何其他类附加到元素），Dimitre Novatchev 的答案是正确的：

```
(//span[@class="Big"])[1] 
```

...类似于以下 JavaScript 表达式：

```
document.querySelectorAll('span[class="Big"]')[0] 
```

* * *

另一方面，如果您希望`Big`成为属性***中任意数量***的类之一[`class`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class)（而不是唯一的类），则可以使用以下表达式：

```
(//span[contains(concat(" ", normalize-space(@class), " "), " Big ")])[1] 
```

...类似于以下 JavaScript 表达式：

```
document.querySelectorAll('span.Big')[0] 
```

# php - 有人可以解释为什么 WordPress 分页不喜欢自定义循环吗？

> ID：14294999
> 
> 赞同：0
> 
> 时间：2013-01-12T15:52:59.343
> 
> 标签：php, wordpress, pagination, wordpress-theming

[我有与This other stack post](https://stackoverflow.com/questions/14286352/pagination-elements-not-displaying-in-wordpress-loop)完全相同的问题。我怎么无法弄清楚回复者的意思。我已经在我的自定义循环中尝试了他们的示例，它看起来与 OP 相同，但是分页不起作用。它没有出现。

我在这个循环中也有这个问题：

```
$attr = array(
    'align' => 'left',
    'class' => 'thumbnail imageRight',
    'width' => 350,
    'height' => 350
);

if(have_posts()){
    while(have_posts()){
        the_post();
        ?>
        <div class="post">
            <?php the_post_thumbnail('medium', $attr); ?>
            <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
            <p><?php the_excerpt(); ?></p>
        </div>
        <?php
    }

    next_posts_link('&laquo; Older Entries');
    previous_posts_link('Newer Entries &raquo;');
} 
```

分页根本不会出现，如果我在上方和下方回显某些内容，我会看到回显的文本 obv，但我看不到分页链接....

我已将 WP 设置为每页显示 3 个帖子，并且我在数据库中有超过 45 个帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T09:59:06.377

我一遍又一遍地遇到这个问题 - 我不知道您是否使用自定义页面模板，但最后我只是使用存档页面而不是查询类别或帖子类型 - 例如archive-portfolio.php和分页只是致力于此。- 其中一些问题会引起数小时的刺激，但这似乎可以解决问题。