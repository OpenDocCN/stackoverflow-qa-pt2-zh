# StackOverflow 问答 13325000-13325999

# java - 在java中重新打开文件的正确方法是什么？

> ID：13325004
> 
> 赞同：1
> 
> 时间：2012-11-10T18:44:39.153
> 
> 标签：java, file-io, printwriter

我已经解决这个问题好几天了，但无法让它发挥作用。问题要求我打开一个文件并计算平均值然后关闭它。然后重新打开它并计算标准偏差。我遇到的麻烦是在我计算平均值并关闭文件之后。当我尝试重新打开时，它显示找不到文件的错误。这是我到目前为止所拥有的：

```
File fr = new File(filename);
Scanner inputFile = new Scanner(fr);

filename = inputFile.nextLine();

while(inputFile.hasNext())
{
    double number = inputFile.nextDouble();
    sum =  number + sum;

    count++;

    line = inputFile.nextDouble();
}
inputFile.close();
mean = sum / count;

//New File

File file = new File(filename);
Scanner br = new Scanner(file);

double sumB = 0;
int countB = 0;

filename = br.nextLine();
while(br.hasNext())
{
    double sumthin = br.nextDouble();
    difference =  sumthin - mean;
    sumB = sumB + Math.sqrt(difference);
    count++;
    line = br.nextDouble();
}
br.close();
Math.sqrt(sumB / count); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:50:08.553

您（可能）没有两次打开同一个文件 - 您正在从第一个文件中读取文件名，然后打开第二个文件：

```
File fr = new File(filename);
...
filename = inputFile.nextLine();
...
File file = new File(filename); 
```

# html - 我如何将盒子放在盒子模态css中另一个盒子的底部

> ID：13325007
> 
> 赞同：2
> 
> 时间：2012-11-10T18:45:11.790
> 
> 标签：html, css

```
<div class="cat-left">
</div>
<div class="cat-right">
</div>

.cat-left {
float: left;
width: 233px;
border: 1px solid #c5c5c5;
}
.cat-right {
margin-left: 12px;
float: left;
} 
```

我写这个是为了制作两个盒子（一个在左边，一个在右边）。现在我想做另一个

```
<div class="cat-left"></div> 
```

如果我将 cat-left 放在 cat-left 之后，那么它会显示在第一个 cat-left 的右侧。你已经看到我使用了边框。他们有什么选择让我把它放在现有的 cat-left 的底部。

检查 [http://s7.postimage.org/3t6rfpdih/demo.png](http://s7.postimage.org/3t6rfpdih/demo.png)以找出我想要的代码到底是什么。

我尝试将绝对位置赋予第二只左猫，但不确定在不以像素为单位设置边距的情况下它如何帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:06:06.640

您需要在 cat-left 框中包含两个子 div，如下所示：

```
<div class="cat-left">
    <div class="cat-left-inner">
        Left top
    </div>
    <div class="cat-left-inner">
        Left bottom
    </div>
</div>
<div class="cat-right">
    Right
</div> 
```

​在哪里

```
.cat-left-inner {
    height: 10em;
} 
```

您需要为您的 div 提供设置的高度，以使它们以所需的方式填充其容器。有关更具体的示例，请参见此小提琴：http: [//jsfiddle.net/A6axj/2/](http://jsfiddle.net/A6axj/2/)。

# jquery - 使用 jQuery 的打字机效果

> ID：13325008
> 
> 赞同：15
> 
> 时间：2012-11-10T18:45:13.260
> 
> 标签：jquery

*编辑：我并没有真正问出我在原始问题中应该问的所有问题。为了帮助寻找类似答案的人更容易做到这一点，这就是问题的最终结果：*

**如何使用在语句末尾暂停、擦除语句并写入新语句的闪烁光标来制作打字机效果？**

在下面查看 Yoshi 的答案。它正是这样做的……

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-10T19:54:47.477

演示：http: [//jsbin.com/araget/5/](http://jsbin.com/araget/5/)

```
/*** Plugin ***/

(function($) {
  // writes the string
  //
  // @param jQuery $target
  // @param String str
  // @param Numeric cursor
  // @param Numeric delay
  // @param Function cb
  // @return void
  function typeString($target, str, cursor, delay, cb) {
    $target.html(function(_, html) {
      return html + str[cursor];
    });

    if (cursor < str.length - 1) {
      setTimeout(function() {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
    } else {
      cb();
    }
  }

  // clears the string
  //
  // @param jQuery $target
  // @param Numeric delay
  // @param Function cb
  // @return void
  function deleteString($target, delay, cb) {
    var length;

    $target.html(function(_, html) {
      length = html.length;
      return html.substr(0, length - 1);
    });

    if (length > 1) {
      setTimeout(function() {
        deleteString($target, delay, cb);
      }, delay);
    } else {
      cb();
    }
  }

  // jQuery hook
  $.fn.extend({
    teletype: function(opts) {
      var settings = $.extend({}, $.teletype.defaults, opts);

      return $(this).each(function() {
        (function loop($tar, idx) {
          // type
          typeString($tar, settings.text[idx], 0, settings.delay, function() {
            // delete
            setTimeout(function() {
              deleteString($tar, settings.delay, function() {
                loop($tar, (idx + 1) % settings.text.length);
              });
            }, settings.pause);
          });

        }($(this), 0));
      });
    }
  });

  // plugin defaults  
  $.extend({
    teletype: {
      defaults: {
        delay: 100,
        pause: 5000,
        text: []
      }
    }
  });
}(jQuery));

/*** init ***/

$('#target').teletype({
  text: [
    'Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et',
    'accusam et justo duo dolores et ea rebum. Stet clita kasd',
    'gubergren, no sea takimata sanctus est Lorem ipsum dolor sit',
    'amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et accusam',
    'et justo duo dolores et ea rebum. Stet clita kasd gubergren,',
    'no sea takimata sanctus est Lorem ipsum dolor sit amet.'
  ]
});

$('#cursor').teletype({
  text: ['_', ' '],
  delay: 0,
  pause: 500
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<span id="target"></span>
<span id="cursor"></span>
<!-- used for the blinking cursor effect -->
```

**插件**：

```
(function ($) {
  // writes the string
  //
  // @param jQuery $target
  // @param String str
  // @param Numeric cursor
  // @param Numeric delay
  // @param Function cb
  // @return void
  function typeString($target, str, cursor, delay, cb) {
    $target.html(function (_, html) {
      return html + str[cursor];
    });

    if (cursor < str.length - 1) {
      setTimeout(function () {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // clears the string
  //
  // @param jQuery $target
  // @param Numeric delay
  // @param Function cb
  // @return void
  function deleteString($target, delay, cb) {
    var length;

    $target.html(function (_, html) {
      length = html.length;
      return html.substr(0, length - 1);
    });

    if (length > 1) {
      setTimeout(function () {
        deleteString($target, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // jQuery hook
  $.fn.extend({
    teletype: function (opts) {
      var settings = $.extend({}, $.teletype.defaults, opts);

      return $(this).each(function () {
        (function loop($tar, idx) {
          // type
          typeString($tar, settings.text[idx], 0, settings.delay, function () {
            // delete
            setTimeout(function () {
              deleteString($tar, settings.delay, function () {
                loop($tar, (idx + 1) % settings.text.length);
              });
            }, settings.pause);
          });

        }($(this), 0));
      });
    }
  });

  // plugin defaults  
  $.extend({
    teletype: {
      defaults: {
        delay: 100,
        pause: 5000,
        text: []
      }
    }
  });
}(jQuery)); 
```

**html**：

```
<span id="target"></span>
<span id="cursor"></span> <!-- used for the blinking cursor effect --> 
```

**初始化**：

```
$('#target').teletype({
  text: [
    'Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et',
    'accusam et justo duo dolores et ea rebum. Stet clita kasd',
    'gubergren, no sea takimata sanctus est Lorem ipsum dolor sit',
    'amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et accusam',
    'et justo duo dolores et ea rebum. Stet clita kasd gubergren,',
    'no sea takimata sanctus est Lorem ipsum dolor sit amet.'
  ]
});

$('#cursor').teletype({
  text: ['_', ' '],
  delay: 0,
  pause: 500
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T19:58:34.820

最后添加了一个简单的函数，以及介于两者之间的一些变量......

[**小提琴**](http://jsfiddle.net/videsignz/dnkwp/)

```
var where, when; //added

$.fn.teletype = function(opts){
    var $this = this,
        defaults = {
            animDelay: 50
        },
        settings = $.extend(defaults, opts);

    var letters = settings.text.length; //added

    where = '#' + $($this).attr('id'); //added
    when = settings.animDelay; //added

    $.each(settings.text, function(i, letter){
        setTimeout(function(){
            $this.html($this.html() + letter);

            if( $($this).html().length == letters ){ reverse(); } // Added to trigger reversing function

        }, settings.animDelay * i);
    });
};

$(function(){
    $('#container').teletype({
        animDelay: 100,
        text: 'Now is the time for all good men to come to the aid of their country...'
    });
});

// Added Reversing Function

    function reverse(){

        if ($(where).html().length > 0){          
            x = $(where).html().length - 1;
            y = $(where).html().substr(0, x);
            $(where).html(y);
            setTimeout(reverse , when);
        }else{
            console.log('Reverse Complete');
            clearTimeout(reverse);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-15T12:25:39.230

您还可以查看我的名为 jquery-typewriter 的插件，它完全符合您的要求。

它可能没有那么多功能，但值得一看。

它有一个闪烁的光标、彩色文本等，都可以自定义。

这是链接： [https ://www.npmjs.com/package/jquery-typewriter](https://www.npmjs.com/package/jquery-typewriter)

# haskell - 哪里缩进不正确？短代码

> ID：13325011
> 
> 赞同：2
> 
> 时间：2012-11-10T18:45:32.023
> 
> 标签：haskell, where-clause, shortcode

我试图制作一个非常短的代码，因为我们有一个偏爱最短代码的规则。我们必须创建一个函数，以相同的顺序将列表转换为升序和降序列表的新列表：例如。`[1,6,2,1,7,3,2,8,4]`, 变成`[[1,6],[2,1],[7],[3,2],[8],[4]]`

所以我尝试执行以下操作：

```
func :: Ord a => [a] -> [[a]]
func xs = f1 d [a]
f1 [] ys = [c]
f1 xs ys    | a >= b = d `f1` a:ys
            | otherwise = c: d `f2` [a]
f2 [] ys = [c]
f2 xs ys    | a < b = d `f2` a:ys
            | otherwise = c : d `f1` [a]
    where   a = head xs
            b = head ys
            c = reverse ys
            d = tail xs 
```

但我明白了

```
parse error on input '=' 
```

上`line "b = head ys"`。

我认为可以在 where 块中定义多个函数？

其他缩进会产生很多错误

```
not in scope 'a'
not in scope 'b'
not in scope 'c'
not in scope 'd' 
```

或者

```
parse error on input 'b' 
```

我必须这样做以保存一些令牌/具有更短的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:52:56.637

你有一个比缩进更根本的问题：一个`where`块对于*单个*函数案例来说是本地的。您正在尝试使用您的块为一大堆函数`where`提供绑定（例如`a`, `b`, `c`, ）。`d`这行不通。

为了澄清，这个*正确缩进*的代码不起作用：

```
foo :: Int -> Int
foo 0 = a
foo 1 = b
  where a = 2
        b = 3 
```

你会得到一个像`Not in scope: `a'`. 这是因为`where`唯一延伸到`foo 1`外壳上；它甚至不涉及`foo 0`案例，更不用说任何其他功能。

另一方面，您的代码似乎希望该`where`块适用于您的*所有*功能。要使不同函数可以看到绑定，您必须将它们放在与函数本身相同的范围级别。

此外，Haskell 缩进有点复杂。你真的应该避免使用标签；拥有一个能够正确理解 Haskell 的编辑器也确实很有帮助。我发现 Emacs 在这里非常好——我永远不必担心 Emacs 的 Haskell 缩进。

Emacs 可能有一些学习曲线（你应该学习教程），但我认为这是非常值得的。您还必须安装 Haskell 模式。如果您获得了最新版本的 Emacs，您应该可以使用包管理器来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:53:18.073

这就是编译器的样子：

```
func :: Ord a => [a] -> [[a]]
func xs = f1 d [a]
f1 [] ys = [c]
f1 xs ys    | a >= b = d `f1` a:ys
                | otherwise = c: d `f2` [a]
f2 [] ys = [c]
f2 xs ys    | a < b = d `f2` a:ys
                | otherwise = c : d `f1` [a]
            where    a = head xs
                        b = head ys
                        c = reverse ys
                        d = tail xs 
```

`=`所以对于编译器来说，where 子句中第一行之后的行看起来像是该行的延续，当然你不能在一行上没有插入分号的情况下有多行。

你不应该**混合**制表符和空格（实际上你不应该使用制表符）。如果您使用制表符，请将您的编辑器配置为将它们解释为八个空格。

并且，该子句仅适用于最后一个等式，因此在前四个等式`where`中没有适用范围。`a, b, c, d``func`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:38:10.553

您的错误消息是因为您混合了制表符和空格。最好只使用空格。

现在，如果你在写

```
a = head xs
b = head ys
c = reverse ys
d = tail xs 
```

然后

```
xs = (a:ds)
ys = (b:es) 
```

让我们用模式匹配重写你的函数：

```
func :: Ord a => [a] -> [[a]]
func [] = []
func (a:ds) = f1 ds [a]
f1 [] ys = [reverse ys]
f1 (a:ds) (b:es) | a >= b = ds `f1` (a:b:es)
                 | otherwise = reverse (b:es): ds `f2` [a]
f2 [] ys = [reverse ys]
f2 (a:ds) (b:es) | a < b = ds `f2` (a:b:es)
                 | otherwise = reverse (b:es) : ds `f1` [a] 
```

我知道这会更长，但请耐心等待。`f1`与 确实相同`f2`，但比较发生了变化。让我们得到一个函数`no`来否定比较，这样`(no (>=)) x y = not (x >= y)`：

```
no cmp x y = not (cmp x y) 
```

事实上，我们可以这样写

```
no = ((not.).)
r = reverse

func' (a:ds) = f (>=) ds [a]
f :: Ord a => (a -> a -> Bool) -> [a] -> [a] -> [[a]]
f _ [] ys = [r ys]
f cp (a:ds) ys@(b:es) | cp a b = f cp ds (a:ys)
                      | True = r ys : f (no cp) ds [a] 
```

现在*更*短了。

# javascript - Date.now() 如何在 JavaScript 中工作？

> ID：13325012
> 
> 赞同：0
> 
> 时间：2012-11-10T18:45:37.047
> 
> 标签：javascript, date

我正在努力创造一个我可以轻松与他人联系起来的时间价值。

```
var created = Date.now() * 1000

var day_ago = Date.now() * 1000 - 24*60*60

if(created > day_ago){console.log('it was created in the last day')} 
```

这似乎无法正常工作，任何人都知道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:49:47.463

Date.now() 将返回除以 1000 的毫秒数，以秒为单位进行转换。

```
var created = Date.now() / 1000

var day_ago = Date.now()/ 1000 - 24*60*60

if(created > day_ago){console.log('it was created in the last day')} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:48:44.547

您必须除以 1000，而不是相乘

```
var created = Date.now() / 1000
var day_ago = Date.now() / 1000 - 24*60*60
if(created > day_ago){console.log('it was created in the last day')} 
```

# date - 在 PHP 中转换我的日期格式

> ID：13325013
> 
> 赞同：0
> 
> 时间：2012-11-10T18:45:45.580
> 
> 标签：date, format

我必须将此日期的格式从 2012-11-03CET21: 00:00 +0100 转换为 21:00 - 03/11/2012 我该怎么做？

底层字符串打印“2012-11-03CET21: 00:00 +0100”

```
$start_date = date($values['start_time'] );
echo $start_date; 
```

但我希望是这样 21:00 - 03/11/2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T15:06:19.843

```
$myval = "2012-11-03CET21:00:00 +0100";
$start_date = date("H:i - d/m/Y", strtotime($myval)-3600);
echo $start_date; 
```

# mysql - 如何在 MySQL 中使用不带反引号的保留字

> ID：13325018
> 
> 赞同：0
> 
> 时间：2012-11-10T18:46:02.790
> 
> 标签：mysql, keyword, quotes, cross-database, reserved

我想在我的数据库中使用“user”或“right”等保留字作为表名或列名。到目前为止，我一直在使用反引号，但我在某处读到它们是特定于 MySQL 的，我想保持数据库兼容性。我还阅读了有关在 MySQL 中使用 ANSI 模式以避免使用反引号的信息，但我希望我的应用程序中的所有内容都是 UTF-8。

在不使用反引号或失去跨数据库兼容性的情况下，如何使用保留字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:53:57.523

MySQL 支持使用双引号包围标识符（例如表名和列名）的 ANSI 标准。您必须启用此选项，因为默认情况下 MySQL 将单引号和双引号识别为封闭的字符串文字：

[http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_ansi_quotes](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_ansi_quotes)

# css - 背景颜色不覆盖页面

> ID：13325021
> 
> 赞同：2
> 
> 时间：2012-11-10T18:46:13.460
> 
> 标签：css, background, alignment, resolution

[你可以在这里](http://jsfiddle.net/yotamoo/cr8s8/52/)查看我的小网站。我有两个问题：

1.  我使用 css 渐变为背景着色。当使用高分辨率（例如 1366*768）时，只有一半的页面被绘制。
2.  我在底部的“andale”按钮没有慢跑。在检查包含按钮的代码时，我注意到`<div>`容器覆盖了容器，但我不知道为什么。

另外，如果你不喜欢 jsFiddle，这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Rock-paper-scissers</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<script src="rps.js"></script>
<style type="text/css">
body{
    height: 100%;
    font: 100.01% "Trebuchet MS",Verdana,Arial,sans-serif;
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#93e1d1), to(#d4c87c));
    background-image: -webkit-linear-gradient(left, #93e1d1, #d4c87c); 
    background-image: -moz-linear-gradient(top, #93e1d1, #d4c87c);
    background-repeat: no-repeat;
}
div#container {
    text-align: center;
    width: 80%;
    margin: 0 auto;
}
div.InnerLeft {
    width: 50%;
    position: relative;
    float: left;
}
div.InnerRight {
    width: 50%;
    position: relative;
    float: right;
}
select {
    background: transparent;
    margin-top: 15px;
    width: 220px;
    font-size: 16px;
    -webkit-appearance: none;
    border: 0px;
    height: 34px;
}
</style>
</head>
<body>
<div id="container">
<img src="header.png">
<div class="InnerLeft">
<img src="uno.png"><br>
<select id="p1" onchange="change('p1','rpsleft')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="rpsL.png" id="rpsleft"></p>
</div>
<div class="InnerRight">
<img src="dos.png"><br>
<select id="p2" onchange="change('p2','rpsright')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="rps.png" id="rpsright"></p>
</div>
<div id="footer">
<img src="andale.png" id="andale" onclick="rps(document.getElementById('p1').value,document.getElementById('p2').value)"
onMouseOver="document.getElementById('andale').src='andale2.png'"
onMouseOut="document.getElementById('andale').src='andale.png'">
</div>
</div>
</body> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T19:24:42.350

使用`html {min-height: 100%;}`, 不是`height:100%;`因为如果你的页面有一个长的高度你不会看到所有的页面，因为 100% 是浏览器的高度

并添加`#footer {text-align:center;}`以使您的图像按钮居中

**所有代码：**

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Rock-paper-scissers</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<script src="rps.js"></script>
<style type="text/css">

html {min-height:100%;
 }
body{
    height: 100%;background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#93e1d1), to(#d4c87c));
    background-image: -webkit-linear-gradient(left, #93e1d1, #d4c87c); 
    background-image: -moz-linear-gradient(top, #93e1d1, #d4c87c);
    font: 100.01% "Trebuchet MS",Verdana,Arial,sans-serif;

    background-repeat: no-repeat;
    margin: 0;
    padding: 0;
}
div#container {
    text-align: center;
    width: 80%;
    margin: 0 auto;
}
div.InnerLeft {
    width: 50%;
    position: relative;
    float: left;
}
div.InnerRight {
    width: 50%;
    position: relative;
    float: right;
}
select {
    background: transparent;
    margin-top: 15px;
    width: 220px;
    font-size: 16px;
    -webkit-appearance: none;
    border: 0px;
    height: 34px;
}

#footer {text-align:center;}
</style>
</head>
<body>
<div id="container">
<img src="header.png">
<div class="InnerLeft">
<img src="uno.png"><br>
<select id="p1" onchange="change('p1','rpsleft')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="rpsL.png" id="rpsleft"></p>
</div>
<div class="InnerRight">
<img src="dos.png"><br>
<select id="p2" onchange="change('p2','rpsright')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="rps.png" id="rpsright"></p>
</div>
<div id="footer">
<img src="andale.png" id="andale" onclick="rps(document.getElementById('p1').value,document.getElementById('p2').value)"
onMouseOver="document.getElementById('andale').src='andale2.png'"
onMouseOut="document.getElementById('andale').src='andale.png'">
</div>
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T18:53:21.563

修复：

1.  对于第一个问题，您还必须给出`html`身高，而不仅仅是`body`

    ```
    html { height: 100% } 
    ```

2.  对于第二个，您必须清除浮动：

    ```
    #footer {
        clear: both;
        text-align: center
    } 
    ```

[**演示**](http://jsfiddle.net/cr8s8/53/)

# c++ - 我的构造函数主体中的简单指针语法问题

> ID：13325027
> 
> 赞同：0
> 
> 时间：2012-11-10T18:46:37.030
> 
> 标签：c++, pointers, constructor

所以总的来说，我对 C++ 和 C 语言还是很陌生，现在我们有一个项目要在几天后完成，我几乎完成了。但是，我时不时会弹出几个问题。现在，我在通过构造函数正确分配类数据成员时遇到问题。

这是我正在尝试创建的有问题的类的代码：

```
#include <iostream>
#include <string>

class Set{

private:

int *setOfElements;
int noOfElements;

public:
Set::Set(int *setArray){
    setOfElements = setArray;
    noOfElements = setArray->length();
}

int *getSetOfElements(){ return setOfElements; }
int getNoOfElements(){ return noOfElements; }

int findMedian();
int findMean();

}; 
```

错误出现在构造函数主体的第二行。如果我将一个 int 数组作为参数传递，那么当我想引用该参数的长度时，我不必使用
-> 而不是 . 因为referent是指针对象而不是传统意义上的对象？

哦，顺便说一句，VS 2010 中的错误是“错误：表达式必须具有指向类类型的指针”

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:48:27.980

`int`不是一个类，绝对没有`length()`元素。您正被“试图将另一种语言复制并粘贴到 C++”的邪恶势力所腐化。唯一的治疗方法是“学习 C++”。

你为什么还要写自己的作品集？该语言带有`std::set`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:13:15.827

1.  要回答您对 DeadMG 答案的评论中的问题，即使这不是您的主要问题：通常，您需要在 C 中传递数组长度和指针（以及在 C++ 中使用 C 样式时）。空终止字符串是一个例外，因为您可以根据需要发现长度。

2.  我同意 DeadMG 建议您使用`std::set`标准库而不是编写自己的类。您还需要使用标准库的其他一些位来获得`findMedian`and的行为`findMean`：

```
    #include <迭代器>
    #include <数字>

    std::set<int> s;
    // 初始化它...
    int mean = std::accumulate(s.begin(), s.end(), 0);
    均值 /= s.size(); // 你真的要使用双精度数吗？

    // std::set 是有序的，所以找到中位数只是迭代到中间。
    整数中位数；
    std::set<int>::iterator i = s.begin();
    std::advance(i, s.size() / 2);
    如果 (s.size() % 2 == 1) {
      中位数 = *i;
    } 别的 {
      中位数 = (*i + *(++i)) / 2;
    }

```

# python - 优先于系统加载用户python包

> ID：13325029
> 
> 赞同：2
> 
> 时间：2012-11-10T18:47:01.210
> 
> 标签：python, package

如果我在 ~/.local 下安装了一个包，该包也安装在系统 python 中，我如何优先加载用户包？

具体来说，我想使用我自己的 distutils ...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:11:40.847

您可以创建一个`~/.local/lib64/python2.7/site-packages/usercustomize.py`包含以下内容的文件。

```
import sys
import os

PYVER = sys.version_info
PATH = os.path.join(os.environ["HOME"], ".local", "lib", "python%d.%d" % (PYVER.major, PYVER.minor))

sys.path.insert(0, PATH) 
```

这将插入您的 $HOME/.local/lib/pythonX.X 在系统之前进行搜索。然后你把你的自定义模块放在那里。它们将在“库存”之前找到。

您可能需要将“lib”更改为“lib64”，具体取决于您的系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:57:06.673

您将路径添加到 sys.path 的前面：

```
 sys.path.insert(0, '/home/user/.local') 
```

# javascript - 打印特定的 div

> ID：13325031
> 
> 赞同：2
> 
> 时间：2012-11-10T18:47:31.677
> 
> 标签：javascript, jquery, html

我有一个 div，其中包含：文本、背景颜色、图像

我只想打印这个 div。

我有点无能为力，所以任何帮助都可以帮助

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T18:53:13.860

您需要定义一个打印样式表。您可以通过以下方式执行此操作：

```
<link rel="stylesheet" href="your url" type="text/css" media="print" /> 
```

在该表中，您指定如何为打印页面显示您的网站。因此，您可以做的是将每个元素设置为`display:none`除了您要打印的 div 之外。

您可以使用以下选择器轻松完成此操作：

```
* {
    display: none;
}

#printDiv {
    display: block;
} 
```

并简单地将 id`printDiv`应用于您要打印的 div。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T18:50:35.077

你试过什么？

也许这有帮助：

您需要创建新的样式表 print.css 并设置`CSS media=print`

例如 ：

```
<style media="screen">
  .noPrint{ display: block; }
  .yesPrint{ display: block !important; }
</style>

<style media="print">
  .noPrint{ display: none; }
  .yesPrint{ display: block !important; }
</style> 
```

给特定的 div`.yesPrint`类和所有其他的`.noPrint`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T19:08:13.757

我最近使用这个 JQuery 插件来做类似的事情

[http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

# javascript - 如何为我的 HTML 页面调整自动应答代码？

> ID：13325032
> 
> 赞同：-2
> 
> 时间：2012-11-10T18:47:47.760
> 
> 标签：javascript, html, radio-button, greasemonkey

我是初学者的javascript。所以我无法为我的 HTML 调整该代码。
你能适应我吗？你有什么建议为我编辑这些类型代码？
谢谢。

我的代码位于[jsfiddle.net/66Lam](http://jsfiddle.net/66Lam)。

我找到了“[如何使用 Greasemonkey 自动选择特定的单选按钮？](https://stackoverflow.com/questions/11025270/how-can-i-automatically-select-specific-radio-buttons-with-greasemonkey) ”，但对它的了解不足以使其适应我的目标页面，这些页面的 HTML 如下：

```
<div id="soruareain" class="soruareainimagesiz">
    <div id="sorunodiv">
        <div id="soruno">1</div>
    </div>
    <div id="soruveseceneklerdiv">
        <div id="sorunediv">
            <div id="sorune">Which sport is playing with ball ?</div>
        </div>
        <div id="soruseceneklerdiv">
            <div id="sorusecenekler">
                <div id="cevap1" class="dcevap cevaplaraltalta ">
                    <input type="radio" name="cevapr" id="cevapr1" value="1" class="rcevap"/><span class="lcevap" onclick="sec(1);">athletics </span>
                </div>
                <div id="cevap2" class="dcevap cevaplaraltalta ">
                    <input type="radio" name="cevapr" id="cevapr2" value="2" class="rcevap"/><span class="lcevap" onclick="sec(2);">swimming </span>
                </div>
                <div id="cevap3" class="dcevap cevaplaraltalta ">
                    <input type="radio" name="cevapr" id="cevapr3" value="3" class="rcevap"/><span class="lcevap" onclick="sec(3);">fencing </span>
                </div>
                <div id="cevap4" class="dcevap cevaplaraltalta ">
                    <input type="radio" name="cevapr" id="cevapr4" value="4" class="rcevap"/><span class="lcevap" onclick="sec(4);">Football </span>
                </div>
                <div style="display: none;">
                    <input type="hidden" name="cevapadet" id="cevapadet" value="4"/>
                </div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:52:38.737

很多东西：

1.  不要向特定的人提问。 而是[**写一个质量问题。**](http://msmvps.com/blogs/jon_skeet/archive/2010/08/29/writing-the-perfect-question.aspx)任何人都可以回答一个好问题，无论如何我都会收到有关 Greasemonkey 问题的警报（除非它得到太多反对票，太快）。

2.  看起来这个问题可能很快就会关闭（并且可能会被删除），所以请尽可能查看**[jsfiddle.net/66Lam/8/](http://jsfiddle.net/66Lam/8/)****上的代码**。

3.  请重新阅读[如何*提问*页面](https://stackoverflow.com/questions/how-to-ask)。请注意，如果用户觉得没有付出任何努力，或者问题看起来“过于本地化”，问题往往会被关闭。

4.  这种“给我看代码”的问题必须措辞恰到好处，否则人们会关闭它。

    Stack Overflow 通常不是脚本编写服务。我只回答这种问题是因为：

    1.  这（通常）很有趣，就像做填字游戏一样。
    2.  对于 Greasemonkey 脚本，将通用解决方案应用于特定目标页面对于初学者来说可能是一项艰巨的挑战。
5.  要调整该按钮代码，您必须了解[jQuery 选择器](http://api.jquery.com/category/selectors/)与 HTML 的关系，并将代码调整到您的目标页面。在这种情况下，关键变化是：

    ```
    var questionTxt = $("#sorune"); 
    ```

    和

    ```
    var ansForThisQ = $(this).parent ().nextAll ("div").find ("div.dcevap span.lcevap"); 
    ```

    和

    ```
    var label       = $(this);
    var radioButt   = label.prevAll ("input"); 
    ```

6.  答案文本不应有前导或尾随空格。所以，`"Football "`不好，使用`"Football"`.

7.  此代码需要 jQuery，因此在制作/使用 jsFiddles 时，请设置 jQuery 库，请参阅我链接的小提琴。

# xamarin.ios - MonoTouch DialogViewController TableView 填充

> ID：13325033
> 
> 赞同：0
> 
> 时间：2012-11-10T18:48:03.190
> 
> 标签：xamarin.ios, monotouch.dialog

我将 MonoTouch DialogViewController 用于表格，但默认情况下，TableView 的四周都有边距。样式设置为分组。

让 TableView 填充可用空间的最佳方法是什么，使它看起来像一个普通的 TableView 放到 ViewController 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:04:35.470

感谢 Miguel de Icaza，我了解到我需要将 DialogViewController 的样式设置为 UITableViewStyle.Plain 以获得我想要的填充外观。

# jquery - 为不同的 jQuery 可排序页面创建一个订单更新页面

> ID：13325036
> 
> 赞同：1
> 
> 时间：2012-11-10T18:48:14.047
> 
> 标签：jquery, mysql, ajax, jquery-ui-sortable

我设法让 jQuery Sortable 更新数据库表，这很棒。

然而，这意味着我现在有多个页面运行几乎相同的代码，而不是更改表名称。因此，在下面的示例中，我有一个 ajax_lists_order.php、一个 ajax_staff_order.php 等，除了下面的**UPDATE table_pages**部分更改为**UPDATE table_lists**、**UPDATE table_staff**等之外，还有相同的代码。

所以我想知道是否有一种方法可以在编辑页面中定义**table_name**，所以我可以只拥有一个将**table_name**发布到脚本中的 ajax_order.php 页面，就像现在使用 $key 和 $value 部分一样?

我想我需要在标头中的脚本中添加一些内容，然后在 ajax_order.php 页面中的 parse_str 之后添加一些额外的内容？

*我目前正在使用的一个例子......*

在编辑订单的 CMS 页面的标题中：

```
<script language='javascript'>
    $(document).ready(function(){
        $('#menu-pages').sortable({
        placeholder: 'ui-state-highlight',
            update: function(event, ui) {
            $.post('ajax_pages_order.php', { type: 'orderPages', pages: $('#menu-pages').sortable('serialize') } );
            }
        });
    });
</script> 
```

在同一页面的正文中：

```
$result = mysql_query("SELECT id, page_name, sort_order FROM table_pages ORDER BY sort_order ASC") or die(mysql_error());

while($row = mysql_fetch_array($result))
{
printf('<li id="page_%s">%s</li>', $row['id'], '<a href="page.php?id=' . $row['id'] . '">' . $row['page_name'] . '</a>');
} 
```

在 ajax_pages_order.php

```
parse_str($_POST['pages'], $pageOrder);
foreach ($pageOrder['page'] as $key => $value) {
    mysql_query("UPDATE table_pages SET `sort_order` = '$key' WHERE `id` = '$value'") or die(mysql_error());
} 
```

当谈到 Javascript 并且之前没有使用过 parse_str 时，我很糟糕，但是我尝试 在 Header 脚本中的**'serialize'**的右括号之后添加**, table: 'table_pages'**，然后**parse_str($_POST['table' ], $tableName);** 在**parse_str($_POST['pages']**部分上方的订购页面中，但无济于事。

# c# - WinRT C#，Facebook分享选项里面的分享魅力重定向到自己的控制？

> ID：13325039
> 
> 赞同：1
> 
> 时间：2012-11-10T18:48:20.690
> 
> 标签：c#, facebook, windows-runtime, share

如何将我自己的共享选项（目标）添加到 WinRT 中的共享魅力？我想添加一个自定义的“在 facebook 上分享”按钮，这会导致自定义菜单弹出。我用设置魅力成功地实现了这一点，但是没有像设置命令那样的共享命令。

基本上，我学会了使用 Facebook API，现在我想要一个负责从共享魅力中调用共享的控件。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T07:38:51.103

您需要执行几个步骤才能使您的应用程序成为共享目标，这意味着它将显示在共享超级按钮中（您不能在此处添加自定义按钮，它始终是列出的应用程序）：

1.  将共享目标作为支持声明添加到您的`package.appxmanifest`文件中，并指定您可以接受的数据格式和/或文件类型。
2.  在用户选择您的应用程序作为共享目标时将调用的`App.xaml.cs`覆盖。`OnShareTargetActivated`通过`args.ShareOperation`您可以访问共享的内容。

[文档中提供](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh871367%28v=win.10%29.aspx)了更详细的演练以及[示例](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)。

# python - 查找字母词

> ID：13325043
> 
> 赞同：-2
> 
> 时间：2012-11-10T18:48:39.267
> 
> 标签：python, regex, python-3.x

我需要编写函数，检查单词是否按字母顺序排列，例如

```
my_function('Hello!')
>> True
my_function('How')
>> True
my_function('F!@K')
>> False
my_function('</html>')
>> False 
```

我不知道。`re`我在lib中真的很糟糕。

```
begin_searcher = re.compile(r'[\w\-]')
end_searcher = re.compile(r'[\w\-]+[!-?]') 
```

我不能使用非标准库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:09:09.420

非正则表达式解决方案

```
from string import ascii_letters
def foo(st):
    letters = ascii_letters
    letters_nd_term = letters + "?!"
    return not any([set(st[:-1]).difference(letters),st[-1] not in letters_nd_term]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T19:04:39.360

您必须更好地定义“单词”是什么。如果 ！和 ？一个词的结尾都可以，那呢。和 , 和 ; 等等？

这可能会奏效：

```
>>> import re
>>> pat = re.compile('[a-zA-Z]+[.,!?]?')
>>> m = pat.match(word) #where word is what you're checking
>>> True if m else False 
```

当然，这不包括用引号括起来的单词，或单词末尾的多个标点符号，或所有类型的标点符号。但它应该为您提供一个很好的起点，同时您可以了解“单词”是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:34:15.373

最好使用集合而不是正则表达式：

```
>>> import string
>>> letters = set(string.ascii_letters)
>>> def is_alpha(word):
    return set(word).issubset(letters)

>>> for wrd in 'Hello! Hello How F!@K </html>'.split():
    print("is_alpha(%r) == %r" % (wrd, is_alpha(wrd)))

is_alpha('Hello!') == False
is_alpha('Hello') == True
is_alpha('How') == True
is_alpha('F!@K') == False
is_alpha('</html>') == False
>>> 
```

# php - C++ 在 PHP 中使用命名空间？

> ID：13325046
> 
> 赞同：6
> 
> 时间：2012-11-10T18:49:19.797
> 
> 标签：php, namespaces

PHP 有某种`using namespace`C++ 吗？（因此您不必在调用之前编写任何命名空间）

我已经定义了一个函数：

```
namespace \Project\Library {
   function hello() {

    }

} 
```

其他`file.php:`

```
use \Project\Library;

hello();     //> Error: Call to undefined function hello() 
```

## PS。

我知道我可以使用`use \Project\Library as L;`

然后做`L\hello();`

我也想避免`L\`。

## 编辑

我自己回答：你做不到。这很糟糕（这是我不喜欢 PHP 的第一件事）。

## 编辑2

需要明确的是：如果`hello()`是一个类，我可以直接使用`use`. 问题在于这是一个简单的函数，所以我必须编写它的命名空间。这是 PHP 的一个小麻烦。

也许我们可以认为这是一个错误并打开一张票？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:58:01.350

自 PHP 5.3.0 起，它支持语法[`use ... as`](http://www.php.net/manual/en/language.namespaces.importing.php)：

```
use My\Full\Classname as Another 
```

`use`也无法直接从手册中猜测（不使用`as Another`）（手册中未提及）。

您可能可以通过自动加载器使用类工厂或解决方法之类的技巧，但简单直接的答案是“不可能”。:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:12:11.990

即使 PHP 有命名空间并且可以直接在类之外声明函数，我强烈建议您至少使用静态类方法。然后你就不必乱搞了，并且会使用命名空间，因为它们被设计为可以工作；与类。

这是一个工作示例：

**你好.php**

```
<?php

namespace Project\B;

class HelloClass {
    static function hello() {
        echo "Hello from hello.php!";
    }
} 
```

**一个.php**

```
<?php

namespace Project\A;

require('hello.php');  // still have to require the file, unless you have an autoloader

use \Project\B\HelloClass;   // import this class from this namespace

\Project\B\HelloClass::hello();   // calling it this way render the 'use' keyword obsolete

HelloClass::hello();  // or use it as it is declared 
```

****注意****：`use foo as bar;`让我们重命名类！例如 ：

```
use \Project\B\HelloClass as Foo;   // import this class from this namespace as Foo

Foo::hello();   // calling it this way using the 'use' keyword and alias 
```

## ** 更新 **

有趣的是，您可以这样做：

**c.php**

```
namespace Project\C;

function test() {
    echo "Hello from test!\n";
} 
```

**一个.php**

```
use \Project\C;             // import namespace only
use \Project\C as Bar;      // or rename it into a different local one

C\test();        // works
Bar\test();      // works too! 
```

因此，只需编写`use Project\Library as L;`和调用`L\hello();`. 我认为这是你最好的选择。

# regex - regex_match 代码点火器长度

> ID：13325049
> 
> 赞同：0
> 
> 时间：2012-11-10T18:49:54.110
> 
> 标签：regex, codeigniter

我似乎无法在代码点火器文档中找到任何关于此的内容，但我正在尝试在我的表单中设置长度验证，这可能吗？

```
regex_match[/^[0-9().-]+$/] 
```

这是电话号码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:52:15.297

使用这个正则表达式：

```
^[0-9().-]{n,m}$ 
```

其中 n = 最小和 m = 最大长度。

您可以省略最大值来指定最小值，即

```
^[0-9().-]{n,}$ 
```

或省略最小值以指定最大值，即

```
^[0-9().-]{,m}$ 
```

但这是一样的，`^[0-9().-]{0,m}$`所以它不如最低版本有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:06:46.677

您可以按照此答案中的说明进行操作：[创建自定义 codeigniter 验证规则](https://stackoverflow.com/questions/8181779/creating-a-custom-codeigniter-validation-rule)。然后使用常规的 php 正则表达式进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T10:46:51.187

这对我有用：
`regex_match[/^[0-9.-]{0,18}+$/]`

# php - PHP 使用 preg_replace 替换空间

> ID：13325052
> 
> 赞同：0
> 
> 时间：2012-11-10T18:50:31.457
> 
> 标签：php, regex, string, replace, preg-replace

如何`preg_replace()`用于将所有不在其中的空间更改`<` `>`为`&nbsp`

```
$var="<  >< >Association football< ><  >" 
```

到

```
$var="<  ><  >Association&nbspfootball<  ><  >" 
```

这样做的正则表达式是什么`preg_replace()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:02:02.777

[这与刚刚提出](https://stackoverflow.com/questions/13324569/using-backreferences-for-backreferencesing-to-a-pattern)的问题非常相似。基本上，您需要使用[前瞻](http://www.php.net/manual/en/regexp.reference.assertions.php)，以确保您可以`<`在 next 之前找到 a 或字符串的结尾`>`：

```
$var = preg_replace('/[ ](?=[^<>]*(?:<|$))/', '&nbsp', $var); 
```

[工作演示](http://ideone.com/BN6xMG)

[有关环视的更多一般信息。](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T19:04:55.223

```
$var = preg_replace('/[ ](?=[^>]*(?:<|$))/', '&nbsp', $var); 
```

* * *

请参阅[**此效率演示**](http://ideone.com/NO8d7Q)，将此解决方案与[m.buettner](https://stackoverflow.com/users/1633117/m-buettner)发布的解决方案进行比较。

# ios - 在 IOS 6 中监听 TCP 连接

> ID：13325054
> 
> 赞同：0
> 
> 时间：2012-11-10T18:50:46.973
> 
> 标签：ios, sockets, networking, tcp, ios6

我正在为 IOS6 编写客户端-服务器应用程序。我需要从多部 iPhone 向单个 iPad 发送简单的消息。我已经设法通过使用**CFStreamCreatePairWithSocketToHost**让发送函数在 iPhone 上工作，通过指向我看到消息的 mac 上的 realbasic 应用程序。

我需要设置一个套接字来监听 iPad 上的特定端口，但似乎在查找有关信息和示例时遇到了问题！

有没有人有任何关于 IOS6 监听和读取套接字的简单示例？

# c# - 在完整路径中搜索字符串c#

> ID：13325056
> 
> 赞同：1
> 
> 时间：2012-11-10T18:51:03.737
> 
> 标签：c#, string, search

我有大量 MP3 文件的路径。我正在搜索此数组以在整个路径中查找任何内容以匹配正在搜索的内容。它只返回文件名中的匹配项，而不是路径。

老的 ：

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace test
{
    class Program
    {
          static void Main(string[] args)
          {
              _search("ant");
              Console.Read();
          }
          static void _search(string var)
          {
              string[] mp3 = new String[1];
              mp3 = Directory.GetFiles("c:\","*.mp3","SearchOption.AllDirectories);
              string[] temp = new string[1];
              int x = 0;
              for (int i = 0; i < mp3.Length; i++)
              {
                  if (mp3[i].Contains(var))
                  {
                      temp[x] = mp3[i];
                      x++;
                      Array.Resize(ref temp, x + 1);
                  }
              }
              _writeArray(temp);
          }
          static void _writeArray(string[] array)
          {
             for (int i = 0; i < array.Length; i++)
             Console.Write(array[i] + "\n");
          }
       }
    } 
```

新的：

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace test
{
     class Program
     {
          static void Main(string[] args)
          {
              List<string> search = searchSong("ant");
              foreach (string song in search)
              {
                  Console.WriteLine(song);
              }
           }

    static List<string> searchSong(string value)
    {
        value = value.ToLower();
        List<string> songs = new List<string>();
        String[] mp3 = null;
        mp3 = Directory.GetFiles(@"c:\users\owner\music\metal\sybreed", "*.mp3", SearchOption.AllDirectories).ToArray();
        foreach (string item in mp3)
        {
            string LowerCaseItem = item.ToLower(); 
            if (LowerCaseItem.Contains(value))
            {
              songs.Add(item);
            }
        }
        return songs;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:03:26.173

试试这个代码：

```
 class Program
    {
        static void Main(string[] args)
        {
            PrintItems(Search("John Lennon"));
            PrintFileName(Search("John Lennon"));
            Console.Read();
        }

        static string[] Search(string var)
        {
            return Directory.GetFiles(@"K:\mp3", "*" + var + "*.mp3", SearchOption.AllDirectories);
        }

        static void PrintItems(string[] array)
        {
            for (int i = 0; i < array.Length; i++)
                Console.Write(array[i] + "\n");
        }

        static void PrintFileName(string[] array)
        {
            foreach (var item in array)
            {
                FileInfo fi = new FileInfo(item);
                Console.WriteLine(fi.Name);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:22:05.020

路径必须作为参数在哪里搜索。

```
class program    
{

        static void Main(string[] args)
        {
            List<string> search = searchSong("SomeThing");
            foreach (string song in search)
            {
                Console.Writeline(song);
            }
        }

        public List<string> searchSong(string value)
        {
            List<string> songs = new List<string>();
            String[] mp3 = null;
            mp3 = Directory.GetFiles(@"D:\Songs", "*.mp3", SearchOption.AllDirectories).ToArray();
            foreach (String item in mp3)
            {
                if (item.Contains(value))
                {
                    songs.Add(item);
                }
            }
            return songs;
        }

    } 
```

# c++ - 如何在包含不同数字的范围内查找整数

> ID：13325059
> 
> 赞同：-1
> 
> 时间：2012-11-10T18:51:29.037
> 
> 标签：c++

> **可能重复：**
> [c ++程序查找包含不同数字的整数总数](https://stackoverflow.com/questions/13294010/c-program-to-find-total-numbers-of-integers-containing-different-digits)

假设我有一个无符号整数，称它为低，另一个称它为高，这样高>低。问题是找到包含此范围内不同数字的整数。例如，假设 low 为 1，high 为 10，则答案为 10，因为此范围内的所有数字都包含不同的数字。如果假设 low 是 1，high 是 12，那么答案是 10，因为 11 包含相同的数字。例如 123,234,4567 是有效数字，但 121,2342,4546 是无效数字。我不是在寻找暴力算法。如果任何人都有比通常的蛮力方法更好的解决方案，请告诉..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:06:55.943

我将推导出一个算法来确定从 0-n 中这些数字的数量，然后您可以简单地计算（有效数字的数量 0-高）-（有效数字的数量 0-低）。要获取有效数字 0-n，请查看您的数字中的位数：例如，如果 n 有 5 位数字，则每个有效的 1、2、3 和 4 位数字都在您的结果集中。因此，对于一个 4 位数字，您计算该 4 位数字中所有可能的数字组合：1234、1235、1236...5678、5789 和 6789。然后计算排列数（1234 也可以是 1243， 1324、1342...等），并乘以（排列的数量）x（您在上一步中导出的不同序列的数量）。然后你就有了所有 4 位数字的答案。对每一组做同样的事情，并为你的上一组想出更具体的东西；如果高是5500，您需要介于 5000-5100 之间的有效数字。您可以应用类似的算法，但不是使用所有数字 0-9，而是使用 9 个不同的数字，省略“5”。请注意，所有数字也可以有一个 0，但不是在开头，因此算法也需要考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:09:34.607

只需将您的[数字转换为字符串](https://stackoverflow.com/questions/273908/c-integer-stdstring-conversion-simple-function)，然后在检查给定字符是否已在您的字符串中出现的同时运行它。例如：

```
#include <string>

int main()
{
    std::string s = std::to_string(12345);
    bool occuredCheck[10] = {0}; //automatically fills with zeros. 10 values for the 10 numbers
    bool isValidNumber = true;

    for(int i=s.length()-1; i>=0; ++i)
        if(occuredCheck[s[i] - '0'] ^ true == 0) isValidNumber = false;
} 
```

如果数字出现两次，则 if 行将数组条目设置为零，请参阅[XOR](http://www.fredosaurus.com/notes-cpp/expressions/bitops.html)。并`isValidNumber`让您知道它是否真的是您的有效号码。顺便说一句：这个例子需要 C++11 用于`std::to_string`.

使用此算法，您可以检测到第一个无效数字，然后使用它设置您的范围。

# ios - 如何在 ios 应用程序中以编程方式获取任何站点上图像的 url？

> ID：13325061
> 
> 赞同：0
> 
> 时间：2012-11-10T18:51:38.617
> 
> 标签：ios, xcode, image, networking, afnetworking

如何以编程方式在任何网站上获取图像的 url？

也许我可以用 AFNetworking 做到这一点？

先感谢您！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:10:09.967

加载 html，使用 NSXMLParser 解析它并处理它找到的每个 img 标签的回调。在那里，您可以询问该图像标签的 src 属性，然后您将获得 url :)

另请参阅这篇文章以获取有关如何使用解析器的更多信息 [Using an NSXMLParser to parse HTML](https://stackoverflow.com/questions/8866376/using-an-nsxmlparser-to-parse-html)

```
//MOCK-Code
NSXmlParser *p = [[NSXMLParser alloc] initWithURL:pageToParse];
p.delegate = self;
[p parse]; 
```

* * *

```
- parserDidStart:(id)nodeOfName withAttributes:(id)listOfAttributes {
    id src = [listOfAttributes objectForKey:@"src"];
    ... 
```

# javascript - ReferenceError：使用onclick时未定义函数

> ID：13325067
> 
> 赞同：3
> 
> 时间：2012-11-10T18:52:50.953
> 
> 标签：javascript, jquery

我使用 javascript 设置了一个锚标记，以便`onclick`调用一个函数`showSavingsEasterEgg`并传递一个值。我遇到的问题是我没有正确引用我的函数：

`ReferenceError: showSavingsEasterEgg is not defined`

我已经尝试将`showSavingsEasterEgg`函数移动到`showData`函数中以查看它是否解决了范围问题，但它没有。

有小费吗

```
define(["jquery", "go/util", "underscore", "jqueryui/slider"], function ($, util,_) {

  function showData(data) {
    $('#item').append('<a class="savings_link" href="#" onclick=\'showSavingsEasterEgg('+data[key]['saving']+')\'> Savings');
  }

  function showSavingsEasterEgg(data){
    console.log("SUccess");
    console.log(data);
  }

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T18:54:09.583

将定义`showSavingsEasterEgg`直接放在全局范围内。

在这里，找不到。

你可以这样做 ：

```
window.showSavingsEasterEgg = function (data){
    console.log("SUccess");
    console.log(data);
};
define(["jquery", "go/util", "underscore", "jqueryui/slider"], function ($, util,_) {
  function showData(data) {
    $('#item').append('<a class="savings_link" href="#" onclick=\'showSavingsEasterEgg('+data[key]['saving']+')\'> Savings');
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T19:00:50.317

想知道为什么到目前为止没有人提出最明显、最方便和“最佳实践”的方法。您根本不应该使用*内联事件处理*，不要引人注目。

```
$('#item').append($('<a>', {
    'class':    'savings_link',
    href:       '#',
    click:      function(e) {
        console.log("SUccess");
        console.log(data);
    }
}}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:55:36.690

使 showSavingsEasterEgg 全球化。您只能从 html 代码调用全局可访问的对象/引用。

```
 window.showSavingsEasterEgg = function(data){
    console.log("SUccess");
    console.log(data);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T18:55:24.880

您应该知道并理解`"scope"`任何编程语言中的定义。请将命名的函数移到`"showSavingsEasterEgg"`父函数之外，它会像一个魅力一样工作。这是因为您将其定义为父函数的私有成员。

干杯

# jquery - 取消在 Rails 远程 form_for 上提交

> ID：13325070
> 
> 赞同：2
> 
> 时间：2012-11-10T18:53:01.067
> 
> 标签：jquery, ruby-on-rails-3, forms

我有一个`form_for(:remote=>true)`工作，但我想在提交之前显示一个常规的 javascript 确认框。

有没有办法做到这一点？理想情况下，某种 :before 或 :onsubmit 可以接受取消提交，例如：`return confirm("Are you sure?");`或者可能是 javascript 事件挂钩？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T19:05:41.013

您可以使用[以下`confirm`选项](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-submit_tag)轻松完成此操作：

```
<%= for_form @my_thing, remote: true do |f| %>
  <%= f.text_field :my_value %>
  <%= f.submit 'Submit', confirm: 'Are you sure?' %>
<% end %> 
```

您需要使用[Rails UJS 驱动程序](https://github.com/rails/jquery-ujs)（在新的 Rails 项目中默认启用）才能无缝工作。

如果您愿意，还[可以访问表单提交生命周期的挂钩：](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)

*   `ajax:beforeSend`- 在发出 XHR 请求之前触发；返回 false 取消请求
*   `ajax:success`- 在服务器成功响应时触发
*   `ajax:error`- 触发来自服务器的错误响应
*   `ajax:complete`- 在服务器成功或错误响应时触发

因此，作为示例，您应该能够`confirm`使用如下代码来模仿表单助手选项：

```
$("#my_remote_form").on('ajax:beforeSend', function() {
  return confirm("Are you sure?");
}); 
```

# php - 为什么我的联系表格没有发回我的域

> ID：13325079
> 
> 赞同：0
> 
> 时间：2012-11-10T18:54:38.333
> 
> 标签：php, actionscript-3, flash, contact-form

我使用带有 Flash CS6 的 Actionscript 3.0 为我的网站创建了一个联系表单，我已经完美地写下了我的代码，但是为了接收我发送给我的电子邮件的消息不起作用:(这是我的代码

```
<?php

$emailTo    = "myemail@myemail.com";
$name       = $_POST["Patrick"];
$emailFrom  = $_POST["myemail@myemail.com"];
$message    = $_POST["Hello"];
$subject    = "From Contact Form";

if(!empty($_POST)) {
    $body  = "Name: "     . $name .      "\n\n";
    $body .= "Email: "    . $emailFrom . "\n\n";
    $body .= "Message:\n" . $message;
    $body  = wordwrap($body, 70);
    $header = "From: " . $emailFrom . "\nReply-To: " . $emailFrom. "\n\n";

if(mail($emailTo, $subject, $body, $header)) {
    echo("result=Successful");
} else {
    echo("result=Unsuccessful");
}

}
?> 
```

谢谢，希望你们能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:03:07.253

我认为问题在于您如何尝试检索`$_POST`变量。

您的代码建议您发布名称`Patrick`为`myemail@myemail.com`和的字段`Hello`。那是不合逻辑的。

所以我猜你的代码应该是这样的：

```
$emailTo    = "myemail@myemail.com";
$name       = $_POST["name"];
$emailFrom  = $_POST["emailFrom"];
$message    = $_POST["message"];
$subject    = "From Contact Form"; 
```

或出于*测试目的*（只是为了查看您的邮件脚本是否正常工作）：

```
$emailTo    = "myemail@myemail.com";
$name       = "Patrick";
$emailFrom  = "myemail@myemail.com";
$message    = "Hello";
$subject    = "From Contact Form"; 
```

# jquery - 循环插件ie8的问题

> ID：13325081
> 
> 赞同：0
> 
> 时间：2012-11-10T18:54:58.657
> 
> 标签：jquery, css, plugins, cycle

我目前正在为一个大学项目建立这个网站

[http://cutecupcak.es/](http://cutecupcak.es/)

我在主页上的“推荐”部分遇到问题

该部分使用循环插件来翻阅引号..

问题出在 ie8 中，因为 blockquote 有一个我无法摆脱的白色背景......从测试中可以看出，它在所有其他浏览器中都可以正常工作！

摆脱循环插件并且它可以工作 - 但是即使我使用 ap 标签而不是 blockquote 也会出现同样的问题..

有任何想法吗 ！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:08:23.383

您需要在循环插件调用中使用以下代码片段：

```
cleartypeNoBg: true, 
```

# c - 快餐店模拟：如何“排队”顾客？

> ID：13325082
> 
> 赞同：0
> 
> 时间：2012-11-10T18:54:59.377
> 
> 标签：c, arrays, loops, queue, simulation

`A link to my PasteBin:` [http://pastebin.com/nzW3hZdT](http://pastebin.com/nzW3hZdT)

> 我正在模拟三个多小时的快餐店。三个小时分为 18 个间隔，每个间隔 10 分钟。
> 
> 根据每分钟“r”个客户的到达率，建立“R”。R 是所有 18 个间隔的概率到达率（或多或少 r/60）。
> 
> 此模拟的目的是自己定义“r”并查看所有 18 个间隔中每个客户的平均等待时间 (avgWait)。通常，“r”越大，“avgWait”就越大。

在我的代码（上面粘贴）中的这一点上，平均等待时间正在正确打印......对于一个客户。

假设第一个客户和第二个客户分别在收银员 1 和 2 上接受订单大约需要 85 秒。在这 85 秒内，很可能会有更多客户到达，但因为`cash1empty=FALSE`他们`cash2empty=FALSE`显然无法接受订单.

如何设置此队列，以便程序知道在前两个订单得到服务后还有其他几个等待服务？

代码摘录：

```
if ((cash1empty==TRUE)&&(cash2empty==TRUE))
                    {
                        switch((rand()%2))
                        {
                            case 0:
                                cash1empty=FALSE;
                                break;
                            case 1:
                                cash2empty=FALSE;
                                break;

                        }
                    }

                    if (cash1empty==TRUE)
                    {
                        cash1empty=FALSE;

                        switch((rand()%2))
                        {
                            case 0:
                                cash1salad=(rand()%(66-55)+55);
                                totalWait+=cash1salad;
                                break;
                            case 1:
                                cash1burger=(rand()%(131-111)+111);
                                totalWait+=cash1burger;
                                break;
                        }
                    }
                    else if (cash2empty=TRUE)
                    {
                        cash2empty=FALSE;

                        switch(rand()%2)
                        {
                            case 0:
                                cash2salad=(rand()%(76-65)+65);
                                totalWait+=cash2salad;
                                break;
                            case 1:
                                cash2burger=(rand()%(141-121)+121);
                                totalWait+=cash2burger;
                                break;
                        }
                    }
                    else
                    {
                        queue++; // ???
                        /// I DON'T KNOW WHAT I'M DOING.
                    } 
```

对于给您带来的不便，我深表歉意，但我不能使用“结构”。数组是可以接受的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:28:25.977

记录队列中的客户数量，`queuedCustomers`. 当每个新客户到达时添加一个（同时增加`totalCustomer`）。`cash1empty=FALSE;`当您为客户提供服务时减去一个，即当您`cash2empty=FALSE;`

改变

```
 if (customerArrive>=x)
            {

                // A customer arrived during this second!
                totalCustomer++; 
```

至

```
 if (customerArrive>=x)
            {

                // A customer arrived during this second!
                totalCustomer++;
                queuedCustomers++;
            }
            if (queuedCustomers > 0)
            { 
```

附录回复：选择收银员...

而不是部分`if ((cash1empty==TRUE)&&(cash2empty==TRUE))`

做类似的事情：

```
cointoss = rand()%2

if ((cash1empty==TRUE) && ((cash2empty!=TRUE) || (cointoss == 1)))
{
    // use cashier 1
} 
else if (cash2empty==TRUE)
{
    // use cashier 2
} 
else
{
    // wait
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T19:32:55.390

你为什么不使用[Queue](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)？使用常规数组似乎不合理。使用队列，您可以使用[Dequeue()](http://msdn.microsoft.com/en-us/library/1c8bzx97.aspx)方法获取第一个客户并将其从队列中删除，然后使用 [Enqueue()][3] 方法添加新客户。

为什么你会使用队列以外的任何东西？

# java - 纯粹在内存中运行 Neo4j，没有任何持久性

> ID：13325084
> 
> 赞同：15
> 
> 时间：2012-11-10T18:55:08.690
> 
> 标签：java, neo4j, jgrapht

我不想保留任何数据，但仍想使用 Neo4j 的图形遍历和算法功能。在嵌入式数据库中，我进行了配置`cache_type = strong`，并且在完成所有写入操作后，我将事务设置为失败。但是我的写入速度（节点、关系创建速度）很慢，这正在成为我过程中的一大瓶颈。

所以，问题是，Neo4j 可以在没有任何持久性方面的情况下运行，并且只是作为一个纯 API 运行吗？我尝试了 JGraphT 之类的其他方法，但它们没有 Neo4j 提供的遍历机制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:48:16.047

据我所知，Neo4J 数据存储和 Lucene 索引总是写入文件。至少在 Linux 上，您可以设置一个`ramfs`文件系统来将文件保存在内存中。

也可以看看：

*   [将所有 Neo4J 数据库加载到 RAM](https://stackoverflow.com/questions/9995949/loading-all-neo4j-db-to-ram)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T21:23:35.687

您在每个事务中分组了多少更改？您应该尝试将每个事务中的数千个更改分组，因为提交事务会强制逻辑日志到磁盘。

但是，在您的情况下，您可以改为通过以下方式开始交易：

```
db.tx().unforced().begin();

```

代替：

```
db.beginTx();

```

这使得该事务无需等待逻辑日志强制写入磁盘并使小型事务更快，但断电可能会让您丢失最后几秒钟的数据。

tx() 方法位于 GraphDatabaseAPI，例如 EmbeddedGraphDatabase 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T10:37:50.530

你可以试试虚拟光驱。它会使 neo4j 持续到驱动器上，但这一切都会发生在内存中 [https://thelinuxexperiment.com/create-a-virtual-hard-drive-volume-within-a-file-in-linux/](https://thelinuxexperiment.com/create-a-virtual-hard-drive-volume-within-a-file-in-linux/)

# python - 我如何在 python 中编写这个 bash 脚本

> ID：13325086
> 
> 赞同：-1
> 
> 时间：2012-11-10T18:55:15.100
> 
> 标签：python

我有这个

```
 curl -s http://mcupdate.tumblr.com/rss | egrep -o -e 'le>Minecraft [0-9]\.[0-9]\.[0-9]|le>Minecraft [0-9]\.[0-9]' | head -1 | egrep -o -e '[0-9]\.[0-9]\.[0-9]|[0-9]\.[0-9]' 
```

我需要用我试过的python写这个，但我不知道该怎么做

它用于开源 python minecraft 启动器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:02:54.260

尝试查看[urllib2](http://docs.python.org/2/library/urllib2.html)文档以获取您的 RSS 提要。您还可以查看[RSS 库](http://wiki.python.org/moin/RssLibraries)来解析它。你不需要使用 grep，你需要一个版本号。

```
import feedparser
feed = feedparser.parse('http://mcupdate.tumblr.com/rss')
item_titles = [item['title'] for item in feed['items']] # get the items titles
minecraft_versions = [title for title in item_titles if re.match('^Minecraft [0-9\.]+$',title)] # keep the titles that matches the regex
latest_version = minecraft_versions[0][10:] # get the latest version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:04:21.473

这个片段接缝要做几个简单的步骤：

1) 从该站点 mcupdate.tumblr.com 检索 RSS 提要 2) 查找 RegExp 即“我的世界”，其中一位数字比“\”多一位，比“一位多”。或者只是 minecraft 和 2（“\”+ 数字). 3) 而不是只选择所有结果，但最后一个（已省略） 4) 再次查找这些数字（这次没有 minecraft）。

如果您只使用第一个命令（直到第一个“|”），并查看下载的文件以“感受”实际解析的内容，那将是很好的。

以上所有内容都应该仅使用标准 Python 库即可实现。

# mysql - 连接到 Mysql 时，将 Xdebug 与 Netbeans 或 Komodo 一起使用会失败

> ID：13325087
> 
> 赞同：0
> 
> 时间：2012-11-10T18:55:21.810
> 
> 标签：mysql, netbeans, xdebug, remote-debugging, komodo

我正在尝试让 Ne​​tBeans 或 Komodo IDE 远程调试 PHP。我在开发机器上安装了一个远程网站，这是一台运行 Mountain Lion 的 Mac。Xdebug 已安装。本地机器上的网站在浏览器中正常运行。

但是，对于 NetBeans 和 Komodo IDE，当单步执行代码时，执行 mysqli_connect 的尝试会失败。在 NetBeans 中有以下错误消息：

> **发生 Socket Exception**如果您有任何 Watches，请尝试删除它们并重新启动调试器。如果删除 Watches 没有帮助或您没有任何 Watches，请提交问题并提供重现问题的确切步骤。请附上IDE日志。附加您的项目也将非常有帮助。

我看到其他人报告此错误消息，但未提供任何帮助。

在 Komodo IDE 中，故障发生在同一位置，但根本没有提供错误信息。

NetBeans 中的有趣之处在于，在单步浏览网站的第一页之后，如果我从该点运行代码，它会毫无故障地执行，并且网页会显示在浏览器中！这意味着该问题仅在单步执行时发生。

我在某处看到过有关 NetBeans 中的错误的信息。但是，NetBeans 不应该能够单步执行尝试连接到 mysql 的代码，这似乎很明显。相反，我认为这将是我系统上的一些配置问题。

无论是单步执行还是以任何其他方式运行，Komodo IDE 都会出现同样的故障。它只是没有超过那个点。

但是，请记住，仅在浏览器中运行该站点就可以正常工作。那么是什么导致 Xdebug 单步无法连接到 mysql 呢？

** 附加信息 **

我在我的系统上找到了两个 xdebug.so 实例。

```
-rwxr-xr-x  1 root  admin  274508 Oct  6  2011 /opt/local/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so
-rwxr-xr-x  1 root  wheel  202672 Sep 20 20:01 /usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so 
```

此外，还有一个 /opt/local/var/db/php5/xdebug.ini 引用 /opt/local 路径中的 xdebug.so。/usr/lib 路径中的 xdebug.so 是我认为正在使用的那个，它对应于关于它应该安装在哪里的说明。

这些显然是 xdebug.so 的两个不同版本。这可能与我的问题有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:47:40.433

您需要确保您正在运行*一个*版本的 Xdebug - 并确保这是最新版本（目前为 2.2.1）。如果您仍然可以重现此问题，请在[http://bugs.xdebug.org](http://bugs.xdebug.org)提交错误报告，其中包含简短的示例脚本（包含所有代码 + 数据！）和使用该脚本进行调试会话的远程调试日志（有关如何制作此类日志的信息，请参阅[http://xdebug.org/docs/all_settings#remote_log ）。](http://xdebug.org/docs/all_settings#remote_log)

# java - JavaFX 删除工具栏和窗口顶部之间的分隔

> ID：13325097
> 
> 赞同：5
> 
> 时间：2012-11-10T18:56:35.503
> 
> 标签：java, javafx-2

我有一个 JavaFX 应用程序，它的 atm 只是一个顶部带有 ToolBar 的 BorderPane。它看起来像这样：

![在此处输入图像描述](../Images/3498ef833b57ecad29b10e4f6d752958.png)

我想知道是否有办法删除窗口顶部和工具栏之间的线，使其看起来像这样：

![在此处输入图像描述](../Images/1e725a729251ffaffa91b1a9f176133a.png)

我已经尝试将 ToolBar 的边框宽度和 BorderPane 的边框宽度设置为 0，但都没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:53:46.800

我尝试了 amru 的答案，它从工具栏顶部删除了该行。不幸的是，窗饰底部还有一条线。在花了几个小时研究这个之后，我发现目前没有办法在 JavaFX 中做我想做的事情（没有将 JavaFX 嵌入到摆动窗口中，由于其他原因这不是一个选项），尽管这是一个已知问题和一个正在为将来的版本进行修复（请参阅[此处](http://javafx-jira.kenai.com/browse/RT-19834)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:21:16.310

该线是工具栏的第一个背景颜色，仅在其上方和底部显示 1px。`-fx-background-insets`在下面结帐

```
.tool-bar:horizontal {
    -fx-background: derive(-fx-base,-30%);
    -fx-background-color:
        linear-gradient(to bottom, derive(-fx-base,-30%), derive(-fx-base,-60%)),
        linear-gradient(to bottom, derive(-fx-base,65%) 2%, derive(-fx-base,-20%) 95%);
    -fx-background-insets: 0, 1 0 1 0;
    -fx-background-radius: 0, 0 ;
    -fx-padding: 0.416667em 0.833em 0.416667em 0.833em; /* 5 10 5 10 */
    -fx-spacing: 0.333em; /* 4 */
    -fx-alignment: CENTER_LEFT;
} 
```

要删除顶行，请将插图更改为：

```
-fx-background-insets: 0, 0 0 1 0; 
```

要调整 JavaFX 控件的默认外观，我建议查看 caspian.css 文件。

# iphone - 如何将 iPad 应用程序分发为内部应用程序？

> ID：13325101
> 
> 赞同：2
> 
> 时间：2012-11-10T18:57:03.147
> 
> 标签：iphone, ios, xcode, ipad, in-house-distribution

我为我的组织开发了一些 3 个应用程序，我们希望将其分发到办公室的大约 30 台 iPad。我正在寻找一个逐步的过程来做到这一点。但是目前没有找到。我尝试过但失败的方法如下，

1.  我使用了该应用程序（带有 .app 扩展名，可以在 ~/Library/Developer/../IOs_Release 中找到）和临时证书并将它们放入 iTunes 库中。之后，我将一个新的 iPad（不是注册为开发设备）连接到我的 mac book。通过iTunes，我尝试同步应用程序。但是 ipad 上出现了一条警报，显示“xyz 应用程序安装失败”

2.  我尝试了临时分发。首先，我将应用程序存档在 xcode 存档中，然后单击分发按钮。出现了一个向导，询问我想要什么样的分布。我选择了临时分发，它自动选择了我的 iPhone 分发证书并处理并给了我 .ipa 文件。我尝试通过 iTunes 同步在 iPad 中安装它，但它给了我同样的错误。

获得内部应用程序分发的步骤会很棒，因为它们无处可寻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:04:39.910

[在这里](https://stackoverflow.com/questions/13317307/is-an-enterprise-app-distribution-provisioning-profile-tied-to-specific-devices/13317683#13317683)查看我对另一个人的 SO 问题的回答

这假设您的组织设置了企业开发人员帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:41:02.410

有一个名为 iOS Beta Builder 的项目，请查看以下链接：
[iOS Beta Builder 介绍 iOS](http://www.hanchorllc.com/2010/08/24/introducing-ios-beta-builder/)
[Beta Builder GitHub 页面](https://github.com/HunterHillegas/iOS-BetaBuilder)
[iOS Beta Builder Mac AppStore](http://www.google.it/url?sa=t&rct=j&q=ios%20beta%20builder%20app%20store&source=web&cd=9&ved=0CGwQFjAI&url=https://itunes.apple.com/us/app/betabuilder-for-ios-apps/id415348946?mt=12&ei=rcWfUKGpMMSF4ATEuIGYDA&usg=AFQjCNEpd_M2akqJWTH2mEq55TNfDf9AlQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:40:34.840

用于临时构建的配置文件必须引用 30 台设备。

转到[Provisioning Portal](https://developer.apple.com/ios/manage/overview/index.action)并在 Devices 部分下添加所有 30 台设备。

然后将这些设备添加到临时配置文件（Provisioning、Distribution）。

添加后，下载更新的配置文件并将其安装在 Xcode 中。删除任何以前的个人资料。

构建和归档应用程序。确保正确设置存档构建以使用您的临时配置文件。

使用 Organizer 从归档构建中保存 ipa 文件。

将 ipa 文件放入 iTunes。现在同步 30 台设备中的每台以包含该应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T08:48:54.867

**Xcode - 产品 -> 存档**

分发->（选择）为企业或临时开发保存（下一步）-> 代码签名标识（选择您的配置文件）-> 将文件保存在磁盘上-> 分发 project.ipa 文件。

# visual-studio-2010 - 构建铬时编译错误

> ID：13325105
> 
> 赞同：0
> 
> 时间：2012-11-10T18:57:12.040
> 
> 标签：visual-studio-2010, webkit, cygwin, chromium

我正在尝试使用 VS2010 在 Windows 7 64 位上构建铬。我在构建 webkit 时遇到错误。这是错误

```
1>------ Build started: Project: generate_supplemental_dependency, Configuration: Debug Win32 ------
1>Build started 11/11/2012 12:22:17 AM.
1>InitializeBuildStatus:
1>  Touching "../../../../..\build\Debug\obj\generate_supplemental_dependency\generate_supplemental_dependency.unsuccessfulbuild".
1>CustomBuild:
1>  Resolving [Supplemental=XXX] dependencies in all IDL files
1>        6 [main] perl 5908 child_copy: linked dll data write copy failed, 0xD2A000..0xD49C48, done 0, windows pid 5972, Win32 error 487
1>  Can't call method "fileName" without a package or object reference at ../bindings/scripts/IDLParser.pm line 113.
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" exited with code 255.
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:09.56
2>------ Build started: Project: webcore_bindings_sources, Configuration: Debug Win32 ------
2>Build started 11/11/2012 12:22:27 AM.
2>InitializeBuildStatus:
2>  Touching "../../../../..\build\Debug\obj\webcore_bindings_sources\webcore_bindings_sources.unsuccessfulbuild".
2>CustomBuild:
2>  HTMLEntityTable
2>  Running call "C:\chrome\src\third_party\WebKit\Source\WebCore\WebCore.gyp\..\..\..\..\..\third_party\cygwin\setup_env.bat" 
2>  make: *** No rule to make target `/cygdrive/c/chrome/src/build/Debug/\obj\global_intermediate\supplemental_dependency.tmp', needed by `/cygdrive/c/chrome/src/build/Debug/\obj\global_intermediate\webcore\bindings\V8SpeechRecognitionEvent.cpp'.  Stop.
2>  make: *** No rule to make target `/cygdrive/c/chrome/src/build/Debug/\obj\global_intermediate\supplemental_dependency.tmp', needed by `/cygdrive/c/chrome/src/build/Debug/\obj\global_intermediate\webcore\bindings\V8SpeechRecognitionEvent.cpp'.  Stop.
2>  HTMLNames, and also WebKitFontFamilyNames, and also SVGNames, and also MathMLNames, and also XLinkNames, and also XMLNSNames, and also XMLNames
2>  Failed to read names from file: C:/chrome/src/third_party/WebKit/Source/WebCore/html/HTMLTagNames.in at C:\chrome\src\third_party\WebKit\Source\WebCore\dom\make_names.pl line 290.
2>  Traceback (most recent call last):
2>    File "scripts/action_makenames.py", line 185, in <module>
2>    File "scripts/action_makenames.py", line 167, in main
2>  AssertionError
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" exited with code 1.
2>
2>Build FAILED. 
```

我在网上搜索了很多这个错误，大多数解决方案都与 cygwin rebase 有关。他们提到使用以下逗号来重新设置 cygwin

> ash.exe rebaseall

但我无法在 third_party/cygwin 文件夹中的 cygwin director 中找到 ash 或 rebase all。

关于这个错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:27:59.017

此错误表明您的 cygwin 安装不包含`(d)ash`包。安装 chrome 所需的所有依赖项的最佳方法`cygwin`是运行`cygwin-downloader.py`.

这将安装所有必需的依赖项，包括`ash`.

或者，如果您更喜欢仅安装 ash.exe，请运行安装程序搜索包`dash`包含此包并继续安装。

# iphone - 位置管理器的交换距离

> ID：13325106
> 
> 赞同：-2
> 
> 时间：2012-11-10T18:57:15.347
> 
> 标签：iphone, xcode, map, gps, distance

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {

    if (startingPoint == nil)
      self.startingPoint = newLocation

    CLLocationDistance distance = [newLocation
                                getDistanceFrom:startingPoint];

    NSString *distanceString = [[NSString alloc]
                                initWithFormat:@"%.2f Miles", totalDistance *0.000621371];
   DistanceTotal.text = distanceString;
}

@end 
```

我正在为我的应用程序制作一个距离计算器。当我运行应用程序时，文本字段为空白，没有距离信息。你能帮我找到问题吗。（文本字段称为 DistanceTotal）谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:17:57.207

您是否尝试计算累积距离？当您接近起点时，从起点到当前位置的距离应该会减小。

也许你想要这个......

```
// in the class containing the location manager
@property (nonatomic, assign) CLLocationDistance totalDistance;

- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {

   //if (startingPoint == nil)
   //    self.startingPoint = newLocation

   //CLLocationDistance distance = [newLocation
   //                               getDistanceFrom:startingPoint];

   if (!oldLocation)
       totalDistance == 0.0;
   else
       totalDistance += [newLocation distanceFromLocation:oldLocation];           

   NSString *distanceString = [[NSString alloc]
                                 initWithFormat:@"%.2f Miles", totalDistance *0.000621371];
   distanceTraveledLabel.text = distanceString;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T19:21:52.343

手动在 locationManager 的每个回调中:)

```
fullDistance = 0 ;//add it up
newDistance = GPS();//get with location
oldDistance

delta = abs(oldDist - newDist)
full += delta;

old = new 
```

# mysql - MYSQL 查询检索当前月份数据以及检查上个月

> ID：13325118
> 
> 赞同：1
> 
> 时间：2012-11-10T18:58:33.083
> 
> 标签：mysql

我有一张表 work_history('id','name','work','work_month','work_year')。

我需要查询当前月份的数据，但如果当前月份不存在数据，在这种情况下检索上个月的数据，依此类推.....直到找不到数据。nly For Ex-如果找到 11-2012 的数据，则仅检索此数据，无需检查上个月，但如果未找到，则检查上个月 10-2012。如果再次找不到检查 09-2012。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:16:17.833

您想要的月份是数据中可用的最大月份。它必须是当前月份或最接近它的月份。所以这样的查询应该是这样的：

```
select ......
from work_history
where work_month = (select max(work_month) from work_history) 
```

请注意，如果列 work_month 是 char 列，您可能需要将数据转换为日期类型以便进行正确比较。基于上面示例中看到的格式：

```
select ......
from work_history
where str_to_date(work_month,'%m-%Y') = (select max(str_to_date(work_month,'%m-%Y')) from work_history) 
```

**编辑**

在所有评论之后，以下查询应该修复我的错误，并根据用户 ID 提供数据：

```
select wh.*
from work_history wh, 
  (select id, max(str_to_date(work_month,'%m-%Y')) as mx_month 
   from work_history 
   where str_to_date(work_month,'%m-%Y') <= curdate()  
   group by id             
  ) wh2
where wh.id=wh2.id
and str_to_date(wh.work_month,'%m-%Y') = wh2.mx_month 
```

# reload - trigger.io 工具包重新加载选项卡无法加载

> ID：13325121
> 
> 赞同：1
> 
> 时间：2012-11-10T18:59:07.763
> 
> 标签：reload, trigger.io

至少从昨晚（12 小时以上）的某个时间开始，重新加载选项卡一直无法加载。我已经尝试过“清洁应用程序”选项，但除此之外我不知道该怎么做。这是最终回到屏幕顶部的错误：

```
Error in remote call to reload.verify_config: GET to reload/buildevents/ce8b0e4afeac11e1bdde12313d1adcbe failed: <Response [504]> Details Close 
```

回溯（最近一次通话最后）：

```
 File "C:\Users\bholub\AppData\Local\Trigger Toolkit\build-tools\forge\async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)   File "C:\Users\bholub\AppData\Local\Trigger Toolkit\trigger\api\reload.py", line 81, in verify_config
    buildevents = forge_tool.singleton.remote.buildevents(path)['buildevents']   File "C:\Users\bholub\AppData\Local\Trigger Toolkit\build-tools\forge\remote.py", line 627, in buildevents
    resp = self._api_get(url)   File "C:\Users\bholub\AppData\Local\Trigger Toolkit\build-tools\forge\remote.py", line 223, in _api_get
    _check_api_response_for_error(url, 'GET', resp)   File "C:\Users\bholub\AppData\Local\Trigger Toolkit\build-tools\forge\remote.py", line 94, in
_check_api_response_for_error
    raise RequestError(resp, msg) RequestError: GET to reload/buildevents/ce8b0e4afeac11e1bdde12313d1adcbe failed: <Response [504]> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:58:43.420

这是由 Trigger.io 端的一些未优化的应用服务器代码引起的：您的特定用法对我们的代码特别尴尬，因此是 504。

我昨天对其进行了修复：现在每个人都应该看到一个更快捷的重新加载选项卡！

# backbone.js - 更改主干模型和集合的“url”属性

> ID：13325123
> 
> 赞同：0
> 
> 时间：2012-11-10T19:00:07.137
> 
> 标签：backbone.js, sync

我正在`sync`为 Backbone 编写一个自定义，而`url`同步的名称不是一个明显的选择。我想让它变成`point`这样，而不是：

```
MyAppModel = Backbone.Model.extend({
    url: '/some/api'
}); 
```

我可以用...

```
MyAppModel = Backbone.Model.extend({
    point: 'some/reference`
}); 
```

有没有办法（不修改主干）使它如此`url`= `point`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:11:13.523

这应该有效： `url = function(){return this.point };`

但是为什么要“重命名”该`url`属性？只是为了语义？

# jquery - Fancybox 加载动画不触发

> ID：13325124
> 
> 赞同：3
> 
> 时间：2012-11-10T19:00:17.070
> 
> 标签：jquery, fancybox

有什么特别的原因为什么fancybox功能

```
$.fancybox.showActivity(); 
```

在我的脚本中引发错误？是否有需要调用函数的特定顺序？该功能旨在在内容加载到弹出窗口之前显示加载图像。这是我的代码：

```
$(".info_button").click(function () {

    var pictid_browse = $(this).parent().find('#pictid').val();
    $.fancybox.showActivity();
    $.ajax({
                url: "ajax.html",
                type: "POST",
                async:false,
                data: ({f:"get_info",pictid:pictid_browse}),
                success: function(data){
    $.fancybox({
                    'autoDimensions'    : false,
                'width'                 : 950,
                'height'                : 'auto',
                'transitionIn'      : 'none',
                'transitionOut'     : 'none'
            });
                $.fancybox({content:data,'autoDimensions':true,'scrolling':'no',});

    }
    });

    return false;
    }); 
```

我得到的错误是：

```
Uncaught TypeError: Object function () {
        F.open.apply( this, arguments );
    } has no method 'showActivity' 
```

或者

```
TypeError: 'undefined' is not a function (evaluating '$.fancybox.showActivity()') 
```

Fancybox 版本：2.1.3

**更新：**

我不知道发生了什么，但如果我把

```
$.fancybox.showLoading(); 
```

在外面

```
$(".info_button").click(function () { 
```

然后它会触发并显示动画。但是，一旦我单击了“.info_button”类的项目，我就需要它发生

以下解决方案似乎也不能解决问题：

```
 $(".info_button").bind('click', function (e) {
  e.stopPropagation(); e.preventDefault();
} 
```

研究表明，如果删除以下代码，则会触发加载：

```
 $.fancybox({
content:data,
                'autoDimensions'    : true,
            'width'                 : 'auto',
            'height'                : 'auto',
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'scrolling':'no'
        }); 
```

这可能意味着当包含在 ajax 函数中时，fancybox 无法正常工作，但为什么 - 我不知道

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:13:36.963

[fancybox.net](http://fancybox.net/api)上的 apidock有点过时了（它适用于 1.xy ）。

因此，如果您使用：

*   您想购买的较旧的 1.xy： `$.fancybox.showActivity();`
*   您想要购买的较新的 2.xy： `$.fancybox.showLoading();`

您可以找到 2.xy [fancyapss.com](http://fancyapps.com/fancybox/#docs)文档和资料的文档。他们保持网站“因为两个版本（1.x 和 2.x）有不同的许可方案”（[感谢@JFK](https://stackoverflow.com/users/1055987/jfk)）。你可以举报，mb 你会从他们那里得到一颗金星 :)

=========**问题更新后回答**==========

如果没有看到完整的 html 和 js，我无法确定，但您可以尝试：

```
$(".info_button").bind('click', function (e) {
  e.stopPropagation(); e.preventDefault();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-22T04:30:19.207

你可以这样做

```
 <style>
     #fancybox-loading{z-index:999999999;}
    </style>

     <script>
                       $.fancybox({
                                'href'          :your_url,  
                                'width'         : 900,
                                'height'        : 600,
                                'scrolling' : 'auto',
                                'type'              : 'iframe',
                                'titleShow'     : false,
                                'onComplete' : function() {
                                    $.fancybox.showActivity();
                                    $('#fancybox-frame').load(function() {
                                        $.fancybox.hideActivity();
                                    });
                                }
                        })
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T23:06:22.770

问题似乎出在双重幻想箱电话中。下面的工作代码：

```
 $('.info_button').bind('click', function() {
    var pictid_browse = $(this).parent().find('#pictid').val();
    $.fancybox.showLoading();
    $.ajax({
        type:"POST",
        cache:false,
        url:"ajax.html",
        data:({f:"get_info",pictid:pictid_browse}),
        success: function(data) {
            $.fancybox({content:data,'autoDimensions':true,'scrolling':'no'});
        }
    });
    return false;
}); 
```

# c++ - 轻量级 8 字节散列函数算法

> ID：13325125
> 
> 赞同：10
> 
> 时间：2012-11-10T19:00:36.450
> 
> 标签：c++, c, hash, digest

我需要从可变长度字符串中提取一个 8 字节的摘要，所以我正在寻找一种我将在 c/c++ 中实现的算法。这将是微控制器上数字签名程序的一部分，因此它必须是：

*   可以用几行代码写，因为固件必须尽可能少；
*   资源消耗低，特别是内存（最好小于 100 字节）；
*   足够强大，以至于在字符串的任何位置更改单个字符都会改变整体摘要。

我查看了现有的算法，例如 crc64，但它们对于我的平台来说似乎太重了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T19:12:45.030

没有机会在 64 位中进行安全散列。即使是 160 位的 SHA-1，理论上也被认为是损坏的。如果您真的关心安全数字签名，您应该使用 SHA2-256。如果您不关心安全性并且只想要一个避免非对抗性冲突的哈希函数，只需使用以下内容，就可以了：

```
constexpr uint64 P1 = 7;
constexpr uint64 P2 = 31;

uint64 hash = P1;
for (const char* p = s; *p != 0; p++) {
    hash = hash * P2 + *p;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T21:40:24.010

正如 AndrewTomazos-Fathomling 所说，不可能在 64 位中进行安全散列，所以如果这是您的意图，那么我的建议是**STOP**，拿起一本书并阅读有关加密安全散列的内容。

如果您不打算将其用作安全哈希并且您不关心冲突或攻击，那么他给您的答案就可以了，您可以根据需要调整素数 P1 和 P2。我会给你另一种选择，它允许你做标记散列和更多的混合。

```
// Disclaimer: I make no claims about the quality of this particular hash - it's 
// certainly not a cryptographically secure hash, nor should it *ever* be 
// construed as such. 

unsigned long long quickhash64(const char *str, unsigned long long mix = 0)
{ // set 'mix' to some value other than zero if you want a tagged hash          
    const unsigned long long mulp = 2654435789;

    mix ^= 104395301;

    while(*str)
        mix += (*str++ * mulp) ^ (mix >> 23);

    return mix ^ (mix << 37);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T19:17:49.917

这是我在旧源文件中找到的 32 位版本的修改版本

```
static unsigned long long llhash(const char *str)
{
    unsigned long long hash = 5381;
    int c;

    while (c = *str++)
        hash = ((hash << 5) + hash) + c;

    return hash;
} 
```

但是散列总是会导致冲突。当然，有些算法比其他算法更好。

**编辑：** 我找到了 32 位版本的来源：[http ://www.cse.yorku.ca/~oz/hash.html](http://www.cse.yorku.ca/~oz/hash.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-19T09:13:53.077

我有完全相同的要求，*在取消 SIP 哈希（**[由Bloomberg 在这里实现](https://github.com/bloomberg/bde/blob/master/groups/bsl/bslh/bslh_siphashalgorithm.cpp)**）*之后，我选择了**FNV-1A**。

我在这里找到了一个 FNV 实现：

[https://github.com/foonathan/string_id/blob/master/hash.hpp](https://github.com/foonathan/string_id/blob/master/hash.hpp)

这是：

```
constexpr uint64_t fnv_basis = 14695981039346656037ull;
constexpr uint64_t fnv_prime = 1099511628211ull;

// FNV-1a 64 bit hash of null terminated buffer
uint64_t fnv1a_hash(const char* str, uint64_t hash = fnv_basis)
{
    return *str ? fnv1a_hash(str + 1, (hash ^ *str) * fnv_prime) : hash;
} 
```

看来他正在使用尾递归进行循环。停止条件是`null`字节。
（我猜，提升使用`hash_range`的是`hash_combining`链中的每个元素。）

许可证是**zlib**，版权是 Jonathan Müller。虽然我不相信如果执行其他人的研究（[Fowler-Noll-Vo](https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function)），oneliner 可以获得合法许可。

# iphone - 可达性 iOS 对 vpn 上 wifi 的帮助不大

> ID：13325129
> 
> 赞同：0
> 
> 时间：2012-11-10T19:01:03.823
> 
> 标签：iphone, objective-c, ios, reachability

我在类可达性和 vpn 或公共互联网网关方面遇到了一点问题。

如果 iPhone 通过一些 vpn 连接到公共 Wifi 或付费应用程序崩溃。如果我禁用 wifi 并强制通过 3g 一切正常，如果 wifi 是经典的工作 wifi，它也可以正常工作。所以我知道问题与那些带有登录名和密码的公共wifi热点有关。

我如何测试 Wifi 是否可以到达服务器并取回数据？主机名的可达性不应该解决问题吗？看起来即使设置了主机名，它也会返回reachableviaWifi。

谢谢！

```
Reachability * reach = [Reachability reachabilityWithHostName:@"www.mysoapp.com"];

NetworkStatus status = [reach currentReachabilityStatus];

if (status == NotReachable) {

    return NO;
}
else
    return YES; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:34:29.853

可达性只检查第一跳（在去请求主机的路上）。这在移动环境中很重要，因为第一跳可以随着设备移动而动态变化和丢弃。

如果您想一直检查到所需主机，经过第一跳，最好的方法是实际尝试连接到该主机，并发送和接收网络数据包（例如，您的应用程序的常规网络流量）。然后让应用程序在连接似乎超时时向用户提供选项，而不是让应用程序锁定或崩溃。Apple 有时会在其应用程序审查过程中测试后者，并使用失败（如果网络路由中断，则崩溃或锁定）作为拒绝应用程序的理由。

# netbeans - Netbeans 代码模板格式化语法

> ID：13325134
> 
> 赞同：8
> 
> 时间：2012-11-10T19:02:01.000
> 
> 标签：netbeans, syntax, code-formatting

我想知道在netbeans ide中用于格式化代码模板的语法或语言是什么。我的意思是，在默认模板中，我可以看到类似的内容；

```
while (${EXP default="exp"})
{ 
   ${selection line}${cursor} 
} 
```

和：

```
// <editor-fold defaultstate="collapsed" desc="${comment}">
${selection}${cursor}// </editor-fold> 
```

我进行了实验并做到了这一点：

```
int ${IDX newVarName default="loop"};

for (${IDX} = 0; ${IDX} < ${SIZE int default="size"}; ${IDX}++)
{
   ${cursor}
} 
```

它有效，但我真的不知道**"${IDX}"**或**"${SIZE int default="size"}"**或**"${selection}${cursor}"**来自哪里以及其他哪些语句我可以用来格式化我的模板吗？

这是某种脚本或编程语言吗？

我在哪里可以找到这些信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T17:47:22.487

我认为 Netbeans 为此使用了模板引擎[Freemarker](http://freemarker.org/)。因此，所有变量 (= `${...}`) 在您使用模板时都由 Netbeans 填充。

不幸的是，我没有您可以使用的所有默认变量/方法的完整列表，但这里列出了其中两个：

**`${cursor}`：**

> 定义代码模板值编辑完成后插入符号所在的位置。

**`${selection}`：**

> 定义粘贴编辑器选择内容的位置。这被所谓的“选择模板”使用，每当用户在编辑器中选择一些文本时，这些模板就会作为提示出现。

*见这里：* [http ://wiki.netbeans.org/Java_EditorUsersGuide#How_to_use_Code_Templates](http://wiki.netbeans.org/Java_EditorUsersGuide#How_to_use_Code_Templates)

`${IDX}`看起来像您使用的自定义变量。

另请参阅：
- [NetBeans IDE Java 编辑器中的代码帮助：参考指南（代码模板）](http://netbeans.org/kb/docs/java/editor-codereference.html#codetemplates)
- [NetBeans IDE for PHP 中的代码模板](http://netbeans.org/kb/docs/php/code-templates.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T06:42:07.947

[How_to_use_Code_Templates](http://wiki.netbeans.org/Java_EditorUsersGuide#How_to_use_Code_Templates)几乎涵盖了所有内容。查看[CodeTemplateParameter.java](http://codenav.org/code.html?project=/org/netbeans/api/org-netbeans-modules-editor-codetemplates/RELEASE70&path=/Source%20Packages/org.netbeans.lib.editor.codetemplates.spi/CodeTemplateParameter.java)显示有另一个名为“completionInvoke”的提示，它[请求显示当前聚焦的文本组件的代码完成弹出窗口](http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor-completion/org/netbeans/api/editor/completion/Completion.html#showCompletion%28%29)，但仅此而已。

# macos - 为什么 sed 在 OSX 中添加新行？

> ID：13325138
> 
> 赞同：18
> 
> 时间：2012-11-10T19:02:33.047
> 
> 标签：macos, sed

```
echo -n 'I hate cats' > cats.txt
sed -i '' 's/hate/love/' cats.txt 
```

这会正确更改文件中的单词，但也会在文件末尾添加换行符。为什么？这只发生在 OSX 中，而不是 Ubuntu 等。我该如何阻止它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T00:18:25.947

```
echo -n 'I hate cats' > cats.txt 
```

此命令将使用单引号之间的 11 个字符填充“cats.txt”的内容。如果你在这个阶段检查cats.txt 的大小，它应该是11 个字节。

```
sed -i '' 's/hate/love/' cats.txt 
```

***此命令将逐行***读取cats.txt 文件，并将其替换为每行已将“hate”的第一个实例替换为“love”的文件（如果存在这样的实例）。重要的部分是理解什么是线。从 sed 手册页：

```
 Normally, sed cyclically copies a line of input, not including its
 terminating newline character, into a pattern space, (unless there is
 something left after a ``D'' function), applies all of the commands
 with addresses that select that pattern space, copies the pattern
 space to the standard output, appending a newline, and deletes the
 pattern space. 
```

注意`appending a newline`部分。在您的系统上，sed 仍然将您的文件解释为包含单行，即使没有终止换行符。所以输出将是 11 个字符，加上附加的换行符。在其他平台上，情况不一定如此。有时 sed 会完全跳过文件中的最后一行（实际上是删除它），因为[它不是真正的一行](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_205)！但是在您的情况下， sed 基本上是在为您修复文件（作为其中没有行的文件，它是 sed 的错误输入）。

在此处查看更多详细信息：[为什么文本文件应以换行符结尾？](https://stackoverflow.com/questions/729692/why-should-files-end-with-a-newline)

请参阅此问题以了解解决问题的另一种方法：[SED 在末尾添加新行](https://stackoverflow.com/questions/10226855/sed-adds-new-line-at-the-end)

如果您需要一个不添加换行符的解决方案，您可以使用`gsed`( `brew install gnu-sed`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-01T06:12:06.700

避免这个问题的一个好方法是使用 perl 而不是 sed。Perl 将尊重原始文件中的 EOF 换行符或缺少它。

```
echo -n 'I hate cats' > cats.txt
perl -pi -e 's/hate/love/' cats.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T11:01:11.840

请注意，GNU sed 不会在 Mac OS 上添加换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T07:04:53.440

您可以做的另一件事是：

```
echo -n 'I hate cats' > cats.txt
SAFE=$(cat cats.txt; echo x)
SAFE=$(printf "$SAFE" | sed -e 's/hate/love/')
SAFE=${SAFE%x} 
```

这样，如果cats.txt 以换行符结尾，它就会被保留。如果没有，则不会添加一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T21:34:40.110

这对我有用。我不必使用中间文件。

```
OUTPUT=$( echo 'I hate cats' | sed 's/hate/love/' )
echo -n "$OUTPUT" 
```

# dotnetnuke - Dotnet Nuke 更换皮肤

> ID：13325143
> 
> 赞同：0
> 
> 时间：2012-11-10T19:03:20.680
> 
> 标签：dotnetnuke

我今天才开始使用 dotnet nuke (v6.2)。我已经上传了一个新皮肤并应用了它。我还在网站上添加了一个新页面。当我以管理员身份登录时，我可以看到新页面，并且所有页面都使用新皮肤进行了样式设置。但是，当我在未登录的情况下浏览该站点时，它使用默认的黑暗骑士皮肤进行样式设置，并且我看不到我的新页面。

谁能告诉我我错过了哪一步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:15:05.653

虽然我已经在外观菜单下更改了网站的皮肤 - 各个页面的皮肤仍然设置为黑暗骑士。我将其更改为站点默认设置，现在一切都很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T03:58:10.823

我可以看到为什么您在登录时会看到不同的皮肤的两种可能性。首先，如果您使用的是 DotNetNuke 专业版，您可能会打开页面缓存，并且需要等待缓存清除（尽管更换皮肤应该会自动清除它）。其次，可能是您退出时皮肤出现错误（如果皮肤中有一些自定义代码决定您是否有帐户）。检查日志查看器以查看在您访问已注销的站点时是否记录了任何错误。

# matlab - matlab中的平均滤波器

> ID：13325144
> 
> 赞同：0
> 
> 时间：2012-11-10T19:03:22.413
> 
> 标签：matlab, image-processing, filter

我正在尝试仅使用左右邻居计算每个像素的平均值，但在处理结束时我只得到一张白色图像，我找不到我的错误在哪里。这是我的代码

```
imageIn = imread('Prueba.jpg');
imageIn = rgb2gray(imageIn);
imageOut = zeros(size(imageIn));

ny = size(imageIn, 1);
nx = size(imageIn, 2);

imshow(imageIn);

u = [];
v = [];

tic

for i = 1:ny
    u = imageIn(i,:);
    v = zeros(1, ny);
    for k = 2:ny-1
        v(k) = (uint32(u(k-1))+uint32(u(k))+uint32(u(k+1)))/3;
    end
    %Special cases first and last pixel
    v(1) = (uint32(u(2))+uint32(u(1))+uint32(u(2)))/3;
    v(ny) = (uint32(u(ny-1))+uint32(u(ny))+uint32(u(ny-1)))/3;
    imageOut(i,:) = v;
end

toc
imshow(imageOut); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:57:04.907

将代码的最后一行更改为`imagesc(imageOut)`，您会看到图像实际上不是白色的。

你的代码很好；使用该`imshow()`函数图像显示为白色的原因是因为在应用局部平均值后，像素强度的范围要小得多，并且使用的默认缩放`imshow()`不足以显示图像的对比度。

阅读有关 b/t 的差异`imshow()`，`imagesc()`您会看到混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:23:41.123

为什么不直接创建一个第二个矩阵，它是第一个矩阵的克隆，将其移过来，然后对这两个矩阵求平均？

```
imIn = imread('Prueba.jpg');

nx = size(d,1);
ny = size(d,2);

% Create temporary matrices padded with nan
tmp1 = [nan(ny,2), d];
tmp2 = [d, nan(ny,2)];

imOut = tmp1;
imOut(:,:,2) = tmp2;

% use nanmean so the mean is just the value of the 1 column
imOut = nanmean(imOut,3);

out = imOut(2:end-1,:); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:37:16.110

尝试使用这个

```
imageIn = imread('Prueba.jpg');
imageIn = rgb2gray(imageIn);
imageOut = zeros(size(imageIn));

ny = size(imageIn, 1);
nx = size(imageIn, 2);

imshow(imageIn);

u = [];
v = [];

tic

for i = 1:ny
u = imageIn(i,:);
v = zeros(1, ny);
for k = 2:ny-1
v(k) = (uint32(u(k-1))+uint32(u(k))+uint32(u(k+1)))/3;
end
%Special cases first and last pixel
v(1) = (uint32(u(2))+uint32(u(1))+uint32(u(2)))/3;
v(ny) = (uint32(u(ny-1))+uint32(u(ny))+uint32(u(ny-1)))/3;
imageOut(i,:) = v;
end

toc 
```

imshow（图像输出）；

# google-app-engine - API 调用 datastore_v3.Put() 需要的配额多于可用配额

> ID：13325147
> 
> 赞同：14
> 
> 时间：2012-11-10T19:03:27.130
> 
> 标签：google-app-engine, google-cloud-datastore

**如果达到数据存储写入操作**限制，如何重置配额？对数据存储区的任何操作（来自管理控制台和我的代码）都会报告以下错误：

`The API call datastore_v3.Put() required more quota than is available.`

我曾尝试禁用应用程序并等待配额重置，但它不起作用。启用应用程序后，它会产生大量任务，这些任务又会尝试对数据存储进行操作，这显然会消耗配额。

现在，我已经暂停了任务队列，等待 24 小时再试一次。

这是正确的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T19:20:38.250

配额每 24 小时重置一次，因此请等待该时间或启用计费。禁用和重新启用应用程序不会重置配额。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-29T07:00:44.193

即使启用了计费，您也应该为您的应用分配每日预算。也许你忘了这样做。

转到云控制台，选择项目，转到左侧导航栏中的 Compute > App Engine > Settings。并设置每日预算。

[![继承人是怎样的](../Images/7e458f55faef64732650e75e79cecd6d.png)](https://i.stack.imgur.com/Jpqoq.png)

# extjs - 编译使用 Direct 的 ExtJS MVC 应用程序

> ID：13325148
> 
> 赞同：1
> 
> 时间：2012-11-10T19:03:42.473
> 
> 标签：extjs, extjs4, extjs4.1

我有以下情况。在我未编译的项目中，我已包含（在 html 文件中）：

*   extjs-all.js
*   我的 api.js（生成远程调用）
*   应用程序.js

当我编译我的应用程序时，我得到一个包含 extjs 库和我的应用程序文件的文件。我无法让它工作，因为我没有地方包含我的 api.js。我不能在 all-classes.js 之前包含，因为 Ext.ns 不起作用。如果我在我的 all-classes.js 之后包含，那么我的商店将不会实例化直接函数。

有什么想法吗？我是否必须将 extjs 库缩小和应用程序文件编译分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:08:06.187

我做类似的事情；

*   首先是 ExtJS 库
*   第二个API
*   第三个我的自定义类/扩展（它们都不使用 API）
*   第四是模特、店铺
*   申请的其余部分的第五部分

如果这不起作用，您应该进行必要的重构以使其正常工作，否则您可能会遇到问题。

# c - Popen 和 execl 没有给出用户定义程序的输出

> ID：13325149
> 
> 赞同：0
> 
> 时间：2012-11-10T19:03:46.113
> 
> 标签：c, exec, popen

我正在尝试在我的 C 程序中执行其他程序。我的第一次尝试是使用 popen。当我尝试从中读取时，`pipe`我只得到 1 个字节的回复，而在 buf 中什么也没有。我不确定这背后的原因。

弹出示例：

```
#include<stdio.h>
#include<unistd.h>

int main(int argc, char* argv[])
{
        FILE* pipe;
        if ((pipe=(FILE*)popen("./test.php","r"))==NULL)
                printf("this is not working\n");
        char buf[1024] = {'\0'};

        int fd=fileno(pipe);

        int bytes = read(fd, buf, 1024);

        printf("bytes read %d\n", bytes);

        printf("The program: %s\n", buf);
        if(pclose(pipe)<0)
                printf("not working\n");
        return 0;
} 
```

例子

```
#!/usr/bin/php

<?php
echo "THIS IS A TEST THAT WORKED\n";
?> 
```

输出：

```
bytes read 1
The program: 
```

ls的输出：

```
ls -l test.php
-rwxr-xr-x+ 1 tpar44 user 62 Nov 10 14:42 test.php 
```

对此的任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:08:18.640

`popen`如果您的脚本没有*shebang* ，则需要执行php解释器并将脚本的名称作为参数传递，因为shell不知道要使用哪个解释器：

```
fp = popen("php /path/to/script/test.php", "r"); 
```

如果脚本有 shebang 行，你可以直接执行它，因为`popen`使用 shell 来执行命令，它可以找出要使用的命令，所以你可以这样做：

```
 fp = popen("/path/to/script/test.php", "r"); 
```

但是，请确保脚本是可执行的：

```
chmod +x test.php 
```

您也可以使用`execl()`，但您必须指定二进制文件的路径，因为`execl`不使用外壳：

```
execl("/usr/bin/php", "/usr/bin/php", "-q",
      "/path/to/script/test.php", (char *) NULL); 
```

不要忘记从管道中实际读取；）

```
fread(buf, 1, 1024, pipe); 
```

# c# - 使用 Linq 将 xml 解析为 CLR 类型

> ID：13325151
> 
> 赞同：0
> 
> 时间：2012-11-10T19:04:08.037
> 
> 标签：c#, xml, linq

我有以下 xml 结构，我想将此 xml 转换为 CLR 对象，但我被卡住了。

```
<?xml version="1.0" encoding="utf-8"?>
<SymbolData xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            assembly="C:\adCenter\debug\DLLs\Microsoft.Advertiser.CampaignManagement.BusinessRules.dll">
  <sourceFiles>
    <document id="1" 
              url="d:\7018\4579\Sources\Live\Microsoft.Advertiser.CampaignManagement.BusinessRules\AdExtensionValidators\AdExtensionValidationBatchErrors.cs" 
              language="3f5162f8-07c6-11d3-9053-00c04fa302a1" 
              languageVendor="994b45c4-e6e9-11d2-903f-00c04fa302a1" 
              documentType="5a869d0b-6611-11d3-bd2a-0000f80849bd" />    
    <document id="2" 
              url="d:\7018\4579\Sources\Live\Microsoft.Advertiser.CampaignManagement.BusinessRules\AdExtensionValidators\AdExtensionValidationBatchErrors.cs" 
              language="3f5162f8-07c6-11d3-9053-00c04fa302a1" 
              languageVendor="994b45c4-e6e9-11d2-903f-00c04fa302a1" 
              documentType="5a869d0b-6611-11d3-bd2a-0000f80849bd" />        
  </sourceFiles>
  <method name="Microsoft.Advertiser.CampaignManagement.BusinessRules.AdExtensionValidators.AdExtensionValidationBatchErrors::.ctor" 
          token="0x600000c">
    <sequencePoints>
      <seqPoint ilOffset="0" sourceId="1" startRow="10" startColumn="9" endRow="10" endColumn="106" />
      <seqPoint ilOffset="11" sourceId="1" startRow="12" startColumn="9" endRow="12" endColumn="136" />
      <seqPoint ilOffset="22" sourceId="1" startRow="14" startColumn="9" endRow="14" endColumn="181" />
      <seqPoint ilOffset="33" sourceId="1" hidden="true" startRow="16707566" startColumn="0" endRow="16707566" endColumn="0" />
    </sequencePoints>
    <rootScope implicit="true" startOffset="0" endOffset="40">
      <scope startOffset="0" endOffset="40" isReconstructedDueToDiasymreaderBug="true" />
    </rootScope>
    <symAttributes />
    <csharpCustomDebugInfo version="4">
      <entries>
        <usingForward version="4" tokenToForwardTo="0x6000001" />
      </entries>
    </csharpCustomDebugInfo>
  </method>
  <method name="Microsoft.Advertiser.CampaignManagement.BusinessRules.AdExtensionValidators.AdExtensionValidationError::ToString" token="0x600000f">
    <sequencePoints>
      <seqPoint ilOffset="0" sourceId="2" startRow="167" startColumn="13" endRow="167" endColumn="110" />
    </sequencePoints>
    <rootScope implicit="true" startOffset="0" endOffset="33">
      <scope startOffset="0" endOffset="33" isReconstructedDueToDiasymreaderBug="true" />
    </rootScope>
    <symAttributes />
    <csharpCustomDebugInfo version="4">
      <entries>
        <usingForward version="4" tokenToForwardTo="0x600000d" />
      </entries>
    </csharpCustomDebugInfo>
  </method>

</SymbolData> 
```

我已经编写了以下代码来实现相同的目标，但我无法查询方法部分。 **例如，我想加载 documentID 和 SourceID 相同的所有方法。**

```
public class ClassDetails
    {
        public string Id { get; set; }
        public string Name { get; set; }
    }
    public class AssemblyDetails
    {
        public string DllName { get; set; }
        public List<ClassDetails> Classes { get; set; }
        public List<string> Methods { get; set; }
    }
    class Program
    {
        static void Main(string[] args)
        {
            var document = XDocument.Load("test11.xml");
            var query = from descendantNode in document.Descendants("sourceFiles")
                        select new AssemblyDetails()
                        {
                            DllName = document.Root.Attribute("assembly").Value,
                            Classes = (from x in document.Descendants("document")
                                      select new ClassDetails
                                      {
                                          Id=x.Attribute("id").Value,
                                          Name=x.Attribute("url").Value
                                      }).ToList(),
                            Methods = (from y in document.Descendants("method").Elements("seqPoint")
                                     where y.Attribute("sourceId").Value=="documentID"
                                     select y.Document.Root.Attribute("name").Value).ToList()
                       };

            int i=10;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:40:15.160

```
XDocument xdoc = XDocument.Load(path_to_xml);
var documentIds = xdoc.Descendants("document")
                      .Select(d => (int)d.Attribute("id"));
                      .ToList();

var methodNames = xdoc
    .Descendants("method")
    .Where(m => m.Descendants("seqPoint")
                 .Any(sp => documentIds.Contains((int)sp.Attribute("sourceId"))))
    .Select(m => (string)m.Attribute("name")); 
```

第一个查询获取所有文档 ID。

第二个查询获取方法的方法名称，这些方法至少有一个`seqPoint`with`sourceId`指定文档。

# css - 从上到下对齐标签

> ID：13325155
> 
> 赞同：0
> 
> 时间：2012-11-10T19:04:28.447
> 
> 标签：css

我正在尝试自定义一个免费的小部件，但我无权编辑 html。我只能访问 css。我希望能够`a`虚拟对齐标签。我尝试了以下 css，但标签彼此重叠/如何在它们之间放置空格？

HTML

```
<span><a href="#" title="Delete">[×]</a>&nbsp;<a href="#" title="Ban">[o]</a>&nbsp;</span> 
```

CSS

跨度{位置：固定；}

JSFIddle [http://jsfiddle.net/gfvAw/58/](http://jsfiddle.net/gfvAw/58/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:19:56.857

您始终可以浮动和清除锚标签：

```
a { float: left; clear: left; } 
```

这是一个 jsfiddle 来演示：http: [//jsfiddle.net/gfvAw/60/](http://jsfiddle.net/gfvAw/60/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:08:05.613

`a { display: block; }`

这会将`a`标签转换为`block`元素，这意味着它们将自动扩展以适应其容器。

但是，您应该意识到，使用`block`元素意味着用户将能够单击块中的任何位置，而不仅仅是链接文本的顶部。该问题的解决方案是使用 jQuery`<br/>`在每个标签之后插入标签`a`。或者您也可以用标签替换`&nbsp;`实体。`<br/>`

# bookmarklet - 分配书签图标

> ID：13325156
> 
> 赞同：0
> 
> 时间：2012-11-10T19:04:34.730
> 
> 标签：bookmarklet

> **可能重复：**
> [当书签拖动到工具栏时如何设置图标/图标？](https://stackoverflow.com/questions/521040/how-to-have-favicon-icon-set-when-bookmarklet-dragged-to-toolbar)

我在下一页上创建了一个书签...

[http://www.wishwrapped.com/pinit](http://www.wishwrapped.com/pinit)

谁能告诉我将图标拖到书签栏时如何设置图标？现在它根本不显示一个。它不应该至少拿起我为该网站拥有的图标吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:44:39.230

简短的回答：没有

我之前曾多次尝试找到解决此问题的方法。我坚定的结论是书签创建者不能直接为书签设置图标。

长答案：这样想……小书签是一种书签。书签的图标由它指向的网页设置。事实上，如果用户访问该页面并且图标已更新，它可以稍后更新。

小书签不指​​向任何网页。所以浏览器没有任何有意义的方式来选择图标。它可以使用分发页面上的图标，但即使这样也没有任何意义，因为书签可以分发到任何网页上。

用户可以通过一些步骤尝试设置图标，但这种方法只适用于某些浏览器，并非全部，而且现在可能已经过时且无用。

用户可能有某种方式可以使用某种插件设置图标。

此外，小书签创建者可以提供与小书签做同样事情的插件或扩展（[http://www.google.com/search?q=convert+bookmarklet+to+add-on](http://www.google.com/search?q=convert+bookmarklet+to+add-on)）。

# symfony - 从供应商目录为开源包做贡献？

> ID：13325158
> 
> 赞同：25
> 
> 时间：2012-11-10T19:04:37.733
> 
> 标签：symfony, composer-php

**理想情况**

通常在处理 Symfony2 项目时，我会在我的一个依赖项中发现我想要更改的内容。如果我能找到一种方法来简单地在供应商中更改它，然后轻松地将更改作为拉取请求推送，那么我可能会更频繁地做出贡献（而不是用本地子包覆盖该部分）。

**问题**

如果没有作曲家在下一次更新时吓坏了，我就无法更改供应商目录。如果我提交一个拉取请求，那么我可能需要相当长的时间才能真正在供应商中使用代码，这实际上是对贡献我的新功能的一种威慑。

**我现在怎么做**

我通常为捆绑包做贡献的方式是创建一个分支，将分支放入准系统 symfony 标准版应用程序中，进行更改，然后提交拉取请求。

**把叉子放进去`composer.json`？**

我能想到的唯一解决方案是删除我正在编辑的包的 packagegist 依赖项，然后将我的 fork 与来自 github 的 composer（作为一个包）包括在内。这样我可以立即获得我的代码并且仍然可以贡献。

这是唯一的解决方案吗？你怎么做呢？

在同时处理不同项目的同时为捆绑包做出贡献的任何提示/建议将不胜感激！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-01-15T18:34:29.477

唔……这个坏了。

我已经尝试过包含 fork 的官方方式，这是 composer.json 的一个示例（原始：kitano，fork：jstoeffler）：

（**对于那些赶时间的人：这不起作用）**

```
"repositories": [
//...
    {
        "type": "vcs",
        "url": "https://github.com/jstoeffler/KitanoConnectionBundle",

    },
//...
], 
```

**它继续使用原始 bundle**。不知道问题是什么，我不明白一切是如何工作的，但这里是我如何成功地将 fork 添加到项目中。

```
"repositories": [
//...
    {
        "type": "package",
        "package": {
            "name": "kitano/connection-bundle",
            "version": "dev-master",
            "source": {
                "url": "https://github.com/jstoeffler/KitanoConnectionBundle.git",
                "type": "git",
                "reference": "master"
            },
            "autoload": {
                "classmap": [""]
            }
        }
    },
//...
], 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-11T10:15:58.170

**[更新：答案不再有效]**

正如其中一条评论所指出的，这个答案已经有几年的历史了，不再正确了。请参阅下面的答案以了解正确的操作方式。

**[下面的原始答案]**

这是作曲家 Jordi Boggiano (@Seldaek) 推荐的方法。参见他今年早些时候在 Symfony Live San Francisco 上的演讲（在 2 分钟处）： [http ://www.youtube.com/watch?list=PLo7mBDsRHu11ChvScWUE7MN1Qo5QVHQEz&feature=player_detailpage&v=P3NwF8RV1lY#t=120s](http://www.youtube.com/watch?list=PLo7mBDsRHu11ChvScWUE7MN1Qo5QVHQEz&feature=player_detailpage&v=P3NwF8RV1lY#t=120s)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-18T10:27:14.820

截至2017年，正确的做法是：

1.  将您的 GitHub 分支链接添加到`repositories`

    ```
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/crimson-med/yii2-link-preview"
        }
    ], 
    ```

2.  将源添加到`require`您的`composer.json`

    ```
    "require": {
        "yii2mod/yii2-link-preview": "dev-master"
    }, 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-30T21:03:12.043

仅供参考，我刚刚尝试了第一个选项：

```
 "repositories": [{
    "type": "vcs",
    "url": "https://github.com/thujohn/twitter"
}],
"require": {
    "laravel/framework": "4.2.*",
    "thujohn/twitter": "dev-master",
    "anahkiasen/flickering": "^0.1.2",
    "fairholm/elasticquent": "dev-master",
    "facebook/php-sdk-v4" : "~5.0"
}, 
```

它工作得很好。

```
vagrant@dev:/var/www$ sudo php composer.phar update
Loading composer repositories with package information                                                                                                                                                         Updating dependencies (including require-dev)         
  - Removing thujohn/twitter (2.0.4)
  - Installing thujohn/twitter (dev-master 7a92118)
    Downloading: 100%         

Writing lock file
Generating autoload files
> php artisan clear-compiled
> php artisan optimize
Generating optimized class loader 
```

我只需要将“master”分支名称指定为“dev-master”。

# c# - 如何将 xml 文件读入 vb/C#.net 以使用数据表在网格中显示？

> ID：13325163
> 
> 赞同：-2
> 
> 时间：2012-11-10T19:05:23.543
> 
> 标签：c#, .net, xml

我想在 C#.NET 中读取这个 quiz.xml 文件，以使用数据表在网格中显示。n 稍后我想将此数据插入到我实际的 sql server 数据库中。

我不知道如何做到这一点......所以任何人都可以帮助我......提前谢谢......thanx in adv。

**quiz.xml**： [点击这里下载](http://www.mediafire.com/view/?cmlpybalcmcrmpa)

```
<?xml version="1.0" encoding="UTF-8"?>
<quiz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="quiz.xsd">
    <mchoice>
    <question>What is the capital city of Australia?</question>
        <answer>Sydney</answer>
    <answer correct="yes">Canberra</answer>
    <answer>Melbourne</answer>
    <answer>Gold Coast</answer>
</mchoice>
    <mchoice>
    <question>Launceston is the second largest city in which Australian state?</question>
    <answer>Victoria</answer>
    <answer>New South Wales</answer>
    <answer correct="yes">Tasmania</answer>
    <answer>Western Australia</answer>
</mchoice>
<mchoice>
    <question>Which state has the famous 'Twelve Apostles' ?</question>
    <answer correct="yes">Victoria</answer>
    <answer>South Australia</answer>
    <answer>New South Wales</answer>
    <answer>Western Australia</answer>
</mchoice>
    <mchoice>
    <question>Which is a popular ski resort in NSW?</question>
    <answer correct="yes">Perisher Blue</answer>
    <answer>Mt. Buller</answer>
    <answer>Mt. Baw-Baw</answer>
    <answer>Lake Mountain</answer>
</mchoice>
<mchoice>
    <question>Which of the following is NOT Australian native animals?</question>
    <answer>Kangaroo</answer>
    <answer correct="yes">Penguin</answer>
    <answer>Koala</answer>
    <answer>Wombat</answer>
</mchoice>
<mchoice>
    <question>Which city has an extensive tram network?</question>
    <answer>Sydney</answer>
    <answer correct="yes">Melbourne</answer>
    <answer>Adelaide</answer>
    <answer>Ballarat</answer>
</mchoice>
    <mchoice>
    <question>What is known as 'The Silver City' in Australia?</question>
    <answer>Alice Springs</answer>
    <answer correct="yes">Broken Hill</answer>
    <answer>Ballarat</answer>
    <answer>Silverton</answer>
</mchoice>
<mchoice>
    <question>In which location the war movie 'Thin Red Line' was taken?</question>
    <answer>Anglesea</answer>
    <answer>Apollo Bay</answer>
    <answer>Margaret River</answer>
    <answer>Monkey Mia</answer>
    <answer correct="yes">Townsville</answer>
</mchoice>
<mchoice>
    <question>Which is NOT true about Uluru ?</question>
    <answer>It is the world biggest monolith located in the centre of Australian continent</answer>
    <answer>It was named 'Ayers Rock' by European explorer William Gosse in 1873</answer>
    <answer correct="yes">Aboriginal people encourage tourists to climb Uluru</answer>
    <answer>The area contains carvings and paintings by Aboriginal people</answer>
</mchoice>
<mchoice>
    <question>What is so special about Longreach?</question>
    <answer>The place where a blacksmith named Thomas Hiscock found the first gold that triggerred gold rush</answer>
    <answer>The town has an expansive, well-preserved penal colony of Australia's early history</answer>
    <answer correct="yes">The first commercial flight by Qantas took from this town in 1921</answer>
    <answer>None of these answers are correct</answer>
</mchoice>
</quiz> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:09:58.903

您应该使用类的`"ReadXml"`方法`"System.Data.DataTable"`并通过它传递xml数据（甚至是文件路径！），然后通过设置`"DataSource"`属性将网格视图绑定到表格。

希望能帮助到你。

干杯

# algorithm - 粒子滤波算法应该如何初始化样本和权重？

> ID：13325167
> 
> 赞同：1
> 
> 时间：2012-11-10T19:05:51.593
> 
> 标签：algorithm, language-agnostic, probability, particle-filter

我应该使用冷凝算法来跟踪视频中移动的对象。对象的初始位置（例如边界框中心的坐标）和大小（边界框的宽度和高度）是已知的。

对象在笛卡尔平面上的位置和大小就是它的状态。给定对象的位置和大小的初始值，我应该如何初始化样本？另外，我应该如何初始化权重？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:57:32.913

## 准确的起始位置

如果您确定知道起点/大小，那么您可以将所有样本设置为已知值。权重可以设置为您喜欢的任何值（例如全部相等），因为压缩算法的第一步将从旧样本中选择 N 个新样本。

（选择哪些样本取决于相对权重，但由于所有样本都是相同的，它总是会给出相同的答案。）

## 近似起始位置

如果您有一个近似的起始位置（例如，起始位置可能具有几个像素的精度），那么您可以通过选择样本来表示起始分布来获得更好的结果。

一种方法是在允许的值范围内选择样本，并将权重设置为 PDF 的相应值。然后，您需要第二次通过对权重进行归一化，以使权重之和等于 1。

# javascript - DOM 操作 - 为什么使用 removeChild() 方法而不是 remove()？

> ID：13325179
> 
> 赞同：2
> 
> 时间：2012-11-10T19:07:17.807
> 
> 标签：javascript, dom

> **可能重复：**
> [为什么 removeChild 需要父节点？](https://stackoverflow.com/questions/3422370/why-does-removechild-need-a-parent-node)

跨浏览器删除节点元素的方法是使用`removeChild()`方法。但是，这种方式期望我们精确地定义节点的父节点，如下所示：

```
myNodeToRemove.parentNode.removeChild(myNodeToRemove); 
```

为什么浏览器没有像这样以更面向对象的方式实现 remove 方法：

```
myNodeToRemove.remove(); 
```

方法`remove()`开始如下：

```
function remove(){
  var parentNode = this.parentNode;
  ....
} 
```

确实，使用这种方式，不需要手动获取节点的父节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:27:58.073

对于这个问题：

为什么浏览器没有像这样以更面向对象的方式实现 remove 方法

```
myNodeToRemove.remove(); 
```

...你需要研究 Javascript 的历史，语言是如何诞生的，API 是如何诞生的等等。然后你就会明白我们是如何结束被称为现代网络的 clusterfuck 的。历史很搞笑。

好的起点是观看 Crockford 的 Javascript 视频

[http://javascript.crockford.com/#video](http://javascript.crockford.com/#video)

另外关于函数命名和面向对象的实践，这是一个很好的视频：

[http://vimeo.com/43380467](http://vimeo.com/43380467)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:29:49.390

我认为使用 parentNode 和 removeChild 组合的原因确保我们在我们希望删除的容器的实际父级上引用 removeChild 方法。

# jquery-mobile - 如何限制 jquery 移动内容和按钮宽度？

> ID：13325182
> 
> 赞同：1
> 
> 时间：2012-11-10T19:07:47.867
> 
> 标签：jquery-mobile, width, viewport

![在此处输入图像描述](../Images/67ce4b27e973bd071aac1f4fa2c78443.png) 尝试限制按钮和内容的宽度无济于事。尝试了 1 小时所有课程似乎没有任何效果..

我的意思是左侧和右侧的白色按钮之间的空间，朝向黑色。这个空间大约是 10px 但想最小化它。有谁知道怎么做？

.ui-page 似乎要走的路，但也行不通。

# javascript - 如何在一个 aspx 页面上对每个用户控件使用 javascript pageLoad() 事件？

> ID：13325187
> 
> 赞同：3
> 
> 时间：2012-11-10T19:08:13.883
> 
> 标签：javascript, asp.net, user-controls, asp.net-ajax

我有一个带有多个用户控件的 aspx 页面。页面是这样的，

```
<asp:Content ID="Content2" ContentPlaceHolderID="chpMainBody" runat="server">

            <en:ProfileInfo ID="ucProfileInfo" runat="server" />

            <br />
             <en:WorkingExperienceInfo ID="ucWorkingExperienceInfo" runat="server" />
            <br />
              <en:TechnicalInfo ID="ucTechnicalInfo" runat="server" />

   <br />
           <en:EducationInfo ID="ucEducationInfo" runat="server" />
</asp:Content> 
```

我在每个用户控件中将此脚本用于带有树视图的 dropdownextender，这是用于“ucEducationInfo”用户控件

```
<script type="text/javascript">
    var DDE4;
    var DDE5;
    function pageLoad() {
        DDE4 = $find('<%= dde_CountryUniversity.ClientID %>');
        DDE5 = $find('<%= dde_UniversityMajors.ClientID %>');

        DDE4._dropWrapperHoverBehavior_onhover();
        DDE5._dropWrapperHoverBehavior_onhover();

        $get('<%= pnl_CountryUniversity.ClientID %>').style.width = $get('<%= txt_CountryUniversity.ClientID %>').clientWidth;
        $get('<%= pnl_UniversityMajors.ClientID %>').style.width = $get('<%= txt_UniversityMajors.ClientID %>').clientWidth;

        if (DDE4._dropDownControl) {
            $common.removeHandlers(DDE4._dropDownControl, DDE4._dropDownControl$delegates);
        }
        if (DDE5._dropDownControl) {
            $common.removeHandlers(DDE5._dropDownControl, DDE5._dropDownControl$delegates);
        }

        DDE4._dropDownControl$delegates = {
            click: Function.createDelegate(DDE4, ShowMe),
            contextmenu: Function.createDelegate(DDE4, DDE4._dropDownControl_oncontextmenu)
        }
        DDE5._dropDownControl$delegates = {
            click: Function.createDelegate(DDE5, ShowMe),
            contextmenu: Function.createDelegate(DDE5, DDE5._dropDownControl_oncontextmenu)
        }

        $addHandlers(DDE4._dropDownControl, DDE4._dropDownControl$delegates);
        $addHandlers(DDE5._dropDownControl, DDE5._dropDownControl$delegates);
    }

    function ShowMe() {
        DDE4._wasClicked = true;
        DDE5._wasClicked = true;
    } 
```

但我注意到 scipt 仅适用于“ucEducationInfo”用户控件。我尝试更改用户控件的行，我认为这是因为用户控件位于页面末尾。我不擅长 javascript。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T20:19:28.307

在我看来，实现自定义 ajax 控件应该是最好的决定。但是由于您没有使用过 JavaScript，因此这对您来说是一项相当复杂的任务。尝试用下面的脚本替换用户控件中的 pageLoad 函数：

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function () {

    // code from pageLoad method here

    window.showControl = window.showControl || {};

    window.showControl["<%= this.ClientID %>"] = function () {
        DDE4._wasClicked = true;
        DDE5._wasClicked = true;
    };
}); 
```

以下是 ucEducationInfo 控件页面中使用 showControl 函数的示例：

```
showControl["<%= ucEducationInfo.ClientID %>"](); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:07:47.340

由于您标记了 AJAX，您可以在此处尝试信息。

[http://www.asp.net/ajax/documentation/live/overview/AJAXClientEvents.aspx](http://www.asp.net/ajax/documentation/live/overview/AJAXClientEvents.aspx)

您的代码的问题是当呈现用户控件时，可能会覆盖最后一次加载。您需要在上面的链接中添加一个处理程序，并可能检查它们不会在异步回发中双重添加，具体取决于您使用 ajax 的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:07:01.780

隔离函数，使变量本地化并且不冲突。试试这个：

```
<script type="text/javascript">
(function() {
    var DDE4;
    var DDE5;
    function pageLoad() {
        DDE4 = $find('<%= dde_CountryUniversity.ClientID %>');
        DDE5 = $find('<%= dde_UniversityMajors.ClientID %>');

        DDE4._dropWrapperHoverBehavior_onhover();
        DDE5._dropWrapperHoverBehavior_onhover();

        $get('<%= pnl_CountryUniversity.ClientID %>').style.width = $get('<%= txt_CountryUniversity.ClientID %>').clientWidth;
        $get('<%= pnl_UniversityMajors.ClientID %>').style.width = $get('<%= txt_UniversityMajors.ClientID %>').clientWidth;

        if (DDE4._dropDownControl) {
            $common.removeHandlers(DDE4._dropDownControl, DDE4._dropDownControl$delegates);
        }
        if (DDE5._dropDownControl) {
            $common.removeHandlers(DDE5._dropDownControl, DDE5._dropDownControl$delegates);
        }

        DDE4._dropDownControl$delegates = {
            click: Function.createDelegate(DDE4, ShowMe),
            contextmenu: Function.createDelegate(DDE4, DDE4._dropDownControl_oncontextmenu)
        }
        DDE5._dropDownControl$delegates = {
            click: Function.createDelegate(DDE5, ShowMe),
            contextmenu: Function.createDelegate(DDE5, DDE5._dropDownControl_oncontextmenu)
        }

        $addHandlers(DDE4._dropDownControl, DDE4._dropDownControl$delegates);
        $addHandlers(DDE5._dropDownControl, DDE5._dropDownControl$delegates);
    }

    function ShowMe() {
        DDE4._wasClicked = true;
        DDE5._wasClicked = true;
    }
})();
</script> 
```

此外，如果您这样做，您将需要从该功能块中调用 page_Load 或在其中添加一个就绪侦听器。

# oracle - IS OF TYPE 产生异常

> ID：13325190
> 
> 赞同：4
> 
> 时间：2012-11-10T19:08:20.263
> 
> 标签：oracle, plsql, user-defined-types

我阅读了关于[IS OF TYPE](http://docs.oracle.com/cd/B28359_01/server.111/b28286/conditions014.htm)的内容，我希望它应该返回 TRUE、FALSE 或 NULL。

我有两种对象类型：

```
CREATE TYPE o1 AS OBJECT ( id NUMBER );
/
CREATE TYPE o2 AS OBJECT ( id NUMBER );
/ 
```

当我运行下面的代码时，一切正常。

```
DECLARE
  type1 o1;
BEGIN
   type1 := o1(id=>1); 

   if (type1 IS OF (o1)) then
       DBMS_OUTPUT.PUT_LINE('type1 is o1');                    
   END if;  
END;
/ 
```

但是当我尝试运行时：

```
DECLARE
  type1 o1;
BEGIN
   type1 := o1(id=>1); 

   if (type1 IS OF (o2)) then
       DBMS_OUTPUT.PUT_LINE('type1 is o1');                    
   END if;  
END;
/ 
```

我收到以下异常

```
Error report:
ORA-06550: line 6, column 21:
PLS-00382: expression is of wrong type
ORA-06550: line 6, column 4:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

在文档中没有明确的解释，如果某些类型错误，我应该捕获异常吗？或者，我应该在 IF 条件下期望 false 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:34:28.153

如果您已将变量声明为`O1`类型，那么您可以使用`is of [type]`条件仅测试您的变量是`o1`类型还是`o1`的子类型。这是一个示例（必须实例化变量）：

```
 -- base type  
 SQL> create or replace type o1 as object(
  2    prop number
  3  )not final;
  4  /

Type created

-- O1's subtype
SQL> create or replace type o2 under o1(
  2    prop1 number
  3  );
  4  /

-- test if the  l_o1 is of O1 type
SQL> declare
  2    l_o1  o1;
  3  begin
  4    l_o1 := o1(prop=>1);
  5    if l_o1 is of (o1)
  6    then
  7      dbms_output.put_line('Yes');
  8    else
  9      dbms_output.put_line('No');
 10    end if;
 11  end;
 12  /

Yes

PL/SQL procedure successfully completed

-- test if the  l_o1 is of O2 type
SQL> declare
  2    l_o1  o1;
  3  begin
  4    l_o1 := o1(prop=>1);
  5    if l_o1 is of (o2)
  6    then
  7      dbms_output.put_line('Yes');
  8    else
  9      dbms_output.put_line('No');
 10    end if;
 11  end;
 12  /

No

PL/SQL procedure successfully completed

-- test if the  l_o2 is of O2 type

SQL> declare
  2    l_o2  o2;
  3  begin
  4    l_o2 := o2(prop=>1, prop1 => 1);
  5    if l_o2 is of (o2)
  6    then
  7      dbms_output.put_line('Yes');
  8    else
  9      dbms_output.put_line('No');
 10    end if;
 11  end;
 12  /

Yes

PL/SQL procedure successfully completed 
```

**更新**：

[查看此](http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/adobjbas.htm#i470492)内容以获取有关`is of[type]`. 通常变量的数据类型在编译时是已知的，但如果你必须处理动态类型，你可以查看`anydata`（对象数据类型）。这是一个简单的例子：

```
 SQL> declare
  2    l_o1 o1;
  3  
  4    -- Here is a procedure(for the sake of simplicity has not
  5    -- been written as a schema object)
  6    -- that doesn't not know
  7    -- variable of what dada type will be passed in
  8    -- at compile time;
  9    procedure DoSomething(p_var anydata)
 10    is
 11    begin
 12      case p_var.gettypename
 13        when 'HR.O1'
 14        then dbms_output.put_line('O1 data type. Do something');
 15        when 'HR.O2'
 16        then dbms_output.put_line('O2 data type. Do something');
 17      else
 18        dbms_output.put_line('Unknown data type');
 19      end case;
 20    end;
 21  
 22  begin
 23    l_o1 := o1(prop =>  1);
 24    DoSomething(anydata.ConvertObject(l_o1));
 25  end;
 26  /

O1 data type. Do something

PL/SQL procedure successfully completed 
```

# c# - 查找集合交集并排除

> ID：13325206
> 
> 赞同：2
> 
> 时间：2012-11-10T19:11:12.523
> 
> 标签：c#, .net, linq

拥有：

```
IEnumerable<int> oldValues; // Example: [1, 2, 3, 4]
IEnumerable<int> newValues; // Example: [3, 4, 5, 6] 
```

需要：

```
IEnumerable<int> removedValues; // Example: [1, 2]
IEnumerable<int> addedValues;   // Example: [5, 6] 
```

有什么好的 LINQ 解决方案的想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T19:13:27.673

您需要[Enumerable.Except](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx) - 此方法返回第一个序列中未出现在第二个序列中的那些元素。

```
IEnumerable<int> removedValued = oldValues.Except(newValues);
IEnumerable<int> addedValues = newValues.Except(oldValues); 
```

# android - 学习 Android 和 iOS 应用的 UI 艺术设计

> ID：13325208
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:11:14.210
> 
> 标签：android, ios, user-interface

我计划开发自己的 Android 和 iOS 应用程序。我知道如何编写代码，但之前没有学习过 UI 设计。任何人都可以向我推荐任何关于背景、图标、布局、颜色等的 UI 艺术设计的教程或书籍吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:23:18.593

我最近购买了[Mobile Design Pattern Gallery](http://shop.oreilly.com/product/0636920022367.do)。它有很多用于移动应用程序的 UI 模式。

您还可以查看Android的[用户界面指南](http://developer.android.com/guide/practices/ui_guidelines/index.html)

和 iOS的 iOS[人机界面指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:25:43.110

WWDC 2012 [iOS 用户界面设计](https://developer.apple.com/videos/wwdc/2012/?id=221)视频描述了 iOS 开发人员应该警惕的一些陷阱。正如弗兰克所说，[iOS HIG](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)也是考虑战术设计的好资源。

# wpf - 在 DataGridTemplateColumn 内绑定

> ID：13325209
> 
> 赞同：0
> 
> 时间：2012-11-10T19:11:33.850
> 
> 标签：wpf, entity-framework, binding, lazy-loading, selecteditem

我有*学术讲师*集合，它是使用**Entity Framework**从数据库中获取的。

`Lecturers`是 内的属性`LecturerListViewModel`：

```
public ObservableCollection<Lecturer> Lecturers { get; set; } 
```

`Lecturer`是数据库逆向工程的类：

```
public class Lecturer
{
    public Lecturer()
    {
    }

    public int Id_Lecturer { get; set; }
    public string Name { get; set; }
    public int? Academic_Degree_Id { get; set; }
    public virtual AcademicDegree AcademicDegree { get; set; } // lazy loading
} 
```

我想显示数据库中的所有讲师`DataGrid`（网格的所有单元格都是可编辑的；当用户单击**保存**按钮时，所有数据都将保存在数据库中）。问题是将最近的学位绑定到组合框。我试过这样：

```
<StackPanel d:DataContext="{d:DesignInstance Type=ViewModel:LecturerListViewModel}">
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Lecturers}" HeadersVisibility="Column">
        <DataGrid.Columns>

            <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
            <DataGridTemplateColumn Header="Academic degree">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <!-- PROBLEM HERE. SelectedItem="{Binding AcademicDegree}" doesn't work -->
                        <ComboBox SelectedItem="{Binding AcademicDegree}" ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AcademicDegrees}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

        </DataGrid.Columns>
    </DataGrid>
    <Button Content="Add" HorizontalAlignment="Center" Width="100"  Margin="15" Name="AddLecturerButton" />
</StackPanel> 
```

`ItemsSource="{Binding Lecturers}"`正确绑定。点击后有列表`checkbox`。但是程序启动后，里面的值`checkboxes`是空的。为什么？我该如何解决？

PS。`LecturerListViewModel`绑定在代码隐藏中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:14:22.630

您的对象需要通过 提供更改通知[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)。（因此，如果延迟加载完成，则需要为属性发出通知）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:41:16.213

如果要将枚举值绑定到组合框，则必须提供带有枚举值的 IEnumerable。实现这一点的最简单方法是`ObjectDataProvider`在您的资源中定义一个。

```
 xmlns:System="clr-namespace:System;assembly=mscorlib"
 xmlns:MyEnums="clr-namespace:LocalNamespaceWhereAcademicDegreeIsDefined"    
 ...
 <Window.Resources>
     <ObjectDataProvider x:Key="AcademicDegrees" MethodName="GetValues" ObjectType="{x:Type System:Enum}" >
         <ObjectDataProvider.MethodParameters>
             <x:Type TypeName="MyEnums:AcademicDegree"/>
          </ObjectDataProvider.MethodParameters>
     </ObjectDataProvider>
 <Window.Resources>
 ...
 ...
 <ComboBox SelectedItem="{Binding AcademicDegree}" ItemsSource="{Binding Source={StaticResource AcademicDegrees}}" />
 ...
 ... 
```

# symfony - 日期未保存到 mysql 数据库

> ID：13325211
> 
> 赞同：0
> 
> 时间：2012-11-10T19:11:54.363
> 
> 标签：symfony, doctrine-orm

我正在尝试保存日期（用户的生日）。

```
$values['name'] = $request->get('name');
$values['fbid'] = $request->get('fbid');
$values['birthdate'] = date("Y-m-d", $request->get('birthdate'));

$em = $this->getDoctrine()->getEntityManager();

$user = new User();
$user->setName($values['name']);
$user->setFbId($values['fbid']);
$user->setBirthdate($values['birthdate']);

$em->persist($user);
$em->flush(); 
```

然而，这是行不通的。我没有看到任何错误。有什么问题？当我删除生日的设置器时，用户会完美地插入数据库。

编辑：

```
/**
 * @ORM\Column(type="date", nullable=true)
 */
protected $birthdate;

/**
 * Set date
 *
 * @param date $birthdate
 */
public function setBirthdate($birthdate)
{
    $this->birthdate = $birthdate;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:17:33.897

尝试设置

```
$values['birthdate'] = date("Y-m-d", $request->get('birthdate')); 
```

到

```
$dateTime = new \DateTime();
$values['birthdate'] = $dateTime->setTimestamp($request->get('birthdate')); 
```

或查看如何创建[DateTime](http://php.net/manual/en/class.datetime.php "约会时间")以传递给教义

# javascript - 使用 jsdom 和 jasmine-node 未定义的窗口

> ID：13325212
> 
> 赞同：1
> 
> 时间：2012-11-10T19:12:02.810
> 
> 标签：javascript, testing, jasmine, jsdom, jasmine-node

我有一个文件`runspecs.js`初始化一些全局对象，如窗口和文档

```
//fake browser window & document
jsdom = require("jsdom");
global.document = jsdom.jsdom("<html><body></body></html>", jsdom.level(1, "core"));
global.window = jsdom.jsdom().createWindow();
global.jQuery = require("jquery");

global.document.cookie = '';

//Test framework
var jasmine=require('jasmine-node');
for(var key in jasmine) {
  global[key] = jasmine[key];
}

//What we're testing
//Make sure the coffeescript is compiled!

global.Socrates = require("./src/socrates.js").Socrates;

jasmine.executeSpecsInFolder(__dirname + '/specs', function(runner, log){
    process.exit(runner.results().failedCount?1:0);
}, true, true); 
```

现在我在 specs 目录下的唯一文件是 socrates.spec.coffee 及其编译文件 socrates.spec.js：

```
testNode = jQuery("<a id='testNode class='socrates' data-entity-id='bubbles'").appendTo('body')

describe 'socrates.js', () ->
  describe 'document/window setup', () ->
    it 'is attaches an instance to the window', () ->
      soc = new Socrates([])
      expect(window.socrates.prototype).toEqual(soc.prototype) 
```

现在，由于新的苏格拉底没有失败，我们知道至少 global.Socrates 正在通过。它使用 document 和 document.cookie，所以这些也没关系。为什么窗口未定义？

# visual-studio-2008 - app.config 使用 linq to sql 问题

> ID：13325213
> 
> 赞同：0
> 
> 时间：2012-11-10T19:12:09.480
> 
> 标签：visual-studio-2008, linq-to-sql, sql-server-2008-r2, c#-3.0, app-config

在 C# 2008 应用程序中，我使用 linq to SQL 连接到 SQL Server 2008 数据库。现在我想从 app.config 文件中获取数据库的连接，而不是将值硬编码到应用程序中。我希望能够更改与数据库的连接字符串，因为我将把这个应用程序从单元测试数据库移动到用户接受数据库再到生产数据库。

现在我收到错误消息““对象引用未设置为对象的实例。”我知道此错误消息来自我在下面列出的代码行，因为它是我更改的唯一代码行。

以下是 *.designer.cs 文件中的代码片段（这是 dbml 文件的一部分）。

```
using System.Configuration;

public esampleDataContext() : 
 base(ConfigurationManager.ConnectionStrings["sample.Properties.Settings.DEVConnectionString"].ConnectionString,mappingSource) 
```

**注意：`base(global::sample.Properties.Settings.Default.DEVConnectionString, mappingSource)`是我替换的由 .NET 框架生成的代码行

我想提以下几点：

1.  *.dbml 文件与特定项目文件相关联。
2.  此 *.dbml 文件的连接字符串设置如下：
    1.  DEVConnectionString（设置）
    2.  连接字符串=数据源=dev1；初始目录=DEV_test；集成安全=True
    3.  应用程序设置=真
    4.  设置属性名称是 DEVConnectionString。
3.  具有 *.dbml 文件的项目文件。具有对 system.configuration 的引用集。

**注意：此代码在我编写的类似应用程序中，但我不知道为什么它在这里不起作用。

因此，您能否告诉我，在代码中显示我，和/或指向我可以使用的参考，以便我可以在 app.config 文件中获取我想要使用的数据库连接字符串的值。我不想对数据库使用硬编码的连接字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:08:29.817

您试图从应用程序配置中的连接字符串部分而不是设置提供程序中获取值。只需在您的应用配置中添加“sample.Properties.Settings.DEVConnectionString”。

```
<configuration>
    <!-- ... -->
    <connectionStrings>
         <add name="sample.Properties.Settings.DEVConnectionString" connectionString="Data Source=dev1;Initial Catalog=DEV_test;Integrated Security=True"
    <connectionStrings>

    <!-- ... -->
</configuration> 
```

# arrays - vb.net 用数据集填充数组

> ID：13325215
> 
> 赞同：1
> 
> 时间：2012-11-10T19:12:14.430
> 
> 标签：arrays, vb.net, vba, dataset

我正在尝试使用从表中检索到的 DataSet 填充类数组

如果我直接从 DataSet 填充一个文本框，它工作得很好，但是数组的填充给了我这个异常，If `arry(i).ArrID`is an Integer

```
system.NullReferenceException 
```

这条线是这样的：

```
arry(i).ArrID = ds.Tables(0).Rows(i).Item(0) 
```

如果`arry(i).ArrID`是字符串，则异常读取

> 你调用的对象是空的。

我是 VB 的新手，希望能得到一些帮助，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:51:00.713

在 VBA 中，`Tables`对象的起始索引为`1`，因此如果您使用的索引为`0`，则您引用的表不存在，因此为空引用。您还应该更改 Item(0) 引用，并确保`i`永远不会设置为`0`. [[来源]](http://msdn.microsoft.com/en-us/library/aa241522%28v=vs.60%29.aspx)

# c# - 在无边界表单上绘制图形

> ID：13325218
> 
> 赞同：1
> 
> 时间：2012-11-10T19:12:21.710
> 
> 标签：c#, .net, graphics

C# 中的这种行为很奇怪。我有以下课程可以让我有效地在桌面上“绘图”：

```
class drawOnDesktop {
    public static Form dodF = new Form();
    public static Graphics formGraphics;

    public drawOnDesktop() {
        formGraphics = dodF.CreateGraphics();
        dodF.BackColor = Color.LightGreen;
        dodF.TransparencyKey = Color.LightGreen;
        dodF.Size = new Size(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
        dodF.Location = new Point(0,0);
        dodF.StartPosition = FormStartPosition.Manual;
        //dodF.FormBorderStyle = FormBorderStyle.None;
        dodF.WindowState = FormWindowState.Maximized;
        dodF.MinimizeBox = false;
        dodF.MaximizeBox = false;
        dodF.ControlBox = false;
        //dodF.TopMost = true;  //For development in case something goes wrong
        dodF.BringToFront();
        dodF.Show();
    }

    public static void drawCircle(Point location) {
        formGraphics.FillEllipse(Brushes.Black, location.X, location.Y, 10, 10);
    }       
} 
```

我这样称呼它，从我的主要形式：

```
drawOnDesktop dod = new drawOnDesktop();
drawOnDesktop.drawCircle(new Point(100,100)); 
```

如果您运行该代码，您会在屏幕的左上角看到一个黑色的小圆圈。问题是您可以看到表单的边框。现在，尝试注释掉该`FormBorderStyle`行。黑点会出现几分之一秒，然后消失。为什么！？如您所见，我在此表单上设置了*很多*属性，但它仍然无法正常工作。它是否被操作系统重新粉刷？

我不需要担心鼠标事件或类似的事情 - 放置在屏幕上的点完全是程序化的，而不是来自用户。同样，如果我设置`dodF.ShowInTaskbar = false`，整个程序都会崩溃。

如何修复此代码以使点出现并一直保留到 I `formGraphics.Clear(Color.Black)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:58:48.260

不要在周围保留图形的副本，那只是自找麻烦。正如其他人所说，您应该使用paint事件在屏幕上绘制：

```
class drawOnDesktop
{
    public Form dodF = new Form();
    List<Point> circles = new List<Point>();
    public drawOnDesktop()
    {

        dodF.BackColor = Color.LightGreen;
        dodF.TransparencyKey = Color.LightGreen;
        dodF.Size = new Size(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
        dodF.Location = new Point(0, 0);
        dodF.StartPosition = FormStartPosition.Manual;
        dodF.FormBorderStyle = FormBorderStyle.None;
        dodF.WindowState = FormWindowState.Maximized;
        dodF.MinimizeBox = false;
        dodF.MaximizeBox = false;
        dodF.ControlBox = false;
        dodF.TopMost = true;  //For development in case something goes wrong
        dodF.BringToFront();
        dodF.Paint += dodF_Paint;
        dodF.Show();
    }

    void dodF_Paint(object sender, PaintEventArgs e)
    {
        using (Graphics g = dodF.CreateGraphics())
        {
            foreach(Point location in circles)
                g.FillEllipse(Brushes.Black, location.X, location.Y, 10, 10);    
        }
    }

    public  void drawCircle(Point location)
    {
        circles.Add(location);
    }
} 
```

你可以用同样的方式调用它，但是现在每次重新绘制表单时，它都会重新绘制圆圈。

# ruby - 按特定值对 Ruby 数组进行分组

> ID：13325219
> 
> 赞同：10
> 
> 时间：2012-11-10T19:12:30.070
> 
> 标签：ruby, arrays

我有一个数组，我想只选择两个指定值之间的元素。

例如，我有一个如下所示的数组：

```
a = ["don't want", "don't want", "Start", "want", "want", "Stop", "don't want", "Start", "want", "Stop", "don't want"] 
```

我想在数组上调用一个方法，该数组捕获“开始”和“停止”之间的元素（包括“开始”和“停止”元素）。结果数组应如下所示：

```
[["Start", "want", "want", "Stop"], ["Start", "want", "Stop"]] 
```

我找不到这样的方法，所以我试着写一个：

```
class Array
  def group_by_start_and_stop(start = "Start", stop = "Stop")
    main_array = []
    sub_array = []

    group_this_element = false

    each do |e|
      group_this_element = true if e == start

      sub_array << e if group_this_element

      if group_this_element and e == stop
        main_array << sub_array
        sub_array = []
        group_this_element = false
      end
    end

    main_array
  end
end 
```

这行得通，但对我来说似乎不必要地冗长。所以我有两个问题：是否已经存在类似的方法？如果没有，有没有办法让我的 group_by_start_and_stop 方法更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T20:17:22.307

这是触发器有用的完美示例！

```
a.select {|i| true if (i=="Start")..(i=="Stop")}.slice_before("Start").to_a 
```

不是超级知名的功能，但仍然很酷！与 一起使用`slice_before`，您将得到您想要的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:51:51.913

```
a.inject [] do |m, e|
  if e == 'Start'
    @state = true
    m << []
  end
  m.last << e if @state
  @state = false if e == 'Stop'
  m
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T19:43:22.857

```
a.each_with_index.select{|s, i| s.eql?("Start") or s.eql?("Stop")}
                 .map{|s, i| i}
                 .each_slice(2)
                 .map{|s, f| a[s..f]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T20:35:33.093

```
a.join('^').scan(/Start.*?Stop/).map { |x| x.split('^') }
=> [["Start", "want", "want", "Stop"], ["Start", "want", "Stop"]] 
```

符号*^*似乎很少见，所以它可能不会与其他原始符号混合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T20:38:15.493

`:dummy`下面是为了确保返回的第一块`slice_before`是你不想要的。

```
p [pres = :dummy, *a].slice_before{|e|
  prev, pres = pres, e
  prev == "Stop" or pres == "Start"
}
.select.with_index{|_, i| i.odd?}
# => => [["Start", "want", "want", "Stop"], ["Start", "want", "Stop"]] 
```

# c# - XNA 单向缩放

> ID：13325220
> 
> 赞同：2
> 
> 时间：2012-11-10T19:12:34.150
> 
> 标签：c#, xna

我想知道是否可以仅在 x、y 或 z 等一个方向上缩放模型？我知道方法`Matrix.Scale(float);`，但这只是扩展了整个模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:20:38.083

有一些过载。只需使用其中一种[方法](http://msdn.microsoft.com/de-de/library/microsoft.xna.framework.matrix.createscale%28v=xnagamestudio.40%29.aspx)。例如

```
Matrix.CreateScale(1.0f, -1.0f,  1.0f); // Invert only one koordinate 
```

# android - android中的sqlite查询

> ID：13325227
> 
> 赞同：1
> 
> 时间：2012-11-10T19:13:30.333
> 
> 标签：android, database, sqlite

我有这个查询

```
public Cursor control(String a){
    return mDb.query(ProductsMetaData.C_TABLE, null,ProductsMetaData.A+ "=?" , new String[] {String.valueOf(a)},  null, null, null, null);
} 
```

它有效。现在我需要实现“AND”，因为我只想要行，`ProductsMetaData.A = a`但`ProductsMetaData.B = b`我正在做的事情不起作用。

```
public Cursor control(String a, String b){
    return mDb.query(ProductsMetaData.C_TABLE, null,ProductsMetaData.A+ "=?" + ProductsMetaData.B + "=?" , new String[] {String.valueOf(a), String.valueOf(b)},  null, null, null, null);
} 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:14:21.207

您只需添加`AND`关键字：

```
ProductsMetaData.A + "=? AND " + ProductsMetaData.B + "=?" 
```

您的参数`a`也`b`已经是字符串，因此您可以简单地使用：

```
new String[] {a, b} 
```

* * *

> 我能问你我怎样才能实现更新和删除吗？

删除很容易：

```
public int delete(String a, String b) {
    return mDb.delete(ProductsMetaData.C_TABLE, ProductsMetaData.A + "=? AND " + ProductsMetaData.B + "=?", new String[] {a, b});
} 
```

更新需要一个 ContentValues 对象：

```
public int update(String newA, String newB, String oldA, String oldB) {
    ContentValues values = new ContentValues();
    values.put(ProductsMetaData.A, newA);
    values.put(ProductsMetaData.B, newB);
    return mDb.update(ProductsMetaData.C_TABLE, values, ProductsMetaData.A + "=? AND " + ProductsMetaData.B + "=?", new String[] {oldA, oldB});
} 
```

最后一点，如果你发现自己使用`ProductsMetaData.A + "=? AND " + ProductsMetaData.B + "=?"`了很多次，你可以把它保存在一个`static final`变量中，就像`C_TABLE`,`A`和`B`:

```
private static final String WHERE_A_B = ProductsMetaData.A + "=? AND " + ProductsMetaData.B + "=?"; 
```

# php - 错误不会出现？

> ID：13325230
> 
> 赞同：0
> 
> 时间：2012-11-10T19:13:53.267
> 
> 标签：php, html, apache

> **可能重复：**
> [PHP 没有显示任何类型的错误](https://stackoverflow.com/questions/2648533/php-doesnt-show-any-kind-of-errors)

我不知道为什么，但是当我测试这段代码时：

```
<html>
<?php
header('Location: http://www.example.com/');
?> 
```

我没有收到任何我应该收到的错误，例如“标头已发送”。任何想法为什么错误不会出现？

我在 Windows 7 上使用 Apache 我有“error_reporting = E_ALL | E_STRICT”和“display_errors = On”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:18:32.497

输出缓冲可以自动开启。在这种情况下，您的情况不会向您报告错误。检查使用**[`ob_get_level`](http://php.net/manual/en/function.ob-get-level.php)**

```
<?php
    echo ob_get_level() //at the beginning of your script.
    ...
    ...
?> 
```

如果打开了`php.ini`指令**output_buffering**，您将获得 1 作为返回值。

# c - char* 究竟定义了什么？如果它定义了一个字符串数组，我如何输出单个元素？

> ID：13325234
> 
> 赞同：1
> 
> 时间：2012-11-10T19:14:14.610
> 
> 标签：c, arrays, string, pointers, output

```
int main()
{
int a = 0;
int BUFSIZE = 1000;
char *string1[20];
FILE *fp1 = fopen("input1.txt", "r");
if (fp1 == 0)
{
    fprintf(stderr, "Error while opening");
    return 0;
}
string1[a] = (char *)malloc(BUFSIZE);
while (fgets(string1[a], BUFSIZE, fp1)!=NULL)
{
    a++;
    string1[a] = (char *)malloc(BUFSIZE);
} 
printf("%c", string1[3]);
} 
```

嗨，我得到了上面的代码，它从文本文件中读取一个字符串并将其存储在一个数组中。现在我想输出数组string1的某个元素，但显然printf不起作用。此外， char *string1[20] 究竟定义了什么？它与指针有关吗？谢谢！</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T19:17:13.487

```
char *string1[20] 
```

声明一个名为 的数组，`string1`包含 20 个*指向`char`*. 因此`string1[3]`是指向 的指针`char`，而不是格式`char`所需的 , 。`%c`

由于`string1[3]`是 - 如果有的话 - 填充 via `fgets`，它包含一个以 0 结尾的字符串，因此您可以使用打印出来

```
printf("%s\n", string1[3]); 
```

如果你想打印一个字符，你会使用

```
printf("%c\n", string1[3][4]); 
```

例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:16:56.843

```
char* string1[20]; 
```

定义了一个指向`char`数组的指针，这不是你想要的。你想要一个`char`数组。

如果您在这样 `*`的声明中删除`string1`

```
char string1[20]; 
```

它应该工作。

编辑：Daniel Fisher 是对的……它是一个指向 char 的指针数组。
然而，尚不清楚您尝试做什么。
如果您只想将文件读入单个数组，您可以这样做：

```
int BUFSIZE = 1000;
char string[BUFSIZE];
FILE *fp1 = fopen("input1.txt", "r");
if ( fp1 == 0 )
{
    fprintf(stderr, "Error while opening");
    return 0;
}
fgets(string1, BUFSIZE, fp1);
printf("%s", string1); // print the whole file content
printf("%c", string1[3]); // print the fourth character 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:21:08.360

它与指针有关。

要打印在操作员处`string1`使用值的值`*`
基本上，string1 实际上并不包含它指向数据的任何内容。所以你不想要 string1[20] 的值，你想要它的值

```
 printf("%c", *string1[19]); 
```

应该做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T19:21:56.643

`char*`定义一个指向 char 的指针。

`char string[20]`定义一个 20 个字符的数组。

`char* string[5]`定义一个由 5 个 char* 组成的数组或指向 char 的指针。

例如，如果您有一个 char 数组，并且想将其用作以空字符结尾的字符串，则需要像这样获取第一个元素的地址：

```
char array[20];
char* pointer = &array[0]; 
```

所以在你的情况下，`char* string[20]`是一个 char 指针数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T19:22:46.707

`char *string[20];`是指向“char”的指针数组，可用于将字母存储为“字符串”数组。我写了“字符串”，因为 C 不像 C++ 那样具有字符串数据类型。

# php - 删除数组中小数点后两位以上的值

> ID：13325238
> 
> 赞同：0
> 
> 时间：2012-11-10T19:14:30.737
> 
> 标签：php, multidimensional-array

我有一个包含大量值的数组。

```
$value = array(
              array(3075,15,461.25,16,535.05),
              array(3075,15,461.25808,16,535.05),//to be removed
              array(3075,15,461.2,16,535.05234)//to be removed
              ); 
```

我需要删除具有超过 2 位小数的值的行。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:18:32.933

您可以使用`strlen(substr(strrchr($x, "."), 1))`来计算小数并`array_filter`删除任何超过 2 个小数的数组值

```
$value = array(
        array(3075,15,461.25,16,535.05),
        array(3075,15,461.25808,16,535.05),//to be removed
        array(3075,15,461.2,16,535.05234)//to be removed
);

$value = array_filter($value,
    function ($v) {
        foreach ($v as $x) {
            if (strlen(substr(strrchr($x, "."), 1)) > 2)
                return false;
        }
        return true;
    });

var_dump($value); 
```

输出

```
array (size=1)
  0 => 
    array (size=5)
      0 => int 3075
      1 => int 15
      2 => float 461.25
      3 => int 16
      4 => float 535.05 
```

# jquery - 根据一天中的时间更改消息？

> ID：13325248
> 
> 赞同：1
> 
> 时间：2012-11-10T19:16:00.957
> 
> 标签：jquery

我正在尝试根据一天中的时间更改消息。

我已将我在 ST2 中查看的内容粘贴到[JSFiddle](http://jsfiddle.net/MichaelT/EVCMm/)

这里是：

```
<div class="container">
    <div id="time">
        <p id="time">Good morning.</p>
    </div>

<div>
    <p>I used to work in the marketing industry.<br>Now I'm a Web Designer and Developer.<br> I like to keep things simple.</p>
</div>​ 
```

查询：

```
<script type="text/javascript">
 $(document).ready(function()
    {
      var now = new Date();
      var hours = now.getHours();
      var msg;
      if(hours<12)
           msg = "Good Morning";
      else if(hours<18)
           msg = "Good Afternoon";
      else
          msg = "Good Evening";
      return(msg);
    });
});
</script>​ 
```

当谈到 jquery 时，我是一个完全的菜鸟，所以要温柔。

HTML：

```
<!DOCTYPE html>
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

  <script type="text/javascript">
      $(document).ready(function() {
      var now = new Date();
      var hours = now.getHours();
      var msg;
      if (hours < 12) msg = "Good Morning";
      else if (hours < 18) msg = "Good Afternoon";
      else msg = "Good Evening";
      $('#time p').text(msg);
    });
});
</script>

</head>

<body>

<div class="container">
    <div id="time">
        <p>Good morning.</p>
    </div>

<div>
    <p>I used to work in the marketing industry.<br>Now I'm a Web Designer and Developer.<br> I like to keep things simple.</p>
</div>​
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:25:15.797

只需更改`return msg`为`$('#time p').text(msg);`

演示：http: [//jsfiddle.net/EVCMm/10/](http://jsfiddle.net/EVCMm/10/)

这使用jQuery`text()`方法来替换文本中寻找`p`标签`ID=time`

API 参考： [http ://api.jquery.com/text/](http://api.jquery.com/text/)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-10T19:21:34.510

```
$('#time').html('<p>'+msg+'</p>'); 
```

# css - 媒体查询中的最小宽度如何计算？

> ID：13325250
> 
> 赞同：0
> 
> 时间：2012-11-10T19:16:19.457
> 
> 标签：css, responsive-design

我在用着

```
@media only screen and (min-width:320px) and (max-width:480px) {

    #hello { background:red;}

} 
```

和

```
@media only screen and (min-width:481px) and (max-width:600px) {

    #hello { background:green;}

} 
```

我使用[http://mattkersley.com/responsive/](http://mattkersley.com/responsive/)来测试我的网站，当我检查 320x480 时，媒体查询不起作用。

有任何想法吗？

我也在使用这个[http://codebomber.com/jquery/resizer/](http://codebomber.com/jquery/resizer/)并遇到同样的问题。

min-width:320px 意味着视口必须至少为 320px 或更宽，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:56:42.100

我觉得很好。

这是在 CodePen 上重新创建的 - [http://codepen.io/justincavery/full/lbtBk](http://codepen.io/justincavery/full/lbtBk)

```
body {
  background-color: #fff;}
/* Style the body where there is no media queries available */    
@media (min-width:320px) and (max-width:480px){
  body {background-color: red;}
/* Style the body if the viewport is at least 320px or at most 480px */
}
@media (min-width:481px) and (max-width:600px){
  body {background-color: green;} 
/* Style the body if the viewport is at least 481px or at most 600px */
}
@media (min-width:601px){
  body {background-color: pink;} 
/* Style the body if the viewport is at least 601px */
} 
```

# .net - gcnew 对 marshal_context 是可选的吗？

> ID：13325255
> 
> 赞同：7
> 
> 时间：2012-11-10T19:16:57.387
> 
> 标签：.net, memory-management, c++-cli, marshalling

我正在为 ANSI C 库开发 .NET 包装器。C .h 看起来像这样：

```
EXTERNC void foo_init(void);

EXTERNC char* foo_string_magic(const char *str);

EXTERNC void foo_cleanup(void); 
```

我的 C++/CLI 包装器如下所示：

```
public ref class FooWrapper abstract sealed
{
    private:    

        /// <summary>
        /// Provides an RAII context for native types lacking a destructor.
        /// </summary>
        static marshal_context ^_Context;    

        /// <summary>
        /// Marshals .NET String to native const char*. 
        /// </summary>
        static const char* _MarshalString(String ^str)
        {               
            return _Context->marshal_as<const char*>(str);
        }    

    public:    

        /// <summary>
        /// Initializes foo.
        /// </summary>
        static void Initialize()
        {
            _Context = gcnew marshal_context();             

            foo_init();
        }    

        /// <summary>
        /// This function should be called once you're done with using foo.
        /// </summary>
        static void Cleanup()
        {
            foo_cleanup();

            // uncommenting this line throws heap corruption error
            // delete _Context;
        }    

        /// <summary>
        /// Foo's magic!
        /// </summary>
        static String^ StringMagic(String ^str)
        {
            char *fooString = _MarshalString(str);

            return gcnew String(foo_string_magic(fooString));
        }
} 
```

我对在 marshal_context 中正确使用 gcnew 感到困惑。 [MSDN](http://msdn.microsoft.com/en-us/library/bb384856.aspx)使用gcnew来实例化marshal_context，而网上很多例子根本没有实例化marshal_context。

我的问题是：

1.  对 marshal_context 使用 gcnew 是可选的吗？如果是这样，为什么？
2.  我的包装器被 C# 应用程序使用，该应用程序在调用 Cleanup() 时会引发堆损坏错误。为什么？

# java - infinispan：集群实例不共享缓存

> ID：13325275
> 
> 赞同：1
> 
> 时间：2012-11-10T19:20:00.977
> 
> 标签：java, caching, cluster-computing, infinispan

我花了 2 多天的时间什么都没做，只是试图让 Infinispan 在集群环境中工作，但它不起作用。我不想运行单独的 infinispan 服务器，我只想将它嵌入到在集群 Glassfish 上运行的应用程序中。那不可能吗？我有一个示例 JSF 应用程序，您可以在其中将值加载到应该位于缓存中的地图中。我拉起一个集群实例，添加值，它们就会显示出来。但是当我转到另一个集群实例时，它显示地图为空。

我知道我做错了什么，我只是不知道是什么。一直在搜索互联网，没有关于如何让它工作的全面教程。

配置（从据称显示集群[http://www.mastertheboss.com/infinispan/infinispan-tutorial-part-2/page-2](http://www.mastertheboss.com/infinispan/infinispan-tutorial-part-2/page-2)的教程中复制）：

```
<infinispan>

    <global>
      <transport clusterName="demoCluster"/>
      <globalJmxStatistics enabled="true"/>
   </global>

   <default>
      <jmxStatistics enabled="true"/>
      <clustering mode="distribution">
         <hash numOwners="2" rehashRpcTimeout="120000"/>
         <sync/>
      </clustering>
   </default>

</infinispan> 
```

上下文监听器：

```
package hazelcache.test;

import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;
import org.infinispan.manager.DefaultCacheManager;
import org.infinispan.manager.EmbeddedCacheManager;

@WebListener()
public class Listener implements ServletContextListener
{
    EmbeddedCacheManager manager;

    @Override
    public void contextInitialized(ServletContextEvent sce)
    {
        try
        {
            manager = new DefaultCacheManager("config.xml");
            manager.start();
            sce.getServletContext().setAttribute("cacheManager", manager);
        }
        catch (IOException ex)
        {
            Logger.getLogger(Listener.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce)
    {
        manager.stop();
    }
} 
```

豆：

```
package hazelcache.test;

import java.io.IOException;
import java.util.LinkedList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;
import javax.servlet.ServletContext;
import org.infinispan.configuration.global.GlobalConfigurationBuilder;
import org.infinispan.manager.DefaultCacheManager;
import org.infinispan.manager.EmbeddedCacheManager;

@ManagedBean(name="clusterTest")
public class ClusteredCacheBean extends CacheTestBean
{
    EmbeddedCacheManager manager;

    public ClusteredCacheBean() throws IOException
    {
        System.out.println("Before setStuffz()");

        manager = (EmbeddedCacheManager) ((ServletContext)FacesContext.getCurrentInstance().
                getExternalContext().getContext()).getAttribute("cacheManager");

        setStuffz(manager.getCache("stuffz"));
        System.out.println("After setStuffz()");

    }// end ClusteredCacheBean()

    private static EmbeddedCacheManager createCacheManagerProgramatically() {
        return new DefaultCacheManager(GlobalConfigurationBuilder.defaultClusteredBuilder().build());
     }

    @Override
    public String addToCache()
    {
        String forwardTo = null;

        manager.getCache("stuffz").put(getId(), getName());

        return forwardTo;

    }// end addToCache()

    @Override
    public List getStuffzList()
    {
        System.out.println("Stuffz: " + getStuffz().size());
        return new LinkedList(manager.getCache("stuffz").entrySet());
    }
}// end class ClusteredCacheBean 
```

我现在真的不知道该怎么办...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:33:10.507

另一个论坛上的一个好人帮我弄清楚了：

1）设置这个jvm选项：-Djava.net.preferIPv4Stack=true

```
asadmin> create-jvm-options --target ClusterName -Djava.net.preferIPv4Stack=true 
```

2）在侦听器中调用 getCache 一次只是为了在事物启动时创建缓存：

```
setStuffz(manager.getCache("stuffz")); 
```

3）将命名空间放在配置文件中：

```
<infinispan
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="urn:infinispan:config:5.1 http://docs.jboss.org/infinispan/schemas/infinispan-config-5.1.xsd"
      xmlns="urn:infinispan:config:5.1"> 
```

**谢谢来自 jBoss 论坛 (https://community.jboss.org/community/infinispan) 的 Tristan！**

# javascript - 为什么这个 async.js 系列不同步运行

> ID：13325280
> 
> 赞同：0
> 
> 时间：2012-11-10T19:20:40.323
> 
> 标签：javascript, asynchronous

我正在尝试使用 async.js 来管理应用程序中的回调。下面是该代码的示例。但是，我遇到了一个问题，即一系列函数在前面的函数之一完成之前继续执行。例如，当 saveImageData() 触发时，resizeImage() 函数仍在工作。但我的意图是仅在调整大小后保存图像。async.js 不应该处理这个吗？如果我必须将回调传递给 resizeImage() 使用 async.js 的价值是什么？有人可以在我给出的示例中展示使用异步库如何有帮助吗？

```
 if (req.files) {

        //removed some code not relevant to the question

        async.series([

            function (callback) {
                model.saveImageData(tempPath, originalImage, s3Headers);

                callback(null);
            },

            function (callback) {

                var src = tempPath;
                dst = path.dirname(tempPath) + "\\" + newImage;
                model.resizeImage(src, dst);

                callback(null);
            },

            function (callback) {
                //the next function gets called before resizeImage() finishes executing
                model.saveImageData(dst, newImage, s3Headers);

                callback(null);
            }
        ]);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:28:36.147

最有可能`saveImageData`是`resizeImage`非阻塞的异步调用。鉴于他们正在进行 I/O。

因此，您调用`resizeImage`，它开始处理，在等待 IO 时返回控制权，并且您的代码立即调用 async.js 回调，表明该函数已完成工作。

`saveImageData`相反，您应该只在 after和complete调用异步回调参数`resizeImage`，这意味着创建和使用回调函数：

```
// this is just a guess at the api.
async.series[function(callback) {

  model.resizeImage(src,dst,function() {
       callback(null);
  });

}]; 
```

您仍然必须确保每个异步函数中的代码在适当的时间调用回调。

# android - 从下载文件夹中选择文件-> 通过蓝牙发送

> ID：13325282
> 
> 赞同：0
> 
> 时间：2012-11-10T19:21:05.267
> 
> 标签：android, file, button, bluetooth

我有一个问题，我分为两个主要部分。

1) 点击按钮弹出下载文件夹。从下载文件夹中选择一个文件。

2) 获取您刚刚选择的文件。通过蓝牙将其发送到配对设备。

鉴于此处的资源和示例，我相信蓝牙部分不会那么糟糕。

但是＃1我无法弄清楚如何解决（对android来说有点新）。是否有任何好的教程/文档/链接可用于访问下载文件夹、选择文件然后使用该文件以供以后用于文件传输/等之类的事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:17:54.563

android上的文件选择 -

[http://code.google.com/p/android-file-dialog/](http://code.google.com/p/android-file-dialog/)

[如何使用意图选择文件浏览器来选择文件](https://stackoverflow.com/questions/9923760/how-to-use-intent-for-choosing-file-browser-to-select-file)

无论您使用哪种方法，都需要取回文件路径。然后，您将在问题的下一部分使用该路径，即如何通过蓝牙发送文件

[蓝牙文件传输](https://stackoverflow.com/questions/6326716/bluetooth-file-transfer)

[如何通过代码通过蓝牙将文件从Android设备发送到其他设备](https://stackoverflow.com/questions/6227498/how-to-send-file-from-android-device-to-other-device-through-bluetooth-by-code)

在你问之前总是做研究——如果你这样做，你会得到更多的赞成票和更好的答案

# android - 使用 Facebook SDK 下载并显示图片

> ID：13325283
> 
> 赞同：0
> 
> 时间：2012-11-10T19:21:05.777
> 
> 标签：android, facebook-graph-api

我正在使用此代码使用 Android Facebook SDK 从 Facebook 下载个人资料图片 (https://graph.facebook.com/19292868552/picture)：

```
asyncFacebookRunner.request("19292868552" + "/picture", new BaseRequestListener() {

    @Override
    public void onComplete(String response, Object state) {
        System.out.println(response);
        byte[] imageBytes = response.getBytes();
        Bitmap bitmap = BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length);
        System.out.println(bitmap);
    }

    @Override
    public void onException(Exception ex) {

    }
}); 
```

问题是，它`bitmap`是空的。这是日志：

```
11-10 20:15:56.540: I/System.out(20930): ������JFIF����������������;CREATOR: gd-jpeg v1.0 (using IJG JPEG v80), quality = 95����C��             ����C������2��2"��������������������������  �����������}��!1AQa"q2���#B��R��$3br�   %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz�������������������������������������������������������������������������������������������    ���������w��!1AQaq"2�B����  #3R�br�$4�%�&amp;'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz��������������������������������������������������������������������������������?������{���(�B�K#UQ�$��޾l�?�^�/��τV�x�TL�j�X�}A����!��_�u�����f���ɨxW����A9�O����&`É�c��$���G��O���G����=�7;b'���8�F�OZ��xS�������Q�u����Yy�3�f�=GF���_�c뿊�V�3�~�{��7>6���H-"�%�������7�#��1S�e���kS���ߦ]���m�J�O�۴� T0�rJ�V��MX�?g���I�_c��λg����jJ$Dtr�mmFK����`�N�+̾.��_���ioK�/�����e�����y$y��|���9���?P�V�&lt;=v��[z+uQ�C��zШ��{�^���/�*���H��woc>��[׋LM��F�bu$��P����Gב][M#���Ċ� S�p}8#�������.?fOY�y��_��Ki&����,v�:23q��`1�O85�����������NxSO�_�]F8����z�w31��[��Edl�ʱ�|�k��NUprQ�cv��ڻ~���S��g��ɷ��'o�W���=��QFW��������~���}������,��Uԫ���$�'�5�ľ�.���S3Aye;G$g)є��k��s�w���v�O��?�tԫ���t^c��_��oG�1�?�_����Z��~��G����]G��V��Wx��/�_0��P��O"67���$�_{>Z��^r>���i�&gt;�"�&gt;�t+I%�d���J��˕y$?<�;�B�W���$��=4��?�Y�������4߉��x[�M݆��M�Q��[<�   A�7d��^�,e9�o���h��)RN�yw������������+�;"����h�'�4M7���^��� ��1�!`��P�G���ƖD�о��v��K?��5�I���������_��.�.����fQ��R���$�bc���v.���$�{~Ǻq�㧁�+�|g�����yeW6�q�$��$���վ���,e:Q]V��^���D�ޯ�ڊ8��h�ď�������.G�����7A�~j�چ��t���0��;��đN�f��F��0�ߞ+��9����9�&lt;���9�[��qab����p�8��8����_�,���)YP�+¿m��y�����Ho��Y��۷�y������r�ڤ��6�ܭ�_a��^#N�����+�[}�߿K�&gt;3*�^n�&gt;7��Ƙ��_O�i���_u����h���㧅,��1j�^9�H�յĳ�ƞ�7v�$��%�@@Q��2p0{?�+G��?���&amp;��~��-j][7"ԣO��3[�w_1�2�#)�{h��!�����&gt;1|E����o��rt_kZN��j�jb�%��H���$��s�Fp9�����s\��I4��֭'�v�եe��>s��zPK�R����+�U�wt�OW���+1s!���8��ز��������������<[�O�I���4M7V��Y�(H��G*Ɉ��v������_�~)����Gč3⿍�%g{�i_f��O0[)r䪟�>O��Gb+����,b�ª����+��u\GO����Ԥ����
11-10 20:15:56.540: D/skia(20930): --- SkImageDecoder::Factory returned null
11-10 20:15:56.540: I/System.out(20930): null 
```

我怎样才能得到一个位图显示在一个`ImageView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:48:38.973

一切对我来说都是正确的，你也得到了打印显示的输入。[我在这里](https://stackoverflow.com/a/5841825/969325)找到了另一个用户图片示例。该示例使用 Url 和 inputstream 而不是字节数组，也许这对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T21:00:13.450

使用新的 Facebook SDK 不会再出现这个问题。

# javascript - 如何加载放大的谷歌地球地图而不是从太空开始？

> ID：13325285
> 
> 赞同：4
> 
> 时间：2012-11-10T19:21:11.307
> 
> 标签：javascript, geospatial, google-earth-plugin

从我的网站加载 Google Earth API 时，我有一个设置视图开始，但它从空间开始，然后放大，而不是从这个放大的视图开始。这对观众来说很奇怪，特别是因为我的观点是从北向南看，所以地球在进入的过程中旋转：http: [//www.colorado.edu/geography/cartpro/cartography2/fall2011/bartel/projects/ project3_tungurahua/tungurahua_hazards.html](http://www.colorado.edu/geography/cartpro/cartography2/fall2011/bartel/projects/project3_tungurahua/tungurahua_hazards.html)

地图加载到 iframe 中。我也想在不更改缩放视图的情况下在各种 kmls 之间切换，但我会单独发布这个问题。我环顾四周寻找答案，但没有找到任何具体的信息——如果我错过了关于这个的帖子，我很乐意检查一下是否有人能指出我正确的方向。

这是代码：

```
 var ge;
google.load("earth", "1");

function init() {
   google.earth.createInstance('map3d', initCB, failureCB);
}

function initCB(instance) {
   ge = instance;
   ge.getWindow().setVisibility(true);
   // set navigation controls
   ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);
   // to fetch a  KML file and show it
function finished(object) {
  if (!object) {
    // wrap alerts in API callbacks and event handlers
    // in a setTimeout to prevent deadlock in some browsers
    setTimeout(function() {
      alert('Bad or null KML.');
    }, 0);
    return;
  }
  ge.getFeatures().appendChild(object);
  var la = ge.createLookAt('');
  la.set(-1.251336, -78.443817, 7000, ge.ALTITUDE_RELATIVE_TO_GROUND, 
         177, 65, 500);
  ge.getView().setAbstractView(la);         
}

//var marker = new GMarker(new GLatLng(-1.402002,-78.409471)); // latitude, longitude 
//   map.addOverlay(marker); 

function failureCB(errorCode) {
}

google.setOnLoadCallback(init); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:34:21.243

您可以在加载抽象视图之前将[飞行速度设置为](https://developers.google.com/earth/documentation/camera_control#flytospeed)。`SPEED_TELEPORT`

此设置将使地球仪瞬间飞到所需位置，而不是“俯冲”。如果应该恢复正常运动，那么在您获得初始视图后，您可以将速度设置回默认设置。

例如，以下功能可用于瞬间飞到所需位置。该方法接受任何[KmlAbstractView](https://developers.google.com/earth/documentation/reference/interface_kml_abstract_view)，即[KmlCamera](https://developers.google.com/earth/documentation/reference/interface_kml_camera)或[KmlLookAt](https://developers.google.com/earth/documentation/reference/interface_kml_look_at)作为其单个参数。

```
// fly-to a view using SPEED_TELEPORT
function teleport(abstractView) {
  var oldSpeed = ge.getOptions().getFlyToSpeed(); .
  ge.getOptions().setFlyToSpeed(ge.SPEED_TELEPORT); 
  ge.getView().setAbstractView(abstractView);  // Wooosh!
  ge.getOptions().setFlyToSpeed(oldSpeed); 
} 
```

除此之外，为了确保初始位置根本不显示过渡，您可以在将`GEWindow`可见性设置为 True 之前使传送移动。例如。

```
function initCB(instance) {
   ge = instance;
   var la = ge.createLookAt('');
   la.set(-1.251336, -78.443817, 7000, ge.ALTITUDE_RELATIVE_TO_GROUND, 177, 65, 500);
   teleport(la); // set the position
   ge.getWindow().setVisibility(true); // now display the window
   //etc.. 
```

# java - 很难找到具有很多功能的 Java mp3 播放器（api）

> ID：13325303
> 
> 赞同：2
> 
> 时间：2012-11-10T19:23:33.370
> 
> 标签：java, api, mp3, media-player

我一直在寻找不同的 API（最近我使用了 JLayer），但我似乎找不到一个功能与我正在寻找的一样多的 API。

我有一个任务是制作一个播放 MP3 文件的媒体播放器（建议我们使用一些 api）。我知道如何做 GUI，将文件存储到播放列表中，以及其他事情。我需要帮助的是演奏音乐部分。

我不知道是否有满足我所有需求的 API，但这是我的清单。需要能够：

*   播放 mp3 文件
*   暂停并重新开始
*   可以设置音量
*   能够跳到歌曲中的某个地方
*   要是有歌曲的长度就好了

我认为这基本上是我希望在 API 中看到的东西的清单，我只是很难找到一个。

任何建议都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:27:07.633

gstreamer - [http://code.google.com/p/gstreamer-java/](http://code.google.com/p/gstreamer-java/)应该可以帮助您。

# c++ - 函数签名：C++ 模板完整指南

> ID：13325311
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:24:58.810
> 
> 标签：c++, templates

我正在阅读“模板强制指南”一书，第**12.2.1 节签名**我无法理解作者的一句话：

> 它的返回类型，如果函数是从函数模板生成的

作者所说的“函数模板生成的函数”是什么意思？，他在这里谈论模板ID吗？如果是这样，为什么返回类型在这种情况下很重要，因为签名是由我们定义的？

一个简单的例子会很有帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:42:55.837

在 12.2.1 节中，作者描述了在哪些情况下函数声明可以共存。函数模板的声明可以共存，即使它们具有不同的返回类型，例如，您可以声明：

```
template <typename T> int  f();
tepmlate <typename T> char f(); 
```

如果你将这些函数设为非模板，你甚至不能声明它们。当然，在上面的表格中，您将无法调用该函数，尽管您可以使用强制转换显式选择其中一个函数（我不确定）。

具有不同返回类型的函数共存的主要用途（尽管这不是最初的意图），是根据条件从重载集中删除其中一些函数，例如：

```
template <typename T>
typename std::enable_if<std::numeric_limits<T>::is_specialized, T>::type
f(T); // used for types for which std::numeric_limits<T> is specialied

template <typename T>
typename std::enable_if<!std::numeric_limits<T>::is_specialized, T>::type
f(T); // used for types for which std::numeric_limits<T> is not specialied 
```

# ios - 将滚轮旋转到特定点

> ID：13325316
> 
> 赞同：0
> 
> 时间：2012-11-10T19:25:32.523
> 
> 标签：ios, rotation, transform

在这个轮子中，我们有 6 件。轮子的顶部是特定点。具体点给出了碎片的信息。现在它给出了蓝色部分的信息。因此，如果我单击其中一个，例如紫色，我需要该紫色块到达特定点并自动进入有关紫色块的给定信息。

![车轮](../Images/ffe5961f95ae38e2a022fc1b820a429d.png)

```
 CGFloat topPositionAngle = radiansToDegrees(atan2(view.transform.a, view.transform.b)); 
```

1.  -180 - 粉红色
2.  -120 - 蓝色
3.  -60 - 橙色
4.  0 - 紫色
5.  60 - 黄色
6.  120 - 绿色

现在 topPositionAngle 显示 -120 = 蓝色，当紫色到达特定点时它显示 0。

```
 UITouch *touch = [touches anyObject];
    CGPoint currentTouchPoint = [touch locationInView:view];
    CGFloat currentAngle = radiansToDegrees(atan2(currentTouchPoint.x, currentTouchPoint.y));

    CGFloat angleTransform = ???
    CGAffineTransform current = view.transform;
    [UIView animateWithDuration:0.2f animations:^{
        [view setTransform:CGAffineTransformRotate(current, angleTransform)];
    }]; 
```

我们如何才能自动旋转到特定点？就像*Dansk Bank*应用程序（请参阅以下 youtube 链接）与 0:21 - 0:25 分钟的视频类似。

[http://www.youtube.com/watch?v=hulBh_KNGjE](http://www.youtube.com/watch?v=hulBh_KNGjE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:53:46.170

```
float fromAngle = atan2(m_locationBegan.y-img.center.y, m_locationBegan.x-img.center.x);
float toAngle = atan2(_location.y-imgDigits.center.y, _location.x-img.center.x);
float newAngle = wrapd(m_currentAngle + (toAngle - fromAngle), 0, 2*3.14);
angle = newAngle;

CGAffineTransform transform = CGAffineTransformMakeRotation(newAngle);
img.transform = transform; 
```

使用这样的东西。希望这有帮助你应该知道接触点和你的具体点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:11:44.290

你需要知道的触摸点角度：

```
CGFloat touchedPointAngle = atan2f(touchPoint.y - centerSuper.y, touchPoint.x - centerSuper.x) + M_PI;

if ((touchedPointAngle < sliceInRadians) && (touchedPointAngle > 0)) {
        angleTransform = sliceInRadians;
} else if ... 
```

然后你就可以变形了。

# actionscript-3 - JWPlayer：试图将视频播放器绑定在我自己的容器中

> ID：13325318
> 
> 赞同：7
> 
> 时间：2012-11-10T19:25:59.583
> 
> 标签：actionscript-3, flash, actionscript, jwplayer

我正在使用 6.0.2813 (http://developer.longtailvideo.com/trac/) 的 JWPlayer 源代码，而且似乎即使我有一个影片剪辑并且我在小时候添加了 jwplayer 类，但 jwplayer 将自己创建为主舞台的一个孩子，因此允许它扩展到舞台的边界，而不是我的 flash 中的电影剪辑（我想成为一个可调整大小/可拖动的容器）。

我向论坛寻求帮助，但他们说他们从来没有这样打算，也没有太大帮助。我希望熟悉源代码的人能指出我正确的方向。

如何让 JWPlayer 包含在影片剪辑中？

编辑：

我取得了一点进展。

我在 com/longtailvideo/jwplayer/utils/RootReference.as 中找到了 RootReference 类

```
 public function RootReference(displayObj:DisplayObject) {
            if (!RootReference.root) {
                RootReference.root = displayObj.root;
                RootReference.stage = displayObj.stage;
                try {
                    Security.allowDomain("*");
                } catch(e:Error) {
                    // This may not work in the AIR testing suite
                }
            }
        } 
```

并注意到 RootReference.stage 是作为孩子添加的地方。`RootReference.stage = displayObj.stage;`播放器类对象作为 displayObj 发送的地方我将其更改为`RootReference.stage = MovieClip(root).gui.video_container;`

然后在整个代码中使用`RootReference.stage.stageHeight`and `RootReference.stage.stageWidth`，所以我将它切换到`RootReference.stage.height`and `RootReference.stage.width`。这让它可以编译，现在视频在容器内，但视频的左上角在我的 video_container 的中心，并且视频的大小没有调整到我的容器的大小，而是视频的大小。控制也完全混乱。

但我能够调整视频大小和移动视频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:14:07.697

我将解决您问题的***jwPlayer***部分，因为 flash 不是我的强项。

这里的问题是[***jwPlayer***](http://www.longtailvideo.com/jw-player/about/)不是一个简单的 Flash 播放器，也是一个**HTML5 多媒体播放器**。

* * *

***解决方案 1：嵌入*Flash 对象中的SWFObject**

由于***jwPlayer***已经与[**SWFObject**](http://code.google.com/p/swfobject/)兼容，因此使用它（即 swfobject.js）作为***中介***将`player.swf`文件（***也称为 jwPlayer***）加载到您的 flash 阶段。可以肯定的是，***SWFObject***充当容器，将成为您舞台中的“*有界项”，而不是直接使用****jwPlayer***。

这是一个在线演示，说明了此解决方案，***但***它使用的是一个简单的 Flash 视频播放器。

[**带有嵌入式 SWFObject 徽标的 Flash 网站 播放音乐视频**](http://www.rockonflash.com)
[**Flash 网站 关于 swfObject 的文档**](http://www.rockonflash.com/demos/RockOnFlashLogoDemo/asdoc/RockOnFlashLogo/com/rockonflash/papervision3d/utils/SWFObject.html)

请注意，该 Flash 网站的[**HTML 源页面将**](http://pastebin.com/Y8M1FpRs)[**RockOnFlashLogo.swf**](http://www.rockonflash.com/RockOnFlashLogo.swf)显示为在浏览器**整个**视口中显示的文件。[**更深入地**](http://bruce-lab.blogspot.co.il/2010/08/freeswfdecompilers.html)看，它是用**AS3**编写的。

与***jwPlayer v4***不同，由于其安全性松懈，许多想法在[**互联网**](https://www.google.com/search?q=jwPlayer+4.0+embedded+into+flash+site)上浮出水面将该版本嵌入到 flash 网站中，我认为您会遇到当前***jwPlayer***许可证检查、网页就绪事件侦听器和流行插件集成的问题......提及流媒体视频内容可能出现的问题。

恕我直言，较新的***jwPlayer*** API 和 Player 旨在通过***网页安装***使用。

* * *

***解决方案 2：在*Flash 对象之上的SWFObject**

此方法处理***jwPlayer***的用途；作为网页安装。我的动力来自这个[**Google Chrome 实验的在线演示 | 荒野市中心**](http://www.thewildernessdowntown.com/)。

该演示将策略性同步的浏览器窗口置于主浏览器窗口的顶部。尽管主浏览器窗口负责，***但所有窗口都构成了整个体验***。同样的方法，*但闪现风格*，可以在您当前的项目中完成，并获得出色的结果。

您的 Flash 对象负责并**包含在**为 jwPlayer***网页组件***分配的交互式[***框架***](https://www.google.com/search?site=imghp&tbm=isch&q=picture+frame)内。可以肯定的是，***jwPlayer***的这个交互式**框架**可以接受**重定位**（*例如，通过拖动框架边缘*）和**调整大小**（*例如，框架具有**[**resize-icon bottom-right**](https://www.google.com/search?site=imghp&tbm=isch&q=corner+window+resize)* ），然后通过**SWFObject**标准嵌入中继到网页组件（*即*）技术（*即**用 设置的****位置****和****大小***）。**********[](https://www.google.com/search?site=imghp&tbm=isch&q=corner+window+resize)****`player.swf`********`jQuery`******************

 ********这是三层项目的网页的基本***横截面：***

![在此处输入图像描述](../Images/bafac5b35c164c6c9780009aa334bb2a.png)

**黑色**层是`HTML`网页的。红色层是您的 Flash 对象，其中还包含以**aqua****显示**的内置交互式框架。**绿色**的顶层是jwPlayer**文件**的**SWFObject 。** ********`player.swf`********

 *********这是从 jwPlayer 到您的 flash 对象的工作方式：***

***1.****网页**jwPlayer API**有**事件监听**器激活并且可以接受JavaScript。*
***2.****然后**jwPlayer API**从播放器接收“播放”状态，**更新**播放器事件状态。*
***3.Player*** *Event Status 为**真**，因此**触发**条件`if`语句。*
***4.****然后该`if`语句将**JavaScript 传输**到您的 flash 对象，表明播放模式为**真。***
***5.****你的 flash 对象**接收到这个****play**事件的 JavaScript ，并使舞台**变暗，****少**水色框架。*

***以下是从 flash 对象到 jwPlayer 的工作方式：***

***1.****水色**相框**移动到舞台左侧时有用户**交互。***
***2.****您的**AS3**代码相应地移动水色**框架**，同时**发送**该位置的 JavaScript。*
***3.****网页**接收**JavaScript并调用函数将jwPlayer播放器定位到**新**位置。*

***提示：****如果使用自定义**jwPlayer 皮肤**，请将该**皮肤主题**合并到您的 flash 对象中以获得**统一**的外观。*

这种情况的好处是**jwPlayer**保持***100% 的完整性***，而这两个 Flash 对象在您的网页上**协同工作。**没有黑客攻击，没有破损，没有不可预见的后果，也没有令人头疼的问题……这是标准的**jwPlayer API**和**AS3**标记在使用中。

将鼠标悬停在**jwPlayer**本身是**100% jwPlayer**，同时间接**绑定**到您的 flash 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T06:03:18.637

根据您的书面评论，*JW Player*将无权访问`JavaScript`并将使用`Firefox Source`它是专门的`3D Game/Chat Engine` *，无法*访问`DOM`播放器之外的任何元素，最好的解决方案是使用*JW Player Enterprise Edition*。

该解决方案将使您与*营销和工程*部门取得联系，该部门可以提供交钥匙解决方案，将 JW Player*集成*到您自己的产品中。

*单击下面的图片，*其中还包含*许可*信息： [![在此处输入图像描述](../Images/50abc2dbeb1e73a96604ca12719d5cd0.png)](http://www.longtailvideo.com/jw-player/pricing/ "点击这里访问页面。")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T15:14:36.087

假设我的测试场景代表了您的用例，我想我设法解决了问题。

该方法的要点是用您控制的假舞台对象替换`RootReference.root`和。`RootReference.stage`因为大多数 jwPlayer 类都引用这些静态变量而不是它们自己的变量`root`和`stage`变量，所以这似乎在大多数情况下都有效。最终成为最复杂的问题是使用`Stage.stageVideo`对象，我认为这是硬件加速的视频对象。这些总是附加到`stage`，因此与假舞台对象不兼容。这些的主要问题是定位，~~我基本上已经解决了，但仍有一个故障，我稍后会描述，~~但现在应该没问题。

jwPlayer 嵌入脚本引起了很多问题，所以开始时我切换到普通的基于 SWFObject 的嵌入，并在页面中添加了一个 JavaScript 函数，调用`getFlashvars()`该函数返回配置设置。然后，我将`com.longtailvideo.jwplayer.utils.Configger.loadExternal()`方法更改为以下内容：

```
private function loadExternal():void {
    if (ExternalInterface.available) {
        try {
            //var flashvars:Object = ExternalInterface.call("jwplayer.embed.flash.getVars", ExternalInterface.objectID);
            var flashvars:Object = ExternalInterface.call("getFlashvars");
            if (flashvars !== null) {
                // TODO: add ability to pass in JSON directly instead of going to/from a string
                for (var param:String in flashvars) {
                    setConfigParam(param, flashvars[param]);
                }
                dispatchEvent(new Event(Event.COMPLETE));
                return;
            }
        } catch (e:Error) {}
    }
} 
```

如果不使用网页，您可能不必处理这些问题。

假舞台类被称为`StageInterceptor`并且是一个单例。为了应用它，类中有一些小的变化`RootReference`：

```
package com.longtailvideo.jwplayer.utils {
    import flash.display.DisplayObject;
    import flash.display.Stage;
    import flash.system.Security;

    // added --------
    import somePackage.StageInterceptor;

    /**
     * Maintains a static reference to the stage and root of the application.
     *
     * @author Pablo Schklowsky
     */

    /* Modified for a stackoverflow question: http://stackoverflow.com/questions/13325318/jwplayer-trying-to-bound-the-video-player-inside-my-own-container */

    public class RootReference {

        /** The root DisplayObject of the application.  **/ 
        public static var root:DisplayObject;

            // altered --------
        /** A reference to the stage. **/ 
        private static var _stage:StageInterceptor;

            // altered --------
        public static function get stage():StageInterceptor {
            return _stage;
        }

        public function RootReference(displayObj:DisplayObject) {
            if (!RootReference.root) {

                    // altered --------
                RootReference.root = StageInterceptor.singleton;
                RootReference._stage = StageInterceptor.singleton;

                try {
                    Security.allowDomain("*");
                } catch(e:Error) {
                    // This may not work in the AIR testing suite
                }
            }
        }
    }
} 
```

另外，我`set stage()`从类中删除了 setter 方法。

在文档类中，我有以下代码。该`MouseEvent.CLICK`处理程序用于测试电影的定位和调整大小。您真正需要的只是前几行：

```
// add StageInterceptor to the display tree
addChild(StageInterceptor.singleton);
// add the jwPlayer:
var p:Player = new Player();
StageInterceptor.singleton.addChild(p);

// for testing only:
stage.addEventListener(MouseEvent.CLICK, function(e:MouseEvent):void {
    var stg:StageInterceptor = StageInterceptor.singleton;
    if (e.altKey) {
        // click + alt: ignored (so can play, etc)
        return;
    } else if (e.shiftKey) {
        // click + shift: resizes
        stg.width = e.stageX - stg.x;
        stg.height = e.stageY - stg.y;
    } else {
        // click: moves video
        stg.x = e.stageX;
        stg.y = e.stageY;
    }
}); 
```

我放进`StageInterceptor`了包裹里`somePackage`。它看起来像这样：

```
package somePackage
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.InteractiveObject;
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.geom.Point;
    import flash.geom.Rectangle;
    import flash.media.StageVideo;

    public class StageInterceptor extends Sprite
    {
        private static var _singleton:StageInterceptor = new StageInterceptor();

        public static function get singleton():StageInterceptor {
            return _singleton;
        }

        private var _bg:Bitmap;

        public function StageInterceptor()
        {
            super();

            scrollRect = new Rectangle(0, 0, 500, 500);

            var bmpData:BitmapData = new BitmapData(500, 500, false, 0);
            _bg = new Bitmap(bmpData);
            _bg.alpha = 0.1;
            _bg.cacheAsBitmap = true;
            addChild(_bg);

            if (stage) {
                initOnStage();
            } else {
                addEventListener(Event.ADDED_TO_STAGE, initOnStage);
            }
        }

        private function initOnStage(e:Event = null):void {
            if (e) {
                removeEventListener(Event.ADDED_TO_STAGE, initOnStage);
            }
            stage.addEventListener(Event.RESIZE, onStageResized);
        }

        private function onStageResized(e:Event):void {
            e.stopImmediatePropagation();
            dispatchEvent(new Event(Event.RESIZE));
            updateStageVids();
        }

        public function updateStageVids():void {

            if (stage.stageVideos.length > 0) {
                for each (var sv:StageVideo in stage.stageVideos) {
                    if (!sv.videoWidth || !sv.videoHeight) {
                        continue;
                    } 
                    var rect:Rectangle = stretch(sv.videoWidth, sv.videoHeight, width, height);
                    rect.x = Math.max(0, x + 0.5 * (width - rect.width))
                    rect.y = Math.max(0, y + 0.5 * (height - rect.height));
                    sv.viewPort = rect;
                }
            }
        }

        override public function get width():Number {
            return scrollRect.width;
        }

        override public function set width(value:Number):void {
            if (value != width) {
                _bg.width = value;
                scrollRect = new Rectangle(0, 0, value, scrollRect.height);
                dispatchEvent(new Event(Event.RESIZE));
                updateStageVids();
            }
        }

        override public function set height(value:Number):void {
            if (value != height) {
                _bg.height = value;
                scrollRect = new Rectangle(0, 0, scrollRect.width, value);
                dispatchEvent(new Event(Event.RESIZE));
                updateStageVids();
            }
        }

        override public function get height():Number {
            return scrollRect.height;
        }

        public function get stageWidth():Number {
            return scrollRect.width;
        }

        public function get stageHeight():Number {
            return scrollRect.height;
        }

        public function get scaleMode():String {
            return stage.scaleMode;
        }

        public function set scaleMode(value:String):void {
            stage.scaleMode = value;
        }

        public function get displayState():String {
            return stage.displayState;
        }

        public function set displayState(value:String):void {
            stage.displayState = value;
        }

        public function get focus():InteractiveObject {
            return stage.focus;
        }

        public function set focus(value:InteractiveObject):void {
            stage.focus = value;
        }

        public function get stageVideos():* {
            return stage.stageVideos;
        }

        override public function set x(value:Number):void {
            if (value != x) {
                super.x = value;
                updateStageVids();
            }
        }

        override public function set y(value:Number):void {
            if (value != y) {
                super.y = value;
                updateStageVids();
            }
        }

        /**
         * Copied from com.longtailvideo.jwplayer.utils.Stretcher, modified to only
         * do 'uniform' stretch and to return a Rectangle class.
         **/
        public static function stretch(elmW:Number, elmH:Number, availW:Number, availH:Number):Rectangle {
            var scale:Number = Math.min(availW / elmW, availH / elmH);
            elmW = Math.round(elmW * scale);
            elmH = Math.round(elmH * scale);
            return new Rectangle(0, 0, elmW, elmH);
        }
    }
} 
```

~~剩下的问题与初始化视频实例时的定位有关。我认为只需`StageInterceptor.singleton.updateStageVids();`在正确的时间点调用就可以了，但我不确定。~~下面的编辑介绍了如何解决这个问题。

如果您不使用`stageVideo`. 但是，如果运气好的话，这将使事情朝着正确的方向发展。

### 编辑：

我已经更新了`StageInterceptor`课程以更好地缩放和定位视频。

此外，看起来视频的初始位置（至少当它是 stageVideo 时，是你正在使用的吗？）可以通过`com.longtailvideo.jwplayer.media.VideoMediaProvider`类中的小编辑来纠正。添加`import somePackage.StageInterceptor;`到顶部的导入语句，然后替换[此行（链接到源代码）：](http://developer.longtailvideo.com/trac/browser/tags/mediaplayer-6.0/src/flash/com/longtailvideo/jwplayer/media/VideoMediaProvider.as#L255)

`_stage.viewPort = new Rectangle(_media.x,_media.y,_media.width,_media.height);`

到：

`StageInterceptor.singleton.updateStageVids();`

所以方法看起来像：

```
/** Resize the video or stage.**/
override public function resize(width:Number, height:Number):void {
    if(_media) {
        Stretcher.stretch(_media, width, height, _config.stretching);
        if (_stage) {
            //_stage.viewPort = new Rectangle(_media.x,_media.y,_media.width,_media.height);
            StageInterceptor.singleton.updateStageVids();
        }
    }
} 
```

这应该可以解决问题，但我还没有为非 stageVideos 测试过它。而且，此更新还假设您正在逐步播放视频，而不是使用 RTMP 媒体。

### 编辑：

要使用非 StageVideo 视频启用播放器的移动和调整大小，但仍会逐步加载，[`com.longtailvideo.jwplayer.view.View.resizeMasker()`](http://developer.longtailvideo.com/trac/browser/tags/mediaplayer-6.0/src/flash/com/longtailvideo/jwplayer/view/View.as#L491)需要注释掉或删除该方法的内容：

```
protected function resizeMasker():void {
    /*
    if (_displayMasker == null)
        setupDisplayMask();

    _displayMasker.graphics.clear();
    _displayMasker.graphics.beginFill(0, 1);
    _displayMasker.graphics.drawRect(_components.display.x, _components.display.y, _player.config.width, _player.config.height);
    _displayMasker.graphics.endFill();
    */
} 
```

我还想提一下 jwPlayer 的开源版本受知识共享许可管理，如其[网站上](http://www.longtailvideo.com/jw-player/license)所述：

> JW Player 6 — 开源版 JW Player 开源版的使用受知识共享许可的约束。简而言之：
> 
> JW Player 开源 - 您可以使用、修改、复制和分发此版本，只要它用于非商业用途，您提供署名并在类似许可下共享。许可证摘要和全文可在此处找到：[CC BY-NC-SA 3.0](http://creativecommons.org/licenses/by-nc-sa/3.0/)**************

# java - 方法参数注释访问

> ID：13325319
> 
> 赞同：2
> 
> 时间：2012-11-10T19:26:23.203
> 
> 标签：java, reflection, annotations

我花了一段时间才弄清楚我在注释方法参数时没有犯错误。
但是我仍然不确定为什么，在下面的代码示例中，方式没有。1不起作用：

```
import java.lang.annotation.Annotation;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.reflect.Method;

public class AnnotationTest {

    @Retention(RetentionPolicy.RUNTIME)
    @interface MyAnnotation {
        String name() default "";
        }

    public void myMethod(@MyAnnotation(name = "test") String st) {

    }

    public static void main(String[] args) throws NoSuchMethodException, SecurityException {
        Class<AnnotationTest> clazz = AnnotationTest.class;
        Method method = clazz.getMethod("myMethod", String.class);

        /* Way no. 1 does not work*/
        Class<?> c1 = method.getParameterTypes()[0];
        MyAnnotation myAnnotation = c1.getAnnotation(MyAnnotation.class);
        System.out.println("1) " + method.getName() + ":" + myAnnotation);

        /* Way no. 2 works */
        Annotation[][] paramAnnotations = method.getParameterAnnotations();
        System.out.println("2) " + method.getName() + ":" + paramAnnotations[0][0]);
    }

} 
```

输出：

```
 1) myMethod:null
    2) myMethod:@AnnotationTest$MyAnnotation(name=test) 
```

它只是Java注释实现中的一个缺陷吗？`Method.getParameterTypes()`或者返回的类数组不包含参数注释是否有逻辑原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:32:59.937

这不是实施中的缺陷。

调用`Method#getParameterTypes()`返回参数类型的数组，即它们的类。当您获得该类的注释时，您将获得的注释`String`而不是方法参数本身的注释，并且`String`没有注释（[查看源代码](http://www.docjar.com/html/api/java/lang/String.java.html)）。

# php - PHP 使用 preg_replace 用双引号替换单词

> ID：13325320
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:26:26.777
> 
> 标签：php, regex, string, replace, preg-replace

> **可能重复：**
> [preg_replace 如何在 PHP 中用 " 包围字符串的 html 属性](https://stackoverflow.com/questions/13323723/preg-replace-how-surround-html-attributes-for-a-string-with-in-php)

如何用于更改带有双引号的单词`preg_replace()`内部`<` `>`和之后的所有单词`=`

```
$var="<myfootball figure=thin new=aux(comment); > this=Association football < name=football >" 
```

到

```
$var="<myfootball figure="thin"  new="aux(comment);" >this=Association footballl<  name="football"  >" 
```

这样做的正则表达式是什么`preg_replace()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:34:26.197

替换`(?<==)(\b\w+\b)(?!")(?=[^<]*>)`为`"$1"`

```
$var = preg_replace('/(?<==)(\b\w+\b)(?!")(?=[^<]*>)/', '"$1"', $var); 
```

* * *

**编辑**（基于 OP 的评论和问题更新）>>

替换`(?<==)(\b\S+?)(?=[\s>])(?!")(?=[^<]*>)`为`"$1"`

```
$var = preg_replace('/(?<==)(\b\S+?)(?=[\s>])(?!")(?=[^<]*>)/', '"$1"', $var); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:31:34.160

我认为最好把它放在 2 个正则表达式中。第一个表达式匹配 and 之间的所有内容`<`，`>`第二个表达式引用 之后的文本`=`。

```
 $value = preg_replace_callback('|<(.*?)>|', function($matches) {
      // $matches[1] is now the text between < and >
      return '<'.preg_replace('|=(\w+)|', '="\\1"', $matches[1]).'>';
 }, $var); 
```

# c++ - 为什么 atoi 函数不能将 const char * 转换为 int？

> ID：13325322
> 
> 赞同：3
> 
> 时间：2012-11-10T19:26:43.847
> 
> 标签：c++, atoi

为什么在这段代码中`atoi()`函数不能正常工作，为什么编译器会给出这个错误：

> 初始化 `int atoi(const char*)' 的参数 1

我的代码如下：

```
#include <iostream.h>
#include <stdlib.h>
int main()
{
    int a;
    char b;
    cin >> b;
    a = atoi(b);
    cout << "\na";  
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:29:41.153

`b`是`char`，但`atoi()`你必须通过`char *`，或者`const char *`因为 c++ 是严格的类型检查语言，所以你得到了这个

应该是这样`cout<<"\n"<<a;`而不是这样`cout<<"\na"`，因为后面的不会打印 a 的值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T19:32:23.283

正如你在这里看到的[atoi](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)

Atoi 收到一个指向 char 的指针，而不是像你那样的 char。这是有道理的，因为通过这种方式，您可以将 atoi 应用于超过 1 位的“数字”（以字符串表示），例如 atoi("100");

```
int atoi ( const char * str ); 
```

否则，如果它是一个字符，你只能转换 '0','1','2'.. '9'。

编辑：试试这个例子：

```
#include <iostream>
#include <stdlib.h>
int main()
{
    int a;
    char b[10];

    cin >> b;
    a = atoi(b);

    cout<<"\n"<<a; 
    return 0;
} 
```

# iphone - 禁用除特定视图之外的所有超级视图

> ID：13325323
> 
> 赞同：0
> 
> 时间：2012-11-10T19:26:43.593
> 
> 标签：iphone, objective-c, ios, touch, superview

我有通过 UIButton 点击​​打开的 UIView。我想禁用除此特定视图及其子视图之外的所有其他超级视图的用户交互，我该怎么做？只是为了让这个视图成为唯一会响应用户触摸的视图。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T19:32:51.197

同意评论，您可能想要禁用视图的所有同级...（已编辑以便您可以在某个时候将它们设置回启用）

```
- (void)setSiblings:(UIView *)view enabled:(BOOL)enabled {

    for (UIView *sibling in view.superview.subviews) {
        if (sibling != view) sibling.userInteractionEnabled = enabled;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T23:23:02.153

我知道您已经接受了答案，但更好（更简单）的方法是全屏显示新视图。使新视图具有清晰的背景。然后将真实视图作为子视图添加到这个全屏视图中。这样您就不必弄乱任何现有视图来显示这个新视图。您仍然可以看到它背后的所有内容，但触摸事件被清晰的全屏视图阻止。

然后，当您删除此全屏视图（淡出动画？）时，您不必再次弄乱所有现有视图。

您不必为了显示另一个视图而修改现有视图。如果这些现有视图之一真的应该禁用其交互会发生什么？当您关闭“模态”视图时，您最终将启用交互。

# php - 试图使用 php 代码附加一个 html 列表？

> ID：13325325
> 
> 赞同：0
> 
> 时间：2012-11-10T19:27:01.143
> 
> 标签：php, javascript, html

我在一个 html 列表元素中有这个 php 脚本，如果变量 ?pw =“密码”，它允许用户直接从网页编辑 html 元素。我希望用户也能够添加列表项供他们编辑，有没有办法使用 php 在 html 中附加另一个列表项？我知道你可以在 javascript 中使用 .append() ......这是我正在谈论的 php 脚本：

```
 <li>
    <?php
        if ($_POST['pw']!="") {
            $pw=($_POST['pw']);
        } else {
            $pw=($_GET['pw']);
        }
        $newcontent2=($_POST['newcontent2']);
        $filelocation2 = "content/event2-1.txt";
        if (!file_exists($filelocation2)) {
            echo "Couldn't find datafile, please contact the administrator. huberwb@g.cofc.edu";
        } else {
            $newfile2 = fopen($filelocation2,"r");
            $content2 = fread($newfile2, filesize($filelocation2));
            fclose($newfile2);
        }
        $content2 = stripslashes($content2);
        $content = htmlentities($content2,ENT_HTML5);
        /*set password */   
        $pass = "password";
        if (!$pw || $pw != $pass){
            $content2 = nl2br($content2);
            echo $content2;
        } else {
            if($newcontent2){
                $newcontent2 = stripslashes($newcontent2);
                $newfile2 = fopen($filelocation2,"w");
                fwrite($newfile2, $newcontent2);
                fclose($newfile2);
                echo "Text has been edited.";
                echo "<form><input type= 'submit' value='see changes' class='button'/></form>";
            } else {
                echo "<form method='post'> <textarea name ='newcontent2' style= 'width:100px; height:20px; border: 3px solid # ccc; font-family: sans-serif; font-size:small;' cols ='auto' rows='auto' wrap='virtual'>";
                echo $content2;
                echo "</textarea>
                <input type='hidden' name='pw' value= '".$pass."' />
                <br /><input type='submit' value='edit' class='button' />
                </form>";
            }
        }
    ?>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:32:08.213

PHP 在页面加载时呈现在服务器端。

用户的更改，即列表中的新项目只能由 PHP 通过新请求添加。这可以通过多种方式完成，即在表单发送请求并且页面重新加载新列表条目的情况下进行整页刷新。或者您可以使用 JavaScript/jQuery 将表单发送到 PHP，然后将一些返回 html 到`append()`列表中。

希望有帮助。

# cordova - 如何将黑莓的 Phonegap 1.8 升级到 1.9？

> ID：13325328
> 
> 赞同：0
> 
> 时间：2012-11-10T19:27:14.607
> 
> 标签：cordova, blackberry, blackberry-eclipse-plugin

我一直在使用 Eclipse 和 Phonegap 1.8 开发 BlackBerry Playbook 应用程序，整个过程运行得非常好。

我想更新到Phonegap 1.9，但没有成功。我已经检查了 Phonegap 文档以获取信息，但这并没有帮助。我现在无法提供确切的错误消息，而且我将在几天内无法访问我的开发系统。

我可能在更新过程中遗漏了一些基本的东西。有人可以概述一下我进行此升级所需的步骤吗？

谢谢罗伯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:17:24.800

我不太确定您如何设置 Eclipse 项目以使用 playbook 应用程序进行开发，但基本上您唯一需要做的就是更新 cordova-xxxjs 文件。小心不要将 2.0.0 版本用于 playbook，因为该版本存在错误。我希望这会有所帮助！

此外，如果仅更新 cordova-xxxjs 文件仍然会给您带来问题，我建议您删除文件名中的“-”。Playbook 不喜欢在文件名中使用特殊字符。

# android - 在我的应用程序中出现 bitmap.recycle() 错误

> ID：13325329
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:27:21.393
> 
> 标签：android, android-layout, android-intent

我正在创建一个包含 160 多个图像的应用程序，所有图像都在 150 到 300KB 之间。在崩溃中测试应用程序后，给我一个内存不足错误。我已经在这里阅读了有关该内容的帖子，但是当我实现 bitmap.recycle() 时，它在位图下方给了我一条红线。

这是我的代码：

```
next.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM1);
            imageView.setImageResource(R.drawable.sample);
            bitmap.recycle();
            slider.animateClose();

        } 
    }); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:01:45.773

您必须有一个 BitMap 才能调用 bitmap.recycle()。BitMap.recycle() 删除您在 .recycle() 之前写入的位图。例子：

```
Bitmap someBit= new Bitmap (this);
someBit.recycle(); 
```

根据上面的代码，这是正确的答案。

# silverlight - 如何导航不同的 PhoneApplicationPage？

> ID：13325332
> 
> 赞同：-4
> 
> 时间：2012-11-10T19:27:39.273
> 
> 标签：silverlight, windows-phone-7

我正在 Windows Phone 上做一个应用程序，但我不知道如何浏览其他 PhoneApplicationPage。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:32:14.830

我建议您尝试一些培训 - [http://msdn.microsoft.com/en-us/WindowsPhoneTrainingCourse](http://msdn.microsoft.com/en-us/WindowsPhoneTrainingCourse)

如果你真的想学习困难的方法，那么这里有一个导航教程 - [http://geekswithblogs.net/PeterTweed/archive/2010/05/17/simple-navigation-in-windows-mobile-7.aspx](http://geekswithblogs.net/PeterTweed/archive/2010/05/17/simple-navigation-in-windows-mobile-7.aspx)

# python - 总共运行 N 个作业，其中 M 个随时并行运行

> ID：13325334
> 
> 赞同：2
> 
> 时间：2012-11-10T19:28:03.340
> 
> 标签：python, bash, shell, parallel-processing

我有很多作业要运行，比如说 100 个。它们可以并行运行，但每个都占用大量内存，所以我只能同时运行 8 个。

我目前有这个shell脚本：

```
(
(python run.py $arg1 &)
(python run.py $arg2 &)
(python run.py $arg3 &)
(python run.py $arg4 &)
(python run.py $arg5 &)
(python run.py $arg6 &)
(python run.py $arg7 &)
(python run.py $arg8 &)
) 2>&1 | cat -u

(
(python run.py $arg9 &)
(python run.py $arg10 &)
(python run.py $arg11 &)
(python run.py $arg12 &)
(python run.py $arg13 &)
(python run.py $arg14 &)
(python run.py $arg15 &)
(python run.py $arg16 &)
) 2>&1 | cat -u

... 
```

这有运行第一批8个的效果，当它们都完成后，它开始下一批8个。问题是每个作业的运行时间不是恒定的，有些比其他作业先完成，所以它是对于每批 8 个要完成的重量来说，这并不是最佳的，因为我实际上正在等待 8 个中最慢的一个完成。

相反，我想要一个脚本（shell 或 python）来运行我所有的 100 个作业，在任何给定时间并行运行 8 个作业，以实现最佳效率。

关于实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T19:41:31.070

您可以编写自己的小型调度程序，将它们分配给已完成当前分配的处理器；但在我们的中心[，我们强烈建议](https://support.scinet.utoronto.ca/wiki/index.php/User_Serial)使用[gnu parallel](http://www.gnu.org/software/parallel/)，它已经使用类似 xargs 的语法实现了这一点。

因此，例如，如上所述，您可以这样做

```
parallel --max-procs 8 <<EOF
  python run.py $arg1 
  python run.py $arg2 
  python run.py $arg3
  ..
EOF 
```

或者，如果您在文件中有参数列表，则可以执行类似的操作

```
cat args.list | parallel --max-procs 8 python run.py 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T19:38:10.930

根据您的需要，您可以使用许多工具。最简单的可能是使用[`GNU parallel`](http://www.gnu.org/software/parallel/). `make`可以与其`-j`开关并行运行任务。如果您尝试运行的任务更加复杂和多样化，那么真正的排队系统可能会有所帮助，例如[Dr. Queue](https://ssl.drqueue.org/redmine/projects/drqueue/wiki/Documentation)。还有更多工具，[GNU parallel 的手册页](http://www.gnu.org/software/parallel/man.html#differences_between_gnu_parallel_and_alternatives)很好地列出了它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T19:54:36.820

在我看来，您正在寻找[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)模块，特别是[`multiprocessing.Pool`](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool).

如果我这样做，我会将所有不同的参数集提供给 run.py，将您现在在 run.py 中所做的顶级操作包装在一个`main(args)`函数中，然后使用 Pool 的 map 方法在所有不同的参数集。

它可能看起来像这样：

```
import multiprocessing

def main(args):
  # Here's where you would do what you usually do with the arguments

pool = multiprocessing.Pool(processes=8)
pool.map(main, sys.argv[1:], chunksize=1)
pool.close()
pool.join() 
```

请注意，这假设每次运行的参数都可以保存在一个字符串中（因此是 的一个条目`sys.argv`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-29T10:35:35.843

为什么不使用 DataStage 自己的 Workload Management？定义 M 个队列并将您的 N 个作业循环分配到这些队列上。

# sql - 试图创建一个触发器，只允许记录不到三天的更新

> ID：13325335
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:28:04.247
> 
> 标签：sql, sql-server-2008, tsql, triggers

我正在尝试创建一个触发器来更新不到三天的记录，这是我的代码，当我执行表空白时，我认为错误与 dateadd 函数有关，有什么建议吗？

```
 ALTER TRIGGER update_marketinglistC
    ON marketing_list FOR UPDATE
    AS
    BEGIN

        SELECT * FROM INSERTED 
        SELECT * FROM DELETED

        Select * from inserted 
        where DateCreated <= DATEADD(dd,-3,CURRENT_TIMESTAMP)

    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:34:11.423

尝试这个。

```
Alter Trigger update_marketinglistC
On marketing_list For Update
As

Begin

    If exists (Select * from inserted 
               Where DateCreated <= DATEADD(dd, -3, current_Timestamp))
    Begin
        Rollback Transaction
        Raiserror('Cannot update records more than three days old.', 16, 1)
    End

End 
```

# ruby-on-rails - 从另一个非设计控制器创建新的设计用户

> ID：13325342
> 
> 赞同：0
> 
> 时间：2012-11-10T19:28:47.883
> 
> 标签：ruby-on-rails

我有一个 users 表 (Devise) ，其中有一列“admin”（布尔值）来限定我的用户。我还有一个命名空间“后端”。我希望我的管理员用户可以从后端命名空间创建新用户。

所以我创建了一个`Backend::UsersController`：

```
class Backend::UsersController < ApplicationController
layout 'admin'
before_filter :authenticate_user!

def index
@auteurs = User.all

 respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @auteurs }
  end
end

def new
 @auteur = User.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @auteur }
  end
end

def create
  @auteur = User.new(params[:auteur])

  respond_to do |format|
    if @auteur.save
      format.html { redirect_to @auteur, notice: 'Article was successfully created.' }
      format.json { render json: @auteur, status: :created, location: @auteur }
    else
      format.html { render action: "new" }
      format.json { render json: @auteur.errors, status: :unprocessable_entity }
    end
  end
end
end 
```

这是“新”视图中调用的“_form”部分：

```
<%= simple_form_for(@auteur) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :email %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

这是我的路线：

```
 namespace :backend do 
    resources :articles 
    root to: "articles#index"
    resources :accueil
resources :users

get "users/index"

    get "users/create"

    get "users/new"
 end

  devise_for :users 
```

但是当我尝试访问“后端/用户/新”时，它驱使我出现这个错误：

```
NoMethodError in Backend/users#new

Showing C:/Ruby/acturevue/app/views/backend/users/_form.html.erb where line #1 raised:

undefined method `users_path' for #<#<Class:0x39616b0>:0x416f6d0> 
```

有人对问题的根源有任何想法吗？谢谢

**更新**

所以，我修改了我的代码：

在 Backend::UsersController 中：

```
def new
   @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user}
    end
  end

  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to backend_users_path(@user), notice: 'Article was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

通知 ：

```
<%= simple_form_for(@user) do |f| %> 
```

但我仍然有错误。但是 backend_users_path 存在于 y 个路由中：

```
 backend_users GET    /backend/users(.:format)             backend/users#
index
                      POST   /backend/users(.:format)             backend/users#
create
     new_backend_user GET    /backend/users/new(.:format)         backend/users#
new
    edit_backend_user GET    /backend/users/:id/edit(.:format)    backend/users#
edit
         backend_user GET    /backend/users/:id(.:format)         backend/users#
show
                      PUT    /backend/users/:id(.:format)         backend/users#
update
                      DELETE /backend/users/:id(.:format)         backend/users#
destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:50:28.303

您需要在重定向中使用命名空间：

```
redirect_to [:backend, @auteur] #... 
```

请参阅我对[这个问题](https://stackoverflow.com/questions/13224176/rails-namespacing-error/13224299#13224299)的回答。

# html - 为 HTML5 音频控件提供来自 Java servlet 的音频数据

> ID：13325345
> 
> 赞同：3
> 
> 时间：2012-11-10T19:29:17.660
> 
> 标签：html, http, tomcat, servlets, http-content-range

这可能是 Servlets 问题或 HTML5 问题，具体取决于解决方案的结果...... :)

我有一个（Tomcat）Servlet 提供音频短片，然后在 HTML5 音频元素中拾取这些短片。音频正确播放，但在某些浏览器上仅播放一次（因此尝试“倒带”或重播音频不起作用）。我怀疑这是因为我的 Servlet 没有报告它支持范围请求：我注意到给定同一服务器上的静态音频文件，Apache 添加了 HTTP“范围单元”响应标头，然后重播文件然后在这样的情况下工作案例。所以我假设在我遇到问题的浏览器上，为了重播文件，浏览器会发出 HTTP Content-Range 请求，而不是缓冲整个文件或重新请求整个文件。（至少在 Safari 上，重播从我的 Servlet 提供的音频可以正常工作：我

所以我的问题：

*   HTML中有没有办法请求浏览器在播放时缓冲整个音频文件以允许重播，而不是服务器必须支持范围请求？

*   如果没有，是否有人有响应来自 Servlet 的范围请求的经验？我假设这只是（a）发送“范围单元”响应代码以响应初始请求，然后（b）寻找相关的 HTTP 请求标头（“Content-Range？”）的情况（我猜这就是他们的处理方式？）在后续请求中并且只提供音频的相关部分？有什么我应该注意的陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:30:49.010

> HTML中有没有办法请求浏览器在播放时缓冲整个音频文件以允许重播，而不是服务器必须支持范围请求？

即使有，也不是所有浏览器都支持它，尤其是手机/ipad/等。

> 有没有人有响应来自 Servlet 的范围请求的经验？

[BalusC 提供了](http://balusc.blogspot.co.uk/2009/02/fileservlet-supporting-resume-and.html)实现。我已将它移植到我的环境中，除了[一些小问题](https://stackoverflow.com/questions/12637728/http-byte-range-protocol-client-behaviour-on-ipad-iphone)（很可能与实现无关，但与客户端细节有关）外，它运行良好。

# ruby-on-rails - 嵌入或引用关系

> ID：13325346
> 
> 赞同：2
> 
> 时间：2012-11-10T19:29:18.923
> 
> 标签：ruby-on-rails, mongodb, mongoid

我使用 mongodb 和 mongoid gem，我想得到一些建议。

我有一个用户`has many`市场和市场`has many`产品的应用程序。我需要在属于用户的所有（或任何）市场中搜索特定价格范围内的产品。

哪种关系更适合这个，嵌入的还是引用的？

我目前使用引用，它看起来像这样

```
class User
  has_many :markets
end

class Market
  belongs_to :user
  has_many :products
end

class Product
  belongs_to :calendar
  belongs_to :user
end 
```

对于搜索，我使用这个查询

```
Product.where(user_id: current_user.id).
  in(market_id: marked_ids).
  where(:price.gte => price) 
```

我很好奇，因为 mongdb 是一个面向文档的数据库，如果我在这种情况下使用嵌入式文档，我会在性能或设计方面受益吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T05:14:21.903

在您的情况下，我建议使用参考数据。因为我认为您需要自己操作这些集合中的每一个（您需要能够通过 _id 编辑/删除/更新“产品”，并执行一些其他复杂的查询，当您有单独的收藏）。

同时我会在用户集合中存储*一些*完整的嵌入数据，只是为了加速显示到访问者的浏览器。假设您有一个用户页面，您想在其中显示用户的个人资料以及排名前 5 位的市场和排名前 20 位的产品。您可以将那些最新的 top-5 和 top-20 嵌入到用户的文档中，并在有新的市场/产品时更新这些嵌入的对象。在这种情况下 - 当您显示用户页面时，您只需对 MongoDB 进行 1 次查询。所以这可以作为缓存。如果访问者需要查看更多产品，他会转到下一页“产品”并在 MongoDB 中查询单独的“产品”集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T00:30:40.577

如果您只需要通过父类访问项目，请使用嵌入文档。如果您需要直接查询或从多个对象中查询，请使用引用。

# windows-phone - 访问其他应用程序的名称-windows phone

> ID：13325353
> 
> 赞同：1
> 
> 时间：2012-11-10T19:30:03.377
> 
> 标签：windows-phone

我知道一个人无法访问另一个应用程序的内部存储，但是我们可以制作一个只获取所有其他应用程序名称的应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:25:50.297

不，您无权访问已安装的不是“Microsoft”应用程序的其他应用程序。您能做的最好的事情就是访问“启动器”。阅读 Jeff Blankenburg 的这篇文章：http: [//www.jeffblankenburg.com/2010/10/07/31-days-of-windows-phone-day-7-launchers/](http://www.jeffblankenburg.com/2010/10/07/31-days-of-windows-phone-day-7-launchers/)

根据 Jeff 的文章（源代码可通过上面的 url 获得）：

要快速查看启动器列表，以下是您目前所拥有的：

```
using Microsoft.Phone.Tasks; 
```

**BingMapsDirectionsTask** – 允许您提供从起点和终点或从用户当前位置到终点的转弯方向。

**BingMapsTask** – 您可以使用此任务启动带有特定点标记的地图。

**ConnectionSettingsTask** – 一项允许您将用户引导至其设备的 wi-fi、蓝牙和其他设置的任务。

**EmailComposeTask** – 允许用户使用他们的电子邮件帐户发送电子邮件。

**MarketplaceDetailTask**​​ – 启动 Windows Phone Marketplace，并将用户带到特定产品。

**MarketplaceHubTask** – 启动了 Windows Phone Marketplace，并允许您指定默认显示的应用程序类别。

**MarketplaceReviewTask** – 将用户带到 Windows Phone Marketplace 以查看当前应用程序。

**MarketplaceSearchTask** – 根据用户输入的搜索词（或您指定的搜索词）启动 Windows Phone Marketplace 的搜索结果。

**MediaPlayerLauncher** – 启动内部媒体播放器应用程序，并播放您指定的媒体文件。

**PhoneCallTask**​​ – 启动电话应用程序并显示提供的电话号码和姓名。在用户按下“呼叫”之前，不会拨打电话。</p>

**SearchTask** – 将其视为从您的应用程序提供 Bing 搜索的一种方式。

**SMSComposeTask** – 启动消息应用程序，并向用户提供发送文本消息的能力。您可以指定收件人和邮件正文，但必须由用户发送。

**WebBrowserTask** – 启动 Web 浏览器，并导航到指定的 URL。

此外，Windows Phone 8 还发布了一些新功能以添加到此列表中。[通过MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx)查看新项目。

# ruby-on-rails - ActiveRecord 帮助：标签包括在哪里

> ID：13325354
> 
> 赞同：0
> 
> 时间：2012-11-10T19:30:17.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我似乎无法找到一种方法来做到这一点。一些指导会很棒！

我正在建立一个类似网站的博客，其中包含帖子和帖子包含标签。标签和帖子由连接表保持在一起。我可以通过`post.tags`.

我试图进行搜索以显示包含某个标签的所有帖子。尝试了一段时间后，这是我想出的最好的：

```
def tag
 tag = Tag.find_by_title(params[:id])
 p = Post.page(params[:page]).per_page(7).all
 @posts = Array.new
 p.each do |p|
  if p.tags.include? (tag)
    @posts << p
  end
end 
```

除了分页之外，这一切都有效。我认为必须有一个简单的 where 子句来简化这个？

谢谢！

编辑：

这是我的连接表

![在此处输入图像描述](../Images/596c10183cc3f49df4aef66d95d8625b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:53:31.517

下一个方法应该返回用 tag 标记的帖子数组：

```
@posts = Post.includes(:tags).where('tags.id' => tag.id) 
```

您只需要保留方法的第一行并在之后添加上面的行。

请注意，要使其正常工作，您应该使用`has_and_belongs_to_many`.

# composer-php - silex/silex 1.0.*@dev -> 找不到匹配的包

> ID：13325355
> 
> 赞同：2
> 
> 时间：2012-11-10T19:30:41.267
> 
> 标签：composer-php, silex

如果我创建一个空文件夹并将 composer.json 放在那里：

```
{
    "require": {
        "silex/silex": "1.0.*@dev"
    }
} 
```

然后运行`composer install`​​- 它工作正常，微框架 silex 和它的所有要求都将安装到供应商文件夹中。行。

现在更复杂的例子，我无法理解为什么它不起作用。我有一个项目（称为“FB”），它依赖于我自己的“某种框架”（称为“light/light4”）。FB 项目的 composer.json:

```
{
    "repositories":[
        {
            "type":"hg",
            "url":"http://bitbucket.org/pqr/light4"
        }
    ],
    "require":{
        "light/light4":"dev-default"
    }
} 
```

如您所见，这取决于我在 bitbucket 上托管的框架 light/light4。然后是 light/light4 composer.json：

```
{
    "name":"light/light4",
    "version":"1.0.0",
    "require":{
        "php":">=5.4.0",
        "silex/silex": "1.0.*@dev",
        "twig/twig":">=1.8,<2.0-dev",
        "monolog/monolog":">=1.0.0",
        "symfony/validator":"2.1.*",
        "symfony/console":"2.1.*"
    },
    "autoload":{
        "psr-0":{
            "Light":"src/"
        },
        "files":[
            "src/functions/body.php", "src/functions/db.php", "src/functions/file.php", "src/functions/misc.php"
        ]
    }
} 
```

light/light4 取决于 silex/silex 和其他一些东西。

由于我从未提及`"minimun-stability":"dev"`- 假设默认情况下所有软件包都将安装为稳定版本。除了 light/light4 要求的 Silex/silex 为`"silex/silex": "1.0.*@dev"`

不幸的是，当我`composer -v install`在根项目（FB）上运行时，我收到以下错误：

```
Loading composer repositories with package information
Reading composer.json of light/light4 (default)
Importing branch default (dev-default)
Installing dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - light/light4 dev-default requires silex/silex 1.0.*@dev -> no matching package found.
    - light/light4 dev-default requires silex/silex 1.0.*@dev -> no matching package found.
    - Installation request for light/light4 dev-default -> satisfiable by light/light4 dev-default.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-stability setting
   see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more details.

Read <http://getcomposer.org/doc/articles/troubleshooting.md> for further common problems. 
```

`silex/silex 1.0.*@dev -> no matching package found`- 为什么？？？它适用于简单的空项目，但不适用于需求链:(

composer-dev irc 有人建议将`"silex/silex": "1.0.*@dev"`FB 项目的一般 composer.json 放入。我试过了——现在它可以工作了：所有软件包都安装在稳定版本中，并且我想要的开发版本中唯一的 silex/silex。现在我完全糊涂了。

问题仍然存在 - 为什么它在一般 composer.json 中有效而在嵌套（必需）项目 light/light4 中无效？我要了解问题的根源，还是只是作曲家的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:05:56.597

正如[文档](http://getcomposer.org/doc/04-schema.md#package-links)所说：“require 和 require-dev 还支持稳定性标志（仅限根）”

这些标志只能从根包中读取（参见[root-only 的定义](http://getcomposer.org/doc/04-schema.md#root-package)），因为这样可以让您的项目完全控制包的稳定性。显然，当您的某些依赖项依赖于不稳定的东西时，这是一个问题，但是随着越来越多的包具有 composer-available 的稳定版本，这种情况应该会变得更好。

# android - 什么是 Android 上的 JSON 文件？

> ID：13325356
> 
> 赞同：-2
> 
> 时间：2012-11-10T19:30:46.570
> 
> 标签：android, json, encryption, map

我是一个初学者的android程序员。我想在 android 的地图中查找并显示位置的详细信息（该位置是用户搜索）。为了将分支详细信息作为 JSON 加密获取，我应该向链接发送 HTTP 请求（我有那个链接）。但我不知道，位置的详细信息是否曾经是 JSON 文件？我应该如何将 JSON 发送到此链接？

请帮助我。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:36:24.153

**JSON是***JavaScript Object Notation*的缩写，是一种轻量级的计算机数据交换格式。[JSON](http://json.org/)是一种基于文本的、人类可读的格式，用于表示简单的数据结构和关联数组（称为对象）。

如果您请求发送 Web 服务，请像使用任何 String 值一样使用 JSON。

就像是：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:boom="http://boomi.com/services/boomiServices">
<soapenv:Header/>
<soapenv:Body>
    <boom:GetSearchUrlsRequest>
        <boom:classifiedCnr>-5183511</boom:classifiedCnr>
        <boom:stepId>1</boom:stepId>
        <boom:cnc/>
        <boom:cnu/>
        <boom:session/>
        <boom:os/>
        <boom:clientVersion/>
        <boom:connectdCNR/>
        <boom:urlRequest>
            <boom:urlId>554175</boom:urlId>
            <boom:searchFlag>1</boom:searchFlag>
            <boom:resType>2</boom:resType>
            <boom:urlResponseStatus>200</boom:urlResponseStatus>
            <boom:urlResponseRawData>{"message":{"text":"OK","code":0,"version":"1.1.1"},"businesses":[{"rating_img_url":"http://media1.ct.yelpcdn.com/static/201012164084228337/i/ico/stars/stars_4.png","country_code":"US","id":"Jw-ENQw-OGGwpM3nA3ywqw","is_closed":false,"city":"Chester","mobile_url":"http://mobile.yelp.com/biz/Jw-ENQw-OGGwpM3nA3ywqw","review_count":2,"zip":"19013","state":"PA","latitude":39.859610500000002,"rating_img_url_small":"http://media3.px.yelpcdn.com/static/20101216418129184/i/ico/stars/stars_small_4.png","address1":"1450 Providence Road","address2":"","address3":"","phone":"6108728100","state_code":"PA","categories":[{"category_filter":"hotels","search_url":"http://www.yelp.com/search?find_loc=1450+Providence+Road%2C+Chester+19013&amp;cflt=hotels","name":"Hotels"}],"photo_url":"http://media3.ct.yelpcdn.com/bpthumb/2sQIFjLw_m-_RWNWcagONg/ms","distance":0.25479599833488464,"name":"Best Western Widener Hotel &amp; Suites","neighborhoods":[],"url":"http://www.yelp.com/biz/best-western-widener-hotel-and-suites-chester","country":"USA","avg_rating":4.0,"longitude":-75.359901899999997,"nearby_url":"http://www.yelp.com/search?find_loc=1450+Providence+Road%2C+Chester+19013","reviews":[{"rating_img_url_small":"http://media3.px.yelpcdn.com/static/20101216418129184/i/ico/stars/stars_small_4.png","user_photo_url_small":"http://media3.px.yelpcdn.com/upthumb/WdbHns2wmpNr9R7LgAj-9w/ss","rating_img_url":"http://media1.ct.yelpcdn.com/static/201012164084228337/i/ico/stars/stars_4.png","rating":4,"mobile_uri":"http://mobile.yelp.com/biz/Jw-ENQw-OGGwpM3nA3ywqw?srid=uXxAyIYEkLp8nWncoY3OjA","url":"http://www.yelp.com/biz/best-western-widener-hotel-and-suites-chester#hrid:uXxAyIYEkLp8nWncoY3OjA","user_url":"http://www.yelp.com/user_details?userid=DMwp6ZDmshHRPeQVrYGoqQ","text_excerpt":"I was pleasantly surprised by the cleanliness and amenities of this hotel and attribute it to its newness. This is actually a very, very nice hotel with...","user_photo_url":"http://media3.px.yelpcdn.com/upthumb/WdbHns2wmpNr9R7LgAj-9w/ms","date":"2010-09-20","user_name":"Amy B.","id":"uXxAyIYEkLp8nWncoY3OjA"},{"rating_img_url_small":"http://media3.px.yelpcdn.com/static/20101216418129184/i/ico/stars/stars_small_4.png","user_photo_url_small":"http://media3.px.yelpcdn.com/upthumb/tONwL7U5hpighYDC6ap0AQ/ss","rating_img_url":"http://media1.ct.yelpcdn.com/static/201012164084228337/i/ico/stars/stars_4.png","rating":4,"mobile_uri":"http://mobile.yelp.com/biz/Jw-ENQw-OGGwpM3nA3ywqw?srid=toAvvSjQvSGaLbPkrqURxg","url":"http://www.yelp.com/biz/best-western-widener-hotel-and-suites-chester#hrid:toAvvSjQvSGaLbPkrqURxg","user_url":"http://www.yelp.com/user_details?userid=JDgAAy73XoGJK4S1Z0UHAA","text_excerpt":"I have to be honest here and say the number one reason we stayed at this hotel was because they were able to give us a Best Western employee discount rate....","user_photo_url":"http://media3.px.yelpcdn.com/upthumb/tONwL7U5hpighYDC6ap0AQ/ms","date":"2009-09-15","user_name":"Amita R.","id":"toAvvSjQvSGaLbPkrqURxg"}],"photo_url_small":"http://media3.ct.yelpcdn.com/bpthumb/2sQIFjLw_m-_RWNWcagONg/ss"}]}</boom:urlResponseRawData>
        </boom:urlRequest>
        <boom:urlRequest>
            <boom:urlId>554176</boom:urlId>
            <boom:searchFlag>1</boom:searchFlag>
            <boom:resType>2</boom:resType>
            <boom:urlResponseStatus>200</boom:urlResponseStatus>
            <boom:urlResponseRawData>{"ResultSet":{"totalResultsAvailable":"21","totalResultsReturned":"10","firstResultPosition":"1","ResultSetMapUrl":"http:\/\/maps.yahoo.com\/broadband\/?q1=Chester%2C+PA+19013tt=widener+universitytp=1","Result":[{"id":"60691839","Title":"Widener University University College","Address":"1 University Pl","City":"Chester","State":"PA","Phone":"(610) 499-4282","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-60691839-widener-university-university-college-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-60691839-widener-university-university-college-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1+University+Pl+Chester+PAgid1=60691839","Categories":""},{"id":"61242738","Title":"Widener University-Safety Department","Address":"1 University Pl","City":"Chester","State":"PA","Phone":"(610) 499-4201","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-61242738-widener-universitysafety-department-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-61242738-widener-universitysafety-department-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1+University+Pl+Chester+PAgid1=61242738","BusinessUrl":"http:\/\/widener.edu\/","BusinessClickUrl":"http:\/\/widener.edu\/","Categories":{"Category":{"id":"96925802","content":"Colleges  Universities"}}},{"id":"60694608","Title":"Widener University Graduate Programs","Address":"1 University Pl","City":"Chester","State":"PA","Phone":"(610) 499-4384","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-60694608-widener-university-graduate-programs-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-60694608-widener-university-graduate-programs-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1+University+Pl+Chester+PAgid1=60694608","Categories":""},{"id":"12169550","Title":"Widener University","Address":"One University Pl.","City":"Chester","State":"PA","Phone":"(610) 499-4000","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-12169550-widener-university-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-12169550-widener-university-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=One+University+Pl.+Chester+PAgid1=12169550","BusinessUrl":"http:\/\/www.widener.edu\/","BusinessClickUrl":"http:\/\/www.widener.edu\/","Categories":{"Category":[{"id":"96925802","content":"Colleges  Universities"},{"id":"96927134","content":"All Entertainers"},{"id":"96928448","content":"High Schools"},{"id":"96928449","content":"School Districts"}]}},{"id":"60693733","Title":"Widener University Schools  Colleges","Address":"1 University Pl","City":"Chester","State":"PA","Phone":"(610) 499-1101","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-60693733-widener-university-schools-colleges-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-60693733-widener-university-schools-colleges-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1+University+Pl+Chester+PAgid1=60693733","Categories":""},{"id":"61242762","Title":"Widener University","Address":"1 University Pl","City":"Chester","State":"PA","Phone":"(610) 876-7300","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-61242762-widener-university-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-61242762-widener-university-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1+University+Pl+Chester+PAgid1=61242762","Categories":{"Category":[{"id":"96925834","content":"Grocery Stores"},{"id":"96926008","content":"Bookstores"},{"id":"96928176","content":"Drug Stores"},{"id":"96935005","content":"Department Stores"},{"id":"96937229","content":"Greeting Cards"}]}},{"id":"60693305","Title":"Widener University Schools  Colleges","Address":"1 University Pl","City":"Chester","State":"PA","Phone":"(610) 499-4302","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-60693305-widener-university-schools-colleges-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-60693305-widener-university-schools-colleges-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1+University+Pl+Chester+PAgid1=60693305","Categories":""},{"id":"12183728","Title":"Wolfgram Memorial Library","Address":"1 University Pl","City":"Chester","State":"PA","Phone":"(610) 499-4087","Latitude":"39.861463","Longitude":"-75.355743","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.01","Url":"http:\/\/local.yahoo.com\/info-12183728-wolfgram-memorial-library-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-12183728-wolfgram-memorial-library-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1+University+Pl+Chester+PAgid1=12183728","BusinessUrl":"http:\/\/widener.edu\/","BusinessClickUrl":"http:\/\/widener.edu\/","Categories":{"Category":{"id":"96925746","content":"Libraries"}}},{"id":"49610605","Title":"Psychological Services Center of Widener Universit","Address":"1606 Walnut St","City":"Chester","State":"PA","Phone":"(610) 499-1261","Latitude":"39.862089","Longitude":"-75.358895","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.18","Url":"http:\/\/local.yahoo.com\/info-49610605-psychological-services-center-of-widener-universit-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-49610605-psychological-services-center-of-widener-universit-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=1606+Walnut+St+Chester+PAgid1=49610605","Categories":{"Category":{"id":"96927514","content":"Mental Health Clinics"}}},{"id":"12183711","Title":"Dtd Enterprises Incorporated","Address":"701 E 12th St","City":"Chester","State":"PA","Phone":"(610) 499-1734","Latitude":"39.858733","Longitude":"-75.355063","Rating":{"AverageRating":"NaN","TotalRatings":"0","TotalReviews":"0","LastReviewDate":"","LastReviewIntro":""},"Distance":"0.18","Url":"http:\/\/local.yahoo.com\/info-12183711-dtd-enterprises-incorporated-chester","ClickUrl":"http:\/\/local.yahoo.com\/info-12183711-dtd-enterprises-incorporated-chester","MapUrl":"http:\/\/maps.yahoo.com\/maps_result?q1=701+E+12th+St+Chester+PAgid1=12183711","BusinessUrl":"http:\/\/stonehenge4stone.com\/","BusinessClickUrl":"http:\/\/stonehenge4stone.com\/","Categories":{"Category":{"id":"96930525","content":"B2B Masonry"}}}]}}</boom:urlResponseRawData>
        </boom:urlRequest>
        <boom:urlRequest>
            <boom:urlId>554177</boom:urlId>
            <boom:searchFlag>1</boom:searchFlag>
            <boom:resType>2</boom:resType>
            <boom:urlResponseStatus>200</boom:urlResponseStatus>
            <boom:urlResponseRawData>{"version":"1.0","encoding":"UTF-8","feed":{"xmlns":"http://www.w3.org/2005/Atom","xmlns$openSearch":"http://a9.com/-/spec/opensearchrss/1.0/","xmlns$gm":"http://base.google.com/ns-metadata/1.0","xmlns$g":"http://base.google.com/ns/1.0","xmlns$batch":"http://schemas.google.com/gdata/batch","id":{"$t":"http://www.google.com/base/feeds/snippets"},"updated":{"$t":"2011-03-02T12:10:34.868Z"},"title":{"type":"text","$t":"Items matching query: (widener university) [location:@+039.86134300000-075.35566300000 +1mi]"},"link":[{"rel":"alternate","type":"text/html","href":"http://base.google.com"},{"rel":"http://schemas.google.com/g/2005#feed","type":"application/atom+xml","href":"http://www.google.com/base/feeds/snippets"},{"rel":"http://schemas.google.com/g/2005#batch","type":"application/atom+xml","href":"http://www.google.com/base/feeds/snippets/batch"},{"rel":"self","type":"application/atom+xml","href":"http://www.google.com/base/feeds/snippets?alt\u003djson-in-script\u0026q\u003dwidener+university\u0026start-index\u003d1\u0026max-results\u003d10\u0026bq\u003d+%5Blocation%3A%40%2B039.86134300000-075.35566300000+%2B1mi%5D"}],"author":[{"name":{"$t":"Google Inc."},"email":{"$t":"base@google.com"}}],"generator":{"version":"1.0","uri":"http://base.google.com","$t":"GoogleBase"},"openSearch$totalResults":{"$t":"0"},"openSearch$startIndex":{"$t":"1"},"openSearch$itemsPerPage":{"$t":"10"}}}</boom:urlResponseRawData>
        </boom:urlRequest>
    </boom:GetSearchUrlsRequest>
</soapenv:Body>
</soapenv:Envelope> 
```

`<boom:urlResponseRawData>`JSON数据在哪里

# oracle - ORA-12154 使用 tns 别名连接时

> ID：13325367
> 
> 赞同：3
> 
> 时间：2012-11-10T19:31:53.940
> 
> 标签：oracle, oracle11g, tnsnames, ora-12154

我在 Win7x64 笔记本电脑上安装了 Oracle 11.2，几乎一切正常。但是，我不明白的一件事。我可以通过以下方式连接到示例 HR 模式：

```
sqlplus hr/password 
```

但不是：

```
sqlplus hr/password@orcl 
```

我得到一个`ORA-12154: TNS:could not resolve the connect identifier specified`.

我偶然发现了这一点，因为我期望第二个选项是正确的。为什么我可以省略 TNS 别名？我是 Oracle 初学者，但是当我连接到其他环境时，需要 TNS 别名，否则我无法建立连接。

我有以下内容`tnsnames.ora`：

```
LISTENER_ORCL = (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))

ORACLR_CONNECTION_DATA = (DESCRIPTION =
  (ADDRESS_LIST = (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521)))
  (CONNECT_DATA = (SID = CLRExtProc)(PRESENTATION = RO)))

ORCL, DUMMY = (DESCRIPTION =
  (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
  (CONNECT_DATA = (SERVER = DEDICATED)(SERVICE_NAME = orcl))) 
```

我确定它正在被使用，因为两者`tnsping orcl`都`tnsping dummy`可以。谁可以给我解释一下这个？

**更新1**：输出`lsnrctl status`如下：

```
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1521)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for 64-bit Windows: Version 11.2.0.1.0 - Production
Start Date                11-NOV-2012 00:43:22
Uptime                    0 days 0 hr. 15 min. 53 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   C:\app\Ronald\product\11.2.0\dbhome_1\network\admin\listener.ora
Listener Log File         c:\app\ronald\diag\tnslsnr\Ronald-PDC\listener\alert\log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\EXTPROC1521ipc)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=127.0.0.1)(PORT=1521)))
Services Summary...
Service "CLRExtProc" has 1 instance(s).
  Instance "CLRExtProc", status UNKNOWN, has 1 handler(s) for this service...
Service "orcl" has 1 instance(s).
  Instance "orcl", status READY, has 1 handler(s) for this service...
Service "orclXDB" has 1 instance(s).
  Instance "orcl", status READY, has 1 handler(s) for this service...
The command completed successfully 
```

结果`SELECT name FROM v$database`是一个数据库：`ORCL`.

**更新 2**：输出`tnsping orcl`（格式化为可读性）。

```
Used parameter files:
C:\app\Ronald\product\11.2.0\dbhome_1\network\admin\sqlnet.ora

Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION =
  (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
  (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = orcl)))
OK (20 msec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:18:16.937

您是否真的创建了一个名为 ORCL 的数据库实例？

使用命令检查数据库的实际名称

```
lsnrctl status 
```

这应该告诉您侦听器知道哪些服务，这就是您在使用 @ 语法连接时正在与之交谈的内容。您可以在没有@ORCL 的情况下进行连接的原因是，在这种情况下，您正在使用进程间通信 (IPC) 并绕过侦听器，因为数据库与 SQL*Plus 客户端会话位于同一台计算机上。

您还可以在第一个示例中使用以下方法连接时找出数据库名称：

```
SELECT name FROM v$database; 
```

编辑：

试试 EZConnect 语法，看看是否可行：

```
sqlplus user/pw@localhost/ORCL 
```

请记住，`TNSPING`除了联系侦听器之外不会做任何事情 - 它不会验证可以访问数据库。

还有一件事：看起来 TCP 可能不是为侦听器配置的协议？检查您的 listener.ora 文件（与 tnsnames.ora 文件位于同一目录中）。LISTENER 的条目应如下所示：

```
LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  ) 
```

我`TNSPING`的输出在输出开始附近的一行中看起来有点不同：

```
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=myhost)(PORT=1521))) 
```

# ios - 标签栏项目未连接到 VIEW

> ID：13325373
> 
> 赞同：1
> 
> 时间：2012-11-10T19:32:33.147
> 
> 标签：ios, tabs

这听起来像是一个愚蠢的问题，但我创建了一个视图，然后在底部添加了一个选项卡栏。我想将选项卡项目连接到新视图，但是当我去 CTRL DRAG 到一个新的视图控制器时它不会连接?? 难道我做错了什么？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:36:33.890

你不能用 tabBar 做到这一点。您需要实现 UITabBarDelegate 方法，tabBar:didSelectItem:，并在代码中进行转换。正如 Rob 所说，使用 TabBarController 会更容易。

# ios - Facebook SDK 3.1 for iOS，通过应用切换登录时永远不会调用完成处理程序

> ID：13325380
> 
> 赞同：0
> 
> 时间：2012-11-10T19:33:06.273
> 
> 标签：ios, facebook

我正在开发一个必须向 facebook 发布一些信息的应用程序。当我打电话

```
[[FBSession activeSession] openWithCompletionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
            [self publishFacebookStory];
        }]; 
```

或者

```
[FBSession openActiveSessionWithPublishPermissions:publishPermissions defaultAudience:FBSessionDefaultAudienceEveryone allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        if (!error) {
            [self publishFacebookStory];
        }
    }]; 
```

应用程序切换到 safari，我收到一条消息说该应用程序已被授权。我按下确定，它切换回我的应用程序，但从未调用完成处理程序，此时我仍然没有有效的访问令牌。

有任何想法吗？任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:56:13.247

问题是您的应用程序如何知道如何在您的应用程序委托调用`applicationDidBecomeActive`. 如果您通过[Facebook Publish to Feed](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)，它还会将您引回[Facebook 登录](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)，该登录会显示您对`applicationDidBecomeActive`.

最重要的是，您必须将会话的打开与 Facebook 提要上的发布分离（通过在您向用户提供发布到他们的提要的选项之前打开会话，或者通过跟踪用户想要在发布之前发布的内容）授权被启动，然后使用它来发布信息`applicationDidBecomeActive`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:06:55.217

您是否正在处理您的 appdelegate 中的网址？

```
-(BOOL) application:(UIApplication*)application handleOpenURL:(NSURL*)URL {
    NSString *url = URL.absoluteString;

    if ([url hasPrefix:@"YOUR_FB_URL_PREFIX"]) {
        [FBSession.activeSession handleOpenURL:URL];
    }
    .......
} 
```

# sql - SQL - 中止并发事务的原因

> ID：13325381
> 
> 赞同：0
> 
> 时间：2012-11-10T19:33:20.020
> 
> 标签：sql, transactions

在为多个事务设置隔离级别时，中止事务的原因可能是什么？

我假设隔离级别通过适当的锁定而不是通过中止事务来定义允许/不允许发生哪些异常 - 这是一个正确的假设吗？

到目前为止，我能想到的唯一原因是执行死锁并且必须中止其中一个事务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:38:28.313

如果一个事务 T1 正在请求由另一个事务 T2 锁定的某个资源 R1，则 T1 可能会超时并中止。

这还不是僵局。死锁是当 T1 和 T2 都停止时，每个都在等待对方释放对方在某些资源上的锁。

# php - 多租户 PHP SaaS - 为每个客户端单独的数据库，或将它们分组？

> ID：13325383
> 
> 赞同：26
> 
> 时间：2012-11-10T19:33:31.377
> 
> 标签：php, mysql, saas, multi-tenant

您必须忍受我在这里可能会弄错一些术语，因为我什至不知道这属于整个“多租户”“软件即服务”类别，但在这里确实如此。

我为客户开发了一个会员系统（用 PHP 编写）。我们现在正在考虑为我们的其他客户提供一个完全托管的解决方案，提供一个子域（甚至是他们自己的域）。

就数据存储而言，我似乎有以下选择：

**选项 1** - 将所有内容存储在 1 个大数据库中，并在需要它的表上有一个“client_id”字段（大约有 30 个表适用），并有一个“客户”表存储其主要设置、详细信息等以及映射到它们的域。然后，这只会设置一个包含其各自客户端 ID 的全局可访问变量 - 我显然必须修改每个查询以检查 client_id 列。

**选项 2** - 有一个包含“共享参考”表和“客户”表的主表。然后有其他数据库的“块”，每个数据库都包含 10 个客户端。客户将获得他们自己的数据库表，并以他们的客户 ID 为前缀。如果真的出现问题，这会增加一点安全性，以防止看到其他客户端数据。

**选项 3** - 与选项 2 完全相同，除了每个客户端都有 1 个数据库，将它们与其他客户端完全隔离，理论上提供更多保护，如果 1 个客户端的表被黑客攻击或以其他方式损坏，它不会影响其他任何人。最大的缺点是，在部署新客户端时，需要设置整个数据库、用户和密码等。这是否也可能导致相当大的开销，或者就像你让所有人都在一个一样数据库？

还有几点——其中一些客户将拥有 5000 多个“客户”以及这些客户的所有详细信息——这就是为什么选项 1 可能有点问题——如果我有 100 个客户，那可能等于1 个表中超过 50 万行。

在客户数据（和支付信息）的安全性是关键的情况下，我认为选项 3 是最好的方法，我是否正确。根据我的建议，有些人说选择选项 1，因为“它更容易”，但我真的不这么认为。我认为这是一个潜在的瓶颈，因为如果他们有自己的数据库，我可以更容易地移动客户。

*（仅供参考，该系统是基于 PHP 和 MySQL 的）*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-10T21:26:07.397

选项 3 是最具可扩展性的。虽然一开始它可能看起来更复杂，但它可以完全自动化，并且会为您省去未来的麻烦。您还可以通过在多台服务器上拥有客户端数据库来更有效地扩展以提高性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:41:56.693

我同意 Ozzy 的观点——我这样做是为了一个在线数据库产品。我们有一个主数据库，它基本上有一个美化的用户表。每个客户都有自己的数据库。这样做的好处是我可以轻松地将一个客户数据库从服务器 A 移动到服务器 B [mysql]，并且可以在紧要关头使用命令行工具来完成。同样对大表进行维护，删除/添加索引真的会搞砸你的应用程序，特别是如果说添加索引会锁定表 [mysql]。它影响到每个人。使用较小的数据库，您可能会更不受此影响，并且当您需要推出模式级别更改时有更多选择。我只是喜欢灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-20T17:41:32.583

多年前，当我设计一个用 PHP 构建 SaaS 应用程序的平台时，我选择了第三种选择：**多租户代码**和**单租户数据库**。

以我的经验，这是最具可扩展性的选项，但它还需要一组脚本来在更新代码、数据库方案、为租户启用应用程序等时传播更改。

因此，我花了很多精力来构建基于组件的可扩展引擎，以完全自动化所有这些任务并最大限度地减少系统管理工作。如果您想采用第三种选择，我强烈建议您构建这样的架构。

# ruby-on-rails - Ruby on Rails：带有后备的资产搜索？

> ID：13325385
> 
> 赞同：0
> 
> 时间：2012-11-10T19:33:38.880
> 
> 标签：ruby-on-rails, ruby, themes, asset-pipeline

我有一个需要主题支持的网站。主题是资产和视图的组合。

在过滤器添加视图搜索路径之前，可以轻松处理视图搜索路径：`prepend_view_path Rails.root.join('views', theme.name).to_s`

但是资产呢？我找不到任何方法在每个请求的基础上添加目录。我怎么做？

# macos - Automator 中的持久变量存储

> ID：13325386
> 
> 赞同：1
> 
> 时间：2012-11-10T19:33:52.007
> 
> 标签：macos, shell, applescript, automator

是否可以在自动化工作流程中存储持久值（特别是对于服务流）？

似乎常规的自动机变量[不是持久的](https://stackoverflow.com/questions/3048165/are-automator-variables-persistent)；例如，尝试使用[具有属性](http://www.mactech.com/articles/mactech/Vol.22/22.03/StoringandAccessingData/index.html)（通常持续存在）的 applescript 块实际上也不会在 Applescript 中持续存在该属性（在测试中有效，但是当您运行服务时，该值不会持续存在）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T05:22:44.900

您可以使用脚本对象将数据存储在不碍事的地方。

![自动机](../Images/90b985523907ba26f099f7afa1e5dff0.png)

```
on run
    -- Path of script which holds data
    set thePath to (path to desktop as text) & "myData.scpt"
    --set thePath to (path to preferences as text) & "myData.scpt" -- better

    script theData
        property xxx : missing value
    end script

    try
        set theData to load script file thePath
    on error
        -- On first run, set the initial value of the variable
        set theData's xxx to 5
    end try

    -- change the value of the variable
    set theData's xxx to (theData's xxx) + 1

    -- save your changes
    store script theData in file thePath replacing yes
    return theData's xxx
end run 
```

# php - 使用 javascript 更新父 div

> ID：13325387
> 
> 赞同：0
> 
> 时间：2012-11-10T19:34:01.657
> 
> 标签：php, javascript

所以我的网站上有几个模态窗口。我通常使用 jquery 和 ajax 在模态窗口中完成一些事情并更新父页面上的 div。

我的问题是我正在上传文件，所以我不得不使用我从未使用过的 iframe，而我使用的是 javascript，而不是我从未使用过的 jquery，所以我有点迷茫并寻找方向。

我正在尝试从我的模式窗口更新父页面上的 div。在模态窗口中，我有一个针对 iframe 的表单，并且该操作针对单独的 php 页面。总体问题是如何在表单上传文件后将更新的 $attachment_table 发送到父 div？我正在努力：

Modal_window.php - 上面有一个上传文件的表单。

```
<?php
$attachment_table = '';
while (($row73 = $answer17->fetch(PDO::FETCH_ASSOC)) !== false) {
                          $attachment_table .= '<tr>';
                          $attachment_table .= "<td><input name='checkbox[]' type='checkbox' id='checkbox[]' value='${row73[imageven_id]}'></td>";
                          $attachment_table .= "<td><a href='../php/viewimages.php?id=${row73[image_id]}')'>${row73[upload_name]}</a></td>";
                          $attachment_table .= "<td>${row73[image_category]}</td>";
                          $attachment_table .= "<td>${row73[upload_date]}</td>";
                          $attachment_table .= '</tr>';
                      };

?>    

<script type="text/javascript">

        function stopUpload(success) {
            var result = '';
            if (success == 1) {
                window.top.document.getElementById('attachment_table').innerHTML = <?php echo $attachment_table; ?>;
                document.getElementById('result').innerHTML = '<div class="msg-status" style="width:492px;">The file was uploaded successfully!<\/div><br/>';
            } else if (success == 0) {
                document.getElementById('result').innerHTML = '<div class="msg-error" style="width:492px;">There was an error during file upload!<\/div><br/>';
            } else if (success == 2) {
                document.getElementById('result').innerHTML = '<div class="msg-error" style="width:492px;">ERROR! Please upload a document with the following file types....<br/><br/>txt, doc, xls, rtf, ppt, pdf, jpg, jpeg, gif, png, xlsx, docx, png, pps, ppsx, ppt<\/div><br/>';
            }
            document.getElementById('f1_upload_process').style.visibility = 'hidden';
            return true;
        }
    </script> 
```

modal_window_process.php - 处理数据库代码并发送 $result 响应

```
<script language="javascript" type="text/javascript"> 
window.top.window.stopUpload(<?php echo $result;?>);
</script> 
```

有人可以指出我正确的方向吗？我在网上找不到任何关于如何做到这一点的信息，而且我是一个自学成才的菜鸟。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:48:22.927

如果 iframe 父级有这个功能

```
<script type='text/javascript'>
    function onUploaderReady() {
        alert('upload ready');
    }
</script> 
```

您可以让 modal_window_process.php 脚本通过返回这样的响应来调用*onUploaderReady函数*

```
<html>
<head>
    <script type='text/javascript'>
        parent.onUploaderReady();
    </script>
</head>
</html> 
```

# java - Log4J fileappender 不能在 Websphere 7 上滚动

> ID：13325393
> 
> 赞同：0
> 
> 时间：2012-11-10T19:35:43.157
> 
> 标签：java, jakarta-ee, logging, log4j, websphere

我当前的项目使用 Log4j 进行日志输出，但是当它部署在 websphere 7 上时，似乎日志文件总是被服务器占用，因此 Log4J 无法关闭它并打开一个新文件。如果在 DEBUG 级别，当前日志文件可以扩展到 1.5 Gb。我浏览了一些在线教程，但没有得到可靠的解决方案。因此，我打开此线程以获取有关使 log4J 在 WS 7 上工作的任何意见或经验。

当前的 log4J 是 1.2.15，该项目是一个普通的 POJO/JSP 应用程序，没有其他容器（比如 Spring，我确实有另一个项目在 Spring/tomcat 上有相同的问题，将在另一个线程中打开）。这是 log4j.properties：

```
log4j.rootCategory=INFO, ROL
#
# Rolling File Appender
#
log4j.appender.ROL=org.apache.log4j.RollingFileAppender
log4j.appender.ROL.Encoding=UTF-8
log4j.appender.ROL.File=C\:\\Logs\\AppOut.log
log4j.appender.ROL.MaxFileSize=10000KB
log4j.appender.ROL.MaxBackupIndex=10
log4j.appender.ROL.layout=org.apache.log4j.PatternLayout
log4j.appender.ROL.layout.ConversionPattern=%d -- %p -- %c -- %m%n 
```

但是这种配置不会使日志文件翻转。

## 更新：

似乎每次我在停止应用程序（而不是服务器）后尝试删除日志文件时，它总是说“文件被另一个应用程序打开”，它只指 Websphere。我可以保证没有其他应用程序正在打开日志文件。解除对它的锁定的唯一方法是停止`application server`.

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:52:09.040

我认为您已经看过这篇文章 - [http://www.ibm.com/developerworks/websphere/techjournal/0802_supauth/0802_supauth.html](http://www.ibm.com/developerworks/websphere/techjournal/0802_supauth/0802_supauth.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:55:20.240

我们使用的是 7（顶部是门户服务器 6.1）。（我们使用 sl4j 库包装对记录器的调用，但我认为这与这里的问题无关）。除了我们没有设置根类别并且我们明确地将可加性设置为 false 之外，真的看不出有任何重大区别。

下面是我们配置的一部分（仅显示我们的一个附加程序），它工作得很好，并且按预期每 10MB 滚动一次日志。也许它是在 WAS 本身中配置的——我不是 WAS 管理员专家，也没有自己安装 WAS，但如果您还没有解决它，可以在周一询问我们的管理员。

```
log4j.logger.com.xxx.protection=TRACE, A1
log4j.additivity.com.xxx.protection=false

# other appenders excluded

log4j.appender.A1=org.apache.log4j.RollingFileAppender
log4j.appender.A1.File=${LOG_ROOT}/applLogs/ui_and_business_logic.log
log4j.appender.A1.MaxFileSize=10MB
log4j.appender.A1.MaxBackupIndex=10
log4j.appender.A1.Append=true
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d %p %t %c MSG: %m%n 
```

# html - 奇怪的缩进

> ID：13325395
> 
> 赞同：0
> 
> 时间：2012-11-10T19:35:48.177
> 
> 标签：html, css

我有这个 JSFiddle [http://jsfiddle.net/ThYBS/](http://jsfiddle.net/ThYBS/) ，当我在 JSFiddle 站点上运行它时，一切都显示正常，但是当我在本地机器上显示它时，左边的单词前有一个随机缩进。我找不到任何问题的单词部分是

```
#menu ul {} 
```

但我似乎找不到任何东西。

我不知道为什么，你们也可以检查一下吗？如果您知道原因，请告诉我？谢谢！

问候

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T03:22:13.557

我也遇到了这个问题——默认的浏览器行为似乎是缩进`<menu>`标签中的项目。`{padding: 0px;}`使用或使用 CSS 重置/CSS 规范化删除填充应该可以做到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T19:46:18.580

将 UL 的 Padding 调整为 0 有帮助。

# javascript - jquery函数使用了两次

> ID：13325397
> 
> 赞同：3
> 
> 时间：2012-11-10T19:35:52.367
> 
> 标签：javascript

我这里有这段代码，它为复选框提供了一个进度条。我想在单页中使用多个这样的进度条。如何为每个 div 唯一地调用函数？

```
$(window).load(function(){
$(function() {
    $("#remind").progressbar({
        value: 0,
        max: 100,
        textFormat: 'fraction',
        complete: function(event, ui) {
            alert("Job complete you lazy bum!");
        }
    });

    $('.option').on('change', function() {
        var total = 0;

        $('.option:checked').each(function() {
            total += parseInt($(this).val());
        });

        $("#remind").progressbar("value", total);
    });

});
}); 
```

这是html部分，

```
<div id="remind"></div>  
<div>
    <input type="checkbox" class="option" value="25"> Task 1<br>
    <input type="checkbox" class="option" value="25"> Task 2<br>
    <input type="checkbox" class="option" value="25"> Task 3<br>
    <input type="checkbox" class="option" value="25"> Task 4<br>
</div> 
```

我如何让另一个具有相同功能的 div 工作而不会干扰另一个，但又不编写所有更改类和 id 名称的 js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:56:32.793

好吧，如果持有选项的 div 始终遵循进度条 div，您可以在脚本中使用此连接，（应该使用以 + 开头的行而不是带有 - 的行）

而不是 id 使用类“提醒”：

```
+<div class="remind"></div> 
-<div id="remind"></div> 
```

按类而不是 id 初始化进度条：

```
+$(".remind").progressbar({
-$("#remind").progressbar({ 
```

对父级 (div) 中的其他选中选项使用本地化搜索：

```
+$(this).parent().find('.option:checked').each(function() {
-$('.option:checked').each(function() { 
```

最后使用 HTML 结构增加 prev div 选项的进度：
***here 扮演我回答的第一句他的角色**

```
+$(this).parent().prev('div.remind').progressbar("value", total);
-$("#remind").progressbar("value", total); 
```

欢迎来到stackoverflow！[：

这是一个[jsFiddle](http://jsfiddle.net/AB4sN/1/) **可以看到它的工作原理。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:02:59.397

您必须将它们包装在一个容器中并使用它来关联它们，或者更好地为`input`元素提供一个`data-`将它们与其进度条相关联的属性。

**html**

```
<div id="remind" class="progress-bar"></div>  
<div>
    <input type="checkbox" class="option" value="25" data-progress="remind"> Task 1<br>
    <input type="checkbox" class="option" value="25" data-progress="remind"> Task 2<br>
    <input type="checkbox" class="option" value="25" data-progress="remind"> Task 3<br>
    <input type="checkbox" class="option" value="25" data-progress="remind"> Task 4<br>
</div>
<div id="forget" class="progress-bar"></div>  
<div>
    <input type="checkbox" class="option" value="25" data-progress="forget"> Task 1<br>
    <input type="checkbox" class="option" value="25" data-progress="forget"> Task 2<br>
    <input type="checkbox" class="option" value="25" data-progress="forget"> Task 3<br>
    <input type="checkbox" class="option" value="25" data-progress="forget"> Task 4<br>
</div> 
```

**jQuery**

```
$(".progress-bar").progressbar({
    value: 0,
    max: 100,
    textFormat: 'fraction',
    complete: function(event, ui) {
        alert("Job complete you lazy bum!");
    }
});

$('.option').on('change', function() {
    var total = 0,
        progressbarID = $(this).data('progress');

    $('input[data-progress="'+progressbarID+'"].option:checked').each(function() {
        total += parseInt($(this).val());
    });

    $('#'+progressbarID).progressbar("value", total);
}); 
```

**演示在** [http://jsfiddle.net/kksXU/](http://jsfiddle.net/kksXU/)

# php - 'header' 函数后的输出

> ID：13325398
> 
> 赞同：1
> 
> 时间：2012-11-10T19:35:55.690
> 
> 标签：php, html, apache

我有这样的代码：

```
<?php
header('Location: http://www.example.com/');
echo 'Hello'; 
```

我想知道代码的结果是什么。我知道 - 浏览器获取标题并重定向到“http://www.example.com/”。但是'header'函数之后的输出呢？字符串“Hello”将被发送到哪里？如果broser会收到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:40:20.713

**[`header()`](http://php.net/manual/en/function.header.php)**用于发送原始 HTTP 标头

它将在其标头（不同的 HTTP 代码，**REDIRECT 302**）中发送重定向以及内容`'Hello'`。

响应标头首先由 Web 浏览器处理，然后再转到任何内容。因此，浏览器不会读取或处理此类 HTTP 响应的内容。

**更多：[HTTP 302](http://en.wikipedia.org/wiki/HTTP_302)**

# c++ - c++ STL map::find()

> ID：13325400
> 
> 赞同：2
> 
> 时间：2012-11-10T19:36:04.680
> 
> 标签：c++, stl, map

我使用自己的类作为 std::map 的键类型。map 实现如何确定两个对象何时相等？

我知道我可以确定 operator< 或 Comp 类型来排列元素。但我找不到关于平等的任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:45:28.357

可以使用 just 进行比较`operator<`，因此也不需要您进行定义`operator==`。基本上，如果一个不小于另一个，另一个不小于第一个，它们必须相等。这是一个可能的效用函数实现：

```
bool isEqual(const Type &arg1, const Type &arg2) const {
    return !(arg1 < arg2) && !(arg2 < arg1);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T19:45:51.823

该类`std::map<K, V, Comp>`实际上并不能确定对象是否相等！它所关心的只是两个对象是否属于它确定使用的同一个等价类

```
Comp comp;
if (!comp(a, b) && !comp(b, a)) {
    // a and b are in the same equivalence class
} 
```

的默认定义`Compo`是`std::less<K>`，即类确定等价为两个对象都不小于另一个。

# android - Android 使用线性布局 maxWidth，不适用于 fill_parent

> ID：13325403
> 
> 赞同：21
> 
> 时间：2012-11-10T19:36:35.630
> 
> 标签：android, android-layout, user-interface

使用时`fill_parent`，`maxWidth`没有效果。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="match_parent"
              android:orientation="vertical">
    <LinearLayout android:layout_width="fill_parent"
                  android:layout_height="match_parent"
                  android:orientation="vertical">
        <EditText android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:maxWidth="50dip"/>
    </LinearLayout>    
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-10T19:44:41.627

该属性对（或不推荐使用`maxWidth`的）宽度没有影响，它们是互斥的。你需要使用.`match_parent``fill_parent``wrap_content`

**此外**，任何只有一个孩子的布局都可能被删除，例如，您可以将当前布局简化为：

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:maxWidth="50dip"/> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-05-09T13:17:25.107

如果有人想要在单个父布局中的组合行为：您可以使用 ConstraintLayout`match_parent`并通过结合.`maxWidth``layout_constraintWidth_max`

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <EditText 
        android:layout_width="0dp"
        android:layout_height="wrap_content"                
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintWidth_max="480dp"/>
</androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-19T10:27:34.697

您可以为不同的屏幕使用不同的布局来实现相同的效果。假设您希望`EditText`填充可用宽度但不超过 480dp。如下定义您的布局：

**布局/my_layout.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"/> 
```

**layout-w480dp/my_layout.xml：（**在这里选择你的最大宽度作为限定符）

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="480dp"
          android:layout_height="wrap_content"/> 
```

# c++ - 在同一内存地址不需要创建对象

> ID：13325405
> 
> 赞同：1
> 
> 时间：2012-11-10T19:37:01.860
> 
> 标签：c++, arrays, pointers, memory

我很久没有使用 C++ 了，现在我需要做一些小“项目”。
我回顾了几个主题，试图为我的问题找到解决方案，但没有结果......

这是“伪代码”（`Pair`是我的课）：

```
Pair** pairs; 
```

我从输入中获取表的大小并创建指针表：

```
pairs = new Pair*[size]; 
```

我有一个循环，它创建一些对象并将其引用放入指针表中。或多或少：

```
while (...)
{
    Pair pair(...); // calling constructor, creating object type of Pair.
    pairs[i] = &pair;
    i++;
} 
```

**问题**是每次都是相同的`&pair`数字（循环的每一步）。假设第一个创建的对象的地址是 1234。因此，循环中的每一步都会在 1234 处覆盖该对象。因此每个指针指向`pairs`相同的地址-> 相同的对象。我想强制在内存中的新位置创建这个对象。

我一直在尝试将这些对象放入其他表中，然后将它们的引用传递给指针表：

```
Pair* clearPairs = new Pair[size];
while (...)
{
    clearPairs[i] = Pair(...);
    pairs[i] = &clearPairs[i];
    i++;
} 
```

但问题仍然存在。

任何提示？，我的代码（或思考）中的错误/错误？我应该实现一些“复制构造函数”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:41:02.053

```
while (...)
{
    Pair pair(...); // calling constructor, creating object type of Pair.
    pairs[i] = &pair;
    i++;
} 
```

`pair`分配有自动存储持续时间，并在每次循环迭代时超出范围。您正在保存指向无效对象（其中一堆）的指针。

如果你*真的*需要指针，你应该使用智能指针的集合（当对象不能被复制或副本很昂贵时这是真的），这可能根本没有必要。试试这个：

```
vector<Pair> pairs;
// and if you need pointers...
vector<unique_ptr<Pair>> pairs;

while(whatever) {
    pairs.push_back(Pair(...));
    // or...
    pairs.push_back(unique_ptr<Pair>(new Pair(...)));
} 
```

# templates - joomla 2.5 tp=1 显示“对象参数”而不是真实的位置名称

> ID：13325408
> 
> 赞同：0
> 
> 时间：2012-11-10T19:37:16.800
> 
> 标签：templates, positioning, joomla2.5, template-engine

我见过不同的模板，它们不允许我们看到他们的职位名称。当我添加`?tp=1`到网站链接时，它们会显示`[object arguments]`。

我认为这些框架使用 T3 模板引擎（？）。【T3是什么，对我来说无所谓】

**我不是在寻找这些答案：**

*   请告诉我模板名称是什么？访问其官方演示网址（例如[http://joomla17-templates.joomlart.com/ja_elastica/?tp=1](http://joomla17-templates.joomlart.com/ja_elastica/?tp=1)或其他演示）**这不是一个真正的答案！**
*   更新您的模板！这也不是一个有效的答案。模板升级无关紧要。因为[我可以在链接中看到有人更新了他的模板，但没有奏效](http://www.joomlart.com/forums/archive/index.php/t-68263.html)。

* * *

**更新**

不幸的是，模板的官方演示也有问题：[http ://demo.bowthemes.com/bt-arise/?tp=1](http://demo.bowthemes.com/bt-arise/?tp=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:52:22.723

你的第二个链接有答案 -

> 我启用了那个插件，“系统 - 语言代码”，你瞧，模板模块的位置又回来了。

我会从这个开始，因为 T3 框架肯定会显示模块位置。

# c++ - 如何在C中打印字符数组中的所有值

> ID：13325410
> 
> 赞同：0
> 
> 时间：2012-11-10T19:37:28.870
> 
> 标签：c++, arrays, char, cout

您能帮我解释一下为什么这段代码没有按预期打印 '*' 字符的 char 数组吗？

```
int n = 10;
char *cs = (char*) calloc(n + 1, sizeof(char));
for (int i = 0; i < n; i++) {
    cs[i] = '*';
}
cout << cs << endl; 
```

谷歌搜索了很多，但在任何地方都没有发现同样的问题..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:50:37.820

我在工作室中编写了相同的代码，对我来说它工作正常。给予`*`作为输出。

```
int main()
{
    int n=10;
    char *cs = (char*) calloc(n+1, sizeof(char));
    for (int i=0; i<n; i++) {
        cs[i] = '*';
    }
    cout << cs << endl;
    return 0;
} 
```

# php - PHP, OOP : 标头已发送

> ID：13325411
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:37:31.197
> 
> 标签：php

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我 100% 确定在此脚本中设置标题之前我没有输出任何文本，但我收到此错误。

```
warning: Cannot modify header information - headers already sent by (output started at /home/x/public_html/index.php:4) in /home/x/public_html/core/functions.php on line 25 
```

Index.php 顶部

```
<?php
require_once "core/functions.php";
$actions = new Actions();
$actions->isUserLogged($_SERVER['REMOTE_ADDR'], $_COOKIE['cData']);
?>
<!DOCTYPE html>... 
```

核心/functions.php

```
<?php

include_once('connection.php');

class Actions {

private $db;

public function __construct() {

    $this->db = new Connection();
    $this->db = $this->db->dbConnect( mysql info );

}

public function isUserLogged($currentIP, $cData) {
    if(!empty($cData)){ //if cookie is not empty
        $getData = $this->db->query("SELECT loggedIP FROM registery WHERE session='".$cData."'")->fetchColumn(); //finding entry in registery.
        $loggedIP = $getData['loggedIP'];
        if($currentIP == $loggedIP) {return true;} //if that loggedIP and currentIP matces -> proceed.
         else { return setcookie('cData','',time()-31536000); //this is where the error points.
          return header("location: login.php");} // else unset cookie and redirect to login.

    } else {    
         return header("location: login.php");
    }

    }   
}
?> 
```

连接.php

```
<?php
error_reporting(E_ALL);

class Connection {

public function dbConnect($server, $username, $password, $db){

    return new PDO('mysql:host='.$server.';dbname='.$db, $username, $password);

}

}

?> 
```

如果有人愿意花一些时间来找出我的错误，我会很感激！

**解决方案**Baba 建议使用 "ini_set("display_errors","On");" 这神奇地解决了这个问题......我想知道为什么大家都喜欢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:42:23.503

不确定，但您正在处理`connection.php`

看

```
 <?php
^---------------------------   Most likely the cause  
error_reporting(E_ALL); 
```

您还应该尝试显示 PHP 错误以防它被关闭

```
error_reporting(E_ALL);
ini_set("display_errors","On"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:06:43.520

这可能是一个[UTF-8 字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)。如果是这种情况，请将编码更改为“utf-8 without BOM”。

**编辑：** 这里的空间怎么样（connection.php，最后一行）：

```
 ?> 
    --^------- there 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:11:16.567

这有时是个很大的问题。我有几次，并决定改用javascript。例子：

```
echo '<script type="text/javascript">window.location ="login.php";</script>'; 
```

也许这也对您有用，尽管它不是您正在寻找的解决方案。

希望这可以帮助。

# jsp - $.ajax 函数不工作时 用来

> ID：13325412
> 
> 赞同：1
> 
> 时间：2012-11-10T19:37:36.577
> 
> 标签：jsp, jquery, spring-mvc, jsp-tags

我正在学习ajax。请找到以下代码，

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
         pageEncoding="ISO-8859-1"%>
     <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org         /TR/html4/loose.dtd">
     <html>
     <head>
     <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
     <title>Insert title here</title>
     <script type="text/javascript" src="/MyApp/js/jquery.js"></script>
     <script type="text/javascript">
         function doAjax() {
             alert('yes');
           $.ajax({
             url: 'register.html',
             data: ({name : "me"}),
             success: function(data) {
               $('#time').html(data);
             }
           });
         }
       </script>  
     </head>
     <body>
     <form action="">
     <button id="demo" onclick="doAjax()" title="Button">Get the time!</button>
     <div id="time">
     </div>
     </form>
     </body>
     </html> 
```

此代码对我的 spring 控制器进行成功的 ajax 调用，并且仅当我删除表单标签时才返回数据，否则它不会显示 ajax 消息（也没有错误）。

我检查了日志。如果我删除表单标签，收到的最后一个请求是“register.html”，这是非常正确的。如果我放置表单标签，点击按钮，请求转到“hello.html”，这是包含上述代码的页面。我无法理解这是怎么回事。

我怀疑的一件事是形式正在被提交。但是，如果我没有在单击按钮时触发 sumit 事件，这怎么可能发生。

我需要在这个页面上有表单标签，所以请指教。

下面的控制器功能，

```
 @RequestMapping("/hello")
           public ModelAndView helloWorld() {
           return new ModelAndView("hello", "message", "Spring MVC Demo");
           }

     @RequestMapping(value = "/register", method = RequestMethod.GET)
           public @ResponseBody String registerUser(@RequestParam String name) {
             String result = "Time for registration" + name + " is " + new Date().toString();
             return result;
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:48:24.053

首先，如果您在html表单浏览器中使用按钮标签，可能会被解释为提交请求。这就是为什么您使用不再是 ajax 请求的形式按下按钮的原因。当您呈现主页时，可能会注意到 url 类似于 localhost:8000/home 但在按钮单击之后 url 将是 localhost:8000/home？这表示有一个正常的获取请求

如果您仍然希望按钮在表单内创建 ajax 请求，请执行以下操作：

```
 <script type="text/javascript">
 $(function(){
    $('button').click(function(e){
        e.preventDefault();
        doAjax();
    })
 })

     function doAjax() {
         alert('yes');
       $.ajax({
         url: '/register/',
         data: ({name : "me"}),
         success: function(data) {
           $('#time').html(data);
         }
       });
     }
   </script>  
 </head>
 <body>
    <form action="">
 <button id="demo" title="Button">Get the time!</button>
 </form>
 <div id="time">
 </div> 
```

其次，尝试将 Ajax 函数中的 url 更改为“/register.html/”。注意斜线。因为在某些情况下，jquery 可能会建议将给定的 url 附加到页面的 url。

例如，如果您的页面 url 是 localhost:8000/home。生成的请求可能是 localhost:8000/home/register。因此，在定义 url 时使用斜杠总是一个好主意。

Laslty，尝试使用其他扩展而不是 html，因为 html 通常用于生成静态内容，而用于动态内容的修道院是 htm。它只是一个好的练习休息的惯例是你的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:49:50.420

如果您希望按钮提交表单，请给它一种“提交”。此外，不要为按钮元素使用内联 onclick 处理程序，而是为表单定义一个提交处理程序。

# java - 将 JList 添加到 JPanel

> ID：13325419
> 
> 赞同：2
> 
> 时间：2012-11-10T19:38:40.093
> 
> 标签：java, swing, jframe, jpanel, jlist

我正在尝试将 JList 添加到 JPanel。具体来说，我有两个 JPanel，一个右一个，一个左一个。右边有两个按钮。在左边我想要 JList mySpriteOptions（见下面的代码）。不幸的是，当我运行我的代码时，这个 JList 永远不会出现。我不是挥杆专家（事实上我是一个巨大的新手）所以我不知道为什么会这样。

这是我的代码：

```
 import java.awt.*;
    import java.swing.*

    public class SpriteEditorLauncher extends JFrame {

    private JLabel mySearchBoxLabel;
    private JList mySpriteOptions;
    private JPanel myLeft;
    private JPanel myRight;
    private JScrollPane myScrollPane;
    private JTextField mySearchBox;
    private JButton myNewEditLauncher;
    private JButton myEditLauncher;

    private static final long serialVersionUID = 1L;
    private static final String FONT_TYPE = "Times New Roman";
    private static final int FONT_SIZE = 12;
    private static final int FONT_STYLE = 1;
    private static final Font FONT = new Font(FONT_TYPE, FONT_STYLE, FONT_SIZE);
    private static final int NUMBER_OF_ROWS = 1;
    private static final int NUMBER_OF_COLUMNS = 2;
    private static final int FRAME_WIDTH = 600;
    private static final int FRAME_HEIGHT = 400;

    public SpriteEditorLauncher () {
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        initializeComponents();
        createLayout();
    }

    private void initializeComponents () {
        myLeft = new JPanel();
        myRight = new JPanel();
        myNewEditLauncher = new JButton();
        myEditLauncher = new JButton();
        myScrollPane = new JScrollPane();
        mySpriteOptions = new JList();
        mySearchBox = new JTextField();
        mySearchBoxLabel = new JLabel();

    }

    private void setPanelBorder (JPanel toSetBorderFor) {
        toSetBorderFor.setBorder(BorderFactory
                .createTitledBorder(null, "Options", TitledBorder.DEFAULT_JUSTIFICATION,
                                    TitledBorder.DEFAULT_POSITION, FONT));
    }

    private void setButtonLabel (JButton button, Font font, String label) {
        button.setFont(font);
        button.setText(label);
    }

    private void setFrameLayout () {
        GridLayout myLayout = new GridLayout(NUMBER_OF_ROWS, NUMBER_OF_COLUMNS);
        setLayout (myLayout);
        setPreferredSize(new Dimension(FRAME_WIDTH, FRAME_HEIGHT));
        setResizable(false);
    }

    private void addPanelsToFrame () {
        add(myLeft);
        add(myRight);
    }

    private void addButtonsToPanel (JPanel panel) {
        panel.add(myNewEditLauncher);
        panel.add(myEditLauncher);
    }

    private void createLayout () {

        setFrameLayout();
        setPanelBorder(myRight);
        setButtonLabel(myNewEditLauncher, FONT, "New");
        setButtonLabel(myEditLauncher, FONT, "Edit");

        addPanelsToFrame();

        addButtonsToPanel(myRight);

        mySpriteOptions.setModel(new AbstractListModel() {

            private static final long serialVersionUID = 1L;
            String[] strings = { "Item 1", "Item 2"};

            public int getSize () {
                return strings.length;
            }

            public Object getElementAt (int i) {
                return strings[i];
            }
        });

        myLeft.add(mySpriteOptions);

        myScrollPane.setViewportView(mySpriteOptions);

        mySearchBox.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed (ActionEvent arg0) {
                // TODO Auto-generated method stub

            }
        });

        mySearchBoxLabel.setFont(FONT);
        mySearchBoxLabel.setLabelFor(mySearchBox);
        mySearchBoxLabel.setText("Search:");

        pack();
        setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T19:48:04.323

a 的默认布局`JPanel`是`FlowLayout`.

`FlowLayout`喜欢使用其组件的首选大小来布局它们。

空的默认大小`JList`可能是 0x0，这意味着它永远不会出现。

尝试使用`BorderLayout`( `myRight = new JPanel(new BorderLayout());`) 创建正确的面板并将其添加`JList`到它，包裹在`JScrollPane`...

```
private void addPanelsToFrame () {
    add(myLeft);
    add(new JScrollPane(myRight));
} 
```

看一眼

*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)
*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

了解更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T19:45:01.520

你永远不会添加`myScrollPane`到`JPanel` `myLeft`：

```
myLeft.add(myScrollPane); 
```

虽然您已添加`mySpriteOptions`到`myLeft`，但它也被设置`ViewportView`为`myScrollPane`。

组件只会被绘制在它所附加的*最后一个容器上——所以**只会*出现在 中`JScrollPane`，但这还没有被添加。

现在，不需要此语句：

```
myLeft.add(mySpriteOptions); 
```

# javascript - 在 Chrome 中隐藏网页上的空闲光标

> ID：13325421
> 
> 赞同：3
> 
> 时间：2012-11-10T19:39:00.970
> 
> 标签：javascript, html, google-chrome

有自定义 html5 视频播放器。它具有在全屏模式下空闲时隐藏的控制栏。我也想隐藏一个光标。我尝试将`.cursor = 'none'`样式应用于身体。Chrome 在应用样式后等待鼠标移动。但它在 Firefox 中运行良好。顺便说一下 Youtube flash 播放器隐藏光标，但不是 Youtube html5 播放器。

你可以在这里查看 - [http://jsfiddle.net/xAfUm/1/](http://jsfiddle.net/xAfUm/1/)

我能用它做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:54:18.600

您可能需要将光标设置为透明的 1x1 图像。

您可以事先创建一个透明的 gif

```
document.body.style.cursor = "url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==), pointer"; 
```

或使用画布即时创建一个

```
 var tmpCanvas = document.createElement("canvas");
    tmpCanvas.setAttribute("width",1);
    tmpCanvas.setAttribute("height",1);

    document.body.style.cursor = "url('"+tmpCanvas.toDataURL()+"'), pointer"; 
```

两种解决方案似乎都适用于 Firefox，但 Chrome 仍显示 1x1 黑色像素

（透明GIF无耻地从这个[帖子](https://stackoverflow.com/questions/6018611/smallest-data-uri-image-possible-for-a-transparent-image)偷了）

# php - YII：如果没有可用的图像，显 示不同的图像？

> ID：13325433
> 
> 赞同：1
> 
> 时间：2012-11-10T19:40:44.847
> 
> 标签：php, yii

我正在从数据库中提取帖子，如果某个帖子没有可用的图像，我想显示默认图像。这是我当前的代码：

```
<img alt="" src="<?php echo Yii::app()->baseUrl; ?>/uploads/classifieds/<?php echo ClassifiedImages::getTitleImage ($data->id)->filename; ?>" width="112" height="83" /> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:47:24.857

如果我理解你，而不是

```
<?php echo ClassifiedImages::getTitleImage ($data->id)->filename; ?> 
```

写

```
<?php echo (ClassifiedImages::getTitleImage ($data->id)->filename=="") ? 
"no-picture.jpg" : ClassifiedImages::getTitleImage ($data->id)->filename; ?> 
```

如果文件名是空的，它将被替换为“no-picture.jpg”。

如果你知道的话，你也可以使用 jQuery。

```
$("#yourdivid img").error(function(){
     $(this).html("src","<?php echo Yii::app()->baseUrl; ?>/no-picture.jpg");
}); 
```

# iphone - iOS 编程中的中心地图

> ID：13325434
> 
> 赞同：7
> 
> 时间：2012-11-10T19:40:46.540
> 
> 标签：iphone, objective-c, ios, xcode, maps

我们如何在地图中关注用户。我想让蓝点（用户位置）位于地图的中心，但我还允许用户放大和缩小，然后在几秒钟后放大用户位置。

**我对解决方案的有根据的猜测：**我们检测用户是否在放大或缩小，在三秒没有放大或缩小检测后，我们开始关注用户:)。你的帮助会很棒:)

此代码放大用户位置，但不会延迟放大和缩小：

```
 - (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
              fromLocation:(CLLocation *)oldLocation {

  MKCoordinateRegion userLocation = MKCoordinateRegionMakeWithDistance(newLocation.coordinate, 1500.0, 1500.0); [mapView setRegion:userLocation animated:YES];

    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T20:36:24.187

快速浏览一下文档就会发现其中的魔力。
将`userTrackingMode`地图的 设置为`MKUserTrackingModeFollow`。
见[这里](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)。

* * *

## 更新：

由于您已经更新了问题，因此这是新的答案。
要将地图重新​​定位到用户位置，我建议编写一个简单的辅助方法：

```
- (void)recenterUserLocation:(BOOL)animated{
    MKCoordinateSpan zoomedSpan = MKCoordinateSpanMake(1000, 1000);

    MKCoordinateRegion userRegion = MKCoordinateRegionMake(self.mapView.userLocation.coordinate, zoomedSpan);

    [self.mapView setRegion:userRegion animated:animated];
} 
```

现在，如果用户停止移动地图，您应该在短暂延迟后调用它。您可以`regionDidChange`在 mapView 的委托方法中执行此操作。

但是，如果用户在真正重置地图之前多次更改区域，则如果不锁定重置方法，则会出现问题。因此，如果可以重新定位地图，则制作标志是明智的。就像一个财产`BOOL canRecenter`。

初始化它`YES`并将方法更新`recenterUserLocation`为：

```
- (void)recenterUserLocation:(BOOL)animated{
    MKCoordinateSpan zoomedSpan = MKCoordinateSpanMake(1000, 1000);

    MKCoordinateRegion userRegion = MKCoordinateRegionMake(self.mapView.userLocation.coordinate, zoomedSpan);

    [self.mapView setRegion:userRegion animated:animated];

    self.canRecenter = YES;
} 
```

现在，您可以在用户以任何方式移动地图后安全地调用它，但会有一点延迟：

```
- (void)mapView:(MKMapView *)mMapView regionDidChangeAnimated:(BOOL)animated{
    if (self.canRecenter){
        self.canRecenter = NO;
        [self performSelector:@selector(recenterUserLocation:) withObject:@(animated) afterDelay:3];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:38:52.427

我有同样的问题。我猜的：

1.  如果用户拖动地图，他想留在那个位置。
2.  如果用户什么都不做或重置以显示当前位置，我需要关注用户。

我添加了一个重置​​按钮来显示当前用户位置，如下所示： ![在此处输入图像描述](../Images/eaa2a22f7528fed1fc582e840abac279.png)

在单击重置按钮时，将其更改`needToCenterMap`为`TRUE`

在地图上添加了拖动手势识别器

```
// Map drag handler
    UIPanGestureRecognizer* panRec = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(didDragMap:)];

- (void)didDragMap:(UIGestureRecognizer*)gestureRecognizer {
    if (gestureRecognizer.state == UIGestureRecognizerStateEnded){
        NSLog(@"Map drag ended");
        self.needToCenterMap = FALSE;
    }
} 
```

根据`needToCenterMap`标志在地图上跟随用户

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
if (self.needToCenterMap == TRUE) 
    [mapView setCenterCoordinate:userLocation.location.coordinate animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:57:39.453

我做了一个小例子来展示如何将这项工作委托给 Map SDK。当然，您可以收听位置更改，但 MKUserTrackingModeFollow 会自动为您执行此操作，因此只需一行代码

```
#import <MapKit/MapKit.h>

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    MKMapView *mapView = [[MKMapView alloc] initWithFrame:self.view.frame];

    //Always center the dot and zoom in to an apropriate zoom level when position changes
    [mapView setUserTrackingMode:MKUserTrackingModeFollow];

    //don't let the user drag around the the map -> just zooming enabled
    [mapView setScrollEnabled:NO];

    [self.view addSubview:mapView];
} 
```

然后应用程序看起来像这样： ![带有 TrackingMode 的应用](../Images/507c5fe86c3a18bb5c638a960f0200d1.png) ![应用程序在 TrackingMode 中缩小](../Images/6673bec3d5d01e6551d9175dd99a92da.png)

有关更多信息，请阅读 Apple 文档：http: [//developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T07:53:56.537

这个外壳可以解决问题：`mkMapview.showsUserLocation = YES;`

# php - PHP Facebook登录 - 突然无法正常工作

> ID：13325437
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:41:06.527
> 
> 标签：php, facebook, login

我正在实现一个网站，并实现了一个 facebook 登录（PHP）。突然它不再工作了。当我尝试使用 facebook 登录时，它会在我登录 facebook 时将我重定向到 facebook.com。但是当我没有登录 facebook 时，脚本运行良好。

有人可以帮我吗？该网站的网址是：[http ://beta.noteslib.com/](http://beta.noteslib.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:44:39.560

看来您正在使用旧的身份验证方法。开始阅读[更新的文档](https://developers.facebook.com/docs/concepts/login/)以实施正确的方法。

基本上你可以为你的用户提供两种方法：

1.  使用 JS SDK 进行[客户端身份验证。](https://developers.facebook.com/docs/howtos/login/getting-started/)
2.  带有/或不带有官方[PHP-SDK的](https://developers.facebook.com/docs/reference/php/)[服务器端](https://developers.facebook.com/docs/howtos/login/server-side-login/)身份验证。

# asp.net-mvc - ASP.NET MVC 数据库本地化

> ID：13325438
> 
> 赞同：6
> 
> 时间：2012-11-10T19:41:12.680
> 
> 标签：asp.net-mvc, localization, dependency-injection

我正在开发一个多语言企业网站，我想将本地化存储在数据库中。

我已经阅读了以下非常好的文章，但我个人认为这是一个开销，我可以很容易地实现同样的目标：

[扩展 ASP.NET 2.0 资源提供者模型](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

我已经建立了一些基础，但我不确定我的方法是否合适。基本上我已经创建了一个向 DI 注册的服务。

```
public interface ILocalizedStringProvider
{
    string GetLocalizedString(string key);

    string GetLocalizedString(string key, string deafultValue);
} 
```

我也创建了一个像这样的 Html 助手

```
public static MvcHtmlString LocalizedString(this HtmlHelper helper, string key, string defaultValue)
    {            
        if (string.IsNullOrEmpty(defaultValue)) return new MvcHtmlString("");
        if (string.IsNullOrEmpty(key)) return new MvcHtmlString(defaultValue);

        ILocalizedStringProvider localizedStringProvider = DependencyResolver.Current.GetService<ILocalizedStringProvider>();

        if (localizedStringProvider == null)
        {
            return MvcHtmlString.Create(defaultValue);
        }

        string val = localizedStringProvider.GetLocalizedString(key, defaultValue);

        if (string.IsNullOrEmpty(val))
        {
            return MvcHtmlString.Create(defaultValue);
        }

        return MvcHtmlString.Create(val);
    } 
```

然后从视图中简单地调用助手。

首先，我想知道这种方法是否好，是否不是反模式。

其次，我担心的是这一行：

```
ILocalizedStringProvider localizedStringProvider = DependencyResolver.Current.GetService<ILocalizedStringProvider>(); 
```

使用构造函数注入解决控制器中的服务 ILocalizedStringProvider 并让控制器使用本地化填充 ViewBag 是否更好？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:33:01.293

你可以使用我的 Griffin.MvcContrib 项目。它包含一个现成的 MS SqlServer 实现，用于在数据库中存储本地化。

简介： http: [//www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri](http://www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri)

**行政**

还有一个管理区域，您可以使用它来管理本地化：

![在此处输入图像描述](../Images/f488944de65bb2b10fec8a89fda3dfa6.png)

**SQL Server 设置**

[https://github.com/jgauffin/griffin.mvccontrib/wiki/SqlServer](https://github.com/jgauffin/griffin.mvccontrib/wiki/SqlServer)

**源代码**

该项目在 github 上可用：[https ://github.com/jgauffin/griffin.mvccontrib](https://github.com/jgauffin/griffin.mvccontrib)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-08T10:39:40.813

这是一个非常好的： [http ://west-wind.com/westwind.globalization/](http://west-wind.com/westwind.globalization/)

它提供 ：

*   数据库存储
*   Resx 导入/导出
*   强类型类生成

它通过 Nuget 快速添加到您的项目中，并且您拥有完整的源代码.. 很棒的东西

# javascript - 类型错误，变量未定义

> ID：13325451
> 
> 赞同：1
> 
> 时间：2012-11-10T19:43:23.300
> 
> 标签：javascript

我的代码显然有问题..

```
function match2(string,pattern){
var patternUpper = pattern.toUpperCase(); // Change pattern to uppercase
var stringUpper = string.toUpperCase(); // Change string to uppercase
    for(var i=0;i<stringUpper.length-1;i++){
        if(stringUpper.indexOf(patternUpper.charAt(i))<0)
        return false;
    }
    return true;
} 
```

不知道为什么 Firefox 调试器说“模式未定义”，因为它是在函数中定义的，对吧？

任何帮助深表感谢。

利亚姆

编辑：它也为字符串这样做。如果我注释掉该片段的第二行，则说“字符串未定义”。

match2 在这里被调用：

```
alert(match2("thisisatest","ahtsit")); 
```

结果按预期工作，但我认为这个问题在我的程序中进一步导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:47:26.313

当`"pattern"`参数未定义时，无论在哪个浏览器中，都表示调用该函数有问题，您需要检查调用堆栈，在函数内部执行前一步，看看传递参数时发生了什么。（顺便说一下，不要使用关键字或类名来命名变量，我是指名为的变量`"string"`）

希望能帮助到你。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:46:12.817

仅当您不传递第二个参数或第二个参数未定义时才会发生这种情况

# php - 命名空间和类扩展

> ID：13325454
> 
> 赞同：0
> 
> 时间：2012-11-10T19:43:47.387
> 
> 标签：php, class, namespaces

我试图弄清楚命名空间在 PHP 中是如何工作的，但还没有真正幸运

希望有人能告诉我我在这里做错了什么:)

# 代码

```
require_once 'Vatcode.php';
$Vatcode = new \resource\Vatcode(); 
```

# 增值税代码.php

```
namespace resource;

require_once Ini::get('path/class').'/Resource.php';

class Vatcode extends Resource {
    public function __construct(){
        echo 'works!';
    }
} 
```

# 资源.php

```
namespace resource;

class Resource {

} 
```

# 错误

```
Fatal error:  Class 'resource\Ini' not found in Vatcode.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:52:45.063

这只是名称空间的问题。您的类增值税代码位于命名空间资源中。如果，在您使用的 VatCode 声明文件中，`nameofclas::...`它将`new nameofclass()`尝试获取命名空间资源中的类。如果您想在文档中使用类 Ini，您有两种解决方案：

首先给出完整的限定名称：

```
require \namespace\of\ini\Ini::get('path/class').'/Resource.php'; 
```

第二次在使用 get 方法之前使用“use”keyworld：

```
use \namespace\of\ini\Ini;
require_once Ini::get('path/class').'/Resource.php'; 
```

无论如何，如果 Ini 在“无命名空间”（*全局命名空间*是准确的词）中，您只需要使用我给您的解决方案，但只能使用`\Ini`而不是`\namespace\of\ini\Ini`

# algorithm - 实时数字运算和云存储

> ID：13325457
> 
> 赞同：1
> 
> 时间：2012-11-10T19:44:01.413
> 
> 标签：algorithm, cloud, real-time, cloud-storage

我有一些硬件设备发送一些需要存储在云服务器上的数据，并且我需要对它们进行一些实时处理。

他们发送的数据需要在一些自定义二进制文件中保存数月。随着时间的推移，与每个设备相关的这些文件的大小可能会增加到 10GB。

会有客户端程序（移动/网络）实时查看处理过的数据。

我首选的语言是 C/C++/C#，因为涉及时间敏感的数字运算。

目标是编写可扩展的应用程序，可以在云上监控数以千计的此类设备。

1.  我是否必须预先编写在云上运行的代码（无法理解 Azure / amazon EC2）？我可以编写多线程桌面应用程序然后迁移到云端吗？

2.  我过去曾将消息传递接口 (MPI) 用于集群。我还能使用 MPI 吗？

3.  如果我使用 microsoft azure API，我还能在 Amazon 云上托管我的软件吗？

4.  为了让移动设备与服务器通信，我知道我需要运行 Web 服务。如何将用 C++/C# 编写的桌面程序转换为与客户端对话的 Web 服务？

5.  是否有任何第三部分框架作品或工具可以帮助我完成工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:38:02.970

1.  使用大多数云计算服务，您可以部署现成的服务器并在其上安装您自己的软件。所以，是的，您可以在本地编写和测试您的应用程序，然后在解决所有错误后迁移到云端。 [以下是可用的 EC2 服务器配置](http://aws.amazon.com/ec2/instance-types/)。
2.  我没有尝试过 MPI，但你应该能够在云服务器上运行任何你想要的东西。然而，亚马逊确实提供了简单队列服务，它提供了云中的消息传递。您的软件无需在云中运行即可使用此服务。
3.  我没有使用过 Azure。我怀疑您使用哪些外部服务器进行存储和/或计算是否存在任何限制。但是，将您的云存储和计算资源保留在一个提供商内将降低成本、提高性能并为您提供统一的管理界面和计费系统。
4.  Web 服务器是相当简单的东西。 [看到这个帖子](https://stackoverflow.com/a/738295/1712418)。我花了大约 10 秒钟才找到。
5.  那里有很多第三方软件。更详细地找出您需要什么并提出更具体的问题

# python - 为什么此脚本在输出中打印无关的“无”

> ID：13325458
> 
> 赞同：1
> 
> 时间：2012-11-10T19:44:07.793
> 
> 标签：python, python-2.7

我编写了一个简单的脚本来帮助我更好地理解使用类。它为游戏生成一个随机角色。我定义了对象，然后在该对象上调用一个函数，打印出生成的字符。在打印块的末尾，有一个无关的“无”，我不确定它来自哪里，也不知道为什么要打印。这是示例输出：

```
ted
Strength  : 20
Dexterity : 17
Hit Points: 100
Aura      : 100
Weapon    :  
Spell     :  
Item      :  
Element   :  
--------------------
None 
```

在我的代码中，最后一行显示在“无”的`player.stats()`正`print "-" * 20`上方。这是定义对象的代码：

```
class Player(object):

def __init__(self, name):
    self.name = name
    self.strength = randint(15, 20)
    self.dexterity = randint(15, 20)
    self.hit_points = 100
    self.aura = 100
    self.weapon = " "
    self.spell = " "
    self.item = " "
    self.element = " "

def stats(self):
    print "\n"
    print self.name
    print "Strength  : %d" % self.strength
    print "Dexterity : %d" % self.dexterity
    print "Hit Points: %d" % self.hit_points
    print "Aura      : %d" % self.aura
    print "Weapon    : %s" % self.weapon
    print "Spell      : %s" % self.spell
    print "Item      : %s" % self.item
    print "Element   : %s" % self.element
    print "-" * 20 
```

然后使用以下方法实例化该对象：

```
name = raw_input("Name your character: ")

player = Player(name)
print player.stats() 
```

如有必要，可以[在 Pastebin阅读完整的代码。](http://pastebin.com/3apb6M6t)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T19:45:38.093

```
print player.stats() 
```

是罪魁祸首。`player.stats() == None`

你只想：

```
player.stats() 
```

你最好给你的函数命名`player.printStats()`。

* * *

另一种选择是让它返回一个字符串：

```
def stats(self):
    return '\n'.join([
        self.name
        "Strength  : %d" % self.strength,
        "Dexterity : %d" % self.dexterity,
        "Hit Points: %d" % self.hit_points,
        "Aura      : %d" % self.aura,
        "Weapon    : %s" % self.weapon,
        "Spell     : %s" % self.spell,
        "Item      : %s" % self.item,
        "Element   : %s" % self.element,
        "-" * 20
    ]) 
```

然后`print player.stats()`会按预期行事

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T19:47:08.140

该`stats()`方法不返回任何内容。不返回任何内容的函数的计算结果为`None`. 这是您打印的内容。

所以，不要打印函数的返回值。就叫吧。现在，您应该重命名该函数`printStats()`以明确其作用。然后就这样称呼它：

```
def printStats(self):
    ....

player = Player(name)
player.printStats() 
```

命名是编程中非常重要的一部分。名称选择稍差往往会导致这样的混乱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T19:48:27.243

您打印的返回值`player.stats()`：

```
print player.stats() 
```

但该`.stats()`方法没有返回语句。`None`如果没有给出 return 语句，python 中任何函数或方法的默认返回值为：

```
>>> def foo():
...     pass
...
>>> print foo()
None 
```

`print`要么在方法调用之前删除，要么`stats()`返回一个要打印的字符串，而不是在方法中进行所有打印。

# vba - Word 2010 VBA 粘贴 Excel 图表对象

> ID：13325461
> 
> 赞同：1
> 
> 时间：2012-11-10T19:44:33.330
> 
> 标签：vba, charts, ms-word

我有一些在 Word 2003 中开发的第 3 方代码，但它在 Word 2010 中不起作用。代码应粘贴 Excel.Chart 对象并将其转换为内联形状。

```
Sub PasteChartAsInteractive(chart As Excel.chart)
Dim myShape As Shape

chart.ChartArea.Copy
Selection.Style = ActiveDocument.Styles("Normal")
Selection.ParagraphFormat.Alignment = wdAlignParagraphCenter
Selection.PasteAndFormat (wdChart)

Set myShape = Selection.Paragraphs(1).range.InlineShapes(1).ConvertToShape
myShape.ConvertToInlineShape
... 
```

起初，该`PasteAndFormat`行引发了一条空的错误消息。

然后我试图用

```
Selection.PasteSpecial Link:=False, DataType:=wdPasteOLEObject, Placement _
    :=wdInLine, DisplayAsIcon:=False 
```

它引发了另一个错误，说`System Error &H80004005 (-2147467259). Unspecified error`. 但在这种情况下，图表实际上会粘贴到 Word 中。

有人知道导致问题的原因以及应该如何解决？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:57:38.283

我找到了解决方案。首先，我用 PasteSpecial 替换了 PasteAndFormat。然后由于错误没有意义，我试图忽略它。它奏效了！这是代码：

```
Sub PasteChartAsInteractive(chart As Excel.chart)
Dim myShape As Shape

chart.ChartArea.Copy
Selection.Style = ActiveDocument.Styles("Normal")
Selection.ParagraphFormat.Alignment = wdAlignParagraphCenter
' Selection.PasteAndFormat (wdChart)
On Error Resume Next
Selection.PasteSpecial Link:=False, DataType:=wdPasteOLEObject, Placement _
    :=wdInLine, DisplayAsIcon:=False
Set myShape = Selection.Paragraphs(1).range.InlineShapes(1).ConvertToShape
myShape.ConvertToInlineShape
... 
```

# c - typedef struct 导致程序崩溃

> ID：13325470
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:45:41.720
> 
> 标签：c, function, struct, queue, typedef

我正在尝试将结构数组排入队列，但每当我尝试将信息插入其中时它就会崩溃。

结构本身如下所示：

```
typedef struct {
    char first_name;
    char last_name;
    char pers_nbr;
} person; 
```

虽然函数看起来像这样：

```
void enqueue(person pers)
{
    strcpy(queue[tail].first_name, pers.first_name);
    strcpy(queue[tail].last_name, pers.last_name);
    strcpy(queue[tail].pers_nbr, pers.pers_nbr);

    tail = (tail+1) % QUEUE_MAX_SIZE;
    nbr_elem++;
} 
```

我一直在调试，它在第一个 strcpy 时崩溃并返回错误“访问冲突读取位置”。问题似乎与 pers 对象有关。

这是我一直在尝试插入数据的方式：

```
person test;
test.first_name = "John";
test.last_name = "Doe";
test.pers_nbr = "A";
enqueue(test); 
```

是什么导致了这次崩溃，我该如何预防？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:47:27.500

当你声明一个变量时

```
char first_name; 
```

这意味着一个字符有空间

您应该改为使用字符数组来保存字符串

```
char first_name[64]; 
```

和

```
person test;
test.first_name = "John"; 
```

不是初始化字符串或结构的正确方法，要么在声明中进行，要么像以前那样在字符串中手动进行 strcpy：

```
person test = { "John", "Doe", "A" }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T19:48:26.233

结构中的 char 类型应该是 char* 以便存储字符串，否则它们只存储单个字符。此外，应该为他们分配空间。

# objective-c - 如果在旋转期间离屏，UINavigationItem 中的自定义 titleView 不会调整高度

> ID：13325479
> 
> 赞同：1
> 
> 时间：2012-11-10T19:46:41.697
> 
> 标签：objective-c, ios, uinavigationbar, uinavigationitem

`UINavigationItem`我有一个自定义 titleView 用于`autoresizeMask`调整视图的宽度和高度。如果我在设备可见时旋转设备，则会自动调整高度以适应较短的横向导航栏。但是，如果我推送一个新的视图控制器，旋转设备，然后返回到具有自定义 titleView 的那个，它无法识别高度的变化。现在我已将以下代码添加到`viewWillAppear:`方法中

```
- (void) viewWillAppear:(BOOL)animated {

    CGRect frame = self.titleButton.frame;
    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
        frame.size = CGSizeMake(self.navigationController.navigationBar.frame.size.width - 150.0f, 44.0f);
    } else {
        frame.size = CGSizeMake(self.navigationController.navigationBar.frame.size.width - 150.0f, 32.0f);
    }
    self.titleButton.frame = frame;

    ...
} 
```

这解决了这个问题，但我想知道我是否缺少一些属性来让事情自行调整。自定义视图是一个 UIButton：

```
titleButton = [UIButton buttonWithType:UIButtonTypeCustom];
[titleButton setFrame:CGRectMake(0, 0, self.navigationController.navigationBar.frame.size.width - 150.0f, 44.0f)];
[[titleButton titleLabel] setFont:[UIFont boldSystemFontOfSize:18]];
[titleButton setBackgroundImage:navbarButtonImage forState:UIControlStateNormal];
[titleButton setBackgroundImage:navbarButtonPressedImage forState:UIControlStateSelected];
[titleButton setBackgroundImage:navbarButtonPressedImage forState:UIControlStateHighlighted];
titleButton.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
titleButton.autoresizesSubviews = YES; 
```

有没有更好的方法来设置这个视图？

# java - 使用自定义类作为地图中的键

> ID：13325480
> 
> 赞同：1
> 
> 时间：2012-11-10T19:46:46.493
> 
> 标签：java, map

自定义类需要实现哪些方法（如果有）才能用作 a中的**键**`Map`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T19:48:43.620

这取决于您的地图类型：

*   `HashMap`必须提供的钥匙`hashCode`和`equals`
*   需要通过实现`TreeMap`来提供的键，除非地图是用 a 构造的，在这种情况下，键本身没有限制。`compareTo``Comparable<T>``Comparator`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:48:47.647

如果你想使用 TreeMap，你的类必须实现 Comparable。如果您使用的是 HashMap，您将需要一个好的散列函数。

# objective-c - 当被模态视图控制器覆盖时，iOS 6 视图控制器布局在方向更改后不会更新

> ID：13325484
> 
> 赞同：2
> 
> 时间：2012-11-10T19:47:20.887
> 
> 标签：objective-c, ios, ios6

我有一个 iPad 应用程序，它适用于 6 之前的 iOS 版本。

我的根视图控制器显示一个列表，当您单击列表中的任何项目时，根视图控制器会呈现一个模态视图控制器以显示项目的详细信息。

问题是，我的根视图控制器在横向和纵向上有不同的布局，当没有模态视图控制器存在时，它会在方向改变时更新布局完全没有问题，但是当被模态视图控制器覆盖时，它不会更新，这只发生在iOS 6上。所以当你点击一个项目时，模态视图控制器会覆盖整个屏幕，然后你旋转设备，然后关闭模态视图控制器，根视图控制器仍然存在在旧的方向布局中，这真的很烦人。

我很清楚在 iOS 6 中不推荐使用 shouldAutorotateToInterfaceOrientation 的更改，并且由全屏模式视图控制器覆盖的任何视图控制器都不会像在 6 之前的 iOS 中那样接收旋转事件。我做了这个线程中的建议：[iOS 6 旋转问题 - Presented Modal View Controller 没有旋转](https://stackoverflow.com/questions/12554204/ios-6-rotation-issue-no-rotation-from-presented-modal-view-controller)，这是手动将旋转事件从模态视图控制器传递到它后面的视图控制器，但它后面的视图控制器仍然没有更新其布局。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:17:33.740

将所有旋转逻辑移至`viewDidLayoutSubviews`. 就这么简单，您将获得与以前相同的功能。将会发生的是，在您关闭模态视图控制器后，呈现视图将是布局，然后您可以切换到当前方向的适当布局。

# javascript - 如何将 LinkedIn 时间戳解析为人类可读

> ID：13325488
> 
> 赞同：0
> 
> 时间：2012-11-10T19:47:41.407
> 
> 标签：javascript, unix, timestamp, epoch

我看了网上的各种例子；但是，我似乎无法正确解析 LinkedIn 时间戳。

每年。

我在这里想念什么？

1352236307000

```
 function parseTwitterDate(epoch) {
                    var newDate = new Date();
                    newDate.setTime(epoch * 1000);
                    dateString = newDate.toUTCString();
                    return dateString;
                }; 
```

格林威治标准时间 8 月 30 日星期日 44820 04:23:20 发布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:52:11.650

简单地将它作为参数传递给日期构造函数：

```
new Date(1352236307000).toLocaleString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:53:31.533

它以毫秒为单位。只需除以 1000。

# javascript - 当我点击一个子 另一个的 （两者都有 onclick 事件 lietener）我为他们两个运行了 javascript 代码

> ID：13325490
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:47:44.903
> 
> 标签：javascript, html

> **可能重复：**
> [如何防止在单击子元素时触发单击处理程序？](https://stackoverflow.com/questions/6203042/how-do-i-prevent-a-click-handler-being-triggered-when-a-child-element-is-clicked)

```
<ul>
  <li>UNIT 1 - Description of unit
    <ul>
      <li id="0" onclick="alert(this.id)" >Module 1 - Description of module
        <ul>
          <li id="1" onclick="alert(this.id)">Lesson 1: Description of lesson</li>
          <li id="2" onclick="alert(this.id)">Lesson 2: Description of lesson</li>
          <li id="3" onclick="alert(this.id)">Lesson 3: Description of lesson</li>
          <li id="4" onclick="alert(this.id)">Lesson 4: Description of lesson</li>
        </ul>
      </li>
    </ul>
    <ul>
      <li>Module 2 - Description of module
        <ul>
          <li>Lesson 1: Description of lesson</li>
          <li>Lesson 2: Description of lesson</li>
        </ul>
      </li>
    </ul>
    <ul>
      <li>Module 3 - Description of module
        <ul>
          <li>Lesson 1: Description of lesson</li>
          <li>Lesson 2: Description of lesson</li>
          <li>Lesson 3: Description of lesson</li>
        </ul>
      </li>
    </ul>
    <ul>
      <li>Module 4 - Description of module
        <ul>
          <li>Lesson 1: Description of lesson</li>
          <li>Lesson 2: Description of lesson</li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

我有这个简单的html页面。问题是当我点击第 1 课时，我收到两个警报，显示 1 和 2 ??!!! 就像我确实点击了两个。换句话说，当我点击`<li>`另一个的子`<li>`（都有 onclick 事件 lietener）时，我得到了他们两个运行的 javascript 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:48:56.977

您应该使用该`event.stopPropagation()`函数来防止事件冒泡。

这是一个小例子：

```
<div id="div1">
    <div id="div2">123</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​

document.querySelector('#div1').onclick = function()
    {
      alert('div1');  
    };

document.querySelector('#div2').onclick = function(event)
    {
      event.stopPropagation();
      alert('div2');  
    }; 
```

# python - 如何在 while 循环中构造此时序代码以更快地运行？

> ID：13325494
> 
> 赞同：1
> 
> 时间：2012-11-10T19:48:11.297
> 
> 标签：python, time, python-2.7, while-loop

下面的代码非常通用。在它的最终状态下，它将运行一些操作（例如从串行流中采样数据），但我现在的目标是优化循环结构以尽可能快地运行。

目前，在执行 if 语句之前，我的最大频率为 ~100-140。

有没有更有效的方法来运行它？

*注意：我知道 while 循环本质上是空的。当然，它运行速度的限制因素将是我在其中调用的函数。我要确保的是 while 循环中的代码尽可能高效地运行*

```
import time
frequency = float(raw_input("enter sampling frequency in Hz: "))

zero_time=time.time()
i=0

try:
    while True:
        sample_start_time=time.time()
        print 'sample',i, 'taken at', sample_start_time-zero_time
        i+=1
        sample_end_time=time.time()
        if 1/frequency-(sample_end_time-sample_start_time)<0:
            print "sampling frequency is too large...closing"
            break
        time.sleep(1/frequency-(sample_end_time-sample_start_time))
except KeyboardInterrupt:
    pass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:16:40.693

正如评论所说，这个问题对于一个空循环来说有点毫无意义，但这里有一些可能会有所帮助的事情（大致按重要性增加排序）。

1.  `print`从循环中删除语句。这可能是您目前正在做的最昂贵的事情。
2.  调查替代计时器。`time.time`并且`time.sleep`可能无法提供最佳性能，并且该`timeit`模块有一些替代方案。
3.  提前计算你的计时器的周期，而不是`1/frequency`重复做。
4.  只计算一次时间之间的差异（以及该差异与周期之间的差异），而不是每个循环两次。

即使您不想测试您的实际工作案例，您也可能希望在循环中调用一个空函数，这样您就可以看到函数调用开销的成本。在我上面的列表中，它可能需要比 3 和 4 更多的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T20:34:44.160

```
from time import time, sleep
frequency = float(raw_input("enter sampling frequency in Hz: "))
target_freq = 1/frequency

try:
    sampling_rate = target_freq
    while sampling_rate >= target_freq:
        sample_start_time = time()
        # maybe do some stuff here
        sample_end_time = time()
        time_diff = sample_end_time - sample_start_time
        if time_diff < target_freq:
            sleep(target_freq - time_diff)
except KeyboardInterrupt:
    pass 
```

查看 Python[性能提示页面](http://wiki.python.org/moin/PythonSpeed/PerformanceTips)，尤其是关于避免点的部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T20:12:12.390

是的，您的“while 循环”正在尽可能高效地运行。您不能编写比以下更有效的 while 循环：

```
while True:
    # doStuff 
```

# android - 从另一个线程的 JSON 填充 ListView

> ID：13325506
> 
> 赞同：0
> 
> 时间：2012-11-10T19:48:46.890
> 
> 标签：android, android-listview

所以，我从 REST 服务器获取 JSON，我想用它的信息填充 ListView。我所拥有的是：

```
public class MyReservations extends ListActivity {
....
class HTTPAssync implements Runnable {
        public void run () {
               ... //make the requestions and get a valida JSONObject (that has a JSONArray)
               try {
                    JSONObject jsonObject = new JSONObject(payload);
                    reservs = jsonObject.getJSONArray("reservs");
                    try {
                         listView.setAdapter(new JSONAdapter(MyReservations.this, reservs));
                    } 
```

我也创建了一个 JSONAdapter：

```
class JSONAdapter extends BaseAdapter implements ListAdapter {

private final Activity activity;
private final JSONArray jsonArray;
private LayoutInflater mInflater;

public JSONAdapter(Activity activity, JSONArray jsonArray) {
    assert activity != null;
    assert jsonArray != null;

    this.jsonArray = jsonArray;
    this.activity = activity;
}

public int getCount() {

    return jsonArray.length();
}

public JSONObject getItem(int position) {

    return jsonArray.optJSONObject(position);
}

public long getItemId(int position) {
    JSONObject jsonObject = getItem(position);

    return jsonObject.optLong("id");
}

public View getView(int position, View view, ViewGroup parent) {
    if (view == null)
        view = activity.getLayoutInflater().inflate(R.layout.reservation, null);

    JSONObject jsonObject = getItem(position);  
    view = mInflater.inflate(R.layout.reservation, null);

    ((TextView) view.findViewById(R.id.reservationCourse)).setText("MOTHAFOCKA");

    return view;
}
} 
```

但是当我让`new Thread(new HTTPAssync()).start();`我得到`android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.`. 我试图创建一个方法并从中设置适配器，但得到了同样的错误。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:52:42.603

这不是 JSON 的问题。您必须使用[android.os.Handler](http://developer.android.com/reference/android/os/Handler.html)。Handler有两个主要用途：

**(1)**安排消息和可运行文件作为未来某个时间点执行；

**(2)**将要在与您自己的线程不同的线程上执行的操作排入队列。

例子：

```
private Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {

        final Object obj = msg.obj;

        switch (msg.what) {
        case MODE_DELETE:
            this.post(new Runnable() {
                public void run() {             
                    performDelete();
                }
            }); 
            break;
        case ON_SERVICE_STATUS_CHAGED:
            ((LauncherUI)mContext).updateUI();  
            break;
        case ON_DISPLAY_TOAST:
            Toast.makeText(mContext, obj.toString(),Toast.LENGTH_SHORT).show();
            break;
        case GET_USER_INPUT:
            handleUserInputRequest();
            break;
                    // .... 
        default:
            super.handleMessage(msg);
        }
    }
}; 
```

这是一个调用示例：

```
mHandler.sendMessage(mHandler.obtainMessage(ON_DISPLAY_TOAST, "show toast")); 
```

# android - 在 Android 的 ListView 中更改按钮的文本

> ID：13325512
> 
> 赞同：4
> 
> 时间：2012-11-10T19:49:31.480
> 
> 标签：android, listview, button, text

我有一个使用自定义 ArrayAdapter 设置的自定义 ListView。一排由 10 个按钮组成。单击按钮后，我无法更改按钮标题。在 getView 方法中，我正在为我的所有按钮设置一个支架。点击监听器在主要活动中，它工作正常（我认为是这样），我能够获得按钮的参考：

`MyHolder h = (MyHolder) getListView().getAdapter().getView(position, null, null).getTag();

Button b = h.myButton;`

现在当我调用 b.getText() 时，它会给我点击按钮的文本。但是当我尝试时： b.setText("xxx"); 按钮的文字不会改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:55:29.447

我不认为调用：`getListView().getAdapter().getView(position, null, null)`手动实际上会返回现有的 View at `position`。这只会创建一个具有相同数据的*新*视图，这就是为什么您看不到任何更改并且不会收到任何错误的原因。

只需使用 Button 的 OnClickListener 中传递的 View 来更改其自己的文本。

```
public void onClick(View v) {
    Button b = (Button) v;
    b.setText(...);
} 
```

# java - 需要用于文本压缩/解压缩的伪代码

> ID：13325513
> 
> 赞同：-4
> 
> 时间：2012-11-10T19:49:31.933
> 
> 标签：java

说明：你要编写一个简单的文本压缩和解压缩算法，称为 Compress，它使用重复字符的计数来压缩和恢复将文本压缩到原始文本。数据将从文件而不是键盘读取。

输入：aaaaaaaaaaaaaaaaaaAabc 输出：a19A1a1b1c1

在您的程序中，您必须具有以下这两种方法。然后你在你的 main 方法中调用这两个方法来压缩和解压你的输入文本。

公共静态字符串 CompressStr（字符串输入，布尔 debug_sw）

公共静态 String DecompressStr(String input, Boolean debug_sw)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:55:39.280

这就是运行长度编码算法：[http ://en.wikipedia.org/wiki/Run-length_encoding](http://en.wikipedia.org/wiki/Run-length_encoding)

```
 Loop: count = 0
        REPEAT
          get next symbol
          count = count + 1
        UNTIL (symbol unequal to next one)
                output symbol
        IF count > 1
          output count
        GOTO Loop 
```

一些Python代码：

```
# http://acm.zhihua-lai.com

def runlen(s):
    r = ""
    l = len(s)
    if l == 0:
        return ""
    if l == 1:
        return s + "1"
    last = s[0]
    cnt = 1
    i = 1
    while i < l:
        if s[i] == s[i - 1]: # check it is the same letter
            cnt += 1
        else:
            r = r + s[i - 1] + str(cnt) # if not, store the previous data
            cnt = 1
        i += 1
    r = r + s[i - 1] + str(cnt)
    return r

if __name__ == "__main__":
    print runlen("aaabbccccddddd")
    print runlen("a")
    print runlen("")
    print runlen("abcdefg")
    print runlen("eeeeeaaaff") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T19:55:02.700

Java 在标准 API 中有用于此的类：Zip/GZipInputStream 和 Zip/GZipOutputStream。如果您需要压缩数据，请使用它们而不是自己滚动。如果您将此作为学习练习，则最好尝试阅读 Zip 的算法。

# multithreading - 是否可以在 OmniThreadLibrary 中重置/重新初始化管道（或 BackgroundWorker）？

> ID：13325515
> 
> 赞同：1
> 
> 时间：2012-11-10T19:49:55.060
> 
> 标签：multithreading, delphi, delphi-2010, omnithreadlibrary

通过重新初始化，我的意思是**停止正在运行的任务**（或者如果必须的话甚至终止**线程**）并恢复，就好像管道/线程从未初始化/启动一样。

我的代码（我使用的是**delphi 2010，OmniThreadLibrary 3.02**）如下所示：

```
procedure SomeProc();
var
   AFile : TOmniValue;
begin
     APipeline := Parallel.Pipeline.NumTasks(5).Stage(StageProc).Run;

     AFile.CreateNamed(['FileID', FileID, 'FileName', FileName]);
     MyPipeline.Input.Add(AFile);
end;
// --------------- //
procedure StageProc(const Input, Output : IOmniBlockingCollection; const Task : IOmniTask);
begin
    // ...
end; 
```

**我需要这样的东西：**

```
// --------------- //
procedure ResetPipeline();
begin
     // Stop any task running inside StageProc() & reset pipeline, ie.
     KillTasks(pipeline);
     pipeline := nil;
end; 
```

## 笔记

1.  **FWIW，是的，我完全知道这确实是个坏主意！**

2.  我也很清楚，最好的方法是向任务发送*停止信号*并等待它们很好地关闭，并经常检查任务内的停止信号。**对于这个非常特殊的情况，我对此不感兴趣。**

3.  虽然上面的代码只提到了管道，但重置 BackgroundWorker 的解决方案对我来说就足够了。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:08:29.803

***免责声明**：不建议强制终止线程——请不要在家里尝试。*

我相信你可以像这样做你想做的事：

```
GlobalParallelPool.WaitOnTerminate_sec := 0;
GlobalParallelPool.CancelAll; 
```

# java - 在使用装饰器与桥接模式的困境中

> ID：13325517
> 
> 赞同：1
> 
> 时间：2012-11-10T19:50:27.500
> 
> 标签：java, design-patterns, decorator, bridge

我对使用哪种模式来设计以下场景感到困惑，

```
Interface GearBox {
   int upshift();
   int downshift();
   int reverse();
}

AutoGearBox implements GearBox{...}
ManualGearBox implements GearBox{...} 
```

现在我想将 DualClutchGearBox 添加到层次结构中。以前的所有变速箱都是单离合器。我该怎么做呢？

带装饰器 -->

```
DualClutchDecorator implements GearBox{
     DualClutchDecorator(GearBox box){...}
} 
```

带桥 -->

```
GearBox{
   GearBoxImpl impl;
   ....
}

AutoGearBox implements GearBox{...}
ManualGearBox implements GearBox{...}

abstract class GearBoxImpl{}
SingleClutchImpl extends GearBoxImpl{...}
DualClutchImpl extends GearBoxImpl{...} 
```

哪个更好，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:21:30.060

装饰器必须与要装饰的对象的接口相匹配。考虑到这一点，您可以在不违反界面的情况下向您的装饰对象添加额外的行为。请记住，装饰器的接口可以为您的对象提供额外的功能。

另一方面，桥没有这个限制。面向客户端的接口可能不同于底层并提供实现的组件。它在客户端接口和实际实现之间架起了一座桥梁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T21:24:58.557

我不确定我会使用这两种模式中的哪一种。您是否有理由不想只创建第三个具体类？

当您需要动态更改行为时，您可以使用装饰器。我能想到的主要示例之一是 Java 的 InputStreamReader。我可以为我需要的任何情况编写一个经过装饰的阅读器，它们符合相同的界面

```
// I need to read lines from a file
Reader r = new BufferedReader(new InputStreamReader(new FileInputStream(file)));

// Or I want to read lines from a byte array and track the line numbers
Reader r = new LineNumberReader(new InputStreamReader(new ByteArrayInputStream(bytes))); 
```

所以装饰器的想法是我可以通过添加装饰器来改变运行时的行为。根据我的理解，这不是你想要做的。DualClutch 将表现出特定的行为，无需即时更改它。

我也没有从 Bridge 看到一个很好的案例，但我想这取决于你的具体情况。就像我说的，DualClutch 似乎只有静态行为，而汽车要么有，要么没有。似乎一个简单的具体类就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:04:51.753

这取决于。

您的接口是否从驱动程序的角度定义接口？您是否试图抽象出变速箱的共同特征（换档的能力！）？

请记住，自动变速箱和手动变速箱在现实中并没有完全相同的功能，因此无论如何可能不会共享相同的界面（例如，您可以在手动变速箱中直接从第 5 档换到第 3 档，但在大多数情况下不是汽车 - 并且汽车可能具有手动变速箱不需要的降档功能）。

相反，双离合变速箱在接口方面可能与单离合变速箱没有区别，仅在实施上有所不同。

# javascript - jQuery：从另一个元素触发悬停事件

> ID：13325519
> 
> 赞同：31
> 
> 时间：2012-11-10T19:50:46.383
> 
> 标签：javascript, jquery, html, hover, bind

当您将鼠标悬停在 one上`<div>`时，我希望`<a>`页面的单独部分也可以“悬停”。

```
<div class="initiator">
</div>
<div>
   <a class="receiver href="#">Touch the div and I get hovered!</a>
</div> 
```

我试过这个jQuery，但它不会触发`<a>`'悬停CSS。

```
$(".initiator").hover(function(){
   $(".receiver").hover();
   console.log("div was hovered");
}); 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-10T20:09:55.447

尝试这个：

```
$('.initiator').on('mouseenter mouseleave', function(e) {
    $('.receiver').trigger(e.type);
}) 
```

它将为接收者应用与发起者为 mouseenter 和 mouseleave 接收相同的触发器。注意：

```
.hover(over, out) 
```

只是以下的高级变体：

```
.on('mouseenter', over).on('mouseleave', out) 
```

因此使用该信息可以在绑定和触发鼠标事件时更加精确。

如评论中所述，您还可以使用：

```
$('.initiator').hover(function(e) {
    $('.receiver').trigger(e.type);
}) 
```

这里还有更多内容要阅读：http: [//api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T19:57:01.653

您可以执行以下操作：

```
$(".initiator").hover(function(){
   $(".receiver").addClass('hover');
   console.log("div was hovered");
}, function(){
   $(".receiver").removeClass('hover');
}); 
```

现在您可以拥有一个包含 css 规则的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:01:01.030

不确定“悬停”是什么意思，但假设您为`.receiver:hover`伪类定义了一些 CSS，我建议将它们移至单独的 CSS 类`.hover`并使用 jQuery`toggleClass`函数。

这是一个快速示例，当您将鼠标移到 div 上时，链接文本会变为粗体 - [http://jsfiddle.net/Pharaon/h29bh/](http://jsfiddle.net/Pharaon/h29bh/)

```
$(".initiator").hover(function(){
  $(".receiver").toggleClass("hover");
  console.log("div was hovered");
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T19:59:26.470

`hover()``mouseenter`是一个将事件和`mouseleave`事件联系在一起的 jQuery 方法

尝试

```
$(this).find('.receiver').mouseenter() 
```

或者

```
 $(this).find('.receiver').trigger('mouseenter') 
```

`a`但是，将类添加到标签并添加新的 css 规则可能会得到更好的结果。

```
 $(this).find('.receiver').toggleClass('hoverClass') 
```

# java - 我们能不能只用 JAVA 编写像 Nero 这样的刻录软件，... 怎么样？

> ID：13325520
> 
> 赞同：-4
> 
> 时间：2012-11-10T19:50:49.477
> 
> 标签：java

> **可能重复：**
> [读取和写入 DVD/CD - Java](https://stackoverflow.com/questions/8556291/reading-and-writing-to-a-dvd-cd-java)

是否可以仅在 JAVA 中构建/编码像 Nero 这样的刻录软件？... 怎么做？

如果可以的话那就太好了！！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:51:41.570

不能。Java 不能从纯 Java 代码直接访问硬件。您必须使用通过 JNI 调用加载的本机代码。

# iphone - 保存照片时崩溃

> ID：13325521
> 
> 赞同：-1
> 
> 时间：2012-11-10T19:51:14.180
> 
> 标签：iphone, objective-c, uiimage, uiimagepickercontroller, exc-bad-access

`UIImage`保存到相机胶卷时发生奇怪的崩溃。我使用此代码：

```
UIImageWriteToSavedPhotosAlbum (_originalImage, self,  @selector(photoSaved:didFinishSavingWithError:contextInfo:), nil);

-(void)photoSaved:(UIImage*)image didFinishSavingWithError:(NSError*)error contextInfo:(void*)contextInfo {
if(!error){
    NSLog(@"Photo saved to library!");
} else{
    NSLog(@"Saving failed :(");
} 
```

}

这是日志：

```
2012-11-10 20:43:29.868 MyApp[5012:1a303] Photo saved to library! 
```

这是BT：

```
(lldb) bt
* thread #1: tid = 0x1f03, 0x024e509b libobjc.A.dylib`objc_msgSend + 15, stop reason = EXC_BAD_ACCESS (code=1, address=0x3094a576)
frame #0: 0x024e509b libobjc.A.dylib`objc_msgSend + 15
frame #1: 0x01b84a8b PhotoLibrary`-[PLUILibraryViewController updateNavigationItemButtons] + 216
frame #2: 0x01b6f054 PhotoLibrary`-[PLLibraryViewController(OverridePoints) updateInterfaceForHasContentChange] + 867
frame #3: 0x01c3c228 PhotoLibrary`-[PLAbstractLibraryViewController _updateHasContent] + 295
frame #4: 0x01c3c7d0 PhotoLibrary`-[PLAbstractLibraryViewController _updateAlbumsWithNotification:] + 681
frame #5: 0x01c3b870 PhotoLibrary`-[PLAbstractLibraryViewController albumListDidChange:] + 272
frame #6: 0x01b84c5b PhotoLibrary`-[PLUILibraryViewController albumListDidChange:] + 236
frame #7: 0x01525a29 Foundation`__57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 40
frame #8: 0x0267d855 CoreFoundation`___CFXNotificationPost_block_invoke_0 + 85
frame #9: 0x0267d778 CoreFoundation`_CFXNotificationPost + 1976
frame #10: 0x0146a234 Foundation`-[NSNotificationCenter postNotification:] + 121
frame #11: 0x02d217a4 PhotoLibraryServices`-[PLChangeNotificationCenter _postEnqueuedNotifications] + 425
frame #12: 0x02d1f771 PhotoLibraryServices`-[PLChangeNotificationCenter _sendNotificationsForSplitChanges] + 307
frame #13: 0x02d23614 PhotoLibraryServices`-[PLChangeNotificationCenter managedObjectContext:didProcessRemoteContextSave:usingObjectIDs:] + 56
frame #14: 0x02d017cc PhotoLibraryServices`-[PLSharedManagedObjectContext _mergeChangesFromDidSaveDictionary:usingObjectIDs:] + 229
frame #15: 0x03edfd2f CoreData`__+[NSManagedObjectContext(_NSCoreDataSPI) _mergeChangesFromRemoteContextSave:intoContexts:]_block_invoke_4 + 159
frame #16: 0x03e67d03 CoreData`developerSubmittedBlockToNSManagedObjectContextPerform + 99
frame #17: 0x01af18d9 libdispatch.dylib`_dispatch_barrier_sync_f_slow_invoke + 93
frame #18: 0x01af2509 libdispatch.dylib`_dispatch_main_queue_callback_4CF + 353
frame #19: 0x025e9803 CoreFoundation`__CFRunLoopRun + 2003
frame #20: 0x025e8d84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #21: 0x025e8c9b CoreFoundation`CFRunLoopRunInMode + 123
frame #22: 0x02a2d7d8 GraphicsServices`GSEventRunModal + 190
frame #23: 0x02a2d88a GraphicsServices`GSEventRun + 103
frame #24: 0x00b63626 UIKit`UIApplicationMain + 1163
frame #25: 0x000026ca MyApp`main + 170 at main.m:16 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:05:21.137

完全披露：我希望这是有道理的，因为我对 Objective-C 还很陌生，但我最近遇到了类似的问题。`didFinishSavingWithError:contextInfo:`从相机胶卷中选择图像后调用该方法时，我发现我的图像没有被保留。对我有用的是将`withObject:`参数添加到我的方法调用中，如下所示：

`[self performSelector:@selector(image:didFinishSavingWithError:contextInfo:) withObject:_originalImage];`

这样，当该`didFinishSavgngWithError:contextInfo:`方法被调用时，图像被保留在以前没有的地方。同样，我是 Objective-C 的新手，但我希望这会有所帮助……或者至少为您指明正确的方向。如果你能告诉我你的应用程序在什么时候崩溃（即当你调用 imagePicker 时，当你从相机胶卷中选择图像时等），那也会有帮助。

# scala - Scala 的 Metaphone 或 Soundex

> ID：13325525
> 
> 赞同：3
> 
> 时间：2012-11-10T19:51:48.383
> 
> 标签：scala, text-comparison

我发现 Apache 在 Java 中实现了 Soundex 和 Metaphone，但我宁愿只在可能的情况下保留我在 Scala 中使用的文本比较库。谷歌搜索没有让我在 Scala 中找到这些算法中的任何一个。

在最坏的情况下，我可以将这些算法翻译成 Scala，但这并不理想。

[http://commons.apache.org/codec/](http://commons.apache.org/codec/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T20:13:12.443

您正在寻找来自[https://stackoverflow.com/users/554647/rocky-madden](https://stackoverflow.com/users/554647/rocky-madden)的 Stringmetric ：

[https://github.com/rockymadden/stringmetric](https://github.com/rockymadden/stringmetric)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:26:28.687

不回答我自己的问题或任何事情，但一个可行的选择是利用 Java 库并在 scala 中创建一些伴随对象以帮助更适当地公开它们并允许代码更有效地记录自己。

```
//Metaphone companion object for org.apache.commons.codec.language.Metaphone in /lib/commons-codec-1.7
object Metaphone {
  val metaphone = new Metaphone
  metaphone setMaxCodeLen 5

  def encode(str:String) : String = {
    metaphone encode str
  }
} 
```

执行：

```
val str_meta = Metaphone encode "Starbucks" 
```

# redirect - nginx重定向掩码

> ID：13325530
> 
> 赞同：2
> 
> 时间：2012-11-10T19:52:22.823
> 
> 标签：redirect, nginx

我是 nginx 新手，正在尝试解决重定向问题。我正在尝试将网站从运行 Web 应用程序的主机重定向到另一个域。那部分我已经完成了，但我想掩盖它。当它重定向时，我不希望用户知道他们已经去了另一个域。

我已经用域名代替了客户的隐私。但是，它们位于 test.com 的 Linode 上，该 Linode 正在运行位于 sub.test.com 的 Web 应用程序。我想要的只是让访问 test.com 的任何用户重定向到托管在 other.com 上的临时站点，但不暴露域。

以前，有人向我展示了如何做到这一点，但那是很久以前的事了，我不再有可以参考的信息。有人可以帮我吗？我不想暴露测试环境的域。

```
server {
     listen       80;
     server_name  www.test.com test.com www.test.net test.net;

     rewrite      ^ http://other.com/sub redirect;

     location / {
         root     /srv/http/www.test.com;
         index    index.html;
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T21:43:31.530

你不能用*redirect*做到这一点，因为重定向实际上就像告诉浏览器从哪里获取页面，所以你不能掩盖真实的位置。我猜您需要的是*代理*，例如客户端从您的服务器（test.com）请求一些文档，然后您的服务器从其他服务器（other.com）获取文档并将该文档返回给客户端，就好像它是生成的一样在 test.com 上 - 在这种情况下，客户将无法确定文档的实际来源。

这可以通过以下方式完成：

```
server_name test.com;
location / {
    proxy_pass http://other.com;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:36:53.043

如果您希望重定向不更改用户可见的域名，那么您需要通过如下更改重写将其从 301 更改为 302：

```
rewrite ^ http://other.com/sub redirect; 
```

# java - 列表迭代器导致堆分配？

> ID：13325533
> 
> 赞同：7
> 
> 时间：2012-11-10T19:52:50.077
> 
> 标签：java, android

我正在分析我的 android 游戏并惊讶地发现：

```
for(O o : myArrayList)
{
} 
```

创建一堆堆分配。

除了使用数字`i++`for 循环之外，有没有更好的方法来解决这个问题？我可以预先分配我的迭代器或其他东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:59:26.800

这个循环，

```
 for(O o : myArrayList)
     {
     } 
```

转换为：

```
 for(Iterator<O> iter = myArrayList.iterator(); iter.hasNext(); )
     {
        O o = iter.next();
     } 
```

因此，如果您使用此模式，迭代器对象将在堆上分配。

如果你这样写：

```
 O o = null;
     for(Iterator<O> iter = myArrayList.iterator(); iter.hasNext(); )
     {
        o = iter.next();
     } 
```

或者

```
 O o = null;
    Iterator<O> iter = myArrayList.iterator();
    while(iter.hasNext()){
        o = iter.next();
    } 
```

那么我认为迭代中不会有太多的`GC`参与，因为它只涉及现有对象引用的分配。

# xml - What format is expected by the namespaces parameter in SelectSingleNodeNS

> ID：13325541
> 
> 赞同：5
> 
> 时间：2012-11-10T19:54:10.753
> 
> 标签：xml, windows-runtime

Can anyone provide an example of using the [XmlDocument.SelectSingleNodeNS](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.xml.dom.xmldocument.selectsinglenodens.aspx) function for WinRT? I'm unclear what the second parameter is expecting and I can't find an example.

```
public IXmlNode SelectSingleNodeNS(
  string xpath, 
  object namespaces
) 
```

> Contains a string that specifies the namespaces to use in XPath expressions when it is necessary to define new namespaces externally. Namespaces are defined in the XML style, as a space-separated list of namespace declaration attributes. You can use this property to set the default namespace as well.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T07:07:55.630

The namespaces parameter is obviously just a string (although declared as object) that must contain an XML namespace declaration in the form "xmlns:aliasname='namespace'" (the XML style). For example

```
xmlDocument.DocumentElement.SelectNodesNS("cb:person", 
    "xmlns:cb='http://www.addison-wesley.de/codebook'"); 
```

works with an XML document like this:

```
<?xml version="1.0" encoding="utf-8" ?>
<persons xmlns="http://www.addison-wesley.de/codebook">
  <person id="1000">
    <firstname>Zaphod</firstname>
    <lastname>Beeblebrox</lastname>
    <type>Alien</type>
  </person>
...
</persons> 
```

Note that the alias (cb:) was used in the XPath.

If the namespace is not in the XML style you get the infamous COM error E_Fail.

The (poor) documentation of SelectNodesNS says: "Contains a string that specifies namespaces for use in XPath expressions when it is necessary to define new namespaces externally. Namespaces are defined in the XML style, as a space-separated list of namespace declaration attributes. You can use this property to set the default namespace as well."

According to that namespaces must be a string and could contain more than one XML namespace (did not try that yet). Still the question is open why it is an object.

# c# - 带有换行符的消息显示为 html 代码

> ID：13325543
> 
> 赞同：1
> 
> 时间：2012-11-10T19:54:20.880
> 
> 标签：c#, .net, facebook, facebook-c#-sdk

![在此处输入图像描述](../Images/31f8a218d89497ad24d05625e4c383bc.png)

我正在使用以下代码在 facebook 墙/页面上发布多行消息。但它看起来如图所示（这里的文字不同）。这是我的代码。

```
string path = "/me/feed";
string token = fbLoginDialog.FacebookOAuthResult.AccessToken;

dynamic messagePost = new ExpandoObject();
messagePost.message = @"Hello guys!
How are you?
Can you help me on this?";

var fb = new FacebookClient(token);
try { var postId = fb.Post(path, messagePost); }  
catch (Exception ex) { MessageBox.Show(ex.Message); } 
```

我正在使用 Facebook.dll 版本：5.0.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:59:31.167

你试过[Environment.NewLine](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)吗？：

```
messagePost.message = "Hello guys!" + Environment.NewLine + 
                      "How are you?"+ Environment.NewLine +
                      "Can you help me on this?"; 
```

Environment.NewLine 是一个独立于平台的属性，它为所选环境插入新行字符。

或者你的语法有问题，应该是：

```
messagePost.message = @"Hello guys!\r\n How are you?\r\n Can you help me on this?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:35:54.977

我使用 Facebook.6.0.22 让它工作

从这里下载最新的[https://github.com/facebook-csharp-sdk/facebook-winforms-sample](https://github.com/facebook-csharp-sdk/facebook-winforms-sample)

# fstream - 从文件打印行

> ID：13325546
> 
> 赞同：0
> 
> 时间：2012-11-10T19:54:37.180
> 
> 标签：fstream, getline

我正在尝试打印每个文件的第一行，但我认为它输出的是地址。

```
#include <fstream>
#include <iostream>
#include <cstdlib>

using namespace std;

void FirstLineFromFile(ifstream files[], size_t count)
{
    const int BUFSIZE = 511;        
    char buf[BUFSIZE];

    ifstream *end, *start;

    for (start = files, end = files + count; start < end; start++)
    {
        cout << start->getline(buf, sizeof(buf)) << '\n';   
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:58:51.267

流不应该按值传递。此代码按值传递一个流数组。您可以尝试传递一个向量并对其进行交互。

```
void FirstLineFromFile(vector<ifstream*> files) {
    for (int i=0; i<files.size(); ++i) {
        string s;
        getline(*files[i], s);
        cout << s << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:07:46.793

[ifstream->getline](http://www.cplusplus.com/reference/iostream/istream/getline/)不返回字符串作为其返回值。您需要在单独的行中打印出已填充的缓冲区。

```
for (start = files, end = files + count; start < end; start++)
{
    start->getline(buf, sizeof(buf));
    cout << buf << '\n';   
} 
```

# colors - 更改像素颜色

> ID：13325559
> 
> 赞同：0
> 
> 时间：2012-11-10T19:56:38.830
> 
> 标签：colors, pixel

> **可能重复：**
> [图像的选择性颜色](https://stackoverflow.com/questions/13845973/selective-color-of-image)

我正在尝试对图像处理做一些事情。我正在尝试打开图像，然后用户将选择图像的一部分。我发现这个选定部分的平均值是选定的颜色。现在用户将从调色板中选择另一种颜色，我正在尝试用新选择的颜色更改图像的颜色。

更具体一点。如果在带有苹果和橙子的图像中，用户从橙子中选择了一部分，那么我必须将橙子的颜色更改为新颜色。所以，从现在开始，每一个橙色都会有另一种颜色。

我用c#尝试了这个，将RGB转换为HSV，然后我试图保持原始图像的饱和度和亮度，只改变色调值，但它不能正常工作。

关于这个问题的任何想法？

# grails - 当元素的位置在列表中更改时，grails 自动提交触发更新查询

> ID：13325560
> 
> 赞同：-2
> 
> 时间：2012-11-10T19:56:39.000
> 
> 标签：grails, arraylist, autocommit

我有一个场景，我需要将一个对象移动到数组列表的开头。

现在我有这样的东西

```
List a = [obj1, obj2, obj3, obj4, obj5, obj6, obj7] 
```

现在将 obj4 移动到列表的开头，我将它从列表中删除，如下所示

```
a.remove(obj4)
a.add(obj4) 
```

然后反转集合

```
Collections.reverse(a); 
```

当我这样做时，grails 会自动触发一些对象的更新查询

我尝试过的另一种方法是创建一个新列表，然后添加这样的元素

```
def b = []
b.add(obj4)

a.each{
b.add(it);
} 
```

但在这种情况下，多个更新查询被触发，我根本没有触及对象。

请帮我调试一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:55:28.960

好吧，我做了很多努力，终于找到了解决方法，不知何故版本（grails默认提供）正在更新，这就是它触发更新查询的原因，禁用grails版本控制为我解决了这个问题，希望有帮助某人

# jquery - 动画后的同位素重新布局

> ID：13325561
> 
> 赞同：0
> 
> 时间：2012-11-10T19:56:51.153
> 
> 标签：jquery, jquery-animate, jquery-isotope

我正在尝试将元素设置为新的高度和宽度，然后让同位素重新布局所有元素。有一个演示，我正在尝试修改它。它几乎可以工作，动画发生但没有进行任何调整，然后如果您再次单击任何元素，则会进行调整。我希望在动画之后进行调整。

这是我正在尝试的代码和演示：http: [//jsbin.com/ifojiw/5/edit](http://jsbin.com/ifojiw/5/edit)

JS：

```
$(function(){

  var $container = $('#container');

  $container.isotope({
    itemSelector: '.element',
    masonry : {
      columnWidth : 120
    }
  });

  // change size of clicked element

  $container.delegate( '.element', 'click', function(){
    $(this).animate({
  "width": 400,
  "height":300
}, 200 );

    $container.isotope('reLayout');
  });

}); 
```

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:06:47.457

使用完整的：动画选项来启动重新布局。

```
$(this).animate({
  "width": 400,
  "height":300
}, { 
  duration: 200, 
  complete: function(){ $container.isotope('reLayout'); }
}); 
```

# linux - 如何还原二进制转储文件？

> ID：13325562
> 
> 赞同：0
> 
> 时间：2012-11-10T19:56:52.043
> 
> 标签：linux, binary, dump

二进制转储文件类似于十六进制转储文件，只是它是二进制形式而不是十六进制

现在我有一个二进制转储文件，如下所示：

```
01101110 01101100 01000001 01000001 01000001 00101011 00110001 01011010
01001000 00110100 01110011 01001001 01000001 01000011 01001010 01001011
... 
```

而且我知道原始文件是一个普通的文本文件，那么我该如何恢复或从转储文件中恢复它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:01:55.623

基于：[http ://www.unix.com/programming/8680-binary-text-format-conversion.html](http://www.unix.com/programming/8680-binary-text-format-conversion.html)

听起来像是`uuencode`你的朋友 :) 我检查了它，在我的 Fedora 17 包上调用：`perl-Convert-UU`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:05:23.517

你可以使用python，像这样：

```
import re
f = open('dump', 'r')
token= re.split(r'[ \n]', f.read())
map (lambda (t):  chr(int(t, 2)), token) 
```

# android - ActionBarSherlock - 通过单击其他选项卡来选择选项卡

> ID：13325568
> 
> 赞同：2
> 
> 时间：2012-11-10T19:58:05.420
> 
> 标签：android, actionbarsherlock

我有一个带有 3 个选项卡和一个按钮的示例。

```
public class MainActivity extends SherlockActivity implements TabListener {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    setContentView(R.layout.activity_main);
    addTab("1", 0, false);
    addTab("2", 1, false);
    addTab("3", 2, false);
    Button cmdClick = (Button) findViewById(R.id.cmdClick);
    cmdClick.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            getSupportActionBar().setSelectedNavigationItem(0);             
        }
    });

}

private void addTab(String tabTitle, int position, boolean setSelected) {
    ActionBar.Tab tab = getSupportActionBar().newTab();
    tab.setText(tabTitle);
    tab.setTabListener(this);
    getSupportActionBar().addTab(tab, position, setSelected);
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    Log.d("example", "Selected " + tab.getPosition());
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    Log.d("example", "Unselected " + tab.getPosition());
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    Log.d("example", "Reselected " + tab.getPosition());
} 
```

}

当我单击按钮时，它会自动选择第一个选项卡。每当我单击第二个或第三个选项卡时，我想自动选择第一个选项卡。我试过这样

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    Log.d("example", "Selected " + tab.getPosition());
    getSupportActionBar().setSelectedNavigationItem(0);
} 
```

但它不起作用。有任何想法吗？

谢谢。

编辑：

也许这个例子没有任何意义，但这只是我正在尝试做的一个简化例子。我希望默认有 2 个标签，一个标题为“1”，第二个标题为“+”。当用户选择“+”选项卡时，我想创建标题为“2”的新选项卡（在选项卡“1”和“+”之间）并自动选择选项卡“2”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:56:42.180

首先，我想劝阻这种行为。这会让您的用户感到非常困惑，坦率地说没有任何意义。

也就是说，我尝试破解它，但它似乎并不那么容易做到。我做了以下工作：

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if(tab.getPosition() == 0) {
                int tabs = mActivity.getSupportActionBar().getTabCount();
                if(tabs > 3) {
                    ActionBar.Tab test = mActivity.getSupportActionBar().getTabAt(2);
                    test.select();
                    return;
                }
            } 
```

**编辑：**

对于您描述的行为，我认为通过创建自己的选项卡来实现它会容易得多。您可以使用单选按钮和/或按钮轻松实现它。

现在这会导致选项卡指示器仍然指向旧选项卡，但里面的片段更新为选定的一个 =/ 所以不完全在那里......

# r - 通过 lapply(FileList, read.xls) 读取数据时指定列类

> ID：13325570
> 
> 赞同：0
> 
> 时间：2012-11-10T19:58:22.977
> 
> 标签：r, lapply, read.table

我的问题是关于在读取来自许多文件的数据时如何为各种列指定类。更具体地说，我一次上传 1000 个 .xlsx 文件，并使用包`read.xls()`中的函数将它们转换为 .csv 文件`gdata`。

我的方法如下：

```
Myfiles<-list.files() # lists all files in working directory (which contains data files)
library(gdata)
Mylist <- lapply(Myfiles, read.xls, header=T,
    perl="C:/Users/A/PERL/perl/bin/perl.exe",
    sheet=1,
    method="csv",
    skip=1,
    as.is=1) 
```

我很抱歉没有提供一个可行的例子。我不确定如何解决这个问题。

所有 .xlsx 文件都具有相同的标题和设置，但其中的数据帧中相应列的类`Mylist`并不完全相同。 **有没有办法在我使用****的方法中指定类？`lapply()`** 我知道您可以扩展 to 的功能，`read.table()`但`read.xls()`我还没有弄清楚如何在`lapply`调用中正确指定列类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:00:12.733

这一切都在 Gabor 的评论中，但要把这个放在床上：

```
lapply(Myfiles, read.xls, colClasses = c("character", "numeric", "factor"), header=T) 
```

# php - 如何将数组从函数返回到主脚本

> ID：13325574
> 
> 赞同：0
> 
> 时间：2012-11-10T19:59:05.003
> 
> 标签：php, arrays

我编写了以下代码以查找添加到三个不同文件夹中的最新文件。我已将文件夹的目录存储在一个名为 path 的数组中。我还将最新文件的名称存储在另一个数组中。

```
$path[0] = "/Applications/MAMP/htdocs/php_test/check";
$path[1] = "/Applications/MAMP/htdocs/php_test/check2";
$path[2] = "/Applications/MAMP/htdocs/php_test/check3";

for ($i=0; $i<=2; $i++){

$path_last = $path[$i]; // set the path
$latest_ctime = 0;
$latest_filename = '';    

 $d = dir($path_last);
while (false !== ($entry = $d->read())) {
  $filepath = "{$path_last}/{$entry}";
  if (is_file($filepath) && filectime($filepath) > $latest_ctime) {
$latest_ctime = filectime($filepath);
$latest_filename = $entry;
$array[$i] = $latest_filename ; // assign the names of the latest files in an array.
   }
  } 
```

一切正常，但现在我尝试将相同的代码放在一个函数中并在我的主脚本中调用它。我使用此代码来调用它：

```
 include 'last_file.php'; // Include the function last_file
   $last_file = last_file();  // assign to the function a variable and call the function 
```

我不确定这是否正确。我想要做的是在我的主脚本中返回数组。我希望这里清楚我要解释的内容。感谢：D。

这是 last_file 函数：

```
 function last_file(){

        for ($i=0; $i<=2; $i++){

     $path_last = $path[$i]; // set the path
      $latest_ctime = 0;
       $latest_filename = '';    

      $d = dir($path_last);
     while (false !== ($entry = $d->read())) {
      $filepath = "{$path_last}/{$entry}";
      // could do also other checks than just checking whether the entry is a file
       if (is_file($filepath) && filectime($filepath) > $latest_ctime) {
        $latest_ctime = filectime($filepath);
        $latest_filename = $entry;
     $array[$i] = $latest_filename ; // assign the names of the latest files in an   array.
        }
      }

    return $array;

      }//end loop
      }//end function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:05:52.610

您将*函数*与*文件*混淆了。您的代码放在*文件*中。在这些文件中，您可以定义*函数*：

```
<?php
// This is inside last_file.php

function someFunction {
    // Do stuff.
} 
```

要`someFunction()`在另一个文件中使用，您首先包含`last_file.php`然后调用`someFunction()`：

```
<?php
// This is inside some other file.

include 'last_file.php';

someFunction(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:04:53.880

如果你把它放在一个函数中，你需要像这样返回它。

```
function func_name()
{
$path[0] = "/Applications/MAMP/htdocs/php_test/check";
$path[1] = "/Applications/MAMP/htdocs/php_test/check2";
$path[2] = "/Applications/MAMP/htdocs/php_test/check3";

for ($i=0; $i<=2; $i++){

$path_last = $path[$i]; // set the path
$latest_ctime = 0;
$latest_filename = '';    

 $d = dir($path_last);
while (false !== ($entry = $d->read())) {
  $filepath = "{$path_last}/{$entry}";
  if (is_file($filepath) && filectime($filepath) > $latest_ctime) {
$latest_ctime = filectime($filepath);
$latest_filename = $entry;
$array[$i] = $latest_filename ; // assign the names of the latest files in an array.
return $array;
} 
```

然后，当您调用该函数并将其分配给变量时，您将获得 $array 的内容

```
$contentsFromFunction = func_name(); 
```

# css - 另一个 CSS 媒体查询实例在桌面上正常，但在移动设备上不行

> ID：13325581
> 
> 赞同：1
> 
> 时间：2012-11-10T19:59:41.447
> 
> 标签：css, opera, media-queries

我对 CSS 世界是全新的，更不用说媒体查询了，所以任何帮助都会非常感激！

我正在为学校做一项任务，我们必须测试我们的媒体查询并为各种设备尺寸提供不同的样式表。我想我基本上遇到了与这篇文章中讨论的问题相同的问题：[Media Queries - Mobile vs Desktop Browser](https://stackoverflow.com/questions/13029905/media-queries-mobile-vs-desktop-browser)，但我不清楚该评论者是如何解决他们的问题的。

我认为这可能是错误所在的相关编码？：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--container div tag-->

<!-- Low res -->
<link href="colors2.css" rel="stylesheet" type="text/css" media="only screen and (min-width: 128px)" />
<!-- Mid res -->
<link href="colors3.css" rel="stylesheet" type="text/css" media="only screen and (min-width: 176px)" />
<!-- High res -->
<link href="colors4.css" rel="stylesheet" type="text/css" media="only screen and (min-width: 240px)" />
<!-- Touch -->
<link href="colors5.css" rel="stylesheet" type="text/css" media="only screen and (min-width: 320px)" /> 
```

这些查询在桌面浏览器上工作，但是当我在 Opera Mobile Emulator 上以（我认为是）正确的屏幕分辨率启动页面时，它们都采用默认的最小宽度 320px 样式。我也尝试将“，屏幕和（最小设备宽度：”）添加到标签中，但由于某种原因，两者都取消了整个事情，我最终在白屏上得到了我的基本 HTML。我'也尝试过@media 的事情，然后我在下面发布样式，但似乎 Dreamweaver 6 拒绝它们（？？？）因为它们以栗色突出显示，而且我再次得到白色背景。

所以......我会非常非常感谢任何帮助！我还应该提到，非常小的最小宽度是作业的一部分。我个人认为它们都太小了！非常感谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:13:21.580

Opera Mobile Emulator 的工作方式与真实应用程序大不相同。我建议您在移动设备上实时测试该网站。

# sql - PostgreSQL MAX 和 GROUP BY

> ID：13325583
> 
> 赞同：64
> 
> 时间：2012-11-10T20:00:01.523
> 
> 标签：sql, postgresql, group-by, max, greatest-n-per-group

我有一张桌子，里面有`id`,`year`和`count`。

我想获取`MAX(count)`每个`id`并在它发生时保留`year`它，所以我进行了以下查询：

```
SELECT id, year, MAX(count)
FROM table
GROUP BY id; 
```

不幸的是，它给了我一个错误：

> 错误：列“table.year”必须出现在 GROUP BY 子句中或在聚合函数中使用

所以我尝试：

```
SELECT id, year, MAX(count)
FROM table
GROUP BY id, year; 
```

但是，它不这样做`MAX(count)`，它只是按原样显示表格。我想是因为当按`year`and分组时`id`，它会获得该`id`特定年份的最大值。

那么，我该如何编写该查询？我想知道发生这种情况`id`的`MAX(count)`年份和年份。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-11T02:08:43.147

最短（也可能是最快）的查询是 with ，它是 SQL 标准子句[**`DISTINCT ON`**](https://www.postgresql.org/docs/current/sql-select.html#SQL-DISTINCT)的 PostgreSQL 扩展：`DISTINCT`

```
SELECT DISTINCT ON (1)
       id, count, year
FROM   tbl
ORDER  BY 1, 2 DESC, 3; 
```

数字指的是`SELECT`列表中的顺序位置。为了清楚起见，您可以拼出列名：

```
SELECT DISTINCT ON (id)
       id, count, year
FROM   tbl
ORDER  BY id, count DESC, year; 
```

结果由`id`etc. 订购，这可能会或可能不会受到欢迎。在任何情况下，它都比“未定义”要好。

它还以明确定义的方式打破联系（当多个年份共享相同的最大计数时）：选择最早的年份。如果你不介意，`year`从`ORDER BY`. 或者用 选择最近的一年`year DESC`。

对于per的***许多***`id`行，其他查询技术（快得多）。看：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)
*   [优化 GROUP BY 查询以检索每个用户的最新行](https://stackoverflow.com/questions/25536422/optimize-group-by-query-to-retrieve-latest-record-per-user/25536748#25536748)

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-11-10T20:15:16.103

```
select *
from (
  select id, 
         year,
         thing,
         max(thing) over (partition by id) as max_thing
  from the_table
) t
where thing = max_thing 
```

或者：

```
select t1.id,
       t1.year,
       t1.thing
from the_table t1
where t1.thing = (select max(t2.thing) 
                  from the_table t2
                  where t2.id = t1.id); 
```

或者

```
select t1.id,
       t1.year,
       t1.thing
from the_table t1
  join ( 
    select id, max(t2.thing) as max_thing
    from the_table t2
    group by id
  ) t on t.id = t1.id and t.max_thing = t1.thing 
```

或（与前面的相同，但符号不同）

```
with max_stuff as (
  select id, max(t2.thing) as max_thing
  from the_table t2
  group by id
) 
select t1.id, 
       t1.year,
       t1.thing
from the_table t1
  join max_stuff t2 
    on t1.id = t2.id 
   and t1.thing = t2.max_thing 
```

# c# - 使用一个 Windows 窗体 - Visual Studios c#

> ID：13325585
> 
> 赞同：1
> 
> 时间：2012-11-10T20:00:23.270
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio

我正在使用 Visual Studios 上的 Windows 窗体制作多项选择测试应用程序。当用户回答一个问题时，他们将单击下一步以继续下一个问题。我可以使用单个窗口框架来显示我所有的问题吗？当我在一个以上的窗体上执行此操作时，我必须这样做`this.Hide()`，然后`.Show()`是另一个窗体。我这样做没有问题，但是当它隐藏并显示其他窗口时，它并没有在完​​全相同的位置打开，它一直在移动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:03:39.160

您可以创建一个显示问题和多项选择答案的 UserControl。当用户单击 Next 按钮时，您从表单的 Controls 集合中删除 UserControl，创建自定义 UserControl 的新实例，其中包含下一个问题的详细信息，然后将新实例添加到表单的 Controls 集合中。这种结构将允许您在单个表单上执行应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:03:48.023

您可以使用向导。

这里有两个链接：

[http://www.codeproject.com/Articles/18674/A-Simple-Wizard-Control-for-Net-2-0-with-Full-Desi](http://www.codeproject.com/Articles/18674/A-Simple-Wizard-Control-for-Net-2-0-with-Full-Desi)

将此库添加到工具箱：

1.  右键单击工具箱并从上下文菜单中选择“添加选项卡”。
2.  为新创建的选项卡指定名称，例如“向导”。
3.  激活选项卡，右键单击它并为上下文菜单选择“选择项目...”。
4.  现在浏览到程序集“WizardBase.dll”所在的文件夹并选择它。

[http://winformswizard.codeplex.com/](http://winformswizard.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:38:57.680

我最好建议您使用 Panel form 工具箱来处理多个表单。多选题会更好。

然后对于每个面板使用属性 visible 设置为 True 或 false 取决于您要导航的面板。

请参阅此内容以了解更多详细信息 [http://www.youtube.com/watch?v=CDOXzz_0gYE&feature=related](http://www.youtube.com/watch?v=CDOXzz_0gYE&feature=related)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T11:15:52.293

越简单越好。最简单的方法是制作一个面板（在一个窗口中），然后在该面板中添加带有您的问题和答案的所有选项的标签。然后单击“下一步”按钮，一次更改所有标签的文本。

至于您在屏幕上同一位置打开不同窗口的问题，请将所有窗体的**DefaultPosition**属性更改为 CenterScreen 或 CenterParent。

# javascript - 每 x 秒重复一次代码，但不是 if [在此处插入检查]

> ID：13325586
> 
> 赞同：1
> 
> 时间：2012-11-10T20:00:29.897
> 
> 标签：javascript, jquery

这是[这个问题](https://stackoverflow.com/questions/13304471/javascript-get-code-to-run-every-minute)的后续，在那里我发现了如何让代码每 x 秒重复一次。是否有可能举办一个可以改变这一点的事件？即我有一个复选框，用于控制是否重复，所以我想我需要这样的东西：

```
$(checkbox).bind("change", function() {
    switch(whether if it is ticked or not) {
        case [ticked]:
            // Make the code repeat, while preserving the ability to stop it repeating
        case [unticked]:
            // Make the code stop repeating, while preserving the ability to start again
    }
}); 
```

我不知道我可以在`case`s 中放什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:03:00.550

您可以通过将 setInterval 函数分配给变量来实现。

```
var interval = setInterval(function() {  }, 1000); 
```

然后你可以停止 setInterval

```
clearInterval(interval); 
```

ps 要开始您的间隔，您需要`var interval = setInterval(function() { }, 1000);`再次调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:08:56.277

您可以停止和开始间隔：

```
var timer;

function start() {
  timer = window.setInterval(function(){
    // do something
  }, 1000);
}

function stop() {
  window.clearInterval(timer);
}

start();

$(checkbox).bind("change", function() {
  if ($(this).is(':checked')) {
    start();
  } else {
    stop();
  }
}); 
```

或者你可以有一个标志导致间隔跳过代码：

```
var enabled = true;

var timer = window.setInterval(function(){
  if (!enabled) {
    // do something
  }
}, 1000);

$(checkbox).bind("change", function() {
  enabled = $(this).is(':checked');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:05:00.343

```
function fooFunc() {
    $('#foo').text(+new Date());
}
var id;
var shouldBeStopped = false;
$('input').change(function() {
    if (shouldBeStopped) 
        clearInterval(id);
    else 
        id = setInterval(fooFunc, 200);

    shouldBeStopped = !shouldBeStopped;
});​ 
```

[**现场演示**](http://jsfiddle.net/9f2hG/)

# java - 通过方法调用加载依赖

> ID：13325590
> 
> 赞同：0
> 
> 时间：2012-11-10T20:01:06.720
> 
> 标签：java, jakarta-ee, maven, maven-3

是否可以通过方法调用加载一些依赖项？我想`maven`调用 example `Depencencies.get()`，它将返回其他依赖项的集合。
我是新手`maven`，如果这是一个愚蠢的问题，请原谅，我有一半时间不知道自己在做什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:21:36.753

如果您想要一个允许您从 maven 存储库获取依赖项的 API，您可以使用[Aether](http://eclipse.org/aether/)。我认为 Aether 起源于 Sonatype，但它现在是一个 Eclipse 项目。

了解更多信息：

*   [请参阅解决aether-demo](http://git.eclipse.org/c/aether/aether-demo.git/) git 存储库中的工件的示例，例如[这个。](http://git.eclipse.org/c/aether/aether-demo.git/tree/aether-demo-snippets/src/main/java/org/eclipse/aether/examples/ResolveArtifact.java#n28)
*   [API 文档](http://download.eclipse.org/aether/aether-core/0.9.0.M1/apidocs/)

Aether 的缺点是它为您的应用程序添加了*很多*依赖项。

# c# - 基于正则表达式的数值表达式求解器

> ID：13325594
> 
> 赞同：2
> 
> 时间：2012-11-10T20:01:55.100
> 
> 标签：c#, regex, math

我正在使用正则表达式制作一个简单的数值表达式求解器，现在我正在将多项式拆分为其项。所以这就是我到目前为止得到的：

```
(.*?)([\+-](.*?))+ 
```

当涉及负数时，这不起作用。以 3*-2+1 为例：我得到的条件是 3*、-2 和 +1，这显然是错误的。
我以为我可以在符号之前以负面的眼光逃脱，以便丢弃 * 或 / 前面的符号：

```
(.*?)((?<![\*/])[\+-](.*?))+ 
```

但这甚至不适用于正数

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T20:13:11.170

希望您没有花很多时间创建自己的解析器；）

我使用这段代码来评估表达式：

```
class Program
{
    public static double Evaluate(string expression)  
    {  
        using (var stringReader = new StringReader("<dummy/>"))
        {
            var navigator = new XPathDocument(stringReader).CreateNavigator();
            expression = Regex.Replace(expression, @"([\+\-\*])", " ${1} "); // add some space
            expression = expression.Replace("/", " div ").Replace("%", " mod ");
            return (double)navigator.Evaluate(string.Format("number({0})", expression));
        }
    }

    static void Main(string[] args)
    {
        Console.WriteLine(Evaluate("3*-2+1"));
    }
} 
```

将输出：`-5`

它基于[`XPathNavigator.Evaluate`](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator.evaluate.aspx)方法。正则表达式在输入中添加一些空格，然后替换除法和模符号。

# ios - 将 CALayer 渲染到图像上下文会返回黑色

> ID：13325597
> 
> 赞同：5
> 
> 时间：2012-11-10T20:02:07.340
> 
> 标签：ios, calayer

我的 UIView 子类广泛使用子层来构建复杂的图像。屏幕上有多达 30 个这样的视图，在 iPad 2 上，沿 perimeterPath（这是 perimeterLayer 的路径属性）的动画性能受到影响。

最初，我只是将组成层添加为视图层上的子层。

```
[self.layer addSublayer:self.leftsideLayer];  // CAShapeLayer
[self.layer addSublayer:self.rightsideLayer]; // CAShapeLayer
[self.layer addSublayer:self.perimeterLayer]; // CAShapelayer
[self.layer addSublayer:self.valueLayer];     // CAShapeLayer
[self.layer insertSublayer:self.gradientLayer atIndex:0]; // CAGradientLayer + CAShapeLayer (as mask) 
```

屏幕渲染是完美的。但是由于动画开始滞后，我准备了这段代码来构建一个临时图层，目的是将临时图层渲染为位图。第一步只是为了确保我可以稍微修改现有代码：

```
CALayer *tmpLayer = [CALayer layer];
[tmpLayer addSublayer:self.leftsideLayer];  // CAShapeLayer
[tmpLayer addSublayer:self.rightsideLayer]; // CAShapeLayer
[tmpLayer addSublayer:self.perimeterLayer]; // CAShapelayer
[tmpLayer addSublayer:self.valueLayer];     // CAShapeLayer
[tmpLayer insertSublayer:self.gradientLayer atIndex:0]; // CAGradientLayer + CAShapeLayer (as mask)
[self.layer addSublayer:tmpLayer]; 
```

正如预期的那样，效果很好。

下一步是生成所有这些层的预渲染版本：

```
//  [self.layer addSublayer:tmpLayer];
    UIGraphicsBeginImageContextWithOptions([self bounds].size, YES, 0.0);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [self drawLayer:tmpLayer inContext:ctx];
    UIImage *renderedImageOfMyself = UIGraphicsGetImageFromCurrentImageContext();
    if (!renderedImageOfMyself) {
        NSLog(@"Well that didn't work");
    }
    UIGraphicsEndImageContext();
    [self.layer setContents:renderedImageOfMyself.CGImage]; 
```

结果是屏幕上出现黑色矩形，所以接下来我尝试了：

```
// [self.layer setContents:renderedImageOfMyself.CGImage];
[self addSubview:[[UIImageView alloc] initWithImage:renderedImageOfMyself]]; 
```

因为这也给了我黑色矩形，所以我得出结论，在屏幕上获取黑色矩形的任何一种方法都可以正常工作；-) 但我不知何故搞砸了让顶层渲染到位图图形上下文中。

我试过摆弄开始新上下文的选项部分，YES vs NO，1.0 vs 0.0；一切都无济于事。

我在以下过程中缺少什么：

*   开始一个新的图形上下文
*   将我的图层绘制到该上下文中
*   从该上下文中获取图像

?

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T06:02:51.930

好吧，我发现了我没有做的事情：我的图层从未绘制过它的内容，所以我需要在尝试从中获取图像之前将 setNeedsDisplay 发送到图层（这对我来说似乎有点奇怪，比如 drawLayer:inContext:和渲染上下文:)

```
[tmpLayer setNeedsDisplay];
UIGraphicsBeginImageContextWithOptions([self bounds].size, YES, 0.0);
CGContextRef ctx = UIGraphicsGetCurrentContext();
[tmpLayer renderInContext:ctx];
renderedImageOfMyself = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[self.layer setContents:renderedImageOfMyself.CGImage]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:23:00.227

干得好，但有时在 iOS 6 上不适用于奇怪的指针。

我希望这对将来的某人有所帮助:)（我在 Todd Yandell 的 stackoverflow powever 上找到的部分代码）

```
UIGraphicsBeginImageContextWithOptions([tmpLayer frame].size, YES, 0.0);
[tmpLayer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# java - java - 下载然后将图像写入 servlet 响应

> ID：13325599
> 
> 赞同：0
> 
> 时间：2012-11-10T20:02:55.420
> 
> 标签：java, json, performance, spring, servlets

如何从服务器下载图像，然后将其作为响应写入我的 servlet。保持良好性能的最佳方法是什么？

这是我的代码：

```
JSONObject imageJson;
... //getting my JSON
String imgUrl = imageJson.get("img"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:07:39.103

如果您不需要隐藏图像源并且服务器也可以从客户端访问，我只需将您的响应指向远程服务器（因为您已经有了 url）=> 您不需要做首先下载到您的服务器，但可能客户端可以直接访问它=>您不会浪费资源。

但是，如果您仍然需要先将其下载到您的服务器，以下帖子可能会有所帮助：[Writing image to servlet response with best performance](https://stackoverflow.com/questions/2979758/writing-image-to-servlet-response-with-best-performance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:11:12.643

避免在 servlet 中对图像进行中间缓冲很重要。相反，只需将收到的任何内容流式传输到 servlet 响应：

```
InputStream is = new URL(imgUrl).openStream();
OutputStream os = servletResponse.getOutputStream();

IOUtils.copy(is, os);
is.close(); 
```

我正在使用[`IOUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)Apache Commons（不是必需的，但很有用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T10:44:05.473

完整的**解决方案：**下载地图并保存到文件。

```
 String imgUrl = "http://maps.googleapis.com/maps/api/staticmap?center=-15.800513,-47.91378&zoom=11&size=200x200&sensor=false";
    InputStream is = new URL(imgUrl).openStream();
    File archivo = new File("c://temp//mapa.png");
    archivo.setWritable(true);
    OutputStream output = new FileOutputStream(archivo);
    IOUtils.copy(is, output);
    IOUtils.closeQuietly(output);
    is.close(); 
```

# jquery - jquery 切换中断浮动在 ie

> ID：13325609
> 
> 赞同：0
> 
> 时间：2012-11-10T20:05:07.260
> 
> 标签：jquery, css

我想在图像右侧显示的 div 中有一些文本。我希望文本环绕图像并在到达图像末尾后与页面左侧对齐。使用一个小的 jquery 脚本来切换 div 的可见性。问题在于，当切换可见性时，文本在到达图像底部后不再扩展到页面的左边距 - 而是继续，就好像图像是左边距一样。html 基本上是这样的：

```
<html>
   <image float:left>
   <div id="toggleMe">lots of text here</div>
</html> 
```

注意这两点：这个问题在firefox中不会发生，只有IE（未经其他浏览器测试）。此外，如果图像的可见性未切换，则它在 IE 中可以正常工作。

这是代码：

```
<script type="text/javascript">
$(loadStuff);

function loadStuff() {
    $("#divWorkExperience").hide();

    $("#btnShowWorkExp").click(function () {
        $("#divWorkExperience").toggle("slow");
        return false;
    }); 
```

剪断

```
<div style="text-align:justify;">

   <img src="ContentImages/highres_22409206.jpg" style="height:300px;width:400px;float:left;clear:none; margin-right:6px;" alt="me" />
   <div id="divWorkExperience" style="display:block; clear:none;">lots of text</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:17:14.723

像往常一样，我必须先发布问题，然后才能找到答案。我不明白为什么会这样，但确实如此：

```
function loadStuff() {
    $("#divWorkExperience").hide();

    $("#btnShowWorkExp").click(function () {
        if ($.browser.msie) {
            $("#divWorkExperience").toggle();
        } else {
            $("#divWorkExperience").toggle("slow");
        }
        return false;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:17:26.683

这就是你所需要的。将 align:left 作为图像属性。使用跨度而不是 div

```
<body>
    <img align="left" src="" style="height:300px; width:400px; margin-right:6px;" alt="me" />
    <span>Your long text here</span>
</body> 
```

# c# - 实体框架存储库和异步调用

> ID：13325610
> 
> 赞同：1
> 
> 时间：2012-11-10T20:05:11.343
> 
> 标签：c#, async-await, entity-framework-6

我有一个使用 EF 访问数据库的存储库。此存储库用于我的主要应用程序。

我的问题是，以异步方式调用我的存储库的方法是否是个好主意，或者更好的是正常调用。

如果异步方式是个好主意。将异步调用到我的存储库方法是个好主意，还是有任何其他方式以异步方式使用 EF？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:51:57.677

关于 EF 和服务器端编程的异步支持主要是为了帮助您的站点在服务器上更好地扩展。通过在可能需要一段时间的操作（例如访问数据库）时释放线程，线程将可用于另一个 Web 请求。数据库返回结果后，您可以从上次中断的地方继续。

正如 Pawel 在上面的评论中所说： ObjectContext 的实例并不意味着在多线程环境中使用。为您处理的每个请求创建一个实例。

回答您最初的问题：是的，如果您担心扩展您的站点，最好使用 EF6 中的新异步支持。

# visual-studio-2010 - 打开 silverlight 应用程序时发生异常

> ID：13325612
> 
> 赞同：0
> 
> 时间：2012-11-10T20:05:22.787
> 
> 标签：visual-studio-2010, silverlight

在 VS2010 中打开 Silverlight 应用程序时出现以下错误：

```
System.NullReferenceException: Object reference not set to an instance of an object.
at Microsoft.Windows.Design.Platform.SilverlightMetadataContext.SilverlightXamlExtensionImplementations.<GetXmlNamespaceCompatibilityMappings>d__8.MoveNext()
at MS.Internal.Design.Metadata.ReflectionProjectNode.BuildSubsumption()
at MS.Internal.Design.Metadata.ReflectionProjectNode.SubsumingNamespace(Identifier identifier)
at MS.Internal.Design.Markup.XmlElement.BuildScope(PrefixScope parentScope, IParseContext context)
at MS.Internal.Design.Markup.XmlElement.ConvertToXaml(XamlElement parent, PrefixScope parentScope, IParseContext context, IMarkupSourceProvider provider)
at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.FullParse(Boolean convertToXamlWithErrors)
at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.get_RootItem()
at Microsoft.Windows.Design.DocumentModel.Trees.ModifiableDocumentTree.get_ModifiableRootItem()
at Microsoft.Windows.Design.DocumentModel.MarkupDocumentManagerBase.get_LoadState()
at MS.Internal.Host.PersistenceSubsystem.Load()
at MS.Internal.Host.Designer.Load()
at MS.Internal.Designer.VSDesigner.Load()
at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedView.Load()
at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedDesignerFactory.Load(IsolatedView view)
at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
at MS.Internal.Host.Isolation.IsolatedDesigner.Load()
at MS.Internal.Designer.DesignerPane.LoadDesignerView() 
```

现在我想说的是，在我的 PC 上，Microsoft Silverlight、Microsoft Silverlight 3 SDK 和 Microsoft Silverlight 4 SDK 都安装了。在我遇到此异常的项目中，我使用的是 Silverlight 3 SDK。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:17:10.327

用记事本打开 *.csproj 文件并检查以下行：

```
<ApplicationDefinition Include="App.xaml">
  <Generator>MSBuild:Compile</Generator>
  <SubType>Designer</SubType>
</ApplicationDefinition> 
```

它必须存在于 *.csproj 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:56:59.353

检查 xaml 实现代码中的 silverlight 代码，似乎变量 d__8 未填充或为空或未引用..

检查这个 [http://social.msdn.microsoft.com/Forums/en/vswpfdesigner/thread/01ce533e-ed94-48d2-8184-e2e34e6bdc6f](http://social.msdn.microsoft.com/Forums/en/vswpfdesigner/thread/01ce533e-ed94-48d2-8184-e2e34e6bdc6f)

# objective-c - 从 Dropbox 下载文件以获取文档目录会删除我的所有文件

> ID：13325616
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:06:03.207
> 
> 标签：objective-c, cocoa, rest, dropbox

我的应用程序显示保管箱文件和文档目录。查看保管箱文件时，我可以按下一个按钮，显示我所有的文档文件夹列表，以及这些文件夹中的子目录，以便他们可以选择他们想要将该文件放入文档的文件夹。这样做时，我使用了 dropbox 的 Objective c API，他们说在文档中使用它来将文件下载到系统上的路径中。

```
NSString *DocumentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

for (NSIndexPath *indexPath in [dropboxFilesTable indexPathsForSelectedRows]) {

    DBMetadata *fileMetadata = [[dropboxFolderMetadata contents] objectAtIndex:indexPath.row];

    [[self restClient] loadFile:fileMetadata.path intoPath:DocumentsPath];
} 
```

保管箱的代表说它已成功放入，但是当我返回时，每个文件夹和下载的文件都已被删除，并且该文件仍未在文件夹中。我认为它需要像“文档路径”/“文件名”这样的最终路径，但随后 dropbox 给出了一个错误。任何人都知道为什么它会删除我的所有文件而不是将其放入我的文档中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:10:42.823

该`intoPath`参数需要是完整的文件名路径，而不是目录。您需要将最后一行更新为：

```
NSString *filename = [fileMetadata.path lastPathComponent];
NSString *destPath = [DocumentsPath stringByAppendingPathComponent:filename];
[[self restClient] loadFile:fileMetadata.path intoPath:destPath]; 
```

还要确保您只对文件而不是文件夹执行此操作。

# c# - 我无法将数据绑定到 WPF/XAML 中的局部变量

> ID：13325617
> 
> 赞同：6
> 
> 时间：2012-11-10T20:06:28.960
> 
> 标签：c#, wpf, xaml, data-binding

我想要一个文本框在我单击它时显示变量的值（1 到 100 的迭代），我不知道我在做什么错误：

当我运行项目时，文本框中不显示任何内容。

在文本框中显示变量的最佳方式是什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace dataBindingTest
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        public string myText { get; set; }

        public void Button_Click_1(object sender, RoutedEventArgs e)
        {
            int i = 0;
            for (i = 0; i < 100; i++)
            {
                myText = i.ToString();
            }
        }
    }
} 
```

XAML：

```
<Window x:Class="dataBindingTest.MainWindow"
        Name="windowElement"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" HorizontalAlignment="Left" Height="106" Margin="71,95,0,0" VerticalAlignment="Top" Width="125" Click="Button_Click_1"/>
        <TextBlock x:Name="myTextBox" HorizontalAlignment="Left" Height="106" Margin="270,95,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="187" Text= "{Binding myText, ElementName=windowElement}" />

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T20:30:02.067

您当前的`myText`属性无法在其值发生更改时通知 WPF 绑定系统，因此`TextBlock`不会更新。

如果您将其设置为依赖属性，它会自动实现更改通知，并且对属性的更改将反映在`TextBlock`.

因此，如果您`public string myText { get; set; }`用所有这些代码替换它应该可以工作：

```
public string myText
{
    get { return (string)GetValue(myTextProperty); }
    set { SetValue(myTextProperty, value); }
}

// Using a DependencyProperty as the backing store for myText.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty myTextProperty =
    DependencyProperty.Register("myText", typeof(string), typeof(Window1), new PropertyMetadata(null)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T01:19:04.890

实施`INotifyPropertyChanged`：

```
public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public MainWindow()
        {
            this.InitializeComponent();
        }

        private string _txt;
        public string txt
        {
            get
            {
                return _txt;
            }
            set
            {
                if (_txt != value)
                {
                    _txt = value;
                    OnPropertyChanged("txt");
                }
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            txt = "changed text";
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    } 
```

XAML：

```
<TextBox Text="{Binding txt}"/>
<Button Click="Button_Click">yes</Button> 
```

并且不要忘记添加窗口的 DataContext 属性：

```
<Window ... DataContext="{Binding RelativeSource={RelativeSource Self}}"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T20:31:34.543

尝试这个：

```
 public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = this;
        }

        public string myText { get; set; }

        public void Button_Click_1(object sender, RoutedEventArgs e)
        {
            BackgroundWorker bw = new BackgroundWorker();
            bw.DoWork += delegate
            {
                int i = 0;
                for (i = 0; i < 100; i++)
                {
                    System.Windows.Threading.Dispatcher.CurrentDispatcher.Invoke((Action)(() => { myText = i.ToString(); OnPropertyChanged("myText"); }));                    
                    Thread.Sleep(100);
                }
            };

            bw.RunWorkerAsync();
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }
    } 
```

XAML 文件：

```
 <Grid>
            <Button Content="Button" HorizontalAlignment="Left" Height="106" Margin="71,95,0,0" VerticalAlignment="Top" Width="125" Click="Button_Click_1"/>
            <TextBlock x:Name="myTextBox" 
                       HorizontalAlignment="Right" Height="106" Margin="0,95,46,0" 
                       TextWrapping="Wrap" VerticalAlignment="Top" Width="187" 
                       Text= "{Binding myText}" />

        </Grid> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T20:26:12.773

您应该`INotifyPropertyChanged`在“MainWindow”中实现，以便您的“myTextBlock”可以自动从您的数据中获取更改并更新。

所以你的“MainWindow”应该是这样的：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
    }
    private string _myText;

    public string myText { 
      get{return _myText;}
      set{_myText = value;
         if(PropertyChanged!=null) PropertyChanged(this, new PropertyChangedEventArgs("myText")) ;
      }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    etc.....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T20:26:59.490

您需要让属性告诉绑定它已更新。执行此操作的标准方法是：

1.  实施[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)
2.  使 myText 属性成为[`DependencyProperty`](http://msdn.microsoft.com/en-us/library/ms752914.aspx)
3.  另一种可能较少使用的方法是手动引发事件，如下所示：

```
public void Button_Click_1(object sender, RoutedEventArgs e)
{
    myText = "Clicked";
    BindingOperations.GetBindingExpressionBase(myTextBox, TextBlock.TextProperty).UpdateTarget();
} 
```

请注意，您`TextBlock`的名称令人困惑`myTextBox`

# c++ - c++椭圆坐标映射

> ID：13325618
> 
> 赞同：0
> 
> 时间：2012-11-10T20:06:31.103
> 
> 标签：c++, transformation

我想将窗口的坐标从笛卡尔坐标系转换为椭圆坐标系。转变是：

x= e*cosh(eta)*cos(phi)

y= e*sinh(eta)*sin(phi)

和逆：

eta=Re(acosh(x/e+i*y/e))

phi=Im(acosh(x/e+i*y/e))

（参见[http://itp.tugraz.at/~schnizer/AnalyticalMethods/AnMe6%267.pdf](http://itp.tugraz.at/~schnizer/AnalyticalMethods/AnMe6%267.pdf)的第 14 页）

到目前为止，我实现了以下内容：

```
cv::Size2f _size(33,70);
float e = 0.0f;
float eta0 = 0.0f;
if(_size.height > _size.width)
{
    e = sqrt(_size.height*_size.height - _size.width*_size.width);
    std::complex<double> z0(0,_size.height/2/e);
    eta0 = std::acosh(z0).real();
} else
{
    e = sqrt(_size.width*_size.width - _size.height*_size.height);
    std::complex<double> z0(_size.width/2/e,0);
    eta0 = std::acosh(z0).real();
}

for(int dx = ceil(-_size.width/2); dx < floor(_size.width/2); dx++ )
{
    for(int dy = ceil(-_size.height/2); dy < floor(_size.height/2); dy++ )
    {
        float eta;
        float phi;
        if((dx == 0) && (dy == 0))
        {
            eta = 0.0f;
            phi = 0.0f;
        }else
        {
            std::complex<double> z(dx/e,dy/e);
            std::complex<double> k = std::acosh(z);
            eta = (k.real()) / eta0;
            phi = fmod(k.imag() + 2.0f*CV_PI, 2.0f*CV_PI);
        }
        int x = 200 + dx;
        int y = 200 + dy;
    }    
} 
```

问题是，椭圆坐标不缩放。eta 总是大于 1，但它应该在 0 < eta < inf 之间缩放。对于椭圆内的点，Eta 应该 <1，由 _size 指定，对于椭圆外的点应该 >1。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:53:41.137

我不确定，但请检查您的双倍（乘法）和除法是否产生双倍，即除以常数是 /(double)2 或 /2.0 希望有所帮助

# c# - 在 HtmlElement 中访问标签“选项”

> ID：13325619
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:06:35.257
> 
> 标签：c#, html

需要改变这个：

```
<select name="asdf">
    <option selected>a</option>
    <option>b</option>
    <option>c</option>
</select> 
```

我得到了`HtmlElement`但无法通过`htmlEle.SetAttribute("value", "c");`

我想将所选选项从**a**更改为**c**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:35:14.023

拥有元素后，您可以遍历子元素并更新选定的属性：

```
var ele = webBrowser1.Document.GetElementById("asdf");

if (ele != null)
{
    foreach (HtmlElement child in ele.Children)
    {
        child.SetAttribute("selected", "false");
        if (child.InnerText == "c")
            child.SetAttribute("selected", "true");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:10:33.807

假设：`htmlEle`是选项元素，

C#：请尝试：

```
 htmlEle.textContent = "a1"; 
```

选择显示气体的选项，

```
 htmlEle.setAttribute("selected", "true"); 
```

HTML/JavaScript：

您的意思是要将第一个选项的显示值从 更改`a`为`c`，然后尝试以下操作：

```
 htmlEle.innerHTML = "c"; 
```

选择显示气体的选项，

     htmlEle.setAttribute("selected", "selected");

如果我有一个`ID`分配给选择框：

```
 <select name="asdf" id="selectBox">
         <option selected>a</option>
         <option>b</option>
         <option>c</option>
       </select> 
```

然后

```
 var selectElem = document.getElementById("selectBox");
  selectElem.childNodes[1].innerHTML = "a1"; 
```

将第一个选项的值更改为`a1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:13:48.393

这很容易完成

```
htmlEle.value = "c"; 
```

[**现场演示**](http://jsfiddle.net/y2Dze/1)

# c - C re-alloc/malloc 替代

> ID：13325626
> 
> 赞同：1
> 
> 时间：2012-11-10T20:07:29.357
> 
> 标签：c, malloc, realloc

我有一块内存，我想重新分配到不同的大小，但我不在乎内存是否被丢弃。free() 内存然后 malloc() 一个新的内存块会更快，还是 realloc() 是要走的路？

我认为这两种解决方案都不是最佳的，因为执行了额外的工作。我打赌 realloc() 在定位足够大的内存块时会更快，因为当前片段可能足够大或足够小以容纳新的内存块。但是，如果片段不够大，它必须复制 malloc() 没有的内存。

我正在使用 Linux。这可能有一个特殊的功能吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:11:08.580

如果你不关心内容，标准的成语是 do`free`后跟`malloc`. 找到一个块比复制它便宜，并且不能保证它`realloc`不会自己进行一些搜索。

在这种情况下，如果您真的关心性能，最好在目标平台和实际工作负载下对这两种解决方案进行基准测试，看看哪一种表现更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:48:25.247

realloc = Alloc 然后复制然后释放另一个解决方案是 alloc 和 free 肯定更快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:16:40.027

我会继续相信 realloc 的实现会做正确的事。同样在未来，您不必担心内存是否被移动、重新分配等。这种抢先式优化是不需要的，因为大部分时间都花在从用户空间到内核空间的上下文切换中。

# sql - sql server 按表中的第一列排序

> ID：13325628
> 
> 赞同：4
> 
> 时间：2012-11-10T20:07:38.213
> 
> 标签：sql, sql-server, sql-server-2008

```
exec ('select * from variable_table_name
order by @variable') 
```

我正在尝试将一个动态 sql 语句放在一起，您可以在其中指定一个表名和排序列。如果我可以指定一个表名来使 sql 工作，那就太好了。

如果未指定@variable sort by，有没有办法选择表的第一列进行排序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T20:09:13.357

您可以使用：

```
ORDER BY 1; 
```

从[ORDER BY 子句（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms188385.aspx)：

> order_by_expression - 指定对查询结果集进行排序的列或表达式。排序列可以指定为名称或列别名，**或表示列在选择列表中的位置的非负整数**。

（强调我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:19:42.210

这个脚本应该可以完成这项工作

```
DECLARE @tbl NVARCHAR(128)
DECLARE @col NVARCHAR(128)
DECLARE @sql NVARCHAR(MAX)

SET @tbl = 'MyTbl'
SET @col = '' --enter column name when required

IF @col = ''
BEGIN
    SET @sql = 'SELECT * FROM ' + @tbl + ' ORDER BY 1'
END
ELSE
    SET @sql = 'SELECT * FROM ' + @tbl + ' ORDER BY ' + @col

EXEC(@sql) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:21:52.743

像这样的东西（我以 Adventureworks 为例）：-

```
DECLARE @SORTCOLUMN varchar(50);

SET @SORTCOLUMN = 'OrganizationLevel';

IF @SORTCOLUMN IS NULL
    EXEC('SELECT * FROM HumanResources.Employee ORDER BY 1')
ELSE
    EXEC('SELECT * FROM HumanResources.Employee ORDER BY ' + @SORTCOLUMN) 
```

省略“SET @SORTCOLUMN”行以默认为第一列

# php - 如何从字符串声明命名空间中的类

> ID：13325633
> 
> 赞同：3
> 
> 时间：2012-11-10T20:07:48.897
> 
> 标签：php

> **可能重复：**
> [带有动态类名的 PHP 命名空间](https://stackoverflow.com/questions/4513366/php-namespace-with-dynamic-class-name)

如何从字符串声明类？

# 代码

```
$name = 'the_class';
require_once $name.'.php';
$class = new \resource\$name(); 
```

# 错误

```
Parse error: syntax error, unexpected '$name' (T_VARIABLE), expecting identifier (T_STRING) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T20:10:26.710

您将需要[动态构建命名空间路径](http://php.net/manual/en/language.namespaces.dynamic.php)：

```
$classPath = '\\resource\\' . $name;
$class = new $classPath; 
```

**注意：**我喜欢用[文字反斜杠](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)来明确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T20:10:34.227

命名空间需要是字符串的一部分：

```
$name = 'the_class';
require_once $name . '.php';
$className = '\resource\\' . $name;
$class = new $className(); 
```

# asp.net - 在 Sitefinity 5 中提供 XML 文档

> ID：13325635
> 
> 赞同：0
> 
> 时间：2012-11-10T20:08:44.370
> 
> 标签：asp.net, xml, rss, content-management-system, sitefinity

我在 Sitefinity v5 的根 App_Data 文件夹的“Feeds”文件夹中有一个 XML 文档。我怎样才能让它在我的页面上提供？你知道任何在线教程吗？

我尝试过使用 Feed 设置、块中的 Javascript 和其他技术。或者如何将我的 XML 转换为 RSS 以便 Sitefinity 可以更好地阅读？

如果您能提供任何帮助或见解，我将不胜感激。

谢谢，

玛丽亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:51:27.020

这是您在 sitefinity 应用程序中为内部使用而制作的文档吗？我认为最简单的方法是创建一个简单的用户控件 (.ascx)，将 xml 绑定到转发器或类似控件，然后将该用户控件注册为小部件，如下所示：[http ://www.sitefinity.com /documentation/documentationarticles/将控件添加到工具箱](http://www.sitefinity.com/documentation/documentationarticles/adding-controls-to-the-toolbox)

然后您可以简单地将这个小部件拖放到任何页面上。

如果我误解了您的问题，请让我知道更多关于您要完成的工作，我会尽力提供帮助！

# php - 将mysql表行中的数据导出为数组格式

> ID：13325641
> 
> 赞同：0
> 
> 时间：2012-11-10T20:09:19.993
> 
> 标签：php, mysql

我正在尝试从

*   表：艺术家
*   行：艺术家

成这种格式。艺术家姓名可以有特殊字符，其中有超过 16k 个。它需要写入文件。例如称为任何artist.php

```
$Artist = array(
    "Name from database",
    "Name from database",
    "Name from database",
    "Name from database",
    "Name from database"
); 
```

好的抱歉没有解释。为 ajax 自动完成执行此操作。所以我需要在其中创建一个包含此数组的文件。

我让它工作并以我需要的方式输出它只是停留在如何在完成后将所有内容都说给文件。

这就是我所拥有的

```
require_once('config.php'); 

$res = mysql_query("SELECT artist FROM artists");
$ids = array();
$NotAllowed = array("(", ")", "+", ".", "-", "$", "#", "'", "\"", "%",":", ",", "*", "\\", "/");
    echo '$aUsers = array('; echo "<br>";
while ($row = mysql_fetch_assoc($res)) {
  $ids[] = $row['artist'];
    $FixedArtist = str_replace($NotAllowed, " ", $row['artist']);
        echo "\""; echo $FixedArtist; echo "\","; echo "<br>";

}
    echo "\"Lastname\""; echo "<br>";
    echo ");";

    $FileToSaveTo = "ajax-search.php";
    $fp = fopen($FileToSaveTo,"w") or die ("Error opening file in write mode!");
    fputs($fp,$content);
    fclose($fp) or die ("Error closing file!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:42:13.683

是的，尝试使用 PDO 读取结果并将其导出到单独的 Artists.json 文件中，它更干净

```
/*require_once('config.php'); 
$res = mysql_query("SELECT artist FROM artists");
$ids = array();
$NotAllowed = array("(", ")", "+", ".", "-", "$", "#", "'", "\"", "%",":", ",", "*", "\\", "/");
/*while ($row = mysql_fetch_assoc($res)) {
  $ids[] = str_replace($NotAllowed, " ", $row['artist']);  
}*/

//PDO version
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$sth = $dbh->prepare("SELECT artist FROM artists");
$sth->execute();
$ids = $sth->fetch(PDO::FETCH_ASSOC);
//replace not allowed chars here

file_put_contents('artists.json', json_encode($ids)); 
```

然后 ajax-search.php 将加载这个文件

# python - Python Magic（智能，双模）SSL Socket？

> ID：13325642
> 
> 赞同：2
> 
> 时间：2012-11-10T20:09:22.247
> 
> 标签：python, ssl

我正在编写一个使用 Python 的 HTTPServer 和 BaseHTTPRequest 的应用程序。在某些时候，我认为由于用户可能想要发送的数据的敏感性，SOCKS 的实现会很有用。问题是 - 该应用程序计划在非标准端口上运行，因此如果它可以同时与纯文本和 SSL 连接进行通信将会很有用。我发现[有](http://www.piware.de/2011/01/creating-an-https-server-in-python/)一种方法可以让 HTTPServer 使用 SSL：

```
import BaseHTTPServer, SimpleHTTPServer
import ssl

httpd = BaseHTTPServer.HTTPServer(('localhost', 4443), SimpleHTTPServer.SimpleHTTPRequestHandler)
httpd.socket = ssl.wrap_socket (httpd.socket, certfile='path/to/localhost.pem', server_side=True)
httpd.serve_forever() 
```

有没有办法创建一个可以同时处理 SSL 和明文连接的套接字类？一种检测 SSL 的巧妙方法（即一些魔术字节）？另一种方法是分配两个端口，但这不太酷。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T23:40:00.040

我已经稍微调查了这个问题。很容易让一个套接字表现得像两个不同的服务器（取决于接收到的数据类型）。这里不好的是python的_ssl库直接从socket._socket读取，这是一个原生的python对象，因此不能正常hook。

一种方法是编写一个将挂钩本机 python 套接字的 C 模块。另一种解决方案是拥有 1 个前端和 2 个后端（https 和 http）。前端监听 4443 并决定它是否应该与 https 后端或 http 后端的连接进行交换。您可以向两台服务器添加相同的处理程序，它们的行为方式相同。另一个问题是在后端我们不知道客户端的 ip，但是有一些解决方法（比如前端将保留而后端将查看的 dict {(Frontend to backend source port number): Client IP}） .

与 C 解决方案相比，第二个看起来很脏，但在这里。

```
import BaseHTTPServer, SimpleHTTPServer
import ssl
import socket
import select
import threading

FRONTEND_PORT = 4443
BACKEND_PORT_SSL = 44431
BACKEND_PORT_HTTP = 44432
HOST = 'localhost'

httpd_ssl = BaseHTTPServer.HTTPServer((HOST, BACKEND_PORT_SSL), SimpleHTTPServer.SimpleHTTPRequestHandler)
httpd_ssl.socket = ssl.wrap_socket (httpd_ssl.socket, certfile='key.pem', server_side=True)

httpd_direct = BaseHTTPServer.HTTPServer((HOST, BACKEND_PORT_HTTP), SimpleHTTPServer.SimpleHTTPRequestHandler)

def serve_forever(http_server):
    http_server.serve_forever()

def categorize(sock, addr):
    data = sock.recv(1)
    if data == '\x16':
        port = BACKEND_PORT_SSL
    else:
        port = BACKEND_PORT_HTTP
    other_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    other_sock.connect((HOST, port))
    other_sock.send(data)
    inp = [sock, other_sock]
    select_timeout = 1.0
    try:
        while 1:
            r,w,x = select.select(inp,[],[],select_timeout)
            if not r:
                continue
            for s in r:
                o_s = inp[1] if inp[0]==s else inp[0]
                buf = s.recv(4096)
                if not buf:
                    raise socket.error
                o_s.send(buf)
    except socket.error:
        pass
    finally:
        for s in inp:
            s.close()

threading.Thread(target=serve_forever, args=(httpd_ssl,)).start()
threading.Thread(target=serve_forever, args=(httpd_direct,)).start()

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.bind((HOST, FRONTEND_PORT))
sock.listen(10)

while True:
    conn, addr = sock.accept()
    threading.Thread(target=categorize, args=(conn, addr)).start() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-02T14:06:55.367

我用一个帮助类解决了这个问题，该类在 上查看接收到的数据`accept()`，然后返回一个包装或裸套接字：

```
class SmartServerSocket:
    def __init__( self, sock ):
        self.sock = sock
        # delegate methods as needed
        _delegate_methods = [ "fileno" ]
        for method in _delegate_methods:
            setattr( self, method, getattr( sock, method ) )
    def accept( self ):
        (conn, addr) = self.sock.accept()
        if conn.recv( 1, socket.MSG_PEEK ) == "\x16":
            return (ssl.wrap_socket( conn, certfile='path/to/localhost.pem', server_side=True ), addr)
        else:
            return (conn, addr)

httpd = BaseHTTPServer.HTTPServer( ('localhost', 4443), SimpleHTTPServer.SimpleHTTPRequestHandler )
httpd.socket = SmartServerSocket( httpd.socket )
httpd.serve_forever() 
```

如果您愿意，您可以将服务器对象提供给`SmartServerSocket`构造函数，并在`accept()`那里为检测到的协议设置一个特殊的成员变量，以便您可以在`RequestHandler`实例中检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:32:58.367

是的，[确实有](http://www.ietf.org/rfc/rfc2817.txt)。

但我不知道任何为 HTTP 实现 STARTLS 的客户端或服务器。它通常用于 IMAP 和 SMTP，但不幸的是，对于 HTTP，似乎没有任何实现，在与 HTTPS 不同的端口上提供 HTTP 仍然是常见的做法。

# iphone - 从 iPhone 应用程序向 Wordpress 博客发表评论

> ID：13325645
> 
> 赞同：1
> 
> 时间：2012-11-10T20:09:53.737
> 
> 标签：iphone, ios, wordpress

我使用代码从以下问题向 wordpress 博客发表评论：

[以编程方式从 iPhone 向 WordPress 博客发表评论](https://stackoverflow.com/questions/9564276/post-comment-to-wordpress-blog-from-iphone-programmatically)

我做了一些修改以从 UITextFields 获取文本：

```
- (IBAction)postComment:(id)sender {
    NSString *post_url = @"http://movilarena.com/wp-comments-post.php";
    NSString *post_content = @"comment_post_ID=%@&comment_parent=%@&author=%@&email=%@&comment=%@";

    NSString *post_str = [NSString stringWithFormat:post_content, @"1", @"0", self.txtName.text, self.txtEmail.text, self.txtComment.text];
    NSData *data = [NSData dataWithBytes:[post_str UTF8String] length:[post_str length]];

    NSURL * url = [NSURL URLWithString:post_url];
    NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:url];
    [req setHTTPMethod:@"POST"];
    [req setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
    [req setHTTPBody:data];

    //Synchronous
    NSURLResponse *response;
    NSError *err;
    NSData *ret = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&err];

    NSString *retString = [NSString stringWithUTF8String:[ret bytes]];
    NSLog(@"%@",retString);
} 
```

我的问题是 sendSynchronousRequest 返回错误：

> 执行被中断，原因：EXC_BAD_ACCESS (code=1, address=0x0)。进程已恢复到执行前的状态。

我将不胜感激任何建议来确定这里有什么问题。我使用 XCode 4.5.2 并在装有 iOS 6.0.1 的 iPhone 4S 上运行代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:38:54.537

自己解决了。该字段`comment_post_ID`应该是我要回复的帖子的 ID。

```
NSString *post_content = @"comment_post_ID=%d&comment_parent=%@&author=%@&email=%@&comment=%@";

NSString *post_str = [NSString stringWithFormat:post_content, self.postID, @"0", self.txtName.text, self.txtEmail.text, self.txtComment.text]; 
```

# php - AJAX https 到 http $_SESSION 变量

> ID：13325651
> 
> 赞同：2
> 
> 时间：2012-11-10T20:10:20.643
> 
> 标签：php, jquery, ajax, cross-domain, session-variables

我看过讨论这个问题的文章，但我还没有看到关于如何绕过它的答案或替代方案的好建议。

我有一个包括身份验证的总 AJAX 站点。当用户注册或登录时，他们会在我的网站上创建一个跨域 https，他们最初会加载 http。显然，我需要他们能够在 https 中设置一些会话变量并在 http 中访问它们。

我知道你“不能”这样做，但你可以吗？如果绝对不是，那么最安全的选择是什么？

提前谢谢了！

# php - 这个 SQL 查询有什么问题？

> ID：13325666
> 
> 赞同：2
> 
> 时间：2012-11-10T20:11:45.360
> 
> 标签：php, mysql, sql

我已经有几年没有写过 PHP/SQL 了，我需要为一个项目做这件事。现在我遇到了一个问题。

我想在特定日期之间从 MySQL 数据库中获取一些数据。如果像这样写它就可以了：

```
$result = mysql_query("SELECT * FROM acw WHERE team = '".$team."' and added between '2012-11-05' and '2012-11-10' "); 
```

但我想从 URL 中获取日期，并写了这个：

```
$periods = $_GET["per"];

if ( $periods == 1 ) {
$period = "and added between '2012-11-05' and '2012-11-10'";
} 
elseif ( $periods == 2 ) {
$period = "and added between '2012-11-11' and '2012-11-17'";
} 
elseif ( $periods == 3 ) {
$period = "and added between '2012-11-05' and '2012-11-10'";
} 

echo $period; 
```

如果我 echo $period 我在 HTML 中得到了正确的输出，但是当试图将它插入到我的 MySQL 问题中时，我什么也没得到，我做错了什么？

```
$result = mysql_query("SELECT * FROM acw WHERE team = '".$team."' '".$period."' "); 
```

所以这有问题，我自己无法解决:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T20:13:29.603

您输入的字符串`$period`是完整的 SQL 块，而不是带引号的字符串文字。所以删除它周围的单引号。

```
$result = mysql_query("SELECT * FROM acw WHERE team = '". $team ."' " . $period);
//---------------No quotes here----------------------------------------^^^^^^^^^^ 
```

注意：我们假设`$team`，如果源自用户输入，则已经通过 SQL 注入正确转义`mysql_real_escape_string()`

建议始终通过`echo`'ing out 字符串来调试您的 SQL 语句。看到这样的字符串会更明显：

```
SELECT * FROM acw WHERE team = 'The Team' 'and added between '2012-11-05' and '2012-11-10'' 
```

`$_GET['per']`最后一点建议 - 除非已经在此处未发布的代码中完成此操作，否则请在尝试使用之前验证已设置：

```
// Set $periods to the $_GET value or defualt to 1 if it isn't set (or whatever value)
$periods = isset($_GET["per"]) ? $_GET['per'] : 1; 
```

# jquery-ui - 加载两个可选择的 jQuery UI 实例

> ID：13325669
> 
> 赞同：0
> 
> 时间：2012-11-10T20:12:06.330
> 
> 标签：jquery-ui

我正在尝试加载两个可选择的 jQuery UI 实例，但第二个似乎有问题。我该如何解决这个问题？

这是我的代码：http: [//jsfiddle.net/3pKQf/1/](http://jsfiddle.net/3pKQf/1/)

**HTML**

```
Div 1
<div id="div1">
        <ul id="selectable">
          <li class="ui-state-default">1</li>
          <li class="ui-state-default">2</li>
          <li class="ui-state-default">3</li>
          <li class="ui-state-default">4</li>
          <li class="ui-state-default">5</li>
          <li class="ui-state-default">6</li>
          <li class="ui-state-default">7</li>
          <li class="ui-state-default">8</li>
          <li class="ui-state-default">9</li>
          <li class="ui-state-default">10</li>
          <li class="ui-state-default">11</li>
          <li class="ui-state-default">12</li>
          <li class="ui-state-default">13</li>
          <li class="ui-state-default">14</li>
          <li class="ui-state-default">15</li>
        </ul>
</div><br><br>
Div 2
    <div id="div2">
            <ul id="selectable">
              <li class="ui-state-default">1</li>
              <li class="ui-state-default">2</li>
              <li class="ui-state-default">3</li>
              <li class="ui-state-default">4</li>
              <li class="ui-state-default">5</li>
              <li class="ui-state-default">6</li>
              <li class="ui-state-default">7</li>
              <li class="ui-state-default">8</li>
              <li class="ui-state-default">9</li>
              <li class="ui-state-default">10</li>
              <li class="ui-state-default">11</li>
              <li class="ui-state-default">12</li>
              <li class="ui-state-default">13</li>
              <li class="ui-state-default">14</li>
              <li class="ui-state-default">15</li>
            </ul>
            </div>
​ 
```

**CSS**

```
#selectable .ui-selecting {
    background: #C41C7B;
}
#selectable .ui-selected {
    background: #C41C7B;
    color: white;
}
#selectable {
    list-style-type: none;
    margin: 0;
    padding: 0;
    width: 450px;
}
#selectable li {
    margin: 0px;
    padding: 3px;
    float: left;
    width: 16px;
    height: 16px;
    font-size: 10px;
    font-family: Arial;
    text-align: center;
}
​ 
```

**JavaScript**

```
$(function() {
    $("#selectable").bind('mousedown', function (e) {
        e.metaKey = true;
    }).selectable();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:13:59.767

他们需要不同的身份证。两者都是`#selectable`。

这是使用类的工作更新`.selectable`。[http://jsfiddle.net/3pKQf/4/](http://jsfiddle.net/3pKQf/4/)

# c# - 为什么这个 Linq 返回 null？

> ID：13325671
> 
> 赞同：0
> 
> 时间：2012-11-10T20:12:15.813
> 
> 标签：c#, asp.net, linq, .net-4.0

我有一种方法来验证我的用户，但`user = null`即使我的表中有记录，它也会返回。

```
public bool AuthenticateUser(string username, string password)
{
   var user = GetSingleRow(c => c.Email.Equals(username) && c.Password.Equals(password) && IsActive);  

   if(user !=null && user.Id > 0)
   {
    // my statements
   }
} 
```

类和方法实现：

```
public partial class UserAccount :IRepository<UserAccount>
{
    private static readonly MeriRanchiDataContext Context;
    public UserAccount GetSingleRow(Func<UserAccount, bool> criteria)
    {
       return Context.UserAccounts.Where(criteria).SingleOrDefault();
       //tried this also: return Context.UserAccounts.SingleOrDefault(criteria);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:24:07.490

您缺少 IsActive 上的范围变量 (c)。做这个：

```
var user = GetSingleRow(c => c.Email.Equals(username) && c.Password.Equals(password) && c.IsActive); 
```

# c - bluez dbus中未发生发射信号

> ID：13325675
> 
> 赞同：3
> 
> 时间：2012-11-10T20:12:36.373
> 
> 标签：c, dbus, bluez

我编写了一些基本代码来使用 dbus api 访问“开始查询”bluez 功能。开始查询正在发生，我可以在 hcidump 上看到。但我没有收到来自 dbus 的任何信号，即“DeviceFound”。我已经尝试了很多。我尝试使用不同的 dbus 工具，例如 d-feet、dbus-monitor、bustle，但我没有任何线索。

下面是我写的代码。任何人都请告诉我为什么这段代码不起作用。

```
#include <stdio.h>
#include <stdlib.h>
#include <dbus/dbus.h>
#include <glib.h>
struct generic_data {
    unsigned int refcount;
    GSList *interfaces;
    char *introspect;
};
static void unregister(DBusConnection *connection, void *user_data)
{
}

static DBusHandlerResult filter_func(DBusConnection *connection,
                    DBusMessage *message, void *user_data)
{
    printf("Signal is called \n");
    if (dbus_message_is_signal(message, "org.bluez.Adapter",
                        "DeviceFound")) 
    {
        const char *adapter, *bdaddr;
        char *name;
        DBusMessageIter iter;

        dbus_message_iter_init(message, &iter);
        dbus_message_iter_get_basic(&iter, &bdaddr);
        printf("Finally found device address is %s\n", bdaddr);
    }
}
static DBusObjectPathVTable generic_table = {
    .unregister_function    = unregister,
    .message_function   = filter_func,
};
int main(int argc, char **argv) {
    DBusConnection *conn;
    DBusError error;
    DBusMessage *msg, *reply,*signal;
    dbus_bool_t hcid_exists,start;
    DBusMessageIter reply_iter;
    const char *name,*address;
    char *adapter, *match;
    DBusMessageIter iter;
    struct generic_data *data;
    va_list var_args;
    static GMainLoop *loop = NULL;
    conn = dbus_bus_get(DBUS_BUS_SYSTEM, NULL);
    dbus_error_init(&error);

    hcid_exists = dbus_bus_name_has_owner(conn, "org.bluez", &error);
    if(hcid_exists)
    printf("good news hurrey\n");

    /* Get the default adapter */
    msg = dbus_message_new_method_call("org.bluez", "/", "org.bluez.Manager", "DefaultAdapter");
    if (msg == NULL) {
        dbus_connection_unref(conn);
        return FALSE;
    }

    reply = dbus_connection_send_with_reply_and_block(conn, msg, -1, &error);

    dbus_message_unref(msg);

    if (dbus_error_is_set(&error)) 
    {
        dbus_connection_unref(conn);
    }

    dbus_message_iter_init(reply, &reply_iter);
    if (dbus_message_iter_get_arg_type(&reply_iter) != DBUS_TYPE_OBJECT_PATH)
    {
        dbus_message_unref(reply);
        dbus_connection_unref(conn);
        return FALSE;
    }

    dbus_message_iter_get_basic(&reply_iter, &adapter);
    adapter = g_strdup(adapter);
    //printf("Ohhhh gooood finally got adapter name %s\n",adapter);
    dbus_message_unref(reply);
    data = g_new0(struct generic_data, 1);
    if (!dbus_connection_register_object_path(conn,adapter,&generic_table, data)) {
        g_free(data->introspect);
        g_free(data);
        return FALSE;
    }
    if (!dbus_connection_add_filter(conn, filter_func, data, g_free))
    {
        g_free(adapter);
        dbus_connection_unref(conn);
        return FALSE;
    }
    if(conn!=NULL)
    msg = dbus_message_new_method_call("org.bluez",adapter,"org.bluez.Adapter", "StartDiscovery");
    else
    printf("conn is failed\n");

    if(msg!=NULL)
    start = dbus_connection_send_with_reply(conn, msg,NULL,-1);
    else
        printf("msg is failed\n");
    if(start)
    {
        //printf("Main llop hasd tp start\n");
        loop = g_main_loop_new(NULL, TRUE);
        g_main_loop_run(loop);
    }

    dbus_message_unref(msg);
    dbus_message_unref(reply);
    dbus_connection_close(conn);
    return 0;
} 
```

# android - 突出背景效果

> ID：13325682
> 
> 赞同：1
> 
> 时间：2012-11-10T20:13:39.263
> 
> 标签：android, effect

是否有像 jQuery 一样突出显示背景的 Android 效果：http: [//docs.jquery.com/UI/Effects/Highlight](http://docs.jquery.com/UI/Effects/Highlight) 我想在单击布局时对其进行降级...

还是我们必须以编程方式进行？

# c# - 泛型集合继承

> ID：13325684
> 
> 赞同：2
> 
> 时间：2012-11-10T20:13:54.330
> 
> 标签：c#, .net, generics, framework-design

我正在使用 MVVM 构建一个 WPF 应用程序，并且正在使用 ObservableCollection。在我的 ViewModel 上工作时，我决定检查 ObservableCollection 的类型定义，我看到了一些我认为很奇怪的东西：

```
// class definition for ObservableCollection
ObservableCollection<T> : Collection<T>, INotifyCollectionChanged, INotifyPropertyChanged
// derives from Collection<T>
... 
// class definition for Collection<T>
Collection<T> : IList<T>, ICollection<T>, IEnumerable<T> ... (as well as non-generics) 
```

现在，问题来了：

```
If ICollection<T> implements IEnumerable<T> 
AND 
IList<T> implements ICollection<T> AS WELL AS IEnumerable<T>
...
...
Why does Collection<T> implement ALL THREE? 
```

这真的是它的实现方式还是这个 VS2010 对我耍花招？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T21:12:52.110

如果一个类，比如`Collection<T>`implements `IList<T>`，你会去 Visual Studio 中的定义，它会显示所有`Collection<T>`实现的接口。如果`Collection<T>`实现`IList<T>`，它也将实现`ICollection<T>`和 IEnumerable 因为

```
IList<T> : ICollection<T> 
```

和

```
ICollection<T> : IEnumerable<T> 
```

等等

换句话说，如果我写

```
interface IFoo : IBar, IBaz {}
interface IBar {}
interface IBaz {}

class Foobar : IFoo {} 
```

然后Visual Studio会给我：

```
Foobar : IFoo, IBar, IBaz {...} (from metadata). 
```

如果我实现`IFoo`，我也必须实现`IBar`因为`IFoo`extends ，因此显示它也实现和`IBar`​​是有意义的（否则我只会看到，并且必须导航才能看到等）`Foobar``IBar``IBaz``IFoo``IFoo``IBar`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T21:46:11.653

实际上不仅是 Visual Studio，其他工具（如 Reflector）也会显示所有接口，这些接口是按类型实现的。我认为这个功能是通过[Type.GetInterfaces](http://msdn.microsoft.com/en-us/library/system.type.getinterfaces.aspx)实现的：

```
Type type = typeof(MyClass);
Type[] interfaces = type.GetInterfaces(); 
```

该方法获取当前 Type**实现或继承的****所有**接口。*实现的接口*是那些被声明为类型定义的一部分的接口：

 ***```
public class MyClass : IList<T> 
```

但是接口可以继承其他接口。因此，由实现的接口继承的接口是*继承的接口*：

```
 public interface IList<T> : ICollection<T>

 public interface ICollection<T> : IEnumerable<T>

 public interface IEnumerable<T> : IEnumerable 
```

所以，这里我们有三个继承的接口和一个实现的接口。所有都被视为类型接口。***

# sql-server-2008 - 如何创建仅在新记录与旧记录不同时才更新记录的触发器？

> ID：13325687
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:14:01.030
> 
> 标签：sql-server-2008, tsql, triggers

问题是创建一个触发器，该触发器仅在旧记录与新记录不同时才更新记录。我可以得到一些帮助吗？我什至不知道如何开始语法除了

```
CREATE TRIGGER update_marketingliste
ON marketing_list FOR UPDATE
AS
BEGIN

    SELECT * FROM INSERTED
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:58:09.793

我不确定架构是什么，但下面的示例代码应该可以帮助您了解如何做到这一点。

设置 NOCOUNT ON GO

创建表测试（col1 int 主键，col2 int）去

CREATE TRIGGER trg_test_upd on test INSTEAD OF UPDATE AS BEGIN

```
 IF  EXISTS (
                                SELECT * 
                                FROM Deleted  del -- old value
                                INNER JOIN Inserted ins  -- new value
                                on del.col1 = ins.col1 
                                and del.col2 = ins.col2)
            BEGIN 

                PRINT 'No Update'
                RETURN  --if old value is same as new value dont update
            END 
            ELSE 
            BEGIN 
                            UPDATE t1
                            set col2  = i.col2
                            from dbo.test t1 
                            inner join inserted i 
                            on t1.col1 = i.col1 

            END 
```

结束

插入测试 (col1, col2) select 10, 10 go

更新测试集 col2 = 200 其中 col1 = 10

从测试中选择 *

--这不会做更新更新测试集col2 = 200

去

掉落表测试

# autocomplete - 使用鼠标粘贴未激活 Google 的自动完成功能

> ID：13325690
> 
> 赞同：7
> 
> 时间：2012-11-10T20:15:15.483
> 
> 标签：autocomplete, mouse, paste

谷[歌自动完成 API](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)似乎没有通过使用鼠标将内容粘贴到文本输入中来激活。如果完全涉及键盘，它就可以正常工作，但不仅仅是鼠标。

但是，我确实注意到，在您将内容粘贴到文本输入后，它几乎可以通过任何按键激活（经过测试的右箭头键、结束键、空格键）。

你可以在他们的[自动完成演示](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)网站上复制它。

这是一个错误吗？或按设计？如果按照设计，如何应用解决方法？到目前为止，我已经将此作为一种解决方法，但似乎没有模拟按键事件有效。

```
$('.txtLocation').bind("paste", function (e)
{
    $('.txtLocation').focus();
    var e = jQuery.Event("keydown");
    e.keyCode = 39; //39=Arrow Right
    $('.txtLocation').trigger(e);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T17:54:45.753

这似乎不仅影响上下文菜单粘贴，还影响浏览器菜单栏中的编辑|粘贴以及 iOS 粘贴功能。我[用 Google 打开了一个错误](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4671&q=apitype%3AJavascript3&sort=-id&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Internal%20Stars)。您可能希望对该错误报告“加星标”以获取更新。

我找到了一种解决方法，虽然有点破解，但似乎可以解决问题。如果您存储粘贴的值，将焦点切换到不同的字段，在“自动完成”字段中设置值，最后将注意力重新集中在“自动完成”字段上，事情或多或少会按预期工作。此外，您必须在`setTimeout()`回调中执行此操作 - 延迟时间似乎根本不重要，但如果您只是内联执行此操作，您将看不到预期的结果。

这是我上面描述的代码示例：

```
$("#address_field").on("paste", googleMapsAutocompletePasteBugFix);

googleMapsAutocompletePasteBugFix = function() {
    return setTimeout(function() {
        var field, val;
        field = $("#address_field");
        val = field.val();
        $("#price").focus();
        field.val(val);
        return field.focus();
    }, 1);
}; 
```

最后一个`focus()`是可选的，但与您自动跳到下一个字段相比，UI 不会那么令人惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T08:47:34.907

以下解决方案似乎对我有用（假设存在以“address_2”结尾的字段）。在 IE8、IE9、IE10、Chrome、FF 和 Safari 上测试

```
if document.addEventListener
      $(document).on("paste", "[name*=address_1]", @googleMapsAutocompletePasteBugFix)
      $(document).on("onpaste", "[name*=address_1]", @googleMapsAutocompletePasteBugFix)
    else
      for element in $("input[name*=address_1]")
        document.getElementById($(element).attr('id')).onpaste = @googleMapsAutocompletePasteBugFix

  googleMapsAutocompletePasteBugFix: (e) ->
    unless e
      e = window.event

    if e.srcElement
      target = e.srcElement
    else
      target = e.target

    field = $(target)
    fieldId = field.attr('id')
    focusSwitchFieldId = fieldId.replace(/(\d)$/, '2')

    setTimeout(->
      if window.chrome || /Safari/.test(navigator.userAgent)
        val = field.val()
        $("##{focusSwitchFieldId}").focus()
        field.val(val)
        field.focus()
      else
        field = document.getElementById(fieldId)
        val = field.value
        document.getElementById(focusSwitchFieldId).focus()
        setTimeout(->
          field.value = val
          field.focus()
          field.focus()
        , 50)
    , 10) 
```

# php - 使用两个函数输出图像内容类型

> ID：13325692
> 
> 赞同：1
> 
> 时间：2012-11-10T20:15:20.903
> 
> 标签：php

我正在使用我的 docroot 之外的图像，并希望在函数内显示该图像。

我该如何正确地做到这一点？

这是我到目前为止所拥有的：（两个函数都在同一个文件中）

```
function page(){
  echo'
    test<br />
    '.output().'
  ';
}

function output(){
    header("Content-Type: image/gif");
    readfile( '../../../dirOutsideDocRoot/test.gif' );
} 
```

这目前将输出图像，但我无法看到它上面的“测试”。是否可以使用 将图像放入页面功能`header`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:19:08.337

您发送给客户端的最终内容只能具有一种内容类型。**图像或文本**。如果您希望两者都在一个页面中，**（当图像未写入文件时）**您可以通过以下方式将图像写入 base64：

```
data:[<MIME-type>][;charset=<encoding>][;base64],<data> 
```

**在你的情况下，**

```
data:image/gif;base64,<base64_encoded_image> 
```

请参阅**[数据 URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)**

* * *

像下面这样的东西会起作用：（**未经测试**）

```
$img = fread(fopen($path, "r"), filesize($path));
$base64 = "data:image/gif;base64," . base64_encode($img); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:19:30.360

听起来您要做的是在同一页面上显示图像和文本。为此，您必须创建一个包含文本的页面，并有一个`img`指向另一个 php 页面的标签，该页面只发回图像。

您的`Content-Type`标题告诉浏览器整个页面都是图像。虽然，这也不会发生，因为 php 会失败，说数据已经发送，所以它不能输出标题。

希望这可以帮助。

编辑：您也可以像 Cthulhu 所说的那样，使用 base64 嵌入图像，如下所示：

```
function output(){
    $imgbinary = fread(fopen('../../../dirOutsideDocRoot/test.gif', "r"), filesize($filename));
    echo '<img src="data:image/gif;base64,' . base64_encode($imgbinary).'" />';
} 
```

有关 php 中 base_64 编码的更多信息，请参阅[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:34:17.800

你应该有两个 php 页面：

第 1 页：

```
echo'
    test<br /><img src="page2.php"/>'; 
```

第2页：

```
header("Content-Type: image/gif");
readfile( '../../../dirOutsideDocRoot/test.gif' ); 
```

# r - 是否有用于查找包含矩阵中特定元素的行的 R 函数？

> ID：13325694
> 
> 赞同：6
> 
> 时间：2012-11-10T20:15:40.583
> 
> 标签：r, matrix, rows

假设我有一个`4x2`矩阵。

```
x<- matrix(seq(1:8), 4) 
```

包含以下元素

```
1 5
2 6
3 7
4 8 
```

对于这个特定示例，假设我要删除包含“2”或“7”的行（无需手动查看矩阵并删除它们）。我该怎么做？

这是我想出的东西，但它并没有按照我的意愿去做。我希望它返回矩阵中包含 a`2`或 a的行索引`7`。

```
remove<- which(2 || 7 %in% x)
x<- x[-remove,] 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T20:37:12.000

```
x[-which(x == 2 | x == 7, arr.ind = TRUE)[,1],] 
```

是我能想到的最简单、最有效的方法。

单“|” 检查每个元素是 2 还是 7（'||' 不会这样做）。arr.ind 将每个位置作为一对坐标给出，而不是默认的单个数字。[,1] 选择具有 2 或 7 的每一行。

希望有帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T20:24:42.003

正如@Dirk 所说，`which`这是正确的功能，这是我的答案：

```
index <- apply(x, 1, function(a) 2 %in% a || 7 %in% a)
> index
[1] FALSE  TRUE  TRUE FALSE
x[index, ] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T22:59:25.057

`x[-which(...), ]`不是正确的方法...为什么？看看如果`which`找不到匹配项会发生什么：

```
x <- matrix(8, nrow = 4, ncol = 2)
x[-which(x == 2 | x == 7, arr.ind = TRUE)[,1],] 
#      [,1] [,2] 
```

（它什么都不返回，而它应该返回整个`x`。）

相反，使用逻辑索引是更安全的方法：您可以否定匹配向量，而不会冒上面显示的奇怪行为的风险。这是一个例子：

```
x[!(rowSums(x == 2 | x == 7) > 0), , drop = FALSE] 
```

也可以写成更短的形式：

```
x[!rowSums(x == 2 | x == 7), , drop = FALSE] 
```

# php - 带有数组的php sprintf

> ID：13325698
> 
> 赞同：37
> 
> 时间：2012-11-10T20:16:26.997
> 
> 标签：php, arrays, printf

我有一个数组女巫匹配字符串占位符，如下所示：

```
"some text %s another text %s extra text %s" 
```

和数组：

```
$array[0] match the first %s 
$array[1] match the second %s 
$array[2] match the third %s 
```

我认为可以使用 sprintf 函数来完成，如下所示：

```
$content = sprintf("some text %s another text %s extra text %s", $array); 
```

但这返回了太少的参数错误，我尝试使用内爆：

```
$content = sprintf("some text %s another text %s extra text %s", implode(",",$array)); 
```

提前致谢

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-10T20:17:51.230

使用[`vsprintf`](http://php.net/manual/en/function.vsprintf.php)而不是`sprintf`. 它接受一个数组参数，从中格式化字符串。

```
$content = vsprintf("some text %s another text %s extra text %s", $array); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-09-16T09:30:26.577

`vsprintf`PHP 5.6+的替代方案

```
sprintf("some text %s another text %s extra text %s", ...$array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-02T23:08:25.107

在这里你必须使用`vsprintf()`而不是`sprintf()`.

`sprintf()`只接受普通变量作为参数。但是您试图将数组作为参数传递。

为此，您需要`vsprintf()`接受数组作为参数。

例如在你的情况下：

```
"some text %s another text %s extra text %s" 
```

和数组：

```
$array[0] match the first %s 
$array[1] match the second %s 
$array[2] match the third %s 
```

要实现您想要的，您必须执行以下操作：

```
$output = vsprintf("some text %s another text %s extra text %s",$array);
echo $output; 
```

输出：

```
some text match the first another text match the second extra text match the third 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-06T01:03:58.363

```
$rv = array(1,2,3,4);
sprintf('[deepak] yay [%s]', print_r($rv, true)) 
```

# memory-management - 写入大文件可防止大块 DMA 分配

> ID：13325704
> 
> 赞同：2
> 
> 时间：2012-11-10T20:17:14.487
> 
> 标签：memory-management, linux-kernel, arm, dma, sata

我正在使用带有运行 linux (3.0.35) 的基于 ARM 的处理器的板。主板有 1GB RAM，并连接到快速 SSD HD 和 5MP 摄像头。

我的目标是捕获高分辨率图像并将其直接写入磁盘。

一切顺利，直到我尝试保存一个很长的视频（超过 1GB 的数据），

保存大文件后，我似乎无法重新加载相机驱动程序 - 它无法为流分配足够大的 DMA 内存块（调用 dma_alloc_coherent() 时）。

我将其缩小到 Linux 启动的场景（当大部分内存可用时），然后我将随机数据写入一个大文件（>1GB），当我尝试加载相机驱动程序时它失败了。

对于我的问题-

当我打开一个文件进行写入，写入大量数据并关闭文件时，用于将数据写入HD的内存不应该被释放吗？

我可以理解为什么在 HD 访问期间内存会变得碎片化，但是当对 HD 的事务完成时 - 为什么内存仍然如此碎片化以至于我无法分配 15MB 的连续 RAM？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:45:19.960

> [...]关闭文件，用于将数据写入HD的内存不应该被释放吗？

不，它会被**缓存**，你可以检查`/proc/meminfo`一下。该函数是否`dma_alloc_coherent()`只使用空闲内存是一个很好的问题。

# javascript - 使 JavaScript 的类型化数组“字节序安全”的最佳实践是什么？

> ID：13325705
> 
> 赞同：1
> 
> 时间：2012-11-10T20:17:15.737
> 
> 标签：javascript, cross-platform, endianness, typed-arrays

JavaScript 类型数组在字节序方面存在危险。

假设你有一个这样的函数：

```
var encodeFloat32 = (function() {
  var arr  = new Float32Array( 1 );
  var char = new Uint8Array( arr.buffer );
  return function( number ) {
    arr[0] = number;
    return String.fromCharCode( char[0], char[1], char[2], char[3] );
  };
}()); 
```

如果您要在 Big Endian 系统上运行它，这是一个潜在的危险函数，因为您将 ArrayBuffers 字节提交给“fromCharCode”方法的顺序。

因此，您需要创建某种字节序安全性以使您的代码独立于平台。

在用 JavaScript 编写的应用程序中创建“字节序安全”的最佳实践是什么？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T11:17:30.347

我在 javascript 中使用这样的函数首先检查（我设置了字符串的效果，我通常只使用 bool 或类似的）：

```
function checkEndian(){
    var a = new ArrayBuffer(4);
    var b = new Uint8Array(a);
    var c = new Uint32Array(a);
    b[0] = 0xa1;
    b[1] = 0xb2;
    b[2] = 0xc3;
    b[3] = 0xd4;
    if(c[0] == 0xd4c3b2a1) return "little endian";
    if(c[0] == 0xa1b2c3d4) return "big endian";
    else throw new Error("Something crazy just happened"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:24:04.123

~~根据这篇文章，字节序在 JavaScript 中是安全的~~

~~[JavaScript 字节序编码？](https://stackoverflow.com/questions/504030/javascript-endian-encoding?rq=1)~~

查看对您的要求很有用的[DataView](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/DataView)对象（仍处于草稿中），因为它提供了[littleEndian 布尔值](http://www.khronos.org/registry/typedarray/specs/latest/#8)

# objective-c - 带有两个 UIButton 的场景

> ID：13325708
> 
> 赞同：0
> 
> 时间：2012-11-10T20:17:30.993
> 
> 标签：objective-c, ios, xcode, storyboard, uistoryboardsegue

刚开始在 Xcode 开发中探索 Storyboard。我有两个 UIButtons 的第一个场景。两个按钮的 segues 都指向同一个场景，但有两个不同的场景。我是否理解正确，为了实现这一点，我需要在 IB 中设置 segue 标识符（例如 seg1、seg2），然后在 .m 中只实现一个这样的方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
 if ([segue.identifier isEqualToString: @"seg1"]) {
 // first scenario
  } else if ([segue.identifier isEqualToString: @"seg2"]) {
 // second scenario
  }
} 
```

如果没有，如何实现这种行为？谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:10:07.330

是的，你在技术上是正确的——最好的正确

# ruby-on-rails - `default_controller_and_action'：Ruby 3 中缺少：controller (ArgumentError)

> ID：13325713
> 
> 赞同：2
> 
> 时间：2012-11-10T20:17:42.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在创建一个网站，用户可以发布工作并且用户可以登录、注册等。我已经创建了我的工作模型并为登录/注册部分创建了我的用户模型。当我尝试加载 rails 服务器时，我不断在下面收到此错误，并且无法弄清楚我做错了什么或如何修复。我最初试图使用设计和创建用户模型，但遇到了问题，所以我删除了它的文件。我想知道我是否删除了某些内容，或者我的 routes.rb 文件中是否缺少某些内容。有人可以帮助或指出我正确的方向吗？我也会发布我的 routes.rb 文件。感谢您的任何指导，因为我仍然是 Rails 新手。我添加到 routes.rb 文件中的唯一内容是 root :to => "sessions#login" 及以下内容。我确定在创建模型和控制器时添加了其他信息。

****/home/whitey7/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:181：在“default_controller_and_action”中：缺少：控制器（ArgumentError）* *****

 ****路由.rb**

```
Application.routes.draw do 
 get "sessions/login,"
 get "sessions/home,"
 get "sessions/profile,"
 get "sessions/setting"
 get "users/new"

 resources :jobs 

root :to => "jobs#index"
root :to => 'home/index'
 root :to => "sessions#login"
match "signup", :to => "users#new"
match "login", :to => "sessions#login"
match "logout", :to => "sessions#logout"
match "home", :to => "sessions#home"
match "profile", :to => "sessions#profile"
match "setting", :to => "sessions#setting" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T18:08:07.877

我认为您在 routes.rb 中仍然有一条无效的路线。请重新检查所有路由，对应的控制器和动作。还请分享完整的错误跟踪，这样我们就可以查明问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T00:02:19.527

请检查作业控制器是否仍然存在。因为这是你的路由声明中的第一个根指令（而且，有多个指令仍然没有意义），Rails 正在检查这个根路由是否可用。似乎作业控制器丢失并导致此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-17T09:39:05.373

首先，查看 Rails[路由](http://guides.rubyonrails.org/routing.html)文档。我认为您收到此错误是因为您无法定义路由文件。我在您的路线文件中发现的问题是：-

一种。您的路由文件中有三个不同的根目录。

```
root :to => "jobs#index"
root :to => 'home/index'
 root :to => "sessions#login" 
```

湾。您正在多次定义相同的路线。

```
 get "sessions/login,"
 get "sessions/home,"
 get "sessions/profile,"
 get "sessions/setting"
 get "users/new"

match "signup", :to => "users#new"
match "login", :to => "sessions#login"
match "home", :to => "sessions#home"
match "profile", :to => "sessions#profile"
match "setting", :to => "sessions#setting" 
```

解决方案可能如下：-

一种。首先修复根路径。无论是作业索引、主页索引还是会话登录，您要创建哪个路径。

湾。我认为您正在尝试这样定义您的路线

```
match "signup", :to => "users#new", via: :get
match "login", :to => "sessions#login", via: :get
match "home", :to => "sessions#home", via: :get
match "profile", :to => "sessions#profile", via: :get
match "setting", :to => "sessions#setting", via: :get 
```**

# jquery - 用jquery交换输入元素，不保留值

> ID：13325714
> 
> 赞同：1
> 
> 时间：2012-11-10T20:17:45.137
> 
> 标签：jquery, swap

我有一个带有向上/向下箭头的表单生成器来交换位置。一切正常，只是在进行切换时不会保留在 textarea 或输入字段中键入的任何新输入。

这是向上交换对象的代码

```
$("a.move-up").live('click', function() {
      var xvalue = $(this).attr("xvalue");
      var this_row =  $("tr#row-" + xvalue).html();
      this_row = "<tr id='row-" + xvalue + "'>" + this_row + "</tr>";

      var position = $("table#input-table tr").index($('tr#row-' + xvalue));
      position++;

      var prev_position = position - 1;

      $("#input-table tr:nth-child(" + position + ")").remove();
      $(this_row).insertBefore("#input-table tr:nth-child(" + prev_position + ")");

      //alert(this_row);

      return false;

   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:18:57.417

您真正需要做的就是将整行作为 jQuery 对象移动，而无需在 html 字符串中重建它。使用 jQuery 时，重要的是要了解`$(selector)`对象包含完整的 DOM 元素，其属性比组成它的 html 更多

```
$("a.move-up").live('click', function() {
    var xvalue = $(this).attr("xvalue");
    var this_row = $("tr#row-" + xvalue)
    var prev_row = this_row.prev();
    this_row.inserBefore(prev_row);

    return false;

}); 
```

如果`move-up`按钮在行内，您可以使用简单的遍历来识别当前行并进一步简化代码

```
$("a.move-up").live('click', function() {

    var this_row = $(this).closest('tr')
    var prev_row = this_row.prev();
    this_row.inserBefore(prev_row);

    return false;

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:27:43.337

您会错过这些值，因为它们不是 html() 方法返回的 HTML 代码的一部分。您必须手动重写这些值。尝试将函数的开头更改为：

```
var this_row =  $("tr#row-" + xvalue);
var new_row = "<tr id='row-" + xvalue + "'>" + this_row.html() + "</tr>";
this_row.find("input[type=text], textarea").each(function(index){
    $(new_row.find("input[type=text], textarea")[index]).val( $(this).val() );
});
this_row = new_row; 
```

# c# - 如何确定文件是否已完成下载

> ID：13325715
> 
> 赞同：0
> 
> 时间：2012-11-10T20:17:45.407
> 
> 标签：c#, .net, windows

我每天下载 GB 的东西。而且我每天都有很多次强迫症并组织文件和文件夹，这让我发疯。

因此，我计划编写一个应用程序来检测文件何时完成下载（到 Windows 下载文件夹），然后将其放在相关的分类文件夹中。

例如：我下载了一个应用程序。当应用程序检测到文件已完成下载时，它会将其放入子文件夹*Applciations*中。或者，当我完成一个文档的下载后，该文档会被放置在 Downloads 文件夹的*Documents*子文件夹中。

我在这里遇到的问题是我不想这样做，除非有明确的方法来判断文件是否已完成下载。

我想到的事情：

1.  我曾考虑在 Downloads 文件夹上实现 FileSystemWatcher，当在那里创建新文件时，它会被添加到列表中。并且当 FileSystemWatcher 检测到文件大小发生变化，或者已经被修改时，它会启动一个定时器；此计时器的目的是*在**x**秒*后确定下载是否完成。它通过假设（错误地）如果文件的大小在指定的时间段内没有增加，则下载完成。

这就是我能想到的。关于如何完成这种事情的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:26:35.853

文件被访问时被阻止。不是每个文件。但是您可以检查该文件是否被另一个应用程序打开。如果文件未打开 - 这应该告诉您，它已完全下载。

# java - 显示黑色矩形的绘图

> ID：13325718
> 
> 赞同：1
> 
> 时间：2012-11-10T20:18:02.087
> 
> 标签：java, android, drawable

此问题仅发生在随机设备上。例如，我的 G Nexus 正确显示图标，但我朋友的没有。

我的drawables全部存储在“drawables”文件夹中，而不是具有特定像素密度的那些。

它正确显示其他图标。只有我使用 Drawables 以编程方式创建的那个才会出错。

日志猫似乎没有抛出任何异常。

出于某种原因，仅在某些设备上，我尝试绘制的图标显示为黑色矩形。这只发生在我第一次转换为 Drawable 的图标上。我的代码如下：

```
public static class GridItem {
    public String text;
    public Drawable image;
    public Intent intent;
    public GridItem(String text, Drawable Image, Intent intent) {
         this.text = text;
         this.image = image;
         image.setBounds(0, 0, 160, 160);
         this.intent = intent;
    }
} 
```

以下是我创建 Drawable 的方法：

```
gridItems.add(new GridItem("Schedule", getResources().getDrawable(R.drawable.schedule),
    new Intent(this, ScheduleActivity.class))); 
```

这是 BaseAdapter 类：

```
public class GridMenuAdapter extends BaseAdapter {

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View item = getLayoutInflater().inflate(R.layout.grid_item_layout, null);
        item.setPadding(0, 50, 0, 40);
        GridItem current = gridItems.get(position);
        TextView label = (TextView)item.findViewById(R.id.item_label);
        label.setText(current.text);
        label.setCompoundDrawables(null, current.image, null, null);
        label.setCompoundDrawablePadding(32);
        item.setMinimumHeight(300);
        return item;
    }

    @Override
    public final int getCount() {
        return gridItems.size();
    }

    @Override
    public Object getItem(int position) {
        return gridItems.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:05:35.370

已解决：较新版本的 Android 不喜欢 .gif 文件，所以我只是将它们全部转换为 png，现在它工作正常。

# game-engine - 简单的动画益智游戏开发

> ID：13325723
> 
> 赞同：0
> 
> 时间：2012-11-10T20:18:27.913
> 
> 标签：game-engine, gamekit

我想开发一个简单的“猜下一帧”游戏。基本上，游戏将显示一张股票图表图片，图表右侧隐藏（未来价格）。当玩家准备好时，他会向上或向下猜测价格，并揭示未来价格的下一个隐藏部分。如果正确，他会得到分数……类似的东西。简单的游戏。

我可以使用任何现有的游戏代码和框架来开发它吗？我是游戏开发的新手。我怀疑有游戏引擎或框架可以让这种类型的游戏变得简单快捷。

最好能在手机操作系统和PC上运行

任何人都可以建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:23:25.673

简单的 javascript 游戏应该可以解决问题。只是涉及一些不太复杂的小逻辑。如果您想过度使用它，您可能会使用[mvc 框架](http://addyosmani.github.com/todomvc/)。您可能只是为您将要呈现的图表做一个简单的 jQuery/HTML 混合与一个小型服务器后端。

# kohana - Kohana 3.2 和 Kohana 3.3 之间的主要区别是什么

> ID：13325724
> 
> 赞同：1
> 
> 时间：2012-11-10T20:18:37.203
> 
> 标签：kohana, kohana-3.2, kohana-3.3

`vendor`在我的第一个视图中，除了新文件夹之外，我没有发现任何原则上的差异。

这些是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T23:37:23.153

查看文档： http: [//kohanaframework.org/3.3/guide/kohana/upgrading](http://kohanaframework.org/3.3/guide/kohana/upgrading)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:36:35.090

*   新模块 - [Minion](http://kohanaframework.org/3.3/guide/minion)。
*   ORM 模块的[一点变化](http://kohanaframework.org/3.3/guide/orm/upgrading)。

# java - 格式化按字母顺序排列的集合

> ID：13325725
> 
> 赞同：-2
> 
> 时间：2012-11-10T20:18:40.353
> 
> 标签：java, collections, linked-list

我有一个从员工类读入的姓氏集合。是否可以在排序之后组织排序名称的输出？我需要一个类似于我已注释掉的行的输出，而不是我现在从 Collection 中获得的以逗号分隔的姓氏“[Name1, Name2, Name3...]”的通用单行输出...

```
 public void alpha1()
    {
     LinkedList<String> alphalist = new LinkedList<String>();
     ListIterator<Employee> iterate = list.listIterator(0);
    // System.out.println("First Name" + "\t" + "Last Name" + "\t" + "Salary");
     while (iterate.hasNext())
      {
           emp = iterate.next();

       alphalist.add(emp.getlastname());
      }
      Collections.sort(alphalist, new Comparator<String>() {
         @Override
         public int compare(String o1, String o2) {
             return Collator.getInstance().compare(o1, o2);
         }
     });
     System.out.println(alphalist);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:23:43.190

我认为最好`Comparator`在`Employee`对象上创建并对原始集合本身进行排序。

对集合进行排序后，使用`Employee`对象本身迭代并打印您的集合。

例如

```
 public void alpha1()
   {
       Collections.sort(list, new Comparator<Employee>() {
        @Override
        public int compare(Employee o1, Employee o2) {
          return o1.getLastName().compareTo(o2.getLastName());
        }
      });

      ListIterator<Employee> iterate = list.listIterator();
      while (iterate.hasNext())
      {
        emp = iterate.next();
        System.out.println("First Name" + "\t" + "Last Name" + "\t" + "Salary");
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:25:41.263

与其存储姓氏字符串列表，更好的方法是存储员工对象并按姓氏对它们进行排序。

您可以`Comparable`在您的`Employee`类中实现以定义其自然排序。然后，您制作`alphalist`一个员工列表，并使用`Collections.sort(alphalist)`.

```
public class Employee implements Comparable<Employee> {
    ...

    @Override
    public int compareTo(Employee emp) {
        return this.getLastName().compareTo(emp.getLastName());
    }
} 
```

然后，您的新`alpha1()`方法：

```
public void alpha1() {
    LinkedList<Employee> alphalist = new LinkedList<Employee>();
    ListIterator<Employee> iterate = list.listIterator(0);
    while (iterate.hasNext()) {
        alphalist.add(iterate.next());
    }
    Collections.sort(alphalist);
    System.out.println(alphalist); 
} 
```

# c# - WPF：如何处理单击和双击按钮？

> ID：13325726
> 
> 赞同：1
> 
> 时间：2012-11-10T20:18:41.530
> 
> 标签：c#

> **可能重复：**
> [WPF：按钮单击 + 双击问题](https://stackoverflow.com/questions/971459/wpf-button-single-click-double-click-problem)
> [WPF/MVVM - 如何处理 ViewModel 中的 TreeViewItems 双击？](https://stackoverflow.com/questions/4497825/wpf-mvvm-how-to-handle-double-click-on-treeviewitems-in-the-viewmodel)

我需要处理具有不同反应的 WPF 应用程序中按钮的单击和双击。单击一次我只想显示该按钮具有焦点，双击我想显示一个新窗口（类似于 Windows 图标行为）。但是在双击时，WPF 会触发两次单击，因此很难处理这种情况。任何人都可以帮助解决这个问题吗？谢谢你的帮助。

我试过这个：

```
private static DispatcherTimer myClickWaitTimer = 
    new DispatcherTimer(
        new TimeSpan(0, 0, 0, 1), 
        DispatcherPriority.Background, 
        mouseWaitTimer_Tick, 
        Dispatcher.CurrentDispatcher);

private void Button_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    // Stop the timer from ticking.
    myClickWaitTimer.Stop();

    Trace.WriteLine("Double Click");
    e.Handled = true;
}

private void Button_Click(object sender, RoutedEventArgs e)
{
    myClickWaitTimer.Start();
}

private static void mouseWaitTimer_Tick(object sender, EventArgs e)
{
    myClickWaitTimer.Stop();

    // Handle Single Click Actions
            MainWindow c = new MainWindow()
    c.focusButton.Background = new SolidColorBrush(Colors.DarkBlue);
} 
```

但是当我点击 focusButton 时，focusButton Bacground 并没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:20:49.660

有趣的问题。在我看来，第一步你必须像往常一样以不同的方式处理 Button_click。也许尝试使用一些计数器和计时器？

# c# - 如何观察标签内容？

> ID：13325728
> 
> 赞同：1
> 
> 时间：2012-11-10T20:18:45.450
> 
> 标签：c#, wpf, binding, label, contentobserver

我的 TimeEntry 窗口中有 3 个字段：

*   开始时间
*   时间结束
*   长度（双小时）

所有控件都绑定到一个对象。

我已经在模型类中实现了 System.ComponentModel.INotifyPropertyChanged，并且我已经在开始或结束时间更改了标签中的内容，但是..

我必须观察块修改的变化，这将创建低于 0 的长度。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:53:06.940

您可以在模型类中实现此逻辑

```
public class MyModel : INotifyPropertyChanged
{
  ...
    public DateTime StartTime
    {
        get { return _startTime; }
        set 
        {
             if ((EndTime - value).TotalMinutes >= 0) // only allow changes if it doesn't result in < 0 timespan.
             {
                 _startTime = value;
                 OnPropertyChanged("StartTime", "Length");
             }
        }
    }

    public DateTime EndTime
    {
        get { return _endTime; }
        set 
        {
             if ((value - StartTime).TotalMinutes >= 0) 
             {
                 _endTime = value;
                 OnPropertyChanged("EndTime", "Length");
             }
        }
    }

    public double Length
    {
         get { return (EndTime - StartTime).TotalMinutes / 60.0; }           
    }
  ...
} 
```

# nhibernate - 在 NHibernate 中使用 GUID 类型作为主键并保存实体

> ID：13325732
> 
> 赞同：2
> 
> 时间：2012-11-10T20:19:16.993
> 
> 标签：nhibernate, fluent-nhibernate

我使用 NH 作为我的数据访问层，并且似乎 GUID 类型作为主键存在问题：

```
public partial class Member
    {
        public virtual Guid UserId { get; set; }
        public virtual string UserName { get; set; }
    }

 public MemberMapping()
        {
            Id(x => x.UserId).GeneratedBy.GuidComb();
            Map(x => x.UserName).Length(20).Not.Nullable();
        } 
```

看起来，即使我将 UserId 更改为以下映射：

```
Id(x => x.UserId).GeneratedBy.Assgined(); 
```

然后初始化我自己的UserId，成员类型的对象没有开始保存......

但是当我为 UserId 使用 Int 数据类型时，它被正确保存。

我阅读[了不会以 guid 作为 id-fluent-nhiberate](https://stackoverflow.com/questions/1481602/wont-save-to-database-with-guid-as-id-fluent-nhiberate)问题保存到数据库并使用 Save() 方法以 GUIdD 作为键保存成员实体，但它不起作用！

感谢您的考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:24:50.660

您在后续评论中链接到的页面是关于创建和注入会话的。它根本没有提到“事务”或“提交”。您应该始终使用 NHibernate 事务。在默认设置下，提交事务将触发会话以刷新对数据库的任何更改。这是一个必要的步骤，因为刷新是保证将更改发送到数据库的唯一步骤。

更多关于冲洗： http: [//nhibernate.info/doc/nh/en/index.html#manipulatingdata-flushing](http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-flushing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:24:18.243

这实际上是我的一个重大疏忽。因为我的实体都使用原生 ID 生成，所以即使我从未刷新事务，它们也会在保存时插入。（规则的一个例外。请参阅这个出色的解释：[https](https://stackoverflow.com/a/43567/1015595) ://stackoverflow.com/a/43567/1015595 ）

另一方面，您的成员实体将 ID 映射到 Guid。在这种情况下，对象的行为与预期一样，并且在事务被刷新之前不会持久化。

就像奥斯卡在他的回答中所说的那样，您应该在尝试保存任何内容并在之后提交交易之前开始交易。一个好的做法是将保存包装在 try-catch 语句中：

```
// Adds sample data to our database
public ActionResult Seed()
{
    ...

    StoreRepository.BeginTransaction();

    try
    {
        StoreRepository.SaveOrUpdateAll( barginBasin, superMart );

        StoreRepository.Commit();

        return RedirectToAction( "Index" );
    }
    catch
    {
        StoreRepository.Rollback();

        return RedirectToAction( "Error" );
    }
} 
```

以下是您需要添加到存储库的方法：

```
public void BeginTransaction()
{
    Session.BeginTransaction();
}

public void Commit()
{
    Session.Transaction.Commit();
}

public void Rollback()
{
    Session.Transaction.Rollback();
} 
```

您希望将这些方法保留在存储库中，以便您的控制器保持可测试性。

当我写那篇文章时，我对 NH 交易一无所知。让我绊倒的是[温莎城堡文档](http://stw.castleproject.org/Windsor.Windsor-Tutorial-Part-Six-Persistence-Layer.ashx)的这一部分：

> 我们刚刚所做的事情有一个重要的，尽管是无形的影响。通过注册组件，我们不只是告诉 Windsor 如何创建它们。Windsor 还将为我们妥善销毁这些实例，从而管理它们的整个生命周期。用外行的话来说，温莎将在不再使用这两个对象时将它们处理掉。这意味着它将为我们将我们对 ISession 所做的更改刷新到数据库中，并清理 ISessionFactory。我们免费获得所有这些。

如果你问我，这很误导。

# javascript - setTimeout/setInterval 有多个延迟来执行代码

> ID：13325742
> 
> 赞同：3
> 
> 时间：2012-11-10T20:20:43.283
> 
> 标签：javascript, arrays, settimeout, delay, setinterval

我有一个数组，其中存储了多个延迟：`myArray[8000,4000,3000,6000,5000]`. 我需要`setTimeout`/`setInterval`来运行每个延迟，然后执行一段特定的代码。例如：

```
myArray[0]=8000;
myArray[1]=4000;
myArray[2]=3000;
myArray[3]=6000;
myArray[4]=5000;

for(var k=0;k<5;k++)
{
    setTimeout(function() {

console.log("CODE TO BE EXECUTED");

    }, diffArray[k]);
} 
```

所以最终的结果是等待 12 秒运行代码，等待 4 秒运行代码，等待 3 秒运行代码，等待 6 秒运行代码，然后等待 5 秒运行代码。当前代码同时运行它们。

我知道这很可能需要通过递归来完成，我已经尝试了一些事情来让它工作，但没有运气。我让它以一种方式工作，但不幸的是它锁定了 UI 线程，我需要在运行时在 UI 中执行其他操作。对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:24:14.403

按顺序运行 setTimeout。您正在同时运行所有 setTimeout 。

```
myArray[0]=8000;
myArray[1]=4000;
myArray[2]=3000;
myArray[3]=6000;
myArray[4]=5000;
var k =0;
    function repeat(){
       if(k == myArray.length) return;
      setTimeout(function() {
              repeat();
              console.log("CODE TO BE EXECUTED");

      }, myArray[k]);
     k++;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:23:20.777

您应该创建另一个函数，以便每次都复制 k 变量，因为 setTimeout 是异步操作：

```
var func = function(k)
{
  setTimeout(function() {
    console.log("CODE TO BE EXECUTED");
    }, diffArray[k]);
}

for(var k=0;k<5;k++)
{
  func(k)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T22:23:51.540

您提到 12 秒，但没有那么大的值。如果您希望代码运行 8 秒、12 秒、15 秒、21 秒和 26 秒，那么：

```
var delay =0;
for(var k=0;k<5;k++){
   delay+=myArray[k];
   setTimeout(function() {
      console.log("CODE TO BE EXECUTED");
   }, delay);
} 
```

# flash - AS3 Flash、AIR3+、Android 与 navigateToUrl 共享意图

> ID：13325752
> 
> 赞同：1
> 
> 时间：2012-11-10T20:22:29.123
> 
> 标签：flash, android-intent, air, navigatetourl

我使用 Flash CS5.5/AIR 3 创建了我的第一个 android 应用程序。我试图弄清楚如何创建和调用意图以通过用户设备支持的任何应用程序共享图像。本文介绍了如何创建意图[http://androidthings.blogspot.com/2011/10/adding-share-button-to-your-android.html#.UJ6fD4fAd8E](http://androidthings.blogspot.com/2011/10/adding-share-button-to-your-android.html#.UJ6fD4fAd8E)

...但我相信它是指使用 eclipse/java/android sdk。

据我了解，现在可以在 AIR3+ 中通过 navigateToUrl 传递意图，此处的示例代码为[http://forums.adobe.com/message/3873002](http://forums.adobe.com/message/3873002)

我是使用 Flash/air 进行 android 开发的新手，并试图将所有这些部分组合在一起。尽管有一些关于这个的帖子......他们都没有真正阐明如何以这种方式实现共享意图。有谁知道如何解决这个问题？

# python - 如何在 Python 中的字符串中查找重音字符？

> ID：13325753
> 
> 赞同：7
> 
> 时间：2012-11-10T20:22:30.000
> 
> 标签：python, string, unicode

我有一个包含句子的文件，其中一些是西班牙语，包含重音字母（例如 é）或特殊字符（例如 ¿）。我必须能够在句子中搜索这些字符，以便确定该句子是西班牙语还是英语。

我已经尽力做到这一点，但没有成功。以下是我尝试过的解决方案之一，但显然给出了错误的答案。

```
sentence = ¿Qué tipo es el? #in str format, received from standard open file method
sentence = sentence.decode('latin-1')
print 'é'.decode('latin-1') in sentence
>>> False 
```

我也尝试使用 codecs.open(.., .., 'latin-1') 来读取文件，但这没有帮助。然后我尝试了 u'é'.encode('latin-1')，但没有成功。

我在这里没有想法，有什么建议吗？

@icktoofay 提供了解决方案。我最终保留了文件的解码（使用 latin-1），但随后使用 Python unicode 作为字符（`u'é'`）。这需要我在脚本顶部设置 Python unicode 编码。最后一步是使用该`unicodedata.normalize`方法对两个字符串进行标准化，然后进行相应的比较。感谢你们的及时和大力支持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:24:57.150

[`unicodedata.normalize`](http://docs.python.org/2/library/unicodedata.html#unicodedata.normalize)检查前在字符串上使用。

### 解释

Unicode 提供多种形式来创建某些字符。例如，`á`可以用单个字符`á`、 或两个字符来表示：`a`，然后 'put a `´`on that'。规范化字符串将强制它使用一种或另一种表示形式。（它归一化的表示取决于您作为`form`参数传递的内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:37:49.570

我怀疑您的终端使用的是 UTF-8，所以`'é'.decode('latin-1')`不正确。只需使用 Unicode 常量代替`u'é'`。

要在脚本中正确处理 Unicode，请声明脚本和数据文件编码，并对传入数据进行解码，并对传出数据进行编码。对脚本中的文本使用 Unicode 字符串。

示例（以 UTF-8 保存脚本）：

```
# coding: utf8
import codecs
with codecs.open('input.txt',encoding='latin-1') as f:
    sentence = f.readline()
if u'é' in sentence:
    print u'Found é' 
```

请注意，`print`隐式编码终端编码中的输出。

# php - 如何在php中旋转图像？

> ID：13325754
> 
> 赞同：4
> 
> 时间：2012-11-10T20:22:34.983
> 
> 标签：php, image, rotation

我有一个函数可以生成适合圆圈下部的文本。因为我不知道任何其他方法可以使函数适合圆的上部使其面向我，所以我想旋转图像，在其上书写，将其旋转回来并再次在其上书写。如何在不更改图像名称的情况下做到这一点？

我尝试过这样的事情：

```
<?php
function  create_image()
{

$im = @imagecreate(140, 140)or die("Cannot Initialize new GD image stream");
$background_color = imagecolorallocate($im, 255, 255, 255);

imageellipse ( $im , $cx , $cy , $size*2 , $size*2 , $black );

write($im,$cx,$cy,$size,$s,$e,$black,$text1,$font,$size,$pad);
imagerotate($im, 180,0);
write($im,$cx,$cy,$size,$s,$e,$black,$text2,$font,$size,$pad);
imagerotate($im, 180,0);

imagepng($im,"image.png");
imagedestroy($im);  

}
?>

<?php
create_image();
print "<img src=image.png?".date("U").">";
?> 
```

但它不起作用。它不会旋转图像。

你能帮我么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:26:33.640

你为什么不直接拍摄普通图像并添加一些 css 到它

**CSS**

```
.yourImage {
 -webkit-transform: rotate(-90deg);
 -moz-transform: rotate(-90deg);
 filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
} 
```

**HTML**

```
<img class="yourImage" src="originalImage.jpg"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T20:37:49.737

不知道为什么你需要旋转两次..但这就是你的代码应该是什么样子

```
function create_image($img) {
    $im = @imagecreatefrompng($img) or die("Cannot Initialize new GD image stream");
    $rotate = imagerotate($im, 180, 0);
    imagepng($rotate);
    imagedestroy($rotate);
    imagedestroy($im);
}

header('Content-Type: image/png');
$image = "a.png";
create_image($image); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-21T15:54:04.423

您可以使用 php 旋转功能轻松完成。这是简单的代码

```
<?php 
 $image = 'test.jpg';

// The file you are rotating

//How many degrees you wish to rotate
 $degrees = 180;

// This sets the image type to .jpg but can be changed to png or gif
 header('Content-type: image/jpeg') ;

// Create the canvas
   $src = $image;
$system = explode(".", $src);

if (preg_match("/jpg|jpeg/", $system[1]))
{
    $src_img=imagecreatefromjpeg($src);
}
if (preg_match("/png/", $system[1]))
{
    $src_img = imagecreatefrompng($src);
}
if (preg_match("/gif/", $system[1]))
{
    $src_img = imagecreatefromgif($src);
}

  // Rotates the image
  $rotate = imagerotate($src_img, $degrees, 0) ;

  // Outputs a jpg image, you could change this to gif or png if needed
  if (preg_match("/png/", $system[1]))
{
    imagepng($rotate,$image); 
} 
else if (preg_match("/gif/", $system[1]))
{
    imagegif($rotate, $image);
}
else
{
    imagejpeg($rotate, $image); 
}

imagedestroy($rotate);  
imagedestroy($src_img);

   ?> 
```

# html - 在 h3 中包含的单词之后放置一个符号或 span 与 css 在同一行中

> ID：13325756
> 
> 赞同：0
> 
> 时间：2012-11-10T20:22:48.437
> 
> 标签：html, css

我制作了一个网页。它有许多包含在 span 和 h3 标签中的单词。现在我正在尝试使用 CSS 类在同一行的文本末尾放置一些符号。我可以使用 background-image 属性对下面的类进行此操作：

```
 .newtohtml5{
        width:fit-content;         
        background-image:url(http://www.w3.org/html/logo/downloads/HTML5_Logo_512.png);
        background-repeat:no-repeat;
        background-size:2%;
        background-position-x:right;               
    } 
```

然而，这个类的问题是 HTML5 符号出现在行尾，在文本和符号本身之间留下了巨大的空间。我希望该符号恰好出现在同一行上跨度中的文本之后，而不是在文本和符号之间有巨大空间的行尾。

我不想对 HTML 进行任何更改。尽管赞赏任何解决方案。但是 CSS 唯一的技巧会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:01:13.827

假设您不需要完整的跨浏览器支持，并且只使用那些实现 CSS3 生成内容的浏览器*并且*您希望生成的内容立即出现在包含在 . 中的文本之后`span`，您可以使用`::after`伪元素：

```
<span class="newtohtml5">text here</span> <br/> 
```

使用 CSS：

```
.newtohtml5::after {
    content: ' (generated content).'
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4jdR8/)。

值得注意的是，这个生成的内容是在 的内容之后`span`，但仍然*在 内部*，并且是`span`自身的一部分。

您还可以使用元素的属性来包含在生成的内容中，例如，使用以下 CSS 您可以包含`class`属性中包含的字符串：

```
.newtohtml5::after {
    content: ' (.' attr(class) ').';
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4jdR8/1/)。

您还可以将图像插入到`content`属性中：

```
.newtohtml5::after {
    content: url(http://lorempixel.com/25/25);
    margin-left: 1em;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4jdR8/2/)。

# c - 与传统的分段散列相比，使用上下文触发分段散列有什么好处？

> ID：13325758
> 
> 赞同：1
> 
> 时间：2012-11-10T20:22:52.337
> 
> 标签：c, algorithm, hash

原始分段散列使用文件的固定大小段来评估散列值。而且我发现了一些分段散列，例如上下文触发分段散列使用滚动散列来触发何时评估文件的散列值。

而且我不太确定使用这种技术而不是传统技术。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:10:47.043

我假设您的意思是“上下文触发的分段散列”？

[ssdeep 项目](http://ssdeep.sourceforge.net/)链接到 Jesse Kornblum的一篇名为“使用上下文触发分段散列法识别几乎相同的文件”的论文。该论文以垃圾邮件算法的形式介绍了 CTPH 的起源和目标。

总结一下：

*   计算完整的文件哈希，例如通过运行`sha1sum file`，可以让您找到完全相同的文件对，在时间上与文件的总大小成线性关系。

*   使用固定大小的分段进行分段散列意味着如果在文件中间重写字节，您可能仍然可以识别它与参考文件相同。但是，如果插入或删除字节，则整个文件其余部分的校验和都会更改。

*   即使存在更大的差异，CTPH 也应该允许识别文件之间的相似性。只要更改不是太大，CTPH 就可以处理文件的插入或删除部分。该论文声称，只要给出文件的前三分之一或最后三分之一，spamsum 就可以识别它可能来自哪个文件。

# rapache - 在云中托管 R 时的内存要求

> ID：13325759
> 
> 赞同：2
> 
> 时间：2012-11-10T20:22:52.907
> 
> 标签：rapache, opencpu

*如果我们预计每月有 100,000 次点击，我们需要运行 opencpu 的最小服务器大小是多少？*

我认为 opencpu 是一个令人兴奋的项目，但需要了解部署 opencpu 时的内存使用情况，因为诸如 rackspace 之类的云托管服务对于 1 GB 的 RAM 每月收费约 40 美元。

我知道如果我加载 R 而不做任何事情或在 RAM 中加载任何数据或包，它会使用近 700m 的 RAM（虚拟）和 50 兆字节的 RAM（驻留）。

我知道 opencpu 使用 rApache，而 rApache 使用 preforking，但想知道随着并发用户数量的增加，这将如何扩展。谢谢。

**感谢您的回复**

我在访问洛杉矶时与 Jeroen Ooms 进行了交谈，并且部分相信如果正确使用 opencpu 将在高并发环境中工作，并且如果出现问题，他可以解决问题。毕竟opencpu跟他的论文有关！特别是，我发现 opencpu 的有用之处在于它与 ubuntu 的 AppArmor 的集成，它可以限制进程使用过多的 RAM 和 CPU。我认为 apache 可能也可以做到这一点，但 RAppArmor 可以做到这一点以及更多。杰出的！如果 AppArmor 是唯一的优势，我只会使用它和 json 作为后端，但似乎 opencpu 也可以简化所有这些东西的安装并提供内置的 API 系统。

考虑到网络托管的成本，我想一个可行的实时分析系统如下：

*   根据需要在专门的分析服务器上按需创建 R 统计模型（例如，每天或每小时使用 cron）
*   使用 ftp 将模型的结果传输到 opencpu 服务器上的目录，作为本机 R 对象
*   在 opencpu 服务器上，进入目录并获取代表统计模型的 R 对象，然后使用它进行预测或模拟。例如，使用“预测”函数根据用户提供的变量提供估计值。

有其他人认为这是使 R 成为实时分析后端的可行方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:51:40.780

Dirk 是对的，这完全取决于您调用的 R 函数；OpenCPU 架构的开销应该非常小。OpenCPU 本身将在小型服务器上运行，但众所周知，R 中的某些功能比其他功能需要更多的内存/cpu。

*如果你真的*想知道运行 opencpu 需要多少资源，你可以做一些基准测试。正如您所指出的，prefork 用于分支主进程的会话，因此在大多数情况下，fork 的写时复制原则应该使其非常便宜。

还有一些其他的东西可以调整；例如预加载常用包。

# jquery - jQuery中的跳跃动画

> ID：13325765
> 
> 赞同：0
> 
> 时间：2012-11-10T20:23:34.673
> 
> 标签：jquery, animation, smooth-scrolling

我在我的网站上使用此代码：

```
$(document).ready(function(){

  $('.title').click(function() {
    $('.info').slideUp(800);
    $('.title').removeClass('flip');
    $(this).parent('div').find('.info').slideDown(800);
  });

  $('li.active').closest('.info').slideDown(800);
}); 
```

在我在计算机上测试的任何浏览器中，动画都非常跳跃。如果我在 js-fiddle 中检查它，动画非常流畅。发生了什么？

这是[js-fiddle-link](http://jsfiddle.net/8XkBY/1/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:25:32.143

它在小提琴链接中对我来说运行顺利。但是，您确定您编写的代码是您想要发生的事情吗？根据您的电话堆叠方式，事情可能看起来不正常。

您可能希望在每个动画完成后进行回调，即：

$('.info').slideUp(800,function(){

```
//...do work in here (i.e. remove classes, proceed with other animations/slides); 
```

});

# compiler-construction - PDA：如何检查弹出次数是偶数还是奇数

> ID：13325768
> 
> 赞同：2
> 
> 时间：2012-11-10T20:23:45.777
> 
> 标签：compiler-construction, pushdown-automaton

假设我们有上下文无关语言 L={0^n0^n, n>=0}。

对于 PDA：Μ = {A, Q, H, δ, q0, h0, F} 我们有：

```
A = {"0"}
H = {X, I}
Q = {S, T}
q0 = S
h0 = X
F = {T}

Then, the δ function is:
   ___________________________________________________________________
   |           X            |             I            |      -|     |
---+------------------------+--------------------------+-------------|
S  | read("0")=> push(I)    |   read("0")=> push(I)    |             |
   | keep=> move(T)         |   pop                    |             |
---+------------------------+--------------------------+-------------|
T  |                        |                          |   success   |
---------------------------------------------------------------------+ 
```

这是我的解决方案，但它有一个问题。自动机必须接受诸如 00、ε、0000 之类的字符串，而不接受 0 或 000。通常接受具有偶数个 0 的字符串。

让我们尝试 2 个示例：

```
->for string 00:
 MOVE    STACK    INPUT    STATE    DESCRIPTION_OF_MOVE
  1      X         '0'0      S        reading_of 0
  2      XI          '0'     S        reading_of 0
  3      XII        ε        S        pop
  4      XI         ε        S        pop
  5      X          ε        S        ε-transition
  6      X          ε        T        success

->for string 000:
 MOVE    STACK    INPUT    STATE    DESCRIPTION_OF_MOVE
  1      X        '0'00      S        reading_of 0
  2      XI        '0'0      S        reading_of 0
  3      XII         '0'     S        reading_of 0
  4      XIII       ε        S        pop
  5      XII        ε        S        pop
  6      XI         ε        S        pop
  7      X          ε        S        ε-transition
  8      X          ε        T        success 
```

不应接受最后一个字符串。我不知道如何在识别字符串之前检查弹出次数以选择是否接受它。有没有人有任何想法，有什么线索可以触发我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-29T11:05:45.040

解决方案很简单。在这种情况下，PDA 必须接受偶数个 0，包括零个 0。

为了实现这一点，一个简单的实现是`I`每次出现偶数个 0 时从堆栈中弹出符号，因此`δ`函数将是：

```
 ___________________________________________________________________
   |           X            |             I            |      -|     |
---+------------------------+--------------------------+-------------|
S  | read("0")=> push(I)    |   read("0")=> pop        |             |
   | keep=> move(T)         |                          |             |
---+------------------------+--------------------------+-------------|
T  |                        |                          |   success   |
---------------------------------------------------------------------+ 
```

让我们尝试 2 个示例：

```
->for string 00:
 MOVE    STACK    INPUT    STATE    DESCRIPTION_OF_MOVE
  1      X         '0'0      S        read(0)=> push(I)
  2      XI          '0'     S        read(0)=> pop
  3      X          ε        S        ε-transition
  4      X          ε        T        success

->for string 000:
 MOVE    STACK    INPUT    STATE    DESCRIPTION_OF_MOVE
  1      X        '0'00      S        read(0)=> push(I)
  2      XI        '0'0      S        read(0)=> pop
  3      X           '0'     S        read(0)=> push(I)
  4      XI         ε        S        eoi=> failure 
```

# hashmap - 井字游戏 - 类似 BFS 的算法

> ID：13325775
> 
> 赞同：0
> 
> 时间：2012-11-10T20:24:33.233
> 
> 标签：hashmap, tic-tac-toe

我正在考虑我自己的算法来实现井字游戏。这将是一台计算机对抗系统。我想实现的算法将是一个哈希图，其中包含用户每个选定节点的所有获胜节点。系统将轮询用户选择的密钥的哈希映射，并随机选择一个获胜的移动选项。可以删除用户或系统之前选择的选项或将其设置为布尔值 true。这主要是基于阻塞的算法。欢迎对此提出任何想法或意见。

系统哈希图

```
<1,<2,3,4,7,5,9>>
<2,<1,3,5,8>>
<3,<1,2,6,9,5,7>>
<4,<1,7,5,6>>
<5,<2,8,4,6>>
<6,<3,9,5,4>>
<7,<1,4,8,9,5,3>>
<8,<2,5,7,9>> 
```

系统将根据用户的键选择随机选择散列映射的条目之一。我知道这不是一个非常可扩展的方法，但我想知道对此的一些评论。系统/用户已经选择的每个条目都可以设置为假/删除，因此这可能不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:59:07.340

您的方法可能会奏效，但这不是一个很好的解决方案。

与其将包含游戏状态及其各自获胜动作的硬编码哈希传递给系统，我宁愿实现一种算法，这样计算机就可以自己计算出最佳动作。您可能会考虑一些众所周知的算法：

[极小极大](http://en.wikipedia.org/wiki/Minimax)

[内加麦克斯](http://en.wikipedia.org/wiki/Negascout)

[α-β修剪](http://en.wikipedia.org/wiki/Alpha-beta_pruning)

此外，通过使用算法，您将增加程序的可伸缩性。

# zend-framework - Zend 控制器动作助手未找到

> ID：13325782
> 
> 赞同：1
> 
> 时间：2012-11-10T20:25:56.940
> 
> 标签：zend-framework

一直在扯我的头发为什么这不起作用。尝试注册一个控制器动作助手，例如在 Zend 文档、这里的几篇文章和各种博客中找到的。在 application.ini 和 Bootstrap 中都进行了尝试。

助手本身驻留在 APPLICATION_PATH 中。“/控制器/助手”。该文件本身称为 Scopeing.php。在 application.ini 中，appnamespace = ""。

```
<?php
class Helper_Scoping extends Zend_Controller_Action_Helper_Abstract
{
    public function direct()
    {
       // code is here
    }
 } 
```

首先我在application.ini中尝试过：

```
resources.frontController.actionhelperpaths.Helper = APPLICATION_PATH "/controllers/helpers"
resources.frontController.plugins.Scoping = "Helper_Scoping" 
```

在我的控制器中调用以下内容会引发异常并显示消息：“Action Helper by name Scoping not found”：

```
$this->_helper->Scoping(); 
```

然后我在我的 Bootstrap 中尝试了以下操作（根据我看到的其他示例，我尝试了“Helper”和“Helper_”）：

```
protected function _initActionHelpers()
{
    Zend_Controller_Action_HelperBroker::addPath(
            APPLICATION_PATH . '/controllers/helpers', 
            'Helper_'
    );
    Zend_Controller_Action_HelperBroker::addHelper(
        new Helper_Scoping()
    );
} 
```

这次我得到一个未捕获的异常，但同样的想法：“致命错误：在第 116 行的 /Users/ppjd/Sites/dbos/application/Bootstrap.php 中找不到类 'Helper_Scoping'”

由于那里有很多工作示例，我认为我一定错过了一些愚蠢的东西。请求救。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:20:18.477

我不尝试这个，但我认为你的助手类（在你的应用程序结构中：APPLICATION_PATH 。“/controllers/helpers）应该是'Zend_Controller_Action_Helper_Scoping'而不是'Helper_Scoping'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:29:39.170

如果有人遇到这种情况，这就是最终对我有用的方法：这是一个命名空间问题。在 Bootstrap 中，我在 addHelper 之前做了这个修改：

```
 $rl = $this->getResourceLoader();
    $rl->addResourceTypes(array(
        // ...other namespace settings...
        'helper' => array(
                'path'      => 'controllers/helpers',
                'namespace' => 'Helper',
        ),
    )); 
```

之后一切正常。希望这对其他人有帮助。

*[有时我觉得我花更多的时间来尝试完善框架，而不是实际的应用程序开发。]*

# javascript - javascript迭代对象 - 第一个元素未定义

> ID：13325783
> 
> 赞同：3
> 
> 时间：2012-11-10T20:26:02.050
> 
> 标签：javascript, object, undefined, loops

我只是用 javascript for (key in obj) 语法遍历一个对象：

```
var myObj = { id:'1', number:'2', name: 'my' };

var i, item;
for (i in myObj) {
    item = myObj[i];
} 
```

我在 firebug 调试器（firefox）中认识到第一次循环迭代将 i 设置为未定义，而第二次迭代将 i 设置为“id”。由于这种行为，我的代码中有一些问题。第一次迭代给出未定义是否正常？它与 JSON 符号、缺少原型等有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:59:07.927

它似乎工作得很好。但是，您可能希望使用`.hasOwnProperty()`来确保属性属于对象并且不被继承：

```
var myObj = { id: "1", number: "2", name: "my" };
var i,item;
for (i in myObj) {
     if (myObj.hasOwnProperty(i)) item = myObj[i];
} 
```

通常，原生原型方法不会被枚举，仅仅是因为它们不可枚举。但是，如果您使用的是 Prototype 或 MooTools 等框架，则它们添加的方法将被枚举并在您的循环中看到。`.hasOwnProperty()`确保它们被忽略。

# php - 统一大量标量数组

> ID：13325786
> 
> 赞同：1
> 
> 时间：2012-11-10T20:26:22.170
> 
> 标签：php, arrays

有没有更有效的方法来统一大量的标量数组？

```
<?php

$input=[
    [65455,5,5,4,1,4,45,4],
    [2,1254,5,454,54,545,4],
    //....
]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:30:03.370

你可以用一个技巧来减少它：

```
 array_unique(call_user_func_array("array_merge", $input)) 
```

通过使用will 以输入数组[`call_user_func_array`](http://php.net/call_user_func_array)的`array_merge`每一行作为参数隐式运行：`array_merge($input[0], $input[1], $input[2], ...)`

尽管这是必须通过评论来弥补简洁性的情况之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:29:50.423

如果我正确理解您的要求，您正在寻找[`array_merge`](http://us3.php.net/manual/en/function.array-merge.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:48:39.633

```
function array_union($arrayOfArrays){
    $output=[];
    foreach ($arrayOfArrays as $a) {
       $output=array_unique(array_merge($output,$a));
    }
    return $output;
} 
```

# arrays - 如何断言集合中的每个项目都在范围内

> ID：13325797
> 
> 赞同：4
> 
> 时间：2012-11-10T20:27:43.853
> 
> 标签：arrays, groovy, junit4, hamcrest

我有一个 Groovy 数组，它将获得一组随机整数值。我想断言数组中的每个项目在给定范围内都有一个值。我正在尝试使用 Hamcrest Matchers。所以我的测试看起来像这样：

```
@Test
void testShouldReturnArrayOfStats(){
    def results = pg.rollStats()
    assertThat results, everyItem(both(greaterThan(0)).and(lessThanOrEqualTo(6)))
} 
```

当我运行测试时，我得到一个 assertionError

```
java.lang.AssertionError: Expected: every item is (a value greater than <0> and a value less than or equal to <6>)
 but: was [<6>, <3>, <5>, <4>, <3>, <2>] 
```

我已经尝试了一些变体，但我没有通过测试。只需查看错误的“But:was”部分，我就可以看到所有 6 个值都符合要求，但测试仍然失败。

我很长时间没有使用 Groovy 或 Hamcrest，所以我确定我错过了一些东西。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:58:34.533

你可以只使用groovy吗？

```
assert results.every { it in 1..6 } 
```

# javascript - 在 CSS 或 JavaScript 中反转图像的颜色

> ID：13325798
> 
> 赞同：78
> 
> 时间：2012-11-10T20:27:58.377
> 
> 标签：javascript, css, colors

如果可能的话，如何在 css 或 javascript 中反转图像（jpg/png ..）的颜色？

[以前的](https://stackoverflow.com/questions/12431710/inverting-colors-in-part-of-an-image-html-css-js) [相关](https://stackoverflow.com/questions/5735722/invert-image-color-onmouseover)问题没有提供足够的细节。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-11-10T20:30:34.817

CSS3 有一个新的过滤器属性~~仅适用于 webkit 浏览器~~ 在 webkit 浏览器和 Firefox 中[支持。](https://caniuse.com/#feat=css-filters)它在 IE 或 Opera mini 中不支持：

```
img {
   -webkit-filter: invert(1);
   filter: invert(1);
   }
```

```
<img src="http://i.imgur.com/1H91A5Y.png">
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-09T11:59:44.237

可以使用下面的代码在主要的新浏览器中完成

```
.img {
    -webkit-filter:invert(100%);
     filter:progid:DXImageTransform.Microsoft.BasicImage(invert='1');
} 
```

但是，如果您希望它适用于所有浏览器，则需要使用 Javascript。像[这样的要点](https://gist.github.com/paulirish/373253)将完成这项工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-06T12:05:17.247

您可以通过 javascript 应用样式。这是下面的 Js 代码，它将过滤器应用于 ID 为 theImage 的图像。

```
function invert(){
document.getElementById("theImage").style.filter="invert(100%)";
} 
```

这是

```
<img id="theImage" class="img-responsive" src="http://i.imgur.com/1H91A5Y.png"></img> 
```

现在您需要做的就是调用 invert() 我们在单击图像时执行此操作。

```
function invert(){
document.getElementById("theImage").style.filter="invert(100%)";
}
```

```
<h4> Click image to invert </h4>

<img id="theImage" class="img-responsive" src="http://i.imgur.com/1H91A5Y.png" onClick="invert()" ></img>
```

我们在我们的[网站上使用它](http://www.veed.io)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T09:08:06.487

对于从 0 到 1 的反转，您可以使用这个库[InvertImages](https://github.com/shekhardesigner/InvertImages)，它提供对 IE 10 的支持。我还使用 IE 11 进行了测试，它应该可以工作。

# winforms - Windows 窗体 Web 浏览器完整历史记录

> ID：13325800
> 
> 赞同：0
> 
> 时间：2012-11-10T20:28:15.800
> 
> 标签：winforms, datagridview, browser, browser-history

我只想展示 a 的完整历史`WinForms.Webbrowser`，我知道如何向前和向后导航

```
webBrowser1.Document.Window.History.Go/Back/Forward(1) 
```

我只想知道如何可视化 History 对象，例如在 DataGridView

```
DataGridView dgvChronic = new DataGridView();
dgvChronic.DataSource = webBrowser1.Document.Window.History; 
```

但这不起作用：/

我想做这样的事情（伪代码）：

```
foreach (Link lk in webBrowser1.Document.Window.History)
{
    dgvChronic.Rows.Add(lk, "blabla");
} 
```

我的解决方案：

```
private List<object> chronic = new List<object>();

    private void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e)
    {
    //Chronic hier erstellen
    if (tsURL.Text != webBrowser1.Url.ToString())
    {
        tsURL.Text = webBrowser1.Url.ToString();
        List<string> website = new List<string>();
        website.Add(DateTime.Now.ToString());
        website.Add(tsURL.Text);
        chronic.Add(website);
    }
    } 
```

然后可视化历史：

```
foreach (List<string> website in chronic)
{
    dgvChronic.Rows.Add(website[0], website[1]);
} 
```

生病标记trippinos答案为接受，因为它几乎相同（我还没有测试过，但它看起来也可以工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:50:38.253

它似乎不受支持，但有一个非常简单的解决方法，只需要几行代码。看看这个线程： [msdn webbrowser thread](http://social.msdn.microsoft.com/Forums/en/winforms/thread/7abd91d0-05ee-47f1-af43-9b3fe6fffd57)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:48:44.517

`DataGridView.DataSource`不支持`WebBrowser` `Hisory`类型。您应该将每个导航 URL 添加到 a`DataTable`并将此表设置为`DataGridView`.

# iphone - 强制 & 然后锁定 UIViewController 的方向添加到 UINavigationViewController（导航控制器支持所有方向）

> ID：13325801
> 
> 赞同：1
> 
> 时间：2012-11-10T20:28:20.953
> 
> 标签：iphone, ipad, uiviewcontroller, uinavigationcontroller, ios6

我相信标题暗示了我正在尝试实施的内容；我在下面描述了我想要实现的目标以及我如何尝试做同样的事情但取得了部分成功。

VC-ViewController NC-导航控制器

我已将 NC 设置为应用程序的 RootVC。为覆盖supportedInterfaceOrientations和shouldAutorotate方法的NC编写了一个类别。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

self.window.backgroundColor = [UIColor whiteColor];

[self.window makeKeyAndVisible];

UINavigationController *appNavController = [[UINavigationController alloc]init];
appNavController.view.backgroundColor = [[UIColor redColor]colorWithAlphaComponent:0.5];

self.window.rootViewController = appNavController;
[self.window addSubview:appNavController.view];

FirstViewController *_firstViewController = [[FirstViewController alloc]init];
[appNavController pushViewController:_firstViewController animated:YES];
[_firstViewController release];

return YES;
} 
```

UINavigationController 的类别 //UINavigationController.m

```
@implementation UINavigationController(Rotation)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
     return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
     return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

我正在添加支持所有方向的 FirstVC，这里一切正常。

```
//FirstViewControlle.m

-(BOOL)shouldAutorotate
 {
   return YES;
 }
-(NSUInteger)supportedInterfaceOrientations
 {
   return UIInterfaceOrientationMaskAll;
 } 
```

从第一个 VC 开始，我使用 pushViewController 将另一个 VC (SecondVC) 添加到 NC。

案例一：firstVC 的方向是 Landscape 并且 SecondVC 被推到 NC 上时，旋转被阻止并且 SecondVC 是横向加载的。

**案例 2：现在问题出现了，当 firstVC 处于纵向模式并且 SecondVC 被推到 NC 时，旋转被阻止（因为 shouldAutorotate 设置为 NO）但是第二个 VC 在纵向模式下加载。在这里，尽管 secondVC 的supportedInterfaceOrientations 设置为UIInterfaceOrientationMaskLandscape 值，但我无法强制定向。** ***需要在横向中加载 secondVC，无论 NC 方向是什么，只要正在查看 secondVC，就将其锁定在横向中。***

//SecondViewControlle.m

```
-(BOOL)shouldAutorotate
 {
   return NO;
 }
-(NSUInteger)supportedInterfaceOrientations
 {
   return UIInterfaceOrientationMaskLandscape;
 } 
```

在实现上述代码时，我参考了以下问答[强制肖像...。](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6)

欢迎所有建议和解决方案；提前致谢。

# php - PHP 静态类返回参考

> ID：13325803
> 
> 赞同：3
> 
> 时间：2012-11-10T20:28:46.520
> 
> 标签：php, object, reference, static

我有一个静态方法的类。静态方法返回一个私有静态 stdClass 对象。

```
myclass::get() // returns stdClass object
myclass::get()->name // name is hardcoded into the class 
```

我将如何更改名称的值，例如：

```
myclass::get()->name = 'bob'; 
```

并设置好了吗？

我尝试像这样返回对象：

```
return &self::$static_object; 
```

但这会引发语法错误。

我能做些什么？

编辑发布的代码以进行澄清

```
final class config {

    private static $configs = array();

    public static function get($config_name) {

        if (isset($configs[$config_name])) {

            return self::$configs[$config_name];
        }

        $file = __get_file_exists(M_CONFIGS . $config_name, 'conf.');

        if ($file) {

            $config = self::__scope_include($file);

            if (!is_array($config) && !$config instanceof stdClass) {
                /*
                 * 
                 * 
                 * FIX
                 * 
                 * 
                 * 
                 */
                die('ERROR config.php');
            }

            return self::$configs[$config_name] = self::__to_object($config);
        }
    }

    private static function __scope_include($file) {

        return include $file;
    }

    private static function __to_object($config) {

        $config = (object) $config;

        foreach ($config as &$value) {

            if (is_array($value)) {

                $value = self::__to_object($value);
            }
        }

        return $config;
    }
}

echo config::get('people')->name; //dave
config::get('people')->name = 'bob';
echo config::get('people')->name; // should be bob, is dave 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:40:43.867

在方法中通过引用返回`get()`应该可以解决问题：

```
public static function &get() {
    return self::$static_object;
} 
```

但是，我认为你应该重新审视你的设计，因为这种编码是非常不受欢迎的，并且会导致维护和可测试性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:44:13.387

你在做什么以及**drrcknlsn**的答案break [*Encapsulation*](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。那很不好。

正确的方法是创建一个*setter*方法。

```
public static function set($key, $value) {
  // set $config property...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T21:33:05.103

你错过`self`了`if (isset($configs[$config_name])) {`。它应该是

```
if (isset(self::$configs[$config_name])) {
  return self::$configs[$config_name];
} 
```

否则，每次调用时`config::get('people')`，您都将读取最有可能返回数组的配置文件，并在返回之前将其转换为对象。您对其中的对象所做的任何更改都会`self::$configs[$config_name]`被新创建的对象覆盖。

# php - 为基于 php 的 CMS 编写 CLI（类似于 Drush）

> ID：13325805
> 
> 赞同：0
> 
> 时间：2012-11-10T20:28:59.313
> 
> 标签：php, content-management-system, command-line-interface, drush

我已经在 CMS 上工作了几年，实际上我在管理区域中实现了一个基于 jquery 的控制台，您可以在其中执行一些方便的操作，例如启用/禁用模块等。

我最近摆弄了 drupal 并决定与 drush 一起安装 cygwin。我试着用谷歌搜索，但认为这可能是一个不寻常的问题：如何为基于 php 的 CMS 创建 CLI？究竟是如何工作的？我的意思是，我知道它作为 Windows 中的批处理脚本从命令行运行。但是它是如何与 PHP 等交互的呢？

我确实知道一些基本的 C#，但是一旦我弄清楚它是如何组合在一起的，这应该不会很难。（php、sql 等）。

任何帮助表示赞赏，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:07:16.173

基本上，您可以编写一个带有无限循环的简单 CLI shell，外加一个 'exec()' 或 'shell_exec()' PHP 函数。您应该获取用户命令并将其发送到 shell_exec() 函数以在系统 shell 中执行并将其输出返回给用户。

IE：

而（真）{

if($input != 'exit') $output=shell_exec($input); 否则中断；

回声$输出；}

*   您可以添加其他选项并自定义这个简单的循环。
*   您可以使用 'exec()' 函数调用外部程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:21:04.103

只有在使用 cli 支持编译 php 时，才能从终端运行 php cli。另外，您需要指定解释器并将路径作为参数传递给脚本。但您也可以使用 shebang #!/path/to/php。更好的做法是使用 env 变量而不是硬编码 php 的路径：#!/usr/bin/env php。在这里阅读：[http](http://tech.vg.no/2012/02/21/dont-hardcode-php-executable-path-in-shebang/) ://tech.vg.no/2012/02/21/dont-hardcode-php-executable-path-in-shebang/ 。

# css - 组织多个 CSS 代码的更好方法？

> ID：13325806
> 
> 赞同：0
> 
> 时间：2012-11-10T20:29:06.037
> 
> 标签：css

在我的 CSS 代码中，我有这个：

```
#feed .post:hover .rep {display:inline;}
#feed .post:hover .com {display:inline;}
#feed .post:hover .date {display:inline;} 
```

有没有办法让我做到这一点，而不是 3 行，它都在一条线上？我试着做

```
#feed .post:hover .rep, .com, .date {display:inline;} 
```

但这似乎不起作用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:33:25.340

这应该这样做： -

```
#feed .post:hover .rep, #feed .post:hover .com, #feed .post:hover .date {display: inline} 
```

# javascript - javascript第一个下拉选项加载一个新的页面url

> ID：13325807
> 
> 赞同：0
> 
> 时间：2012-11-10T20:29:12.730
> 
> 标签：javascript, html, forms, select

如果你有一个下拉选择，你怎么能这样做，如果用户点击第一个选项，它将加载另一个页面 url。

例如

```
<form method="post" action="process.php">
<select name="myform" id="myform">
<option value="new-page.html">[New Customer]</option>
<option value="1">Jim Jones</option>
<option value="2">John Doe</option>
</select> 
```

从此，如果您单击“新客户”下拉菜单，它会将用户重定向到该页面以创建新用户...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:59:35.217

```
<option onclick="window.location.href = 'http://www.exampl.org';
  " value="new-page.html">[New Customer]</option> 
```

# c# - 通过 NDepend API 以编程方式获取程序集之间的依赖关系

> ID：13325808
> 
> 赞同：0
> 
> 时间：2012-11-10T20:29:13.680
> 
> 标签：c#, .net, ndepend

我想创建一个分析工具来提取依赖矩阵，如 Visual NDepend 中的矩阵。

如何列出解决方案中两个程序集之间存在的依赖关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:19:44.793

首先阅读[NDepend.API 入门页面](http://www.ndepend.com/API/webframe.html?NDepend.API_gettingstarted.html)。*然后，您可以通过查看通过右键单击非空依赖矩阵单元格> 生成与这些 X 代码元素匹配的*查询生成的 CQLinq 查询来进行练习......例如，如果*单元格上*的矩阵选项权重设置为*直接： #方法*，你得到：

![NDepend依赖矩阵](../Images/71f0ec3d00e102365fd7370e17f7ac47.png)

...这会生成以下 CQLinq 查询。*然后，您可以在使用NDepend.API*的程序中将此查询作为经典 LINQ 查询重用。这些生成的查询应该构成开发更复杂的依赖查询和程序的良好起点。

```
from m in Assemblies.WithNameIn( "mscorlib").ChildMethods()
where m.IsUsedBy ("pnunit-launcher")
select new { m, m.NbLinesOfCode }
//--------------------------------------------------------------------
// 52 methods of the assembly
// mscorlib
// v4.0.0.0
// 
// are used by
// 24 methods of the assembly
// pnunit-launcher
// v1.0.4661.29691
// 
```

顺便说一句，这是查询编辑视图：

![在此处输入图像描述](../Images/4e1e57f01c5633fbcba0369e4a8d0e7a.png)

# javascript - 鼠标悬停时未清除 setInterval

> ID：13325809
> 
> 赞同：1
> 
> 时间：2012-11-10T20:29:17.400
> 
> 标签：javascript, jquery

所以我有2个问题。首先是 clearInterval 似乎没有工作，因为当鼠标光标在图像上时图像继续旋转。第二个是rightDisc 是setInterval 似乎对rightDisc 不起作用。所有其他功能都可以工作。我尝试使用网络工作者研究线程，但这让我很困惑。

```
<html>
<head>
    <script src="../js/jquery-1.6.4.min.js"></script>
    <script src="../js/imgRotate.js"></script>
    <script>
    $(function()
    {
        $("#leftDisc").rotate();
        $("#rightDisc").rotate();
    });
    </script>
</head>
<body>
    <div>
        <img id="turnTableImage" src="turntable.jpg" height="400" width="600" alt="" />
    </div>

    <div id="leftDisc" style="margin-top: -280px; margin-left: 50px">
        left<img id="leftDiscImg" class="discs" height="200" src="disc.png" alt="" />
    </div>

    <div id="rightDisc" style="margin-top: -300px; margin-left: 350px">
        <img id="rightDiscImg" class="discs" src="disc.png" alt="" />right
    </div>
</body> 
```

imgRotate.js

```
(function($) {  
$.fn.rotate = function() {
    var img = this.find(".discs");
    var imgpos = img.position();
    var x, y, xCenter, yCenter, x1, y1, deg = 1, drag = false;

    var interval = setInterval(function() {
        deg++;
        $("#leftDiscImg").css("transform","rotate("+deg+"deg)");
        $("#leftDiscImg").css("-moz-transform","rotate("+deg+"deg)");
        $("#leftDiscImg").css("-webkit-transform","rotate("+deg+"deg)");
        $("#leftDiscImg").css("-o-transform","rotate("+deg+"deg)");
        $("#leftDiscImg").css("ms-transform","rotate("+deg+"deg)");
    }, 20);

    $(window).load(function() {
        img.removeAttr("width");
        img.removeAttr("height");

        xCenter = imgpos.left + (img.width() / 2);
        yCenter = imgpos.top + (img.height() / 2);
    });

    img.mousemove(function(e) {
        x1 = e.pageX;
        y1 = e.pageY;
        x = x1 - xCenter;
        y = y1 - yCenter;

        r = 360 - ((180/Math.PI) * Math.atan2(y,x));

        if (drag == true) {
            img.css("transform","rotate(-"+r+"deg)");
            img.css("-moz-transform","rotate(-"+r+"deg)");
            img.css("-webkit-transform","rotate(-"+r+"deg)");
            img.css("-o-transform","rotate(-"+r+"deg)");
            img.css("ms-transform","rotate(-"+r+"deg)");
        }
    });

    img.mouseover(function() {
        clearInterval(interval);
        deg = 1;

        if (drag == false) {
            drag = true;
        } else {
            drag = false;
        }
    });

    img.mouseout(function() {
        drag = false;

        interval = setInterval(function() {
            deg++;
            $("#leftDiscImg").css("transform","rotate("+deg+"deg)");
            $("#leftDiscImg").css("-moz-transform","rotate("+deg+"deg)");
            $("#leftDiscImg").css("-webkit-transform","rotate("+deg+"deg)");
            $("#leftDiscImg").css("-o-transform","rotate("+deg+"deg)");
            $("#leftDiscImg").css("ms-transform","rotate("+deg+"deg)");
        }, 20);
    });
}; 
})( jQuery ); 
```

# php - PHP：当 echo 无法执行时帮助排除故障？

> ID：13325812
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:29:34.230
> 
> 标签：php, echo, php4

我最初在这里问了这个问题：

[http://www.daniweb.com/web-development/php/threads/439484/why-arent-more-echos-being-executed](http://www.daniweb.com/web-development/php/threads/439484/why-arent-more-echos-being-executed)

上传到服务器（表单）：

[http://cs4.sunyocc.edu/~jddancks/onestopshop/index.php](http://cs4.sunyocc.edu/~j.d.dancks/onestopshop/index.php)

sort_mysql 结果对其他查询的数组进行排序，并返回在所有数据数组中找到的二维数据数组。

编辑：我用回声解决了这个问题，现在我有这个功能的问题（我认为）：

```
function sort_mysql_results()
{
    echo "<p>begin smr</p>";
    $match=array();
    $c_match=0;
    $num_it = 0;
    $num_args = func_num_args();
    $c = 0;
    $args = func_get_args();
    while(isset($args[0][$num_it]))
    {
        echo "<p>sort mysql beginning of loop</p>";
        $skip=false;
        $name = $args[0][$num_it]['item_name'];
        $i=1;
        while(isset($args[$i])&&!$skip)
        {
            $skip = !check($args[$i],$name);
            $i++;
        }
        $num_it++;
        if(!$skip)
        {
            $match[$c_match] = $args[0];
            $c_match++;
        }
    }
    echo "<p>Num args: ".$num_args.", Iterations: ".$num_it."</p>";
    return $match;
} 
```

该函数的调用方式如下：

```
$match = sort_mysql_results(sort_soundex_results($queries[0]),get_array($queries[1])); 
```

现在 $match 应该是一个数组。出于某种原因，它不是。我尝试将结果打印到这样的表中：

```
if(count($match)>0)
{
    $num=0;
    echo "<table>\n
    <tr>\n
    <td>Name</td><td>Category</td><td>Description</td>\n
    </tr>\n";
    while(isset($match[$num]))
    {
        echo "<tr>\n
        <a href=\"product2.php?id=".$match[$num]['ItemID']."\"><td>".$match[$num]['item_name']."</td><td>".$match[$num]['cat_name']."</td><td>".$match[$num]['descr']."</td></a>\n
        </tr>\n";
        $num++;
    }
    echo "</table>\n";
}
else
{
    echo "<p>No matches found. Go back and try different search criteria</p>\n";
} 
```

作为参考，正在查询的 mysql 表如下所示：

```
 +-------------+--------------+------+-----+---------------------+----------------+
 | Field       | Type         | Null | Key | Default             | Extra          |
 +-------------+--------------+------+-----+---------------------+----------------+
 | item_name   | varchar(100) | NO   |     |                     |                | 
 | ItemID      | mediumint(9) | NO   | PRI | NULL                | auto_increment | 
 | cat_name    | varchar(45)  | NO   |     |                     |                | 
 | userID      | mediumint(9) | NO   |     |                     |                | 
 | descr       | text         | NO   |     |                     |                | 
 | image       | tinytext     | YES  |     | NULL                |                | 
 | date        | timestamp    | NO   |     | CURRENT_TIMESTAMP   |                | 
 | highest_bid | decimal(6,2) | NO   |     | 0.00                |                | 
 | time_expire | timestamp    | NO   |     | 0000-00-00 00:00:00 |                | 
 +-------------+--------------+------+-----+---------------------+----------------+ 
```

编辑：希望你还在我身边。我做了一些进一步的调试：

```
...
if(count($match)>0)
{
    echo "<p>space</p><h2>In IF STATEMENT VALUE OF MATCH BEFORE WHILE LOOP</h2><p>space</p>\n";
    echo "<p>space</p><p>space</p><p>space</p>\n";
    var_dump($match);
    echo "<p>space</p><p>space</p><p>space</p>\n";
    echo "<h2>VALUE OF match[num]</h2>\n";
    echo "<p>space</p><p>space</p><p>space</p>\n";
    var_dump($match[0]);
    echo "<p>space</p><p>space</p><p>space</p>\n";
... 
```

看一下这个：

```
 In IF STATEMENT VALUE OF MATCH BEFORE WHILE LOOP

 space

 space

 space

space

array(1) { [0]=> array(1) { [0]=> array(12) { ["item_name"]=> string(10) "Squat Rack" ["ItemID"]=> string(1) "8" ["cat_name"]=> string(16) "Sports Equipment" ["userID"]=> string(1) "1" ["descr"]=> string(25) "Comes with 275 lbs plates" ["image"]=> string(14) "squat_rack.jpg" ["date"]=> string(19) "2012-10-15 09:34:36" ["highest_bid"]=> string(4) "0.00" ["time_expire"]=> string(19) "2012-12-01 00:00:01" ["src"]=> string(4) "S362" ["src2"]=> string(4) "S362" ["result"]=> string(1) "1" } } }
 space

 space

 space

 VALUE OF match[num]

 space

 space

 space

 array(1) { [0]=> array(12) { ["item_name"]=> string(10) "Squat Rack" ["ItemID"]=> string(1) "8" ["cat_name"]=> string(16) "Sports Equipment" ["userID"]=> string(1) "1" ["descr"]=> string(25) "Comes with 275 lbs plates" ["image"]=> string(14) "squat_rack.jpg" ["date"]=> string(19) "2012-10-15 09:34:36" ["highest_bid"]=> string(4) "0.00" ["time_expire"]=> string(19) "2012-12-01 00:00:01" ["src"]=> string(4) "S362" ["src2"]=> string(4) "S362" ["result"]=> string(1) "1" } }
 space

 space

 space 
```

看起来应该是的。这里发生了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:23:02.950

这是修改后的 sort_mysql_results：

```
function sort_mysql_results()
{
    echo "<p>begin smr</p>";
    $match=array();
    $c_match=0;
    $num_it = 0;
    $c = 0;
    $args = func_get_args();
    while(isset($args[0][$num_it]))
    {
        echo "<p>sort mysql beginning of loop</p>";
        $skip=false;
        $name = $args[0][$num_it]['item_name'];
        $i=1;
        while(isset($args[$i])&&!$skip)
        {
            $skip = !check($args[$i],$name);
            $i++;
        }
        if(!$skip) //if found in another parameter
        {
            $match[$c_match] = $args[0][$num_it];
            $c_match++;
        }
        $num_it++;
    }
    echo "<p>Num args: ".$num_args.", Iterations: ".$num_it."</p>";
    var_dump($match);
    return $match;
} 
```

基本上原始只在找到查询后保存了一个并存储了 2D 数组，而不是使 $match 成为 3D 数组的单个数组。感谢宇智波斑发帖

# ruby-on-rails - 如何检查值是否包含在 ActiveRecord 验证的哈希中？

> ID：13325813
> 
> 赞同：3
> 
> 时间：2012-11-10T20:29:34.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`Project`模型，我需要测试它`billing_address_type`是否有效。

```
class Project < ActiveRecord::Base

  validates :billing_address_type, :inclusion  => { :in => %w(h o) }

  def billing_address_types
    options = {"Home" => "h", "Organisation" => "o"}       
    if person.present?
      options.delete("Home") if person.address.blank?
      options.delete("Organisation") if person.organisation.blank?
    end
    options
  end 
```

然而，这`validates`条线是错误的。我需要检查方法返回的哈希值是否包含在内`billing_address_types`。

如何仅检查哈希值？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:20:31.590

您可以将[`lambda`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-lambda)或 new传递[`Proc`](http://www.ruby-doc.org/core-1.9.3/Proc.html)给`:in`将被动态评估的选项，并使用[`values`](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_inclusion_of)从返回的哈希上的方法`billing_address_types`仅获取哈希值：

```
validates :billing_address_type, :inclusion  => { :in => lambda { |a| a.class.billing_address_types.values } } 
```

有关详细信息，请参阅[文档](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_inclusion_of)。

# javascript - 为什么这会在 Javascript 中陷入无限循环？

> ID：13325814
> 
> 赞同：0
> 
> 时间：2012-11-10T20:29:40.900
> 
> 标签：javascript, infinite-loop

我正在为 HTML5 中的游戏果酱制作塔楼游戏。我有一个用于塔楼 AI 的子程序。但是，由于某种原因，这个没有循环的函数调用最终会陷入无限循环。只有当至少有两个塔时才会发生这种情况。

```
function aiTower(id){
    if(id === 1)alert("towerId = 1 call 1");
    var l = zamerajCiel(id);
    if (l !==  null) towers[id].shoot(l.x,l.y);
    if(id === 1)alert("towerId = 1 call 2");
}; 
```

调用它的循环：

```
function aiLoop(){
    for(i=0;i<enemies.length;i++){
        aiMon(i);
    }
    for(i=0;i<towers.length;i++){
        aiTower(i);
            if(i === 1)alert("towerId = 1 call 3");
    }
} 
```

调试消息交替出现“towerId = 1 call 1”和“towerId = 1 call 2”，因此问题可能不在 aiLoop() 中。另外，我使用了一个正则表达式在我的代码中搜索 aiTower()。这是仅有的两次出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:37:42.160

`i`通过提供本地化`var i`功能。您很可能在其他地方对其进行了修改。

# javascript - 测量数组的长度，而不是 JavaScript 中的字符

> ID：13325815
> 
> 赞同：3
> 
> 时间：2012-11-10T20:29:42.577
> 
> 标签：javascript, mobile, titanium, string-length

我有一个关于`length`功能的问题。问题是，当变量中有多个条目时，它会完美地计算长度，但对于单个条目，它会开始测量字符数而不是数组中元素的数量。我希望警报显示 1 因为有一个条目：`finance consultant`，但它显示 18。

```
var win = Titanium.UI.createWindow({ backgroundColor:'#FFF' });
var tableView1=Titanium.UI.createTableView(); 
var Row = [];
Titanium.Yahoo.yql(
  'select * from html where url="http://..." '
  + 'and xpath="//tbody/tr/td/a/font" limit 25', 
  function(e) {
    results = e.data.font;
    results = results.content;
    alert(results.length);
    for (var i = 0; i < results.length; i++) {
      var rss = results[i];
      var rssRow = Titanium.UI.createTableViewRow({ ... });
      var titleLabel = Titanium.UI.createLabel({ ... });
      rssRow.add(titleLabel);
      Row.push(rssRow);
    };

    tableView1.setData(Row);
  });

win.add(tableView1);
win.open(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:33:18.883

您可以尝试以下方法。

```
results = results.content;
if (typeof results === 'string')
  results = [results];
alert(results.length); 
```

所以现在你已经强制 a `result`that is a string 成为一个字符串的数组。您的其余代码应该不加修改地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T21:08:00.447

在**slashingweapon**的回答中，但简化了，你为什么不这样做：

```
var length = 0;

if(typeof results === "string") {
    length = 1;
} else {
    length = results.length;
}

alert(length); 
```

它更简单，更清洁。

# c - 比较两个分数（< 和朋友）

> ID：13325821
> 
> 赞同：4
> 
> 时间：2012-11-10T20:30:39.907
> 
> 标签：c, 64-bit, fractions

我有两个我喜欢比较的分数。它们的存储方式如下：

```
struct fraction {
    int64_t numerator;
    int64_t denominator;
}; 
```

目前，我这样比较它们：

```
bool fraction_le(struct fraction a, struct fraction b)
{
    return a.numerator * b.denominator < b.numerator * a.denominator;
} 
```

这很好用，除了`(64 bit value) * (64 bit value) = (128 bit value)`，这意味着它会溢出离零太远的分子和分母。

即使对于荒谬的分数，我如何才能使比较始终有效？

哦，顺便说一句：分数总是以简化形式存储的，只有分子可以是负数。也许输入约束使某些算法成为可能......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:46:43.160

以下是[Boost](http://www.boost.org/doc/libs/1_52_0/boost/rational.hpp)的实现方式。代码注释很好。

```
template <typename IntType>
bool rational<IntType>::operator< (const rational<IntType>& r) const
{
    // Avoid repeated construction
    int_type const  zero( 0 );

    // This should really be a class-wide invariant.  The reason for these
    // checks is that for 2's complement systems, INT_MIN has no corresponding
    // positive, so negating it during normalization keeps it INT_MIN, which
    // is bad for later calculations that assume a positive denominator.
    BOOST_ASSERT( this->den > zero );
    BOOST_ASSERT( r.den > zero );

    // Determine relative order by expanding each value to its simple continued
    // fraction representation using the Euclidian GCD algorithm.
    struct { int_type  n, d, q, r; }  ts = { this->num, this->den, this->num /
     this->den, this->num % this->den }, rs = { r.num, r.den, r.num / r.den,
     r.num % r.den };
    unsigned  reverse = 0u;

    // Normalize negative moduli by repeatedly adding the (positive) denominator
    // and decrementing the quotient.  Later cycles should have all positive
    // values, so this only has to be done for the first cycle.  (The rules of
    // C++ require a nonnegative quotient & remainder for a nonnegative dividend
    // & positive divisor.)
    while ( ts.r < zero )  { ts.r += ts.d; --ts.q; }
    while ( rs.r < zero )  { rs.r += rs.d; --rs.q; }

    // Loop through and compare each variable's continued-fraction components
    while ( true )
    {
        // The quotients of the current cycle are the continued-fraction
        // components.  Comparing two c.f. is comparing their sequences,
        // stopping at the first difference.
        if ( ts.q != rs.q )
        {
            // Since reciprocation changes the relative order of two variables,
            // and c.f. use reciprocals, the less/greater-than test reverses
            // after each index.  (Start w/ non-reversed @ whole-number place.)
            return reverse ? ts.q > rs.q : ts.q < rs.q;
        }

        // Prepare the next cycle
        reverse ^= 1u;

        if ( (ts.r == zero) || (rs.r == zero) )
        {
            // At least one variable's c.f. expansion has ended
            break;
        }

        ts.n = ts.d;         ts.d = ts.r;
        ts.q = ts.n / ts.d;  ts.r = ts.n % ts.d;
        rs.n = rs.d;         rs.d = rs.r;
        rs.q = rs.n / rs.d;  rs.r = rs.n % rs.d;
    }

    // Compare infinity-valued components for otherwise equal sequences
    if ( ts.r == rs.r )
    {
        // Both remainders are zero, so the next (and subsequent) c.f.
        // components for both sequences are infinity.  Therefore, the sequences
        // and their corresponding values are equal.
        return false;
    }
    else
    {
        // Exactly one of the remainders is zero, so all following c.f.
        // components of that variable are infinity, while the other variable
        // has a finite next c.f. component.  So that other variable has the
        // lesser value (modulo the reversal flag!).
        return ( ts.r != zero ) != static_cast<bool>( reverse );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:50:12.777

如果您使用的是 GCC，则可以使用 __int128。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T21:00:38.753

我不明白科斯回答中的代码，所以这可能只是重复它。

正如其他人所提到的，有一些简单的特殊情况`b/c > -e/f`，例如`-b/c > -e/f`if `e/f > b/c`。所以我们只剩下正分数的情况。

将这些转换为混合数字，即`a b/c`和`d e/f`。微不足道的情况有`a != d`所以我们假设`a == d`。然后我们要`b/c`与`e/f`b < c, e < f 进行比较。好吧`b/c > e/f`，如果`f/e > c/b`。这些都大于一，因此您可以重复混合数字测试，直到整数部分不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T21:25:12.550

案例引起了我的兴趣，所以这里是 Neil 答案的一个实现，可能有错误：)

```
#include <stdint.h>
#include <stdlib.h>

typedef struct {

    int64_t num, den;

} frac;

int cmp(frac a, frac b) {

    if (a.num < 0) {

        if (b.num < 0) {

            a.num = -a.num;
            b.num = -b.num;

            return !cmpUnsigned(a, b);
        }

        else return 1;
    }

    else if (0 <= b.num) return cmpUnsigned(a, b);

    else return 0;
}

#define swap(a, b) { int64_t c = a; a = b; b = c; }

int cmpUnsigned(frac a, frac b) {

    int64_t c = a.num / a.den, d = b.num / b.den;

    if (c != d) return c < d;

    a.num = a.num % a.den;
    swap(a.num, a.den);

    b.num = b.num % b.den;
    swap(b.num, b.den);

    return !cmpUnsigned(a, b);
}

main() {

    frac a = { INT64_MAX - 1, INT64_MAX }, b = { INT64_MAX - 3, INT64_MAX };

    printf("%i\n", cmp(a, b));    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T20:41:07.447

好的，所以只有你的分子是签名的。

特别案例：

如果 a.numerator 为负而 b.numerator 为正，则 b 大于 a。如果 b.numerator 为负而 a.numerator 为正，则 a 大于 b。

否则：

您的两个分子具有相同的符号 (+/-)。添加一些逻辑代码或位操作以将其删除，并使用乘法与 uint64_t 进行比较。请记住，如果两个分子都是负数，则比较的结果必须取反。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-10T02:34:17.770

为什么不直接将它们作为浮点数进行比较呢？

```
bool fraction_le(struct fraction a, struct fraction b)
{
    return (double)a.numerator / a.denominator < (double)b.numerator / b.denominator;
} 
```

# c - 在C中将字符串从一个数组移动到另一个数组

> ID：13325824
> 
> 赞同：0
> 
> 时间：2012-11-10T20:30:53.317
> 
> 标签：c, arrays, string, filter

我想获取一个包含字母和字符的字符串，并只过滤掉字母。然后我想重用该字符串并将其放入一个数组中。我将如何在 C 中做到这一点？
我使用过`isalpha()`，但只使用 into `printf`，而不是变量。谢谢你的帮助。

```
#include <stdio.h> 
#include <string.h>  
#include <ctype.h>

int main(void)
{
    int i;
    string w = "name1234";
    string new ="";
    int length = strlen(w);

    for (i=0; length > i; i++)
    {
        if (isalpha(w[i]))
        {
            new = w;
        }
    }
    printf("This is the new one: %s\n", new);  //it should be 'name' not 'name1234'
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T21:01:12.313

```
#include <stdio.h> 
#include <string.h>  
#include <ctype.h>

int main(void)
{
    int i, newx;
    char w[] = "name1234";

    int length = strlen(w);

    // in C99 or greater, you can do
    // char new[length+1];
    // to get a variable-length local array, instead of using malloc
    char* new = malloc(length+1);
    if (!new)
    {
         fprintf(stderr, "out of memory\n");
         return 1;
    }

    for (i = 0, newx = 0; length > i; i++)
    {
        if (isalpha((unsigned char)w[i]))
        {
            new[newx++] = w[i];
        }
    }
    new[newx] = '\0';

    printf("This is the new one: %s\n", new);  //it should be 'name' not 'name1234'
    free(new); // this isn't necessary since all memory is freed when the program exits
               // (and it isn't appropriate if new is a local array) 
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T21:06:30.293

**这是一个简单的代码。确保你理解每一行。**

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    char org[]="abc123defg";
    int size=sizeof(org)/sizeof(org[0]);   //size will hold the original array length 
    char* res=malloc((sizeof(char)*size)+1);  //+1 for the '\0' char that indicates end of a string
    if(!res)
        return 1; //allocation failed
    int i; int k=0;
    for(i=0;i<size;i++)
    {
        if(isalpha(org[i])) {
            res[k]=org[i];
            k++;
        }
    }
    res[k]='\0';
    printf("%s\n", res);  //now it will be abcdefg
    free(res);  //free the memory I've allocated for the result array
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T21:01:57.393

定义正确的数据类型 char * 而不是字符串。您想过滤字符串 A 并将结果放入 B，您必须：

```
1) Create char *a[size], char *b[size];
2) iterate over the "string" A and verify if the actual position (char) meets the requirements to go to the "string" B;
3) if it does, just do b[pos_b] = a[i]; and increment the variable pos_b. 
```

您必须声明 pos_b 因为您在数组 b 中的位置可能与您在数组 A 中的位置不同。因为，您只是在数组 b 中添加字母。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T21:17:48.033

这是学术版：

```
const char* w= "name1234";
char* filteredString= (char*)malloc(sizeof(char));
const long length=strlen(w);
long size=0;
for(long i=0; i<length; i++)
{
    if(isalpha(w[i]))
    {
        size++;
        filteredString=(char*)realloc(filteredString, (size+1)*sizeof(char));
        filteredString[size-1]=w[i];
    }
}
filteredString[size]=0;
puts(filteredString); 
```

只是为了学习使用 realloc，但您可以在堆栈上分配整个字符串并拧紧内存使用情况，realloc 占用 CPU。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T21:05:09.880

好吧，我对您的代码进行了一些小修改以使其正常工作，但是您可以使用一些库，例如`string.h`. 我希望你明白：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <ctype.h>

int main(void)
{
    int i, j = 0;
    /* I limited your strings to avoid some problems. */
    char w[20]  = "name1234";
    /* The name "new" is a reserved word in C (at least in my IDE). */
    char nw[20] = "";
    int length  = strlen(w);
    for(i = 0; i < length; i++)
    {
        /* I added the special string end character '\0'. */
        if(isalpha(w[ i ]) || w[ i ] == '\0')
        {
            nw[ j ] = w[ i ];
            j++;
        }
    }
    printf("This is the new one: %s\n", nw);
    return 0;
} 
```

# actionscript-3 - ActionScript 3 onMetaData 视频持续时间 - 无法存储值

> ID：13325826
> 
> 赞同：2
> 
> 时间：2012-11-10T20:31:17.550
> 
> 标签：actionscript-3, flash, video, actionscript

我在 AS3 中有用于视频连接的标准 NetStream：

编码：

```
public class VideoInit extends MovieClip
{
    import flash.media.Video;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import flash.events.NetStatusEvent;

    public var video:Video;
    public var nc:NetConnection;
    public var ns:NetStream;
    public var meta:Object;
    public var _duration; //  <----- the variable

    public function VideoInit()
    {
        video = new Video(480,270); 
        addChild(video);
        nc = new NetConnection();
        nc.connect(null);
        ns = new NetStream(nc);

        meta = new Object();

        ns.client = meta;
        video.attachNetStream(ns);
        ns.play("video.f4v"); 

        meta = new Object();

        meta.onMetaData = function(meta:Object) // <---- the method
        {
            _duration = meta.duration

        }
        ns.client = meta;
     } 
```

现在，每次执行 onMetaData 方法时，变量 _duration 都会存储该值，但在调试器步骤离开该方法之后，_duration 值会被设置回*unindentified*。我尝试通过推送值来解决 Array 的问题，但同样的事情发生了，Array 重置。有什么问题吗？

**编辑：**

一旦 onMetaData 完成，任何存储持续时间值的对象都会自行销毁。我如何实现它并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:09:07.423

您发布的代码无法编译，即使编译，也可能导致其他问题。

建议：放弃*元*对象，改为设置*ns.client = this;*

这有效：

```
package
{
    import flash.events.Event;
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.media.Video;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import flash.events.NetStatusEvent;

    public class VideoInit extends Sprite
    {
        private var video:Video;
        private var nc:NetConnection;
        private var ns:NetStream;
        private var _duration:Number; //  <----- the variable

        public function VideoInit()
        {
            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        }

        private function onAddedToStage(e:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
            video = new Video(480,270); 
            addChild(video);
            nc = new NetConnection();
            nc.connect(null);

            ns = new NetStream(nc);
            ns.client = this;// meta;

            video.attachNetStream(ns);
            ns.play("video.f4v");
            stage.addEventListener(MouseEvent.MOUSE_DOWN, testTheValueOfDuration);
         }

         public function onMetaData(e:Object):void
         {
            _duration = e.duration
            trace('_duration:', _duration);

            testTheValueOfDuration();
         }

         private function testTheValueOfDuration(e:MouseEvent = null):void
         {
            trace('Seriously, what is the value of _duration?', _duration);
         }
    }
} 
```

# objective-c - 如何以最优雅的方式将 UIPickerView 从 1.0 填充到 50.0？

> ID：13325827
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:31:20.930
> 
> 标签：objective-c, ios6, nsarray, uipickerview

我尝试使用`array = [[NSArray alloc] initWithObjects=@"1",@"1.2"....@"50.0",nil]`. 但问题是，一旦我在 TabBarController 中单击它，视图就会自动崩溃。此外，这涉及大量工作。实现这一目标的最优雅方法是什么？

更新：这是导致视图崩溃并出现错误的代码 - “lldb”。你能告诉我这里的问题吗？

```
- (void)viewDidLoad
{

    kms = [[NSArray alloc] initWithObjects:@"1",@"1.1",@"1.2",@"1.3",@"1.4",@"1.5",@"1.6",@"1.7",@"1.8",@"1.9",@"2.0",@"2.1",@"2.2",@"2.3",@"2.4",@"2.5",@"2.6",@"2.7",@"2.8",@"2.9",@"3.0",@"3.1",@"3.2",@"3.3",@"3.4",@"3.5",@"3.6",@"3.7",@"3.8",@"3.9",@"4.0",@"4.1",@"4.2",@"4.3",@"4.4",@"4.5",@"4.6",@"4.7",@"4.8",@"4.9",@"5.0",@"5.1",@"5.2",@"5.3",@"5.4",@"5.5",@"5.6",@"5.7",@"5.8",@"5.9",@"6.0",@"6.1",@"6.2",@"6.3",@"6.4",@"6.5",@"6.6",@"6.7",@"6.8",@"6.9",@"7.0",@"7.1",@"7.2",@"7.3",@"7.4",@"7.5",@"7.6",@"7.7",@"7.8",@"7.9",@"8.0",@"8.1",@"8.2",@"8.3",@"8.4",@"8.5",@"8.6",@"8.7",@"8.8",@"8.9",@"9.0",@"9.1",@"9.2",@"9.3",@"9.4",@"9.5",@"9.6",@"9.7",@"9.8",@"9.9",@"10.0",@"10.1",@"10.2",@"10.3",@"10.4",@"10.5",@"10.6",@"10.7",@"10.8",@"10.9",@"11.0",@"11.1",@"11.2",@"11.3",@"11.4",@"11.5",@"11.6",@"11.7",@"11.8",@"11.9",@"12.0",@"12.1",@"12.2",@"12.3",@"12.4",@"12.5",@"12.6",@"12.7",@"12.8",@"12.9",@"13.0",@"13.1",@"13.2",@"13.3",@"13.4",@"13.5",@"13.6",@"13.7",@"13.8",@"13.9",@"14.0",@"14.1",@"14.2",@"14.3",@"14.4",@"14.5",@"14.6",@"14.7",@"14.8",@"14.9",@"15.0",@"15.1",@"15.2",@"15.3",@"15.4",@"15.5",@"15.6",@"15.7",@"15.8",@"15.9",@"16.0",@"16.1",@"16.2",@"16.3",@"16.4",@"16.5",@"16.6",@"16.7",@"16.8",@"16.9",@"17.0",@"17.1",@"17.2",@"17.2",@"17.3",@"17.4",@"17.5",@"17.6",@"17.7",@"17.8",@"17.9",@"18.0",@"18.1",@"18.2",@"18.3",@"18.4",@"18.5",@"18.6",@"18.7",@"18.8",@"18.9",@"19.0",@"19.1",@"19.2",@"19.3",@"19.4",@"19.5",@"19.6",@"19.7",@"19.8",@"19.9",@"20.0",@"20.1",@"20.2",@"20.3",@"20.4",@"20.5",@"20.6",@"20.7",@"20.8",@"20.9",@"30.0",@"31.1",@"31.2",@"31.3",@"31.4",@"31.5",@"31.6",@"31.7",@"31.8",@"31.9",@"32.0",@"32.1",@"32.2",@"32.3",@"32.4",@"32.5",@"32.6",@"32.7",@"32.8",@"32.9",@"33.0",@"33.1",@"33.2",@"33.3",@"33.4",@"33.5",@"33.6",@"33.7",@"33.8",@"33.9",@"34.0",@"34.1",@"34.2",@"34.3",@"34.4",@"34.5",@"34.6",@"34.7",@"34.8",@"34.9",@"35.0",@"35.1",@"35.2",@"35.3","@35.4",@"35.5",@"35.6",@"35.7",@"35.8",@"35.9",@"36.0",@"36.1",@"36.2",@"36.3",@"36.4,"@"36.5",@"36.6",@"36.7",@"36.8",@"36.9",@"37.0",@"37.1",@"37.2",@"37.3",@"37.4",@"37.5",@"37.6",@"37.7",@"37.8",@"37.9",@"38.0",@"38.1",@"38.2",@"38.3",@"38.4",@"38.5",@"38.6",@"38.7",@"38.8",@"38.9",@"40.0",@"40.1",@"40.2",@"40.3",@"40.4",@"40.5",@"40.6",@"40.7",@"40.8",@"40.9",@"41.0",@"41.1",@"41.2",@"41.3",@"41.4",@"41.5",@"41.6",@"41.7",@"41.8",@"41.9",@"42.0",@"42.1",@"42.2",@"42.3",@"42.4",@"42.5",@"42.6",@"42.7",@"42.8",@"42.9",@"43.0",@"43.1",@"43.2",@"43.3",@"43.4",@"43.5",@"43.6",@"43.7",@"43.8",@"43.9",@"44.0",@"44.1",@"44.2",@"44.3",@"44.4",@"44.5",@"44.6",@"44.7",@"44.8",@"44.9",@"45.0",@"45.1",@"45.2",@"45.3",@"45.4",@"45.5",@"45.6",@"45.7",@"45.8",@"45.9",@"46.0",@"46.1",@"46.2",@"46.3",@"46.4",@"46.5",@"46.6",@"46.7",@"46.8",@"46.9",@"47.0",@"47.1",@"47.2",@"47.3",@"47.4",@"47.5",@"47.6",@"47.7",@"47.8",@"47.9",@"48.0",@"48.1",@"48.2",@"48.3",@"48.4",@"48.5",@"48.6",@"48.7",@"48.8",@"48.9",@"49.0",@"49.1",@"49.2",@"49.3",@"49.4",@"49.5",@"49.6",@"49.7",@"49.8",@"49.9",@"50.0",nil];

    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (NSInteger) numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger) pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

        return kms.count; 

    }

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

        return [kms objectAtIndex:row];
    }

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

        [kms objectAtIndex:row];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:39:43.963

将你的类设置为 UIPickerView 的委托和数据源，然后实现这些方法：

```
@synthesize pickerView, entries;

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return [entries count];
}

- (NSString*) pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [entries objectAtIndex: row];
}

@end 
```

其中 entries 是包含所有格式化数字的数组。如果您还想知道应用程序崩溃的原因，请发布代码。

编辑

关于填充视图：在视图中确实加载方法开始填充数组。不要担心将值推送到选择器视图中，它们会自动加载：

```
entires=[NSMutableArray new];
for(float i=1.0; i<=50.0; i+= 0.1)
{
    NSString* pushString=[NSString stringWithFormat: @"%f",i];
    [entries addObject: pushString];
} 
```

这使得选择器视图显示 1.0、1.1、1.2、1.3 等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:56:27.113

如果通过“优雅”，您的意思是一种不填充数组的简单方法，请执行以下操作：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return 500 - 10 + 1; // 1.0 to 50.0 is 491 total rows
}

- (NSString*) pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    // row 0 becomes 1.0, row 1 becomes 1.1, etc.
    float num = row / 10.0 + 1.0;

    return [_formatter stringFromNumber:@(num)];
}

- (Void)viewDidLoad {
    [super viewDidLoad];

    // _formatter is an NSNumberFormatter * ivar
    _formatter = [[NSNumberFormatter alloc] init];
    [_formatter setNumberStyle: NSNumberFormatterDecimalStyle];
    [_formatter setMaximumFractionDigits:1];
} 
```

数字格式化程序用于确保针对用户的区域设置正确格式化小数。

# sql - Isnull 仍然返回空值

> ID：13325828
> 
> 赞同：-1
> 
> 时间：2012-11-10T20:31:26.613
> 
> 标签：sql

因此，我试图从表 2 中选择字段 1，该字段已从外部连接到表 1，并且我想使用 isnull() 命令将字段 1 作为空白而不是 null 返回。但它仍然为我返回空值。这是我的查询：

```
select 
  field1 
from 
  table1 
  left outer join (select
                    (isNull(field1,''))field1, 
                    id2 
                   from table2)tb2 on table1.id1= tb2.id2 
```

有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:33:48.063

您需要使用`COALESCE()`而不是`ISNULL()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:47:20.163

问题是您`LEFT`将`table1`.

如果`table1`包含与`id1`不匹配的一个，则不会`id2`从该`table2`返回任何内容`table2`，因此不会发生转换。

您必须`isNull`在选择的第一部分使用 。

```
SELECT 
  isnull(field1,'') 
FROM table1 
  LEFT OUTER JOIN (
     SELECT field1, id2 FROM table2
  ) tb2 ON table1.id1= tb2.id2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:55:02.427

您不需要派生查询，只需执行普通连接：

```
select coalesce(field1,'') as field1 
from   table1 
left outer join table2
on table1.id1= tb2.id2 
```

如果您`COALESCE`在原始查询中使用 ，那将无法正常工作；`SELECT`在主要声明中将需要它。

# jquery - 为什么jQuery被某些标签包围时找不到next()？

> ID：13325830
> 
> 赞同：3
> 
> 时间：2012-11-10T20:31:41.267
> 
> 标签：jquery

当我的元素被 P 标记或 SPAN 标记包围时，为什么 jQuery 找不到 next()，即使该元素确实有直接兄弟？

```
<p>
 <img src="" width="40" height="40"
  onmouseover="alert('next() is ' + $(this).next().length)" />
  &lt;-- mouseover me
 <div></div>
</p>​ 
```

如果我将 P 标签更改为 SPAN 标签，则会出现同样的问题。如果我删除 P 标签或将其更改为几乎任何其他标签，它工作正常。

JSFiddle：http: [//jsfiddle.net/YHTGT/](http://jsfiddle.net/YHTGT/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:37:19.407

`div`不是节点中的有效节点`p`，因此解析器可能会完全忽略它。如果它有内容，我希望它在 DOM 树中移动到节点*之后*，`p`使其*不是*.`img`

将其更改`div`为`span` [有效](http://jsfiddle.net/HMCan/)，因为`span`那里是允许的。

# javascript - CSS 3D变换以制作给定边长的梯形

> ID：13325834
> 
> 赞同：5
> 
> 时间：2012-11-10T20:32:26.620
> 
> 标签：javascript, css, 3d, transform

`rotateX`我有一个给定尺寸的元素（例如 100x300 像素），它位于一个高度和可变宽度相同`-webkit-transform-origin: top center;`的`-webkit-perspective`容器中它只是扩展以填充整个容器。

哇，这听起来很混乱。这是一张图片：

![梯形变换](../Images/147cf58eeedd7e63c602e8cdfd16c307.png)

所以基本上，我想创建一个具有固定上部宽度和可变下部宽度的梯形。但是，我无法弄清楚关系背后的数学原理……欢迎使用 Javascript。如果正文宽度为 600px，则以下示例有效：http: [//jsfiddle.net/24qrQ/](http://jsfiddle.net/24qrQ/)

现在的任务是随着身体宽度不断地改变视角和旋转。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T01:12:17.093

好吧，在喝了一杯酒之后，数学又回到了我的脑海：

首先，让我们看一下透视/旋转比例。从侧面看，它看起来像这样：

![在此处输入图像描述](../Images/9d2d91b4968ad65770ced882ef5db0c9.png)

红色元素围绕其上边缘旋转，如果我们将其下边缘投影到容器的下边缘，则投影线与其上边缘垂直于容器的线的交点就是所需的视点。我们通过简单的三角函数得到这个（注意这里的 phi 是弧度，而不是度数）。

如果我们应用这个，元素的下边缘将始终出现在容器的下边缘。现在自由参数是旋转。这*似乎*有关系

```
rad = pi/2 - element.width / container.width 
```

对于足够大的宽度，但是我不能完全理解实际的关系。这是一个小提琴：http: [//jsfiddle.net/24qrQ/6/](http://jsfiddle.net/24qrQ/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T21:07:17.460

基本上，您试图弄清楚如何将对象放置在 3D 空间中，使其与 2D 视口对齐。这总是一件棘手的事情。

我不知道数学是什么，大多数其他人可能也不知道。这几乎不是一个普遍的问题。但这就是我要弄清楚的方法。

这里唯一的变量是`width`。需要根据宽度更改的 2 个值`-webkit-perspective`位于容器和`-webkit-transform`内部元素上。所以我会手动编辑几个不同宽度的值，并记录你必须输入的 3D 值以使事情看起来正确。（我会使用网络检查器实时编辑值，以便您立即获得反馈）

一个你有几个数据点，将它们绘制在图表上，然后尝试弄清楚它们是如何变化的。我有一种预感，它是一条抛物线，但它也可能是双曲线或正弦曲线，我的 3D 数学还不够好，无法确定。

然后你可以试着找出一个方程，当你输入你采样的宽度时，你会得到你之前设置的手动 3D 值。然后用 JS 读取容器的宽度，设置 CSS 值使其看起来正确。

* * *

我用 3 个宽度 300、450、600 做到了这一点：

[http://jsfiddle.net/24qrQ/3/](http://jsfiddle.net/24qrQ/3/)

一些趋势是显而易见的。随着宽度的增加，透视以增加的速率上升，而旋转以增加的速率下降。

找出确切的公式，现在由您决定。

* * *

作为一种更简单的选择，如果计算公式变得太困难，您可以手动选择一些看起来不错的宽度和 3D 值并将它们存储在 JS 中的某个地方。然后你可以在它们之间进行线性插值。这不会是准确的，但它可能已经足够接近了。

它也将不那么有趣！

# c# - 如何获取列表中所有元素的绝对值？

> ID：13325838
> 
> 赞同：7
> 
> 时间：2012-11-10T20:32:59.700
> 
> 标签：c#, lambda

我想做如下的事情：

```
total.ForEach(x => x = Math.Abs(x)); 
```

但是 x 不是参考值。我该怎么做呢？

编辑：

是否可以就地执行此操作而不创建另一个列表并且不使用 for 循环？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-10T20:36:38.553

您可以使用 Linq。

```
total.Select(x => Math.Abs(x)).ToList(); 
```

这将为您提供一个新的绝对值列表`total`。如果你想就地修改

```
for(int i = 0; i < total.Count; i++)
{
     total[i] = Math.Abs(total[i]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T20:37:50.653

如果我理解正确，您需要绝对值列表。尝试类似的东西

```
 List<long> a = new List<long>() { 10, -30, 40 }; //original list
 List<long> b = a.ConvertAll<long>(x => Math.Abs(x)); //abs list 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-14T08:40:15.490

由于使用较少的方法调用，这将稍微更有效。

```
total.Select(x => x * -1).ToList(); 
```

# php - 正则表达式可选字符

> ID：13325839
> 
> 赞同：0
> 
> 时间：2012-11-10T20:33:10.810
> 
> 标签：php, regex

3个字符串（这里是HTML代码，请不要说使用HTML解析器，我必须使用RegEx）：

```
</div><img src="http://www.example.com/nano.png" alt="NANOTECH" />
</div><img src="http://www.example.com/internet.gif" alt="INTERNET" />
</div> 
```

我想在那里捕捉 3 行。所以尝试了这个：（PHP `preg_match`）

```
<\/div>.[<img src="http:\/\/www.example.com\/.*?\/>]+ 
```

但它只是`</div><img src="http://www.example.com/`

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:42:39.927

嗯，你为什么不试试

```
<\/div><img src="http:\/\/www.example.com\/.*?\/> 
```

您失败的原因是您使用方括号`[]`定义匹配字符列表，然后告诉正则表达式匹配任何这些字符一次或多次（`+`）。由于既不包括`i`也不包括，匹配分别在和`n`的开头停止。`internet.gif``nano.png`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:44:49.963

将[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)与正则表达式模式一起使用

```
/^<\/div>(<img src="http:\/{2}www.example.com[^>]*>)?$/m 
```

或将[preg_match](http://php.net/manual/en/function.preg-match.php)与正则表达式模式一起使用

```
/(^<\/div>(<img src="http:\/{2}www.example.com[^>]*>)?$(?:\n?|\Z))+/m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:41:32.353

你需要圆括号，而不是方括号。方括号表示一个字符类，它匹配括号中的任何单个字符。您也不希望 and 之间的点`/div>`，`<img`因为在您的示例中它们之间没有差距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T20:47:36.527

```
/(<\/div>(?:<img\w*src="http:\/\/www\.example\.com\/[^"]+?"[^>]*?>)?)/m 
```

还可以使用 preg_match_all 来查找不仅仅是一个，而是所有匹配项。

# c# - 如何将form2中的文本框值传递给c#中的form1

> ID：13325842
> 
> 赞同：1
> 
> 时间：2012-11-10T20:33:38.483
> 
> 标签：c#, winforms

大家好，我是 c# 新手，使用 Visual c# 2010，我正在尝试学习基础知识。

我创建了两个表单（Form1 和 Form2）

每个表单都有一个文本框和一个按钮

我的实验（form1到form2）如下：

我已经声明了一个字符串

公共字符串定名；我公开了两个文本框，并在表单 1 按钮中写下以下内容：

```
deneme= textbox1.text;
Form2 frm2 = new Form2();
form2.show();

form2.textbox1.text= deneme; 
```

当我这样做时，它会起作用，我会在 form2 文本框上看到我的输入。**我想做的是；按下form1上的按钮并打开form2，然后在文本框上写一些东西并在form1文本框上显示该输入，我使用相同的方法但它什么也不返回..我做错了什么？**

我很抱歉我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:45:08.993

简单的方法是 Form2 的一个属性

您可以将属性添加到 form2

```
public string Result{get;set;} 
```

并在外部代码中检查

```
form1.textbox1.text= form2.Result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:10:03.897

```
deneme= textbox1.text;
Form2 frm2 = new Form2(dename);
form2.show(); 
```

> 在 form2 中，在 Initialize 方法中执行此操作：

```
Initialize(string name)    
{
        form2.textbox1.text= name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:03:38.660

大家好，我已经解决了我的问题，这就是我所做的！

在第二种形式中，我编写了以下代码

```
Form1 mymainform;

public Form2(Form1 m)
{
    InitializeComponent();
    afrm1 = m;
} 
```

并在按钮单击我写以下

```
mymainform.Textboxnameinform1.text = textboxnameinform2.text;    
this.close(); 
```

在 Form1 中，我有调用 form2 的按钮，我编写了以下代码

```
Form2 frm2 = new Form2(this);    
frm2.Show(); 
```

如果有人遇到同样的困难并且无法解决，请随时与我联系，如果我能帮助你，我会很高兴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T14:23:36.893

检查这些不仅仅是传递给另一个表单的单个值，还可以处理来回传递值以及挂钩事件......不是高级的东西，但也有一些分步示例

[之前在这里发帖](https://stackoverflow.com/questions/8166896/how-do-i-invoke-a-method-in-a-userform-from-parent-form/8168642#8168642)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-17T08:31:36.950

```
 //this code worked for me
 //in form2 put following code prevent form from opening multiple times  
 public partial class Form2 : Form
    {
        public Form2()
        {
             InitializeComponent();
        }
        private static Form2 Instance;
        public static Form2 GetInstance()
            {
               if (Instance ==null || Instance.IsDisposed)
                {  
                    Instance = new Form2();
            }
            else
             {
                Instance.BringToFront();
            }
                 return Instance;
         }

 // in form1

 public partial class Form1 : Form
     {
         public Form1()
        {
             InitializeComponent();
        }

         private void Button2_Click(object sender, EventArgs e)
         {
            Form2 form2 = Form2.GetInstance();
            form2.textBox1.Text = textBox1.Text;
            form2.Show();
        }
    } 
```

# objective-c - 使用 NSFetchedresultController 对“瞬态”字段进行排序

> ID：13325849
> 
> 赞同：8
> 
> 时间：2012-11-10T20:34:19.320
> 
> 标签：objective-c, cocoa-touch, core-data, nsfetchedresultscontroller

有没有办法使用“瞬态”字段或类似的东西，并以某种方式使用 NSFetchedResultsController 进行相应的排序。我想做以下事情：

我在数据库中有地点的位置。当一个人打开列表时，我想在顶部显示最近的地方，然后根据距离进行排序。但很明显，这取决于用户的位置，所以我不能使用静态字段。我希望使用瞬态字段，您可以将其用于节标题。

有没有人可以为这种情况提供解决方案或解决方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T21:40:44.047

您不能在 SQlite 基础核心数据存储的获取请求中使用瞬态属性。

请参阅“Core Data Programming Guide”中的[Fetching Managed Objects ：](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW3)

> 您不能使用基于瞬态属性的谓词进行获取（尽管您可以使用瞬态属性自己在内存中进行过滤）。...总而言之，如果您直接执行 fetch，则通常不应将基于 Objective-C 的谓词或排序描述符添加到 fetch 请求中。相反，您应该将这些应用于获取的结果。

您可以对 使用瞬态属性`sectionNameKeyPath`，但即便如此，您也需要基于持久属性的部分的第一个排序描述符。

所以唯一的解决方法可能是获取所有对象，然后对获取的数组进行排序。但是当然，您不再具有获取结果控制器的优势。

# javascript - div 隐藏和显示

> ID：13325850
> 
> 赞同：-2
> 
> 时间：2012-11-10T20:34:26.443
> 
> 标签：javascript, css, html

我正在为一家公司（我的第一个网站，除了我自己的网站）工作，我有点困惑。我知道我以前知道这一点，但我忘记了。

我将在网站上创建许多不同的页面，我想为每个页面创建一个新文件不是一个好主意。

我认为最好的方法是在索引文件中为每一页制作一个“div”，然后以某种方式将所有这些放在一起，然后在我单击菜单中的正确内容时一一显示...我该怎么做呢？

我可以只使用 CSS 还是需要一些 Java 脚本，以及如何编写代码？

非常感谢您的快速帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:45:33.267

您正在谈论制作一个包含公司网站*所有内容的 HTML 页面。*以这种方式建立公司网站是一个坏主意，原因如下：

*   Web 浏览器希望浏览具有多个页面的站点，这就是它们具有位置栏和前进/后退按钮的原因。你的方法打破了这两个。
*   这个单一页面会更大，并且需要更长的时间才能加载到用户的 Web 浏览器中。
*   页面的 SEO 会很差，因为它的内容很难让谷歌和其他蜘蛛从语义上理解。包含如此多文本的大页面对于 Google 来说就像是关键字填充，并且会受到惩罚。
*   很难保持这样的页面井井有条；对任何内容进行任何更改都需要您编辑单个文件，因此您将更难跟踪和/或合并对不同文档的更改，并且公司更难进行内容更改。
*   最后，这种方法是*不合适*的。您说得对，为每个页面创建一个静态 HTML 文件并不太好。但解决方案不是制作单个网页；解决方案是使用 CMS！

[Wordpress](http://wordpress.org)是世界上最受欢迎的 CMS。它专为博客而设计，但可用于任何网站。 [Drupal](http://drupal.org)是一个功能强大的 CMS，具有许多您可能不需要的功能，但它比 Wordpress 更现代，并且在视觉上可能更灵活。

如果您不想使用成熟的 CMS，并且想调整一些编程技巧，则可以尝试使用开箱即用的 MVC 框架，例如[Rails](http://rubyonrails.org)或[Django](https://www.djangoproject.com/)，但请记住，这些都需要您学习一点 Ruby 或 Python。

主要的是您应该使用服务器端模板来解决您遇到的问题，而不是客户端 JavaScript。

（一些非常大的网站确实使用基于 JavaScript 的页面导航方法，但这些通常是 Twitter 等**Web 应用程序**。这种方法不适合企业网站。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:47:21.940

您可以使用 Javascript 更改元素的 innerHTML。例如，创建一个 div 并为其指定 ID“myDiv”：

```
<div id="myDiv"></div> 
```

然后，当用户单击按钮时，您可以像这样更改“myDiv”的 innerHTML（通过调用函数）：

```
function show(){
   document.getElementById("myDiv").innerHTML="html code here";
} 
```

我希望我有所帮助:-)

# iphone - 删除核心图形过滤器

> ID：13325852
> 
> 赞同：0
> 
> 时间：2012-11-10T20:34:54.430
> 
> 标签：iphone, ios, image-processing, uiimage, core-graphics

我正在尝试一种有效的方法来删除核心图形图像过滤器，这里是过滤器的代码，它将棕褐色效果应用于 UIImage

```
-(UIImage*)applyFilter {

    CGImageRef inImage = self.CGImage;
    CFDataRef m_dataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));
    UInt8* m_pixelBuf = (UInt8*)CFDataGetBytePtr(m_dataRef);

    int length = CFDataGetLength(m_dataRef);

    for (int i=0; i<length; i+=4) {
        filterSepia(m_pixelBuf, i);
    }

    CGContextRef ctx = CGBitmapContextCreate(m_pixelBuf,
                                         CGImageGetWidth(inImage),
                                         CGImageGetHeight(inImage),
                                         CGImageGetBitsPerComponent(inImage),
                                         CGImageGetBytesPerRow(inImage),
                                         CGImageGetColorSpace(inImage),
                                         CGImageGetBitmapInfo(inImage));

    CGImageRef imageRef = CGBitmapContextCreateImage(ctx);
    CGContextRelease(ctx);
    UIImage* finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CFRelease(m_dataRef);
    return finalImage;
}

void filterSepia(UInt8 *pixelBuf, UInt32 offset) {

    int r = offset;
int g = offset+1;
int b = offset+2;

int red = pixelBuf[r];
int green = pixelBuf[g];
int blue = pixelBuf[b];

    pixelBuf[r] = SAFECOLOR((red*0.393)+(green*0.769)+(blue*0.189));
    pixelBuf[g] = SAFECOLOR((red*0.349)+(green*0.686)+(blue*0.168));
    pixelBuf[b] = SAFECOLOR((red*0.272)+(green*0.534)+(blue*131));
} 
```

现在我想有效地删除这个效果或类似的东西我可以在按下切换按钮时做这样的事情

在标题中：

```
#define SAFECOLOR(color) MIN(255, MAX(0,color))
BOOL toggleOn;
@property (nonatomic, retain)UIImage* image; 
```

在实施中：

```
-(IBAction)sepiaButton:(id)sender {

    UIImage* original = image;
    if (toggleOn) {
        [image applyFilter];
    } else {
        image = original;
    }
    toggleOn =! toggleOn
} 
```

但是，由于应用了多个图像过滤器，这会变得效率低下，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:03:40.680

为什么要继续生成相同的图像而不是预渲染它们？保留原始版本的副本并简单地隐藏覆盖的视图。

# java - 用于在提供引用的同时确保唯一性的 Java 集合

> ID：13325857
> 
> 赞同：0
> 
> 时间：2012-11-10T20:35:44.903
> 
> 标签：java, collections, reference, unique-key

我有这样的结构：

```
public class Foo
{
    public int A ;
    public int B ;
    public int C ;
} 
```

我需要将它们一个接一个地添加到一个集合中，这样我最终得到的副本不超过一个，其中 A、B 和 C 都相等。我还需要引用另一个类的对象，如下所示：

```
public class Bar
{
    public Foo A ;
    public Foo B ;
    public Foo C ;
} 
```

我尝试使用 a `TreeSet < Foo >`，它可以确保唯一性，但我无法从 TreeSet 中获取引用（只有它是否在集合中的布尔值），所以我无法将该引用传递给`Bar`. 我尝试将 a`TreeMap < Foo , Integer >`与 an 一起使用`ArrayList < Foo >`，这可以确保唯一性并允许我获取对对象的引用，但它会浪费大量时间和内存来维护 the`ArrayList`和`Integer`s。

我需要一种方式来说“如果`Foo`集合中还没有这个，添加它；否则，给我`Foo`已经在集合中的，而不是我创建的，以检查它在集合中的存在。”。

（我突然想到我可以做类似的事情`TreeMap < Foo , Foo >`，这会做我想做的事，但它似乎仍然是一种浪费，即使它远不及一个，所以我会继续这个问题，希望启示。）

（是的，我确实实现`Comparable`了在树中进行唯一性检查；那部分已经起作用了。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:44:28.253

我会使用例如一个`TreeMap<Foo, Foo>`对象。当您在地图中`put`新建`Foo`时，请将其指定为键和值。这使您可以使用`get`来返回`Foo`集合中的已有值。请注意，您必须自己处理`Foo`地图中已经存在的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:43:24.317

为了确保 a 的唯一性`Set`，您需要覆盖Foo`equals()`的`hashcode()`两个具有相同 A、B、C 的实例`.equals()`。

理想情况下，您放入 Set 中的任何内容都应该是不可变的（即您的三个整数应该是`final`. 从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)中：

> 如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。

不幸的是，`Set`它没有提供任何允许您获取实际实例的方法 - 您需要一个`Map`或另一个集合，因为您已经尝试过。

**更新**另一种方法是根据JDK[源代码](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)创建自己的修改版本的TreeSet，以添加获取所需实例的方法（扩展标准TreeSet不会做您需要的，因为相关字段是`private`，除非您使用反射以访问它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:53:07.347

[Neil Coffey在 Java 中的 Sorted collection 中](https://stackoverflow.com/questions/416266/sorted-collection-in-java)的一个解决方案给出了我需要的东西，它正在使用`ArrayList < Foo >`并且总是在`Collections . binarySearch`获取列表中已经存在的元素的索引，或者应该将元素插入到列表中的点。

这像一棵树一样在 O(log n) 时间维护一个不断排序的列表，但允许同时检索现有实例。不幸的是，它有 O(n) 的插入时间，但在这种情况下，这并不是世界末日，尽管它仍然不是最理想的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T00:35:43.210

显然 a`TreeList`基于 a`TreeMap`因此使这种方法变得多余，但我想我还是为了完整性而对其进行评论。

If a copy of a `Foo` object exists in the `TreeList` (e.g. as returned by `contains`) then you can retrieve the copy using the `tailSet` and `first` methods.

# f# - 可以在 F# 中限制抽象类型成员的输入参数吗？

> ID：13325858
> 
> 赞同：2
> 
> 时间：2012-11-10T20:35:55.777
> 
> 标签：f#

采用这篇文章[在 F# 中实现幻像类型中](https://stackoverflow.com/questions/3583679/implementing-phantom-types-in-f)解释的幻像类型的想法，我试图限制抽象类型成员的输入参数，更一般地说是任何类型成员。这可能是不可能的，我很高兴收到这个信息。

这是我正在尝试的：

```
// my phantom type
type Ascending = interface end
type Descending = interface end
type HeapOrder =
    inherit Ascending
    inherit Descending

// my type
type IHeap<'a when 'a : comparison> =
    inherit System.Collections.IEnumerable
    inherit System.Collections.Generic.IEnumerable<'a>
...
abstract member Order : HeapOrder with get
...
// ...and one or the other of these inherited types :
type IHeap<'c, 'a when 'c :> IHeap<'c, 'a> and 'a : comparison> =
    inherit IHeap<'a>
// or:
type IHeap<'a, 'd when 'a : comparison  and 'd :> HeapOrder> =
    inherit System.Collections.IEnumerable
    inherit System.Collections.Generic.IEnumerable<'a>

type IHeap<'c, 'a, 'd when 'c :> IHeap<'c, 'a, 'd> and 'a : comparison and 'd :> HeapOrder> =
    inherit IHeap<'a>
...
// ...and the member I want to constrain, so that the HeapOrder of the 
// input parameter matches the HeapOrder of the instantiated type.
// Conceptually one of these alternatives (none of these build, 
// but they should convey what I'm attempting):
//
abstract member Merge : ('c when 'c<'c, 'a> : (member Order when Order :> 'd))
// or
abstract member Merge : ('c when c' :> IHeap<'c, 'a, 'd>) -> 'c
// or
abstract member Merge : ('c when c' : #IHeap<'c, 'a, 'd>) -> 'c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:38:01.923

如果您要求的是，您不能进一步限制特定成员的类类型参数。如果您愿意，可以引入一个独立约束的新成员类型参数。我不确定这是否能解决您的问题。

我认为 Ascending 和 Descending 都应该从 HeapOrder 继承，而不是相反。

然后你可以用 Ascending 或 Descending 实例化一个堆，并且 'd 应该捕获这个事实，这样你就不能与另一个具有不同 HeapOrder 的堆合并。我认为您不需要为此对 Merge 进行单独的约束。

以防万一，您可以通过将 when 放在末尾来限制抽象成员的类型参数。此外，在最后两次合并中，您的 'c 中有错字，' 位于 c 之后。

# java - 企业 Java Bean 部署

> ID：13325866
> 
> 赞同：0
> 
> 时间：2012-11-10T20:36:39.973
> 
> 标签：java, jakarta-ee, maven, javabeans

今天是个好日子！

我正在通过 Antonio Goncalves 的一本书“Beginning JavaEE 6 with Glassfish 3”来学习 JavaEE 6。我遇到了一个问题，我无法在 Glassfish 3+ (glassfish-3.1.2.2) 上部署我的远程无状态 Java Bean，以下代码段代表一个：

```
 ...
    @Stateless
    @LocalBean
    public class UserEJB implements UserEJBRemote {
        public User createUser(User anUser) throws IllegalArgumentException,
                                                   IllegalStateException,
                                                   PersistenceException {
            ...
        }

    public List<User> findAll() throws IllegalArgumentException,
                                       PersistenceException {
        ...
    } 

    public User findById(Long anId) throws IllegalArgumentException {
        return em.find(User.class, anId);
    } 

    public void removeByMail(String aUserMail) throws IllegalArgumentException, 
                                                      TransactionRequiredException {

        ...
    }

    public User update(User anUser) throws IllegalArgumentException, 
                                               TransactionRequiredException {

        return em.merge(anUser);                    
    }

    @PersistenceContext(unitName = "NotebookUsers")
    private EntityManager em;
}
... 
```

我的`@Remote`接口声明是：

```
...
@Remote
public interface UserEJBRemote {
    public User createUser(User anUser) throws IllegalArgumentException,
                                               IllegalStateException,
                                               PersistenceException;
public List<User> findAll() throws IllegalArgumentException,
                                   PersistenceException;

public List<User> findByName(String aUserName) throws IllegalArgumentException,
                                                      PersistenceException;

public User findById(Long Id) throws IllegalArgumentException;

public void removeByMail(String aUserMail) throws IllegalArgumentException, 
                                                  TransactionRequiredException ;

    public User update(User anUser) throws IllegalArgumentException, 
                                           IransactionRequiredException ;
}
... 
```

我还有一个简单的 JUnit 测试：

```
 ...
    public class TestUserEJB {
    @BeforeClass
    public static void initialize() throws Exception {
        ec = EJBContainer.createEJBContainer();
        ctx = ec.getContext();
    }

    @AfterClass
    public static void close() throws Exception {
        if(null != ec) {
            ec.close();
        }
    }

    @Test 
    public void testCreateAnUser() throws Exception {
        User testUser0 = new User();
        testUser0.setFirstname("Vova");
        testUser0.setSurname("Puchkov");
        testUser0.setMail("vasya.puchkov@gmail.com");
        testUser0.setPhoneNumber("8(777)6769990");

        UserEJB userEJB = (UserEJB) ctx.lookup("java:global/classes/UserEJB!" + 
            "beginning.javaee.notebook.UserEJB");       

        userEJB.createUser(testUser0);
        assertNotNull("ID should not be null", testUser0.getId());

        List<User> allUsers = userEJB.findAll();
        assertNotNull("Can't find users", allUsers);        
    }

    private static EJBContainer ec;
    private static Context ctx;
}
... 
```

但是在我尝试构建我的应用程序之后，`mvn package`我得到了以下异常：

```
Nov 10, 2012 11:15:22 PM org.glassfish.ejb.embedded.EJBContainerProviderImpl createEJBContainer
SEVERE: ejb.embedded.exception_instantiating
java.lang.NoSuchMethodError: org.slf4j.impl.StaticLoggerBinder.getSingleton()Lorg/slf4j/impl/StaticLoggerBinder;
    at org.slf4j.LoggerFactory.bind(LoggerFactory.java:121)
    at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:111)
    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:268)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:241)
    at org.hibernate.validator.util.LoggerFactory.make(LoggerFactory.java:29)
    at org.hibernate.validator.util.Version.<clinit>(Version.java:30)
    at org.hibernate.validator.engine.ConfigurationImpl.<clinit>(ConfigurationImpl.java:52)
    at org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:43)
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:269)
    at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111)
    at org.jvnet.hk2.config.WriteableView.<init>(WriteableView.java:96)
    at org.jvnet.hk2.config.ConfigSupport.getWriteableView(ConfigSupport.java:202)
    at org.jvnet.hk2.config.ConfigSupport.getWriteableView(ConfigSupport.java:218)
    at org.jvnet.hk2.config.ConfigSupport._apply(ConfigSupport.java:154)
    at org.jvnet.hk2.config.ConfigSupport.apply(ConfigSupport.java:130)
    at org.jvnet.hk2.config.ConfigSupport.apply(ConfigSupport.java:109)
    at org.glassfish.scripting.jruby.sniffer.JRubySniffer.setup(JRubySniffer.java:151)
    at com.sun.enterprise.v3.server.ContainerStarter.startContainer(ContainerStarter.java:99)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.setupContainer(ApplicationLifecycle.java:703)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:451)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:264)
    at org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:79)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:131)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:129)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:197)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:206)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:232)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:129)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:644)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:296)
    at org.glassfish.kernel.embedded.EmbeddedDeployerImpl.deploy(EmbeddedDeployerImpl.java:214)
    at org.glassfish.kernel.embedded.EmbeddedDeployerImpl.deploy(EmbeddedDeployerImpl.java:144)
    at org.glassfish.ejb.embedded.EJBContainerImpl.deploy(EJBContainerImpl.java:128)
    at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createEJBContainer(EJBContainerProviderImpl.java:120)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:102)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:78)
    at beginning.javaee.notebook.TestUserEJB.initialize(TestUserEJB.java:18)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 69.444 sec <<< FAILURE! 
```

因为我假设所有必要的依赖项都添加到了我的`pom.xml`：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>beginning.javaee.notebook</groupId>
  <artifactId>simple-ee-notebook</artifactId>
  <version>0.0.1</version>
  <packaging>jar</packaging>

  <name>simple-ee-notebook</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.10</version>
      <scope>test</scope>
      <type>jar</type>
    </dependency>

    <dependency>
      <groupId>org.hibernate.javax.persistence</groupId>
      <artifactId>hibernate-jpa-2.0-api</artifactId>
      <version>1.0.1.Final</version>
    </dependency>

    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-entitymanager</artifactId>
      <version>3.6.10.Final</version>
    </dependency>

    <dependency>
      <groupId>org.glassfish</groupId>
      <artifactId>javax.ejb</artifactId>
      <version>3.0.1</version>
    </dependency>

    <dependency>
      <groupId>org.glassfish.extras</groupId>
      <artifactId>glassfish-embedded-all</artifactId>
      <version>3.0.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.2</version>
        <configuration>
          <archive>
            <manifest>
              <mainClass>beginning.javaee.notebook.App</mainClass>
            </manifest>
          </archive>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <inherited>true</inherited>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

几天来我一直试图解决这个问题，但一切都没有成功。感谢帮助。
我添加了所有相关的依赖项`org.slf4j`，问题就解决了。再次感谢：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.6.1</version>
</dependency>

<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>1.6.1</version>
</dependency> 
```

但是我遇到了一个新问题：

```
 Nov 13, 2012 12:29:02 AM org.glassfish.api.ActionReport failure
SEVERE: Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method
java.lang.RuntimeException: javax.naming.NamingException: Lookup failed for 'jdbc/NotebookUsersPoolDB' in SerialContext  [Root exception is javax.naming.NameNotFoundException: NotebookUsersPoolDB not found]
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:111)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:130)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:96)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:121)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:644)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:296)
    at org.glassfish.kernel.embedded.EmbeddedDeployerImpl.deploy(EmbeddedDeployerImpl.java:214)
    at org.glassfish.kernel.embedded.EmbeddedDeployerImpl.deploy(EmbeddedDeployerImpl.java:144)
    at org.glassfish.ejb.embedded.EJBContainerImpl.deploy(EJBContainerImpl.java:128)
    at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createEJBContainer(EJBContainerProviderImpl.java:120)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:102)
    at beginning.javaee.notebook.TestUserEJB.initialize(TestUserEJB.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: javax.naming.NamingException: Lookup failed for 'jdbc/NotebookUsersPoolDB' in SerialContext  [Root exception is javax.naming.NameNotFoundException: NotebookUsersPoolDB not found]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:442)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.lookup(ConnectorResourceAdminServiceImpl.java:203)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupPMResource(ConnectorRuntime.java:429)
    at org.glassfish.persistence.jpa.JPADeployer$ProviderContainerContractInfoImpl.lookupDataSource(JPADeployer.java:228)
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:108)
    ... 33 more
Caused by: javax.naming.NameNotFoundException: NotebookUsersPoolDB not found
    at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:197)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:168)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:172)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:58)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:101)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:430)
    ... 39 more
Nov 13, 2012 12:29:02 AM org.glassfish.api.ActionReport failure
SEVERE: Exception while preparing the app
java.lang.RuntimeException: javax.naming.NamingException: Lookup failed for 'jdbc/NotebookUsersPoolDB' in SerialContext  [Root exception is javax.naming.NameNotFoundException: NotebookUsersPoolDB not found]
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:111)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:130)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:96)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:121)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:644)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:296)
    at org.glassfish.kernel.embedded.EmbeddedDeployerImpl.deploy(EmbeddedDeployerImpl.java:214)
    at org.glassfish.kernel.embedded.EmbeddedDeployerImpl.deploy(EmbeddedDeployerImpl.java:144)
    at org.glassfish.ejb.embedded.EJBContainerImpl.deploy(EJBContainerImpl.java:128)
    at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createEJBContainer(EJBContainerProviderImpl.java:120)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:102)
    at beginning.javaee.notebook.TestUserEJB.initialize(TestUserEJB.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: javax.naming.NamingException: Lookup failed for 'jdbc/NotebookUsersPoolDB' in SerialContext  [Root exception is javax.naming.NameNotFoundException: NotebookUsersPoolDB not found]
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:442)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.lookup(ConnectorResourceAdminServiceImpl.java:203)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupPMResource(ConnectorRuntime.java:429)
    at org.glassfish.persistence.jpa.JPADeployer$ProviderContainerContractInfoImpl.lookupDataSource(JPADeployer.java:228)
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:108)
    ... 33 more
Caused by: javax.naming.NameNotFoundException: NotebookUsersPoolDB not found
    at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:197)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:168)
    at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:172)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:58)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:101)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:430)
    ... 39 more
Nov 13, 2012 12:29:02 AM org.glassfish.ejb.embedded.EJBContainerProviderImpl createEJBContainer
INFO: [EJBContainerProviderImpl] Cleaning up on failure ...
Nov 13, 2012 12:29:02 AM org.glassfish.admin.mbeanserver.JMXStartupService shutdown
INFO: JMXStartupService and JMXConnectors have been shut down.
Nov 13, 2012 12:29:02 AM com.sun.enterprise.v3.server.AppServerStartup stop
INFO: Shutdown procedure finished
Nov 13, 2012 12:29:02 AM AppServerStartup run
INFO: [Thread[GlassFish Kernel Main Thread,5,main]] exiting
Nov 13, 2012 12:29:03 AM org.glassfish.ejb.embedded.EJBContainerProviderImpl createEJBContainer
SEVERE: ejb.embedded.exception_instantiating
javax.ejb.EJBException: Failed to deploy EJB modules - see log for details
    at org.glassfish.ejb.embedded.EJBContainerImpl.deploy(EJBContainerImpl.java:135)
    at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createEJBContainer(EJBContainerProviderImpl.java:120)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:102)
    at beginning.javaee.notebook.TestUserEJB.initialize(TestUserEJB.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

所有需要的 jdbc 资源都在服务器上，我检查了一下。它们是使用以下命令创建的：

```
/home/ilya/glassfishv3.1.2/bin/asadmin create-jdbc-connection-pool \
                                    --datasourceclassname=org.postgresql.ds.PGSimpleDataSource \
                                    --restype=javax.sql.DataSource \
                                    --property portNumber=5432:password=12345678:user=postgres:serverName=localhost:databaseName=postgres \
                                      NotebookUsersPool
/home/ilya/glassfishv3.1.2/bin/asadmin create-jdbc-resource --connectionpoolid NotebookUsersPool jdbc/NotebookUsersPoolDB 
```

我的`persistence.xml`

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence                                       
                      http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="NotebookUsers" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/NotebookUsersPoolDB</jta-data-source>
    <class>beginning.javaee.notebook.User</class>
    <properties>
<!--       <property name="hibernate.connection.username" value="postgres"/>
      <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
      <property name="hibernate.connection.password" value="12345678"/>
      <property name="hibernate.connection.url" value="jdbc:postgresql://localhost:5432/postgres"/> -->
      <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
      <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
      <property name="hibernate.show_sql" value="true"/>
    </properties>
  </persistence-unit>
</persistence> 
```

应用服务器正在运行，数据库服务器也在运行，但是当我运行测试时，我无法搜索“jdbc/NotebookUsersPoolDB”。有什么问题？我没有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:39:48.053

```
java.lang.NoSuchMethodError: org.slf4j.impl.StaticLoggerBinder.getSingleton()Lorg/slf4j/impl/StaticLoggerBinder; 
```

意味着您的代码正在调用未定义的方法。可能代码正在使用比您的 Maven 依赖项中定义的更新的 slf4j 版本。

尝试将以下条目添加到您的`pom.xml`：

```
<dependency>
<groupId>org.slf4j</groupId>
<artifactId>slf4j-api</artifactId>
<version>1.7.2</version>
</dependency>

<dependency>
<groupId>org.slf4j</groupId>
<artifactId>slf4j-log4j12</artifactId>
<version>1.7.2</version>
</dependency> 
```

# javascript - 如何防止自动 JSON 密钥类型转换

> ID：13325877
> 
> 赞同：11
> 
> 时间：2012-11-10T20:38:28.857
> 
> 标签：javascript, json, google-chrome

祝大家有美好的一天，

我遇到了一个似乎只发生在 Chrome 中的令人沮丧的问题。

```
var response = '{"01":"January","02":"February"}',
    months = JSON.parse(response);

console.log(months['02']) // undefined in Chrome (my version is 24.0.1312.5 beta)
console.log(months[2]) // "February" 
```

Firefox 和 Safari 似乎可以按预期处理此问题，而 Chrome 将字符串式 JSON 键转换为整数。

jQuery 的 parseJSON 方法具有相同的行为（我假设它依赖于浏览器的 JSON.parse 方法）。

我完全受制于这种特定的 API 响应格式，所以我宁愿不更改服务器的响应。有没有一种健全的方法可以强制 Chrome 按预期运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T21:32:48.873

> *“有没有一种理智的方法可以迫使 Chrome 表现得像预期的那样？”*

不确定你是否称它为理智，但你可以在 reviver 函数中进行一些操作来修补它。

```
var response = '{"01":"January","02":"February"}',
    months = JSON.parse(response, 
                       function(k,v) {
                         if (this.constructor === Object && // is Object
                                               !isNaN(k) && // key is a Number
                                                  +k > 0 && //   from 1
                                                  +k < 1 && //     to 9
                                        k.charAt(0) !== '0') { // missing the '0'
                             this['0' + k] = v;    // manually assign the key
                             return;  // return undefined to prevent assignment
                         }
                         return v; // allow the assignment
                     });

console.log(months['02']); 
```

当然，您可能需要为您的代码稍微调整一下，这样您就不会修复不需要修复的东西。

您可能还想在浏览器运行之前对其进行测试，以查看是否需要修复。

```
var needsJSONfix = !JSON.parse('{"01":1}')["01"]; 
```

* * *

```
months = JSON.parse(response, needsJSONfix ? fixFunc : null); 
```

# reporting-services - 保存报告时在 where 子句中禁用查询重写

> ID：13325880
> 
> 赞同：2
> 
> 时间：2012-11-10T20:38:50.750
> 
> 标签：reporting-services

当我在数据集中编写查询并保存 rdl 时，SSRS 会重写查询。有没有办法通过报表、数据集或 rdl 中其他未记录位置的属性来禁用此功能？

例如，如果我的查询具有以下 where 子句：

```
where active = @active and (@myid IS NULL OR id = @myid) 
```

它被转换为：

```
where ( active = @active and @myid IS NULL)  OR 
      ( active = @active and id = @myid) 
```

上面是一个简单的例子。对于`where`具有许多条件的子句，稍后编辑查询变得困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:25:25.867

如果您使用的是可视化查询编辑器，请尝试切换到文本编辑器，我相信它会按原样保留查询。

# haproxy - 带身份验证的 Haproxy solr 健康检查

> ID：13325882
> 
> 赞同：11
> 
> 时间：2012-11-10T20:38:58.050
> 
> 标签：haproxy

这是我的配置文件

```
listen  solr 0.0.0.0:8983
mode http
balance roundrobin
option httpchk GET "/solr/select/?q=id:1234" HTTP/1.1
server solr_slave 1.1.1.1:8983 maxconn 5000 weight 256 check
server solr_master 2.2.2.2:8983 maxconn 5000 weight 1 check 
```

问题是我的 solr 服务器使用基本的 http 密码身份验证进行保护，因此健康检查总是失败

我如何告诉 haproxy 在健康检查期间使用这些凭据？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-28T22:02:51.600

有点晚了，但我刚刚遇到了同样的问题，并想与世界分享解决方案。首先，您对凭据进行 base64 编码：

```
$ echo -n "user:pass" | base64
dXNlcjpwYXNz 
```

（确保使用 -n 开关，以免添加换行符。）

允许您向`option httpchk`请求添加任意 HTTP 标头；此功能没有很好地记录。（根据[这个讨论，](http://www.mentby.com/Group/haproxy/option-httpchk-version-trick.html)未来版本的 Haproxy 可能会获得一种对用户更友好的方法。）要使用基本身份验证：

```
option httpchk GET /solr/ HTTP/1.0\r\nAuthorization:\ Basic\ dXNlcjpwYXNz 
```

请注意，我使用的是 HTTP 1.0；对于 1.1，您还需要一个 Host 标头。

# authentication - 实现匿名认证和双重投票预防

> ID：13325884
> 
> 赞同：1
> 
> 时间：2012-11-10T20:39:35.680
> 
> 标签：authentication, voting

我正在考虑实现一种机制的方法，该机制使用户能够投票，而无需记录他的任何详细信息。每个用户都有一组属性，使他能够投票。例如。ID，姓名，电子邮件ID。

使用这些属性我们必须保证用户可以第一次投票。在此期间，保证完全匿名。

但是如果用户第二次来投票，他不应该被允许投票。这远程可行吗？我们不存储与用户相关的任何信息。没有 IP 地址、电子邮件 ID 或学生 ID。它们只是用作身份验证的一种手段。

我为此阅读了许多研究论文，但找不到任何具体的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:53:01.927

> 一种使用户无需记录任何详细信息即可投票的机制

你当然可以。只是不要记录任何东西。但是您确实需要*存储*有关哪个用户投票的信息。您实际上需要用户的信息，甚至不需要用户用作用户的机器可以从另一台机器投票。

# c# - 与附加/分离和不同的 ObjectContext 对象混淆

> ID：13325885
> 
> 赞同：1
> 
> 时间：2012-11-10T20:39:39.557
> 
> 标签：c#, wpf, entity-framework, ado.net

我打开一个新的`MessagesWindow`，其中包含以下代码：

```
namespace Newsletter.UI
{
    public partial class MessagesWindow : Window
    {
        MessageService msgService;
        public MessagesWindow()
        {
            InitializeComponent();
            msgService = new MessageService();
        }

        private void CreateButtonClick(object sender, RoutedEventArgs e)
        {
            var createMessageWindow = new CreateMessageWindow { Owner = this };
            createMessageWindow.ShowDialog();
            gridMessages.ItemsSource = from msg in msgService.GetAllMessages()
                                       select msg;
        }

        private void messagesWindow_Loaded(object sender, RoutedEventArgs e)
        {          
            gridMessages.ItemsSource = from msg in msgService.GetAllMessages()
                                       select msg;
        }

        private void EditButtonClick(object sender, RoutedEventArgs e)
        {

            if (gridMessages.SelectedItem == null)
                MessageBox.Show("You have to choose the message first.");
            else
            {
                var selectedMessage = (Message)gridMessages.SelectedItem;

                var editMessageWindow = new EditMessageWindow(selectedMessage);
                editMessageWindow.Owner = this;
                editMessageWindow.ShowDialog(); 
            }
            gridMessages.ItemsSource = from msg in msgService.GetAllMessages()
                                        select msg;
        }
    }
} 
```

我打开一个新窗口`EditButtonClick`，我想在其中编辑我的`Message`. 的代码`EditMessageWindow`：

```
namespace Newsletter.UI
{
    public partial class EditMessageWindow : Window
    {
        private Message editMessage;
        private MessageService messageService;
        public EditMessageWindow(Message message)
        {
            InitializeComponent();
            editMessage = message;
            messageService = new MessageService();

        }

        private void CreateMessageWindowLoaded(object sender, RoutedEventArgs e)
        {
            subject.Text = editMessage.Subject;
            messageContent.AppendText(editMessage.Content);
            senderComboBox.ItemsSource = messageService.GetAllSenders();

            mailingListComboBox.ItemsSource = messageService.GetAllMailingLists();

        }

        private void SaveClick(object sender, RoutedEventArgs e)
        {            
            editMessage.Date = DateTime.Now;
            editMessage.Content = messageContent.Text;
            editMessage.MailingList.Add(messageService.GetAllMailingLists()[mailingListComboBox.SelectedIndex]); //ERROR
            editMessage.Sender = messageService.GetAllSenders()[senderComboBox.SelectedIndex];
            editMessage.Subject = subject.Text;
            editMessage.HasAttachments = false;
            messageService.EditMessage(editMessage);

            Close();
        }
    }
} 
```

我收到一个错误`SaveClick`：

> 无法定义这两个对象之间的关系，因为它们附加到不同的 ObjectContext 对象。

最后，`MessageService`代码：

```
namespace Newsletter.Services
{
    public class MessageService
    {
        private NewsletterEntities _context;

        public MessageService()
        {
            _context = new NewsletterEntities();
        }
        public void AddMessage(Message newMessage)
        {
            _context.Messages.AddObject(newMessage);
            _context.SaveChanges();
        }
        public void EditMessage(Message editMessage)
        {
            var messageToChange = (from m in _context.Messages where editMessage.MessageID == m.MessageID select m).FirstOrDefault();
            if (messageToChange != null)
            {
                messageToChange = editMessage;
                _context.SaveChanges();
            }
        }

        public List<Message> GetAllMessages()
        {
            return (from m in _context.Messages select m).ToList();
        } 

        public List<MailingList> GetAllMailingLists()
        {
            var query = from m in _context.MailingLists select m;
            return query.ToList();
        }

        public List<Sender> GetAllSenders()
        {
            var query = from m in _context.Senders select m;
            return query.ToList();
        }

        public void DeleteMessage(Message message)
        {

            List<MailingList> mailingLists = new List<MailingList>();
            foreach(MailingList ml in message.MailingList.ToList())
            {
                ml.Message.Remove(message);
            }
            _context.Messages.DeleteObject(message);
            _context.SaveChanges();
        }
    }
} 
```

我对所有这些层和上下文感到困惑。我知道我可能应该以某种方式分离消息，对其进行处理并附加，但我不知道在哪里以及如何。我应该`MessageService`在我拥有所有实体的服务层、UI 层还是 DAL 层中执行此操作？或者我应该重新设计我的解决方案并在不同的地方执行上下文逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:35:25.177

你似乎有每个窗口的上下文设置。这将对您在上下文中维护对象的方式产生两个影响。

1.  您不想在表单之间传递对象。相反，您将在表单之间传递 ID，并在上下文中加载实体。
2.  当实体在一个上下文中更新时，您需要将更改通知其他窗口/上下文，以便他们可以刷新数据。

这是一篇 MSDN 文章，详细介绍了每个表单的上下文过程。本文使用 NHibernate，但 EF 和 DbCotext 的过程几乎相同

[http://msdn.microsoft.com/en-us/magazine/ee819139.aspx](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)

# php - 在tinymce编辑器中清除缓存

> ID：13325886
> 
> 赞同：3
> 
> 时间：2012-11-10T20:39:50.613
> 
> 标签：php, caching, http-headers, tinymce

我有一个使用tinymce编辑器的页面，编辑器会在我需要时检索模板，尽管可以更改模板，即可以修改图像，现在的问题是，每当我更改模板的图像时“这已经完成从不同的页面”，当我打开相同的模板时，它不会反映在 tinymce 编辑器上，我尝试了以下方法来清除缓存：

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="Cache-Control" content="no-cache"> 
```

还

```
clearstatcache(); 
```

和

```
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate"); // HTTP/1.1
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); // HTTP/1.0
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past 
```

但无济于事，我猜问题出在tinymce编辑器中。无论如何我可以解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T21:18:27.530

您可以使用查询字符串参数“缓存破坏”技术。

如果您附加`?v=xxx`到指向目标的 URL `tiny_mce.js`，TinyMCE 会将相同的查询字符串值附加到它请求的所有 URL。:)

例如

```
/scripts/tiny_mce/tiny_mce.js?cachebuster=123 
```

或（如果使用 jQuery）

```
$('#elementId').tinymce({"script_url":"/scripts/tiny_mce/tiny_mce.js?cachebuster=123", ...); 
```

然后，只要对 TinyMCE 调用的任何文件进行修改，您只需修改查询字符串缓存破坏器值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T16:04:50.133

您可以在包含脚本的头部尝试此操作，这会强制 tinyMCE 在没有缓存的情况下重新加载...它对我有用。

```
<head>
<script type="text/javascript" src="../../../tiny/tinymce/js/tinymce/tinymce.min.js?<?php        echo(rand(1,10));?>"></script>
</head> 
```

# winapi - Winapi ListView 无法阻止列调整大小

> ID：13325887
> 
> 赞同：2
> 
> 时间：2012-11-10T20:39:55.857
> 
> 标签：winapi, listview, fixed-width, column-width

我正在尝试在 winapi C++ 项目中创建具有固定宽度列的 ListView。

我尝试使用一个技巧来处理对话框过程中的 HDN_BEGINTRACK 通知，只需在其中返回 TRUE。正如我从不同的文章中了解到的那样，它可能会起作用。

重点是，我抓住了它，但返回 TRUE 并不能阻止调整大小。

还尝试在获得 WM_NOTIFY 后返回 TRUE - 效果相同。

请帮帮我。以下是部分代码：

```
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
{
   hInst = hInstance;
   ----
   hDlg = CreateDialog(hInst,MAKEINTRESOURCE(IDD_DIALOG),
                       hWnd,(DLGPROC)DlgProc);

   INITCOMMONCONTROLSEX icex; 
   icex.dwICC = ICC_LISTVIEW_CLASSES;
   InitCommonControlsEx(&icex);

   HWND hWndListView =   CreateWindow(
                                    WC_LISTVIEW, 
                                    L"",
                                    WS_CHILD | LVS_REPORT |WS_VISIBLE,
                                    0, 0,
                                    382,
                                    200,
                                    hDlg,
                                    (HMENU)IDC_LIST,
                                    hInst,
                                    NULL);
   ----
   //adding columns and items
   ----
   DWORD exStyle = LVS_EX_CHECKBOXES | LVS_EX_FULLROWSELECT | LVS_EX_GRIDLINES;
   ListView_SetExtendedListViewStyle(hWndListView,exStyle);
   SetWindowTheme(hWndListView, L"Explorer", NULL);
   ----
   return TRUE;
}

BOOL CALLBACK DlgProc(HWND hDlg, UINT Msg, WPARAM wParam, LPARAM lParam)
{
   switch (Msg) 
   {
   ----
   case WM_NOTIFY:
       switch(((LPNMHDR)lParam)->code)
       {
       case HDN_BEGINTRACK:
           OutputDebugString(L"HDN_BEGINTRACK\n");
           return TRUE;
       default:
           break;
       }
   ----
   }
   return FALSE;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T06:36:27.437

**在对话**过程中从 WM_NOTIFY 返回 TRUE仅表明您已处理该消息。要实际返回结果值，您还必须设置对话框的`DWL_MSGRESULT`：

```
case HDN_BEGINTRACK:
    OutputDebugString(L"HDN_BEGINTRACK\n");
    SetWindowLong(hDlg, DWL_MSGRESULT, TRUE);  // prevent resizing
    return TRUE;  // message processed; check DWL_MSGRESULT for real result 
```

# objective-c - 填充表格视图 - 如何在某些条件下不返回任何单元格

> ID：13325888
> 
> 赞同：1
> 
> 时间：2012-11-10T20:40:00.080
> 
> 标签：objective-c, ios, uitableview

我正在使用其委托方法填充 UITableView。在某些情况下，我不想返回任何单元格。但是，以下委托函数要求我将 UITableViewCell 定义为返回类型。返回 nil 不起作用（参见代码示例中的 switch case）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"UITableViewCell"];

    switch (indexPath.section){
        case 0:
                switch (indexPath.row){
                    case 0:
                        if ([eventItemObject eventDescription]){
                            return cell;
                        } else {
                            return nil;
                        }
                        break;
                        ...
                    default:
                    break;
                }
            break;
            ...
        default:
        break;
    }

    return cell;
} 
```

如何在某些情况下不返回任何单元格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:43:44.597

我认为你不能这样做（当我错的时候请纠正我）。您必须在 cellForRow 方法中返回一个 UITableViewCell 实例。

尝试编辑您的`tableView:numberOfRowsInSection`方法。根据您的条件，只返回正确的号码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:46:59.037

您必须使用`tableView:numberOfRowsInSection`or来处理这个问题`numberOfSectionsInTableView:tableView`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:11:06.550

我认为您需要过滤您的数组以删除 [eventItemObject eventDescription] 将返回 false 的任何项目，然后使用该过滤后的数组来填充您的表。这样，您的 numberOfRowsInSection 和/或 numberOfSectionsInTableView 将返回正确的数字。

# c# - 向前推动一个数组，使其从 150 开始？

> ID：13325891
> 
> 赞同：1
> 
> 时间：2012-11-10T20:40:30.403
> 
> 标签：c#, arrays, for-loop, zedgraph

我有这个函数，它是 SMA（简单移动平均线）。我在 ZedGraph 中显示为图形的数组中的结果，现在它将从 0 到 1956 开始。我希望图形从 frameSize / 2 在本例中开始，它将是 300 / 2 所以 150 所以图形应该从 150 开始到 2016 年。

我不想让图表增长我的意思是数组的长度应该保持为 1956 我只是希望它从一开始就被 150 个索引推送，所以它将从索引 150 而不是 0 开始。

所以这是 SMA 函数：

```
private static double[] smaDoubles(int frameSize, int[] data)
{
    int padding = frameSize / 2;
    double sum = 0;
    double[] avgPoints = new double[(padding + data.Length) - frameSize + 1];

    for (int counter = padding; counter <= data.Length - frameSize; counter++)
    {
        int innerLoopCounter = 0;
        int index = counter;
        while (innerLoopCounter < frameSize)
        {
            sum = sum + data[index];

            innerLoopCounter += 1;

            index += 1;

        }

        avgPoints[counter] = sum / frameSize;

        sum = 0;

    }

    return avgPoints;

} 
```

在 for 循环 counter = padding 之前它是 counter = 0 所以结果在[这里](http://imageshack.us/f/266/tostack.jpg/)的图像中。

绿色的是这个函数的 SMA。绿色从 150 开始，但在 1956 结束，它应该在 2106 结束。当我将它移动到从 150 开始时，我希望整个图表作为一个单位移动 150，因此它将从 150 开始并在 2106 结束。红色图表应该保持不变

我该怎么做？

现在就像在图像中一样，图形从右边缘结束 300。

这是现在的功能，我更改了行： double[] avgPoints = new double[data.Length - frameSize + 1]; 这就是它原来的样子，所以我现在把它改成了这个。并且函数将 frameSize 设为 3，将数据设为 [10]，我得到相同的异常：

```
private static double[] smaDoubles(int frameSize, int[] data)
        {
            int padding = frameSize / 2;
            double sum = 0;
            double[] avgPoints = new double[data.Length - frameSize + 1];

            for (int counter = padding; counter <= data.Length - padding; counter++)//for (int counter = padding; counter <= data.Length - frameSize; counter++)
            {
                int innerLoopCounter = 0;
                int index = counter;
                while (innerLoopCounter < frameSize)
                {
                   // if (index < data.Length)
                    sum = sum + data[index];

                    innerLoopCounter += 1;

                    index += 1;

                }

                avgPoints[counter] = sum / frameSize;

                sum = 0;

            }

            return avgPoints;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:50:44.627

不可能* 某些语言（例如 pascal）允许这样做，但 c# 不允许。

为什么不直接减去偏移量 150：

```
sum += data[index - 150]; 
```

*虽然不能使用数组，但您可以使用实现索引属性的自定义对象来实现效果。

```
private int[] _array;

public int this[int index]
{
  get{ return _array[index - 150]; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:15:53.107

你确定吗：

`for (int counter = padding; counter <= data.Length - frameSize; counter++)`

不应该是：

`for (int counter = padding; counter <= data.Length - padding; counter++)`

然后计算移动平均值的函数应该从计数器填充到计数器 + 填充，而不是从计数器到计数器 + frameSize。

要调试此类问题，尝试使用更小的数据集通常会很有帮助，您可以在其中手动计算预期结果并查看您的算法是否符合您的预期。我不相信你的算法一定会计算你认为它在这里计算的东西。尝试使用 10 个数据元素和 3 个窗口大小，看看您是否获得了预期的结果。

*请注意，第一行代码实际上包含 2 个逻辑错误，其中一个在您尝试代码第二行之前不一定很明显。保留该错误以用于说明目的*

# php - MySQL 以什么顺序处理来自 2 个不同连接的查询？

> ID：13325894
> 
> 赞同：1
> 
> 时间：2012-11-10T20:41:15.270
> 
> 标签：php, mysql

假设我有两个文件`file1.php`和`file2.php`.

file1.php 有以下查询：

```
-query 1
-query 2
-query 3 
```

file2.php 有以下查询：

```
-query 4
-query 5
-query 6 
```

假设一个访问者运行第一个脚本，另一个访问者同时运行第二个脚本。

我的问题是：在执行第一个脚本的所有查询时，MySQL 是否接收一个连接并将第二个连接保留在队列中，然后转到第二个连接？

MySQL 处理查询的顺序是 1,2,3,4,5,6（或 4,5,6,1,2,3）还是可以是任何顺序？

我可以做些什么来确保 MySQL 在移动到另一个连接之前执行一个连接的所有查询？

我担心数据完整性。例如，共享同一帐户的两个用户的帐户余额。他们可能会看到相同的值，但如果他们同时发送查询，这可能会导致一些意想不到的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T20:59:47.897

数据库可以并行接受来自多个连接的查询。它可以以任意顺序执行查询，甚至可以同时执行。隔离级别定义了并行执行对结果的影响程度：

如果不使用事务，查询可以并行执行，并且最强的隔离级别仍然*只*保证查询将返回与未并行执行相同的结果*，*但仍然可以以*任何*顺序运行（只要它们在每个连接中排序）

如果使用事务，数据库可以保证更多：

最强的隔离级别是`serializable`，这意味着结果将*好像*没有两个事务并行运行，但性能会受到影响。

最弱的隔离级别和完全不使用事务一样；什么事情都可能发生。

如果要确保数据一致性，请使用事务：

```
START TRANSACTION;
...
COMMIT; 
```

默认隔离级别是`read-commited`，大致相当于`serializable`普通`SELECT`s 发生事务外的情况。如果您`SELECT FOR UPDATE`对事务中的每个 SELECT 使用，您会得到`serializable`

见：[http ://dev.mysql.com/doc/refman/5.0/en/set-transaction.html#isolevel_repeatable-read](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html#isolevel_repeatable-read)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:54:16.337

通常，您无法预测或控制执行顺序 - 它可以是 1,2,3,4,5,6 或 4,5,6,1,2,3 或 1,4,2,5,3,6或这些的任何组合。

MySQL 并行执行来自多个连接的查询，并且服务器性能在所有客户端之间共享（在您的情况下为 2 个）。我认为您没有理由担心或改变这一点 - MySQL 的创建考虑到了这一点，以便能够为多个连接提供服务。

如果您遇到性能问题，通常可以通过添加索引或更改数据库架构来解决 - 例如规范化或非规范化您的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:58:35.403

您可以限制`max_connections`为 1，但它会给您`too many connections`其他连接的错误。限制并发执行是没有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T21:06:52.730

1.  将操作作为[事务](http://dev.mysql.com/doc/refman/5.0/en/commit.html)并将自动提交设置为 false
2.  以相同的顺序访问所有表，因为这样可以防止死锁。

# asp.net-mvc-3 - 为什么是 {System.Web.Mvc.SelectList} DropDownList SelectedValue

> ID：13325895
> 
> 赞同：0
> 
> 时间：2012-11-10T20:41:27.840
> 
> 标签：asp.net-mvc-3, selectedvalue, html-select

我已经创建了一个 DropDownList，如我[在此处的最后一个问题中所述](https://stackoverflow.com/questions/13301235/selecting-a-value-from-a-dropdownlist-to-be-able-to-fill-in-fields)

我一直在试图弄清楚如何获取列表的选定值。我使用了提供的答案，但它返回的唯一内容是`{System.Web.Mvc.SelectList}` 我对其进行了调试，并且确实“值”列中的字符串是`{System.Web.Mvc.SelectList}`

我在这里做错了什么？我在 MVC 上一直很失败，而且我还是新手。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:54:10.583

您在控制器中的操作应如下所示：

```
[HttpPost]
public ActionResult Index(int DropOrgId)
{
  System.Diagnostics.Debugger.Break();
  return null;
} 
```

需要注意的重要一点是“ **DropOrgId ”与您在视图中传递给@Html.DropDownList("** **DropOrgID** ")的字符串名称相同。此名称将存储来自 HTML 输入控件的输入值，在本例中为

 **来源将是：

```
<select id="DropOrgID" name="DropOrgID">...</select> 
```

输入控件的 id 是 MVC 框架如何将该控件的值与您正在查找的操作的参数相匹配。

这是一个显示它的示例应用程序：

班级

```
 public class Organization
  {
    public int OrganizationID { get; set; }
    public string Name { get; set; }
  } 
```

控制器

```
 public class HomeController : Controller
  {
    public ActionResult Index()
    {
      var orgs = new List<Organization>();
      foreach (var count in Enumerable.Range(1, 10))
      {
        var newOrg = new Organization();

        newOrg.OrganizationID = count;
        newOrg.Name = "Organization " + count.ToString();

        orgs.Add(newOrg);
      }

      ViewBag.DropOrgID = new SelectList(orgs, "OrganizationID", "Name", 3);

      return View();
    }

    [HttpPost]
    public ActionResult Index(int DropOrgID)
    {
      //You can check that this DropOrgID contains the newly selected value.
      System.Diagnostics.Debugger.Break();
      return null;
    }
  } 
```

索引视图

```
<h2>Index</h2>

@using (Html.BeginForm())
{
  @Html.DropDownList("DropOrgID")
  <br />
  <br />
  <input type="submit" value="Save" />
} 
```**

# bash - 使用我的 java 代码的 bash 脚本有什么问题？

> ID：13325899
> 
> 赞同：1
> 
> 时间：2012-11-10T20:41:38.810
> 
> 标签：bash

我正在编写一个简单的 java 和 bash 程序，但它不起作用。让我知道哪里错了。

重击：

```
 for i in [1..100]; do 
         echo $i
         java prob2 $i 
    done 
```

爪哇：

```
import java.io.*;

public class prob2
{
    public static void main( String[] args )
    {
            int l = args.length;
            if ( l == 1 )
            {
                    int num = Integer.parseInt(args[0]);
                    while ( num != 0 && num != 1)
                            num = num - 2;
                    if ( num == 0 )
                            System.out.println("Even");
                    else if ( num == 1 )
                            System.out.println("Odd");
            }
    }
} 
```

我得到的错误是：

> 线程“主”java.lang.NumberFormatException 中的异常：对于输入字符串：“[1..100]”在 java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) 在 java.lang.Integer.parseInt(Integer. java:492) 在 java.lang.Integer.parseInt(Integer.java:527) 在 prob2.main(prob2.java:10)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:45:36.050

这不是你做 bash 循环的方式。尝试这个：

```
for i in `seq 1 100`; do 
     echo $i
     java prob2 $i 
done 
```

顺便说一句，确定一个数字是奇数还是偶数的更快算法是将其取模 2：

```
if (num % 2 == 0) {
    System.out.println("Even");
} else {
    System.out.println("Odd");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T20:47:26.073

您必须使用花括号，而不是数组括号：

```
 for i in {1..100}; do 
         echo $i
         java prob2 $i 
    done 
```

# list - 在 Prolog 中连接可变数量的列表

> ID：13325900
> 
> 赞同：0
> 
> 时间：2012-11-10T20:41:51.563
> 
> 标签：list, prolog, concatenation

假设已经给出了可变数量的列表，例如 5，但是可以输入任意数量的列表：`[1,2] + [3,4,5] + [6,7,8,9] + [10,11] + [12,13,14] equals L.`应该在变量中给出以下列表`L`：`[1,2,3,4,5,6,7,8,9,10,11,12,13,14]`。

这是我连接两个列表的代码：

```
joinLists([FLH|FLT], SL, [FLH|RLT]):-
  joinLists(FLT, SL, RLT).
  joinLists([], H, H).

:-op(500, xfx, +).
:-op(600, yfx, equals).

X + Y equals Z:-
  joinLists(X, Y, Z). 
```

`[1,2,3] + [4,5,6,7] equals L.`给出了`L = [1,2,3,4,5,6,7]`，但是如何解决无限数量的列表的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:11:19.883

我认为您的运营商声明不正确，总和应该是关联的（我也更改了符号，只是为了符合我的审美偏好，并避免改变标准 +/2 的行为）：

```
:-op(500, xfy, ++).
:-op(600, xfx, cat). 
```

然后你可以写

```
L1 ++ R cat C :- !, R cat R1, append(L1, R1, C).
L cat L . 
```

测试

```
?- [1,2,3]++[4,5,6]++[7,8,9] cat X.
X = [1, 2, 3, 4, 5, 6, 7, 8, 9]. 
```

我认为这样的定义没有任何便利，考虑到 SWI-Prolog append/2 源可用......

# actionscript - 如何将所有 .as 文件编译成单个 .swf

> ID：13325913
> 
> 赞同：0
> 
> 时间：2012-11-10T20:43:47.717
> 
> 标签：actionscript, compilation, actionscript-2

我想将几个 actionscript 2 代码包编译成单个 swf，我以后可以将其用作库。我试图定期发布它，但它只编译那些在 .fla 文件的框架内调用的类。

虽然可以定义每个类的变量，从而“使用”它们并编译成 swf，但我认为这不是非常干净和最好的方法。

谢谢你的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:39:30.683

设法使用 mtasc 编译器解决了我的问题。mtasc -cp "std_lib_cp" -pack "not_empty_code_package" -out result.swf -version 8 -frame 1 -header 800:600:30:FFFFFF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:48:47.593

您必须使用此语法：您不能使用 class 关键字。因此，您可以使用这种格式添加构造函数 this.class1 = function(){ }

添加静态成员可以使用 this.class1.addProperty("myStaticMember", //getter function, //setter function)

添加属性可以使用：this.class1.prototype.addProperty("myMember", //getter function, //setter function)

添加可以使用的方法： this.class1.prototype.myMethod = function(){ }

你不能添加私有变量。但如果添加私有变量成员，您可以使用： var variable = 15;

您的 fla 框架只能使用 1 个框架。

# xslt - xsl:attribute-set 没有从 xsl:attribute-set 正确继承

> ID：13325914
> 
> 赞同：2
> 
> 时间：2012-11-10T20:43:51.990
> 
> 标签：xslt

我似乎无法让继承与 xsl:use-attribute-sets 一起使用。Michael Kay 在第 6 章中说。 XSLT 元素 > xsl:attribute-set - Pg。269 那

> 如果这种属性组合也被重复使用，则可以将其定义为独立的属性集，如：
> 
> ```
> <xsl:attribute-set name="ruled-table" use-attribute-set="full-width-table"> 
>  <xsl:attribute name="border">2</xsl:attribute> 
>  <xsl:attribute name="rules">cols</xsl:attribute> 
> </xsl:attribute-set> 
> ```

编辑 1： USE-ATTRIBUTE-SET 而不是 USE-ATTRIBUTE-SETS 可能是书中的一个错字；我正在使用*XSL：使用属性集*

这对我不起作用。换句话说，在我当前的设置中 [XSLT 2.0 via Apache Cocoon, importing styles.xsl into mypdf.xsl] 结果

```
<table xsl:use-attribute-sets="ruled-table"> 
<tr>...</tr> 
</table> 
```

将是属性集*rule-table*和*full-width的**集合差异*，而不是两个属性集的先例介导的*集合并*集。我只得到直接命名的属性，而不是命名的属性集的父属性集。我可以通过执行以下操作来模拟效果：

 ***```
<table xsl:use-attribute-sets="full-width-table ruled-table"> 
<tr>...</tr> 
</table> 
```

然而，这似乎是不必要的。有没有人遇到过这个问题？这是styles.xsl：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" exclude-result-prefixes="xsl xs fo">

  <xsl:attribute-set name="fontstack">
    <xsl:attribute name="text-align">left</xsl:attribute>
    <xsl:attribute name="font-size">10pt</xsl:attribute>
    <xsl:attribute name="font-family">"TradeGothic-CondEighteen", "Trade Gothic Cond Eighteen", "Trade Gothic Condensed Eighteen", "Trade Gothic", "TradeGothic", "Trade-Gothic", "ArialNarrow", "Arial-Narrow", "Arial Narrow", Arial, sans-serif
    </xsl:attribute>
    <xsl:attribute name="color">black</xsl:attribute>
  </xsl:attribute-set>

  <xsl:attribute-set name="headers" xsl:use-attribute-sets="fontstack">
    <xsl:attribute name="font-size">18pt</xsl:attribute>
    <xsl:attribute name="font-weight">bold</xsl:attribute>
    <xsl:attribute name="space-after">7pt</xsl:attribute>
    <xsl:attribute name="padding">12pt</xsl:attribute>
  </xsl:attribute-set>

  <xsl:attribute-set name="h2" xsl:use-attribute-sets="headers">
    <xsl:attribute name="padding">5pt</xsl:attribute>
  </xsl:attribute-set>

  <xsl:attribute-set name="h3" xsl:use-attribute-sets="headers">
    <xsl:attribute name="padding">2pt</xsl:attribute>
  </xsl:attribute-set>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T02:31:30.217

有两个问题可能会导致您的问题。

`use-attribute-set`1.) 您在第一个示例中为[`xsl:attribute-set`element](http://www.w3.org/TR/xslt#attribute-sets)指定了属性，但它必须是复数`use-attribute-sets`：

```
<xsl:attribute-set name="ruled-table" use-attribute-sets="full-width-table"> 
    <xsl:attribute name="border">2</xsl:attribute> 
    <xsl:attribute name="rules">cols</xsl:attribute> 
</xsl:attribute-set> 
```

2.）在您的样式表中，您正在使用[元素](http://www.w3.org/TR/xslt#attribute-sets)`xsl:use-attribute-sets`上的属性，但它必须是非命名空间限定的属性：[`xsl:attribute-set`](http://www.w3.org/TR/xslt#attribute-sets)`use-attribute-sets`

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" exclude-result-prefixes="xsl xs fo">

    <xsl:attribute-set name="fontstack">
        <xsl:attribute name="text-align">left</xsl:attribute>
        <xsl:attribute name="font-size">10pt</xsl:attribute>
        <xsl:attribute name="font-family">"TradeGothic-CondEighteen", "Trade Gothic Cond Eighteen", "Trade Gothic Condensed Eighteen", "Trade Gothic", "TradeGothic", "Trade-Gothic", "ArialNarrow", "Arial-Narrow", "Arial Narrow", Arial, sans-serif
        </xsl:attribute>
        <xsl:attribute name="color">black</xsl:attribute>
    </xsl:attribute-set>

    <xsl:attribute-set name="headers" use-attribute-sets="fontstack">
        <xsl:attribute name="font-size">18pt</xsl:attribute>
        <xsl:attribute name="font-weight">bold</xsl:attribute>
        <xsl:attribute name="space-after">7pt</xsl:attribute>
        <xsl:attribute name="padding">12pt</xsl:attribute>
    </xsl:attribute-set>

    <xsl:attribute-set name="h2" use-attribute-sets="headers">
        <xsl:attribute name="padding">5pt</xsl:attribute>
    </xsl:attribute-set>

    <xsl:attribute-set name="h3" use-attribute-sets="headers">
        <xsl:attribute name="padding">2pt</xsl:attribute>
    </xsl:attribute-set>

</xsl:stylesheet> 
```***

# java - Youtube api jar 依赖项

> ID：13325917
> 
> 赞同：0
> 
> 时间：2012-11-10T20:44:15.080
> 
> 标签：java, youtube-api

我真的被困在这里了。我正在尝试 youtube API，但无法运行任何东西。我有一个接一个的classnotfound问题。

现在我的类路径上有以下罐子

*   激活.jar
*   gdata-client-1.0.jar
*   gdata-core-1.0.jar
*   gdata-media-1.0.jar
*   gdata-youtube-2.0.jar
*   番石榴-11.0.2.jar
*   jsr305.jar
*   邮件.jar

当我尝试创建 YouTubeService 的实例时，com.google.api.client.auth.oauth2.Credential 上的 ClassNotFoundException 失败。我尝试查找信息，但所有其他答案都太旧了。这里有人最近尝试过使用 Youtube API 吗？理想情况下，我只想列出所需的罐子。我希望 API 的实际用户做出响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:21:02.503

就我而言，您需要一个名为 google-oauth-client-1.9.0-beta.jar 的附加 jar，据我所知，它没有被列为依赖项或与示例一起包含。

# matlab - 如何在matlab中将每一行与另一个矩阵的每一行相乘？

> ID：13325921
> 
> 赞同：5
> 
> 时间：2012-11-10T20:44:37.783
> 
> 标签：matlab, matrix, matrix-multiplication

我有这样一个矩阵

```
m1 = [ 1 2 3; 4 5 6; 1 2 3]
m2 = [ 2 2 2]; 
```

我想将 m1 的每一行与 m2 elementwise 相乘。

所以结果是

```
result = [2 4 6; 8 10 12; 2 4 6] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T20:47:36.590

```
 bsxfun(@times,m1,m2)

ans =

     2     4     6
     8    10    12
     2     4     6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T12:51:05.097

你也可以使用

```
 result = diag(m2)*m1; 
```

# ios - 如何检测“LocallAPStore” - 新的 iap 破解程序

> ID：13325924
> 
> 赞同：3
> 
> 时间：2012-11-10T20:44:48.653
> 
> 标签：ios, jailbreak

我像这样检测 IAP Cracker：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:@"/Library/MobileSubstrate/DynamicLibraries/iap.dylib"]){
    NSLog(@"IAP Cracker detected");
} 
```

如何检测 LocallAPStore？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T21:20:35.070

解压这个hack的[Debian包](http://system.in-appstore.com/repo/debs/anondev.LocalIAPStore_1.0_iphoneos-arm.deb)后，你可以看到它和IAP破解器的结构几乎一模一样。所以，你可以写：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:@"/Library/MobileSubstrate/DynamicLibraries/LocalIAPStore.dylib"]) {
    NSLog(@"Local IAP Store detected");
} 
```

顺便说一句，使用这种方法不是很有效。我敢肯定，如果很多开发人员使用这种方法，这些调整的制造者会将另一个钩子合并到动态库中，这使得检测变得不可能，例如可以钩子`- [NSFileManager fileExistsAtPath:]`并检查路径是否等于 dylib 的路径和`NO`在这种情况下无条件返回。

因此，如果您想使用应用内购买，最好使用自己的服务器进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T20:57:28.357

只需向 Apple 验证您的 IAP 收据即可防止欺诈购买。请参阅：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T04:55:34.037

此外，您可以使用 dyld（或 Objective-C 运行时）函数来检测是否加载了相关库。如果是这样，请尝试卸载它。

# javascript - 了解用于网页的 google places api

> ID：13325946
> 
> 赞同：1
> 
> 时间：2012-11-10T20:47:44.200
> 
> 标签：javascript, google-maps-api-3, client-side, google-places

好的，所以我浏览了文档，但是我仍然不明白它是如何工作的。如果我想搜索一个地方，我应该使用 HTTP get 请求来返回 json 数据。如何使用 JavaScript 做到这一点？文档只是向我展示了如何像这样构造 HTTP 请求

[https://maps.googleapis.com/maps/api/place/nearbysearch/output?parameters](https://maps.googleapis.com/maps/api/place/nearbysearch/output?parameters)

但是我该如何发送这个请求呢？给我指点教程或其他东西会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:07:44.600

[**地方图书馆**](https://developers.google.com/maps/documentation/javascript/places)做所有的工作。您只需发送您需要的[**字段**](https://developers.google.com/maps/documentation/javascript/places#place_details_responses)，然后显示[**地点详细信息结果**](https://developers.google.com/maps/documentation/javascript/places#place_details_responses)

以下代码取自文档，向您展示在哪里添加以实现您的偏好。

```
var map;
var service;
var infowindow;

function initialize() {
  var pyrmont = new google.maps.LatLng(-33.8665433,151.1956316);

  map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: pyrmont,
      zoom: 15
    });
 //Here you add the fields you require for request for PlacesService() 
  var request = {
    location: pyrmont,
    radius: '500',
    types: ['store']
  };

  service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);
}
  //Here you display the Place Details Results
function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      createMarker(results[i]);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:07:12.150

简短版本：编写一个 AJAX 调用来获取数据，然后编写一个回调函数来处理该数据。

长版：

## Ajax 请求

Ajax 请求是从网页内发出的 HTTP 请求，因此页面不*执行*任何导航操作。这些用于执行诸如从 API 获取数据（例如您正在尝试执行的操作）或加载图像、加载其他页面内容等之类的事情。

在您的情况下，您希望对 API URL 执行一个简单的 AJAX 请求，然后对返回的数据执行一些操作。

由于您听起来像是 JavaScript 领域的新手，我强烈建议您使用[jQuery JavaScript 库。](http://jquery.com/)它使诸如 Ajax 之类的东西在公园里散步。具体来说，您可以使用[jQuery.Ajax()](http://api.jquery.com/jQuery.ajax/)函数来构建您的 Web 请求。然后，您指定将 API 数据传递给的回调函数，并对其进行处理。

*   [阿贾克斯信息](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)
*   [回调信息](https://stackoverflow.com/questions/1203754/jquery-ajax-callback)

# javascript - jquery手机触摸事件随机识别

> ID：13325947
> 
> 赞同：0
> 
> 时间：2012-11-10T20:47:58.180
> 
> 标签：javascript, api, jquery-mobile, touch

我想对识别 IPAD 的触摸事件采取行动。问题是即使触摸完成一次，触摸事件也会被多次调用。

```
handleEvent: function (e) {
var that = this;
//console.log("---------------------------------handle event ");
switch(e.type) {
case START_EV:
if (!hasTouch && e.button !== 0) return;
that._start(e);
break;
case MOVE_EV: that._move(e); break;
case END_EV:
case CANCEL_EV: that._end(e); break;
case RESIZE_EV: that._resize(); break;
case 'mouseout': that._mouseout(e); break;
case 'webkitTransitionEnd': that._transitionEnd(e); break;
}
} 
```

* * *

如何只识别一次事件。

谢谢， 瓦巴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:50:30.467

jQuery 对触摸事件没有任何特别之处，但您可以使用以下事件轻松构建自己的

touchstart touchmove touchend touchcancel

例如，touchmove（取自[此处](https://stackoverflow.com/questions/4755505/how-to-recognize-touch-events-using-jquery-in-safari-for-ipad-is-it-possible)）

document.addEventListener('touchmove', function(e) { e.preventDefault(); var touch = e.touches[0]; alert(touch.pageX + " - " + touch.pageY); }, false);

# c# - "delegate {}" 匹配 "Func “？

> ID：13325949
> 
> 赞同：2
> 
> 时间：2012-11-10T20:48:27.757
> 
> 标签：c#, .net, generics, .net-4.0

[我在这里](https://stackoverflow.com/a/299858/859154)阅读 Jon Skeet 的回答

他的样本之一是：

```
 static void Main()
    {
        int x = 0;
        Foo( delegate { return x; } );
    }

    static void Foo(Func<int, int> action)
    {
        Console.WriteLine("I suspect the anonymous method...");
    } 
```

但是怎么`Foo(Func<int, int>)`处理`delegate { return x; }`which is`Func<int>`呢？

事实上也`Func< int,int,int,int,...>`可以处理`delegate { return x; }`...

**问题 1** 请对此行为有任何解释吗？

**问题2**

我有这个代码：

```
class MyClass
{
    public delegate void MyEventHandler(object sender);
    public  event MyEventHandler MyEvent;
} 
```

我想使用通用处理程序：

```
class MyClass
{
    public  Action<object> MyEventHandler;
    public  event MyEventHandler MyEvent;
} 
```

但我收到此错误：

> 'UserQuery.MyClass.MyEventHandler(object)' 是一个“方法”，但用作“类型”

为什么它不认识它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T20:54:27.703

您的第一个问题的答案是委托的参数是由编译器推断的。编译了一个匿名方法，它接受一个`int`作为参数，并且什么都不做。代码可以这样写：

```
Foo( delegate (int dummy) { return x; } ); 
```

通过省略参数列表，您是在告诉编译器发出一个与当前上下文中的委托类型具有相同参数类型的方法。编译器知道 a`Func<int, int>`是预期的，因此它能够使匿名方法的参数类型匹配。

换句话说，`delegate { ... }`告诉编译器“创建一个匿名方法，但我不关心参数是什么，因为我不会使用它们，所以发出任何参数将允许这个委托在这种情况下是可接受的。” （这与`delegate () { ... }`“创建一个接受零参数的匿名方法”不同。注意括号。如果将这些括号添加到示例代码中，它确实会编译失败。）

在第二种情况下，您正在使用需要类型名称的字段名称。定义字段不会创建具有字段名称的类型。你的第一个例子是正确的；在这种情况下，`MyEventHandler`是一个类型而不是一个字段。（即使这确实有效，使用泛型也不会真正有帮助，因为最终的委托签名已经在编译时确定。使用泛型不会获得任何净优势。）

# windows-8 - 自定义 ItemTemplate 未显示在 Visual Studio 2010 中 - 添加新项目

> ID：13325950
> 
> 赞同：3
> 
> 时间：2012-11-10T20:48:43.187
> 
> 标签：windows-8, visual-studio-2012

我之前在 VS2005/2010 中创建过 ItemTemplates，从来没有遇到过任何问题。

在 Windows8 上使用 VS 2012 Ultimate 版本时，我正在创建的 ItemTemplate 未显示在“添加新项目”列表中。

尝试了这里提到的基本步骤：http: [//msdn.microsoft.com/en-us/library/tsyyf0yh.aspx](http://msdn.microsoft.com/en-us/library/tsyyf0yh.aspx)

创建了一个新的 Windows 8 Store App(xaml) 空白项目。它有一个主页。我在主页上添加了一个 TextBlock 以使其看起来不同。然后导出模板。

.zip 文件被添加到 ItemTemplates 文件夹和 My Exported Templates 文件夹，但不会显示在列表中。我确实重启了我的VS几次，但没有去。

任何想法？我想知道我是否缺少一些 VS 选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:39:47.957

我不确定这是否是 VS2012 中的错误，或者我错过了一些东西，但这是我如何让我的模板出现在“添加新项目”菜单中的方法。

1：我解压缩了最初创建的模板。

2：打开了 Visual Studio 2012 附带的默认模板。

> C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ItemTemplates\CSharp\Windows Store\1033\BlankPage

3：将 BlankPage.vstemplate 与 MyTemplate.vstemplate 进行比较。使我的模板文件如下所示：

```
<VSTemplate Version="3.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://schemas.microsoft.com/developer/vstemplate/2005" Type="Item">
  <TemplateData>
    <DefaultName>CustomStoryPage.xaml</DefaultName>
    <Name>CustomStoryPage</Name>
    <Description>Template for custom storypage</Description>
    <TemplateID>Microsoft.CS.WinRT.CustomStoryPage</TemplateID>
    <TemplateGroupID>WinRT-Managed</TemplateGroupID>
    <ProjectType>CSharp</ProjectType>
    <SortOrder>10</SortOrder>
    <TargetPlatformName>Windows</TargetPlatformName>
    <RequiredPlatformVersion>8</RequiredPlatformVersion>
  </TemplateData>
  <TemplateContent>
    <References />
    <ProjectItem ItemType="Page" SubType="Designer" CustomTool="MSBuild:Compile" TargetFileName="$fileinputname$.xaml" ReplaceParameters="true">StoryPageTemplate.xaml</ProjectItem>
    <ProjectItem SubType="Code" TargetFileName="$fileinputname$.xaml.cs" ReplaceParameters="true">StoryPageTemplate.xaml.cs</ProjectItem>
  </TemplateContent>
</VSTemplate> 
```

4：再次压缩文件夹。

上面有些东西可能是不必要的，但现在我已经解决了我的问题。我需要一一找出究竟是什么必需品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:55:52.913

添加该`<TemplateGroupID>WinRT-Managed</TemplateGroupID>`行为我解决了这个问题。

# magento - Magento 产品出现在根目录中

> ID：13325951
> 
> 赞同：0
> 
> 时间：2012-11-10T20:48:46.523
> 
> 标签：magento

使用 magento API 重新上传我的所有产品后，子类别中的所有产品都会显示在它们的专利类别中，尽管它们没有被选中。

我不知道这是什么，也不记得我们是否做了一些修改/调整以使这些产品显示在它们的根类别中。

我该如何解决这个问题？

更令人讨厌的是，它们出现在主要类别的产品之前。

假设列表应如下所示：

```
product1
product2
product3 
```

但它是这样的

```
productfromsubcat1
productfromsubcat2
productfromsubcat3
product1
product2
product3 
```

# python - 过时的输入输入被输入密码

> ID：13325954
> 
> 赞同：0
> 
> 时间：2012-11-10T20:49:22.407
> 
> 标签：python

我遇到以下问题，当 python 脚本运行时，用户在命令窗口上一直按“回车键”...以下是在命令窗口上运行的内容，但用户一直按回车键，最终输入密码和脚本失败，我该如何防止这种情况？

```
 Parsing the XML

 Building the build combo table

  **Password: //asks for password but user had multiple enter key presses above which is taken as passoword and fails** 
```

Python代码：-

```
url='http://wiki.com/'+wikiName+'/w/index.php?title='+hId +'_'+rId+'&action=edit'
cookiehand = urllib2.HTTPCookieProcessor()
password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
password_mgr.add_password(user=getpass.getuser(),passwd=getpass.getpass(),uri=authhost,realm=realm)
auth_handler = urllib2.HTTPBasicAuthHandler(password_mgr)
opener = urllib2.build_opener(auth_handler, cookiehand)
urllib2.install_opener(opener)
# make the request
req = urllib2.Request(url=url)
try:
    f = urllib2.urlopen(req)
    txt = f.read()
    f.close()
except urllib2.HTTPError, e:
    txt = ''
    print 'An error occured connecting to the wiki. No wiki page will be generated.'//eventually gets this error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:25:48.120

您需要做的是验证输入。像这样的东西：

```
user = ""
pass = ""

while not user and not pass:
    user = getpass.getuser()
    passwd = getpass.getpass() 
```

请注意，如果允许使用空白密码，这将不起作用。如果您可以控制 getpass 库，则将验证移到这两个方法中可能更有意义，并且可能使用默认参数使它们成为可选参数，例如`validate=False`

# ruby-on-rails - rake:assets 预编译在未定义的方法 `bytesize' 上失败为 true:TrueClass

> ID：13325955
> 
> 赞同：9
> 
> 时间：2012-11-10T20:49:27.430
> 
> 标签：ruby-on-rails, compilation, rack, assets

我正在使用 ruby​​ 1.9，当我在我的 rails 应用程序中运行“rake assets:precompile”时，它失败并返回了这个：

`rake aborted!`

`undefined method 'bytesize' for true:TrueClass`

`~/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/utils.rb:282:in 'bytesize'`

utils.rb 中失败的代码部分是这样的（第 280-289 行）：

```
if ''.respond_to?(:bytesize)
  def bytesize(string)
    string.bytesize
  end
else
  def bytesize(string)
    string.size
  end
end
module_function :bytesize 
```

第 282 行是第三行，string.bytesize。

我找到了许多类似问题的解决方案，但没有一个能够解决这个问题。一些建议是更改 environment/production.rb 中的代码并更改 Gemfile 中 gem 的顺序，但是这两种解决方案都不适合我。任何建议将不胜感激。顺便说一句，我使用的是 rack v 1.4.1。

谢谢！

完整的跟踪：

```
** Invoke assets:precompile (first_time)  
** Execute assets:precompile  
/usr/local/bin/ruby /usr/local/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace  
** Invoke assets:precompile:all (first_time)  
** Execute assets:precompile:all  
** Invoke assets:precompile:primary (first_time)  
** Invoke assets:environment (first_time)  
** Execute assets:environment  
** Invoke environment (first_time)  
** Execute environment  
** Invoke tmp:cache:clear (first_time)  
** Execute tmp:cache:clear  
** Execute assets:precompile:primary  
rake aborted!  
undefined method 'bytesize' for true:TrueClass  
~/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/utils.rb:281:in 'bytesize'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:13:in 'initialize'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in 'new'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in 'block in build_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in 'circular_call_protection'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in 'build_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in 'block in build_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in 'cache_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in 'build_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in 'find_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in 'find_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:16:in 'initialize'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in 'new'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in 'build_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in 'block in build_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in 'cache_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in 'build_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in 'find_asset'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in 'find_asset'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:23:in 'block in compile'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in 'block in each_logical_path'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in 'block (2 levels) in each_file'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in 'each'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in 'each_entry'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in 'block in each_file'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in 'each'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in 'each_file'  
~/shared/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in 'each_logical_path'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:18:in 'compile'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:56:in 'internal_precompile'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:70:in 'block (3 levels) in <top (required)>'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in 'call'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in 'block in execute'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in 'each'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in 'execute'  
/usr/local/lib/ruby/1.9.1/monitor.rb:211:in 'mon_synchronize'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in 'invoke_with_call_chain'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in 'invoke'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:60:in 'block (3 levels) in <top (required)>'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in 'call'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in 'block in execute'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in 'each'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in 'execute'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in 'block in invoke_with_call_chain'  
/usr/local/lib/ruby/1.9.1/monitor.rb:211:in 'mon_synchronize'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in 'invoke_with_call_chain'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in 'invoke'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in 'invoke_task'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in 'block (2 levels) in top_level'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in 'each'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in 'block in top_level'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in 'standard_exception_handling'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in 'top_level'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in 'block in run'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in 'standard_exception_handling'  
~/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in 'run'  
/usr/local/bin/rake:32:in '<main>'  
Tasks: TOP => assets:precompile:primary  
rake aborted!  
Command failed with status (1): [/usr/local/bin/ruby /usr/local/bin/rake as...]  
/usr/local/lib/ruby/1.9.1/rake/file_utils.rb:53:in 'block in create_shell_runner'  
/usr/local/lib/ruby/1.9.1/rake/file_utils.rb:45:in 'call'  
/usr/local/lib/ruby/1.9.1/rake/file_utils.rb:45:in 'sh'  
/usr/local/lib/ruby/1.9.1/rake/file_utils_ext.rb:39:in 'sh'  
/usr/local/lib/ruby/1.9.1/rake/file_utils.rb:80:in 'ruby'  
/usr/local/lib/ruby/1.9.1/rake/file_utils_ext.rb:39:in 'ruby'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:12:in 'ruby_rake_task'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:21:in 'invoke_or_reboot_rake_task'  
~/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:29:in 'block (2 levels) in <top (required)>'  
/usr/local/lib/ruby/1.9.1/rake/task.rb:205:in 'call'  
/usr/local/lib/ruby/1.9.1/rake/task.rb:205:in 'block in execute'  
/usr/local/lib/ruby/1.9.1/rake/task.rb:200:in 'each'  
/usr/local/lib/ruby/1.9.1/rake/task.rb:200:in 'execute'  
/usr/local/lib/ruby/1.9.1/rake/task.rb:158:in 'block in invoke_with_call_chain'  
/usr/local/lib/ruby/1.9.1/monitor.rb:211:in 'mon_synchronize'  
/usr/local/lib/ruby/1.9.1/rake/task.rb:151:in 'invoke_with_call_chain'  
/usr/local/lib/ruby/1.9.1/rake/task.rb:144:in 'invoke'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:116:in 'invoke_task'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:94:in 'block (2 levels) in top_level'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:94:in 'each'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:94:in 'block in top_level'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in 'standard_exception_handling'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:88:in 'top_level'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:66:in 'block in run'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in 'standard_exception_handling'  
/usr/local/lib/ruby/1.9.1/rake/application.rb:63:in 'run'  
/usr/local/bin/rake:32:in '<main>'  
Tasks: TOP => assets:precompile 
```

# python - 表示套接字连接丢失的错误代码是什么？

> ID：13325956
> 
> 赞同：3
> 
> 时间：2012-11-10T20:49:28.023
> 
> 标签：python, sockets, networking, tcp

我在用 Python 编写 TCP 服务器时注意到，当一端或另一端意外停止时，在不同的条件下会发生一些错误。

例如，有时我得到“管道损坏”（`errno.EPIPE`），有时是“连接中止”（`errno.CONNABORTED`或`errno.WSAECONNABORTED`）。还有一个问题是跨操作系统[的代码是不一样的](https://stackoverflow.com/q/961465/1043456)，但我猜 Python 的`errno`模块可以处理这个问题。

我搜索了很多套接字连接错误代码含义的列表，但没有找到我要查找的内容。

到目前为止，我所拥有的是：

```
try:
    # write or read operation
except socket.error as e:
    if e.errno in (errno.EPIPE, errno.ECONNABORTED, errno.WSAECONNABORTED):
         print 'Connection lost with server...' 
```

到现在为止，一切都很顺利，甚至在添加最后一个之前，我在Windows上遇到了问题，并添加了它，所以我担心可能有一些我没有处理的情况。此外，有时，它只是没有抛出错误并继续读取空行（带有`recv`）和错误的文件描述符等。

`SocketServer`类提供这样的东西吗？还是一般的 TCP 连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:26:53.977

当您尝试从 python 中的关闭套接字读取时，通常不会引发异常。您应该只阅读直到`recv`返回空字符串。

写入关闭的套接字当然会引发一个 Execption ( [`socket.error`](http://docs.python.org/2/library/socket.html#socket.error))，它包含操作系统引发的错误号。

但是你不应该太关心错误代码。Python 不是 C，或者正如[教程](http://docs.python.org/2/howto/sockets.html#non-blocking-sockets)在谈论非阻塞套接字时所说的那样：

> 您可以检查返回码和错误码，通常会让自己发疯。如果你不相信我，有时间试试。你的应用程序会变得很大、有问题并且会占用 CPU。所以让我们跳过脑死亡的解决方案，把它做好。
> 
> ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T13:20:12.860

Python 套接字模块主要是围绕 BSD 套接字 API 的精简包装器。通常，您可以通过查看 C BSD 套接字 API 的手册页找到可能的错误代码（errno 值）的文档。例如`man 2 recv`：

```
ERRORS
   These are some standard errors generated by the socket layer.  Additional errors
   may be generated and returned from the underlying protocol modules; see their
   manual pages.

   EAGAIN or EWOULDBLOCK
          The  socket  is  marked  nonblocking  and  the receive operation would
          block, or a receive timeout had been set and the timeout expired before
          data was received.  POSIX.1-2001 allows either error to be returned for
          this case, and does not require these constants to have the same value,
          so a portable application should check for both possibilities.

   EBADF  The argument sockfd is an invalid descriptor.

   ECONNREFUSED
          A remote host refused to allow the network connection (typically because
          it is not running the requested service).

   EFAULT The receive buffer pointer(s) point outside the process's address space.

   EINTR  The receive was interrupted by delivery of a signal before any data were
          available; see signal(7).

   EINVAL Invalid argument passed.

   ENOMEM Could not allocate memory for recvmsg().

   ENOTCONN
          The socket is associated with a connection-oriented protocol and has not
          been connected (see connect(2) and accept(2)).

   ENOTSOCK
          The argument sockfd does not refer to a socket. 
```

手动页面本身通常不完整，但它们涵盖的案例比任何 Python 文档都多。

# php - 更改 sqldatabase php 脚本

> ID：13325957
> 
> 赞同：0
> 
> 时间：2012-11-10T20:49:30.550
> 
> 标签：php, mysql

我已经有这个问题 3 天了 :( 我通过 phpmyadmin 创建了一个 3 个数据库，并且我已经将这 3 个数据库放入了一个下拉列表中，我想要的是，当我点击提交时，默认数据库会根据下拉列表的值进行更改列表

这是我想出的代码

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<td><form name="form2" method="post" >
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td colspan="3"><center><strong>Select Default Database</strong></center></td>
</tr>
<tr>
<td><center><select name="db_used">
<?php 
$host="localhost";
$username="root";
$password="";

$link = mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
$result = mysql_list_dbs( $link );

while( $row = mysql_fetch_object( $result ) ){
echo "<option>$row->Database</option>";
}
?>

</select></center></td>
</tr>
<tr>
<td colspan="3" align="center"><input type="submit" name="Submit" value="Submit"></td>
</tr>
</table>
</form>
</td>
</tr>
</table>

 <?php
$host="localhost";
$username="root";
$password="";
$db_name = "#this depends on the value of the dropdown list"; 

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
?> 
```

任何帮助都非常感谢~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:44:20.953

希望这会对您有所帮助。您可以这样做：

**创建 index.php**

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<td><form name="form2" method="post" action='generate.php'>
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td colspan="3"><center><strong>Select Default Database</strong></center></td>
</tr>
<tr>
<td><center><select name="db_used">
<?php 
$host="localhost";
$username="root";
$password="";

$link = mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
$result = mysql_list_dbs( $link );

while( $row = mysql_fetch_object( $result ) ){
echo "<option>$row->Database</option>";
}
?>

</select></center></td>
</tr>
<tr>
<td colspan="3" align="center"><input type="submit" name="Submit" value="Submit"></td>
</tr>
</table>
</form>
</td>
</tr>
</table> 
```

**箱生成.php**

```
<?php
$HOMEDIR = getcwd() . "/";
# /home/virtual/magicplugin.com/var/www/html/
$TEMPLATEDIR = $HOMEDIR . "";

$fName = $TEMPLATEDIR . "dbConnection.php";
    $fh = fopen($fName, "r");   $fContents = fread($fh, filesize($fName));  fclose($fh);
    $fContents = str_replace("__databaseName__",$_REQUEST['db_used'],$fContents);
    $outFile ="index.php";
    $fp = fopen($outFile,"w");
        fwrite($fp,$fContents); fclose($fp);

        echo"Connection generated.Please Check";
        ?> 
```

**创建 dbConnection.php**

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<td><form name="form2" method="post" action='generate.php'>
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td colspan="3"><center><strong>Select Default Database</strong></center></td>
</tr>
<tr>
<td><center><select name="db_used">
<?php 
$host="localhost";
$username="root";
$password="";

$link = mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
$result = mysql_list_dbs( $link );

while( $row = mysql_fetch_object( $result ) ){
echo "<option>$row->Database</option>";
}
?>

</select></center></td>
</tr>
<tr>
<td colspan="3" align="center"><input type="submit" name="Submit" value="Submit"></td>
</tr>
</table>
</form>
</td>
</tr>
</table>

 <?php
$host="localhost";
$username="root";
$password="";
$db_name = "__databaseName__"; 

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
?> 
```

# embedded - I2C 驱动程序移植问题

> ID：13325960
> 
> 赞同：0
> 
> 时间：2012-11-10T20:49:50.703
> 
> 标签：embedded, serial-communication, i2c

我正在将 I2C 驱动程序从 Atmel AVR32 U3 移植到 Energy Micro EFM32GG Cortex-M3 设备。驱动程序使用 Atmel BSP 与 I2C 总线通信，为它提供从设备的地址、寄存器地址和数据。

Energy Micro BSP 没有实现寄存器地址。我的问题是，根据标准的I2C协议，我可以只添加寄存器地址作为发送数据的第一个字节吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T08:53:03.557

虽然 I ² C 协议是标准化的，但不同供应商之间的 I ² C 外围设备不可能相同（或什至相似）。虽然从您的 Atmel 实现中保留 API 可能很有用——为了应用程序代码的可移植性——但您可能不得不完全更改底层实现。

您的[参考手册](http://cdn.energymicro.com/dl/devices/pdf/d0053_efm32gg_reference_manual.pdf)将详细描述其 I ² C 外设的寄存器接口和硬件操作。^(您将看到它与相应的 Atmel 外设几乎没有关系，除了由于 I 2) C 协议本身的相似性。此外，DMA 的实现在各个部分之间会有所不同，因此驱动程序也会有所不同。

Energy Micro 有一篇[关于 I ² C](http://cdn.energymicro.com/dl/an/pdf/an0011_efm32_i2c.pdf)操作和[C 源代码](http://cdn.energymicro.com/dl/an/zip/an0011_efm32_i2c.zip)的应用说明。那是你可能应该开始的地方。

# php - CodeIgniter get_where order_by

> ID：13325962
> 
> 赞同：11
> 
> 时间：2012-11-10T20:50:02.220
> 
> 标签：php, codeigniter

我想像这样使用 get_where 和 order_by ......

```
$query = $this->db->get_where($this->tbl_name, $where)->order_by('birth_date', 'ASC'); 
```

但得到这个错误......

```
Fatal error: Call to undefined method CI_DB_mysql_result::order_by() in C:\xampp\htdocs\OAWA\application\models\Member_model.php on line 82 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-10T20:58:37.823

在 CodeIgniter 的 Active Record 中，每个方法都返回对象本身（允许方法链接），除了`get`返回`get_where`结果集。

因此，您需要做的是：

```
$query = $this->db->order_by('birth_date', 'ASC')->get_where($this->tbl_name, $where); 
```

即`get_where()`呼叫需要是最后一个。它返回结果集，因此调用`order_by()`after`get_where()`试图在无效的结果集上调用它。

**编辑**

还有其他方法可以编写此查询：

```
 $query = $this->db->from($this->tbl_name)->where($where)->order_by('birth_date', 'ASC')->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T09:38:58.340

这对我有用

```
$query = $this->db->order_by('columnName', 'ASC')->get_where('tableName');
return $query->result(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-06T14:22:08.037

```
$this->db->order_by('birth_date', 'ASC');
$query = $this->db->get_where($field1, $field2); 
```

# css - 输入字段正在突破其列（流体容器和行）

> ID：13325965
> 
> 赞同：0
> 
> 时间：2012-11-10T20:50:26.130
> 
> 标签：css, twitter-bootstrap, chromium

我正在使用引导程序创建两列布局。我想要第一列中的表格。当我减小容器的大小时，输入文本字段不会重新调整大小并最终脱离列。为什么输入字段会分列？

这是此行为的示例：

```
<div class="container-fluid">
      <div class="row-fluid">
           <div class="span4">
               <div class="well">
                   <form>
                       <input type="text" />
                   </form>
               </div>
          </div>
          <div class="span8">
             Notice how I am to the left of the well, but the input field breaks out of the well and column. And I'm overlapping with the input field!
          </div>
      </div>
  </div> 
```

这个简单的例子显示了行为：http: [//jsfiddle.net/xhHQD/1/](http://jsfiddle.net/xhHQD/1/)

我正在使用铬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T02:46:55.563

为了回答您的问题，文本字段将突破其父级的边界，仅仅是因为它们不能像文本那样换行。您可以覆盖 CSS width 属性以使其精确到您喜欢的宽度，或者尝试将其更改为块级元素。

要让您的字段调整大小以适应其父级，请向其添加类“input-block-level”：

```
<input type="text" class="input-block-level" /> 
```

[在Bootstrap Base CSS](http://twitter.github.com/bootstrap/base-css.html#forms)页面上查看这个和更多示例。

# java - 通过 LDAP 服务器进行身份验证

> ID：13325976
> 
> 赞同：0
> 
> 时间：2012-11-10T20:53:34.693
> 
> 标签：java, jsf, netbeans

我刚刚使用 JSF 等创建了一个 Web 应用程序，但我现在需要通过 LDAP 服务器对所有用户进行身份验证

我已经创建了一个 php 代码来执行此操作，但我的主管告诉我在玻璃鱼或其他东西中以另一种方式做，因为它更好，是否有任何教程等？

如果有帮助，我可以发布我的 php 代码，因为我知道此代码有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:29:49.703

我不知道玻璃鱼。然而，大多数 java web 服务器或 servlet 容器都允许配置 JAAS。您在 中配置安全性`web.xml`并让您的容器处理其余部分（当然是在配置之后）。

我只是快速浏览了以下[教程](http://java.dzone.com/articles/understanding-web-security)，它解释了基本知识。如果您查看 glassfish 文档，它可能会告诉您如何配置 ldap。使用 google`JAAS glassfish`并`glassfish ldap`可能会带来预期的结果。

# objective-c - 与一个实体有多个关系而没有反向？

> ID：13325980
> 
> 赞同：0
> 
> 时间：2012-11-10T20:54:03.833
> 
> 标签：objective-c, ios, core-data

我需要一些帮助。这是我的数据模型的一部分： ![在此处输入图像描述](../Images/dd13db81bdb8b6a5a590890e75f6e307.png)

我有文件夹，但我也想要一些文件夹，无需每次搜索即可轻松访问。所以我创建了一个默认文件夹实体，我想要一个与某个文件夹的关系。

然而，它抱怨它想要一种反向关系。我不明白在这种情况下会如何工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:05:11.027

拉米的答案是正确的，您不必定义反比关系。我只想指出一个替代方案：

您可以从to定义*多个反向关系*，例如`Folder``DefaultFolders`

*   `defAccount`作为与 的反比关系`account`，
*   `defArchive`作为与 的反比关系`archive`，
*   ... 等等。

**缺点：**记录`Folder`较大，因此您的数据库需要更多空间。

**优点：**如果您将这些反向关系的“删除规则”定义为“Nullify”，那么如果相应的被删除，则`account`, `archive`, ... 中的属性`DefaultFolders`将自动设置为。`nil``Folder`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T21:24:30.607

在这种情况下，只需忽略警告。如果警告让您烦恼，请在构建设置中添加一个新属性，将其命名为 MOMC_NO_INVERSE_RELATIONSHIP_WARNINGS 并将值设置为 YES。

# jsf-2 - PrimeFaces 可扩展和可选行

> ID：13325986
> 
> 赞同：2
> 
> 时间：2012-11-10T20:54:37.147
> 
> 标签：jsf-2, primefaces

我有一个 PrimeFaces 数据表，其中有一列称为“名称”，还有一个带有“描述”的行扩展。

是否可以通过单击使这些行可选择，但在扩展时无法触发选择事件？

**编辑**

```
<h:form id="customerCategoryListForm">
    <p:dataTable var="customerCategory" value="#{admin.customerCategories}" id="customerCategoryList" 
        paginator="true" rows="10" 
        rowKey="#{customerCategory.id}" selectionMode="single" selection="#{admin.selectedCustomerCategory}"
        paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="10,25,50"
        emptyMessage="Nincs adat!">
        <p:ajax event="rowSelect" update=":customerCategoryDialogForm:customerCategoryDisplay" oncomplete="customerCategoryDialog.show()" />  

        <f:facet name="header">  
            Categories
        </f:facet>

        <p:column width="10">
            <p:rowToggler />
        </p:column>

        <p:column headerText="Category name" sortBy="#{customerCategory.name}" width="740">
            <h:outputText value="#{customerCategory.name}" />
        </p:column>

        <p:rowExpansion>
            <h:outputText value="#{customerCategory.description}" />
        </p:rowExpansion>

        <f:facet name="footer">
            <p:commandButton value="Új hozzáadása" />
        </f:facet>

    </p:dataTable> 
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T16:04:20.330

`outputText`您可以将列内的更新为 a ，而不是让整个列打开对话框，`commandLink`这仍将使用 AJAX 来调用支持 bean：

`<p:commandLink value="#{customerCategory.description}" actionListener="#{customerCategory.fooMethod(customerCategory)}" update=":customerCategoryDialogForm" oncomplete="PF('customerCategoryDialog').show();"/>`

# haskell - Haskell中代数数据类型的大小

> ID：13325988
> 
> 赞同：0
> 
> 时间：2012-11-10T20:54:54.303
> 
> 标签：haskell, ghc

> **可能重复：**
> [Haskell 数据类型的内存占用](https://stackoverflow.com/questions/3254758/memory-footprint-of-haskell-data-types)

简单的低级新手问题，当我说类似

```
data SomeTree = Null | Red Int32 | Blue Int64 | Tree [SomeTree] 
```

为了构建树，使用 GHC 时，Haskell 为每个节点、指针等（64 位机器代码）精确使用了**多少字节**？

# google-apps-script - 为什么 Urlfetchapp 寻找公开可用资源的身份验证？

> ID：13325994
> 
> 赞同：0
> 
> 时间：2012-11-10T20:55:56.080
> 
> 标签：google-apps-script

我是 GAS 新手，我正在尝试使用可视化查询从 Google 电子表格中提取数据。URI 在浏览器中完美运行，并且电子表格已发布。但是，来自 UrlFetchApp 的响应没有意义，因为数据已发布，不需要身份验证。这是我的代码：

```
function test () {
  var url = 'https://docs.google.com/a/1ins.us/spreadsheet/tq?&key=<secretkey>&alt=json';
  var q = '&tq=Select S,count(A) Where A is not Null Group By S pivot N';
  var data = UrlFetchApp.fetch(url+q).getContentText();
  data = data.slice(39,-2); //remove the callback function, is there a way to exec the function?
  Logger.log(data);
} 
```

这是 JSON 中返回的错误：

```
{"version":"0.6","status":"error","errors":[{"reason":"user_not_authenticated","message":"User not signed in","detailed_message":"\u003ca target=\u0022_blank\u0022 href=\u0022https://docs.google.com/spreadsheet/\u0022\u003eSign in\u003c/a\u003e"}]} 
```

我错过了什么？我读到谷歌不希望在 GAS 中使用 Google.Visualizations。这是对这个问题的考虑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:35:52.643

我的猜测是电子表格不向公众开放。尝试在隐身窗口中访问 URL，看看它是否会提示您登录。某些域不允许在域外共享数据。

# asp.net-mvc - asp.net mvc 4：RenderBody() 正在将模型名称写入页面

> ID：13325995
> 
> 赞同：0
> 
> 时间：2012-11-10T20:56:00.870
> 
> 标签：asp.net-mvc, razor

我正在工作/调整 asp.net mvc 4 的默认安装 .. 添加了一些视图 ..

当我尝试将模型传递给我的视图时，该模型（名称和命名空间）被写入页面。

```
@Model Blah.Web.UI.Models.DirectoryModel
@{
    ViewBag.Title = "Directory";
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

当我查看我的页面时，我看到了

> Blah.Web.UI.Models.DirectoryModel Blah.Web.UI.Models.DirectoryModel

在页面顶部写了两次..

我的控制器只是初始化模型并将其传递到视图中..

我也注意到这发生在名为 form _layout 的@RenderBody() 中。所以我假设它是在我认为的某个地方完成的。

即使我在我的视图中注释掉所有代码（接受上面的声明），我仍然会看到这个字符串被写出来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T21:03:46.763

改变

```
@Model Blah.Web.UI.Models.DirectoryModel 
```

至

```
@model Blah.Web.UI.Models.DirectoryModel 
```

`@model`带有小写字母的指令`m`告诉 razor 模型的类型是什么。

另一方面`@Model`，大写`M`只调用`ToString`视图的`Model`属性并将字符串写入响应中。

这就是为什么

```
 @Model Blah.Web.UI.Models.DirectoryModel 
```

输出：`Blah.Web.UI.Models.DirectoryModel Blah.Web.UI.Models.DirectoryModel`

首先，它将 the`ToString`的 the`Model`和该行的其余部分写`Blah.Web.UI.Models.DirectoryModel`为纯文本。

# c# - 使用 linq 按值对字典进行分组

> ID：13325996
> 
> 赞同：0
> 
> 时间：2012-11-10T20:56:03.787
> 
> 标签：c#, linq, dictionary, group-by

我有一个字典，将字符串存储为键，将整数存储为表示单词及其出现次数的值。用户需要能够按使用次数或按字母顺序按第一个字母对它们进行排序。尽管我对它很陌生，但我更喜欢使用 LINQ。我已经能够使用以下代码根据起始字母对单词进行分组：

```
public string AlphabeticWordBuilder()
{
    List<String> words = this.myWords.WordsAsList();
    words.Sort();
    return GroupWords(words);
}

private static string GroupWords(List<String> words)
{
    String formatedWords = string.Empty;
    var groups =
        from w in words
        group w by w.First();
    foreach (var group in groups)
    {
        formatedWords += ("\n" + group.Key + ":\n");
        foreach (var w in group)
        {
            formatedWords += (w);
        }
    }
    return formatedWords;
} 
```

然而，这种方法需要我将字典的键转换为列表，导致我丢失我的值。我应该能够以类似的方式按值对字典进行分组，但我不知道如何将键/值关系合并到我用于字母排序的代码中。有人可以发布一个使用 LINQ 按值对字典进行分组的示例吗？

此外，如果可能，我想避免使用 LINQ 方法语法并继续使用上面显示的 LINQ 查询表达式语法。

**示例输出按字母顺序：**

a开头的单词：

> 和冒险（等）

**按频率输出的示例：**

出现 1 次的单词：

> 东西和问题

**我正在尝试做的一个不完整的例子：**

```
public string FrecquincyWordBuilder()
{
    string fromatedWords = string.Empty;
    var groups =
        from w in this.myWords
        group w by w.value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:09:38.450

我对您问题中第一个字母的作用有点困惑……但这将按每个单词的第一个字母分组，然后按该单词的出现次数对组进行排序。

```
 var groups =
      from w in this.myWords
      group w by w.Key.First() into g // group by word first letter
      select new { 
            FirstLetter = g.Key, // the group key is the first letter
            WordsWithThisFirstLetter = // order the words with this first letter
                (from wordWithThisFirstLetter in g
                 order by wordWithThisFirstLetter.Value // the number of occurrences of this word
                 select new { 
                         Word = wordWithThisFirstLetter.Key, // dictionary item key 
                         Occurrences = wordWithThisFirstLetter.Value // dictionary item value
                 }
                ).ToArray()

      }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:16:05.133

如果我理解这个问题，那么解决方案是：

```
var groups = from kv in myWordsDictionary
                         group kv by kv.Key.First() into g
                         orderby g.Key
                         select g; 
```

使用 lambda：

```
var groups = myWordsDictionary.GroupBy(d => d.Key.First()).OrderBy(g => g.Key); 
```

GroupBy - 按 Key 第一个字母对 KeyValuePairs 进行分组。

OrderBy - 按字母顺序排列组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T00:13:47.333

这是我正在使用的代码。

```
 public string FrecquincyWordBuilder()
  {

      string fromatedWords = string.Empty;
      this.myWords.SortByFrequency();
      Dictionary<string, int> wordsAndFec = this.myWords.wordsAsDictionary();
      return GroupWordsByFercs(wordsAndFec);

  }

  private static string GroupWordsByFercs(Dictionary<string, int> wordsAndFec)
  {
      String formatedWords = string.Empty;
      var groups =
          from w in wordsAndFec
          group w by w.Value;
      foreach (var group in groups)
      {
          formatedWords += ("\n Words ocurring " + group.Key + " times:\n");
          foreach (var w in group)
          {
              formatedWords += (w.Key + " ");
          }
      }
      return formatedWords;
  } 
```

# php - 如何包含位于根目录之外的文件？

> ID：13325998
> 
> 赞同：0
> 
> 时间：2012-11-10T20:56:06.580
> 
> 标签：php, include

在我的服务器中，我的根目录是：home

所有公共文件（www 目录）都在：home/public_html

好的，我想将一些文件放在 www 目录之外的其他目录中，例如：home/configs 或 home/php_classes

我想从 www 目录中的某些文件中包含这些目录中的文件。

基本上，我想在 home/public_html/index.php 中包含 home/configs 和 home/php_classes 中的文件

我试过了：

```
include("../configs/site_config.php");
include("../php_classes/mailer.php"); 
```

和

```
include("/home/configs/site_config.php");
include("/home/php_classes/mailer.php"); 
```

但它不起作用，我不断收到包含警告“没有这样的文件或目录”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:07:09.650

您的两个 PHP 代码片段都应该可以工作，所以首先仔细检查该文件*是否确实*存在。

如果您确定没有拼写错误，那几乎可以肯定是权限问题。PHP 在 Apache 下执行，因此您需要将文件夹的访问权限授予 Apache 运行的用户。最简单的方法取决于操作系统，这里有一个更深入细节的答案：[如何授予 PHP 对目录的写访问权限？](https://stackoverflow.com/questions/2900690/how-do-i-give-php-write-access-to-a-directory).

要测试这是否是问题，您可以暂时递归地设置您尝试访问世界可读/可执行目录的权限（例如 755）。类似的东西`chmod -R 755 /home/configs`。如果 PHP 仍然没有找到它，那么您的问题就在其他地方。确定问题后，请确保缩小权限范围，因为除非您有充分的理由，否则您不希望让您的目录在世界范围内可读或可执行。

# java - 如何使用 Struts 2 OGNL 标记将 ArrayList 从会话迭代到 JSP

> ID：13325999
> 
> 赞同：2
> 
> 时间：2012-11-10T20:56:34.783
> 
> 标签：java, struts2

我有一堂课，我正在创建一个非空的`ArrayList`并且把它不是一个会话。现在，我想将会话中保存的列表迭代到我的 JSP 页面中。

我试过了，但什么都没有。

在行动课上

```
..................
books = new ArrayList<Bookdetails>();
session.put(BillTransactionBooksConstants.BOK, books);
return SUCCUSS; 
```

注意：我测试我的列表不为空，并且它正确添加到会话中。我唯一的问题是如何从会话中将此列表显示到我的 JSP 中。

`BillTransactionBooksConstants`：

```
package v.esoft.actions.booktransaction; 
public class BillTransactionBooksConstants 
{
    public static final String BOK = "BOK"; 
} 
```

`shortbill.jsp`：

```
<s:iterator value="#session.BillTransactionBooksConstants.BOK" status="userStatus">
    <s:property value="Bookdetails.bookTitile" />
    <br/>
</s:iterator> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T21:11:00.987

只引用属性名，直接使用常量值：

```
<s:iterator value="#session.BOK">
    <s:property value="bookTitle" />
    <br/>
</s:iterator> 
```

请注意，我已更正了该属性的拼写。

另请注意，“SUCCESS”拼写为“SUCCESS”，而不是“SUCCUSS”。

如果您希望使用常量名称，您应该可以使用以下内容，但我没有测试它：

```
<s:iterator value="#session[@v.esoft.actions.booktransaction.BillTransactionBooksConstants@BOK]"> 
```

假设启用了静态成员访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:02:14.880

尝试这个

```
<s:iterator value="#session.BOK" status="userStatus">
<tr class="<s:if test="%{#userStatus.odd == true} ">odd</s:if> <s:else>even</s:else>">
<td><s:property value="bookTitile" /></td> 
```