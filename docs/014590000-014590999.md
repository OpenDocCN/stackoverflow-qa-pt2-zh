# StackOverflow 问答 14590000-14590999

# html - 下拉菜单不起作用css

> ID：14590001
> 
> 赞同：0
> 
> 时间：2013-01-29T18:46:13.610
> 
> 标签：html, css

我的下拉菜单不起作用。以下是css和html代码。

```
#nav {
    display: block;
    background: transparent url(../images/nav_bg.jpg) repeat-x left top;
    padding: 0;
    margin: 0;
    height: 34px;
    z-index: 100;
    position: relative;
    width: 100%;
    list-style: none;
    text-align: center;
}

#nav li {
    text-align: center;
    display: block;
    float: left;
    height: 34px;
    margin: 0;
    padding: 0;
    position: relative;
    background: url(../images/nav_sep.jpg) no-repeat 0 0;
}

#nav li a {
    float: left;
    height: 25px;
    padding: 0 15px;
    padding-top: 9px;
    color: #ccc;
    font-size: 0.9em;
    margin-left: 2px;
}

#nav li a:hover {
    background: url(../images/nav_over.jpg) repeat-x 0 0;
    color: white;
}

#nav li a.active {
    background: url(../images/nav_over.jpg) repeat-x 0 0;
    color: white;
    font-weight: bold;
}

#nav li.sep {
    background: url(../images/nav_sep.jpg) no-repeat 0 0;
    width: 2px;
    height: 34px;
    float: left;
}

#nav li.left {
    background: url(../images/nav_l.jpg) no-repeat left top;
    width: 36px;
    height: 34px;
    float: left;
}

#nav li.right {
    background: url(../images/nav_r.jpg) no-repeat right top;
    width: 36px;
    height: 34px;
    float: right;
}

#nav li ul {
    display: none;
    width: 170px;
    position: absolute;
    top: 34px;
    left: 0;
    margin: 0;
    padding: 0;
    /* Transparent background for drop down menu */
    background:transparent filter: alpha(opacity=90);
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=90);
    opacity:0.90;
}

#nav li ul li {
    border: 0;
    height: 25px;
    color: #99FF00;
    background: #111;
    margin: 0;
}

#nav li ul li a {
    display: block;
    height: 25px;
    width: 140px;
    padding: 0 20px 0 15px;
    border-top: 1px #333 solid;
    white-space: nowrap;
    background: #000;
    color: white;
    text-align: left;
    line-height: 25px;
    font-weight: normal;
}

#nav li ul li a:hover {
    color: #99FF00;
    background: #111;
}

/* Hacks for Opera to fix the drop down menu problem */
html:first-child #nav li a {
    float: none;
    height: 34px;
    padding-top: 0;
    line-height: 34px;
    display: block;
}
html:first-child #nav li ul li a {
    height: 25px;
    line-height: 25px;
} 
```

和 HTML 是

```
<ul id="nav">
      <li class="left">&nbsp;</li>
      <li><a class="active" href="#">Home</a></li>
      <li> <a href="DiscussionPanel">Discussion Panel<img src="/Images/nav_bullet.jpg" alt=""></a>
        <ul>
          <li><a href="/DiscussionPanel/AddProblemTag"></a></li>
          <li><a href="/DiscussionPanel/DisplayProblemList"></a></li>
          <li><a href="/DiscussionPanel/PostProblem"></a></li>
          <li><a href="/DiscussionPanel/ViewProblems"></a></li>
        </ul>
      </li>
       <li> <a href="MeetingScheduler">Meeting Scheduler<img src="/Images/nav_bullet.jpg" alt=""></a>
        <ul>
          <li><a href="/MeetingScheduler/MeetingMinutes"></a></li>
          <li><a href="/MeetingScheduler/MeetingList"></a></li>
        </ul>
      </li>
       <li><a href="/ReserveProject/StudentView">Reserve Project</a></li>
      <li><a href="/SubmitArtifact/StudentView">Submit Artifact</a></li>
      <li><a href="/CreateAttendanceSheet/MarkAttendance">Attendance</a></li>
      <li><a href="">Contact Us</a></li>
      <li class="sep">&nbsp;</li>
      <li class="right">&nbsp;</li>
    </ul> 
```

我希望当我将鼠标悬停在讨论面板上时，应该呈现下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:53:32.900

你从来没有真正`ul`在悬停时显示子：

```
#nav li:hover ul {
    display: block;
} 
```

[http://jsfiddle.net/ExplosionPIlls/gGBW4/](http://jsfiddle.net/ExplosionPIlls/gGBW4/)

# matlab - matlab中dicom图像的直方图

> ID：14590002
> 
> 赞同：0
> 
> 时间：2013-01-29T18:46:13.873
> 
> 标签：matlab, histogram, dicom

我正在尝试在 dicom 图像的 matlab 中绘制直方图。这是一种医学图像格式，颜色图不是标准的 [0 255] 灰度级。所以 imhist 不适合我。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:57:59.977

如果图像由浮点数据（单或双）组成，`imhist`则期望数据在 [0 1] 范围内。尝试将输入标准化为`imhist`，如下所示：

```
imhist(data/max(data(:))) 
```

对于其他数据类型，[请阅读`imhist`文档](http://www.mathworks.com/help/images/ref/imhist.html)（尤其是提示部分）以了解其工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:30:45.317

如果我没记错的话，DICOM 图像使用`uint16`它们的像素值。

你有没有尝试过

```
imhist( I, max(I(:)) ); 
```

强制`imhist`使用全范围的`uint16`值？

或者，您始终可以使用[`hist`](http://www.mathworks.com/help/matlab/ref/hist.html)而不是[`imhist`](http://www.mathworks.com/help/images/ref/imhist.html).

```
hist( I(:), max(I(:)) ); 
```

# regex - 正则表达式匹配确切的字符数？

> ID：14590008
> 
> 赞同：88
> 
> 时间：2013-01-29T18:46:37.363
> 
> 标签：regex

我需要一个匹配任意三个大写字母的[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，例如 AAA 或 ABC 或 DKE。但是它不能匹配四个或更多，例如 AAAA 或 ABCDEF 或 aBBB。

我的解决方案：`^([A-Z][A-Z][A-Z])$`

**问题**：

1.  它是否正确？
2.  有没有别的办法，只是为了学习？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-01-29T18:47:09.683

你所拥有的是正确的，但这更consice：

```
^[A-Z]{3}$ 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-29T18:51:41.557

您的解决方案是正确的，但是您的正则表达式中有一些冗余。
类似的结果也可以从以下正则表达式中获得：

```
^([A-Z]{3})$ 
```

`{3}`表示`[A-Z]`必须恰好出现 3 次。

# google-apps-script - 在部署的 webapp 中访问 URL 参数

> ID：14590014
> 
> 赞同：0
> 
> 时间：2013-01-29T18:47:01.203
> 
> 标签：google-apps-script

我似乎无法在我的简单 web 应用程序中访问 URL 参数。从文档看起来很简单：

```
function doGet(e) {
  var foo = (e.parameters.test);
  return ContentService.createTextOutput("Test: " + foo);    
} 
```

但是，当我使用“我的最新代码”开发人员链接或已部署的版本运行 web 应用程序时，foo 不断返回为“未定义”。

我还注意到，当页面加载我最后添加的 URL 参数时消失了。

网址如下所示：

[https://script.googleusercontent.com/a/macros/mysite.com/echo?user_content_key=superlongstring&lib=otherstring&test=helloworld](https://script.googleusercontent.com/a/macros/mysite.com/echo?user_content_key=superlongstring&lib=otherstring&test=helloworld)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:28:33.967

您应该在脚本 URL 重定向之前添加参数。

所以它应该看起来像 -

[https://script.google.com/macros/s/longstring/exec?test=helloworld](https://script.google.com/macros/s/longstring/exec?test=helloworld)

![在此处输入图像描述](../Images/cdc9e516791faa6abd21d3608a1dc6e9.png)

重定向的 URL 仅用于输出，不可重复使用，也不会触发任何新的处理。

# kobold2d - Kobold2d 和 XCode 4.6 错误

> ID：14590018
> 
> 赞同：1
> 
> 时间：2013-01-29T18:47:11.130
> 
> 标签：kobold2d, xcode4.6

[我和gabrielhilal](https://stackoverflow.com/users/1155142/gabrielhilal)有同样的问题，见[这里](https://stackoverflow.com/questions/14581605/kobold2d-generates-errors-after-upgraded-xcode-to-4-6)。[LearnCocos2D](https://stackoverflow.com/users/201863/learncocos2d)发布删除所有对 FIXCATEGORYBUG 的引用。我的问题是如何做到这一点？从哪里引用？如果这是一个愚蠢的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:08:08.123

Kobold2d 中的以下文件必须更改：

FixCategoryBug.h 第 15 行：

从：

```
#define FIX_CATEGORY_BUG(name) @interface FIXCATEGORYBUG ## name; @end @implementation FIXCATEGORYBUG ## name; @end 
```

至：

```
#define FIX_CATEGORY_BUG(name) @interface FIXCATEGORYBUG ## name : NSObject @end @implementation FIXCATEGORYBUG ## name @end 
```

NSMutableArray+WeakReferences.m 第 39 行：

从：

```
#define FIX_CATEGORY_BUG(name) @interface FIX_CATEGORY_BUG_##name @end @implementation FIX_CATEGORY_BUG_##name @end 
```

至：

```
#define FIX_CATEGORY_BUG(name) @interface FIX_CATEGORY_BUG_##name : NSObject @end @implementation FIX_CATEGORY_BUG_##name @end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:15:33.323

好的，这是一个蹩脚的问题。对不起，我是新人。如果其他人看到此内容，则只需转到编辑 > 查找 > 在工作区中查找。搜索 FIXCATEGORYBUG。我评论了每个#import 语句，之后一切正常。

# iphone - 调用函数并在视图之间传递信息

> ID：14590019
> 
> 赞同：0
> 
> 时间：2013-01-29T18:47:24.020
> 
> 标签：iphone, delegates, tableview, addchild

**在此先感谢您的帮助！**

在我的项目的主 ViewController.m 中，我添加了一个自定义的 tableView，如下所示：

```
messageController = [[MyMessagesController alloc] initWithStyle:UITableViewStylePlain];
[self addChildViewController:messageController];
[self.view addSubview:messageController.view]; 
```

然后，在 MyMessagesController.m 部分 tableView didSelectRowAtIndexPath: 我想编写将在创建它并添加为 childViewController 的 ViewController.m 中生效的代码。

如何从 MyMessagesController.m 访问 ViewController.m 的功能？

我可以以某种方式使其成为委托，以便我可以调用 [delegate functionName]; 吗？我可以将信息传递回 ViewController.m 吗？通过发送 NSString 或 NSArray 或其他任何东西选择了表中的哪些行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:53:28.730

是的，使用委托，如果您不确定如何最好地做到这一点，[这里](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)是 Apple 关于委托编程的一个很好的参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:30:13.013

明白了，下面是你如何将一个 viewController 变成另一个的委托：

在父控制器的 .h 中 -

```
@interface ViewController : UIViewController <NameOfDelegate> { 
```

在父控制器的 .m 中，创建新视图后 -

```
newViewController.delegate = self; 
```

并且：

```
- (void)functionToCall:(id)sender {
    NSLog(@"Function Called!!!");
} 
```

在您添加的 newViewController 的 .h 中 -

```
@protocol NameOfDelegate;

@interface newViewController : UIViewController/OR/TableViewController {
    id <NameOfDelegate> delegate;
}

@property (nonatomic, strong) id <NameOfDelegate> delegate;

@end

@protocol NameOfDelegate
- (void)functionToCall:(id)sender;
@end 
```

在 newViewController 的 .m 中 -

```
@implementation newViewController

@synthesize delegate; 
```

当您准备好在您的委托中调用该函数时 -

```
[delegate functionToCall:self]; 
```

# cefsharp - CefSharp SetCookie 不起作用

> ID：14590021
> 
> 赞同：1
> 
> 时间：2013-01-29T18:47:30.807
> 
> 标签：cefsharp

我是 .NET 和 CefSharp 的新手。一般来说，它加载页面很好，但我不知道如何使用 cookie。我使用 0.12 版本的 CefSharp，但是我在 1.19 上遇到了完全相同的问题。我在我的应用程序中手动设置 cookie，但服务器看不到它们，是否存在某种错误或我错过了什么？在我得到 Initialized 事件后，我在加载 URL 之前设置了它们，如下所示：

```
 CEF.SetCookie(@"http://localhost/CookiesShow/", @"localhost", Name, Value, @"/CookiesShow", false, false, false, Expires); 
```

我可以在调试中看到正在设置 cookie，但是我的网络服务器没有收到它们。我还尝试运行“nc -l 80”，但没有得到那些 cookie。我错过了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:20:06.027

虽然我对此没有直接的答案 - 我想发表评论而不是回答......，但我想自愿提供一些可能在调试方面对您有所帮助的东西。如果你还没有这样做。在运行 cef 会话时使用提琴手代理。这将捕获会话并查看每个回帖的标题，这可能有助于确定问题出在 cef 还是您的应用程序中。我使用 fiddler [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)来帮助我解决类似的问题。我对这个问题的答案很感兴趣，因为我很可能需要在 cef 中删除 cookie

# jax-rs - JAX-RS 选项路径参数不起作用

> ID：14590023
> 
> 赞同：0
> 
> 时间：2013-01-29T18:47:36.343
> 
> 标签：jax-rs

我正在尝试使用以下构造

```
@ApplicationPath("app")
@Path("api/{userid}/model")
public class ModelService
{
   @Get
   @Path("{modelid: (.*)?}")
   public Response removePreProcessor(@PathParam("userid") String sUserId, @PathParam("preprocessorid") String sPreProcessorId)
   {
       return Response.build();
   }
} 
```

我无法访问以下两个 REST URL

```
GET http://localhost:8080/XXXX/app/api/xyz/model
GET http://localhost:8080/XXXX/app/api/xyz/model/123 
```

让我知道我做错了什么

-提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:35:32.357

当我阅读您的问题时，有几件事对我来说看起来很奇怪，但它们可能与上下文有关。

有一件事似乎是错误的：

您正在使用 a`@PathParam("preprocessorid")`但我在您的路径中看不到此参数。

你有日志吗？

# ruby-on-rails - 控制台增加一个整数工作但调用相同的函数“未定义的方法 + 用于 nil 类”

> ID：14590024
> 
> 赞同：-1
> 
> 时间：2013-01-29T18:47:36.630
> 
> 标签：ruby-on-rails, rails-activerecord

代码：

```
#schema..
  t.integer  "shares",             :default => 0
end 
```

＃模型

```
def increment_shares
  shares = shares + 1 #undefined method + for nil class
  save
end

#console

  irb(main):003:0> t.shares
  => 0

  irb(main):004:0> t.shares = t.shares + 1
  => 1

  irb(main):005:0> t.increment_shares
  NoMethodError: undefined method `+' for nil:NilClass 
```

（问题应该从代码中清楚。编写更多文本以满足“质量标准”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:50:56.567

您应该使用`self`来访问模型的属性：

```
def increment_shares
  self.shares = self.shares + 1 
  self.save
end 
```

# git - Git 停止跟踪更改

> ID：14590027
> 
> 赞同：1
> 
> 时间：2013-01-29T18:47:41.920
> 
> 标签：git, version-control, git-branch

我在工作目录中，我创建了一个新分支

```
 git checkout -b someBranch 
```

但是**在某些文件**中工作后，状态没有显示任何变化

```
git status 
# On branch someBranch
nothing to commit (working directory clean) 
```

知道是什么导致了这个问题吗？
有什么提示可以重新开始跟踪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:33:56.387

解决了。我正在处理 .gitignore 中包含的文件

# mongodb - Mongo分页

> ID：14590028
> 
> 赞同：7
> 
> 时间：2013-01-29T18:47:42.687
> 
> 标签：mongodb, sorting, pagination, morphia

我有一个用例，我需要根据查询从 mongo 获取对象列表。但是，为了提高性能，我添加了分页。所以，对于第一次调用，我得到了 10 个对象的列表，接下来我需要 10 个。但是我不能直接使用 offset 和 pageSize 因为页面上显示的前 10 个对象可能已被修改 [deleted]。

解决方案是查找传递的最后一个对象的对象 ID，并在该 ObjectId 之后检索接下来的 10 个对象。

请帮助如何使用 Morphia mongo 有效地做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:43:40.013

使用 morphia 您可以通过以下命令执行此操作。

```
datastore.find(YourClass.class).field(id).smallerThan(lastId).limit(10).order("-ts"); 
```

由于您是在最后一次检索到的 id 之后查询检索项目，因此您不会费心处理已删除的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:12:39.637

我想到的一件事是，`skip()`除非您打算更改界面的工作方式，否则您将遇到与使用此处相同的问题。

使用像这样的范围查询要求您使用不同类型的界面，因为现在必须更难准确地检测到您所在的页面以及将来存在多少页面，特别是如果您这样做是为了避免传统分页的问题。

这种类型的分页产生的默认界面类型仅仅是一个无限滚动的页面，想想 YouTube 视频评论或 Facebook 墙提要甚至 Google+。没有物理分页或“页面”，而是有一个获取更多按钮。

这是您需要使用的接口类型，以使远程寻呼更好地工作。

至于查询@cubbuk 给出了一个很好的例子：

```
datastore.find(YourClass.class).field(id).smallerThan(lastId).limit(10).order("-ts"); 
```

除了它应该是`greaterThan(lastId)`因为你想找到最后的所有内容`_id`。`_id`除非您在插入记录之前的某个时间创建 OjbectIds ，否则我也会进行排序，如果是这种情况，那么您可以使用插入时设置的特定时间戳。

# javascript - 依赖注入的 Hello World 示例

> ID：14590031
> 
> 赞同：2
> 
> 时间：2013-01-29T18:47:55.043
> 
> 标签：javascript, angularjs

谷歌提出的内容有很多可变性，而且似乎都没有很好地提炼基础知识。

有人可以提供 JavaScript 依赖注入的“hello world”示例吗？

我在 PHP 中使用了 DI，但没有简单的类对象范例，我发现很难掌握它在 JavaScript 中的功能。

`toString()`angular.js 使用的方法的 hello world 示例将是最好的，如果它不太复杂，为什么使用它会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:51:39.910

在使用 JavaScript 查看 DI 时，我发现此博客条目很有帮助：http: [//merrickchristensen.com/articles/javascript-dependency-injection.html](http://merrickchristensen.com/articles/javascript-dependency-injection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:53:32.603

下面是一个使用 angular.js 进行依赖注入的简单示例：

```
 function HelloWorld($scope){
     $scope.name="ajay";
  }

HelloWorld.$inject = ['$scope']; 
```

# java - Java - 使用 PreparedStatement 在 mysql 数据库中存储 UTF-8 字符（特别是俄语字符）

> ID：14590032
> 
> 赞同：7
> 
> 时间：2013-01-29T18:48:01.753
> 
> 标签：java, mysql, jdbc, utf-8

使用准备好的语句，我试图将俄语字符存储在特定表的字段中。表和字段使用 utf8 字符集和 utf8_bin 排序规则。

如果我通过 IDE 或命令行手动运行插入，则字符串会按预期保存。

```
INSERT INTO utf8Table VALUES('Анатолий Солоницын'); 
```

然后我就可以查询该表，也可以取回预期的字符串。

连接是通过 tomcat 的 context.xml 文件中的资源设置的，配置如下：

```
<Resource 
    name="jdbc/DoolliDB"  
        auth="Container"   
        type="javax.sql.DataSource"   
        driverClassName="com.mysql.jdbc.Driver"
        useUnicode="true"
        characterEncoding="UTF8"
        ....
</Resource> 
```

正如我所说，我能够很好地读取字符串/字符，所以我假设表和连接设置都设置正确。

我通过以下方式使用 PreparedStatement/CallableStatement：

```
CallableStatement callableStmt = __mySqlConnector.getConnection().prepareCall("INSERT INTO utf8Table VALUES(?)");

callableStmt.setString(1, "Анатолий Солоницын");

callableStmt.executeUpdate(); 
```

插入数据库的不是 Анатолий Солоницын，而是：???????? ？？？？？？

> 另请注意，“普通”utf-8 字符串（例如 über）已正确保存。

两个都

```
System.getProperty("file.encoding") 
```

和

```
java.nio.charset.Charset.defaultCharset().name() 
```

也都返回 UTF-8。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T12:09:39.343

您需要在数据库 url 中定义连接编码，而不是在属性中。

```
<Resource 
    name="jdbc/DoolliDB"  
        auth="Container"   
        type="javax.sql.DataSource"   
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/dbName?characterEncoding=UTF-8"
        ...
</Resource> 
```

请参阅[http://dev.mysql.com/doc/refman/4.1/en/connector-j-reference-charsets.html](http://dev.mysql.com/doc/refman/4.1/en/connector-j-reference-charsets.html)

> 警告 不要使用 Connector/J 发出查询“集名称”，因为驱动程序不会检测到字符集已更改，并将继续使用在初始连接设置期间检测到的字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:54:24.123

我在 PHP 中使用了 3 条 sql 语句，也许它们会在这里有所帮助：

*   设置 character_set_results=utf8
*   设置 character_set_connection=utf8
*   设置 character_set_client=utf8

例如：

```
CallableStatement callableStmt = __mySqlConnector.getConnection().prepareCall("set character_set_results=utf8"); 
```

# listview - 为什么我点击 KendoUI ListView 的内容后会消失？

> ID：14590036
> 
> 赞同：0
> 
> 时间：2013-01-29T18:48:19.077
> 
> 标签：listview, asp.net-mvc-4, controls, kendo-ui

我遵循了[本](http://demos.kendoui.com/web/listview/editing.html)教程中的编辑示例，并设法为我的网页实现了类似的行为，但是有一个我不明白为什么会发生的问题。每次单击“编辑”按钮或“删除”按钮时，与这些按钮关联的列表视图上的元素都会从列表中消失。这是我用于显示列表视图的 javascript 函数：

```
function swapDiv(e) {
    selection = e.value;
    var url = '';
    switch (selection) { //check from which endpoint I will be loading the contents for the list view
        case 'Usuarios':
            url = "http://127.0.0.1:81/SismosService.svc/usuario/index";
            template = '#usuariosTemplate';
            break;
        case 'Regiones':
            url = "http://127.0.0.1:81/SismosService.svc/region/index";
            template = '#regionesTemplate';
            break;
        case 'Clusters':
            url = "http://127.0.0.1:81/SismosService.svc/cluster/index";
            template = '#clustersTemplate';
            break;
        case 'Dispositivos':
            url = "http://127.0.0.1:81/SismosService.svc/dispositivo/index";
            template = '#dispositivosTemplate';
            break;
        case 'Eventos':
            url = "http://127.0.0.1:81/SismosService.svc/evento/index";
            template = '#eventosTemplate';
            break;
    }
    $.ajax({ //make the ajax call to load the contents for the list view
        url: url,
        success: function (data) {
            var src = null;
            if (template == '#eventosTemplate')
            {
                src = getEventosArray(data); //the controls displayed for this kind of data are different from the rest
            }
            else
            {
                src = data.Response; 
            }
            var ds = new kendo.data.DataSource({
                data: src
            });
            $('#listView').kendoListView({ //create the kendo ui list view
                dataSource: ds,
                template: kendo.template($(template).html())
            });
        },
        error: function (data) {
            console.log('Error: ' + JSON.stringify(data));
        }
    });
    //animate the div where the list view and other controls are displayed
    $('#selectionBar').animate({
        left : '189'
    }, 500);
    $('#dataBar').animate({
        left: '0'
    }, 500);
    $('#myMap').animate({
        left : '370'
    }, 500);
} 
```

我为列表视图定义的模板位于[此](http://pastebin.com/QafEmUgV)链接中。最后这是我的观点：

```
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.common.min.css")%>" rel="stylesheet" type="text/css" />
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.default.min.css")%>" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.7.min.js" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/kendo/2012.3.1114/kendo.web.min.js")%>"></script>
    <script src="<%: Url.Content("~/Scripts/jquery.signalR-1.0.0-rc1.min.js")%>" type="text/javascript"></script>
    <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3"></script>
    <script src="<%: Url.Content("~/Scripts/index/templateLoader.js")%>" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/index/main.js")%>" type="text/javascript"></script>

<%-- here goes my templates but for space reasons and to provide a more clean reading I put the templates separately --%>

</head>
<body onload="GetMap();">
    <div id="canvasDiv" style="position: absolute; top: 0px; left: 0; width: 100%; height: 100%; background-color: transparent; left: 10px; ">
        <div id="mainDiv" style="position: absolute; top: 0px; left: 0; width: 100%; height: 100%; background-color: transparent; left: 10px; ">
            <div id="leftBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 180px; height: 100%; background-color: white; left: 10px; overflow:auto; z-index:20">
                <button id="btnUsuarios" value="Usuarios" style="position: absolute;left: 10px; right: 10px; top: 10px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Usuarios</button><br />
                <button id="btnRegiones" value="Regiones" style="position: absolute;left: 10px; right: 10px; top: 70px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Regiones</button><br />
                <button id="btnClusters" value="Clusters" style="position: absolute;left: 10px; right: 10px; top: 130px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Clusters</button><br />
                <button id="btnDispositivos" value="Dispositivos" style="position: absolute;left: 10px; right: 10px; top: 190px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Dispositivos</button><br />
                <button id="btnEventos" value="Eventos" style="position: absolute;left: 10px; right: 10px; top: 250px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Eventos</button><br />
            </div>
            <div id="selectionBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 180px; height: 100%; background-color: white; left: 10px; overflow:auto; z-index:9">
                <div class="k-toolbar k-grid-toolbar">
                    <button class="k-button k-button-icontext k-add-button" onclick="swapToNewData(this)"><span class="k-icon k-add"></span>Agregar</button>
                </div>
                <div id="listView" style="background-color: transparent; position: absolute; top: 40px; left: 0px; right: 0px; width:auto; height:auto" ></div>
            </div>
            <div id="dataBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 180px; height: 100%; background-color: white; left: 10px; overflow:auto; z-index:8">
                <div id="dataView" style="background-color: transparent; position: absolute; top: 40px; bottom:0px; left: 0px; right: 0px; width:auto; height:auto" ></div>
            </div>
            <div id='myMap' style="border: thin solid black; position: absolute; display: block; min-height: 100%; top: 0px; left: 189px; width: 88%; "></div>
        </div>
    </div>
</body>
</html> 
```

我的列表视图的内容消失的原因是什么？它是嵌入在 Kendo UI 列表视图控件中的行为吗？我怎样才能避免这种行为？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:12:35.623

有几种情况会使元素消失。典型的有：

*   DataSource 定义中没有`update`模式。
*   定义中没有`id`（或什`model`至）`DataSource`。

从您的数据源中，我看到没有`model`定义。

**编辑**

在[这个例子](http://jsfiddle.net/OnaBai/NUrmV/)中，我定义了一个带有模型的网格，但我已经`id`在模型中注释了定义。如果您单击`edit`按钮，然后单击`cancel`，您将看到该行消失。

注释`id`定义：

```
schema   : {
    model: {
        // id    : "symbol",
        fields: {
            symbol: { type: "string" },
            price : { type: "number" },
            shares: { type: "number" },
            total : { type: "number" }
        }
    }
}, 
```

现在，删除`id`定义中的注释并重复测试，您将看到现在该行没有从网格中删除。

```
schema   : {
    model: {
        id    : "symbol",
        fields: {
            symbol: { type: "string" },
            price : { type: "number" },
            shares: { type: "number" },
            total : { type: "number" }
        }
    }
}, 
```

**编辑**：

似乎您的定义中缺少版本模板。因为`usuariosTemplate`它应该是这样的：

```
<script type="text/x-kendo-tmpl" id="usuariosTemplateEdit">
    <div class="product-view">
        <dl>
            <dt>Usuario</dt>
            <dd>
                <input type="text" data-bind="value:Nombre" name="Nombre" required="required"/>
                <input type="text" data-bind="value: ApellidoP" name="ApellidoP" required="required" />
                <input type="text" data-bind="value: ApellidoM" name="ApellidoM" required="required" />
            </dd>
        </dl>
        <div class="edit-buttons">
            <a class="k-button k-button-icontext k-update-button" href="\\#"><span class="k-icon k-update"></span>Save</a>
            <a class="k-button k-button-icontext k-cancel-button" href="\\#"><span class="k-icon k-cancel"></span>Cancel</a>
        </div>
    </div>
</script> 
```

并且您还应该更改代码以在 listView 初始化中添加额外选项：

usuarios 的 listView 示例（硬代码版本）。

```
$('#listView').kendoListView({
    dataSource  : ds,
    template    : kendo.template($('#usuariosTemplate').html()),
    editTemplate: kendo.template($('#usuariosTemplateEdit').html())
}); 
```

# javascript - 从对象创建新的多维数组

> ID：14590044
> 
> 赞同：0
> 
> 时间：2013-01-29T18:48:32.233
> 
> 标签：javascript, arrays, object

我正在从一个对象创建一个新数组。我用一个 for 循环来做到这一点。

```
for (var key in data["record"])
    {
        if (data["record"].hasOwnProperty(key))
        {   

            if (data["record"][key]["acquisition.method"] != undefined ) {
                newObject[key] = [];

                newObject[key]["acquisition.method"] = data["record"][key]["acquisition.method"][0];

                if (data["record"][key]["production.date.end"] != undefined ) { 
                    newObject[key]["production.date"] = data["record"][key]["production.date.end"][0];

                }
            }
        }
    } 
```

该数组在 console.log 中如下所示：

```
0: Array[0]
1: Array[0]
2: Array[0]
3: Array[0]
4: Array[0]
5: Array[0] 
```

我想让它像这样：

```
record: Array[0]
record: Array[0]
record: Array[0]
record: Array[0]
record: Array[0] 
```

我该怎么做？

添加了 JSON

```
newObject = [
    "record": [
               "something": "value",
               "somethingelse": "value"
        ],
    "record": [
               "something": "value",
               "somethingelse": "value"
        ],
    "record": [
               "something": "value",
               "somethingelse": "value"
        ],
    "record": [
               "something": "value",
               "somethingelse": "value"
        ]
] 
```

我唯一能做到的是这样的：

```
 newObject = [
        "0": [
                   "something": "value",
                   "somethingelse": "value"
            ],
        "1": [
                   "something": "value",
                   "somethingelse": "value"
            ],
        "2": [
                   "something": "value",
                   "somethingelse": "value"
            ],
        "3": [
                   "something": "value",
                   "somethingelse": "value"
            ]
    ] 
```

我尝试过这样的事情，但我知道 push 仅适用于数组：

```
var newObject = {};
    var records ={};
    records["record"] = {};

    for (var key in data["record"])
    {
        if (data["record"].hasOwnProperty(key))
        {   

            if (data["record"][key]["acquisition.method"] != undefined ) {

                records["record"]["acquisition.method"] = data["record"][key]["acquisition.method"][0];

                if (data["record"][key]["production.date.end"] != undefined ) { 

                    records["record"]["production.date"] = data["record"][key]["production.date.end"][0];
                    newObject.push(records);
                }
            }
        }
    } 
```

我现在尝试的：

```
var records =[];

var newObject1 = {};
var newObject2= {};

for (var key in data["record"])
{
    if (data["record"].hasOwnProperty(key))
    {   

        if (data["record"][key]["acquisition.method"] != undefined ) {

            newObject2["acquisition.method"] = data["record"][key]["acquisition.method"][0];

            if (data["record"][key]["production.date.end"] != undefined ) { 

                newObject2["production.date"] = data["record"][key]["production.date.end"][0];
                newObject1["record"] = newObject2;
            }
        }
    }
    records.push(newObject1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:16:19.387

如果我正确理解了您的代码（并且我想认为我是:)），那么您要做的是使您可以使用字符串（键）访问数组中的每条记录。这可以通过使用 JSON 来实现。即使使用 JSON，您仍然应该能够通过索引（您看到的整数键）访问数组中的元素。

**更新** 这样想，你试图用一个键访问数组中的一堆对象。问题在于，根据定义，键是指单个值。因此，您不能对多个对象使用相同的键。但是，您可以创建一个数组，键“记录”所引用的数组将返回所有这些内部键值对。

**更新 2** 可以这样想：假设您正在使用原始数组（在您最初发布的代码中制作的数组）。现在假设您将该数组设置为名为 的变量的值`var rec`。在控制台中查看变量的值时`rec`，您将看到您在原始帖子中列出的确切输出（“0: Array[0], 1: Array[1].....”）。退后一步，我们知道变量`rec`引用（即，它是一个包含）所有这些数组的数组（它应该是）。现在，您要做的就是：创建一个新对象 ，`obj1`并给它一个名为的属性`record`，并将该属性的值设置为您的变量`rec`。这意味着您有一个对象 ，`obj1`可以通过 访问您的数据`obj["record"]`。

请注意，这是一个概念解决方案 - 不是完整的解决方案。

如果您有任何问题，请告诉我。祝你好运！:)

# repository - 在 XtraGrid 中将图像设置为 RepositoryItemPictureEdit

> ID：14590046
> 
> 赞同：1
> 
> 时间：2013-01-29T18:48:42.797
> 
> 标签：repository, devexpress, xtragrid

我有`XtraGrid`，我添加了一个新列并将其`ColumnEdit`属性设置为 `RepositoryItemPictureEdit`. 我尝试使用它设置图像，`RepositoryItemPictureEdit1.Appearance.Image`但在表单加载后它没有填充，有什么想法吗？

我有2011版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:40:47.487

正如我猜你没有以正确的方式分配图像来控制。你可以通过这个 DevExpress KB 线程 -[为什么我在使用 PictureEdit 就地编辑器的 GridColumn 中得到“无图像数据”文本？](http://www.devexpress.com/Support/Center/KB/p/K18177.aspx)

来源：[将图像分配给 RepositoryItemPictureEdit](http://www.devexpress.com/Support/Center/p/Q325764.aspx)
您也可以使用此方法：
1）将列的 FieldName 属性设置为“Image”，因为您的 DataTable 包含此字段
2）将 Image DataColumn 类型设置为 Image 值
3）更改代码并且不要将图像转换为字节数组。

只需如下设置：

```
RepositoryItemPictureEdit pictureEdit = gridControl1.RepositoryItems.Add("PictureEdit") as RepositoryItemPictureEdit;

pictureEdit.SizeMode = PictureSizeMode.Zoom;

pictureEdit.NullText = " ";

gridView1.Columns["Picture"].ColumnEdit = pictureEdit; 
```

*要使编辑器加载图像，底层数据类型应对应于[RepositoryItemPictureEdit.PictureStoreMode](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItemPictureEdit_PictureStoreModetopic)属性值*

如果要在单元格中显示图像，则可以使用 CustomDrawCell 事件

这`ImageStream`是一个存储图像的属性。

```
 public Stream ImageStream { get; set; } 
```

您可以按如下方式使用它：

```
 if (profile != null)
    {
          imageStream = MyObj.ImageStream; // this image saved as stream
    }

}

if (imageStream != null)
{
    e.Graphics.DrawImage(System.Drawing.Image.FromStream(imageStream), e.Bounds);
    if (cellValue.Condition== "XXXX")
    {
        e.Graphics.DrawRectangle(e.Cache.GetPen(Color.Red), e.Bounds);
    }

    e.DisplayText = text;
    Rectangle r = e.Bounds;
    Rectangle w = new Rectangle(r.X, r.Y - 5, r.Width, r.Height);
    //Draw the cell value
    e.Appearance.DrawString(e.Cache, e.DisplayText, w);
    e.Bounds.Inflate(-2, -2);
} 
```

更多参考：
[如何在网格单元格中放置图标](http://www.devexpress.com/Support/Center/p/A900.aspx)
[如果数据源仅包含指向图像的链接，如何在网格列中显示外部图像](http://www.devexpress.com/Support/Center/p/A2707.aspx)
[RepositoryItemPictureEdit 加载图像](http://www.devexpress.com/Support/Center/p/Q270783.aspx)
[如何将图片加载到存储](https://www.devexpress.com/Support/Center/p/Q100485.aspx)
[库itemPictureEdit RepositoryItemPictureEdit 默认空图像](http://www.devexpress.com/Support/Center/p/Q394538.aspx)

# python - pymongo - 查询最近的 N 个项目

> ID：14590047
> 
> 赞同：3
> 
> 时间：2013-01-29T18:48:45.417
> 
> 标签：python, pymongo

从数据库中检索最近的 N 个项目的“正确方法”是什么？

从教程和 mongodb 文档看来（除了使用范围查询）

`db.collection.find(skip = 0, limit=N, sort=[("_id", -1)])`

这样对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T18:53:27.067

您的语法似乎并不完全正确。

```
db.collection.find({}).sort("_id", -1).limit(N) 
```

应该做你所期望的。

Python 和 pymongo 支持简单的链接。

* * *

**注意**
排序`_id`不一定产生“最近的”项目。

# algorithm - 非凸 3d 模型算法

> ID：14590048
> 
> 赞同：-1
> 
> 时间：2013-01-29T18:48:44.667
> 
> 标签：algorithm, 3d-model

我有 3d 点云（浮雕），我需要一个创建非凸 3d 模型的简单算法。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:02:14.970

一种快速且相当容易实现的算法，用于在点（外部和内部！）周围获得一个体面的三角形外壳，它基于[“Marching Cubes”算法](http://paulbourke.net/geometry/polygonise/)：

*   定义一个网格（最小 x,y,z 值 + x,y,z 方向上的网格分辨率 + x,y,z 方向上的点数）
*   将每个网格点的值初始化为零
*   “栅格化”给定点（将坐标四舍五入到最近的网格点）；对于普通版本，只需将相应网格点的值设置为 1
*   现在，您可以使用“Marching Cubes”算法对网格的每个基本立方体进行多边形化，`isolevel`其中`0.9`.

这些代码片段可能会对您有所帮助。对于初始化：

```
union XYZ {
    struct {
        double x,y,z;
    };
    double coord[3];
};
typedef std::vector<XYZ> TPoints;
TPoints points;
// get points from file or another data structure

// initialize these values for your needs (the bounding box of the points will help)    
XYZ coordsMin, coordsMax;
XYZ voxelSize; // grid resolution in each coordinate direction
int gridSize; // number of grid points, here the same for each coordinate direction

int gridSize2 = gridSize*gridSize;
char* gridVals = new char[gridSize2*gridSize];
for (int i=0; i<gridSize; ++i)
for (int j=0; j<gridSize; ++j)
for (int k=0; k<gridSize; ++k)
    gridVals[i*gridSize2+j*gridSize+k] = 0;

for (size_t i=0; i<points,size(); ++i)
{
    XYZ const& p = points[i];
    int gridCoords[3];
    for (int c=0; c<3; ++c)
        gridCoords[c] = (int)((p.coord[c]-coordsMin.coord[c])/voxelSize.coord[c]);
    int gridIdx = gridCoords[0]*gridSize2 + gridCoords[1]*gridSize + gridCoords[2];
    gridVals[gridIdx] = 1;
} 
```

`Polygonize`然后根据引用的实现中的函数计算三角形：

```
const double isolevel = 0.9;

TRIANGLE triangles[5]; // maximally 5 triangles for each voxel
int cellCnt = 0;
for (int i=0; exportOk && i<gridSize-1; ++i)
for (int j=0; exportOk && j<gridSize-1; ++j)
for (int k=0; exportOk && k<gridSize-1; ++k)
{
    GRIDCELL cell;
    for (int cornerIdx=0; cornerIdx<8; ++cornerIdx)
    {
        XYZ& corner = cell.p[cornerIdx];
        // the function Polygonize expects this strange order of corner indexing ...
        // (see http://paulbourke.net/geometry/polygonise/)
        int xoff = ((cornerIdx+1)/2)%2;
        int yoff = (cornerIdx/2)%2;
        int zoff = cornerIdx/4;
        corner.x = (i+xoff)*voxelSize.x + coordsMin.x;
        corner.y = (j+yoff)*voxelSize.y + coordsMin.y;
        corner.z = (k+zoff)*voxelSize.z + coordsMin.z;
        cell.val[cornerIdx] = gridVals[(i+xoff)*gridSize2+(j+yoff)*gridSize+k+zoff];
    }
    int triangCnt = Polygonise(cell, isolevel, triangles);
    triangCntTotal += triangCnt;
    triangCntTotal += triangCnt;
    for (int t=0; t<triangCnt; ++t)
    {
        TTriangle const& triangle = triangles[t].p;
        ExportTriangle(triangle);
    }
} 
```

这在工业应用中对我有用。

# iframe - 适用于 Windows 8 应用的 YouTube iframe

> ID：14590051
> 
> 赞同：5
> 
> 时间：2013-01-29T18:48:47.733
> 
> 标签：iframe, youtube-api, windows-store-apps, winjs

所以我使用 YouTube 的 iframe 来在我的应用中显示一些视频。问题是我无法让视频全屏显示。

我正在使用这段代码：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/RnYcPJTtV1A" frameborder="0" allowfullscreen></iframe> 
```

如果您将其写入单个 html 文件，浏览器（全部）将显示`fullscreen`最右侧的按钮。但是，Win8 应用程序（当然是 html）上的相同代码将显示视频，但不会显示全屏按钮。

你认为这就是 YouTube（谷歌）想要的吗？我的意思是，我应该做一些不同的事情吗？

问候

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T15:22:35.820

塞巴斯蒂安，

需要记住的是，Windows 应用商店应用程序中的 iframe 仅供有限使用。[认证要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)2.4 规定：

> 您的应用提供的主要体验必须在应用内进行

在 Windows 应用商店应用程序中包含您无法通过 iframe 控制的网站的内容时需要非常小心，因为这些内容可能会在没有警告的情况下更改，从而可能会破坏您的应用程序或引入意外行为。

由于 YouTube 视频可能使用 Flash 或 HTML5 进行播放，您可能会发现某些视频根本无法在 Windows 应用商店应用程序的上下文中播放，因为 ActiveX 控件在该上下文中不可用。

鉴于这一切，我不希望能够在 Windows 应用商店应用程序中通过 iframe 播放嵌入 YouTube 视频的全屏视频。

# java - 在子文件夹中找不到视图

> ID：14590055
> 
> 赞同：2
> 
> 时间：2013-01-29T18:49:04.660
> 
> 标签：java, scala, web-applications, playframework-2.0

我刚开始使用 Play2.0 框架，我正在尝试在我的模板中使用主`home/index`模板。我遇到的问题是它在共享文件夹中时找不到“main”，如果我把它拿出来放在 Views 根目录中，它就可以正常工作。

所以我想知道如何引用`main.scala.html`from `index.scala.html`？

我的文件夹结构如下：

*   意见
    *   家
        *   index.scala.html
    *   共享
        *   main.scala.html

我的代码`index.scala.html`是：

```
@head = {

}

@content = {
    <b>Home Screen</b>!!
}

ERROR: @main(title = "Home",head, content) 
```

我得到的错误是：

```
not found: value main. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T11:51:42.933

您可以使用：

```
@Shared.main(title = "Home",head, content) 
```

出于安全和性能原因，Play 将模板编译为 Scala 函数并将其存储在托管文件夹`/target/scala-2.9.1/src_managed/main/views`中，因此您可以预览它以找到正确的路径。

规则很容易查看使用模式保存的文件：

*   `/app/views/viewName.scala.ext`（`ext`可以是`html`，`xml`或`txt`） Play 会将视图编译为：`view.ext.viewName`
*   因为`/app/views/SomeSub/OtherSub/viewName.scala.ext`它将是：`view.ext.SomeSub.OtherSub.viewName`

所以：

```
/app/views/general.scala.html             = views.html.general
/app/views/Main/index.scala.html          = views.html.Main.index
/app/views/Api/usersList.scala.xml        = views.xml.Api.usersList
/app/views/Email/English/body.scala.txt   = views.txt.Email.English.body 
```

ETC...

在某些情况下，`/app/views/tags`包会自动导入到视图中，因此您可以在任何视图中使用`/app/views/tags/myTag.scala.html`with:`@tags.myTag(args)`语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:08:27.800

一旦你进入视图的子文件夹，就会有这样的“伪包”，称为“html”。我不完全确定它是如何工作的，但试试这个：

```
@views.html.Shared.main 
```

# ldap - 无法将 apache-ldap-api 与 grails 2.2 一起使用

> ID：14590058
> 
> 赞同：0
> 
> 时间：2013-01-29T18:49:20.600
> 
> 标签：ldap, grails-2.0

我正在尝试将 apache-ldap-api 与 grails 2.2 一起使用。他们网站上最新版本的 api 是 1.0.0-M15 ，但 maven repo 有高达 1.0.0-M13 。所以我决定首先使用 M13，向 BuildConfig.groovy 添加一个依赖项：

```
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes e.g.
    runtime(
        [group: 'org.apache.directory.shared', name: 'apache-ldap-api', version: '1.0.0-M13']
    )
    // runtime 'mysql:mysql-connector-java:5.1.20'
} 
```

Grails 下载了依赖项，但是当我尝试在代码中使用 API 时，例如：

```
import org.apache.directory.groovyldap.LDAP

LDAP.newInstance(...) 
```

我得到一个编译错误：

```
LdapController.groovy: 2: unable to resolve class org.apache.directory.groovyldap.LDAP
  @ line 2, column 1.
import org.apache.directory.groovyldap.LDAP
^
1 error 
```

编译器允许我导入 'org.apache.directory.groovyldap.*' 但话又说回来，对 'LDAP.newInstance()' 的调用会引发异常。我还尝试在我的 /lib 文件夹中手动删除 1.0.0-M15 版本并运行“grails compile --refresh-dependencies”，但没有任何运气。如果我在这里做错了什么有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T12:14:37.333

1 运行此 grails compile --refresh-dependencies 2 将 LDAP.newInstance(...) 更改为新的 LDAP

这就是它对我的工作方式

# php - 如何配置 whmcs smarty 模板插件？

> ID：14590060
> 
> 赞同：0
> 
> 时间：2013-01-29T18:49:24.677
> 
> 标签：php, smarty, whmcs

我已将其添加`function.bnr_exchange.php`到`includes/smarty/plugins`目录中。它包含`smarty_function_bnr_exchange`返回一个字符串。

我还修改了 invoicepdf.tpl

```
$pdf->Cell(0,6,{bnr_exchange} . '',0,1,'L','1'); 
```

这给出了错误：

> 意外{

我试过了，`"{bnr_exchange}"`但后来它写了文字

> {bnr_exchange}

如果我只是写`{bnr_exchange}`在模板中，它会说

> 意外}

在那一行。

所以它不识别插件“bnr_exchange”。

我的问题是如何告诉 whmcs 我有一个带有该插件的文件以便它可以看到它？

# c - 在函数中更改数组不会更改它在 main 中的值

> ID：14590061
> 
> 赞同：0
> 
> 时间：2013-01-29T18:49:28.233
> 
> 标签：c, pointers

我尝试用-0.8到0.8之间的随机数填充一个向量（我必须分配）。我的问题是为什么在我调用函数 setvector() 时在主函数中不返回向量并且我仍然用零初始化？非常感谢。我在这里做了什么

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

void allocate(double **a, int size) {
    *a = malloc(size);
}

double setvector(double *v){
    int i, seed, send_size;

    send_size = 10;

    allocate(&v, send_size * sizeof(double)); // allocate memory for the vector
    seed = time(NULL);
    srand(seed);
    for (i = 0; i < send_size; i++)
    {
        v[i] = 1.6*((double) rand() / (double) RAND_MAX) - 0.8;
    }
    printf("Inside function the vector is:\n\n");
    for (i = 0; i < 10; i++)
    {
        printf("The %d element has the random %4.2f\n", i, v[i]);
    }
    return *v;
}

int main(){
    double *v = NULL;
    setvector(v);
    printf("\nThe vector from main is:\n\n");
    printf("The 1st element of v is %4.2f\n", &v[0]);
    printf("The 1st element of v is %4.2f\n", &v[1]);

    return 0;
} 
```

这是我的屏幕输出：

> 在函数内部，向量是：
> 
> 0元素有随机-0.79
> 1元素有随机-0.34
> 2元素有随机0.48
> 3元素有随机-0.67
> 4元素有随机-0.70
> 5元素有随机0.61
> 6元素有随机 -0.67
> 7 元素具有随机 -0.66
> 8 元素具有随机 -0.44
> 9 元素具有随机 -0.36
> 
> 来自 main 的向量是：
> 
> v
> 的第一个元素是 0.00 v 的第一个元素是 0.00

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T18:53:48.657

在`main`您将数组元素的地址传递给`printf`：

```
printf("The 1st element of v is %4.2f\n",&v[0]);
printf("The 1st element of v is %4.2f\n",&v[1]); 
```

那应该是`printf(..., v[0]);`。

更远：

```
double setvector(double *v){ 
```

不会改变`v`，`main`所以`v`保持`NULL`在那里。你应该`setvector`接受一个`double**`, like`allocate`并将它的地址传递给它`v`。

# android - 如何使用 manifestmerger 插入应用程序包名称？

> ID：14590063
> 
> 赞同：2
> 
> 时间：2013-01-29T18:49:35.063
> 
> 标签：android, android-manifest

让我从清单行开始：

```
 <receiver android:name="com.sample.library.android.c2dm.C2DMBaseReceiver" android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <category android:name="com.sample.library" />
        </intent-filter>
    </receiver> 
```

上面的示例行位于 Android 库项目的 AndroidManifest 中。我还有一个具有包名的应用程序项目：**com.my.sample.application**。

在此应用程序项目中启用 manifestmerger 时，manifestmerger 会逐字复制上述行。这意味着该类别将指向错误的包名称。

有没有办法告诉 manifestmerger 插入它的应用程序包名称？

# javascript - 此上下文在分配时发生变化

> ID：14590064
> 
> 赞同：4
> 
> 时间：2013-01-29T18:49:37.047
> 
> 标签：javascript

这个问题来自[ECMA-262](http://dmitrysoshnikov.com/ecmascript/the-quiz/) quiz

```
var x = 100;
var foo = {
  x: 50,
  bar: function(){
    return this.x;
  }
}
console.log(foo.bar()); //returns 50
console.log((foo.bar = foo.bar)()); //returns 100 
```

第二个语句中的上下文如何`this`变化？`console`或者一般来说，什么对象等于（分配）操作返回全局对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:04:49.283

`foo.bar`（[成员运算符](http://es5.github.com/#x11.2.1)）评估为[引用](http://es5.github.com/#x8.7)“*对象上的属性”bar“ ，并且在*[调用它](http://es5.github.com/#x11.2.3)时将被特殊对待。

`(foo.bar = foo.bar)`（[赋值](http://es5.github.com/#x11.13.1)）只产生赋值，调用它会导致全局对象被用作[`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:00:11.130

`foo.bar = foo.bar`返回`foo.bar`然后通过调用的函数`(...)()`。由于该函数不是作为对象 foo 的属性调用的，因此它`this`不会是 foo 对象，而是在这种情况下是全局对象。

# linux - 无法登录用户模式 Linux (UML)

> ID：14590066
> 
> 赞同：1
> 
> 时间：2013-01-29T18:49:39.830
> 
> 标签：linux, user-mode-linux

对于我的`UML (user mode linux)`，我构建了一个基于 Debian 的根文件系统并添加了一个用户“uml”。但是当我尝试登录 UML 时，它没有被接受：

```
<snip>
(none) login: uml

Ubuntu 5.10 "Breezy Badger" (none) tty0

(none) login:
</snip> 
```

我的 UML 是从 Linux 2.6.27 源代码树构建的。root-fs 被创建为： `debootstrap --arch i386 breezy <my-dir>`

创建后`root-fs`，我 chroot 进入它并执行“adduser uml”。但是为什么UML不接受用户名“uml”呢？

顺便说一句，我也尝试过“root”，但也没有被接受。

谢谢。

更新：这是我在登录会话期间的完整日志：

```
./linux mem=128M ubda=/nobackup/hxu2/uml/debian-2
Locating the bottom of the address space ... 0x0
Locating the top of the address space ... 0xffffd000
Core dump limits :
        soft - 104857600
        hard - NONE
Checking that ptrace can change system call numbers...OK
Checking syscall emulation patch for ptrace...missing
Checking for tmpfs mount on /dev/shm...OK
Checking PROT_EXEC mmap in /dev/shm/...OK
Checking for the skas3 patch in the host:
  - /proc/mm...not found: No such file or directory
  - PTRACE_FAULTINFO...not found
  - PTRACE_LDT...not found
UML running in SKAS0 mode
[    0.000000] Linux version 2.6.27 (hxu2@sjc-ads-445) (gcc version 3.4.6 20060404 (Red Hat 3.4.6-11)) #1 Sat Jan 26 21:41:07 PST 2013
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: mem=128M ubda=/nobackup/hxu2/uml/debian-2 root=98:0
[    0.000000] PID hash table entries: 512 (order: 9, 2048 bytes)
[42949372.960000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[42949372.960000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[42949372.960000] Memory: 126832k available
[42949372.960000] Calibrating delay loop... 3774.87 BogoMIPS (lpj=18874368)
[42949373.250000] Mount-cache hash table entries: 512
[42949373.250000] Checking for host processor cmov support...Yes
[42949373.250000] Checking that host ptys support output SIGIO...Yes
[42949373.250000] Checking that host ptys support SIGIO on close...No, enabling workaround
[42949373.250000] net_namespace: 288 bytes
[42949373.250000] /usr/include/linux/aio_abi.h not present during build
[42949373.250000] 2.6 host AIO support not used - falling back to I/O thread
[42949373.250000] NET: Registered protocol family 16
[42949373.280000] NET: Registered protocol family 2
[42949373.440000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[42949373.440000] TCP established hash table entries: 4096 (order: 3, 32768 bytes)
[42949373.440000] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)
[42949373.440000] TCP: Hash tables configured (established 4096 bind 4096)
[42949373.440000] TCP reno registered
[42949373.510000] NET: Registered protocol family 1
[42949373.510000] Checking host MADV_REMOVE support...<3>MADV_REMOVE failed, err = -22
[42949373.510000] Can't release memory to the host - memory hotplug won't be supported
[42949373.510000] mconsole (version 2) initialized on /users/hxu2/.uml/DytWds/mconsole
[42949373.510000] Host TLS support detected
[42949373.510000] Detected host type: x86_64 (GDT indexes 12 to 15)
[42949373.510000] VFS: Disk quotas dquot_6.5.1
[42949373.510000] Dquot-cache hash table entries: 1024 (order 0, 4096 bytes)
[42949373.510000] msgmni has been set to 248
[42949373.510000] io scheduler noop registered
[42949373.510000] io scheduler anticipatory registered (default)
[42949373.510000] io scheduler deadline registered
[42949373.510000] io scheduler cfq registered
[42949373.510000] TCP cubic registered
[42949373.510000] NET: Registered protocol family 17
[42949373.510000] Initialized stdio console driver
[42949373.510000] Console initialized on /dev/tty0
[42949373.510000] console [tty0] enabled
[42949373.510000] Initializing software serial port version 1
[42949373.510000] console [mc-1] enabled
[42949373.510000]  ubda: unknown partition table
[42949373.510000] kjournald starting.  Commit interval 5 seconds
[42949373.510000] EXT3-fs: mounted filesystem with ordered data mode.
[42949373.510000] VFS: Mounted root (ext3 filesystem) readonly.
 * version 2.86 booting
 * Entering runlevel: 2

Ubuntu 5.10 "Breezy Badger" (none) tty0

(none) login: uml
(none) login: root
df^H^H^H

 * Id "1" respawning too fast: disabled for 5 minutes
 * no more processes left in this runlevel

Ubuntu 5.10 "Breezy Badger" (none) tty0

(none) login: uml

Ubuntu 5.10 "Breezy Badger" (none) tty0

(none) login: uml
(none) login: 
Login timed out after 60 seconds. 
```

更新：我尝试与答案相同，并收到此错误。注意我在 32 位 i386 中构建了 2.6.27 内核。

```
[42949373.510000] VFS: Mounted root (ext3 filesystem) readonly.
modprobe: FATAL: Could not load /lib/modules/2.6.27/modules.dep: No such file or directory

INIT: version 2.88 booting
INIT: Entering runlevel: 2
[42949373.660000] Serial line 0 assigned device '/dev/pts/8'

INIT: Id "c0" respawning too fast: disabled for 5 minutes

Debian GNU/Linux 6.0 (none) tty0

(none) login: root

Login incorrect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:25:41.290

我已经编辑了我的答案！

**这就是我所做的，它对我有用！**

构建内核

```
# wget http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.39.tar.gz

# bunzip2 linux-2.6.39.tar.gz

# make ARCH=um defconfig

# make ARCH=um 
```

下载root-fs

```
# wget http://fs.devloop.org.uk/filesystems/Debian-Squeeze/Debian-Squeeze-AMD64-root_fs.bz2

# bunzip2 Debian-Squeeze-AMD64-root_fs.bz2 
```

启动 UML Linux

```
./vmlinux ubda=/root/Debian-Squeeze-AMD64-root_fs mem=128m umid=debian
...
...
...
Debian GNU/Linux 6.0 (none) tty0

(none) login: root
Last login: Wed Jan 30 19:57:33 UTC 2013 on tty0
Linux (none) 2.6.39 #1 Wed Jan 30 11:49:25 PST 2013 x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
root@(none):~# whoami
root 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T22:31:04.450

我刚刚发布了一个可能相关的[问题](https://stackoverflow.com/questions/17731847/user-mode-linux-unreliable-on-2-6-27-47-with-subarch-i386/17734767#17734767)。然后偶然发现了答案，这至少对我有用。

您正在运行哪个主机版本？我发现以 2.6.18-194.8.1.el5 作为主机，这些版本的 UML 确实可以工作，而对于 2.6.9-89.0.11.ELlargesmp 主机则不行。

为什么？... 我不知道 ：（

# python - C/Python：来自 C 代码的未定义行为，dir() 导致 TypeError

> ID：14590068
> 
> 赞同：1
> 
> 时间：2013-01-29T18:49:49.357
> 
> 标签：python, c

我正在测试一个从 C 重写为 Python 的模块，并且遇到了我在职业生涯中见过的一个奇怪的错误。带有测试的有问题的 Python 代码只有三行：

```
# MATCHERS is a list of compiled regular expression objects defined as a
# global in the top level of the module
print dir(MATCHERS[0])
# diff.Differ is a class implemented in C with thed Python API; zoneA/B Words are
# lists and CompareLines, isJunk, and SetStaticLine are functions
differ = diff.Differ(zoneAWords, zoneBWords, CompareLines, isJunk, SetStaticLine)
# Causes a TypeError
dir(MATCHERS[0]) 
```

这三行产生以下输出：

```
['__class__', '__copy__', '__deepcopy__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'findall', 'finditer', 'flags', 'groupindex', 'groups', 'match', 'pattern', 'scanner', 'search', 'split', 'sub', 'subn']
Traceback (most recent call last):
  File "Diff.py", line 1032, in <module>
    main()
  File "Diff.py", line 1019, in main
    diffs = CompareFiles(sys.argv[1], sys.argv[2])
  File "Diff.py", line 584, in CompareFiles
    print dir(MATCHERS[0])
TypeError: eqTest must be a function 
```

在创建用 C 编写的对象之前打印已编译的正则表达式对象的 dir() 可以正常工作，但之后简单地使用 dir() 会导致 TypeError。据我所知， dir() 没有办法导致 TypeError。TypeError 和与之关联的消息来自我的代码，作为对象的 eqTest 字段的自定义 setter 函数的一部分，但是对 dir() 的调用当然不会尝试将 eqTest 设置为任何内容；它已经在上一行成功设置。

这一切都让我相信 C 代码中出现了问题，从而产生了这种奇怪的行为。我目前的假设是缓冲区溢出；写入超出数组的边界会改变导致这些错误的某些东西。（要求 MATCHERS[0] 匹配一个字符串只会使 Python 崩溃而没有错误消息）我已经检查了一段时间的初始化代码，只是想我会检查是否还有其他可能导致这种情况的原因。

我的代码太长，无法在此处包含，并且在[此处](http://pastebin.com/0Jj5xhD4)的 Pastebin 上；您可以忽略第 434 行之后的所有内容，因为它尚未执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:57:02.353

问题可能是当初始化失败时您的`Differ_init`函数*没有*返回。`-1``setup_differ`

您的`setup_differ`电话`py_differ_set_eqTest`：

```
static int py_differ_set_eqTest(DIFFER* self, PyObject* value, void* closure)
{
    PyObject* tmp;

    TYPE_CHECK(PyFunction_Check, "eqTest must be a function");
    ASSIGN_MEMBER_NAME(self, value, eqTest);
    return 0;
} 
```

`TYPE_CHECK`宏在哪里：

```
#define TYPE_CHECK(typeChecker, msg) if (value != Py_None && !typeChecker(value)) \
    {PyErr_SetString(PyExc_TypeError, msg); return -1;} 
```

问题是`setup_differ`不检查是`py_differ_set_eqTest`成功还是失败，即使失败了你也会`Differ_init`返回。`0`

现在，当您调用时`dir`，它会正确打印属性，但在返回之前它可能会检查异常，并查看`TypeError`由引发的`TYPE_CHECK`并引发它。

为了解决这个问题，每个函数都应该返回一个值，以便您可以确定是否引发了异常，如果失败则`Differ_init`应该返回 -1 。`setup_differ`

# zend-framework2 - 服务管理器建议

> ID：14590071
> 
> 赞同：0
> 
> 时间：2013-01-29T18:50:00.963
> 
> 标签：zend-framework2

我只是在寻找有关我应该处理这种情况的最佳方式的建议。

现在，我在一个名为 Service 的文件夹中有几个文件。这些文件当然会联系几个做随机事情的函数。这些文件中的每一个都需要访问 SM 适配器。

我的问题是，我应该在每个文件中实现 ServiceManagerAwareInterface 还是应该只创建一个实现 ServiceManagerAwareInterface 的新类并在实现此服务的新类上扩展我的类？

两种方式都可以正常工作，只是不确定哪种方式更合适。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:04:43.463

如果您认为您的系统将始终依赖 ZF2，那么这两种方法是等效的。

现在从 OO 设计的角度来看，我个人更喜欢扩展服务然后实现 ServiceManagerAwareInterface 的方法。我什至会使用一个接口来依赖 ServiceLocator 来保护我的更多类。为什么？扩展你的类不会花费你很多，这与让你的类依赖于接口一样。

让我们举这个例子，假设您在 ZF1 项目中没有使用这种方法，在此期间您可能已经使用 Zend_Registry 解决了您的依赖关系。现在，假设您迁移到 ZF2 实现，您认为您将花费多少时间将代码从类似的东西重构`Zend_Registry::get($serviceX)`到`$this->getServiceManager()->get($serviceX)`您的服务层？

现在假设您选择了保护您的类，首先通过创建您自己的服务定位器接口，就像这样简单：

```
public interface MyOwnServiceLocatorInterface{
    public function get($service);
} 
```

在 ZF1 下，您使用 Zend_Registry 创建了一个适配器类：

```
public class MyZF1ServiceLocator implements MyOwnServiceLocatorInterface{
    public function get($service){
        Zend_Registry::get($service);
    }
} 
```

您的服务类没有耦合到 Zend_Registry，这使得重构更加容易。

现在，您决定迁移到 ZF2，因此您将在逻辑上使用`ServiceManger`. 然后创建这个新的适配器类：

```
public class MyZF2ServiceLocator implements 
     ServiceManagerAwareInterface,MyOwnServiceLocatorInterface
{

    private $_sm;

    public function get($service){
        $this->_sm->get($service);
    }

    public function setServiceManager($serviceManager){
         $this->_sm = $serviceManager;
    }
} 
```

同样，您的 Service 类不耦合到 ZF2 `ServiceManger`。

现在，ServiceManager 上的 Service 层的配置/注册看起来如何。好吧，您将`Module::getServiceConfig`为此使用您的课程：

```
//Module.php

public function getServiceConfig()
{
     return array(
           'factories'=>array(
                'My\ServiceA'=>function($sm){
                        return new My\ServiceA($sm->get('My\Service\Name\Space\MyZF2ServiceLocator'));
                    }

            //Some other config

            )
} 
```

如您所见，在您的服务类中不需要重构，因为我们通过依赖接口和使用适配器来保护它们。由于我们使用了闭包工厂，我们甚至不需要扩展我们的 Service 类并实现`ServiceLocatorAwareInterface`.

现在，在结束我之前的示例之前，我必须注意我没有处理我的类是通过工厂构造的情况，但是，您可以查看我[之前](https://stackoverflow.com/questions/14550978/why-use-the-service-manager-in-zend-framework-2/14551258#14551258)解决工厂主题以及松散耦合重要性的答案之一在应用层之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:32:55.083

您可以添加初始化程序来做到这一点。它可以减少通过db适配器获取服务时的重复注入。或者，你可以设置abstract_factories，它会减少重复的SM注册。我刚刚在这里发布了 SM Cheatsheet，希望对您有所帮助 :)

[https://samsonasik.wordpress.com/2013/01/02/zend-framework-2-cheat-sheet-service-manager/](https://samsonasik.wordpress.com/2013/01/02/zend-framework-2-cheat-sheet-service-manager/)

# ruby-on-rails - Rails - 对记录数组进行分组和求和

> ID：14590082
> 
> 赞同：0
> 
> 时间：2013-01-29T18:50:40.943
> 
> 标签：ruby-on-rails, rails-activerecord

在我的 rails 应用程序中，我使用以下代码检索记录数组：

```
Spree::Order.find_all_by_id([21, 20, 19, 18]) 
```

Spree::Order 的结构是：

> Spree::Order(id: integer, number: string, item_total: decimal, total: decimal, state: string, adjust_total: decimal, credit_total: decimal, user_id: integer, completed_at: datetime, store_id: integer, bill_address_id: integer, ship_address_id ：整数，email_address_id：整数，payment_total：十进制，shipping_method_id：整数，shipment_state：字符串，payment_state：字符串，email：字符串，special_instructions：文本，terms_of_service：整数，is_quick：布尔值，created_at：日期时间，updated_at：日期时间）

我希望对以下结果进行分组`created_at`并对`total`值求和。

如果你能帮助我，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:23:04.233

你可以这样做：

```
Spree::Order.select("sum(total)").group("date(created_at)").where(id: [21,20,19,18]) 
```

# google-app-engine - 是否可以在网站中使用谷歌应用引擎地图

> ID：14590084
> 
> 赞同：0
> 
> 时间：2013-01-29T18:50:44.970
> 
> 标签：google-app-engine, google-maps

我需要预定房子。我需要使用标记显示谷歌地图，然后代理在地图上放置家的信息。当用户访问网站时，他们会在地图上看到房产列表。可以使用谷歌应用引擎吗？我可以使用 PHP 还是需要使用 java？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:54:21.963

您可以将谷歌地图与谷歌应用引擎一起使用。

这是一个相关链接：[http ://wtp2.appspot.com/AppEngineMapDemo.htm](http://wtp2.appspot.com/AppEngineMapDemo.htm)

> 此演示使用 Google AppEngine 作为数据存储，供用户使用 Python 中的服务器端脚本将照片固定在地图上。

它还包括源。

您还不能在 Google App Engine 上使用 PHP，但可以使用 Java、Go 和 Python。

以下是一些与地理相关的示例：[http ://code.google.com/p/google-app-engine-samples/wiki/GoogleAppEngineSamples](http://code.google.com/p/google-app-engine-samples/wiki/GoogleAppEngineSamples)

# java - SimpleDateFormat 和 2013-01-17T00:00:00-06:00

> ID：14590088
> 
> 赞同：3
> 
> 时间：2013-01-29T18:50:51.673
> 
> 标签：java

在 SimpleDateFormat 中使用什么正确格式来解析如下所示的传入日期：“2013-01-17T00:00:00-06:00”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T18:56:38.537

这种格式应该有效：

```
"yyyy-MM-dd'T'HH:mm:ssXXX" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T18:55:13.960

您必须修剪最后一个冒号以与 .java 的区域信息格式对齐`"-0600"`。

试试这个：

```
String str = "2013-01-17T00:00:00-06:00";
new SimpleDataFormat("yyyy-MM-dd'T'hh:mm:ssZ").parse(str.replaceAll(":(..)$", "$1")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T18:57:25.267

格式就像`yyyy-MM-dd'T'HH:mm:ssX`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T19:01:46.743

yyyy-MM-dd'T'HH:mm:ssz

请参阅此链接：[http ://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T19:29:28.763

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ"); System.out.println(sdf.format(new GregorianCalendar().getTime()));

这还不够吗？

# jquery - 使用滚动条时如何找到鼠标坐标的偏移量？

> ID：14590090
> 
> 赞同：2
> 
> 时间：2013-01-29T18:50:55.870
> 
> 标签：jquery, raphael

我正在开发一个基于 Raphael JS 的白板应用程序。当纸张尺寸大于网页的可查看部分时，它会添加右侧和底部滚动条。但由于滚动条，我没有得到正确的鼠标坐标。例如，如果我通过向下滚动纸张在右下角某处画一条线（使用 Raphael），则该对象仅在纸张的可见部分创建。这意味着鼠标和绘制的元素的坐标不在同一个地方。如何找到 x 和 y 坐标的偏移量，我可以添加或减去鼠标坐标以在移动滚动条时在正确的位置打印元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:36:23.277

我之前在使用 Raphael 进行拖放时遇到过这个问题，事实证明 Raphael 的 dragMove 包装器包含一个很好的例子来说明如何解决这个问题。简而言之，您可以通过文档的`scrollLeft`和`scrollTop`成员获取当前滚动偏移量。看看[未压缩源代码](http://github.com/DmitryBaranovskiy/raphael/raw/master/raphael.js)中的 dragMove 函数——它比看起来简单得多。

# git - 如何在 Git rebase 中用另一个提交替换提交？

> ID：14590094
> 
> 赞同：28
> 
> 时间：2013-01-29T18:51:11.250
> 
> 标签：git, git-rebase

假设我正在开发一个分支中的功能`oldFeature`。我已经完成了提交`A`并将`B1`其发送给代码审查。在`B1`我更改了一些现有文件但也添加了`newfile.txt`.

与此同时，我开始在一个分支`newFeature`（`oldFeature`== `HEAD`）`B1`分支工作。我添加了`C`, `D`, `E`.

同时，我得到了代码审查结果，不得不修改`B1`、更改`newfile.txt`和更改一些现有文件。修复后就变成了`B2`。

所以为了说明它：

```
newFeature   oldFeature
A             A
B1            B2 [B1 with some fixes]
C
D
E 
```

现在我进去了`newFeature`，我想重新设置`newFeature`为 have`B2`而不是`B1`. 当我简单地进行变基时，由于在`newfile.txt`变基的两个部分中都添加了基准，所以我有一个冲突。

我想保留`oldFeature`( `B2`) 中的版本。

我不能移到`B1`,`HEAD`因为`C`, `D`,`E`依赖它。

我知道我可以执行以下解决方法：

*   [`git checkout --theirs`](https://stackoverflow.com/questions/9823692/resolving-a-both-added-merge-conflict-in-git)
*   `git add`
*   继续变基

那么我会有这样的情况：

```
newFeature   oldFeature
A             A
B2            B2
BX
C
D
E 
```

where`BX`或多或少`B2\B1`存在于`A`. 现在我可以进行交互式 rebase 和 remove `BX`。

但是我的解决方法有点复杂。有没有更简单的方法来做到这一点？更简单的意思是，我要么有

```
newFeature   oldFeature
A             A
B2            B2
B2\B1
C
D
E 
```

没有任何变基冲突，然后我可以摆脱那个`B2\B1`提交，或者自动替换它们所以我得到

```
newFeature   oldFeature
A             A
B2            B2
C
D
E 
```

使用 Git 1.8.0。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T18:55:35.643

你可以做一个[变基交互](https://thoughtbot.com/blog/git-interactive-rebase-squash-amend-rewriting-history#interactive-rebase)：

```
git checkout new_feature
git rebase --interactive old_feature 
```

和 drop `B1`：您只需删除带有 B1 的行：

```
# If you remove a line here THAT COMMIT WILL BE LOST 
```

# windows-phone-7 - WP7：是否可以从安装页面/链接中获得推荐人？

> ID：14590096
> 
> 赞同：0
> 
> 时间：2013-01-29T18:51:14.963
> 
> 标签：windows-phone-7, installation, arguments, referrer

这个问题涉及编程和建筑主题。首先，很抱歉，如果之前有人问过这个问题，或者以其他方式或其他方式。我只是没有找到任何与我的问题相匹配的东西。

* * *

开始了。假设您已经开发了一个 WP**应用程序**并将其上传到 Windows 应用商店。现在假设您有一个名为**“any_dynamic_name_that_can_change.php”**的网页，其中包含一个将您重定向到 Windows 应用商店**应用**页面的按钮。现在，从应用程序（在您的设备上安装它之后），您想知道访问 Windows 应用商店的页面名称。

* * *

我已经检查了 WP 文档，并且我完全清楚 WP SDK 没有任何功能可以让我们实现这种行为。在 android SDK 中，可以利用**[Referrer/BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)**功能通过您的页面和 Google Play 传递参数。我已经在我的 Android 应用程序版本中成功了。

* * *

我的问题是：是否有解决方案来实施这种**“了解”**行为？我不在乎它是否涉及使用第三系统或在某处保存参数，或者即使解决方案是“难以完成”的任务。我只是在寻找它，如果它存在...

非常欢迎任何提示、评论和答案！对不起，如果我的问题没有得到很好的解释，或者它太宽泛了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:09:20.193

不幸的是，Windows Phone 商店不提供此功能，也无法提供实现此功能所需的信息。

您可以做的最接近的事情是查看对带有链接的页面的请求的 IP 地址以及来自应用程序的第一个请求。显然，这不是一个完美的解决方案有很多原因，但总比没有好。

唯一的其他解决方案是让查看页面的人和应用程序提供唯一标识符，例如他们的凭据。

另一种方法是跟踪单个页面上的点击。一旦用户进入商店，它就无法告诉您转化情况，但它可以告诉您哪些页面是商店中用户访问您应用程序的最大驱动力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T16:53:23.647

有一种不那么复杂的方法可以做到这一点。

**要求：**

*   将协议处理程序注册到您的应用程序中，例如 myappname:// 或类似的。

**跟踪安装引荐来源网址的大流程是：**

1 - 将用户重定向到您的站点到设备系统浏览器[http://mysite.com/start_tracking](http://mysite.com/start_tracking)

2 - 在该页面中添加 cookie 以跟踪源页面

3 - 然后将用户重定向到 windows phone 市场安装页面

4 - **安装过程**（这注册协议处理程序myappname：//）

5 - 在您的原生应用程序首次启动时，您需要使用[http://mysite.com/referrer_2_app](http://mysite.com/referrer_2_app)位置打开系统浏览器，然后系统浏览器将步骤 2 中存储的 cookie 信息发送到您的 Web 服务器。

6 - 然后你的 /referrer_2_app 将浏览器重定向到 myappname://cookievalue

7 - 这会自动重新打开您的本机应用程序并......

8 - 您可以读取 /cookivalue 并关闭您的跟踪

希望这张大图就足够了。

如果有人需要更多详细信息，请告诉我。

托比亚

# jquery - 选择器找到父兄弟（img_wrap img）

> ID：14590100
> 
> 赞同：0
> 
> 时间：2013-01-29T18:51:23.743
> 
> 标签：jquery

下面的代码尝试让 btn mousedown 找到父兄弟姐妹（img_wp）img，但它不起作用。我的代码在某个地方错了？

```
$('.btn').mousedown(function(e){
    var target_img = $(e.target).parent().closest('.img_wp img');
    var target_img_w = target_img.width();
    var target_img_h = target_img.height();
    console.log(target_img_w + target_img_h);
});

<div class=\"wp\">
    <div class="img_wp">
        <img>
    </div>
    <div class="btn_wp">
        <div class="btn"></div>
    </div>
</div>
 <div class=\"wp\">
    <div class="img_wp">
        <img>
    </div>
    <div class="btn_wp">
        <div class="btn"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:53:12.640

`.closest()`使用匹配的选择器查找最近的祖先。由于您的按钮的父级没有`img`祖先，因此您的选择器返回一个空集。

* * *

改用这个：

```
var target_img = $(this).closest('.wp').find('img'); 
```

# eclipse - Tomcat 7 未在 Eclipse Juno 中正确设置

> ID：14590101
> 
> 赞同：0
> 
> 时间：2013-01-29T18:51:26.293
> 
> 标签：eclipse, tomcat7

![在此处输入图像描述](../Images/c1096a621a14840ae2ea75fefab45b60.png)

我从 Apache 的网站下载了[32 位 Windows zip 。](http://apache.techartifact.com/mirror/tomcat/tomcat-7/v7.0.35/bin/apache-tomcat-7.0.35-windows-x86.zip)
然后我提取了内容并将其放在我的`Program Files`文件夹中，其中`Eclipse`也存在 's extract。

然后我启动 Eclipse，使用`Servers`选项卡设置服务器，启动它。
我明白了：
![在此处输入图像描述](../Images/0013ab7206becd3a52ff91ebf0ba0d8b.png)

`http://localhost:8080`但是，当我在 Chrome 中尝试时，出现 404 错误。
我哪里做错了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:36:42.577

即使我面临着上面讨论的同样问题。我无法运行任何应用程序，包括带有索引文件的 servlet 应用程序。

我在一些网站上找到了以下提到的信息..

“Eclipse 在 Eclipse 工作区中创建 Tomcat 文件夹时忘记复制默认应用程序（ROOT、示例等）。转到 C:\apache-tomcat-7.0.34\webapps，R-单击 ROOT 文件夹并复制它。然后转到您的 Eclipse 工作区，转到 .metadata 文件夹，然后搜索“wtpwebapps”。您应该会找到类似 your-eclipse-workspace.metadata.plugins\org.eclipse.wst.server.core\tmp0 的内容\wtpwebapps（或.../tmp1/wtpwebapps，如果您已经在 Eclipse 中注册了另一台服务器）。转到 wtpwebapps 文件夹，单击鼠标右键，然后粘贴 ROOT（如果询问您是否要合并/替换文件夹，请说“是” /文件）。”

但问题是 temp0 文件夹是空的，我无法找到部署路径，即 wtpwebapps。如果有人遇到同样的问题并提出解决方案，请告诉我..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:55:10.203

您的设置确实有效。Tomcat 确实有效。你看到的404是tomcat给出的。

唯一的问题是，您没有放置任何索引文件……您的 servlet 容器需要一些内容！

# javascript - 防止在背景更改时滚动到顶部

> ID：14590102
> 
> 赞同：0
> 
> 时间：2013-01-29T18:51:31.423
> 
> 标签：javascript, jquery, html

我有一些带有背景图像的 div 层。我想用

```
$("#button").click(function() { 
  $('#div1').css("background-image", "url(images/newBG.jpg)");
}); 
```

这很好用。问题是，当我单击按钮时，浏览器会跳到顶部！我想防止这种情况发生，这意味着滚动与以前的位置相同！

任何帮助将不胜感激。谢谢特德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:54:42.637

返回 false 以防止默认操作

```
$("#button").click(function() { 
  $('#div1').css("background-image", "url(images/newBG.jpg)");
  return false;
}); 
```

# php - PHP array_chunk 和每页限制

> ID：14590109
> 
> 赞同：0
> 
> 时间：2013-01-29T18:51:50.507
> 
> 标签：php, multidimensional-array, foreach

我需要有一个像这个例子这样的代码。我需要每里限制 3 个类别。

```
<ul>
   <li>
      <div> Categpry 1 </div>
      <div> Category 2 </div>
      <div> Category 3 </div>
   </li>
   <li>
      <div> Categpry 4 </div>
      <div> Category 5 </div>
      <div> Category 6 </div>
   </li>
   <li>
      <div> Categpry y </div>
   </li>
</ul> 
```

第 1 页 -> 类别 1 [项目列表]、类别 2 [项目列表]、类别 3 [项目列表]

第 2 页 -> 类别 4 [项目列表]、类别 5 [项目列表]、类别 6 [项目列表]

页 x -> 类别 y [项目列表]。

```
<?php
$category = array(
   array('category_name' => 'Category1', 'channel_name' => 'Item 1'),
   array('category_name' => 'Category3', 'channel_name' => 'Item 2'),
   array('category_name' => 'Category1', 'channel_name' => 'Item 2'),
   array('category_name' => 'Category3', 'channel_name' => 'Item 1'),
   array('category_name' => 'Category2', 'channel_name' => 'Item 2'),
   array('category_name' => 'Category4', 'channel_name' => 'Item 4'),
   array('category_name' => 'Category5', 'channel_name' => 'Item 5'),
   array('category_name' => 'Category1', 'channel_name' => 'Item 6'),
   array('category_name' => 'Category3', 'channel_name' => 'Item 7'),
   array('category_name' => 'Category2', 'channel_name' => 'Item 8'),
   array('category_name' => 'Category4', 'channel_name' => 'Item 8'),
   array('category_name' => 'Category3', 'channel_name' => 'Item 3'),
   array('category_name' => 'Category5', 'channel_name' => 'Item 4'),
   array('category_name' => 'Category6', 'channel_name' => 'Item 2'),
   array('category_name' => 'Category2', 'channel_name' => 'Item 5'),
   array('category_name' => 'Category2', 'channel_name' => 'Item 7')
);
$newOptions = array();
  $i=1;
    foreach ($category as $option) {
      $cname = $option['category_name'];
      $itemname = $option['channel_name'];

      $newOptions[$cname][$i] = $itemname;
 $i++;
    }
?> 
```

PHP array_chunk() 不能帮助我，或者我不能正确使用它。

我怎样才能让这段代码像在上面一样。

如果您有建议，请帮助我。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:10:04.393

```
$pagesize = 3;

$category_pages = array_chunk($category, $pagesize);

echo "<ul>\n";
foreach ($category_pages as $page) {
    echo "\t<li>\n";
    foreach ($page as $category) {
        echo "\t\t<div> ", htmlspecialchars($category['category_name'], ENT_NOQUOTES, 'UTF-8'), " </div>\n";
    }
    echo "\t</li>\n";
}
echo "</ul>\n"; 
```

# r - 如何控制gridExtra中的绘图宽度？

> ID：14590111
> 
> 赞同：8
> 
> 时间：2013-01-29T18:51:54.943
> 
> 标签：r, ggplot2, gridextra

> **可能重复：**
> [左对齐两个图形边缘（ggplot）](https://stackoverflow.com/questions/13294952/left-align-two-graph-edges-ggplot)

我试图将生成的两个图`ggplot`放在同一页面上，顶部和底部，以使它们的宽度相同。数据来自相同的时间序列，x 轴是时间，因此具有相同时间的数据点不会相对于彼此水平移动，这一点很重要。我`grid.arrange`从包 gridExtra 中尝试过：

```
grid.arrange(p1, p2) 
```

但由于 y 轴标签的宽度不同，这些图的宽度也不同。我查看了处理类似问题的[这篇文章](https://stackoverflow.com/questions/11606441/ggplot2-gridextra-how-to-ensure-geom-bar-in-different-size-plot-grobs-result)，但我无法应用该信息来解决我的问题。

![在此处输入图像描述](../Images/34014393cd0e2186490abfec6c7679cf.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T19:12:48.503

的帮助文本`grid.arrange`说：

```
Arguments:

     ...: plots of class ggplot2, trellis, or grobs, and valid
          arguments to grid.layout 
```

所以阅读`grid.layout`导致：

```
Arguments:

    nrow: An integer describing the number of rows in the layout.

    ncol: An integer describing the number of columns in the layout.

  widths: A numeric vector or unit object describing the widths of the
          columns in the layout.

 heights: A numeric vector or unit object describing the heights of the
          rows in the layout. 
```

换句话说，您可以将宽度和高度作为向量传递。 `grid.arrange(p1, p2, heights=c(1, 2)`. 或者举个例子：

```
dat <- data.frame(x=1:10, y=10:1)
q1 <- qplot(x, y, data=dat)
q2 <- qplot(y, x, data=dat)
q3 <- qplot(x, y, data=dat, geom='line')
q4 <- qplot(y, x, data=dat, geom='line')

grid.arrange(q1, q2, q3, q4, heights=1:2, widths=1:2) 
```

还值得一提的是，通常可以使用`melt`from `reshape2`package 和`facet_wrap`or `facet_grid`in来实现类似的效果`ggplot2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T01:43:18.140

根据我的评论（以及@Justin 答案中间的评论）`facet_wrap`可能是要走的路。它会生成如下图所示的内容。显然，您需要考虑颜色、图例以及因素的顺序，但您可以看到一般方法。代码如下图。

![截屏](../Images/091796825c4db52ab110d5bde6701e95.png)

```
library(ggplot2)
library(reshape)

mydf <- data.frame(day = 1:10,
                   upper1 = runif(10, 10000, 20000),
                   upper2 = runif(10, 15000, 16000),
                   lower1 = runif(10, 1, 10),
                   lower2 = runif(10, 3, 8))

mydf.melt <- melt(mydf, id.var = 'day')
mydf.melt$grouping <- ifelse(mydf.melt$value >= 10000, "upper", "lower")

ggplot(mydf.melt, aes(x = day, y = value, group = variable)) +
       geom_line() +
       facet_wrap(~ grouping, ncol = 1, scales = "free_y") 
```

# ruby-on-rails - 按最新评论或最新主题排序

> ID：14590114
> 
> 赞同：1
> 
> 时间：2013-01-29T18:51:59.543
> 
> 标签：ruby-on-rails, join

我成功地实现了一个查询以在索引中显示主题，按最近的评论排序：

```
Topic.joins(:comments).
      select('topics.*, max(comments.created_at) as last_comment').
      group('topics.id').
      order('last_comment desc') 
```

然而，这引入了另一个问题。新主题现在出现在列表底部。

有没有办法在查询中包含或加入主题 created_at 日期以及评论 created_at 日期？是`flatten`正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-10T13:51:38.753

我可以建议你使用

```
Topic.joins(:comments).order('comments.created_at desc') 
```

在这种情况下，您的主题将按最新评论日期排序

# php - 无法让 jQuery-Cascade 生成第二个下拉列表

> ID：14590120
> 
> 赞同：0
> 
> 时间：2013-01-29T18:52:25.507
> 
> 标签：php, jquery-plugins, drop-down-menu, yii, yii-extensions

我在谷歌、论坛和文档上努力搜索，试图避免在这里提问，但我找不到解决方案。

我已经安装了[jQuery-Cascade Extension](http://www.yiiframework.com/extension/jquery-cascade/ "http://www.yiiframework.com/extension/jquery-cascade/")。

在我的视图中

```
<?php
    $divipola = $this->createWidget('ext.jquery-cascade.jQueryCascade');

// dropDownList($id, $selected, $data, $htmlOptions = array(), $source, $cascaded)
    echo $divipola->dropDownList('depto_dane',
            '', 
            CHtml::listData(Codigodane::model()->findAll(), 'depto_dane', 'depto_dane'),
            '', 
            CController::createUrl('codigodane/list'), 
            'muni_dane'.
            ''
    );
                echo Yii::trace(CVarDumper::dumpAsString($divipola), 'vardump');

    ?> 
```

在控制器中：

```
public function actionList() {
        echo Yii::trace(CVarDumper::dumpAsString('Entrando a actionList'), 'vardump');
        if (Yii::app()->request->isAjaxRequest) {
            $queryvar = "";
            $queryvar.="depto_dane='";
            $queryvar.=$_GET['selected'];
            $queryvar.="'";
            $registro = Codigodane::model()->findAll($queryvar);
            $munis = array();
            echo Yii::trace(CVarDumper::dumpAsString($registro), 'vardump');

            foreach ($registro as $muni) {
                echo Yii::trace(CVarDumper::dumpAsString($muni), 'vardump');

                $munis[] = array('label' => $muni->muni_dane, 'value' => $muni->codigodane);
            }

            echo json_encode($munis);
            Yii::app()->end();
        } else {
            throw new CHttpException(400, 'Invalid request.');
        }
    } 
```

代码似乎运行良好，第一个下拉列表完美呈现，当我选择一个选项时，它成功地从模型中检索了一个数组，完全符合我的需要（我可以在 firebug 中看到）：

```
[{"label":"FLORENCIA","value":"18001"},{"label":"ALBANIA","value":"18029"},{"label":"BELEN DE LOS ANDAQUIES","value":"18094"},{"label":"CARTAGENA DEL CHAIRA","value":"18150"},{"label":"CURILLO","value":"18205"},{"label":"EL DONCELLO","value":"18247"},{"label":"EL PAUJIL","value":"18256"},{"label":"MONTA\u00d1ITA","value":"18410"},{"label":"MILAN","value":"18460"},{"label":"MORELIA","value":"18479"},{"label":"PUERTO RICO","value":"18592"},{"label":"SAN JOSE DEL FRAGUA","value":"18610"},{"label":"SAN VICENTE DEL CAGUAN","value":"18753"},{"label":"SOLANO","value":"18756"},{"label":"SOLITA","value":"18785"},{"label":"VALPARAISO","value":"18860"}] 
```

我不知道如何使用这个数组来创建另一个下拉列表，或者（我认为）扩展是否应该创建另一个 ID 为“muni_dane”的下拉列表。

难道我做错了什么？或者我错过了文档中的一些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:10:47.050

您必须创建一个空的下拉列表。扩展程序不会自己创建一个。将以下代码添加到您的视图中

```
echo CHtml::dropDownList('muni_dane','',array(),array('id'=>'muni_dane')); 
```

# c++ - 如何在 ZMQ 中实现 (X)PUB/(X)SUB 消息的代理/代理？

> ID：14590122
> 
> 赞同：12
> 
> 时间：2013-01-29T18:52:33.187
> 
> 标签：c++, message-queue, zeromq

所以我正在阅读[这篇](http://www.zeromq.org/whitepapers:0mq-3-0-pubsub)关于如何在 ZMQ 中为 ( `X`) `PUB`/( `X`)`SUB`消息传递创建代理/代理的文章。有这样一张漂亮的图片，描绘了建筑应该是什么样子：

![数据流：用户码->PUB->XSUB->用户码->XPUB->SUB->用户码； 订阅流程：用户代码 <- PUB <- XSUB <- 用户代码 <- XPUB <- SUB <- 用户代码；](../Images/410e273d67cbd351c6149f8c191b0f3d.png)

但是当我查看[`XSUB`套接字描述](http://api.zeromq.org/3-1:zmq-socket#toc12)时，我不知道如何通过它转发所有订阅，因为它`Outgoing routing strategy`是 `N/A`

那么如何在 ZeroMQ 中实现（取消）订阅转发，这种转发应用程序的最小用户代码是什么（可以插入简单的[发布](http://zguide.zeromq.org/cpp:psenvpub)者和[订阅者](http://zguide.zeromq.org/cpp:psenvsub)样本之间的代码）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T21:21:12.070

XPUB 确实接收消息——它接收的唯一消息是来自已连接订阅者的订阅，并且这些消息应该通过 XSUB 按原样向上游转发。

中继消息的最简单方法是使用[zmq_proxy](http://api.zeromq.org/3-2%3azmq-proxy)：

```
xpub = ctx.socket(zmq.XPUB)
xpub.bind(xpub_url)
xsub = ctx.socket(zmq.XSUB)
xsub.bind(xsub_url)
pub = ctx.socket(zmq.PUB)
pub.bind(pub_url)
zmq.proxy(xpub, xsub, pub) 
```

它将向/从 xpub 和 xsub 中继消息。或者，您可以添加一个 PUB 套接字来监控通过任一方向的流量。

如果您希望中间的用户代码实现额外的路由逻辑，您可以执行以下操作，重新实现内部循环`zmq_proxy`：

```
def broker(ctx):
    xpub = ctx.socket(zmq.XPUB)
    xpub.bind(xpub_url)
    xsub = ctx.socket(zmq.XSUB)
    xsub.bind(xsub_url)

    poller = zmq.Poller()
    poller.register(xpub, zmq.POLLIN)
    poller.register(xsub, zmq.POLLIN)
    while True:
        events = dict(poller.poll(1000))
        if xpub in events:
            message = xpub.recv_multipart()
            print "[BROKER] subscription message: %r" % message[0]
            xsub.send_multipart(message)
        if xsub in events:
            message = xsub.recv_multipart()
            # print "publishing message: %r" % message
            xpub.send_multipart(message)

        # insert user code here 
```

[完整的工作（Python）示例](https://gist.github.com/4667957)

# r - 使用 ddply 排除某些列中的重复值

> ID：14590127
> 
> 赞同：4
> 
> 时间：2013-01-29T18:52:48.723
> 
> 标签：r, duplicates, plyr

我有一个具有以下结构的数据框：

```
> dftest
       element seqnames     start       end  width strand tx_id   tx_name
1            1    chr19  58858172  58864865   6694      - 36769 NM_130786
2           10     chr8  18248755  18258723   9969      + 16614 NM_000015
3          100    chr20  43248163  43280376  32214      - 37719 NM_000022
4         1000    chr18  25530930  25757445 226516      - 33839 NM_001792
5        10000     chr1 243651535 244006584 355050      -  4182 NM_181690
6        10000     chr1 243663021 244006584 343564      -  4183 NM_005465
1316 100302285    chr12  12264886  12264967     82      + 24050 NR_036052
1317 100302285    chr12   9392066   9392147     82      - 25034 NR_036052
1318 100302285     chr2 232578024 232578105     82      +  5491 NR_036052
1319 100302285     chr5 118310281 118310362     82      + 11128 NR_036052 
```

作为中间步骤，我试图摆脱不止一次出现但具有不同“seqnames”的元素，例如“100302285”。将保留元素“10000”，因为所有“seqnames”都是相同的。只出现一次的元素也会被保留。这是所需的输出：

```
> dftest
       element seqnames     start       end  width strand tx_id   tx_name
1            1    chr19  58858172  58864865   6694      - 36769 NM_130786
2           10     chr8  18248755  18258723   9969      + 16614 NM_000015
3          100    chr20  43248163  43280376  32214      - 37719 NM_000022
4         1000    chr18  25530930  25757445 226516      - 33839 NM_001792
5        10000     chr1 243651535 244006584 355050      -  4182 NM_181690
6        10000     chr1 243663021 244006584 343564      -  4183 NM_005465 
```

到目前为止，我已经使用 ddply 和自定义函数来包含重复项：

```
subChr <- function(df)
{
    df[duplicated(df$seqnames),]
}

ddply(df, .(element), subChr) 
```

但结果远非预期 - 愚蠢的我，它不可能那么简单：

```
 element seqnames     start       end  width strand tx_id   tx_name
1     10000     chr1 243663021 244006584 343564      -  4183 NM_005465
2 100302285    chr12   9392066   9392147     82      - 25034 NR_036052 
```

由于这是另一个 ddply 之前的一步，因此我会很高兴有一个**替代解决方案**可以做到这一点：

```
ddply(df, .(element), summarize, chromosome=seqnames[1], gene_start=min(start), gene_end=max(end), strand=strand[1])

    element chromosome gene_start  gene_end strand
1         1      chr19   58858172  58864865      -
2        10       chr8   18248755  18258723      +
3       100      chr20   43248163  43280376      -
4      1000      chr18   25530930  25757445      -
5     10000       chr1  243651535 244006584      -
6 100302285      chr12    9392066 232578105      + 
```

但总结了每个“seqnames”的元素“100302285”：

```
 element chromosome gene_start  gene_end strand
1         1      chr19   58858172  58864865      -
2        10       chr8   18248755  18258723      +
3       100      chr20   43248163  43280376      -
4      1000      chr18   25530930  25757445      -
5     10000       chr1  243651535 244006584      -
6 100302285      chr12    9392066  12264967      +
7 100302285       chr2  232578024 232578105      +
8 100302285       chr5  118310281 118310362      + 
```

如果有意义的话，基本上用 .element 和 .seqname 进行总结。我一直在寻找答案一段时间，但进展不大。

测试数据：

```
dftest <- structure(list(element = c("1", "10", "100", "1000", "10000", 
"10000", "100302285", "100302285", "100302285", "100302285"), 
    seqnames = c("chr19", "chr8", "chr20", "chr18", "chr1", "chr1", 
    "chr12", "chr12", "chr2", "chr5"), start = c(58858172L, 18248755L, 
    43248163L, 25530930L, 243651535L, 243663021L, 12264886L, 
    9392066L, 232578024L, 118310281L), end = c(58864865L, 18258723L, 
    43280376L, 25757445L, 244006584L, 244006584L, 12264967L, 
    9392147L, 232578105L, 118310362L), width = c(6694L, 9969L, 
    32214L, 226516L, 355050L, 343564L, 82L, 82L, 82L, 82L), strand = c("-", 
    "+", "-", "-", "-", "-", "+", "-", "+", "+"), tx_id = c(36769L, 
    16614L, 37719L, 33839L, 4182L, 4183L, 24050L, 25034L, 5491L, 
    11128L), tx_name = c("NM_130786", "NM_000015", "NM_000022", 
    "NM_001792", "NM_181690", "NM_005465", "NR_036052", "NR_036052", 
    "NR_036052", "NR_036052")), .Names = c("element", "seqnames", 
"start", "end", "width", "strand", "tx_id", "tx_name"), class = "data.frame", row.names = c(1L, 
2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T19:05:15.080

回答您的第一个问题：如果您愿意，这里有一个`data.table`解决方案：

```
require(data.table)
dt <- data.table(dftest, key="element")
dt.out <- dt[, .SD[length(table(seqnames)) == 1],by=c("element")]
> dt.out

#    element seqnames     start       end  width strand tx_id   tx_name
# 1:       1    chr19  58858172  58864865   6694      - 36769 NM_130786
# 2:      10     chr8  18248755  18258723   9969      + 16614 NM_000015
# 3:     100    chr20  43248163  43280376  32214      - 37719 NM_000022
# 4:    1000    chr18  25530930  25757445 226516      - 33839 NM_001792
# 5:   10000     chr1 243651535 244006584 355050      -  4182 NM_181690
# 6:   10000     chr1 243663021 244006584 343564      -  4183 NM_005465 
```

如果您更喜欢`plyr`解决方案：

```
require(plyr)
out <- ddply(dftest, .(element), function(x) {
    if( length(table(x$seqnames)) == 1) {
        x
    }
})

#   element seqnames     start       end  width strand tx_id   tx_name
# 1       1    chr19  58858172  58864865   6694      - 36769 NM_130786
# 2      10     chr8  18248755  18258723   9969      + 16614 NM_000015
# 3     100    chr20  43248163  43280376  32214      - 37719 NM_000022
# 4    1000    chr18  25530930  25757445 226516      - 33839 NM_001792
# 5   10000     chr1 243651535 244006584 355050      -  4182 NM_181690
# 6   10000     chr1 243663021 244006584 343564      -  4183 NM_005465 
```

**编辑：**对于您的第二个问题，基本上，除了旧的解决方案之外，您只想在不满足第一个条件时返回第一行。

`plyr`解决方案：（不带`summarise`）

```
out <- ddply(dftest, .(element), function(x) {
    if (length(table(x$seqnames)) == 1) {
        x
    } else {
        x[1, ]
    }
})

> out
#     element seqnames     start       end  width strand tx_id   tx_name
# 1         1    chr19  58858172  58864865   6694      - 36769 NM_130786
# 2        10     chr8  18248755  18258723   9969      + 16614 NM_000015
# 3       100    chr20  43248163  43280376  32214      - 37719 NM_000022
# 4      1000    chr18  25530930  25757445 226516      - 33839 NM_001792
# 5     10000     chr1 243651535 244006584 355050      -  4182 NM_181690
# 6     10000     chr1 243663021 244006584 343564      -  4183 NM_005465
# 7 100302285    chr12  12264886  12264967     82      + 24050 NR_036052 
```

`data.table`解决方案。

```
dt <- data.table(dftest, key="element")
dt[, .SD[(if(length(table(seqnames)) == 1) seq_len(.N) else 1)], by = element]

> dt.out
#      element seqnames     start       end  width strand tx_id   tx_name
# 1:         1    chr19  58858172  58864865   6694      - 36769 NM_130786
# 2:        10     chr8  18248755  18258723   9969      + 16614 NM_000015
# 3:       100    chr20  43248163  43280376  32214      - 37719 NM_000022
# 4:      1000    chr18  25530930  25757445 226516      - 33839 NM_001792
# 5:     10000     chr1 243651535 244006584 355050      -  4182 NM_181690
# 6:     10000     chr1 243663021 244006584 343564      -  4183 NM_005465
# 7: 100302285    chr12  12264886  12264967     82      + 24050 NR_036052 
```

# excel - 列表的 SharePoint 数据表视图中的数字问题

> ID：14590132
> 
> 赞同：0
> 
> 时间：2013-01-29T18:53:08.960
> 
> 标签：excel, sharepoint, sharepoint-2010, ms-office, excel-2010

当我在**数据表视图中看到***SharePoint (2010)*列表时，所有数字都用零填充，最多 14。因此 2 变为，因此 20 也变为 。**`200.000.000.000.000`**

 **我已经尝试修复我的办公室安装，但它没有帮助。

如果我将列表导出到***`Excel (2010)`***通过 iqy 查询文件，则会发生相同的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:02:37.253

导航到[列表设置](http://office.microsoft.com/en-gb/sharepoint-server-help/create-change-or-delete-a-column-in-a-list-or-library-HA101782518.aspx)并将有问题的[列类型](http://office.microsoft.com/en-gb/sharepoint-server-help/create-change-or-delete-a-column-in-a-list-or-library-HA101782518.aspx)设置更改为[数字](http://office.microsoft.com/en-gb/sharepoint-server-help/site-column-types-and-options-HA010302196.aspx#_Toc277149824)，如果在列上启用，则删除“包括小数位”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:03:43.660

您是否为此列表启用了内容类型？

如果是，则禁用它并重试..

让我知道结果

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T04:48:52.297

事实证明，这与 Windows 语言设置有关：

“控制面板 -> 区域和语言 -> 格式选项卡”并相应地更改顶部下拉列表中的格式解决了问题。

我不确定这是否必须与您的 SharePoint 或本地办公室安装语言设置相同，但稍微修正了一下。**

# php - 字符串操作：找到第一次出现的模式

> ID：14590135
> 
> 赞同：-1
> 
> 时间：2013-01-29T18:53:12.700
> 
> 标签：php, regex

我有一些以标签结尾的文本`[br]`，可选地后跟更多`[br]`标签和/或空白字符，但仅此而已。例如：

```
bla blah d [br] fkjd fkdh fkd fks
sdkf skdfh djfh[br]
[br]
[br] 
```

我想在该`[br]`标签之前插入文本，如下所示：

```
bla blah d [br] fkjd fkdh fkd fks
sdkf skdfh djfh [INSERTED TEXT][br]
[br]
[br] 
```

`[br]`我的问题是，我不知道会有多少额外的标签或空白字符。

有没有一种简单的方法可以在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:00:32.383

[preg_replace](http://php.net/preg_replace)怎么样？

```
preg_replace('!\[br\](\s+\[br\])+!i', 'INSERT$0', $subject); 
```

正则表达式正在寻找一个`[br]`标签，然后是一些空格，以及更多的`[br]`标签。可以有任意数量的以下`[br]`标签。末尾的 i 表示不区分大小写。

[您可以在键盘](http://codepad.org/SnaRQhH5)上查看此运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:00:51.943

我会使用[`strpos`](http://php.net/manual/en/function.strpos.php)and [`substr`](http://php.net/manual/en/function.substr.php)。

基本上，你会想做这样的事情：

```
$str = 'bla blah dfkjd fkdh fkd fks sdkf skdfh djfh[br] [BR] [BR]';

$textToFind = '[br]';

$textToInsert = 'Hello World!';

// find the first $textToFind, ie '[br]';
$pos = strpos($str, $textToFind);

// cut from 0 to $pos, then insert the text, then $pos to the end of the string
$newStr = substr($str, 0, $pos) . $textToInsert . substr($str, $pos);

echo $newStr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:15:33.570

好吧，我不是 php 的人，但知道一些 javescript。它可能会帮助您了解如何解决您的问题。

```
str = str.replace(/(.*?)((<br>)*)$/,'$1' + insertedText + '$2') 
```

这`str`是包含您的文本的字符串。replace 函数的第一个参数`/(.*?)((<br>)*)$/`是匹配模式的正则表达式。 `(.*?)`匹配出现在`<br>`标签之前的文本。`((<br>)*)$`匹配任意数量`<br>`并确保它们`<br>`出现在文本的末尾。
第二个参数是实际替换的字符串。`insertedText`是要在原始字符串中插入的文本。

希望能帮助到你。如果您需要任何澄清，请随时发表评论。

# mysql - 具有多个表 JOIN 的 SQL SELECT DISTINCT 性能

> ID：14590139
> 
> 赞同：2
> 
> 时间：2013-01-29T18:53:22.570
> 
> 标签：mysql, performance, indexing, distinct, inner-join

我正在建立一个包含大学课程信息的数据库。每门课程都可以关联

*   一位或多位作者
*   一门或多门学科
*   一个或多个机构
*   一层或多层

我的数据库包含以下表格：

*   课程（cou_id、cou_name、cou_number、cou_year、cou_term）
*   作者（aut_id，aut_last）
*   纪律（dis_id，dis_name）
*   机构（ins_id、ins_name、ins_classification）
*   级别（lev_id，lev_name）
*   authorcourse（链接表）
*   coursediscipline（链接表）
*   courseinstitution（链接表）
*   courselevel（链接表）

为了从数据库中检索所有课程（以及相应的作者、学科、机构和水平信息），我使用以下查询：

```
SELECT DISTINCT aut_last, c.cou_id, cou_name, cou_number, cou_year, cou_term, dis_name, ins_name, ins_classification, lev_name
    FROM authorcourse ac1
    INNER JOIN authorcourse ac2        
    ON ac1.cou_id = ac2.cou_id        
    INNER JOIN author a
    ON ac2.aut_id=a.aut_id
    INNER JOIN course c
    ON ac2.cou_id = c.cou_id
    INNER JOIN coursediscipline cd1
    ON ac2.cou_id = cd1.cou_id
    INNER JOIN coursediscipline cd2
    ON cd1.cou_id = cd2.cou_id
    INNER JOIN discipline d
    ON cd2.dis_id = d.dis_id
    INNER JOIN courseinstitution ci1
    ON ac2.cou_id = ci1.cou_id
    INNER JOIN courseinstitution ci2
    ON ci1.cou_id = ci2.cou_id
    INNER JOIN institution i
    ON ci2.ins_id = i.ins_id
    INNER JOIN courselevel cl1
    ON ac2.cou_id = cl1.cou_id
    INNER JOIN courselevel cl2
    ON cl1.cou_id = cl2.cou_id
    INNER JOIN level l
    ON cl2.lev_id = l.lev_id 
```

当数据库中有 15 门课程具有“简单”关系时，此查询效果很好。例如：

```
 cou_name = 'course1', cou_number = 'C1', cou_year = '1999', cou_term = 'summer'
 aut_last = 'Doe1'
 dis_name = 'discipline1'
 ins_name = 'institution1', ins_classification = 'classification1'
 lev_name = 'level1' 
```

--> 显示第 0 - 14 行（总共 15 行，查询耗时 0.0118 秒）EXPLAIN 生成下表：

```
id select_type table type   possible_keys          key     key_len ref             rows Extra
1  SIMPLE      ac1   index  cou_id                 aut_id  2       NULL            15   Using index; Using  temporary
1  SIMPLE      ac2   ref    PRIMARY,aut_id,cou_id  cou_id  2       ccdb.ac1.cou_id 1    Using index
1  SIMPLE      a     eq_ref PRIMARY                PRIMARY 2       ccdb.ac2.aut_id 1    
1  SIMPLE      c     eq_ref PRIMARY                PRIMARY 2       ccdb.ac2.cou_id 1    Using where
1  SIMPLE      cd1   ref    PRIMARY,cou_id         PRIMARY 2       ccdb.ac1.cou_id 1    Using index
1  SIMPLE      cd2   ref    PRIMARY,cou_id,dis_id  PRIMARY 2       ccdb.ac2.cou_id 1    Using where; Using index
1  SIMPLE      d     eq_ref PRIMARY                PRIMARY 2       ccdb.cd2.dis_id 1    
1  SIMPLE      ci1   ref    PRIMARY,cou_id         PRIMARY 2       ccdb.ac2.cou_id 1    Using where; Using index
1  SIMPLE      ci2   ref    PRIMARY,cou_id,ins_id  PRIMARY 2       ccdb.ac2.cou_id 1    Using where; Using index
1  SIMPLE      i     eq_ref PRIMARY                PRIMARY 2       ccdb.ci2.ins_id 1    
1  SIMPLE      cl1   ref    PRIMARY,cou_id         PRIMARY 2       ccdb.cd1.cou_id 1    Using where; Using index
1  SIMPLE      cl2   ref    PRIMARY,cou_id,lev_id  PRIMARY 2       ccdb.cl1.cou_id 1    Using where; Using index
1  SIMPLE      l     eq_ref PRIMARY                PRIMARY 2       ccdb.cl2.lev_id 1 
```

**问题：**当有 15 门课程具有多个关系时，性能会急剧下降。示例课程：

```
cou_name = 'course1', cou_number = 'C1', cou_year = '1999', cou_term = 'summer'
aut_last = 'Doe1', 'Doe', 'Doe3', 'Doe4'
dis_name = 'discipline1', 'discipline2', 'discipline3', 'discipline4'
ins_name = 'institution1'(ins_classification = 'classification1'),     'institution2'(ins_classification = 'classification2'), 'institution3'(ins_classification =  'classification3'), 'institution4' (ins_classification = 'classification4')
lev_name = 'level1', 'level2', 'level3', 'level4' 
```

--> 显示第 0 - 29 行（总共 3,840 行，查询耗时 14.7039 秒）EXPLAIN 生成下表：

```
 id select_type table type   possible_keys         key     key_len ref             rows Extra
 1  SIMPLE      c     ALL    PRIMARY               NULL    NULL    NULL            15   Using temporary
 1  SIMPLE      ac1   ref    PRIMARY,aut_id,cou_id cou_id  2       ccdb.c.cou_id   2    Using index
 1  SIMPLE      a     eq_ref PRIMARY               PRIMARY 2       ccdb.ac1.aut_id 1    
 1  SIMPLE      ac2   ref    cou_id                cou_id  2       ccdb.c.cou_id   2    Using index
 1  SIMPLE      cd1   ref    PRIMARY,cou_id        cou_id  2       ccdb.ac1.cou_id 2    Using where; Using index
 1  SIMPLE      cd2   ref    PRIMARY,cou_id,dis_id cou_id  2       ccdb.c.cou_id   2    Using index
 1  SIMPLE      d     eq_ref PRIMARY               PRIMARY 2       ccdb.cd2.dis_id 1    
 1  SIMPLE      ci1   ref    PRIMARY,cou_id        cou_id  2       ccdb.ac1.cou_id 2    Using where; Using index
 1  SIMPLE      ci2   ref    PRIMARY,cou_id,ins_id cou_id  2       ccdb.ac2.cou_id 2    Using where; Using index
 1  SIMPLE      i     eq_ref PRIMARY               PRIMARY 2       ccdb.ci2.ins_id 1    
 1  SIMPLE      cl1   ref    PRIMARY,cou_id        cou_id  2       ccdb.c.cou_id   2    Using index
 1  SIMPLE      cl2   ref    PRIMARY,cou_id,lev_id cou_id  2       ccdb.ci2.cou_id 2    Using where; Using index
 1  SIMPLE      l     eq_ref PRIMARY               PRIMARY 2       ccdb.cl2.lev_id 1 
```

通过我的 PHP 网站运行时，我收到以下错误“致命错误：超过 30 秒的最大执行时间……”</p>

**问题**：我怎样才能加快这个查询？我尝试了几种不同的连接组合，并且（如您在 EXPLAIN 结果中所见）我为我认为可能相关的所有列编制了索引。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:10:21.090

IT 在我看来，好像您为“课程视图”类型的详细信息页面提取了所有这些数据？

如果是这样，我会说，一旦在数据库中制作了一门课程，作者、学科、机构和级别的数量多久会改变一次？

如果从那里设置的时间永远不会改变，那么当它被设置时，也将它设置在一个完全非规范化的表中，如下所示：

courseView (cou_id, cou_name, cou_number, cou_year, cou_term, **data** )

.. 在“数据”中，您只需放入所有数据的序列化数组。丑陋，但它会很快。

然后，当您通过 course id 搜索拉出一个时，您可以只搜索一行、一个索引并立即拉出所有数据。

..

此外，如果您要让人们按作者进行搜索，那么您仍然可以使用规范化表执行此操作，并像正常一样使用简单的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:32:51.260

您的查询中似乎有不必要的联接。我相信您可以通过执行以下操作获得相同的结果。它可能会提高您的查询的性能。

```
SELECT DISTINCT aut_last, c.cou_id, cou_name, cou_number, cou_year, cou_term, dis_name, ins_name, ins_classification, lev_name
    FROM authorcourse ac 
    INNER JOIN author a
    ON ac.aut_id=a.aut_id
    INNER JOIN course c
    ON ac.cou_id = c.cou_id
    INNER JOIN coursediscipline cd 
    ON ac.cou_id = cd.cou_id
    INNER JOIN discipline d
    ON cd.dis_id = d.dis_id
    INNER JOIN courseinstitution ci 
    ON ac.cou_id = ci.cou_id
    INNER JOIN institution i
    ON ci.ins_id = i.ins_id
    INNER JOIN courselevel cl 
    ON ac.cou_id = cl.cou_id
    INNER JOIN level l
    ON cl.lev_id = l.lev_id 
```

您对同一个表进行了冗余连接，但似乎没有完成任何工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:32:28.743

我不相信有足够的信息来彻底解决您的问题。通过查看您的解释语句，您似乎已经正确设置了所有索引，但是您所关注的行数。

罪魁祸首很可能是由于对一个非常大的表的表扫描与您获得的行数有关。根据我遇到这些问题时的经验，我确定了慢速发生的位置并从那里开始工作。使用的一些策略是临时表或子查询（将它们分解为更小、更易于管理的查询。

此外，为了摆脱 PHP 致命错误问题，您应该能够使用 try / catch 异常块来优雅地处理它。

# python - 为什么在 try/except 块中使用 Python 的“else”子句？

> ID：14590146
> 
> 赞同：6
> 
> 时间：2013-01-29T18:53:46.177
> 
> 标签：python, exception-handling, coding-style, idioms

> **可能重复：**
> [Python try-else](https://stackoverflow.com/questions/855759/python-try-else)

我没有看到它的好处，至少基于我刚刚在 Dive Into Python 中阅读的示例：

```
try:
    from EasyDialogs import AskPassword
except ImportError:
    getpass = default_getpass
else:
    getpass = AskPassword 
```

( [http://www.diveintopython.net/file_handling/index.html](http://www.diveintopython.net/file_handling/index.html) )

为什么你不能用更短/更简单的方式达到同样的效果：

```
try:
    from EasyDialogs import AskPassword
    getpass = AskPassword
except ImportError:
    getpass = default_getpass 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:01:43.433

该示例中没有任何优势，除了可能在样式方面。将可能导致异常的代码保留在处理它们的代码附近通常是一个好主意。例如，比较这些：

```
try:
    from EasyDialogs import AskPassword
    # 20 other lines
    getpass = AskPassword
except ImportError:
    getpass = default_getpass 
```

和

```
try:
    from EasyDialogs import AskPassword
except ImportError:
    getpass = default_getpass
else:
    # 20 other lines
    getpass = AskPassword 
```

第二个是好的，当`except`不能早点返回，或者重新抛出异常。如果可能的话，我会写：

```
try:
    from EasyDialogs import AskPassword
except ImportError:
    getpass = default_getpass
    return False // or throw Exception('something more descriptive')

# 20 other lines
getpass = AskPassword 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:04:35.483

我个人觉得在某些情况下更清楚。**当没有**发生异常时，自然应该运行更多的代码。所以在某种程度上你是在说：

```
try:
    this_very_dangerous_call()
except ValueError:
    # if it breaks
    handle_value_error()
else:
    continue_with_my_code()
    # more code 
```

因此，您在视觉上将异常处理代码与其余代码分开。这就像说：“试试这个，如果它中断了做某事，如果它没有[在此处插入长解释]”

# ruby-on-rails - 为什么在 Rails 中命名 YAML 本地化文件？

> ID：14590154
> 
> 赞同：1
> 
> 时间：2013-01-29T18:54:04.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, localization, ruby-on-rails-3.2, yaml

我正在本地化一个 Rails 应用程序，我想知道为什么人们这样做：

```
# de.yml
helpers:
  select:
    prompt: "Bitte wählen..."
  submit:
    create: "Erstellen"
    submit: "Speichern"
    update: "Aktualisieren"

# some_view.html.erb
f.submit t('helpers.submit.update') 
```

这似乎是标准的做法。

但为什么不这样做呢：

```
# de.yml
prompt: "Bitte wählen..."
create: "Erstellen"
submit: "Speichern"
update: "Aktualisieren"

# some_view.html.erb
f.submit t('update') 
```

无论如何，命名 YAML 文件的意义何在？它只是迫使我一直重复相同的路径（`helpers.submit.update`）。

我不明白...

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:04:44.840

原因很简单，在一个普通的 Rails 应用程序中，你可能有成百上千个不同的值。这些值可能具有相同的名称，但有细微的差别。如您所说，如果您只进入顶层，那么它们很容易变得模棱两可：您将不知道哪些标签属于哪些视图/模型。

想象一下：

`name_missing: "you must enter a name"`

如果您在 YAML 文件中看到它，您将不知道它是否用于产品名称、用户名或其他内容。因此，您必须搜索您的代码并查看它的使用位置。

鉴于，类似：

```
product:
  validation_errors:
    name_missing: "you must enter a name" 
```

是明确的。

看到一个巨大的字段树似乎很随意，但是在处理成千上万个标签和复制片段时，组织对于可维护性至关重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:25:19.050

如果我们撇开命名空间的需求来定位日期和活动记录消息、gem 和插件......在命名您自己的 i18n 数据时有许多优势，尤其是当应用程序变得复杂和/或随着时间的推移而发展时：

*   它允许您在特殊情况下更改键的翻译，例如，当您添加一种新语言时，例如创建消息时使用的单词与创建图片时使用的单词不同。
*   命名空间文件更容易翻译和维护（例如，您不必检查代码来查看是否所有出现的`create`都可以用`erstellen`其他语言翻译）。
    如果您聘请外部翻译，这一点变得更加重要。
*   一旦项目变大，导航大量的键并找到需要修改的键就更容易了。

另一方面，如果只有程序员接触 yaml 文件并且您的项目不大，我同意您的看法，请使用平面文件。在这种情况下，即使是像or这样的
假命名空间也可以具有这样的优势，即它们更容易在文本文件中定位，使用/等。`messages_create``pictures_create``grep``ack`

# c - 使用 System V 信号量实现条件变量

> ID：14590155
> 
> 赞同：3
> 
> 时间：2013-01-29T18:54:13.420
> 
> 标签：c, linux, ipc, semaphore

我正在尝试使用 System V 信号量来实现条件变量。为简单起见，我们假设一次只有一个进程可以等待一个条件变量。这个概念看起来很简单，所以看看我对互斥锁和条件变量包装器的实现，其中：

*   Mutex 是一个二进制信号量，1 代表空闲，0 代表锁定。
*   条件变量是一个二进制信号量，1 表示有人在等待它，否则为 0。

它是这样的：

```
//Sets value of 'num' semaphore from 'semid' semaphore set to be 'val'.
// Returns 0 on success and -1 on failure.
int set_value(int semid, int num, int val)
{
    union semun setval_semun;
    setval_semun.val = val;
    return semctl(semid, num, SETVAL, setval_semun);
}

// Returns the value of semaphore 'num' from 'semid' semaphore set
// or -1 on failure.
int get_value(int semid, int num)
{
    return semctl(semid, num, GETVAL);
}

// Locks 'mutex'. Returns 0 on success and 1 if 'mutex' is invalid.
// Returns -1 on other error.
int lock_mutex(int semid, int mutex)
{
    struct sembuf op;

    if (get_value(semid, mutex) > 1) return 1;

    op.sem_num  = mutex;
    op.sem_op   = -1;
    op.sem_flg  = 0;

    return semop(semid, &op, 1);
}

// Unlocks 'mutex'. Returns 0 on success and 1 ig the 'mutex' isn't locked.
// Returns -1 on different error.
int unlock_mutex(int semid, int mutex)
{
    struct sembuf op;

    if (get_value(semid, mutex) != 0) return 1;

    op.sem_num  = mutex;
    op.sem_op   = 1;
    op.sem_flg  = 0;

    return semop(semid, &op, 1);
}

// Waits on condition 'cond' and frees 'mutex'.
// Returns 0 on success and 1 if either some other process is waiting on 'cond'
// or 'mutex' is not locked. Returns -1 on other failure.
int wait_cond(int semid, int cond, int mutex)
{
    struct sembuf   ops[2];

    if (get_value(semid, cond) != 0 || get_value(semid, mutex) != 0)
        return 1;

    ops[0].sem_num  = cond;
    ops[0].sem_op   = 1;
    ops[0].sem_flg  = 0;

    semop(semid, ops, 1);

    ops[0].sem_num  = mutex;
    ops[0].sem_op   = 1;
    ops[0].sem_flg  = 0;

    ops[1].sem_num  = cond;
    ops[1].sem_op   = 0;
    ops[1].sem_flg  = 0;

    return semop(semid, ops, 2);
}

// Wakes up process waiting for 'cond'. Returns 0 on success. Returns 1 when
// no process is waiting for 'cond' and -1 on other error.
int wake_cond(int semid, int cond)
{
    struct sembuf   op;

    if (semctl(semid, cond, GETVAL) != 1)
        return 1;

    op.sem_num  = cond;
    op.sem_op   = -1;
    op.sem_flg  = 0;

    return semop(semid, &op, 1);
} 
```

现在看看我的最小测试程序。它由共享两个信号量的两个进程组成。一个用作互斥锁，另一个用作条件变量。他们都有相同的流程：

1.  锁定互斥锁。
2.  做一点事。
3.  唤醒等待条件变量的过程。
4.  使用互斥锁等待条件变量。

如果我把这一切都做对了，他们应该交替做“某事”。

```
int main(int argc, char** argv)
{
    key_t       key     = 0;
    pid_t       pid     = 0;
    int         semid   = 0;
    int const   mutex   = 0;
    int const   cond    = 1;
    int         repeat  = 5;
    char const* name    = NULL;
    union semun setval_semun;

    // Create unique key.
    key = get_unique_key(argv[0], 47); 
    if (key == -1)
        return 1;

    // Create and intialize semaphore set.
    semid = semget(key, 2, 0666 | IPC_CREAT);
    if (semid == -1)
        return 1;
    if (set_value(semid, mutex, 1) != 0 || set_value(semid, cond, 1) != 0)
    {
        semctl(semid, 0, IPC_RMID);
        return 1;
    }

    // Fork.
    pid = fork();
    if (fork() < 0)
        return 1;
    else if(pid > 0)
        name = "parent";
    else
        name = " child";

    while(repeat--)
    {
        printf("%s: (0), mutex: %d, cond: %d, repeat: %d\n", name,
            get_value(semid, mutex), get_value(semid, cond), repeat);

        if (lock_mutex(semid, mutex) != 0) return 1;

        sleep(1);

        printf("%s: (1), mutex: %d, cond: %d, repeat: %d\n", name,
            get_value(semid, mutex), get_value(semid, cond), repeat);

        if (wake_cond(semid, cond) != 0) return 1;

        printf("%s: (2), mutex: %d, cond: %d, repeat: %d\n", name,
            get_value(semid, mutex), get_value(semid, cond), repeat);

        if (repeat == 0)
        {
            if (unlock_mutex(semid, mutex) != 0) return 1;
        }
        else if (wait_cond(semid, cond, mutex) != 0) return 1;

        printf("%s: (3), mutex: %d, cond: %d, repeat: %d\n", name,
            get_value(semid, mutex), get_value(semid, cond), repeat);
    }

    //Wait for child and clear resources.
    if (pid > 0)
    {
        wait(NULL);
        semctl(semid, 0, IPC_RMID);
    }

    return 0;
} 
```

这是我得到的非常奇怪的输出：

```
parent: (0), mutex: 1, cond: 1, repeat: 4 
parent: (0), mutex: 0, cond: 1, repeat: 4
 child: (0), mutex: 0, cond: 1, repeat: 4
 child: (0), mutex: 0, cond: 1, repeat: 4
parent: (1), mutex: 0, cond: 1, repeat: 4
parent: (2), mutex: 0, cond: 0, repeat: 4
^C 
```

尤其是看前两行。他们告诉您，通知编号 (0) 在 while 循环的同一运行中以不同的值打印了两次！当然，它最终陷入僵局，所以我 ^C 它。

不要为 get_unique_key() 函数操心——它的功能正如其名。

任何帮助完成这项工作或解释奇怪的输出将不胜感激。谢谢你。

# javascript - 在设置变量的同时对数组进行排序后，原始数组也会被排序

> ID：14590156
> 
> 赞同：2
> 
> 时间：2013-01-29T18:54:13.963
> 
> 标签：javascript, arrays, sorting

> **可能重复：**
> [为什么在这种情况下排序修改原始文件？](https://stackoverflow.com/questions/9952598/why-is-sorting-modifing-the-original-in-this-case)

[jsFiddle](http://jsfiddle.net/DJDavid98/2TaNf/1/) - 我有 2 个数组。我想将第二个变量设置为第一个变量的排序版本。

```
var _myArray = ["N","T","A","W","Z","X"];
var _array02 = _myArray.sort();

document.write(_myArray+'<br>'+_array02); 
```

应该发生什么：`N,T,A,W,N,X<br>A,N,T,W,X,Z`

相反会发生什么：`A,N,T,W,X,Z<br>A,N,T,W,X,Z`

这是 JS 中的设计，如果是，我如何实现我想要的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T18:56:33.107

`sort()`对数组*进行就地*排序。如果您希望原始数组保持不变，请对副本进行排序：

```
var _myArray = ["N","T","A","W","Z","X"];
var _array02 = _myArray.slice().sort();

_myArray +'\n'+_array02

/*  returned value: (String)
N,T,A,W,Z,X
A,N,T,W,X,Z
*/ 
```

# ivy - 您如何覆盖 Ivy（独立）的工件输出目录？

> ID：14590161
> 
> 赞同：0
> 
> 时间：2013-01-29T18:54:28.163
> 
> 标签：ivy

我将 Ivy 作为独立运行（因此，没有 Ant）。我需要覆盖 Ivy 期望在其中找到生成的工件的目录的属性。我跑常春藤，`-debug`看到它有以下属性`ivy.distrib.dir=${ivy.project.dir}/distrib`。我也尝试过传入`-Divy.distrib.dir=target`，`-args -Divy.distrib.dir=target`但都没有奏效。我也尝试在`ivysettings.xml`和 中覆盖它`ivy.xml`。显然，一定有办法做到这一点......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:31:45.457

使用“publishpattern”命令行参数来指定工件的位置。这与 ivy 文件的“出版物”部分相结合，以确定模块发布的内容。

请参阅以下答案以获取工作示例：

*   [本地存储库的好常春藤教程？](https://stackoverflow.com/questions/1200762/good-ivy-tutorial-for-local-repository/2279596#2279596)

# c# - 可用页面文件大小/虚拟内存

> ID：14590162
> 
> 赞同：2
> 
> 时间：2013-01-29T18:54:32.177
> 
> 标签：c#, .net, memory, memory-management, computer-architecture

`Process.PagedMemorySize64`和有什么区别`PagedSystemMemorySize64`。我无法清楚地理解这一点。另外，我正在寻找一种方法来找出仍有多少页面文件可用。我是否必须遍历所有进程并总结`PagedMemorySize64`每个进程并从页面文件的总大小中减去它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:21:54.937

PagedSystemMemorySize64 是分配给进程的分页内存池中操作系统内核内存的总字节数。它对应于Taskmgr.exe 中的“分页池”列。

PagedMemorySize64 是为进程分配的用户模式虚拟内存的总字节数。它对应于 Taskmgr.exe 中的“提交大小”列。

请注意，这些部分中的进程共享内存，所有进程的分配总和远大于实际使用的内存量。此外，您无法合理地计算页面文件中“未使用”空间的数量，Windows 会根据正在运行的进程需要动态扩展和收缩它。

# java - JavaFX 在服务器端创建文件

> ID：14590164
> 
> 赞同：1
> 
> 时间：2013-01-29T18:54:39.353
> 
> 标签：java, javafx-2, javafx

我的 javaFX 应用程序在 Web 服务器（wamp）上运行，客户端通过浏览器访问该应用程序。我想在服务器端创建一个 xml 文件。我怎样才能做到这一点？因为目前如果我使用例如“/Users/username/Desktop”的路径，它将在客户端桌面上创建文件。我想在服务器桌面上创建这个文件。我在 netbeans 7.2.1 上使用 javaFX 2.2

对不起，我的英语不好！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:40:43.277

您的 JavaFX 应用程序需要与您的 Web 服务进行通信。在这种情况下，我认为它是您网站上的一个简单表格。为此，您的客户端需要使用 GET（不太灵活）或 POST（更灵活）方法来上传稍后将由您的 PHP 脚本处理的文件。

正如jewelsea 所建议的那样，Apache HttpClient 可以为您完成这项工作。但是，如果您像我一样不喜欢为简单的事情添加依赖项，您可能会决定卷起袖子并像我一样实现 HttpPost 类：

```
/**
 * Project: jlib
 * Version: $Id: HttpPost.java 463 2012-09-17 10:58:04Z dejan $
 * License: Public Domain
 * 
 * Authors (in chronological order):
 *   Dejan Lekic - http://dejan.lekic.org
 * Contributors (in chronological order):
 *   -
 */

package co.prj.jlib;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 * A class that uses HttpURLConnection to do a HTTP post. 
 * 
 * The main reason for this class is to have a simple solution for uploading files using the PHP file below:
 * 
 * Example:
 * 
 * <pre>
 *  <?php
 *  // In PHP versions earlier than 4.1.0, $HTTP_POST_FILES should be used instead
 *  // of $_FILES.
 *
 *  $uploaddir = '/srv/www/lighttpd/example.com/files/';
 *  $uploadfile = $uploaddir . basename($_FILES['userfile']['name']);
 *
 *  echo '<pre>';
 *  if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
 *      echo "File is valid, and was successfully uploaded.\n";
 *      } else {
 *          echo "Possible file upload attack!\n";
 *      }
 *
 *      echo 'Here is some more debugging info:';
 *      print_r($_FILES);
 *
 *      print "</pre>";
 *  }        
 *  ?>
 *
 * </pre>
 * 
 * TODO:
 *   - Add support for arbitrary form fields.
 *   - Add support for more than just one file.
 *   - Allow for changing of the boundary
 * 
 * @author dejan
 */
public class HttpPost {
    private final String crlf = "\r\n";
    private URL url;
    private URLConnection urlConnection;
    private OutputStream outputStream;
    private InputStream inputStream;
    private String[] fileNames;
    private String output;
    private String boundary;
    private final int bufferSize = 4096;

    public HttpPost(URL argUrl) {
        url = argUrl;
        boundary = "---------------------------4664151417711";
    }

    public void setFileNames(String[] argFiles) {
        fileNames = argFiles;
    }

    public void post() {
        try {
            System.out.println("url:" + url);
            urlConnection = url.openConnection();
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.setUseCaches(false);
            urlConnection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);

            String postData = "";
            String fileName = fileNames[0];
            InputStream fileInputStream = new FileInputStream(fileName);

            byte[] fileData = new byte[fileInputStream.available()];
            fileInputStream.read(fileData);

            // ::::: PART 1 :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
            String part1 = "";
            part1 += "--" + boundary + crlf;
            File f = new File(fileNames[0]);
            fileName = f.getName(); // we do not want the whole path, just the name
            part1 += "Content-Disposition: form-data; name=\"userfile\"; filename=\"" + fileName + "\"" 
                    + crlf;

            // CONTENT-TYPE
            // TODO: add proper MIME support here
            if (fileName.endsWith("png")) {
                part1 += "Content-Type: image/png" + crlf;
            } else {
                part1 += "Content-Type: image/jpeg" + crlf;
            }

            part1 += crlf;
            System.out.println(part1);
            // File's binary data will be sent after this part

            // ::::: PART 2 :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
            String part2 = crlf + "--" + boundary + "--" + crlf;

            System.out.println("Content-Length" 
                    +  String.valueOf(part1.length() + part2.length() + fileData.length));
            urlConnection.setRequestProperty("Content-Length", 
                    String.valueOf(part1.length() + part2.length() + fileData.length));

            // ::::: File send ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
            outputStream = urlConnection.getOutputStream();
            outputStream.write(part1.getBytes());

            int index = 0;
            int size = bufferSize;
            do {
                System.out.println("wrote " + index + "b");
                if ((index + size) > fileData.length) {
                    size = fileData.length - index;
                }
                outputStream.write(fileData, index, size);
                index += size;
            } while (index < fileData.length);
            System.out.println("wrote " + index + "b");

            System.out.println(part2);
            outputStream.write(part2.getBytes());
            outputStream.flush();

            // ::::: Download result into the 'output' String :::::::::::::::::::::::::::::::::::::::::::::::
            inputStream = urlConnection.getInputStream();
            StringBuilder sb = new StringBuilder();
            char buff = 512;
            int len;
            byte[] data = new byte[buff];
            do {

                len = inputStream.read(data);

                if (len > 0) {
                    sb.append(new String(data, 0, len));
                }
            } while (len > 0);
            output = sb.toString();

            System.out.println("DONE");
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            System.out.println("Close connection");
            try {
                outputStream.close();
            } catch (Exception e) {
                System.out.println(e);
            }
            try {
                inputStream.close();
            } catch (Exception e) {
                System.out.println(e);
            }
        }
    } // post() method

    public String getOutput() {
        return output;
    }

    public static void main(String[] args) {
        // Simple test, let's upload a picture
        try {
            HttpPost httpPost = new HttpPost(new URL("http://www.example.com/file.php"));
            httpPost.setFileNames(new String[]{ "/home/dejan/work/ddn-100x46.png" });
            httpPost.post();
            System.out.println("=======");
            System.out.println(httpPost.getOutput());
        } catch (MalformedURLException ex) {
            Logger.getLogger(HttpPost.class.getName()).log(Level.SEVERE, null, ex);
        }
    } // main() method

} // HttpPost class 
```

如您所见，有很多地方需要改进。该类使用 HttpURLConnection 并使用 POST 方法上传文件。我用它上传图片到我的一个网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:33:44.893

看起来 wamp 是一个基于 php 的服务器。在这种情况下，服务器组件将需要一些 php 脚本来处理上传。 [w3schools 有一个通过 php 上传的示例脚本](http://www.w3schools.com/php/php_file_upload.asp)（我不认可这个脚本，因为我从未使用过它，也没有使用过 php - 我只是提供它作为参考）。

w3schools 文件上传教程使用 html 将文件数据发布到服务器。使用 JavaFX，您将改为使用 Java 对文件发布进行编码。JavaFX 客户端中的 Java 部分将需要使用多部分表单 post 将文件从客户端发送到服务器。像[apache httpclient](http://hc.apache.org/httpcomponents-client-ga/index.html)这样的东西能够做到这一点。这篇文章中有端到端解决方案的示例代码：[如何使用 Java HttpClient 库与 PHP 一起上传文件](https://stackoverflow.com/questions/1067655/how-to-upload-a-file-using-java-httpclient-library-working-with-php-strange-pr)。

# jquery - jquery输入值到

> ID：14590166
> 
> 赞同：0
> 
> 时间：2013-01-29T18:54:54.340
> 
> 标签：jquery, forms, input

我敢肯定这已经被问过很多次了，但我真的无法在这里或谷歌找到适合我需要的答案。

我得到了一个带有输入文本字段的表单。我希望这个值`<p>`在提交后出现。s.th 这样，只是没有 keyup，但提交

```
$(document).ready(function(){
     $("input").keyup(function () {
         var value = $(this).val();
         $("p").text(value);
         })

}) 
```

HTML 是

```
<body>
<form>
<input type="text" value="" size=20 id="write"/>
</form>
<p> </p>
</body> 
```

有谁知道吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:58:27.013

您应该绑定到提交事件。我还建议将 id 添加到所涉及的表单、输入和 p 元素中。所以你最终可能会得到类似的东西：

```
$('#form_id').submit( function(event) {
    event.preventDefault();
    $('#p_id').text($('#input_id').val());
}); 
```

并修改了 HTML：

```
<body>
<form id="form_id">
<input id="input_id" type="text" value="" size=20 id="write"/>
</form>
<p id="p_id"></p>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:32:01.070

有了这个 html

```
<form id="formId" onsubmit="submitHandler()">
    <input id="inputId" type="text" value="" size=20 />
</form>
<p id="pId"></p> 
```

你可以这样做

```
function submitHandler() {
    $('#pId').html($('#inputId').val());
    return false; //if you don't want it to be processed any further
} 
```

# html5-video - mp4 视频中的长缓冲

> ID：14590169
> 
> 赞同：0
> 
> 时间：2013-01-29T18:54:58.510
> 
> 标签：html5-video, mp4, buffering, performance

我们已经建立了我们的视频网站来播放适合所有浏览器的视频 - 用于 Firefox/Chrome 的 OGV、用于 IE 的 Flash 和用于 Safari 的 MP4。具体来说，我们的视频标签是：

```
<video id="movie" width="100%" height="100%" autoplay="autoplay" controls="" preload="" tabindex="0">
<source src="video.mp4"></source>
<source type="video/ogg;" src="video.ogv"></source>
<object id="moduleHolder" width="800" height="500" type="application/x-shockwave-flash" data="webplayer.swf" style="visibility: visible;">
<param name="allowfullscreen" value="true">
</object>
</video> 
```

在 FF/Chrome/IE 中一切正常，但在 Safari 中，视频开始播放之前有很长的缓冲时间。

我们尝试使用 QTIndexSwapper 应用程序将 MOOV 放在文件的开头，但显然元数据已经位于开头：

```
Error: MOOV is in proper place, processing not needed 
```

OGV 和 MP4 文件的大小相似，所以我认为这不是互联网连接问题，因为 OGV 电影几乎立即加载。

MP4文件采用Adobe Media Encoder CS5编码，具体细节如下：

*   多路复用器：MP4，标准流兼容性

*   视频：800 x 600, 29.97fps, Main Profile, Level 4.2 VBR 2-pass, 1.5Mbps (target), 2Mbps (max)

*   音频：AAC，160 kbps

*   “使用最高渲染质量”复选框被选中。

我们认为这是一个编码问题，但几周前文件又可以正常播放了。非常感谢任何想法或指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:45:19.943

问题似乎是由于播放开始之前内部播放器缓冲造成的。下面建议的步骤可能会对您有所帮助。

[HTML5 <video> 元素 - 缓冲大小，快速启动视频](https://stackoverflow.com/questions/8382757/html5-video-element-buffering-size-starting-video-quickly)

# bash - 从文件中提取信息以创建表

> ID：14590170
> 
> 赞同：0
> 
> 时间：2013-01-29T18:55:01.327
> 
> 标签：bash, shell, sed, awk

```
Jan 29 12:28:17 torsmtp2 postfix/cleanup[16193]: 5513512078E: warning: header Subject: Well Systems - Project Updated (Published Number 561-639-2188) from unknown[10.40.6.11]; from=<Accounts@example.com> to=<bg2833@work.com> proto=ESMTP helo=<CORE1UI1> 
```

我正在尝试提取信息并创建一个包含以下内容的表：

```
DATE                EMAIL                Published Number
Jan 29 12:28:17     bg2833@work.com      561-639-2188 
```

是否可以使用 awk 或 sed 来完成此操作？

到目前为止，我能够做到以下几点

```
head -n 1 file | awk -F ',' 'BEGIN { print "-----------------------\nDate \tEmail\tPhone\n-----------------------"} { print $1;} END { print "-------------"; }' 
```

输出

```
-----------------------
Date    Email   Phone
-----------------------
Jan 29 12:28:17 torsmtp2 postfix/cleanup[16193]: 5513512078E: warning: header Subject:       American Ramp Systems - Study Updated (Published Number 888-649-2186) from     unknown[10.40.6.11]; from=<Accounts@telmetrics.com> to=<bg2833@att.com> proto=ESMTP helo=    <CORE1UI1>
------------- 
```

仍然不确定如何提取日期/发布的号码和电子邮件

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:24:20.697

使用 sed 的其他方式

```
sed -re 's/(.*[0-9]:[0-9]+)(.*)Published Number ([0-9-]+)(.*)to=<(\w+@\w+\.\w+)(.*)>/\1\t\5\t\3/' temp.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:05:22.640

```
awk -v OFS='\t' '{date=$1" "$2" "$3; email=phone=$0; gsub(/.*to=<|>.*$/,"",email);
 gsub(/.*Published Number |).*/,"",phone); print date, email, phone}' file
Jan 29 12:28:17 bg2833@work.com 561-639-2188 
```

add printing the header in a BEGIN section and use printf instead of print if you want something other than tab-separated values in the output.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T19:17:45.837

因为，这看起来像一个日志文件，我假设不同记录之间的格式不会改变：

您可以使用以下代码提取日期：
`date=$(cat extract.txt | cut -d ' ' -f -3)`

您可以使用以下代码段提取到电子邮件（我知道这有点复杂）：
`email=$(cat extract.txt | sed 's/.*\( to[^ ]*\).*/\1/g' | cut -d '<' -f2 | cut -d '>' -f1)`

并且，公布的数字可以提取如下：
`number=$(cat extract.txt | sed 's/.*Published Number \([^)]*\).*/\1/g')`

我希望这有帮助。

**更新**：
使用以下代码段可以很容易地提取电子邮件：
`email=$(cat extract.txt | sed 's/.* to=<\([^>]*\).*/\1/g')`

# wordpress - 如何在 Wordpress 中对我的提要强制使用 HTTP，同时保持其他所有 SSL 启用？

> ID：14590171
> 
> 赞同：0
> 
> 时间：2013-01-29T18:55:09.103
> 
> 标签：wordpress, apache, ssl, rss, feedburner

我只需要在 feed url 上禁用 SSL，这样我就可以使用 Feedburner。在我的设置中，我输入了[https://site.com](https://site.com)的 URL，并且正如预期的那样，所有页面都使用 SSL 显示。但这当然也意味着饲料被强制使用 https，这是 Feedburner 不喜欢的。我尝试了各种插件都没有成功，即使它们确实有效，考虑到非公开数据/信息的性质，我更希望通过 SSL 保护整个站点。

Wordpress 似乎没有使用 Apache 重写规则来强制 SSL，因此编辑 .htaccess 似乎也不是一个选项，但我可能是错的。

肯定有人已经使用 Wordpress 启用了站点范围的 SSL，并且已经知道如何排除某些页面或 slug，对吧？我怎样才能做到这一点？非常感谢！

# alert - Zurb 基金会警报

> ID：14590172
> 
> 赞同：3
> 
> 时间：2013-01-29T18:55:08.840
> 
> 标签：alert, zurb-foundation

我正在将 zurb 基础集成到现有的 ASPX 站点中。我想在警告框中添加一些信息，所以我使用了文档中提供的代码：

```
<div class="alert-box secondary">
  This is a secondary alert (div.alert-box.secondary).
  <a href="" class="close">&times;</a>
</div> 
```

我没有成功关闭消息。我还应该在此代码中添加其他内容以使其正常工作吗？像关闭元素中的链接应该链接回页面吗？正如上面所见，我现在就在那里，但它不起作用。到目前为止，我在 Zurb 中的所有其他元素都运行良好，例如导航、按钮、选项卡等。

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-14T19:24:25.640

'不要忘记将'data-alert'添加到您的块元素。这让我把头发拉了一点。我有一个警报工作，另一个没有。只是我忘记了“数据警报”。

```
<div data-alert class="alert-box">
    Content
    <a href="#" class="close">&times;</a>
</div> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T11:51:28.883

您是否正确导入了警报框工作所需的[Javascript 库？](http://foundation.zurb.com/docs/javascripts.php)

该文件`jquery.foundation.alerts.js`应在页面加载时调用（您可以在浏览器检查器的“网络”选项卡中进行检查）或包含在`app.js`稍后压缩/缩小的文件中。

你还需要用它初始化它

```
$(document).foundationAlerts(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-18T14:59:10.587

当我通过 AJAX 将 HTML 注入我的页面时，我遇到了类似的问题。我的解决方案是 hack。

我在正文下添加了以下元素。

```
<span data-alert /> 
```

我认为加载元素需要HTML5*数据警报。*

完成此操作后，解雇工作正常。

# .net - 众所周知的“由于 StackOverflowException 而终止进程”屏幕是如何出现的？

> ID：14590174
> 
> 赞同：10
> 
> 时间：2013-01-29T18:55:12.730
> 
> 标签：.net, exception, memory

一个奇怪的问题：

如果当前进程的堆栈已满，那么众所周知的“由于 StackOverflowException 而终止进程”屏幕是如何出现的？是运行时为其优雅降级保存了一些寄存器，还是可能运行另一个显示此屏幕的临时进程的内部技巧？

PS 知道这个问题的可能答案可以帮助某人从类似的严重故障情况中建立自己的“优雅降级（假设显示此类消息的功能非常有限）”机制。

![在此处输入图像描述](../Images/9ca9b8dcdb1ed03342ac34ef471b3f43.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T20:24:53.003

此消息由 CLR 显示。可以在 SSCLI20 发行版中看到代码，clr/src/vm/eepolicy.cpp 源代码文件：

```
void DisplayStackOverflowException()
{
    PrintToStdErrA("\n");

    PrintToStdErrA("Process is terminated due to StackOverflowException.\n");
} 
```

依次由 EEPolicy::HandleFatalStackOverflow() 方法调用。您完全可以看到它的唯一原因是因为您正在运行控制台模式应用程序，因此到 stderr 的输出最终会出现在控制台窗口上。只有当 Windows 错误报告 (WER) 本身没有终止应用程序时，您才会看到它。

无法拦截此异常，CLR 无法继续运行托管代码，因为剩余的堆栈空间太少，无法安全运行任何托管代码。DisplayStackOverflowException() 调用后的代码行是：

```
 TerminateProcess(GetCurrentProcess(), COR_E_STACKOVERFLOW); 
```

# javascript - 嵌套对象上的 JavaScript 垃圾收集（DSL 开发）

> ID：14590178
> 
> 赞同：0
> 
> 时间：2013-01-29T18:55:18.457
> 
> 标签：javascript, node.js, garbage-collection, dsl

我想为我的 javascript 对象创建一个类似 DSL 的构建器，但我不确定垃圾收集器（创建的对象）是否删除了 DSL-Builder 对象。这是代码：

```
function Section() {...}

Section.DSL = function() {
  var section = new Section();

  return {
    title: function(s) { section.title = s; },         /* Just for example */
    content: function(s) { section.content = s; },     /* Logic has been removed */
    section: section
  }
}

function section(builderFn) {
  var dsl = new Section.DSL();
  fn.call(dsl, dsl);

  return dsl.section;
}

/* Somewhere in the code */
var mySection = section(function(s) { 
  s.title('Hello, my section');
  s.content('We can put it in later');
});

/* I want my DSL object created internally by section method 
   to be removed by garbage collector */ 
```

我将仅使用 DSL 来初始化 Section 的新实例并使用方便的方法填充其值。我希望处理我的 DSL 对象，但我不确定它是否会根据我对其成员之一的进一步使用。

也许我应该创建一个“dispose”方法，它将 dsl.section 设置为 null 或使用“delete dsl.section”将其删除？之后，我的部分将与 DSL 断开连接，垃圾收集器将成功删除它，我通过新的引用“mySection”继续使用它。

还有一个想法：

有可能将 DSL 用作单例。在这种情况下，我必须在“section”方法中创建一个新的 Section 对象，然后在调用构建器函数之前将其分配给 DSL 对象（这将是一个单例）。这是一个很好的解决方案吗？示例如下：

```
Section.DSL = {
  construct: function(section) {
    this.section = section;
    return this;
  }

  /* Builder methods */
}

function section(builderFn) {
  var section = new Section();

  /*  Imagine that DSL is just an object with a few functions 
      and construct just set its section variable and returns this
   */
  var dsl = Section.DSL(section); **/
  fn.call(dsl, dsl);

  return section;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:23:32.877

GC*只*关心[对象可达性](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Reachability_of_an_object)。无论如何，请考虑以下示例：

```
function f (s) {
  // The variable "s" is a reachability root for the given scope;
  // any object that it names is guaranteed to be reachable
  // as long as the closure(s) below are reachable.
  return {
     getIt: function () { return s }
     setIt: function (_s) { s = _s }
  }
} 
```

示例案例 1。

```
g = f({my: "Object"})
// Closures are no longer strongly reachable, and thus the object
// can be reclaimed.
// (Also note there are no other strong references to the object!)
g = null
// Told yah, so, oops exception!
g.getIt() 
```

示例案例 2。

```
g = f({my: "Object"})
// The variable "s" bound by the closures has been re-assigned and
// thus no longer strongly references the original object;
// the original object is thus eligible for reclamation.
// (Note no other strong references!)
g.setIt(null)
// But of course we just have null now .. oops!
g.getIt().my 
```

示例案例 3。

```
o = {my: "Object"}
g = f(o)
g.setIt(null)
// ..but the object is NOT eligible for reclamation because it is
// strongly reachable through "o" (which is a reachability root
// in this scope).
alert(o) 
```

* * *

现在，唯一真正感兴趣的案例（我在评论中没有提及）是：

```
function f2(s) {
   var hash_of_s = hash(s)
   // The variable "s" is not accessed from any closure
   return {
      getHash: function () { return hash_of_s }
   }
}
g = f2(/* some LARGE object currently only reachable here */)
// Is the object referenced by "s" reclaimable here?
alert(g.getHash()) 
```

在这种情况下，假设闭包是强可达的，“s”是否保持初始对象的可达性？

一个*实现*可以在技术上决定“s”不能保持可达性——但我知道 Node.js 是如何处理它的。

# mysql - 保存到数据库的日期值与它们应该是不同的

> ID：14590179
> 
> 赞同：0
> 
> 时间：2013-01-29T18:55:19.357
> 
> 标签：mysql, hibernate, date, hibernate-annotations

使用休眠和注释，我试图将值保存到具有日期列的表中（我正在使用 Mysql）。问题是保存到数据库的日期值与应有的不同。首先我创建一个新的 java.sql.Date 例如

```
Date date = new Date(2013, 10, 1); 
```

但保存到我的表中的是：

```
3913-02-10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:43:22.413

月份是从 0 开始的（所以 1 是二月），年份是从 1900 开始的（所以 2013 是 3913）。[Date javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html#Date%28int,%20int,%20int%29)中对此进行了解释。javadoc 还说这个构造函数已被弃用，所以无论如何你都不应该使用它。

# c - 如何在驱动程序读取函数中重置缓冲区（初始化为零）：myread（struct file *file，char __user *buf，size_t len，loff_t *fops）？

> ID：14590182
> 
> 赞同：0
> 
> 时间：2013-01-29T18:55:26.983
> 
> 标签：c, linux-kernel, linux-device-driver

在将字符串 c 复制到 buf 之前，我需要将此用户空间缓冲区设为零。如何将缓冲区初始化为零。

```
static ssize_t myread(struct file *file,char __user *buf,size_t len, loff_t  *fops)
{
    printk(KERN_INFO"My read with length %d \n",len);
    len = strlen(c);

    if(copy_to_user(buf,c,len) != 0)
        return -EFAULT;
    else if (*fops > 0)
        return 0;
        else
            *fops += len;
            return len;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:57:46.707

使用 memset

参见手册页的用法，它将一个常量字节设置为一系列连续的 buf 地址

# javascript - 查看单击按钮时执行的脚本

> ID：14590192
> 
> 赞同：2
> 
> 时间：2013-01-29T18:55:59.060
> 
> 标签：javascript, google-chrome, google-chrome-devtools

使用 Chrome 开发人员工具，如何查看当我单击网页上的按钮时将运行的脚本？有可能吗，还是我必须使用一些特殊的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:05:27.957

Chrome，在要查看其事件处理程序的元素（在本例中为按钮）上**右键单击 -> 检查元素。**在右侧（HTML 旁边），您应该会看到一个带有一些 CSS 的窗口。如果您一直向下滚动，则会出现“事件侦听器”部分。展开它，您可以查看各种事件的处理程序。

请注意，我并不总是觉得这很有用；它并不总是显示所有正在嗅探您的元素的处理程序。它确实可以满足您的需求，但有时最好只`console.log()`在代码中写入控制台 ( ) 以找出正在调用的处理程序。

如果您对此有任何疑问，请告诉我。祝你好运！:)

# sql-server-2008 - 将数据作为 UDF 参数的 SQL Server 2008 表

> ID：14590195
> 
> 赞同：2
> 
> 时间：2013-01-29T18:56:11.557
> 
> 标签：sql-server-2008, tsql, user-defined-functions, table-valued-parameters

**我的问题：** SQL Server 2008 中是否可以在存储过程中定义临时表并将其作为变量传递给用户定义的函数？

我需要执行以下操作：

1.  我有程序`dbo.GetMsgCntData`。

2.  此过程正在进行一些计算，并且由于此过程，我将数据放入此过程中定义的临时表 ( `GetMsgCntData`)：

    ```
    -- table defined in dbo.GetMsgCntData
    DECLARE @tmpTable TABLE (
        ID BIGINT,
        FirstName VARCHAR(50),
        LastName VARCHAR(50),
        UserType varchar(50),
        SenderID bigint,
        IsArchive bit
    ) 
    ```

3.  所以，`@tmpTable`包含一些数据。我需要运行用户定义的函数`GetCnt(@status, @MsgTempTable)`，但我需要`getCnt`函数来访问`@tmpTable`数据。基本上我需要这样的东西：

    ```
    -- to be written at the end of dbo.GetMsgCntData
    SELECT cnt(*) total,
        dbo.GetCnt('open', @tmpTable) as opened,
        dbo.GetCnt('closed', @tmpTable) as closed
    FROM @tmpTable
    -- where @tmpTable is temporal table 
    ```

4.  我试图定义`@table`为`GetCnt`用户定义的类型。

    ```
    CREATE TYPE dbo.tmp_Messages AS TABLE (
        ID BIGINT,
        FirstName VARCHAR(50),
        LastName VARCHAR(50),
        UserType varchar(50),
        SenderID bigint,
        IsArchive bit
    )

    CREATE FUNCTION FUNCTION [dbo].[GetCnt] (
        @Status nvarchar(10),
        @MsgTempTable dbo.tmp_Messages READONLY
    )
    .... 
    ```

但这给了我错误信息：

```
Operand type clash: table is incompatible with tmp_Messages 
```

我认为我的想法是完全错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:44:25.150

临时表与用户定义类型不兼容。您应该将临时表声明为用户定义类型：

```
CREATE TYPE dbo.tmp_Messages AS TABLE 
(
 ID BIGINT,
 FirstName VARCHAR(50),
 LastName VARCHAR(50),
 UserType varchar(50),
 SenderID bigint,
 IsArchive bit
 )
 GO
 --function declaration 

        CREATE FUNCTION [dbo].[GetCnt] (
            @Status nvarchar(10),
            @MsgTempTable dbo.tmp_Messages READONLY
        )...
        -- table defined in dbo.GetMsgCntData
        DECLARE @tmpTable dbo.tmp_Messages;
        INSERT INTO @tmpTable(---some actions

SELECT cnt(*) total,
    dbo.GetCnt('open', @tmpTable) as opened,
    dbo.GetCnt('closed', @tmpTable) as closed
FROM @tmpTable 
```

请阅读一篇关于表值参数的好文章：http: [//beyondrelational.com](http://beyondrelational.com/modules/2/blogs/77/posts/11288/table-valued-parameters-to-a-table-valued-function-underappreciated-features-of-microsoft-sql-server.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:39:58.693

您可以使用用户定义的表类型来实现这一点。尝试这个

```
CREATE TYPE T1Type
AS TABLE (ID BIGINT,
    FirstName VARCHAR(50),
    LastName VARCHAR(50),
    UserType varchar(50),
    SenderID bigint,
    IsArchive bit
) 
```

在你的 SP

```
DECLARE @tmpTable T1Type
INSERT INTO @tmpTable
SELECT * FROm TableName 
```

在你的功能

```
CREATE FUNCTION FUNCTION [dbo].[GetCnt] (
    @Status nvarchar(10),
    @MsgTempTable T1Type READONLY
) 
```

# eclipse - Eclipse 架构中的质量属性权衡

> ID：14590200
> 
> 赞同：0
> 
> 时间：2013-01-29T18:56:33.967
> 
> 标签：eclipse

我目前正在从事一个与 Eclipse IDE 的软件架构有关的项目。我的目标是在两个关键质量属性（在本例中为可修改性和性能）之间进行权衡分析。Eclipse 中的插件架构显然促进了高度的可修改性，但我目前的研究关注的是这种可修改性级别是否会影响运行 Eclipse 的性能（Eclipse 架构中的性能弱点）。很长一段时间以来，我一直试图找到一些可靠的信息，但到目前为止发现的很少。

如果有人对此主题有一些指示/提示，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:08:01.980

事实上，Eclipse 的插件架构是专门为考虑内存占用和一般性能而设计的。例如，插件是延迟加载的，这意味着 Equinox 将等到功能被实际调用/请求后再加载插件。这甚至可以在 UI 中启用插件功能的发现和/或表示，而无需实际加载和激活该插件。这些是在考虑性能的情况下做出的有意识和直接的设计决策。

请参阅*[插件何时开始使用？](http://wiki.eclipse.org/FAQ_When_does_a_plug-in_get_started?)*

[这是另一个](http://wiki.eclipse.org/Equinox_Boot_Delegation)设计更改示例，该更改既提高了性能又提供了更简洁的设计。

# file - 仅使用 htacess 文件将 SSL 应用于一页

> ID：14590205
> 
> 赞同：0
> 
> 时间：2013-01-29T18:57:01.437
> 
> 标签：file, .htaccess, url, ssl, https

我有一个需要保护的网页。但是，我**只能**将 SSL 应用于一个特定页面。由于与讨论无关，我不会解释为什么会这样。

我一直在不同的讨论和论坛中看到下面的代码：

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{REQUEST_URI} somefolder 
RewriteRule ^(.*)$ https://www.domain.com/somefolder/$1 [R,L] 
```

虽然这适用于目录，但它不适用于单个页面。有什么办法可以修改它以适用于一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:13:28.167

将 somefolder 更改为 file.php 或等效的应该是所有需要的。然后在规则中将 /somefolder/$1 也更改为 file.php。

# c - C中的头文件及其用法

> ID：14590206
> 
> 赞同：3
> 
> 时间：2013-01-29T18:57:06.407
> 
> 标签：c, header-files

库头文件只包含函数的声明。那么，当我们调用库函数时，函数究竟是如何运行的呢？

例如：`int strcmp ( const char * str1, const char * str2 );`是 C 中 strcmp 函数的声明。

当我们在程序中调用 strcmp 函数时，如果函数体不存在于头文件中，strcmp 函数究竟是如何执行的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:02:08.683

头文件只包含函数声明。这是他们的主要目的之一，公开您必须使用的内容而不用担心实施

至于实现的位置，运行时库会在构建时添加到您的程序中，因此作为编码人员，您可以调用所有这些函数，因为您对它们的函数定义有“前向”声明，但它不是直到加载实现的运行时。

这样做的原因是因为在每个使用它的程序中复制诸如 printf 之类的实现代码是很愚蠢的。这将非常浪费内存！因此，只有声明向您、程序员公开，并且操作系统在运行时共享内存中函数的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:08:10.980

要理解程序如何使用 strcmp ，编译器只看到它的声明就必须理解链接的过程。编译 C 程序包括三个步骤：

1.  预处理（将所有包含的标头转储到源代码中）
2.  编译（从源代码制作一个目标文件）
3.  链接（将多个目标文件链接在一起）

第三步，所谓的*链接器*（通常`ld`）基本上将所有链接的目标文件的内容转储到一个可执行文件中并解析所有符号。符号是任何具有全局名称的东西，例如函数或全局变量。

当您的程序调用`strcmp`编译器生成的目标文件时，实际上并不包含所述函数的定义。相反，只是`strcmp`对链接器稍后将解析的符号的引用。链接器检查所有目标文件和全局库，然后解析这些引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T18:59:37.697

`strcmp`位于运行时库中，当您构建可执行文件时，它会添加到您的程序中。其工作原理的细节因操作系统而异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T19:06:58.970

在这种情况下，它与任何其他用户定义的标头没有什么不同。

如果您不包含相应的标头（例如`string.h`for `strcmp`），则编译器会完成隐式声明。

如果在运行时未找到函数定义（即根据您的假设在库中丢失），则链接器将在与默认完成的标准 C 库链接时抱怨（例如，在`-lc`gcc 的情况下执行时） ）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-29T19:07:01.980

您想要使用的代码`printf`已经编译并存储在某处。当链接器将您的目标代码与标准库链接时，您的最终可执行文件就生成了。

试着`gcc -c somefile.c`看看你得到了什么。

还可以尝试`gcc -v`选项并了解它提供的输出。

找出`ld`命令的作用，您将得到答案。

这也是我认为应该对您有所帮助的：[关于编译/链接/相关的所有内容](http://www.tenouk.com/Bufferoverflowc/Bufferoverflow1c.html)

**更新 ：**

还想象一下，如果您为其中`printf`的每个程序定义`stdio.h`并包含`stdio.h`

***程序.c***：

```
#include <stdio.h>  //suppose this contains definition of printf     

int main()
{            

/*Call printf()  somewhere or maybe not */

} 
```

gcc program.c -o 输出

所以在这里你所有的定义都`stdio.h`将在文件中被替换，`program.c`你的可执行文件`output`将变得非常**巨大**。`printf`相反，在`stdio.h`需要时从一个地方调用您经常使用的函数会是一个更好的主意

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T19:00:49.293

它存在于编译的库中。当您在链接到某个库的同时编译项目时，预编译的库会被添加到最终编译中。

# javascript - 我应该如何使用 bacon.js 保持多个值的运行总数？

> ID：14590210
> 
> 赞同：2
> 
> 时间：2013-01-29T18:57:38.550
> 
> 标签：javascript, coffeescript, reactive-programming, bacon.js

摆弄一个[bacon.js](https://github.com/raimohanska/bacon.js#bus)。我想在一组文本输入中保持一个连续的值。github 站点上的示例使用`.scan`了一个加法器函数，该函数适用于该示例，因为它在流中使用了 -1 和 +1。但是，如果值被编辑，我希望从流中删除它们，因此该`.scan`解决方案对我不起作用，或者我做得不对。

标记：

```
<ul style="repeat-direction: vertical; list-style-type: none;">
  <li><input data-group="0"></li>
  <li><input data-group="0"></li>
  <li><input data-group="0"></li>
</ul>
<ul style="repeat-direction: vertical; list-style-type: none;">
  <li><input data-group="1"></li>
  <li><input data-group="1"></li>
  <li><input data-group="1"></li>
</ul> 
```

因此，我所拥有的解决方案是在出现节流 keyup 事件时遍历输入，然后在它更改时更新跨度。

```
groupZeroEvents = events.filter (val) ->
   Math.floor(val[0]) == 0 # the stream contains the group the input belongs to 

groupZeroEvents.onValue (val) ->
    sum = 0
    $("input[data-group='0']").each (i,el) ->
      sum += Math.floor($(el).val())
    $('span#sum-g0').html(sum) 
```

它工作正常，但看起来很蹩脚——感觉就像我错过了`Bacon.js`正确使用的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:14:56.230

总和取决于多个输入的当前值。如果您将这些输入建模为属性，您将得到一个更好的解决方案：

```
function sum(xs) { return _.reduce(xs, (function(x,y) {return x + y}), 0); }

// array of Properties representing the value of each group-zero-element
var groupZeroValues = $("input[data-group=0]").map(function(index, elem) {
     return $(elem).asEventStream("keyup")
            .map(function(e) { return parseInt($(e.target).val()); })
            .toProperty(0)
     }).toArray();

// sum Property
var groupZeroSum = Bacon.combineAsArray(groupZeroValues).map(sum)

// assign Property value to the "text" method of the sum element
groupZeroSum.assign($("#sum-g0"), "text") 
```

我没有时间实际尝试这个，但这个想法肯定会奏效。

# matlab - Matlab 神经网络使用并行工具箱

> ID：14590211
> 
> 赞同：1
> 
> 时间：2013-01-29T18:57:38.773
> 
> 标签：matlab, neural-network

我正在尝试运行 Matlab 文档中有关如何使用并行处理工具箱实现神经网络的代码，但出现以下错误。

错误 ：

使用 trainlm 时出错（第 104 行） 输入状态 Xi 不是矩阵或元胞数组。

网络/火车错误（第 106 行）[net,tr] = feval(net.trainFcn,net,X,T,Xi,Ai,EW,net.trainParam);

代码：

```
[x,t] = house_dataset;
net1 = feedforwardnet(10);
y = net2(x);
net2 = train(net1,x,t);
matlabpool open;
net2 = train(net1,x,t,'useParallel','yes');
matlabpool close; 
```

有谁知道如何解决这一问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:42:31.503

不幸的是，直到 R2012b 才添加该功能！

[http://www.mathworks.com/help/nnet/release-notes.html](http://www.mathworks.com/help/nnet/release-notes.html)

# javascript - 如何获取一个div中的所有元素

> ID：14590214
> 
> 赞同：0
> 
> 时间：2013-01-29T18:57:52.007
> 
> 标签：javascript, jquery

除了某些特定的 div 之外，我如何获取 div 中的所有元素例如，如果结构如下

```
<div id="abc">
    <div class="def">
        sagar patil</div>
    <div class="pqr">
        patil</div>
    <div class="pqr">
        sagar patil</div>
    <div class="def">
        sagar patil</div>
    <div class="def">
        sagar patil</div>
    <div class="def">
        sagar patil</div>
    <div class="pqr">
        rocky</div>
    <div class="def">
        sagar patil</div>
    <div class="def">
        sagar patil</div>
    <div class="pqr">
        sfs</div>
    <div class="def">
        sagar patil</div> 
```

现在假设我想要主 div 的 html 结构，即 div abc，但没有 div pqr 的内容，即我想要 div abc 中的所有内容，但没有 div pqr

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:00:24.293

使用`:not()`.

```
$("#abc div:not(.pqr)") 
```

甚至更广泛

```
$("#abc :not(.pqr)") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:05:57.440

您可以使用 :not 过滤器，或者对于更易读的结构，[jQuery .not](http://api.jquery.com/not/)：

```
$("#abc div").not(".pqr, .someOtherClass"); 
```

这样它就更具可读性，并且您可以轻松地包含您不想要的其他选择器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T19:08:59.233

不会`var someArray = $('#ID_OF_DIV').children()`

或者

`$('#ID_OF_DIV').children().each();`

在这种情况下工作？视情况而定（您尚未告诉我们）

# c++ - 调用者和被调用者保存的寄存器有什么区别？

> ID：14590215
> 
> 赞同：1
> 
> 时间：2013-01-29T18:57:58.477
> 
> 标签：c++

特别是，您如何知道调用者保存的寄存器与被调用者保存的寄存器中的一段代码中的变量执行的保存/恢复操作的数量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T19:29:57.827

调用者保存的寄存器，也称为易失性寄存器，是调用函数必须保存（通常保存到运行时堆栈）的任何 CPU 内核寄存器，如果调用函数需要寄存器中的值；即如果值是“活的”。被调用者保存的寄存器，也称为非易失性寄存器，是任何 CPU 内核寄存器，其中包含函数必须承诺不会破坏的值。如果被调用者（被调用函数）需要使用这些寄存器，它必须先将这些寄存器中的值保存（一般在运行时栈上），然后在返回给调用者之前恢复它们。

正如 Carl Norum 所提到的，哪些 CPU 核心 regs 是 caller-save 和哪些是 callee-save 由调用约定定义（历史上记录不佳，并且历史上特定于编译器），或由 ABI（应用程序二进制接口）定义。

尽管它的信息绝对是 x86 特定的，但 Agner Fog 的以下文档在描述调用约定和调用者保存/被调用者保存寄存器方面做得非常好：

[http://www.agner.org/optimize/calling_conventions.pdf](http://www.agner.org/optimize/calling_conventions.pdf)

下面介绍 PowerPC EABI，包括它的调用约定。但在本文档中，搜索“volatile”和“nonvolatile”（分别为 caller-save 和 callee-save）：

[http://www.freescale.com/files/32bit/doc/app_note/PPCEABI.pdf](http://www.freescale.com/files/32bit/doc/app_note/PPCEABI.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:00:06.797

在物理上，调用者保存的寄存器和被调用者保存的寄存器之间没有区别。仅通过过程调用标准（调用约定）或 ABI 进行区分。如果您需要分析一段代码，您可以编译（但不汇编）或反汇编二进制文件，并使用 ABI 或调用约定手册作为参考，逐个函数和逐条指令地检查它。

# android - Robotium 与 adb shell monkey 的速度

> ID：14590218
> 
> 赞同：1
> 
> 时间：2013-01-29T18:58:05.500
> 
> 标签：android, robotium

运行`Robotium`非常缓慢。

```
adb shell monkey ... 
```

运行速度*非常*快，GUI 只是在屏幕上*闪烁。*由于我是新手，`Robotium`我想知道这是否正常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:06:35.047

是的，这很正常！

> Robotium 不专注于性能，它专注于使开发人员可以访问 API，以使他们的测试更易于编写和阅读。（马卡斯）

# java - 从 CSV 创建批次导致错误状态

> ID：14590219
> 
> 赞同：0
> 
> 时间：2013-01-29T18:58:09.730
> 
> 标签：java, salesforce, apex-code, bulkloader, opencsv

我正在尝试从使用 opencsv 的 CSVWriter 编写的 CSV 文件进行批量处理： CSVWriter writer = new CSVWriter(new FileWriter(filePath+createFileName), ',', CSVWriter.DEFAULT_QUOTE_CHARACTER);

和 BufferedReader 读取写入的文件。CSV文件被写入，我认为读取操作也很顺利。所以，到目前为止它工作得很好。但是，当我选择使用相同操作将特定数据写入 Csv 时，批次的创建就会出错。出现异常，说明“无法解析 CSV。找到未转义的引号。带引号的值应在引号内”，这使应用程序无法以预期的方式运行。

经历此错误后，数据中似乎存在一些“”（双引号）或“（双引号）符号。（我的数据格式为“asdf”、“1.0”、“”、“def ")。据我了解，我尝试应用正则表达式来查找双引号但找不到任何内容，因为在检查文件后它不包含重复的双引号。我遵循的链接是：[正则表达式查找和替换 CSV 文件中未转义的非连续双引号](https://stackoverflow.com/questions/3180842/regular-expression-to-find-and-replace-unescaped-non-successive-double-quotes-in)

此后在代码中，我使用： File tmpFile = File.createTempFile("bulkAPIInsert", ".csv"); 将数据保存在临时文件中，然后将其删除。

在用以下代码替换上面的代码后，我以某种方式处理了即将到来的异常，但它进一步导致另一个声明“无法解析 CSV。在关闭打开的报价之前达到 EOF”。文件 tmpFile = new File("bulkAPIInsert.csv");

我认为不应遵循上述解决方法，因为这将是应用程序的性能问题。

通过查看 CSVReader 类，我发现定义的自定义异常声明与我得到的完全相同的异常。但我认为它是在某个双引号（CSV 文件的单元格值）中找到双引号时出现的。我将链接称为：[https ://github.com/mulesoft/salesforce-connector/blob/master/src/main/java/com/sforce/async/CSVReader.java](https://github.com/mulesoft/salesforce-connector/blob/master/src/main/java/com/sforce/async/CSVReader.java)

任何人都可以建议我在哪里做错或任何解决这个问题的方法吗？

我将代码片段分享为：Method1 然后 Method2 被调用。

```
 Method1: private List<BatchInfo> createBatchesFromCSVFile(RestConnection connection,
            JobInfo jobInfo, String csvFileName) throws Exception {
        List<BatchInfo> batchInfos = new ArrayList<BatchInfo>();
        BufferedReader rdr = new BufferedReader(new InputStreamReader(
                new FileInputStream(csvFileName)));

        // read the CSV header row
        String hdr = rdr.readLine();
        byte[] headerBytes = (hdr + "\n").getBytes("UTF-8");
        int headerBytesLength = headerBytes.length;
//      I was making use of the following code which I replaced with the next line of code.
//      File tmpFile = File.createTempFile("bulkAPIInsert", ".csv");
        File tmpFile = new File("bulkAPIInsert.csv");
        // Split the CSV file into multiple batches
        try {
            FileOutputStream tmpOut = new FileOutputStream(tmpFile);
            int maxBytesPerBatch = 10000000; // 10 million bytes per batch
            int maxRowsPerBatch = 10000; // 10 thousand rows per batch
            int currentBytes = 0;
            int currentLines = 0;
            String nextLine;

            while ((nextLine = rdr.readLine()) != null) {
                byte[] bytes = (nextLine + "\n").getBytes("UTF-8"); //TODO
                if (currentBytes + bytes.length > maxBytesPerBatch
                        || currentLines > maxRowsPerBatch) {
                    createBatch(tmpOut, tmpFile, batchInfos, connection, jobInfo);
                    currentBytes = 0;
                    currentLines = 0;
                }
                if (currentBytes == 0) {
                    tmpOut = new FileOutputStream(tmpFile);
                    tmpOut.write(headerBytes);
                    currentBytes = headerBytesLength;
                    currentLines = 1;
                }
                tmpOut.write(bytes);
                currentBytes += bytes.length;
                currentLines++;
            }

            if (currentLines > 1) {
                createBatch(tmpOut, tmpFile, batchInfos, connection, jobInfo);
            }
        } finally {
            if(!tmpFile.delete())
                tmpFile.deleteOnExit();
            rdr.close();
        }
        return batchInfos;
    }

/**
     * Wait for a job to complete by polling the Bulk API.
     */
    Method2: private void awaitCompletion(RestConnection connection, JobInfo job,
            List<BatchInfo> batchInfoList) throws AsyncApiException { 
        try{
            /****
            Some code
            **/
                BatchInfo[] statusList = connection.getBatchInfoList(job.getId())
                .getBatchInfo();
                for (BatchInfo b : statusList) {
                    if (b.getState() == BatchStateEnum.Completed) {
                        if (incomplete.remove(b.getId())) 
                            //Do Something
                    }
                    else if(b.getState() == BatchStateEnum.Failed){ 

                        System.out.println("Reason: "+b.getStateMessage()+".\n  " +
                                "Number of Records Processed: "+b.getNumberRecordsProcessed());
                        throw (new Exception(""));
                    }
                }
            }
        }catch(Exception ex){log.debug(" Exception occurred.");}
    } 
```

BatchInfo 的 getStateMessage() 方法给出了所讨论的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:18:35.667

感谢“猎犬”，帮助我。

**回答**

该问题已通过删除每个单元格的换行符得到解决。

# python - 使用 BeautifulSoup 对 TD/TR 进行索引

> ID：14590223
> 
> 赞同：1
> 
> 时间：2013-01-29T18:58:22.043
> 
> 标签：python, html, indexing, beautifulsoup

HTML 片段：

```
<tr>
   <td class="faux_th">Unfinished Carport</td>
   <td>336</td>
   <td>0</td>
   <td>67</td>
</tr>
<tr class="alt">
   <td class="faux_th">Finished Encl Porch</td>
   <td>96</td>
   <td>0</td>
   <td>58</td>
</tr>
<tr>
   <td class="faux_th">Finished Open Porch</td>
   <td>60</td>
   <td>0</td>
   <td>18</td>
</tr>
<tr class="alt">
   <td class="faux_th">Base Area</td>
   <td>996</td>
   <td>996</td>
   <td>996</td>
</tr>
<tr>
   <td class="faux_th">Total</td>
   <td>1488</td> ##this is the value I need each time
   <td>996</td>
   <td>1139</td>
</tr> 
```

带有 BS4 的 Python：

```
houseArea = bs.find('table', {'id': 'ctl00_cphBody_repeaterBuilding_ctl00_gridBuildingArea'})
houseRows = houseArea.findAll('tr')[3]
houseArea1 = str(houseArea)
houseRows = houseRows.findAll('td')[1]
houseRows = str(houseRows)
houseRows = houseRows.replace('<td>', '')
houseRows = houseRows.replace('</td>', '') 
```

这对于我尝试的示例非常有效。当我使用上面包含 5 个 TR 标签的片段时，显然它会中断。我想要完成的是从标有“Total”的 TR 中提取第二个 TD。我已经尝试了各种方法，但我无法找到某种处理方式。有没有办法从反向索引它？如果是这样，“总”TR 的位置总是最后。我的最后一个选择是使用正则表达式来匹配 HTML，但即使从那里我也不确定如何提取我需要的结果。任何关于如何解决这个问题的建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:16:05.140

当然有，`[-1]`用作索引：

```
lastRow = houseRows[-1] 
```

从列表的当前长度中减去负索引，因此 index`-2`是最后一个条目，等等。

# c++ - 如果我将片段着色器附加到程序，则会出现错误 1282

> ID：14590226
> 
> 赞同：3
> 
> 时间：2013-01-29T18:58:54.860
> 
> 标签：c++, opengl, glsl, glew, fragment-shader

我正在尝试使用着色器运行程序。在[我提出的另一个问题中](https://stackoverflow.com/questions/14573079/fragment-shader-inexplicable-bahaviour)，我发现我正在将固定管道功能与较新的东西（来自 OpenGL 2.0）混合，所以我试图删除所有像 glMatrixMode 这样的“旧东西”，但我不确定我是否正确地做。毫无疑问，我还删除了 glLightfv 之类的调用，如果我使用可编程管道，我不确定它们是否被允许。

这是主要代码：

```
#include <GL/glew.h>
#include <GL/glut.h>
#include <iostream>
#include <vector>
#include "utility.hpp"
#include "program.hpp"

GLfloat width=600, height=800;
Program* program_ref;

void init()
{   
    glewInit();
    Shader vertex_shader= Shader("vertex_shader",GL_VERTEX_SHADER);
    // This just reads the file "vertex_shader", creates the shader and compiles it
    Shader geometry_shader= Shader(); // This means that the shader is empty
    // So the program class will be enough smart to recognize it and don't attach it
    Shader fragment_shader= Shader("fragment_shader",GL_FRAGMENT_SHADER);
    program_ref= new Program(vertex_shader,geometry_shader,fragment_shader);
    // This creates a program, attaches the shaders to it, links and uses it
}

void display()
{
    vector<GLfloat> quad{-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5};
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2,GL_FLOAT,0,quad.data());
    glDrawArrays(GL_QUADS,0,4);
    glDisableClientState(GL_VERTEX_ARRAY);
    glutSwapBuffers();
    cout << glGetError() << endl;
}

void reshape(int w, int h)
{
    width=w;
    height=h;
    glutPostRedisplay();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(500,500);
    glutCreateWindow("test");
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    init();
    glewInit();
    glutMainLoop();
    return 0;
} 
```

（**要查看的可选类**，在我写的评论中，程序和着色器的行为如何）

着色器.hpp：

```
#ifndef shader_hpp
#define shader_hpp

#include "utility.hpp"
#include "shader.hpp"
#include <fstream>

#define MAX_SIZE (size_t)1.0e5

class Shader
{
private:
    GLuint id;
    GLenum type;
    bool null;
public:
    Shader()
    {
        id=-1;
        type= -1;
        null= true;
    }
    Shader(const string& filename,GLenum type)
    {
        GLchar* data= new GLchar[MAX_SIZE];
        streamsize count;
        this->type= type;
        ifstream is;
        is.open(filename);
        is.read(data,MAX_SIZE);
        count= is.gcount();
        is.close();
        id=glCreateShader(type);
        glShaderSource(id,1,(const GLchar**)&data,&count);
        glCompileShader(id);
        delete[] data;
        null= false;
    }
    GLuint getId() const
    {
        return id;
    }
    GLenum getType() const
    {
        return type;
    }
    bool isNull() const
    {
        return null;
    }
};

#endif 
```

程序.hpp：

```
#ifndef program_hpp
#define program_hpp

#include "utility.hpp"
#include "shader.hpp"

class Program
{
private:
    GLuint id;
public:
    Program(const Shader& vertex_shader, const Shader& geometry_shader, const Shader& fragment_shader)
    {
    id= glCreateProgram();
    if(!vertex_shader.isNull())
    {
        glAttachShader(id,vertex_shader.getId());
    }
    if(!geometry_shader.isNull())
    {
        glAttachShader(id,geometry_shader.getId());
    }
    if(!fragment_shader.isNull())
    {
        glAttachShader(id,fragment_shader.getId());
    }
    glLinkProgram(id);
    glUseProgram(id);
    }
    GLuint getId()
    {
    return id;
    }
};

#endif 
```

当使用glew编译着色器并将它们附加到程序时，有两个类只是为了简化一切。

问题如下：如果我只附加顶点着色器而不是片段着色器，一切都很好，我看到用正确的颜色绘制的四边形（红色，因为在下面的顶点着色器中我将颜色设置为红色） . 相反，如果我还附加了片段着色器，我会看到四边形是白色的。我也试着看看哪里不对，我打印了 glGetError() 的结果。如果我包含片段着色器，我会收到错误 1282，如果我不包含它，我不会收到任何错误 (0)。

顶点着色器：

```
void main()
{
    gl_Position    = gl_ModelViewProjectionMatrix * gl_Vertex;
    gl_FrontColor  = vec4(1,0,0,1);
    // The only relevant thing I do is to set the color to red
    // I see the quad red if I attach only the vertex shader and not the fragment shader
    gl_TexCoord[0] = gl_MultiTexCoord0;
} 
```

片段着色器：

```
void main()
{
    gl_fragColor= gl_Color;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:19:37.070

试一试：

```
#include <GL/glew.h>
#include <GL/glut.h>
#include <vector>
#include <iostream>

using namespace std;

void CheckStatus( GLuint obj )
{
    GLint status = GL_FALSE, len = 10;
    if( glIsShader(obj) )   glGetShaderiv( obj, GL_COMPILE_STATUS, &status );
    if( glIsProgram(obj) )  glGetProgramiv( obj, GL_LINK_STATUS, &status );
    if( status == GL_TRUE ) return;
    if( glIsShader(obj) )   glGetShaderiv( obj, GL_INFO_LOG_LENGTH, &len );
    if( glIsProgram(obj) )  glGetProgramiv( obj, GL_INFO_LOG_LENGTH, &len );
    vector< char > log( len, 'X' );
    if( glIsShader(obj) )   glGetShaderInfoLog( obj, len, NULL, &log[0] );
    if( glIsProgram(obj) )  glGetProgramInfoLog( obj, len, NULL, &log[0] );
    cerr << &log[0] << endl;
    exit( -1 );
}

GLuint LoadShader( GLenum type, const char* src )
{
    GLuint shader = glCreateShader( type );
    glShaderSource( shader, 1, &src, NULL );
    glCompileShader( shader );
    CheckStatus( shader );
    return shader;
}

GLuint LoadProgram( const char* vert, const char* geom, const char* frag )
{
    GLuint program = glCreateProgram();
    if( vert ) glAttachShader( program, LoadShader( GL_VERTEX_SHADER, vert ) );
    if( geom ) glAttachShader( program, LoadShader( GL_GEOMETRY_SHADER, geom ) );
    if( frag ) glAttachShader( program, LoadShader( GL_FRAGMENT_SHADER, frag ) );
    glLinkProgram( program );
    CheckStatus( program );
    return program;
}

#define GLSL(version, shader)  "#version " #version "\n" #shader

const GLchar* vert = GLSL
(
    120,
    void main()
    {
        gl_Position    = gl_ModelViewProjectionMatrix * gl_Vertex;
        gl_FrontColor  = vec4(1.0,0.0,0.0,1.0);
        // The only relevant thing I do is to set the color to red
        // I see the quad red if I attach only the vertex shader and not the fragment shader
        gl_TexCoord[0] = gl_MultiTexCoord0;
    }
);

const GLchar* frag = GLSL
(
    120,
    void main()
    {
        gl_FragColor= gl_Color;
    }
);

void display()
{
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT);

    static GLuint prog = LoadProgram( vert, NULL, frag );
    glUseProgram( prog );
    glEnableClientState(GL_VERTEX_ARRAY);
    GLfloat quad[] = {-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5};
    glVertexPointer(2,GL_FLOAT,0,quad);
    glDrawArrays(GL_QUADS,0,4);
    glDisableClientState(GL_VERTEX_ARRAY);
    glutSwapBuffers();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(500,500);
    glutCreateWindow("test");
    glutDisplayFunc(display);
    glewInit();
    glutMainLoop();
    return 0;
} 
```

正如安东尼布洛姆指出的`gl_fragColor`那样`gl_FragColor`。小写字母`f`阻塞了我系统上的 GLSL 编译器。

# sql - SQL Server 触发更新时选择然后插入到多个表中

> ID：14590227
> 
> 赞同：1
> 
> 时间：2013-01-29T18:58:57.050
> 
> 标签：sql, sql-server, triggers

我正在尝试在更新列时创建触发器并将行插入其他表。数据来自`SELECT`具有多个连接的数据，需要插入到多个表中。

我的问题是，在插入之前将值插入到变量中是最佳做法吗？我以前从未创建过这样的触发器。

```
CREATE TRIGGER ship_trigger ON dbo.Orders
FOR UPDATE
AS
SET NOCOUNT ON
IF ( UPDATE(OrderStatusId) AND OrderStatusId == 1)
BEGIN

SELECT
FROM
JOIN
JOIN
WHERE 
```

我只是想了解将数据插入其他表的最有效方法

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:09:38.027

假设 SQL Server（语法建议如此），首先将值插入变量不是最佳实践，这样做有什么意义？**您实际上可以**做到这一点的唯一方法是在表变量上，或者如果您只更新一行，因为触发器会针对受您影响的所有行执行一次，并且这些行在伪表`UPDATE`上可供您使用`INSERTED`. 因此，您的触发器将如下所示：

```
CREATE TRIGGER ship_trigger ON dbo.Orders
FOR UPDATE
AS
SET NOCOUNT ON

IF ( UPDATE(OrderStatusId) AND OrderStatusId = 1)
BEGIN

    INSERT INTO SomeTable(Col1, Col2)
    SELECT Col1, Col2
    FROM INSERTED

END 
```

# opengl - 在 OpenGL 中使用点精灵渲染矢量场

> ID：14590229
> 
> 赞同：0
> 
> 时间：2013-01-29T18:59:00.490
> 
> 标签：opengl, shader, point-sprites

我想用 OpenGL 渲染一个矢量场可视化。现在，我有一个 3D 立方体，里面装满了需要用箭头替换的点。我已经阅读了很多关于 OpenGL 中的 Point Sprites 的内容，它们似乎非常适合我的需求。

我还没有真正使用纹理，所以有一些关于将它们与点精灵一起使用的问题：

首先，是否可以仅使用纹理轻松地用箭头替换我的点？如果是这样，是否可以使用着色器将这些点精灵旋转或缩放任意程度？

如果除了点精灵之外还有其他可能性来实现这一点，那么听到它们也会很棒。我正在使用 OpenGL 4.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:21:25.693

点精灵总是屏幕对齐的正方形。并且它们具有依赖于实现的最大大小。

如果你需要做这样的事情，你应该使用一个[几何着色器](http://www.opengl.org/wiki/Geometry_Shader)，它将点作为输入，并输出一个四边形（作为三角形带的 4 个顶点）。然后你可以做任何你想做的事。

请注意，您应该尽可能少地传递信息，以免脱离 GS。理想情况下，为了获得最佳性能，您应该只输出到`gl_Position`和输出到一个`vec2`指示特定位置在四边形中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:05:44.680

> 是否有可能......使用着色器以**任意程度缩放这些点精灵？**

不，点精灵有一个实现定义的大小上限。

# ios - 复选框代码错误

> ID：14590231
> 
> 赞同：-2
> 
> 时间：2013-01-29T18:59:09.140
> 
> 标签：ios, objective-c

我已经正确连接按钮，所以它一定是代码有问题。当我在模拟器中触摸按钮时，里面不会有 X。并且没有其他迹象。

```
- (IBAction)SelectButton:(id)sender{
if (boxSelected == 0){
    [Checkbox setSelected:YES];
    boxSelected = 1;
} else {
    [Checkbox setSelected:NO];
    boxSelected = 0;
}
}
- (void)viewDidLoad {
    boxSelected = 0;
    [super viewDidLoad];
}
- (void)dealloc {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:09:37.790

你可以做这样的事情：

```
[checkbox setSelected: ![checkbox isSelected]]; 
```

?

# objective-c - 我是否正确保留了选择器和目标/代表的引用？

> ID：14590234
> 
> 赞同：0
> 
> 时间：2013-01-29T18:59:13.640
> 
> 标签：objective-c, delegates, selector

我制作了自己的自定义照片库控件，用户可以在其中点击照片以获取更大的版本，或者您想要的任何其他操作。

我希望这样做，以便持有这个画廊的 UIViewController 包含选择器，例如

```
- (IBAction)photoThumbnailClicked(id)sender
{
    // Enlarge the photo here
} 
```

我想以某种方式在照片库对象中保留视图控制器和选择器的引用，因此当生成每个照片缩略图按钮时，可以像这样设置目标：

```
[thumbnail addTarget:self.target
                   action:self.action
         forControlEvents:UIControlEventTouchUpInside]; 
```

我目前正在保留这样的参考资料，尽管我不确定这是最好的方法，因为我有理由相信可能存在内存问题：

**照片画廊.h：**

```
@interface PhotoGallery : UIScrollView

@property UIViewController *target;
@property SEL action;

- (void)setTarget:(UIViewController*)viewController
     withAction:(SEL)action;
@end 
```

**PhotoGallery.m 中的 setTarget 方法：**

```
- (void)setTarget:(UIViewController*)target withAction:(SEL)action
{
    self.target = target;
    self.action = action;
} 
```

这是最好的方法吗？如果没有，我应该怎么做？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:07:54.930

*我假设ARC*

**如果**您的视图层次结构如下所示：

```
someViewControllerOrView   <------------|
       -                                |
  <any number of views>                 |
            -                           |
        photoGalleryInstance            |
                             -target ---- 
```

那么你可能希望你`target`成为一个弱参考，否则你可能会遇到一个“保留周期”。那就是`someViewController`坚持`photoGalleryInstance`和`photoGalleryInstance`坚持，`someViewController`也永远不会被释放。

```
@property (weak) UIViewController *target;
//or @property (unsafe_unretained) UIViewController *target; if target is < 5.0 
```

否则，您的代码看起来像是实现此模式的标准方式。

# c++ - 使用 c++ 和 Fortran 创建 .lib 文件/从 Fortran 调用 c++ 代码/未解析的外部符号

> ID：14590235
> 
> 赞同：0
> 
> 时间：2013-01-29T18:59:17.897
> 
> 标签：c++, fortran, object-files, psse

我正在尝试创建一个 .lib 库文件，其中包含调用 c++ 函数的 Fortran 函数，但我得到了可怕的“错误 LNK2019：未解析的外部符号...”。代码最终将与一堆其他库一起编译为 DLL，并在单独的程序 (PSSE) 中使用。当 PSSE 尝试使用我的库创建 DLL 时，我收到编译错误。这是我尝试使用的代码，然后是编译代码。代码应该只是将两个数字相加并输出答案。

fort_code.f

```
 SUBROUTINE TESTCPP ( II, JJ, KK, LL )
  INCLUDE 'COMON4.INS'

  integer*4, external :: CPPFUNCTION

  INTEGER a, b, c, test

  IF (.NOT. IFLAG) RETURN

  a = ICON(II)
  b = ICON(II + 1)
  test = CPPFUNCTION( a , b, c )
  WRITE ( ITERM, * ) 'C = ', c
  RETURN
  END 
```

cpp_code.cpp

```
extern "C" {
      void _CPPFUNCTION(int a, int b, int *c);
}

void _CPPFUNCTION(int a, int b, int *c) {
      *c = a + b;
    } 
```

编译.bat

```
cl /nologo /MD /c /W3 /O2 /FD /EHsc /errorReport:prompt /D"MSWINDOWS" /D"WIN32" ^
   /D"_WINDOWS" /D"NDEBUG" "cpp_code.cpp"

IFORT /nologo /Od /Oy- /assume:buffered_io /traceback /libs:dll /threads /c /Qip ^
      /extend_source:132 /noaltparam /fpscomp:logicals /warn:nodeclarations ^
      /warn:unused /warn:truncated_source /Qauto /Op /iface:cvf /define:DLLI ^
      /include:"C:\Program Files (x86)\PTI\PSSE32\PSSLIB" ^
      /object:"fort_code.OBJ" ^
      "fort_code.f" 

lib /out:fort_cpp.lib fort_code.obj cpp_code.obj 
```

当 PSSE 程序尝试创建 DLL 时，这是我得到的输出：

```
 ifort /nologo /assume:buffered_io /traceback /libs:dll /threads /c /Qip /extend_source:132 /noaltparam /fpscomp:logicals /Qprec /warn:declarations /warn:unused /warn:truncated_source /Qauto /fp:source /iface:cvf /define:DLLI /include:"C:\Program Files (x86)\PTI\PSSE32\PSSLIB" /object:"C:\temp\INIT_620289\11hw2ap_conec.obj" /module:"C:\temp\INIT_620289" "11hw2ap_conec.f"

 ifort /nologo /assume:buffered_io /traceback /libs:dll /threads /c /Qip /extend_source:132 /noaltparam /fpscomp:logicals /Qprec /warn:declarations /warn:unused /warn:truncated_source /Qauto /fp:source /iface:cvf /define:DLLI /include:"C:\Program Files (x86)\PTI\PSSE32\PSSLIB" /object:"C:\temp\INIT_620289\11hw2ap_conet.obj" /module:"C:\temp\INIT_620289" "11hw2ap_conet.f"

 link /INCREMENTAL:NO /NOLOGO /DLL /SUBSYSTEM:WINDOWS /MACHINE:X86 /ERRORREPORT:PROMPT @"C:\temp\INIT_620289\linkfilestod9p1.txt" /OUT:"C:\temp\INIT_620289\11hw2ap_dsusr.dll" /map:"C:\temp\INIT_620289\11hw2ap_dsusr.map"

 fort_cpp.lib(fort_code.obj) : error LNK2019: unresolved external symbol _CPPFUNCTION@12 referenced in function _TESTCPP
 C:\temp\INIT_620289\11hw2ap_dsusr.dll : fatal error LNK1120: 1 unresolved externals

 ERROR during link(1)... Aborted 
```

conec/conet 只是对外部库函数的 Fortran 调用：

```
 SUBROUTINE CONEC
C
      INCLUDE 'COMON4.INS'
C
      CALL TESTCPP         ( 55791,     0,     0,     0)
C
      RETURN
      END
      SUBROUTINE CONET
C
      INCLUDE 'COMON4.INS'
C
      IF (.NOT. IFLAG) GO TO 9000
C
C  NETWORK MONITORING MODELS
C
C
 9000 CONTINUE
C
      RETURN
      END 
```

我见过几个从 Fortran 调用 c++ 函数的不同示例，但它们看起来都略有不同。我注意到的一件事是`_`c++ 函数名称之前或之后的不同用途。我怎么知道要使用哪个：`_CPPFUNCTION`、`CPPFUNCTION`或`CPPFUNCTION_`. 我需要使用 C++ 导出函数`__declspec( dllexport )`吗？我需要`ALIAS:'_CPPFUNCTION'`在 Fortran 代码中创建一个吗？

我正在使用以下编译器：ifort：IVF IA-32 v12.1.0.233 cl：v16.00.30319.01 x86

我是否缺少将 c++ 代码正确链接到 Fortran 函数的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:32:00.853

问题在于有很多选择。无，前后一个或两个下划线，变量后或列表末尾的字符串长度，按值调用或按引用调用。大写、小写或原始命名。仅使用这些选项，正确的概率已经低于 100 分之一 (1/3*1/3*1/2*1/2*1/3)。

[您可以通过使用dumpbin](http://support.microsoft.com/kb/177429)实用程序自省 .lib 文件并手动检查 intel fortran 默认设置和项目文件中的设置来减少它。

像一些建议的那样，最优雅的方法是使用`bind(C)`和[iso_c_binding](http://fortranwiki.org/fortran/show/generating+c+interfaces)模块的组合。该`bind(C)`语句避免了必须知道名称修饰。`iso_c_bindings`提供[c 字符串](http://fortranwiki.org/fortran/show/generating+c+interfaces#strings)，`integer(c_int)`而不是确保您的类型与 C的`integer*4`兼容性。您必须知道默认情况下通过引用调用 fortran，并且可以使用`, value`按值调用。这应该会将您的成功率一直提高到 1。

下面是一个简单的例子，说明如何调用下面c++中定义的add1函数：

**测试.f90**

```
 program example

    use iso_c_binding
    implicit none

    interface
       integer(c_int) function add1(x) bind(C,name="add1")
         !DEC$ ATTRIBUTES DLLEXPORT :: add1
         use iso_c_binding
         integer(c_int), value :: x
       end function add1
    end interface

    call callingadd1()
  contains
    subroutine callingadd1()
      write(*,*) '1+1=', add1(1)
    end subroutine callingadd1
  end program example 
```

**add1.cpp**

```
extern "C" {
  int add1(int x);
}

int add1(int x) {
  return(x+1);
} 
```

*编辑*仅包含子程序的示例。用于包含在您的共享对象/dll/dylib 中。

**子程序only.f90**

```
subroutine callingadd1() bind(C, name="callingadd1")
  !DEC$ ATTRIBUTES DLLEXPORT :: callingadd1
  use iso_c_binding
  implicit none
  interface
     integer(c_int) function add1(x) bind(C,name="add1")
       !DEC$ ATTRIBUTES DLLEXPORT :: add1
       use iso_c_binding
       integer(c_int), value :: x
     end function add1
  end interface
  write(*,*) '1+1=', add1(1)
end subroutine callingadd1 
```

# ruby-on-rails - Rspec：ActionMailer::Base.deliveries 始终为空

> ID：14590242
> 
> 赞同：8
> 
> 时间：2013-01-29T18:59:58.847
> 
> 标签：ruby-on-rails, rspec

我写了一个 RSpec 集成测试。根据 test.log，我可以看到它已经发送了一封电子邮件，但是当我尝试使用 ActionMailer::Base.deliveries 访问该电子邮件时，它总是显示它是空的。

我已经阅读了其他类似的问题并尝试了一切。我难住了。

这是使用 Capybara/RSpec 的代码：

```
it "should notify owner" do

  puts "Delivery method: #{ActionMailer::Base.delivery_method.inspect}"
  # This returns: ":test", which is correct

  # Get other guests to do the review
  @review = Review.last
  share_link = "http://#{@account.subdomain}.cozimo.local:#{Capybara.server_port}/review/#{@review.slug}"

  visit(share_link)

  fill_in "email", :with => @user1.email
  fill_in "password", :with => "foobar"

  click_button "Start Review"

  # Add a comment
  click_on "ice-global-note-button"
  find(:css, "#ice-global-note-panel > textarea.ui-corner-all").set "Foo"
  click_on "ice-global-note-submit-button"

  # Test is failing here. WTF? The array should not be empty
  ActionMailer::Base.deliveries.empty?.should be_false

  # Check that a notification email was sent to the owner
  open_email(@owner.email)
  current_email.should have_content "Hi #{@owner.first_name}"

end 
```

如上所示， config.action_mailer.delivery_method = :test

在 test.log 中，显示邮件真的发送了！

```
Sent mail to somebody1@example.com (62ms)
Date: Tue, 29 Jan 2013 13:53:48 -0500
From: Review Studio <support@cozimo.com>
To: somebody1@example.com
Message-ID: <51081abcd9fbf_5bd23fef87b264a08066@Leonards-MacBook-Pro.local.mail>
Subject: Notes added for Test
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi Bruce,

Just letting you know that you have new notes added to the review:

  Project: Test
  Description: Test description
  URL: http://ballistiq.cozimo.local:3000/review/625682740

Thanks,

Review Studio
Completed 200 OK in 170ms (Views: 0.2ms | ActiveRecord: 4.3ms) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T19:37:53.120

这是使用 Capybara 和 Selenium 进行的集成测试。因此，您必须**等待**应用程序实际发送邮件，然后再检查它是否已发送。

# 注意 - 这解决了问题，但通常是不好的做法

添加一个`sleep 1`告诉 rspec 在触发发送邮件事件后等待。然后通过检查 ActionMailer::Base.deliveries 数组并通过它来恢复。

如前所述，这通常是不好的做法，因为它会减慢测试速度。

# 更好的方法

集成测试根本不应该测试邮件是否发送。测试应该被划分为被测试类的明确职责。因此，我们会以不同的方式构建测试，以便我们只测试在另一个类中发送的邮件（控制器或资源测试）。我们还可以使用期望值来检查对 mail 方法的调用是否确实进行了，尽管我们仍然可能会遇到时间问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T00:55:22.053

您永远不应该在规格上使用睡眠或那些耗时的方法，我只会减慢您的规格！

尝试在您的邮件中使用期望，在测试开始时添加类似

```
mail = mock(mail)
mail.should_receive(:deliver)
YourMailer.should_receive(:your_method).once.and_return(mail) 
```

这样你就不必等待，你实际上是在测试你必须测试的东西（代码创建和传递邮件）而不是邮件程序代码（你只在邮件对象上调用传递，实际传递是一项工作的 ActionMailer 测试，你在你的应用程序上与它无关，你应该相信调用这些方法是有效的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-02T12:42:12.643

在我的情况下`config.action_mailer.perform_deliveries`是`false`用于测试环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T22:38:23.573

您也可以使用此 wait_for_ajax 帮助程序而不是 sleep 用于您的 javascript POST。它会让 Capybara 等待 ajax 完成。

```
module WaitForAjax
  def wait_for_ajax
   Timeout.timeout(Capybara.default_wait_time) do
    loop until finished_all_ajax_requests?
   end
  end

  def finished_all_ajax_requests?
   page.evaluate_script('jQuery.active').zero?
  end
end

RSpec.configure do |config|
  config.include WaitForAjax, type: :feature
end 
```

来源： [https ://robots.thoughtbot.com/automatically-wait-for-ajax-with-capybara](https://robots.thoughtbot.com/automatically-wait-for-ajax-with-capybara)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T04:23:22.993

我认为一般来说你想`sleep()`在你的测试中避免。如果您正在使用 Capybara 进行集成测试，您只需要使用[等待的方法。](https://nulogy.com/who-we-are/company-blog/articles/sleep-is-for-the-weak/)

例如，此测试间歇性失败（`valid_step_7`发送电子邮件）：

```
it "should get past step 7 and send an email" do
  valid_step_5_no_children
  valid_step_7

  expect(ActionMailer::Base.deliveries.count).to eq(1)
  expect(page).to have_content "I AM JOHN DOE"
end 
```

这是因为它正在完成最后一步 (valid_step_7) 并立即检查 'ActionMailer::Base.deliveries.count' 以查看它是否等于 1，但它不一定没有时间填充交付数组（来自反正我的调试）。

自从我翻转测试以首先检查下一页上的内容，给`ActionMailer::Base.deliveries`填充时间并执行检查以来，我没有出现随机失败：

```
it "should get past step 7 and send an email" do
  valid_step_5_no_children
  valid_step_7

  expect(page).to have_content "I AM JOHN DOE"
  expect(ActionMailer::Base.deliveries.count).to eq(1)
end 
```

我怀疑`sleep(1)`会起作用，但我认为你在不需要时强迫睡眠。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-30T21:25:47.640

我遇到了同样的问题，最后我找到了一个简单的解决方案，不确定是否是最好的 wat：欢迎所有赞赏或更正。

首先在 environtments/test.rb 中添加这一行， `config.active_job.queue_adapter = :inline`即使我们输入了代码，这也会执行“deliver_now”`deliver_later`

在测试中添加对电子邮件的期望（我总是显示一条消息，告诉您已发送电子邮件......），例如：

```
expect(page).to have_content("We have sent a confirmation e-mail")
expect(ActionMailer::Base.deliveries.count).to eq(1) 
```

第一个期望将等到 2 秒（这是默认超时，尽管可以通过 配置`Capybara.default_wait_time = 2s`）。

所以，在我的例子中，把这个期望和添加这个配置行`config/environments/test.rb`就足以正确通过测试

# javascript - 将“地图”绑定到 OverlayView 时 MVCObject 不一致 - Google Maps API

> ID：14590243
> 
> 赞同：1
> 
> 时间：2013-01-29T19:00:03.077
> 
> 标签：javascript, google-maps, function-binding

我正在使用 Google 地图中的自定义叠加层，尤其是 OverlayView 类。经过很多麻烦和调试后，我得出结论，将 OverlayView（从 MVCObject 派生）的“地图”属性绑定到其他 MVC 对象时可能存在不一致。

我不确定这是一个错误还是只是我错过了一些重要的东西。然而，我设置了一个测试场景，与 MVCObject 相比，OverlayView 产生了奇怪的结果。测试场景如下：

```
var o = new google.maps.MVCObject()
var x = new google.maps.OverlayView();
x.bindTo("map", o);
o.set("map", myMap);
setTimeout(function () { o.set("map", null); }, 500);
setTimeout(function () { alert("Map is null: " + (x.get("map") == null));  }, 1000); 
```

根据我在 bindTo 调用后的理解，当任一对象发生更改时，“map”属性值应该在两个对象之间传播。然而，对此进行测试会产生“Map is null: false”，这与假设相矛盾。

出于某种原因，它仅在通过 setTimeout 延迟调用时才有效，但让我认为它是 OverlayView 中的一个错误的方向是，将测试代码中的 OverlayView 类型更改为常规 MVCObject 会产生正确的答案。似乎它只是“地图”属性，因为更改属性名称也可以使其工作。

这里有什么想法吗？已经在多个浏览器中测试过，结果是一样的。

# python - Python：动态分配类方法

> ID：14590249
> 
> 赞同：0
> 
> 时间：2013-01-29T19:00:16.147
> 
> 标签：python, class, dynamic, methods

本质上，这就是我想要完成的：

```
class Move(object):
    def __init__(self, Attr):
        if Attr:
            self.attr = Attr

        if hasattr(self, "attr"):
            __call__ = self.hasTheAttr
        else:
            __call__ = self.hasNoAttr

    def hasNoAttr(self):
        #no args!

    def hasTheAttr(func, arg1, arg2):
        #do things with the args

    __call__ = hasNoAttr 
```

我知道那不起作用，它只是一直使用 hasNoAttr 。我的第一个想法是使用装饰器，但我对它们不是很熟悉，而且我不知道如何根据类属性是否存在来确定它。

实际问题部分：如何根据条件确定性地使函数成为 x 函数或 y 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:03:53.623

`__call__`你真的不能用其他（非魔法）方法来做这种事情，你可以对它们进行猴子补丁，但是使用`__call__`其他魔法方法，你需要委托给魔法方法本身的适当方法：

```
class Move(object):
    def __init__(self, Attr):
        if Attr:
            self.attr = Attr

        if hasattr(self, "attr"):
            self._func = self.hasTheAttr
        else:
            self._func = self.hasNoAttr

    def hasNoAttr(self):
        #no args!

    def hasTheAttr(func, arg1, arg2):
        #do things with the args

    def __call__(self,*args):
        return self._func(*args) 
```

# sql - Oracle SQL - 过滤掉包含具有特定值的行的分区或行组

> ID：14590250
> 
> 赞同：5
> 
> 时间：2013-01-29T19:00:16.777
> 
> 标签：sql, oracle, filter

我正在尝试解决以下问题：将数据组织在表中，其中 X 列作为信息的外键（它是标识该表中的一组行的 ID，该 ID 标识该表中的一组行一起属于一个捆绑包，由特定另一个表中的实体）。因此，X 的每个不同值在此处都有与其关联的多行。我想过滤掉 X 的所有不同值，这些值与它们相关联的行包含 Q 列中的值“ABC”。

IE

数据如下所示：

```
Column X   Column Q
--------   ---------
123        ABC
123        AAA    
123        ANQ
456        ANQ
456        PKR
579        AAA
579        XYZ
886        ABC 
```

查询应返回“456”和“579”，因为 X 的这两个不同值在 Q 列中没有包含值“ABC”的行。

我正在考虑使用减号函数（选择不同的X减号（选择不同的X，其中Q =“ABC”）），因为我想要的是X的不同值。但我想知道是否有更有效的方法这样做可以避免子查询？例如，如果我可以在 X 上对表进行分区并丢弃在 Q 中具有值为“ABC”的行的每个分区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:53:59.960

`having`我更喜欢使用聚合和子句来回答这样的问题（即关于组内的组） 。这是这种情况下的解决方案：

```
select colx
from data d
group by colx
having max(case when colq = 'ABC' then 1 else 0 end) = 0 
```

如果 colx 的任何值具有`ABC`，则`max()`表达式返回 1 。. . 与 0 不匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:07:29.507

这应该有效：

```
SELECT DISTINCT t.ColX
FROM mytable t
  LEFT JOIN mytable t2 on t.colx = t2.colx and t2.colq = 'ABC'
WHERE t2.colx IS NULL 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!4/0b8c5/2)。

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T19:09:03.083

这个怎么样，使用`IN`？

[SQLFIDDLE 演示](http://sqlfiddle.com/#!4/7baef/9)

```
select distinct colx from 
demo
where colx not in (
  SELECT COLX from demo
where colq = 'ABC')
;

| COLX |
--------
|  456 |
|  579 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T19:10:24.790

试试这个：

```
select DISTINCT colx 
  from demo 
 where colq not like '%A%' 
   AND colq not like '%B%' 
   AND colx not like '%C%' 
```

[SQL小提琴](http://sqlfiddle.com/#!4/7baef/15)

# java - 如何解决 NumberFormatException：空字符串？

> ID：14590263
> 
> 赞同：2
> 
> 时间：2013-01-29T19:00:58.477
> 
> 标签：java, validation, numberformatexception

当我运行这个程序时，我在线程“main”java.lang.NumberFormatException 中得到错误异常：空字符串。是否可以通过以某种方式或必须使用 try catch 语句抛出异常来完成这项工作？

```
private double[] scores3 = new double[5]; 
Scanner keyboard = new Scanner(System.in);

public void enterData() 
{
   double score;
   double numberMin = 0;
   double numberMax = 100;

do{
    System.out.println("Enter the student's third test score");

      while (!keyboard.hasNextDouble()) {

      keyboard.next();
      }
       score3 = keyboard.nextDouble();

        }
         while  (score3 <= numberMin || score3 >= numberMax);
         double score3 = Double.parseDouble(keyboard.nextLine()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:15:42.097

在将字符串解析为数字之前.. 将字符串与“”进行比较或使用`isEmpty()`函数检查其是否为空字符串！

例子：

```
if (myString.isEmpty()) {
    //Do Nothing
} else {
    //Code to perform calculations
} 
```

或者

```
if (!myString.isEmpty()) {
    //Code to perform calculations
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:14:38.187

对于您是否可以在其他地方抛出错误的问题，您可以通过声明

```
public void enterData() throws NumberFormatException 
```

但是，如果您想继续迭代您的 while 语句，我建议您使用 try catch 块。

# bash - Shell or AWK script to group duplicate entry using first field and find difference using last field

> ID：14590271
> 
> 赞同：0
> 
> 时间：2013-01-29T19:01:23.617
> 
> 标签：bash, shell

I want to write a script (shell script or awk) to print $1 (first field) of duplicate entry all to gather and then use the last value to find difference between last and first entry or may be note the difference of value at every duplicate entry.

For example my files has following entries:

```
counter1 is 100
counter2 is 200
counter3 is 300
counter1 is 1000
counter2 is 2000
counter3 is 3000
counter1 is 10000
counter2 is 20000
counter3 is 30000 
```

I want to print:

```
counter1 is 100
counter1 is 1000
counter1 is 10000
counter2 is 200
counter2 is 2000
counter2 is 20000
counter3 is 300
counter3 is 3000
counter3 is 30000 
```

Now each counter has some value incremented so I want to find difference between each value of same counter:

```
counter1 is 100
counter1 is 1000 | difference 1000-100 = 900
counter1 is 10000| difference 10000-100= 9900 
```

I was able to print duplicate entries but not able to bunch them, its appearing in the same sequence as file has.

```
MacBook-Air:linuxscripts jimdev$ awk 'NR==FNR && a[$1]++ {b[$1];next} $1 in b' FS=" " countr.txt countr.txt 

counter1 is 100
counter2 is 200
counter3 is 300
counter1 is 1000
counter2 is 2000
counter3 is 3000
counter1 is 10000
counter2 is 20000
counter3 is 30000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:24:24.397

does this work for you?

```
sort countr.txt | grep -v '^$'  | awk '
BEGIN { field1="different" ; firstval="0" ; }
     $1 !~ field1 { print $0 ; field1 = $1 ; firstval = $NF ; continue;}
     $1  ~ field1 { print $0 " | difference " $NF "-" firstval " = " $NF-firstval ; }' 
```

and here is the output on the input file as shown in your post :

```
counter1 is 100
counter1 is 1000 | difference 1000-100 = 900
counter1 is 10000 | difference 10000-100 = 9900
counter2 is 200
counter2 is 2000 | difference 2000-200 = 1800
counter2 is 20000 | difference 20000-200 = 19800
counter3 is 300
counter3 is 3000 | difference 3000-300 = 2700
counter3 is 30000 | difference 30000-300 = 29700 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:30:41.600

Assuming that your data is in a file called `data.txt`. You can get it with a sort and an awk simple if (or using patterns):

```
sort data.txt | awk 'BEGIN{last = ""; value = 0;} {if ($1 == last) {print $1" is "$3" | difference "$3"-"value" = "($3-value)}else{last = $1; value = $3; print $1" is "$3;}}' - 
```

Explanation: first of all sort the input to have "counters" in ascending order. Then here we go with the `AWK` expression:

1.  We use 2 temporal variables: last, that stores the current counter, and the value of the first counter. We initialize it in the BEGIN part of the `AWK` script: `BEGIN{last = ""; value = 0;}`.

Now, for each line we execute the following code:

```
if ($1 == last) {
    print $1" is "$3" | difference "$3"-"value" = "($3-value);
} else {
    last = $1;
    value = $3;
    print $1" is "$3;
} 
```

line 1: compare the first field (counter) to `last`, that stores the last counter tag in order to know if we should print the difference.

line 2: if the current line has the same counter tag than the previous one we print the difference.

line 3: Else, it is a base case, so we save the current counter tag in order to compare with the next line, its value to calculate the difference and we print the line.

1.  If the new line has the same that same counter tag than the previous one, we keep the values and calculate the difference to the first value of this counter. Else, we store the new counter tag (in last variable) and its value (in value) and we just print the line.

Here is the output for your input sample:

```
counter1 is 100
counter1 is 1000 | difference 1000-100 = 900
counter1 is 10000 | difference 10000-100 = 9900
counter2 is 200
counter2 is 2000 | difference 2000-200 = 1800
counter2 is 20000 | difference 20000-200 = 19800
counter3 is 300
counter3 is 3000 | difference 3000-300 = 2700
counter3 is 30000 | difference 30000-300 = 29700 
```

# javascript - 如何将记录返回到 extjs 中不同 js 文件的存储区？

> ID：14590272
> 
> 赞同：0
> 
> 时间：2013-01-29T19:01:29.510
> 
> 标签：javascript, extjs, extjs4

我正在尝试在 extjs4 的网格上创建弹出编辑。到目前为止，我能够将记录从网格传输到另一个 js 文件上的弹出面板。我用这段代码做到了：

```
handler: function(grid, rowIndex, colIndex){
var record = grid.getStore().getAt(rowIndex);
var frm = new MyDesktop.Modules.Journals.Client.JournalsDetailForm();
frm.createWindow(desktop, record, operation); 
```

另一个文件接受这样的记录

```
jvdetailform.loadRecord(record); 
```

现在我的问题是在从弹出表单中编辑记录后，如何在按下 jvdetailform 上的添加按钮后将记录返回到商店，然后自动更新网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:28:04.497

在您形成的按钮处理程序中：

```
var values = this.getValues(); // where this == jvdetailform
record.set(values); 
```

# python - 错误：NameError：未定义名称“子进程”

> ID：14590279
> 
> 赞同：41
> 
> 时间：2013-01-29T19:01:54.383
> 
> 标签：python, solaris

```
#!/usr/bin/python3
username = 'joe'

# generate passphrase
pw_length = 6
phrase = subprocess.check_output(['pwgen', str(pw_length), '1'])
phrase = phrase.decode('utf-8').strip()

dev_null = open('/dev/null', 'w')
passwd = subprocess.Popen(['sudo', 'passwd', user], stdin=subprocess.PIPE,
                          stdout=dev_null.fileno(),
                          stderr=subprocess.STDOUT)
passwd.communicate( ((phrase + '\n')*2).encode('utf-8') )
if passwd.returncode != 0:
    raise OSError('password setting failed') 
```

我该如何解决这个错误：

```
bash-3.00# python ./pass2.py
Traceback (most recent call last):
  File "./pass2.py", line 6, in ?
    phrase = subprocess.check_output(['pwgen', str(pw_length), '1'])
NameError: name 'subprocess' is not defined 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-29T19:03:05.440

子流程是一个模块。你需要导入它。

将此作为文件中的第二行：`import subprocess`

# android - 十进制格式的输出字符串限制为 2 dp

> ID：14590280
> 
> 赞同：0
> 
> 时间：2013-01-29T19:01:55.127
> 
> 标签：android, format, decimal

坚持这一点，我确信有一个简单的解决方案，只是无法解决！

我尝试过 decmialformat、numberformat、string.format() 等，但没有任何效果。.

下面的代码，我想计算只显示限制为 2 位小数的输出。在过去的 2 个小时里尝试了各种方法，所有这些方法都会导致应用程序在运行时崩溃......

```
 Output = (Output1 / (1 -(Output2/100)))

    String OutputString = String.valueOf(Output);

    Num.setText(OutputString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:08:14.273

试试这个 ：

```
String OutputString = String.format("%.2f", Output);

Num.setText(OutputString); 
```

`String.format()`以确保您的输出中只有 2 位小数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:11:10.000

请试试这个：

```
double Output = (Output1 / (1 -(Output2/100d)))
Num.setText(String.format("%.2f",Output)); 
```

希望这能解决您的问题。最好的祝福

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T09:22:06.323

如果你想限制'decimal_point'之前和之后的位数，那么你可以使用我的解决方案。

```
private class DecimalNumberFormatTextWatcher implements TextWatcher{
    int pos;
    int digitsBeforeDecimal = 6;
    int digitsAfterDecimal = 2;
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        if(s.length() > 2)
            pos = start;
        else {
            pos = start + 2;
        }
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        mEdittext.removeTextChangedListener(this);
        String text = s.toString();
        if(text!= null && !text.equals("")){
            if(!text.contains("$")){ //if it does not contains $
                text = "$"+text;
            } else {
                if (text.indexOf("$") > 0) { //user entered value before $
                    text = s.delete(0, text.indexOf("$")).toString();
                }else {
                    if(!text.contains(".")){ // not a fractional value
                        if(text.length() > digitsBeforeDecimal+1) { //cannot be more than 6 digits
                            text = s.delete(pos, pos+1).toString();
                        }
                    } else { //a fractional value
                        if(text.indexOf(".") - text.indexOf("$") > digitsBeforeDecimal+1){ //non fractional part cannot be more than 6
                            text = s.delete(pos,pos+1).toString();
                        }
                        if((text.length() - text.indexOf(".")) > digitsAfterDecimal+1) { //fractinal part cannot be more than 2 digits
                            text = s.delete(text.indexOf(".") + 2, text.length() - 1).toString();
                        }
                    }
                }
            }
        }
        mEdittext.setText(text);
        mEdittext.setSelection(pos);
        mEdittext.addTextChangedListener(this);
    }
}

mEdittext.addTextChangedListener(new DecimalNumberFormatTextWatcher()); 
```

一旦用户键入值，这也会添加货币符号。

希望这对任何人都有帮助。

# php - PHP cURL - 如何检查 Google Crawler 是否获取正确的 robots.txt

> ID：14590287
> 
> 赞同：0
> 
> 时间：2013-01-29T19:02:39.107
> 
> 标签：php, curl

谷歌不知何故开始索引我网站的 https 版本。为了阻止这种情况，我阅读了一个教程，该教程说我需要 2 个不同的 robots.txt 文件和 .htaccess 中的一些附加代码

.htaccess

```
RewriteCond %{HTTPS} on
RewriteRule ^robots\.txt$ robots-https.txt 
```

机器人-https.txt

```
User-agent: *
Disallow: / 
```

现在已经过去了一些日子，谷歌还没有开始对 https 页面进行索引。所以现在我有点担心，想测试一下更改是否正确。

有没有办法使用 PHP 和 cURL 来检查在 https 连接中使用了哪些 robots.txt？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:22:33.383

如果您从不同的文档根目录提供站点的两个版本，则只需保留 robots.txt 的两个副本：

```
/home/sites/example.com/http/robots.txt
/home/sites/example.com/https/robots.txt 
```

如果它们都来自同一个物理目录，那么您可以简单地在虚拟主机定义中使用 Apache 别名：

```
<virtualhost example.com:443>
   Alias /robots.txt  /physical/path/to/ssl/robots.txt
</virtualhost>

<virtualhost example.com:80>
   Alias /robots.txt /path/to/standard/robots.txt
</virtualhost> 
```

无需求助于正则表达式和 mod_rewrite。

# scheme - 您将如何使用“累积”编写“最后一个”函数？

> ID：14590289
> 
> 赞同：0
> 
> 时间：2013-01-29T19:02:44.463
> 
> 标签：scheme

我一直在研究 sicp 并尝试使用累积来编写“最后一个”函数

```
(define (accumulate f x xs)
  (if (null? xs)
      x
      (f (car xs)
         (accumulate f x (cdr xs)))))

 (last '(1 2 3 4 5)) ;;=> (5) 
```

* * *

我试过了，但它不起作用

```
 (define (last seq)
   (accumulate (lambda (x y) x)
               '()
               seq)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:28:47.717

尝试这个：

```
(define (last lst)
  (accumulate (lambda (x y)
                (if (null? y)
                    (cons x y)
                    y))
              '() lst)) 
```

# python - 可以通过调用另一个函数来覆盖一个函数吗？

> ID：14590291
> 
> 赞同：1
> 
> 时间：2013-01-29T19:02:53.963
> 
> 标签：python, function, local

假设你有函数`a`和`b`. 您可以通过调用 function`a`将 function 替换`b`为另一个函数吗？

我知道你可以做到`b=a(b)`，但你能通过做来改变`b`吗`a(b)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:08:10.353

函数和方法分别是模块和类的属性。因此，您可以修改所需的属性以指向另一个函数。

```
>>> __name__
'__main__'
>>> def a():
...     print 'a'
... 
>>> def b():
...     print 'b'
... 
>>> import sys
>>> sys.modules['__main__'].b = a
>>> b()
a 
```

对于一个类：

```
>>> class A(object):
...     def a(self):
...             print 'a'
...     def b(self):
...             print 'b'
... 
>>> A.b = A.a
>>> x = A()
>>> x.b()
a 
```

如果您有一个包含要替换的名称的变量，则使用`setattr`，例如：

```
setattr(sys.modules['__main__'],'b',a)
setattr(A,'b',A.a) 
```

只需将字符串 ('b') 替换为您的变量即可。

不知道为什么你会想要？它会使代码混乱。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T19:13:42.780

您可以将代码对象替换为`b`另一个函数的代码：

```
>>> def b():
...    print 'b'
...
>>> def a():
...    print 'a'
...
>>> def c(f):
...    f.__code__ = a.__code__ # func_code instead of __code__ for py 2.5 and earlier
...
>>> c(b)
>>> b()
a 
```

尽管这几乎可以肯定表明您正在以错误的方式思考您试图解决的任何问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T19:06:03.960

你可以`global`用来完成这样的事情。

```
>>> def a():
...     global b
...     def b():
...         print "New Function B"
>>> def b():
...     print "Function B"
...
...
>>> b()
Function B
>>> a()
>>> b()
New Function B
>>> 
```

如果您不知道要替换哪种方法，可以使用`function.func_code`将一个函数的代码替换为另一个函数的代码。

```
>>> def change(old_func, new_func):
...     old_func.func_code = new_func.func_code
...
>>> def a():
...     print "Function A"
...
>>> def b():
...     print "Function B"
...
>>> def c():
...     print "Function C"
...
>>>
>>> change(a, b)
>>> a()
Function B
>>> change(a, c)
>>> a()
Function C
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T19:06:10.320

我不确定您的目标是什么，但是是的，您可以这样做：

```
>>> def a():
...     global b
...     b = a
...     return 'a'
... 
>>> def b():
...     return 'b'
... 
>>> b()
'b'
>>> a()
'a'
>>> b()
'a'
>>> def c(f): 
```

> 如果我不知道我事先覆盖了 b 怎么办？换句话说，如果我想将 b 作为参数传递给 a

```
>>> def c(f):
...     global b
...     b = f
...     return 'c'
... 
>>> def d():
...     return 'd'
... 
>>> b()
'a'
>>> c(d)
'c'
>>> b()
'd'
>>> c(a)
'c'
>>> b()
'a' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T19:08:42.190

你可以像这样轻松地做到这一点

```
def a(func):
    globals()[func] = c

def b():
    print('b')

def c():
    print('c')

a()
b()
>>> c 
```

# django - Django 应用程序中的版本号

> ID：14590292
> 
> 赞同：38
> 
> 时间：2013-01-29T19:03:02.987
> 
> 标签：django

我正在开发一个 Django 应用程序，我想显示应用程序的版本（以便发现错误的人知道应用程序的版本并可以提供更好的错误报告）。

是否有一种普遍接受的方式在 Django 中存储版本号（我的意思是我的应用程序的版本，而不是 Django）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T08:33:57.993

I was looking for this exact same question, and found your question. The answer you accepted is not quite satisfactory to me.

I am working with django debugtoolbar, in there you can also show all versions of the apps used. I was wondering how to get the versions of my custom applications to show there as well.

Looking a bit further I found this question and answer: [How to check the version of a installed application in Django in running time?](https://stackoverflow.com/questions/13145483/how-to-check-the-version-of-a-installed-application-in-django-in-running-time?rq=1)

This answer however does not tell me where to put this `__version__`

So I looked in to an open application, which does show up in django toolbar. I looked in to the django restframework code, there I found out:

the version is put in the `__init__.py` file

(see [https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/**init**.py](https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/__init__.py))

and it is put here as:

```
__version__ = '2.2.7'
VERSION = __version__  # synonym 
```

And after this, in his setup.py, he gets this version from this `__init__.py` : see: [https://github.com/tomchristie/django-rest-framework/blob/master/setup.py](https://github.com/tomchristie/django-rest-framework/blob/master/setup.py)

like this:

```
import re

def get_version(package):
    """
    Return package version as listed in `__version__` in `init.py`.
    """
    init_py = open(os.path.join(package, '__init__.py')).read()
    return re.match("__version__ = ['\"]([^'\"]+)['\"]", init_py).group(1)

version = get_version('rest_framework') 
```

**When using buildout and zestreleaser:**

By the way, I am using buildout and zest.releaser for building and versioning.

In this case, above is a bit different (but basically the same idea):

see [http://zestreleaser.readthedocs.org/en/latest/versions.html#using-the-version-number-in-setup-py-and-as-version](http://zestreleaser.readthedocs.org/en/latest/versions.html#using-the-version-number-in-setup-py-and-as-version)

The version in setup.py is automatically numbered by setup.py, so in `__init__.py` you do:

```
import pkg_resources

__version__ = pkg_resources.get_distribution("fill in yourpackage name").version
VERSION = __version__  # synonym 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-12-15T13:08:05.190

有很多地方可以存储您的应用程序版本号和一些允许您在 django 模板中显示它的方法。很大程度上取决于您使用的发布工具和您自己的偏好。

以下是我在当前项目中使用的方法。

# 将版本号放入version.txt

我将应用程序版本号存储在*version.txt*文件中。这是[zest.releaser](https://pypi.python.org/pypi/zest.releaser)发布工具（我正在使用）在发布时考虑的位置之一。

*version.txt*的全部内容就是应用的版本号，例如：1.0.1.dev0

# 将数字读入 settings.py 中的变量

```
...    
with open(version_file_path) as v_file:
    APP_VERSION_NUMBER = v_file.read()
... 
```

# 创建自定义上下文处理器

*本段和以下内容基于[bcchun](https://stackoverflow.com/a/433209/878027)对[Can I access constants in settings.py from templates in Django 的精彩回答？](https://stackoverflow.com/q/433162/878027)*

自定义上下文处理器将允许您将应用程序版本号添加到每个渲染模板的上下文中。您不必在每次渲染模板时手动添加它（通常您希望在每个页面的页脚中都有版本号）。

在你的 app 目录中创建*context_processors.py*文件：

```
from django.conf import settings

def selected_settings(request):
    # return the version value as a dictionary
    # you may add other values here as well
    return {'APP_VERSION_NUMBER': settings.APP_VERSION_NUMBER} 
```

# 将上下文处理器添加到 settings.py

```
TEMPLATES = [{
    ...
    'OPTIONS': {
        'context_processors': [
            ...
            'your_app.context_processors.selected_settings'
        ],
    },
 }] 
```

# 在视图中使用`RequestContext`或`render`

[RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#using-requestcontext)并使用您在*settings.py*`render`中设置的 context_processors 提供的变量填充上下文。

 *例子：

```
def some_view(request):
    return render(request, 'content.html') 
```

# 在模板中使用它

```
...
<div>{% trans 'App version' %}:{{APP_VERSION_NUMBER}}</div>
.... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-26T14:25:10.063

对我来说，最好的结果/方法是使用`__init__.py`项目文件夹上的，例如

```
.
├── project_name
│   ├── __init__.py 
```

然后使用标准方式进行检查，如（[PEP396](http://legacy.python.org/dev/peps/pep-0396/)）中所述

```
>>> import proyect_name
>>> proyect_name.__version__
'1.0.0' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-05-10T18:18:41.167

我通过在我的 django 项目中添加一个模板标签来解决这个问题：

在 proj/templatetags 中，添加了 version.py：

```
from django import template
import time
import os

register = template.Library()

@register.simple_tag
def version_date():
    return time.strftime('%m/%d/%Y', time.gmtime(os.path.getmtime('../.git'))) 
```

然后，在我的 base.html（或任何模板）中，添加：

```
{% load version %}
<span class='version'>Last Updated: {% version_date %}</span> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-29T19:23:38.727

设置文件似乎是存储版本号的合理位置。我不相信有任何 Django 接受的方式来存储您的个人应用程序的版本号。这似乎是您应该定义的应用程序特定变量。

有关从 svn 中获取版本号的更多信息：[Getting SVN revision number into a program automatically](https://stackoverflow.com/questions/1449935/getting-svn-revision-number-into-a-program-automatically)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-09-15T10:56:13.330

如果使用 GIT 进行源代码版本控制，您可能需要手动升级稳定版本，并为开发提交自动编号。

在 Django 项目中获得这个的一个原因是：

在“PROJECT/_ *init* _.py”中定义：

```
__version__ = '1.0.1'
__build__ = '' 
```

然后在setting.py中做：

```
import os
import subprocess
import PROJECT

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

try:
    PROJECT.__build__ = subprocess.check_output(["git", "describe", "--tags", "--always"], cwd=BASE_DIR).decode('utf-8').strip()
except:
    PROJECT.__build__ = PROJECT.__version__ + " ?" 
```

因此，PROJECT._ *build* _ 将显示：

```
v1.0.1 in stable releases 
```

和

```
v1.0.1-N-g8d2ec45 
```

当最近的标签不指向最后一次提交时（其中 N 计算标签后的额外提交次数，后跟提交签名）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-19T16:12:55.693

不是针对 Django 应用程序本身，而是针对 Python 模块，是的。请参阅[PEP 396](http://www.python.org/dev/peps/pep-0396/)、[PEP 386](http://www.python.org/dev/peps/pep-0386/)和**[verlib](https://bitbucket.org/tarek/distutilsversion)**库 ( **easy_install verlib** )。

（我会详细说明，但我自己现在才发现这一点。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-04T15:53:30.983

我使用此选项`__import__('project').VERSION`或`__import__('project').__version__`. 正如大家所说，版本放在`__init__.py`文件中，例如：

```
proyect_name
  | __init__.py

# __init__.py file
VERSION = '1.0.0' # or __version__ = '1.0.0' 
```

现在你可以从任何地方得到它：

```
# Error tracking settings
sentry_sdk.init(
    ...
    release=__import__('cjvc_project').VERSION
) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-07T02:13:31.057

版本信息通常保存在 git commit 标签中。否则，即使 git 提交和上次更新时间也可以很好地指示哪个版本正在运行以及何时部署。

对于那些使用`django-rest-framework`并且只有 API 的人，您可以返回这两个；使用`/api/version`端点的“最后更新”和“最后 git 提交”：

在`views.py`：

```
import os
import time
import subprocess
import json

class VersionViewSet(ViewSet):
    def list(self, request):
        # ['git', 'describe', '--tags'] # use this for named tags (version etc)
        # ['git', 'describe', '--all', '--long'] # use this for any commit
        # git log -1 --pretty=format:"Last commit %h by %an, %ar ("%s")"
        # {"commit_hash": "%h", "full_commit_hash": "%H", "author_name": "%an", "commit_date": "%aD", "comment": "%s"}
        FILE_DIR = os.path.dirname(os.path.abspath(__file__))
        git_command = ['git', 'log', '-1', '--pretty={"commit_hash": "%h", "full_commit_hash": "%H", "author_name": "%an", "commit_date": "%aD", "comment": "%s"}']
        git_identifier = subprocess.check_output(git_command, cwd=FILE_DIR).decode('utf-8').strip()
        git_identifier = json.loads(git_identifier)
        last_updated = time.strftime('%a, %-e %b %Y, %I:%M:%S %p (%Z)', time.localtime(os.path.getmtime('.git'))).strip()
        return Response({
            "last_updated": last_updated,
            "git_commit": git_identifier
        }, status=200) 
```

在`urls.py`：

```
from myapp.views import VersionViewSet

router = routers.DefaultRouter()
...
router.register(r'version', VersionViewSet, base_name='version') 
```

这将创建与 API 中的其他端点一致的端点。

输出将如下所示`http://www.example.com/api/version/`：

```
HTTP 200 OK
Allow: GET, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept

{
    "last_updated": "Mon, 6 May 2019, 11:19:58 PM (IST)",
    "git_commit": {
        "commit_hash": "e265270",
        "full_commit_hash": "e265270dda196f4878f4fa194187a3748609dde0",
        "author_name": "Authorname",
        "commit_date": "Mon, 6 May 2019 23:19:51 +0530",
        "comment": "The git commit message or subject or title here"
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-18T01:11:57.307

我使用了上下文处理器，它看起来像这样：

```
import sys
sys.path.append('..')

from content_services import __version__

def get_app_version(request):
    """
    Get the app version
    :param request:
    :return:
    """
    return {'APP_VERSION': __version__} 
```

由于项目名称是`content_services`我必须将 sys 路径更改为 1 级，以便我可以导入它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-31T12:32:02.433

如果您使用 Git 和版本标记，您可以在管理站点标题中显示应用程序版本。

`version.py`在项目或任何应用模块中创建文件：

```
import os
import subprocess

FILE_DIR = os.path.dirname(os.path.abspath(__file__))

def get_version_from_git():
    try:
        return subprocess.check_output(['git', 'describe', '--tags'],
                                       cwd=FILE_DIR).decode('utf-8').strip()
    except:
        return '?'

VERSION = get_version_from_git() 
```

将版本添加到管理站点标题中`urls.py`：

```
from django.contrib import admin
from django.utils.safestring import mark_safe

from utils import version

...

admin.site.site_header = mark_safe('MyApp admin <span style="font-size: x-small">'
                                   f'({version.VERSION})</span>') 
```

如果您需要将版本提供给 Django 调试工具栏等外部工具，您可以`__init__.py`按照上面的建议在项目中公开版本：

```
from utils import version

__version__ = version.VERSION
VERSION = __version__  # synonym 
```*

# c# - 使用 .NET dll 作为 COM

> ID：14590295
> 
> 赞同：0
> 
> 时间：2013-01-29T19:03:10.667
> 
> 标签：c#, .net, sql-server-2005, com, sqlclr

我有一个有点令人费解的问题，我需要从 SQL Server 2005 存储过程调用 WCF Web 服务。

在研究时，我发现 .NET SQL Server 2005 的唯一版本将原生支持它 2.0 - 但我需要使用客户端来使用为 .NET 4 编写的 Web 服务。在尝试了一些解决方法以尝试获取 SQL Server 之后为了识别 .NET 4 DLL，我决定简单地创建一个 .NET 2 CLR 存储过程，并使用以 COM 形式编写的 .NET 4 编写的包装类来调用我的 Web 服务。

我找到了几个指南，处理如何将 .NET 4 dll 与 .NET 2 用作 COM dll（[链接](http://generally.wordpress.com/2006/07/28/exposing-your-net-assembly-through-com/)、[链接](http://blogs.microsoft.co.il/blogs/arik/archive/2011/05/30/how-to-use-a-net-4-based-dll-from-net-2-based-application.aspx)），但仍在苦苦挣扎。

我的“包装类”（.NET 4）如下所示：

```
namespace Wrapper
{
    [Guid("4C1D992C-4965-49B2-A694-33810A3B9775")]
    [ComVisible(true)]
    public class WrapperClass
    {
         public bool Process(Guid ID)
         {
         }
    }
} 
```

我已经按照上面第二个链接的建议添加了 app.manifest 文件。但是，当我将生成的 DLL 添加到我的 .NET 2 sql server 项目时，它无法构建并显示以下消息：

```
1>c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): Warning:  MSB3274: The primary reference "Wrapper" could not be resolved because it was built against the ".NETFramework,Version=v4.0" framework. This is a higher version than the currently targeted framework ".NETFramework,Version=v2.0". 
```

我在这里做错了什么？我尝试根本不添加 DLL 作为参考，但代码甚至无法编译。

或者，是否有另一种（更简单的）方法可以解决这个问题？

编辑：我也不能直接添加网络参考：

![在此处输入图像描述](../Images/e21fe3d2c54862d2e315f4e84d2bc14b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:36:52.887

我最终只使用了[John Koerner](https://stackoverflow.com/users/573218/john-koerner)的建议并使用未使用的 WSDL 生成客户端`System.ServiceModel`。结果，我制作了我的 CLR 程序集 .net 2.0，它运行良好。

# grails - DirContextOperations 为空

> ID：14590299
> 
> 赞同：3
> 
> 时间：2013-01-29T19:03:16.173
> 
> 标签：grails, spring-security, ldap

所以我有一个可以在我的桌面上完美运行的应用程序，并且在部署到 Windows 机器上的 tomcat 时也可以完美运行。但是，当我尝试在部署在同一版本的 tomcat 上但在 AIX 上使用此应用程序时，它无法从 LDAP 中检索数据。

用户能够成功进行身份验证，但上下文为空。`DirContextOperations`被传递到我`ContextMapper`的为空。有谁知道需要打开哪些端口才能获取此数据或可能需要进行哪些其他配置？根据我所看到的，它必须是某处的服务器配置问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T18:45:52.723

我不确定这是否是您的情况的答案。尝试从 Active Directory 获取值时，我在**DirContextOperations**对象中也得到了**null 。**

 **[正如Grails LDAP 插件文档](http://grails-plugins.github.io/grails-spring-security-ldap/docs/manual/guide/2.%20Usage.html)所述，我试图获得这样的 ldap 属性：

```
String mail = ctx.originalAttrs.attrs['mail'].values[0] 
```

所有这些都是空的。所以我改变了上面的这一行，它对我有用：

```
String mail = ctx.attributes.getAt('mail').values[0].toString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T03:23:44.080

如果您使用的是[Spring Security LDAP](http://grails-plugins.github.io/grails-spring-security-ldap/docs/manual/guide/2.%20Usage.html)插件，那么将下面提到的 AIX 中的配置与应用程序关联起来很容易。我为配置准备了一些快照，以免在此处弄乱答案空间。查看 AIX 中的[LDAP 配置](http://www.slideshare.net/dhiraj.mahapatro/ldap-config-in-aix)并尝试在 AIX Server 中进行设置。

现在来到 LDAP 插件，除了需要设置一堆属性外，别无其他。在 AIX 中完成 LDAP 配置后，这些属性的值将可用（如上面提到的幻灯片中所述）。

**注意：-**
创建独立 LDAP 后，如果用户与组关联，您可能需要添加领域。我没有在幻灯片中提到相同的内容，因为我现在没有可用的活动 LDAP 主机。

**更新**您可以尝试切换到身份验证
而不是使用。使用 Config 中的以下设置强制使用进行身份验证并返回. 可以试试这个设置吗？`BindAuthenticator``PasswordComparisonAuthenticator``PasswordComparisonAuthenticator``DirContextOperations`

`grails.plugins.springsecurity.ldap.authenticator.useBind = false`

@Refer [LdapAuthentication 实现](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ldap.html)。**

# c# - 为业务逻辑使用 Web API？

> ID：14590302
> 
> 赞同：0
> 
> 时间：2013-01-29T19:03:28.557
> 
> 标签：c#, asp.net, api

我的 Web 应用程序需要能够从 Paymo [http://api.paymo.biz/获取我的所有项目](http://api.paymo.biz/)

我熟悉 JSON 和 XML，但我想知道的是，如何与 api 交互（调用它）。

理想情况下，我想在 ASP .Net 中创建一个类，例如 PaymoManager(int apikey....)

从那里我可以包装我需要的功能。我只需要了解，如何调用 API 的函数以及如何获得响应。我不熟悉网络API。

* * *

编辑：你能给我一个例子，即使有一些抽象的网址。我需要在 CS 文件中完成服务器端。

基本上是一个简单的例子，它调用 someurl.com/somerequest 然后你如何接收 JSON 或 XML ......这在类方面是如何工作的。我想在课堂上这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:21:52.493

[http://api.paymo.biz/docs/misc.overview.html](http://api.paymo.biz/docs/misc.overview.html)

> 要使用 Paymo API 执行操作，您需要向 Paymo 网络服务发送一个请求，指定一个方法和一些参数，并且会收到一个格式化的响应。

这意味着您可以使用[WebClient](http://msdn.microsoft.com/en-US/library/fhd1f0sw.aspx)从 url 下载字符串：

```
WebClient client = new WebClient();
string reply = client.DownloadString (address); 
```

根据您指定的格式，您可以将回复解析为[XML](http://msdn.microsoft.com/en-us/library/bb345532.aspx)或[JSON](http://msdn.microsoft.com/en-us/library/bb355316.aspx)。

```
XDocument xml = XDocument.Parse(reply);

// where ReplyType is a class that defines public 
// properties matching the format of the json string
JavaScriptSerializer serializer = new JavaScriptSerializer();
ReplyType abc = serializer.Deserialize<ReplyType>(reply); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:26:15.677

如果您使用的是 .NET 4.5，您可能会考虑像这样使用[HttpClient ：](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)

```
static async void Main()
    {
    try 
    {
      // Create a New HttpClient object.
      HttpClient client = new HttpClient();

      // fill in the details in the following string with your own KEY & TOKEN:
      string requestUrl = "https://api.paymo.biz/service/paymo.auth.logout?api_key=API_KEY&format=JSON&auth_token=AUTH_TOKEN"
      HttpResponseMessage response = await client.GetAsync(requestUrl );
      response.EnsureSuccessStatusCode();
      string responseBodyJSON = await response.Content.ReadAsStringAsync();
      // Above three lines can be replaced with new helper method in following line 
      // string body = await client.GetStringAsync(uri);

      Console.WriteLine(responseBodyJSON );
      // Now you can start parsing your JSON....

    }  
    catch(HttpRequestException e)
    {
      Console.WriteLine("\nException Caught!"); 
      Console.WriteLine("Message :{0} ",e.Message);
    }
  } 
```

# php - 在文件夹路径外定义 webroot

> ID：14590303
> 
> 赞同：1
> 
> 时间：2013-01-29T19:03:28.747
> 
> 标签：php

我有这样的文件夹结构：

```
 public_html
     /index.php   
  outside
     /other.php 
```

我想要`public_html/index.php`包含文件，该文件位于`outside`文件夹中。所以，我想在文件中定义外部文件夹路径`public_html/index.php`。我这样做：

**索引.php**

```
 $doc_root_upper = preg_replace("#/[^/]+$#", "", $_SERVER["DOCUMENT_ROOT"]);
 $outside_folder = $doc_root_upper."/outside";
 include outside_folder.'/other.php'; 
```

这行得通，但是在文件夹路径之外定义 webroot 有更好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:06:12.967

我个人的`init.php`偏好`auto_prepend_file`是以`chdir($_SERVER['DOCUMENT_ROOT'])`.

这意味着我所有的包含和其他文件功能都是从文档根目录完成的。

就您而言，这意味着您可以`include ../outside/other.php`可靠地进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:07:04.903

使用这样的相对路径：

```
Include("../outside/other.php"); 
```

../ 表示向上一个目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T19:11:47.503

我喜欢使用 a`chdir()`来获取显式路径，然后将它们添加到包含路径中。我倾向于有一个名为的文件`init.php`，其中包含以下内容：

```
$path = get_include_path(); // get the current path
$oldcwd = getcwd(); // get the current path

// change to outside of the document root
chdir($_SERVER['DOCUMENT_ROOT'] . "/.."); 
$newcwd = getcwd(); // get the new working directory

// build the new path. Using hte _SEPARATOR constants ensures 
// that it works on all platforms.
$newpath = $path . PATH_SEPARATOR . $newcwd . DIRECTORY_SEPARATOR . "outside"; 

// Set the new path
set_include_path($newpath);

chdir($oldcwd); // change back to the original working directory 
```

# ios - loadView() 没有调用

> ID：14590304
> 
> 赞同：1
> 
> 时间：2013-01-29T19:03:33.037
> 
> 标签：ios, objective-c, nimbus-ios

我有一个 UIViewController 使用定义的 loadView 方法调用另一个视图控制器。我一直在尝试许多选项，但没有成功解决 loadView 方法未调用的问题。

任何帮助表示赞赏。

谢谢。马科斯

调用者 UIViewController

```
#import "MyAlbumViewController.h"
@interface ViewController : UIViewController
@end 
```

执行

```
#import "ViewController.h"
@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)viewDidAppear:(BOOL)animated{

    UIViewController*albumVC = [[MyAlbumViewController alloc] init];

    [self.navigationController pushViewController:albumVC animated:YES];

}
@end 
```

调用 UIViewController

```
@interface MyAlbumViewController : NIToolbarPhotoViewController <NIPhotoAlbumScrollViewDataSource>

@end 
```

执行

```
#import "MyAlbumViewController.h"

@implementation MyAlbumViewController

- (void)loadView{

    [super loadView];

    self.photoAlbumView.dataSource = self;

    // Set the default loading image.
    self.photoAlbumView.loadingImage = [UIImage imageWithContentsOfFile:
                                        NIPathForBundleResource(nil, @"NimbusPhotos.bundle/gfx/default.png")];

    self.title = NSLocalizedString(@"Loading...", @"Navigation bar title - Loading a photo album");

    [self loadAlbumInformation];
}... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:16:27.883

的想法`loadView`是完全覆盖方法，而不是调用`super`

您所做的正是该`viewDidLoad`方法的用途，无论您是从 nib 文件还是其他文件加载它都没有关系

我引用了你自己的帖子，在你的`ViewController.m`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:39:43.307

我正在推动视图控制器：

```
 [self.navigationController pushViewController:albumVC animated:YES]; 
```

我刚改成：

```
[self presentViewController:albumVC animated:YES completion:nil]; 
```

UIViewController 导航控制器

> navigationController 视图控制器层次结构中最近的祖先，即导航控制器。（只读）
> 
> @property(nonatomic, readonly, retain) UINavigationController *navigationController 讨论 如果接收器或其祖先之一是导航控制器的子级，则此属性包含拥有的导航控制器。如果视图控制器未嵌入导航控制器，则此属性为零。

# google-maps - 谷歌地图搜索：搜索结果标记的中心地图

> ID：14590305
> 
> 赞同：0
> 
> 时间：2013-01-29T19:03:44.950
> 
> 标签：google-maps, google-maps-api-3

我有一个带有搜索功能的 Google Map (v3) 设置来搜索 Fusion Table。搜索工作正常，但我需要地图以搜索结果标记为中心。我有一大堆标记，希望用户在一个屏幕上查看所有搜索结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:53:11.667

使用 Fusion Tables v1.0 API 或 GViz 查询表。将所有位置添加到 google.maps.LatLngBounds 对象（带有扩展）。在结果边界上调用地图对象的 .fitBounds 方法。需要更多信息才能提供更多详细信息。

[在geocodezip.com](http://www.geocodezip.com)上查询具有各种数据格式的表的示例

# url - 带有（'）的android中的RESTful url

> ID：14590306
> 
> 赞同：0
> 
> 时间：2013-01-29T19:03:49.753
> 
> 标签：url, url-encoding

我正在开发一个 android 应用程序，我正在使用 RESTful 服务连接到 SQL azure 数据库。我需要使用这个 RESTful url：

```
http://example.com/wcfDataService1.svc/wn_synset?$filter=word%20eq%20'child's_game'&$select=synset_id,w_num,word,ss_type,wn_gloss/gloss&$expand=wn_gloss 
```

如您所见，我正在`child's_game`表中寻找这个词 () `wn_synset`。问题`(')`是`child's_game`. 如您所见，它将单词放在引号内`'...'`，因此当它在其中找到引号时，`child's_game`它认为这是单词的结尾，其余部分是错误的。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:08:57.590

您可以使用 ' 对符号进行 url 编码`%27`。请参阅[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)并在“自己尝试”部分进行尝试。

**编辑：（**将正确猜测从评论移到答案本身）

或者仅仅是服务器端的 SQL-Server 出错了？就像它从 wn_synset 构建一个 select * where word = 'child's game' 并且有错误？然后，您必须查看如何为数据库转义单引号 - 可能是使用两个单引号 ('')，所以也许尝试发送 child's game 而不是 child's game。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:10:09.267

没有问题，或者换句话说，你的 URL 不是 URL。如果它是 URL，则不会是 '. 当然，你可以在你的 URL 中有这个 '，可以这么说。但需要按照 URL 的规则进行转义。您可能想查看[URLEncoder](http://developer.android.com/reference/java/net/URLEncoder.html)和[Uri](http://developer.android.com/reference/android/net/Uri.html)。

# android - 尝试创建三星 Galaxy Tab 模拟器时的 SDK 和 AVD 问题

> ID：14590312
> 
> 赞同：2
> 
> 时间：2013-01-29T19:04:06.350
> 
> 标签：android, sdk, android-emulator, avd

我尝试按照网上的所有 tuts 创建一个银河选项卡模拟器，但我在我的 SDK 管理器中找不到可用的包 => 第三方附加组件 => 三星电子附加组件！！！

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T21:27:28.640

[读这个。](http://developer.samsung.com/android/tools-sdks/Samsung-GALAXY-Tab-Emulator)

从该页面下载文件`addon_galaxy_tab_samsung_electronics_8.zip`。

将文件夹复制`addon_galaxy_tab_samsung_electronics_8`到`~/sdk/add-ons`.

然后打开 AVD manager，Make a new Emulator，然后在 target 中选择`GALAXY TAB Addon`。

如果您指的是 Galaxy Tab 10.1，也请使用以下设置：

> 设备：10.1" WXGA（平板电脑）（1280x800）
> 目标：Galaxy Tab Addon *（来自您下载的内容）*
> 。RAM：1024 *（如果您的 PC 速度较慢，请不要这样做；这不是真正必要的）*
> 。VM 堆：32

# windows - Windows 计划任务和控制台应用程序

> ID：14590313
> 
> 赞同：1
> 
> 时间：2013-01-29T19:04:10.447
> 
> 标签：windows, console

我正在创建一个我想每 60 秒（1 分钟）运行一次的简单作业。我不想使用 Windows 服务安装程序来解决这个问题，而是想创建一个通过 Windows 调度程序运行的控制台应用程序。

如果一个工作开始并且处理时间超过 60 秒，会发生什么？工作的第二个实例会再次开始吗？我希望 Windows 以某种方式管理作业，以便在第一个作业完成之前不会启动作业的第二个实例。

这有意义吗？Windows 任务计划程序会默认使用这种方法吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:15:38.313

是的，Windows 默认会启动一个新实例；但是，您可以控制该行为。在控制面板中，转到任务计划程序。找到任何定时任务并右键单击/属性，然后选择“设置”选项卡。在底部，您将看到一个名为“如果任务已在运行，则适用以下规则”的选项。您可以选择不启动新实例、并行运行新实例、将新实例排队或停止现有实例。你想要第一选择。[Windows 任务计划程序 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)提供了相同的功能。

# ember.js - 在 Ember.js 模板中，如何打印出 HTML 将使用的模型属性，例如用于图像的 src 或用于链接的 href

> ID：14590314
> 
> 赞同：11
> 
> 时间：2013-01-29T19:04:15.797
> 
> 标签：ember.js, handlebars.js

使用：

*   余烬：v1.0.0-pre.4
*   余烬数据：修订版 11
*   车把：1.0.rc2

所以我有一个模板，我已经连接到一个从 REST API 接收信息的控制器。只需打印出文本，这很好，但这些车把表达......

```
<img src="{{ imageUrl }}"/> 
```

...插入 dom 时的样子：

```
<img src="&lt;script id='metamorph-28-start' type='text/x-placeholder'&gt;&lt;/script&gt;http://asdf.com/image.jpg&lt;script id='metamorph-28-end' type='text/x-placeholder'&gt;&lt;/script&gt;"> 
```

我显然对 Ember.js 和 Handlebars 很陌生。

我尝试过搜索“在 ember 模板中呈现 url”和“在 ember mustache 模板中打印 html”。确认，可能很明显，但我错过了。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-29T19:11:56.503

尝试这个：

`<img {{bind-attr src="imageUrl"}} />`

但是您可以拥有多个属性，例如：

`<img {{bind-attr src="imageUrl" alt="imageTitle"}}>`

这是文档：[http ://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_bind-attr](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_bind-attr)

此外，在您不需要绑定变量的某些情况下可能很有用，您可以使用：

`<img src="{{unbound imageUrl}}" />`

参考文档：[http ://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_unbound](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_unbound)

但第一种方法通常是最好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:50:11.200

再进一步让你的脚更湿，我们实际上可以创建一个表示图像的视图，并使用它来添加更多功能。

例如，[在下面的 JSFiddle 中，](http://jsfiddle.net/hXCRj/)我将视图设置`tagName`为`img`（其默认值为 a `div`），然后添加一个`attributeBindings`以将属性绑定到视图。在我们的例子中，我们想要绑定到`src`属性。然后我们需要做的就是将`src`属性指定为视图的属性，并给它一个默认值——在这个例子中，Google。

因此视图按预期工作：我们已将图像显示为视图的一部分。

但是，更进一步，我们现在可以`src`使用该`.set()`方法轻松更改图像的属性。在用户单击 DOM 中的视图时调用的神奇`click`事件（通过单击 JSFiddle 中的 Google 徽标自行尝试！），`src`属性从 Google 的徽标更改为 Yahoo 的徽标。由于我们正在观察`src`来自 的属性`attributeBindings`，因此一旦我们调用它就会更新：

`this.set('src', 'http://l.yimg.com/dh/ap/default/120910/yahoo_logo_br.png');`

万一 JSFiddle 消失的完整视图代码：

```
App.ImageView = Ember.View.extend({
    tagName: 'img',
    attributeBindings: ['src'],
    src: 'https://www.google.com/images/srpr/logo3w.png',
    click: function() {
        this.set('src', 'http://l.yimg.com/dh/ap/default/120910/yahoo_logo_br.png'); 
    }
}); 
```

# c# - XNA 在 PC 中显示 xbox 屏幕键盘

> ID：14590315
> 
> 赞同：5
> 
> 时间：2013-01-29T19:04:16.960
> 
> 标签：c#, .net, xna, keyboard, gamepad

我需要在类似 xbox 的屏幕键盘中显示和输入一些文本。可悲的是，当我打电话时`Guide.BeginShowKeyboardInput`，只显示了一些有趣的文本框，我必须通过键盘填写。我知道，在 PC iv 上使用键盘非常正常，但在我的情况下，我必须通过游戏手柄输入文本，在屏幕键盘上使用 xbox。

有什么办法可以做到这一点？在 PC 上调用 xbox 屏幕键盘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:38:06.667

如果您需要一个触摸屏显示器，您可以这样做

```
 using System.Diagnostics;
 using System.IO; 
```

然后使用这个功能

```
 Process.Start(Environment.GetFolderPath(Environment.SpecialFolder.System) + Path.DirectorySeparatorChar + "osk.exe"); 
```

但如果您需要它像 xbox 控制器一样使用，您可能需要构建自己的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:30:01.397

不，这是一个设计决定（在此处记录），让最终用户控制被调用的键盘。因此，最终用户必须触摸文本框（或类似物）来调用虚拟屏幕键盘。

从这个链接检查[这个文本](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx#user-driven_invocation)

> Blockquote 用户驱动调用 触摸键盘的调用模型旨在让用户控制键盘。用户通过点击输入控件向系统表明他们想要输入文本，而不是让应用程序代表他们做出决定。这将意外调用键盘的情况减少到零，这可能是 UI 流失的痛苦来源，因为键盘可以占用高达 50% 的屏幕并损害应用程序的用户体验。为了启用用户驱动的调用，我们跟踪最后一个触摸事件的坐标，并将它们与当前具有焦点的元素的边界矩形的位置进行比较。如果该点包含在边界矩形内，则调用触摸键盘。
> 
> Blockquote 这意味着应用程序不能通过焦点操作以编程方式调用触摸键盘。过去的罪魁祸首是网页——其中许多默认将焦点设置在输入字段中，但在其页面上还有许多其他体验可供用户享受。msn.com 就是一个很好的例子。该网站有很多可供消费的内容，但恰好在其页面顶部有一个 Bing 搜索栏，默认情况下会成为焦点。如果键盘被自动调用，则默认情况下该搜索栏下方的所有文章都将被屏蔽，从而破坏网站在平板电脑上的体验。在某些情况下，必须点击才能获得键盘感觉不太好，例如当用户开始发送新电子邮件或打开“搜索”窗格时。然而，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:08:19.887

查看：[http](http://classes.soe.ucsc.edu/cmps020/Winter08/lectures/controller-keyboard-input.pdf)
://classes.soe.ucsc.edu/cmps020/Winter08/lectures/controller-keyboard-input.pdf 您可能会在这里找到答案，它包含有关游戏手柄等输入的所有信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T12:15:41.560

[这里](http://xboxforums.create.msdn.com/forums/p/38725/353171.aspx)有一个关于如何做到这一点的很好的指南：

```
static public string GetKeyboardInput() 
{ 
    if (HandleInput.currentState.IsButtonDown(Buttons.B)) 
    { 
        useKeyboardResult = false; 
    } 

    if (KeyboardResult == null && !Guide.IsVisible) 
    { 
         string title = "Name"; 
         string description = "Pick a name for this game"; 
         string defaultText = "Your name here"; 

         pauseType = PauseType.pauseAll; 
         KeyboardResult = Guide.BeginShowKeyboardInput(HandleInput.playerIndex, title, 
                                                       description, defaultText, null, null); 

         useKeyboardResult = true; 
         pauseType = PauseType.pauseAll; 

     } 
     else if (KeyboardResult != null && KeyboardResult.IsCompleted) 
     { 
          pauseType = PauseType.none; 
          KeyboardInputRquested = false; 

          string input = Guide.EndShowKeyboardInput(KeyboardResult); 
          KeyboardResult = null; 

          if (useKeyboardResult) 
          { 
               return input; 
          } 
     } 

     return null; 
} 
```

您的 Update 方法应该包含如下内容：

```
if (KeyboardInputRequested) 
{ 
    string result = GetKeyboardInput(); 
} 

if (result != null) 
{ 
    //use result here 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-05T00:10:36.867

屏幕键盘不太可能包含在 PC 的 XNA DLL 中，但如果您真的想知道，您可以研究一个免费的 .NET 反编译程序（例如 ILSpy）并查看它。

此外，[您也不能使用聊天板](http://what-when-how.com/xna-game-studio-4-0-programmingdeveloping-for-windows-phone-7-and-xbox-360/the-many-keys-of-a-keyboard-xna-game-studio-4-0-programming/)。我建议要么制作你自己的可由控制器使用的屏幕键盘，或者如果可以的话，使用 MonoGame 框架（XNA 的开源版本），并将其修改为具有屏幕键盘视窗。您还可以制作一个单独的程序，充当由控制器控制的虚拟键盘。

# php - jQuery ajax() 返回 json 对象但没有正确提醒

> ID：14590316
> 
> 赞同：2
> 
> 时间：2013-01-29T19:04:20.900
> 
> 标签：php, jquery, ajax, json

为什么我不能使用 data[0].id 返回 id？

```
 $(document).ready(function(){   
$.ajax({
  type: 'POST',     
  dataType: "json",
  url: '<?php echo matry::base_to('tests/map_it');?>',
  success: function (data) 
  {
     alert(data[0])
    $('#alerts').html(data);
    data[0].id

  }

  });
}); 
```

这是返回的警报。

```
 {"id":19385,"first":"RLY","last":"MAZI",
    "trainer_address1":"19 NE 13H CRT",
    "trainer_address2":null,"CITY":"MII","STATE":"AL",
    "trainer_zip":"33333","trainer_phone":"(721)222-4444","trainer_fax":null,
    "trainer_cell":"(213)213-  2133","website_trainer_id":115,"trainer_email":"MO@gmail.COM",
"trainer_group":"","inactive":null} 
```

任何帮助将不胜感激。

编辑这是返回该 json 的 php：

```
$mapit = sql::results("Select * from event.ACS.trainer where inactive is null or inactive=0");
foreach ($mapit as $row)
{
    $return[] = json_encode($row, JSON_FORCE_OBJECT);
}
echo json_encode($return); 
```

我必须遍历并编码每一行，否则，ajax 函数不会认为有返回的 json （并且我的数据 var 为空）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T19:25:33.533

您真正的问题在于您的 PHP：

```
$mapit = sql::results("Select * from event.ACS.trainer where inactive is null or inactive=0");
foreach ($mapit as $row)
{
    $return[] = json_encode($row, JSON_FORCE_OBJECT);
}
echo json_encode($return); 
```

您对数据进行了双重 json_encoding，这导致内部 JSON 在返回到 Javascript 时被视为 JSON 形式的字符串。

你应该这样做：

```
$mapit = sql::results("Select * from event.ACS.trainer where inactive is null or inactive=0");
foreach ($mapit as $row)
{
    $return[] = $row;
}
echo json_encode($return); 
```

注意我已经删除了最里面的 json_encode。

现在，您不需要在 Javascript 中使用 .parseJSON() 调用。这个解决方案将比公认的解决方案更有效，后者并没有解决真正的问题。

它会更有效率，因为

1.  您不是不需要在 PHP 中编码的双重编码数据。
2.  您不是在解码不需要用 Javascript 编码的数据。

因此，您消除了 2 个不必要的操作和许多浪费的循环（因为这些操作包含在循环中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:11:55.690

`data[0]`看起来像 JSON，因此您必须先对其进行解析，然后才能将其用作对象。例如`$.parseJSON(data[0]).id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T19:13:31.250

看起来它只是返回一个对象而不是数组，因此您应该能够使用**data.id**访问 id 属性，无需指定数组索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T19:13:33.947

尝试将“Content-Type: application/json”添加到您的响应标头中。添加此标头 Google Chrome、Opera、Safari 和 IE 会自动将您的字符串转换为 JSON 对象。

如果您添加此标头，则仅在 Firefox 上才需要 parseJSON。

如果您不想添加该标头，则“JSONObject = jQuery.parseJSON(response);” 在您的 javascript 中需要将字符串转换为 JSON 对象。

# ios - UIWebView backgroundColor 上的 UIView 不会改变

> ID：14590318
> 
> 赞同：2
> 
> 时间：2013-01-29T19:04:22.850
> 
> 标签：ios, uiview, uiwebview

我有一个自定义的 UIView 子类实例 headerView，我把它放在 UIWebView 的 scrollView 上。当我初始化它时，我将此视图的背景颜色设置为白色：

```
self.backgroundColor = [UIColor whiteColor]; 
```

这就是我将它放在 webView 的滚动视图上的方式：

```
 webView.scrollView.contentInset = UIEdgeInsetsMake(headerView.bounds.size.height, 0, 0, 0);

    CGRect frame = headerView.frame;
    frame.origin.y -= headerView.bounds.size.height;
    headerView.frame = frame;
    //webView.scrollView.backgroundColor = [UIColor whiteColor];

    [webView.scrollView addSubview:headerView]; 
```

如果我取消注释该行，我的 headerView 的背景是白色的。但是如果我评论它，背景颜色与webView中scrollView的背景颜色相同。因此，在它的 init 方法中更改视图的背景颜色似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:37:01.037

我发现了一个导致这个问题的错误。我是这样开始我的观点的：

```
self = [super initWithFrame:CGRectZero]; 
```

然后设置框架：

```
frame = self.frame;
frame.size.height = _subjectView.bottom;
self.frame = frame;

self.backgroundColor = [UIColor whiteColor];
self.opaque = YES; 
```

当我在 init 方法中添加它时：

```
self.clipsToBounds = YES; 
```

子视图甚至没有显示。所以我的超级视图的帧宽度为 0，但子视图仍然显示在它之外，因为它们的帧是正常的，并且默认情况下 clipsToBounds 是 NO。通过添加这一行证明了

```
frame.size.width = SCREEN_WIDTH; 
```

它开始起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:56:29.660

在您的子类中，您是否确保其不透明？

```
 self.view.opaque = YES; 
```

# java - Apache HTTP 组件大小限制响应？

> ID：14590319
> 
> 赞同：2
> 
> 时间：2013-01-29T19:04:23.127
> 
> 标签：java, memory, jvm, dos, apache-httpcomponents

我连接到突出返回“A”的非有限流的服务器。即：这个

```
$ nc 1.2.3.4 9001
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA^C 
```

似乎 apache http 组件库只是从服务器获取整个响应然后解析。如何限制大小以使 JVM 不会崩溃？

这是我的代码：

带有流畅的 API：

```
public static void main(String[] args) throws ClientProtocolException, IOException {
    Request.Get(url).execute().discardContent();
} 
```

带低级 API：

```
public static void main(String[] args) throws ClientProtocolException, IOException {
    String url = "http://1.2.3.4:9001/";
    DefaultHttpClient httpclient = new DefaultHttpClient();
    System.out.println("A");
    HttpGet request = new HttpGet(url);
    System.out.println("B");
    HttpResponse hr = httpclient.execute(request);
    System.out.println("C");
} 
```

给我这个：

```
A
B
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at org.apache.http.util.ByteArrayBuffer.expand(ByteArrayBuffer.java:62)
    at org.apache.http.util.ByteArrayBuffer.append(ByteArrayBuffer.java:92)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:278)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:92)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
    at com.dudebro.WhatHappen.main(WhatHappen.java:103) 
```

注意[相关问题](https://stackoverflow.com/questions/12482160/response-size-limit-when-using-apache-httpcomponents)无关紧要，我什至不向 API 询问响应正文，它仍然崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:34:30.697

您可以尝试设置以下参数：

```
MAX_LINE_LENGTH = "http.connection.max-line-length"
MAX_HEADER_COUNT = "http.connection.max-header-count" 
```

我认为第一个的默认值为-1，这意味着没有限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:26:06.670

从堆栈跟踪中可以清楚地看出发生了什么：`BufferedReader.readLine()`不断增长其缓冲区，因为它找不到行终止符来开始解析响应状态行，直到 JVM 内存不足。您可以将代码包装在一个`try`块中并捕获`OutOfMemoryError`，甚至向 Apache 维护人员提交一个补丁，但我认为您不应该将这个问题真正考虑到实际应用程序中。

该服务器不符合 HTTP 标准，因为“A”的无限流肯定不是有效的 HTTP 响应状态行。通常服务器被设计成对他们接受的内容是自由的，对他们发送的内容是严格的，即他们应该考虑到可能有不合规的客户端进入野外。

另一方面，客户端开发人员通常认为服务器实现得很好，因为如果不是这样，那么运行服务器的业务将不会获得任何客户端......

在这种情况下，很明显目标服务器没有提供任何有价值的服务，因为它甚至不符合协议，所以没有人可以从中获取任何东西，谷歌无法索引它，所以谁会将公共 URL 传播给这样的应用程序？我认为客户端在您的开发机器上崩溃很好，因为它告诉服务器程序不工作。如果它在您的控制之下，您可以修复它，否则您将切换服务提供商。同样，这在现实世界中不会发生，因为如此糟糕的服务会导致其所有客户端崩溃，并且没有人会使用它。

在您所说的评论中，它是一个接受用户提交的 URL 的服务器应用程序。在这种情况下，您应该真正设置行长度限制，以避免恶意用户关闭您的服务器。

# css - 使用 susy compass 插件如何正确地为每个元素添加边距？

> ID：14590325
> 
> 赞同：0
> 
> 时间：2013-01-29T19:04:41.773
> 
> 标签：css, compass-sass, sass, susy-compass

我有 4 个元素，其宽度设置在`@include span-columns(3,12)`此输出，每个元素都设置为 25%，这很好，我还想做的是为每个元素添加边距，但这样做会破坏这些元素的布局，因为 25% 宽度和 % 边距得到加在一起。谁能建议我如何将边距与宽度结合起来？

SCSS

```
 .m-info-col{

      .col{
        @include span-columns(3,12);
// tried this margin-right: columns(.5,12);

        &:last-child{
          @include omega;
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:21:57.600

如果您的容器设置了 12 列并将 $gutter-width 设置为一个值，则每列都有 $gutter-width 间隙（如果您愿意，可以留出余量）。

如果您使用以下方法实现 susy 网格背景：

```
$show-grid-backgrounds : true; 
```

在您的容器上下文中：

```
@include susy-grid-background; 
```

你会看到你的设计背后的排水沟。

您还可以在 span-columns mixin（第三个参数）中添加填充。但是，这并不总是按预期工作。

我使用的另一种方法是 squish mixin，它将列添加为边距。这很好用，但我没有尝试使用 0.5 列作为压缩量。

# tomcat - tomcat 中的自定义 java.util.logging 处理程序

> ID：14590330
> 
> 赞同：5
> 
> 时间：2013-01-29T19:04:53.223
> 
> 标签：tomcat, logging, java.util.logging

我们在给定系统上的所有 webapps 之间有一些通用的日志配置，我们试图将其外部化到 tomcat 的级别，而不是尝试在单个 webapp 的级别上处理。事实证明，正在使用的 webapps`java.util.logging`具有一定的挑战性，因为我们有一个自定义处理程序，而且似乎没有一种明显的方法可以让自定义处理程序与 tomcat 的类加载器很好地配合使用。目前这一切都处于原型阶段。

初步：Tomcat 7.0.32，Java 6。默认 tomcat 7 安装，部署了一个 REST 服务，配置中没有什么有趣的。

首先，[大致按照this answer中的建议](https://stackoverflow.com/a/7920917/673759)，我创建了自定义处理程序并将jar放入`$CATALINA_HOME/lib`并确认所述目录位于正确的目录中并且`common.loader`包含此目录：

`common.loader=${catalina.base}/lib,${catalina.base}/lib/*.jar,${catalina.home}/lib,${catalina.home}/lib/*.jar`

然后我修改了`logging.properties`文件并添加了处理程序：

`handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler, 3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler, my.custom.Handler`

但是，当我运行`./startup.sh`时，我得到以下信息：

```
[Loaded java.io.PrintWriter from /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
[Loaded java.util.logging.StreamHandler from /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
[Loaded java.util.logging.ConsoleHandler from /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
Handler error
java.lang.ClassNotFoundException: my.custom.Handler
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:521)
    at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:464)
    at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:288)
    at java.util.logging.LogManager$2.run(LogManager.java:267) [...] 
```

（这是与`JAVA_OPTS=-verbose:class`）。

我已经看到稍后加载了相关的类，但这似乎并不一致，并且可能是上述 REST 服务的工件（直接使用它）。

如果我直接将 jar 添加到 jar 中，我可以让一切正常工作`CLASSPATH`，但与修改加载器相比，这似乎通常不鼓励。

在读取`java.util.logging.Handler`之前如何将自定义（以及后来的格式化程序）干净地添加到类加载器中，我是否缺少一些特别的东西？`logging.properties`

或者，如果我在错误的树上吠叫，我会采取更好的方法来解决多个 webapps 之间共享日志配置的问题`java.util.logging`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-04T19:37:05.753

对于 Tomcat 范围的自定义日志记录，您需要将您的类注入到 Tomcat 引导类加载器中。因此，必须将带有自定义处理程序和所需依赖项的 jar 放入启动脚本 CLASSPATH。我建议在 $CATALINA_BASE/bin/setenv.sh 添加自定义脚本，即

```
#!/bin/sh

CLASSPATH="$CATALINA_BASE/bin/myhandler.jar" 
```

或者您可以在 Tomcat 启动期间加载脚本变量时动态收集所需的 jar。

# css - 如何在css中制作没有边距的div标签？

> ID：14590331
> 
> 赞同：1
> 
> 时间：2013-01-29T19:04:54.183
> 
> 标签：css

> **可能重复：**
> [获取一个 div 以遍历整个页面](https://stackoverflow.com/questions/8744965/get-a-div-to-go-across-the-whole-page)

我需要制作一个从浏览器开头开始的 div 标签，而不是在边距之后，例如，当我编写以下代码时：

```
<html>
<head>
<title>CSS Test</title>
<style type="text/css">
div
{
width:100%;
height:100%;
border:1px solid black;
}
</style>
</head>
<body>
<div>
</div>
</body>
</html> 
```

div 在从上、左和右的一个边距之后开始。但我希望它从没有边距开始，即使我将边距设为：0px 0px; 它仍然无法正常工作。那么，我该怎么做才能使它没有边距，并且该方法也可用于图像吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:05:44.003

浏览器的用户代理样式会自动为`body`元素添加填充。去掉它：

```
html, body {
    padding: 0;
} 
```

您应该研究一下[`normalize.css`](http://necolas.github.com/normalize.css/)，它将为您解决所有这些小问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:10:54.523

```
html, body {
    margin: 0;
    padding: 0;
}
div {
    margin: 0;
    border: 1px solid black;
    width: 100%;
    height: 100%;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
} 
```

如果没有，`box-sizing`你最终会得到一个 100%+2px 宽和 100%+2px 高的 div。

# python - 使用 Python Selenium 获取跨度文本

> ID：14590341
> 
> 赞同：28
> 
> 时间：2013-01-29T19:05:43.733
> 
> 标签：python, selenium

这应该很容易，但我无法让它工作。我正在使用 Google 主页作为测试运行一个小演示。

这是我的脚本：

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys
import time

browser = webdriver.Chrome()
browser.get("http://www.google.com") # Load page

time.sleep(0.2)

#top nav elements
elems = browser.find_elements_by_xpath("//span[contains(@class, 'gbts')]") 

for e in elems:
    print e.get_attribute('text')

browser.close() 
```

它返回：

```
None
None
None
None
None
None
None
None
None
None
None 
```

所以我认为它抓住了正确的元素，但也许不是正确的属性？没有把握。我也尝试打印 e.text() 但这吐出来：

```
Traceback (most recent call last):
  File "sample.py", line 14, in <module>
    print e.text()
TypeError: 'unicode' object is not callable 
```

有什么想法吗？

**编辑 - 可能的解决方案？**

```
e.get_attribute('innerHTML') seems to work. 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-29T19:23:25.067

这应该这样做：

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get("http://www.google.com")
for elem in browser.find_elements_by_xpath('.//span[@class = "gbts"]'):
    print elem.text 
```

* * *

`text`是`WebElement`类的属性，因此它是不可调用的。

```
class WebElement(object):
    """Represents an HTML element.       
    ...
    ...

    @property
    def text(self):
        """Gets the text of the element."""
        return self._execute(Command.GET_ELEMENT_TEXT)['value'] 
```

* * *

您有两种选择来获得第三场比赛：

```
#  1\. Modify your xpath expression
browser.find_elements_by_xpath('(.//span[@class = "gbts"])[3]')[0].text

#  2\. Access it by list index
browser.find_elements_by_xpath('.//span[@class = "gbts"])')[2].text 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-30T10:32:00.190

是的 ！找到解决方案（我正在使用 Python）例如：webelement is ap tag

```
webelement.text() 
```

从实际情况来看，stacktrace：

print page_box_block.text() TypeError: 'unicode' object is not callable

它希望是标准输出中的 html，但不是！

有时可能是一个奇怪的字符串“unicode object is not callable”或者某些类型的错误解决方案很容易：

```
print element.get_attribute("innerHTML") 
```

在 java get_attribute("innerHTML") 和 text() 即将“相同”，如果您需要来自元素的纯文本在 Python 2.7 现在 text() 有时会失败。

# sql - Oracle SQLDeveloper：如何搜索哪些表具有与给定查询匹配的列？

> ID：14590344
> 
> 赞同：4
> 
> 时间：2013-01-29T19:05:46.563
> 
> 标签：sql, oracle

在 SQL Developer 中，如何找到哪个表的列与指定的搜索查询匹配？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:13:25.440

```
Select table_name, column_name 
from user_tab_columns 
where column_name like '%'|| '&columnPattern' || '%' 
```

**`User_tab_columns`**为您自己的桌子。否则**`dba_tab_columns`**或**`all_tab_columns`**

# ios - NSDate 在今天前一天获取值

> ID：14590346
> 
> 赞同：0
> 
> 时间：2013-01-29T19:05:52.630
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

我尝试使用以下代码获取今天的日期：

```
NSDate *today = [[NSDate alloc] init];
NSLog(@"Today: %@", today); 
```

结果是：

> 2013 年 1 月 30 日 +00:00:00

但当前日期是

> 2013 年 1 月 29 日 +00:00:00

任何想法，如何解决这个案子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:52:20.820

尝试这个：

```
NSLog(@"Today: %@",[today  descriptionWithLocale:[NSLocale currentLocale]]; 
```

`NSDate`返回`GMT`.Above 中的日期将转换您的 .Above 中的日期`currentLocale`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:13:27.123

为什么不只是

```
NSDate* today = [NSDate date]; 
```

另外，请记住，如果您查看“今天”，您将看到 GMT 日期，而不是您的当地时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:24:38.277

好的，这里有两件事要检查：

1.  确保设备的时钟设置正确。
2.  确保您使用的是正确的时区。

英戈。

# asp.net - gridview控件更新javascript不起作用

> ID：14590347
> 
> 赞同：0
> 
> 时间：2013-01-29T19:05:52.823
> 
> 标签：asp.net, gridview, edit

我在页面上有一个简单的 asp.net gridview 控件。该控件绑定到 SQLDataSource。gridview 控件设置为启用编辑。当我在我的开发服务器上运行该页面时，编辑功能正常工作，即您选择编辑，修改一列选择更新并保存更改。当我将页面放在实时服务器上并选择编辑时，我得到了编辑功能，但更新链接不起作用。该页面似乎不会发布，因为选择更新链接时什么都不会发生。嵌入在更新链接（更新）中的 javascript 似乎与嵌入在我的开发中的更新中的相同。服务器。取消链接功能确实有效。

关于为什么这不会在生产服务器上的任何想法？我有另一个具有相同功能的页面，它工作正常。看不出有什么区别。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T02:58:14.927

我的猜测是您无权写入数据源。我刚刚遇到了同样的问题，结果证明在 IIS 中我需要授予对服务器上相应文件夹的写访问权限（我的数据源是一个 xml 文件）。

# ruby-on-rails-3 - Rails 3.2.x：如何在不重新启动应用程序的情况下更改日志记录级别

> ID：14590349
> 
> 赞同：10
> 
> 时间：2013-01-29T19:05:55.703
> 
> 标签：ruby-on-rails-3, logging

我想在不重新启动应用程序的情况下更改正在运行的 Rails 3.2.x 应用程序的日志记录级别。我的意图是在将其恢复到通常的日志记录级别之前使用它进行短时间调试和信息收集。

我还知道，按升序排列的级别是调试、信息、警告、错误和致命，生产服务器记录信息和更高，而开发记录调试和更高。

我明白如果我跑

```
Rails.logger.level=:debug #or :info, :warn, :error, :fatal 
```

这会立即更改日志记录级别吗？

如果是这样，我可以通过编写 Rake 任务来调整日志记录级别来做到这一点，还是需要通过添加路由来支持这一点？例如在 config/routes.rb 中：

```
match "/set_logging_level/:level/:secret" => "logcontroller#setlevel" 
```

然后在日志控制器中设置级别。（:level 是日志级别， :secret 在客户端和服务器之间共享，是为了防止随机用户调整日志级别）

rake task 还是 /set_logging_level 哪个更合适？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-18T10:40:16.283

你为什么不使用操作系统信号呢？例如，在 UNIX 上，用户 1 和用户 2 信号可以免费用于您的应用程序：

```
config/initializers/signals.rb:

trap('USR1') do
  Rails.logger.level = Logger::DEBUG
end

trap('USR2') do
  Rails.logger.level = Logger::WARN
end 
```

然后这样做：

```
kill -SIGUSR1 pid
kill -SIGUSR2 pid 
```

只需确保您不覆盖服务器的信号 - 每个服务器都利用各种信号进行日志轮换、子进程终止和终止等操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-02-27T00:35:55.827

在 Rails 控制台中，您可以简单地执行以下操作：

```
Rails.logger.level = :debug 
```

现在所有执行的代码都将以这个日志级别运行

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T20:02:23.810

由于您必须更改*正在运行*的rails 实例中的级别，因此简单的 rake 任务将不起作用。
我会选择专用路线。

而不是*共享机密*，我将使用应用程序的标准用户身份验证（如果您的应用程序有用户）并限制对管理员/超级用户的访问。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-29T19:58:42.687

在你的控制器 LogController 试试这个

```
def setlevel
  begin
      Rails.logger.level = Logger.const_get(params[:level].upcase)
  rescue
      logger.info("Logging level #{params[:level]} not supported")
  end
end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-08T22:27:29.340

您还可以使用 gdb 附加到正在运行的进程，将 Rails.logger 设置为调试级别，然后分离。我已经为我的 puma 流程创建了以下 1 个衬垫来执行此操作：

```
gdb attach $(pidof puma) -ex 'call(rb_eval_string("Rails.logger.level = Logger::DEBUG"))' -ex detach -ex quit 
```

*注意： pidof 将按降序返回多个 pid。因此，如果您有多个同名进程，则只会在 pidof 返回的第一个进程上运行。其他的将被“gdb attach”命令丢弃，并显示消息：“多余的命令行参数被忽略。(26762)”。但是，如果您只关心 pidof 返回的第一个进程，则可以放心地忽略它。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-15T11:34:53.683

使用 rufus-scheduler，我创建了这个时间表：

```
scheduler.every 1.second do
  file_path = "#{Rails.root}/tmp/change_log_level.#{Process.pid}"
  if File.exists? file_path
    log_level = File.open(file_path).read.strip
    case log_level
    when "INFO"
      Rails.logger.level = Logger::INFO
      Rails.logger.info "Changed log_level to INFO"
    when "DEBUG"
      Rails.logger.level = Logger::DEBUG
      Rails.logger.info "Changed log_level to DEBUG"
    end
    File.delete file_path
  end
end 
```

然后，可以通过在 下创建一个文件来更改日志级别`tmp/change_log_level.PID`，其中`pid`是 rails 进程的进程 id。您可以创建一个 rake/capistrano 任务来检测和创建这些文件，从而允许您快速切换正在运行的生产服务器的日志级别。

如果您使用的是 unicorn 或类似的，请记住在工作线程中启动 rufus。

# wpf - 通知 WPF 中计算的数据绑定属性的更改

> ID：14590354
> 
> 赞同：10
> 
> 时间：2013-01-29T19:06:04.957
> 
> 标签：wpf, data-binding, notifications

作为练习，我决定在 WPF 中创建一个自行车齿轮计算器。我使用触发的设置器创建了两个私有字段`OnPropertyChanged()`，但我有一个数据绑定属性，`ratio`它表现为“只读”，因为它是动态计算的。当我运行程序时，显示文本框，正确显示初始值，显示属性更改处理程序中的“工作”字，但`ratio`TextBlock 不更新。

我怀疑这是由于“获取”属性的方式，我想知道是否绝对有必要为每个添加一个私有字段，我想知道这是否应该有任何 DependencyProperty ......但实际上我已经达到了我的知识有限，无法让这个琐碎的程序工作。

* * *

这是我的模型：

```
class SingleGearsetModel : INotifyPropertyChanged
{
    public SingleGearsetModel()
    {
        crank = 44;
        cog = 16;
    }

    private int _crank;
    private int _cog;

    public int crank { 
        get{return _crank;}
        set{
            _crank = value;
            OnPropertyChanged("crank");
        }
    }

    public int cog {
        get{return _cog;}
        set{
            _cog = value;
            OnPropertyChanged("cog");
        } 
    }

    public double ratio
    {
        get {
            return (double)crank / (double)cog;
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string arg)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(arg));
            Console.Writeline("working");
        }
    }

} // end class 
```

这是我的 XAML：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="CalculadorFixaWPF.MainWindow"
    x:Name="Window"
    Title="MainWindow"
    Width="640" Height="480">

    <DockPanel x:Name="LayoutRoot">
            <TextBox Text="{Binding crank, Mode=TwoWay}"/>
            <TextBox Text="{Binding cog, Mode=TwoWay}"/>
            <TextBlock Text="{Binding ratio, StringFormat={}{0:0.00}}"/>
    </DockPanel>
</Window> 
```

这是在我的代码隐藏（MainWindow.xaml.cs）中：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        this.InitializeComponent();
        this.DataContext = new SingleGearsetModel();
    }
} 
```

谢谢阅读！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T19:09:26.333

由于比率是一个计算字段，因此您希望在每次值可能更改时添加通知。如果更改`crank`或`cog`更改，就会发生这种情况。

因此，在您通知它们被更改后，还要通知它们`ratio`已更改：

```
public int crank 
{ 
    get{return _crank;}
    set{
        _crank = value;
        OnPropertyChanged("crank");

        // *** Notify that ratio has also been changed ***
        OnPropertyChanged("ratio");
    }
} 
```

也一样`cog`。

**编辑：** 根据您的评论，您可以通过以下方式从班级内部注册 PropertyChanged 事件并提高 PropertyChanged 的​​比率：

```
// Constructor
public SingleGearsetModel()
{
    ....
   PropertyChanged += SingleGearsetModel_PropertyChanged;
}

// PropertyChanged event handler
void SingleGearsetModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
        if (e.PropertyName == "cog" || e.PropertyName == "crank")
        {
            OnPropertyChanged("ratio");
        }
} 
```

使用这种方法，您不需要`OnPropertyChanged("ratio")`在属性的 setter 内部添加 - 每当它们被引发时，您都会得到 event(in `SingleGearsetModel_PropertyChanged`) 并引发`OnPropertyChanged("ratio")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:09:31.993

最简单的方法就是将 和 都添加`OnPropertyChanged("ratio")`到设置器`crank`中`cog`。你可以做一些更复杂的事情，比如监听`OnPropertyChanged`事件`crank`并在它们中的任何一个发生变化时`cog`自动触发`OnPropertyChanged("ratio")`，但这至少会让你继续前进。

# c# - 使用 ASP.NET MVC 3 和 c# 的 Active Directory 身份验证

> ID：14590356
> 
> 赞同：0
> 
> 时间：2013-01-29T19:06:10.497
> 
> 标签：c#, asp.net-mvc-3, active-directory

我目前正在尝试创建一个针对 AD 对用户进行身份验证的网站，但我似乎找不到很好的示例资源。首先，我只想让所有 AD 用户访问该站点。我有一个运行 IIS 和 Active Directory 角色的 Windows 2008 r2 服务器，用于测试目的。

我知道您必须添加一个连接字符串，如[**ASP.NET MVC - Authenticate users against Active Directory 中所示，但需要输入用户名和密码**](https://stackoverflow.com/questions/6147864/asp-net-mvc-authenticate-users-against-active-directory-but-require-username)。但是显示模型、视图和控制器以及 web.config 文件的某种示例将有很大帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:24:50.353

为了使 user2008963 能够关闭/接受这个问题，我发布我的评论作为答案。

使用 Intranet-Template 在您的项目中获取预配置的活动目录身份验证。可以在此[链接](http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-windows-authentication-cs)中找到有关此身份验证方法的教程。它不是最新的，如果您对它不满意，只需谷歌搜索一个更好的。

如果您需要当前用户名和他在活动目录中的角色，您可以使用`User.Identity`此[链接](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)中的描述。要在控制器/操作级别添加角色身份验证，您可以这样做：

```
[Authorize(Roles = "ADMIN")]
public class AdministrationController : Controller
{
    [Authorize(Roles = "SUPERADMIN")]
    public ActionResult SuperAdmin()
    {
        return View();
    }
} 
```

希望有了这个我可以让你开始;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:21:44.443

我将继续回答，因为我正在我们公司的内部网络应用程序上执行此操作，如果我做错了，这就是我要找出的方法。

当用户访问您的网站时，您将拥有 UserPrincipal.Current.SamAccountName。所以你需要做的就是这样的：

```
DirectoryEntry de = new DirectoryEntry("LDAP://" + adDomain);
DirectorySearcher ds = new DirectorySearcher(de);
ds.Filter = "(sAMAccountName=" + UserPrincipal.Current.SamAccountName + ")";
ds.PropertiesToLoad.Add("cn");
ds.PropertiesToLoad.Add("name");
ds.PropertiesToLoad.Add("mail");
SearchResult sr = ds.FindOne();
if (sr == null)
{
    // not found
}
... 
```

因此，如果您没有返回 SearchResult，则不会针对您的 AD 域对它们进行身份验证...希望我做对了；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:49:41.707

Wordpress 插件 Simple Intranet 提供了一个运行良好的免费 Active Directory 插件插件。也就是说，如果您能够在自托管环境中支持 WordPress。:)

# macos - 查找安装程序创建或修改的文件

> ID：14590358
> 
> 赞同：0
> 
> 时间：2013-01-29T19:06:18.850
> 
> 标签：macos, unix

为了在安装程序运行时跟踪 OSX 文件系统的变化，我尝试使用`fs_usage`.
有人可以用一个简单的例子来指导我如何解释结果。当我检查它时，有很多我不明白的术语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:46:38.670

fs_usage 的输出往往充满了不相关的喋喋不休，并且难以解释。我建议使用[fseventer](http://www.fernlightning.com/doku.php?id=software%3afseventer%3astart)，它只显示更改的文件而没有所有废话。如果您是 Apple 开发人员，您还可以使用 PackageMaker 的快照包功能（它记录发生的所有事情，并提供制作执行相同操作的安装程序包）。

# asterisk - WombatDialer 的 Asterisk AMD 检测问题

> ID：14590359
> 
> 赞同：0
> 
> 时间：2013-01-29T19:06:18.783
> 
> 标签：asterisk

在 Asterisk 上运行似乎与负载相关的出站活动时，我们一直遇到 AMD 检测问题，但我不太确定。

我们所做的是发送基本上针对收债的出境 IVR。我们使用 WombatDialer 作为拨号引擎（因此我们可以免费获得召回和集群，并且仍然可以直接对 Asterisk 进行编程）并且通常包含 app_AMD 用于机器检测。我们运行从源代码安装的 Asterisk 1.8.10。

我们注意到，当我们在一台服务器上调用超过 50-60 次时，我们会收到很多误报——即异常率或 AMD 召回。我们能够检测拨号方案并发现问题似乎出在 AMD 应用程序上。服务器在 50-60 次调用时几乎处于空闲状态，因此 CPU 负载似乎不是问题。

有人知道从这里去哪里吗？或者如何调整 AMD / 获取调试信息？我们可以轻松地扇出更多服务器，但是.... 似乎不是一个好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:25:28.910

最有可能在 60 通电话时，您的提供商开始说“所有线路现在都忙”之类的内容。

# php - 2个地点之间的行驶距离

> ID：14590364
> 
> 赞同：2
> 
> 时间：2013-01-29T19:06:46.087
> 
> 标签：php, google-maps

有很多关于此的页面，但我还没有找到真正有用的东西。目前，我使用了谷歌距离矩阵并找到了两个位置之间的距离，但是没有运气将距离从 JavaScript 转移到 PHP。我昨天在这里发了一个帖子，但没有成功。所以我的另一个选择是使用 PHP 中的矩阵查找距离。我仍然会显示地图和所有内容，就在下一页我想获取两个位置之间的距离值，以使用它来查找旅行的费用，然后发送到 mysql 数据库，所以我需要将该值传递给 PHP。

我尝试了在网上找到的各种示例，但似乎没有一个对我有用。

```
$url = 'http://maps.google.com/maps/nav?q=from:London%20to:Dover';
$data = @file_get_contents($url);
$obj = json_decode($data);
print $obj->meters; 
```

例如那个。我不知道如何做我想做的事，不管连续几天搜索，并且非常感谢一些帮助，因为我已经坚持了一段时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:17:02.693

应该没问题，只是 json 格式不同。你的例子的最后一行应该是：

```
echo $obj->Directions->Distance->meters; 
```

有关答案格式的更多信息，请尝试 php 中的 var_dump .. 希望对您有所帮助

**编辑：**

```
<?php
    $url = 'http://maps.google.com/maps/nav?q=from:London%20to:Dover';
    $data = @file_get_contents($url);
    $data = utf8_decode($data);
    $obj = json_decode($data);
    echo $obj->Directions->Distance->meters;
?> 
```

# php - Facebook 测试用户 - 访问令牌

> ID：14590365
> 
> 赞同：1
> 
> 时间：2013-01-29T19:06:49.803
> 
> 标签：php, facebook, facebook-graph-api, oauth, access-token

我正在尝试通过在应用开发者门户上创建一些测试用户来测试我的应用。当我单击测试用户旁边的“切换到”链接时，它会将我从 facebook 注销并以测试用户身份登录。但是我注意到开发人员用户的访问令牌在注销时不会失效。在注销的情况下访问令牌是否应该变得无效（当我实际上像普通用户那样注销facebook时就是这种情况）。这是一个错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:42:12.293

I've noticed that access tokens don't always expire/invalidate as expected, and in a scenario like yours, you will have to manually set the new access token, leaving the old one in limbo somewhere.

```
$facebook->setAccessToken('new_access_token'); 
```

should be all you need to log the new user into your app assuming you're using the PHP-SDK.

# javascript - jquery .each 同步

> ID：14590367
> 
> 赞同：4
> 
> 时间：2013-01-29T19:06:51.613
> 
> 标签：javascript, jquery, ajax

我正在尝试在 jquery 中使用 ajaxStop 函数，但无法启动它，有什么想法吗？

我要做的是遍历每个锚标记，然后更新其中的一些内容，从那里我想使用 ajaxstop 事件来触发脚本以根据更新重新组织锚

谢谢你的帮助

```
jQuery(document).ready(function($) {
    function updateUsers() {
        $(".twitch_user").each(function(index, user) {
            $.ajax({ url: "https://api.twitch.tv/kraken/streams/" + $(user).attr("id") + "?callback=?", success: function(d) {
                if(d.stream) {
                    $(user).addClass("online");
                    $(user).removeClass("offline");
                    $(user).children(".viewers").text(d.stream.viewers + " viewers");
                } else {
                    $(user).addClass("offline");
                    $(user).removeClass("online");
                    $(user).children(".viewers").text("0 viewers");
                }
                console.log(d);
            }, dataType: "json"});
        });
    }
    //$(document).ajaxStart(function() {
    //  console.log("Event fired!");
    //  updateUsers().delay(2000);
    //})
    $(document).ajaxStop(function() {
        console.log("Event fired!");
        // updateUsers().delay(2000);
    });
    updateUsers();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:31:51.883

显然，在执行 JSONP 请求时，全局处理程序已关闭，[如此票证](http://bugs.jquery.com/ticket/8338)中所述：

> JSONP 请求不能保证完成（因为没有捕获到错误）。在这种情况下，jQuery 1.5 会强制全局选项为 false，以保证内部 ajax 请求计数器在某一时刻回到零。

我不确定 JSONP 是否是您的意图，但`?callback=?`URL 末尾的 jQuery 会这样处理它。

解决方案是设置以下内容：

```
jQuery.ajaxPrefilter(function( options ) {
    options.global = true;
}); 
```

# mysql - 多个用户时将 MySQL 连接到 VB.NET 的问题

> ID：14590369
> 
> 赞同：0
> 
> 时间：2013-01-29T19:06:57.413
> 
> 标签：mysql, vb.net, string, connection

我正在 VB.NET 中做一个计算项目，它需要用户在应用程序运行之前登录。我还需要自始至终使用数据库，所以我选择的武器是 MySQL。

这是我在用户按下连接并打开数据库的登录按钮时使用的代码。

```
Private Sub btnLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogin.Click
    MySqlConn.ConnectionString = "server=localhost;" _
        & "user id=" & txtUsername.Text & ";" _
        & "password=" & txtPassword.Text & ";" _
        & "database=main"
    Try
        MySqlConn.Open()
        MessageBox.Show("Connection successful!")
    Catch ex As Exception
        MessageBox.Show("Cannot connect to the database: " & ex.Message)
    End Try
End Sub 
```

这一切都很好，但是当我想稍后（以不同的形式）执行查询等时，我将不得不再次编写相同的代码。我想把它放在一个单独的类中，并在需要时调用它，但我看不出它如何从连接字符串的文本框中获取详细信息。而且我不能使用静态参数，因为它们可以使用多个用户。

在此先感谢，罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:47:35.827

您可以将 MySqlConn 创建为全局，这样就可以从应用程序的任何位置看到它。

[http://msdn.microsoft.com/en-us/library/ms973875.aspx](http://msdn.microsoft.com/en-us/library/ms973875.aspx)

连接后（使用用户名和密码），您不需要再次引用文本框。

# c++ - 加载 obj mtl Direct3D 11

> ID：14590372
> 
> 赞同：1
> 
> 时间：2013-01-29T19:07:03.507
> 
> 标签：c++, visual-studio, direct3d, directx-11, .obj

快速提问，我如何将 .obj 模型加载到 directx 11 (d3d11.h) 以及材料的 .mtl 文件中。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:12:00.667

您可以编写自己的解析器，obj 是一种非常简单的文本格式（[格式描述](http://en.wikipedia.org/wiki/Wavefront_.obj_file)）

否则一些加载器已经存在，比如[Assimp。](http://assimp.sourceforge.net/)它只处理解码，你仍然需要从解码的数据创建顶点/索引缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:09:40.983

DirectX 9 之后不再附带任何库来加载目标文件，例如 *.obj、*.x 等。您需要下载库来打开这些文件，或者自己做，因为 OBJ 文件相当简单解析。

有关使用 OpenGL 的示例，请参见此处：[http](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Load_OBJ) ://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Load_OBJ - 这些概念应该相当容易过渡。

# java - 菜单中的 Java Swing JSeparator 放置不正确

> ID：14590383
> 
> 赞同：2
> 
> 时间：2013-01-29T19:07:33.133
> 
> 标签：java, swing, jmenu, jmenuitem, jseparator

当我想为 Java Swing 应用程序插入带有 JSeparator 的分隔符时，我遇到了问题。事实上，当我在 Mac 上运行我的程序时，我遇到了这个问题，而在 windows 或 linux 上却没有。分隔符放置不正确，文本被删除。有谁知道为什么？

我的代码：

```
JMenuItem fileItem = new JMenuItem("Close");
KeyStroke ...
fileItem.add(new JSeparator(JSeparator.HORIZONTAL),BorderLayout.LINE_START); 
```

截屏 ： ![在此处输入图像描述](../Images/e76c169ebc389da2d2163e17f44540e0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T19:38:56.153

基本上你现在的代码表明你假设`JMenuItem`有一个 default `BorderLayout`，这可能是真的（但我不这么认为）。

尽管根本问题是您将s 添加`JSeparator`到`JMenuItem`，但实际上您应该将其添加到`JMenu`包含各种`JMenuItem`s 的 via `JMenu#addSeparator()`。有关更多信息，请参阅[如何使用分隔符](http://docs.oracle.com/javase/tutorial/uiswing/components/separator.html)。

您应该执行以下操作：

```
JMenu menu=new JMenu();

JMenuItem item1=new JMenuItem("something 1");
JMenuItem item2=new JMenuItem("something 1");

menu.add(item1);
menu.addSeparator();//lets add that separator
menu.add(item2); 
```

给你类似的东西：

![在此处输入图像描述](../Images/54f88575b3abedb3ba49b5c51ff3cb89.png)

**更新：**

这是一个例子：

![在此处输入图像描述](../Images/abd974b51ea8d463ed188a54f15055a4.png)

```
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JMenuBar menuBar=new JMenuBar();

        JMenu menu = new JMenu("File");
        JMenu menu2 = new JMenu("Else");

        JMenuItem item1 = new JMenuItem("something 1");
        JMenuItem item2 = new JMenuItem("something 2");
        JMenuItem item3 = new JMenuItem("else 1");
        JMenuItem item4 = new JMenuItem("else 2");

        menu2.add(item3);
        menu2.addSeparator();//lets add that separator
        menu2.add(item4);

        menu.add(menu2);
        menu.add(item1);
        menu.addSeparator();//lets add that separator
        menu.add(item2);

        menuBar.add(menu);

        frame.setJMenuBar(menuBar);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

# android - AutoCompleteTextView 在 Android 2.3.5 中不显示建议

> ID：14590384
> 
> 赞同：4
> 
> 时间：2013-01-29T19:07:33.170
> 
> 标签：android, apk, bytecode, autocompletetextview, compiled

我正在使用特殊的 autocompletetextview 来提供数千条街道的建议。由于这个庞大的元素列表，我必须根据第一个输入字母即时清除和填充适配器。例如，当用户输入“b”时，适配器会填充以“b”开头的所有街道。这适用于所有 Android 版本。今天一位用户告诉我，Android 2.3.5 三星 Galaxy Ace 有问题。

当他开始输入字母时，没有带有建议的下拉菜单。当他输入“b”时，它只建议由两个名称组成的街道，而第二个名称以“b”开头。例如：他为“b”得到的建议是“Am Bahnhof”或“Alte Bahnstraße”。似乎有一种模式，但我无法解释这是如何发生的，我无法在任何模拟器或真实设备上重现这一点（而且没有 2.3.5 模拟器）。

下面是代码。仅供参考：我必须在 beforeTextChange 中清除，否则当我很快删除字段中的输入时应用程序会崩溃。显然它不能足够快地交换列表。而且我需要已经添加的变量，否则当我将输入删除到第一个字母时，它会添加两次列表。

真正奇怪的是：自从第一次实现以来，我从未改变过这部分，用户告诉我它在第一个版本中工作。但是突然之间它不再起作用了。编译的代码是否可能以某种方式损坏？有任何想法吗？

当有人可以告诉我如何重现此问题时，我也会接受解决方案。

调用：

```
autoCompleteTextView.addTextChangedListener(new StreetTextWatcher(adapter)); 
```

街道阵列适配器：

```
public class StreetArrayAdapter extends ArrayAdapter<String> {

    public StreetArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public void addAll(String[] streets) {
        for (String street : streets) {
            add(street);
        }
    }
} 
```

StreetTextWatcher：

```
public class StreetTextWatcher implements TextWatcher {

    private final StreetArrayAdapter adapter;
    private boolean alreadyAdded = false;

    public StreetTextWatcher(StreetArrayAdapter adapter) {
        this.adapter = adapter;
    }

    @Override
    public void afterTextChanged(Editable s) {
        //not used
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        if (s.length() < 1)  {
            adapter.clear();

            alreadyAdded = false;
        }
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {           
        if (s.length() == 1) {
            populateAdapter(s);

            alreadyAdded = true;
        }
    }

    private void populateAdapter(CharSequence s) {  
        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("a") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_A);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("ä") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_A);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("b") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_B);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("c") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_C);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("d") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_D);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("e") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_E);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("f") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_F);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("g") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_G);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("h") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_H);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("i") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_I);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("j") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_J);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("k") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_K);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("l") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_L);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("m") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_M);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("n") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_N);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("o") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_O);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("ö") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_O);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("p") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_P);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("q") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_Q);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("r") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_R);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("s") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_S);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("t") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_T);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("u") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_U);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("ü") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_U);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("v") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_V);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("w") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_W);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("y") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_Y);
        }

        if (s.toString().toLowerCase(Locale.GERMAN).startsWith("z") && !alreadyAdded)  {
            adapter.addAll(StreetNames.STREETS_Z);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:50:28.883

我对优化发表了评论......但由于我正在粘贴代码......我想保留格式，所以我粘贴为答案，即使这不能回答你的问题。

这是我编写代码以使其更容易更改/添加/维护的方式...

```
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) 
{           
    if (s.length() == 1) 
    {
        if (!alreadyAdded)
        {
            alreadyAdded = true;
            populateAdapter(s);
        }
    }
}

private void populateAdapter(CharSequence s) {  
    Object arr[][] = 
    {{"a", StreetNames.STREETS_A },
     {"ä", StreetNames.STREETS_A },
     {"b", StreetNames.STREETS_B },
     {"c", StreetNames.STREETS_C },
     {"d", StreetNames.STREETS_D },
     {"e", StreetNames.STREETS_E },
     {"f", StreetNames.STREETS_F },
     {"g", StreetNames.STREETS_G },
     {"h", StreetNames.STREETS_H },
     {"i", StreetNames.STREETS_I },
     {"j", StreetNames.STREETS_J },
     {"k", StreetNames.STREETS_K },
     {"l", StreetNames.STREETS_L },
     {"m", StreetNames.STREETS_M },
     {"n", StreetNames.STREETS_N },
     {"o", StreetNames.STREETS_O },
     {"ö", StreetNames.STREETS_O },
     {"p", StreetNames.STREETS_P },
     {"q", StreetNames.STREETS_Q },
     {"r", StreetNames.STREETS_R },
     {"s", StreetNames.STREETS_S },
     {"t", StreetNames.STREETS_T },
     {"u", StreetNames.STREETS_U },
     {"ü", StreetNames.STREETS_U },
     {"v", StreetNames.STREETS_V },
     {"w", StreetNames.STREETS_W },
     {"y", StreetNames.STREETS_Y },
     {"z", StreetNames.STREETS_Z }};

    for (int i=0; i<arr.length; i++)
    {
        if (s.toString().toLowerCase(Locale.GERMAN).startsWith(arr[i][0]))  {
            adapter.addAll(arr[i][1]);
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-11T11:19:38.383

将以下代码用于自动完成 TextView

MainActivity.java

```
public class MainActivity extends Activity {

AutoCompleteTextView autoCompleteTextView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    autoCompleteTextView = (AutoCompleteTextView) findViewById(R.id.AndroidBooks);

    StreetArrayAdapter adapter = new StreetArrayAdapter(MainActivity.this,
            android.R.layout.simple_gallery_item);
    autoCompleteTextView.setThreshold(1);
    autoCompleteTextView.setAdapter(adapter);
    autoCompleteTextView.addTextChangedListener(new StreetTextWatcher(
            autoCompleteTextView, adapter));

}
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <AutoCompleteTextView
        android:id="@+id/AndroidBooks"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:inputType="text">
    </AutoCompleteTextView>
</LinearLayout> 
```

StreetArrayAdapter.java

```
public class StreetArrayAdapter extends ArrayAdapter<String> {

String TAG = getClass().getSimpleName();

public StreetArrayAdapter(Context context, int textViewResourceId) {
    super(context, textViewResourceId);
}

public void addAll(String[] streets) {
    for (String street : streets) {
        Log.v(TAG, "street = " + street);
        add(street);
    }
}

@Override
public void insert(String object, int index) {
    super.insert(object, index);
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

@Override
public void setDropDownViewResource(int resource) {
    super.setDropDownViewResource(resource);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    return super.getView(position, convertView, parent);

}

} 
```

StreetTextWatcher.java

```
public class StreetTextWatcher implements TextWatcher {

private final StreetArrayAdapter adapter;
private boolean alreadyAdded = false;

String TAG = getClass().getSimpleName();
AutoCompleteTextView autoCompleteTextView;

public StreetTextWatcher(AutoCompleteTextView autoCTV,StreetArrayAdapter adapter) {
    this.adapter = adapter;
    autoCompleteTextView = autoCTV;
}

@Override
public void afterTextChanged(Editable s) {
    // not used
}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    if (s.length() < 1) {
        adapter.clear();

        alreadyAdded = false;
    }
}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {

    Log.v(TAG, "char ---> = "+ s);
    if (s.length() == 1) {
        populateAdapter(s);

        alreadyAdded = true;
    }
}

private void populateAdapter(CharSequence s) {
    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("a")
            && !alreadyAdded) {
        Log.v(TAG, "inside A");
        adapter.addAll(StreetNames.STREETS_A);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("ä")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_A);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("b")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_B);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("c")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_C);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("d")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_D);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("e")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_E);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("f")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_F);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("g")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_G);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("h")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_H);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("i")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_I);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("j")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_J);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("k")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_K);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("l")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_L);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("m")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_M);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("n")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_N);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("o")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_O);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("ö")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_O);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("p")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_P);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("q")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_Q);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("r")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_R);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("s")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_S);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("t")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_T);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("u")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_U);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("ü")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_U);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("v")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_V);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("w")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_W);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("y")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_Y);
    }

    if (s.toString().toLowerCase(Locale.GERMAN).startsWith("z")
            && !alreadyAdded) {
        adapter.addAll(StreetNames.STREETS_Z);
    }

    autoCompleteTextView.setAdapter(adapter);
}

} 
```

StreetNames.java

```
public class StreetNames {
 public static String[] STREETS_A = {"Apple", "Ant", "ana","alia"};
 public static String[] STREETS_B = {"Ball", "Baby","banana","bear"};
 public static String[] STREETS_C = {"Cat", "Coffee", "cherry", "carrot"};
 public static String[] STREETS_D = {"Doll", "Dady", "dj", "don"};
 public static String[] STREETS_E = {"Elephant", "Eye", "earing", "easy"};
 /*
  .
  .
  */
 public static String[] STREETS_Z = {"Zebra", "Zero", "zzz", "zoya"};
} 
```

如果您有任何疑问，请告诉我...

# c# - 识别 Windows 窗体中的控件

> ID：14590385
> 
> 赞同：0
> 
> 时间：2013-01-29T19:07:41.323
> 
> 标签：c#, winforms, visual-studio-2010

任何人都可以在 Microsoft Outlook 插入签名模式中识别选择要编辑的签名、选择默认签名和编辑签名的 Windows 窗体控件的类型吗？我无法弄清楚它是否是一个超级缩小的面板，或者它是否是我找不到的其他控件？

![在此处输入图像描述](../Images/80b9535523629f1987b89f3df94d8861.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:26:47.383

它们根本不是控件。您在该对话框中看到的大部分内容是我所说的“伪控件​​”，即看起来和操作为控件但没有系统窗口的绘制位。您可以通过使用 Spy 工具查找（不存在的）系统窗口来查看这一点。

您可以使用 Graphics.DrawText 和 ControlPaint.DrawXXX 自己实现这一点，其中 XXX 我不确定。也许是 Border 或 3DBorder？

这是一个廉价而肮脏的例子。我使用了 WinForms Label 控件，因为它很简单。

```
using System;
using System.Drawing;
using System.Windows.Forms;

public class Form1 : Form
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }

    public Form1()
    {
        ClientSize = new Size(400, 200);
        Controls.Add(new LineLabel { Text = "Edit signature", Location = new Point(10, 10), Anchor = AnchorStyles.Left | AnchorStyles.Right, Width = 380 });
    }
}

public class LineLabel : Label
{
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        SizeF textSize = e.Graphics.MeasureString(this.Text, this.Font);
        int leftWidth = (int)(textSize.Width + 2);
        Rectangle bounds = new Rectangle(leftWidth, Height / 2 - 4, Bounds.Width - leftWidth, 2);
        ControlPaint.DrawBorder(e.Graphics, bounds, Color.DarkGray, ButtonBorderStyle.Solid);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:15:32.593

它们是 GroupBox，尽管它们的边界看起来有些修改。如果您想自定义自己的，您可以为 WinForms 组框（在某种程度上）执行此操作，但事实证明，使用 WPF 组框并阅读[样式化 GroupBox](https://stackoverflow.com/questions/9361903/styling-a-groupbox)中的样式会更容易。

必读的还有[MSDN - How To Define a GroupBox Template](http://msdn.microsoft.com/en-us/library/ms750472.aspx)。

# mysql - 从 db 中提取 youtube 链接 - fancybox 错误还是什么？

> ID：14590386
> 
> 赞同：0
> 
> 时间：2013-01-29T19:07:42.797
> 
> 标签：mysql, iframe, fancybox

您好，我在使用 fancybox 2 时遇到问题。我从 mySQL 数据库中提取了一个 youtube 链接，但这不起作用。但是，如果我在 src 标签中写下 youtube 链接，那么一切正常。

```
<p></p><a class='youtube info'  href='".$myrow[ylink]."'>Смотреть трейлер</a> // doesn't work

<p></p><a class='youtube info'  href='http://www.youtube.com/watch?v=R1v0uFms68U'>Смотреть трейлер</a>  // works 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:31:13.693

提供的代码不完整，但我猜你错过了进入 php-mode。

```
<p></p><a class='youtube info'  href='<?php echo $myrow['ylink'];?>'>Смотреть трейлер</a> 
```

# php - 如果没有答案，如何插入数据库行

> ID：14590387
> 
> 赞同：-8
> 
> 时间：2013-01-29T19:07:48.687
> 
> 标签：php, jquery, mysqli

我正在尝试为数据库中的每个问题插入每个答案。问题是问题可能没有答案，所以我尝试了下面的代码，但如果问题没有答案，它不会插入数据库行，我想做的是，如果没有答案，则显示该问题列`No Answer`下的字符串`Answer`：

```
 $answersql = "INSERT INTO Answer (QuestionId, Answer) 
    VALUES (?, ?)";
if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

if( $insert && $insertanswer)
{

    $c = count($_POST['numQuestion']);
    $question_ids = array();

    for($i = 0;  $i < $c; $i++ )
    {

... //Question INSERT goes here

        $questionId = $mysqli->insert_id;

            $question_ids[$questionNo] = $questionId;

}

        $results = $_POST['value'];
        foreach($results as $id => $value) 
        {
            $answer = $value;

            $quesid = (int)$question_ids[$id];   

            foreach($value as $answer) 
            {

            if($answer == '' || $answer === null){
                $answer = 'No Answer';
            }

                $insertanswer->bind_param("is", $quesid, $answer);

                $insertanswer->execute();

                if ($insertanswer->errno) {
                    // Handle query error here
                    echo __LINE__.': '.$insertanswer->error;
                    break 7;
                }
            }
        }

    //close your statements at the end

    $insertanswer->close();

} 
```

来自`['value']`输入：

```
var $newBtn = $(("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this, " + gQuestionIndex + ");' />").replace('%s', $this.is(':visible') ? 'inline-block' : 'none')).attr('name', "value[" + gQuestionIndex + "][]").attr('value', $this.val()).attr('class', $this.attr('class')).attr('id', $this.attr('id') + 'Row'); 
```

下面是表的 SHOW CREATE TABLE `Answer`：

```
CREATE TABLE `Answer` (
 `AnswerId` int(10) NOT NULL AUTO_INCREMENT,
 `QuestionId` int(10) NOT NULL,
 `Answer` varchar(10) DEFAULT NULL,
 PRIMARY KEY (`AnswerId`)
) ENGINE=InnoDB AUTO_INCREMENT=280 DEFAULT CHARSET=utf8 
```

下面是一个 var dump，如果我将问题 1 设置为有答案`B`，`C`问题 2 设置为没有答案，问题 3 设置为有答案`B`，问题 4 设置为没有答案，它将从 var dump 中输出以下内容：

```
var_dump($question_ids);
    var_dump($results);

array(4) { 
[1]=> int(265) 
[2]=> int(266) 
[3]=> int(267) 
[4]=> int(268) 
} 
[1]=> array(2) { 
[0]=> string(1) "B" 
[1]=> string(1) "C" 
} 
[3]=> array(1) { 
[0]=> string(1) "B" 
} 
```

因此它会在问题 1 和 3 中输出这组答案。但不会`No Answer`针对问题 2 和 4 发布。

如果所有问题都有这样的答案L

```
question 1: B C
question 2: A
question 3: B
question 4: A C 
```

然后 var dump 在 var dump 中显示：

```
array(4) { 
[1]=> int(277) 
[2]=> int(278) 
[3]=> int(279) 
[4]=> int(280) 
} 
array(4) { 
[1]=> array(2) { 
[0]=> string(1) "B" 
[1]=> string(1) "C" } 
[2]=> array(1) { 
[0]=> string(1) "A" 
} 
[3]=> array(1) 
{ 
[0]=> string(1) "B" 
} 
[4]=> array(2) 
{ 
[0]=> string(1) "A" 
[1]=> string(1) "C" 
} }} 
```

正如您所看到的，每个问题都插入了相关答案。所以问题是如果问题没有答案，它不会插入 db row 和 state `No Answer`。我的问题是如何为`No Answer`数据库中没有在这些问题中选择答案的每个问题包含一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:57:18.990

`Answer`当没有答案时，不要在表格中插入任何内容。您的其余解决方案基本上是正确的。

显示有答案的问题时，检查是否有答案（空选择结果或左连接列中为空）显示，如果没有，则显示“无答案”。但是数据库中没有“没有答案”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:44:28.603

当您的代码到达 时`$results = $_POST['value'];`，`$question_ids`将填充必须包含在表中的问题的 ID。

我的建议是在包含相关问题的第一个答案之后立即从该数组中删除元素。这样，在`foreach($results as $id => $value)`循环之后，这个数组将只包含没有明确答案的问题。下一步就是在数据库中包含这些伪答案“No answer”。

为您提供的相关代码（插入的行是 //* 注释）：

```
$notAnswered = $question_ids; //* Make a copy
$results = $_POST['value'];
foreach ($results as $id => $value) {
    $answer = $value;
    $quesid = (int)$question_ids[$id];
    $pos = array_search($quesid, $notAnswered); //* Search for it
    if ($pos !== false) //* It's in the array
        array_splice($notAnswered, $pos, 1); //* Delete it from the array
    foreach ($value as $answer) {
        $insertanswer->bind_param("is", $quesid, $answer);
        $insertanswer->execute();

        if ($insertanswer->errno) {
            // Handle query error here
            echo __LINE__.': '.$insertanswer->error;
            break 7;
        }
    }
}

//* Insert 'No Answer' for each question not answered
foreach ($notAnswered as $id) {
    $insertanswer->bind_param('is', $id, 'No Answer');
    $insertanswer->execute();
    if ($insertanswer->errno) {
        // Handle query error here
        echo __LINE__.': '.$insertanswer->error;
        break 7;
    }
}

// Close your statements at the end
$insertanswer->close(); 
```

这里需要注意一件重要的事情：对于大数组（>100 个元素），array_splice 在 PHP 中*非常慢。*但我不认为这里是这种情况。

# java - 将 LinkedList 类更改为类似于 java.util.ArrayList 类的泛型集合

> ID：14590394
> 
> 赞同：-1
> 
> 时间：2013-01-29T19:08:12.143
> 
> 标签：java, linked-list, generic-collections

这是一个`LinkedList`具有修改列表的方法。我必须做的一件事是：

> 将 LinkedList 类更改为与该类类似的通用集合`java.util.ArrayList`。

我不知道该怎么做？

```
import java.util.NoSuchElementException;

/**
A linked list is a sequence of nodes with efficient
element insertion and removal. This class 
contains a subset of the methods of the standard
java.util.LinkedList class.
 */
public class LinkedList<E>
{  
   int currentSize =0;
    private Node head;
    private Node tail;

    /** 
    Constructs an empty linked list.
     */
    public LinkedList()
    {  
        head = null;
        tail = null;
    }

    /**
    Adds an element to the front of the linked list.
    @param element the element to add
     */
    public void addFirst(Object element)
    {  
        Node newNode = new Node();
        newNode.data = element;
        newNode.next = head;
        currentSize++;
        head = newNode;
        tail = head;
        while( tail.next != null)
        {
         tail = tail.next;
        }
    }

    /**
    Removes the head element in the linked list.
    @return the removed element
     */
    public Object removeFirst()
    {  
        if (head == null) 
            throw new NoSuchElementException();

        Object temp = head.data;

        head = head.next;
         currentSize--;
        return temp;

    }

    /**
    Returns the head element in the linked list.
    @return the head element in the linked list
     */
    public Object getFirst()
    {  
        if (head == null) 
            throw new NoSuchElementException();
        return head.data;
    }

    /**
    Returns the element at a given position in the linked list.
    @param index the element position
    @return the element at the given position
     */
    Object get(int index)
    {
        if (index < 0)
            throw new NoSuchElementException();

        Node current = head;
        int i = 0;

        while (current != null && i < index)
        {
            current = current.next;
            i++;
        }

        if (current == null)
            throw new NoSuchElementException();
        return current.data;
    }

    /**
    Computes the size of the linked list
    @return the number of elements in the list
     */
    public int size()
    { 
        //to be completed for lab 7.1 #2
        return currentSize;  // rewrite this, just makes it compile
    }

    /**
    Reverses all elements in a linked list.
     */
    public void reverse()
    { 
        //to be completed for lab 7.1 #1
        if(head == null)
         throw new NoSuchElementException();
          tail = head;
         Node current = head;
         Node nextt= head.next;
        Node nul= null;

        while(nextt!= null)
        {
         current.next = nul;
         nul = current;
         current = nextt;
         nextt = nextt.next;
        }

        head = current;
        head.next = nul;

    }

    /**
    Adds an element to the end of the linked list.
    @param element the element to add
     */
    public void add(Object element)
    { 

        if(head==null)
       addFirst(element);

       else
        {
            Node newNode = new Node();
            newNode.data = element;
            newNode.next = null;
            tail.next = newNode;
            tail = newNode;
            currentSize++;
        }
        //to be completed for lab 7.1 #3
    }    

    /**
    Returns an iterator for iterating through this list.
    Allows the use of the iterator outside of this class.
    @return an iterator for iterating through this list
     */
    public ListIterator listIterator()
    {  
        return new LinkedListIterator();
    }

    /**
    Returns a string representation of this list in brackets 
    separated by commas.
    @return a string of list elements.
     */
    public String toString()
    {  
        StringBuilder temp = new StringBuilder();
        ListIterator it = listIterator();
        while(it.hasNext()){
            temp.append(it.next());
            if(it.hasNext())
                temp.append(", ");
        }
        return temp.toString();    
    }

    private static class Node
    {  
        private Object data;
        private Node next;
    }

    private class LinkedListIterator implements ListIterator
    {              
        private Node position;
        private Node previous;

        /**
        Constructs an iterator that points to the front
        of the linked list.
         */
        public LinkedListIterator()
        {  
            position = null;
            previous = null;
        }

        /**
        Moves the iterator past the next element.
        @return the traversed element
         */
        public Object next()
        {  
            if (!hasNext())
                throw new NoSuchElementException();
            previous = position; // Remember for remove

            if (position == null)
                position = head;
            else
                position = position.next;

            return position.data;
        }

        /**
        Tests if there is an element after the iterator 
        position.
        @return true if there is an element after the iterator 
        position
         */
        public boolean hasNext()
        {  
            if (position == null)
                return head != null;
            else
                return position.next != null;

        }

        /**
        Adds an element before the iterator position
        and moves the iterator past the inserted element.
        @param element the element to add
         */
        public void add(Object element)
        {  
            if (position == null)
            {
                addFirst(element);
                position = head;

            }
            else
            {  
                Node newNode = new Node();
                newNode.data = element;
                newNode.next = position.next;
                position.next = newNode;
                position = newNode;
                previous = position;
                tail=head;
                while( tail.next != null)
                {
                   tail = tail.next; 
                }
               currentSize++;
            }

        }

        /**
        Removes the last traversed element. This method may
        only be called after a call to the next() method.
         */
        public void remove()
        {  
            if (previous == position)
                throw new IllegalStateException();

            if (position == head)
            {
                removeFirst();

            }
            else 
            {  
                previous.next = position.next;
                tail=head;
                while(tail.next != null)
                {
                   tail = tail.next; 
                }
               currentSize--;
            }

           position = previous;

        }

        /**
        Sets the last traversed element to a different 
        data. 
        @param element the element to set
         */
        public void set(Object element)
        {
            if (position == null)
                throw new NoSuchElementException();
            position.data = element;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:18:09.733

它们都是收藏品。

我相信您必须替换所有实例，`Object`以便`E`java 类可以采用它在 < > 中声明的泛型类型。

# ruby-on-rails - 使用 Spork 和 Guard 时启动错误

> ID：14590399
> 
> 赞同：18
> 
> 时间：2013-01-29T19:08:32.350
> 
> 标签：ruby-on-rails, rspec-rails, guard, spork

这就是问题所在。当`Guard gem`我打电话时，一切都很好`Guard`。当我添加时`Spork`，我收到以下错误，它不会影响测试我的测试，但每次我尝试重新启动 Guard 时都会出现。

```
19:01:28 - INFO - Guard uses TerminalTitle to send notifications.
19:01:28 - INFO - Starting Spork for RSpec
19:01:28 - ERROR - Guard::Spork failed to achieve its <start>, exception was: 
```

> [#5232DAD6505A] ChildProcess::LaunchError: No such file or directory - bundle exec spork -p 8989 [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/childprocess-0.3.7 /lib/childprocess/unix/fork_exec_process.rb:54:in `launch_process' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/childprocess-0.3.7/lib/childprocess/abstract_process.rb:68:in`start' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-spork-1.2.0/lib/ guard/spork/spork_instance.rb:38:in `start' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-spork-1.2.0/lib/guard/spork/runner.rb:33:in`each' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-spork-1.2.0/lib/guard/spork /runner.rb:33:in `launch_sporks' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-spork-1.2.0/lib/guard/spork.rb:21:in`start' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:99：抓住' [# 5232DAD6505A `block in run_supervised_task' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:97:in`] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:97:in`run_supervised_task' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:54:in`运行中的块（2 个级别）' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:175:in `block (3 levels) in scoped_guards' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:174:in`each ' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:174:in `block (2 levels) in scoped_guards' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:173:in`catch' [#5232DAD6505A] /Users /periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:173:in `block in scoped_guards' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:172:in`each' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems /ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:172:in `scoped_guards' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:53:in`block in run' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9。 3-p362/gems/lumberjack-1.0.2/lib/lumberjack.rb:27:in `unit_of_work' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/runner.rb:52:in`run' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6 .2/lib/guard.rb:187:in`block in start' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard.rb:363:in`阻止在 inside_preserved_state' [#5232DAD6505A] :10:in `synchronize' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard.rb:360:in`within_preserved_state' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard.rb: 185:in `start' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/guard-1.6.2/lib/guard/cli.rb:110:in`start' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/thor-0.17.0/lib/thor/task.rb:27:in `run' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/thor-0.17.0/lib/thor/invocation.rb:120:in`invoke_task' [# 5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/thor-0.17.0/lib/thor.rb:344:in `dispatch' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/gems/thor-0.17.0/lib/thor/base.rb:434:in`start' [#5232DAD6505A] /Users/periclestheodorou/.rvm /gems/ruby-1.9.3-p362/gems/guard-1.6.2/bin/guard:6:in `<top (required)>' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/bin/guard:19:in`load' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/垃圾箱/守卫：19：在`<main>' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in`eval' [#5232DAD6505A] /Users/periclestheodorou/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `' 19:01:28 - 信息 - Guard::Spork 刚刚被解雇 19 :01:28 - 信息 - Guard::RSpec 正在运行，使用 RSpec 2！19:01:28 - 信息 - 运行所有规范 没有运行 DRb 服务器。而是在本地进程中运行...未找到示例。

在 0.0001 秒内完成 0 个示例，0 个失败

**这是宝石文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.2.0'
  gem 'spork', '0.9.2'
end

group :assets do
  gem 'sass-rails', '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails'

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-fsevent', '0.9.1', :require => false
end

group :production do
  gem 'pg', '0.12.2'
end 
```

**spec_helper**

```
require 'rubygems'
require 'spork'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However, 
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.
  # This file is copied to spec/ when you run 'rails generate rspec:install'
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    # == Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false
  end
end

Spork.each_run do
  # This code will be run each time you run your specs.

end 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-30T10:03:33.263

这是一个[已知问题`guard-spork`](https://github.com/guard/guard-spork/issues/107)，您可以`ChildProcess`通过添加以下内容来使用以前的版本：

```
gem 'childprocess', '0.3.6' 
```

到您的`Gemfile`或尝试使用guard-spork master 分支，该分支已通过将以下内容添加到您的中来[解决此问题](https://github.com/guard/guard-spork/commit/889e2d97b09b330744021b6610318e0b9ebd5779)`Gemfile`：

```
gem 'guard-spork', :github => 'guard/guard-spork' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T16:58:04.327

跑步

```
bundle exec guard 
```

代替

```
guard 
```

为我修好了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T02:02:58.353

将 Gemfile 更新为“guard-spork”、“1.4.2”，并为我修复了它。

# iphone - 读取/写入数据到加密的自定义文件类型

> ID：14590400
> 
> 赞同：0
> 
> 时间：2013-01-29T19:08:41.137
> 
> 标签：iphone, objective-c, macos

我想创建一个自定义文件类型，比如 .cstm，并且能够在 mac 上创建 .cstm 文件，并在 iPhone 上读取它们。

我希望 .cstm 文件包含 XML 数据。目前我已经让 mac 应用程序成功制作 .xml 文件和 iPhone 应用程序成功读取 .xml 文件，但我想创建一个专有的自定义文件类型。

我该怎么做呢？我知道如何允许 iPhone 应用程序打开自定义文件类型，但据我所知。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:20:30.167

你本身不需要任何特别的东西。您可以使用 ctsm 扩展名保存并加载到 URL。为了支持您的应用程序在 OSX 中作为该扩展程序的编辑器自动启动，您需要在 Info.plist 文件`CFBundleDocumentTypes`数组条目中添加一个条目，将您的应用程序声明为该扩展程序的编辑器

[https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107)

# python - 我如何检查框架是否存在并 - 如果存在 - 销毁它？

> ID：14590403
> 
> 赞同：1
> 
> 时间：2013-01-29T19:08:53.380
> 
> 标签：python, tkinter

我正在尝试从在线 txt 文件中提取一些文本行并在窗口中显示它们。到目前为止，一切都很好。

我想每隔“x”秒重新加载/刷新该窗口，以便重新绘制其中的标签（以防我添加、减去或更改了该 txt 文件中的文本行），但目前无法做到.

我在根中添加了一个框架，并将标签动态添加到框架中。每隔“x”秒，我想检查该框架是否存在，如果存在，则销毁它，再次提取 txt 文件的内容并重新创建框架和标签，以便我的标签是最新的。

为此，我尝试在函数的开头添加一个“尝试/排除”来检查框架是否存在并销毁它，但我无法让它工作。

有什么想法可以帮助一个非常缺乏经验的 python 爱好者吗？

```
#coding:utf-8

from Tkinter import *
import urllib
import time

mroot = Tk()

def mactions():
    mconteudo = urllib.urlopen('http://www.xyz.com.br/recados.txt')
    mtexto = mconteudo.read().split('***')

    #this is where I think I'm doing something wrong - I always get a NameError.
    try:
        mframe.destroy()
    except NameError:
        print '- NameError -'
    except UnboundLocalError:
        print '- UnboundLocalError -'

    mframe = Frame(mroot)
    for i in mtexto:
        w = Label(mframe, text=i)
        w.pack()
        wseparador = Label(mframe, text='________')
        wseparador.pack()
        mframe.pack()

    mroot.after(2000, mactions)

mactions()
mroot.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:18:39.397

mframe 仅在函数内定义。每次通过函数后，它都会自动销毁。要验证这一点，您可以添加：“global mframe”以使其成为一个全局变量，直到下一次调用该函数。

有更好的解决方案，例如将变量存储在另一个答案中建议的类中。

那么更新标签上下文呢？您也可以尝试仅使用单个多行标签。

# objective-c - 使用图像确定 UITableViewCell 中 UILabel 的宽度/高度

> ID：14590404
> 
> 赞同：1
> 
> 时间：2013-01-29T19:08:54.800
> 
> 标签：objective-c, uitableview, ios6, uilabel

当表格单元格有很多文本和图像时，我在确定表格单元格的高度时遇到了问题。但问题是上下文相关的，取决于所使用的文本类型。我将解释这个问题，然后给出我用来格式化单元格和确定单元格高度的代码。当我在单元格左侧有一个图像时，我从图像的最大高度与文本的最大高度中获取单元格高度。问题是在所有情况下都没有正确计算文本高度。下面，我在底部单元格中有以下文本：

“P 154 越南家常菜：非常好！！将香料搅拌成糊状——效果很好；用西葫芦上剩下的酱汁烤；运作良好；厚猪排；在 450 和 525 之间煮 35 分钟”。

表格视图一直滚动到底部。如您所见，文本的底部不存在（“在 450 和 525 之间煮 35 分钟”）。实际发生的情况是没有正确确定文本宽度。下面，文本宽度被计算为 cell.textLabel.bounds.size.width: 234 像素。基于此，错误地计算了文本的高度。 ![模拟器屏幕抓取显示不完整的文本](../Images/ba9346abaa6948c3517da4a4d69b6340.png)

但是，如果我按下辅助按钮 (“>”) 并进入下一个视图，然后从该视图返回（使用带有导航控制器的“后退”按钮），我通常会得到以下更改的表格显示（但有时我仍然得到上面的视图，没有剩余的文字）： ![显示完整文本的模拟器屏幕抓取](../Images/9bb225a3c4d8c7907a0b2a5b2644231c.png)

在这种情况下，表格视图第二次显示时，文本的宽度计算为 cell.textLabel.bounds.size.width: 163 像素。两个文本宽度之间的差异（234 - 163 = 71 像素）。图像宽度为 100 像素。不幸的是，情况比这更复杂：
1）如果单元格中没有图像，我确定文本的宽度没有问题。
2）如果我只使用一系列简单的文本行，例如一系列连续的数字/字母，每个字符后都有一个回车符，那么宽度是正确确定的。例如，如果单元格中的文本是：
1
2
3
4
5
6
7
8
9
0
A
B
C

3）如果单元格后面（下面）有大量整行文本（不是由回车后跟字符组成的文本）的单元格，那么我永远不会正确计算单元格宽度（因此高度永远不会计算正确）。

**我尝试了什么？**

在 cellForRowAtIndexPath 中，我尝试过： cell.textLabel.autoresizingMask = UIViewAutoresizingNone; [正如所有方向中 UITableViewCell 中的 Dynamic UILabel Heights/Widths](https://stackoverflow.com/questions/10239040/dynamic-uilabel-heights-widths-in-uitableviewcell-in-all-orientations)所建议的那样，但这并没有改变这种情况。

我还尝试从[计算 UILabel/UITableViewCell 的多行文本高度：计算与实际绘制](https://stackoverflow.com/questions/2136051/calculating-multiline-text-height-for-uilabel-uitableviewcell-different-results)到 cellForRowAtIndexPath 时的不同结果中的建议，这会强制文本标签的新宽度，但这不起作用。

**一个有效的黑客**

*起作用*的是强制文本标签宽度为 heightForRowAtIndexPath 内的正确宽度。但是，这肯定是一个hack。我想要一个更好的解决方案。想法？

**代码**

在 BUG74 之后的代码中是我在这里描述的问题。

```
// https://stackoverflow.com/questions/129502/how-do-i-wrap-text-in-a-uitableviewcell-without-a-custom-cell
- (UITableViewCell *)tableView:(UITableView *)theTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCellCommentList";
    CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        NSLog(@"CommentList.cellForRowAtIndexPath: nil case");
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        IF_IOS6_OR_GREATER(
            cell.textLabel.lineBreakMode = NSLineBreakByWordWrapping;
        );
        IF_LESS_THAN_IOS6(
            cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        );

        // To remove any maximum limit, and use as many lines as needed, set the value of this property to 0.
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17.0];
        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

        cell.textLabel.autoresizingMask = UIViewAutoresizingNone;
    }

    NSDictionary *menuItemCommentDictionary =
    [Globals GetIthMenuItemComment: indexPath.row forMenuItem: menuItemName andRestaurant: restaurantName];

    //NSDate *commentDate = [menuItemCommentDictionary objectForKey:@"date"];

    if (CommentListDebug) NSLog(@"cellForRowAtIndexPath");

    UIImage *theIcon;
    NSString *imageFileName = [menuItemCommentDictionary objectForKey:COMMENT_KEY_IMAGE_FILENAME];

    if (imageFileName) {
        // Scaling images in table view cells
        // https://stackoverflow.com/questions/9046573/uitableviewcell-resize-image

#define DEFAULT_TABLE_CELL_HEIGHT 44
#define IMAGE_WIDTH_IN_TABLE_CELL 100
        /* I'm going to give images a constant width and adjust
         the height of the table cell according to their height.
         */
        theIcon = [PersistentStorage retrieveIconFromFile:imageFileName];

        if (CommentListDebug) NSLog(@"icon: %@", theIcon);

        //NSNumber *iconHeight  = [menuItemCommentDictionary objectForKey:@"imageIconHeight"];

        //if (CommentListDebug) NSLog(@"iconHeight: %d", [iconHeight intValue]);

        cell.imageView.image = theIcon;
    } else {
        if (CommentListDebug) NSLog(@"No image file name");
        cell.imageView.image = nil; // Otherwise, if using old cell, uses old icon image
    }

    NSString *cellText = [menuItemCommentDictionary objectForKey:@"menuItemComment"];

    // 1/5/13; Bug# 62; only if there is no icon/image and no text
    // should we mark as empty.
    if ((! imageFileName) && ((nil == cellText) || ([cellText length] == 0))) {
        cellText = EMPTY_TEXT; // temporary empty text
    }

    cell.textLabel.text = cellText;

    // BUG74: 1/29/13;
    // We are not having problems with the text width when there
    // is no icon, so only do this when there is an icon
    // NOTE: This does *not* work; for some reason, the frame.size.width
    // is not retained in the call to heightForRowAtIndexPath.
    if (imageFileName) {
        CGRect labelFrame = cell.textLabel.frame;
        labelFrame.size.width = 287 - 27 - theIcon.size.width;
        NSLog(@"CommentList.cellForRowAtIndexPath: labelFrame.size.width: %d", (int) labelFrame.size.width);
        cell.textLabel.frame = labelFrame;
        [cell.textLabel sizeToFit];
    }

    return cell;
}

- (CGFloat)tableView:(UITableView *)thisTableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *menuItemCommentDictionary =
        [Globals GetIthMenuItemComment: indexPath.row forMenuItem: menuItemName andRestaurant: restaurantName];
    NSString *cellText  = [menuItemCommentDictionary objectForKey:@"menuItemComment"];

    // 1/5/13; Bug# 62; I'm going to allow empty comments in the case
    // where there is no picture and no text. This is to allow a user
    // to have a smiley rating only but no picture and no text.
    // The issue here is that with no text, the height of the row
    // is too small, and looks odd. And it's hard to select that row to
    // delete because it's not very tall.
    // My fix for this it to add some temporary empty text. I've used
    // non-white space text, because I still get the issue if I use
    // white space. If I add the display of smiley's in the comment
    // list then this issue should go away).
    // For some reason the cellText does not seem to be nil when there
    // is no text.
    if ((nil == cellText) || ([cellText length] == 0)) {
        cellText = EMPTY_TEXT; // temporary empty text
    }

    //NSDate *commentDate = [menuItemCommentDictionary objectForKey:@"date"];

    NSString *imageFileName = [menuItemCommentDictionary objectForKey:COMMENT_KEY_IMAGE_FILENAME];

    // If I directly retrieve the icon from the file and display it
    // that way, I get a mess! The image is much too large!!
    UIImage *theIcon = nil;
    if (imageFileName) {
        theIcon = [PersistentStorage retrieveIconFromFile:imageFileName];
    }

    UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:17.0];

    // Some of the following code modified from:
    //https://stackoverflow.com/questions/1947970/dynamic-calculation-of-uilabel-width-in-uitableviewcell
    // Find the cell for this index path
    UITableViewCell *cell = [self tableView:thisTableView cellForRowAtIndexPath:indexPath];
    //CGFloat cellHeight = cell.frame.size.height;

    // Calculate text size after forcing a layout    
    [cell layoutIfNeeded];
    //CGSize textSize = [cell.textLabel.text sizeWithFont:cellFont constrainedToSize:CGSizeMake(cell.contentView.bounds.size.width, MAXFLOAT) lineBreakMode:cell.textLabel.lineBreakMode];

    NSLog(@"CommentList.heightForRowAtIndexPath: cell.textLabel.bounds.size.width: %d", (int) cell.textLabel.bounds.size.width);

    // In my tests, bounds.size.width is the same as frame.size.width
    NSLog(@"CommentList.heightForRowAtIndexPath: cell.textLabel.frame.size.width: %d", (int) cell.textLabel.frame.size.width);

    // cell.contentView.bounds.size.width gives the full width of the
    // cell contents, which was 287 pixels when I tested it
    if (CommentListDebug) NSLog(@"CommentList.heightForRowAtIndexPath: cell.contentView.bounds.size.width: %d", (int) cell.contentView.bounds.size.width);

    // parameters to CGSizeMake are: width, height
    // the width parameter here is supposed to be the text width;

    CGSize constraintSize;

    if (theIcon) {
        // Start hack for BUG74; 1/29/13
        // The number 27 just works; Is it the width of the
        // accessory button within the cell?
        // cell.contentView.bounds.size.width was 287 when I checked.
        int textWidth = cell.contentView.bounds.size.width - 27 - theIcon.size.width;
        constraintSize = CGSizeMake(textWidth, MAXFLOAT);
        // End hack for BUG74; 1/29/13
    } else {
        constraintSize = CGSizeMake(cell.textLabel.bounds.size.width, MAXFLOAT);
    }

    CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:cell.textLabel.lineBreakMode];

    //NSNumber *iconHeight  = [menuItemCommentDictionary objectForKey:@"imageIconHeight"];

#define LABEL_HEIGHT_EXTRA 20
#define ICON_HEIGHT_EXTRA 10

    int textHeight = labelSize.height + LABEL_HEIGHT_EXTRA;

    if (theIcon) {
    //if ([iconHeight intValue] > 0) {
        // Add 10 EXTRA here to give some white space between icons;
        // with no white space, it can be hard to tell where one icon
        // starts and where another ends, particularly because
        // icons have variable height.
        int iconHeight = ((int) theIcon.size.height) + ICON_HEIGHT_EXTRA;

        /* if (CommentListDebug) */NSLog(@"CommentList.heightForRowAtIndexPath: icon height: %d; icon width: %d", (int) theIcon.size.height, (int) theIcon.size.width);

        // BUG74: 1/28/13; If the text height is taller than the image 
        // height use the text height as the cell height.
        NSLog(@"CommentList.heightForRowAtIndexPath: iconHeight= %d, textHeight= %d", iconHeight, textHeight);

        if (iconHeight >= textHeight) return iconHeight;
        return textHeight;

        //return [iconHeight intValue] + 10;
    } else {
        // No image; use label size for height.
        return textHeight;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:57:22.293

因此，如果我弄错了，请纠正我，但是如果您能够增加单元格的大小（如底部图片），那么一切都会按照您的意愿进行吗？如果是这种情况，您可以覆盖：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

这将允许您指定您想要的单元格的高度。通过这种方式，您可以设置它们并防止它们剪切底部的文本（如第一张图片）。

# java - Android：在批量上传到 S3 时安全处理 RejectedExecutionException

> ID：14590409
> 
> 赞同：1
> 
> 时间：2013-01-29T19:09:06.847
> 
> 标签：java, android, amazon-s3, threadpool

我的 Android 应用程序用于工业环境中的数据收集 - 全职员工使用该应用程序进行许多观察（照片、地理标签、文本等），然后在 wifi 可用时批量上传。

我使用 Amazon 的 Android SDK 执行批量 S3 上传 - 在后台，这个库在每次上传时使用一个线程池线程，偶尔我会遇到 RejectedExecutionException。我很好奇我是否能以更有弹性的方式处理这个问题......

请注意，我的代码不执行并行上传，我使用单个线程依次为每张照片调用 s3.transfer.TransferManager.upload()，等待完成，然后继续。因此，在任何给定时间，这里应该只有 ~2 个相关线程 - 一个用于我的代码，一个用于 Amazon 调度的线程。

但是当线程池没有更多空间时，我的用户偶尔会遇到 RejectedExecutionException：

```
java.util.concurrent.RejectedExecutionException: pool=0/10, queue=0
at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:1961)  
at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:794)
at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1315)
at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:107)
at com.amazonaws.services.s3.transfer.internal.UploadMonitor.<init>(Unknown Source)
at com.amazonaws.services.s3.transfer.TransferManager.upload(Unknown Source)
at com.amazonaws.services.s3.transfer.TransferManager.upload(Unknown Source)
at com.amazonaws.services.s3.transfer.TransferManager.upload(Unknown Source) 
```

查看崩溃报告中包含的所有其他线程堆栈，我想知道其他 AsyncTask 是否只是过去的上传，还没有机会清理？例如，我看到很多：

```
java.lang.Object.wait(Native Method)
java.lang.Thread.parkFor(Thread.java:1424)
java.lang.LangAccessImpl.parkFor(LangAccessImpl.java:48)
sun.misc.Unsafe.park(Unsafe.java:337)
java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2016)
java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:411)
java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1021)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
java.lang.Thread.run(Thread.java:1019) 
```

这些线程是否可能只是需要一个清理的机会？如果是这样，是否有一种相对简单的机制可以在可预测的时间/风险内完成此操作，以便我可以继续批量上传？

我想知道我的主上传线程上的 thread.sleep(0) 的（概念）等价物是否会给池一个清理的机会，然后我可以重试上传？

我将不胜感激任何想法或经验。我无法在内部复制它，而且它是不可预测的，所以我的实验能力在这里受到限制......

谢谢。

# c++ - C++ 中的 stoi 和 stoll

> ID：14590410
> 
> 赞同：3
> 
> 时间：2013-01-29T19:09:12.797
> 
> 标签：c++, string, compilation, string.h

我在程序顶部的声明中包含#include(string)，但是当我尝试运行 stoi(string) 或 stoll(string) 时，出现以下错误。我正在运行 Cygwin g++ v4.5.3。

> Z:\G\CSCE 437>g++ convert.cpp -o conv convert.cpp: In function `void transfer(std::string*)': convert.cpp:103:36: error:`stoll' is not declared in this scope convert.cpp:116:35: error: `stoi' was not declared in this scope

```
 fileTime[numRec] = stoll(result[0]);    //converts string to Long Long
    if(numRec = 0){
       beginningTime = fileTime[0];
    }
    fileTime[numRec] = timeDiff;
    hostName[numRec] = result[1];
    diskNum[numRec] = stoi(result[2]);
    type[numRec] = result[3];
    offset[numRec] = stoi(result[4]);
    fileSize[numRec] = stoi(result[5]);
    responseTime[numRec] = stoi(result[6]);` 
```

其中 result 是一个字符串数组。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T19:12:02.640

这些功能是 C++11 中的新功能，只有在您使用命令行选项指定该语言版本`-std=c++11`（或`-std=c++0x`在某些旧版本上；我认为您在 4.5 版中需要）时，才可以使用这些功能。

如果由于某种原因不能使用 C++11，则可以使用字符串流进行转换：

```
#include <sstream>

template <typename T> from_string(std::string const & s) {
    std::stringstream ss(s);
    T result;
    ss >> result;    // TODO handle errors
    return result;
} 
```

或者，如果您感到自虐，可以使用 .c 中`strtoll`声明的 C 函数`<cstring>`。

# javascript - Javascript - 滚动到页面底部时出错

> ID：14590417
> 
> 赞同：0
> 
> 时间：2013-01-29T19:09:40.343
> 
> 标签：javascript

通过 Firebug/Firefox 进行测试，我尝试使用以下命令运行最简单的命令以使页面滚动到底部：

```
window.scrollBy(0,3000); 
```

很简单，对吧？在几个网站上进行测试，例如 Yahoo.com，一小行代码完美运行。但是，在我尝试运行它的一个特定站点上，页面不会滚动，我在控制台日志中得到了这个。

```
>>> window.scrollBy(0,3000);
undefined 
```

我正在测试的页面自动运行了 jQuery 1.7.2。我可以通过控制台发送什么来修复此错误？我怀疑再次“定义窗口”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:13:38.660

这不是错误，`undefined`在您的控制台中调用此函数后意味着它不会返回任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:44:20.623

`window.scrollBy`无法在您[尝试使用的页面上运行](https://signup.live.com/signup.aspx?wa=wsignin1.0&rpsnv=11&ct=1359488007&rver=6.1.6206.0&wp=MBI&wreply=http://mail.live.com/default.aspx&id=64855&cbcxt=mai&snsc=1&bk=1359488008&uiflavor=web&mkt=EN-US&lc=1033&lic=1)，因为它不是溢出并正在滚动的窗口。

页面上的`c_base`div 是正在滚动的内容。它是绝对定位的，它的溢出是您正在滚动的内容，而不是整个窗口。

`scrollTop`您可以通过设置属性来滚动 div ：

```
document.getElementById('c_base').scrollTop = 3000; 
```

# jquery - 更改花式框大小

> ID：14590426
> 
> 赞同：2
> 
> 时间：2013-01-29T19:10:17.573
> 
> 标签：jquery, fancybox-2

我展示了一个带有fancybox的iframe。在 iframe 的 HTML 中，我这样做：

```
<body style="width: 650px; height: 430px;"> 
```

然后在 JS 中我执行以下操作：

```
$(".popup").fancybox({
    padding : 0,
    closeBtn : false,
    autoSize  : true,
    fitToView : false,    
    beforeShow: function()
    {
        this.width = ($("iframe").contents().find("body").width());
        this.height = ($("iframe").contents().find("body").height());
    }
}); 
```

其中“.popup”是：

```
<a href="url.php" class="popup" data-fancybox-type="iframe"> 
```

如果在那个 iframe 中我加载了另一个不同尺寸的 HTML（比如 400x150），fancybox 会调整它的高度而不是宽度。

任何帮助将不胜感激！

**编辑 1**：

我第一次运行花哨的盒子时，“.fancybox-inner” div 的样式是这样的

```
width: 650px; height: 430px; 
```

然后，当我在 iframe 中导航时，“.fancybox-inner” div 的样式如下

```
width: 650px; height: 150px; 
```

但是第二个 HTML body 标签是这样的

```
<body style="width: 400px; height: 150px;"> 
```

**编辑2：**

[此答案](https://stackoverflow.com/a/7221369/702353)中链接的此[解决方案](http://www.ianhoar.com/2011/08/25/jquery-and-fancybox-how-to-automatically-set-the-height-of-an-iframe-lightbox/)的评论表明我这仅适用于高度

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:44:17.657

好的，我最终使用了 fancybox 版本：2.1.4（2013 年 1 月 10 日，星期四）

在第 1231 行，你会发现

```
origHeight = body.height(); 
```

之后添加这个

```
origWidth = body.width(); 
```

自动调整高度和

# java - Java Mail() 与 DB while 循环

> ID：14590431
> 
> 赞同：0
> 
> 时间：2013-01-29T19:10:44.623
> 
> 标签：java

有什么方法可以在不连接和断开邮件服务的情况下应用此循环？该循环对于 2 或 5 人工作正常，但何时达到 100 人将需要很长时间才能发送所有消息。每个循环大约需要 3 秒。

```
 while(rs.next()){
     items = rs.getString("email");          

    try {

        Properties mail = new Properties();
        mail.setProperty("mail.smtp.host", "smtp.gmail.com");
        mail.setProperty("mail.smtp.starttls.enable","true");
        mail.setProperty("mail.smtp.port", "25");
        mail.setProperty("mail.smtp.user", "cuatrocuadrado@gmail.com" );
        mail.setProperty("mail.smtp.auth", "true");

         session=Session.getDefaultInstance(mail);
       message= new MimeMessage(session);
         message.setFrom(new InternetAddress("cuatrocuadrado@gmail.com"));
         message.addRecipient(Message.RecipientType.TO, new InternetAddress(items));
        //message.addRecipient(Message.RecipientType.BCC, new InternetAddress());
        message.setSubject(Email.tSubject.getText());
        message.setText(Email.areaEmail.getText());

         Transport t = session.getTransport("smtp");
        t.connect("cuatrocuadrado@gmail.com","*********");

        t.sendMessage(message, message.getAllRecipients());

        t.close();

        } catch (MessagingException ex) {
        JOptionPane.showMessageDialog(null,ex.getMessage());
    }
} }  catch (SQLException ex) {
        Logger.getLogger(SendEmail.class.getName()).log(Level.SEVERE, null, ex);
    }JOptionPane.showMessageDialog(null,"Success"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:25:27.600

试试这个，但你会再次面临另一个问题......如果你的服务器没有 NS 条目，gmail 将不允许你发送给多个收件人。如果您确实有亚马逊或其他云服务，您可以使用它们，但它们会收费：P

```
try {

    Properties mail = new Properties();
    mail.setProperty("mail.smtp.host", "smtp.gmail.com");
    mail.setProperty("mail.smtp.starttls.enable","true");
    mail.setProperty("mail.smtp.port", "25");
    mail.setProperty("mail.smtp.user", "cuatrocuadrado@gmail.com" );
    mail.setProperty("mail.smtp.auth", "true");

    session=Session.getDefaultInstance(mail);
    message= new MimeMessage(session);
    message.setFrom(new InternetAddress("cuatrocuadrado@gmail.com"));

    ArrayList<InternetAddress> many = new ArrayList<InternetAddress>();
    while(rs.next()){
        many.add(new InternetAddress(rs.getString("email")));    
    }
    message.addRecipient(Message.RecipientType.TO, many.toArray(new InternetAddress[many.length]));
    //message.addRecipient(Message.RecipientType.BCC, new InternetAddress());
    message.setSubject(Email.tSubject.getText());
    message.setText(Email.areaEmail.getText());

    Transport t = session.getTransport("smtp");
    t.connect("cuatrocuadrado@gmail.com","*********");

    t.sendMessage(message, message.getAllRecipients());

    t.close();

}catch (MessagingException ex) {
    JOptionPane.showMessageDialog(null,ex.getMessage());
}catch (SQLException ex) {
    Logger.getLogger(SendEmail.class.getName()).log(Level.SEVERE, null, ex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:17:56.007

试试这个可能对你有帮助。

**从结果集中获取电子邮件值并将其动态添加到数组中。**

```
String[] to = {"test1@gmail.com","test2@gmail.com","test3@gmail.com","test4@gmail.com"};
InternetAddress[] addressTo = new InternetAddress[to.length];
for (int i = 0; i < to.length; i++)
{
    addressTo[i] = new InternetAddress(to[i]);
}
msg.setRecipients(RecipientType.TO, addressTo); 
```

# symfony - Symfony 2 中没有包名怎么办？

> ID：14590437
> 
> 赞同：1
> 
> 时间：2013-01-29T19:11:13.400
> 
> 标签：symfony, bundle, symfony-2.1

有没有办法在系统的部分中没有包名作为视图或路由？

例如，我想改用：

```
{% extends "SomeAppBundle::layout.html.twig" %} 
```

用这个：

```
{% extends "layout.html.twig" %} 
```

或者：

```
 $router->add('index', new Route('/', array(
         '_controller' => 'SomeAppBundle:Default:index',
    ))); 
```

代替：

```
 $router->add('index', new Route('/', array(
         '_controller' => 'Default:index',
    ))); 
```

我并没有完全理解捆绑包的强制性，但我认为这种方法对于具有单个捆绑包的应用程序更为明显。如果我在此捆绑包的空间中，为什么要指定捆绑包名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:55:58.940

[symfony 文档](http://symfony.com/doc/current/book/page_creation.html#before-you-begin-create-the-bundle)说：

> 在开始之前，您需要创建一个捆绑包。在 Symfony2 中，bundle 就像一个插件，只是应用程序中的所有代码都存在于一个 bundle 中。

如果您很少遇到真正只有一个捆绑包的情况，那么您可能会将其视为开销。但即使这样也有优势：

*   无论您的应用程序有 1 个还是 10 个捆绑包，它看起来都一样
*   如果您需要另一个捆绑包，则不必更改所有内容（“哦，我们可能需要一个后端”）。
*   核心不需要处理不同的情况

我建议您使用该框架，创建一个捆绑包，即使它是唯一的捆绑包。一旦你创建了它，你就不会真正感受到它，它让事情变得如此简单。

# android - 直接在 DatePicker 对象中使用 onClick 而不是连接到按钮的 DatePickerDialog

> ID：14590439
> 
> 赞同：0
> 
> 时间：2013-01-29T19:11:24.497
> 
> 标签：android, onclick, datepicker

首先让我说我对 Android 很陌生，如果这个问题真的很简单，我很抱歉，但我在 SO 或 Google 中找不到答案。

我正在做一个用于培训的小应用程序，并且我有这个 datePicker 对象：

```
<DatePicker
    android:id="@+id/datePicker1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText2"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="64dp"
    android:calendarViewShown="false"
    android:spinnersShown="true"
    android:onClick="selectDate" /> 
```

所以，我已经建立了一个与我拥有的 selectDate 函数的 onClick 连接：

```
public void selectDate(View view) {
    datePick = (DatePicker) findViewById(R.id.datePicker1);
    int yy = datePick.getYear();
    int mm = datePick.getMonth();
    int dd = datePick.getDayOfMonth();
    Calendar calendar = Calendar.getInstance();
    calendar.set(yy, mm, dd);
    int doy = calendar.get(Calendar.DAY_OF_YEAR);
    populateDayOfYear(doy);
} 
```

但是该应用程序并没有按照预期进行，实际上在调试之后，它甚至从未进入此功能。

因此，为了清楚起见，我想要的是每次更改 datePicker 中的值时更新 EditText 字段的值（`doy`在 中），我**不想**按下按钮并被带到 DatePickerDialog然后才能更新 EditText 字段。`populateDayOfYear(doy)`

 **是否可以使用标准 datePicker 或者我需要自己构建一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:05:56.770

在 OnCreate 中试试这个

```
datePick = (DatePicker) findViewById(R.id.datePicker1);
datePick.init(2012,1,1,  new DatePicker.OnDateChangedListener(){

   public void onDateChanged(DatePicker view, int yy, int mm, int dd){
      Calendar calendar = Calendar.getInstance();
      calendar.set(yy, mm, dd);
      int doy = calendar.get(Calendar.DAY_OF_YEAR);
      populateDayOfYear(doy);
   }
  }
); 
```**

# php - 通过 symfony 发送帖子数据而不使用表单？

> ID：14590441
> 
> 赞同：0
> 
> 时间：2013-01-29T19:11:38.070
> 
> 标签：php, symfony-1.4

假设我有一个这样的链接：

```
<a href="<?php echo url_for('cart?item_id='.$cart->getItemId().'&a=b') ?>">Cart</a> 
```

是否可以更改它而不是`a`通过 POST 发送的查询参数，而不是在页面的 URL 中？相同的数据，只是在 URL 中不可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:01:10.940

使用`url_for`，这是不可能的。您必须使用[`link_to`](http://www.symfony-project.org/api/1_4/UrlHelper#method_link_to)并提供将`post => true`POST 模拟为链接的选项：

> *   'post' - 如果设置为 true，则链接提交 POST 请求而不是 GET（注意：不要在表单中使用）

代替：

```
<a href="<?php echo url_for('cart?item_id='.$cart->getItemId().'&a=b') ?>">Cart</a> 
```

你应该写：

```
<?php echo link_to(
  'Cart',
  'cart?item_id='.$cart->getItemId().'&a=b',
  array('post' => true)
) ?> 
```

这会产生一些非常丑陋的东西，但这会发送一个 POST 请求而不是一个 GET：

`<a onclick="var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'post'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_csrf_token'); m.setAttribute('value', 'd9dbcba8c82084819006af93fbf8f961'); f.appendChild(m);f.submit();return false;" href="/cart/item_id/21/a/b">Cart</a>`

顺便说一句，正如文档所说，不要在表单中使用它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:48:29.633

您应该使用表单来实现您想要的。像这样的东西：

```
<form id="form1" method="POST" action="cart?item_id=ITEM_ID">
    <input type="hidden" name="a" value="b" />
    <a href="#" onclick="document.getElementById('form1').submit();">Cart</a>
    <button type="submit">Cart</button>
</form> 
```

如果你想使用一个`<a>`元素，你将需要 Javascript 来提交表单。但是你也可以使用一个`button`元素，你可以`<a>`用 CSS 来设置它的样式。代码示例中显示了这两个选项。

**编辑：** 我完全错过了您的问题与 Symfony 相关的事实，但这种方法可能仍然适用。但是 j0k 的答案显示了如何使用 Symfony 特定的代码来做到这一点。

# matlab - 在显示移动光栅之前预渲染帧

> ID：14590449
> 
> 赞同：0
> 
> 时间：2013-01-29T19:11:58.047
> 
> 标签：matlab, frame, psychtoolbox

我正在使用 Psychtool 框中的 DemoDrift2 创建移动光栅。光栅移动完美，效果很好。但是，我需要将它与其他一些连接并与其他软件一起使用的设备一起使用。在这些情况下，光栅显示速度较慢并且会抖动。如何在显示光栅之前预渲染帧？

```
function DriftDemo2(angle, cyclespersecond, f, drawmask, gratingsize)
% function DriftDemo2([angle=30][, cyclespersecond=1][, f=0.05][, drawmask=1],[gratingsize=400])

if nargin < 5
gratingsize = [];
end

if isempty(gratingsize)
% By default the visible grating is 400 pixels by 400 pixels in size:
gratingsize = 400;
end

if nargin < 4
drawmask = [];
end

if isempty(drawmask)
% By default, we mask the grating by a gaussian transparency mask:
drawmask=1;
end;

if nargin < 3
f = [];
end

if isempty(f)
% Grating cycles/pixel: By default 0.05 cycles per pixel.
f=0.05;
end;

if nargin < 2
cyclespersecond = [];
end

if isempty(cyclespersecond)
% Speed of grating in cycles per second: 1 cycle per second by default.
cyclespersecond=1;
end;

if nargin < 1
angle = [];
end

if isempty(angle)
% Angle of the grating: We default to 30 degrees.
angle=30;
end;

movieDurationSecs=20;   % Abort demo after 20 seconds.

% Define Half-Size of the grating image.
texsize=gratingsize / 2;

% Screen('Preference', 'SkipSyncTests', 1);

try
% This script calls Psychtoolbox commands available only in OpenGL-based 
% versions of the Psychtoolbox. 
AssertOpenGL;

% Get the list of screens and choose the one with the highest screen number.
screens=Screen('Screens');
screenNumber=max(screens);

% Find the color values which correspond to white and black:
% functions WhiteIndex and BlackIndex:
white=WhiteIndex(screenNumber);
black=BlackIndex(screenNumber);

% Round gray to integral number, to avoid roundoff artifacts with some
% graphics cards:
gray=round((white+black)/2);

% This makes sure that on floating point framebuffers we still get a
% well defined gray:
if gray == white
    gray=white / 2;
end

% Contrast 'inc'rement range for given white and gray values:
inc=white-gray;

% Open a double buffered fullscreen window and set default background
% color to gray:
[w screenRect]=Screen('OpenWindow',screenNumber, gray);

if drawmask
    % Enable alpha blending for proper combination of the gaussian aperture
    % with the drifting sine grating:
    Screen('BlendFunction', w, GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
end

% Calculate parameters of the grating:

p=ceil(1/f);

% frequency in radians:
fr=f*2*pi;

% This is the visible size of the grating. It is twice the half-width
% of the texture plus one pixel to make sure it has an odd number of
% pixels and is therefore symmetric around the center of the texture:
visiblesize=2*texsize+1;

% Create one single static grating image:
%
% We only need a texture with a single row of pixels(i.e. 1 pixel in height) to
% define the whole grating! If the 'srcRect' in the 'Drawtexture' call
% below is "higher" than that (i.e. visibleSize >> 1), the GPU will
% automatically replicate pixel rows. This 1 pixel height saves memory
% and memory bandwith, ie. it is potentially faster on some GPUs.
%
% However it does need 2 * texsize + p columns, i.e. the visible size
% of the grating extended by the length of 1 period (repetition) of the
% sine-wave in pixels 'p':
x = meshgrid(-texsize:texsize + p, 1);

% Compute actual cosine grating:
grating=gray + inc*cos(fr*x);

% Store 1-D single row grating in texture:
gratingtex=Screen('MakeTexture', w, grating);

% Create a single gaussian transparency mask and store it to a texture:
% The mask must have the same size as the visible size of the grating
% to fully cover it. Here we must define it in 2 dimensions and can't
% get easily away with one single row of pixels.
%
% We create a  two-layer texture: One unused luminance channel which we
% just fill with the same color as the background color of the screen
% 'gray'. The transparency (aka alpha) channel is filled with a
% gaussian (exp()) aperture mask:
mask=ones(2*texsize+1, 2*texsize+1, 2) * gray;
[x,y]=meshgrid(-1*texsize:1*texsize,-1*texsize:1*texsize);
mask(:, :, 2)=white * (1 - exp(-((x/90).^2)-((y/90).^2)));
masktex=Screen('MakeTexture', w, mask);

% Query maximum useable priorityLevel on this system:
priorityLevel=MaxPriority(w); %#ok<NASGU>

% We don't use Priority() in order to not accidentally overload older
% machines that can't handle a redraw every 40 ms. If your machine is
% fast enough, uncomment this to get more accurate timing.
%Priority(priorityLevel);

% Definition of the drawn rectangle on the screen:
% Compute it to  be the visible size of the grating, centered on the
% screen:
dstRect=[0 0 visiblesize visiblesize];
dstRect=CenterRect(dstRect, screenRect);

% Query duration of one monitor refresh interval:
ifi=Screen('GetFlipInterval', w);

% Translate that into the amount of seconds to wait between screen
% redraws/updates:

% waitframes = 1 means: Redraw every monitor refresh. If your GPU is
% not fast enough to do this, you can increment this to only redraw
% every n'th refresh. All animation paramters will adapt to still
% provide the proper grating. However, if you have a fine grating
% drifting at a high speed, the refresh rate must exceed that
% "effective" grating speed to avoid aliasing artifacts in time, i.e.,
% to make sure to satisfy the constraints of the sampling theorem
% (See Wikipedia: "Nyquist?Shannon sampling theorem" for a starter, if
% you don't know what this means):
waitframes = 1;

% Translate frames into seconds for screen update interval:
waitduration = waitframes * ifi;

% Recompute p, this time without the ceil() operation from above.
% Otherwise we will get wrong drift speed due to rounding errors!
p=1/f;  % pixels/cycle    

% Translate requested speed of the grating (in cycles per second) into
% a shift value in "pixels per frame", for given waitduration: This is
% the amount of pixels to shift our srcRect "aperture" in horizontal
% directionat each redraw:
shiftperframe= cyclespersecond * p * waitduration;

% Perform initial Flip to sync us to the VBL and for getting an initial
% VBL-Timestamp as timing baseline for our redraw loop:
vbl=Screen('Flip', w);

% We run at most 'movieDurationSecs' seconds if user doesn't abort via keypress.
vblendtime = vbl + movieDurationSecs;
i=0;

% Animationloop:
while(vbl < vblendtime)

    % Shift the grating by "shiftperframe" pixels per frame:
    % the mod'ulo operation makes sure that our "aperture" will snap
    % back to the beginning of the grating, once the border is reached.
    % Fractional values of 'xoffset' are fine here. The GPU will
    % perform proper interpolation of color values in the grating
    % texture image to draw a grating that corresponds as closely as
    % technical possible to that fractional 'xoffset'. GPU's use
    % bilinear interpolation whose accuracy depends on the GPU at hand.
    % Consumer ATI hardware usually resolves 1/64 of a pixel, whereas
    % consumer NVidia hardware usually resolves 1/256 of a pixel. You
    % can run the script "DriftTexturePrecisionTest" to test your
    % hardware...
    xoffset = mod(i*shiftperframe,p);
    i=i+1;

    % Define shifted srcRect that cuts out the properly shifted rectangular
    % area from the texture: We cut out the range 0 to visiblesize in
    % the vertical direction although the texture is only 1 pixel in
    % height! This works because the hardware will automatically
    % replicate pixels in one dimension if we exceed the real borders
    % of the stored texture. This allows us to save storage space here,
    % as our 2-D grating is essentially only defined in 1-D:
    srcRect=[xoffset 0 xoffset + visiblesize visiblesize];

    % Draw grating texture, rotated by "angle":
    Screen('DrawTexture', w, gratingtex, srcRect, dstRect, angle);

    if drawmask==1
        % Draw gaussian mask over grating:
        Screen('DrawTexture', w, masktex, [0 0 visiblesize visiblesize], dstRect, angle);
    end;

    % Flip 'waitframes' monitor refresh intervals after last redraw.
    % Providing this 'when' timestamp allows for optimal timing
    % precision in stimulus onset, a stable animation framerate and at
    % the same time allows the built-in "skipped frames" detector to
    % work optimally and report skipped frames due to hardware
    % overload:
    vbl = Screen('Flip', w, vbl + (waitframes - 0.5) * ifi);

    % Abort demo if any key is pressed:
    if KbCheck
        break;
    end;
end;

% Restore normal priority scheduling in case something else was set
% before:
Priority(0);

%The same commands wich close onscreen and offscreen windows also close
%textures.
Screen('CloseAll');

catch
    %this "catch" section executes in case of an error in the "try" section
    %above.  Importantly, it closes the onscreen window if its open.
    Screen('CloseAll');
    Priority(0);
    psychrethrow(psychlasterror);
end %try..catch..enter code here 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T16:30:53.263

预渲染是通过调用`owpnt = Screen('OpenOffscreenWindow',...)`然后发出您的常规绘图命令来完成的，但传递 owpnt 作为目标。然后将它们写入纹理，您可以使用`Screen('DrawTexture')`.

每帧需要一个屏幕外窗口。这将很快耗尽您的视频卡的内存。所以：

1.  确保屏幕外窗口的尺寸尽可能小：使其适合您的光栅
2.  尽快屏幕（'关闭'）不需要的屏幕外窗口

# amazon-ec2 - 使用 jmeter 在 aws 上进行分布式负载测试

> ID：14590453
> 
> 赞同：10
> 
> 时间：2013-01-29T19:12:03.273
> 
> 标签：amazon-ec2, jmeter, firewall, load-testing, connection-timeout

我一直在尝试设置 aws ec2 机器以使用 jmeter 对我的 Web 服务器进行负载测试，但我被卡住了。我的本地机器上有一个 jmeter 客户端，我想在 ec2 上设置多个 jmeter-server 节点来进行负载测试，到目前为止，我只是想让一个服务器节点启动并运行。但它还没有为我解决。

我在本地机器上运行相同的 jmeter，服务器和 java 版本有点不同，但我认为这不是问题。大多数人在获取客户端和服务器节点之间连接的正确 IP 时遇到问题，但经过大量搜索，我已经解决了所有这些问题。当服务器节点尝试返回结果并尝试连接到客户端（我的本地计算机）时，我陷入了困境。服务器尝试连接到我本地机器的外部 IP 地址。但是它会抛出一个连接被拒绝的错误，这显然是由连接超时引起的。我想这是一些防火墙问题，但我尝试关闭本地计算机上的防火墙，但仍然抛出相同的错误。我不确定如何才能克服这个问题，而且它应该花费太多时间。

有人可以建议我解决这个问题吗？谢谢！

*   我的本地机器是 Mac OS X 10.7.5，我的服务器节点在 ubuntu 上。

这是它抛出的错误：

```
2013/01/29 12:23:37 ERROR - jmeter.samplers.RemoteListenerWrapper: testStarted(host) java.rmi.ConnectException: Connection refused to host: xxx.xxx.xxx.10; nested exception is: 
java.net.ConnectException: Connection refused
at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)
at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128)
at org.apache.jmeter.samplers.RemoteSampleListenerImpl_Stub.testStarted(Unknown Source)
at org.apache.jmeter.samplers.RemoteListenerWrapper.testStarted(RemoteListenerWrapper.java:83)
at org.apache.jmeter.engine.StandardJMeterEngine.notifyTestListenersOfStart(StandardJMeterEngine.java:226)
at org.apache.jmeter.engine.StandardJMeterEngine.run(StandardJMeterEngine.java:349)
at java.lang.Thread.run(Thread.java:636)
Caused by: java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
at java.net.Socket.connect(Socket.java:546)
at java.net.Socket.connect(Socket.java:495)
at java.net.Socket.<init>(Socket.java:392)
at java.net.Socket.<init>(Socket.java:206)
at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
... 8 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T19:03:13.850

好吧，我终于解决了这个问题。我最终使用了 ssh 反向隧道。我不确定是否有更好的方法来做到这一点。所以，如果有人有类似的问题，我就是这样做的：

1.  创建从服务器到客户端的反向 ssh 隧道。所以，在客户端：

    `ssh -Nf -R [client.rmi.localport]:localhost:[client.rmi.localport on serverside] user@server`

2.  启动服务器并拥有一个 client.rmi.localport；创建隧道的端口；

3.  将客户端启动为：`./bin/jmeter-server -Djava.rmi.server.hostname=127.0.0.1`.

就是这样！您已准备好分布式测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-13T13:17:15.770

在 Linux/OSX 上对我有用的解决方案：

1.在客户端编辑*bin/jmeter.properties*并添加：

```
remote_hosts=127.0.0.1:55501
client.rmi.localport=55512
mode=Batch
num_sample_threshold=250 
```

2.在服务器上编辑*bin/jmeter.properties*并添加：

```
server_port=55501
server.rmi.localhostname=127.0.0.1
server.rmi.localport=55511 
```

3.现在使用这个 ssh Tunel 连接到服务器：

```
ssh -L 55501:127.0.0.1:55501 -L 55511:127.0.0.1:55511 -R 55512:127.0.0.1:55512 user@hostname 
```

4.编辑jmeter-server脚本启动jmeter.sh

```
${DIRNAME}/jmeter.sh ${RMI_HOST_DEF} -Dserver_port=${SERVER_PORT:-1099} -s -j jmeter-server.log "$@" 
```

5.现在在服务器上运行：

```
bin/jmeter-server -Djava.rmi.server.hostname=127.0.0.1 
```

6.在客户端运行 jmeter 与 gui 或添加 -n 如果不需要 gui：

```
bin/jmeter.sh -Djava.rmi.server.hostname=127.0.0.1 
```

或者，使用测试计划：

```
bin/jmeter.sh -Djava.rmi.server.hostname=127.0.0.1 -t /path/to/test-plan.jmx 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:15:22.443

看起来您也必须将您的 jmeter-master 实例（jmeter 客户端）移动到 EC2 实例。

根据[JMeter 分布式测试一步一步](http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf)：

```
2\. check all the clients are on the same subnet; 
```

要使分布式测试正常工作，系统必须位于同一子网上，否则 RMI 将无法连接。
看起来是您的情况：jmeter-slaves 在一个子网（EC2）中，而 jmeter-master 在另一个（您的本地工作站）中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T20:34:48.053

我编写了一个免费的[开源脚本](https://github.com/oliverlloyd/jmeter-ec2)来帮助实现这一点。我经历了 OP 列出的相同问题，即使我最终确实让事情正常了，但它从来都不是很好，我想要一些东西来自动化解决这些麻烦。

# android - 适用于 Android 3.0 的 Facebook SDK：UnsupportedOperationException

> ID：14590455
> 
> 赞同：0
> 
> 时间：2013-01-29T19:12:18.753
> 
> 标签：android, facebook

```
 01-29 21:06:00.601: ERROR/AndroidRuntime(582): FATAL EXCEPTION: main
     java.lang.IllegalStateException: Could not execute method of the activity
     at android.view.View$1.onClick(View.java:2144)
     at android.view.View.performClick(View.java:2485)
     at android.view.View$PerformClick.run(View.java:9080)
     at android.os.Handler.handleCallback(Handler.java:587)
     at android.os.Handler.dispatchMessage(Handler.java:92)
     at android.os.Looper.loop(Looper.java:130)
     at android.app.ActivityThread.main(ActivityThread.java:3687)
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:507)
     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
     at dalvik.system.NativeStart.main(Native Method)
     Caused by: java.lang.reflect.InvocationTargetException
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:507)
     at android.view.View$1.onClick(View.java:2139)
     ... 11 more
     Caused by: java.lang.UnsupportedOperationException: Session: an attempt was made to request new permissions for a session that is not currently open.
     at com.facebook.Session.requestNewPermissions(Session.java:977)
     at com.facebook.Session.requestNewPublishPermissions(Session.java:501)
     at ***.MainActivity.postToFacebook(MainActivity.java:105)
     ... 14 more 
```

异常在行中抛出

```
 session.requestNewPublishPermissions(newPermissionsRequest);
 // Check for publish permissions
            List<String> permissions = session.getPermissions();
            if (!isSubsetOf(PERMISSIONS, permissions)) {
                pendingPublishReauthorization = true;
                Session.NewPermissionsRequest newPermissionsRequest = new Session
                        .NewPermissionsRequest(this, PERMISSIONS);

                session.requestNewPublishPermissions(newPermissionsRequest);

                Toast.makeText(getActivity().getApplicationContext(),
                        "Not enough permissions",
                        Toast.LENGTH_SHORT).show();
                return;
            } 
```

这个异常是什么意思以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:50:11.833

Dmytro，根据我的评论，我整理了几篇文章，充分解释了打开 Facebook 会话并请求额外权限：[这里](http://adilatwork.blogspot.co.uk/2013/02/facebook-android-sdk-30-opening-session.html)和[这里](http://adilatwork.blogspot.co.uk/2013/02/facebook-android-sdk-30-requesting.html)。希望您和其他人发现它有益并节省开始使用 SDK 的时间！:)

> **编辑：**您收到此异常的原因是您无法在未打开的会话上请求新权限。您需要在请求新权限或发出其他 Facebook API 请求之前打开会话。我在上面链接的文章中整理了一个指南，确保在用户会话打开并且用户拥有所需权限之前不会发出 Facebook API 请求（例如发布到用户的提要等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:25:29.943

这意味着您请求权限的会话处于非活动状态/已过期。您需要重新建立会话才能请求权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:28:48.437

在调用 requestNewPublishPermissions 之前，您是否调用过 session.openForPublish(Session.OpenRequest openRequest)？

# gwt - GWT - HTML 小部件 - setEnabled

> ID：14590457
> 
> 赞同：0
> 
> 时间：2013-01-29T19:12:29.297
> 
> 标签：gwt

有没有办法使`com.google.gwt.user.client.ui.HTML`小部件启用或不启用？我试过但似乎没有 setEnabled(boolean) 方法：S 请分享您的经验

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:58:04.737

## **在不继承自** [FocusWidget](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FocusWidget.html)的小部件中显示启用和禁用功能。

您需要同时覆盖样式和事件处理实现。在`enableFl`你的`MyHTMLPanel extends HTMLPanel`.

**第 1 步**- 提供启用和禁用样式。使用 opacity css 打开/关闭灰色的着色。根据 enableFl 的状态打开/关闭启用/禁用功能。

**第 2 步**`onBrowserEvent`- 通过覆盖并使其执行取决于您自己的 enableFl 状态来禁用/启用小部件上的事件处理。

**第 3 步**- 递归禁用 HTMLPanel 内部的所有小部件。

如果您的用例很简单，您可能会选择使用**com.google.gwt.user.client.ui.HTML**而不是**com.google.gwt.user.client.ui.HTMLPanel**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:57:59.297

不幸的是，Widget 中没有这样的方法。

但是还有一点空间可以实现。我在谷歌群组的帮助下使它工作

```
public void setEnabled (boolean e)
 {
  Iterator<Widget> itr = grd.iterator (); // grd is a FlexTable which
contains my form controls

  while (itr.hasNext ())
  {
   Widget w = itr.next ();

   if (w instanceof TextBox)
   {
    TextBox t = (TextBox) w;
    t.setEnabled (e);
   }

   if (w instanceof PasswordTextBox)
   {
    PasswordTextBox t = (PasswordTextBox) w;
    t.setEnabled (e);
   }

  ...
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:26:48.417

只有少数 HTML 元素可以启用或禁用，例如输入。GWT 为可以获得焦点的元素设置了 setEnabled()：

[http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FocusWidget.html#setEnabled(boolean)](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FocusWidget.html#setEnabled(boolean))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T19:22:03.570

我不确定您所说的启用是什么意思，但我会尝试一下。

我假设您的意思是可见或不可见。

```
HTMLPanel panel = new HTMLPanel();
panel.setVisible(false); // Disabled
panel.setVisible(true);  // Enabled 
```

希望这就是你要找的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T20:42:08.360

只能禁用某些表单元素（输入、选项）。

要禁用：

```
widget.getElement().setAttribute("disabled","disabled"); 
```

再次启用：

```
widget.getElement().removeAttribute("disabled"); 
```

对于其他小部件，您需要将它们的样式设置为模仿“禁用”。（例如将颜色设置为灰色）

# php - http_redirect() 与 header()

> ID：14590462
> 
> 赞同：6
> 
> 时间：2013-01-29T19:12:42.207
> 
> 标签：php, redirect, http-headers

> **可能重复：**
> [php 标头位置与 php_redirect](https://stackoverflow.com/questions/14353130/php-header-location-vs-php-redirect)

这些年来，我一直在使用 PHP，我总是通过该`header('Location: example.com')`函数重定向到另一个 URL。今天在浏览 php.net 时，我注意到有一个专门用于重定向的函数，称为`http_redirect()`

使用`http_redirect()`to`header()`或反之亦然有什么好处吗？

* * *

参考：

1.  [http://www.php.net/manual/en/function.header.php](http://www.php.net/manual/en/function.header.php)
2.  [http://php.net/manual/en/function.http-redirect.php](http://php.net/manual/en/function.http-redirect.php)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:25:59.887

虽然`http_redirect()`为您做了一些事情（例如退出、清除输出缓冲区和发送通用重定向主体），但它不是标准功能（它是作为扩展的一部分，甚至不是预加载的扩展），因此您可以t 真的依赖它可用。

# ruby-on-rails - 如何在 Rspec 和 Capybara 中等待 ES 索引完成？

> ID：14590463
> 
> 赞同：7
> 
> 时间：2013-01-29T19:12:44.370
> 
> 标签：ruby-on-rails, ruby, rspec, elasticsearch, tire

如何避免`sleep 1`在该示例中使用等待 ES 索引完成？

```
describe Question do
  before do
    create :question, content: "Some test question",
                      app: @app
    create :question, content: "Some other question",
                      app: @app
    sleep 1
  end

  it_behaves_like "search results found" do
    let(:query) { "Some" }
    let(:results) { ["Some test question", "Some other question"] }
  end
end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T20:15:25.967

调用“刷新”API 端点。如果您使用的是 Tire 和 ActiveModel 集成功能，它将是：

```
Question.tire.index.refresh 
```

或者，您可以使用 curl 直接命中端点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:17:23.000

您可以调用`refresh`索引，这将导致它重建：

`Question.index.refresh`

# c++ - 收到与 WSAIoctl 相关的错误

> ID：14590465
> 
> 赞同：0
> 
> 时间：2013-01-29T19:12:49.497
> 
> 标签：c++, winapi, winsock2

嘿伙计们，我一直在尝试制作一个简单的控制台应用程序来查看我的网络流量：P 我试图只是阅读它。

无论如何，我从 WSAIoctl 函数中得到一个错误，WSAGetLastError 给我的错误代码是 10022，MSDN 告诉我它与此相关：

无效的论点。提供了一些无效参数（例如，为 setsockopt 函数指定无效级别）。在某些情况下，它还指代套接字的当前状态——例如，在未侦听的套接字上调用接受。

我试过在没有运气的情况下弄乱论点：/请帮助我：P

这是我的代码：

```
WSADATA wsaData;
int startup = WSAStartup(0x0202, &wsaData);

if(startup != 0) {
    cout << "Error: could not initalize WSADATA for target socket." << endl;
    system("pause");
}

unsigned long BytesReturned;
int InBuffer, OutBuffer, LPCVoid;
int optValue = 1;
SOCKET sock = socket(AF_INET, SOCK_RAW, IPPROTO_IP);

Sleep(await);
cout << "creating and configuring RAW_SOCK" << endl;

int listening = listen(sock, SOMAXCONN); // tried debugging using this.
int sockopt = setsockopt(sock, IPPROTO_IP, 2, (char*)&optValue, sizeof(optValue));
int SockMode = WSAIoctl(sock, SIO_RCVALL, &InBuffer, sizeof(InBuffer), &OutBuffer, sizeof(OutBuffer), &BytesReturned, NULL, NULL);
//0x98000001
if(SockMode == 0) {
    Sleep(await);
    cout << "RAW_SOCKET created successfully!" << endl << "Trying to listen for incoming network packets..." << endl;
    int listeningk = listen(sock, SOMAXCONN);

    if(listening == 0) {
        Sleep(await);
        cout << "socket listening without problems, looking for incoming request..." << endl;
    }
    else {
        Sleep(await);
        cout << "Error: could not listen on socket." << endl;
        exit(EXIT_FAILURE);
    }
}
else {
    Sleep(await);
    cout << "Error: could not create RAW_SOCKET..." << endl << "Dumping SockMode!\r\nint SockMode = " << SockMode << endl;
    cout << "setsockopt = " << sockopt << endl; 
    cout << "WSAGetLastError: " << WSAGetLastError() << endl;
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:23:22.847

您的套接字需要先绑定，然后才能收听。此外，对于此`WSAIoctl`选项，您必须遵守（来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741621%28v=vs.85%29.aspx)）：

> 套接字还必须绑定到显式本地 IPv4 或 IPv6 接口，这意味着您不能绑定到 INADDR_ANY 或 in6addr_any。

我建议在尝试改进此代码之前进行一些基本的自我教育。MSDN 中有一些常见操作的代码示例，例如套接字设置。

# java - “Cannot be cast to java.lang.Class”，即：哪个类型不是类

> ID：14590467
> 
> 赞同：0
> 
> 时间：2013-01-29T19:13:08.097
> 
> 标签：java, introspection

这似乎是一个愚蠢的问题（因为它可能是非常特定于项目的），但在这种情况下它已经足够笼统了：

我正在运行一段代码，它给出了`ClassCastException`我写的错误消息作为标题。这里提到的演员表是从一个类型的对象`java.lang.reflect.Type`到`Class<?>`。

除了原始类型，Java 中哪个类型不是类？

感谢您的回答

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:15:26.910

A`Class`是 a`Type`但 a`Type`不是必需的 a `Class`，因为[`Class`implements`Type`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)。

基本上，您`myType`也可以是接口的任何实现类[`GenericArrayType`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/GenericArrayType.html)，或[`ParameterizedType`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/ParameterizedType.html)，因为它们都扩展了接口。[`TypeVariable`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/TypeVariable.html)[`WildcardType`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/WildcardType.html)[`Type`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Type.html)

尝试打印`myType.getClass()`以查看您的意思：您将得到`Class<TheSaidType>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:21:50.883

从[Type](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Type.html)的 Javadoc 中，您可以看到它有许多实现类型。

```
All Known Subinterfaces:
    GenericArrayType, ParameterizedType, TypeVariable<D>, WildcardType

All Known Implementing Classes:
    Class 
```

子接口是使用内部数据结构类实现的。

# excel - 如何使用excel vba在所有单元格的公式中查找sheetname并替换为其他？

> ID：14590468
> 
> 赞同：-1
> 
> 时间：2013-01-29T19:13:10.730
> 
> 标签：excel, vba

我想使用 excel vba 在使用范围内的所有单元格的公式中查找工作表名，并将工作表名替换为另一个工作表名。将要替换的工作表名新工作表名都分别保存在 A1 和 A2 等单元格中。

有类似的帖子，但不一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:07:28.917

为什么不直接使用简单的 Excel`Search and Replace`例程？

1.  选择您需要处理的范围。
2.  转到`Home`功能区 > `Find & Select`>`Replace...`或只需按`CTRL`+ `H`。
3.  用各自的工作表名称填写两个字段，但**不要忘记在工作表名称有****空格**的情况下的前导和尾随`'`符号。
***   按下`Replace All`就完成了。**

 **如果您别无选择，只能使用 VBA - 遵循 @Tim W. 的建议并使用宏记录器记录上述步骤。祝你好运！**

# html - 将 Ext.Ajax.request 返回的图像二进制数据加载到标签中

> ID：14590469
> 
> 赞同：1
> 
> 时间：2013-01-29T19:13:14.277
> 
> 标签：html, extjs

这是一个 Sencha Touch + HTML 问题。

我使用 Ext.Ajax.request 从服务器检索图像数据。

```
 Ext.Ajax.request({
        url: 'http://localhost:3000/someimage.jpg',
        method: 'GET',
        success: function(res) {
            rec.set('imagedata', 'data:image/jpeg;base64{' + res.responseText + '}');
        },
        failure: function() {
            console.log ( 'Failed to GET image data ' + url );
        },
        scope: this
    }); 
```

上面 res.responseText 似乎包含了 jpg 文件的内容。

稍后，我将图像数据传递到 html 中的标签中，如下所示，

```
<img src="{imagedata}" style="width:100%;"/> 
```

结果：

我在图像框中看到乱码，而不是图像。乱码就是responseText的内容。

（PS ...我这样做是为了能够将图像数据本地存储到煎茶商店中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:51:16.033

我只需将图像的 URL 存储在商店中，然后像使用 src 设置为 URL 一样动态创建 IMG 元素。

把事情简单化。

# nservicebus - 如何在 NService 总线中的任何给定端点为每种消息类型设置不同的 MaxRetries？

> ID：14590474
> 
> 赞同：0
> 
> 时间：2013-01-29T19:13:33.473
> 
> 标签：nservicebus

我需要端点接收来自客户端的命令并订阅来自另一个端点的事件，例如：

1-接收到的命令只尝试一次，如果发生异常则发送到错误队列

2-接收到的事件被无限期地尝试，直到它被处理

MaxRetries 下注是否会根据消息类型设置不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:32:08.787

NServiceBus MaxRetries 设置是为了处理死锁之类的事情，所以在这种情况下并不是你想要的。

您想要的是使用[SLR](http://support.nservicebus.com/customer/portal/articles/856620)来处理这种情况。

要根据异常类型进行过滤，请查看[http://andreasohlund.net/2012/09/26/disabling-second-level-retries-for-specific-exceptions/](http://andreasohlund.net/2012/09/26/disabling-second-level-retries-for-specific-exceptions/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:35:38.303

我查看了 NSB[源代码](https://github.com/NServiceBus/NServiceBus/blob/3.3.4/src/impl/unicast/transport/NServiceBus.Unicast.Transport.Transactional/TransactionalTransport.cs#L318)，发现 MaxRetries 不能为 NSB 3.3 中的不同消息采用不同的值。令人高兴的是，您可以[覆盖](https://github.com/NServiceBus/NServiceBus/blob/3.3.4/src/impl/faults/NServiceBus.Faults.Forwarder/FaultManager.cs)将消息转发到错误队列的类并实现您自己的版本来检查失败的消息是否是事件，然后转发到错误队列，您可以将其再次发送到当前端点。

# php - 批处理文件/Cron 作业

> ID：14590477
> 
> 赞同：0
> 
> 时间：2013-01-29T19:13:55.273
> 
> 标签：php, cron, filesystems, crontab

我有 80 个我想运行的 PHP 脚本。我想启动**Script1**等到它完成启动**script2** ...

现在，如果我添加以下内容：

```
start C:\xampp\php\php.exe -f C:\xampp\Script1.php
start C:\xampp\php\php.exe -f C:\xampp\Script2.php
start C:\xampp\php\php.exe -f C:\xampp\Script3.php 
```

当我执行批处理文件时，它将同时运行所有脚本。

我可以在我的 bat 文件中使用任何命令来告诉系统等到脚本完成然后执行之后的命令吗？无论如何设置脚本之间的时间间隔？

我可以在 cron 选项卡中运行所有 80 个脚本，但是，我宁愿配置一个批处理文件来处理所有脚本，然后将此文件分配给 crontab。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:26:18.387

`start`异步触发任务，因此它们将同时运行。使用`/wait`标志启动任务并等待它完成。

例如

```
start /wait C:\xampp\php\php.exe -f C:\xampp\Script1.php
start /wait C:\xampp\php\php.exe -f C:\xampp\Script2.php
start /wait C:\xampp\php\php.exe -f C:\xampp\Script3.php 
```

或者，正如 Marc B 所说，删除 start 调用也应该给你顺序执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:19:52.367

正如 Joseph Sibler 所建议的，您可以制作一个按顺序调用它们的 PHP 文件。您甚至可以使用 xargs 之类的东西（在带有 mingw32、cygwin 和可能其他来源的 Windows 上可用）生成该 PHP 文件。

这样的事情应该这样做：

```
del single.php
dir /b Script*.php | xargs cat >> single.php
start c:\xampp\php\php.exe -f single.php 
```

# jquery - JQuery - 无法在 Firefox 中的表单提交上调用 ajax

> ID：14590479
> 
> 赞同：2
> 
> 时间：2013-01-29T19:14:08.683
> 
> 标签：jquery, firefox

我有一个表单，在提交后，它还会使用 ajax 向服务器发送一些其他数据：

```
$('#continue-button').on("click", function(e){
    updateSessionVariables();
});

function updateSessionVariables(){
    $.ajax({
        type: "GET",
        url: update_bom_vars,
        data: myVars
    });
}); 
```

这在 Chrome 中可以正常工作，但不会在 Firefox 中提交 ajax 调用。

我试过了：

```
$('#continue-button').on("click", function(e){
    e.preventDefault();
    updateSessionVariables();
}); 
```

现在，这会正确发送数据，但表单不会提交。我什至补充说：

```
 $('#continue-button').submit(); 
```

但没有喜悦。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:10:08.093

所以我实际上解决了这样的问题：

```
$('#continue-button').on("click", function(e){
    e.preventDefault();
    updateSessionVariables();
});

function updateSessionVariables(){
    $.ajax({
       type: "GET",
       url: update_bom_vars,
       data: myVars
       success: ajaxComplete
    });
});

function ajaxComplete(){
    $('#parts-form').submit();
} 
```

看来您必须确保 ajax 调用已完成，然后提交才能工作。

感谢所有的投入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:16:45.137

除非 continue-button 是您的表单的 id，否则它不会提交。我会在这里坚持使用常规的 JavaScript，它更轻一些，而且你所需要的一切：

```
document.getElementById('formId').submit(); 
```

将其添加到您的点击功能中，您应该会很好。

编辑：只是重读并意识到你没有在 Firefox 上成功调用 AJAX，这才是真正的问题。我的错。

如果您要向数据库发送信息，请尝试使用 POST 而不是 GET。GET 就是为了做到这一点……获取信息，而不是提交信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:19:47.343

在你的行...

```
$('#continue-button').submit(); 
```

为。。改变：

```
$('#myFormId').submit(); 
```

问候...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T19:23:31.270

您必须提交*表单*，而不是按钮：

```
$('#formwithid').submit(); 
```

# html - 防止 HTML 源代码窃取

> ID：14590483
> 
> 赞同：15
> 
> 时间：2013-01-29T19:14:45.110
> 
> 标签：html, web, piracy-prevention

最近我为一个人做了一些网页设计工作。我继续通过在我的开发服务器上给他一个指向他的新站点的链接来向他展示进度。接近完成时，他与我失去了所有联系，我完全无法抓住他。我最近看了他的网站，他混合了他的旧网站和我正在创建的新网站。我想也许他在查看我的版本后自己重新设计了它，但是快速查看他的源代码表明我识别的部分完全是通过查看我的开发服务器上的源代码来复制的。所以他完全僵硬了我，我没有收到他的任何报酬。

只是想知道将来是否有办法防止这种情况发生？

我的第一个想法是混淆，但快速搜索表明不建议对 html 这样做，也不是万无一失的。

显然，这是我首先获得某种预付款的教训，但能够防止工作在未来如此容易被盗，那就太好了。

有没有遇到过类似问题的开发者？您如何向他人展示您的工作进度，而又不让他们像白天一样访问您的资源？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:37:52.683

这里的其他答案只是一组可以撤消的技巧。

客户端、HTML、CSS 和 JS 由所有开源技术组成。虽然您可能会花费大量时间来混淆客户端代码，但最好的办法是练习**更好的业务逻辑**。

这些选项广泛用于保护服务器端代码，但您的问题似乎集中在客户端代码上。

对于成熟的值得信赖的客户，我更加灵活，但我对新客户非常小心。我要求累进付款。每个可交付成果都涉及付款。这样，如果关系破裂，双方都会得到他们想要的。

当您使自己成为骗子的轻松标记时，您只会吸引骗子。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T19:18:08.873

恕我直言，当您无法拜访客户时，一个好方法是使用 TeamViewer 或类似软件进行演示。

您还可以使用 vnc 左右提供屏幕截图或基本远程访问，您的客户可以看到但不能*触摸*该站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:36:46.123

您可以做的是使用带有屏幕截图的[HTML 图像映射](http://www.w3schools.com/tags/tag_map.asp)来创建最终产品的基本交互式版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:15:35.653

使用具有托管服务或类似托管服务的网站，雇主预先向网站支付所有款项，并且只有在达到预定目标后才会将其发布给编码员。

许多自由职业者网站提供这项服务。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-29T19:32:26.277

可以使用 javascript 加密您的源代码。试试这个网站：[http](http://www.iwebtool.com/html_encrypter) ://www.iwebtool.com/html_encrypter 我自己从来没有使用过这个工具，我不知道一切是否正常，但我认为值得一试。付费后，您可以随时上传正常的源代码。此外，请确保您将来拥有客户的正确联系信息。我还强烈建议您将来使用合同，以便您的客户在法律上保证向您付款。另一个可能的选择是只给你的客户一个网站的截图，但你的网站当然会变成静态的。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-13T18:29:20.400

I've built a tool, which really encrypts your JS-sources - no simple obscurity by obfuscation, but good security by encryption.

See how it works here: [http://ec2-176-34-64-10.eu-west-1.compute.amazonaws.com/nopro/xscroll](http://ec2-176-34-64-10.eu-west-1.compute.amazonaws.com/nopro/xscroll) - it's a demo only for hiding the script `xscroll.js`.

When you inspect the DOM in your client, all you see is: `nplreq(url)` for each script you bind into HTML `head`.

Encryption and decryption are totally transparent to the browser. It is tested with Firefox, Chrome, Opera, Konqueror, IE8-10, Dolphin and Safari on an Android tablet.

Encryption with AES (Rijndael 256) using one-shot-keys which are negotiated between client and (liblock-)server using Diffie-Hellman.

The sources are securely hidden, and only with really great efforts they may be reached again.

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-01-29T19:21:10.760

您可以只在笔记本电脑上运行该站点，也可以将整个站点放在需要密码的登录页面后面。您可以进行现场演示，但在您获得付款之前，客户将无法访问该网站。

# emacs - emacs el-get 只运行一次，之后找不到

> ID：14590485
> 
> 赞同：0
> 
> 时间：2013-01-29T19:14:55.640
> 
> 标签：emacs, package, pymacs

我安装 el-get 通过在我的缓冲区中输入这个，突出显示，然后点击`C-j`：

```
(url-retrieve
 "https://raw.github.com/dimitri/el-get/master/el-get-install.el"
 (lambda (s)
   (goto-char (point-max))
   (eval-print-last-sexp))) 
```

...根据[安装文档](https://github.com/dimitri/el-get)。

然后我可以使用`M-x el-get`命令安装东西。到目前为止很棒。

但是，当我关闭 emacs 并重新启动时，`M-x el-get`找不到，也找不到我随它安装的任何软件包。当我尝试用上述方法重新安装 el-get 时，安装时说 git 包已经存在：

`fatal: destination path 'el-get' already exists and is not an empty directory.`

我可以删除`emacs.d/`文件夹中的 el-get 目录并回到开头，但似乎无法让 el-get 在第一次之后继续安装。我错过了什么或误解了什么？

另外---我首先使用 el-get 是为了能够安装自动完成以使用 emacs 进行 python 开发。如果您有一个更简单或更好的易于安装的配方，我也会很感激这个建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:54:31.087

（从来没有使用过 el-get 我自己，但是......）

a) 您应该从本节中的一个示例中添加代码`Basic Setup`。它包括类似`(add-to-list 'load-path ...)`and的形式`(require 'el-get ...)`，它们或多或少对于加载 Emacs 包是必不可少的。

b）您也可以`auto-complete`从[Marmalade](http://marmalade-repo.org/)或[Melpa](http://melpa.milkbox.net/#installing)安装。如果您使用的是 Emacs 24，我认为这是推荐的选项。将至少一个存储库添加到`package-archives`，按`M-x list-packages RET`，查找`auto-complete`，按`i`，然后`x`。

# ios - 尝试将字符串写入文件

> ID：14590488
> 
> 赞同：-2
> 
> 时间：2013-01-29T19:15:12.040
> 
> 标签：ios, file-io

> **可能重复：** [写入应用程序包中的文件时出现问题](https://stackoverflow.com/questions/3564153/problem-in-writing-to-a-file-in-application-bundle)

我正在尝试使用以下代码将字符串写入文件：

```
NSString *file = [[NSBundle mainBundle] pathForResource:@"settings" ofType:@"txt"];

NSLog(@"Path : , %@", file);

NSError *error=NULL;

NSString *data=@"teleiwne";

[data writeToFile:file atomically:YES encoding:NSUTF8StringEncoding error:&error]; 
```

打印出来的路径是：/Users/kd/Library/Application Support/iPhone Simulator/6.0/Applications/763B8245-CB1A-4​​BDE-85CF-19AEFA411DB8/testKremala.app/settings.txt

我没有收到任何错误，但没有任何内容写入文件

我尝试了以下代码并且它有效：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"set.txt"];

NSString *data=@"Kostas";

[data writeToFile:appFile atomically:YES];

NSString *myData = [NSString stringWithContentsOfFile:appFile];

NSLog(@"Data : %@ ",myData); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:16:51.783

不允许您写入 App 目录。尝试写入该应用文件夹内的 Documents 目录。

```
NSString *data = @"testData";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"settings.txt"];
[data writeToFile:appFile atomically:YES]; 
```

# c# - Visual Studio 插件查找编译/构建错误

> ID：14590490
> 
> 赞同：1
> 
> 时间：2013-01-29T19:15:17.253
> 
> 标签：c#, visual-studio-2010, visual-studio, visual-studio-addins

根据解决方案是否编译/构建没有错误，我需要在构建完成时处理特定的逻辑。

如何检测最后一次构建是否产生任何错误？

vsBuildState 包含 Done、InProgress 和 NotStarted 的定义，我在哪里检查错误？

```
 public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
    {
        _applicationObject = (DTE2)application;
        _addInInstance = (AddIn)addInInst;
        _buildEvents = _applicationObject.Events.BuildEvents;            
        _buildEvents.OnBuildBegin += customBuildHandler;
        _buildEvents.OnBuildDone += customBuildEndHandler;
    }

    void customBuildEndHandler(vsBuildScope Scope, vsBuildAction Action)
    {
            if(IsLastBuildSuccessful) // How can I determine this?
            {
                    //Do Something
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:19:09.200

在事件处理程序中，您需要使用 LastBuildInfo 变量拦截上次构建的状态。参考： http: [//msdn.microsoft.com/en-US/library/envdte.solutionbuild.lastbuildinfo (v=vs.100).aspx](http://msdn.microsoft.com/en-US/library/envdte.solutionbuild.lastbuildinfo(v=vs.100).aspx)

```
var solution = _applicationObject.Solution;
var lastBuildState = solution.SolutionBuild.LastBuildInfo; 
if(lastBuildState == 0)
    //Build succeeded 
```

# version-control - CVS 服务器将提交消息中的 Unicode 字符更改为问号

> ID：14590496
> 
> 赞同：0
> 
> 时间：2013-01-29T19:15:30.240
> 
> 标签：version-control, unicode, cvs

如果我在 CVS 提交消息中添加 Unicode 字符（例如日文汉字），我收到的通知电子邮件会将这些字符显示为问号。如何配置它以便我可以正确看到字符？

# database - AppEngine - 计算已删除的实体数量

> ID：14590503
> 
> 赞同：0
> 
> 时间：2013-01-29T19:15:48.530
> 
> 标签：database, google-app-engine, count

我在 AppEngine 上编写了一个社交网络应用程序，我即将添加的一项功能是能够查看过去一个月内哪些人查看了您的个人资料（就像您在 LinkedIn 上所做的那样）。

这是我正在考虑实现代码的方式：

*   我将使用一种新的实体类型（我们称之为 ViewerTracker）来跟踪查看配置文件的时间，它将包含 3 个主要值：1）正在查看的配置文件的 ID，2）正在查看的配置文件的 ID , 和 3) 观看的日期时间。
*   每次有人查看个人资料时，我都会检查 Viewertracker 以查看该人之前是否查看过个人资料，如果是，我将仅更新 ViewerTracker 对象的日期时间。如果之前没有查看过个人资料，我将创建一个新的 ViewerTracker 实体来记录事件。
*   我还将跟踪过去 30 天内以单独的实体类型（我们称之为 ViewerCount）查看每个个人资料的独特人数的计数。我将编写一个 cron 作业，每天清除超过 30 天的 ViewerTracker 对象，并且需要减去从 ViewerCount 对象中删除的旧 ViewerTracker 元素的数量。

但是，当我删除旧的 ViewerTracker 实体（基于对日期时间值的查询）时，我需要确切知道我删除了多少实体，以便我可以从 ViewerCount 对象中减去该数字。有什么方法可以准确地知道删除操作删除了多少实体？我解决这个问题的方法可以吗，或者有更好的方法吗？

# javascript - 克隆 CSS 类

> ID：14590506
> 
> 赞同：6
> 
> 时间：2013-01-29T19:16:06.733
> 
> 标签：javascript, jquery, css

我想将所有`:hover`类复制到元素索引`.hoverid`所在的类中（或任何其他方式来创建 unqiue 悬停类名称）。`id`

所以，我的想法是以某种方式遍历页面上所有已`:hover`定义的元素并将该类克隆到`.hoverid`. 这样我就可以在我想要的任何元素上触发悬停效果，如下所示：

```
$('#element').addClass('hover'+$(this).id); 
```

所以我的问题实际上是：

1.  如何遍历定义了“：悬停”的元素？
2.  如何将该类克隆到另一个类中？

小提琴尝试您的解决方案：http: [//jsfiddle.net/kLt2P/](http://jsfiddle.net/kLt2P/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:19:26.400

JS 和 CSS 是完全独立的。换句话说，你不能通过 JS 访问 CSS 类的属性，尽管你可以访问元素的 CSS 属性，因为 JS 作用于元素。

**解决方案**
您可以使用一些 hackish 解决方案来解决这个问题，但最好的解决方案可能是在 jQuery 中创建一个“反向扩展”方法。换句话说，您必须编写一个相反的方法，即`.extend()`获取两个数组并返回第二个数组中与第一个数组不同或不存在的所有属性。这实际上并不像听起来那么困难。

您接下来要做的是获取页面上的每个元素并在它们上运行“反向扩展”方法。您必须将`.css()`不悬停时调用元素上的方法返回的数组作为第一个参数传递，并将悬停时调用`.css()`元素上的方法返回的数组作为第二个参数传递。

如果结果数组不为空，则该元素确实`:hover`定义了一个类（或 JS 应用`:hover`类）。这是踢球者：结果数组将具有`:hover`该类的所有属性！

**捕获悬停注意事项：**
您可以通过绑定`mousein`、`mouseenter`和来捕获悬停`hover`。我建议使用`mousein`and`mouseenter`和 使用变量标志来指示另一个是否已完成。由于它们可能在某些浏览器中同时运行，这可能需要一些额外的功能来绑定和取消绑定处理程序，使用`.on`和`.off`方法，以防止类的重复克隆。此实现应该为您提供所有主流浏览器（IE6-10、Safari、Opera、Chrome 和 Firefox）的支持。
**更新：**我关于能够触发伪悬停状态是不正确的（对此感到抱歉）——这通过 JS 是不可能的。但是，您可以使用此解决方案进行*捕获*悬停，然后在第一次悬停时克隆类的属性。然后，您可以将悬停的元素添加到 jQuery 数组中，您将使用它来确保您不会多次查看同一个元素（使用`.not`）。这样做的缺点是，如果将同一个类分配给多个元素，您将无法`:hover`多次阻止克隆伪类。`:hover`

如果您对此有任何疑问，请告诉我。祝你好运！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:23:26.153

您实际上可以使用 JCSSSP 之类的库并`( $('link['rel="stylesheet"']).attr('href') )`以某种方式解析所有 CSS 文件并基于它创建类。另一种方法是使用一些基本的正则表达式自己解析它。现在没有想法 - 但我会尝试一些东西。

您也可以使用网络工作者来提高性能。

[http://www.glazman.org/JSCSSP/](http://www.glazman.org/JSCSSP/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T19:21:25.860

CSS 已经为您完成了这项工作。在你的 CSS 中，放

```
.hoverid:hover
{
    // your hover styling.
} 
```

要动态地将“悬停”效果放在任何元素上，您可以使用`class="hoverid"` *或*

```
$('#element').addClass('hoverid'); 
```

`hoverid`是一个不寻常的名字，我认为你的意思是有不同的悬停样式，在这种情况下，只是有不同的 CSS 类来定义样式的语义以及为什么它会表现不同。

例如：

```
.definition:hover { }
.syntax:hover { }
.useroption:hover { } 
```

并将适当的语义 CSS 类应用于您想要的任何元素。瞧！您将根据元素的类型获得适当的动态结果。

了解您希望能够添加此类并“动态”触发它，您可以定义 CSS 如下：

```
.definitionhover, .definition:hover { } 
```

然后`.addClass("definitionhover")`在保留 CSS 的自动悬停格式的同时访问该类。

请参阅[http://jsfiddle.net/kLt2P/1/](http://jsfiddle.net/kLt2P/1/)，了解如何创建一个命名约定，让您可以对单个 ID 执行此操作。

请参阅[http://jsfiddle.net/kLt2P/5/](http://jsfiddle.net/kLt2P/5/)了解如何在不更改 CSS 的情况下执行此操作。注意：这会解析实际的 css，因此您需要文件中定义的确切值作为选择器。

请参阅[http://jsfiddle.net/kLt2P/14/](http://jsfiddle.net/kLt2P/14/)通过创建动态样式表将这两种方法组合在一起。

# sql - 如何仅从 postgres SQL 中的日期获取日期/月份部分

> ID：14590508
> 
> 赞同：20
> 
> 时间：2013-01-29T19:16:18.453
> 
> 标签：sql, postgresql

**大家好** ，我的 pg admin 数据库中有一个表。这个表中有一个**员工**表。有这个字段：- 1）name 2）date_of_birth

现在的情况是我想知道当前日期和即将到来的 20 天的生日例如，如果当前日期是 2013 年 1 月 28 日，那么

```
1)from_date=28-Jan-2013
2)to_date=16-feb-2013 
```

我想从 **date_of_birth的表中选择所有记录**

```
lies between 28-Jan and 16-feb 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-29T19:22:11.800

尝试这个：

```
SELECT *
FROM   bdaytable
WHERE  bdate >= '2013-01-28'::DATE
AND    bdate <= '2013-02-16'::DATE; 
```

您也可以尝试[`overlaps`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html)：

```
SELECT *
FROM bdaytable
WHERE (bdate, bdate) 
OVERLAPS ('2013-01-28'::DATE, '2013-02-16'::DATE); 
```

[, `extract`,`month``day`](http://www.postgresql.org/docs/8.3/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT) : [_](http://www.postgresql.org/docs/8.3/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)

```
SELECT *
FROM   bdaytable
WHERE  Extract(month from bdate) >= Extract(month from '2013-01-28'::DATE)
AND    Extract(month from bdate) <= Extract(month from '2013-02-16'::DATE)
AND    Extract(day from bdate) >= Extract(day from '2013-01-28'::DATE)
AND    Extract(day from bdate) <= Extract(day from '2013-02-16'::DATE); 
```

合并`Now()`并`interval`使用当前日期使查询动态化：

```
SELECT *
FROM   bdaytable
WHERE  Extract(month from bdate) >= Extract(month from Now())
AND    Extract(month from bdate) <= Extract(month from Now() + Interval '20 day')
AND    Extract(day from bdate) >= Extract(day from Now())
AND    Extract(day from bdate) <= Extract(day from Now() + Interval '20 day'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T21:45:14.363

```
select *
from employee
where 
    to_char(date_of_birth, 'MMDD') between 
    to_char(current_date, 'MMDD') and to_char(current_date + 20, 'MMDD') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:22:08.043

我认为这应该有效。使用`interval`.

```
SELECT * 
FROM Employee
WHERE Date_Of_Birth >= now() AND Date_Of_Birth <= now() + interval '20 day' 
```

如果您想获得这几天之间的任何出生日期（年份无关紧要），那么情况会略有不同。

编辑

如果年份无关紧要，虽然我确信有更好的方法，但这可能会奏效。基本上它只是将所有年份转换为普通年份（在本例中为 2000 年）——您也可以对输入参数执行相同操作。

```
(Date_Of_Birth + (2000-EXTRACT(YEAR FROM Date_Of_Birth) || ' years')::interval) 
```

好奇其他人过去使用了什么，因为这可能不是最有效的。

祝你好运。

# java - Android线程获取参数

> ID：14590513
> 
> 赞同：0
> 
> 时间：2013-01-29T19:16:45.703
> 
> 标签：java, android, multithreading, android-intent

我正在尝试从线程中获取一些信息，但我不知道如何。我从来没有使用过线程，我的问题是关于这个的。

我有一项活动，它使用一个线程的 web 服务。在此之后，如果结果为真，我想执行一些操作，如果结果为假，则执行其他操作。

我无法修改线程中的局部或全局变量，所以我不知道该怎么做。我不想在线程中抛出意图。

有没有办法返回这个结果？谢谢

这是我的活动代码：

```
public class RegisterActivity extends Activity {

//Constantes para la invocacion del web service
private static final String NAMESPACE = "http://webservice.proyecto";
private static String URL="http://192.168.1.34:8080/BDManejador/services/conexion?wsdl";
private static final String METHOD_NAME = "nuevo_usuario";
private static final String SOAP_ACTION ="http://ws.webapp.ejemplo/nuevo_usuario";  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_register);
}

public void goMainMenu (View v) {

    final EditText email = (EditText)findViewById(R.id.user);
    final EditText password = (EditText)findViewById(R.id.pass);
    EditText repeat_password = (EditText)findViewById(R.id.rpass);

    // COMPROBAR EMAIL VALIDO
    if((email.getText().toString().length() == 0) || (!email.getText().toString().contains("@")) ||(!email.getText().toString().contains("."))) {
        Toast toast= Toast.makeText(getApplicationContext(), "DIRECCIÓN DE CORREO ELECTRÓNICO NO VÁLIDA", Toast.LENGTH_LONG);
        toast.show();
    }
    else {

        // COMPROBAR CONTRASEÑA REPETIDA IGUAL
        if((password.getText().toString().compareTo(repeat_password.getText().toString()) == 0) && (password.getText().toString().length()!=0)) {

            // USAMOS EL WEBSERVICE

            Thread networkThread = new Thread() {
                @Override
                public void run() {
                  try {
                     SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);          
                     request.addProperty("email", email.getText().toString());
                     request.addProperty("pass", password.getText().toString());

                     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                     envelope.setOutputSoapObject(request);

                     HttpTransportSE ht = new HttpTransportSE(URL);
                     ht.call(SOAP_ACTION, envelope);
                     final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                     final boolean str = Boolean.parseBoolean(response.toString());
                     if (str) {
                         Log.v("MYAPP",  "INSERTADO");
                     }
                     else
                         Log.v("MYAPP",  "NO INSERTADO");
                  } 
                 catch (Exception e) {
                     e.printStackTrace();
                 }
                }
            };
            networkThread.start();

            //ESPERAR QUE TERMINE LA OPERACION
            try {
                networkThread.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }               

            //LANZAR LA NUEVA ACTIVIDAD
            Intent intent = new Intent(RegisterActivity.this, MenuActivity.class);
            startActivity(intent);

        }
        else {
            Toast toast= Toast.makeText(getApplicationContext(), "LAS CONTRASEÑAS DEBEN SER IGUALES", Toast.LENGTH_LONG);
            toast.show();
        }
    }

}

} 
```

所以我想在变量 boolean`str`为真时抛出我的意图。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:26:11.430

我认为您需要在线程中使用处理程序。

创建线程时传递一个新的处理程序。

在线程内部，使用 handler.post(new Runnable () { public void run(){ aMethod(); } });

然后，在线程外（在您的活动类中）实现 aMethod 以执行您想做的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:34:07.327

UI 无法在其他一些非 UI 线程上进行操作。

我认为您应该使用`AsyncTask`界面。

请参阅此参考：

[无痛穿线](http://android-developers.blogspot.in/2009/05/painless-threading.html)

对于如此漫长而耗时的后台任务`AsyncTask`是最佳选择。通过它您可以轻松地在后台执行操作，并且在完成作业后，您可以从该`onPostExecute`方法更新 UI。

# php - 有什么方法可以调整 MediaWiki 资源以更快地拒绝匿名请求？

> ID：14590520
> 
> 赞同：-3
> 
> 时间：2013-01-29T19:17:10.503
> 
> 标签：php, linux, mediawiki, iptables, denial-of-service

我们的一个基于 MediaWiki 的项目似乎受到 DoS 攻击 - 异常数量的匿名用户试图编辑页面并查看或编辑历史请求。虽然在该项目上禁用了匿名编辑，并且这些匿名用户（我假设是机器人）实际上无法更改页面，但负载严重到足以显着降低服务器速度。

其中一个想法似乎改变了 MediaWiki PHP 代码以更快地拒绝匿名请求。匿名访问者只需要查看页面；他们不应该编辑、查看页面源或查看历史记录。使用像 IPTables 这样的东西来遵循这个标准进行屏蔽会更有趣。我们对服务器具有 root 访问权限。

除了查看文章内容之外，是否可以更改 PHP 或使用一些外部工具来有效阻止所有匿名 MediaWiki 请求？

我已经阅读并继续关注[这里](https://stackoverflow.com/questions/108088/best-practices-for-detecting-dos-denial-of-service-attacks)和[这里](https://stackoverflow.com/questions/14477942/how-to-enable-ddos-protection)有关 DoS 保护的更一般的问题。单独发布此内容的原因是也许我们可以做一些 MediaWiki 特定的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:24:00.393

您是否尝试过更改用户权限？MediaWiki 文档展示了如何编辑 LocalSettings.php 来设置权限。

与防火墙一样，您应该首先禁止所有编辑权限，然后将其重新添加到您想要允许的组（如注册用户）。

从他们的手册中，[http://www.mediawiki.org/wiki/Manual:User_rights](http://www.mediawiki.org/wiki/Manual:User_rights)

```
This example will disable editing of all pages, then re-enable for 
users with confirmed e-mail addresses only:

 # Disable for everyone.
 $wgGroupPermissions['*']['edit']              = false;
 # Disable for users, too: by default 'user' is allowed to edit, even if '*' is not. 
 $wgGroupPermissions['user']['edit']           = false;
 # Make it so users with confirmed e-mail addresses are in the group.
 $wgAutopromote['emailconfirmed'] = APCOND_EMAILCONFIRMED;
 # Hide group from user list. 
 $wgImplicitGroups[] = 'emailconfirmed';
 # Finally, set it to true for the desired group.
 $wgGroupPermissions['emailconfirmed']['edit'] = true; 
```

# javascript - 重新打开没有双重动画的 SqueezeBox

> ID：14590522
> 
> 赞同：1
> 
> 时间：2013-01-29T19:17:17.517
> 
> 标签：javascript, animation, mootools, squeezebox

我在屏幕上有一个打开的[SqueezeBox](http://digitarald.de/project/squeezebox/)，并希望使用不同的 URL 重新打开它，以响应单击框中的链接。我正在尝试各种方法以新（不同）大小打开新 URL，以便动画流畅且只运行一次。不幸的是，标准方法（`open`方法）似乎动画两次（或运行无意义的“故障”动画）。

作为替代方案，我正在尝试`setContent`，但这似乎没有提供设置选项的方法，并且从我[在源代码](http://digitarald.de/project/squeezebox/1-1/source/SqueezeBox.js)中可以看出，一旦设置了选项，`SqueezeBox.initialize`它就不会做任何事情。

```
 // (Attempt 1)
    // This animation is a bit glitchy, have tried resetting resizeFx
    // and sizeLoading to reduce bounce. Ideally want it to morph from
    // current size to size{} without shrinking to sizeLoading{} first.
    if ( false ) {
        SqueezeBox.open(
            url,
            {
                size: { x: 500, y: 500 },
                sizeLoading: { x: 500, y: 500 },
                resizeFx: {
                    duration: 0
                }
            }
        );
    }

    // (Attempt 2)
    // Empty SqueezeBox then reset its contents
    $( 'sbox-content' ).empty();
    // Unfortunately here there appears no way to reset the size with
    // the ajax method,
    // and the call to initialize is ignored.
    SqueezeBox.initialize(
        {
            size: { x: 100, y: 400 },
            /* Set the loading size to the current size? */
            sizeLoading: { x: 700, y: 700 }
        }
    );
    // Load the new content in via ajax
    SqueezeBox.setContent( 'ajax', url );
    // So, I would need to call resize() here, causing a second animation 
```

我[在这里看到](https://stackoverflow.com/a/9288327/472495)了切换到另一个模态灯箱插件的建议，但是离开 SB 并不是一个真正的选择，而且我并不热衷于同时运行这两个插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:11:10.330

啊哈，这是一个解决方案 - 避免 SqueezeBox 调用！相反，我使用标准的 MooTools AJAX 调用手动加载内容。这不会打开通常的等待微调器，但我希望可以修复。

```
// Let's load page in AJAX manually; reopening with open() or
// setContents() appears to cause double or glitchy animations.
var myRequest = new Request.HTML(
    {
        url: url,
        method: 'get',
        evalScripts: true,
        update: $( 'sbox-content' )
    }
).send();

// @todo If no size change is needed don't run this
// to avoid glitchy animation
SqueezeBox.resize(
    { x: 500, y: 500 },
    false
); 
```

请注意，我正在使用`evalScripts: true`，因此可加载代码段中的任何 JavaScript 都会像我使用`SqueezeBox.open()`.

# crystal-reports - 最适合 AngularJS 和 Crystal Reports 的报告解决方案？

> ID：14590524
> 
> 赞同：8
> 
> 时间：2013-01-29T19:17:28.277
> 
> 标签：crystal-reports, angularjs, client-side

我们正在转向客户端前端开发，并希望使用 AngularJS，我想知道有什么方法可以将水晶报表与 AngularJS 一起使用。

我们的服务器端是 ASP.Net webapi/ MS SQL Server。

如果我们可以使用现有的水晶报表，那就太好了，如果根本无法使用水晶报表，那么一些专家会告诉我们，使用 AngularJS 等框架进行报告的另一个最佳解决方案是什么。

谢谢和最好的问候

PS：令人惊讶的是有这么多客户端框架，但没有报告框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:57:31.210

免责声明：我为 STOIC 工作

我不知道与使用 AngularJS 构建的 Crystal Report 的任何集成。*但是，如果您需要基于*AngularJS构建的报告解决方案，您可能需要查看[STOIC](http://stoic.com/)，尤其是[View Editor](http://stoic.com/features/view-editor)组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T08:04:50.843

我觉得要彻底回答你的问题，我们必须定义什么是“报告”。就水晶报表而言，基本功能是通过表单提示用户输入他们的参数以过滤报表，然后显示一个视图，其中的数据以某种布局呈现，通常是一个数据网格，多个数据网格，一些图表或图形，或以上所有内容的组合。有一些功能可以深入了解详细信息或不同的子报告，对行内插入的其他内容进行分组，使用代码（也称为“公式”）影响您的数据模型，还可以使用公式修改您的查询结果，实际上没有编写任何 SQL。报告可以嵌入 Flash、HTML、Java 小程序和 Silverlight。报告可以忠实地导出为各种格式，即 PDF、Excel、CSV 和 Word。Crystal 的基本功能还允许为报表导出定义数据结构，例如通过 XSLT 结构化的 XML。有用于 Java 和 .Net 的 SDK，以及 Javascript API。报告可以嵌入到网页中，使用 javascript 内联呈现，并嵌入到 Java 或 .Net 应用程序中，并具有允许免费分发的许可证。这只是功能集的表面，甚至没有触及 SAP, Inc. 提供的其他服务器平台产品。

现在，如果您可以不使用其中的某些功能，或者进行选择，那么您的选择就会大大增加。我想有一些框架支持 Crystal 的整个功能集，但我发现这些术语具有误导性，而且通常它们只是加载营销短语；例如，“报告”在其他框架中通常被称为“视图”、“网格”或“数据网格”。如果您需要一个自动提供整个功能集的罐装解决方案，我认为 Crystal 将是您最好的选择，他们的 Javascript API 将允许您在网页中显示它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T18:57:10.543

我知道有几种方法，但它们需要 Crystal Enterprise Server，或 SAP BusinessObjects Business Intelligence 套件，或 $$

使用 Enterprise Server，您可以发布所有报告，这些报告允许您通过带有参数的 URL 调用它们。此链接/url 将在启动水晶报表调用的浏览器中生成一个企业查看器。

对于 BusinessObjects，还有一个 JavaScript API，除了您可以自定义和嵌入工具外，它基本上做同样的事情，（我以前没有使用过）但仍然 $$

[https://help.sap.com/businessobject/product_guides/boexir4/en/xi4_cr_js_api_en.pdf](https://help.sap.com/businessobject/product_guides/boexir4/en/xi4_cr_js_api_en.pdf)

最后一个选择是购买像 ReCrystalize 这样的第三方，但是你必须安装在你的网络服务器上并且运行大约 1k 美元。

AngularJS 只是一个 javascript 绑定框架。与 Crystal Reports 等服务器端产品无关。为了从javascript调用启动报告，您需要调用一些api，或者创建一个像c#这样的客户端页面来调用服务器端的报告。

您还可以使用一个名为 DreamFactory 的产品，它调用一个 php 服务或另一个基本上做同样事情的服务。

希望这可以帮助。

# javascript - 使用 jQuery 以增量方式更改背景位置

> ID：14590526
> 
> 赞同：0
> 
> 时间：2013-01-29T19:17:39.670
> 
> 标签：javascript, jquery, css, background-position

我正在尝试一种有效的方法来循环以 25% 的增量循环元素的背景图像，但是当它达到 100% 时，它会在下一个增量时回到 0%。

我可以做这样的事情：

```
var currentPos = $('.ele1').css('background-position');
var elementPositions = currentPos.split(' ');

var x = Number(elementPositions[0].replace(/[^0-9-]/g, ''));
//var y = Number(elementPositions[1].replace(/[^0-9-]/g, ''));

// only want to do the x axis
x = (x == 100) ? 0 : x += 25;

$('.ele1').css('background-position', x + "%" + " 0"); 
```

但我不喜欢我必须两次调用该元素的事实。有没有更有效的方法来增加 jQuery 的 % 并在 100% 后将其重置回 0%？

我确实想过用 CSS .classes 来做这件事。但我真的不想局限于我的样式表中的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:33:41.980

您可以[将回调函数传递](http://api.jquery.com/css/#css-propertyName-functionindex--value)给 jQuery 的`.css()`方法：

```
$('.ele1').css('background-position', function (i, value) {
    var x = parseInt(value, 10);
    return (x == 100 ? 0 : x + 25) + "%" + " 0";
}); 
```

如果您从循环/计时器/事件/任何内容中调用它，则应该缓存该`$('.ele1')`对象。

# database-schema - 寻找 Intergy 数据库的数据库模式

> ID：14590527
> 
> 赞同：0
> 
> 时间：2013-01-29T19:17:40.583
> 
> 标签：database-schema, progress-db

有人可以向我指出 Intergy 数据库的架构定义来源吗？它是一家名为 Vitera 的公司（Intergy 曾经由 Sage 拥有）的医疗实践管理数据库。数据库引擎是 Progress。基本上，我正在寻找的是表名、相关列和主键/外键。我去过 Vitera，并被告知此信息是专有信息。我已经构建了一个简单的 Web 应用程序，它可以查看进度目录表，这让我参与其中。但是，获得更多细节会很好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:56:27.483

如果您可以访问目录表，那么您已经得到了您需要的东西。您可能只需要稍微了解 _file、_field 和 _index 之间的关系即可完成图片。

_file = 表

_field = 列

正如蒂姆指出的那样，没有明确的外键等等。

字段通过共同的“recid”与表相关联。我不是一个 SQL 人，也不会假装是一个，但与他们相关的查询的 4GL 版本是：

```
for each _file no-lock where _tbl-type = "t":

  display _file-name.

  for each _field no-lock where _field._file-recid = recid( _file ):

    display _field-name.

  end.

  for each _index no-lock where _index._file-recid = recid( _file ):

    display _index-name.

    for each _index-field no-lock where _index-field._index-recid = recid( _index ):

      find _field no-lock where recid( _field ) = _index-field._field-recid.
      display _field-name.

    end.

  end.

end. 
```

如何将其转换为 SQL 应该是相当明显的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:08:52.847

联系您支持的客户，看看他们是否为 ODBC 访问付费，因为架构是他们通过付费订阅获得的。如果不是，那么我猜他们可能违反了与供应商的合同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:33:18.633

Progress 使用“数据管理工具”来管理模式，它会为您转储一个“df”文件，该文件将具有数据库的模式结构。

它不是一个 SQL 数据库，所以数据库中没有实现“主/外键”，所以你必须推断表之间的任何关系。

# javascript - 至少一位数字的字母数字的正则表达式

> ID：14590536
> 
> 赞同：0
> 
> 时间：2013-01-29T19:18:05.613
> 
> 标签：javascript, regex

我正在尝试将字母数字字符串与至少一位数字匹配。第二个条件是它的最小长度应该是 3。

例如，以下字符串应匹配

```
111
12345
ABCD1
123A
11AA11 
```

和以下不应该匹配

```
ABCD
AB
12
1A 
```

我已经达到了可以正确处理第一个条件的地步。也就是说，至少有一位数：

```
([a-zA-z0-9]*[0-9]+[a-zA-z0-9]*) 
```

但我不知道指定最小长度。如果我尝试使用 {3}，则至少需要 3 个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:20:24.770

尝试使用[肯定的前瞻](http://www.regular-expressions.info/lookaround.html)来确定至少有一个数字，并使用`{3,}`它来指示它应该匹配至少 3 个字符：

```
/^(?=.*\d)[a-z\d]{3,}$/i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:22:20.777

您可以使用[前瞻](http://www.regular-expressions.info/lookaround.html)来确保您的表达式包含一个数字，然后匹配最小三个字符：

```
/^(?=.*?\d)[a-zA-Z0-9]{3,}$/ 
```

# r - 在 R 数据帧中按组区分值的提示

> ID：14590542
> 
> 赞同：1
> 
> 时间：2013-01-29T19:18:16.087
> 
> 标签：r, dataframe

> **可能重复：**
> [关于使用 plyr 计算组间同比变化的初学者提示](https://stackoverflow.com/questions/14591147/beginner-tips-on-using-plyr-to-calculate-year-over-year-change-across-groups)

计算跨多个变量组（即地区和食品）的现有数据框变量（即销售额）的同比差异（新变量）的好方法是什么？

下面是一个数据框结构的例子：

```
Date              Region    Type    Sales

1/1/2001    East    Food    120
1/1/2001    West    Housing 130
1/1/2001    North   Food    130
1/2/2001    East    Food    133
1/3/2001    West    Housing 140
1/4/2001    North   Food    150
….
….
1/29/2013   East    Food    125
1/29/2013   West    Housing 137
1/29/2013   North   Food    1350 
```

此外，除了区分数据之外，我还想计算一个尾随（比如 7 天）移动平均线。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:57:47.340

这里有一些东西可以帮助您入门。`data.table`对这类事情来说是一个很棒的包，因为它为这类事情提供了简洁且易于使用的语法（一旦你超过了学习曲线）。

```
library(data.table) 
```

创建一个可重现的示例

```
set.seed(128)
regions = c("East", "West", "North", "South")
types = c("Food", "Housing")
dates <- seq(as.Date('2009-01-01'), as.Date('2011-12-31'), by = 1)
n <- length(dates)
dt <- data.table(Date = dates, 
                 Region = sample(regions, n, replace = TRUE),
                 Type = sample(types, n, replace = TRUE),
                 Sales = round(rnorm(n, mean = 100, sd = 10))) 
```

添加年份列

```
dt[, Year := year(Date)]

> dt
        Date Region    Type Sales Year
1: 2009-01-01   West    Food   119 2009
2: 2009-01-02  North Housing   102 2009
3: 2009-01-03  North Housing   102 2009
4: 2009-01-04  North    Food   101 2009
5: 2009-01-05   West    Food   101 2009
---                                     
1091: 2011-12-27   East Housing   122 2011
1092: 2011-12-28   East Housing    88 2011
1093: 2011-12-29  North    Food   115 2011
1094: 2011-12-30   West Housing    96 2011
1095: 2011-12-31   East    Food   101 2011 
```

按年份计算汇总

```
summary <- dt[, list(Sales = sum(Sales)), by = 'Year,Region,Type']
setkey(summary, 'Year')

> head(summary)
Year Region    Type Sales
1: 2009   West    Food  4791
2: 2009  North Housing  3517
3: 2009  North    Food  6774
4: 2009  South Housing  4380
5: 2009   East    Food  4144
6: 2009   West Housing  4275 
```

为每个地区/产品组合创建同比差异的功能。

```
YoYdiff <- function(dt) {
  # Calculate year-on-year difference for Sales column
  data.table(Sales.Diff = diff(dt$Sales), Year = dt$Year[-1])
} 
```

按列计算同比差异。这适用于我的示例，因为 setkey(dt, Year) 按年份对数据表进行排序，但如果您的示例遗漏了某些产品/地区的年份，则必须更加小心。

```
> summary[, YoYdiff(.SD), by = 'Region,Type']
    Region    Type Sales.Diff Year
 1:   West    Food       -412 2010
 2:   West    Food        121 2011
 3:  North Housing       1907 2010
 4:  North Housing      -1457 2011
 5:  North    Food      -3087 2010
 6:  North    Food        369 2011
 7:  South Housing       -539 2010
 8:  South Housing        575 2011
 9:   East    Food       1264 2010
10:   East    Food      -1732 2011
11:   West Housing        298 2010
12:   West Housing       -410 2011
13:  South    Food       -889 2010
14:  South    Food       1045 2011
15:   East Housing       1146 2010
16:   East Housing       1169 2011 
```

# java - XACML 实现

> ID：14590543
> 
> 赞同：9
> 
> 时间：2013-01-29T19:18:26.433
> 
> 标签：java, authorization, access-control, xacml

我是 XACML 政策的新手。您能否指定我如何实施 XACML 策略。我尝试过不同的 API。但是对于我的项目，我需要实现 XACML 评估引擎。那么，你能帮我提供实现细节吗？哪种语言最适合实现评估引擎。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T01:55:26.243

我想，实现一个 XACML 评估引擎并不是一件容易的事。您需要通过[https://www.oasis-open.org/committees/xacml/](https://www.oasis-open.org/committees/xacml/)上的 XACML 规范并基于它进行实现。如果您能找到已经实现的基于 XACML 的授权引擎，那就更好了。

“Balana”是 XACML 实现之一（部分 XACML 3.0 版本），它是基于 java 的开源项目。

因此您可以自由使用它，您可以从[https://svn.wso2.org/repos/wso2/trunk/commons/balana/](https://svn.wso2.org/repos/wso2/trunk/commons/balana/)找到源核心。

另外，如果你真的想实现一个新的 XACML 引擎，你可以通过 Balana 源代码获得一些想法实现或重用它的源代码。有关 Balana 和 XACML 的更多详细信息，请参阅[http://xacmlinfo.com/](http://xacmlinfo.com/)上的此博客文章。我想，java 将是一种易于处理的语言，因为您需要处理更多的 XML 内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T15:18:48.403

您想查看当今存在的 XACML 实现。

以下是当今可用的所有开源实现：

*   Sun XACML：提供部分 XACML 2.0 实现
*   Heras AF：提供符合 XACML 2.0 的实现 ( [http://www.herasaf.org/heras-af-xacml.html](http://www.herasaf.org/heras-af-xacml.html) )
*   Balana：如前所述，提供部分 XACML 3.0 实现
*   AuthzForce：完全符合 XACML 3.0（所有强制性功能）（[https://github.com/authzforce/core](https://github.com/authzforce/core)）

以下是供应商实现：

*   Axiomatics Policy Server：完全 XACML 2.0 和 XACML 3.0 实现 - 也证明了一致性（这是 XACML 3.0 编辑器工作的地方）。实施证明：[https ://lists.oasis-open.org/archives/xacml/201010/msg00002.html](https://lists.oasis-open.org/archives/xacml/201010/msg00002.html)
*   IBM DataPower：包含 XACML 2.0 引擎
*   Quest：通过收购Bitkoo，他们也得到了XACML的支持。
*   甲骨文

上面引用的所有开源实现都是 Java。Axiomatics 和 Bitkoo 还提供了 C# 引擎。

如果您想自己动手，您需要使用 JAXB 从 XACML 模式生成 XACML 对象。但这不会给你评估逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:03:02.427

不知道你所说的“评估”是什么意思。您是否有需要评估的访问请求以确定是否授予访问权限？

为此，我能够快速运行 WSO2 Identity Server，编写 XACML 3.0 策略并让它检查访问控制请求。

服务器：[http](http://wso2.com/products/identity-server/) ://wso2.com/products/identity-server/ 帮助我的博客：http: [//xacmlinfo.com/2012/06/13/pdp-pep-communication-wso2is/](http://xacmlinfo.com/2012/06/13/pdp-pep-communication-wso2is/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T12:00:08.213

在策略编辑方面，您可以使用一个方便的工具：ALFA（[https://www.axiomatics.com/blog/how-can-i-use-policy-references-in-alfa/](https://www.axiomatics.com/blog/how-can-i-use-policy-references-in-alfa/)）。这是一个 Eclipse 插件，可让您将策略转换为 XACML 格式。

# php - 如何使用 PHP preg_replace() 定义完全匹配

> ID：14590544
> 
> 赞同：0
> 
> 时间：2013-01-29T19:18:39.537
> 
> 标签：php, regex, preg-replace

我正在尝试使用 PHP preg_replace() 从 URL 中删除一些参数。例如，我需要`a[]=1` 从下面的 URL 中删除。

```
$my_url = 'www.myhost.com/filter.php?a[]=1&a[]=12&a[]=13&a[]=14' 
```

所以我正在使用：

```
$without_filter = preg_replace("/(&)?a\[\]=1/", '', $my_url); 
```

我只想删除`a[]=1`，但它正在`a[]=1`从其他参数中删除包含的部分，所以我得到：

```
www.myhost.com/filter.php?234 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:20:55.587

关于什么：`/a\[\]=1(&|\b)/`

这样，`a[]=1` *只有*在它后面跟着一个`&`或字符串结尾时它才会捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:41:55.233

按照[preg_replace](http://php.net/manual/en/function.preg-replace.php)的手册页，您可以执行以下操作：

```
$without_filter = preg_replace("/\&(a\[\]=1)(\&|$)/", '\2', $my_url); 
```

或者......你总是可以使用[preg_replace_callback](http://www.php.net/manual/en/function.preg-replace-callback.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:22:22.333

使用 的`$limit`参数`preg_replace`并将其设置为`1`，这应该只替换一次。假设您的参数始终以这种方式排序：

```
$without_filter = preg_replace("/(&)?a\[\]=1/", '', $my_url, 1); 
```

# ios - 在适用于 iOS 的 Google Maps SDK 上截取 GMSMapView 的问题

> ID：14590545
> 
> 赞同：7
> 
> 时间：2013-01-29T19:18:40.787
> 
> 标签：ios, cocoa, google-maps, opengl-es, google-maps-sdk-ios

我正在努力解决的一个问题是，当我尝试截取 GMSMapView（Google Maps SDK iOS）的任何部分时。UIGraphicsGetImageFromCurrentImageContext() UIImage 输出是不可见的。我最终发现 GMSMapView 是用 OpenGL 渲染的。知道了这一点，我尝试使用 glReadPixels() 方法。令人不安的是，我能够很好地在 iPhone 模拟器上检索地图屏幕截图，但是当我在真实设备上使用相同的方法时，它仍然不可见（iOS 6）。

我想知道是否有人遇到过同样的问题？我已经完成了我的调查。我找不到任何与我的情况相关的东西。我发现的大多数通用解决方案都说我应该更新一些 CAEAGLLayer 属性。我认为 GMSMapView 会限制我找到合适的图层，但我能够找到并更新 CAEAGLLayer，如下所示：

```
[(CAEAGLLayer *)[[[mapView_ subviews] objectAtIndex:0] layer] setOpaque: NO];

[(CAEAGLLayer *)[[[mapView_ subviews] objectAtIndex:0] layer] setDrawableProperties:[NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithBool:YES],kEAGLDrawablePropertyRetainedBacking,kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat,nil]]; 
```

论坛建议通过将图层的 OPAQUE 属性设置为 NO 并将保留的支持属性设置为 YES 可以缓解 iOS 6 问题。它确实在模拟器上修复了它，但不是在设备上。

我偶然发现的最后一个修复程序是将主 OpenGL 视图的 preserveBackBuffer 更新为 YES。这就是我的技术专长结束的地方。我无法找到更新 GMSMapView 的 preserveBackBuffer 值的位置或方式。我假设这是可以解决我所有屏幕捕获问题的修复程序。似乎只是运行 iOS 6+ 的设备的问题。

有没有人对此问题有经过测试的解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T08:10:34.007

在 Google Maps for iOS v1.1 中，有 GMSScreenshot 类可以实现这一点。

```
 UIImage* image = [GMSScreenshot screenshotOfMainScreen]; 
```

不过，这已在 v1.2 中删除，因为现在可以使用标准图形上下文方法捕获地图图层。假设 GMSMapView 是“自我”的子视图：

```
- (UIImage *)captureScreen {
    UIGraphicsBeginImageContextWithOptions(self.frame.size, YES, 0.0f);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:17:26.640

我在 Google 地图组上打开了一个问题，用于 GMSMapView 的屏幕截图。他们说

> 我相信在 1.1.0 版本中，现在可以使用[GMSScreenshot screenshotOfMainScreen](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4982)。

# android - 为按钮、文本字段等视图生成 Android 开发者工具代码

> ID：14590550
> 
> 赞同：0
> 
> 时间：2013-01-29T19:19:21.113
> 
> 标签：android, developer-tools, findviewbyid

Android 开发者工具中是否存在以下功能。

创建 XML 布局后，是否有一种快速的方法可以将这些视图自动快速导入到 Java 代码中。

这是为了节省您在

```
EditText editText = (EditText) findViewById(R.id.search) 
```

是否有一些捷径可以通过查看我的 XML 文件自动生成此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:26:00.320

这不是确切的答案，但请查看[roboguice](http://code.google.com/p/roboguice/)。它是 Android 的依赖注入框架。

```
class RoboWay extends RoboActivity { 
@InjectView(R.id.name)             TextView name; 
@InjectView(R.id.thumbnail)        ImageView thumbnail; 
@InjectResource(R.drawable.icon)   Drawable icon; 
@InjectResource(R.string.app_name) String myName; 
@Inject                            LocationManager loc; 

public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.main);
    name.setText( "Hello, " + myName ); 
} 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:25:30.657

不，对不起。

你想通过找到你所有的观点来完成什么？也许还有另一个捷径可以帮助你。

# git - 使用 CFExecute 和 PsExec 运行 Git 操作时，如何克服部分执行批处理文件的问题？

> ID：14590552
> 
> 赞同：0
> 
> 时间：2013-01-29T19:19:28.583
> 
> 标签：git, batch-file, coldfusion, psexec, cfexecute

我遇到了一个奇怪的问题，并尝试了许多不同的事情。

目标是让用户单击网页上的按钮，该按钮将在其他几个服务器上执行批处理文件。

我正在使用 ColdFusion 8。当用户单击按钮时，CFExecute 启动 PSExec.exe 以在远程计算机上执行文件。

bat文件的摘录

```
cd c:\web\www >> \\firstmachine\c$\web\qa\html\RA\ra.log
git pull origin master >> \\firstmachine\c$\web\qa\html\RA\ra.log

cd c:\web\aaa >> \\firstmachine\c$\web\qa\html\RA\ra.log
git pull origin master >> \\firstmachine\c$\web\qa\html\RA\ra.log 
```

* * *

当我从命令提示符运行它时，git 会正常运行并从 www 和 aaa 拉取。日志文件显示一切都按预期工作。

```
c:\web\qa\html\RA\PsExec.exe \\othermachine -u domain\adminaccount -p <password> c:\web\qa\html\RA\script.bat 
```

当我使用 CFExecute 从 CF 运行相同的命令时，git 只会拉 www 而不是 aaa。

```
<cfexecute name="c:\web\qa\html\RA\PsExec.exe" 
       variable="var" arguments="\\othermachine -u 
       domain\adminaccount -p <password> c:\web\qa\html\RA\script.bat" 
       timeout="50"> 
</cfexecute> 
```

如果我换行，git 会拉动 aaa 而不是 www。在这些情况下，第一次成功拉取后，日志文件什么也没有显示，就好像进程中止了一样，但我找不到任何其他异常。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:20:53.803

您可以尝试使用 CALL 命令并将两个块放在不同的标签中。当您从外部程序运行批处理文件时，您需要指定 exit /b [error_code]。如果批处理首先执行 git pull 并将成功代码返回给调用它的对象，可能会发生什么情况。下面的结构只有在成功执行这两个部分后才会发送它。

```
SET _err_lvl=0
CALL :pull_www
CALL :pull_aaa

IF %_err_lvl% EQU 0 exit /b 0

:pull_www
cd c:\web\www >> \\firstmachine\c$\web\qa\html\RA\ra.log
git pull origin master >> \\firstmachine\c$\web\qa\html\RA\ra.log
IF %ERRORLEVEL% NEQ 0 SET _err_lvl=1
:end_pull_www
GOTO: eof

:pull_aaa
cd c:\web\aaa >> \\firstmachine\c$\web\qa\html\RA\ra.log
git pull origin master >> \\firstmachine\c$\web\qa\html\RA\ra.log
IF %ERRORLEVEL% NEQ 0 SET _err_lvl=1
:end_pull_aaa
GOTO: eof 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T22:10:56.047

我最终取出批处理文件并为每个操作使用单独的 CFExecute 命令。

# c# - 可能的布尔测试

> ID：14590555
> 
> 赞同：0
> 
> 时间：2013-01-29T19:19:42.280
> 
> 标签：c#, boolean

我正在尝试在 C# 中创建一个 for 循环来对 3 个 bool 变量进行所有可能的测试，但我无法弄清楚如何按照`( a && b ) || c`if`a`是 True 并且`b`是`c`False 整个语句将等于 false .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:25:47.523

不确定这是否是您想要的，但是使用 nested `foreach`，您可以这样做：

```
foreach (var a in new[] { false, true, })
  foreach (var b in new[] { false, true, })
    foreach (var c in new[] { false, true, })
    {
      // use a, b, and c here
    } 
```

或者以评论喜欢的风格：

```
bool[] arr = { false, true, };
foreach (var a in arr)
  foreach (var b in arr)
    foreach (var c in arr)
    {
      // use a, b, and c here
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:06:56.087

这个版本允许一些灵活性来扩展：

```
 for (int i = 0; i < 8; i++)
  {
    bool a = (i & 1) != 0;
    bool b = (i & 2) != 0;
    bool c = (i & 4) != 0;

    Console.WriteLine("a={0},b={1},c={2}", a, b, c);
  } 
```

# oauth - 将 xoauth.py 脚本集成到我的 web 应用程序中

> ID：14590556
> 
> 赞同：0
> 
> 时间：2013-01-29T19:19:42.860
> 
> 标签：oauth, gmail-imap

我正在将来自 google 的[xoauth.py](http://google-mail-xoauth-tools.googlecode.com/svn/trunk/python/xoauth.py)脚本集成到我的 django 应用程序中，因为我需要从我的应用程序访问用户的 Gmail 邮件。我的意图是在用户打算访问此功能并存储授权令牌以供以后使用时创建一个密钥/秘密对。这是一个两步操作：获取验证 URL（用户在其中获取验证码）并获取授权令牌。第二步对我来说失败，并显示以下消息：

```
Request Method: GET
Request URL: http://localhost:8000/authorization_token?user=iferca@ecoresol.com&code=ycH19iaufCHoJ7APVkBGe_Hu&key=4/nj5s6sLBx-DKWUYJlUzERnngOO_6&token=wwvSU3ws448HR1gqiN7NxTh7

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/iferca/devel/gmail/workspace/imapsrv/imapsrv/../imapsrv/gdg/views.py" in request_authoization_token
  27\.     response = xoauth.generateAuthorizationTokenFromVerificationCode(user, code,         request_key, request_secret)
File "/Users/iferca/devel/gmail/workspace/imapsrv/imapsrv/../imapsrv/gdg/xoauth.py" in generateAuthorizationTokenFromVerificationCode
  512\.         google_accounts_url_generator)
File "/Users/iferca/devel/gmail/workspace/imapsrv/imapsrv/../imapsrv/gdg/xoauth.py" in    GetAccessToken
  316\.                                      request_token.secret)
File "/Users/iferca/devel/gmail/workspace/imapsrv/imapsrv/../imapsrv/gdg/xoauth.py" in GenerateOauthSignature
  200\.   return GenerateHmacSha1Signature(base_string, key)
File "/Users/iferca/devel/gmail/workspace/imapsrv/imapsrv/../imapsrv/gdg/xoauth.py" in GenerateHmacSha1Signature
  194\.   digest = hmac.new(key, text, hashlib.sha1)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hmac.py" in new
  133\.     return HMAC(key, msg, digestmod)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hmac.py" in __init__
  72\.         self.outer.update(key.translate(trans_5C))

Exception Type: TypeError at /authorization_token
Exception Value: character mapping must return integer, None or unicode 
```

相同的脚本在命令行中运行良好。我什至使用python控制台手动测试了抛出错误的行，我无法重现错误，如下：

```
>>> key = "anonymous&wwvSU3ws448HR1gqiN7NxTh7"
>>> trans_5C = "".join ([chr (x ^ 0x5C) for x in xrange(256)])
>>> trans_5C
'\\]^_XYZ[TUVWPQRSLMNOHIJKDEFG@ABC|}~\x7fxyz{tuvwpqrslmnohijkdefg`abc\x1c\x1d\x1e\x1f\x18\x19\x1a\x1b\x14\x15\x16\x17\x10\x11\x12\x13\x0c\r\x0e\x0f\x08\t\n\x0b\x04\x05\x06\x07\x00\x01\x02\x03<=>?89:;45670123,-./()*+$%&\' !"#\xdc\xdd\xde\xdf\xd8\xd9\xda\xdb\xd4\xd5\xd6\xd7\xd0\xd1\xd2\xd3\xcc\xcd\xce\xcf\xc8\xc9\xca\xcb\xc4\xc5\xc6\xc7\xc0\xc1\xc2\xc3\xfc\xfd\xfe\xff\xf8\xf9\xfa\xfb\xf4\xf5\xf6\xf7\xf0\xf1\xf2\xf3\xec\xed\xee\xef\xe8\xe9\xea\xeb\xe4\xe5\xe6\xe7\xe0\xe1\xe2\xe3\x9c\x9d\x9e\x9f\x98\x99\x9a\x9b\x94\x95\x96\x97\x90\x91\x92\x93\x8c\x8d\x8e\x8f\x88\x89\x8a\x8b\x84\x85\x86\x87\x80\x81\x82\x83\xbc\xbd\xbe\xbf\xb8\xb9\xba\xbb\xb4\xb5\xb6\xb7\xb0\xb1\xb2\xb3\xac\xad\xae\xaf\xa8\xa9\xaa\xab\xa4\xa5\xa6\xa7\xa0\xa1\xa2\xa3'
>>> key.translate(trans_5C)
'=232%13)/z++*\x0f\to+/hhd\x14\x0em;-5\x12k\x12$\x084k' 
```

我在脚本中添加了两个函数，供我的 Web 应用程序使用，作为这两个步骤的接口，函数如下：

```
def requestTokenVerificationURL(user):
    if not user:
        raise Exception('requestTokenVerificationURL invoked without user argument')
    scope = 'https://mail.google.com/'
    nonce = None
    timestamp = None
    consumer_key = 'anonymous'
    consumer_secret = 'anonymous'
    consumer = OAuthEntity(consumer_key, consumer_secret)
    google_accounts_url_generator = GoogleAccountsUrlGenerator(user)
    authurl_token = GenerateRequestTokenAndAuthorizationURL(consumer, scope, nonce,
        timestamp, google_accounts_url_generator)
    return {'request_token_key': authurl_token['token'].key,
            'request_token_secret': authurl_token['token'].secret,
            'authorization_url': authurl_token['authorization_url'].strip()}

def generateAuthorizationTokenFromVerificationCode(user, verificationCode, request_key, request_secret):
    consumer_key = 'anonymous'
    consumer_secret = 'anonymous'
    consumer = OAuthEntity(consumer_key, consumer_secret)
    request_token = OAuthEntity(request_key, request_secret)
    google_accounts_url_generator = GoogleAccountsUrlGenerator(user)
    access_token = GetAccessToken(consumer, request_token, verificationCode,
        google_accounts_url_generator)
    return access_token 
```

任何命中将不胜感激，提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:37:02.817

我发现问题了！

该问题与请求令牌和秘密来回传递给客户端以及在从 GET 或 POST 请求中获取它的过程中 django 返回一个 unicode 而不是字符串 (str) 的事实有关。通过在将请求令牌/密钥传递给 xoauth.py 函数之前将其转换为字符串，解决了该问题。

希望这可以为其他人节省 3 天的测试时间！

# javascript - Jbgallery 3.0幻灯片动画是否可以从白色淡出

> ID：14590564
> 
> 赞同：1
> 
> 时间：2013-01-29T19:20:19.477
> 
> 标签：javascript, html, css

我尝试查看 jbgallery-3.0.js 以找到将动画从白色而不是黑色淡化的选项，但在任何地方都找不到。任何人都对我如何做到这一点有任何想法。

这是该网站正在使用的画廊：http: [//www.ymic3dworld.com/lightwindow2/jbgallery-3.0/index.html](http://www.ymic3dworld.com/lightwindow2/jbgallery-3.0/index.html)

谢谢，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:18:05.700

（进一步我上面的评论）

此 CSS 规则应在您的网站上修复它：

```
body.jbg-body, .jbgallery, .jbgallery .jbg-wrap {
    background-color: #fff !important;
} 
```

这应该覆盖 jbgallery-3.0.css 包含的那些 CSS 规则，这些规则使图片库区域的背景变黑。

# angularjs - angularjs 中继器可以控制表格列宽吗？

> ID：14590577
> 
> 赞同：1
> 
> 时间：2013-01-29T19:21:07.793
> 
> 标签：angularjs

我可以使用中继器来控制 angularjs 中表格列的宽度吗？ [col ng-重复](http://jsfiddle.net/Vbahole22/gTUZd/13/)

```
 <colgroup>
                            <col ng-repeat="th in eventCollection.head" ng-style="width:{{th.width}}" />
                            <!--<col span="1" style="width: 5px;">
                            <col span="1" style="width: 100px;">
                            <col span="1" style="width: 20px;">
                            <col span="1" style="width: 20px;">
                            <col span="1" style="width: 20px;">
                            <col span="1" style="width: 20px;">-->
                        </colgroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:26:25.780

只是丢掉双括号：

```
<col ng-repeat="th in eventCollection.head" span="1" ng-style="{ width: th.width }"> 
```

# macos - 别名会减慢 shell 的启动速度吗？

> ID：14590579
> 
> 赞同：0
> 
> 时间：2013-01-29T19:21:15.677
> 
> 标签：macos, bash, shell, alias, zsh

有时我的 shell (zsh) 启动时间比平时长（我打开终端，它会挂起一点，直到我可以输入命令）。

我的*.zshrc*上有一些别名（实际上，它们位于*.zshrc*所在的不同文件中`source`）。

如果您在打开 shell 的情况下进行操作，它仅在当前会话中仍然有效，`alias`所以我开始怀疑这一切是否真的会损害 shell 的启动性能（我假设它必须经过一个漫长的过程来运行所有这些启动命令）。`source``alias`

*如果确实发生了这种情况，将这些别名作为 shell 脚本并将它们放在我的PATH*中的某个位置不是更有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:23:52.970

你是对的，你的 shell 必须在`alias`启动时运行这些命令，但这不太可能导致启动时间明显延长，特别是因为你只有几个别名。

# php - 单选按钮使用 PHP 解决页面刷新时的默认检查状态

> ID：14590582
> 
> 赞同：0
> 
> 时间：2013-01-29T19:21:22.700
> 
> 标签：php, html, radio

我有一种情况，有 5 个单选按钮，打开页面时默认选中一个。这些单选按钮代表 5 个类别。每个类别中有几个子类别提交按钮。子类别按钮被隐藏，除了当前在单选按钮处选择的类别中的按钮。

我希望用户能够使用单选按钮选择一个类别，然后从其中一个子类别中进行选择，但是在页面刷新时（来自 $_POST 请求），我希望“当前”类别的单选按钮保持选中状态。就目前而言，页面通过提交子类别提交刷新，并且单选默认选中到第一个单选按钮类别。

我有 javascript 协调单选隐藏容器操作，因此表单标签必须看似覆盖所有五个单选按钮，并且所有五个单选按钮具有相同的名称，由于我的底层 javascript 无法更改。所以我不能简单地通过会话等更改每个收音机的名称和 PHP 中的代码。

实际上，我通过在您会发现已选中的单选标记中使用会话变量使类别保持在 $_POST 提交上，但我必须将每个单选和相应的子类别部分封装在其自己的表单标记中。这当然会导致 javascript 出现问题，并且单选按钮一旦按下，将无法再次按下。

有没有办法使用php解决这个问题？

你能帮忙的话，我会很高兴。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:28:08.343

我不得不在课堂上做到这一点，这有点麻烦。在页面加载时，将选中的项目值拉入变量（在本例中为 $val）。并为每个输入项内联：

```
<input type="radio" ... value="someval" <?php $x = ($val=='someval' ? 'checked="checked"' : ''); echo $x; ?> /> 
```

就像我说的那样，很麻烦，但它会检查正确的项目。唯一的事情是你的第一个项目需要更多的 if 逻辑，因为如果没有选择任何值，它将默认被检查。

```
<input type="radio" ... value="firstval" <?php $x = ((empty($val)) || ($val=='firstval')) ? 'checked="checked"' : ''; echo $x; ?> /> //removed extra bracket 
```

您可以根据需要对其进行美化，这仅用于内联。

# robot - Robot-C 减速电机 (Tetrix)

> ID：14590586
> 
> 赞同：0
> 
> 时间：2013-01-29T19:21:33.570
> 
> 标签：robot, nxt

所以我想减慢 Tetrix Robot 上的电机速度：

这是我的代码：

```
//Makes the main frame of arm move up and down  

    motor[motorE] = joystick.joy1_y2 ; 
```

如何使给出的值`joystick.joy1_y2`变慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:53:18.107

我是 FTC 团队的程序员，我们使用 RobotC，就像您正在使用的一样。如果是，您可以将 joystick.joy1_y2 除以其他值，例如：

```
motor[motorE] = (joystick.joy1_y2/2); 
```

你可以通过使用类似的东西来调整它：

```
int motorDivide = 1;

task motorTask;

task main(){

    StartTask(motorTask);

    while(true){
       getJoystickSettings(joystick);
    }

}

task motorTask(){
    while(true){

        if (joy1Btn(1) == 1){
            motorDivide+=1;
            if (motorDivide >= 3){
                motorDivide = 1;
            }
            wait1Msec(100);
        }

        motor[motorE] = (joystick.joy1_y2/motorDivide);
    }
} 
```

# sql-server - 按另一列分组的一列的最小值排序

> ID：14590587
> 
> 赞同：2
> 
> 时间：2013-01-29T19:21:36.423
> 
> 标签：sql-server, tsql, group-by, sql-order-by, ranking

这在标题中真的很难解释，但这是我的一张表：

```
CATEGORY_ID   COUNT   GROUPING
1             130     H
2              54     B
3             128     C
4              70     D
5              31     E
6              25     F
7              64     A
8              59     F
9              66     B
10             62     E
11            129     C
12             52     G
13             27     A
14            102     A
15            101     C 
```

我正在尝试编写一个查询来获取`TOP 5` `CATEGORY_ID`'s，首先按整体排序`COUNT`，然后基于该组使用该组中的其他`CATEGORY_ID`'s 而不管他们的`COUNT`. 所以，如果我想`TOP 5`根据这条规则进行上述操作（我可能解释得有些糟糕），我的结果将是：

```
CATEGORY_ID   COUNT   GROUPING
6             25      F <-- THE LOWEST COUNT OVERALL
8             59      F <-- THE NEXT LOWEST IN GROUP 'F'
13            27      A <-- THE NEXT LOWEST OVERALL
7             64      A <-- THE NEXT LOWEST IN GROUP 'A'
14            102     A <-- THE NEXT LOWEST IN GROUP 'A' 
```

我在这里和其他地方看了很多（尝试了诸如 RANK()、DENSE_RANK()、GROUPING SETS 之类的东西 - 主要是在黑暗中刺伤）并且到处都是墙壁。

编辑：另外一件事是我需要`COUNT`随机打破联系。因此，例如，如果`COUNT`是`0`所有行，则返回的第一组应该是随机的。我已经通过添加`NEWID()`到`ORDER BY`下面的两个答案中来尝试过这个，但没有运气。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:38:31.973

```
; with groups as (
  select
    grouping,
    min(count) as group_min
  from categories
  group by grouping
)
select top 5 c.category_id, c.count, c.grouping
from categories c
join groups g on c.grouping = g.grouping
order by g.group_min, c.count 
```

[**Sql 小提琴**](http://sqlfiddle.com/#!3/dbcb3/4)

编辑：

要在平局的情况下进行随机化，您可以使用`row_number()`and向每个组添加随机顺序`newid()`：

```
; with groups as (
  select
    grouping,
    row_number() over (order by newid()) as random,
    min(count) as group_min
  from categories
  group by grouping
)
select top 5
  c.category_id, c.count, c.grouping
from categories c
join groups g on c.grouping = g.grouping
order by g.group_min, g.random, c.count 
```

[**Sql 小提琴**](http://sqlfiddle.com/#!3/01997/13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:43:51.060

**更新**：使用`RANK()`而不是`ROW_NUMBER()`，因此任何并列的记录（例如当所有计数为 0 时）都将具有相同的排名。这允许 order by`NEWID()`为您提供随机结果。

```
;WITH CatByCount AS (
    SELECT 
        CATEGORY_ID, 
        COUNT,
        GROUPING,
        RANK() OVER (ORDER BY COUNT) AS ORD
    FROM theTaBle
)
SELECT TOP 5 CATEGORY_ID, COUNT, GROUPING 
FROM (
    SELECT I.CATEGORY_ID, O.ORD, I.COUNT, I.GROUPING
    FROM CatByCount O
    CROSS APPLY (
        SELECT A.CATEGORY_ID, A.COUNT, A.GROUPING
        FROM theTable A
        WHERE A.GROUPING = O.GROUPING
    ) I
) X
ORDER BY X.ORD, X.COUNT, NEWID() 
```

更新[了 Sql Fiddle](http://sqlfiddle.com/#!3/68a39/3)

# r - 在 R 中聚合超过 80K 的唯一 ID

> ID：14590596
> 
> 赞同：6
> 
> 时间：2013-01-29T19:22:03.427
> 
> 标签：r, data.table

另一个关于大数据的新手问题。我正在使用包含时间序列数据的大型数据集（3.5m 行）。我想创建一个`data.table`包含第一次出现唯一标识符的列。

df 是 a `data.table`， `df$timestamp`是 class 中的日期`POSIXct`，并且`df$id`是唯一的数字标识符。我正在使用以下代码：

```
# UPDATED - DATA KEYED
setkey(df, id)
sub_df<-df[,(min(timestamp)), by=list(id)] # Finding first timestamp for each unique ID 
```

这就是问题所在。我正在汇总超过 80k 的唯一 ID。R 窒息。我可以做些什么来优化我的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T19:53:46.700

这是一个小代码来测试哪些行为需要**很多**时间

```
require(data.table)
dt <- data.table(sample(seq(as.Date("2012-01-01"), as.Date("2013-12-31"), 
          by="days"), 1e5, replace=T), val=sample(1e4, 1e5, replace = T))

FUN1 <- function() {
    out <- dt[, min(dt$V1), by=val]  # min of entire V1 for each group i.e. wrong
}

FUN2 <- function() {
    out <- dt[, min(V1), by=val]     # min of V1 within group as intended
}

require(rbenchmark)
> benchmark(FUN1(), FUN2(), replications = 1, order="elapsed")
#     test replications elapsed relative user.self sys.self user.child sys.child
# 2 FUN2()            1   0.271    1.000     0.242    0.002          0         0
# 1 FUN1()            1  38.378  141.616    32.584    4.153          0         0 
```

很明显，它的速度非常`FUN2()`快。请记住，**在这两种情况下，都没有设置 KEY**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T19:42:40.457

正如@Arun 所提到的，真正的关键（不是双关语）是使用正确的`data.table`语法而不是`setkey`.

```
df[, min(timestamp), by=id] 
```

虽然 80k 唯一 ID 听起来很多，但使用 的`key`功能`data.table`可以使其成为可管理的前景。

```
setkey(df, id) 
```

然后像以前一样处理。对于它的价值，您通常可以使用键的令人愉快的副作用，即排序。

```
set.seed(1)
dat <- data.table(x = sample(1:10, 10), y = c('a', 'b'))

    x y
 1:  3 a
 2:  4 b
 3:  5 a
 4:  7 b
 5:  2 a
 6:  8 b
 7:  9 a
 8:  6 b
 9: 10 a
10:  1 b

setkey(dat, y, x)

     x y
 1:  2 a
 2:  3 a
 3:  5 a
 4:  9 a
 5: 10 a
 6:  1 b
 7:  4 b
 8:  6 b
 9:  7 b
10:  8 b 
```

那么这个`min`或另一个更复杂的函数只是一个子集操作：

```
dat[, .SD[1], by=y] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T19:58:53.257

[作为对Arun](https://stackoverflow.com/users/559784/arun)[答案](https://stackoverflow.com/a/14591081/697568)的补充，这里有一个与 OP（350 万行，80K ID）大小相似的数据集，表明键控/非键控聚合并没有太大的不同。所以加速可能是由于避免了`$`运营商。

```
set.seed(10)
eg <- function(x) data.table(id=sample(8e4,x,replace=TRUE),timestamp=as.POSIXct(runif(x,min=ISOdatetime(2013,1,1,0,0,0) - 60*60*24*30, max=ISOdatetime(2013,1,1,0,0,0)),origin="1970-01-01"))
df <- eg(3.5e6)
dfk <- copy(df)
setkey(dfk,id)
require(microbenchmark)
microbenchmark(
    unkeyed = df[,min(timestamp),by=id][,table(weekdays(V1))]
    ,keyed = dfk[,min(timestamp),by=id][,table(weekdays(V1))]
    ,times=5
)
#Unit: seconds
#     expr      min       lq   median       uq      max
#1   keyed 7.330195 7.381879 7.476096 7.486394 7.690694
#2 unkeyed 7.882838 7.888880 7.924962 7.927297 7.931368 
```

* * *

**从马修编辑。**

实际上以上几乎完全与 type 有关`POSIXct`。

```
> system.time(dfk[,min(timestamp),by=id])
   user  system elapsed 
   8.71    0.02    8.72 
> dfk[,timestamp:=as.double(timestamp)]  # discard POSIXct type to demonstrate
> system.time(dfk[,min(timestamp),by=id])
   user  system elapsed 
   0.14    0.02    0.15     # that's more like normal data.table speed 
```

恢复到 POSIXct 并使用 Rprof 显示它在`min()`该类型内部的 97%（即与 无关`data.table`）：

```
$by.total
                total.time total.pct self.time self.pct
system.time           8.70    100.00      0.00     0.00
[.data.table          8.64     99.31      0.12     1.38
[                     8.64     99.31      0.00     0.00
min                   8.46     97.24      0.46     5.29
Summary.POSIXct       8.00     91.95      0.86     9.89
do.call               5.86     67.36      0.26     2.99
check_tzones          5.46     62.76      0.20     2.30
unique                5.26     60.46      2.04    23.45
sapply                3.74     42.99      0.46     5.29
simplify2array        2.38     27.36      0.16     1.84
NextMethod            1.28     14.71      1.28    14.71
unique.default        1.10     12.64      0.92    10.57
lapply                1.10     12.64      0.76     8.74
unlist                0.60      6.90      0.28     3.22
FUN                   0.24      2.76      0.24     2.76
match.fun             0.22      2.53      0.22     2.53
is.factor             0.18      2.07      0.18     2.07
parent.frame          0.14      1.61      0.14     1.61
gc                    0.06      0.69      0.06     0.69
duplist               0.04      0.46      0.04     0.46
[.POSIXct             0.02      0.23      0.02     0.23 
```

注意 的对象大小`dfk`：

```
> object.size(dfk)
40.1 Mb 
```

`data.table`对于这个小尺寸，什么都不应该花 7 秒！它需要大 100 倍（4GB），并且没有缺陷`j`，*然后*您才能看到 keyed by 和 ad hoc by 之间的区别。

**蓝色魔导师编辑：**

考虑到 Matthew Dowle 的回答，键控/非键控命令之间存在差异。

```
df <- eg(3.5e6)
df[,timestamp := as.double(timestamp)]
dfk <- copy(df)
setkey(dfk,id)
require(microbenchmark)
microbenchmark(
    unkeyed = df[,min(timestamp),by=id][,table(weekdays(as.POSIXct(V1,origin="1970-01-01")))]
    ,keyed = dfk[,min(timestamp),by=id][,table(weekdays(as.POSIXct(V1,origin="1970-01-01")))]
    ,times=10
)
#Unit: milliseconds
#     expr      min       lq   median       uq       max
#1   keyed 340.3177 346.8308 348.7150 354.7337  358.1348
#2 unkeyed 886.1687 888.7061 901.1527 945.6190 1036.3326 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T20:30:28.383

这是一个 data.table 版本

```
dtBy <- function(dt)
    dt[, min(timestamp), by=id] 
```

有点老派，这是一个返回每个组的最小值的函数

```
minBy <- function(x, by) {
    o <- order(x)
    by <- by[o]
    idx <- !duplicated(by)
    data.frame(by=by[idx], x=x[o][idx])
} 
```

并且对于 BlueMagister 的样本数据似乎有合理的表现

```
> system.time(res0 <- dtBy(dt))
   user  system elapsed 
 11.165   0.216  11.894 
> system.time(res1 <- minBy(dt$timestamp, dt$id))
   user  system elapsed 
  4.784   0.036   4.836 
> all.equal(res0[order(res0$id),], res1[order(res1$by),],
+           check.attributes=FALSE)
[1] TRUE 
```

* * *

**从马修编辑**（大部分）

是的，这是因为`minBy`避免`min()`了 POSIXct 类型，这是重复的非常慢的部分。这无关`data.table`。

使用`dfk`来自 Blue M 的答案：

```
dfk[,timestamp:=as.double(timestamp)]  # discard POSIXct type to demonstrate

system.time(res0 <- dtBy(dfk))
   user  system elapsed 
   0.16    0.02    0.17 
system.time(res1 <- minBy(dfk$timestamp, dfk$id))
   user  system elapsed 
   4.87    0.04    4.92 
```

现在，与 data.table 相比，老式方法看起来非常慢。所有的时间都花在`min()`了 POSIXct 类型上。请参阅编辑 Arun 的`Rprof`输出答案。

# javascript - 将json数据从servlet传递到jsp到js文件

> ID：14590598
> 
> 赞同：5
> 
> 时间：2013-01-29T19:22:07.013
> 
> 标签：javascript, json, jsp, servlets

我得到了这个创建 JSON 数据的 servlet，我想将此数据传递到一个 jsp 页面，该页面应该通过 InfoVis 工具包显示数据。

servlet.java

```
JSONObject json = new JSONObject();
    JSONArray toplevel = new JSONArray();
    JSONObject sublevel;

    try{

        json.put("id", "node" + 0);
        json.put("name", "name" + 0);

        int count = 5;
        for(int i=1; i < count; i++){
            sublevel = new JSONObject();
            sublevel.put("id", "node" + i);
            sublevel.put("name", "name" + i);
            toplevel.put(sublevel);
        }
        json.put("children", toplevel);
    } catch (JSONException jse) {

    }

    request.setAttribute("jsonString", json.toString());
    RequestDispatcher dispatcher = request.getRequestDispatcher("graph.jsp");
    dispatcher.forward(request, response); 
```

以下代码由 InfoVis Toolkit 提供，我不确定是否可以更改。或者至少我没有足够的 JS 经验来改变它。

图.jsp

```
<body onload="init('${jsonString}');"> 
```

空间树.js

```
function init(jsonString){

    var json = jsonString; 
```

本来函数调用只是

```
<body onload="init()"> 
```

但是 init() 函数对 JSON 变量进行了硬编码，这当然一点用处都没有。所以我正在寻找一种方法来使这种动态化。但是由于字符串中有引号，它现在完全搞乱了 onload=init() 函数调用..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:26:04.070

便宜又简单的方法是修改 JSP，使其输出：

```
<script>
var theData = ${jsonString};
</script>
<body onload="init(theData);"> 
```

这样做的缺点是它创建了一个全局变量，但如果你`init`以这种方式调用，`init`它已经是一个全局变量，所以船已经航行了。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:25:39.153

您不必将 JSON 作为字符串删除 - 它是有效的 JavaScript 语法：

```
<body onload='init(${jsonString})'> 
```

当它由 JSP 呈现时，最终结果——发送到浏览器的 HTML——将类似于：

```
<body onload='init({"something": "some value", "whatever": "your data looks like"})'> 
```

现在您可能想要做的唯一一件事就是对 JSON 进行 HTML 编码，因为您将其作为 HTML 属性值删除：

```
<body onload='init(${fn:escapeXml(jsonString)})'> 
```

然后，您的“init”函数可以期待一个现成的 JavaScript 对象，根本不需要调用 JSON 解析器。

# sql - 查找给定月份和所有设备代码的 sql 数据库的最后一个仪表读数

> ID：14590605
> 
> 赞同：0
> 
> 时间：2013-01-29T19:22:25.857
> 
> 标签：sql, crystal-reports

我正在寻找给定月份和所有设备代码的最后一个仪表读数，这些设备代码在字段meter_number中的值为“1”。

```
SELECT [Company_Code]
  ,[Equipment_Code]
  ,[Meter_Number]      
  ,Max([Transaction_Date]) Last_Tran     
  ,max([meter_reading]) 
FROM [Forefront].[dbo].[EC_METER_HISTORY_MC] 

where [Meter_Number] = '1' and [Transaction_Date] < '20130101'
group by [Company_Code]
  ,[Equipment_Code]
  ,[Meter_Number] 
```

给我带来了结果，但我只想要meter_reading 字段，所以我可以在水晶报告中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:36:59.360

如果您想要由 确定的最后读数，`MAX([Transaction_Date])`您可以通过仅检索一条记录并按以下顺序对记录进行排序来做到这一点`[Transaction_Date]`：

```
SELECT TOP 1
  [Meter_Reading]
FROM [Forefront].[dbo].[EC_METER_HISTORY_MC] 
WHERE [Meter_Number] = '1' AND [Transaction_Date] < '20130101'
ORDER BY [Transaction_Date] DESC 
```

由于您只返回一条记录并定义了一条`[Meter_Number]`，因此无需执行`GROUP BY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:25:44.137

```
SELECT     
  max([meter_reading]) 
FROM [Forefront].[dbo].[EC_METER_HISTORY_MC] 

where [Meter_Number] = '1' and [Transaction_Date] < '20130101'
group by [Company_Code]
  ,[Equipment_Code]
  ,[Meter_Number] 
```

# cocoa - 如何将 EKEvent 设置为在特定日期之前重复可变天数？

> ID：14590608
> 
> 赞同：0
> 
> 时间：2013-01-29T19:22:37.120
> 
> 标签：cocoa, ekeventkit

**背景信息**

我有一个包含一个`NSDate`对象的类，该对象用作`EKEvent`. 被`EKEvent`添加到日历中，有时带有一个`EKRecurrenceRule`集合，其日期比事件的实际日期早 x 天。例如，如果 dateOfEvent 是 02/01/2013 并且用户选择在 2 天前收到警报，则该事件将在 2013 年 1 月 30 日添加到日历中。

这是我如何获得前一个日期：

```
NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = ([daysPrior integerValue] * -1);
NSDate *alertDate = [[NSCalendar currentCalendar] dateByAddingComponents:components
                                                                  toDate:[myClass dateOfEvent]
                                                                 options:0]; 
```

**当前的问题**

设置为时`EKRecurrenceRule`，`EKRecurrenceFrequencyMonthly`它会从每个月的 alertDate 中选择月份中的哪一天。在上面的示例中，这一天最终是 30 日，但是 2 月没有第 30 天，并且该事件永远不会添加到 2 月。我怎样才能让它实际设置每个月的前几天，而不是基于一个特定的数字？

**失败的尝试**

我尝试在重复规则中添加负天数，希望它能够基于我设置的事件日期并向后移动，但它却将事件添加到日历上的每一天。

```
NSMutableArray *daysOfMonth = [[NSMutableArray alloc] init];
int x;
for (x = 0; x > -31; x--) {
    [daysOfMonth addObject:[NSNumber numberWithInt:x]];
}
EKRecurrenceRule *rule = [[EKRecurrenceRule alloc] initRecurrenceWithFrequency:EKRecurrenceFrequencyMonthly
                                                                      interval:1
                                                                 daysOfTheWeek:nil
                                                                daysOfTheMonth:daysOfMonth
                                                               monthsOfTheYear:nil
                                                                weeksOfTheYear:nil
                                                                 daysOfTheYear:nil
                                                                  setPositions:nil
                                                                           end:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:26:17.577

我决定使用 an`EKAlarm`并将其添加到每个事件中。

```
EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:60 * 60 * 24 * ([daysPrior integerValue] * -1)];
[newEvent addAlarm:alarm]; 
```

这样，我可以在日历上的实际日期添加事件的日期，并且仍然会提前 x 天提醒用户。

# node.js - 猫鼬钩子访问原始参数

> ID：14590609
> 
> 赞同：1
> 
> 时间：2013-01-29T19:22:44.283
> 
> 标签：node.js, mongoose

我想在 mongoose 中创建帐户时散列我的用户密码，设置一个钩子以异步散列密码并在帐户上设置 _password 属性。

```
var accountSchema = new mongoose.Schema({
    name: {type : String},
    _password : {type : String}
})

accountSchema.pre('save', true, function hook (next, done) {
    next();
    doHashPassword(done);
});

var Account = mongoose.model('Account', accountSchema);

Joe = new Account({name : "Joe", password : "secret"});

Joe.save(); 
```

如何在我的哈希函数/钩子中访问 Joe 的原始参数（{name：“Joe”，密码：“secret”}）？因为密码没有映射到私有属性（这是为了不意外地以明文设置密码）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:30:57.183

我不是 100% 确定您*可以*访问不属于架构的原始属性。

我确实知道曾经有一个选项可以启用/禁用在数据库中保存非模式属性，所以即使发送 { name: 'Joe', password: 'secret' } 这样一个选项被禁用，或者您会不小心创建并设置“密码”。自从我调查以来已经有几个版本了，所以你可能没问题。

通常，我们不使用常规的“设置”密码，而是创建一个实例方法，例如：

```
var joe = new Account({ name: 'Joe' });
joe.setPassword('secret', function() {
  joe.save();
}); 
```

这具有封装密码逻辑（而不是依赖于不太明显的钩子）并使密码管理成为显式活动的良好副作用。这样的事情可能对你有用：

```
accountSchema.methods.setPassword = function(plain, done) {
  var self = this;
  doHashPassword(plain, function(err, result) {
    self._password = result;
    if (done) done();
  });
}; 
```

mongoose 文档有关于创建实例方法的指南：

*   [http://mongoosejs.com/docs/guide.html#methods](http://mongoosejs.com/docs/guide.html#methods)

您还可以在此一般情况下添加一些糖并使其可链接，或忽略来自 setPassword() 的回调，或将 setPassword() 更改为 savePassword()，这样您就不必担心完成后的保存...等等。很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:52:23.260

您可能不想将密码以纯文本形式存储在任何地方，对吧？您可以做的是在模式上创建一个[虚拟](http://mongoosejs.com/docs/guide.html#virtuals)属性，该属性将立即散列密码并将其添加到模型中。

这是未经测试的，但我会做这样的事情：

```
var accountSchema = new mongoose.Schema({
    name: {type : String},
    _password : {type : String}
})

accountSchema.virtual('password')
    // Setting the password property will put the hashed string into _password
    .set(function(s) {
        this._password = myHashFn(s);
    })
    // If you want to have a getter, implement it here
    .get(function() {
        return "********";
    });

var Account = mongoose.model('Account', accountSchema);

Joe = new Account({name : "Joe", password : "secret"});

Joe.save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:13:56.390

我通过我的另一个问题找到了解决这个问题的方法，诺亚在其中发布了一篇关于这个主题的博文。

[http://blog.mongodb.org/post/32866457221/password-authentication-with-mongoose-part-1](http://blog.mongodb.org/post/32866457221/password-authentication-with-mongoose-part-1)

他们使用预保存挂钩。我错过了在我将Account的密码设置为明文密码的那一刻密码没有保存的点，它只存在于内存中。如果我调用 save 密码将被异步覆盖并在哈希成功后保存。

感谢大家的帮助

# spring-mvc - Spring MVC、JsonSerializer 和 i18n

> ID：14590610
> 
> 赞同：1
> 
> 时间：2013-01-29T19:22:47.250
> 
> 标签：spring-mvc, internationalization, jackson

我正在使用自定义 JsonSerializer 来生成 Spring MVC 方法的 JSON 响应。响应中的字段之一是枚举，我想返回其值的本地化描述，而不是返回 toString() 的值，因为我还返回了枚举的一些属性。这是枚举代码的一部分：

```
public enum BalanceType {
    EXTERNAL_SOURCE(BalanceCurrency.EURO),
    EXTERNAL_DESTINATION(BalanceCurrency.EURO),
    MONEY_ACCOUNT(BalanceCurrency.EURO),
    CREDIT_ACCOUNT(BalanceCurrency.CREDIT);

    private BalanceCurrency currency;

    private BalanceType(BalanceCurrency currency) {
        this.currency = currency;
    }

    public BalanceCurrency getCurrency() {
        return currency;
    }
} 
```

我正在使用这个自定义序列化程序：

```
public class BalanceTypeSerializer extends JsonSerializer<BalanceType> {

    @Override
    public void serialize(BalanceType balanceType, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException, JsonProcessingException {
        jsonGenerator.writeStartObject();
        jsonGenerator.writeStringField("value", balanceType.toString());
        jsonGenerator.writeStringField("currency", balanceType.getCurrency().toString());
        jsonGenerator.writeEndObject();
    }
} 
```

这是用作 Spring MVC 方法的返回值（在列表中）的（简化的）类：

```
public class Balance {
    private ObjectId id;
    private ObjectId userId;
    @JsonSerialize(using = BalanceTypeSerializer.class)
    private BalanceType type;
    private double balance;
    private Date lastUpdated;

    // getters and setters
} 
```

这是 Spring MVC 方法本身的简化代码：

```
@RequestMapping(value = "api/balance", method = RequestMethod.GET)
@ResponseBody
public List<Balance> getBalanceJSON(@ModelAttribute("userId") ObjectId userId, Locale locale){
    List<Balance> balanceList = balanceRepo.findByUserId(userId);
    return balanceList;
} 
```

在这个方法中，我有 spring 提供的语言环境，但是我怎样才能把这个语言环境传递给序列化器对象呢？另外，我想通过实现MessageSourceAware来访问序列化程序中的spring“MessageSource”类，但是由于这个类不是由Spring实例化的，所以我不能这样做，我也不能注入它. 拜托，你能给出一些提示，或者更好、更简单的方法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:01:23.753

在这种情况下，我可以想出几种方法来处理这个问题。一种解决方案是为您的类创建一个包装类，`Balance`该类还接受一个`Locale`对象，然后您将为其创建一个自定义序列化程序。然后，您可以手动序列化可以访问`Locale`. 不过，这是很多手工工作，所以我通常不会建议这种解决方案。

传递上下文数据的另一种方法是通过上下文服务 - 在这种情况下，`Locale`实例是您的上下文数据。例如，如果您有一个 Spring 托管 bean 可以保存`Locale`当前 Web 请求的 ，或者一个`ThreadContext`变量可以保存`Locale`. Spring 有一些为[Spring MVC](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-localeresolver)构建的辅助类来执行此操作。您也可以考虑直接使用[LocaleContextHolder](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/i18n/LocaleContextHolder.html)，具体取决于您如何确定`Locale`. 我认为这些类中的大多数都使用静态方法，因此您也可以在非 Spring 托管 bean 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-19T12:25:57.707

您可以使用来自 SerializerProvider 的 getLocale() 方法

# dart - NoSuchMethodError List.reversed 与 web_ui 和最新的 Dart SDK

> ID：14590611
> 
> 赞同：0
> 
> 时间：2013-01-29T19:22:48.017
> 
> 标签：dart, dart-webui

按照[http://www.dartlang.org/docs/tutorials/web-ui/](http://www.dartlang.org/docs/tutorials/web-ui/)上的教程，我刚刚实现了第一个示例并尝试构建。

构建命令：

```
$DART_SDK/bin/dart --package-root=packages/ packages/web_ui/dwc.dart index.html 
```

使用 SDK 版本 17072 提供堆栈跟踪

```
SEVERE index.html: exception while reading file, original message:
 AsyncError: 'NoSuchMethodError : method not found: 'reversed'
Receiver: GrowableObjectArray
Arguments: []'
Stack trace:
#0      Object._noSuchMethod (dart:core-patch:1689:3)
#1      Object.noSuchMethod (dart:core-patch:1690:25)
#2      ListProxy.reversed (package:html5lib/src/list_proxy.dart:76:33)
#3      TreeBuilder.elementInScope (package:html5lib/src/treebuilder.dart:134:36)
#4      InBodyPhase.startTagHeading (package:html5lib/parser.dart:1393:28)
#5      InBodyPhase.processStartTag (package:html5lib/parser.dart:1118:31)
#6      HtmlParser.mainLoop (package:html5lib/parser.dart:333:48)
#7      HtmlParser._parse (package:html5lib/parser.dart:214:17)
#8      HtmlParser._parse (package:html5lib/parser.dart:216:9)
#9      HtmlParser.parse (package:html5lib/parser.dart:193:11)
#10     parseHtml (packages/web_ui/src/compiler.dart:35:30)
#11     Compiler._parseHtmlFile.<anonymous closure>.<anonymous closure> (packages/web_ui/src/compiler.dart:165:28)
#12     time (packages/web_ui/src/utils.dart:38:24)
#13     Compiler._time (packages/web_ui/src/compiler.dart:297:16)
#14     Compiler._parseHtmlFile.<anonymous closure> (packages/web_ui/src/compiler.dart:164:32)
#15     _ThenFuture._sendValue (dart:async:353:24) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:12:50.913

17072 是一个相当古老的（在 Dart 年代）构建 - 当前版本（在撰写本文时）可在[http://www.dartlang.org/downloads.html](http://www.dartlang.org/downloads.html)下载是 17657，并且[这个添加了 List.reversed 的更改日志](https://codereview.chromium.org/11896013)已提交在[r17402](http://code.google.com/p/dart/source/detail?r=17402)

# iphone - PkRevealController 和 canEditRowAtIndexPath

> ID：14590616
> 
> 赞同：2
> 
> 时间：2013-01-29T19:23:06.937
> 
> 标签：iphone, ios, objective-c, xcode

我正在使用`PKRevealController`滑动条菜单，在我的前端控制器中我有一个表格视图`canEditRowAtIndexPath`，因为我实现`PKRevealController`了在滑动每个单元格停止显示时出现的删除按钮，我怎样才能让它再次工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:53:21.780

截至撰写本文时，还没有已知的方法（至少对我而言）可以在我的控制器端解决此问题，以便在所有可以想象的条件下正常工作。即您需要自己处理上述案件。因此，控制器将属性公开`revealPanGestureRecognizer`给您。

简单地说，当实例化控制器时，在你的选项字典中传递这个选项：

```
NSDictionary *options = @{
    PKRevealControllerRecognizesPanningOnFrontViewKey : @NO
}; 
```

这将禁用整个前视图的基于平移的显示。现在，您可以使用revealPanGestureRecognizer 并将其添加到您希望平移的任何视图中，以启用基于手势的显示。

我建议（如果使用带有可编辑单元格的基于表格的环境）您将其添加`revealPanGestureRecognizer`到您的前视图控制器的导航栏（它很可能有）：

```
[self.navigationController.navigationBar addGestureRecognizer:self.revealController.revealPanGestureRecognizer]; 
```

瞧，平移不再干扰您的表格视图。

（有关这方面的更多信息以及一些基本原理，请参阅[https://github.com/pkluz/PKRevealController/pull/76](https://github.com/pkluz/PKRevealController/pull/76)）

--

*注意：*还有另一种使用 UIGestureRecognizerDelegate 协议方法来处理此问题的方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

虽然看到 UITableView 有大约五个手势识别器并且它在全局范围内处理单元格的编辑模式可能会有点混乱......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T08:44:24.273

这适用于谁使用`PkRevealController`：

```
self.revealController.frontViewController.revealController.recognizesPanningOnFrontView = NO; 
```

这对我有用。

更新：我添加了推送显示视图控制器的代码。现在在视图控制器上只有滑动将被启用，而在其他类中则不会。

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    if ([viewController isMemberOfClass:[ViewController class]])
        self.revealController.frontViewController.revealController.recognizesPanningOnFrontView = YES;
    else
        self.revealController.frontViewController.revealController.recognizesPanningOnFrontView = NO;
} 
```

你必须推 PKRevealcontroller。因此，从该类中使用`UINavigationController`委托方法并进行检查并添加这些行。

我们可以在初始化显示控制器时使用 Option 参数，但这并没有完全解决我的目的。

# javascript - 将字符串序列化为标准 URL 编码符号

> ID：14590623
> 
> 赞同：2
> 
> 时间：2013-01-29T19:23:33.063
> 
> 标签：javascript, jquery

我需要将字符串序列化为标准的 URL 编码符号我的字符串有一些空格和括号：

```
string = "( 3.141516, 3.1415), 3,1415"; 
```

我需要在服务器端获取它作为唯一值 - var，我该怎么做才能将它作为查询字符串发送？？？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:24:21.583

根本没有任何 jQuery [`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)：.

使用 jQuery，假设您使用的是类似的东西[`$.get()`](http://api.jquery.com/jQuery.get/)：

```
$.get('http://example.com/', {foo: '( 3.141516, 3.1415), 3,1415'}, callback); 
```

jQuery 会自动为你做 URL 编码。

# dynamic-programming - 需要多少个加号才能得到一个给定的总和？

> ID：14590625
> 
> 赞同：0
> 
> 时间：2013-01-29T19:23:37.633
> 
> 标签：dynamic-programming

我在 topcoder 上做了一个问题，我遇到了一个 DP 问题（[http://goo.gl/hjeaS](http://goo.gl/hjeaS)）

这应该有一个有效的 dp 解决方案，但我被卡住了。我拿了一个数组 res[i][j][k] 来存储子问题，但我无法弄清楚执行情况，尤其是更精细的细节。

r[i][j][k] 将存储最小编号。在 i 和 j 之间插入加号，得到和 k。所以，我遍历 i,j & k，在 i & j 之间的每个位置插入一个加号。在遍历所有元素 i 到 j（对于特定的总和，k）后，将获得最小值。不过，我不确定数组的初始值以及限制应该是什么。有没有更有效的解决方案？（我的似乎是 O(n³k)）

PS我知道还有另一个类似的问题，但没有一个答案真正解释了该问题的 dp 解决方案背后的逻辑/代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:27:57.527

我认为 2d 数组足以解决这个问题，因为你只需要插入一个加号，没有括号或优先级，所以只需使用 res[i][j] 来记录数据。

令 res[i][j] 表示最小编号。为前 i 个字符插入加号，得到总和 j。因此，整个时间复杂度将为 O(n^2*k)

# java - 将“重复”记录插入 Access 数据库

> ID：14590629
> 
> 赞同：1
> 
> 时间：2013-01-29T19:24:08.710
> 
> 标签：java, ms-access, jackcess

**问题：**我正在使用 jackcess 创建和插入记录到表中。我正在尝试将重复记录插入到表中，但我做不到。

有没有一种方法可以捕获尝试添加的重复条目，如果是，则将额外的字符串连接到 PK 并使其唯一。在查询中检索操作时？

我目前使用以下代码插入数据库。

```
 private static Database createDatabase(String databaseName) throws IOException {
        return Database.create(new File(databaseName));
    }

    private static TableBuilder createTable(String tableName) {
        return new TableBuilder(tableName);
    }

    public static void addColumn(Database database, TableBuilder tableName, String columnName, Types sqlType) throws SQLException, IOException {
        tableName.addColumn(new ColumnBuilder(columnName).setSQLType(Types.INTEGER).toColumn()).toTable(database);
    }

    public static void startDatabaseProcess() throws IOException, SQLException {
        String databaseName = "C:/Users/Alien/Documents/invited/employeedb.mdb"; // Creating an MS Access database
        Database database = createDatabase(databaseName);

        String tableName = "Employee"; // Creating table
        Table table;
        table = createTable(tableName)
          .addColumn(new ColumnBuilder("Emp_Id").setSQLType(Types.INTEGER).toColumn())
          .addColumn(new ColumnBuilder("Emp_Name").setSQLType(Types.VARCHAR).toColumn())
          .addColumn(new ColumnBuilder("Emp_Employer").setSQLType(Types.VARCHAR).toColumn())
          .toTable(database);

        table.addRow(453456, "ilakkiaselvan","google");//Inserting values into the table
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T09:39:52.457

> 有没有办法我可以捕捉到有一个重复的条目试图添加，如果是，那么将一个额外的字符串连接到 PK 并使其唯一

如果您使用主键设置表，那么如果您尝试添加主键已经存在的行，Jackcess 将引发异常。您的异常处理程序 ( `catch`) 可以调整主键并继续尝试直到插入成功。

在您的情况下，您已将 PK 定义为整数，因此“将额外的字符串连接到 PK 并使其唯一”有点麻烦，但如果您有一个字符串 PK，那么代码非常简单：

```
import java.io.File;
import com.healthmarketscience.jackcess.*;

public class jackcessTest {

    public static void main(String[] args) {
        String newEmp_Id = "GT001";   // test data
        String newEmp_Name = "Gord";  //

        boolean insertedOK = false;
        int counter = 1;
        String insertEmp_Id = newEmp_Id;
        try {
            Table table = DatabaseBuilder.open(new File("C:\\__tmp\\employeedb.mdb")).getTable("Employee");
            while (!insertedOK) {
                try {
                    table.addRow(insertEmp_Id, newEmp_Name);
                    insertedOK = true;
                    System.out.println(String.format("New record inserted as %s", insertEmp_Id));
                } catch (ConstraintViolationException e) {
                    insertEmp_Id = String.format("%s_copy%s", newEmp_Id, counter++);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

在空表上运行时，它通常会添加行：

```
Emp_Id       Emp_Name
-----------  --------
GT001        Gord 
```

如果再次运行它，它会添加带有修改键的第二条记录：

```
Emp_Id       Emp_Name
-----------  --------
GT001        Gord    
GT001_copy1  Gord 
```

...然后再次...

```
Emp_Id       Emp_Name
-----------  --------
GT001        Gord    
GT001_copy1  Gord    
GT001_copy2  Gord 
```

...等等。

# class - 在类中声明可变长度数组

> ID：14590631
> 
> 赞同：0
> 
> 时间：2013-01-29T19:24:10.137
> 
> 标签：class, variable-length-array

伙计们。这是我的一段代码：

```
class Solar_system
{
    public:

    Solar_system()
    {
        planet_no = 5;
    }

    int planet_no;
    int planet[planet_no];
}; 
```

给出的错误：无效使用非静态数据成员`Solar_system::planet_no`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:48:39.430

我假设这是在 C++ 中。

在运行时创建数组时，它应该是动态分配的。像这样：

[http://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)

因此，您将在类中创建一个指针，然后设置数组：

```
int * planet;
int planet_no;
Solar_system()
{
    planet_no = 5;
    planet = new int[planet_no];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:27:09.117

与其自己做内存管理，不如使用合适的容器。例如，[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)。

```
class Solar_system {
public:

    Solar_system()
    {
        planets_.resize(5);
    }

    std::vector<int> planets_;
}; 
```

# javascript - 使用 KineticJS 绘制有根树

> ID：14590634
> 
> 赞同：5
> 
> 时间：2013-01-29T19:24:37.917
> 
> 标签：javascript, python, kineticjs, n-ary-tree

我正在开发一个 web 应用程序，它需要动态绘制有根的 n 元树，以绘制技能之间的先决条件关系。它实际上已经这样做了，您可以[在此处查看示例](http://skillpedia.herokuapp.com/users/chris-fritz/sets/build-a-static-website)。不过，我正在尝试改进它，使用[PyMag 中列出](http://billmill.org/pymag-trees/#heading10)的算法，我必须承认，我在试图弄清楚如何使其适应我的 JavaScript 代码时有点迷失了。

**编辑：**这是[我当前](https://www.dropbox.com/s/vmn7ql9cx1bsi4f/_skillset_map.html.erb)用于绘制这些树的代码，来自 Rails ERB 部分（我会在此处粘贴代码，但有点冗长）。

对于那些检查我的代码的人来说，`gon.skills_map`是一个这种格式的数组：

*   gon.skills_map[0] 是字符串中的技能标题
*   gon.skills_map[1] 是技能的URL，这样每个节点都是可点击的
*   gon.skills_map[2] 是一个后置条件数组（我称之为先决条件的反面）数组，格式完全相同
*   gon.skills_map[3] 是先决关系的等级（影响线条粗细）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:22:09.673

您可以使用 d3.js 数据可视化库。它比手动构建树要好得多，尤其是当图形变得更复杂时。d3 使用 svg，因此您可以与图形进行丰富的交互，例如单击、悬停、拖动等。

您需要将图形转换为适当的数据结构，如下所示：

```
{
  title: 'Skill A',
  url: 'http://skilla.com',
  children: [
    {
      title: 'Skill B',
      url: 'http://skillb.com',
      rating: 3,
      children: [
        {
          title: 'Skill D',
          url: 'http://skilld.com',
          rating: 5
        }, 
        {
          title: 'Skill E',
          url: 'http://skilld.com',
          rating: 10
        }
      ]
    },
    {
      title: 'Skill C',
      url: 'http://skillc.com',
      rating: 1
    }
  ]
} 
```

这里的评级显示了对父技能的依赖程度。我在这个小提琴[http://jsfiddle.net/atrniv/y8drq/2/中用 d3 创建了一个示例技能树](http://jsfiddle.net/atrniv/y8drq/2/)

此外，如果您可以选择 d3，您可以从相同的技能依赖数据集创建多个不同的可视化。

d3 网站 - [http://d3js.org/](http://d3js.org/)

# opengl - 如何使用 OpenGL 创建球形部分？

> ID：14590636
> 
> 赞同：1
> 
> 时间：2013-01-29T19:24:46.610
> 
> 标签：opengl, grid, geometry

有人可以解释一下我可以弯曲一个网格，因此它会创建一个球体吗？

我可以设法使用`triangle_strip`；现在我需要使用 绘制球体的一部分`triangle_strip`，其大小由角度确定（如果角度为 90 度，它只会创建球体的 1/4）。我还需要能够更改两个半球的大小（以使可能仅绘制半球的 1/4，也不需要使用索引）。

我可以使用极坐标绘制一个球体，但我无法使用极坐标来满足我的要求。

# ios - 由于弃用而替换 self->isa

> ID：14590637
> 
> 赞同：6
> 
> 时间：2013-01-29T19:24:51.633
> 
> 标签：ios, objective-c, xcode, class

我刚刚安装了 Xcode 4.6，现在在我管理的旧代码中出现了新错误。

编译器抱怨“直接访问objective-c 的ISA 被弃用，取而代之的是object_setClass() 和object_getClass()”，并且项目不会构建。

所以请告诉我，是：

```
object_setClass(self, [CustomClass class]); 
```

适当替换：

```
self->isa = [CustomClass class]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T19:28:05.700

访问`isa`已经被弃用了一段时间，工具只是没有告诉你这一点。值得注意的是，至少只要标记指针存在于 obj-c 中，它就已被弃用。

是的，`object_setClass()`是适当的替代品。

也就是说，你为什么还需要这个？替换一个对象的类是非常罕见的，我能想到的唯一有效的情况是当你试图动态子类化一个类以便在不修改整个类的情况下将新行为注入到单个实例中时（当然，这是您可能不需要做的事情）。

# pandas - Pandas 数据框每第 n 行重新采样一次

> ID：14590638
> 
> 赞同：4
> 
> 时间：2013-01-29T19:24:51.583
> 
> 标签：pandas

我有一个脚本，可以将系统日志文件读入 pandas 数据帧并从中生成图表。这些图表适用于小型数据集。但是当我面对更大的数据集时，由于数据收集的时间范围更大，图表变得太拥挤而无法辨别。

我计划重新采样数据框，以便如果数据集通过一定大小，我将重新采样它，因此最终只有 SIZE_LIMIT 行数。这意味着我需要过滤数据帧，以便每个 n = actual_size/SIZE_LIMIT 行都会聚合到新数据帧中的一行。聚合可以是平均值，也可以是第 n 行。

我对熊猫并不完全精通，所以可能错过了一些明显的手段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T19:38:42.760

实际上我认为您不应该修改数据本身，而是要查看所需间隔内的数据进行绘图。该视图将是要绘制的实际数据点。

例如，对于计算机屏幕，一种简单的方法是计算区间中有多少点，以及有多少像素可用。因此，为了在 1000 像素宽度的窗口中绘制一个具有 10000 个点的数据帧，您可以使用以下语法获取一个步长为 10 的切片（对于示例来说，whole_data 将是一个一维数组）：

```
data_to_plot = whole_data[::10] 
```

这可能会产生不良影响，特别是掩盖可能从切片操作中“逃脱不可见”的短峰。另一种方法是将您的数据拆分为箱，然后为每个箱计算一个数据点（例如最大值）。由于 numpy/pandas 高效的数组操作，我觉得这些操作实际上可能很快。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T20:35:41.110

您可以使用`pandas.qcut`索引上的方法将索引分成相等的分位数。您传递给的值`qcut`可能是`actual_size/SIZE_LIMIT`.

```
In [1]: from pandas import *

In [2]: df = DataFrame({'a':range(10000)})

In [3]: df.head()

Out[3]:
   a
0  0
1  1
2  2
3  3
4  4 
```

在这里，按索引对索引进行分组会`qcut(df.index,5)`产生 5 个同样分箱的组。然后我取每组的平均值。

```
In [4]: df.groupby(qcut(df.index,5)).mean()

Out[4]:
                       a
[0, 1999.8]        999.5
(1999.8, 3999.6]  2999.5
(3999.6, 5999.4]  4999.5
(5999.4, 7999.2]  6999.5
(7999.2, 9999]    8999.5 
```

# json - 415 Spring 3.2 不支持的媒体类型

> ID：14590640
> 
> 赞同：4
> 
> 时间：2013-01-29T19:25:00.333
> 
> 标签：json, spring, jackson

`PUT`我正在尝试使用 jQuery 1.6（Jackson **2.1.1**和 Spring **3.2.0** ）通过 JSON的方法将数据插入和/或更新到数据库中。

JS代码如下。

```
 var itemsArray=[];
 var id;

function insertOrUpdate()
{
    var i=0;

    $('input[name="txtCharge[]"]').each(function()
    {
        isNaN($(this).val())||$(this).val()==''?itemsArray[i][2]='':itemsArray[i][2]=$(this).val();
        i++;
    });                

    $.ajax({
        headers: { 
            'Accept': 'application/json',
            'Content-Type': 'application/json' 
        },
        datatype:"json",
        type: "PUT",
        url: "/wagafashion/ajax/InsertZoneCharge.htm",
        data: "items=" + JSON.stringify(itemsArray)+"&zoneId="+id+"&t="+new Date().getTime(),
        success: function(response)
        {
            alert(response);
        },
        error: function(e)
        {
            alert('Error: ' + e);
        }
    });
} 
```

与 URL 映射的 Spring 控制器内部的方法如下。

```
@RequestMapping(value=("ajax/InsertZoneCharge"), method=RequestMethod.PUT, produces=MediaType.APPLICATION_JSON_VALUE)
public @ResponseBody String insertZoneCharge(@RequestBody final MultiValueMap<String, String > data, final HttpServletResponse response, HttpServletRequest request)
{
    String message="";
    try
    {
        Map<String, String> params = data.toSingleValueMap();
        if(params.get("zoneId")==null||params.get("zoneId").equals("")||params.get("items")==null||params.get("items").equals(""))
        {
            response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
        }
        else
        {
            message=zoneChargeService.insertZoneCharge(params.get("zoneId"), params.get("items"));
        }
    }
    catch (IOException ex)
    {
        message="An error occured. Data can not be saved.";
        Logger.getLogger(ZoneCharge.class.getName()).log(Level.SEVERE, null, ex);
    }

    return message;
} 
```

服务器响应问题暗示，

> 415 不支持的媒体类型

标头信息如下所示。

```
Request URL:http://localhost:8080/wagafashion/ajax/InsertZoneCharge.htm
Request Method:PUT
Status Code:415 Unsupported Media Type
Request Headersview source
Accept:application/json
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:352
Content-Type:application/json
Cookie:JSESSIONID=72AAFCC832C29D14FFA937D00D428A81
Host:localhost:8080
Origin:http://localhost:8080
Referer:http://localhost:8080/wagafashion/admin_side/ZoneCharge.htm
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
X-Requested-With:XMLHttpRequest
Request Payload
items=[[1,10,"12.35"],[2,10.5,"16.00"],[3,11,"20.00"],[4,11.5,"30.00"],[5,12,"40.00"],[6,12.5,"50.00"],[7,13,"60.00"],[8,13.5,"70.00"],[9,14,""],[10,14.5,""],[11,15,""],[12,15.5,""],[13,16,""],[14,16.5,""],[15,17,""],[16,17.5,""],[17,18,""],[18,18.5,""],[19,19,""],[20,19.5,""],[24,20,""],[25,20.5,""],[26,21,""],[41,21.5,""]]&zoneId=45&t=1359485680332
Response Headersview source
Content-Length:1048
Content-Type:text/html;charset=utf-8
Date:Tue, 29 Jan 2013 18:54:40 GMT
Server:Apache-Coyote/1.1 
```

* * *

整个`dispatcher-servlet.xml`文件如下。

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <context:component-scan base-package="controller" />
    <context:component-scan base-package="validatorbeans" />

    <mvc:annotation-driven content-negotiation-manager="contentNegotiationManager" >
        <mvc:message-converters register-defaults="false">
        <bean id="jacksonMessageConverter"
              p:supportedMediaTypes="application/json"
              class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"/>
    </mvc:message-converters>
    </mvc:annotation-driven>

    <bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
        <property name="favorPathExtension" value="false" />
        <property name="favorParameter" value="false" />
        <property name="ignoreAcceptHeader" value="false" />
        <property name="mediaTypes" >
            <value>
                atom=application/atom+xml
                html=text/html
                json=application/json
                *=*/*
            </value>
        </property>                    
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="index.htm">indexController</prop>
            </props>
        </property>
    </bean>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <bean name="indexController"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="index" />
</beans> 
```

当我删除`@RequestBody final MultiValueMap<String, String > data`一个方法参数并简单地用于`@PathVariable`接受请求参数时，它就起作用了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:43:59.877

浏览器发送的内容类型 ,`Content-Type: application/json`似乎不匹配`@RequestBody final MultiValueMap<String, String > data`。

任何一个：

*   发送`application/x-www-form-urlencoded`（在这种情况下，您可以更轻松地使用[HttpPutFormContentFilter](https://jira.springsource.org/browse/SPR-5628)代替）。

*   或者：将其更改为 JQuery、Spring MVC @RequestBody 和 JSON`@RequestBody final MyDTO data`中解释的[内容 - 使其协同工作](https://stackoverflow.com/questions/5908466/jquery-spring-mvc-requestbody-and-json-making-it-work-together/5908632#5908632)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T20:54:24.110

我有同样的问题，解决它的方法是删除@RequestBody，然后从请求中获取数据（使用来自apache commons的IOUtils）。需要注意的是，我使用接收到的数据只是为了记录 js 错误。

```
/**
 * this method logs with log4j the received js errors 
 */
@RequestMapping(value = "/jsloggerservice/{applicationName}", method = RequestMethod.POST)
public void jsLogger(HttpServletRequest request, HttpServletResponse response) {
    try {
        String message = IOUtils.toString( request.getInputStream());
        log.info("JAVASCRIPT-ERROR: " + message);
        response.getWriter().write("OK");
    } 
    catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-25T06:37:57.940

在服务器端，在 Spring 3 中，您需要：

```
<bean id = "mappingJacksonHttpMessageConverter" class = "org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" />

<!-- starting Spring MVC annotation usage，handling request and annotation pojo mapping-->
<bean class ="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" >
    <property name= "messageConverters" >
         <list>
            <ref bean= "mappingJacksonHttpMessageConverter"/>
         </list>
    </property>
</bean> 
```

Spring 4 使用`mappingJackson2HttpMessageConverter`. 如果没有`AnnotationMethodHandlerAdapter`bean 声明，您也可以使用`@RequestBody`，而通过声明它我们可以设置`mappingJackson2HttpMessageConverter`为`messageConverters`. 这是我观察到的现象得出的结论，如有错误请指正。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T19:35:32.130

我认为您的浏览器不支持您返回的任何内容。[HTTP 415](http://www.checkupdown.com/status/E415.html)的解释似乎表明了这一点。服务器在响应中作为 Content-Type 发送什么？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-09T13:24:56.230

以防万一有人遇到这个：我有两种方法

void setLevel（级别级别） void setLevel（字符串级别）

在用 @RequestBody 注释的类中，这也导致了 415。

# playframework-2.0 - 视图中表单 inputText 的默认 _showConstraints 值

> ID：14590642
> 
> 赞同：1
> 
> 时间：2013-01-29T19:25:08.027
> 
> 标签：playframework-2.0

我不想为我的每个视图的 inputText 定义 arg '_showConstraints -> false。

```
@inputText(taskForm("name"), '_showConstraints -> false ) 
```

我该怎么做才能将此值默认为 false ？

我在 ./play/src/main/scala/views/helper/Helpers.scala 中找到了一些关于这个 arg 的东西：

```
def infos(implicit lang: play.api.i18n.Lang): Seq[String] = {
  args.get('_help).map(m => Seq(m.toString)).getOrElse {
    (if (args.get('_showConstraints) match {
      case Some(false) => false
      case _ => true
    }) {
      field.constraints.map(c => play.api.i18n.Messages(c._1, c._2: _*)) ++
        field.format.map(f => play.api.i18n.Messages(f._1, f._2: _*))
    } else Nil)
  }
} 
```

我完全是 scala 的新手，我怎么能在我的项目中覆盖 Helpers.scala 的这部分代码？

（PS：我不考虑编辑 ./play/src/main/scala/views/helper/Helpers.scala 作为解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-05T12:03:21.187

创建您自己的 FieldConstructor（更多信息在这里：[http](http://www.playframework.com/documentation/2.3.x/JavaFormHelpers) ://www.playframework.com/documentation/2.3.x/JavaFormHelpers ），并指定类似的东西：

```
@if(elements.args.get('_showConstraints).map{ _ == true}.getOrElse(false)) {
    <pre class="help-block">@elements.infos(elements.lang).mkString(", ")</pre>
} 
```

现在约束只会在您指定时显示：

```
@helper.inputText(form("name"), '_showConstraints -> true) 
```

# asp.net - 从 PHP 到 vb.net；如何在 Visual Basic Asp.net 中将文本从一页传输到另一页

> ID：14590644
> 
> 赞同：0
> 
> 时间：2013-01-29T19:25:19.613
> 
> 标签：asp.net, vb.net, visual-studio-2010

所以我是一个习惯于 PHP 和 MySQL 的 Web 开发人员，现在我的公司正在完全切换到 VB.Net。我正在使用 Visual Studio 2010 进行开发。

我将如何最好地完成在不同页面上显示使用表单的 GET 方法发送的一个页面中的文本？

我想做的是：

第 1 页，有一个按钮列表，并根据我单击的按钮将名称发送到下一页。

Page 2 接收名称并在文本框或其他表单字段中显示名称。

此外，任何可以帮助我快速了解 vb.net 细节的资源。

我熟悉 Visual basic 并且以前在其中编写过代码，但从未在 .net 环境中编写过代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:38:41.450

在第一页

```
<a href="OtherPage.aspx?Parameter=myParameter" > 
```

然后在 Page_Load 中的 OtherPage.aspx 后面的代码中

```
Dim query as String = Request.QueryString("Parameter")
myLabel.Text = query 
```

在 OtherPage.aspx 的 XHTML 中，您会看到

```
<asp:Label ID="myLabel" runat="server" ></asp:Label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:38:49.243

你可以在这里阅读一些例子

[http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)

[http://www.aspdotnet-suresh.com/2012/10/query-string-in-aspnet-example-c-vbnet.html?m=1](http://www.aspdotnet-suresh.com/2012/10/query-string-in-aspnet-example-c-vbnet.html?m=1)

# objective-c - 如何选择要在我的 Cocoa 应用程序中使用的网络接口

> ID：14590647
> 
> 赞同：4
> 
> 时间：2013-01-29T19:25:26.003
> 
> 标签：objective-c, macos, cocoa

我正在尝试在不同的网络上运行测试。我可以在两个 WiFi 连接之间切换，但我需要知道如何在连接了以太网电缆的 WiFi 上运行测试。

所以基本上，我需要运行 ping 测试来检查机器上的所有网络是否正常工作。连接以太网端口后，它始终在以太网上运行 ping。我想在不同的网络之间切换。我可以在没有连接以太网的 WiFi 连接上执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:19:54.973

您将不得不使用套接字（您*可以*从 Objective-C 中做到这一点，这不像使用 NSURL 加载资源那么容易）。我记得，如果您通过要使用的接口的 IP 地址绑定到套接字，则使用该套接字意味着您正在使用该网络连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:28:28.530

您可能要考虑的另一种选择是使用系统配置框架。

您可以使用[“ `SCNetworkSetSetCurrent`”之](http://developer.apple.com/library/mac/documentation/Networking/Reference/SCNetworkConfiguration/Reference/reference.html#//apple_ref/c/func/SCNetworkSetSetCurrent)类的功能（将网络集从仅启用 WiFi 的网络更改为仅启用以太网的网络集）。

此外，如果您不打算向公众或通过应用商店发布此应用程序，您可以执行终端/UNIX 命令行操作，例如[“ `sudo ifconfig`”](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/ifconfig.8.html)`en0` ，以在测试之间向上或向下调整特定界面（例如“ ”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:13:11.313

从系统偏好设置中的网络，您可以[设置服务顺序...](http://cl.ly/image/2N3P3g2Q471C)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T03:33:03.180

您可以尝试[GCDAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)。您将需要更改与套接字的连接。在所有示例的 HTTPServer.m 文件中，您会发现：

```
// By default bind on all available interfaces, en1, wifi etc

interface = @"192.168.2.1";

// Use a default port of 0
// This will allow the kernel to automatically pick an open port for us

port = 40000; 
```

您可以将接口设置为 en0、en1 等，也可以直接使用接口的 IP 地址，如上例所示。我希望我会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-23T13:54:38.897

您需要编写一个特权工具助手，然后实现一些这样的功能

```
func setNetworkLocation(newLocation : String,reply: @escaping (String) -> Void){
    var retVal : Bool = false
    var response = ""
    var prefs : SCPreferences
    prefs = SCPreferencesCreate (nil, "Softech" as CFString, nil)!
    var sets : CFArray
    sets = SCNetworkSetCopyAll (prefs)!

    let count = CFArrayGetCount(sets)
    var newSet : SCNetworkSet? = nil
    var bFound : Bool = false
    for nIndex  in 0..<count {
     let mySet = CFArrayGetValueAtIndex (sets, nIndex)
     let key = Unmanaged<SCNetworkSet>.fromOpaque(mySet!)
     newSet = key.takeUnretainedValue()
     let name : String = SCNetworkSetGetName(newSet!)! as String
     if(name  == newLocation){
      bFound = true
      break
     }
     print("Name: \(name) cerco \(newLocation)")
    }
    if(bFound){
        print("Trovata netwok location da impostare Name: \(newLocation)")
        retVal = SCNetworkSetSetCurrent (newSet!)
        print ("SCNetworkSetSetCurrent = \(retVal) ");
        retVal = SCPreferencesCommitChanges (prefs);
        print ("SCPreferencesCommitChanges = \(retVal) ")
        response = "setNetworkLocation: SCPreferencesCommitChanges = [\(retVal)] " + newLocation
    }else{
        response = "setNetworkLocation: Not found network location named [" + newLocation + "]"
    }
    reply(response)
} 
```

从应用程序客户端使用

```
func setNetworkLocation(name: String){
    let xpcService = prepareXPC()?.remoteObjectProxyWithErrorHandler() { error -> Void in
        NSLog("XPC error: \(error)")
        } as? RemoteProcessProtocol

    xpcService?.setNetworkLocation(newLocation:name , reply: { [self]
        responseInfo in
        NSLog("\(name): FGLanSelectionHelper setNetworkLocation response => \(responseInfo)")

    })
} 
```

@IBAction func btnSetNetworkLocation(_ sender: Any) { setNetworkLocation(name: "MyOffice") }

# php - 不正确的 svg 转换与图像魔法 php

> ID：14590658
> 
> 赞同：2
> 
> 时间：2013-01-29T19:25:58.883
> 
> 标签：php, svg, imagemagick, imagick

我有转换 svg 的问题

我的 sctipn 生成 svg 图像

```
<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="802" width="744" version="1.1">
    <desc>Created with Rapha&#xEB;l</desc>
    <defs>
        <mask id="fademask" x="0" y="0" width="744" height="802">
            <image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2BgYAAAAAQAAVzN/2kAAAAASUVORK5CYII=" preserveAspectRatio="none" height="804" width="1" y="0" x="745"/>
            <image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAe0AAAGTCAIAAACK/t0dAAAKKUlEQVR4nO3YwXLbuhIEUOX9/z/nLuByKnqKJZIgMA2cs/LSBYwazXk8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9vJr9j8AB/z+/bv98euX0YUvfgzE+A7xRpRD45dAhqcQb0Q5PB6P/83+BwC4RJ0hwMsy3qjk4DdAdT+EeCPK2ZwfAKW9DfFGlLMz+3GAbFoMdX1YxhuVnG0ZfYo6FOKNKGdP5p6KToR4I8rZkP04QDblhXJOl/FGJWc3Jp5aLoZ4I8rZinGnkC4h3ohy9mE/DpBNZ6GKjmW8UcnZhEGnhO4h3ohydmDKme+mEG9EOcuzHwfIpqow2a1lvFHJWZv5ZqYBId6IchZmuJlmWIg3opxV2Y8DZNNQmGNwGW9UcpZkrJlgSog3opz1mGlGmxjijShnMfbjANkUE4aaXsYblZyVmGbGKRLijShnGUaZQUqFeCPKWYP9OEA2fYQRCpbxRiVnAYaY25UN8UaUk84Ec6/iId6IcqLZjwNkU0O4UUQZb1Rycpld7hIU4o0oJ5TB5RZxId6IchLZjwNk0z7oL7SMNyo5cYwsnUWHeCPKyWJe6WmBEG9EOUHsxwGyKR10s0wZb1RyUphU+lgsxBtRTgRjSgdLhngjyqnPfhwgm67BVQuX8UYlpzgDyiXLh3gjyqnMdHLeJiHeiHLKsh8HyKZicNJWZbxRyanJXHLGhiHeiHIKMpQctm2IN6KcauzHAbJpFhyzeRlvVHJKMY4cIMS/iXLqMIt8Sog/EeUUYT8OkE2h4CPK+EsqORWYQt4T4j8Q5UxnBHlDiL8lypnLfhwgmx7BT5TxD6nkTGT4+CchfogoZxaTx2tC/ARRzhT24wDZ1AdeUMZPU8kZz8zxTIhfJMoZzMDxFyHehShnJPtxgGxaA38o4x2p5Axj1PgixLsT5Yxhzng8hPhtRDkD2I8DZFuzLGiXEMoXzAkLHpkQh2ii/Ch7FYBschwg25rfL1YrEMpS5QR9HCDbsk+fSg5xlPFzVj41UQ5BhPhp9ioA2RZ/AFVyiKCMX7H+2YlyKE6IX7T+XsWIAGtbP8eByjSt63Y5QdsVKEiId7FLHzcuwKp2yXGgGu2ql73O0XYFihDiHe3Vx40OsJ69chyoQKPqa8fTtF2BiYR4dzv2cWMErGTHHAdm0aLusO+Z2q7AYEL8JlsfqyiHYYT4fexVALLt/kKq5DCAMn4rhyvK4V5C/G72KgDZvJOPh0oOt1HGB3DEX0Q5dCfEx7BXAcjmtfxDJYeOlPFhHPRfRDl0IcRHslcByObNfKaSw0XK+GCO+wVRDqcJ8fHsVQCyeTlfU8nhBGV8Cof+T6IcDhHis9irAGTzfv5EJYcPKeMTOfo3RDm8JcTnslcByOYVfU8lhx8o49O5gI+IcnhJiFdgrwKQzVv6KZUcnijjRbiGA0Q5fBPiddirAGTzoh6jksNDGS/GZRwmytmcEK/GXgUgm3f1DJWcbSnjBbmSk0Q5GxLiNdmrAGTzup6nkrMVZbwsF3OJKGcTQrwyexWAbN7Yq1RylqeMF+d6OhDlLEyI12evApDNS9uHSs6SlPEILqkbUc5ihHgKexWAbN7bnlRylqGMB3FVnYlyFiDEs9irAGTz6vankhNNGY/jwm4hygklxBPZqwBk8/beRSUnjjIeyrXdSJQTRIjnslcByOYFvpdKTgRlPJrLu50opzghns5eBSCbd3gElZyylPEFuMJBRDkFCfE12KsAZJPjANl8VY1gqUJZVisLcIW3E+IUJ8rT2asAZPMO30sZJ4JKHs3l3UiIE0SU57JXAcjmBb6LMk4clTyUa7uFECeUKE9krwKQzdvbnzJONJU8jgvrTIizAFGexV4FIJtXtydlnGWo5EFcVTdCnMWI8hT2KgDZvLd9KOMsSSWP4JI6EOIsTJTXZ68CkM1Le5UyzvJU8uJczyVCnE2I8srsVYD3VJbK5Ph5JhuowLfSSUKcDdmu1KSPA59SX2qS42eYZqAOX0mHCXE2Z7tSjfs4RojDQ5QXY68CkM2jeoAyDt9U8jrcxKeEODwR5UXYqwBk85x+RBmHl1TyCtzBe0IcfiDKp7NXAcjmIX1DGYe3VPK5nP5PhDh8SJRPZK8CkM0T+k/KOByiks/i3F8T4nCCKJ/CXgUgm8fzBWUcTlPJx3Piz4Q4XCTKB7NXAcjm2fyLMg5dqOQjOes/hDh0JMqHsVcBbqEYDSPHv5g5IJQPn8dDiMNtbFcG0MeBGylJA8hxcwZk2/2TR4jDALYrt9r6cIU4DCPK72OvApBt3xdSGYfBVPKbbHqsQhymEOV3sFcByLbj26iMw0QqeXfbHagQh+lEeV/2KgDZ9noVlXEoQiXvaKOjFOJQiijvxV4FINsu76EyDgWp5F1scYhCHMoS5dfZqwBkW/8lVMahOJX8osWPT4hDBFF+hb0KQLaV30BlHIKo5Kcte3BCHOKI8nPsVYAq1K9z1sxx0wDsY8GvGCEO0WxXjlqzjwPsQ44DZFvz+8VqBUJZqpzgyHg8vHy3kUoMYK8CkE1Z4ItK3p0yzhjmjD9EeUdCnGGMGn8R5V0IcUayHwfIpjXwTCW/SBlnMAPHC6L8NCHOeGaO10T5CUKcKezHAbKpD/yTSn6IMs4sJo+fiPIPCXEmMny8IcrfEuLMZT8OkE2P4D2V/AfKONMZQT4iyl8S4lRgCvmUKH8ixCnCfhwgm0LBASr5N2WcOswix4jyhxCnGOPIYZtHuRCnGvtxgGyaBWdsW8mVcQoylJy0YZQLcWoyl5y3VZQLccqyHwfIpmJwySaVXBmnMtPJVctHuRCnOANKBwtHuRCnPvtxgGy6Bn0sWcmVcSIYU7pZLMqFOClMKj0tE+VCnCD24wDZlA46W6CSK+NkMa/0Fx3lQpw4RpZbhEa5ECeR/ThANu2Du8RVcmWcUAaXGwVFuRAnl9nlXhFRLsSJZj8OkE0N4XbFK7kyTjoTzAhlo1yIswBDzCAFo1yIswb7cYBs+gjjlKrkyjjLMMoMVSTKhTgrMc2MNj3KhTiLsR8HyKaYMMHESq6Msx4zzRxTolyIsyRjzTSDo1yIsyr7cYBsGgozDavkyjgLM9xMNiDKhThrM9/Md2uUC3GWZz8OkE1VoYSbKrkyzg5MOVV0j3IhziYMOoV0jHIhzj7sxwGy6SzU0qWSK+NsxbhTzsUoF+LsxsRT0ekoF+JsyH4cIJvyQlEnKrkyzp7MPXUdinIhzraMPqV9GOVCnJ3ZjwNk02Ko7m0lV8bZnB8AAX6IciEOfgNkeBnlQhwe9uMA6dQZYjxVcmUcGr8EknxHuRAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgP/zHy+xj7Em7Wk1AAAAAElFTkSuQmCC" preserveAspectRatio="none" height="802" width="744" y="1" x="1"/>
            <image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2BgYAAAAAQAAVzN/2kAAAAASUVORK5CYII=" preserveAspectRatio="none" height="804" width="1" y="0" x="0"/>
            <image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2BgYAAAAAQAAVzN/2kAAAAASUVORK5CYII=" preserveAspectRatio="none" height="1" width="744" y="0" x="1"/>
            <image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2BgYAAAAAQAAVzN/2kAAAAASUVORK5CYII=" preserveAspectRatio="none" height="1" width="744" y="803" x="1"/>
        </mask>
    </defs>
    <g mask="url(#fademask)">
        <image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAe0AAAGTCAIAAACK/t0dAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABduSURBVHhe7dzrdt42DgXQpu//zp406TRO8sWWKELCZc9vkQI3wGPZ6Zovb29vf/kfAQIECJQV+Lts5QonQIAAgX8E5Lg5IECAQG0BOV67f6onQICAHDcDBAgQqC0gx2v3T/UECBCQ42aAAAECtQXkeO3+qZ4AAQJy3AwQIECgtoAcr90/1RMgQECOmwECBAjUFpDjtfunegIECMhxM0CAAIHaAnK8dv9UT4AAATluBggQIFBbQI7X7p/qCRAgIMfNAAECBGoLyPHa/VM9AQIE5LgZIECAQG0BOV67f6onQICAHDcDBAgQqC0gx2v3T/UECBCQ42aAAAECtQXkeO3+qZ4AAQJy3AwQIECgtoAcr90/1RMgQECOmwECBAjUFpDjtfunegIECMhxM0CAAIHaAnK8dv9UT4AAATluBggQIFBbQI7X7p/qCRAgIMfNAAECBGoLyPHa/VM9AQIE5LgZIECAQG0BOV67f6onQICAHDcDBAgQqC0gx2v3T/UECBCQ42aAAAECtQXkeO3+qZ4AAQJy3AwQIECgtoAcr90/1RMgQODL29sbhVoCX758uV6wvl83nLODkUveazmeukFb7s/BE0r2g1DtHzN15VosxzO27M6L9Kfzi/WMkxFWk5ELo71jYzl+h/KRd2S4SC/rFOhH2lfxGSNXsWsva5bjD7cy7V2S6Q9PRtjrC42cb4iDUyDHD0JtfqzQXfr95G7X5mm4ZTsjdwvzMy+R43e7l75Ov2AJ9LunZ+l9Rm6JrdIiOX5TtzrdJWl+09Bce42Ru+ZXabUcD+9W4+v03s63efgkHX6BkTtM1eRBOR7YyCHXyed54Ayd3HrgyPmA+DojcvzkRTn8+MAb5fP88HTsf9C87Tets6Mc39+r4TfqP1AfSvtn69WO5s3IyfGdd82N+l1Tmu+csJ/3Mm/m7buAHN92y1yqDyil+bY5+35vd/x/pe0tKdVu0+ZNjm8YP5fqIOK023WQ5exj5u2I2Khhk+NHRuKjZ1yqU4KjbtcpmSMPG7YjSu+fGTJvcvzsYPx43qVathtyu5Z9Xi40b2ueE4ZNjq/Nhj9QLrr9t2zC7bpq9P/1EvyiZPthk+MrE+Jerai9WtP+gl2HMmzXDb/u0HvS5PjpIXGvTpN9uKD3BbtiZdKu6L1c23XY5PiJUXGvTmCdfLTrBTvJ4F9flsGOLmw5aX8fPf3454R46Ajgfc9LI27YWtrK8UMD07L3h05+40OQv2NziB66fsL+rvL5zPTr+udnfu6Jlr/2HuQ0aQehtjzWadJ8j38yEq7WljtzfJOx4GMPfnw29j7ZCdz3+Eez0anTe+/ADbt1+lz6lMukfUoU9ECPMfM9/sfxcLWCbs7Bbef4zznpwdbf+VgPfDn+emZ6dPfO+xDxrgldmHDGiNnYuGeDFvi7yot5aNDXjVP++FY9fvP9ndGYPT5a7wsoPWa+x3+dJbcr1e36WkzLjrQ8VLbJOVVP6Y7I8Z96XbqXp6a21sPN+tLsOLVm6YNq6/ZFjrcZwuYHqXvHmjfG8RIIyPEfTZAUCQbyoxJ6NKjHKZKPynJ5Rbsjx//teNH+Lc9r0YXV21S9/qJjc6rsij2S4/+0uGLnTo1mp4frNqtu5Z3m58hZynVKjh9pq2dyCZS7Zr4Vcg1Qu2rkuI/xkkNdK8prVVtyIHYXXatl03O8Vrd2z2rt/ar0rkqdtachoPpCjZue4wHdt+V9AvlvWv4K7+tWwTdVad/oHK/SpILzf1/JmZuYubb7OuRN8QJzc9wdi5+um96Qs5U5q7qpJY1eU6KPc3O80aQ5SjqBEpc/nZqCVgWG5rhrtjowSddpaNLGtCgr/3QNzfEW0+UQPwnkuWx5KjEiuwSS93Rijidvya7JG7hPhs5mqGFg64cfeVyOu2a9J/7Z/j779t6dffx0mZs7LscfnwYFdBXIfM+7mjvXd4FZOe6mTZj7R7r8yEsndDPVGdN2eVaOp5oJxcQJpL1vcUe282SBQTnubo8a9Dvbfee7RjUx4WFz9npQjiecCSU1EMh5sRvAOsJxgSk57rIdn4k2T2p6m1amOkjCuZqS46nmQDG3CURfuej9b4PyotICcrx0+xT/pIAQf1Lfu98JjMhx923yzOv+5O4HnT3bUI3I8aBe2raKQMSti9iziqc6swn0z3H3LdvMNajHUDVo4sUjpJqB/jl+sVuW9xBIdet6kDpFHgE5nqcXKokV2BXlu/aJPa3d4wXyTELzHM8DHT9U3kCAwFCB5jk+tKuO/QeB6z/Xr++gOQS2C8jx7aQ2TC1wJYivrE2NorjiAp1z3K0rPpzKJ5BdIEnIdM7x7COgvocE1u7e2qqHjui1swTk+Kx+Oy0BAv0E2ua4r6d+w7rxRGfH4+zzG0u1VXKBDLPRNseT9155BAgQ2CUgx3dJ2qeYwPHPqONPFiNQbheBnjnu4nWZz9hzHJmTI8/EVmn39AKPD0nPHE/fdwUSIEBgm4Ac30Zpo4oCH39JPf6dVZFUzfcLyPH7zb2RAAECOwXk+E5Ne1UU+NNHt4/xit2cWXPDHHf9Zo6yUxN4UODZ2GmY4w/20quLCvx+CZ+9lkUZlf2UgBx/St57CRAgsEdAju9xtEt1gfcf4D7Gq3dzWv1yfFrHnZcAgRCBB3/8d8vxBylDRsOmNwp8Hx4jdCO5V+0R6Jbje1TsQoAAgToCcrxOr1RKgACBVwJy3FwQ+CHgjyqmoaKAHK/YNTUTIEDgh4AcNw0ECBCoLSDHa/dP9QQIEJDjZoAAAQK1BVrluH+kqj2MqidQXOCpCGqV48VnQPkECBBYEZDjK2rWECBAII+AHM/TC5UQIEBgRUCOr6hZQ4AAgTwCcjxPL1RCgACBFQE5vqJmDQECBPIIyPE8vVAJAQIEVgTk+IqaNQQIEMgjIMfz9EIlBAgQWBGQ4ytq1hAgQCCPgBzP0wuVECBAYEVAjq+oWUOAAIE8AnI8Ty9UQoAAgRUBOb6iZg0BAgTyCMjxPL1QCQECBFYE5PiKmjUECBDIIyDH8/RCJQQIEFgRkOMratYQIEAgj4Acz9MLlRAgQGBFQI6vqFlDgACBPAJyPE8vVEKAAIEVATm+omYNAQIE8gi0yvG3t7c8siohQIDAPQKtcvweMm8hQIDAS4GnPiXluIEkQIBAbQE5Xrt/qidAgIAcNwMECBCoLSDHa/dP9QQIEJDjZoAAAQK1BeR47f6pngABAnLcDBAgQKC2gByv3T/VEyBAoFuOP/Xf4ZskAgSGCzwYPt1yfPgkOT4BAgMF5PjApjsyAQKtBOR4q3Y6DAECAwXk+MCmOzIBAq0E5HirdjoMAQIDBRrm+IP/ajxwgByZAIGvAs/GTsMcN1UECBAYJSDHR7XbYQkQaCggxxs21ZEIEBglIMdHtdthCRBoKNAzx5/9N4eGY+JIBAj8WeDxwOmZ40aOAAECcwTk+JxeOykBAj0F5HjPvjoVAQJzBNrm+ON/sZozQ05KYLJAhqhpm+OTB8vZCRAYJSDHR7XbYQkQaCggxxs21ZEIEBgl0DnHM/zdatQwOSyBaQJJQqZzjk8bKeclQGCmgByf2XenJkCgj4Ac79NLJyFAYKZA8xxP8termbPl1AR6C+SJl+Y53nuMnI4AAQJfBeS4MSBAgEBtgf45nud3n9qTonoCBN4JpAqW/jlu9ggQINBbQI737q/TESDQX2BEjqf6Daj/TDkhge4C2SJlRI53HyrnI0BgtIAcH91+hydAoIHAlBzP9ntQg9FxBAIzBRKGyZQcnzlwTk2AwAQBOT6hy85IgEBngUE5nvC3oc6T5WwEOgrkjJFBOd5xqJyJAAEC/v9VzAABAgSKC8z6Hs/5O1HxEVI+gSkCaQNkVo5PGTfnJEBgkoAcn9RtZyVAoKPAuBxP+5tRx+lyJgJ9BDJHx7gc7zNWTkKAAIFvAhNzPPPPVWNJgACBswITc/yskecJEBgukPzjT44Pn0/HJ0CgvMDQHE/+07X8WDkAgUYC+eNiaI43mjFHIUBgusDcHM//M3b6bDo/gQQCJYJibo4nmBAlECBAYIOAHN+AaAsCBAg8KDA6x0v8xvTgcHg1geECVSJidI4Pn1HHJ0Cgh8D0HK/y87bHtDkFgUIChcJheo4XmiqlEiBA4KWAHP+r0E9dQ0yAwD0CtWJBjt8zFd5CgACBKAE5/o9srZ+9UbNgXwIEvgmUCwQ5bnIJECBQW0CO/9u/cj+Ba8+d6glkFagYBXI86zSpiwABAscE5PgPp4o/h4912VMECBwSKBoCcvxQdz1EgACBtAJy/KfWFP1pnHa8FEagkEDd6y/HC42ZUgkQIPBCQI7/ilL3Z7IBJ0BgWaD0xZfjy323kAABAikE5PiLNpT+yZxirBRBoJRA9Ssvx0uNm2IJECDwm4Acfz0U1X8+G3UCBA4KNLjscvxgrz1GgACBpAJy/I+NafBTOunQKYtAGoEe11yOfzRQPXqc5soohEAugTYXXI7nGizVECBA4KyAHP9ErM1P7LOT4XkCvQU6XW053ntWnY4Agf4CcvzzHnf6uf35aT1BYIBAs0stxw/NbLOuHzqzhwg0Feh3neV401F1LAIExgjI8aOt7vcz/OjJPUegkUDLiyzHG02ooxAgMFJAjp9oe8uf5CfO71ECxQW6XmE5fm4wu87BOQVPEygo0PjyyvGC86hkAgQIvBOQ46fHofFP9dMWFhAoItD72srxlTHsPRMrItYQSCzQ/sLK8cTTpzQCBAgcEJDjB5BePdL+J/yii2UEkglMuKpyfH3oJszHuo6VBAjcJSDH75L2HgIEbhcY8rElxy9N1pApuWRkMYGHBOZcTzn+0Ih5LQECBDYJyPGrkHN+5l+Vsp7AjQKjLqYc3zBZoyZmg5ctCAQLTLuScnzPQE2bmz1qdiFAYIeAHN+haA8CBNIIDPyokuPbpm/g9GyzsxGBTQIzr6Ec3zQ+37aZOUM7Be1F4ILA2Asoxy9MzaulYydps6PtCBA4LCDHD1N5kACBxAKTP6Hk+P7BnDxP+zXtSOCAwPBLJ8cPzMj5R4ZP1XkwKwisC7hucnx9ej5eabaiZO1LgMDPAnLcRBAgUFjAB9PX5snxwAk2YYG4tibgv/T9/wzI8djbIMpjfe0+WMDl+q/5cjz8Hpi2cGIvIDBbQI7P7r/TE6gp4PPofd/k+B1TbObuUPaOMQIu1C+tluM3zb7Juwnaa7oLuEq/d1iO3zf15u8+a29qKuASvWysHL913k3hrdxeRmCGgByf0WenJFBfwGfQn3oox++ebrN4t7j3tRBwcT5ooxx/YMZN5APoXllZwJX5uHty/JnpNpfPuHtrQQGX5dOmyfFPiaIeMJ1RsvZtJOCaHGmmHD+iFPWMGY2StW8LARfkYBvl+EGoqMdMapSsfYsLuBrHGyjHj1tFPWleo2TtS2CGgByf0WenJFBKwMfNqXbJ8VNcUQ+b2ihZ+xYUcB3ONk2OnxWLet7sRsnat5SAi7DQLjm+gBa1xARHydq3iIArsNYoOb7mFrXKHEfJ2je9gOFfbpEcX6aLWmiao2Ttm1jA2F9pjhy/ohe11kxHydo3pYCBv9gWOX4RMGq5yY6StW8yAaN+vSFy/Lph1A7mO0rWvmkEDPmWVsjxLYxRm5jyKFn7JhAw3ruaIMd3SUbtY9ajZO37qIDB3sgvxzdiRm1l4qNk7fuQgJHeCy/H93pG7Wbuo2Tte7uAYd5OLse3k0ZtaPqjZO1LoLiAHK/UQFFeqVtqfSVghiPmQo5HqAbu6RoE4to6WMD0BgHL8SDYwG1dhkBcW4cJmNsw2r/keJxt4M6uRCCurQMETGwA6o8t5Xgob+DmLkYgrq23CpjVrZwvNpPj0cKB+7segbi23iRgSjdBfrTNF8o3KIe+4suXL6H725zAmoBsWXNbWOV7fAEt1xK3JVc/VPNNwFjeOQhy/E7tqHe5M1Gy9l0SMJBLbOuL5Pi6XaqVbk6qdkwuxije3305fr951BvdnyhZ+x4WMISHqXY+KMd3aj6+l1v0eAsmF2D8nuq+HH9KPuq97lKUrH0/FDB4Dw6I/+7wQfzYV/vvEWN97f5OQIg/Ow6+x5/1D3y7qxWIa2shnmkGfI9n6kZALb7KA1Bt+a+Ab4Uko+B7PEkjospw06Jkx+9rtPKMgBzP04uoSty3KNnB+xqqVM2X46naEVWMWxclO3Jf45St7XI8W0ei6nH3omSH7WuQEjbcv3MmbEpsSf7lM9a39e5CPGd7fY/n7EtgVa5iIG7rrU1O2vb6Hk/bmtjCfJXH+vbaXYIn76fv8eQNiirPzYySbbevUcnfUt/j+XsUW6EP81jf4rsL8RIN9D1eok2BRbqogbjFtzYbVRroe7xKp2Lr9FUe61ttdwleq2O+x2v1K6pa9zZKtuC+hqFc0+R4uZZFFez2RsmW2tcYlGrXv8X6u0rFrsXW7G8ssb6JdxfiiZvzUWm+x4s2LrBslzkQN/HW+p64OZ+U5nu8bu9iK/dVHuubaXcJnqkbK7XI8RW1OWukefteC/EGLZbjDZoYewRRHuv73O4S/Dn7zW/29/HNoP22c9v79fTribS1U1t9j3fqZuxZfJjH+t64uxC/EfuOV8nxO5TbvEOUV2+lBK/ewZf1+7tKy7ZGHUoKRMnesq/23cL8wEt8jz+A3uCVPszLNVGIl2vZ8YLl+HErT/4kIMqrDIQEr9Kp5Trl+DKdhf8ISPPkcyDEkzdoS3n+Pr6Fce4mYiJz73Unc3c21uZ7fCPm3K18lWfrvQTP1pHQeuR4KO+szaV5kn4L8SSNuK0MOX4b9YgXifJn2yzBn/V/6u1y/Cn5zu+V5o90V4g/wp7hpXI8Qxca1iDK72yqBL9TO+G75HjCpvQpSZrf0EshfgNy8lfI8eQNKl+eKI9roQSPs621sxyv1a+q1Urz7Z0T4ttJ624ox+v2rljlonxXwyT4Lsk2+8jxNq2scRBpfrFPQvwiYMvlcrxlW7MfSpovdEiCL6ANWeL/X2VIo3MdUySd7Qexs2Kjnvc9Pqrd6Q7rw/zTlkjwT4k8IMfNwMMCovxPDZDgD49mndfL8Tq9al2pNP+lvUK89bxvPpwc3wxquysC0vyrngS/MkIz18rxmX3Pe+rJUS7B885l7srkeO7+TK1uYJoL8anDvuHccnwDoi2CBIakuQQPmp8528rxOb0uedLeUS7BSw5lvqLleL6eqOg3gZZpLsRN+i4BOb5L0j7hAm3SXIKHz8qwF8jxYQ2vf9zSaS7B6w9gxhPI8YxdUdPHAhWjXIKb6jgBOR5na+dYgUJpLsRjR2H87nJ8/AgUB0ie5hK8+HzVKF+O1+iTKsv9pUWCG9rbBOT4bdReFC6Q5Ntcgod32gt+FpDjJqKbwINpLsG7DVOR88jxIo1S5kmBm9Ncgp/sj8d3CsjxnZr2yiZwQ5pL8GxNH1iPHB/Y9HFHDkpzCT5ukrIeWI5n7Yy6dgtsTHMJvrs59rskIMcv8VlcTuBimkvwch2fULAcn9BlZ/xVYCHNJbgxSisgx9O2RmHhAgfTXIKHd8ILrgnI8Wt+VtcX+CDNJXj99o44gRwf0WaHPCLwX6CL7yNcnskjIMfz9EIlBAgQWBH4e2WRNQQIECCQRkCOp2mFQggQILAkIMeX2CwiQIBAGgE5nqYVCiFAgMCSgBxfYrOIAAECaQTkeJpWKIQAAQJLAnJ8ic0iAgQIpBGQ42laoRACBAgsCcjxJTaLCBAgkEZAjqdphUIIECCwJCDHl9gsIkCAQBoBOZ6mFQohQIDAkoAcX2KziAABAmkE5HiaViiEAAECSwJyfInNIgIECKQRkONpWqEQAgQILAnI8SU2iwgQIJBGQI6naYVCCBAgsCQgx5fYLCJAgEAaATmephUKIUCAwJKAHF9is4gAAQJpBOR4mlYohAABAksCcnyJzSICBAikEZDjaVqhEAIECCwJyPElNosIECCQRkCOp2mFQggQILAkIMeX2CwiQIBAGoH/AZDrfmrjK/PAAAAAAElFTkSuQmCC" preserveAspectRatio="none" height="403" width="493" y="113" x="145"/>
    </g>
</svg> 
```

代码是正确的。

转换代码

```
$imagick = new Imagick(); 
$imagick->readImageBlob($data); 
$imagick->setImageFormat("pdf");

echo $imagick; 
```

如果我将主机与 ImageMagick 6.5.6-10 一起使用，转换就可以（左 - pdf，右 - svg） [http://clip2net.com/s/2LO2O](http://clip2net.com/s/2LO2O)

如果我使用 ImageMagick 6.8.2，非常糟糕的转换 [http://clip2net.com/s/2LO1p](http://clip2net.com/s/2LO1p)

请帮忙

# jquery - 如何在 Enter 按键上禁用 jQuery 手风琴打开？

> ID：14590661
> 
> 赞同：0
> 
> 时间：2013-01-29T19:26:00.530
> 
> 标签：jquery, jquery-ui

我有一个这样的 jQuery 手风琴：

```
<div id="accordion">
    <h3>Log Output</h3>                             
    <div id="result" class="logStyle"  />
</div> 
```

我像这样在我的javascript中初始化它（在文档准备功能中）：

```
$("#accordion").accordion({ 
    header: "h3", 
    collapsible: true, 
    active: false
}); 
```

当用户点击“Enter”时，我试图阻止我的一个项目打开。我试过删除按键：

```
$("#accordion").removeAttr("keypress"); 
```

直接处理事件：

```
$("#accordion").bind('keypress', function(e) {
    e.stopPropagation();
}}); 
```

和

```
$("#accordion").keypress(function (evt) {
    var charCode = evt.charCode || evt.keyCode;
    if (charCode  == 13) { 
        return false;
    }
}); 
```

但无论我做什么，按 Enter 键都会打开手风琴。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:30:02.380

```
$('#accordion').unbind('accordion'); 
```

更好地使用`.on()`and `.off()`，因为您也可以使用此函数委托事件。:)

[http://api.jquery.com/on/](http://api.jquery.com/on/)
[http://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:29:34.053

`$("#accordion")`尝试使用`$(document)`

# powershell - 在 VS2012 包管理器控制台中杀死进程

> ID：14590669
> 
> 赞同：8
> 
> 时间：2013-01-29T19:26:25.800
> 
> 标签：powershell, visual-studio-2012, nuget

有谁知道如何在 VS2012 包管理器控制台中终止进程。按下 Control-C 似乎不会像在标准 powershell 中那样杀死进程。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T19:58:20.790

找到了。Visual Studio 的窗口上有一个按钮。由于我的窗口配置，我没有看到它。

![包管理器控制台中的终止进程](../Images/f5670d76efb8204ba39aace7138cae51.png)

# c# - 在一个单元测试项目中运行多个单元测试

> ID：14590671
> 
> 赞同：4
> 
> 时间：2013-01-29T19:26:27.973
> 
> 标签：c#, unit-testing, visual-studio-2012, mstest

我目前正在使用 C# 和 Visual Studio 2012 开发一个项目。

我很难弄清楚为什么 VS 2012 不想运行我的所有测试。

我有一个测试项目运行 2 个单元测试中的 1 个。无论我尝试了什么，它都不想运行另一个单元测试。它没有通过测试资源管理器检测到，“未运行”测试不包含该文件。

这是一个清晰的基本框架：

**（我已经编辑了框架以包含解决方案的每个部分）**

```
Solution
    MainProject
        ProjectA.Tests (that is the project)
           UnitTestsA.cs (Actually run)
           UnitTestsB.cs (Neven run) 
```

这是第二个单元测试文件的代码：

```
using System; 
using Microsoft.VisualStudio.TestTools.UnitTesting; 
namespace MagicAdmin.Tests 
{      
    [TestClass] 
    public class UnitTest1 
    { 
        [TestMethod] 
        public void TestMethod1() 
        { } 
    } 
} 
```

我该如何解决这个问题？我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-01-23T05:12:42.517

我遇到了这个问题，但只是想出了一个解决方案。

我正在构建一个用于 DotNet 控制台应用程序的 .NET Core 库。该库有一个单独的解决方案。该库包含该库的项目、一个单元测试项目和一个展示项目。

我按照这些文章中的步骤操作：

*   [https://docs.microsoft.com/en-us/dotnet/core/tutorials/library-with-visual-studio](https://docs.microsoft.com/en-us/dotnet/core/tutorials/library-with-visual-studio)
*   [https://docs.microsoft.com/en-us/dotnet/core/tutorials/testing-library-with-visual-studio?tabs=csharp](https://docs.microsoft.com/en-us/dotnet/core/tutorials/testing-library-with-visual-studio?tabs=csharp)
*   [https://docs.microsoft.com/en-us/dotnet/core/tutorials/sumption-library-with-visual-studio?tabs=csharp](https://docs.microsoft.com/en-us/dotnet/core/tutorials/consuming-library-with-visual-studio?tabs=csharp)

我在库中添加了一些额外的库类，并确保更改了 lbirary 的包版本。我重建了库，并将其发布到 NuGET。

我在测试项目中添加了一个额外的类，并且无法让测试类中的例程运行。我已按照以下步骤操作： - 向测试项目添加了一个常规 C# 类 - 在类顶部添加了 [TestClass] - 添加了一个公共 void 方法，并在其上方添加了 [TestMethod] - 用于在测试项目中管理 NuGET 项目，并确保我更新到最新版本的库包

但是“全部运行”没有看到额外的测试。

我终于发现需要将新的测试类声明为公共的！然后下一个 Run All 在新的测试类中正确地拾取了额外的测试方法。

以下是额外测试类中必要内容的概述：

```
using System;
using UtilityLib.APIDir;

namespace UtilityLibTest
{
   [TestClass]
   public class UnitTest_NewAPI
   {
       [TestMethod]
       public void TestNewAPI()
       {
          NewAPI tester = new NewAPI();
          bool someResult = tester.DoSomething();
       }
   }
} 
```

关于 Visual Studio 项目的其他评论：

Visual Studio 存在几个问题，关闭 Visual Studio 的所有副本并重新启动可以解决问题。

当我创建我的第一个 .Net 核心库项目，将其发布到 NuGET，然后使用 NuGET 将其加载到另一个项目中时，我无法引用库中的类。我开始研究一些工具来尝试研究 NuGET 包。

但是在系统重新启动后（对于一个完全不相关的问题），我重新启动了 Visual Studio，然后我能够从我的主项目访问库类。

另一个问题来自使用 nuget 库的项目，有时在使用 nuget 更新程序集版本后，调用程序可能无法访问更新后的库中的命名空间或类。昨天在调用项目上的全部重建为我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:04:00.710

为了让 Visual Studio 识别您的单元测试，您需要重新构建单元测试项目。单元测试项目可能未设置为作为当前构建配置的一部分构建，因此在构建解决方案时未构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-27T09:56:02.673

如果您只是在单个单元测试项目中添加第二个 C# 类文件来管理您的第二组测试代码，请确保这些事情发生。

1.  **用正确的测试关键字属性装饰它，**告诉 Visual Studio 这是一个测试类、方法、示例......

> "MS 单元测试" , 测试类属性 = [TestClass] , 测试方法属性 = [TestMethod]
> 
> "xUnit" , 测试方法属性 = [事实]

2.  **确保类，方法设置为公共**

这样的事情会有所帮助 [![在此处输入图像描述](../Images/87f282d1d4bdac27bcefa4b06a11114f.png)](https://i.stack.imgur.com/CHQsm.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T02:47:42.560

我终于弄清楚了我的问题。我想大多数人和我一样遇到这个问题。根本问题是我以错误的方式添加单元测试类。尝试使用“测试”部分重新添加文件。这将使类获得对项目的依赖。否则，项目在运行测试时没有包含它。

# twitter-bootstrap - Bootstrap Datepick - 如何更改字体大小

> ID：14590672
> 
> 赞同：1
> 
> 时间：2013-01-29T19:26:44.593
> 
> 标签：twitter-bootstrap, datepicker

我正在使用 Bootstrap Datepicker，但出现的日历的字体大小比我想要的要大。它与正常显示的字体相同，但只是大一号，而且我从未指定任何大小，所以我希望它使用我在所有示例中看到的默认值。我查看了 css 文件和其他文件，但我不知道如何更改它。我用什么属性来改变字体大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:40:37.963

尝试：

```
.datepicker { font-size: 13px; } /* or whatever other font size you want */ 
```

我通过在网站上为 Bootstrap Datepicker 进行实时编辑来测试它，它似乎有效。

# c - 叉一个孩子，从控制台读取

> ID：14590683
> 
> 赞同：0
> 
> 时间：2013-01-29T19:28:03.333
> 
> 标签：c, linux, fork, alarm

分叉一个孩子并从键盘获取 int 数字长达 10 秒的 ac 程序，10 秒后停止读取并检查是否读取任何数字，如果没有读取任何数字，则终止子程序，否则它将打印读取的数字屏幕并终止，它不显示结果。

```
#include<stdio.h>
#include<stdlib.h>
#include<sys/types.h>
#include<unistd.h>
#include<signal.h>
#include<string.h>
#include<sys/wait.h>
#include<sys/errno.h>

int status,j,i=0;
pid_t son1, son2;
int string[20];
char s[5];

void handler(int signum)
{
if(i==0)
kill(son1,SIGKILL);
}

void signal_handler_1(int sig_num)
{
  printf("\nI sent the signal SIGUSR1 to my child\n");

}

main(){

    son1=fork();
     if(son1==0)
     {
        signal(SIGUSR1 , signal_handler_1);
        printf("I'm son1, my id is: %d\n", getpid());

      pause();
        printf("I'm son1 exitting: %d\n", getpid());

      exit(1);

    }
    if(son1>0){

    printf("I'm father, my id is: %d\n", getpid());
    signal(SIGALRM,handler);

         alarm(10);//how can i terminate the reading process after alarm??

               while(fgets(s,5,stdin)!=NULL)
                {
                  sscanf(s,"%d",&string[i]);
                  i++;
                }

              for(j=0;j<i;j++)
                printf("%d\n",string[j]);

              kill(son1,SIGUSR1);

              wait(&status);

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:35:43.240

父进程在为 SIGALRM 运行信号处理程序后返回到 while 循环。

另外，就像linkdd所说，请更详细地描述问题。

在您的代码中，父母向​​孩子发送 SIGKILL 并且它变得不复存在，即，由于父母被卡住，因此成为“僵尸”。父母永远不会注意到 10 秒已经过去并永远读取输入。

不是最漂亮的方式，但这将使它工作。

定义全局

```
int alarm_received = 0; 
```

编辑父信号处理程序以在警报响起时设置标志。

```
void handler(int signum)
{
    if(i==0){
        kill(son1,SIGUSR1);
    }
    alarm_received = 1;
} 
```

子信号处理程序可能是这样的。在信号处理程序中调用 printf 是不好的。

```
void signal_handler_1(int sig_num)
{
    char msg[] = "Child received SIGUSR1\n";
    write(STDOUT_FILENO, msg, sizeof(msg));
} 
```

更改 while 循环以检查信号是否已发送。所以父母不会卡住。

```
while(alarm_received == 0)
{
    fgets(s,5,stdin);
    sscanf(s,"%d",&string[i]);
    i++;
} 
```

它仍然很乱。fgets() 在收到信号后很可能需要（取决于操作系统）一个空行，因为 read() （在 fgets 内）由操作系统重新启动。输入的解析也很脆弱。

# apache - Apache 2.2 虚拟主机 + Tomcat 7 应用程序

> ID：14590686
> 
> 赞同：7
> 
> 时间：2013-01-29T19:28:08.717
> 
> 标签：apache, tomcat, tomcat7, virtualhost, ajp

我在同一台机器上安装了一台**apache 服务器**和一台**tomcat 7**服务器。apache 服务器被使用并配置为启用虚拟主机，因为它应该为多个 php 网站提供服务器。但是，我们还需要为一些 tomcat 应用程序提供服务，因此我们需要配置 ajp 连接器。

一切顺利，我已经成功配置了多个服务于 tomcat 应用程序的 apache 虚拟主机，但我只有一个问题：

**通过 apache 虚拟主机访问 java 应用程序时不会维护会话变量**。这在直接连接到 tomcat 服务器的 8080 端口时效果很好。

我可以在每个应用程序的 tomcat 管理器中看到，每次从 apache 虚拟主机刷新页面时，会话数都会增加。

Java 应用程序部署在 /webapps/testapp 文件夹中的 tomcat 中。

tomcat 服务器 xml 有一个 ajp 连接器，描述为：

```
<Connector port="8009" protocol="AJP/1.3" redirectPort="8443" 
maxThreads="300" minSpareThreads="10" enableLookups="false"
tcpNoDelay="true" tomcatAuthentication="false" URIEncoding="UTF-8" /> 
```

apache 网络服务器包含虚拟主机：

```
<VirtualHost *:80>
    ServerName testapp.com
    ServerAlias *.testapp.com
    ProxyPreserveHost on
    ProxyRequests     off
    ProxyPass / ajp://localhost:8009/testapp/
    ProxyPassReverse / ajp://localhost:8009/testapp/
</VirtualHost> 
```

所以带有tomcat的Apache代理工作正常。问题是 jsp 会话没有通过代理工作。我怎样才能让它工作？我的配置有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T13:01:05.550

所以解决方案是为 apache VHost 添加 onother 指令：

```
ProxyPassReverseCookiePath /testapp / 
```

这样 cookie 的标头就不会被损坏，并且 tomcat 会看到会话正常。

# php - 卷曲 https xml 结果在 PHP 中返回空白（布尔值 false）

> ID：14590688
> 
> 赞同：1
> 
> 时间：2013-01-29T19:28:37.923
> 
> 标签：php, xml, curl

请需要你的帮助！我使用 cURL 发送帖子，但响应为空白（布尔值 false）。如果我像按浏览器一样在浏览器上发布数据，`https://www.example.com/myaccount/transfer.php?username=usernamer&password=pass&deposit=5`则会显示以下结果：

> `1 0 success Your account has been deposited`.

当我看到浏览器源代码时，结果是：

```
<?xml version="1.0" encoding="utf-8"?>
<TransferResponse>
<version>1</version>
<result>0</result>
<resultstring>success</resultstring>
<description>Your account has been deposited</description>
</TransferResponse> 
```

让我附上我的 cURL 代码：

```
<?php

$config = array
(
"url"        => "https://www.example.com/myaccount/",
"transfer"   => "transfer.php",
"browser"    => "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16"
);

$postFields = "username=username&password=pass&deposit=5";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $config['url'] . $config['transfer']);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "/cert/GeoTrustGlobalCA.crt");
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_USERAGENT, $config['browser']);
curl_setopt($ch, CURLOPT_REFERER, $config['url']);
curl_setopt($ch, CURLOPT_HEADER, true);

$content = curl_exec($ch);

var_dump($content);
var_dump(curl_getinfo($ch));
curl_error($ch);

curl_close($ch);

echo $content;

?> 
```

请帮助我在 cURL 中获得结果。我尝试了很多方法。我已经连续上网 2 天了。最后我决定在这里问。有人可以找出问题所在吗？执行以下操作：

*   命令行将`http` *（不是 https）*的结果显示为 xml。
*   命令行返回`https` *(not http)*的结果如下： **Failed: Error Number: 60\. Reason: SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败**
*   `http` *（不是 https）*的 cURL 结果只是重定向 www.example.com 的警告页面
*   `var_dump($content); and var_dump(curl_getinfo($ch));`结果是：

    boolean false array (size=26) 'url' => string ' [https://www.example.com/myaccount/transfer.php](https://www.example.com/myaccount/transfer.php)' (length=46) 'content_type' => null 'http_code' => int 0 'header_size' => int 0 'request_size' => int 0 'filetime' => int -1 'ssl_verify_result' => int 0 'redirect_count ' => int 0 'total_time' => float 1.451 'namelookup_time' => float 0 'connect_time' => float 0 'pretransfer_time' => float 0 'size_upload' => float 0 'size_download' => float 0 'speed_download' => 浮动 0 'speed_upload' => 浮动 0 'download_content_length' => 浮动 -1 'upload_content_length' => 浮动 -1 'starttransfer_time' => 浮动 0 'redirect_time' => 浮动 0 'certinfo' => 数组（大小= 0) 空'primary_ip' => string '177.70.43.10' (length=11) 'primary_port' => int 443 'local_ip' => string '192.168.11.9' (length=0) 'local_port' => int 0 'redirect_url' =>字符串''（长度=0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T04:00:31.450

将 SSL 验证设置为 false 会破坏 SSL 的目的。一个合适的解决方案是为 CURL 设置 CA 证书。

解决方案 1（更改 PHP.ini）：

1.  [从http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)下载 CA 包 (cacert.pem)
2.  将它放在您的本地系统上（例如：C:\xampp\cacert.pem）
3.  打开你的 php.ini
4.  将 curl.ca_info 选项设置为指向 cacert.pem 的位置

    ```
    Example: curl.ca_info="C:\xampp\cacert.pem" 
    ```

5.  重启阿帕奇

解决方案 2（在每次 CURL 调用之前设置选项）

1.  [从http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)下载 CA 包 (cacert.pem)
2.  将它放在您的本地系统上（例如：C:\xampp\cacert.pem）
3.  编写以下代码：

    ```
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, TRUE); 
    curl_setopt ($ch, CURLOPT_CAINFO, "pathto\cacert.pem"); 
    ```

来源：[http ://tumblr.wehavefaces.net/post/52114563111/environment-windows-xampp-curl-library](http://tumblr.wehavefaces.net/post/52114563111/environment-windows-xampp-curl-library)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:53:38.977

如果这

> SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

是你的问题，[`curl_setopt()`设置](http://php.net/manual/en/function.curl-setopt.php)

```
CURLOPT_SSL_VERIFYPEER 
```

可能适合你：

> FALSE 阻止 cURL 验证对等方的证书。可以使用 CURLOPT_CAINFO 选项指定要验证的备用证书，或者可以使用 CURLOPT_CAPATH 选项指定证书目录。

所以设置

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

可能还有

```
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); 
```

# facebook - 获取我朋友的 Facebook 活动

> ID：14590694
> 
> 赞同：1
> 
> 时间：2013-01-29T19:28:54.667
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我的结果不合逻辑。查询以下内容时我**只收到一个事件**

```
SELECT name, venue, location, start_time, eid FROM event 
WHERE eid IN (
       SELECT eid FROM event_member 
       WHERE (uid IN (SELECT uid2 FROM friend WHERE uid1 = me())  OR uid = me())
   )
AND start_time > now()
AND venue.latitude  < '-22.821757'
AND venue.latitude  > '-23.056989' 
```

**结果：**

```
{
  "data": [
    {
      "name": "Beijaço de recepção ao Papa Bento XVI", 
      "venue": {
        "street": "", 
        "city": "", 
        "state": "", 
        "country": "", 
        "latitude": -22.97444595952, 
        "longitude": -43.187243996668, 
        "id": 152289418168750
      }, 
      "location": "Praia Copacabana - Rio de Janeiro - Brasil", 
      "start_time": "2013-07-23T14:00:00", 
      "eid": 304646919571378
    }
  ]
} 
```

但是如果我删除最后一行，只设置一个纬度限制，我会得到**一堆**结果，包括一些肯定会显示在完整查询中的结果，例如：

```
{
  "name": "Wobble apresenta: RUIDO", 
  "venue": {
    "id": 245734958851552
  }, 
  "location": "00 Rio de Janeiro", 
  "start_time": "2013-02-15T22:00:00-0200", 
  "eid": 132007820298359
}, 
```

哪个场地有“纬度”：-22.978986942704

这是一个错误还是我做错了什么？

[http://itouchmap.com/latlong.html](http://itouchmap.com/latlong.html) - 如果您想使用您的帐户进行测试，请检查您的纬度

[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/) - Facebook 的 Graph API 浏览器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:44:25.013

您正在比较字符串而不是数字。

```
-22     > -23     = true
'-22'   > '-23'   = false
-22.9   < -22.8   = true
'-22.9' < '-22.8' = false 
```

# python - 如何解析文件并将一组两个成对数据传输到二维数组中

> ID：14590703
> 
> 赞同：0
> 
> 时间：2013-01-29T19:29:59.933
> 
> 标签：python, arrays, parsing, hashmap

使用以下代码解析后我有一个文件

```
with open ('cl1_vs_cl1.blast', 'rb') as csvfile:
read= csv.reader(csvfile, delimiter='\t', quotechar='|')                    
for row in read:
print row[0],row[1],row[11] 
```

它会生成一个类似的文件

```
A B = n1
A C = n2
A D = n3
B C = n4
B D = n5
...... 
```

我想将成对的数据分配到二维数组中。

```
 A B C D .....
A   n1 n2 n3
B n1    
C n2 n4
D n3 n5 ....... 
```

我怎样才能实现它？如果我还想将成对的数据保存为 perl 中的哈希值，我该怎么做？非常感谢！

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:59:20.633

对于哈希部分（在python中也称为字典）

```
from collections import defaultdict
myHash = defaultdict(defaultdict) # dictionary
for row in read:
    myHash[row[0]][row[1]] = row[11] 
```

这将允许您通过 myHash['A']['B'] 访问您的信息并取回 n1

# php - 取消链接功能不...取消链接

> ID：14590705
> 
> 赞同：0
> 
> 时间：2013-01-29T19:30:02.870
> 
> 标签：php, file, fopen, unlink

所以我有创建一个文件，将数据导出到它，让用户下载它，然后让用户删除它的功能。一切正常，除了删除它。我不知道是不是因为 unlink 函数在 $_POST 操作或其他操作中实际上不起作用，但很高兴知道。我只需将一个变量传递给标头并在加载时在标头中检查该变量的脚本，然后从那里取消链接文件，就像我之前成功完成的那样，但是文件名是动态的，并且变量是重新加载页面时丢失，标题总是这样做（我想我可以通过标题中的变量传递您看到的那些变量，但如果可能的话我宁愿不）。

我想知道这些变量是否在脚本中的这一点失去了它们的价值，但我知道这不可能，因为它们之前只使用了几行，并且没有任何东西会中断或改变它们。

我还想知道文件权限。我必须为该文件夹授予 _www 权限，以便服务器写入该文件夹，但我再次检查了权限，并且 _www （显然是服务器）具有读取、写入和执行的权限。所以不能是权限。

模具错误也不显示。

最后，我尝试删除文件名中的这些变量，并让 fopen() 使用静态名称创建一个变量，然后尝试让 unlink() 使用静态名称删除它——只是为了测试是否变量由于某种原因发生了变化或丢失——但它仍然不会取消与该静态文件名的链接。

```
if (isset($_POST['delete'])) {
    unlink("exported-" .$result2 ."-alltime-" .$today .".csv") or die("Could not delete file! Oh noes!");
    } 
```

# java - Java - 内联表达式的资源重新分配

> ID：14590706
> 
> 赞同：1
> 
> 时间：2013-01-29T19:30:05.877
> 
> 标签：java, resources, allocation

说我有以下功能

```
public static void myfunc(String filename) {
    new FileInputStream(filename);
} 
```

当我调用该函数时，是否会因为 FileInputStream 从未释放而导致资源泄漏？

以及将来的参考，有没有一种方法可以在调用函数后验证资源没有被释放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:35:48.500

是的，存在资源泄漏。大多数 IDE（例如 Eclipse）会发出警告以表明这一点。您可能应该按照以下方式执行以下操作：

```
public static void myfunc(String filename) throws IOException {
    FileInputStream stream = null;
    try {
        stream = new FileInputStream(filename);
        ...
    } finally {
        stream.close();
    }
} 
```

或者，如果您使用的是 Java 7，则可以使用[try-with-resource](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:38:42.783

是的，会有资源泄漏。FileInputStream 应始终关闭。

当 GC 运行时，`finalize()`应该调用该方法并且此时将关闭流，但您不应该依赖它。

检查是否存在资源泄漏的方法是阅读 javadoc，它对此进行了解释。基本上，所有实现 Closeable 接口的类都应该显式关闭。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T19:40:53.570

你明白这个函数没有做任何有用的事情，对吧？它不会将 FileInputStream 返回给调用者或对其进行任何操作。

通常，您会确保使用 try/finally 块关闭您的流：

```
InputStream input = null ; 

try {
    input = new FileInputStream(name);

    [read and process input]

} finally {
    if (input != null) {
        input.close();
    }
} 
```

# c# - 无法将“System.Collections.Generic.List`1[ModelA]”类型的对象转换为“ModelA”类型

> ID：14590707
> 
> 赞同：3
> 
> 时间：2013-01-29T19:30:06.727
> 
> 标签：c#, json, data-binding, asp.net-mvc-4, entity-framework-5

这个错误让我发疯。它曾经工作过。现在没有了。不知道是什么变化导致了它，我不能在不丢失很多东西的情况下回滚。

```
 Unable to cast object of type 'System.Collections.Generic.List`1[Literrater.Models.ranges]' 
 to type 'Literrater.Models.ranges'. 
```

这是模型。

```
public class Comment
{
    [Key]
    public int CommentID { get; set; }
    public int ProjectDocID { get; set; }
    public int UserID { get; set; }
    public string text { get; set; }
    public string quote { get; set; }
    public DateTime DateCreated { get; set; }

    public virtual ICollection<CommentVote> CommentVote { get; set; }
    public virtual ICollection<CommentReply> CommentReply { get; set; }
    public virtual ICollection<CommentReport> CommentReport { get; set; }
    public ProjectDoc ProjectDoc { get; set; }
    public virtual User User { get; set; }
    public ICollection<ranges> ranges { get; set; }
}
public class ranges
{
    public int ID { get; set; }
    public string start { get; set; }
    public string end { get; set; }
    public string startOffset { get; set; }
    public string endOffset { get; set; }

} 
```

引发错误的操作

```
 [HttpPost, ActionName("Create")]
    public ActionResult Create(Comment comment)
    {
        comment.DateCreated = DateTime.Now;
        comment.UserID = WebSecurity.CurrentUserId;
        db.Comments.Add(comment); //Error here
        db.SaveChanges();
        return Json(comment); 
```

Json 被发布。

```
 {"text":"",
  "ranges":
       [{
            "start":"/p[1]",
            "startOffset":160,
            "end":"/p[1]",
            "endOffset":234
       }],
   "quote":"es. Hadn't they ever heard of potpourri? Each incessant beep, made by the",
   "UserID":"6",
   "ProjectDocID":"1"
 } 
```

更新：旧工作数据库的屏幕截图 ![在此处输入图像描述](../Images/acf2b471ca4888eac10f68f3522ce3ed.png) ![在此处输入图像描述](../Images/4a2de49ff821b69902c11a1193840c0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:24:57.433

在一次替换一个文件几个小时后，我的 DAL 上下文文件似乎有这个流畅的 API 语句。

```
 modelBuilder.Entity<ranges>().HasRequired(p => p.Comment); 
```

我不知道为什么要添加它，但是将其注释掉会使错误消失。如果有人能解释一下，那就太好了。

原来我这样做了，所以我可以删除评论，这现在不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T19:04:13.933

就我而言，事实证明我的 xml 源代码中存在一对多关系：

```
 <one-to-many name="physicalLocations"
           propertyDefinintion="Defines the physical location of the department"
           typeName="POCO.BO.Location"
           nullable="false"
           dbColumn="DepartmentId" /> 
```

但在生成的 C# 文件中仍然有一个外键关系值：

```
 /// <summary>
    /// Defines the physical location of the department
    /// </summary>
    public const string F_PHYSICALLOCATIONS = "PhysicalLocations";
    [ForeignKey("PhysicalLocations")]
    public string DepartmentId { get; set; }
    private Location _physicalLocations;
    public virtual Location PhysicalLocations { get { return _physicalLocations; } set { _physicalLocations = value; } } 
```

所以它实际上是一对一而不是一对多。我这样修复它：

```
 <one-to-one name="physicalLocations"
           propertyDefinintion="Defines the physical location of the department"
           typeName="POCO.BO.Location"
           nullable="false"
           dbColumn="DepartmentId" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-09T07:19:20.913

我有完全相同的错误，最终也是同样的原因——EF 对这种关系的性质的理解不一致。

在我的例子中，我们使用基于注释的模型，数据库结构独立管理。我无意中将模型设置错误...

# 数据库结构：

*   我有一个父表和一个子表。一个父母对许多孩子。
*   子表有 ParentId 列 FKing 到父级。
*   子表没有人工PK。
*   子表具有 ParentId + Col1 + Col2 的自然 PK。

# 错误的 EF 设置：

在父级

```
 public ICollection<TriangleCell> Cells { get; set; } 
```

在儿童

```
 [Key]
    public int ParentId { get; set; }
    [ForeignKey(nameof(ParentId ))]
    public ParentTable Parent{ get; set; }

    public int Col1 { get; set; }
    public int Col2 { get; set; }
    public int ValueCol { get; set; } 
```

我相信因为只有 ParentId 被标记为`Key`，所以 EF 推断关系必须是一对一的，一切都出错了。

在模型类中标记自然键的其余部分修复了错误。

# 良好的 EF 设置：

在父级

```
 public ICollection<TriangleCell> Cells { get; set; } 
```

在儿童

```
 [Key, Column(Order = 0)]
    public int ParentId { get; set; }
    [ForeignKey(nameof(ParentId ))]
    public ParentTable Parent{ get; set; }

    [Key, Column(Order = 1)]
    public int Col1 { get; set; }
    [Key, Column(Order = 2)]
    public int Col2 { get; set; }

    public int ValueCol { get; set; } 
```

# iphone - Xcode 错误 armv7s

> ID：14590708
> 
> 赞同：0
> 
> 时间：2013-01-29T19:30:06.857
> 
> 标签：iphone, ios, xcode

这是我尝试运行应用程序时收到的错误消息；

`Undefined symbols for architecture armv7s: "_CLLocationCoordinate2DMake", referenced from: -[DodgeDirectionsViewController viewDidLoad] in DodgeDirectionsViewController.o ld: symbol(s) not found for architecture armv7s clang: error: linker command failed with exit code 1 (use -v to see invocation)`

我该如何纠正这个错误？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:31:47.120

在您的项目中包含 CoreLocation.framework :)

**编辑**：

脚步：

转到项目目标->构建阶段->单击“+”按钮并添加“CoreLocation”框架:)

# java - 安卓。替换字符串中的 * 字符

> ID：14590710
> 
> 赞同：16
> 
> 时间：2013-01-29T19:30:20.060
> 
> 标签：java, android, string, replace

我有一个字符串变量，其中包含“*”。但在使用它之前，我必须替换所有这些字符。

我试过 replaceAll 功能但没有成功：

```
text = text.replaceAll("*","");
text = text.replaceAll("*",null); 
```

有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-29T19:31:19.997

为什么不只使用[`String#replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)不带`regex`as 参数的方法：-

```
text = text.replace("*",""); 
```

* * *

相反，[`String#replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)将正则表达式作为第一个参数，并且因为`*`是正则表达式中的*元字符*，所以您需要对其进行转义，或者在字符类中使用它。所以，你这样做的方式是： -

```
text = text.replaceAll("[*]","");  // OR
text = text.replaceAll("\\*",""); 
```

但是，你真的可以在这里使用简单的*替换*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T19:31:04.303

你可以简单地使用 [**String#replace()**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

```
text = text.replace("*",""); 
```

[**String.replaceAll(regex, str)**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)将正则表达式作为第一个参数，作为`*`元字符，您应该使用反斜杠对其进行转义以将其视为普通字符。

```
text.replaceAll("\\*", "") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T19:34:55.740

**尝试这个。**

您需要转义`*`正则表达式，使用 .

```
text = text.replaceAll("\\*",""); 
```

# c# - 目录名中的 Null 在创建时不返回异常

> ID：14590711
> 
> 赞同：0
> 
> 时间：2013-01-29T19:30:22.987
> 
> 标签：c#

我刚刚遇到同事从列表中创建目录的情况。碰巧列表中的一项为空，但异常不为空。

为了满足我的好奇心，我编写了一个测试程序来模仿他在做什么。此测试程序尝试在 c:\Temp 中创建一个空目录，该目录已存在。我原以为会抛出空异常，但没有抛出异常。

这是我的测试程序。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace CreateNullDirectory
{
  class Program
  {
    static void Main(string[] args)
    {
        String DirectoryName = null;

        String FullDirectoryName = string.Format("c:\\Temp\\{0}",DirectoryName);

        Console.WriteLine(string.Format("Creating Directory {0}", FullDirectoryName));

        try
        {
            Directory.CreateDirectory(FullDirectoryName);
            Console.WriteLine(string.Format("Successfully created directory {0}", FullDirectoryName));
        }
        catch (Exception ex)
        {
            Console.WriteLine(string.Format("Error creating {0} - {1}", FullDirectoryName, ex.Message));
        }

        Console.ReadLine();

    }
  }
} 
```

这是输出：

![在此处输入图像描述](../Images/784301aa7942b256cf57db64de7653ee.png)

CreateDirectory 是否忽略了终止的 null 而我只是试图创建已经存在的 C:\Temp ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:34:38.440

您所做的只是调用`Directory.CreateDirectory("C:\Temp")`，因为在格式字符串中传递空值会返回`string.Empty`.

`CreateDirectory`如果目录不存在则创建目录，如果目录已存在则不执行任何操作。

# regex - 在 perl 中插入空格

> ID：14590721
> 
> 赞同：2
> 
> 时间：2013-01-29T19:30:59.510
> 
> 标签：regex, perl

我有一个像`600000`. 我想在每 2 位数字后插入空格。我该怎么做？结果应该是`60 00 00`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T20:05:49.650

If `12345` should become `12 34 5`, I recommend

```
s/..(?!\z)\K/ /sg 
```

The `(?!\z)` ensures that you don't add a trailing space.

* * *

If 12345 should become `1 23 45`, I recommend

```
s/(?!^)(?=(?:..)+(?!.))/ /sg 
```

`(?!^)` ensures you don't add a leading space.

This isn't very efficient. It might be more efficient to `reverse` the input, use the first solution, then `reverse` the output.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T22:09:21.757

比较了几种不同的方法。我假设您不想修改原始字符串，否则 100% 正则表达式版本可能会做得更好。

```
#!/usr/bin/perl

use strict;
use warnings;

use Benchmark ();

my $x = "1234567890";

Benchmark::cmpthese(1_000_000, {
    unpack   => sub { join(" ", unpack("(A2)*", $x)) },
    regex    => sub { (my $y = $x) =~ s/..(?!\z)\K/ /sg; $y },
    regex514 => sub { $x =~ s/..(?!\z)\K/ /sgr },
    join     => sub { join(" ", $x =~ /..?/sg) },
    }); 
```

似乎使用 unpack() 是最快的

```
 Rate     join    regex regex514   unpack
join     221828/s       --     -18%     -26%     -42%
regex    271665/s      22%       --     -10%     -29%
regex514 300933/s      36%      11%       --     -22%
unpack   383877/s      73%      41%      28%       -- 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T19:36:29.487

尝试这个：

```
$number = '600000';
$number =~ s/(\d{2})(?!$)/$1 /g;
print $number; 
```

`(\d{2})`意思是“两个数字”。`(?!$)`表示“只要字符串的结尾不是紧随其后”，因为数字后面不需要空格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T20:19:45.613

这是另一种选择：

```
use strict;
use warnings;

my $number = 600000;
my $spacedNum = join ' ', $number =~ /..?/g;
print $spacedNum; 
```

输出：

```
60 00 00 
```

# node.js - Atlassian Bamboo CI + NodeJS

> ID：14590722
> 
> 赞同：0
> 
> 时间：2013-01-29T19:31:00.570
> 
> 标签：node.js, continuous-integration, teamcity, mocha.js, bamboo

我在我的 PHP 项目中使用 Atlassian Bamboo，我发现它非常有用，NodeJS 已经存在一段时间了，我真的很惊讶 Bamboo 不支持开箱即用的 NodeJS。我读了[一篇关于在 NodeJS 中使用 Bamboo](http://iweinfuld.posterous.com/running-jasmine-tests-with-testacular-on-bamb)的文章，但它似乎只适用于 Bamboo OnDemand，我已经在我的服务器上设置了 Bamaboo，从我可以看到不支持 Jasmine 以遵循文章的步骤。

有谁知道我怎么可能将 Bamboo 与 NodeJS 一起使用？我并不介意测试框架，我更喜欢 mocha 和 vows，但如果有任何其他支持 Bamboo 的测试框架，我会使用它。

任何提示都会有所帮助！

PS：我不确定 TeamCity 是否支持 NodeJS，但从我在一些快速的谷歌搜索中发现的似乎是，有人可以为我确认吗？如果 TeamCity 支持 NodeJS，那么我将切换到 TeamCity。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T00:15:21.143

Bamboo 确实支持 node.js - 您只需要在构建服务器上安装节点（这是 Bamboo 下载和 Bamboo OnDemand 之间的唯一区别）并使用 JUnit 测试报告任务来获取 Testacular 的测试报告。

# asp.net-mvc - 将数据库中的字符串翻译成不同的语言

> ID：14590723
> 
> 赞同：0
> 
> 时间：2013-01-29T19:31:00.823
> 
> 标签：asp.net-mvc, sql-server-2008, database-schema

> **可能重复：**
> [表的语言翻译](https://stackoverflow.com/questions/13864040/language-translation-for-tables)

我正在 sql server 2008 中创建一个表。表的架构：

**评论**

```
CommentID  int
Category   nvarchar(250)
Comment    nvarchar(250) 
```

此表存储 Comments 表上所有评论的英文版本。基于这些评论，我想从数据库中提取西班牙语、法语等语言的相应评论。

实现我的目标的最佳方式是什么？我想根据我的原始评论 ID 跟踪翻译后的评论。

此外，建议另一个问题为每种语言创建一个列。但是，当我想添加一种新语言时会发生什么？

[翻译数据库中不同语言的字符串](https://stackoverflow.com/questions/13876608/translate-string-in-different-language-that-is-in-database)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:37:42.830

如果您要将原始语言的评论和英文的评论都保存在数据库中，我将创建您所说的表（CommentID，Category，Comment），其中包含英文评论，然后是另一个表（CommentTranslationID， CommentID、LanguageID、Comment) 和翻译版本，保存语言的 ISO(2) 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:34:25.357

你可以有另一个表来保存翻译版本......

**评论翻译**

```
Id
CommentId
TranslatedComment
Language 
```

当您需要提取翻译后的评论时，您会知道 commentId 和语言。

这也使得添加另一种语言变得容易。

# audio - 单人游戏声音故障

> ID：14590724
> 
> 赞同：0
> 
> 时间：2013-01-29T19:31:03.523
> 
> 标签：audio, monogame

我在使用 monogame 2.5 时遇到了一些声音问题

我的应用程序正在加载一组 png 并在渲染期间显示它。加载和渲染非常好而且很快，但是声音“非常慢”，并且充满了“故障”。似乎主线程没有足够的时间来处理声音。

深入研究代码，我发现了这种方法：

```
public override bool BeforeDraw(GameTime gameTime)        
{ 
// Update our OpenAL sound buffer pools 
soundControllerInstance.Update();            
if (IsPlayingVideo)                return false;
            return true;        
} 
```

所以，我认为这个方法必须被称为 1/33 s。

问题是我必须每 1/12 秒加载一个新图像，这个过程很耗时并且会停止主线程。

当然，我尝试使用后台工作者，但由于我需要一个`Texture2D`实例，由于`OpenGL`上下文，我必须在主线程中加载它。

我试图在后台工作人员中加载图像，并`Texture2D`在主线程中创建，但这并没有解决问题。

哦，我的声音是mp3声音，但我用wav测试过，没有结果！！:(

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T14:07:09.317

好吧，问题是我`GC.Collect()`每次更改纹理时都会调用，而且，正如我所见，这个方法会阻塞一切（包括音频！！）

我已经删除了`GC.Collect()`，现在它工作正常！！！

# c# - 如何从 CheckedListBox 中删除多个选中项

> ID：14590726
> 
> 赞同：5
> 
> 时间：2013-01-29T19:31:07.917
> 
> 标签：c#, winforms, checkedlistbox

我知道如何`checkedItem`从`checkedlistbox`. 但是现在，我想一次性删除所有选中的项目。

我试过这个：

```
foreach (var item in List_Frente.CheckedItems)
            {
                List_Frente.Items.Remove(item);
            } 
```

但是您可能知道，它给了我一个错误，说，`List that this enumerator is bound to has been modified. An enumerator can only be used if the list does not change.`我怎样才能`checkeditems`通过单击删除所有内容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T19:40:40.753

你可以这样做：

```
foreach (var item in List_Frente.CheckedItems.OfType<string>().ToList())
{
    List_Frente.Items.Remove(item);
} 
```

如果您想将所有内容写在一行中：

```
List_Frente.CheckedItems.OfType<string>().ToList().ForEach(List_Frente.Items.Remove); 
```

当然，这仅适用于您的项目属于同一类型。不过看起来还是很粗糙。

编辑说明： `ToList()`创建一个新列表，因此可以更改原始 CheckedItems 列表，因为枚举器现在枚举我们新创建的列表，而不是原始列表。唯一的`OfType<string>()`存在是因为我们需要一些东西来调用`ToList()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-30T20:11:45.000

```
while (checkedListBox.CheckedItems.Count > 0) {
   checkedListBox.Items.RemoveAt(checkedListBox.CheckedIndices[0]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T19:37:09.247

这是因为您修改了正在迭代的列表。使用 for 语句来防止这种情况发生：

```
for(var i=0; i<List_Frente.CheckedItems.Count; i++)
{
    ((IList)List_Frente.CheckedItems).Remove(List_Frente.CheckedItems[0]);
} 
```

如[本 MSDN-Article](http://msdn.microsoft.com/en-us/library/aa334839%28v=vs.71%29.aspx)中所述，显式`CheckedListBox.CheckedItemCollection`实现了`IList.Remove`-method，这意味着您必须强制转换实例才能`IList`使其工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-08T09:25:01.177

可能是这篇文章的插件。

清除所有项目。

```
checkedListBox1.Items.Clear(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T20:01:58.457

这行得通。

```
object[] items = new object[checkedListBox.Items.Count];
checkedListBox.Items.CopyTo(items, 0);
checkedListBox.Items.Clear();
checkedListBox.Items.AddRange(items); 
```

我的目标是返回一个更漂亮、更少hacky的解决方案。

# c# - 在 XQuery 表达式中将 Int 数组参数化为 SQL 变量

> ID：14590728
> 
> 赞同：1
> 
> 时间：2013-01-29T19:31:15.670
> 
> 标签：c#, sql, tsql, xquery, xquery-sql

我们将 XML 中的部分 ID（整数）存储在列中，并使用 XQuery 查找具有指定部分 ID 的项目。我正在尝试扩展代码（在 C# 中）以能够使用作为部分 ID 的整数数组。当值被硬编码时，代码在 SSMS 中运行良好。当我尝试在 XQuery 中使用 sql:variable 时，我没有得到任何结果。

```
declare @table table
(
  Sections nvarchar(200)
)

insert into @table values ('<sections><section value="1" /></sections>')
insert into @table values ('<sections><section value="2" /></sections>')

--This works
select * from @table where CONVERT(xml, Sections).exist('/sections/section[@value = (1,2)]') = 1

--This doesn't work :(
Declare @stringvalue nvarchar(50)
set @stringvalue = '(1,2)'
select * from @table where CONVERT(xml, Sections).exist('/sections/section[@value = sql:variable("@stringvalue")]') = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:23:03.783

您可以使用动态 SQL 来执行此操作，但它有点 hacky，例如：

```
create table #table 
(
  Sections nvarchar(200)
)

insert into #table values ('<sections><section value="1" /></sections>')
insert into #table values ('<sections><section value="2" /></sections>')

Declare @stringvalue nvarchar(50)
declare @sql nvarchar(max)
set @stringvalue = '(1,2)'

set @sql = 'select * from #table where CONVERT(xml, Sections).exist(''/sections/section[@value = ' + @stringvalue + ']'') = 1'
exec(@sql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:36:47.617

因为变量是类型`@stringvalue`的，所以表达式的计算结果如下：

```
.exist('/sections/section[@value = "(1,2)"]') 
```

这匹配字符串 value `"(1,2)"`，而不是实际序列。将变量声明为`xml`数据类型。当你评估它时，它应该返回一个序列而不是字符串表示。

# sql-server - ColdFusion 中的 jTDS 立即超时

> ID：14590731
> 
> 赞同：2
> 
> 时间：2013-01-29T19:31:34.097
> 
> 标签：sql-server, sql-server-2008, coldfusion, coldfusion-9, jtds

我正在尝试将我的 ColdFusion 实例设置为使用 jTDS 作为数据源，而不是使用 Macromedia 的内置驱动程序，但是当我保存数据源时出现以下错误：

```
Connection verification failed for data source: rxdsn
java.sql.SQLException: Timed out trying to establish connection
The root cause was that: java.sql.SQLException: Timed out trying to establish connection 
```

如果我使用内置驱动程序创建相同的数据源，我可以很好地连接。

我在 Windows 2008 R2 上的 ColdFusion 9 Standard 上完成了所有这些工作。这是我到目前为止所做的：

1.  将 jtds-1.3.0.jar 和 jcifs-1.3.17.jar 放入 C:\ColdFusion9\lib
2.  重新启动 ColdFusion（检查 ColdFusion sys 信息页面并验证两者都在 CF Server Java 类路径中）
3.  使用以下信息创建了一个新数据源：
    *   CF 数据源名称：rxdsn
    *   JDBC URL：jdbc:jtds:sqlserver://slavedb:1433/CFOnward1
    *   驱动类：net.sourceforge.jtds.jdbc.Driver
    *   驱动程序名称：jTDS
    *   用户名：coldfusion
    *   密码：*******

保存后我得到错误。同样，我在内置驱动程序中使用了相同的信息（服务器、数据库、用户名和密码），并且可以成功连接。

我的环境如下：

服务器 1：

*   视窗 2008 R2
*   IIS 7.5
*   ColdFusion 9 标准

服务器 2：

*   视窗 2008 R2
*   微软 SQL Server 2008 R2 标准版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T16:10:14.257

我今天遇到了同样的问题，但在花了一些时间调查后，我设法解决了它：

从您的coldfusion9/lib 文件夹中删除1.3.0 版本，并将1.2.8 版本放入其中，然后重新启动ColdFusion。（我不得不在重新启动后尝试连接大约 5 次，然后才能连接，因为它一直超时 - 这次有延迟，而不是立即）。

它失败的原因是因为 1.3 是在一个更新的主要版本的 java 上编译的，而不是一个正在运行的 CF。

# javascript - 激活路由时未执行ember模型功能

> ID：14590737
> 
> 赞同：2
> 
> 时间：2013-01-29T19:31:55.077
> 
> 标签：javascript, ember.js

我有一条我已经精简到的 ember 路线

```
App.MyRoute = Ember.Route.extend({
    model: function(params){
        console.log("model function executing");
        Ember.Object.create()
    },
    setupController: function(controller){
        console.log("setupController function executed");
    }
}); 
```

当我切换到 MyRoute 时，setupController 会被执行，但填充模型的函数永远不会执行。模型最终只是在标签`msg`中传递的对象。 `{{link myRoute msg}}`

在我们切换到该路线时，我需要加载/计算模型的某些部分。为此，我需要能够成功更新模型，或者我需要从 setupController 函数中访问链接中传递的参数。关于如何最好地实现这一目标的建议？

**编辑**

为了尝试解决这个问题，我创建了一个完整的最小示例来产生这种行为：

我的html是：

```
<html>
  <head>
    <title> This is my Page! </title> 

    <script src="js/libs/jquery-1.8.2.js"></script>
    <script src="js/libs/handlebars-1.0.rc.1.js"></script>
    <script src="js/libs/ember.js"></script>
    <script src="js/app.js"></script>
  </head>

  <body>
    <script type="text/x-handlebars">
      {{#linkTo example App.thing}}<p> go </p>{{/linkTo}}
      <div>
        {{outlet}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="index">
      <p> Initial Text </p>
    </script>

    <script type="text/x-handlebars" data-template-name="example">
      <p> After change </p>
    </script>
  </body>
</html> 
```

使用应用程序代码：

```
var App = Ember.Application.create();

App.Router.map(function() {
    this.resource("example", {path: "/example/:id"});
});

App.thing = Ember.Object.create({
    id:10,
});

App.ExampleRoute = Ember.Route.extend({
    model: function(params){
        console.log("in model function");
        return new Ember.Object.create();
    },
    setupController: function(controller){
        console.log("in setupController");
    }
}); 
```

当您单击示例路由的链接时，会打印“in setupController”，但不会打印“in model function”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:41:37.897

`linkTo``transitionTo`在幕后使用。每当我们使用`transitionTo`时，我们实际上是直接提供上下文/模型，因此`model`不会调用路由上的方法。在上面的示例中，您有`{{#linkTo example App.thing}}`. 由于我们已经知道上下文是`App.thing`没有理由触发该`model`方法的。我们只`model`在不知道模型是什么时才调用路由。发生这种情况的主要时间是通过 URL 更改输入时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:41:17.673

它似乎对我有用，绝对没有理由不应该工作：http: [//jsfiddle.net/SXTME/](http://jsfiddle.net/SXTME/)

您确定您使用的是 EMBER 1.0.0-PRE.4，而不是 EMBER 1.0.0-PRE.3？

```
App.MyRoute = Ember.Route.extend({
    model: function(params){
        console.log("model function executing");
        Ember.Object.create()
    },
    setupController: function(controller){
        console.log("setupController function executed");
    }
}); 
```

# javascript - 在 TinyMCE 中的特定键后替换单词

> ID：14590739
> 
> 赞同：1
> 
> 时间：2013-01-29T19:32:11.320
> 
> 标签：javascript, tinymce

晚上好，

我有一个词，在@ - 标签之后输入：

*你好，@Anto*

我如何将 @ 之后的所有内容替换为我自己的文本？

也许你知道，如何使用 jQuery Autocomplete 解决我的问题：

[带有标签的jQuery远程自动完成](https://stackoverflow.com/questions/14509278/jquery-remote-autocomplete-with-hashtags)

谢谢

更新：

现在我在当前插入符号位置之后插入文本，但我不能用它创建链接：

```
content = (this.name).substring(state.length-1,(this.name).length);
                                            ed.selection.setContent(content + "|" + this.param); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:29:35.737

看起来您将需要使用 execCommand `mceInsertContent`。在此处查看可能命令的完整列表：[http ://www.tinymce.com/wiki.php/Configuration:valid_children](http://www.tinymce.com/wiki.php/Configuration:valid_children)

# ruby - 如何在 Cucumber 中标记步骤失败？

> ID：14590740
> 
> 赞同：1
> 
> 时间：2013-01-29T19:32:12.243
> 
> 标签：ruby, cucumber

我正在检查日志文件中是否有任何错误消息。如果在日志文件中发现错误消息，那么我使用 'raise' 语句打印出创建并继续检查下一个日志文件。在日志文件中发现错误消息时，Cucumber 仍然指示该步骤已通过。我想知道如何标记一个步骤失败，所以它会在运行结束时打印它（例如：2 个场景（1 个失败，1 个通过）4 个步骤（1 个失败，3 个通过））。任何帮助，将不胜感激！

```
 Scenario: Running rake test
                   Given the system is installed
                   Then I run the rake test

        logs_all = s.sudo "egrep -i '#{error_message}' #{log_file}"
        logs_all.each do |hostname, logs|
           unless logs.empty?
            puts line, "Unhappy logs on #{hostname}", line, logs
            happy = false
           end

          begin
            raise "Unhappy logs found! in #{log_file}" unless happy
          rescue StandardError => error
            puts error.message
          end

        end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T11:31:28.740

首先，我建议阅读[http://pragprog.com/book/hwcuc/the-cucumber-book](http://pragprog.com/book/hwcuc/the-cucumber-book)或至少[http://pragprog.com/book/achbd/the-rspec-book](http://pragprog.com/book/achbd/the-rspec-book)，其中有完整的 Cucumber 部分。

黄瓜测试必须通过，不能失败。如果一个失败，另一个可能会被跳过，这不是我们在运行测试套件时想要的。但是，如果日志不为空，您可以检查某个步骤是否会引发错误。

一个场景可能是：

```
Feature: Logs
Scenario: Checking non-empty log files
    Given there are logged errors
    When I check if logs are empty
    Then an error should be raised 
```

运行`cucumber`，它会提示必要的步骤：

```
You can implement step definitions for undefined steps with these snippets:

Given /^there are logged errors$/ do
  pending # express the regexp above with the code you wish you had
end

When /^I check if logs are empty$/ do
  pending # express the regexp above with the code you wish you had
end

Then /^an error should be raised$/ do
  pending # express the regexp above with the code you wish you had
end 
```

将这些放入 .../features/step_definitions/xxx_steps.rb 文件中，然后开始用`pending`真实代码替换。您不能使用您发布的代码块。您将开始编写 RSpec 测试。第一步可能是编写一个读取日志的方法。第二种方法检测是否有任何日志不为空。最后一个规范将检查是否引发了错误。

高温高压

# c# - 检查字符串是否是有效的 AD 组

> ID：14590744
> 
> 赞同：6
> 
> 时间：2013-01-29T19:32:29.457
> 
> 标签：c#, active-directory

使用以下代码，我可以轻松查看提供的用户是否存在于提供的组中。

```
public static bool IsInGroup(string user, string group)
{
    using (var identity = new WindowsIdentity(user))
    {
        var principal = new WindowsPrincipal(identity);
        return principal.IsInRole(group);
    }
} 
```

但是，给定如下字符串列表：-

```
User1
User2
User3
Group1
Group2
Group3 
```

c# 中有没有办法通过循环这个字符串列表来检查每个条目是否是一个 AD 组？

例如，User3 实际上是一个组名，但是从列表中你会认为它是一个普通的 AD 用户。

有什么方法可以解析名称以查看它是否作为我的 AD 域中的一个组存在。

我基本上希望能够浏览名称和组的列表，并查看给定的用户名（例如“Bob”）是否在列表中，或者是否存在于该列表中的某个组中，因此如果条目在上面的列表中是一个 AD 组，我想运行类似于上面的功能来查看用户是否存在于组中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T19:48:55.173

这还不错。您将需要参考以下程序集：

```
System.DirectoryServices
System.DirectoryServices.Protocols
System.DirectoryServices.AccountManagement 
```

然后你可以使用这样的东西：

```
var groupName = "developers";

using (var context = new PrincipalContext(ContextType.Domain))
{
    var groupPrincipal = GroupPrincipal.FindByIdentity(context, groupName);
} 
```

您可以更改 PrincipalContext 构造函数以将 ContextType.Machine 用于本地计算机，如果需要，您可以添加域名作为第二个参数，但对于本地域，它应该选择它。

[编辑] 此外，如果不匹配，FindByIdentity 方法将返回 null。此外，您还可以从目录服务中获取成员用户和其他有用信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:46:36.933

检查此链接。基本上将组转换为角色，然后您可以使用标准成员资格提供程序功能使用它。

[http://slalomdev.blogspot.com/2008/08/active-directory-role-provider.html](http://slalomdev.blogspot.com/2008/08/active-directory-role-provider.html)

# css - 选择（单击）时如何更改超链接（带图像）的背景？

> ID：14590753
> 
> 赞同：0
> 
> 时间：2013-01-29T19:32:56.533
> 
> 标签：css

选择（单击）时如何更改href（带图像）的背景？

我有下一个 HTML 代码：

```
<li class="barButton" id="addHome">
  <a href="#">
    <img class="imgBar" id="animate1" src="img/interface.png" >
  </a>
</li> 
```

我尝试了下一个 CSS 代码：

```
.imgBar:active {
    background-color: #000;
} 
```

但是图像按钮的背景只有在被点击时才会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:22:24.863

您正在将该`background-color`属性添加到您的`<img>`. 如果图像不透明或部分透明，则背景颜色将不可见。

`:active`伪类是针对“单击”状态时使用的正确选择器，更具体地说，它等同于“鼠标按下”状态。您可能正在搜索针对`:visited`以前访问过的链接的伪类。

您应该尝试使用伪类（例如`a:active .imgBar{ background-color: #000; }`）定位您的锚标记。请记住，锚元素是`display: inline;`默认的，因此默认情况下它将匹配图像的宽度和高度。如果您仍然看不到背景颜色，请尝试添加一些填充，看看是否有任何变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:43:11.257

问题可能是您将活动伪类与 img 标签上的类一起使用，而不是锚标签。

试试这个：a:active .imgBar{background-color:#000}

# sql-server - 如何将 CSV 文件中的数据插入 SQL Server？

> ID：14590756
> 
> 赞同：1
> 
> 时间：2013-01-29T19:33:21.737
> 
> 标签：sql-server, bulkinsert

我想知道是否有任何方法可以访问我的本地硬盘驱动器以使用`BULK INSERT`或其他命令将数据从 CSV 文件插入到 SQL Server 数据库表中。

我以前用过`BULK INSERT`，但为了使用它，我必须将 CSV 文件放在服务器的硬盘上，而不是我的本地硬盘上。我可以访问服务器所在计算机的硬盘。

这次我只有对 SQL Server 的读写访问权限，但对安装它的整台计算机没有访问权限。

有人对我如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:40:48.943

如果要使用，`BULK INSERT`则需要将文件放到 SQL Server 可以看到的位置（也许是文件共享）。或者`BULK INSERT`在不同的服务器上执行，然后通过链接服务器、SSIS 等将数据移动到另一个 SQL Server。

当然，CSV 并不是一种复杂的处理格式——您可以通过简单的 C# 应用程序轻松地做到这一点，方法是将 CSV 分解为一组并使用[表值参数](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)或使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:11:07.623

我设法解决了我的问题。我在本地服务器上创建了一个临时数据库，并对本地临时表执行了“BULK INSERT”。然后我将我的本地服务器链接到我想要查询的服务器。最后，我在临时表（我批量插入数据的地方）和主数据库之间得到了我想要的内部连接。

请参阅[此处](http://msdn.microsoft.com/en-us/library/aa560998.aspx "这里")了解如何创建数据库链接

另请参阅[此问题的第一个答案，](https://stackoverflow.com/questions/5145637/querying-data-by-joining-two-tables-in-two-database-on-different-servers "这个问题的第一个答案")了解如何编写关于如何在两台服务器之间编写内部联接的内部联接语句。

# django - 如何在视图中包装 Django 表单向导？

> ID：14590759
> 
> 赞同：4
> 
> 时间：2013-01-29T19:33:27.007
> 
> 标签：django, django-forms, django-views

这个问题与之前在这里提出并回答的问题高度相关：[如何将 FormWizard 包装在视图中？](https://stackoverflow.com/questions/3503964/how-wrap-a-formwizard-in-a-view)

有人可以发布他们如何成功地将 Django 表单向导包装到视图中的确切详细信息，以便可以使用 login_required 装饰器吗？互联网上有很多关于这个主题的讨论，但它们似乎都不完整，因为它们实际上并没有展示他们是如何定义表单向导类的。

当我将浏览器指向视图时，出现以下异常：

```
__init__() takes exactly 1 non-keyword argument (2 given) in views.py line #108 
```

当我实例化我的表单向导对象时我传递了哪些参数，这样它就不会给我这个错误？如果您有一些有效的示例代码，请发布。

这是我的 urls.py 文件中的内容：

```
url(r'^createObject/$', views.createObjectView, name='createObject'), 
```

这是我的 views.py 文件中的内容：

```
CREATE_OBJECT_FORMS = [
    ("createMyForm0", createObjectForm0),
    ("createMyForm1", createObjectForm1),
    ("createMyForm2", createObjectForm2),
    ("createMyForm3", createObjectForm3),
]

CREATE_OBJECT_TEMPLATES = {
    "createMyForm0": "myApp/form0.html",
    "createMyForm1": "myApp/form1.html",
    "createMyForm2": "myApp/form2.html",
    "createMyForm3": "myApp/form3.html",
}

@login_required
def createObjectView(request):
    # Set up the dictionary of initial data for the form
    # In this case, we are pre-filling some data from the first form only
    initial = {0: {}}

    # Create the form wizard
    form = createObjectWizard(
        [
            createObjectForm0,
            createObjectForm1,
            createObjectForm2,
            createObjectForm3,
        ], 
        initial=initial      # This is Line #108
    )

    # Call the form wizard passing through the context and the request
    return form(context=RequestContext(request), request=request)    

class createObjectWizard(SessionWizardView):
    def get_template_names(self):
        return [CREATE_OBJECT_TEMPLATES[self.steps.current]]

    def done(self, form_list, **kwargs):
        doSomethingFunction(form_list)
        return HttpResponseRedirect('/objectCreated/') 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T19:37:16.670

该`as_view`函数将基于类的视图转换为可调用视图：

## 我的应用程序/views.py

```
from django import forms
from django.contrib.auth.decorators import login_required
from django.contrib.formtools.wizard.views import SessionWizardView
from django.template.response import TemplateResponse

class Form1(forms.Form):
    a = forms.CharField()

class Form2(forms.Form):
    b = forms.CharField()

FORMS = [("step1", Form1),
         ("step2", Form2)]

TEMPLATES = {"step1": "wizard_step.html",
             "step2": "wizard_step.html"}

class MyWizard(SessionWizardView):

    def get_template_names(self):
        return [TEMPLATES[self.steps.current]]

    def done(self, form_list):
        # get data from forms
        a = self.get_cleaned_data_for_step('step1')['a']
        b = self.get_cleaned_data_for_step('step2')['b']
        # access the request as self.request
        request = self.request
        # (...)
        # return response
        return TemplateResponse(request, 'wizard_success.html', {
            'a': a,
            'b': a
        })

wizard_view = MyWizard.as_view(FORMS)

@require_login
def wrapped_wizard_view(request):
    return wizard_view(request) 
```

## myapp/templates/wizard_step.html

```
{% extends "base.html" %}
{% load i18n %}

{% block content %}

<form method="post">
{% include "formtools/wizard/wizard_form.html" %}
</form>

{% endblock %} 
```

## 我的应用程序/urls.py

```
from django.conf.urls import patterns, url

urlpatterns = patterns('myapp.views',
    url(r'^wizard/$', 'wrapped_wizard_view'),
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T15:42:53.403

[另一个答案 -如文档中所述，](https://docs.djangoproject.com/en/1.6/topics/class-based-views/intro/#decorating-the-class)`Wizardview`您始终可以在类上使用装饰器，而不是包装您的视图

因此，您将执行以下导入：

```
from django.contrib.auth.decorators import login_required
from django.utils.decorators import method_decorator 
```

然后在`class createObjectWizard(SessionWizardView)`您内部添加以下内容：

```
 @method_decorator(login_required)
 def dispatch(self, *args, **kwargs):
     return super(createObjectWizard, self).dispatch(*args, **kwargs) 
```

这样你就不必搞砸了`urls.py`——这一切都在视图中得到了处理。希望这可以帮助

# sql - 单列索引的排序顺序有什么不同吗？

> ID：14590760
> 
> 赞同：1
> 
> 时间：2013-01-29T19:33:27.787
> 
> 标签：sql, indexing

我可以理解如果索引中的列不止一列，那么索引中列的排序顺序可能会有所不同，但是如果索引中只有一列是升序和降序一样好？

如果索引以错误的方式排序，它似乎可以从末尾而不是开头开始。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:20:14.960

索引中列的排序顺序不应该有区别。但是，可能存在细微差别的情况。

在不同的数据库中实现索引有不同的方法。但是，它们通常是基于树的数据结构，其叶子包含有序值和值出现的记录的“地址”。

两个相同的索引，除了它们的孩子的排序，将具有相同的性能。对于相等比较，该过程通过沿着树向下查找值来工作。因为索引相同，所以两个版本具有相同的路径。

不等式（“<”和“>”）比较的工作方式基本相同，首先找到阈值，然后从那里向前或向后扫描索引。

所以，问题是：是否会为升序和降序值创建“相同”的两个索引？这就是复杂的地方。出于所有实际目的，我相信这些索引将非常等效。但是，在某些情况下，例如，b-tree 的拆分可能会*不*相同。这是由于树中出现的不对称性而发生的。

例如，在描述 b 树的[Wikipedia 页面](http://en.wikipedia.org/wiki/B-tree)上，向下滚动到来自 Knuth 的示例。在插入“4”的步骤中存在不对称性。节点是 (1),(2),(3,4)。使用相反的排序顺序，节点将是 (4),(3),(1,2)。

最后，索引可能在功能上是等效的。然而，可能会出现不对称，这会影响一些叶子的深度。

顺便说一句，当我开始考虑这个答案时，我认为正确的答案是索引是相同的。想了想，好像不是这样的。

# prolog - 强制 Prolog 选择变量的唯一值

> ID：14590761
> 
> 赞同：8
> 
> 时间：2013-01-29T19:33:30.427
> 
> 标签：prolog, crossword, prolog-dif

好的，我是 Prolog 的新手，所以如果这是一件微不足道的事情，请原谅，但我似乎找不到合适的优雅答案。我正在尝试在[learnprolognow.org](http://www.learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse7)上进行练习，练习 2.4（填字游戏）。

该练习提供了以下事实：

```
 word(astante,  a,s,t,a,n,t,e). 
   word(astoria,  a,s,t,o,r,i,a). 
   word(baratto,  b,a,r,a,t,t,o). 
   word(cobalto,  c,o,b,a,l,t,o). 
   word(pistola,  p,i,s,t,o,l,a). 
   word(statale,  s,t,a,t,a,l,e). 
```

我想出的解决每个单词的填字游戏位置的解决方案是这样的：

```
crossword(V1, V2, V3, H1, H2, H3) :-
   word(V1, V1a, V1bH1b, V1c, V1dH2b, V1e, V1fH3b, V1g), 
   word(V2, V2a, V2bH1d, V2c, V2dH2d, V2e, V2fH3d, V2g), 
   word(V3, V3a, V3bH1f, V3c, V3dH2f, V3e, V3fH3f, V3g), 
   word(H1, H1a, V1bH1b, H1c, V2bH1d, H1e, V3bH1f, H1g), 
   word(H2, H2a, V1dH2b, H2c, V2dH2d, H2e, V3dH2f, H2g), 
   word(H3, H3a, V1fH3b, H3c, V2fH3d, H3e, V3fH3f, H3g). 
```

`V1a`其中to`V1g`等是每个单词的字符，而to`V1bH1b`是`V3fH3f`填字游戏中单词之间的共同字符。

该解决方案似乎有效，但结果是产生重复值，第一个结果是：

```
?- crossword(V1, V2, V3, H1, H2, H3).
V1 = astante,
V2 = baratto,
V3 = statale,
H1 = astante,
H2 = baratto,
H3 = statale . 
```

我怎样才能强制 Prolog 拥有`V1 \= V2 \= V3 \= H1 \= H2 \= H3`？如果我一个一个地做，我将需要 120 个排列，所以必须有一个更快的方法，这是一个初学者练习，所以我一定会遗漏一些东西。

我发现[了这个类似的问题](https://stackoverflow.com/questions/2984104/prolog-beginner-how-to-make-unique-values-for-each-variable-in-a-predicate)，但是提供的答案似乎很复杂，我希望有一个更简单的方法。我在 Ubuntu 上使用 swi-prolog，以防万一。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T14:40:40.743

使用`alldif/1`定义如下：

```
alldif([]).
alldif([E|Es]) :-
   maplist(dif(E), Es),
   alldif(Es). 
```

甚至可以用于最一般的查询：

```
?- alldif(Es).
Es = [] ;
Es = [_G1924] ;
Es = [_G2061, _G2064],
dif(_G2061, _G2064) ;
Es = [_G2163, _G2166, _G2169],
dif(_G2163, _G2169),
dif(_G2163, _G2166),
dif(_G2166, _G2169) ;
Es = [_G2309, _G2312, _G2315, _G2318],
dif(_G2309, _G2318),
dif(_G2309, _G2315),
dif(_G2309, _G2312),
dif(_G2315, _G2318),
dif(_G2312, _G2315),
dif(_G2312, _G2318) ... 
```

`maplist(dif(E),Es)`通过查看答案可以最好地理解目标的含义：

```
?- maplist(dif(E),Es).
Es = [] ;
Es = [_G1987],
dif(E, _G1987) ;
Es = [_G2040, _G2043],
dif(E, _G2043),
dif(E, _G2040) ;
Es = [_G2093, _G2096, _G2099],
dif(E, _G2099),
dif(E, _G2096),
dif(E, _G2093) ;
Es = [_G2146, _G2149, _G2152, _G2155],
dif(E, _G2155),
dif(E, _G2152),
dif(E, _G2149),
dif(E, _G2146) ... 
```

也就是说，`Es`是一个与 完全不同的元素列表`E`。目标[maplist(dif(E),[A,B,C])](https://stackoverflow.com/questions/6682987/prolog-map-procedure-that-applies-predicate-to-list-elements/6683502#6683502)将第一个元素（在本例中`dif(E)`）与列表的每个元素组合在一起。因此`dif(E,A), dif(E,B), dif(E,C)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:40:58.970

`length(List, N)`: N 是列表的长度
`sort(List, SortedList)`: SortedList 是 List 的排序版本（重复元素被删除）

另一方面，拥有可用单词列表并在使用时删除它可能会更快；不仅您不必在最后进行检查，而且您将避免无意义的实例化（`A1 = foo, A2 = foo`将立即停止而不是在最后被拒绝）。换句话说，分支修剪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:33:29.837

@false 在评论中告诉你什么；或者我喜欢使用[域选择](https://stackoverflow.com/a/13900666/849891)：

```
selectM([A|As],S,Z):- select(A,S,S1),selectM(As,S1,Z).
selectM([],Z,Z).

word(astante,  [a,s,t,a,n,t,e]). 
word(astoria,  [a,s,t,o,r,i,a]). 
word(baratto,  [b,a,r,a,t,t,o]). 
word(cobalto,  [c,o,b,a,l,t,o]). 
word(pistola,  [p,i,s,t,o,l,a]). 
word(statale,  [s,t,a,t,a,l,e]).

crossword(Words) :- findall(W, word(_,W), WS),
   Words = [[ _,A,_,B,_,C,_], 
            [ _,D,_,E,_,F,_], 
            [ _,G,_,H,_,I,_],
            [ _,A,_,D,_,G,_],
            [ _,B,_,E,_,H,_],
            [ _,C,_,F,_,I,_]],
   selectM( Words, WS, _). 
```

# javascript - css图像重叠问题

> ID：14590762
> 
> 赞同：1
> 
> 时间：2013-01-29T19:33:30.107
> 
> 标签：javascript, html, css, responsive-design, responsive-slides

我对[**ResponsiveSlides.js**](http://responsive-slides.viljamis.com/)有疑问。
在[**我的网站**](http://thecharlesnyc.com/dev/dgi/ExpressionEngine/index.php#.UQgf6nD9suf)上，客户端部分的滑块出现溢出问题。

当幻灯片更改时，您会注意到图像与客户端部分的红色块重叠。我相信我已经在我的 CSS 中添加了正确的属性。

下面是一个 CSS 片段：

```
.rslides li:first-child {
    position: relative;
    display: block;
    float: left;
}
.rslides li {
    -webkit-backface-visibility: hidden;
    position: absolute;
    display: none;
    width: 100%;
    left: 0;
    top: 0;
}
.rslides1 li {
    width: 100%;
    overflow: hidden;
    max-width: 800px;
} 
```

上面的 CSS 是滑块的默认 CSS。以下是我为适合我的网站而添加的元素：

```
.clinet-slide-img {
    width: 100%;
}
.left-side {
    float: left;
    width: 50%;
} 
```

有什么我想念的吗？

# iphone - 解决 CoreData 错误：NULL _cd_rawData 但对象没有变成故障

> ID：14590764
> 
> 赞同：12
> 
> 时间：2013-01-29T19:33:34.333
> 
> 标签：iphone, ios, ipad, core-data

有时在使用 Core-Data 对象时，应用程序会因错误而崩溃：

> CoreData：错误：NULL _cd_rawData 但对象没有变成故障

从我可以从互联网上研究和阅读的内容来看，当托管对象上下文在两个线程之间传递并且 MOC 不是线程安全的时，就会发生这种情况。

每当我想从 CD 对象访问属性时，就会出现此崩溃。

如果我有 Person 对象并想要访问 Perosn.name 应用程序可能会因此错误而崩溃（如前所述，它会随机发生并且我无法重现它，有时它会连续发生 10 次然后一两天内不会发生）。

在查看这个问题时，似乎在我获取并更新 Person 的朋友关系时会发生这种情况（这是在后台线程上完成的，保存并合并到主线程 MOC）。

我想了解更多关于这里发生的事情的信息，为什么会发生这个错误，因为它看起来很随机，以及是否有任何方法可以防止崩溃。

下面是保存上下文的代码：

```
__block MyAppDelegate *blockSelf = self;
    dispatch_async(dispatch_get_main_queue(), ^{
        [blockSelf.managedObjectContext performBlock:^{
            [blockSelf.managedObjectContext save:nil];

            dispatch_async(blockSelf.core_data_queue, ^{
                [blockSelf.writerContext performBlock:^{
                    [blockSelf.writerContext save:nil];
                }];
            });
        }];
    }); 
```

**更新 1** 有时在执行 saveContext 时，我会收到以下错误：

"Error Domain=NSCocoaErrorDomain Code=1550 "操作无法完成。（可可错误 1550。）

对无效对象的悬空引用。=null

NSLocalizedDescription=操作无法完成。（Cocoa 错误 1550。），NSValidationErrorValue=托管对象上的关系“朋友”（0x201cd340）

UID：<4C1B48C8-6309-4E8E-A590-DED497907A3A>。资产 ID：（空）。带有对象 {(\n '(null)' UID: <(null)>.)}}"

我从另一个 SO 问题中找到了这个答案：“这是由于在不同的上下文中创建的对象，注意不是在不同的线程上，只是在同一个线程上的不同上下文。”

似乎是这种情况，如果是这样，我怎么能找到在与我试图保存的不同上下文中创建对象的位置......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T20:48:03.750

嗯，我会在该代码中更改一些内容。

1.  使用错误指针，这就是它们的用途。您可能会从中得到解决方案。传入一个`NSError`指针，检查`-save:`调用的返回并在失败时将错误吐出到控制台。

2.  你的队列管理有点吓人。而不是这样做`dispatch_async()`，将其更改为`-[NSManagedObjectContext performBlock:]`. 这将保证您在访问上下文的正确线程/队列上。使用您编写它的方式无法保证，因此可维护性很低。

一旦您进行了这两项更改并且您仍然失败，请使用`NSError`对象的输出更新您的问题，我们可以看到发生了什么。

## 更新 1

即使保存时没有发生错误，您仍然需要检查该返回值和错误，因为它可以为我们提供缺失的信息。

如果/当您重现崩溃时，请在此处回复。

## 更新 2

好的，这往往表明您正在不同的 MOC 中创建对象，然后通过您已经收集的关系将它们连接起来。您能否发布或描述您如何以及何时创建对象？你用的是什么MOC？

您还可以发布更新的代码以进行保存吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-20T04:15:16.507

面临同样的问题，但通过设置这个解决了`Fetchrequest`

```
[fetchrequest setReturnsObjectsAsFaults:NO]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T13:59:24.977

我的代码中也遇到过这个问题。后来我注意到我在后台线程中使用了由主线程 NSManagedObjectContext 创建的托管对象。由于托管对象是出了名的线程不安全，所以我更改了我的代码，然后这个错误再也没有出现，代码运行得很好。所以我想这是IOS抱怨在线程中使用托管对象而不是它已创建或获取的线程的方式。

希望这有帮助。

# xcode - Xcode 4.5 给出“未能获得进程 3806 的任务”错误

> ID：14590769
> 
> 赞同：1
> 
> 时间：2013-01-29T19:33:55.363
> 
> 标签：xcode, ipod

最近，我想测试我的应用程序。我还不想购买 Apple 证书，因为我只想测试我的应用程序。尽管放心，一旦我准备好在 App Store 上出售我的应用程序，我就会购买证书。

无论如何，我伪造了代码签名的 xcode，因此我可以在没有开发人员证书的情况下测试我的应用程序。问题是，每当我运行我的应用程序时，我都会收到错误消息

```
failed to get the task for process **** 
```

****每次都是一个随机数。

在我的 iPod 上，应用程序启动，但我得到一个黑屏，然后它返回到跳板。

我正在运行 iOS 5.1.1。我已将部署目标更改为 5.1 和 5.0。我还确保我正在运行假证书。我还禁用了自动布局。

# sql - SQL查询总销售额

> ID：14590770
> 
> 赞同：1
> 
> 时间：2013-01-29T19:33:55.807
> 
> 标签：sql, sql-server

我有一张销售表，想计算总数。

[这是 SQL Fiddle 链接](http://sqlfiddle.com/#!3/f3c03/1)。

**预期结果为 482.33。**

之前有人（@rs）帮助我进行了查询，但在这种情况下它不起作用。我想在“2012/12/07”到“2012/12/09”之间获得该客户的总数，减去与在该日期范围内购买的商品具有相同 SKU 的*任何退货（负）商品。*

结果出来错了。能否请你帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:52:44.270

这是另一种选择：

```
DECLARE @customer varchar(10) = '1111111111' 
DECLARE @from date = '12/07/12'
DECLARE @till date = DATEADD(DAY, 2, @from)
DECLARE @exclusiveTill date = DATEADD(DAY, 1, @till) 
-- added @exclusiveTill based on the comments

SELECT
  [sub].[custid],
  MAX([sub].[LatestDop]) AS [dateid],
  SUM([sub].[PriceSum]) AS [price]
FROM
(
  SELECT
    [custid],
    MAX([dop]) AS [LatestDop],
    [sku],
    SUM([price]) AS [PriceSum],
    SUM(CASE WHEN [price] >= 0 THEN 1 ELSE 0 END) AS [numberOfPositives]
  FROM [sale]
  WHERE
    [custid] = @customer
    AND [dop] >= @from
    AND (CASE WHEN [price] < 0 THEN @till ELSE [dop] END) < @exclusiveTill
  GROUP BY
    [custid],
    [sku]
) AS [sub]
WHERE 
  [sub].[numberOfPositives] > 0
GROUP BY 
  [sub].[custid] 
```

这是用[这个 Fiddle](http://sqlfiddle.com/#!3/f3c03/68)制作的。

此查询实际上是将您的答案和评论翻译成 sql：

*   特定时间跨度内的所有销售
*   应包括此时间跨度之后的负销售额
*   但是负面销售应该至少有一个具有相同 sku 的正面（在时间跨度内）
*   并且应确定满足上述条件的所有销售价格的总和

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:58:01.683

试试这个

```
;WITH T AS
(
  SELECT * FROM sale WHERE Price > 0
  AND [dop] BETWEEN '12/07/12' AND '12/09/12'
  UNION
  SELECT A.* FROM sale a WHERE price < 0
  AND EXISTS (SELECT SKU FROM sale x
            WHERE x.Price > 0 AND a.sku = x.sku
            AND a.custid = x.custid 
            AND x.[dop] BETWEEN '12/07/12' AND '12/09/12')
)
SELECT Custid, max(dop) dateid, sum(price) Price
FROM T
GROUP BY custid; 
```

[SQL 演示在这里](http://sqlfiddle.com/#!3/f3c03/42)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:43:32.467

使用新信息试试这个：

```
DECLARE @datemin date = '12/7/12',
        @datemax date = '12/9/12',
        @custid varchar(10)='1111111111'
;WITH RECS AS(
    SELECT custid,dop,sku,Price 
      FROM sale 
      WHERE dop BETWEEN @datemin AND @datemax AND custid=@custid AND price>=0)

SELECT custid,MAX(dop)dateid,SUM(price)price
FROM(
  SELECT custid,dop,price FROM RECS
  UNION ALL
  SELECT custid,dop,price FROM sale 
      WHERE sku IN (SELECT sku FROM RECS) AND price < 0 AND dop > @datemax)t
GROUP BY custid 
```

它并不漂亮，但它展示了一种完全不同的方法，而且组合起来很快。

您创建一个日期范围内的交易列表，以及在该日期范围内发生 sku 的日期范围之后的负面交易列表，并从那里获取您的总数。

注意：这上面写满了麻烦。

如果在日期范围之前并且在日期范围内购买了相同的 sku，那么之前的购买被退回，会发生什么情况？这将从日期范围减少它。

你怎么知道哪个是实际返回的？

为什么不从实际发生的时期减少回报呢？这很常见，特别是如果返回发生在一段时间后。

还有很多问题需要回答，但这只是给你一些思考的东西。

# google-drive-api - Google Drive SDK iOS 示例

> ID：14590773
> 
> 赞同：3
> 
> 时间：2013-01-29T19:34:03.607
> 
> 标签：google-drive-api

我按照 google drive sdk 的 iOS 示例教程中的步骤进行操作； [https://developers.google.com/drive/ios/quickstart](https://developers.google.com/drive/ios/quickstart)

我想我所做的所有步骤都与教程和视频中描述的相同，但不断收到 Apple Mach-0 Linker Error 的详细信息，

架构 i386 的未定义符号：“_OBJC_CLASS_$_GTLDriveFile”，引用自：ViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_GTLQueryDrive”，引用自：ViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_GTLServiceDrive”，引用自: objc-class-ref in ViewController.o "_OBJC_CLASS_$_GTLUploadParameters"，引用自：objc-class-ref in ViewController.o "_OBJC_CLASS_$_GTMOAuth2ViewControllerTouch"，引用自：objc-class-ref in ViewController.o "_kGTLAuthScopeDriveFile"，引用自：ViewController.o ld 中的 -[ViewController createAuthController]：未找到架构 i386 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我认为这些与13:45视频中出现的错误相似

我无法弄清楚我哪里出错了，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:13:02.653

看起来这是在步骤 3.8 引起的。添加 Drive 服务文件时，您还需要确保选择所有目标。当我重试它时，我注意到默认情况下只选择了 *Tests 目标，因此在构建应用程序时不会编译这些文件。上一步中的 .xib 文件可能会发生类似的情况。

因此，在步骤 3.7 和 3.8 中，确保选择“复制项目...”选项以及“添加到目标”列表中的两个目标。

让我知道这是否为您解决了问题，我将更新快速入门以使其更加具体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T07:38:37.883

单击构建阶段-> 编译源现在添加 GTLDRIVE_Sources.m 和 viewcontrolller.m 文件

它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T16:49:39.223

最好使用 pod 使用 Google Drive。这是Google Drive Rest API的[官方文档](https://developers.google.com/drive/v3/web/quickstart/ios)

这是示例库，您可以使用它来理解

[谷歌驱动浏览器](https://github.com/sourov2008/GoogleDriveBrowser)

# ruby - 正则表达式匹配第一次出现的价格

> ID：14590778
> 
> 赞同：-1
> 
> 时间：2013-01-29T19:34:13.813
> 
> 标签：ruby, regex, nokogiri

我正在使用 Nokogiri 解析 HTML 文档。我试图从 div 中获取价格，我需要使用正则表达式来获取部分内容。

我有字符串

```
6.956.95 
```

我只需要返回

```
6.95 
```

另一个例子，我有字符串：

```
22.9522.95 
```

我只需要

```
22.95 
```

我的正则表达式技能不是很好，我一直在尝试很多没有奏效的不同方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:37:22.713

如果您只需要 2 个“小数”：

```
> "22.9522.95"[/^\d+\.\d{2}/]
=> "22.95" 
```

我仍然很好奇为什么你有 2 个时期的价格表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:39:04.273

如果您需要任何由 1 个或多个数字后跟一个小数后跟正好两个数字的模式：

```
\d+\.\d\d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T19:39:20.990

如果你知道你总是有一个小数：

```
^\d+\.\d{0,2} 
```

也就是说，从字符串的前面选择一个或多个数字，然后是一个小数，然后是最多 2 位数字，它将忽略过去的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:37:27.543

这个适用于任何东西：

```
"foobarfoobar"[/(.+)\1/,1]
#=> "foobar" 
```

# html - 如果在移动设备上更改表格布局

> ID：14590782
> 
> 赞同：0
> 
> 时间：2013-01-29T19:34:28.697
> 
> 标签：html, css

我有一个两列的表，看起来像这样。

![在此处输入图像描述](../Images/ad0c571ff2721df76c78bc4208ffd571.png)

这就是我所需要的，它涵盖了大约 1000 像素的可用空间。但是我的问题是当我在移动设备 iphone 上查看它时。桌子并没有在每个项目后打破，而是挤压桌子以适应屏幕，这就是我想象的配置。什么是最好的方法来代替挤压桌子以适应使桌子改变其布局。我唯一能想到的是检查设备类型并通过javascript创建表格，如果不是移动设备，则定期将表格更改为具有多行的一列（如果是移动设备）。

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:36:12.897

首先**停止使用表格**进行布局，使用新的 HTML5 语义标签，这不仅可以解决这些问题，还可以帮助您进行 SEO，并使用纯 CSS 的力量，学习 CSS 定位、浮动以及如何设计响应式布局, 如果您想要不同设备的不同布局而不是使用`@media queries`

媒体查询[参考](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:36:24.997

您需要使用媒体查询。

阅读[本文](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)以了解如何操作。

媒体查询示例：

```
@media only screen and (max-device-width: 480px) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:36:25.050

最好的方法是根本不使用桌子。一般来说，表格不太容易被“响应”。

您应该考虑使用两个 div 并使用媒体查询来定位 div 以使其看起来不错。我建议你看看 twitter 是如何做到的。你可以[在这里找到他们的响应式网格](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

我读过的关于该主题的更好的文章之一可以在[css 技巧中找到](http://css-tricks.com/css-media-queries/)

# firebase - 通过 rest api 更新安全规则

> ID：14590788
> 
> 赞同：0
> 
> 时间：2013-01-29T19:35:03.080
> 
> 标签：firebase

是否可以通过rest api更新安全规则？我一直在尝试通过更新“规则”位置的部分内容来更新规则，但一直得到 400 响应代码。

伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:26:26.607

您可以对以下端点执行 PUT：

```
https://YOUR_FIREBASE.firebaseio.com/.settings/rules.json?auth=FIREBASE_SECRET 
```

例如，使用卷曲：

```
curl -X PUT -d '{ "rules": { ".read": true } }' https://YOUR_FIREBASE.firebaseio.com/.settings/rules.json?auth=FIREBASE_SECRET 
```

您可以从 Forge 的“Auth”面板获取您的 Firebase Secret（即转到[https://YOUR_FIREBASE.firebaseio.com/](https://YOUR_FIREBASE.firebaseio.com/)并单击“Auth”页面）

# image - 推特引导轮播大小

> ID：14590792
> 
> 赞同：23
> 
> 时间：2013-01-29T19:35:21.363
> 
> 标签：image, twitter-bootstrap, size, carousel

我正在使用 Twitter Bootstrap 为我父亲创建一个网站，除了一件事之外，它已经完成：我不知道如何：
- 减少轮播宽度
- 使轮播居中
- 使滚动箭头仍在图像上

[这是网站，因此您可以检查来源](http://ladesignbuild.net)

我已经逐行浏览了css并调整了轮播的各个方面，然后在我的浏览器中进行了检查。

另一个令人困惑的地方是，如果我在我的浏览器中测试它，其中一些调整会产生效果`SHIFT+CTRL+R`（所以 notepad++ 直接从我的桌面打开它，不使用服务器或主机）并且已经看到了一些尴尬的变化，然而当我将它们放在服务器上时，这些更改都没有保留。

我看过其他一些建议调整的帖子`.carousel`，`@image`并且也尝试过那些没有成功的帖子。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-29T19:55:42.020

您可以使用 CSS 设置轮播的宽度。使块元素居中是用 完成的`margin: 0 auto`。只需更改 的 CSS `.carousel`，其余的会自动正确设置样式。

```
<div id="myCarousel" class="carousel slide" style="width: 400px; margin: 0 auto">
    ...
</div> 
```

看看[这个 jsfiddle](http://jsfiddle.net/Et4pc/153/)看看它是否有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T12:50:52.630

只需在 ID 为“myCarousel”的 DIV 上添加一个“容器”类。

所以这...

```
<div id="myCarousel" class="carousel slide"> 
```

变成...

```
<div id="myCarousel" class="carousel slide container"> 
```

# javascript - IE修改样式表规则不刷新

> ID：14590795
> 
> 赞同：0
> 
> 时间：2013-01-29T19:35:41.463
> 
> 标签：javascript, internet-explorer, stylesheet

我正在通过 JS 向样式表添加规则，然后尝试编辑该规则。它在其他地方工作正常，但在 IE 中不行。

我知道在 IE 中访问样式表和规则的区别，我想修改现有属性也一定有区别，请参阅我的（仅限 IE）示例：

```
<style type="text/css" rel="stylesheet" id="tmp-style"></style>
<h3>Test</h3>
<script type="text/javascript">
    var sheet = document.styleSheets[0];
    sheet.addRule('h3', 'background-color: red', 0);
    console.log( sheet.rules[0].selectorText + ' = ' + sheet.rules[0].style['background-color'] );
    sheet.rules[0].style['background-color'] = 'blue';
    console.log( sheet.rules[0].selectorText + ' = ' + sheet.rules[0].style['background-color'] );
</script> 
```

H3 保持红色，控制台显示：

```
LOG: h3 = undefined 
LOG: h3 = blue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:42:56.990

Ok it turns out that to access the style properties this way via JS in IE you must use the camel case notation to access them, e.g.:

```
sheet.rules[0].style['backgroundColor'] = 'blue'; 
```

# cassandra - Astyanax ConnectionPool setMaxConnsPerHost

> ID：14590800
> 
> 赞同：2
> 
> 时间：2013-01-29T19:35:49.243
> 
> 标签：cassandra, astyanax

我对配置 Astyanax 连接池的方式感到困惑。我使用以下内容来配置我的池。

```
public final int CONNECTION_POOL_SIZE_PER_HOST = 1;
private String conecPoolName = "xxxx";
private String ipSeeds = "xxxxx";
private String clusterName = "xxxxx";
private String keyspaceName = "xxxxx";
private Keyspace keyspace;

private ConnectionPoolConfigurationImpl conPool;

public DMPAstyanaxConfPool() throws DMPException {
    conPool = new ConnectionPoolConfigurationImpl(conecPoolName).setMaxConnsPerHost(
            CONNECTION_POOL_SIZE_PER_HOST).setSeeds(ipSeeds);

    AstyanaxContext<Keyspace> context = new AstyanaxContext.Builder().forCluster(clusterName)
            .forKeyspace(keyspaceName)
            .withAstyanaxConfiguration(new AstyanaxConfigurationImpl().setDiscoveryType(NodeDiscoveryType.NONE))
            .withConnectionPoolConfiguration(conPool)
            .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
            .buildKeyspace(ThriftFamilyFactory.getInstance());

    context.start();
    keyspace = context.getEntity();
} 
```

大多数属性都很容易理解，但我不确定 setMaxConnsPerHost 到底设置了什么。在我的机器上，我使用了一个创建多个 cassandra 连接的多线程应用程序，即使 setMaxConnsPerHost 设置为 1，它也可以正常工作。另外，我知道 cassandra 服务器中有一个配置允许我们设置最大连接数和最大值每个主机的连接数。

服务器配置和这个配置相关吗？否则，这个设置究竟是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:28:40.770

从java文档：

> 为单个主机池分配的最大连接数

`ConnectionPoolConfigurationImpl(conecPoolName)`. [setMaxConnsPerHost](http://grepcode.com/file/repo1.maven.org/maven2/com.netflix.astyanax/astyanax/1.56.23/com/netflix/astyanax/connectionpool/impl/ConnectionPoolConfigurationImpl.java#262)配置每个主机可以拥有的主机数量。

```
public ConnectionPoolConfigurationImpl setMaxConnsPerHost(int maxConns) {
    Preconditions.checkArgument(maxConns > 0, "maxConnsPerHost must be >0");
    //this relates to connections per each node.
    this.maxConnsPerPartition = maxConns;
    return this;
} 
```

还有[setMaxConns](http://grepcode.com/file/repo1.maven.org/maven2/com.netflix.astyanax/astyanax/1.56.23/com/netflix/astyanax/connectionpool/impl/ConnectionPoolConfigurationImpl.java#336)用于设置池中允许的最大连接数：

> 池中的最大连接数，并非所有连接池实现都使用

```
public ConnectionPoolConfigurationImpl setMaxConns(int maxConns) {
    this.maxConns = maxConns;
    return this;
} 
```

应该使用哪一个取决于您的[连接池实现类型](http://netflix.github.com/astyanax/javadoc/com/netflix/astyanax/connectionpool/impl/ConnectionPoolType.html)。

但遗憾的是[setMaxConnsPerHost](http://netflix.github.com/astyanax/javadoc/com/netflix/astyanax/connectionpool/impl/ConnectionPoolConfigurationImpl.html#setMaxConnsPerHost%28int%29)和[setMaxConns](http://netflix.github.com/astyanax/javadoc/com/netflix/astyanax/connectionpool/impl/ConnectionPoolConfigurationImpl.html#setMaxConns%28int%29)似乎都缺乏文档。

# java - webView.ontouch 和 button.onclick 之间的冲突

> ID：14590802
> 
> 赞同：0
> 
> 时间：2013-01-29T19:35:57.643
> 
> 标签：java, android, webview, touch-event

我有一个`webView`和`webView`这个`button`。我在这样的情况下捕捉到一个触摸事件`webview`：`webView.setOnTouchListener(this);`。

```
@Override
    public boolean onTouch(View v, MotionEvent event) {
        if (ADS_VIDEO.contains(v.getId()) && v.getId() == R.id.webView
                && event.getAction() == MotionEvent.ACTION_DOWN) {
            intentVideo = new Intent(getBaseContext(),
                    AdVideoActivity.class);
            startActivity(intentVideo);
        }
        return false;
    } 
```

我的按钮也有这个：

```
 button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
         webView.setVisibility(View.GONE);
         button.setVisibility(View.GONE);
        }
    }); 
```

我的问题是，当我单击 时`button`，`webView`会启动 的事件，而不是链接到按钮的事件。

**更新 ：**

xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="0dip"
android:id="@+id/relativeForWeb" >

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:contentDescription="@string/descr_image"
     />

<ProgressBar
    android:id="@+id/loading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:visibility="gone" />

<Button
    android:id="@+id/bt"
    android:layout_width="42dip"
    android:layout_height="42dip"
    android:text="x" 
    android:background = "@drawable/roundedbutton"/>

<WebView  
    android:id="@+id/webView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:49:47.477

因为 WebView 位于 layout.xml 中的 Button 之后，所以它位于其**上方**（RelativeLayout 根据它们在 layout.xml 中的顺序设置其视图的 z 顺序）。并且因为 webview 在按钮上方，所以它首先获取触摸事件并使用它。

只需将 webview 声明移到 layout.xml 中的按钮声明之前，就可以了。

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="0dip"
android:id="@+id/relativeForWeb" >

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:contentDescription="@string/descr_image"
     />

<ProgressBar
    android:id="@+id/loading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:visibility="gone" />

<WebView  
    android:id="@+id/webView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

/>

<Button
    android:id="@+id/bt"
    android:layout_width="42dip"
    android:layout_height="42dip"
    android:text="x" 
    android:background = "@drawable/roundedbutton"/>

</RelativeLayout> 
```

# jquery - jquery使用.each打印json对象显示比预期更多的结果

> ID：14590803
> 
> 赞同：1
> 
> 时间：2013-01-29T19:36:00.937
> 
> 标签：jquery, json

下面的代码有一些错误。该`rJSON`对象包含单个`sURL`和单个`iURL`（通过检查 console.log 找到）。
但是当条件`imgList`后显示时`each`，它有3个相同的`sURL`和`iURLs`在其中。

你看到下面这段代码有什么问题吗？

```
C.forgotIt = function (page, rJSON) {
    var tempPage = page;
    var imgList = "";

    $.each(rJSON, function (index, value) {
        imgList += "<a href='" + rJSON.sURLS + "'><img class='hsImage' src='" + rJSON.iURLS + "' /></a>";
    });

    page.find('.hsImages').html("<div class='imgListCont'>" + imgList + "</div>");
}; 
```

编辑：rJSON 通过控制台看起来像这样：{iURLS: Array[1], sURLS: Array[1], RESULT: "OTHER_MEMBER"}

更新：目前它有一组 iURLS 和 sURLS，但它可以显示任意数量的 iURLS（和相同数量的 sURLS）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:49:35.117

rJSON 很可能是具有 3 个属性的对象。我已经知道至少有 2 个属性`sURLS`和`iURLS`，并且由于它迭代了 3 次，所以必须有第 3 个未使用的属性。（通过对 OP 的编辑确认）

要使您当前的代码正常工作，您根本不需要 $.each 因为您没有数组。

```
 C.forgotIt = function (page, rJSON) {
     var tempPage = page;
     var imgList = "<a href='" + rJSON.sURLS + "'><img class='hsImage' src='" + rJSON.iURLS + "' /></a>";
     page.find('.hsImages').html("<div class='imgListCont'>" + imgList + "</div>");
 }; 
```

更新您的编辑：

您需要在每个属性上使用 $.each，因为属性包含数组。

```
 C.forgotIt = function (page, rJSON) {
     var tempPage = page;
     var imgList = "";
     $.each(rJSON.sURLS,function(i) {
         imgList += "<a href='" + rJSON.sURLS[i] + "'><img class='hsImage' src='" + rJSON.iURLS[i] + "' /></a>";
     });
     page.find('.hsImages').html("<div class='imgListCont'>" + imgList + "</div>");
 }; 
```

这假设`sURLS`并且`iURLS`将始终具有相同数量的项目并且它们的顺序相同。

# jquery - 当元素的底部边缘到达它时，jquery将元素粘贴到浏览器视口的底部 - 使用resize.browsersize更新变量

> ID：14590804
> 
> 赞同：2
> 
> 时间：2013-01-29T19:36:10.790
> 
> 标签：jquery, jsfiddle

[http://jsfiddle.net/rwr4X/2/](http://jsfiddle.net/rwr4X/2/)

我制作了一个 jquery 脚本 - 它不是很好而且很笨重，但它可以工作一半......

```
var $buzz = $('#buzz'),
    viewportHeight = $(window).height(),
    buzzHeight = 182,
    buzzTop = $buzz.offset().top + buzzHeight,
    buzzPosition = buzzTop - viewportHeight;

$(window).bind("resize.browsersize", function () {

    var viewportHeight = $(window).height(),
        buzzTop = $buzz.offset().top + buzzHeight,
        buzzPosition = buzzTop - viewportHeight;

}).trigger("resize.browsersize");

$(window).scroll(function () {

    if ($(window).scrollTop() >= buzzPosition) {

        $buzz.css({
            position: 'fixed',
            bottom: 0
        });

    } else {

        $buzz.removeAttr("style");

    }

}); 
```

现在上面的脚本可以工作了，但仅限于初始 viewportHeight 变量。

基本上在我的真实项目中，我的页面上有 ajax 元素、字体和各种大小的动画。当浏览器视口大小发生变化时，我似乎无法更新变量，这会导致嗡嗡声跳跃。

请查看我对上述脚本的操作：http: [//jsfiddle.net/rwr4X/2/](http://jsfiddle.net/rwr4X/2/)

如果你向下滚动页面，你会看到buzz出现，当img的底部边缘到达viewport的底部时，位置切换到fixed。并且看起来是无缝的并且流动良好。

但是，如果您通过 ajax 等模拟我的页面变大 - 单击[小提琴](http://jsfiddle.net/rwr4X/2/)中的蓝色和绿色 div 以在每次单击时添加 50px。然后，如果您向上和向下滚动，您将看到到达滚动点时嗡嗡声会跳跃/跳过。这是因为我的 scrollTo 变量没有更新到视口的新大小。

任何人都可以帮我修复它，所以如果视口改变大小，嗡嗡声似乎总是无缝地粘在视口的底部。

提前致谢。

查看小提琴：http: [//jsfiddle.net/rwr4X/2/](http://jsfiddle.net/rwr4X/2/)

# php - AWS S3 - 无法使用 getObject() 和 PHP 保存文件

> ID：14590806
> 
> 赞同：3
> 
> 时间：2013-01-29T19:36:21.367
> 
> 标签：php, amazon-web-services

我对使用 AWS 比较陌生，并且坚持我认为应该是一项基本任务。我正在使用 PHP SDK 版本 2 将文件从我的一个存储桶检索到我服务器上的临时目录。根据[文档](http://docs.aws.amazon.com/aws-sdk-php-2/latest/class-Aws.S3.S3Client.html#_getObject)，我可以使用**getObject**来做到这一点。使用以下代码片段，我可以检索文件，但无法将实际内容保存到临时目录。

**#1**

```
$result = $s3->getObject(array(
    "Bucket" => $s3Bucket,
    "Key"    => $s3Path,
    "ResponseContentType" => "image/jpeg",
    "SaveAs" => EntityBody::factory(fopen($saveFile, "wb"))
)); 
```

**#2**

```
$result = $s3->getObject(array(
    "Bucket" => $s3Bucket,
    "Key"    => $s3Path,
    "ResponseContentType" => "image/jpeg",
    "SaveAs" => fopen($saveFile, "wb")
)); 
```

这两个请求都是成功的，因为它们返回了对象，但我仍然得到一个 0 字节的 tmp 文件。对此的任何见解都非常受欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T05:57:59.693

你可以试试

```
use Guzzle\Http\EntityBody;

$s3Client->getObject(array(
  'Bucket' => $s3Bucket,
  'Key'    => $s3Path,
  'command.response_body' => EntityBody::factory(fopen($saveFile, 'w+'))
)); 
```

还

```
$result = $s3Client->getObject(array(
    'Bucket' => $s3Bucket,
    'Key'    => $s3Path
));

file_put_contents ($saveFile, (string) $result['Body']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T18:01:56.300

检查您的 Amazon Bucket 和 Key 是否正确。我收到此错误并发现 AWS 对象的路径不正确，这意味着文件已创建但没有数据写入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-08T20:01:57.003

从[文档](https://docs.aws.amazon.com/aws-sdk-php/v2/api/class-Aws.S3.S3Client.html#_getObject)

```
$s3Client->getObject(array(
  'Bucket' => $s3Bucket,
  'Key'    => $s3Path,
  'SaveAs' => $filePath
)); 
```

# javascript - 为什么变量名在同一行声明了两次？

> ID：14590807
> 
> 赞同：0
> 
> 时间：2013-01-29T19:36:23.007
> 
> 标签：javascript

我创建了以下功能..

```
function test(){
    var el = el = document.body;
};
test(); 
```

这里重复`el`代表什么？它们返回相同的值吗？任何人都可以简短地解释一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:40:58.850

在我看来，它代表了错误的双重粘贴操作。

```
ctrl+v+v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:38:29.637

第二个泄漏`el`到全局范围内，完全是多余的。

# asp.net - 使用 Response.End(false) 与 ApplicationInstance.CompleteRequest() 的/用例有什么区别

> ID：14590812
> 
> 赞同：3
> 
> 时间：2013-01-29T19:36:33.900
> 
> 标签：asp.net

我遇到了一个 SO question，该问题讨论了在被调用时`ApplicationInstance.CompleteRequest()`避免`ThreadAbortException`被抛出的用法。`Response.End()`

过去，为了避免我上面提到的异常错误，我使用了这个重载：`Response.End(false)`.

我试图了解这两种方法之间的区别。为什么我会选择使用`ApplicationInstance.CompleteRequest()`代替`Response.End(false)`？

**编辑：**

我知道这`ApplicationInstance.CompleteRequest()`是更*正确*的做事方式，但是调用`Response.End(true)`缺少的一个功能是**不**处理后面的其余代码。有时，我们不想继续处理，而是想立即结束执行。

也许在这里回答我自己的问题，但也许正确的做事方式是编写代码，以便在结束响应（而不是中止线程）时，没有更多的代码行需要处理。

一个例子：

```
[DO SOME WORK]
if ([SOME CONDITION])
{
     ApplicationInstance.CompleteRequest();
}
else
{
    //continue processing request
} 
```

这可能有效，但似乎我们在这里编码是为了处理该方法的局限性。并可能导致一些混乱的代码。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:53:43.680

[http://weblogs.asp.net/hajan/archive/2010/09/26/why-not-to-use-httpresponse-close-and-httpresponse-end.aspx](http://weblogs.asp.net/hajan/archive/2010/09/26/why-not-to-use-httpresponse-close-and-httpresponse-end.aspx)

来自文章：“而不是使用 HttpResponse.End 和 HttpResponse.Close 方法，最好是使用 HttpApplication.CompleteRequest 方法，这样缓冲在服务器、客户端或两者之间的响应数据不会得到掉了。”

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Write("Hello Hajan");
    Response.End();            
    Response.Write("<br />Goodbye Hajan");
}
Output: Hello Hajan

protected void Page_Load(object sender, EventArgs e)
{
    Response.Write("Hello Hajan");
    this.Context.ApplicationInstance.CompleteRequest();
    Response.Write("<br />Goodbye Hajan");
}

Output: Hello Hajan 
Goodbye Hajan 
```

[http://blogs.msdn.com/b/aspnetue/archive/2010/05/25/response-end-response-close-and-how-customer-feedback-helps-us-improve-msdn-documentation.aspx](http://blogs.msdn.com/b/aspnetue/archive/2010/05/25/response-end-response-close-and-how-customer-feedback-helps-us-improve-msdn-documentation.aspx)

来自文章：“HttpApplication.CompleteRequest 是结束请求的更好方法。”

# objective-c - 将字段添加到 NSArray 中的对象

> ID：14590821
> 
> 赞同：0
> 
> 时间：2013-01-29T19:37:09.433
> 
> 标签：objective-c, nsstring, nsarray

我有一个`NSArray`叫做“新闻”

这个数组包含很多信息。

消息：

```
{
    Altitude = 0;
    BeschreibungApp = "Heuriger Zum Poysdorfer, 2170 Poysdorf";
    ID = 17922;
    Icon = Weintraube;
    Latitude = "48.67063";
    Link = "http://heurigenapp.nocache.gugler.at/app.php?id=17922";
    Longitude = "16.62858";
    Name = "Heuriger Zum Poysdorfer";
    Ort = Poysdorf;
},
{
    Altitude = 0;
    BeschreibungApp = "Heuriger Grazerberg-Schenke, 2170 Poysdorf";
    ID = 17923;
    Icon = Weintraube;
    Latitude = "48.66929";
    Link = "http://heurigenapp.nocache.gugler.at/app.php?id=17923";
    Longitude = "16.61484";
    Name = "Heuriger Grazerberg-Schenke";
    Ort = Poysdorf;
},
{
    Altitude = 0;
    BeschreibungApp = "Kruspel - Top Heuriger, Buschenschank Kruspel, 2070 Unternalb";
    ID = 18040;
    Icon = Weintraube;
    Latitude = "48.73728";
    Link = "http://heurigenapp.nocache.gugler.at/app.php?id=18040";
    Longitude = "15.96020";
    Name = "Kruspel - Top Heuriger, Buschenschank Kruspel";
    Ort = Unternalb;
} 
```

在我的 iPhone 应用程序中，我显示了从当前位置到目的地的距离。
我已经在字符串中得到了结果。

我可以将此字符串添加到我的数组中吗？
这样我就有了 Altitude、BeschreibungApp、Icon、Latitude、Link、Longitude、Name、Ort 和 Distance。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:02:34.850

NSArray 包含对象。因此，我假设您的数组中的条目是某个类的实例。因此，如果您的类没有可以存储新字符串的实例变量，则无法另外存储它。
我建议在这个类中定义这样一个新的实例变量。如果（指向）对象（此类的实例）存储在您的数组中，则可以将新字符串存储在此类的实例中，从而存储在您的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:54:24.390

这些值是否只是存储为字符串？在我看来，您似乎想要使用 NSMutableDictionary 来存储键和值。如果不是这种情况 - NSArray 是不可变的并且无法更改（没有销毁和重新创建它）。使用 NSMutableArray 然后 [yourArray addObject:distanceObject];

无论哪种方式 - 为了改变 NSArray 需要是可变的。

# javascript - 显示基于输入类型和验证的不同错误

> ID：14590824
> 
> 赞同：1
> 
> 时间：2013-01-29T19:37:17.263
> 
> 标签：javascript, jquery, spring-mvc

这是最近让我心烦意乱的事情。

我正在 Spring MVC 中构建一个 Web 应用程序，一些表单包括多种输入类型（例如 form:radiobuttons [spring radio buttons]、选择框、文本字段等）。我的目标是使用 jQuery 中的 .hide() 和 .show() 方法来隐藏/显示标题（“选择颜色”）下方 ID 为“msgDiv”的 div，这在两种表单上都是相同的。我想要实现的是对两种表单使用相同的验证功能并相应地显示/隐藏自定义消息。

**注意** *这只是我做的一个练习，以确保在更改我的应用程序之前进行正确的错误处理和验证，因此请忽略此示例中颜色选择和音乐的愚蠢。*

上代码！

Form1：“选择表单”（仅选择框验证）
HMTL 代码片段：

```
<form:form action="FormA" commandName="user" name="myForm" id="myFormSelect">
    <input type="hidden"  id="color" name="color" value="${requestScope.user.color}" />
        <h2>Select a Color</h2>
        <div id="msgDiv">
            <form:errors path="*"  element="span"  id="errorMsg" /> 
            <span id="message"/></span><br/><br/>
        </div>
        <p>Please select a color</p>

            <select id="userSelect" name"user" class="selectbox_class" style="max-width: 200px;">
                <option value="">--Select One--</option>
                    <%
            Map<String, String> myMap = ( Map<String, String>) session.getAttribute("myMap");
            for (String key:myMap.keySet())
            {
            %>  <option value="<%= key %>"><%out.print(key+"</option>");
            }
            %>
            </select>
    <br/>
    <br/>
    <div class="button-panel"><span class="buttons buttons-left"></span>
        <button type="button" class="buttons buttons-middle"  onClick="selectVal();" id="send" value="send">Submit</button>
        <span class="buttons buttons-right"></span>
    </div>
</form:form> 
```

Form2：“Select & Radio Form”（选择框和单选验证）
HMTL 代码片段：

```
<form:form action="FormB" commandName="user" name="mySecondForm" id="mySecondFormSelectAndRadio">
    <input type="hidden"  id="color" name="color" value="${requestScope.user.color}" />
        <h2>Select a Color</h2>
        <div id="msgDiv">
            <form:errors path="*"  element="span"  id="errorMsg" /> 
            <span id="message"/></span><br/><br/>
        </div>
        <p>Please select a color</p>

            <select id="userSelect" name"user" class="selectbox_class" style="max-width: 200px;">
                <option value="">--Select One--</option>
                    <%
            Map<String, String> myMap = ( Map<String, String>) session.getAttribute("myMap");
            for (String key:myMap.keySet())
            {
            %>  <option value="<%= key %>"><%out.print(key+"</option>");
            }
            %>
            </select>
    <br/>
<h2>Music Genre</h2>
<p>Please select the button which describes your taste in music</p>

<form:radiobutton path="music" name="radio" id="radio1" value="classicForm"/><label for="radio1">Classical Music</label><br> 
<form:radiobutton path="music" name="radio"  id="radio2" value="jazzForm"/><label for="radio2">Jazz Music</label><br>
<br>
<div class="button-panel"><span class="buttons buttons-left"></span>
   <button type="button" class="buttons buttons-middle" onClick="history.back(-1)">Back</button>
   <span class="buttons buttons-right"></span>
</div>
<div id="spacer"></div><div id="spacer"></div>
<div class="button-panel">
    <div id="spacer"></div>
    <span class="buttons buttons-left"></span>
    <button type="button" class="buttons buttons-middle"  onClick="selectVal();" id="send" value="send">Submit</button><span class="buttons buttons-right"></span>
</div> 
```

*到目前为止，这是每个页面底部的脚本部分*

```
 $(document).ready(function(){

<% if (myMap != null) {%>
    $('select[name=userSelect]').change(function() {
        var selVal = $(this).val();
        var txtVal = $("#userSelect option:selected").text();
        $("#color").val(txtVal);    
     }); 

     $('select[name=userSelect]').val($("#color").val());

<%} else { %>
    $("#color").val("${user.color}");
<%} %>
    });

    $(document).ready(function(selectVal) {  
     if ($("#userSelect").val()=="")      
        $("#msgDiv").show();
    return dataValid;
    }); 
```

到目前为止，这是我的外部 javascipt 文件：

```
function submitForm(formId)
{
document.getElementById(formId).submit();
}

function selectVal() {
var dataValid = true;
var selector = document.getElementById("userSelect");
var radios = $("input[name=radio]");
var message= document.getElementById("message");
var errorMsg = "";

message.innerHTML = "";
if (selector.value == "" || radios.checked == false) {
    $('#msgDiv').hide();
    dataValid = false; 

    if (selector.value == "") {
        errorMsg += "Please Select an Color from the Drop Down Menu";
    }

    if (radios.checked == false) {
        errorMsg += "Please select a Genre of Music";
    }

    message.innerHTML = errorMsg; 
    }

    return dataValid;
   } 
```

要求：

1.  除非在页面加载时验证未完成，否则 Div 应保持隐藏状态
2.  应出现适当的错误消息
3.  如果用户在未选择颜色或音乐流派的情况下单击提交，则应显示组合消息。

这里还有一个类似的线程供参考。 [else if 语句进行验证](https://stackoverflow.com/questions/14269995/else-if-statement-in-javascript-not-able-to-display-validation-message)。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:28:20.833

好的，再过几个小时我就能想出这个答案

*   @DWB 把 hide()/show() 一起拿出来，用 .toggle() 切换页面的显示
*   我没有尝试从内部和外部脚本调用代码，而是使用了 KISS 方法。对于像我这样的初学者或中级程序员来说，记住这一点总是一件好事。*保持简单愚蠢*

因此，最终的产品不是**6 个**函数（每个 html 页面上的 2 个函数，单独文件中的 2 个方法，每个调用 2 个函数）是：

*   **一个用于验证的函数和一个 window.onload 函数调用以保持 div 隐藏 onload 并**在外部文件（“yourname.js”）中重新加载

*如果您有任何问题，请给我发消息或发电子邮件，一如既往，欢迎采用不同的方法！*

**解决方案：**

```
function customMessageForMultipleInputs()
{
var choicesForm = document.getElementById("choicesForm");

if(radio1.checked=="" && radio2.checked=="" && document.getElementById("userSelect").value=="")
{           selected=false;
        document.getElementById("msgDiv").style.display = "block";
        document.getElementById("errorMsg").innerHTML="Please select your Favorite Color and
   a Genre of Music";
        return false;

 }
 if(document.getElementById("userSelect").value=="")
 {
        document.getElementById("msgDiv").style.display = "block";
        document.getElementById("errorMsg").innerHTML="Please select a Color";
        return false;
 }if(document.getElementById("radio1").checked=="" && document.getElementById("radio2").checked=="") 
 {  
selected=false;
document.getElementById("msgDiv").style.display = "block";
    document.getElementById("errorMsg").innerHTML="Please select a Genre of Music;
     return false;
 }else{   
        document.getElementById("msgDiv").style.display = "none";
        reportOutageConfirm.submit();
        return true;
        document.getElementById("msgDiv").style.display = "none";
 }
 };
window.onload = function() {
customMessageForMultipleInputs();
 }; 
```

**以下是它的工作原理：**

1.  我创建了一个函数 'customMessageForMultipleInputs()，它在我的 HTML 文件中的单击事件按钮内被调用。（例如 myBTN prop=val, prop=val, onClick="customMessageForMultipleInputs 等..)

2.  在我最初的问题中，我混淆了我的编程逻辑。更容易说我的单选按钮的 .checked 属性 (egif(document.getElementById("radio1").checked=="") 类似于“userSelect”下拉框的“*值*”。

3.  window.onload = function() { **customMessageForMultipleInputs** (); };

听起来很傻，但＃3让我循环了一会儿，因为我试图变得“圆滑”并且做得比必要的更多。对于新窗口的任何人。除非用户没有正确填写表格，否则页面将被隐藏。

无论如何，我希望有一天这对某人有所帮助，谢谢！！！！

我喜欢这个网站！！:)

# python - 连接到mysql的速度极慢

> ID：14590835
> 
> 赞同：2
> 
> 时间：2013-01-29T10:35:34.890
> 
> 标签：python, mysql

我正在使用一个非常简单的连接到本地主机数据库：

```
engine = sqlalchemy.create_engine('mysql+mysqlconnector://usr:pwd@localhost/db')
engine = engine.connect()
data = engine.execute('select * from table') 
```

'table' 有 500 行。然后我在“数据”上运行 cProfiler，在那里我找到了这个：

```
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
54086  127.261    0.002  127.261    0.002 {method 'recv' of '_socket.socket' objects} 
```

这里[http://bugs.python.org/issue3766](http://bugs.python.org/issue3766)似乎将 TCP_NODELAY 设置为 1 可以解决。我的问题是，我在哪里设置这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:43:23.943

我认为您必须使用`engine.setsockopt(SOL_TCP,TCP_NODELAY,1)`但不确定。

# c++ - 说双向文件声明没有隐式设置标志是否正确？

> ID：14590836
> 
> 赞同：1
> 
> 时间：2013-01-29T19:38:02.773
> 
> 标签：c++, visual-studio-2010, stream, fstream

[这里](http://stdcxx.apache.org/doc/stdlibug/30-3.html)的这种说法似乎不正确：

> 另一方面，双向文件流没有隐式设置标志。这是因为双向流不必在所有情况下都处于输入和输出模式。您可能希望为只读或只写打开一个双向流。因此，双向文件流没有隐式输入或输出模式。您必须始终明确设置双向文件流的打开模式。

否则，此代码将无法编译。

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    fstream file("novo.txt", ios::out);
    char i;
    file >> i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:17:18.690

# 声明对于 gcc 是正确的

> 这里的这种说法似乎不正确：[…]

我不了解标准或 Visual Studio，但我知道我正在使用的 C++，它来自 GCC。在那里你可以看看[相关的标题](http://gcc.gnu.org/git/?p=gcc.git;a=blob;f=libstdc%2B%2B-v3/include/std/fstream;hb=0c8766b14373cdc13b9c966130ec877e0fa29865)。

[`oistream::open`](http://gcc.gnu.org/git/?p=gcc.git;a=blob;f=libstdc%2B%2B-v3/include/std/fstream;hb=0c8766b14373cdc13b9c966130ec877e0fa29865#l539)看起来像这样：

```
inline void
istream::open(const char* __s, ios_base::openmode __mode = ios_base::in) {
  if (!_M_filebuf.open(__s, __mode | ios_base::in)) 
```

所以你在这里有两件事：一个*默认*函数参数，以防你在调用方法时没有指定一个，以及一个*强制*标志，它总是 or-ed 进入提供的模式。因此，无论您指定哪种模式，输入模式都将始终添加到您的规范中。其他代码，特别是构造函数，将委托给它。类似的情况也会发生[`ofstream::open`](http://gcc.gnu.org/git/?p=gcc.git;a=blob;f=libstdc%2b%2b-v3/include/std/fstream;hb=0c8766b14373cdc13b9c966130ec877e0fa29865#l714)。另一方面，[`fstream::open`](http://gcc.gnu.org/git/?p=gcc.git;a=blob;f=libstdc%2b%2b-v3/include/std/fstream;hb=0c8766b14373cdc13b9c966130ec877e0fa29865#l887)具有*默认*参数，但没有*强制*参数：

```
inline void
fstream::open(const char* __s,
              ios_base::openmode __mode = ios_base::in | ios_base::out) {
  if (!_M_filebuf.open(__s, __mode)) 
```

因此，不通过任何模式是可以的（至少在这个实现中，但请阅读@kmote 的答案以获取更多详细信息），但是*如果*您确实通过了任何模式，*那么*您必须同时通过其中一个`in`或`out`两个，因为您指定（或未能指定）的模式不会添加强制模式。

这是我阅读 Apache 文档的方式，源代码支持我的观点，至少对于我的实现而言。由于所有这些都在模板化代码中，因此您可以查看来自不同编译器的标头以了解它如何处理这些情况。所以看看 VS 头文件，看看`basic_fstream`它的方法是如何实现的。

# 缺少编译器错误

> 否则，此代码将无法编译。

您的代码打开一个双向流仅用于输出，然后尝试从中输入内容。没有理由*编译*失败。流的静态类型是`fstream`，即双向。只有在运行时，您才会将具有特定含义的特定标志传递给构造函数。编译器（通常）不会对此进行检查，因此当您的代码无法从流中实际读取时，您的代码将因此在运行时出现异常行为。

请注意，我不确定 Windows 是否真的支持打开文件仅用于输出。操作系统支持的唯一文件模式很*可能*是只读和读写。（请注意，我只是在这里推测。）在这种情况下，即使在运行时打开文件仅用于输出并随后从中读取也不会成为问题，因为`out`仅使用或使用`in|out`. 为了可移植性，应该选择正确的模式，因为那里有支持只写文件的内核。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:28:32.467

尽管[历史上对此事存在一些混淆](http://www.cplusplus.com/forum/beginner/13081/)，但我认为您引用的陈述确实具有误导性，但并非出于您示例中的原因。[如文档](http://msdn.microsoft.com/en-us/library/4dx08bh4%28v=vs.100%29.aspx)中所述，双向文件流确实隐式设置了标志：

```
void open(
const char *_Filename,
ios_base::openmode _Mode = ios_base::in | ios_base::out,
int _Prot = (int)ios_base::_Openprot
); 
```

根据 Apache 声明，我不希望您的代码示例失败，因为它明确地将标志设置为 ::out。另一方面，我希望这段代码会失败：

```
int main()
{
    fstream file("novo.txt");
    char i;
    file >> i;
} 
```

但是根据 MSDN 文档，此代码也不会失败，并且文件将默认为 ios_base::in & out（因此，Apache 语句并不完全准确）。

# ios - 如何知道 UITableViewCell 是否在编辑模式下被取消选择

> ID：14590837
> 
> 赞同：2
> 
> 时间：2013-01-29T19:38:03.020
> 
> 标签：ios, uitableview, editing

我有一个支持编辑删除的表格视图。如果 Tableview 处于编辑模式，则支持多选。我想根据所选单元格的数量启用或禁用删除按钮。如果至少选择了一个单元格，我将启用删除按钮，否则不启用。类似于 iPhone 邮件应用程序。当我选择一个单元格时，在编辑模式下调用了 didSelectRowMethod 并且我启用了删除按钮。但是，如果我再次点击所选单元格以取消选择，则不会调用 didSelectRow。所以我无法禁用我的删除按钮。如果在编辑模式下取消选择单元格，您是否知道如何知道以及从何处获取控件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:30:32.393

在这里如何检查它是否处于编辑模式不要忘记设置`tableview.delegate=self;`

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath{
      if ([tableView isEditing]) {
                 NSLog(@"tableview is editing");      
            }else{
                 NSLog(@"tableview is not editing");   
              }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:51:45.150

来自文档：
selected
一个布尔值，指示是否选择了单元格。
@property(nonatomic, getter=isSelected) BOOL selected
Discussion
选择会影响标签、图像和背景的外观。当单元格的选定状态设置为“是”时，它将为选定单元格绘制背景，其标题为白色。默认值为 NO。如果通过此属性将选择状态设置为 YES，则不会为新状态外观的过渡设置动画。对于动画选定状态转换，请参阅 setSelected:animated: (第 26 页) 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:58:03.607

回答我自己的问题。我发现 UITableview 上有一个委托方法，称为 -

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath 
```

在这种方法中，可以知道取消选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-31T04:42:42.517

请在表格处于编辑模式时实现**didDeselectRowAt indexPath:** 委托方法，因为 didSelectRowAt 在取消选择时不起作用

func tableView(_ tableView: UITableView, didDeselectRowAt indexPath: IndexPath) { }

# opencart - 在 OpenCart 中解析 HTML 特殊字符

> ID：14590838
> 
> 赞同：1
> 
> 时间：2013-01-29T19:38:05.647
> 
> 标签：opencart, htmlspecialchars

我四处寻找解决此问题的方法，但找不到。我正在尝试为 opencart 制作付款方式。

我在管理区域中设置了两个字段（ID 和密钥），然后我继续从前端页面的控制器中检索它们

> （使用this->config->get）

这些字段用于在单独的 PHP 文件中执行加密。

（将这些作为参数传递）

但是，其中一个必填字段（键）有一个`'&'`转换为`'& amp ;'` 我使用的

> htmlspecialchars_decode

摆脱这个和我可能面临的任何其他 html char 问题的功能。

但我仍然没有得到正确的加密。我通过直接将密钥作为字符串发送而不是使用`this->config->get`.

有什么想法和帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:36:35.510

您可以简单地使用在控制器中检索它时`str_replace()`将其转换`&amp;`为`&`

```
<?
// REPLACE VAR
$string=str_replace("&amp;", "&", $data);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T21:41:06.923

```
html_entity_decode($data, ENT_QUOTES, 'UTF-8'); 
```

该功能将所有内容`htmlentities()`转换为其原始字符。

**例如，**

```
$string = 'Cinema 30&quot; &amp; Laptop';

echo html_entity_decode($data, ENT_QUOTES, 'UTF-8'); 
```

将输出**Cinema 30" 和笔记本电脑**

# php - 使用来自变量 Error 的字符串偏移量

> ID：14590840
> 
> 赞同：2
> 
> 时间：2013-01-29T19:38:26.993
> 
> 标签：php, arrays, variables, offset

我一直在使用字符串偏移量访问数组时出错。数组看起来像这样：

```
$array = array(
                    "first" => array("one","two","three"),
                    "second" => array("blabla"),
                    "third" => array("something","else"),
                    "fourth" => array("next","nextnext","nextnextnext")
    ); 
```

我正在尝试根据我拥有的字符串获取内部数组之一，并使用该字符串作为偏移量，如下所示：

```
$curArray = $array[$this->string]; 
```

但是每次我运行脚本时，我都会在该行出现错误。你能告诉我为什么吗？我得到的错误是“非法偏移类型”。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:41:29.917

这很可能`$this->string`不是您认为的那样。此错误是由用作数组键的非字符串或数字引起的。

如果你这样做，`var_dump($this->string);`你应该能够看到实际的价值是什么。

编辑： A`SimpleXMLElement`是一个对象，因此不能用作数组键。您可以将其转换为这样的字符串：

```
$key = (string)$this->string;
$curArray = $array[$key]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:41:09.947

的值`$this->string`不被识别为实际的字符串值。

您可能需要运行 a`print_r ( $this->string )`以更好地了解它包含的内容。

见： http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

您可以使用该`is_string(..)`功能来确定`$this->string`是否有效，并可能检查`array_key_exists ()`您的查找是否有效。

# jquery - 从链接打开自定义手风琴

> ID：14590850
> 
> 赞同：0
> 
> 时间：2013-01-29T19:38:50.223
> 
> 标签：jquery, content-management-system, accordion, expressionengine

我知道有很多关于这个主题的帖子，但是由于我的 HTML 标记，我创建了一个自定义手风琴。下面是我的 JQuery。

```
$(function(){
  hide(0);
  $('.accordion > h1').click(function(){
    hide($('.accordion').index($(this).parent()));
  });
  function hide(i){
    $('.accordion').removeClass('active');
    $('.accordion:eq(' + i + ')').addClass('active');
  }
}); 
```

这是我的手风琴 HTML。注意我使用 ExpressionEngine CMS。

```
<section class="module flag-{style} {page_module_style}">
  <h1 id="row-id{row_id}">{header}</h1>
  <div class="copy">
    {copy}
  </div>
</section> 
```

我使用 CSS 赋予它手风琴的外观。该链接将是[http://siteurl.com/page#row-id1234](http://siteurl.com/page#row-id1234)，我需要弄清楚当我链接到带有其 ID 的特定手风琴选项卡时如何将其打开并专注于该选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:52:38.463

当窗口准备就绪时，获取当前哈希并找到与该 id 匹配的元素：

```
function getHash() {
  var hash = window.location.hash;
  return hash.substring(1); // remove #
}

$(function(){
  activeTab = $(getHash()).parent()

  hide($('.accordion').index(activeTab));
}); 
```

# android - 使用 OverlayItem.setMarker() 设置自定义图标 - Android

> ID：14590851
> 
> 赞同：0
> 
> 时间：2013-01-29T19:38:51.547
> 
> 标签：android, google-maps, overlay, itemizedoverlay, overlayitem

我正在尝试为地图上的点设置我自己的自定义标记，但它们一直作为标记出现`"defaultIcon"`

在我的主要：

```
 itemizedOverlay = new OurItemizedOverlay(defaultIcon, this); 
```

将点添加到地图：

```
public void addPointToMap(PointOfInterest pointOfInterest) {

            mapOverlays.clear();

            pointOfInterest = setMarkerForPointOfInterest(pointOfInterest);         

            itemizedOverlay.addOverlay(pointOfInterest);
            mapOverlays.add(myLocationOverlay);
            mapOverlays.add(itemizedOverlay);
            mapView.invalidate();
    } 
```

为 OverlayItem 设置标记

```
 private PointOfInterest setMarkerForPointOfInterest(PointOfInterest pointOfInterest) {

           String type = pointOfInterest.getType().toLowerCase();

           if(type.equals("monument")) {
               pointOfInterest.setMarker(monumentIcon);
               return pointOfInterest;
           }
           else if(type.equals("building")) {
               pointOfInterest.setMarker(buildingIcon);
               return pointOfInterest;
           }
           else if(type.equals("atm")) {
               pointOfInterest.setMarker(atmIcon);
               return pointOfInterest;
           }
           else if(type.equals("attraction")) {
               pointOfInterest.setMarker(attractionIcon);
               return pointOfInterest;
           }
           else if(type.equals("pub")) {
               pointOfInterest.setMarker(pubIcon);
               return pointOfInterest;
           }
           else if(type.equals("restaurant")) {
               pointOfInterest.setMarker(restaurantIcon);
               return pointOfInterest;
           }
           else if(type.equals("shop")) {
               pointOfInterest.setMarker(shopIcon);
               return pointOfInterest;
           }
           else if(type.equals("bridge")) {
               pointOfInterest.setMarker(bridgeIcon);
               return pointOfInterest;
           }
           else if(type.equals("station")) {
               pointOfInterest.setMarker(stationIcon);
               return pointOfInterest;
           }
           else if(type.equals("cafe")) {
               pointOfInterest.setMarker(cafeIcon);
               return pointOfInterest;
           }
           else if(type.equals("hotel")) {
               pointOfInterest.setMarker(hotelIcon);
               return pointOfInterest;
           }
           else {
               pointOfInterest.setMarker(defaultIcon);
               return pointOfInterest; 
           }

    } 
```

# android - Android TextureView 与 VideoView 性能对比

> ID：14590852
> 
> 赞同：31
> 
> 时间：2013-01-29T19:38:54.013
> 
> 标签：android, performance, android-widget, android-videoview

我需要能够在屏幕上旋转视频，所以我创建了一个自定义 TextureView，它在 MediaPlayer 上提供了一个便利层，类似于 VideoView 的当前实现方式。[这篇 Android 博客文章](http://android-developers.blogspot.com/2011/11/android-40-graphics-and-animations.html)对 TextureView 进行了以下说明：

> 因为 SurfaceView 的内容不在应用程序的窗口中，所以不能有效地转换（移动、缩放、旋转）。这使得在 ListView 或 ScrollView 中使用 SurfaceView 变得困难。SurfaceView 也无法与 UI 工具包的某些功能正确交互，例如褪色边缘或 View.setAlpha()。
> 
> 为了解决这些问题，Android 4.0 引入了一个名为 TextureView 的新小部件，它依赖于硬件加速的 2D 渲染管道和 SurfaceTexture。TextureView 提供与 SurfaceView 相同的功能，但与 SurfaceView 不同的是，它的行为类似于常规视图。例如，您可以使用 TextureView 来显示 OpenGL 场景或视频流。TextureView 本身可以动画、滚动等。

但是，看起来 TextureView 正在努力播放视频。我正在测试它的目标设备有一个 1.2Ghz Rockchip RK3066 双核 CPU、一个四核 Mali-400 GPU (ARM) 和 1GB RAM。在此设备上使用 VideoViews 的相同代码执行良好，但 TextureViews 在播放时“断断续续”或根本不显示（左上角带有白色方块的黑框），具体取决于特定设备。TextureViews 在使用 Intel 提供的 x86“设备”的模拟器上运行良好。

这是预期的性能，还是我应该在其他地方寻找问题？谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-26T00:35:05.487

是的，它是预期的`TextureView`。TextureView 导致视频通过普通视图合成进行渲染，这与直接在 GPU 中合成的 SurfaceView 不同（解码管道直接渲染到您放置 的屏幕区域`SurfaceView`）。虽然`TextureView`渲染是硬件加速的，但它仍然需要通过更多步骤来获得额外的灵活性，并且肯定会影响性能。此外，在 UI 线程上运行的任何代码都可能会影响`TextureView`不同的`SurfaceView`.

附加信息：

*   [高级 UI 基础知识：开发和设计](http://books.google.com/books?id=sKzoEcclr_EC&pg=PA288&lpg=PA288&dq=textureview+vs+surfaceview&source=bl&ots=mi7mQMMx21&sig=urBkTHJz4P7hQISef8uJyUMvips&hl=en&sa=X&ei=F8p5UcGcL6PiiAKIvYD4CQ&ved=0CG8Q6AEwBw#v=onepage&q=textureview%20vs%20surfaceview&f=false)
*   [AOSP 图形架构：SurfaceView 还是 TextureView？](https://source.android.com/devices/graphics/arch-tv.html#surface_or_texture)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-30T14:06:33.853

你可以看看这篇[文章](https://source.android.com/devices/graphics/arch-tv)

> SurfaceView 和 TextureView 扮演着相似的角色，但实现方式却大不相同。要决定哪个是最好的，需要了解权衡。因为 TextureView 是 View 层次结构的适当公民，所以它的行为与任何其他 View 一样，并且可以重叠或被其他元素重叠。您可以通过简单的 API 调用执行任意转换并将内容作为位图检索。
> 
> 对 TextureView 的主要打击是合成步骤的性能。使用 SurfaceView，内容被写入 SurfaceFlinger 合成的单独层，理想情况下带有覆盖。对于 TextureView，View 的合成总是由 GLES 执行，并且对其内容的更新可能会导致其他 View 元素也重新绘制（例如，如果它们位于 TextureView 的顶部）。View 渲染完成后，应用程序 UI 层必须通过 SurfaceFlinger 与其他层合成，因此您实际上将每个可见像素合成了两次。对于全屏视频播放器或任何其他实际上只是叠加在视频之上的 UI 元素的应用程序，**SurfaceView 提供了更好的性能**。

# mysql - MySQL和push查询数组一起

> ID：14590856
> 
> 赞同：0
> 
> 时间：2013-01-29T19:39:05.230
> 
> 标签：mysql, sql, arrays, array-push

我这里有这段代码

```
$sql_array = array();
if($result['user_id'] == 'OA'){
                $sql = "select distinct id, FirstName, LastName from table_one ti left join table_two sp on (sp.user_id = ti.id) or (sp.user_id = ti.id)";
                $query = $this->db->query($sql);
                $results_array = $query->result_array();
                $sql_array = array_push($sql_array, $results_array);
            }
            elseif($result['user_id'] == 'SH'){
                $sql = "select distinct id, first_name, last_name from table_three teo left join table_two sp on sp.user_id = teo.id";
                $query = $this->db->query($sql);
                $results_array = $query->result_array();
                $sql_array = array_push($sql_array, $results_array);
            }elseif($result['user_id'] == 'OF'){
                $sql = "select distinct id, first_name, last_name from table_four os left join table_two sp on sp.user_id = os.id";
                $query = $this->db->query($sql);
                $results_array = $query->result_array();
                $sql_array = array_push($sql_array, $results_array);
            }elseif($result['user_id'] == 'US'){
                $sql = "select distinct ID, substring_index(display_name, ' ', 1) as 'FirstName', substring_index(display_name, ' ', -1) as 'LastName' from table_five tu left join table_two sp on sp.user_id = tu.id";
                $query = $this->db->query($sql);
                $results_array = $query->result_array();
                $sql_array = array_push($sql_array, $results_array);
            } 
```

它遍历所有 $result['user_id'] 并查看要运行的查询字符串基于 $result['user_id'] 是什么......使用上面的代码我得到了一个错误`array_push() expects parameter 1 to be array, integer given`

我做错了什么还是有更好的方法来做到这一点？

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:44:54.780

为什么不使用 [] 语法？

```
if($result['user_id'] == 'OA'){
            $sql = "select distinct id, FirstName, LastName from table_one ti left join table_two sp on (sp.user_id = ti.id) or (sp.user_id = ti.id)";
            $query = $this->db->query($sql);
            $results_array = $query->result_array();
            $sql_array[] = $results_array;
        } 
```

关于您的错误的原因是因为您影响了`array_push`对数组变量的返回。问题是`array_push`返回一个整数，所以在循环的第二个回合你将尝试将一个整数作为第一个参数传递`array_push`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:52:15.140

您正在用整数值覆盖数组。

`array_push()`返回数组中元素的新数量。

在第一次遇到： `$sql_array = array_push($sql_array, $results_array);`

`$sql_array`将具有整数值。

从我收集到的你想用的`array_merge()`

[数组合并（）](http://www.php.net/manual/en/function.array-merge.php)

# sql - 使用动态列构建 SQL 查询

> ID：14590859
> 
> 赞同：6
> 
> 时间：2013-01-29T19:39:19.833
> 
> 标签：sql, sql-server, pivot, unpivot

我的表格如下：

患者表

```
PatientId   Name
1           James
... 
```

访问表

```
Date    PatientID_FK    Weight
1/1     1               220
2/1     1               210 
... 
```

如何构建返回的查询

```
PatientId    Name    Visit1Date    Visit1Weight    Visit2Date    Visit2Weight    ...
1            James   1/1           220             2/1           210
2            ... 
```

我们如何以这种方式添加更多列？怎么写`SELECT`？请帮忙。

* * *

StackExchange 上的一些帖子说 SQL 语句不可能处理它。真的是这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:58:04.957

这种类型的数据转换需要使用 a`pivot`和`unpivot`函数来完成。由于您的访问将是未知的，因此您将需要使用动态 sql。但首先，我将向您展示如何使用硬编码的值构建查询，以便更容易理解该过程的工作原理。

首先，您需要和列`UNPIVOT`，以便值在同一列中。这可以使用查询或 unpivot 函数来完成：`date``weight``UNION ALL`

**取消透视：**

```
select patientid, name, rn, col, value
from
(
  select p.patientid, p.name, convert(char(5), v.date, 110) date, 
    cast(v.weight as char(5)) weight,
    row_number() over(partition by PatientID_FK order by date) rn
  from patients p
  left join visits v
    on p.patientid = v.PatientID_FK
) src
unpivot
(
  value
  for col in (date, weight)
) unpiv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/5f471/12)。此查询的结果将 date 和 weight 列的值放入具有多行的单个列中。请注意，我将 a 应用于`row_number()`记录，因此您将能够判断每次访问的值：

```
| PATIENTID |  NAME | RN |    COL | VALUE |
-------------------------------------------
|         1 | James |  1 |   date | 01-01 |
|         1 | James |  1 | weight | 220   |
|         1 | James |  2 |   date | 02-01 |
|         1 | James |  2 | weight | 210   | 
```

**枢：**

下一步是将`PIVOT`函数应用于`col`列中的项目，但首先我们需要更改名称，以便它为您提供所需的名称。

为此，我`SELECT`稍微更改语句以将行号添加到列名称：

```
select patientid, name, 'Visit'+col + cast(rn as varchar(10)) new_col, 
  value
from ... 
```

这将为您提供新名称，这些名称是您想要作为列的名称：

```
Visitdate1 
Visitweight1
Visitdate2
Visitweight2 
```

对于`PIVOT`数据，如果您对值进行硬编码，您的查询将如下所示：

```
select *
from
(
  select patientid, name, 'Visit'+col + cast(rn as varchar(10)) new_col, 
    value
  from
  (
    select p.patientid, p.name, convert(char(5), v.date, 110) date, 
      cast(v.weight as char(5)) weight,
      row_number() over(partition by PatientID_FK order by date) rn
    from patients p
    left join visits v
      on p.patientid = v.PatientID_FK
  ) src
  unpivot
  (
    value
    for col in (date, weight)
  ) unpiv
) s1
pivot
(
  max(value)
  for new_col in (Visitdate1,Visitweight1,
                  Visitdate2,Visitweight2)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/5f471/14)。

**动态枢轴：**

现在我已经解释了如何设置背后的逻辑，您将希望使用动态 sql 实现相同的过程。您的动态 sql 版本将是：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ', '+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('visits') and
               C.name not in ('PatientID_FK')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' + quotename('Visit'+c.name 
                                          + cast(v.rn as varchar(10)))
                    from
                    (
                       select row_number() over(partition by PatientID_FK order by date) rn
                       from visits
                    ) v
                    cross apply sys.columns as C
                   where C.object_id = object_id('visits') and
                     C.name not in ('PatientID_FK')
                   group by c.name, v.rn
                   order by v.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select patientid, name, ''Visit''+col + cast(rn as varchar(10)) new_col,
          value
        from 
        (
          select p.patientid, p.name, convert(char(5), v.date, 110) date, 
            cast(v.weight as char(5)) weight,
            row_number() over(partition by PatientID_FK order by date) rn
          from patients p
          left join visits v
            on p.patientid = v.PatientID_FK
        ) x
        unpivot
        (
          value
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(value)
        for new_col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5f471/10)

两个版本的结果是：

```
| PATIENTID |  NAME | VISITDATE1 | VISITWEIGHT1 | VISITDATE2 | VISITWEIGHT2 |
-----------------------------------------------------------------------------
|         1 | James |      01-01 |        220   |      02-01 |        210   | 
```

# marklogic - MarkLogic 5.0 中 xdmp:functions() 的替代方案？

> ID：14590861
> 
> 赞同：1
> 
> 时间：2013-01-29T19:39:21.903
> 
> 标签：marklogic

是否有任何 API 可以获取 MarkLogic 5.0 中的所有范围内函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:14:04.747

如前所述，ML5 中没有直接的 API。我不鼓励使用正则表达式方法：需要解析 XQuery。但是基于调试器的方法可以工作。查看[https://github.com/robwhitby/xray/blob/coverage/src/coverage.xqy](https://github.com/robwhitby/xray/blob/coverage/src/coverage.xqy)了解一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T23:07:39.890

can you not query the docs?

```
xquery version "1.0-ml";

declare namespace xhtml="http://www.w3.org/1999/xhtml";

let $doc := xdmp:http-get("https://docs.marklogic.com/5.0/all",
    <options xmlns="xdmp:http-get">
       <format xmlns="xdmp:document-get">xml</format>
    </options>)[2]

let $table := $doc/node()//xhtml:table[@class="api_table"]

return $table//xhtml:td/xhtml:a/fn:string(.) 
```

# c# - 如何在我的 mvc 项目中使用 open xml sdk？

> ID：14590862
> 
> 赞同：1
> 
> 时间：2013-01-29T19:39:25.060
> 
> 标签：c#, asp.net, .net, visual-studio-2010, sdk

在努力让我的 word 文档在我的本地机器上正常运行后，我了解到我的服务器没有 Microsoft Office。我正在尝试打开、修改、保存和显示文档。我发现 OPEN XML SDK 2.0 是要走的路。我今天早上刚下载了这个程序，我不知道如何将它集成到我的代码中。我该怎么做呢？

我瞎了眼，这就是我想做的。此代码适用于办公室

```
object pathToUse = Server.MapPath("~/Document/TemplateX.docx");
object pathToSave = Server.MapPath("~/Document/FinishedX.docx");

//open file
tempDoc = wordApp.Documents.Open(ref pathToUse, ref missing,
   ref missing, ref missing, ref missing, ref missing,
   ref missing, ref missing, ref missing, ref missing,
   ref missing, ref isVisible, ref missing, ref missing,
   ref missing, ref missing);

//Make edits - I had this for my word document
this.FindAndReplace(Application wordApp, "<date>", DateTime.Today.ToShortDateString());

//save
tempDoc.SaveAs(ref pathToSave, ref missing,
   ref missing, ref missing, ref missing, ref missing,
   ref missing, ref missing, ref missing, ref missing,
   ref missing, ref isVisible, ref missing, ref missing,
   ref missing, ref missing);

//return file in my Controller
return File(pathToSave.ToString(), "docx"); 
```

我只是添加了代码来显示我有需要的东西，但是缺少 Microsoft 曲线球伤害了我的心理。提前致谢。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:31:31.223

OpenXml SDK 将允许您这样做，但您可能需要考虑在 Word 中编辑模板时可能出现的特殊情况，例如将相同样式的文本拆分为多个元素。

首先去下载[VS2010 的 Open XML 插件](http://visualstudiogallery.msdn.microsoft.com/450a00e3-5a7d-4776-be2c-8aa8cec2a75b)。它会让你看到你正在使用的结构 - 在 VS2010 中拖动一个 .docx 文件，在包中查找 document.xml，按 Ctrl-KD 格式化文档以提高可读性。

将 SDK 附带的 DLL 添加到您的项目中。

从流中打开 Word 文档，确保在此之前复制模板文件：

```
using (var document = WordprocessingDocument.Open(stream, true))
                {
...
}// document auto-saves when done 
```

替换标签内的文本：

```
List<Text> textElements = document.MainDocumentPart.Document.Body.Descendants<Text>()
    .Where(t=>t.InnerText == "<date>").ToList();
textElements.ForEach(te=>te.InnerText = DateTime.Today.ToShortDateString()); 
```

此示例将帮助您入门，但希望看到 Word 以您未曾预料到的奇怪方式构建其 XML，尤其是在您的文档很复杂的情况下。

# c++ - C ++简单构造函数问题

> ID：14590863
> 
> 赞同：-1
> 
> 时间：2013-01-29T19:39:35.313
> 
> 标签：c++, constructor

我正在尝试创建一个玩家手类（例如在纸牌游戏中）。draw 方法将绘制另一张牌，而 showHand 方法应显示手中的当前牌。我试图在构造函数中初始化指针数组，但我不知道如何做到这一点（这是我相信我的问题的根源）。尝试现在注释掉 this->jon={}; 给出此错误：“错误：将''分配给'Card * [12]'时的类型不兼容”

***目前在 showHand 中，如果我只是尝试 cout jon[i]->getRank() 就会弹出一堆废话；但是 Draw 方法效果很好。

```
class myHand{

public:

myHand(){
    this->size=0;
    //this->jon={};

}

void Draw(Card anyCard) {

    if(size>11) {
        cout<<"You can only have a maximum of 12 cards in your hand at a time"<<endl;
        return;
    }

    jon[size]=&anyCard;
    cout<<"HERE IS ANYCRD:"<<jon[size]->getRank()<<jon[size]->getSuit()<<endl;
    size++;
}

void showHand() {
   //DOESNT WORK HERE
}

void Place(Card* anyCard) {

}
private:
    int size;
    Card* jon[12];
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:43:04.667

你的问题是悬空指针。

您更广泛的问题是*使用*指针。只是不要那样做。存储一组*实际* `Card`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:43:35.767

数组是不可赋值的，即`some_array = {}`在初始化之后是非法的。

此时您的数组已经初始化。但是它确实包含垃圾，因此您需要在使用它之前初始化每个元素。

附带说明...

```
jon[size]=&anyCard; 
```

那很不好。您正在存储局部变量的地址。一旦函数退出，该指针就会变得无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:44:34.947

您正在存储局部变量的地址：

```
 jon[size]=&anyCard; 
```

当它超出范围时（当函数离开时），它会被销毁。如果要将指针存储在 jon 中，则至少需要对其进行复制。

# javascript - 如何使用 JavaScript 在 IE 中将 iframe 父（顶部）位置更改为相对于 iframe 的 url？

> ID：14590865
> 
> 赞同：5
> 
> 时间：2013-01-29T19:39:42.677
> 
> 标签：javascript, iframe, cross-browser, relative-path

**示例A.com**

```
<iframe src="http://exampleB.com/"> 
```

**例子B.com**

```
<button onclick="top.location='/test'">Test</button> 
```

在 Chrome 中（我假设大多数浏览器），单击 iframe 内的“测试”按钮会将父页面更改为`exampleB.com/test`，但在 IE 中，它会设置相对于父 URL ( `exampleA.com/test`) 的位置。

**如何使测试按钮在所有具有相对于 iframe 的 URL 的浏览器中工作？**

* * *

**注意**：

这可以在 HTML 中完成，如： `<a href="/test" target="top">Test</a>`如评论中所述。看到[这个问题](https://stackoverflow.com/questions/11207900/change-parent-url-from-iframe/11208032)。

但是，我需要（ed）一个基于 JavaScript 的解决方案来更改父位置以响应事件，而不是单击鼠标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:13:17.010

看起来我已经回答了我自己的问题......

**例子B.com**

```
<button onclick="topLocation('/test')">Test</button>

<script>
var topLocation = function(url) {
    // make sure its a relative url
    if (url[0] === '/' && url[1] !== '/'){
        // x-broswer window.location.origin 
        if (!window.location.origin) window.location.origin = window.location.protocol+"//"+window.location.host;
        window.top.location = window.location.origin + url;
    } else {
        window.top.location = url;
    }
}
</script> 
```

[我找到了从这个 SO 答案](https://stackoverflow.com/a/6167979/363701])中获取基本 url (window.location.origin) 的代码

# c - 我奇怪的无法工作的 C 代码，用于获取单词

> ID：14590867
> 
> 赞同：0
> 
> 时间：2013-01-29T19:39:43.800
> 
> 标签：c, struct

使用此结构定义：

```
struct word {
    char *cont; //content of the word
    char *wsp; //whitespace following the word
    int ctr;
}; 
```

一句话，我正在尝试编写一个函数来从标准输入中获取第一个单词，然后是所有空格。这里是：

```
struct word *getword(){
    char cont[WORDLIM];
    char wsp[WORDLIM];
    cont[0] = '\0';
    wsp[0] = '\0';
    if (peekchar() == EOF) return NULL; //peekchar defined elsewhere as getting a char and ungetc-ing it

    REPEAT{ //macro for for(;;)
            char c = getchar();
            char buf[2];
            buf[0]=c;
            buf[1]='\0';
            if (c == '\n' || c == ' '){
                    strcat(wsp, buf);
                    if (peekchar() != '\n' && peekchar() != ' '){
                            struct word *toret;
                            toret = malloc(sizeof(struct word));
                            toret->cont = cont;
                            toret->wsp = wsp;
                            toret->ctr = -1;
                            printf("---%s---\n", toret->wsp); //just for debugging
                            return toret;
                    }
                    continue;
            }
    }
    printf("PANIC PANIC PANIC THIS IS GOING WROOOOONG!!!!!\n");
    return NULL;
} 
```

现在有趣的是，我可以在仅用于调试的行中获得正确的空白输出，但是当我尝试访问 getword()->wsp 时，我得到了随机垃圾。更有趣的是， getword()->cont 有效...

我是 C 的新手……我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:44:33.660

您正在返回指向超出范围的内存的指针。

您动态分配 a `struct word`，但实际字符保存在`wsp`数组中。一旦你的函数返回，那就超出了范围，所以可以包含任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T19:50:13.847

```
REPEAT{ //macro for for(;;) 
```

失去那个宏后急速。使用预处理器去丑化 C 语法是胃灼热的秘诀。只需使用`for(;;)`or `while(1)`。编译器通常足够聪明，可以将其变成无条件跳转。

至于你的问题：

```
toret->cont = cont;
toret->wsp = wsp; 
```

`cont`和数组在函数`wsp`本地声明`getword`；一旦函数退出，数组就不再存在，任何指向它们的指针都不再有效。您需要做的是除了为自身 分配内存之外，还为`cont`和的`wsp`成员分配内存。`toret``toret`

```
toret = malloc(sizeof(struct word));
if (toret) // ALWAYS check the result of a `malloc` call
{
  toret->cont = malloc(strlen(cont) + 1);
  if (toret->cont)
    strcpy(toret->cont, cont);
  toret->wsp = malloc(strlen(wsp) + 1);
  if (toret->wsp)
    strcpy(toret->wsp, wsp);
  ...
} 
```

请注意，当您需要为结构释放内存时，您首先需要为`cont`and`wsp`成员释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T19:46:25.903

`*toret`是程序中的悬空指针

# javascript - 浮动轴在

> ID：14590871
> 
> 赞同：1
> 
> 时间：2013-01-29T19:40:00.457
> 
> 标签：javascript, graph, flot

有谁知道是否可以使用 flot 为轴设置交叉值？如果你在这里举个例子

[http://www.flotcharts.org/flot/examples/threshold/index.html](http://www.flotcharts.org/flot/examples/threshold/index.html)

如果能够设置 x 轴，使其在 0 处而不是在最小值处（本例中为 -10）与 y 交叉，那就太好了

我找不到办法做到这一点。我也找不到使用 highcharts 或 jqplot 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:25:33.557

正如@DNS 所提到的，您不会在 API 中找到它，但是当所有其他方法都失败时，请破解它！

```
$(function () {

    var data = [[0, -12], [7, 12], [8, 2.5], [12, 2.5]];  // some data series

    somePlot = $.plot($("#placeholder"), [ data ]); // plot it once

    var xaxis = somePlot.getAxes().xaxis; // get your x and y axis 
    var yaxis = somePlot.getAxes().yaxis;

    var abline = [[xaxis.datamin,0],[xaxis.datamax,0]]; // create a new line to serve as our xaxis, we are using the current xaxis extremes

    somePlot = $.plot($("#placeholder"), [ {data: data}, {color: 'black', data: abline, shadowSize:0} ], {}) // replot it with our new line

    $('.x1Axis .tickLabel').css('top',yaxis.p2c(0)+5+'px'); // move our xaxis tick labels to the zero location of the yaxis   

}); 
```

产生：

![在此处输入图像描述](../Images/7c935cf9cba17a99c5fa1b1997a430cb.png)

[在这里](http://jsfiddle.net/yU43R/1/)拉小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:55:22.613

不幸的是，目前这是不可能的；Flot 仅支持绘图边缘的轴。

您绝对应该[打开一个问题](http://github.com/flot/flot/issues)以将其作为建议提交。

# sql - 替换字符串的特定部分

> ID：14590872
> 
> 赞同：-1
> 
> 时间：2013-01-29T19:40:02.620
> 
> 标签：sql, sql-server-2008

在名为`my_table`我的表中，我需要对表内容中的特定字符串执行查找/替换：

```
String to search for: 'http://123.456.789.000'

String to substitute: 'http://www.mysite.com' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:46:35.887

哎呀。

```
UPDATE dbo.my_table
  SET col = REPLACE(col, 'http://123.456.789.000', 'http://www.mysite.com')
  WHERE col LIKE '%http://123.456.789.000%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:46:38.990

能这么容易吗？

```
UPDATE my_table
SET Field1 = 'http://www.mysite.com'
WHERE Field1 = 'http://123.456.789.000' 
```

祝你好运。

# iphone - 将 NSString 转换为 NSNumber

> ID：14590876
> 
> 赞同：2
> 
> 时间：2013-01-29T19:40:25.713
> 
> 标签：iphone, ios, objective-c, nsstring, nsnumber

> **可能重复：**
> [如何将 NSString 转换为 NSNumber](https://stackoverflow.com/questions/1448804/how-to-convert-an-nsstring-into-an-nsnumber)

如何将`NSString`（例如@“Five”）转换为`NSNumber`（5）。我在 Stack Overflow 上查看是否有任何问题可以回答这个问题，但似乎很多人一直在要求将数字转换为字符串 - 而不是相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:47:09.947

由于以下几个原因，没有内置功能：

1）它是模糊的。要说`2013`（年），我可能会说“两千一十三”、“两千一十三”、“二十三”、“二开十三”等。这还没有考虑到辩证的差异。

2）它不容易本地化。大声朗读数字的规则因语言而异（因此一组规则不能真正用于每个区域），Apple 仅提供可在全球范围内使用的 API。这个星球上的大多数人不会说英语。

3) 它假定用户可以正确拼写。“四十”不是一个数字。“四十”是。

如果您告诉我们您为什么要这样做（即目标是什么），也许我们可以提出更好的方法？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:06:40.737

这大致工作，至少应该让你开始：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.numberStyle = NSNumberFormatterSpellOutStyle;

NSArray *testStrings = @[@"Five",@"twenty-four",@"Nineteen",@"One hundred forty-two"];

for (NSString *test in testStrings) {

    NSNumber *result = [formatter numberFromString:[test lowercaseString]];

    NSLog (@"String %@ -> %@ as number",test,result);

} 
```

需要考虑的一些事情：

*   您需要将语言环境正确设置为某个固定语言环境（如果这些字符串都来自服务器或某种恒定语言），或者让它浮动到用户的语言环境（如果用户是输入字符串的人）
*   As others have pointed out, this parser may not be sophisticated enough for your needs. For example, the last string "thirty three" actually returns the wrong result. The others work correctly. As @JonathanGrynspan suggested, if you tell us more about your goal here, someone can maybe suggest something better.

I hope that helps.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T03:03:29.477

```
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber * myNumber = [f numberFromString:@"42"]; 
```

Hope this helps..

# image - 如何使用来自单个 PNG 图像的可搜索文本构建 PDF？

> ID：14590878
> 
> 赞同：5
> 
> 时间：2013-01-29T19:40:29.307
> 
> 标签：image, pdf, png

目前，我有一系列图像 (PNG)，并且每个图像都有其内容的未格式化文本版本。我想制作一个 PDF，其中每个图像都成为结果 PDF 的一整页，相应的文本也以某种方式附加到页面上，因此搜索某些单词会将您带到带有该文本的页面，即使文本永远不会直接显示。

这是一个一次性的工作，因此它不必整洁或可扩展。我可以使用 Linux 系统上常用的任何语言，或常用的命令行工具。（我也有一个带有 Acrobat 的 Windows 系统，虽然有将近一千张图像，所以手动操作是行不通的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:47:45.753

尝试的一种选择是使用 Java 和[Apache-Fop](http://xmlgraphics.apache.org/fop/ "阿帕奇")生成 PDF ，但这可能比您想要做的工作更多。

使用 iText 可能会做得更好；[将 PNG 添加到 iText 以生成 PDF 的示例](http://thinktibits.blogspot.com/2011/06/convert-png-to-pdf-itext-java-example.html)

您将需要确定如何生成`Layer`放置可搜索文本的位置；我无法就如何执行此步骤向您提供建议。

[这](https://stackoverflow.com/questions/1489733/how-to-know-if-a-pdf-contains-only-images-or-has-been-ocr-scanned-for-searching/3108531#3108531)是您如何判断 PDF 是否包含文本的方法，这可能会帮助您构建一个。

# python - 支持向量-/逻辑-回归：您有波士顿住房数据的基准结果吗？

> ID：14590879
> 
> 赞同：4
> 
> 时间：2013-01-29T19:40:32.980
> 
> 标签：python, machine-learning, regression, scikit-learn

我打算通过在 sklearn 附带的波士顿房价数据集 (sklearn.datasets.load_boston) 上运行 sklearn 支持向量回归包来测试我的实现。

在玩了一段时间之后（尝试不同的正则化和管参数，案例的随机化和交叉验证）并始终预测一条平坦的线，我现在不知所措我失败的地方。更引人注目的是，当我使用 sklearn.datasets 包 (load_diabetes) 附带的糖尿病数据集时，我得到了更好的预测。

这是复制的代码：

```
import numpy as np
from sklearn.svm import SVR
from matplotlib import pyplot as plt
from sklearn.datasets import  load_boston
from sklearn.datasets import load_diabetes
from sklearn.linear_model import LinearRegression

# data = load_diabetes()
data = load_boston()
X = data.data
y = data.target

# prepare the training and testing data for the model
nCases = len(y)
nTrain = np.floor(nCases / 2)
trainX = X[:nTrain]
trainY = y[:nTrain]
testX  = X[nTrain:]
testY = y[nTrain:]

svr = SVR(kernel='rbf', C=1000)
log = LinearRegression()

# train both models
svr.fit(trainX, trainY)
log.fit(trainX, trainY)

# predict test labels from both models
predLog = log.predict(testX)
predSvr = svr.predict(testX)

# show it on the plot
plt.plot(testY, testY, label='true data')
plt.plot(testY, predSvr, 'co', label='SVR')
plt.plot(testY, predLog, 'mo', label='LogReg')
plt.legend()
plt.show() 
```

现在我的问题是：**你们中是否有人成功地使用了这个数据集和支持向量回归模型，或者知道我做错了什么？**我非常感谢您的建议！

下面是上面脚本这个结果的结果： ![在 load_boston 数据集上运行的结果](../Images/071be66a3edd623554622129731adc95.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T21:30:38.630

将内核从 更改`rbf`为`linear`将解决问题。如果您想使用`rbf`，请尝试一些不同的参数，尤其是对于`gamma`. 默认值`gamma`( `1/# features`) 对于您的情况来说太大了。

![在此处输入图像描述](../Images/0d0a8bf4ed1e223caad3ba6c390f3429.png)

这是我用于线性内核的参数`SVR`：

```
svr = SVR(kernel='linear', C=1.0, epsilon=0.2) 
```

我绘制了训练数据标签和测试数据标签。您可能会注意到训练数据的分布并不均匀。这使得模型在`5 < y < 15`. 所以我对数据进行了一些洗牌，并将训练数据设置为使用 66% 的数据。

```
nTrain = np.floor(nCases *2.0 / 3.0)
import random
ids = range(nCases)
random.shuffle(ids)

trainX,trainY,testX,testY = [],[],[],[]
for i, idx in enumerate(ids):
    if i < nTrain:
        trainX.append(X[idx])
        trainY.append(y[idx])
    else:
        testX.append(X[idx])
        testY.append(y[idx]) 
```

这就是我得到的：

![在此处输入图像描述](../Images/931e1b9027b274dd34b0fb9486712315.png)

从视觉上看，就预测误差而言，这两个回归器看起来都更好。

这是`rbf`内核的一个工作示例`SVR`：

```
svr = SVR(kernel='rbf',  C=1.0, epsilon=0.2, gamma=.0001) 
```

结果如下所示：

![在此处输入图像描述](../Images/cf28af6d0876972aa5c6d1d17e420438.png)

# django - Django 数据库中的 HTML

> ID：14590882
> 
> 赞同：0
> 
> 时间：2013-01-29T19:40:37.210
> 
> 标签：django

我有一个模型：

```
class Pages(models.Model):
    meta_d = models.CharField(max_length=255, unique=True)
    meta_k = models.CharField(max_length=255, unique=True)
    title = models.CharField(max_length=255, unique=True)
    text = models.TextField() 
```

但是，如果在 db 中我有，例如，`<h1>123</h1>`在“文本”列中，它会在 html 文件中像字符串一样返回，而不是**123** (h1)。所以，在管理界面中，我可以写一篇带有 html-tags 的文章。我可以看到我网站中的标签就像一个字符串。这是错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:08:12.990

您可以使用@karthikr 在他的评论中提出的内容：

```
{{data|safe}} 
```

或者如果您需要针对模板块（不仅是上面的一个变量）使用它，请使用如下：

```
{% autoescape off %}
{{ data }}
{{ data2 }}
{% endautoescape %} 
```

DJango 在字符串中显示 html 标签，因为它们是为了防止跨站脚本 (XSS) 攻击。您可以在 DJango 官方文档中找到完整的描述：

[https://docs.djangoproject.com/en/dev/topics/templates/#automatic-html-escaping](https://docs.djangoproject.com/en/dev/topics/templates/#automatic-html-escaping)

# c# - 在 asp net mvc 中处理输入类型文件

> ID：14590892
> 
> 赞同：0
> 
> 时间：2013-01-29T19:41:12.457
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我做了深入的研究，试图找到从客户端上传文件的更实用的方法，我决定选择输入类型文件 html 元素。

问题是：我在控制器中什么都没有，我什至看不到在 firebug 中设置的 fakepath 字符串。

**看法：**

```
<form action="action" id="id" method="POST" enctype="multipart/form-data">
    <table id="tblId">            
        <tr>
            <td><input type="file" name="file" /></td>
        </tr>
    </table>
    <input type="submit" value="import" />
</form> 
```

如您所见，我正确使用了 enctype。数据按应有的方式发送到控制器，但没有数据。

**控制器：**

```
[HttpPost]
public ActionResult opImportFile(FormCollection form) {

    var file = Request.Files["file"];
        if (file != null)
        {
            return Content("ok");
        }
        else
        {
            return Content("bad");
        }
} 
```

而且我总是变得“坏”！太糟糕了。有没有其他方法可以尝试，或者我做错了什么？

**PS -> 这是一个 ajax 请求：**

```
$('#formUpdStoringSettings').submit(function (e) {

    e.preventDefault();    
    var form = $(this);       
    alert($('input[name=file]').val()); //Here I am able to get the fakepath...
    alert(form.serialize());  //Here I get nothing...

    $.ajax({
        url: form.attr('action'),
        type: form.attr('method'),
        data: form.serialize(),
        success: function (response) {
        }
   });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:52:23.490

您可能需要使用[jQuery 上传插件](http://blueimp.github.com/jQuery-File-Upload)才能使用 AJAX 进行上传。

# javascript - 将类作为变量传递时的 Javascript 变量参考 (PhpStorm)

> ID：14590893
> 
> 赞同：1
> 
> 时间：2013-01-29T19:41:16.293
> 
> 标签：javascript, jquery, phpstorm

使用 PhpStorm：我的代码将实例化类作为参数传递给函数。我知道这`className`是对特定类的引用。但是有没有办法让我的代码知道是什么`ClassName`？

```
 $(document).on('validSelection', function(event,className){
      alert( className.sayHello() );
   }); 
```

由于我计划使用很多，这确实会使这个特定功能的编码变得更加容易`ClassName`。在 php 中，您可以通过执行以下操作来强制识别：

```
/* @var $variable ClassName */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:53:14.170

> 我的代码将实例化类作为参数传递给函数

不，不是。您刚刚在函数列表中添加了另一个参数，但是当它被调用时（由 jQuery，当事件发生时），它没有被传递。如果您在绑定事件处理程序时有权访问`className`，则可以利用闭包：

```
var className = {
    sayHello : function() {
       return "hello";
    }
};
$(document).on('validSelection', function(event){
   alert(className.sayHello()); // works
}); 
```

* * *

另一方面：我看到您正在使用自定义事件。因此，如果您在代码中调用了[`.trigger`](http://api.jquery.com/trigger/)其他任何地方，那么您可以将任何内容作为第二个参数传递，并将其传递给事件处理程序：

```
var className = {
    sayHello : function() {
       return "hello";
    }
};
$(document).trigger('validSelection', className);

// On a separate scope...

$(document).on('validSelection', function(event, className){
   alert(className.sayHello()); // works
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:59:03.863

在 JavaScript 中，我们没有类，而是使用“原型”来像我们一样行事。因此，要检查对象的“类别”，您需要使用其中一种原型方法。

如果您有一个易于引用的`className`对象实例化副本，您可以使用`className.prototype.constructor`并检查它是否[`isPrototypeOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/isPrototypeOf)是其他对象。

或者，您可以检查这`className`是否是[`instanceOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)某个原型对象。

# c++ - unordered_map 添加返回到从文件 c++ 中读取的字符串

> ID：14590896
> 
> 赞同：0
> 
> 时间：2013-01-29T19:41:23.963
> 
> 标签：c++, ifstream

我有一个文本文件，格式为：

```
"stringx, stringy"
"stringx, stringy" 
```

ETC

我将我的代码放在下面，以显示我如何读取我的无序映射、解析文本并使 stringx 成为键和 stringy 值。

对于我试图解决的问题，我还需要另一个映射，以相反的顺序，即键是字符串，值是字符串x。

值输入正确，当我输出直接数据时，你会看到

```
"stringx:stringy" 
```

但是当我输出reverseData时，它是

```
"stringy
 :stringx" 
```

我不知道这是否是我程序的整体范围的问题（我需要获取一个键，将其附加到列表中，然后从键中获取值并使用它来查找另一个键/值对） . 但是，我只是在想，如果它在数据中自动换行，会

```
stringx 
```

一样

```
(space)
stringx 
```

?

我不知道我是否说得通，但一如既往，所有的帮助都将不胜感激！

```
typedef unordered_map<string, string> mymap;

int main()
{
mymap map1;
mymap map2; 
list <pair<string, string>> list1; 
ifstream myFile;
myFile.open("values.txt");
string forParse;
string first, second;
while (getline(myFile, forParse))
{
    stringstream x(forParse);
    getline(x, first, ',');
    getline(x, second);
    map1[first] = second; 
    map2[second] = first;  
}

for (auto& x: map2) cout << x.first << ":" << x.second << endl; 
```

# java - 查找在构建路径上配置的 JRE 版本（以编程方式）

> ID：14590897
> 
> 赞同：2
> 
> 时间：2013-01-29T19:41:26.383
> 
> 标签：java, eclipse-plugin

由于用户可以在 Java 项目中指定与默认 JRE 不同的 JRE，有没有办法以编程方式查找项目构建路径上配置的 JRE 版本？

使用 Eclipse API，我可以通过类路径找到 JRE 的名称（但它是用户定义的，因此不能保证有关版本的信息），但是从那里我看不到提取有关版本的信息的方法。

上下文是我在 Eclipse 中启动 java 程序之前进行验证，这将需要使用特定 java 版本编译的附加文件。我需要验证用户是否为该项目选择了与其兼容的 JRE。我可以执行 java.version 以在系统中找到默认版本，但不能保证该人没有特别为该项目选择不同的版本。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:08:37.943

*以编程*方式找到它：

```
System.getProperty("java.version") 
```

或者，在 ant (build.xml) 或 maven (pom.xml) 中为：`${java.version}`

另请参阅[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:53:41.660

尝试`java -version`使用配置的 JRE 中的可执行文件从控制台运行。它不能直接从 Eclipse 获得，但它应该可以解决问题。

您可以在“运行配置”中选择要使用的 JRE。默认情况下，它将使用项目“构建路径”中配置的库。此选项在首选项中选择（默认）JRE 或执行环境。您可以使用`.jar`s 的位置来查找 JRE 的位置。

您可以在 Eclipse 首选项中找到已安装的 JRE（包括位置）和执行环境的配置：首先打开“Java”，然后打开“已安装的 JRE”。这应该向您显示位置。

[笔记]

通常您选择一个执行环境，然后配置运行时以配合它，尽管您应该注意，如果您选择一个执行环境而不是直接指向 JRE，您可以访问所有必需的组件。

# ruby - 400 ruby 中的错误请求，但不是 curl

> ID：14590898
> 
> 赞同：7
> 
> 时间：2013-01-29T19:41:27.977
> 
> 标签：ruby, curl, net-http, ruby-1.8.7

我正在尝试在 ruby​​ 中发出 https 发布请求，它在 curl 中工作，但我在 ruby​​ 中收到 400 个错误请求，我无法弄清楚原因。

这是红宝石代码：

```
require 'rubygems'
require 'net/https'
require 'uri'
require 'json'

uri = URI.parse("https://api.parse.com/1/push")
http =  Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

req = Net::HTTP::Post.new(uri.host)
req['Content-Type'] = "application/json"
req['X-Parse-Application-Id'] = "abc123"
req['X-Parse-REST-API-Key'] = "abc123"

req.body = {:data => {:alert => "sup"}, :channels => ["notifications"]}.to_json

resp = http.start{|http| http.request(req)}

puts resp.inspect 
```

这给了我一个`#<Net::HTTPBadRequest 400 BAD_REQUEST readbody=true>`回应。

但是 curl 等效项工作得很好：

```
curl -X POST \
  -H "X-Parse-Application-Id: abc123" \
  -H "X-Parse-REST-API-Key: abc123" \
  -H "Content-Type: application/json" \
  -d '{
    "channels": [
      "notifications"
    ],
    "data": {
      "alert": "sup?"
    }
  }' \
  https://api.parse.com/1/push 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-07-19T16:56:03.707

对我来说，问题不是通过 SSL 发出请求。一旦我设置了以下行，一切正常：

```
http.use_ssl = true 
```

这不是 OPs 问题，但我还是要发布，因为错误消息是相同的，并且该线程是该错误的谷歌热门点击之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T20:17:18.033

你应该指定完整的网址：

```
req = Net::HTTP::Post.new("https://api.parse.com/1/push") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T11:26:58.113

```
def get_job(job_name)

        puts "Posting job #{job_name} to get test update order service"

        get_job_xml ="<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ns=\"http://os.uk/Test/GetUpdateOrders/1.0\">
       <soapenv:Header/>
       <soapenv:Body>
          <ns:GetTestUpdateOrdersReq>
             <ContractGroup>abc</ContractGroup>
             <ProductID>myproduct</ProductID>
             <Reference>#{job_name}</Reference>
          </ns:GetTestUpdateOrdersReq>
       </soapenv:Body>
    </soapenv:Envelope>"

        @http = Net::HTTP.new(@server, @port)

        request = Net::HTTP::Post.new(('/XISOAPAdapter/MessageServlet?senderParty=&senderService=faceNamespace=http://myco.uk/Test/GetUpdateOrders/1.0'), initheader = {'Content-Type' => 'text/xml'})
        request.basic_auth(@username, @password)
        request.content_type='text/xml'
        request.body = get_job_xml
        response = @http.request(request)

      end 
```

我已经定义了这样的方法及其工作原理。

# javascript - 为什么下划线的 _.isUndefined(variable) 会给出未定义变量的错误？

> ID：14590901
> 
> 赞同：9
> 
> 时间：2013-01-29T19:41:32.457
> 
> 标签：javascript, undefined, underscore.js

在 Chrome 中，我从这行代码中得到“Uncaught ReferenceError: targetNode is not defined” `console.log(_.isUndefined(targetNode));`。

当我执行`console.log(targetNode === void(0));`和时，我得到了同样的错误`console.log(targetNode);`。

`typeof targetNode === "undefined"`按预期返回 true，但我的理解是 void(0) 比较更有效。

我可以通过设置默认值来解决这个问题，`targetNode`或者我可以只使用`typeof targetNode === "undefined"`，但我试图理解为什么如果变量未定义，测试变量是否未定义会窒息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T19:47:00.870

当您请求时`targetNode`，它会查找一个局部变量，然后在后续的父范围中查找，直到它到达链的末尾。如果它仍然没有找到它，那就是一个错误。

`typeof`特殊之处在于它的工作方式类似于`try..catch`围绕获取变量并`"undefined"`在捕获中返回。非本地代码（例如`isUndefined`）不能这样做，因为必须解析变量才能将其传递给函数。

但是，如果定义了符号，则可以有效地传递它。例如：

```
function test(param) {
    console.log(_.isUndefined(param));
}
test("argument");
test(); // undefined argument 
```

或者另一个例子：

```
function test() {
    console.log(_.isUndefined(foo)); // true, no error due to hoisting
    var foo = 3;
    console.log(_.isUndefined(foo)); // false, foo is defined now.
} 
```

您还可以指定显式源，例如`window.targetNode`. `window`已定义，因此脚本知道在哪里查找，但是`targetNode`可能未定义属性，在这种情况下您会得到`undefined`.

# mybatis - 如何将 SYSDATE 或 USER（oracle 关键字）作为 IN 参数传递给 mapper xml 中的 mybatis 存储过程调用？

> ID：14590909
> 
> 赞同：0
> 
> 时间：2013-01-29T19:42:19.547
> 
> 标签：mybatis

我有包含所有 IN 参数和 out 参数的 Pojo，但是我的一些存储过程 IN 参数希望我将 USER（oracle 关键字）和 SYSDATE 作为 IN 参数发送。如何在使用 mybatis mapper xml 的存储过程调用中一起使用我的 POJO 对象在参数中和参数中的 Oracle 关键字？我在 Spring 3 中使用 mybatis。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-22T15:41:33.453

插入对象值（#{id}，sysdate）

# css - Div 超出屏幕范围

> ID：14590913
> 
> 赞同：1
> 
> 时间：2013-01-29T19:42:46.750
> 
> 标签：css, html, responsive-design

晚上好！

我的问题很简单，我的 div 超出了屏幕。我有这个 div：

```
<div id="button">Button-text</div> 
```

我的 CSS 看起来像：

```
#button {
    background-color: grey;
    text-align:center;
    padding:10px;
    margin:15px;
    width:100%;
} 
```

我可以用 box-sizing 解决它（但这不适用于旧浏览器），并且它必须是响应式的。有什么解决办法吗？

我还设置了一个 jsfiddle：http: [//jsfiddle.net/2k9Cd/](http://jsfiddle.net/2k9Cd/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:54:54.107

在这种情况下，使用 % 作为边距和填充。

```
#button {
    background-color: grey;
    text-align:center;
    padding:2%;
    margin:3%;
    width:90%;
} 
```

这是[jsfiddle](http://jsfiddle.net/2k9Cd/2/)

注意：宽度 (%) = 100% - [2 x 边距(%)] - [2 x 内边距(%)]。在这种情况下，即 90%=100%-2x3%-2x2%

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:01:20.427

CSS

```
#button {
    background-color: grey;
    text-align:center;
    padding:10px;
    margin:15px;
}
#container {
    background-color: black;
    width:100%;
} 
```

html

```
<div id="container">
    <div id="button">Button-text</div>
</div> 
```

[小提琴](http://jsfiddle.net/2k9Cd/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:53:58.660

`margin:15px auto; padding:10px; width:95%; width:calc(100%-20px);`

这将占用宽度并减少填充。

# oracle - 比较来自两个不同数据库的表 SQL Developer

> ID：14590914
> 
> 赞同：4
> 
> 时间：2013-01-29T19:42:54.733
> 
> 标签：oracle, testing, replication, oracle-sqldeveloper

我正在使用 SQL 开发人员连接到数据库，我目前正在参与复制测试：

以下是源和目标的链接：

```
**Source**
Host Name - n****-s**n.o*s.lab
Port - 1521
Service Name - stgdev

**Target**

Host Name - *pr****1.****b.lab
Port - 1522
Service Name - S****** 
```

谁能告诉我如何编写查询来比较上述两个数据库中的表，数据库是相同的。假设我想比较上述两个数据库中的 Account 表......查询是什么。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:32:51.957

如果两个数据库之间有连接（数据库链接），则可以使用 dbms_comparison 包来设置计划比较。事实上，如果您经常在多个表上执行此操作，您可能应该研究一下。

或者，您始终可以运行 select * from table@source 减去 select @ from table@target 并查看差异，但对于大型数据集，它并不是很有效。

查看 dbms_comparison 包[文档链接](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_comparison.htm#CHDHEFFJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:26:05.480

我为红门工作。我们有一个执行表格数据比较的工具，允许您查看差异并生成一个部署脚本，使数据相同。由于您没有可以在数据库之间使用的数据库链接，我认为我们的工具对您有用。

您将获得 14 天的全功能试用。您可以在此处下载该工具[http://www.red-gate.com/products/oracle-development/](http://www.red-gate.com/products/oracle-development/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T10:18:25.453

Squirrel-sql 有一个[插件](http://squirrel-sql.sourceforge.net/index.php?page=plugins)可以做到这一点！

# html - CSS 径向渐变使 FireFox 崩溃

> ID：14590915
> 
> 赞同：0
> 
> 时间：2013-01-29T19:43:00.253
> 
> 标签：html, css

我正在使用径向渐变为我的网站创建虚线背景样式。我在 CSS 中使用的径向渐变在 Chrome 中运行良好，但是当我在 FireFox 中加载相同的网页时，它会使浏览器崩溃，这意味着浏览器没有响应，我必须使用任务管理器将其关闭。

我认为导致问题的CSS：

```
/* The background is coloured #97cdcd (blue), and the radial-gradient creates the dots which are placed 
    on top of the background. */
body{
    background: -moz-radial-gradient(#a8d4e1 15%, transparent 16%),
                -moz-radial-gradient(#a8d4e1 15%, transparent 16%),
                #99c9d3;
    background: -webkit-radial-gradient(#a8d4e1 15%, transparent 16%),
                -webkit-radial-gradient(#a8d4e1 15%, transparent 16%),
                #99c9d3;
                background-color: #97cdcd;
    background-position: 0 0, 80px 80px;
     -moz-background-size:7px 7px;
    -webkit-background-size:7px 7px;
    background-size: 7px 7px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:11:24.760

> 我不是 FF 用户，所以我没有下载浏览器的附加组件。我只需要 FF 来测试浏览器的兼容性。

作为一个一个月大的问题，我猜这个问题已经解决了。但是，如果您只想在 Firefox 中访问您的扩展程序和插件：

1.  点击`Firefox`右上角的。
2.  点击“附加组件”
3.  从那里您可以查看您的扩展和插件。

很有可能，由于您不是 Firefox 用户，您可能不会安装任何扩展程序。但是，您很可能会有一些与您在计算机上安装的某些程序相关的插件。

> 因此，如果它是导致此问题的附加组件，您认为可能是哪个附加组件？

您可以通过单击`Disable`其名称左侧的按钮来禁用您可能拥有的任何扩展或插件。这不会导致任何内容被删除，因此如果您需要，您可以简单地将它们全部禁用，然后在以后重新启用它们。

# python - Pygame安装不起作用？

> ID：14590918
> 
> 赞同：2
> 
> 时间：2013-01-29T19:43:09.687
> 
> 标签：python, installation, osx-lion, pygame

我正在尝试在我的 Mac 上安装 pygame。
我正在使用 python 2.7 并下载了 2.7 的 pygame。
我做正常的安装。
然后，当我进入 shell 并键入时，`import pygame`
我收到此错误：

```
Traceback (most recent call last):
    File "<pyshell#2>", line 1, in <module>
        import pygame
    File "/Library/Frameworks/Python.framework/Ve… line 95, in <module>
        from pygame.base import *
    ImportError: dlopen(/Library/Frameworks/Python.framew… 2): no suitable image found. Did find:
    /Library/Frameworks/Python.framework/… no matching architecture in universal wrapper 
```

有谁知道发生了什么？

顺便说一句，我正在使用 Lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:49:14.713

从 Python.org 下载官方 Mac Python。系统自带的苹果不支持pygame。

# jquery - jQuery，单击时如何仅使用子处理程序

> ID：14590929
> 
> 赞同：1
> 
> 时间：2013-01-29T19:43:36.973
> 
> 标签：jquery, onclick

我有一个简单的html：

```
<ul>
   <li>
      <img src"..."/>
      <div>...</div>
   </li>
   <li>
      <img src"..."/>
      <div>...</div>
   </li>
   <li>
      <img src"..."/>
      <div>...</div>
   </li>
</ul> 
```

我有一个 JavaScript（使用 jQuery）代码。其中我有两个`click`处理程序：一个处理程序应用于`<li>`元素，一个处理程序应用于`<img>`元素。

**问题**：如何分别使用这两个处理程序？当用户单击时，我只想使用`<li>`'s click 处理程序，而当用户单击标签时，我只想使用 's 处理程序。我如何通过 jQuery 实现这个？`<li>``<img>``<img>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:46:05.440

只需`event.stopPropagation`在`img`处理程序上使用。见下文，

```
$('img').click(function (e) {
   e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:46:21.367

从您的`li`处理程序中检查目标：

```
$('li').click(function (e) {
    if (e.target).is('img') return;
    // Now run the rest of your code...
}); 
```

# django - 为 Django 编写测试

> ID：14590937
> 
> 赞同：0
> 
> 时间：2013-01-29T19:44:29.073
> 
> 标签：django, testing

我为 Django 写了一个小测试。它总是返回 true，这是不对的。代码附在下面。我想不通为什么？谢谢你的帮助。

```
from django.tests import TestCase
from myapp.models import Content

class SimpleTest(TestCase):
    def test_add_user(self):
        cnt = Content('en', 'hello world!')
        cnt.save()
        self.assertEqual(cnt.text, 'hello world again!') 
```

我通过在 myapp/ 下创建一个 tests/ 文件夹来使其工作。然后我将 test.py 移动到 myapp/tests/，我也将一个`__init__.py`放到同一个文件夹中。然后它工作。

谢谢。

# sql-server - 为什么不从表中删除旧列？

> ID：14590940
> 
> 赞同：0
> 
> 时间：2013-01-29T19:44:40.363
> 
> 标签：sql-server, tsql, indexing, alter-table

我的老板相信你永远不应该从生产中的表中删除列（它可能会弄乱索引）。多年来，这种“实践”导致我们的许多表变得臃肿，包含数百个未使用的遗留列。

除了必须重构我们的（生成的）数据层之外，还有什么理由不从表中删除未使用的列吗？我的老板是否正确，它可能会损坏和索引或有其他副作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:35:42.137

删除列时，我从未遇到过类似的情况。您必须清理索引，因为我不相信您可以删除索引当前使用的列。但是无论如何您都应该这样做，因为在索引中保留未使用的列不会提高性能；它更有可能损害性能，因为索引中的列与所需的列不匹配。

此外，通过保留未使用的列，访问将变慢，因为不必要的列需要额外的空间（这会增加行大小，这意味着读取速度较慢，单个数据页上的行数也会减少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:51:34.400

我看到的唯一副作用是通过减小表的大小和更好的不使用空列（如果它们是）的索引来提高性能。您无法删除索引正在使用的列，因此无论如何您都必须重新创建索引。继续并首先在测试环境中清理您的表，进行足够的测试以确保没有副作用（它不会），然后在生产中应用您的更改。另外，放开您的数据/业务建模师。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:43:13.050

嗯......我开始考虑它，我想出了一个上面没有提到的问题。如果查询直接引用列，则删除列可能会破坏视图、函数和存储过程。在维护良好/优化的系统中，这可能不是问题（如果确实没有被使用，则不应在任何地方引用它）。

# ruby - Ruby 中的 SSL 客户端

> ID：14590946
> 
> 赞同：0
> 
> 时间：2013-01-29T19:45:20.073
> 
> 标签：ruby

这是来自 Ruby Docs (1.9.3) 的示例代码

```
require 'socket'
require 'openssl'

tcp_client = TCPSocket.new 'localhost', 5000
ssl_client = OpenSSL::SSL::SSLSocket.new client_socket, context
ssl_client.connect

ssl_client.puts "hello server!"
puts ssl_client.gets 
```

用 Ruby (1.9.3) 运行它会给我这个错误：

```
try.rb:4:in `<main>': undefined local variable or method `client_socket' for main:Object (NameError) 
```

为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:48:25.857

你有要求吗？

```
require 'openssl' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:19:43.433

你没有定义`client_socket`：

```
ssl_client = OpenSSL::SSL::SSLSocket.new client_socket, context 
```

根据[文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/SSL/SSLSocket.html#method-c-new)：

> 从 io 创建一个新的 SSL 套接字，该套接字必须是一个真正的 ruby​​ 对象（不是响应读/写的类似 IO 的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T06:01:48.300

将 client_socket 更改为 tcp_client。

如果您正确阅读文档，您会发现这是一个错字。

您正在做的是将 tcp 客户端套接字传递给 openssl 新函数。例如，他们在说什么：

OpenSSL::SSL::SSLSocket.new name_of_your_socket, name_of_your_context

因此，在您的情况下，您的套接字名称是 tcp_client （而不是 client_socket），因此请传入。

# visual-studio-2010 - CMake 配置失败。“cl.exe 无法编译简单的测试程序”

> ID：14590947
> 
> 赞同：25
> 
> 时间：2013-01-29T19:45:31.980
> 
> 标签：visual-studio-2010, cmake

我正在尝试使用 CMake 为 MSVC++2010 构建解决方案。由于我安装了不再工作的 Visual Studio 2012。CMake 带有以下错误消息：“C 编译器“C:/Program Files (x86)/Microsoft Visual Studio 10.0/VC/bin/cl.exe”无法编译简单的测试程序。”

在为我的问题搜索解决方案时，我发现了这个主题（[Cmake is Unable to Configure Project for Visual Studios 10 amd64](https://stackoverflow.com/questions/14319247/cmake-is-unable-to-configure-project-for-visual-studios-10-amd64/14471934#14471934)）虽然解决了我的问题，但该解决方案对我不起作用。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T12:10:25.637

我在Win7上遇到了同样的问题。
对我有用的是@Andre 在评论中建议的：

1.  右键单击-> `cl.exe`VS 安装目录中的属性（确切路径出现在 CMake 错误中）；
2.  选择兼容性选项卡；
3.  在“权限级别”框中选中“以管理员身份运行此程序”。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-03T20:06:45.563

我有同样的问题。上述解决方案对我不起作用。[看了这篇文章](http://delta3d.org/forum/viewtopic.php?showtopic=22426)后，我的问题得到了解决。

首先，检查您的系统上是否有 .NET 4.5。如果你这样做，那很可能会导致问题。尝试升级到 VS2010 SP1 或将 .NET 降级到 4.0

**原因：**

出现此错误是因为您在系统中实际安装了 Visual C++ 2010 之后安装了 Visual C++ 2012；另一个原因是因为 .net Framework 4.5 取代了 .net Framework 4.0；.net 框架损坏的文件；

**怎么解决**

从系统中卸载 .NET Framework 4.5；然后下载 .NET Framework 4.0 并安装它；这应该可以解决您的问题；

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-14T15:46:53.970

我遇到了这个问题，我通过这种方式解决了。您应该在控制台中运行 cmake，命令如下

```
>vcvars32  (to set some system vars, C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\vcvar32.bat)

>cmake .. -G"NMake Makefiles" (.. is your code folder) 

>nmake  (It will work well!) 
```

您应该在一个控制台中执行此操作，不要打开另一个控制台。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-11T09:57:03.643

我遇到了同样的问题。我通过在 cmake 之前添加一个命令来解决

`call "C:/Program Files (x86)/VC/vcvarsall.bat" amd64`

vcvarsall.bat 的路径和架构可能在您的计算机上有所不同。

根据[vcvarsall.bat 的用法](https://msdn.microsoft.com/en-us/library/f2ccy3wt.aspx)，该命令是为命令行编译设置适当的环境变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-03T21:22:06.600

我遇到了类似的问题，

就我而言，以管理员身份运行 Visual Studio 2017 并应用@Adi Shavit 的答案是有效的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-23T12:42:30.093

对于 Visual Studio 2017 并使用 cmake，我收到以下错误消息

```
-- Selecting Windows SDK version 10.0.17134.0 to target Windows 10.0.18363.
-- The C compiler identification is MSVC 19.14.26433.0
-- The CXX compiler identification is MSVC 19.14.26433.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - failed
-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Professional/VC/Tools/MSVC/14.14.26428/bin/Hostx86/x64/cl.exe
-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Professional/VC/Tools/MSVC/14.14.26428/bin/Hostx86/x64/cl.exe - broken
CMake Error at C:/Program Files/CMake/share/cmake-3.18/Modules/CMakeTestCCompiler.cmake:66 (message):
  The C compiler

    "C:/Program Files (x86)/Microsoft Visual Studio/2017/Professional/VC/Tools/MSVC/14.14.26428/bin/Hostx86/x64/cl.exe"

  is not able to compile a simple test program. 
```

我通过运行 vcvars140.bat 脚本设置构建环境解决了这个问题（如下所示）。

```
C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\Common7\Tools\vsdevcmd\ext\vcvars> .\vcvars140.bat 
```

# facebook-javascript-sdk - 如何从我的 Facebook 应用程序中注销？

> ID：14590953
> 
> 赞同：-1
> 
> 时间：2013-01-29T19:45:41.777
> 
> 标签：facebook-javascript-sdk

我正在使用 facebook JavaScript SDK，我只想从我的应用程序中注销并保持用户的 Facebook 会话处于打开状态。

我尝试使用函数 FB.logout()，但他们在文档中所说的是：“将用户从您的网站和 Facebook 中注销”。我不希望那样。

[http://developers.facebook.com/docs/reference/javascript/FB.logout/](http://developers.facebook.com/docs/reference/javascript/FB.logout/)

有什么建议或代码片段吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:29:35.893

> 我只想从我的应用程序中注销并保持用户的 Facebook 会话处于打开状态。

没有从应用程序“注销”之类的东西。

当用户登录 Facebook 并且您的站点嵌入了 JS SDK 时，当用户访问您的站点时，Facebook 会识别该用户，并获得一个临时访问令牌，该访问令牌将持续大约两个小时。

在令牌过期之前使其失效的唯一方法是使用`FB.logout`.

您可以删除用户授予您的应用程序的权限 - 但是您下次访问时必须再次请求它们。他们是需要的。

* * *

除此之外，我几乎想不出我作为用户只想退出应用程序，而不是同时退出 Facebook 的场景。

# python - 使用 python 改进 bash 脚本

> ID：14590955
> 
> 赞同：2
> 
> 时间：2013-01-29T19:45:53.977
> 
> 标签：python, linux, bash, shell, unix

我将如何减少以下冗余？也就是说，有没有办法将两个几乎相同的语句组合成一个？

```
FULFILLMENT="/Users/david/Desktop/pds" # "/Volumes/FulfilmentArray/"
ARCH1="/Users/david/Desktop/etc" # "/Volumes/Arch_01/"

FILE="/tmp/files.txt"

# find all the paths and print them to a file
sudo find $FULFILLMENT -ls | python -c '
import sys
for line in sys.stdin:
    r = line.strip("\n").split(None, 10)
    fn = r.pop()
    print ",".join(r) + ",\"" + fn.replace("\"", "\"\"") + "\""
' > $FILE &&

sudo find $ARCH1 -ls | python -c '
import sys
for line in sys.stdin:
    r = line.strip("\n").split(None, 10)
    fn = r.pop()
    print ",".join(r) + ",\"" + fn.replace("\"", "\"\"") + "\""
' >> $FILE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:48:21.897

Find 可以在一个命令中遍历多个目录：

```
FULFILLMENT="/Users/david/Desktop/pds" # "/Volumes/FulfilmentArray/"
ARCH1="/Users/david/Desktop/etc" # "/Volumes/Arch_01/"

FILE="/tmp/files.txt"

# find all the paths and print them to a file
sudo find "$FULFILLMENT" "$ARCH1" -ls | python -c '
import sys
for line in sys.stdin:
    r = line.strip("\n").split(None, 10)
    fn = r.pop()
    print ",".join(r) + ",\"" + fn.replace("\"", "\"\"") + "\""
' > $FILE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:15:46.930

你可以做：

```
cmd='
import sys
for line in sys.stdin:
    r = line.strip("\n").split(None, 10)
    fn = r.pop()
    print ",".join(r) + ",\"" + fn.replace("\"", "\"\"") + "\""
'
sudo find $FULFILLMENT -ls | python -c "$cmd" >> $FILE
sudo find $ARCH1 -ls | python -c "$cmd" >> $FILE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:15:42.487

尽管以下输出略有不同，但我怀疑您会更满意：

```
FULFILLMENT=/Users/david/Desktop/pds
ARCH1=/Users/david/Desktop/etc
exec > /tmp/files.txt

find $FULFILLMENT $ARCH1 -exec stat -c '%i,%b,%A,%h,%U,%G,%y,%n' {} \; 
```

日期的格式不同，`stat`如果您不`find`使用 POSIXLY_CORRECT 调用，可能会报告不同的块大小。这不会尝试转义文件名中的引号，也不会尝试将文件名放在引号中，因为您显然不担心可能包含逗号的文件名，因此我们可以假设输出可以可靠地解析为 csv 而不必担心引号。

# sqlite - SQLITE 和自动索引

> ID：14590956
> 
> 赞同：15
> 
> 时间：2013-01-29T19:45:59.967
> 
> 标签：sqlite, indexing, indices

我最近开始探索 sqlite 中的索引。我能够成功创建包含所需列的索引。

完成此操作后，我查看了数据库以查看索引已成功创建，但发现 sqlite 已经为我的每个表自动创建了索引：“sqlite_autoindex_tablename_1”

这些自动生成的索引使用了每个表的两列，这两列构成了我的复合主键。这只是使用复合主键时 sqlite 做的正常事情吗？

由于我将根据这两列进行大部分查询，因此手动创建索引是否有意义，它们完全相同？

索引新手非常感谢任何支持/反馈/提示等 - 谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T20:26:53.663

SQLite 需要一个索引来强制执行 PRIMARY KEY 约束——如果没有索引，强制执行约束会随着表大小的增长而显着减慢。约束和索引并不相同，但我不知道有任何关系数据库不会自动创建索引来强制执行主键。所以是的，这是任何关系数据库的正常行为。

如果创建索引的目的是优化搜索，其中您有一个涉及索引中*第一列*的可索引搜索词，那么没有理由在列上创建额外的索引——SQLite 将使用自动创建的索引.

如果您的搜索将涉及索引中的*第二*列而不包括第一列的可索引术语，则您需要创建索引。当搜索中未指定索引的头列时，SQLite（或我知道的任何其他关系数据库）都不能使用复合索引来优化过滤。

# python - “排除模式”的python glob

> ID：14590959
> 
> 赞同：2
> 
> 时间：2013-01-29T19:46:10.507
> 
> 标签：python, regex, wildcard, glob

基本上我想使用 glob.glob 模块在 python 中筛选以下文件：

```
log_fasdsaf
log_bifsd72q
log_asfd8
... 
```

但不包括：

```
log_fdsaf_7832
log_fsafn_fsda
log_dsaf8_8d
... 
```

天真地玩弄 linux 通配符（例如 log_ *[!_]*但显然不起作用）。[在 unix/linux shell 中进行模式匹配时，如何使用反向或负通配符？](https://stackoverflow.com/questions/216995/how-can-i-use-inverse-or-negative-wildcards-when-pattern-matching-in-a-unix-linu)似乎没有帮助，感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:53:57.120

你用了错误的字符说`none of this character`...

如果您要查找`log_`开头有的任何文件，然后是一堆没有的字符`_`，那么您只需要这样做：

`log_[^_]*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:54:04.297

你很亲密。您正在寻找的模式是`log_[^_]*`. 它说它必须有 'log_' 后跟零个或多个非下划线字符。

# python - Python 部署到 CGI 主机？

> ID：14590965
> 
> 赞同：0
> 
> 时间：2013-01-29T19:46:31.160
> 
> 标签：python, web, cgi, web-scraping, cgi-bin

我开发了一个 CGI Python 应用程序，它可以在本地服务器上运行，但是如何编译它以在远程 Python CGI 主机上运行它？

该应用程序使用

```
import cgitb
import cgi
import requests
import cookielib
import bleach
import re 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:21:38.530

这是一个要问您的网络托管公司的问题。我使用 Dreamhost，您可以查看一些 python cgi[脚本示例](http://wiki.dreamhost.com/Python#Sample_Python_CGI_script)以及包含更多信息的[wiki 。](http://wiki.dreamhost.com/Python)不过，这可能会因您的需要而有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:47:17.093

假设这个结构：

```
(root)
 |- html
 |  |- .htaccess
 |  |- ...
 |- lib
    |- lib1
    |  |- script1.py
    |- lib2
       |- script2.py

import sys
for path in ("/lib/lib1", "/lib/lib2",...):
    if not path in sys.path:
        sys.path.append(path)

import script1        # should work with the right paths 
```

Aaaand...许多提供商需要在“.htaccess”文件中包含某些内容才能使 python 文件可执行。

# ios - iOS：任何人都因为忽略 kCLErrorDenied 而拒绝了一个应用程序

> ID：14590972
> 
> 赞同：1
> 
> 时间：2013-01-29T19:46:51.610
> 
> 标签：ios, location, cllocationmanager

CLLocationManagerDelegate locationManager:didFailWithError 的文档说：

如果用户拒绝您的应用程序使用定位服务，此方法将报告 kCLErrorDenied 错误。收到此类错误后，您应该停止定位服务。

但是，如果您只是忽略该错误，则无论如何您都不会获得任何位置更新。忽略该错误还有一个好处，即如果用户转到“设置”并为您的应用启用定位服务，则下次您的应用进入前台时，定位服务更新会重新开始。

因此，我计划忽略来自 locationManager:didFailWithError 的所有错误，除非有人可以发现任何问题或认为该应用程序将被拒绝。

一个问题可能是电源使用，但我认为一旦发生错误，就不会使用额外的电源，因为我没有得到任何更新或任何东西。

我的后备方案是在我进入前台时重新启用更新。这是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:19:07.277

我直到最近才处理 kCLErrorDenied 并且对 Apple 没有任何问题。它不应该有任何问题，因为您的应用程序的行为就像没有位置服务一样。但是，您应该处理它并向用户提供一些说明以打开定位服务，尤其是在定位服务是您应用程序的主要部分的情况下。

# ios - 我可以在@try catch 块中安全地包装“CoreData 无法完成错误”错误吗

> ID：14590974
> 
> 赞同：6
> 
> 时间：2013-01-29T19:46:55.580
> 
> 标签：ios, core-data

我理解为什么会发生此错误：当您尝试访问在另一个线程上的托管对象上下文中删除的 CoreData 对象时，因此被设置为“故障”对象，因此任何保留的引用将不再指向有效的核心数据对象。

我正在使用 NSFetchedResultsController。

我已确认所有代码均已正确实施。我有 2 个托管对象上下文，一个用于 BG 线程，一个用于主线程。

我已经确认主线程订阅了 NSManagedObjectContextDidSaveNotification 下的通知。

我已确认当此通知触发时，我会在主线程托管对象上下文中执行 mergeChangesFromContextDidSaveNotification:。

我没有在任何地方保留这些对象，但我正在为 NSFetchRequest 设置批处理大小（这可能是问题吗？）

然而，我仍然偶尔会收到“CoreData 无法完成错误”错误。

在我的特定应用程序中，这通常发生在某种“数据绑定”过程中，因此我可以安全地丢弃故障对象并继续前进。我想通过将数据绑定的循环内部包装在 @try-catch 块中并跳过我得到 CoreData 错误的行来做到这一点。

我可以用 CoreData 安全地做到这一点吗？或者我是否需要在遇到故障后完全转储托管对象上下文。

我确实检查了这个关于[如何检查 CoreData 对象是否为错误的](https://stackoverflow.com/questions/4340445/how-can-i-tell-whether-an-nsmanagedobject-has-been-deleted/7896369#7896369)问题，如果我不能安全地假设我的 @try-catch 块不会导致其他问题，这可能是我实现的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-14T07:03:55.310

我们可以使用“existingOjectWithId”并检查返回对象上的 nil，而不是使用 try-catch。

```
- (NSManagedObject*)existingObjectWithID:(NSManagedObjectID*)objectID error:(NSError**)error 
```

如果已在上下文中注册，则上面返回指定 ID 的对象，或者将对象错误地放入上下文中。***如果对象无法获取、不存在或无法出错，则返回 nil***。与 -objectWithID 不同：它从不返回错误。

# javascript - 如何用 jQuery ajax 替换 javascript ajax？

> ID：14590976
> 
> 赞同：1
> 
> 时间：2013-01-29T19:47:07.773
> 
> 标签：javascript, jquery, ajax

**我想做的事？**
我正在考虑将 javascript ajax 更改为 jQuery ajax。它似乎更短，我看到很多人使用它，但我无法真正让它工作。

**到目前为止我有什么？**
我有一个元素：
`<li id="unique_id" onmousedown="check_element(event, this)">1</li>`
当我单击元素时，它会检查按下了哪个键，如果它的 mouse1 然后检查元素的背景。如果元素没有背景颜色，则将其更改为“红色”并使用 ajax 将元素的 id 添加到 MySQL 数据库。如果它已经有红色背景（意味着它是之前添加的），它会使用 ajax 从数据库中删除它。

**代码**
检查功能

```
function check_element(evt, e){
    if(evt.which == 1){
        if(e.style.background == "") {
            e.style.background = "red";
            send_with_ajax("add", e);
        } else {
            e.style.background = "";
            send_with_ajax("delete", e);
        }
    }
} 
```

Ajax（使用 javascript）：

```
function send_with_ajax(action, e){
    var xmlhttp;
    if (window.XMLHttpRequest){
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    } 
    xmlhttp.open("GET","ajax/send_calendar.php?data="+e.id+"&action="+action+"",true);
    xmlhttp.send();
} 
```

send_calendar.php 没有什么特别之处。只需从数据库中获取变量`$_GET['']`和 INSERTS 或 DELETES 值。问题是，我怎样才能改变这个函数来使它成为 jQuery Ajax？

**我试过什么？**

```
function send_with_ajax(action, e){
    $.Ajax({
        type: "GET",
        url: "send_calendar.php",
        data: "data="+e.id+"&action="+action+"",
        success: function(msg){
            alert( "Data Saved: " + msg ); //never shows this alert
        }
    });
} 
```

我也得到错误：
`Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'Ajax'`

PS。以前从未使用过 jQuery Ajax，所以我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:50:25.630

它是[`$.ajax`](http://api.jquery.com/jQuery.ajax/)（区分大小写），而不是`$.Ajax`.

另请注意，该`data`选项接受一个对象作为输入，`$.ajax`并将自行进行参数序列化。

```
$.ajax({
    type: "GET",
    url: "ajax/send_calendar.php",
    data: {
        "data" : e.id,
        "action": action
    },
    success: function(msg) {
        alert("Data Saved: " + msg);
    }
}); 
```

还存在 GET 和 POST 请求的简写方法，[`.get()`](http://api.jquery.com/jQuery.get/)和[`.post()`](http://api.jquery.com/jQuery.post/)分别。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T19:57:25.403

如果你打算使用 jQuery，还要确保有正确的包装代码。

```
$(document).ready(function() {

 $.ajax({
       type: "GET",
        url: "send_calendar.php",
        data: "data="+e.id+"&action="+action+"",
        success: function(msg){
            alert( "Data Saved: " + msg ); //never shows this alert
        }
    });

}); 
```

# java - 如何在java中正确复制对象？

> ID：14590981
> 
> 赞同：1
> 
> 时间：2013-01-29T19:47:43.623
> 
> 标签：java, arrays, multidimensional-array

我一直在这个小项目中，我花了大约 20 个小时来解决（没有任何运气或结果）代码中的一个主要问题。现在我发现真正的问题是 copy() 函数不能正常工作。

我究竟做错了什么？

这是我针对特定问题所做的示例：

```
package cloneobject;

import java.util.Arrays;

public class CloneObject {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        clone(new int[3][3]);
    }

    public static void clone(int[][] x) {
        int[][] y = (int[][]) x.clone();
        System.out.println("x=");
        PrintFieldImage(x);
        System.out.println("y=");
        PrintFieldImage(y);
        x[1][1] = 3;        
        System.out.println("x=");
        PrintFieldImage(x);
        System.out.println("y=");
        PrintFieldImage(y);
        y[2][2] = 4;
        System.out.println("x=");
        PrintFieldImage(x);
        System.out.println("y=");
        PrintFieldImage(y);
    }

    public static void PrintFieldImage(int[][] field) {
        if (field != null) {
            int x;
            for (x = 0; x < field.length; x++) {
                System.out.println(Arrays.toString(field[x]));
            }
        } else {
            System.out.println("no field!");
        }
    }
} 
```

这是结果：

```
run:
x=
[0, 0, 0]
[0, 0, 0]
[0, 0, 0]
y=
[0, 0, 0]
[0, 0, 0]
[0, 0, 0]
x=
[0, 0, 0]
[0, 3, 0]
[0, 0, 0]
y=
[0, 0, 0]
[0, 3, 0]
[0, 0, 0]
x=
[0, 0, 0]
[0, 3, 0]
[0, 0, 4]
y=
[0, 0, 0]
[0, 3, 0]
[0, 0, 4]
BUILD SUCCESSFUL (total time: 0 seconds) 
```

现在我希望 x 包含 3，y 包含 4。

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:51:29.290

`clone()`只会做一个浅层克隆。您正在克隆一个二维数组；数组数组。只会克隆顶级数组。如果要进行深度克隆，则必须使用老式`for`循环。

```
int[][] y = new int[x.length][];
for(int i=0; i<x.length; i++) {
    y[i] = x[i].clone();
} 
```

另请参阅[在 java 中复制二维数组](https://stackoverflow.com/questions/1686425/)

# report - 如何计算预渲染 MorphX 报告中的报告页数？

> ID：14590986
> 
> 赞同：3
> 
> 时间：2013-01-29T19:48:10.883
> 
> 标签：report, axapta, dynamics-ax-2009, x++

我们正在尝试强制 morphX 报告的长度为偶数页（以便我们的自动折叠机可以正确处理工作量），但未能成功使用`element.pagesTotal()`。

其他人如何获得元素级别的每个实体报告的页数？

（这是动态斧头 2009）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T21:32:45.850

抱歉，但`pagesTotal`它是一个“神奇”功能，可在报告完成后提供结果，这对您来说太迟了，无法发出`newPage`.

你将不得不数数自己。幸运的是，X++ 非常擅长！

在以下位置声明您的计数器`classDeclaration`：

```
 Counter pc; 
```

在页眉`execute`部分增加您的计数器：

```
 pc++; 
```

在 fetch`newPage`之后添加您的 super() （或在客户编号中断时）：

```
boolean fetch()
{
    boolean ret = super();
    if (pc mod 2 == 1)
        element.newPage();
    return ret;
} 
```

# node.js - 快速路由

> ID：14590987
> 
> 赞同：2
> 
> 时间：2013-01-29T19:48:17.480
> 
> 标签：node.js, express

我正在尝试将不同的 url 请求路由到不同的目录。现在，我正在使用这个：

```
app.use(express.static(root)); 
```

将所有内容路由到我的项目中的特定目录。我需要做的是有条件地路由到该目录，前提是请求不是针对其他目录的子集。例子：

```
if(route == '/blah1'){
    //route to particular folder
}
else if(route == '/blah2'){
    //route to a different folder
}
else{
    //otherwise use static route
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:47:06.010

您可以在层次结构中的不同点“挂载”静态中间件。将默认的“catch-all”目录放在末尾：

```
app.use('/blah1', express.static('/somedir1'));
app.use('/blah2', express.static('/somedir2'));
app.use(express.static('/defaultdir')); 
```

请参阅[express.js 文档](http://expressjs.com/api.html#app.use)。

# jira - AttachFile 锁定附件以在 Windows XP 上删除

> ID：14590991
> 
> 赞同：0
> 
> 时间：2013-01-29T19:48:27.580
> 
> 标签：jira

当我发现这个时，我一直在研究一个插件。我不能确定这种行为之前是否发生在我的机器上（它不在我们的测试服务器上，Linux 机器上），但是在附加文件后，我无法删除它，直到服务器重新启动。我无法通过 UI 或手动导航到服务器目录并尝试从那里删除来删除。

有没有人遇到过这种情况？我的盒子上可能是环保的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T08:01:16.043

很可能这是该文件夹中的权限问题，它允许您的 JIRA 用户（JIRA 实例运行权限的用户）创建文件，但不能删除它们（或者更有趣的东西）:) 尝试删除临时文件夹（其中您上传的附件驻留）并重新创建它，将您的 JIRA 网络用户添加到该文件夹​​的访问列表中。

[删除文件的解决方法是使用Unlocker](http://www.emptyloop.com/unlocker/)，当某个其他进程对文件持有锁定而不必终止该进程时。但请注意，当 Unlocker 解锁文件时，它不会通知锁持有者该文件已被强制解锁。这意味着锁持有者仍然认为它持有打开文件的锁，而它没有持有（文件句柄无效）。这意味着某些应用程序可能会由于本应打开的文件的意外状态而崩溃。顺便说一句，我一直在使用 Unlocker，它很少导致任何崩溃，但最好警告一下。

# ms-access - 在 Access 中隐藏表单上的新行

> ID：14590992
> 
> 赞同：1
> 
> 时间：2013-01-29T19:48:26.860
> 
> 标签：ms-access, vba, ms-access-2010

我的项目有一个带有选项卡的表单，每个选项卡根据在主表单中选择的当前记录（我将主表单的记录称为客户端）显示来自不同表的数据。如果与该客户端关联的子表中存在数据，则显示数据。如果没有，我的表单标题中有一个文本字段，说明没有记录，并带有一个链接，可以打开一个表单以将数据添加到所述子表。表单标题还包含我的连续表单的列标题。

现在，如果在子表单上，我关闭了“允许添加”，那么如果该客户端的子表为空，则它不显示任何数据，并且 form_current 或 form_load 方法似乎没有运行，这是我有隐藏代码的地方列标题并取消隐藏我的“无记录”状态/标题文本框，反之亦然，如果子表单中有数据。如果我打开允许添加，那么我的代码会运行以隐藏列并显示状态文本框，但是当表中有可用数据时，它会在我的结果末尾显示“新行”。我不希望那里有新行。

所以我可以打开允许添加，让我的代码工作，它显示一个额外的新行，或者我可以关闭允许添加，我的代码中断，但我没有额外的新行。

我试图这样做：

```
If Me.NewRecord Then
    Me.field1.Visible = False
End If 
```

但这会产生不希望的结果；在我选择它之前它不会隐藏新行，然后它会隐藏所有字段。我知道它应该是这样工作的，它只是不是我想要的结果。

# c# - C# 中 TryParse() 的通用包装器

> ID：14590995
> 
> 赞同：6
> 
> 时间：2013-01-29T19:48:33.700
> 
> 标签：c#, generics

我正在使用以下方法来提供对各种 Type 类的 TryParse() 方法的快速内联访问。基本上，如果可能，我希望能够解析来自 Web 服务的字符串，否则返回默认值。

```
private Int64 Int64Parse(string value) {
    Int64 result;
    if (!Int64.TryParse(value, out result)) { return default(Int64); }
    return result;
}

private DateTime DateTimeParse(string value) {
    DateTime result;
    if (!DateTime.TryParse(value, out result)) { return default(DateTime); }
    return result;
}

private Decimal DecimalParse(string value) {
    Decimal result;
    if (!Decimal.TryParse(value, out result)) { return default(Decimal); }
    return result;
} 
```

这些是非常重复的，对我来说，暗示可能有一种方法可以将它们包装成一个通用方法。

我被困在以下但不确定如何继续或如何搜索如何继续。

```
private T ParseString<T>(string value) {
    T result;
    if (!T.TryParse(value, out result)) { return default(T); }
    return result;
} 
```

任何帮助，将不胜感激。谢谢。

==编辑== 添加一些上下文。这适用于从特定信用卡计费公司接收回发的听众。我没有在这一步进行验证，因为稍后会在业务规则步骤中进行验证。例如，我不在乎 bank_batch_number 是以 int、string 还是冻干啮齿动物的形式出现的；如果我不能干净地记录我不使用的字段，我不会因异常而停止。我确实关心我们的数据库中存在 ext_product_id 并且在消息中具有与 currency_amount_settled 匹配的价格；如果该测试失败，则交易将被搁置，并记录一个警告，并且我们的 CS 员工和我本人将收到警报。

不过，下面提到的文化是明智的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T19:51:46.860

不，这些方法基本上是完全独立的 - 编译器不知道它与etc`DateTime.TryParse`有任何相似之处。`Int64.TryParse`

您*可以*创建一个`Dictionary<Type, Delegate>`从目标类型映射到方法的映射，然后编写如下内容：

```
private delegate bool Parser<T>(string value, out T result);

private T Parse<T>(string value) where T : struct
{
    // TODO: Validate that typeof(T) is in the dictionary
    Parser<T> parser = (Parser<T>) parsers[typeof(T)];
    T result;
    parser(value, out result);
    return result;
} 
```

您可以像这样填充字典：

```
static readonly Dictionary<Type, Delegate> Parsers = CreateParsers();    

static Dictionary<Type, Delegate> CreateParsers()
{
    var parsers = new Dictionary<Type, Delegate>();
    AddParser<DateTime>(parsers, DateTime.TryParse);
    AddParser<Int64>(parsers, Int64.TryParse);
    return parsers;
}

static void AddParser<T>(Dictionary<Type, Delegate> parsers, Parser<T> parser)
{
    parsers[typeof(T)] = parser;
} 
```

请注意，该`TryParse`模式声明`out`参数的值无论如何都将是该类型的默认值，因此您不需要条件逻辑。这意味着即使是重复的方法也可以变得更简单：

```
private static Decimal DecimalParse(string value) {
    Decimal result;
    Decimal.TryParse(value, out result);
    return result;
} 
```

顺便说一句，请注意，默认情况下，`TryParse`模式将使用线程的当前文化。如果这用于解析来自 Web 服务的传入数据，我*强烈*建议您改用不变文化。（就我个人而言，我*也不会*默默地忽略不良数据，但我认为这是故意的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:52:42.100

```
public delegate bool TryParseDelegate<T>(string str, out T value);

public static T ParseOrDefault<T>(string str, TryParseDelegate<T> parse)
{
    T value;
    return parse(str, out value) ? value : default(T);
} 
```

你可以这样称呼它：

```
long l = ParseOrDefault<long>("12345", long.TryParse); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T20:34:36.353

为什么不直接使用简单的扩展方法呢？

Jon Skeet 关于仅使用各种 TryParse 方法的默认结果的回答很好。*不过，扩展方法*仍有一个不错的方面。如果你经常这样做，你可以在调用代码中完成同样的事情（加上可选地指定一个显式的默认值）在一行代码中而不是三行。

**-- 编辑 --** 我**确实**意识到，在我最初的回答中，我基本上只是提供了一种稍微不同的方式来做作者已经在做的事情。今天早些时候，当我真的很忙时，我发现了这个问题，认为委托和自定义解析器的东西看起来可能有点多，然后在没有*真正*花时间完全理解问题是什么的情况下给出了一个答案。对不起。

以下如何使用（重载）扩展方法和反射？参考[https://stackoverflow.com/a/4740544/618649](https://stackoverflow.com/a/4740544/618649)

警告 Emptor：我的示例没有说明您尝试转换没有 TryParse 方法的类型。调用周围应该有一些异常处理`GetMethod`，等等。

```
/* The examples generates this output when run:

0
432123
-1
1/1/0001 12:00:00 AM
1/1/1970 12:00:00 AM
1/30/2013 12:00:00 PM
-1
12342.3233443

*/

class Program
    {
    static void Main ( string[] args )
        {
        Debug.WriteLine( "blah".Parse<Int64>() );
        Debug.WriteLine( "432123".Parse<long>() );
        Debug.WriteLine( "123904810293841209384".Parse<long>( -1 ) );

        Debug.WriteLine( "this is not a DateTime value".Parse<DateTime>() );
        Debug.WriteLine( "this is not a DateTime value".Parse<DateTime>( "jan 1, 1970 0:00:00".Convert<DateTime>() ) );
        Debug.WriteLine( "2013/01/30 12:00:00".Parse<DateTime>() );

        Debug.WriteLine( "this is not a decimal value".Parse<decimal>( -1 ) );
        Debug.WriteLine( "12342.3233443".Parse<decimal>() );
        }
    }

static public class Extensions
    {
    static private Dictionary<Type,MethodInfo> s_methods = new Dictionary<Type, MethodInfo>();

    static public T Parse<T> ( this string value ) where T : struct
        {
        return value.Parse<T>( default( T ) );
        }

    static public T Parse<T> ( this string value, T defaultValue ) where T : struct
        {
        // *EDITED* to cache the Reflection lookup--NOT thread safe
        MethodInfo m = null;
        if ( s_methods.ContainsKey( typeof( T ) ) )
            {
            m = s_methods[ typeof( T ) ];
            }
        else
            {
            m = typeof( T ).GetMethod(
                 "TryParse"
                 , BindingFlags.Public | BindingFlags.Static
                 , Type.DefaultBinder
                 , new[] { typeof( string ), typeof( T ).MakeByRefType() }
                 , null
                 );
            s_methods.Add( typeof( T ), m );
            }

        var args = new object[] { value, null };
        if( (bool)m.Invoke( null, args ))
            {
            return (T) args[ 1 ];
            }
        return defaultValue;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T19:59:09.277

这是我有时使用的一种方法。如果性能是一个主要问题，那么这不是要走的路，因为 try-catch 块和对 ChangeType 的调用会比特定类型的 TryParse 减慢你的速度。

```
public static bool TryFromString<T>(string value, out T convertedValue)
{
    Type t = typeof(T);
    convertedValue = default(T);
    if (t.Name == "Nullable`1")
        t = System.Nullable.GetUnderlyingType(t);
    if (value != null)
    {
        try
        {
            convertedValue = (T)System.Convert.ChangeType(value, t, CultureInfo.CurrentCulture);
            return true;
        }
        catch
        {
        }
    }
    return false;
} 
```

# c# - 使用服务器文件的路径时，何时需要使用反斜杠或正斜杠（单斜杠或双斜杠）？

> ID：14590996
> 
> 赞同：1
> 
> 时间：2013-01-29T19:48:34.147
> 
> 标签：c#, asp.net, file, iis, path

关于以下代码示例：

```
string baseLocation = HttpContext.Current.Server.MapPath("/");
const string templateName = @"//temp//ExportTemplate.xlsx";
const string generatedLocation = @"{0}//temp//{1}";
var fileName = string.Format("Export-{0}.xlsx", DateTime.Now.Date.ToString("yyyy-MM-dd"));
var newFile = String.Format(generatedLocation, baseLocation, fileName);
File.Copy(baseLocation + templateName, newFile, true); 
```

我们在生产服务器和本地开发环境（通过 IIS 中的站点）上使用它。两者都运行 IIS 7.5。该代码在生产中正常工作，但在本地开发中引发错误：

```
Access to the path 'C:\Path\To\Site\//temp//Export-2013-01-29.xlsx' is denied. 
```

该文件是在本地开发人员上正确创建/复制的，但我猜由于路径中的斜杠不正确，它会出错。应用程序池标识对“临时”文件夹具有完全访问权限。

这带来了几个问题：

*   在这种情况下，'//' 对路径有什么作用？我知道 '\' 是逃避反斜杠的方法，但 '//' 没有意义。
*   使生成的路径在生产服务器上正常工作但在我的本地开发中失败的两个环境的配置是否存在差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:18:46.680

代码应该使用 \，而不是 / 作为文件路径。任何一个

```
const string templateName = @"\temp\ExportTemplate.xlsx"; 
```

或者

```
const string templateName = "\\temp\\ExportTemplate.xlsx"; 
```

可以正常工作。令人惊讶的是，当前版本的代码可以在生产中运行，这可能是因为 windows 被构建为允许文件路径中的正斜杠或反斜杠。（这可以追溯到许多用户也是 UNIX 用户的 DOS 时代）

此外，我建议使用`Path.Combine`而不是仅仅连接文件路径的字符串（这将有助于避免在“C:\Path\To\Site\\temp\Export-2013- 01-29.xlsx”）。前任：

```
File.Copy(Path.Combine(baseLocation, templateName), newFile, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:54:10.630

// 将始终为您提供 // ... 在字符串中使用 @ 时，它是逐字字符串文字，您不需要转义字符。因此，您可以使用 \ 来获取 . 如果删除 @，则需要使用 \ 来获取 . 当您使用文件路径时，它始终是一个反斜杠（）。使用 URL 路径时，它始终是正斜杠 (/)

# git - 我必须在合并每个文件后退出我的 Git diff 工具吗？

> ID：14590998
> 
> 赞同：4
> 
> 时间：2013-01-29T19:48:40.337
> 
> 标签：git, git-merge, git-diff

我正在使用 GUI difftool（p4merge、kdiff3、araxis 等）来查看我的 Git 合并。这很好用，但似乎我需要在编辑合并中的每个文件后退出该工具，以便 Git 移动到下一个文件并完成合并。有没有办法避免这种情况？

我可以以某种方式遍历合并中的所有文件而不退出每个文件之间的合并工具吗？更好的是，有没有办法让所有文件一起打开（例如）我可以协调我的合并编辑，可能通过在文件之间来回移动），然后在我完成后关闭合并工具和他们一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:13:04.197

是的，您需要在合并中的每个文件后退出您的 git diff 工具。这就是 git 作为命令行实用程序与 diff 工具进行通信的方式。更重要的问题是：为什么这对你来说是个问题？

如果您想在解决合并冲突时打开另一个文件，则必须运行另一个合并工具实例。`--ours`您可以通过和`--theirs`切换到访问其他版本的文件`git checkout`。但是你可能会更好地使用类似的东西`git checkout-index --stage=all`，它将所有版本存储在你的临时目录中。

您可以通过运行`git mergetool -y`而不是`git mergetool`.

如果您想按特定顺序合并文件，请调用`git status`以查看需要解析的文件列表，然后调用`git mergetool -y <filename>`每个文件。

最后但并非最不重要的一点是，您可以使用`git gui`- 选择需要合并的文件并从右侧面板的上下文菜单中启动合并工具。这样，您可以按任何顺序合并并一次打开多个合并工具。

# excel - 将单元格引用到不同工作表中的范围

> ID：14590999
> 
> 赞同：0
> 
> 时间：2013-01-29T19:48:52.300
> 
> 标签：excel, excel-formula

如何将单元格引用到excel中的范围？

例如：我想将 Sheet1 的单元格`A1`引用*到*`A1:A10`Sheet3*的*范围。

*   范围内只有一个单元格`A1:A10`有值，或者没有单元格有值。
*   但是该范围内没有两个单元格将具有价值。

因此，如果*Sheet3*`A6`中 Range`A1:A10`的单元格具有此值，那么我想在*Sheet1*的单元格中显示该值。*`A1`*

 **如何最好地完成这个？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:42:27.507

```
=IFERROR(LOOKUP(2,1/(Sheet3!A1:A10<>""),Sheet3!A1:A10),"") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:48:00.710

如果只有一个单元格有值，您可以使用`=sum(Sheet3!A1:A10)`. `0`如果没有填写任何内容，它将返回一个值。**