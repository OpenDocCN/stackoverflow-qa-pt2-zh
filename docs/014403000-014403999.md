# StackOverflow 问答 14403000-14403999

# drupal - Flex Slider (v2) 将自身移出容器 div

> ID：14403000
> 
> 赞同：0
> 
> 时间：2013-01-18T16:15:07.613
> 
> 标签：drupal, flexslider

在 Drupal 中，我使用视图在容器 div 内生成正常的 UL 列表。

然后激活 flexslider 并将 ul 列表从容器 div 中取出并创建一个名为“flex-viewport”的新 div 容器作为我原始容器 div 的兄弟，现在将 UL 放在那里。

我完全不知道为什么或如何，有什么想法吗？我只能假设它在 Flexslider.js 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:09:33.157

这是 jQuery select 是 flexslider，而不是容器 div 的情况。`$('.flexslider').flexslider()`应该是这样`$('.view-content').flexslider()`

注意：考虑层次结构以防止 flex 滑块拾取所有视图内容 div`$('.flexsliderwrap .view-content').flexslider()`

# c# - 如何获取和安装根 CA 证书

> ID：14403002
> 
> 赞同：1
> 
> 时间：2013-01-18T16:15:15.853
> 
> 标签：c#, .net, ssl, ssl-certificate, x509certificate

我遇到了 SslStream.AuthenticateAsClient 需要“很长时间”（约 15 秒）的问题。这是一个已知问题，并在此[MSDN 博客文章](http://blogs.msdn.com/b/alejacma/archive/2011/09/27/big-delay-when-calling-sslstream-authenticateasclient.aspx)中进行了说明。

它提供了两种可能的解决方案

> 总而言之，这种行为是设计使然。我们有以下选择： 1) 在本地安装根 CA 证书，这样我们就不需要去 Internet 获取受信任的根 CA 证书列表。2) 通过 GPO 禁用自动根证书更新功能，这样我们无论如何都不会上网。

有人告诉我，从安全角度来看，选项 2 不是一个好主意，所以我需要执行选项 1。

问题是我不知道如何获得根 CA 证书。一旦我拥有它，我可能会弄清楚如何使用 certutil 来安装它。

我可以在这个函数中打破我的执行

```
private static bool CertificateValidationCallback(
            object oSender,
            X509Certificate oCertificate,
            X509Chain oChain,
            SslPolicyErrors oSslPolicyErrors)
        {

        } 
```

所以我想我的问题是：

如何获得根 CA 证书？我需要什么信息才能得到它？我从哪里得到这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:56:34.310

X509 标准的授权信息访问扩展包含根 CA 证书的位置信息 (URL)，但它是一个可选字段。

[https://www.rfc-editor.org/rfc/rfc5280#section-4.2.2.1](https://www.rfc-editor.org/rfc/rfc5280#section-4.2.2.1)

```
var cert = new X509Certificate2(certData);
var authInfoExtnsions = from ext in cert.Extensions.Cast<X509Extension>()
                        where ext.Oid.Value == "1.3.6.1.5.5.7.1.1"
                        select ext;
foreach (var authInfoExtnsion in authInfoExtnsions)
{
    Console.WriteLine(Encoding.UTF8.GetString(authInfoExtnsion.RawData));
} 
```

`authInfoExtnsion.RawData`是一个复杂的 ASN.1 结构（您可以在 X509 标准中找到详细信息），此代码不会为您提供根 CA 证书的 URL。您需要解析并获取 URL。正如我所说的权威信息访问是一个可选的扩展，但如果它存在，你会注意到根 Ca 证书的 URL 可以在控制台中读取。

# javascript - fnObj = window[functionName] 不是函数问题 - eval() 效果很好

> ID：14403003
> 
> 赞同：6
> 
> 时间：2013-01-18T16:15:25.113
> 
> 标签：javascript, jquery, ajax

我只是过度使用我的 JS 代码并希望`eval()`用`window[functionName]`. 所以我只是在 JSFiddle 中做了一个快速测试，所有的工作都很好，下面的行：

```
var fnName = "Page_test";
var foo = "yammy";
var Page_test = function(bar) {
    return bar;
}
var Obj = window[fnName];
alert(Obj(foo)); 
```

（*链接到这个 JSFiddle* -> [http://jsfiddle.net/juSHj/](http://jsfiddle.net/juSHj/)）

现在我尝试将以下代码行替换为`eval()`具有上述概念的邪恶：

**旧代码：（**像魅力一样工作/在ajax成功后被解雇）

```
 ...
 success: function(ret) {
     if(returnFnAjaxForm != "") {
          eval(returnFnAjaxForm+"('"+encodeURI(jQuery.trim(ret))+"')");
     }
 }
 ... 
```

**新代码：**

> 返回：未捕获的类型错误：对象 [object Window] 的属性 'dummyFn' 不是函数

```
...
success: function(ret) {
     if(returnFnAjaxForm != "") {
          fnObj = window[returnFnAjaxForm];
          if(typeof(fnObj) == "function") { // this is optional
               fnObj(encodeURI(jQuery.trim(ret)));
          }
     }
} 
... 
```

我很好奇我在哪里犯了错误。是的，我尝试触发的功能存在并且用`var`. 这个概念可能无法在 ajax 响应中使用吗？

谢谢你的帮助。

（使用 jQuery）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T16:20:02.953

如果你在闭包中声明你的函数，它就不是 window 的成员。例子 ：

```
var in_window = '132';
alert(window['in_window']); // Alert 132

(function() {
    var not_in_window = '132';
    alert(window['not_in_window']); // Alert undefined
})(); 
```

因此，请注意声明`Page_test`变量的位置。如果你真的想放入窗口，你可以这样做`window.Page_test = Page_test`。

您能做的最好的事情就是为所有可能的回调使用一个对象。像这样 ：

```
var callbacks = {
    foo : function() {},
    foo1 : function() {},
    foo2 : function() {},
    foo3 : function() {}
};

var obj = callbacks[fnName]; 
```

# java - Java，简单的控制台计算器有什么问题

> ID：14403007
> 
> 赞同：-2
> 
> 时间：2013-01-18T16:15:34.553
> 
> 标签：java, console, calculator

我试图用java写一个简单的计算器，因为我想学习这门语言。但我无法计算“C”变量。请帮忙。怎么了？

```
 import java.util.*;

//Simple calculator

public class calc
{
    public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);
        double a, b, c;

        System.out.print("Write first number");
        a = in.nextDouble();
        System.out.print("and write second");
        b = in.nextDouble();
        System.out.print("Choose the operation   1.Addition  2.Subtraction   >Please write the number of operation ");
        double somethin = in.nextDouble();
        int addition = 1;
        int subtraction = 2;
        if (somethin >= addition) 
        {
        c = a + b; 
        }
        else if (somethin >= subtraction)
        {
        c = a - b;
        }
        {
        System.out.println(c); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:19:46.967

看起来错误是代码始终处于`addition`条件下，因为您正在比较最后一个输入值是否大于或等于加法。

```
if (somethin >= addition) 
{
    c = a + b; 
}
else if (somethin >= subtraction)
{
    c = a - b;
} 
```

因此，如果`somethin`>= 1 将进行加法。当你的输入是 2 时，它会检查`2 >= 1`，所以它会落入加法规则。

将您的代码更改为

```
if (somethin == addition) 
{
    c = a + b; 
}
else if (somethin == subtraction)
{
    c = a - b;
} 
```

此外，在这种情况下，您应该使用`int`变量而不是`double`。

```
//double somethin = in.nextDouble();
int somethin = in.nextInt(); 
```

* * *

如[matt forsythe 的回答](https://stackoverflow.com/a/14403159/1065197)中所述，您**必须**在使用之前声明变量并对其进行初始化。在你的一段代码中，你有这个：

```
double a, b, c; //declaring the variables
//...
if (somethin == addition) 
{
    c = a + b; 
}
else if (somethin == subtraction)
{
    c = a - b;
}
System.out.println(c); //c it's declared but hasn't been initialized =\ 
```

为了解决这个问题，你应该在行`c`中使用它之前初始化变量值`System.out.println(c)`。要解决它，您可以在评估之前给它一个值`if`：

```
c = 0;
if (somethin == addition) 
//rest of the code... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:23:58.253

问题是您需要为 c 变量分配一个初始值。在 Java 中，每当您使用局部变量的值时，Java 都坚持必须将其设置为某个值。由于您在程序底部打印出 c 的值，但将其值设置在条件内，Java 不确定是否会在 System.out 中使用 c 的值之前执行这些条件之一陈述。解决此问题的方法是在条件中添加一个“else”，该条件也为 c 赋值，或者将其值设置在保证执行的其他点（例如当您创建它时）。

例如，将您的代码更改为

```
double a, b, c = 0.0; 
```

将使编译错误消失。但是，正如其他人所指出的，代码也存在其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:20:58.997

您无缘无故地比较两种不同的类型

尝试

```
 double somethin = in.nextDouble();
 double addition = 1.0;
 double subtraction = 2.0;
 if (somethin == addition) 
 {
     c = a + b; 
 }
 else if (somethin == subtraction)
 {
     c = a - b;
 } 
```

或所有整数，或强制转换，或解析它们等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:19:44.483

在每个输入的末尾添加一个 in.nextLine() 以前进到下一行：

```
System.out.print("Write first number");
a = in.nextDouble();
in.nextLine();
System.out.print("and write second");
b = in.nextDouble();
in.nextLine();
System.out.print("Choose the operation   1.Addition  2.Subtraction   >Please write the number of operation ");
int somethin = in.nextInt(); //Also this should be an int rather than double
in.nextLine(); 
```

你也应该检查是否`somthin`等于你正在寻找的变量，你可以用`==`运算符来做：

```
if (somethin == addition) 
{
    c = a + b; 
}
else if (somethin == subtraction)
{
    c = a - b;
} 
```

应该以其他方式工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T00:21:34.707

谢谢各位。我在结果中添加了操作过程（ 2 + 2 = 4 ），最后我做到了：

```
import java.util.*;

  //Simple calculator

public class calc
{
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    double a, b, c = 0.0;

    System.out.print("Write the first number \n");
    a = in.nextDouble();
    System.out.print("And write second  \n");
    b = in.nextDouble();
    System.out.print("Choose the operation  " +
            "\n1.Addition" +
            "\n2.Subtraction" +
            "\n3.Multiplication" +
            "\n4.Division" +
            "\n5.Power" +
            "\n#Please write the number of operation \n");
    double somethin = in.nextDouble();
    double addition = 1;
    double subtraction = 2;
    double multiplication = 3;
    double division = 4 ;
    double power = 5;
    if (somethin == addition) {
        c = a + b;  
        System.out.println(a + " + " + b + " = " + c);  }
    else if (somethin == subtraction)  {
        c = a - b;  
        System.out.println(a + " - " + b + " = " + c);  }
    else if (somethin == multiplication)    {
        c = a * b;   
        System.out.println(a + " * " + b + " = " + c);  }
    else if (somethin == division)   {
        c = a / b;  
        System.out.println(a + " / " + b + " = " + c);  }
    else if (somethin == power) {
        System.out.println("Enhance A or B?" +
                "\n1.A" +
                "\n2.B");
        double enhance = in.nextDouble();
        double first = 1;
        double second = 2;
            if (enhance == first) {
                System.out.println(Math.pow(a, 2)); }   
            else if (enhance == second); {
                System.out.println(Math.pow(b, 2)); }

    }
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-29T07:24:55.830

//使用方法的简单计算器

```
import java.util.*;
class Calc
{
public static int a,b,c;
public static void main(String args[])
{
Calc o=new Calc();
System.out.println("Enter the numbers:");
Scanner s=new Scanner(System.in);
a=s.nextInt();
b=s.nextInt();
System.out.println("Enter the operation:1.add 2.sub 3.mul 4.div");
int op=s.nextInt();
switch(op)
    {
        case 1:
        {   
        o.add();
        break;
        }
        case 2:
        {
        o.sub();
        break;
        }
        case 3:
        {
        o.mul();
        break;
        }
        case 4:
        {
        o.div();
        break;
        }
        case 5:
        {
        o.mod();
        break;
        }
        default:
        {
        System.out.println("None Selected");
        break;
        }
    }   
}       
    void mod()
    {
    c=a%b;
    System.out.println("Mod is"+c);
    }
    void add()
    {
    c=a+b;
    System.out.println("Add is"+c);
    }
    void sub()
    {
    c=a-b;      
    System.out.println("Sub is"+c);
    }
    void mul()
    {
    c=a*b;
    System.out.println("Mul is"+c);
    }
    void div()
    {
    c=a/b;
    System.out.println("Div is"+c);
    } 
```

}

# asp.net - 从 C# 绘制 SVG

> ID：14403011
> 
> 赞同：0
> 
> 时间：2013-01-18T16:15:48.193
> 
> 标签：asp.net, user-controls, svg

我想创建一个由 div 组成的 UserControl。在 div 里面会有一些 SVG 渲染的盒子。有多少盒子和它们的相对位置将由数据确定。

数据将采用 Box 类列表的形式，其中 Box 如下：

```
 public class SVGBox
 {
    public int x { get; set; }  // x coordinate of a corner
    public int y { get; set; }  // x coordinate of same corner
    public int l { get; set; }  // length
    public int h { get; set; }  // height
    public string Color { get; set; }
    public string text { get; set; }
    public string uniqueKey { get; set; }

    public SVGBox (int X, int Y, int H, int W, string Text, string Key )
    {
        x = X;
        y = Y;
        h = H;
        w = W;
        text = Text;
        uniqueKey = Key;
    }
 } 
```

我有一个在'Net 上找到的用于从 C# 渲染 SVG 的示例，但它涉及用 DOCTYPE 中的特定引用写出整个 HTML 页面。如何在用户控件中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:44:25.083

好的，一旦我得到了正确的开始，还不错。

在 ascx 中，我只是添加了一个 asp:Literal。这是背后的代码：

```
public partial class Controls_SVGTest : System.Web.UI.UserControl
{
    public int Height { get; set; }
    public int Width { get; set; }
    public List<SVGBox> data { get; set; }

    const string HeaderText = "<?xml version=\"1.0\" encoding=\"utf-8\" ?> <svg xmlns=\"http://www.w3.org/2000/svg\" " +
                                "xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"{0}\" width=\"{1}\" >";

    const string BoxSVG = "<rect x=\"{0}\" y=\"{1}\" height=\"{2}\" width=\"{3}\" rx=\"2\" fill=\"{4}\" stroke=\"#707070\" />";
    const string Footer = "</svg>";

    protected void Page_Load(object sender, EventArgs e)
    {
        LoadSVG();
    }

    public void LoadSVG()
    {
        Literal1.Text = String.Format(HeaderText, Height.ToString(), Width.ToString());
        foreach (SVGBox s in data)
        {
            Literal1.Text += String.Format(BoxSVG, s.x, s.y, s.h, s.w, s.Color);
        }
        Literal1.Text += Footer;
    }

} 
```

# php - FFMPEG 在命令行中工作，但不能在 exec() 中工作，它返回 127

> ID：14403013
> 
> 赞同：0
> 
> 时间：2013-01-18T16:15:49.627
> 
> 标签：php, ffmpeg, exec

命令是

```
ffmpeg -i path/to/video.avi path/to/video.mpg 
```

它可以从命令行正常工作。但是，当我用 PHPs 调用它时`exec()`，返回值为 127，它似乎没有检测到 FFMPEG。我究竟做错了什么？我在 localhost 并且安全模式已关闭，但我对 FFMPEG 和 都是新手`exec()`，所以这可能是一个菜鸟错误。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:22:42.980

尝试

```
exec(/path/to/ffmpeg -i path/to/video.avi path/to/video.mpg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T16:40:21.870

您是否将您的 ffmpeg 命令注册为 Linux / Windows 中的 PATH 环境变量？？？？似乎您没有将其设置为 PATH 变量，这就是为什么您必须包含 FFMPEG 命令的完整路径以便它为您工作。

# c# - “Windows.System.Launcher”不启动写字板

> ID：14403014
> 
> 赞同：5
> 
> 时间：2013-01-18T16:15:50.607
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我正在尝试对`Launcher.LaunchFileAsync()`示例 .txt 文件使用方法，但它不起作用 - 总是为写字板返回 false（这是 Windows 8 上用于显示 .txt 文件的默认程序）。

但是，如果我将控制面板中的 .txt 处理设置更改为记事本或 Word，一切正常，`LaunchFileAsync()`返回 true 并且文件正确显示。

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:26:59.397

如果您只是想运行一个桌面应用程序（如记事本、写字板、Internet Explorer 等），请使用 Process Methods 和 ProcessStartInfo 类。

```
try
{
// Start the child process.
    Process p = new Process();
    // Redirect the output stream of the child process.
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.FileName = "C:\Path\To\App.exe";
    p.Start();
}

// Uses the ProcessStartInfo class to start new processes,
// both in a minimized mode.

void OpenWithStartInfo()
{
    ProcessStartInfo startInfo = new ProcessStartInfo("IExplore.exe");
    startInfo.WindowStyle = ProcessWindowStyle.Minimized;

    Process.Start(startInfo);

    startInfo.Arguments = "www.northwindtraders.com";

    Process.Start(startInfo);
} 
```

# mysql - 针对单个值检查多个 MySQL 列

> ID：14403017
> 
> 赞同：3
> 
> 时间：2013-01-18T16:15:55.863
> 
> 标签：mysql

我有一个非常简单的问题：如何根据单个值检查多个 MySQL 列？我基本上正在寻找与`IN (1, 2, 3, 4)`可以根据多个值检查单个列的相反的情况。

我知道我可以写多个句子，但我一直在寻找更优雅的解决方案。我正在使用 PHP。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T16:17:15.073

仅使用 IN，如下所示：

```
select * from TableName where 2 IN (ColumnOne,ColumnTwo,ColumnThree) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T16:17:10.173

这是你要找的吗？

```
SELECT *
FROM   tableName
WHERE  1 IN (col1, col2, col3, col4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:16:58.910

在您的子句中使用`or`逻辑运算符怎么样？`where`

```
select *
  from your_table
 where col_a = 'value'
    or col_b = 'value'
    or col_c = 'value'
    or col_d = 'value' 
```

# magento - 在 magento 中编辑帐户仪表板中的地址

> ID：14403022
> 
> 赞同：1
> 
> 时间：2013-01-18T16:16:15.070
> 
> 标签：magento, magento-1.6

谁能告诉我您如何编辑magento的这一部分我正在尝试更改电话和传真线路中前缀的T：和F：。

![在此处输入图像描述](../Images/56ec28ba84165a9eccab44b22c590294.png)

address.phtml 调用`<?php echo $this->getPrimaryBillingAddressHtml() ?>`

这是一种方法：

```
public function getPrimaryBillingAddressHtml()
{
    $address = $this->getCustomer()->getPrimaryBillingAddress();

    if ($address instanceof Varien_Object) {
        return $address->format('html');
    } else {
        return Mage::helper('customer')->__('You have not set a default billing address.');
    }
} 
```

在班上 `Mage_Customer_Block_Account_Dashboard_Address`

然后我的想法用完了....我无法锻炼打印的内容以及如何更改它....？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:23:11.050

在管理员中：`system > config > (customers) customer configuration > address templates`您会找到该地址的所有模板。在您的特定情况下，您想要编辑 HTML

# jquery - jQuery 更新后脚本不再起作用

> ID：14403023
> 
> 赞同：0
> 
> 时间：2013-01-18T16:16:16.197
> 
> 标签：jquery

我刚刚从`jquery-1.6.1.min.js`to更新了我的 jQuery `jquery-1.8.2.js`，现在这段代码不再起作用了：

```
<script type='text/javascript'>
$(window).load(function(){
    $('.freezebg').click(function() {
        var ftop = $('.sort-wrap').offset().top - $(window).scrollTop();
        var fleft = $('.sort-wrap').offset().left;
        $('.sort-wrap').css({position: 'fixed', left: fleft + 'px', top: ftop + 'px'});
});
$(".unfreezebg").click(function() {
    $('.sort-wrap').css({position: 'absolute',left:'auto',top: 'auto'});
        return false;
    });
});
</script>

<script type='text/javascript'>
$(document).ready(function() {
    $("#cboxOverlay").addClass("unfreezebg");
});
</script> 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:24:37.227

try`.on('load', handler)`因为`.load()`在 1.8 中已弃用。

```
<script type='text/javascript'>
   $(window).on('load',function(){
    $('.freezebg').click(function() {    
      var ftop = $('.sort-wrap').offset().top - $(window).scrollTop();
      var fleft = $('.sort-wrap').offset().left;
      $('.sort-wrap').css({position: 'fixed', left: fleft + 'px', top: ftop + 'px'});
    });
    $(".unfreezebg").click(function() {
      $('.sort-wrap').css({position: 'absolute',left:'auto',top: 'auto'});   
      return false;   
    });
   });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:35:25.377

[`.on`](http://api.jquery.com/on/)是“新方式”：

```
<script type='text/javascript'>
   $(window).on('load',function(){
    $('.freezebg').on('click', function() {    
      var ftop = $('.sort-wrap').offset().top - $(window).scrollTop();
      var fleft = $('.sort-wrap').offset().left;
      $('.sort-wrap').css({position: 'fixed', left: fleft + 'px', top: ftop + 'px'});
    });
    $(".unfreezebg").on('click', function() {
      $('.sort-wrap').css({position: 'absolute',left:'auto',top: 'auto'});   
      return false;   
    });
   });
</script> 
```

`.on``.click(...`现在是标准，您应该开始使用它，因为它既可以`.live('click'...`

# javascript - 从复杂的 json 对象创建 javascript 数组

> ID：14403026
> 
> 赞同：0
> 
> 时间：2013-01-18T16:16:17.740
> 
> 标签：javascript, json

> **可能的重复：**
> [带有数组的 JavaScript “For ...in”](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

我对 JSON 很陌生。我已经在 stackoverflow 上搜索了答案，但有点困惑，所以我不确定我是否偶然发现了解决方案。所以，我决定发布我的代码和需求，希望能找到一个我可以应用的解决方案。

如果已经存在解决方案，我提前道歉，只能想象我只是不明白我在看什么。

我有一个看起来像这样的 json 对象：

```
{
"0": [
    {
        "uguid": "11111-11111-11111",
        "username": "username",
        "password": "",
        "first_name": "User1",
        "last_name": "Name1",
        "title": "title here",
        "group_guid": "g0001",
        "force_pw_reset": "f",
        "permissions": [
            [
                "p1",
                "p2",
                "p3",
                "p4",
                "p5"
            ]
        ],
        "active": "t",
        "t_access": [
            []
        ],
        "i_access": [
            []
        ],
        "c_access": [
            []
        ],
        "class_name": "class name",
        "method": "method name"
    }
],
"1": [
    {
        "uguid": "22222-22222-2222",
        "username": "username2",
        "password": "",
        "first_name": "User2",
        "last_name": "Name2",
        "title": "",
        "g_guid": "g0002",
        "force_pw_reset": "f",
        "permissions": [
            [
                "p1",
                "p2",
                "p3",
                "p4",
                "p5",
                "p6"
            ]
        ],
        "active": "t",
        "t_access": [
            []
        ],
        "i_access": [
            []
        ],
        "c": [
          [
              "c0001"
          ]
        ],
        "class_name": "class name",
        "method": "method name"
    }
],
"2": [
    {
        "u_guid": "33333-33333-33333",
        "username": "username3",
        "password": "",
        "first_name": "User3",
        "last_name": "Pass3",
        "title": "",
        "gguid": "g0003",
        "force_pw_reset": "f",
        "permissions": [
            [
                "p1",
                "p2",
                "p3"
            ]
        ],
        "active": "t",
        "t_access": [
            [
              "t0001"
            ]
        ],
        "i_access": [
            []
        ],
        "c_access": [
            []
        ],
        "class_name": "class name",
        "method": "method name"
    }
] 
```

}

我想要做的是遍历这个（或任何）json并创建一个数组。我需要能够在需要的时间/地点进行递归迭代。此外，希望无论解决方案是什么，都可以与传递给函数的任何 json 对象一起使用。

更新：我想我应该提到我想创建一个*javascript*数组，如果这有什么不同的话。另外，我正在获取一个 json 字符串并使用 douglas crockford 的 json_parse() 来获取一个对象。我想获取该对象（如图所示）并创建 javascript 数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:23:43.513

如果要转换对象

```
obj = {
   "0": ...,
   "1": ...,
   ...
} 
```

到一个数组，我建议这样做：

```
var a = [];
for (var i=0; typeof obj[i] != 'undefined'; i++) a[i] = obj[i]; 
```

# java - JCA 或 Spring 集成/骆驼困境

> ID：14403032
> 
> 赞同：0
> 
> 时间：2013-01-18T16:16:35.243
> 
> 标签：java, spring, jakarta-ee, spring-integration, jca

我们的应用程序需要在套接字 (TCP) 上接受客户端请求。我有两个选择

**使用spring集成TCP支持**

优点： 1\. 我们已经大量使用弹簧，所以这里的学习曲线会更少。2\. 无需容器的简化端到端测试

担忧：我的担忧是处理并发请求和扩展。它可以使用托管线程池吗？还有什么我需要担心的吗？

**使用 JCA TCP 入站适配器**

优点： 1\. 与 Java EE 容器配合得很好，因为它是实现它的建议方式。

关注点： 1\. 很难找到经过良好测试的 TCP 适配器（开源） 2\. 需要容器

感谢您对此的想法。另外，我应该知道任何哥特人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:08:57.247

Spring 提供`WorkManagerTaskExecutor`并`TimerManagerTaskScheduler`使用托管线程池。Spring Integration 中任何需要调度器（例如轮询器）或任务执行器的地方都可以使用这些抽象。有关更多信息，请参阅 Spring Integration 和 Spring 参考文档。

# jquery - jQuery - 覆盖回调以动画函数 jquery

> ID：14403033
> 
> 赞同：1
> 
> 时间：2013-01-18T16:16:35.573
> 
> 标签：jquery, jquery-plugins

我在一个网站上使用了一个插件，我想保持完整，这样我就可以在开发时重用代码等，并使我的定制与实际功能保持一致。

在这个插件中，该`fadeOut`函数被调用并给出一个回调：

```
jQuery('a').fadeOut(function () { ... }); 
```

这是在一个`click`函数内：

```
jQuery('p').click(function () {
    ...other code...
    jQuery('a').fadeOut(function () { ... });
} 
```

我希望能够覆盖淡出功能

这可能吗？还是我应该完全覆盖点击功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:32:42.910

是的，您可以防止未来的事件发生，并且由于您不想编辑原始代码，只需让您的`event`和在它的末尾阻止未来的事件传播。

您将不得不覆盖整个点击功能，因为悬停隐藏在其中（至少我认为是这样，因为我看不到所有内容。

```
jQuery('p').click(function () {
    //...other code...

    // this will prevent the other click events from happening
    e.stopPropogation();
} 
```

# iphone - 故事板和 uitableview 的困境

> ID：14403037
> 
> 赞同：0
> 
> 时间：2013-01-18T16:16:46.147
> 
> 标签：iphone, ios, xcode, uitableview

好的，所以我有一个 UITableViewController。在其中我定义了动态 tableviewcell。现在为了简单起见，假设定义了三个动态行。看截图

![在此处输入图像描述](../Images/a70d6dfc334ff4d692c3d54e5eccbc6e.png)

所以我想要做的是当用户触摸

*   第 1 行，我想把它们带到 viewcontroller1
*   第 2 行，我想把它们带到 viewcontroller2
*   第 3 行，我想带他们去 viewcontroller3

现在这是两难的部分，当我选择原型单元并使用模式将其连接到 viewcontroller1 时，从那时起，我触摸的任何行都会将我带到 viewcontroller1。我想为我的 UITableViewController 编写这段代码，但我不知道如何创建多个圣人？（见下文）

现在很可能这是故事板和 UITableView 的限制，并且不能使用动态单元格来完成。我要做的是创建静态单元格并手动将每一行连接到相应的视图控制器。我只是想知道是否有更简单的方法，因为我有 50 行并且每行都需要连接到一个新的视图控制器。是的，我非常喜欢在故事板中连接东西。如果有更好的方法，只是想获得第二意见。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // Navigation logic may go here. Create and push another view controller.

        //SECTION #0
        if (indexPath.section == 0)
        {
            [self performSegueWithIdentifier:@"goto1" sender:nil];

        }

    //SECTION #1
        if (indexPath.section == 1)
        {
            [self performSegueWithIdentifier:@"goto2" sender:nil];

        }

    //SECTION #2
        if (indexPath.section == 2)
        {
            [self performSegueWithIdentifier:@"goto3" sender:nil];

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:27:00.137

也可以从控制器工具栏中的黄色控制器图标中拖动 segue。选择您的表格视图控制器，将显示如下图所示的黑色工具栏。

![控制器工具栏](../Images/58c5508c62f1f7a12ee549429e8786fc.png)

从黄色图标拖动到所需的目标控制器。

这样，segue 就不会直接附加到单元格或其他任何东西上。给它一个标识符，您可以随时在代码中执行它。

在您的情况下，您可以根据您认为合适的任何逻辑进行`performSegueWithIdentifier:sender:`调用。`tableView:didSelectRowAtIndexPath:`

**[编辑]：**

> “如果有更好的方法，只是想获得第二意见。”

50 个不同的转场和目的地似乎很多。你确定你不能重用单个（或至少少于 50 个）视图控制器（比如只有内容不同时？）。例如，您显示 50 个包含内容的相似页面。而不是在故事板中创建 50 个视图控制器：创建一个并在显示之前设置视图控制器的内容：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    MyPageController *page = (MyPageController *)segue.destinationViewController;
    // get content for selected row
    page.content = myContentModelObject;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:38:50.430

只能通过在情节提要中拖出线条来创建转场。创建它们后，您可以自定义它们，但是如果您必须首先将它们全部绘制出来，那并没有多大用处。

为了节省您绘制所有这些线条（并调试它们......），您无需使用情节提要即可轻松完成 Segue 的工作。对于模态转场：

```
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString* identifier = [NSString stringWithFormat:@"%d",indexPath.row];
    RWViewController* detailView = [self.storyboard instantiateViewControllerWithIdentifier:identifier];
    [self presentViewController:detailView animated:YES completion:nil];
} 
```

您仍然可以在情节提要中创建 50 个 ViewController。给每个人一个与相应的 indexpath.row 匹配的数字标识符

没有可以画的线...

如果故事板在 50 个视图控制器时变得不堪重负，请考虑为每个视图控制器使用单独的 xib（或者您可以拆分几个不同的故事板，并将它们分组排列）。

# c# - 在加载到richTextBox之前获取.txt文件中使用的字体

> ID：14403049
> 
> 赞同：0
> 
> 时间：2013-01-18T16:17:23.730
> 
> 标签：c#, .net

在将字体加载到richTextBox 之前，我需要在.txt 文件（或.rtf）中设置字体。如果我不这样做，则会设置默认字体，并且richTextBox.Text 的字体与原始 .txt 文件中设置的字体不同...

我正在处理从 RichTextBox 继承的自定义 TextPanel。

```
 if (File.Exists(file))
            {
                if (Path.GetExtension(file) == ".txt")
                {
                    // I need to get the font here from the path "file" .txt document
                    textPanel = new TextPanel(file, this);
                    textPanel.LoadFile(file, RichTextBoxStreamType.PlainText); 
```

我确定有一种简单的方法可以做到这一点，只是找不到:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:21:17.310

Thomas，.txt 不存储字体信息，除非您有一个您没有在问题中注明的自定义文件格式。例如，更改记事本中的文本只是一种显示功能，对文件本身没有任何作用。

RTF 确实存储了字体信息，并且应该在您将其推送到 RTB 时加载。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:25:24.480

纯文本文件不存储字体信息。（它们是**纯**文本文件，这意味着它们只存储文本。）加载它们时，它们使用显示它们的容器的字体。

如果实际的富文本 ( `.rtf`) 文件具有字体信息，并且它作为 .rtf 文件加载（不要使用`RichTextBoxStreamType.PlainText`，`RichTextBoxStreamType.RichText`而是使用），则`RichTextBox`应该自动为您设置字体，而无需涉及任何代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:22:21.633

TXT 文件没有标题。它们是纯文本文件，没有任何额外的文件结构或隐式格式（如 RTF）。例如，您可以使用打开应用程序时的默认字体样式...或默认记事本字体（Lucida Console，正常，10）。

# html - CSS悬停在特定位置显示文本

> ID：14403051
> 
> 赞同：0
> 
> 时间：2013-01-18T16:17:31.397
> 
> 标签：html, css, image

我只想使悬停图像的文本可见，并且它应该在悬停图片旁边（左/右）的灰色空间中（而不是在灰色空间之外的图片下方）。

只有css才有可能吗？

如果不是我需要什么？javascript？

**HTML**

```
<div class="pictures">
    <div class="pic">
        <img class="inner-img" src="http://www.csstutorial.net/wp-content/uploads/2010/01/045.png"/><p>This is a beautiful flower!</p>
    </div>
    <div class="pic">
        <img class="inner-img" src="http://www.csstutorial.net/wp-content/uploads/2010/01/045.png"/><p>This is a beautiful flower!</p>
    </div>
    <div class="pic">
        <img class="inner-img" src="http://www.csstutorial.net/wp-content/uploads/2010/01/045.png"/><p>This is a beautiful flower!</p>
    </div>
    <div class="pic">
        <img class="inner-img" src="http://www.csstutorial.net/wp-content/uploads/2010/01/045.png"/><p>This is a beautiful flower!</p>
    </div>
    <div class="pic">
        <img class="inner-img" src="http://www.csstutorial.net/wp-content/uploads/2010/01/045.png"/><p>This is a beautiful flower!</p>
    </div>
    <div class="pic">
        <img class="inner-img" src="http://www.csstutorial.net/wp-content/uploads/2010/01/045.png"/><p>This is a beautiful flower!</p>
    </div>
    <div class="pic">
        <img class="inner-img" src="http://www.csstutorial.net/wp-content/uploads/2010/01/045.png"/><p>This is a beautiful flower!</p>
    </div>
</div> 
```

**CSS**

```
.pictures {
    background-color:rgba(25, 25, 25, 0.3);
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
    --width: 960px;
    float:left;
    margin: 0 auto;
    position:relative;
    left:100px;
    transition: all 0.5s ease;
    -webkit-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
}
.pictures:hover {
    left:40px;
}
.pic {
    width:100px;
    height:100px;
    float:left;
    margin:5px;
    position: relative;
    right: 0;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
    background-color:rgba(25, 25, 25, 0.7);
    transition: all 0.5s ease;
    -webkit-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    color:blue;
    border-radius: 3px;
    /*abgerundete Ecken*/
}
.pic:hover {
    width:210px;
    height:210px;
    margin:5px 115px 0px -105px;
    right: -110px;
}
.inner-img {
    width:100%;
} 
```

在[jsFiddle](http://jsfiddle.net/Vloxxity/BCvPk/)上的工作示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:27:37.117

好的，这里有几件事：

1.  您的图像太大，因为有透明像素迫使该文本脱离深灰色框。使图像尽可能大，然后将其嵌套在带有一些填充或其他东西的容器元素中以达到类似的效果。
2.  如果您正在寻找的效果是在悬停之前没有可见的文本，那么是的。只需`display:none`在文本中添加一个然后添加一个选择器，`.image-container:hover p { display:inline-block; }`或者您可以使用 css3 opacity 并将其淡入，尽管这会很难看，因为它已经按比例放大了，您可能也不希望它淡入。
3.  如果你想要的效果不是上面描述的，你可以使用 jQuery 轻松实现。假设您希望所有文本都可见，然后在悬停时您希望所有其他图像的文本消失，只需`$('.image-container').hover(function(){//hide all text but the text nested in current element receiving the hover event });`

如果您对具体实施有疑问，请告诉我，但这应该可以让您开始

# .net - TPL 数据流（TDF）和响应式扩展有什么区别？

> ID：14403054
> 
> 赞同：21
> 
> 时间：2013-01-18T16:17:41.077
> 
> 标签：.net, task-parallel-library, system.reactive, tpl-dataflow

经过几天的谷歌搜索，我想我无法决定哪一个适用于什么场景。当然，我想使用一个结合了两者的完美框架（当然不切实际）。我什至知道可以一起使用它们。但真正的问题是，每一个中的核心设计元素是什么，使得它们无法相互模仿。这些是我找到的：

*   在 RX 中存在虚拟时间，因此调度程序有效地控制整个网络，但在 TDF 中这是不可能的，因为每个块使用不同的任务并且它们独立运行
*   在 TDF 中，一个块可以重试接收消息/重发之类的东西，但在 RX 中这是不可能的。
*   在 rx 中，数据流是序列化的，但在 TDF 中这是可选的

最好有一些不是列表的理解，而是试图从一个共同的抽象类/类别中派生出的东西，只谈论结构差异。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-22T14:08:18.860

我认为解决这个问题的最好方法是只关注问题的第一行——决定在给定场景中使用哪一个。

这两个库服务于不同的目的。推测每个设计的核心元素以寻找差异感觉就像问为什么粉笔尝起来不像奶酪 - 尽管我不能挑剔你列出的具体点。

根据我的经验，很少有非平凡的场景可以以任何明智的方式互换。我认为他们文档中的实际描述对这个问题做出了不言自明的回答：

### 接收

> Reactive Extensions (Rx) 是一个库，用于使用可观察序列和 LINQ 样式的查询运算符组成异步和基于事件的程序。使用 Rx，开发人员使用 LINQ 运算符表示异步数据流，并使用调度程序参数化异步数据流中的并发性。简单来说，Rx = Observables + LINQ + Schedulers

我还会在这里查看我的其他答案，这在考虑 Rx 时非常相关：[Where to draw the line with reactive programming](https://stackoverflow.com/questions/35974063/where-to-draw-the-line-with-reactive-programming)。其本质是 Rx 有利于及时响应您无法控制的事件。

### TPL 数据流

> 任务并行库 (TPL) 提供数据流组件来帮助提高支持并发的应用程序的稳健性。这些数据流组件统称为 TPL 数据流库。该数据流模型通过为粗粒度数据流和流水线任务提供进程内消息传递来促进基于参与者的编程。数据流组件建立在 TPL 的类型和调度基础架构之上，并与 C#、Visual Basic 和 F# 语言集成以支持异步编程。当您有多个必须以异步方式相互通信的操作或当您希望在数据可用时对其进行处理时，这些数据流组件非常有用。例如，考虑一个处理来自网络摄像头的图像数据的应用程序。通过使用数据流模型，应用程序可以在图像帧可用时对其进行处理。如果应用程序增强了图像帧，例如，通过执行光线校正或红眼消除，您可以创建数据流组件的管道。管道的每个阶段都可能使用更粗粒度的并行功能（例如 TPL 提供的功能）来转换图像。

# android - 在android中更新片段

> ID：14403055
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:17:45.523
> 
> 标签：android, android-fragments, updates, android-listfragment, android-fragmentactivity

假设我有一些片段显示和做某些事情。现在，基于某些事件，我想更改片段的屏幕（或内容）。[编辑]

例如。

我的第一个布局，布局 A，有一个列表视图。另一个布局，布局 B 有一个表格视图。我目前正在片段中显示布局 A。单击列表项时，我想在同一片段中显示布局 B。

这是怎么做到的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:44:46.177

如果我正确理解了您的问题，这就是我的处理方式。

我假设您已经为列表片段（片段 A）和视图片段（片段 B）创建了片段类。

我们可以使用 fragmentManager 来交换布局视图中的片段。

```
//grab fragmentManager, this will allow us to switch out fragments
FragmentManager fragManager = getFragmentManager();
FragmentTransaction fragTransaction = fragManager.beginTransaction();

//first remove the current fragment
fragTransaction.remove(fragManager.findFragmentById(R.id.layout_view));

//replace the current FragmentA with FragmentB
fragTransaction.replace(R.id.layout_view, new FragmentB());

//add to backstack if you want the android back button to work properly
fragTransaction.addToBackStack(null);

//and lastly, we commit the changes to the fragmentManger's transaction
fragTransaction.commit(); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:50:16.303

> 我的第一个布局，布局 A，有一个列表视图。另一个布局，布局 B 有一个表格视图。我目前正在片段中显示布局 A。单击列表项时，我想在同一片段中显示布局 B。
> 
> 这是怎么做到的？

您可以使用新的嵌套片段 API（可通过兼容性包和普通片段 API 16+ 获得）。`Fragment`而不是包含 a的 current `ListView`（并且您将用表格替换它），您将拥有一个 wrapper `Fragment`，它的视图`FrameLayout`为它的内容的单一视图。

然后，您将创建两个片段，一个包含`ListView`和 包含表格布局。最初，您将基于列表的片段添加到包装片段以获得开始布局，并且在项目单击事件中，您将使用`getChildFragmentManager()`基于表格的片段替换基于列表的片段（全部在包装片段中）。

# ios - 奇怪的控制台消息 - 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

> ID：14403060
> 
> 赞同：0
> 
> 时间：2013-01-18T16:18:06.120
> 
> 标签：ios, appdelegate

> **可能重复：**
> [应用程序在应用程序启动结束时应该有一个根视图控制器](https://stackoverflow.com/questions/7520971/applications-are-expected-to-have-a-root-view-controller-at-the-end-of-applicati)

我的应用程序使用 uitabbarcontroller 和几个导航控制器。它在模拟器和真实设备上运行正常。然而，让我感到不安的是我在控制台中启动应用程序时收到的这条消息。`Application windows are expected to have a root view controller at the end of application launch`

我用谷歌搜索了它，但我找不到我的问题的答案。强制 appDelegate didFinishLaunchingWithOptions

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
    [defaults setBool:FALSE forKey:@"loggedIn"];
    [defaults setInteger:0 forKey:@"token"];
    [defaults synchronize];

    _window.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"app_bg.png"]];

 return YES;
} 
```

我的 main.m 代码

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

如果有人可以帮助我，我会很高兴:) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:42:57.167

尝试在 didFinishLaunchingWithOptions 中设置窗口的根视图控制器。如果是导航控制器，请输入：

```
UINavigationController *nav = (UINavigationController *)self.window.rootViewController; 
```

# java - 如何获得文件 io 的兼容时间戳？

> ID：14403062
> 
> 赞同：0
> 
> 时间：2013-01-18T16:18:16.337
> 
> 标签：java, android, date, file-io, timestamp

我正在编写一种将文件保存到 android 上的 SD 卡的方法。我想将其设为“description_code_uniqueTimeStamp.png”格式。

我尝试了几种日期和时间格式，但是当我尝试将文件写入无效格式时收到错误。可能是由于 : 或 。

任何人都可以为我提供一个对文件名有效的唯一时间戳（可以低至几秒）的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:57:05.240

```
final String prefix = "description_code_";
final String format = "yyyy-MM-dd'T'HH-mm-ss";
SimpleDateFormat sdf = new SimpleDateFormat(format, Locale.US);
String filename = prefix + sdf.format(new Date(0))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:46:13.760

为什么不获取时间戳字符串，然后通过编码器运行该字符串，该编码器取出不允许的字符，例如......

```
public static String encodeString(String string) {
        if (string != null) {
            string.replace("&", "&amp;");
            string.replace("<", "&lt;");
            string.replace(">", "&gt;");
            string.replace("\"", "&quot;");
            string.replace("'", "&apos;");
        }
        return string;
    } 
```

# javascript - .height(item.height()) jquery 在 IE 中太慢了！备择方案？

> ID：14403064
> 
> 赞同：4
> 
> 时间：2013-01-18T16:18:29.830
> 
> 标签：javascript, jquery, css, cross-browser

我正在尝试设置绝对定位项目的高度以匹配其容器元素的高度。问题是有数百个这样的元素。标题中的标准代码在 chrome 中运行良好，但在 IE 中却像疯了似的拖动。我应该如何缓解这个问题？

```
 //Too SLOW in IE
    var starttime = new Date().getTime();
    $("#grdSchedule > tbody > tr").each(function(i) {
        thisRow = $(this);
        thisRow.children(".stickyCol").height(thisRow.height());
        //thisRow.children().slice(0, 1).css('height', thisRow.css('height'));            
    });
        var taskTime = (new Date().getTime() - starttime) / 1000;
        alert("cell height stretch: " + taskTime); 
```

似乎只是设置高度并没有那么大，但是从其他东西的 .height() 设置高度确实会导致 IE 窒息。

我尝试了 .css() ，但有一点提升，但不多。

这是一个可以摆弄的小提琴：[Fiddle AWAY!!!](http://jsfiddle.net/jumpdart/hnZxn/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:41:47.133

使用 IE9，我从 1.6 秒到 0.031 秒。使用 Chrome，我从 0.302 秒变为 0.018 秒。

**[使用 detach() 的工作示例](http://jsfiddle.net/hnZxn/15/)**（最快，但如果您延迟重新插入表格 - 即如果您允许页面在 DOM 中没有表格的情况下重新呈现，则会导致布局问题）。

**[使用普通 DocumentFragment 克隆的工作示例](http://jsfiddle.net/hnZxn/16/)**

关键是将表格*克隆*为 DocumentFragment（或暂时将其从 DOM 中删除`detach()`并操作克隆表格的单元格高度（即，在表格成为 DOM 的一部分之前）。然后在完成所有高度计算之后，用克隆表替换原表。

计算`.height()`并没有让你慢下来，而是你在一个大循环中遍历和操作 DOM。在三大浏览器中，Internet Explorer 是 DOM 操作最慢的。

为了进一步阅读，不久前我整理了一些**[DOM 插入基准](http://jsperf.com/render-in-memory-vs-direct-dom-insertion/7)**，这些基准可以很好地衡量浏览器与 DOM 的相对性能。John Resig 还写了关于使用 DocumentFragments 和 DOM 操作的文章： http: [//ejohn.org/blog/dom-documentfragments/](http://ejohn.org/blog/dom-documentfragments/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:30:09.887

避免为行创建单独的对象，并缓存行的高度：

```
 $('#grdSchedule > tbody > tr').each(function () {
    var height = $.css(this, height);
    $('.stickyCol', this).css('height', height );           
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:23:12.693

看起来 precalcs 本身就足以真正加快速度，并且带来的好处是不用担心分离带来的任何并发症

```
 var starttime = new Date().getTime();
    var stickyCols = 1;
    //get row heights
    var rowHeights = new Array();
    $("#grdSchedule > tbody > tr").each(function(i) {
        rowHeights[i] = $(this).css('height');
    });

    //Now SUPERDUPERFAST in IE
    //var $table = $("#grdSchedule").detach();            
    $("#grdSchedule > tbody > tr").each(function(i) {
    //$(" > tbody > tr", $table).each(function(i) {
        thisRow = $(this);
        thisRow.children("td").slice(0, stickyCols).css('height', rowHeights[i]);              
    });
    //$("#scrollDiv_top").append($table);
    var taskTime = (new Date().getTime() - starttime) / 1000;
    alert("cell height stretch: " + taskTime); 
```

[小提琴](http://jsfiddle.net/jumpdart/MrQVv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T18:02:31.410

仅设置`height:100%`绝对定位元素有什么问题？

[更新小提琴](http://jsfiddle.net/hnZxn/7/)

# php - 如何在 CakePHP 中重命名模型中的字段（模型/表）？

> ID：14403069
> 
> 赞同：2
> 
> 时间：2013-01-18T16:18:43.360
> 
> 标签：php, cakephp

要创建与模型对应的输入字段，可以使用以下命令：

```
cakephp $this->Form->input('Model.field'); 
```

要重命名它，可以使用

```
cakephp $this->Form->input('Model.field', array('label' => __('new field name'))); 
```

但是考虑到我有一个巨大的应用程序，我不想一遍又一遍地重命名每个字段。这个问题被问了很多次，并且总是用我给出的解决方案来回答这个初学者问题。但是在 CakePHP 中必须有一种更优雅的方式......我猜想人们可以使用 Translate Behavior 构建一种解决方法。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:29:27.787

您指示的方式是在 CakePHP 中完成的方式。字段名称必须与模型中的名称相对应。如果您不喜欢该名称，您可以随时更改模型中的名称以表示您希望它在表单上显示的内容。否则，您必须按照指示使用标签字段。

我想可能还有另一种方式。您可以覆盖表单助手为您进行翻译。但是随后您将管理大量表单名称以根据名称动态插入标签。但这似乎只是为了更改标签而进行的大量额外工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T05:30:50.283

输入元素的标签取决于数据库表和模型字段中的字段名称。因此，假设您在用户表和用户模型中有字段用户名，然后..

```
echo $this->Form->input('User.username'); 
```

将输出

```
<input type="text" label="Username" ... /> 
```

因此，更改用户表和模型中的字段以获得表单元素所需的标签。

# zend-framework2 - zend framework 2 在子目录中

> ID：14403071
> 
> 赞同：2
> 
> 时间：2013-01-18T16:18:50.513
> 
> 标签：zend-framework2, subdirectory

我想把 zend 框架 2 放在一个子文件夹中。骨架应用程序通过将整个应用程序放在一个子目录中然后使用 domain.com/path/to/public/index.php 开箱即用，但我想避免使用长 url 并且我不想要除了我的公共文件夹之外，其他所有内容都在我的 DocumentRoot 中。

我想过拥有多个模块，但我的域下还有其他类型的应用程序，并且不能将公用文件夹作为 DocumentRoot，我也不想重新创建我必须成为模块的所有内容，以提供静态页面。理想情况下，最好保留骨架应用程序使用的常规目录结构。

我正在使用带有 RHEL 和/或 CentOS 的典型 LAMP 堆栈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:13:20.997

我不知道这是否是最好的方法，但这是一种对我有用的方法。

Apache virtualhosts.conf（您可以将其放入 httpd.conf 并进行一些修改）：

```
<VirtualHost *:80>
    ServerAdmin webmaster@domain.com
    DocumentRoot /var/www/html/apps
    ServerName apps.domain.com:80
    ServerAlias www.apps.domain.com
    UserDir Disabled
    ErrorLog logs/domain_error_log
    Options FollowSymLinks

    <Directory /var/www/html/apps/subdirectory/>
            #same stuff in standard zf2 .htaccess file
            RewriteEngine on
            RewriteCond %{REQUEST_FILENAME} -s [OR]
            RewriteCond %{REQUEST_FILENAME} -l [OR]
            RewriteCond %{REQUEST_FILENAME} -d
            RewriteRule ^.*$ - [NC,L]
            RewriteRule ^.*$ index.php [NC,L]
    </Directory> 
```

应用程序的位置：

```
/var/www/zf2_app 
```

符号链接：

```
ln -s /var/www/zf2_app/public/ /var/www/html/apps/subdirectory 
```

有几点需要注意： Directory 指令基于文件系统路径而不是 URI；这是我忘记的 Apache 文档中的一行，因为如果您在 VirtualHost 指令中使用 mod_rewrite 它是基于 URI 的。此外，Options FollowSymLinks 必须打开，符号链接才能工作，mod_rewrite 才能在目录指令中工作。

重新加载 httpd 后，我可以使用以下命令浏览到我的 zf2 应用程序：apps.domain.com/subdirectory/module

这使我能够保持常规的 zf2 骨架应用程序结构。此外，通过将它们放在一起，我可以使用 git（或其他源代码控制）进行推送，而无需拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:09:46.247

我已经像这样在 .htaccess 文件中添加了环境变量，将 .htaccess 的第一行设置为 ZF2_PATH 环境变量（位于应用程序文件夹的根目录）

```
SetEnv ZF2_PATH /home/homefolder/zendpath
RewriteEngine On
RewriteRule ^\.htaccess$ - [F]
....
... 
```

# javascript - HTML5 画布上下文

> ID：14403073
> 
> 赞同：3
> 
> 时间：2013-01-18T16:18:57.360
> 
> 标签：javascript, html, canvas, 2d

我已经开始阅读/体验 HTML5。我看到的所有 HTML5 Canvas 教程都遵循 JavaScript 通过 ID 获取画布、获取 2d 上下文，然后使用上下文的模式：

```
 <canvas id="myCanvas" width="300" height="200" style="border:1px solid"></canvas>
 <script>
   var c=document.getElementById("myCanvas");
   var ctx=c.getContext("2d");
   ctx.fillStyle="cyan";
   ctx.fillRect(50,50,100,75);
 </script> 
```

我想知道是否有任何枚举或常量来获取 Canvas 的上下文。

像`Context.2D`,`Context.3D`等（我知道这不是一个真正的常数，只是想知道 JavaScript 或 HTML5 中是否有类似的东西）。

我见过的每一个例子，所做的调用都是简单的`getContext("2d")`. 这似乎很脆弱，也没有告诉我可能有哪些其他（如果有的话）上下文可用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:49:50.747

你`getContext`只调用一次，如果你再次调用它，如果画布已经用不同的上下文类型初始化，它将返回 null。如果您使用相同的上下文类型再次调用它，它将返回相同的上下文。如果画布不支持给定的上下文 ID 字符串，也会返回 Null。

换句话说，每个画布只有一个上下文。

> 没有告诉我可能有哪些其他（如果有的话）上下文可用。

为此，有一种方法`supportsContext(someContextString)`，它对规范（2012 年 3 月）来说是非常新的，尚未在任何浏览器中实现。

此外`setContext`，任何浏览器尚不支持此功能（可能在几个晚上）。请注意，这`setContext`仅在您创建了无头上下文时才有用，因为如果您尝试设置不同的上下文，已经具有上下文的画布（通过使用 getContext）将引发错误。

无论如何，参数是字符串的原因是允许对画布进行特定于浏览器的扩展。毕竟，MS 可能想要实现`getContext('2d-directx')`（他们可能永远不会真正做到这一点）。

这些天你会看到的唯一字符串是`"2d"`,`"webgl"`和`"webgl-experimental"`.

# ruby - yml 文件超出默认值

> ID：14403074
> 
> 赞同：1
> 
> 时间：2013-01-18T16:18:57.933
> 
> 标签：ruby, yaml

我的 config.yml 文件看起来像这样

```
development: &development
  <<: *development
  sub1:
    sub11: "myemail@fiverr.com"
    sub12: "http://localhost"

staging:
  <<: *development
  sub1:
    sub12: "http://google.com"

production:
  <<: *development
  sub1:
    sub12: "http://youtube.com" 
```

我像这样加载它

```
SETTINGS = YAML::load(File.open( "#{ROOT}/config/config.yml")).with_indifferent_access[ENV['RACK_ENV']] unless defined?(SETTINGS) 
```

问题是在开发环境中：

```
SETTINGS[:sub1][:sub12] = "http://localhost"
SETTINGS[:sub1][:sub11] = "myemail@fiverr.com" 
```

并在登台环境中：

```
SETTINGS[:sub1][:sub12] = "http://google.com"
SETTINGS[:sub1][:sub11] = "nil" 
```

好像我不定义它就没了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:32:13.450

当你有：

```
staging:
  <<: *development
  sub1:
    sub12: "http://google.com" 
```

您合并`development`映射中的键，然后将`sub1`键的值设置为新`sub12`映射。请注意，这将替换从开发映射合并的*整个*原始地图。`sub1`映射*不会*递归合并。

它相当于纯 Ruby 中的类似内容：

```
development = {'sub1' =>
  {'sub11' => "myemail@fiverr.com", "sub12" => "http://localhost"}
}

staging = {}
staging.merge! development
staging["sub1"] = {"sub12" => "http://google.com"} 
```

并且实际上在 Psych （Ruby 的 Yaml 库）[中几乎以这种方式实现。](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/to_ruby.rb#L264)

要修复它，您需要将锚添加到子哈希中：

```
development:
  sub1: &sub1defaults
    sub11: "myemail@fiverr.com"
    sub12: "http://localhost"

staging:
  sub1:
    <<: *sub1defaults
    sub12: "http://google.com"

production:
  sub1:
    <<: *sub1defaults
    sub12: "http://youtube.com" 
```

不幸的是，如果您的配置中有许多这样的嵌套映射，这可能会涉及更多工作。

# bash - Bash：带有进程替换的粘贴错误

> ID：14403078
> 
> 赞同：0
> 
> 时间：2013-01-18T16:19:19.940
> 
> 标签：bash, unix, paste

尝试使用 paste 命令对压缩文件使用进程替换时出现错误。

我正在尝试打开 100 个压缩文件并粘贴它们的第二列。

当我尝试：

```
for name in $(ls FILEPATH/*.gz); do 
temp=${temp}" <(zcat "${name}" | cut -f2)"; done

paste ${temp} > DESTINATION/OUTPUTNAME' 
```

我得到错误

```
 paste: invalid option -- f 
```

当我尝试 paste`$(echo ${temp})`而不是 时`paste ${temp}`，我遇到了同样的问题，但是当我`echo ${temp}`进入我的终端并手动将响应复制并粘贴到粘贴中时，它可以工作。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:07:04.207

问题是您不能嵌入 shell 语法，例如“<(...)”和“|” 在字符串中，因为命令行的这些部分在参数扩展发生之前被识别。您输入的所有内容都`temp`被视为`paste`.

没有简单的方法可以完成您正在尝试的事情。我不愿提及它，但我认为您需要使用`eval`：

```
# Simpler than writing a loop
printf -v temp "<( zcat %s | cut -f2) " FILEPATH/*.gz

eval "paste $temp > DESTINATION/OUTPUTNAME" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:38:56.177

好的，我怀疑正在发生的是：

temp 变量扩展为从 gzip 文件中检索到的文件名列表。

如果存在字符串 '--' 告诉 paste 它应该停止解析命令行以获取选项，并且 -- 之后的所有内容都是要使用的文件。

如果其中一个文件名以 -f 开头，那么您将收到错误消息。

尝试

```
paste -- ${temp} > DESTINATION/OUTPUTNAME 
```

编辑：

好的，从下面的评论看来，您的 bash 版本支持重定向。

原始错误是由 cat 的 -f2 标志引起的。

尝试回声 <(ls)

如果你得到像 /dev/fd/ 这样的结果，那么进程替换工作，我对正在发生的事情感到困惑，但我怀疑你不会明白这一点。

# python - 使用子列表的部分元素对列表列表进行排序

> ID：14403079
> 
> 赞同：1
> 
> 时间：2013-01-18T16:19:28.400
> 
> 标签：python, sorting, substring

我有一个列表列表。每个子列表中的第一个元素是一条染色体，例如“chr1”、“chr5”、“chr10”、“chrX”和“chrY”。我想按染色体编号然后按 X 和 Y 对子列表进行排序。我尝试了以下方法。

```
List.sort(key=lambda x: Set_Chr_Nr_(x[0])) 
```

我正在使用以下 def，它采用染色体字符串，删除“chr”，如果它是一个数字，则将余数转换为一个 int，如果它是一个“X”或“Y”，则分配一个数字。

```
def Set_Chr_Nr_ (Chr):
    """ Sort by chromosome """
    if Chr: 
        New = Chr[3:]
        if New == 'X': New = 23
        elif New == 'Y': New = 24
        elif New == 'M': New = 25
        else: New = int(New)
    else:
        New = 0
    return New 
```

但它不会返回所需的排序顺序。相反，我得到一个列表，该列表以包含“chr1”的子列表开头，但接下来放置包含“chr10”的子列表，而不是“chr2”。我在这里做错了什么？

带有列标题的示例数据：

```
Type    OriginChr   OriginBegin OriginEnd   DestChr DestBegin   DestEnd

inversion   chr10   13105010    13105143    chr10   13104876    13105378

inversion   chr14   87902496    87902539    chr14   87902497    87902540 
```

瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:35:46.300

你可以试试，

```
a = ['chr1', 'chr10', 'chr5', 'chrX']
sorted(a, key=lambda x: Set_Chr_Nr_(x))
print a 
```

如果你想使用 list.sort()，你可以切换到，

```
a.sort(lambda x,y: x-y, key=lambda x: Set_Chr_Nr_(x)) 
```

对于您的原始输入，如果列是固定的，这将起作用，

```
a = [['inversion', 'chr14', 87902496, 87902539, 'chr14', 87902497, 87902540], ['inversion', 'chr10', 13105010, 13105143, 'chr10', 13104876, 13105378]]
sorted(a, key=lambda x: Set_Chr_Nr_(x[1]))
print a 
```

# python - 有效的 numpy 数组初始化以避免副作用？

> ID：14403080
> 
> 赞同：1
> 
> 时间：2013-01-18T16:19:32.297
> 
> 标签：python, numpy

基本上我需要的是这个的最终结果：

```
import numpy as np

class A:
    def __init__(self, dim):
        self.b = np.zeros(dim)

def add_to_a(a, value):
    a.b += value

dim = 10000
value1 = np.random.rand(dim)    
a = A(dim)

%%timeit add_to_a(a, value1)
100000 loops, best of 3: 9.64 us per loop 
```

但是，我更喜欢在函数外部更改*a*，主要是为了清楚起见，但也因为我明白良好的编程风格可以避免函数引起副作用。所以，我可以做这样的事情：

```
def dont_add(dim, value):
    c = np.zeros(dim)
    c += value
    return c

%%timeit a.b += dont_add(dim, value1)
10000 loops, best of 3: 25.8 us per loop 
```

显然，性能的下降是显着的（我将把它作为一个大循环的一部分来运行）。我认为这是因为函数中的 numpy 数组初始化，所以我尝试了这个：

```
d = np.empty(dim)
def dont_add2(d, value):
    d.fill(0)
    d+=value
    return d

%%timeit a.b += dont_add2(d, value1)
10000 loops, best of 3: 26.3 us per loop 
```

更糟。

有没有更有效的方法让函数返回一个 numpy 数组？还是我应该接受在函数中更改我的实例变量？（实际的函数采用两个完全不同的类的两个实例并修改第三个；因此是一个函数而不是一个方法。此外，添加的值是在函数内评估的向量。）

# google-maps - 支持谷歌地图的 Angular JS + 自动完成

> ID：14403086
> 
> 赞同：1
> 
> 时间：2013-01-18T16:19:48.783
> 
> 标签：google-maps, angularjs, google-maps-api-3, autocomplete

我最近开始使用 angularjs，并且正在使用谷歌地图制作应用程序。我制作了一个模块，在其中调用地图并调用自动完成功能。自动完成功能有效，但地图未显示

这是我的模块代码

```
 module.directive('googleplace', function() {
    return {
        require: 'ngModel',
        replace: true,
        link: function(scope, element, attrs, model) {
            var options = {
                types: []
            };
            var myOptions = {
                zoom: 6,
                center: new google.maps.LatLng(51.228388, 4.405518),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            scope.gPlace = new google.maps.places.Autocomplete(element[0], options);

            google.maps.event.addListener(scope.gPlace, 'place_changed', function() {
                scope.$apply(function() {
                    console.log(element.val());
                    console.log(element);
                    model.$setViewValue(element.val());                
                });
            });
            var map = new google.maps.Map(document.getElementById(attrs.id), myOptions);
            console.log(map);
        }
    };
}); 
```

**奖励：** 我还想使用我的范围内的数据在我的地图上放置叠加层，我怎样才能给对象模型值，然后把它放在谷歌地图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:51:22.107

我建议的第一件事是创建一个小提琴，以便我们可以看到正在传递的模型类型、控制器的外观以及这里到底发生了什么。

我最近试图做类似的事情，我的问题是在加载模型之前触发了指令。这意味着谷歌地图没有被传递任何阻止它渲染地图的值。

解决它的一种方法是“观察” ngmodel，在此处查看更多信息：[Angularjs 将对象传递给指令](https://stackoverflow.com/questions/14619884/angularjs-passing-object-to-directive)

另一种方法是从您的控制器调用“地图”功能。

当然，您也可以使用预先构建的指令：[http ://nlaplante.github.com/angular-google-maps/#!/usage](http://nlaplante.github.com/angular-google-maps/#!/usage)

编辑：对于覆盖，您可以使用所有必需的覆盖数据将模型转换并传递给指令范围。然后再次“观察”这些模型以确保它们已加载，一旦它们运行“地图”功能并渲染出地图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-17T06:55:55.147

试试这个可能对你有帮助。

首先安装 Bower

-> 凉亭安装 vs-google-autocomplete

1.  将 Google 地方信息库脚本添加到您的 index.html

将 vs-google-autocomplete.js 添加到您的 index.html。

# jquery - onClick 事件打开页面然后加载函数

> ID：14403087
> 
> 赞同：0
> 
> 时间：2013-01-18T16:19:52.890
> 
> 标签：jquery, web, onclick, href

在**#page2上，我有一个由函数****openContent()**触发的隐藏内容。

在**#page1**上，我想要一个 href 标记来加载**#page2**然后加载**openContent()**函数。

我试图创建一个 onClick 事件，该事件将在**#page1**上同时执行，但它不起作用。

我是 jQuery 的新手，我必须把它搞混了。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:25:27.267

**第 1 页**：`<a href="page2.html#open">Page 2</a>`

**第2页**

```
jQuery(document).ready(function($) {
  if(window.location.hash == "open") {
    openContent();
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:27:36.507

你为什么不在#page2 onload 中调用你的函数

```
<body onload="openContent()"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:28:10.530

如果您需要对瞬态内容或通过第二页的触发器执行此操作，您可以使用 jQuery 的 .on() 为这些类型的场景附加一个处理程序。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

一个简单的例子（来自维基）：

```
$("#dataTable tbody tr").on("click", function(event){
  alert($(this).text());
}); 
```

例如，您可以使用它来连接点击事件到`tr`页面上随时存在的任何事件（不需要存在）。

您可以使用此策略在第 1 页上连接第 2 页的点击*，*然后它只会在通过第 1 页加载时生效。

干杯。

# sony - ControlExtension Sony SmartWatch 中的 startLedPattern

> ID：14403090
> 
> 赞同：1
> 
> 时间：2013-01-18T16:20:12.590
> 
> 标签：sony, sony-smartwatch

我在我的 Control 中调用扩展 ControlExtension 类：

```
startLedPattern(0, Color.RED, 0010, 0010, 3); 
```

我的 SmartWatch 不闪烁，我不确定第一个参数是什么？它应该有什么价值？

更新：看起来不可能： [Sony SmartWatch - 如何知道配件设备是否支持 LED？](https://stackoverflow.com/questions/11007048/sony-smartwatch-how-to-know-if-led-is-supported-by-an-accessory-device)

那么为什么会存在这个调用，是针对手机中的 LED 的呢？任何示例源代码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:04:54.643

SmartExtension SDK 最初是为 SmartWatch 和 Smart Wireless Headset pro 开发的，但也打算用于未来的产品。因此，我们对 API 及其方法采取了广泛的视角，以便能够尽可能地适应未来。

因此，关于 LED，正如您所说，它在 SmartWatch 上不存在，手机上的 LED 代码也不存在，但可用于未来可能出现的任何未来产品。

# java - 从线程内部操作 Swing 组件

> ID：14403092
> 
> 赞同：1
> 
> 时间：2013-01-18T16:20:16.200
> 
> 标签：java, multithreading, swing

我想这样做：当主线程运行时，我想在不干扰主线程和冻结摆动组件的情况下执行一系列动作，并且我可以从主线程强制停止执行。其中一个动作可以操纵摆动组件。

一些帮助想象的代码：

```
public class Test extends JFrame{
    public Test()
    {
        super("Test");
        JButton button = new JButton("Stop!");
        button.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                //STOP THE EXECUTION
            }
        });
        this.add(button);

        //START OF EXECUTION
            System.out.println("FOO");
            System.out.println("BAR");
            button.setText("Hello");
            System.out.println("THIS");
        //END OF THE EXECUTION

        this.pack();
        this.setVisible(true);
    }
} 
```

我尝试只使用线程，它抛出异常，我忘记了异常是什么，但基本上它说我不能从非 AWT 线程或其他东西操作摆动组件。

之后我尝试同时使用 Thread 和 swingUtilities，但它们在执行完成后执行 swing 组件操作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:31:07.187

*   请参阅[有关 Swing 中的 Cuncurency 的 Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   [Swing Workers 方法 publish()、process() 和 done(](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html) ) 非常保证所有到 Swing GUI 的输出都将在 EDT 上完成

*   `SwingWokrer`是 的实现`WorkersThread and Swing`，并且在其执行期间都`Swing JComponent`可以访问`Mouse`并且`Key Events`

# java - 尝试 setTitle() 时出现 NullPointerException

> ID：14403093
> 
> 赞同：0
> 
> 时间：2013-01-18T16:20:16.287
> 
> 标签：java, android

我有一个帐户信息活动，我需要使用 PreferenceFragment 向用户显示我从 Internet 获得的帐户信息。

而且我正在尝试为首选项设置标题，但每次我有一段`java.lang.NullPointerExcption`时间我都在尝试这样做。

那么问题出在哪里，我该怎么办？

**AccountData.java**

```
import android.app.Activity;
import android.os.Bundle;
import android.preference.Preference;
import android.preference.PreferenceFragment;

public class AccountData extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new PrefsFragment()).commit();

        try {
            PrefsFragment PF = new PrefsFragment();
            PF.setAccountName();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static class PrefsFragment extends PreferenceFragment {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            addPreferencesFromResource(R.xml.account_data);
        }

        public void setAccountName() {
            Preference AccountName = (Preference) findPreference("account_name");
            AccountName.setTitle("Account Name");
        }
    }
} 
```

**account_data.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="@string/account" >
        <Preference
            android:key="account_name"
            android:selectable="false"
            android:summary="@string/account_name"
            android:title="@string/none" />
        <Preference
            android:key="account_type"
            android:selectable="false"
            android:summary="@string/account_type"
            android:title="@string/none" />
    </PreferenceCategory>

</PreferenceScreen> 
```

_ *****已编辑***** _

***堆栈跟踪***

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.app/com.example.app.AccountData}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
    at android.app.ActivityThread.access$700(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4918)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at com.example.app.AccountData$PrefsFragment.setAccountName(AccountData.java:39)
    at com.example.app.AccountData.onCreate(AccountData.java:21)
    at android.app.Activity.performCreate(Activity.java:5048)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:11:30.283

尝试将调用移动到片段的 onResume() 中。

```
public void onResume() {
        Preference AccountName = (Preference) findPreference("account_name");
        AccountName.setTitle("Account Name");
} 
```

我从未使用过“PreferenceFragment”，但这可能是因为 UI 尚未初始化。对 onCreate 的调用来自 UI 线程，并且会阻塞其他 UI 事务，例如添加片段。因此，即使您在 UI 中添加了一个片段，它也是一个延迟调用，还没有收到任何回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:22:57.947

这个

```
 PrefsFragment PF = new PrefsFragment();
        PF.setAccountName(); 
```

确实有效，因为这不会调用 onCreate。

仅使用 PrefsFragment 的一个实例。

# mobile - 在sqlite中创建表后添加主键

> ID：14403097
> 
> 赞同：0
> 
> 时间：2013-01-18T16:20:28.157
> 
> 标签：mobile, sqlite

我正在制作一个应用程序，其中我错误地创建了表而没有添加主键现在我想添加主键，因为它对我的表至关重要。我使用以下命令创建了表

你能帮我提前谢谢吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:41:52.423

来自[http://www.sqlite.org/lang_altertable.html的引用](http://www.sqlite.org/lang_altertable.html)

新列可以采用 CREATE TABLE 语句中允许的任何形式，但有以下限制：

*   该列可能没有 PRIMARY KEY 或 UNIQUE 约束。

# c - 默认属性和 pthread_create() POSIX C linux

> ID：14403101
> 
> 赞同：1
> 
> 时间：2013-01-18T16:20:52.887
> 
> 标签：c, linux, pthreads

任何人都可以在这样调用时逐步解释为什么这样`NULL`的参数（指针）`pthread_create`：

```
pthread_create(&id_thread1,NULL,thread1,NULL); 
```

导致`thread1`?的默认属性

我知道该`pthread.h`文件是这里的关键因素。但不幸的是，我不明白为什么；代码对我来说太复杂了。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:27:14.223

签名[**`pthread_create`**](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html)为：

```
 int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                      void *(*start_routine) (void *), void *arg); 
```

第二个参数是一个`pthread_attr_t*`指针。这允许您使用对象设置[线程的各种属性](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_attr_init.3.html)，例如调度策略或线程堆栈大小`pthread_attr_t`。如果`attr`是`NULL`则使用默认属性。

第四个参数只是一个指针，它可以指向线程开始时`void*`要传递的任意用户数据。`start_routine`如果`arg`是`NULL`，则传递一个空指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:26:10.303

> [...] 为什么这样的参数 [...] 会导致 thread1 的默认属性？

**因为 pthread 规范要求如果作为此特定函数的参数**（而不是“参数”）`NULL`传入，情况就是如此。

# java - 如何让 Safari 下载 CSV 而不是在浏览器中显示？

> ID：14403103
> 
> 赞同：5
> 
> 时间：2013-01-18T16:20:57.590
> 
> 标签：java, csv, safari, liferay

在 Safari 中，我的 CSV 文件显示在浏览器中，而不是使用“另存为”窗口下载它们。

我试过了：`response.setContentType("text/csv; charset=UTF-8");`。其他浏览器可以使用第二个选项，但 Safari 一直在浏览器中显示文件，而不是提示用户保存它。

顺便说一句，我正在运行 Liferay。

我通过包含以下内容来修复它： response.setContentType("application/csv; charset=UTF-8");

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:24:43.330

`text/csv`将最适合内容类型。您还想像这样设置内容配置：

```
response.setHeader( "Content-Disposition", "attachment;filename=" + filename ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:25:10.437

我认为您还需要[设置`Content-Disposition`HTTP 标头](https://stackoverflow.com/questions/3802510/force-to-open-save-as-popup-open-at-text-link-click-for-pdf-in-html)。

HTTP 标头应如下所示：

```
Content-Disposition: attachment; filename=WHATEVER_FILENAME_YOU_WANT 
```

`response`对象也有`setContentDisposition`方法吗？

# java - 如何从 Windows 命令提示符修改 Java 控制面板选择（对应于 deployment.properties 文件）？

> ID：14403108
> 
> 赞同：4
> 
> 时间：2013-01-18T16:21:11.820
> 
> 标签：java, security, applet, awt, java-7

**如何从 Windows 命令提示符修改 Java 控制面板选择（对应于 deployment.properties 文件）？** 具体来说，我正在寻找可以`"Action for local applets"`在`"Custom Security Level Settings"`窗口中影响选择更改的命令*（单击 Java 控制面板中“安全”选项卡中“安全级别”滑块的“自定义”设置旁边的“设置...”按钮)* , 从`"Prompt user"`到`"Run without prompt"`. 此设置的默认值随 Java 7 的更新 11 更改，它干扰了我现在正在修复的自动测试程序的操作，当 IE 启动 java.exe 时会弹出一个安全警告对话框窗口，除非此 Java 控件面板设置是预先调整的。该测试程序启动 IE 以运行本地 Java 小程序，该小程序是使用 AWT 编写的，并且不访问任何网站。

注意，这个问题最近已经讨论过了——见[https://service.parachat.com/knowledgebase/273/I-see-a-Do-you-want-to-run-this-application-security-warning.html](https://service.parachat.com/knowledgebase/273/I-see-a-Do-you-want-to-run-this-application-security-warning.html)

对于我的任务，手动修改此 Java 控制面板设置是解决问题的最不理想的方法，因为我正在修复的程序是自动化测试套件的一部分，它部署在许多机器上，并且需要手动干预使得部署过程容易出错。我需要这些命令从 Windows 命令提示符批处理文件运行。

我发现这些安全级别选择记录在 Java deployment.properties 文件和 2 个 Windows 注册表中，名称以 deployment.properties 文件结尾的键下在[Oracle Java SE 文档“部署配置文件和属性”](http://docs.oracle.com/javase/7/docs/technotes/guides/deployment/deployment-guide/properties.html)`"Software\JavaSoft\DeploymentProperties".` 中进行了全面讨论，但没有提到任何明显的内容about ，可能是因为此属性是最近添加的（？）当我调整 Java 安全级别并在 Java 控制面板中时，我看到了 deployment.properties 文件以及 DeploymentProperties 注册表项中反映的更改。`"Action for local applets"``"Action for local applets"`

所以我可以做到以下几点：

1.  通过脚本调整deployment.properties文件*（保存原始文件）*
2.  通过脚本启动 Java 控制面板——我观察到这会将更新从 deployment.properties 文件复制到注册表项 DeploymentProperties
3.  终止运行 Java 控制面板的 javaw 进程

    *   然后在 IE 中运行使用我本地 Java 小程序的程序
    *   然后将deployment.properties 文件恢复为原始文件，通过脚本启动Java 控制面板，并终止运行Java 控制面板的javaw 进程。

我也试过反之亦然——更新注册表项——但文件没有改变，Java控制面板将注册表项的值恢复为与未修改的deployment.properties文件一致！因此，更新注册表项是一种*错误*的方法。

**有一个更好的方法吗？**我上面的三步解决方案（修改属性）是它要完成的任务。**是否有可以修改给定部署属性的 Java 命令行实用程序？**有没有办法通过小程序标签的属性将这些部署属性传递给 JVM，只在给定的 Java 小程序中有效？

我使用了 Windows XP（32 位和 64 位）和 Windows 7（64 位）以及 Internet Explorer 7、8 和 9。如果有一个适用于 Windows XP、Windows Vista 的（简单）解决方案会很好、Windows 7 和 Windows 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-18T11:29:18.103

只需制作您自己的**deployment.properties**文件并将其放在 *{User Application Data Folder}\LocalLow\Sun\Java\Deployment* 位置。或编辑现有文件。需要重新启动互联网浏览器。

如[http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/properties.html中所述](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/properties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:25:28.833

Set it on installation as per article below:

[http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/client-security.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/client-security.html)

On installation, the WEB_JAVA_SECURITY_LEVEL argument has the following effect:

```
WEB_JAVA_SECURITY_LEVEL=VH sets the security level to very high
WEB_JAVA_SECURITY_LEVEL=H sets the security level to high
WEB_JAVA_SECURITY_LEVEL=M sets the security level to medium
WEB_JAVA_SECURITY_LEVEL=L sets the security level to low 
```

After installation of the JRE, verify the security level settings in the Java Control Panel.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T20:47:44.113

我已经用 java 7u25 完成了我的测试

当你在这里放置deployment.properties c:\windows\sun\java\deployment\deployment.properties

下次运行 javaw 或打开控制面板（也运行 javaw）时，新设置将生效。

理论上，您应该能够使用您的脚本删除一个新的 deployment.properties 文件，立即运行您的应用程序。关闭应用程序。然后将原始的deployment.properties 文件复制回来以恢复安全设置。

我还想提一下，您可以通过将存储受信任证书存储的位置更改为共享位置来摆脱“是否要运行此应用程序”框。将通过在任何其他计算机上手动批准证书生成的trusted.certs 文件放入其中。请注意，额外的斜杠是必需的，因为冒号是保留字符，反斜杠是转义字符。

```
#moves the user trusted certificates store to a shared location so we can pre-approve controls
deployment.user.security.trusted.certs=C\:\\Program Files\\Java\\jre7\\security\\trusted.certs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-29T09:55:14.197

只需搜索“配置 Java”，这将打开“Java 控制面板”。它位于您的 JRE 文件夹中的文件。

或者，您可以转到“控制面板”并单击“Java”图标。

在那里，您可以根据需要降低或提高安全级别。

我希望我有所帮助。

祝你今天过得愉快。:)

# java - Guava：如何从列表和单个元素创建显式排序？

> ID：14403114
> 
> 赞同：13
> 
> 时间：2013-01-18T16:21:36.023
> 
> 标签：java, guava, comparator

在 Guava 中，给定我知道集合中的一个和一个类型`Collection<E>`的元素，我想创建一个自定义，首先排序，然后是集合的其余部分。然而，到达那里的方式似乎非常复杂：`e``E`[`Ordering<E>`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Ordering.html)`e`

```
Collection<String> values = ImmutableList.of("apples", "oranges", "pears");
String first = "oranges";

List<String> remainingValues = newArrayList(values);  // this
remainingValues.remove(first);                        // seems
Ordering<String> myOrdering =                         // very
    Ordering.explicit(first, remainingValues.toArray( // complicated!
        new String[remainingValues.size()]));         // is there an easier way? 
```

我想要的是这样的东西：

```
Ordering.explicit(first); 
```

（我希望这个排序`first`到开头并保留所有其他元素的顺序，但文档说生成的 Ordering 将抛出一个`ClassCastException`未明确列出的元素。）

或者像这样：

```
Ordering.explicit(first, values.toArray(/* etc */)); 
```

（但这会失败，因为这`first`将是一个重复的值）

任何人都可以想出一种简洁的方式来做我想做的事吗？

顺便说一句，它不一定是`Ordering`，它也可以是`Iterable`在指定的 Order 中创建一个的解决方法，但同样，这非常复杂：

```
Iterable<String> sorted = Iterables.concat(
                             ImmutableList.of(first),
                             Iterables.filter(values, not(equalTo(first)))); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T15:44:41.847

好吧，这是一种方法，但您可能不会发现它更好。

```
final String special = "oranges";
Collections.sort(
    list,
    new Comparator<String>() {
      public int compare(String left, String right) {
        return ComparisonChain.start()
            .compareTrueFirst(left.equals(special), right.equals(special))
            .compare(left, right)
            .result();
      }
    }); 
```

[比较链文档](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/ComparisonChain.html)

[相关 Guava 功能请求](https://github.com/google/guava/issues/332)——请添加任何详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-22T23:04:33.430

如果您有更多特殊值，这会更方便且重复性更少：

```
class PriorityComparator<T> implements Comparator<T> {
    private final List<T> values;

    public PriorityComparator(T... values) {
        this.values = Arrays.asList(values);
    }

    @Override public int compare(T o1, T o2) {
        int idx1 = values.indexOf(o1);
        int idx2 = values.indexOf(o2);
        if (idx1 > -1) {
            return idx2 > -1 ? idx1 - idx2 : -1;
        }
        return idx2 > -1 ? 1 : 0;
    }
} 
```

您可以在比较链中使用它，例如

```
return ComparisonChain.start()
    .compare(left, right, new PriorityComparator<>("oranges", "apples"))
    .compare(left, right)
    .result(); 
```

它将按照指定的元素对 中的元素进行排序`PriorityComparator`，其他元素被报告为相等。

`T`要求具有可比性并将其用作默认值也很容易：

```
class PriorityComparator2<T extends Comparable<T>> implements Comparator<T> {
    private final List<T> values;

    public PriorityComparator2(T... values) {
        this.values = Arrays.asList(values);
    }

    @Override public int compare(T o1, T o2) {
        int idx1 = values.indexOf(o1);
        int idx2 = values.indexOf(o2);
        if (idx1 > -1) {
            return idx2 > -1 ? idx1 - idx2 : -1;
        }
        return idx2 > -1 ? 1 : o1.compareTo(o2);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:00:46.773

也许这个答案并不比你已经拥有的更容易/不那么复杂，但至少它可以重复使用:)

```
class FirstOrdering<T extends Comparable> extends Ordering<T> {

    private T first;

    public FirstOrdering(T first) {
        this.first = first;
    }
    @Override
    public int compare(@Nullable T left, @Nullable T right) {
        // TODO Nullchecks...
        if (first.equals(left)) return -1;
        if (first.equals(right)) return 1;
        return left.compareTo(right);
    }
}

final String first = "B";
    new FirstOrdering(first).
            sortedCopy(Arrays.asList("A", "D", "E", first)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T21:02:51.117

只需使用[NullsFirstOrdering](https://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/collect/NullsFirstOrdering.java)作为您的模板并创建一个排序第一个元素的排序，将其他所有内容委托给另一个排序：

```
public class ItemFirstComparator<T> implements Comparator<T> implements Serializable {
  private final Comparator<? super T> comparator;
  private final Object item;

  ItemFirstComparator(Object item, Comparator<? super T> comparator) {
    this.item = item;
    comparator = checkNotNull(comparator);
  }

  @Override public int compare(@Nullable T left, @Nullable T right) {
    if (left == right) {
      return 0;
    }
    if (Objects.equals(left, item)) {
      return -1;
    }
    if (Objects.equals(right, item)) {
      return 1;
    }
    return comparator.compare(left, right);
  }
} 
```

然后，您可以轻松地链接订购：`Ordering.from(new ItemFirstComparator("oranges", Ordering.allEqual()))`.

# 编辑

将代码更改为使用 Comparator 而不是 Ordering，其余部分保持不变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-23T19:17:43.307

如果您查看 com.google.common.collect.ExplicitOrdering 的来源，它会维护一个包含每个项目排名的地图，并`compare`简单地比较排名。您可以自己做同样的事情，但将指定的第一个项目的排名强制为 -1，这在所有其他项目之前。

如果您有一个列表（如问题标题所述），Java 8 流使构建地图相当方便：

```
Map<T, Integer> rankMap = IntStream.range(0, list.size()).boxed().collect(
    Collectors.toMap(list::get, i -> list.get(i).equals(first) ? -1 : i));
Comparator<T> cmp = Comparator.comparing(rankMap::get); 
```

如果您只有一个 Collection （如问题的正文所述），则需要使用 for 循环来构建地图：

```
Map<T, Integer> rankMap = new HashMap<>(coll.size());
int rank = 0;
for (T t : coll)
    rankMap.put(t, t.equals(first) ? -1 : rank++);
Comparator<T> cmp = Comparator.comparing(rankMap::get); 
```

您可以像往常一样使用 Ordering.from 将 Comparator 转换为 Ordering。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-26T08:32:27.507

如果您开始考虑使用显式排序，则假设您的列表没有重复项。在这一点上，`FluentIterable`可以`.toSet()`使这变得微不足道。重复将被简单地忽略（而不是出错）。

```
Iterable<String> sorted = FluentIterable.of(first).append(values).toSet();
    or
ImmutableList<String> sorted =
    FluentIterable.of(first).append(values).toSet().toList(); 
```

IMO，您的第一个建议实际上并没有那么糟糕，如果您的列表包含非第一个重复值，它也可以工作。但是，如果您使用 FluentIterable，它看起来会更好，因为您可以连接混合的 Iterable 和元素类型：

```
Iterable<String> others = Iterables.filter(values, not(equalTo(first)));
Iterable<String> sorted = FluentIterable.of(first).append(others); 
```

但这里的问题是，如果您有超过 1 个“第一个”元素，您将丢失副本。

修复是微不足道的：

```
Iterable<String> firsts = Iterables.filter(values, equalTo(first)));
Iterable<String> others = Iterables.filter(values, not(equalTo(first));
Iterable<String> sorted = FluentIterable.from(firsts).append(others); 
```

这需要对您的集合进行两次迭代，但该算法很简单，并且可能比任何基于 Comparator 的算法都快。如果我必须对这样的实现进行代码审查，我会毫不犹豫地接受它，因为它具有超强的可读性/可维护性，而且我 100% 相信它可以按预期工作。

如果一切都失败了，手动迭代永远不会伤害任何人：

```
List<String> firsts = new ArrayList<>();
List<String> others = new ArrayList<>();
values.forEach(element -> (first.equal(element) ? firsts : others).add(element));
Iterable<String> sorted = FluentIterable.from(firsts).append(others); 
```

最后，请注意，由于这些使用`FluentIterable`，从这些中获取集合 ( `ImmutableList`) 就像附加`.toList()`到您一样微不足道`FluentIterable`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-28T13:19:23.920

这听起来也像“排名”排序，其中“第一”的对象具有更高的权重：所以 1-liner 排序将是：

```
Ordering.explicit(true, false).onResultOf(first::equals);
   or the more general
Ordering.natural().reverse().onResultOf(rankFunction); 
```

# db2 - SAS在减去两个值时得到错误的结果

> ID：14403115
> 
> 赞同：2
> 
> 时间：2013-01-18T16:21:37.787
> 
> 标签：db2, sas

全部，

我遇到了一些与 SAS 如何处理两个两位小数变量的减法相关的问题。这些结果被写入 DB2 数据库。此处使用的所有字段都导入到 SAS 并写入数据类型为 DECIMAL(19,2) 的 DB2 字段这是问题所在：

```
 AL_AMT       - PL_AMT       = DIF_AMT
 From SAS:   9,918,322.38 - 9,942,322.30 = (23,999.91)
 Expected:   9,918,322.38 - 9,942,322.30 = (23,999.92) 
```

这里有一些非常精简的代码片段。毫无疑问，SAS 很古怪。我希望有人可以帮助我发现它的许多怪癖中的哪一个可能导致了这种情况。

```
/* CAmt and PPmt are retrieved from a lengthy PROC SQL statement, */
/* their formats are unaltered.                                   */
data WORK.TABLE1;
set WORK.TABLE0;
Difference = CAmt - PPmt;
run;

data WORK.TABLE2(keep=Rep:);
 set WORK.TABLE1 end=last;

If _N_=1 then do;
    Rep1CAmt=0;
    Rep1PPmt=0;
    Rep1Diff=0;

end;

  Rep1CAmt+CAmt;
  Rep1PPmt+PPmt;
  Rep1Diff+Difference;

if last;

Rep1Diff=Rep1CAmt-Rep1PPmt;
Rep1Diff=round(Rep1Diff,.01);

/* I realize these two lines are redundant/unnecessary, but I was trying 
   different things to get the numbers to add up correctly, no such luck */    

run;

data WORK.TABLE3;
set work.TABLE2;
AL_AMT=round(Rep1CAmt,.01);
PL_AMT=round(Rep1PPmt,.01);
DIF_AMT=AL_AMT-PL_AMT;
run;

proc append data=WORK.TABLE3 base=LIBNAME1.DB2TABLE(drop=ID) force; 
run; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:13:48.583

当然，SAS 并没有把直接减法弄错：

```
data test;
x=9918322.38;
y=9942322.30;
z=x-y;
put _all_;
run; 
```

很可能您在早期的计算中遇到了一些数值精度问题（或者来自 DB2 的转换？）。用十进制表示法考虑以下内容：

`1 - (2/3) = 0.333`

`0.333 + (1/3) = 0.666`

`0.666 + (1/3) = 0.999`

二进制算术具有相似但不相同的问题。在极少数情况下，在进行某些类型的数学运算时，您最终会得到一个类似的数字 `1.0000000000000000000001423` 而不是 1。因此，当您比较两个数字或进行进一步的数学运算时，您可能不会得到您期望的答案。

为了避免这个问题，您有几个选择，所有这些都归结为使用某种形式的舍入。您可以在不会影响您的准确性的计算中的某个较早点将数字四舍五入，但可能会避免这个特定问题；您可以使用专门为此目的设计的 FUZZ 函数或其兄弟之一（如果数字在整数的 1E-12 范围内，它将返回最接近的整数 - 但是，如果您正在处理十进制值，您可以不能使用这个）。ROUNDZ（fuzz 系列函数之一）也可能有帮助 - 这个例子是从 ROUNDZ 的手册页拼凑而成的，但修改为舍入为 2.50 或 2.51 而不是 2 或 3。

```
data test;
format value round roundz BEST32.;
   do i=12 to 19;
      Value=2.505 - 10**(-i);
      Roundz=roundz(value,0.01);
      Round=round(value,0.01);
      output;
   end;
   do i=18 to 12 by -1;
      value=2.505 + 10**(-i);
      roundz=roundz(value,0.01);
      round=round(value,0.01);
      output;
   end;
run; 
```

由于您使用的是浮点数，我建议四舍五入到 1E-12 范围内的值 - 所以，[number] = roundz([number],1E-12);

That will generally cut off the fuzziness and make sure your numbers consistently behave. You might need to pick something slightly larger, like 1E-10 - I'm only really familiar with solving this for integer math cases, for FP cases I think it's theoretically the same but not entirely confident.

# dependency-injection - 有使用 Guice 的子类的公共提供程序吗？

> ID：14403119
> 
> 赞同：1
> 
> 时间：2013-01-18T16:21:49.337
> 
> 标签：dependency-injection, guice

我正在尝试为所有子类实现一个通用提供程序，想象一些模式： `SuperComponent.class`是`ComponentA.class`and的父级`ComponentB.class`。我有提供者：

```
 @Provides
<T extends SuperComponent> List<T> providesComponents(Provider<T> provider) {
    List<T> componentList = new ArrayList<>();
    for (int i = 0; i < 5; i++) {
        componentList.add(provider.get());
    }
    return componentList;
} 
```

这个想法是在需要对象`List<ComponentA>`和/或`List<ComponentB>`在另一个类的构造函数中调用此提供程序。想象一下：

```
public class ResourceManager {

List<ComponentA> componentAList;
List<ComponentB> componentBList;    

@Inject
public ResourceManager(List<ComponentA> componentAList, List<ComponentB> componentBList) {
    this.componentAList = componentAList;
            this.componentBList = componentBList;
} 
```

我收到一条错误消息：

```
1) com.google.inject.Provider<T> cannot be used as a key; It is not fully specified. 
```

我怎样才能让它工作？我知道我可以为每个创建不同的提供程序，`List<ComponentA>`但`List <ComponentB>`我需要它，因为在现实中组件的数量远大于 2...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:04:57.570

我不认为有一个很好的内置方法来处理这个问题——Guice 可以绑定很多，或者检查和操作它的绑定，但是没有很好的接口来创建元级别的绑定。不过，您确实有几个选择：

1.  通过 Providers 将 List-constructing 留给消费者：

    ```
    public static <T> List<T> createList(Provider<T> provider) {
      List<T> list = new ArrayList<T>();
      for (int i = 0; i < 5; i++) {
        list.add(provider.get());
      }
      return list;
    }

    @Inject MyConsumer(Provider<Foo> depProvider) {
      List<Foo> myFoos = createList(depProvider);
    } 
    ```

2.  列出您需要像这样绑定的类并在您的`configure`方法中创建提供程序：

    ```
    public class MyModule extends AbstractModule {
      public void configure() {
        List<Class<?>> classList = Lists.newArrayList(Class1.class, Class2.class);
        for (Class<?> clazz : classList) {
          bind(listOf(clazz)).toProvider(new ComponentListProvider<?>(getProvider(clazz)));
        }
      }

      private static <T> Key<List<T>> listOf(Class<T> clazz) {
        return new Key<List<T>>() {};
      }

      private static class ComponentListProvider<T> implements Provider<List<T>>() {
        private final Provider<T> wrappedProvider;

        ComponentListProvider(Provider<T> wrappedProvider) {
          this.wrappedProvider = wrappedProvider;
        }

        @Override public List<T> get() {
          return createList(wrappedProvider);
        }
      }
    } 
    ```

    这使用[`getProvider`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/AbstractModule.html#getProvider%28java.lang.Class%3CT%3E%29), 一个非常方便的方法，它检索一个类型，该类型`Provider`将在`Injector`创建后立即工作（但不是之前）。

3.  [通过使用Guice SPI](http://code.google.com/p/google-guice/wiki/InspectingModules)遍历 Module 中的每个绑定，编写一个执行上述操作的模块。

希望有帮助！

# ruby-on-rails - Active Record 根据父母的情况获取孩子

> ID：14403120
> 
> 赞同：1
> 
> 时间：2013-01-18T16:21:51.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我有一个数据库设置：

```
User has_many :cars
Car  has_many :timeslips
Timeslip  has_one :car 
```

我只需要在父 :car 具有某个 :user_id 时返回 :timeslips

在我的控制器中，我想说这样的话：

```
@timeslips = Timeslip.car.where(:user_id => params[:user_id]) 
```

当满足父母条件时，返回所有孩子的最佳做法/方法是什么？我应该在模型中做一个方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T20:30:01.870

我会使用 ActiveRecord 连接： http: [//guides.rubyonrails.org/active_record_querying.html#joining-tables](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)

```
@timeslips = Timeslip.joins("INNER JOIN cars on timeslips.car_id = cars.id").where("cars.user_id = ?", params[:user_id]) 
```

# asp.net-mvc - 不使用 jQuery validate 为取消链接触发验证

> ID：14403122
> 
> 赞同：1
> 
> 时间：2013-01-18T16:21:57.433
> 
> 标签：asp.net-mvc, jquery-validate

我们正在使用 jQuery Unobtrusive validate 和 MVC4。我们的表单有一个取消锚点，我们想用它来在客户端重置表单。

我们正在使用 onFocusOut 验证。

如果我们专注于无效的字段并按下取消链接，则失去对输入字段的关注的动作会触发验证。

我知道如果它是一个提交按钮，我们可以使用取消类，但这只会导致提交时间验证不会触发。onFocusOut 验证仍然会触发。

我们有一个解决方案，涉及我们在取消链接上捕获 onMouseDown，设置 DoNotValidate 标志，然后关闭该标志。它有效，但看起来确实像一个 Kludge。

是因为我们使用了 onFocusOut 吗？其他人在使用 OnFocusOut 时如何处理取消？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:26:26.947

`onblur`除了禁用在事件中执行的验证之外，恐怕没有干净的解决方案。`onsubmit`您可以禁用它并仅为事件执行客户端验证。否则，您发现的解决方法似乎是可行的。

# codeigniter - 将 /assets 文件夹放入 CodeIgniter 中的 /application

> ID：14403128
> 
> 赞同：0
> 
> 时间：2013-01-18T16:22:11.810
> 
> 标签：codeigniter, codeigniter-2, assets

我开始研究[CodeIgniter](http://ellislab.com/codeigniter)，在深入研究之前，我正在考虑和分析一些场景。

其中之一是关于 assets (css/js/img) 文件夹：谷歌搜索，主要趋势是将 assets 文件夹放在根目录下，与 /system 和 /application 处于同一级别；考虑到我可以拥有多个应用程序（如此处所述：http: [//ellislab.com/codeigniter/user-guide/general/managing_apps.html](http://ellislab.com/codeigniter/user-guide/general/managing_apps.html)），每个应用程序都有自己的资产文件夹，这是最合乎逻辑的解决方案我是将 /assets 文件夹放入 /application 文件夹 - 这似乎也更“便携”

好的，现在的问题是：如何将资产文件引用到我的视图中？如果 /assets 文件夹位于根目录中，我会阅读我可以参考的内容，即。.css 文件是这样的：`<?=base_url()?>/assets/css/style.css` 但是如果 /assets 文件夹在 /application 中，因为我不能使用`<?=base_url()?>/application/assets/css/style.css`怎么办？

提前致谢！

@Brendan：嗨，Brendan，感谢您的评论；我将从拥有多个应用程序（/application1、/application2 等）的问题开始更好地解释“可移植性”，这是我回答的出发点；如果我只有一个应用程序也没问题，但我'我在预想拥有不止一个的场景）

将 /assets 文件夹与 index.php 放在同一级别意味着我最终可能会拥有许多子文件夹，就像我的应用程序一样，例如 /assets/application1、/assets/application2 等。

如果我必须将 applicationX 文件夹移动到其他计算机，我应该记得移动相应的 /assets/applicationX 文件夹；如果我曾经将 /applicationX 重命名为 /newnameX，我应该记得将 /assets/applicationX 也重命名为 /assets/newnameX，以免弄得一团糟

拥有 /assets INTO /application 让我摆脱了所有这些问题，这是我的想法；助手的想法很好，正如我刚刚找到的这篇文章所说，这似乎完全解决了我要问的问题：http: [//heybigname.com/2009/11/23/managing-assets-with-codeigniter /](http://heybigname.com/2009/11/23/managing-assets-with-codeigniter/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:57:34.983

定义“便携”。

如果您的 CodeIgniter 应用程序设置正确——即：

*   `system`和`application`web 根目录下的文件夹
*   `$config['base_url']`是正确的（包括协议在内的完整域，即`http://www.example.com`）

然后您应该将您的`assets`文件夹放在与前端控制器 ( ) 相同的目录中`index.php`。这种配置与文件夹`assets`内部一样“便携”（我认为它更是如此） 。`application`如果您的应用程序目录位于 Web 根目录之下（确实应该如此），那么如果没有“代理”脚本为您加载文件，您将无法从该文件夹加载资产。充其量这将意味着更多的 php 负载，在最坏的情况下（在实施不佳的情况下）存在安全风险。

简而言之：`assets`真的不属于`application`. 然而，PHP/CI 的美妙之处在于，如果您愿意，您仍然可以这样做（但`application`必须高于 Web 根目录）。

此外，您可以将文件路径传递给`base_url()`函数，如下所示：

```
<?php echo base_url('assets/css/style.css'); // output: http://www.example.com/assets/css/style.css ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T09:46:51.100

我知道这是一个老问题，但我前段时间写了一篇文章，针对这个问题提出了一些观点。我喜欢 Ruby on Rails 布置 Assets 文件夹的方式，并且我创建了一个模仿此的设置。

在这里查看我的博客：http: [//www.stefandunn.co.uk/blog/custom-codeigniter-helpers-stolen-from-ruby-on-rails/](http://www.stefandunn.co.uk/blog/custom-codeigniter-helpers-stolen-from-ruby-on-rails/)

这是我说的最后一点。

有了这个，您可以使用简单的 php 代码引用您的资产文件：

```
javascript_tag('main.js');
image_tag('logo.png', array('class'=>'logo', 'id'=> 'logo'));
stylesheet_tag('main.css'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T07:22:17.817

在 codeigniter 中设置资产的最佳实践如下：

*   应用
*   资产
*   系统

但你想要：

*   应用程序 > 资产 > css > style.css
*   系统

但是如果你想将 assets 文件夹保留在应用程序中，那么你必须做一些额外的功能，如下所示：首先，确保你已经在你的控制器中加载了 URL 帮助程序：

```
$this->load->helper("url"); 
```

您必须首先使用以下代码在“application/helpers”目录中创建一个名为“my_helper.php”的助手：

```
if ( ! function_exists('asset_url()'))
{
  function asset_url() {

    return base_url().'application/assets/';

  }
} 
```

现在，您必须将此助手加载到您的控制器中，如下所示：

```
$this->load->helper("my_helper"); 
```

现在用以下代码替换“application/”目录中的 .htaccess 代码：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|assets|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

完成上述所有功能后，您必须在视图中声明您的资产，如下所示：

```
<link rel="stylesheet" href="<?php echo asset_url(); ?>css/style.css"> 
```

# matlab - 可视化多个集合的基数

> ID：14403129
> 
> 赞同：2
> 
> 时间：2013-01-18T16:22:21.447
> 
> 标签：matlab, plot

我有一组集合（代表几个具有各自项目的集群），每个集合包含不同数量的项目。

例如像这样（里面的数字是类 ID）：

```
{1,2,3,4,5}
{6}
{7,8}
{9} 
```

这当然可以很容易地转换为基数列表`{5,1,2,1}`。我需要做的是直观地表示每个基数。

最好的方法可能是通过每组 N 个随机颜色的正方形来显示它（像[这样](http://en.wikipedia.org/wiki/File%3aCluster-2.svg)- 数据集围绕`{20,10,10}`），但绘制四个不同颜色的圆圈（带有`radius = {5,1,2,1}`）也可以。

我还发现[`scatter`](http://www.mathworks.com/help/matlab/ref/scatter.html)它提供了与需要类似的输出，但它没有为点定位提供任何自动化。

我可以生成随机点并为它们着色或手动生成这些圆圈，但我徘徊在 Matlab 是否为此提供功能。

**这个想法是展示如何将组分成集群......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:11:26.143

您可以使用[bar](http://www.mathworks.com/help/matlab/ref/bar.html)（或[barh](http://www.mathworks.com/help/matlab/ref/barh.html)）：

```
bar([5 1 2 1]) 
```

径向选项是[compass](http://www.mathworks.com/help/matlab/ref/compass.html)、[polar](http://www.mathworks.com/help/matlab/ref/polar.html)和[rose](http://www.mathworks.com/help/matlab/ref/rose.html)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:39:05.910

你为什么不使用[`pie`](http://www.mathworks.com/help/matlab/ref/pie.html)或[`pie3`](http://www.mathworks.com/help/matlab/ref/pie3.html)情节？

```
card = cellfun( @numel, clusters ); % get the cardinality of each cluster
figure('Name','visualizing cluster cardinality');
subplot(121);
pie( card );
title('2D pie plot');
subplot(122);
pie3( card );
title('3D pie plot');
colormap( rand( numel(card), 3 ) ); % random color map 
```

# javascript - 将信息添加到不同的页面 onclick

> ID：14403131
> 
> 赞同：0
> 
> 时间：2013-01-18T16:22:28.127
> 
> 标签：javascript

userDiv 是一个动态创建的包含用户名和图片的按钮。通过一个循环，我将用户名指定为 div/button id。Onclick 它转到另一个页面并将用户的名称分配给 var name。但是，当我到达另一个页面时，我似乎无法添加任何信息。我尝试了几种不同的方法（见下文）。例如，当我尝试附加按钮本身时，我得到一个 Object[object object]，而 document.write 只是将屏幕完全变为空白。如果有人可以向我解释这一点并提供解决方案，我将不胜感激。

```
 userDiv.id=theName;
        userDiv.onclick=(function() {
            window.location.href = 'Createtask.html';
            alert($(this).attr("id"));
            name= $(this).attr("id");
            makeTask();
             });
};      
}

function makeTask(){
    function makeTask(){
    document.write(name);// blank screen
    //var userBtn= document.getElementById(name);
    //$("#singleUser").appendChild(userBtn);//Object [object object] error
    //var singleUser = document.getElementById('singleUser');
    //var greetUser = document.createElement("div");
    //greetUser.innerhtml='Yippee!';// can't do innerHTML of null
    //singleUser.appendChild(greetUser);//can't appendChild of null
    //$("#singleUser").html("Yippee");//no error, just nothing
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:26:03.387

当页面退出时，您不能使用 JavaScript 从上一页对下一页执行任何操作。这就是查询字符串和帖子请求的用途。您将数据发送到下一页并由它处理。

```
window.location.href = 'Createtask.html?id=theID'; 
```

在下一页您[阅读查询字符串](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)，您可以使用该数据。

# facebook - Facebook FQL / Graph API：Instagram 和 Foursquare 帖子不显示，即使 Open Graph 操作的权限正常

> ID：14403133
> 
> 赞同：2
> 
> 时间：2013-01-18T16:22:32.797
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我在使用 Facebook Graph API / Facebook FQL 时遇到了一些问题。让我从一些背景信息开始：​​我遇到了一个问题，当通过图形 API 请求时，一堆相册不包含任何图片，例如 Instagram 或 Foursquare 相册。

实际上，在 FB 错误跟踪系统上记录了一个与此相关的问题：[https ://developers.facebook.com/bugs/202119973248747?browse=search_50f96e47a936c5060070555](https://developers.facebook.com/bugs/202119973248747?browse=search_50f96e47a936c5060070555)

从该页面上的评论中，我在 StackExchange 上遇到了一个相关问题：[来自 Instagram 的帖子没有出现在 Facebook Open Graph API](https://stackoverflow.com/questions/11677898/posts-from-instagram-not-showing-up-on-facebook-open-graph-api) => 在这篇文章中，Igy 提供了一个解决手头问题的方法：通过专门询问用户许可对于特定应用程序的打开图（自己和朋友）操作，相册应包含图片。

果然，这行得通。到目前为止，一切都很好。但这就是我的问题开始的地方：我现在向我的应用程序的用户询问了正确的权限，并且图片出现在 Open Graph 相册（如 Instagram、Foursquare 等相册）中。但是，提要中的相关帖子似乎没有出现：如果我去朋友的时间线（通过 Graph API 请求他的提要连接），Instagram / Foursquare 帖子没有返回。我在这里有点茫然，因为果然：图片确实出现在相册中，只是相关帖子似乎丢失了，无论是在新闻源中还是在某人的时间线上。这里发生了什么？我缺少权限吗？这根本不可能吗？

与此相关：我现在可以专门要求相关的打开图形权限，以便能够查看相册中的图片。但是：有什么方法可以知道哪个应用程序创建了相册，或者有其他方法可以知道向用户询问哪些应用程序特定的权限？没有它，就不可能为未来和/或非硬编码的应用程序解决这样的问题：例如：我可以请求 Foursquare 和 Instagram 的许可，因为我对这些命名空间进行了硬编码，但如果我遇到另一个人的另一张专辑也使用开放图向其发布图片的应用程序，我无法知道哪个应用程序创建了相册，这导致不知道哪个应用程序请求权限才能查看图片...任何线索如果这样可以做到？

# postgresql - 通过网络复制 postgres 数据库的快速方法

> ID：14403135
> 
> 赞同：2
> 
> 时间：2013-01-18T16:22:36.217
> 
> 标签：postgresql

我一直在使用此命令在同一台服务器中快速克隆我的数据库

```
CREATE DATABASE newdb WITH TEMPLATE originaldb OWNER dbuser; 
```

如果我想通过我们的本地网络对第二台服务器执行此操作怎么办？那可能吗？

我在 Postgresql 9.2 一个 Win 7 x64（两台机器）上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:00:56.490

使用`pg_dump`：

```
pg_dump -h host1 -Fc originaldb | pg_restore -h host2 -d newdb 
```

理想情况下，您应该在 host1 或 host2 上运行它。

# .net - 在创建简单的消息总线时，推荐的架构是什么？

> ID：14403137
> 
> 赞同：2
> 
> 时间：2013-01-18T16:22:49.580
> 
> 标签：.net, wcf, redis, wcf-client, azureservicebus

我即将开始一个将用作简单消息总线的项目。消息或事件将在等待订阅者时发送给它。不必存储消息，因为我只是希望它作为任何订阅者实时数据的传递。首选的交付机制是 Web 请求 - REST/JSON。

在我最近与 Redis 的合作中，我认为这是一个很好的候选者，但由于我们主要是[Microsoft 商店](http://www.seniorark.com/Humor/Double%20Takes/after%201-17-08/lion%20covering%20eyes.gif)，所以我也在考虑[WCF 服务](https://stackoverflow.com/questions/722675/implementing-a-message-bus-architecture)和[Windows 服务总线](http://msdn.microsoft.com/en-us/library/ee732537.aspx)。

订阅者可能并不都是 .Net 客户端，所以我希望尽可能多地使用它，但是在门外，.Net 客户端连接将是第一位的。

我想创建尽可能简单的实现——不需要大量的开发时间，因为我想把大部分时间花在订阅者身上。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:03:03.613

如果您想使用 Redis，请查看 Redis 的[发布/订阅](http://redis.io/commands#pubsub)命令。

我不是 .net 人，但看起来这个链接可能会引导你朝着正确的方向前进：[https ://github.com/ServiceStack/ServiceStack.Redis/wiki/RedisPubSub](https://github.com/ServiceStack/ServiceStack.Redis/wiki/RedisPubSub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:57:15.437

Windows Azure 服务总线支持消息和事件模式。如果您只想跨网络边界连接服务，则可以使用 Relay，但在您的情况下，您希望不同类型的客户端使用不同的协议进行通信，因此消息传递可能更合适。您可以使用任何协议/编程模型 -> .NET API、WCF 绑定和简单的 REST 客户端将消息排入队列。从模式的角度来看，您可以使用队列或主题和订阅，具体取决于您是否需要单个请求/响应通道或广播等。以下代码示例演示了使用 WCF 编程模型。

[http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-WCF-ed259f73](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-WCF-ed259f73)

[http://code.msdn.microsoft.com/windowsazure/Windows-Azure-Inter-Role-9935c439](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-Inter-Role-9935c439)

对于 REST 客户端，以下示例将有所帮助： [http ://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-569cff88](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-569cff88)

有关队列/主题的更多信息，请访问：http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/) http://www.windowsazure.com/en -us/develop/net/how-to-guides/service-bus-topics/

REST API 参考可在此处获得：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh780717](http://msdn.microsoft.com/en-us/library/windowsazure/hh780717)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T08:01:08.963

我们基于 ZeroMq（传输）、Cassandra（对等发现和持久性）和 Protobuf（序列化）编写了对等消息总线 Zebus。

它使用目录/网格拓扑，这意味着没有单点故障和单一瓶颈。这在向外扩展时非常有用。

您可以在此处阅读有关其架构的更多信息：[https ://github.com/Abc-Arbitrage/Zebus](https://github.com/Abc-Arbitrage/Zebus)

# nhibernate - Nhibernate：没有持久性：System.Collections.Generic.List

> ID：14403138
> 
> 赞同：1
> 
> 时间：2013-01-18T16:22:54.580
> 
> 标签：nhibernate, queryover

任何想法为什么我在执行下面的查询时可能会得到“没有持久性：System.Collections.Generic.List”异常？

```
 var subs = new List<Subsection>();

        var subsections = Session.QueryOver<Subsection>()
                            .WhereRestrictionOn(s => s.Id)
                            .IsInG(subsectionIds)
                            .List<Subsection>();

        Location foreignExpertLocation = null;

        var result = Session.QueryOver<InternationalLawyerExpertise>()
            .JoinAlias(i => i.ForeignExpertLocation, () => foreignExpertLocation)
            .JoinAlias(() => foreignExpertLocation.Subsections, () => subs)
            .AndRestrictionOn(() => subs).IsInG(subsections)
            .Where(i => i.ForeignExpertLocation == location && i.Status.Id == _confirmed)
            .Fetch(lawyer => lawyer.PersonOrganisation.Person).Eager
            .Fetch(lawyer => lawyer.PersonOrganisation.Organisation).Eager
            .List<InternationalLawyerExpertise>();
        return result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:34:25.780

问题很可能在于您创建`subsections` *“子查询”*的方式。尝试检查这个答案：[https ://stackoverflow.com/a/14080092/1679310](https://stackoverflow.com/a/14080092/1679310)

*注意：缺少类的映射和定义，因此请根据您的代码片段将此作为“操作方法”*。您应该创建分离的查询：

```
var subQuery = QueryOver.Of<<Subsection>()
  .WhereRestrictionOn(s => s.Id)
    .IsInG(subsectionIds)
  .Select((s) => s.ID); // ID projection 
```

然后使用它：

```
var result = Session.QueryOver<InternationalLawyerExpertise>()
   ...
   .Where(Subqueries.PropertyIn("SubsectionID", subQuery.DetachedCriteria)) 
```

因此，您可以直接在一个带有内部选择的选择过滤器中（NHibernate 然后将子选择注入您的主查询）。

*...或提供有关您的映射的更多详细信息..*

# python - tkinter GUI 写入文本小部件并替换文本

> ID：14403151
> 
> 赞同：4
> 
> 时间：2013-01-18T16:23:32.593
> 
> 标签：python, python-3.x, tkinter

```
from tkinter import *
from tkinter import ttk

parent = Tk()

p = ttk.Panedwindow(parent, orient=HORIZONTAL)
p.pack(fill=BOTH, expand=1)

p1 = ttk.Panedwindow(parent, orient=HORIZONTAL)
p1.pack(fill=BOTH, expand=1)
f4 =ttk.Labelframe(p1, text='marks numbers histograms', width =400, height = 100)

p1.add(f4)

# declare and set variable(s)
marks_to_hist = StringVar()

# ROUTINE OPENS MARKS , TALLIES RANGES, DRAWS HISTOGRAM
def open_marks_numbers():

    N = int(marks_to_hist.get())
    N = N * 5
    marks = []
    for line in open('marks.txt').readlines():
       datafile = (line.strip().split('\t')[0].split(','))  
       for n in datafile:
          marks.append(int(n))
    marks=marks[:N]
    return marks

def open_numbers_for_draw(n):
    marks = open_marks_numbers()
    return marks[n-1::5]

def count_marks_range(numbers):
    marks_range_tally = [0] * 12
    for num in numbers[:]: 
        which_range=int(num//5)
        marks_range_tally[which_range] = marks_range_tally[which_range] + 1
    return marks_range_tally

def get_marks_tally():
    marks_range_tally = []
    draw_nums = [1,2,3,4,5] #or range(1,6)
    for n in draw_nums:
        numbers = open_numbers_for_draw(n)
        marks_range_tally.append(count_marks_range(numbers)) #create histogram, append to list
    return marks_range_tally

def write_histogram_marks():
    '''
    histogram format:
    1 - 4    **
    5 - 9    ***
    10 - 14  ******
    15 -19   **
    45 - 49  ****
    50       *

   '''
    import tkinter.filedialog
    histfilesaved =tkinter.filedialog.askopenfilename()
    histfile=open(histfilesaved,'w')
    marks_range_tally = get_marks_tally()
    # convert list to integers using list comprehension
    marks_count1 = [int(i) for i in marks_range_tally[0]]
    marks_count2 = [int(i) for i in marks_range_tally[1]]
    marks_count3 = [int(i) for i in marks_range_tally[2]]
    marks_count4 = [int(i) for i in marks_range_tally[3]]
    marks_count5 = [int(i) for i in marks_range_tally[4]]

    print(marks_count1 ,'\n', marks_count2, '\n' , marks_count3 , '\n', marks_count4 , '\n' , marks_count5)

    histfile.write('distribution of marks numbers \n')

    histfile.write('1-4:    ')
    histfile.write('*' * marks_count1[0])
    histfile.write(' ' * (22  -marks_count1[0]))
    histfile.write('1-4:    ')
    histfile.write('*' * marks_count2[0])
    histfile.write(' ' * (22  -marks_count2[0]))
    histfile.write('1-4:    ')
    histfile.write('*' * marks_count3[0])
    histfile.write(' ' * (22  -marks_count3[0]))
    histfile.write('1-4:    ')
    histfile.write('*' * marks_count4[0])
    histfile.write(' ' * (22  -marks_count4[0]))
    histfile.write('1-4:    ')
    histfile.write('*' * marks_count5[0])
    histfile.write('\n')

    histfile.write('5-9:    ')
    histfile.write('*' * marks_count1[1])
    histfile.write(' ' * (22 -marks_count1[1]))
    histfile.write('5-9:    ')
    histfile.write('*' * marks_count2[1])
    histfile.write(' ' * (22 -marks_count2[1]))
    histfile.write('5-9:    ')
    histfile.write('*' * marks_count3[1])
    histfile.write(' ' * (22 -marks_count3[1]))
    histfile.write('5-9:    ')
    histfile.write('*' * marks_count4[1])
    histfile.write(' ' * (22 -marks_count4[1]))
    histfile.write('5-9:    ')
    histfile.write('*' * marks_count5[1])
    histfile.write('\n')
    for i in range(2,10):
        low =  i * 5
        high = i * 5 + 4
        histfile.write(str(low) + '-' + str(high) + ':  ')
        histfile.write('*' * marks_count1[i])
        histfile.write(' ' * (22 -marks_count1[i]))
        histfile.write(str(low) + '-' + str(high) + ':  ')
        histfile.write('*' * marks_count2[i])
        histfile.write(' ' * (22 -marks_count2[i]))
        histfile.write(str(low) + '-' + str(high) + ':  ')
        histfile.write('*' * marks_count3[i])
        histfile.write(' ' * (22 -marks_count3[i]))
        histfile.write(str(low) + '-' + str(high) + ':  ')
        histfile.write('*' * marks_count4[i])
        histfile.write(' ' * (22 -marks_count4[i]))
        histfile.write(str(low) + '-' + str(high) + ':  ')
        histfile.write('*' * marks_count5[i])
        histfile.write('\n')
    histfile.write('50:     ')
    histfile.write('*' * marks_count1[-1])
    histfile.write(' ' * (22 -marks_count1[-1]))
    histfile.write('50:     ')
    histfile.write('*' * marks_count2[-1])
    histfile.write(' ' * (22 -marks_count2[-1]))
    histfile.write('50:     ')
    histfile.write('*' * marks_count3[-1])
    histfile.write(' ' * (22 -marks_count3[-1]))
    histfile.write('50:     ')
    histfile.write('*' * marks_count4[-1])
    histfile.write(' ' * (22 -marks_count4[-1]))
    histfile.write('50:     ')
    histfile.write('*' * marks_count5[-1])
    histfile.write('\n')
    histfile.close()
# ENDS marks NUMBERS FUNCTION

def evClear():
   num_draws.delete(0, END) ()# clears entry but causes error
   num_draws.focus() # places the cursor into the text box

def replace_histogram():

    data=open('histfile.txt','r')
    myData= data.read() # read the file to variable
    data.close()
    ViewHistogramWidget.insert(0.0,myData)
'''
BOTTOMFRAME (LEFT)
marks NUMBERS HISTOGRAMS
'''

from_lbl = Label(f4, text='how many records ? ', font='comic-sans-MS')
from_lbl.pack(side=TOP) 
num_draws =Entry(f4, textvariable=marks_to_hist, font='comic-sans-MS', width='2',insertbackground= 'red')
num_draws.pack(side=TOP) # enter number of records
enter_btn1 = Button(f4,text='draw new histogram', font='comic-sans-MS', command=replace_histogram)
enter_btn1.pack(side = BOTTOM, padx = 25)
clear_btn = Button(f4, text='clear', font='comic-sans-MS', command = evClear)
clear_btn.pack(side=BOTTOM, padx = 5)
ViewHistogramWidget= Text(f4,  width = 150) # set up a text widget as a root (window) child

with open('histfile.txt','r') as data:
   myText= data.read() # read the file to variable
   data.close() # close file handle

ViewHistogramWidget.insert(0.0,myText) # insert the file's text into the text widget

ViewHistogramWidget.pack(expand=1, fill=BOTH) # show the widget
mainloop() 
```

标记数据位于逗号分隔文件中，每条记录有五个标记，例如

```
1,2,3,4,5
6,7,8,9,3 
```

histfile 是一个简单的文本文件。

此“例程”正确显示由`write_histogram_marks()`.

我希望它能够根据用户定义的所需记录数（输入变量`marks_to_hist`）生成一个新的直方图文件，并将新文件写入文本窗口（擦除先前的显示）。然而，使用`replace_histogram`简单地重写已经显示的文件下方的相同文件。还有`evClear`我想用来清除输入字段和文本窗口的按钮。目前它会删除条目但会产生错误。我确信我的 histfile.write 过程非常笨拙且重复，但这是像我这样的“新手”可以弄清楚的唯一方法。

不得不说，我从 stackOverflow 上的人们那里得到了很多帮助，才能走到这一步。非常感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-03T16:35:11.180

使用以下类并替换 Text 和 Entry 小部件，利用新的 setText 和 clear 方法：

```
import Tkinter

class HistogramViewer(Tkinter.Text):
    def setText(self, text):
        self.clear()
        self.insert(Tkinter.END, text)

    def clear(self):
        self.delete("1.0", Tkinter.END)

class HistogramEntry(Tkinter.Entry):
    def setText(self, text):
        self.clear()
        self.insert(0, text)

    def clear(self):
        self.delete(0, Tkinter.END) 
```

根据 Bryan Oakley 的通知进行了改进。

# oracle - Node.js 甲骨文 ORM

> ID：14403153
> 
> 赞同：4
> 
> 时间：2013-01-18T16:23:38.020
> 
> 标签：oracle, node.js, orm

我对 Node.js 很陌生，我必须做一个必须使用 Oracle 数据库的应用程序。
我发现这个 ORM 可以连接到 Oracle 数据库[https://github.com/nearinfinity/node-persist](https://github.com/nearinfinity/node-persist)但 Oracle 的文档很差。
有人知道是否有更好的解决方案或有一些使用 Oracle 管理模块的示例吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-04T10:16:42.533

[sworm](https://github.com/featurist/sworm)是一种轻量级的 ORM，我们在 Oracle 中广泛使用它，但也支持 SQL Server、MySQL、Postgres 和 SQLite3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-04T09:43:16.290

使用 Oracle 的 TypeORM。最适合基于 Typescript 的应用程序，但也可以与 Javascript 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T16:03:57.007

我想你会发现对于 nodejs，最受支持的 ORM 是开源数据库，例如 mongodb (mongoose) 和 mysql (sequelize 和 bookshelf(没用过))

Mongoose 和 MongoDB 是我与 nodejs 一起使用的，这是我的建议。

我经常与 Oracle 合作，使用 Oracle 的公司倾向于使用 ADF (Java)、APEX (PL/SQL) 以及其他 Oracle 特定工具（Report Writer、Oracle Forms）

# git - 无法推送到 GitHub

> ID：14403155
> 
> 赞同：6
> 
> 时间：2013-01-18T16:23:44.063
> 
> 标签：git, github, connection

首先，是的，这是[错误关闭问题](https://stackoverflow.com/questions/14007630/pushing-to-github-impossible)的完全重复。

我有与原始海报**完全相同的问题**（就像他一样，除了他之外，我找不到其他人有这个问题）。

我已经为这个问题苦苦挣扎了一个多月，甚至不得不求助于使用 bitbucket（效果很好），即使我在 GitHub 上有付费计划，所以请耐心等待。不，这与维护**无关（目前在**[https://status.github.com/](https://status.github.com/)上一切正常，我仍然遇到与 Vulpo 相同的错误）。

我的用户名和密码都不包含特殊字符。

我也可以使用其他计算机正常推送，所以是的，这一定**与我的计算机有关**。我正在运行 Arch Linux，这是我的`git config -l`：

```
alias.s=status
user.name=Gustavo Machado
user.email=gdmachado@me.com
credential.helper=cache
color.ui=auto
color.branch.current=yellow reverse
color.branch.local=yellow
color.branch.remote=green
color.diff.meta=yellow bold
color.diff.frag=magenta bold
color.diff.old=red bold
color.diff.new=green bold
color.status.added=yellow
color.status.changed=green
color.status.untracked=cyan
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
remote.origin.url=https://github.com/gdmachado/paradigmas-de-programacao.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
branch.master.remote=origin
branch.master.merge=refs/heads/master 
```

启动一个新的 git 文件夹并只推送一个 README 文件可以正常工作，但是一旦我尝试推送我的文件，它就会挂起一段时间，然后返回一个错误：

```
-%- src/paradigmas-de-programacao ‹master➔› » git push -u origin master
Username for 'https://github.com':
Password for 'https://gdmachado@github.com': 
Counting objects: 6, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 1.30 KiB, done.
Total 5 (delta 0), reused 0 (delta 0)
error: RPC failed; result=52, HTTP code = 0
fatal: The remote end hung up unexpectedly
fatal: recursion detected in die handler
Everything up-to-date 
```

即使它说`everything up-to-date`，也没有任何东西被推送到远程服务器。

SSH 也不起作用。这是的输出`ssh -v git@github.com`：

```
OpenSSH_6.1p1, OpenSSL 1.0.1c 10 May 2012
debug1: Reading configuration data /home/gustavo/.ssh/config
debug1: /home/gustavo/.ssh/config line 1: Applying options for github.com
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
debug1: identity file /home/gustavo/.ssh/id_rsa type 1
debug1: identity file /home/gustavo/.ssh/id_rsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.5p1 Debian-    6+squeeze1+github8
debug1: match: OpenSSH_5.5p1 Debian-6+squeeze1+github8 pat OpenSSH_5*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_6.1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
debug1: Host 'github.com' is known and matches the RSA host key.
debug1: Found key in /home/gustavo/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/gustavo/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: read PEM private key done: type RSA
debug1: Authentication succeeded (publickey).
Authenticated to github.com ([207.97.227.239]:22).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: Remote: Forced command: gerve gdmachado     c8:d2:c3:fe:b1:81:72:50:9c:ff:fd:c0:88:40:00:4d
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Remote: Forced command: gerve gdmachado     c8:d2:c3:fe:b1:81:72:50:9c:ff:fd:c0:88:40:00:4d
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
PTY allocation request failed on channel 0
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
Hi gdmachado! You've successfully authenticated, but GitHub does not provide shell     access.
debug1: channel 0: free: client-session, nchannels 1
Connection to github.com closed.
Transferred: sent 2952, received 3000 bytes, in 0.5 seconds
Bytes per second: sent 6029.5, received 6127.5
debug1: Exit status 1 
```

在尝试使用 github.com 网站时，我也遇到了一些问题：我也无法使用该网站创建新的存储库；存储库名称检查需要很长时间，一段时间后会显示没有消息的红色警告。有时浏览 repos 需要很长时间，有时甚至无法加载主网站。如果我尝试使用 Chrome 的隐身窗口（如没有 cookie/缓存）浏览网站，它会在一段时间内完美运行（！！！），几分钟后会再次停止运行。这很奇怪。我可以正常使用所有其他网站（例如，也可以推送到托管在 bitbucket 中的其他 git repos）。

我尝试暂时禁用`iptables`，但这并没有解决任何问题。

编辑：它在 Windows 7 上运行**良好**。这只发生在 Arch Linux 上:(

因此，由于我无法重新打开该问题，是否有人知道这里可能发生了什么，以便我们可以删除我的问题并回答 Vulpo 的问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:08:06.663

你说SSH也不起作用。但是，您刚刚证明 SSH*确实*有效——至少在端口 22 上。

[https://help.github.com/articles/using-ssh-over-the-https-port](https://help.github.com/articles/using-ssh-over-the-https-port)

您得到了他们正在寻找的确切回复，即：

> 嗨gdmachado！您已成功通过身份验证，但 GitHub 不提供 shell 访问权限。

按照该链接上的说明使用端口 443。如果可行，请按照他们的建议强制执行，然后重试。

# ios - 当 UILabel 从 datepicker 获取日期时进行日期格式化

> ID：14403156
> 
> 赞同：0
> 
> 时间：2013-01-18T16:23:44.853
> 
> 标签：ios, objective-c, xcode4.5, nsdateformatter, uidatepicker

我有日期选择器、一个按钮和一个标签。标签上写着“选择你的日期”，日期选择器是，是的，一个日期选择器，按钮将用户选择的日期转移到标签中，如下所示：“你选择了日期 2013-01-18 02:28:58 +0000 ”。

我怎样才能得到日期格式：“你选择了日期 18/01-2013”​​？？？没有设置时间和日/月/年？

我在按钮 IBAction 中用于转移到标签的代码是：

```
NSString *words = [[NSString alloc]initWithFormat:@"You chose the date %@", dateSelected];
settDato.text = words; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:32:45.957

使用`NSDateFormatter`，在你`.h`有

```
NSDateFormatter *formatter 
```

然后在`viewDidLoad`or`init`方法是最好的

```
formatter=[[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd/MM-YYYY"]; 
```

然后在你的`IBAction`

```
NSString *words = [NSString stringWithFormat:@"You chose the date %@", [formatter stringFromDate:dateSelected]];
settDato.text = words; 
```

# android - 如何在 Android 中构建发布共享库项目？

> ID：14403169
> 
> 赞同：0
> 
> 时间：2013-01-18T16:24:37.247
> 
> 标签：android

> **可能重复：**
> [如何在 ListView](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)
> [导出 android 库项目中延迟加载图像以便在没有源代码的情况下重用](https://stackoverflow.com/questions/14075760/export-android-library-project-for-reuse-without-source-code)

有人知道如何发布图书馆项目的任何例子吗？我正在寻找如何在不发布源代码的情况下发布包含代码、布局和活动的库项目的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:28:23.647

创建库>>

1）在Eclipse中创建android项目，

2) 进入 Project Properties -> Android 并检查 isLibrary 属性。现在，您可以将此库添加到您的应用程序项目中，方法是将其添加到同一属性页面上的列表中。

[http://developer.android.com/guide/developing/projects/projects-eclipse.html](http://developer.android.com/guide/developing/projects/projects-eclipse.html)

用于创建 jar 文件>>

在 Eclipse 中，您可以使用项目上的“导出”选项来创建 jar 文件。这将打开 JAR 创建向导。

# javascript - 具有不同 Primefaces 组件的 IE8 中的 JavaScript 错误

> ID：14403170
> 
> 赞同：0
> 
> 时间：2013-01-18T16:24:43.100
> 
> 标签：javascript, jquery, syntaxhighlighter

我们在 IE8 中遇到 JS（显然是 jQuery）错误

*   当试图关闭`p:growl`或试图自动隐藏时（粘性=假）
*   `effect`在各种 pf 组件上使用属性时（例如 p:calendar）

eg：点击x关闭ap:growl组件时出现如下js错误信息：

```
Message: Object doesn't support this property or method
Line: 21
Char: 52546
Code: 0
URI: http://myserver:port/myapp/javax.faces.resource/jquery/jquery.js.jsf?ln=primefaces 
```

一些信息：

*   使用
    *   PrimeFaces 3.4.2（还使用 PF 3.3.x、3.4.x、3.5-SNAPSHOT 对其进行了测试）
    *   莫哈拉 2.1.12
*   那些页面上没有`update="@all"`。（也尝试[了来自 BalusC 的这个 js](https://stackoverflow.com/questions/12820010/object-doesnt-support-this-property-or-method-with-primefaces-omnifaces-timeout)，它[应该包含在 3.4.2 中](http://code.google.com/p/primefaces/issues/detail?id=4731)）
*   我们不使用相同的名称`id`和`widgetVar`属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:48:43.263

如果您的代码中有嵌套表单，请将其删除。您不能在 HTML 中嵌套表单，另请参阅[Can you nest html forms?](https://stackoverflow.com/questions/379610/can-you-nest-html-forms)

几天前我在IE8下遇到了同样的问题（单击打开对话框的按钮时出现jquery错误），我解决了删除嵌套表单的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:50:24.600

这与布局模板中包含的 JavaScript 库[SyntaxHighlighter相关。](http://alexgorbatchev.com/SyntaxHighlighter/)替换它是另一个，错误消失了。

# session - GWT RequestFactory 登录用户

> ID：14403173
> 
> 赞同：0
> 
> 时间：2013-01-18T16:24:52.980
> 
> 标签：session, gwt, requestfactory, logged

我正在寻找一个关于使用 GWT 处理登录用户的完整简单示例`RequestFactory`。

我发现我必须`HTTPServletRequest`使用这样的命令来捕获（服务器端）：

```
HttpServletRequest request = RequestFactoryServlet.getThreadLocalRequest(); 
```

但我无法想象如何构建完整的（客户端/服务器端）`RequestFactory`调用/响应捕获。

你能提供一些简单的类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:05:51.097

我认为您要使用的是 servlet 过滤器。

[GWT RequestFactory 认证函数](https://stackoverflow.com/questions/10047925/gwt-requestfactory-authentication-functions)

过去使用过这种方法，效果很好，也是管理实体管理器的好方法。

我们使用它并有几个不同的 RequestFactory，它们使用不同的 url，以便我们可以相应地设置过滤器。

# nservicebus - 将 NServicebus 或 Masstransit 与 TIBCO EMS 一起使用的好处

> ID：14403175
> 
> 赞同：1
> 
> 时间：2013-01-18T16:25:04.863
> 
> 标签：nservicebus, masstransit, tibco-ems

我们正在探索将 TIBCO EMS 纳入我们基于 .NET 的系统的设计。据我了解，broth NServiceBus 和 MassTransit 可以使用 TIBCO EMS 作为运输通信层。我的问题是：与直接在 TIBCO EMS 上使用自定义 C#/.NET 库相比，使用 NServiceBus 或 MassTransit 有什么好处？

我知道这个关于 RabbitMQ 的答案：[MassTransit 向 RabbitMQ 添加了什么？](https://stackoverflow.com/questions/12296787/what-does-masstransit-add-to-rabbitmq?answertab=votes#tab-top)

TIBCO EMS 是否也有同样的好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:50:54.837

好处将类似于任何其他传输（如 RabbitMQ）的好处。虽然 TIBCO 可以做的不仅仅是很多消息传递系统，但它还取决于您想在其中做多少，而不是在使用 TIBCO 的应用程序中做多少。

在我工作的地方，我们定期与 TIBCO 互动，但由不同的团队管理，我们只使用服务。我们确实将 MassTransit 与 RabbitMQ 和 MSMQ 一起使用（是的，两者都有）。

# opengl - 一次更新多个着色器程序中的统一变量

> ID：14403177
> 
> 赞同：8
> 
> 时间：2013-01-18T16:25:10.697
> 
> 标签：opengl, architecture, glsl

我有几个具有统一变量的着色器，它们在所有着色器中具有相同的名称。一次在所有着色器中更新具有相同名称的制服的最佳方法是什么？我考虑以下方法：

**1)**只需为每个程序存储该制服的位置，并在程序被分配为“已使用”程序后立即更新它 ( `glUseProgram`)。

缺点：所有“共享”的统一变量将在每次`glUseProgram`调用后更新。此外，如果在当前帧期间不是第一次使用程序，所有`glUniform*`调用都将是多余的。或者，应该有一组标志来判断程序是否是第一次使用。“未使用”标志应每帧重置。

**2）**使用统一的缓冲区和`shared`（甚至`std140`）布局。在这种方法中，我们可以立即设置统一，然后在不更新缓冲区的情况下更改着色器程序。但是如果有一堆简单的着色器，其中唯一的共享变量是变换矩阵呢？这么少的内存可以使用统一缓冲区吗？在一些论坛讨论中，我读过

```
glBindBuffer(GL_UNIFORM_BUFFER,buf);
glBufferSubData(/*just 16 floats*/);
glBindBuffer(GL_UNIFORM_BUFFER,0); 
```

比`glUniform*`通话慢得多。在这里我们可以注意到，第一种和第二种方法之间的选择取决于以下条件：

*   着色器每帧多久更改一次，它们多久重复一次？
*   有多少“共享”制服？
*   在每一帧中应该将多少数据传递给着色器程序？

无论这三个问题的答案如何，是否有任何折衷的设计模式会具有良好的性能？

**3）**使用超级着色器。在第二段中提到：[GLSL multiple shaderprogram VS uniforms switch](https://stackoverflow.com/questions/6539774/glsl-multiple-shaderprogram-vs-uniforms-switches)。我有两个问题：

哪个性能更好：一个`glUseProgram`调用还是多个统一开关，会改变 ubershader 的功能？

提到的那个问题的作者

> 每帧必须多次更换制服

作为 ubershader 的缺点之一。但是为什么不好呢？它有不好的表现吗？如果是这样，是否可以将转换矩阵和其他一些小尺寸的东西作为统一变量传递并在每帧更新它们？

总结以上所有的主要问题：您能否建议任何其他技术或设计模式来更新几个不同着色器程序中的同名统一变量？

UPD：答案是可以接受的，但是如果您可以建议一种重要的高级设计技术（在 C++ 中或与语言无关），请将其留在这里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T19:01:52.550

> 在一些论坛讨论中，我读到 [...] 比 glUniform* 调用慢得多。

那么如果它是（假设有证据证明它是，当然）？您每帧只执行一次，而`glUniform`每个修改后的程序调用一次。

`std140`对于任何共享数据，我都会使用统一块（默认情况下始终使用）。更新它们的成本是固定的，而更新其他的成本是可变的。

# svn - 如果找到某个文件，如何遍历目录并运行 svn delete 命令？

> ID：14403180
> 
> 赞同：0
> 
> 时间：2013-01-18T16:25:13.237
> 
> 标签：svn

所以我不小心提交了我的 eclipse .project 和 .settings 文件和目录。不是在命令行中遍历每个文件夹（大量文件夹），而是有一种方法可以遍历每个文件夹，如果找到这些文件/目录之一，运行 svn delete .project？

我在想类似的事情：

```
 find . name ".settings" -exec "svn delete .settings" {} \; 
```

但我总是得到“没有这样的文件或目录错误”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:27:06.087

```
find . -iname .settings -exec svn delete {} \; 
```

**编辑：**`find`为了您对命令用法的更多了解：

```
sgeorge-mn:stack sgeorge$ mkdir .settings
sgeorge-mn:stack sgeorge$ mkdir -p dir1/.settings
sgeorge-mn:stack sgeorge$ mkdir -p dir2/.settings
sgeorge-mn:stack sgeorge$ mkdir -p dir2/dir2_1/.settings

sgeorge-mn:stack sgeorge$ find . -type d -iname .settings
./.settings
./dir1/.settings
./dir2/.settings
./dir2/dir2_1/.settings

sgeorge-mn:stack sgeorge$ find . -type d -iname .settings -exec ls -ld {} \;
drwxr-xr-x  2 sgeorge  wheel  68 Jan 18 21:59 ./.settings
drwxr-xr-x  2 sgeorge  wheel  68 Jan 18 21:59 ./dir1/.settings
drwxr-xr-x  2 sgeorge  wheel  68 Jan 18 21:59 ./dir2/.settings
drwxr-xr-x  2 sgeorge  wheel  68 Jan 18 21:59 ./dir2/dir2_1/.settings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:29:31.963

您可以安装[TortoiseSVN](http://tortoisesvn.net)，将您的存储库签出到一个文件夹，然后轻松识别并恢复您的更改。

# r - R 使用 TDD (RUnit) 开发生物导体包

> ID：14403181
> 
> 赞同：0
> 
> 时间：2013-01-18T16:25:17.880
> 
> 标签：r, package, runit

我正在尝试遵循[BioConductor RUnit 指南](http://www.bioconductor.org/developers/unitTesting-guidelines/#duringDevelopment)。我遵循了最小设置，所以我有：

`Suggests: RUnit, BiocGenerics`在描述中

`BiocGenerics:::testPackage("MyPackage")`在 MyPackage/tests/runTests.R

和一些 test_XXX.R 文件`MyPackage/inst/unitTests/`

如果我运行单个测试文件：

```
library(RUnit)
source("LIBRARY FILES")
source("MyPackage/inst/unitTests/test_getKeywordValue.R")
test_getKeywordValue() 
```

测试运行（并在需要失败时失败），但如果我运行

```
R CMD check MyPackage 
```

命令说：

```
* checking tests ...
  Running ‘runTests.R’
 OK 
```

但是不要在`MyPackage/inst/unitTests`目录中运行我的测试......

我错过了什么？

```
Platform: x86_64-apple-darwin9.8.0  
R version 2.15.2 (2012-10-26) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:41:59.697

我不知道这方面的 BioC 指南，但我有许多 CRAN 包，它们使用 Martin Maechler 最初为一些 Rmetrics 包开发的方案。

它在此[R Wiki 帖子](http://rwiki.sciviews.org/doku.php?id=developers%3arunit)中进行了描述，您可以查看我在 RcppArmadillo 或 RcppGSL 或其他一些包中的变体。密钥通常是一个文件`tests/doRUnit.R`，该文件进行必要的旋转以从源代码或已安装的包运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:52:37.453

问题解决了。

这是故事：

在我的包裹中，我用这一行放置了一个 .Rinstignore 文件：

```
test/* 
```

我期待 glob 风格的匹配（如 .gitignore），但相反，如`RShowDoc("R-exts")`说：

*.Rinstignore 进行 perl 风格的正则表达式匹配。*

所以，我的规则`test/*`被 R 解释为：

```
Ignore all files starting with test followed by 0 or more '/' 
```

（部分 /* 被解释为匹配零个或多个 / 字符）

快速检查一下它`grep`是如何工作的：

```
grep("test/*", "inst/unitTests/test_bar.R",perl=TRUE)
[1] 1 
```

删除线

```
test/* 
```

来自.Rinstignore 解决了这个问题。

# c++ - 如何在 Windows 上通过句柄重命名文件？

> ID：14403185
> 
> 赞同：5
> 
> 时间：2013-01-18T16:25:27.417
> 
> 标签：c++, windows, winapi

在 Windows 上，如何仅使用其句柄重命名文件？

我不控制文件的打开方式（它是通过专有的第三方库完成的）。但是我可以检索到这个文件的句柄（参见#1）。

我也知道专有库打开具有以下属性的文件：

`GENERIC_WRITE | GENERIC_READ`和`FILE_SHARE_WRITE | FILE_SHARE_READ`。

我尝试使用`SetFileInformationByHandle`带有`FileRenameInfo`参数的函数。不幸的是，这似乎只有在使用 DELETE 访问类型打开文件时才有效，而这里不是这种情况。

如果有办法做我想做的事，你有什么想法吗？

提前致谢。

#1：请注意，该库不提供对文件句柄的直接访问权限。但是它给了我文件名和路径。然后我使用 NtQuerySystemInformation 和 NtQueryObject 函数检索句柄。NtQuerySystemInformation 允许我检索当前进程的所有句柄列表（使用 SystemInformationClass 参数的值 16），然后我使用 NtQueryObject 查找库根据其文件路径打开的确切句柄。所以我没有打开一个单独的句柄。

```
/* Here is a basic pseudo-code demonstrating what I am trying to achieve */

library::Initialize(); //This creates a new file with a random name. The library keeps a handle opens internally until we call library::close.

file_info_struct tFileInfo;
library::GetFileInfo(tFileInfo); //This gives me information about the created file

HANDLE hFile = my::GetHandleFromFilePath(tFileInfo.file_path); //This function uses NtQuerySystemInformation and NtQueryObject functions to retrieve the existing handle

my::RenameFileByHandle(hFile, someNewFileName); //This is what I am missing. I do not know how to rename the file using its handle

//Carry on with using the library
....

library::close(); //This will close the internal file handle 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T14:19:28.983

[SetFileInformationByHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365539%28v=vs.85%29.aspx)，访问 NtSetInformationFile 的正确方法，是 Vista 中的新功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T09:39:33.337

将[NtSetInformationFile](http://msdn.microsoft.com/en-us/library/windows/hardware/ff567096%28v=vs.85%29.aspx)与[FileRenameInformation](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540344%28v=vs.85%29.aspx)信息类一起使用。请注意，必须使用 DELETE 访问权限打开句柄。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:34:16.477

使用 API 调用[GetFinalPathNameByHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364962%28v=vs.85%29.aspx)获取文件名，然后使用[MoveFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365239%28v=vs.85%29.aspx) API 重命名文件。

但我认为你应该在获得文件名后关闭该文件，否则移动/重命名操作将失败

# c# - 对字典使用“外部”GetHashCode 和 Equals

> ID：14403187
> 
> 赞同：4
> 
> 时间：2013-01-18T16:25:30.083
> 
> 标签：c#, dictionary

我想使用一个类作为字典中的键，它不会覆盖 Equals 或 GetHashCode。这是我不想修改的外部库中的一个类。

所以我想知道我是否可以只为一个字典使用自定义的“GetHashCode”/“Equals”实现？我想知道是否可以使用 C++ std::maps 之类的东西

```
template < class Key,                      // map::key_type
           class T,                        // map::mapped_type
           class Compare = less<T>,        // map::key_compare
           class Alloc = allocator<T> >    // map::allocator_type
           > class map; 
```

其中 Compare 可用于定义自定义比较。

我不想从类派生，因为对象是使用现有类在外部创建的。

我可以创建一个包含原始类的类，但这会改变对字典的访问。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:29:48.660

当然-您可以实现[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)并将其传递[给`Dictionary<,>`构造函数](http://msdn.microsoft.com/en-us/library/ms132072.aspx)。这正是该构造函数的目的:)

例如：

```
public FooByNameEqualityComparer : IEqualityComparer<Foo>
{
    public int GetHashCode(Foo foo)
    {
        return foo.Name.GetHashCode();
    }

    public bool Equals(Foo x, Foo y)
    {
        return x.Name == y.Name;
    }
}

...

Dictionary<Foo, int> map = new Dictionary<Foo, int>(new FooByNameComparer()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:30:47.113

您可以将自定义传递`IEqualityComparer<TKey>`给`Dictionary<TKey,TValue>`. 相等比较器必须实现`Equal`and `GetHashCode`。

```
var dict = new Dictionary<MyKey,MyValue>(new MyKeyEqualityComparer()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:30:32.897

您可以使用[Dictionary Constructor (Int32, IEqualityComparer)](http://msdn.microsoft.com/en-us/library/ms132074.aspx)，

```
public Dictionary(
    int capacity,
    IEqualityComparer<TKey> comparer
) 
```

在哪里

`comparer`是：

> 比较**键时使用的实现**

在实践中

*   您定义一个实现该接口的类型
*   将其传递给此 ctor ，因此该类的方法*用于*字典键的相等识别。

似乎是你想要的。

# sql - SQL Server 视图没有得到任何结果

> ID：14403188
> 
> 赞同：1
> 
> 时间：2013-01-18T16:25:33.483
> 
> 标签：sql, view, sql-server-2008-r2

我是 SQL Server 的新手，我正在尝试创建一个包含所有客户信息的视图。

这`Customer`是我的主表，如果客户存在，我想把所有其他表都放在上面。

我尝试使用 SQL Server Management Studio，但结果为零。

这就是我选择的表格的样子：

![在此处输入图像描述](../Images/086f9722c7fc0efac08eefd46cfa209c.png)

我希望分支出`Corporation`和`AccountNumber`出`Account`以及其他表中的所有其余列。

这是管理工作室给我的：

```
SELECT     
   Customer.Customer.*, Customer.Miscellaneous2.*, Common.Address.*, 
   Company.CorporationStructure.Branch AS Expr1, Customer.Delivery.*, 
   Customer.Miscellaneous.*, Customer.Account.AccountNumber AS Expr2 
FROM         
   Customer.Account 
INNER JOIN
   Common.Address ON Customer.Account.AccountId = Common.Address.ForeignId 
INNER JOIN
   Company.CorporationStructure ON Customer.Account.CorporationStructureId = Company.CorporationStructure.CorporationStructureId 
                       AND Customer.Account.CorporationStructureId = Company.CorporationStructure.CorporationStructureId 
 INNER JOIN
    Customer.Customer ON Company.CorporationStructure.Branch = Customer.Customer.Branch 
 INNER JOIN
    Customer.Delivery ON Company.CorporationStructure.Branch = Customer.Delivery.Branch 
 INNER JOIN
    Customer.Miscellaneous ON Company.CorporationStructure.Branch = Customer.Miscellaneous.Branch 
 INNER JOIN
    Customer.Miscellaneous2 ON Company.CorporationStructure.Branch = Customer.Miscellaneous2.Branch 
```

它返回零结果。

有人看到我做错了什么吗？

=== 更新 ===

我按照建议更新了查询：

```
SELECT     Customer.Customer.IsActive, Customer.Customer.CompanyCode, Customer.Customer.Branch, Customer.Customer.Account, Customer.Customer.TypeCompanyTank, 
                      Customer.Customer.SalesManCode, Customer.Customer.Name, Customer.Customer.Street, Customer.Customer.City, Customer.Customer.State, 
                      Customer.Customer.ZipCode, Customer.Customer.ZipCodeExtension, Customer.Customer.AreaCode, Customer.Customer.PhoneNumber, Customer.Customer.TaxCode, 
                      Customer.Customer.CreditCode, Customer.Customer.Type1, Customer.Customer.FinanceChargeCode, Customer.Customer.StatementInvoiceCode, 
                      Customer.Customer.OpenItemBalanceForward, Customer.Customer.BillingTransaction, Customer.Customer.BudgetChange, Customer.Customer.DelinquentLetter, 
                      Customer.Customer.PriceClassA, Customer.Customer.PriceClassB, Customer.Customer.PriceClassC, Customer.Customer.PriceClassR, 
                      Customer.Customer.InvoiceTerms, Customer.Customer.DefaultProductCode, Customer.Customer.DefaultUnitOfIssue, Customer.Customer.Type2, 
                      Customer.Customer.BillingCycle, Customer.Customer.CurrentBalance, Customer.Customer.Over30, Customer.Customer.Over60, Customer.Customer.Over90, 
                      Customer.Customer.Over120, Customer.Customer.PreviousStatmentBalance, Customer.Customer.DepositAmount, Customer.Customer.LastPaymenRecievedDate, 
                      Customer.Customer.LastPaymentRecievedAmount, Customer.Customer.BudgetRate, Customer.Customer.NonBudgetBalance, Customer.Customer.BudgetBalance, 
                      Customer.Customer.UnpaidFinanceCharges, Customer.Customer.StartDate, Customer.Customer.CreditRecord, Customer.Customer.CreditLimit, 
                      Customer.Miscellaneous2.IsActive AS Expr3, Customer.Miscellaneous2.CompanyCode AS Expr4, Customer.Miscellaneous2.Branch AS Expr5, 
                      Customer.Miscellaneous2.Account AS Expr6, Customer.Miscellaneous2.BillingCycleCode, Customer.Miscellaneous2.LatitudeDegree, 
                      Customer.Miscellaneous2.LatitudeDecimal, Customer.Miscellaneous2.North, Customer.Miscellaneous2.LongitudeDegree, 
                      Customer.Miscellaneous2.LongitudeDecimal, Customer.Miscellaneous2.West, Customer.Miscellaneous2.GEOResultCode, Customer.Miscellaneous2.DeliveryState, 
                      Customer.Miscellaneous2.DeliveryZipCode, Customer.Miscellaneous2.DeliveryZipCodeExtension, Customer.Miscellaneous2.RouteBook, 
                      Customer.Miscellaneous2.DriverRouteSequence, Customer.Miscellaneous2.StandingPurchaseOrderNumber, Customer.Miscellaneous2.PhoneType2, 
                      Customer.Miscellaneous2.AreaCode2, Customer.Miscellaneous2.PhoneNumber2, Customer.Miscellaneous2.PhoneType3, Customer.Miscellaneous2.PhoneNumber3, 
                      Customer.Miscellaneous2.EmailAddress, Customer.Miscellaneous2.ElectronicLetterOption, Customer.Miscellaneous2.ElectronicPostcardOption, 
                      Customer.Miscellaneous2.ElectronicStatementOption, Customer.Miscellaneous2.ElectronicInvoiceOption, Customer.Miscellaneous2.LossReason, 
                      Customer.Miscellaneous2.LossYear, Customer.Miscellaneous2.LossMonth, Customer.Miscellaneous2.GainReason, Customer.Miscellaneous2.GainYear, 
                      Customer.Miscellaneous2.GainMonth, Customer.Miscellaneous2.LastSalesActivityDate, Customer.Miscellaneous2.ElectricTankMonitorNumber, 
                      Common.Address.AddressId, Common.Address.ForeignId, Common.Address.AddressType, Common.Address.Street AS Expr7, Common.Address.City AS Expr8, 
                      Common.Address.State AS Expr9, Common.Address.ZipCode AS Expr10, Common.Address.ZipCodeExtension AS Expr11, Common.Address.FromFlatFile, 
                      Common.Address.IsUpdated, Common.Address.IsAdded, Common.Address.ClearUpdateAndAdded, Common.Address.CorporationId, 
                      Company.CorporationStructure.Branch AS Expr1, Customer.Delivery.CompanyCode AS Expr12, Customer.Delivery.Branch AS Expr13, 
                      Customer.Delivery.Account AS Expr14, Customer.Delivery.IsActive AS Expr15, Customer.Delivery.DegreeDayBase, Customer.Delivery.DeliveryCode, 
                      Customer.Delivery.UseCode, Customer.Delivery.PostcardInOutFlag, Customer.Delivery.Driver, Customer.Delivery.Route, Customer.Delivery.RouteSequence, 
                      Customer.Delivery.PreviousPercent, Customer.Delivery.PercentFull, Customer.Delivery.TankSerialNumber, Customer.Delivery.TankType, Customer.Delivery.TankUnit,
                       Customer.Delivery.TicketInOutFlag, Customer.Delivery.LockUseOrRateCode, Customer.Delivery.QuantityLastDelivered, Customer.Delivery.TankSize, 
                      Customer.Delivery.NumberOfTanks, Customer.Delivery.NumberOfCompanyTanks, Customer.Delivery.GallonsPerDegreeDay, Customer.Delivery.GallonsPerDay, 
                      Customer.Delivery.HeatingConfidence, Customer.Delivery.DailyConfidence, Customer.Delivery.LastDeliveryDate, Customer.Delivery.LastDeliveryDegreeDay, 
                      Customer.Delivery.OptimumDeliveryDateOrDegreeDay, Customer.Delivery.RunOutDeliveryDateOrDegreeDay, Customer.Delivery.GasCheck, 
                      Customer.Delivery.YearToDateDeliveries, Customer.Delivery.YearToDateGasDelivered, Customer.Delivery.TotalGasUsedLastYear, Customer.Delivery.AXGasUsed1, 
                      Customer.Delivery.AXGasUsed2, Customer.Delivery.AXGasUsed3, Customer.Delivery.AXGasUsed4, Customer.Delivery.AXGasUsed5, 
                      Customer.Delivery.AXDailyUsed1, Customer.Delivery.AXDailyUsed2, Customer.Delivery.AXDailyUsed3, Customer.Delivery.AXDailyUsed4, 
                      Customer.Delivery.AXDailyUsed5, Customer.Delivery.AXDays1, Customer.Delivery.AXDays2, Customer.Delivery.AXDays3, Customer.Delivery.AXDays4, 
                      Customer.Delivery.AXDays5, Customer.Miscellaneous.IsActive AS Expr16, Customer.Miscellaneous.CompanyCode AS Expr17, 
                      Customer.Miscellaneous.Branch AS Expr18, Customer.Miscellaneous.Account AS Expr19, Customer.Miscellaneous.CareOf, Customer.Miscellaneous.DeliveryStreet, 
                      Customer.Miscellaneous.DeliveryCity, Customer.Miscellaneous.PurchaseOrderNumber, Customer.Miscellaneous.MasterBillingBranch, 
                      Customer.Miscellaneous.MasterBillingAccount, Customer.Account.AccountNumber AS Expr2
FROM         Customer.Account LEFT OUTER JOIN
                      Common.Address ON Customer.Account.AccountId = Common.Address.ForeignId LEFT OUTER JOIN
                      Company.CorporationStructure ON Customer.Account.CorporationStructureId = Company.CorporationStructure.CorporationStructureId AND 
                      Customer.Account.CorporationStructureId = Company.CorporationStructure.CorporationStructureId LEFT OUTER JOIN
                      Customer.Customer ON Company.CorporationStructure.Branch = Customer.Customer.Branch LEFT OUTER JOIN
                      Customer.Delivery ON Company.CorporationStructure.Branch = Customer.Delivery.Branch LEFT OUTER JOIN
                      Customer.Miscellaneous ON Company.CorporationStructure.Branch = Customer.Miscellaneous.Branch LEFT OUTER JOIN
                      Customer.Miscellaneous2 ON Company.CorporationStructure.Branch = Customer.Miscellaneous2.Branch 
```

现在我得到了结果，但现在我一遍又一遍地得到同一个客户：

![在此处输入图像描述](../Images/f0c5a4376451790b11d83cd511629b85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:40:18.400

原因可能是由于公司公司结构的双重加入。问题线是：

```
INNER JOIN
    Customer.Customer ON Company.CorporationStructure.Branch = Customer.Customer.Branch 
 INNER JOIN
    Customer.Delivery ON Company.CorporationStructure.Branch = Customer.Delivery.Branch 
```

您需要让 CorporateStructure 在`from`条款中出现两次，一次用于客户，一次用于交付。

# html - 大约 300 次 txns 后 WebSQL 静默事务失败

> ID：14403191
> 
> 赞同：1
> 
> 时间：2013-01-18T16:25:38.337
> 
> 标签：html, cordova, web-sql

我有一个应用程序，我将序列化的图像存储到 websql 中。我首先从 xml 获取图像列表，创建一个路径数组，这些路径指向返回 jsonp 的单个文件（单个文件，以便我可以有一个进度指示器）。在我得到响应后，我将序列化图像传递给我的数据库函数，然后执行插入，成功更新图像路径数组，然后启动下一个 ajax 请求。这在我的本地机器上运行良好。在 iOS（模拟器和设备）中，发生的事情是在某个时刻 - 比如说在第 300 张左右的图像左右，我所有的 WebSQL 事务都失败了。他们这样做没有任何错误代码或文本，所以我不知道那里发生了什么。它是失败的事务，而不是executeSql。

序列化数据的长度平均约为 45k，有些可达 6 位。txn 上没有失败的模式 - 字符串长度是随机的 - 唯一一致的是，在数百次成功的 txn 之后，某个点之后的一切都失败了，剩余的 web sql 事务（当时大约 157 个）。

这个过程非常线性：通过 ajax 获取数据 - 检查它（时间戳等） - 路由到插入函数，然后重复。

我计算机上的 SQL lite db 的大小约为 35mb，所以我认为我没有达到设备的上限。

这包含在 Cordova2.2 中。jQuery 用于 Ajax 请求（如您所见）。在我的带有 Ripple 的最新 chrome 的 Windows 机器上，我完全没有错误 - 所有图像都下载。

代码示例：

```
var _SQL_DB = null;
var _SQL_DB_SETTINGS = {name:'myapp',version:'1.0',displayname:'myapp db',size:(50 * 1024 * 1024)};

// much code removed, here's the database init:
function initWebSQL(){
  _SQL_DB = window.openDatabase(_SQL_DB_SETTINGS.name, _SQL_DB_SETTINGS.version, _SQL_DB_SETTINGS.displayname, _SQL_DB_SETTINGS.size);
  _SQL_DB.transaction(
    function(tx){
      tx.executeSql('CREATE TABLE IF NOT EXISTS IMAGES (ID INTEGER PRIMARY KEY ASC, FNAME TEXT, FDATE TEXT, DATASTR TEXT)');},
    function(){ // error CB
      app.util.printToConsole('IMAGES table was not created');
    },
    function(){ // success CB
      app.util.printToConsole('IMAGES table was created succesfully');
    }
  );
}

// ... fast forward through more code....

// ajax request
function _startImgCaching(){
  $.ajax({
    url: app.host() + path,
    type:'GET',
    dataType:'JSONP',
timeout:    10000,
    error:function(xhr,status,err){
      // error logic removed
    },
    success:function(responseData,status,xhr){
      // save data
      _dbInsert(rawPath,_queue.images[0].date,responseData.data);
     // check if more need to be downloaded and stored locally
     if (_queue.length > 0){
       _queue.images.splice(0,1);
       app.util.updateProgress(_queue.length,_queue.images.length);
       setTimeout(_cacheImages,200); 
     }
});

// verify the data, check timestamps...
function _cacheImages(){
  // removed logic that checks for duplicates and routes to delete/insert methods as needed
}

// do the insert
function _dbInsert(imgName,imgDate,imgData){
  _SQL_DB.transaction(
    function(tx){
      tx.executeSql('INSERT INTO IMAGES(FNAME, FDATE, DATASTR) VALUES (?,?,?)',
        [imgName,imgDate,imgData],
        _insertSuccess,
        _insertFailure
      );
    },_transactionFailure,_transactionSuccess
  );
}

// the txn callbacks
function _transactionSuccess(tx,r){
  app.util.printToConsole('txn successful');
  if (r){
    app.util.printToConsole(r);
  }
}

function _transactionFailure(tx,e){
  // e in this case is always undefined
  app.util.printToConsole('txn failed - ' + (e ? e.message : 'no err msg available'));
} 
```

# jquery - 使用 JQuery 将三种不同的背景颜色应用于具有相同类的三个 div

> ID：14403192
> 
> 赞同：1
> 
> 时间：2013-01-18T16:25:42.970
> 
> 标签：jquery, css, background-color

> **可能重复：**
> [使用 jquery 应用不同的背景颜色](https://stackoverflow.com/questions/3905145/apply-different-background-color-using-jquery)

我在一个页面上有三个 div 都带有 .contact-image 类

我希望这三个 div 具有不同的背景颜色（青色、黄色、洋红色） - 理想的 rgb 颜色具有 50% 的透明度。它们不需要随机选择 - 如下所示即可。一（洋红色） 二（青色） 三（黄色）

我是 JQuery 的新手，到目前为止，我已经从此处的答案中获得了此代码，以解决稍微相似的问题。

```
$(function() {
$(".contact-image").each(function() {
    var hue = 'rgb(' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ',' + (Math.floor((256-199)*Math.random()) + 200) + ')';
     $(this).css("background-color", hue);
}); 
```

});

这会将所有 3 个 div 随机着色为不同的颜色，但我不知道根据我的需要进行调整。任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:29:28.063

您可以使用函数设置器语法：

```
$(".contact-image").css("background-color", function(i) {
  return ["magenta", "cyan", "yellow"][i];  // one of the three
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:31:23.397

```
$(function() {
    var colors = ['magenta', 'cyan', 'yellow'];
    $(".contact-image").each(function(i) {
        $(this).css("background-color", colors[i]);
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:32:14.487

一种方法是，您可以通过 div 本身中的十六进制值设置颜色：

HTML：

```
<div class="contact-image" data-color="ffffff">
  Content 1
</div>
<div class="contact-image" data-color="ff0000">
  Content 2
</div>
<div class="contact-image" data-color="000000">
  Content 3
</div> 
```

查询：

```
$(function() {
  $(".contact-image").each(function() {
      var hue = "#"+$(this).data('color');
       $(this).css("background-color", hue);
  });
}); 
```

# ajax - 使用ajax post方法的select2

> ID：14403204
> 
> 赞同：14
> 
> 时间：2013-01-18T16:26:41.920
> 
> 标签：ajax, jquery, jquery-select2

我正在尝试将[select2](http://ivaynberg.github.com/select2)与 ajax 加载一起使用。

这是我的代码：

```
clonedTemplate.find('[id^=detailsPhaseFinanceMinor_]').select2({
    placeholder: "Select",
    minimumInputLength: 1,
    ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
        type: 'POST',
        contentType: "application/json; charset=utf-8",
        url: "mapBasic.aspx/GetFinSys",
        dataType: 'json',
        data: function (term, page) {
            return "{'term':\"" + term + "\"}";
        },
        results: function (data, page) { // parse the results into the format expected by Select2.
            // since we are using custom formatting functions we do not need to alter remote JSON data
            return { results: data.Value };
        }
    }
}); 
```

ajax 调用是对同一页面代码隐藏中的 webmethod/pagemethod 的调用：

```
[WebMethod]
    public static List<LookupCodeItem> GetFinSys(string term)
    {
        string stringToCompareTo = term.ToLower();

        List<LookupCodeItem> result = new List<LookupCodeItem>();

        // FIN SYS
        using (mapEntities db = new mapEntities())
        {
            List<MPO_FINSYS_AMT> finSysCodes = (from x in db.MPO_FINSYS_AMT
                                                select x).ToList();

            foreach (MPO_FINSYS_AMT item in finSysCodes)
            {
                string valKey = string.Format("{0}.{1}.{2}", item.FY, item.MDOT_MPO_CD, item.FIN_SYS);
                LookupCodeItem x = new LookupCodeItem();
                x.Value = valKey;
                x.ShortDescription = string.Format("{0}.{1}.{2}", item.FY, item.MDOT_MPO_CD, item.FIN_SYS); ;
                x.LongDescription = string.Empty;
                result.Add(x);

            }
        }

        return result;
    } 
```

在文本框中输入数据时，会发出 POST 请求，并且发送的 json 似乎格式正确。

但是，pagemethod 的响应是整个 html 页面。据我了解，如果您没有在 ajax 调用中正确设置“contentType”，则 post 方法可能会发生这种情况。我已将其设置为与在页面上工作的所有其他 ajax 调用相同（它们不使用 select2）。

select2 是否忽略“contentType”属性？还是我做错了什么？

** 编辑 ** 发布后，我在 select2 的 github 站点上发现了这个问题： [Issue 492 - Add Support for contentType to Ajax](https://github.com/ivaynberg/select2/issues/492)

它似乎没有通过 contentType。我是否能够绕过 selet2 的内置 ajax 助手并使用我自己手动定义的助手？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-13T11:14:40.560

我遇到了同样的问题，以下解决方案对我有用：

```
ajax: {
   ...
   params: { // extra parameters that will be passed to ajax
        contentType: "application/json; charset=utf-8",
   }
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T19:35:42.657

不要忘记将 CSRF 令牌添加到您的发布请求中。可能是您在客户端做的一切都是正确的，但服务器拒绝了请求，因为它缺少令牌。例如，请参阅 PHP Laravel 框架：[https](https://laravel.com/docs/5.4/csrf#csrf-x-csrf-token) ://laravel.com/docs/5.4/csrf#csrf-x-csrf-token了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T08:45:25.237

这对我有用：

```
 $(document).ready(function () 

{

        $('.js-example-basic-single').select2({
            minimumInputLength: 2,
            ajax: {
                url: "your api endpoint",
                dataType: 'json',
                contentType:"application/json; charset=utf-8",
                type: "POST",
                data: function (term) {
                    return (JSON.stringify({ searchString: term.term }))
                }
            }
        });

}); 
```

html : [https://select2.org/getting-started/basic-usage](https://select2.org/getting-started/basic-usage)

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2013-05-04T13:33:59.267

我建议使用 WebApi 或 ServiceStack 进行数据调用，而不是 [webmethod]。

# ruby-on-rails-3 - 使用 pg_search 结果顺序的 Postgresql trigram 文本搜索

> ID：14403206
> 
> 赞同：4
> 
> 时间：2013-01-18T16:27:00.407
> 
> 标签：ruby-on-rails-3, postgresql, full-text-search, pg-search

我在 Rails 上使用 pg_search gem 实现了三元组搜索。[https://github.com/Casecommons/pg_search](https://github.com/Casecommons/pg_search)

问题是根据显示 gem 文档的 trigram 搜索的定义，有时返回结果的顺序似乎不正确：

> Trigram 搜索通过计算查询和文本之间匹配的三字母子字符串（或“trigrams”）的数量来工作。

我的应用程序接收来自用户的字符串输入（“111 Streetname”）并返回与 Address.full_string 值匹配的地址列表，并使用三元组进行近似搜索。

# 搜索示例列表

**卦搜索：“1493 cambrid”**

*   结果：
    *   剑桥街 100 号
    *   剑桥街 100 号
    *   150剑桥公园博士
    *   剑桥街 1575 号
    *   剑桥街 1573 号
    *   剑桥街 1493 号

**卦搜索：“1493 cambr”**

*   结果：
    *   剑桥街 1493 号

**卦搜索：“1493 cambri”**

*   结果：
    *   剑桥街 1575 号
    *   剑桥街 1573 号
    *   剑桥街 1493 号

**卦搜索：“1493 剑桥”**

*   结果：
    *   剑桥街 1493 号
    *   5剑桥公园博士
    *   7剑桥公园博士
    *   剑桥街 100 号
    *   还有很多

# 问题

¿ 为什么“剑桥街 1493 号”不总是排在结果的首位？¿ 我是否需要更改三元组搜索的查询，还是只是算法的工作方式？

# 查询示例

```
SELECT "addresses".*, (ts_rank((to_tsvector('simple', coalesce("addresses"."full_string"::text, ''))), (to_tsquery('simple', ''' ' || '1493' || ' ''') && to_tsquery('simple', ''' ' || 'cambridge' || ' ''')), 0)) AS pg_search_rank FROM "addresses" WHERE (((coalesce("addresses"."full_string"::text, '')) % '1493 cambridge')) ORDER BY pg_search_rank DESC, "addresses"."id" ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:51:42.350

当您引用有关[*trigram 搜索*](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)的手册时，您实际上是在使用[*文本搜索*](http://www.postgresql.org/docs/current/interactive/functions-textsearch.html)`ts_rank()`中的功能进行操作。[](http://www.postgresql.org/docs/current/interactive/functions-textsearch.html)

 *如果您按以下顺序排列结果

```
(addresses.full_string <-> '1493 cambridge') 
```

...你得到你想要的。
[`<->`是三元组“距离”运算符。](http://www.postgresql.org/docs/current/interactive/pgtrgm.html#PGTRGM-OP-TABLE)

您可能还想在子句中使用`%`("similarity") 运算符。理想情况下，您应该在列上`WHERE`有一个 GiST 索引。`gist_trgm_ops`*

# qt - QTCreator 找不到 QTVTK Widget 的标题？

> ID：14403208
> 
> 赞同：1
> 
> 时间：2013-01-18T16:27:06.790
> 
> 标签：qt, linker, qt-creator, qmake, vtk

您好，我`Qtvtk widget`在 QtCreator 中添加了一个到我的窗口，然后尝试构建并运行该程序，然后我收到一个错误，提示缺少某些标题。

我想强调一下，我还没有添加任何自己的代码，我只是从工具包中拖放了小部件。

现在也许我的想法不正确，但是如果该项目出现在工具包中并且没有问题地掺杂，则标题应该可以访问，否则它不会出现在工具包中。

我想提一下我在 Ubuntu 上工作，我没有`VTK`自己安装它，但是使用`PCL`包，一个使用 VTK 作为可视化器的库，所以我的库安装命令可能有些有趣。

找不到的标题：

```
#include "vtkSystemIncludes.h"
#include "vtkABI.h" 
```

错误本身，是的，它是 win32，我在 linux 上，是：

```
/usr/include/QVTKWin32Header.h:23: error: vtkSystemIncludes.h: No such file or directory 
```

因此，如果还有更多工作要做，以便我可以使用小部件，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:50:45.063

您是否已正确编译库并将其链接到项目？您是否还将源文件链接到项目？

通过将“INCLUDEPATH += path_to_source*”添加到您的 .pro 文件来包含源代码，例如 INCLUDEPATH += $$PWD/../src 用于位于当前工作目录上方的目录中，名称为 src

通过将“LIBS += -L path_to_compiled_library”添加到您的 .profile 和库

如果已经完成并且不工作，请仔细检查以确保路径正确..

# asp.net - ASP.Net NavigateUrl 到远程服务器

> ID：14403214
> 
> 赞同：0
> 
> 时间：2013-01-18T16:27:20.917
> 
> 标签：asp.net, gridview, navigateurl

有没有办法使用 NavigateUrl 从网格视图内的远程服务器目录打开 PDF 文件？我可以从文本框中检索文件编号并生成链接，但是当您单击链接时，什么也没有发生。我的 NavigateUrl 是否会因为它位于远程服务器上并试图在 Web 浏览器中打开而被格式化？我的代码如下。提前致谢。

```
 <asp:TemplateField>
                <ItemTemplate>
                    <asp:HyperLink ID="HyperLink1" runat="server" 
                        NavigateUrl='<%# Eval("Name", "file:\\fileserver\pdf\{0}") %>' 
                        Target="_blank" Text='<%# Eval("Name", "{0:d}") %>'></asp:HyperLink>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="Name" DataFormatString="{0:d}" HeaderText="FILE NUMBER" />
            <asp:BoundField DataField="CreationTime" DataFormatString="{0:d}" HeaderText="DATE ADDED" />
            <asp:BoundField DataField="Length" DataFormatString="{0:#,### bytes}" HeaderText="FILE SIZE" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:39:12.177

导航 url 需要看起来像一个 URL 而不是物理文件路径。之类的`http://server/path/x.pdf`。如果您拥有存储文档的共享，请考虑添加指向远程服务器和目录的虚拟目录。之后，就可以通过使用从您的 asp.net 应用程序访问文件`http://yourserver/virtualpath/x.pdf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:30:48.380

您需要通过 http:// 而不是 file:// 访问该文件，以使链接正常工作。

设置完成后，使用 Server.MapPath() 方法根据文件的路径生成 URL。

# c++ - 理解变量分配

> ID：14403215
> 
> 赞同：2
> 
> 时间：2013-01-18T16:27:28.507
> 
> 标签：c++

你能帮我了解变量的存储位置（堆栈、堆、静态内存）吗？我怎样才能确定它？我的意思不是凭直觉，但我想在屏幕上印一些标志什么在哪里。是否可以？

到目前为止，我试图通过打印变量的地址来查看变量的存储位置。但这并没有给我太多。你能看看，给我一个建议。如果我犯了错误（请参阅我对程序的评论），请告诉我。

```
#include "stdafx.h"
#include <iostream>
using namespace std;

int * p1 = new int [3]; // Static memory as it is a global array;
namespace P {int * p2 = new int[3];} // Static memory as it is a namespace; 
namespace {int * p3 = new int[3];} // Static memory as it is a namespace;
using namespace P;

int _tmain(int argc, _TCHAR* argv[])
{
    int * p4 = new int[3]; // Heap as there is a new operator.
    static int * p5 = new int [3]; // Static memory as the variable is static.

    cout << "p1: "<< p1 << endl;
    cout << "p2: "<< p2 << endl;
    cout << "p3: "<< p3 << endl;
    cout << "p4: "<< p4 << endl;
    cout << "p5: "<< p5 << endl;
    cout << endl; 
    cout << "p5 - p4: " << p5 - p4 << endl;
    cout << "p4 - p3: " << p5 - p4 << endl;
    cout << "p3 - p2: " << p5 - p4 << endl;
    cout << "p2 - p1: " << p5 - p4 << endl;

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T16:40:14.297

用于特定变量的存储是编译器的实现细节；只要满足变量生存期的最低要求，编译器实现就完全有权使用它选择的任何存储机制。

您已经确定了三个常见的存储区域：动态分配的长期存储，也就是“堆”，动态分配的短期存储，也就是“堆栈”，以及静态分配的长期存储，也就是“静态记忆”。你省略了寄存器；由于某种原因，每个人总是忽略寄存器。当然，只有一个堆的想法是无稽之谈。可以有很多堆，每个堆都有自己的动态分配策略。

变量是指存储值的存储位置。变量所在的位置取决于它是如何创建的。通过在堆外分配内存而创建的变量显然在堆上。长期存在且大小已知的变量，例如静态变量，通常是从静态内存中分配的；作为一个实现细节，该内存可能是从某个堆中分配的，但编译器不需要这样做。

短暂的局部变量是有趣的；这些可以根据编译器的意愿分配到堆栈或寄存器中。显然，如果您获取局部变量的地址，则无法注册它，因为寄存器没有地址。

在您的特定示例中，您已经制作了**二十个变量**。`p1`, `p2`,`p3`并且`p5`可能会从静态内存中分配出来。你从来不拿 的地址`p4`，所以`p4`很可能是注册的。如果它没有注册，那么它可能在堆栈上。所有其他变量（`p1[0]`, `p1[1]`, `p1[2]`, ... ）都分配在堆上，因为您明确地在堆上分配了它们。

那有意义吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:29:34.443

这里只有指针是静态的。它指向的东西在“堆”上，这意味着它是动态分配的，调用者需要负责解除分配。数据实际上在哪里是另一回事。这取决于平台，以及`new`定义要做什么。

```
static int * p5 = new int [3]; 
```

看看[这个 GotW](http://www.gotw.ca/gotw/009.htm)。感谢@AlokSave 在评论中发布它。

# c++ - Firebreath OpenGl窗口闪烁

> ID：14403217
> 
> 赞同：1
> 
> 时间：2013-01-18T16:27:33.637
> 
> 标签：c++, opengl, boost, firebreath

我遵循了firebreath opengl [Firebreath Opengl](http://www.firebreath.org/display/documentation/OpenGL+Plugin)教程，它可以工作，但是当我调整页面大小或滚动页面时它开始闪烁，所以我在网上搜索了一个解决方案，但除了一个小提示之外我没有找到任何东西

[FireBreath 技巧：在 Windows 上绘图](http://colonelpanic.net/2010/11/firebreath-tips-drawing-on-windows/)

它说：

> 每当收到 RefreshEvent 时，您必须重绘。如果您使用辅助线程进行绘图，请确保您有某种方式将消息传递给该线程，否则您会闪烁。

为了让我尝试做的事情，找到一种将重绘消息传递给绘图线程的方法，我使用[了相当于 ManualResetEvent 的 Boost](https://stackoverflow.com/questions/1501111/boost-equivalent-of-manualresetevent)来强制主线程重绘，但什么也没发生。

我使用的代码：

```
bool threadedOpenGLTestPlugin::draw( FB::RefreshEvent *evt, FB::PluginWindow* win )
{
   Event.Set(); // Event is Boost equivalent of ManualResetEvent
   //Refresh Events... nothing todo since the opengl is running in it's own thread
   return true;
}
void threadedOpenGLTestPlugin::drawThreaded()
{
   while(true)
   {
      Event.Wait(30);// the event waits for 30 milisec or for event fired by the threadedOpenGLTestPlugin::draw function
      Event.Reset();
      //.......... drawing loop 
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:44:09.833

好像我记得有人遇到这个问题并通过处理[WM_ERASEBKGND](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648055%28v=vs.85%29.aspx)消息来解决它。你可以试试。

# java - 无限循环？

> ID：14403218
> 
> 赞同：0
> 
> 时间：2013-01-18T16:27:35.867
> 
> 标签：java, android, loops, serial-port, infinite-loop

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并显示发送/接收的数据。我使用另一个库通过串行发送数据。我通过终端下方的文本框或在终端本身输入并在两种情况下按键盘上的 Enter 键通过连接发送数据。我也可以通过按键发送命令。

在我的活动中，我有一个名为的方法`sendOverSerial`，它只调用一个库方法来通过 USB 将数据发送到通过串行连接的设备。

```
public static void sendOverSerial(byte[] data) {

        if(mSelectedAdapter !=null && data !=null){
        mSelectedAdapter.sendData(data);

      }} 
```

该活动打开一个类的实例，该类用于向终端屏幕写入数据。通常，当我想通过串行发送数据时，`editText`我会`buttons`调用`sendOverSerial`活动中的方法。但是当我将字符写入终端本身时，它们会在这个新的实例`write`方法中被拾取。所以我必须`sendOverSerial`从那个实例调用方法。我的问题是，如果我调用它在下面写“TEST”，那么 TEST 会以无限循环的形式写入终端，它只会继续写它。知道为什么吗？如果我像我评论的那样将它发送得更远，它只会按预期发送一次。

```
 public void write(byte[] bytes, int offset, int count) {

            int numCRs = 0;
            for (int i = offset; i < offset + count; ++i) {
                if (bytes[i] == '\r') {
                    ++numCRs;
                }
            }

            if (numCRs == 0) {
                // No CRs -- just send data as-is

                //infinite loop if I send from here
                GraphicsTerminalActivity.sendOverSerial("TEST".getBytes());

                super.write(bytes, offset, count);

                if (isRunning()) {
                   doLocalEcho(bytes);
                }
                return;
            }

            Log.d(TAG, "CRs=== " + numCRs);
            // Convert CRs into CRLFs
            byte[] translated = new byte[count + numCRs];
            int j = 0;
            for (int i = offset; i < offset + count; ++i) {
                if (bytes[i] == '\r') {
                    translated[j++] = '\r';
                    translated[j++] = '\n';
                } else {
                    translated[j++] = bytes[i];
                }
            }
           //fine if I send from here, sends once
            GraphicsTerminalActivity.sendOverSerial("SECOND TEST".getBytes());
           super.write(translated, 0, translated.length);

            // If server echo is off, echo the entered characters locally
            if (isRunning()) {
                doLocalEcho(translated);
            }                            
        } 
```

来自库的 Super.write：

```
 public void write(byte[] data, int offset, int count) {
        try {
            mWriteQueue.write(data, offset, count);
        } catch (InterruptedException e) {
        }
        notifyNewOutput();
    } 
```

然后在库中的另一个类 bytequeue 类中调用 write

```
public void write(byte[] buffer, int offset, int length)
    throws InterruptedException {
        if (length + offset > buffer.length) {
            throw
                new IllegalArgumentException("length + offset > buffer.length");
        }
        if (length < 0) {
            throw
            new IllegalArgumentException("length < 0");

        }
        if (length == 0) {
            return;
        }
        synchronized(this) {
            int bufferLength = mBuffer.length;
            boolean wasEmpty = mStoredBytes == 0;
            while (length > 0) {
                while(bufferLength == mStoredBytes) {
                    wait();
                }
                int tail = mHead + mStoredBytes;
                int oneRun;
                if (tail >= bufferLength) {
                    tail = tail - bufferLength;
                    oneRun = mHead - tail;
                } else {
                    oneRun = bufferLength - tail;
                }
                int bytesToCopy = Math.min(oneRun, length);
                System.arraycopy(buffer, offset, mBuffer, tail, bytesToCopy);
                offset += bytesToCopy;
                mStoredBytes += bytesToCopy;
                length -= bytesToCopy;
            }
            if (wasEmpty) {
                notify();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:46:38.220

发送数据时会自动调用一个方法，该方法也有一个在其中写入的调用，等等中提琴，无限循环。

# jquery-mobile - 全局禁用 MVC 移动站点呈现

> ID：14403227
> 
> 赞同：2
> 
> 时间：2013-01-18T16:27:56.120
> 
> 标签：jquery-mobile, mobile, asp.net-mvc-4

我为 MVC 网站创建了一个移动版本。出于临时目的，我想完全禁用移动网站。是否有可以在 web.config 或 global.asax 中完成的设置来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:12:46.687

对于任何需要解决方案的人，我可以通过这种方式禁用移动视图：

```
var mobileModel = DisplayModeProvider.Instance.Modes.FirstOrDefault(a => a.DisplayModeId == "Mobile");
if (mobileModel != null)
{
    DisplayModeProvider.Instance.Modes.Remove(mobileModel);
} 
```

我调整了解决方案：[当我们在 iPhone 上时，常规视图不起作用？](https://stackoverflow.com/questions/13360730/regular-views-dont-work-when-we-are-on-iphone)

# asp.net - 如果变量 = True，如何隐藏模式弹出窗口

> ID：14403233
> 
> 赞同：1
> 
> 时间：2013-01-18T16:28:27.707
> 
> 标签：asp.net, webforms

我有以下代码在用户单击文本框控件时创建模式弹出窗口：

```
<ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender2" runat="server" PopupControlID="Panel2" CancelControlID="lblClose2" TargetControlID="txtEmail"

    BackgroundCssClass="modalBackground">

</ajaxToolkit:ModalPopupExtender>

<asp:Panel ID="Panel2" runat="server" CssClass="modalPopup" align="center" style = "display:none">

     Lorem ipsum dolor sit amet...<span style="float:right; margin:-5px 10px 0 0"><asp:Label ID="lblClose2" Text="X" Font-Bold="true" runat="server" style="margin-right:10px;cursor:pointer" ></asp:Label></span><br /><br />

</asp:Panel> 
```

如果以下变量等于，我想隐藏/禁用该代码`true`：

```
bool bSHOW_WEBSITE_EXIST_USERS = Sql.ToBoolean(HttpContext.Current.Application["CONFIG.SHOW_WEBSITE_EXIST_USERS"]); 
```

是否可以在我的代码隐藏脚本中以编程方式执行此操作，还是必须内联执行此操作？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:38:41.717

如果您想在代码隐藏中显示和隐藏它，那么您可以使用 我在此[链接](http://forums.asp.net/t/1365393.aspx)`ModalPopupName.Show()`中找到的示例，该示例根据条件显示和隐藏模式弹出窗口。它可能会帮助你。`ModalPopupName.Hide()`

# javascript - 使用 jquery 清除某个 tbody 中所有（包括嵌套）表单字段的值

> ID：14403236
> 
> 赞同：1
> 
> 时间：2013-01-18T16:28:38.267
> 
> 标签：javascript, jquery

我在一个表中有以下结构，它有行和嵌套在#tbody_name 中的其他表。

```
<tbody id="tbody_name">
    <tr>
        <td>
             <select>
                <option value="" selected="selected">---------</option>
                <option value="3">Something</option>
                <option value="2">Something else</option>
             </select>
        </td>
    </tr>
    <tr>
        <td>
          <input type="radio" value="0" /> Normal<br>
          <input type="radio" value="1" /> Abnormal<br>
        </td>
    <tr>
        <td>
            <table>
                <tr>
                    <td>
                       <input type="text />
                    </td>
                    <td>
                       <input type="checkbox" />
                    </td>
                </tr>
            </table>
       </td>
   </tr>          
</tbody> 
```

我要做的是编写一个函数，该函数能够清除#tbody_name 中所有表单字段的值。

我曾尝试使用 .children 和 .each，但我似乎无法将其一直归结为 #tbody_name 中的表单字段。

任何帮助将不胜感激。

谢谢，

京东

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:36:14.483

```
$('#tbody_name').find('input').each(function(){
    if ((this.type === 'radio') || (this.type === 'checkbox'))
    {
        this.checked = false;
    }
    else
    {
        this.value = '';
    }
});

$('#tbody_name').find('select').each(function() {
    this.selectedIndex = 0;
}); 
```

**编辑：**我刚刚修复了代码以处理一些相当愚蠢的错误。它现在应该可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:46:18.877

您可以使用 find 方法横穿您的表格来查找孩子，使用最接近的方法来查找父母，然后使用 next 来查找下一个元素：

```
$('#tbody_name').find('option:first-child').attr('selected', 'selected').closest('tr').next().next().find('input:text').val(''); 
```

或者你可以给你的表单字段 ID 并通过 id 找到它们：

```
$('#defaultOption').attr('selected', 'selected');
$('#textInput').val(''); 
```

将它们放在一个函数中并从一个按钮调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:54:39.667

有多种方法可以做到这一点。您决定使用哪一种取决于您的编码风格。以下解决方案使用`prop()`jQuery的方法。

```
$('#tbody_name input[type=radio], #tbody_name [type=checkbox]').each(function() {
   $(this).prop('checked', false); 
});

$('#tbody_name input[type=text]').each(function() {
   $(this).prop('value', ''); 
});

$('#tbody_name select').each(function() {
    $(this).prop('selectedIndex', 0);
}); 
```

或者您可以显式地设置对象的属性。这种方法可能更直接和可读：

```
$('#tbody_name input[type=radio], #tbody_name [type=checkbox]').each(function() {
   this.checked = false;
});

$('#tbody_name input[type=text]').each(function() {
   this.value = '';
});

$('#tbody_name select').each(function() {
    this.selectedIndex = 0;
}); 
```

# vim - 如何在 vimrc 中指示当前打开的文件？

> ID：14403242
> 
> 赞同：0
> 
> 时间：2013-01-18T16:28:52.123
> 
> 标签：vim

我想在我的 Gvim（在 Windows 下）中调用 Astyle 来格式化 .c .h 文件。我把 Astyle.exe 放在下面：

```
C:\Program Files (x86)\Vim\vim73 
```

它已经添加到`Path`环境中。

然后我在我的 _vimrc 中添加以下命令：

```
nmap <F10> :!Astyle --style=linux <CR> 
```

但是当我打开一个 .c 文件并按 F10 时，它会给出一些错误消息。我猜那是因为 Astyle 不知道要操作哪个文件。所以我的问题是如何指示要操作的文件的Astyle？

```
nmap <F10> :!Astyle --style=linux some_indicator<CR> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:37:03.050

这有帮助吗？

```
:!Astyle --style=linux %:p<CR> 
```

# html - 像谷歌地图应用程序这样的下拉侧菜单单列有任何示例建议吗？

> ID：14403245
> 
> 赞同：0
> 
> 时间：2013-01-18T16:29:04.340
> 
> 标签：html, css

> **可能重复：**
> [有人知道这个 1 列下拉菜单的代码吗？我知道它的基本知识，我只是不知道。](https://stackoverflow.com/questions/14406719/does-anyone-know-the-code-for-this-1-colum-dropdown-menu-i-know-its-basic-i-jus)

基本上我正在寻找这个下拉菜单。具有不透明度。像谷歌地图应用一样固定在顶部。我正在尝试复制 Android 谷歌地图不透明度标题和下拉菜单应用程序...

这里是

[http://www.siliconrepublic.com/new-media/item/30071-google-maps-for-ios-6-expec](http://www.siliconrepublic.com/new-media/item/30071-google-maps-for-ios-6-expec)

我从 motools 得到这个，但它不是谷歌应用程序的样子

[http://gofi.netai.net/](http://gofi.netai.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:37:34.990

```
menu {
opacity:0.1;
filter:alpha(opacity=10); /* For IE8 and earlier */
} 
```

相应地替换每个值。您可以使用此 CSS 使任何 HTML 标记不透明。甚至来自 motools 的现有菜单。

# mysql - 只有一行的 Rails ActiveRecord 数据库

> ID：14403247
> 
> 赞同：6
> 
> 时间：2013-01-18T16:29:07.120
> 
> 标签：mysql, ruby-on-rails, rails-activerecord

有没有办法让数据库只允许一行（例如，用于站点范围的设置）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T16:36:17.447

```
class Whatever < ActiveRecord::Base
  validate :there_can_only_be_one

  private

  def there_can_only_be_one
    errors.add_to_base('There can only be one') if Whatever.count > 0
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-06T14:26:00.833

在 Rails 4 中：

```
class Anything < ActiveRecord::Base
  before_create :only_one_row

  private
  def only_one_row
    false if Anything.count > 0
  end
end 
```

无声的错误是不好的，那么

```
class Anything < ActiveRecord::Base
  before_create :only_one_row

  private
  def only_one_row
    raise "You can create only one row of this table" if Anything.count > 0
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T21:00:20.450

这一行只有一列吗？如果不是，则通过迁移添加新列可能会过大。您至少可以使该表包含“名称”和“值”列，并通过名称的唯一性进行验证。

# apache - 从一台服务器为两个站点（Apache 和 Node.JS）提供服务

> ID：14403248
> 
> 赞同：0
> 
> 时间：2013-01-18T16:29:07.503
> 
> 标签：apache, node.js, web

我在具有 root 访问权限的 Dreamhost VPS 上。它运行 Apache，并托管一个站点“www.example.com”。同时，我正在开发一个 Node.js 网站，并将 Node.js 绑定到端口 3456（例如）。因此，可以通过键入“www.example.com:3456”访问 Node.js 站点。

这是两个不同的网站。我不希望“www.example.com”的用户访问我的 Node.js 网站（开发后将迁移到 Nodejitsu）。

我会遇到此设置的任何问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:24:58.787

我不相信这会是一个问题，除非您的一个访问者碰巧最终到达端口 3456。为了缓解这种情况，您应该考虑编写自己的小中间件来将您的 IP 列入白名单（从而拒绝其他任何人）。您可以在以下位置查看示例：[http](http://www.hacksparrow.com/how-to-write-midddleware-for-connect-express-js.html) ://www.hacksparrow.com/how-to-write-middleware-for-connect-express-js.html 。我相信根据您的需要修改它不会有问题。

# jquery - JQuery loader - 视差网站

> ID：14403249
> 
> 赞同：0
> 
> 时间：2013-01-18T16:29:10.610
> 
> 标签：jquery, html, loader

有没有办法为视差站点创建一个加载器，该加载器会等到所有 dom 元素都加载完毕后再触发函数？

我创建了一个视差站点的 IOS 版本 - 一切正常 - 但由于该站点包含许多大图像，因此可以在所有图像加载之前触发动画..

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:42:15.093

你可以这样做：

```
$(function(){
   var $imgs = $('img');
   var cnt = $imgs.length;
   $imgs.load(function(){
       cnt--;
       if(cnt === 0)
          //load parallax here
   });
}); 
```

# regex - 此 Lighthttpd 配置中此 RegEx 中的 % 是多少？

> ID：14403255
> 
> 赞同：0
> 
> 时间：2013-01-18T16:29:31.030
> 
> 标签：regex, lighttpd

```
 $HTTP["scheme"] == "http" {
    $HTTP["host"] =~ "^(.*)$" {
      url.redirect = ("^/folder/(.*)$" => "https://%1/$1")
    }
  } 
```

显然， %1 正在插入主机 - 但从哪里得到它？我的第一个想法是从它上面的行与主机匹配，但这似乎不对。

%1 是主机名的内置占位符还是来自先前的“主机”匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:49:07.557

从以下文档[`url.redirect`](http://redmine.lighttpd.net/projects/1/wiki/docs_modredirect)： -

> 请注意，url.redirect 目标中的“%1”指的是条件正则表达式 (.*) 中带括号的子表达式。它不一定具有“%1”在 evhost.path-pattern 中的含义（它的意思是“顶级域”）。如果 url.redirect 在正则表达式条件中指定，则 % 模式将替换为条件正则表达式中的相应组。%1 替换为第一个子表达式，%2 替换为第二个，依此类推。%0 替换为匹配正则表达式的整个子字符串。有关使用 % 模式的示例，请参见上文和下文。

# eclipse - Eclipse juno jboss5.1 无法选择部署 foudler

> ID：14403262
> 
> 赞同：0
> 
> 时间：2013-01-18T16:29:55.130
> 
> 标签：eclipse, jboss5.x, eclipse-juno, jboss-tools

我已经将eclipse升级到juno，我正在尝试将deploy foulder设置为“Jboss deploy folder”，但选择被禁用......这是Jboss工具中的一个错误还是什么？

我附上了一张照片以获取更多信息：

![在此处输入图像描述](../Images/a34d714bccc8783cd288452bcb3eba67.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:03:35.160

我找到了解决方案，服务器必须没有附加任何模块，然后它可以调整设置......它也写在第一行，我忽略了这一行，因为在 jboss 工具的预览版本中这是没什么大不了。

# excel - 通过互操作设置 Excel 单元的功能 - 本地化

> ID：14403267
> 
> 赞同：1
> 
> 时间：2013-01-18T16:30:13.307
> 
> 标签：excel, localization, interop, excel-formula

我想通过 C# 和 Interop (Office 2010) 将 Excel 函数添加到单元格。

我们以 SUM 为例。

使用`WorksheetFunction`ist**不是**我想要的，因为这是一次性函数调用。所以我想要的是

```
Xl.Range range = SomeWorksheet.Range["A1"];
range.Formula = "=SUM(A2:A5)"; 
```

如果您使用的是英文版的 excel，这很好，但在所有其他语言中都是错误的。

我找到[了这个概述](http://www.software.maninweb.de/news/261/279/Comparison-and-function-list-of-Excel-2010-2007-and-2003/d,news_details.html)，但这意味着手动编码本地化。不太好。

我需要的是s.th。像

```
string localizedFunctionName = Xl.Application.GetFuncName(Func.Sum); 
```

亲切的问候
马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:29:32.583

尝试以下操作：

```
range.FormulaLocal = "=SUM(A2:A5)"; 
```

* * *

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/office/aa205983%28v=office.10%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa205983%28v=office.10%29.aspx)和这个问题：[VBA：更新后无法自动重新计算 Excel 公式——需要手动交互](https://stackoverflow.com/questions/14361270/vba-cannot-automatically-recalculate-excel-formula-after-updating-it-needs-m/14362262)

# vbscript - vbscript，在文件名中查找匹配项

> ID：14403269
> 
> 赞同：0
> 
> 时间：2013-01-18T16:30:23.163
> 
> 标签：vbscript

我是 vbscripting 的新手，我刚刚收到一个任务，要求我在文件名中找到 6 个具有匹配字符串的文件，以便我可以将这些文件移动到不同的目录。我正在使用正则表达式模式“\d{8}-\d{6}”来定位文件名中的所有字符串。

我将如何在目录中进行搜索并检查文件名中是否有 6 个具有匹配字符串的文件，以便我可以将它们存储到数组中，然后将文件移动到另一个目录？

到目前为止我写的脚本：

```
Set objFS = CreateObject("Scripting.FileSystemObject")

strShareDirectory = "in\"
strDumpStorageDir = "out\"

Set objFolder = objFS.GetFolder(strShareDirectory)
Set colFiles = objFolder.Files

Set re = New RegExp
re.Global     = True
re.IgnoreCase = False
re.Pattern    = "-\d{8}-\d{6}"

Dim curFile, matchValue
Dim i: i = 0

For Each objFile in colFiles
   bMatch = re.Test(objFile.Name)
   curFile = objFile.Name

   If bMatch Then
      ReDim preserve matches(i)
      Matches(i) = curFile
      i = (i + 1)

      For Each objFile1 in colFiles
        If objFile1.Name <> objFile.Name Then
            For each match in re.Execute(objFile1.Name)
                matchValue = match.Value
                Exit For
            Next
            If (Instr(curFile, matchValue) > 0) Then
                matchCount = 1
                For Each match1 in re.Execute(objFile1.Name)
                    curFile1 = objFile1.Name
                    matchValue1 = match1.Value
                    Exit For
                    'If  Then

                Next
                'msgbox(curFile1)
            End If
     End If
    Next
   End If
Next 
```

这是我正在使用的示例目录的样子。 ![在此处输入图像描述](../Images/baa2ae40fdfea6d2ce91f42a6dd50237.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T21:07:51.680

由于@KekuSemau 的提议没有解决对文件进行分组的（子）问题，dweebles 没有给出完整的故事（为什么是数组？为什么坚持拥有完整的（子）文件集？）和数字（组文件名中的 6、3/4 部分）与基本任务并不真正相关 - 根据文件名的部分将一组文件分配到文件夹中 - 我声称解决任务的方法是摆脱所有数组、字典和正则表达式的花哨并保持简单：

前：

```
tree /A /F ..\data
+---in
|       B-2
|       B-1
|       A-3
|       A-2
|       B-3
|       A-1
|
\---out 
```

代码：

```
 Const csSrc = "..\data\in"
  Const csDst = "..\data\out"
  Dim f, n, d
  For Each f In goFS.GetFolder(csSrc).Files
      n = Split(f.Name, "-")
      If 1 = UBound(n) Then
         d = goFS.BuildPath(csDst, n(1))
         If Not goFS.FolderExists(d) Then goFS.CreateFolder d
         f.Move goFS.BuildPath(d, f.Name)
      End If
  Next 
```

后：

```
tree /A /F ..\data
+---in
\---out
    +---3
    |       A-3
    |       B-3
    |
    +---1
    |       B-1
    |       A-1
    |
    \---2
            B-2
            A-2 
```

**PS** 这个[问题](https://stackoverflow.com/q/14442413/603855)可以用同样的方法解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:18:21.463

啊，现在我明白了。所以：如果至少有 6 个文件具有相同的匹配子字符串，则您需要与模式匹配的所有文件名。好的。然后，是的，我知道您可能会在嵌套的 for..next 循环中被勒死。如果发生这种情况，我建议将一些代码放入额外的函数中。
在这个解决方案中，我使用字典来更轻松地完成一些工作（例如，每次调用 'exists' 都是对其所有元素的另一个嵌套迭代，以及每个赋值）。
此示例将忽略一个文件名中的多个匹配项。

```
option explicit

dim objFS : dim strShareDirectory : dim strDumpStorageDir : dim objFolder : dim colFiles : dim re : dim objFile

dim dictResults ' dictionary of [filename] -> [matching substring]
dim dictResultsCount ' dictionary of [matching substring] -> [count]
dim dictResultsFinal ' only the valid entries from dictResults
dim keyItem 
dim strMatch

set dictResultsFinal = CreateObject("Scripting.Dictionary")
set dictResults = CreateObject("Scripting.Dictionary")
set dictResultsCount = CreateObject("Scripting.Dictionary")

Set objFS = CreateObject("Scripting.FileSystemObject")

strShareDirectory = "in\"
strDumpStorageDir = "out\"

Set objFolder = objFS.GetFolder(strShareDirectory)
Set colFiles = objFolder.Files

Set re = New RegExp
re.Global     = True
re.IgnoreCase = False
re.Pattern    = "-\d{8}-\d{6}"

Dim curFile, matchValue
Dim i: i = 0

For Each objFile in colFiles
    ' test if the filename matches the pattern
    if re.test(objFile.Name) then
        ' for now, collect all matches without further checks
        strMatch = re.execute(objFile.Name)(0)
        dictResults(objFile.Name) = strMatch
        ' and count
        if not dictResultsCount.Exists(strMatch) then
            dictResultsCount(strMatch) = 1
        else
            dictResultsCount(strMatch) = dictResultsCount(strMatch) +1
        end if
    end if
next

' for testing: output all filenames that match the pattern
msgbox join(dictResults.keys(), vblf)

' now copy only the valid entries into a new dictionary
for each keyItem in dictResults.keys()
    if dictResultsCount.Exists( dictResults(keyItem) ) then
        if dictResultsCount( dictResults(keyItem) ) >= 6 then
            dictResultsFinal(keyItem) = 1
        end if
    end if
next

' test output the final result
msgbox join(dictResultsFinal.keys(), vblf) 
```

---我的第一个答案

好吧，我可能应该问*您尝试了什么，*但是...这是您的示例^^。这应该给你足够的开始（我忽略了你提到的'6'要求）。询问您是否需要更多解释。

```
Option explicit
dim a
a = findFiles("G:\",  "\d{8}-\d{6}")
msgbox join(a, vblf)

function findFiles(path, pattern)
    dim rx
    dim fso
    dim fsoFolder
    dim fsoFiles
    dim results
    dim item
    set rx = new regexp
    rx.pattern =  pattern
    set results = CreateObject("Scripting.Dictionary")
    set fso = CreateObject("Scripting.FileSystemObject")
    set fsoFolder = fso.GetFolder(path)
    set fsoFiles = fsoFolder.Files
    for each item in fsoFiles
        if rx.test(item.name) then results(item.name) = 1
    next
    set fso = nothing
    set fsoFolder = nothing
    set fsoFiles = nothing
    findFiles = results.keys()
end function 
```

# java - Java 安全套接字数据传输/接收器

> ID：14403272
> 
> 赞同：0
> 
> 时间：2013-01-18T16:30:26.547
> 
> 标签：java, security, sockets, chat

我已经建立了一个聊天应用程序，我正在使用`PrintWriter`和`Scanner`读写流。例如：

```
Socket socket = new Socket(HOST, PORT);
Scanner IN = new Scanner(socket.getInputStream());
PrintWriter OUT = new PrintWriter(socket.getOutputStream());
String MESSAGE = "";

while(true){
 if(IN.hasNext()){
    MESSAGE = IN.nextLine();
    OUT.println("RESPONSE: " + MESSAGE);
    OUT.flush();
 }
} 
```

我正在考虑如果有人连接到我的服务器（ServerSocket），他可以读取我写入流的所有数据。如果他写入流，那将是最坏的情况。

我在考虑加密。所有数据都将被加密，“接收器”将解密数据流。此外，我必须在将写入流的加密字符串的开头或结尾使用安全密钥。如果安全密钥有效，则允许接收方读取该字符串。

这是一个好的解决方案吗？这足够安全吗？使用 PrinterWriter 和 Scanner 读取/写入流是否足够好？InputStreamReader 和 BufferedStream 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:54:10.057

I would advice you not create the socket server from scratch as you are attempting. Use Netty (or even Apache mina) to do this. Netty has built-in support for SSL and you can setup client-side certificates. If you are unwilling to take on the extra work of SSL, then you can implement IP based restrictions or add a simple password into your protocol coupled with SSL.

For more information: [http://netty.io](http://netty.io)

# sql - 我可以在选项卡上显示存储过程名称吗

> ID：14403274
> 
> 赞同：2
> 
> 时间：2013-01-18T16:30:29.620
> 
> 标签：sql, sql-server, sql-server-2008

如果我打开了存储过程，那么在选项卡中会显示“SQLQuery10.sql”等

![在此处输入图像描述](../Images/8a392d2ddccdbae44af7ea3d29ff4cf0.png)

但是如果我打开一些保存的文件，选项卡就是文件的标题：

![在此处输入图像描述](../Images/df2f9232f8eb497ea3f0388ee37017c9.png)

是否有设置`IDE`让我在查询选项卡中显示存储过程名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:26:43.143

这对任何 IDE 来说都很难做到。考虑以下情况：

1.  您正在创建一个新的存储过程，但尚未在其中放入任何代码或尝试运行该脚本。
2.  您正在修改一个存储过程，但您更改了该过程的名称。同样，您还没有运行脚本。
3.  您的文件包含多个存储过程。桌子上应该有什么？
4.  您正在修改一个存储过程，您更改了该过程的名称，但是出现了语法错误：代码将无法运行。
5.  您编写了存储过程更改的脚本，然后注释掉了文件中的所有内容，包括“ALTER PROCEDURE”。

IDE 应如何应对这些情况？

底线：您正在编辑文件，而不是存储过程对象。为了确定您尝试使用脚本修改的存储过程，IDE 必须读取和解析您的脚本，并对部分情况和上述异常情况做出大量决定。想要讨好所有人都很难，难免会有人抱怨，“我存到文件里了！怎么标签里的文件名不显示啊！？”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:34:33.710

不，这是不可能的，SSMS 许多失败恕我直言之一

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-07T01:36:30.897

SSMS 中的自动重命名选项卡有非常有用的解决方案。称为“SSMS 工具包”，它将指定行中的文本作为选项卡标题。[截屏](https://i.stack.imgur.com/kIp6r.png)

# algorithm - 需要数据结构并行添加串行删除

> ID：14403275
> 
> 赞同：1
> 
> 时间：2013-01-18T16:30:30.390
> 
> 标签：algorithm, data-structures, parallel-processing, gpgpu

我正在研究 GPU 上的动态分支粒子系统。我需要一个具有以下属性的并行数据结构：

1.  一个线程必须能够在恒定时间内一个一个地删除元素。返回的元素对算法并不重要——只要*一些*在非空时返回为了更棒，更改为任意数量的线程。
2.  任意数量的线程必须能够在恒定时间内向数据结构添加元素。请注意，某些锁定是允许的（并且是必要的），但它仍然必须与线程数无关地扩展。即，更多线程不应该减慢它。

基本的同步原语（互斥体、信号量）以及可以使用它们实现的任何东西都是可用的。

我曾经玩弄过链表的想法，但这违反了条件二（因为对于 m 个线程，添加将是 O(m)，因为必须考虑锁定）。我不确定这样的数据结构是否存在——但我想我会问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:08:30.043

在不了解您希望如何组织数据（排序？先进先出？后进先出？）的更多信息的情况下，我是。或者确定我是否可以给你一个确切的答案。但是，您所描述的内容听起来像是无锁结构的定义。存在堆栈和队列的无锁实现，即使有大量线程同时修改结构，它们也支持 O(1) 插入和删除。它们通常基于原子测试和设置操作。

如果锁没问题，并且您只想要一个排序的高并发数据结构，请考虑查看并发跳过列表，它提供 O(log n) 排序的插入和删除以及多个活动线程。

希望这可以帮助！

# objective-c - XIB 文件中对象的多个实例

> ID：14403279
> 
> 赞同：0
> 
> 时间：2013-01-18T16:30:45.600
> 
> 标签：objective-c, cocoa, xib, instantiation, nswindowcontroller

我有一个带有推荐`NSDocument`/`NSWindowController`设置的基于文档的应用程序。每个窗口都有自己的`NSWindowController`实例和关联的 XIB 文件。`-(id)init`该界面在:中非常直接地加载`if (self = [super initWithWindowNibName:@"DocumentWindow"]) { // yadda yadda }`。XIB 文件包含一个对象，该对象代表一个单独的控制器，每次用户打开新窗口时都应实例化该控制器。它显示仅与当前文档相关的数据。当我用解压对象时，`-(id)initWithWindowNibName:`尽管有两个不同的窗口控制器并且尽管调用`-(id)initWithWindowNibName:`了两次，但我总是得到对同一个实例的引用。XIB 加载机制似乎只对同一个归档对象进行一次解压，哪种是有意义的（*真的吗？*）。

除了在代码中分配单独的对象，手动加载视图，计算它们的大小，将它们添加为子视图，然后设置绑定并在窗口关闭时手动解除绑定之外，是否没有其他办法？

*我用头撞墙，因为我自己的愚蠢。它只会让事情变得更糟。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:55:09.907

正如我最初认为的那样，我绝对走错了路。问题很简单，我在前面提到的实例化类中为一个对象注册了一个通知，该对象是应用程序的子视图`keyWindow`（我将它组合在一起，想稍后将其更改为一个属性，*哎哟*）。当应用程序被加载时，所有文档窗口注册的所有实例都得到通知并计算相同的数据。

调试器是我今天最好的朋友。

当您从 XIB 中取消归档对象时，实际上没有什么比优化更好的了，而且您总是会得到不同的实例（回想起来这绝对是有道理的）。如果您遇到类似的问题，那么它可能是代码中另一个位置的不相关错误。

# sql - 搜索到的案例有效/简单案例在 Oracle 中无效

> ID：14403282
> 
> 赞同：0
> 
> 时间：2013-01-18T16:30:48.050
> 
> 标签：sql, oracle10g, case-when

`SELECT`我在 Oracle 10g查询中有以下搜索案例字段选择

```
(case 
    when LOADER_CELLS.CELL_MODE='RW' then 1
    when LOADER_CELLS.CELL_MODE='R' then 2
end) as CELL_EDIT_MODE_ID 
```

但如果我把它写成一个简单的案例表达式，如下所示：

```
(case LOADER_CELLS.CELL_MODE
    when 'RW' then 1
    when 'R' then 2
end) as CELL_EDIT_MODE_ID 
```

我在线上遇到`ORA-12704: character set mismatch`错误`when 'RW'`。

我查看了 Oracle 文档，看来我的语法是正确的。[http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:19:07.547

“我认为这可能是一个编码问题，但我不知道如何将常量字符串“转换”为 NVARCHAR”

你用“N”语法来做。

```
case LOADER_CELLS.CELL_MODE
    when n'RW' then 1
    when n'R' then 2
end 
```

例如

```
SQL> select case a when 'a' then 1 end from foo;
select case a when 'a' then 1 end from foo
                   *
ERROR at line 1:
ORA-12704: character set mismatch

SQL> select case a when n'a' then 1 end from foo;

CASEAWHENN'A'THEN1END
--------------------- 
```

# scala - 使用 NumberAxis 将 java.lang.Number 转换为使用 javafx 和 scala 的 DoubleAxis()

> ID：14403284
> 
> 赞同：1
> 
> 时间：2013-01-18T16:30:55.347
> 
> 标签：scala, charts, type-conversion, javafx-2, numeric

我尝试使用 javafx 和 scala 制作折线图，但在将 Number 转换为 Double 时遇到了一些问题。

我的问题在这里，`NumberAxis`扩展了 Number (java.lang.Number)

```
val xAxis = new NumberAxis()
val yAxis = new NumberAxis() 
```

您还可以在此处查看 api：http: [//docs.oracle.com/javafx/2/api/javafx/scene/chart/NumberAxis.html](http://docs.oracle.com/javafx/2/api/javafx/scene/chart/NumberAxis.html)

在我的程序中，我想创建一个`new LineChart[Double,Double]`而不是`LineChart[Number,Number]`，所以我的转换问题就在这里，`LineChart`无法转换`NumberAxis`为 Double。

```
//Type mistmatch
new LineChart[Double,Double](xAxis, yAxis) 
```

有没有可能定义一个`DoubleAxis`？还是`IntAxis`？

取而代之的是，我创建了所有我`XYChart`的`java.lang.Number`类型：

```
val xAxis = new NumberAxis()
val yAxis = new NumberAxis()

val linechart = new LineChart[Number, Number] (xAxis, yAxis)
val mySeries = new XYChart.Series[Number, Number]()

// here you can the implicit conversion between Number and Double,
// not bad, but i don't know how the conversion is made ... :/

val myData: XYChart.Data[Number, Number] = new XYChart.Data(1.0, 2.0)

mySeries.getData().add(myData)

linechart.getData().add(mySeries) 
```

您认为在 scala 中有更好的方法吗？

# css - 如何将具有“位置”样式和内容的 div 居中？

> ID：14403286
> 
> 赞同：0
> 
> 时间：2013-01-18T16:31:00.113
> 
> 标签：css

如何将具有“位置”样式和内容的 div 居中？我有下一个代码：

```
<div class="block" id="block1" style="position:relative;">
    <img />

    <div id="temperature" style="position:absolute; top:50px; min-width: 400px; height: 300px; margin: 0 auto"></div>

    <div id="tempeControl" style="position:absolute; bottom:0; ">   
        <button id="minus" style="height: 28px; width:128px;">-</button>
        <span id="valueTempe" style="font-weight: bold; color: #fea100; width:28px;">0</span>
        <button id="plus" style="height: 28px; width:128px;">+</button> 
    </div>              
</div> 
```

我试过了`<center>`，`text-align:center`（我认为是一样的），和`margin-left:auto; margin-right:auto;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:33:11.743

当您有绝对位置时，请使用以下内容： `left: 50%; margin-left: -200px`将 更改为`200px`元素宽度的一半，包括填充。

# php - PHP标签数组到MySQL

> ID：14403287
> 
> 赞同：0
> 
> 时间：2013-01-18T16:31:01.447
> 
> 标签：php, mysql, arrays

我正在尝试将给定标签的字符串插入 MySQL 表中，但效果并不理想。

```
 $tags = array explode (", ", $_POST["tags"]);
  $tag_array = implode(", ", $tags); 
```

我的表有列 tag_id（自动增量）和 tag_name（数组的每个项目都需要进入）

如何循环遍历我的数组并使 MySQL 将一个空白值插入 tag_id （因为它是自动递增的）并将我的每个数组值插入 tag_name 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:33:20.113

您没有提到如何从 PHP 中访问 MySQL，但使用 PDO 您可以执行以下操作：

```
$dbh = new PDO("mysql:dbname=$dbname", $username, $password);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);

$insert = $dbh->prepare('INSERT INTO my_table (tag_name) VALUES (:tag)');
$insert->bindParam(':tag', $tag, PDO::PARAM_STR);

foreach ($tags as $tag) $insert->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:51:24.207

你为什么不做一个 foreach 循环并插入标签？

```
foreach($tags as $tag_name)
{
    mysql_query("INSERT INTO tags (tag_name) VALUES ($tag_name)");
} 
```

请注意，您应该真正使用 PDO，因为 mysql_query 已过时。这只是一个示例，您应该在插入数据之前对如何清理数据进行一些研究。一个简单的谷歌搜索会让你继续前进。

# list - 需要根据元素升序的中断将列表划分为列表（Haskell）

> ID：14403293
> 
> 赞同：2
> 
> 时间：2013-01-18T16:31:12.823
> 
> 标签：list, haskell, partition

假设我有这样的列表：

```
[4,5,6,7,1,2,3,4,5,6,1,2] 
```

我需要一个 Haskell 函数，它将这个列表转换为一个列表列表，这些列表由原始列表的段组成，这些段按升序排列。所以结果应该是这样的：

```
[[4,5,6,7],[1,2,3,4,5,6],[1,2]] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T21:27:55.917

你可以通过手动递归来做到这一点，但我更愿意相信 Haskell 是一种更进化的语言。让我们看看我们是否可以开发一个使用现有递归策略的解决方案。首先是一些预备知识。

```
{-# LANGUAGE NoMonomorphismRestriction #-}
-- because who wants to write type signatures, amirite?
import Data.List.Split -- from package split on Hackage 
```

第一步是观察我们想要根据同时查看列表的两个元素的标准来拆分列表。所以我们需要一个新列表，其中的元素代表“上一个”和“下一个”值。有一个非常标准的技巧：

```
previousAndNext xs = zip xs (drop 1 xs) 
```

然而，就我们的目的而言，这不太行得通：这个函数总是输出一个比输入短的列表，而且我们总是想要一个与输入长度相同的列表（特别是我们想要一些输出，即使当输入是长度为一的列表）。因此，我们将使用“空终止符”稍微修改标准技巧。

```
pan xs = zip xs (map Just (drop 1 xs) ++ [Nothing]) 
```

现在我们将在这个列表中查找前一个元素大于下一个元素（或下一个元素不存在）的地方。让我们编写一个进行检查的谓词。

```
bigger (x, y) = maybe False (x >) y 
```

现在让我们编写实际进行拆分的函数。我们的“分隔符”将是满足的值`bigger`；我们永远不想扔掉它们，所以让我们保留它们。

```
ascendingTuples = split . keepDelimsR $ whenElt bigger 
```

最后一步只是将构建元组的位、拆分元组的位以及最后一点处理以丢弃我们不关心的元组的位：

```
ascending = map (map fst) . ascendingTuples . pan 
```

让我们在 ghci 中尝试一下：

```
*Main> ascending [4,5,6,7,1,2,3,4,5,6,1,2]
[[4,5,6,7],[1,2,3,4,5,6],[1,2]]
*Main> ascending [7,6..1]
[[7],[6],[5],[4],[3],[2],[1]]
*Main> ascending []
[[]]
*Main> ascending [1]
[[1]] 
```

PS 在当前版本的`split`,`keepDelimsR`比它需要的稍微严格一些，因此`ascending`目前不适用于无限列表。不过，我已经提交了一个让它变得更懒的补丁。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T16:37:16.950

```
ascend :: Ord a => [a] -> [[a]]
ascend xs = foldr f [] xs
  where
    f a []  = [[a]]
    f a xs'@(y:ys) | a < head y = (a:y):ys
                   | otherwise = [a]:xs' 
```

在 ghci

```
*Main> ascend [4,5,6,7,1,2,3,4,5,6,1,2]
[[4,5,6,7],[1,2,3,4,5,6],[1,2]] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T03:53:18.730

这个问题非常适合基于[paramorphism](https://stackoverflow.com/a/13317563/849891)的解决方案。拥有（如该帖子中所定义）

```
para  :: (a -> [a] -> b -> b) -> b -> [a] -> b
foldr :: (a ->        b -> b) -> b -> [a] -> b

para  c n (x : xs)  =  c x xs (para  c n xs)
foldr c n (x : xs)  =  c x    (foldr c n xs)
para  c n []        =  n
foldr c n []        =  n 
```

我们可以写

```
partition_asc xs  =  para c [] xs  where
  c x (y:_) ~(a:b) | x<y  =  (x:a):b 
  c x  _      r           =  [x]:r 
```

微不足道，因为抽象适合。

顺便说一句，它们在 Common Lisp 中有[两种类型`map`](http://www.lispworks.com/documentation/HyperSpec/Body/f_mapc_.htm)`mapcar`- （一个一个地处理输入列表的元素）和`maplist`（处理列表的“尾部”）。有了这个想法，我们得到

```
import Data.List (tails)

partition_asc2 xs  =  foldr c [] . init . tails $ xs  where
  c (x:y:_) ~(a:b) | x<y  =  (x:a):b
  c (x:_)     r           =  [x]:r 
```

两个版本中的惰性模式使其以高效的方式处理无限输入列表（如[Daniel Fischer](https://stackoverflow.com/users/1011995/daniel-fischer)的[回答](https://stackoverflow.com/a/14403413/849891)中首次显示）。

*2020-05-08 更新：毕竟*不是那么微不足道。两者都`head . head . partition_asc $ [4] ++ undefined`和`partition_asc2`失败相同`*** Exception: Prelude.undefined`。组合功能过早地`g`强制下一个元素。`y`在查看下一个元素之前，需要更加仔细地编写它以立即高效，例如对于第二个版本，

```
partition_asc2' xs  =  foldr c [] . init . tails $ xs  where
  c (x:ys) r@(~(a:b))  =  (x:g):gs
         where
         (g,gs) | not (null ys) 
                  && x < head ys =  (a,b)
                | otherwise      =  ([],r) 
```

（再次，如丹尼尔的回答中所示）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T16:37:55.600

您可以使用右折叠来分解列表：

```
foldr foo [] xs
  where
    foo x yss = (x:zs) : ws
      where
        (zs, ws) = case yss of
                     (ys@(y:_)) : rest
                            | x < y     -> (ys,rest)
                            | otherwise -> ([],yss)
                     _ -> ([],[]) 
```

（为了让第二个参数中的组合函数变得惰性，这有点复杂，因此它也适用于无限列表。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-03T20:39:27.830

处理此任务的另一种方法（实际上奠定了非常有效的排序算法的基础）是使用[连续传递样式，即 CPS](https://en.wikibooks.org/wiki/Haskell/Continuation_passing_style)，在这种特殊情况下，它适用于从右侧折叠；`foldr`.

照原样，这个答案只会将上升的块分块，但是同时将下降的块分块会很好......最好在 O(n) 中以相反的顺序排列，这将使我们只需要二进制合并获得的块以获得完美排序的输出。然而，这是另一个问题的另一个答案。

```
chunks :: Ord a => [a] -> [[a]]
chunks xs = foldr go return xs $ []
            where
            go :: Ord a => a -> ([a] -> [[a]]) -> ([a] -> [[a]])
            go c f = \ps -> let (r:rs) = f [c]
                            in case ps of
                               []  -> r:rs
                               [p] -> if c > p then (p:r):rs else [p]:(r:rs)

*Main> chunks [4,5,6,7,1,2,3,4,5,6,1,2]
[[4,5,6,7],[1,2,3,4,5,6],[1,2]]
*Main> chunks [4,5,6,7,1,2,3,4,5,4,3,2,6,1,2]
[[4,5,6,7],[1,2,3,4,5],[4],[3],[2,6],[1,2]] 
```

在上面的代码中，`c`代表当前，代表`p`上一个，记住我们是从右边折叠的，所以上一个，实际上是下一个要处理的项目。

# c# - BindingList 和嵌套属性

> ID：14403295
> 
> 赞同：0
> 
> 时间：2013-01-18T16:31:20.370
> 
> 标签：c#, inotifypropertychanged, nested, bindinglist

我有一个跟踪视频流的 a 类，为了简单起见，我使用自动属性将子类中的属性分组以访问它们。然后我将整个类绑定到一个 BindingList，但只显示了 None Nested Properties。我怎样才能让嵌套属性也显示出来？

```
public class Stream: : INotifyPropertyChanged 
{
public bool InUse {
    get { return _inUse; }
    set {
        _inUse = value;
        OnPropertyChanged("InUse");
        }
    }
}
....
internal SubCodec Codec { get; set; }
internal class SubCodec
{
    public string VideoCodec 
    {
        get { return _audioCodec; }
        set {
            _audioCodec = value;
            OnPropertyChanged("AudioCodec");
        }
    }
....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:47:02.340

您需要触发`OnPropertyChanged`父类型，而不是子类型。

```
public class Stream : INotifyPropertyChanged
{
    private SubCodec _codec;
    internal SubCodec Codec
    {
        get
        {
            return _codec;
        }
        set
        {
            _codec = value;
            //note that you'll have problems if this code is set to other parents, 
            //or is removed from this object and then modified
            _codec.Parent = this;
        }
    }
    internal class SubCodec
    {
        internal Stream Parent { get; set; }

        private string _audioCodec;
        public string VideoCodec
        {
            get { return _audioCodec; }
            set
            {
                _audioCodec = value;
                Parent.OnPropertyChanged("VideoCodec");
            }
        }
    }
} 
```

`Stream`将其放入构造函数中`SubCodec`并且不允许更改它可能更简单。这将是避免我在`Codec`set 方法的注释中提到的问题的一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:47:25.140

您需要`PropertyChanged`在`SubCodec`

```
private SubCoded _codec;
internal SubCodec Codec 
{
      get {return _codec;}  
      set 
      {
            _codec = value;
            OnPropertyChanged("Codec");
       }
 } 
```

# java - 获取对Java中某个对象的每个引用

> ID：14403297
> 
> 赞同：2
> 
> 时间：2013-01-18T16:31:23.383
> 
> 标签：java

> **可能重复：**
> [对对象的所有引用](https://stackoverflow.com/questions/3988148/all-references-to-an-object)

我正在寻找一种方法来获取在 Java 中引用某个变量的类/实例成员列表。

例如，对于这种情况：

```
public class MyClass {
    public LinkedList list; 
} 

public class MyOtherClass {
    public LinkedList list;
}

public class Program {

   public static void main(...) {
      LinkedList list = new LinkedList();
      MyClass c1 = new MyClass();
      MyOtherClass c2 = new MyOtherClass();

      c1.list = list;
      c2.list = list;
   }
} 
```

在程序结束时，我们`LinkedList`在我的第一行代码中创建了3 个引用`Program.main`：

1.  `Program.main.list`
2.  `MyClass.list`
3.  `MyOtherClass.list`

虽然第一个是局部变量（不关心我），但其他的是实例字段。在这种情况下，对于 2\. 和 3.，我需要某种方式来获取对对象 (`MyClass`和) 的引用以及具有对第 1 行创建`MyOtherClass`的引用的字段名称。`LinkedList`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:08:23.433

“纯”Java 解决方案：不确定它是否适合您，但如果您能够负担得起包装对象并仅通过包装器访问它，那么您可以尝试`WeakHashMap`：

```
public class Wrapper {
    private final Object yourObject;

    private final WeakHashMap<Object, Object> accessors = new WeakHashMap<Object, Object>();

    public Wrapper(Object yourObject) {
        this.yourObject = yourObject;
    }

// add synchronized if you want thread-safety.
    public Object getYourObject(Object accessor) {
        accessors.put(accessor, accessor);
        return yourObject;
    }

// add synchronized if you want thread-safety.
    public Object[] getAccessors() {
        return accessors.keySet().toArray(new Object[accessors.keySet().size()]);
    }
} 
```

# javascript - 如何在 youtube javascript API 中删除 youtube Video 的名称？

> ID：14403299
> 
> 赞同：2
> 
> 时间：2013-01-18T16:31:27.763
> 
> 标签：javascript, youtube, youtube-javascript-api

```
 <div id="ytplayer"></div>
    <script>
        // Load the IFrame Player API code asynchronously.
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/player_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // Replace the 'ytplayer' element with an <iframe> and
        // YouTube player after the API code downloads.
        var player;
        function onYouTubePlayerAPIReady() {
            player = new YT.Player('ytplayer', {
                height:'390',
                width:'640',
                videoId:'A_aYVs_zFA8',
                events:{
                    'onReady':onPlayerReady,
                    'onStateChange':onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            _isPlayerReady = true;
        }
        function onPlayerStateChange(event) {
            switch (event.data) {
                case YT.PlayerState.ENDED:
                $j  = jQuery.noConflict();
                $j(".vid-flow").hide();
                ShowCustomDialog();
                    break;
                case YT.PlayerState.PLAYING:
                    break;
                case YT.PlayerState.PAUSED:
                    break;
                case YT.PlayerState.BUFFERING:
                    break;
                case YT.PlayerState.CUED:
                    break;
                default:
                    break;
            }
        }

    </script> 
```

在 JavaScript 中，我想在 'ytplayer' div 上加载一个 youtube 播放器。我正在查看此[https://developers.google.com/youtube/iframe_api_reference#Operations](https://developers.google.com/youtube/iframe_api_reference#Operations)有人知道我如何删除视频的名称。

我试图获取 iframe，但如果我执行 iframe，我的 js 代码将无法工作。因此，有人可以选择删除显示在 youtube 视频嵌入顶部的名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T18:22:46.403

## [http://jsfiddle.net/jXWtE/](http://jsfiddle.net/jXWtE/)

```
function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer', {
        height: '390',
        width: '640',
        videoId: 'A_aYVs_zFA8',
        playerVars: {
            'showinfo': 0
        },
        events: {
            'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:25:35.810

Yusaf Khaliq 有正确的答案，但是通过更改强制嵌入标签在 videoID 之后接受额外参数的方法

```
videoId:'A_aYVs_zFA8', 
```

到

```
videoId:'A_aYVs_zFA8?showinfo=0&', 
```

您应该能够以这种方式将任意数量的参数串起来，只需将它们分开即可`&`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-22T04:02:08.510

Unfortunately, the `showinfo` attribute was deprecated as of September 25, 2018\. This means that there is no supported mechanism to disable the information at the top of the video anymore using their API.

[https://developers.google.com/youtube/player_parameters#showinfo](https://developers.google.com/youtube/player_parameters#showinfo)

# asp.net - 使用 CSS 的标签左侧的单选按钮

> ID：14403302
> 
> 赞同：1
> 
> 时间：2013-01-18T16:31:44.267
> 
> 标签：asp.net, css

我一直试图在 CSS 的帮助下将单选按钮的标签向左移动，但似乎没有任何效果。我可以得到第二双眼睛来帮助我吗？

```
asp:RadioButtonList ID="rbid" runat="server" RepeatDirection="Vertical" RepeatLayout="Table" TextAlign="left" >
                        <asp:ListItem Value="a">a</asp:ListItem>
                        <asp:ListItem Value="b">b</asp:ListItem>
                        <asp:ListItem Value="c">c</asp:ListItem>
                        <asp:ListItem Value="d">d</asp:ListItem>
                    </asp:RadioButtonList> 
```

CSS：

```
 .FormArea input[type=radio]
{
  float:left;     
}

.FormArea input[type=radio] label 
{           
    float:right; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:12:27.847

你需要 TextAlign = **TextAlign.Left**例如：

```
<script runat="server">  
     protected void Button1_Click(object sender, System.EventArgs e)  
     {  
         RadioButtonList1.TextAlign = TextAlign.Left;  
      }  
     protected void Button2_Click(object sender, System.EventArgs e)  
    {  
         RadioButtonList1.TextAlign = TextAlign.Right;  
     }  
  </script> 
```

在您的页面顶部

看看这个[链接](http://asp-net-example.blogspot.ie/2009/03/how-to-use-textalign-text-align-left_20.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:38:37.050

在您设置的单选按钮列表中，`TextAlign="Left"`但这被覆盖

```
.FormArea input[type=radio] label 
{           
    float:right;
} 
```

因此，它不起作用也就不足为奇了。

你有两个选择：

1.  删除两个 css 样式规则，只需`TextAlign="Left"`在单选按钮列表中使用或
2.  从单选按钮列表中删除`TextAlign="Left"`并使用以下 CSS：

    ```
    .FormArea input[type=radio] { float: right; }
    .FormArea input[type=radio] label { float: left;} 
    ```

两种方法都将根据需要在单选按钮左侧显示文本：

![在此处输入图像描述](../Images/5dc3143f55b21034ecbb846531db7dfe.png)

如果答案对您有帮助，请标记为正确

# java - 可以与 Eclipse subversion 插件一起使用的最好的、免费的 subversion 控制存储库是什么？

> ID：14403304
> 
> 赞同：19
> 
> 时间：2013-01-18T16:31:48.407
> 
> 标签：java, eclipse, version-control

对于我的软件工程类项目，我和我的团队正在开发 Android 应用程序。我们决定保持代码管理的最佳方式是通过 Eclipse 的颠覆控制插件。但是，我们没有人真正管理过自己的存储库。我们总是从教授那里得到它。我在哪里可以找到免费的存储库来上传我们的代码？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T16:36:08.500

有很多地方提供免费的存储库。这里有几个：

*   [https://www.assembla.com/subversion/](https://www.assembla.com/subversion/)
*   [http://www.projectlocker.com/](http://www.projectlocker.com/)
*   [http://riouxsvn.com/](http://riouxsvn.com/)
*   [http://beanstalkapp.com/](http://beanstalkapp.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T16:39:45.250

我肯定会推荐 Assembla。我第一次使用它时，我的情况与您相似。不知道该选什么，被所有的选择弄得不知所措。我选择了 Assembla 并广泛使用了 Assembla，我很确定它会满足您的需求。还具有团队合作的强大功能，并且强大，免费且易于管理，值得一试。

# arduino - Arduino DHCP 错误

> ID：14403305
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:32:02.730
> 
> 标签：arduino, ethernet, dhcp

我正在使用 Arduino Uno测试以太网[屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)，并且仅使用示例草图就遇到了[DHCP错误。](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)

```
#include <SPI.h>
#include <Ethernet.h>

byte MACaddress[] = { 0x90, 0xAD, 0xDA, 0x0D, 0x96, 0xFE };

EthernetClient client;

void setup() {
    Serial.begin(9600);
    while (!Serial) {
        ;
    }

    // Start the Ethernet connection:
    if (Ethernet.begin(MACaddress) == 0) {
        Serial.println("Failed to configure Ethernet using DHCP");
        for(;;)
            ;
    }
    Serial.print("My IP address: ");
    for (byte thisByte = 0; thisByte < 4; thisByte++) {
        Serial.print(Ethernet.localIP()[thisByte], DEC);
        Serial.print(".");
    }
    Serial.println();
}

void loop() {
} 
```

我打开了路由器管理页面，我可以看到它给了 Arduino 一个[IP 地址](http://en.wikipedia.org/wiki/IP_address)，与[MAC 地址](http://en.wikipedia.org/wiki/MAC_address)相关联。我还在代码 ( `Ethernet.begin(MACaddress, IPaddress)`) 中尝试了静态 IP 地址，但它也不起作用。

**我无法ping通路由器管理员页面中显示的屏蔽IP地址。**

只是这个简单的代码有什么问题？

一切都是开箱即用的，Arduino 和盾牌。我没有对它们做任何事情，只是将屏蔽连接到 Arduino 并发送代码。似乎一切正常，两个板的[LED](http://en.wikipedia.org/wiki/Light-emitting_diode)都在闪烁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:24:00.290

我不确定“我还在代码中尝试了静态 IP 地址”是什么意思。如果您只是替换 if (Ethernet.begin(MACaddress) == 0) {

如果 (Ethernet.begin(MACaddress, myIP) == 0) {

结果可能无法预测，因为没有返回值。

读

[以太网开始](http://arduino.cc/en/Reference/EthernetBegin)

返回 此函数的 DHCP 版本 Ethernet.begin(mac) 返回一个 int：1 表示 DHCP 连接成功，0 表示失败。其他版本不返回任何内容。

您是否尝试过使用固定 IP 的示例之一？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:35:28.683

这些循环是没用的..你可以试试这样的：

```
#if defined(ARDUINO) && ARDUINO > 18
#include <SPI.h>
#endif
#include <Ethernet.h>
#include <EthernetDHCP.h>

// MAC Address
byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };

const char* ip_to_str(const uint8_t*);

// Initialize the Ethernet server library
Server server(8080);

void setup()
{
  Serial.begin(9600);

  Serial.println("Attempting to obtain a DHCP lease...");

  // Initiate a DHCP session. The argument is the MAC (hardware) address that
  // you want your Ethernet shield to use. This call will block until a DHCP
  // lease has been obtained. The request will be periodically resent until
  // a lease is granted, but if there is no DHCP server on the network or if
  // the server fails to respond, this call will block forever.
  // Thus, you can alternatively use polling mode to check whether a DHCP
  // lease has been obtained, so that you can react if the server does not
  // respond (see the PollingDHCP example).
  EthernetDHCP.begin(mac);

  // Since we're here, it means that we now have a DHCP lease, so we print
  // out some information.
  const byte* ipAddr = EthernetDHCP.ipAddress();
  const byte* gatewayAddr = EthernetDHCP.gatewayIpAddress();
  const byte* dnsAddr = EthernetDHCP.dnsIpAddress();

  Serial.println("A DHCP lease has been obtained.");

  Serial.print("My IP address is ");
  Serial.println(ip_to_str(ipAddr));

  Serial.print("Gateway IP address is ");
  Serial.println(ip_to_str(gatewayAddr));

  Serial.print("DNS IP address is ");
  Serial.println(ip_to_str(dnsAddr));

  // Start the server
   server.begin();
}

void loop()
{
  // You should periodically call this method in your loop(): It will allow
  // the DHCP library to maintain your DHCP lease, which means that it will
  // periodically renew the lease and rebind if the lease cannot be renewed.
  // Thus, unless you call this somewhere in your loop, your DHCP lease might
  // expire, which you probably do not want :-)
  EthernetDHCP.maintain();

  // listen for incoming clients
  Client client = server.available();
  if (client) {
    // an http request ends with a blank line
    boolean currentLineIsBlank = true;
    while (client.connected()) {
      if (client.available()) {
        char c = client.read();
        // if you've gotten to the end of the line (received a newline
        // character) and the line is blank, the http request has ended,
        // so you can send a reply
        if (c == '\n' && currentLineIsBlank) {
          // send a standard http response header
          client.println("HTTP/1.1 200 OK");
          client.println("Content-Type: text/html");
          client.println();

          // Some misc. HTML 
          client.println("<title>Arduino Control Panel</title>");
          client.println("<center><h1>Control Panel</h1></center>");
          client.println("<p></p>");

          // output the value of each analog input pin
          for (int analogChannel = 0; analogChannel < 6; analogChannel++) {
            client.print("Analog input ");
            client.print(analogChannel);
            client.print(" is ");
            client.print(analogRead(analogChannel));
            client.println("<br />");
          }
          break;
        }
        if (c == '\n') {
          // you're starting a new line
          currentLineIsBlank = true;
        } 
        else if (c != '\r') {
          // you've gotten a character on the current line
          currentLineIsBlank = false;
        }
      }
    }
    // give the web browser time to receive the data
    delay(1);
    // close the connection:
    client.stop();
  }
}

// Just a utility function to nicely format an IP address.
const char* ip_to_str(const uint8_t* ipAddr)
{
  static char buf[16];
  sprintf(buf, "%d.%d.%d.%d\0", ipAddr[0], ipAddr[1], ipAddr[2], ipAddr[3]);
  return buf;
} 
```

# java - 如何使用 Java 日历制作此日期：31-DEC-99 12.00.00.000000000 AM

> ID：14403306
> 
> 赞同：0
> 
> 时间：2013-01-18T16:32:11.527
> 
> 标签：java, calendar

我一直在使用 Oracle 数据库，目前在数据库上这个日期是默认日期，如我的数据库工具中所示：

```
31-DEC-99 12.00.00.000000000 AM 
```

我正在尝试将它用作数据库上的键（我知道这是个坏主意）但无法匹配日期。由于 UTC 原因，我不得不从 java.util.Date 切换到 java.util.Calendar，现在我无法重现上述日期。我试过了：

```
new GregorianCalendar(9999, 11, 31, 0, 0) - 31-Dec-99 00.00.00.000000000 AM

Calendar d1 = new GregorianCalendar(9999, 11, 31,0,0);
d1.set(Calendar.HOUR_OF_DAY, 0);
d1.set(Calendar.MINUTE, 0);
d1.set(Calendar.SECOND, 0);
d1.set(Calendar.MILLISECOND, 0);
Same result. 
```

我也尝试过获取 Long 值。我从数据库中提取它（使用 getAll）并获得长值：

```
Calendar d2 = Calendar.getInstance();
d2.setTime(new Date(253402236000000)); 
```

但这也不起作用。有任何想法吗？

我从来没有得到一个格式化的日期来读取 31-DEC-99 12.00.00.000000000 AM。这是真正的约会还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:59:03.013

```
 Calendar date = new GregorianCalendar(9999, 11, 31, 0, 0);
    DateFormat format = new SimpleDateFormat("dd-MMM-yy h.mm.ss.000000000 a");
    System.out.println(format.format(date.getTime())); 
```

# mysql - 使用 MySQL 从字符串中返回浮点数

> ID：14403313
> 
> 赞同：1
> 
> 时间：2013-01-18T16:32:40.870
> 
> 标签：mysql, sql, string, floating-point

例如，如果我有类似名为 mutable 的表，使用这种数据：

```
身份证尺寸
1 100毫升
2 30毫升
3 6.7克
4 8.8公斤
5 阿尔法 110v
6 贝塔 220v

```

如何提取字符串的数字并将其转换为浮点数。（在这种情况下，`,`将小数部分与整数一分开。

那么，如何执行查询以返回类似的内容？：

```
id 大小 finalSize
3 6,7克 6,7
4 8,8公斤 8,8
2 30毫升 30
1 100毫升 100
5 阿尔法 110v 110
6 贝塔 220v 220

```

和这个？（只是身份证）：

```
ID
3
4
2
1
5
6

```

PS：我需要用 MySQL 函数来做这个......

PS：2我尝试使用MySQL搜索匹配正则表达式，但看起来没有函数可以返回匹配的模式。也许如果我创建一个函数来替换不是数字的任何东西，或者`,`可以解决我的问题，但我找不到这样做的方法。MYSQL REPLACE 函数不使用正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:08:10.763

这是一个基于函数的解决方案：[该函数在其中一篇文章中很容易获得。](https://stackoverflow.com/questions/287105/mysql-strip-non-numeric-characters-to-compare)所以我只更改了将 a 添加`comma`到列表中，因为它运行良好:)

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/08221/5)

询问：

```
select id, size,
  replace(STRIP_NON_DIGIT(size),',','.')
  as final
from demo
; 
```

功能：

```
CREATE FUNCTION STRIP_NON_DIGIT(input VARCHAR(255))
   RETURNS VARCHAR(255)
BEGIN
   DECLARE output   VARCHAR(255) DEFAULT '';
   DECLARE iterator INT          DEFAULT 1;
   WHILE iterator < (LENGTH(input) + 1) DO
      IF SUBSTRING(input, iterator, 1) IN (',', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' ) THEN
         SET output = CONCAT(output, SUBSTRING(input, iterator, 1));
      END IF;
      SET iterator = iterator + 1;
   END WHILE;   
   RETURN output;
END// 
```

结果：

```
| ID |      SIZE | FINAL |
--------------------------
|  3 |      6,7g |   6.7 |
|  4 |     8,8kg |   8.8 |
|  2 |      30ml |    30 |
|  1 |     100ml |   100 |
|  5 | alfa 110v |   110 |
|  6 | beta 220v |   220 | 
```

正如您自己提到的，MYSQL 没有`regex_replace`like `Oracle`。除非您想使用多个`replaces`（不想假设有多少），否则功能会为您派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:51:25.680

尝试这个

```
 SELECT size,
     @num := CONVERT(size, SIGNED) AS num_part,
     SUBSTRING(size, LENGTH(@num) + 1) AS rest_of_string 
     FROM your_table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T11:58:03.887

另外，如果字符串包含多个数字，我再次修改为仅提取一个数字。如果存在一些字符或字符串预区分，您可以调用函数，其中 EXTRACT_NUMBER(SUBSTRING_INDEX(Notas,'CHARS',-1)) 是 CHARS 前字符

```
DELIMITER $$
DROP FUNCTION IF EXISTS `EXTRACT_NUMBER`$$

DELIMITER $$
CREATE FUNCTION EXTRACT_NUMBER(input VARCHAR(255))
   RETURNS VARCHAR(255)
BEGIN
   DECLARE output   VARCHAR(255) DEFAULT '';
   DECLARE iterator INT          DEFAULT 1;
   WHILE iterator < (LENGTH(input) + 1) DO
      IF SUBSTRING(input, iterator, 1) IN (',', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' ) THEN
        IF (SUBSTRING(input, iterator, 1) = ',' AND output = '') 
                THEN SET output = ''; 
            END IF;
         SET output = CONCAT(output, SUBSTRING(input, iterator, 1));
      END IF;
      IF (SUBSTRING(input, iterator, 1) NOT IN (',', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' ) AND output <> '') 
            THEN SET iterator = LENGTH(input);
      END IF;
      SET iterator = iterator + 1;
   END WHILE;
   RETURN replace(output,',','.');
END $$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T10:03:04.980

很棒的功能 bonCodigo !!!，但我想报告此修改以简化工作：

```
DELIMITER $$
DROP FUNCTION IF EXISTS `EXTRACT_NUMBER`$$

DELIMITER $$
CREATE FUNCTION EXTRACT_NUMBER(input VARCHAR(255))
   RETURNS VARCHAR(255)
BEGIN
   DECLARE output   VARCHAR(255) DEFAULT '';
   DECLARE iterator INT          DEFAULT 1;
   WHILE iterator < (LENGTH(input) + 1) DO
      IF SUBSTRING(input, iterator, 1) IN (',', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' ) THEN
         SET output = CONCAT(output, SUBSTRING(input, iterator, 1));
      END IF;
      SET iterator = iterator + 1;
   END WHILE;   
   RETURN CONVERT(replace(output,',','.'), DECIMAL) ;
END $$ 
```

# .net - WCF/SOAP 中的 Nagle 算法是否有用？

> ID：14403314
> 
> 赞同：6
> 
> 时间：2013-01-18T16:32:41.220
> 
> 标签：.net, wcf, network-programming, nagle

我看过很多关于在 Azure 上工作时在 WCF 中禁用 Nagle 算法的帖子。我一直想知道这是否仅适用于 Azure，或者这是否应该是更通用的最佳实践。

正如各种来源所描述的，Nagle 算法基本上将小的 TCP 请求分批成一个更大的请求。批处理基于每个连接进行。

我在专业环境中看到的大多数 WCF 传输都是小数据块，由单个线程发送，并且主要是双向的。我知道这并不是 Nagle 算法的理想情况。

所以......我的结论是否正确，无论上下文如何，最好在使用 WCF 或 SOAP 时**始终**禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:07:16.633

据我了解，Nagle 的算法仅在数据以低于网络吞吐量的速率以小块形式流式传输时才有帮助。例如，如果它是来自某些硬件传感器的视频馈送或恒定输出（实时无关紧要，但历史重要）。想象一下极端情况——所有这些数据都是在没有 Nagle 算法的情况下逐字节发送的，本质上是流量乘以 41。

相反，当数据以一大块写入（SOAP 请求）然后以一大块接收（SOAP 响应）时，它当然没有用，甚至有害（由于延迟）。因此建议关闭它。

因此，可以得出结论，除非实时处理很重要（控制台终端），否则**应该将**Nagle 的算法保留用于流应用程序（文件、视频、恒定数据馈送）。它基本上是应用程序的“良好行为准则”，不要让无用的流量阻塞通道（这可能是网络负载重的大型数据中心的问题）。如果通信是在请求-响应模式下完成的（即：所有数据一次写入缓冲区——因此 Nagle 的算法无效），您可以默认将其关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:31:16.427

对于使用大量小型（TCP/HTTP 级别）消息的协议，应关闭 Nagle。我不认为**总是**这样做是可以的。

另请注意，WCF 并不一定意味着 SOAP。这取决于使用的绑定。消息大小还取决于使用的编码。WCF 是*非常*可配置的。

WCF 可以使用例如 JSON。因此，假设您在 WCF+JSON+REST 上构建了一个服务器应用程序，并且平均 JSON 有效负载很小（例如，小于 1500 字节，这意味着大约 1500 个字符，因为 JSON 默认使用 UTF-8），比它可能值得。

但是，如果您的应用程序正在使用 SOAP 绑定，并且您测量到平均消息大小超过 1500 字节（坦率地说，这对于 SOAP XML 有效负载来说似乎是可能的），那么它就不值得了。

所以，你真的需要在做出决定之前衡量一些事情，恕我直言——就像 Azure 的人所做的那样，好吧，也许他们是在 :-) 之后做的。测量 HTTP 消息大小的一种简单方法是使用[Fiddler2](http://www.fiddler2.com/fiddler2/)，尤其是统计选项卡（选择所有消息，它将为您提供总帧数和总字节数）。

# windows-7 - Fortran 库可以让我捕捉箭头键的移动

> ID：14403315
> 
> 赞同：-2
> 
> 时间：2013-01-18T16:32:41.757
> 
> 标签：windows-7, fortran, windows-xp, intel-fortran

我想使用箭头键在我的控制台应用程序的 QuickWin 图中移动一些点。那里有图书馆为类似的东西提供支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:36:55.287

quickwin 支持很多函数调用：试试 incharqq、getcharqq 或 peekcharqq。您必须编写一个 noddy 程序来找出箭头键的键序列是什么。

您可能缺少的调用是带有参数 PASS_DIR_TRUE 的 passdirkeysqq。这将使您能够看到方向键。每一个都以 2 个键的形式出现，前导字符为 224。

如果您没有获得任何成功，请尝试使用数字键盘。

# jquery - 将页面从 iframe 加载到主窗口

> ID：14403316
> 
> 赞同：0
> 
> 时间：2013-01-18T16:32:42.567
> 
> 标签：jquery, asp.net-mvc-3

我有一个 MVC 站点，其中有一个页面（我们称之为 x），其中有一个 iframe（我们称之为 x2）。当我与 iframe (x2) 交互时，如果我最终使用特定的 url（我们称之为 y），我希望该 url (y) 不要在 iframe (x2) 中打开，而是在浏览器中打开作为主页。我也希望将 url 更改为 y 。我需要什么 JQuery 魔法？

**编辑**

我的错，我解释得不够清楚。我不会使用单击的链接转到该页面，但外部站点会从 iframe 重定向到该页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:07:34.030

我相信您可以通过在 URL 末尾使用标签加上循环在目标视线中检查它。更改主题标签不会重新加载 URL 并允许目标框架读取它。这很hacky，但它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:36:46.863

不需要 jQuery，只需`target`在`<a>`:

```
<a href="@Url.Action("Action", "Controller", { property = 'foo' })" target="_parent">Link</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:36:55.807

您可以通过 window.postmessage 考虑这样做。我做了类似的事情。我的一个页面有一个 iframe。单击某个链接，而不是更改 iframe，会更改父页面。

[http://davidwalsh.name/window-postmessage](http://davidwalsh.name/window-postmessage)有一篇关于如何使用它的好文章。本质上，您将在第 x 页上设置一个侦听器。当您加载页面 y 时，让页面 y 向父窗口发布消息。X 将监听该消息并采取相应的行动。

**编辑：**添加一个监听器来检查 iFrame 的 onLoad 事件。每次查看 iFrame 的 URL。如果该 URL 与页面 Y 匹配，则强制页面 X 更改 URL。

# java - Java：以随机间隔安排任务

> ID：14403320
> 
> 赞同：8
> 
> 时间：2013-01-18T16:32:46.040
> 
> 标签：java, random, timer, timertask

我对Java很陌生，我正在尝试生成一个每5到10秒运行一次的任务，所以在5到10之间的任何时间间隔，包括10。

我尝试了几件事，但到目前为止没有任何效果。我最近的努力如下：

```
timer= new Timer();
Random generator = new Random();
int interval;

//The task will run after 10 seconds for the first time:
timer.schedule(task, 10000); 

//Wait for the first execution of the task to finish:               
try {
    sleep(10000);
} catch(InterruptedException ex) {
ex.printStackTrace();
}

//Afterwards, run it every 5 to 10 seconds, until a condition becomes true:
while(!some_condition)){
    interval = (generator.nextInt(6)+5)*1000;
    timer.schedule(task,interval);

    try {
        sleep(interval);
    } catch(InterruptedException ex) {
    ex.printStackTrace();
    }
} 
```

“任务”是一个 TimerTask。我得到的是：

```
Exception in thread "Thread-4" java.lang.IllegalStateException: Task already scheduled or cancelled 
```

我从[这里](https://stackoverflow.com/questions/1041675/java-timer)了解到 TimerTask 不能被重用，但我不知道如何修复它。顺便说一句，我的 TimerTask 非常精细，至少持续 1.5 秒。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T17:03:44.733

尝试

```
public class Test1 {
    static Timer timer = new Timer();

    static class Task extends TimerTask {
        @Override
        public void run() {
            int delay = (5 + new Random().nextInt(5)) * 1000;
            timer.schedule(new Task(), delay);
            System.out.println(new Date());
        }

    }

    public static void main(String[] args) throws Exception {
        new Task().run();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:38:35.943

`Timer`而是为每个任务创建一个新任务，就像您已经做的那样：`timer= new Timer();`

如果您想将代码与线程任务同步，请使用信号量而不是`sleep(10000)`. 如果你很幸运，这可能会奏效，但肯定是错误的，因为你不能确定你的任务是否真的完成了。

# r - 在 R 中创建一个用户创建的函数

> ID：14403332
> 
> 赞同：16
> 
> 时间：2013-01-18T16:34:00.523
> 
> 标签：r, function, user-defined

很抱歉，如果以前有人问过这个问题，但我找不到答案。

假设我在 R 中编写了一个小函数

```
add2<-function(a){
return(a+2)
} 
```

我将它作为 add2.R 保存在我的主目录（或任何目录）中。我如何让 R 找到它？

```
> add2(4)
Error: could not find function "add2" 
```

我知道我可以打开脚本，在控制台中复制/粘贴它，运行它，然后它就可以工作了。但是我如何让它内置，所以如果我打开和关闭 R，它仍然可以在没有我复制和粘贴的情况下运行？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T16:40:17.030

一种轻量级选项：

```
dump("add2", file="myFunction.R")

## Then in a subsequent R session
source("myFunction.R") 
```

替代：

```
save("add2", file="myFunction.Rdata")

## Then just double click on "myFunction.Rdata" to open  
## an R session with add2() already in it 

## You can also import the function to any other R session with
load("myFunction.Rdata") 
```

在您准备好将函数打包到您自己的私有包中之前，将它们存储在组织良好、`source()`就绪的文本文件中（如上面的第一个示例）可能是最好的策略。有关经验丰富的用户如何将这种方法付诸实践的一些示例，请参阅[这个投票率很高的 SO 问题。](https://stackoverflow.com/questions/1429907/workflow-for-statistical-analysis-and-report-writing)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T16:38:16.580

在调用函数之前（例如在脚本的开头），您应该`source`包含用户定义函数的文件，即：

```
source("add2.R") # this executes add2.R script loading add2 function 
```

基本上，`source`函数执行作为参数传递的脚本中包含的代码。因此，如果文件仅包含函数定义，它会将函数加载到内存中以供将来使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T17:18:20.530

如果要自动启动它，则必须设置启动脚本，然后使用上面答案中概述的方法之一。

/Library/Frameworks/R.framework/Versions/2.15/Resources/etc/是（对于mac）Rprofile.site的位置，必须进行充分的编辑。

我的版本是：

```
.First <- function()
{ 
    dir='~/Desktop/Infobase/R/0_init/0_init.R'
    if(file.exists(dir))
    {
    source(dir, chdir = TRUE) 
    } else {cat("startup file is not found at:",dir)}
    cat("\nWelcome at", date(), "\n")
}    

.Last <- function()
{ 
cat("\nGoodbye at ", date(), "\n")
} 
```

请注意，在您获取了 1 个 R 脚本后，您不再需要输入此文件。只需从您获取的文件中完成您需要的一切。在我的情况下，文件“0_init.R”不包含任何功能，它只包含其他脚本的加载。嗯，你有这个想法。

此外，如果您这样做，我建议您将它们存储在新环境中。实际环境并不真正适合您自己的功能（如果您开发了一个包，它们会更好地实现，否则您会失去很多控制权）。

使用“附加”、“分离”、“搜索”等......

```
attach(FUN,name="af2tr") 
```

# c# - 来自 Google 网站构建器页面时，引荐来源网址被剥离？

> ID：14403334
> 
> 赞同：5
> 
> 时间：2013-01-18T16:34:15.173
> 
> 标签：c#, asp.net

谁能验证我看到的不是错误？当有人访问我的网站（一个 ASP.NET C# 商店网站）时，我正在检查引荐来源网址。当我从我控制的任何其他网站链接时，我的主页会正确看到引荐来源网址。

我正在尝试支持另一个链接到我的第三方网站，他们在 sites.google.com/site/whatever 上有一个 Google 网站页面，当我点击该链接时，我主页上的推荐人是空白的。

这是谷歌正在做的事情，还是我的代码中真正奇怪的错误。（我知道您看不到我的代码，但我想确认 Google 正在从他们的网站中删除引荐来源网址。请在 Google 页面上。）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:52:05.337

Google 协作平台默认为 HTTPS，这意味着不传递引荐来源网址数据。这可能是谷歌全面转向 HTTPS 的一部分。[这里](http://googlewebmastercentral.blogspot.com/2012/03/upcoming-changes-in-googles-http.html)讨论的含义。

HTTP RFC 说，从 HTTPS 到 HTTP 时不应发送引荐来源网址。不确定 HTTPS 到 HTTPS 是否也可以工作。[请参阅此处](https://stackoverflow.com/questions/1390862/http-referer-lost-using-https)的讨论。

# maven - 使用原型插件在项目目录中创建文件

> ID：14403337
> 
> 赞同：19
> 
> 时间：2013-01-18T16:34:22.400
> 
> 标签：maven, maven-archetype

我想在 Maven Archetype 插件创建的项目`README.md`旁边放置一个（可能还有一些其他文件） 。`pom.xml`

[好像](http://maven.apache.org/guides/mini/guide-creating-archetypes.html)只允许放置文件

*   `<sources> = src/main/java`
*   `<resources> = src/main/resources`
*   `<testSources> = src/test/java`
*   `<testResources> = src/test/resources`
*   `<siteResources> = src/site`

而我想将文件放在`.`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-15T15:01:12.927

为了澄清 user1811587 的意思，如果您使用的是[archetype-metadata.xml](http://maven.apache.org/archetype/archetype-common/archetype-descriptor.html)文件，例如通过[mvn archetype:create-from-project](http://maven.apache.org/archetype/maven-archetype-plugin/advanced-usage.html)生成原型时创建的文件，格式为：

```
<?xml version="1.0" encoding="UTF-8"?>
<archetype-descriptor xsi:schemaLocation="http://maven.apache.org/plugins/maven-archetype-plugin/archetype-descriptor/1.0.0 http://maven.apache.org/xsd/archetype-descriptor-1.0.0.xsd" name="viewport-bootstrap"
    xmlns="http://maven.apache.org/plugins/maven-archetype-plugin/archetype-descriptor/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <fileSets>
    <fileSet filtered="true" packaged="false" encoding="UTF-8">
      <directory/>
      <includes>
        <include>README.txt</include>
      </includes>
    </fileSet>
  </fileSets>
</archetype-descriptor> 
```

上面的 XML 会将 README.txt 放在 pom.xml 旁边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:02:05.553

像这样的东西

```
<resources>
        <resource>README.txt</resource>
</resources> 
```

应该可以帮助你。

# iphone - 多次展示插页式广告 admob

> ID：14403341
> 
> 赞同：1
> 
> 时间：2013-01-18T16:34:28.863
> 
> 标签：iphone, ios, admob

在我的应用运行时，我多次尝试显示插页式广告。我已经阅读了关于它的 admob 文档，它似乎是一个一次性使用的对象，我想知道是否有任何解决方法。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-21T13:34:19.873

我知道这个问题是大约 8 年前的问题，但我遇到了同样的问题。什么对我有用：

```
import 'package:firebase_admob/firebase_admob.dart';

InterstitialAd _interstitialAd;
bool _isInterstitialAdReady;

void prepAd(){
  initState();
  _loadInterstitialAd();
}

void runAd() {
  _interstitialAd.show();
}

void initState() {
  _isInterstitialAdReady = false;
  _interstitialAd = InterstitialAd(
    adUnitId: InterstitialAd.testAdUnitId,
    listener: _onInterstitialAdEvent,
  );
}

void _loadInterstitialAd() {
  _interstitialAd.load();
}
// TODO: Implement _onInterstitialAdEvent()
void _onInterstitialAdEvent(MobileAdEvent event) {
  switch (event) {
    case MobileAdEvent.loaded:
      _isInterstitialAdReady = true;
      break;
    case MobileAdEvent.failedToLoad:
      _isInterstitialAdReady = false;
      print('Failed to load an interstitial ad');
      break;
    case MobileAdEvent.closed:
      dispose();
      prepAd();
      break;
    default:
    // do nothing
  }
}

void dispose() {// TODO: Dispose InterstitialAd object
  _interstitialAd?.dispose();
} 
```

我一开始就跑了`prepAd()`一次，然后就`runAd()`在我需要的时候跑了。如果你愿意，你可以检查`_isInterstitialAdReady == true`里面`runAd()`

# javascript - 找出是什么 JS 控制它

> ID：14403343
> 
> 赞同：0
> 
> 时间：2013-01-18T16:34:36.307
> 
> 标签：javascript

我有一个页面使用了一个很好的由 javascript 控制的悬停功能，我想知道是否有一个工具可以告诉我 JS 在特定点控制什么，因为整个站点使用了很多 JS 文件.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:46:01.603

正如其他人所说，使用 Chrome 的网络开发工具栏。转到源面板，然后单击左下角的小暂停按钮图标。这将导致调试器在运行下一个 javascript 命令时立即激活。然后激活悬停功能 - 调试器应该在负责的回调函数中暂停执行。

[Google 实际上在此文档页面的底部](https://developers.google.com/chrome-developer-tools/docs/scripts)讨论了这个确切的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:40:04.407

我会选择 Chrome。可以加载页面，查看所有相关的JS。

如果您在 Chrome 中，请右键单击该按钮或其附近，然后单击“检查元素”。

现在你可以看到所有的好东西:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:40:15.483

您需要一个调试工具，评论中提到了一个这样的工具：Chrome。启用调试器后，您需要在各种事件上设置断点以捕获所有 javascript 中的代码流。欲了解更多信息，请访问[这里](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:43:12.143

在谷歌浏览器中右键单击元素，单击**“检查元素”**选项。应该会出现带有活动元素选项卡的 Chrome 开发人员窗口。您将看到元素被突出显示的 html 结构。右键单击该元素并激活**“Break on...”**子菜单中的所有三个选项。如果在悬停期间对 DOM 进行了一些修改，它们将在您需要的地方触发断点。但请记住，悬停效果可以通过 css 实现而无需一点 javascript，因此这个计划很容易失败。

# indentation - 文本编辑器功能一次缩进多行

> ID：14403345
> 
> 赞同：31
> 
> 时间：2013-01-18T16:34:39.227
> 
> 标签：indentation, text-editor, textwrangler, bbedit

我想让我的代码更有条理。因此，每当我从我的*functions.php*文件中复制一个函数并将其粘贴到一个类中时，我需要将函数的每一行缩进一次或多次，以便于阅读并且看起来更美观。我的一些函数只不过是巨大的 switch 语句，并且缩进每一行曾经被证明是耗时且乏味的。

TextWrangler 中是否有任何功能可以让用户一次缩进突出显示的代码块？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-11-14T16:39:29.067

您可以转到首选项 > 键盘，然后选择“允许 Tab 键缩进文本块”。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-18T16:36:45.623

你可以做：

1.  `Command + ]`: 向右制表符
2.  `Command + Shift + ]`: 向右空格
3.  `Command + Shift + [`: 向左移动

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-07T00:02:25.523

命令 - 右括号（]）；

Command Shift 右括号关闭；

与左方括号 ([) 相同

# html - 如何归档这个响应式设计？

> ID：14403346
> 
> 赞同：2
> 
> 时间：2013-01-18T16:34:40.273
> 
> 标签：html, css, css-float

我正在尝试使用 CSS 进行这种响应式设计。

当有足够的空间显示整个长度时，它基本上应该是 600px 宽度。
如果没有，它会折叠，然后右偏来出现在左偏的底部。
我正在努力如何存档。

这是我可以走这么远的**演示**
[http://jsfiddle.net/a7Fkj/5/](http://jsfiddle.net/a7Fkj/5/)

![在此处输入图像描述](../Images/865fc835c683f8e13c28153fc1a8542d.png)

**HTML**

```
<div class="table_row">
    <div class="left_partial">
        <div class="StoreName">Walmart Store</div>
        <div class="Location">Located in California</div>
    </div>

    <div class="right_partial">
        <div class="store_icon"><img src="https://twimg0-a.akamaihd.net/profile_images/616833885/walmart_logo_youtube.jpg"><div>
        <div class="person1">John Smith<div>
        <div class="person2">Mike Tailor<div>
        <div class="person3">Jessica Swan<div>
    </div>

</div> 
```

**CSS**

```
div.table_row{
    min-width: 300px;
    margin-bottom: 30px;

}

div.left_partial{
    width: 300px;

}

div.right_partial{
    width: 300px;   
}

div.StoreName{
    background-color: #000000;
    color: #FFFFFF;
}

div.Location{

}

div.store_icon{
    width: 60px;
    height: 60px;
}

div.person1{

}

div.person2{

}

div.person3{

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:53:58.813

You don't need media queries for this design- you can use inline-block to collapse the layout when the browser is resized.

HTML:

```
<div class="table_row">
    <div class="left_partial">
        <div class="StoreName">Walmart Store</div>
        <div class="Location">Located in California</div>
    </div>

    <div class="right_partial">
        <div class="store_icon"><img src="https://twimg0-a.akamaihd.net/profile_images/616833885/walmart_logo_youtube.jpg" /></div>
        <div class="people">
            <div class="person">John Smith</div>
            <div class="person">Mike Tailor</div>
            <div class="person">Jessica Swan</div>
        </div>
    </div>

</div> 
```

CSS:

div.table_row{ min-width: 300px; margin-bottom: 30px;

```
}

div.left_partial{
    width: 300px;
    display:inline-block;
    vertical-align:top;

}

div.right_partial{
    width: 300px;   
    display:inline-block;
    vertical-align:top;
    margin-bottom:30px;
}

div.StoreName{
    background-color: #000000;
    color: #FFFFFF;

}

div.Location{

}

div.store_icon{
    width: 60px;
    height: 60px;
    display:inline-block;
    vertical-align:top;
}

div.store_icon img{
    width:100%;
    height:100%;
}
div.people{
    display:inline-block;
    vertical-align:top;
    height:60px;        
    width:234px;
} 
```

jsfiddle: [http://jsfiddle.net/kmMEM/](http://jsfiddle.net/kmMEM/)

This will collapse the design when the browser is resized- I added a 30px bottom margin to your right_partial to ensure the list stacks correctly.

# .net - VB.net 将项目添加到 List(of T) 问题

> ID：14403348
> 
> 赞同：0
> 
> 时间：2013-01-18T16:34:46.903
> 
> 标签：.net, vb.net, generic-list

我正在加载一个包含 7 个对象的列表，但是这些对象被添加的最后一个对象“覆盖”。有 7 个对象被创建（Exec、Mgr、Position...等）第一个“Exec”被正确添加到列表中，但是创建的每个新 OrgShape 都会覆盖之前添加到列表中的所有 OrgShape . 我知道我错过了一些简单的东西......

```
Public Shared Function GetOrgShapeData() As List(Of OrgShape)
    Dim OgrShapeList As New List(Of OrgShape)
    Dim conn As OleDbConnection = HR_DB.GetConnection
    Dim strSQL As String
    strSQL = "SELECT * FROM VisioShapeDim"
    Dim selectCommand As New OleDbCommand(strSQL, conn)
    Try
        conn.Open()
        Dim reader As OleDbDataReader = selectCommand.ExecuteReader
        Dim orgshape As OrgShape
        Do While reader.Read
            orgshape = New OrgShape

            orgshape.ShapeName = reader("ShapeName")
            orgshape.ShapeWidth = reader("ShapeWidth")
            orgshape.ShapeHeight = reader("ShapeHeight")

            OgrShapeList.Add(orgshape)
            orgshape = Nothing
        Loop
        reader.Close()
    Catch ex As OleDbException
        Throw ex
    Finally
        conn.Close()
    End Try
    Return OgrShapeList
End Function 
```

'**添加了 OrgShape 类

```
Public Class OrgShape
  Private Shared m_ShapeName As String
  Private Shared m_ShapeWidth As Double
  Private Shared m_ShapeHeight As Double

  Public Sub New()

  End Sub

  Public Shared Property ShapeName() As String
    Get
        Return m_ShapeName
    End Get
    Set(ByVal value As String)
        m_ShapeName = value
    End Set
  End Property

  Public Shared Property ShapeWidth() As Double
    Get
        Return m_ShapeWidth
    End Get
    Set(ByVal value As Double)
        m_ShapeWidth = value
    End Set
  End Property

  Public Shared Property ShapeHeight() As Double
    Get
        Return m_ShapeHeight
    End Get
    Set(ByVal value As Double)
        m_ShapeHeight = value
    End Set
  End Property
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:46:05.400

尝试`Shared`从属性和变量中删除关键字，因为您正在寻找实例：

```
Public Class OrgShape
  Private m_ShapeName As String
  Private m_ShapeWidth As Double
  Private m_ShapeHeight As Double

  Public Property ShapeName() As String
    Get
      Return m_ShapeName
    End Get
    Set(ByVal value As String)
      m_ShapeName = value
    End Set
  End Property 
```

请参阅[共享 (Visual Basic)](http://msdn.microsoft.com/en-us/library/zc2b427x%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:46:05.360

我会`Dim orgshape As new OrgShape`在循环中使用并删除`orgshape = New OrgShape`和`orgshape = Nothing`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:41:42.013

您需要删除以下行

```
orgshape = Nothing 
```

你每次都在擦除你的对象。

请记住，在 .NET 中，对象是`reference`类型。

根据问题编辑进行编辑。您也不能将共享字段和属性用于实例数据。

# solr - Solr+Sunspot：对唱片的标签有不同的提升——可能吗？

> ID：14403350
> 
> 赞同：3
> 
> 时间：2013-01-18T16:35:10.093
> 
> 标签：solr, sunspot, sunspot-rails

我有一个模型，比如 Post。它有标签。每个标签都有一个应该反映在搜索中的权重。我可以以某种方式存储这些标签并用它的重量来提升它们吗？

例子：

帖子标题是“在外面吃饭”标签是“汉堡”（重量 5）、“披萨”（重量 4）和“寿司”（重量 2）。当有人搜索“burgers”时，这应该考虑额外的提升，并将其显示在带有标签“burgers”且权重=2 的帖子上方。

我想到的第一个解决方案是有 5 个文本字段，提升 1-5，其中将包含每个帖子的标签。有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:11:56.883

没有开箱即用的良好支持。然而，最近的匹配似乎是[payloads](http://wiki.apache.org/solr/Payloads)。[在这里查看](http://searchhub.org/2009/08/05/getting-started-with-payloads/)有关它的（旧）文章，但也有[更新的](http://sujitpal.blogspot.ca/2011/01/payloads-with-solr.html)文章。这两个都使用自定义相似度，这是一个相当高级的话题。幸运的是，从 Solr 4 开始，有一种方法可以定义[每个字段的相似性](http://wiki.apache.org/solr/SchemaXml#Similarity)，因此最终代码可能比这些示例中的任何一个都简单。

如果你明白这一点，请与世界其他地方分享这篇文章（例如在[SearchHub 上](http://searchhub.org/)）。我认为还没有人将这些部分与完全更新的 Solr 堆栈组合在一起。

# mysql - 按年份添加两列资金总额

> ID：14403352
> 
> 赞同：0
> 
> 时间：2013-01-18T16:35:19.047
> 
> 标签：mysql

下面是我的查询，将我的客户分组在一起，并总结了他们在过去两年中花费的总金额。奇迹般有效。但是我需要更多的东西来了解我的 sql 知识。

有没有办法再选择三列并用他们在每一年（2010、2011、2012）花费的钱填充它？

```
SELECT  SUM(price) AS money_spent_total, co.customer_id, cu.first_name, cu.last_name, cu.email_primary, cu.phone_primary, co.date_paid
FROM customer_order   AS co
INNER  JOIN customer AS cu ON (cu.customer_id = co.customer_id) 
WHERE  cu.customer_id != 32518 AND co.date_paid > "2010-1-1" AND co.date_paid < "2013-1-1"
GROUP BY co.customer_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:36:50.203

你需要`GROUP BY YEAR(date_paid)`除了`customer_id`. 您也不应该选择任何不在您的`GROUP BY`. 此外，您可以使用`BETWEEN`运算符代替`>`和`<`作为您的日期范围。

```
SELECT Year(co.date_paid), 
       co.customer_id, 
       Sum(price) AS money_spent_total 
FROM   customer_order AS co 
       INNER JOIN customer AS cu 
               ON ( cu.customer_id = co.customer_id ) 
WHERE  cu.customer_id != 32518 
       AND co.date_paid BETWEEN '2010-01-01' AND '2013-01-01' 
GROUP  BY Year(co.date_paid), 
          co.customer_id 
```

要获取原始中的列`SELECT`，您可以执行以下操作（未测试）：

```
SELECT a.date_year_paid, 
       a.customer_id, 
       a.money_spent_total, 
       cu.first_name, 
       cu.last_name, 
       cu.email_primary, 
       cu.phone_primary 
FROM   (SELECT Year(co.date_paid) AS date_year_paid, 
               co.customer_id, 
               Sum(price)         AS money_spent_total 
        FROM   customer_order AS co 
               INNER JOIN customer AS cu 
                       ON ( cu.customer_id = co.customer_id ) 
        WHERE  cu.customer_id != 32518 
               AND co.date_paid BETWEEN '2010-01-01' AND '2013-01-01' 
        GROUP  BY Year(co.date_paid), 
                  co.customer_id) a 
       LEFT JOIN customer cu 
              ON cu.customer_id = a.customer_id 
```

如果您`INNER JOIN`只是为了客户信息而做的，那么它可以被删除。

```
 SELECT a.customer_id, 
       a.date_year_paid, 
       a.money_spent_total, 
       cu.first_name, 
       cu.last_name, 
       cu.email_primary, 
       cu.phone_primary 
  FROM (SELECT customer_id, YEAR(date_paid) AS date_year_paid, SUM(price) AS money_spent_total
        FROM customer_order
        GROUP BY customer_id, YEAR(date_paid)) a
       LEFT JOIN customer cu 
              ON cu.customer_id = a.customer_id 
```

最后，如果要将年份分组为列：

```
SELECT a.customer_id, 
       a.y2010 AS '2010_money_paid', 
       a.y2011 AS '2011_money_paid', 
       a.y2012 AS '2012_money_paid', 
       cu.first_name, 
       cu.last_name, 
       cu.email_primary, 
       cu.phone_primary 
FROM   (SELECT customer_id, 
               Sum(CASE 
                     WHEN Year(date_paid) = 2010 THEN price 
                     ELSE 0 
                   end) AS 'y2010', 
               Sum(CASE 
                     WHEN Year(date_paid) = 2011 THEN price 
                     ELSE 0 
                   end) AS 'y2011', 
               Sum(CASE 
                     WHEN Year(date_paid) = 2012 THEN price 
                     ELSE 0 
                   end) AS 'y2012' 
        FROM   customer_order 
        GROUP  BY customer_id) a 
       LEFT JOIN customer cu 
              ON cu.customer_id = a.customer_id 
```

**结果**

```
| 客户 ID | 2010_MONEY_PAID | 2011_MONEY_PAID | 2012_MONEY_PAID | FIRST_NAME | LAST_NAME | EMAIL_PRIMARY | PHONE_PRIMARY |
-------------------------------------------------- -------------------------------------------------- --------------------------
| 1 | 9000 | 3000 | 2000 | 鲍勃 | 史密斯 | bob@smith.com | 1112223333 |
| 2 | 4000 | 5000 | 1000 | 汤姆 | 琼斯 | 汤姆@jones.com | 2223334444 |
```

## [查看演示](http://www.sqlfiddle.com/#!2/8e497/2)

# android - 在 youtube 播放器中打开嵌入 webview 的 youtube 视频

> ID：14403357
> 
> 赞同：0
> 
> 时间：2013-01-18T16:35:32.340
> 
> 标签：android, webview, youtube

我有 webview 和一些 html + youtube 视频加载。是否可以在 youtube 应用而不是 webview 中打开 youtube 视频？

# hibernate - Hibernate - 为什么调试日志中有多个重复的选择语句？

> ID：14403359
> 
> 赞同：1
> 
> 时间：2013-01-18T16:35:34.267
> 
> 标签：hibernate, jsf, jpa, primefaces, entitymanager

服务方法返回一个像这样的对象

```
return entityManager.find(Event.class, id); 
```

在 @ViewScoped bean 内部

Event 对象有大约 40 个字段，其中一些映射到 @ManyToMany。

当我使用 JavaScript 打开 PrimeFaces 对话框时，Hibernate 运行它用于生成初始页面的所有相同查询。每当我在调用 bean 的页面上执行任何操作时，Hibernate 都会重新运行所有查询。不仅如此，同一个 SELECT 查询还在日志中重复了数十次。我尝试将 FetchType 从 EAGER 更改为 LAZY 并再次返回，没有任何变化。我尝试将我的对象从持久性上下文中分离出来，但是我的惰性集合没有被加载。经过彻底的谷歌搜索，我找不到任何相关的问题。此外，Hibernate 实际上并没有抛出异常，它只是运行缓慢，因为它在信息已经加载到内存后不必要地查询数据库。

我在想有一些简单的事情我在此过程中做错了，我希望 StackOverflow 的优秀人员能够指出我正确的方向，有人吗？

如果我在这里没有提供足够的信息，请向我询问任何可能需要的相关数据来促进解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:46:04.287

服务器端没有任何东西会导致休眠缓存它检索到的内容。因此，对服务器的每个请求都会导致休眠检索相关对象。如果您想减少这种情况，您可以使用二级缓存。然后通过 PK 检索将被缓存。

请记住，在集群中使用二级缓存将需要集群缓存解决方案。

# string - R - 从字符串中提取数字

> ID：14403360
> 
> 赞同：1
> 
> 时间：2013-01-18T16:35:37.670
> 
> 标签：string, r, max

我曾经`max(list.files(path, "my_files_v"))`读过最新的 my_files_v 版本。

该目录包含以下文件：

my_files_v1, my_files_v2, ... my_files_v9

我的代码似乎工作得非常好，因为脚本总是以最高版本读取 my_file_v，直到我来到版本 _v10。从那时起， max(list.files(..)) 总是将 _v9 检测为最大值，因此跳过了 _v10 和 _v11 等。

一种解决方案是使用 substr 或类似的方法从字符串中提取版本号，但有更好的方法吗？如果没有，有谁知道如何从字符串中提取该模式，因为我对此很穷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:38:43.837

你可以使用：

```
max(as.integer(gsub('my_files_v', '', list.files(path, "my_files_v"))) 
```

假设您的文件没有您显示的扩展名。但是，因此它们在我的文件浏览器中正确排序，我通常使用零填充命名文件。在 R 中，您可以这样做`sprintf`：

```
sprintf('%03d', 1:10) 
```

对于它的价值，要提取文件名的数字部分，您可以使用正则表达式和分组：

```
gsub('my_files_v([0-9]+)\\.Rdata', '\\1', list.files(path, 'my_files_v')) 
```

# c# - 解析文件时索引超出数组范围

> ID：14403362
> 
> 赞同：0
> 
> 时间：2013-01-18T16:35:43.573
> 
> 标签：c#, parsing, streamreader

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using System.Net;
 using System.IO;
namespace App
{
 class Program
  {
    public static List<Types> List = new List<Types>();

    static void Main(string[] args)
    {                  
    using (StreamReader read = new StreamReader(fileName.xml))
           {
               read.ReadLine();
               while (!read.EndOfStream)
               {
                   string line = read.ReadLine();
                   string[] splitline = line.Split('|');
                   Types t = new Types();

                   t.nbr = Convert.ToInt64(splitline[0].Trim());
                   t.addr = splitline[1].Trim().Length > 1 ? splitline[3] : "";
                   List.Add(t);
               }
           }
        }
    }
  }

 public class Types
  {
    public Types()
    {
    }      
   public long nbr { get; set; } 
   public string addr { get; set; }
  } 
```

我用'|'分割线 拆分后，文本不包含任何这些“|” 也是。它专门发生在这一行

```
t.addr = splitline[1].Trim().Length > 1 ? splitline[3] : ""; 
```

我没有注意到文本的解析有什么问题，因为我正在处理 null 等

下面是文本可能看起来的示例：

```
 3612|
 1412|123 Circle st Miami,FL,87678
 1420|
 3587|23 Hamm st Chicago,IL,98678 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:37:51.310

您正在尝试访问不存在的数组元素，这就是您收到[IndexOutOfRangeException](http://msdn.microsoft.com/en-us/library/system.indexoutofrangeexception%28v=vs.80%29.aspx)异常的原因。当尝试访问具有超出数组边界的索引的数组元素时，将引发异常

*在访问其元素之前检查数组长度并使用使用 try-catch 块来安全地处理异常。*

```
if(splitline > 0)
      t.nbr = Convert.ToInt64(splitline[0].Trim());  
if(splitline > 3)
      t.addr = splitline[1].Trim().Length > 1 ? splitline[3] : ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:41:36.120

而且我看不出如何使用上面的示例文本获得索引 3。
拆分行后，您最多有两个部分，除非您使用逗号作为分隔符再次拆分第二个子字符串。

```
 ....       
           while (!read.EndOfStream)
           {
               string line = read.ReadLine();
               string[] splitline = line.Split('|', StringSplitOptions.RemoveEmptyEntries);
               Types t = new Types();
               Int64 num = 0;
               if(Int64.TryParse(splitline[0].Trim(), out num))
               {
                    t.nbr = num;
                    if(splitline.Length > 1)
                    {
                         // If you want the third substring of this second string
                         // i.e the 87678 from 1412|123 Circle st Miami,FL,87678
                         // string[] parts = splitline[1].Trim().Split(',');
                         // t.addr = (parts.Length > 2 ? parts[2] : "");

                         // If you want the whole string, no index 3
                         t.addr = splitline[1].Trim();

                    }
                    List.Add(t);
               }
           } 
```

此外，对于这种程序，始终检查您是否拥有预期的所有部件确实是一种很好的做法。否则你会遇到严重的错误（索引超出范围）。
还要注意使用`Int64.TryParse`来避免异常，以防您的行的第一部分不是数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:44:11.200

```
List<Types> list = new List<Types>();
String[] lines = File.ReadAllLines(filePath);

foreach (String line in lines)
{
    String[] split = line.Split(new Char[] { '|' }, StringSplitOptions.RemoveEmptyEntries);

    Types t = new Types();
    t.nbr = (split.Length > 0) ? Convert.ToInt64(split[0].Trim()) : 0;
    t.addr = (split.Length > 3) ? ((split[1].Trim().Length > 1) ? split[3] : String.Empty) : String.Empty;

    list.Add(t);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:45:09.887

抱歉，当该行如下所示时，我完全忽略了正在发生的事情： 1420|jskljal,dfkjdklj

所以 splitline[1] 肯定有文本，这是因为该行说： t.addr = splitline[1].Trim().Length > 1 ？splitline[3] <<< 我看到 splitLine[1] 是否有长度，然后选择一个不存在的 splitline[3]。

# winapi - 如何检查窗口是否在最顶层？

> ID：14403365
> 
> 赞同：1
> 
> 时间：2013-01-18T16:35:54.127
> 
> 标签：winapi, window, topmost

> **可能重复：**
> [如何检查窗口是否“始终在顶部”？](https://stackoverflow.com/questions/5364063/how-to-check-if-window-is-always-on-top)

**在 win32 API 中给定窗口句柄时，如何验证窗口是否位于最顶层？**

我所说的“最顶层”不仅仅是指当前位于顶层的那个，例如 z 顺序，而是它是否真的*保持*在顶层。我从文档中收集到*几个*窗口实际上可以是最顶层的。

从[`DeferWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632681%28v=vs.85%29.aspx)文档中`HWND_NOTOPMOST`：

> 将窗口放置在所有非最顶层窗口的上方（即，在所有最顶层窗口的后面）。如果窗口已经是非最顶层窗口，则此标志无效。

我知道如何制作一个最顶层的窗口，但我似乎不知道如何检查它是否*是*最顶层的。我不能简单地自己跟踪状态，因为在我运行我的应用程序之前窗口已经是最上面的。

# java - 集合列表和子类初始化

> ID：14403367
> 
> 赞同：1
> 
> 时间：2013-01-18T16:35:56.650
> 
> 标签：java, oop, list, collections

它总是说最好使用如下的集合对象

1)`List st = new LinkedList();`

2)`Map mp = new HashMap();`

比

3)`LinkedList st = new LinkedList();`

4)`HashMap mp = new HashMap();`

我同意如上定义 (1,2) 我可以将相同的变量 (st,mp) 重新分配给`List`,`Map`接口的其他对象

但是在这里我不能使用仅在 中定义的方法`LinkedList`，`Hashmap`这是正确的，因为那些对于 , 是不可见`List`的`Map`。（如果磨损请纠正我）

但是，如果要定义`HashMap`or的对象`LinkedList`，我想将其用于这些中的一些特殊功能。

那么为什么说创建集合对象的最佳方法是在 (1,2)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T16:38:31.490

因为大多数时候你*不需要*特殊的方法。如果您*需要*特殊方法，那么显然您需要引用特定类型。

今天的教训：不要盲目地应用编程原理而不用自己的大脑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T16:38:38.447

> 但是，如果要定义 HashMap 或 LinkedList 的对象，我想将其用于其中的一些特殊功能。

在这种情况下，您*绝对*应该使用具体类声明变量。没关系。

使用接口的目的是表明您*只*需要该接口公开的功能，让您可以在以后更改实现。（尽管您需要注意您选择的具体实现的性能甚至行为影响。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:39:33.517

> 我同意如上定义 (1,2) 我可以将相同的变量 (st,mp) 重新分配给 List,Map 接口的其他对象

是的，这是一种称为针对接口编程的一般做法。

> 但是在这里我不能使用仅在 LinkedList, Hashmap 中定义的方法，这是正确的，因为 List,Map 不可见。（如果磨损请纠正我）

不，你是对的。

> 但是，如果要定义 HashMap 或 LinkedList 的对象，我想将其用于其中的一些特殊功能。
> 
> 那么为什么说创建集合对象的最佳方法是在 (1,2)

这不是最好的方法。如果您需要使用这些类的特定方法，则需要对具体类型的引用。如果您需要使用不应该知道内部实现的客户端类中的这些集合，那么最好只公开接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T16:42:45.110

通过接口定义服务契约。正如您所说，如果您更改给定接口的较低实现，您可以完美地做到这一点，而不会影响您当前的代码。

如果您需要特定类的任何特定行为，使用它们是绝对正确的。Maps 通常扩展`AbstractMap`自身实现的类`Map`，使子类继承这些方法。

当然，许多类都抛出`IllegalOperationException`了接口的某些已定义方法`Map`，因此实现类型的更改并不总是完美无缺的（但在大多数情况下，确实如此，因为每个地图都有一个特定的资产，使其成为给定上下文的最合适的选择）。

使用适合您的类型，而不是有人说它是正确的类型。每条规则都有例外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T16:39:04.133

因为如果您使用接口访问集合，您可以自由更改实现。例如，使用 ArrayList 代替 LinkedList，或者它的同步版本。

这主要适用于您在类的公共接口中有一个 Collection 的情况，在内部我不会打扰，只需使用您需要的。

# mysql - sql - 如何为我拥有的表创建 upsert？

> ID：14403370
> 
> 赞同：1
> 
> 时间：2013-01-18T16:36:02.863
> 
> 标签：mysql

我有这张桌子：

```
create table comment_check (
record_id int ( 10 ) unique not null AUTO_INCREMENT ,
member_id int (10) not null unique , 
has_question_comment bool ,
has_business_comment bool 
); 
```

而这个更新：

```
INSERT INTO comment_check
(member_id , has_question_comment )
VALUES
(4815162342, 1 )
ON DUPLICATE KEY UPDATE
has_question_comment = 1 
```

但是我感到困惑的是我有两个键， record_id 和 member_id ，这是真正的键。创建表时，是否应该将 member_id 列标记为键？以及如何区分查询中的两个键（member_id 和 record_id）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:45:46.957

没有必要区分它们。

无论哪个键引发“重复键”异常，MySQL 都将使用该异常进行更新。

在您的情况下，由于您没有为该`record_id`列提供值，并且该列被定义为 AUTO_INCREMENT，因此 MySQL 将为该列生成一个唯一值。因此，您的语句不可能在 record_id 列上导致“重复键”异常。

它将是“member_id”列引发重复键异常，因此 MySQL 将执行相当于以下内容的更新：

```
UPDATE comment_check
   SET has_question_comment = 1
 WHERE member_id = 4815162342 
```

* * *

实际上，在您的语句中为 member_id 提供的值可能会被解释为 2147483647，因为该值超过了 INT 的最大值。

* * *

在更一般的情况下，任一列都会引发重复键异常，例如

```
INSERT INTO comment_check (record_id, member_id) VALUES (101,1111),(202,2222);

INSERT INTO comment_check (record_id, member_id) VALUES (101,2222)
  ON DUPLICATE KEY UPDATE has_question_comment = 1 
```

两列中的任何一列都可能引发“重复键”异常，行为（AFAIK）没有很好地定义哪一行将被更新，无论是：

```
 ... WHERE record_id = 101 
```

-或者-

```
 ... WHERE member_id = 2222 
```

我相信这取决于首先抛出哪个错误。并且 MySQL 规范 (AFAIK) 没有指定检查这些唯一约束的顺序。（可能因存储引擎而异。）

# mysql - MYSQL 从 URL 左字符串返回没有记录

> ID：14403372
> 
> 赞同：0
> 
> 时间：2013-01-18T16:36:07.350
> 
> 标签：mysql, string

```
SELECT
domain_usage.url,
LEFT(url,locate('?',url)) AS cleanURL
FROM
domain_usage
WHERE
MONTH(domain_usage.login_date) =  (Now()) AND
YEAR(domain_usage.login_date) =  (Now()); 
```

不返回任何记录，也没有错误？我试图从 URL 字段中清除查询字符串.....

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:37:41.937

您的日期比较是错误的。你基本上是在尝试

```
3 = '2013-01-18 10:36:00' 
```

您需要将苹果与苹果进行比较：

```
MONTH(domain_usage.login_date) = MONTH(now()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:37:25.707

修改你的`WHERE`条件，

```
SELECT domain_usage.url, LEFT(url,locate('?',url)) AS cleanURL 
FROM domain_usage
WHERE MONTH(domain_usage.login_date) = MONTH(CURDATE()) AND 
      YEAR(domain_usage.login_date) =  YEAR(CURDATE()) 
```

# javascript - 在 node.js 应用程序中读取文件时出现奇怪的 unicode 字符

> ID：14403377
> 
> 赞同：13
> 
> 时间：2013-01-18T16:36:19.093
> 
> 标签：javascript, node.js, unicode, utf-16, utf

我正在尝试编写一个节点应用程序，它读取一组文件，将它们分成几行，然后将这些行放入一个数组中。很简单。它适用于很多文件，除了我正在使用的一些 SQL 文件。出于某种原因，当我拆分线路时，我似乎得到了某种 unicode 输出。该应用程序看起来像这样：

```
fs = require("fs");
var data = fs.readFileSync("test.sql", "utf8");
console.log(data);
lines = data.split("\n");
console.log(lines); 
```

输入文件如下所示：

```
use whatever
go 
```

输出如下所示：

```
��use whatever
go

[ '��u\u0000s\u0000e\u0000 \u0000w\u0000h\u0000a\u0000t\u0000e\u0000v\u0000e\u0000r\u0000',
  '\u0000g\u0000o\u0000',
  '\u0000' ] 
```

如您所见，文件开头有某种无法识别的字符。把数据读进去直接输出后，除了这个字符外，看起来还可以。但是，如果我随后尝试将其分成几行，我会得到所有这些类似 unicode 的字符。基本上它是所有以“\u0000”开头的实际字符。

我不知道这里发生了什么，但它似乎与文件本身中的字符有关。如果我将文件的文本复制并粘贴到另一个新文件中并在新文件上运行应用程序，它工作正常。我假设在复制和粘贴过程中会删除导致此问题的任何原因。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T17:14:53.610

您的文件是 UTF-16 Little~~大的~~字节序，而不是 UTF-8。

```
var data = fs.readFileSync("test.sql", "utf16le"); //Not sure if this eats the BOM 
```

* * *

不幸的是 node.js 只支持 UTF-16 Little Endian 或 UTF-16LE （不能从阅读文档中确定，它们之间有细微的差别；即 UTF-16LE 不使用 BOM），所以你必须使用[iconv](https://github.com/bnoordhuis/node-iconv)或以其他方式将文件转换为 UTF-8。

例子：

```
var Iconv  = require('iconv').Iconv,
    fs = require("fs");

var buffer = fs.readFileSync("test.sql"),
    iconv = new Iconv( "UTF-16", "UTF-8");

var result = iconv.convert(buffer).toString("utf8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:37:48.847

这可能是`BOM`（字节顺序标记）吗？确保您保存文件时不使用`BOM`或包含代码以去除`BOM`.

`BOM`通常在文本编辑器中是不可见的。

我知道 Notepad++ 有一个功能，您可以轻松地`BOM`从文件中删除 a。`Encoding > Encode in UTF-8 without BOM`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-16T04:12:40.000

我在 Windows 命令提示符下执行了以下操作来转换字节顺序：

```
type file.txt > file2.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-18T09:22:30.273

使用精简版的[Iconv-lite](https://www.npmjs.com/package/iconv-lite)

```
var result= "";
var iconv = require('iconv-lite');
var stream = fs.createReadStream(sourcefile)
    .on("error",function(err){
        //handle error
    })
    .pipe(iconv.decodeStream('win1251'))
    .on("error",function(err){
        //handle error
    })
    .on("data",function(data){
        result += data;
    })
    .on("end",function(){
       //use result
    }); 
```

# android - android如何裁剪图像

> ID：14403381
> 
> 赞同：0
> 
> 时间：2013-01-18T16:36:28.913
> 
> 标签：android

我需要一个代码，允许选择我将使用可拖动三角形裁剪的图像部分，该三角形选择要裁剪的图像部分。我的意思是当我想在 Viber 或 Facebook 应用程序中选择我的个人资料图片时，代码就是这样。有没有为这种情况制作的代码？

# css - 如何摆脱溢出的div行之间的垂直边距？

> ID：14403382
> 
> 赞同：0
> 
> 时间：2013-01-18T16:36:29.350
> 
> 标签：css, html, margin

我有一长串被内联阻塞的 div 溢出到下一行。即使我将边距设置为 0，我也会得到行之间的边距：http: [//jsfiddle.net/szUPZ/](http://jsfiddle.net/szUPZ/)。

![在此处输入图像描述](../Images/13b1896145405a69fbc2f96e00c401c5.png)

```
* {
    padding: 0;
    margin: 0;
}
.box {
    width: 100px;
    height: 100px;
    border: 1px solid black;
    display:inline-block;
}

#container {
    width: 300px;
    height: 500px;
    border: 2px solid red;
    overflow: auto;
} 
```

如何强制溢出行的边距为 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:38:50.297

使用垂直对齐顶部，它适用于内联/内联块元素。

```
.box {vertical-align:top} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:47:08.563

1.`float:left;`加入`.box`

2.`vertical-align:top`加入`.box`

3.`font-size:0px;`加入`#container`

和许多其他方法:)

# algorithm - 布隆过滤器使用

> ID：14403383
> 
> 赞同：19
> 
> 时间：2013-01-18T16:36:32.043
> 
> 标签：algorithm, data-structures, bloom-filter

我正在努力理解布隆过滤器的有用性。我得到了它的基本逻辑、空间压缩、快速查找、误报等。我只是不能把这个概念放到现实生活中，因为它是有益的。一种常见的应用是在 Web 缓存中使用布隆过滤器。我们使用布隆过滤器来确定给定的 URL 是否在缓存中。为什么我们不简单地访问缓存来确定呢？如果我们得到一个是，我们仍然需要去缓存来检索网页（可能不存在），但如果不是，我们可以使用缓存得到相同的答案（这可能为快速查找而优化反正？）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-18T17:03:20.463

布隆过滤器设计用于误报是非常糟糕的事情并且误报是可以接受的情况。

例如，假设您正在制作 Web 浏览器并且拥有已知的诈骗网站黑名单。您的黑名单非常庞大 - 以数百 GB 为单位 - 因此您无法将其与浏览器一起发布。但是，您可以将其存储在您自己的服务器上。在这种情况下，您可以为浏览器提供一个包含所有 URL 的适当大小的 Bloom 过滤器。在访问一个站点之前，您在过滤器中查找它。然后，如果您得到“否”的回答，则可以保证该 URL 没有被列入黑名单并且可以访问该站点。如果您得到“是”的答案，则该站点可能是邪恶的，因此您可以让浏览器调用您的主服务器以获得真正的答案。在不牺牲准确性的情况下，您可以在此处保存对服务器的大量调用，这一事实很重要。

缓存的想法与此设置类似。您可以查询过滤器以查看页面是否在缓存中。如果您得到“否”的答案，则可以保证它没有被缓存，并且可以执行昂贵的操作来从主源中提取数据。否则，您可以检查缓存以查看它是否真的存在。在极少数情况下，您可能需要检查缓存，看看它不存在，然后从主源中提取，但您永远不会意外错过缓存中的某些内容。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T19:26:18.830

*当满足*以下两个条件时，布隆过滤器可能很有用：

*   假阴性是不可接受的
*   相对于 Bloom Filter 中的查找成本，查找成本较高

第一点非常简单。当布隆过滤器可以存储在主内存中时，第二点通常变得很重要，但实际查找可能会导致数据库命中，相对于在键上执行一定数量的哈希然后在内存中查找（即布隆过滤器）。

如果仅满足上述条件之一，则布隆过滤器不是解决问题的最佳方案。

当人们可以消除昂贵的查找时，就会节省成本，因为众所周知，不可能找到匹配项。这是第一个点的值 - 布隆过滤器不会产生误报，因此如果在过滤器中未找到匹配项，则没有必要进入下一个更昂贵的步骤，即检索与键关联的数据。

当过滤器命中时，需要进行昂贵的查找来验证命中（消除误报）并检索相关数据。这里有可能由于误报而找不到任何东西，这就是为什么需要调整过滤器以将这种风险降至可接受的水平。功能性布隆过滤器必须具有低误报率，因此查找的总体成本仍然很低。

现在，如您所说，如果您的缓存已经针对快速查找进行了优化，那么布隆过滤器的实用性可能会存在问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T18:11:58.317

问题是你的例子不是很好。

在 web 缓存中，如果 url 不存在，无论如何您都必须对网络进行昂贵的调用，因此节省磁盘访问并不是什么大问题。因此，您对此提出质疑是正确的（并且 Diego Basch 的评论没有经过深思熟虑，恕我直言）。

所以我去寻找你为什么使用那个例子。事实证明，维基百科文章提到鱿鱼网络缓存使用布隆过滤器。但它们*没有*按照您描述的方式使用。相反，它们用于决定从一组分布式缓存中选择哪个缓存。并且它们主要用于节省空间（因为 squid 可以缓存*很多*对象，所以这些表会非常大）。

有关 squid 和布隆过滤器的更多信息，请参阅[http://wiki.squid-cache.org/SquidFaq/CacheDigests](http://wiki.squid-cache.org/SquidFaq/CacheDigests)

否则，来自 templatetypedef 的另一个答案很好 - 检查坏网站是一个更好的例子。

# visual-studio-macros - 如何从宏中引用解决方案

> ID：14403394
> 
> 赞同：0
> 
> 时间：2013-01-18T16:37:12.857
> 
> 标签：visual-studio-macros

我想用这个宏来格式化我的代码：
[http ://www.kodefuguru.com/post/Format-Solution.aspx](http://www.kodefuguru.com/post/Format-Solution.aspx)

我想我需要换行：

```
Dim sol As Solution = DTE.Solution 
```

我的解决方案出现在 Visual Studio 2010 中，如下所示：
**Solution 'ABC.Mmc.Client' (16 Projects)**

我尝试将行更改为：

```
Dim sol As Solution = ABC.Mmc.Client.Solution 
```

但这不起作用。
我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:04:17.763

`DTE.Solution`指当前加载的解决方案。保持代码不变，加载您的解决方案，一切顺利。

# mysql - 用于在线商店的 MySQL 数据库

> ID：14403397
> 
> 赞同：0
> 
> 时间：2013-01-18T16:37:17.027
> 
> 标签：mysql

我正在尝试建立一个网站，用户可以在其中上传产品以相互销售。

我目前拥有的是许多类别，其中每个类别在数据库中都有自己的表。列是`UserID`、`ProdID`、`Price`、`Description`等，但在每个类别表中都是相同的。

**我应该把它们都放在同一张桌子上吗？**我问是因为现在我发现很难管理一种方法让用户在不搜索每个表格的情况下编辑上传的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:49:52.500

正确设计的查询可以轻松地查询具有数百万行的正确索引的表，并获得非常快速的查询结果。没有理由为每个类别设置不同的表格。

您只需要确保您在表上为要过滤、排序或连接的列有适当的索引，并且在进行查询时使用索引（即仅对索引字段进行过滤、排序或连接，并确保您没有对禁止索引使用的表中的派生值进行查询/排序）。您还需要确保分配了足够的内存，以便索引可以完全驻留在内存中。

一般来说，您应该始终使您的架构尽可能简单：

*   不要为具有相同属性的对象创建单独的表
*   仅将对象的属性添加到与该对象直接相关的表中（即规范化）
*   使用适当的外键（一对多关系）或连接表（多对多关系）表达对象之间的关系。
*   使用正确的字段类型来存储您需要存储的数据（例如，对日期使用日期/日期时间字段而不是整数时间戳或 varchar）

# visual-studio - Visual Studio - 构建之前 - TypeScript 编译

> ID：14403398
> 
> 赞同：1
> 
> 时间：2013-01-18T16:37:19.123
> 
> 标签：visual-studio, asp.net-mvc-4, build-process, typescript

有没有办法设置“BeforeBuild”步骤，将每个 TypeScript 文件编译为特定目录中自己的 Javascript 文件？例如，我希望将所有 TypeScript 文件编译为解决方案中“\tsbuild”目录中的单个 Javascript 文件。

现在，编译器正在将所有 TypeScript 文件合并到指定目录中的一个 Javascript 文件中——如下所示：

```
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; --out @(TypeScriptCompile ->'&quot;$(ProjectDir)tsbuild\buildall.js&quot; &quot;%(fullpath)&quot; ', ' ')" />
  </Target> 
```

然后，一旦它们在一个目录中，目标是配置 Bundle Configuration 以在发布期间拾取并缩小它们。另一个目的是帮助在开发过程中进行故障排除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:08:31.887

一旦 0.8.2.0 发布（很快！），您将能够将目录传递给 --out 以获得所需的行为。目前，还没有一种特别优雅的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T01:48:47.487

随着 TypeScript 0.8.2 的发布，我进行了一些构建更改，现在我让它按照我想要的方式工作。

有关编译和保存的更多信息，请查看：[http ://typescript.codeplex.com/wikipage?title=Compile-on-Save](http://typescript.codeplex.com/wikipage?title=Compile-on-Save)

**首先我修改了我的 *.csproj，添加了：**

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptIncludeComments>true</TypeScriptIncludeComments>
    <TypeScriptSourceMap>true</TypeScriptSourceMap>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptIncludeComments>false</TypeScriptIncludeComments>
    <TypeScriptSourceMap>false</TypeScriptSourceMap>
  </PropertyGroup>
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" /> 
```

**然后，我创建了一个后期构建步骤，使用此帖子复制我的文件** [https://stackoverflow.com/a/585188/1220302](https://stackoverflow.com/a/585188/1220302)

将此添加到后期构建

```
for /R "$(ProjectDir)modules\" %%f in (*.js, *.map) do copy %%f "$(ProjectDir)build\" 
```

我希望对某人有所帮助.. =)

# c# - 如何遍历未知数量的模型并将该模型中的数据与控制器中的另一个模型进行比较？

> ID：14403400
> 
> 赞同：0
> 
> 时间：2013-01-18T16:37:21.770
> 
> 标签：c#, asp.net-mvc

所以这里的情况。我是 MVC 的新手，我正在寻找最简单的方法来迭代未知数量的一个模型，以根据来自另一个模型的数据不断寻找该模型的一个属性的最高整数值。

为了给你一个更好的想法，这里有一些背景：
我有一个应用程序设置允许用户选择 1、2、3 或 4。一旦选择了一个数字，应用程序必须搜索未知数量的模型其中 1、2、3、4 具有不同的整数值。模型一可能有 6、8、7、2，模型二可能有 9、7、6、3。我需要先读入 1、2、3 ，或来自第一个模型的 4，然后基于该选择（假设为 2）检查第 2 列的另一个模型的每个实例，以寻找最高值（在此示例中，来自第二个模型的第二个示例的 8）。

在此示例中，这是第一个确定要检查哪一列的模型：

```
public class Input
{
    public int ID { get; set; }
    public string Name { get; set; }
    public bool GreenCircle { get; set; }
    public bool BlueSquare { get; set; }
    public bool BlackDiamond { get; set; }
    public bool TerrainPark { get; set; }
} 
```

这是第二个模型，其数量未知，因为我希望能够随时添加和删除度假村：

```
public class Resort
{
    public int ID { get; set; }
    public String Name { get; set; }
    public int BlackDiamond { get; set; }
    public int BlueSquare { get; set; }
    public int GreenCircle { get; set; }
    public int TerrainPark { get; set; }
} 
```

因此，用户将选择 BlackDiamond，然后应用程序必须搜索每个度假村模型以在 BlackDiamond 属性中找到具有最高值的模型。

到目前为止，我的想法是拥有一个具有两个模型的 DBContext 的控制器，但我不知道如何正确迭代第二个模型的未知数量。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:47:04.370

类似于@Paul 的回答，但使用您的课程：

```
List<Resort> resorts = GetResortsFromDatabase();
if (input.BlackDiamond)
{
    return resorts.OrderByDescending(x => x.BlackDiamond).First();
}
else if (input.BlueSquare)
{
    return resorts.OrderByDescending(x => x.BlueSquare).First();
}
// etc... 
```

如果您需要更复杂的逻辑，则可以使用`foreach`循环：

```
foreach(var resort in GetResortsFromDatabase())
{
    if (input.BlackDiamond && resort.BlackDiamond > 5) 
    {
        DoSomething(input, resort); // This will do something to the input and each resort.
    }
} 
```

If you need help writing the `GetResortsFromDatabase()` function, then you need to ask a question like "How do I get multiple records from my database" and tell us how you're talking to the database. (Linq2Sql? Entity Framework? Something else?).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:46:06.087

我相信其他人会做得更好，但这样的事情是否符合要求？

```
class MyModel
{
    public int[] PropertyValues = new int[4];
}

class Main
{
    IEnumerable<MyModel> models;

    public void MyFunc()
    {
        var models = new List<MyModel>();

        models.Add(new MyModel() { PropertyValues = new int[] { 6, 8, 7, 2 } });
        models.Add(new MyModel() { PropertyValues = new int[] { 9, 7, 6, 3 } });

        var index = 1;

        var maxValue = models.Max(m => m.PropertyValues[1]);
    }
} 
```

# javascript - 将 Javascript 变量传递给 Rails 路径

> ID：14403402
> 
> 赞同：0
> 
> 时间：2013-01-18T16:37:29.327
> 
> 标签：javascript, ruby-on-rails

有没有办法将 Javascript 变量传递给 Rails 路径？

例如，我的 html.erb 文件中有：

```
<script>
for (i=1, i< numSteps, i++){
   var step = i
   td.innerHTML = <%= project_step_path(@project, step) %>
}
</script> 
```

但这不起作用，因为 step 是一个 Javascript 变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:39:57.423

在这种情况下，Ruby 将在服务器上运行。它会生成一些文本。该文本被发送到浏览器。浏览器会将其解析为 HTML 和 JS。

您不能在单个 HTTP 请求/响应中进行双向同步通信。

所以不行。

每次您想从客户端 JavaScript 向服务器端 Ruby 发送数据时，您都需要发出一个新的 HTTP 请求。

可以通过以下方式发出此类请求：

*   环境`location`
*   提交表格
*   使用 XMLHttpRequest 对象
*   生成可以具有外部`src`
*   和许多其他方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:39:19.417

*   JavaScript 在浏览器上运行
*   Rails 在服务器上运行。

他们不能一起跑。

# bash - 需要帮助使用 awk 和 sed 修剪 CSV 文件而不破解它

> ID：14403412
> 
> 赞同：1
> 
> 时间：2013-01-18T16:37:53.787
> 
> 标签：bash, csv, awk, sed

我搜索了堆栈，但遇到了一个特定的 CSV 文件：

我有一个大的 CSV 文件，格式分为两列：

```
Name    Extension
Brian Aducci    6598
Jeff Alexander  6661
Sara Alfieri    6789 
```

我想保留扩展名并将名称修剪为用户名：

```
Name    Extension
BAducci 6598
JAlexander 6661
SAlfieri 6789 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:54:23.730

这条短线应该给你你想要的：

```
awk 'NR>1{$0=substr($1,0,1)$2" "$3}1' file 
```

测试

```
kent$  echo "Name    Extension
Brian Aducci    6598
Jeff Alexander  6661
Sara Alfieri    6789"|awk 'NR>1{$0=substr($1,0,1)$2" "$3}1'
Name    Extension
BAducci 6598
JAlexander 6661
SAlfieri 6789 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:52:32.827

awk would be my choice

```
awk 'NF>2{ for (i=1;i<NF -1;i++){ initials=initials substr($i,0,1) }; print initials $(NF-1), $NF}' x.txt 
```

which checks the number of fields (NF) is greater than 2 then loops over fields 1 - NF-1 then takes the first letter of each and puts it into the initials variable. Then we print out the initials the last name and the extension.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:46:04.653

让我们假设它不是 2，而是“至少 3”列... fisname lastname extension

也许有超过 1 个名字（这种情况经常发生）

让我们假设：登录是第一列的第一个字符，+第 n-1 列（=名称）

你会这样做：

```
gawk '(NR == 1) { print ; next ;} /./ { name=NF-1 ; print substr($1,1,1) $name " " $NF }' /the/file 
```

如果你有这将工作

```
Name    Extension
firstname1                lastname1   extension1
firstname2a  firsntname2b lastname2   extension2
... 
```

（即无论有多少个名字，1 个或多个）（但是有多少空格或制表符分隔每个字段）

该`(NR == 1) { print ; next ; }`部分是“按原样”打印第一（标题）行，然后“下一个”打印到其他行。如果你没有标题，你可以把它拿出来。

在其他行上，NR>1，所以只有第二个模式（`/./`，意思是“如果行不为空”）适用，它会打印你需要的内容（如果有奇怪的名字，比如：john john name1 name2，请更改它，但是应该很少见）

您还可以使用 gnu awk (或 nawk) 'tolower' 强制某些内容为小写：

```
gawk '(NR == 1) { print ; next ;} /./ { name=NF-1 ; print tolower(substr($1,1,1)) tolower($name) " " $NF }' /the/file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:00:28.880

这实际上更容易`sed`：

```
$ cat file
Name   Extension
Brian  Aducci     6598
Jeff   Alexander  6661
Sara   Alfieri    6789

$ sed -r '2,$s/(.)\w+\s+/\1/' file
Name        Extension
BAducci     6598
JAlexander  6661
SAlfieri    6789 
```

一种方法`awk`：

```
$ awk 'NR>1{sub(/\w+\s+/,substr($0,1,1),$0)}1' file
Name        Extension
BAducci     6598
JAlexander  6661
SAlfieri    6789 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T16:46:37.327

有什么办法可以转换`Brian Aducci`成`BAducci`？

它是名字的第一个字符和姓氏吗？如果是，那么下面应该可以工作：

```
{read x; echo $x; while read x y; do echo ${x:0:1}$y; done; } <large_file >output_file 
```

sed 方法：

```
sed -r '1!s/^(.)[^ ]* */\1/' large_file >output_file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T16:50:18.727

尝试这个

`awk '{if( NR==1 ){print $1" "$2; next}}{a=substr($1,1,1); print a$2" "$3}' temp.txt`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T20:49:29.407

这与 Sudo_O 的解决方案基本相同`sed`。使用`sed`这种东西的麻烦在于，有许多版本`sed`根本不支持所使用的功能。（例如，`-r`是一个非标准选项，用于`+`在正则表达式中制作一个魔术字符。许多`sed`根本不提供对 的支持`+`）

```
perl -pe 's/^(.)/\S*\s/$1/ if $. > 1' input-file 
```

# java - 处理 ServletResponse 的 .get{Writer,OutputStream}() 返回的 Writer/OutputStream：做什么和不做什么？

> ID：14403414
> 
> 赞同：1
> 
> 时间：2013-01-18T16:37:57.043
> 
> 标签：java, servlets

我第一次涉足 Java servlet 编程，由于我更熟悉“服务器端”编程，因此我养成了处理 Writers 和 OutputStreams 的一些习惯。但是，也许这些习惯在编写 servlet 时并不适合，可用的 Javadoc 并没有明确回答我下面的两个问题。

第一个问题：您是否应该在尝试写入时捕获抛出的 IOExceptions？如果您不这样做，那么在这种情况下 servlet 容器的默认行为是什么（即 HTTP 返回码是什么）？

第二个问题：您是否应该让 servlet 引擎为您关闭 OUTputStream/Writer？在servlet中自己关闭它有什么危险吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:44:50.003

> 第一个问题：您是否应该在尝试写入时捕获抛出的 IOExceptions？如果您不这样做，那么在这种情况下 servlet 容器的默认行为是什么（即 HTTP 返回码是什么）？

从 servlet 抛出的随机异常的默认错误代码通常是 503（内部服务器错误），但我认为没有要求（即不同的 servlet 容器可能会做不同的事情）。您是否应该捕获异常并自己处理它完全取决于您的 servlet 需要具有的行为（也许您对不同情况有不同的错误代码，也许即使您无法读取所有数据，您也想继续， ETC。）。

> 第二个问题：您是否应该让 servlet 引擎为您关闭 OUTputStream/Writer？在servlet中自己关闭它有什么危险吗？

我相信大多数（全部？）servlet 引擎会为您关闭流，但是我仍然会说最好自己关闭它。

# mysql - 如何更新 MySQL SET 值 WHERE 某些列内容 LIKE 另一个表列内容

> ID：14403415
> 
> 赞同：2
> 
> 时间：2013-01-18T16:37:58.567
> 
> 标签：mysql, insert-update, sql-like

我有一张带有城市名称表（citytable）的表

```
idcity  |   cityname     |  statename  |    codenumber
   1    |   Los Angeles  |   state2    |     ...
   2    |   New York     |   state3    |     ...
   3    |   New Jersey   |   state3    |     ... 
```

代号城市表（codetable）

```
 id |  city     | codenumber
   1 |  angeles  |   031
   2 |  york     |   064
   3 |  jersey   |   075 
```

怎么做`SET or INSERT or UPDATE data 'codenumber' FROM 'codetable' fields INTO 'codenumber' column FROM citytable WHERE 'city' FROM codetable LIKE '%cityname%' FROM 'citytable'`？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:39:57.370

利用`UPDATE with join`

```
UPDATE  cityTable a
        INNER JOIN codeTable b
            ON a.ID = b.ID
SET     a.codeNumber = b.codeNumber 
```

但我怀疑这里`ID`是`AUTO_INCREMENT`ed 列，如果是这样，

```
UPDATE  cityTable a
        INNER JOIN codeTable b
            ON a.cityName LIKE CONCAT('%', b.city,'%')
SET     a.codeNumber = b.codeNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:42:59.843

@JW 和我或多或少同时到达以下位置，但 JW 准时获得优势！

```
UPDATE citytable a
INNER JOIN codetable b ON  a.cityname LIKE CONCAT('%',b.city,'%')
SET a.codenumber = b.codenumber 
```

* * *

在 Morgan 要求在 SELECT 中执行此操作的 php 示例后更新，然后使用 UPDATE 循环。

```
<?php
#Fill out the four variables below.
#
#This is just an example!
#If you are going to use this for real, you want to put the top
#4 variables in a separate file and include that file into this
#file via phps include directive.  That separate file needs
#to be in a tightly security controlled directory, because
#your database password is in the file.
#
#For security reasons, the variables below must not come from
#user supplied data (from a POST or GET or the SESSION variables).
# 
```

```
$dbName = '';
$hostName = '';
$username = '';
$password = '';

$dbh = new PDO("mysql:dbname=$dbName;host=$hostName",
    $username, $password);
$dbh->setAttribute(PDO_ATTR_ERRMODE, PDO_ERRMODE_EXCEPTION);
$sqlSelect = "
    SELECT cityname, codenumber
    FROM city a
    INNER JOIN codetable b ON 
        a.cityname LIKE CONCAT('%',b.city,'%');";
$sqlUpdate = "
    UPDATE citytable SET codenumber = ? WHERE cityname = ?";
$rows = $dbh->query($sqlSelect)->fetchAll();
$sth = $dbh->prepare($sqlUpdate);
foreach($rows as $row) {
    $codeNumber = $row['codenumber'];
    $cityName = $row['cityname'];
    $sth->execute(array($codeNumber,$cityName));

} 
```

# comparison - Java比较库

> ID：14403418
> 
> 赞同：-5
> 
> 时间：2013-01-18T16:38:05.607
> 
> 标签：comparison, guava, java

是否有一个 Java 库可以让我进行比较操作，例如

```
try {
  verify(a).isEqualTo(b);
  verify(a).isGreaterThan(b);
  verify(a).contains(b);
catch (AssetionError e) {
  ..
} 
```

我在想[番石榴](http://code.google.com/p/guava-libraries/)，但找不到任何东西，也许我看的不够努力；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:41:36.293

听起来像[Hamcrest](http://code.google.com/p/hamcrest/wiki/Tutorial)可能很有趣。例如

```
 assertThat(actualPrice, greaterThan(minimumPrice)); 
```

它通常用于单元测试，但它只是提供一个[DSL](http://en.wikipedia.org/wiki/Domain-specific_language)，并且它的使用不限于测试域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:41:54.513

你是说先决条件吗？Guava 有一系列可以在方法中使用的前提条件。例如，您可以使用：

```
 Preconditions.checkArgument(count > 0, "must be positive: %s", count); 
```

如果检查失败，将抛出`IllegalArgumentException`相关消息。

[http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/base/Preconditions.html](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/base/Preconditions.html)

# vim - Vim 更改 .sml 文件的 shiftwidth

> ID：14403420
> 
> 赞同：5
> 
> 时间：2013-01-18T16:38:11.703
> 
> 标签：vim, sml, indentation

Win 7 下的 Vim 将我的 shiftwidth 设置更改为我不希望仅用于 .sml 文件的设置。

我想要的是所有内容都只能缩进空格，并且所有内容都始终是 4 个空格。这是我当前 _vimrc 文件的内容，尽管我尝试了很多变体：

```
set nocompatible
set expandtab
set tabstop=4
set shiftwidth=4
set softtabstop=4

set guifont=Consolas:h9:cANSI
source $VIMRUNTIME/vimrc_example.vim
source $VIMRUNTIME/mswin.vim
behave mswin

filetype plugin indent on

" Set the tab width
let s:tabwidth=4
exec 'set tabstop='    .s:tabwidth
exec 'set shiftwidth=' .s:tabwidth
exec 'set softtabstop='.s:tabwidth 
```

当我第一次在没有加载文件的情况下启动 Vim 时，`:set shiftwidth`返回`shiftwidth=4`. 当我打开 .py 或 .php 文件时，它仍然返回`shiftwidth=4`. 但是，当我打开一个 .sml 文件或仅使用 .sml 扩展名保存空白文件时，它会更改为`shiftwidth=2`. 手动设置`:set shiftwidth=2`适用于该会话，但我每次打开 .sml 文件时都必须这样做。

它只影响带有打开的 .sml 文件的缓冲区。未保存的缓冲区或同时打开其他文件类型的缓冲区显示 shiftwidth=4。

我之前没有使用文件类型插件缩进的东西，但经过一番搜索，这似乎是问题所在。我的 ftplugin 文件夹中没有文件，所以我添加`filetype plugin indent on`到我的 _vimrc，创建 sml.vim 并将其放入 ft​​plugin 文件夹中（再次尝试了许多变体：

```
set expandtab
set tabstop=4
set shiftwidth=4
set softtabstop=4

" Set the tab width
let s:tabwidth=4
exec 'set tabstop='    .s:tabwidth
exec 'set shiftwidth=' .s:tabwidth
exec 'set softtabstop='.s:tabwidth 
```

我知道 sml.vim 正在被读取，因为我一开始在其中放入了错误，并且它们被捕获了。

不确定这是否相关，但在我的 indent.vim 中没有任何关于 .sml 的内容，而且我的 indent 文件夹是空的。

然而，每次我加载 .sml 文件时，Vim 仍然设置 shiftwidth=2。我想知道为什么。

更新：我说的空缩进文件夹是 vim\vimfiles\indent。在下面的答案和评论之后，我搜索了 sml.vim 并找到了另一个缩进文件夹 vim\vim73\indent。我编辑了 sml.vim 并将 shiftwidth=2 更改为 shiftwidth=4 ，问题就解决了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:48:37.537

这很可能是由于某些文件类型插件。如果它是默认的（即与 vim 本身一起提供），正确的修复将是放置适当的集合

```
setlocal ts< sw< sts< " Set ts, sw and sts to global values 
```

^ 进入`~/.vim/after/ftplugin/sml.vim`. 但是在 vim 发行版中没有这样的设置。在这种情况下，上述解决方案可能有效（取决于此非标准插件所在的位置），但最好先检查`verb set sw`并检查定义的插件`&sw`是 a) 您真正需要的插件还是 b) 可配置的，所以可以在不使用`after/`目录的情况下禁用该设置。

**更新**：看起来它实际上是默认的，但是`indent`脚本而不是`ftplugin`@Nikita Kouevda 指出的那样。因此，您需要将此行放入`~/.vim/after/indent/sml.vim`.

* * *

```
" Set the tab width
let s:tabwidth=4
exec 'set tabstop='    .s:tabwidth
exec 'set shiftwidth=' .s:tabwidth
exec 'set softtabstop='.s:tabwidth 
```

改用这个：

```
let s:tabwidth=4
let &tabstop     = s:tabwidth
let &shiftwidth  = s:tabwidth
let &softtabstop = s:tabwidth 
```

或者

```
let [&tabstop, &shiftwidth, &softtabstop]=repeat([4], 3) 
```

# spring-security - 使用 Spring Security 在登录时创建用户

> ID：14403432
> 
> 赞同：1
> 
> 时间：2013-01-18T16:38:44.300
> 
> 标签：spring-security, data-migration

我们如何使用 Spring Security 将用户从一个数据库迁移到另一个数据库，即时且对用户透明？

背景

我们在 Web 应用程序中使用 Spring Security 和基于表单的身份验证。我们的配置使用由用户数据库支持的标准 Spring JDBC 组件。但是，我们还有另一个来自旧系统的用户数据库，与新系统相比，它的用户数量大约是新系统的十倍。我们也希望允许旧数据库中的用户登录。对于用户来说，这应该是完全透明的。

由于旧数据库中的大多数用户不再处于活动状态，我们不想将它们全部迁移到新数据库中。出于性能原因，我们希望保持新用户数据库尽可能小，同时仍包含所有*活动*用户。一段时间后，我们想断开旧用户数据库，有效地删除所有非活动用户。

我们提出的想法是按需迁移用户。当不存在的用户（不在新数据库中）尝试登录时，我们要检查用户是否可以针对旧用户数据库进行身份验证，在这种情况下，将用户迁移到新数据库并自动登录。

Spring Security 框架中有很多扩展点，问题是哪些适合我们的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:58:30.230

我认为最好的地方是 org.springframework.security.authentication。**身份验证管理器**。您可以准备两个不同的 AuthenticationProvider 实例（用于新旧数据库）。如果您将它们注入到默认的 AuthenticationManager 中（实际上它是 ProviderManager 类），那么它将遍历两个提供者并为您提供第一个成功的身份验证结果。您的自定义 AuthenticationManager 将具有稍微不同的逻辑：

*   它会知道两个提供者之间的区别
*   首先它将检查新数据库
*   在 BadCredentialsException 的情况下，它将检查旧数据库
*   如果用户通过旧数据库进行身份验证，那么它将复制帐户记录
*   最好回忆一下第一个 AuthenticationProvider 以确保一切正常

# ruby - 如何检查 DataMapper 是否已连接？

> ID：14403440
> 
> 赞同：0
> 
> 时间：2013-01-18T16:39:13.620
> 
> 标签：ruby, datamapper

Active Record 有一个调用方法`connected?`，如果 Active Record 连接则返回 true。DataMapper 是否有等价物？我在 API 文档中找不到任何内容。如果没有，检查这个的最合适的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:35:33.590

DataMapper 是多适配器 ORM 并期望每个适配器保持与其数据库的连接。有些适配器甚至没有连接，比如 yaml 或内存。因此，通常，您无法知道 DataMapper 是否已连接。

# java - 使用有效的客户端证书时出现 HttpClient 403 错误

> ID：14403444
> 
> 赞同：4
> 
> 时间：2013-01-18T16:39:27.570
> 
> 标签：java, ssl, certificate, apache-commons-httpclient

我正在尝试使用 Java 自动执行网站上的一些任务。我有该网站的有效客户端（当我使用 firefox 登录时有效），但是当我尝试使用 http 客户端登录时，我不断收到 403 错误。请注意，我希望我的信任库信任任何东西（我知道它不安全，但此时我并不担心）。

这是我的代码：

```
 KeyStore keystore = getKeyStore();//Implemented somewhere else and working ok
    String password = "changeme";

    SSLContext context = SSLContext.getInstance("SSL");
    KeyManagerFactory kmfactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
    kmfactory.init(keystore, password.toCharArray());
    context.init(kmfactory.getKeyManagers(), new TrustManager[] { new X509TrustManager() {
        @Override
        public void checkClientTrusted(java.security.cert.X509Certificate[] arg0, String arg1)
                throws CertificateException {
        }
        @Override
        public void checkServerTrusted(java.security.cert.X509Certificate[] arg0, String arg1)
                throws CertificateException {
        }

        @Override
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    } }, new SecureRandom());
    SSLSocketFactory sf = new SSLSocketFactory(context);

    Scheme httpsScheme = new Scheme("https", 443, sf);
    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(httpsScheme);
    ClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);
    HttpClient client = new DefaultHttpClient(cm);

    HttpGet get = new HttpGet("https://theurl.com");
    HttpResponse response = client.execute(get);
    System.out.println(EntityUtils.toString(response.getEntity(), "UTF-8")); 
```

最后一条语句打印出 403 错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T16:26:56.007

我自己想通了。出现 403 错误是因为 Java SSL 没有选择我的客户端证书。

我调试了 SSL 握手，发现服务器要求提供由权威列表颁发的客户端证书，而我的客户端证书的颁发者不在该列表中。所以 Java SSL 根本无法在我的密钥库中找到合适的证书。看起来 Web 浏览器和 Java 实现 SSL 的方式略有不同，因为我的浏览器实际上会询问我要使用哪个证书，而不管服务器证书在客户端证书颁发者方面要求什么。

在这种情况下，服务器证书是罪魁祸首。它是自签名的，它通知的可接受的发行人列表不完整。这与 Java SSL 实现不能很好地混合。但是服务器不是我的，我对此无能为力，除了抱怨巴西政府（他们的服务器）。没有进一步的到期，这是我的工作：

首先，我使用了信任任何东西的 TrustManager（就像我在问题中所做的那样）：

```
public class MyTrustManager implements X509TrustManager {
    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
    }
    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
    }
    public X509Certificate[] getAcceptedIssuers() {
        return null;
    }
} 
```

然后我实现了一个密钥管理器，它始终使用我想要的 PKCS12 (.pfx) 证书中的密钥：

```
public class MyKeyManager extends X509ExtendedKeyManager {

KeyStore keystore = null;
String password = null;
public MyKeyManager(KeyStore keystore, String password) {
        this.keystore = keystore;
        this.password = password;
}

@Override
public String chooseClientAlias(String[] arg0, Principal[] arg1, Socket arg2) {
    return "";//can't be null
}

@Override
public String chooseServerAlias(String arg0, Principal[] arg1, Socket arg2) {
    return null;
}

@Override
public X509Certificate[] getCertificateChain(String arg0) {
    try {
        X509Certificate[] result = new X509Certificate[keystore.getCertificateChain(keystore.aliases().nextElement()).length];
        for (int i=0; i < result.length; i++){
            result[i] = (X509Certificate) keystore.getCertificateChain(keystore.aliases().nextElement())[i];
        }
        return result ;
    } catch (Exception e) {
    }
    return null;
}

@Override
public String[] getClientAliases(String arg0, Principal[] arg1) {
    try {
        return new String[] { keystore.aliases().nextElement() };
    } catch (Exception e) {
        return null;
    }
}

@Override
public PrivateKey getPrivateKey(String arg0) {
    try {
        return ((KeyStore.PrivateKeyEntry) keystore.getEntry(keystore.aliases().nextElement(),
                new KeyStore.PasswordProtection(password.toCharArray()))).getPrivateKey();
    } catch (Exception e) {
    }
    return null;
}

@Override
public String[] getServerAliases(String arg0, Principal[] arg1) {
    return null;
}

} 
```

如果我的 pfx 还包含其颁发者证书，这**将起作用。**但它没有（耶！）。所以当我使用上面的密钥管理器时，我得到了一个 SSL 握手错误（对等体未通过身份验证）。仅当客户端发送服务器信任的证书链时，服务器才会对客户端进行身份验证。由于我的证书（由巴西机构颁发）不包含其颁发者，因此其证书链仅包含其自身。服务器不喜欢这样并拒绝对客户端进行身份验证。解决方法是手动创建证书链：

```
...
@Override
    //The order matters, your certificate should be the first one in the chain, its issuer the second, its issuer's issuer the third and so on.
public X509Certificate[] getCertificateChain(String arg0) {
            X509Certificate[] result = new X509Certificate[2];
            //The certificate chain contains only one entry in my case
            result[0] = (X509Certificate) keystore.getCertificateChain(keystore.aliases().nextElement())[0];
            //Implement getMyCertificateIssuer() according to your needs. In my case, I read it from a JKS keystore from my database
            result[1] = getMyCertificateIssuer();
            return result;
}
... 
```

之后，只需充分利用我的自定义密钥和信任管理器即可：

```
 InputStream keystoreContents = null;//Read it from a file, a byte array or whatever floats your boat
            KeyStore keystore = KeyStore.getInstance("PKCS12");
            keystore.load(keystoreContetns, "changeme".toCharArray());
            SSLContext context = SSLContext.getInstance("TLSv1");
            context.init(new KeyManager[] { new MyKeyManager(keystore, "changeme") },
                            new TrustManager[] { new MyTrustManager() }, new SecureRandom());
            SSLSocketFactory sf = new SSLSocketFactory(context);
            Scheme httpsScheme = new Scheme("https", 443, sf);
            SchemeRegistry schemeRegistry = new SchemeRegistry();
            schemeRegistry.register(httpsScheme);
            ClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);
            HttpClient client = new DefaultHttpClient(cm);
            HttpPost post = new HttpPost("https://www.someserver.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:11:29.383

首先，无论您选择如何解决问题，都不要使用信任任何东西的信任管理器。从客户端的角度来看，它与将要使用的客户端证书无关，但它确实打开了对潜在 MITM 攻击的连接（尽管 MITM 攻击者在冒充合法客户端时仍然存在问题）。

对于客户端证书方面，您可以修复您的密钥库以将您的客户端证书条目设置为使用完整链，而不是使用您自己的密钥管理器以定制方式每次都重新构建链，如[本答案](https://stackoverflow.com/a/9300727/372643)中所述。由于您从 PFX 文件 (PKCS#12) 开始，因此最好先使用 将密钥库转换为 JKS `keytool -importkeystore`，如[本答案](https://stackoverflow.com/a/11954816/372643)中所述。

# javascript - 在 angularjs 中使用 jQuery UI 按钮集

> ID：14403448
> 
> 赞同：0
> 
> 时间：2013-01-18T16:39:41.090
> 
> 标签：javascript, jquery-ui, angularjs, jquery-ui-button

**问题陈述**：为控制器范围数组中的每个元素显示一个 JQ 按钮集。

所以这样的事情是合乎逻辑的：

```
<div ng-repeat='a in algos' mybuttonset>
   <input name='X' id='A'><label for='A'>
</div> 
```

但是...在 JQ 按钮集中，如果输入/标签对的 id 不是唯一的，则每次指令调用 buttonset() 按钮的大小都会增长。例如。如果你在“算法”中有 20 个元素，那么按钮就会很大。

那么如何让id的唯一性呢？我认为 ng-repeat 中的 {{$index}} 会起作用：

```
<div ng-repeat='a in algos' mybuttonset>
   <input name='X' id='A{{$index}}'><label for='A{{$index}}'>
</div> 
```

但在这种情况下，angular 会报告语法错误：

```
Syntax error, unrecognized expression: [for=A{{$index}}] <div ng-repeat="a in algos" dwbuttonset="" class="ng-scope ui-buttonset"> 
```

一个非常简单的例子展示了这三种情况（正常大小、增长的按钮和语法错误）的本质是在[这个 Plunker](http://plnkr.co/edit/cEx25uvSTP7qV4FaSpzg)。

所有帮助和评论表示赞赏。

丹尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:45:16.553

调用jquery插件的时候好像没有设置for和id属性值

将其更改为：

```
.directive('dwbuttonset', function() {
    return function(scope, elm, attrs) {
    setTimeout(function() {
      (elm).buttonset(); 
    },0);
    };
}); 
```

这样你就可以在 dom 元素的 $digest 阶段之后调用插件。

# vim - 使用 PyCharm 打开目录

> ID：14403449
> 
> 赞同：0
> 
> 时间：2013-01-18T16:39:42.323
> 
> 标签：vim, pycharm

这是我发现自己经常做的事情：

1.  打开 PyCharm
2.  文件 > 打开目录...

我真正想要做的是传递一个`C:\Program Files (x86)\JetBrains\PyCharm 2.6.1\bin\pycharm.exe`具有当前目录的参数，所以我可以输入来自 cmd.exe（或 Windows 7/8/Server 2012 中的“地址栏”）。

我注意到 WebMatrix 在文件夹上具有右键单击上下文菜单，显示“在 Microsoft WebMatrix 中作为网站打开”。这就是我想要效仿的。

作为次要问题，我希望能够通过键入“pycharm main.py”来打开单个文件，就像我对 gvim 所做的那样（例如`gvim main.py`或`gvim *.py`）。我还注意到 Windows 上的 Vim 也有一个右键单击文件的“使用 Vim 编辑”上下文菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:14:37.083

PyCharm 确实支持将命令行参数传递给 pycharm.exe。如果您传入目录名，它将执行“打开目录”，如果您传入文件名，它将执行“打开文件”。您可能希望将 PyCharm 安装目录的“bin”子目录添加到 PATH，这样您就不需要键入 pycharm.exe 的完整路径。

目前 PyCharm 没有提供任何类似于 WebMatrix 和 gvim 的 shell 扩展，但有可能在未来的版本中添加这些扩展。

# actionscript-3 - 引用一个 Movieclip insde a movieclip for a hittest

> ID：14403464
> 
> 赞同：0
> 
> 时间：2013-01-18T16:40:23.773
> 
> 标签：actionscript-3, flash, movieclip

我有一个名为 doorKey 的键（如门）movieclip，它位于一个名为visuals 的movieclip 中。

通常，当您在时间线内而不是在包内的 AS3 上放置一些东西时，您可以执行以下操作：

```
if (player.hitTestObject (visuals.doorKey)) 
```

如何在包中执行此操作？

研究： [作为儿童添加到舞台后的参考影片剪辑](https://stackoverflow.com/questions/8233462/reference-movieclip-after-it-is-added-to-stage-as-a-child)

```
package 
{
import flash.display.MovieClip;
import flash.events.*;

public class Test extends MovieClip
{
public var keyCollected:Boolean = false;
public var doorKey:Visuals = new Visuals();
public var visuals:Visuals; 

public function Test()
    {

        visuals.x = 25;
        visuals.y = 475;
        addChild(visuals)

        function loop(e:Event):void
        {
if (keyCollected == false)
        {
            //trace("player "+player);

            if (player.hitTestObject (doorKey))
            {
                doorKey.visible = false;
                keyCollected = true;
                trace("key collected");
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:04:38.510

如果您使用 Flash Professional 和 Test 是您的 FLA 的文档类，并且您有一个名为 visuals 的 Visuals 实例和一个名为 player 的实例，并且它们都在舞台上，那么此代码应该适合您

```
package
{
import flash.display.Sprite;
import flash.events.Event;

public class Test extends Sprite      //Document class
{
    public var visuals:Visuals;   //instance exists in FLA, doorKey is an instance on visuals
    public var player:Sprite      //instance exists in FLA

    public var keyCollected:Boolean = false;

    public function Test()  //Called when Test is created (when your swf loads since its the document class)
    {
        //To have a function loop every frame render
        this.addEventListener(Event.ENTER_FRAME,enterFrameHandler);
    }

    private function enterFrameHandler(event:Event):void{
        if(player.hitTestObject(visuals.doorKey)){
            visuals.doorKey.visible = false;
            keyCollected = true;
            trace("key collected");
        }
    }
}
} 
```

如果这些在舞台上不存在，那么您将需要实例化并将它们添加到您的构造函数中：

```
public function Test()
{
    visuals = new Visuals();
    player = new Sprite();
    addChild(visuals);
    addChild(player);
    //To have a function loop every frame render
    this.addEventListener(Event.ENTER_FRAME,enterFrameHandler);
} 
```

在 Adob​​e Flash 中使用 FLA 时，它会自动创建实例，将它们添加到文档对象显示列表 (addChild)，并根据它们在编辑器中的名称设置文档类的变量。您在上面显示的时间线代码利用了相同的功能。在该示例中，舞台上已经有一个播放器实例，并且参考播放器已设置为它。视觉效果相同（其中包含 doorKey 的属性）。如果这些实例以相同的名称存在，则此行仍应适用：

```
if (player.hitTestObject (visuals.doorKey)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:45:59.407

如果将 Test 类设为 fla 文件的文档类，则 player.hitTestObject (doorKey) 将起作用。但是在您的代码中，您有一个以事件为参数的“循环”方法，因此您必须拥有其他任何会触发事件的东西

# php - 使用 PHP 来回显 05 而不是 5 作为示例。我该怎么做呢？

> ID：14403466
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:40:38.633
> 
> 标签：php, date

我现在正在使用一些 PHP 来输出距离特定日期还有多少天、小时、分钟和秒。它工作得很好，但截至目前，它会输出如下内容：14:5:33:36

理想情况下，如果它小于 10，我希望它输出 05 而不仅仅是 5。我知道这在 PHP 中一定相当简单，但是作为前端开发人员......我只是不能完全围绕这个. 以下是我目前正在使用的代码：

```
<?
    $rem = strtotime('2013-02-01 14:00:00') - time();
    $day = floor($rem / 86400);
    $hr  = floor(($rem % 86400) / 3600);
    $min = floor(($rem % 3600) / 60);
    $sec = ($rem % 60);
    if($day)
        echo "$day:";
    if($hr)
        echo "$hr:";
    if($min)
        echo "$min:";
    if($sec)
        echo "$sec";
?> 
```

如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:41:17.763

您可以`str_pad`与`STR_PAD_LEFT`标志一起使用。

```
$num = 5;
echo str_pad($num, 2, "0", STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:47:22.400

使用以下代码：

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo "<pre>";
print_r($interval);
echo $interval->format("%D"); 
```

使用 format() 你可以格式化你的输出；

输出如下：

```
DateInterval Object
(
    [y] => 0
    [m] => 0
    [d] => 2
    [h] => 0
    [i] => 0
    [s] => 0
    [invert] => 0
    [days] => 2
)
02 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:53:46.870

使用[DateTime](http://php.net/manual/en/book.datetime.php)类进行时间操作：

```
$future = new DateTime('2013-01-20 14:00:00');
$now = new DateTime('now');
echo $future->diff($now)->format('%D:%H:%I:%S'); # outputs 01:20:08:12 
```

看看[DateInterval::format](http://php.net/manual/en/dateinterval.format.php)格式化间隔。

# javascript - 使用 AngularJS 对 KDB+ 进程的 HTTP GET 请求

> ID：14403467
> 
> 赞同：2
> 
> 时间：2013-01-18T16:40:44.753
> 
> 标签：javascript, web-applications, angularjs, kdb

我正在使用我非常缺乏经验的 AngularJS 开发一个网络应用程序。

我的目标是让用户在文本字段中键入一些参数，然后使用该参数作为 GET 请求中的参数之一发送 GET 请求（使用 Angular 中的 $http 服务）。

请求的目标是 KDB+ 进程（来自 KX Systems 的专有的面向列的数据库/语言）。这个过程可以接受以下形式的请求：

```
http://servername:1234/?queryToRunHere[paramFromApp] 
```

此调用应返回 JSON 字符串。由于网络服务器和此进程在不同的端口上运行，我收到“Access-Control-Allow-Origin”错误，阻止我将此查询运行到不同的端口。我试图使用 $http.jsonp 命令（因为我读到这允许远程获取）但是这要求我提供一个“&callback”参数。这是不可能的，因为 KDB+ 会解释“？”右侧的所有内容。作为内部查询。

我不确定如何进行，但到目前为止，这些是我的想法：

1.  KDB+ 为 Java 提供了一个 API（但据我所知 JavaScript 没有）。也许我可以用 Java 编写某种 Web 服务，然后可以通过 Angular 调用它，然后再使用其原生 API 调用 KDB+。这样做的问题是它创建了另一个要维护的程序，而且我不确定如何编写这样的服务（什么技术、框架等）。

2.  Angular 内部还有另一种我不知道的方法，或者有一种方法不必在 $http.jsonp 中指定回调参数。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-21T14:43:18.497

`Access-Control-Allow-Origin`由于浏览器内置相同的来源策略，您会收到错误消息。默认情况下，当您的 JavaScript 和服务器 API 不是来自同一个`server:port`. 为了解决这个问题，您需要`Access-Control-Allow-Origin`在来自服务器的 HTTP 响应的标头中指定。

要在 KDB/Q 中完成此操作，请执行以下操作：

```
.z.ph:{ "\r\n" sv ("HTTP/1.1 200 OK"; "Access-Control-Allow-Origin: *"; 
"Content-Type: application/json"; ""; (.j.j select from aTable)) } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T12:28:30.033

该错误通常仅由不同的服务器引起，为了防止跨站点脚本，通常的解决方法是在您的 apache 配置中添加标头。确保使用相同的主机名引用这两个服务。

或者，如果您愿意，可以自定义 KDB+ 响应，但如果您是 q 的新手，这可能会很棘手。

1.  [.z.ph](http://code.kx.com/q/ref/dotz/#zph-http-get)控制 KDB 对 HTTP 请求的处理，您可以覆盖它以处理任何参数并返回您想要的任何内容。可以在[KX wiki](http://code.kx.com/q/cookbook/custom-web/)上看到一个示例。

2.  KDB+ 3.0 和更新版本还提供了您可能会发现更有用的 Web 套接字。它们由[.z.ws](http://code.kx.com/q/ref/dotz/#zws-websockets)处理。

可以在 Carlos Butlers 的[WebStudio](http://code.kx.com/wsvn/code/contrib/cbutler/Webstudio/)中看到它在 javascript 中的使用示例。

希望这些为您提供了解决问题的方法。

# jquery - 骨干js应用程序根本不起作用

> ID：14403468
> 
> 赞同：0
> 
> 时间：2013-01-18T16:40:53.257
> 
> 标签：jquery, backbone.js

我从我的第一个backbonejs 应用程序开始。我只有两个按钮，我想用一个简单的值填充模板。这是我的页面的完整代码：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>   

<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.0/backbone.localStorage-min.js" type="text/javascript"></script>  

</head>

 <body>
 <button class="btn" id="dashboardBtn">Dashboard</button><button id="ledgersBtn" class="btn btn-warning">Ledgers</button>

 <script type="text/template" id="heading">  
 <h1><%= heading %></h1>
 </script>

  <div id="container">Loading...</div>

  <!-- JAVASCRIPT -->
  <script type="text/javascript">
  var app ={};

  app.Page=Backbone.View.extend({

el:"#container",

template: _.template($("#heading").html()),

events:{
    'click #dashboardBtn':'loadDashboard',
    'click #ledgerBtn':'loadLedger'
},

loadDashboard: function(){

    this.$el.html(template({heading:"Dashboard"})); 
    },

loadLedger: function(){
    this.$el.html(template({heading:"Ledgers"}));
}

});

 //-----------INITIALIZERS----------------
 app.page=new app.Page();

  </script> 
```

当我点击按钮时，什么也没有发生。控制台中也没有显示任何内容。我知道我在这里做一些愚蠢的事情，但不知道是什么。帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:51:40.340

我认为问题在于`events`：

```
events:{
    'click dashboardBtn':'loadDashboard',
    'click ledgerBtn':'loadLedger'
} 
```

`dashboardBtn`和`ledgersBtn`（请注意，您在按钮元素中使用 's' 键入它，而在事件对象中没有它）是 id，所以它应该如下所示：

```
events:{
    'click #dashboardBtn':'loadDashboard',
    'click #ledgerBtn':'loadLedger'
} 
```

编辑：

我刚刚意识到您将视图的 el 设置为`#container`，因此事件对象将引用它内部的所有内容`#container`。所以我会包装按钮：

```
<div id="container2">
   <button class="btn" id="dashboardBtn">Dashboard</button><button id="ledgersBtn"class="btn btn-warning">Ledgers</button>
</div> 
```

javascript代码将是：

```
app.Page=Backbone.View.extend({

el:"#container2",

template: _.template($("#heading").html()),

events:{
    'click #dashboardBtn':'loadDashboard',
    'click #ledgersBtn':'loadLedger'
},

loadDashboard: function(){

    this.$el.html(this.template({heading:"Dashboard"})); 
    },

loadLedger: function(){
    this.$el.html(this.template({heading:"Ledgers"}));
}

}); 
```

此外，请注意您是`template`直接调用`loadDashboard`and `loadLedger`，而不是`this.template`

# java - 从 Python 程序访问 Java RMI API

> ID：14403472
> 
> 赞同：5
> 
> 时间：2013-01-18T16:41:06.330
> 
> 标签：java, python, rmi

我有一个 Python 程序，它需要从第三方系统访问 Java RMI API 才能获取一些数据。

我无法控制第三方系统，因此必须使用 RMI 来完成。

我的方法应该是什么？我从来没有使用 Python 与 RMI 合作过，所以我对我应该做什么有点迷茫。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:48:47.727

我想你会*很难*过。RMI 和 Java 序列化是非常特定于 Java 的。我不知道是否有人已经尝试在 python 中实现这一点（我相信谷歌知道），但你最好的选择是找到一个现有的库。

除此之外，我会考虑在某些客户端 java shim 中找到一种方法来执行 RMI（可能是某种 python<->java 桥接库？）。或者，也许您可​​以在 Jython 中运行您的 python 并利用底层 jvm 来处理 RMI 内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:50:17.650

一个小的 Java 中间件怎么样，您可以通过 REST 与之交谈，而该中间件又可以连接到远程 API？

# android - 在 Android 寻呼机中隐藏应用程序标题栏

> ID：14403488
> 
> 赞同：5
> 
> 时间：2013-01-18T16:41:54.563
> 
> 标签：android, android-actionbar, android-fragmentactivity

谁能告诉如何在 Pager 片段中隐藏应用程序标题栏。![在此处输入图像描述](../Images/783ffcb33d03af8143005f8861ace298.png)

![安卓寻呼机](../Images/1da28beda569190459f1969488b61fe2.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T16:44:43.367

这应该足够了：

```
ActionBar bar = getActionBar(); // you might need to use getSupportActionBar() based on your project setup
bar.setDisplayShowTitleEnabled(false);
bar.setDisplayShowHomeEnabled(false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:02:23.663

沃伦是正确的。如果你想在你的主题中隐藏它，你可以通过继承一个不显示它的主题来做到这一点：

*   对于预蜂窝样式：

    ```
    <style name="HiddenActionBar" parent="@android:style/Theme">
    </style> 
    ```

*   对于蜂窝+：

    ```
    <style name="HiddenActionBar" parent="@android:style/Theme.Holo.NoActionBar">
    </style> 
    ```

我个人更喜欢这种方法，因为它可以将您的类从与 UI 相关的代码中解放出来，并且可以`Activity`通过在清单中更改应用程序的主题轻松地为每个类进行设置。

# xcode - 在 iPad 键盘上获取退格键不仅可以一一清除文本，还可以将光标移动到 UIView 中的上一个文本字段

> ID：14403490
> 
> 赞同：0
> 
> 时间：2013-01-18T16:41:57.257
> 
> 标签：xcode, ipad, keyboard, backspace

我在 UIView 上有 30 个彼此相邻的 UITextfields。每个 UITextfield 代表一个单词的一个字符。UITextfield 允许在进入下一个 UITextfield 之前输入一个字符。

我想使用 iPad 键盘“退格”从右到左删除字符，而不用手指移动光标。当您连续按下退格按钮时，我希望将所有 UITextfields 的文本一一删除。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:01:00.157

当然。

利用

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

检查字符是否为退格，删除字符，并将第一响应者设置为前一个文本字段并返回 YES。

# c# - 无法处理消息，因为内容类型为 'application/json; charset=utf-8' 不是预期的类型 'text/xml; 字符集=utf-8'

> ID：14403492
> 
> 赞同：18
> 
> 时间：2013-01-18T16:42:05.250
> 
> 标签：c#, ajax, wcf

通过 ajax json 调用 WCF 服务时，我得到了上述响应。我的调用代码是：

```
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax
        ({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "http://localhost:90/WebServices/UserService.svc/Calculate",
            data: "{}",
            timeout: 10000,
            dataType: "json",
            success: function (response) {
                alert(response)
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.statusText);
                alert(thrownError);
            }
        });
    });
</script> 
```

我的服务是：

```
[ServiceContract]
public interface IUserService
{
    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json
     )]
    Answer Calculate();
}

[DataContract]
public class Answer
{
    [DataMember]
    public string answer { get; set; }
} 
```

我的方法是：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
public class UserService : IUserService
{
    public Answer Calculate()
    {
        Answer answer = new Answer();
        answer.answer="Hello World";
        return answer;
    }
} 
```

我一直在与之斗争一段时间，我看到其他人也遇到过同样类型的问题，我尝试了所有的建议，但仍然没有任何效果。

问题出在哪里？我该如何解决？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-18T17:14:35.857

我猜这里是因为你没有展示你是如何定义你的端点的，但我很确定是这样的。您的端点不是为 Web 消费定义的 - 它可能使用`basicHttpBinding`. 要通过 jQuery（或一般的其他 web/REST 客户端）使用端点，您需要使用 定义端点`WebHttpBinding`，并将 应用于`WebHttpBehavior`它。

有多种方法可以正确定义端点。最简单的方法是`WebServiceHostFactory`在 .svc 文件中使用：

**用户服务.svc**：

```
<%@ ServiceHost Language="C#" Debug="true" Service="YourNamespace.UserService"
                Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T22:05:54.663

对于通过搜索到达这里的任何人：'content type'application/json; charset=utf-8' 不是预期的类型 'text/xml; 字符集=utf-8'

在我的案例中，由于构建和运行没有适当属性的服务而导致了类似的错误。当我尝试在客户端应用程序中更新服务引用时收到此错误消息。当我将“[DataContract]”和“[DataMember]”属性正确应用到我的自定义类时，它得到了解决。

编辑：如果您的服务已设置并正常工作，然后在您编辑后它中断了，这很可能适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-03T22:44:04.627

这是一个很老的问题，但我想在@carlosfigueira 的回答中添加一些信息。

**1\. 指定`Factory`in`.svc`与指定 a `<service>`in`web.config`**

在文件中指定 a的替代方法是`Factory`在`.svc`文件中指定 a 。这在许多其他答案（例如[这个](https://stackoverflow.com/a/19868693/3002584)）中都有解释，所以我不会重复它们，但值得在这里复制另一个@carlosfigueira[答案](https://stackoverflow.com/a/7531877/3002584)：`<service>``web.config`

> 如果您未在 .svc 文件中指定任何工厂，则所有端点都将来自 web.config 文件 - WCF 将尝试查找 其属性与服务类的**完全限定名称**`<system.serviceModel / service>`匹配的元素。如果找不到，那么它将添加一个默认端点（使用，除非您更改了默认映射）。`name`**`basicHttpBinding`**

 **并且要清楚：**完全限定**的名称应该包括命名空间。因此，如果有以下内容，它将是`MyWebServices.ExampleWebService`：

```
namespace MyWebServices
{
    [ServiceContract]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    public class ExampleWebService
    {
        [OperationContract]
        [WebInvoke(Method = "POST",
            BodyStyle = WebMessageBodyStyle.Bare,
            ResponseFormat = WebMessageFormat.Json,
            RequestFormat = WebMessageFormat.Json)]
        public string DoWork(DoWorkRequest request)
        {
            return "success!";
        }
    }
} 
```

**2\. 在 localhost 上调用时出现“无法处理消息...”**

我在尝试从 Visual Studio 在 localhost 上运行 ajax 调用时遇到了这个问题，并得到了错误消息，即这个问题的标题，所以我想列出解决它所需的步骤：

1.  如上所述，要么在 中添加一个，`Factory`要么`.svc`在`web.config`.
2.  在 Visual Studio 中，右键单击您的`.html`文件，然后选择“在浏览器中查看”。您的默认浏览器会打开，如果是 Chrome，则 url 将是，例如，`localhost:51667/test.html`（实际上是`http://localhost:51667/test.html`）。
3.  您现在可以触发您的 ajax 调用，并希望您能成功获得 Web 服务响应。
4.  如果您想调试您的 Web 服务，那么：
    在 Visual Studio 中，确保 Web 服务的项目设置为启动项目，然后按 F5。这将启动 WCF 测试客户端窗口，但您可以忽略它并触发您的 ajax 请求。**

# c# - Linq OrderBy 不对列表进行排序 . 如何对列表进行排序？

> ID：14403496
> 
> 赞同：6
> 
> 时间：2013-01-18T16:42:10.283
> 
> 标签：c#, linq

OrderBy 子句的问题对排序没有任何影响。我已经在调试器中完成了这个过程，并确保这是一个代码的排序行被命中的情况，并在未应用 order by 之后查看结果。

```
public static IEnumerable<DDLOptions<TValueType>> GetDDLOptionsViewModel<TClass, TValueType>(
            IEnumerable<TClass> list, 
            Func<TClass, TValueType> value, 
            Func<TClass, string> displayText,
            bool sort = true
        )
        {
            List<DDLOptions<TValueType>> ddlOptions;

            ddlOptions = list.Select(
                l => new DDLOptions<TValueType>
                        {
                            Value = value(l),
                            DisplayText = displayText(l)
                        }
                    ).ToList();  <========== Works if I put the Order By here.

            if (sort)
            {
                ddlOptions.OrderBy(l => l.DisplayText); <===== Does NOT work here.
            }

            return ddlOptions;
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T16:43:28.627

`OrderBy` *返回*将执行排序的查询：它不会修改原始列表（而类似的东西`List<T>.Sort`会修改原始列表）

而是尝试类似：

```
ddlOptions = ddlOptions.OrderBy(l => l.DisplayText).ToList(); 
```

编辑：您可能想尝试返回数据的类型`ddlOptions`或返回数据的位置/方式，因为我们正在做的事情`ToList`可能超出了必要的范围，但这对于这种情况来说可能是次要/非问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T16:43:13.563

尝试：

```
if (sort)
{
    ddlOptions = ddlOptions.OrderBy(l => l.DisplayText); <===== Should work now.
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T16:58:57.683

正如其他人所说，您需要将结果分配`OrderBy`给某事，因为它不会改变它所作用的序列。`ddlOptions`制作a`IEnumerable`而不是 a是最简单的`List`，这样您就可以将结果分配给它。`ToList`也不需要对 select的调用：

```
public static IEnumerable<DDLOptions<TValueType>> GetDDLOptionsViewModel<TClass, TValueType>(
        IEnumerable<TClass> list,
        Func<TClass, TValueType> value,
        Func<TClass, string> displayText,
        bool sort = true
    )
{
    IEnumerable<DDLOptions<TValueType>> ddlOptions;

    ddlOptions = list.Select(
        l => new DDLOptions<TValueType>
                {
                    Value = value(l),
                    DisplayText = displayText(l)
                }
            );

    if (sort)
    {
        ddlOptions = ddlOptions.OrderBy(l => l.DisplayText);
    }

    return ddlOptions;
} 
```

请注意，此版本的方法将使用延迟执行，因此在迭代序列之前不会实际执行 Select/OrderBy。如果你不想这样做，你可以添加`ToList`就`return`行了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T16:43:22.893

您需要输入：

```
ddlOptions = ddlOptions.OrderBy(l => l.DisplayText); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-16T17:07:46.243

`OrderBy`不排序 a`List<T>`或任何其他`IEnumerable<T>`. 它产生一个新的、排序的`IEnumerable<T>`. 所以调用`ddlOptions.OrderBy(...)`不会修改`ddlOptions`.

如果您有 a`List<T>`并希望对其进行排序，则可以使用该方法 - 特别是采用 a作为参数[`Sort`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1.sort#System_Collections_Generic_List_1_Sort_System_Comparison__0__)的重载。`Comparison<T>`这实际上是对列表进行排序，而不是返回一个新的`IEnumerable`.

[`Comparison<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.comparison-1)是一个代表一个函数的委托，它接受两个，`T`如果第一个比第二个“小”则返回负数，如果第一个比第二个“大”则返回正数，如果之前没有排序则返回零或在另一个之后。

在这种情况下，您不必记住这一点。相反，您可以这样做：

```
ddlOptions.Sort((x, y) => string.CompareOrdinal(x.DisplayText, y.DisplayText)); 
```

您传入一个函数，该函数接受列表中的两个项目并返回其`DisplayText`属性的比较结果，这将是负数、0 或正数。

有时我们使用它是`OrderBy` *因为*它不会修改原始列表。但是如果修改列表*是*我们想要的，那么我们可以使用`Sort`.

# java - 如何防止 Hibernate 在列表中刷新？

> ID：14403498
> 
> 赞同：11
> 
> 时间：2013-01-18T16:42:12.530
> 
> 标签：java, hibernate

我有一个简单的休眠查询，例如：

```
from MyEntity where name = ? 
```

没什么花哨的，但它在相当大的事务中被多次调用（持续一秒钟，可能加载数十或数百个实体）。Profiler 显示大量时间花在：

```
org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1185)
org.hibernate.internal.SessionImpl.list(SessionImpl.java:1240)
org.hibernate.internal.QueryImpl.list(QueryImpl.java:101) 
```

换句话说 - 在运行实际查询之前刷新更改。

我可以以某种方式阻止 Hibernate 执行此刷新吗？

如果没有，我该怎么做才能让它更快？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-22T08:30:29.567

默认情况下，hibernate 在会话期间发出查询之前会刷新（FlushMode.AUTO），并且会占用大量 CPU 时间。如果您有一个会话，其中许多查询和更新交替运行，那就特别痛苦。

如果查询可能会选择您在当前会话期间插入/更新/删除的数据，那么您需要这些刷新。即使您没有修改当前事务中的任何内容，但使用了诸如未提交的事务隔离级别，也*可能*出现这种情况。

假设您不想要未提交的读取等，我知道有两种解决方法：

1.  *在进行任何修改之前*选择您在会话期间需要的所有内容（即重新排序，以便在进行任何修改之前发出所有查询）。
2.  如果您确定要选择在此会话中未修改的数据，则可以将刷新模式显式设置为不会触发刷新的内容，如下所示：

    ```
    Query query = session.getNamedQuery(SOME_QUERY_NAME);
    query.setFlushMode(FlushMode.COMMIT); 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-07T11:13:17.343

Hibernate 在 3.3 版本中改变了它的刷新逻辑。

现在它会一直刷新，即使设置为`FlushMode.MANUAL`，如果它检测到您正在查询有脏实体的表。

我能想到的一些解决方法：

*   重新排序操作以不查询脏表并设置`FlushMode.COMMIT`或降低。
*   在修改之前分离实体并稍后重新附加，这样 Hibernate 就不会知道它们已被更改。
*   提供[`AutoFlushEventListener`](https://docs.jboss.org/hibernate/core/3.5/javadocs/org/hibernate/event/AutoFlushEventListener.html)具有不同行为的自定义。这将需要一些低级的摆弄，并且可能会破坏其他东西。

# c# - 结构与类，带有字符串和列表？

> ID：14403509
> 
> 赞同：1
> 
> 时间：2013-01-18T16:42:52.443
> 
> 标签：c#, .net, vb.net, class, data-structures

> **可能重复：**
> [C#：结构与类](https://stackoverflow.com/questions/3942721/c-structs-versus-classes)

我正在创建一个库，该库相对较小，需要一个数据库，其中包含 MP3 文件的标签。

我知道如果我有固定大小的数据，如整数、双精度数等，最好坚持使用结构......但是在我的情况下，我有包含字符串甚至其他结构的字符串和列表......如果我会去结构，它看起来像这样：

```
Public Structure STitle
    Dim Title As String
    Dim Path As String
End Structure

Public Structure SAlbum
    Dim Album As String
    Dim Songs As List(Of STitle)
End Structure

Public Structure SArtist
    Dim Artist As String
    Dim Albums As List(Of SAlbum)
End Structure 
```

然后，我会有这样的事情：

```
Public SongLibrary As New List(Of SArtist) 
```

字符串和列表让我感到困惑，尤其是在速度方面。因为我会搜索很多歌曲，所以我想确保我使用的是最快的。

我也对装箱和拆箱感到困惑。我假设字符串列表仅包含指向“字符串”的指针，并且结构相同（试图低级思考）。但是，我不知道是否会发生装箱拆箱，这会减慢搜索速度（不使用数组列表的原因），因为无法确定大小（或者是吗？）

那么该选哪一个呢？类，还是结构？还是有其他更适合的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T16:46:23.597

> 我知道如果我有固定大小的数据（如整数、双精度数等），最好坚持使用结构

你怎么知道？根据我的经验，创建自定义值类型很少是一个好主意。它确实发生了——例如，我的 Noda Time 项目中有很多——但*通常*我会保持警惕。在暴露可变结构之前，我也会*非常谨慎。*

> 我也对装箱和拆箱感到困惑。我假设字符串列表仅包含指向“字符串”的指针，并且结构相同（试图低级思考）。

对于结构，*没有*指针（引用）。A`List(Of Integer)`是用一个`Integer()`例子来实现的。该数组直接包含值。使用通用集合，不需要装箱。

有关更多信息，请参阅[类设计指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229017%28v=vs.100%29.aspx)，但基本上我会默认使用类，除非我有一个*非常令人信服*的理由来创建一个结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:48:25.027

> 字符串和列表让我感到困惑，尤其是在速度方面。因为我会搜索很多歌曲，所以我想确保我使用的是最快的

*在您的*情况下，不清楚字符串和列表之间的关系是什么，但快速搜索通常与数据在您的集合中的分布方式有关。

*最快的通常是：对集合进行排序并对其运行二进制搜索。*

特别是从快速数据检索的角度来看，*不要使用 structs*，因为当您从集合中检索数据（如果是结构体）时，数据将被复制到另一个新对象。相反，如果是类，您将获得一个*指针*（非常有效）。

*使用引用类型（类）而不是结构*

# ios - 如何显示分辨率不佳的图像预览？

> ID：14403513
> 
> 赞同：0
> 
> 时间：2013-01-18T16:43:05.487
> 
> 标签：ios, objective-c, image, preview

我可以像这样异步显示大图像：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    CGFloat scale = 1.f;
    UIImage *sourceImage = [UIImage imageWithData:imageData];
    CGSize imageSize = (CGSize){self.size.width / scale, self.size.height / scale};

    UIGraphicsBeginImageContext(imageSize);
    [self drawInRect:(CGRect) {.size = imageSize}];
    UIImage *preloadedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    dispatch_async(dispatch_get_main_queue(), ^{
    imageView.image = preloadedImage;
    });
}); 
```

但我应该使用一些占位符或活动指示器，直到加载图像。

有没有办法在图像异步加载之前显示图像的低分辨率预览？

# ipad - Coredata 将 sqlite 保存到 Dropbox - 恢复问题 - Sqlite 文件在应用重新启动之前不会重新加载

> ID：14403514
> 
> 赞同：4
> 
> 时间：2013-01-18T16:43:08.150
> 
> 标签：ipad, sqlite, core-data, dropbox, dropbox-api

我有一个使用 Core Data 的 iPad 应用程序。

我正在尝试使用 Dropbox 同步 sqlite 文件为我的用户提供另一种备份方式。

从保管箱备份和恢复没有问题；但是，**一旦恢复，应用程序必须重新设置才能显示数据**。

我认为这是因为持久存储仍在使用旧文件。

如何强制关闭旧模型并重新打开？

我试过以下没有运气：

```
 NSPersistentStore* store = [[_persistentStoreCoordinator persistentStores] lastObject];
[_persistentStoreCoordinator removePersistentStore:store error:nil];
[__managedObjectModel release];
__managedObjectModel = nil;
[_persistentStoreCoordinator release];
_persistentStoreCoordinator = nil;
[self persistentStoreCoordinator];
[self managedObjectContext];
[self managedObjectModel]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:25:30.390

最后，我使用了以下内容，它重新加载了持久存储：

```
NSError *error;
// retrieve the store URL
NSURL * storeURL = [[__managedObjectContext persistentStoreCoordinator] URLForPersistentStore:[[[__managedObjectContext persistentStoreCoordinator] persistentStores] lastObject]];
// lock the current context
[__managedObjectContext lock];
[__managedObjectContext reset];//to drop pending changes
//delete the store from the current managedObjectContext
if ([[__managedObjectContext persistentStoreCoordinator] removePersistentStore:[[[__managedObjectContext persistentStoreCoordinator] persistentStores] lastObject] error:&error])
{

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
    [[__managedObjectContext persistentStoreCoordinator] addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error];//recreates the persistent store
}

dispatch_async(dispatch_get_main_queue(), ^{
    self.ready = YES;
    [[NSNotificationCenter defaultCenter]postNotificationName:kModelDidChange object:nil];
});

[__managedObjectContext unlock]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T08:27:02.330

就我而言，我发现了一些更简单的方法，不需要创建新商店，只需使用现有商店，但会使 Core Data 认为内容已更改，因为它移动了：

```
NSPersistentStore* store = [[_persistentStoreCoordinator persistentStores] lastObject];
[_persistentStoreCoordinator setURL:store.URL forPersistentStore:store]; 
```

您当然应该在 MOC 锁定时完成此操作。AFAICT，上述内容将隐式重置 MOC，尽管您也可以像在您提出的解决方案中那样手动执行此操作。

# c# - 按另一个字符串的位置对字符串进行排序

> ID：14403519
> 
> 赞同：3
> 
> 时间：2013-01-18T16:43:25.433
> 
> 标签：c#, string, algorithm, sorting, search

最好的方法是什么 - 给定一个字符串 A 和字符串集合 C，按照字符串中 A 的位置的非递减顺序对集合中的字符串进行排序。

例如，

```
A= abc
C= [deabc, abc, dabc, dad] 
Sorted C= [abc, dabc, deabc] 
```

我的想法是遍历集合并将其放入 HashMap/Dictionary 中，其中 A 在 C[i] 中的位置作为索引。然后从 HashMap 构造排序集合。这不是家庭作业问题。只是想知道这样做的有效方式/算法。任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:47:02.423

这是使用 LINQ 的一种简单方法：

```
var SortedC = C.OrderBy (d => d.IndexOf(A)).ToArray(); 
```

请注意，不包含 A 的字符串将在开头进行排序，因为`IndexOf`返回`-1`。此外，在同一索引处具有 A 的字符串的行为是未定义的，并且将按任意顺序返回，除非您提供`.ThenBy`排序来处理这些行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:48:15.997

```
stringsArray.OrderBy(s => s.IndexOf("a")) 
```

# java - 在jsp页面上获取ArrayList大小

> ID：14403530
> 
> 赞同：3
> 
> 时间：2013-01-18T16:44:21.220
> 
> 标签：java, list, jsp

嗨，我正在尝试获取 arraylist 的总大小，但由于某种原因，这没有显示，下面的代码用于显示大小。

```
 <%db.DBConnection db = new  db.DBConnection(); 
            ArrayList<User> myUsers =db.getAllUsers();
            %>  

   Total Subscribed Users: <p><% myUsers.size();%></p> 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T17:10:50.717

其中一些显然已经成熟，可以从 JSP 中移出，但是根据您的类和方法的定义方式，这应该可以工作（JSP + JSTL）：

```
<jsp:useBean id="db" class="db.DBConnection"/>
<c:set var="myUsers" value="${db.allUsers}"/>
Total Subscribed Users: <p>${fn:length(myUsers)}</p> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T16:45:26.370

这行得通吗？

```
<p><%= myUsers.size()%></p> 
```

我建议在你的jsp中尽可能少写java代码。你可以考虑使用一些taglib，jstl。例如。将所有业务代码放在您的服务器端。特别是像`b.DBConnection db = new db.DBConnection();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:54:15.880

```
 int count = myUsers.size();
            %>  
            <h1>User Management</h1>
            Total Subscribed Users: <p><%=count%></p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T18:45:21.097

您应该这样做以实现该目的：

```
Total Subscribed Users: <p><%= myUsers.size(); %></p> 
```

或者，您还可以执行以下操作：

```
Total Subscribed Users: <p><% out.print(String.valueOf(myUsers.size()));%></p> 
```

您在问题中编写的代码块是“脚本”。就其本身而言，scriptlet 不提供任何 HTML。

有关更多详细信息，请参阅[此](http://www.jsptut.com/scriptlets.jsp)内容。

# java - 正则表达式匹配特殊字符，除了连字符与数字混合

> ID：14403531
> 
> 赞同：3
> 
> 时间：2013-01-18T16:44:23.067
> 
> 标签：java, regex

我们目前`[^a-zA-Z0-9]`在 Java 的`replaceAll`函数中使用从字符串中去除特殊字符。我们注意到，当连字符与数字混合时，我们需要允许它们。

**不**匹配连字符的示例：

*   1-2-3
*   -1-23-4562
*   --1---2--3---4-
*   --9--a--7
*   425-12-3456

**将**匹配连字符的示例：

*   --a--b--c
*   沃尔玛

[我们认为我们使用这个 SO question](https://stackoverflow.com/questions/884014/optional-characters-in-a-regex)作为参考制定了一个正则表达式来满足后一个标准，但我们不知道如何将它与原始正则表达式结合起来`[^a-zA-Z0-9]`。

[由于Lucene 的标准标记](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/standard/StandardTokenizer.html)器在索引时的工作 方式，我们希望对 Lucene 搜索字符串执行此操作：

> 在连字符处拆分单词，除非标记中有数字，在这种情况下，整个标记被解释为产品编号并且不被分割。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:13:45.393

你不能用一个正则表达式来做到这一点。（嗯......也许在 Perl 中。）

（*编辑*：好的，你可以用可变长度的负后视来做到这一点，它似乎Java可以（几乎是独一无二的！）这样做；见Cyborgx37的回答。无论如何，imo，你*不应该*用一个正则表达式来做到这一点。:)）

您*可以*做的是将字符串拆分为单词并单独处理每个单词。我的 Java 非常糟糕，所以这里有一些很有希望的 Python：

```
# Precompile some regex
looks_like_product_number = re.compile(r'\A[-0-9]+\Z')
not_wordlike = re.compile(r'[^a-zA-Z0-9]')
not_wordlike_or_hyphen = re.compile(r'[^-a-zA-Z0-9]')

# Split on anything that's not a letter, number, or hyphen -- BUT dots
# must be followed by whitespace
words = re.split(r'(?:[^-.a-zA-Z0-9]|[.]\s)+', string)

stripped_words = []
for word in words:
    if '-' in word and not looks_like_product_number.match(word):
        stripped_word = not_wordlike.sub('', word)
    else:
        # Product number; allow dashes
        stripped_word = not_wordlike_or_hyphen.sub('', word)

    stripped_words.append(stripped_word)

pass_to_lucene(' '.join(stripped_words)) 
```

当我运行这个时`'wal-mart 1-2-3'`，我回来了`'walmart 1-2-3'`。

但老实说，上面的代码重现了 Lucene 标记器已经在做的大部分事情。我认为您最好将其复制`StandardTokenizer`到您自己的项目中并对其进行修改以执行您想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:46:30.040

你有没有试过这个：

`[^a-zA-Z0-9-]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T21:17:19.057

这个问题很棘手，因为 Java 不允许在环视中进行无限递归，这基本上是您所需要的。正如您将看到的，我已经设置了 100 个字符的限制，如果您希望单词更长，您可以增加该限制。

这应该有效：

```
(?<![0-9]\S{0,100})[^a-zA-Z](?!\S{0,100}[0-9])|(?<=[0-9]\S{0,100})[^a-zA-Z0-9-](?=\S{0,100}[0-9]) 
```

只需一个带有此表达式的简单 replaceAll() 即可处理它。

例如，考虑这个输入：

```
--9-+-a--7 wal-mart 
```

上面的表达式，其中有问题的字符被替换为长度为零的字符串，将呈现以下输出：

```
--9--a--7 walmart 
```

你可以在这里试试：http: [//fiddle.re/ynyu](http://fiddle.re/ynyu)

请注意，此表达式取决于由空格分隔的单词（空格、制表符、换行符等）。其他字符，例如逗号和分号，将导致表达式将这两个单词视为一个单词。例如 '---9-a-0-,wal-mart' 将被视为一个单词。

**编辑**我之前编辑的最后一段是不正确的。如果您想包含其他字符作为分隔符，我建议在第一遍中将它们替换为空格（例如，将 ',' 替换为 ' '）。

*我主要是一名 .NET 程序员，否则我会为您提供使用此模式的完整 Java 代码。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T04:13:52.503

请原谅我发布第二个答案而不是编辑第一个答案，但我不完全确定问题是否是在它们立即被字母包围的情况下消除破折号，或者是否打算仅在字符串中消除破折号根本不包含数字。该解决方案适用于后一种情况。我的另一个解决方案是针对前一种情况。

这种模式

```
String newValue = myString.replaceAll("[^\\sA-Za-z0-9\\-]|((?<!\\S*\\d)-(?!\\S*\\d))", ""); 
```

应该这样做。有两个主要部分用`or`. 第一部分匹配所有非字母、非数字、非破折号的字符，因为无论如何我们都想去掉这些字符。的后半部分`or`将匹配任何在令牌之前没有数字的破折号，并且在令牌中没有数字（即，令牌中根本没有数字，其中令牌由所有非空格组成，或者`\S`， 人物）。这是通过消极的后视和前瞻来完成的。我们**确实**利用了 Java 在这些前瞻/后视中支持可变宽度的事实。当然，替换只是空字符串。

我不得不承认，虽然在 Java 中使用正则表达式的语法很痛苦（在必须使用 Pattern.compile 等的情况下），但至少引擎支持一些不错的特性。尽管根据 Eevee 的说法，它可能不如 .NET 好。

不过，我同意其他人的观点，因为这并不是您通常想要在单个正则表达式中执行的操作。我不知道你的确切情况，但是一个简单的分支来检测它是否看起来是一个产品编号，然后应用正确的模式会更具可读性。

# javascript - 使用jQuery在数组中的元素中制作动画

> ID：14403532
> 
> 赞同：0
> 
> 时间：2013-01-18T16:44:29.017
> 
> 标签：javascript, jquery, arrays, each, fadein

我正在开发一个 jQuery 插件，它隐藏容器中的所有元素，然后使用 fadeIn() 或 jquery 的 animate 函数在设定的时间间隔内显示它们。

到目前为止，我已经设法将所有元素放入一个数组中，如果我这样做，我可以在警报中打印出 html

```
$(children).each(function (index, val) {
     alert(this);
}); 
```

但是，当我尝试将元素作为 html 再次添加到文档中时，我没有运气。

我试过了

```
$(container).append(this); 
```

和

```
$(container).appendChild(this); 
```

但仍然没有运气。

理想情况下，我需要能够再次淡入淡出（）每个元素，并在设定的时间间隔内为每个元素添加一个 CSS 类。

```
(function($) {

$.fn.myPlugin = function (options) {

    // Set default options

    var defaults = {
        rate : '1000',
    }

    var options = $.extend(defaults, options);

    // Hide all elements within parent container
    $(this).children().hide();

    var container = $(this).selector;

    // Store children in loader variable
    var loader = $(this).children();

    // Put all elements into an array

    var children = [];

    $(loader).each(function(idx) {
        children.push(this.outerHTML); 
    });

    // Iterate over array and fadeIn elements;

    $(children).each(function (index, val) {

    });

};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:10:17.700

有人这样想吗？： http: [//jsfiddle.net/zKpp2/1/](http://jsfiddle.net/zKpp2/1/)

```
(function ($) {
    $.fn.myPlugin = function (options) {
        // Set default options
        var defaults = $.extend({
            rate: 1000,
        }, options);

        // Hide all elements within parent container
        $(this).children().hide();
        var container = $(this).selector;

        // Store children in loader variable
        var loader = $(this).children(),
            length = loader.length;

        (function fadeLoop(index){
            if (index < length)
                loader.eq(index).fadeIn(defaults.rate, function(){
                    $(this).addClass('foo'); // add class when done animating.
                    fadeLoop(index + 1);
                });
        })(0);
    };
})(jQuery); 
```

但是，我会推荐一些更灵活的东西：http: [//jsfiddle.net/zKpp2/3/](http://jsfiddle.net/zKpp2/3/)

```
(function ($) {
    $.fn.myPlugin = function (options) {
        // Set default options
        var def = $.extend({
            rate: 1000,
            onStepStart: $.noop,
            onStepFinish: $.noop,
            onFinish: $.noop
        }, options);

        // Hide all elements within parent container
        $(this).children().hide();
        var container = this;

        // Store children in loader variable
        var loader = $(this).children(),
            length = loader.length;

        (function fadeLoop(index) {
            if (index < length) {
                def.onStepStart.apply(
                loader.eq(index).fadeIn(def.rate, function () {
                    def.onStepFinish.apply(this);
                    fadeLoop(index + 1);
                }).get());
            } else def.onFinish.apply(container.get());
        })(0);

        return container;
    };
})(jQuery); 
```

您可以像这样使用它来完成您想要的相同事情（以及许多其他事情）：

```
$("#loader").myPlugin({
    rate: 1000,
    onStepStart: function(){
        $(this).addClass("foo");  // "this" just started fading in
    },
    onStepFinish: function(){
        $(this).removeClass("foo").addClass("bar");  // "this" finished fading in
    },
    onFinish: function(){
        $(this).css("background", "green");  // "this" is the original selector.
    }
}).css("background", "red");  // chains properly 
```

**编辑**- 插件的第二个版本不验证`def.onStepStart`etc 实际上是函数，所以如果你将它们设置为函数以外的东西，它会中断。

# iphone - 禁用特定类的 NSLog

> ID：14403533
> 
> 赞同：3
> 
> 时间：2013-01-18T16:44:34.853
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nslog

我知道如何禁用来自[这个](https://stackoverflow.com/questions/969130/how-to-print-out-the-method-name-and-line-number-and-conditionally-disable-nslog)和[这个等答案的](https://stackoverflow.com/questions/2025471/do-i-need-to-disable-nslog-before-release-application)**所有** `NSLog`消息。

我还不清楚我应该在我的文件中定义什么以在单独的类`.pch`中有条件地禁用。`NSLog`

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:04:30.963

利用

`#define NSLog //`

如果它是一个班轮，它将评论您的所有日志

或使用

`#define NSLog(...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:52:04.653

我将以下日志宏用于类似的内容。您可以定义`NO_LOG`要从日志记录中跳过的任何文件（逗号分隔）。

```
#define MAKESTRING(__VA_ARGS__) #__VA_ARGS__
#define TOSTRING(...) MAKESTRING(__VA_ARGS__)

static inline void PxReportv(BOOL doLog, char const *file, int line, NSString *prefix, NSString *fmt, va_list argList) {
    if (doLog) {
        NSString *fileNameWithExtension = [[NSString stringWithFormat:@"%s", file] lastPathComponent]; 
#ifdef NO_LOG
        NSString *fileName = [fileNameWithExtension stringByDeletingPathExtension];
        char *f = TOSTRING(NO_LOG);
        NSArray *comps = [[[NSString alloc] initWithFormat:@"%s", f] componentsSeparatedByString:@","];
        for (NSString *except in comps) {
            if ([except isEqualToString:fileName]) {
                return;
            }
        }
#endif
        vprintf([[[NSString alloc] initWithFormat:[[NSString alloc] initWithFormat:@"%@ <%@ [%d]> %@\n", prefix, fileNameWithExtension, line, fmt] arguments:argList] cStringUsingEncoding:NSUTF8StringEncoding], NULL);
    }
}

static inline void PxReport(BOOL doLog, char const *file, int line, NSString *prefix, NSString *fmt, ...) {
    va_list ap;
    va_start(ap, fmt);
    PxReportv(doLog, file, line, prefix, fmt, ap);
    va_end(ap);
}

#define PxError(...) PxReport(YES, __FILE__, __LINE__, @"[ERROR]", __VA_ARGS__)

#ifdef DEBUG
    #define PxDebug(...) PxReport(YES, __FILE__, __LINE__, @"[DEBUG]", __VA_ARGS__)
    #define NSLog(...) PxReport(YES, __FILE__, __LINE__, @"", __VA_ARGS__)
#else
    #define PxDebug(...)
    #define NSLog(...)
#endif 
```

# knockout.js - knockoutjs ko.observableArray 绑定时不显示数据

> ID：14403534
> 
> 赞同：0
> 
> 时间：2013-01-18T16:44:35.773
> 
> 标签：knockout.js

以下数据在`ko.observableArray` **汽车**中：（这是数组的转储）

```
[
  {
    "carId": 1,
    "carName": "Ford",
    "carStatus": "On-Hold",
    "carDescription": "This is the first car description."
  },
  {
    "carId": 1,
    "carName": "Toyota",
    "carStatus": "On-Hold",
    "carDescription": "This is the second car description."
  }
] 
```

**看法**

```
<ul data-bind="foreach: cars()">
    <li>       
        <span data-bind="text: carDescription"></span>    
   </li>
</ul> 
```

但是，没有任何输出，没有显示列表项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T16:50:54.817

使用此官方教程[http://learn.knockoutjs.com/#/?tutorial=collections中的示例创建的小提琴](http://learn.knockoutjs.com/#/?tutorial=collections)

[http://jsfiddle.net/vgYC7/](http://jsfiddle.net/vgYC7/)

这就是 ViewModel 所需要的一切

```
function ViewModel() {
    var self = this;

    // Editable data
    self.cars = ko.observableArray([
      {
        "carId": 1,
        "carName": "Ford",
        "carStatus": "On-Hold",
        "carDescription": "This is the first car description."
      },
      {
        "carId": 1,
        "carName": "Toyota",
        "carStatus": "On-Hold",
        "carDescription": "This is the second car description."
      }
    ]);
}

ko.applyBindings(new ViewModel()); 
```

# android - 显示在列表视图上

> ID：14403544
> 
> 赞同：1
> 
> 时间：2013-01-18T16:45:15.490
> 
> 标签：android, sqlite, listview

这是另一个类的 Intent，名称**product**包含来自 sqlite 数据库的数据。

我的问题是我想在 ListView 上显示信息，但我不知道该怎么做。

```
Intent updateCustomerIntent = getIntent();
         String product = updateCustomerIntent.getStringExtra("product");
         Log.d("checking........", product); 
```

我试过这个

```
ListView listView = (ListView) findViewById(R.id.mylist);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
  android.R.layout.simple_list_item_1, android.R.id.text1, product);

listView.setAdapter(adapter); 
```

但它给了我错误

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:47:52.073

让它像这样：

```
String[] values = new String[] { product };

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
  android.R.layout.simple_list_item_1, android.R.id.text1, values); 
```

# android - Android Galaxy OutputStreamWriter 导致异常，但在我所有其他 android 设备上运行

> ID：14403545
> 
> 赞同：0
> 
> 时间：2013-01-18T16:45:15.983
> 
> 标签：android

我有代码可以使用来自 Web 服务器的用户名密码登录一个人。该代码在我的其他 android 设备（Vergin 手机、acer 平板电脑）上运行良好，它们是 android 2.2 和 3.1。但它在新的 Galaxy 手机上崩溃了。

当代码执行 OutputStreamWriter wr3 = new OutputStreamWriter(conn3.getOutputStream());

该代码导致异常 Networkonmainthread 异常，原因为空。我想知道他们使用 android 4,1 是否存在安全问题？？？？因为它适用于我的其他 3.1 和 2.2 设备？

代码

```
try {
    // Construct data
    Editable ed = mPassWord.getText();
    cGlobals.PassWord=ed.toString();

    ed = mUserName.getText();
    cGlobals.UserName=ed.toString();

    String data = URLEncoder.encode("username", "UTF-8") + "=" + URLEncoder.encode( cGlobals.UserName, "UTF-8");
    data += "&" + URLEncoder.encode("password", "UTF-8") + "=" + URLEncoder.encode(  cGlobals.PassWord, "UTF-8");

    // Send data
    URL url = new URL("http://www.tellafortune.com/mobile/login.php");
    // URL url = new URL("http://www.hhhhtellafortune.com/mobile/login.php");

    URLConnection conn = url.openConnection();
    conn.setDoOutput(true);
    OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());

    wr.write(data);
    wr.flush();

    // Get the response

    BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String line;
    while ((line = rd.readLine()) != null) {
        out += line;
    }

    wr.close();
    rd.close();

    if (!out.contains("ok"))
        return false;    

    // Send data
    URL url2 = new URL("http://www.tellafortune.com/mobile/getaddr.php");
    // URL url = new URL("http://www.hhhhtellafortune.com/mobile/login.php");

    URLConnection conn2 = url2.openConnection();
    conn2.setDoOutput(true);
    OutputStreamWriter wr2 = new OutputStreamWriter(conn2.getOutputStream());

    wr2.write(data);
    wr2.flush();

    // Get the response

    BufferedReader rd2 = new BufferedReader(new InputStreamReader(conn2.getInputStream()));
    String line2;
    out="";
    while ((line2 = rd2.readLine()) != null) {
        out+=line2;
    }

    wr2.close();
    rd2.close();

    cGlobals.strServerAddre=out.replaceAll("\n","");

    ////////////////////////////////////////////////////////////////////
    //////// Get port number if it is the scocial game
    if (ChatOrGame != 1) {
        // String port=new String(":4999/add");
        String port=new String(":4998/add");
        URL url3 = new URL( cGlobals.strServerAddre + port);

        URLConnection conn3 = url3.openConnection();
        conn3.setDoOutput(true);
        // crashes on this line
        OutputStreamWriter wr3 = new OutputStreamWriter(conn3.getOutputStream());

        wr3.write(data);
        wr3.flush();

        // Get the response

        BufferedReader rd3 = new BufferedReader(new InputStreamReader(conn3.getInputStream()));
        String line3;
        out="";
        while ((line3 = rd3.readLine()) != null) {
            out+=line3;
        }

        wr3.close();
        rd3.close();

        cGlobals.strPortNumber=out.replaceAll("PORT:","");
    }
} catch (Exception e) {
    new AlertDialog.Builder(this)
        .setTitle("Internet Error")
        .setMessage( "Cannot talk to server" )
        .setNeutralButton("close",new DialogInterface.OnClickListener();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:53:55.287

> 该代码导致异常 Networkonmainthread 异常，原因为空。

您正在主线程上执行网络 I/O。虽然在 Android 4.0 之前允许，但这从来都不是一个好主意。请将您的网络 I/O 移动到后台线程，例如由`AsyncTask`.

# java - 在Java中的方法调用中使用指针作为参数

> ID：14403548
> 
> 赞同：1
> 
> 时间：2013-01-18T16:45:21.777
> 
> 标签：java, pointers, methods, parameters, identifier

我有以下问题：

在方法调用中使用指针作为参数时，我得到“错误：预期标识符”错误。

这是我的代码：

```
class Data {
    Person a = new Person("John");
    Person b = new Person("Mary");

    a.willHug(b);       // Gets error: <identifier> at this line
}

class Person {
    private String name;
    private Person hugs;

    Person(String n){
        this.name = n;
    }

    public void willHug(Person p) {
        hugs = p;
    }    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:47:38.487

您应该将此代码放入方法中以执行它：

例如，主要方法：

```
class Data {

    public static void main(String args[]){
         Person a = new Person("John");
         Person b = new Person("Mary");

         a.willHug(b);       // Gets error: <identifier> at this line

    }
} 
```

我认为您应该阅读SO 的[这个](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)问题，以便更好地了解 Java 中如何传递参数。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:48:00.840

您需要将代码放在 main 方法中：

```
public static void main (String[] args) {

    Person a = new Person("John");
    Person b = new Person("Mary");

    a.willHug(b);
} 
```

同样在 Java 中，我们不将这些指针称为变量。变量具有对特定对象实例或原始值的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:47:38.173

你需要`a`用一个方法包围操作，可以是类方法、`main()`方法，甚至可能是构造函数：

```
class Data {
    Person a = new Person("John");
    Person b = new Person("Mary");

    public Data() {
        a.willHug(b);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T16:47:54.360

您正在调用 Data 类定义中的方法？这是不正确的，您要么需要一个“主要”来做到这一点，要么将其放在另一种方法中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T16:48:03.783

您在那里缺少一个方法（我介绍了一个名为 foo() 的方法）：

```
class Data {
    Person a = new Person("John");
    Person b = new Person("Mary");

    public void foo() {
        a.willHug(b);       // Gets error: <identifier> at this line
    }
}

class Person {
    private String name;
    private Person hugs;

    Person(String n){
        this.name = n;
    }

    public void willHug(Person p) {
        hugs = p;
    }    
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T16:48:08.697

问题不是因为您使用了指针（在 Java 中称为引用），而是因为这一行：

a.willHug(b);

在任何方法之外。您只能在该位置放置声明或初始化块 ({})。

# jquery - css无法更改输入文本字段之间的空间

> ID：14403550
> 
> 赞同：0
> 
> 时间：2013-01-18T16:45:23.637
> 
> 标签：jquery, html, css

我正在尝试使用此联系表单脚本[http://plugins.theodin.co.uk/jquery/contactable.1.3/index.html](http://plugins.theodin.co.uk/jquery/contactable.1.3/index.html)这很棒但是我有一个问题，因为我添加了 1 或 2 个字段，之间的空间字段更大，看起来很糟糕。如何删除输入文本字段之间的空格？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:48:05.850

您应该在自己的段落标签中添加新字段。

例如，要添加一个新字段，我会将其插入到另一个字段的上方或下方。

```
<p>
  <label for="new_field">New Field <span class="red"> * </span></label>
  <br>
  <input name="new_field" class="contact" id="new_field">
</p> 
```

最终代码类似于：

```
<form action="" method="" id="contactForm" style="margin-left: -10px;">
  <div class="holder">
    <p>
      <label for="new_field">New Field <span class="red"> * </span></label>
      <br>
      <input name="new_field" class="contact" id="new_field">
    </p>
    <p>
      <label for="name">Name<span class="red"> * </span></label>
      <br>
      <input name="name" class="contact" id="name">
    </p>
    <p>
      <label for="email">Email <span class="red"> * </span></label>
      <br>
      <input id="email" class="contact" name="email">
    </p>
    <p>
      <label for="message">Message <span class="red"> * </span></label>
      <br>
      <textarea cols="30" rows="4" class="message" name="message" id="message"></textarea>
    </p>
    <p>
      <input type="submit" value="SEND" class="submit">
    </p>
    <p class="disclaimer">Please feel free to get in touch, we value your feedback</p>
  </div>
</form> 
```

# iphone - iOS：图像在另一个旋转图像上

> ID：14403552
> 
> 赞同：1
> 
> 时间：2013-01-18T16:45:30.283
> 
> 标签：iphone, ios, uiimage

我有这种方法可以在另一个图像上添加图像并获得合并结果

```
- (UIImage*) createImage{
    UIImage *imageToShare = nil;
    UIImageView* imageView = [[UIImageView alloc] initWithFrame:[self.view frame]];
    imageView.image = currentImage;
    UIImageView* subView   = [[UIImageView alloc] initWithImage:imageToUse.image];
    [imageView addSubview:subView];

    UIGraphicsBeginImageContext(imageView.frame.size);
    [imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
    imageToShare = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [subView release];
    [imageView release];
    return imageToShare;
} 
```

它工作正常，因为我的 imageToShare 没问题，但问题是“subView”是我可以旋转和捏合以进行缩放和移动的图像......然后当我执行此方法时 subView 返回到其原始位置......什么可以我是否将其保存在 imageView 上的状态位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:57:10.463

如果你想合并两张图片，保留合并后的结果，让用户进一步操作，一个好的方法是绘制到一个特定大小的离屏上下文，然后创建一个CGImageRef，然后将它分配给图片看法。看看[这个问题和答案](https://stackoverflow.com/questions/8637651/core-graphics-how-to-get-a-cgimageref-from-context-drawn-images)，看看它是如何完成的。

# delphi - 如何在 teechart 7.12 中为特定的 XLAbel[i] 定义字体颜色

> ID：14403553
> 
> 赞同：0
> 
> 时间：2013-01-18T16:45:29.970
> 
> 标签：delphi, delphi-7, teechart

如何定义`Color`特定的`XLabel[i]`？

像这样，

```
Chart1.Series[0].XLabel[idxMP].FONT.Color := clBLue; 
```

但这不起作用。

我有 Delphi 7 和 Teechart 7.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:58:13.367

非常感谢！但只有这一行是正确的：（没有格式）

Chart1.Axes.Bottom.Items.Add(Chart1[0].XValue[i], Chart1[0].Labels[i]).Font.Color:=myColor;

但它现在工作正常！谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:50:16.950

您有 2 个选项：

第一个是使用标准标签，应该如下所示：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  Series1.FillSampleValues(20);
  Series2.FillSampleValues(20);
  Chart1.BottomAxis.OnDrawLabel := DrawBottomAxis;
end;

procedure TForm1.DrawBottomAxis(Sender:TChartAxis; var X,Y,Z:Integer; var Text:String;
  var DrawLabel:Boolean);
var
  lValue: Integer;
begin
  lValue := StrToIntDef(Text, -1);
  if lValue < 0 then
    Sender.LabelsFont.Color := clRed
  else
  if ((lValue mod 2) = 1) then
    Sender.LabelsFont.Color := clGreen
  else
    Sender.LabelsFont.Color := clYellow;
end; 
```

第二个是使用自定义标签，如以下代码片段所示：

```
procedure TForm1.FormCreate(Sender: TObject);
var i: Integer;
    dt: TDateTime;
    myColor: TColor;
begin
  Chart1.AddSeries(TLineSeries.Create(Self));

  for i:=0 to 10 do
  begin
    dt:=Now + i;
    Chart1[0].AddXY(dt, random, DateToStr(dt));
  end;

  Chart1.Axes.Bottom.Items.Clear;

  for i:=0 to Chart1[0].Count-1 do
  begin
    if i mod 2 <> 0 then
      myColor:=clRed
    else
      myColor:=clBlack;

    Chart1.Axes.Bottom.Items.Add(Chart1[0].XValue[i], Chart1[0].Labels[i]).Format.Font.Color:=myColor;
  end;

  Chart1.Axes.Bottom.LabelsAngle:=90;
end; 
```

# svg - 将 SVG 过滤器应用于 SVG 的一部分

> ID：14403558
> 
> 赞同：1
> 
> 时间：2013-01-18T16:45:40.240
> 
> 标签：svg, svg-filters

这可能吗？我有一个 svg，我想用一个透明的矩形覆盖该 svg 的*一部分*。是否可以让被覆盖的 SVG 部分改变颜色或发光等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:39:13.453

是的。您可以使用 feComposite "in" 提取重叠区域，对其应用效果，然后将结果重新合成到原始图形的顶部。如果您有可变的不透明度，事情会变得更加复杂，但概念是相同的。用你的 SVG 发布一个小提琴，我会为你写一个过滤器。

更新：

这是你如何做到的：

```
 <filter id="greenify">

        <feFlood flood-color="#ff0770" flood-opacity="1" x="50" y="30" height="40" width="260" result="A"/> 
        <feComposite operator="in" in2="SourceGraphic" in="A" result="B"/>
        <feColorMatrix type="hueRotate" in="B" result="C" 
            values ="90" /> 
        <feComposite operator="over" in2="SourceGraphic" in="C"/>

   </filter> 
```

第一个 feFlood 为您创建一个颜色矩形。然后 feComposite 提取重叠区域。feColorMatrix 改变了它的颜色（所以你知道它不是结果中的原始矩形），然后 feComposite 将新的绿色区域覆盖在原始 SourceGraphic 的顶部。

[http://jsfiddle.net/jsfmullany/Jys7a/1/](http://jsfiddle.net/jsfmullany/Jys7a/1/)

# r - 来自概率向量的马尔可夫链转移矩阵

> ID：14403569
> 
> 赞同：0
> 
> 时间：2013-01-18T16:46:05.553
> 
> 标签：r, markov-chains

完整的 data.frame 概述：

```
'data.frame':   29 obs. of  3 variables:
$ FirmDatum : Date, format: "1982-12-31" "1983-03-31" "1983-06-30" ...
$ fittedSurv: num  0.884 0.839 0.779 0.746 0.817 ...
$ Rating    : chr  "Aa" "Aaa" "B" "Bb" ... 
```

该列`fittedSurv`包含概率，该列`Rating`对应于该`fittedSurv`时间点的概率 ( )。

对于马尔可夫链转换矩阵，我需要额外的列。仅对概率的单列（向量）进行纯粹的重新采样是无法单独进行的。

就推理而言，最有效的方法是什么？
关于正确的 R 包的可能指示就足够了 - 一个例子将是一个奖励。

@乔纳森。很可能是这样。然而，我怀疑随时间变化的概率可以被引导或重新采样概率向量，以便创建有意义的概率列。就像是：

```
A <- data.frame(X=FrameTs$Rating)
B <- data.frame(replicate(20, sample(as.character(A$X), size=100, replace = TRUE))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:49:03.227

可能的解决方案（我不相信）是：

```
A <- data.frame(X=FrameTs$Rating)
w <- FrameTs$fittedSurv/sum(FrameTs$fittedSurv)
B <- data.frame(replicate(10, sample(as.character(A$X), size=10, replace = TRUE, prob=w))) 
```

给定概率，它产生等权矩阵：

```
 X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
1   A  A  A  A  A  A  B  A  B   B
2   B  A  A  A  A  A  A  A  A   A
3   A  A  A  B  C  A  A  B  B   A
4   A  A  A  A  A  A  A  A  A   A
5   B  A  A  A  B  A  A  A  A   B
6   A  A  B  B  B  A  A  B  A   A
......and so on...

Of course the matrix B size can be extended via replicate(1000, sample(... 
```

基于这个“概率”（评级）矩阵，可以得到马尔可夫转移矩阵。（包 ms​​m 等）。输出数字似乎直观且正确，但我不相信这种方法

# java - 如何在java7中为特定用户设置文件访问属性

> ID：14403570
> 
> 赞同：1
> 
> 时间：2013-01-18T16:46:08.840
> 
> 标签：java, nio, java-7, nio2

我正在使用 java7 文件 api。用于设置我搜索并能够更改所有者属性的文件的所有者。我的代码是

```
public static void main(String[] args){

    Path zip=Paths.get("/home/ritesh/hello");
    try{ 
        FileOwnerAttributeView view 
             = Files.getFileAttributeView(zip,FileOwnerAttributeView.class);

        UserPrincipalLookupService lookupService
             =FileSystems.getDefaullt().getUserPrincipalLookupService();

        UserPrincipal owner=null;

        try{ owner =lookupService.lookupPrincipalByName("rashmi");}
        catch(UserPrincipalNotFoundException e){System.out.println("User not found");}

        view.setOwner(owner);

    } catch (IOException e){
        e.printStackTrace();}
    } 
```

从此代码中，我可以设置文件的所有者。但我的任务是授予用户（rashmi）对文件的读取访问权限，并为另外一个用户授予读取/写入访问权限。如何授予用户特定访问权限，请给予一些代码或链接，以便我可以完成我的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T15:37:44.333

这取自 Java 7 Javadoc 用于`AclFileAttributeView`（稍作重新格式化）：

```
 // lookup "joe"
 UserPrincipal joe = file.getFileSystem().getUserPrincipalLookupService()
     .lookupPrincipalByName("joe");

 // get view
 AclFileAttributeView view = Files.getFileAttributeView(file,
                                       AclFileAttributeView.class);

 // create ACE to give "joe" read access
 AclEntry entry = AclEntry.newBuilder()
     .setType(AclEntryType.ALLOW)
     .setPrincipal(joe)
     .setPermissions(AclEntryPermission.READ_DATA,
                     AclEntryPermission.READ_ATTRIBUTES)
     .build();

 // read ACL, insert ACE, re-write ACL
 List<AclEntry> acl = view.getAcl();
 acl.add(0, entry);   // insert before any DENY entries
 view.setAcl(acl); 
```

您需要使用正确的`AclEntry`代码。请参阅[AclFileAttributeView Javadoc](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/AclFileAttributeView.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T15:46:30.937

你必须了解操作系统的权限策略，你不能为不同的用户指定不同的权限，你必须这样做。

文件权限用 3 个八进制数（以 8 为底）定义，即 3 组 3 个二进制数，每 3 位代表`Read,Write,Execute` 第一组是`Owner`，第二组是`Group`，第三组是`Other`

因此，如果您想授予不同的权限，您可以将 Group 属性设置为具有读取和写入权限，而 Other 只是读取权限，之后，您必须将您希望能够读取和写入的用户添加到该组.

# linux - 如何在bash脚本中排序？

> ID：14403572
> 
> 赞同：0
> 
> 时间：2013-01-18T16:46:09.487
> 
> 标签：linux, bash, shell, unix

> **可能重复：**
> [此脚本无法按年龄正确排序](https://stackoverflow.com/questions/14388467/this-script-wont-sort-correctly-by-age)

我绝对不知道如何让这个脚本按出生日期对 Birthdays.csv 中的信息进行排序。我知道 sort -n 命令，但是我希望按 DOB 对文件birthdays.csv 进行排序。我该怎么做呢？

下面的脚本获取用户信息和出生日期，然后将这些信息放入一个名为“birthday.csv”的文件中。

然后我需要按出生日期对“birthdays.csv”进行排序，然后显示这个新排序的信息。我还计算了每个人到今天为止的年龄。我遇到的问题是按出生日期对birthdays.csv 中的信息进行排序。有人可以让我知道我会怎么做吗？

脚本如下：

```
a=0
while [ $a -lt 2 ];
do
    echo Please enter a first name
    read firstName
    echo Please enter last name
    read lastName
    echo Please enter phone number
    read phoneNumber
    echo Please enter date of birth - format dd/mm/yyyy
    read dob
    echo "$firstName,$lastName,$phoneNumber,$dob" >> Birthdays.csv
    echo If you would like to add another person press 1 or enter 2 to proceed
    read a
done

    INPUT=./Birthdays.csv
    OLDIFS=$IFS
    IFS=","
    [ -f ${INPUT} ] && while read Name Surname Telephone DOB
    do
                    birthMonth=${DOB:0:2}
                    birthDay=${DOB:3:2}
                    birthYear=${DOB:6:4}

                    currentDate=`date +%d/%m/%Y`

                    currentMonth=${currentDate:0:2}
                    currentDay=${currentDate:3:2}
                    currentYear=${currentDate:6:4}

                    if [[ "$currentMonth" -lt "$birthMonth" ]] || [[ "$currentMonth" -eq "$birthMonth" && "$currentDay" -lt "$$birthDay" ]]
                    then
                            let Age=currentYear-birthYear-1
                    else
                            let Age=currentYear-birthYear
                    fi

            echo "Name : $Name"
            echo "Surname : $Surname"
            echo "Telephone : $Telephone"
            echo "DOB : $DOB"
            echo "Age : $Age"
            echo "##########################################"
done < $INPUT
IFS=$OLDIFS
    echo $DATE

exit 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:22:43.270

添加这一行

```
sort -o $INPUT -n -t , -k4.7,4 -k4.4,4.5 -k4.1,4.2 $INPUT 
```

后

```
INPUT=./Birthdays.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:42:02.760

试试 -- ### cat Birthdays.csv | 排序 --field-separator='/' --key=3,5

# ios - iOS - 在应用内保存视频

> ID：14403574
> 
> 赞同：0
> 
> 时间：2013-01-18T16:46:15.297
> 
> 标签：ios, objective-c, cocoa-touch, video

我最近在 stackoverflow 上找到了如何在 App 中存储图像的答案：

```
-(void) saveImage:(UIImage *)image withFileName:(NSString *)imageName ofType:(NSString *)extension inDirectory:(NSString *)directoryPath {
if ([[extension lowercaseString] isEqualToString:@"png"]) {
    [UIImagePNGRepresentation(image) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"png"]] options:NSAtomicWrite error:nil];
} else if ([[extension lowercaseString] isEqualToString:@"jpg"] || [[extension lowercaseString] isEqualToString:@"jpeg"]) {
    [UIImageJPEGRepresentation(image, 1.0) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"jpg"]] options:NSAtomicWrite error:nil];
} else {
    ALog(@"Image Save Failed\nExtension: (%@) is not recognized, use (PNG/JPG)", extension);
}
} 
```

如何存储用户从照片/视频库中选择的视频并将其保存在应用程序中？有什么不同吗？我正在尝试跟踪用户想要上传的视频列表，当他/她准备好时，他们可以将所有这些视频上传到应用程序的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:35:36.123

好吧，我不太了解您的目的，但您可以尝试使用`NSFileManager`以便将文件从一个 URL 复制到另一个：

```
NSError *error;
[[NSFileManager defaultManager] copyItemAtURL:mediaURL toURL:outputURL error:&error]; 
```

如果您需要以某种方式处理您的电影（即裁剪、更改质量），您应该使用 AVExportSession：

```
+ (void)writeMovieAtURL:(NSURL *)mediaURL
                  toURL:(NSURL *)outputURL
             withQality:(NSInteger)quality
      completionHandler:(void (^)(NSURL *, NSError *))completion {

    AVURLAsset *asset = [AVURLAsset URLAssetWithURL:mediaURL options:nil];

    NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:asset];
    NSString *exportPreset;

    switch (quality) {
        case 0 : { exportPreset = AVAssetExportPreset1280x720;      } break;
        case 1 : { exportPreset = AVAssetExportPreset640x480;       } break;
        case 2 : { exportPreset = AVAssetExportPresetMediumQuality; } break;
        case 3 : { exportPreset = AVAssetExportPresetLowQuality;    } break;
    }

    if (nil != exportPreset && [compatiblePresets containsObject:exportPreset]) {
        AVAssetExportSession *exportSession = [[AVAssetExportSession alloc]
                                  initWithAsset:asset presetName:exportPreset];

        exportSession.outputURL = outputURL;

        exportSession.outputFileType = AVFileTypeQuickTimeMovie;

        // set some params to the session

        [exportSession exportAsynchronouslyWithCompletionHandler:^{                
            switch ([exportSession status]) {
                case AVAssetExportSessionStatusCompleted: {                       
                    completion(outputURL, nil);
                    [exportSession release];
                } break;
                case AVAssetExportSessionStatusWaiting : {
                    NSLog(@"Export Waiting");
                } break;
                case AVAssetExportSessionStatusExporting : {
                    NSLog(@"Export Exporting");
                } break;
                case AVAssetExportSessionStatusFailed : {
                    completion(outputURL, [exportSession error]);
                    [exportSession release];
                } break;
                case AVAssetExportSessionStatusCancelled : {
                    NSDictionary *userInfo = [NSDictionary dictionaryWithObject:@"Movie export session canceled"
                                                                         forKey:@"ocalizedDescription"];                        
                    NSError *error = [NSError errorWithDomain:@"your.domain" 
                                                         code:123 
                                                     userInfo:userInfo];                        
                    completion(outputURL, error);
                    [exportSession release];
                } break;
            }
        }];
    }
} 
```

# c# - 如何确保异常类型安全？

> ID：14403593
> 
> 赞同：1
> 
> 时间：2013-01-18T16:47:23.773
> 
> 标签：c#, wcf, exception, sqlexception, servicemodelex

我正在使用一些改编自 Lowy 的 ServiceModelEx 的代码将异常打包到`FaultException`.NET 中，通过网络发送，然后在客户端将其解包为 .NET `Exception`。我的服务器理论上可以抛出任何类型的异常，但我们以 a`SqlException`为例。

Lowy使用反射来解包，所以代码需要检查异常的类型来判断是否可以构造一个有效的对象：

```
 static Exception ExtractException(ExceptionDetail detail)
    {
        Exception innerException = null;
        if (detail.InnerException != null)
        {
            innerException = ExtractException(detail.InnerException);
        }
        Type type = Type.GetType(detail.Type);
        Debug.Assert(type != null, "Make sure this assembly contains the definition of the custom exception");
        Debug.Assert(type.IsSubclassOf(typeof(Exception)));

        //...
    } 
```

两个问题

1.  使用 SqlExceptions，第一个 Debug.Assert 失败。为了让他们在客户端上解决，我设置了对 的引用`System.Data`，但没有运气。我假设这是因为`System.Data`在该客户端没有任何实际调用的情况下，编译器会删除引用？在短期内，我可以做些什么来让我的客户解决这个`.GetType`电话？

2.  在不丢失细节粒度（例如）并且不需要客户端的任何程序集引用的情况下“重新抛出”`LambdaException`作为基础的正确方法是什么？这甚至可能吗？`ExceptionDetail``StackTrace`

**编辑**：这是在服务器上包装`ExceptionDetail`为 a的源。`FaultException`同样，这主要来自 Lowy 的 ServiceModelEx：

```
 public static void PromoteException(Type serviceType, Exception error, MessageVersion version, ref Message fault)
    {
        //Is error in the form of FaultException<T> ? 
        if (error.GetType().IsGenericType && error is FaultException)
        {
            Debug.Assert(error.GetType().GetGenericTypeDefinition() == typeof(FaultException<>));
            return;
        }

        ExceptionDetail exdetail = new ExceptionDetail(error);
        FaultException<ExceptionDetail> faultException = new FaultException<ExceptionDetail>(exdetail);

        MessageFault messageFault = faultException.CreateMessageFault();
        fault = Message.CreateMessage(version, messageFault, faultException.Action);

        //...
    } 
```

# javascript - 使用 cookie 显示可变图像

> ID：14403597
> 
> 赞同：0
> 
> 时间：2013-01-18T16:47:32.703
> 
> 标签：javascript, html, cookies, image

我想根据某个 cookie 值在网页上显示图像，该 cookie 值通过点击该页面传递/创建。我正在考虑使用 onClick 操作编写 cookie，认为这将是最简单的，但我仍然对想法持开放态度。这是该链接的示例。

a href="myLink.html" onClick="setCookie(BRAND,ABC,3600);return true;">

下面是我从网上提取的一些代码，它们以基本的方式模仿了我正在寻找的内容。我只是不知道如何让页面上的js调用获取cookie值并设置图像。

我提前感谢您的帮助，并感谢您的阅读。

```
<script type="text/javascript">
    var picData = [
        ['ABC','ABC.jpg'],
        ['DEF','DEF.jpg'],
        ['GHI','GHI.jpg']
    ];
    window.onload=function(){
        var cookieValue = 'ABC';  //substitute your code to get the cookie value for this line
        for(i=0; i < picData.length; i++){
            if(cookieValue == picData[i][0]) {
               document.getElementById('imgCont').src = picData[i][1];
               i=picData.length;
            }
        }
    }
</script>

<body>
    <div>
        <img id="imgCont" src="" alt="" />
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:20:13.357

您是否考虑过使用 PHP 代替？我觉得这会更直接。使用[setcookie](http://php.net/manual/en/function.setcookie.php)，然后使用简单的 if 和 elseif 语句来检查 cookie 是什么，并显示相应的图像。

这似乎比您尝试使用 JavaScript 执行的操作要简单得多，但也许这只是因为我更频繁地使用 PHP...

所以也许像

```
$value = "something"; /* sets the value of the cookie */
setcookie("imagedisplay", $value, time()+3600);  /* expire in 1 hour */ 
```

在上一页，然后检查它只需使用：

```
if($_COOKIE["imagedisplay"] == "something") {
$imageurl="ABC.jpg";
}
elseif($_COOKIE["imagedisplay"] == "something else") {
$imageurl="DEF.jpg";
}
else {
$imageurl="GHI.jpg";
} 
```

然后再用一些PHP输出对应的URL作为图片的来源。就像是

```
<img src="<? echo $imageurl; ?>" /> 
```

尚未测试此代码，但它应该可以工作。

# jquery - jQuery 顺序函数

> ID：14403609
> 
> 赞同：1
> 
> 时间：2013-01-18T16:47:58.330
> 
> 标签：jquery, function, sequential

我希望一个接一个地运行多个 jQuery 函数。关于这个有几个线程，但它们似乎只显示了两个功能是如何完成的。我的第二个功能似乎没有执行。我在哪里滑倒了？[http://jsfiddle.net/BSYDv/](http://jsfiddle.net/BSYDv/)

```
$(document).ready( 
    function(){  
        $(function() { alert("1")}, 
          function() { alert("2")}, 
          function() { alert("3")}
         );                     
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:52:11.797

您可以使用自动调用的匿名函数这样编写它：

[http://jsfiddle.net/BSYDv/2/](http://jsfiddle.net/BSYDv/2/)

```
$(document).ready( 
    function(){ 
          (function() { alert("1")})(), 
          (function() { alert("2")})(), 
          (function() { alert("3")})();                     
}); 
```

# android - 如何使用 setResult() 方法将可绘制图像资源从被调用活动发送到调用活动

> ID：14403611
> 
> 赞同：0
> 
> 时间：2013-01-18T16:48:02.450
> 
> 标签：android, android-intent, android-activity

大家好，我是一个开发安卓应用程序的新手，我有一个应用程序说whatsapp，我们可以使用它从图库中选择图片并将其发送给我们的朋友。同样，我正在创建一个类似的应用程序的活动来响应 ACTION_PICK 意图..

假设我已经使用 getIntent() 从 whatsapp 接收到我的活动的意图，并且我将使用 setResult() 将结果发送回 .. 在两者之间我想知道如何将可绘制图像资源从我的应用程序插入到什么应用程序通过 setResult 以便whatsapp 可以接受我在我的应用程序中单击的图像并将其发送给我的朋友。

下面的代码是来自 developer.android.com 的参考

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    // Get the intent that started this activity
    Intent intent = getIntent();
    Uri data = intent.getData();

    // Figure out what to do based on the intent type
    if (intent.getType().indexOf("image/") != -1) {
        // Handle intents with image data ...

       **// wanted to know what code must be entered here.** 

    } else if (intent.getType().equals("text/plain")) {
        // Handle intents with text ...
    }
}

// Create intent to deliver some kind of result data
Intent result = new Intent("com.example.RESULT_ACTION", Uri.parse("content://result_uri");
setResult(Activity.RESULT_OK, result);
finish(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:19:11.457

最简单的方法是 @wtsang02 建议的。如果您不想接触文件系统，还有其他几种方法。

1.  使用[MemoryFile](http://developer.android.com/reference/android/os/MemoryFile.html)。然后，您可以获得一个易于在 Intent 中传递的文件描述符（检查[this](https://stackoverflow.com/questions/8165216/what-is-the-use-of-memoryfile-in-android)和[this](http://www.androidadb.com/class/android/os/MemoryFile.java.html)）。

2.  我认为这是一种更清洁的方法，但是您需要对其进行基准测试以查看它是否适合您。您可以[从 Drawable 获取字节数组](https://stackoverflow.com/a/4435827/181714)，将其作为[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)发送，然后从 byte[] 重建 Drawable：

    ```
    byte[] drawableBytes = [your byte array];
    ByteArrayInputStream is = new ByteArrayInputStream(drawableBytes);
    Drawable drw = Drawable.createFromStream(is, "drawable"); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:56:00.750

传递图像可能会很慢，因为有时图像可能非常大。您可以将其保存到硬盘并将文件路径传递回您的活动并让活动打开它。

# javascript - ASP.NET 调用 JavaScript 函数 OnClick

> ID：14403616
> 
> 赞同：0
> 
> 时间：2013-01-18T16:48:12.693
> 
> 标签：javascript, asp.net

我有一个带有 FileUpload 控件的 asp.net 页面，以便用户可以浏览以选择文件。我想分配一个默认值，这样用户就不需要浏览，除非他们做的事情不正常，但文件属性是只读的。

所以我将 FileUpload 控件的 Visible 属性设置为 false 并放入一个文本框和按钮。在那个文本框中，我输入了我想要的默认路径。当用户单击按钮时，我希望它打开单击 FileUpload 控件的浏览窗口。我有这个：

```
<head>
    <meta content="Microsoft Visual Studio .NET 7.1" name="GENERATOR"/>
<meta content="Visual Basic .NET 7.1" name="CODE_LANGUAGE"/>
<meta content="JavaScript" name="vs_defaultClientScript"/>
<meta content="http://schemas.microsoft.com/intellisense/ie5"name="vs_targetSchema"/>   

<script src="common.js" type="text/javascript"></script>

    <script type="text/javascript">
        function fileBrowse()
        {
            document.getElementById('FileBrowse').click();
        }
    </script>

</head> 
```

然后在代码中我有这个：

```
Protected Overrides Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    MyBase.Page_Load(sender, e)

    Me.btnINI.Attributes.Add("onclick", "javascript:fileBrowse();")
End Sub 
```

FileBrowse 是页面上 FileUpload 控件的名称。btnINI 是我要启动浏览的按钮的名称。

当我单击按钮时，什么也没有发生 - 没有错误，什么都没有启动。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:54:31.920

我的猜测是 id 不正确。尝试将 FileBrowser 控件的 ClientID 作为参数传递给 javascript 函数。此外，检查该函数是否实际上是使用警告框调用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:01:10.060

我很确定您不能通过 javascript 在文件选择对话框中设置任何值。这样做存在严重的安全问题，并且浏览器会阻止它。

# c - ++ 的优先级高于逻辑运算符？

> ID：14403618
> 
> 赞同：0
> 
> 时间：2013-01-18T16:48:21.313
> 
> 标签：c, operator-keyword

如果是这样，以下程序的输出将是什么。

```
#include<stdio.h>
int main()
{
   int i=-3, j=2, k=0, m;
   m = ++i || ++j && ++k;
   printf("%d, %d, %d, %d\n", i, j, k, m);
   return 0;
} 
```

在 gcc 下输出是 ** -2 2 0 1 ** 但是如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:50:09.540

`++i`具有 value `-2`，它不为零，因此在布尔上下文中为“真”，短路条件停在那里`j`并`k`保留其原始值。布尔值“true”转换为 value 的整数，`1`赋值给`m`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:03:57.220

优先级决定了操作数和运算符的分组；它*不*决定评估的顺序。`||`和`&&`强制从左到右的评估；`++i`首先被评估。如果结果不为 0（例如在本例中），则`++j && ++k`根本不计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:51:35.280

那是因为逻辑运算符会*进行短路*评估。

一旦知道结果，就不再进行评估。

在您的情况下， as`++i`评估为`true`并且后跟一个 or，甚至不再评估子表达式。

“优先级”发生的情况是：要计算`||`（最低“优先级”）的结果，编译器需要首先计算左边的结果。在您的情况下，`true`由于整个表达式的结果是已知的，因此不需要更多的计算。

如果需要评估右侧，`++`则将在`||`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T04:43:35.163

其他人已经解释了为什么'||'之后的部分 不评估。但是，我想强调导致这种行为的标准的一个非常重要的部分。'||' 逻辑运算符充当*序列点*，无论同一表达式中的其他运算符如何，都需要从左到右的评估顺序。

引用标准[ISO/IEC 9899](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf) (6.5.13/14, pg 88)

> 不像按位 | 运算符，|| 运算符保证从左到右的评估；在计算第一个操作数之后有一个序列点。如果第一个操作数比较不等于 0，则不计算第二个操作数。

换句话说，表达式“a + b * c”与“a || b && c”不同，前者被视为一个没有序列点的表达式，而后者是一个有序列点的表达式。顾名思义，序列点强制评估序列。一旦对完整表达式的结果求值（例如，当|| 的LHS 求值为'1'），就可以停止对表达式的进一步求值。因此，您看到的顺序。

# java - 不了解 FileWriter 类的使用

> ID：14403621
> 
> 赞同：1
> 
> 时间：2013-01-18T16:48:30.193
> 
> 标签：java

```
 import java.util.*;
 import java.io.*;
public class ProductInfoDwnld{
static String abc;
public static void addProductToCart(String a_CartId, String a_productId, String a_desc, String a_price){
    BufferedWriter bw = null;
    try{
        File yourFile = new File(a_CartId);
        // Check if yourFile exists
        if(!yourFile.exists())
            yourFile.createNewFile(); // Create a new yourFile if it does not exist
        else{
            try {
                FileWriter fileWrite = new FileWriter(yourFile,true);
                fileWrite.write(a_productId + " " + a_desc + " " + a_price); // write(String str);
                fileWrite.close();
            }catch (IOException ioe) {
                ioe.printStackTrace();
            }
        }
        FileOutputStream oFile = new FileOutputStream(yourFile,false);
    }catch(Exception e){
        System.out.println("Error");
    }
}
public static void main(String[] args){
    String CartID = "001.txt";
    String productId="001", Desc = "Laptop", price="20000Rs";
    addProductToCart(CartID,productId,Desc,price);
}
} 
```

使用下面的代码，我尝试使用 FileWriter 类写入文件 001.txt。但是数据没有被写入文件。我无法理解原因。需要帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:58:31.630

该行`FileOutputStream oFile = new FileOutputStream(yourFile,false);`正在覆盖您的文件。删除它，它会工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:53:38.450

重新格式化您的代码：

```
import java.util.*;
import java.io.*;
public class ProductInfoDwnld{
    static String abc;
    public static void addProductToCart(String a_CartId, String a_productId, String a_desc, String a_price){
        BufferedWriter bw = null;
        try{
            File yourFile = new File(a_CartId);
            // Check if yourFile exists
            if(!yourFile.exists()) {
                yourFile.createNewFile(); // Create a new yourFile if it does not exist
            }

                    // Note you had an else block here:
                    // If the file didn't exist you only would create it
                    //  and not write any data to it.
                    // If the file exists you'd write data to it.
                    // I removed the else block

            try {
                FileWriter fileWrite = new FileWriter(yourFile,true);
                fileWrite.write(a_productId + " " + a_desc + " " + a_price); // write(String str);
                fileWrite.flush();
                fileWrite.close();
            }catch (IOException ioe) {
                ioe.printStackTrace();
            }
        }catch(Exception e){
            System.out.println("Error");
        }
    }
    public static void main(String[] args){
        String CartID = "001.txt";
        String productId="001", Desc = "Laptop", price="20000Rs";
        addProductToCart(CartID,productId,Desc,price);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:50:07.340

尝试添加：

```
fileWrite.flush(); 
```

在关闭 FileWriter 对象之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:51:56.583

我曾经在现有文件中遇到过这个问题。检查您是否对现有文件具有写入权限。同样在创建文件时检查文件权限是否设置正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T17:03:17.400

为什么文件写入发生在 else 循环中。如果文件不存在，那么第一次迭代只会创建文件并退出。它不会做实际的写作。试试这个：

```
if(!yourFile.exists())
        yourFile.createNewFile(); // Create a new yourFile if it does not exist

    try {
        FileWriter fileWrite = new FileWriter(yourFile,true);
        fileWrite.write(a_productId + " " + a_desc + " " + a_price); // write(String str);
        fileWrite.close();
    }catch (IOException ioe) {
        ioe.printStackTrace();
    } 
```

# php - Jquery POST提交空白变量

> ID：14403623
> 
> 赞同：0
> 
> 时间：2013-01-18T16:48:47.690
> 
> 标签：php, javascript, jquery, mysql

我已经盯着这个太久了，只是不知道出了什么问题。我正在尝试从 javascript 中的 jquery 表单中提取表单数据，然后将其发送到 php 页面，该页面将其发布到 mysql 服务器。这是我的代码：

“index2.html”（只是表单页面）

```
<title>Login Test</title>
</head>
<body>

<div data-role="page">
<div data-role="header">
    <h1>Login</h1>
</div>

<div data-role='content'>

    <form id="testform" action="/ajaxtest/userInfo2.php">
    <label for="name" class="ui-hidden-accessible">Name:</label> 
    <input type="text" name="usr" placeholder="Username"/>
    <label for="password" class="ui-hidden-accessible">Age :</label> 
    <input type="text" name="age" placeholder="Password"/>
    <button id="sub">Submit</button>
    </form>

</div>

</div>
</body> 
```

接下来是正确包含在“index2.html”中的“my_script.js”

```
$("#sub").click( function() {
event.preventDefault();
 $.post( "/ajaxtest/userInfo2.php", 
         $.(#testform).serializeArray() 
  );
}); 
```

最后是“userInfo2.php”，这是将数据提交到我的表的 php 页面

```
<?php
$conn = mysql_connect('localhost', 'root', 'root');
$db = mysql_select_db('myDatabase');
$name = $_POST['usr'];

mysql_query("INSERT INTO ajaxtest (name) VALUES ('$name')");

?> 
```

应该知道，我的表只有一个字段：“name”。我只是想让一个领域发挥作用，然后继续扩展。每次我尝试对此进行测试时，它都会在我的 userInfo2.php 页面上打印“未定义”，并将一个空白名称插入我的表中。

我尝试在我的 php 中添加一条 GET 行来检索与 POST 相同的变量，这很有效。它向表中添加了正确的名称，但仍打印“未定义”。但是，我仍然希望 POST 工作......

我真的希望这只是我忽略的一些小问题，但在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:51:28.223

你的选择是错误的

```
$.(#testform) 
```

应该

```
$('#testform') 
```

你应该传入事件参数

```
$("#sub").click( function(event) // <-- here 
```

# sql-server - 更改连接字符串后 Visual Studio 突然停止访问数据库

> ID：14403627
> 
> 赞同：1
> 
> 时间：2013-01-18T16:48:54.777
> 
> 标签：sql-server, database, visual-studio, connection-string

我在 Visual Studio 2008 上有一个正在运行的系统，它总是能够成功访问数据库。我正在使用 SQL Express 2005

我有这个字符串：

```
Driver={SQL Server}; Server = MyName-PC ; Database=RBMonDB; Uid=; Pwd=; 
```

但是连接字符串上的服务器卡在一台PC上。所以我尝试制作一个通用字符串并做到了这一点。

```
Driver={SQL Server}; Server = . ; Database=RBMonDB; Uid=; Pwd=; 
```

我用“.”替换了原来的服务器名称。

它第一次正常运行。但是在第二次尝试运行它之后，我得到了这个：

```
[Microsoft][ODBC SQL Server Driver]Neither DSN nor SERVER keyword supplied 
```

发生了什么？我真的对此一无所知。我还是新手，请谅解。谢谢

# php - 在 LAMP 堆栈上启用 ftp_ssl_connect 的指令

> ID：14403630
> 
> 赞同：0
> 
> 时间：2013-01-18T16:49:03.200
> 
> 标签：php, openssl

我正在尝试使用`ftp_ssl_connect`功能（在 LAMP Stack 上）连接到 ftps（不是 sftp）站点。我检查了 openssl 灌输，并且可用。我没有评论`extension=php_openssl.dll`，这给了我以下错误。

错误信息：

`PHP Warning: PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/php_openssl.dll' - /usr/lib64/php/modules/php_openssl.dll: cannot open shared object file: No such file or directory in Unknown on line 0
SSL not working`

当我注释掉时`extension=php_openssl.dll`，我收到错误消息`SSL not working.`

如何启用 SSL 或使 SSL 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:10:10.357

`L`in表示 Linux ，`LAMP`.dll 文件适用于 Windows。你需要从 yum 或 apt 或 ports 或任何你的 linux 发行版使用的安装 php_openssl 包。您可能只需要在 php.ini 或 extensions.ini 中找到 openssl.so 的行并取消注释。

# c# - 客户端 C# 上的文件重命名

> ID：14403635
> 
> 赞同：0
> 
> 时间：2013-01-18T16:49:34.847
> 
> 标签：c#, file-io, client-side

我需要根据客户要求在客户端重命名文件。我了解 FF，Chrome 不提供文件路径，而 IE 提供了在该区域启用的文件路径选项。

通过所有这些设置，我得到文件路径 From `uploadedFile.PostedFile.FileName`;

现在当我打电话时`File.Move(stroldfilename, strNewfilename)`，它正在服务器机器上而不是客户端机器上寻找该文件。请指教 。

例如文件路径是`C:\Test.dat`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:54:40.903

服务器无权访问客户端的文件系统，因此无法重命名客户端的文件。这将导致重大安全问题，因为网站将能够更改客户端操作系统上的文件。

在服务器上收到文件后，您可能只想用不同的名称将文件保存在服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:53:37.487

您不能从浏览器在客户端移动/编辑文件。但是，用户可以上传文件，然后将相同的文件保存到任何他想要的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:55:27.150

您不能从服务器移动客户端文件。移动必须发生在客户端本身。您应该能够在 Google 上搜索“JavaScript 文件移动”以获取通过 JavaScript 在客户端上执行此操作的示例。这是一个例子： [http ://www.roseindia.net/javascript/javascriptexamples/javascript-move-file.shtml](http://www.roseindia.net/javascript/javascriptexamples/javascript-move-file.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T20:46:46.647

我通过遵循 [http://www.roseindia.net/javascript/javascriptexamples/javascript-move-file.shtml解决了这个问题](http://www.roseindia.net/javascript/javascriptexamples/javascript-move-file.shtml)

它不适用于 FF 或 Chrome，但适用于 IE。为此需要进行一些设置。尝试（在 IE 中）转到工具 --> Internet 选项 --> 安全 --> 自定义级别并在 ActiveX 控件和插件下，然后启用“初始化和脚本未标记为可安全执行脚本的 ActiveX 控件。

我完全理解这是安全灾难，但它已经工作了一个多月。有时你会得到这样的客户:-)。

在我丢失登录信息并重新创建另一个用户时将其发布在这里。

# excel - 将列的子集转换为行并将剩余列保留在 Excel VBA 中

> ID：14403638
> 
> 赞同：0
> 
> 时间：2013-01-18T16:49:52.807
> 
> 标签：excel, vba

我有一个活动注册数据，每周都会以 CSV 文件形式发送给我。为简单起见，我对数据进行了虚拟化处理，但基本思想是它看起来如下所示：

```
Team Name1 Name2 Name3 Total
1    a     b     c     10
2    d     e     f     20
3    g     h     i     30
4    j     k     l     40
5    m     n     o     50
6    p     q     r     60
7    s     t     u     70 
```

每周对于完整的数据集，我需要能够将列 Name1、Name2 和 Name 3 转置为行并保持所有其他列相同，使其如下所示：

```
Team Name Total
1    a    10
1    b    10
1    c    10
2    d    20
2    e    20
2    f    20
3    g    30
3    h    30
3    i    30
4    j    40
4    k    40
4    l    40
5    m    50
5    n    50
5    o    50
6    p    60
6    q    60
6    r    60
7    s    70
7    t    70
7    u    70 
```

*   最终格式需要在 Excel 文件中。
*   这种任务的最佳方法是什么？Excel/VBA？使用权？
*   我不必拥有最终格式的列名（如果这增加了太多复杂性，我可以自己添加这些名称）。

由于我不是 VBA 专家，因此我使用在 Internet 上可以找到的内容尝试使用 VBA，所以在我进一步尝试更彻底地学习 VBA 之前，我想我会看看最推荐什么技术以及是否有人可能有效的简单解决方案。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:41:54.290

我的第一个想法是 Access，但如果这就是你所做的一切，你可以留在 Excel 中。

这甚至可以在没有 VBA 的情况下完成——只需使用 MATCH()（对于团队名称，返回 Excel 行）和 INDEX()（给它 MATCH() 结果，它将返回 NAME1、2 或 3 或 Total 的 Excel 公式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T02:12:53.593

[已解决] 一位朋友刚刚帮我写了一个 awk 脚本来创建一个新的 CSV 文件，而且非常简单。我要走那条路。

# twitter-bootstrap - Bootstrap Tooltip-Popover v2.2.2

> ID：14403642
> 
> 赞同：0
> 
> 时间：2013-01-18T16:50:10.057
> 
> 标签：twitter-bootstrap, hover, tooltip, popover

我在使用 bootstrap v 2.2.2 和 tooltip-popover 函数时遇到问题。

我希望达到的效果是当框悬停在上面时会出现一个弹出窗口，如下面的链接所示。

[http://www.w3resource.com/twitter-bootstrap/popover-example.html](http://www.w3resource.com/twitter-bootstrap/popover-example.html)

问题是提供的代码似乎不适用于 v2.2.2。我相信问题可能是在最新版本中这些文件

```
<script src="js/bootstrap-tooltip.js"></script>  
<script src="js/bootstrap-popover.js"></script> 
```

不存在。我已经阅读了文档以及几乎所有其他线程和教程，但是我似乎无法弄清楚如何使其工作。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:11:14.923

```
<a data-placement="right" data-trigger="hover"  rel="popover"  data-content="It's so simple to create a tooltop for my website!" data-original-title="Tooltip on right" href="#">Popover</a>

$(function () {

$('a[rel=popover]').popover();

})

This should display the popover on the right side. 
```

# sql-server - 同一张表的两个不同的更新触发器

> ID：14403649
> 
> 赞同：7
> 
> 时间：2013-01-18T16:50:30.233
> 
> 标签：sql-server, tsql, triggers

如何防止在同一个表上的同一事件中触发的两个触发器之间的锁定问题？

我正在处理的数据库已经有一个加密的更新触发器，因此我无法修改它。我做了另一个更新触发器来完成一些新任务，当我直接在数据库上测试它时它工作正常，但当我在前端应用程序上对产品进行更新时失败。显然，当我激活触发器时，两个触发器都失败了。我收到的消息类似于“文档已打开，我将增加它的价值”。

这是锁定问题吗？

有一个[相关的问题](https://stackoverflow.com/questions/3268702/two-triggers-on-insert-of-same-table)，有人说我们可以在一张桌子上拥有多个触发器（针对同一事件）。

这是我的触发器代码：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE TRIGGER [dbo].[tr_st_rep_update]
ON [dbo].[st]
AFTER UPDATE
AS
  BEGIN
      SET NOCOUNT ON;

      IF ( update(ref)
            OR update(design)
            OR update(u_update)
            OR update(u_ativo)
            OR update(stock)
            OR update(epv1)
            OR update(epv2)
            OR update(epv3)
            OR update(peso)
            OR update(u_catnv1)
            OR update(u_catnv2)
            OR update(u_catnv3)
            OR update(u_dpromoi)
            OR update(u_dpromof)
            OR update(u_destaque) )
        BEGIN
            IF (SELECT count(*)
                FROM   Inserted
                       INNER JOIN Deleted
                         ON Inserted.ststamp = Deleted.ststamp
                WHERE  inserted.u_ativo = 1
                        OR ( Deleted.u_ativo = 1
                             AND Inserted.u_ativo = 0 )) > 0
              BEGIN
                  INSERT INTO RepData
                              (id,
                               REF,
                               familia,
                               stock,
                               epv1,
                               epv2,
                               epv3,
                               peso,
                               u_accao,
                               imagem,
                               process)
                  SELECT Inserted.ststamp AS id,
                         Inserted.REF     AS REF,
                         Inserted.familia AS familia,
                         Inserted.stock   AS stock,
                         Inserted.epv1    AS epv1,
                         Inserted.epv2    AS epv2,
                         Inserted.epv3    AS epv3,
                         Inserted.peso    AS peso,
                         CASE
                           WHEN Deleted.u_ativo = 1
                                AND Inserted.u_ativo = 0 THEN 'd'
                           ELSE 'u'
                         END              AS u_accao,
                         Inserted.imagem  AS imagem,
                         0                AS process
                  FROM   Inserted
                         INNER JOIN Deleted
                           ON Deleted.ststamp = Inserted.ststamp
                  WHERE  inserted.u_ativo = 1
                          OR ( Deleted.u_ativo = 1
                               AND Inserted.u_ativo = 0 )
              END
        END
  END 
```

任何帮助，将不胜感激。

更新：数据库是 MSSQL 2008

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T20:30:59.277

使用触发器进行部署后的现场开发和定制是一个诱人的，但一开始是个坏主意，并且无疑会不断地为您产生类似的问题。

但是，考虑到这一点，那么 First: 表*可以*有多个触发器，这不是问题所在。

其次，错误消息“*文档已打开，我将增加它的值*”来自您的客户端应用程序或来自其他（加密）触发器，它不是 SQL Server 错误消息。鉴于此，您可能可以尝试将加密触发器设置为首先执行，或者将您的触发器设置为最后执行。这可能无法解决问题，但它*可能会将*错误从加密的触发器转移到您的触发器中，您有更好的机会以可管理的方式报告和/或解决它。

虽然是临时的，但唯一可以从您的触发器中看到的问题是，如果另一个触发器也在写入`RepData`表，并且您的双重写入导致重复键违规。

* * *

触发顺序可以通过`sp_settriggerorder`系统程序来控制，[这里](http://msdn.microsoft.com/en-us/library/ms186762%28SQL.90%29.aspx)记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:43:59.150

问题解决了。

我真的不知道问题的根源，尽管我认为这与表锁定有关，在这种情况下是在 Inserted 表上。

我只是更改了内部选择语句，以便直接从 st 表中获取值，而不是从 Inserted 表中获取值。

谢谢大家。

# javascript - 带有自定义过滤器菜单的 Kendo Grid 不起作用

> ID：14403656
> 
> 赞同：1
> 
> 时间：2013-01-18T16:50:55.263
> 
> 标签：javascript, web-applications, kendo-ui, kendo-grid

我一直在努力让自定义过滤器菜单与 Kendo Grid 一起使用。

我已经把所有东西都精简到最低限度，但我仍然无法让它工作。我创建了一个[jsFiddle](http://jsfiddle.net/matbeard/VvJ2N/2/)，它是 Kendo 自己的演示的直接副本——它在这里也不起作用。

`cityFilter`激活 City 列上的过滤器时不调用该函数。

该演示可在剑道网站上运行，所以我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:31:06.693

确保您使用正确的参考。

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://cdn.kendostatic.com/2012.3.1315/js/kendo.all.min.js"></script>
<link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.common.min.css" rel="stylesheet">
<link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.default.min.css" rel="stylesheet"> 
```

[http://jsfiddle.net/pabloker/VvJ2N/6/](http://jsfiddle.net/pabloker/VvJ2N/6/)

# mysql - mysql - 在存储过程中创建事件

> ID：14403660
> 
> 赞同：4
> 
> 时间：2013-01-18T16:51:10.380
> 
> 标签：mysql, events, stored-procedures, mysql-event, mysql-routines

如何在存储过程中创建事件？

这是我一直在尝试做的，它告诉我我有一个语法错误，只是它没有告诉我在哪里。

```
-- --------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `update_leaderboard`()
BEGIN

CREATE EVENT update_leaderboard_event
    ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 minute
    DO call update_leaderboard();

END 
```

**编辑：** 根据我的 MySql（最后一行），它应该是可能的：

> 句法”。您可以创建一个事件作为存储例程的一部分，但一个事件不能由另一个事件创建。

**Edit2**发现问题：

> 错误 1576：当正文存在时，禁止递归 EVENT DDL 语句

但是还没有解决办法，那我该怎么办呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:52:37.833

You cant create inside procedure. You need to define it separately.

Just check Mysql [Event Scheduler](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)
detail blog: [http://goo.gl/6Hzjvg](http://goo.gl/6Hzjvg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T14:28:09.833

“CREATE EVENT”和“ALTER EVENT”我们通过直接“请求”到 MySQL 引擎数据库在特殊的外部应用程序中创建。

将触发器或过程中的行插入到特殊表“Need create_alter event”和特殊的外部应用程序循环读取行，然后直接向 MySQL-engine 数据库发送有关 create/alter 事件的请求

# python - 来自 IntegrityError 的 Sqlalchemy session.rollback 导致 queuepool 处理程序用完？

> ID：14403665
> 
> 赞同：3
> 
> 时间：2013-01-18T16:51:30.763
> 
> 标签：python, database, sqlalchemy

我有下表：

```
class Feedback(Base):
  __tablename__ = 'feedbacks'
  __table_args__ = (UniqueConstraint('user_id', 'look_id'),)
  id = Column(Integer, primary_key=True)
  user_id = Column(Integer, ForeignKey('users.id'), nullable=False)
  look_id = Column(Integer, ForeignKey('looks.id'), nullable=False) 
```

我目前在此表中插入了许多违反该 UniqueConstraint 的条目。

我正在使用以下代码：

```
 for comment in session.query(Comment).filter(Comment.type == Comment.TYPE_LOOK).yield_per(100):
    feedback = Feedback()
    feedback.user_id = User.get_or_create(comment.model_id).id
    feedback.look_id = comment.commentable_id
    session.add(feedback)
    try:        # Refer to T20
      session.flush()
    except IntegrityError,e:
      print "IntegrityError", e
      session.rollback()
  session.commit() 
```

我收到以下错误：

```
IntegrityError (IntegrityError) duplicate key value violates unique constraint "feedbacks_user_id_look_id_key"
DETAIL:  Key (user_id, look_id)=(140, 263008) already exists.
 'INSERT INTO feedbacks (user_id, look_id, score) VALUES (%(user_id)s, %(look_id)s, %(score)s) RETURNING feedbacks.id' {'user_id': 140, 'score': 1, 'look_id': 263008}
IntegrityError (IntegrityError) duplicate key value violates unique constraint "feedbacks_user_id_look_id_key"
...
(there's about 24 of these integrity errors here)
...
DETAIL:  Key (user_id, look_id)=(173, 263008) already exists.
 'INSERT INTO feedbacks (user_id, look_id, score) VALUES (%(user_id)s, %(look_id)s, %(score)s) RETURNING feedbacks.id' {'user_id': 173, 'score': 1, 'look_id': 263008}
No handlers could be found for logger "sqlalchemy.pool.QueuePool"
Traceback (most recent call last):
  File "load.py", line 40, in <module>
    load_crawl_data_into_feedback()
  File "load.py", line 21, in load_crawl_data_into_feedback
    for comment in session.query(Comment).filter(Comment.type == Comment.TYPE_LOOK).yield_per(100):
  File "/Volumes/Data2/Dropbox/projects/Giordano/venv/lib/python2.7/site-packages/sqlalchemy/orm/query.py", line 2337, in instances
    fetch = cursor.fetchmany(self._yield_per)
  File "/Volumes/Data2/Dropbox/projects/Giordano/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 3230, in fetchmany
    self.cursor, self.context)
  File "/Volumes/Data2/Dropbox/projects/Giordano/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 3223, in fetchmany
    l = self.process_rows(self._fetchmany_impl(size))
  File "/Volumes/Data2/Dropbox/projects/Giordano/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 3343, in _fetchmany_impl
    row = self._fetchone_impl()
  File "/Volumes/Data2/Dropbox/projects/Giordano/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 3333, in _fetchone_impl
    self.__buffer_rows()
  File "/Volumes/Data2/Dropbox/projects/Giordano/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 3326, in __buffer_rows
    self.__rowbuffer = collections.deque(self.cursor.fetchmany(size))
sqlalchemy.exc.ProgrammingError: (ProgrammingError) named cursor isn't valid anymore None None 
```

在你得出关于这个错误是由 yield_per 引起的结论之前，我可以向你保证，yield_per 不是这里的罪魁祸首。

我尝试了没有唯一约束的相同代码，但根本没有遇到任何错误。

我相信完整性错误导致**No handlers could be found for logger "sqlalchemy.pool.QueuePool"**。

我假设每个完整性错误都会杀死队列池中的每个“线程”。

有人可以告诉我发生了什么吗？

如果此时我无法对数据做太多事情，您会建议我做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:39:23.173

该错误仅来自 Python`logging`模块；您的池类正在尝试记录一些调试消息，但您没有配置 SQLA 日志记录。 [配置日志记录](http://docs.sqlalchemy.org/en/latest/core/engines.html#configuring-logging)很容易，然后您可以看到它实际上想说什么。

我*不太*确定这里发生了什么，但是你多次回滚顶级事务肯定无济于事。回滚结束事务并使每个活动行对象无效。那肯定不会与`yield_per`.

*如果您的数据库支持保存点或嵌套事务（即，是Postgres*或 Oracle ... 还是最近的 MySQL？），请尝试为每次尝试启动嵌套事务：

```
for comment in session.query(Comment).filter(Comment.type == Comment.TYPE_LOOK).yield_per(100):
    try:
        with session.begin_nested():
            feedback = Feedback()
            feedback.user_id = User.get_or_create(comment.model_id).id
            feedback.look_id = comment.commentable_id
            session.add(feedback)
            session.flush()
    except IntegrityError, e:
        print "IntegrityError", e

session.commit() 
```

`with`回滚错误并提交成功，因此失败`flush`不会对您的主要事务的其余部分造成严重破坏。

如果您没有后端支持，其他明智的选择是：

*   使您的查询复杂化：对`LEFT JOIN`您的反馈表执行操作，以便您在应用程序内知道反馈行是否已经存在。

*   如果您愿意`(user_id, look_id)`成为您的主键，我认为您可以使用[`session.merge(feedback)`](http://docs.sqlalchemy.org/en/latest/orm/session.html#unitofwork-merging). 这就像基于主键的插入或更新：如果 SQLA 可以找到具有相同 pk 的现有行，它将更新该行，否则它将在数据库中创建一个新行。`SELECT`不过，会冒着为每一个新行触发一个额外的风险。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T17:45:38.740

“在你得出这个错误是由 yield_per 引起的结论之前，我可以向你保证，yield_per 不是这里的罪魁祸首。”

我不确定你为什么会认为 - yield_per() 在这里非常重要，这可以通过简单地尝试*没有*yield_per() 的相同测试来查看行为是否不同来快速预测。通过使用 yield_per()，一个 psycopg2 游标在循环继续时保持打开状态。但是随后您会通过`session.rollback()`. 这将确切地导致诸如“命名游标不再有效”之类的错误发生。事实上，存在命名游标的唯一原因*是*因为这就是您使用 psycopg2 进行服务器端游标的方式，这是 yield_per() 启用的一部分。

“我尝试了没有唯一约束的相同代码，但我根本没有遇到任何错误。”

这是因为没有约束，不会抛出异常，并且不会命中 rollback()。

# c - C - 如何使用指向结构的指针复制结构

> ID：14403666
> 
> 赞同：1
> 
> 时间：2013-01-18T16:51:34.980
> 
> 标签：c, pointers, struct

通常制作结构的副本就像使用 = 运算符一样简单，编译器会生成代码来为您复制结构。然而，对于这一部分，函数必须返回一个指向结构的指针，所以我一直在使用它，只是为了到达我意识到我尝试的所有东西都没有正确复制结构的部分。

我的问题的一个基本例子是

```
typedef struct command_stream *command_stream_t;
command_stream_t ty = (command_stream_t) malloc(sizeof(struct command_stream));
command_stream_t yy;

do some code
//ty contains a variable words which is an array of strings

*yy = *ty;
 ty->words = NULL; //set to null to see if yy still contains a copy of the struct
 printf("%s", yy->words[0]); 
```

我在这里遇到分段错误。但是，如果我将其更改为不是指针

```
typedef struct command_stream command_stream_t

yy=ty;
ty.words = NULL;
printf("%s", yy.words[0]); 
```

这工作得很好！我不完全确定我应该如何为指针做同样的事情，我真的不想回去更改 500+ 行代码......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:53:41.280

您的`yy`指针永远不会被初始化。

您应该在那里分配足够的内存来保存结构，然后像您一样使用 * 复制，或者使用`memcpy`指针和大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:57:59.233

你有没有尝试过这样的事情？

```
struct command_stream* ty = (struct command_stream*) malloc(sizeof(struct command_stream));

/* do things with the struct */

struct command_stream ty_val = *ty;
struct command_stream yy = ty_val; 
```

# java - 为什么 Maven 找不到我的自定义 Mojo？

> ID：14403669
> 
> 赞同：23
> 
> 时间：2013-01-18T16:51:41.613
> 
> 标签：java, maven, maven-plugin

我有一个自己的 Mojo 课程。

```
 @Mojo(name="mojo", threadSafe=true)
 public class MyMojo extends AbstractMojo
 {
     @Component
     private MavenProject project;

     public void execute() throws MojoExecutionException, MojoFailureException
     {
        getLog().info("Execute");
     }
  } 
```

之后，我将其安装在本地存储库中。

```
 [INFO] Applying mojo extractor for language: java-annotations
 [INFO] Mojo extractor for language: java-annotations found 0 mojo descriptors.
 [INFO] Applying mojo extractor for language: java
 [INFO] Mojo extractor for language: java found 0 mojo descriptors.
 [INFO] Applying mojo extractor for language: bsh
 [INFO] Mojo extractor for language: bsh found 0 mojo descriptors.
 ....
 [INFO] BUILD SUCCESS 
```

但是当尝试调用“mojo”目标时，我遇到了错误

```
 [ERROR] Could not find goal 'mojo' in plugin my.plugins:my-plugin:1.0-SNAPSHOT among available goals -> [Help 1]

what is the problem? 
```

* * *

这是 maven-plugin-plugin 配置。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-plugin-plugin</artifactId>
    <version>3.2</version>
    <configuration>                                                 
        <skipErrorNoDescriptorsFound>true</skipErrorNoDescriptorsFound>
     </configuration>
 </plugin> 
```

带有 javadoc 注释的旧机制运行良好，但我想使用 java 注释。

```
<dependency>
    <groupId>org.apache.maven.plugin-tools</groupId>
    <artifactId>maven-plugin-annotations</artifactId>
    <version>3.2</version>
</dependency>

 [INFO] --- maven-plugin-plugin:3.2:descriptor (default-descriptor) @ bla-mvn-plugin 
```

为什么启用 default-descriptor 而不是 mojo-descriptor？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-23T11:10:04.667

将此部分添加到插件的 POM 中：

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-plugin-plugin</artifactId>
                <version>3.2</version>
                <configuration>
                    <skipErrorNoDescriptorsFound>true</skipErrorNoDescriptorsFound>
                </configuration>
                <executions>
                    <execution>
                        <id>mojo-descriptor</id>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>descriptor</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

PS。有关使用注释构建 MOJO 的完整工作示例，请参阅 maven-compiler-plugin:3.0 源代码

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T21:00:48.487

**编辑（解决 Mojo 注释的使用）：**

我尝试使用注释构建一个插件并遇到了同样的问题。我通过将插件绑定到默认生命周期阶段来解决它，如下`@Mojo`注释所示：

**魔精**

```
@Mojo(name = "hello", defaultPhase = LifecyclePhase.INSTALL)
public class MyMojo extends AbstractMojo
{
    public void execute() throws MojoExecutionException, MojoFailureException
    {
        getLog().info("Hello");
    }
} 
```

**魔力POM**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>testware.mojotest</groupId>
    <artifactId>mojotest</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>mojotest</name>
    <packaging>maven-plugin</packaging>

    <dependencies>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-plugin-api</artifactId>
            <version>2.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven.plugin-tools</groupId>
            <artifactId>maven-plugin-annotations</artifactId>
            <version>3.2</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-plugin-plugin</artifactId>
                <version>3.2</version>
                <configuration>
                    <skipErrorNoDescriptorsFound>true</skipErrorNoDescriptorsFound>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

**项目调用 Mojo 的 POM**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>testware.mojotest</groupId>
    <artifactId>mojotest-runner</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>mojotest-runner</name>

    <build>
        <plugins>
            <plugin>
                <groupId>testware.mojotest</groupId>
                <artifactId>mojotest</artifactId>
                <version>0.0.1-SNAPSHOT</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>hello</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

# java - 用 Java 读取 PDF 文件 - 没有外部库

> ID：14403670
> 
> 赞同：4
> 
> 时间：2013-01-18T16:51:42.127
> 
> 标签：java, pdf, file-io

在过去的几周里，我一直在编写一个简单的 Java 服务器。

首先，我想根据您启动服务器的位置显示文件系统。例如，如果您在`src`目录中启动服务器，打开浏览器并转到 localhost:5555，您将看到`src`. 每个都将被链接。我让它工作得很好。

如果您单击一个目录，它会向您显示其内容（就像我提到的那样）。如果单击文件，它会读取该文件并以纯文本形式显示该文件。如果您单击图像，它将提供该图像。这一切都发生在浏览器中，您可以使用后退按钮返回您之前查看的目录列表或文件。这也可以正常工作并且不使用外部库。

这是我用来读取文本文件的代码（使用阅读器）：

```
private String readFile() {
    BufferedReader reader;
    String response = "";
    try {
        FileReader fileReader = new FileReader(requestedFile);
        reader = new BufferedReader(fileReader);
        String line;
        while ((line = reader.readLine()) != null) {
            response += line + "\n";
        }
        reader.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return response;
} 
```

这是我用来提供图像的代码（输入流而不是阅读器）：

```
public byte[] getByteArray() throws IOException {
    byte[] byteArray = new byte[(int) requestedFile.length()];
    InputStream inputStream;
    String fileName = String.valueOf(requestedFile);
    inputStream = new BufferedInputStream(new FileInputStream(fileName));
    int bytesRead = 0;
    while (bytesRead < byteArray.length) {
        int bytesRemaining = byteArray.length - bytesRead;
        int read = inputStream.read(byteArray, bytesRead, bytesRemaining);
        if (read > 0) {
            bytesRead += read;
        }
    }
    inputStream.close();
    FilterOutputStream binaryOutputStream = new FilterOutputStream(outputStream);
    byte [] binaryHeaders = headers.getBytes();
    byte [] fullBinaryResponse = new byte[binaryHeaders.length + byteArray.length];
    System.arraycopy(binaryHeaders, 0, fullBinaryResponse, 0, binaryHeaders.length);
    System.arraycopy(byteArray, 0, fullBinaryResponse, binaryHeaders.length, byteArray.length);
    try {
        binaryOutputStream.write(fullBinaryResponse);
        binaryOutputStream.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我现在尝试的是提供 PDF。如果我在其中一个目录中有 PDF 并单击它，它应该打开该 PDF（在浏览器使用的任何默认阅读器中）。

我一直在谷歌搜索这个主题并尝试了一两天的一些事情，但我似乎无法理解。我觉得奇怪的是，当我按当前的代码单击 PDF 时，浏览器似乎正在打开 PDF，但没有出现任何文本。它是标准的浏览器内 PDF 查看器，当我们单击 PDF 链接时，我们都习惯于看到它。但是没有内容。这只是一些空白页。

有人能帮忙吗？我不会使用外部库。我只是想了解如何用 Java 打开 PDF 文件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:33:18.713

不要将其解析为文本，这将转换字符，可能是结束行，并且可能会更改您不希望的内容。不要将整个内容缓冲为字节数组，而是直接写入输出流，这样就不会出现内存问题。相反，只需像这样提供文件：

```
public class FileServer extends javax.servlet.http.HttpServlet
{

public void doGet(HttpServletRequest req, HttpServletResponse resp)
{
    OutputStream out=null;
    try {

        HttpSession session = req.getSession();

        out = resp.getOutputStream();
        resp.setContentType(-- specify content type here --);
        req.setCharacterEncoding("UTF-8");

        String pathInfo = req.getPathInfo();

        String fullPath = -- figure out the path to the file in question --;

        FileInputStream fis = new FileInputStream(fullPath);

        byte[] buf = new byte[2048];

        int amtRead = fis.read(buf);
        while (amtRead > 0) {
            out.write(buf, 0, amtRead);
            amtRead = fis.read(buf);
        }
        fis.close();
        out.flush();
    }
    catch (Exception e) {
        try {
            resp.setContentType("text/html");
            if (out == null) {
                out = resp.getOutputStream();
            }
            Writer w = new OutputStreamWriter(out);
            w.write("<html><body><ul><li>Exception: ");
            w.write(e.toString());
            w.write("</ul></body></html>");
            w.flush();
        }
        catch (Exception eeeee) {
            //nothing we can do here...
        }
    }
}
} 
```

# python - 在python中引用两个对象如何将array.x转换为self.array.self.x？

> ID：14403674
> 
> 赞同：0
> 
> 时间：2013-01-18T16:52:00.910
> 
> 标签：python, object, traits, chaco

我有一个数组，它由一堆我可以调用的变量组成。

所以通常我会在导入后使用 array.x 调用 x 。现在我将它们设置为两个对象，用户可以在特征 GUI 中设置它们。我将如何使用“自我”提取相同的信息？

```
self.array.self.variable 
```

我只是得到属性数组没有变量'self'，因为它试图引用self.array.self而不是self.array.（self.variable）。

修复此问题将使我能够使用 Chaco 执行此操作：

```
plotdata = ArrayPlotData(x = self.array.self.variable, y = self.array.self.variable)
plot = Plot(plotdata)
self.renderer = plot.plot(("x", "y"), type="scatter", color="red")[0]
self.plot = plot 
```

编辑：我需要通常被读取为 array.data ['variable'] 的内容。像 self.array.data['self.variable'] 这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:55:05.920

如果`self.variable`是包含属性名称的字符串，请使用`getattr`：

```
getattr(self.array, self.variable) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:38:00.317

目前尚不清楚您在这里的意思（至少对我而言）。但基本上，这`self`只是类方法中实例的常规名称。它具有本地范围，因此您不会从外部以这种方式引用它。*就是*这样，从外面你应该可以简单地做`self.array.variable`。

但是，您似乎想要索引样式访问？您可以通过定义`__getitem__`特殊方法来做到这一点。然后你可以做`myobj["x"]`。

# c# - 将数据库数据表信息显示为标签数组

> ID：14403677
> 
> 赞同：0
> 
> 时间：2013-01-18T16:52:06.417
> 
> 标签：c#, asp.net, sql, sql-server-2008, datatable

很难找到正确的问题主题。好吧，让我详细说明一下。我正在制作一个条形码生成器简单的 webapp。这是给我们的仓库团队的。

我创建了一个名为`SqlComm`我处理所有`SQL`与连接相关的事情的类。然后，我有一个查询（查询只是计算一个列，其中某个日期介于两者之间）。我使用查询来设置`array`大小。稍后，它循环一个`for`循环并将每个新标签添加到占位符。可悲的是，占位符没有显示我刚刚创建的新标签。

c# (代码行为)

```
 int index = 0;
  int iLength = 0;

  dt = SqlComm.SqlDataTable("SELECT [Lenum] FROM [SUIDonMachineTable] WHERE MachineTimestamp  BETWEEN CONVERT(datetime,'"+strDayFrom+"', 121) AND CONVERT(datetime,'"+strDayTo+"', 121) AND Station ='NG08NX1BT'");

  object obj = new object();
  obj = SqlComm.SqlReturn("SELECT COUNT (Lenum) FROM [SUIDonMachineTable] WHERE MachineTimestamp  BETWEEN CONVERT(datetime,'"+strDayFrom+"', 121) AND CONVERT(datetime,'"+strDayTo+"', 121) AND Station ='NG08NX1BT'");
  iLength = Convert.ToInt32(obj);
  Label[] labels = new Label[iLength];

  for (index = 0; index == iLength; index++)
     {                        
         labels[index] = new Label();
         labels[index].Text = (string)dt.Rows[index]["Lenum"];
         PH.Controls.Add(labels[index]);                                
     } 
```

asp.net（占位符部分）

```
<asp:PlaceHolder ID="PH" runat="server"></asp:PlaceHolder> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:19:59.760

我认为问题在于回传。由于动态创建的控制值在回发后丢失。[在回发http://www.codeproject.com/Articles/18080/Solve-Dynamic-Control-Problem-With-PostBack](http://www.codeproject.com/Articles/18080/Solve-Dynamic-Control-Problem-With-PostBack)
[上以编程方式添加访问控件](https://stackoverflow.com/questions/1763050/accessing-controls-added-programmatically-on-postback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:23:55.197

```
for (index = 0; index < iLength; index++) 
```

尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:48:25.377

您什么也得不到，因为由于`index == iLength`尝试使用而未达到循环`index < iLength`

# silverlight - 如何确定元素相对于父中心的位置

> ID：14403680
> 
> 赞同：0
> 
> 时间：2013-01-18T16:52:14.060
> 
> 标签：silverlight

我知道我可以得到一个元素相对于它的父元素的位置 top 和 left 使用以下代码：

```
var generalTransform = childElement.TransformToVisual( parentElement );
var childToParentCoordinates = generalTransform.Transform( new Point( 0, 0 ) ); 
```

而且我意识到，如果孩子离开或高于父母，x 和 y 将是负数。

但是我需要的是孩子中心相对于父母中心的点，这样父母的中心被认为是 (0,0) `point`。因此，位于其父对象中心上方和左侧的对象将是（负，负）`point`，而右侧和下方显然是（正，正）`point`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:36:59.770

```
Point relativePoint = child.TransformToAncestor(parent)
                      .Transform(new Point(0, 0));

        Point parentCenter = new Point(parent.ActualWidth / 2, parent.ActualHeight / 2);
        Point childCenter = new Point(relativePoint.X + (child.ActualWidth / 2), relativePoint.Y + (child.ActualHeight / 2));
        //Now you can compare them as you want 
```

我希望这将有所帮助。

# javascript - 未捕获的类型错误：无法调用未定义的方法“ajax”

> ID：14403681
> 
> 赞同：2
> 
> 时间：2013-01-18T16:52:18.610
> 
> 标签：javascript, jquery, ajax, wordpress, wordpress-theming

我已将 wordpress 更新到 3.5 并收到此错误，js 无法正常工作。

> 未捕获的类型错误：无法调用未定义的方法“ajax”

为什么我会收到此错误？

```
function goToIndexforsave() {
    document.getElementById('sorted_successmsg_div').innerHTML = 'processing ...';
    var img_save_url = 'http://www.holidayvillas4hire.com/index.php?page=sort_image&pid='+document.getElementById('image_sort').value;

    $.ajax({
        url: img_save_url ,
        type: 'GET',
        dataType: 'html',
        timeout: 20000,
        error: function() {
            alert('Error loading agent favorite property.');
        },
        success: function(html) {
            document.getElementById('sorted_successmsg_div').innerHTML = html;
        }
    });
    return false;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T16:53:29.183

您需要`jquery.js`通过将此行放在该`<head></head>`部分中来包含在您的页面中：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

您收到错误是因为`$`尚未启动 jQuery 使用的变量，因此该`$.ajax()`函数不存在。

# asp.net-mvc - 没有 [required] 属性的 Razor 验证触发

> ID：14403682
> 
> 赞同：1
> 
> 时间：2013-01-18T16:52:27.120
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, razor-declarative-helpers

这是我的模型

```
public class SchoolUser
{
    public int schoolId { get; set; }

    public int contact1UserId { get; set; }

    public IEnumerable<DataLayer.salutations> Salutations { get; set; }

    public int departmentId { get; set; }

    public IEnumerable<DataLayer.departments> Departments { get; set; }

    [Required]
    public int roleId { get; set; }

    public IEnumerable<DataLayer.rolesView> roles { get; set; } 
```

这是我为 deptartmentid 视图创建下拉列表的剃须刀代码

```
 <div style="width:75%; display:inline-block; margin-left:5px;">
                    @Html.DropDownListFor(model => model.departmentId, new SelectList(Model.Departments, "deptId", "description"), "")
                    @Html.ValidationMessageFor(model => model.departmentId)
                </div> 
```

当没有选择部门时，剃刀验证会抱怨我们无休止的困惑。但是学校模型没有[必需]属性。

**“departmentId 字段是必需的。”**

查看页面源代码，我看到了

```
 <select data-val="true" data-val-number="The field departmentId must be a number." data-val-required="The departmentId field is required." id="departmentId" name="departmentId"><option value=""></option>
<option value="30">English</option>
</select> 
```

出于某种原因，即使模型没有 [required] 或其他约束属性，razor 视图引擎也已“决定”要求填充此字段。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T16:55:19.710

它不能为空。你应该把它改成int？.

# php - 在没有 shell 访问权限的情况下运行 xgettext 或创建 .pot 文件？

> ID：14403683
> 
> 赞同：0
> 
> 时间：2013-01-18T16:52:28.540
> 
> 标签：php, shell, gettext, shared

我一直在阅读和阅读有关使用 gettext 国际化 PHP 网站的信息，这对我来说很有趣。

我真的坚持实际创建初始 .pot 文件。

从周围阅读看来，我需要在 shell 中使用 xgettext 命令来为我的初始翻译创建我的 .pot 文件，然后使用 Poedit 进行编辑。

我的问题是我在一个无法访问 Shell、exec() 命令或类似命令的共享服务器上。

有没有办法在不使用 shell 或手动创建这个文件的情况下创建这个 .pot 文件？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:54:14.213

不，但您不必在服务器上执行此操作。将文件下载到本地系统并在那里运行。

# css - Internet explorer 7 CSS bug

> ID：14403684
> 
> 赞同：0
> 
> 时间：2013-01-18T16:52:29.473
> 
> 标签：css, internet-explorer-7

I am experiencing a CSS issue, sadly it is only encountered in Internet Explorer 7\. If you view the web page in IE7 standards you should be able to replicate the issue. You may need to refresh a couple of times until an advert is served that breaks the layout.

The large square adverts are served by a third party that are placed inside `<div class="grid_4 omega">`. The container for these adverts is `<div class="ad_instance">`

Here is the CSS that has been applied.

```
div.ad_instance {
    clear: right;
    float: right;
    margin-bottom: 1em;
} 
```

I have attached a screenshot to demonstrate the issue:

![enter image description here](../Images/004df5fc97ac4506799130518c57b3b3.png)

Any suggestions or amendments to my CSS rules would be much appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:58:14.490

看起来您`clear: right;`对类的定义`.ad_instance`是导致该错误的原因。

删除它可以解决 IE7 中的问题，并在其他浏览器上保持相同的结果（据我的测试发现）。

# c# - How to comply with Liskov's Substitution Principle (LSP) and still benefit from polymorphism?

> ID：14403688
> 
> 赞同：14
> 
> 时间：2013-01-18T16:52:39.390
> 
> 标签：c#, polymorphism, solid-principles, liskov-substitution-principle

The LSP says "The derived types must not change the behavior of the base types", in other words "Derived types must be completely replaceable for their base types."

This means that if we define virtual methods in our base classes, we have violated this principle.

Also if we hide a method in the drive method by using new keyword then again we have violated this principle.

In other words, if we use polymorphism we have violated LSP!

In many applications I've used Virtual methods in the base classes and now I realize it violates LSP. Also if you use Template Method pattern you have violated this principle that I've used it a lot.

So, how to design your application that complies with this principle when you'd need inheritance and you'd like to benefit also from polymorphism? I'm confused!

See the example from here: [http://www.oodesign.com/liskov-s-substitution-principle.html](http://www.oodesign.com/liskov-s-substitution-principle.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T17:02:33.167

Barbara Liskov 有一篇非常好的文章[Data Abstraction and Hierarchy](http://www.scribd.com/doc/24308576/Data-Abstraction-and-Hierarchy)，她在其中特别涉及多态行为和虚拟软件结构。阅读本文后，您可以看到，她深入描述了软件组件如何通过简单的多态调用实现灵活性和模块化。

LSP 陈述的是实现细节，而不是抽象。具体来说，如果您使用 type 的某些接口或抽象`T`，您应该期望传递 of 的所有子类型，`T`而不是观察到***意外***行为或程序崩溃。

这里的关键字是*意想不到*的，因为它可以描述程序的任何属性（正确性、执行的任务、返回的语义、临时性等）。所以让你方法`virtual`本身并不意味着违反`LSP`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:11:21.900

“派生类型不得改变基类型的行为”意味着必须可以像使用基类型一样使用派生类型。例如，如果你能打电话`x = baseObj.DoSomeThing(123)`，你也必须能打电话`x = derivedObj.DoSomeThing(123)`。如果基方法没有，派生方法不应该抛出异常。使用基类的代码也应该能够很好地与派生类一起工作。它不应该“看到”它正在使用另一种类型。这并不意味着派生类必须做完全相同的事情。那将毫无意义。换句话说，使用派生类型不应该破坏使用基类型顺利运行的代码。

作为示例，假设您声明了一个记录器，使您能够将消息记录到控制台

```
logger.WriteLine("hello"); 
```

您可以在需要生成日志的类中使用构造函数注入。现在，不是将控制台记录器传递给它，而是将它传递给从控制台记录器派生的文件记录器。如果文件记录器抛出异常说“您必须在消息字符串中包含行号”，这将破坏 LSP。但是，日志记录到文件而不是控制台不是问题。即，如果记录器向调用者显示相同的行为，则一切正常。

* * *

如果您需要编写如下代码，则将违反 LSP：

```
if (logger is FileLogger) {
    logger.Write("10 hello"); // FileLogger requires a line number

    // This throws an exception!
    logger.Write("hello");
} else {
    logger.Write("hello");
} 
```

* * *

顺便说一句：`new`关键字不影响多态性，而是声明了一个全新的方法，该方法恰好与基类型中的方法同名，但与之无关。特别是，不可能通过基本类型来调用它。要使多态起作用，您必须使用`override`关键字并且方法必须是虚拟的（除非您正在实现接口）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:59:09.937

我认为 Liskov 的替换原则 (LSP) 主要是关于将可能与子类不同的函数的实现移动到尽可能通用的父类。

因此，无论您在子类中进行什么更改，只要此更改不会强制您修改父类中的代码，它就不会违反 Liskov 替换原则 (LSP)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T17:01:56.203

LSP 说您必须能够以与使用它的超类相同的方式使用派生类：*“程序中的对象应该可以替换为其子类型的实例，而不会改变该程序的正确性”*。打破该规则的经典继承是从 Rectangle 类派生 Square 类，因为前者*必须*具有`Height = Width`，而后者*可以*具有`Height != Width`。

```
public class Rectangle
{
    public virtual Int32 Height { get; set; }
    public virtual Int32 Width { get; set; }
}

public class Square : Rectangle
{
    public override Int32 Height
    {
        get { return base.Height; }
        set { SetDimensions(value); }
    }

    public override Int32 Width
    {
        get { return base.Width; }
        set { SetDimensions(value); }
    }

    private void SetDimensions(Int32 value)
    {
        base.Height = value;
        base.Width = value;
    }
} 
```

在这种情况下，Width 和 Height 属性的行为发生了变化，这违反了该规则。让我们看看输出为什么会改变：

```
private static void Main()
{
    Rectangle rectangle = new Square();
    rectangle.Height = 2;
    rectangle.Width = 3;

    Console.WriteLine("{0} x {1}", rectangle.Width, rectangle.Height);
}

// Output: 3 x 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T17:02:02.810

子类型必须可以被基类型替换。

在接触方面。

派生类可以替换相同或更弱的基类前置条件和相同或更大的后置条件。

[关联](http://www.objectmentor.com/resources/articles/lsp.pdf)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-18T17:03:10.713

为了使多态性起作用，必须遵守 LSP。打破它的一个好方法是在派生类型中引入不在基类型中的方法。在这种情况下，多态性不起作用，因为这些方法在基类型中不可用。您可以对方法有不同的子类型实现，同时遵守多态性和 LSP。

# perl - Is there a perl module equivalent to python's optparse.OptionParser?

> ID：14403689
> 
> 赞同：2
> 
> 时间：2013-01-18T16:52:43.890
> 
> 标签：perl, optional-parameters

I have a new script that I need to write in perl, to leverage our perl codebase (no, I can't convert it, not yet anyway). Our coding standards dictate `Getopt::Long::GetOptions()` but I realize my option handling would be greatly improved and simplified if I could just drop python's optparse.OptionParser into it. The things I like in python: validation of inputs, both formats and required/optional, and auto help string generation based on argument config.

Any tips? I know I could roll my own, but I'd rather use someone else's work if it's already been done.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:54:27.727

规范工具是[Getopt::Long](http://p3rl.org/Getopt%3a%3aLong)。它不是“声明性的”。您是否正在尝试复制某些特定行为？

**编辑**：要获得更多功能，您可能对[App::Cmd](https://metacpan.org/module/App%3a%3aCmd)或其中的一部分感兴趣（另请参见[App::Cmd::Tutorial](https://metacpan.org/module/App%3a%3aCmd%3a%3aTutorial)）。

这在内部使用[Getopt::Long::Descriptive](https://metacpan.org/module/Getopt%3a%3aLong%3a%3aDescriptive)似乎可以满足您的大部分要求。这可能对您特别有用，因为它在内部使用`Getopt::Long`和[Params::Validate](https://metacpan.org/module/Params%3a%3aValidate)，因此移动您当前的代码库可能非常容易，但现在有了验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T16:55:29.670

CPAN 上的[GetOpt](https://metacpan.org/search?q=getopt)命名空间中有很多选项。

[GetOpt::Std](http://perldoc.perl.org/Getopt/Std.html)和[GetOpt::Long](http://perldoc.perl.org/Getopt/Long.html)都是核心模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:36:15.613

[MooseX::Getopt](http://p3rl.org/MooseX%3a%3aGetopt)和[MooX::Options](http://p3rl.org/MooX%3a%3aOptions)是……选项。两者的工作方式相似，并且都在后台使用 Getopt::Long::Descriptive，将其与类集成以提供高级验证和默认设置以及帮助文本。然后，您只需使用`new_with_options`构造函数，即可获得该类的一个实例，该实例的所有插槽都从命令行填充。

# symfony - symfony2 中的刷新错误

> ID：14403690
> 
> 赞同：1
> 
> 时间：2013-01-18T16:52:55.137
> 
> 标签：symfony, doctrine-orm, many-to-many, symfony-2.1

自从我尝试处理具有属性的多对多关系以来已经有很长一段时间了。

我重新检查了实体，表格......一切看起来都很好。仍然得到一个错误：

关系是这样建立的：Book > OneToMany > AuthorBook < ManyToOne < Author

嵌套表单允许创建书籍，作者使用年份属性创建。

到目前为止，我只是在尝试记录新作者，以便在处理与书籍的关系之前让他们存在。

这是我的代码：

```
foreach ($book->getAuthorBooks() as $authorBook) {
   $AuthorUrlname = $this->mu->generateUrlname( $authorBook->getAuthor()->getFirstname().'-'.$authorBook->getAuthor()->getLastname() );

   // If the author does not exist yet, it is added to the database:

   $checkAuthor = $this->em->getRepository('cmdMyBundle:Author')->findOneByUrlname($AuthorUrlname);

   if ($checkAuthor == null) {                  
        // Author does not exist
        $newAuthor = new Author();
        $newAuthor->setLastname($authorBook->getAuthor()->getLastname());
        $newAuthor->setFirstname($authorBook->getAuthor()->getFirstname());
        $newAuthor->setUrlname($AuthorUrlname);
        $newAuthor->setCollection($this->collection);
        $this->em->persist($newAuthor);
        $this->em->flush();

    }else{
        // Author already exists
    }

}// foreach $authorBook 
```

并且错误：通过关系'cmd\MyBundle\Entity\Book#authorBooks'找到了一个新实体，该关系未配置为对实体进行级联持久操作：cmd\MyBundle\Entity\authorBook@0000000002571fc4000000002c4ddfaa。

为什么错误与 authorBooks 关系有关？我的代码只尝试记录一个新作者......

谢谢

编辑_____________

事实上，我做了进一步的测试，并用这段代码进行了一次激烈的测试：

```
public function onSuccess(Page $page){   
    $this->em->flush(); 
```

这也会产生同样的错误，好像错误不是由于表单处理代码引起的......我使用[这种方法](https://stackoverflow.com/questions/14186812/detecting-an-entity-miss-configuration-in-symfony2)验证了 orm 模式，到目前为止一切看起来都很好。

我试图级联持久化实体：

```
class AuthorBook
{

/**
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="cmd\MyBundle\Entity\Author", inversedBy="authorBooks", cascade={"persist"})
 * @ORM\JoinColumn(nullable=false)
 */
private $author;

/**
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="cmd\MyBundle\Entity\Book", inversedBy="authorBooks", cascade={"persist"})
 * @ORM\JoinColumn(nullable=false)
 */
private $book; 
```

--

```
class Book
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

 /**
 * @ORM\OneToMany(targetEntity="cmd\MyBundle\Entity\AuthorBook", mappedBy="book", cascade={"persist"})
 */
private $authorBooks; 
```

--

```
class Author
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @ORM\OneToMany(targetEntity="cmd\MyBundle\Entity\AuthorBook", mappedBy="author", cascade={"persist"})
 */
private $authorBooks; 
```

这将更新错误消息：

> AuthorBook 类型的实体通过外部实体 Author 具有身份，但是该实体本身没有实体。您必须在相关实体上调用 EntityManager#persist() 并确保在尝试保留“AuthorBook”之前生成了一个标识符。在 Post Insert ID Generation（例如 MySQL Auto-Increment 或 PostgreSQL SERIAL）的情况下，这意味着您必须在两个持久化操作之间调用 EntityManager#flush()。

我知道我需要在 AuthorBook 之前坚持和刷新书籍和作者。但是，我无法冲洗任何东西。当我不坚持任何事情时，我什至有这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:14:33.527

你的课出了点问题`AuthorBook`。删除`@ORM\Id`两者`$author`并`$book`添加正确的 id 字段。您应该在更新架构时收到错误消息，但如果您没有：

```
php app/console doctrine:schema:update --force; 
```

对此进行更新`AuthorBook`：

```
class AuthorBook
{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     *
     * @var integer $id
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="cmd\MyBundle\Entity\Author", inversedBy="authorBooks", cascade={"persist"})
     * @ORM\JoinColumn(nullable=false)
     */
    private $author;

    /**
     * 
     * @ORM\ManyToOne(targetEntity="cmd\MyBundle\Entity\Book", inversedBy="authorBooks", cascade={"persist"})
     * @ORM\JoinColumn(nullable=false)
     */
    private $book; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:39:11.823

如果您在 AuthorBook 中没有更多列（只有外键），我可以尝试建立多对多关系。

网址：[多对多 Doctrine 文档](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional)

# c# - 不同类中的命令定义

> ID：14403692
> 
> 赞同：2
> 
> 时间：2013-01-18T16:53:01.127
> 
> 标签：c#, wpf, binding, command

我是 WPF 新手，所以我不确定我所做的是否有意义.. 无论如何：我正在尝试为使用 ApplicationCommands.Open 的按钮实现命令。在我的 XAML 中，我有：

```
<Window x:Class="MainWindow"                
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"                
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                
        xmlns:local="clr-namespace:ViewModel"                
        Title="MainWindow" Height="650" Width="1170">                
    <Window.DataContext>                
        <local:ResourceListViewModel/>                
    </Window.DataContext> 
```

我想在 local:ResourceListViewModel 类中有一个命令定义，到目前为止我到了那里：

```
void OpenCmdExecuted(object target, ExecutedRoutedEventArgs e)
        {

            MessageBox.Show("The command has been invoked");
        }

        void OpenCmdCanExecute(object sender, CanExecuteRoutedEventArgs e)
        {
            e.CanExecute = true;
        } 
```

所以我认为我必须做的就是将这些方法绑定到一个命令，所以我试图这样做：

```
 <Window.CommandBindings >
        <CommandBinding Command="ApplicationCommands.Open"
                  Executed="OpenCmdExecuted"
                  CanExecute="OpenCmdCanExecute"/>
    </Window.CommandBindings> 
```

但程序没有编译，因为它似乎在 MainWindow 中寻找这些函数。如何让程序知道我的函数定义在不同的类中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:06:43.777

这不是命令在 MVVM 中的工作方式。`RoutedCommand`s (如`ApplicationCommands.Open`, 和`DelegateCommand`s (aka `RelayCommand`s)之间是有区别的。

第一个是与视图相关的和冒泡的可视化树等，必须由视图在代码隐藏中处理。

第二个是 ViewModel 相关的，在 ViewModel 中定义（意味着 Command 实例是 ViewModel 本身的属性成员）

```
public class ResourceListViewModel
{
    public RelayCommand OpenCommand {get;set;}

    public ResourceListViewModel()
    {
        OpenCommand = new RelayCommand(ExecuteOpenCommand, CanExecuteOpenCommand);
    }

    //etc etc
} 
```

# r - Interpreting error message in if condition in R

> ID：14403696
> 
> 赞同：0
> 
> 时间：2013-01-18T16:53:16.880
> 
> 标签：r

I have the following code:

```
a=2 

if (length(a)>1){
b<<-rowSums(c[,-(1:2)][,c(T,F)]) }

else {b<<-sum(c[seq(3,length(x),2)]) } 
```

I get the following error:

```
Error: unexpected 'else' in "    else" 
```

I have no idea why I am getting this message. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:56:01.197

我想你正在寻找

```
ifelse(expr, if-case, else-case) 
```

实际上，您的 if 似乎正在执行，然后您尝试编写一个“else”（但没有 if）。您是在 shell 中执行此代码还是将其写入文本文件中？

编辑（解释）：

```
x <- 1
b <- ifelse(x == 1, 1,2)
cat(b,"\n")
[1] 1 
```

因此，如果 x == 1，则 b 为 1，否则为 2。您可以将“1”和“2”与函数或任何您想要的东西交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:13:57.500

在 R 定义中：

> 当 if 语句不在块中时，else（如果存在）必须与语句 2 的结尾出现在同一行。否则 statement2 末尾的新行完成 if 并产生一个被评估的语法完整语句。一个简单的解决方案是使用括在大括号中的复合语句，将 else 与标记语句结束的右大括号放在同一行。

（[R语言定义](http://cran.r-project.org/doc/manuals/R-lang.html)）

所以，'else'必须和'}'在同一行。任何一个

```
a=2 

if (length(a)>1){
b<<-rowSums(c[,-(1:2)][,c(T,F)]) } else {b<<-sum(c[seq(3,length(x),2)]) } 
```

或者

```
a=2 

if (length(a)>1){
b<<-rowSums(c[,-(1:2)][,c(T,F)]) 
} else {b<<-sum(c[seq(3,length(x),2)]) } 
```

但仍然是一个糟糕的代码/标识模式。我会尝试类似的东西

```
a=2 

if (length(a)>1) {
    b<<-rowSums(c[,-(1:2)][,c(T,F)]) 
} else {
    b<<-sum(c[seq(3,length(x),2)]) 
} 
```

以避免进一步的错误，或建议的“ifelse”功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:18:30.923

正如@joran 在评论中指出的那样，要解决您眼前的问题，您只需要将语句的`}`结尾与.`if``else`

```
a <- FALSE

if (a) {
    print("a is true")
} else {  ## Works
    print("a is false")
}

if (a) {
    print("a is true")
} ## Doesn't work
else {
    print("a is false")
} 
```

当一行结束并且语句*可能*已经结束时，R 不再期望与该语句相关的更多输入。这也是同样的原因

```
1 +
2 
```

给出 3，但是

```
1
+ 2 
```

惯于。

我还强烈建议您重新考虑`<<-`. 在 R 中，让你的函数返回东西比让它们仅仅改变东西要好得多。另请参阅：[为什么使用 `<<-` 不受欢迎，我该如何避免？](https://stackoverflow.com/q/9851655/903061)

# css - Prevent description list items from collapsing when values are missing

> ID：14403699
> 
> 赞同：0
> 
> 时间：2013-01-18T16:53:29.360
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

I have a Rails 3.2 application and my "Show" view lists the fields and values for people. For this example let's assume the values are

```
name
address1
address2
city
state
zip 
```

I can't be assured that all data elements will have values for each label. For example address2 will seldom be filled in. That results in the values for city, state and zip to align with the wrong labels.

Is there a way I can make things line up with their appropriate label without having to throw it into a table? I'd like to avoid that mess if possible.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:14:21.347

这将取决于您如何显示数据。这是一种方法。

```
<% if(lable_value.empty? || lable_value.nil?) %>
  <%= "<br />".html_safe %>
<% else %>
  <%= lable_value %>
<% end %> 
```

# javascript - "single page app from scratch"

> ID：14403704
> 
> 赞同：5
> 
> 时间：2013-01-18T16:53:40.200
> 
> 标签：javascript, html, singlepage, single-page-application, tiddlywiki

I've been starting work on a single page app. (think TiddlyWiki)

It's been a while since I've done serious web design. Last time I built a big site was pre-css, pre-javascript, pre-html5, i.e., HTML plus a lot of cgi scripts, in my case, mostly in PHP. I've picked up snippets of the new technologies over the years, but not in any organized form.

I figure it's time to go back to square one and work through a serious of more and more complex pages/sites - HTML -> HTML+CSS -> Javascript -> HTML5 functions.....

Which leads me to wonder if there are any tutorials floating around akin to "Linux from Scratch" - but focused on "web site from scratch?" Or at least a series of tutorials that start with HTML hello world, and progressively add features in a logical way?

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T16:59:08.613

就我个人而言，我建议您正确学习 HTML 和 CSS，在考虑 javascript 之前（尤其是在考虑 SPA 之前！）让它们正常工作和工作良好。这是我最近为某人写的一个小指南，可能对您有帮助：

因此，要成为一名 CSS 大师，您必须考虑并理解以下几点（按照我认为的重要性顺序）：

1.  选择器
2.  级联
3.  特异性
4.  箱型
5.  定位/浮动
6.  HTML

选择器允许您定位页面上的元素，没有选择器您可以做的很少（除了向内联元素添加样式规则 - 不好的做法！），所以这是一个很好的起点。了解选择器的工作原理及其支持。

*   [http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

接下来要理解的是最重要的主题之一，它将避免你不必要地编写过多的 CSS——级联！

*   [http://reference.sitepoint.com/css/cascade](http://reference.sitepoint.com/css/cascade)

特异性决定了哪些规则适用于给定的元素。大多数时候它可以避免，你可以继续无知，但理解它会驯服你的选择器并阻止你与自己进行军备竞赛，向选择器添加更多和 ID 以应用你的样式（如果这没有意义的话，你不了解具体情况，请继续阅读！）

*   [http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

每当我与人们谈论 CSS 时，大多数人都了解字体样式、背景和所有爵士乐。那是因为它是简单的东西 ;-) 人们似乎总是在理解定位和浮动方面遇到困难的领域。这些都与*盒子模型*相关联，所以首先要学习这一点，然后再进行定位和浮动：

*   [http://css-tricks.com/the-css-box-model/](http://css-tricks.com/the-css-box-model/)
*   [http://www.alistapart.com/articles/css-floats-101/](http://www.alistapart.com/articles/css-floats-101/)
*   [http://www.alistapart.com/articles/css-positioning-101/](http://www.alistapart.com/articles/css-positioning-101/)

如果您在这一点上有点震惊，请不要担心，它们是相当令人困惑的概念！

但是没有标记的 CSS 是什么？或者更确切地说，没有*好的 HTML ，**好的*CSS有什么用？我认为，对 CSS 有很好的理解，就是对 HTML 有很好的理解。以下网站包含大量有关 HTML 的信息：

 **   [http://diveintohtml5.info/](http://diveintohtml5.info/)
*   [http://www.html5rocks.com/en/](http://www.html5rocks.com/en/) <-- 这可能有点硬核/前沿
*   [http://html5doctor.com/](http://html5doctor.com/)

对于第一次学习它们可能有点太深了，所以我也*强烈*推荐以下书籍：

*   [http://simplebits.com/notebook/2009/06/09/wssse/](http://simplebits.com/notebook/2009/06/09/wssse/)
*   [http://easy-readers.net/books/adaptive-web-design/](http://easy-readers.net/books/adaptive-web-design/)

它们都向您展示了如何使用 CSS 编写良好的语义标记和样式以创建出色的结果。我知道，对，在这​​个有互联网的时代，谁需要书？！好吧，这些书很棒，而且 100% 物有所值。

一些针对性不强的建议，​​但对于一般的 CSS/HTML 学习来说是很好的资源：

*   [http://www.alistapart.com](http://www.alistapart.com)
*   [http://www.smashingmagazine.com](http://www.smashingmagazine.com)
*   [http://www.css-tricks.com](http://www.css-tricks.com)

最后一件事——也是网络的一大优势——是所有网站都是有效的*开源**，因为您可以查看网站的*所有*CSS/HTML/JS。下次您看到有趣的东西时，只需打开 firebug 并尝试了解发生了什么，更改值，看看它有什么效果。看看其他人如何组织他们的标记，他们如何设置样式，他们通过 CSS 委托给 javascript 的功能等等。

在您了解了以上所有内容之后，您可能会喜欢涉足一些最前沿的 CSS。使用一些 CSS3 技术的便捷网站：

*   [http://css3please.com/](http://css3please.com/)
*   [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

这就是我此刻能想到的一切！当然，就像掌握任何东西一样，重要的不是你读了多少，而是你练习了多少。只有当你在实践中与这些东西斗争时，你才能真正获得洞察力并加强你自己的心智模式。

至于 JavaScript，假设您了解一些编程（假设您提到了 CGI 和 PHP），我衷心建议您观看一些 Douglas Crockford 的视频，这些视频可以在这里找到：

*   [http://javascript.crockford.com/](http://javascript.crockford.com/)

Crockford 是 JavaScript 大师，负责一些重大进展（他发明了 JSON 并启动了 JSLint）。YUI 剧院的视频特别出色，而且非常详细:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:57:48.833

对于一些工具和“调试”，看看你的东西是否有效，我会使用：[JSfiddle](http://jsfiddle.net/)

此外，w3schools 非常适合对这些概念的基本理解。

[CodeAcademy](http://www.codecademy.com/tracks/javascript)的 HTML5 和 Javascript 轨道也可能对您有所帮助。

[http://www.codeavengers.com/](http://www.codeavengers.com/)

很多还是一样的，只是 CSS 和 JS 添加了更多功能，而 HTML5 添加了更多元素标签。

我会在你的位置做的是制作一个基本的网站，然后慢慢地向它添加新功能，同时按照教程尝试将它变成你自己的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:49:10.120

我也会加我的 2 美分。这里有一些很好的系列，用于学习 HTML、CSS、整体网站编码/设计过程和其他我认为非常好的有用信息：

*   [HTML&CSS 初学者指南](http://learn.shayhowe.com/html-css/)
*   [HTML&CSS 高级指南](http://learn.shayhowe.com/advanced-html-css/)
*   [30 天学习不只是 HTML 和 CSS](https://tutsplus.com/course/30-days-to-learn-html-and-css/)
*   [Web 开发人员清单](http://webdevchecklist.com/)
*   [学习 CSS 布局](http://learnlayout.com/)
*   [爆款杂志！](http://coding.smashingmagazine.com/)

我可以发布更多内容，但为什么会这样 - 这些足以塑造身材。我建议你从他们开始，你会在路上找到更多的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-23T18:48:36.913

如果你想做一个 SPA，让我建议一个完全不同的策略，你不必从 HTML/CSS 级别开始：www.amber-lang.net

“Amber 语言深受 Smalltalk 的启发。它旨在使客户端开发更快、更容易。Amber 包括一个带有类浏览器、工作区、单元测试运行器、脚本、对象检查器和调试器的实时开发环境。

Amber 是自己编写的，包括编译器，并编译成高效的 JavaScript，与等效的 JS 进行一对一的映射。”

看看吧，真的很酷。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-21T21:41:49.597

如果你还在寻找 2020 年的起点，我最近写了[从零开始构建 Web 应用程序](https://medium.com/@maximiliano.tomasello/building-web-apps-from-scratch-5709f32ed903)时要考虑的事项。

不完全是您正在寻找的内容，但我认为这是一个很好的更新起点。

最好的，最大的，*

# php - Passing wildcards to routes in Laravel 4

> ID：14403711
> 
> 赞同：4
> 
> 时间：2013-01-18T16:54:04.993
> 
> 标签：php, laravel, laravel-4

I'm trying to create a route using a wildcard, with the syntax I know from L3, but I keep getting a 404.

I registered my route in `routes.php`:

```
Route::get("get_cities/(:num)","QueryController@get_cities"); 
```

The controller and the function exist and are found when I remove the wildcard. Has the syntax changed?

And while I'm at it: Is there any documentation I can refer to with similar problems, or is it yet to be written?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:05:44.900

你会想要类似的东西...

```
Route::get('cities/{id}', 'CityController@showProfile'); 
```

文档已经发布了一段时间了...

[http://four.laravel.com/docs/routing#route-parameters](http://four.laravel.com/docs/routing#route-parameters)
[http://four.laravel.com/docs/controllers](http://four.laravel.com/docs/controllers)

# javascript - Do I really need to change my document.ready section if I want to use RequireJS?

> ID：14403712
> 
> 赞同：1
> 
> 时间：2013-01-18T16:54:05.570
> 
> 标签：javascript, jquery, jquery-ui, dom, requirejs

Actually, I have something like this :

```
$(document).ready(function()
{
...JQUERY CODE HERE...
} 
```

But i would like, to only change the way i included my script library and use Require.JS. This is what i have done so far :

```
 <script type="text/javascript">
        requirejs.config({
            paths: {
                jquery: 'js-jQuery/jquery.js',
                jqueryui: 'js-jQuery/jquery-ui.custom.min.js'
            },            
            shim: {
                'jqueryui': {
                deps: ['jquery'],
                exports: '$'
                }
            }
        });

        requirejs([
            'jquery',
            'jqueryui'
        ]);
</script> 
```

I always get an error on my "$(document).ready". Do I really need to change my "Current" way of using "document.ready" to use a plugin like "domReady"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:55:51.387

不，您只需要确保在使用之前已包含 jQuery。

```
require(["jquery","jqueryui"],function($){
    $(document).ready(...

}); 
```

# mysql - mysql for each value in table 1 get all values from table 2

> ID：14403714
> 
> 赞同：0
> 
> 时间：2013-01-18T16:54:13.807
> 
> 标签：mysql

This problem is eating up my brain for the past few hours.

I have 2 tables:

```
**domain_pricing**
action  enum()
map varchar(10)
cost_price  varchar(10)
sale_price  varchar(10) 

**domain_mapping**
map varchar(10)
tld varchar(10) 
```

map is common for both tables. sample data:

```
**domain_pricing**
addnewdomain,dotbiz,12,13
renewdomain,dotbiz,12,13
transferdomain,dotbiz,12,13

**domain_mapping**
dotbiz,biz
dotbiz,fizz
dotbiz,jizz 
```

what i need after join:

```
biz,addnewdomain,12,13
biz,renewdomain,12,13
biz,transferdomain,12,13
fizz,addnewdomain,12,13
fizz,renewdomain,12,13
fizz,transferdomain,12,13
jizz,addnewdomain,12,13
jizz,renewdomain,12,13
jizz,transferdomain,12,13 
```

my query:

```
select m.tld,p.action,p.sales_price,p.cost_price from domain_pricing as p, domain_mapping as m where p.map=m.map 
```

result: biz,addnewdomain,12,13 biz,renewdomain,12,13 biz,transferdomain,12,13 dats all, tried doing left join but that gave all values for biz then fizz,null,null and finally jizz,null,null

Can't figure out where i'm going wrong

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:59:44.803

当我看到新用户或新用户的教程使用`,`for 连接时，我总是感到畏缩，因为它通常会产生他们不期望的结果。我非常相信明确说明您正在寻找的加入类型，以便其他人清楚地了解您的意图。尝试这个：

```
SELECT m.tld,p.action,p.sales_price,p.cost_price
FROM domain_pricing AS p
INNER JOIN domain_mapping AS m WHERE p.map=m.map 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:53:34.083

我认为解决了你的问题。最好的部分是您的查询没有任何问题。;-) 您只是在查询中打错了字。这发生在每个人身上。

从 domain_pricing 中选择 m.tld,p.action,p.sale* *s* *_price,p.cost_price 作为 p，domain_mapping 作为 m 其中 p.map=m.map

它应该是：

```
select m.tld,p.action,p.sale_price,p.cost_price from domain_pricing as p, domain_mapping as m where p.map=m.map 
```

不同之处在于您查询查找不存在的列 sale* *s* *。您想要的栏目是销售。

```
 CREATE TABLE domain_pricing (
  action enum('addnewdomain','renewdomain','transferdomain')  primary key,
  map varchar(10),
  cost_price  varchar(10),
  sale_price  varchar(10)
  );

CREATE TABLE domain_mapping(
  map varchar(10),
  tld varchar(10)
  );

INSERT INTO domain_pricing (action, map, cost_price, sale_price)
VALUES 
('addnewdomain','dotbiz',12,13),
('renewdomain','dotbiz',12,13),
('transferdomain','dotbiz',12,13);

INSERT INTO domain_mapping (map,tld)
VALUES 
('dotbiz','biz'),
('dotbiz','fizz'),
('dotbiz','jizz');

SELECT * FROM domain_pricing;

SELECT * FROM domain_mapping;

select m.tld,p.action,p.sale_price,p.cost_price from domain_pricing as p, domain_mapping as m where p.map=m.map;

select m.tld,p.action,p.cost_price, p.sale_price, from domain_pricing as p, domain_mapping as m where p.map=m.map; 
```

在行动中看到它：[http ://www.sqlfiddle.com/#!2/f6b83/7](http://www.sqlfiddle.com/#!2/f6b83/7)

顺便说一句，我不确定您为什么需要 enum 才能采取行动？我建议改为使用整数列作为主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:57:26.203

要获得您描述的结果，您需要一个 CROSS JOIN。

```
SELECT m.tld, p.action, p.cost_price, p.sale_price
FROM domain_mapping m
CROSS JOIN domain_pricing p 
```

这称为*笛卡尔积*，您故意省略连接条件，以便将一个表中的所有行映射到另一个表的所有行。MySQL 也将此称为*完全连接*。

# ios - refreshing a UIview in a tabbed application in ios

> ID：14403717
> 
> 赞同：1
> 
> 时间：2013-01-18T16:54:20.603
> 
> 标签：ios, objective-c, uiview, refresh

I have a tabbed application with two tabs.

on the second tab, I plot a graph.

But every time I press this tab, the UIview is not getting refreshed.

I tried,

```
[self.view setNeedsDisplay]

inside

- (void)viewDidLoad 
```

but still it was not refreshed.

I tried pasting the code from `- (void)viewDidLoad` to `-(void)viewDidAppear`

But nothing happened.

Awaiting an answer.

Edit: The whole source code

```
- (void)viewDidLoad
{

    //[self.view setNeedsDisplay];

    Sensor_VisualizationAppDelegate *delegate = (Sensor_VisualizationAppDelegate *)[[UIApplication sharedApplication] delegate];
    valuePass = delegate.valuepass;
    timePass = delegate.timepass;

    NSNumber *value1 = [valuePass objectAtIndex:0];
    NSNumber *value2 = [valuePass objectAtIndex:1];
    NSNumber *value3 = [valuePass objectAtIndex:2];
    NSNumber *value4 = [valuePass objectAtIndex:3];
    NSNumber *value5 = [valuePass objectAtIndex:4];
    NSNumber *value6 = [valuePass objectAtIndex:5];
    NSNumber *value7 = [valuePass objectAtIndex:6];

    NSString *time1 = [timePass objectAtIndex:0];
    NSString *time2 = [timePass objectAtIndex:1];
    NSString *time3 = [timePass objectAtIndex:2];
    NSString *time4 = [timePass objectAtIndex:3];
    NSString *time5 = [timePass objectAtIndex:4];
    NSString *time6 = [timePass objectAtIndex:5];
    NSString *time7 = [timePass objectAtIndex:6];

    OVGraphView *graphview=[[OVGraphView alloc]initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.height, 300) ContentSize:CGSizeMake(960, 300)];
    graphview.reverse=YES;
    graphview.graphcolor=[UIColor colorWithRed:0.31 green:0.73 blue:0.78 alpha:1.0];
    [self.view addSubview:graphview];
    [graphview setPoints:@[ [[OVGraphViewPoint alloc]initWithXLabel:time1 YValue:value1],
     [[OVGraphViewPoint alloc]initWithXLabel:time2 YValue:value2],
     [[OVGraphViewPoint alloc]initWithXLabel:time3 YValue:value3],
     [[OVGraphViewPoint alloc]initWithXLabel:time4 YValue:value4],
     [[OVGraphViewPoint alloc]initWithXLabel:time5 YValue:value5],
     [[OVGraphViewPoint alloc]initWithXLabel:time6 YValue:value6],
     [[OVGraphViewPoint alloc]initWithXLabel:time7 YValue:value7]
     ]];

[super viewDidLoad];    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:09:28.067

要检测标签栏触摸，您可以实现 UITabBarController 委托，如下所示：

```
 - (void)tabBarController:(UITabBarController *)tabBarController 
 didSelectViewController:(UIViewController *)viewController
{
    NSLog(@"controller class: %@", NSStringFromClass([viewController class]));
    NSLog(@"controller title: %@", viewController.title);
} 
```

您创建标签栏的位置。然后可以获取视图控制器的视图实例并调用 setNeedsDisplay

在 ovgraphview 的源代码中，在调用 setPoints 之后的某个地方调用此方法：

```
-(void)setPlotViewPoints:(NSArray *)points Reversed:(BOOL)reversebool{
    if (reversebool) {
       self.plotpoints=[[points reverseObjectEnumerator]allObjects];
    }else{
        self.plotpoints=points;
    }
    spacebetweenpoints=self.frame.size.width/[points count];
    int d=0;
    for (OVGraphViewPoint *pt in points) {
        if ([pt.yvalue intValue]>d) {
            d=[pt.yvalue intValue];
        }
    }
    yscale=(self.frame.size.height-40)/d;
    [self setNeedsDisplay];
} 
```

在最后一行中，您看到它们在设置点后调用视图上的 setNeedsDisplay，因此您无需在创建图形之前调用它。但既然你这样做了，这似乎与图表的内部植入混淆了。当您调用 setNeedsDisplay 时，它会等到下一个运行循环循环显示，上面方法中调用的循环也会显示。现在我们在视图层次结构的不同层上调用了不止一个，它变得令人讨厌。我认为这就是问题所在。

对于您的情况，我将完全离开 setNeedsDisplay ，或者只在我上面给出的委托方法中调用 setPoints ，或者如果您没有使用 tabbarcontroller 而不是实现 tabBar:didSelectItem: 的标签栏委托来检测您的标签何时被点击，或者通过分配创建标签栏项目时为其添加标签或检查其标题以验证其是否为您想要的标签，然后调用设置点。

这有点啰嗦，如果您需要我尝试进一步澄清，请告诉我。

# jquery-ui-datepicker - jQuery datepicker 几天前停止工作......

> ID：14403729
> 
> 赞同：0
> 
> 时间：2013-01-18T16:54:58.843
> 
> 标签：jquery-ui-datepicker

不知道这里发生了什么，我需要一个新的视角。我在数百个站点上运行了 jquery 插件 datepicker，但它最近停止为我工作。几个例子：

[http://www.arborpointeapartments.com/](http://www.arborpointeapartments.com/) http://www.madisonparkapartments.net/

在过去的几天里，当您单击该字段时，日期选择器刚刚停止“弹出”。不知道为什么。任何网站都没有任何变化，它们都在本地加载 datepicker 文件。

假设托管站点上没有任何变化，那么日期选择器怎么会停止工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:05:17.953

谢谢丹尼，你给我指明了正确的方向。我注释掉了 jQuery 1.9.0 的包含并修复了它。看起来我正在使用的 datepicker 版本与 1.9.0 版本的 jQuery 不同。当我使用 jQuery 1.8.3 时它工作正常

猜猜这是一次从谷歌加载最新的 jQuery 不是一个好主意，如下所示：[http ://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js)

# objective-c - Objective-C 不支持重载方法

> ID：14403730
> 
> 赞同：1
> 
> 时间：2013-01-18T16:55:03.910
> 
> 标签：objective-c

我知道 Objective-C 不支持方法重载。但是，我如何理解以下与“tableView”同名的委托方法？对我来说，这些方法似乎是重载的，但我不确定。

要让视图控制器表明它是 UITableView 委托，它必须实现 UITableViewDelegate 协议。以下是在视图控制器中实现的常见委托方法：

```
tableView:heightForRowAtIndexPath:
tableView:willDisplayCell:forRowAtIndexPath:
tableView:didSelectRowAtIndexPath:
tableView:didDeselectRowAtIndexPath:
tableView:commitEditingStyle:forRowAtIndexPath:
tableView:canEditRowAtIndexPath: 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T17:16:47.037

您列出的所有方法都不同，因为选择器名称包括所有部分，而不仅仅是第一个冒号 ' `:`' 之前的部分。

这是在 Objective C 中尝试方法重载的示例（编译器将拒绝）：

```
- addSomething:(NSObject *) toView:(UIView *)view
- addSomething:(UIView *) toView:(UIView *)view   // won't work 
```

请注意，当存在**同名的****类方法**和**实例方法**变体时，您可以“重载”方法：

 **```
- addSomething:(NSObject *) toView:(UIView *)view 
+ addSomething:(NSObject *) toView:(UIView *)view  // this is OK 
```

显然，您需要一个很好的理由来做一些可能会令人困惑的事情！

另请参阅此问题：

[Objective-C中同名的类方法和实例方法](https://stackoverflow.com/questions/13747521/class-method-and-instance-method-with-the-same-name-in-objective-c/13748056)**

# iphone - 本地通知显示不止一次

> ID：14403734
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:55:11.307
> 
> 标签：iphone, ios, objective-c, xcode, uilocalnotification

首先，对不起我的英语。我遇到了一个创建多个本地通知的应用程序的问题。我将它们安排在一个 for 循环中：

```
for (int i = 0; i < 100 ; i++) {
    compteur++;

    UILocalNotification *prototypeNotification = [[UILocalNotification alloc] init];
    prototypeNotification.timeZone = [NSTimeZone defaultTimeZone];

    prototypeNotification.applicationIconBadgeNumber = 0;
    prototypeNotification.alertBody = @"ALERTE PILULE !!!!!";
    prototypeNotification.alertAction = @"Ok";
    [prototypeNotification setSoundName:UILocalNotificationDefaultSoundName];
    prototypeNotification.fireDate = itemDate;

    [[UIApplication sharedApplication] scheduleLocalNotification:prototypeNotification];
    [prototypeNotification release];

    itemDate = [[NSCalendar currentCalendar] dateByAddingComponents:comps toDate:itemDate options:0];

    if (compteur == 21) {
        compteur = 0;
        itemDate = [[NSCalendar currentCalendar] dateByAddingComponents:comps2 toDate:itemDate options:0];

    }
} 
```

当firedate来了时，它运行良好，但有时它不仅显示一个，而且显示2个或3个或6个警报......我就是找不到原因......有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T07:40:14.897

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; 
    //here you can undo many of the changes made on entering the background.
    UIApplication *APP =[UIApplication sharedApplication];
     NSArray *oldnotification = [APP scheduledLocalNotifications];
    if (oldnotification>=0)
    {
         [APP cancelAllLocalNotifications];
    }
} 
```

您是否在上面的模块中添加此代码..以取消旧通知？

# c# - 服务器与多个不同的客户端通信

> ID：14403735
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:55:12.470
> 
> 标签：c#, .net, tcp, ip

所以我得到了一个任务来做一个小的聊天功能，多个客户端应该能够连接到服务器并与之通信，然后服务器应该能够选择它想要与之通信的人。（从下拉列表或其他东西）。

到目前为止，在一些教程的帮助下，我能够做到的是客户端可以连接到服务器并与之通信，但仅此而已。服务器无法返回通信。

我对此很陌生，并且在 C# 和 TCP/IP 方面的知识有限。

[https://gist.github.com/4565988](https://gist.github.com/4565988) <-包含客户端和服务器的代码。

所以我需要帮助的是服务器回复不同客户端以及客户端从服务器接收消息的一种方式。

任何帮助表示赞赏！

最好的问候，弗雷德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:33:33.383

对于 TCP 知识，我查看了 Barbara Heckler 的视频，其中她展示了这种服务器的简要实现。不幸的是，在 Java 中，但仍然非常有用。

我为基础知识（UDP）和 15-40 分钟进行了基础分析（UDP），以及为什么 TCP 需要多线程但 UDP 不需要多线程。

[http://www.youtube.com/watch?v=5QzNHEcLp10](http://www.youtube.com/watch?v=5QzNHEcLp10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:19:16.937

关于起点，我会看看[WCF Duplex Services](http://msdn.microsoft.com/en-us/library/ms731064.aspx)。双工允许您订阅服务并使用双向通信发送更新。

本质上，您可以使用以下几种方法将服务器创建为 WCF 服务：`getclients`和`sendMessage`. 然后，客户端可以从那里订阅服务并（在连接时）获取其他订阅者的列表（您提供给 UI），然后将消息发送回服务（然后使用双工将其发送给任何人它需要）。

只要您不习惯使用套接字，这将比创建协议和管理连接列表容易得多。[在代码项目](http://www.codeproject.com/Articles/19752/WCF-WPF-Chat-Application)中也有使用 WCF 作为聊天媒介的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T21:45:03.377

这很简单，真的。您成功提取并用于读取客户端发送的内容的 TCP 流也可以写入以发回某些内容，因此您所要做的就是将连接和流对象移出到某种共享集合中，所以你的服务器端发送逻辑可以在它想要发送东西时得到它。同样，在客户端中，您将发出对 TCP 流的读取以读取服务器发送的内容。

# c++ - boost::asio 数据包顺序和连续性

> ID：14403738
> 
> 赞同：2
> 
> 时间：2013-01-18T16:55:22.337
> 
> 标签：c++, boost, tcp, boost-asio

我正在使用`boost::asio::ip::tcp::socket`在客户端/服务器应用程序中发送和接收数据。我使用简单的自制数据包，其中包含一个包含数据包大小的标头以及一些标志和“真实”数据。我使用`boost::asio::write`. 在某些情况下，我有很多数据包要发送给一个客户端。天真的最快的选择是一次发送它们。例如

```
 async_write(socket, buffer(p[0].str(),p[0].size()), &callback);
 async_write(socket, buffer(p[1].str(),p[1].size()), &callback);
 async_write(socket, buffer(p[2].str(),p[2].size()), &callback); 
```

但是如果我这样做，是否可以保证我的数据包作为一个整体到达客户端？所以在例子中如果数据包的前4个字节代表剩余数据包的大小，我可以调用四次吗

```
uint32 size;
read(socket, buffer(&size,4));
char data[size];
read(socket, buffer(data,size)); 
```

并确保每个都`data`包含一个数据包（除了 uint32 大小）？或者如果我在回调函数中发送下一个数据包，它会起作用吗？

如果这个事实有效，另一个问题是关于排序。我可以确定到达客户端的数据包的顺序与我从服务器发送它们的顺序相同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:02:04.523

首先，TCP 套接字操作的是数据流，而不是数据包。其次，[`async_write()`文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_write/overload1.html)明确指出每个套接字可以进行一个未完成的操作：

> 该操作是根据对流`async_write_some`函数的零次或多次调用来实现的，称为组合操作。程序必须确保流不执行其他写入操作（例如`async_write`，流的`async_write_some` 函数，或执行写入的任何其他组合操作），直到此操作完成。

您将需要链接您的操作：仅在调用`async_write()`第一个操作的完成处理程序后才调用第二个操作。

# php - 使用 $this 时按引用或值赋值？

> ID：14403740
> 
> 赞同：0
> 
> 时间：2013-01-18T16:55:26.067
> 
> 标签：php, object

我对此链接列表中的以下输出感到困惑

```
class ListNode{
    public $next = NULL;
    public $data = NULL;
    public function __construct($data){
        $this->data = $data;
    }

}

class LinkedList{
    private $firstNode = NULL;
    private $lastNode = NULL;

    public function insertFirst($data){
        $link = new ListNode($data);
        $link->next = $this->firstNode;
        $this->firstNode = &$link;
        if($this->lastNode == NULL){
            $this->lastNode = &$link;
        }

    }

    public function readList(){
        while($this->firstNode != NULL){
            echo $this->firstNode->data;
            $this->firstNode = $this->firstNode->next;
        }
    }

    public function assessList(){
        $copy = $this->firstNode;
        echo $copy->data;
        echo $this->firstNode->data;
        $copy->data = 'm';
        echo $copy->data;
        echo $this->firstNode->data;        
    }

}

$linkedList = new LinkedList();
$linkedList->insertFirst('c');
$linkedList->insertFirst('b');
$linkedList->insertFirst('a');
//$linkedList->readList();  //output a b c
$linkedList->assessList();  //outputs a a m m 
```

我希望输出是`a a m a`. 我认为`$copy`只是存储在`$this->firstNode`.

这行代码`$copy = $this->firstNode`不是按值赋值吗？我希望输出是`a a m m`引用赋值，`$copy = &$this->firstNode`而不是值赋值。

有人可以澄清一下吗？

**编辑（附加示例）**

```
public function assessList(){
    $copy = $this->firstNode->data;
    echo $copy. "<br/>";
    echo $this->firstNode->data. "<br/>";
    $copy = 'm';
    echo $copy. "<br/>";
    echo $this->firstNode->data. "<br/>";       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:58:36.620

这：

```
$copy = $this->firstNode; 
```

不是对象的副本，它是指向原始对象的“指针”的副本，所以当你修改它时，你修改了底层对象。您需要使用[`clone`](http://php.net/manual/en/language.oop5.cloning.php)关键字才能获得真实副本：

```
$copy = clone $this->firstNode; 
```

来自 PHP[文档](http://php.net/manual/en/language.oop5.basic.php)（强调我的）：

> 将已创建的类实例分配给新变量时，新变量将访问与分配的对象**相同的实例。**

您可以从此[示例](http://viper-7.com/dkPTkz)中看到您的代码片段现在输出：

```
aama 
```

# python - 初学者的 Python 数组

> ID：14403742
> 
> 赞同：1
> 
> 时间：2013-01-18T16:55:28.033
> 
> 标签：python, arrays, input

我刚开始使用 Python，对数组有一些疑问。我完全不理解他们。我得到了一个项目，想知道是否有人可以提供帮助。我必须制作一个 1x4 的盒子。用户可以选择四个方框之一，然后出现 A。其他三个盒子然后用 BC D 填满。

```
somearray = []
    index= input("")-1
    char = raw_input("")
    somearray[] = char 
```

这就是我被赋予的工作。我也知道需要输入或`raw_input`将需要。

```
def drawArray():
    somearray = []
    index = input("1 , 2 , 3 , 4") - 1
    char = raw_input("A , B , C, D ")
    somearray[] = char 
```

这就是我输入的内容。我不确定我应该从这里去哪里。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:08:07.150

你的意思是这样的吗？

```
>>> def func():
    ind=input("enter the index :")-1
    lis=['B','C','D']
    lis.insert(ind,'A')
    return lis
   ....: 

>>> func()
enter the index :1
>>> ['A', 'B', 'C', 'D']

>>> func()
enter the index :2
>>> ['B', 'A', 'C', 'D']

>>> func()
enter the index :3
>>> ['B', 'C', 'A', 'D'] 
```

# java - JAR 中的写入文件方法

> ID：14403745
> 
> 赞同：0
> 
> 时间：2013-01-18T16:55:32.593
> 
> 标签：java, file, jar, bufferedwriter

我正在使用此方法从 JAR 中的文本文件中读取并正常工作。

```
BufferedReader Bbr=new BufferedReader(new InputStreamReader(getClass().getResourceAsStream("AllBookRecords.txt"))); 
```

现在，我想写入文件（从文件中删除一行，通过从第一个文件写入第二个文件而没有特定的行）。

我使用此代码执行此操作：

```
String Bookid=tf1.getText();
File Tf=new File("Boutput.txt");
URL myUrl=getClass().getResource("AllBookRecords.txt");
            File file=new File(myUrl.toURI());
            OutputStream myoutput=new FileOutputStream(file);
            PrintWriter pw2=new PrintWriter(myoutput);

            String Bs;
            while( (Bs=Bbr.readLine()) != null ){
                    String[] Ust=Bs.split("     ");
                    String Bname=Ust[0];
                    String Bdate=Ust[1];
                    String id=Ust[2];

                if(!id.equals(Bookid.trim())){
                    pw2.println(Bs);
                }
            }
            pw2.close();
            Bbr.close();
            file.delete();
            Tf.renameTo(file);

        } catch(FileNotFoundException fnfe){
            foundlable.setText("File Not Found");
        } catch(IOException ioe){
            foundlable.setText("IO Error");
            ioe.printStackTrace();
        }
        catch(URISyntaxException ue){
      ue.printStackTrace();
        } 
```

但是 java.lang.IllegalArgumentException 发生了：

```
C:\Windows\System32>java -jar "C:\Users\khoy\Documents\NetBeansProjects\JavaApplication6\dist\JavaApplication6.jar"
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: URI is not hierarchical
        at java.io.File.<init>(File.java:363)
        at Library.ReadBookFileToListM$3.actionPerformed(ReadBookFileToListM.java:67)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
        at java.awt.Component.processMouseEvent(Component.java:6038)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3265)
        at java.awt.Component.processEvent(Component.java:5803)
        at java.awt.Container.processEvent(Container.java:2058)
        at java.awt.Component.dispatchEventImpl(Component.java:4410)
        at java.awt.Container.dispatchEventImpl(Container.java:2116)
        at java.awt.Component.dispatchEvent(Component.java:4240)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4322)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3986)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3916)
        at java.awt.Container.dispatchEventImpl(Container.java:2102)
        at java.awt.Window.dispatchEventImpl(Window.java:2429)
        at java.awt.Component.dispatchEvent(Component.java:4240)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:121) 
```

我的文件在类路径中。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:11:04.803

你不能那样做。

jar 是文件本身，而不是目录。它包含 java 知道如何读取的资源。但是，jar 中的资源不是文件，因此不能用作文件。据我所知，将新数据写入 jar 的唯一方法是获取内容、进行更改并创建一个全新的 jar。

# c# - 字典中可能的空分配包含键

> ID：14403749
> 
> 赞同：0
> 
> 时间：2013-01-18T16:55:56.133
> 
> 标签：c#, asp.net, resharper

收到有关“！redirectsDictionary.ContainsKey（autoRedirect.Key）”的警告

asp.net 可能对标有“notnull”属性的实体进行空分配。

只是想知道那是关于什么的？

```
private static readonly Dictionary<string, Redirect> AutoRedirectsDictionary = new Dictionary<string, Redirect>();

foreach (var r in db.SelectItems("fast:/sitecore/content/Redirects Root//*[@@templatename='Auto Redirect']"))
        {
            GenerateRedirects(Context.Database.GetItem(r.Fields["Root Node"].Value), r["URL Prefix"]);
            foreach (var autoRedirect in AutoRedirectsDictionary)
            {
                if (!string.IsNullOrEmpty(autoRedirect.Key) & !redirectsDictionary.ContainsKey(autoRedirect.Key))
                {
                    //Add to dictionary
                    redirectsDictionary.Add(autoRedirect.Key, autoRedirect.Value);
                }

            }
        }

public static void GenerateRedirects(Item redirectFolder, string urlPrefix)
        {
            if (redirectFolder == null)
                return;

            var childList = redirectFolder.GetChildren();

            foreach (Item child in childList)
            {
                if (Utilities.HasFieldValue(child, FieldToFind))
                {
                    var shortcutUrl = urlPrefix + child.Fields[FieldToFind].Value.ToLower();

                    if (!string.IsNullOrEmpty(shortcutUrl) && !AutoRedirectsDictionary.ContainsKey(shortcutUrl))
                    {
                        AutoRedirectsDictionary.Add(shortcutUrl,
                        new Redirect(String.Empty, child, true));       
                    }
                }
                else
                {
                    GenerateRedirects(child, urlPrefix);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:02:55.007

这可能与您使用单个`&`运算符有关。单个`&`不会使用短路来绕过语句，而是会在评估所有表达式后选择要执行的路径。因此，即使您在`!string.IsNullOrEmpty(autoRedirect.Key)`ContainsKey 调用之前进行检查，也将首先评估两个表达式，然后确定执行路径。

Edited as I realized I didn't truly answer your specific question (and you may already know this) but `!redirectsDictionary.ContainsKey(autoRedirect.Key)` will throw an exception if the key is null. Since the datatype for the key is a `string` there is a possibility it will throw an exception if it is null, hence the warning.

# php - 我应该如何改进 PhP 中的这种延迟加载模式？

> ID：14403753
> 
> 赞同：0
> 
> 时间：2013-01-18T16:56:04.067
> 
> 标签：php, lazy-loading

```
static $searchQuery="nothing";

if ($searchQuery=="nothing")
{
    if ($referral=="")
    {
        $referral=referrer();
    }
    $searchQuery=getSearchQuery($referral);
}
return $searchQuery; 
```

基本上我需要用一些东西初始化 $searchQuery 。

我可以用“”初始化它，但 $searchQuery 的值通常是合法的“”。

那么我应该如何初始化它呢？“”？零？空值？大批（）？什么？

我也可以使用

```
static $result;
if  (isset($result))
{
    return $result;
} 
```

但我收到警告，因为 $result 未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:00:51.267

这取决于您，但您需要小心 PHP 的松散类型。我更喜欢`NULL`，并且我会将该代码编写为：

```
static $searchQuery = NULL;

if( is_null($searchQuery) ) {
    if( emtpy($referral) ) {
        $referral=referrer();
    }
    $searchQuery=getSearchQuery($referral);
}
return $searchQuery; 
```

# java - Liferay ClassNotFoundException: DLFileEntryImpl

> ID：14403754
> 
> 赞同：4
> 
> 时间：2013-01-18T16:56:05.660
> 
> 标签：java, exception, liferay, portlet, portal

在我的 6.1.0 门户实例上，使用 ServiceBuilder 和 DL-Api 的 6.1.0 SDK-Portlet 这行：

```
DynamicQuery query = DynamicQueryFactoryUtil.forClass(DLFileEntry.class) 
```

产生此错误：

```
16:46:46,319 ERROR [DynamicQueryFactoryImpl:83] Unable find model 
com.liferay.portlet.documentlibrary.model.impl.DLFileEntryImpl
java.lang.ClassNotFoundException: com.liferay.portlet.documentlibrary.model.impl.DLFileEntryImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    at com.liferay.portal.dao.orm.hibernate.DynamicQueryFactoryImpl.getImplClass(DynamicQueryFactoryImpl.java:78)
    at com.liferay.portal.dao.orm.hibernate.DynamicQueryFactoryImpl.getImplClass(DynamicQueryFactoryImpl.java:59)
    at com.liferay.portal.dao.orm.hibernate.DynamicQueryFactoryImpl.forClass(DynamicQueryFactoryImpl.java:33)
    at com.liferay.portal.kernel.dao.orm.DynamicQueryFactoryUtil.forClass(DynamicQueryFactoryUtil.java:23)
    at de.acocon.liferay.service.service.bean.DocLibBean.findByExtraSettings(DocLibBean.java:403)
    at de.acocon.liferay.service.service.bean.DocLibBean.findByIdeaId(DocLibBean.java:395)
    at de.acocon.liferay.service.service.bean.DocLibBean.fillUploadedFileListByIdea(DocLibBean.java:417)
    at de.acocon.liferay.service.service.bean.IdeaController.init(IdeaController.java:149)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:117)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokePostConstruct(WebContainerInjectionProvider.java:99)
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.jboss.el.parser.AstIdentifier.getValue(AstIdentifier.java:44)
    at org.jboss.el.parser.AstValue.getValue(AstValue.java:63)
    at org.jboss.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:224)
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:85)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at org.icefaces.impl.context.DOMPartialViewContext.processPartial(DOMPartialViewContext.java:153)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:390)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at com.liferay.faces.bridge.lifecycle.LifecycleWrapper.render(LifecycleWrapper.java:45)
    at com.liferay.faces.bridge.BridgePhaseResourceImpl.execute(BridgePhaseResourceImpl.java:115)
    at com.liferay.faces.bridge.BridgeImpl.doFacesRequest(BridgeImpl.java:115)
    at javax.portlet.faces.GenericFacesPortlet.serveResource(GenericFacesPortlet.java:178)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:118)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:71)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:634)
    at com.liferay.portlet.InvokerPortletImpl.invokeResource(InvokerPortletImpl.java:746)
    at com.liferay.portlet.InvokerPortletImpl.serveResource(InvokerPortletImpl.java:503)
    at com.liferay.portal.action.LayoutAction.processPortletRequest(LayoutAction.java:941)
    at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:664)
    at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:244)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:174)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:533)
    at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:510)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:135)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.gzip.GZipFilter.processFilter(GZipFilter.java:123)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.i18n.I18nFilter.processFilter(I18nFilter.java:241)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter.processFilter(NtlmPostFilter.java:83)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:80)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.processFilter(VirtualHostFilter.java:208)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:184)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:184)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

我搜索了几个小时的原因，但我没有找到它。我还尝试将 portal-impl.jar 添加到我的 lib/ 文件夹中，但这没有帮助而且不好；）

请说我应该使用新版本，因为我无法更改 -> 客户为王

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T09:44:20.023

这似乎是一个类加载器问题，在 liferay 中有不同的类加载器，如（粗略解释）：

1.  插件类加载器：从“/my-portlet/WEB-INF/lib/”加载插件类
2.  门户类加载器：从`portal-impl.jar`
3.  全局类加载器：加载服务器类，即来自的类`../tomcat-7.0.27/lib/ext/`

所以有不同的方法可以将类`DynamicQuery`从一个类加载器加载到另一个类中。

以下是您可以`DynamicQuery`根据实现类所在位置使用的方式：

1.  如果实现类在您的自定义 portlet 中，那么： 不要使用特殊的类加载器 - 它应该可以开箱即用。

2.  如果 Implementation 类是门户的一部分（即来自`portal-impl.jar`like `User`，`Role`或`Group`在您的情况下`DLFileEntry`），则使用以下内容：

    ```
    Classloader loader = PortalClassLoaderUtil.getClassLoader();
    DynamicQuery query = DynamicQueryFactoryUtil.forClass(DLFileEntry.class, loader); 
    ```

3.  如果实现类在另一个 portlet 中，则使用以下内容：

    ```
    ClassLoader classLoader = (ClassLoader) PortletBeanLocatorUtil.locate(ClpSerializer.SERVLET_CONTEXT_NAME,"portletClassLoader");
    DynamicQuery query = DynamicQueryFactoryUtil.forClass(DLFileEntry.class, classLoader); 
    ```

**所以回答你的问题**：第二种方法应该适合你。

[信息转载自[Liferay 论坛帖子](http://www.liferay.com/community/forums/-/message_boards/message/10928942 "如何使用 DynamicQuery 或 Finder 类获取 Liferay 的实体？")]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T11:26:07.180

试试下面的代码：

```
DynamicQuery query = DynamicQueryFactoryUtil.forClass(DLFileEntry.class, DLFileEntry.class.getClassLoader()); 
```

对我来说，它奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-01T04:25:12.187

就我而言，我们使用的是自定义表。每当我尝试从我的 EntityServiceImpl 类中获取数据时，我都会遇到同样的错误。其中 Entity 是我的表的名称。在这里，我们公开了我们的 liferay 服务。使用代码解决的问题

```
ClassLoader classLoader = (ClassLoader) PortletBeanLocatorUtil.locate(ClpSerializer.getServletContextName(),"portletClassLoader");
DynamicQuery query = DynamicQueryFactoryUtil.forClass(Entity.class, classLoader); 
```

但是请使用 ClpSerializer.getServletContextName() 而不是 ClpSerializer.SERVLET_CONTEXT_NAME。正如kgiannakakis所说。

# javascript - 多行 html 的 jQuery 1.9 问题

> ID：14403760
> 
> 赞同：0
> 
> 时间：2013-01-18T16:56:32.183
> 
> 标签：javascript, jquery, html, string, replace

我在从 jQuery 1.7.3 更新到 jQuery 1.9.0 时遇到了一点问题：

[http://jsfiddle.net/xsJAd/](http://jsfiddle.net/xsJAd/)

似乎它不喜欢接受多行 html。如果取消注释前几行，您将在控制台中看到错误。这是在 1.9 中故意这样做还是这是一个错误，我真的不想`.replace()`在我的代码中到处调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:59:49.453

您需要从开头修剪空格`html()`才能使其正常工作：

```
console.log($($.trim($('#tpl-tableList').html()))); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/xsJAd/1/)

# salesforce - 提取soql中关系查找字段的真实值

> ID：14403762
> 
> 赞同：1
> 
> 时间：2013-01-18T16:56:33.070
> 
> 标签：salesforce, soql

我是 sql 关系查询的新手。我一直试图让这个工作，但不确定这是否可能。

```
Select Id, Name, CustomObject__r.name From Account where customobject__c != null 
```

给我一个结果，其中有一列“customobject__c”，但我必须点击它才能看到真正的价值。我想查看表中的实际值，以便可以将其提取到 csv 中。CustomObject 是 Account 中的查找字段。

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:21:40.423

您需要一个更好的 SOQL 编辑器。你现在在用什么？

当您导出数据时，Data Loader（官方支持的工具）应该为您提供这些完整的关系“路径名”，但它有点太笨重，无法每天使用。您将在一个工具中设计查询并将它们粘贴到 DL...

我是 RealForceExplorer 的忠实粉丝；）请参阅[如何在 SOQL 中添加评论以](https://stackoverflow.com/questions/13527752/how-to-add-comments-in-soql)获取一些提示并选择您最喜欢的编辑器。

![RFE 示例](../Images/349fc1c4a1cf7ed829db296db99360dd.png)

# java - 加快 ant build 中的 junit 测试

> ID：14403765
> 
> 赞同：5
> 
> 时间：2013-01-18T16:56:48.637
> 
> 标签：java, ant, junit

前几天我正在观看我们的 ant 构建运行，并注意到我们的大多数 junit 测试运行时间小于 0.2 秒，但 ant 需要 1-2 秒才能在它们之间循环。这可能是我们典型构建中最大的单一时间块。

所以我想知道我是否创建了一个测试套件，这是否有助于消除每个测试的开销时间，而只需将开销用于整个测试块？另外，还有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:19:03.913

我已经放置`fork="yes"`了我们的junit测试来解决我们很久以前遇到的一些问题。我不记得它是什么，但我只是尝试`forkmode="once"`根据 Clemens 的建议将其切换到它，它使我们的构建时间缩短了三分钟。

感谢所有的帮助。

# android - 如何检测股票 Android 浏览器

> ID：14403766
> 
> 赞同：49
> 
> 时间：2013-01-18T16:56:50.757
> 
> 标签：android, user-agent, android-browser

导航到[http://whatsmyuseragent.com/](http://whatsmyuseragent.com/)显示我在运行 4.2.1 的 Galaxy Nexus 上的库存 Android 浏览器有用户代理

```
Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.34 Safari/534.24 
```

这个用户代理中没有任何东西可以让我唯一地检测到它是一个普通的 Android 浏览器。Chrome for Android 应用程序至少`android`在 UA 中有。我有什么方法可以检测到库存的 Android 应用程序吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-11-11T20:18:19.777

```
var navU = navigator.userAgent;

// Android Mobile
var isAndroidMobile = navU.indexOf('Android') > -1 && navU.indexOf('Mozilla/5.0') > -1 && navU.indexOf('AppleWebKit') > -1;

// Apple webkit
var regExAppleWebKit = new RegExp(/AppleWebKit\/([\d.]+)/);
var resultAppleWebKitRegEx = regExAppleWebKit.exec(navU);
var appleWebKitVersion = (resultAppleWebKitRegEx === null ? null : parseFloat(regExAppleWebKit.exec(navU)[1]));

// Chrome
var regExChrome = new RegExp(/Chrome\/([\d.]+)/);
var resultChromeRegEx = regExChrome.exec(navU);
var chromeVersion = (resultChromeRegEx === null ? null : parseFloat(regExChrome.exec(navU)[1]));

// Native Android Browser
var isAndroidBrowser = isAndroidMobile && (appleWebKitVersion !== null && appleWebKitVersion < 537) || (chromeVersion !== null && chromeVersion < 37); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-26T21:23:43.233

"Android Browser" is the name of a browser. Confusing perhaps, but with a question like this, it shouldn't be. It's the browser that comes with the vast majority of Android devices, and he's obviously not talking about Chrome.

According to [http://www.useragentstring.com/](http://www.useragentstring.com/) this is the full list of Android Stock Browser strings. I am currently unsure whether there is a better way to select all of them at once, since some will continue to be added, and also which would not accidentally target Chrome on Android. Hopefully someone gives you a better answer as I am curious myself of the best way to go about this.

```
Mozilla/5.0 (Linux; U; Android 4.0.3; ko-kr; LG-L160L Build/IML74K) AppleWebkit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30

Mozilla/5.0 (Linux; U; Android 4.0.3; de-ch; HTC Sensation Build/IML74K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30

Mozilla/5.0 (Linux; U; Android 2.3; en-us) AppleWebKit/999+ (KHTML, like Gecko) Safari/999.9

Mozilla/5.0 (Linux; U; Android 2.3.5; zh-cn; HTC_IncredibleS_S710e Build/GRJ90) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.5; en-us; HTC Vision Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.4; fr-fr; HTC Desire Build/GRJ22) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.4; en-us; T-Mobile myTouch 3G Slide Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.3; zh-tw; HTC_Pyramid Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.3; zh-tw; HTC_Pyramid Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari

Mozilla/5.0 (Linux; U; Android 2.3.3; zh-tw; HTC Pyramid Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.3; ko-kr; LG-LU3000 Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.3; en-us; HTC_DesireS_S510e Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.3; en-us; HTC_DesireS_S510e Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile

Mozilla/5.0 (Linux; U; Android 2.3.3; de-de; HTC Desire Build/GRI40) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.3.3; de-ch; HTC Desire Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.2; fr-lu; HTC Legend Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.2; en-sa; HTC_DesireHD_A9191 Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.2.1; fr-fr; HTC_DesireZ_A7272 Build/FRG83D) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.2.1; en-gb; HTC_DesireZ_A7272 Build/FRG83D) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.2.1; en-ca; LG-P505R Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.2.1; de-de; HTC_Wildfire_A3333 Build/FRG83D) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

Mozilla/5.0 (Linux; U; Android 2.1-update1; es-mx; SonyEricssonE10a Build/2.0.A.0.504) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17

Mozilla/5.0 (Linux; U; Android 1.6; ar-us; SonyEricssonX10i Build/R2BA026) AppleWebKit/528.5+ (KHTML, like Gecko) Version/3.1.2 Mobile Safari/525.20.1 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-31T03:49:12.197

您可以通过在用户代理中查找“Android”并检查 AppleWebKit/### 版本号来区分普通浏览器和 Chrome 浏览器。

库存的 Android 浏览器从未超过 534，而 Chrome 为 537 或更高。

```
var maybeAndroid = navigator.userAgent.indexOf('Android') >= 0;
var webkitVer = parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.appVersion)[1], 10); // also matches AppleWebKit
var isAOSP = maybeAndroid && webkitVer <= 534 && navigator.vendor.indexOf('Google') == 0; 
```

这是 99% 可靠的，并且对于使用 WebView 的 Android 4.x 上的应用程序非常有用。

==详细信息（如果您想深入了解！）==

编辑 7：`'AudioNode' in window`可能是 AOSP（或旧 Chrome）与现代 Chrome 版本的安全嗅探。[在这里试试](https://output.jsbin.com/yebepi/1/quiet)。window.AudioNode 是作为 Chrome 29 中 WebAudio 支持的一部分引入的（并且不太可能被制造商向后移植）。我们的 4.0.3 手机上装有 Chrome 41，并`'AudioNode' in window`返回`true`Chrome 和`false`AOSP。您还可以嗅探在 AOSP 完成开发后引入的其他功能——请参阅[此链接](https://en.wikipedia.org/wiki/Google_Chrome_release_history)以了解其他潜在的嗅探功能。选择 Chrome 42 之前引入的功能，因为 Android 4.0 用户无法升级到该版本。像往常一样使用 Android，肯定会出现奇怪的边缘情况，但这种嗅探可能与您所能获得的一样好（特别是如果结合检查 WebKit 版本 < 537）。

编辑 8：

==Android 上的 WebView==

在应用程序中使用 WebView 时，检查 <= 534 是一个完美的测试。Android 4.3（对 WebView 使用 AOSP 的最后一个 Android 版本）的[兼容性定义](http://static.googleusercontent.com/media/source.android.com/en//compatibility/4.3/android-4.3-cdd.pdf)表明，WebView 用户代理必须是：“ `Mozilla/5.0 (Linux; U; Android $(VERSION); $(LOCALE); $(MODEL) Build/$(BUILD)) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`”。

Android 4.4（第一个使用 Chromium for WebView 的 Android 版本）的[兼容性定义](http://static.googleusercontent.com/media/source.android.com/en//compatibility/4.4/android-4.4-cdd.pdf)说 WebView 用户代理必须是：“ `Mozilla/5.0 (Linux; Android $(VERSION); $(MODEL) Build/$(BUILD); wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 $(CHROMIUM_VER) Mobile Safari/537.36`”。

小于 Android 4.3 的定义与 4.3 非常相似（总是 AOSP）。大于 4.4 与 4.4 的定义非常相似（总是 Chromium）。

==Android 上的 AOSP==

对于设备上的浏览器（不是 WebView），用户代理不受兼容性定义的限制。实际使用的浏览器版本差异很大，如[quirksmode](http://www.quirksmode.org/blog/archives/2014/09/25_of_mobile_ch.html)和[三星浏览器版本所](https://gist.github.com/NielsLeenheer/4daa6a9ce7f4a0f4733d)[记录](http://www.quirksmode.org/blog/archives/2016/01/the_problem_wit_1.html)的那样。

编辑 4：推荐的解决方案是在用户代理中查找没有 Chrome 的 Android，如下所示：[https](https://developer.chrome.com/multidevice/user-agent#webview_user_agent) ://developer.chrome.com/multidevice/user-agent#webview_user_agent但也可能需要确保不存在 /Windows Phone/ 因为 Mobile-IE11-8.1-Update 在 UA 中也有 Android " `Mozilla/5.0 (Mobile; Windows Phone 8.1; Android 4.0; ARM; Trident/7.0; Touch; rv:11.0; IEMobile/11.0; NOKIA; Lumia 520) like iPhone OS 7_0_3 Mac OS X AppleWebKit/537 (KHTML, like Gecko) Mobile Safari/537`"。编辑 5：[https](https://msdn.microsoft.com/en-us/library/hh869301(v=vs.85).aspx) ://msdn.microsoft.com/en-us/library/hh869301(v= vs.85).aspx 显示 Windows Phone 上的 IE12 仍将在用户代理中使用 Android。

编辑 3：正如评论者所说，有 AOSP 和 >= 535 的设备，但这是我发现的最可靠的测试（我希望看到更好的东西）。如果嗅探失败，您可以尝试确保您的代码仍然有效，并接受 Android 碎片意味着会有奇怪的设备失败。买者自负。编辑 6：查看特定站点的一些数据，大约 1% 的看起来是 AOSP 登录有 WebKit 537，所以虽然它看起来相当可靠，但它绝对不是 100% 可靠的。

编辑 2：如果您在应用程序中使用 WebView，则此检测对于 Android >= 4.0 && Android < 4.4.4 很有用，因为即使设备上安装了 Chrome，WebView 组件也会使用 AOSP。

编辑 1：由于原生 android 现在已经“过时”，因此对其进行测试是合理的（并使用该标志来解决使用特征检测无法检测到的差异）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-13T17:49:25.873

到目前为止，还没有真正的方法可以检测到这一点。我目前使用的是 Android 4.2.2 库存 Galaxy S4 AT&T，默认浏览器现在在用户代理中有 Chrome（但仍然修复了 TouchWiz 位置问题）

在三星可以 a) 修复 touchwiz 或 b) 从 ua 字符串中删除 chrome 之前，我们没有真正的方法来检测 android 默认浏览器。我不能说这是否适用于所有 4.2x + 手机，但这对于需要制造/浏览器特定查询的开发团队来说是一个大问题。

我是一个活跃的移动端网络应用开发团队的一员，似乎 TouchWiz 对正在开发的不同方面造成了很多问题。

另一个问题是有像 Dolphin（很棒的浏览器，糟糕的 UA）这样的公司，在所有这些情况下，它们都会作为默认浏览器弹出，因为它不提供“dolphin”字符串并使用 AppleWebKit534x

* * *

同样关于用户代理字符串中的 U ，它与什么浏览器无关。事实上，这与每个浏览器使用的加密方法有关（通常是基于位置的标准）

“在美国创建的 Web 浏览器，例如 Netscape Navigator 和 Internet Explorer，使用字母 U、I 和 N 来指定用户代理字符串中的加密强度。直到 1996 年，当美国政府不允许使用更长的密钥进行加密时超过 40 位要导出，供应商提供了具有不同加密强度的各种浏览器版本。“U”代表“美国”（128 位加密的版本），“I”代表“国际”——浏览器有 40-位加密，可以在世界任何地方使用——“N”（事实上）代表“None”（不加密）。[10] 随着出口限制的解除，大多数供应商都支持 256 位加密。

来源：[http ://en.wikipedia.org/wiki/User_agent#Encryption_strength_notations](http://en.wikipedia.org/wiki/User_agent#Encryption_strength_notations)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-06T01:52:45.537

**efusien 的回答（2013 年 11 月 11 日 20:18）对我有用**，尽管尚未声明变量，并且在一个地方使用了逗号而不是分号，**这导致任何寻找副本的人都失败了/粘贴答案**。

以下是对我有用的，包括一个使用“如果它是本机浏览器”条件的实际示例：

```
var navU = navigator.userAgent;
// Android Mobile
var isAndroidMobile = navU.indexOf('Android') > -1 && navU.indexOf('Mozilla/5.0') > -1 && navU.indexOf('AppleWebKit') > -1;
// Android Browser (not Chrome)
var regExAppleWebKit = new RegExp(/AppleWebKit\/([\d.]+)/);
var resultAppleWebKitRegEx = regExAppleWebKit.exec(navU);
var appleWebKitVersion = (resultAppleWebKitRegEx === null ? null : parseFloat(regExAppleWebKit.exec(navU)[1]));
var isAndroidBrowser = isAndroidMobile && appleWebKitVersion !== null && appleWebKitVersion < 537;

$(window).load(function() {
    if (isAndroidBrowser) {
        // It's Android's native browser (and not Chrome), so do something
    }
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-15T17:15:08.367

看起来“Linux; U; Android”的存在是股票浏览器的一致差异化因素。谁知道“U”是什么意思，但我怀疑它将来会不可靠。希望当字符串发生变化时，浏览器要么消失，要么开始像 Chrome 一样播放。下面是其他一些字符串以供比较

Android Chrome：“Mozilla/5.0 (Linux; Android 4.1.2; SAMSUNG-SGH-I727 Build/JZO54K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.94 Mobile Safari/537.36”

Android Firefox：“Mozilla/5.0 (Android; Mobile; rv:23.0) Gecko/23.0 Firefox/23.0”

Android Opera：“Mozilla/5.0 (Linux; Android 4.1.2; SAMSUNG-SGH-I727 Build/JZO54K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.63 Mobile Safari/537.36 OPR/15.0.1162.61541”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-06T20:20:47.123

运行 Android 4.4.2 的三星 Galaxy Note 3 具有以下用于库存“Internet”浏览器（*不是*Chrome 或任何其他浏览器）的 UA 字符串：

```
Mozilla/5.0 (Linux; Android 4.4.2; en-us; SAMSUNG SM-N900 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Version/1.5 Chrome/28.0.1500.94 Mobile Safari/537.36 
```

运行 Android 4.4.2 的三星 Galaxy S5 具有以下用于库存“Internet”浏览器（*不是*Chrome 或任何其他浏览器）的 UA 字符串：

```
Mozilla/5.0 (Linux; Android 4.4.2; en-gb; SAMSUNG SM-G900H Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Version/1.6 Chrome/28.0.1500.94 Mobile Safari/537.36 
```

我们不能再只检查 AppleWebKit < 537。

我目前正在使用用户 efusien 的方法检查 AppleWebKit < 537 或 Chrome < 29。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-18T15:56:00.193

如果您可以选择 JavaScript 而不是服务器端 UA 嗅探，请尝试`(!!window.chrome) && (!window.chrome.app)`. **但是，我不能保证这个是“安全的”，会“永远”工作，或者类似的东西。将其视为仅用于测试目的的邪恶黑客。**

*说明：Chrome（或 Chromium？）浏览器（嗯，我在这里测试的那些，是 Cyanogenmod 10 上的 Chrome 和 Android 库存）有一个名为 的对象`window.chrome`，但在我至少测试过的 Android 库存浏览器上，这个对象确实没有`app`财产。*

编辑：似乎较旧的 Chrome 版本会在此解决方案中出现误报。反过来，新版本的股票浏览器很可能会给出“假阴性”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-03T16:12:23.770

我想你正在寻找这个：

Android 原生浏览器未更新至 534.30 以上版本，因此您可以过滤到版本和 Android UA 字符串组合（以上我们可以假设它是 Chrome 浏览器）

这是我的示例 JavaScript 代码：

（如果您需要特定的样式，我会使用以下 JS 片段向正文添加一个类）

```
var defectAndroid = $window.navigator && $window.navigator.userAgent.indexOf('534.30') > 0 && $window.navigator.userAgent.toLowerCase().match(/android/);

if (defectAndroid) {
   // sample code specific for your Android Stock browser
} 
```

（一些 Android 设备报告“android”，这就是我们需要小写对话的原因）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-06T10:33:28.567

您没有进入`android`UA，因为您使用的是桌面视图。似乎无法确定这是该模式下的移动设备。切换到普通视图后，您将看到正确的 UA。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-05-13T06:21:12.373

参考尼克和 efusien 的答案。这适用于我的 Android OS 4.4.2

```
// Native Android Browser
var navU = navigator.userAgent;
var isAndroidMobile = navU.indexOf('Android') > -1 && navU.indexOf('Mozilla/5.0') > -1 && navU.indexOf('AppleWebKit') > -1;
var regExAppleWebKit = new RegExp(/AppleWebKit\/([\d.]+)/);
var resultAppleWebKitRegEx = regExAppleWebKit.exec(navU);
var appleWebKitVersion = (resultAppleWebKitRegEx === null ? null : parseFloat(regExAppleWebKit.exec(navU)[1]));
var regExChrome = new RegExp(/Chrome\/([\d.]+)/);
var resultChromeRegEx = regExChrome.exec(navU);
var chromeVersion = (resultChromeRegEx === null ? null : parseFloat(regExChrome.exec(navU)[1]));
var isAndroidBrowser = isAndroidMobile && (appleWebKitVersion !== null && appleWebKitVersion >= 537) && (chromeVersion !== null && chromeVersion < 29); 
```

因为现在在 Kitkat 上，当我们登录 userAgent 时，Android 上的原生浏览器使用与 Chrome 相同的 WebKit 537.36。通过检查 chromeVersion < 29 然后我可以在 Android 4.4.2 上获得本机浏览器。（我的三星 S4 上的 Chrome 版本现在是 40）。

请参阅此链接中不同 Android 版本的 WebKit 表：http: [//jimbergman.net/webkit-version-in-android-version/](http://jimbergman.net/webkit-version-in-android-version/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-05-22T00:20:46.470

我需要检测 Android Stock Browser 以添加一些自定义样式，因为它似乎无法正确处理 box-sizing。我使用的代码是基于@Prakarangs 的答案，这对我不起作用。（它没有检测到 Galaxy Note 2 上的股票浏览器）

```
var navU = navigator.userAgent;
var isAndroidMobile = navU.indexOf('Android') > -1 && navU.indexOf('Mozilla/5.0') > -1 && navU.indexOf('AppleWebKit') > -1;
var regExAppleWebKit = new RegExp(/AppleWebKit\/([\d.]+)/);
var resultAppleWebKitRegEx = regExAppleWebKit.exec(navU);
var appleWebKitVersion = (resultAppleWebKitRegEx === null ? null : parseFloat(regExAppleWebKit.exec(navU)[1]));
var isAndroidStockBrowser = isAndroidMobile && (appleWebKitVersion !== null && appleWebKitVersion < 535); 
```

也许这对其他人也有帮助。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-05-31T19:18:06.747

如果需要正则表达式：

```
/Android[\s|/].+(AppleWebKit|Nokia)(.(?!Chrome|Presto|UCBrowser))+.$/gi 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2016-08-19T14:38:26.703

您必须从您的正则表达式中删除 SamsungBrowser。

对于三星浏览器，您可以使用 SamsungBrowser/([0-9]*.[0-9]*) 或 Android.*SAMSUNG.*Version/([0-9]*.[0-9]*) 旧浏览器

[http://developer.samsung.com/technical-doc/view.do?v=T000000203](http://developer.samsung.com/technical-doc/view.do?v=T000000203)

# javascript - 在 DOM 中看不到脚本并且它会触发两次？

> ID：14403768
> 
> 赞同：0
> 
> 时间：2013-01-18T16:56:54.840
> 
> 标签：javascript, jquery, dom

我正在使用砌体类型代码在我的页面上显示 Div，并使用 API 获取数据，以便将所有内容加载`html+=`到 DOM 中。

例如，每个 div 都是这样加载的

```
html += '<li><div class="classname>content';
html += '<div id="like'+image.article_id+'">';
html += '<a href="#" class="like" id="'+image.article_id+'">';
html += '<div class="bLike" title="Like this article"></div></a></div>';
html += '<div id="unlike'+image.article_id+'" style="display:none;">';
html += '<a href="#" class="unlike" id="'+image.article_id+'">';
html += '<div class="bUnlike" title="Unlike this article"></div></a></div>';
html += '</div></li>'; 
```

现在，我在显示的结果中使用了一个赞按钮，该按钮使用 ajax 更新我的数据库，以允许用户查看他们喜欢的内容。简单的。

因此，为了让 ajax 代码发挥作用，我必须将其加载到 DOM 中，如下所示，我在上面显示的 div 示例之后加载它：

```
html += '<script type="text/javascript">';
     html += '$(function()';
     html += '{';
     html += '$(".like").click(function(){';
     html += 'var element = $(this);';
     html += 'var I = element.attr("id");';
     html += 'var info = \'wish_id=\' + I;';
     html += '$(\'#like\'+I).hide();';
     html += '$(\'#unlike\'+I).show();';
     html += '$.ajax({';
     html += 'type: "POST",';
     html += 'url: "/pages/includes/ajax/like.php",';
     html += 'data: info,';
     html += 'success: function(){';
     html += '}';
     html += '});';
     html += 'return false;';
     html += '});';
     html += '});';
 html += '</script>';
 html += '<script type="text/javascript" >';
     html += '$(function()';
     html += '{';
     html += '$(".unlike").click(function(){';
     html += 'var element = $(this);';
     html += 'var I = element.attr("id");';
     html += 'var info = \'wish_id=\' + I;';
     html += '$(\'#unlike\'+I).hide();';
     html += '$(\'#like\'+I).show();';
     html += '$.ajax({';
     html += 'type: "POST",';
     html += 'url: "/pages/includes/ajax/unlike.php",';
     html += 'data: info,';
     html += 'success: function(){';
     html += '}';
     html += '});';
     html += 'return false;';
     html += '});';
     html += '});';
 html += '</script>'; 
```

现在，当用户点击喜欢或不喜欢时，它会触发两次，因此会两次访问数据库，并且基本上会使整个工作负载加倍，这从来都不是好事。

所以，我想也许上面显示的脚本已经被加载到 DOM 中两次。所以我去 firefox firebug 看一下加载到 DOM 中的代码。`html+=`我使用相同但不是上面的脚本加载的所有 div 都在那里。我知道它在那里，因为它工作得很好。

那么为什么我看不到它，为什么它会发射两次呢？

有一个更好的方法吗？

编辑：

这是加载页面的 API：

```
function loadData() {
  isLoading = true;
  $('#loaderCircle').show();

  $.ajax({
    url: apiURL, // fetches from MySQL
    dataType: 'json', // data type
    data: {page: page}, // page number so each request brings in next records
    success: onLoadData // loads the data which is looped and html+= as at top of post
  });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:41:37.223

So, what you should do is simply fire JavaScript instead of adding `<script>` tag and remove `$(function(){...})` wrapping, because code inside will be executed only on *ready* event which fires only once, when DOM is ready.

# .net - 从脚本创建覆盖率报告

> ID：14403771
> 
> 赞同：0
> 
> 时间：2013-01-18T16:57:06.317
> 
> 标签：.net, code-coverage, dotcover

我使用 dotCover 进行代码覆盖，这很好，但结果似乎是以专有格式编写的，我无法解析。

我想创建一个脚本来分析我的 .Net 代码库，并以我可以阅读的格式（xml、纯文本、json……）返回（比如说）20 个代码覆盖率最低的类。有谁知道如何做到这一点，无论是在 dotCover 还是其他工具中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:39:11.987

您可以使用[OpenCover](https://github.com/sawilde/opencover)和[ReportGenerator](http://reportgenerator.codeplex.com)。OpenCover 生成一个 XML 覆盖率报告。ReportGenerator 将此报告转换为 HTML、XML（可读）和 Latex。有关更多详细信息，请参阅此博文：http: [//www.palmmedia.de/Blog/2011/6/21/code-coverage-testing-with-opencover-and-partcover](http://www.palmmedia.de/Blog/2011/6/21/code-coverage-testing-with-opencover-and-partcover)

# java - 有哪些好的 Java 编码实践可以帮助 Java GC？

> ID：14403774
> 
> 赞同：2
> 
> 时间：2013-01-18T16:57:12.520
> 
> 标签：java, garbage-collection

> **可能重复：**
> [如何避免 Java 游戏中的垃圾收集延迟？（最佳实践）](https://stackoverflow.com/questions/2484079/how-can-i-avoid-garbage-collection-delays-in-java-games-best-practices)

Java 的 GC 暂停是一个杀手。通常，应用程序没有内存泄漏。在某些时候，它可能会为每 1G 内存分配暂停约 1 秒。

有哪些好的 Java 编码实践可以帮助 Java GC？

例如，由于 null 对象符合垃圾回收条件，因此最好将对象显式设置为 null，例如 object = null。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:06:18.813

一般来说，为了帮助 GC，您应该避免不合理的内存使用。简单的建议可能是：

1) 不要在不需要的地方产生新的对象。例如，不要使用`String test = new String("blabla");`. 如果可能，重用旧对象（它主要属于不可变对象）。

2) 不要在类中声明字段，它们只在方法内部使用；即使它们成为局部变量。

3) 避免在原始类型下使用对象包装器。即使用`int`而不是`Integer`，`boolean`而不是`Boolean`，如果你真的不需要在其中存储`null`值。还例如，在可能的情况下，为了节省内存，不要使用`ArrayList`，使用原始类型的简单 Java `arrays`（不是`Integer[]`，但是`int[]`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:02:17.923

最大程度地减少 GC 暂停可以做的最好的事情就是适当地调整堆大小。

如果您知道您的程序从不使用超过 1Gb 的活动对象，那么传递`-Xms4096m`. 这实际上会*增加*你的 GC 暂停，因为 JVM 会留下垃圾，直到它绝对必须清除它。

类似地，如果您知道您的长寿命对象非常少，您*通常*可以通过增加相对于老一代（对于 Sun JVM）的年轻代的大小而受益。

就编码而言，您真正能做的唯一一件事就是将大对象移出堆外。但这不太可能对大多数应用程序有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:06:26.663

已分配但未立即释放的对象将移动到永久堆空间中。永久内存是最昂贵的收集。避免搅动长期存在的对象应该有助于 GC 暂停。

# mysql - 删除 MySQL 中的许多行

> ID：14403775
> 
> 赞同：2
> 
> 时间：2013-01-18T16:57:16.207
> 
> 标签：mysql, sql, database

我正在从远程数据库中删除数十万行。每个删除都有自己的目标，例如。

```
DELETE FROM tablename
WHERE (col1=c1val1 AND col2=c2val1) OR (col1=c1val2 AND col2=c2val2) OR ... 
```

这对我来说几乎是单个查询的两倍，但我想知道是否有办法加快速度，因为我使用 SQL 的时间不长。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:04:46.937

创建一个临时表并用所有值对填充它，每行一个。将列命名为与`table`.

```
CREATE TEMPORARY TABLE donotwant (
  col1 INT NOT NULL,
  col2 INT NOT NULL,
  PRIMARY KEY (c1val, c2val)
);

INSERT INTO donotwant VALUES (c1val1, c2val1), (c1val2, c2val2), ... 
```

然后根据这些表之间的 JOIN 执行多表删除：

```
DELETE t1 FROM `tablename` AS t1 JOIN `donotwant` USING (col1, col2); 
```

USING 子句是 的简写`ON t1.col1=donotwant.col1 AND t1.col2=donotwant.col2`，假设列在两个表中的名称相同，并且您希望两个列都等于它们在连接表中的同名的连接条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:05:09.480

一般来说，执行 bulk 最快`DELETE`的方法是将要删除的 id 放入某种临时表中，然后将其用作查询的一部分：

```
DELETE FROM table
WHERE (col1, col2) IN (SELECT col1, col2
                       FROM tmp) 
```

插入可以通过标准完成：

```
INSERT INTO tmp VALUES (...), (...), ...; 
```

语句，或使用数据库的批量加载实用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:08:19.123

我怀疑它对性能有很大影响，但你可以这样写那种东西......

```
DELETE 
  FROM table
 WHERE (col1,col2) IN(('c1val1','c2val1'),('c1val2','c2val2')...); 
```

# concurrency - 具有重用和并发性的子流

> ID：14403778
> 
> 赞同：1
> 
> 时间：2013-01-18T16:57:26.733
> 
> 标签：concurrency, mule, reusability, flow

我正在为我的一个用例准备解决方案。我的解决方案可能看起来像这样抽象。

我的问题是，当两个主要流程同时调用同一个子流程时，它会毫无问题地工作吗？

我还需要将代码编写为子流中用作自定义组件/ trnasformers 的所有类的线程安全吗？

我的抽象配置如下所示。

```
<flow name="mainflow_1" >
    <inbound-endpoint/>
    <transformer ....>
    <component ....>
        <flow-ref name="subflow_1"></flow-ref>
    <transformer ....>
    <component  ...>
    <outbound-endpoint ....>
</flow>

<flow name="mainflow_2" >
    <inbound-endpoint  type="request-response" />
    <transformer ....>
    <component ....>
        <flow-ref name="subflow_1"></flow-ref>
    <transformer ....>
    <component  ...>            
</flow>

<sub-flow name="subflow_1" >        
    <transformer ....>
    <component ....>
        <outbound-endpoint  call to some service >
    <transformer ....>
    <component  ...>        
</sub-flow> 
```

请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:02:41.940

子流程就像一个宏：执行方面，就好像子流程的元素被复制到调用流程中一样。

因此，调用流的线程行为将决定子流的线程行为。

无论它们是用于子流程还是主要流程，如果您使用它们的单例实例（常见用例），您应该将组件类编写为线程安全的。如果您使用原型实例（每个请求创建一个实例）或池实例（实例数量有限，线程瓶颈），您的组件类可能是线程不安全的。

根据经验，尽可能多地争取线程安全的无状态组件类，以节省您潜在的优化痛苦。

# php - 在 PHP 中隐藏前端开发人员的后端代码

> ID：14403787
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:57:50.907
> 
> 标签：php

假设我有 domain.com/php/ 以及我所有的 php 函数，然后我与 domain.com/frontend/ 的前端开发人员共享一个 ftp 帐户，现在前端可以完成他们的工作并调用“../php/ “ 功能。假设我的 php 代码受到保护是否安全？或者另一种询问方式，他们是否可以查看 php 源代码或以某种方式复制/包含这些文件然后显示它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:20:50.463

您可以通过将用户监禁到一个文件夹来限制用户：

[http://allanfeid.com/content/creating-chroot-jail-ssh-access](http://allanfeid.com/content/creating-chroot-jail-ssh-access)

这样他们就可以访问文件夹来创建文件。然后简单地给他们需要 PHP 文件的路径。或者创建一个对象或者PHP函数模板，让他们调用访问

伪代码：

```
class GlobalPaths 
function getPathToThisResource(return string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:05:07.210

您可以使用 UNIX 帐户系统使某些用户无法读取文件。问题是，如果 PHP 文件可以相互包含，它们就可以相互读取源代码。您可以使用 RPC 系统来隐藏后端代码。前端只与 RPC 接口通信，不需要读取后端代码的源代码。

例如，在前端：

```
<?php
error_reporting(-1);
function ask_backend($cmd, $args) {
    $decoded = json_decode($data = file_get_contents("http://localhost:8800/backend/rpc.php?cmd=" . urlencode($cmd) . "&args=" . urlencode(json_encode($args))),true);
    if ($decoded === null) throw new Exception("invalid data from backend: " . $data);
    if ($decoded["status"] !== "ok") throw new Exception("error occurred on backend: " . $data);
    return $decoded["msg"];
}
?>
The backend says:
<?php
$res = ask_backend("greeter", ["peter"]);
var_dump($res);
?> 
```

在后端，你可以有`rpc.php`如下：

```
<?php
error_reporting(-1);
$cmd = $_GET["cmd"];
$gargs = json_decode($_GET["args"],true);
$cmds = [
    "greeter" => function($args) {
        list($name) = $args;
        return "hello " . $name;
    }
];
$res = ($cmds[$cmd]($gargs));
$res =  json_encode(["status"=>"ok", "msg"=>$res]);
echo $res;
?> 
```

这种实现的缺点是您只能传递 JSON 可序列化对象。当然，您可以改用 Protocol Buffers 进行序列化。你甚至不需要使用 HTTP，但我使用了它，因为如果你正在运行 PHP，你可能已经有一个 HTTP 服务器。

请记住，RPC 接口只需要对 localhost 可用！对于您的用例来说最重要的是：前端开发人员不需要阅读源代码。由于它不是公开可访问的，因此您可以考虑在后端使用 PHPDaemon 之类的东西，因为这样可以更轻松地构建适当的 REST 接口。

# c# - How to get multiple rows from stored procedure?

> ID：14403790
> 
> 赞同：0
> 
> 时间：2013-01-18T16:57:56.343
> 
> 标签：c#, sql, stored-procedures, ado.net

I have a method for adding values to the database for all operations.

If this is selected from the database and this select return more rows from the database, how can I get the rows and store in an array?

This is the method code :

```
public void ExcuteProcedure(string procName, List<SqlParameter> procparams)
{
            try
            {
                SqlConnection mycon = new SqlConnection(connectionString);
                mycon.Open();
                SqlCommand mycom = new SqlCommand();
                mycom.Connection = mycon;
                mycom.CommandText = procName;
                mycom.CommandType = CommandType.StoredProcedure;
                foreach (var item in procparams)
                {
                    SqlParameter myparm = new SqlParameter();
                    myparm.ParameterName = item.ParameterName;
                  //  myparm.SqlDbType = item.SqlDbType;
                    myparm.Value = item.Value;
                    mycom.Parameters.Add(myparm);
                }
              var n= mycom.ExecuteScalar();

                mycon.Close();
            }
            catch (SqlException e)
            {
                Console.WriteLine("Error Number is : " + e.Number);
                Console.WriteLine("Error Message is : " + e.Message);
            }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T17:00:40.720

You need to call `mycom.ExecuteReader()`, which will give you a `SqlDataReader` which can read through the results.

Call `Read()` to advance through the rows.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:07:56.047

It never ceases to amaze me the number of times I see devs trying to abstract away simple database connectivity; and the myriad of ways they inevitably screw it up.

The following may sound mean, but it needs said: Clean up your code, it leaks like a sieve. Using clauses around the connection and command objects are pretty much mandatory. As it stands if you forget a single parameter or put in a bad value you will leak connections. Once the connection pool is filled up your app will crash in all sorts of interesting, and usually hard to debug, ways.

Next, if you aren't sure how to properly get records back from a database then you probably shouldn't try to abstract the code calling your procedures. Either use a lightweight ORM like [Dapper](http://code.google.com/p/dapper-dot-net/) or learn how what you are doing will ultimately involve a lot of extraneous code that the next developer on your project will want to rip out.

/rant over.

Getting back to the question: `ExecuteScalar` returns a single value. You need to use `ExecuteReader`. I'd suggest that you simply take the results of the reader, stuff it into a `datatable` and pass that back to the calling code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:01:05.810

```
var n = mycom.ExecuteScalar(); 
```

> Scalar: an atomic quantity that can hold only one value at a time

*   Return a `DataReader` instead, and [iterate through its rows](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)
*   Fill a `DataSet` by using a `DataAdapter` (this is more appropriate if you have multiple tables in the result set).

# breeze - 使用 Breeze 使用 WebAPI 进行 FormAuthentication

> ID：14403793
> 
> 赞同：4
> 
> 时间：2013-01-18T16:58:05.343
> 
> 标签：breeze

我正在使用表单身份验证保护 WebAPI，即使用 Breezecontroller 当我尝试调用 WebAPi 方法时，我得到了以下错误。

状态：404 statusText：“未找到”消息：“元数据查询失败：'';，没有找到匹配的Http资源...

我的问题是为什么我没有回复“未经授权的错误（401）”？元数据也用 [Authorize] 修饰。

似乎 FormsAuthentication 的重定向出现了问题。它正在重定向到 Login(has AllowAnonymous) WebApi 方法并报告它找不到，即使我有。我也将Authrozie应用于方法而不是控制器。确切的错误是

```
 {"$id":"1","$type":"System.Web.Http.HttpError,System.Web.Http","Message":"NoHTTPresourcewasfoundthatmatchestherequestURI'http://localhost:40678/api/Country/Login?ReturnUrl=/api/Country/Metadata'.","MessageDetail":"Noactionwasfoundonthecontroller'Country'thatmatchestherequest."} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:25:02.200

刚刚尝试过并且工作正常。我打赌你的网址有误。

这是我的控制器的前奏：

```
[授权]
[微风控制器]
公共类 BreezeTodoController : ApiController
{
    私有只读 BreezeTodoContext _context;

    公共 BreezeTodoController() {
        _context = new BreezeTodoContext(User);
    }

    [HttpGet]
    公共字符串元数据（）{
        返回 _context.Metadata();
    }
    // ... 更多的

```

我用这个网址打了它

```
http://localhost:32377/api/breezetodox/元数据

```

我拿回了 401

```
请求网址：http://localhost:32377/api/breezetodo/metadata
请求方法：GET
状态码：401 未授权

```

但是，如果我在 URL 中犯了错误（请参阅breasttodo 后的“x”）

```
请求网址：http://localhost:32377/api/breezetodox/metadata
请求方法：GET
状态码：404 未找到

```

如果我的操作名称不匹配，则相同（请参阅元数据后的“x”）：

```
请求网址：http://localhost:32377/api/breezetodo/metadatax
请求方法：GET
状态码：404 未找到

```

**换句话说，如果 HTTP 一开始就找不到该资源，它就不能报告该资源是未经授权的。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T09:31:55.950

当使用 [Authorize] 标记 BreezeController 然后尝试使用此链接直接检索 Breeze 元数据时：

```
Request URL:http://localhost/breeze/breeze/metadata 
```

重定向到：

```
http://localhost/Login?ReturnUrl=%2Fbreeze%2Fbreeze%2Fmetadata with a 404 
```

如果没有 [Authorize]，使用相同链接访问 Breeze 元数据可以正常工作。

# c++ - 变量可以同时声明为静态和外部吗？

> ID：14403796
> 
> 赞同：23
> 
> 时间：2013-01-18T16:58:12.087
> 
> 标签：c++, c, linkage, storage-class-specifier

为什么以下不编译？

```
...
extern int i;
static int i;
... 
```

但如果你颠倒顺序，它编译得很好。

```
...
static int i;
extern int i;
... 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T17:17:45.413

当 C++ 标准讨论声明外部或内部链接的复杂性时，这是专门作为示例给出的。它在第 7.1.1.7 节中，它有这个作用：

```
static int b ; // b has internal linkage
extern int b ; // b still has internal linkage

extern int d ; // d has external linkage
static int d ; // error: inconsistent linkage 
```

第 3.5.6 节讨论了`extern`在这种情况下应该如何表现。

发生的事情是这样的：（`static int i`在这种情况下）是一个定义，其中`static`指示`i`具有内部链接。当编译器看到符号已经存在并接受它已经具有内部链接并继续时发生`extern`。`static`这就是您的第二个示例编译的原因。

`extern`另一方面是一个声明，它隐含地声明该符号具有外部链接，但实际上并没有创建任何东西。由于`i`在您的第一个示例中没有，编译器将其注册`i`为具有外部链接，但是当它到达您的位置时，它会`static`发现它具有内部链接并给出错误的不兼容语句。

换句话说，这是因为声明比定义“更软”。例如，您可以多次声明同一事物而不会出错，但您只能定义一次。

这在 C 中是否相同，我不知道（但下面 netcoder 的回答告诉我们 C 标准包含相同的要求）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-18T17:22:21.140

对于 C，在 C11 6.2.2 中引用标准：*标识符的链接*：

> 3) 如果对象或函数的文件范围标识符的声明包含存储类说明符`static`，则该标识符具有内部链接。
> 
> 4)对于在该标识符**的先前声明可见的范围内****使用存储类说明符`extern`**声明的标识符，如果先前声明指定了内部或外部链接，**则后面声明的标识符的链接与该标识符的链接相同之前声明中指定的链接**。如果前面的声明不可见，或者前面的声明没有指定链接，则标识符具有外部链接。

（强调我的）

这解释了第二个示例（`i`将具有内部链接）。至于第一个，我很确定这是未定义的行为：

> 7) 如果在翻译单元内，相同的标识符同时出现在内部和外部链接中，则行为未定义。

...因为`extern`出现在使用内部链接声明标识符*之前*，6.2.2/4 不适用。因此，`i`既有内联也有外联，所以是UB。

如果编译器发出诊断，我猜你很幸运。它可以无错误地编译并且仍然符合标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:20:15.893

C++：

### 7.1.1 存储类说明符 [dcl.stc]

> 7)**在没有存储类说明符的命名空间范围内声明的名称具有外部链接，除非它由于先前的声明**而具有内部链接并且如果它没有声明为 const。声明为 const 且未显式声明为 extern 的对象具有内部链接。

因此，第一个尝试首先给出`i`外部链接，然后再给出内部链接。

第二行首先给它内部链接，第二行没有尝试给它外部链接，因为它之前被声明为内部链接。

> 8) 给定实体的连续声明所暗示的联系应一致。也就是说，在给定范围内，声明相同变量名或函数名相同重载的每个声明都应暗示相同的链接。然而，一组给定的重载函数中的每个函数都可以有不同的链接。
> [ 例子：

```
[...]
static int b; // b has internal linkage
extern int b; // b still has internal linkage
[...]
extern int d; // d has external linkage
static int d; // error: inconsistent linkage
[...] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:19:02.453

在 Microsoft Visual Studio 中，两个版本都编译得很好。在 Gnu C++ 上你会得到一个错误。

我不确定哪个编译器是“正确的”。无论哪种方式，拥有两条线都没有多大意义。

`extern int i`表示整数`i`是在其他模块（目标文件或库）中定义的。这是一个声明。编译器*不会*在此对象中分配存储空间`i`，但当您在程序中的其他位置使用该变量时，它会识别该变量。

`int i`告诉编译器为`i`. 这是一个定义。如果其他 C++（或 C）文件有`int i`，链接器会抱怨 int i 被定义了两次。

`static int i`与上面类似，具有`i`本地的额外功能。它不能从其他模块访问，即使它们声明`extern int i`. 人们正在使用关键字 static（在这种情况下）来保持 i 本地化。

因此，将`i`两者都声明为在其他地方定义，并且在模块中定义为静态似乎是一个错误。Visual Studio 对此保持沉默，而 g++ 仅按特定顺序保持沉默，但无论哪种方式，您都不应该在同一源代码中同时包含这两行。

# html - div对齐一个在另一个之上？

> ID：14403800
> 
> 赞同：0
> 
> 时间：2013-01-18T16:58:18.937
> 
> 标签：html, css

我将如何使用 html 和 css 实现下面显示的设计？

![在此处输入图像描述](../Images/bea290ba88e8ea56716ac16ad4cc139e.png)

侧边栏应位于所有其他项目（如徽标、菜单和内容）之上。菜单应该在侧边栏的后面。内容呈“L”形。内容区域应该上升到侧边栏并位于侧边栏下方。侧边栏长度小于总内容区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:18:54.160

这是一个很好的草稿，可以帮助您入门。

(http://jsfiddle.net/tech0925/Sm8HB/)

干杯!

# python - Python正则表达式，从字符串中获取名称

> ID：14403801
> 
> 赞同：1
> 
> 时间：2013-01-18T16:58:19.923
> 
> 标签：python, regex

我有一个形式为：

```
"[NUM : NAME : NUM]: [NUM : NAME : NUM]:..." 
```

我希望能够从该字符串中提取所有名称。NAME 可以有任何字符，从字母到标点符号和数字。NUM 只能是 [0-9]+ 的形式

我尝试发出这个命令：

```
re.findall(r"\[[0-9]+\:([.]+)\:[0-9]+\]", string) 
```

但是它没有给出我的要求，而是将几个 [NUM : NAME : NUM] 聚集到 [.]+ 组中，这在这个正则表达式方面也是正确的，但不是我需要的。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:04:43.123

尝试这个：

```
re.findall(r"\[[0-9]+\:(.+?)\:[0-9]+\]", string) 
```

`?`在之后添加`+`是非贪婪的。贪婪意味着`+`在仍然匹配的同时将尽可能多的字符，默认情况下是贪婪的。通过添加，`?`您告诉它是非贪婪的，这意味着`+`它将采用最少数量的字符来匹配。

如果 num、: 和 name 之间没有空格，上述方法将起作用。

如果有空格，则使用：

```
re.findall(r"\[[0-9]+ \: (.+?) \: [0-9]+\]", string) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:03:34.307

*   第一个问题是您已将其包含`.`在字符类中。所以，你失去了 的意义`.`，它只匹配一个 `dot(.)`。

*   其次，您没有考虑字符串中数字后面的空格。

*   `.+`第三，你需要在你的中心使用不情愿的量词。因此，将 - 替换`([.]+)`为`(.+?)`.

*   第四，你不需要逃避你的`colons (:)`.

你可以试试这个： -

```
>>> re.findall(r'\[[0-9]+[ ]*:(.+?):[ ]*[0-9]+\]', string)
6: [' NAME ', ' NAME '] 
```

# html - 使用 CSS 悬停时为链接显示不同的“高度”

> ID：14403802
> 
> 赞同：0
> 
> 时间：2013-01-18T16:58:21.053
> 
> 标签：html, css

我只想用 CSS 来做这件事。我有一个无序列表和一些超链接列表项，我想将链接（列表项）的宽度和高度限制为宽度：300px 和高度：1.5em。因此，无论链接的长度是多少，最多只会显示 300px 的链接，其余的将因高度限制和溢出：隐藏而被隐藏。我想在鼠标悬停时显示链接的其余部分。

我可以部分做到这一点，并将鼠标悬停在链接上会显示其余内容，但它也会将其下方的内容向下推。

是否有可能在鼠标悬停时显示其余内容而不按下其下方的内容？

请看这个小提琴'http://jsfiddle.net/3VyaC/'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:07:04.477

没有办法做到这一点。您实际上可以做到这一点的唯一方法是设置`position: absolute;`，但这会使链接位于下一个链接的顶部。所以基本上回答你的问题，没有办法用你设置的宽度来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:24:47.783

看起来有点笨拙，但它接近您要拍摄的效果。只改变了你的 CSS：

```
body {font-family: arial; font-size: 0.8em;}

.news-entry ul {    
    list-style-type: none;  
    padding: 0; 
    margin: 0 0 0 8px;  
    width: 300px;      
}

.news-entry li {
    border-top: 1px solid #dcdcdc;
    width:300px;
    height:1.5em;
    overflow:hidden;
    position:relative;
}

.news-entry li a.itemtitle {    
    display: block; 
    width: 100%;    
    padding: 4px 0 3px 0;   
    line-height: 1.5em; 
    text-decoration: none;
}

.news-entry li:hover {
    color: #333;    
    background-color: #fafafa;
    overflow:visible;
    z-index:10;    
}

.news-entry li:hover a{
    position:absolute;
    width:100%;
    background-color:#fafafa;
    border:1px solid #555;      
} 
```

小提琴：http: [//jsfiddle.net/y3Vkt/](http://jsfiddle.net/y3Vkt/)

当链接更改为绝对位置时，可能需要调整边距，存在 1-2px 的故障。

希望这可以帮助！

# asp.net-mvc - ASP.NET MVC 4 货币字段

> ID：14403803
> 
> 赞同：9
> 
> 时间：2013-01-18T16:58:22.233
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的网页上的货币字段出现错误（“字段金额必须是数字”）。这是因为美元符号（$50.00）。

```
[DataType(DataType.Currency)]
[DisplayFormat(DataFormatString = "{0:c}", ApplyFormatInEditMode = true)]
public decimal Amount { get; set; }

@Html.EditorFor(model => model.Amount) 
```

如果我想保留美元符号，我还需要做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T21:37:28.093

默认 MVC 模型绑定[器无法解析格式化为 display 的值](http://books.google.by/books?id=B2hWImXICj8C&pg=PA134&lpg=PA134&dq=applyformatineditmode%20currency&source=bl&ots=_H34w7Un2e&sig=kijCb5RM7n_kzFf4RCshSWtWKMk&hl=en&sa=X&ei=yv3-UKLxBKSD4ATM5IC4Dw&ved=0CGsQ6AEwBQ#v=onepage&q&f=false)。因此，您应该编写自己的模型绑定器并将其注册为该类型（假设类型名称为 Foo）：

```
public class FooModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var result = bindingContext.ValueProvider.GetValue("Amount");

        if (result != null)
        {
            decimal amount;
            if (Decimal.TryParse(result.AttemptedValue, NumberStyles.Currency, null, out amount))                
                return new Foo { Amount = amount };                                

            bindingContext.ModelState.AddModelError("Amount", "Wrong amount format");                
        }

        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

在 Application_Start 处为 Foo 类型添加此活页夹：

```
ModelBinders.Binders.Add(typeof(Foo), new FooModelBinder()); 
```

啊，最后一件事 -`data-val-number`从金额文本框中删除属性（否则您将继续看到它不是数字的消息）：

```
$("#Amount").removeAttr("data-val-number"); 
```

现在，如果输入值不是正确的货币金额（例如`$10F.0`），您将收到验证错误消息。

* * *

顺便说一句，我认为使用它`ApplyFormatInEditMode = false`比实现所有这些东西来帮助 MVC 绑定您的自定义格式化字符串更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T20:40:00.073

您还可以将编辑模式设置为 false。然后它将仅显示十进制值，而文本将被格式化。

```
ApplyFormatInEditMode = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T22:23:15.857

您可以使用 System.ComponentModel.DataAnnotations.RegularExpressionAttribute。

# java - 瞬态关键字的用途是什么以及何时使用它？

> ID：14403805
> 
> 赞同：1
> 
> 时间：2013-01-18T16:58:28.067
> 
> 标签：java, jakarta-ee, serialization

> **可能重复：**
> [关键字“transient”在java中是什么意思？](https://stackoverflow.com/questions/5245600/what-does-the-keyword-transient-means-in-java)

我读过`transient`java中的关键字。我的理解是？它用于字段。如果我们声明`transient`关键字，该字段将不会被序列化。什么时候在java中为一个字段发生可序列化？如果没有我扩展`Serializable`接口，它会如何发生？如果我说错了，请纠正我。这个问题可能是重复的。

*   坎南

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:01:39.120

当您想将对象从 Java 堆传输到平面文件或网络上时，需要进行序列化；基本上每当对象需要离开 JVM 并且需要以某种方式存储以便可以再次重新创建它时。

因此，现在，如果在序列化后再次创建对象时您认为不需要填充任何变量，那么您将其声明为瞬态。例如物体的温度。我们知道，如果我们以任何方式重新创建对象，这个当前温度没有任何意义，那么为什么要在序列化过程中对其进行序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:04:30.527

您可以将它用于要从序列化中排除的字段。序列化仅适用于类或其类层次结构中的类实现接口的类。例如，`java.lang.Throwable`implements `java.io.Serializable`，因此所有错误和异常都继承该标记接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:15:41.730

当您序列化一个对象时，您使用`ObjectOutputStream`“写下来”和`ObjectInputStream`“读回”。

通常，Java 实现的默认行为对于序列化的大部分“常见用途”来说已经足够好了。`transient`关键字告诉 JVM 你不希望它保存（或恢复）变量的值。处理变量时应格外小心`transient`：在恢复序列化实例后，它们可能为 null 或具有不一致的值。添加到您的可序列化类是一个好习惯

```
 private void writeObject(java.io.ObjectOutputStream out) throws IOException{
    out.defaultWriteObject();
}

private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException{
    in.defaultReadObject();

    //here do something to re-initialize transient variables

} 
```

这样，您可以为所有声明的瞬态插入特殊处理。（请记住，您的可序列化类的构造函数仅在您第一次使用时调用，而不是在读取对象时调用`ObjectInputStream`）

在不涉及序列化的所有其他上下文中，`transient`没有任何意义。

# ruby-on-rails - 了解 Rails 控制器请求格式：“由 MyController#action 作为 FORMAT 处理”

> ID：14403806
> 
> 赞同：0
> 
> 时间：2013-01-18T16:58:29.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actioncontroller

这个问题很可能揭示了我对 Rails、HTTP 和互联网的严重误解。

## 问题

我有一个请求通过 Stripe API 从“透明重定向”访问我的服务器。请求以 HTML 格式传入。我想以 JS 格式以 AJAX 式的方式对其进行响应。我的代码如下所示：

```
def create
       .... other code ....
    render "attendances/create", formats: [:js]
end 
```

我有一个视图文件“attendances/create.js.erb”。这成功发送了响应，但响应不是执行 JS，而是将 JS 呈现为 HTML。因此它看起来像纯文本 JS。

感谢您花时间考虑这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:03:27.747

什么是请求标头，您的 ajax 请求必须接受 javascript 的请求标头而不是默认的 html，才能直接允许/执行 js 响应。

[在这里](http://api.jquery.com/jQuery.ajax/)查看数据类型，应该是`script`

# html - 打印时HTML更改背景/文本颜色

> ID：14403809
> 
> 赞同：-1
> 
> 时间：2013-01-18T16:58:34.147
> 
> 标签：html, printing, colors, background

我在用 html 打印时遇到问题，因为我的背景颜色网站是黑色的，并且当 window.print() 被激活时，我需要将背景颜色切换为白色。

我怎样才能做到这一点？考虑时间 X 工作。我尝试过更改 Css，转换为 PDF 等。

我不能使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:01:03.943

您应该能够在带有 @media 打印指令的样式表中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:00:32.903

您可以配置单独的样式表进行打印。在线查看打印样式表。

例如[http://www.alistapart.com/articles/goingtoprint/](http://www.alistapart.com/articles/goingtoprint/)

关键部分是

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

然后您可以在`print.css`样式表中添加它

```
body {
    background: white;
} 
```

摆脱背景

# php - Facebook 自己的 PHP SDK 有什么好的替代品吗？

> ID：14403819
> 
> 赞同：0
> 
> 时间：2013-01-18T16:59:03.617
> 
> 标签：php, facebook

我一直在使用 Facebook 的 PHP SDK，但它有问题，而且他们似乎对修复[基本错误](http://developers.facebook.com/bugs/176570592481958)没有任何兴趣。

如果他们只根据“我也是”的数量来解决错误，他们似乎对维护它不感兴趣。

有其他选择吗？是否有任何其他正在积极维护的实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:20:50.587

如果您不想使用 PHP SDK，只需使用 curl。

玩得开心！

顺便说一句，你真的不应该在启动 facebook 对象之前输出。你想用不涉及身份验证的 SDK 做什么？如果它确实涉及身份验证，那么在进行身份验证之前你不应该输出任何东西。

# javascript - BackboneJS 错误 TypeError：model.parse 不是函数

> ID：14403820
> 
> 赞同：1
> 
> 时间：2013-01-18T16:59:07.833
> 
> 标签：javascript, ruby-on-rails, backbone.js

我正在从 Backbone v0.9.2 升级到 0.9.10，当尝试从路由器获取模型时，出现以下错误：

```
TypeError: model.parse is not a function
if (!model.set(model.parse(resp, options), options)) return false; 
```

它可以很好地从服务器获取模型，但随后就崩溃了。

使用：最新的 BackboneJS、最新的 UnderscoreJS、最新的骨干支持（来自thoughtbot）、jQuery 1.8.3、Rails 后端

以下是相关代码：

```
App.Models.User = Backbone.Model.extend({
  urlRoot: '/users'
});

App.Collections.Users = Backbone.Collection.extend({
  model: App.Models.User,
  url: '/users'
});

App.Routers.Users = Support.SwappingRouter.extend({
  initialize: function() {
    this.collection = new App.Collections.Users();
    this.el = $('div[role="main"]');
  },

  routes: {
    '!/users/:id' : 'show'
  },

  show: function(userId) {
    var user = new App.Models.User({ id: userId });
    user.fetch();
    // ...more code
  }
});

var App = {
  Models: {},
  Collections: {},
  Views: {},
  Routers: {},
  initialize: function() {
    new App.Routers.Users();
    if (!Backbone.history.started) {
      Backbone.history.start();
      Backbone.history.started = true;
    }
  }; 
```

这与我有 Rails(3.2.10) 后端这一事实有关吗？[http://backbonejs.org/#Model-parse](http://backbonejs.org/#Model-parse)

编辑：这是我的 Rails 控制器动作

```
class UsersController < ApplicationController
  respond_to :json

  def show
    @user = find_user params[:id]
    respond_to do |format|
      format.js { render json: @user }
      format.html { redirect_to '/#!/users/' + params[:id] }
    end
  end 
```

# python - 串流直播视频

> ID：14403826
> 
> 赞同：0
> 
> 时间：2013-01-18T16:59:14.523
> 
> 标签：python, ubuntu, video, stream, live

如何为我的客户流式传输实时电影或视频以连接到网页并观看？我更喜欢它是 SWF 格式，所以也许我可以将文件加载到 SWF 中。这不是网络摄像头类型的东西，比如如果我想流式传输我不久前制作的视频并允许我的用户一次观看它，而不是每次刷新时都重新启动它。这可以在 Python、PHP 等中完成吗？或者它是否涉及程序？我正在使用 Ubuntu 作为我的专用服务器。我也需要现场的音频。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:07:08.667

"stream a live movie or video" and "stream a video I made a while ago" are contradictory, what do you really mean by "live"? Are you referring to a "broadcasted video" (i.e. may be prerecorded, but everyone will be viewing from the same stream) or "live video" (i.e. viewing events as it happens, being live implies broadcast).

There are services like [Justin.TV](http://www.justin.tv/) or [Ustream.TV](http://www.ustream.tv/) that allows you to broadcast vieo stream from either live cameras, live screen capture, and/or prerecorded videos. They have their own (flash-based or HTML5-based) web players that can handle live streams and you will need to use their broadcasting software to manage the live stream. There is also Youtube Live if you are a Youtube partner.

# php - AWS 弹性负载均衡器 DNS 名称更改和 Route 53 (PHP)

> ID：14403836
> 
> 赞同：1
> 
> 时间：2013-01-18T16:59:45.310
> 
> 标签：php, amazon-web-services, amazon-elastic-beanstalk, amazon-route53

我正在使用 Elastic Beanstalk、Route 53 和 eb cli 工具`eb init, start, stop etc.`。我的 Elastic Beanstalk 实例在 64 位 Amazon Linux 上运行 PHP 5.4。

我在 Route 53 中创建了一个托管区域，并添加了一个别名以将我的域名指向 Elastic Load Balancer。我运行命令时创建的负载均衡器`eb start`。我按照以下说明操作： http: [//docs.aws.amazon.com/Route53/latest/DeveloperGuide/HowToAliasRRS.html](http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/HowToAliasRRS.html)

当我进行一些配置更改（例如添加密钥对）时，停止 Elastic Beanstalk`eb stop`并重新启动`eb start`负载均衡器的 DNS 名称更改，我必须手动更改 Route 53 中的别名。

有没有办法避免这种情况或自动更新别名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:12:43.483

我在[这里发布了一些示例代码](https://bitbucket.org/aldrinleal/elasticbeanstalk-r53-self-registration)，让您自己的应用程序在启动时执行此操作。该项目中的代码没有经过全面测试，但应该可以帮助您加快速度：

（如果您使用的是[我的插件](http://beanstalker.ingenieux.com.br/beanstalk-maven-plugin/)，[那有一个妙用](https://bitbucket.org/aldrinleal/beanstalker/src/tip/beanstalk-maven-plugin/src/main/java/br/com/ingenieux/mojo/beanstalk/dns/BindDomainsMojo.java)。这个是经过充分测试的 :]）

您可以致电：

```
$ mvn beanstalk:bind-domains -Dbeanstalk.domains=services.modafocas.org:Z3DJ4DL0DIEEJA 
```

谢谢

# java - Java 整数输入验证

> ID：14403840
> 
> 赞同：2
> 
> 时间：2013-01-18T17:00:04.570
> 
> 标签：java, validation

我正在尝试验证来自用户的输入。用户在 Y 坐标中输入一个介于 (AJ) 和 x 坐标之间的字母 (1-9)。我可以验证 y 坐标，但无法验证 x 坐标。我想要它，所以如果用户输入的不是 1 到 9 之间的数字，它会一直要求用户输入有效的输入。

```
 do {
        // inner loop checks and validates user input
        do {

            System.out.println("Enter X Co-Ord (A-J), or Q to QUIT");
            letter = input.next().toUpperCase(); // upper case this for
                                                    // comparison
            if (letter.equals("Q"))
                break; // if user enters Q then quit

            String temp = "ABCDEFGHIJ";

            while (temp.indexOf(letter) == -1) {
                validString = false;
                System.out.println("Please enter a valid input");
                letter = input.next().toUpperCase();
                col = temp.indexOf(letter);

            }

            if (temp.indexOf(letter) != -1) {
                validString = true;
                col = temp.indexOf(letter);

            }
            try {

                System.out.println("Enter Y Co-Ord (0-9)");
                row = input.nextInt();

            } catch (InputMismatchException exception) {
                validInt = false;
                System.out.println("Please enter a number between 1 -9");
            }

            catch (Exception exception) {
                exception.printStackTrace();
            }

            valuesOK = false; // only set valuesOK when the two others are
                                // true
            if (validString && validInt) {
                valuesOK = true;
            }
        } while (!valuesOK); // end inner Do loop 
```

输出是：

输入 X Co-Ord (AJ)，或 Q 退出

d

输入 Y 坐标 (0-9)

H

请输入一个介于 1 -9 之间的数字

输入 X Co-Ord (AJ)，或 Q 退出

输入 Y 坐标 (0-9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:04:45.067

你只需要`nextInt()`像阅读这封信时一样在你周围放置一个while循环：

```
 System.out.println("Enter Y Co-Ord (0-9)");
  row = -1
  while (row < 0) {
    try {
      row = input.nextInt();
      validInt = true;
    } catch (InputMismatchException exception) {
      System.out.println("Please enter a number between 1 -9");
      row = -1;
      validInt = false;
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T06:56:57.170

只是想让验证对需求更有意义，因为人眼可以轻松跳过该行`nextInt()`

```
String value = "";
System.out.println("Enter Y Co-Ord (1-9)");

while (!(value = input.next()).matches("[1-9]+")) {
    System.out.print("Wrong input. Insert again: ");
}

System.out.println(value); 
```

当然，当您获得正确的值时，您可以再次将其解析为整数（安全！！！）

# jquery - Google Calendar API 中的“keyExpired”

> ID：14403843
> 
> 赞同：6
> 
> 时间：2013-01-18T17:00:16.820
> 
> 标签：jquery, api, calendar, key, gcal

从今天开始，我的网站与我的 GCal 存在连接问题。（从一个月开始就完美运行）。

我通过 jQuery GET 调用 GCal：

```
https://www.googleapis.com/calendar/v3/calendars/{MY_CALENDAR}/events?key={MY_API_KEY} 
```

响应是（JSON）：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "keyExpired",
    "message": "Bad Request"
   }
  ],
  "code": 400,
  "message": "Bad Request"
 }
} 
```

我不明白为什么密钥过期。你能帮我吗？我还没有读过关于 api 密钥的固定时间寿命。我没有超过每日配额。

对不起我的英语水平。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T23:08:24.530

keyExpired事件由 OAuth 1.0 流程触发[：](https://developers.google.com/youtube/v3/docs/core_errors#error_keyExpired)

> 如果用户批准您的应用程序的访问请求，Google 会颁发一个授权的请求令牌。每个请求令牌的有效期仅为一小时。只有授权请求令牌可以交换访问令牌，并且每个授权请求令牌只能进行一次交换。

[OAuth 2.0](https://developers.google.com/accounts/docs/OAuth2#expiration)有不同的不基于时间的过期触发器。

> 您应该编写代码来预测授予的令牌可能不再起作用的可能性。由于以下原因之一，令牌可能会停止工作：
> 
> 用户已撤销访问权限。
> 
> 该令牌已六个月未使用。
> 
> 用户更改了密码，并且令牌包含 Gmail、日历、联系人或环聊范围。
> 
> 用户帐户已超过一定数量的令牌请求。

**参考**

*   [OAuth 授权流程](https://developers.google.com/accounts/docs/OAuth#AuthProcess)

# image - 带图像的 Delphi 弹出框

> ID：14403850
> 
> 赞同：2
> 
> 时间：2013-01-18T17:00:45.167
> 
> 标签：image, forms, delphi, button, popup

所以我是 Delphi 的新手，我有一个按钮，当它被点击时，它会打开一个 OpenPictureDialog。然后我想创建一个弹出框，其中加载了该图片。我不确定最好的方法是什么？

我想在按钮单击事件上创建一个新表单，然后将图像放入其中，但我不知道如何将 TImage 传递给表单构造函数。

```
OpenPictureDialog1.Execute;
img.Picture.LoadFromFile(OpenPictureDialog1.FileName);
TForm2.Create(Application, img).Show; 
```

有没有人对如何做到这一点或解决我正在尝试做的事情有更好的想法？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:09:35.193

您最好将 TImage 组件放在辅助表单中并传递文件名，例如，为您的表单创建一个新的构造函数，如下所示：

```
type
  TForm2 = class(TForm)
    Image1: TImage;
  private
  public
    constructor CreateWithImage(AOwner: TComponent; AImgPath: string);
  end;

...
implementation
...

constructor TForm2.CreateWithImage(AOwner: TComponent; AImgPath: string);
begin
  Create(AOwner);
  Image1.Picture.LoadFromFile(AImgPath);
end; 
```

然后，您可以像这样创建并显示您的表单：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Form2: TForm2;
begin
  if OpenPictureDialog1.Execute then
  begin
    Form2 := TForm2.CreateWithImage(Self, OpenPictureDialog1.FileName);
    Form2.Show;
  end;
end; 
```

# 编辑

如果你想在运行时创建图像，你可以这样做：

```
type
  TForm2 = class(TForm)
  private
    FImage: TImage; //this is now in the private section, 
                     //and not the default (published)
  public
    constructor CreateWithImage(AOwner: TComponent; AImgPath: string);
  end;

...
implementation
...

constructor TForm2.CreateWithImage(AOwner: TComponent; AImgPath: string);
begin
  Create(AOwner);
  FImage := TImage.Create(Self);
  FImage.Parent := Self;
  FImage.Align := alClient;
  FImage.Picture.LoadFromFile(AImgPath);
end; 
```

# jquery - 为什么我的带有 2 个选择器的点击功能需要 2 次点击？

> ID：14403852
> 
> 赞同：1
> 
> 时间：2013-01-18T17:00:47.490
> 
> 标签：jquery, click, toggle

我想为 2 个选择器运行切换功能。我有一个带有类的元素`.rgstr`和另一个带有类的元素，`.disable`它们是我的选择器。

这是我的代码：

```
$(document).ready(function(){
    $('.rgstr, .disable').click(function() {
        var clicks = $(this).data('clicks');

        if (!clicks) {
            $('.loginpanel').animate({ right: "0"}, 300, function() {
                $('.lgnreg > div').stop().animate({right:"0"},1200,'easeOutExpo');
            });
            $('.disable').css("display","block");
        } 
        else {
            $('.loginpanel').animate({ right: "-300px" }, 250, 'easeInOutCirc', function() {
                $('.lgnreg > div').stop().animate({right:"-25px"},250,'easeInOutCirc');
            });
            $('.disable').css("display","none");
        }
        $(this).data("clicks", !clicks);
    });
}); 
```

HTML：

```
<div class="disable"></div>
<div class="rgstr">
    <a href="#">Login/Register</a >
</div>
<div class="loginpanel">
<div class="lgnreg">
    <div class="login">
        <form>
            <input type="text" name="lgnusername" id="lgnusername" value="Username" />
            <input type="text" name="lgnpassword" id="lgnpassword" value="Password" />
            <input type="submit" name="submit" id="submit" value="Login" />
        </form>
    </div>

    </div>
</div> 
```

我希望在`.rgstr`单击`.loginpanel`时打开，然后在单击时`.disable`关闭。现在它可以工作了，但只需点击 2 次。`.rgstr`第一次我点击`.loginpanel`gets打开，但我必须点击两次`.disable`才能关闭`.loginpanel`，下一次也一样。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:06:40.317

您的`'clicks'`数据元素仅在您*单击的元素上*，而不是在*两个*元素上。

因此，当您单击 时`.rgstr`，只会更新它的数据，而不是更新它的数据`.disable`。当`.disable`第一次单击时，它`clicks`是`undefined`，因此运行第一个`if`块（就像您第一次单击时一样`.rgstr`）。

您需要将`clicks`变量保存在两个元素都可以读取/写入相同值的地方。

# c# - 带有 Sqlite 的 iBatis .net 导致数组越界

> ID：14403853
> 
> 赞同：0
> 
> 时间：2013-01-18T17:00:50.457
> 
> 标签：c#, sqlite, orm, ibatis, ibatis.net

我将 ibatis .net 与 sqlite 一起用于 ORM。但是，每当我拨打以下电话时

```
IList clientList = mapper.QueryForList("ClientFirm.GetClientData", "A"); 
```

我收到以下错误：

消息“索引超出了数组的范围。”

这是堆栈跟踪：

```
   在 IBatisNet.DataMapper.TypeHandlers.CharTypeHandler.GetValueByName（ResultProperty 映射，IDataReader dataReader）
   在 IBatisNet.DataMapper.Configuration.ResultMapping.ResultProperty.GetDataBaseValue(IDataReader dataReader)
   在 IBatisNet.DataMapper.MappedStatements.PropertyStrategy.DefaultStrategy.Get（RequestScope 请求，IResultMap resultMap，ResultProperty 映射，Object& 目标，IDataReader 阅读器）
   在 IBatisNet.DataMapper.MappedStatements.PropertyStrategy.DefaultStrategy.Set（RequestScope 请求，IResultMap resultMap，ResultProperty 映射，对象和目标，IDataReader 阅读器，对象键）
   在 IBatisNet.DataMapper.MappedStatements.ResultStrategy.GroupByStrategy.Process（RequestScope 请求，IDataReader& 阅读器，对象 resultObject）
   在 IBatisNet.DataMapper.MappedStatements.ResultStrategy.MapStrategy.Process（RequestScope 请求，IDataReader& 阅读器，对象 resultObject）
   在 IBatisNet.DataMapper.MappedStatements.MappedStatement.RunQueryForList（RequestScope 请求，ISqlMapSession 会话，对象 parameterObject，IList resultObject，RowDelegate rowDelegate）
   在 IBatisNet.DataMapper.MappedStatements.MappedStatement.ExecuteQueryForList（ISqlMapSession 会话，对象参数对象）
   在 IBatisNet.DataMapper.SqlMapper.QueryForList(String statementName, Object parameterObject)
   在 d:\Users\ae08964\ATNSource\ATN-AttorneyNetwork\trunk\ATN\App_Code\com\ubs\atn\model\admin\IBatisMapper.cs:line 67 中的 IBatisMapper.getAllClientData()

```

如果数据集在 50 到 100 左右，它工作正常，但对于超过 100（大约）的任何东西都失败。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:04:25.477

想通了..它必须对映射对象中声明的 Char 类型做一些事情。

# asp.net - 全局 web.config 覆盖站点 web.config？

> ID：14403857
> 
> 赞同：1
> 
> 时间：2013-01-18T17:00:56.773
> 
> 标签：asp.net

为了加快我的 ASP.Net 开发构建时间，我更改了我的“全局”web.config 文件 ( `C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\web.config`)，如下所示

```
<system.web>
    ...
    <compilation batch="false"> 
```

在构建之后，这确实加快了我网站的首页访问速度。

令我惊讶的是，我们的**网站** `web.config`有

```
 <compilation batch="true"> 
```

但全局设置似乎是有效的。我希望站点 web.config 将覆盖全局 web.config。不是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:20:08.297

全局`web.config`不会覆盖站点`web.config`。

试试这个：在全局中设置`web.config`

```
<appSettings>
  <add key="TruncLongText-Size" value="150"/> 
```

并且在当地`web.config`

```
<appSettings>
  <add key="TruncLongText-Size" value="150"/> 
```

然后在页面中提示结果。

你看到了什么？

# symfony - 跨不同经理的实体关联

> ID：14403863
> 
> 赞同：2
> 
> 时间：2013-01-18T17:01:20.920
> 
> 标签：symfony, doctrine-orm

我有一个关于教义和 Symfony 2 的小问题：

是否可以在由两个不同的实体管理器（和两个不同的数据库连接）管理的两个实体之间声明关系（OneToMany）？

更准确地说，我有两个捆绑包：

*   `FpnABundle`-> 映射为`A_database` (and `A_entitymanager`)
*   `FpnBBundle`-> 映射为`B_database` (and `B_entitymanager`)

我需要定义和之间的`FpnABundle:User`关联`FpnBBundle:Post`

如果我尝试这样做，当我执行数据库架构更新时，会出现以下错误：

```
The class 'Fpn\ABundle\Entity\User' was not found in the chain configured namespaces Fpn\BBundle\Entity 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T23:39:22.383

基本上，答案是否定的。

您可能需要这样做：[http ://symfony.com/doc/current/cookbook/doctrine/resolve_target_entity.html](http://symfony.com/doc/current/cookbook/doctrine/resolve_target_entity.html)

即使这样，它也只有在两个数据库在同一台服务器上时才有效。在某些时候，您可能需要将模式名称添加到表名中。有些痛苦。

# jquery - Jquery UI 效果不起作用

> ID：14403864
> 
> 赞同：1
> 
> 时间：2013-01-18T17:01:21.347
> 
> 标签：jquery, user-interface

我正在使用两者的最新版本`jQuery`和`jQuery UI`脚本，问题是实际上无法`div`使用 UI 效果（切换、幻灯片、不透明度等）设置任何动画。

```
$('#tabs').tabs( {
    fx: [ { 
        opacity:'toggle', 
        duration:'normal'
    },   // hide option
    {   opacity:'toggle',
        duration:'fast'
    }]
}); // show option 
```

UI 选项卡可以工作，但是当我添加 fx 参数时不制作任何动画。它只是显示或隐藏选项卡，但根本没有动画。

今天刚刚下载了最新版本，因为 UI 已经下载了一个包含所有东西的自定义包（当然包括效果）。

不知道我是否必须使用不同的捆绑包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:04:33.763

您的捆绑包很可能是正确的。我将再次提取捆绑包并查看 index.html 以了解它们如何调用效果。

# c++ - 如何将套接字连接到调制解调器连接？

> ID：14403865
> 
> 赞同：1
> 
> 时间：2013-01-18T17:01:21.760
> 
> 标签：c++, linux, sockets, modem

全部，

我正在开发一个嵌入式 linux 应用程序，该应用程序使用蜂窝连接与数据库进行通信。

我知道我可以使用 AT 命令创建到服务器的套接字，但是如何从 C++ 程序访问套接字？也就是说，在我发出 AT 命令后，如何从应用程序中使用它？

对不起，如果这是一个愚蠢的问题，但我找不到答案......

感谢你的帮助！

:bp:

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:04:37.097

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:04:47.873

这取决于您的操作系统。在大多数普通的 Unix 操作系统上，您可以简单地使用 /dev/tty*，打开它，设置波特率等并发出 AT 命令。

# date - Liferay 动态数据列表

> ID：14403868
> 
> 赞同：3
> 
> 时间：2013-01-18T17:01:31.903
> 
> 标签：date, timestamp, liferay, dynamic-data-list

我正在使用liferay (6.1) 来制作我的portlet，现在我正在使用动态数据列表来定义我的数据定义。

无论如何要添加新的**数据定义字段**吗？

我想以以下格式添加小时、分钟和秒，而不是日历日期`hh:mm:ss`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T23:48:42.313

我认为没有一种简单的方法可以扩展 DDL 可用字段类型。

DDL 字段类型被硬编码到代码中（查看 com.liferay.portlet.dynamicdatamapping.storage.FieldConstants），因此您需要使用 ext-plugin 来更改它；此外，JSP 有点毛茸茸。

因此，尽管可能，但我希望这项任务非常复杂。

# sql-server-2008 - 忽略 SQL 查询中的记录

> ID：14403869
> 
> 赞同：1
> 
> 时间：2013-01-18T17:01:33.487
> 
> 标签：sql-server-2008, tsql, filtering

我有两个日期列；`given_schedule`和`delivery_schedule`。要查询它们，我使用以下内容：

```
SELECT * 
FROM table2 
WHERE CONVERT(date, given_schedule) >= CONVERT(date, DATEADD(dd, -3, GETDATE())) 
```

这`SELECT`将返回过去 3 天内的所有行。不过，我需要做的是删除所有返回的行，这些行在`delivery_schedule`.

我应该如何更新我的查询来做到这一点？本质上，我想删除以下查询返回的任何内容：

```
SELECT * FROM table2 
WHERE CONVERT(date, delivery_schedule) = CONVERT(date, GETDATE()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:07:24.467

```
SELECT * FROM table2
 WHERE CONVERT(date, given_schedule) >=CONVERT(date, DATEADD(dd, -3, GETDATE()))
 AND CONVERT(date, GETDATE()) <> CONVERT(date, delivery_schedule) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:07:14.243

你的意思是这样的？

```
SELECT * 
FROM table2  
WHERE CONVERT(date, given_schedule) != GETDATE() 
AND CONVERT(date, given_schedule)>=CONVERT(date, DATEADD(dd, -3, GETDATE())) 
```

目前尚不清楚这个问题与 C# 有什么关系，因为这是 SQL 代码

# php - JavaScript 函数有问题

> ID：14403870
> 
> 赞同：-4
> 
> 时间：2013-01-18T17:01:34.667
> 
> 标签：php, javascript

代码中的错误在哪里：/我太傻了，我找不到它。

```
// Draw chart
$(function(){
    $.getJSON('data.php?name=<?php echo $name; ?>&mysqltablename=<?php echo $mysqltablename; ?>&datatabletyp=<?php echo $datatabletyp ?>',
    function(data) {
        chart = new Highcharts.Chart
        ({
            chart: { renderTo: '<?php echo $tabname; ?>', zoomType: 'x',  type: 'line', width:800 },
            credits: { enabled: false   },
            plotOptions: {  series: { marker : { enabled: false, states: {  hover: { enabled: true  }  }   } }   },
            xAxis: { type: 'datetime' },
            title: { text:' '     },
            yAxis: { title: { text: ''  } },
            legend: { enabled: false },
            series: [{ name: 'john', data: data[] }],
        });
        Highcharts.setOptions({ global: { useUTC: false } });
        Highcharts.numberFormat(this.y, 2, '.', ',');
    });
}); 
```

控制台抛出此错误

![错误](../Images/7f1fb4fdfa10e87f9f870de5577fac0f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:03:26.697

你有`data: data[]`

如果你想在一个被调用的变量中访问一个对象的数组/属性的索引，`data`那么你必须指定索引或属性名称：`data: data[1]`//`data: data['foo']``data: data.foo`

如果要传递整个数组或对象，则不能使用方括号：`data: data`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:03:33.197

你的问题在这里：

```
series: [{ name: 'john', data: data[] }] 
```

`data[]`部分是错误的。简单地制作它`data`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:03:17.453

删除`[]`after `data`，以便您传递数组本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T17:03:41.027

`data : data[]`应该：

1.  `data : []`如果你想要一个新数组，或者
2.  指定一个索引`data : data[index]`，或
3.  如果你只是想引用数组，它应该是`data : data`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T17:03:25.177

最后尝试删除`,`。

代替

```
series: [{ name: 'john', data: data[] }], 
```

用这个：

```
series: [{ name: 'john', data: data[] }] 
```

# javascript - 动画、FPS 和 KineticJS

> ID：14403875
> 
> 赞同：3
> 
> 时间：2013-01-18T17:01:51.780
> 
> 标签：javascript, animation, kineticjs, frame-rate, requestanimationframe

所以我有一个小球在屏幕上移动，我想计算 FPS。我正在使用 KineticJS (4.3.1)，它在后台使用 requestAnimationFrame。

```
 var anim = new Kinetic.Animation(
          function(frame) {

            //game logic
               //move ball
               //check collisions - if collision occurs, stop animation
               //redraw 

          }
      } 
```

'frame' 对象有一个 time 属性，可以使用 frame.time 访问它，它测量自动画首次启动以来的时间（以毫秒为单位）。

```
 var timeSinceAnimationStarted = frame.time; 
```

什么是测量 FPS 的准确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:33:04.797

一个简单的实现，具有“1s 间隔内的帧”。例如，您可以使用 5 秒间隔的帧来平滑它

```
// variables accessible from within function(frame)
var frameCount = 0;
var currentSecond = 0;
var frameRate = 0;

// within function(frame), called with current time on each new frame
function updateFrameRate(time) {
    var second = Math.floor(time / 1000); // ms to integer seconds
    if (second != currentSecond) {
       frameRate = frameCount;
       frameCount = 0;
       currentSecond = second;
    }
    frameCount ++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:33:49.523

提议的结构似乎是：

```
 var numFrames = 0;
  var anim = new Kinetic.Animation(
      function(frame) {

        //game logic
           //move ball
           //check collisions - if collision occurs, stop animation
           //redraw 
        numFrames++;
      }
  }

  setInterval(function(){
     alert(numFrames/1000);  //number of frames per second
     numFrames = 0;  //reset frame count
  },1000);   //every second 
```

会是这样吗？

# c - x86 汇编程序无缘无故卡住

> ID：14403876
> 
> 赞同：-2
> 
> 时间：2013-01-18T17:01:52.993
> 
> 标签：c, assembly, x86

我在这个程序下面，由于某种原因，我找不到我的汇编程序卡住了。

我已经检查`SP`过代码是否返回到它应该返回的正确位置，并且堆栈始终是它应该的。

为了使例程没有卡住，我只做了一件事就是将跳转更改为`JNL`，而任何其他跳转都会卡住。

这是我在 C 和汇编中的代码。最后有一个 C 代码显示了汇编程序应该做什么。

```
#include <stdio.h>
#include <math.h>
#include <conio.h>
extern void two_point (double (*f1)(double, double), double (*f2)(double, double), double x, double y, double *ptr1, double *ptr2);
extern void fixed2 (double (*f1)(double, double), double (*f2)(double, double), double x0, double y0, double *ptr1, double *ptr2, double eps);
double f1 (double x, double y);
double f2 (double x, double y);
int main()
{
    double x, y;

    fixed2 (f1, f2, 1.4, 1.4, &x, &y, 0.001);
    printf ("x= %lf, y= %lf\n", x, y);
    return 0;
}

double f1 (double x, double y)
{
    return sin (x+y);
}

double f2 (double x, double y)
{
    return cos (x+y);
} 
```

ASM 代码：

```
;HW4a.asm
.MODEL SMALL
.DATA
x0 DQ ?
x1 DQ ?
y0 DQ ?
y1 DQ ?
x2 DQ ?
y2 DQ ?
element DW 16;double*2
.CODE
.386
.387
;two_point (double (*f1)(double, double), double (*f2)(double, double), double x, double y, double *ptr1, double *ptr2)
;f1=BP+4, f2=BP+6, x=BP+8, y=BP+16, ptr1=BP+24, ptr2=BP+26  
_two_point PROC NEAR
PUSH BP
MOV BP,SP
PUSH SI
PUSH DI
MOV SI,WORD PTR[BP+24]
MOV DI,WORD PTR[BP+26]
FLD QWORD PTR [BP+16];ST0=Y
FSTP y2
FLD QWORD PTR [BP+8];ST0=X
FSTP x2
PUSH DWORD PTR y2+4
PUSH DWORD PTR y2
PUSH DWORD PTR x2+4
PUSH DWORD PTR x2
;f1:    
CALL [BP+4];CALL F1
FSTP QWORD PTR [SI];SI GET RETURNED VALUE FROM F1
MOV [BP+24],SI;PTR1=F1(X,Y)
;f2:    
CALL [BP+6];CALL F2
FSTP QWORD PTR [DI];DI GET RETURNED VALUE FROM F2
MOV [BP+26],DI;PTR2=F2(X,Y)
;end:   
ADD SP,element
POP DI
POP SI
POP BP
RET
_two_point ENDP

;fixed2 (double (*f1)(double, double), double (*f2)(double, double), double x0, double y0, double *ptr1, double *ptr2, double eps)
;f1=BP+4, f2=BP+6, x0=BP+8, y0=BP+16, ptr1=BP+24, ptr2=BP+26, eps=BP+28
PUBLIC _fixed2
_fixed2 PROC NEAR
PUSH BP
MOV BP,SP
;pre loop:
PUSH SI
PUSH DI
MOV SI,WORD PTR[BP+24];SI=&ptr1
MOV DI,WORD PTR[BP+26];DI=&ptr2 
FLD QWORD PTR [BP+16];ST0=Y
FST y0
FSTP y1
FLD QWORD PTR [BP+8];ST0=X
FST x0
FSTP x1
LOOPER:
FLD y1
FST y0;y0=y1
FSTP QWORD PTR [DI];SI=&y1
PUSH WORD PTR DI;push &y1
FLD x1
FST x0;x0=x1
FSTP QWORD PTR [SI];SI=&x1
PUSH WORD PTR SI;push &x1
PUSH DWORD PTR y0+4
PUSH DWORD PTR y0
PUSH DWORD PTR x0+4
PUSH DWORD PTR x0
PUSH WORD PTR [BP+6];push f2
PUSH WORD PTR [BP+4];push f1
CALL _two_point
MOV DI,WORD PTR [BP-6];DI=&y0
MOV SI,WORD PTR [BP-8];SI=&x0
ADD SP,8;sizeof(f1+f2)+sizeof(*ptr1+*ptr2)
ADD SP,element
FLD QWORD PTR [SI];load x1
FST x1
FLD x0
FSUB
FABS;|x1-x0|
FLD QWORD PTR [DI];load y1
FST y1
FLD y0
FSUB
FABS;|y1-y0|
FADD;ST[0]=|y1-y0|+|x1-x0|
FLD QWORD PTR [BP+28];ST[0]=eps
FCOMPP;ST[0]-ST[1]
FSTSW AX
SAHF
JBE LOOPER;while ((fabs(x1-x0) + fabs(y1-y0))>=eps)
;end:   
FLD x1
FSTP QWORD PTR [SI]
MOV WORD PTR [BP+24],SI;update *ptr1=x1
FLD y1
FSTP QWORD PTR [DI]
MOV WORD PTR [BP+26],DI;update *ptr2=y1
POP DI
POP SI
POP BP
RET
_fixed2 ENDP
END 
```

这就是 ASM 应该做的：

```
void fixed2 (double (*f1)(double, double), double (*f2)(double, double), double x0, double y0, double *ptr1, double *ptr2, double eps)
{
double x1= x0, y1= y0;

do
{
    x0= x1;
    y0= y1;
    two_point (f1, f2, x0, y0, &x1, &y1);
} while ((fabs(x1-x0) + fabs(y1-y0))>=eps);

*ptr1 = x1;
*ptr2 = y1;
} 
```

F1 和 F2：

```
double f1 (double x, double y)
{
    return sin (x+y);
}

double f2 (double x, double y)
{
return cos (x+y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:31:30.040

`FCOMPP`仅设置 FPU 中的条件代码位。您可能的意思是`FCOMIP`（如果需要，后跟另一个弹出），以便您可以使用条件分支指令。

此外，即使您说您检查过，请`SP`注意典型的 C 调用约定允许`DX`修改，因此假设它没有更改是不安全的。您应该在`ADD SP,DX`.

* * *

**更新**：好的，我已经让它工作了（虽然我不知道结果是否正确：x=0.9516 和 y=0.3072）。`JB`您不应该使用，因为根据结果设置`JL`的 FPU 标志位`C0`和- 将分别传输到和，但检查和在这里没有意义。`C3``FCOMPP``CF``ZF``JL``SF``OF`

旁注：如果您使用`DWORD PTR`的代码不是纯 16 位的，它只会在 32 位处理器上运行。

当然你的程序可以简化很多。

# forms - 嵌入式控制器动作生成的 Symfony2 主题表单

> ID：14403880
> 
> 赞同：2
> 
> 时间：2013-01-18T17:02:03.510
> 
> 标签：forms, symfony, twig, theming

我正在嵌入式控制器操作中生成表单。现在我面临以下问题。在这种情况下，表单主题不起作用。

所以我有什么：

1.  模板“page.html.twig”

    ```
    {% block content %}
    {% render 'MyBundle:Widget:index' %}
    {% endblock %} 
    ```

2.  indexAction() 创建表单并渲染另一个模板“form.html.twig”，该模板通常使用 form_row、form_rest 等渲染表单。

所以，现在我正在尝试自定义表单主题，这是我的问题。当我把代码

```
{% form_theme form _self %} 
```

在 page.html.twig 中，我收到一个错误，表单变量不存在。并且它是正确的，形式 var 稍后在嵌入式控制器中创建。但是当我将主题代码放入嵌入式模板“form.html.twig”中时，我收到另一个错误“变量“复合”不存在”

```
{% block form_label %}
{% spaceless %}
    {% if not compound %}
        {% set label_attr = label_attr|merge({'for': id}) %}
    {% endif %}
    {% if required %}
        {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
    {% endif %}
    {% if label is empty %}
        {% set label = name|humanize %}
    {% endif %}
    <label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %} {% if attr.tooltip is defined %}title="{{ attr.tooltip }}"{% endif %}>{{ label|trans({}, translation_domain) }}{% if required %}<span>*</span>{% endif %}</label>
{% endspaceless %}
{% endblock form_label %} 
```

这部分代码是从此文件复制的[https://github.com/symfony/symfony/blob/2.1/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig](https://github.com/symfony/symfony/blob/2.1/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)

所以试图有人做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:44:00.930

亲自回答我的问题。

这是 Symfony2 文档[http://symfony.com/doc/current/book/forms.html中的一个小句子](http://symfony.com/doc/current/book/forms.html)

> 此 {% form_theme form _self %} 功能仅在您的模板扩展另一个模板时才有效。如果您的模板没有，您必须将 form_theme 指向一个单独的模板。

所以有两种解决方案来解决这个问题：

1.  将表单主题代码移动到单独的文件中，并将其包含在嵌入式模板中

    ```
    {% form_theme form with 'fields.html.twig' %} 
    ```

2.  将表单主题代码留在将生成表单的同一模板中，但从一些“ `form.html.twig`”空模板扩展模板。

我只完成了第二种方式，它的工作原理，但我相信第一种方式也可以。

# izpack - IzPack：如何使用 LicensePanel 显示 UTF-8 许可证？

> ID：14403881
> 
> 赞同：2
> 
> 时间：2013-01-18T17:02:04.380
> 
> 标签：izpack

如题。我的许可证文件包含 UTF-8 字符，默认情况下，IzPack 的 LicensePanel 似乎需要 ASCII 文本文件。

有针对这个的解决方法吗？

**更新：**

我尝试在资源行中使用“编码”属性：

```
<res id="LicencePanel.licence" src="Licence.txt" encoding="utf-8"/> 
```

它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T16:05:46.043

看起来这行不通。我查看了 4.3.5 的源代码，看起来这可能是一个错误。也许它会在未来的版本中得到修复。我查看了源代码，这就是问题所在。在 LicensePanel.java 内部：

```
 String resNamePrifix = "LicencePanel.licence";
        licence = ResourceManager.getInstance().getTextResource(resNamePrifix); 
```

ResourceManager 有两个方法：

*   `public String getTextResource(String resource, String encoding) throws ResourceNotFoundException, IOException`
*   `public String getTextResource(String resource) throws ResourceNotFoundException, IOException`

第一个第二个正在使用，而第一个应该使用。

*编辑*：刚刚检查了 5.0.0-rc1 ，我认为问题也发生在那里。（没测试只是看了一眼代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T17:18:23.233

我的 LicencePanel.licence 资源也有类似的问题。我的安装中也有一个 InfoPanel.Info 资源。我的信息文件 (readme.txt) 和许可证 (licence.txt) 都是纯文本格式。当我运行安装时，我的编译器接受自述文件，但不接受许可文件。

也许这不是编码问题，因为两个文件的格式相同，但信息文件被接受而许可证未被接受。

# javascript - map.js 背景并不总是加载，建议让它更一致？

> ID：14403883
> 
> 赞同：0
> 
> 时间：2013-01-18T17:02:05.910
> 
> 标签：javascript, google-maps, map, background

[我通过javascript在我网站](http://thirdprinciple.com)的一个页面上有一个谷歌地图背景，但我注意到它并不总是加载。相反，它的一部分将显示为左上角的一个小方块（好像它在平铺页面时停止）。如果我刷新屏幕甚至调整窗口大小，它会加载，然后我暂时无法重现问题。

首次访问该网站时最常发生这种情况，这对于我们想要吸引该网站的新访问者来说显然是一个问题。

关于让它更好地加载的任何想法？或者关于问题是什么的想法？

代码：

```
/*
    Global
    */
    var map;

    function initialize() {

        /*
        Basic Setup
        */

        var latLng = new google.maps.LatLng(39.726020913196265, -105.00015970000004);

        var myOptions = {
            panControl: false,
            zoomControl: false,
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            overviewMapControl: false,
            draggable: true,
            disableDoubleClickZoom: true,     //disable zooming
            scrollwheel: false,
            zoom: 16,
            center: latLng,
            mapTypeId: google.maps.MapTypeId.ROADMAP //   ROADMAP; SATELLITE; HYBRID; TERRAIN;
        };

        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        /*
        MARKER
        */

        /*
        //for custom image
        var image = 'yourflag.png';
        icon: image 

        //for animation marker drop
        animation: google.maps.Animation.DROP

        */
        var markerlatlng = new google.maps.LatLng(39.726020913196265, -105.00015970000004);

        var marker = new google.maps.Marker({
            position: markerlatlng,
            title:"Hello World!"
        });

        marker.setMap(map);

        /*
        INFO Bubble
        */

        myInfoWindowOptions = {
            content: '',
            maxWidth: 275
        };

        infoWindow = new google.maps.InfoWindow(myInfoWindowOptions);

        google.maps.event.addListener(marker, 'click', function() {
            infoWindow.open(map,marker);
        });

        google.maps.event.addListener(marker, 'dragstart', function(){
            infoWindow.close();
        });

        infoWindow.open(map,marker);

    }//end initialize

    /*
    onLoad
    */
    $(function(){
        initialize();

        $("#zo").click(function(event){
            event.preventDefault(); 
            map.setZoom( map.getZoom()-1 );
            //map.setCenter(new google.maps.LatLng(9.825183,15.1975769));
        });

        $("#zi").click(function(event){
            event.preventDefault(); 
            map.setZoom( map.getZoom()+1 );
        });

        $("#gt").click(function(event){
            event.preventDefault(); 
            var lt1 = new google.maps.LatLng(36.114739, -115.171840);
            //map.setZoom( 16 );
            map.panTo(lt1);
        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:21:05.330

首先，我喜欢页面的滚动效果，但是查看代码和页面源，我无法完全说出您的 onload 事件是如何触发的。我有时也会遇到某些页面无法在某些浏览器上完全加载的问题。

您是否尝试过附加多个事件来加载背景？

```
 function doLoad() {  // this is what executes when page is to load
             initialize();
        }
        //different event handlers for page load
        if ( window.addEventListener ) { 
              window.addEventListener( "load", doLoad, false );
        }
        else if ( window.attachEvent ) { 
              window.attachEvent( "onload", doLoad );
        } 
        else  if ( window.onLoad ) {
              window.onload = doLoad;
        }
        else window.setTimeout('doLoad', 1000); 
```

# c# - 同步两个列表视图滚动移动

> ID：14403884
> 
> 赞同：0
> 
> 时间：2013-01-18T17:02:07.197
> 
> 标签：c#, .net, vb.net, winforms

如何在 C# Windows 窗体应用程序中同步两个列表视图的滚动。

**例：**`listview2`上移时， 也`listview1`上移。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:04:25.867

你应该看看这个项目：

[http://www.codeproject.com/Tips/197335/Synchronized-ListBox-objects-or-how-to-scroll-2-Li](http://www.codeproject.com/Tips/197335/Synchronized-ListBox-objects-or-how-to-scroll-2-Li)

**项目简介：**

> 几天前我有一个任务，我必须同步两个 ListBox 对象。我发现 ListBox 对象没有任何允许完成此操作的属性。经过几个小时的谷歌搜索，我找到了从 ListBox 类继承的类代码。这是该类的代码：

# c++ - NPAPI mac 插件与浏览器共享命令

> ID：14403896
> 
> 赞同：0
> 
> 时间：2013-01-18T17:03:17.520
> 
> 标签：c++, npapi

我有一个在 Safari、Chrome 和 Firefox 中运行的 NPAPI 插件。我可以使用事件回调处理所有组合键，但我遇到的问题是某些组合键。

在插件中，我尝试使用 Command+O 来触发插件的文件打开对话框，但浏览器也在触发其打开文件对话框。

假设，为事件处理方法返回 TRUE 应该报告插件处理事件的浏览器，但我没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:46:48.693

您忽略了指定您使用的操作系统；基于您说“Command+O”而不是“Ctrl-O”的事实，我假设您使用的是 Mac。坏消息是，在 Mac 上，所有事件都从浏览器传递给插件。如果浏览器没有选择可以覆盖事件的处理（听起来就是这种情况），那么您可能无能为力，除了可能使用一些操作系统挂钩来拦截密钥浏览器获取之前的事件，这似乎有风险。

在 Windows 上，你可能会更幸运一些，因为窗口插件实际上应该在事件被传递到父窗口之前先获取事件，从而可以拦截它们。但是，在 Mac 上，这一切都是无窗口的，当浏览器想要将事件提供给您时，您就会收到事件。

# c# - 在c#中将字节[]转换为结构的两种方法的区别

> ID：14403901
> 
> 赞同：0
> 
> 时间：2013-01-18T17:03:26.380
> 
> 标签：c#, marshalling, binaryformatter, binary-serialization

我正在一些结构和他们的`byte[]`表示之间进行一些转换。我找到了两种方法来做到这一点，但区别（性能、内存和......）对我来说并不清楚。

**方法一：**

```
public static T ByteArrayToStructure<T>(byte[] buffer)
{    
    int length = buffer.Length;
    IntPtr i = Marshal.AllocHGlobal(length);
    Marshal.Copy(buffer, 0, i, length);
    T result = (T)Marshal.PtrToStructure(i, typeof(T));
    Marshal.FreeHGlobal(i);
    return result;
} 
```

**方法二：**

```
public static T Deserialize<T>(byte[] buffer)
{
    BinaryFormatter formatter = new BinaryFormatter();
    using (System.IO.MemoryStream stream = new System.IO.MemoryStream(buffer))
    {
        return (T)formatter.Deserialize(stream);
    }
} 
```

那么哪个更好，主要区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:43:22.797

您正在谈论两种不同的方法和两种不同类型的数据。如果您正在使用转换为字节数组的原始值，请使用第一种方法。如果您正在处理序列化为字节数组的值（它们还包含序列化数据），请使用第二种方法。两种不同的情况，两种不同的方法……让我说，它们不是“同义词”。

```
Int32 Serialized into Byte[] -> Length 54
Int32 Converted to Byte[]    -> Length 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:21:54.953

使用`BinaryFormatter`序列化数据时，它将在输出流中附加元数据以供反序列化期间使用。因此，对于您拥有的两个示例，您会发现`T`在相同输入的情况下它不会产生相同的输出`byte[]`。所以你需要决定你是否关心二进制输出中的元数据。如果您不在乎，方法2显然更清洁。如果您需要它是直接二进制，那么您将不得不使用类似方法 1 的方法。

# python - 多线程 Python 网络爬虫陷入困境

> ID：14403907
> 
> 赞同：3
> 
> 时间：2013-01-18T17:03:41.120
> 
> 标签：python, multithreading, python-multithreading

我正在编写一个 Python 网络爬虫，我想让它成为多线程的。现在我已经完成了基本部分，下面是它的作用：

1.  一个线程从队列中获取一个 url；

2.  线程从页面中提取链接，检查链接是否存在于池（一组）中，并将新链接放入队列和池中；

3.  线程将 url 和 http 响应写入 csv 文件。

但是当我运行爬虫时，它最终总是卡住，不能正常退出。我已经浏览了 Python 的官方文档，但仍然没有任何线索。

下面是代码：

```
#!/usr/bin/env python
#!coding=utf-8

import requests, re, urlparse
import threading
from Queue import Queue
from bs4 import BeautifulSoup

#custom modules and files
from setting import config

class Page:

    def __init__(self, url):

        self.url = url
        self.status = ""
        self.rawdata = ""
        self.error = False

        r = ""

        try:
            r = requests.get(self.url, headers={'User-Agent': 'random spider'})
        except requests.exceptions.RequestException as e:
            self.status = e
            self.error = True
        else:
            if not r.history:
                self.status = r.status_code
            else:
                self.status = r.history[0]

        self.rawdata = r

    def outlinks(self):

        self.outlinks = []

        #links, contains URL, anchor text, nofollow
        raw = self.rawdata.text.lower()
        soup = BeautifulSoup(raw)
        outlinks = soup.find_all('a', href=True)

        for link in outlinks:
            d = {"follow":"yes"}
            d['url'] = urlparse.urljoin(self.url, link.get('href'))
            d['anchortext'] = link.text
            if link.get('rel'):
                if "nofollow" in link.get('rel'):
                    d["follow"] = "no"
            if d not in self.outlinks:
                self.outlinks.append(d)

pool = Queue()
exist = set()
thread_num = 10
lock = threading.Lock()
output = open("final.csv", "a")

#the domain is the start point
domain = config["domain"]
pool.put(domain)
exist.add(domain)

def crawl():

    while True:

        p = Page(pool.get())

        #write data to output file
        lock.acquire()
        output.write(p.url+" "+str(p.status)+"\n")
        print "%s crawls %s" % (threading.currentThread().getName(), p.url)
        lock.release()

        if not p.error:
            p.outlinks()
            outlinks = p.outlinks
            if urlparse.urlparse(p.url)[1] == urlparse.urlparse(domain)[1] :
                for link in outlinks:
                    if link['url'] not in exist:
                        lock.acquire()
                        pool.put(link['url'])
                        exist.add(link['url'])
                        lock.release()
        pool.task_done()            

for i in range(thread_num):
    t = threading.Thread(target = crawl)
    t.start()

pool.join()
output.close() 
```

任何帮助，将不胜感激！

谢谢

马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:12:47.343

您的 crawl 函数有一个无限的 while 循环，没有可能的退出路径。正如您所说，条件`True`始终评估为`True`并且循环继续，

> 没有正确退出

修改 crawl 函数的 while 循环以包含一个条件。例如，当保存到 csv 文件的链接数量超过某个最小数量时，则退出 while 循环。

IE，

```
def crawl():
    while len(exist) <= min_links:
        ... 
```

# c++ - C++ 将 unicode CString 或 wchar_t 转换为 LPBYTE

> ID：14403908
> 
> 赞同：2
> 
> 时间：2013-01-18T17:03:42.920
> 
> 标签：c++, mfc

我知道这是一个简单的问题，但我尝试了很多方法，在所有这些方法中，我都会丢失数据、文本数据，而不是每个字节后的尾随 0。

我转换`CString`为`wchar_t`using `GetBuffer(0)`，仍然没有运气。我无法获得适当的`LPBYTE`.

最后我需要它`const LPBYTE`，但我认为通过简单的铸造`LPBYTE`我可以得到`const LPBYTE`。

那么你能帮我转换或`CString`数组吗？`wchar_t``LPBYTE`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:07:05.913

如果您想将 a 的内容“`CString`视为”一个简单的“原始”序列（数组）`BYTE`，您可以使用`CString::GetString()`方法获取指向第一个`CString`字符的指针，然后转换为`const BYTE*`：

```
CString str;
....
const BYTE* pb = reinterpret_cast<const BYTE*>(str.GetString()); 
```

如果您想“看到”单个`wchar_t`作为`BYTE`'s 的序列，您可以获取其地址并再次转换为`const BYTE*`：

```
wchar_t wch;
....
const BYTE* pb = reinterpret_cast<const BYTE*>(&wch); 
```

但是，如果您想从 Unicode UTF-16 转换为另一种编码，例如 UTF-8，您可能需要使用一些[转换助手，例如`CW2A`](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)：

```
CString strUtf16; // Assume UNICODE builds (the default since VS2005)
....
// Convert from UTF-16 to UTF-8
CW2A strUtf8( strUtf16, CP_UTF8 );

// Convert (cast) to const BYTE*
const BYTE* pb = reinterpret_cast<const BYTE*>( static_cast<const char*>(strUtf8) ); 
```

# c++ - 如何从 AVI 视频中提取帧

> ID：14403909
> 
> 赞同：1
> 
> 时间：2013-01-18T17:03:43.600
> 
> 标签：c++, opencv

嘿，到目前为止，我管理 OpenCV 来播放 video.avi，但是我现在应该怎么做才能提取帧......？

以下是我到目前为止编写的让我的视频播放的代码：

```
#include<opencv\cv.h>
#include<opencv\highgui.h>
#include<opencv\ml.h>
#include<opencv\cxcore.h>

int main( int argc, char** argv ) {
cvNamedWindow( "DisplayVideo", CV_WINDOW_AUTOSIZE );
CvCapture* capture = cvCreateFileCapture( argv[1] );
IplImage* frame;
while(1) {
frame = cvQueryFrame( capture );
if( !frame ) break;
cvShowImage( "DisplayVideo", frame );
char c = cvWaitKey(33);
if( c == 27 ) break;
}
cvReleaseCapture( &capture );
cvDestroyWindow("DisplayVideo" );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:07:37.080

`frame` *是*您要提取的帧。如果要将其转换为 cv::Mat，可以通过使用该 IplImage 创建一个垫子来实现：

```
Mat myImage(IplImage); 
```

[这里有一个很好的教程](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#videocapture)。

但是，您正在以旧方式进行操作。最新版本的 OpenCV 具有最新的相机捕捉能力，你应该这样做：

```
#include "cv.h"
#include "highgui.h"

using namespace cv;

int main()
{
    VideoCapture cap(0); // open the default camera
    if(!cap.isOpened())  // check if we succeeded
        return -1;

    namedWindow("Output",1);

    while(true)
    {
        Mat frame;
        cap >> frame; // get a new frame from camera

        //Do your processing here
        ...

        //Show the image

        imshow("Output", frame);
        if(waitKey(30) >= 0) break;
    }

    // the camera will be deinitialized automatically in VideoCapture destructor
    return 0;
} 
```

# c# - 将绑定对象直接传递到 DataTemplate 项

> ID：14403910
> 
> 赞同：0
> 
> 时间：2013-01-18T17:03:44.660
> 
> 标签：c#, xaml, data-binding, windows-phone-8

我有一组我传递给`Items`的对象。我想直接将 every 传递给 each 。我怎样才能做到这一点？`JSection``LongListMultiSelector``JSection``controls:Section`

导致运行时异常的 XAML：

```
<toolkit:LongListMultiSelector ItemsSource="{Binding Items}">
    <toolkit:LongListMultiSelector.ItemTemplate>
        <DataTemplate>
            <controls:Section Data="{Binding}" />
        </DataTemplate>
    </toolkit:LongListMultiSelector.ItemTemplate>
</toolkit:LongListMultiSelector> 
```

包含 XAML 的用户控件`LongListMultiSelector`：

```
namespace Controls
{
    public partial class RemoteHomePage : UserControl
    {
        public ObservableCollection<JSection> Items { get; set; }

        public RemoteHomePage()
        {
            Items = new ObservableCollection<JSection> { };

            Items.Add(new JSection { id = 2, name = "Section 2" });
            Items.Add(new JSection { id = 1, name = "Section 1" });
            Items.Add(new JSection { id = 3, name = "Section 3" });

            InitializeComponent();
        }
    }
} 
```

`Section`班级：

```
namespace Controls
{
    public partial class Section : UserControl
    {
        public JSection Data { get; set; }

        public Section()
        {
            InitializeComponent();
        }
    }
} 
```

我得到的例外：

```
An exception of type 'System.ArgumentException' occurred in mscorlib.ni.dll and wasn't handled before a managed/native boundary
An exception of type 'System.IO.FileNotFoundException' occurred in Unknown Module. and wasn't handled before a managed/native boundary
An exception of type 'MS.Internal.NativeParseException' occurred in Unknown Module. and wasn't handled before a managed/native boundary
An exception of type 'System.Exception' occurred in Unknown Module. and wasn't handled before a managed/native boundary 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:33:13.663

您可以将任何集合绑定为 LongListSelector.ItemSource=Collection 任何 ListElement[i] 的数据上下文将自动设置为相应的 Collection[i] 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:50:50.620

经过一番搜索，我发现我根本不需要设置任何显式绑定，every`JSection`将是`DataContext`every的 a `Section`。

此代码工作正常，不会导致异常：

```
<toolkit:LongListMultiSelector ItemsSource="{Binding Items}">
    <toolkit:LongListMultiSelector.ItemTemplate>
        <DataTemplate>
            <controls:Section />
        </DataTemplate>
    </toolkit:LongListMultiSelector.ItemTemplate>
</toolkit:LongListMultiSelector> 
```

# sql-server - 在大小写内将 Varchar 转换为数值时出错

> ID：14403912
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:03:48.380
> 
> 标签：sql-server, tsql, sql-server-2005, stored-procedures

我有一个存储过程，它使用一系列临时表来提取数据、格式化然后插入到新表中。我知道这没有意义，但我正在尝试将 null 格式化为“”（空白）或“-”破折号。这是公元前。零值实际上代表了实际余额。当我这样做时，我不断收到将 varchar 转换为数字的错误。

```
CASE 
WHEN ##TEMPTABLE.[Summary Category Definition] = 'In Storage' THEN '' 
WHEN ##TEMPTABLE.[L/C Amount] > 0 THEN ##TEMPTABLE.[L/C Amount] 
ELSE ''
END AS [L/C Amount] 
```

我努力了：

```
CASE 
WHEN ##TEMPTABLE.[Summary Category Definition] = 'In Storage' THEN '' 
WHEN ##TEMPTABLE.[L/C Amount] > 0 THEN convert(varchar(20), ##TEMPTABLE.[L/C Amount]    )
ELSE ''
END AS [L/C Amount] 
```

这甚至可能吗？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:18:22.010

我不明白为什么您的查询不应该工作，除非该`[L/C Amount]`列实际上已经是`VARCHAR`. 在这种情况下，您应该为此更改您的声明：

```
CASE 
    WHEN ##TEMPTABLE.[Summary Category Definition] = 'In Storage' 
        THEN '' 
    WHEN ##TEMPTABLE.[L/C Amount] <> '0' 
        THEN CONVERT(VARCHAR(20), ##TEMPTABLE.[L/C Amount]) -- why is this necessary?
    ELSE '' 
END AS [L/C Amount] 
```

# r - R数据框行名显示矩阵而不是数值

> ID：14403917
> 
> 赞同：0
> 
> 时间：2013-01-18T17:04:17.883
> 
> 标签：r, dataframe, rowname

我有以下内容来创建数据框。我的问题是数据框行名称显示为 [1,],[2,],[3,],[4,] 等，而不仅仅是 1,2,3,4 等（见下文输出） . 为什么以及如何解决这个问题，让我的行名像往常一样显示（递增的数字）。

```
Code:

df <- data.frame(id=c("id"),nobs=c("nobs"))
df <- cbind(id,nobs)
df 
```

id 和 nobs 是两个向量，每个向量有 5 个数值...

```
Current output:
     id nobs
[1,]  2 3653
[2,]  4 3653
[3,]  8 1462
[4,] 10 1097
[5,] 12  732

Desired output:
   id nobs
1  2 3653
2  4 3653
3  8 1462
4 10 1097
5 12  732 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:10:37.200

您的第二个命令完全覆盖第一个命令。你想要的是

```
df <- data.frame(id=id, nobs=nobs) 
```

由于您对[cbind](http://stat.ethz.ch/R-manual/R-patched/library/base/html/cbind.html)的输入是向量（我假设），因此默认情况下它返回一个矩阵。

此外，您可以通过强制将其作为数据框

```
df <- data.frame(cbind(id, nobs)) 
```

但这太过分了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:15:19.890

**注意：**我不建议您使用这些方法中的任何一种。如果你想要一个`data.frame`，你可以像 Paul 展示的那样直接创建它（或者你自己已经完成了）。这只是为了说明为什么会发生这种情况。尽管有时在使用`sapply`例如时，输出将是一个矩阵，您可能希望绑定 2 个这样的矩阵并将它们作为`data.frame`.

`cbind`从( )的帮助页面`?cbind`：

> 函数 cbind 和 rbind 是 S3 通用的，具有数据帧的方法。如果至少一个参数是数据框，其余的是向量或矩阵，则将使用数据框方法。
> 
> **数据框方法**
> 
> cbind 数据框方法只是 data.frame(..., check.names = FALSE) 的包装器。这意味着它将拆分数据框参数中的矩阵列，并将字符列转换为因子，除非指定了 stringsAsFactors = FALSE。

`data.frame`因此，如果您传递两个向量，则不会调用包装器。因此，您获得了一个矩阵。

> 你能做什么？
> 1）您可以创建*至少一个* `data.frame`参数并将其传递给`cbind`
> 2）`cbind`用`as.data.frame(.)`.

```
x <- 1:5
y <- 6:10
> cbind(data.frame(x), y)
  x  y
1 1  6
2 2  7
3 3  8
4 4  9
5 5 10

> as.data.frame(cbind(x,y))
  x  y
1 1  6
2 2  7
3 3  8
4 4  9
5 5 10 
```

# java - 为什么我的测试不能从其父级继承其 ContextConfiguration 位置？

> ID：14403923
> 
> 赞同：8
> 
> 时间：2013-01-18T17:04:37.570
> 
> 标签：java, spring, junit, spring-test

为了 DRY，我想在父类中定义我的 ContextConfiguration 并让我的所有测试类都继承它，如下所示：

父类：

```
package org.my;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "/org/my/Tests-context.xml")
public abstract class BaseTest {

} 
```

儿童班：

```
package org.my;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(inheritLocations = true)
public class ChildTest extends BaseTest {

    @Inject
    private Foo myFoo;

    @Test
    public void myTest() {
          ...
    }
} 
```

根据[ContextConfiguration](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/test/context/ContextConfiguration.html)文档，我应该能够继承父级的位置，但我无法让它工作。Spring 仍在默认位置 ( `/org/my/ChildTest-context.xml`) 中寻找文件，找不到时会 barfs 。我试过以下没有运气：

*   使父类具体化
*   向父类添加无操作测试
*   将注入的成员也添加到父类
*   以上组合

我在 spring-test 3.0.7 和 JUnit 4.8.2 上。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T17:34:19.663

删除`@ContextConfiguration(inheritLocations = true)`子类上的。`inheritLocations`默认设置为 true。

通过在`@ContextConfiguration(inheritLocations = true)`不指定位置的情况下添加注释，您可以告诉 Spring 通过添加默认上下文来扩展资源位置列表，即`/org/my/ChildTest-context.xml`.

尝试这样的事情：

```
package org.my;

@RunWith(SpringJUnit4ClassRunner.class)
public class ChildTest extends BaseTest {

    @Inject
    private Foo myFoo;

    @Test
    public void myTest() {
          ...
    }
} 
```

# magento - 将 Magento 1.7 模块/扩展适配到 Magento 1.2 时需要考虑的事项？

> ID：14403931
> 
> 赞同：0
> 
> 时间：2013-01-18T17:05:01.157
> 
> 标签：magento, module, payment

所以，我在 1.7 版上开发了一个 Magento 模块/扩展。

有一些客户端运行以前的版本，比如 1.2。

我试图安装旧版本，但我已经遇到了问题：它不想在 PHP 5.3 上按预期运行。

我的问题是：

*   调整模块时应该考虑什么？（比如 1.2 版）
*   我在哪里可以找到这个版本的一些好的文档？（我在官方 magentocommerce.com 上没有找到）？

为了更具体，如果它在某些时候有帮助，它是一个支付模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:37:00.523

集合在 1.2 中没有像在下一个版本中那样深入使用。例如，在网格中，您需要在准备之前将集合转换为数组（asArray 或集合的 Array 方法，我记得）。

# java - 在 Spring 中将服务 bean 自动装配到 XML 定义的 bean 中

> ID：14403934
> 
> 赞同：4
> 
> 时间：2013-01-18T17:05:05.997
> 
> 标签：java, spring, spring-mvc

在我的 Spring 应用程序中，我在我的 xml 中定义了一个 bean，如下所示：

```
<beans:bean id="tokenStore" class="com.myproject.core.security.RemoteTokenStore" /> 
```

我还创建了这个类，并使用@Service 进行了注释：

```
com.myproject.core.service.CacheService 
```

在我的 RemoteTokenStore.java 文件中，如果我尝试像这样自动连接 CacheService：

```
@Autowired
private CacheService cacheService; 
```

它始终为空。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:06:24.327

将此添加到您的上下文 xml 文件中：

```
<context:component-scan base-package="com.myproject.core.security" /> 
```

一旦指定了这一点，您的注释将被处理并且您的组件将由 Spring 识别。

如果还没有，您还需要`spring-context`在应用程序 XML 中包含对类路径和上下文命名空间的依赖项。

阅读本文：[http](http://www.mkyong.com/spring/spring-auto-scanning-components/) ://www.mkyong.com/spring/spring-auto-scanning-components/可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:13:49.523

你没有提供足够的信息。哪个春季版本？哪个应用服务器？

一般来说，你应该有

```
<context:component-scan base-package="com.packagebase" /> 
```

in your spring xml conf files to use annotated beans.

however, it won't always work.

I had problem with spring 2.5.6 + Jboss AS7\. Jboss kept reporting annotated bean not defined. (NoSuchBeanDefinition or something like that). I switched to spring 3.0.0.Relase to resolve it.

# java - 如何使用不同的命名查询

> ID：14403940
> 
> 赞同：0
> 
> 时间：2013-01-18T17:05:28.963
> 
> 标签：java, jpa, netbeans, jsf-2

我正在使用 Netbeans 中的 JPA 在 JSF 2.0 中做我的第一个应用程序。

1.  如何在 JSF 中对我的 Java 实体使用不同的命名查询？例如我有这个实体，

    ```
    @Entity
    @Table(name = "user")
    @XmlRootElement
    @NamedQueries({
    @NamedQuery(name = "User.findAll", query = "SELECT u FROM User u"),
    @NamedQuery(name = "User.findById", query = "SELECT u FROM User u WHERE u.id = :id"),
    @NamedQuery(name = "User.findByUser", query = "SELECT u FROM User u WHERE u.user = :user"),
    @NamedQuery(name = "User.findByPassword", query = "SELECT u FROM User u WHERE u.password = :password"),
    @NamedQuery(name = "User.findByMail", query = "SELECT u FROM User u WHERE u.mail = :mail")})
    public class User implements Serializable {
        private static final long serialVersionUID = 1L;
        @Id
        @Basic(optional = false)
        @NotNull
        @Column(name = "id")7
        private Integer id; 
    ```

    我希望在 JSF 中可以选择使用不同的命名查询，如`findByMail`,`findByUser`等。

2.  我看到在 Netbeans 生成的代码中，我有一个`Vector`结果为`findAll`. 这样好吗？如果我的数据库中有很多数据，这不会是一个大向量吗？在 100 个查询中做 100 个不是更好吗？

3.  生成的 JSF 页面始终相同。这是正常的吗？我可以生成一个网址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:30:42.270

您似乎正在使用 Netbeans 向导 - 并且对生成的代码了解甚少。你迷失了，甚至无法提出正确的问题，更不用说理解答案了。你没有掌握 JSF 和 JPA、JPQL 和 SQL、向量和集合等之间的区别。

请随意忽略我的建议，但我强烈认为您需要先学习使用的技术，然后再尝试使用向导。从数据库生成 JSF CRUD 页面的 Netbeans 向导并不是一个开箱即用的解决方案，事实上模板有已知的错误。它可以用来娱乐，可以用来在聚会上给你的朋友留下深刻印象——但它作为一种教育工具是极其糟糕的。

# c++ - 成员函数检查：使用 C++11 特性实现编译时检查

> ID：14403941
> 
> 赞同：4
> 
> 时间：2013-01-18T17:05:31.823
> 
> 标签：c++, c++11, c++-concepts

我已经读过 C++11 有足够的静态检查（编译时间），以便实现 C++11（已删除）的概念检查的很大一部分。*（我在最近关于删除概念的问题的评论中读到了这一点...... - 这个问题很快就被关闭了，因为没有建设性）。*

下面的 C++03 代码仅检查类中是否存在成员函数（我的模板类希望在该类上工作）。以下是搜索的 4 个成员函数，我总是使用相同的模式：

*   一个 typedef 来定义函数原型的 typedef
*   如果类型名 TExtension 没有定义这样的成员函数，或者它有不同的原型，则调用 static_cast 会中断编译

这是代码：

```
template <typename TExtension>
class
{
...
    void checkTemplateConcept()
    {
        typedef unsigned long (TExtension::*memberfunctionRequestedId)();
        static_cast<memberfunctionRequestedId>(&TExtension::getRequestId);

        typedef eDirection (TExtension::*memberfunctionDirection)();
        static_cast<memberfunctionDirection>(&TExtension::getDirection);

        typedef eDriveWay (TExtension::*memberfunctionDriveWay)();
        static_cast<memberfunctionDriveWay>(&TExtension::getDriveWay);

        typedef unsigned long (TExtension::*memberfunctionCycleId)();
        static_cast<memberfunctionCycleId>(&TExtension::getCycleId);
    }
} 
```

这是我代码的某些部分，但它完全基于**C++03**。我很乐意用那些**新的 C++11 特性**重写它……这里应该用什么来代替？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T17:16:42.110

使用 C++11，您可以使编译器打印好的错误消息，`static_assert`如下所示：

```
typedef unsigned long (TExtension::*required_type)();
typedef decltype(&TExtension::getRequestId) actual_type;

static_assert(std::is_same<required_type, actual_type>::value,
     "The type of getRequestId must be unsigned long (C::*)()"); 
```

现在，如果成员函数的类型不匹配，编译器将打印这条有用的消息：

```
"The type of getRequestId must be unsigned long (C::*)()" 
```

如果你愿意，你可以让它更具描述性。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T22:40:06.227

是的，在 C++11 中，SFINAE 被扩展为表达式，因此您可以定义一个特征`is_t_extension`，例如检测成员函数的存在，如下所示：

```
template<class... T>
struct holder
{
    typedef void type;
};

template<class T, class=void>
struct is_t_extension
: std::false_type
{};

template<class T, class=void>
struct is_t_extension<T, typename holder<
    decltype(std::declval<T>().getRequestId),
    decltype(std::declval<T>().getDirection),
    decltype(std::declval<T>().getDriveWay),
    decltype(std::declval<T>().getCycleId)
>::type>
: std::true_type
{}; 
```

现在这只是检查他们的存在。通过一些工作，您可以扩展上述内容以检测有效签名，或者您可以使用[Tick](https://github.com/pfultz2/Tick)库来编写特征，这看起来更清晰：

```
TICK_TRAIT(is_t_extenstion)
{
    template<class T>
    auto requires_(T&& x) -> TICK_VALID(
        returns<unsigned long>(x.getRequestId),
        returns<eDirection>(x.getDirection),
        returns<eDriveWay>(x.getDriveWay),
        returns<unsigned long>(x.getCycleId)
    );
}; 
```

然后在您的班级中，您可以只使用 a`static_assert`来报告错误：

```
template <typename TExtension>
class foo
{
    static_assert(is_t_extension<TExtension>(), "Not a TExtension");
}; 
```

或者，如果您想允许专业化，您可以使用`TICK_CLASS_REQUIRES`：

```
template <typename TExtension, class=void>
class foo;

template <typename TExtension>
class foo<TExtension, TICK_CLASS_REQUIRES(is_t_extension<TExtension>())>
{
    ...
}; 
```

# php - 如何找到两个表之间的差异？

> ID：14403943
> 
> 赞同：1
> 
> 时间：2013-01-18T17:05:43.197
> 
> 标签：php, mysql

我有一个 MySQL 数据库 5.1 版。我有两个表**Table_A**将始终保留其中的记录。**Table_B**将仅用于比较差异。是否有通过 PHP 的 MySQL 查询函数来比较行并告诉我**Table_B**上缺少哪些行。

**表_A**

```
user    name
 1      bob
 1      joe
 1      sally
 1      matt 
```

**表_B**

```
user    name
 1      bob
 1      joe
 1      sally
 1      john 
```

当 PHP 查询运行时，我将如何比较**Table_A**与**Table_B**？我只需要告诉我它`matt`不再存在，它将添加`john`到**Table_A**。

最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:07:51.463

```
SELECT name FROM Table_A WHERE name NOT IN (SELECT name FROM Table_B) 
```

# c++ - 在构造函数调用中添加括号会导致 xlc C++ 编译器中出现重复参数错误

> ID：14403946
> 
> 赞同：3
> 
> 时间：2013-01-18T17:05:50.930
> 
> 标签：c++, parameters, constructor, parentheses, xlc

我们正在创建一种域特定语言，该语言生成必须在 gcc 和 IBM xlc（AIX 版本 10.1）编译器下编译的 C++ 代码。

一个特定的代码片段生成了在 gcc 下运行良好的 C++ 代码，但在 xlc 下就不行了。我已将代码修改为仍会触发编译错误的最小情况：

```
//bug183.h
class emptyList
{};

extern emptyList weco;

class otherClass
{
        public:
                otherClass();
                otherClass(const int & p);
                otherClass(const emptyList & e);
                int geta() {return a;}
        private:
                int a;
};

class someClass
{
        public:
                someClass();
                someClass(const someClass & other);
                someClass(const otherClass & p1, const otherClass & p2);
                void exportState();

        private:
                otherClass oc1;
                otherClass oc2;

};

//bug183.cpp
#include "bug183.h"
#include <iostream>

emptyList weco = emptyList();

otherClass::otherClass() {a = 0;}
otherClass::otherClass(const int & p) {a = p;}
otherClass::otherClass(const emptyList & e) {a = 1000;}

someClass::someClass() {oc1 = otherClass(); oc2 = otherClass();}
someClass::someClass(const someClass & other) {oc1 = other.oc1; oc2 = other.oc2;}
someClass::someClass(const otherClass & p1, const otherClass & p2) {oc1 = p1; oc2 = p2;}
void someClass::exportState() {std::cout << oc1.geta() << " " << oc2.geta() << std::endl;}

int main()
{
        someClass dudi;
        dudi.exportState();

        //this line triggers the error in xlc
        someClass nuni = (someClass(otherClass(weco), otherClass(weco)));
        nuni.exportState();

        return 0;
} 
```

编译它会引发以下错误：“bug183.cpp”，第 21.66 行：1540-0114 (S) 参数名称不得与此函数的另一个参数相同。

但是如果我像这样删除构造函数调用上的括号：

```
someClass nuni = someClass(otherClass(weco), otherClass(weco)); 
```

错误消失。此外，如果我更改另一个在错误消失时`weco`创建的 extern 变量，即使我将构造函数括在括号中，所以可以肯定地说，需要同时存在这两个条件才能显示此错误。`weco`

你们中的一些人可能会问为什么我们不直接删除括号，但这样做*可能会*损害部分正常工作的代码，所以我倾向于理解这种行为是否来自 C++ 编译器，或者如果至少有一个已知的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:04:51.933

我觉得

```
(someClass(otherClass(weco), otherClass(weco))) 
```

被错误地解析为*cast-expression*的第二次生成的开始：

> *强制转换表达式：
>  一元表达式
>  *`(`*类型 ID*`)`*强制转换表达式*

注 § 8.2 第 2 段（强调添加）：

> *由函数样式转换和类型标识*之间的相似性引起的歧义可能出现在不同的上下文中。歧义表现为函数式强制转换表达式和类型声明之间的选择。解决方案是**任何在其句法上下文中可能是*type-id*的构造都应被视为*type-id***。

如果您考虑*cast-expression*中*type-id*的完整语法上下文，则in不可能match ，因为紧随其后的*cast-expression*不能为空。但是，如果您只考虑单令牌前瞻上下文，其中*type-id*必须后跟，则 8.2(2) 可能适用。不过，我并不是真的倾向于相信该标准的意图是只考虑单标记前瞻。*`...``(..);``type-id`*`)`*`)`***

 *****编辑** 报告为 gcc bug [50637](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56037)。您可能想向 xlc 提交类似的错误报告。

由于 gcc 4.7.2 似乎标记了与 xlc 相同的错误。我玩了一下 gcc，并说服自己，问题在于 gcc 在发现带括号的表达式不能是*type-id之前标记了**type-id*中的错误（即两个具有相同名称的参数） 。

 *这是一个例子：

```
#include <iostream>
#include <utility>

static const int zero = 0;
int main() {
  // Consistent with 8.2[2]
  // Example 1\. Invalid cast.
  // Here, 'int(int(zero))' is a type-id, so the compiler must take
  // the expression to be a cast of '+3' to a function.
  std::cout << (int(int(zero))) + 3 << std::endl;
  // Example 2: No error.
  // The parenthesized expression cannot be a type-id in this context
  std::cout << (int(int(zero))) << std::endl;
  // Example 3: Syntax error: zero redefined.
  // Here the parenthesized expression could be a type-id, so it must
  // be parsed as one, even though the type-id is invalid.
  std::cout << (std::pair<int,int>(int(zero), int(zero))) + 3 << std::endl;

  // Apparently not consistent with 8.2[2]
  // Here the parenthesized expression can't be a type-id, as in example 2.
  // However, the type-id triggers a syntax error, presumably before gcc
  // figures out that it's not a cast-expression.
  std::cout << (std::pair<int,int>(int(zero), int(zero))) << std::endl;

  return 0;
} 
```

[在 lws 上](http://liveworkspace.org/code/zZ0I9%240)查看。（在 gcc 和 clang 之间切换以查看差异。）

基于上述分析，问题是过早触发类型错误，这是一种可能的解决方法：

1）为weco添加别名：

```
emptyList& weco_alias = weco; 
```

2) 使用以下之一：

```
someClass nuni = (someClass(otherClass(weco), otherClass(weco_alias))); 
```

这适用于 gcc 4.7.2 和 clang 3.2 ( [lws](http://liveworkspace.org/code/40Swp1%240) )。****

# ajax - fancyBox AJAX 表单提交后点击返回

> ID：14403947
> 
> 赞同：6
> 
> 时间：2013-01-18T17:05:51.417
> 
> 标签：ajax, forms, fancybox, campaign-monitor

不确定这是否可能，但我有一个像这个小提琴这样的 AJAX 表单：

[http://jsfiddle.net/nicorellius/GfeEf/](http://jsfiddle.net/nicorellius/GfeEf/)

在我的网站上，它运行良好。我使用 JavaScript 在表单中进行了简单的验证，但是如果用户通过 JavaScript，则会向用户显示一个[Campaign Monitor](http://help.campaignmonitor.com/topic.aspx?t=13)网页：对他们的验证说是或否。

当用户订阅成功时，如果用户点击返回或使用 CM 反向链接，fancyBox 仍然会填充数据。根据我编写脚本的方式，它应该在提交后关闭。

这是 Linux 和 Windows 中的 Firefox 行为。Chrome 实际上会清除页面并删除 fancyBox 表单。AJAX 部分在这里：

```
$.ajax({
    type       :  "POST",
    cache      :  false,
    url        :  "http://<comapny_name>.createsend.com/a/b/c/abcdef/",
    data       :  $(this).serializeArray(),
    //  I've tried both of these commented out pieces to no avail.
    //beforeSend :  function() {  
                      //$.fancybox.close(true);
                  //},
    //success    :  function(data) {
                      //$.fancybox.close(true);
                  //}
}); 
```

因此，尽管添加：

```
success : function() {
              $.fancybox.close(true);
          } 
```

到 AJAX 脚本，提交后我无法关闭它。

**编辑**

我还应该指出，这种现象似乎发生在 Firefox、Safari 和 Opera 上。Chrome 的行为与我预期的一样（例如，当单击返回链接时，我会重新加载新页面）。CM 页面`javascript:history.go(-1)`用于将我送回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:08:37.347

看起来您可能想要答案中的代码：[How to close fancybox after Ajax Submit?](https://stackoverflow.com/questions/9313918/how-to-close-fancybox-after-ajax-submit)

（这里是提取和修改的部分）

```
var fancyboxProxy = $.fancybox; //declared before $.ajax

//and then modify your success to:
success : function() {
          fancyboxProxy.close();
      } 
```

我还会尝试一个简单的`alert()`或`conosle.log()`在您的成功函数中确定您正在接收成功事件，如果您正在接收该事件，那么您知道这是您用来隐藏花式框的代码的具体问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T00:02:03.143

我不知道 Campaign Monitor 但为什么不在文件加载时强制关闭您的fancybox？

```
$(document).ready(function(){
  $.fancybox.close(true);
} 
```

# mysql - MySQL 搜索非英文字符 - o = ø 等

> ID：14403948
> 
> 赞同：2
> 
> 时间：2013-01-18T17:05:57.537
> 
> 标签：mysql, collation

我将 mySQL 排序规则设置为 utf8_general_ci 并且尽管我的搜索不区分变音符号，即 LIKE 'test' 返回 'tést'，但我想要进行的一些搜索失败，特别是 LIKE 'host' 不会返回'主持人'。

两个问题：是否有一个表格可以显示特定排序规则的等效字符？有没有办法在 mySQL 中将两个字符设置为等效字符作为替代？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:22:24.327

要回答第一个问题，您可以参考 collat [​​ion-charts.org](http://collation-charts.org/mysql60/by-charset.shtml)。这有点痛苦，因为您需要手动搜索每个排序规则，但它会向您展示它们是如何堆叠的。

MySQL 手册中的相关部分也可以在[这里](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)找到。

至于您的第二个问题，我不确定您是否可以对特定角色进行显式覆盖；但是，如果您愿意，您可以创建自己的自定义字符集。

[您可以从 MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/adding-collation.html)中阅读有关创建自定义排序规则的信息。

# c - 生成一个介于 1 和 N-1 之间的随机数

> ID：14403951
> 
> 赞同：1
> 
> 时间：2013-01-18T17:06:03.260
> 
> 标签：c, random

> **可能重复：**
> [如何从一个范围内生成一个随机数 - C](https://stackoverflow.com/questions/2509679/how-to-generate-a-random-number-from-within-a-range-c)

你将如何生成一个介于 1 和 N-1 之间的随机数，其中 N 是用户输入的数字？

到目前为止，我的代码是：

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
    int number = 0; //number variable
    printf("This program will ask you for a number, an integer, and will print out a    random number from the range of your number 1, to N-1.");//output that explains the program's purpose and use to the user.
    //gets the input
    fgets(buffer, sizeof(buffer), stdin);
    sscanf(buffer, "%d", &number); //gets the input and stores it into variable number

    return (0); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:09:51.483

这是随机参考的链接。

[http://www.cplusplus.com/reference/cstdlib/rand/](http://www.cplusplus.com/reference/cstdlib/rand/)

您可以使用

数 = 兰德（） % n + 1;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:11:12.180

根据您希望数字的“随机”程度，您可以使用`rand()`标准 libc 中的函数。此函数将生成 0 和 RAND_MAX 之间的数字。然后，您可以使用模运算获得良好范围内的结果。

请注意，此生成器（LCG）**既不**适合加密应用**，也不**适合科学应用。

如果您想要更合适的生成器，请查看 Mersenne Twister 等生成器（尽管仍然不是加密安全的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:12:17.500

尝试这样的事情： -

```
unsigned int
randomr(unsigned int min, unsigned int max)
{
       double x= (double)rand()/RAND_MAX;

       return (max - min +1)*x+ min;
} 
```

查看此链接：- [http://c-faq.com/lib/randrange.html](http://c-faq.com/lib/randrange.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:08:29.790

你需要看看[rand](http://unixhelp.ed.ac.uk/CGI/man-cgi?srand%203)。一点数学，你有一个解决方案。

# lotus-notes - Lotus Notes 中的货币总和

> ID：14403952
> 
> 赞同：2
> 
> 时间：2013-01-18T17:06:11.167
> 
> 标签：lotus-notes, lotusscript, lotus-formula

我们设计了带有可编辑字段的 LN 表单。用户在可编辑字段中输入金额。我们正在使用“CCur”将这些金额转换为货币。实际问题是用户以逗号（，）或点（。）的形式输入带小数点分隔符的金额。将金额转换为货币时，不考虑小数点和千位分隔符。示例：用户输入如下金额：Amount1 = 2090,Amount2 = 1500,90 和 Amount3 = 800 在当前情况下，TOTAL AMOUNT 计算为 152980.00，应该是 4390.90 我怎样才能做到这一点？我们在 LN 中是否有用户特定的设置来自动处理这些事情？

问候，基肖尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:37:54.123

听起来您的货币格式可能设置不正确，因此用于输入值 1500,90 的客户端的语言环境假设逗号是千位分隔符，句点是小数分隔符。

[这是要签出的文档的一部分。](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_ABOUT_DISPLAYING_NUMBERS_OR_CURRENCY.html) 您可能需要确认表单上的字段设置以查看是否已指定自定义货币格式。否则，看客户的用户偏好说什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:22:55.643

对于这个问题，我不清楚你为什么使用逗号作为小数分隔符，我猜这不是存储货币价值的正式方式。我能够了解。这是你的要求。只是把这个作为一个建议。好的，我们有字段属性，首先您将字段类型更改为数字。并设置字段控件属性，数字格式为货币，将用户首选项更改为自定义。在那里你可以找到两种启用的设置。在这里，您将千位分隔符更改为不同的符号。但我想你不能给十进制或千位多个分隔符。此外，如果您为这两件事提供相同的符号。这将是冲突。

我的意见-根据您的要求，在应用 Ccur() 之前，您确实将逗号替换为点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T03:07:47.803

@Ramkumar：我不同意。将字段设置设置为数字和“用户设置”，而不是“自定义”。用户需要使用正确的小数点，如果他们在一个使用句点作为小数点的国家，他们使用那个，如果他们在一个他们使用逗号作为小数点的国家，他们使用那个。Kishore，您可以在数字字段上添加字段验证以确保该值是数字。为此使用@IsNumber。

# flyway - 如果数据库版本错误，则停止应用程序

> ID：14403956
> 
> 赞同：0
> 
> 时间：2013-01-18T17:06:18.770
> 
> 标签：flyway

我有一个在 JBoss 中运行的 Web 应用程序，我在命令行模式下使用 FlyWay 在数据库版本之间迁移。我想使用 Spring Framework 将 Flyway 集成到我的应用程序中，并且只有在 db 版本错误时才停止部署到 Web 服务器。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:59:00.073

首先，我**强烈建议在应用程序启动时迁移数据库，**这样就不会出现不匹配的情况。

如果这不是一个选项，您可以实施自定义逻辑来检查`Flyway.info()`所需版本的结果。

# android - Android SDK 管理器和 AVD 管理器不会运行

> ID：14403963
> 
> 赞同：1
> 
> 时间：2013-01-18T17:06:27.813
> 
> 标签：android, eclipse, sdk, avd

我在使用 Android SDK 和 AVD 管理器时遇到了很多问题。它们中的任何一个都不会运行 android-sdk 目录或 Eclipse 中的可执行文件。

但是，我可以通过从命令提示符运行 android.bat 来运行 SDK 管理器。从那里我可以从工具菜单进入 AVD 管理器。然而，这不是最佳的。

我在 32 位平台上运行 Windows XP。我正在运行 Java 1.6，并且安装了 Android SDK 20.0.3。在 Eclipse 中，我使用的是 4.2 并安装了最新的 Android 插件。

根据过去的研究，我已经验证 find_java 实际上是在找到正确的 java。

有一次我可以从 Eclipse 启动 SDK 管理器，但不能从可执行文件启动。直到我添加了几个 SDK 版本，我才能从 Eclipse 运行 AVD 管理器。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T13:41:00.710

删除`~/.android`并再次运行它。（为我工作。）

# python - 在 scipy.optimize.leastsq 中使用预分配的缓冲内存拟合函数

> ID：14403966
> 
> 赞同：2
> 
> 时间：2013-01-18T17:06:34.727
> 
> 标签：python, memory-management, numpy, scipy, data-fitting

我正在尝试使用`scipy.optimize.leastsq`使用预分配内存来存储残差的 fit 函数。我有数百万次非线性拟合，时间很关键。我在 中编写了 fit 函数`C`，我注意到`scipy.optimize.leastsq`当 fit 函数只是返回对作为输入获得的缓冲存储器的引用时，它不能正常工作。`Py_INCREF`当我注意到问题可以在 pure 中重现时，我以为我搞砸了s `Python`。这是一些说明问题的模型代码（实际问题具有不同的拟合函数并且要复杂得多）：

```
import numpy as np
import scipy.optimize as opt

# the mock-up data to be fitted
x = np.arange(5.)
noise = np.array([0.0, -0.02, 0.01, -0.03, 0.01])
y = np.exp(-x) + noise

# preallocate the buffer memory
buf = np.empty_like(x)

# fit function writing residuals to preallocated memory and returning a reference 
def dy(p, x, buf, y):
    buf[:] = p[0]*np.exp(-p[1]*x) - y
    return buf

# starting values (true values are [1., 1.])
p0 = np.array([1.2, 0.8])

# leastsq with dy(): DOESN'T WORK CORRECTLY
opt.leastsq(dy, p0, args=(x, buf, y))
# -> (array([ 1.2,  0.8]), 4) 
```

为了使其正常工作，我必须将 fit 函数包装到一个复制中：

```
# wrapper that calls dy() and returns a copy of the array
def dy2(*args): 
    return dy(*args).copy()

# leastsq with dy2(): WORKS CORRECTLY
opt.leastsq(dy2, p0, args=(x, buf, y))
# -> (array([ 0.99917134,  1.03603201]), 1) 
```

...但是制作副本显然首先会破坏使用缓冲存储器！作为旁注，`opt.fmin`也可以像这样使用缓冲存储器（但实际上对于我的应用程序来说太慢了）：

```
def sum2(p, x, buf, y):
    dy(p, x, buf, y)
    return buf.dot(buf)

opt.fmin(sum2, p0, args=(x, buf, y))
# Optimization terminated successfully.
#     Current function value: 0.001200
#     Iterations: 32
#     Function evaluations: 63
# -> array([ 0.99915812,  1.03600273]) 
```

任何想法为什么在上面的例子中`scipy.optimize.leastsq`可以正常工作`dy2()`而不是正常工作？`dy()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:55:45.567

好的，我认为这就是这里发生的情况：底层`FORTRAN`例程`LMDIF`提供了带有内存的用户定义函数 in `*fvec`，结果将存储在其中。这个指针可能指向暂存内存，因为`LMDIF`需要缓存几个函数评估的结果来估计雅可比。

由于从 调用用户定义的函数，不能直接使用`Python`in 的内存，因此包装器的工作方式是先评估函数，*然后*将结果处理到。在进入之前，会调用一次用户自定义函数来找出输出数组的形状。`*fvec``raw_multipack_lm_function()``Python`*`*fvec``LMDIF`*

 *出现问题是因为第一次函数评估的内存然后`LMDIF`作为原始传递给`*fvec`，就好像它是新的一次性内存一样。`LMDIF`继续使用它来存储第一个函数评估，然后再次使用不同的`*fvec`. 但是在带有 的示例中`dy()`，用户函数在将结果复制到所需的内存之前，会覆盖上一次函数调用的内存`LMDIF`。这愚蠢`LMDIF`地认为结果永远不会改变，因此退出拟合参数对拟合质量没有影响的情况。

我认为这是`minpack_lmdif()`from中的一个错误`scipy/optimize/__minpack.h`，因为它假定用户定义的函数总是返回新的一次性内存，但情况并非如此`dy()`（这似乎是编写 fit 函数的一种完全合法的方式）。下面`git diff`说明了一个简单的修复：

```
diff --git a/scipy/optimize/__minpack.h b/scipy/optimize/__minpack.h
index 2c0ea33..465724b 100644
--- a/scipy/optimize/__minpack.h
+++ b/scipy/optimize/__minpack.h
@@ -483,7 +483,7 @@ static PyObject *minpack_lmdif(PyObject *dummy, PyObject *args) {
   qtf = (double *) ap_qtf->data;
   fjac = (double *) ap_fjac->data;
   ldfjac = dims[1];
-  wa = (double *)malloc((3*n + m)* sizeof(double));
+  wa = (double *)malloc((3*n + 2*m)* sizeof(double));
   if (wa == NULL) {
     PyErr_NoMemory();
     goto fail;
@@ -492,12 +492,15 @@ static PyObject *minpack_lmdif(PyObject *dummy, PyObject *args) {

   /* Call the underlying FORTRAN routines. */
   n_int = n; /* to provide int*-pointed storage for int argument of LMDIF */
-  LMDIF(raw_multipack_lm_function, &m, &n_int, x, fvec, &ftol, &xtol, &gtol, &maxfev, &epsfcn, diag,
-    
+  LMDIF(raw_multipack_lm_function, &m, &n_int, x, wa+3*n+m, &ftol, &xtol, &gtol, &maxfev, &epsfcn, d
+
   RESTORE_FUNC();

   if (info < 0) goto fail;           /* Python error */

+  /* Copy final residuals back to initial array */
+  memcpy(fvec, wa+3*n+m, m*sizeof(double));
+
   free(wa);
   Py_DECREF(extra_args); 
   Py_DECREF(ap_diag); 
```

所以我们分配`m`更多的暂存空间元素`LMDIF`并使用额外的内存作为初始`*fvec`。这可以防止调用用户函数时发生内存冲突。要返回正确的最终残差，`memcpy()`需要将最终结果存储在原始数组中。

与 dy() 的原始示例一样，这允许编写 fit 函数以摆脱内存分配。由于整个内部循环`LMDIF`没有内存分配，因此可以预期性能会有所提高。

**更新**

以下是一些计时结果。显然，测试问题非常小且收敛速度很快，因此它可能不代表实际应用。这是补丁版本`scipy.optimize.leastsq`：

```
In [1]: def dy0(p, x, y): return p[0]*np.exp(-p[1]*x) - y

In [2]: %timeit p = opt.leastsq(dy2, p0, args=(x, buf, y))
1000 loops, best of 3: 399 us per loop

In [3]: %timeit p = opt.leastsq(dy, p0, args=(x, buf, y))
1000 loops, best of 3: 363 us per loop

In [4]: %timeit p = opt.leastsq(dy0, p0, args=(x, y))
1000 loops, best of 3: 341 us per loop 
```

所以写入预先分配的内存什么也得不到：直接的实现`dy0()`是最快的。但是，如果我们编写一个更有效的包装器来`LMDIF`更好地利用预分配的内存呢？这是我写的一篇：

```
In [5]: %timeit p = mp.leastsq(dy, (p0.copy(), x, buf, y))
1000 loops, best of 3: 279 us per loop 
```

那是东西。`mp.leastsq`仍然评估一个通用`Python`函数，限制是第一个参数将被结果覆盖，第三个参数是缓冲存储器。但是让我们看看如果我们编写代码会发生`dy()`什么`C`：

```
In [6]: %timeit p = opt.leastsq(fitfun.e2_diff, p0, args=(x, buf, y))
10000 loops, best of 3: 48.2 us per loop 
```

哎哟! 完美矢量化代码的性能如此之多`numpy`（至少对于短数组而言）。让我们使用改进的包装器：

```
In [7]: %timeit p = mp.leastsq(fitfun.e2_diff, (p0.copy(), x, buf, y))
100000 loops, best of 3: 6.94 us per loop 
```

`opt.leastsq`和之间的额外加速`mp.leastsq`来自摆脱元组构建代码和`memcpy`s。最后，`LMDIF`没有回调的原始性能`Python`：

```
In [8]: %timeit p = fitfun.e2_fit(p0.copy(), x, buf, y)
100000 loops, best of 3: 6.13 us per loop 
```

没有太大的不同。所以调用 Python 似乎不会花费太多，但不要让`numpy`你为你做计算！许多后续拟合（我的应用程序）的进一步加速可以来自将暂存内存`wa`用于`LMDIF`.

最重要的是，所有计算现在都返​​回正确的结果！*

# perl - 如何使用 Perl 推入数组数组？

> ID：14403968
> 
> 赞同：1
> 
> 时间：2013-01-18T17:06:40.667
> 
> 标签：perl

下面是一段 Perl 代码。我想循环使用不同的正则表达式 ( `$myo`) 和不同的运算符 ( `$op`) 的几个查询，并将结果保存到一个数组数组而不是一个大`@result`数组。

即，结果数组 for`MYO[0-9]*$`将是每个运算符`$results[0][0]`, `$results[0][1]`... 和`MYO[0-9]*R$`, `$results[1][0]`,的数组`$results[1][1]`。

有任何想法吗？

```
my @tech_ops =  ("AR","DB","GM","LW","MM","SA");
  my @results;

    for my $myo (qw(MYO[0-9]*$ MYO[0-9]*R$ MYO[0-9]*T$ MYO[0-9]*U$)) {
      foreach $op (@tech_ops)
        {
           $sth->execute($myo, $date_stop, $date_start,$op) 
         or die "Couldn't execute query for $myo: " . $sth->errstr;
           push @results, $sth->fetchrow_array;
         }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T17:10:11.650

使用`fetchall_arrayref`方法而不是`fetchrow_array`方法。

所以只需替换这一行：

```
push @results, $sth->fetchrow_array; 
```

有了这条线：

```
push @results, $sth->fetchall_arrayref; 
```

[这是所有 DBI 语句处理程序方法的文档。](http://search.cpan.org/~timb/DBI-1.623/DBI.pm#Statement_Handle_Methods)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T17:21:53.630

```
my @tech_ops =  ("AR","DB","GM","LW","MM","SA");
my @results;

for my $myo (qw(MYO[0-9]*$ MYO[0-9]*R$ MYO[0-9]*T$ MYO[0-9]*U$)) {
    my @myo_results;
    foreach $op (@tech_ops) {
        $sth->execute($myo, $date_stop, $date_start,$op) 
            or die "Couldn't execute query for $myo: " . $sth->errstr;
        push @myo_results, $sth->fetchrow_array;
    }
    push @results, \@myo_results;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:17:47.487

您可以只使用数组引用：

```
my $ref;
for my $i (1..10) {
   for my $j (1..10) {
        push @{$ref->[$i]}, $j;
    }
} 
```

这样就可以了。

编辑：这将创建对 10x10 矩阵的引用。

# android - 无法在 Android 中使用自定义数组适配器进行搜索？

> ID：14403971
> 
> 赞同：-1
> 
> 时间：2013-01-18T17:06:46.807
> 
> 标签：android, listview, android-arrayadapter

我无法从中搜索`listview`，我尝试了各种方法，但它对我不起作用（没有错误）。我有其他搜索方式，但我想让这种方式成为可能。

这是代码

```
public class MainActivity extends Activity implements TextWatcher   {

CustomAdapter mAdapter;
ListView mListview;
EditText search;
List<String> tempCity, cityNames;
String list[];

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    init();

    bindComponents();

    addListeners();
}

private void addListeners() {
    // TODO Auto-generated method stub

    search.addTextChangedListener(this);
}

private void init() {
    // TODO Auto-generated method stub

    mPos = new ArrayList<Integer>();
    tempCity = new ArrayList<String>();
    cityNames = new ArrayList<String>();
    list = getResources().getStringArray(R.array.cityList);
    cityNames.addAll(Arrays.asList(list));

}

private void bindComponents() {
    // TODO Auto-generated method stub

    mListview = (ListView) findViewById(R.id.cityList);

    mAdapter = new CustomAdapter();
    search = (EditText) findViewById(R.id.eTsearch);
    mListview.setAdapter(mAdapter);

}

public class CustomAdapter extends ArrayAdapter<String> {

    public CustomAdapter() {
        super(MainActivity.this, android.R.layout.simple_list_item_1,
                cityNames);
        // TODO Auto-generated constructor stub

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return cityNames.size();
    }

    @Override
    public String getItem(int pos) {
        // TODO Auto-generated method stub
        return cityNames.get(pos);
    }

    @Override
    public long getItemId(int pos) {
        // TODO Auto-generated method stub
        return pos;
    }

    @Override
    public View getView(int pos, View v, ViewGroup vGroup) {
        // TODO Auto-generated method stub

        View row = v;

        if (row == null) {

            row = getLayoutInflater().inflate(R.layout.main_row, null);

        }

        TextView mCityTv = (TextView) row.findViewById(R.id.itemTv);
        mCityTv.setText(cityNames.get(pos));

        return row;
    }

}

@Override
public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // TODO Auto-generated method stub

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub

    mAdapter.getFilter().filter(s.toString());
}
 } 
```

任何帮助将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:36:56.493

1) 调用`mListview.setTextFilterEnabled(true);`ListView 启用过滤

`CustomAdapter`2）为您的类创建一个相关的构造函数。您需要传递上下文以及各种资源/数据。阅读它：http: [//developer.android.com/reference/android/widget/ArrayAdapter.html](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

**或者**

在此处使用`TextWatcher` [链接](https://stackoverflow.com/questions/10355971/how-to-filter-listview-through-edittext)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:45:02.083

我必须切换另一种按`Implementing Filterable`类别搜索的方式

请看我给出的类似[**答案**](https://stackoverflow.com/a/14260239/1278196)

# prestashop - 修改 prestashops 搜索算法

> ID：14403975
> 
> 赞同：1
> 
> 时间：2013-01-18T17:07:06.013
> 
> 标签：prestashop

我在 prestashop 1.5.3 中添加了一些数据库表，其中包含额外的产品数据。现在我想修改 prestashop 中的搜索算法以包含这些表。

我猜想对应的代码会在classes/search.php中找到，但是修改这段代码并没有改变任何东西。我什至删除了整个文件，搜索功能继续工作。

谁能指出我正确的方向并告诉我在哪里可以找到 prestashops 搜索代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:59:09.857

搜索代码实际上在 /classes/Search.php 中。我不明白为什么搜索仍在使用此文件为空...

请不要修改核心文件，您宁愿在覆盖的文件中添加您的逻辑：

> /覆盖/类/Search.php

# javascript - Twitter Bootstrap 模式、HTML 还是 Javascript？

> ID：14403976
> 
> 赞同：1
> 
> 时间：2013-01-18T17:07:07.100
> 
> 标签：javascript, html, twitter-bootstrap

我最近用 Twitter-bootstrap 参与了一个 Django 项目，我的经验主要是后端，我的 Javascript 知识不是很好。我在我的项目中实现了几种模式，但我处理它们的方式是纯 HTML。正如您在文档[Bootstrap modal docs](http://twitter.github.com/bootstrap/javascript.html#modals)中看到的那样，可以使用 HTML 或 Javascript 处理模态。我的 HTML 模式工作得非常好，但是在需要从这种 2 路解决方案中提取出最好的东西时，我需要两个具体答案的帮助：

1.  哪种方法（HTML 或 Javascript）对用户更敏感？
2.  选择其中一个（相对于另一个）（HTML vs. JS）有什么好处？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:14:30.880

HTML 方式实际上仍然使用 JavaScript。您只是在告诉 JS 在您的 HTML 中使用不同的属性做什么。所以这两种方式对用户来说都是一样的。

我想说，如果您不需要访问任何方法而只是使用模态的基本功能，那么您这样做的方式是有意义的。

# ios - 在 Cordova 中打开后关闭 AdMob 广告，适用于 iOS

> ID：14403977
> 
> 赞同：3
> 
> 时间：2013-01-18T17:07:13.590
> 
> 标签：ios, plugins, admob, cordova, phonegap-plugins

当我将bannerView 设置为隐藏时，我的应用上仍然有一个白框。广告消失了，但它占据的空间现在被一个白框挡住了。

我正在使用 XCode 4.5.2、Cordova 2.2 和 Google AdMob Ads Sdk iOS 6.2.1

我正在使用这个插件[https://github.com/ellemayo/phonegap-plugins-1/tree/master/iOS/AdMobPlugin](https://github.com/ellemayo/phonegap-plugins-1/tree/master/iOS/AdMobPlugin)

我也使用这个答案中的代码：[How to toggle admob view from MainViewController using Cordova](https://stackoverflow.com/questions/12070879/how-to-toggle-admob-view-from-mainviewcontroller-using-cordova)

```
(void)hideAd:(NSMutableArray *) 参数
      withDict:(NSMutableDictionary *)options {
    CDVPluginResult *pluginResult;
    NSString *callbackId = [参数弹出];

    如果（！self.bannerView）{
        // 尽量防止在没有先createBannerView的情况下调用requestAd
        // 被调用。
        pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR
                                         messageAsString:@"AdMobPlugin:"
                        @"不存在广告视图"];
        [self writeJavascript:[pluginResult toErrorCallbackString:callbackId]];
        返回;
    }
    BOOL isHidden = (BOOL)[[options objectForKey:@"isHidden"] boolValue];
    self.bannerView.hidden = isHidden;

    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK];
    [self writeJavascript:[pluginResult toSuccessCallbackString:callbackId]];
}

```

我用这个javascript调用它：

```
  window.plugins.AdMob.hideAd({
                                            'isHidden'：真
                                            },
                                            功能（）{}，
                                            功能（）{}
                                            );

```

# c# - Nuget dll 位于 /packages 文件夹中，当升级到生产时我们应该更改为 /bin 吗？

> ID：14403979
> 
> 赞同：1
> 
> 时间：2013-01-18T17:07:16.703
> 
> 标签：c#, asp.net, nuget

似乎 nuget 包存储在我们的应用程序 /packages 文件夹中。

我很困惑，因为我看不到 /bin 中的 dll（这是我们用来升级到生产的文件夹）。

我应该只更改对 /bin 的引用中的路径并复制 local = true 吗？

只是想确认一下，因为我很困惑为什么它去了 /packages。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:15:13.087

不。如果您使用 bin 作为构建的输出目录，则不应从中引用任何内容。您应该有一个单独的位置可以引用您的 DLL。当一个项目构建时，它会将所有必要的 DLL/EXE 复制到 /bin 文件夹。当您进行清理时，这些程序集将被删除。

使用 /bin 也可能会导致您的构建模式（调试/发布）出现问题，当它们全部混淆时，您如何确保引用正确的模式。

这个单独的位置看起来可能是您的 /packages 目录，尽管需要更多信息才能确定。

当我必须这样做时，我会在项目根目录上创建一个“lib”文件夹，将第 3 方或预构建的程序集放在那里，然后从那里引用它们。Copy local=true 会将它们复制到我从中运行（或复制）程序的 /bin 文件夹中。如果我正在开发一套程序，“lib”将是我的所有程序都可以从中提取的某个共享位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:47:11.237

是的，将本地副本设置为“true”将是正确的方法。如果您不希望在 ..\Packages 文件夹中提取包并希望它位于集中位置 - 例如在源代码管理或公共 lib 文件夹的根目录，您可以在 nuget.config 文件中添加存储库路径。更多细节在这里@ [http://docs.nuget.org/docs/release-notes/nuget-2.1#Specify_%e2%80%98packages%e2%80%99_Folder_Location](http://docs.nuget.org/docs/release-notes/nuget-2.1#Specify_%e2%80%98packages%e2%80%99_Folder_Location)

# android - 加粗单项 ListFragment

> ID：14403982
> 
> 赞同：0
> 
> 时间：2013-01-18T17:07:37.050
> 
> 标签：android, android-layout

我想让我的 ListFragment 的一些 Itam 加粗，另一个不加粗（如下图所示）

代码是：

```
 public class ItemListFragment extends ListFragment {

         @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         DummyItem i0 = new DummyItem("0", "Welcome" + S.getUsername());
         DummyContent.addItem(i0);

                 //useless code

         DummyItem ichat = new DummyItem(String.valueOf(j), "Table Chat");
         DummyContent.addItem(ichat);
         j++;
         DummyItem iblackboard = new DummyItem(String.valueOf(j), "Black Board");
         DummyContent.addItem(iblackboard);
         setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(getActivity(),
            android.R.layout.simple_list_item_activated_1,
            android.R.id.text1, DummyContent.ITEMS));

}
 } 
```

非常感谢

![在此处输入图像描述](../Images/7cab566555a0468b86c514e3a0813d94.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:14:13.477

您需要一个自定义列表适配器。这是一个教程[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# php - PHP 是否对数组设置内存限制？

> ID：14403992
> 
> 赞同：14
> 
> 时间：2013-01-18T17:08:20.383
> 
> 标签：php, arrays, xdebug, suhosin

我在 PHP 中有一个奇怪的内存问题。我认为某些东西只允许数组最大为 0.25M。看来该脚本在崩溃之前最多只使用了大约 6M。

这是 xdebug 的输出：

![在此处输入图像描述](../Images/b1c37d1bb6ed18cf11ec5cdd2233479a.png)

这是它正在调用的函数。sql查询的结果是大约800行文本。

```
public function getOptions(){
    $sql = "select Opt,
                   Code,
                   Description
            from PCAOptions";

    $result = sqlsrv_query($this->conn,$sql);

    $arrayResult = array();
    echo ini_get('memory_limit'); //this confirms that my memory limit is high enough
    while($orderObject = sqlsrv_fetch_object($result,'PCA_Option')){
        array_push($arrayResult, $orderObject);
    }
    return $arrayResult;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:36:26.647

所以，我不知道它是如何或为什么起作用的，但我通过从我的 .htaccess 文件中注释掉这两行来解决问题：

```
#    php_value memory_limit 1024M
#    php_value max_execution_time 18000 
```

我这样做是因为我注意到 phpinfo() 在“master”和“local”两列中为这些设置返回了不同的值。

我的 php.ini 有 memory_limit=512M 和 max_execution_time=3000，而我的 .htacces 文件有上述值。我认为 .htaccess 只会覆盖 php.ini 中的任何内容，但我猜它会导致冲突。这可能是php中的一个可能的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:41:56.157

一些 PHP 发行版、安全包和 Web 主机采取了许多步骤来防止用户在运行时通过`ini_set`. 最有可能的候选者是[suhosin](http://www.hardened-php.net/suhosin/configuration.html#suhosin.memory_limit)安全包。

这个较旧的[Stack Overflow 问题](https://stackoverflow.com/questions/2161784/cannot-increase-memory-limit-with-ini-set)还有许多其他建议。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-20T09:33:14.720

当使用我知道会绕过我的服务器 PHP 内存限制的“大”脚本时，我总是在脚本的开头设置这个变量。一直在工作。

```
ini_set("memory_limit","32M"); //Script should use up to 32MB of memory 
```

# r - 如何在R中检索函数的值

> ID：14403996
> 
> 赞同：0
> 
> 时间：2013-01-18T17:08:30.543
> 
> 标签：r, function

在 R 中调用函数时，如何检索结果值。例如，我使用了 'roc' 函数，我需要提取 AUC 值和 CI（在以下示例中分别为 0.6693 和 0.6196-0.7191）。

```
> roc(tmpData[,lenCnames], fitted(model), ci=TRUE)

Call:
roc.default(response = tmpData[, lenCnames], predictor = fitted(model),     ci = TRUE)

Data: fitted(model) in 127 controls (tmpData[, lenCnames] 0) < 3248 cases (tmpData[, lenCnames] 1).
Area under the curve: 0.6693
95% CI: 0.6196-0.7191 (DeLong) 
```

我可以使用以下内容来获取这些带有关联文本的值。

```
> z$auc
Area under the curve: 0.6693
> z$ci
95% CI: 0.6196-0.7191 (DeLong) 
```

有没有办法只获取值而不是文本。

我现在知道如何使用“正则表达式”或“strsplit”函数来获取这些值，但我怀疑应该有其他方法可以直接访问这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:32:39.890

提问时使用可重复的示例很有帮助。最好也参考您要询问的库（“pROC”），因为它没有使用基本 R 加载。`pROC`具有从对象中提取`auc`和`ci.auc`对象的`roc`函数。

```
>library("pROC")
>data(aSAH)
# Basic example
>z <- roc(aSAH$outcome, aSAH$s100b,
    levels=c("Good", "Poor"))

# Examining the class of 'auc' output shows us that it is also of class 'numeric'
> class(auc(z))
[1] "auc"     "numeric"
# calling 'as.numeric' will extract the value
> as.numeric(auc(z))
[1] 0.7313686

# calling 'as.numeric' on the 'ci.auc' object extracts three values.
as.numeric(ci(z))
[1] 0.6301182 0.7313686 0.8326189

# The ones we want are 1 and 3
> as.numeric(ci(z))[c(1,3)]
[1] 0.6301182 0.8326189 
```

使用 、 和 函数`str`通常`class`会`attributes`帮助您弄清楚如何从对象中获取您想要的东西。