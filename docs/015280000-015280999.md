# StackOverflow 问答 15280000-15280999

# regex - 如何从正则表达式模式中仅捕获姓氏？

> ID：15280001
> 
> 赞同：0
> 
> 时间：2013-03-07T19:27:26.580
> 
> 标签：regex, perl

团队

我编写了一个 Perl 程序来验证姓氏、名字和年份的格式（标点符号等）的准确性。如果特定条目不遵循指定的模式，则突出显示该条目以进行修复。

例如，我的输入文件有类似的文本行：

```
<bibliomixed id="bkrmbib5">Abdo, C., Afif-Abdo, J., Otani, F., &amp; Machado, A. (2008). Sexual satisfaction among patients with erectile dysfunction treated with counseling, sildenafil, or both. <emphasis>Journal of Sexual Medicine</emphasis>, <emphasis>5</emphasis>, 1720–1726.</bibliomixed> 
```

我的程序工作得很好，也就是说，如果任何条目不符合模式，脚本就会产生错误。上述输入文本不会产生任何错误。但下面是一个错误示例，因为**Rose AJ在****Rose**之后缺少逗号：

```
NOT FOUND: <bibliomixed id="bkrmbib120">Asher, S. R., &amp; Rose A. J. (1997). Promoting children’s social-emotional adjustment with peers. In P. Salovey &amp; D. Sluyter, (Eds). <emphasis>Emotional development and emotional intelligence: Educational implications.</emphasis> New York: Basic Books.</bibliomixed> 
```

从我的正则表达式搜索模式中，是否可以捕获所有姓氏和年份，所以我可以生成一个文本前缀到每一行，如下所示？

```
<BIB>Abdo, Afif-Abdo, Otani, Machado, 2008</BIB><bibliomixed id="bkrmbib5">Abdo, C., Afif-Abdo, J., Otani, F., &amp; Machado, A. (2008). Sexual satisfaction among patients with erectile dysfunction treated with counseling, sildenafil, or both. <emphasis>Journal of Sexual Medicine</emphasis>, <emphasis>5</emphasis>, 1720–1726.</bibliomixed> 
```

我的正则表达式搜索脚本如下：

```
while(<$INPUT_REF_XML_FH>){
    $line_count += 1;
    chomp;
    if(/

    # bibliomixed XML ID tag and attribute----<START>
    <bibliomixed
    \s+
    id=".*?">
    # bibliomixed XML ID tag and attribute----<END>

    # --------2 OR MORE AUTHOR GROUP--------<START>
    (?:
    (?:
    # pattern for surname----<START>
    (?:(?:[\w\x{2019}|\x{0027}]+\s)+)? # surnames with spaces
    (?:(?:[\w\x{2019}|\x{0027}]+-)+)?  # surnames with hyphens
    (?:[A-Z](?:\x{2019}|\x{0027}))?  # surnames with closing single quote or apostrophe O’Leary
    (?:St\.\s)? # pattern for St.
    (?:\w+-\w+\s)?# pattern for McGillicuddy-De Lisi
    (?:[\w\x{2019}|\x{0027}]+)  # final surname pattern----REQUIRED
    # pattern for surname----<END>
    ,\s
    # pattern for forename----<START>
    (?:
    (?:(?:[A-Z]\.\s)+)?  #initials with periods
    (?:[A-Z]\.-)? #initials with hyphens and periods <<Y.-C. L.>>
    (?:(?:[A-Z]\.\s)+)?  #initials with periods
    [A-Z]\. #----REQUIRED
    # pattern for titles....<START>
    (?:,\s(?:Jr\.|Sr\.|II|III|IV))?
    # pattern for titles....<END>
    )
    # pattern for forename----<END>
    ,\s)+
    #---------------FINAL AUTHOR GROUP SEPATOR----<START>
    &amp;\s
    #---------------FINAL AUTHOR GROUP SEPATOR----<END>

    # --------2 OR MORE AUTHOR GROUP--------<END>
    )? 

    # --------LAST AUTHOR GROUP--------<START>

    # pattern for surname----<START>
    (?:(?:[\w\x{2019}|\x{0027}]+\s)+)? # surnames with spaces
    (?:(?:[\w\x{2019}|\x{0027}]+-)+)?  # surnames with hyphens
    (?:[A-Z](?:\x{2019}|\x{0027}))?  # surnames with closing single quote or apostrophe O’Leary
    (?:St\.\s)? # pattern for St.
    (?:\w+-\w+\s)?# pattern for McGillicuddy-De Lisi
    (?:[\w\x{2019}|\x{0027}]+)  # final surname pattern----REQUIRED
    # pattern for surname----<END>
    ,\s
    # pattern for forename----<START>
    (?:
    (?:(?:[A-Z]\.\s)+)?  #initials with periods
    (?:[A-Z]\.-)? #initials with hyphens and periods <<Y.-C. L.>>
    (?:(?:[A-Z]\.\s)+)?  #initials with periods
    [A-Z]\. #----REQUIRED
    # pattern for titles....<START>
    (?:,\s(?:Jr\.|Sr\.|II|III|IV))?
    # pattern for titles....<END>
    )
    # pattern for forename----<END>

    (?: # pattern for editor notation----<START>
    \s\(Ed(?:s)?\.\)\.
    )? # pattern for editor notation----<END>

    # --------LAST AUTHOR GROUP--------<END>
    \s
    \(
    # pattern for a year----<START>
    (?:[A-Za-z]+,\s)? # July, 1999
    (?:[A-Za-z]+\s)? # July 1999
    (?:[0-9]{4}\/)? # 1999\/2000
    (?:\w+\s\d+,\s)?# August 18, 2003
    (?:[0-9]{4}|in\spress|manuscript\sin\spreparation) # (1999) (in press) (manuscript in preparation)----REQUIRED
    (?:[A-Za-z])? # 1999a
    (?:,\s[A-Za-z]+\s[0-9]+)? # 1999, July 2
    (?:,\s[A-Za-z]+\s[0-9]+\x{2013}[0-9]+)? # 2002, June 19–25
    (?:,\s[A-Za-z]+)? # 1999, Spring
    (?:,\s[A-Za-z]+\/[A-Za-z]+)? # 1999, Spring\/Winter
    (?:,\s[A-Za-z]+-[A-Za-z]+)? # 2003, Mid-Winter
    (?:,\s[A-Za-z]+\s[A-Za-z]+)? # 2007, Anniversary Issue
    # pattern for a year----<END>
    \)\.
    /six){
        print $FOUND_REPORT_FH "$line_count\tFOUND: $&\n";
        $found_count += 1;
    } else{
        print $ERROR_REPORT_FH "$line_count\tNOT FOUND: $_\n";
        $not_found_count += 1;
    } 
```

谢谢你的帮助，

普雷姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:09:12.523

您的所有子模式都是非捕获组，以`(?:`. 这通过许多因素减少了编译时间，其中之一是未捕获子模式。

要捕获模式，您只需在需要捕获的部分周围加上括号。因此，您可以删除非捕获断言或在需要它们的`?:`地方放置括号。[http://perldoc.perl.org/perlretut.html#Non-capturing-groupings](http://perldoc.perl.org/perlretut.html#Non-capturing-groupings)`()`

我不确定，但是，从您的代码中，我认为您可能正在尝试使用前瞻断言，例如，您使用空格测试姓氏，如果没有，则使用连字符测试姓氏。这不会每次都从同一个点开始，它要么匹配第一个例子，要么不匹配，然后继续用第二个姓氏模式测试下一个位置，正则表达式是否会测试第一个子模式的第二个名字是什么我不确定。[http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind](http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind)

```
#!usr/bin/perl

use warnings;
use strict;

my $line = '123 456 7antelope89';

$line =~ /^(\d+\s\d+\s)?(\d+\w+\d+)?/;

my ($ay,$be) = ($1 ? $1:'nocapture ', $2 ? $2:'nocapture ');

print 'a: ',$ay,'b: ',$be,$/;

undef for ($ay,$be,$1,$2);

$line = '123 456 7bealzelope89';

$line =~ /(?:\d+\s\d+\s)?(?:\d+\w+\d+)?/;

($ay,$be) = ($1 ? $1:'nocapture ', $2 ? $2:'nocapture ');

print 'a: ',$ay,'b: ',$be,$/;

undef for ($ay,$be,$1,$2);

$line = '123 456 7canteloupe89';

$line =~ /((?:\d+\s\d+\s))?(?:\d+(\w+)\d+)?/;

($ay,$be) = ($1 ? $1:'nocapture ', $2 ? $2:'nocapture ');

print 'a: ',$ay,'b: ',$be,$/;

undef for ($ay,$be,$1,$2);

exit 0; 
```

对于捕获整个模式，第三个示例的第一个模式没有意义，因为这告诉正则表达式在捕获模式组的同时不捕获模式组。这在第二模式中是有用的，它是细粒度模式捕获，因为捕获的模式是非捕获组的一部分。

```
a: 123 456 b: 7antelope89
a: nocapture b: nocapture 
a: 123 456 b: canteloupe 
```

一个小点点滴滴

```
 id=".*?" 
```

可能会更好

```
 id="\w*?" 
```

id 名称需要是 _alphanumeric iirc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:33:41.953

更改此位

```
# pattern for surname----<END>
    ,?\s 
```

这现在意味着一个可选的，后跟空格。如果人的姓氏是“Bunga Bunga”，它将不起作用

# javascript - 在 Javascript 中显示所有 ().html

> ID：15280003
> 
> 赞同：0
> 
> 时间：2013-03-07T19:27:29.427
> 
> 标签：javascript, jquery, html, if-statement

抱歉标题中没有描述，很难解释。

所以我有一个简单的注册页面，并在我的代码中创建了一堆函数来检查诸如用户名长度、确保密码匹配等内容。

问题是，如果用户输入的错误不止一个，它只会在底部显示一个错误。

这里是 JSfiddle：http: [//jsfiddle.net/LCBradley3k/xqcJS/19/](http://jsfiddle.net/LCBradley3k/xqcJS/19/)

Javascript：

```
$('#join').on('click', function () {

    var correct = true;

    $('input[type="text"], input[type="password"]').each(function (indx) {
        var $currentField = $(this);
        if ($currentField.val() === '') {
            $currentField.addClass('empty');
            correct = false;
            $currentField.one('keydown', function () {
                $currentField.removeClass('empty');
            });
        } else {
            $currentField.removeClass('empty');
        }

    });

    function userLength() {
        var x = $('input[name="user"]').val();
        if (x.length < 6) {
            $('#answer').html('Less than six characters.');
            $('input[name="user"]').addClass('empty');
            return false;
        } else {
            return true;
        }
    }

    function passwordCheck() {
        var x = $('input[name="password"]').val();
        var y = $('input[name="passwordcheck"]').val();
        if (x === y) {
            return true;
        } else {
            $('#answer').html('Two different passwords');
            $('input[name="password"], input[name="passwordcheck"]').addClass('empty');
            return false;
        }

    }

    function validateForm() {
        var x = $('input[name="email"]').val();
        if (x.indexOf('@') !== -1 && x.lastIndexOf(".") !== -1) {
            return true;
        } else {
            $('#answer').html('Not a valid email');
            $('input[name="email"]').addClass('empty');
            return false;
        }
    }

    if (correct) {
        if (userLength()) {
            if (passwordCheck()) {
                if (validateForm()) {

                    $('#answer').html('Thank You!');
                    setTimeout(function () {
                        $('.inputs').hide("slide", {
                            direction: "up"
                        }, 1000);
                    }, 2000);
                }
            }
        }
    } else {
        $('#answer').html('Please fill highlighted fields.');
    }
}); 
```

你可以看到他们都用 .html() 编辑了#('#answer') div。但是当有多个错误时，只显示一个。修复该错误并按下按钮后，它将显示下一个错误。我希望它们都显示在列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:47:54.010

做你想做的事有两个问题。

`if`首先，由于您的嵌套语句，您仅在第一个通过时才继续检查。

其次，您正在用`#answer`消息替换 html，这意味着即使您进行每次检查，您也只会看到最后一次的结果。

一个简单的解决方法是取消嵌套 if 语句，并保留一个跟踪整体通过状态的变量。其次，不要使用`.html()`, 使用`.append()`，但请确保`#answer`在开始检查之前清除。

```
correct &= checkFilled();
correct &= userLength();
correct &= passwordCheck();
correct &= validateForm();

if (correct) {
    // ...
} 
```

小提琴：http: [//jsfiddle.net/jtbowden/9cFKW/](http://jsfiddle.net/jtbowden/9cFKW/)

注意：我填写了您的表格，检查它自己的功能，以便更好地使用此方法。

您可以做一些更花哨的事情，例如在数组上推送错误消息，然后在最后检查数组是否有错误并附加所有消息，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:35:21.170

我创建了一个可能会有所帮助的[小提琴。](http://jsfiddle.net/wgANS/1/)这个想法是创建一个包含错误的数组，如下所示：

```
var errors = [];
errors.push("Error 1");
errors.push("Error 2"); 
```

当您逐步完成验证时，每次遇到错误时，您只需`push`将错误字符串添加到数组中。当您完成验证时，您需要将这些错误编译成 html，就像可以附加到您的`$('#answer')`元素一样。在这种情况下，项目被编译成一个无序列表。您可以更改此设置以满足您的需要。

```
var content = "<ul>";
for(var a = 0, len = errors.length; a < len; a++) {
    content += "<li>" + errors[a] + "</li>";   
}
content += "</ul>";
$('#answer').html(content); 
```

html 是动态构建的并存储在变量中`content`。`content`然后附加到显示错误的 html 元素（在您的情况下`answer`）。

# python - python中的格式化程序

> ID：15280004
> 
> 赞同：3
> 
> 时间：2013-03-07T19:27:29.777
> 
> 标签：python

我正在一本 python 书中进行练习，我对这段代码中发生的事情感到有些困惑。

```
formatter = "%r %r %r %r"

print formatter % (1, 2, 3, 4)
print formatter % ("one", "two", "three", "four")
print formatter % (True, False, False, True)
print formatter % (formatter, formatter, formatter, formatter)
print formatter % (
    "I had this thing.",
    "That you could type up right.",
    "But it didn't sing.",
    "So I said goodnight."
) 
```

作者没有解释每次“打印”后“格式化程序”在做什么。如果我删除它们，所有打印出来的内容都完全相同。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:30:34.260

不，它不会打印出完全相同的东西。`formatter %`如果您使用该部分，则没有逗号和括号。

如果*扩展*格式化程序会更清楚。我建议你使用：

```
formatter = "One: %r, Two: %r, Three: %r, Four: %r" 
```

反而。

格式化程序充当模板，每个模板都`%r`充当右侧元组中值的占位符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:31:15.523

`formatter`是一个字符串。因此，第一行与以下内容相同：

```
"%r %r %r %r" % (1, 2, 3, 4) 
```

它调用`repr`右侧元组中的每个项目，并用`%r`结果替换相应的项目。当然，它对

```
formatter % ("one", "two", "three", "four") 
```

等等。

请注意，您通常还会看到：

```
"%s %s %s %s" % (1, 2, 3, 4) 
```

它调用`str`而不是`repr`. （在您的示例中，我认为`str`并为所有这些对象返回相同的内容，因此如果您更改为使用而不是，`repr`输出将完全相同）`formatter``%s``%r`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T19:39:48.057

这是字符串格式化的经典格式，`print "%r" % var`将打印 var 的原始值，四个 %r 期望在 % 之后传递 4 个变量。

一个更好的例子是：

```
formatter = "first var is %r, second is %r, third is %r and last is %r"
print formatter % (var1, var2, var3, var4) 
```

使用格式化程序变量只是为了避免在打印中使用长行，但通常不需要这样做。

```
print "my name is %s" % name
print "the item %i is $%.2f" % (itemid, price) 
```

`%.2f`是浮点数，逗号后有 2 个值。

您可能希望尝试一种较新的字符串格式变体：（如果您至少使用 2.6）

```
print "my name is {name} I'm a {profession}".format(name="sherlock holmes", profession="detective") 
```

更多信息：

[http://www.python.org/dev/peps/pep-3101/](http://www.python.org/dev/peps/pep-3101/)

[http://pythonadventures.wordpress.com/2011/04/04/new-string-formatting-syntax/](http://pythonadventures.wordpress.com/2011/04/04/new-string-formatting-syntax/)

# c# - 如何设置 OpenFileDialog 以接受 http:// 以及本地文件？

> ID：15280005
> 
> 赞同：1
> 
> 时间：2013-03-07T19:27:29.957
> 
> 标签：c#, .net, openfiledialog

对于 C# Forms 应用程序，我想允许 OpenFileDialog 返回 url 以及本地和网络文件名。我该如何设置它来做到这一点？

```
using (OpenFileDialog dlg = new OpenFileDialog())
{
    dlg.Title = FormStrings.Framework_rdlAddFileTitle;
    dlg.CheckFileExists = true;
    dlg.DefaultExt = "rdlx";
    dlg.Filter = @"RDL(X) files|*.rdlx;*.rdl|RDLX files|*.rdlx|RDL files)|*.rdl|All files|*.*";
    dlg.Multiselect = false;
    if (dlg.ShowDialog(GetParentHWnd(doc)) != DialogResult.OK)
        return; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:34:38.613

看起来 OpenFileDialog 不支持它[——MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)。

我将为包含该文件的 URL 创建一个文本框。然后在您的代码中解析并获取它。

# vb.net - VS 2010：如何更改项目属性>设置的顺序？

> ID：15280009
> 
> 赞同：3
> 
> 时间：2013-03-07T19:27:38.553
> 
> 标签：vb.net, visual-studio-2010, visual-studio

我有几十个应用程序设置，我想以不同于输入的顺序查看它们。是否可以更改顺序？

我在 app.config 文件中找到了这些条目，但在 Visual Studio 中更改顺序并没有什么不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T23:35:37.433

我明白你想做什么......

跟着这些步骤。

1）。右键单击位于应用程序属性文件夹中的 Settings.settings 文件。
2）。点击“属性”
3）。弹出“属性”窗口时，选择“设置”文件的“完整路径”文本，然后复制。
4）。打开记事本。
5）。转到文件-> 在记事本中打开
6)。将之前复制的完整路径粘贴到设置文件中。
7）。该文件应如下所示：

![在此处输入图像描述](../Images/91479077bed854c53e170d956f04eaf3.png)

8）。重新排序标记为“Setting”的节点，以按照您希望它们的顺序放置它们。例如，如果您希望“Setting”出现在“Jeremy”之前，请将文件更改为如下所示：

![在此处输入图像描述](../Images/7536c39bca1d488fb3d684f38b2b39d6.png)

9）。保存文件。下次你重新打开它时，它应该是你想要的顺序。

**或者，我会为您经常更改的设置创建一个前缀，您实际上可以通过设置键名按字母顺序对列表进行排序。**

# ruby - 如何在我的方法中修补模块

> ID：15280012
> 
> 赞同：0
> 
> 时间：2013-03-07T19:27:41.610
> 
> 标签：ruby

我需要包含`EventMachine::Deferrable`在 to 中`Faraday::Response`，但前提是在反应器循环运行时创建响应。我知道我可以在响应对象而不是类中包含一个模块，但在我的情况下，由于上下文代码的编写方式，我不能这样做。

我有一个在循环运行时调用的方法，也许我可以在那里做？下面的代码不起作用，因为它只是在方法的命名空间中创建了一个新类。

```
def f
  module Faraday
    class Response
      include EventMachine::Deferrable
    end
  end
  ...
end 
```

语言专家有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:47:46.680

到目前为止，这是我的做法。有没有更好的方法？

```
module Faraday
  class Response
    alias :initialize_old :initialize
    def initialize env=nil
      initialize_old env
      extend EventMachine::Deferrable if EventMachine.reactor_running?
    end
  end
end 
```

# python - 从网站上的产品目录中抓取价格数据

> ID：15280020
> 
> 赞同：-4
> 
> 时间：2013-03-07T19:28:09.257
> 
> 标签：python, web-scraping

我对 urllib 很熟悉，因为我在课堂上使用它来解析来自 Google 货币转换器的数据，但现在我想创建一个从 nextworth.com 网站获取价格的网络爬虫。

正如您所看到的，这并不像从一页中获取数据（就像您获取黄金价格或诸如此类的那样）那么容易，但是需要回答许多产品和许多问题才能显示最终价格。这就是它的工作方式：

`1.`访问网站 ( [http://www.nextworth.com](http://www.nextworth.com) )

`2.`单击产品类别（例如 iPhone）[http://nextworth.com/search/1/cat/iphones/](http://nextworth.com/search/1/cat/iphones/)

`3.`点击实际产品（例如 iPhone 4 16GB ATT）[http://nextworth.com/product/293814/cat/iphones/apple_iphone_4_16gb_ (black)_-_at&t/](http://nextworth.com/product/293814/cat/iphones/apple_iphone_4_16gb_(black)_-_at&t/)

那么你所拥有的是一系列问题，以便给你一个即时报价。因此，下一步将是

`4.`开机功能齐全 - 是

`5.`破裂的显示器 - 否

最后，显示价格。这就是我要抓取和存储的内容。现在我正在努力只获得完美条件物品的价格，因为它更容易，但请记住，如果第 4 步为“否”且第 5 步为“否”，或者第 4 步 - 是且第 5 步 - 是，我也想要价格，等等

所以我想我的问题是，为这个程序编写代码背后的伪代码（逻辑步骤）是什么样的？这样做是否可行，还是需要永远和大量的代码行？我是否应该先为每个类别创建几个功能，然后在其中我拥有每个产品（我觉得这将花费很长时间）。或者我应该为每个类别和嵌入式函数使用类？

编辑：我想我应该问一下 Python 是否会成为一种很好的语言，希望在 Python 中做到这一点是可行的，因为到目前为止我只知道这一点和 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:54:13.550

对于一般的网站抓取，您可以使用一个不错的[网络抓取模块。](http://docs.webscraping.com/index.html)好消息是它可以利用 QtWebkit 模块，因此您甚至可以处理大量 javascript 网站。

考虑到这一点，尽管我必须警告你这种事情。

你正在做的是一个自动化的过程，给定你的要求，看起来好像它会打到很多页面。如果您没有从您要报废的网站获得许可，您可能会因使用可能吸引他们关心的实时人类客户的资源而被他们的服务器阻止。

在这些情况下，您希望处理某种 API。看看网站是否有 API，因为这些对自动化流程**更加**友好，只要你遵守他们的 API 规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T16:01:29.097

Webscraping 库需要您设置某种形式的库以及在您的情况下的集成开发环境，您正在考虑为此选择 python。

我们创建了一个网络抓取即服务平台，让您[只需单击几下即可自动执行网络抓取](https://krake.io)。虽然我们仍在创建 chrome 浏览器扩展的过程中，但我们将在本周末发布其第一个版本。您只需要编写几行 JSON，就可以使用我们为您进行网络抓取。

# visual-studio-2010 - 数据成员的自动完成在 VS2010 中无法正常工作，但适用于方法

> ID：15280023
> 
> 赞同：0
> 
> 时间：2013-03-07T19:28:27.680
> 
> 标签：visual-studio-2010, autocomplete

我最近才注意到这一点，但我不知道它是否有效。

如果我有一个像

```
class Foo
{
public:
    DoStuff();

    bool flag;
}; 
```

我输入

```
Foo f;
f.D 
```

然后是 ctrl+space，我得到了包含的智能感知列表，`DoStuff`我可以按 Enter（也许首先用箭头键选择它），它将被粘贴到编辑器中。

但如果我这样做

```
Foo f;
f.f 
```

紧随其后的是 ctrl+space，`flag`出现在列表中，但如果我尝试使用 enter 选择它，它只会取消列表，不会将任何内容放入编辑器中。

这是一个视觉工作室错误，还是我必须在某处启用的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:21:28.773

尝试按 Ctrl+Alt+Space 重新启用自动完成 如果它不起作用，请执行以下操作

1.  devenv.exe /重置设置
2.  devenv /resetuserdata
3.  转到工具 -> 选项 -> 文本编辑器 -> 所有语言，看看是否检查了语句完成下的所有选项

# google-app-engine - Google App Engine 上的 HTTP 响应标头是否有大小限制？

> ID：15280027
> 
> 赞同：8
> 
> 时间：2013-03-07T19:28:37.723
> 
> 标签：google-app-engine, python-2.7, http-headers

我试图在 apppot 上的某些处理程序代码上运行分析器，并且正在寻找一种方法来显示 pstats 输出而不直接写入响应正文（这对于使用 JSON 等结构化数据响应的处理程序来说是有问题的）。

我决定尝试将输出写入响应标头，并将一些 js 添加到我的 html 渲染处理程序中，这些处理程序可以解析标头及其`console.log()`（结果非常简单且易于使用）。对于非 html 渲染处理程序，我想我可能会尝试构建一个 chrome 扩展来做类似的事情，但是当然，每当我对这样的处理程序进行 ajax 调用时，调用页面（用 js 解析header) 可以介入并处理显示。

当我在 上进行测试时，这一切看起来都不错`dev_appserver`，但后来我部署到 apppot 并发现我的自定义标头从未出现过。我在这个项目中有类似的代码可以跟踪某些操作的执行时间，并且我编写的自定义标头显示得很好。

我假设appspot python运行时进程有一个限制，如果它大于一定长度，则省略标题，但我没有看到开发者网站上任何地方发布的大小。

如果实际上有限制，有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-30T10:36:55.010

# ruby - 试图完善我的黄瓜场景

> ID：15280031
> 
> 赞同：1
> 
> 时间：2013-03-07T19:28:54.963
> 
> 标签：ruby, cucumber, scenarios

我知道其中任何一个都可以，但我正在努力成为 ruby​​/cucumber 社区的更好成员。我有一个故事可以测试我网站的多个部分下是否没有任何链接，它不应该显示。那么这两种方式中哪一种是编写场景的最佳方式。再一次，我知道两者都可以，但我正在寻找**最佳实践**解决方案。我通常会使用选项 B，因为它们都在测试不同的“然后”步骤；但是我已经进行了一些研究，并且我在猜测自己，因为我可以使用相同的给定语句测试所有场景，并且我正在阅读您应该只在更改“给定”和“那么”步骤时才创建一个新场景.

一种。

```
Scenario: A user that cannot access A, B, C, or D
    Given I am a, user without access to A, B, C, or D
    When I navigate to reports
    Then I see the A header
    But I cannot click on A's header
    And I see error message under A stating the user does not have access
    And I do not see the B section
    And I do not see the C section
    And I do not see the D section 
```

**或者**

B.

```
Scenario: A user that cannot access A
    Given I am a, user without access to A
    When I navigate to reports
    Then I see the A header
    And I see error message under A stating the user does not have access
    But I cannot click on A's header

Scenario: A user that cannot access B
    Given I am a, user without access to B
    When I navigate to reports
    Then I do not see the B section

Scenario: A user that cannot access C
    Given I am a, user without access to C
    When I navigate to reports
    Then I do not see the C section

Scenario: A user that cannot access D
    Given I am a, user without access to D
    When I navigate to reports
    Then I do not see the D section 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:35:25.337

我相信最佳实践是将功能分解为各个部分（在这种情况下，场景）

选项 B 更好，因为它遵循单一职责原则（当然可以应用于代码的许多不同部分）。B的写法清晰直接。如果你在 6 个月后回到这个问题，或者一个新开发人员第一次看到这个问题，那么你们都对测试的目标有了很好的了解。

选项 A 似乎做了很多工作，虽然这是一个集成测试，但您应该尽可能保持被测试代码的特定部分独立。问问自己，当这个测试失败时，你会知道具体原因吗？还是您必须开始四处挖掘以查看测试的哪一部分实际上失败了？

在这种情况下，最佳实践提倡使用更小的代码段。如果这些测试开始重复自己（DRY，不要重复自己），您可以开始重构它们（`Background`可能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:38:33.163

粒度场景更可取，因为它们更明确地传达所需的行为，并在出现回归时提供更好的诊断。随着应用程序的发展，小场景更易于维护。长场景会产生“引力”并变得更长。从长远来看，很难弄清楚这些步骤的所有设置和副作用。结果是长期情景不断增长的“引力”。

场景大纲可以使您的测试既细化又简洁。在下面的示例中，一目了然，资源 B、C 和 D 都具有相同的策略，而资源 A 不同：

```
Scenario Outline: A user cannot access an unauthorized resource
    Given I am a user without access to <resource>
    When I navigate to reports
    Then I do not see the <resource> section

    Examples:
        | resource |
        | B        |
        | C        |
        | D        |

Scenario: A user that cannot access A
    Given I am a, user without access to A
    When I navigate to reports
    Then I see the A header
    And I see error message under A stating the user does not have access
    But I cannot click on A's header 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:20:56.853

我会用更易读的东西代替 ABC 或 D，只是认为你奶奶需要理解这个定义，她不会理解 ABCD 的意思。所以让我们这样说

给定一个基本用户.. .. 然后用户看不到编辑工具

给定一个超级用户 .. .. 那么超级用户应该会看到编辑工具

只需尝试将这些 ABCD 加入有意义的事物中，例如组名、级别 n、团队等

那么您将对每个项目之一使用 TestUnits：如果您愿意的话，请使用 ABCD

# symfony - 如何指定用于 Doctrine 2.2 / Symfony 2.2 和 PostgreSQL 的模式？

> ID：15280032
> 
> 赞同：5
> 
> 时间：2013-03-07T19:28:56.850
> 
> 标签：symfony, doctrine-orm

我遇到了与此处报告的问题相同的问题：[Doctrine 2.2 want to recreate all my tables](https://stackoverflow.com/questions/13178207/doctrine-2-2-wants-to-recreate-all-my-tables)

我正在使用 PostgreSQL，我的表在公共模式中。

应用程序/控制台学说：架构：更新想要重新创建我所有的表，显然是因为它正在查看用户架构，而不是公开的。我的 Symfony 应用程序运行良好，因为它看起来有点奇怪。

使用 Symfony 2.2 / Doctrine 2.2 我在哪里指定模式？我似乎在任何文档中都找不到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:45:30.537

如果您使用该`public`模式，则不必做任何特别的事情，因为 PostgreSQL 会自动回退到它。

但是，如果你想指定另一个模式——或者`public`在 PostgreSQL 出于某种原因回退到另一个模式时强制使用该模式——`@Table`注解具有以下[`schema`属性](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/Mapping/Table.php#L33-L36)：

```
use Doctrine\ORM\Mapping\Table;

/**
 * @Table(schema="some_schema")
 */
class Entity 
{
    // ...
} 
```

# shell - C shell 无限打印输出而不会在 get() 处停止

> ID：15280046
> 
> 赞同：1
> 
> 时间：2013-03-07T19:29:44.140
> 
> 标签：shell, unix, operating-system

我正在尝试使用 SIGCHLD 处理程序，但由于某种原因，它会打印我无限发出的命令。如果我删除结构行为它工作正常。

任何人都可以看看它，我无法理解问题所在。提前致谢！！

```
 /* Simplest dead child cleanup in a SIGCHLD handler. Prevent zombie processes
   but dont actually do anything with the information that a child died. */

#include <sys/types.h>
#include <sys/wait.h>
#include <signal.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

typedef char *string;

/* SIGCHLD handler. */
static void sigchld_hdl (int sig)
{
    /* Wait for all dead processes.
     * We use a non-blocking call to be sure this signal handler will not
     * block if a child was cleaned up in another part of the program. */
    while (waitpid(-1, NULL, WNOHANG) > 0) {
    }
}

int main (int argc, char *argv[])
{
    struct sigaction act;
    int i;
    int nbytes = 100;
    char my_string[nbytes];
    string arg_list[5];
    char *str;
    memset (&act, 0, sizeof(act));
    act.sa_handler = sigchld_hdl;

    if (sigaction(SIGCHLD, &act, 0)) {
        perror ("sigaction");
        return 1;
    }

while(1){

    printf("myshell>> ");
    gets(my_string);
    str=strtok(my_string," \n");
    arg_list[0]=str;
    i =1;
    while ( (str=strtok (NULL," \n")) != NULL){
            arg_list[i]= str;
            i++;
        }
    if (i==1)
        arg_list[i]=NULL;
    else
        arg_list[i+1]=NULL;

     pid_t child_pid;
    child_pid=fork();
    if (child_pid == (pid_t)-1){
        printf("ERROR OCCURED");
        exit(0);
        }

    if(child_pid!=0){
        printf("this is the parent process id is %d\n", (int) getpid());
        printf("the child's process ID is %d\n",(int)child_pid);

    }
    else{
        printf("this is the child process, with id %d\n", (int) getpid());
        execvp(arg_list[0],arg_list);
        printf("this should not print - ERROR occured");
        abort();
    }

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:45:05.640

我没有运行你的代码，只是假设：

`SIGCHLD`正在到达并打断`fgets`（我只是假装你没有使用`gets`）。 `fgets`在实际读取任何数据之前返回，`my_string`包含它在前一个循环中具有的标记化列表，你再次分叉，输入`fgets`，它在读取任何数据之前被中断，并无限期地重复。

换句话说，检查 的返回值`fgets`。如果它为 NULL 并且已设置`errno`为 EINTR，则再次调用 fgets。（或设置`act.sa_flags = SA_RESTART`。）

# python - 从 python 调用 awk

> ID：15280050
> 
> 赞同：3
> 
> 时间：2013-03-07T19:29:58.600
> 
> 标签：python, awk, subprocess

我想从 python 调用一个 awk 命令行脚本：

```
os.system('''awk 'BEGIN{FS="\t";OFS="\n"} {a[$1]=a[$1] OFS $2 FS $3 FS $4} END{for (i in a) {print i a[i]}}' 2_lcsorted.txt > 2_locus_2.txt''') 
```

它给出了以下错误：

```
awk: cmd. line:1: BEGIN{FS="    ";OFS="
awk: cmd. line:1:                     ^ unterminated string
awk: cmd. line:1: BEGIN{FS="    ";OFS="
awk: cmd. line:1:                     ^ syntax error
256 
```

当我使用 subprocess.call 使用子进程时，会弹出另一种错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib64/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib64/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

它在 shell 中运行良好，我要做的就是将所有步骤组合在一个 python 脚本中，并且由于某些明显的原因，awk 对于某些处理步骤更好。有人可以解释一下这些错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:34:40.170

您不希望 Python 在将`\n`字符串`\t`提供给`system`. `r"""...."""`按照 jwpat7 的建议使用。另一种可能性是`... OFS="\\n" ...`在字符串中写一些类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:31:03.487

补充一点，使用 PyAwk 可能会更好：pyawk.sourceforge.net 另外，如果您使用的是子进程，问题是您的命令应该被拆分。看，子进程的工作方式与 os.system 有点不同。subprocces 要求 cmd 是一个字符串，而不是一个列表。例如，

```
`os.system('''awk 'BEGIN {FS="\t";OFS="\n"} {a[$1]=a[$1] OFS $2 FS $3 FS $4} 
END {for (i in a) {print i a[i]}}' 2_lcsorted.txt > 2_locus_2.txt''')` 
```

不应该

```
`subprocess.call('''awk 'BEGIN {FS="\t";OFS="\n"} {a[$1]=a[$1] OFS $2 FS $3 FS $4} 
END {for (i in a) {print i a[i]}}' 2_lcsorted.txt > 2_locus_2.txt''')` 
```

那是行不通的。如果您为 subprocess 提供一个字符串，它假定这是您要执行的命令的路径。该命令需要是一个列表。查看 www.gossamer-threads.com/lists/python/python/724330。另外，因为您使用的是文件重定向，所以您应该使用

```
`subprocess.call(cmd, shell=True)` 
```

# twitter-bootstrap - Twitter Bootstrap 从底部对齐下拉菜单

> ID：15280053
> 
> 赞同：2
> 
> 时间：2013-03-07T19:30:03.467
> 
> 标签：twitter-bootstrap

我有一个显示具有动态行数的数据的引导表。最后一个`<td>`包含一个触发器，单击该触发器会显示一个引导下拉菜单。问题是当表格的内容变得太大时，激活该下拉菜单会将其显示在可点击触发器下方，无论它在屏幕上的哪个位置。如果触发器位于页面的最底部，则单击下拉菜单会增加页面高度，用户必须再次向下滚动才能看到下拉菜单的其余部分。

这也有其他含义，例如它可能具有如此轻微（但令人讨厌）的效果，即视口的页面高度将触发滚动条的显示，将页面的宽度减小到足以引起注意，但仅当下拉可见。

twitter bootstrap 有什么方法可以让下拉列表认识到它实际上会垂直延伸到视口之外，如果会，则将其渲染为垂直向上对齐？一种动态`class="dropdown pull-up"`，其中引导程序足够聪明，知道仅在必要时才对齐，以免下拉显示超出视口底部？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T20:01:53.883

是[下拉菜单](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)（请参阅本节中的下拉示例）

确保您使用的是最新版本

```
<div class="btn-group dropup">
  <button class="btn">Dropup</button>
  <button class="btn dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
  </ul>
</div> 
```

# java - 选定包的代码覆盖率

> ID：15280062
> 
> 赞同：1
> 
> 时间：2013-03-07T19:30:38.783
> 
> 标签：java, eclipse, code-coverage, codepro

我正在寻找一种代码覆盖率工具，它可以帮助我找到工作区中选定包的覆盖率。欢迎与 CI 或 Eclipse 相关的解决方案。我知道，我可以根据从 Eclipse 中的代码覆盖率工具获得的数字手动计算。但我不愿意这样做，而是希望依靠自动计算的代码覆盖率。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T12:14:53.093

你可以试试**谷歌 CodePro**，

参考：[https ://developers.google.com/java-dev-tools/codepro/doc/features/codecoverage/code_coverage](https://developers.google.com/java-dev-tools/codepro/doc/features/codecoverage/code_coverage)

# excel - 将多列合并为一个带有标题信息的单元格

> ID：15280063
> 
> 赞同：0
> 
> 时间：2013-03-07T19:30:42.020
> 
> 标签：excel, vba

我正在尝试在我的工作表中创建一个单元格来汇总行中的所有数据。我找到了一种将所有字段组合到第一列的方法，但我还需要它包含标题名称，并且它需要忽略空白字段。（[https://stackoverflow.com/a/13074838](https://stackoverflow.com/a/13074838)）

我的 excel 文件有超过 50 列和 5000 行，所以我认为这可能是宏的工作。关于如何做到这一点的任何想法？

```
╔═════════╦══════╦═════╦═══════════╦═════╕
║总结║姓名║年龄║县║邮编║
╠═════════╬══════╬═════╬═══════════╬═════╕
║║苏║║斯诺霍米什║98144║
║ ║ 鲍勃 ║ 36 ║ 皮尔斯 ║ 98335 ║
║ ║ 帕特 ║ 32 ║ 斯波坎 ║ ║
║║吉姆║40║国王║98101║
╚═════════╩══════╩═════╩═══════════╩═════╕

单元格 A2 将具有以下内容：
姓名：苏
县：斯诺霍米什
邮编：98144

单元格 A3：
姓名：鲍勃
年龄：36
县：皮尔斯
邮编 98335

单元格 A4：
姓名：帕特
年龄：32
县：斯波坎

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:01:22.387

你需要的是一个公式：

1.  使用 IF 函数测试每个信息单元格是否有数据（我假设您将始终拥有名称）。
2.  如果单元格存在，则连接回车符 (CHAR(10)) 的 ASCII 代码的字符表示和该单元格的数据。
3.  请务必打开公式单元格的换行，否则显示的文本不会显示换行符。

生成的公式如下所示。

```
 ="Name: " &B1&
   IF(C1="","",CHAR(10)&"Age: "&C1)&
   IF(D1="","",CHAR(10)&"County: "&D1)&
   IF(E1="","",CHAR(10)&"Zip: "&E1) 
```

您可以使用 LEN 函数将数据（年龄等）看中并缩进相同的数量。

# sql-server-2008 - 在 SQL Server 2008 中创建具有自动递增 ID 列的视图

> ID：15280066
> 
> 赞同：2
> 
> 时间：2013-03-07T19:30:47.750
> 
> 标签：sql-server-2008

我正在创建的视图在使用聚合函数时丢失了主表的主键。

但是，我需要一个唯一的 ID 在我的视图中使用它来创建仪表板。我可以在 SQL Server 2008 中创建一个具有自动递增值的虚拟唯一列吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:34:13.720

您可以使用[ROW_NUMBER(](http://msdn.microsoft.com/en-us/library/ms186734.aspx) ) 函数为每一行生成一个唯一值。

尽管有人可能会问为什么在聚合后需要一个唯一 ID，以及仪表板如何使用任意值而不是例如用于聚合数据的列。

# mysql - SELECT查询将表的行作为MySQL中的列

> ID：15280067
> 
> 赞同：1
> 
> 时间：2013-03-07T19:30:50.877
> 
> 标签：mysql, database, select

我有一个 MySQL 数据库，其中包含两个问题和答案表。每个问题都有一个正确答案和三个错误答案。每个问题总是有四个答案，只有一个是正确的。

这些表是：

```
CREATE TABLE `question` (
  `id_question` smallint(5) unsigned NOT NULL auto_increment,
  `text` varchar(255) collate utf8_unicode_ci default NULL,
  PRIMARY KEY  (`id_question`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `answer` (
  `id_answer` mediumint(8) unsigned NOT NULL auto_increment,
  `id_question` smallint(5) unsigned NOT NULL,
  `is_correct` tinyint(1) NOT NULL,
  `text` varchar(45) collate utf8_unicode_ci default NULL,
  PRIMARY KEY  (`id_answer`,`id_question`),
  KEY `fk_id_question_idx` (`id_question`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

我需要有关选择查询的帮助。我想得到一个表格，其中行中的问题和列中的四个答案（第一个是正确的，然后是其他三个）。到目前为止，我能够得到这样的输出：

```
Question | Answer | Is_Correct
-------------------------------
Question 1   Answer 1-1   1
Question 1   Answer 1-2   0
Question 1   Answer 1-3   0
Question 1   Answer 1-4   0
Question 2   Answer 2-1   1
Question 2   Answer 2-2   0
Question 2   Answer 2-3   0
Question 2   Answer 2-4   0
... 
```

我怎样才能得到以下结果？

```
Question | Correct_Answer | Incorrect_answer1 | Incorrect_answer2 | Incorrect_answer3
--------------------------------------------------------------
Question 1    Answer 1-1    Answer 1-2    Answer 1-3    Answer 1-4
Question 2    Answer 2-1    Answer 2-2    Answer 2-3    Answer 2-4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:54:24.020

您可以使用带有表达式的聚合函数来*透视数据。*`CASE`您可以使用用户定义的变量按问题在每行上实现行号。您的代码将与此类似：

```
select q.text Question,
  max(case when a.is_correct = 1 then a.text end) Correct_answer,
  max(case when a.is_correct = 0 and rn=1 then a.text end) Incorrect_Answer1,
  max(case when a.is_correct = 0 and rn=2 then a.text end) Incorrect_Answer2,
  max(case when a.is_correct = 0 and rn=3 then a.text end) Incorrect_Answer3
from question q
inner join
(
  select a.id_question,
    a.text,
    a.is_correct,
    a.id_answer,
    @row:=case 
            when @prevQ=id_question
              and is_correct = 0
            then @row +1 
            else 0 end  rn,
    @prevA:=id_answer,
    @prevQ:=id_question
  from answer a
  cross join (select @row:=0, @prevA:=0, @prevQ:=0)r
  order by a.id_question, a.id_answer
) a
  on q.id_question = a.id_question
group by q.text
order by a.id_question, a.id_answer 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/a7138/10)。这将结果显示在单独的列中：

```
|   QUESTION | CORRECT_ANSWER | INCORRECT_ANSWER1 | INCORRECT_ANSWER2 | INCORRECT_ANSWER3 |
-------------------------------------------------------------------------------------------
| Question 1 |     Answer 1-1 |        Answer 1-2 |        Answer 1-3 |        Answer 1-4 |
| Question 2 |     Answer 2-1 |        Answer 2-2 |        Answer 2-3 |        Answer 2-4 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:34:57.863

为此构建一个动态数据透视查询需要做很多工作。相反，我可能会做的是使用 MySQL 的[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)聚合函数来创建一个以逗号分隔的`Incorrect_answer`字段列表，同时将其分离`Correct_Answer`为自己的列：

```
SELECT
  question.`text`,
  /* Separate the one where Is_Correct = 1 and discard the others with a MAX() aggregate */
  MAX(CASE WHEN Is_Correct = 1 THEN answer.`text` ELSE NULL END) AS Correct_Answer,
  /* Group the rows where Is_Correct = 0 into a comma-separated list */
  GROUP_CONCAT(CASE WHEN Is_Correct = 0 THEN answer.`text` ELSE NULL END) AS Incorrect_answers
FROM
  question
  JOIN answer ON question.id_question = answer.id_question
GROUP BY Question.`text` 
```

您的应用程序代码收到的结果如下所示：

```
Question     Correct_Answer Incorrect_answers
--------------------------------------------------------------
Question 1    Answer 1-1    Answer 1-2,Answer 1-3,Answer 1-4
Question 2    Answer 2-1    Answer 2-2,Answer 2-3,Answer 2-4 
```

然后在您的应用程序代码中拆分`Incorrect_answers`列变得微不足道，`,`因为它是一个逗号分隔的列表。

例如，在 PHP 中，类似：

```
$incorrect = explode(',', $row['Incorrect_answers']); 
```

或者在 Ruby 或 Python 中：

```
incorrect = incorrect_answers.split(',') 
```

# java - codahale 的“指标”的其他开源替代品？

> ID：15280070
> 
> 赞同：39
> 
> 时间：2013-03-07T19:30:55.700
> 
> 标签：java, monitoring, jmx, metrics, yammer

我遇到了 codahale 的[度量项目](http://metrics.codahale.com/)，我相信它在 Yammer 中使用。我喜欢这个解决方案，但想知道是否还有其他具有类似功能的开源替代方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T20:13:44.760

一些建议：

*   [Perf4J](https://github.com/codehaus/perf4j)：Perf4J 是一组用于计算和显示 Java 代码性能统计信息的实用程序。
*   [ERMA](http://erma.wikidot.com/)：ERMA（Extremely Reusable Monitoring API）是一种仪器 API，旨在适用于所有监控需求。
*   [javasimon](https://code.google.com/p/javasimon/)：Java Simon 是一个简单的监控 API，可让您跟踪并更好地了解您的应用程序。监视器（通常称为 Simons）直接放置在您的代码中，您可以选择是否要计算某些内容或测量时间/持续时间。
*   [Glassbox](http://glassbox.sourceforge.net/glassbox/Home.html)：Glassbox 疑难解答程序是 Java 应用程序的自动疑难解答和监控代理，可通过一键式诊断常见问题。
*   [InfraRED](http://infrared.sourceforge.net/versions/latest/)：InfraRED 是一种用于监控 Java EE 应用程序性能和诊断性能问题的工具。它收集有关应用程序性能各个方面的指标，并使其可用于应用程序的定量分析。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-08T18:03:18.040

Netflix 的[Servo](https://github.com/Netflix/servo)与 Metrics 的精神有些相似。它也是一个基于对要观察的指标进行注释的 Java 库，可以从 JVM 内定期轮询并将其写入后端服务器。它还通过 JMX 公开指标。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T20:55:38.833

还有 JavaMelody 项目

“JavaMelody 的目标是监控 QA 和生产环境中的 Java 或 Java EE 应用程序服务器。它不是一个模拟用户请求的工具，它是一个根据使用情况测量和计算应用程序实际操作统计数据的工具用户的应用程序"

[Java旋律](https://github.com/javamelody/javamelody/wiki)

# weka - Weka分类和预测类

> ID：15280072
> 
> 赞同：1
> 
> 时间：2013-03-07T19:30:59.360
> 
> 标签：weka

我正在尝试使用 Weka 对未标记的字符串进行分类，我不是数据挖掘方面的专家，所以我一直在为不同的术语而苦苦挣扎。我正在做的是在运行 M5Rules 分类器后提供训练数据并设置未标记的字符串，我实际上得到了一个输出，但我不知道这意味着什么：

```
run:
{17 1,35 1,64 1,135 1,205 1,214 1,215 1,284 1,288 1,309 1,343 1,461 1,493 1,500 1,552 1,806 -0.038168} | -0.03816793850062397
-0.03816793850062397 -> 

Results
======

Correlation coefficient                  0     
Mean absolute error                      0     
Root mean squared error                  0     
Relative absolute error                  0      %
Root relative squared error              0      %
Total Number of Instances                1     

BUILD SUCCESSFUL (total time: 1 second) 
```

源代码如下：

```
 public Categorizer(){

    try{

        //***  READ ARRF FILES *///////////////////////////////////////////////////////
        //BufferedReader trainReader = new BufferedReader(new FileReader("c:/Users/Yehia A.Salam/Desktop/dd/training-data.arff"));//File with text examples
        //BufferedReader classifyReader = new BufferedReader(new FileReader("c:/Users/Yehia A.Salam/Desktop/dd/test-data.arff"));//File with text to classify

        // Create trainning data instance
        TextDirectoryLoader loader = new TextDirectoryLoader();
        loader.setDirectory(new File("c:/Users/Yehia A.Salam/Desktop/dd/training-data"));
        Instances dataRaw = loader.getDataSet();

        StringToWordVector filter = new StringToWordVector();
        filter.setInputFormat(dataRaw);
        Instances dataTraining = Filter.useFilter(dataRaw, filter);
        dataTraining.setClassIndex(dataRaw.numAttributes() - 1);

        // Create test data instances
        loader.setDirectory(new File("c:/Users/Yehia A.Salam/Desktop/dd/test-data"));
        dataRaw = loader.getDataSet();
        Instances dataTest = Filter.useFilter(dataRaw, filter);
        dataTest.setClassIndex(dataTest.numAttributes() - 1);

        // Classify
        FilteredClassifier model = new FilteredClassifier();
        model.setFilter(new StringToWordVector());
        model.setClassifier(new M5Rules());
        model.buildClassifier(dataTraining);

        for (int i = 0; i < dataTest.numInstances(); i++) {
             dataTest.instance(i).setClassMissing();
             double cls = model.classifyInstance(dataTest.instance(i));
             dataTest.instance(i).setClassValue(cls);
             System.out.println(dataTest.instance(i).toString() + " | " + cls);
             System.out.println(cls + " -> " + dataTest.instance(i).classAttribute().value((int) cls));

            // evaluate classifier and print some statistics
             Evaluation eval = new Evaluation(dataTraining);
             eval.evaluateModelOnce(cls, dataTest.instance(i));
             System.out.println(eval.toSummaryString("\nResults\n======\n", false));
        }

    }
    catch(FileNotFoundException e){

      System.err.println(e.getMessage());
    }
    catch(IOException i){

      System.err.println(i.getMessage());
    }
     catch(Exception o){

      System.err.println(o.getMessage());
     }
  } 
```

最后是几张截图，以防我在文件夹层次结构中出错： ![未标记的字符串](../Images/78c6e68fb6fd15305b5c08389d1eb7ae.png) ![健康类的训练数据](../Images/8c3c05b8f83c14643a8db730c53ca96f.png) ![旅行类的训练数据](../Images/0c9355624e4eba3b0036915f582b2ffe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:17:47.503

tl;博士：

*   您将类索引设置为随机特征
*   您必须使用分类器，而不是回归算法

问题是如何初始化数据集。虽然 weka 通常将类放在最后一列，但 TextDirectoryLoader 不会。其实不用手动设置类索引，已经设置好了，去掉那几行

```
dataTraining.setClassIndex(dataRaw.numAttributes() - 1);
dataTest.setClassIndex(dataTest.numAttributes() - 1); 
```

（反正第一行是错误的，因为你使用了原始数据集中的属性数量，但是选择了已经过滤的数据集的列。）

如果你然后运行你的代码，你会得到这个：

```
weka.classifiers.functions.LinearRegression: Cannot handle binary class! 
```

正如我已经猜到的那样，M5Rules 不是分类器，而是用于回归。如果您使用类似`J48`or的分类器`RandomForest`，您将获得更合理的输出。换行就好

```
model.setClassifier(new M5Rules()); 
```

至

```
model.setClassifier(new RandomForest()); 
```

* * *

至于你的输出，这就是我所做的：

```
{17 1,35 1,64 1,135 1,205 1,214 1,215 1,284 1,288 1,309 1,343 1,461 1,493 1,500 1,552 1,806 -0.038168} | -0.03816793850062397
-0.03816793850062397 -> 
```

是线条的结果

```
System.out.println(dataTest.instance(i).toString() + " | " + cls);
System.out.println(cls + " -> " + dataTest.instance(i).classAttribute().value((int) cls)); 
```

因此，您会看到实例的特征序列化为[稀疏 ARFF](http://weka.wikispaces.com/ARFF+%28stable+version%29#Sparse%20ARFF%20files)，然后`|`是类。

通常，该类应该是一个整数，但是从[M5Rules](http://weka.sourceforge.net/doc.dev/weka/classifiers/rules/M5Rules.html)的文档中我了解到它是回归问题的分类器，因此在您的情况下，您不会得到离散的类，而是连续的值`-0.03816793850062397`

由于您（错误地）将数字特征设置为类标签，M5Rules 没有抱怨并给您一个输出。如果您使用实际的分类器，您将获得标签“健康”或“旅行”。

其余的是关于分类器性能的标准统计数据，但它们仅对一个分类器实例毫无用处。看起来一个样本被正确分类，所以所有错误都为零。

```
Correlation coefficient                  0     
Mean absolute error                      0     
Root mean squared error                  0     
Relative absolute error                  0      %
Root relative squared error              0      %
Total Number of Instances                1 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T04:30:59.840

万一其他人在使用 M5P 时遇到同样的错误，请尝试查看 Arff 是否只是一个标题或空的。

否则试试

```
model.buildClassifier(....) 
```

代替

```
model.setClassifier(....); 
```

这为我解决了它。

# iphone - 富文本编辑器的保存方法

> ID：15280079
> 
> 赞同：2
> 
> 时间：2013-03-07T19:31:21.393
> 
> 标签：iphone, ios, xcode, ipad

我在下面的地址找到了一个很好的关于制作一个漂亮的富文本编辑器的教程

[http://ios-blog.co.uk/featured-posts/ios-5-rich-text-editing-series/](http://ios-blog.co.uk/featured-posts/ios-5-rich-text-editing-series/)

但是，如果我想构建一个应用程序。我希望可以在我想编辑它的任何时候保存和加载它。我的问题是这种文本编辑应用程序的最佳保存方法是什么？列表？核心数据？我怎样才能做到这一点？

谢谢

# ruby-on-rails - Rails 捆绑器：“在任何来源中都找不到倾斜 1.3.5”

> ID：15280081
> 
> 赞同：6
> 
> 时间：2013-03-07T19:31:32.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rubygems, bundler

我以前从未遇到过这个问题，所以我真的不知道从哪里开始寻找答案......尽管谷歌当然似乎是关于这个话题的一条空路。

当我尝试将我的应用程序推送到 heroku 时，我收到以下消息：

```
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Fetching gem metadata from https://rubygems.org/.........
       Fetching gem metadata from https://rubygems.org/..
       Could not find tilt-1.3.5 in any of the sources
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

我已经破坏了我的 gemset 并多次启动，并且在我的 Gemfile 中完全需要倾斜，但没有运气，我仍然收到此消息。

就像我说的，直到昨天我才收到这个错误，并认为这是一个可以修复的小错误。似乎情况并非如此，我正在挠头，试图弄清楚需要做些什么来解决这个问题。

有什么建议么？

编辑宝石文件

```
source 'https://rubygems.org/'

gem 'rails', '3.2.12'
gem 'thin'
gem 'bcrypt-ruby', '~> 3.0.0'
gem 'bootstrap-sass'
gem 'will_paginate'
gem 'bootstrap-will_paginate'
gem 'jquery-rails'
gem 'rails_autolink'

group :assets do
  gem 'sass-rails', '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg', '0.14.1'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:00:09.790

我遇到了同样的错误。正如 iRichLau[在此评论](https://stackoverflow.com/questions/15280081/rails-bundler-could-not-find-tilt-1-3-5-in-any-of-the-sources/15291273#comment21561029_15280081)中指出的那样，锁定到 1.3.4 或 1.3.6 有效。

在 Gemfile 中：

```
gem 'tilt', '1.3.4' # or '1.3.6' is now out and also works. 
```

然后捆绑：

```
bundle update tilt 
```

确保提交消息与这个幻想错误的荒谬程度相称。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:08:22.633

运行`bundle update`然后`git add`在推动之前应该修复它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T15:45:18.617

当我有 2 个不同版本的亮盒 gem 时，这发生在我身上。

较新的亮盒 gem 需要较新版本的 bundle。

因此，在 deploy.rb 的顶部，我强制将亮盒 gem 版本设置为：

```
gem 'brightbox', '2.3.8' 
```

# php - 复选框和文本不想显示值

> ID：15280087
> 
> 赞同：0
> 
> 时间：2013-03-07T19:31:58.460
> 
> 标签：php, mysql

```
<!DOCTYPE html>
<html>
<head>
<title>Talenquiz2</title>
</head>
<body>

<?php

if (isset($_GET["controleer"]))
  {
  $vraag = $_GET["vraag"];
  $juistantwoord = $_GET["juistantwoord"];
  $foutantwoord1 = $_GET["foutantwoord1"];
  $foutantwoord2 = $_GET["foutantwoord2"];
  $con = mysql_connect("localhost","root","");
  mysql_select_db("dbproject", $con);
  $result = mysql_query("SELECT * FROM tblquizvragen");
  while($row = mysql_fetch_array($result))
  {
  if ($row['vraag'] == $vraag)
    {
    if ($row['juistantwoord'] == $juistantwoord)
     {
     echo "Juist!<br />";
     }
    else
      {
      echo "Fout!<br />";
      }
    }
  }
  mysql_close($con);
  echo "\n<hr />\n";
  }

$aantalvragen=1;
$con = mysql_connect("localhost","root","");
mysql_select_db("dbproject", $con);
$result = mysql_query("SELECT * FROM tblquizvragen WHERE id='". $aantalvragen . "';");
$row = mysql_fetch_array($result); 
```

该程序是一个测验，它提出了 5 个问题，其中 3 个 chckbox 1 是正确的，2 是不正确的。

```
for ($aantalvragen=1; $aantalvragen<=5; $aantalvragen++)
 {
 $row = mysql_fetch_array($result);
 } 
```

她依琳

```
$vraag = $row['vraag'];
$juistantwoord = $row['juistantwoord'];
$foutantwoord1 = $row['foutantwoord1'];
$foutantwoord2 = $row['foutantwoord2'];

mysql_close($con);
?>

<form> 
```

它没有在我的浏览器中显示行的值，它只显示一个打开的文本和一个打开的复选框。

```
<input type="text" name="vraag" value="<?php echo $vraag; ?>" /><br />
<input type="checkbox" name="juistantwoord" value="<?php echo $juistantwoord; ?>" /><br     />
<input type="checkbox" name="foutantwoord1" value="<?php echo $foutantwoord1; ?>" /><br />
<input type="checkbox" name="foutantwoord2" value="<?php echo $foutantwoord2; ?>" /><br />

<input type="submit" value="Controleer je antwoord" name="controleer" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:41:32.443

您的代码对于从数据库中获取不正确

```
for(...) {
   $row = mysql_fetch_array(...);
} 
```

您只需循环 5 行结果，无论有多少行，然后将行数组分配给 $row... 但对每一行都这样做，而无需使用它们。因此，您最终`n-1`会破坏第一行并退出循环，只`n`保存行。

如果您对预期的数据行数有误，您的 5 项循环可能只有一个 4 项结果集要处理，最终行`$row1`值将是 msyql_fetch 在没有时返回的布尔值 FALSE更多数据。

尝试这样的事情：

```
while($row = mysql_fetch_assoc($result)) {
    echo ..... your stuff here ...
} 
```

更可靠，不依赖于已知的可用行数，并且如果根本没有数据就不会输出任何内容。

# jquery - 支持悬停和单击 acordian 菜单的事件委托

> ID：15280093
> 
> 赞同：4
> 
> 时间：2013-03-07T19:32:26.523
> 
> 标签：jquery, event-handling

我正在构建一个垂直手风琴导航，该导航要求显示子导航链接并在悬停或单击.accordionButton 时保持打开状态。

到目前为止，我已经能够让子 .accordionContent 在悬停时展开，但它不会保持打开状态。

我看到了这个 SO 页面：[menu mouseenter mouseleave click](https://stackoverflow.com/questions/13585867/menu-mouseenter-mouseleave-click)，这可能是一个好的开始，但不能让我的头脑围绕在实施中。

这是我的小提琴和标记：

[http://jsfiddle.net/faGMR/8/](http://jsfiddle.net/faGMR/8/)

# HTML

```
<ul id="mainNav">
<li><a class="accordionButton" href="javascript:void(0);">head link 1</a>

    <ul class="accordionContent">
        <li>
            <a href="javascript:void(0);">sub link 1</a>

        </li>
        <li>
            <a href="javascript:void(0);">sub link 2</a>

        </li>
    </ul>
</li>
<li><a class="accordionButton" href="javascript:void(0);">head link 2</a></li>
<li><a class="accordionButton" href="javascript:void(0);">head link 3</a>
    <ul class="accordionContent">
        <li>
            <a href="javascript:void(0);">sub link 1</a>

        </li>
        <li>
            <a href="javascript:void(0);">sub link 2</a>

        </li>
    </ul>
</li>
<li><a class="accordionButton" href="javascript:void(0);">head link 4</a></li>
<li><a class="accordionButton" href="javascript:void(0);">head link 5</a></li>
<li><a class="accordionButton" href="javascript:void(0);">head link 6</a></li>
</ul> 
```

# JS

```
$(document).ready(function () {

$('.accordionContent').hide();

$('.accordionButton').mouseenter(function () {

    $(this).next('.accordionContent').stop().slideToggle("normal");

}, function () {

    $(this).addClass("hover");
    $(this).next('.accordionContent').stop().slideToggle('fast');

}).mouseleave(function () {

    $(this).next('.accordionContent').stop().slideToggle("normal");

}, function () {

    $(this).removeClass("hover");
    $(this).next('.accordionContent').stop().slideToggle('fast');

}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:39:46.797

像[这样的小提琴](http://jsfiddle.net/faGMR/19/)？

```
$(function () {
    var $accContents = $('.accordionContent'),
        $accButtons = $('.accordionButton');

    $accContents.hide();

    $accButtons.on('mouseenter click', function() {
        var $thisContent = $(this).parent().find('.accordionContent');
        if($thisContent.length) {
            $accContents.not($thisContent).slideUp('fast');
            $thisContent.slideToggle('fast');
        }
    });
}); 
```

如果不需要切换（这会使点击过时），请使用`.slideDown('fast')`而不是。`slideToggle`

# java - Hibernate 4.1.9 c3p0 设置，以及与数据库的连接太多

> ID：15280098
> 
> 赞同：5
> 
> 时间：2013-03-07T19:32:45.757
> 
> 标签：java, hibernate, jdbc, c3p0, persistence.xml

我在 Java Web 应用程序（使用 Oracle 11g 数据库）中使用 Hibernate 4.1.9，即使我使用 c3p0 池，似乎也得到了一些失控的连接。

似乎这应该在我的配置文件中使用适当的属性进行管理，但我正在努力正确设置它们。

这是我的 persistence.xml 文件，其中包含属性设置：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

<persistence-unit name="RPRM_PERSISTENCE_UNIT" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider>

<properties>

  <property name="hibernate.connection.username" value="username"/>
  <property name="hibernate.connection.password" value="********"/>        

  <property name="hibernate.connection.url" value="jdbc:oracle:thin:@xxxxx.xxxx.com:1771:xxxxxx"/>
  <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
  <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver"/>

  <property name="hibernate.connection.provider_class" value="org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider" /> <!-- hibernate 4.1.9 -->
  <property name="hibernate.c3p0.acquireIncrement" value="3"/>
  <property name="hibernate.c3p0.maxIdleTime" value="3600"/>
  <property name="hibernate.c3p0.minPoolSize" value="6"/>
  <property name="hibernate.c3p0.maxPoolSize" value="20"/>
  <property name="hibernate.c3p0.maxStatements" value="20"/>
  <property name="hibernate.c3p0.idleConnectionTestPeriod" value="1800"/> <!-- seconds -->
  <property name="hibernate.c3p0.maxConnectionAge" value="100"/>
  <property name="hibernate.c3p0.maxIdleTimeExcessConnections" value="300"/>
  <property name="hibernate.c3p0.testConnectionOnCheckin" value="true"/>
  <property name="hibernate.c3p0.preferredTestQuery" value="select 1 from dual"/>

  <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>

  <property name="hibernate.show_sql" value="false"/>
  <property name="hibernate.format_sql" value="false" />

</properties> 
```

当我启动应用程序时，我看到 Hibernate 正在使用 c3p0 设置的信息：

```
Mar 7, 2013 11:15:21 AM com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1 [built 16-January-2007 14:46:42; debug? true; trace: 10]
Mar 7, 2013 11:15:21 AM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@330d4ac9 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@87961d4a [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 30huhj8tjhzyr1ovdu4t|6196fc, idleConnectionTestPeriod -> 1800, initialPoolSize -> 3, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 100, maxIdleTime -> 3600, maxIdleTimeExcessConnections -> 300, maxPoolSize -> 20, maxStatements -> 20, maxStatementsPerConnection -> 0, minPoolSize -> 6, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@8d40ef6e [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 30huhj8tjhzyr1ovdu4t|1e9c3f, jdbcUrl -> jdbc:oracle:thin:@xxxxx.xxxxx.com:1771:xxxxx, properties -> {user=******, password=******, autocommit=true, release_mode=auto} ], preferredTestQuery -> select 1 from dual, propertyCycle -> 0, testConnectionOnCheckin -> true, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 30huhj8tjhzyr1ovdu4t|fa0094, numHelperThreads -> 3 ]
Mar 7, 2013 11:15:24 AM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.Oracle10gDialect
Mar 7, 2013 11:15:24 AM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
Mar 7, 2013 11:15:24 AM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory 
```

不幸的是，大约每 2 分钟，Oracle 就会注册少量（通常一次 12 个）新连接（**即使没有用户访问应用程序**）

如果我在我的设置中遗漏了一些明显的东西，我深表歉意——我已经浏览了文档，并且网络试图了解所有属性，但可能遗漏了一些东西或设置了错误。

请注意，我在 Tomcat 6.0.14 容器中使用休眠 4.1.9.Final 和 Oracle 11g。

感谢您的时间！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T19:47:11.047

您已设置[`maxConnectionAge`](http://www.mchange.com/projects/c3p0/#maxConnectionAge)为 100 秒。这意味着如果一个连接超过 100 秒，它将被强制关闭，这也意味着如果您的池处于空闲状态，它将每 100 秒创建 6 个新连接。

文档说：

> 秒，实际上是一个生存时间。早于 的连接`maxConnectionAge`将被销毁并从池中清除。这与`maxIdleTime`它指的是绝对年龄不同。即使是一个没有太多空闲的连接，如果它超过 ，也会从池中清除`maxConnectionAge`。零表示没有强制执行最大绝对年龄。

设置`maxConnectionAge`为 0 以禁用此功能或将其设置为更高的数字。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T19:45:45.950

C3P0 正在剔除超过 100 秒的连接。将您设置`maxConnectionAge`为小于 100 秒的激进程度应该可以解决您的问题。

# semantics - 语义相似度结果解释

> ID：15280100
> 
> 赞同：1
> 
> 时间：2013-03-07T19:32:50.220
> 
> 标签：semantics, wordnet

我在这里使用工具执行语义相似性，

我得到以下结果，但无法正确解释它们：

```
apple#n#1,banana#n#1    0.04809463683080774
apple#n#1,banana#n#2    0.13293629283742603
apple#n#2,banana#n#1    0.0
apple#n#2,banana#n#2    0.0 
```

这是代码：

```
URL url = new URL ( "file" , null , "dictionary/3.0/dict" );
        IDictionary dict = new Dictionary ( url ) ;
        dict.open () ;

        // look up first sense of the word " dog "
        IIndexWord idxWord = dict . getIndexWord ( "dog" , POS.NOUN ) ;
        IWordID wordID = idxWord . getWordIDs () . get (0) ; // 1 st meaning
        List <IWordID> wordIDs = idxWord.getWordIDs();

        JWS ws= new JWS ("dictionary", "3.0");

        TreeMap <String,Double> scores1 = ws.getJiangAndConrath().jcn("apple", "banana", "n");
        for (String s:scores1.keySet())
            System.out.println(s+"\t"+scores1.get(s)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:09:27.273

来自[NLTK 文档：](http://nltk.googlecode.com/svn/trunk/doc/howto/wordnet.html)

> Jiang Conrath 相似性返回一个分数，表示两个词义的相似程度，基于最不常见的子类（最具体的祖先节点）的信息内容 (IC) 和两个输入同义词集的信息内容 (IC)。该关系由等式 1 / (IC(s1) + IC(s2) - 2 * IC(lcs)) 给出。

结果为 0 意味着这两个概念根本不相关。接近 1 的结果意味着非常密切的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:18:03.400

你能把用 JAVA 编写的代码源交给我，因为我确实对 Url 变量有一些问题，因此负责执行 LeacockAndChodorow 算法吗？

# mysql - 如何在mysql中将Char字段转换为日期时间字段？

> ID：15280105
> 
> 赞同：2
> 
> 时间：2013-03-07T19:33:13.667
> 
> 标签：mysql, connection-string

我将日期时间作为 Char(30) 存储在表中，我想将它们转换为 mysql 标准日期时间格式。

所以我尝试了这个

```
 SELECT STR_TO_DATE(next_attempt, '%Y-%m-%d %T') as date FROM Table LIMIT 10; 
```

这总是返回 Null ！这是当前格式 (5/16/2011 20:14) 所以在我的 char(30) 字段中我有 (5/16/2011 20:14) 我想将它转换为 (2011-05-16 20: 14:00)

我做错了什么让它继续返回 Null？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:54:06.487

尝试将 "/" 替换为 "," 并使用 '%m,%d,%Y %T'

```
STR_TO_DATE(replace('5/16/2011 20:14','/',','),'%m,%d,%Y %T') 
```

这里工作正常：

```
select STR_TO_DATE(replace('5/16/2011 20:14','/',','),'%m,%d,%Y %T') as date from dual 
```

# hadoop - 使用大而动态的分组/路径存储数据

> ID：15280108
> 
> 赞同：0
> 
> 时间：2013-03-07T19:33:33.977
> 
> 标签：hadoop, apache-pig

我目前有以下猪脚本（为简洁起见，列列表被截断）：

```
REGISTER /usr/lib/pig/piggybank.jar;

inputData = LOAD '/data/$date*.{bz2,bz,gz}' USING PigStorage('\\x7F')
PigStorage('\\x7F')
AS (
SITE_ID_COL                 :int,--                     = Item Site ID
META_ID_COL                 :int,--                 = Top Level (meta) category ID
EXTRACT_DATE_COL            :chararray,--          = Date for the data points
...
)

SPLIT inputData INTO site0 IF (SITE_ID_COL == 0), site3 IF (SITE_ID_COL == 3), site15 IF (SITE_ID_COL == 15);

STORE site0 INTO 'pigsplit1/0/' USING org.apache.pig.piggybank.storage.MultiStorage('pigsplit1/0/','2', 'bz2', '\\x7F');
STORE site3 INTO 'pigsplit1/3/' USING org.apache.pig.piggybank.storage.MultiStorage('pigsplit1/3/','2', 'bz2', '\\x7F');
STORE site15 INTO 'pigsplit1/15/' USING org.apache.pig.piggybank.storage.MultiStorage('pigsplit1/15/','2', 'bz2', '\\x7F'); 
```

它非常适合我想要它做的事情，但实际上至少有 22 个可能的站点 ID，我不确定是否还有更多。我想根据该列动态创建拆分并存储到路径中。最简单的方法是通过 MultiStorage UDF 的两步使用，首先按站点 ID 拆分，然后加载所有这些结果并按日期拆分？这似乎效率低下。我可以通过 GROUP BYs 以某种方式做到这一点吗？似乎我应该能够按站点 ID 分组，然后展平每一行并在其上运行多存储，但我不确定如何将 GROUP 连接到路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:11:33.017

实际上，我已经向 MultiStorage 模块提交了一个补丁，以允许拆分多个元组字段，而不仅仅是一个，从而生成动态输出树。

[https://issues.apache.org/jira/browse/PIG-3258](https://issues.apache.org/jira/browse/PIG-3258)

它还没有引起太多关注，但我在生产中使用它没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:40:56.487

`MultiStorage`UDF 没有设置为在两个不同的字段上划分输入，但这本质上就是您正在做的 - 的用途只是`SPLIT`用`MultiStorage`两个参数进行模拟。在这种情况下，我建议以下内容：

```
REGISTER /usr/lib/pig/piggybank.jar;

inputData = LOAD '/data/$date*.{bz2,bz,gz}' USING PigStorage('\\x7F')
AS (
SITE_ID_COL                 :int,--                     = Item Site ID
META_ID_COL                 :int,--                 = Top Level (meta) category ID
EXTRACT_DATE_COL            :chararray,--          = Date for the data points
...
)

dataWithKey = FOREACH inputData GENERATE CONCAT(CONCAT(SITE_ID_COL, '-'), EXTRACT_DATE_COL), *;

STORE dataWithKey INTO 'tmpDir' USING org.apache.pig.piggybank.storage.MultiStorage('tmpDir', '0', 'bz2', '\\x7F'); 
```

然后使用一个简单的脚本检查您的输出，列出输出目录中的所有文件，提取站点和日期 ID，并将它们移动到具有您喜欢的任何结构的适当位置。

不是最优雅的解决方法，但它可以为您工作。需要注意的一件事是您在密钥中选择的分隔符可能不允许（它可能只是字母数字）。此外，您将被输出数据中的那个额外字段卡住。

# soundcloud - SoundCloud 组播放列表播放器 iframe

> ID：15280111
> 
> 赞同：0
> 
> 时间：2013-03-07T19:33:42.027
> 
> 标签：soundcloud

关于 iframe 的任何关于 soundcloud 播放器的建议，该播放器显示 soundcloud 组中的播放列表以进入 wordpress 页面 - 即[http://soundcloud.com/groups/buddhatunes](http://soundcloud.com/groups/buddhatunes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:15:33.430

有一个插件 - <a href="http://wordpress.org/extend/plugins/soundcloud-shortcode/" rel="nofollow">http://wordpress.org/extend/plugins/soundcloud-shortcode/

安装它，然后将以下内容放在内容正文中

```
[soundcloud]http://soundcloud.com/groups/buddhatunes[/soundcloud] 
```

应该管用。

# ruby - 从 ruby 中的缓存字符串组合 json

> ID：15280117
> 
> 赞同：3
> 
> 时间：2013-03-07T19:34:01.990
> 
> 标签：ruby, json, yajl

考虑以下场景，我需要将很多大哈希放入数组中，然后将其转换为 json：

```
hash1 = { ... big hash ... }
hash2 = { ... big hash ... }
hash3 = { ... big hash ... }
array = [hash1, hash2, hash3]

json = JSON.dump(array) 
```

问题是从这些哈希生成 json 需要很长时间，所以我想缓存它。但是，我不能缓存整个数组，只能缓存单独的项目。显然，将缓存的 json 字符串放入数组会产生不好的结果：

```
hash1 = {:a => 1}
hash1json = JSON.dump(hash1)
array = [hash1json]
JSON.generate(array)
==> ["{\"a\":1}"] 
```

当我需要的时候

```
==> [{"a":1}] 
```

我能想到的唯一方法是做这样的事情：

```
"[#{[hash1json].join(",")}]"
==> [{"a":1}] 
```

对于这种特定情况，这可能就足够了，但是如果想要缓存一些深层结构而不是简单的数组，那就更难了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:37:35.103

事实证明这实际上非常简单：

```
class CachedJson
  def initialize(str)
    @str = str
  end

  def to_json
    @str
  end
end

puts Yajl::Encoder.encode(:data => [{:a => 1}, '{"b":2}'])
# => {"data":[{"a":1},"{\"b\":2}"]}

puts Yajl::Encoder.encode(:data => [{:a => 1}, CachedJson.new('{"b":2}')])
# => {"data":[{"a":1},{"b":2}]} 
```

在引擎盖下 yajl 调用`to_json`每个对象，并且此方法必须返回字符串，因此只需将缓存的 json 字符串与`CachedJson`对象包装起来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:03:04.747

**编辑**

我之前的回答完全错过了问题的性能方面（对此感到抱歉），所以这是我的发现。也许它可以帮助你一点。

显然，在这些情况下，使用yajl 库`yajl-ruby`的绑定`C`似乎可以在进行转换时提高性能。例如，这里我正在生成一个带有`10,000`条目的哈希：

```
 require 'json'
  require 'yajl'
  require 'benchmark'
  tmp = "" 
  10000.times do |i|
   tmp += "\"#{i}\" => \"#{i}\", " 
  end

 domains = eval("{#{tmp}}")

 puts "JSON DUMP #{Benchmark.measure { JSON.dump(domains) }} "

 puts "Yajl::Encoder #{Benchmark.measure { Yajl::Encoder.encode(domains)}}" 
```

这些是结果：

```
JSON DUMP   0.010000   0.000000   0.010000 (  0.007495)

Yajl::Encoder   0.000000   0.000000   0.000000 (  0.003542) 
```

我始终将转换为 json 的任务的时间减半。希望能帮助到你！

# android - 无法在我的 mono for android 应用程序中使用 windowsazure.mobileservices

> ID：15280119
> 
> 赞同：0
> 
> 时间：2013-03-07T19:34:04.023
> 
> 标签：android, windows, azure, mono

我正在尝试启动并运行 Windows Azure 移动服务，但终生无法在我的 PC 上的任何地方找到 DLL。我已经安装了 SDK。

我以为我在某处读到此 DLL 仅可用于 Windows 8 开发环境。这是真的？我正在运行 Windows 7。如果是这样，还有其他方法可以访问我在云中的数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:01:33.683

您需要使用 Xamarin 从原始代码移植的 DLL 版本。从他们的组件商店下载：[http ://components.xamarin.com/view/azure-mobile-services/](http://components.xamarin.com/view/azure-mobile-services/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:38:25.677

这取决于您开始开发应用程序的方式。如果您在 Windows Azure 移动云服务上开发脚本，然后从门户下载项目，我相信您不会遇到上述任何问题。

# php - 有人可以帮我检查这段代码吗

> ID：15280121
> 
> 赞同：-3
> 
> 时间：2013-03-07T19:34:07.683
> 
> 标签：php, mysql

我收到此错误，但我不知道问题出在哪里：

```
Error

SQL query:

CREATE TABLE `dp_confirms` ( 
`id` int(11) NOT NULL auto_increment, 
`newuser` varchar(32) NOT NULL default '', 
`newpass` varchar(32) NOT NULL default '', 
`newquestion` varchar(255) NOT NULL default '', 
`newanswer` varchar(255) NOT NULL default '', 
`newmail` varchar(255) NOT NULL default '', 
`newfname` varchar(32) NOT NULL default '', 
`newlname` varchar(32) NOT NULL default '', 
`newcompany` varchar(128) NOT NULL default '', 
`newregnum` varchar(32) NOT NULL default '', 
`newdrvnum` varchar(32) NOT NULL default '', 
`newaddress` varchar(128) NOT NULL default '', 
`newcity` varchar(64) NOT NULL default '', 
`newcountry` char(2) NOT NULL default '', 
`newstate` varchar(32) NOT NULL default '', 
`newzip` varchar(32) NOT NULL default '', 
`newphone` varchar(64) NOT NULL default '', 
`newfax` varchar(64) NOT NULL default '', 
`sponsor` int(11) NOT NULL default '0', 
`confirm` varchar(255) NOT NULL default '', 
`cdate` timestamp(14) NOT NULL,[...])

MySQL said: Documentation
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(14) NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `newuser` (`newuser`),
  K' at line 22 
```

这是主要代码。

```
-- 
    -- Table structure for table `dp_cards`
    -- 

    DROP TABLE IF EXISTS `dp_cards`;
    CREATE TABLE `dp_cards` (
      `id` int(11) NOT NULL auto_increment,
      `owner` int(11) NOT NULL default '0',
      `ctype` varchar(8) NOT NULL default '',
      `cname` varchar(64) NOT NULL default '',
      `cnumber` varchar(32) NOT NULL default '',
      `ccvv` varchar(16) NOT NULL default '',
      `cmonth` tinyint(2) NOT NULL default '0',
      `cyear` smallint(6) NOT NULL default '0',
      `status` tinyint(1) NOT NULL default '0',
      `default` tinyint(1) NOT NULL default '0',
      PRIMARY KEY  (`id`)
    ) ENGINE=MyISAM AUTO_INCREMENT=1 ;

    -- --------------------------------------------------------

    -- 
    -- Table structure for table `dp_confirms`
    -- 

    DROP TABLE IF EXISTS `dp_confirms`;
    CREATE TABLE `dp_confirms` (
      `id` int(11) NOT NULL auto_increment,
      `newuser` varchar(32) NOT NULL default '',
      `newpass` varchar(32) NOT NULL default '',
      `newquestion` varchar(255) NOT NULL default '',
      `newanswer` varchar(255) NOT NULL default '',
      `newmail` varchar(255) NOT NULL default '',
      `newfname` varchar(32) NOT NULL default '',
      `newlname` varchar(32) NOT NULL default '',
      `newcompany` varchar(128) NOT NULL default '',
      `newregnum` varchar(32) NOT NULL default '',
      `newdrvnum` varchar(32) NOT NULL default '',
      `newaddress` varchar(128) NOT NULL default '',
      `newcity` varchar(64) NOT NULL default '',
      `newcountry` char(2) NOT NULL default '',
      `newstate` varchar(32) NOT NULL default '',
      `newzip` varchar(32) NOT NULL default '',
      `newphone` varchar(64) NOT NULL default '',
      `newfax` varchar(64) NOT NULL default '',
      `sponsor` int(11) NOT NULL default '0',
      `confirm` varchar(255) NOT NULL default '',
      `cdate` timestamp(14) NOT NULL,
      PRIMARY KEY  (`id`),
      UNIQUE KEY `newuser` (`newuser`),
      KEY `newmail` (`newmail`)
    ) ENGINE=MyISAM AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:36:13.657

我相信`TIMESTAMP`字段没有大小。移除 (14)

# c++ - eclipse 在构建我的 c++ 代码后在做什么？

> ID：15280122
> 
> 赞同：2
> 
> 时间：2013-03-07T19:34:08.593
> 
> 标签：c++, eclipse

我正在使用 Juno（今天下载）。我设置了一个可能包含 10,000 个 c++ 文件的新项目。我还设置了一个自定义构建命令，该命令对远程机器执行 ssh 以构建代码。（代码在两台机器共享的驱动器上。）当我构建时，控制台输出显示构建命令，它运行并很快完成。但是，在 ssh 命令完成后，“构建项目”对话框可能需要 2-5 分钟才能消失。在详细信息部分它只是说“建设项目...”，进度条没有超过 25%。eclipse右下方的来回动画是来回移动的。

有谁知道 Eclipse 在这段时间实际上在做什么？

有谁知道如何让它停止它正在做的事情？

# c++ - C ++指针数组的最大大小

> ID：15280126
> 
> 赞同：-5
> 
> 时间：2013-03-07T19:34:16.067
> 
> 标签：c++, arrays, pointers, size, max

```
const unsigned int PATRON_TABLE_SIZE = 10001;
Patron* patronTable[PATRON_TABLE_SIZE]; 
```

Patron 是一个包含基本信息的类。我检查了patronTable[500] 的指针，它是NULL，但是patronTable[5000] 的指针不是NULL。我找不到任何关于为什么会这样的信息。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:37:08.123

c++ 不会自动将指针数组初始化为任何设置值（除非您明确告诉它）。所以你看到的只是随机垃圾，它们恰好占据了分配数组的空间。`patronTable`很`PATRON_TABLE_SIZE`长，就像你说的那样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:36:29.997

默认情况下，不初始化 C++ 中非全局或声明为静态的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T23:04:17.680

您可以通过以下方式初始化数组的内容

```
Patron* patronTable[PATRON_TABLE_SIZE] = { }; 
```

这会将所有值设置为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:44:40.053

如果您编写非托管（不是 .NET）代码，则不会清除内存。如果您希望所有数组元素都为 NULL，请执行以下操作`memset(patronTable, 0, PATRON_TABLE_SIZE * sizeof(Patron[0]));`

# ajax - JSF2 PrimeFaces3 Facelets 更新内容失败

> ID：15280127
> 
> 赞同：1
> 
> 时间：2013-03-07T19:34:23.617
> 
> 标签：ajax, templates, jsf-2, primefaces, facelets

我的模板.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:p="http://primefaces.org/ui">
<h:head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>X</title>
  <script type="text/javascript" src="js/primefaces-locale.js" />
</h:head>
<h:body style="margin: 0; padding: 0;height:100%;" >
<h:panelGroup id="mid" style="height:100%;">
  <h:panelGroup id="menu" style="height:100%;width:15%;float:left;background-color:#EEEEEE;">
    <ui:include src="menu.xhtml" />
  </h:panelGroup>
  <h:panelGroup id="content" style="height:100%;width:80%;float:left;overflow: hidden;margin-top: 1%; margin-left: 1%;">
      <h:messages id="msgs" />
      <ui:insert name="body" />
  </h:panelGroup>
</h:panelGroup>
</h:body>    
</html> 
```

我的 index.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="template.xhtml" 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<ui:define name="body">
<h:form id="formbody" >  
  <p:schedule id="prazos" locale="br" style="width: 100%;font-size:11px;font-weight:bold;" />
  <h:outputText value="#{IndexBean.nome}" />
</h:form>  
</ui:define>
</ui:composition> 
```

我的 menu.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
<h:form id="formMenu">
  <p:panelMenu style="width:100%;font-size:11px;font-weight:bold;">
    <p:submenu label="Clientes">   
        <p:menuitem value="Cadastrar" id="btCadCliente" icon="ui-icon-disk" action="cadastroCliente.xhtml" update=":content" />  
        <p:menuitem value="Consultar"  id="btConCliente" icon="ui-icon-search" action="consultaCliente.xhtml?faces-redirect=true" update=":content"  />  
    </p:submenu>  
  </p:panelMenu>
</h:form>
</ui:composition> 
```

我的问题是单击 menu.xhtml 中的操作按钮时（例如）。":content" 上的 ajax 部分更新工作完美，但在渲染页面布局后，在顶部布局上创建一个新的空白行，并带有以下文本："xmlns="http://www.w3.org/1999/xhtml">" . 此文本是来自 template.xhtml 的 uri 命名空间。

有什么帮助吗？

# cassandra - 如何使用 PIG 访问 Cassandra 列

> ID：15280136
> 
> 赞同：0
> 
> 时间：2013-03-07T19:34:58.963
> 
> 标签：cassandra, apache-pig

我的 Cassandra KeySpace 中有一个简单的列族。我需要使用 PIG 访问它。请帮助我了解这是如何工作的：

```
SD = LOAD 'cassandra://SampleData/Queries' USING CassandraStorage() as (f1,f2,f3); 
```

如果我表演

```
X  = foreach SD generate f1; dump X; 
```

它给了我存储在``Queries'' table. I need to be able to generate a couple`（键，值）'中的所有键，其中`key' is a row key and`值'是具有特定名称“UpdateTimeStamp”的该键的列的值

我想如果我这样做

```
Y = foreach SD generate f2.name; dump Y; 
```

它遍历所有行的列表并打印每行中存在的列的名称列表

如果我做

```
Z = foreach SD generate f2.value; dump Z; 
```

它给了我和上面一样的东西，除了列名，它打印列值。

我需要能够生成这样的关系（键、时间戳）：

```
T = foreach SD generate (f1, f2.value(for f2.name == 'UpdateTimeStamp')); 
```

显然，PIG 不会接受上述说法；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:49:47.277

cassandra 中的列作为元组的内袋加载到 PIG 中。

尝试这个

```
data = LOAD 'cassandra://SampleData/Queries' USING CassandraStorage()
   AS (keycolumn, columns: bag {T: tuple(columnname, columnvalue)});

dump data; // check for what is in the data alias

data2 = FOREACH data GENERATE keycolumn, columns.name);

dump data2; 
```

# c# - 正确存储 SQL 凭据

> ID：15280141
> 
> 赞同：7
> 
> 时间：2013-03-07T19:35:12.743
> 
> 标签：c#, mysql, sql, class, class-library

首先，这是一个教育问题——不是我在生产应用程序中实现的，因为我正在学习 C# 的基础知识。

目前我有一个包含 2 个（实际上是 3 个，但一个是单元测试）项目的解决方案；

*   形式
*   类库

在类库中，我有一个名为的类`Database.cs`，它与 MySQL 数据库通信。我不直接与这个`Database.cs`类通信，但类库中的其他类可以（例如`Products.cs`）。不过，我需要凭据才能连接到这个 MySQL 数据库，但我不知道用哪种方法可以安全地进行连接。

*将其存储在类库中/在类中对凭据进行硬编码。*

这对我来说没有意义，因为用户可以轻松获取 DLL，并且他在技术上获得了数据库的凭据。

*通过表单将凭据传递给一个类（如`Products.cs`），该类在初始化数据库对象时将其传递给*

可以工作，尝试过并且可以工作，但我不确定这是否是“最简洁”的方法。

*编写一个包含具有凭据的属性的静态类*

同样，如果我在类库中创建这个静态类，我与我的第一个示例几乎不一样。如果我要在 中创建这个静态类`Form`，我需要从我的类库中添加对 Form-project 的引用（不是我想要的方式）。

我尝试查找内容，但显然我做得不对。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:01:41.673

首先，永远不要将凭据硬编码到代码中，因为凭据往往会随着时间而改变，这意味着每次 SQL 凭据发生更改时，您都必须重新编译和重新部署应用程序。

[通常连接数据库所需的所有信息都以连接字符串](http://msdn.microsoft.com/en-us/library/ms254494.aspx)的形式存储在应用程序配置文件中。

如果您的应用程序是 Web 应用程序，那么您就可以开始了，因为 web.config（一个 Web 应用程序配置文件）存储在 Web 服务器上，并且永远不会为 Web 请求提供服务。但是，如果您的应用程序是 Windows 窗体应用程序，那么安全考虑就意味着任何使用您的应用程序的用户都可以查看应用程序配置文件并获取凭据。如果是 Microsoft SQL，我建议使用 Windows 身份验证。但是对于 MySQL，我猜你注定将用户名和密码存储到连接字符串中。然后我建议通过[加密](http://msdn.microsoft.com/en-us/library/89211k9b%28v=vs.80%29.aspx)来保护你的连接字符串。

此外，如果您的用户可以/必须对 MySQL 服务器进行身份验证（输入 MySQL 用户名和密码），那么您可以使用连接字符串模板并将其某些部分替换为用户名和密码：
*ap​​p.config*

```
<connectionStrings>
    <add name="MyApplication" connectionString="Location=myServerAddress;Data Source=myDataBase;User ID={0};Password={1};
Port=3306;Extended Properties=""""; />
  </connectionStrings> 
```

*C# 代码*

```
var username = textboxUsername.Text;
var password = textboxPassword.Text;

var connectionString = string.Format(ConfigurationManager.ConnectionStrings["MyApplication"].ConnectionString, username, password)
// at this point you have a connection string whitch could be passed to your Products class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:02:24.677

不要硬编码您的凭据，因为这可能会导致问题，首先，如果您需要在稍后阶段将登录凭据更改为数据库，那么您将不得不重新编译您的类库，其次您提到安全性将受到损害。

将连接信息留给主应用程序而不是将它们存储在数据层中是一种很好的技术。重构您的数据层以在运行时接受连接字符串，该值需要由主应用程序传递给数据访问层。

这样，您将获得 2 个优势：

1.  部署应用程序时，部署位置可以具有与开发环境不同的连接凭据
2.  您可以在配置文件中加密连接字符串以提高安全性

# c - Doxygen - 记录结构变量但不记录结构

> ID：15280142
> 
> 赞同：2
> 
> 时间：2013-03-07T19:35:17.447
> 
> 标签：c, doxygen

假设我有这个结构类型：

```
typedef struct Hidden Hidden;
struct Hidden
{
    int foo;
    int bar;
}; 
```

然后我有一个全局变量

```
Hidden visible; 
```

`Hidden`永远不应该使用并且`visible`应该是 type 的唯一声明`Hidden`。我不想生成文档，`Hidden`因为我不想使用它，而是生成文档，`visible`其中包含有关它及其字段的所有信息。

我发现的最接近的事情是，当您记录`struct`没有标签的 a 时，例如：

```
struct
{
    int foo; ///< Number of particals in the universe.
    int bar; ///< Number of socks in the drawer.
} Baz; ///< Nameless struct variable. 
```

Doxygen 会生成

```
struct {
   int foo
       Number of particals in the universe. 
   int bar
       Number of socks in the drawer. 
} Baz
  Nameless struct variable. 
```

这是我想要实现的目标，但我不能使用无名结构。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:43:03.203

我找到了一种方法。使用@RBE 建议的预处理器预定义可以让您仅为 doxygen 创建代码，无论如何都不会编译。所以只需这样做（并制作`DOXYGEN`一个预定义的宏）：

```
typedef struct Hidden Hidden;

#ifdef DOXYGEN

struct
{
    int foo; ///< Number of particals in the universe.
    int bar; ///< Number of socks in the drawer.
} visible; ///< Nameless struct variable!

#endif

struct Hidden
{
    int foo;
    int bar;
};

Hidden visible; 
```

这是hacky，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:10:49.280

做你想做的最简单的方法是使用宏定义在你将编译的代码和你将运行 doxygen 的代码之间切换：

```
#define DOXYGEN

#ifdef DOXYGEN
/**
 *  @brief Describe your visible structure here.
 */
typedef struct VISIBLE
{
    int foo; //< Number of particles in the universe.
    int bar; //< Number of socks in the drawer.
} VISIBLE;
#else
typedef struct HIDDEN
{
    int foo;
    int bar;
} HIDDEN;

HIDDEN visible;
#endif 
```

只需注释或取消注释`DOXYGEN`定义即可从一个切换到另一个。

# javascript - 在每个树节点中设置对父级的引用 IE8 堆栈空间不足

> ID：15280147
> 
> 赞同：0
> 
> 时间：2013-03-07T19:35:24.007
> 
> 标签：javascript, internet-explorer-8, tree, traversal

从[json 反向引用](https://stackoverflow.com/questions/14024986/json-back-reference)继续。

我只想遍历层次结构并将属性设置`parent`为其父节点。这样它的双向可遍历

```
function attach_back_reference(hierarchy, parent){
        for(var i in hierarchy){
            if(jQuery.isPlainObject(hierarchy[i]))
                    attach_back_reference(hierarchy[i], hierarchy);
            else if(jQuery.isArray(hierarchy[i]))
                for(var it in hierarchy[i])
                        attach_back_reference(hierarchy[i][it], hierarchy);
        }
        hierarchy.parent = parent;
} 
```

上述功能在 chrome、opera、firefox、IE9 中运行良好。除了 IE 8，它说堆栈空间不足。但我没有看到它走向无限递归

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:26:44.607

根据[这个答案](https://stackoverflow.com/a/7828803/2126487)，IE8 的堆栈限制比其他浏览器小得多，所以我猜你的 javascript 可能实际上已经达到了 IE8 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:47:05.250

这是您的代码版本，它不使用递归，因此不会受此影响：

```
function attach_back_reference( hierarchy, parent ) {
    var q = [{obj:hierarchy, p:parent}];
    while( q.length ) {
        var o = q.pop( ), x = o.obj;
        if( x.parent ) {
            continue;
        }
        for( var i in x ) {
            if( jQuery.isPlainObject( x[i] ) ) {
                q.push( {obj:x[i], p: x} );
            } else if( jQuery.isArray( x[i] ) ) {
                for( var j in x[i] ) {
                    q.push( {obj:x[i][j], p: x} );
                }
            }
        }
        o.p && (x.parent = o.p);
    }
} 
```

（如果给定带有循环的图形，它也不会挂起，但这仍然不是一个好主意）

# flash - 动作脚本面向对象

> ID：15280151
> 
> 赞同：2
> 
> 时间：2013-03-07T19:35:33.370
> 
> 标签：flash, oop, actionscript, sprite, movieclip

我正在用 ActionScript 创建游戏。我在 actionscript 中遇到了面向对象编程的问题。我有一个 game_fla 托管游戏的库组件。导致问题的一个是飞溅影片剪辑。在这个影片剪辑中，我有几层动画和加载一个徽标和两个按钮。在文档类 game.as 中，我有以下代码：

```
package{
import flash.display.MovieClip;
public class the_game extends MovieClip {
    public var splash_screen:splash;
    public var play_screen:the_game_itself;
    public var how_to_play_screen:how_to_play;

    public function the_game() {
        show_splash();
    }

    public function show_splash() {
        splash_screen = new splash(this);
        addChild(splash_screen);
    }

    public function play_the_game() {
        play_screen = new the_game_itself(this,level);
        remove_splash();
        addChild(play_screen);
    }
etc.. 
```

这显然是指一个 splash.as 文件，其中包含有关启动组件的信息。这是 splash.as 的代码：

```
package {
    import flash.display.MovieClip;
    import flash.display.SimpleButton;
    import flash.events.MouseEvent;
    public class splash extends MovieClip {
    public var main_class:the_game;
    public function splash(passed_class:the_game) {
        main_class = passed_class;
        play_btn.addEventListener(MouseEvent.CLICK, playGame);
        howToPlay_btn.addEventListener(MouseEvent.CLICK, howToPlay);

    }

    public function playGame(event:MouseEvent):void{
        main_class.play_the_game();
    }

    public function howToPlay(event:MouseEvent):void{
        main_class.how_to_play();
    }

} 
```

}

就我而言！我遇到的问题是，当我运行 game.fla 文件时，我收到 splash.as 文件的编译器错误，提示“1120：未定义属性 play_btn 和 howToPlay_btn 的访问”。我提到的这些按钮位于影片剪辑 splash_mc 中​​。（都有实例名称等。）只是不确定我哪里出错了？顺便说一句，我最初使用 Sprite 而不是 Movie Clip 的 as 文件，但无论如何都不起作用。

帮助？请？任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:43:42.980

就像在生活中一样，让孩子告诉父母该做什么是不好的 OOP。它应该只启动事件，并且如果必须，父母可以做出反应。否则，您将创建依赖项。

你做这样的事情：

```
//in the parent
public function show_splash() {
        splash_screen = new splash();//get rid of this, remember to delete from main constructor
        splash_screen.addEventListener("PLAY_GAME", play_the_game);//add listener
        addChild(splash_screen);
    }

//in the child you just dispatch the event when you need it
public function playGame(event:MouseEvent):void{
        dispatchEvent(new Event("PLAY_GAME"));
    } 
```

那么当它起作用时，你也会做同样的事情`how_to_play`

如果需要帧，则仅使用 MovieClips，否则使用 Sprite。此外，有时您无法绕过将父级作为参数传递，但随后您将其作为 a 传递，`DisplayObjectContainer`甚至更好地给它一个 setter。

# python - 导入包时会发生什么？

> ID：15280157
> 
> 赞同：19
> 
> 时间：2013-03-07T19:35:53.370
> 
> 标签：python, memory-management, heap-memory

为了效率起见，我试图弄清楚 python 如何使用它的对象堆（和命名空间系统，但它或多或少很清楚）。所以，基本上，我试图了解对象何时加载到堆中，其中有多少，它们的寿命等。

我的问题是**当我使用一个包并从中导入一些东西时**：

```
from pypackage import pymodule 
```

**哪些对象被加载到内存中**（进入 python 解释器的对象堆）？更一般地说：会发生什么？:)

我猜上面的例子是这样的：包的一些对象`pypackage`是在内存中创建的（其中包含一些关于包的信息，但不是太多），模块`pymodule`被加载到内存中，它的引用是在本地名称空间中创建的. *这里重要的是：`pypackage`内存中没有创建（或其他对象）的*其他模块，除非明确说明（在模块本身中，或者在我不熟悉的包初始化技巧和钩子中的某处） . 最后，记忆中唯一的一件大事是`pymodule`（即导入模块时创建的所有对象）。是这样吗？如果有人能稍微澄清一下这个问题，我将不胜感激。也许你可以建议一些有用的文章？（文档涵盖了更具体的内容）

我发现以下关于模块导入的相同问题：

> 当 Python 导入一个模块时，它首先检查模块注册表 (sys.modules) 以查看该模块是否已经导入。如果是这种情况，Python 将按原样使用现有的模块对象。
> 
> 否则，Python 会执行以下操作：
> 
> *   创建一个新的空模块对象（这本质上是一个字典）
> *   在 sys.modules 字典中插入该模块对象
> *   加载模块代码对象（如果需要，先编译模块）
> *   在新模块的命名空间中执行模块代码对象。代码分配的所有变量都可以通过模块对象获得。

并且将不胜感激有关软件包的相同解释。

顺便说一句，`sys.modules`奇怪的是，在包中添加了一个模块名称：

```
>>> import sys
>>> from pypacket import pymodule
>>> "pymodule" in sys.modules.keys()
False
>>> "pypacket" in sys.modules.keys()
True 
```

还有一个关于同一问题的实际问题。

当我构建一组工具时，可能会在不同的流程和程序中使用它们。我把它们放在模块中。我别无选择，只能加载一个完整的模块，即使我只想使用在那里声明的一个函数。正如我所看到的，可以通过制作小模块并将它们放入一个包中来减轻这个问题的痛苦（如果一个包在您只导入其中一个模块时没有加载它的所有模块）。

有没有更好的方法在 Python 中制作这样的库？（仅使用在其模块中没有任何依赖关系的函数。）是否可以使用 C 扩展？

PS抱歉这么长的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T19:47:16.553

你在这里有几个不同的问题。. .

### 关于导入包

导入包时，步骤顺序与导入模块时相同。唯一的区别是包的代码（即创建“模块代码对象”的代码）是包的`__init__.py`.

`__init__.py`所以是的，除非明确这样做，否则不会加载包的子模块。如果你这样做`from package import module`，只有`module`加载，除非它当然从包中导入其他模块。

### `sys.modules`从包中加载的模块名称

当您从包中导入模块时，添加的名称是`sys.modules`“限定名称”，它指定模块名称以及您从中导入的任何包的点分隔名称。因此，如果您这样做`from package.subpackage import mod`，则添加的`sys.modules`是`"package.subpackage.mod"`.

### 仅导入模块的一部分

导入整个模块而不是仅仅导入一个函数通常不是什么大问题。你说它是“痛苦的”，但实际上它几乎从来没有。

如果，如您所说，这些函数没有外部依赖项，那么它们只是纯 Python，加载它们不会花费太多时间。通常，如果导入一个模块需要很长时间，那是因为它加载了其他模块，这意味着它确实有外部依赖项，你必须加载整个东西。

如果您的模块在模块导入时发生了昂贵的操作（即，它们是全局模块级代码，而不是在函数内部），但对于使用模块中的所有函数不是必需的，那么您可以，如果您愿意，重新设计您的模块以将加载推迟到以后。也就是说，如果您的模块执行以下操作：

```
def simpleFunction():
    pass

# open files, read huge amounts of data, do slow stuff here 
```

你可以把它改成

```
def simpleFunction():
    pass

def loadData():
    # open files, read huge amounts of data, do slow stuff here 
```

然后告诉人们“`someModule.loadData()`当你想加载数据时打电话”。或者，正如您所建议的，您可以将模块的昂贵部分放入一个包中它们自己的单独模块中。

我从来没有发现导入模块会导致有意义的性能影响，除非模块已经足够大，可以合理地分解成更小的模块。制作大量每个都包含一个功能的微型模块不太可能为您带来任何好处，除了必须跟踪所有这些文件带来的维护难题。你真的有一个特定的情况，这对你有影响吗？

另外，关于你的最后一点，据我所知，同样的全有或全无加载策略适用于 C 扩展模块和纯 Python 模块。显然，就像使用 Python 模块一样，您可以将内容拆分为更小的扩展模块，但您不能不`from someExtensionModule import someFunction`运行打包为该扩展模块的一部分的其余代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:42:01.930

导入模块时发生的大致步骤顺序如下：

1.  Python 尝试在其中定位模块，`sys.modules`如果找到，则不执行任何其他操作。包以它们的全名作为关键字，所以当`pymodule`缺少时`sys.modules`，`pypacket.pymodule`将在那里（并且可以作为`sys.modules["pypacket.pymodule"]`.

2.  Python 定位实现模块的文件。如果模块是包的一部分，由`x.y`语法决定，它将查找`x`包含 an`__init__.py`和`y.py`（或更多子包）的目录。位于最底部的文件将是`.py`文件、`.pyc`文件或`.so`/`.pyd`文件。如果找不到适合该模块的文件，`ImportError`则会引发 an。

3.  创建一个空的模块对象，并以模块的作为执行命名空间来[执行模块中的代码。](http://docs.python.org/2/reference/simple_stmts.html#grammar-token-exec_stmt)¹`__dict__`

4.  模块对象放置在 中`sys.modules`，并注入到导入器的命名空间中。

第 3 步是“对象被加载到内存中”的点：有问题的对象是模块对象，其命名空间的内容包含在其`__dict__`. 该字典通常包含顶级函数和类，这些函数和类是作为执行通常包含在每个模块中的所有 、 和其他顶级语句的副作用而创建`def`的`class`。

请注意，以上仅描述了`import`. 有多种方法可以自定义导入行为，例如通过覆盖[内置`__import__`或](http://docs.python.org/2/library/functions.html?highlight=__import__#__import__)实现[导入钩子](http://www.python.org/dev/peps/pep-0302/)。

* * *

¹如果模块文件是`.py`源文件，会先编译到内存中，编译后的代码对象会被执行。如果是 a `.pyc`，将通过[反序列化文件内容](http://docs.python.org/2/library/marshal.html)获得代码对象。如果模块是一个`.so`或一个`.pyd`共享库，它将使用操作系统的共享库加载工具来加载，并且`init<module>`将调用 C 函数来初始化模块。

# java - 如何从 google api 获取 google 组数据

> ID：15280158
> 
> 赞同：0
> 
> 时间：2013-03-07T19:35:55.030
> 
> 标签：java, google-app-engine, google-groups-api

如何从 google api 获取 google 组数据。在我的项目中，我需要从特定组（联系人）中获取 google 联系人，还需要为特定或特定用户获取 google 组。这里我的问题是我没有提供登录过程的用户名和密码。这里我使用的是 OAUTH 过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T20:05:51.810

实际上，文档并不完整。例如，Google_Service_Groupssettings_Groups_Resource 构造函数需要四个参数，但它们的文档是：

""groups" 方法集合。典型用法是：$groupssettingsService = new Google_Service_Groupssettings(...); $groups = $groupssettingsService->groups;" （请参阅[此链接](http://fossies.org/dox/moodle-2.8.5/classGoogle__Service__Groupssettings__Groups__Resource.html)）。

我不认为 (...) 通过文档。

这些方法记录在此链接中：[https](https://developers.google.com/admin-sdk/groups-settings/v1/reference/) ://developers.google.com/admin-sdk/groups-settings/v1/reference/ ，但是提供对这些方法的访问所需的代码被很好地混淆了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:50:49.210

好吧，谷歌确实解释了一些与他们的配置 API [https://developers.google.com/google-apps/groups-settings/](https://developers.google.com/google-apps/groups-settings/)相关的内容。

# jquery-cycle - jQuery Cycle, "after" 选项 *just* 在 fx 转换之前

> ID：15280164
> 
> 赞同：1
> 
> 时间：2013-03-07T19:36:20.257
> 
> 标签：jquery-cycle

我正在使用 fx: 'fade' All working dandy，但是我需要在实际淡入*之前*调用一个函数。

我一直在尝试**之前**和**之后**的选项，但**在**触发之前和**之后**为时已晚。

# c# - 使用 Double.TryParse 和 if-else 语句进行除法

> ID：15280170
> 
> 赞同：0
> 
> 时间：2013-03-07T19:36:44.087
> 
> 标签：c#, if-statement, devexpress, tryparse

我是 C# 编程的新手，我正在尝试在两个单元格值之间执行除法并将结果放在 Devexpress 中的第三个单元格中。我的代码工作正常，除非分母是`0`. 这给了我一个 Infinity 的输出。下面是我试图使它`0`在分母中输出为零的尝试。

```
private void xrTableCell40_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e)
{
   string value;
   bool Isnum;
   double holder;
   string zero;
   value = xrTableCell38.ToString();
   zero = 0.ToString(); 
   Isnum = double.TryParse(value, out holder);
   if(Isnum = true){
      if (holder > 0)
         DoWorkEventArgs}
      else{
         xrTableCell40.Text = zero;};
   holder = Convert.ToDouble(xrLabel135.Summary.GetResult()) / Convert.ToDouble(xrTableCell38.Summary.GetResult());
   string s = string.Format("{0:N2}", holder);
   xrTableCell40.Text = Convert.ToString(s);
} 
```

如果分母为零，我需要输出`0.00`，否则它应该执行除法并将结果放在`xrTableCell40`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:43:23.800

三元运算符的基本用法

```
double value = denom == 0 ? 0 : div/denom; 
```

* * *

解释三元或`?:`运算符：

如果`cond`为真，则`cond ? a : b`计算结果为 a。否则，`cond ? a : b`评估为`b`

希望您可以使用它为自己找到解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:56:14.823

感谢您的所有帮助。这就是我最终想出的，并且有效。

```
 private void xrTableCell40_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e)
         {
         string value;
         bool Isnum;
       double holder;
       string zero;
             value = xrTableCell38.ToString();
             zero = 0.ToString();
         Isnum = double.TryParse(value, out holder);
         if (Isnum == true)
         {
             if (holder > 0)
                 holder = Convert.ToDouble(xrLabel135.Summary.GetResult()) / Convert.ToDouble(xrTableCell38.Summary.GetResult());
             else
             {

                 xrTableCell40.Text = Convert.ToString(zero);
                 //xrTableCell40.Text = zero;
             }
             string s = string.Format("{0:N2}", holder);
             xrTableCell40.Text = Convert.ToString(s);
         }

     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:42:42.740

```
if(Isnum = true){ // Isnum = true is assignment, what you need is comparision
    if (holder > 0)
        DoWorkEventArgs}
else{
    xrTableCell40.Text = zero;}; // un-needed ; only statement terminates with semi-colon 
```

本来应该

```
 if(Isnum == true) // or (Isnum)
        {
            if (holder > 0)
                DoWorkEventArgs() // missing (), assuming that DoWorkEventArgs is a method call
        }
        else
        {
            xrTableCell40.Text = zero;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T19:44:48.807

快速回答：

```
zero = string.Format("{0:N2}", 0); 
```

这段代码当然不会为您赢得任何风格积分。几个快速提示：

*   使用有意义的变量。我希望在某处看到“分母”作为变量。
*   同时声明和使用变量——它将提高可读性。使用您的代码示例，使用

    字符串值 = xrTableCell38.ToString();

*   在代码的流程和可读性上做一些工作

祝你好运，记住熟能生巧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T19:49:46.850

Roland ....，在您的 if 语句中没有 Isnum 为真且持有者为 0 的情况

尝试这个：

```
private void xrTableCell40_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e)
    {
        string value;
        bool Isnum;
        double holder;
        string zero;
        value = xrTableCell38.ToString();
        zero = 0.ToString(); 
        Isnum = double.TryParse(value, out holder);
            if(Isnum != true)
            {
              xrTableCell40.Text = zero;
            }
            else if (holder > 0)
            {
              holder = Convert.ToDouble(xrLabel135.Summary.GetResult()) / Convert.ToDouble(xrTableCell38.Summary.GetResult());
              string s = string.Format("{0:N2}", holder);
              xrTableCell40.Text = Convert.ToString(s);
            }
            else
            {
              xrTableCell40.Text = zero;
            } 
  } 
```

# java - Servlet 到达 BufferedReader 时会超时吗？

> ID：15280172
> 
> 赞同：2
> 
> 时间：2013-03-07T19:36:50.880
> 
> 标签：java, jsp, bufferedreader

**编辑：**所有这些代码在外部环境中都可以正常工作（即在 DEA12 中它工作得很好），但是当我部署它时，它会在缓冲读取器处停止。

**编辑二：**所以，问题当然在于缓冲阅读器。如果我将 URLS 更改为包含少量文本的内容（例如[https://www.google.com](https://www.google.com)），一切都会完美。我必须使用的 URL 有很多文本（例如：[http](http://www.otc.edu/GEN/schedule/all_classes_fall.txt) ://www.otc.edu/GEN/schedule/all_classes_fall.txt ）。有人知道解决这个问题的方法吗？

我的 serlvet 超时了，通过我的日志，我缩小了它发生的范围。servlet 通过 URL 读取数据并解析它们，但是当它到达 bufferedreader 时它会超时（我已经在代码中注释了它在切换之后的位置）：

```
private void loadAllClasses()
        throws IOException
{
    //Log beginning of load
    logger.info("Started loading classes at " + new Date());

    URLConnection connection = null;
    LinkedList<ClassInfo> currentList = null;
    final int NUMBEROFSEMESTERS = 3;
    final String SPLITONTAB = "\\t";
    final int STARTINDEX = 0;

    for(int counter = STARTINDEX; counter < NUMBEROFSEMESTERS; counter++)
    {
        //Change local fields for whatever semester we are in, there will always only be three semesters
        switch(counter)
        {
            //Build out the Fall classes
            case 0:
                currentList = null;
                try{
                    connection = this.urlFall.openConnection();
                    logger.info("Opened up Fall URL at " + new Date());
                }
                catch (Exception ex)
                {
                    logger.fatal("FATAL! COULD NOT OPEN GIVEN URL FOR FALL CLASSES!");
                }
                currentList = fallClassListings;
                break;
            //Build out the Spring classes
            case 1:
                currentList = null;
                try{
                    connection = this.urlSpring.openConnection();
                    logger.info("Opened up Spring URL at " + new Date());
                }
                catch (Exception ex)
                {
                    logger.fatal("FATAL! COULD NOT OPEN GIVEN URL FOR SPRING CLASSES!");
                }
                currentList = springClassListings;
                break;
            //Build out the Summer classes
            case 2:
                currentList = null;
                try{
                    connection = this.urlSummer.openConnection();
                    logger.info("Opened up Summer URL at " + new Date());
                }
                catch (Exception ex)
                {
                    logger.fatal("FATAL! COULD NOT OPEN GIVEN URL FOR SUMMER CLASSES!");
                }
                currentList = summerClassListings;
                break;
        }//end switch

        //Opening a URL Successful
        logger.info("Successfully opened URL, beginning parse at " + new Date());

        //!!!!IT HAPPENS HERE AS THE LOG BELOW WILL NEVER BE REACHED!!!!
        BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        logger.info("Bufferedreader opened at " + new Date());

        String line = reader.readLine();

        //This is what is reading through and parsing all of the text from the URL
        while(line != null)
        {
            //Log beginning of parse
            logger.info("Parsing next text line of current URL at " + new Date());

            //Keeps track of how big the array is
            int index = Integer.parseInt(properties.getProperty("FIRSTINDEX"));

            //Split data on tab character
            String[] data = line.split(SPLITONTAB);

            //Strip all the white space so everything doesn't turn out poorly formatted
            for(int arrayCounter = Integer.parseInt(properties.getProperty("FIRSTINDEX")); arrayCounter < data.length; arrayCounter++)
            {
                data[arrayCounter] = data[arrayCounter].trim();

                index++;
            }

            //ADD THE DATA TO THE ACTUAL CLASS INFO OBJECTS
            if(index == Integer.parseInt(properties.getProperty("MAXSIZEARRAY")))//Size of array was 14, which has all of the class information
            {
                //TEST CONDITION TO FIND A LAB, if the name is empty this is a new class. If it isn't it is
                //Supplementary data to the last class created.
                if(!data[Integer.parseInt(properties.getProperty("NAME"))].isEmpty())//REGULAR CLASS IF TRUE
                {
                    //Strip out empty space and make it say "N/A"
                    data = convertEmptySpace(data);

                    currentList.add(new ClassInfo(data));
                    logger.info("Added a class.");
                }
                else//THESE ARE LABS OR ADDITIONAL LECTURE TIMES, so add all the last information from the last class since it's the same.
                {
                    ClassInfo classForLab = new ClassInfo(data);

                    //Lab details are already set from the array, so fill the empty data correctly
                    classForLab.setSectionName(currentList.get(currentList.size()- Integer.parseInt(properties.getProperty("SUBTRACTTOP"))).getSectionName());
                    classForLab.setSectionSynonym(currentList.get(currentList.size()- Integer.parseInt(properties.getProperty("SUBTRACTTOP"))).getSectionSynonym());
                    classForLab.setSectionCredits(properties.getProperty("ZERO_OUT_INFO"));
                    classForLab.setSectionTitle(currentList.get(currentList.size()- Integer.parseInt(properties.getProperty("SUBTRACTTOP"))).getSectionTitle());
                    classForLab.setSectionCapacity(currentList.get(currentList.size()- Integer.parseInt(properties.getProperty("SUBTRACTTOP"))).getSectionCapacity());
                    classForLab.setSectionAvailableSeats(properties.getProperty("ZERO_OUT_INFO"));
                    classForLab.setSectionInstructor(currentList.get(currentList.size()- Integer.parseInt(properties.getProperty("SUBTRACTTOP"))).getSectionInstructor());
                    classForLab.setSectionMysteryVariable(currentList.get(currentList.size()- Integer.parseInt(properties.getProperty("SUBTRACTTOP"))).getSectionMysteryVariable());

                    //After everything is set, add lab to the class listings
                    currentList.add(classForLab);
                    logger.info("Added a lab.");
                }
            }

            //Log classes added
            logger.info("Done parsing text at " + new Date());

            //End of the current line.
            line = reader.readLine();
        }

        //Close the reader
        reader.close();
    }//All semester are loaded, add them to the master list as well

    logger.info("All classes were successfully retrieved via parsing at " + new Date());

    allClassListings.addAll(fallClassListings);
    allClassListings.addAll(springClassListings);
    allClassListings.addAll(summerClassListings);

} 
```

我的日志：

```
13:30:38,145 [TP-Processor18] INFO  Properties file was loaded successfully.
13:30:38,146 [TP-Processor18] INFO  URLs were successfully loaded at Thu Mar 07  13:30:38 CST 2013
13:30:38,146 [TP-Processor18] INFO  Started loading classes at Thu Mar 07 13:30:38 CST 2013
13:30:38,146 [TP-Processor18] INFO  Opened up Fall URL at Thu Mar 07 13:30:38 CST 2013
13:30:38,146 [TP-Processor18] INFO  Successfully opened URL, beginning parse at Thu Mar 07 13:30:38 CST 2013 
```

任何想法为什么会发生这种情况或我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:46:37.600

URLConnetion 不会在此行之前开始从连接中读取（流式数据），

```
BufferedReader reader = new BufferedReader(new 
              InputStreamReader(connection.getInputStream())); 
```

`connection.getInputStream()`将导致连接对象开始从 URL 读取数据。

您的服务器似乎无法访问该 URL 并且正在超时。

您可能想通过调用更改超时`connection.setTimeOut()`

尝试`PING,TRACE`从服务器到这些 URL 以验证您可以访问这些 URL 并且没有防火墙阻止

来自 JavaDocs -

```
>     openConnection()
>     ----------------------------> 
>     The connection object is created by invoking the openConnection method on a URL.
> 
>     getInputStream()
>     ---------------------------->
>     Returns an input stream that reads from this open connection. 
```

# c - 字符串复制功能

> ID：15280174
> 
> 赞同：0
> 
> 时间：2013-03-07T19:37:00.177
> 
> 标签：c

```
#include<stdio.h>
#include<malloc.h>
void my_strcpy(char *sour,char *dest){
 if(sour == NULL || dest == NULL){
  return;
 }
 while(*sour != '\0'){
  *dest++ = *sour++;
 } 
 *dest = '\0';
}
int main(){
 char *d = NULL;
 char *s = "Angus Declan R";
 d = malloc(sizeof(char*));
 my_strcpy(s,d);
 printf("\n %s \n",d);
 return 0;
} 
```

这个函数工作正常并打印字符串。我的疑问是指针“dest”将指向 '\0' 它如何打印整个字符串（因为它没有指向字符串的初始地址）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:40:41.297

确实`dest`会指向字符串的*结尾*。但是您*不是*通过使用打印字符串`dest`- 您是通过使用`d`哪个不同的变量来打印字符串。

请记住，在 C 和 C++ 中，默认情况下值是按值传递的 - 因此，当您调用函数时`my_strcpy`，变量的值将`d`被复制到仅对`dest`函数本地的变量中，`my_strcpy`对该变量的任何更改都不会影响`d`。

另请注意，您*没有*`d`为变量分配足够的空间：

```
d = malloc(sizeof(char*)); 
```

这将为*指向字符的指针*分配足够的空间，这通常意味着有足够的空间容纳 4 个（或者可能是 8 个）字符。您应该为要复制的字符串分配足够的空间，并*为*终止空字节分配一个字符。您要复制的字符串的大小是多少？提示：`strlen`应该有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:39:05.087

传入的`d`指针是指针的副本，因此函数中指针的位置/移动不会反映回调用它的位置`main`。虽然`d`和`dest`都指向同一个内存块（至少最初是这样），并且对该内存块的任何更改都将反映在两端，但`dest`指针只是一个副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:39:05.877

```
 my_strcpy(s,d); 
```

C 按值传递参数。的值 `d`被传递给 `my_strcpy`，这意味着`d`里面的对象在你的 函数`main`中没有被修改。`my_strcpy`

# ios - 尽管返回 BOOL，但等待 10 秒后未能返回

> ID：15280176
> 
> 赞同：5
> 
> 时间：2013-03-07T19:37:14.500
> 
> 标签：ios, objective-c, cocoa-touch, uiwebview

我正在尝试显示一个完全加载的 webview。我不希望用户在加载过程中看到 webview。我一次处理几个 webviews 并且使用`webViewDidFinishLoad`它对我来说变得更加复杂，所以我正在尝试做这样的事情：

```
while(_lastWebView.isLoading)
{
_lastWebView.hidden=YES;
}

_lastWebView.hidden=NO; 
```

但我得到这个消息： void SendDelegateMessage(NSInvocation *): delegate () failed to return after waiting 10 seconds。主运行循环模式：kCFRunLoopDefaultMode

我不明白为什么要进入循环，因为`isLoading`加载完成后返回 0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T20:08:36.557

不要用那个循环阻塞你的用户界面。它将阻止用户在主线程上执行任何其他操作。

相反，[计算您的 webView 发出的请求数，并在它完成加载时使其可见](https://stackoverflow.com/a/2796540/1445366)。

# sql - 选择不同的，按未返回的列错误排序

> ID：15280177
> 
> 赞同：1
> 
> 时间：2013-03-07T19:37:17.933
> 
> 标签：sql, sql-server

假设我有下表：

```
Col_A:    Col_B:    Col_C:
Item1     Value1    A
Item2     Value2    B
Item3     Value3    A
Item4     Value4    B
Item5     Value5    A
Item1     Value1    A 
```

现在，我想要取回的是&中的`Distinct`值，然后排序，所以结果如下所示：`Col A``Col B``Col C``Col A`

```
Col_A:    Col_B:
Item1     Value1
Item3     Value3
Item5     Value5
Item2     Value2
Item4     Value4 
```

我打算为此使用的 SQL 是：

```
 SELECT DISTINCT [Col_A], [Col_B] 
 FROM [MyTable] 
      WHERE ...
 ORDER BY [Col_C] ASC, [Col_A] ASC 
```

但我得到了错误：

```
ORDER BY items must appear in the select list if SELECT DISTINCT is specified. 
```

我理解为什么会发生错误并认为我可以使用相当复杂的 SQL / CTE 来解决它，但我希望有一种很好、干净和有效的方式来编写 SQL 以获得我正在寻找的结果......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:47:36.570

`col_c`你的`select`条款中没有。`distinct`您只能按`select`语句中的列排序。

相反，您应该使用以下`group by`语句：

```
select col_a, col_b
from t
group by col_a, col_b
order by max(col_c), col_a 
```

事实上，`select distinct`在 SQL 中根本没有必要。它是按所有变量分组的语法简写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:40:33.240

我认为这是现在...

```
SELECT  [Col_A], [Col_B]
FROM   (SELECT  [Col_A], [Col_B], Min([Col_C]) As bah
        FROM    [MyTable] 
        WHERE   ...
        Group   By [Col_A], [Col_B]) n
ORDER   BY bah ASC, [Col_A] ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:41:38.527

选择 col_a, col_b from yourtable Group by col_a, col_ b Order by min(col_c), col_a

抱歉，我错过了订单

# c++ - 如果B使用A类（c ++），如何定义B类的析构函数？

> ID：15280179
> 
> 赞同：1
> 
> 时间：2013-03-07T19:37:24.883
> 
> 标签：c++

我有一堂课`A`。 `A`有自己的析构函数。

我`A`用来定义`B`如下。

```
class A{
  protected:
    int* array;
  public:
    A(int size){array = new int[size];}
    ~A() { delete [] array;}

}

class B{
 public:
  A x;
} 
```

我应该如何定义析构函数`B`？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:38:42.717

您不必对 class 做任何特别的事情`B`。在这种情况下，编译器生成的析构函数会做正确的事情。

`A`另一方面，类要么缺少赋值运算符和复制构造函数，要么您必须通过将它们设为私有来禁用它们。如果您复制或分配一个`A`实例（因此也是一个`B`实例），编译器生成的会导致问题。请参阅[三的规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:39:46.483

您实际上不需要为`B`. `B`没有任何需要手动清理的成员。当一个实例`B`被销毁时，它的所有成员的析构函数都会被调用（无论你是否有用户定义的析构函数），这意味着实例`A`被它自己的析构函数清理。因此，默认析构函数非常适合`B`.

当然，您缺少一个自定义复制构造函数和赋值运算符`B`来满足三个规则，但那是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:40:36.700

当编译器生成的析构函数被调用时（你不需要做任何事情），A 的析构函数将被自动调用。

基本上，在这种情况下，您不需要做任何事情来正确破坏 B 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:40:37.297

`B`它的析构函数不需要做任何事情。您确实需要定义默认构造函数或在默认构造`A`函数中调用其现有构造函数`B`

# c - 传递二维数组，然后没有得到一个值

> ID：15280184
> 
> 赞同：1
> 
> 时间：2013-03-07T19:37:43.850
> 
> 标签：c, pointers, multidimensional-array

我正在编写的一些代码有问题。我经常使用这个网站，因为我发现很多人已经问过我想知道的相同问题。借此，我要感谢这里的社区，感谢他们之前对我的编程难题的所有见解。（在我们走得太远之前，不，这不是“学校项目”或“学校作业”，我只是想解决“旅行推销员问题”并提高我的 C 技能。

这是我一直坚持的代码部分：

```
 void printAndFlip(int arrayone[][20], int citytotal, int arrayCities[])
   {

////Finds cost:
int x, y, z;
int totalCost
int singleTrip;
int cheepestTrip;
int nCity = citytotal + 1;      //nCity is the number of Cities //Adding one to accomadate going back to the first city
int gCounter;
int gCounterTrue = 1;
int cheepestTrip[20];
int totalCost = 0;
int lCounter;
int i;
int n = citytotal;

////Sets up for a default case to set cheepestTrip:
for(gCounter = 1; gCounter <= nCity; gCounter++)
{
    while(gCounterTrue == 1)
    {
        if(gCounter == arrayCities[gCounter])
        {
            gCounterTrue = 1;
        }
        else
        {
            gCounterTrue = 0;
            gCounter = 50;      //Stopping the larger for loop with 50 (the nCity can't be larger than 20) so that it will hopefully be faster
        }
        if(gCounter == nCity)
        {
            if(arrayCities[1] == arrayCities[nCity])
            {
!!!!!               cheepestTrip = totalCost;
            }
        }   
    }
}
for(x = 1; x < nCity; x++)
{
    y = arrayCities[x];
    z = arrayCities[x+1];
    singleTrip = arrayone[y][z];        //finding individual cost of each trip...will be added to 'totalCost' below
    totalCost = singleTrip + totalCost;
} 

!!!!!!!!  if(totalCost <= cheepestTrip)
{
    for(lCounter = 1; lCounter <= nCity; lCounter++)
    {
        cheepestTrip[lCounter] = arrayCities[lCounter];
    }
} 
```

为了更容易显示我的编译错误在哪里，我在行上加上了感叹号。如果我错了，请告诉我，但是当我将“arrayone”发送到 printANDFlip 时，我正在传递一个带有数组的指针数组，对吗？我知道编译错误与指针有关，但我不确定它们应该放在哪里。任何和所有的帮助将不胜感激。非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:42:09.423

在这里，您将数组指针与 int 值进行比较

```
if(totalCost <= cheepestTrip) 
```

例如，您应该将其与该数组的元素进行比较

```
 if(totalCost <= cheepestTrip[0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:44:20.617

`cheepestTrip`是数组的名称，相当于指向第一个元素的指针。`totalCost`是一个`int`。只需`[20]`从代码顶部的声明中删除 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:55:12.260

为了明确其他一些回复所说的内容：您有两个名称相同但类型不同的变量：

```
int cheepestTrip;  /* This is an single integer... */ 
```

和

```
int cheepestTrip[20];  /* ...but this is an array of integers. */ 
```

这应该在编译时触发警告（可能是关于重新声明现有变量）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:44:41.737

您正在比较指向 int 的指针，您的特定编译器可能不允许（尽管我使用 C 可以）。但最便宜的旅行本质上是一个指向整数数组中第一个元素的指针，而总成本只是一个 int 原语

# javascript - 用于输入最大长度的文本的 Javascript 验证

> ID：15280186
> 
> 赞同：1
> 
> 时间：2013-03-07T19:37:58.750
> 
> 标签：javascript

我一直在尝试验证一个文本框，它只允许输入最多 128 个字符的文本。但是，如果我按下键并按住它而不按下键，则代码无法验证文本，从而允许填充超过 128 个字符的文本框。当我按下键并弹出警报时，验证有效。下面是代码。

```
 (textboxentered.value>128)
  {
    alert("Please enter text upto 128 Charecters");
  } 
```

我想要的是一个解决方案，当一个键被按下这么长时间而没有按键时，文本框不应允许超过 128 个字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:42:21.830

为什么不直接使用 maxlength HTML 属性？

```
<input type="text" name="textbox" maxlength="128"> 
```

# php - php cookie 在没有 WWW 或子域的情况下不起作用

> ID：15280190
> 
> 赞同：2
> 
> 时间：2013-03-07T19:38:13.250
> 
> 标签：php, cookies, https, subdomain

我有一个奇怪的问题。我有一个脚本，它将为每个访问的页面添加一个数字到一个数组中，然后将其放入 cookie 中。

然后在另一个页面上，它将显示 cookie 中的数字列表。

它在我的域 (https) 上与 WWW 完美运行：https: [//www.mydomain.com](https://www.mydomain.com)

[问题是如果没有 WWW ( https://mydomain.com](https://mydomain.com) )它将无法工作。似乎有两种不同的 cookie：一种用于[https://mydomain.com](https://mydomain.com)，另一种用于[https://www.mydomain.com](https://www.mydomain.com)

我还想共享没有 https 的子域的 cookie

所以基本上它应该是相同的cookie：

```
https://www.domain.com
https://domain.com
http://subdomain.domain.com 
```

我怎样才能做到这一点？

目前，我使用：

```
setcookie("viewed_articles", serialize($lastviewedarticles)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:39:29.590

那是正确的行为。当您设置 cookie 时，您需要将其设置为`.domain.com`，它将适用于包含在`domain.com`.

```
setcookie("viewed_articles", serialize($lastviewedarticles), time()+60*60*24*30, '/', '.domain.com'); 
```

此处的代码将 cookie 设置为 30 天，并且对于整个`domain.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:46:15.547

在 cookie 中设置域，以及仅 http 值 active 以避免可能的 xss

```
setcookie("viewed_articles", serialize($lastviewedarticles), time()+3600, '/', '.yourdomain.com',0,1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:41:56.953

有关setcookie，请参阅[php-docs 。](http://php.net/setcookie)您可以在过期值之后添加域和路径。

设置路径`/`和域以`.mydomain.com`使 cookie 对您的站点具有全局性。

# neo4j - 尝试按名称查询的示例数据集

> ID：15280191
> 
> 赞同：0
> 
> 时间：2013-03-07T19:38:19.293
> 
> 标签：neo4j

我正在尝试 neo4j，我`cineasts_39_movies_446_actors.zip`从[这里下载并成功配置了示例数据集](http://www.neo4j.org/develop/example_data)

我可以很好地查询节点1：

```
neo4j-sh (0)$ START n=node(1) RETURN n
==> +------------------------------------------------------------------------------------------------------------------------------------------------------------+
==> | n                                                                                                                                                          |
==> +------------------------------------------------------------------------------------------------------------------------------------------------------------+
==> | Node[1]{login:"micha",roles:["ROLE_ADMIN","ROLE_USER"],name:"Micha",password:"339f455efd4af00b3e62385f3b7ef694",__type__:"org.neo4j.cineasts.domain.User"} |
==> +------------------------------------------------------------------------------------------------------------------------------------------------------------+ 
```

如何查询名称为 Micha 的节点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:21:21.907

怎么样：

```
start n=node:User("login:micha") return n; 
```

索引查找的语法如下：

```
<node/relationship>:<index name>(<lucene query/shorthand single field lookup>) 
```

速记看起来像这样，并且更容易参数化：

```
start n=node:User(login="micha") return n; 
```

并像这样在 JSON 中参数化：

```
{query:"start n=node:User(login={username}) return n;", params:{username:"micha"}} 
```

# oracle - JPA2 PrimaryKey 与 Oracle 主键

> ID：15280194
> 
> 赞同：0
> 
> 时间：2013-03-07T19:38:26.320
> 
> 标签：oracle, jpa-2.0

oracle 表是否有可能具有复合主键 oracle sequenceid +createtimestamp 但 @Entity 类我们只有 @id (sequenceid) 主键？我们添加的时间戳是为了以后用于清除的表分区。在存储实体时，我们将一直添加时间戳值。从数据的角度来看，在这种情况下，id 是记录的主键。我可以单独使用主键作为 id 创建实体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:01:53.637

答案是肯定的。正如您所说，id 在表中将是唯一的，只需将 sequenceId 作为 PK 放在实体中就可以了。如果您不使用休眠来创建表或更新表的列，它并不关心数据库中的实际内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:54:55.640

在这种情况下，您必须在 @Entity 类中创建复合主键。您可以按照以下示例

```
@Entity
@Table(name="RELEASE_PERSON")
@IdClass(ReleasePersonPK.class)
public class ReleasePerson implements Serializable {

@Column(name="ORDER_NO", nullable=false, precision=2)
private Integer orderNo;

@Id
@Column(name="RELEASE_ID", insertable=false,updatable=false)
private long releaseId;

@Id
@Column(name="PERSON_ID", insertable=false,updatable=false)
private long personId;

@ManyToOne
@JoinColumn(name = "PERSON_ID", referencedColumnName = "PERSON_ID")
private Person person;

@ManyToOne
@JoinColumn(name = "RELEASE_ID", referencedColumnName = "ID")
private Release release; 
```

您的 Id Class 将如下所示

```
@Embeddable
public class ReleasePersonPK implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = -6286499269052596345L;

private Person person;

private Release release; 
```

在我在 ReleasePerson 表中的示例中，我们将拥有来自 rRelease(ID) 和 Person (Person_id) 的复合主键。

需要帮助请叫我。

# c# - 如何从图像制作视频文件

> ID：15280199
> 
> 赞同：0
> 
> 时间：2013-03-07T19:38:48.113
> 
> 标签：c#, video

我想知道如何从图像制作视频文件。

原因是我想制作一个屏幕捕获应用程序。

我将用 C# 对其进行编码并打算将屏幕捕获为

位图，然后将其写入文件。

不要告诉我使用可以在某处下载的库或 DLL。

我想知道如何处理原始字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T07:51:00.510

[可以使用免费库NReco.VideoConverter](http://www.nrecosite.com/video_converter_net.aspx)（也提供 nuget 包）生成视频，该库实际上是 FFMpeg 工具的 .NET 包装器。

有两种方法可以实现：

*   如果您已经有图像文件，最好的方法是使用特殊的“image2”格式（FFMpeg demuxer），FFMPeg 将直接读取文件以生成视频
*   VideoConverter支持实时流转换，可以实时制作视频。在这种情况下，应将“rawvideo”指定为输入格式，并且 C# 应用程序应将 RAW 位图字节（如问题中所述）作为实时流转换器的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T09:14:19.067

如果您真的想自己执行此操作（我不推荐），一种相对简单的方法是将您的 rgb 图像转换为 YCbCr 颜色空间，然后以 YUV4MPEG2 格式编写：[https ://wiki.multimedia.cx/index .php?title=YUV4MPEG2](https://wiki.multimedia.cx/index.php?title=YUV4MPEG2) 这可以保存为 *.y4m 文件，例如可以通过 VLC 打开。

请注意，这将是“未压缩”的，因此会产生巨大的文件（如果您选择使用 YCbCr 4:2:2 或 4:2:0，您会得到一点压缩，但远不及现代视频编码算法，如H.264 将实现）。

你为什么不想使用图书馆？我一直在这条路上。视频压缩甚至理解容器格式（如果您在该领域没有经验）是一件复杂的事情，正如我已经说过的，我不推荐它。

# caching - 在更新调用时收到来自源的错误后，Cloudfront 是否继续提供缓存的响应？

> ID：15280200
> 
> 赞同：2
> 
> 时间：2013-03-07T19:38:48.063
> 
> 标签：caching, amazon-cloudfront

我们已经将 Cloudfront 设置为我们自己的服务器作为其来源，并有一个缓存 60 秒（max-age）的 json 调用，并说我们成功地将响应缓存在 Cloudfront 中。现在，当 Cloudfront 尝试通过调用我们的服务器在 60 秒后更新 json 响应并且我们的服务器响应错误（或者当它关闭时根本没有响应）时会发生什么。它是继续提供旧响应，还是返回错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:08:13.833

根据 api 文档：

如果您的源服务器不可用并且 CloudFront 收到对边缘缓存中但已过期的对象的请求（例如，因为 Cache-Control max-age 指令中指定的时间段已过），CloudFront 将继续提供对象的过期版本。有关对象过期的更多信息

# networking - 使用套接字在 nat 后面连接一个 ip

> ID：15280201
> 
> 赞同：3
> 
> 时间：2013-03-07T19:39:00.727
> 
> 标签：networking, network-programming

考虑使用电话 A 连接到 wifi 的电话，地址为动态 Ip `ex:192.168.0.34`，并通过服务器套接字侦听，`port 7567,`如果我有另一部电话 B 连接公共电话，我可以通过什么方式使用任何编程语言连接到该套接字ip 说`10.0.0.56`，我有 wifi 路由器 ip 说 ex`55.56.89.76` 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:40:42.570

如果不使用端口转发，则无法直接连接到 NAT 后面的客户端。但是有一种称为打孔的技术可以通过 NAT 打开端口。

来自[维基百科](http://en.wikipedia.org/wiki/Hole_punching)：

> 打孔是一种计算机网络技术，用于在位于限制性防火墙后面的不同组织中的两方之间建立通信。用于在线游戏、P2P 和 VoIP 等应用程序，两个客户端都与不受限制的第三方服务器建立连接，该服务器为它们揭示外部和内部地址信息。由于每个客户端都向服务器发起了请求，因此服务器知道为该会话分配的 IP 地址和端口号，并与另一个共享。拥有有效的端口号会导致防火墙接受来自每一侧的传入数据包。ICMP打孔、UDP打孔和TCP打孔分别使用Internet控制消息、用户数据报和传输控制协议。使用 TCP 恶意打孔，它' 可以将压缩的 SYN 数据包发送到公共 ACK 路径。许多软件都这样做。

另请参阅与[此主题](https://stackoverflow.com/search?q=Hole%20punching)相关的问题。

# json - struts2 json 正则表达式

> ID：15280207
> 
> 赞同：0
> 
> 时间：2013-03-07T19:39:08.887
> 
> 标签：json, struts2, jqplot

我想将 jQPlot 与 Struts 一起使用，我有一个来自 struts 操作的 json 结果输出，例如：

```
{
    "jqPlotJSONFormat":
        "['18-03-2010',56],['19-03-2010',43],['17-03-2010',84]"
} 
```

但我想获得如下数据：

```
['18-03-2010', 56],
['19-03-2010', 43],
['17-03-2010', 84] 
```

这是我的动作映射：

```
@Action(value="getData", results = {
    @Result(name="success",type = "json", params = {
    "includeProperties","jqPlotJSONFormat"
})}) 
```

我想在 json 结果中隐藏 jqPlotJSONFormat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:43:17.543

[将根对象设置为 jqPlotJSONFormat](http://struts.apache.org/development/2.x/docs/json-plugin.html#JSONPlugin-RootObject)，大致（XML 版本）：

```
<result type="json">
  <param name="root">
    jqPlotJSONFormat
  </param>
</result> 
```

而不是参数中的“includeProperties”，使用“root”。这声明了 JSON 对象的根。使用“includeProperties”，动作仍然是根（例如，属性将被命名）。

# nginx - 为什么我的 nginx 位置规则不起作用？

> ID：15280219
> 
> 赞同：0
> 
> 时间：2013-03-07T19:40:00.497
> 
> 标签：nginx

我的目标是匹配从`/key/0/`以下类型开始的请求：

```
/key/0/(.*) 
```

到`page20.html`. 但是当请求发生时，服务器会以 404 响应：

```
198.81.214.48 - - [07/Mar/2013:19:13:46 +0000] "GET /key/0/i-digit/index.php/sample-sites HTTP/1.0" 404 169 "-" "-" 
```

我重新启动了nginx，仍然没有效果。这是我的配置文件：

```
server {
        listen   80 default;
        server_name  localhost;

        access_log  /var/log/nginx/localhost.access.log;
        location ~ ^/key/0/(.*)$ {
                alias  page20.html#$1;

        }

        location / {
                root   /var/www;
                index  index.html index.htm;
        }

        location /doc {
                root   /usr/share;
                autoindex on;
                allow 127.0.0.1;
                deny all;
        }

        location /images {
                root   /usr/share;
                autoindex on;
        }

        #error_page  404  /404.html;

        # redirect server error pages to the static page /50x.html
        #
        #error_page   500 502 503 504  /50x.html;
        #location = /50x.html {
        #       root   /var/www/nginx-default;
        #}

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
                #proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
                #fastcgi_pass   127.0.0.1:9000;
                #fastcgi_index  index.php;
                #fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
                #includefastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
                #deny  all;
        #}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:28:19.873

该`alias`指令正在您的本地文件路径上查找该页面。但是，您在该位置块中没有任何根设置，但我确实看到您的根设置`/var/www`为`location /`

所以我相信你正在寻找的是[rewrite](http://wiki.nginx.org/HttpRewriteModule#rewrite)，而不是别名。

所以尝试这样的事情：

```
location ~ ^/key/0/(.*)$ {
    set $target $1;
    rewrite /(.*)$ page20.html#$target permanent;
} 
```

# windows - I/O 完成端口静默读取失败

> ID：15280221
> 
> 赞同：0
> 
> 时间：2013-03-07T19:40:12.113
> 
> 标签：windows, file-io, io-completion-ports

我正在开发一个程序，该程序需要将大量数据写入磁盘，然后稍后再读回少量数据。它需要将相关数据“合并”在一起，然后一旦弄清楚如何处理它，就可以进一步处理数据。它基本上就像一个数据库，但在磁盘上有临时文件。临时文件的一部分被相当频繁地重用，因为我不关心磁盘上的数据在我读回它之后，所以文件的一部分可以被回收。我正在使用 I/O 完成端口来实现这一点，因为顺序 I/O 太慢了。

问题是有时当我读取数据时，我并没有全部取回。例如，我将我的读取缓冲区清零，执行 20 字节的读取操作，当相应的完成事件触发时，我的读取缓冲区中的一些甚至没有一个与磁盘上应该存在的内容匹配，但全部不会被清零。有时，我可以检测到这一点并尝试睡 5 秒并再次阅读相同的部分，它与我在第一次尝试中阅读的内容相匹配。这是在顶级 SSD 上进行的，因此 5 秒应该足够刷新到磁盘。但是，当我停止我的应用程序并查看文件的内容时，它在磁盘上是正确的。就好像之前的写入没有刷新到磁盘并且它尝试读取旧数据。

为了验证这个理论，我在阅读时尝试在整个部分上写 0xFF。当这个错误再次发生时，我的读取缓冲区没有像我预期的那样包含 0xFFs。所以大概，我不是在阅读旧数据。

我还检查以确保从完成事件返回的字节数与我传递给 ReadFile 的字节数匹配，并且它们确实匹配。完成事件或 ReadFile（ERROR_IO_PENDING 除外）没有返回错误。我正在使用 FILE_ATTRIBUTE_NORMAL、FILE_FLAG_OVERLAPPED 和 FILE_FLAG_RANDOM_ACCESS 创建我的临时文件。

我还尝试在尝试读取之前等待文件给定部分的所有挂起写入完成，但无济于事。我希望 Windows 会为我做到这一点，但我读过的任何文档中都没有涵盖它。

我真的不知道为什么我会得到看起来是部分或损坏的读取。我真的只是在寻找一些可能导致这种行为的想法，因为我全力以赴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:51:55.357

从您对同一个文件的相同部分进行写入和读取的事情的声音来看，有时读取返回的数据不是您认为您以前编写的数据。

我假设您在对文件的同一区域发出读取请求之前正在等待一条数据的写入完成？如果不是，读取可能在写入完成之前发生？当大量数据被写入同一个磁盘时，写入完成可能会开始变慢，并且写入可能会花费更多时间等待（注意这会消耗资源！）

就我个人而言，我会包括我自己的内存缓存层，它知道数据块，直到写入完成 - 如果写入尚未完成，您可以满足从缓存中读取文件的这一部分。

# vhdl - 我应该为内存地址使用什么 VHDL 数据类型？

> ID：15280222
> 
> 赞同：1
> 
> 时间：2013-03-07T19:40:14.883
> 
> 标签：vhdl, type-conversion

我正在开发 BIST 引擎的描述，我的经理要求我从 Verilog 过渡到 VHDL。我对 VHDL 非常生疏，我无法找出正确的数据类型来提供给我的代码中的地址寄存器。大多数时候，地址用于索引到数组中。

```
data : std_logic_vector (2**W-1 downto 0);
...
output = data(addr); 
```

但有时，我需要执行按位运算（例如，在地址中找到最低有效 1 的代码）：

```
least_one(0) <= addr(0);
PRIORITY_ENCODER : for i in 1 to (W-1) generate
    least_one(i) <= addr(i) and not or_reduce(addr(i-1 downto 0));
    end generate PRIORITY_ENCODER;
least_one(W) <= not or_reduce(addr); 
```

最后，我还依赖地址在溢出时环绕而不会出现问题（即 1111+1 = 0 和 0-1 = 1111）。

那么，考虑到所有这些不同的用途，我应该为地址提供什么数据类型或子类型？当我使用整数和相关类型时，执行按位运算时会出错：

```
ncvhdl_p: *E,APNPFX (filename,17|20): can not make sense of P(...) 
```

当我使用 std_logic_vector 或类似方法时，尝试将地址用作数组索引时会出错：

```
ncvhdl_p: *E,INTYMM (filename,52|17): array index type mismatch [6.4] 
```

我在这里似乎处于一个没有胜利的境地。我使用什么数据类型？请注意，解决方案必须是可合成的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:03:18.040

您想要按位访问和包装行为：

*   `addr`基本上是一个向量`unsigned`。

然后您需要以整数形式访问它：

*   如果您只需要在一行上将其作为整数，请仅`to_integer`在该行上使用调用。
*   如果您在多个地方需要它作为整数，请创建另一个信号来“遮蔽”它并在架构中放置一个连续赋值

像这样：

```
signal addr_int:natural;
....
addr_int <= to_integer(addr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:26:06.153

在这种情况下，我会使用`unsigned`类型。

这将与您习惯于在通用位访问方面进行操作的方式非常相似`std_logic_vector`，但您也可以对地址进行算术运算，并`integer`在必要时轻松转换为类型/从类型转换。另外，它不会弄脏`std_logic_vector`“可怕”`std_logic_unsigned`包装的感觉。

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

...

architecture myarch of myent is
   signal address : unsigned(numbits-1 downto 0);

   ...

begin

-- as an example
addr_counter : process(sysclk, reset)
begin
   if reset = '1' then
      address <= (others => '0');
   elsif rising_edge(sysclk) then
      address <= address + 1;
   end if;
end process addr_counter;
... 
```

# c# - 使用 .NET 4.5 和 IIS 的 MVC 中的应用程序死锁

> ID：15280223
> 
> 赞同：9
> 
> 时间：2013-03-07T19:40:19.770
> 
> 标签：c#, asp.net, .net, asp.net-mvc, iis

在最近将应用程序更新到 .NET 4.5 后，我开始注意到在来自 Javascript 的 AJAX 调用期间与控制器（*及其关联的操作*）相关的一些奇怪行为被“阻止”。

这些问题通常是不一致的，但如果通过异步 AJAX 调用访问控制器并且在此请求期间进行了另一个调用（*通过 AJAX 或传统方式*），则会导致这些问题。

这导致原始呼叫被“阻止”，通常需要 1-2 分钟才能解决此“死锁”并按预期执行操作。

**示例场景**

*   用户单击一个链接，该链接将在 ViewData 中临时存储一个值，
    以便在下一个请求时访问。

*   发生重定向并访问另一个控制器（*应该如此*）并在加载 AJAX 调用后进行。

*   在此 AJAX 调用（*正确访问 ViewData 值*）期间，会快速进行其他调用（*例如用户立即单击链接以导航到另一个控制器*）。单击此链接后，将出现“死锁”，浏览器将变得无响应。

    *或者*

*   调用将成功执行（*只要它没有被另一个请求中断*），但尝试执行前面的步骤将失败。

**附加信息**

*   如前所述，这个问题是相当不一致的，因为它通常会在第一个请求*（AJAX 调用*）上正确执行，只要它没有被中断。但是，如果您尝试再次拨打相同的电话，它将失败。

*   使用 Browser Profiler / Fiddler / Development Tools (F12)，第二个 AJAX 调用正在进行，但它似乎从未执行。（即使在 AJAX 调用中放置断点，但是尽管调用了断点，但永远不会命中）。

*   此问题仅在 Internet Explorer 9 或更低版本中发生。

*   该应用程序使用 MVC3、.NET Framework 4.5、IIS 7.5 并在 Visual Studio 2012 中开发。

**尝试的解决方案**

*   **SessionState** - 尝试用于`SessionStateBehavior.ReadOnly`避免可能在相关控制器上发生的任何阻塞问题。

*   **临时存储**- 使用各种不同的方式在 Controller 之间传递临时值，例如 ViewData、Session 和 Cache。

*   **ITempDataProvider** - 目前正在考虑实现一个提供程序来处理任何临时值，以便可以将项目迁移到更加无会话的解决方案。

* * *

## 更新

在咨询了 ASP.NET 团队的几位成员和一些其他社区贡献者后，确定该问题实际上是 .NET 4.5 中的一个错误。

[您可以在我就同一主题撰写的这篇博客文章中](http://rionscode.wordpress.com/2013/03/11/resolving-controller-blocking-within-net-4-5-and-asp-net-mvc/)阅读有关该问题的更多信息，并在此处更新修复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:19:57.380

我们在测试和生产环境中也遇到过类似的问题。我们注意到只有在安装 .net 4.5 后才会发生这种情况。（删除 .net 4.5 修复了该问题。）如果您在 Visual Studio Development Server 中调试应用程序或将 AppPool 设置为经典模式，则不会发生这种情况。它似乎与集成模式下的 AppPool 的 IIS 7.5 和 .net 4.5 有关。

我发现其他人有问题，但没有明确的答案。 [访问会话时，IE 双回发在集成托管管道模式下挂起 IIS 7](https://stackoverflow.com/questions/14963635/ie-double-postback-hangs-iis-7-in-integrated-managed-pipeline-mode-when-session)

# javascript - Foundation 4 Orbit - 将我发送到页面顶部的深层 链接

> ID：15280230
> 
> 赞同：1
> 
> 时间：2013-03-07T19:40:38.273
> 
> 标签：javascript, html, zurb-foundation, orbit

我正在尝试在我的页面中实现一个轨道滑块。这仅适用于图像和常规项目符号，但是当我向其中添加深层链接时，每个深层链接的 # href 都会被触发，并且我会被发送回页面顶部。我什至不知道数据轨道链接是否正常工作。

```
<div class="row">
  <ul id="featuredCom" data-orbit>
    <li data-orbit-slide="image-1">
      <img src="images/featureimages/slide2.jpg" />
    </li>
    <li data-orbit-slide="image-2">
      <img src="images/featureimages/slide1.jpg" />
    </li>
    <li data-orbit-slide="image-3">
    <img src="images/featureimages/slide3.jpg" />
    </li>
 </ul>
</div>
 <div class="row">
   <ul class="inline-list">
      <li><a href="#" data-orbit-link="image-1">Image One</a></li>
      <li><a href="#" data-orbit-link="image-2">Image Two</a></li>
      <li><a href="#" data-orbit-link="image-3">Goto Three 3</a></li>
   </ul>
 </div>

<script>
$(window).load(function(){
  $('#featuredCom').orbit({

 });
});
</script> 
```

我没有更改 orbit.js 文件中的任何内容，所以我看不出是什么原因造成的。来回阅读 Foundation 4 orbit 文档，看看我是否遗漏了什么，但即使复制他们的代码，深层链接的行为方式也是如此。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:46:13.810

你可以使用 javascript: void(0);

```
<a href="javascript: void(0);" data-orbit-link="image-1">Image One</a> 
```

并使用

```
$(document).foundation(); 
```

# android - 在模拟器 SDK Tools 21.1 右侧启用键盘

> ID：15280235
> 
> 赞同：0
> 
> 时间：2013-03-07T19:40:59.293
> 
> 标签：android, keyboard, emulation

我有最新的 Android 开发工具和 SDK 工具（修订版 21.1），似乎无法启用通常在模拟器右侧看到的键盘。我似乎也无法在“编辑设备”对话框中找到相关设置。这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:45:22.517

您也可以从键盘发出命令。[http://developer.android.com/guide/developing/tools/emulator.html](http://developer.android.com/guide/developing/tools/emulator.html)

如果您在 AVD 中输入手动分辨率，它将不会显示键盘只需选择任何默认分辨率键盘就会开始显示

# python - 将方法参数传递给其父类构造函数（Flask -- ModelView.as_view()）

> ID：15280238
> 
> 赞同：2
> 
> 时间：2013-03-07T19:41:10.873
> 
> 标签：python, flask

这更像是一个普通的 Python 问题，而不是 Flask 问题。

这段代码来自[https://github.com/mitsuhiko/flask/blob/master/flask/views.py#L18](https://github.com/mitsuhiko/flask/blob/master/flask/views.py#L18)。

```
@classmethod
def as_view(cls, name, *class_args, **class_kwargs):
    """Converts the class into an actual view function that can be used
    with the routing system.  Internally this generates a function on the
    fly which will instantiate the :class:`View` on each request and call
    the :meth:`dispatch_request` method on it.

    The arguments passed to :meth:`as_view` are forwarded to the
    constructor of the class.
    """
    def view(*args, **kwargs):
        self = view.view_class(*class_args, **class_kwargs)
        return self.dispatch_request(*args, **kwargs)

    if cls.decorators:
        view.__name__ = name
        view.__module__ = cls.__module__
        for decorator in cls.decorators:
            view = decorator(view)

    # we attach the view class to the view function for two reasons:
    # first of all it allows us to easily figure out what class-based
    # view this thing came from, secondly it's also used for instantiating
    # the view class so you can actually replace it with something else
    # for testing purposes and debugging.
    view.view_class = cls
    view.__name__ = name
    view.__doc__ = cls.__doc__
    view.__module__ = cls.__module__
    view.methods = cls.methods
    return view 
```

有人可以向我解释这个`as_view()`函数如何将它的参数转发给`View`类的构造函数，就像它在方法注释中所说的那样？

如果不是直接的解释，也许会朝着正确的方向推进，特别是我需要了解 Python 方面的知识，以便更好地了解正在发生的事情。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:35:36.497

这一行是关键：

```
self = view.view_class(*class_args, **class_kwargs) 
```

它接受传递给的参数`as_view`并使用它们来创建`view`带有这些参数的实例。

# python - 奇怪的 Python 错误 - 来自 cron 的错开（ID3）编码错误，但不是来自命令行

> ID：15280240
> 
> 赞同：1
> 
> 时间：2013-03-07T19:41:16.390
> 
> 标签：python, character-encoding, python-3.x, cron, id3

我有一个程序可以扫描我的 mp3 并创建一个信息数据库。源代码在[github 上](https://github.com/andrewcooke/uykfg)。

当我从命令行运行[update.sh](https://github.com/andrewcooke/uykfg/blob/master/update.sh)脚本时，它工作正常。当我将它作为 cron 作业运行时，我会看到如下错误（确切的代码会有所不同）：

> 'utf-8' 编解码器无法对位置 37 中的字符 '\udce2' 进行编码：不允许代理

查看日志，我看到为曲目标题打印的数据略有不同。从命令行调用时，我看到：

```
DEBUG:root:delegating artist Wendy Carlos, track "Jesu, Joy of Man’s Desiring", BWV 147 No. 10 to finder 
```

但是当从 cron 运行时，我看到：

```
DEBUG:root:delegating artist Wendy Carlos, track "Jesu, Joy of Man\u2019s Desiring", BWV 147 No. 10 to finder 
```

在这两种情况下，“track”后面的文本都是 stagger 库 (tag.title) 中的 ID3 标记。

现在[stagger](https://code.google.com/p/stagger/)是一个纯 Python 库，它似乎对相同的输入给出不同的结果。因此，虽然我可以说这是一个错误，并留给他们修复，但我猜环境中的某些东西在命令行和 cron 之间有所不同。但是什么？在这两种情况下，python 都是从 virtualenv 调用的（参见上面链接的脚本）。

所以我的问题是 - 什么样的事情会导致这种情况？这不可能是魔术。必须有一个合理的解释...

[另外，在这种情况下，它是根据kid3的v2.4 ID3]

[另外，公平地说，尚不清楚是否是 Stagger 导致了错误。可能是它返回相同的值，但 python 在这两种情况下处理它的方式不同。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:59:29.700

这可能是由于`LANG`环境变量的值不同。详情请参阅[这篇](http://wiki.python.org/moin/PrintFails)文章。

# vb.net - LINQ 比 ADO 快吗？

> ID：15280245
> 
> 赞同：1
> 
> 时间：2013-03-07T19:41:25.140
> 
> 标签：vb.net, performance, linq, ado.net

我是 LINQ 的新手，所以为了开始探索，我创建了一个多线程时间应用程序来查看更快的 LINQ 或 ADO。这个应用程序计算我在回家之前工作了多长时间。定时器设置为 1 秒，调用同一个 SP。

我错过了什么吗？

```
Imports System.Data.SqlClient
Imports System.Threading

Public Class Time

Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    lblADOTime.Text = ADO()
    lblTime.Text = Net()
    lblLinq.Text = tLinq()

End Sub

Private Sub Time_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim tADO As Thread
    Dim tNet As Thread
    Dim tLinq As Thread
    tADO = New Thread(AddressOf Me.ADO)
    tADO.Start()
    tNet = New Thread(AddressOf Me.Net)
    tNet.Start()
    tLinq = New Thread(AddressOf Me.tLinq)
    tLinq.Start()
End Sub
Private Function tLinq() As String
    Dim db As New DataClasses1DataContext
    'db.Connection.Open()

    Dim myDate As String
    myDate = Date.Today + " 17:00:00"
    Return "LINQ: " + db.TimeLeftToday(myDate).ToList().Last.Column1

    'db.Connection.Close()

End Function
Private Function Net() As String
    Dim a As DateTime
    a = Date.Today + " 17:00:00"
    Dim s As String
    s = (a - Now()).ToString
    Return ".NET: " + s 's.Substring(1, 8)

End Function

Private Function ADO() As String
    Try
        Dim conn As New SqlConnection()
        conn.ConnectionString = meh

        Dim cmd As New SqlCommand("TimeLeftToday", conn)

        cmd.CommandText = "TimeLeftToday"
        cmd.CommandType = CommandType.StoredProcedure
        cmd.Parameters.Add(New SqlParameter("@Today", SqlDbType.DateTime, 0, "@Today"))
        cmd.Parameters(0).Value = Date.Today + " 17:00:00"
        cmd.Connection = conn
        conn.Open()
        Dim sdr As SqlDataReader = cmd.ExecuteReader()
        sdr.Read()
        If sdr.HasRows Then

            Return "ADO: " + sdr.GetValue(0)

        End If
        conn.Close()
    Catch ex As Exception
        MsgBox(ex.Message)

    End Try

End Function

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:46:24.527

LINQ to SQL 在下面使用 ADO.NET，所以它不可能更快。

您可能会问，为什么人们使用它，当它的性能更差时？因为在某些情况下，性能并不是那么重要。而且你必须管理，LINQ to SQL 更容易使用！并且正因为如此，开发过程可以更快、更容易并且以对开发人员更友好的方式完成。

# c# - 以编程方式添加控件时，如何使控件彼此保持一定距离？

> ID：15280250
> 
> 赞同：2
> 
> 时间：2013-03-07T19:41:52.363
> 
> 标签：c#, winforms, controls

我有一个面板，我以编程方式向它添加控件。我希望每个控件都远离其他控件，而不是停留在它们之上。

为此，我可以根据`Panel`的大小计算每个控件的位置，但这似乎有点奇怪。

有没有办法让控件被添加到一行中，当它结束时它们被添加到另一行中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:43:36.437

您可以使用 FlowLayoutPanel 来实现您所描述的内容。它位于工具箱中的容器下。将方向设置为水平，它将从左向右流动，并在需要时换行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:43:50.187

我相信[WrapPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.wrappanel.aspx)类可以满足您在 WPF 中描述的功能。或者 WinForms 中的[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:01:17.567

你有几个选择。您可以使用其中一种容器，例如[`FlowLayoutPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)或[`TableLayoutPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)。您也可以将它们嵌套在一起。您必须为[`Margin`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.margin.aspx)添加到容器中的每个控件设置属性。

遗憾的是Windows Forms技术在这方面稍有欠缺，而WPF有非常丰富的布局系统。即使是这样的事情[`Margin`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.margin.aspx)也并不总是按预期工作。

# arrays - Excel VBA 从 Txt 文件中提取指定的开始和长度

> ID：15280253
> 
> 赞同：1
> 
> 时间：2013-03-07T19:42:01.617
> 
> 标签：arrays, excel, vba

我有一个运行没有失败的 Excel 2007 代码。

1.  但它非常慢 - 让我的电脑在运行的 1-2 分钟内没有响应。
2.  这些文件大约有 14,000 kb - 所以不会太大。

如果可能的话，我希望有人告诉我我可以做些什么来让它运行而不会导致我的计算机挂起。提前致谢。

```
Sub ReadFileIntoExcel()

Dim fPath As String
Const fsoForReading = 1
Dim readlength As Integer
Dim readstart As Integer
readlength = Worksheets("READFILE").Cells(1, "E").Value
readstart = Worksheets("READFILE").Cells(1, "D").Value
fPath = Worksheets("READFILE").Cells(1, "C").Value

Dim objFSO As Object
Dim objTextStream As Object, txt, allread, rw

Set objFSO = CreateObject("scripting.filesystemobject")
If objFSO.FileExists(fPath) Then
Set objTextStream = objFSO.OpenTextFile(fPath, fsoForReading)
rw = 1

Do Until objTextStream.AtEndOfStream
    txt = objTextStream.ReadLine
    allread = Trim(Mid(txt, readstart, readlength))
    With ActiveWorkbook.Sheets("READFILE").Cells(rw, 7).Resize(1, 1)
        .NumberFormat = "@" 'format cells as text
        .Value = Array(allread)
    End With
    rw = rw + 1
Loop

objTextStream.Close
Set objTextStream = Nothing
Set objFSO = Nothing
Exit Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:37:38.357

我更新了您的代码以使用数组而不是逐个单元格写入，它立即运行

进行的优化

1.  避免单元格范围循环，尤其是逐个单元格地编写。请改用数组。这是最大的
2.  `Resize(1,1)`什么都不做，因为它将单元格保持为单个单元格
3.  `Long`比`Integer`
4.  使用字符串函数`Mid$`而不是它们较慢的变体替代方案`Mid`
5.  该`allread`变量是不必要的中间步骤
6.  使用对象的变量名（即`ws`工作表），防止更长的引用

**代码**

```
Sub ReadFileIntoExcel()

Dim fPath As String
Dim ws As Worksheet
Const fsoForReading = 1
Dim readlength As Long
Dim readstart As Long
Dim rw as Long
Dim X()

Set ws = Worksheets("READFILE")
readlength = ws.Cells(1, "E").Value
readstart = ws.Cells(1, "D").Value
fPath = ws.Cells(1, "C").Value

Dim objFSO As Object
Dim objTextStream As Object

Set objFSO = CreateObject("scripting.filesystemobject")
If objFSO.FileExists(fPath) Then
Set objTextStream = objFSO.OpenTextFile(fPath, fsoForReading)
rw = 1

ReDim X(1 To 1, 1 To 1000)

Do Until objTextStream.AtEndOfStream
    txt = objTextStream.ReadLine
    If rw Mod 1000 = 0 Then ReDim Preserve X(1 To 1, 1 To UBound(X, 2) + 1000)
    X(1, rw) = Trim$(Mid$(txt, readstart, readlength))
    rw = rw + 1
Loop

ws.[G1].Resize(UBound(X, 2), 1) = Application.Transpose(X)
ws.Columns("G").NumberFormat = "@"

objTextStream.Close
Set objTextStream = Nothing
Set objFSO = Nothing
Exit Sub
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:46:38.760

您可以尝试在更新单元格时关闭屏幕更新。如果您要触摸大量单元格，这肯定会加快速度。

```
Application.ScreenUpdating = False
...update cells...
Application.ScreenUpdating = True 
```

您还可以执行其他操作，例如关闭计算，但听起来您没有试图评估您设置的单元格的公式。

# backbone.js - requirejs + 骨干js + 优化器 = 骨干未定义

> ID：15280256
> 
> 赞同：0
> 
> 时间：2013-03-07T19:42:09.150
> 
> 标签：backbone.js, requirejs

在 indexview 模块中不会调用 Backbone。

使用requirejs 2.1.5/2.1.4 和backbonejs 0.9.10

运行 r.js 后的 main.js

```
...
// this is causing the backbone to return 
// null/undefined in the next define call below
define("backbone", function(){}); 

define('views/index/IndexView', [
    'underscore',
    'backbone',
    'text!templates/index/indexTemplate.html'  
], function(_, Backbone, indexTemplate){

    console.log(Backbone); // returns undefined
    var IndexView = Backbone.View.extend({
... 
```

但是，如果我取出第一个将主干注册为模块的定义调用，一切正常。但是backbone-min.js 是单独加载的。但目前这是使脚本运行的唯一方法。我肯定在这里遗漏了一些东西。

**main.js**

```
require.config({
    paths: {
        underscore  : 'libs/underscore/underscore-min',
        backbone    : 'libs/backbone/backbone-min'
        templates   : '../templates'
    },
    shim: {        
        'backbone': {
            deps: ['jquery','underscore'],
            exports: 'Backbone'
        }
    }
});

require(['app'], function(App){
    App.initialize();
}); 
```

**构建.js**

```
({
    appDir: "../",
    baseUrl: "js",
    dir: "../../build",
    optimize: "none",
    paths: {
        "jquery": "libs/requirejs/require-jquery",
        "underscore" : 'libs/underscore/underscore-min',
        "backbone": 'libs/backbone/backbone-min',
        "templates": '../templates',
    },
    modules: [
        {
            name: "main",
            exclude: ["jquery"]
        }
    ]    
}) 
```

我仍然被骨干和requirejs弄湿了。非常感谢任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:02:08.827

首先，你不需要那个define('backbone',...)。无论如何，那部分是什么？您不需要将 Backbone 定义为模块。Requirejs 的工作是让 Backbone 可供您在整个框架中使用。正如您在代码中看到的，通过调用 Backbone.View.extend()，Backbone 已经存在。如果你想检查它，不要使用console.log，而是使用console.dir。在 chrome 检查器中，它很好地格式化了输出。

其次，在 shim 中的主干 deps 数组中添加下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T08:51:46.383

我刚刚遇到了这个问题，您需要将 main.js 中的“垫片”添加到您的 build.js 文件中，并且会像魅力一样工作；）

# php - 从 php 类访问外部函数

> ID：15280258
> 
> 赞同：-1
> 
> 时间：2013-03-07T19:42:20.277
> 
> 标签：php

您好，假设我的应用程序中有以下结构。

```
<?
include('includes/functions.php');
include('includes/classes/login.class.php');

$login = new login();

?> 
```

我想要的是在 login 类中调用在 functions.php 中定义的函数。但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:44:44.637

PHP 不关心您在哪个文件中存储了什么函数或类定义。只有命名空间、顺序或处理，当然还有在类或函数内部你有什么定义很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:45:49.917

你在做什么是正确的。

包含 php-code 只是将该文件的内容添加到执行包含的文件中。如果这不起作用，则您的代码有其他问题。

你应该关闭这个问题并提出一个新问题。包括您要包括的文件的内容以及显示的错误。

# c - 时间执行可以出现

> ID：15280268
> 
> 赞同：0
> 
> 时间：2013-03-07T19:43:09.087
> 
> 标签：c

```
#include <conio.h>
#include <stdio.h>
#include<time.h>
double multi();

void main()
{
    clrscr();
    clock_t start = clock();
    for (int i = 0; i < 1000; i++)
    {
        multi();
        //printf("Answer (%d)",s);
    }
    clock_t end = clock();
    float diff;
    diff = (float) (end - start) / CLOCKS_PER_SEC;
    printf("time execution :%f", diff);
    getch();
}

double multi()
{
    double a;
    a = 5 * 5;
    return a;
} 
```

执行时间显示为 0.000000 什么问题！

会不会是 nanoseconeds 的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:56:31.640

该[`clock()`](http://linux.die.net/man/3/clock)功能的人说：

> clock() 函数返回程序使用的处理器时间的**近似值**。

近似值，所以它不会是精确的，它取决于你系统的粒度。因此，对于初学者，您可以通过以下方式检查系统上的粒度`clock()`：

```
clock_t start =clock(), end;
while(1)
{
    if(start != (end=clock()))
        break;
}
diff=(float)(end - start)/CLOCKS_PER_SEC;
printf("best time :%f",diff); 
```

为我这样做，我得到 0.001（即 1ms），所以任何花费不到 1ms 的事情我都会得到“0”。这就是发生在你身上的事情，你的代码比`clock()`s 粒度运行得更快，所以你得到了最好的近似值，恰好是“0”

# c# - XmlReader Read() 异常

> ID：15280269
> 
> 赞同：0
> 
> 时间：2013-03-07T19:43:11.353
> 
> 标签：c#, asp.net, xml, stream

我正在尝试使用 xmlreader 读取 xml 文件，这是我的代码：

```
public XmlReader LoadXMLToReader(string inputXMLPathFile)
{
    byte[] xmlData = Encoding.UTF8.GetBytes(inputXMLPathFile);
    MemoryStream xmlStream = new MemoryStream(xmlData);
    xmlStream.Position = 0;

    XmlReader reader = XmlReader.Create(xmlStream);
    reader.Read();
    return reader;
} 
```

该函数给我一个错误`reader.read()`“根级别的数据无效。第 1 行位置 1”，我读到了 BOM，那么如何修复此函数以防止该 BOM？

```
<?xml version="1.0" encoding="UTF-8" ?>
<Columns>
  <Column>1</Column>
  <Column>2</Column>
  <Column>3</Column>
</Columns> 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:55:57.043

问题出在这行代码：

```
byte[] xmlData = Encoding.UTF8.GetBytes(inputXMLPathFile); 
```

您正在将*文件名*传递给一个函数，该函数返回一个字符串的二进制表示 - 传递给该函数的实际字符串，而不是某种神奇的文件，该文件引用了作为字符串值偶然传入的路径。

有许多选项可以简化您的方法。其中之一是：

```
public XmlReader LoadXMLToReader(string inputXMLPathFile)
{
    return XmlReader.Create(File.Open(inputXMLPathFile, FileMode.Read));
} 
```

# python - 如何在列表中找到一系列数字的长度？（有没有比我正在做的更快的方法？）

> ID：15280271
> 
> 赞同：2
> 
> 时间：2013-03-07T19:43:12.770
> 
> 标签：python, list

我有一个包含 1 或 0 的列表；没有其他的。我有兴趣找到 1，更具体地说，有兴趣找到 1 的运行开始位置和运行结束的位置（或在下面的代码中，1 运行的“长度”......它可以是“长度” “该运行的结束索引位置或该运行的结束索引位置，因为我可以做数学计算并从开始位置和结束位置计算出长度）。我将 1 的运行存储在哈希中。有没有比我拥有的更快的方法来获得我所追求的？我还在学习 python，我在现实生活中使用的列表要大得多，所以速度很重要。

```
previous = 0
cnt = 0
startLength = {} 
for r in listy: 
    if previous == 0 and r == 1:
        start = cnt
        startLength[start] = 1
    if previous == 1 and r == 1: 
        startLength[start] = 1 + cnt - start 
    previous = r
    cnt += 1

for s,l in startLength.iteritems():
    print "A run of 1's starts at position %s and lasts %s" % (s,l) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T19:49:08.250

我可能会用`itertools.groupby`这个

```
lst = [ 1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0]

from itertools import groupby
from operator import itemgetter

for k,v in groupby(enumerate(lst),key=itemgetter(1)):
    if k:
        v = list(v)
        print v[0][0],v[-1][0] 
```

这将打印 1 组的开始和结束索引

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:10:40.077

除了@mgilson's pythonic answer之外，您还可以尝试以下操作：

```
lst = [1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1]

start, end = False, False

for i, x in enumerate(lst):
    if x == 1 and start is False:
        start = i
    if x == 0 and start is not False and end is False:
        end = i-1
    if start is not False and end is not False:
        print start, end  # and len is (end-start+1)
        start, end = False, False

if start is not False:
    print start, i 
```

**输出**：

```
0 4
12 15
22 23 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:50:43.793

这是一个稍微更有效的解决方案（对不起，它是 JavaScript）。关键是只存储一次长度，在您的代码中，每次长度增加一个“startLength [start] = 1 + cnt - start”时，您都会进行计算。

通过使用条件“if previous == 0 and r == 1”而不是“if previous == 1 and r == 1”。我减少了计算量，但我还必须在 for 循环之后添加一个“if r == 1”来捕获最终情况。

```
var test=[0,1,1,1,0,0,0,1,1,0,0,1,0];
function runs(arr) {
    var result = {};
    var start = 0;
    var previous = 0;
    var cnt = 0;
    var r = 0;
    for(; cnt<arr.length; cnt++) {
        var r = arr[cnt];
        if(r == 1 && previous == 0)
            start = cnt;
        if(r == 0 && previous == 1)
            result[start] = cnt - start;
        previous = r;
    }
    if(r == 1)
        result[start] = cnt - start;
    return result;
}
var result = runs(test);
for(var start in result)
    console.log("start " + start + " length " + result[start]); 
```

**编辑 2**这是一个 python 基准测试，显示使用 groupby 函数（目前是这个问题的最佳答案）要慢得多。

```
from itertools import groupby
from operator import itemgetter
import random
import time

lst = [ 1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0]

def makeList(size):
    random.seed()
    return [random.randint(0,1) for r in xrange(size)]

def runs1(lst, showOutput):
    startLength = {}
    for k,v in groupby(enumerate(lst),key=itemgetter(1)):
        if k:
            v = list(v)
            startLength[v[0][0]] = v[-1][0] + 1 - v[0][0]
    if showOutput == True:
        for s,l in startLength.iteritems():
            print s,l

def runs2(lst, showOutput):
    previous = 0
    cnt = 0
    startLength = {} 
    for r in lst: 
        if previous == 0 and r == 1:
            start = cnt
        if previous == 1 and r == 0: 
            startLength[start] = cnt - start
        previous = r
        cnt += 1
    if r == 1:
        startLength[start] = cnt - start
    if showOutput == True:
        for s,l in startLength.iteritems():
            print s,l

testList = makeList(10)
print "slow version"
runs1(testList, True)
print "fast version"
runs2(testList, True)

benchmarkList = makeList(10000)

start = time.time()
runs1(benchmarkList, False)
print "slow ", time.time() - start
start = time.time()
runs2(benchmarkList, False)
print "fast ", time.time() - start

start = time.time()
runs1(benchmarkList, False)
print "slow ", time.time() - start
start = time.time()
runs2(benchmarkList, False)
print "fast ", time.time() - start

start = time.time()
runs1(benchmarkList, False)
print "slow ", time.time() - start
start = time.time()
runs2(benchmarkList, False)
print "fast ", time.time() - start 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T19:46:56.250

如果您将列表转换为字符串，则可以为此使用正则表达式。

```
import re
import random

int_list = [random.randint(0,1) for i in xrange(1000000)]
runs = re.findall('1+', ''.join(map(str, int_list) # get a list of one-runs

# Print their lengths.
for run in runs:
    print len(run)

# If you really need to know the indexes where the runs are found, instead use
runs = re.finditer('1+', ''.join(map(str, int_list) # get a list of matches
for run in runs:
    print 'Start:\t%s' % run.start()
    print 'End:\t%s' % run.end()
    print 'Length:\t%s' % run.end()-run.start() 
```

# ios - 视图更改时如何保留 UITextField 文本

> ID：15280280
> 
> 赞同：0
> 
> 时间：2013-03-07T19:43:41.303
> 
> 标签：ios, objective-c, xcode, uitextfield

我有两个`UITextFields`，我将它们的输入存储到字符串`player1`和`player2`. 这些`UITextFields`是`ViewController`由 popOver segue 调用的。`UITextFields`一旦视图发生变化，我怎样才能让他们的文本继续显示？

我尝试`textFieldOne.text = player1;`在该`viewDidLoad`部分`ViewController`无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:20:20.987

如果您加载的视图的委托不是`ViewController`，您的代码将不会被执行。因此，请确保您的代码位于已加载视图的委托上。也用`[textFieldOne setText:player1]`。调用 setter 方法总是比直接设置 ivar 更好。然后确保你`UITextField`的不是 nil 并且正确绑定。用于`textFieldOne = [[UITextField alloc] init]`初始化它。如果您的问题仍然存在，请尝试`[textFieldOne setText:self.player1]`. 希望能帮助到你..

编辑：在这里得到解决方案。你应该使用`NSUserDefaults`这样你的播放器名称被存储并且可以在每个视图中使用，甚至在重新打开你的应用程序之后（如果你不想要这个，你可以在午餐时删除默认值。这是你需要更改的一堆代码：

hardOne.m：

```
- (void)viewDidLoad
{
[super viewDidLoad];
[hard1ON setOn:switchState animated:NO];
//read player names to user defaults
[textFieldOne setText:[[NSUserDefaults standardUserDefaults] stringForKey:@"player1"]]; 
[textFieldTwo setText:[[NSUserDefaults standardUserDefaults] stringForKey:@"player2"]];
}

- (IBAction) returnKey1
{
player1 = [textFieldOne text];
[players addObject:(player1)];
//set player1's name to user defaults
[[NSUserDefaults standardUserDefaults] setValue:[textFieldOne text] forKey:@"player1"];
}

- (IBAction) returnKey2
{
player2 = [textFieldTwo text];
[players addObject:(player2)];
NSLog(@"array: %@",players);
//set player2's name to user defaults
[[NSUserDefaults standardUserDefaults] setValue:[textFieldTwo text] forKey:@"player2"];
} 
```

# jquery - 如何将 TinyMCE 永久包装器添加到内容区域

> ID：15280282
> 
> 赞同：6
> 
> 时间：2013-03-07T19:43:46.740
> 
> 标签：jquery, tinymce

我想向`<div class="well">`tinymce 内容主体添加一个包装器。但我不希望它与内容一起保存。所以它只会改进所见即所得，因为内容会在`<div class="well"></div>`发布时显示。使用 tinymce 时，此包装器应该是不可删除的。有什么想法吗？

**更新：** 这里是例子： [http ://unsalkorkmaz.com/twitter-embeds-in-wrong-language/](http://unsalkorkmaz.com/twitter-embeds-in-wrong-language/)

检查其评论表。基本上我将body的背景移到了html，并将“well”类设置为body。它是一个快速修复，我不太喜欢 tbh。必须有某种方法可以在编辑器主体内添加永久根块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T06:04:53.323

我想拥有相同的功能，这就是我解决它的方法（使用 Jquery 进行 DOM 操作）：

```
$('textarea#id_body').tinymce({
    ....
    ....
    init_instance_callback : make_wysiwyg
}); 
```

这就是 make_wysiwyg 代码的样子：

```
var make_wysiwyg = function(inst){
    var tmceIframe = $(".mceIframeContainer iframe")[0].contentDocument || $(".mceIframeContainer iframe")[0].contentWindow.document;
    $(tmceIframe).find("body#tinymce article").wrapInner('<div class="post-content"/>');
} 
```

现在，要删除我们添加的这个额外的 html，您可以在表单提交按钮上执行 onClick 事件，在调用 form.submit 之前，调用以下函数：

```
var strip_wysiwyg = function() {
    var tmceIframe = $(".mceIframeContainer iframe")[0].contentDocument ||     $(".mceIframeContainer iframe")[0].contentWindow.document;
    $post_content_wrapper = $(tmceIframe).find("body#tinymce div.post-content");
    $post_content = $post_content_wrapper[$post_content_wrapper.length-1];
    $($(tmceIframe).find("body#tinymce")[0]).html($($post_content).html());
}; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:52:24.793

您需要使用提供的[save_callback](http://www.tinymce.com/wiki.php/Configuration%3asave_callback)连接到 TinyMCE 的保存过程。

这将允许您指定将在 TinyMCE 完成保存之前调用的函数，从而允许您注入内容。

一个简单的例子，使用 jQuery 处理 div 插入：

```
function add_custom_div(element_id, html, body) {
        var dom = $(html);
        if ($('div.well').length < 1)
        {
            dom.wrap("<div class='wrap' /><div class='well'");
            html = dom.html();
        }
        return html;
}

tinyMCE.init({
        ...
        save_callback : "add_custom_div"
}); 
```

如果您需要确保 div 始终存在于 TinyMCE 中，并且用户无法删除它，您将需要使用[noneditable_regexp](http://www.tinymce.com/tryit/noneditable_content.php)选项。

通过此属性，您可以提供一个正则表达式，当 TinyMCE 匹配该正则表达式时，将拒绝用户更改它的任何尝试。

# c# - 在 lambda 表达式中使用 AND 运算符的 Lambda 表达式

> ID：15280285
> 
> 赞同：2
> 
> 时间：2013-03-07T19:43:52.790
> 
> 标签：c#, .net, linq, entity-framework, lambda

我收到一个错误（

> 你调用的对象是空的

）当我尝试进行数据库操作时，我似乎找不到问题所在，一定是`p.ADRESA.Equals(listBox1.SelectedItem.ToString()`因为没有它，代码可以工作，但我需要两个条件，请帮忙

```
 Int16 idValoare =Convert.ToInt16 (comboBoxIDValoare.SelectedItem.ToString());

        if (selectedTabel.Equals("CUSTOMER"))
        {
            if (selectedColoana.Equals("ADRESA"))
            {
                CUSTOMER customer = db.CUSTOMERs.First(p => (p.CUSTOMERID == idValoare) && (p.ADRESA.Equals(listBox1.SelectedItem.ToString())));
                customer.ADRESA = textBoxValoare.Text;
                db.SaveChanges();
            }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:41:47.943

你不能`ToString()`在 LINQ 方法中使用，但你可以试试这个：

```
string selectedItem = listBox1.SelectedItem.ToString();
CUSTOMER customer = db.CUSTOMERs.First(p => (p.CUSTOMERID == idValoare) && (p.ADRESA.Equals(selectedItem))); 
```

我希望这对你有帮助。请反馈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:47:43.993

看起来您`listbox1`没有选定的项目。在执行任何代码**之前，**您确实应该添加一个额外的条件来执行该检查。

简单地：

```
if (listbox1.SelectedItem == null)
{
    //get the hell out of here
}
else
{
   //do your stuff
} 
```

# actionscript-3 - 使用 as3 为一组影片剪辑移入移出补间动画

> ID：15280286
> 
> 赞同：0
> 
> 时间：2013-03-07T19:44:10.150
> 
> 标签：actionscript-3

我将 6 个动画剪辑设置为 array_0，将另一组 6 个动画剪辑设置为 array_1。这就像不同屏幕的两种选择。这两个数组都嵌套在另一个数组中作为 all_array。所有 12 个影片剪辑在初始加载时都定位到相同的 x 和 y，并且位于可见舞台之外。我想使用两个不同的全局变量进行索引。例如，cCat_Sel 的范围为 0-5，另一个 cScr_Sel 的范围为 0-1。cCat_Sel 将在舞台上的六个按钮单独对象的单击事件上更改（每个按钮对应每个类别）。

因此它将根据 cScr_Sel 的值显示每个类别的内容。如果 cScr_Sel 为 0，那么它将使用 all_array[0][cCat_Sel] 来访问当前目标，并且类似地，对于值为 1 的相应数组作为 all_array[1][cCat_Sel]

我已经完成了所有工作，包括所有补间动画以移动当前目标并使其可见。但是补间不会将第二组 mcs 带到可见区域。我有两个函数，一个用于移动，一个用于移动，通过对 mc.x 属性使用补间动画。每个相关的点击事件；我必须将当前 mc 移出并制作 alpha 0，一旦完成，移入新的当前目标并制作 alpha 1。

不知何故，我必须将这两个补间结合到一个函数中。这是我被卡住的部分。或者可能将这些 mcs 放在两个不同的数组中，这不是正确的方法。我可以很容易地在根的 Enter Frame 事件上实现我想要的，以检查 cCat_Sel 和 cScr_Sel 变量，并一个接一个地执行这两个动画，但似乎 enter frame 使用了太多的 cpu 并且使它变慢并且可能不优选。

愿意尝试任何人的建议或指导。提前致谢。我根本没有任何正式或非正式的编程教育，但我通过阅读和尝试一些事情来完成工作，根据 stackoverflow 问题和答案以及有时谷歌。因为我的大部分答案都是从堆栈溢出中找到的。更新：

```
 function fnSlideInOut(cMc:Object, pMc:Object){
        var HideX:Number =650;
        var ShowX:Number = 0;
        if(cMc != null){
            if(cMc.x != ShowX){
                //cMc.alpha = 1;
                var SlideMcIn:Tween = new Tween(cMc, "x", Strong.easeOut, 650, ShowX, 0.5, true);
                SlideMcIn.addEventListener(TweenEvent.MOTION_FINISH, fnSlideInFinish);
                SlideMcIn.start();
            }
        }
        if(pMc != null){
            if(pMc.x != HideX){
                //pMc.alpha = 1;
                var SlideMcOut:Tween = new Tween(pMc, "x", Strong.easeOut, 0, HideX, 0.5, true);
                SlideMcOut.addEventListener(TweenEvent.MOTION_FINISH, fnSlideOutFinish);
                SlideMcOut.start();
            }
        }

        function fnSlideOutFinish(e:TweenEvent){
            //SlideMcOut.obj.alpha = 0;
            SlideMcOut.removeEventListener(TweenEvent.MOTION_FINISH, fnSlideOutFinish);
            }
        function fnSlideInFinish(e:TweenEvent){
            //SlideMcIn.obj.alpha = 1;
            SlideMcIn.removeEventListener(TweenEvent.MOTION_FINISH, fnSlideInFinish);
            }
    }//End Function
fnSlideInOut(cScr_Sel, pScr_Sel); 
```

我希望像您这样的专家对上述代码的任何类型的错误发表评论。它工作了 99 次，但有 1 次影片剪辑要么没有到达目的地，要么当前和以前的两个目标都显示，而且也没有到达预期的位置。这只发生在按钮单击事件快速连续发生时。再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:55:59.783

一种选择可能是使用第三方库，例如[TweenLite](http://www.greensock.com/tweenlite/ "TweenLite")。然后，您可以轻松地在第一个动画完成后立即运行第二个动画：

```
private function startAnimation():void
{
    var mcToHide:MovieClip = all_array[cScr_Sel][cCat_Sel];
    TweenLite.to(mcToHide, 1, {x: HIDDEN_X_POSITION, y:HIDDEN_Y_POSITION, alpha:0, onComplete:finishAnimation});
}

private function finishAnimation():void
{
    var mcToShow:MovieClip = all_array[(cScr_Sel + 1) % 2][cCat_Sel];
    TweenLite.to(mcToShow, 1, {x: VISIBLE_X_POSITION, y:VISIBLE_Y_POSITION, alpha:1});
} 
```

然后，您可以调用`startAnimation()`相关的鼠标单击事件，`cScr_Sel`并`cCat_Sel`根据您的需要进行设置。

# eclipse - 颠覆，连接重置

> ID：15280287
> 
> 赞同：2
> 
> 时间：2013-03-07T19:44:12.700
> 
> 标签：eclipse, svn

我在颠覆中执行“历史”导向的操作时遇到了很大的困难。在 LAMP Ubuntu 服务器上安装的版本是 1.6.x。我使用 Eclipse 作为 SVN 客户端，但我也尝试使用 SVNx 和 Windows 实例上的 Tortoise。

执行“与存储库中的最新比较”时遇到的错误是

```
SVN: '0x0000000c: Locate URL in History' operation finished with error: svn: Connection reset 
```

我已将 apache TIMEOUT 指令设置为 1200，但大约 5 分钟后出现错误。

建议？这要死我了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:27:41.580

尝试更改文件`http-timeout`中的`~/.subversion/servers`

见[http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html)

从未在 eclipse 的 subclipse 插件中更改它，但看起来这个设置可能是相关的：

`Team > SVN > Configuration Location`

![在此处输入图像描述](../Images/c8b22f9db8b2d91a71229cc901f86a4c.png)

我已经看到这个设置在 IntelliJ 中被错误命名为“代理超时”

# php - 为下一个/上一个链接增加 ID 号

> ID：15280288
> 
> 赞同：0
> 
> 时间：2013-03-07T19:44:16.603
> 
> 标签：php, increment

我有一个 mysql 表，其中有一个自动递增的 ID 字段。当我循环输出到页面时，我使用以下内容开始每次迭代的输出，以便我可以通过 url 中的锚点返回它：

```
// after query and while loop
<a name="'.$row['id'].'"></a> 
```

我想做的是在每次迭代中都有一个下一个/上一个样式的链接，该链接获取 $id，将其递增 1 并解析一个链接，如果有下一个或上一个 $id，如下所示：

```
// query then loop
while ($row = mysql_fetch_array($result)) {

// increment $id to create var for NEXT link
$n = intval($row['id']);
$next = $n++;

// decrement $id to create var for PREV link
$p = intval($row['id']);
$prev = $p--;

// output PREV link
if($prev > intval($row['id'])) {
    echo '<a href="page.php#'.$prev.'">Previous</a> | ';
} else {
    echo 'Previous | ';
}

// output NEXT link
if($next < intval($row['id'])) {
    echo '<a href="page.php#'.$next.'">Next</a>'.PHP_EOL;
} else {
    echo 'Next'.PHP_EOL;
} 
```

但是使用上面的方法什么也没返回。有人可以指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:57:48.937

```
 You are using post increment and decrement but you need to pree increment and decimeter
Example
$x=5;
$y=$x++;
echo $y; //Output will be 5

// increment $id to create var for NEXT link
    $n = intval($row['id']);
    $next = ++$n;

    // decrement $id to create var for PREV link
    $p = intval($row['id']);
    $prev = --$p; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:58:03.503

需要将其更改为 -

```
$next = $n+1;
$prev = $p-1;
// adds/subtracts 1 from $n/$p, but keeps the same value for $n/$p 
```

或者

```
$next = ++$n;
$prev = --$p;
// adds/subtracts 1 from $n/$p, but changes the value for $n/$p to ++/-- 
```

见[http://www.php.net/manual/en/language.operators.increment.php](http://www.php.net/manual/en/language.operators.increment.php)

当你这样做

```
$next = $n++;
$prev = $p--; 
```

直到执行代码行之后才会发生增加/减少

此外，您的比较运算符 (<>) 需要翻转。尝试 -

```
// increment $id to create var for NEXT link
$n = intval($row['id']);
$next = $n+1;

// decrement $id to create var for PREV link
$p = intval($row['id']);
$prev = $p-1;

// output PREV link
if($prev < $p) {
    echo '<a href="page.php#'.$prev.'">Previous</a> | ';
} else {
    echo 'Previous | ';
}

// output NEXT link
if($next > $n) {
    echo '<a href="page.php#'.$next.'">Next</a>'.PHP_EOL;
} else {
    echo 'Next'.PHP_EOL;
} 
```

注意 -
`if($prev < intval($row['id']))`&`if($next > intval($row['id']))`将始终返回 TRUE。
你应该检查的是如果`0 < $prev < intval($row['id'])`和`intval($row['id']) < $next < max id`

# c++ - 创建一个凤凰功能用于精神规则

> ID：15280291
> 
> 赞同：1
> 
> 时间：2013-03-07T19:44:22.220
> 
> 标签：c++, boost, boost-spirit, boost-phoenix

我正在尝试编译下面的代码，但是，像往常一样，spirit/phoenix 的错误并没有提供很多关于什么是错误的线索。谁能看到问题是什么？

```
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/shared_ptr.hpp>

typedef boost::shared_ptr<int> sptr;

struct bar
{
    template <typename A> struct result
    {
        typedef sptr type;
    };

    template <typename A> sptr operator()(A) const
    {
        return sptr();
    }
};

boost::phoenix::function<bar> foo;

void test()
{
    namespace qi = boost::spirit::qi;
    using qi::_val;

    qi::rule
    <
        std::string::const_iterator,
        sptr(),
        boost::spirit::ascii::space_type
    >
        test_rule = qi::eps [ _val = foo() ];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:03:18.937

正如 ildjarn 所说，对 foo 的调用会遗漏一个参数。

# matlab - 在matlab中操作pdb文件中的列

> ID：15280292
> 
> 赞同：2
> 
> 时间：2013-03-07T19:44:26.220
> 
> 标签：matlab, matrix, pdb

我已经编写了以下代码，并且我需要仅对第 6、7、8 列进行操作，如图所示，但我希望结果 .pdb 文件也包含输入文件中的其他列。那就是我只想用最终结果替换输入文件的第6,7,8列而不影响其他列。我无法弄清楚这一点。

```
% 
phi1 =188.7*pi/180;
PHI = 82.3*pi/180;
phi2 = 150.4*pi/180;

%%%%% to be change ary euler angles

%%%%%%% rotation_matrix defining

R(1,1) = cos(phi1)*cos(phi2)-sin(phi1)*sin(phi2)*cos(PHI);
R(1,2) = sin(phi1)*cos(phi2)+cos(phi1)*sin(phi2)*cos(PHI);
R(1,3) = sin(phi2)*sin(PHI);
R(2,1) = -cos(phi1)*sin(phi2)-sin(phi1)*cos(phi2)*cos(PHI);
R(2,2) = -sin(phi1)*sin(phi2)+cos(phi1)*cos(phi2)*cos(PHI);
R(2,3) = cos(phi2)*sin(PHI);
R(3,1) = sin(phi1)*sin(PHI);
R(3,2) = -cos(phi1)*sin(PHI);
R(3,3) = cos(PHI);

%%output
rotationMatrix=R;

fid2 = fopen('final_result.pdb','wt');

for k=1:100

fid = fopen('ipp31.pdb'); 
A =  textscan(fid, '%s %s %f %s %s %f %f %f %s ') ;
%read the file
a = A{6};
b = A{7};
c = A{8};
p=[a b c];
p_t=p.';
M=rotationMatrix*p_t;
M_T=M.';

fid = fopen('ipp31.pdb', 'wt'); % Open for writing
fprintf(fid,' %f\t %f\t %f\n',M_T);
fclose(fid);

% 
textfilename = [num2str(k) '.pdb'];
fid1 = fopen(textfilename,'wt');
fprintf(fid1,' %f\t %f\t %f\n',M_T);
fclose(fid1);

fprintf(fid2,' %f\t %f\t %f\n',M_T); 
end
 fclose(fid2); 
```

# php - 我收到此错误：XML Parsing Error: junk after document element

> ID：15280293
> 
> 赞同：7
> 
> 时间：2013-03-07T19:44:26.227
> 
> 标签：php, xml, xml-parsing

我正在尝试使用 php、javascript、html、css 实现商店定位器。第一步是让我的数据库查询解析为 xml 格式，但我收到一个对我来说没有意义的错误。它说 ：

> { XML Parsing Error: junk after document element Line Number 3, Column 9: --------^}

奇怪的部分是当我在第 3 行按 enter 将错误推送到第 4 行时，错误上下文没有改变，似乎错误与代码没有任何关系。

XML：

```
<parks storeName="Devonshire Park" streetNumber="1250" lat="49.245020" lng="-123.13364" distance="0.3444475521254494"></parks>
<parks storeName="Shaughnessy Park" streetNumber="1300" lat="49.255715" lng="-123.13506" distance="0.4027917748443472"></parks>
<parks storeName="Braemar Park" streetNumber="895" lat="49.247615" lng="-123.12363" distance="0.46626204419188244"></parks>
<parks storeName="Douglas Park" streetNumber="801" lat="49.252493" lng="-123.12222" distance="0.5285969452661102"></parks>
<parks storeName="Angus Park" streetNumber="3600" lat="49.253932" lng="-123.14381" distance="0.5463666448497029"></parks>
<parks storeName="Heather Park" streetNumber="702" lat="49.254765" lng="-123.12110" distance="0.6412282952671712"></parks>
<parks storeName="Granville Park" streetNumber="3001" lat="49.258105" lng="-123.14239" distance="0.6940531309415132"></parks>
<parks storeName="VanDusen Botanical Gardens" streetNumber="5251" lat="49.239181" lng="-123.13129" distance="0.7530451429246237"></parks>
<parks storeName="Quilchena Park" streetNumber="4590" lat="49.243690" lng="-123.14886" distance="0.8262659935827044"></parks>
<parks storeName="Oak Meadows Park" streetNumber="899" lat="49.238445" lng="-123.12579" distance="0.867320490203991"></parks>
<parks storeName="Arbutus Village Park" streetNumber="4202" lat="49.249783" lng="-123.15525" distance="0.9901511999872843"></parks>
<parks storeName="Choklit Park" streetNumber="" lat="49.265482" lng="-123.12890" distance="1.0880158966243803"></parks>
<parks storeName="Prince Edward Park" streetNumber="3773" lat="49.244397" lng="-123.15642" distance="1.1124111373800636"></parks>
<parks storeName="Prince of Wales Park" streetNumber="4780" lat="49.244397" lng="-123.15642" distance="1.1124111373800636"></parks>
<parks storeName="Queen Elizabeth Park" streetNumber="4600" lat="49.240978" lng="-123.11202" distance="1.1445698543044514"></parks>
<parks storeName="Willow Park" streetNumber="802" lat="49.264868" lng="-123.12203" distance="1.14618861456822"></parks>
<parks storeName="Hillcrest Park" streetNumber="4501" lat="49.244734" lng="-123.10841" distance="1.1801942385262174"></parks>
<parks storeName="Ravine Park" streetNumber="2159" lat="49.240902" lng="-123.15593" distance="1.1988469137694855"></parks>
<parks storeName="Granville Loop Park" streetNumber="1435" lat="49.267284" lng="-123.13754" distance="1.2094922772420964"></parks>
<parks storeName="Charleson Park" streetNumber="999" lat="49.266995" lng="-123.12420" distance="1.2439538809012058"></parks> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T04:53:03.213

如果没有单个根元素，那就不是真正的 XML。尝试将所有这些元素包装在一个根中。解析器抱怨的“垃圾”是第一个根之后的多个根，这是它认为唯一有效的根。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T19:48:15.133

这里的问题在于 XML 内容。该错误表明 XML 元素之外有字符。如

```
<document>
  <element>
  </element>
</document>
<junk></junk>  <-- after the root element 
```

如果您需要进一步的帮助，请发布正在解析的 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:46:48.070

XML 正文之后可能有浏览器不期望的内容。确保浏览器只接收 XML 而没有其他内容，包括空格或换行符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T19:49:50.200

好吧，尝试使用eiter CDATA 来包装数据库中的内容，因为文本中可能存在垃圾。另一种解决方案是创建一个函数来替换无法解析的字符

# android - 数据库无法连接

> ID：15280294
> 
> 赞同：1
> 
> 时间：2013-03-07T19:44:37.117
> 
> 标签：android, connection-pooling, sqliteopenhelper, sqlite

我正在开发一个 Android 应用程序，它使用来自不同线程和进程的 sqlite 数据库，例如小部件和服务。

使用单例模式授予连接，我随机得到这个错误：应用程序仍然卡在`getWriteableDatabase()`方法中，并且日志中出现此警告

```
W/SQLiteConnectionPool( 2021): The connection pool for database '/data/data/xyz' has been unable to grant a connection to thread xyz (xyz) with flags 0x1 for xyz seconds.
W/SQLiteConnectionPool( 2021): Connections: 0 active, 1 idle, 0 available. 
```

这个错误通常发生在应用程序关闭几个小时后我重新打开它，但没有正式的方法来重现这个错误。

我尝试使用这两种方法，但没有幸运：

```
class DB extends SQLiteOpenHelper {

    DB databaseHelper;
    SQLiteDatabase database;

    /**
     * Open a Database Helper.
     *
     * @param c the Context used to open the Database.
     * @return the Database Helper.
     */
    public static DB getInstance(final Context c) {
        if (databaseHelper == null) {
            databaseHelper = new DB(c.getApplicationContext());
        }
        return databaseHelper;
    }

    int active_connections;

    /**
     * @return the Database connection to use
     * @see closeReadableDataBase()
     */
    public synchronized SQLiteDatabase getDatabase() {
        if (database == null || !database.isOpen()) {
            if(database!=null) database.close();
            database = getWritableDatabase();
            active_connections=0;
            database.setLockingEnabled(false);
            TransitionHelper.execSQL(database, "PRAGMA read_uncommitted = true;");
            TransitionHelper.execSQL(database, "PRAGMA synchronous=OFF;");
        }
        active_connections++;
        return database;
    }

    /**
     * Closes the database connection.
     * @see openDatabaseForRead()
     */
    public synchronized void closeDatabase() {
        active_connections--;
        if(active_connections==0 && database!=null){
            database.close();
            database=null;
        }
    }
} 
```

和：

```
class DB extends SQLiteOpenHelper {

    DB databaseHelper;
    SQLiteDatabase database;

    public static DB getInstance(final Context c) {
        if (databaseHelper == null) {
            databaseHelper = new DB(c.getApplicationContext());
        }
        return databaseHelper;
    }

    public synchronized SQLiteDatabase getDatabase() {
        if (database == null || !database.isOpen()) {
            if(database!=null) database.close();
            database = getWritableDatabase();
        }
        return database;
    }

    public synchronized void closeDatabase() {
        if(database!=null){
            database.close();
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:16:31.407

如果您发现自己使用来自不同进程的 SQL 数据库，那么您真的应该考虑将其封装在内容提供程序中。与加载器一起，内容提供者可以促进跨进程、DataObservers 等的访问。甚至还有用于创建它们的 API 指南：[Creating a Content Provider](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

# git - 试图理解 git fetch

> ID：15280295
> 
> 赞同：3
> 
> 时间：2013-03-07T19:44:38.980
> 
> 标签：git

假设 repo at`$REPO_URL`有*多个*分支，包括一个名为`dev`. 现在，假设我一个接一个地运行以下命令

```
% git clone $REPO_URL --branch dev wd
% cd wd
% git branch -a
* dev
  remotes/origin/HEAD -> origin/master
  remotes/origin/dev
  remotes/origin/issue6
  remotes/origin/issue26
  remotes/origin/issue30
  ...
  remotes/origin/issue709
  remotes/origin/issue712
  remotes/origin/issue716
  remotes/origin/master 
```

此时我必须做什么，以便表单的每个分支都有一个与其完全匹配`remotes/origin/X`的本地分支？`X`我的意思是以下两个命令将产生相同的输出：

```
% git rev-parse remotes/origin/X
% git rev-parse X 
```

并且输出`git branch -a`最终看起来像这样：

```
* dev
  issue6
  issue26
  issue30
  ...
  issue709
  issue712
  issue716
  master
  remotes/origin/HEAD -> origin/master
  remotes/origin/dev
  remotes/origin/issue6
  remotes/origin/issue26
  remotes/origin/issue30
  ...
  remotes/origin/issue709
  remotes/origin/issue712
  remotes/origin/issue716
  remotes/origin/master 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:48:21.450

您不需要这样做`fetch`，因为您在克隆存储库时已经这样做了。你想要的是一个本地分支来匹配每个远程跟踪分支，为此你可以使用`checkout`：

```
git checkout -b issue6 origin/issue6 
```

所以你可以有一个脚本循环遍历所有远程分支并检查它们。

正如评论中提到的，最新版本的 git 可以使用更简单的命令：

```
git checkout issue6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:49:20.230

一个外壳 for 循环将做到这一点：

```
for BRANCH in $(git branch -r | grep -v HEAD) # list of remote branches (excluding HEAD)
do
    git checkout --track ${BRANCH}
done 
```

# javascript - 发布到墙上 facebook api 在本地工作，但不是实时的

> ID：15280300
> 
> 赞同：2
> 
> 时间：2013-03-07T19:44:47.417
> 
> 标签：javascript, facebook, facebook-graph-api

我在本地测试过，一切正常。弹出新窗口和帖子。不过，既然推住了。实时站点 facebook 弹出窗口出现，但 2 秒后消失，不再出现。

**为什么会发生这种情况？**在本地站点和实时站点之间，我需要注意哪些会导致此类问题的事情？

```
<script src='http://connect.facebook.net/en_US/all.js'></script>
<script type="text/javascript">

  FB.init({appId: "11111818811881", status: true, cookie: true});

  function postToFeed(description) {

    // calling the API ...
    var obj = {
      method: 'feed',
      redirect_uri: 'https://thelivesite.com/dashboard/all/',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'https://www.thelivesite.com/static/images/logo.png',
      name: 'LiveSiteName',
      caption: 'Meow',
      description: description
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }
</script>

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:fb="https://www.facebook.com/2008/fbml">

<div id='fb-root'></div>                                           
<p style="cursor: pointer; display: inline-block; position: absolute; margin-left: -20px;">
     <a onclick='postToFeed("This is a message Cool beans."); return false;'></a>
</p>
<p id='msg'></p> 
```

提前感谢您的建议和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:09:01.073

*   转到 > [https://developers.facebook.com/apps](https://developers.facebook.com/apps)
*   编辑您的应用
*   设置 > 基本
*   使用 Facebook 登录的网站
*   在站点 URL 中，输入您的站点 URL：[http ://www.yoursite.com/](http://www.yoursite.com/)

# twig - Twig 模板系统的可读文件大小

> ID：15280310
> 
> 赞同：8
> 
> 时间：2013-03-07T19:45:24.497
> 
> 标签：twig, filesize, readability

我想知道是否有一种内置方法可以使用 Twig 模板系统输出可读文件大小。假设我的模板中有这样的内容：

```
<p>This limit is currently set to {{ maxBytes }}</p> 
```

我如何格式化`maxBytes`以显示类似的内容`30 GB`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-08T20:46:27.357

有几种方法可以实现这一目标：

1) 获得一个 Twig 扩展来为你处理它。像这样的一个：[https ://github.com/BrazilianFriendsOfSymfony/BFOSTwigExtensionsBundle](https://github.com/BrazilianFriendsOfSymfony/BFOSTwigExtensionsBundle)

启用后，您只需执行以下操作：

```
{{ maxBytes|bfos_format_bytes }} 
```

这会给你你想要的。

2）如果您不想添加整个扩展，您可以创建一个宏来执行此操作。看起来像这样：

```
{% macro bytesToSize(bytes) %}
{% spaceless %}
    {% set kilobyte = 1024 %}
    {% set megabyte = kilobyte * 1024 %}
    {% set gigabyte = megabyte * 1024 %}
    {% set terabyte = gigabyte * 1024 %}

    {% if bytes < kilobyte %}
        {{ bytes ~ ' B' }}
    {% elseif bytes < megabyte %}
        {{ (bytes / kilobyte)|number_format(2, '.') ~ ' KiB' }}
    {% elseif bytes < gigabyte %}
        {{ (bytes / megabyte)|number_format(2, '.') ~ ' MiB' }}
    {% elseif bytes < terabyte %}
        {{ (bytes / gigabyte)|number_format(2, '.') ~ ' GiB' }}
    {% else %}
        {{ (bytes / terabyte)|number_format(2, '.') ~ ' TiB' }}
    {% endif %}
{% endspaceless %}
{% endmacro %} 
```

您可以在此处阅读有关放置位置以及如何使用宏的更多信息：http: [//twig.sensiolabs.org/doc/tags/macro.html](http://twig.sensiolabs.org/doc/tags/macro.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-05-30T10:50:58.600

或者，只需创建树枝扩展：

*ByteConversionTwigExtension.php*

```
<?php
// src/AppBundle/Twig/Extension

namespace AppBundle\Twig\Extension;

class ByteConversionTwigExtension extends \Twig_Extension
{

    /**
     * Gets filters
     *
     * @return array
     */
    public function getFilters()
    {
        return array(
             new \Twig_SimpleFilter('format_bytes', array($this, 'formatBytes')),
        );
    }    

    public function getName()
    {
        return 'format_bytes';
    }

    function formatBytes($bytes, $precision = 2)
    {
        $units = array('B', 'KiB', 'MiB', 'GiB', 'TiB');
        $bytes = max($bytes, 0);
        $pow = floor(($bytes ? log($bytes) : 0) / log(1024));
        $pow = min($pow, count($units) - 1);

        // Uncomment one of the following alternatives
         $bytes /= pow(1024, $pow);

        return round($bytes, $precision) . ' ' . $units[$pow];
    }

} 
```

*服务.yml*

```
parameters:
    app.byte_conversion_twig_extension.twig.extension.class: AppBundle\Twig\Extension\ByteConversionTwigExtension

services:
    app.byte_conversion.twig.extension:
        class: %app.byte_conversion_twig_extension.twig.extension.class%
        tags:
            - { name: twig.extension } 
```

树枝模板：

```
{{ variable | format_bytes }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-30T08:38:06.003

使用 symfony 4 编码格式和[Jeffrey Sambells 格式化函数](http://jeffreysambells.com/2012/10/25/human-readable-filesize-php)的人类可读代码的树枝扩展：

src/Twig/AppExtension.php

```
<?php

namespace App\Twig;

use Symfony\Component\DependencyInjection\ContainerInterface;
use Twig\Extension\AbstractExtension;
use Twig\TwigFilter;

class AppExtension extends AbstractExtension
{
    /**
     * @var ContainerInterface
     */
    protected $container;

    /**
     * Constructor
     *
     * @param ContainerInterface $container
     */
    public function __construct(
        ContainerInterface $container
    )
    {
        $this->container = $container;
    }

    public function getFilters()
    {
        return array(
            new TwigFilter('formatBytes', array($this, 'formatBytes')),
        );
    }

    /**
     * @param $bytes
     * @param int $precision
     * @return string
     */
    public function formatBytes($bytes, $precision = 2)
    {
        $size = ['B','kB','MB','GB','TB','PB','EB','ZB','YB'];
        $factor = floor((strlen($bytes) - 1) / 3);
        return sprintf("%.{$precision}f", $bytes / pow(1024, $factor)) . @$size[$factor];
    }

} 
```

**服务.yaml**：

```
App\Twig\AppExtension:
    arguments:
        - '@service_container'
    tags:
        - { name: twig.extension} 
```

模板中的用法：

```
{{ bytes| formatBytes }}
{{ bytes| formatBytes(0) }} 
```

# r - R中的决策分析

> ID：15280312
> 
> 赞同：5
> 
> 时间：2013-03-07T19:45:44.433
> 
> 标签：r, decision-tree

我教授有关商业决策的课程以及更多与我一起工作的分析技术。我正在与 R 一起工作。同样，在我的咨询实践中。本课程的模块之一是决策分析。我一直在寻找 R 中的一个包，它提供这种类型的概率、预期值、预期效用类型的分析。

在 R 的开发站点中，我看到的关于该主题的最后一篇文章（从 2011 年开始）说 R 并不擅长这种类型的分析。仍然是这种情况还是有提供此功能的软件包。

如果没有，一旦我当前的编程/写作项目完成，我会尝试把一些东西放在一起。

此外，我对决策树（不是集群或其他分类树）感兴趣，而是对决策链的概率和结果进行分区的树。除了 rpart，R 中还有什么？Excel 中有很多内容，但我试图让学生远离 Excel，让他们更多地思考他们想要实现的目标。

谢谢您的帮助。

吉姆·亨特

# c++ - 如何调试 msvcp100d.dll 中的崩溃

> ID：15280314
> 
> 赞同：1
> 
> 时间：2013-03-07T19:45:46.147
> 
> 标签：c++, visual-c++, pugixml

因此，我在 Visual Studio 10 中使用多线程调试运行时 DLL 导致调试应用程序崩溃。我已经做了相当多的谷歌搜索，我唯一能找到的是一些对使用不同运行时库版本链接到外部库的应用程序的引用（我不相信这里是这种情况）。

我看到的最后一段代码是 的定义`_Lockit::_Lockit(3)`，它调用`_Mtxlock(&mtx[3]);`，其中`mtx`是关键部分的数组。如何调试此类错误，我认为它只会间歇性地发生？请注意，在这种情况下被破坏的字符串是从函数中临时返回的，因此它不可能被破坏甚至在其他地方引用。

```
ntdll.dll!76fbb42b()    
ntdll.dll!76fbb3ce()    
ntdll.dll!76f70133()    
msvcp100d.dll!std::_Lockit::_Lockit(int kind)  Line 64 + 0x14 bytes C++
msvcp100d.dll!std::_Container_base12::_Orphan_all()  Line 200   C++
MyExe.exe!std::_String_val<wchar_t,std::allocator<wchar_t> >::~_String_val<wchar_t,std::allocator<wchar_t> >()  Line 478 + 0xb bytes    C++
MyExe.exe!std::basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> >::~basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> >()  Line 754 + 0xf bytes  C++ 
```

编辑：根据请求，导致问题的代码如下（使用 pugixml 库，有修改）

```
xml_document xmlMessage;    
xml_node pRoot = xmlMessage.append_child(L"event");
pRoot.append_child(L"id", to_wstr(id).c_str());
Instance().SendMessage(xmlMessage.to_wstr()); 
```

xmlMessage.to_wstr() 被实现为：

```
PUGI__FN std::wstring xml_node::to_wstr() const
{
    xml_writer_string wsr;
    this->print(wsr, L"", format_raw, encoding_wchar);
    return wsr.mResult;
} 
```

和 xml_writer_string 被实现为：

```
class PUGIXML_CLASS xml_writer_string : public xml_writer
{
public:
    // Construct writer from an output stream object
    virtual void write(const void* data, size_t size);
    std::wstring mResult;
};

PUGI__FN void xml_writer_string::write(const void* data, size_t size)
{
    mResult += std::wstring(static_cast<const wchar_t*>(data), size / sizeof(wchar_t));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:41:09.980

这里的线索是“访问冲突读取 0xcccccd”错误。该地址对应于用于调试未初始化变量的构建的模式。它试图读取该地址处的内存这一事实表明您可能有一个未初始化的指针，然后您正在取消引用。当您遇到此错误时，请在调试器中向上走堆栈，检查 Locals 视图中的所有变量。将显示模式设置为十六进制，然后应该更容易看到——然后您需要根据变量的长度查找值为 0xCC、0xCCCC 和 0xCCCCCCCC 的变量。如果您看到任何这些都是未初始化的变量，这很可能是您崩溃的原因。

另请参阅： [如何以指向 0xCCCCCCCC 的指针结束](https://stackoverflow.com/questions/3618572/how-to-end-up-with-a-pointer-to-0xcccccccc)

# javascript - 使用锚标记在浏览器地址栏中加载 javascript

> ID：15280319
> 
> 赞同：-2
> 
> 时间：2013-03-07T19:45:53.780
> 
> 标签：javascript, html

我正在尝试创建一个哈林摇晃效果。（各种东西，页面上的图像开始来回移动的效果）哈林摇晃[的演示](http://blog.moovweb.com/2013/02/happy-valentines-day-internet-behold-the-harlem-shake-bookmarklet)

当我们在浏览器的地址栏中粘贴一段以开头的代码时`javascript:(function(){function c(){var e.......long code..`，效果就开始了..（效果是页面上的元素开始跳舞）。

当用户单击网页上的某个位置时，有什么方法可以将该代码放入浏览器中。这是我尝试过的，但徒劳无功

代码（抱歉，有点长）[http://pastebin.com/BGzXve64](http://pastebin.com/BGzXve64)

```
<a href="javascript:(function(){function c(){var e.......long code">click me</a> 
```

[Js fiddle，不工作，因为主要代码有内部 html 标签](http://jsfiddle.net/TtBjr/1/)

另一件事也许是

```
<a onclick="javascript:(function(){function c(){var e.......long code">Click me for harlem shake</a> 
```

[Js fiddle，不工作，因为主要代码有内部 html 标签](http://jsfiddle.net/6jdNk/)

是否有一种常见的更简单（或有效）的方式将此类网址放在浏览器地址栏中 onclick？

万分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:09:43.343

在这里，您需要获取小书签内的 javascript 代码并以不同的方式使用它。请参阅下面的小提琴

[http://jsfiddle.net/EaYRQ/2/](http://jsfiddle.net/EaYRQ/2/)

对于您使用的锚或 w/e 元素，只需添加`onclick=harlem()`

```
<a href="#" onclick="harlem()">Click Me</a> 
```

和 javascript。只需复制 jsfiddle 的 javascript 部分

```
window.harlem = function () { ... } 
```

# c++ - libvlc：缓存文件并查找问题

> ID：15280330
> 
> 赞同：1
> 
> 时间：2013-03-07T19:46:17.960
> 
> 标签：c++, video-streaming, vlc, libvlc

我有一个`libvlc`用来播放 youtube 文件的播放器，它可以正常播放。问题是它没有缓存文件，当我将滑块拉到上一个位置（比如说位置 0 秒）时，它开始重新下载，而不是重用以前下载的内容。VLC 在这方面工作得很好，所以我相信我在这里遗漏了一些东西。

欢迎任何指针、链接、建议或解决方案！

# javascript - 字符串到 jQuery 对象，替换属性，然后再次返回字符串（参见 JS Fiddle）

> ID：15280333
> 
> 赞同：3
> 
> 时间：2013-03-07T19:46:22.990
> 
> 标签：javascript, jquery

[http://jsfiddle.net/r4KL9/](http://jsfiddle.net/r4KL9/)

这应该用相应的数据更改属性替换所有类。

所以如果我有：

```
<div class="hello" data-change="new-class"> 
```

...我希望它会回来

```
<div class="new-class" data-change="new-class"> 
```

我的代码更改了其中一个（按钮上的那个），但没有更改另一个。

我究竟做错了什么？

谢谢你的帮助。

--

显然我也需要发布 JS Fiddle 代码：

```
var str = '<div class="original-class" data-change="new-class">Hello</div><div class="class-123"><input type="button" class="start-class" data-change="any-new-class" value="Click Me"></div>';

var html = $('<div/>').html(str).contents();

$('[data-change]', html).attr('class', function() { return $(this).data('change') });

alert( $(html).parent().html() ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:51:14.957

```
var html = $('<div/>').html(str).find('[data-change]').attr('class', function () {
    return $(this).data('change');
}).end().html();

alert(html); 
```

[http://jsfiddle.net/n8zMN/](http://jsfiddle.net/n8zMN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:49:57.610

试试这个：

```
$('[data-change]', html).attr('class', function() { return $(this).attr('data-change') }); 
```

编辑：

```
var html = $(str);
html.filter('[data-change]').attr('class', function() { return $(this).data('change') }); 
```

我认为它有效：http: [//jsfiddle.net/r4KL9/2/](http://jsfiddle.net/r4KL9/2/)

# asp.net-mvc - $.ajax() 获取请求成功函数没有被 MVC 4 调用

> ID：15280338
> 
> 赞同：0
> 
> 时间：2013-03-07T19:46:36.583
> 
> 标签：asp.net-mvc, jquery

我怀疑这是因为我没有返回可以解析的 JSON。这是一个示例：

```
Response.ContentType = "application/json";
Response.Write(JsonConvert.SerializeObject(new {foo="bar"})); 
```

Chrome 告诉我以下内容......“未捕获的语法错误：意外的令牌：”

这种方法产生相同的响应：

```
return Json(new {foo="bar"}, JsonRequestBehavior.AllowGet); 
```

我究竟做错了什么？此外，这是一个跨域请求。

```
$.ajax({
        url: myURL,
        type: 'GET',
        async: true,
        dataType: 'jsonp',
        cache: false,
        success: function (data) {
            alert(data);
        }
    }); 
```

编辑：这是 JSON C# 吐出来的：

```
{"foo":"bar"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:09:24.960

我认为这是因为 jQuery 预期的 dataType 设置为 jsonp，但您不返回[JSONP](http://en.wikipedia.org/wiki/JSONP)。将其更改为 json 甚至使用：

```
$.get(myUrl, { cache: false }).done(function (data) {
    alert(data);
}); 
```

# objective-c - NSView 和 NSBezierPath - 图表不会显示 - Cocoa/Objective-C

> ID：15280347
> 
> 赞同：0
> 
> 时间：2013-03-07T19:46:51.953
> 
> 标签：objective-c, cocoa, simulation, nsview, nsbezierpath

我正在尝试创建一个应用程序，以给定的速度和角度模拟物体在自由落体时的轨迹（更多信息[在这里）。](http://en.wikipedia.org/wiki/Free_fall#Free_fall_in_Newtonian_mechanics)GUI 非常简单：2 个数字格式的文本字段（用于速度和角度），1 个显示轨迹的按钮，以及嵌入在滚动视图（ViewController 类）中的自定义视图。我的代码在这里：

视图控制器.h：

```
#import <Cocoa/Cocoa.h>

@interface ViewController : NSView{
NSBezierPath *path;
NSImage *image;
NSPoint downPoint;
NSPoint currentPoint;
float angle;
float velocity;
}

@property (assign) float angle;
@property (assign) float velocity;
@property (assign) IBOutlet NSTextField *angleField;
@property (assign) IBOutlet NSTextField *speedField;

-(IBAction)fly:(id)sender;
-(NSRect)currentRect; 
@end 
```

视图控制器.m：

```
#import "ViewController.h"
#import "math.h"

@implementation ViewController
@synthesize angle;
@synthesize velocity;

- (id)initWithFrame:(NSRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    path = [[NSBezierPath alloc] init];
    [path setLineWidth:3.0];
}
return self;
}
- (void)drawRect:(NSRect)dirtyRect
{
NSRect bounds = [self bounds];
[[NSColor greenColor] set];
[NSBezierPath fillRect:bounds];
[[NSColor blackColor] set];
[[self pathWithVelocity:velocity angle:angle] stroke];
}

-(IBAction)fly:(id)sender
{
angle = [_angleField floatValue];
velocity = [_speedField floatValue];
NSLog(@"%f - %f",angle,velocity);
[self drawRect:[self bounds]];
}

-(NSBezierPath *)pathWithVelocity:(float)v angle:(float)a{
NSBezierPath* pat = [[NSBezierPath alloc] init];
NSPoint p;
p.x = 0;
p.y = 0;
[pat moveToPoint:p];
for (float t = 0.5; t < 100; t += 0.5) {
    p.x = v*cosf(a)*t;
    p.y = -9.81*t*t/2+v*sinf(a)*t;
    NSLog(@"(%f;%f)",p.x,p.y);
    [pat lineToPoint:p];
}
[pat closePath];
return pat;
}

-(NSRect)currentRect{
float minX = MIN(downPoint.x,currentPoint.x);
float maxX = MAX(downPoint.x,currentPoint.x);
float minY = MIN(downPoint.y,currentPoint.y);
float maxY = MAX(downPoint.x,currentPoint.x);
return NSMakeRect(minX, minY, maxX-minX,maxY-minY);
}
@end 
```

我触发fly方法时出现的问题是：

*   视图正确变为绿色，但路径未显示（即使点坐标似乎正确）
*   滚动视图时，新的点坐标显示为速度和角度都为零，即使文本字段的值没有改变

我的代码有什么问题？

编辑：对于角度 0.7 和速度 300，我有这个输出：

```
2013-03-08 07:14:41.892 Flight[10278:303] (114.73;95.41) 
2013-03-08 07:14:41.893 Flight[10278:303] (229.45;188.36)
2013-03-08 07:14:41.893 Flight[10278:303] (344.18;278.86)
2013-03-08 07:14:41.894 Flight[10278:303] (458.91;366.91)
2013-03-08 07:14:41.894 Flight[10278:303] (573.63;452.51)
2013-03-08 07:14:41.894 Flight[10278:303] (688.36;535.65)
2013-03-08 07:14:41.895 Flight[10278:303] (803.08;616.34)
2013-03-08 07:14:41.895 Flight[10278:303] (917.81;694.58)
2013-03-08 07:14:41.896 Flight[10278:303] (1032.54;770.37)
2013-03-08 07:14:41.896 Flight[10278:303] (1147.26;843.70)
2013-03-08 07:14:41.897 Flight[10278:303] (1261.99;914.58)
2013-03-08 07:14:41.897 Flight[10278:303] (1376.72;983.01)
2013-03-08 07:14:41.897 Flight[10278:303] (1491.44;1048.99)
2013-03-08 07:14:41.898 Flight[10278:303] (1606.17;1112.51)
2013-03-08 07:14:41.898 Flight[10278:303] (1720.90;1173.58)
2013-03-08 07:14:41.898 Flight[10278:303] (1835.62;1232.20)
2013-03-08 07:14:41.899 Flight[10278:303] (1950.35;1288.37)
2013-03-08 07:14:41.899 Flight[10278:303] (2065.07;1342.08)
2013-03-08 07:14:41.899 Flight[10278:303] (2179.80;1393.34)
2013-03-08 07:14:41.900 Flight[10278:303] (2294.53;1442.15)
2013-03-08 07:14:41.900 Flight[10278:303] (2409.25;1488.51)
2013-03-08 07:14:41.900 Flight[10278:303] (2523.98;1532.41)
2013-03-08 07:14:41.901 Flight[10278:303] (2638.71;1573.86)  
2013-03-08 07:14:41.901 Flight[10278:303] (2753.43;1612.86)
2013-03-08 07:14:41.901 Flight[10278:303] (2868.16;1649.41)
2013-03-08 07:14:41.901 Flight[10278:303] (2982.88;1683.50)
2013-03-08 07:14:41.902 Flight[10278:303] (3097.61;1715.15)
2013-03-08 07:14:41.902 Flight[10278:303] (3212.34;1744.33)
2013-03-08 07:14:41.902 Flight[10278:303] (3327.06;1771.07)
2013-03-08 07:14:41.903 Flight[10278:303] (3441.79;1795.35)
2013-03-08 07:14:41.903 Flight[10278:303] (3556.52;1817.19)
2013-03-08 07:14:41.903 Flight[10278:303] (3671.24;1836.56)
2013-03-08 07:14:41.904 Flight[10278:303] (3785.97;1853.49)
2013-03-08 07:14:41.904 Flight[10278:303] (3900.70;1867.97)
2013-03-08 07:14:41.905 Flight[10278:303] (4015.42;1879.99)
2013-03-08 07:14:41.905 Flight[10278:303] (4130.15;1889.56)
2013-03-08 07:14:41.906 Flight[10278:303] (4244.87;1896.67)
2013-03-08 07:14:41.906 Flight[10278:303] (4359.60;1901.34)
2013-03-08 07:14:41.906 Flight[10278:303] (4474.33;1903.55)
2013-03-08 07:14:41.907 Flight[10278:303] (4589.05;1903.31)
2013-03-08 07:14:41.907 Flight[10278:303] (4703.78;1900.61)
2013-03-08 07:14:41.907 Flight[10278:303] (4818.51;1895.47)
2013-03-08 07:14:41.908 Flight[10278:303] (4933.23;1887.87)
2013-03-08 07:14:41.908 Flight[10278:303] (5047.96;1877.82)
2013-03-08 07:14:41.908 Flight[10278:303] (5162.69;1865.31)
2013-03-08 07:14:41.909 Flight[10278:303] (5277.41;1850.36)
2013-03-08 07:14:41.909 Flight[10278:303] (5392.14;1832.95)
2013-03-08 07:14:41.909 Flight[10278:303] (5506.86;1813.09)
2013-03-08 07:14:41.910 Flight[10278:303] (5621.59;1790.77)
2013-03-08 07:14:41.910 Flight[10278:303] (5736.32;1766.01)
2013-03-08 07:14:41.910 Flight[10278:303] (5851.04;1738.79)
2013-03-08 07:14:41.911 Flight[10278:303] (5965.77;1709.12)
2013-03-08 07:14:41.911 Flight[10278:303] (6080.50;1676.99)
2013-03-08 07:14:41.911 Flight[10278:303] (6195.22;1642.42)
2013-03-08 07:14:41.912 Flight[10278:303] (6309.95;1605.39)
2013-03-08 07:14:41.912 Flight[10278:303] (6424.67;1565.91)
2013-03-08 07:14:41.912 Flight[10278:303] (6539.40;1523.97)
2013-03-08 07:14:41.913 Flight[10278:303] (6654.13;1479.59)
2013-03-08 07:14:41.913 Flight[10278:303] (6768.85;1432.75)
2013-03-08 07:14:41.913 Flight[10278:303] (6883.58;1383.46)
2013-03-08 07:14:41.914 Flight[10278:303] (6998.31;1331.72)
2013-03-08 07:14:41.915 Flight[10278:303] (7113.03;1277.52)
2013-03-08 07:14:41.915 Flight[10278:303] (7227.76;1220.87)
2013-03-08 07:14:41.915 Flight[10278:303] (7342.49;1161.77)
2013-03-08 07:14:41.916 Flight[10278:303] (7457.21;1100.22)
2013-03-08 07:14:41.916 Flight[10278:303] (7571.94;1036.21)
2013-03-08 07:14:41.917 Flight[10278:303] (7686.66;969.75)
2013-03-08 07:14:41.917 Flight[10278:303] (7801.39;900.84)
2013-03-08 07:14:41.918 Flight[10278:303] (7916.12;829.48)
2013-03-08 07:14:41.918 Flight[10278:303] (8030.84;755.66)
2013-03-08 07:14:41.919 Flight[10278:303] (8145.57;679.39)
2013-03-08 07:14:41.919 Flight[10278:303] (8260.30;600.67)
2013-03-08 07:14:41.919 Flight[10278:303] (8375.02;519.50)
2013-03-08 07:14:41.920 Flight[10278:303] (8489.75;435.87)
2013-03-08 07:14:41.920 Flight[10278:303] (8604.47;349.79)
2013-03-08 07:14:41.921 Flight[10278:303] (8719.20;261.26)
2013-03-08 07:14:41.921 Flight[10278:303] (8833.93;170.28)
2013-03-08 07:14:41.921 Flight[10278:303] (8948.65;76.84)
2013-03-08 07:14:41.922 Flight[10278:303] (9063.38;-19.05)
2013-03-08 07:14:41.922 Flight[10278:303] (9178.11;-117.39)
2013-03-08 07:14:41.922 Flight[10278:303] (9292.83;-218.18)
2013-03-08 07:14:41.923 Flight[10278:303] (9407.56;-321.43)
2013-03-08 07:14:41.923 Flight[10278:303] (9522.29;-427.13)
2013-03-08 07:14:41.924 Flight[10278:303] (9637.01;-535.28)
2013-03-08 07:14:41.924 Flight[10278:303] (9751.74;-645.88)
2013-03-08 07:14:41.924 Flight[10278:303] (9866.46;-758.94)
2013-03-08 07:14:41.925 Flight[10278:303] (9981.19;-874.45)
2013-03-08 07:14:41.925 Flight[10278:303] (10095.92;-992.41)
2013-03-08 07:14:41.925 Flight[10278:303] (10210.64;-1112.82)
2013-03-08 07:14:41.926 Flight[10278:303] (10325.37;-1235.69)
2013-03-08 07:14:41.926 Flight[10278:303] (10440.10;-1361.00)
2013-03-08 07:14:41.927 Flight[10278:303] (10554.82;-1488.78)
2013-03-08 07:14:41.927 Flight[10278:303] (10669.55;-1619.00)
2013-03-08 07:14:41.927 Flight[10278:303] (10784.28;-1751.68)
2013-03-08 07:14:41.928 Flight[10278:303] (10899.00;-1886.80)
2013-03-08 07:14:41.928 Flight[10278:303] (11013.73;-2024.39)
2013-03-08 07:14:41.929 Flight[10278:303] (11128.45;-2164.42)
2013-03-08 07:14:41.929 Flight[10278:303] (11243.18;-2306.91)
2013-03-08 07:14:41.929 Flight[10278:303] (11357.91;-2451.84)
2013-03-08 07:14:41.930 Flight[10278:303] (11472.63;-2599.23)
2013-03-08 07:14:41.930 Flight[10278:303] (11587.36;-2749.08)
2013-03-08 07:14:41.930 Flight[10278:303] (11702.09;-2901.37)
2013-03-08 07:14:41.931 Flight[10278:303] (11816.81;-3056.12)
2013-03-08 07:14:41.931 Flight[10278:303] (11931.54;-3213.32)
2013-03-08 07:14:41.932 Flight[10278:303] (12046.26;-3372.98)
2013-03-08 07:14:41.932 Flight[10278:303] (12160.99;-3535.08)
2013-03-08 07:14:41.933 Flight[10278:303] (12275.72;-3699.64)
2013-03-08 07:14:41.933 Flight[10278:303] (12390.44;-3866.65)
2013-03-08 07:14:41.934 Flight[10278:303] (12505.17;-4036.12)
2013-03-08 07:14:41.934 Flight[10278:303] (12619.90;-4208.03)
2013-03-08 07:14:41.935 Flight[10278:303] (12734.62;-4382.40)
2013-03-08 07:14:41.935 Flight[10278:303] (12849.35;-4559.22)
2013-03-08 07:14:41.935 Flight[10278:303] (12964.08;-4738.50)
2013-03-08 07:14:41.936 Flight[10278:303] (13078.80;-4920.22)
2013-03-08 07:14:41.936 Flight[10278:303] (13193.53;-5104.40)
2013-03-08 07:14:41.936 Flight[10278:303] (13308.25;-5291.03)
2013-03-08 07:14:41.937 Flight[10278:303] (13422.98;-5480.12)
2013-03-08 07:14:41.937 Flight[10278:303] (13537.71;-5671.65)
2013-03-08 07:14:41.937 Flight[10278:303] (13652.43;-5865.64)
2013-03-08 07:14:41.937 Flight[10278:303] (13767.16;-6062.08)
2013-03-08 07:14:41.938 Flight[10278:303] (13881.89;-6260.98)
2013-03-08 07:14:41.938 Flight[10278:303] (13996.61;-6462.32)
2013-03-08 07:14:41.939 Flight[10278:303] (14111.34;-6666.12)
2013-03-08 07:14:41.939 Flight[10278:303] (14226.07;-6872.37)    
2013-03-08 07:14:41.940 Flight[10278:303] (14340.79;-7081.08)
2013-03-08 07:14:41.940 Flight[10278:303] (14455.52;-7292.23)
2013-03-08 07:14:41.940 Flight[10278:303] (14570.24;-7505.84)
2013-03-08 07:14:41.941 Flight[10278:303] (14684.97;-7721.90)
2013-03-08 07:14:41.941 Flight[10278:303] (14799.70;-7940.41) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:02:54.297

您获得的坐标的 Y 轴似乎是 -ve。尝试打印坐标并查看您的绘图是否开始。它可能超出了您的视野范围。

# extjs - 在 cq:Widget 中手动输入选择选项

> ID：15280349
> 
> 赞同：0
> 
> 时间：2013-03-07T19:46:57.880
> 
> 标签：extjs, aem

我希望为我的组件创建一个选择字段，但无法破译如何在 CRXDE 中手动输入这些选项。

我输入以下内容作为属性：

`options (String) : [ {value: "5", text: "5" }, { value: "10", text: "10" } ]`

这不会在对话框编辑器窗口中产生任何结果和大量 JavaScript 问题。

我遵循本文档作为指导方针，以及语法：[http ://dev.day.com/docs/en/cq/5-4/widgets-api/index.html?class=CQ.form.Selection](http://dev.day.com/docs/en/cq/5-4/widgets-api/index.html?class=CQ.form.Selection)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:23:00.317

选择 xtype 的选项是使用节点而不是属性完成的。

你的节点结构应该是这样的：

```
-[NodeName] - jcr:primaryType=cq:Widget, xtype=selection
  -options - jcr:primaryType=cq:WidgetCollection
    -[NodeName] - jcr:primaryType=nt:unstructured, text=[Text], value=[Value]
    -[Other options you want]... 
```

一个例子是：/libs/foundation/components/list/dialog/items/list/items/listFrom

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:02:38.370

对于您的最后一行..如何在 CRXDE 中手动输入这些选项？

您可以创建一个 json 文件，该文件返回一个包含文本和值的 Map。

在下拉列表中显示文本并使用 JSP 中的值。

您可以在选项字段中将 $Path 添加到该 json 中，而不是手动提供文本和值。

# vb.net - 使用 OleDbDataAdapter 从 excel 中读取一些以科学计数法出现的数字单元格？

> ID：15280353
> 
> 赞同：1
> 
> 时间：2013-03-07T19:47:13.510
> 
> 标签：vb.net, excel, oledb

使用 OleDbDataAdapter 从 excel 中读取一些采用科学计数法的数字单元格。只有只有数字的字符串（有些可能包含字母）并且是 6 位或 7 位或更多位。我不可能在每个单元格前加上一个 '。在较新版本的 excel 中完全没有问题。旧版本出现问题（我认为是 2003 年，但我不确定）

```
Dim dt As DataTable = dbConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, _
                                     New Object() {Nothing, Nothing, Nothing, "TABLE"})

Dim dbAdapter As New OleDbDataAdapter("SELECT * FROM [" & strSheet & "]  ", dbConn) 
```

我已经尝试了一切，我不知道该怎么做。我尝试按名称选择每一列并连接一个空字符串，我尝试将 IMEX=1 添加到连接字符串中。或修改注册表：

```
 Private Function CheckRegKey() As Boolean
    Try
        Dim strRows As String = My.Computer.Registry.GetValue( _
            "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Jet\4.0\Engines\Excel", "TypeGuessRows", "99").ToString
        Dim strTypes As String = My.Computer.Registry.GetValue( _
            "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Jet\4.0\Engines\Excel", "ImportMixedTypes", "zip").ToString

        If strRows <> "0" Then
            My.Computer.Registry.SetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Jet\4.0\Engines\Excel", "TypeGuessRows", 0, Microsoft.Win32.RegistryValueKind.DWord)
        End If
        If strTypes <> "Text" Then
            My.Computer.Registry.SetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Jet\4.0\Engines\Excel", "ImportMixedTypes", "Text")
        End If
    Catch ex As Exception
        Return False
    End Try
    Return True

End Function

Dim dbAdapter As New OleDbDataAdapter("SELECT * FROM [" & strSheet & "]  ", dbConn) 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:40:07.123

我似乎可以通过修改 select 语句来修复它。当与我上面的代码一起使用时，这有效。

我只包含了给我带来问题的列，但是因为我将它从 SELECT * 切换到指定列数据，所以包含您需要的每个列名很重要。

```
Dim dbAdapter As New OleDbDataAdapter("SELECT FORMAT(part_no, ""######"") As part_no FROM [" & strSheet & "]  ", dbConn) 
```

# c++ - 将 .txt 文件中的字符值读取到数组 C++ 中时出错

> ID：15280355
> 
> 赞同：1
> 
> 时间：2013-03-07T19:47:17.270
> 
> 标签：c++, arrays, fstream

我必须编写一个程序，将 .txt 文件中的单个字符值读取到数组中。当我运行代码时，它会显示一堆奇怪的符号。

![在此处输入图像描述](../Images/db4d11aa9566791be1bd3e7370b79469.png)

```
#include <iostream>
#include <fstream>
using namespace std;

int main()
{
const int NUM_ANS = 10;
char answers[NUM_ANS], student[NUM_ANS];

ifstream correctAnswers;
correctAnswers.open("C:\\Users\\RCLRC115\\Desktop\\student.txt");
int count = 0;
while (count < NUM_ANS && correctAnswers >> answers[count])
    count++;

for (int i = 0; i < NUM_ANS; i++) {
    cout << answers[i] << endl;
}

cin.get();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:49:57.503

您重新打开文件不正确。

它应该是

```
correctAnswers.open("C:\\Users\\RCLRC115\\Desktop\\student.txt"); 
```

你必须逃避`\`角色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T15:23:20.373

我建议使用注释和某种形式的错误捕获。即使它只是显示一条错误消息，以及该错误是什么。试试这个对我有用：

```
#include <iostream>
#include <fstream>
using namespace std;

int main()
{
    const int NUM_ANS = 10;
    char answers[NUM_ANS], student[NUM_ANS];

    // would recommend: 'ifstream fin;' because its shorter
    ifstream correctAnswers;

    // open the txt file
    // ifstream.open(const char* Filename, std::ios_base::open_mode _Mode);
    // use 'ios_base::in' for input, and 'ios_base::out' for output
    // it tells the ifstream how to file should be opened. In this case for input.
    correctAnswers.open("C:/Users/RCLRC115/Desktop/student.txt", ios_base::in);

    // check that the last ifstream operation didn't fail.
    if (correctAnswers.fail())
    {
        // print error message
        cout << "ERROR: Could not open file!";
        cin.get();

        // Return a value other than 0 so you'll know there was an error by looking
        // at the output window
        // The program '[#] programName.exe: Native' has exited with code 1
        return 1;
    }
    else
    {
        // print success message
        cout << "SUCCESS: File Opened! Reading File..." << '\n';
    }

    int count = 0;

    // 'while (count < NUM_ANS && correctAnswers << answers[count])' is where one error was
    // 'while (count < NUM_ANS)' is correct. correctAnswers << answers[count] is telling it to store
    // the read characters in answers[count], not checking if the character was read, and valid.

    // Basically saying:
    // 'while (count < NUM_ANS)' AND 'while (ifstream.good())' 
    // meaning the input file stream read a character and not the end of file.
    while (count < NUM_ANS && correctAnswers.good())
    {
        // this is where the other error was, it probably wasn't storing anything in answers[count]
        // store the values read in answers[count]
        correctAnswers >> answers[count];
        // increment count so loop will end
        count++;
    }

    for (int i = 0; i < NUM_ANS; i++) 
    {
        // print the value in the command window
        cout << answers[i] << endl;
    }

    // Make sure to close files open with ifstream, ofstream, and iofstream
    correctAnswers.close();

    // Wait to get input so window doesn't close
    cin.get();

    // Return 0, program exited normally
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:51:05.243

有些东西告诉我`correctAnswers.open`失败是因为你使用的路径是错误的。请记住，在 C 和 C++ 中，您必须像在字符串中`\`一样键入字符来转义字符。`\\`

这里有一个重要的教训：始终检查操作是否成功。`ifstream::is_open`存在并返回一个值是有原因的。:)

# windows - 使用wireshark在windows中监视udp数据包

> ID：15280356
> 
> 赞同：0
> 
> 时间：2013-03-07T19:47:19.330
> 
> 标签：windows, udp, packet-capture, packet-sniffers, spying

我必须捕获进出端口 44301 和 45301 的 udp 数据包。问题是我的进程管理器说有数据包传入和传出，但是当我尝试搜索该端口的活动时，我的 Wireshark 没有找到该 udp 通信. 因此，如果您有任何可能导致此问题的想法，请回复。PS如果重要的话，发送这些数据包的可执行女巫是Windows服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:04:25.490

我发现wireshark无法访问localhost行，所以我必须使用另一个数据包嗅探器。

# c# - 通过 actionlink 发送的列表在控制器中始终为空

> ID：15280358
> 
> 赞同：0
> 
> 时间：2013-03-07T19:47:24.713
> 
> 标签：c#, asp.net-mvc, checkbox

在我的 MVC 应用程序中，我有一个视图，它根据布尔属性为列表中的每个项目生成复选框。

视图显示正常，没有问题。

我想根据复选框是否被选中来获取列表中的每个项目。

第一步是这个actionlink：

```
<p>
    Send Items: @Html.ActionLink("Click Here", "SendItems")
</p> 
```

这是控制器中编写的方法：

```
 public ActionResult SendItems(IList<ObjInfo> listToSend)
    {
        m_ListInventoryToSend = new List<ObjInfo>();

        foreach (var item in listToSend.Where(item => item.m_IsSelected))
        {
            m_ListInventoryToSend.Add(item);
        }

        return View(m_ListInventoryToSend);
    } 
```

现在我面临很多问题，因为我正在学习如何编写 MVC 应用程序，所以我真的需要你的帮助：

*   当调试命中方法时，listToSend 对象始终为 null；
*   此外，即使“checked”值为真，这些复选框的每个隐藏字段都是假的；
*   如果我将“HttpPost”属性放在方法上，应用程序会返回 NotFound 错误。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:55:03.857

你不能通过`ActionLink`, 发送列表（除非你做了一些**非常丑陋**的查询字符串构建）。

首先，您应该做的是创建一个包含布尔值的模型：

```
public class MyModel
{
    public List<ObjInfo> Items { get; set; }
} 
```

在视图中设置模型：

```
@model MyModel 
```

循环遍历您的模型项目以放置一个复选框（必须是`for`模型绑定才能工作的循环）：

```
@using (Html.BeginForm("SendItems", "ControllerName")
{ 
    for (int i = 0; i < Model.Items.Count; i++)
    {
        @* Have hidden fors to keep any other data in the class*@
        @HiddenFor(m => m.Items[i].Id)
        @Html.CheckBoxFor(model => model.Items[i].IsChecked)
    }

    <input type="submit" value="Save" />
} 
```

然后，有一个 Post 方法，如下所示：

```
[HttpPost]
public ActionResult SendItems(MyModel model)
{
    foreach (var item in model.Items.Where(item => item.IsSelected))
    {
        m_ListInventoryToSend.Add(item);
    }

    //rest of your post action
} 
```

# r - 如何计算多列中某个因子的出现次数，按一列分组？

> ID：15280362
> 
> 赞同：6
> 
> 时间：2013-03-07T19:47:31.873
> 
> 标签：r, aggregate

我有一个看似简单的问题，但我无法弄清楚如何得到我想要的。

我的数据如下所示：

```
 Job     C/C++     Java     Python
  Student     FALSE     TRUE      FALSE
Developer      TRUE     TRUE       TRUE
Developer      TRUE     TRUE      FALSE
 Sysadmin      TRUE    FALSE      FALSE
  Student     FALSE     TRUE       TRUE 
```

我想按“工作”列分组并计算`TRUE`每列中的 s 数。我想要的输出如下所示：

```
 Job     C/C++     Java     Python
  Student         0        2          1
Developer         2        2          1 
 Sysadmin         1        0          0 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T19:49:44.687

假设您的 data.frame 被称为“临时”，只需使用`aggregate`：

```
aggregate(. ~ Job, temp, sum)
#         Job C.C.. Java Python
# 1 Developer     2    2      1
# 2   Student     0    2      1
# 3  Sysadmin     1    0      0 
```

* * *

逻辑是，`TRUE`等于`FALSE`“1”和“0”的数值，所以你可以`sum`在聚合时简单地使用。

* * *

并且，为了完整性添加“tidyverse”解决方案：

```
library(tidyverse)
temp %>% 
  group_by(Job) %>% 
  summarise_all(sum)
# # A tibble: 3 x 4
#   Job       C.C..  Java Python
#   <chr>     <int> <int>  <int>
# 1 Developer     2     2      1
# 2 Student       0     2      1
# 3 Sysadmin      1     0      0 
```

* * *

这是您的数据格式，易于复制和粘贴。这是通过使用获得的，`dput(your-actual-data-frame-name)`并且是您将来在将 R 问题发布到 Stack Overflow 时应该使用的。

```
temp <- structure(list(Job = c("Student", "Developer", "Developer", "Sysadmin", 
          "Student"), C.C.. = c(FALSE, TRUE, TRUE, TRUE, FALSE), Java = c(TRUE, 
          TRUE, TRUE, FALSE, TRUE), Python = c(FALSE, TRUE, FALSE, FALSE, TRUE)),
          .Names = c("Job", "C.C..", "Java", "Python"), class = "data.frame", 
          row.names = c(NA, -5L)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T20:03:44.153

替代方案`plyr`和`data.table`解决方案：

**数据表：**

```
require(data.table)
tmp.dt <- data.table(temp, key="Job")
tmp.dt[, lapply(.SD, sum), by=Job]

#         Job C.C.. Java Python
# 1: Developer     2    2      1
# 2:   Student     0    2      1
# 3:  Sysadmin     1    0      0 
```

**plyr：**

```
require(plyr)
ddply(temp, .(Job), function(x) colSums(x[-1]))

#         Job C.C.. Java Python
# 1 Developer     2    2      1
# 2   Student     0    2      1
# 3  Sysadmin     1    0      0 
```

**编辑：**如果不是 TRUE/FALSE，您必须计算`Newbie`'s 的数量，然后：

使用数据表：

```
require(data.table)
tmp.dt <- data.table(temp, key="Job")
tmp.dt[, lapply(.SD, function(x) sum(x == "Newbie")), by=Job] 
```

使用 plyr：

```
require(plyr)
ddply(temp, .(Job), function(x) colSums(x[-1] == "Newbie")) 
```

# matlab - 使用 any() 在 MATLAB 中删除 3D 矩阵中的零行

> ID：15280368
> 
> 赞同：0
> 
> 时间：2013-03-07T19:47:44.523
> 
> 标签：matlab, matrix, row, zero

以前我使用这条线来删除常规矩阵中的零行：

```
RV = RV(any(RV,2),:); 
```

但我为 3D 矩阵做了以下操作。我仍然想删除零行：

```
RV = RV(any(RV,2),:,:); 
```

但我收到一条警告，上面写着“索引超出矩阵维度”。我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:48:02.207

这是您可以对 3-D 数组执行的操作：

```
x=squeeze(any(RV,2));
[row,dimension]=find(x==0); 
```

现在这又是一个 3-D 数组，您只是不能从维度中删除`ith`行。`jth`如果您想这样做，请将其保存到一个元胞数组或 3 个不同的二维数组中。

# jquery - formatDate 格式的默认日期

> ID：15280371
> 
> 赞同：0
> 
> 时间：2013-03-07T19:47:47.340
> 
> 标签：jquery, jquery-ui, uidatepicker

我无法从文档中弄清楚这一点，但我想将 datepicker 输入的默认日期设置为与 datepicker 的显示相同的格式，*而无需*自己进行解析。例如：

```
$("#dp").datepicker({
    altField: '#helper',
    altFormat: 'yy-mm-dd',
    formatDate: 'm/d/Y',
}).val($("#helper").val()) 
```

这会将日期选择器显示为`2013-03-07`（如您所见： http: [//jsfiddle.net/zaG5z/](http://jsfiddle.net/zaG5z/)）但是，当您选择一个日期时，它确实将其显示为“m/d/Y”。即使选择相同的日期也可以`03/07/2013`。有没有办法从初始值触发该格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:01:29.703

试试这个：

```
$("#dp").datepicker({
    altField: '#helper',
    altFormat: 'yy-mm-dd',
    dateFormat: 'm/d/yy',
}).datepicker("setDate", new Date($("#helper").val())); 
```

这里重要的是使用`setDate`方法。以前您只是设置`val()`，这是设置的值，`input`但对 没有任何影响`datepicker`。

# shell - 用于迭代文件夹内的文件夹并复制文件的 Bash Shell 脚本

> ID：15280372
> 
> 赞同：0
> 
> 时间：2013-03-07T19:47:52.310
> 
> 标签：shell, file-copying

我想遍历一个目录中的多个目录并将一个特定的 csv 文件复制到不同的位置。我的 shell 脚本知识处于初级水平。我发现了一些类似于我想做的[解决方案](https://superuser.com/questions/142220/bash-shell-scripting-how-to-iterate-through-directories-and-copy-and-rename-f)，但问题是在我的情况下子目录名称不一样。

这是结构：我有根目录`~/2013-03-03/`

然后我有以下目录，我只放了几个，但我有近 300 个子目录。

```
ab   bar      ch   eml      gn   iu   kv       mhr     ne   pfl       sc   sw   ug                   zea
ace  bat-smg  chr  ext      got  jbo  kw       mi      nov  pi        scn  szl  ur                   zh-classical
af   bcl      chy  ff       gu   kaa  ky       ml      nrm  pih       sco  tet  ve                   zh-min-nan
ak   bh       ckb  fiu-vro  gv   kab  lad      mn      nso  pnb       sd   tg   vec                  zh-yue
als  bi       co   fj       ha   kbd  lbe      mo      nv   pnt       se   ti   vep 
```

这些目录中的每一个都有数百个 csv 文件，其中 csv 文件名称以目录名称开头。但我只对一个特定的 csv 文件感兴趣。假设名称是 mycsvfile.csv。我想将此文件从每个子目录复制到不同的目录`~/2013-03-03/new_dir`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:13:35.393

```
find ~/2013-03-03/ -name 'mycsvfile.csv' -exec cp {} ~/2013-03-03/new_dir/ \; 
```

如果文件名为`subfoldername/subfoldername-mycsvfile.csv`，请使用以下内容：

```
find ~/2013-03-03/ -regextype posix-awk -regex '.*/([^/]*)/\1-mycsvfile.csv' -exec cp {} ~/2013-03-03/new_dir/ \; 
```

...我总是在纠结什么味道正则表达式可以做什么以及如何做，这似乎有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:09:19.030

可能有很多方法可以做到这一点。这是一个相对简单的：

```
cd ~/2013-03-03
/bin/ls -1 */mycsvfile.csv | cpio -dump ~/2013-03-03/new_dir/. 
```

# javascript - 如何使画布操作更快（HTML5 + JQuery）

> ID：15280374
> 
> 赞同：0
> 
> 时间：2013-03-07T19:47:57.113
> 
> 标签：javascript, html, canvas

我有一个大画布（几乎覆盖了整个屏幕），其中包含五颜六色的形状。还有一个颜色选择器。每次用户使用颜色选择器选择颜色时，我都会检查所选颜色是否属于预先确定的一组颜色（一组十种颜色）。如果选择的颜色是十种颜色之一，我只在画布中显示该颜色的形状并隐藏其他颜色的形状。代码的简化版本如下：

```
//R,G,B : selected color
pixel = context.getImageData(0,0,W,H);                  
for(i=0; i<pixel.data.length; i+=4)
    if ((pixel.data[i]==R)&&(pixel.data[i+1]==G)&&(pixel.data[i+2]==B))
        pixel.data[i+3]=255;    
    else
        pixel.data[i+3]=0;

context.putImageData(pixel,0,0); 
```

所以任何时候我要么显示所有颜色，要么只显示十种颜色中的一种。代码工作正常。问题是它非常慢。有谁知道我怎样才能让它更快？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:19:05.453

您可以进行一些优化，这可能会有所帮助，但我不得不说您的整体方法可能不是最佳的。如果我们能获得更多关于如何生成原始图像的信息，可能还有其他选择。

1.  缓存`.data`值 - 无需在每次迭代中取消对该属性的引用五次
2.  缓存数组的长度`.data`，它在循环期间不会改变
3.  使用`===`而不是`==`允许在没有强制转换的情况下进行精确比较

如果幸运的话，它们之间的代码可能会加快 30% 的速度：

```
var pixel = context.getImageData(0, 0, W, H);
var data = pixel.data;
var i = 0, n = data.length;
while (i < n) {
    data[i + 3] = (data[i] === R && data[i + 1] === G && data[i + 2] === B) ? 255 : 0;
    i += 4;
}
context.putImageData(pixel, 0, 0); 
```

# internet-explorer - CSS 中的下拉菜单在 IE9 中显示为透明

> ID：15280376
> 
> 赞同：0
> 
> 时间：2013-03-07T19:48:01.703
> 
> 标签：internet-explorer, css, transparency

在谷歌搜索和弄乱我的 CSS 两天后，我放弃了，向你们寻求帮助。我完全在 CSS 中创建了一个带有下拉菜单的导航菜单。到了在 IE9 下测试这个的时候，显然它没有用。

下拉列表看起来是透明的，我无法弄清楚为什么我的生活。在其他浏览器中一切正常，但我似乎找不到 IE 不理解的属性。

我怀疑这部分：

```
nav ul ul li {
    float: none;
    border-bottom: 1px solid #b7b7b7;
    border-top: 1px solid #fff;
    position: relative;
    background: -webkit-linear-gradient(#eeeeee 0%, #d4d4d4 100%);
    background: linear-gradient(#eeeeee 0%, #d4d4d4 100%);
    background: -moz-linear-gradient(#eeeeee 0%, #d4d4d4 100%);
    background: -o-linear-gradient(#eeeeee 0%, #d4d4d4 100%);
    -moz-box-shadow: inset 2px 2px 5px #ccc;
    -webkit-box-shadow: inset 2px 2px 5px #ccc;
    box-shadow: inset 2px 2px 5px #ccc;
} 
```

IE有没有可能看不到**背景**？我在这里附上了小提琴：http: [//jsfiddle.net/VU37g/](http://jsfiddle.net/VU37g/)

任何关于 CSS 的帮助或评论都欢迎并提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:51:22.043

因为 IE 9 还不支持渐变，所以您必须使用专有的 MS 过滤器属性来实现类似的效果。如果未指定背景颜色的值，则`transparent`默认设置为。

IE 的语法如下：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#cccccc',  endColorstr='#000000'); 
```

[更多信息](http://msdn.microsoft.com/en-us/library/ms532997%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:55:28.850

要获得跨浏览器兼容性，请遵循本指南

仅适用于 IE：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#cccccc', endColorstr='#000000'); 
```

[http://webdesignerwall.com/tutorials/cross-browser-css-gradient](http://webdesignerwall.com/tutorials/cross-browser-css-gradient)

# ios - 显示/隐藏具有流畅动画的导航控制器

> ID：15280381
> 
> 赞同：0
> 
> 时间：2013-03-07T19:48:11.013
> 
> 标签：ios, uinavigationcontroller

我在我的应用程序中使用导航控制器，并且在某些视图上我想隐藏它们。

我使用以下代码来隐藏和显示导航控制器。

```
- (void)viewWillAppear:(BOOL)animated
{
    [navigationController setNavigationBarHidden: YES animated:YES]
}

- (void)viewWillDisappear:(BOOL)animated
{
    [navigationController setNavigationBarHidden: NO animated:YES]
} 
```

当我推送视图控制器时，我正在调用这些方法。

```
[self.viewController.navController pushViewController:mapViewController animated:YES]; 
```

这工作正常，但它会导致生涩的效果。

在第一个视图中，导航栏被隐藏，导致整个屏幕向上移动，然后显示第二个视图。

在弹出第二个视图时，会显示导航栏并将整个屏幕向下推，然后显示第一个视图。

无论如何我可以在没有生涩效应的情况下完成这项工作吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:53:55.513

使用半透明导航栏，这将位于视图上方而不是将其向下推

# java - Java连接各种方法（不是连接字符串的方法）

> ID：15280388
> 
> 赞同：1
> 
> 时间：2013-03-07T19:48:23.090
> 
> 标签：java, object, methods, concatenation

当我写一个有几个空格的类时：

```
public class MyObj {
    public void doSomething() { /* does something */ }
    public void doSomethingElse() { /* does something else */ }
    ...
} 
```

我可以使用以下代码：

```
MyObj myObj = new MyObj();
myObj.doSomething(); // does something
myObj.doSomethingElse(); // does something else 
```

但是，如果我这样写课程：

```
public class MyObj {
    public MyObj doSomething() {
        // do something;
        return this;
    }
    public MyObj doSomethingElse() {
        // do something else;
        return this;
    }
} 
```

我可以使用以下代码来完成相同的任务：

```
MyObj myObj = new MyObj();
MyObj.doSomething().doSomethingElse(); // does something and does something else. 
```

我在 JavaScript (jQuery) 中看到了第二种形式：

```
$("#myDialog").dialog().focus().mySuperLongNameHomeMadeBullshitFunction().remove(); 
```

所以我的问题是，在 Java 中，使用连接形式或标准的优缺点是什么？（我真的不会换到第二个，只是好奇，就像我们一样）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:51:10.390

[方法链接](http://en.wikipedia.org/wiki/Method_chaining)允许您在单个表达式中调用方法。

这在您不能使用多个语句的情况下很有用——例如，this() 和 super()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:53:48.353

使用方法链可以允许使用 fluent API 创建一些 DSL 并创建更清晰的代码。

在做完全相同的事情时，它可以更简洁、更有意义。

# android - “Ellipsize”只显示一个点

> ID：15280389
> 
> 赞同：8
> 
> 时间：2013-03-07T19:48:28.690
> 
> 标签：android, android-layout, android-edittext

在我的三星 Galaxy Nexus 上，行为正常，显示三个点，但在三星 S2 中，它只显示一个点。只有一个布局文件：

```
<TextView
    android:id="@+id/textViewOfferTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/textViewRedemptionDate"
    android:layout_alignParentLeft="true"
    android:ellipsize="end"
    android:singleLine="true"
    android:textColor="@color/pontai_dark_gray"
    android:textSize="@dimen/ndp_font_size" /> 
```

这是一个例子：

[http://img109.imageshack.us/img109/5118/96452147.png](http://img109.imageshack.us/img109/5118/96452147.png)

有人见过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-08T16:22:58.110

无法保证文本将如何椭圆化（如果您问我，单个点会有点误导，但可以将其解释为缩写）。如果您想确保“三点”行为，您可以自由地继承`TextView`并添加您的自定义行为。[在这个 SO question 上](https://stackoverflow.com/a/6763689/1379847)可以看到一个例子（只是不要打扰代码的“多行”部分）。长话短说，省略号的单点应该不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-10T09:20:22.220

消除

```
android:singleLine="true" 
```

并尝试

```
android:lines="1"
android:ellipsize="end" 
```

这个对我有用。

# php - 从 $_POST 在 php 中进行 json 解码

> ID：15280391
> 
> 赞同：1
> 
> 时间：2013-03-07T19:48:43.440
> 
> 标签：php, post, json

我正在使用一个将 JSON 数据发送到我托管的远程服务器的 API。如果有人使用 beanstalk，我基本上是在发送一个网络钩子，这样你就可以在[这里](http://support.beanstalkapp.com/customer/portal/articles/68110-trigger-a-url-on-commit-with-web-hooks)看到 JSON 数据的设置 （它是一个 GIT 存储库）。无论我尝试什么，我似乎都无法解码 JSON 对象。

我试过了：

```
$myArray = json_decode($_POST, true); 
```

和

```
$decodedText = html_entity_decode($json);
$myArray = json_decode($decodedText, true); 
```

和

```
$json = file_get_contents("php://input");
$myArray = json_decode($json); 
```

但每次解码的 JSON 出现时`NULL`。帖子数据在那里，原始数据也在那里，但由于某种原因它没有正确解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T13:56:52.067

确保您的 json 变量中没有隐藏字符，否则它将为无效的 json 格式返回 null。

在此处查看类似的答案：[Json decode and variable](https://stackoverflow.com/questions/22227043/json-decode-and-variable/22228045#22228045)

# php - 从mysql获取数据库

> ID：15280392
> 
> 赞同：0
> 
> 时间：2013-03-07T19:48:44.867
> 
> 标签：php, mysql, database

我有三个这样的表：

表格1：

```
id|name with row 1: [1|alex] and row2: [2|jane] 
```

表 2

```
nameid|classid with row 1: [1|2] and row2: [1|1] and row3: [2|2] 
```

表3

```
classid|classname with row 1: [1|A] and row2: [2|B] 
```

我想获取表 1 上的 ID，将其与表 2 进行比较以获取类 ID，然后将它们与表 3 进行比较以获取类名。我有表 1 中的 ID，我这样做：

```
<?php
$result = mysql_query("SELECT * FROM table2 WHERE nameid='$id'") or die(mysql_error());

while ($row = mysql_fetch_array($result)) {
    $classid = $row['classid'];
    //Get the class id to compare with table3
    $result = mysql_query("SELECT * FROM table3 WHERE classid='$classid'") or die(mysql_error());

    while($row = mysql_fetch_array($result)) {
        echo $row['classname'];
       //Write down the class name
    }       
}   
?> 
```

但在表 2 中，有两行（1 和 2）具有相同的`nameid = 1`，但代码只打印一个类名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:54:32.943

您正在重复使用`$row`，`$result`这导致了您的问题。

```
$result = mysql_query("SELECT * FROM table2 WHERE nameid='$id'") or die(mysql_error());
while ($row = mysql_fetch_array($result))
{
    $classid = $row['classid'];

    $result2 = mysql_query("SELECT * FROM table3 WHERE classid='$classid'")or die(mysql_error());
    while($row2 = mysql_fetch_array($result2)){
        echo $row2['classname'];

}

} 
```

但是，您可以在一个带有连接的查询中得到它。

```
select table3.classname from table2 left join table3 on table3.classid = table2.classid where table2.nameid='$id' 
```

还必须把它扔进去，否则其他人不会使用你应该使用 mysqli 或 pdo 的 mysql_* 函数。

# java - 如何在 jboss 中修改standalone-full-ha.xml

> ID：15280393
> 
> 赞同：2
> 
> 时间：2013-03-07T19:48:47.457
> 
> 标签：java, xml, jboss7.x, redhat

我正在修改 JBoss EAP 6.0.1 的独立/配置目录中的standalone-full-ha.xml 文件，但是当我重新启动我的应用程序服务器时，standalone-full-ha.xml 更改恢复到以前状态。

修改standalone-full-ha.xml文件的过程是什么？在修改此文件之前我是否需要更改任何其他配置？

请指教。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:35:05.003

Jboss 可以在运行时保存对配置文件的更改。正常程序还会使 Jboss 在关机时将设置文件保存回磁盘。（作为旁注，在域模式下，您的部署也被写入配置文件，因此您可以准确地打开它们并查看您现在部署的内容。如果您然后重新启动 Jboss，它将读取配置文件并继续重新部署您在重新启动之前部署的应用程序）

**这意味着您编辑的配置文件在关机时被覆盖。**

> 我通常在单独的位置编辑配置文件，然后将其移动到配置目录。我实际上鼓励你也对这个设置文件进行版本控制，因为随着时间的推移它可能会包含很多小的变化。

# c# - 编辑多级嵌套对象列表的正确方法

> ID：15280395
> 
> 赞同：4
> 
> 时间：2013-03-07T19:48:52.353
> 
> 标签：c#, .net-3.5, webforms

我有 3 个对象：

```
public class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public List<Order> Orders { get; set; }

    public Person()
    {
        Orders= new List<Order>();
    }
}

public class Order
{
    public int Id { get; set; }
    public string Description { get; set; }
    public string Date { get; set; }
    public List<Item> Items { get; set; }

    public Order()
    {
        Items= new List<Item>();
    }
}

public class Item
{
    public int Id { get; set; }
    public string ProductName { get; set; }
    public int Number { get; set; }
} 
```

如您所见，每个人都可以有多个订单，每个订单可以有多个项目。

在我的应用程序中，来自 DB 的数据如下所示：

```
private List<Person> _persons;

_persons = new List<Person>
    {
     new Person
      {
       Id = 1,
       Name = "John",
       Surname = "Smith",
       Orders = new List<Order>
        {
         new Order
          {
           Id = 1,
           Description = "First Order",
           Date = "2013-03-07",
           Items =
            new List<Item>
             {
              new Item {Id = 1, Number = 2, ProductName = "Chair"},
              new Item {Id = 2, Number = 1, ProductName = "Bed"}
             }
          },
         new Order
          {
           Id = 2,
           Description = "Second",
           Date = "2013-03-07",
           Items =
            new List<Item>
             {
              new Item {Id = 1, Number = 2, ProductName = "Pen"},
              new Item {Id = 2, Number = 1, ProductName = "Pencil"}
             }
          }
        }
      },
      new Person
      {
       Id = 2,
       Name = "Adam",
       Surname = "West",
       Orders = new List<Order>
        {
         new Order
          {
           Id = 1,
           Description = "Adams order",
           Date = "2013-03-07",
           Items =
            new List<Item>
             {
              new Item {Id = 1, Number = 2, ProductName = "first"},
              new Item {Id = 2, Number = 1, ProductName = "second"}
             }
          },
         new Order
          {
           Id = 2,
           Description = "Adams second",
           Date = "2013-03-07",
           Items =
            new List<Item>
             {
              new Item {Id = 1, Number = 2, ProductName = "Pen"},
              new Item {Id = 2, Number = 1, ProductName = "Pencil"}
             }
          }
        }
      }
    }; 
```

我已经创建了带有 2 个标签和 datagridview 的自定义用户控件，如下所示： ![在此处输入图像描述](../Images/0251dd6329207f9d0a115e807b646b8b.png) 下面是我的代码：

```
using System.Windows.Forms;
using Demo.Model;

namespace Demo.Controls
{
    public partial class OrderView : UserControl
    {
        private Order _order;

        public Order Order
        {
            get { return _order; }
            set
            {
                _order = value;
                UpdateView();
            }
        }

        private void UpdateView()
        {
            if (_order == null) return;
            IdLBL.Text = string.Format("ID: {0}", _order.Id);
            DateLBL.Text = string.Format("Date: {0}", _order.Date);

            ItemsDGV.DataSource = _order.Items;
        }

        public OrderView()
        {
            InitializeComponent();
        }
    }
} 
```

然后在主窗体中，我将该控件的实例添加到 flowLayoutPanel （针对特定人员的每个订单）：

```
private void RefreshView()
{
   flowLayoutPanel1.Controls.Clear();
   foreach (Order order in _persons[_currentPerson].Orders)
   {
      flowLayoutPanel1.Controls.Add(new OrderView {Order = order});
   }
} 
```

使用上述数据，我的应用程序如下所示： ![在此处输入图像描述](../Images/4e1bee977271763038534eca5def49c5.png)

我需要能够添加/编辑每个订单的每个项目。添加似乎很容易 - 我将创建新表单，用户将输入详细信息，然后我将进行 DB 调用以添加该项目。

我的问题是：
**添加/编辑项目后如何自动刷新视图？**我可以以某种方式将我的控件绑定到该列表，每次我更新它我的视图更新。我需要能够向人员添加项目和订单。 **最简单的方法是什么？**

**这种显示方式正确吗？我可以改进它吗？如果是，那怎么办？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:16:18.027

解决此问题的一种方法是使用轮询机制。这可以通过使用 System.Threading.Timer 进行探测[，](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)后者使用 System.Threading.ThreadPool。

您将反复查询以查看您的数据是否已更新。您需要将修改后的日期与您的数据一起存储，我建议将其存储为 UTC。或者，您可以只使用每次更新数据时递增的整数标签，然后如果标签已过期，您就知道需要更新显示的数据。

轮询刷新的危险之处在于您的服务器会遇到多少负载，但如果您的并发用户群很小，这将不是问题。如果你发现它会导致性能问题，你可以调整你的轮询间隔，结合缓存技术，并且可能会管理你的服务器。

您的新 OrderView 类可能类似于以下内容：

```
using System.Windows.Forms;
using Demo.Model;
using System.Threading;

namespace Demo.Controls
{
    public partial class OrderView : UserControl, IDisposable
    {
        private Order _order;
        private Timer poller;

        public Order Order
        {
            get { return _order; }
            set
            {
                _order = value;
                UpdateView();
            }
        }

        private void UpdateView()
        {
            if (_order == null) return;
            IdLBL.Text = string.Format("ID: {0}", _order.Id);
            DateLBL.Text = string.Format("Date: {0}", _order.Date);

            ItemsDGV.DataSource = _order.Items;
        }

        public OrderView()
        {
            InitializeComponent();
            _poller = new Timer(CheckUpdate, null, timeSpan, timeSpan);
        }

        private void CheckUpdate(Object state)
        {
            //Do update check and update Order if it has changed
        }

        public void Dispose()
        {
            if (_poller != null)
            {
                _poller.Dispose();
            }
        }
    }
} 
```

# asp.net - HyperLink 控件产生 System.NullReferenceException

> ID：15280398
> 
> 赞同：0
> 
> 时间：2013-03-07T19:48:54.820
> 
> 标签：asp.net, object, instance

我知道这是一匹被一遍又一遍地殴打的死马，但我需要一些帮助来解决“System.NullReferenceException：对象引用未设置为对象的实例”。问题。我已经访问了许多链接，但我是编程新手，我无法从这些建议中脱颖而出。

错误发生在第 47 行：

```
Line 45: HyperLink topNavigation = (HyperLink)e.Item.FindControl("HyperLinkTopNavigation");
Line 46: //Use Sitecore API to get the link to the Item and upadte the href property of link
Line 47: topNavigation.NavigateUrl = LinkManager.GetItemUrl(currentItem);
Line 48: //Assign name to the link
Line 49: topNavigation.Text = currentItem.Name; 
```

* * *

我的 ascx 代码是：

```
<%@ Control Language="c#" AutoEventWireup="true" TargetSchema="http://schemas.microsoft.com/intellisense/ie5"  Inherits="Layouts.Topnavigation.TopnavigationSublayout" CodeFile="~/layouts/TopNavigation.ascx.cs"  Debug="true" %>

<%@ register TagPrefix="sc" Namespace="Sitecore.Web.UI.WebControls" Assembly="Sitecore.Kernel" %>
    <asp:repeater runat="server" id="RepeaterTopNavigation" onitemdatabound="RepeaterTopNavigation_ItemDataBound">
<headertemplate>
<ul>
<li><a href="home.aspx">Home</a></li>

<itemtemplate>
<li>
<asp:hyperlink id="HyperLinkTopNavigation" runat="server"></asp:hyperlink>
</li>
</itemtemplate>

<footertemplate>

</footertemplate></ul></headertemplate>
</asp:repeater> 
```

我的背后代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Sitecore.Data.Items;
using Sitecore.Links;

namespace Layouts.Topnavigation {

    /// <summary>
    /// Summary description for TopnavigationSublayout
    /// </summary>
  public partial class TopnavigationSublayout : System.Web.UI.UserControl 
{
          protected void Page_Load(object sender, EventArgs e)
{
//get the home item, this is hardcoded but you can define it in web.config
Item home = Sitecore.Context.Database.GetItem("/sitecore/content/home");
//get all children from home using Sitecore API
Item[] children = home.Children.ToArray();
//Bind the children to repeater
RepeaterTopNavigation.DataSource = children;
RepeaterTopNavigation.DataBind();

}

public void RepeaterTopNavigation_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
//gets the current data item from RepeaterItemEventsArgs and cast it as a Sitecore Item
Item currentItem = (Item)e.Item.DataItem;

//check if it is not null, safety first
if (currentItem != null)
{

//check if it is coming from Item or Alternating Item template
if (e.Item.ItemType == ListItemType.Item || 
          e.Item.ItemType == ListItemType.AlternatingItem)
{

//Find the HyperLink control that has been defined in repeater
HyperLink topNavigation = (HyperLink)e.Item.FindControl("HyperLinkTopNavigation");
//Use Sitecore API to get the link to the Item and upadte the href property of link
topNavigation.NavigateUrl = LinkManager.GetItemUrl(currentItem);
//Assign name to the link
topNavigation.Text = currentItem.Name;

}
}
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:12:18.453

您的`headertemplate`标签包裹了整个中继器，这可能就是找不到 HyperLink 控件的原因。像这样修复它：

```
<asp:repeater runat="server" id="RepeaterTopNavigation" onitemdatabound="RepeaterTopNavigation_ItemDataBound">
<headertemplate>
<ul>
<li><a href="home.aspx">Home</a></li>
</headertemplate>
<itemtemplate>
<li>
<asp:hyperlink id="HyperLinkTopNavigation" runat="server"></asp:hyperlink>
</li>
</itemtemplate>

<footertemplate>
</ul>
</footertemplate>
</asp:repeater> 
```

# django - 芹菜 - 中间的子任务失败后有没有办法继续执行链

> ID：15280399
> 
> 赞同：6
> 
> 时间：2013-03-07T19:48:56.490
> 
> 标签：django, celery, django-celery

我需要找到在任何中间子任务引发异常后如何继续使用*immutable=True子任务执行链的方式。*

我已经阅读了这个[线程](https://stackoverflow.com/questions/11508112/retrying-celery-failed-tasks-that-are-part-of-a-chain)和这个[问题评论](https://github.com/celery/celery/issues/1014#issuecomment-10053136)。现在这些错误已修复，但我需要实现相反的行为。我不需要停止我的链执行。是否有另一种**方法可以以任何顺序依次执行独立任务列表而不在它们之间发送结果**？而且我需要异步执行它们，因为在这种情况下 django-celery 将存储有关每个任务的统计信息。

一种解决方案是使用以下内容覆盖所有子任务的主体：

```
try:
    ...
except Exception, e:
    logger.error('Exception raised: %s' % e)
    raise e 
```

但在这种情况下，所有子任务都将以**SUCCESS状态执行，并且***django-celery*管理界面中的异常回溯将毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:45:47.343

Perharps 使用 Chord 和[CELERY_CHORD_PROPAGATES](http://docs.celeryproject.org/en/latest/userguide/canvas.html#error-handling)

因此，当 Chord 的子部分失败时，您可以管理异常并使用它做您想做的事情（记录某些内容，重新排列任务以进行更改执行等）。

因为你已经有了一个链，Chord 只是它的一部分，你需要知道状态的任务。

# ios - 从 cv::VideoCapture 抓取最后一帧

> ID：15280400
> 
> 赞同：1
> 
> 时间：2013-03-07T19:48:57.627
> 
> 标签：ios, opencv, video-capture

如何使用 cv::VideoCapture 访问视频的最后一帧？

在 OpenCVViewController.h 中：

```
@interface OpenCVViewController : UIViewController {

    cv::VideoCapture *_videoCapture;
    cv::Mat _lastFrame;

    AVCaptureVideoPreviewLayer *_previewLayer;
    UIView *_videoPreviewView;
}

@property(nonatomic, retain) IBOutlet UIButton *captureButton;
@property(nonatomic, retain) IBOutlet UIView *videoPreviewView;
@property(nonatomic, retain) AVCaptureVideoPreviewLayer *previewLayer;

- (IBAction)capture:(id)sender;

@end 
```

在 OpenCVViewController.mm 中：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    _videoCapture = new cv::VideoCapture;
    if (!_videoCapture->open(CV_CAP_AVFOUNDATION)) {
        NSLog(@"Open video camera failed");
    }

    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetHigh;

    CALayer *viewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

    _previewLayer.frame = _videoPreviewView.bounds;
    [_videoPreviewView.layer addSublayer:_previewLayer];
    AVCaptureDevice *device = [AVCaptureDeviceInput defaultDeviceWithMediaType:AVMediaTypeVideo];

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        NSLog(@"Error opening camera: %@", error);
    }

    [session addInput:input];
    [session startRunning];

}

- (IBAction)capture:(id)sender {

    _captureButton.enabled = NO;

    if (_videoCapture && _videoCapture->grab()) {
        (*_videoCapture) >> _lastFrame;          //Line is hit
    }
    else {
        NSLog("Failed to grab frame");
    }
} 
```

当按下捕获按钮时，我想抓取videoCapture中的最后一帧并将数据保存到_lastFrame中。使用上面显示的方法，在 IBAction 中，_last 帧是空的。

有没有另一种方法来抓取一个框架并使用 _lastFrame 稍后处理图像？

提前致谢！使用带有 opencv2 框架的 iOS 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:55:45.500

您应该尝试使用[VideoCapture::read](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-read)，它结合了grab() 和retrieve()。

另外，我认为 read() 和 retrieve() 都返回对 VideoCapture 缓冲区的引用，因此您需要使用 cvCloneImage() 来操作帧。

# asp.net - 从启用 Windows 身份验证和服务帐户的 Web 服务器中运行的 Web 应用程序获取客户端用户名

> ID：15280402
> 
> 赞同：1
> 
> 时间：2013-03-07T19:49:08.060
> 
> 标签：asp.net, vb.net, networkcredentials

在将我的应用程序部署到 WebServer 时遇到以下问题，

我拥有的代码是“Usercheck = My.User.Name”，但这将返回运行我的 web 应用程序的实例的服务帐户，所以我需要显示“evilla”，这是我当前的 Windows 凭据，当我尝试第一次连接到它要求我的网络凭据的 web 应用程序。

是否可以获取我的 Windows 用户名而不是服务帐户？（我正在远程连接到应用程序）

我努力了：

```
 'Usercheck = Request.LogonUserIdentity.Name
    Usercheck = HttpContext.Current.Request.LogonUserIdentity.Name
    TextBox4_AddDataControl.Text = Usercheck
    TextBox6_AddDataControl.Text = Environment.UserName 
```

我错过了什么吗？

注意：我从上面的代码“NA/SRS-SA”（服务帐户）中获取

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:39:32.070

经过更多研究，以下代码返回了当时在服务帐户中登录的用户。

```
 TextBox6_AddDataControl1.Text = Request.ServerVariables("LOGON_USER") 
```

希望它可以帮助将来的人！:)

# c++ - 如何循环多图只为每个键获取第一个键值对？

> ID：15280405
> 
> 赞同：4
> 
> 时间：2013-03-07T19:49:09.607
> 
> 标签：c++, iteration, multimap

例如，如果我有这样的 mmap：

```
alice -> 30
bob -> 23
josh -> 20
josh -> 30
andy -> 40
andy -> 40 
```

只得到这对：

```
alice -> 30
bob -> 23
josh -> 20
andy -> 40 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T20:05:12.193

这应该尽可能干净、有效：

```
for(auto it = m.begin(); it != m.end(); it = m.upper_bound(it->first)) {
  std::cout << it->first << ":" << it->second << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:59:46.153

这是一个简短的答案，但不是最有效的

```
multimap<string, int> mm;
// Add stuff to multimap

// Map with only the first items from multimap
map<string,int> m;

for(auto iter = mm.rbegin(); iter != mm.rend(); ++iter){
   m[iter->first] = iter->second;
} 
```

这是有效的，因为我们从头开始。因此，multimap 中的任何重复键都将覆盖 map 中的前一个键。既然我们从头开始，我们应该有第一把钥匙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:59:27.833

也许你需要这个，我曾经`lower_bound`只得到一个项目：

```
#include <iostream>
#include <map>
#include <string>
#include <set>

using namespace std;

int main()
{
    multimap<string, int> m;

    m.insert(make_pair("alice", 30));
    m.insert(make_pair("bob", 23));
    m.insert(make_pair("josh", 30));
    m.insert(make_pair("josh", 20));
    m.insert(make_pair("andy", 40));
    m.insert(make_pair("andy", 40));

    set<string> names;

    for (multimap<string, int>::const_iterator i = m.begin(); i != m.end(); i++)
        names.insert(i->first);

    for (set<string>::const_iterator i = names.begin(); i != names.end(); i++)
    {
        multimap<string, int>::const_iterator j = m.lower_bound(*i);
        cout << j->first << " -> " << j->second << endl;
    }
} 
```

输出：

> 爱丽丝 -> 30
> 
> 安迪-> 40
> 
> 鲍勃-> 23
> 
> 乔什-> 30

# java - 每第三个位置拆分一个整数并使用这些数字进行操作？

> ID：15280410
> 
> 赞同：-1
> 
> 时间：2013-03-07T19:49:20.590
> 
> 标签：java, algorithm, split, integer, sum

例如。我有 Integer=45859694，我需要以这种方式从左到右拆分 458,596,94，并将第一个数字乘以 7，第二个数字乘以 3，第三个数字乘以 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:55:44.083

```
String value =Integer.toString();
String tempVal;
int index = 0;
while (index<value.size()){
    if (index+3>value.size(){
       tempVal = value.substring(index);
       //do my operation on Integer.parseInt(tempVal)
       break;
    }
    tempVal = value.substring(index,index+3);
    //do my operation on Integer.parseInt(tempVal)
    index +=3;
} 
```

或 String.valueof 如果它不是一个 Integer 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:55:12.117

获取整数 ( `String.valueOf`) 的字符串表示，然后转换为数组并处理数组中三个元素的组。你到家了！

# python - 从 Raspberry Pi 打印到标签打印机

> ID：15280412
> 
> 赞同：1
> 
> 时间：2013-03-07T19:49:24.837
> 
> 标签：python, printing, webcam, raspberry-pi

我有一个想要打印的树莓派。

我搜索一个像这样工作的脚本：

**按钮 1**

印刷...

```
"Hello World"
" - TIME - " (MM:HH)
" - DATE - " (DD-MM-YY) 
```

...在纸上。

**按钮 2** 然后我需要它从 USB 网络摄像头拍摄照片，然后打印...

```
"Hello World"
" - PHOTO - " (The Photo)
" - TIME - " (MM:HH)
" - DATE - " (DD-MM-YY) 
```

...在纸上。

按钮 1 是我现在真正需要的。希望有人可以帮助我。

我正在使用 USB Brother 标签打印机。

# java - 从 Class 对象指定 java 中的泛型类型

> ID：15280414
> 
> 赞同：10
> 
> 时间：2013-03-07T19:49:39.700
> 
> 标签：java, generics, reflection

为什么这是错误的：

```
 Class<? extends Number> type = Integer.class;
    ArrayList<type> = new ArrayList<>(); 
```

?

给定一个类对象，有没有办法实例化一个特定类型的类？

* * *

显然我永远不会直接这样做，这只是一个说明需要什么的例子。在我需要的实际代码中，我不知道类型的名称。例如

```
 public void createAList(Class<? extends Number> type)  
{
    ArrayList<type> toReturn = new ArrayList<>();
    return toReturn;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T19:58:39.627

```
<T extends Number> ArrayList<T> createAList(Class<T> type)  
{
    ArrayList<T> toReturn = new ArrayList<>();
    return toReturn;
}

ArrayList<Integer> intList = createAList(Integer.class); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T19:50:43.193

这不是你使用泛型的方式。您不使用`Class`对象，而是直接在代码中使用类名。

```
ArrayList<Integer> = new ArrayList<>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T19:54:34.437

[感受一下java Class](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)（实际上也是通用的）对象和类名之间的区别。

您应该使用指定泛型类型的类名。

```
ArrayList<Number> = new ArrayList<>();
// ArrayList<Number.class> = new ArrayList<>(); <- WRONG 
```

## 升级版：

如果您只在运行时知道类型，请使用此方法：

```
public <T extends Number> void createAList(Class<T> type) {
    ArrayList<T> toReturn = new ArrayList<>();
    return toReturn;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T19:52:50.220

An`ArrayList<>`必须具有它拥有的特定类型。您可以在其中放置该类型或任何子类型的对象。

所以使用

```
List<Number> = new ArrayList<Number>(); 
```

你可以把`Integers`它放进去

*请注意我如何使用左侧的接口和等号右侧的类。这是一种最佳实践。*

如果您想要一个仅包含`Integer`（根据您的示例）的列表，@irreputable 的答案是您最好的选择。这个答案将成立`Integer`，但不仅仅是`Integer.`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T21:06:11.213

从字面上看，其他答案关于如何实现的建议`createAList`忽略了一些重要的事情：由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，这种方法毫无意义。

给定你想要一个`List<? extends Number>`，你可以这样写：

```
List<? extends Number> lst = new ArrayList<>(); 
```

如果你只想要一个`List<?>`，你可以写：

```
List<?> lst = new ArrayList<>(); 
```

如果您在类型参数的范围内`T`并且想要 a `List<T>`，您可以编写：

```
List<T> lst = new ArrayList<>(); 
```

请注意，`Class`对象与这些构造函数调用无关，就像其他答案中的方法一样。这是因为在运行时，`ArrayList`实例不知道也不关心它的引用在运行时的泛型类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-07T23:19:09.313

你甚至不需要传入参数：

```
public <T extends Number> ArrayList<T> createAList () {
    return new ArrayList<T>();
} 
```

尽管您可能需要在调用时显式指定类型参数：

```
ArrayList<Integer> intList = this.<Integer>createAList(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T20:24:03.603

```
ArrayList<type> = new ArrayList<>(); 
```

这条线是错误的。首先，您在这里错过了标识符（变量名）；其次，您混合了“类型”和“类”的概念。你可以不关心

```
ArrayList<Integer> list = new ArrayList<>(); 
```

但根据你的说法，`type = Integer.class`. 显然，`Integer`不等于`Integer.class`。同样你不能有`Integer.class i = 1;`前一个是“类型”，第二个是“类”对象。

您可以创建一个通用方法：

```
public <T extends Number> List<T> createAList (Class<T> type) {
    return new ArrayList<T>();
} 
```

# cloudbees - 最近开始使用 Cloudees 构建 VerifyError

> ID：15280416
> 
> 赞同：0
> 
> 时间：2013-03-07T19:49:44.750
> 
> 标签：cloudbees

mvn clean install 在本地运行良好，但是当我们使用 cloudbees 运行它时，我们看到构建失败并出现以下异常（见下文）。

有人有线索吗？

```
Exception in thread "pool-16-thread-3" Exception in thread "pool-17-thread-1" java.lang.VerifyError: (class: org/apache/maven/wagon/providers/http/httpclient/auth/BasicUserPrincipal, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.apache.maven.wagon.providers.http.httpclient.auth.UsernamePasswordCredentials.<init>(UsernamePasswordCredentials.java:83)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.openConnectionInternal(AbstractHttpClientWagon.java:380)
    at org.apache.maven.wagon.AbstractWagon.openConnection(AbstractWagon.java:116)
    at org.apache.maven.wagon.AbstractWagon.connect(AbstractWagon.java:218)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.connectWagon(WagonRepositoryConnector.java:345)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.pollWagon(WagonRepositoryConnector.java:385)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:571)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
java.lang.VerifyError: (class: org/apache/maven/wagon/providers/http/httpclient/auth/BasicUserPrincipal, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.apache.maven.wagon.providers.http.httpclient.auth.UsernamePasswordCredentials.<init>(UsernamePasswordCredentials.java:83)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.openConnectionInternal(AbstractHttpClientWagon.java:380)
    at org.apache.maven.wagon.AbstractWagon.openConnection(AbstractWagon.java:116)
    at org.apache.maven.wagon.AbstractWagon.connect(AbstractWagon.java:218)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.connectWagon(WagonRepositoryConnector.java:345)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.pollWagon(WagonRepositoryConnector.java:385)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:571)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Exception in thread "pool-19-thread-1" java.lang.VerifyError: (class: org/apache/maven/wagon/providers/http/httpclient/auth/BasicUserPrincipal, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.apache.maven.wagon.providers.http.httpclient.auth.UsernamePasswordCredentials.<init>(UsernamePasswordCredentials.java:83)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.openConnectionInternal(AbstractHttpClientWagon.java:380)
    at org.apache.maven.wagon.AbstractWagon.openConnection(AbstractWagon.java:116)
    at org.apache.maven.wagon.AbstractWagon.connect(AbstractWagon.java:218)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.connectWagon(WagonRepositoryConnector.java:345)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.pollWagon(WagonRepositoryConnector.java:385)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:571)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Exception in thread "pool-16-thread-2" java.lang.VerifyError: (class: org/apache/maven/wagon/providers/http/httpclient/auth/BasicUserPrincipal, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.apache.maven.wagon.providers.http.httpclient.auth.UsernamePasswordCredentials.<init>(UsernamePasswordCredentials.java:83)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.openConnectionInternal(AbstractHttpClientWagon.java:380)
    at org.apache.maven.wagon.AbstractWagon.openConnection(AbstractWagon.java:116)
    at org.apache.maven.wagon.AbstractWagon.connect(AbstractWagon.java:218)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.connectWagon(WagonRepositoryConnector.java:345)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.pollWagon(WagonRepositoryConnector.java:385)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:571)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Downloaded: http://repo.cloudbees.com/content/groups/public/org/apache/maven/plugins/maven-deploy-plugin/maven-metadata.xml (614 B at 4.2 KB/sec)
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:483)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask.run(FutureTask.java:262)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.VerifyError: (class: org/apache/maven/wagon/providers/http/httpclient/auth/BasicUserPrincipal, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.apache.maven.wagon.providers.http.httpclient.auth.UsernamePasswordCredentials.<init>(UsernamePasswordCredentials.java:83)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.openConnectionInternal(AbstractHttpClientWagon.java:380)
    at org.apache.maven.wagon.AbstractWagon.openConnection(AbstractWagon.java:116)
    at org.apache.maven.wagon.AbstractWagon.connect(AbstractWagon.java:218)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.connectWagon(WagonRepositoryConnector.java:345)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.pollWagon(WagonRepositoryConnector.java:385)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:571)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    ... 3 more
channel stopped
ERROR: Failed to parse POMs
hudson.util.IOException2: java.lang.reflect.InvocationTargetException
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:152)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask.run(FutureTask.java:262)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.Exception: java.lang.reflect.InvocationTargetException
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:161)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
    ... 9 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:483)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    ... 10 more
Caused by: java.lang.VerifyError: (class: org/apache/maven/wagon/providers/http/httpclient/auth/BasicUserPrincipal, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.apache.maven.wagon.providers.http.httpclient.auth.UsernamePasswordCredentials.<init>(UsernamePasswordCredentials.java:83)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.openConnectionInternal(AbstractHttpClientWagon.java:380)
    at org.apache.maven.wagon.AbstractWagon.openConnection(AbstractWagon.java:116)
    at org.apache.maven.wagon.AbstractWagon.connect(AbstractWagon.java:218)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.connectWagon(WagonRepositoryConnector.java:345)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.pollWagon(WagonRepositoryConnector.java:385)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:571)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:06:51.823

您的工作是否配置为使用 OpenJDK 8？在 JDK 8 上运行 Maven 构建时似乎会出现此堆栈跟踪。它仍在调查中。

# unix - 无法编译并出现错误“在 -lCGAL 中找不到主”，符号链接不是问题

> ID：15280427
> 
> 赞同：0
> 
> 时间：2013-03-07T19:50:14.990
> 
> 标签：unix, build, linker, shared-libraries

我正在尝试在我没有 root 访问权限的网络上构建一些软件（即 python 模块图形工具， [http ://projects.skewed.de/graph-tool/）。](http://projects.skewed.de/graph-tool/)因此，我使用 --prefix 和 --with-include 标志以及 CPPFLAGS 和 LD_LIBRARY_PATH 环境变量自己在本地磁盘上安装了所有依赖项。

完成此操作后，我收到一个奇怪的错误，即找不到我的依赖项之一（即 CGAL：[http](http://www.cgal.org/) ://www.cgal.org/ ）。

配置脚本说`checking for main in -lCGAL... no`，在打印大量编译器警告后，makefile 失败了`/usr/bin/ld: cannot find -lCGAL`

据推测，这意味着它根本无法找到已安装的库。几乎所有其他发生这种情况的情况，谷歌显示他们没有正确设置库的符号链接。它似乎在这里正确设置：

```
truffles:rlaplant[147] echo $LD_LIBRARY_PATH
/local_mount/space/truffles/1/users/rlaplant/graphtool/parts/lib:/local_mount/space/truffles/1/users/rlaplant/graphtool/parts/
truffles:rlaplant[160] file parts/lib/libCGAL.so
parts/lib/libCGAL.so: symbolic link to `libCGAL.so.10' 
```

我真的不知道出了什么问题。也许我使用 LD_LIBRARY_PATH 的方式有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:15:12.037

我想我知道我的问题是什么了。

尽管 libCGAL.so 是一个动态链接库，但编译脚本实际上所做的是将其视为静态库。我不知道它能够做到这一点，我认为如果它是一个静态链接库，它也不能动态链接，反之亦然（我认为这在实践中通常是正确的）。

我在这里所做的是设置 LIBRARY_PATH 来查找静态库，而不是 LD_LIBRARY_PATH 在运行/链接时查找动态链接库。我相信，如果配置脚本被更好地编写以考虑到我在这里尝试使用有趣的前缀做的事情，那么这种区别将没有实际意义，因为这样它就可以只使用 -L 标志并且就我而言可以看出这对静态和动态链接都有效，但 LD_LIBRARY_PATH 环境变量不能（但这可能不是真的）。

# c++ - 带有 winsock 的简单 C++ 服务器-客户端应用程序

> ID：15280433
> 
> 赞同：0
> 
> 时间：2013-03-07T19:50:28.110
> 
> 标签：c++, sockets, client-server, winsock

我正在尝试编写一个简单的服务器-客户端应用程序，它应该做的是：客户端连接到服务器，服务器等待消息，客户端从用户那里获取输入，并将其发送到服务器。服务器收到此消息，并将其发送回客户端，客户端打印消息并循环并重新开始。但是，由于某种原因，我遇到了一个相当奇怪的问题：当我发送第一条消息时，服务器会响应它，当我发送第二条消息时，服务器会再次响应第一条消息。当我发送第三条消息时，服务器会响应第二条消息，依此类推。

这是我处理连接的服务器代码：

```
class themusers {
    char ReMessage[200],SeMessage[200];

public:
    void * HandleConnections(SOCKET connector,int location) {

    std::string Converter;

        for (;;) {

        if (recv(connector,ReMessage,sizeof(ReMessage),NULL) == -1)
            std::cout << "Disconnected." << std::endl;
            discon.lock();
            sock_connection[location] = NULL;
            discon.unlock();
            break;
        }

        else {
                   //this is the code that handles the receive/send operation
            msgmut.lock();
            //std:: cout << ReMessage << std::endl;
            memcpy(SeMessage, ReMessage, sizeof(ReMessage));
            send(connector, SeMessage, sizeof(SeMessage), NULL);
            msgmut.unlock();        
        }

        }

        return NULL;
        }
}; 
```

这是我的客户代码：

```
for (;;) {
    cin >> tell;
    send(sock, tell, sizeof(tell), NULL);
    recv(sock,Message,sizeof(Message),NULL);
    Converter = Message;
    cout << "Server: " << Converter << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:04:23.027

[TCP] 套接字编程的经验法则 -**计算你的字节数**。这意味着实际上要注意从`send(2)`and返回的值`recv(2)`。它们分别告诉您从网络发送和填充了多少缓冲区。

UDP 的情况有点不同，但这在这里可能并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:21:23.357

Boost ASIO 是一个非常好的 C++ 库，用于实现同步和异步操作的网络和套接字 i/o 使用。

你可以在这里找到它：

[http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html)

他们还提供了一些示例，这些示例说明了为聊天服务器实现库以及其他用途：

[http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)

如果您有兴趣学习如何构建异步操作，您应该研究前摄器设计模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:22:13.710

我同意尼古拉的观点。记录返回的字节数很重要。此外，将默认 else 子句更改为以 recv() 的返回值为条件。

您的编译器是否将 NULL 定义为零？将 recv 函数中的 arg 也更改为零可能会更安全。

您也可以考虑在复制到发送缓冲区后修改/归零您的接收缓冲区。（出于可追溯性目的）

# perl - 如何使用 LWP::UserAgent 测试 HTTP 标头值

> ID：15280434
> 
> 赞同：1
> 
> 时间：2013-03-07T19:50:40.537
> 
> 标签：perl, httpresponse, lwp-useragent

当我得到答案时，我可能会发布更多问题，但这里有！

我目前正在尝试对我的大学用来自动下载包含 SAT 分数数据的文件的 Perl 脚本进行故障排除。

这个想法是阅读某个帐户中的电子邮件；拉出循环编号（在 URL 中使用）；拼凑多个网址；然后用于[`LWP::UserAgent`](https://metacpan.org/module/LWP%3a%3aUserAgent)从服务器上抓取文件并对它们执行其他 Perl 魔术。

在我的调查中，我确定手动输入 URL（从而限制用户运行的脚本，每次都替换循环号）确实有效。

在检查发回的响应对象时，我注意到（首先）失败的请求中缺少以下行：

```
'_uri_canonical' => $VAR1->{'_request'}{'_uri'} 
```

但是它存在于成功的请求中。

如果你们中的任何人能告诉我为什么在不成功的请求中缺少这条线，你们会感谢我的，但这不是我要问的。

我的问题与进一步调查有关，以了解它被拒绝的原因。

在文档中`LWP::UserAgent`我注意到了这一点：

> LWP 内部生成的错误响应会将“Client-Warning”标头设置为值“Internal response”。如果您需要将这些内部响应与远程服务器实际生成的响应区分开来，则需要测试此标头值。

**我的问题：**您如何实际测试该标头值？（请原谅任何无知；我是大学 IT 部门的实习生）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:56:53.947

它实际上在该标头中放置了各种消息，您可以通过以下方式获取这些消息：

```
if (my $cw = $response->header('Client-Warning')) {
   die("Internal error: $cw\n");
} 
```

该`Internal response`消息仅在状态已指示错误时使用。其他消息，例如`Redirect loop detected`和`Missing Authenticate header`在其他时间使用。上面的代码将获取那里存在的任何消息，而不仅仅是检查`Internal response`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:47:31.690

标准的使用方式`LWP`是这样的

```
use strict;
use warnings;

use LWP;

my $ua = LWP::UserAgent->new;

my $resp = $ua->get('http://my.domain.co.uk/');

die $resp->status_line unless $resp->is_success;

my $content = $resp->decoded_content; 
```

你需要了解什么？

# java - java低值输出0

> ID：15280441
> 
> 赞同：0
> 
> 时间：2013-03-07T19:51:06.520
> 
> 标签：java

我是一个完整的 Java 新手，我的代码中出现了一个非常奇怪的问题。目标是在一个数组中创建一个包含 20 个随机数的列表，显示这个数组并根据数组中的数据执行一系列计算。这必须通过 6 种方法来完成。除了最后一种方法外，一切似乎都运行良好。它旨在获取数组中的最小数字，但由于某种原因，它只输出一个 0。奇怪的是，对于上面的方法来说它工作得非常好，它收集了数组中的最高数字。

我试图对其进行故障排除，看看它是否可能来自具有空值的数组，但这不太可能，因为最高方法似乎工作正常。最低列表靠近底部。

感谢您的帮助，非常感谢这位新手。另外，如果您有任何其他很棒的评论，我愿意接受批评！

```
import java.util.Random;

public class Program7 {

    public static void main(String[] args) {

        final int listSize = 20;    // List size
        double total = 0;           // Total
        int[] ranList = new int[listSize];  // Array with random numbers
        int highest = ranList[0];   // Highest variable
        int lowest = ranList[0];    // Lowest Variable

        randomNumberList(ranList);          // Calls randomNumberList method
        displayList(ranList);               // Calls displayList method
        total = totalList(total, ranList);  // Calls totalList method
        double averageList = listAverage(total, ranList);   // Calls averageList method
        highest = listHighest(ranList, highest);    // Calls listHighest method
        lowest = lowestList(ranList, lowest);   // Calls lowestList method

        // On screen output
        System.out.println("\nHere's the total: " + total);
        System.out.println("Here's the average: " + averageList);
        System.out.println("Here's the highest number in the list: " + highest);
        System.out.println("Here's the lowest number in the list: " + lowest);

    }

    /**
     * Generates a random list
     *
     * @param ranList
     */
    public static void randomNumberList(int[] ranList) {
        for (int i = 0; i < ranList.length; i++) {
            Random generator = new Random();
            int ranNum = generator.nextInt(100) + 1;
            ranList[i] = ranNum;
        }
    }

    /**
     * Displays list
     *
     * @param ranList
     */
    public static void displayList(int[] ranList) {
        System.out.println("Here is your random list: ");
        for (int i = 0; i < ranList.length; i++) {
            System.out.print(ranList[i] + " ");
        }
    }

    /**
     * Adds elements in list
     *
     * @param total
     * @param ranList
     * @return returns total of list added together
     */
    public static double totalList(double total, int[] ranList) {
        for (int i = 0; i < ranList.length; i++) {
            total += ranList[i];
        }
        return total;
    }

    /**
     * Finds average by dividing the total with the ranList.length
     *
     * @param total
     * @param ranList
     * @return result of the averaging
     */
    public static double listAverage(double total, int[] ranList) {
        double averageList = total / ranList.length;
        return averageList;
    }

    /**
     * Steps through array via loop and finds highest value
     *
     * @param ranList
     * @param highest
     * @return the highest value
     */
    public static int listHighest(int[] ranList, int highest) {
        for (int i = 0; i < ranList.length; i++) {
            if (ranList[i] > highest) {
                highest = ranList[i];
            }
        }
        return highest;
    }

    /**
     * Steps through array via loop and finds lowest value
     *
     * @param ranList
     * @param lowest
     * @return the lowest value
     */
    public static int lowestList(int[] ranList, int lowest) {
        for (int i = 0; i < ranList.length; i++) {
            if (ranList[i] < lowest) {
                lowest = ranList[i];
            }
        }
        return lowest;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:55:33.750

在将其传递给方法之前，您将其设置为 0 。

```
int[] ranList = new int[listSize];  // Array with random numbers (not yet, right now this is an array of all 0)
int highest = ranList[0];   // Highest variable (not really, this is 0)
int lowest = ranList[0];    // Since you didn't put anything in ranList, lowest is now 0 
```

对于您的最高功能，这很好用，因为您的随机数始终高于 0。

真的，这里的根本原因是您根本不应该将任何东西传递给这些方法，因为它们没有做任何事情。

```
public static int lowestList(int[] ranList) {
    int lowest = Integer.MAX_VALUE;
    for (int i = 0; i < ranList.length; i++){
        if (ranList[i] < lowest){
            lowest = ranList[i];
        }
    }
    return lowest;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:57:47.573

试着放

```
lowest = ranList[0]; 
```

在你生成你的列表之后，即在你打电话之后

```
randomNumberList(ranList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:54:14.283

您应该在创建随机数组后初始化最高和最低。他们都是从0开始的。

# html - 如何将 QSyntaxHighlighter 中的突出显示文本转换为 html 字符串？

> ID：15280452
> 
> 赞同：4
> 
> 时间：2013-03-07T19:51:47.110
> 
> 标签：html, qt, syntax-highlighting

我正在使用 a`QSyntaxHighlighter`突出显示 a 中的一段文本`QTextEdit`。文本看起来像我希望在`QTextEdit`显示屏上显示的那样，并带有适当的突出显示。如果我随后调用`QTextEdit::toHtml()`，则返回的字符串不包括我在`QTextEdit`. 有没有办法将实际突出显示的文本作为 html 字符串输出？

这是一些示例代码：

```
ScriptSyntaxHighlighter* scriptSyntaxHighlighter; //Implements QSyntaxHighlighter
QTextEdit* scriptTextEdit;
scriptTextEdit = new QTextEdit("//Here is a comment");
scriptSyntaxHighlighter = new ScriptSyntaxHighlighter(scriptTextEdit.document());
QString formattedText = scriptTextEdit.toHtml(); 
```

当我运行上面的代码时，显示的 QTextEdit 显示了一个漂亮的彩色注释。但是， html 格式的`formattedText`字符串不包含任何着色标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:40:57.460

好吧，经过一些实验后，我将 Qt Creator 的一些代码操纵成有用的东西，您可以在 QSyntaxHighlighter 派生类中直接使用。如果您不想在文档中使用任何其他默认前景色和背景色，请跳过带有 tempCursor.setCharFormat() 和 blockFormat.setBackground() 的部分。这工作得很好，所以试试看。

```
void MyHighlighter::asHtml(QString& html)
{
    // Create a new document from all the selected text document.
    QTextCursor cursor(document());
    cursor.select(QTextCursor::Document);
    QTextDocument* tempDocument(new QTextDocument);
    Q_ASSERT(tempDocument);
    QTextCursor tempCursor(tempDocument);

    tempCursor.insertFragment(cursor.selection());
    tempCursor.select(QTextCursor::Document);
    // Set the default foreground for the inserted characters.
    QTextCharFormat textfmt = tempCursor.charFormat();
    textfmt.setForeground(Qt::gray);
    tempCursor.setCharFormat(textfmt);

    // Apply the additional formats set by the syntax highlighter
    QTextBlock start = document()->findBlock(cursor.selectionStart());
    QTextBlock end = document()->findBlock(cursor.selectionEnd());
    end = end.next();
    const int selectionStart = cursor.selectionStart();
    const int endOfDocument = tempDocument->characterCount() - 1;
    for(QTextBlock current = start; current.isValid() and current not_eq end; current = current.next()) {
        const QTextLayout* layout(current.layout());

        foreach(const QTextLayout::FormatRange &range, layout->additionalFormats()) {
            const int start = current.position() + range.start - selectionStart;
            const int end = start + range.length;
            if(end <= 0 or start >= endOfDocument)
                continue;
            tempCursor.setPosition(qMax(start, 0));
            tempCursor.setPosition(qMin(end, endOfDocument), QTextCursor::KeepAnchor);
            tempCursor.setCharFormat(range.format);
        }
    }

    // Reset the user states since they are not interesting
    for(QTextBlock block = tempDocument->begin(); block.isValid(); block = block.next())
        block.setUserState(-1);

    // Make sure the text appears pre-formatted, and set the background we want.
    tempCursor.select(QTextCursor::Document);
    QTextBlockFormat blockFormat = tempCursor.blockFormat();
    blockFormat.setNonBreakableLines(true);
    blockFormat.setBackground(Qt::black);
    tempCursor.setBlockFormat(blockFormat);

    // Finally retreive the syntax higlighted and formatted html.
    html = tempCursor.selection().toHtml();
    delete tempDocument;
} // asHtml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:06:15.650

~~您可能需要指定要使用的编码...~~

[http://qt-project.org/doc/qt-4.8/qtextdocument.html#toHtml](http://qt-project.org/doc/qt-4.8/qtextdocument.html#toHtml)

~~[http://qt-project.org/doc/qt-4.8/richtext-html-subset.html](http://qt-project.org/doc/qt-4.8/richtext-html-subset.html)~~

Qt Creator 以某种方式做到了（当您从 c++ 编辑器复制文本并将其复制到其他富文本编辑器中时，它会突出显示）...

cpp编辑器的源码在这里：

[http://qt.gitorious.org/qt-creator/qt-creator/trees/master/src/plugins/cpeditor](http://qt.gitorious.org/qt-creator/qt-creator/trees/master/src/plugins/cppeditor)

我还没有在他们的源代码中找到 Qt Creator 在哪里做的......

您可以执行类似操作的一种方法是在其中创建自己的 html 标记`QSyntaxHighligher::highlightBlock()`并将它们插入到文本的副本中并单独存储。

[http://qt-project.org/doc/qt-4.8/qsyntaxhighlighter.html#highlightBlock](http://qt-project.org/doc/qt-4.8/qsyntaxhighlighter.html#highlightBlock)

然后，当您需要将其导出时，在您的 subclassed`QSyntaxHighlighter`中，您可以访问您生成的存储的 html 文本。

希望有帮助。

# javascript - 全部展开和全部折叠并非在所有情况下都有效

> ID：15280454
> 
> 赞同：0
> 
> 时间：2013-03-07T19:51:49.733
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我的全部展开/全部折叠功能有一点问题。

这是我的 jsfiddel 链接：

[http://jsfiddle.net/HqXMN/10/](http://jsfiddle.net/HqXMN/10/)

假设展开 Name1 和 Name2，然后点击展开全部按钮，它所做的是展开所有内容，但折叠 Name1 和 Name2。

我是否在我的 javascrit 函数中指定 css id？

```
$(function () {
    $(document).on('click', '.expandcollapse', function(e) {
        $('.collapse').each(function(index) {
            $(this).collapse("toggle");
        });

        if ($(this).html() == "<i class=\"icon-white icon-plus-sign\"></i> Expand All") {
            $(this).html("<i class=\"icon-white icon-minus-sign\"></i> Collapse All");
        }
        else {
            $(this).html("<i class=\"icon-white icon-plus-sign\"></i> Expand All");
        } 
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:37:39.730

您需要根据按钮的当前状态执行特定操作。一种方法是在按钮处于给定状态时为其分配特定类。

**注意：**似乎由于存在组管理，当您使用展开/折叠所有按钮和单个控件的组合时，状态似乎变得混乱。

```
$(document).on('click', '.expandcollapse', function (e) {
    // Perform specific action based on current state
    if ($(this).hasClass('collapseAll')) {
        $('.collapse').collapse('hide');
        $(this).removeClass('collapseAll').html("<i class=\"icon-white icon-plus-sign\"></i> Expand All");
    } else {
        $('.collapse').collapse('show');
        $(this).addClass('collapseAll').html("<i class=\"icon-white icon-minus-sign\"></i> Collapse All");
    }
}); 
```

**[演示](http://jsfiddle.net/gnPcz/1/)**

要关闭组管理并查看其在该场景中如何正常工作，您可以通过删除`data-parent='#programs-accordion'`所有项目或将以下内容放在 Javascript 顶部来执行此操作：

```
$('.collapse').collapse({
    toggle: false
}); 
```

**[DEMO](http://jsfiddle.net/gnPcz/2/)** - 没有群组管理

# string - 使用 Powershell 根据操作员输入来授予用户文件夹权限

> ID：15280455
> 
> 赞同：0
> 
> 时间：2013-03-07T19:51:49.827
> 
> 标签：string, powershell, input, acl, file-permissions

我是 Powershell 的新手，需要一些指导。我需要创建一个脚本，使操作员能够根据操作员的（字符串）输入创建远程用户文件夹。然后脚本将获取该输入，创建文件夹，命名，然后根据输入对其进行许可。到目前为止，我的“创建”部分正在使用这个：

```
'Variables

$directory = Read-Host "Enter Path"

$username = Read-Host "Enter Username"

'Create and name directory

new-item -Path $directory -name $username -ItemType directory 
```

使用上面的脚本，操作员会被询问文件夹应该在哪里创建，以及文件夹名称应该是什么。在我们的例子中，文件夹名称与用户名（AD 帐户名）相同。正如我所说，这是有效的。该文件夹已创建，并且正在继承权限。我现在需要找到一种方法来根据操作员输入的用户名称（AD 帐户）来授予该文件夹的权限，并赋予该用户对父/子文件夹的完全控制权，同时保持继承。

我假设脚本需要根据 AD 检查 NAME，以便它可以确保 NAME 是有效的 AD 帐户..？正如我所说，我是 Powershell 的新手。:)

这甚至可能吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:23:49.290

看起来像你需要[的 PowerShell - 编辑文件或文件夹的权限](http://blogs.msdn.com/b/johan/archive/2008/10/01/powershell-editing-permissions-on-a-file-or-folder.aspx)

尝试阅读`get-help Get-Acl -full`和`Set-Acl`命令行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T01:06:46.100

您“不需要”检查 AD，但这是个好主意。

我个人更喜欢 QAD cmdlet。您可以在下载 PowerGUI 时获得它们，尽管 Powergui 不是必需的。

要设置用户，您可以简单地执行以下操作：

```
$User = Read-Host -input "enter user to grant access"
if(get-qaduser $user) {set-Acl $Path $ACLs}
else{write-host "Cannot find user"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:55:48.780

PowerShell ACL 有点过于复杂。我建议使用 icacls 命令来设置 acl：

```
PS C:\> icacls /? 
```

至于根据 AD 检查用户，您需要查询 AD。这种方式很麻烦，但您不需要安装任何东西“ [http://technet.microsoft.com/en-us/library/ff730967.aspx](http://technet.microsoft.com/en-us/library/ff730967.aspx) ”

这种方式很简单，但您需要安装远程管理工具 PowerShell AD 模块。

```
(Get-ADuser -Filter {Name -eq $username}).count -ne 0 
```

# php - 在 drupal-6 中搜索其中一个的字段值数组

> ID：15280461
> 
> 赞同：0
> 
> 时间：2013-03-07T19:52:22.897
> 
> 标签：php, arrays, drupal-6, field, nodereference

所以，我有一个节点引用字段，它可以有多个值，我正在尝试编写一个 php 代码，它将检查该字段的所有值是否有我想要的某个值，如果找到它就打印一个文本。我想在视图 php 字段中执行此操作，这是我到目前为止提出的代码：

```
<?php
$node = node_load($data->nid);
print $data->nid . '<br>';
if(in_array('Yog [nid:1315]', $node->field_ref_oznajomenieni)) {
print 'yoog';
}
else {
print 'niemanic';
}
?> 
```

我在 PHP 方面有些糟糕，但是：`node_load()`工作正常，并`$data->nid`为我的视图的每一行返回节点 ID。这证实了`print $data->nid . '|';`

现在，if 函数应该做我想做的事，在节点引用字段中搜索值的数组并打印一些东西。我不确定我是否应该搜索引用节点的 nid、它的标题或我如何将它放入代码中，无论我尝试什么，我都会`print 'niemanic';`得到`else{}`

请问我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:05:03.057

明确一点：代码是在节点引用字段中搜索一个值，并仅在找到时打印一些内容。

单程：

```
// less RAM usage
$node = node_load($data->nid);
$napis = '';
foreach ($node->field_ref_oznajomenieni as $value) {
if ($value[nid] == '1315') {
$napis = 'Yog';
}
// if (!($napis)) $napis = 'niemanic'; // for testing purpose
}
print $napis; 
```

另一种方式：（未经测试，可能缺少一些括号）

```
// flattened matrix way
$plaskatablica = array();
foreach ($node->field_ref_oznajomenieni as $value) {
$plaskatablica[] = $value[nid];

if(in_array('1315', $plaskatablica)) {
print 'Yog';
}
} 
```

这是我自己想到的：

```
$node = node_load($data->nid);
$ii = 0;
foreach ($node->field_ref_oznajomenieni as $value) {
if(in_array('1315', array_values($node->field_ref_oznajomenieni[$ii]))) {
print 'Yog';
}
++$ii;
} 
```

这是`print_r($node->field_ref_oznajomenieni);`示例字段的输出：

```
Array ( 
[0] => Array ( [nid] => 1320 ) 
[1] => Array ( [nid] => 1315 ) 
[2] => Array ( [nid] => 1518 ) 
[3] => Array ( [nid] => 1519 ) 
[4] => Array ( [nid] => 1525 ) 
) 
```

# javascript - AngularJS DOM 选择器

> ID：15280463
> 
> 赞同：35
> 
> 时间：2013-03-07T19:52:34.647
> 
> 标签：javascript, jquery-selectors, angularjs, angularjs-directive

我有一些使用 jQuery 实现动画效果的自定义指令（angular 的内置 ngShow/ngHide 等功能实用，但不美观）。我想我记得在某个地方的文档中读到 angular 有它自己的 DOM 选择器（类似于`angular.export()`or `angular.select()`），我应该使用它而不是`$(SELECTOR)`; 但是我现在找不到它。

我正在做这样的事情：

```
//view
<div scroll-to="element"> //`element` is set via ng-click
  …
</div>

//directive
link: function(scope, elm, attrs)
{

  scope.$watch(attrs.scrollTo, function scrollToAction(newValue,oldValue)
  {
    if ( newValue !== oldValue )
    {
      elm.animate({
        scrollTop:
          $('#'+newValue).offset().top //replace jquery selector with angular's
          - elm.offset().top
          + elm.scrollTop()
      });
    }
  });

} 
```

我并不是真的在操纵`$('#'+newValue)`，只是检索有关它的信息，所以我不认为我对 Angular 犯了罪。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-07T20:12:14.010

正如[AngularJs 官方文档所说](https://docs.angularjs.org/api/ng/function/angular.element)

> **Angular**中的所有元素引用*总是*用**jQuery**或**jqLit​​e 包装**（例如指令的编译/链接函数中的元素参数）。它们绝不是原始的 DOM 引用。

详细说明：如果您在Angular 引用*之前包含***jQuery** ，则该函数将成为 jQuery 的别名（否则，请参阅 Mark Rajcok 的答案）。*`angular.element()``jqLite`*

 ** * *

如果要获取 jQuery 或 jqLit​​e，可以通过在调用的行放置断点来检查开发工具调试器`angular.element()`。悬停它时，系统会提示您输入相关库，请参见下面的屏幕截图（在我的情况下，我得到 jQuery）。

[![<code>angular.element()</code> 的 jQuery](../Images/cdf95e4cc1248e555bdfaf705ac29aa8.png)](https://i.stack.imgur.com/mHdZt.png)

* * *

正如[AngularJs 官方文档所说](https://docs.angularjs.org/api/ng/function/angular.element)

> 对于按标签名称查找，请尝试改为`angular.element(document).find(...)`或`$document.find()`

换句话说：如果你在调用 jQuery 时得到了 jQuery，那么如果你正在考虑的话`angular.element()`，任何类似的东西都可以工作。`angular.element('#foo > bar')`

* * *

如果您想知道如何在没有 jQuery 的情况下获得此选择器功能，那么您可能想要使用[Sizzlejs](https://github.com/jquery/sizzle)。[Sizzle 是 jQuery 在后台使用的选择器库](https://stackoverflow.com/questions/15785978/what-are-the-advantages-of-using-the-sizzle-javascript-library)。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-07T20:02:11.537

“jqLit​​e”（在[angular.element](http://docs.angularjs.org/api/angular.element)页面上定义）提供了 DOM 遍历方法，例如`children()`, `parent()`, `contents()`, `find()`, `next()`（但不是`previous()`）。没有类似选择器的方法。

您可能想尝试 JavaScript 的[querySelector](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelector)。*

# javascript - 在后台加载xml文件

> ID：15280465
> 
> 赞同：0
> 
> 时间：2013-03-07T19:52:40.573
> 
> 标签：javascript, ajax

我有一个页面，可以将包含数千个邮政编码的 XML 文件加载到内存中。加载 xml 后，会显示一个文本框和搜索按钮，用户可以输入邮政编码（邮政编码）并单击搜索，然后会显示一些结果。问题是，初始加载需要一段时间，并且在文本框和搜索按钮出现之前，页面会显示“正在加载...”10-15 秒。我需要让搜索框/按钮更快/立即出现，即使这意味着需要额外的搜索时间。我承认，我更像是一个 .net 人，并且不太了解 javascript/ajax。这是加载 xml 的函数。任何人都可以帮忙吗？

```
function importXML() {

    var xmlhttp;
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else { // code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {

            var i,j;
            var xmlDoc=xmlhttp.responseXML;

            for (i=0; i<arrServiceProviders.length;i++) {
                var regionList = xmlDoc.getElementsByTagName("region");
                var postalCodeList = regionList[i].getElementsByTagName("postalcode");

                for (j=0;j<postalCodeList.length;j++) {

                    arrServiceProviders[i][j]=postalCodeList[j].childNodes[0].nodeValue;
                }
            // debug time:
            //alert(arrServiceProviders[i]);
            }
            var searchForm = document.getElementById("search-wrapper");
            var loadingPlaceholder = document.getElementById("loading");
            loadingPlaceholder.className = "hidden";
            searchForm.className = "";
        }
    };

    xmlhttp.open("GET","/agency-postal-codes.xml",true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:19:21.363

您可以使用信号量标志在加载时跟踪请求并立即显示表单，然后通过连续轮询信号量的状态来停止执行搜索，直到 ajax 请求返回。不是很优雅，但应该做它的工作。

例如：

```
var  loaded = false;

function importXML() {

    var xmlhttp;
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else { // code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {

            var i,j;
            var xmlDoc=xmlhttp.responseXML;

            for (i=0; i<arrServiceProviders.length;i++) {
                var regionList = xmlDoc.getElementsByTagName("region");
                var postalCodeList = regionList[i].getElementsByTagName("postalcode");

                for (j=0;j<postalCodeList.length;j++) {

                    arrServiceProviders[i][j]=postalCodeList[j].childNodes[0].nodeValue;
                }
            // debug time:
            //alert(arrServiceProviders[i]);
            }
            loaded = true;
        }
    };

    xmlhttp.open("GET","/agency-postal-codes.xml",true);
    xmlhttp.send();
}

function doSearch() {
    console.log("about to search");
    var val = document.getElementById("txt").value;
    var res = document.getElementById("result");

    res.style.display = "block";
    if (loaded) {
        // search logic goes here
        res.innerHTML = "found";
    } else {
        res.innerHTML = "Still loading...";
        setTimeout(doSearch, 1000);
    }

} 
```

# javascript - 以编程方式从变量设置 AngularJS 过滤器（例如日期或货币）

> ID：15280467
> 
> 赞同：2
> 
> 时间：2013-03-07T19:52:48.703
> 
> 标签：javascript, angularjs

在 Angular 中，您可以使用过滤器轻松格式化变量，例如：

```
{{ myDate | date }}
{{ myMoney | currency }} 
```

有没有办法以编程方式设置过滤器的类型，使其看起来像这样？

```
// controller 
$scope.myFilter = 'date';

// view
{{ myVar | myFilter }} 
```

上下文：我正在从我的服务器返回表格数据以及一些元信息。我想显示日期、金钱或数字等内容，而无需手动编码列。

这是这个问题的一个非常简单且无功能的 Plunker 的链接：http: [//plnkr.co/edit/SjYLKKUZcTjzRFhbsjK0](http://plnkr.co/edit/SjYLKKUZcTjzRFhbsjK0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:59:12.937

您可以将过滤器包装成“表格单元过滤器”或类似的，并打开过滤器参数 - 可以通过编程方式控制。

这是一个简单的例子：

[http://plnkr.co/edit/1DGOC1gFZiFyGAQRCIhk?p=preview](http://plnkr.co/edit/1DGOC1gFZiFyGAQRCIhk?p=preview)

**在您的模板中：**

```
 <ul>
    <li ng-repeat="value in values">{{value | myfilter:myFilterType }}</li>
  </ul> 
```

**过滤器：**

```
app.filter('myfilter', function() {
    return function(input, type) {
    switch(type) {
        case 'uppercase':
          return input.toUpperCase();
        case 'lowercase':
          return input.toLowerCase();
        case 'date':
          return input.toString('dddd, MMMM ,yyyy');
        }  
    };
}); 
```

请注意，如果需要，您可以加载其他过滤器并将它们应用于该过滤器中的输入，以便您的代码干净且干燥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:19:45.957

您可以以编程方式应用过滤器，但我认为不可能这样做。如果您可以在控制器内定义过滤值，那么您可以这样做：

JS：

```
var app = angular.module('angularjs-starter', []);

app.controller('MainCtrl', function($scope, $filter) {

  $scope.values = [new Date(-1), new Date()];

  $scope.myFilter = 'date';

  $scope.$watch('values', function(values){
    $scope.filteredValues = [];
    if(!angular.isArray(values)){
      return;
    }
    angular.forEach(values, function(value){
      $scope.filteredValues.push($filter($scope.myFilter)(value));
    });
  });

}); 
```

HTML：

```
<div ng-controller="MainCtrl">
  <ul>
    <li ng-repeat="value in filteredValues">{{value}}</li>
  </ul>
</div> 
```

[笨蛋](http://plnkr.co/edit/hXOeZvHjpHOulIhD7s2Y?p=preview)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:11:21.063

一个更简单的替代方法是在显示值时调用一个函数。这样您就可以重用 $filter 服务并添加您自己的逻辑。见[plunker](http://plnkr.co/edit/tPo7GXuHNKL5XX5eeNC6?p=preview)。

```
app.controller('MainCtrl', function($scope, $filter) {
  $scope.values = ['Test #1', 'Test #2'];

  $scope.myFilter = 'uppercase';
  $scope.myFilterFn = function(value) {
    console.log(value);
    var filter = $filter($scope.myFilter);
    console.log(filter);
    return filter(value);
  };
}); 
```

模板：

```
<body ng-controller="MainCtrl">
  <p>{{myFilter}}</p>
  <button ng-click="myFilter = 'uppercase';">Uppercase</button>
  <button ng-click="myFilter = 'lowercase';">Lowercase</button>
  <p>
    <ul>
      <li ng-repeat="value in values">{{myFilterFn(value)}}</li>
    </ul>
  </p>
</body> 
```

# ios - iOS 应用编译为静态库

> ID：15280470
> 
> 赞同：1
> 
> 时间：2013-03-07T19:53:01.560
> 
> 标签：ios, objective-c, static-libraries

我即将为几个客户定制一个项目。该项目使用 CocoaPods 和 Storyboard。由于我希望修复一些错误并在此过程中为每个客户端在 UI 中进行一些更改，我想像这样组织项目： 1\. 将启动的 iOS 应用程序转换为已编译的静态库（不知何故） 2\. 创建新的定制应用程序。将其链接到静态库。3\. 将原来的 Storyboard 复制到新定制的 App 中。

现在在“新”故事板中，我可以根据客户需求应用更改。Storyboard 中的每个 ViewController 都作为自定义类引用，在原始应用程序（现在是编译的静态库）中定义了一个类。这样，我总是可以替换或扩展原始类，并将新的类设置为情节提要中我的 ViewControllers 的自定义类。

这对我来说听起来不错。但我无法让它工作。1\. 我设法从原始 iOS 应用程序中创建了一个静态库，将次要目标作为静态库添加到项目中。在头文件搜索路径、标志和链接框架苦苦挣扎之后，我编译了它（有很多警告） 2\. 我创建了一个新项目并链接了静态库，但无法编译它。

我的问题是。1\. 我这样做对吗？2\. 如果我有一个带有相关头文件的静态库，并且我创建另一个使用前一个的静态库。如果我想将第二个创建的库用于新项目，我是否必须将它与库和头文件链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:06:29.890

1.  它理论上应该可以工作，尽管我个人会走创建静态框架而不是静态库的路线，因为框架应该更容易链接到，可以为不同的架构提供不同的版本，并且包含相同的标题包裹。查看此项目以向 Xcode 添加框架项目类型： [https](https://github.com/kstenerud/iOS-Universal-Framework) ://github.com/kstenerud/iOS-Universal-Framework 。（有人真的需要在 Apple 上默认包含 Framework 目标类型）

2.  如果我错了，有人可以纠正我，但据我了解：是的，您需要将两个库链接到最终的可执行文件中。针对库 1 编译库 2 不会将库 1 的代码合并到库 2 中。

我们需要获取有关编译错误的更具体信息，以帮助您将静态库链接到新项目中。

# r - 在 R 中，如何在单独的变量中为每个重复创建连续的 ID 号？

> ID：15280472
> 
> 赞同：1
> 
> 时间：2013-03-07T19:53:05.000
> 
> 标签：r, dataframe

我对 R 和一般编程非常陌生。我刚刚开始学习如何使用 for 循环，但我不知道如何获取我想要打印的变量作为我的数据框的一部分。

我有看起来像这样的数据：

```
Place  Sex  Length
A      M    32
A      M    33
A      F    35
A      F    35
A      F    35
A      F    39
B      M    30
B      F    25
B      F    28
B      F    28 
```

我想在我的数据框中创建第四个变量，它为每行数据提供一个特定于其`Place/Sex/Length`组合的唯一标识符，以便我的数据看起来像这样，因此每个人都有一个`Place/Sex/Length/ID`特定于该数据行的唯一组合：

```
Place  Sex  Length Ind
A      M    32     1
A      M    33     1
A      F    35     1
A      F    35     2
A      F    35     3
A      F    39     1
B      M    30     1
B      F    25     1
B      F    28     1
B      F    28     2 
```

提前感谢您的任何建议。我一直在寻找有关如何在没有运气的情况下执行此操作的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:57:22.797

一种（多种）方法是`ave`在基础 R 中使用，如下所示（假设`data.frame`命名为“temp”）

```
within(temp, {
  ID <- ave(as.character(interaction(temp)), 
            interaction(temp), FUN = seq_along)
})
#    Place Sex Length ID
# 1      A   M     32  1
# 2      A   M     33  1
# 3      A   F     35  1
# 4      A   F     35  2
# 5      A   F     35  3
# 6      A   F     39  1
# 7      B   M     30  1
# 8      B   F     25  1
# 9      B   F     28  1
# 10     B   F     28  2 
```

尝试跑步`interaction(temp)`以了解它在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:54:28.663

另一种方式：

```
# assuming the data.frame is already sorted by 
# all three columns (unfortunately, this is a requirement)
> sequence(rle(do.call(paste, df))$lengths)
# [1] 1 1 1 2 3 1 1 1 1 2 
```

分解：

```
do.call(paste, df) # pastes each row of df together with default separator "space"
#  [1] "A M 32" "A M 33" "A F 35" "A F 35" "A F 35" "A F 39" "B M 30" "B F 25" "B F 28"
# [10] "B F 28"

rle(.) # gets the run length vector 
# Run Length Encoding
#   lengths: int [1:7] 1 1 3 1 1 1 2
#   values : chr [1:7] "A M 32" "A M 33" "A F 35" "A F 39" "B M 30" "B F 25" "B F 28"

$lengths # get the run-lengths (as opposed to values)
# [1] 1 1 3 1 1 1 2

sequence(.) # get 1:n for each n 
# [1] 1 1 1 2 3 1 1 1 1 2 
```

* * *

# 基准测试：

由于有很多解决方案，我想我会在一个相对较大的`data.frame`. 所以，这是结果（我还添加了一个解决方案`data.table`）。

这是数据：

```
require(data.table)
require(plyr)
set.seed(45)

length <- 1e3 # number of rows in `df`
df <- data.frame(Place = sample(letters[1:20], length, replace=T), 
                 Sex = sample(c("M", "F"), length, replace=T), 
                 Length = sample(1:75, length, replace=T))
df <- df[with(df, order(Place, Sex, Length)), ] 
```

阿难的`ave`解决方法：

```
AVE_FUN <- function(x) {
    i <- interaction(x)
    within(x, {
        ID <- ave(as.character(i), i, FUN = seq_along)
    })
} 
```

阿伦的`rle`解决方案：

```
RLE_FUN <- function(x) {
    x <- transform(x, ID = sequence(rle(do.call(paste, df))$lengths))
} 
```

本的`plyr`解决方案：

```
PLYR_FUN <- function(x) {
    ddply(x, c("Place", "Sex", "Length"), transform, ID = seq_along(Length))
} 
```

最后，`data.table`解决方案：

```
DT_FUN <- function(x) {
    dt <- data.table(x)
    dt[, ID := seq_along(.I), by=names(dt)]
} 
```

基准代码：

```
require(rbenchmark)
benchmark(d1 <- AVE_FUN(df), 
          d2 <- RLE_FUN(df), 
          d3 <- PLYR_FUN(df), 
          d4 <- DT_FUN(df), 
 replications = 5, order = "elapsed") 
```

结果：

使用`length = 1e3`（data.frame df 中的行数）

```
#                 test replications elapsed relative user.self 
# 2  d2 <- RLE_FUN(df)            5   0.013    1.000     0.013 
# 4   d4 <- DT_FUN(df)            5   0.017    1.308     0.016 
# 1  d1 <- AVE_FUN(df)            5   0.052    4.000     0.052 
# 3 d3 <- PLYR_FUN(df)            5   4.629  356.077     4.452 
```

与`length = 1e4`：

```
#                test replications elapsed relative user.self
# 4   d4 <- DT_FUN(df)            5   0.033    1.000     0.031
# 2  d2 <- RLE_FUN(df)            5   0.089    2.697     0.088
# 1  d1 <- AVE_FUN(df)            5   0.102    3.091     0.100
# 3 d3 <- PLYR_FUN(df)            5  23.103  700.091    20.659 
```

与`length = 1e5`：

```
#                test replications elapsed relative user.self
# 4   d4 <- DT_FUN(df)            5   0.179    1.000     0.130
# 1  d1 <- AVE_FUN(df)            5   1.001    5.592     0.940
# 2  d2 <- RLE_FUN(df)            5   1.098    6.134     1.011
# 3 d3 <- PLYR_FUN(df)            5 219.861 1228.274   147.545 
```

观察：我注意到的趋势是，随着数据越来越大，`data.table`（不足为奇）表现最好（规模非常好），而`ave`与`rle`第二名的竞争者非常接近（`ave`规模好于`rle`）。`plyr`不幸的是，在所有数据集上的表现都很糟糕。

注意：Ananda 的解决方案给出了`character`输出，我将其保留在基准测试中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T21:00:05.503

不可避免的`plyr`解决方案。

获取数据：

```
temp <- read.table(text="
Place  Sex  Length
A      M    32
A      M    33
A      F    35
A      F    35
A      F    35
A      F    39
B      M    30
B      F    25
B      F    28
B      F    28",
header=TRUE) 
```

加载包并执行：

```
library("plyr")
ddply(temp,c("Place","Sex","Length"),transform,ID=seq_along(Length)) 
```

顺序已更改（您可以根据`arrange()`需要重新排序），但变量应该是正确的：

```
##        Place Sex Length ID
## 1      A   F     35  1
## 2      A   F     35  2
## 3      A   F     35  3
## 4      A   F     39  1
## 5      A   M     32  1
## 6      A   M     33  1
## 7      B   F     25  1
## 8      B   F     28  1
## 9      B   F     28  2
## 10     B   M     30  1 
```

# c# - 检索具有混合内容的完整 XElement 字符串

> ID：15280473
> 
> 赞同：7
> 
> 时间：2013-03-07T19:53:06.543
> 
> 标签：c#, xml, .net-3.5, linq-to-xml

假设我在一个`XElement`对象中有以下内容

```
<root>Hello<child>Wold</child></root> 
```

如果我使用`XElement.ToString()`，这给了我

```
"<root xmnls="someschemauri">Hello<child>World</child></root>" 
```

如果我使用 XElement.Value，我会得到

```
"Hello World" 
```

我需要得到

```
"Hello <child>World</child>" 
```

这样做的正确功能是什么（如果有的话）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:22:08.233

.NET 4 的解决方案

```
var result = String.Join("", rootElement.Nodes()).Trim(); 
```

* * *

完整代码（适用于 .NET 3.5）：

```
XElement rootElement = XElement.Parse("<root>Hello<child>Wold</child></root>");
var nodes = rootElement.Nodes().Select(n => n.ToString()).ToArray();
string result = String.Join("", nodes).Trim();
Console.WriteLine(result);
// writes "Hello<child>World</child>" 
```

* * *

无需加入所有节点的快速解决方案：

```
XElement rootElement = XElement.Parse("<root>Hello<child>Wold</child></root>");
var reader = rootElement.CreateReader();
reader.MoveToContent();
string result = reader.ReadInnerXml(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:58:26.837

这工作得很好：

```
//SOLUTION BY Nenad
var element = XElement.Parse("<root>Hello<child>World</child></root>");
string xml = string.Join("", element.DescendantNodes().Select(e => e.ToString()));
Debug.WriteLine(xml); 
```

最终输出：`Hello<child>Wold</child>World`

* * *

尝试#3

```
XDocument xDoc = XDocument.Parse(@"<root>Hello<child>World</child></root>");
XElement rootElement = xDoc.Root;
Debug.WriteLine(rootElement.Value + rootElement.FirstNode.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:33:43.503

这将做：

```
var element = XElement.Parse("<root>Hello<child>Wold</child></root>");
string xml = string.Join("", element.Nodes().Select(e => e.ToString())); 
```

对于 .NET 3.5（如果这是问题所在）：

```
var element = XElement.Parse("<root>Hello<child>Wold</child></root>");
string xml = string.Join("", element.Nodes().Select(e => e.ToString()).ToArray()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-18T20:32:51.973

**基于最快知道解决方案的**扩展方法：****

 **```
public static class XElementExtension
{
    public static string InnerXML(this XElement el) {
        var reader = el.CreateReader();
        reader.MoveToContent();
        return reader.ReadInnerXml();
    }
} 
```

然后简单地调用它：`xml.InnerXML();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T20:09:21.247

我没有时间对此进行测试，但请尝试：

```
var inners = from n in xelementVariableName.Nodes()
                       select n;
return String.Join(String,Empty, inners); 
```

* * *

测试：

```
public static string ReturnInnerXml()
{
    var doc = XDocument.Parse(@"<root>Hello<child>World</child></root>");
    var root = doc.Root;
    if (root == null)
    {
        throw new InvalidOperationException("No root");
    }

    var inners = from n in root.Nodes()
                 select n;
    return String.Join(String.Empty, inners);
} 
```

这会产生：

```
Hello<child>World</child> 
```

使用 .NET 4.0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T20:47:44.327

这里是：

```
var element = XElement.Parse("<root>Hello<child>Wold</child></root>");
string xml = string.Join("", element.Nodes().Select(e => e.ToString()).ToArray()); 
```

返回`Hello<child>Wold</child>`并在 .NET 3.5 上工作**

# android - Scribe-java 1.3.3 如何记住一个用户？

> ID：15280475
> 
> 赞同：1
> 
> 时间：2013-03-07T19:53:14.830
> 
> 标签：android, login, oauth-2.0, scribe

我在我的 android 应用程序中为 OAuth2 使用 scribe 1.3.3。

我已经获得了与谷歌正常工作的完整流程，我可以请求用户信息并且一切正常。

我很好奇如果用户关闭应用程序如何让用户保持登录状态。目前，每次启动应用程序时，我都会提示用户允许访问。

我如何做到这一点，以便他们只允许访问一次，从那时起我只记得用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:00:54.370

您不必记住用户。您所要做的就是记住您第一次获得的访问令牌。您可以将其存储在共享首选项中并使用它来签署新请求。

因此，您的活动第一次开始时，您必须检查令牌是否已存储。仅当令牌为空时才要求提供凭据。另请注意，您的令牌可能会过期，如果您收到 401 错误，则必须重新对用户进行身份验证。

PS：我将 scribe 包装在一个 android 库中以使其更易于与 android 一起使用：[https ://github.com/fedepaol/PostmanLib--Rings-Twice--Android](https://github.com/fedepaol/PostmanLib--Rings-Twice--Android)

# c# - C#“ref”没有做我认为应该做的事

> ID：15280477
> 
> 赞同：2
> 
> 时间：2013-03-07T19:53:17.093
> 
> 标签：c#, reference

我有一个与外部 .exe 对话的课程。该类有一堆类似的方法；他们调用 .exe 的函数，等待响应，然后返回 true 或 false。

响应以更改此类字段值的事件的形式出现。

简化代码：

```
class Manager
{
    private static bool connected = false;

    public static bool Connect()
    {
        runtime.Connect();

        int secondsWaited = 0;

        while (!connected)
        {
            Thread.Sleep(1000);

            if (secondsWaited++ == 10)
            {
                return false;
            }
        }
        return true;
    }
} 
```

其他方法使用相同的 call-wait-loop-return 结构。

我的目标是制作一个等待我的方法来执行此操作，如下所示：

```
private static bool WaitReferenceEqualsValue<T>(ref T reference, T value)
{
    int secondsWaited = 0;

    while (!reference.Equals(value))
    {
        Thread.Sleep(1000);

        if (secondsWaited++ == 10)
        {
            return false;
        }
    }
    return true;
} 
```

然后每种方法都会做：

```
runtime.DoSomething();

return WaitReferenceEqualsValue<someType>(ref someField, someSuccessfulValue); 
```

但是，当我用此方法调用替换等待循环时，“已连接”字段，即使作为引用传入，也始终保持不变。

知道这里发生了什么，以及如何获得所需的功能吗？

提前致谢。

编辑：

```
public static bool Connect()
{
    ...
    runtime.Connect();

    // this code works
    /*int secondsWaited = 0;

    while (connected != true)
    {
        Thread.Sleep(1000);

        if (secondsWaited++ == 10)
        {
            return false;
        }
    }*/

    // this somehow blocks OnConnect from firing, so connected never gets set to true
    lock (typeof(SkypeKitManager))
    {
        WaitReferenceEqualsValue<bool>(ref connected, true);
    }
    ...
} 
```

连接：

```
private static void OnConnect(object sender, Events.OnConnectArgs e)
{
    if (e != null && e.success)
    {
        lock (typeof(Manager))
        {
            connected = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:59:11.187

尽管您从多个线程访问它并且其中一个正在写入，但您没有对该字段进行任何同步。这是一场比赛（也不例外！这*是*一场比赛，即使看起来很安全。它并不安全。）。

可能是 JIT 注册了它，这是一种常见的优化。它永远不会从内存中读取，总是从寄存器中读取。添加同步（例如锁，或 Interlocked 或 Volatile 方法）。

您对 ref 的使用是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:01:20.177

您的代码的问题本质上是编译器优化。出于优化目的的编译器（或 jit）必须采用几乎单线程的视图。然后编译器/jit 会注意到你根本没有接触`reference`你的代码，因此它可以将比较移到循环之外。这样做是免费的，因为您基本上创建了一个竞争条件（没有同步/原子访问）。

修复它可能涉及使用同步机制或将说明`volatile`符添加到`reference`，从而告诉编译器/jit，可以从方法外部更改变量。

# ios - 使用 NSURL 发出 GET 请求不起作用

> ID：15280479
> 
> 赞同：2
> 
> 时间：2013-03-07T19:53:30.353
> 
> 标签：ios

我正在尝试获取一个简单的 GET 请求来为我的 api 工作。但它似乎不起作用，我不知道为什么。

我的代码如下

# 编辑，也尝试过 NSURLCredential 但这似乎也不起作用

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSString *urlAsString = @"https://www.test.com/api/v1/user/logout/";
    NSURL *url = [NSURL URLWithString:urlAsString];
    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url]; [urlRequest setTimeoutInterval:30.0f];
    [urlRequest setHTTPMethod:@"GET"];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response,NSData *data, NSError *error) {
        if ([data length] >0 && error == nil){
            NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
            NSLog(@"HTML = %@", html); }
        else if ([data length] == 0 && error == nil){
            NSLog(@"Nothing was downloaded."); }
        else if (error != nil){
            NSLog(@"Error happened = %@", error); }
    }];

}

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];

    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
} 
```

我的 API 吐出 json。所以我应该得到一个 json 对象，上面写着

```
success: False
reason: 'Already Logged out' 
```

但相反，它给了我以下错误

```
2013-03-07 16:24:44.038 test[8957:1d03] Error happened = Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x715db20 {NSErrorFailingURLKey=https://www.test.com/api/v1/user/logout/, NSErrorFailingURLStringKey=https://www.test.com/api/v1/user/logout/, NSUnderlyingError=0x7181cb0 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012.)"} 
```

# 方法二

经过一番研究，我找到了另一种发送get请求的方法，这种方法似乎工作正常

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^{
        NSError *error = nil;
        NSURL *url = [NSURL URLWithString:@"https://www.test.com/api/v1/user/logout/"];
        NSString *json = [NSString stringWithContentsOfURL:url
                                                  encoding:NSASCIIStringEncoding
                                                     error:&error];
        if(!error) {
            NSData *jsonData = [json dataUsingEncoding:NSASCIIStringEncoding];
            NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:jsonData
                                                                     options:kNilOptions
                                                                       error:&error];
            BOOL success = [[jsonDict objectForKey:@"success"] boolValue];
            if (!success) {
                NSString *reason = [jsonDict objectForKey:@"reason"];
                NSLog(@"Cannot log out, as user %@", reason);
            }
            //NSLog(@"JSON: %@", jsonDict);
        }else{
            NSLog(@"\nJSON: %@ \n Error: %@", json, error);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:24:00.510

问题的解决方案在于 API 本身。如果用户已经注销，API 应该发送 HTTPUnauthorized 信号。既然如此，iOS 就会显示所有这些异常。当我放弃它并只是发回一个简单的 json 响应时，一切都得到了修复。

# jquery - 通过 :target 或 jquery 突出显示活动的锚点 href

> ID：15280480
> 
> 赞同：1
> 
> 时间：2013-03-07T19:53:34.503
> 
> 标签：jquery, css, anchor

在此页面上 > [http://clickbump.com/65/](http://clickbump.com/65/)

当您单击“本文中”功能的目录中的一个链接时，它会自动将内容滚动到视图中，并使用一个小 jquery 将 toc 小部件移动到与当前锚点相邻的位置。

理想情况下，我会使用 :target 属性来突出显示 toc 小部件中当前活动的部分。但是，我已经将它用于锚点本身。

jQuery可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:58:24.630

当有人很容易点击链接时，您可以添加一个类

```
$('.cb-toc li').click(function() {
    $(this).addClass('active').siblings('li').removeClass('active');
}); 
```

这是上面[的工作 .jsfiddle](http://jsfiddle.net/hLeQy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:12:18.080

由于您似乎正在将文档中的 TOC 物理移动到锚点下方的位置，因此您可以使用纯 CSS 来做到这一点：

```
#bookmark2:target + .cb-toc a[href="#bookmark2"] {
  color: #444;
} 
```

这样做的问题当然是您必须为每个锚/链接对添加一个选择器，并且由于您已经在使用 jQuery 来操纵 TOC 的位置，因此坚持使用基于 jQuery 的解决方案会更好、更清晰乔恩·哈丁提议。

# ruby-on-rails - RVM、Ruby 和 Rails 安装中的 gems 问题

> ID：15280484
> 
> 赞同：0
> 
> 时间：2013-03-07T19:53:58.570
> 
> 标签：ruby-on-rails, gem, openssl

几天来，我一直试图在我的计算机上设置我的开发环境，但没有任何运气。我收到的错误消息比我想记得的要多，而且我的安装问题也不是一致的。

我目前的问题是未知的，因为我不知道它源于哪里。

当我尝试检查我的 gem 版本`gem -v`时，终端会锁定几分钟，然后给我这个输出：

```
/Users/Riley/.rvm/bin/gem: line 6: /Users/Riley/.rvm/bin/gem: Argument list too long
/Users/Riley/.rvm/bin/gem: line 6: /Users/Riley/.rvm/bin/gem: Undefined error: 0 
```

该文件的全部内容如下：

```
#!/usr/bin/env bash

if [[ -s "/Users/Riley/.rvm/environments/ruby-2.0.0-p0" ]]
then
  source "/Users/Riley/.rvm/environments/ruby-2.0.0-p0"
  exec gem "$@"
else
  echo "ERROR: Missing RVM environment file: '/Users/Riley/.rvm/environments/ruby-2.0.0-p0'" >&2
  exit 1
fi 
```

而且我不知道它应该是什么，如果不是这样的话。检查`which ruby`给了我：

```
/Users/Riley/.rvm/bin/ruby 
```

当我尝试安装rails时，问题似乎真的很活跃，`gem install rails`：

```
ERROR:  Loading command: install (LoadError)
cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
undefined method `invoke_with_build_args' for nil:NilClass 
```

** 此错误已停止发生，现在已替换为上述“第 6 行”错误`gem -v`，但我相信它会再次出现。

我也尝试了所有这些：

```
rvm get head --autolibs=3
rvm pkg remove
rvm reinstall all --force 
```

以及 SO 和许多其他站点上的所有其他解决方案。

我将非常感谢有人帮助我进行此设置，因为我在 google 和 SO 之外没有任何解决方案来解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:44:11.760

问题源于我安装的 Ruby。显然，如[this answer](https://stackoverflow.com/a/9905801/1292230)中所述，“非 LLVM 版本的 GCC”不再包含在 XCode 命令行工具中。

安装红宝石：

`rvm install ruby --with-gcc=clang`

Worked and I installed RVM, Ruby and Rails within about 10 minutes, despite it taking me a week of debugging and reinstalling otherwise.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:56:13.313

运行`rvm requirements`并安装指定的所有依赖项（openssl 就是其中之一）。它应该可以解决您的问题。

# .net - 是否有.net IoC 可以在调用对象构造函数之前注入属性？

> ID：15280491
> 
> 赞同：0
> 
> 时间：2013-03-07T19:54:18.090
> 
> 标签：.net, inversion-of-control

有人知道在调用构造函数之前注入属性的 IoC 容器吗？

我正在研究内部框架，我不想强​​迫人们从具有多个参数的构造函数派生来使用我的基类（它是调度程序等乏味的东西，如果我向基类添加更多内容，那么它将是更新使用该基础的每个人的代码是一项艰巨的工作）。如果在调用用户构造函数之前设置它们会更好，这样我就不必有一个单独的 OnInitialised 虚拟方法，它们可以完成依赖于这些属性的初始化。

*编辑*

澄清一下，我在这里想要的是属性注入等同于构造链中的字段初始化程序。

1.  派生静态字段
2.  派生静态构造函数
3.  派生实例字段
4.  基本静态字段
5.  基础静态构造函数
6.  基本实例字段
7.  基实例构造函数
8.  派生实例构造函数

即在 6.5 或 7.5 左右（虽然那会有点奇怪）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:28:36.343

根据针对问题的评论，这似乎可以满足我的需求，但我需要使用 TLS 来避免本示例中的服务定位器（我需要控制以这种方式设置的属性的范围）。

```
public class TestBase
{
    private SchedulerContext schedulerContext = InitScheduler();
    public SchedulerContext SchedulerContext
    {
        get { return this.schedulerContext; }
    }

    private static SchedulerContext InitScheduler()
    {
        return ServiceLocator.Current.GetInstance<SchedulerContext>();
    }

    public TestBase()
    {
        Console.WriteLine("Is Instantiated: {0}", this.SchedulerContext != null);           
    }
}

public class TestDerived : TestBase
{
    public TestDerived()
    {
        Console.WriteLine("Is Instantiated: {0}", this.SchedulerContext != null);
    }
} 
```

这至少避免了分解语言对象构造框架的恐惧:)

# javascript - 用户配置文件显示未正确使用 ajax

> ID：15280495
> 
> 赞同：3
> 
> 时间：2013-03-07T19:54:27.683
> 
> 标签：javascript, ajax, jquery

当我在鼠标悬停时触发 ajax 时，用户配置文件没有显示，但是当我第二次将鼠标悬停在它上面时，它正在显示。我使用工具提示来显示用户个人资料。

请更正我的代码

```
$(document).ready(function(){
    $(".user_profile").bind("mouseover",function(){
      id = $(this).attr('id')
      user_id=id.split('_')[1];
    $.ajax({
        url: "/admin/inbox/user_profile",
        data: {user_id : user_id},
        success: function(data){
            $("#"+id).qtip({
                content:{
                    text: data,
                    title:{
                        text: "User Profile"
                    }
                },
                style: {name:'blue', tip:true}
            });
        }
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:49:38.767

因为`$.ajax`是异步的，所以`mouseover`事件会在 qtip 创建之前返回。

当页面加载时，您可以运行`$.ajax`以提取页面中预先显示的所有用户配置文件的数据，将此数据存储在一个数组中，然后使用已填充数组中的数据创建每个 qtip。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:39:48.790

我已经解决了这个问题

我已阅读解决方案：

“因为 $.ajax 是异步的，所以 mouseover 事件会在 qtip 创建之前返回。

当页面加载时，您可以运行 $.ajax 来提取页面中预先显示的所有用户配置文件的数据，将这些数据存储在一个数组中，然后使用已经填充的数组中的数据创建每个 qtip。"

```
$(document).ready(function(){
var i=0,j=0;
$(".user_profile").each(function(){
    id = $(this).attr('id')
    user_id=id.split('_')[1];
    my_user_ids[i++]=user_id;
    my_ids[j++]=id;
});
$.each( my_ids, function(index, value){
  $.ajax({
    url:"/admin/inbox/user_profile",
    data: {user_id : my_user_ids[index]},
    success: function(data){ 
      myArray[value]=data;
      $("#"+my_ids[index]).qtip({
        content:{
          text: myArray[my_ids[index]],
          title:{
            text: "New User's Profile"
          }
        },
        show: 'mouseover',
        hide: 'mouseout',
        style: {name:'blue', tip:true}
      });  
     }
   });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:44:09.357

您不需要绑定 mouseover：它已经由 qtip 插件完成。使用绑定，您会在第一次鼠标悬停事件时对事件产生“冲突”。您应该简单地使用 jQuery .hover 而不是绑定来解决：

```
 $(document).ready(function() {
    $(".user_profile").hover(function() {
    {
        id = $(this).attr('id')
        user_id=id.split('_')[1];
        $.ajax({
            url: "/admin/inbox/user_profile",
            data: {user_id : user_id},
            success: function(data) {
                $("#"+id).qtip({
                    content: {
                        text: data,
                        title: {
                            text: "User Profile"
                        }
                    },
                    style: {name:'blue', tip:true}
                });
            }
        });
    });
}); 
```

# wpf - 如何绑定到 ResourceDictionary 中的控件元素

> ID：15280500
> 
> 赞同：1
> 
> 时间：2013-03-07T19:54:41.630
> 
> 标签：wpf, binding, resourcedictionary

我试图从该控件的 ResourceDictionary 中引用我的 WPF 控件中的元素。这是一个例子：

```
<UserControl.Resources>
<ResourceDictionary>
    <Behaviors:GridViewInteractionModel x:Key="gridViewInteraction" GridView="{Binding ElementName=myGridView}"/>
</ResourceDictionary>
</UserControl.Resources>
...
<SomeGridView x:Name="myGridView"/> 
```

`GridView`对象上的依赖属性的值`GridViewInteractionModel`应该是被`SomeGridView`调用的对象`myGridView`。

**上面的代码不起作用。** `{Binding ElementName=myGridView}`不绑定元素（`GridViewInteractionModel`永远不会调用 SetValue 函数）。

WPF 运行时错误是：

```
Cannot find source for binding with reference 'ElementName=myGridView'.
BindingExpression:(no path); DataItem=null; target element is 
'GridViewInteractionModel' (HashCode=15238415); target property is
'GridView' (type 'SomeGridView') 
```

有谁知道如何让控件中的元素绑定到 ResourceDictionary 中资源的属性？

我发现获取属性集的唯一方法是在`InitializeComponent()`调用后在代码隐藏构造函数中手动设置它：

```
(Resources["gridViewInteraction"] as GridViewInteractionModel).GridView = FindName("myGridView") as SomeGridView; 
```

但这真的很难看（而且容易出错）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:43:31.643

不完全确定您要在这里实现什么。这是我如何处理列表视图及其子项的示例：

```
<Style x:Key="ListViewStyle" TargetType="ListView">
    <Setter Property="Background">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFD3D1CF" Offset="0"/>
                <GradientStop Color="White" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
    <Setter Property="Effect">
        <Setter.Value>
            <DropShadowEffect Opacity="0.7"/>
        </Setter.Value>
    </Setter>
</Style>
<Style x:Key="ListViewItemStyle" TargetType="ListViewItem">
    <Setter Property="Background" Value="#FF494646"/>
    <Setter Property="Foreground" Value="#FFFDFAFA"/>
    <Setter Property="Height" Value="25"></Setter>
    <Setter Property="Cursor" Value="Hand"></Setter>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Foreground" Value="Black"/>
        </Trigger>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Foreground" Value="Black"/>
        </Trigger>
    </Style.Triggers>
</Style>

<ListView x:Name="lvwSettingsYears" x:Uid="lvwSettingsYears" Margin="10,77,10,50"
    Style="{DynamicResource ListViewStyle}"
    ItemContainerStyle="{DynamicResource ListViewItemStyle}"
    SelectionChanged="lvwYears_SelectionChanged">
    <ListView.View>
        <GridView>
            <GridViewColumn x:Name="SettingsYearListviewID" x:Uid="SettingsYearListviewID" DisplayMemberBinding="{Binding id}" Width="0"/>
            <GridViewColumn x:Name="SettingsYearListviewCode" x:Uid="SettingsYearListviewCode" Header="Code" DisplayMemberBinding="{Binding Code}" Width="100"/>
            <GridViewColumn x:Name="SettingsYearListviewDesc" x:Uid="SettingsYearListviewDesc" Header="Description" DisplayMemberBinding="{Binding Description}" Width="300"/>
        </GridView>
     </ListView.View>
 </ListView> 
```

促使我发布此内容的原因是您的错误消息中提到目标属性是“GridView”（输入“SomeGridView”）

我认为它正在寻找控制类型。

# hibernate - 对闭环外键约束实施完整性约束

> ID：15280501
> 
> 赞同：0
> 
> 时间：2013-03-07T19:54:53.233
> 
> 标签：hibernate, database-design, hsqldb, referential-integrity, data-integrity

问题来自以下三个表 -

```
Tour
 - Id

TourPackage
 - Id
 - TourId

Traveller
 - Id
 - TourId
 - PackageId 
```

外键约束已到位。但是，我还希望强制要求旅行者套餐也必须参考旅行者所指的同一旅游。

```
Traveller.Tour = Traveller.Package.Tour 
```

我可能可以轻松地在业务层执行此操作，但我可以在数据库中执行此操作吗？还是我应该重新考虑我的设计？请注意，我不打算在新的关系表中提取外键。我认为 Tour 和 Package 是 Traveler 实体的一部分，因此应该驻留在实体本身中。

更新

我的应用程序在单个 Tour 的上下文中运行。因此，我加载的所有数据都将指向单个游览。此外，大部分数据来自 Traveler 表。因此，有一个直接的 TourId 到表是有意义的。无论如何，我是这样看待关系的。

*   一个旅游有几个套餐。
*   一位旅行者报名参加了一次旅行。
*   旅行者为订阅的旅行选择套餐。

所以，我想一个旅行者提到旅游和包裹是明智的。我在这里错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:18:27.910

首先，可以使用外键来强制 Traveler 表中的`TourId`和`PackageId`引用保持一致。`FORIEGN KEY TRAVLELLER(TOURID, PACKAGEID) REFERENCES PACKAGE(TROURID, ID)`与 TourPackage 表上的 UNIQUE(TOURID, ID) 一起。

关于您的数据模型，如果旅游有多个包裹并且旅行者登记了一个包裹，则不需要 Traveler 表中的 TourId 字段。通过加入三个表，您始终可以找到 TourId。

但是如果允许旅行者在一次旅行中加入多个包裹，那么您需要一个关系表来将旅行者与多个包裹联系起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:39:24.743

![在此处输入图像描述](../Images/01db6e8c41ec805146fe6db36dc0c7da.png)

或者，取决于您如何定义“包”。

![在此处输入图像描述](../Images/9b125ec5c08280f57926bbaefe0342cf.png)

# c - LLVM 优化错误或未定义的行为？

> ID：15280506
> 
> 赞同：9
> 
> 时间：2013-03-07T19:55:20.647
> 
> 标签：c, llvm, clang

在使用 clang 编译一个更大的项目时，我偶然发现了一个恼人的错误。

考虑以下小例子：

```
unsigned long int * * fee();

void foo( unsigned long int q )
{
  unsigned long int i,j,k,e;
  unsigned long int pows[7];
  unsigned long int * * table;

  e = 0;
  for (i = 1; i <= 256; i *= q)
    pows[e++] = i;
  pows[e--] = i; 

  table = fee();  // need to set table to something unknown
                  // here, otherwise the compiler optimises
                  // parts of the loops below away
                  // (and no bug occurs)

  for (i = 0; i < q; i++)
    for (j = 0; j < e; j++)
      ((unsigned char*)(*table) + 5 )[i*e + j] = 0;   // bug here
} 
```

据我所知，这段代码并没有以任何方式违反 C 标准，尽管最后一行看起来很尴尬（在实际项目中，由于过度使用了预处理器宏，会出现这样的代码）。

在优化级别 -O1 或更高级别使用 clang（3.1 或更高版本）编译此代码会导致代码写入内存中的错误位置。

clang/LLVM 生成的汇编文件的关键部分如下：（这是 GAS 语法，所以对于那些习惯 Intel 的人来说：小心！）

```
 [...]
    callq   _fee
    leaq    6(%rbx), %r8          ## at this point, %rbx == e-1
    xorl    %edx, %edx
LBB0_4:
    [...]
    movq    %r8, %rsi
    imulq   %rdx, %rsi
    incq    %rdx
LBB0_6:
    movq    (%rax), %rcx          ## %rax == fee()
    movb    $0, (%rcx,%rsi)
    incq    %rsi
    [conditional jumps back to LBB0_6 resp. LBB0_4]
    [...] 
```

换句话说，指令确实

```
(*table)[i*(e+5) + j] = 0; 
```

而不是上面写的最后一行。的选择`+ 5`是任意的，添加（或减去）其他整数会导致相同的行为。那么 - 这是 LLVM 优化中的错误还是这里发生了未定义的行为？

**编辑：**还要注意，如果我`(unsigned char*)`在最后一行省略演员表，该错误就会消失。通常，该错误似乎对任何更改都非常敏感。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:11:02.273

我很确定这是一个优化器错误。它在 LLVM-2.7 和 LLVM-3.1 中重现，这是我可以访问的唯一版本。

我向 LLVM Bugzilla发布[了一个错误。](http://llvm.org/bugs/show_bug.cgi?id=15470)

此 SSCCE 演示了该错误：

```
#include <stdio.h>

unsigned long int * table;

void foo( unsigned long int q )
{
  unsigned long int i,j,e;

  e = 0;
  for (i = 1; i <= 256; i *= q)
    e++;
  e--;

  for (i = 0; i < q; i++)
    for (j = 0; j < e; j++)
      ((unsigned char*)(table) + 13 )[i*e + j] = 0;   // bug here
}

int main() {
    unsigned long int v[8];
    int i;
    memset(v, 1, sizeof(v));

    table = v;
    foo(2);

    for(i=0; i<sizeof(v); i++) {
        printf("%d", ((unsigned char*)v)[i]);
    }
    puts("");
    return 0;
} 
```

它应该打印

```
1111111111111000000000000000011111111111111111111111111111111111 
```

在 GCC 和“clang -O0”下。使用 LLVM 观察到的错误输出是

```
0000000011111111111110000000011111111111111111111111111111111111 
```

感谢您注意到这一点！

# html - 为最后一个表格标题列添加右边框

> ID：15280507
> 
> 赞同：0
> 
> 时间：2013-03-07T19:55:28.077
> 
> 标签：html, css

我需要你的帮助，

如何在表格的最后一列标题中添加一个border-right: 1px solid #808080？我不确定并坚持要修改或修复什么。

这是我的 CSS 和粘贴 Bin： http: [//pastebin.com/CEPVfd1z](http://pastebin.com/CEPVfd1z)

CSS：

```
#wrapper {
        height: 150px;
        width: 800px;
        border: 1px solid #808080;
        position: relative;

        overflow-y: scroll;
        overflow-x: scroll;
        scrollbar-base-color: #DFDFDF;
        scrollbar-arrow-color: #235A81;

}
#data {
  border-collapse: collapse;
  border: 0;
  width: 800px;
}
#data th {
  border-left: 1px solid #808080;
  filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#cdcdcd");
}
#data td {
  border: 1px solid #808080;
}
#data tr:first-child th {
  border-top: 0;
}
#data tr:last-child td {
  border-bottom: 0;
}
#data tr td:first-child,
#data tr th:first-child {
  border-left: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:58:37.570

`#data th:last-child`用作选择器，然后将属性`border-right`添加到其中。好像你已经知道如何使用`:first-child`和`:last-child`选择器了，我就不解释了。

[http://jsfiddle.net/KgXuN/](http://jsfiddle.net/KgXuN/)

```
#data th:last-child {
    border-right: 2px solid red;
} 
```

# python - 如何链接可能在 Python 中返回 None 的属性查找？

> ID：15280511
> 
> 赞同：37
> 
> 时间：2013-03-07T19:55:39.063
> 
> 标签：python, optional-chaining

我的问题是一个普遍的问题，如何在中间的一个可能返回时链接一系列属性查找`None`，但是由于我在尝试使用 Beautiful Soup 时遇到了这个问题，所以我将在这种情况下询问它。

Beautiful Soup 解析 HTML 文档并返回一个对象，该对象可用于访问该文档的结构化内容。例如，如果解析的文档在变量`soup`中，我可以通过以下方式获取其标题：

```
title = soup.head.title.string 
```

我的问题是，如果文档没有标题，则`soup.head.title`返回`None`并且后续`string`查找会引发异常。我可以将链条分解为：

```
x = soup.head
x = x.title if x else None
title = x.string if x else None 
```

但是，在我看来，这很冗长且难以阅读。

我可以写：

```
title = soup.head and soup.head.title and soup.title.head.string 
```

但这是冗长且低效的。

如果想到的一种解决方案（我认为这是可能的）是创建一个对象（调用它`nil`），它将返回`None`任何属性查找。这将允许我写：

```
title = ((soup.head or nil).title or nil).string 
```

但这很丑陋。有没有更好的办法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-07T20:47:12.167

最直接的方法是包装在`try`...`except`块中。

```
try:
    title = soup.head.title.string
except AttributeError:
    print "Title doesn't exist!" 
```

**当删除每个测试会在失败情况下引发相同的异常时，**确实没有理由在每个级别进行测试。我会认为这是 Python 中的惯用语。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-07T20:01:51.167

您也许可以为此使用`reduce`：

```
>>> class Foo(object): pass
... 
>>> a = Foo()
>>> a.foo = Foo()
>>> a.foo.bar = Foo()
>>> a.foo.bar.baz = Foo()
>>> a.foo.bar.baz.qux = Foo()
>>> 
>>> reduce(lambda x,y:getattr(x,y,''),['foo','bar','baz','qux'],a)
<__main__.Foo object at 0xec2f0>
>>> reduce(lambda x,y:getattr(x,y,''),['foo','bar','baz','qux','quince'],a)
'' 
```

在 python3.x 中，我认为这`reduce`已经移到了`functools`:(

* * *

我想您也可以使用更简单的功能来做到这一点：

```
def attr_getter(item,attributes)
    for a in attributes:
        try:
            item = getattr(item,a)
        except AttributeError:
            return None #or whatever on error
    return item 
```

* * *

最后，我认为*最好*的方法是：

```
try:
   title = foo.bar.baz.qux
except AttributeError:
   title = None 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:03:44.407

一种解决方案是将外部对象包装在为您处理 None 值的代理中。请参阅下面的开始实施。

导入单元测试

```
class SafeProxy(object):

    def __init__(self, instance):
        self.__dict__["instance"] = instance

    def __eq__(self, other):
        return self.instance==other

    def __call__(self, *args, **kwargs):
        return self.instance(*args, **kwargs)

    # TODO: Implement other special members

    def __getattr__(self, name):
        if hasattr(self.__dict__["instance"], name):
            return SafeProxy(getattr(self.instance, name))

        if name=="val":
            return lambda: self.instance

        return SafeProxy(None)

    def __setattr__(self, name, value):
        setattr(self.instance, name, value)

# Simple stub for creating objects for testing
class Dynamic(object):
    def __init__(self, **kwargs):
        for name, value in kwargs.iteritems():
            self.__setattr__(name, value)

    def __setattr__(self, name, value):
        self.__dict__[name] = value

class Test(unittest.TestCase):

    def test_nestedObject(self):
        inner = Dynamic(value="value")
        middle = Dynamic(child=inner)
        outer = Dynamic(child=middle)
        wrapper = SafeProxy(outer)
        self.assertEqual("value", wrapper.child.child.value)
        self.assertEqual(None, wrapper.child.child.child.value)

    def test_NoneObject(self):
        self.assertEqual(None, SafeProxy(None))

    def test_stringOperations(self):
        s = SafeProxy("string")
        self.assertEqual("String", s.title())
        self.assertEqual(type(""), type(s.val()))
        self.assertEqual()

if __name__=="__main__":
    unittest.main() 
```

注意：我个人不确定我是否会在实际项目中使用它，但它是一个有趣的实验，我把它放在这里是为了让人们对此产生想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T23:54:45.580

这是另一种潜在的技术，它在方法调用中隐藏了中间值的分配。首先我们定义一个类来保存中间值：

```
class DataHolder(object):
    def __init__(self, value = None):
            self.v = value

    def g(self):
            return self.v

    def s(self, value):
            self.v = value
            return value

x = DataHolder(None) 
```

然后我们用它来存储调用链中每个链接的结果：

```
import bs4;

for html in ('<html><head></head><body></body></html>',
             '<html><head><title>Foo</title></head><body></body></html>'):
    soup = bs4.BeautifulSoup(html)
    print x.s(soup.head) and x.s(x.g().title) and x.s(x.g().string)
    # or
    print x.s(soup.head) and x.s(x.v.title) and x.v.string 
```

我不认为这是一个好的解决方案，但为了完整起见，我将其包含在此处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-30T16:01:59.940

我处理这样的中间空属性的最佳方法是在 repl.it 上使用[pydash](https://repl.it/@NamG1/handle-in-middle-null-attribute)[作为](https://pydash.readthedocs.io/en/latest/)示例代码

```
import pydash
title = pydash.get(soup, 'head.title.string', None) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-28T15:01:52.963

我正在运行 Python 3.9

```
Python 3.9.2 (tags/v3.9.2:1a79785, Feb 19 2021, 13:44:55) [MSC v.1928 64 bit (AMD64)] 
```

`and`关键字解决了我的问题

```
memo[v] = short_combo and short_combo.copy() 
```

据我所知，这不是pythonic，您应该处理异常。
然而，在我的解决方案`None`中，函数中存在歧义，在这种情况下，我认为处理大约 50% 的时间发生的异常是一种糟糕的做法。
在函数之外并调用它的地方，我将处理异常。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-24T16:50:33.107

这就是我从@TAS 获得灵感的处理方式，[是否有像 Ruby 的 andand 这样的 Python 库（或模式）？](https://stackoverflow.com/questions/7898688)

```
class Andand(object):
    def __init__(self, item=None):
        self.item = item

    def __getattr__(self, name):
        try:
            item = getattr(self.item, name)
            return item if name is 'item' else Andand(item)
        except AttributeError:
            return Andand()     

    def __call__(self):
        return self.item

title = Andand(soup).head.title.string() 
```

# iphone - 如何在目标 c 中向视图添加乘法动画？

> ID：15280512
> 
> 赞同：0
> 
> 时间：2013-03-07T19:55:42.343
> 
> 标签：iphone, objective-c, ios6

我想向视图添加多个动画。我只能添加一个，...我不想连接

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:kAnimationDuration];
//self.square.bounds = CGRectMake(0, 0, self.square.bounds.size.height, 200);
//self.transform = CGAffineTransformMakeScale(2, 1);

CGAffineTransform scaleTrans1 = CGAffineTransformMakeScale(2, 1);

self.transform = scaleTrans1;
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:11:32.763

您可以使用 UIView 中的 animateWithDuration （在其任何变体中），只要您尝试动画的属性实际上是可动画的（查看[UIView / Animations](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW131)）。

例如：

```
[UIView animateWithDuration:1.0f
animations: ^ {
    self.square.bounds = CGRectMake(0, 0, self.square.bounds.size.height, 200);
    self.transform = CGAffineTransformMakeScale(2, 1);
}]; 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:29:59.580

我确实喜欢这个及其工作

```
- (void)drawRect:(CGRect)rect
{    
    [UIView animateWithDuration:4.0f animations:^{
        self.transform = CGAffineTransformMakeScale(2, 1);
    } completion:^(BOOL finished){
        [UIView animateWithDuration:4.0f animations:^{
           self.transform = CGAffineTransformMakeScale(0.75, 1);
        } completion:^(BOOL finished){
            [UIView animateWithDuration:4.0f animations:^{
              self.transform = CGAffineTransformMakeScale(2, 1);  
            } completion:^(BOOL finished) {
                [UIView animateWithDuration:4.0f animations:^{
                    self.transform = CGAffineTransformMakeScale(0.75, 1);
                }];
            }];
        }];
    }];

} 
```

# android - 将 Facebook 相册添加到 iOS6？

> ID：15280516
> 
> 赞同：0
> 
> 时间：2013-03-07T19:55:58.337
> 
> 标签：android, ios, facebook, photo-gallery

我非常不喜欢它。我查看了 Facebook Developer，但它没有我想要的东西。我正在为 VBS 程序制作 iOS 和 Android 应用程序。我想将他们的官方 Facebook 相册添加到应用程序中，这样当用户有 wifi 时，他们可以在点击 UITableView Cell 后查看它。

我需要关于从哪里开始的建议。有没有我在谷歌上忽略的教程可以告诉我我需要什么？我使用适用于 Android 的 App Inventor。我将 Xcode 用于 iOS 设备。

我想为这个应用程序做的很简单：让人们访问 Facebook 相册来参加这个活动……它节省了我的空间，让他们更喜欢。他们不能触摸/修改相册中的任何内容。

丹克！-TG52

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:26:03.167

[您可以通过Graph API](https://developers.facebook.com/docs/reference/api/)端点获取用户或页面相册`PAGE_OR_USER_ID/albums`。一旦你知道专辑 ID 是什么，你就可以简单地调用`ALBUM_ID/photos`. 这将返回许多`photo`对象，每个对象都有一个`picture`和`source`属性。[在API Explorer](https://developers.facebook.com/tools/explorer)中玩耍以了解响应的格式。

从这里，您将获得每张照片的 url 以及高度和宽度。按照您认为合适的方式构建您的 UIView。

# php - CodeIgniter 表生成带有链接

> ID：15280518
> 
> 赞同：0
> 
> 时间：2013-03-07T19:56:06.277
> 
> 标签：php, codeigniter

一旦我得到它的工作，我将把 SQL 代码移动到一个模型中，我知道它应该在那里。但如果它一开始就不起作用，它也无济于事。我可能遗漏了一些东西，但是我如何将 SQL 结果“id”作为超链接（例如超链接 www.mainsite.com/hw/id/$id）

我已经转发了我的 index.php。

电流控制器：

```
function index()
{
    $this->load->library('pagination');
    $this->load->library('table');
    $this->load->library('form_validation');
    $this->load->helper(array('html','url'));

    $config['base_url'] = '/index.php/hw/id';
    $config['total_rows'] = $this->db->get('HWC')->num_rows();
    $config['per_page'] = 20;
    $config['num_links'] = 1;
    $config['full_tag_open'] = '<div class="pagination pagination-centered"><ul>';
    $config['full_tag_close'] = '</ul></div>';
    $config['cur_tag_open'] = '<li class="active"><a href="#">';
    $config['cur_tag_close'] = '</a></li>';
    $config['num_tag_open'] = '<li>';
    $config['num_tag_close'] = '</li>';
    $config['first_tag_open'] = '<li>';
    $config['first_tag_close'] = '</li>';
    $config['last_tag_open'] = '<li>';
    $config['last_tag_close'] = '</li>';

    $this->pagination->initialize($config);

    $this->db->distinct();
    $this->db->order_by('Col');
    $this->db->select('*');
    $where = array('ModelName IS NOT NULL' => null);

    $data['records'] = $this->db->get_where('HWC', $where, $config['per_page'], $this->uri->segment(3));

    $result = $this->table->set_heading('HWC #', 'Col #', 'Model Name', 'Series', 'Color', 'Tampo', 'Base Color', 'Base Type', 'Window Color', 'Interior Color', 'Wheel Type', 'Toy #', 'Country', 'Notes', 'Series #', 'Year Produced');
    $data['main_content'] = 'hw_view';
    $this->load->view('includes/template', $data);
} 
```

目前看来：

```
<?php
  echo $this->table->set_template(array('table_open' => '<table class="table table-condensed table-hover">'));
  echo validation_errors('<p class="error">');
  echo $this->table->generate($records);
  echo $this->pagination->create_links();
?> 
```

# jsp - 将.java的结果获取到jsp中

> ID：15280522
> 
> 赞同：1
> 
> 时间：2013-03-07T19:56:25.857
> 
> 标签：jsp

我试图做大量的 JSP 脚本来从数据库调用，然后我了解到这不是一个好主意，所以现在，我有点迷路了。

FirstExample.java：

```
 package p;

 //STEP 1\. Import required packages
import java.sql.*;

public class FirstExample {
   // JDBC driver name and database URL
static final String JDBC_DRIVER = "oracle.jdbc.OracleDriver";  
static final String DB_URL = "url";

//  Database credentials
static final String USER = "user";
static final String PASS = "pw";

public static void main(String[] args) {
Connection conn = null;
Statement stmt = null;
try{
  //STEP 2: Register JDBC driver
 Class.forName("oracle.jdbc.OracleDriver");

  //STEP 3: Open a connection
  System.out.println("Connecting to database...");
  conn = DriverManager.getConnection(DB_URL,USER,PASS);

  //STEP 4: Execute a query
  System.out.println("Creating statement...");
   stmt = conn.createStatement();
 //  String sql;
       ResultSet rs = stmt.executeQuery("some query");
System.out.println(rs);
  //STEP 5: Extract data from result set
  while(rs.next()){
     //Retrieve by column name
  //         int id  = rs.getInt("some column");
         System.out.println (rs.getString(1) + "," + rs.getString(2));
  //   int age = rs.getInt("some age");
 //    String first = rs.getString("first");
  //   String last = rs.getString("last");

     //Display values
 //      System.out.print("some column: " + id);
 //    System.out.print(",some age: " + age);
//     System.out.print(", First: " + first);
//       System.out.println(", Last: " + last);
  }
  //STEP 6: Clean-up environment
  rs.close();
  stmt.close();
  conn.close();
}catch(SQLException se){
  //Handle errors for JDBC
  se.printStackTrace();
}catch(Exception e){
  //Handle errors for Class.forName
  e.printStackTrace();
}finally{
  //finally block used to close resources
  try{
     if(stmt!=null)
        stmt.close();
  }catch(SQLException se2){
  }// nothing we can do
  try{
     if(conn!=null)
        conn.close();
  }catch(SQLException se){
     se.printStackTrace();
  }//end finally try
}//end try
System.out.println("Goodbye!");
}//end main
}//end FirstExample 
```

我需要将此结果输入 JDBCQuery2.jsp，其中显示：

```
<%@ page language="java" import="p.FirstExample" %>
<% FirstExample object = new FirstExample();

//FirstExample.init();    

%>
<h3>Connection ok</h3> 
```

这会正确加载包，但我需要 .java 中方法的结果，我不知道如何使用上面的 init 调用方法。我应该使用init吗？最终，我想将 java 引用与 ajax 调用相关联，但现在有人可以帮我将查询结果拉入我的 JSP 吗？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:16:16.613

从 JSP 调用 Java main() 方法不是 JSP 的工作方式。

一般来说，对于一个基本的纯 JSP 解决方案，您要做的就是将连接信息放在 web.xml 中。然后，您编写一个扩展 HttpServlet 类的 servlet，并在您为此类覆盖的 init() 方法中从 ServletContext 访问该信息。一旦您的 servlet 被容器加载，就会发生这种初始化。之后，对该 servlet 的服务方法（例如 doGet()）的调用可以重定向到您的 JSP。然后，您可以通过多种方式访问​​连接信息；例如，通过 Java scriptlet 访问 ServletContext 属性或通过 EL 访问 applicationScope。

这听起来很复杂，但它是基本的 JSP/Servlet 机制。您的问题似乎表明您是 JSP 的新手，并且可能需要通过教程来运行。

根据您的环境和您正在尝试做的事情，有更复杂的方法可以做到这一点。

# css - 如何获得我的“立即注册！” 链接在底部使用 CSS 排列

> ID：15280523
> 
> 赞同：0
> 
> 时间：2013-03-07T19:56:27.607
> 
> 标签：css

我有这个定价表的代码，但我无法获得“立即注册！” 链接在底部排队。

[http://codepen.io/geirman/pen/brsLm](http://codepen.io/geirman/pen/brsLm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:04:20.110

为您的 ul 添加高度将导致它们对齐。这是我的粘贴版本...

[密码笔](http://cdpn.io/LyDhv)

我刚刚将课程添加`.brbcoding`到您的课程中，`ul`并给了它的高度`250px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:14:39.933

这是我的版本：[http ://cdpn.io/lezBL](http://cdpn.io/lezBL)

我添加了

```
position: relative; 
```

到#pricing-group 然后绝对定位链接。您还可以将 padding-bottom 添加到 .item 以防止重叠。

# jquery - jquery bug 在到达点后拍摄到顶部并复制图像

> ID：15280526
> 
> 赞同：0
> 
> 时间：2013-03-07T19:56:32.810
> 
> 标签：jquery, html, css

我在我正在开发的网站中添加了一些简单的 jquery，以便在用户滚动到屏幕上的某个点时让 2 个元素滑入视图。动画做了我想要的，但是当我向下滚动到该区域时，就在动画完成之前，它会立即将我带到页面顶部。当我向下滚动时，动画完成了，但它留下了看起来像是在它移动的区域中移动的文本的“副本”。如何阻止页面拍摄到顶部以及如何阻止文本离开它的动画副本？

这是jQuery

```
$(document).ready(function(){
        $(window).scroll(function(){
            if ($(this).scrollTop() > 1350) {
           $('#managecontent1').animate({left: '0px'},900);
           $('#managecontent2').animate({right: '0px'},900);
       }
            });
    }); 
```

这是文本复制的样子

![在此处输入图像描述](../Images/1a04cc253730c38f37f471c497430de4.png)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:48:00.567

使用 jQuery`.off()`分离事件处理程序。

在以下代码`.off()`中使用：

*   结合`setTimeout()`在动画被触发之前临时分离滚动处理程序，以减少滚动处理程序触发的频率
*   触发动画后永久分离滚动处理程序。

Javascript：

```
$(function() {
    function scrollHandler() {
        $(window).off('scroll.managecontent');
        if ($(this).scrollTop() > 1350) {
            $('#managecontent1').animate({left: '0px'}, 900);
            $('#managecontent2').animate({right: '0px'}, 900);
        }
        else {
            setTimeout(observeScroll, 200);//Adjust timeout to maximum acceptable value. 200 ms shouldn't be too far off the mark.
        }
    }
    function observeScroll() {
        $(window).on('scroll.managecontent', scrollHandler);
    }
    observeScroll();
}); 
```

这可能会也可能不会解决问题。

# php - session_start() 抛出错误

> ID：15280527
> 
> 赞同：0
> 
> 时间：2013-03-07T19:56:34.127
> 
> 标签：php, session

我目前使用 php 遇到以下错误：

```
Warning: session_start() [function.session-start]: 
Cannot send session cache limiter - headers already sent 
(output started at /home/paramireze/madisonh3.com/calendar.php:1)
in /home/paramireze/madisonh3.com/includes/common.php on line 5 
```

每个文件的第一行是`include common.php`，其中的第一行代码`common.php`是 'if(!isset($_SESSION)) {session_start();}`。

此错误仅发生在`calendar.php`and上`news.php`（如果您访问 [http://www.madisonh3.com/calendar.php](http://www.madisonh3.com/calendar.php)可以看到该错误）。我所有的文件都是一样的，其中包括一个`common.php`. 之后，我将编写 html 标签并从那里包含标题。

我已经阅读了有关的其他讨论，`session_start`并且都说要确保您之前不输出任何 html `session_start`。另外，如果我做错了什么，为什么它只发生在我的 10 个文件中的两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:58:52.353

`session_start()`在您发出命令之前，有一些东西正在输出数据。由于会话 cookie 设置为 HTTP 标头，因此它必须位于任何 HTML 输出之前。

该错误`Cannot send session cookie - headers already sent by (output started at /home/paramireze/madisonh3.com/calendar.php:1) in /home/paramireze/madisonh3.com/includes/common.php on line 5`表示之前输出了某些内容。

因此，请查看您的代码，并在您的`session_start()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:13:07.473

您应该注意您的编辑器不存储**utf-8 BOM 标头**，此标头有时以 3 个字节 ï»¿ 存储在文件的开头。

编辑器会隐藏它们，所以如果您不确定您的文件是否包含这些字符，您可以使用非解释性编辑器（十六进制编辑器），或者这个很棒的在线[W3C 检查器](http://validator.w3.org/i18n-checker/)。BOM 标头被 PHP 视为输出，这可能会导致严重`Cannot modify header information - headers already sent`错误。

检查您的 URL 显示，确实存在这样的 BOM 标头。查看编辑器 (IDE) 的设置。

# javascript - 如何在纯 JavaScript 中检测 mousein 和 mouseleave？

> ID：15280531
> 
> 赞同：5
> 
> 时间：2013-03-07T19:56:41.033
> 
> 标签：javascript

由于各种原因，我不能在这部分项目中使用 jQuery。所以我需要在 vanilla js 中检测到这一点。我试过这个但它不起作用：

[http://jsfiddle.net/qHfJD/](http://jsfiddle.net/qHfJD/)

```
var myDiv = document.getElementById('foo');

myDiv.onmouseenter = function() { 
    alert('entered');
}

myDiv.onmouseleave = function() { 
    alert('left');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-03T07:50:58.780

```
myDiv.onmouseover = function(event) {
  if (this != event.currentTarget) { return false; }
  // mouse enter ...
}
myDiv.onmouseout = function(event) {
  if (this != event.currentTarget) { return false; }
  // mouse leave ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:01:32.810

`mouseenter`和事件是 Internet Explorer 专有的`mouseleave`，因此如果您不使用 IE，它们将无法工作。使用`mouseover`and`mouseout`代替。

顺便说一句，您可以使用jQuery `mouseenter`，`mouseleave`因为 jQuery 会在非 IE 浏览器上为您模拟这些事件。有关如何模拟和自己的提示，请参阅[本文。](http://blog.stchur.com/2007/03/15/mouseenter-and-mouseleave-events-for-firefox-and-other-non-ie-browsers/)`mouseenter``mouseleave`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T20:00:08.677

`mouseenter`并且`mouseleave`是专有的 MS 事件（实际上非​​常好）。如果`myDiv`没有孩子，使用`mouseover`/`mouseout`将具有完全相同的效果。

[http://jsfiddle.net/qHfJD/1/](http://jsfiddle.net/qHfJD/1/)

**注意：**这个原始问题和答案非常古老，并且`mouseenter`在`mouseleave`IE 之外没有得到很好的支持。很长一段时间以来，所有现代浏览器都支持元素上的这些事件。它们通常比`mouseover`/更受欢迎，`mouseout`因为除了元素本身之外，后者还将触发具有事件侦听器的元素的每个子元素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T20:00:52.403

你很亲密。函数名是onmouseover和onmouseout

```
var myDiv = document.getElementById('foo');

myDiv.onmouseover = function() { 
  alert('entered');
}

myDiv.onmouseout = function() { 
  alert('left');
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-07T20:01:13.267

试试： var myDiv = document.getElementById('foo');

```
myDiv.onmouseover = function() { 
    alert('entered');
}

myDiv.onmouseout = function() { 
    alert('left');
} 
```

onmouseenter 和 onmouseleave 是 IE 独有的功能。

# c - 如何检查 nanosleep 循环中的错误

> ID：15280532
> 
> 赞同：1
> 
> 时间：2013-03-07T19:56:52.080
> 
> 标签：c, unix, sleep

我在 while 循环中有一个 nanosleep 函数。这是我在“Linux 系统编程：直接与内核和 C 库对话”一书中找到的一个示例

```
 while(nanosleep(a, b) && errno==EINTR){
        struct timespec *tmp =a;
        a=b;
        b=tmp;
    } 
```

工作完美，但我不确定如何检查 EINTR 以外的其他错误，以便我可以在屏幕上打印错误并退出程序。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:59:51.370

您可以简单地将返回值存储在循环条件中：

```
int ret;
while((ret = nanosleep(a, b)) && errno==EINTR){
    struct timespec *tmp =a;
    a=b;
    b=tmp;
}
if (ret) {
    perror("nanosleep");
    exit(1);
} 
```

# java - 每个数据库连接一个 DAO？

> ID：15280534
> 
> 赞同：0
> 
> 时间：2013-03-07T19:56:54.053
> 
> 标签：java, spring, jdbc

使用 Spring 和 JDBCTemplates（无 ORM），我有一个针对 CMS 数据库的 DAO。

我现在需要访问另一个数据库。我应该创建一个单独的 DAO 还是使用一个大 DAO？在我的情况下，两者似乎都有效。我有一个接口，但它不是通用接口。除了 INSERT 到审计表之外，我所做的只是检索值。[因此，根据此链接](http://www.adam-bien.com/roller/abien/entry/generic_crud_service_aka_dao)，我觉得我不需要为每个表提供单独的 CRUD 服务

我认为这并不重要，但一个数据库是 MySQL，另一个是 Oracle。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T19:58:50.763

您可以通过 Google 搜索了解 DAO 模式，但通常，您为每个“表”或一组相关表创建一个 DAO。我不知道这是否是您所说的“数据库”。有些人就是这样使用这些术语的。（您更新了问题以解释“数据库”。因此，每个数据库通常会有多个 DAO，每个表或一组相关表都有一个。）

所以“是”

注意：当我说“相关表”时，我可能需要解释一下。例如，如果您有一个 invoice 表和一个 invoice_detail 表。详细信息行通常类似于纸质发票上的一行，并且具有指向发票表中发票 ID 或发票编号的外键。有两个表，但您可能只有一个 DAO 来处理发票和与它们相关的详细信息。可能有一些方法可以通过发票编号和客户以及按日期获取发票，并且可能还可以获取一个月内在其中一个详细信息行中有特定项目的所有发票。将有一些方法可以创建发票并在其上创建所有行。等等。一个 DAO，但有多个表。

详细信息行可能有指向“零件”表的外键，其中包含零件的详细信息。您可能想阅读零件信息并将其与发票一起退回，并且您可能只想在阅读发票后单独阅读零件。在后一种情况下，将有第二个 DAO 具有读取和可能修改部件记录的方法。

这个例子假设这些都在同一个数据库中，无论是 MySQL 还是 Oracle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:11:06.807

您应该将 a 注入`DataSource`到您的 DAO 中，然后使用它来创建您的`SimpleJdbcTemplate`. 由于 a`DataSource`连接到特定数据库，因此您将需要为每个数据库单独的 DAO/ `DataSource`s/ s。`SimpleJdbcTemplate`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:11:53.510

在 Spring 应用程序中，每个表或数据实体可以有多个“DAO”，但您仍然应该隔离数据库调用，而且 Spring 需要知道不同的连接参数，并且可以使用 applicationContext 中的 DAO 定义来分离。这听起来像是一个 REST Web 服务的候选者来处理您从其他数据库中的检索。

# php - 在关联数组中找到最大值

> ID：15280537
> 
> 赞同：0
> 
> 时间：2013-03-07T19:57:03.203
> 
> 标签：php

我有一个看起来像这样的数组：

```
array(10) {
  [0]=>
  array(4) {
    [0]=>
    array(5) {
    ...
    }
    [1]=>
    array(5) {
    ...
    }
    [2]=>
    array(5) {
    ...
    }
    ["opt"]=>
    float(0.5)
  }
  [1]=>
  array(4) {
    [0]=>
    array(5) {
    ...
    }
    [1]=>
    array(5) {
    ...
    }
    [2]=>
    array(5) {
    ...
    }
    ["opt"]=>
    float(1)
  }
  .....
} 
```

我想找出第一层数组的键，它在键'opt'处具有最高值。我希望你明白我的意思。对不起那句话，但有点难以解释！;)

编辑：我想到的是使用 max() 创建使用 foreach 的所有条目。我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:06:38.607

您可以使用[max() 函数](http://php.net/manual/en/function.max.php)

如果您的数组具有恒定长度“n”

```
$maxValue=max($array[0]["opt"],$array[1]["opt"], ... $array[n]["opt"]); 
```

别的

```
$i=0;
foreach($array as $value)  {
   $opts[$i]=$value["opt"];
   $i++;
}
$maxValue=max($opts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T08:33:01.883

[`max()`](http://php.net/manual/en/function.max.php)+呢[`array_map()`](http://php.net/manual/en/function.array-map.php)？

```
$max = max(
    array_map(function (array $layer) {
        return (float)$layer['opt'];
    }, $layers)
) 
```

# javascript - 如何在 MeteorJS 中淡出删除元素

> ID：15280544
> 
> 赞同：3
> 
> 时间：2013-03-07T19:57:29.207
> 
> 标签：javascript, jquery, meteor, fadeout

看看：[http](http://shopping-list.meteor.com) ://shopping-list.meteor.com 。我想在项目被删除时淡出它们，而不是让它们立即消失，我不确定如何实现这一点。

代码位于[http://github.com/chintanparikh/shopping-list](http://github.com/chintanparikh/shopping-list)。

如果有人能让我走上正确的道路，那就太棒了。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:22:28.850

您是否尝试过使用[回调](http://api.jquery.com/fadeOut/)：

```
Template.item.events({
  'click .close': function()
  {
    var self = this;
    $(self).fadeOut('slow', function() { Items.remove(self); });

  }
}) 
```

更新：按照 Rahul 的建议添加了“self”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:07:39.650

尝试这个：

```
Template.item.events({
  'click .close': function()
  {
    //get parent (li) and fade it out.
    $(this).parent().fadeOut();
    Items.remove(this);
  }
}) 
```

# c# - 创建ics文件

> ID：15280549
> 
> 赞同：0
> 
> 时间：2013-03-07T19:57:53.140
> 
> 标签：c#, asp.net, icalendar

[创建 .ICS 文件，添加到 Outlook](https://stackoverflow.com/questions/3092345/creating-ics-files-adding-to-outlook)

[http://www.codeproject.com/Articles/24817/Send-appointment-through-email-in-ASP-NET](http://www.codeproject.com/Articles/24817/Send-appointment-through-email-in-ASP-NET)

我正在使用以上 2 个资源来创建 ics 文件。我对描述部分有疑问。

摘要将采取主题。

描述将包含客户姓名、电话和地址等。我如何创建描述？

我在这里有点迷路，示例描述：

```
Description:
<html>
    <body>
        <p>Name</p>
        <p>Phone</p>
        <p>Adddress</p>
        <p>Message</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:39:44.723

每当您打开 iCal 时，它们都会将时间转换为 UTC，如果可能，您可能会以 UTC 生成日历文件。

一般来说，当把时间弄乱时，将它们全部放在 UTC 中通常会很好。

对于新行，我相信您需要转义反斜杠

试用

```
\\n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T09:34:00.697

您可以使用
X-ALT-DESC;FMTTYPE=text/html: Your Html Code

```
Description:
X-ALT-DESC;FMTTYPE=text/html:<p>Name</p><p>Phone</p><p>Adddress</p><p>Message</p> 
```

# python - Linux nohup 命令无法正常工作

> ID：15280552
> 
> 赞同：-1
> 
> 时间：2013-03-07T19:58:04.703
> 
> 标签：python, linux, process, nohup

所以我有一个启动脚本，假设使用 nohup 在后台运行这个 python 脚本。我使用 nohup 是因为我不希望它依赖于我是否登录。因此，它是从一张 SD 卡运行的，然后我将其转换为图像并刻录到另一张卡上。

奇怪的是它在第一个而不是第二个中正常工作。我可以先查看 nohub.out 并查看预期的输出，但在副本中它完全是空白的。

当我做 ps aux | grep python 我可以看到脚本进程在两者中运行，所以我不确定为什么副本似乎没有做它应该做的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:14:57.443

如果没有完整的上下文，很难猜测，但差异可能仅仅是因为其中一张 SD 卡被写保护 - 或以只读方式安装。如果不是这种情况，请您发布输出

```
mount 
```

两张卡？

您可能希望使用`screen`而不是`nohup`：开始

```
screen 
```

然后正常运行程序，然后按 Ctrl+A 然后按 D 分离。稍后（即使在注销后）重新获得对终端的控制权

```
screen -r 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:32:01.867

我想到了。显然，出于某种原因，它们都必须被设置为锁定。当我这样做时，他们按预期工作

# mysql - MySQL考勤系统，加入表的问题，1个主键的重复ID

> ID：15280560
> 
> 赞同：0
> 
> 时间：2013-03-07T19:58:42.243
> 
> 标签：mysql

好的，所以我正在为一所大学创建一个考勤系统，但在 MySQL 中处理表格时遇到了问题

我遇到的问题是将一组学生分组在一起上课。所以在 MySQL

表名：CourseGroup **：** courseGroup_id、student_id(FK)、course_id(FK)

我想要一些属于一个班级的学生，事后看来，这将使老师能够为该班级组进行注册

在 MySQL 中，我将“courseGroup_id”设置为唯一字段，但是当我尝试在“出勤表”中链接“courseGroup_id”时，它只能让我选择“student_id”和“course_id”

是否可以选择 courseGroup_id 并显示一个班级的学生

我的出勤表如下所示：出勤：week_number, day, time, courseGroup_id, present

我希望能够查看属于一个班级的所有学生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:12:48.930

我对你的术语有点迷茫，你说的是“class id”，但在你的问题中不要冷淡——而是使用“course”。

我认为您可以在此处执行的最佳选择是创建另一个表，以启用多对多关系，因为可以将许多学生注册到一门或多门课程。这种类型的表将启用学生和课程之间的映射。

例如，如果您创建映射表“student_courses”

```
student_id INT
course_id INT 
```

然后您可以按课程选择学生（加入学生表）

```
SELECT * from student_courses sc
INNER JOIN students s
  ON s.student_id = sc.srudent_id
WHERE sc.course_id = ?CourseId 
```

您还可以将其反转并显示单个课程的课程：

```
SELECT * from student_courses sc
INNER JOIN courses cs
  ON cs.courset _id = sc.course_id
WHERE sc.student_id = ?StudentId 
```

还值得指出的是，student_courses 上应该有两个索引，出于性能原因，同时索引 student_id 和 course_id。

# python - python随机倾斜

> ID：15280566
> 
> 赞同：1
> 
> 时间：2013-03-07T19:58:57.413
> 
> 标签：python, random, skew

我正在尝试为生物模拟器创建一个非常简单的进化算法，我想要的是，两种生物都有一个特征和一个优势级别，两者都由整数记录。他们孩子的特质将是生物 A 的特质和生物 B 的特质之间的一个随机数，然后偏向更占优势的一方。因此，如果 A 具有 5 的特质和 2 的优势，而 B 具有 10 的特质和 7 的优势，他们的孩子更有可能拥有 8 的特质而不是 6。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:28:04.793

你可能不想要你所描述的那样，因为人口会收敛得太快。那是因为您要求的孩子总是*介于*父值之间。所以极端值会很快消失。

更有可能的是，您想要的是一个具有固定噪声量的数字，但以您描述的计算值为中心。这很容易做到——中心只是一个加权平均值。

例如，假设特征是 T1 和 T2，优势值是 D1 和 D2。孩子特征的中心值是 TC：

```
TC = (D1 * T1 + D2 * T2) / (D1 + D2) 
```

然后你会添加一些噪音，同样正面或负面，最后转换为整数。

[顺便说一句，只是为了说明上述内容是有道理的：您可以看到，如果优势相等，则 D1=D2 则上面变为

```
TC = (T1 + T2) / 2 
```

如您所料，这是平均值。如果 D1 比 D2 大得多，那么

```
TC ~ T1 
```

这也符合预期，因为那时 1 占主导地位 2。]

在蟒蛇中：

```
from random import uniform

delta = 2 # the amount of noise

def child(t1, d1, t2, d2):
    tc = float(d1 * t1 + d2 * t2) / float(d1 + d2)
    tc += uniform(-delta, delta)
    return int(0.5 + tc) # convert to int unbiased 
```

如果我用你作为例子的数字运行几次：

```
>>> child(5, 2, 10, 7)
7
>>> child(5, 2, 10, 7)
11
>>> child(5, 2, 10, 7)
8
>>> child(5, 2, 10, 7)
9 
```

看起来是对的。请注意，该值并不强制介于父值之间 - 在一种情况下它是 11 - 但正如预期的那样，它以 8 附近的某个位置为中心。

最后，`delta`随着种群的稳定，您可能会慢慢减少（一种模拟退火）。

# java - 如何删除括号内的字符串？

> ID：15280569
> 
> 赞同：-2
> 
> 时间：2013-03-07T19:59:06.943
> 
> 标签：java, regex, string, replace

我有单词列表，我必须删除括号内的字符串列表

```
day[1.0,264.0]
developers[1.0,264.0]
does[1.0,264.0]
employees[1.0,264.0]
ex[1.0,264.0]
experts[1.0,264.0]
fil[1.0,264.0]
from[1.0,264.0]
gr[1.0,264.0] 
```

我应该得到

```
day

developers

does
.
.
.
. 
```

这种方法正确吗？

```
String rep=day[1.0,264.0];  
String replaced=rep.replace("[","]","1.0","2"); 
```

或者

这种做法正确吗？

```
Pattern stopWords = Pattern.compile("\\b(?:i|[|]|1|2|3|...)\\b\\s*",Pattern.CASE_INSENSITIVE);    
Matcher matcher = stopWords.matcher("I would like to do a nice novel about nature AND people");    
String clean = matcher.replaceAll(""); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:05:12.663

一种比迄今为止其他建议的方法稍微简单的方法。

```
String s = "day[1.0,264.0]";
String ofInterest2 = s.substring(0, s.indexOf("[")); 
```

会给你输出

```
day 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:01:46.687

使用[**String#replaceAll(regex, repl)**](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

```
 String rep="day[1.0,264.0]";
 rep = rep.replaceAll("\\[.*]",""); 
```

正则表达式：`\\[.*]`作为`[`正则表达式世界中的特殊字符（元字符），您必须将其转义将反斜杠以将其视为文字。`.*`适用于 b/w '[anything here]' 中的任何内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:01:58.470

只需将它们替换为无

```
rep.replaceAll("\\[.*\\]", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T20:02:07.693

只需用“[”标记您的字符串并获取第一部分。

```
StringTokenizer st = new StringTokenizer(str, "[");
String part1 = st.nextToken(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T20:08:30.967

这也允许括号后的内容

```
 String rep="day[1.0,264.0]";
     int firstIndex = rep.indexOf('[');
     int secondIndex = rep.indexOf(']');
     String news = rep.substring(0, firstIndex) +    rep.substring(secondIndex+1,rep.length()); 
```

# c# - 加法后小数过多

> ID：15280571
> 
> 赞同：2
> 
> 时间：2013-03-07T19:59:08.973
> 
> 标签：c#

我想将 0.01 添加到 36.01 并得到 36.02 作为结果但下面的代码返回 36.019999999999994。

```
Double d = 36.01;
d = d + 0.01; 
```

谁能告诉我如何得到 36.02 作为结果？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T20:01:22.043

使用`Decimal`而不是`Double`. 十进制具有更高的准确性，例如，当您添加美元金额时，建议使用十进制。

这是一个很好的以前的 SO 帖子，它将为您提供更多详细信息：

[十进制与双倍！- 我应该使用哪一个以及何时使用？](https://stackoverflow.com/questions/1165761/decimal-vs-double-which-one-should-i-use-and-when)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:02:35.130

那是因为您正在添加浮点数。0.01 是十进制小数 1/100 ^(th)，在可用位数中不能以二进制精确表示。考虑使用类型，或根据您的需要使用适当的重载和舍入样式`decimal`舍入到所需的精度。`Math.Round()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T20:05:00.520

您应该`decimal`按照建议使用。更重要的是，您应该阅读[每个计算机科学家应该了解的关于浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)的知识，以了解潜在的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:01:44.947

`double`是双精度浮点数，`decimal`精度更高。

你应该使用`decimal`而不是。

```
decimal d = 36.01m;
d = d + 0.01m;
Console.WriteLine(d); 
```

这是一个**[演示](http://ideone.com/T18B5c)**。

当然，我建议您阅读 [`What Every Computer Scientist Should Know About Floating-Point Arithmetic`](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# powershell - 确定是否使用 CN（通过 powershell 2.0）安装了证书？

> ID：15280572
> 
> 赞同：4
> 
> 时间：2013-03-07T19:59:09.810
> 
> 标签：powershell, certificate

我有一个 PS 2.0 脚本，需要检查是否安装了一些证书。我试过这个，但它没有用......

```
if(Test-Path cert:\LocalMachine\My\mycert1.mydomain.com)
{Write-Host "cert is installed"} 
```

我可以为指纹做一个测试路径，但我想检查它是否以通用名称安装......？

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:02:53.617

像这样的东西对你有用吗？

```
[bool](dir cert:\LocalMachine\My\ | ? { $_.subject -like "cn=localho*" }) 
```

# vi - 全局替换字符串

> ID：15280576
> 
> 赞同：0
> 
> 时间：2013-03-07T19:59:12.620
> 
> 标签：vi

我想使用全局命令 'g' 来替换字符串，例如用 world 替换 hello 我执行命令：s/hello/world/g 我之前在 nvi 中使用过这个命令（现在我只有 vi）并且它有效. 然而，这一次，该命令仅在一行的单词上执行，而不是在整个文件中执行。

我正在使用 t 外壳。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:01:07.097

在 vi 中，将需要：

```
1,$s/hello/world/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:01:35.850

您可以在`vi`命令前加上 a`%`以在整个文件中进行搜索和替换。

`%s/hello/world/g`

显然要谨慎使用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:02:24.307

在常规`vi`中，您需要在命令前面加上前缀`%`才能对每一行进行操作：

```
:%s/hello/world/g 
```

请注意，这`%`相当于`1,$`SteveP 答案中的明确范围，以防您想知道有什么区别。

# python - 在 Python 中使用正则表达式进行标记化

> ID：15280577
> 
> 赞同：2
> 
> 时间：2013-03-07T19:59:12.723
> 
> 标签：python, regex, parsing, token, tokenize

我尝试将一个字符串标记`"spam bar ds<hai bye>sd baz eggs"`为一个列表`['spam', 'bar', 'ds<hai bye>sd', 'baz', 'eggs']`，即喜欢`str.split()`但保留里面的空格`< ... >`。

我的解决方案是使用`re.split`模式`(\S*<.*?>\S*)|\s+`。但是我得到以下信息：

```
>>> re.split('(\S*<.*?>\S*)|\s+', "spam bar ds<hai bye>sd baz eggs")
['spam', None, 'bar', None, '', 'ds<hai bye>sd', '', None, 'baz', None, 'eggs'] 
```

不确定那些`None`s 和空字符串来自哪里。当然，我可以使用 list comprehension 将它们过滤掉`[s for s in result if s]`，但在我知道原因之前我不习惯这样做。

那么，（1）为什么那些`None`s 和空字符串，（2）可以做得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:19:51.587

和`None`空字符串值是因为您在模式中使用了捕获括号，因此拆分包含匹配的文本 - 请参阅[官方文档](http://docs.python.org/2.7/library/re.html?highlight=re.split#re.split)以了解这一点。

如果您将模式修改为`r"((?:\S*<.*?>\S*)|\S+")`（即转义括号以使其不捕获并将空白更正为非空白）它应该可以工作，但只能通过保留定界符，然后您需要通过跳过替代项来过滤掉它。我认为你最好这样做：

```
ITEM_RE = re.compile(r"(?:\S*<.*?>\S*)|\S+")
ITEM_RE.findall("spam bar ds<hai bye>sd baz eggs") 
```

如果您不需要一个实际列表（即您一次只浏览一项），那么`finditer()`效率更高，因为它一次只产生一项。如果您可能在不查看整个列表的情况下退出，则尤其如此。

*原则*上也可能使用否定的后向断言，但实际上我认为创建一个足够灵活的断言是不可能的 - 我尝试`r"(?<!<[^>]*)\s+"`并得到错误“后向需要固定宽度模式”，所以我猜那是不可以。文档证实了这一点 - 后向断言（正面和负面）都需要固定宽度。

这种方法的问题在于，如果您期望嵌套尖括号 - 那么您将不会得到您期望的结果。例如，解析`ds<hai <bye> foo>sd`将产生`ds<hai <bye>`一个标记。我认为这是正则表达式无法解决的一类问题——你需要更接近正确解析器的东西。用纯 Python 编写一个一次遍历字符并计算括号嵌套级别的代码并不难，但这会很慢。取决于您是否可以确定您只会在输入中看到一层嵌套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:12:26.530

我得到了这个正则表达式：

```
ss = "spam bar ds<hai bye>sd baz eggs ZQ<boo <abv> foo>WX  "

reg = re.compile('(?:'
                     '\S*?'
                     '<'
                     '[^<>]*?'
                     '(?:<[^<>]*>[^<>]*)*'
                     '[^<>]*?'
                     '>'
                       ')?'
                 '\S+')

print reg.findall(ss) 
```

结果

```
['spam', 'bar', 'ds<hai bye>sd', 'baz', 'eggs',
 'ZQ<boo <abv> foo>WX'] 
```

### 编辑 1

在 Cartroo 的评论之后，一个更准确的新正则表达式：

```
import re

pat = ('(?<!\S)'  # absence of non-whitespace before

       '(?:'
           '[^\s<>]+'

           '|'  # OR

           '(?:[^\s<>]*)'
           '(?:'
               '<'
               '[^<>]*?'
               '(?:<[^<>]*?>[^<>]*)*'
               '[^<>]*?'
               '>'
               ')'
           '(?:[^\s<>]*)'
       ')'

       '(?!\S)' # absence of non-whitespace after)
       )
reg = re.compile(pat)

ss = ("spam i>j bar ds<hai bye>sd baz eggs Z<boo <abv>"
      " foo>W ttt <two<;>*<:> three> ")
print '%s\n' % ss
print reg.findall(ss)

ss = "a<b<E1>c>d <b<E2>c>d <b<E3>c> a<<E4>c>d <<E5>>d 
   <<E6>> <<>>"
print '\n\n%s\n' % ss
print reg.findall(ss) 
```

结果

```
spam i>j bar ds<hai bye>sd baz eggs Z<boo <abv> foo>W 
ttt <two<;>*<:> three> 

['spam', 'bar', 'ds<hai bye>sd', 'baz', 'eggs', 
 'Z<boo <abv> foo>W', 'ttt', '<two<;>*<:> three>']

a<b<E1>c>d <b<E2>c>d <b<E3>c> a<<E4>c>d <<E5>>d <<E6>> <<>>

['a<b<E1>c>d', '<b<E2>c>d', '<b<E3>c>', 'a<<E4>c>d', '<<E5>>d',
 '<<E6>>', '<<>>'] 
```

上述字符串形成良好，结果一致。
在格式不正确的文本上（关于括号），它可能会给出非预期的结果：

```
ss = """A<B<C>D  
 E<F<G>H 
I<J>K> 
 L<<M>N
   O<P>>Q
 R<<S>    T<<>"""
print '\n\n%s\n' % ss
print reg.findall(ss) 
```

结果

```
A<B<C>D  
 E<F<G>H 
I<J>K> 
 L<<M>N
   O<P>>Q
 R<<S>    T<<>

['E<F<G>H \nI<J>K>', 'L<<M>N\n   O<P>>Q'] 
```

那是因为末尾的星号`'(?:<[^<>]*?>[^<>]*)*'`。可以通过移除星号来关闭此行为。这种行为使得难以使用正则表达式来分析这种“复杂”的文本，正如 Crtaroo 所称的那样。

.

### 编辑 2

当我说结果是不想要的结果时`'E<F<G>H \nI<J>K>'`，`'L<<M>N\n O<P>>Q'`这并不意味着找到的匹配部分不尊重正则表达式的模式（怎么可能？），因为我制作了它；匹配部分形成良好，确实：
两个部分`<G>`，`<J>`位于两个支架之间`< <G> <J> >`
两个部分`<M>`，`<P>`位于两个支架之间`< <M> <P> >`

事实上，这是一种轻描淡写的说法，意味着找到的每个匹配部分都应该只延伸一行。但是，一旦轻描淡写地表达出来，就会出现一个可能的解决方案。
如果不需要在多行上延伸的匹配部分，很容易告诉正则表达式不匹配它们，这与我写的相反。`\n`在正则表达式模式的某些地方添加字符就足够了。

事实上，这意味着匹配部分不能越过一个`\n`字符，然后这个字符可以被认为是匹配部分的分隔符。因此，可能需要任何其他字符作为同一行上存在的匹配部分之间的分隔符，例如`#`在以下代码中。

.

正则表达式不能做饭或从学校接孩子，但它们非常强大。说正则表达式对格式错误的文本的行为是一个问题太短了：必须补充说这是文本的问题，而不是正则表达式。一个正则表达式做它被命令做的事情：吃掉给它的任何文本。它贪婪地吃掉它，也就是说，在没有验证任何一致性的情况下，这不是它的预期行为，如果它被喂食了不合饮食的文字，它是不负责任的。说正则表达式在格式错误的文本上的行为是一个问题，听起来好像有人会责备孩子有时会用威士忌和胡椒食品来滋养。

编码员有责任确保传递给正则表达式的文本格式正确。就像编码人员将验证片段放入代码中以确保条目是整数以便程序正确运行一样。

.

这一点与试图将标记文本**解析**为 XML 文本时滥用正则表达式不同。正则表达式无法**解析**这样的文本，好吧，因为不可能制作出能够对格式错误的标记文本做出正确反应的正则表达式。不尝试这样做也是编码人员的责任。这并不意味着如果该文本已经过验证，则
不得使用正则表达式来**分析标记文本。**
无论如何，如果文本格式错误太多，即使解析器也不会捕获数据。

我的意思是我们必须区分：

*   传递给正则表达式的文本的性质（格式错误/格式正确）

*   使用正则表达式时所追求目标的性质（解析/分析）

.

```
import re

ss = """
 A<:<11>:<12>:>
 fgh
 A<#:<33>:<34>:>
 A#<:<55>:<56>:>
 A<:<77>:<78> i<j>
 A<B<C>D #
 E<F<G>H #
 I<J>K> 
 L<<M>N 
 O<P>>Q  #
 R<<S>  T<<>"""
print '%s\n' % ss

pat = ('(?<!\S)'  # absence of non-whitespace before
           '(?:[^\s<>]*)'
           '(?:<'
               '[^<>]*?'
               '(?:<[^<>]*?>[^<>]*)*'
               '>)'
           '(?:[^\s<>]*)'
       '(?!\S)' # absence of non-whitespace after)
       )
reg = re.compile(pat)
print '------------------------------'
print '\n'.join(map(repr,reg.findall(ss)))

pat = ('(?<!\S)'  # absence of non-whitespace before
           '(?:[^\s<>]*)'
           '(?:<'
               '[^<>\n]*?'
               '(?:<[^<>\n]*?>[^<>\n]*)*'
               '>)'
           '(?:[^\s<>]*)'
       '(?!\S)' # absence of non-whitespace after)
       )
reg = re.compile(pat)
print '\n----------- with \\n -------------'
print '\n'.join(map(repr,reg.findall(ss)))

pat = ('(?<!\S)'  # absence of non-whitespace before
           '(?:[^\s<>]*)'
           '(?:<'
               '[^<>#]*?'
               '(?:<[^<>#]*?>[^<>#]*)*'
               '>)'
           '(?:[^\s<>]*)'
       '(?!\S)' # absence of non-whitespace after)
       )
reg = re.compile(pat)
print '\n------------- with # -----------'
print '\n'.join(map(repr,reg.findall(ss)))

pat = ('(?<!\S)'  # absence of non-whitespace before
           '(?:[^\s<>#]*)'
           '(?:<'
               '[^<>#]*?'
               '(?:<[^<>#]*?>[^<>#]*)*'
               '>)'
           '(?:[^\s<>]*)'
       '(?!\S)' # absence of non-whitespace after)
       )
reg = re.compile(pat)
print '\n------ with ^# everywhere -------'
print '\n'.join(map(repr,reg.findall(ss))) 
```

结果

```
 A<:<11>:<12>:>
 fgh
 A<#:<33>:<34>:>
 A#<:<55>:<56>:>
 A<:<77>:<78> i<j>
 A<B<C>D #
 E<F<G>H #
 I<J>K> 
 L<<M>N 
 O<P>>Q  #
 R<<S>  T<<>

------------------------------
'A<:<11>:<12>:>'
'A<#:<33>:<34>:>'
'A#<:<55>:<56>:>'
'i<j>'
'E<F<G>H #\n I<J>K>'
'L<<M>N \n O<P>>Q'

----------- with \n -------------
'A<:<11>:<12>:>'
'A<#:<33>:<34>:>'
'A#<:<55>:<56>:>'
'i<j>'

------------- with # -----------
'A<:<11>:<12>:>'
'A#<:<55>:<56>:>'
'i<j>'
'L<<M>N \n O<P>>Q'

------ with ^# everywhere -------
'A<:<11>:<12>:>'
'i<j>'
'L<<M>N \n O<P>>Q' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:24:29.127

我相信这些`None`值是由于`()`基于文档中的这一行的模式中存在 s ：

> 如果在模式中使用捕获括号，则模式中所有组的文本也作为结果列表的一部分返回

在您的输入上使用正则[表达式测试](http://regexpal.com)器也可能有助于可视化解析：http: //regexpal.com/?flags=g®ex=%28\S*%3C.*%3F%3E\S*%29|\s%2B&input =垃圾邮件%20bar%20ds%3Chai%20bye%3Esd%20baz%20eggs

# yahoo-api - Yahoo Answers API：为什么“start”参数有最大限制？

> ID：15280579
> 
> 赞同：2
> 
> 时间：2013-03-07T19:59:15.133
> 
> 标签：yahoo-api

根据这个[Yahoo Answer 的 API](http://developer.yahoo.com/answers/V1/questionSearch.html)，'start' 参数，它决定了你的查询可以在 Yahoo Answers 数据库中返回多远，被限制为 1000。这意味着，你最多可以获得 Yahoo 数据库的 1050 个答案.

有谁知道为什么存在这种限制以及是否有解决方法？

# java - 在我的 MainActivity.java 文件中将代码添加到哈希密码的位置

> ID：15280581
> 
> 赞同：1
> 
> 时间：2013-03-07T19:59:19.753
> 
> 标签：java, android, sqlite, md5

我必须创建一个`Activity`从用户那里获取用户名和密码的。然后它将 MD5 哈希应用于密码，最后查询本地数据库以返回“true”或“false”。

我从[博客](http://p-xr.com/android-snippet-making-a-md5-hash-from-a-string-in-java/)中获得了 MD5 代码片段。代码片段在 Eclipse 上显示以下错误：

标记的第 1 行：此行有多个标记

*   标记的语法错误，错误的构造
*   语法错误，插入“枚举标识符”以完成 EnumHeader
*   标记“字符串”的语法错误，@ 预期
*   标记“字符串”的语法错误，@ 预期

标记的第 2 行：标记上的语法错误，错误的构造

标记的第 3 行：标记上的语法错误，错误的构造

标记的第 4 行：此行有多个标记

*   令牌“catch”上的语法错误，需要标识符
*   令牌“}”上的语法错误，{ 应在此令牌之后

我对 java 和 Android 环境都非常陌生。请告诉我代码有什么问题以及我应该将 md5 散列函数的代码放在哪里以使我的活动正常工作。另外请指导我查询本地 SQLite 数据库并从那里返回所需的值。

```
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

private String md5(String in) {  //line 1
    MessageDigest digest;        //line 2
    try {                        //line 3
        digest = MessageDisgest.getInstance("MD5");
        digest.reset();
        digest.update(in.getBytes());
        byte[] a = digest.digest();
        int len = a.length;
        StringBuilder sb = new StringBuilder(len << 1);
        for(int i=0;i<len;i++) {
            sb.append(Character.forDigit((a[i] & 0xf0) >> 4, 16));
            sb.append(Character.forDigit(a[i] & 0x0f, 16));
        }
        return sb.toString();
    } catch (NoSuchAlgorithmException e) { e.printStackTrace();} //line 4
    return null;

}

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            EditText text = (EditText)findViewById(R.id.editText1);
            EditText text1 = (EditText)findViewById(R.id.editText2);
            String userid = text.getText().toString();
            String pass = text1.getText().toString();
        Toast.makeText(MainActivity.this,"Entered"+userid+"and password entered is"+pass,Toast.LENGTH_SHORT).show();
        }

    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:01:03.713

在 Java 中，所有方法都必须存在*于*类中。

```
public class MainActivity extends Activity {
    private String md5(String in) {
        // etc
    }

    // Rest of class
} 
```

* * *

> 我对 java 和 android 环境都非常陌生。

您会从阅读教程或介绍中发现很多好处，例如从语言作者那里[学习 Java 语言](http://docs.oracle.com/javase/tutorial/java/)。

# java - Jframe 中未显示两个 Jpanel

> ID：15280588
> 
> 赞同：0
> 
> 时间：2013-03-07T19:59:37.850
> 
> 标签：java, swing, jframe, jpanel

我不明白为什么`mediaPanel`并且`selectedMediaPanel`没有显示在`JFrame`. 是什么原因？

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Arrays;
import java.util.List;
import java.util.Vector;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.ListSelectionModel;

public class MediaSelectionGUI {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        new MediaSelectionGUI();

    }

    public MediaSelectionGUI(){

        final Situation situation = new Situation();

        JFrame guiFrame = new JFrame();

        //make sure the program exits when the frame closes
        guiFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        guiFrame.setTitle("Communications Support Tool version 0.1");
        guiFrame.setSize(1000,500);
        guiFrame.setLayout(new FlowLayout());

      //This will center the JFrame in the middle of the screen
        guiFrame.setLocationRelativeTo(null);

        Vector<Media> media_option = new Vector<Media>(Arrays.asList(new Media[]{Media.Chat,Media.E_mail,Media.Intranet,Media.Meeting,Media.Social_Media, Media.Telefon, Media.Video}));
        Vector<Media> selected_media_option = new Vector<Media>();

        Zweck[] zweck_option = {Zweck.Anweisung, Zweck.Austausch, Zweck.Informieren, Zweck.Koordination};
        Ort[] ort_option = {Ort.Gleicher_Ort, Ort.Unterschiedlicher_Ort, Ort.Andere_Zeitzone};
        Anzahl[] anzahl_option = {Anzahl.Zwei_Personen, Anzahl.Klein_Gruppe, Anzahl.Publikum};

      //Create the second JPanel. Add a JLabel and JList and
        final JPanel mediaPanel = new JPanel(null);
        JLabel mediaLabel = new JLabel("All Media:");
        final JList<Media> media = new JList<Media>(media_option);
        media.setLayoutOrientation(JList.HORIZONTAL_WRAP);
        media.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

        mediaPanel.add(mediaLabel);
        mediaPanel.add(media);
        mediaPanel.setVisible(true);

        final JPanel selectedMediaPanel = new JPanel(null);
        JLabel selectedmediaLabel = new JLabel("Selected Media:");
        final JList<Media> selected_media = new JList<Media>(selected_media_option);
        selected_media.setLayoutOrientation(JList.HORIZONTAL_WRAP);
        selected_media.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

        selectedMediaPanel.add(selectedmediaLabel);
        selectedMediaPanel.add(selected_media);
        selectedMediaPanel.setVisible(true);

        JButton select_button = new JButton("select");
        JButton deselect_button = new JButton("deselect");

        select_button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                // TODO Auto-generated method stub
                List<Media> selected_media_option = media.getSelectedValuesList();
                for (Media medium: selected_media_option){
                    selected_media.getSelectedValuesList().add(medium);
                }
            }
        });

        deselect_button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                // TODO Auto-generated method stub
                List<Media> selected_media_option = selected_media.getSelectedValuesList();
                for (Media medium: selected_media_option){
                    media.getSelectedValuesList().add(medium);
                }
            }
        });

        select_button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                // TODO Auto-generated method stub
                List<Media> selected_media_option = media.getSelectedValuesList();
                for (Media medium: selected_media_option){
                    situation.media_collection.add(medium);
                    System.out.println(medium);
                }
            }
        });

      // Zweck Panel
        final JPanel zweckPanel = new JPanel();
        JLabel zweckLabel = new JLabel("Zweck:");
        JComboBox<Zweck> zweck = new JComboBox<Zweck>(zweck_option);
        zweckPanel.add(zweckLabel);
        zweckPanel.add(zweck);

     // Ort Panel
        final JPanel ortPanel = new JPanel();
        JLabel ortLabel = new JLabel("Ort:");
        JComboBox<Ort> ort = new JComboBox<Ort>(ort_option);    
        ortPanel.add(ortLabel);
        ortPanel.add(ort);

     // Anzahl Panel
        final JPanel anzahlPanel = new JPanel();
        JLabel anzahlLabel = new JLabel("Anzahl:");
        JComboBox<Anzahl> anzahl = new JComboBox<Anzahl>(anzahl_option);
        ortPanel.add(anzahlLabel);
        ortPanel.add(anzahl);

        guiFrame.add(mediaPanel);
        guiFrame.add(select_button);
        guiFrame.add(deselect_button);
        guiFrame.add(selectedMediaPanel);
        guiFrame.add(zweckPanel);
        guiFrame.add(ortPanel);
        guiFrame.add(anzahlPanel);

        guiFrame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:22:15.467

您遇到问题的主要原因是您将两个具有空布局的面板添加到使用布局管理器的框架中。

框架布局管理器正在检查这些面板的首选尺寸，它们返回 0x0。因此，您的面板正在显示，它们的大小刚刚调整为 0x0

尝试为面板使用适当的布局管理器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:28:32.620

在 JPanel 构造函数中，您设置了一个空的 LayoutManager，那么组件将没有大小。

只需从 JPanel 构造函数中删除 null 即可。

# ios - ios UIkit 复制一个 UIControl

> ID：15280592
> 
> 赞同：0
> 
> 时间：2013-03-07T19:59:50.473
> 
> 标签：ios, uicontrol

是否有任何简单的方法可以将现有的 UI 控件属性从一个复制到另一个？就像是

```
*button1 = *button2; 
```

我知道上述方法行不通，但只是好奇。

是的，是的，我知道可以使用带有 UIControl 视图的 XIB 并以这种方式创建控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:08:13.150

虽然有一些方法可以复制视图层次结构，但它们很老套，应该避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T20:15:51.013

在大多数情况下，NSKeyedArchiver 和 NSKeyedUnarchiver 对我来说效果很好。不过，我从未尝试过克隆具有复杂结构的控件。

```
extension UIView {
    func deepCopy() -> UIView {

        let data = NSKeyedArchiver.archivedDataWithRootObject(self)
        let copy = NSKeyedUnarchiver.unarchiveObjectWithData(data)!  as! UIView

        return copy
    }
} 
```

# c++ - 找到最小的并发计数器

> ID：15280595
> 
> 赞同：0
> 
> 时间：2013-03-07T20:00:04.353
> 
> 标签：c++, concurrency, thread-safety

我有几个计数器通过并发线程不断增加（从不减少）。每个线程负责一个计数器。有时，其中一个线程需要找到所有计数器中的最小值。我通过对所有计数器的简单迭代来做到这一点并选择最小值。我需要确保这个最小值不大于任何计数器。目前，我不使用任何并发机制。我是否有可能得到错误的答案（即，最终得到的最小值大于计数器之一）。该代码大部分时间都有效，但偶尔（不到 0.1% 的时间），它会通过找到大于计数器之一的最小值而中断。我使用 C++ 代码，代码看起来像这样。

```
unsigned long int counters[NUM_COUNTERS];
void* WorkerThread(void* arg) {
  int i_counter = *((int*) arg);
  // DO some work
  counters[i_counter]++;
  occasionally {
    unsigned long int min = counters[i_counter];
    for (int i = 0; i < NUM_COUNTERS; i++) {
      if (counters[i] < min)
        min = counters[i];
    }
    // The minimum is now stored in min
  }
} 
```

更新：采用@JerryCoffin 建议的修复后，代码如下所示

```
unsigned long int counters[NUM_COUNTERS];
void* WorkerThread(void* arg) {
  int i_counter = *((int*) arg);
  // DO some work
  counters[i_counter]++;
  occasionally {
    unsigned long int min = counters[i_counter];
    for (int i = 0; i < NUM_COUNTERS; i++) {
      unsigned long int counter_i = counters[i];
      if (counter_i < min)
        min = counter_i;
    }
    // The minimum is now stored in min
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:06:35.010

是的，它坏了——它有一个竞争条件。

换句话说，当您选择最小值时，它无疑比您看到的任何其他值都要小——但是如果在您进行比较后其他线程将其递增，那么在您尝试时它最终可能会大于其他某个计数器使用它。

```
 if (counters[i] < min)
        // could change between the comparison above and the assignment below
        min = counters[i]; 
```

比较和保存值之间相对较短的间隔解释了为什么您得到的答案在*大多数情况下都是正确的——只有在比较之后立即发生上下文切换**并且*其他线程经常递增该计数器时才会出错在控制切换回来之前，它已经不再是最小的计数器了。

# iphone - CSS div 按钮在 Iphone 或 Ipad 上不起作用

> ID：15280596
> 
> 赞同：2
> 
> 时间：2013-03-07T20:00:07.610
> 
> 标签：iphone, css, ipad, button, media-queries

我正在为我的学校开发一个 web 基础应用程序，其中包含适用于手持设备、平板电脑和台式机的不同版本的 CSS。我正在为此使用媒体查询。该应用程序几乎完成，它几乎可以在所有浏览器和安卓系统上正常运行。该应用程序在 Iphone/Ipad 上看起来很棒，但是按钮不起作用，使该应用程序在这些设备中无用。

这就是我所拥有的：

```
//Source code

<div id="signinbutton" class="blue_button">Sign In</div>

//desktop.CSS

.blue_button {
    width: 130px;
    height: auto;
    padding: 8px;
    margin: 0% auto 20% auto;
    background-image:url(../../images/bluebar5.png);
    color: #FFF;
    text-align: center;
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 14pt;
    font-weight: bolder;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    cursor: default;
    }
.blue_button:hover {
    opacity: 0.7;
}

//Handheld.css (this overwrites css on desktop)

.blue_button {
    width: 260px;
    font-size: 18pt;
    background-image:url(../../images/bluebar6.png);
} 
```

我尝试将样式应用于#signinbutton，但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T20:13:23.083

您应该使用`<button>`or`<input type="button">`标记而不是 div。虽然`<div>`按钮功能可能在某些浏览器中工作，但与传统的按钮标签相比，它可能有点小技巧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T16:04:42.687

你可以像这样包裹你的div `<a>`。现在对 html5 完全有效。

```
<a href="#"><div id="signinbutton" class="blue_button">Sign In</div></a> 
```

您只需要调整参考： [https ://css-tricks.com/snippets/jquery/make-entire-div-clickable/](https://css-tricks.com/snippets/jquery/make-entire-div-clickable/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-08T15:23:44.623

尝试添加到`div {cursor:pointer}`.

# c# - Windows 8 Metro 应用程序文件共享访问

> ID：15280599
> 
> 赞同：5
> 
> 时间：2013-03-07T20:00:21.370
> 
> 标签：c#, windows-8, microsoft-metro

我正在开发一个 Windows 8 Metro 应用程序，我们打算将它部署到我们公司内的几台平板电脑上。它不适用于 Windows 应用商店。

我们需要应用程序访问公司网络共享上的一些目录，但强制用户使用 a`FilePicker`不是我们想要的。

我们的第一次尝试是使用`await StorageFolder.GetFolderFromPathAsync("J:\\");`. 这不起作用，并产生了以下异常：

> mscorlib.dll 中出现“System.UnauthorizedAccessException”类型的未处理异常
> 
> WinRT 信息：无法访问指定的文件或文件夹 (J:\)。该项目不在应用程序有权访问的位置（包括应用程序数据文件夹、可通过功能访问的文件夹以及 StorageApplicationPermissions 列表中的持久项目）。验证该文件未标记系统或隐藏文件属性。
> 
> 附加信息：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

所以我们尝试用`"J:\"`驱动器映射到的网络路径替换。这也不起作用，我们得到了这个异常：

> mscorlib.dll 中出现“System.UnauthorizedAccessException”类型的未处理异常
> 
> WinRT 信息：无法访问指定的文件 (\\domain\path\JDrive)。验证是否在清单中为此类文件声明了文件类型关联，并且该文件未使用系统或隐藏文件属性进行标记。
> 
> 附加信息：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

我们的应用程序具有以下功能：

*   企业认证
*   互联网（客户端）
*   专用网络（客户端和服务器）

我们的应用没有声明

这对于 Windows 应用商店应用程序来说是非常合理的，但是对于不进入应用商店的简单内部应用程序是否有任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:26:17.603

这是[JavaScript](http://msdn.microsoft.com/en-us/library/windows/apps/jj150596.aspx)和[VB/C#/C++](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/JJ150593(v=win.10).aspx)中文件访问的快速入门。

此外，这篇关于[Windows 应用商店应用程序中的文件访问和权限的](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)文章可能会有用。从这篇文章来看，您似乎使用了正确的功能，但有一个注意事项：

> 注意：您必须将文件类型关联添加到您的应用清单，以声明您的应用可以在此位置访问的特定文件类型。

这对您看到的错误消息很有意义。你能试试吗？这是一篇关于如何做到这一点的文章：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh452684.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452684.aspx)

我还假设您已经检查并确保您要访问的文件没有标记系统或隐藏文件属性（根据错误消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:17:01.070

我们目前正在通过`WCF Web Service`. 它远非理想，但它为我们提供了我们需要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T12:00:37.293

下面是管理从运行 Windows 8.1 RT 的 WinRT 设备 (Microsoft Surface RT) 将文件写入网络共享的代码。基本的位是：

*   使用 UNC 路径访问共享
*   共享是公开的
*   应用程序清单提到了写入的文件类型
*   应用程序具有适当的功能

这里描述了基本机制：http: [//msdn.microsoft.com/en-US/library/windows/apps/hh967755.aspx](http://msdn.microsoft.com/en-US/library/windows/apps/hh967755.aspx)

作为奖励，这显示了如何在 WinRT 应用程序中将输出捕获到标准输出。

编码：

```
#include "App.xaml.h"
#include "MainPage.xaml.h"
#include <ppltasks.h>

using namespace TestApp;

using namespace Platform;
using namespace Windows::UI::Xaml::Navigation;
using namespace Concurrency;

// Anything that is written to standard output in this function will be saved to a file on a network share
int MAIN(int argc, char** argv)
{
    printf("This is log output that is saved to a file on a network share!\n");
    return 0;
}

static char buffer[1024*1024];

Windows::Foundation::IAsyncOperation<int>^ MainPage::RunAsync()
{
    return create_async([this]()->int {
        return MAIN(1, NULL);
    });
}

using namespace concurrency;
using namespace Platform;
using namespace Windows::Storage;
using namespace Windows::System;

void MainPage::Run()
{
    //capture stdout in buffer
    setvbuf(stdout, buffer, _IOFBF, sizeof(buffer));

    task<int> testTask(RunAsync());

    testTask.then([this](int test_result)
    {
        size_t origsize = strlen(buffer) + 1;
        wchar_t* wcstring = new wchar_t[sizeof(buffer)* sizeof(wchar_t)];

        size_t  converted_chars = 0;
        mbstowcs_s(&converted_chars, wcstring, origsize, buffer, _TRUNCATE);
        String^ contents = ref new Platform::String(wcstring);
        delete [] wcstring;

        Platform::String^ Filename = "log_file.txt";
        Platform::String^ FolderName = "\\\\MY-SHARE\\shared-folder";

        create_task(Windows::Storage::StorageFolder::GetFolderFromPathAsync(FolderName)).then([this, Filename, contents](StorageFolder^ folder)
        {
            create_task(folder->CreateFileAsync(Filename, CreationCollisionOption::ReplaceExisting)).then([this, contents](StorageFile^ file)
            {
                create_task(FileIO::WriteTextAsync(file, contents)).then([this, file, contents](task<void> task)
                {
                    try
                    {
                        task.get();
                        OutputBox->Text = ref new Platform::String(L"File written successfully!");
                    }
                    catch (COMException^ ex)
                    {
                        OutputBox->Text = ref new Platform::String(L"Error writing file!");
                    }
                });
            });
        });
    });
}

MainPage::MainPage()
{
    InitializeComponent();
    Run();
} 
```

清单：

```
<?xml version="1.0" encoding="utf-8"?>
<Package xmlns="http://schemas.microsoft.com/appx/2010/manifest" xmlns:m2="http://schemas.microsoft.com/appx/2013/manifest">
  <Identity Name="6f9dc943-75a5-4195-8a7f-9268fda4e548" Publisher="CN=Someone" Version="1.1.0.1" />
  <Properties>
    <DisplayName>TestApp</DisplayName>
    <PublisherDisplayName>Someone</PublisherDisplayName>
    <Logo>Assets\StoreLogo.png</Logo>
    <Description>TestApp</Description>
  </Properties>
  <Prerequisites>
    <OSMinVersion>6.3</OSMinVersion>
    <OSMaxVersionTested>6.3</OSMaxVersionTested>
  </Prerequisites>
  <Resources>
    <Resource Language="x-generate" />
  </Resources>
  <Applications>
    <Application Id="App" Executable="$targetnametoken$.exe" EntryPoint="TestApp.App">
      <m2:VisualElements DisplayName="TestApp" Description="TestApp" BackgroundColor="#222222" ForegroundText="light" Square150x150Logo="Assets\Logo.png" Square30x30Logo="Assets\SmallLogo.png">
        <m2:DefaultTile>
          <m2:ShowNameOnTiles>
            <m2:ShowOn Tile="square150x150Logo" />
          </m2:ShowNameOnTiles>
        </m2:DefaultTile>
        <m2:SplashScreen Image="Assets\SplashScreen.png" />
      </m2:VisualElements>
      <Extensions>
        <Extension Category="windows.fileTypeAssociation">
          <FileTypeAssociation Name="text">
            <DisplayName>Text file</DisplayName>
            <SupportedFileTypes>
              <FileType ContentType="text/plain">.txt</FileType>
            </SupportedFileTypes>
          </FileTypeAssociation>
        </Extension>
      </Extensions>
    </Application>
  </Applications>
  <Capabilities>
    <Capability Name="musicLibrary" />
    <Capability Name="picturesLibrary" />
    <Capability Name="videosLibrary" />
    <Capability Name="internetClient" />
    <Capability Name="internetClientServer" />
    <Capability Name="enterpriseAuthentication" />
    <Capability Name="privateNetworkClientServer" />
  </Capabilities>
</Package> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T06:03:00.487

看看这个问题：[Accessing Network shared paths in WinRT](https://stackoverflow.com/questions/15705334/accessing-network-shared-paths-in-winrt)

无法访问 Win8 App 中的共享位置。

# java - 防止失去对 JList 刷新的关注

> ID：15280600
> 
> 赞同：0
> 
> 时间：2013-03-07T20:00:25.363
> 
> 标签：java, multithreading, swing

感谢您查看我的问题。我会尽量让它清晰和简洁。

## 该程序

* * *

好的，所以我已经实现了一个聊天程序。该聊天程序的部分功能是在线用户列表。此列表每 10 秒更新一次。这是我遇到问题的程序部分。每隔 10 秒，我的服务器将以一个 CSV 字符串向每个客户端发送一个包含所有在线用户的数据包。客户端成功解析数据包，并将每个名称加载到 ListView 中。所有这些事情都完全按照我想要的方式工作。

## 问题

* * *

当列表刷新时，所有焦点都丢失了。我想这是因为列表中的所有项目都被替换了，但我正在努力想办法解决它。之所以重要，是因为用户要向另一个用户发送消息，他们必须单击列表中的名称，然后发送消息。显然，如果它不断刷新它会使使用聊天程序非常烦人！

字符串填充此字段：

`private DefaultListModel<String> usersList;`

使用以下代码绑定到 ListView：

`this.list = new JList(this.usersList);`

并由来自服务器的数据更新，使用以下方法：

```
 public void setOnlineUsersList()
 {
    String[] onlineUsers = this.c.getOnlineUsers();
    // Request the client to query the server for online users. Execution waits until a  response is recieved.
    if (this.usersList.size() > 0) {
        // Ensure there are users online.
        this.usersList.clear();
        // Clear the users from the list, if they need to be replaced.
    }

    for (String s : onlineUsers)
    {
        // Add each username to the DefaultListModel, which updates the ListView.
        this.usersList.addElement(s);
    }
} 
```

**在线用户列表刷新前 在线用户列表刷新** **后**[![刷新前](../Images/4fe2ab7517788a6e21d9f3dab17be3c8.png)](https://i.stack.imgur.com/112kP.png) ** [![刷新后](../Images/de3be88060489878e85a2313bfc32366.png)](https://i.stack.imgur.com/cqVQ4.png)**

 **## 问题

* * *

你们能给我提供任何方法，让客户端可以从“在线列表”中选择另一个用户，当列表刷新时，ListItem 会记住它的焦点，这样客户端就不必一直点击用户？我不是在这里寻找代码，也不是通过任何想象来快速修复。我只是想了几天，现在我被困住了，所以非常感谢任何帮助。

在此先感谢，克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:04:57.680

您可以简单地不删除所有条目，而是遍历每个名​​称的整个列表并查看它是否已经存在，在这种情况下您添加它。这应该保持对拥有它的项目的关注。

或者，您可以在 上放置一个侦听`JList`器，并存储选中的项目，然后在刷新后手动将其设置为选中。**

# python - 根据 Python 中单独列表中键的顺序，按键对字典列表进行排序

> ID：15280603
> 
> 赞同：2
> 
> 时间：2013-03-07T20:00:43.510
> 
> 标签：python, sorting, dictionary

我有一个看起来像这样的字典列表：

```
[
    {
        "format": "format1",
        "code": "tr"
    },
    {
        "format": "format2",
        "code": "hc"
    },
    {
        "format": "format3",
        "code": "bx"
    },
    {
        "format": "format4",
        "code": "mm"
    },
    {
        "format": "format5",
        "code": "el"
    }
] 
```

我需要根据代码键的值来排序这个列表，但是代码的顺序是由一个单独的列表决定的：

```
code_order = ["mm", "hc", "el", "tr", "bx"] 
```

所以最终的列表应该是这样的：

```
[
    {
        "format": "format4",
        "code": "mm"
    },
    {
        "format": "format2",
        "code": "hc"
    },
    {
        "format": "format5",
        "code": "el"
    },
    {
        "format": "format1",
        "code": "tr"
    },
    {
        "format": "format3",
        "code": "bx"
    }
] 
```

有人对如何实现这一目标有任何建议吗？我很难弄清楚如何进行这种排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:06:33.573

Python 2.7+：

```
lookup = {s: i for i, s in enumerate(code_order)}
print(sorted(l, key=lambda o: lookup[o['code']])) 
```

年长者：

```
lookup = dict((s, i) for i, s in enumerate(code_order))
print sorted(l, key=lambda o: lookup[o['code']]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:03:15.663

如果`l`是您的听写列表，那么

```
sorted(l, key=lambda d: code_order.index(d['code'])) 
```

应该做的伎俩。读作：

> `key``code`是在给定 dict中查找的函数`d`，然后检查该代码在 中的索引`code_order`，因此最终排序是按这些索引。

（如果`code_order`变得非常大，那么请记住，这`list.index`需要线性时间，所以你最好用 dict 替换它。但对于这个简短的`code_order`，它应该没关系。）

# facebook - 您可以通过 facebook 图形 api 对页面帖子进行门控和定位吗？

> ID：15280604
> 
> 赞同：5
> 
> 时间：2013-03-07T20:00:46.363
> 
> 标签：facebook, facebook-graph-api, facebook-page, targeting

在主页的隐私设置中启用帖子隐私门控允许创建具有单独门控和定位的帖子。使能够： ![](../Images/bfceb2c9a27cdc76c2f7f40a321e93ea.png)

邮政：

[![](../Images/66c7f063de25fa4c317787aa9bcccb24.png)](https://i.stack.imgur.com/eCVcz.png)

现在，我已经能够通过[在文档中](https://developers.facebook.com/docs/graph-api/reference/page#targeting)指定参数 feed_targeting 来获得新闻提要定位以通过 api 工作。

但是，文档中只提到了一次门控：

> # 门控与定位
> 
> 目前，限制帖子仅限于语言和国家/地区。这与新闻提要定位不同，因为针对某种语言或国家/地区的封闭式帖子不会向超出门控标准的用户显示。使用定位，帖子将在主页上可见，并且仅对主页的定位部分中的人可见。如果用户分享帖子，则用户的朋友将能够看到该帖子，即使他们不在目标设置范围内。

是否可以通过 API 设置门控？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:25:18.937

# 有可能的！

1.  确保为页面打开门控![门](../Images/bfceb2c9a27cdc76c2f7f40a321e93ea.png)

2.  确保您使用**页面令牌**而不是用户令牌。

3.  然后，当您使用 api 创建您的帖子时，目标参数将执行门控，而 feed_targeting 参数将执行新闻提要目标。

注意：门控仅适用于语言和国家。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-19T13:47:38.003

有人可以为地区和国家/地区发布一些示例代码吗？虽然这个功能太强大了，但api和网络整体真的什么都没有！

对我有用的代码示例：

```
 curl -F 'access_token=[page_access_token]' 
         -F 'message=Testing post to certain language' 
         -F 'link=http://stackoverflow.com/questions/15280604/can-you-gate-and-target-a-page-post-through-the-facebook-graph-api' 
         -F 'feed_targeting={'locales':[1001]}' 
    https://graph.facebook.com/[pageID]/feed 
```

要获取语言编号：

```
 curl -G -d "access_token=xx" -d"q=en"  
            -d "type=adlocale" 
    https://graph.facebook.com/search 
```

[ads api](https://developers.facebook.com/docs/reference/ads-api/targeting-specs/) doc中的 Targeting 提供了一些帮助，但只有一些字段可以用于发布定位。

[通过 curl](https://developers.facebook.com/docs/reference/ads-api/get-autocomplete-data/)获取语言环境、城市、... 代码 图搜索

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T16:23:19.417

在您的代码中，添加参数时使用“targeting”而不是“feed_targeting”，这对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T17:09:50.723

我已经制作了我检查过的目标脚本：在脚本上发布隐私门控使用页面访问令牌将参数传递给 feed_targeting

但是 Facebook 页面上的脚本帖子只是公开的。我可以做什么 ？

# ruby-on-rails-3 - 使用 rails 3 将来自 post 请求的编码字符串作为编码字符串上传到 S3

> ID：15280605
> 
> 赞同：0
> 
> 时间：2013-03-07T20:00:49.737
> 
> 标签：ruby-on-rails-3, rest, amazon-s3, paperclip, decode

我有一个名为 Picture 的模型，上面有一个附件。我正在使用的软件：

```
*Rails 3
*Ruby 1.9.3
*Paperclip
*ImageMagick 
```

我的模型是：

```
class Picture < ActiveRecord::Base
    attr_accessible :picturefile,:picturefile_file_name,:picturefile_content_type,:picturefile_file_size,:picturefile_updated_at
    has_attached_file :picturefile,
    :styles => {
        :thumb=> "100x100#"},
        :storage => :s3,
        :s3_credentials => Rails.root.join('config','s3.yml'),
        :path => "/travels/:style/:id/:basename.:extension"
end 
```

在我的控制器中，我有这个：

```
StringIO.open(Base64.decode64(params[:Route][:CoverPicture][:File][:EncodedContent])) do |data|
fotocov_t=Picture.create({
  :picturefile=>data
})
travel.pictures = [fotocov_t] #this assigns the new picture to a travel i created before the picture
end 
```

可以看出我正在上传一个字符串，但我要上传的是由编码字符串在

```
params[:Route][:CoverPicture][:File][:EncodedContent] 
```

我尝试了多种方法，但一直保存一个文本文件。

有谁知道我如何将文件作为图像上传而不是上传文本文件？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:19:04.050

找到了 ：）

```
bytes = Base64.decode64(params[:Route][:CoverPicture][:File][:EncodedContent])
img   = Magick::Image.from_blob(bytes).first 
```

关于创纪录：

```
:picturefile=>img 
```

需要 rmagick。现在我遇到了另一个问题，没有处理程序...

但将搜索和上传信息:)

# c++ - C ++中的Gnome N-ary Trees用法

> ID：15280614
> 
> 赞同：0
> 
> 时间：2013-03-07T20:01:15.570
> 
> 标签：c++, tree, glib, n-ary-tree

我正在尝试使用 glib 在 c++ 中实现 N-ary Tree，但由于我不是 c++ 专家，因此在找出如何正确使用它时遇到了一些问题。有没有人有一个用 C++ 编写的简单示例来帮助我理解如何使用基本功能？我在使用 g_node_traverse 时遇到了特殊问题，我就是无法正确使用 GNodeTraverseFunc。

你可以在这里找到 N-ary Tree 的描述：http: [//developer.gnome.org/glib/stable/glib-N-ary-Trees.html](http://developer.gnome.org/glib/stable/glib-N-ary-Trees.html)

我在 c 中找到了一些示例，但在这里我无法将它们正确翻译成 c++：

[http://www.ibm.com/developerworks/linux/tutorials/l-glib/section7.html](http://www.ibm.com/developerworks/linux/tutorials/l-glib/section7.html)

尝试使用 n 叉树的最后一段代码。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:22:04.217

* * *

好吧，我已经设法运行了一些代码。问题基本上是所需的强制转换，因为 Gnome 使用 gpointers，而我的数据将存储在结构中。所以我的代码是：

```
 gboolean iter(GNode* n, gpointer data) {
     node s=*(node *)(n->data);
     int ID=g_node_depth(n);

     if (G_NODE_IS_ROOT(n)==true)
     {
         std::cout<<"Node "<<ID<<" is a Root"<<std::endl;
     }
     else if (G_NODE_IS_LEAF(n)==true)
     {
         std::cout<<"Node "<<ID<<" is a Leaf"<<std::endl;
     }

     std::cout<<"Speed of Node "<<ID<<" is: "<<s.v<<std::endl;
     return FALSE;
    }

    int main(){

        node prueba,prueba1;
        prueba.phi=0; 
        prueba.v=1;   
        prueba.x=50;  
        prueba.y=100; //Position in y

        prueba1.phi=90;
        prueba1.v=6;
        prueba1.x=30;
        prueba1.y=90;

        GNode * root = g_node_new((gpointer) &prueba);
        g_node_append(root, g_node_new((gpointer) &prueba1));

        g_node_traverse(root, G_PRE_ORDER, G_TRAVERSE_ALL, -1, iter, NULL);

     return 0;

    } 
```

我的结构在哪里：

```
 struct state {
        double x;    //Position in x of a car
        double y;    //Position in y "
        double phi; //Yaw angle of a car
        double v;   //Speed of a car
    };

    struct node {
        double x;
        double y;
        double phi;
        double v;
        std::vector <state > trajectory;
    }; 
```

这个想法是将整个先前的“轨迹”存储在每个节点上，所以如果我选择一个随机节点/叶子，我不必重建轨迹，只需采用它即可。

这段代码现在有效。它可能会得到改进，我愿意接受任何评论。

我希望它对某人有用。

# c# - Async DbContext.SaveChanges EF 5，返回响应后保存更改（MVC/WebAPI）

> ID：15280634
> 
> 赞同：1
> 
> 时间：2013-03-07T20:02:02.920
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-web-api

我想在支付保存对 DbContext 的更改的成本之前将响应返回给客户端。我可以在返回响应后保存更改吗？由于上下文已被释放，简单地将其放入 ThreadPool.QueueUserWorkItem 会失败。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:39:17.567

在这种情况下，您处理 DbContext 时的逻辑太复杂而无法使用`using`块；您需要手动处理。您的代码可能看起来更像：

```
DbContext context = null;
try
{
    context = new DbContext();
    var query = context.GetStuff();

    ThreadPool.QueueUserWorkItem(_ =>
    {
        try
        {
            context.SaveChanges();
        }
        finally
        {
            context.Dispose();
        }
    });
}
catch
{
    //dispose of the context only if there was an exception, as it 
    //meant we weren't able to get into the async task and dispose of it there
    if (context != null)
        context.Dispose();

    throw;
} 
```

# javascript - 如何在谷歌地图上检查坐标对（纬度和经度）是否靠近主干道或高速公路？

> ID：15280635
> 
> 赞同：0
> 
> 时间：2013-03-07T20:02:04.573
> 
> 标签：javascript, google-maps, latitude-longitude

“接近”是指100m。有没有办法做到这一点？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:13:22.150

使用您的点作为起点和终点调用[DirectionsService 。](https://developers.google.com/maps/documentation/javascript/directions)这将返回最近道路的位置。

计算从该点到原始点的距离（使用[几何库球面](https://developers.google.com/maps/documentation/javascript/reference#spherical)方法 computeDistanceBetween）。

您可能还需要对方向服务的结果进行反向地理编码，以查看它是什么“类型”的道路，如果它*必须*是主干道或高速公路，但您没有很多选择，您只是得到最近的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T11:27:26.623

看看这个：

[http://gmaps-utility-library-dev.googlecode.com/svn/trunk/routeboxer/docs/examples.html](http://gmaps-utility-library-dev.googlecode.com/svn/trunk/routeboxer/docs/examples.html)

RouteBoxer 类生成一组 LatLngBounds 对象，这些对象保证覆盖路径指定距离内的每个点，例如 GDirections 类为路线生成的对象。此类的主要用例是支持针对支持边界框查询的空间数据库沿路线实现搜索。

# javascript - 按下按键时使用 jQuery 使文本框失焦

> ID：15280640
> 
> 赞同：1
> 
> 时间：2013-03-07T20:02:14.290
> 
> 标签：javascript, jquery

我有一个文本框，当您在文本框外单击时会显示警报。如果用户按 Enter，我也尝试显示警报。这是我所拥有的：

```
<input id="txtInput" type="text" onblur="alert('Hello');" />

<script type="text/javascript">
    $(document).ready(function () {
    $("#txtInput").keyup(function (event) {
        if (event.keyCode == 13) {
            $(this).blur();
            return false;
        }
    });
}); 
```

如果我在文本框内部单击然后在其外部单击，则警报会正确显示。

但是，如果我在文本框内并按 Enter，它会显示警报 - 当我关闭警报时，会显示另一个警报（我假设是因为在文本框上调用了 onblur）。

为什么不调用`$(this).blur()`从文本框中删除焦点？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:19:37.620

为什么会这样，我不能告诉你，但是如果你`onblur`从 HTML 中删除事件并将其放入你的 js 中，它就会起作用。

[http://jsfiddle.net/ERdaa/4/](http://jsfiddle.net/ERdaa/4/)

```
$("#txtInput").keyup(function (event) {
    if (event.keyCode == 13) {
        $(this).blur();
        return false;
    }
}).blur(function(){
     alert('Hello');
}); 
```

[编辑] 清理代码以使用链接而不是两次使用选择器。

# rest - REST：如何管理“不在”查询

> ID：15280641
> 
> 赞同：0
> 
> 时间：2013-03-07T20:02:21.713
> 
> 标签：rest

假设我有一个带有团队和玩家的 RESTful api，多对多关系。

我可以通过以下方式获得特定球队的球员：

```
GET /api/team/{team_id}/players 
```

我想做一些更复杂的查询，但我不知道哪个是 uri 设计的最佳实践。

具体来说，我想：

1.  获取不属于任何团队的玩家。
2.  获取不属于特定团队的球员。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:54:56.243

如果球队和球员有多对多的关系，我个人不会使用这种 uri 设计。如果一名球员可以为多支球队效力，那么你最终会得到不是唯一的球员 uri。例如，假设某个特定球员同时为第 5 队和第 6 队效力，他们可能由以下两个 uri 表示（假设球队和球员都有数字 id）

```
/api/team/5/players/4
/api/team/6/players/4 
```

相反，我会稍微移动一下，你可以用这个 uri 代表玩家：

```
/api/players/4 
```

每个团队都有这些 uris（为了一致性而复数）

```
/api/teams/5
/api/teams/6 
```

然后你可以像这样搜索团队成员

```
/api/players?team=5 
```

NOT IN 查询可以解释，但您可以使用类似于 django 模型过滤器的工作方式并沿这些行引入后缀查询参数：

```
/api/players?team_ne=5 
```

对于不属于任何球队的球员，你有几个选择

```
/api/players?team=
/api/players?team=none 
```

也许其中的第二个不那么模棱两可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:06:35.070

路由语法如

```
/api/team/{team_id}/players 
```

始终需要定义的 team_id。

使用 GET 参数来过滤这个属性。

# grails - 从 Grails 1.3.9 升级到 Grails 2.2.1 会在域类中产生错误

> ID：15280642
> 
> 赞同：0
> 
> 时间：2013-03-07T20:02:22.253
> 
> 标签：grails, grails-orm

我正在将应用程序从 Grails 1.3.9 升级到 Grails 2.2.1。当我发出 run-app 命令时，我得到一个很长的堆栈跟踪，它以这个错误开头，然后或多或少地重复了大约 400 行：

```
2013-03-07 13:32:11.364 ERROR [            StackTrace] Full Stack Trace:
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.hibernate.MappingException: property [sponsoringManager] not found on entity [com.mycompany.myapp.ManagerDelegate]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:713)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:457)
    at org.codehaus.groovy.grails.commons.spring.DefaultRuntimeSpringConfiguration.getApplicationContext(DefaultRuntimeSpringConfiguration.java:153)
    at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:170)
    at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:127)
    at org.codehaus.groovy.grails.web.context.GrailsConfigUtils.configureWebApplicationContext(GrailsConfigUtils.java:121)
    at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:107)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我认为相关的部分是：

```
org.hibernate.MappingException: property [sponsoringManager] not found on entity [com.mycompany.myapp.ManagerDelegate] 
```

这是 ManagerDelegate 域类的代码，它是一个多对多连接类：

```
package com.mycompany.myapp

class ManagerDelegate extends Base implements Serializable {

    static belongsTo = [sponsoringManager:User, delegate:User]

    boolean equals(other) {
        if (!(other instanceof ManagerDelegate)) {
            return false
        }
        other.sponsoringManager.id == sponsoringManager.id && other.delegate.id == delegate.id
    }

    static mapping = {
        id composite: [
            'sponsoringManager',
            'delegate'
        ]
        version false
    }
} 
```

如您所见，ManagerDelegate 确实包含在 belongsTo 语句中声明的赞助管理器属性。这在 Grails 1.3.9 中完美运行。

这是用户类：

```
class User {
    static hasMany = [sponsoringManagers: ManagerDelegate, delegates: ManagerDelegate]
    static mappedBy = [sponsoringManagers: "delegate", delegates: "sponsoringManager"]

    static mapping = {
        id generator: 'uuid'
        sponsoringManagers cascade: 'all-delete-orphan'
        delegates cascade: 'all-delete-orphan'
    }

    ...

} 
```

当我尝试从浏览器访问应用程序时，没有显示任何内容，也没有生成日志输出。

# java - 适用于多个 Web 上下文的 IDE

> ID：15280645
> 
> 赞同：0
> 
> 时间：2013-03-07T20:02:32.630
> 
> 标签：java, eclipse, netbeans, ide, intellij-idea

我正在开发一个旧项目，其中开发人员不使用 eclipse、netbeans 等 Ides 我试图创建一个动态 Web 项目，但 Eclipse 只允许一个 Web 上下文。该项目有大约 23 个不同的 webcontexts，是否可以在 eclipse 中执行此操作而无需创建 23 个不同的 web 项目。有没有其他像 netbeans、Intellij 这样的 Ide 可以让我这样做？

# pdf - TCPDF - 在 iPad 上查看 PDF 时不显示嵌入的 ttf 字体

> ID：15280647
> 
> 赞同：8
> 
> 时间：2013-03-07T20:02:40.763
> 
> 标签：pdf, fonts, tcpdf, truetype

我创建了一个使用 tcpdf 动态创建 PDF 并将字体嵌入 PDF 的网站。用户可以从一系列标准字体中进行选择，如 Arial、Verdana 等。然后系统直接从我的服务器中选择一个 ttf 字体并使用下面的代码嵌入。在大多数 pdf 查看器上可以很好地看到带有该字体的文本，但`iPad/iPhone's`查看器没有显示它。我下载了 Arial.ttf 的新（随机）版本作为测试（不确定文件中的差异，但现在似乎显示正常。

我需要为多种字体执行此操作，但我有点在黑暗中拍摄，因为我不知道字体中的什么可能导致它不被嵌入。有谁知道 ttf 字体中的什么会导致它不显示？在其他查看器上显示正常并显示嵌入到 Acrobat 文档属性中？

谢谢

```
$fontname = $pdf->addTTFfont('/tcpdf/fonts/custom/'.$ttfFile.'.ttf', 'TrueTypeUnicode', '', 32); 
```

// 使用字体

```
$pdf->SetFont($fontname, '', $fontPoints, '', 'false'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-22T16:15:31.877

您的 $subset 参数错误。您将其设置为“假”（带引号）。它应该是布尔真。

```
 <?php
          ...
          // Wrong
          $pdf->SetFont($fontname, '', $fontPoints, '', 'false');

          // Right
          $pdf->SetFont($fontname, '', $fontPoints, '', true); 
          ...
    ?> 
```

**为什么它有效？**

因为它嵌入了整个字体，而不仅仅是一个子集。诀窍是将方法 $pdf->SetFont() 中的参数 $subset 设置为 true。

[http://www.tcpdf.org/doc/code/classTCPPDF.html#a471562985997be1573d387f0aeae6964](http://www.tcpdf.org/doc/code/classTCPDF.html#a471562985997be1573d387f0aeae6964)

**PDF 正在使用**

iPad (IOS 7)、iPhone (IOS 7)、Windows 7、MACOSX 10.9。

**我的 PDF 创建环境**

MAC 10.9 上的 Apache 2、PHP 5.3.x、TCPDF v6.0.078

**文件**

[示例 PDF 和创建它的 PHP 脚本](http://www.filedropper.com/tcpdfexampleforipad)

# php - 如何从 MySql 的表单中转换日期

> ID：15280648
> 
> 赞同：0
> 
> 时间：2013-03-07T20:02:42.713
> 
> 标签：php, mysql, date

我有一个相当简单的问题 - 我有一个表格，用户可以在其中输入他们的出生日期`dd/mm/yyyy`格式，该格式存储`0000-00-00`在我的数据库中。我确信这是一个简单的纠正任务，有人可以帮我编写将输入日期格式转换为数据库可以理解的格式的代码吗？谢谢！

```
$date_of_birth = $_POST['date_birth']; ................. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:04:18.157

```
$date = DateTime::createFromFormat("d/m/Y", $_POST['date_birth']);
$date_of_birth = $date->format('Y-m-d'); 
```

[看到它在行动](http://codepad.viper-7.com/CK3H53)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:06:50.673

mysql 内置日期格式，请参阅 DATE_FORMAT 和 STR_TO_DATE [https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:08:05.617

```
$date_of_birth = date('Y-m-d',strtotime($_POST['date_birth'])); 
```

# image - 如何更正 GraphicEx InChunk() 函数？

> ID：15280649
> 
> 赞同：0
> 
> 时间：2013-03-07T20:02:42.653
> 
> 标签：image, delphi, png, delphi-xe3, graphicex

在纠正基本错误时，我试图将 GraphicEx 组件库（用于 PNG 文件）从我的 Delphi 2006 移植到 XE3（终于得到它），我陷入了这个错误：

```
"TPNGGraphic.IsChunk" invalid type cast 
```

在行：

```
function TPNGGraphic.IsChunk(ChunkType: TChunkType): Boolean;

// determines, independant of the cruxial 5ths bits in each "letter", whether the
// current chunk type in the header is the same as the given chunk type

const
  Mask = not $20202020;

begin
  Result := (Cardinal(FHeader.ChunkType) and Mask) = (Cardinal(ChunkType) and Mask); // <-- this line
end; 
```

有谁知道我该怎么做才能纠正它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T20:14:06.647

TchunkType 定义为

```
type
  TChunkType = array[0..3] of Char; 
```

因此编译器无法将`TChunkType`类型转换为 Cardinal。

尝试将定义更改为

```
type
  TChunkType = array[0..3] of AnsiChar; 
```

# javascript - 请帮助 Javascript 内存泄漏每秒循环数据

> ID：15280650
> 
> 赞同：1
> 
> 时间：2013-03-07T20:02:43.243
> 
> 标签：javascript, ajax

我的 javascript 内存泄漏。以下代码从数据库中获取数据并返回文本框中的值。该数据每秒循环一次并产生内存泄漏。使用开发人员工具，可以看到 xmlHTTP 请求在浏览器上构建。有没有办法解决这个错误？

```
 //the following code gets data from the database
  var startVal = 1; //the start value 
  var stopVal = 451; //the stop value
  var presentVal = startVal;

  var int = self.setInterval(function () {
    getData(presentVal)
  }, 1000); //clock cycles every second

  function getData(str) //used to get data from the database by calling getdata.php file
  {
    var xmlhttp;

    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
      xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    {
      xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

          var response = xmlhttp.responseText;

          var data = response.split("<>");
          var temperature = "";
          temperature = data[1];
          document.getElementById("temperatureVal").value = temperature; ///Temperature Value

          if (presentVal < stopVal) {
            presentVal++;
            response = "";
          } else {
            //int=window.clearInterval(int); //stop timer
            presentVal = startVal; //start Over
            response = "";
          }
        }
      }
      xmlhttp.open("GET", "http://localhost/getData.php?index=" + str, true); //calls the getdata.php file
      xmlhttp.send();

    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:44:40.293

在`getData`您开始创建一个新变量`xmlhttp`时，每次`getData`调用都会创建一个新的且完全独立的变量。要解决您的问题，请重用相同的变量而不是创建新变量（在更高的函数范围`xmlhttp`使用`window.xmlhttp`或定义）。`var xmlhttp`（我之前说过你可以删除对象来清除内存，但这显然不起作用。）

`new XMLHttpRequest()`在 getData 之外只调用一次，就可以了。

# c# - DropDownList 使用后填充重复数据

> ID：15280654
> 
> 赞同：0
> 
> 时间：2013-03-07T20:03:09.453
> 
> 标签：c#, asp.net, linq, entity-framework, ef-code-first

我使用 3 个下拉菜单来过滤页面上的数据。这是下面的第二个下拉菜单。它根据第一个中选择的内容填充`Dropdownlist`。

```
 <asp:DropDownList runat="server" ID="subCatDDL"
                                     AppendDataBoundItems="true"
                                     ItemType="E_Store_Template.Models.SubCategory"
                                    DataTextField="SubCategoryName"
                                     DataValueField="SubCategoryID"

                                     AutoPostBack="true"
                                     CssClass="FilterMenu" Visible="false">
                                    <asp:ListItem Selected="True" Text="SubCategories"  Value="0" />

                                </asp:DropDownList> 
```

这是我用来获取第二个 DropDownList 的所有数据的查询。

```
List<SubCategory> query = _db.SubCategories
                       .Where(x => x.Category.CategoryID == DDLcatId)
                       .Distinct()
                       .ToList();

                    subCatDDL.DataSource = query;
                    subCatDDL.DataBind(); 
```

所以我已经厌倦了很多不同的事情来清除 DropDownlist`subCatDDL.Items.Clear()`我尝试在重新填充之前设置 datasource = null 。我打电话给.Distinct。没有任何效果。

所以基本上，如果我选择一个项目，它会回发填充我正在过滤的项目，然后它会在我的下拉列表中创建该选定项目的副本。如果我搞砸了足够长的时间，我可以让第二个列表充满重复。我怎样才能解决这个问题？

清除下拉列表并在从 填充它时重新填充它的最佳方法是`AutoPostBack="true"`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:00:19.027

删除 AppendDataBoundItems="true" & ItemType="E_Store_Template.Models.SubCategory" 并确保在设置数据源后没有使用 subCatDDL.Items.Add()

# android - Android - 从动态返回数组的数据库函数填充微调器

> ID：15280656
> 
> 赞同：0
> 
> 时间：2013-03-07T20:03:11.483
> 
> 标签：android, arrays, sqlite, spinner

我`database`充满了某些值，我想知道如何将它们放入`spinner`. 我有一个名为的类`SetSql`，它包含我所有的数据库函数，其中有一个名为 的函数`getProfiles()`，它返回一个`String Array`. 现在，我的`spinner`页面上也有一个 ID 为 的`spinner1`，我想知道如何从该`getProfiles()`函数中填充它？

另外我必须注意，数据库中的项目数是未知的，范围可以从 0 到几乎任何值。

谢谢！

* * *

**我的努力**

```
 SetSql getprofiles = new SetSql(this);
    getprofiles.open();
    if(getprofiles.getProfiles().length>0){
        spinnerArray = new String[100];
        spinnerArray = getprofiles.getProfiles();
    }else{
        spinnerArray = new String[1];
        spinnerArray[0] = "No Profiles, Please Create One";
    }
    getprofiles.close();

    ArrayAdapter<String> array = new ArrayAdapter<String>(UserActivity.this, android.R.layout.simple_spinner_item, spinnerArray);
    array.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    profiles.setAdapter(array); 
```

**我的 getProfiles()**

```
public String[] getProfiles() throws SQLException{
    String[] columns = new String[]{KEY_USER};
    Cursor c = ourDatabase.query(TABLE_USERS, columns, null, null, null, null, KEY_ROWID);
    String[] result = new String[100];

    int iName = c.getColumnIndex(KEY_USER);
    int count = 0;
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){ 
        result[count] = c.getString(iName);
        count++;
    }
    return result;
} 
```

请记住，此函数是类的一部分，因此 KEY_Xs 和 ourDatabase 等一些变量不在此处。

**LOGCAT**

```
03-07 23:03:25.691: E/AndroidRuntime(10791): FATAL EXCEPTION: main
03-07 23:03:25.691: E/AndroidRuntime(10791): java.lang.NullPointerException
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.View.measure(View.java:8313)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.View.measure(View.java:8313)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.View.measure(View.java:8313)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.View.measure(View.java:8313)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.os.Looper.loop(Looper.java:130)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at android.app.ActivityThread.main(ActivityThread.java:3683)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at java.lang.reflect.Method.invoke(Method.java:507)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-07 23:03:25.691: E/AndroidRuntime(10791):    at dalvik.system.NativeStart.main(Native Method) 
```

如果您知道为什么会崩溃，我很想听听：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:09:54.993

尝试这样的事情：

```
String[] myArray = {"some","values"};

Spinner spin = (Spinner)findViewById(R.id.spinner1);

ArrayAdapter<String> adapter = new ArrayAdapter(this,android.R.layout.simple_spinner_dropdown_item,myArray);

spin.setAdapter(adapter); 
```

您也可以使用 a`List`而不是`String[]`

# java - 如何将@ExceptionHandler 用于不同的响应类型

> ID：15280659
> 
> 赞同：0
> 
> 时间：2013-03-07T20:03:18.037
> 
> 标签：java, spring, spring-mvc

我们有 2 组控制器。一组用于返回 HttpEntity（用于 ajax 调用），一组用于 ModelAndView。所有控制器都扩展了 BaseController 并且我们在其中定义了异常处理。

```
@ExceptionHandler(Exception.class)
@ResponseBody
public ResponseEntity<String> handleException(final Exception e) {
  return new ResponseEntity<String>(e.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);
} 
```

但是这个控制器只处理与响应“HttpEntity”相关的控制器的异常，而不是 ModelAndView。在这种情况下，我是否需要两个基本控制器来处理异常，或者我可以修改这个现有的 BaseController 来处理所有异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:02:27.077

每个控制器都应该有一个单独的 handleException 方法。

您应该只在 BaseController 中放置公共代码，但异常处理程序显然不常见，因为它们具有不同的逻辑。

# php - 某些站点的 cURL 超时，在其他站点上完美运行

> ID：15280663
> 
> 赞同：2
> 
> 时间：2013-03-07T20:03:30.050
> 
> 标签：php, curl, nginx, timeout, varnish

我正在尝试获取博客的源代码。

我是从 PHP 还是从命令行尝试都没有关系。两者都超时。也试过`get_file_contents()`但同样的问题

## 问题

当我尝试这个命令时：

```
curl http://blogg.se -m 5 --verbose 
```

我明白了：

```
* About to connect() to blogg.se port 80 (#0)
*   Trying 82.96.60.8... connected
> GET / HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: blogg.se
> Accept: */*
>
* Operation timed out after 5001 milliseconds with 0 bytes received
* Closing connection #0
curl: (28) Operation timed out after 5001 milliseconds with 0 bytes received 

```

但如果我尝试使用另一个网址：

```
curl http://ip.nu -m 5 --verbose 
```

它运行良好。

我在想我可能会被禁止，但我也尝试过将 curl 与代理一起使用，但仍然超时。

我可以毫无问题地 ping blogg.se。

我还在 php-script 中更改用户代理。

这是我的 PHP

```
$url = "http://blogg.se/";

$curl = curl_init(); 

$header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,"; 
$header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"; 
$header[] = "Cache-Control: max-age=0"; 
$header[] = "Connection: keep-alive"; 
$header[] = "Keep-Alive: 300"; 
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"; 
$header[] = "Accept-Language: en-us,en;q=0.5"; 
$header[] = "Pragma: ";

curl_setopt($curl, CURLOPT_URL, $url); 
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3'); 
curl_setopt($curl, CURLOPT_HTTPHEADER, $header); 
curl_setopt($curl, CURLOPT_REFERER, 'http://www.google.com'); 
curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate'); 
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_VERBOSE, TRUE);
curl_setopt($curl, CURLOPT_FRESH_CONNECT, 1);
curl_setopt($curl, CURLOPT_MAXREDIRS,50);
curl_setopt($curl, CURLOPT_TIMEOUT, 10); 
$info = curl_getinfo($ch);

$html = curl_exec($curl);
if (!$html) 
{
    echo "cURL error number:" .curl_errno($curl);
    echo "cURL error:" . curl_error($curl);
    exit;
}

curl_close($curl);

echo $html; 
```

在这台服务器上，我正在运行一个带有 nginx、php-fpm 和 varnish 的 ubuntu

PHP 版本 5.3.10-1ubuntu3.5 - cURL 版本 7.22.0

它在我在亚马逊上的一个微型实例上工作（上面的两个网址），配置几乎相同 - 除了版本。

PHP 版本 5.3.6-13ubuntu3.9 - cURL 版本 7.21.6

它也可以使用相同的 php 脚本在 windows/apache 上的本地主机上工作。

* * *

我已经尝试过 cookiejar 和 cookiefile，但是由于我没有得到响应，所以我也没有得到 cookie。还尝试将 CURLOPT_SSL_VERIFYPEER 设置为 false。

还有什么我可以尝试的吗？

我还注意到我无法 ping 我的新服务器，但我可以 ping 亚马逊服务器。

所以我禁用了ufw防火墙，然后我通过ping得到了响应，但curl仍然不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:53:50.543

由于远程 HTTP 服务器未在您请求的超时期限内发回响应，您会收到超时。真的就是这么简单。正如错误消息所述，它实际上甚至在这 5 秒内都没有发送一个字节。

您能够 ping 它完全无关紧要，因为 ping 是一条 ICMP 消息，它与来自站点 Web 服务器的 HTTP 响应非常不同。

现在，您当然会问的问题是*为什么*服务器不响应您的请求，如果不了解更多信息，这很难说清楚。它可能很简单，因为您之前行为不端，服务器会忽略您，它可能只是速度很慢，也可能是其他几个原因之一......

# java - Java中的阻塞套接字写入和非阻塞套接字写入有什么区别？

> ID：15280666
> 
> 赞同：3
> 
> 时间：2013-03-07T20:03:33.267
> 
> 标签：java, sockets, real-time, nio, nonblocking

非阻塞读取和阻塞读取之间的区别很明显，但我对写入感到困惑。我知道非阻塞写入永远不会阻塞（呃！）。如果底层套接字缓冲区已满，则根本不会向其中写入字节。这就是为什么在调用 channel.write 时检查写入了多少字节很重要的原因。

现在如何**阻止写入**？什么时候阻塞？当你叫冲洗？当你在它的OutputStream上调用write？它会阻塞直到底层写入套接字缓冲区中有空间吗？或者如果它不能写，它会抛出异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:12:38.827

是的，它确实会阻塞，直到底层操作系统套接字发送缓冲区中有足够的空间来复制您的字节。当您将数据放入`OutputStream`与套接字关联的 Java 中时，或者当您调用 时`flush()`，可能会发生这种情况，以调用实际`write(2)`系统调用为准。

# c# - 这种天真的递归斐波那契实现如何不是stackoverflow？

> ID：15280667
> 
> 赞同：7
> 
> 时间：2013-03-07T20:03:34.813
> 
> 标签：c#, .net, algorithm, stack-overflow, fibonacci

作为几个月前的一个笑话，我的一位同事试图通过使用这种指数算法计算斐波那契数来“加速宇宙的热寂”：

```
int Fib(int n)
{
    if (n <= 1)
        return 1;
    else
        return Fib(n - 1) + Fib(n - 2);
} 
```

这如何不会导致 C# 中的堆栈溢出？我们在放弃之前设法到达了 Fib(52)（而 Fib(51) 花了很多时间）。我认为这会严重影响堆栈​​以导致堆栈溢出，因为默认情况下 CLR 仅分配 1M 给堆栈。另外，我很确定这也不符合尾递归的条件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T20:08:08.423

递归调用不是同时计算的，而是按顺序计算的，这意味着`Fib(n - 2)`只会在之后`Fib(n - 1)`（或相反）计算。这意味着即使您创建`2^n`递归调用，也只会`n`同时处于活动状态。因此 `Fib(52)`只需要用于`52`的堆栈帧的空间`Fib`，这不会占用任何显着的堆栈空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:09:13.147

朴素的斐波那契实现确实会产生大量的函数调用（实际上等于结果），但它不会递归得很深。递归的最大深度是`n`。

# authentication - 无法在 Symfony 功能测试中模拟身份验证

> ID：15280670
> 
> 赞同：4
> 
> 时间：2013-03-07T20:03:49.700
> 
> 标签：authentication, testing, symfony, functional-testing

我按照[说明书](http://symfony.com/doc/current/cookbook/testing/http_authentication.html)中的说明在我的功能测试中模拟 HTTP 身份验证。

我将以下内容添加到我的**config_test.yml**：

```
security:
    firewalls:
        main:
            http_basic:
                realm: "Secured Demo Area" 
```

这就是我的测试的样子：

```
class CourseControllerTest extends WebTestCase
{
    public function setUp()
    {
        $this->loadFixtures(array(
            'Herudio\Bundle\UserBundle\DataFixtures\ORM\LoadUserData',
            'Herudio\Bundle\CourseBundle\DataFixtures\ORM\LoadCategoryData',
            'Herudio\Bundle\CourseBundle\DataFixtures\ORM\LoadCourseData',
        ));
    }

    public function testListDisplaysAllEntities()
    {
        $client = static::createClient(array(), array(
            'PHP_AUTH_USER' => 'admin',
            'PHP_AUTH_PW'   => 'admin',
        ));

        $crawler = $client->request('GET', '/courses');

        $this->assertCount(1, $crawler->filter('tbody tr'), 'Unexpected entity count for GET /courses/');
    }
} 
```

但是，当我运行测试时，我被重定向到**/login**。

我已经确保正确创建了用户实体。

注意：我使用 FOSUserBundle 进行身份验证。

# jquery - jQuery中的画廊与列表

> ID：15280671
> 
> 赞同：0
> 
> 时间：2013-03-07T20:03:51.660
> 
> 标签：jquery, list, redirect, location, gallery

我正在寻找一些带有上一个/下一个按钮的画廊，我找到了它。我有代码：

```
var speed = 0;
$('#mask-gallery, #gallery li').width($('#slider').width());    
$('#gallery').width($('#slider').width() * $('#gallery li').length);
$('#mask-gallery, #gallery li').height($('#slider').height());
$('#gallery li:first').addClass('selected');

$('#btn-next, #gallery').click(function () {
 newsscoller(0);    
 return false;
});

$('#btn-prev').click(function () {
 newsscoller(1);    
 return false;
});

function newsscoller(prev) {
    var current_image = $('#gallery li.selected').length ? $('#gallery li.selected') : $('#gallery li:first');
    if (prev) {
        var next_image = (current_image.prev().length) ? current_image.prev() : $('#gallery li:last');
    } else {
        var next_image = (current_image.next().length) ? current_image.next() : $('#gallery li:first');
    }

    $('#gallery li').removeClass('selected');
    next_image.addClass('selected');
    $('#mask-gallery').scrollTo(next_image, 250);
} 
```

[http://jsfiddle.net/R27FS/](http://jsfiddle.net/R27FS/)

我有一个问题。任何人都知道它的脚本如何在最后一张幻灯片之后将用户重定向到定义的页面（location.href = '';）？

感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:43:11.710

一种选择是将“下一个”链接设置为最后一张幻灯片上的实际位置。然后`return true;`在`click`事件中如果`href!="#"`

**[演示](http://jsfiddle.net/R27FS/3/)**

```
var speed = 0;
$('#mask-gallery, #gallery li').width($('#slider').width());
$('#gallery').width($('#slider').width() * $('#gallery li').length);
$('#mask-gallery, #gallery li').height($('#slider').height());
$('#gallery li:first').addClass('selected');

$('#btn-next, #gallery').click(function () {
    var href = $(this).attr("href");
    if (href != "#" && href != "") return true;
    newsscoller(0);
    return false;
});

$('#btn-prev').click(function () {
    newsscoller(1);
    return false;
});

function newsscoller(prev) {
    var current_image = $('#gallery li.selected').length ? $('#gallery li.selected') : $('#gallery li:first');
    var next_image;
    $("#btn-next").attr("href", "#");
    if (prev) {
        next_image = (current_image.prev().length) ? current_image.prev() : $('#gallery li:last');
    } else {
        if (current_image.next().length) {
            next_image = current_image.next();
        }
        if (!next_image.next().length) {
            $("#btn-next").attr("href", "http://www.google.com");
            //'target' required for it to work in jsFiddle b/c of 
            //iframe, remove in your code.
            $("#btn-next").attr("target", "_blank");
        }
    }

    $('#gallery li').removeClass('selected');
    next_image.addClass('selected');
    $('#mask-gallery').scrollTo(next_image, 250);
} 
```

# node.js - 没有模式的猫鼬

> ID：15280679
> 
> 赞同：3
> 
> 时间：2013-03-07T20:04:28.000
> 
> 标签：node.js, mongoose

目前在不定义模式的情况下将对象/文档插入猫鼬的“正确”方法是什么？

我读过一些类似的东西： [如何在不定义模式的情况下使用 Mongoose？](https://stackoverflow.com/questions/5370846/how-do-you-use-mongoose-without-defining-a-schema)

有任何想法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:08:31.867

Mongoose 说您可以使用混合模式来定义无模式类型。权衡的是，您必须在调用 save 之前告诉 mongoose 是否修改了 Mixed Schema 值。除此之外，您应该能够在“模式”中定义您想要的任何内容。

**文档**- [http://mongoosejs.com/docs/schematypes.html#mixed](http://mongoosejs.com/docs/schematypes.html#mixed)

# android - 设备特定错误 - s3dReadConfigFile“无法打开文件进行读取。”

> ID：15280681
> 
> 赞同：15
> 
> 时间：2013-03-07T20:04:30.203
> 
> 标签：android, galaxy

我正在开发一个通过本地网络进行通信的应用程序，并试图在多个设备上进行测试。我现在有一台 Droid Incredible 和一台三星 Galaxy S3 进行测试。当我在 Incredible 上运行应用程序时，一切都按预期工作。但是，当我在 GS3 上运行应用程序时，我在 LogCat 中收到以下错误：

> < s3dReadConfigFile:75 >：无法打开文件进行读取

另一个 GS3 的队友~~在该设备上运行应用程序时没有收到此错误，~~也收到此错误，但由于日志输出量大，他花了一段时间才找到它。可能的原因是什么？这是配置问题、硬件问题还是我的代码中的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T14:23:09.720

经过几个月的开发并在运行多个应用程序的多个设备上继续收到此错误后，这似乎至少是一个系统问题。与其他设备相比，它不会导致在 GS3 上运行应用程序时出现任何问题，而且它也可能与我的代码无关。

我不知道这意味着什么或如何减轻它，但如果你收到错误，你可能会忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T10:38:02.723

你的队友 Galaxy S3 是否已植根...可能需要 root 权限才能读取 s3dReadConfigFile 配置文件...只是猜测

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T11:59:57.033

我也有，只要解锁你的手机，就可以使用了。而不是从软件运行您的应用程序（Eclipse - 在我的情况下）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-03T15:40:25.173

我也有，
只要解锁你的手机，就可以使用了。
而不是从软件运行您的应用程序（Eclipse - 在我的情况下）。

# facebook - 从 Windows 注册表中删除 InProgress 注册表项

> ID：15280682
> 
> 赞同：0
> 
> 时间：2013-03-07T20:04:31.477
> 
> 标签：facebook, registry

我在安装 Adob​​e Flash Professional cs6 时使用 Adob​​e Flash Professional cs6 开发 facebook 应用程序它无法安装抛出系统错误，谷歌搜索时我发现问题的解决方案是删除 InProgress 注册表项但我没有找到要删除 Windows 7 注册表中的任何 InProgress 注册表项，请告诉我如何删除 In Progress 注册表项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T14:45:21.463

一个原因可能是您在 PC 上使用了其中一种免费的“注册表清理工具”。如果是这种情况，您可能仍然可以从 IE 下载。

# java - Android-无法让 AysncTask 下载多个文件

> ID：15280683
> 
> 赞同：-1
> 
> 时间：2013-03-07T20:04:42.350
> 
> 标签：java, android, download

正如 tle 所述，我需要使用 AsyncTask 下载两个文件。当我尝试时，什么都没有下载。如果需要，我可以给一个 logcat。我不确定为什么它不会下载文件。这是我的代码：

```
package com.cydeon.smirkit;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.concurrent.TimeoutException;

import com.stericson.RootTools.*;
import com.stericson.RootTools.exceptions.RootDeniedException;
import com.stericson.RootTools.execution.CommandCapture;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class Stock extends Activity implements OnClickListener {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private ProgressDialog mProgressDialog;

private String urlPath = "https://dl.dropbox.com/s/";    
private String[] fileNames = {"u-boot_stock.bin","u-boot_stock.md5"};  

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.stock);
    Button bInstallS = (Button) findViewById(R.id.bInstallS);
    Button bSkipS = (Button) findViewById(R.id.bSkipS);
    bInstallS.setOnClickListener(this);
    bSkipS.setOnClickListener(this);
    mProgressDialog = new ProgressDialog(Stock.this);
    mProgressDialog.setMessage("Downloading..." );
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
}
        public void onClick(View arg0) {
            switch(arg0.getId()){
                case R.id.bInstallS:
                    AlertDialog.Builder builder = new AlertDialog.Builder(Stock.this);
                    builder.setPositiveButton(R.string.continueStock, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            startDownload();
                        }
                        });
                    builder.setNegativeButton(R.string.cancelStock, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            Stock.this.finish();
                        }
                        });
                    builder.setMessage(R.string.messageStock);
                    builder.setTitle(R.string.titleStock);
                    AlertDialog dialog = builder.create();
                    dialog.show();

                    break;
                case R.id.bSkipS:
                    Intent skip = new Intent(Stock.this, Twrp.class);
                    startActivity(skip);

        }
        }

private void startDownload() {      

    if(checkExternalMedia()==true) {

           File file = null;                
           for(int i=0; i<fileNames.length; i++) {
                file = new File(Environment.getExternalStorageDirectory()+fileNames[i]);
                boolean exists = file.exists();
                if(exists){
                    continue;
                }
                else {
                    new DownloadFileAsync().execute(urlPath+"2mtbqt7mk5khqu3/"+fileNames[i],"klw4vb0valwds2p/"+fileNames[i]);               
                }
                file = null;
            }               
        }            
    else {          
    }
}
/** Method to check whether external media available and writable. */

private boolean checkExternalMedia(){
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    boolean stat;
    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // Can read and write the media
        mExternalStorageAvailable = mExternalStorageWriteable = true;
        stat = true;
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // Can only read the media
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
        stat = false;
    } else {
        // Can't read or write
        mExternalStorageAvailable = mExternalStorageWriteable = false;
        stat = false;
    }

    return stat;
}

class DownloadFileAsync extends AsyncTask<String, Integer, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    protected String doInBackground(String... sURL) {
        try{
            URL url = new URL(sURL[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            //Shows 0-100% progress bar
            int fileLength = connection.getContentLength();

            //Download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/"+fileNames);

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                //Publish the Progress
                publishProgress((int) (total * 100/fileLength));
                output.write(data, 0, count);
                }

            output.flush();
            output.close();
            input.close();
    } catch (Exception e) {

    }
    return null;
    }

    @Override
    protected void onPostExecute(String unused) {
        mProgressDialog.dismiss();
        Context context = getApplicationContext();
        CharSequence text = "Installing. Please Wait";
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
        RootTools.remount("/system", "rw");
        CommandCapture command = new CommandCapture(0, "su");
        try {
            RootTools.getShell(true).add(command).waitForFinish();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (TimeoutException e) {
            e.printStackTrace();
        } catch (RootDeniedException e) {
            e.printStackTrace();
        }
    }
}

} 
```

因此，如果需要，我可以再次提供 logcat。这是我第一次尝试，所以我不确定我在做什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:10:55.883

如果我理解正确，您不想同时（同时）下载所有文件，而是一个接一个（串行）。为此，使用要下载的 URL 构建一个字符串数组，并使用该数组调用 execute()。

# business-intelligence - 业务逻辑处理代码与正常操作处理代码的分离究竟是如何调用的？

> ID：15280687
> 
> 赞同：0
> 
> 时间：2013-03-07T20:04:59.450
> 
> 标签：business-intelligence

我知道这可能不是问这个问题的最佳地点，但它是这样的：业务逻辑处理代码与应用程序中的其余代码分离的（正式？）名称是什么？

请注意，这里我不是在谈论使用旨在降低条件复杂性的多态性或设计模式。例如，我说的是使用规则引擎（例如 Drools）来处理业务代码，**用户可以在不重新部署整个代码的情况下更改应用程序的行为**。

我想对该主题进行一些研究，并希望首先通过其“学术”定义“正确地”调用它（如果存在的话）。

谷歌搜索会抛出诸如“自主计算”或“策略驱动系统”之类的术语，但我想和你们一起看看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:10:24.430

Drools 是一个[业务规则管理系统](http://en.wikipedia.org/wiki/Business_rule_management_system)又名规则引擎，类似于 JESS。

# ruby - 红宝石和丢番图方程——散列问题

> ID：15280689
> 
> 赞同：2
> 
> 时间：2013-03-07T20:05:06.413
> 
> 标签：ruby, hash, diophantine

我是编程和红宝石的新手。我正在编写处理特定丢番图方程的代码（来自 MIT 开放课件问题），并且只是想看看我能用它做什么。

该代码为具有三个变量的特定线性方程生成三个数组和其中两个的散列。

这是代码：

```
def diophantine_solutions(x)
  #For all x > 1, finds values for a, b, c such that 6a + 9b + 20c = x,
  #Creates array of solvable x, unsolvable x, 
  #Creates hash of solvable x with possible values of a, b, c

  nopes=(1..x).to_a #will contain sums with no solutions at the end
  yups=[] #has solvalbes
  yups_values=[] #solutions for a, b, c
  yups_hash={} #sums with the solutions

  while x>0
    for a in (0..x/6):
      for b in (0..x/9):
        for c in (0..x/20):
          total=6*a + 9*b + 20*c
          if total==x
            yups<< x
            yups_values<< [a, b, c]
          end          
        end
      end
    end
    x=x-1
  end

  yups_hash=[yups.zip(yups_values)]
  yups=yups.uniq
  nopes=nopes-yups
  puts yups_hash[20]
end

diophantine_solutions(20) 
```

我现在要做的是访问各个哈希配对以确保它们正确排列，但是

```
puts yups_hash[] 
```

对任何数字返回 nil。有什么帮助吗？另外，像我这样的新手，如果有更好的方法来做我所做的任何事情，如果你让我知道，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:20:00.853

应该是：

```
yups_hash = Hash[yups.zip(yups_values)] 
```

需要注意的是，我不知道会发生什么，但顾名思义，它应该是一个哈希，而不是一个包含一堆数组的数组*。*`yups_hash`

一旦有一个实际的哈希值，20 的输出是：

```
0 0 1 
```

这至少符合定义。

# android - 我在哪里可以获得所有 Robotium 命令的列表？

> ID：15280694
> 
> 赞同：4
> 
> 时间：2013-03-07T20:05:20.343
> 
> 标签：android, automation, robotium

我在哪里可以获得所有 Robotium 命令？

（`*waitForView*, *appBar*, clickExit*`……全部）

我在网上搜索，但在任何地方都找不到完整的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:07:04.930

你可以下载它。这是javadoc： [http ://code.google.com/p/robotium/downloads/list](http://code.google.com/p/robotium/downloads/list)

编辑，实际的 javadoc 位于：[http ://recorder.robotium.com/javadoc/](http://recorder.robotium.com/javadoc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:24:48.663

UTSL：[https ://github.com/jayway/robotium/tree/master/robotium-solo/src/main/java/com/jayway/android/robotium/solo](https://github.com/jayway/robotium/tree/master/robotium-solo/src/main/java/com/jayway/android/robotium/solo)

只需克隆它，如果需要，然后生成 javadocs。

# google-cloud-datastore - GAE 数据存储查询未返回任何内容 - 帮助！错误说“查询”对象没有属性（不应该是这种情况）

> ID：15280698
> 
> 赞同：0
> 
> 时间：2013-03-07T20:05:37.110
> 
> 标签：google-cloud-datastore

任何人都知道为什么我对 h1 的数据库查询会弹出？- 这是我得到的错误：谢谢任何人的帮助 - 我一直在看这个，但无法弄清楚....！！！

文件“/Users/minasong/Dropbox/TS Code/main.py”，第 720 行，在 get logging.info("here is the typeable instance %s", type_info.headingtype_name) AttributeError: 'Query' object has no attribute “标题类型名称”

类 AdminHeading_Edit_Type(Handler): def get(self,type_name):

```
 category_level = "ONE"

    type_info = HeadingType_Table.all().filter("__key__ =", type_name)
    h1 = Level_1_Headings.all().filter("heading_type =", type_info)

    logging.info("here is the type able instance %s ", type_info.headingtype_name)

    self.render('new_entries/ADMIN_Heading_1Edit_2List.html', ones=h1, heading_type=type_name, category_level=category_level, type_into=type_info) 
```

这是我的数据存储实体定义： class HeadingType_Table(db.Model): headingtype_name = db.StringProperty(required=True, indexed=True) type_description = db.TextProperty()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:13:42.877

从您的样本中很难分辨，但我怀疑您的问题是这样的；

```
type_info = HeadingType_Table.all().filter("__key__ =", type_name) 
```

...将 type_info 设置为`Query`包含*所有匹配 "headingtypes"*的对象。

logging.info("...", type_info.headingtype_name)

...尝试`headingtype_name`从`Query`对象记录属性。我怀疑你的意思是在一个`Model`物体上这样做。

要么使用`get()`而不是`all()`获取单个`Model`对象，要么迭代结果以记录从单独返回`headingtype_name`的每个`Model`对象`Query`。

# c# - Metro App Touch Gesture 相当于键盘输入

> ID：15280699
> 
> 赞同：0
> 
> 时间：2013-03-07T20:05:42.990
> 
> 标签：c#, .net, textbox, microsoft-metro, windows-runtime

Windows 8 Metro 应用程序中的**键盘 Enter 键**是否有等效的**触摸手势**，可以在或类似事件中检测到？**`KeyDown``TextBox`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:32:17.883

请参阅[设计触控交互](http://msdn.microsoft.com/en-us/library/windows/apps/hh465415.aspx)的文档，其中包括 Microsoft 触控语言。

应用程序应尽可能遵循 Microsoft Touch 语言。

您不需要专门为等效于 Enter 键的触摸手势，因为如果用户使用键盘（例如，在笔记本电脑上），他们将实际使用 Enter 键。如果没有键盘（例如在 Surface 或其他平板电脑上），则在文本框内点击会调出软输入面板，其中同样包括 Enter 键。您可以[在此处找到有关键盘和 SIP 支持的更多信息](http://msdn.microsoft.com/en-us/library/windows/apps/hh700405.aspx)。

希望有帮助。

有关 Windows 应用商店应用开发的更多信息，请注册[App Builder](http://bit.ly/gd30tolaunch)。**

# actionscript-3 - 从数组中的 MovieClip 访问函数 - AS3

> ID：15280700
> 
> 赞同：1
> 
> 时间：2013-03-07T20:05:49.893
> 
> 标签：actionscript-3, flash

我正在制作一个 2d 射击游戏，并试图让不同的攻击对某些敌人类型产生不同的影响。我将子弹和敌人放入两个数组中，然后使用 for 循环对子弹和敌人执行 hitTestObject。这一切都有效，但是我在 Bullet 类中有一个公共静态函数，它将它的类型作为字符串返回，而在 Enemy 类内部有一个公共静态函数，它接受一个字符串，然后使用开关来消除敌人受到的伤害。当我运行我的程序时，我不断收到错误 #1069：在 obj.QuickBullet 上找不到属性 getType 并且没有默认值。

敌人的代码。

```
package char {

import flash.display.MovieClip;
import flash.events.Event;
import flash.display.Stage;

public class Enemy1 extends MovieClip {

    private var _type:String;
    private static var _health:Number;
    private var _vx:Number;
    private var _vy:Number;
    private var _stage:Stage;

    private static var _instance:Enemy1;

    public function Enemy1() {
        init();
    }

    private function init():void {
        //Vars
        _vx = -10;
        _vy = Math.random()*10;
        _health = 1;
        _stage = Main.getStage();
        _instance = this;

        //Listeners
        addEventListener(Event.ADDED_TO_STAGE, onAdded);
        addEventListener(Event.ENTER_FRAME, enemyLoop);
        addEventListener(Event.REMOVED_FROM_STAGE, onRemoved);

        //Add Enemy
        Main.getInstance().addChild(this);
    }

    //When Added
    private function onAdded(event:Event):void{
        //Set position
        this.x = _stage.stageWidth;
        this.y = Math.random() * _stage.stageHeight;
        //trace("Enemy created");

        dispatchEvent(new Event("enemyCreated", true));
    }

    //Loop
    private function enemyLoop(event:Event):void {
        //Move
        x += _vx;
        y += _vy;

        //Boundaries
        if ( this.y <= 0 + this.height/2){
            this.y = this.height/2;
            _vy *= -1;
        }
        if ( this.y >= _stage.stageHeight - this.width/2){
            this.y = _stage.stageHeight - this.width/2;
            _vy *= -1;
        }

        //Health cheack
        if ( _health <= 0){
            if (this.parent) {
                this.parent.removeChild(this);
            }
            trace(this + " is dead.");
        }
        //Leaves screen
        if (this.x <= -this.width){
            Main.getInstance().removeChild(this);
        }
    }

    public static function isHit(type:String):void{
        switch(type){
            case "power" :
                _health -= 1;
                break;
            case "quick" :
                _health -= 1;
                break;
            case "strong" :
                _health -= 1;
                break;
            default:
                    _health -= 1;
            }
        }

        public static function getEnemy1():Enemy1{
            return _instance;
        }

        //When Removed
        private function onRemoved(event:Event):void {
            removeEventListener(Event.ADDED_TO_STAGE, onAdded);
            removeEventListener(Event.ENTER_FRAME, enemyLoop);
            removeEventListener(Event.REMOVED_FROM_STAGE, onRemoved);
            //trace("enemy removed");
        }
    }

} 
```

子弹代码。

```
package obj {

import flash.display.MovieClip;
import flash.events.Event;
import flash.display.Stage;

public class PowerBullet extends MovieClip {
    //const
    private static const TYPE:String = "power";

    //Varibles
    private var _vx:Number;
    private var _vy:Number;
    private var _startX:Number;
    private var _startY:Number;
    private var _stage:Stage;

    public function PowerBullet(startX:Number, startY:Number) {
        _startX = startX;
        _startY = startY;

        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);

        Main.getInstance().addChild(this);
    }

    //When created
    private function onAddedToStage(event:Event):void{
        //Initialize vars
        this.x = _startX;
        this.y = _startY;
        _vx = 20;
        _vy = 0;
        _stage = Main.getStage();

        dispatchEvent(new Event("bulletCreated", true));

        //Event Handlers
        addEventListener(Event.ENTER_FRAME, bulletLoop);
        addEventListener(Event.REMOVED_FROM_STAGE, onRemoved);
    }

    //Bullet loop
    private function bulletLoop(event:Event):void {
        //Move bullet
        x += _vx;
        y += _vy;

        if (this.x - this.width > _stage.stageWidth)
        {
            parent.removeChild(this);
        }
    }

    public static function getType():String{
        return TYPE;
    }

    //When Removed
    private function onRemoved(event:Event):void {
        removeEventListener(Event.ENTER_FRAME, bulletLoop);
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        removeEventListener(Event.REMOVED_FROM_STAGE, onRemoved);
    }
}

} 
```

我正在使用的 for 循环。

```
for (var i:int = 0; i < _enemies.length; i++){
for(var j:int = 0; j < _bullets.length; j++){
    if(_bullets[j].hitTestObject(_enemies[i])){
        if (_bullets[j].parent) {
                            _bullets[j].parent.removeChild(_bullets[j]);
                    }

                    _enemies[i].isHit(_bullets[j].getType());

                    _enemies.splice(i, 1);
                    _bullets.splice(j, 1);

                    i--;
                    j--;

                    Main.setScore(10);
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:10:43.570

`static`从此代码中删除

```
public static function getType():String{
    return TYPE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:11:59.453

注意：您的错误是说没有属性`getType()`on`QuickBullet`但您只提供了`PowerBullet`.

您已将`static`命名空间应用于`getType()`. 这意味着您只能通过类本身而不是该类的实例调用此方法：

```
PowerBullet.getType(); 
```

如果您删除`static`，您将能够像预期的那样在每个实例上访问该方法。

附加说明：看起来您正在使用`static`一些类成员，其中看起来不像`health`and `isHit()`。我建议您阅读静态名称空间以更好地了解其用途。

# android - 在网站上安装 Android 应用程序的链接 - 安装后，应用程序如何从网站中断的地方继续？

> ID：15280701
> 
> 赞同：2
> 
> 时间：2013-03-07T20:06:00.467
> 
> 标签：android

基本上，有一个网站，其内容也可以由本机应用程序查看，并且网站上甚至还有一个按钮可以做到这一点 - 如果应用程序尚未在设备上，它会将用户发送到 Play 商店。

这个想法是在应用程序尚未安装的情况下进行“无缝”过渡，因此它可以在第一次启动时加载相同的内容。如果只有一个浏览器，那么可以使用 cookie 完成类似的操作，但在 Android 设备上，您可以拥有很多浏览器，而且显然很多人都这样做了。查看内容不需要身份验证，因此也不能这样。

有没有办法在不希望用户选择他用来阅读网站的浏览器的情况下进行这种无缝转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:41:33.553

所以这是一个几乎总是有效的解决方案，尽管它很尴尬：

1.  浏览器将某些内容放入 cookie 中，服务器保留会话数据以跟踪用户的位置
2.  当应用程序启动时，它会创建一个 UUID。
3.  然后，应用程序将浏览器启动到一个特殊页面，并将 UUID 作为 GET 参数。
4.  UUID 现在已经匹配到服务器上早期的会话数据。
5.  页面上有 javascript 通过更改 URL 以匹配 Intent 过滤器将用户发送回应用程序。
6.  该应用程序现在可以从您的服务器请求会话数据。

这远非理想，并且会真正减慢应用程序的首次加载速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T11:33:58.467

最后，经过很长一段时间，我们发现我们可以使用通常为广告系列测量和类似统计数据保留的推荐链接将所需参数传递给 Play 商店 - [https://developers.google.com/ analytics/devguides/collection/android/v2/campaigns](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns) - 使用自定义 BroadcastReceiver 在第一次启动时将 Intent 重定向到 Activity（引用 Intent 仅在应用程序启动和 Activity 启动后发生，所以还有一件事要小心）。

虽然它仅在您在 Play 商店应用程序中打开应用程序链接时才有效，而不是在浏览器中。希望大多数人无论如何都这样做。

# r - 像普通的 lisp 一样写 R

> ID：15280711
> 
> 赞同：3
> 
> 时间：2013-03-07T20:06:41.367
> 
> 标签：r, common-lisp

我最近一直在学习 common lisp，虽然我不是受过培训的程序员，但我真的很喜欢它。我注意到我想因此而以不同的方式编写我的 R 代码。例如，此代码作为[Verzani Simple R 在线书籍](http://cran.r-project.org/doc/contrib/Verzani-SimpleR.pdf "Verzani 简单 R")中代码的重新工作：

```
with(list(p=0.5, m=50, n=20, alpha=0.1),
 with(list(phat=rbinom(m,n,p)/n, zstar=1-alpha/2),
      with(list(SE=sqrt((1-phat)*phat/n)),{
        matplot(rbind(phat-SE*zstar,phat+SE*zstar),
                rbind(1:m,1:m), type='l',
                lty=1)
        abline(v=p)}))) 
```

这是用 R 编写的一种合理且合理的惯用方式，还是仅仅是从另一种语言中获取方法的一种情况？我个人喜欢我可以绑定一次变量，然后不必使用赋值和一般的外观和感觉。

Verzani 书中的代码如下进行比较（由 Dason 建议进行了更改）：

```
 local({
  m=50;
  n=20;
  p=.5;
  phat=rbinom(m,n,p)/n
  SE = sqrt(phat*(1-phat)/n)
  alpha = 0.10;zstar= qnorm(1-alpha/2)
  matplot(rbind(phat-zstar*SE,phat+zstar*SE), rbind(1:m,1:m),type="l",lty=1)
  abline(v=p)}) 
```

编辑：正如 Spacedman 所指出的，这比我的版本更简洁，如果 R 在 lisp 中有类似 LET* 的东西，这将大大改进。如果有人知道我可以简洁地实现这一目标的方法，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:25:02.423

你是说：

```
with(list(p=0.5, m=50, n=20, alpha=0.1),
 with(list(phat=rbinom(m,n,p)/n, zstar=1-alpha/2),
      with(list(SE=sqrt((1-phat)*phat/n)),{
        matplot(rbind(phat-SE*zstar,phat+SE*zstar),
                rbind(1:m,1:m), type='l',
                lty=1)
        abline(v=p)}))) 
```

值得一试：

```
local({
  p=0.5;m=50;n=20;alpha=0.1
  phat=rbinom(m,n,p)/n
  zstar=1-alpha/2
  SE=sqrt((1-phat)*phat/n)
  matplot(rbind(phat-SE*zstar,phat+SE*zstar),rbind(1:m,1:m), type='l',lty=1)
  abline(v=p)
}) 
```

我休息一下。

# c# - 如何在后面的代码中设置 Lineseries 点模板

> ID：15280712
> 
> 赞同：1
> 
> 时间：2013-03-07T20:06:44.210
> 
> 标签：c#, silverlight, xaml, telerik

基本上我想在后面的 C# 中应用这个 XAML 代码。这是 XAML

```
 <telerik:LineSeries Stroke="Transparent">
            <telerik:LineSeries.PointTemplate>
                <DataTemplate>
                    <Ellipse Height="10" Width="10" Fill="DarkGreen" />
                </DataTemplate>
            </telerik:LineSeries.PointTemplate>
        </telerik:LineSeries> 
```

这是我尝试过的：

```
Ellipse e = new Ellipse();
LineSeries line = new LineSeries();
e.Height = 10; 
e.Width = 10; 
line.Stroke = new SolidColorBrush(Colors.Transparent);
line.PointTemplate = new DataTemplate(e); 
```

但它不起作用我得到一个“DataTemplate.DataType 的值必须是 System.Type 类型。” 错误。有人知道如何正确翻译上面的 XAML 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:26:26.587

这就是我所做的，我创建了一个资源：

```
<UserControl.Resources>
    <DataTemplate x:Key="PointTemplate">
        <Ellipse Width="5" Height="5" Fill="Coral"/>
    </DataTemplate>
</UserControl.Resources> 
```

然后你会通过这样做来应用它：

```
line.PointTemplate = this.Resources["PointTemplate"] as DataTemplate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T14:50:52.433

在 XAML 中创建一个静态资源并将其分配给 PointTemplate 属性

```
<Window.Resources>
<DataTemplate x:Key="PointTemplate">
<Ellipse Width="5" Height="5" Fill="Coral"/>
</DataTemplate>
</Window.Resources>

<telerik:ChartSeriesDescriptor.Style>
<Style TargetType="telerik:ScatterSplineSeries">
<Setter Property="YValueBinding" Value="YValue" />
<Setter Property="XValueBinding" Value="XValue" />
<Setter Property="StrokeThickness" Value="2" />
<Setter Property="PointTemplate" Value="{StaticResource PointTemplate}"  />
</Style>
</telerik:ChartSeriesDescriptor.Style>` 
```

# highcharts - Highcharts Theming：如何仅为某些图表类型设置渐变颜色？

> ID：15280719
> 
> 赞同：1
> 
> 时间：2013-03-07T20:07:20.703
> 
> 标签：highcharts

我正在使用自定义主题在 Highcharts 中构建一些图表。我写了一个主题，将颜色表重建为一组渐变，它看起来棒极了。唯一的问题是饼图现在看起来像垃圾。

有什么方法可以设置主题，以便为不同的图表类型指定一组不同的颜色？我想只为条形和柱形设置渐变颜色，但我不想为我生成的每个图表设置这些选项......

我在做什么的例子：http: [//jsfiddle.net/K7YPF/5/](http://jsfiddle.net/K7YPF/5/)

```
var colors = ["#AFD8F8", "#F6BD0F", "#8BBA00", "#FF8E46", "#008E8E", "#D64646", "#8E468E", "#588526",
    "#B3AA00", "#008ED6", "#9D080D", "#A186BE", "#CC6600", "#FDC689", "#ABA000", "#F26D7D",
    "#FFF200", "#0054A6", "#F7941C", "#CC3300", "#006600", "#663300", "#6DCFF6"];
var gradientColors = [];
//rebuild all of the colors into gradients for the 3d effect
$.each(colors, function (i, color) {
    gradientColors[i] = {
        linearGradient: {
            x1: 0,
            y1: 0,
            x2: 1,
            y2: 0
        },
        stops: [
            [0, Highcharts.Color(color).brighten(-0.08).get('rgb')],
            [0.2, Highcharts.Color(color).brighten(0.24).get('rgb')],
            [0.4, Highcharts.Color(color).brighten(-0.02).get('rgb')],
            [0.5, color],
            [0.8, Highcharts.Color(color).brighten(0.12).get('rgb')],
            [1, Highcharts.Color(color).brighten(-0.08).get('rgb')]
        ]
    };
});
Highcharts.theme = {
    colors: colors,
    plotOptions: { // This does not work, but this is how I'd like to be able to do it.
        column: {
            colors: gradientColors
        },
        pie: {
            colors: colors
        }
    }
}; 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T11:42:19.937

```
$("#container").highcharts({
    plotOptions: {pie:{colors:[your colors here]}}
}); 
```

# javascript - Javascript 代码简化备忘单

> ID：15280720
> 
> 赞同：1
> 
> 时间：2013-03-07T20:07:20.663
> 
> 标签：javascript

有谁知道我在哪里可以获得关于如何简化 Javascript 代码的备忘单或指南，例如常见的简化列表？！

例如，下面的代码：

`(var_name === 'joe') ? true : false`

可以简化为：

`!!((var_name === 'joe'))`

或者`UglifyJS`（和/或其他代码压缩器）已经这样做了吗？！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:15:18.703

很多这只是常识。毕竟，“如果 x 为真，则为真；否则为假”显然与“x”相同。更多只是经验的产物。目前尚不清楚您是否正在寻找可以提高执行性能的重构，或者您是否追求可维护性和可读性。许多 JavaScript 习语解决了这两个问题，但有些习语平衡了两者之间的关系。

话虽如此，有几个 JavaScript 习语指南（您可以通过简单的网络搜索找到）。最有用的（在我看来）是 Crockford 的[*The Elements of JavaScript Style*](http://javascript.crockford.com/style2.html)。另一个很好的来源是[*编写一致的惯用 JavaScript 原则*](https://github.com/rwldrn/idiomatic.js/)。

# c# - 来自 C++ 的 C# 回调导致访问冲突

> ID：15280721
> 
> 赞同：1
> 
> 时间：2013-03-07T20:07:24.400
> 
> 标签：c#, c++, callback, unmanaged

编辑（谢谢 ildjarn！）：通过将委托（和要匹配的回调函数签名）更改为解决

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate void InstallStatusDel([MarshalAs(UnmanagedType.LPStr)]string Mesg, int Status); 
```

原帖：

我有一个用 C# 编写的调用 C dll 中的函数的 .net 应用程序的问题。我看过其他有类似问题的主题，但我一定错过了一些不同的东西。当我在 C# 中调试它时，我能够在 InstallStatusCallback 中打断点，但是当执行退出 InstallStatusCallback 时，会出现 AccessViolationException。我尝试使用 C 进行调试，并且在执行从回调返回之前发生访问冲突。感谢您的任何意见。

C dll 中的项目设置默认设置为使用 __cdecl。在 C DLL 领域中，有以下代码：

```
typedef void (__cdecl *StatusCallback)(const char* Mesg, int Status);
__declspec(dllexport) int Install(void* thing1, void* thing2, void* thing3, StatusCallback Func);

int Install(void* thing1, void* thing2, void* thing3, StatusCallback Func)
{
    Func("msg", 3);
    return 0;
} 
```

在 C# 中，我有：

```
public partial class InstallerStatus : Form
{
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void InstallStatusDel(StringBuilder Mesg, int Status);

    public static extern int Install(IntPtr thing1, IntPtr thing2, IntPtr thing3, InstallStatusDel Func);
    [DllImport("myDll.dll", CallingConvention = CallingConvention.Cdecl)]

    private IntPtr mThing1;
    private IntPtr mThing2;
    private InstallStatusDel mInstallStatusFunc;
    private BackgroundWorker mInstallWorker;

    public InstallerStatus(IntPtr pThing1, IntPtr pThing2)
    {
        InitializeComponent();

        mThing1 = pThing1;
        mThing2 = pThing2;
        mInstallStatusFunc = InstallStatusCallback;

        mProgressBar.Minimum = 0;
        mProgressBar.Maximum = 100;
        mProgressBar.Value = 0;

        mInstallWorker = new BackgroundWorker();
        mInstallWorker.DoWork += new DoWorkEventHandler(InstallWork);
        mInstallWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(InstallWork_Completed);
    }

    private void InstallWork(object sender, DoWorkEventArgs e)
    {
        Install(mThing1, mThing2, IntPtr.Zero, mInstallStatusFunc);
    }

    private void InstallWork_Completed(object sender, RunWorkerCompletedEventArgs e)
    {
        Close();
    }

    private void InstallStatusCallback(StringBuilder PartName, int Status)
    {
    }

    private void InstallLoad_Shown(object sender, EventArgs e)
    {
        mInstallWorker.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:18:10.190

通过将委托（和要匹配的回调函数签名）更改为来解决

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate void InstallStatusDel([MarshalAs(UnmanagedType.LPStr)]string Mesg, int Status); 
```

谢谢你！

# android - 使用 FFmpeg 进行 Android 相机捕捉

> ID：15280722
> 
> 赞同：9
> 
> 时间：2013-03-07T20:07:24.990
> 
> 标签：android, ffmpeg, android-camera

我正在尝试获取 android 相机生成的预览帧并将其传递`data[]`给 ffmpeg 输入管道以生成 flv 视频。我使用的命令是：

```
ffmpeg -f image2pipe -i pipe: -f flv -vcodec libx264 out.flv 
```

我也尝试强制输入格式`yuv4mpegpipe`，`rawvideo`但没有成功...... android-camera 生成的预览帧的默认格式是`NV21`. 我调用'ffmpeg的方式是通过`Process API`并将预览帧写入`data[]`进程' `stdin`......`onPreviewFrame()`定义如下：

```
public void onPreviewFrame(byte[] data, Camera camera)
{   
    try
    {
        processIn.write(data);
    }
    catch(Exception e)
    {
        Log.e(TAG, FUNCTION + " : " + e.getMessage());
    }               
    camera.addCallbackBuffer(new byte[bufferSize]);
} 
```

`processIn`连接到`ffmpeg`流程`stdin`并`buffersize`根据为 提供的文档进行计算`addCallbackBuffer()`。有什么做错了吗...？

谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T09:31:57.067

有点让它完美地工作......似乎发生的错误与`vcodec`图像流有关。似乎 ffmpeg 没有对`NV21`格式图像或图像流进行解码的规定。因为必须将`NV21`格式预览帧转换为，`JPEG`并且由于图像必须实时流式传输到该`ffmpeg`过程，所以必须进行转换`On the Fly`。`On the Fly`转换为最接近的可靠解决方案`JPEG`如下：

```
public void onPreviewFrame(byte[] data, Camera camera)
{
        if(isFirstFrame)
    {
        Camera.Parameters cameraParam = camera.getParameters();
        Camera.Size previewSize = cameraParam.getPreviewSize();
        previewFormat = cameraParam.getPreviewFormat();
        frameWidth = previewSize.width;
        frameHeight = previewSize.height;
        frameRect = new Rect(0, 0, frameWidth, frameHeight);
        isFirstFrame = false;
    }

    previewImage = new YuvImage(data, previewFormat, frameWidth, frameHeight, null);

    if(previewImage.compressToJpeg(frameRect, 50, processIn))
        Log.d(TAG, "Data : " + data.length);

    previewImage = null;

    camera.addCallbackBuffer(new byte[bufferSize]);
} 
```

使用的`ffmpeg`命令是：

```
ffmpeg -f image2pipe -vcodec mjpeg -i - -f flv -vcodec libx264 out.flv 
```

# groovy - groovy @TupleConstructor includeFields vs includeProperties

> ID：15280725
> 
> 赞同：2
> 
> 时间：2013-03-07T20:07:34.120
> 
> 标签：groovy, transform, abstract-syntax-tree

在 groovy 的注释中，和[`@TupleConstructor`](http://groovy.codehaus.org/gapi/groovy/transform/TupleConstructor.html#callSuper)有什么区别？属性是否仅包括公共 setter/getter，字段是否包括私人？我找不到与此相关的任何文档。`includeFields``includeProperties`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:12:30.357

Groovy 字段是没有 getter 和 setter 的公共属性：

```
@groovy.transform.TupleConstructor(includeFields=false) 
class Invoice {
  Integer serie, number // properties
  BigDecimal total // property
  public Integer type // this is a field
}

try {
  i = new Invoice(1, 2, 10.0, 10)
  assert false
} catch (e) {
  assert true
} 
```

# c# - 基于用户先前选择的 Else If 语句

> ID：15280727
> 
> 赞同：0
> 
> 时间：2013-03-07T20:07:38.680
> 
> 标签：c#, asp.net, html

我有一个 .aspx 文件，其中有代码，这是用户选择下拉选项的代码：

```
<td align="right">PI Organization: </td>
<td>
     <asp:DropDownList ID="ddlOrg" runat="server" TabIndex="9" AutoPostBack="True" 
                    onselectedindexchanged="ddlOrg_SelectedIndexChanged">
         <asp:ListItem Value="none">(Select One)</asp:ListItem>
         <asp:ListItem>University of Fun</asp:ListItem>
         <asp:ListItem>UOFF</asp:ListItem>
         <asp:ListItem>Other</asp:ListItem>
     </asp:DropDownList>
</td> 
```

我需要在它下方添加一个 if 语句，如果用户选择 UOFF 的趣味大学，则为 40 美元，如果用户选择其他，则为 50 美元

这是我所拥有的：

```
if(ddOrg="University of Fun"){
    fee = $40;
}
else {(ddlOrg="UOFF"){
    fee = $40;
}
else {ddOrg="Other"){
    fee = $50;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:59:51.893

您需要使用相等运算符 (==) 而不是赋值运算符。此外，您的前两个案例可以浓缩为一个。

```
 if(ddOrg == "University of Fun" || ddlOrg == "UOFF"){
    fee = $40;
} else {
    fee = $50;
} 
```

此外，您有一些放错位置的括号，并且不需要使用 else 的条件。如果确实需要条件，则必须使用`elseif`not `else`。Else 本质上意味着对于所有其他情况，因此它不需要条件，如果不满足先前的条件，它就是后备。`||`是逻辑运算符或。由于这两个条件的费用都是`if`40 美元，您不妨`if ( conditionOne OR conditionTwo)`让代码更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:52:21.057

首先，如果您想在用户提交之前显示客户端通知，我建议您删除 AutoPostBack="true"。

我还建议对每个列表项设置一个值，例如：

```
<asp:DropDownList ID="ddlOrg" runat="server" TabIndex="9" >
     <asp:ListItem Value="0">(Select One)</asp:ListItem>
     <asp:ListItem Value="1">University of Fun</asp:ListItem>
     <asp:ListItem Value="2">UOFF</asp:ListItem>
     <asp:ListItem Value="3">Other</asp:ListItem>
 </asp:DropDownList> 
```

然后，您可以使用 jQuery/javascript 根据用户的选择显示消息。

在您的 .aspx 视图中，您可以使用以下内容：

```
<%--Reference jQuery--%>
<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>

<script type="text/javascript" >
     $(document).ready(function(){
         $("#<%=ddlOrg.ClientID %>").change(function() {
             var selectedValue = parseInt($(this).val());

             //add extra logic for your options
             if (selectedValue === 1) {

                 //set the text to display
                 $("#priceNotice").html("$40");
             });
         });
     });
</script>

<span id="priceNotice"></span> 
```

如果用户选择“University of Fun”，这将导致“$40”显示在跨度中。您可以修改代码以满足您的其他选项。

# bdd - 使用 grunt 在生产代码上运行 jasmine 测试的最佳工作流程是什么？

> ID：15280733
> 
> 赞同：9
> 
> 时间：2013-03-07T20:07:58.073
> 
> 标签：bdd, jasmine, gruntjs

我在互联网上搜索了我正在尝试做的事情的描述，但无济于事。我想为我正在构建的 Web 前端进行单元测试，该前端通过使用本地主机中的 PhantomJS 加载它直接在生产代码上运行。在加载真实站点并与 dom 交互以测试所有内容后，我想运行一个 Grunt 任务，该任务通过我的规范。我几乎在那里，但我实际上无法加载页面。

如果我在 gruntfile 中的 jasmine 选项中添加一个主机项，如下所示：

```
options: {
        specs: 'spec/*Spec.js',
        helpers: 'spec/*Helper.js',
        vendor: ['app/assets/javascripts/src/libs/jquery-1.9.1.min.js', 'app/assets/javascripts/src/libs/underscore.js'],
        template: require('grunt-template-jasmine-requirejs'),
        host: "http://localhost:3000"
      } 
```

我每次都会收到超时错误。没有人在 Grunt 上下文中真正解决过这个问题，所以我不确定这个故事是什么，而且我没有运行异步测试。如果我将主机排除在外，它会成功运行测试，但只能通过本地文件系统在我的原始 javascript 文件上运行，而不是通过本地网络。如何配置我的模板以允许 Jasmine 测试在不同的主机上运行？

更新：

实际上，看起来 Grunt 实际上并没有对本地服务器进行轮询，它只是挂起并超时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:33:03.820

您需要使用[grunt-contrib-connect启动本地服务器](https://github.com/gruntjs/grunt-contrib-connect)

在您的配置中指定：

```
grunt.initConfig({
  connect: {
    server: {
      options: {
        port: 3000
      }
    }
  }  
}); 
```

添加到别名任务：

```
grunt.registerTask("default", ["connect", "your-jasmine-task"]); 
```

并运行它：

```
$ grunt default 
```

# java - MyBatis with Spring - 配置错误 Null Pointer Exception

> ID：15280734
> 
> 赞同：3
> 
> 时间：2013-03-07T20:07:58.837
> 
> 标签：java, spring, mybatis

我是一个试图整合mybatis的新手。终于落在了这个空指针异常上。

**我的 POM**

```
 <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis-spring</artifactId>
        <version>1.1.1</version>
    </dependency> 
```

**我的弹簧配置**

```
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<context:component-scan base-package="biz.canisrigel.slapMe" />

<!-- enable autowire -->
<context:annotation-config />

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost/slapMe" />
    <property name="username" value="root" />
    <property name="password" value="adminadmin" />
</bean>

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="typeAliasesPackage" value="biz.canisrigel.slapMe.bean" />
</bean>

<!-- scan for mappers and let them be autowired -->
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="biz.canisrigel.slapMe.mapper" />
</bean> 
```

**我的映射器**

```
public interface UserMapper {

UserBean getUser();

}

<mapper namespace="biz.canisrigel.slapMe.mapper.UserMapper">

<select id="getUser" resultType="UserBean">
    Select * from Users where id = 1;
</select>

</mapper> 
```

**用户 Bean**

只有几个变量

**我的 DAO**

```
@Service
public class UserDao {

@Autowired
private UserMapper userMapper;

public UserBean getUser(int id) {

    if (userMapper == null) {
        System.out.println("Errorrrrrr...................");
        // return new UserBean();
    }
    return userMapper.getUser();
}

} 
```

**控制器**

```
@Controller
@RequestMapping("/authenticate")
public class LoginController {

@RequestMapping("/index")
public String index() {
    UserDao userDao = new UserDao();
    System.out.println(userDao.getUser(1).getPassword());
    return "Login";
}

} 
```

**错误**

> org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 java.lang.NullPointerException org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:932) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:816) javax.servlet.http。 HttpServlet.service(HttpServlet.java:621)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:28:55.270

您的`UserDao`对象需要来自 Spring 对象存储以及您的映射器。像您一样在您的方法中实例化 UserDao 对象`index`将意味着映射器`null`在您进行调用时，因为 Spring 没有为您设置对象，因此无法自动连接您的映射器。

您将需要使用`@Resource`注释将您的 UserDao 对象带入您的控制器，如下所示：

```
 @Controller
 @RequestMapping("/authenticate")
 public class LoginController {

    @Resource
    UserDao userDao;

    @RequestMapping("/index")
    public String index() {
        System.out.println(userDao.getUser(1).getPassword());
        return "Login";
    }

 } 
```

# ajax - 使用带有异步 jQuery Ajax 回调的 Ember.js 模型

> ID：15280739
> 
> 赞同：1
> 
> 时间：2013-03-07T20:08:11.880
> 
> 标签：ajax, asynchronous, ember.js, couchdb, ember-router

我目前正在构建我的第一个 Ember.js 应用程序。我的问题是将 jQuery Ajax 类似调用（异步）的响应返回到`App.PostRoute`' 的`model`属性。我有点困惑，`IndexRoute`工作和`PostRoute`不工作。`couchdb.read(doc, callback)`将单个对象返回给回调，`couchdb.view(doc, func, callback)`并将对象数组返回给回调。这个 Ember.js 应用程序的主要来源是[twbrandt.github.com/2013/02/11/Ember-Quick_Start_Guide](http://twbrandt.github.com/2013/02/11/Ember-Quick_Start_Guide/)。

```
 this.App = Ember.Application.create();

    App.Router.map(function () {
        this.resource('post', { path: '/posts/:post_id' });
    });
    App.IndexRoute = Ember.Route.extend({
        model: function() {
            return App.Post.newest();
        }
    });
    App.PostRoute = Ember.Route.extend({
        model: function (parameters) {
            return App.Post.get(parameters.post_id);
        }
    });
    App.Post = Ember.Object.extend();
    App.Post.reopenClass({
        get: function (id) {
            var post;
            couchdb.read('post-' + id, function (response) {
                post = App.Post.create(response); // thanks to mavilein
            }); // gets a single post by it's id
            return post;
        },
        newest: function () {
            var posts = [];
            couchdb.view('posts', 'all?limit=10&descending=true', function (posts) {
                posts.forEach(function (post) {
                    posts.addObject(App.Post.create(post));
                }, this);
            }); // loads the 10 newest posts
            return posts;
        }
    }); 
```

**更新：**感谢[mavilein](https://stackoverflow.com/users/1073635/mavilein)的帮助，现在效果更好了！但我只是有一个问题，我不能直接访问单张贴页面（它只显示默认模板）。我总是必须先访问索引页面，然后单击指向单个帖子页面的链接。这是一个包含我的整个代码的 jsFiddle。[jsfiddle.net/dZs2X/2](http://jsfiddle.net/dZs2X/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:30:24.263

您忘记在 get 函数中创建 Post 对象（那里没有 App.Post.create）。

尝试这个：

```
 post = App.Post.create(response); 
```

PS：抱歉格式错误，但我现在在智能手机上:-)

# mysql - MySql存储过程求助！很近

> ID：15280747
> 
> 赞同：1
> 
> 时间：2013-03-07T20:08:43.650
> 
> 标签：mysql

好的，我在这本书的 MySQL 部分的最后一个问题。它是关于存储过程 (D:)。理解一些逻辑有点麻烦。我已经掌握了它的基础知识并编写了许多存储过程。但这一个令人困惑。

任何和所有的帮助都将是惊人的。

问题：

-- 4.创建一个名为 spUpdateStudent 的存储过程，它接受学生姓名和 --next of kin 信息作为参数。该过程必须通过从学生表中查找学生 ID 来将近亲信息插入到近亲表中。

我的代码：

```
DELIMITER // 
CREATE PROCEDURE `UniversityDB`.`spUpdateStudent`(In  student_first_name VARCHAR(25), next_of_kin varchar(50))
BEGIN 
    SELECT * 
    FROM next_of_kin;
  WHERE student_id = 01234;  -- Example 
  INSERT next_of_kin;
END // 
DELIMITER;
CALL spUpdateStudent(); 
```

我的数据库名称是 UniversityDB。

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:21:24.020

您快到了！

```
CREATE PROCEDURE `UniversityDB`.`spUpdateStudent`(In  p_student_first_name VARCHAR(25), p_next_of_kin varchar(50))
BEGIN
    -- Declare a variable to hold the ID of the student
    DECLARE v_student_id INT;
    -- Get the student ID
    SELECT student.id INTO v_student_id FROM student;
    WHERE student_firstname = p_student_first_name

    -- Now we have the student id lets update the next of kin table
    UPDATE next_of_kin
    SET next_of_kin.name = p_next_of_kin
    WHERE next_of_kin = v_student_id
END // 
```

我在参数名称的开头使用了“p_”，在变量名称的开头使用了“v_”。这不是（我不认为）任何特定的标准，但是我喜欢它，因为在阅读值的来源时它是有道理的。

# iphone - AppStore 更新后 iPhone 应用程序崩溃 - CoreData

> ID：15280748
> 
> 赞同：1
> 
> 时间：2013-03-07T20:08:44.957
> 
> 标签：iphone, objective-c, core-data, app-store

我刚刚设置了我的应用程序的新版本，但是在更新到新版本的设备上，应用程序在我 applicationDidFinishLaunching:WithOptions: 之后立即崩溃。我更新/添加了一些属性到我的 CoreData 数据库。

这是包含崩溃的线程。有什么帮助吗？

```
 Date/Time:       2013-03-07 18:14:47.532 +0100
    OS Version:      iOS 6.0 (10A405)
    Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  9

0   libsystem_kernel.dylib          0x3b501350 __pthread_kill + 8
1   libsystem_c.dylib               0x3807cfb2 pthread_kill + 54
2   libsystem_c.dylib               0x380b93ea __abort + 90
3   libsystem_c.dylib               0x380b9388 abort + 124
4   distribution                    0x001fed18 -[MOManager persistentStoreCoordinator] + 420
5   distribution                    0x0020000e -[NSThread(DataCore) threadContext] + 274
6   distribution                    0x001fd470 +[KwManagedObject defaultContext] + 44
7   distribution                    0x001fd6f6 +[KwManagedObject countWithPredicate:] + 26
8   distribution                    0x001fd6d6 +[KwManagedObject count] + 18
9   distribution                    0x001b3c46 +[DbThread dbCount] (DbThread.m:31)
10  distribution                    0x001b3d1a -[DbThread main] (DbThread.m:43)
11  Foundation                      0x38e69a3c __NSThread__main__ + 968
12  libsystem_c.dylib               0x3805f0de _pthread_start + 306
13  libsystem_c.dylib               0x3805efa4 thread_start + 4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:33:40.383

当您启动一个使用 CoreData 的应用程序时，该应用程序会在（默认情况下）Documents 目录中创建一个 sqlite 文件。此 sqlite 的内容由您创建的 CoreData 模型 (xcdatamodeld) 描述。当您对 CoreData 模型 (xcdatamodeld) 进行更改时，您必须使用它迁移您的 sqlite 文件。

当更改很小时，这可以由 CoreData（轻量级迁移，查看文档）自动完成。但是，当您进行重大更改时，您必须确保在更新后用户启动您的应用程序时手动迁移数据。例如，这可以通过您编写的迁移方法来完成。在使用新模型初始化任何 CoreData 对象之前，您必须执行此方法。

[我建议您在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)查看文档。在将您的应用程序提交到 AppStore 之前，请务必对其进行测试。确保您还通过在设备上安装先前版本的 adhoc ipa、启动旧版本、然后安装更新的 ipa 并再次启动应用程序来“模拟”更新。

如果您有任何问题随时问。

# c - 分配函数指针的正确方法

> ID：15280749
> 
> 赞同：13
> 
> 时间：2013-03-07T20:08:51.197
> 
> 标签：c, function-pointers

我对将函数指针分配给变量的正确语法有点困惑。如果我有一个函数 foo

```
int foo(); 
```

我将指向 foo 的指针分配给变量 bar

```
void * bar; 
```

我是否使用似乎并不重要

```
bar = foo; 
// or 
bar = &foo; 
```

在我看来，其中只有一个应该是正确的，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T20:10:10.940

`foo`和`&foo`值在 C 中是等价的并且具有相同的类型。

这里的`&`操作符是正确的，但是是多余的。

请注意，将函数指针分配给 a`void *`在 C 中是无效的。

```
void *fp1 = foo;   // invalid
int (*fp2)() = foo;  // valid
int (*fp3)() = &foo; // valid 
```

（这些实际上是声明，但适用赋值运算符的约束。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-04T20:46:56.957

让我再解释一下。

> foo 和 &foo 值在 C 中是等价的并且具有相同的类型。

正如@ouah 对答案的评论所指出的那样，这并不完全正确。特别：

1.  `sizeof(foo)`无效，并且`sizeof(&foo)`是指针的大小。
2.  `&foo`是指向 foo 的指针，while`&(&foo)`是无效的。

但是，在所有其他情况下，它们实际上是相同的，正如 C 的标准所提到的（参考例如[C11 的草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf)）：

> 6.3.2.1.4：函数指示符是具有函数类型的表达式。除非它是 sizeof 运算符或一元 & 运算符的操作数，否则**类型为“函数返回类型”的函数指示符将转换为类型为“指向函数返回类型的指针”的表达式**。

和`sizeof`一元运算`&`符是函数指示符未转换为指针时仅有的两个例外。

PS你也可以找到原因`sizeof(foo)`和`&(&foo)`无效：

> 6.5.3.2.1：一元运算`&`符的操作数应该是一个函数指示符、一个`[]`或一元运算符的结果`*`，或者一个左值，它指定一个不是位域且未使用寄存器存储声明的对象-类说明符。
> 
> 6.5.3.4.1`sizeof`运算符不得应用于具有**函数类型**或不完整类型的表达式、此类类型的括号名称或指定位域成员的表达式。

# c# - 如何从基类中获取类的名称？

> ID：15280751
> 
> 赞同：0
> 
> 时间：2013-03-07T20:08:57.253
> 
> 标签：c#, reflection

我有一个基类 BaseModel 和一个子类 SubModel。我想在 BaseModel 中定义一个函数，它将返回类的字符串名称。我为 BaseClass 的实例工作，但如果我创建一个 SubModel 实例，该函数仍然返回“BaseModel”。这是代码？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace ClassLibrary1
{
    public class BaseModel
    {
        public string GetModelName()
        {
            return MethodBase.GetCurrentMethod().ReflectedType.Name;
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ClassLibrary1;

namespace ConsoleApplication1
{
    class SubModel : BaseModel
    {

    }
} 
```

我想要这个电话：

```
SubModel test = new SubModel();
string name = test.GetModelName(); 
```

返回“子模型”。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T20:12:03.350

你可以这样做：

```
public class BaseModel
{
    public string GetModelName()
    {
        return this.GetType().Name;
    }
}

class SubModel : BaseModel
{

}

SubModel test = new SubModel();
string name = test.GetModelName(); 
```

这也是可能的：

```
string name = (test as BaseModel).GetModelName();
string name = ((BaseModel)test).GetModelName();

//both return "SubModel" 
```

# windows - 在不同的端口上将 Hudson 作为 Windows 服务运行

> ID：15280753
> 
> 赞同：0
> 
> 时间：2013-03-07T20:09:11.510
> 
> 标签：windows, service, hudson, port

我在 Windows 7 上将 Hudson 作为 Windows 服务运行。我通过从[http://hudson-ci.org/download/war/](http://hudson-ci.org/download/war/)下载最新版本作为战争文件来做到这一点。我将 war 文件放在 C:\Build\Hudson 中，然后通过在 cmd 中输入命令“C:\Build\Hudson> java -jar hudson.war”来启动它（参见[此处](http://www.eclipse.org/hudson/the-hudson-book/book-hudson.chunked/ch02.html)）。

安装完插件后，我转到“管理 Hudson”并单击“安装为 Windows 服务”。您可以在此处查看我所做的分步说明：[http](http://wiki.hudson-ci.org/display/HUDSON/Installing+Hudson+as+a+Windows+service) ://wiki.hudson-ci.org/display/HUDSON/Installing+Hudson+as+a+Windows+service 。它现在在端口 8080 上运行。我想将其更改为在端口 19091 上运行。在谷歌搜索并在 Stack Overflow 上搜索答案后，似乎执行此操作的标准方法是更改​​ Hudson.xml 中的设置，即位于 Hudson 安装目录中（请参阅[此处](http://fuzz-box.blogspot.com/2011/03/change-hudson-jenkins-default-port.html)以获取示例答案）。

问题是：对我来说没有安装目录，因为我下载了 Hudson 作为战争文件。所以我的问题是：有什么方法可以改变 Hudson 作为服务运行的端口而不重新开始，还是我需要以不同的方式进行整个过程（如果是，最好的方法是什么）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T17:10:16.083

事实证明我没有安装目录是错误的。答案确实是去安装目录，即使你下载了Hudson作为war文件，你仍然会有一个。
hudson.xml 的目录是 HUDSON_HOME.hudson\hudson.xml。
在`<service><arguments>...</arguments></service>`更改`--httpPort=8080`为`--httpPort=19091`.
我之前遇到麻烦的原因是我看不到任何以“ `.`”开头的文件夹（我不确定为什么会这样）。

# sockets - 如何使用 lua 套接字/smtp 发送附件？

> ID：15280769
> 
> 赞同：3
> 
> 时间：2013-03-07T20:09:51.830
> 
> 标签：sockets, email, lua, smtp

我有以下代码：

```
local email_credentials = function(email_address, password, username)
   local from 
   local contents = read_email_contents_file()
   contents= string.gsub(contents, "<<password>>", password)
   from = "<CAdmin@test.net>"
   rcpt = {
   "<"..email_address..">"
   }
   mesgt = {
      headers = {
         to = email_address,
         ["content-type"] = 'text/html',
         subject = "Your Password"
     },
       body = contents
  }

  r, e = smtp.send{
     from = from,
     rcpt = rcpt,
     server = 'localhost', 
     source = smtp.message(mesgt)
  }
end 
```

找到这个帖子：

[http://lua-users.org/lists/lua-l/2005-08/msg00021.html](http://lua-users.org/lists/lua-l/2005-08/msg00021.html)

我尝试将标题部分更改为：

```
 headers = {
     to = email_address,
     ["content-type"] = 'text/html',
     ["content-disposition"] = 'attachment; filename="/var/log/test.log"',
     subject = "test email with attachment"
 }, 
```

但这没有用。发送/接收但没有附件的电子邮件。

任何帮助，将不胜感激。

谢谢

**编辑 1**

我添加了以下两行：

```
 ["content-description"] ='test description',
 ["content-transfer-encoding"] = "BASE64" 
```

现在我得到一个附件。然而，所有的数据都是杂乱无章的。看起来像这样：

> =«,ÂŠÝrm/'LŒq©ÚuÜ!j×¯z»^ÆÜÁ©í¶‹aŠÇ¦j)

文件的内容只是文本....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:35:24.950

我找到了答案。需要包含库 ltn12。

[http://w3.impa.br/~diego/software/luasocket/old/luasocket-2.0-beta2/ltn12.html](http://w3.impa.br/~diego/software/luasocket/old/luasocket-2.0-beta2/ltn12.html)

我更新了我的代码，使其如下所示：

```
local email_withattachment = function(email_address, path, filename)
   local from 
   if (email_address == nil) or (path == nil) or (filename == nil) then
    return false
   end

   from = "<admin@test.net>"
   rcpt = {
   "<"..email_address..">"
   }
   mesgt = {
      headers = {
         to = email_address,
         ["content-type"] = 'text/html',
         ["content-disposition"] = 'attachment; filename="'..filename..'"',
         ["content-description"] ='yourattachment',
         ["content-transfer-encoding"] = "BASE64",
         subject = "subject line"
     },
      body = ltn12.source.chain(
        ltn12.source.file(io.open(path..filename, "rb")),
        ltn12.filter.chain(
          mime.encode("base64"),
          mime.wrap()
          )
        )
  }

  r, e = smtp.send{
     from = from,
     rcpt = rcpt,
     server = 'localhost', 
     source = smtp.message(mesgt)
  }
  if e then
    return false
  end
  return true
end 
```

我仍在尝试通读 LTN12 手册以了解我到底在做什么（大声笑），但代码有效。

希望这对其他人有帮助。

# javascript - 调用嵌套函数

> ID：15280771
> 
> 赞同：0
> 
> 时间：2013-03-07T20:09:53.023
> 
> 标签：javascript, google-maps, google-maps-api-3, nested

我试图每 10 秒重绘一次图像。通过使用

 `````
 $(document).ready(function() {
setInterval("marker()",10000);
}); 
```` 

`但是initialize（）函数中的marker（）函数我怎样才能只访问marker来为上面的setInterval工作`

 ``````
 function initialize(x,y) {
  var myLatlng = new google.maps.LatLng(x,y);
  var mapOptions = {
  zoom: 4,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
 }
 var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
 marker(x,y);
 function marker(){
   var image = 'myimage.png';
   var myLatLng = new google.maps.LatLng(x, y);
   var beachMarker = new google.maps.Marker({
   position: myLatLng,
   map: map,
   icon: image
   });
 }
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:12:09.247

只需将其更改为

```
setInterval(marker, 10000); 
```

并将其移至该`marker`功能可用的范围内，即移至`initialize`.````

# azure - 天蓝色从已删除的虚拟机中分离磁盘

> ID：15280773
> 
> 赞同：2
> 
> 时间：2013-03-07T20:09:54.513
> 
> 标签：azure, virtual-machine, disk

我在 Azure 上有一个虚拟机停止响应，所以我删除了它，希望使用相同的 vhd 重新创建它。但是删除虚拟机后，磁盘仍然以某种方式连接到虚拟机，因此我无法使用 vhd 重新创建虚拟机。我已经尝试使用 Windows Powershell ISE 导入 publishsettings 文件，然后使用 Remove-AzureDisk 命令，但结果是`HTTP Status Code: BadRequest - HTTP Error Message: A disk with name *diskname* is currently in use by virtual machine *VMName* running within hosted service *dnsname*, deployment *deploymentname*.`

任何想法如何解决这一问题？我宁愿不必删除 vhd，因为重新上传它很痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:43:59.777

我已经看过很多次了。磁盘上的保留应在 15 分钟左右释放。我从来没有见过它比这更持久。

如果一切都失败了，您可以尝试打破 BLOB 上的租约并使用它重新创建一个 DISK。我在这里对此有所了解：http: [//www.biztalkgurus.com/windows_azure/m/windows_azure/37137.aspx](http://www.biztalkgurus.com/windows_azure/m/windows_azure/37137.aspx)

# java - 在方法中格式化货币？

> ID：15280776
> 
> 赞同：2
> 
> 时间：2013-03-07T20:10:01.950
> 
> 标签：java

```
public String toString() //toString withing Shiftsupervisor class
{
    String employee = name + ", " + iD + ", " + hireDate + ", $" + AnnualSal + ", $" + ProdBonus;
    return employee;
} 
```

主要：

```
ShiftSupervisor supervisor1 = new ShiftSupervisor("John Smith", "123-A", "11-15-2005", 48000, 6500);

System.out.println(supervisor1); 
```

我已经在我的 toString 中添加了“$”，但我希望它输出最后两个双精度为 48,000 和 6,500 << 添加逗号！

我可以在我的 setMethods 中这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:18:13.513

不要重新发明轮子。使用[`NumberFormat#getCurrencyInstance`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#getCurrencyInstance%28%29)已经为您处理的。这是一个例子：

```
NumberFormat cnf = NumberFormat.getCurrencyInstance(Locale.US);
System.out.println(cnf.format(48000)); // prints $48,000.00 
```

如果要省略小数部分，只需使用[`NumberFormat#setMaximumFractionDigits`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#setMaximumFractionDigits%28int%29)：

```
NumberFormat cnf = NumberFormat.getCurrencyInstance(Locale.US);
cnf.setMaximumFractionDigits(0);
System.out.println(cnf.format(48000)); // prints $48,000 
```

在你的方法中实现这个：

```
NumberFormat cnf = NumberFormat.getCurrencyInstance(Locale.US);
String employee = name + ", " + iD +
    ", " + hireDate +
    ", " + cnf.format(AnnualSal) +
    ", " + cnf.format(ProdBonus); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:16:37.077

> 我可以在我的 setMethods 中执行此操作吗？

是的，你可以，但你不想。相信我这个。

通常，您将原始值（int、double、float）保留在类中，并在 get 方法中对其进行格式化。这使您可以根据不同的需求以不同的方式格式化您的类输出。

# c# - 如何将 NULL C# 字符串传递给 C++/CX 或 WinRT？

> ID：15280777
> 
> 赞同：4
> 
> 时间：2013-03-07T20:10:02.837
> 
> 标签：c#, string, null, windows-runtime, c++-cx

我正在用 WinRT 编写一个简单的应用程序，并希望 C++ 位进行一些处理。如果函数要忽略参数，我希望能够传递 null ，因为空字符串意味着一些东西以及一个值。

我的 C# 代码：

```
UnsafeNativeMethods.TestString(null); 
```

我的 C++ 代码：

```
void UnsafeNativeMethods::TestString(String^ test)
{
} 
```

我一直`NullReferenceException`在`System.StubHelpers.HStringMarshaler.ConvertToNativeReference`.

有没有办法将 null 传递给这个方法？

**再次编辑**

这就是我所拥有的一切：

```
public ref class UnsafeNativeMethods sealed
{
public:
    static void TestString(Platform::String^ test);
}; 
```

我刚刚创建了一个新的 Windows Phone 8 应用程序，这是完全的例外：

```
System.ArgumentNullException: Value cannot be null.
    at System.StubHelpers.HStringMarshaler.ConvertToNativeReference(String managed, HSTRING_HEADER* hstringHeader)
    at WindowsPhoneRuntimeComponent1.UnsafeNativeMethods.TestString(String test)
    at PhoneApp2.MainPage..ctor() 
```

任何地方都没有花哨的代码，只有上面的代码和一个全新的项目（一个 C# WP8 应用程序和一个 WP 运行时组件项目）

# php - 检查 Javascript/PHP 小部件中的链接

> ID：15280778
> 
> 赞同：0
> 
> 时间：2013-03-07T20:10:03.210
> 
> 标签：php, javascript, security, widget, copy-protection

我创建了自己的 Javascript/PHP 小部件，该小部件从我的网站获取信息，并允许其他用户自行放置。我想知道如何进行一些“链接保护”。我制作小部件的原因是我可以从那些决定在他们的网站上使用我的小部件的人那里获得一些有价值的链接。我从中获得教程的网站是

[http://php-drops.blogspot.ca/2011/04/creating-widget-with-javascript-and-php.html](http://php-drops.blogspot.ca/2011/04/creating-widget-with-javascript-and-php.html)

当我查看源代码时，该站点的链接是不可见的，因为它是在 iframe 中显示的。我想要做的是放置一个单独的`<div>`，它会有类似的东西

```
<div id="my_copyright">Data provided by <a href="http://www.example.com">Example.com</a></div> 
```

我将如何保护数据，以便如果用户尝试删除链接、将`<a>`标签更改为 a`rel="nofollow"`或任何其他“变通办法”，数据将不会加载并发布 alert() 并且不会加载数据？

任何帮助都会很棒！该脚本目前使用 1 个 JS 文件 1 个 PHP 文件，从 MySQL 中提取数据并打印出所需的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:49:52.817

正如 Barmar 建议的那样，您唯一的选择是通过默默无闻来确保安全。成功与否取决于您的听众。对于一个随便的网站管理员来说，这可能会阻止他更改您的代码。它只是增加了“不能被嘲笑”的因素。

1）缩小你的代码： http: [//fmarcia.info/jsmin/test.html](http://fmarcia.info/jsmin/test.html)

2) 使用 JS 打包器/混淆器： http: [//dean.edwards.name/packer/](http://dean.edwards.name/packer/)

# c# - httpwebrequest getresponse() 不返回任何内容，而提琴手显示内容

> ID：15280782
> 
> 赞同：2
> 
> 时间：2013-03-07T20:10:12.930
> 
> 标签：c#, httpwebrequest, httpwebresponse

我创建了用于从显示的 Url 请求数据的`GetCourses()`方法。`HttpWebRequest`如果我将 url 复制粘贴到浏览器中，浏览器将显示 xml 数据。我还使用提琴手做一些请求。在提琴手上，它说数据已编码，我必须对其进行解码。所以，我点击了解码，我可以看到 XML。但是，使用下面的代码，我得到了 Content-Length=-1。

```
public static void GetCourses()
    {
        try
        {
            HttpWebRequest requestForItCourse =
               (HttpWebRequest)WebRequest.Create("http://www.mnsu.edu/schedule/direct.php?action=courses&term=20135&subject=it");
            requestForItCourse.AutomaticDecompression = DecompressionMethods.GZip|DecompressionMethods.Deflate;
            HttpWebResponse responseFromMnsuDirectPhp =
                (HttpWebResponse)requestForItCourse.GetResponse();

            Stream dataStream = responseFromMnsuDirectPhp.GetResponseStream();
            responseFromMnsuDirectPhp.Close();
//Parse and insert courses into the database
        }
        catch (Exception ex)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:18:27.093

您需要在关闭响应之前阅读响应流。

试试这个：

```
HttpWebRequest requestForItCourse = (HttpWebRequest)WebRequest.Create("http://www.mnsu.edu/schedule/direct.php?action=courses&term=20135&subject=it");
requestForItCourse.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
HttpWebResponse responseFromMnsuDirectPhp = (HttpWebResponse)requestForItCourse.GetResponse();

StreamReader dataStream = new StreamReader(responseFromMnsuDirectPhp.GetResponseStream());
string data = dataStream.ReadToEnd();

responseFromMnsuDirectPhp.Close();
dataStream.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:19:50.363

这在我运行时有效。您需要在关闭流之前阅读它。作为旁注，许多人更喜欢使用`using`关键字自动关闭他们的流。

```
try
{
    HttpWebRequest requestForItCourse = (HttpWebRequest)WebRequest.Create("http://www.mnsu.edu/schedule/direct.php?action=courses&term=20135&subject=it");
    requestForItCourse.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
    HttpWebResponse responseFromMnsuDirectPhp =
                (HttpWebResponse)requestForItCourse.GetResponse();

    string raw_xml;
    using(var sr = new StreamReader(responseFromMnsuDirectPhp.GetResponseStream()))
    {
        raw_xml = sr.ReadToEnd();
    }

    //Parse and insert courses into the database
}
catch (Exception ex)
{

} 
```

# javascript - 解开嵌套的无序列表并在 IE/Chrome/FF 中水平显示

> ID：15280784
> 
> 赞同：1
> 
> 时间：2013-03-07T20:10:20.307
> 
> 标签：javascript, jquery, html, css, nested-lists

我已经在谷歌上搜索了大约一个星期，但我找不到适用于所有三种浏览器的解决方案。我正在尝试找到一种使用跨平台 css 水平输出嵌套无序列表的方法。

我在这里做了一个模拟：http: [//jsfiddle.net/gNqJb/](http://jsfiddle.net/gNqJb/)如果您单击第 1 层和第 2 层块（菜单开始展开，因此您需要首先执行此操作），您将看到我想要的功能。这个想法是，如果您单击菜单标题，它将在标题旁边水平展开子菜单。此代码的问题在于子菜单位于列表项块 (<.li>) 之外。此外，它在 IE 中根本不起作用。在此示例中，名称中带有 * 的所有内容都是标题块。

因为我正在使用 Drupal，所以我被它的菜单卡住了，这些菜单的输出如下：

```
<ul class="menu">
    <li class="first expanded"><a href="#" class="active">Home</a>
        <ul class="menu">
            <li class="first last leaf"><a href="#" class="active">Test</a></li>
        </ul>
    </li>
    <li class="first expanded"><a href="#" class="active">Home</a>
        <ul class="menu">
            <li class="first last leaf"><a href="#" class="active">Test</a></li>
        </ul>
    </li>
    <li class="first expanded"><a href="#" class="active">Home</a>
        <ul class="menu">
            <li class="first last leaf"><a href="#" class="active">Test</a></li>
        </ul>
    </li>
    <li class="first expanded"><a href="#" class="active">Home</a>
        <ul class="menu">
            <li class="first last leaf"><a href="#" class="active">Test</a>
                <ul class="menu">
                    <li class="first last leaf"><a href="#" class="active">Test</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li class="last leaf"><a href="#" class="active">Test Outside</a></li>
</ul> 
```

当我对其应用格式时，我得到了这个：http: [//jsfiddle.net/C2eU4/](http://jsfiddle.net/C2eU4/)

我将不胜感激在使用 Drupal 修复此布局以在 IE/Chrome/FF 中使用的任何帮助。

提前感谢你们可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:04:50.140

好吧，我有一个纯 CSS 解决方案，至少可以让您了解它应该如何工作。需要注意的是，动画目前仅适用于 webkit 浏览器。

[在这里提琴](http://jsfiddle.net/C2eU4/3/)

以下是对 CSS 的相关更改：

```
li ul {
    width:0px;
    position: absolute;
    left:100%;
    top: -1px;
    overflow:hidden;
    -webkit-animation-name: slide;
   animation-name: slide;
   -webkit-animation-duration: .5s;
   animation-duration: .5s;
   -webkit-animation-timing-function: ease-in-out;
   animation-timing-function: ease-in-out;
   -webkit-animation-direction: reverse;
   animation-direction: reverse;
}
li + li{
   -webkit-animation-name: push;
   animation-name: push;
   -webkit-animation-duration: .5s;
   animation-duration: .5s;
   -webkit-animation-timing-function: ease-in-out;
   animation-timing-function: ease-in-out;
   -webkit-animation-direction: reverse;
   animation-direction: reverse;
}
li:hover ul {
   -webkit-animation-name: slide;
   animation-name: slide;
   -webkit-animation-duration: .5s;
   animation-duration: .5s;
   -webkit-animation-timing-function: ease-in-out;
   animation-timing-function: ease-in-out;
   -webkit-animation-direction: normal;
   animation-direction: normal;
   display:inline-block;
   width: 100px;
}
li:hover + li {
   -webkit-animation-name: push;
   animation-name: push;
   -webkit-animation-duration: .5s;
   animation-duration: .5s;
   -webkit-animation-timing-function: ease-in-out;
   animation-timing-function: ease-in-out;
   -webkit-animation-direction: normal;
   animation-direction: normal;
   margin-left: 100px;
}
@-webkit-keyframes slide{
   from {
     width: 0px;  
    }
   to {
     width: 100px;  
    }
}
@-webkit-keyframes push{
   from {
     margin-left:0px;}
   to {
     margin-left:100px;}
   }
} 
```

**编辑：**

好吧，我继续为 jQuery 做了这件事。缓慢的一天，我猜：

[在这里提琴](http://jsfiddle.net/C2eU4/2/)

# php - PHP每n秒运行一次python脚本

> ID：15280787
> 
> 赞同：0
> 
> 时间：2013-03-07T20:10:38.967
> 
> 标签：php, python, command-line, cron, nohup

我有一个 python 脚本，我想每隔 n 秒运行一次。我希望能够使用 PHP 页面启动脚本。我希望它在后台运行，这样我就可以访问我的页面，点击“开始”，离开页面，几个小时后回来，然后停止整个过程。

我正在尝试构建一个网络界面，用于每隔 n 秒从网络摄像头捕获一次屏幕截图，以便稍后将图像序列编译成延时视频。

我尝试使用的命令是：

```
nohup watch -n20 python imgDownload.py & 
```

这通常在我直接输入命令行时有效，但在 PHP 中输​​入时

```
$cmd = 'nohup watch -n20 python imgDownload.py &';
$output = shell_exec($cmd); 
```

或者

```
exec($cmd, $output); 
```

甚至

```
$cmd = 'nohup watch -n20 python ' . dirname(__FILE__) . '/imgDownload.py &'; 
```

它不起作用。

我知道 shell_exec() 有效，因为我可以成功运行以下命令：

```
echo shell_exec("echo 'hi, there'"); 
```

它在页面上放置“嗨，那里”，就像它应该的那样。

任何想法为什么它不起作用？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:08:06.320

使用 exec 并将输出重定向到 /dev/null，这将导致 php 不等待命令完成：

```
$cmd = 'nohup watch -n20 python imgDownload.py &';
exec($cmd . " > /dev/null &"); 
```

# java - 如果不存在则休眠忽略列

> ID：15280789
> 
> 赞同：0
> 
> 时间：2013-03-07T20:10:43.360
> 
> 标签：java, hibernate, jpa

好的，问题是我有一个对不同数据库进行查询的应用程序，并且一些实体缺少列。有没有办法在不使用继承的情况下忽略丢失的列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T09:57:50.557

根据您的需要有不同的可能性：

1.  如果您从不需要这些仅存在于某些数据库中的额外列，那么您只需不在映射（或注释）中定义它们。然后它们永远不会被 Hibernate 读取，并且在插入时将列设置为 null（如果您想要不同于 null 的值，您可以在数据库中定义默认值或触发器）。

2.  如果您需要额外的列（当它们存在时），那么您需要为不同的数据库进行不同的映射。对于这种情况，最好使用 xml 映射文件。无论如何，每个数据库都有一个单独的 hibernate.cfg.xml（连接字符串在那里）。在此处为具有不同列的表指定不同的映射文件（标签`<mapping resource="..." />`）。Java pojo，即Java 类，对于所有数据库都是相同的，它包含存在于任何数据库中的所有列，但是在特定于数据库的映射文件中，您只将这些列映射到该数据库中真正存在的Java 成员。（使用注释这很烦人，因为您需要为不同的数据库使用不同的 Java 类，并且您必须处理代码中的逻辑。）

3.  如果表是只读的，那么您可以在该表上定义一个数据库视图，并让该视图为缺少的列提供默认值。然后在 Hibernate 中映射视图而不是表。

# css - 为什么这个 CSS 动画在 IE10 中不起作用？

> ID：15280791
> 
> 赞同：3
> 
> 时间：2013-03-07T20:10:50.417
> 
> 标签：css, internet-explorer-10, css-animations

[这个 JSFiddle](http://jsfiddle.net/zFavB/)包含一个 CSS 动画，适用于 Chrome、Firefox 和 Safari，但不适用于 IE 10。我知道 IE 10[不需要](http://msdn.microsoft.com/en-us/library/windows/apps/hh453858.aspx) [前缀](http://msdn.microsoft.com/en-us/library/windows/apps/hh772212.aspx)，所以`-ms-`不可能。我看不出有什么问题：

```
@keyframes snapVertical {
  0% { background-position: 0 0; }
  16% { background-position: 0 0; }
  21% { background-position: 0 -136px; }
  37% { background-position: 0 -136px; }
  42% { background-position: 0 -272px; }
  58% { background-position: 0 -272px; }
  63% { background-position: 0 -136px; }
  79% { background-position: 0 -136px; }
  84% { background-position: 0 0; }
  100% { background-position: 0 0; }
}
.animation-snap-vertical {
  animation: snapVertical 4s cubic-bezier(0.165, 0.840, 0.440, 1.000) 0s infinite;
} 
```

为什么这在 IE 10 中不起作用？

**编辑**

为什么水平的有效，但垂直的（[小提琴](http://jsfiddle.net/zFavB/1/)）无效？

水平动画：

```
@keyframes snapHorizontal {
  0% { background-position: 0 0; }
  16% { background-position: 0 0; }
  21% { background-position: -176px 0; }
  37% { background-position: -176px 0; }
  42% { background-position: -352px 0; }
  58% { background-position: -352px 0; }
  63% { background-position: -176px 0; }
  79% { background-position: -176px 0;}
  84% { background-position: 0 0; }
  100% { background-position: 0 0; }
}
.animation-snap-horizontal {
  animation: snapHorizontal 4s cubic-bezier(0.165, 0.840, 0.440, 1.000) 0s infinite;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:43:40.237

它看起来像 IE 中的一个错误（参见[类似的 SO 问题](https://stackoverflow.com/questions/14218265/css-background-image-sprite-position-transition-goes-in-different-direction-in-i)）。为了解决这个问题，我只是将初始偏移量和最终偏移量更改为 0.1px 而不是 0。这似乎解决了问题。解决方案代码（[jsfiddle](http://jsfiddle.net/zFavB/2/)）：

```
@keyframes snapVertical {
  0% { background-position: 0 0.1px; }
  16% { background-position: 0 0.1px; }
  21% { background-position: 0 -136px; }
  37% { background-position: 0 -136px; }
  42% { background-position: 0 -272px; }
  58% { background-position: 0 -272px; }
  63% { background-position: 0 -136px; }
  79% { background-position: 0 -136px; }
  84% { background-position: 0 0.1px; }
  100% { background-position: 0 0.1px; }
}
.animation-snap-vertical {
  animation: snapVertical 4s cubic-bezier(0.165, 0.840, 0.440, 1.000) 0s infinite;
} 
```

# asp.net - 如何读取整个 Web.Config 文件并将其放入集合中？

> ID：15280795
> 
> 赞同：1
> 
> 时间：2013-03-07T20:10:57.970
> 
> 标签：asp.net, collections, web-config, settings

是否可以读取 web.config 文件的全部内容并将其放入某种类型的集合中？

appSettings（它又具有其他设置键/值） mailSettings（它又具有其他设置键/值） system.web（它又具有其他设置键/值）

ETC...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:18:51.010

`WebConfigurationManager`应该已经包含`AppSettings`（或其他部分）的集合。

请参阅：[https ://stackoverflow.com/a/4595323/1737862](https://stackoverflow.com/a/4595323/1737862)

# java - 使用 DocumentFilter 只接受 JTextField 中的双精度值

> ID：15280798
> 
> 赞同：0
> 
> 时间：2013-03-07T20:11:05.293
> 
> 标签：java, swing, double, jtextfield, documentfilter

有没有办法使用 documentfilter 在 JTextField 中只接受双精度值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:17:06.797

你会想要使用一个[`DocumentFilter`](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)

这将允许您在传入的内容到达文档之前对其进行“过滤”。

查看[这些示例](http://www.jroller.com/dpmihai/entry/documentfilter)以获取更多想法

你也可以试试看[`JFormattedTxtField`](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)哪个可能更容易，但那有什么好玩的

# php - 当单数存在时，Gettext 不会解析复数形式

> ID：15280802
> 
> 赞同：1
> 
> 时间：2013-03-07T20:11:23.170
> 
> 标签：php, internationalization, gettext, poedit, plural

这是我的情况：我通过 Poedit 使用 gettext 来翻译 PHP 应用程序。我有一个复数的自定义函数：

```
function ListOutput($result,$column_names,$singular='.',$plural='.',$link=false,$group=array(),$options=array()) 
```

在 Poedit 中用这个**关键字**引用它：`ListOutput:3,4`。

现在，我的问题是，当我有一个要翻译的字符串时，我使用`_('example_string')`，但是如果我稍后通过 翻译它`ListOutput($result,$column_names,'example_string', 'example_string_plural')`，只有*example_string*会出现在 Poedit 中。

此外，我应该说这个问题有时会出现，其他时候，我会有复数形式和单数形式（所以，单数字符串 2 次......）。

注意 1：如果字符串仅在*ListOutput()*中引用，复数形式将正确出现在 Poedit 中。

注意2：*ListOutput()*函数调用*ngettext()*并将列表元素的数量作为第三个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:18:43.597

我对这种`xgettext`行为并不感到惊讶。在 Gettext 中，（未翻译的）字符串是 ID——目录中不能有两个具有相同 ID 的不同条目。这没有任何意义，不是吗？

您要求使用两个相互冲突的定义`xgettext`写入`msgid "example_string"`ePO 目录：作为单一形式条目（来自`_()`事件）或作为具有复数形式的条目（来自`ListOutput()`调用）。如果它报告错误会更好，但它也只选择第一个定义并不完全令人惊讶。

无论如何，这似乎很可疑——同一个字符串怎么能以两种方式正确使用？这两种用法中的一种很可能是不正确的。如果它确实是合法的，您可以使用`msgctxt`来消除这两个字符串的歧义。

# html - 如何在部分中设置边距？

> ID：15280803
> 
> 赞同：-1
> 
> 时间：2013-03-07T20:11:27.180
> 
> 标签：html, css

无法理解如何在包装元素中设置边距。例如我有

```
<body>
    <section id="main">
        <div id="video">

        </div>

    </section>
</body>

section#main{
    width: 960px;
    margin: 7% auto 0;
    background: #000;
    opacity: 0.86;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px; 
}

div#video{
    border: 1px solid red;
    width: 640px;
    height: 360px;
    margin: 10px;
} 
```

![在此处输入图像描述](../Images/dedd98ba39f618446bdd04742722848e.png)

如您所见 - 仅在左右边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:13:07.293

保证金在某些情况下[会崩溃。](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)为什么不使用填充？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:13:25.020

你看到的是一个[**折叠边距**](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)的例子。添加`overflow:auto;`到`section#main`

**[jsFiddle 示例](http://jsfiddle.net/YUF4d/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:14:41.540

好吧：**margin: 7% auto 0** 将渲染有**margin:0 auto**因为你的外部容器没有高度。

# ios - 主从申请

> ID：15280805
> 
> 赞同：-2
> 
> 时间：2013-03-07T20:11:33.867
> 
> 标签：ios, xcode-template

嗨，我想做的是将标签添加到 msater 详细应用程序模板。有人能帮我吗？我还想让每个选项卡都有一个表格视图，您可以在其中添加新项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:29:11.473

You can refer to the following answer with links:

Answer: [SplitViewController with TabbarController](https://stackoverflow.com/questions/9680532/splitviewcontroller-with-tabbarcontroller)

Direct Links:

[https://github.com/mattgemmell/MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)

[http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial](http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial)

[http://mikebluestein.wordpress.com/2010/04/03/using-a-uisplitviewcontroller-to-create-a-master-detail-ipad-app-with-monotouch/](http://mikebluestein.wordpress.com/2010/04/03/using-a-uisplitviewcontroller-to-create-a-master-detail-ipad-app-with-monotouch/)

# sql - 如何性能调优 oracle 查询

> ID：15280811
> 
> 赞同：0
> 
> 时间：2013-03-07T20:11:59.403
> 
> 标签：sql, oracle, performance

谁能推荐 Oracle DB 查询性能调优的最佳实践？是否有符合行业标准的免费或付费应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:19:19.303

行业标准将是“视情况而定”。

如果您有数据库的企业版和性能和调优包，Oracle 提供了许多工具，如 SQL Tuning Advisor 来帮助您调优特定的 SQL 语句。它提供了 AWR（自动工作负载存储库）和 ASH（活动会话历史）表以及各种实用程序来报告和使用这些表，以帮助您识别需要调整的语句或系统问题。它有帮助您调整内存配置的顾问。有许多书籍专门介绍 Oracle 提供的许多不同工具。

但是，一般来说，有些事情需要知识渊博的人。自动化工具可以建议查询可能受益于附加索引。人类可以查看查询，了解底层数据，并意识到可以重写查询本身，通过使用分析函数而不是进行一堆自连接来大幅提高性能。人类可以识别出自动化工具可能存在问题的地方，以及解决应用程序问题（例如缺少绑定变量）更有意义的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:53:41.223

Oracle 附带了一个名为 Explain Plan 的工具。这让您了解 Oracle 将如何处理给定的查询。

有关解释计划的一些信息可以在 ORAFAQ 中找到：[了解解释计划](http://www.orafaq.com/node/1420)

请注意，解释解释计划需要一些数据库管理艺术方面的经验。即使找到哪些查询是需要观察的查询也是一种艺术形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T23:08:54.073

有很多关于这方面的 Oracle 文档。

这是一些[SQL 调优概述](http://docs.oracle.com/cd/B19306_01/server.102/b14211/sql_1016.htm)

您应该了解[查询优化器](http://docs.oracle.com/cd/B28359_01/server.111/b28274/optimops.htm#PFGRF001)的作用。

阅读一些[性能调优](http://docs.oracle.com/cd/B10501_01/text.920/a96517/aoptim.htm)。

在高层次上，它从添加索引和在不同类型的连接之间切换开始。但它背后还有更奇怪的东西。

# ios - ios 配置文件错误

> ID：15280812
> 
> 赞同：1
> 
> 时间：2013-03-07T20:12:02.013
> 
> 标签：ios, provisioning-profile, marmalade

我正在尝试构建包含配置文件的应用程序的开发版本（用于推送通知）并且无法安装它。[正如http://docs.madewithmarmalade.com/native/platformguides/iosguide/iossigning/iossigningassetssetup.html](http://docs.madewithmarmalade.com/native/platformguides/iosguide/iossigning/iossigningassetssetup.html)所说，我已经清除了所有证书并逐步重建它们。当我在 mkb 文件中包含 iphone-provisioning-profile 时，我已成功构建，但如果我尝试在 iPhone 5/iPad 3 上安装它，则会出现安装错误。如果我在没有配置文件的情况下构建应用程序 - 安装过程正常。所有设备都上传了实际的 .provisionprofile 文件，iOS 6.1.2。

```
Marmalade Makefile Builder v6.2.1 [336699]
Copyright (C) 2001-2012 Marmalade.
e:\Marmalade\6.2\s3e\makefile_builder\mkb.py --verbose=1 e:/Marmalade/6.2/examples/s3e/s3eIOSNotifications/s3eIOSNotifications.mkb --deploy-only
Building project: e:/Marmalade/6.2/examples/s3e/s3eIOSNotifications/s3eIOSNotifications.mkb
setting root dir: e:\marmalade\6.2\examples\s3e
loading mkf: [e:\marmalade\6.2\examples\s3e] 'ExamplesMain'
loading mkf: [e:\marmalade\6.2\extensions] 's3eIOSNotifications'
loading mkf: [e:\marmalade\6.2\modules] 'iwutil'
package is deprecated
adding package reference: C:\DOCUME~1\Owner\APPLIC~1\Marmalade\packages\6.2.1\libjpeg_6b
loading mkf: [C:\DOCUME~1\Owner\APPLIC~1\Marmalade\packages\6.2.1\libjpeg_6b] 'libjpeg'
adding package reference: C:\DOCUME~1\Owner\APPLIC~1\Marmalade\packages\6.2.1\libpng_1.2.34
loading mkf: [C:\DOCUME~1\Owner\APPLIC~1\Marmalade\packages\6.2.1\libpng_1.2.34] 'libpng'
package is deprecated
adding package reference: C:\DOCUME~1\Owner\APPLIC~1\Marmalade\packages\6.2.1\zlib_1.2.4
loading mkf: [C:\DOCUME~1\Owner\APPLIC~1\Marmalade\packages\6.2.1\zlib_1.2.4] 'zlib'
using build directory 'build_s3eiosnotifications_vc9'
adding PATH: e:\marmalade\6.2\s3e\gcc\bin
using gcc toolchain: arm-none-eabi-gcc []
using RVCT version: 5.2
adding PATH: E:\DS-5\bin
using RVCT from: E:\DS-5\bin
found app.icf in data dir
adding PATH: e:\marmalade\6.2\s3e\bin
Wrote file 'deploy_config.py'.
adding PATH: e:\marmalade\6.2\tools\gcc\mips\android_mips_windows\bin
using gcc_mips toolchain: mipsel-linux-android-gcc []
Wrote file 'linker_script'.
done
Doing: "Package" on Configuration Default to iphone
running s3e_deploy commandline: "e:\marmalade\6.2\s3e\python\python.exe" "E:\Marmalade\6.2\s3e\deploy\main.py" "-n" "--os" "iphone" "--arch" "arm" "e:\Marmalade\6.2\examples\s3e\s3eIOSNotifications\build_s3eiosnotifications_vc9\deploy_temp.py"
CWD=e:\Marmalade\6.2\examples\s3e\s3eIOSNotifications\build_s3eiosnotifications_vc9
Marmalade Deployment Tool v1.3
Copyright (C) 2001-2012 Marmalade
Licensed Platforms=NONE, current platform=iphone
WARNING: temporary folder already exists (e:\Marmalade\6.2\examples\s3e\s3eIOSNotifications\build_s3eiosnotifications_vc9\deployments\default\iphone\release.old)
deploying s3eIOSNotifications [0.0.1] [arm-release] for 'iphone' to folder: 'deployments\default\iphone\release\intermediate_files'
--> copying files ...
Not using generic splashscreens for iOS
--> updating s3e binary: compression=none signing=0 config-embedding=1
 [execute] s3e_mod.exe
--> performing custom deployment steps for: 'iphone'
Linking iOS loader with extension library s3eIOSNotifications
 [execute] ld64.exe
WARNING: No iPhone portrait splashscreen specified.  Using the generic splash screen.
WARNING: No iPad portrait splashscreen specified.  Using the generic splash screen.
WARNING: No iPad landscape splashscreen specified.  Using the generic splash screen
WARNING: Expanding smaller image (e:/marmalade/6.2/examples/resources/splashscreens\splash_640.png) to (768x1024)
 [execute] s3eRelocate
 [execute] mod_apple_loader.pyc
Embedding provisioning profile in app
signing with Developer entitlements: NOT for App Store
provisioning profile does not specify 'aps-environment' - push notifications and email will not work
App ID from info.plist: 38ZJGRK9WD.38ZJGRK9WD.com.findandtry.findandtry2
Provisioning profile app ID matches: 38ZJGRK9WD.com.findandtry.findandtry2
created temp.xcent
 [execute] codesign.exe
creating .app zip: deployments\default\iphone\release\s3eIOSNotifications.app.zip
adding app_dir to zip: deployments\default\iphone\release\intermediate_files\s3eIOSNotifications.app
creating IPA: deployments\default\iphone\release\s3eIOSNotifications.ipa
creating ipa: deployments\default\iphone\release\s3eIOSNotifications.ipa
adding app_dir to zip: deployments\default\iphone\release\intermediate_files\s3eIOSNotifications.app
SUCCESS (WITH WARNINGS): EVALUATION USE ONLY package written to 'e:\Marmalade\6.2\examples\s3e\s3eIOSNotifications\build_s3eiosnotifications_vc9\deployments\default\iphone\release' [took 4.16s]. This package is not licensed for commercial use 
```

mkb 文件：#!/usr/bin/env mkb 文件 { s3eIOSNotifications.cpp }

```
subprojects
{
    ExamplesMain
    s3eIOSNotifications
}

assets
{
    (data)
}

deployments
{
    iphone-sign-for-distribution=0

    # Note the App/Bundle ID must be set to the same value as an app registered
    # through iTunes Connect or the app will not be recognised by Apple's APNs
    iphone-appid="38ZJGRK9WD.com.findandtry.findandtry2"

    # A provisioning profile, set up to use the same full app/bundle name, must
    # also be embedded or the app will not be able to retreive a token for
    # remote notifications.
    iphone-provisioning-profile="FindandTry.mobileprovision"
} 
```

我正在使用 Marmalade 6.2.1，为 ARM 尝试了 RVCT 和 GCC 编译器，按原样构建了 s3eIOSNotifications 的标准示例。我探索 .ipa 文件并比较 .ipa 和原始文件中的 .provisionprofile 文件——它们是相同的。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:56:25.067

解释使用果酱制作的 iOS 版本：-

**开发构建**
进行开发构建时，您不需要在部署工具或 mkb 中添加临时配置文件。设备需要安装开发配置文件，或者需要嵌入到ipa中（只需在winrar中打开ipa并放入`mobileprovision`文件，重命名为`embedded.mobileprovision`）。那只是为了开发构建。

**发布构建**
要进行发布构建，您需要从部署工具或 mkb 文件中提供特定的发布配置文件（而不是开发配置文件）。只需在 mbk 中包含配置文件，就会将构建转换为发布。最重要的是，即使在安装了开发配置文件的设备中，您也无法使用`ipcu`或`iTunes`（不知道任何其他方法）安装发布版本。发布版本仅用于提交到应用商店。

所以重点是，如果您只是在测试内置设备，请忽略配置文件部分。如果您实际上要向应用商店提交相同的构建，请仅包含配置文件。

# ios - 如何在 UIImageView 中居中缩放（旋转）UIImage

> ID：15280820
> 
> 赞同：0
> 
> 时间：2013-03-07T20:12:39.470
> 
> 标签：ios, objective-c, uiimageview, uiimage, cgaffinetransform

我需要仅使用 CGAffineTransform 在 UIImageView 中使用 contentMode UIViewContentModeTopLeft 居中和缩放 UIImage。我不能使用 contentMode UIViewContentModeCenter 因为我需要完整的 CGAffineTransform 信息。

到目前为止，我正在使用这样的东西，其中 _imageView 是 UIImageView 并且图像是 UIImage。

```
_imageView.image = image;
CGFloat scale = fmaxf(_imageView.bounds.size.width / _imageView.image.size.width, _imageView.bounds.size.height / _imageView.image.size.height);
CGAffineTransform transform = CGAffineTransformIdentity;
transform = CGAffineTransformTranslate(transform, _imageView.image.size.width * 0.5, _imageView.image.size.height * 0.5);
transform = CGAffineTransformScale(transform, scale, scale);    
_imageView.transform = transform; 
```

缩放是好的，但图像总是在右下角有一些偏移。有人知道如何在不使用 contentMode UIViewContentModeCenter 的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:45:31.713

试试这个：

```
CABasicAnimation *scaleAnim = [CABasicAnimation animationWithKeyPath:@"transform"];
scaleAnim.toValue = [NSValue valueWithCATransform3D:CATransform3DIdentity];
scaleAnim.fromValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(0.1, 0.1, 1.0)];
scaleAnim.removedOnCompletion = YES;
[_imageView.layer addAnimation:scaleAnim forKey:nil]; 
```

# backbone.js - Boilerplate.js 与 Backbone.js 有何不同？

> ID：15280821
> 
> 赞同：2
> 
> 时间：2013-03-07T20:12:39.950
> 
> 标签：backbone.js, boilerplatejs

这两个都有很模糊的描述，

> Backbone.js 通过提供具有键值绑定和自定义事件的模型、具有可枚举函数的丰富 API 的集合、具有声明性事件处理的视图，并通过 RESTful JSON 接口将所有这些连接到您现有的 API，从而为 Web 应用程序提供了结构。

和 Boilerplate.js，

> BoilerplateJS 提供了参考架构来消除大规模 JavaScript 开发的痛苦。BoilerplateJS 是产品工程模式的集合，以及行业领先的 JavaScript 库的一些可靠集成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T22:57:19.130

Backbone 是一个 MV* JS 库。它对事件绑定等进行建模。它没有规定您如何构建项目。

Boilerplate 是一种参考应用程序结构，它与一些流行的库捆绑在一起，您可能希望也可能不希望使用这些库，重点在于适配器将您的 AMD 模块从直接绑定到特定库中解耦。它实际上带有包含在单独组件中的 Backbone 和 Knockout，以演示隔离组件并在同一应用程序中使用不同的 MV* 框架。结果，样板文件本身不处理事件绑定（这就是它在 Backbone 或 Knockout 中带来的）。

Boilerplate 将自己视为具有主干/敲除作为叶子的树。

Backbone 将自己视为树和叶子，但它对树的结构没有提供任何帮助，因此它更像是你必须构建自己的树的手杖。

至少这就是我在脑海中组织它的方式......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T12:41:53.537

Boilerplate.js 是使用设计模式和使用定义的命名空间的最佳实践的集合，可以帮助您保护我们的代码。它以模块化方式开发，使用常用的实用方法，前提是您会发现对常见操作有用。它配备了对象字面量形式的配置文件，可用于存储全局对象、配置 ID、URL 或文本字符串。这个框架被设计成一个随时可用的模板，您可以根据需要在项目中进一步构建它，因为它整齐地概述了框架并展示了一种扩展它的方法。

Backbone.js 是一个带有 RESTful JSON 接口的 JavaScript 库，它基于模型-视图-呈现器 (MVP) 应用程序设计范式。它被称为轻量级，因为它唯一的依赖项是一个 JavaScript 库，Underscore.js。它设计用于开发单页 Web 应用程序，并用于保持 Web 应用程序的各个部分（例如多个客户端和服务器）同步。基于 Backbone.js 构建的主要 Web 应用程序示例包括 BitTorrent.com、LinkedIn Mobile、Pinterest 和 Sony Entertainment Network。

# playframework-1.x - Play Framework 1.2.5 Sticky 错误：324 no data received

> ID：15280823
> 
> 赞同：4
> 
> 时间：2013-03-07T20:12:45.510
> 
> 标签：playframework-1.x

我有一个在 Play Framework 1.2.5 中运行的应用程序，有多个用户。

有时，用户会开始收到几分钟前对他们有用的特定 URL 的 324 错误。（324 = Chrome 中没有收到数据，服务器在 IE8 中关闭了连接）。一旦他们收到此消息，他们将继续收到错误。

我可以看到请求到达了运行 Play Framework 的机器（通过 Wireshark），但请求似乎没有到达 Play 控制器。（作为控制器第一步的调试和跟踪消息不会输出到日志）。我已经看到两个不同的控制器出现问题，它可能会影响更多。

清除浏览器缓存、历史记录、重新启动客户端、重新启动 Play、重新启动服务器似乎都没有任何区别。

其他浏览器可以成功访问“损坏”的 URL。“损坏”的客户端可以访问同一应用程序中的其他 URL。

有谁知道：1）知道为什么会发生这种情况，或者遇到过同样的问题，或者 2）有谁知道 Play 在响应链中的哪个位置可能会爆炸或发送 324？2) 我如何能更深入地追踪问题所在（例如，我可以追踪 Netty 访问吗？）

我已经广泛搜索了解决方案的类似问题，并且只能在路由文件中找到一些导致类似 324 错误的错误的引用，但这些似乎都是一致和可重复的，并且与 Play 2.x 相关。但是错误的路由会导致 324 错误这一事实意味着我很想更详细地了解路由器对这些损坏的请求做了什么。

非常感谢任何帮助！这让我发疯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:34:53.250

好的，以防万一其他人看到这个令人愤怒的问题......我已经找到了原因：

## 根本原因

Netty 3.2.4-FINAL 中的一个已知问题意味着如果请求包含 8053 字节或更大的 cookie，它会回复 324 响应。这在 Play Framework 社区中是众所周知的（参见[http://play.lighthouseapp.com/projects/57987/tickets/1618-long-cookies-with-double-quote-values-make-play-fail-before-the -request-is-handled](http://play.lighthouseapp.com/projects/57987/tickets/1618-long-cookies-with-double-quote-values-make-play-fail-before-the-request-is-handled)）。您会在那里的评论跟踪中注意到，双引号问题已修复，但大小问题仍然存在。

## 我的事业

那么，我是如何设法生成这么大的 cookie 的呢？答：JQuery 数据表。这个奇妙的 UI 元素（不，真的）有一个名为“bStateSave”的设置，允许您将表的状态（排序、过滤等）保存在 cookie 中，以改善用户体验。数据表的 cookie 大约 900 字节。但是，Datatables 在命名该 cookie 时使用 URL 的路径部分，因此对于应用程序中的每个不同 URL 路径，您都会获得一个新的 cookie。现在只需添加一个 RESTful 样式的 URL，例如 /item/show/34（其中 34 是一个对象 id）和嘿-presto，一个 900 字节的 cookie 用于您查看的每个项目。这很快打破了 8K 的限制。

## 答案

覆盖数据表状态 cookie 的命名并非易事，但它非常简单。

首先，将以下配置添加到您的数据表中

```
"bStateSave": true,
"fnStateSave": function(oSettings, oData) { save_dt_view(oSettings, oData); },
"fnStateLoad": function(oSettings) { return load_dt_view(oSettings); }, 
```

然后只需提供将存储和检索状态的 javascript 函数，使用您自己的不太精确的 cookie 名称：

```
function save_dt_view (oSettings, oData) {
    $.cookie('DataTables_myCookie', JSON.stringify(oData));
}
function load_dt_view (oSettings) {
  return JSON.parse( $.cookie('DataTables_myCookie') );
} 
```

感谢本文中的 bennybenben[提供](http://www.datatables.net/forums/discussion/8154/bstatesave-cookie-when-does-this-reset/p1)了我蚕食的代码示例。

# javascript - .getSelection 新代码复制加一个每次点击

> ID：15280831
> 
> 赞同：0
> 
> 时间：2013-03-07T20:13:13.773
> 
> 标签：javascript, jquery, selection, getselection

是的，我有一个旧帖子，几乎相同的问题，但是当我花时间自己编写而不是使用@Tim Downs 代码时，我比我想象的更接近。现在唯一的问题是，每次我点击按钮时，它都会添加另一块，所以最好的展示方式是自己去垃圾箱尝试一下

[http://jsbin.com/ogiyed/1/edit](http://jsbin.com/ogiyed/1/edit)

代码在这里：

```
function getSelected() {
     if(window.getSelection) { return window.getSelection(); }
    else if(document.getSelection) { return document.getSelection(); }
                else {
                        var selection = document.selection && document.selection.createRange();
                        if(selection.text) { return selection.text; }
            return false;
        }
        return false;
    }

$('.selections').not('.username').mouseup(function(e) {
var uid = $('.selections').find('.username').text();
var selection = getSelected();
if(selection) {
$('button').click(function() {
var text = $('#textarea_content');
text.val(text.val()+'[quote="'+ uid +'"]'+ selection +'[/quote]');
});
}
}); 
```

它几乎就像一个魅力;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:17:41.680

您在 mouseup 处理程序中分配了一个单击处理*程序*，因此在每次 mouseup 时它都会添加一个*额外*的单击处理程序，所有这些都将在每次按钮单击时执行。

如果您需要重新定义现有的点击处理程序，您首先要删除前一个，`.off('click')`然后分配一个新的：

```
$('button').off('click').click(function() {
   var text = $('#textarea_content');
   text.val(text.val()+'[quote="'+ uid +'"]'+ selection +'[/quote]');
}); 
```

更新演示：http: [//jsbin.com/ogiyed/4/](http://jsbin.com/ogiyed/4/)

（顺便说一句：缩进你的代码！）

# sql - “各列定义不明”

> ID：15280835
> 
> 赞同：2
> 
> 时间：2013-03-07T20:13:22.070
> 
> 标签：sql, oracle11g

所以这个学期我很难理解 SQL。我真的对我在 SQL 方面的知识没有信心，我正在尝试做这个练习，它说：

用于检索员工列表的 SELECT 语句，`DEPARTMENT_ID , DEPARTMENT_NAME , FULL_NAME, JOB_TITLE` 其中 FULL_NAME 是名字和姓氏的列，并在它们之间连接一个空格，用于那些他们的职位包含单词“销售”的员工。该列表必须按职位和部门名称排序。

到目前为止，我想出了这个

```
SELECT department_id, 
    department_name, 
    first_name || ' ' || last_name as Full_name, 
    job_title
FROM departments d, employees e, jobs j
WHERE d.department_id=e.department_id 
HAVING job_title LIKE '%Sales%'; 
```

错误说：

```
Error starting at line 1 in command:
select department_id, department_name, first_name || ' ' || last_name as Full_name, job_title
from departments d, employees e, jobs j
where d.department_id=e.department_id 
having job_title like '%Sales%'
Error at Command Line:1 Column:8
Error report:
SQL Error: ORA-00918: column ambiguously defined
00918\. 00000 -  "column ambiguously defined"
*Cause:    
*Action: 
```

任何提示和帮助都可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:20:11.440

命令中的“第 8 列”是第八个字符，即`department_id`字段。您正在`department_id`从两个都有该列的表中选择该列；`department_id`这是模棱两可的，因为解析器看到（一个来自`departments`和一个来自`employees`）的两个可能值，*即使我们根据您的 WHERE 子句知道这些值将是相同的。* 你必须选择一个：

```
select d.department_id, ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:17:36.810

指定所选字段是 e.department_id 还是 d.department_id (etc)

# scala - 如何为 sbt 设置堆大小？

> ID：15280839
> 
> 赞同：94
> 
> 时间：2013-03-07T20:13:26.453
> 
> 标签：scala, sbt

我正在使用 SBT 0.12.0。我已经阅读了有关堆栈溢出的其他答案并遵循了它们，但是它们都没有帮助，例如：

*   创建`ForkRun`类 - 在我使用 sbt 期间，我没有观察到任何分叉进程
*   设置环境变量`JAVA_OPTS`- 它已设置但 sbt 的进程命令行似乎根本没有使用它。
*   `sbt -J-Xmx2G`将参数附加到 sbt 进程命令行，但是`-Xmx1536m`sbt 使用旧值而不是附加参数。

我错过了什么吗？在进行测试和测试时，如何为 sbt 0.12 设置堆大小`run`？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-07T20:55:58.467

您需要`SBT_OPTS`，这是我在*.bash_profile*中使用的内容：

```
export SBT_OPTS="-Xmx1536M -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=2G -Xss2M  -Duser.timezone=GMT" 
```

**更新：** 要获得 2G 堆空间，您可以使用以下命令：

```
export SBT_OPTS="-Xmx2G -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=2G -Xss2M  -Duser.timezone=GMT" 
```

**注意：SBT 必须是最新版本**

旧版本`sbt`包含覆盖这些设置的错误，用于 Mac`brew upgrade sbt`的最新`sbt`版本（假设 brew install）（Linux 的 IDK）。[https://github.com/sbt/sbt/issues/2945#issuecomment-277490848](https://github.com/sbt/sbt/issues/2945#issuecomment-277490848)

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2015-03-16T00:44:44.150

截至 2015 年 3 月，如果您在带有**Homebrew的****OSX**上使用 sbt，那么您应该编辑该文件**`/usr/local/etc/sbtopts`**

 **例如

```
# set memory options
#
#-mem   <integer>
-mem 2048 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-01-02T20:16:17.573

“sbt -mem 23000 run”对我有用。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-03-07T23:53:53.407

我找到了解决方案。无论您如何指定 JVM 堆大小，它都不会起作用，因为 SBT 可执行文件已经覆盖了它。

SBT可执行文件中有一行说：

`. /usr/share/sbt/sbt-launch-lib.bash`

所以我编辑了文件：

```
 # run sbt
  execRunner "$java_cmd" \
    ${SBT_OPTS:-$default_sbt_opts} \
-   $(get_mem_opts $sbt_mem) \
    ${java_opts} \
    ${java_args[@]} \
    -jar "$sbt_jar" \
    "${sbt_commands[@]}" \
    "${residual_args[@]}" 
```

删除`-`线。

现在，当您运行 SBT 时，它将不再覆盖您的 JVM 堆大小设置。您可以使用@Noan 的答案指定堆大小设置。

或者：

`sbt -J-Xmx4G -J-Xms4G`

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-01-20T15:53:30.383

在 Windows 上，对于 sbt 0.13.9.2，您需要设置`JAVA_OPTS`为所需的 jvm 选项。

```
> set JAVA_OPTS=-Xmx1G
> sbt assembly 
```

该`sbt.bat`脚本从`conf\sbtconfig.txt`into加载其默认值，`CFG_OPTS`但`JAVA_OPTS`如果设置则将使用它。

相关摘录`sbt.bat`：

```
rem FIRST we load the config file of extra options.
set FN=%SBT_HOME%\..\conf\sbtconfig.txt
set CFG_OPTS=
FOR /F "tokens=* eol=# usebackq delims=" %%i IN ("%FN%") DO (
  set DO_NOT_REUSE_ME=%%i
  rem ZOMG (Part #2) WE use !! here to delay the expansion of
  rem CFG_OPTS, otherwise it remains "" for this loop.
  set CFG_OPTS=!CFG_OPTS! !DO_NOT_REUSE_ME!
) 
```

. . . （跳过） 。. .

```
rem We use the value of the JAVA_OPTS environment variable if defined, rather than the config.
set _JAVA_OPTS=%JAVA_OPTS%
if "%_JAVA_OPTS%"=="" set _JAVA_OPTS=%CFG_OPTS%
:run
"%_JAVACMD%" %_JAVA_OPTS% %SBT_OPTS% -cp "%SBT_HOME%sbt-launch.jar" xsbt.boot.Boot %* 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-07-02T23:00:22.147

我希望在 Mac OS X 上通过自制安装 SBT 来解决这样的问题。如果您通过自制软件安装了 SBT，那么您就很清楚了，因为`/usr/local/bin/sbt`文件看起来像

```
#!/bin/sh
test -f ~/.sbtconfig && . ~/.sbtconfig
exec java -Xmx512M ${SBT_OPTS} -jar /usr/local/Cellar/sbt/0.12.3/libexec/sbt-launch.jar "$@" 
```

这意味着您输入的任何设置都`SBT_OPTS`将保留（您的 -Xmx 将优先）。此外，脚本的第一行将执行任何命令（`~/.sbtconfig`如果存在），因此如果您经常使用它们，它可能是放置 SBT 选项的更好地方。您不必`source ~/.bash_profile`每次更改`SBT_OPTS`

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-04-16T11:19:30.787

一种快速的方法是使用`.jvmopts`项目根目录中的文件（来自[Lagom 框架文档](https://www.lagomframework.com/documentation/latest/scala/JVMMemoryOnDev.html)）：

```
 $ cat .jvmopts
 -Xms512M
 -Xmx4096M
 -Xss2M
 -XX:MaxMetaspaceSize=1024M 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-08-16T11:53:33.447

如果从 PowerShell 运行 sbt，请设置`SBT_OPTs`环境变量，如下所示：

```
$env:SBT_OPTS="-Xms512M -Xmx1024M -Xss2M -XX:MaxMetaspaceSize=1024M" 
```

然后运行：

```
sbt 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-12-03T18:04:31.373

**对于Windows 上**的SBT 版本 1.0.4 ，默认**JVM 设置来自`sbt\conf\sbtconfig.txt`**文件。只需在此处编辑值。更改`-Xmx512M`为`-Xmx2048M`。

这不是 SBT 的 JVM 选项的唯一来源。其他的可以通过检查找到`sbt.bat`。诊断设置来自何处的简单方法是在批处理文件中注释掉这一行：`@echo off`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-13T19:47:52.683

就我而言，我的服务配置覆盖了环境变量`SBT_OPTS`和`JAVA_OPTS`. 我可以通过设置`build.sbt`以下内容来设置限制：

```
javaOptions in Universal ++= Seq(
  "-J-Xms1g",
  "-J-Xmx2g") 
```

参考：[https ://www.scala-sbt.org/sbt-native-packager/archetypes/java_app/customize.html](https://www.scala-sbt.org/sbt-native-packager/archetypes/java_app/customize.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-24T19:09:06.547

在 Windows 上，`SET SBT_OPTS="-XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=2G -Xmx2G -Xms1G"`之前运行`sbt`似乎是为我解决的问题。

参考：[https ://www.baeldung.com/scala/sbt-heap-size](https://www.baeldung.com/scala/sbt-heap-size)

我刚改成`export`.`SET`**

# javascript - 根据下拉列表中的选择隐藏和显示面板

> ID：15280842
> 
> 赞同：0
> 
> 时间：2013-03-07T20:13:41.047
> 
> 标签：javascript, html

我创建了一个脚本，它应该根据从 5 个下拉列表中选择的相同选项显示和隐藏一些项目。此下拉列表中的选择完全相同。所以我只是在检查我的解决方案是否可以简化

HTML：

```
<label for="ddlGift1">Gift #1</label>
         <asp:DropDownList runat="server" ID="ddlGift1" AutoPostBack="true" AppendDataBoundItems="True" ClientIDMode="Static" > 
             <asp:ListItem Value="--" Text="--" />
         </asp:DropDownList>   
<label for="ddlGift2">Gift #2</label>
         <asp:DropDownList runat="server" ID="ddlGift2" AutoPostBack="true" AppendDataBoundItems="True" ClientIDMode="Static" > 
             <asp:ListItem Value="--" Text="--" />
         </asp:DropDownList>
<label for="ddlGift3">Gift #3</label>
         <asp:DropDownList runat="server" ID="ddlGift3" AutoPostBack="true" AppendDataBoundItems="True" ClientIDMode="Static" > 
             <asp:ListItem Value="--" Text="--" />
         </asp:DropDownList>   
<label for="ddlGift4">Gift #4</label>
         <asp:DropDownList runat="server" ID="ddlGift4" AutoPostBack="true" AppendDataBoundItems="True" ClientIDMode="Static" > 
             <asp:ListItem Value="--" Text="--" />
         </asp:DropDownList>     
<label for="ddlGift5">Gift #5</label>
         <asp:DropDownList runat="server" ID="ddlGift5" AutoPostBack="true" AppendDataBoundItems="True" ClientIDMode="Static" > 
             <asp:ListItem Value="--" Text="--" />
         </asp:DropDownList> 
```

JS：

```
 var gift1 = $('#ddlGift1');
   var gift1 = $('#ddlGift1');
   var gift2 = $('#ddlGift2');
   var gift3 = $('#ddlGift3');
   var gift4 = $('#ddlGift4');
   var gift5 = $('#ddlGift5');

   showHide();
   gift1.change(function () {
    showHide();
});
gift2.change(function () {
    showHide();
});
gift3.change(function () {
    showHide();
});
gift4.change(function () {
    showHide();
});
gift5.change(function () {
    showHide();
});
 function showHide() {
var gift1 = $('#ddlGift1');
var gift2 = $('#ddlGift2');
var gift3 = $('#ddlGift3');
var gift4 = $('#ddlGift4');
var gift5 = $('#ddlGift5');
var vsity = $('#shvarsity');

if ((gift1.children("option:selected").text())||(gift2.children("option:selected").text())||(gift3.children("option:selected").text())||(gift4.children("option:selected").text())||(gift5.children("option:selected").text()) == "Varsity Club")
{

    vsity.show();

} else {

    vsity.hide();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:53:49.430

为所有“礼物”元素添加一个类，例如

```
<asp:DropDownList runat="server" id="ddlGift1" class="gift" AutoPostBack="true" AppendDataBoundItems="True" ClientIDMode="Static" > 
    <asp:ListItem Value="--" Text="--" />
</asp:DropDownList> 
```

然后JS看起来像

```
var gifts = $('.gift');
showHide();

gifts.change(function () {
    showHide();
});

function showHide() {
for (i in gifts) {
    if (gifts[i].children("option:selected").text() == "Varsity Club")
    {
        vsity.show();
    } else {
        vsity.hide();
    }
}
} 
```

# css - 较少的线性梯度滤波器

> ID：15280843
> 
> 赞同：0
> 
> 时间：2013-03-07T20:13:41.810
> 
> 标签：css, less

我有一个混入少的问题。

我有更少的文件。

```
.gradient(@startColor, @endColor) {
  background: @startColor;
  background: linear-gradient(to bottom, @startColor 0%,@endColor 100%); 
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='@{startColor}', endColorstr='@{endColor}',GradientType=1 );  
}

#nav {
  .gradient(#fff,#e2ebef);
}

.btn {  
  .gradient(#f2f2f2, #e4e4e4);
} 
```

编译后我得到这个：

```
#nav {
  background: #ffffff;
  background: linear-gradient(to bottom, #ffffff 0%, #e2ebef 100%);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ffffff', endColorstr='#e2ebef', GradientType=1);
}
.btn {
  background: #f2f2f2;
  background: linear-gradient(to bottom, #f2f2f2 0%, #e4e4e4 100%);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ffffff', endColorstr='#e2ebef', GradientType=1);
} 
```

为什么 .btn 的过滤器中的颜色与 #nav 中的颜色相同？我用谷歌搜索了解决方案，但没有找到任何解决这个问题的方法。

那么......除了在生成的css文件中手动粘贴颜色之外，还有另一种解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:31:52.567

将过滤器属性更改为如下所示：

```
filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr='@{startColor}', endColorstr='@{endColor}', GradientType=1)"; 
```

这会自动转义过滤器属性中的许多废话，并允许正确输出该字符串中的变量。

# jquery - 使用 jQuery 从两个单独的 HTML 表中删除行

> ID：15280848
> 
> 赞同：0
> 
> 时间：2013-03-07T20:13:48.590
> 
> 标签：jquery, html-table

我在页面上有一个表格，我可以在其中单击一行上的添加按钮，它将将该行克隆到两个单独的表格中。这两个单独的表的每一行都有一个删除按钮。我想要实现的是，当用户单击任一表上一行上的删除按钮时，它将从两个表中删除同一行。

这是我的克隆脚本。如您所见，一行从#platetable 克隆到两个不同的表——#platetable2 和#platetable3。

```
$('#platetable .addPlateItem').live('click', function (e) {
     var row = $(this).closest('tr').clone();
     var row2 = $(this).closest('tr').clone();
     row.find("input.addPlateItem")
        .attr("value", "Delete")
        .attr("class", "deletePlateItem");
     row.find("td.mfrtd")
        .remove("td.mfrtd");
     row2.find("input.addPlateItem")
        .attr("value", "Delete")
     .attr("class", "deletePlateItem");
     row2.find("td.mfrtd")
        .remove("td.mfrtd");
     row2.append('<td><input type="text" id="portionpercase" name="portionpercase" value=""></td>');
     row2.append('<td><input type="text" id="portionperserving" name="portionperserving" value=""></td>');
     row2.append('<td><select id="portionsize" name="portionsize"><option value=""></option><option value="cup">Cup</option><option value="each">Each</option><option value="gallon">Gallon</option><option value="ounce">Ounce</option><option value="pound">Pound</option><option value="quart">Quart</option><option value="tablespoon">Tablespoon</option><option value="teaspoon">Teaspoon</option></select></td>');
     row2.append('<td>$0.00</td>');
     row2.append('<td><input type="text" id="portionperserving" name="portionperserving" value=""></td>');
     row2.append('<td>%0.00</td>');
     row2.append('<td><input type="checkbox" id="activeplate" value=""></td>');
    $('#platetable2 tbody').append(row);
    $('#platetable3 tbody').append(row2);
}); 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:19:24.833

只需将相同的类分配给您要删除的两行（ID 很好，但它们不能重复，所以这是不可能的。当您触发 click 事件时，假设您的删除按钮是类`delete-button`。您将拥有将要删除的行的类存储在某处 - 我选择将其存储在删除按钮的 data- 属性中：

```
$(document).on("click", ".delete-button", function() 
{
    var rowDelete = $(this).data("row-delete");
    $("#platetable2, #platetable3").find("."+rowDelete).remove();
}); 
```

示例 HTML 标记可以是这样的

```
<td class="(rowClass)">
    (content)
    <button class="delete-button" data-row-delete="(rowClass)" type="button">
        Delete
    </button>
</td> 
```

我做了一个概念验证小提琴：http: [//jsfiddle.net/teddyrised/hkUdE/](http://jsfiddle.net/teddyrised/hkUdE/)

```
$(document).ready(function() 
{
    // Start counting at 0
    var rowAdd = 0;

    $("#platetable1 .add-button").click(function() 
    {
        // Create jQuery object
        var $rowClone = $(this).parents("tr").clone();

        // Remove the add button, and add the delete button. 
        // Finally, append to plate table 2 and 3
        $rowClone
            .addClass("row-add-"+rowAdd)
            .find(".button-col")
            .remove()
            .end()
            .append("<td><button type='button' class='delete-button' data-row-delete='row-add-"+rowAdd+"'>Delete</button></td>")
            .appendTo(".placetable-append"); 

        // Whenever a new row is added, increase rowAdd by 1 so that all newly added rows will have a unique class
        rowAdd++;
    });

    // Use .on() so that clicks on dynamically added delete button will be captured
    $(document).on("click", ".delete-button", function() 
    {
        // Fetch the unique rows to delete
        var rowID = $(this).data("row-delete");
        confirmDelete = confirm("Will delete: " + rowID); 
        if(confirmDelete)
        {
            $("table ."+rowID).remove();
        }
    });
}); 
```

# mysql - 汇总 DataGridView 中的所有特定列值

> ID：15280849
> 
> 赞同：-1
> 
> 时间：2013-03-07T20:13:48.883
> 
> 标签：mysql, database, datagridview, foreach, wamp

我正在使用 wamp，我在其中运行自己的数据库，现在我需要总结所有行中特定列的所有值

列名是“钱”

我尝试了 foreach 循环，但它给了我一个错误“对象引用未设置为对象的实例”。

```
foreach (DataGridViewRow row in dataGridView.Rows)
{   
      allMoney += int.Parse(row.Cells["money"].Value.ToString());                  
} 
```

任何人都知道如何解决这个问题？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:26:04.400

您已经标记了 MySQL，所以让我们从数据库的角度回答这个问题。

在您的查询中，您需要使用 SUM() 将每一行的值相加。

例如

```
SELECT SUM(order_value) FROM table
GROUP BY customer_id 
```

# javascript - jqueryui 对话框相对于其他对话框

> ID：15280850
> 
> 赞同：1
> 
> 时间：2013-03-07T20:13:50.017
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-dialog

我想将两个对话框并排放置。我执行以下操作：

```
$("#deck").dialog({
  width: 'auto',
  height: 'auto',
  position: {
    my: 'left top',
    at: 'left bottom',
    of: '#title',
  }
});

$("#seats").dialog({
  width: 'auto',
  height: 'auto',
  position: {
    my: 'left top',
    at: 'right top',
    of: '#deck',
  },
}); 
```

但是，这个位置是在div`#seats`的右上方，而不是对话框，所以两个对话框因为标题栏的不同而没有对齐。我将如何相对于的实际对话框定位？我试过使用of , , 并传入 of 的返回值，但都没有给出想要的结果。我宁愿不硬编码标题栏的高度。`#deck``#deck``#seats``#deck``of``#deck :parent``#deck :parent :parent``$("#deck").dialog(...)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:15:35.317

以下工作完美：

```
$("#seats").dialog({
  width: 'auto',
  height: 'auto',
  position: {
    my: 'left top',
    at: 'right top',
    of: $('#deck').parent(),
  },
}); 
```

# javascript - 如何在 HTML 中增加一个值？

> ID：15280851
> 
> 赞同：7
> 
> 时间：2013-03-07T20:13:55.007
> 
> 标签：javascript, increment

我对 JavaScript 完全陌生。我正在尝试在 HTML 中增加一个变量，但它不起作用。我的语法错了吗？

```
<script>
function rps() {
computerScore.value++;
computerScore.innerHTML = computerScore.value;
}
 </script>   
<html>
<b>computer score:</b><p id="computerScore" value="0">-</p>
<button type="button" onclick="rps()">Go</button><br>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T20:16:54.013

`value`不是`<p>`标签的有效属性。

我想你想要这样的东西：

```
function rps() {
    var computerScore = document.getElementById('computerScore');
    var number = computerScore.innerHTML;
    number++;
    computerScore.innerHTML = number;
} 
```

...

```
<b>computer score:</b><p id="computerScore">0</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:17:56.203

几个问题：

*   在大多数浏览器上，您不能通过 id 获取元素，就像全局属性一样
*   属性并不总是元素的属性（值只是输入元素的属性）

你可以这样做 ：

```
function rps() {
   // fetch the element :
   var element = document.getElementById('computerScore'); 

   // get the attribute, parse it and increment it :
   value = parseInt(element.getAttribute('value'), 10)+1; 

   // stores the incremented value :
   element.setAttribute('value', value);

   // and change the innerHTML (conversion to string is implicit)
   element.innerHTML = value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:19:54.547

几个问题：

1.  `computerScore`没什么; 你可能想要`document.getElementById('computerScore')`
2.  `value`在 a`<p>`上无效。使用`data-value`or 代替（或

* * *

```
var computerScore = document.getElementById('computerScore');
function rps() {
    computerScore.dataset.value++;
    computerScore.innerHTML = computerScore.dataset.value;
} 
```

请注意，这`dataset.value`是一个字符串，但`++`会将其强制转换为整数。

[http://jsfiddle.net/vqPKZ/](http://jsfiddle.net/vqPKZ/)

我还建议使用事件绑定而不是事件属性，例如`button.addEventLister`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-16T17:41:12.320

```
The best option will be to pass in an event object from the rps() method in the HtML,       like this: rps(event).
Then retrieve it from the Javascript method like this:
function rps(event) {
var computerScore = event.CurrentTarget.innerText;
computerScore++;
computerScore = number;
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-02-17T17:57:40.287

```
var elm = whatever //assuming you select your element using the DOM
// update value
elm.innerHTML = +elm.innerHTML + 1; 
```

# cmd - Delims 的 CMD 脚本问题

> ID：15280852
> 
> 赞同：0
> 
> 时间：2013-03-07T20:13:56.417
> 
> 标签：cmd

我有下面的 cmd 脚本没有产生我期望的结果：

```
set parent=src\Sandbox
set child=src\Sandbox\SandboxTest
echo %parent%
for /F "tokens=* delims=%parent%\" %%i in ("%child%") do set DIRNAME=%%i
echo %DIRNAME% 
```

%DIRNAME% 作为“测试”返回，但我希望 DIRNAME 是“SandboxTest”。

有人知道这是为什么吗？我的delims有问题吗？

谢谢，基思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:27:27.003

您想使用变量引用语法。

```
set parent=src\Sandbox
set child=src\Sandbox\SandboxTest
echo %parent%
for /F %%i in ("%child%") do (
    set DIRNAME=%%~ni
    ) 
```

delims 是用于分割的字符数组

```
set parent=aeiou
set child=abcdefghijklmnopqrstuvwxyz
for /F "tokens=1-10 delims=%parent%\" %%a in ("%child%") do (
    echo.%%a
    echo.%%b
    echo.%%c
    echo.%%d
    echo.%%e
    ) 
```

它在字符而不是单词上分裂。

```
bcd
fgh
jklmn
pqrst
vwxyz 
```

type`for /?`用于完整范围的变量引用语法。

```
In addition, substitution of FOR variable references has been enhanced.
You can now use the following optional syntax:

    %~I         - expands %I removing any surrounding quotes (")
    %~fI        - expands %I to a fully qualified path name
    %~dI        - expands %I to a drive letter only
    %~pI        - expands %I to a path only
    %~nI        - expands %I to a file name only
    %~xI        - expands %I to a file extension only
    %~sI        - expanded path contains short names only
    %~aI        - expands %I to file attributes of file
    %~tI        - expands %I to date/time of file
    %~zI        - expands %I to size of file
    %~$PATH:I   - searches the directories listed in the PATH
                   environment variable and expands %I to the
                   fully qualified name of the first one found.
                   If the environment variable name is not
                   defined or the file is not found by the
                   search, then this modifier expands to the
                   empty string

The modifiers can be combined to get compound results:

    %~dpI       - expands %I to a drive letter and path only
    %~nxI       - expands %I to a file name and extension only
    %~fsI       - expands %I to a full path name with short names only
    %~dp$PATH:I - searches the directories listed in the PATH
                   environment variable for %I and expands to the
                   drive letter and path of the first one found.
    %~ftzaI     - expands %I to a DIR like output line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:28:46.653

DELIMS 没有定义分隔符短语——它定义了一组分隔*符*。“测试”中的任何字符都不会出现在您的 DELIMS 集中，因此是结果。

在您引用的特定案例中，您可以使用以下方法获得所需的结果：

```
for %%F in ("%child%") do set DIRNAME=%%~nxF 
```

# separation-of-concerns - 视图实例化另一个视图

> ID：15280867
> 
> 赞同：0
> 
> 时间：2013-03-07T20:14:48.287
> 
> 标签：separation-of-concerns

我正在分离类似于 MVC（模型、视图和控制器）的代码。

假设我有两个视图类，一个在概念上是一个页面（包含许多项目），另一个只是一个小部件（如最近新闻列表）。

以下是我看到的方法：

1.  控制器实例化页面和小部件类，然后将小部件对象传递到页面中。如果页面有很多小部件，我必须弄清楚如何在不混淆的情况下将它们全部传递进去。

    ```
    class PageController {
        function foo() {
            Widget widget1 = new Widget();
            Widget widget2 = new Widget();
            Page page = new Page(widget1, widget2);
        }
    }

    class Page {
        function Page(Widget widget1, Widget widget2) {
            //do something with the widgets
        }
    } 
    ```

2.  该页面实例化了小部件类。但是现在页面类引用了各种视图，而不是能够将视图放置在任何位置，只要它具有适当的接口。

    ```
    class PageController {
        function foo() {
            Page page = new Page();
        }
    }

    class Page {
        function Page() {
            Widget widget1 = new Widget();
            Widget widget2 = new Widget();
            //do something with the widgets
        }
    } 
    ```

3.  还有什么？

你有什么建议，为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:23:11.190

从概念上讲，#2 对我来说最有意义。

如果一种视图包含另一种视图，那么在视图之间进行耦合是非常好的。例如，管理每个小部件的放置位置、何时​​隐藏某些小部件等应该是页面的工作。

但是，除非需要，否则页面不应该关心与这些小部件相关的事件。如果一个小部件有一个按钮，它应该只是回调到一个控制器并跳过告诉页面......除非它导致小部件被调整大小并且页面需要以不同的方式布局。

希望这对您有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:33:00.627

实际上，我在某些方面支持方法 1。我会说 Page 应该能够在有或没有小部件的情况下进行实例化。当您运行业务逻辑和规则时，您可以通过页面中的其他一些规定添加一组小部件开始和/或一次添加一个。

这使您可以更灵活地随时修改页面的构造。

小部件包含有关它们如何运行以及它们在页面布局中的呈现方式的信息。

页面应该只负责从包含的小部件中获取信息/指令并初始化/渲染它们。这将允许更灵活和流畅的设计。

# html - 未对齐的 Twitter Follow 和 Facebook Like 按钮

> ID：15280870
> 
> 赞同：1
> 
> 时间：2013-03-07T20:15:02.303
> 
> 标签：html, css, facebook, twitter

我已经使用 tumblr 建立了我的博客，doopist.com。

我正在尝试将 twitter 关注按钮和 Facebook Like 按钮与我的博客标题徽标图像对齐。目前，Twitter 图标在顶部横幅的顶部对齐，而 FB 按钮更接近居中。我试图将按钮垂直居中，类似于徽标居中的方式。

我不太了解 CSS，并试图制作一个垂直居中对齐的 div 样式，但这会导致 tumblr 图标徽标（随机帖子、档案等）撞到一个新行，这是不希望的。

我很好奇是否有人对如何将 Twitter 和 FB 按钮垂直居中提出建议。非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:23:51.893

很少的 CSS 更改

`#header, #header .inner { height:48px; position:relative; }`

在你的 iframe 上最好在一个类中添加：

```
position: absolute;
left: 200px;
top: 10px; 
```

在您的跨度持有 facebook 上：

```
position: absolute;
left: 365px;
top: 15px; 
```

再次最好在课堂上。

您真的不需要每个 iframe 周围的额外跨度。只需向每个 iframe 添加一个类来指定样式。

# css - 在 iOS 样式 html5/phonegap 应用程序的导航菜单中显示按钮单击状态的正确方法（包括图片）

> ID：15280871
> 
> 赞同：1
> 
> 时间：2013-03-07T20:15:02.947
> 
> 标签：css, html, cordova, psd

标题有点满嘴，但我想知道格式化我的 div 以显示底部导航栏上的按钮已被按下的最佳方式。（不是图形设计的问题）

我想的方式是在默认状态下为导航栏制作 1 个实心图像。我将在每个“按钮”周围设置一个 div 以检测按下。按下按钮时，我将在按下状态下显示按钮的单个图像。

我添加了一张很棒的图片来帮助说明我的问题。

![在此处输入图像描述](../Images/614b6f3699549cc1b34bfd7510e7ff49.png)

另一种方法是创建 8 个独特的按钮。但是，我知道我见过的大多数 psd 都有导航栏，默认和按下，作为固体元素，图标分层。（像这样：[http ://dribbble.com/shots/691632-App- net-Starter-Kit?list=tags&tag=appDOTnet](http://dribbble.com/shots/691632-App-net-Starter-Kit?list=tags&tag=appDOTnet) )

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:17:18.883

老实说，这种方法对我来说似乎有点沉重。

您已经有五个图像，那么为什么不创建一个包含每个按钮的按下状态和未按下状态的精灵，然后使用 CSS“背景位置”属性进行滑动呢？

你的 CSS 看起来像：

```
div.buttons {
 background-image: url(images/myimage.png);
 background-position: 0 0;
 position:relative;
 width:64px;
}
div.buttons.dog{
 background-position: 0 32px;
}
div.buttons.cat{
 background-position: 0 64px;
}
div.buttons div.dog{
 position:absolute;
 left: 0;
 top: 0;
 width: 32px;
 height: 32px;
 border: transparent 1px solid;
}
div.buttons div.cat{
 position:absolute;
 left: 32px;
 top: 0;
 width: 32px;
 height: 32px;
 border: transparent 1px solid;
} 
```

使用您的 HTML 为：

```
<div class="buttons">
 <div class="dog"></div>
 <div class="cat"></div>
</div> 
```

然后是 jQuery 的一些简单的东西，例如：

```
$('div.buttons').children().each(function(){
  $(this).click(function() { $(this).parent().addClass($(this).attr('class')).removeClass($(this).siblings().attr('class'));
}); 
```

* * *

**更新**

根据提问者的要求，以下是在按钮层上实现 div 覆盖的方法。首先，从`div.buttons`顶部的 CSS 块开始，仅使用您的图像作为默认“关闭”位置的按钮而不是精灵。

然后，创建四个这样的容器（我在`div`这里使用了 s，但您可以想象使用任何为容器提供适当语义上下文的元素）。

**CSS**

```
div.buttons{
 background-image: url(images/myimage.png);
 background-position: 0 0;
 position:relative;
 width:136px; /* whatever your width for the image is */
}

div.fish, div.rabbit, div.dog, div.cat {
 position: absolute;
 top: 0;
 background-size: cover;
 height: 24px; /* Whatever the height of your buttonbar is */
}
div.cat{
 width: 32px; /* Width of your button */
 left: 0;
 background-image: none;
}
div.on.cat {
 background-image: url(path/to/catImage.png);
}
div.dog {
 left: 32px; /* The width of the preceding button(s), if they exist */     
 width: 40px; /* Width of your button */
 background-image: none;
}
div.on.dog {
 background-image: url(path/to/dogImage.png);
}
div.rabbit {
 left: 72px; /* The width of the preceding button(s), if they exist */     
 width: 32px; /* Width of your button */
 background-image: none;
}
div.on.rabbit {
 background-image: url(path/to/rabbitImage.png);
}
div.fish {
 left: 104px; /* The width of the preceding button(s), if they exist */     
 width: 40px; /* Width of your button */
 background-image: none;
}
div.on.fish {
 background-image: url(path/to/fishImage.png);
} 
```

**HTML**

```
<div class="buttons">
   <div class="cat"></div>
   <div class="dog"></div>
   <div class="rabbit"></div>
   <div class="fish"></div>
</div> 
```

这假设您的 div “包装”按钮切片具有与其动物匹配的类，但这显然可以是您想要的任何内容。然后，在单击事件中，您只需将所需的类应用于按下的按钮。您将使用的 jQuery 如下所示：

**jQuery**

```
$('.buttons > div').on('click',function(){
    var t = $(this);
    t.siblings.removeClass('on');
    t.addClass('on');

    //Whatever your button is supposed to do normally here
}); 
```

# c# - 避免asp.net c#每页重复代码

> ID：15280872
> 
> 赞同：0
> 
> 时间：2013-03-07T20:15:06.407
> 
> 标签：c#, asp.net, oop, inheritance

我开发了一个网站，它在首页和控制面板上也具有 CRUD 功能。我看到我在尝试连接和 CRUD 时为每个页面编写了相同的代码。

我没有足够的时间研究如何优化我的代码，我只是写了我需要的东西。我也受过苦。但我没有另一个机会。

例如：

我有一个数据库，当然我需要一个连接字符串。我需要将记录读入页面（比如说）blogs.aspx。在另一个页面 news.aspx 中，我需要再次建立新连接并创建一个新的 Sqlconnection 实例。

正如我所说，我现在有 40 多页，并且有很多重复的数据库连接、datagridview 填充代码。

**我的问题：**

1.  在母版页（Site.Master）中定义 Connection、DataTable、DataAdapter、Command 实例是否是一种好方法？或者封装概念会阻止我吗？

2.  如果我编写了一个名为 konnekt.cs 的类，我将如何将其对象继承到当前页面？换句话说，我怎么能从当前页面扩展到 konnekt.cs？

也许我会得到反对票，但我认为这种风险值得学习这些概念。我是 C# 和其他编程语言的新手。

感谢您的提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:23:47.353

您需要做的是学习“关注点分离”的概念。这基本上意味着您根据代码的功能划分代码。现在（根据我从您的问题中了解到的情况），您的所有代码都在一个地方。正如您所注意到的，这*不是*一件好事。当然它现在可以工作，但是一旦你需要进行修改，你就会遇到问题。

在最基本的情况下，您需要将操作数据库中数据的代码（通常称为数据访问层）和显示该数据的代码（表示层）分开。加载页面（表示层）时，它会调用数据访问层以从中获取数据（页面不直接调用数据库），依此类推。通常，在这两者之间有一个称为业务层的第三层，它具有业务规则逻辑。

**在母版页（Site.Master）中定义 Connection、DataTable、DataAdapter、Command 实例是否是一种好方法？或者封装概念会阻止我吗？**

这不是一个好主意。母版页属于演示文稿，因此将任何直接调用数据库的内容放在那里都是不行的。

**如果我编写了一个名为 konnekt.cs 的类，我将如何将其对象继承到当前页面？换句话说，我怎么能从当前页面扩展到 konnekt.cs？**

再一次，永远不要直接从您的页面调用数据库。构造另一个连接到数据库的类，并让页面调用*该类*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:37:42.337

像[System Down](https://stackoverflow.com/users/196135/system-down)一样，我的建议是丢弃 pages 代码中的 db 代码。使用 App_Code 文件夹。

在页面文件代码中，您必须编写方法/属性/等来完成页面工作，而不是数据库工作。

常见的页面代码，可以放在ac#文件中（总是在App_Code下），

通过扩展`System.Web.UI.Page`类。

示例 App_Code/PageBase.cs ：

```
public class PageBase : System.Web.UI.Page
{
    // common code
} 
```

示例 Default.aspx.cs ：

```
public partial class _Default : PageBase // instead of System.Web.UI.Page
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:21:01.723

您可以在其他类中定义这些方法，然后从后面的代码中调用它们。或者在一个公共基类中定义其中一些

2 你必须子类页面，然后你可以创建自己的基类

# android - 无法通过“HttpURLConnection”获取公共 Facebook 提要

> ID：15280873
> 
> 赞同：0
> 
> 时间：2013-03-07T20:15:10.213
> 
> 标签：android, facebook

这是我正在尝试做的代码。我在清单文件中添加了互联网访问权限。另外，我不希望用户登录 facebook；只是想让数据出现。

```
 public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            URL url;
            try {
                url = new URL("https://www.facebook.com/feeds/page.php?format=rss20&id=289781571139242");

                HttpURLConnection urlConnection = (HttpURLConnection) url
                        .openConnection();

                InputStream in = urlConnection.getInputStream();

                InputStreamReader isw = new InputStreamReader(in);

                int data = isw.read();
                while (data != -1) {
                    char current = (char) data;
                    data = isw.read();
                    System.out.print(current);
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    } 
```

# gcc - 为什么“未定义引用`boost::system::generic_category”即使我确实链接到boost_system

> ID：15280882
> 
> 赞同：19
> 
> 时间：2013-03-07T20:15:43.930
> 
> 标签：gcc, boost, linker

如果我没有放置`-lboost_system`标志，我会理解此错误消息，但它确实在这里：

```
g++ -o build/myproject build/main/main.o -L/usr/local/boost/boost_1_52_0/boost/libs -L/usr/lib -Lbuild -L。-lboost_system -lboost_thread -lpthread -lboost_regex -lpq -lmylibrary
build/libmylibrary.a(library.o)：在函数`__static_initialization_and_destruction_0(int, int)'中：
library.cpp:(.text+0x25f): undefined reference to `boost::system::generic_category()'
library.cpp:(.text+0x269): undefined reference to `boost::system::generic_category()'
library.cpp:(.text+0x273): undefined reference to `boost::system::system_category()'

```

你知道我应该调查什么来解决这个问题吗？（我使用 gcc 4.6.3）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-10T03:49:24.900

您链接库的顺序很重要，在您的情况下，您`library.cpp`显然使用了该`boost_system`库

```
library.cpp:(.text+0x25f): undefined reference to `boost::system::generic_category()'
library.cpp:(.text+0x269): undefined reference to `boost::system::generic_category()'
library.cpp:(.text+0x273): undefined reference to `boost::system::system_category()' 
```

要解决这个问题，您应该将 boost_system 库移动到链接行的末尾

```
g++ -o build/myproject build/main/main.o -L/usr/local/boost/boost_1_52_0/boost/libs -L/usr/lib -Lbuild -L. -lboost_thread -lpthread -lboost_regex -lpq -lmylibrary **-lboost_system** 
```

或者，构建`libmylibrary.so`为共享库并`boost_system`直接链接到该库。

# apache-camel - Apache Camel JPA：根据另一个表中的列更新列

> ID：15280885
> 
> 赞同：1
> 
> 时间：2013-03-07T20:16:01.383
> 
> 标签：apache-camel

我有两个实体 Entity1 和 Entity2。这是我在路线中需要做的。

我需要读取 Entity1 并获取列值，获取该列值并将其更新为 Entity2 中的列。

如何使用 Camel Jpa 做到这一点？

# groovy - Groovy 默认方法参数

> ID：15280887
> 
> 赞同：1
> 
> 时间：2013-03-07T20:16:10.877
> 
> 标签：groovy, overloading

如何调用下面的方法 def 只传递*interactionId、transactionId、awResponseFile、testMethodName 和expectedNumberOfConsumers*？

**方法定义**

```
void verifyPersistence(String interactionId, String transactionId, 
                       File rawResponseFile, String testMethodName, 
                       int expectedNumberOfDatasourceProductResponseRaws=1, 
                       String dsProductName=datasourceSpec['creditreport.name'], 
                       int expectedNumberOfDatasourceProductResponses=1, 
                       int expectedNumberOfConsumers=1, 
                       int expectedNumberOfAddresses=1 ) 
```

**方法调用**

```
verifyPersistence interactionId.persistedVersion(), transactionId, 
                  results, testName.methodName, expectedNumberOfConsumers:8 
```

**例外**

```
groovy.lang.MissingMethodException: No signature of method: verifyPersistence() is applicable for argument types: (java.util.LinkedHashMap, java.lang.String, java.lang.String, java.io.File, java.lang.String) values: [[expectedNumberOfConsumers:8], 3130001030065, 10003000000890059, C:\results, multiple consumers contracts]
Possible solutions: 

verifyPersistence(java.lang.String, java.lang.String, java.io.File, java.lang.String), 
verifyPersistence(java.lang.String, java.lang.String, java.io.File, java.lang.String, int), 
verifyPersistence(java.lang.String, java.lang.String, java.io.File, java.lang.String, int, java.lang.String), 
verifyPersistence(java.lang.String, java.lang.String, java.io.File, java.lang.String, int, java.lang.String, int), verifyPersistence(java.lang.String, java.lang.String, java.io.File, java.lang.String, int, java.lang.String, int, int)
    at HitmultipleconsumersPersistSpec.groovy:151) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:28:41.400

当您包含地图条目 ( `key:value`) 时，它们会被自动收集，放入哈希图中并作为第一个参数传递。Groovy 目前还没有命名参数。对于这种特定情况，我认为您最好使用该方法的地图：

```
def verifyPersistence(Map map) {
  String interactionId = map.interactionId
  String transactionId = map.transactionId
  File rawResponseFile = map.rawResponseFile
  String testMethodName = map.testMethodName
  int expectedNumberOfDatasourceProductResponseRaws = map.expectedNumberOfDatasourceProductResponseRaws ?: 1
  String dsProductName = map.dsProductName ?: datasourceSpec['creditreport.name']
  int expectedNumberOfDatasourceProductResponses = map.expectedNumberOfDatasourceProductResponses ?: 1
  int expectedNumberOfConsumers = map.expectedNumberOfConsumers ?: 1
  int expectedNumberOfAddresses = map.expectedNumberOfAddresses ?: 1
}

verifyPersistence(
  interactionId : interactionId.persistedVersion(), 
  transactionId : transactionId, 
  rawResponseFile : results, 
  expectedNumberOfDatasourceProductResponseRaws : 14, 
  expectedNumberOfConsumers:8
) 
```

您显然不需要将每个参数分配给变量，您可以简单地使用`map.field`语法。如果您希望对其进行类型检查，那么我认为您最好使用对象来封装参数。

# android - 具有大存储空间 (16GB) 的 Android 模拟器无法启动

> ID：15280888
> 
> 赞同：1
> 
> 时间：2013-03-07T20:16:23.927
> 
> 标签：android, android-emulator, storage

我正在尝试使用大量存储空间 (16GB) 启动 android 模拟器，但它不会通过 Android 徽标屏幕启动。不过，我可以用不到 GB 的存储空间启动 VM。

在android屏幕上被屏蔽时不会显示任何错误，并且会一直显示这个logo。

控制台输出是：

```
C:\Users\Benoit>emulator: device fd:744

HAX is working and emulator runs in fast virt mode
creating window 0 0 438 729 
```

配置文件是

```
avd.ini.encoding=ISO-8859-1
hw.dPad=no
hw.lcd.density=213
sdcard.size=1000M
hw.cpu.arch=x86
hw.device.hash=2035627702
hw.camera.back=none
disk.dataPartition.size=16G
hw.gpu.enabled=yes
skin.dynamic=yes
skin.path=480x800
hw.keyboard=yes
hw.ramSize=768
hw.device.manufacturer=User
hw.sdCard=yes
hw.mainKeys=no
hw.accelerometer=yes
skin.name=480x800
abi.type=x86
hw.trackBall=no
hw.device.name=Custom Smartphone
hw.battery=yes
hw.sensors.proximity=yes
image.sysdir.1=system-images\android-17\x86\
hw.sensors.orientation=yes
hw.audioInput=yes
hw.camera.front=none
hw.gps=yes
vm.heapSize=32 
```

我正在使用 HAXM 和主机 gpu，768M 内存，800*480 分辨率。

是什么阻止了模拟器完全启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:17:51.617

似乎该问题仅在从 AVD 的 UI 启动虚拟机时出现。当从命令行启动`-partition-size 500`（或任何低于 2048 的内容）时，它可以按预期使用 AVD 的 UI 中设置的存储量。

所以启动我的虚拟机`emulator @Smartphone -partition-size 500`是有效的。希望能帮助到你！

# azure - Azure VM 关闭

> ID：15280890
> 
> 赞同：3
> 
> 时间：2013-03-07T20:16:31.080
> 
> 标签：azure, azure-virtual-machine

我在 Azure 上有 2 台 VM 机器。一个人突然停止了反应。它关闭了大约 30 分钟，直到我刚刚浏览到 Azure 门户，然后我看到它处于启动状态，然后它又重新启动并运行。

如何判断我的 VM 关闭的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:24:26.253

**编辑：我假设您在谈论虚拟机 (IaaS)，而不是云服务 (PaaS)。**

出于多种原因，虚拟机可以并且将会重新启动。例如：

*   硬件故障，您的虚拟机将在另一台服务器上重新启动。
*   主机操作系统刷新。这是运行物理服务器的操作系统。
*   某种类型的操作系统崩溃

另请记住：虚拟机目前处于*预览阶段*，没有 SLA。因此，您没有任何现成的信息可用于确定您的虚拟机为何变得不可用。

如果它在 30 分钟内不可用，则这暗示类似于主机操作系统更新或您的虚拟机正在移动。如果它停机了 5 分钟，那么我猜这是操作系统崩溃。

**更新**我刚刚查看了[Azure 仪表板](http://www.windowsazure.com/en-us/support/service-dashboard/)，它显示了使用虚拟机进行降级计算（请参阅带有问题描述的[RSS 提要）。](http://www.windowsazurestatus.com/windowsazure/support/status/RSSFeed.aspx?RSSFeedCode=WACEU)也许这是您的特定中断的根本原因......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:42:42.907

有几件事可能导致这种情况发生，您的虚拟机可能由于编码或开发不当而崩溃，我认为第二个原因是您创建的虚拟机数量不足以满足传入的流量。如果传入流量的数量超过 VM 可以处理的数量，这可能会导致您的 VM 重新启动。

# .net - .NET Rx Koans：为什么这个测试用例会失败？

> ID：15280893
> 
> 赞同：3
> 
> 时间：2013-03-07T20:16:34.397
> 
> 标签：.net, unit-testing, asynchronous, system.reactive

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:00:43.450

简短的回答：

在检查结果之前，您没有足够的时间来执行测试的异步部分。

更长的答案：

这个测试执行的动作序列有点像：

*   设置一个`IObservable`将异步调用委托的
*   将其链接到另一个`IObservable`是其中两个异步调用的合并结果，加在一起
*   `Subscribe`到结果`IObservable`，导致方法的两次异步调用
*   嗬！委托中有a `Thread.Sleep`，所以异步调用被阻塞！
*   立即检查结果，这当然是 0 - 两个阻塞的异步调用还没有“完成”

有很多方法可以“解决”这个问题：

*   去除那个`Thread.Sleep`
*   通过更改将调用更改为同步`BeginInvoke`，尽管这需要对测试进行整体重组
*   用 a`HistoricalScheduler`代替`Immediate`那个

在尝试对 Rx 内容进行单元测试时，强烈建议使用 a `HistoricalScheduler`- 基本上，它可以让您在虚拟时间中向前和向后跳跃，这是测试 Rx 查询等与时间相关的代码的关键特性：

```
var theTardis = new HistoricalScheduler();

Func<int, int> inc = (int x) =>
{
    theTardis.Sleep(TimeSpan.FromMilliseconds(1500));
    return x + 1;
};
double result = 0;
var incAsync = Observable.FromAsyncPattern<int, int>(inc.BeginInvoke,inc.EndInvoke);

incAsync(1).Merge(incAsync(9)).Sum()
    .SubscribeOn(theTardis)
    .Subscribe(n => result = n);

// To the FUTURE!
theTardis.AdvanceBy(TimeSpan.FromSeconds(5));

Assert.AreEqual(12, result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T01:12:36.257

这是同步版本的样子——你所拥有的最直接的版本。`Single()`将阻塞直到 observable 完成。阻塞通常是您想要避免的事情，但如果您只是在乱搞也没关系。

```
public void AsynchronousRunInParallel()
{
    Func<int, int> inc = (int x) =>
    {
        Thread.Sleep(1500);
        return x + 1;
    };

    var incAsync = Observable.FromAsyncPattern<int, int>(inc.BeginInvoke,
                                                         inc.EndInvoke);

    int sum = incAsync(1).Merge(incAsync(9)).Sum().Single();

    Assert.AreEqual(12, sum);
} 
```

和一个异步 TPL 版本，使用`await`：

```
public async Task AsynchronousRunInParallel()
{
    Func<int, int> inc = (int x) =>
    {
        Thread.Sleep(1500);
        return x + 1;
    };

    var incAsync = Observable.FromAsyncPattern<int, int>(inc.BeginInvoke,
                                                         inc.EndInvoke);

    int sum = await incAsync(1).Merge(incAsync(9)).Sum();

    Assert.AreEqual(12, sum);
} 
```

最后是一个使用 Rx 的异步程序`Do()`——如果说这是更大操作的一部分，那就太好了：

```
public async Task AsynchronousRunInParallel()
{
    Func<int, int> inc = (int x) =>
    {
        Thread.Sleep(1500);
        return x + 1;
    };

    var incAsync = Observable.FromAsyncPattern<int, int>(inc.BeginInvoke,
                                                         inc.EndInvoke);

    await incAsync(1).Merge(incAsync(9)).Sum().Do(sum =>
    {
        Assert.AreEqual(12, sum);
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-03T01:43:08.460

在我看来，这是源代码中的一个错误，并且 AsynchronousRunInParallel 缺少结果等待，例如在 TheBloodyHardAsyncInvokationPatter 中使用的结果。

使用 FromAsyncPattern 时，只在当前线程中同步执行 BeginInvoke。实际工作和结果处理将安排在 ThreadPool 上。因此，一旦安排了 2 个异步增量，就会开始执行 Assert，而无需等待完成。

我已经添加：

```
ThreadUtils.WaitUntil(() => result != 0.0); 
```

所以结果看起来像：

```
 incAsync(1).Merge(incAsync(9)).
            Sum().SubscribeOn(Scheduler.Immediate).
            Subscribe(n => result = n);
        ThreadUtils.WaitUntil(() => result != 0.0);
        Assert.AreEqual(12, result); 
```

或者您可能希望将“订阅”替换为“运行”。它是 Koan 本身的辅助方法，它将使用手动事件等待：

```
incAsync(1).Merge(incAsync(9)).
             Sum().SubscribeOn(Scheduler.Immediate).
             Run(n => result = n);
Assert.AreEqual(12, result); 
```

# python - 如何防止tox删除已安装的包？

> ID：15280896
> 
> 赞同：2
> 
> 时间：2013-03-07T20:16:37.667
> 
> 标签：python, tox

我正在 Windows 上使用 tox 为依赖于 numpy 和 scipy 的包运行测试。

由于 pip 不知道如何安装二进制文件，所以我手动安装了 numpy 和 scipy 的二进制文件。在测试运行期间，tox 卸载了 numpy 和 scipy，当然会因为找不到依赖关系而立即中断。

这发生在带有旧版本 numpy 和 scipy（用于测试向后兼容性）的 python 2.5 上。

我的 tox 版本（在我用来运行 tox 的 python 2.6 中）是 tox-1.4.2 我的 2.5 环境中的 pip 版本是 pip-1.2.1。

大约 2 年前，当我设置我的毒物测试时，这并没有发生。

问题：有没有办法防止 tox 卸载 numpy 和 scipy？

额外的问题：是否有替代 tox/pip 在 Windows 上运行更好并且知道如何安装二进制文件的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:46:06.503

我猜 virtualenv 环境被重新创建（tox 不会卸载包）。

Tox 曾经支持 easy_install - 并且应该重新出现，请参阅[https://bitbucket.org/hpk42/tox/issue/76/support-using-easy_install-special-on](https://bitbucket.org/hpk42/tox/issue/76/support-using-easy_install-especially-on)

同时您可以尝试做的是在基础 python 环境中安装 numpy/scipy，然后使用该`sitepackages=True`选项，请参阅[http://tox.readthedocs.org/en/latest/config.html#confval-sitepackages=True|False](http://tox.readthedocs.org/en/latest/config.html#confval-sitepackages=True|False)

# python - python包的导入混淆

> ID：15280897
> 
> 赞同：2
> 
> 时间：2013-03-07T20:16:38.620
> 
> 标签：python, python-import

`enter code here`我有一个包名 celery 和一个文件名 celery。

当我说导入芹菜时，它试图导入芹菜文件而不是芹菜包。它说它无法导入芹菜

```
from __future__ import absolute_import
from celery import Celery

celery = Celery('celery_app',
                broker='redis://localhost:6379/0',
                backend='amqp://',
                include=['celery_app.tasks'])

# Optional configuration, see the application user guide.
celery.conf.update(
    CELERY_TASK_RESULT_EXPIRES=3600,
)

if __name__ == '__main__':
    celery.start() 
```

如下所示。有没有办法解释导入包而不是文件。

**编辑：**

试过了

```
from __future__ import absolute_import
import sys
del sys.path[0]
from celery import Celery 
```

但还是一样。当我从 python shell 尝试这些命令时；它没有给出任何错误。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:02:15.657

> 当我从 python shell 尝试这些命令时；它没有给出任何错误。有什么我想念的吗？

我真的**不**推荐它，像每个人所说的那样**重命名**你的文件，但你可以尝试

```
import sys, os
[sys.path.remove(i) for i in sys.path if i == os.getcwd() or i == '']
from celery import Celery 
```

此外，您正在导入`absolute_import`但您似乎没有使用它（[文档](http://docs.python.org/2/whatsnew/2.5.html#pep-328-absolute-and-relative-imports)）。从*本地*文件导入时`celery.py`

```
from .celery import my_func 
```

# php - PHPExcel - 应用数字格式时性能严重下降

> ID：15280899
> 
> 赞同：2
> 
> 时间：2013-03-07T20:16:49.763
> 
> 标签：php, symfony, reporting, phpexcel

我已经使用 xdebug 分析了我的 Excel 生成代码并查看了研磨文件。显然我的大部分执行时间都花在了：

```
setFormatCode(...) 
```

![在此处输入图像描述](../Images/5ce29cc33e726315f5c6c20c005e1fed.png)

有问题的代码在这里：

```
protected function formatRow($line)
{
    // /*
    foreach ($this->getIntegerColumns() as $column) {
        $style = $this->worksheet->getStyle($column . $line);
        $style->getNumberFormat()->setFormatCode('#,##0');
    }
    foreach ($this->getFloatColumns() as $column) {
        $style = $this->worksheet->getStyle($column . $line);
        $style->getNumberFormat()->setFormatCode('#,##0.00');
    }
    foreach ($this->getPercentageColumns() as $column) {
        $style = $this->worksheet->getStyle($column . $line);
        $style->getNumberFormat()->setFormatCode('0.00%');
    }
    foreach ($this->getDateColumns() as $column) {
        $style = $this->worksheet->getStyle($column . $line);
        $style->getNumberFormat()->setFormatCode('mm/dd/yyyy');
    }
    // */
    return $this;
} 
```

我的报告通常需要：

```
getSummaryData: Elapsed time: 4
getInteractionData: Elapsed time: 10
getVideoData: Elapsed time: 2
new CampaignDetailReport: Elapsed time: 0
new CampaignDetailReportWriter: Elapsed time: 0
new write(): Elapsed time: 125

~ 140 seconds 
```

但是，如果我注释掉 formatRow() 函数的内容，则需要：

```
getSummaryData: Elapsed time: 4
getInteractionData: Elapsed time: 9
getVideoData: Elapsed time: 2
new CampaignDetailReport: Elapsed time: 0
new CampaignDetailReportWriter: Elapsed time: 0
new write(): Elapsed time: 32

~ 50 seconds 
```

这仍然很长，但有很大的改进（快了近 50%）。

我在这里查看了答案：[PHPExcel 非常慢 - 如何改进？](https://stackoverflow.com/questions/5983845/phpexcel-very-slow-ways-to-improve)，但我不确定如何实施修复。理想情况下，我认为一种解决方案是将样式应用于整个列，而不是逐个单元格。如果该列类似于“成本”，我知道所有列值都是浮点数，因此将数字格式应用于所有单元格可能是安全的。现在确定如何实际做到这一点。

更新：

为了回应马克贝克斯的回答，我做了以下事情：

```
foreach($this->getIntegerColumns() as $column) {
        $this->worksheet->getStyle(sprintf("%s%s:%s%s", $column, 5, $column, $this->line))
             ->getNumberFormat()
             ->setFormatCode('#,##0');
    } 
```

为列中的所有单元格设置整数类型的所有列的样式。我所有的报告指标都从 5 开始，然后转到 this->line，这是内部计数器。到目前为止，这运作良好。完成一张工作表的样式大约需要 4 秒（我的报告中有 3 个工作表）。所以按照这个速度，我应该能够为所有工作表设置样式，并且只需要额外的 ~12 秒执行时间，将其提高到 ~65 对 ~125 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:05:20.010

利用流畅的界面。

尽可能将您的格式应用于一系列单元格：

```
$this->worksheet->getStyle('A1:A21')
    ->getNumberFormat()
    ->setFormatCode('0.00%'); 
```

如果您想一次性将多个样式设置应用于一个单元格（或单元格范围），请使用样式的 applyFromArray()。

所有这些技术都将有助于提高速度。

# c# - 方法：并非所有代码路径都返回值

> ID：15280901
> 
> 赞同：-1
> 
> 时间：2013-03-07T20:16:57.593
> 
> 标签：c#, return, xna-4.0

好的，所以在开发我正在开发的 XNA 4.0 游戏时，我遇到了这个问题，我的一种方法得到了错误“并非所有代码路径都返回一个值”，这让我在过去的几个小时里发疯了.

```
 private Rectangle HandleCollision(Rectangle bounds, TileCollision collision, Rectangle tileBounds)
    {
        Vector2 depth = RectangleExtensions.GetIntersectionDepth(bounds, tileBounds);
        if (depth != Vector2.Zero)
        {
            float absDepthX = Math.Abs(depth.X);
            float absDepthY = Math.Abs(depth.Y);

            // Resolve the collision along the shallow axis.  
            if (absDepthY < absDepthX || collision == TileCollision.Platform)
            {
                // If we crossed the top of a tile, we are on the ground.
                // also ladder
                if (previousBottom <= tileBounds.Top)
                {
                    if (collision == TileCollision.Ladder)
                    {
                        if (!isClimbing && !isJumping)
                        {
                            //walking over a ladder
                            isOnGround = true;
                        }
                    }
                    else
                    {
                        isOnGround = true;
                        isClimbing = false;
                        isJumping = false;
                    }
                }

                // Ignore platforms, unless we are on the ground.  
                if (collision == TileCollision.Impassable || IsOnGround)
                {
                    // Resolve the collision along the Y axis.  
                    Position = new Vector2(Position.X, Position.Y + depth.Y);

                    // Perform further collisions with the new bounds.  
                    bounds = BoundingRectangle;
                }
            }
            else if (collision == TileCollision.Impassable) // Ignore platforms.  
            {
                // Resolve the collision along the X axis.  
                Position = new Vector2(Position.X + depth.X, Position.Y);

                // Perform further collisions with the new bounds.  
                bounds = BoundingRectangle;
            }

            else if (collision == TileCollision.Ladder && !isClimbing)
            {
                //stops colliding with ladder if player walks past or drops off ladder
                Position = new Vector2(Position.X, Position.Y);

                //perform collisions with new bounds
                bounds = BoundingRectangle;
            }
            return bounds;
        }
    } 
```

任何帮助理解此错误将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:18:42.117

你的问题就在这里。

```
if (depth != Vector2.Zero) 
```

如果计算结果为 false，则不会返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:18:51.860

将您的陈述移到`return bounds;`陈述之外`if`。如果该`if`语句解析为 false，则永远不会命中返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:19:32.453

如果深度等于 Vector2.Zero，则不会返回任何内容。因此，并非所有代码路径都返回一个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:19:50.413

如果你`depth != Vector2.Zero`回来怎么`false`办

```
if ( depth != Vector2.Zero ) 
```

健康）状况？

您的方法此时不会返回任何内容。您还必须在此循环之外返回值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T20:20:14.393

return 语句嵌套在条件中。因此，如果 (depth == Vector2.Zero) 该方法将不会返回值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T20:21:31.610

这是因为如果你先`IF`返回`false`，那么就像错误所说的那样`Not all code paths return a value`。您应该考虑添加返回值，或者可能是这种情况的例外

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T20:22:43.877

您需要将最终返回值移到 if 之外：

```
private Rectangle HandleCollision(Rectangle bounds, TileCollision collision, Rectangle tileBounds)
{
  if(depth != Vector2.Zero)
  {

  }
  return bounds;
} 
```

你有这样的：

```
private Rectangle HandleCollision(Rectangle bounds, TileCollision collision, Rectangle tileBounds)
{
  if(depth != Vector2.Zero)
  {
     return bounds;
  }
} 
```

这意味着，如果`depth == Vector2.Zero`没有返回任何内容，那么您会收到您所看到的错误。

# intuit-partner-platform - p_validate_txn - 无法找到 MBL 客户 REF id

> ID：15280908
> 
> 赞同：0
> 
> 时间：2013-03-07T20:17:27.837
> 
> 标签：intuit-partner-platform

我使用 Intuit Anywhere 将客户添加到 QuickBooks 桌面。当我尝试同步销售收据时，我收到此错误：

p_validate_txn - 无法找到 MBL 客户 REF id = [number] idDomain = QB

我返回客户 ID 的代码：

```
 Customer customer = new Customer();
            List<Customer> customersList = new List<Customer>();
            string theName = GetCustId(ord);

            CustomerQuery query = new CustomerQuery();

            if (_qboSettings.CustomerID != "SingleName")
            {
                query.FirstLastName = ord.BillingAddress.FirstName + " " + ord.BillingAddress.LastName.Trim();
            }
            else
            {
                query.FirstLastName = theName.Trim();
            }
            customersList = query.ExecuteQuery<Customer>(dataServices.ServiceContext).ToList();

            //for customers that do not exist, return the ID and add them
            if (customersList.Count() == 0)
            {
                return BuildCustomerAddRq(ord).Id.Value;
            }

            return customersList.FirstOrDefault().Id.Value; 
```

当我运行客户查询时，响应如下：

[http://pastebin.com/rtyA8KKL](http://pastebin.com/rtyA8KKL)

我似乎错误地询问了我的客户？当我运行 Intuit Sync Manager 时，我的 QuickBooks Desktop 中没有看到新客户。这应该发生吗？

这是创建销售收据时的休息响应：

[http://pastebin.com/QE5YwjVB](http://pastebin.com/QE5YwjVB)

这个问题发生在已经存在的客户身上。我在我的 QB 和订单项目中创建了 John Smith。我运行了同步管理器。即使有现有客户，我仍然会收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:00:00.110

在创建销售收据时，您可以尝试在请求中传递客户 ID 和客户名称吗？

# jquery - 恢复未设置的 div 宽度

> ID：15280916
> 
> 赞同：2
> 
> 时间：2013-03-07T20:17:54.537
> 
> 标签：jquery, html, css

我正在尝试为 div 设置动画，我将它设置`width`为`650px`当我“缩小”它时，我想`width`在切换动画时恢复它的原生状态。我`animated_div`的如你所见，有`width`容器的，而且只有`min-width`一套。这是我的代码：

**HTML**

```
<div id="container> 
<div class="animated_div>
... 
<p>really a lot of text here</p>
...
</div>
</div> 
```

**CSS**

```
.animated_div{
 padding:20px;
 min-width:650px;
 margin:0 auto;
 margin-bottom:15px;
 margin-top:10px;
 } 
```

**查询**

```
$("#toggle_click").on('click', function() {
  $("#animated_div").animate({
  width : "650px"
 })

$("#toggle_click2").on('click', function() {
  $("#animated_div").animate({
  width : "100%"   // Here it is the problem , It set the div to be over-widthed.
 }) 
```

正如我在评论中所写的那样，问题是如果我设置`100%`div 获得比容器更大的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:26:43.360

You can simply set the width to "auto" via jQuery. Your call would look like this:

```
$("#toggle_click2").on('click', function(){
    $('#animated_div').animate({ width:'auto'});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:33:17.267

100% 宽度 + 你的 20px 填充将使你的 div 比你的容器宽 40px。

尝试，而不是将宽度设置为 100%，将宽度设置回继承：

```
$("#toggle_click2").on('click', function() {
    $("#animated_div").animate({
           width : "auto"
    });
}); 
```

另外，不要忘记右括号和分号。

# php - 如何使用 AJAX 将数据发送到我的 PHP 脚本？

> ID：15280929
> 
> 赞同：1
> 
> 时间：2013-03-07T20:19:10.177
> 
> 标签：php, javascript, ajax

我是 PHP 和 Javascript/Ajax 的新手，所以请多多包涵。

我需要做的就是从 Ajax 中获取一个变量并将其设置为 php 中的变量。我正在尝试使用超级全球性来做到这一点，`GET`但有些事情是不对的。我不想通过提交表单来做到这一点。

这是我的 JS：

```
function myFunction(){
var hora= document.getElementById("hora").value;
$.ajax({ 
        type : 'GET',
         url : 'reservation.php',
         data : {hora: hora},
         success : function(data) {
                console.log(hora);//This is because I was curious as to
                             // what the console would say. I found
                             // that this sets the super global if I
                             // change the url to something else that
                             // doesn't exist. Console would say
                             // -GET http://localhost/bus/(somepage).php?hora=4
                             // 404 (Not Found)-  
                alert(hora);
               }
})
} 
```

这是我的PHP：

```
Hora:
 <select name="hora" id="hora" onchange="myFunction()">
     <?php
         $query = "SELECT * FROM vans";
         $horas_result = mysql_query($query);
         while ($horas = mysql_fetch_array($horas_result)) {
        echo "<option value=\"{$horas["van_id"]}\">{$horas["time"]}</option>";
         }
    ?>
 </select>&nbsp;
 Asientos Disponibles:
    <?php echo $_GET["hora"]; ?>
        //Right now I only want to echo this variable.. 
```

如您所见，现在我只想回显这个变量，稍后我将使用它来编写查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:27:27.360

例如，以下脚本

```
$.ajax({
            type: "POST",
            url: "test.php",
            data: {value:1}
        }).done(function(msg) {
                    // msg contains whatever value test.php echoes. Whether it is code, or just raw data. 
            if(msg=="Success") { 
              alert("hello world"); 
              } else {
                alert("Hello Hell")
            }
        }); 
```

将变量设置`$_POST['value']`为`1`

我的 test.php 看起来像：

```
<?php
 if($_POST['value'] == "1") {
     echo "Success";
 } else {
     echo "Failure";
 }
?> 
```

如果您运行该示例，网页将向您显示带有文本“Hello World”的警报框如果您将值更改为任何其他数字，它将向您显示带有文本“Hello Hell”的警报

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:10:50.750

查看我发布的代码，ajax 用于发布/获取数据而无需刷新页面，但如果您只想发布数据并在其他页面中给出结果，请改用表单。

```
<?php

    if (isset($_GET["hora"]))
    {
        echo $_GET["hora"];

        exit;
    }
?>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Page title</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

</head>

<body>

<script type="text/javascript">

        $(document).ready(function()
            {
                $("#hora").change(function ()
                    {
                        $.ajax(
                            { 
                                type : 'GET',
                                url : '',
                                data : $('select[name=\'hora\']'),
                                success : function(data)
                                    {
                                        $('#ajax_result').html('Asientos Disponibles:  ' + data);
                                    },
                                error: function(xhr, ajaxOptions, thrownError)
                                    {
                                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                                    }
                            }
                        )
                    }
                )

            }
        )

</script>

<select name="hora" id="hora">
     <?php
         $query = "SELECT * FROM vans";
         $horas_result = mysql_query($query);
         while ($horas = mysql_fetch_array($horas_result)) {
        echo "<option value=\"{$horas["van_id"]}\">{$horas["time"]}</option>";
         }
    ?>
 </select>&nbsp;
    <div id="ajax_result">
    </div>
</body>
</html> 
```

# c# - 为什么异常消息属性是只读的？

> ID：15280933
> 
> 赞同：5
> 
> 时间：2013-03-07T20:19:32.257
> 
> 标签：c#, exception

也许 C# 中对我来说最神秘的事情是 Exception 类的 message 属性是只读的。可能是因为我不明白其中的原因，当我尝试创建从 Exception 派生的合理异常类时，我感到很沮丧。

例如（实际上是我正在尝试做的事情），我想创建一个异常以在尝试连接到 OPC 服务器时引发。如果尝试失败，则会引发 OPCException 类型的对象，但我想为用户提供更多信息。所以，我有一个名为 OPCCaException 的类，它接受三个参数：原始异常的返回码、服务器名称和主机名。

```
public class OPCCaException : Exception
{
    public OPCCaException(ReturnCode returnCode, string serverName, string nodeName)
    {
        if (nodeName == "")
        {
            this.Message = "Failed to connect to OPC server "+ serverName + 
                           ": " + TranslateReturnCode()";
        }
        else
        {
            this.Message = "Failed to connect to OPC server "+ serverName + 
                           " on node " + nodeName +
                           ": " + TranslateReturnCode()";
        }
    }
} 
```

在我看来，这似乎是一件非常合理的事情，但它不会编译，因为 Message 属性是只读的。设置消息的唯一方法是将其传递给基类构造函数。为什么我不能在派生类的构造函数中设置它？我能想到的对参数进行任何类型处理的唯一方法是创建一个静态类来构建消息：

```
public class OPCCaException : Exception
{
    private static string BuildMessage(<some arguments>)
    {
        string message = "some message";
        return message;
    }
    public OPCCaException(ReturnCode returnCode, string serverName, string nodeName) :
        base(BuildMessage(returnCode, serverName, nodeName))
    {
    }
 } 
```

我不知道这是否会编译。

执行此操作的标准方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T20:22:04.183

`public virtual string Message`

[消息](http://msdn.microsoft.com/en-us/library/system.exception.message.aspx)是虚拟的 - 因此您可以在课堂上轻松地覆盖它。

```
public class OPCCaException : Exception
{...
  public override string Message 
  {
    get { return "My fancy text";}
  }
} 
```

更标准的做法是通过调用基类构造函数传递消息：

```
public OPCCaException(...) : base(buildMessage(...))
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T20:28:23.937

> Why is the exception message property read only?

Because exceptions are meant to stay intact as they travel up the stack trace. If, as you capture, you want to provide more information/meaningful message you should wrap the captured exception in another exception. There is a [constructor](http://msdn.microsoft.com/en-us/library/804f22sf.aspx) that does exactly that.

> This seems to me to be a perfectly reasonable thing to do, but it won't compile because the Message property is read-only.

What you're trying to achieve is perfectly reasonable. The way you're trying to achieve is not. Since Message property is read-only nobody can assign anything to it, including you. For this reason it was made virtual. Read more about overriding it on [MSDN](http://msdn.microsoft.com/en-us/library/system.exception.message.aspx).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T20:23:56.200

您可以将消息传递给基类构造函数，也可以覆盖类的 Message 属性以返回其他内容。例如：

```
public class OPCCaException : Exception
{
    ReturnCode returnCode;
    string serverName;
    string nodeName;

    public OPCCaException(ReturnCode returnCode, string serverName, string nodeName)
        : base();
    {
         this.returnCode = returnCode;
         this.serverName = serverName;
         this.nodeName = nodeName;
    }

    public override string Message
    {
        get
        {
             return string.Format("Failed to connect to OPC server {0}{1}: {2}",
                 serverName, 
                 string.IsNullOrEmpty(nodeName ? "" : " on node " + nodeName),
                 TranslateReturnCode(returnCode)
             );
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T20:24:47.197

你注意到这`Exception.Message`是一个虚拟财产吗？处理此问题的适当方法是覆盖`Message`并提供您自己的实现

```
public class MyException : Exception
{
    private string myMessage = null;
    public override string Message
    {
        get
        { 
            return String.IsNullOrEmpty(myMessage) ? 
                 base.Message : 
                 myMessage; 
        }
    }

    public MyException(string message) : base()
    {
        myMessage = message;
    }
} 
```

# vb.net - 使用 vb.net 在 Excel 工作表中选择范围

> ID：15280939
> 
> 赞同：0
> 
> 时间：2013-03-07T20:19:47.070
> 
> 标签：vb.net, excel, range, selection

这是我的代码：

```
Dim saveFileDialog1 As New SaveFileDialog()
saveFileDialog1.Filter = "Excel files (*.xls)|*.xls"
saveFileDialog1.Title = "Save File"
saveFileDialog1.RestoreDirectory = True

If saveFileDialog1.ShowDialog() = DialogResult.OK Then
    Try
        Dim ExcelApp As New Microsoft.Office.Interop.Excel.Application()
        ExcelApp.Application.Workbooks.Add(Type.Missing)
        ExcelApp.Cells.HorizontalAlignment = XlHAlign.xlHAlignLeft

        ' Change properties of the Workbook 
        ExcelApp.Columns.ColumnWidth = 15

        ' Storing header part in Excel
        For i As Integer = 1 To DataGridView1.Columns.Count
            ExcelApp.Cells(1, i) = DataGridView1.Columns(i - 1).HeaderText
        Next

        ' Storing Each row and column value to excel sheet
        For i As Integer = 0 To DataGridView1.Rows.Count - 2
            For j As Integer = 0 To DataGridView1.Columns.Count - 1
                ExcelApp.Cells(i + 2, j + 1) = DataGridView1.Rows(i).Cells(j).Value.ToString()
            Next
        Next

        Dim Destinationpath As String = saveFileDialog1.FileName
        ExcelApp.ActiveWorkbook.SaveAs(Destinationpath)
        ExcelApp.ActiveWorkbook.Saved = True
        ExcelApp.Quit()
        MsgBox("Record exported successfully", MsgBoxStyle.Information)
    Catch
        MsgBox("It is being used by another process.Please close it and retry.", MsgBoxStyle.Critical)
    End Try
Else
End If 
```

现在如何使用填充在 Excel 表中的上述代码选择范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:43:47.920

找到了答案：

```
Dim lastrow As Range = ExcelApp.Rows.End(XlDirection.xlDown)
Dim findme As Range = ExcelApp.Range("A1:E" & lastrow.Row)
MsgBox("A1:E" & lastrow.Row) 
```

# php - 更新后递增表格

> ID：15280944
> 
> 赞同：1
> 
> 时间：2013-03-07T20:19:51.760
> 
> 标签：php, javascript, html, wordpress, forms

我安装了 WordPress 电子商务插件。

在结帐页面中有数量字段和更新按钮的输入表单。

就像您可以输入您想要的任何数量并更新产品价格一样

每个产品的表格如下所示：

```
<td class="wpsc_product_quantity wpsc_product_quantity_<?php echo wpsc_the_cart_item_key(); ?>">
  <form action="<?php echo esc_url( get_option( 'shopping_cart_url' ) ); ?>" method="post" class="adjustform qty">
    <input class="span1" type="text" name="quantity" size="2" value="<?php echo wpsc_cart_item_quantity(); ?>" />
    <input type="hidden" name="key" value="<?php echo wpsc_the_cart_item_key(); ?>" />
    <input type="hidden" name="wpsc_update_quantity" value="true" />
    <input class="btn btn-new btn-new-red" type="submit" value="u" name="submit" />
  </form>
</td> 
```

我的任务是制作两个按钮，例如“加号”和“减号”，它们将提交此表单 +1 或 -1

我可以使用这种形式使用 php 或 javascript 制作它吗？

希望我用正常的方式描述了我想要的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:46:55.550

```
<script language="javascript">
    function changeQuantity(v){
        document.getElementById('quantity').value=parseInt(v)+parseInt(document.getElementById('quantity').value);

    }
</script>

<td class="wpsc_product_quantity wpsc_product_quantity_<?php echo wpsc_the_cart_item_key(); ?>">
    <form action="<?php echo esc_url(get_option('shopping_cart_url')); ?>" method="post" class="adjustform qty">
        <!-- Add id -->
        <input class="span1" type="text" id="quantity" name="quantity" size="2" value="<?php echo wpsc_cart_item_quantity(); ?>" />
        <input type="hidden" name="key" value="<?php echo wpsc_the_cart_item_key(); ?>" />
        <input type="hidden" name="wpsc_update_quantity" value="true" />
        <input class="btn btn-new btn-new-red" type="submit" value="u" name="submit" />
        <!--    New added code-->
        <a href="JavaScript:void(0);" onclick="changeQuantity(1);">Plus</a>  <a href="JavaScript:void(0);" onclick="changeQuantity(-1);">Minus</a>
    </form>
</td> 
```

# xcode - 对 sqlite3 数据库执行重复语句

> ID：15280948
> 
> 赞同：1
> 
> 时间：2013-03-07T20:20:11.207
> 
> 标签：xcode, sqlite

下面的方法针对 sqlite3 数据库运行。它旨在获取与作为参数（flds）传递的数组中的每个外键匹配的记录的所有主键。

```
- (NSArray*) columnPrimaryKeysForFields:(NSArray*)flds
{
    NSMutableArray* retval = [[NSMutableArray alloc] init];
    NSString* query = @"SELECT ID FROM Pages WHERE FieldID = ? ORDER BY ID";
    sqlite3_stmt* statement;
    if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, nil) == SQLITE_OK) 
    {
        for (NSNumber* fieldID in flds)
        {
            sqlite3_bind_int64(statement, 1, (int)[fieldID longValue]);

            while (sqlite3_step(statement) == SQLITE_ROW) 
            {
                [retval addObject:[NSNumber numberWithInteger:sqlite3_column_int(statement, 0)]];
            }
        }

        sqlite3_finalize(statement);
    }
    else
    {
        NSLog(@"SQL PREPARE columnPrimaryKeysForFields failed");
    }

    return [NSArray arrayWithArray:retval];
} 
```

在数据库中，有多个记录包含 flds 中的每个键。当该方法执行时，它会获取包含 flds 中第一个键的所有记录，但仅获取包含 flds 中每个后续键的第一个记录。我不明白为什么 flds 中的第一个键获取正确数量的记录，但后续键没有。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:28:20.130

您必须在最后一次通话后调用[sqlite3_reset](http://www.sqlite.org/c3ref/reset.html)`step`。

# c# - 调试 WCF 服务的问题

> ID：15280951
> 
> 赞同：2
> 
> 时间：2013-03-07T20:20:13.447
> 
> 标签：c#, visual-studio-2010, wcftestclient

因此，我在尝试调试 wcf 服务时遇到了很多麻烦，并且可以使用一些帮助。我正在编写的服务是使用 C#、Visual Studio 2010 编写的，并且是我公司在我们客户的一个项目中拥有的现有服务的一部分。当我在本地调试它时，我正在使用 WCFTestClient 连接到该服务。每当我第一次打开 Visual Studio 并调试有问题的服务时，它工作正常，但如果我对代码进行更改并需要重建，我会收到以下错误：

> 无法将文件“obj\Debug\Application.DataAccess.dll”复制到“bin\Debug\Application.DataAccess.dll”。无法对打开了用户映射部分的文件执行请求的操作。

我能够解决此问题的唯一方法是关闭 Visual Studio 并重新打开它，每次我进行更改时都相当耗时且烦人。我试过清理解决方案并重建，但我得到了同样的错误。我什至打开了 Process Explorer 来尝试查找正在使用 dll 的内容，但唯一的是 FxCopCmd.exe，它是 Visual Studio 的一部分。

有没有人有更好的方法在本地调试 wcf 服务，或者知道如何防止或解决上述错误？非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T09:40:04.443

我遇到了同样的问题（FxCopCmd.exe 锁定了一些 DLL），我发现使用这个扩展“ [VS2010 的 Visual Studio 成就](http://visualstudiogallery.msdn.microsoft.com/bc7a433b-b594-48d4-bba2-a2f24774d02f/view/Discussions/4)”的人也遇到了类似的问题（请参阅此页面上的评论）。

从 Visual Studio 中删除这个扩展为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-29T12:51:09.143

转到解决方案位置的 Windows 文件夹并手动删除所有 bin / obj / debug DLL，而不是清理解决方案。然后应该可以工作（当我从 TFS 获取最新的现有 WCF 并且在构建它时给了我错误时，我遇到了同样的问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T07:11:39.813

如此处所述：[编译 XNA 项目时无法执行请求的操作错误](https://stackoverflow.com/questions/9011177/the-requested-operation-cannot-be-performed-error-when-compiling-an-xna-project)

关闭项目设置文件为我解决了这个问题。

# android - 为什么需要两次 MapView.getOverlays().remove() 调用才能删除覆盖？

> ID：15280955
> 
> 赞同：2
> 
> 时间：2013-03-07T20:20:24.263
> 
> 标签：android, overlay, android-mapview

List.remove() 什么时候不删除？...在一个`MapView`？

我有一个带有 a`MapView`和一个覆盖的应用程序，它扩展了`Overlay`. 在我的应用程序中的特定情况下（用户搜索添加我的覆盖的东西，然后取消搜索，此时我调用下面的代码应该删除覆盖）。

**代码：**

```
Log.e(TAG, "Map View Contains Overlay? " + mMapView.getOverlays().contains(mOverlay));
mMapView.getOverlays().remove(mOverlay);
Log.e(TAG, "Map View Contains Overlay? " + mMapView.getOverlays().contains(mOverlay));
mMapView.getOverlays().remove(mOverlay);
Log.e(TAG, "Map View Contains Overlay? " + mMapView.getOverlays().contains(mOverlay)); 
```

**日志：**

```
03-07 14:05:43.737: E/SearchActivity(22445): Map View Contains Overlay? true
03-07 14:05:43.737: E/SearchActivity(22445): Map View Contains Overlay? true
03-07 14:05:43.737: E/SearchActivity(22445): Map View Contains Overlay? false 
```

**笔记：**

*   `mMapView`是一个实例`com.google.android.maps.MapView`
*   `mOverlay`是我编写的自定义类的一个实例（不触及`.equals()`或`.hashCode()`扩展`com.google.android.maps.Overlay`

此时`mOverlay`删除了，但为什么需要两次调用才能删除？我有什么误解？

**解决方案：**

无论出于何种原因，我都有一个心理障碍，并假设`List`叠加层会强制执行我的业务逻辑，即在列表中拥有每种类型的一个布局。事实证明不是。 `MapView`s 可以拥有任意多个相同覆盖的实例，包括两个相同的实例（排除内存问题），因此如果将两个相同的实例添加到覆盖中，则`List`. 需要两个`remove`电话。

# sql-server - 如何比较两个逗号分隔的字符串，如果至少有 1 个匹配则返回 TRUE

> ID：15280956
> 
> 赞同：4
> 
> 时间：2013-03-07T20:20:31.830
> 
> 标签：sql-server, csv

我必须包含逗号分隔字符串的变量：

```
@v1 = 'hello, world, one, two'
@v2 = 'jump, down, yes, one' 
```

如果至少有一个匹配项，我需要一个返回 TRUE 的函数。所以在上面的例子中，它会返回 TRUE，因为值 'one' 在两个字符串中。

这在 SQL 中可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T20:27:39.657

Use a split function ([many examples here](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings) - CLR is going to be your best option in most cases back before SQL Server 2016 - now you should use `STRING_SPLIT()`).

Once you have a split function, the rest is quite easy. The model would be something like this:

```
DECLARE @v1 VARCHAR(MAX) = 'hello, world, one, two',
        @v2 VARCHAR(MAX) = 'jump, down, yes, one';

SELECT CASE WHEN EXISTS 
(
  SELECT 1 
    FROM dbo.Split(@v1) AS a
    INNER JOIN dbo.Split(@v2) AS b
    ON a.Item = b.Item
)
THEN 1 ELSE 0 END; 
```

You can even reduce this to only call the function once:

```
SELECT CASE WHEN EXISTS 
(
  SELECT 1 FROM dbo.Split(@v1)
  WHERE ', ' + LTRIM(@v2) + ',' 
    LIKE '%, ' + LTRIM(Item) + ',%'
) THEN 1 ELSE 0 END; 
```

On 2016+:

```
SELECT CASE WHEN EXISTS 
(
  SELECT 1 FROM STRING_SPLIT(@v1, ',')
  WHERE ', ' + LTRIM(@v2) + ',' 
    LIKE '%, ' + LTRIM([Value]) + ',%'
) THEN 1 ELSE 0 END; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T20:40:00.390

您可以使用 CTE 将字符串拆分为 xml 节点，然后将单词插入表变量中。加入表变量将显示任何匹配项

```
DECLARE @v1 VARCHAR(200) = 'hello, world, one, two'
DECLARE @v2 VARCHAR(200) = 'jump, down, yes, one'
DECLARE @v1Words TABLE (word VARCHAR(100))
DECLARE @v2Words TABLE (word VARCHAR(100))

;WITH cteSplitV1 AS( 
SELECT CAST('<word>' + REPLACE(@v1,', ','</word><word>') + '</word>' AS XML) AS words) 
INSERT INTO @v1Words(word)
    SELECT word.x.value('.','VARCHAR(100)') AS [word]
    FROM cteSplitV1
    CROSS APPLY words.nodes('/word') AS word(x)

;WITH cteSplitV2 AS( 
SELECT CAST('<word>' + REPLACE(@v2,', ','</word><word>') + '</word>' AS XML) AS words) 
INSERT INTO @v2Words(word)
    SELECT word.x.value('.','VARCHAR(100)') AS [word]
    FROM cteSplitV2 
    CROSS APPLY words.nodes('/word') AS word(x)

SELECT *
FROM @v1Words v1
JOIN @v2Words v2
    ON v1.word = v2.word 
```

# jakarta-ee - 为什么当我在 Glassfish 上启用 Comet 时它在我的情况下失败了？

> ID：15280957
> 
> 赞同：0
> 
> 时间：2013-03-07T20:20:40.427
> 
> 标签：jakarta-ee, glassfish, comet, grizzly, cometd

我想在 glassfish 上启用彗星，尤其是彗星、巴约协议的实现。

在这篇文章之后： http: [//docs.oracle.com/cd/E19798-01/821-1752/ghgxn/index.html](http://docs.oracle.com/cd/E19798-01/821-1752/ghgxn/index.html)。

使用此命令时：

```
asadmin set server-config.network-config.protocols.protocol.http-1.http.comet-support-enabled="true" 
```

我收到此错误：`Command set failed.`

更让我困惑的是这条线是什么意思：

```
Substitute the name of the protocol for http-1. 
```

我试图替换`http-1`为`bayeux`但也没有工作。

编辑：按照@perissf 的建议，我组装[了这个war 文件](http://www.4shared.com/file/pkQ-rTsH/hello_comet.html)，它在glassfish 上部署得很好，我正在使用Firebug 控制台，当我单击index.jsp 上的按钮时，没有任何输出。任何想法？

# ios - 使用 UIAppearance 设置自定义 UITableViewCell 的样式

> ID：15280964
> 
> 赞同：0
> 
> 时间：2013-03-07T20:21:04.983
> 
> 标签：ios

我有一个自定义 UITableViewCell ，我想使用 UIAppearance 协议对其进行样式设置。

```
@interface MyCell : UITableViewCell<UIAppearance>
{

}

@property (nonatomic,weak) UIView *backgroundCellView UI_APPEARANCE_SELECTOR;

 MyCell.m: 

  -(void) setBackgroundCellView:(UIView *)backgroundView
{
    NSLog(@"setBackgroundCellView");

    [super setBackgroundView:backgroundView];
} 
```

在应用程序委托中，我正在执行以下操作：

```
 [[MyCell appearance] setBackgroundCellView:[UIImageView .... with an image]]; 
```

它将背景分配给少数细胞，但不是所有细胞。通常分配的在中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:01:11.733

不能将相同的 UIImageView 分配给多个单元格并尝试显示它。同一个 UIView 不能只是一个子视图层次结构的一部分。

相反，需要做的是制作一个自定义背景视图，该视图具有一个可通过 UIAppearance 配置的 UIImage。

基本上应该使用 UIAppereance 而不是背景视图本身来配置背景视图的图像。

# ruby-on-rails - 轨道搜索结果

> ID：15280965
> 
> 赞同：1
> 
> 时间：2013-03-07T20:21:12.577
> 
> 标签：ruby-on-rails, search

现在我只能从视频页面搜索，如何从网站的任何页面添加搜索？

当我想从另一个控制器搜索时，搜索不会重定向到索引

我的控制器/videos_controller.rb

```
 def index
    @videos = Video.text_search(params[:query]).page(params[:page]).per(12)
  end 
```

我的意见/共享/_menu.html.erb

```
<%= form_tag videos_path, method: :get do %>
    <%= search_field_tag :query, params[:query]  %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:32:41.260

您可以将该部分添加到站点上的任何视图页面（page_name.html.erb 文件）。它将通过路由文件提交给控制器。

您可以在站点的任何位置将以下内容添加到视图中：

```
<%= render "shared/menu" %> 
```

# java - 为什么设置 expireAfterAccess 不起作用？

> ID：15280974
> 
> 赞同：2
> 
> 时间：2013-03-07T20:21:47.747
> 
> 标签：java, caching, testing, guava

为什么`timedCachetest`最后一行失败？为什么缓存在 60 秒后不为空？

```
package com.test.cache;

import java.util.concurrent.TimeUnit;

import junit.framework.Assert;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import com.google.common.cache.Cache;
import com.google.common.cache.CacheBuilder;

public class CacheTest {
    private static final int MAXIMUM_SIZE = 10;
    private static final int CONCURRENCY_LEVEL = 1;
    private static final long EXPIRE_AFTER_ACCESS = 60;
    Cache<String, Thing> cache;
    private static TimeUnit unit = TimeUnit.SECONDS;
    private static long sec = 1000;

    @Before
    public void setUp() throws Exception {
        cache = CacheBuilder.newBuilder().maximumSize(MAXIMUM_SIZE).concurrencyLevel(CONCURRENCY_LEVEL).expireAfterAccess(EXPIRE_AFTER_ACCESS, unit).build();
    }

    @After
    public void tearDown() {
        cache = null;
    }

    @Test
    public void simpleCachetest() {
        String key = "key";
        Integer hc = key.hashCode();
        Thing thing = new Thing(key);
        cache.put(key, thing);
        thing = cache.getIfPresent(key);
        Assert.assertNotNull(thing);
        Assert.assertEquals(hc, thing.getValue());
        Assert.assertEquals(key, thing.getName());
        Assert.assertEquals(1, cache.size());
    }

    @Test
    public void timedCachetest() {
        String key = "key";
        Thing thing = new Thing(key);
        Assert.assertEquals(0, cache.size());
        cache.put(key, thing);
        Assert.assertEquals(1, cache.size());
        try {
            thing = cache.getIfPresent(key);
            long millis = 100 * sec;
            Thread.sleep(millis);
            // cache.invalidateAll();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Assert.assertNotNull(thing);
        Assert.assertEquals(key, thing.getName());
        Assert.assertEquals(0, cache.size());
    }

    class Thing {
        public Thing(String key) {
            this.name = key;
            this.value = key.hashCode();
        }

        public String getName() {
            return name;
        }

        public Integer getValue() {
            return value;
        }

        private String name;
        private Integer value;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T20:54:55.207

它在`CacheBuilder`Javadoc 中有说明：

> 如果 expireAfterWrite 或 expireAfterAccess 被请求，条目可能会在每次缓存修改、偶尔缓存访问或调用 Cache.cleanUp() 时被驱逐。过期的条目可能会被计入 Cache.size()，但永远不会对读取或写入操作可见。

`CacheBuilder`缓存在被特别请求时进行维护，或者当它可以作为缓存突变的一部分进行维护时，或者偶尔在读取时进行维护。例如，它不会启动一个线程来进行缓存维护，因为 a) 线程相对重量级，并且 b) 某些环境限制了线程的创建。

# magento - Magento 致命错误：“Mage_Catalog_Model_Resource_Setup”类

> ID：15280975
> 
> 赞同：0
> 
> 时间：2013-03-07T20:21:48.647
> 
> 标签：magento, fatal-error

我有个问题。：

致命错误：在第 35 行的 /home/growth14/public_html/magento/app/code/core/Mage/XmlConnect/Model/Resource/Setup.php 中找不到类“Mage_Catalog_Model_Resource_Setup”

我检查了 SVN 并上传了两个版本的“Setup.php”：

[http://svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/XmlConnect/Model/Resource/Setup.php](http://svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/XmlConnect/Model/Resource/Setup.php)

[http://svn.magentocommerce.com/source/branches/1.7-trunk/app/code/core/Mage/XmlConnect/Model/Resource/Setup.php](http://svn.magentocommerce.com/source/branches/1.7-trunk/app/code/core/Mage/XmlConnect/Model/Resource/Setup.php)

但是，没有任何变化。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:59:35.407

它说您在 app/code/core/Mage/Catalog/Model/Resource/Setup.php 中的类丢失，或者其中的类名错误。

请检查以下文件是否可用，或者是否已进行任何覆盖： http: [//svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/Catalog/Model/Resource/Setup.php](http://svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/Catalog/Model/Resource/Setup.php)

您检查的文件是从中调用缺失类的文件。

# scala - 如何在播放框架2中将可选参数传递给scala模板

> ID：15280978
> 
> 赞同：4
> 
> 时间：2013-03-07T20:21:55.827
> 
> 标签：scala, playframework-2.0

playframework 2中的java控制器是否可以将可选参数传递给scala页面？

我有一个 scala 页面，我正在从不同的操作中呈现。仅在某些情况下，这些操作之一应该将参数传递给 scala，我是否必须更改每个渲染调用？基本上我想用两种方式调用 template.scala.html

```
template.render(msg) //java 
```

和

```
template.render()//java 
```

在我的模板中我有这个：@(msg:String = "xyz")

目前我收到一个调用错误，没有消息表明它不会在views.html.template中呈现（java.lang.String）不能应用于（）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-03T19:43:05.090

作为一种解决方法，您可以将参数存储在`Context.args`地图中。这样`Map<String,Object>`您就可以存储当前请求所需的任何内容。

这是使值在模板中可访问的简单方法，而无需将它们作为参数声明/传递。

**控制器**

```
public static Result someAction()
{
  ctx().args.put("msg", "Hello world!");

  return ok(myview.render());
} 
```

**模板**

```
@if(ctx.args.containsKey("msg")){
  <p>@ctx.args.get("msg")</p>
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-03T08:58:58.223

在 Play Framework 2 for Java 中，控制器必须传递默认值或 null。在其他模板中，您可以离开可选参数。

# c# - 为位图克隆绘制一个矩形

> ID：15280982
> 
> 赞同：0
> 
> 时间：2013-03-07T20:22:12.977
> 
> 标签：c#, system.drawing, bitmapimage

我有一个位图，我在其中克隆并指定了一个矩形 - 当前矩形具有某些宽度和高度值，我用它们来检查矩形是否有 QR 码。我注意到这检查了左上角。我可以更改它以检查相同大小（宽度和高度）的右上角、右下角和左下角吗？

```
 Bitmap result = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat); 
```

任何帮助是极大的赞赏。

```
for (int pg = 0; pg < inputDocument.PageCount; pg++)
            {

                string workGif = workingFilename.Replace(".pdf", string.Format(".{0}.gif", pg + 1));
                GhostscriptWrapper.GeneratePageThumb(workingFilename, workGif, pg + 1, 300, 300); // size (last two params) does not seem to have any effect
                using (var fullImg = new Bitmap(workGif))
                {  
                        Bitmap result = fullImg.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);
                        string QRinfo = Process(result);
                        MessageBox.Show(QRinfo);

                        string[] qcode = QRinfo.Split('/');
                        string gid = qcode[qcode.Count() - 1];
                        Guid pgGuid = new Guid(gid);
                }        
            } 
```

qr的处理方法

```
public string Process(Bitmap bitmap)
    {
        var reader = new com.google.zxing.qrcode.QRCodeReader();

        try
        {
            LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
            var binarizer = new HybridBinarizer(source);
            var binBitmap = new BinaryBitmap(binarizer);
            return reader.decode(binBitmap).Text;
        }
        catch (Exception e)
        {
            return e.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:07:59.563

如果 QRCodes 总是在角落，您可以为 Bitmap 使用图片框，然后使用 RotateFlip 方法旋转它：

```
Bitmap bp = new Bitmap("myImage.jpg");
pictureBox1.Image = bp;
bp.RotateFlip(RotateFlipType.Rotate90FlipNone);
pictureBox1.Invalidate(); 
```

# javascript - 仅在单击某些元素时显示上下文菜单

> ID：15280991
> 
> 赞同：0
> 
> 时间：2013-03-07T20:22:50.170
> 
> 标签：javascript, jquery, html, google-chrome, google-chrome-extension

我有点卡住了，我需要你的帮助。

我试图仅在用户右键单击页面中的某些元素时才显示上下文菜单。

我想我通过使用 getElementByClassName(...) 并为每个元素添加一个 onClick 侦听器来解决这个问题，当用户单击其中任何一个元素时，我将创建上下文菜单。然后在一切完成后删除内容菜单。

问题是我没有这些元素的完整类名，我只知道它们以“故事”开头。

我不知道该怎么做。有没有办法使用正则表达式并获取所有具有故事类名的元素？或者那是不可能的。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:08:35.137

您可以使用[以选择器开头的属性来执行此操作](http://www.w3schools.com/cssref/sel_attr_begin.asp)

`document.querySelectorAll("[class^=story]")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:25:22.123

这个[库](http://james.padolsey.com/javascript/regex-selector-for-jquery/)允许使用正则表达式选择器。

```
<div class="story-blabla"></div>

$("div:regex(class, story.*)") 
```

但是，您可能不想实现完整的库。还有另一种解决方案：

```
$('div').filter(function() {
    return this.class.match(/story.*/);
    }) 
```

这将返回您想要的对象。

# c# - 我想使用 There.is.already.a.file.with.the.same.name 对话框

> ID：15280992
> 
> 赞同：0
> 
> 时间：2013-03-07T20:22:51.590
> 
> 标签：c#, winforms, file

视觉工作室中是否有内置对话框？还是我必须自己自定义表格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:25:26.517

您可以使用`SaveFileDialog`内置此功能的 ，但是如果这不适合您的项目，您可以使用 a`MessageBox`向用户显示通知。

如果您希望对话框中的用户反馈并且您的要求不适合可用的 MessageBoxButtons 选项，您可以通过创建带有所需标签/按钮的表单来自己创建自定义对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:32:30.017

没有具体的对话。将`SaveFileDialog`已经处理这种情况。否则就做；

```
 MessageBox.ShowDialog("A file with that name already exists.");
 // showdialogue forces focus to the messagebox until it's dismissed 
```

# java - 用任意数量的逗号和空格分割字符串

> ID：15280994
> 
> 赞同：10
> 
> 时间：2013-03-07T20:23:03.890
> 
> 标签：java, regex

我有一个字符串，我试图将其变成一个列表，但我得到了空条目。

```
",A,B,C,D, ,,,"
returns
[, A, B, C, D,  , , ,] 
```

我想删除所有“空”逗号：

```
[A, B, C, D] 
```

我正在努力

```
current.split(",+\\s?") 
```

这不会产生我想要的结果。我应该改用什么正则表达式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T20:54:23.907

您需要两个步骤，但只有一行：

```
String[] values = input.replaceAll("^[,\\s]+", "").split("[,\\s]+"); 
```

`replaceAll()`删除前导分隔符的调用。
拆分是在任意数量的分隔符上完成的。

的行为`split()`意味着忽略尾随空白值，因此无需在拆分前修剪尾随分隔符。

这是一个测试：

```
public static void main(String[] args) throws Exception {
    String input = ",A,B,C,D, ,,,";
    String[] values = input.replaceAll("^[,\\s]+", "").split("[,\\s]+");
    System.out.println(Arrays.toString(values));
} 
```

输出：

```
[A, B, C, D] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:27:17.097

您不仅希望在匹配中包含接下来的几个空格，还希望将连续的逗号作为一个单元拆分：

```
(,\s*)+ 
```

```
current.split("(?:,\\s*)+") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T20:31:08.930

为此，我会[在 Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)中使用 Splitter：

```
Splitter.on(',').omitEmptyStrings().trimResults().split(",A,B,C,D, ,,,"); 
```

因为我发现这比正则表达式更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T15:44:57.010

匹配逗号和空格以外的任何字符**可能**是更清洁的解决方案：

`/[^, ]+/g`

```
",A,B,C,D, ,,,".match(/[^, ]+/g)
// → ["A", "B", "C", "D"] 
```

如果您使用 Javascript 工作，您还可以使用 Lodash`_.words`方法（对上述正则表达式表示敬意）：

[https://lodash.com/docs#words](https://lodash.com/docs#words)

```
_.words('fred, barney, & pebbles', /[^, ]+/g);
// → ['fred', 'barney', '&', 'pebbles'] 
```

# java - ITextRenderer：将页面高度调整为内容

> ID：15280995
> 
> 赞同：8
> 
> 时间：2013-03-07T20:23:07.580
> 
> 标签：java, css, pdf, flying-saucer, pdfrenderer

我正在使用 ITextRenderer 从 HTML 生成 PDF，我需要做的是收银机收据。此收据具有动态宽度，当然还有动态内容。这就是说，内容的高度总是不同的，现在我正在努力寻找一种方法来调整 PDF 页面的高度以适应内容。如果它太大，收据最后有一个长的白色部分，如果它是短的 PDF 得到分页，我只需要它在一页中。

我`@page {size: Wpx Hpx;}`用来设置页面大小，但是根据宽度和数据计算内容高度几乎是不可能的（会很痛苦）。

这是生成 PDF 的代码：

```
ITextRenderer renderer = new ITextRenderer();

byte[] bytes = htmlDocumentString.toString().getBytes("UTF-8");
ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
InputSource is = new InputSource(bais);
Document doc = builder.parse(is);

renderer.setDocument(doc, null);

renderer.layout();
renderer.createPDF(outputStream);
outputStream.flush();
outputStream.close(); 
```

我也试过`renderer.getSharedContext().setPrint(false);`，但这会引发 NPE。

也`@page {-fs-page-sequence: "none";}`没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-02T17:50:44.353

我发现的解决方案甚至不是完美的，但有效！

```
@page {
    size: Wpx 1px;
}
* { 
    page-break-inside: always; 
} 
```

这将为整个内容生成 1px 的页面。然后我只需要告诉打印机打印所有页面之间的页边距为 0px 的页面。

为什么这个解决方案不完美？通过 3G 流式传输时，文件大小从 1 或 2KB 变为 200KB。不是很好。

# javascript - 在输入时和为空时验证密码字段

> ID：15280996
> 
> 赞同：1
> 
> 时间：2013-03-07T20:23:08.853
> 
> 标签：javascript, html

如何在输入时和为空时验证密码字段（包括输入的*空格*）？

**JS**

```
$(document).ready(function() 

{
$("#login_btn").click(function(){
    if($("#pass").val() == "") {
        $("#error").show("slow");
    }
    else if($("#pass").val() != "") {
        $("#error").hide("slow");
    }
});

}); 
```

**HTML**

```
<div id="login">
    <div id="login_header"><h2>Sign in</h2></div>
    <div id="dept">Department
        <select>
            <option value="CO" selected>CO</option>
        </select>
    </div>
    <div id="pass">Password
        <input type="password">
    </div>
    <div id="error">
        Required field cannot be blank
    </div>
    <div id="btn">
        <input type="button" value="Sign in" id="login_btn">
    </div>
</div> 
```

[http://jsfiddle.net/sfTHc/1/](http://jsfiddle.net/sfTHc/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:29:08.077

`$("#pass").val()`没有意义，因为`#pass`它是一个`div`，而不是密码字段。固定版本：

```
$("#login_btn").click(function () {
    var pass = $.trim($("#pass input").val());
    if (!pass) {
        $("#error").show("slow");
    } else {
        $("#error").hide("slow");
    }
}); 
```

[http://jsfiddle.net/sfTHc/3/](http://jsfiddle.net/sfTHc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:27:00.073

使用 keypress 事件并在验证函数中修剪从小部件检索到的值，然后再对其进行验证。

```
$(document).ready(function() {
    $("#login_btn").keypress(function(){
        var pass = $("#pass input").val();
        if($.trim(pass) == "") {
            $("#error").show("slow");
        }
        else  {
            $("#error").hide("slow");
        }
    });

}); 
```

**编辑**：修改了 dfsq 的答案正确指出的选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:34:57.967

使用 $.trim 并执行以下操作：

```
$(document).ready(function() {
    $("#login_btn").click(function(){
        if($.trim($("#pass input").val()).length == 0) {
            $("#error").show("slow");
        } else {
            $("#error").hide("slow");
        }
    });

}); 
```

现场演示：http: [//jsfiddle.net/Soldier/C9es6/](http://jsfiddle.net/Soldier/C9es6/)

# cakephp - 为一项操作禁用 Session.checkAgent

> ID：15280998
> 
> 赞同：0
> 
> 时间：2013-03-07T20:23:11.267
> 
> 标签：cakephp, cakephp-1.3

我已经构建了一个控制器，它使用媒体视图将视频流式传输给用户。当有人从 iOS 设备访问控制器时，发送的用户代理不匹配并且会话注销。

我正在为 Flow Player 使用 iPad 插件，并且我看到了其他关于 flash 没有发送正确的用户代理字符串的帖子，所以我不想搞乱它，而是想为该特定操作禁用 Session.checkAgent。我已经尝试将它添加到 beforeFilter() 中，但检查显然是在那之前发生的。

我可以覆盖其他一些方法来实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:54:17.853

我还没有测试过，但是如果你知道（部分）URL，你可以检查`$_GET['url']`你的 app/Config/core.php 里面并根据它的值修改会话配置，例如，`$_GET['url']`以'/videos/开头看法'。

您需要在配置文件中执行此操作，否则会话已经启动，因为您已经发现。

请注意，`$_GET['url']`仅在旧版本的 CakePHP 中使用。对于更新版本的 CakePHP，您可能需要 user`$_SERVER['REQUEST_URI']`或其他`$_SERVER`环境变量。