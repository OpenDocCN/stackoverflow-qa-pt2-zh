# StackOverflow 问答 15597000-15597999

# html - css - 以直线对齐图像

> ID：15597008
> 
> 赞同：0
> 
> 时间：2013-03-24T09:45:09.287
> 
> 标签：html, css, position

我的网页上有 5 张图片和一个 div。当我加载我的页面时，图像在另一个下，但我想要做的是图像应该成一条直线，并且 div 应该一次只显示一个。

**HTML 代码：**

```
<html>

<head>
<title>My City Karachi</title>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<link rel="stylesheet" href="css/slider.css" type="text/css" />
</head>

<body style="margin: 0; padding: 0;">

<div class="slider">
    <img src="asd.jpg"/>
    <img src="baba dedo.jpg"/>
    <img src="picccccture 3.jpg"/>
    <img src="Page-3.jpg"/>
    <img src="Page 4 copy.jpg" />
</div>
</body>

</html> 
```

**代码：**

```
@charset "utf-8";

html, body {
    margin: 0;
    padding: 0;

}

.slider {
    margin: 0 auto;
    overflow: hidden;
}

.slider img {
    width: 900px;
    height: 650px;  
    float:left;
} 
```

我希望我足够清楚！

**任何帮助将不胜感激！:)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:11:19.600

如果你想在水平线上显示你的图像

确保这一点：

```
width(parent container of Imgs) >= Sum(Width(individual Imgs)) 
```

只有这样它们才会出现在水平线上，否则它们不会。

在你的情况下它不会。

现在，既然您无论如何都想一次只显示一张图像，那么制作所有图像，`display:none`然后只需选择其中一个（按给定顺序）并制作`display:block`.

现在，由于您不能这样做，因此仅使用 CSS，您将需要 javascript(jQuery)。

看看这个超级简单的[小提琴](http://jsfiddle.net/zBm57/)，展示你需要什么。

我正在做的就是：

*   `div.slider`隐藏里面的所有imgs

    ```
     $('.slider img').each(function(i,v){
        $(this).attr("data-image-index",i).hide();
     }); 
    ```

    我还在为您的 imgs 附加一个新属性以确定索引，即

    ```
    <img src="asd.jpg" alt="img1" data-image-index="0"  />
    <img src="baba dedo.jpg" alt="img2" data-image-index="1" />
     ..
     .. 
    ```

    *   之后我制作了一个函数，它只是将所有`div.slider`imgs隐藏起来，并使img`data-image-index`属性等于`index`可见。

        ```
         var index=0;
           function play(){
               $('.slider img').each(function(){
                      var s = $(this).data("image-index");
                      if(parseInt(s)===index)
                        $(this).show();
                      else
                        $(this).hide();
                });
                index++;
                if(index>5)
                   index=0;
           } 
        ```

    现在，由于我们需要在单击按钮时或在给定的时间间隔内调用此函数播放，所以我这样做是为了每 1 秒调用一次：

    ```
     setInterval("play()",1000); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:13:40.963

工作示例：http: **[//jsfiddle.net/tceb2/](http://jsfiddle.net/tceb2/)**

一个固定宽度的容器`overflow: auto`与一个宽度为 5 个图像的总宽度的孩子一起使用。这将创建一个水平滚动条。

然后使用脚本，您可以通过管理显示哪些图像以及隐藏哪些图像来创建幻灯片。虽然你会想要 350 像素的宽度，而不是 400 像素 - 单个图像的宽度。一定要包括像 Next 和 Pause/Play 之类的控件，也许是 Previous。如果它不自动启动就更好了。[不错的教程](http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:20:59.100

添加

```
.slider {
 display: block;
} 
```

然后添加 display:inline-block; 到 .slider img

删除浮动：左；

试试看。这个对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T09:54:34.167

尝试：

```
.slider img {
    width: 900px;
    height: 650px;
    display: inline-block:
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-12-18T04:28:11.480

制作一个 ul 或 ol 并将子项目（此处为图像）添加为同一列表的 li。在 css 中确保有 list-style:none 并添加边距或填充，甚至根据需要定位它们。

# android - 如何知道我的应用程序是否回到后台

> ID：15597014
> 
> 赞同：0
> 
> 时间：2013-03-24T09:45:42.610
> 
> 标签：android

我开始开发一个需要用户每次登录的应用程序。

主要是我想知道用户何时单击我的应用程序图标并启动它，这样我就可以启动登录活动，而不是他上次使用该应用程序时打开的活动。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:49:51.713

嗯，这个问题还有其他一些问题，比如你为什么要这样做？再次为用户和系统工作方式提供一致的交互。

消除所有这些，就我而言，唯一的方法是使用 startActity 在所有活动的所有 onResume 中将用户带到登录屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:56:54.190

According to android documentation, you can acheive that via manifest.xml file. by setting [android:clearTaskOnLaunch="true"](http://developer.android.com/guide/topics/manifest/activity-element.html#clear) for your activity node in your manifest.

say your activity name is MainActivity then your manifest.xml should look like this:

```
.....
<activity android:name=".MainActivity"
          android:clearTaskOnLaunch="true"
 ..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-26T10:40:16.917

您需要使用[LifecycleObserver](https://developer.android.com/reference/android/arch/lifecycle/LifecycleObserver)。从这里你可以知道你的应用程序什么时候进入后台，什么时候你的应用程序进入前台，无论你在哪个活动中。因为它正在观察应用程序的生命周期。因此，当应用程序进入前台时，您需要启动 LoginActivity，以便它将位于您的应用程序之上，并且用户必须像银行应用程序一样登录。

对于 LifecycleObserver，您需要使用以下代码行在应用程序类的 onCreate() 方法中注册。

```
ProcessLifecycleOwner.get().lifecycle.addObserver(appLifecycleObserver) 
```

为上述对象创建 AppLifecycleObserver 类 (appLifecycleObserver)

```
class AppLifecycleObserver(val context: Context) : LifecycleObserver {
  /**
   * Call when your app come to foreground
   */
  @OnLifecycleEvent(Lifecycle.Event.ON_START)
  internal fun onEnterForeground() {
    //goto login activity

  }
  /**
   * Call when your app go to background
   */
  @OnLifecycleEvent(Lifecycle.Event.ON_STOP)
  internal fun onEnterBackground() {
  }

} 
```

需要依赖等级：

```
implementation 'androidx.lifecycle:lifecycle-extensions:2.0.0-rc01' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-24T09:48:53.627

我认为您现在可以通过覆盖活动上的 onpause 方法并保存用户上次在共享首选项中留下的状态

您可以在此处查看有关活动生命周期的更多信息 -> [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

这是活动生命周期图

![在此处输入图像描述](../Images/7edbedc752c145ed238ba25901326cfd.png)

我希望我的回答对您有所帮助，但如果您对我的回答还有其他问题，请随时在评论中提问：)

# java - 为什么我的 jradiobutton 只使用一次？

> ID：15597020
> 
> 赞同：0
> 
> 时间：2013-03-24T09:46:33.550
> 
> 标签：java, swing, user-interface, jradiobutton, buttongroup

我没有对我的 jradiobuttons 进行分组，以便用户可以选择多个选项，并且我可以存储在节点数组中......但它只读取一次。代码有什么问题？请赐教

```
private String[] showGUIForNodeDeletion() {

        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(map.size(), 1));
        ButtonGroup btnGrp = new ButtonGroup();
        final String nodes[] = new String[10];
        Set<String> keySet = map.keySet();

        for (String name : keySet) {

            btnRadio = new JRadioButton(name);
            btnRadio.setActionCommand(map.get(name).x + "," + map.get(name).y + "," + name);
                        //btnGrp.add(btnRadio);
            panel.add(btnRadio);
        }

        btnRadio.addActionListener(new ActionListener() {
            int x = 0;

            public void actionPerformed(ActionEvent e) {

                nodes[x] = ((JRadioButton) e.getSource()).getActionCommand();
                System.out.println("Node counting " + x);
                x++;
            }
        });

        if (keySet.isEmpty()) {
            JOptionPane.showMessageDialog(AnotherGuiSample.this, "Work Space is empty", "Error", JOptionPane.ERROR_MESSAGE);
        } else {
            JOptionPane.showMessageDialog(AnotherGuiSample.this, panel, "Select node to remove", JOptionPane.INFORMATION_MESSAGE);
        }
        for(int x = 0; x < nodes.length; x++ )
        System.out.println("node is " + nodes[x]);

        return nodes;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:00:46.343

你的 for 循环代码应该是这样的：

**更新**

```
Set<String> rbSet = new TreeSet<String>();
for (String name : keySet) {

    btnRadio = new JRadioButton(name);
    btnRadio.setActionCommand(map.get(name).x + "," + map.get(name).y + "," + name);
    btnRadio.addActionListener( new ActionListener()
    {
        public void actionPerformed(ActionEvent evt)
        {
            JRadioButton obj = (JRadioButton)evt.getSource();
            if (obj.isSelected())
            {
                rbSet.add(obj.getActionCommand());
            }
            else 
            {
                rbSet.remove(obj.getActionCommand());
            }
        }
    });
    panel.add(btnRadio);
}
int counter = 0 ;
for (String action : rbSet )
{
    nodes[counter++] = action;
} 
```

发生了什么，您正在注册`ActionListener`for 循环中创建的最后一个对象，因为您在 for 循环之后执行了它。这就是为什么它只为`JRaioButton`创建并添加到`JPanel`. 您应该`ActionListener`在 for 循环中注册每个`JRadioButton`在循环中创建的。这使得`ActionEvent`每一个`JRadioButton`你添加到的`JPanel`.

# javascript - Facebook 聊天框不会在页面之间重新加载

> ID：15597021
> 
> 赞同：5
> 
> 时间：2013-03-24T09:46:34.280
> 
> 标签：javascript, ajax, facebook, html5-history

我在 Facebook 中观察到了这个功能，当你在右下角打开了一个聊天框，然后你转到另一个页面，比如你朋友的个人资料，或者 Facebook 中的某个照片集页面，聊天框不会重新加载，它保留在原处（就像在背景页面顶部的单独层中一样）。

所以很自然地，我认为 Facebook 本身并没有重新加载页面，它使用`history.pushstate`和相关的功能来异步加载内容，并动态更改 URL（Firebug 证实了这一点，如果你点击一个朋友的名字并被带走到您朋友的个人资料页面，它实际上是一个`GET`被触发的请求）。因此，由于没有任何页面加载，聊天框可以闲置，就这样。

但是，在版本 10 之前`pushstate`不支持`IE`。不过，它也可以正常工作`IE9`。那么谁能告诉我他们是怎么做到的？他们是在使用`history`API，还是使用不同的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T00:02:56.467

这是一个很好的问题，答案很简单。我不确定 Facebook，但这应该对您有所帮助 - [History.js](https://github.com/browserstate/history.js)

> History.js 在所有浏览器中优雅地支持 HTML5 History/State API（pushState、replaceState、onPopState）。包括对数据、标题、replaceState 的持续支持。支持 jQuery、MooTools 和原型。对于 HTML5 浏览器，这意味着您可以直接修改 URL，而无需再使用哈希。对于 HTML4 浏览器，它将恢复使用旧的 onhashchange 功能。

# android - 按下“查找”按钮后如何关闭/图标化 SearchView？

> ID：15597023
> 
> 赞同：0
> 
> 时间：2013-03-24T09:46:52.083
> 
> 标签：android, search, searchview

我正在使用教程[创建搜索界面](http://developer.android.com/guide/topics/search/search-dialog.html)中描述的 SearchView 。
我使用选项 android:launchMode="singleTop" 在当前活动中执行搜索。
按下“查找”按钮键盘关闭后，但 SearchView 保持打开状态。
执行搜索后是否可以图标化 SearchView？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:12:29.483

创建搜索菜单项时保存在实例变量中

```
public boolean onCreateOptionsMenu(Menu menu) {
    searchMenuItem=menu.add("Search")
        .setIcon(R.drawable.ab_search); 
```

然后`searchMenuItem.collapseActionView()`在要关闭时使用。

# ios - 按下背景时如何动画隐藏选择器视图

> ID：15597025
> 
> 赞同：2
> 
> 时间：2013-03-24T09:47:22.527
> 
> 标签：ios, objective-c, uipickerview

当点击背景时，如何动画隐藏选择器视图？试过这个：

```
[self.picker setHidden:YES]; 
```

但是选择器突然消失了。我希望它在屏幕外向下动画。注意：我知道如何实现点击背景以消失部分帖子，所以请忽略它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:54:01.057

```
[UIView animateWithDuration:0.3 animations:^{
    self.picker.center = CGPointMake(self.picker.center.x, self.picker.center.y + self.picker.frame.size.height);
} completion:^(BOOL finished){
    self.picker.hidden = YES;
}]; 
```

这会将选取器滑到底部，然后在动画结束时将其隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:51:26.327

```
[UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3f]; // you can set value as per you need.
    [self.picker setHidden:YES];
    [UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T09:53:14.087

```
[UIView animateWithDuration:0.3 animations:^{
     self.picker.frame = CGRectMake(self.picker.frame.origin.x,self.picker.frame.origin.y+self.picker.frame.size.height,self.picker.frame.size.width,self.picker.frame.size.height);
}completion:^(BOOL fin) {

}]; 
```

# windows - 使用适用于 Windows 的通用 USB 设备驱动程序

> ID：15597032
> 
> 赞同：1
> 
> 时间：2013-03-24T09:48:03.790
> 
> 标签：windows, usb, driver

哪些类型的 USB 设备驱动程序可以在不支付 Microsoft 认证的情况下使用？

我想制作通过 USB 连接的硬件和软件。[本文](http://www.waitingforfriday.com/index.php/Building_a_PIC18F_USB_device)介绍如何使用 HID 设备配置文件。

我的问题：**我可以使用哪些其他类型的配置文件？我的设备与驱动程序的用途有多接近？**

具体来说：我想获得尽可能高的带宽——我正在制作一个高速数据记录器。例如，我可以使用某种网络摄像头驱动程序来获取高带宽流数据吗？（或者数据是否必须采用某种图像格式？）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:55:35.517

> What types of USB device drivers can be used without paying for Microsoft certification?

To make it clear, you technically don't need to pay Microsoft anything to have USB device drivers working on a machine (they do need to be digitally signed, either through a CA or self-signed certificates).

> My question: What other types of profiles exist that I could use? And how closely does my device have to resemble what the driver is meant for?

[This MSDN page](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538820.aspx) lists the USB device classes that Windows comes with drivers for out of the box:

*   Audio Class
*   Bluetooth Class
*   Communications Device Class
*   Content Security Class
*   Imaging Class
*   Hub Device Class
*   Human Interface Device (HID) Class
*   Mass Storage Class
*   Media Transfer Protocol Devices
*   Printer Class
*   Smart Card Class
*   Video Class

You want to try to "match" your application to one of the above classes if you want to take advantage of the built-in drivers. However, both the Communications and HID device classes allow for full-duplex transfer of arbitrary data, so either one of those is suitable if you just want to send bytes back and forth.

> Specifically: I want to achieve the highest possible bandwidth - I'm making a high speed data logger. Could I for example use some sort of webcam driver to get the high bandwidth stream data? (Or would the data have to then be in some sort of image format

How high-speed do you need it? If it is less than 64,000 bytes/second (which is actually already pretty fast for a vast array of data logging applications), then the HID class through full-speed USB works just fine. Otherwise, you may try using the Communications device class. (I have direct experience only with the HID device class, though).

Note that the speed of data transfer is not the only consideration you need to take into account. USB is a bus, so the total bus bandwidth is shared amongst all the devices connected to it. To help manage this, USB defines different types of transfers: interrupts, isochronous, and bulk.

The HID class uses interrupt transfers, while the Communications class generally uses bulk transfers. Interrupt transfers tend have a much shorter latency than bulk transfers, so this may be an important consideration.

# asp.net - 将 Web 应用程序集成到 Microsoft Dynamics CRM 中

> ID：15597034
> 
> 赞同：-1
> 
> 时间：2013-03-24T09:48:17.830
> 
> 标签：asp.net, dynamics-crm

我有一个 Web 应用程序，我想将其集成到 Microsoft Dynamics CRM 中。那么，如何在 CRM 中测试该应用程序？我需要安装 CRM 2011 吗？但我发现它支持 Windows Server 2008，而不是 Windows 7。

那么，由于我不知道 MS CRM 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:57:15.300

如果您没有安装，您打算如何将某些东西集成到 CRM 中？周围没有 CRM 模拟器：) 如果您的解决方案仅使用 CRM SDK，您可以轻松下载并对其进行编译/测试。但如果您需要更深入的集成，您将需要拥有 CRM 本身。CRM SDK 在 Windows 7 上完美运行。

但是我怀疑您需要安装 CRM 才能正确测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:51:50.080

您可以在以下地址注册 30 天试用：

[http://www.microsoft.com/en-us/dynamics/crm-free-trial-overview.aspx](http://www.microsoft.com/en-us/dynamics/crm-free-trial-overview.aspx)

查看 CRM 环境并测试您的集成

# asp.net-mvc - 无法将“System.Data.Metadata.Edm.AssociationType”类型的对象转换为“System.Data.Metadata.Edm.EntityType”类型

> ID：15597040
> 
> 赞同：0
> 
> 时间：2013-03-24T09:48:59.470
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5, ado.net-entity-data-model

我在我的 ASP.NET MVC 应用程序中有时会出现以下异常，我不知道为什么：

我正在使用 ASP.NET MVC 4 和实体框架 5，这是例外：

![在此处输入图像描述](../Images/bd6e720dd5b1bbe5be4b0c6da2d11703.png)

请指教，

# android - 永远不会调用 Android 搜索

> ID：15597043
> 
> 赞同：3
> 
> 时间：2013-03-24T09:49:42.777
> 
> 标签：android

我完全被困住了，花了几个小时阅读可能的解决方案。根本无法启动我的搜索活动。

我有一个主要活动，我希望搜索按钮从中开始搜索活动：

文件`MainApp.java`

```
public class MainApp extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.mainapplayout);
    }
    public boolean onCreateOptionsMenu(Menu m){
      getMenuInflater().inflate(R.menu.mainappmenu,m);
      return true;
    }
    public boolean onOptionsItemSelected(MenuItem m) {
      if(m.getItemId()==R.id.menu_search){
        return onSearchRequested(); // THIS IS CALLED, AND RETURNS TRUE
      }else return false;
    }
} 
```

按下 UI 按钮和硬件搜索键都不会调用搜索。 `onSearchRequested()`肯定被调用，并返回`true`.

文件`AndroidManifest.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest package="org.homphysiology.lists"
 android:versionCode="1" android:versionName="1.0"  
 xmlns:android="http://schemas.android.com/apk/res/android">
<uses-sdk android:minSdkVersion="8" />
<application 
             android:name="org.homphysiology.lists.MainApp"
                  ****REMOVED THIS LINE NOW, thanks arju, still not working tho
             android:icon="@drawable/ic_launcher">
    <activity android:name="org.homphysiology.lists.MainApp">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <meta-data
            android:name="android.app.default_searchable"
            android:value="org.homphysiology.lists.SearchActivity"
        />
    </activity>
    <activity android:name="org.homphysiology.lists.SearchActivity">
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <category android:name="android.intent.category.DEFAULT" />
                 ****REMOVED THIS LINE NOW, thanks tushar, still not working tho
        </intent-filter>
        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable"
        />
    </activity>
</application>
</manifest> 
```

我有以下内容：

文件`res/xml/searchable.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schamas.android.com/apk/res/android"
  android:label="@string/search_label"
  android:hint="@string/search_hint"
/> 
```

这些字符串在`/res/values/strings.xml`.

搜索活动本身很简单，但**从未创建**- 我在构造函数中有一个断点：

文件`SearchActivity.java`：

```
public class SearchActivity extends ListActivity {
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setListAdapter(...)
  }
} 
```

任何人都可以在这里发现任何问题吗？[在 eclipse Juno 4.2.1 中编译，SDK 21.0.1，在 HTC 渴望 Z 上测试] 谢谢...

* * *

## 附录

```
((SearchManager)getSystemService(Context.SEARCH_SERVICE))
  .getSearchableInfo(getComponentName()) 
```

返回`null`。也许这只是在强调我`SearchActivity`没有正确注册的事实......

* * *

修改@arju 的建议：我可以使用“手动”启动搜索活动

```
boolean onOptionsItemSelected(MenuItem m){
   startActivity(new Intent(this,SearchActivity.class));  
   return true;
} 
```

但当然，这不适用于硬件按钮，而且它不会显示系统搜索对话框。

* * *

我还尝试为整个应用程序设置搜索元数据，而不是主要活动：

```
<manifest>
  <application>
     <activity ...MainApp...        >  ...  </activity>
     <activity ...SearchActivity... >  ...  </activity>
     <meta-data
         android:name="android.app.default_searchable"
         android:value="org.homphysiology.lists.SearchActivity"
     />
  </application>
</manifest> 
```

同样的问题！搜索活动永远不会被实例化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:24:29.393

[Android 文档](http://developer.android.com/guide/topics/search/search-dialog.html#DeclaringSearchableActivity)说：

> 注意：<intent-filter> 不需要带有 DEFAULT 值的 <category>（您通常在 <activity> 元素中看到），因为系统使用其组件名称将 ACTION_SEARCH 意图显式传递给您的可搜索活动。

编辑：

是这样的：

```
<searchable xmlns:android="http://schamas.android.com/apk/res/android" 
```

应该：

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android" 
```

注意`schamas`与`schemas`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:54:49.200

Try this

Intent i=new Intent("android.intent.action.SEARCH");

startActivity(i);

# c# - 如何在 ember.js 应用程序中处理身份验证

> ID：15597049
> 
> 赞同：7
> 
> 时间：2013-03-24T09:50:45.120
> 
> 标签：c#, asp.net-mvc, authentication, oauth, ember.js

我刚刚开始学习 Ember.js 和 SPA。我有 ASP.Net MVC/C#/Razor 的背景。

身份验证如何工作？在常规网站中，我只使用 Oauth 提供程序，当它返回经过身份验证的信息时，创建一个表单身份验证票。

我还没有找到任何关于 auth 的好的 tuts/文章...尤其是在 ASP.Net 上。

我迫不及待地想真正开始深入研究 ember.js，但我知道这对我来说从一开始就很重要。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T15:17:25.290

一般来说，Ember 应用程序中的身份验证与大多数 Web 应用程序中的身份验证没有太大区别。您使用会话 cookie 将用户标识为已在服务器上登录，并在会话尚未经过身份验证时显示登录 UI。

在传统的网络应用程序中，检查和潜在的重定向会发生在页面请求上。在 Ember 应用程序中，您将在 API 请求上执行此操作，通常从路由器内部发送，如果 API 响应指示用户未登录，则 transitionTo 向用户显示用户名/密码表单的 logIn 路由。如果您使用的是 OAuth，这将是一个类似的模式，但允许用户在该点启动 OAuth 流程。

**替代方法**

其他模式包括在首次加载 Ember 应用程序的 index.html 页面时验证身份验证，或者在 API 报告会话未登录时将 Ember 应用程序重定向到传统登录页面。

**笔记**

无论您采用何种方法，您的每个服务器 API 都必须验证您的用户是否经过身份验证和授权。此外，请意识到您通常会将所有 JS 代码和 Handlebars 模板发送给所有用户，而不管权限如何。这通常不是问题，因为 JS 或模板中不存在敏感信息，但需要牢记。

**更新：**

我已经成为新`[torii][1]`库的粉丝，它提供了一些简单的原语来处理身份验证，包括第三方服务。

# java - 使用 JOptionPane 更新 mysql

> ID：15597053
> 
> 赞同：0
> 
> 时间：2013-03-24T09:51:38.403
> 
> 标签：java, mysql, swing, jdbc, joptionpane

我正在尝试使用 JoptionPane 更新我的 mysql 表。所以这个想法是先更新 id 然后检查它是否退出，然后请求新值来替换它。

这是该行的来源

```
else if(ae.getSource()==updateVid){
        String id =JOptionPane.showInputDialog("Enter ID you want to update:");

        try {
            con=DriverManager.getConnection(url,"root","success123");
            stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
            int numRows = stmt.executeUpdate("UPDATE FROM films WHERE id='"+id+"'");

            String ids =JOptionPane.showInputDialog("ID:");
            String fn=JOptionPane.showInputDialog("Title:");
            String sn =JOptionPane.showInputDialog("Description:");
            String tn =JOptionPane.showInputDialog("Year:");
            String frn =JOptionPane.showInputDialog("Art:");
            String fifn =JOptionPane.showInputDialog("Duration:");

            rs = stmt.executeQuery("SELECT * FROM films");
            JOptionPane.showMessageDialog(null,"Video has been Rented to the Out","New Rent" ,JOptionPane.OK_OPTION);
            while (rs.next()) {

            }
            rs.close();
            stmt.close();
            con.close();
        }
        catch (SQLException sqle) {
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:00:21.503

使用`PreparedStatement`而不是`Statement`因为您的代码容易受到 SQL 注入的影响

我认为这是你需要的：

```
String updateQuery = "UPDATE films set title = ?,description=?,year=?,art=?,duration=? where id=?";
PreparedStatement ps = con.prepareStatement(updateQuery);

String fn=JOptionPane.showInputDialog("Title:");
String sn =JOptionPane.showInputDialog("Description:");
String tn =JOptionPane.showInputDialog("Year:");
String frn =JOptionPane.showInputDialog("Art:");
String fifn =JOptionPane.showInputDialog("Duration:");

ps.setString(1,fn);
ps.setString(2,sn);
ps.setString(3,tn);
ps.setString(4,frn);
ps.setString(5,fifn);
ps.setString(6,id);
int numRows = ps.executeUpdate(); 
```

# jsf-2 - ManagedBean 和 PropertyChangeListener

> ID：15597059
> 
> 赞同：1
> 
> 时间：2013-03-24T09:52:33.240
> 
> 标签：jsf-2, managed-bean, propertychangelistener

我有两个`ManagedBeans`（`@SessionScoped`和`@ViewScoped`）：

```
@ManagedBean(name="sessionController")
@SessionScoped
public class SessionController implements Serializable{    
    private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this);

    public void addPropertyChangeListener(PropertyChangeListener listener) {
        propertyChangeSupport.addPropertyChangeListener(listener);
    }

    ...
}

@ManagedBean(name="viewController")
@ViewScoped
public class ViewController implements Serializable, PropertyChangeListener{  
    @ManagedProperty(value="#{sessionController}")
    private SessionController sessionController ;  
    ...

    @PostConstruct
    public void init() {
        sessionController.addPropertyChangeListener(this);
    }

    @Override
        public void propertyChange(PropertyChangeEvent evt) {
            ...
        }

    } 
```

我可以用`PropertyChangeListener`in`ViewController`来了解 的变化`SessionController`吗？会不会有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:01:55.047

不，你不能。要添加`PropertyChangeSupport`到`@SessionScoped`bean，您需要调用

```
 propertyChangeSupport.addPropertyChangeListener("instanceofViewScopedBean") 
```

在一个方便的地方（最好是`@PostConstructor`）。请注意，您需要目标 bean 的实际实例（实现`PropertyChangeListener`）传递给`addPropertyChangeListener`. 据我所知，您无法从会话 bean 中获取此信息，尤其是在 bean 初始化时。为什么？好吧，它是视图范围的，它只在查看页面时才存在。

与此限制相关的是 JSF 策略，即 Managed Beans 只能注入到更窄范围的其他 bean 中（使用您的情况，只有会话 bean 可以注入到 viewscoped bean 中）。您要做的几乎相反，将视图范围的 bean 绑定到会话范围的变量。

我想您正在尝试实现低成本的服务器端推送机制。好吧，除了好的轮询或彗星推动之外，我不知道还有其他方法可以完成这项工作。

# php - 通过 JQuery 发送上传的文件并在 PHP 中处理

> ID：15597061
> 
> 赞同：0
> 
> 时间：2013-03-24T09:52:44.003
> 
> 标签：php, jquery, upload, resize

我正在创建头像上传，并通过 JQuery 传递文件名，然后我想在外部 php 文件中处理和调整它的大小并将路径发送到数据库。我已经创建了表单，当我发送它时，它添加了数据库的路径，但不会识别出文件已在初始 php.ini 中上传。这是我获取文件名并通过 php 运行它的代码：

个人资料页面上的代码：

```
var avatar=$("#avatar").val();
                        var name=$("#name").val();
                        var location=$("#location").val();
                        var about=$("#about").val();
                        var visible = ( $("#visible").is(":checked") ) ? "checked" : "not checked";

                        if(nameok == true || name.value > 2)
                        {           
                            $('.userValidation').html("Processing").removeClass("error").addClass("success");
                            jQuery.post("php/update-user-profile.php", {
                            avatar:avatar,
                            name:name,
                            location:location,
                            about:about,
                            checked:visible
                            },  function(data, textStatus){
                            if(data == 1){
                                $('.userValidation').html("Updated Successfully").removeClass("error").addClass("success");
                                window.location = 'home.php';
                            }
                            else{
                                $('.userValidation').html("Something's Wrong, Please Try Again").removeClass("success").addClass("error");
                            }
                            });
                        } 
```

“php/update-user-profile.php”上的代码：

```
//Avatar Preferences
$avatar = mysqli_real_escape_string($con, $_REQUEST["avatar"]);

$fileName = $_FILES["$avatar"]["name"]; // The file name 
```

如何让它将 $avatar 识别为合法文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:03:09.790

Foe example: structure of `$_FILES` array:

```
Array
(
    [file] => Array
        (
            [name] => file.ext
            [type] => text/html
            [tmp_name] => /temp/ng736x.tmp
            [error] => 0
            [size] => 644563
        )
) 
```

if `$avatar` variable is name of your field on form, that the name of file in `$_FILES` is `$fileName = $_FILES[$avatar]["name"]`, but name of your `file` input on form is `avatar` that name of file is `$fileName = $_FILES['avatar']["name"]`.

# ruby-on-rails - rails DateTime.parse 用于从 jquery 时间选择器中从客户端发布的 DateTime

> ID：15597062
> 
> 赞同：3
> 
> 时间：2013-03-24T09:52:47.003
> 
> 标签：ruby-on-rails, ruby, datetimepicker

升级到 Rails 3.2 和 Ruby 1.9.3 后，我的表单包含 jquery 日期选择器，停止工作..

在我的参数中是看到日期：

```
"created_at"=>"03/22/2013 05:28 am" 
```

但如果我尝试像这样解析它：

```
DateTime.parse(params[:entry]["created_at"]) 
```

然后它返回此错误：

> *** ArgumentError 异常：无效日期

我如何解析这种日期时间，然后将其转换为 UTC？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:03:12.620

Hope you are looking for the following.

```
 DateTime.strptime(params[:entry]["created_at"], '%m/%d/%Y %H:%M %P') 
```

This will output the following result

```
Fri, 22 Mar 2013 05:28:00 +0000 
```

# c++ - 如何获取进程的主线程 ID（通过其 ID 知道）？

> ID：15597066
> 
> 赞同：8
> 
> 时间：2013-03-24T09:53:30.103
> 
> 标签：c++, c, windows, multithreading

你能帮我找到ID进程给定的主（唯一）线程ID吗？

任务上下文：正在运行的进程（目前）没有窗口，但有一个（一些）线程。

通缉：`WM_QUIT`仅在主线程发布。

不想要的：使用`TerminateProcess`或`WM_QUIT`在非主要线程上发布。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-22T02:40:47.387

获取主线程的线程 id 的一种更简单、更可靠的方法是让主线程使用[`::GetCurrentThreadId()`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683183(v=vs.85).aspx)共享全局变量记录自己的线程 id，可能在您的 WinMain 或“主线程”开头的某个地方：

```
MainThreadId_G = ::GetCurrentThreadId(); 
```

然后在您的其他线程中，您可以调用：`::PostThreadMessage(MainThreadId_G, WM_QUIT, returncode, 0);`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T10:07:02.190

```
#ifndef MAKEULONGLONG
#define MAKEULONGLONG(ldw, hdw) ((ULONGLONG(hdw) << 32) | ((ldw) & 0xFFFFFFFF))
#endif

#ifndef MAXULONGLONG
#define MAXULONGLONG ((ULONGLONG)~((ULONGLONG)0))
#endif

bool CloseProcessMainThread(DWORD dwProcID)
{
  DWORD dwMainThreadID = 0;
  ULONGLONG ullMinCreateTime = MAXULONGLONG;

  HANDLE hThreadSnap = CreateToolhelp32Snapshot(TH32CS_SNAPTHREAD, 0);
  if (hThreadSnap != INVALID_HANDLE_VALUE) {
    THREADENTRY32 th32;
    th32.dwSize = sizeof(THREADENTRY32);
    BOOL bOK = TRUE;
    for (bOK = Thread32First(hThreadSnap, &th32); bOK;
         bOK = Thread32Next(hThreadSnap, &th32)) {
      if (th32.th32OwnerProcessID == dwProcID) {
        HANDLE hThread = OpenThread(THREAD_QUERY_INFORMATION,
                                    TRUE, th32.th32ThreadID);
        if (hThread) {
          FILETIME afTimes[4] = {0};
          if (GetThreadTimes(hThread,
                             &afTimes[0], &afTimes[1], &afTimes[2], &afTimes[3])) {
            ULONGLONG ullTest = MAKEULONGLONG(afTimes[0].dwLowDateTime,
                                              afTimes[0].dwHighDateTime);
            if (ullTest && ullTest < ullMinCreateTime) {
              ullMinCreateTime = ullTest;
              dwMainThreadID = th32.th32ThreadID; // let it be main... :)
            }
          }
          CloseHandle(hThread);
        }
      }
    }
#ifndef UNDER_CE
    CloseHandle(hThreadSnap);
#else
    CloseToolhelp32Snapshot(hThreadSnap);
#endif
  }

  if (dwMainThreadID) {
    PostThreadMessage(dwMainThreadID, WM_QUIT, 0, 0); // close your eyes...
  }

  return (0 != dwMainThreadID);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-25T09:49:14.853

我已经检查了在 MFC 中是如何处理的，看起来 UI 线程是由构造函数确定的：

```
C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\atlmfc\src\mfc\appcore.cpp:

CWinApp::CWinApp(LPCTSTR lpszAppName)
{
...

    m_nThreadID = ::GetCurrentThreadId(); 
```

并且使用 MFC 调用`AfxGetApp()->m_nThreadID`您可以找出 UI 线程 ID。

但是 - 如果 .dll 不是从主线程加载的，则此方法不起作用 - 然后即使 MFC 的方法也不起作用 -`AfxGetApp()->m_nThreadID`将返回主线程以外的其他内容。

但通常您的 .dll 是从主线程加载的，但您的 .dll 不需要启用 mfc。我可以推荐这样的方法：

```
class GetMainThread
{
public:
    GetMainThread()
    {
        m_nThreadID = ::GetCurrentThreadId();
    }

    DWORD m_nThreadID;
}getMainThread;

DWORD getUIThread()
{
    DWORD id = 0;

    if( AfxGetApp() != NULL )
        id = AfxGetApp()->m_nThreadID;
    else 
        id = getMainThread.m_nThreadID;

    return id;
} //getUIThread 
```

如果 .dll 由主 UI 线程加载，您将从构造函数调用（GetMainThread 类）中获得正确的线程 ID。

`AfxGetApp()`如果您不需要它们，请删除它们（在我的应用程序中，我需要那些）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-24T20:32:14.670

在 cpp 文件的开头使用它，而不是在函数中：

```
DWORD mainThreadID = ::GetCurrentThreadId(); 
```

这将在您的 main 函数被执行之前初始化 mainThreadID，这保证是主线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T10:05:26.400

You can't post a message to a specific thread. Messages are put in a queue, and are processed from main thread only.

If you want to close windows process that has UI, take a look at [using sendmessage to send wm_close to another process](https://stackoverflow.com/questions/5402158/using-sendmessage-to-send-wm-close-to-another-process)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-25T16:31:15.397

您是否正在寻找此功能：

```
DWORD WINAPI GetProcessIdOfThreadId(_In_ DWORD ThreadId)
{
    HANDLE Thread = OpenThread(THREAD_QUERY_LIMITED_INFORMATION, FALSE, ThreadId);
    DWORD process_id = GetProcessIdOfThread(Thread);
    CloseHandle(Thread);
    return process_id;
} 
```

# php - 如何在 WAMPServer 中从 Windows 命令行运行 PHP

> ID：15597067
> 
> 赞同：81
> 
> 时间：2013-03-24T09:53:46.193
> 
> 标签：php, windows, shell, command-line, wamp

我是 php 新手，想从命令行运行 php。我已经安装了 WAMP 并将“系统变量”设置为我的 php 文件夹（即`C:\wamp\bin\php\php5.4.3`）。

当我转到`Run`-> `CMD`-> 键入`php -a`并按 Enter 键时，它会显示`interactive mode enabled`. 但是当我写`echo 'Hi';`它时，它什么也没显示。

`php -a`当我输入并按回车键时，我什至看不到“php >”之类的东西。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-29T22:25:32.920

PHP CLI 被称为（命令行界面的 php）被称为 php.exe 它存在于`c:\wamp\bin\php\php5.x.y\php.exe` 其中（其中 x 和 y 是您安装的 php 的版本号）

如果您想创建 php 脚本以从命令行运行，那么它非常简单且非常有用。

为自己创建一个这样的批处理文件，让我们称之为`phppath.cmd`：

```
PATH=%PATH%;c:\wamp\bin\php\phpx.y.z
php -v 
```

*更改`x.y.z`为您在 WAMPServer 中安装的 PHP 版本的有效文件夹名称*

将其保存到已在 PATH 上的文件夹之一中，以便您可以从任何地方运行它。

现在从命令窗口，cd 进入你的源文件夹并运行 >phppath。

然后运行

> php your_script.php

它应该像梦一样工作。

这是一个配置 PHP Composer 和 PEAR（如果需要并且它们存在）的示例

```
@echo off

REM **************************************************************
REM * PLACE This file in a folder that is already on your PATH
REM * Or just put it in your C:\Windows folder as that is on the
REM * Search path by default
REM * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
REM * EDIT THE NEXT 3 Parameters to fit your installed WAMPServer
REM **************************************************************

set baseWamp=D:\wamp
set defaultPHPver=7.4.3
set composerInstalled=%baseWamp%\composer
set phpFolder=\bin\php\php

if %1.==. (
    set phpver=%baseWamp%%phpFolder%%defaultPHPver%
) else (
    set phpver=%baseWamp%%phpFolder%%1
)

PATH=%PATH%;%phpver%
php -v
echo ---------------------------------------------------------------

REM IF PEAR IS INSTALLED IN THIS VERSION OF PHP

IF exist %phpver%\pear (
    set PHP_PEAR_SYSCONF_DIR=%baseWamp%%phpFolder%%phpver%
    set PHP_PEAR_INSTALL_DIR=%baseWamp%%phpFolder%%phpver%\pear
    set PHP_PEAR_DOC_DIR=%baseWamp%%phpFolder%%phpver%\docs
    set PHP_PEAR_BIN_DIR=%baseWamp%%phpFolder%%phpver%
    set PHP_PEAR_DATA_DIR=%baseWamp%%phpFolder%%phpver%\data
    set PHP_PEAR_PHP_BIN=%baseWamp%%phpFolder%%phpver%\php.exe
    set PHP_PEAR_TEST_DIR=%baseWamp%%phpFolder%%phpver%\tests

    echo PEAR INCLUDED IN THIS CONFIG
    echo ---------------------------------------------------------------
) else (
    echo PEAR DOES NOT EXIST IN THIS VERSION OF php
    echo ---------------------------------------------------------------
)

REM IF A GLOBAL COMPOSER EXISTS ADD THAT TOO
REM **************************************************************
REM * IF A GLOBAL COMPOSER EXISTS ADD THAT TOO
REM *
REM * This assumes that composer is installed in /wamp/composer
REM *
REM **************************************************************
IF EXIST %composerInstalled% (
    ECHO COMPOSER INCLUDED IN THIS CONFIG
    echo ---------------------------------------------------------------
    set COMPOSER_HOME=%baseWamp%\composer
    set COMPOSER_CACHE_DIR=%baseWamp%\composer

    PATH=%PATH%;%baseWamp%\composer

    rem echo TO UPDATE COMPOSER do > composer self-update
    echo ---------------------------------------------------------------
) else (
    echo ---------------------------------------------------------------
    echo COMPOSER IS NOT INSTALLED
    echo ---------------------------------------------------------------
)

set baseWamp=
set defaultPHPver=
set composerInstalled=
set phpFolder=
set phpver=
set phpFolder= 
```

像这样调用这个命令文件以使用 PHP 的默认版本

```
> phppath 
```

或者像这样获取特定版本的 PHP

```
> phppath 5.6.30 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-12-13T01:18:11.153

我记得几年前我偶然发现了这个问题，因为windows没有readline，所以没有交互式shell，要使用没有readline支持的php交互模式，你可以这样做：

```
C:\>php -a 
Interactive mode enabled 

<?php 
echo "Hello, world!"; 
?> 
^Z 
Hello, world! 
```

进入交互模式后，使用php 标签的开头 ( `<?php`) 和关闭 ( ) 键入，并以控制 Z ( ) 结束，表示文件结束。`?>``^Z`

我还记得我从 php 的站点用户评论中找到了解决方案：[http ://www.php.net/manual/en/features.commandline.interactive.php#105729](http://www.php.net/manual/en/features.commandline.interactive.php#105729)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-04T04:31:04.617

尝试使用批处理文件

1.  打开记事本
2.  类型`php -S localhost:8000`
3.  将文件另存为`.bat`扩展名，`server.bat`
4.  现在单击`server.bat`文件，您的服务器已准备就绪`http://localhost:8000`

### 依赖

如果您收到错误 php 无法识别任何内部或外部命令，则转到环境变量并编辑 php.exe 的路径 `"C:\wamp\bin\php\php5.4.3"`

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-24T10:00:47.753

您描述的问题听起来像您的 PHP 版本可能缺少 readline PHP 模块，导致交互式 shell 无法工作。我基于[此 PHP 错误](https://bugs.php.net/bug.php?id=48759)提交。

尝试运行

```
php -m 
```

并查看“readline”是否出现在输出中。

从发行版中省略 readline 可能有充分的理由。PHP 通常由 Web 服务器执行；因此，对于大多数用例来说，它并不是真正需要的。我相信您可以使用以下命令从命令提示符处执行文件中的 PHP 代码：

```
php file.php 
```

还有一个[phpsh](https://github.com/facebook/phpsh)项目，它为 PHP 提供了一个（更好的）交互式 shell。但是，有些人在 Windows 下运行它时遇到了问题（我自己没有尝试过）。

**编辑**：根据[此处的文档](http://www.php.net/manual/en/intro.readline.php)，`readline`Windows 下不支持：

> 注意：此扩展在 Windows 平台上不可用。

因此，如果这是正确的，您的选择是：

*   避免使用交互式 shell，只需从命令行执行文件中的 PHP 代码 - 这应该很好用
*   尝试让 phpsh 在 Windows 下工作

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-08-06T10:04:38.047

如果你只想运行一个快速的代码片段，你可以使用 -r 选项：

```
php -r "echo 'hi';" 
```

-r 允许在不使用脚本标签的情况下运行代码`<?..?>`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-24T10:00:37.157

您可以使用 php.exe 运行 php 页面，使用 php 代码创建一些 php 文件并在 cmd 中写入`"[PATH to php.ext]\php.exe [path_to_file]\file.php"`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-30T02:30:25.560

**已更新** 经过少量研究，最好的解决方案是使用该信息[另一个 stackoverflow 线程](https://stackoverflow.com/a/5794578/2480481)来避免 ctrl+z 输入以及 scree 输出。所以，而不是`php -a`你应该使用`call "php.exe" -f NAMED_SCRIPT.php`

**OLD** Readline 在 Windows 下是不可能的，所以现有的用 php 编写的 php shell 都不能工作。但是有一种使用 -a 交互模式的解决方法。

这里有2个常见问题。在执行 CTRL Z 命令以指示代码/文件的结尾（如 EOF）之前，您无法看到结果。当您这样做时，大多数情况下的结果是打印结果和快速关闭窗口。无论如何，您将返回到 cmd 而不是 -a 交互模式。

将此内容保存到 .bat 文件中，并将您的 PHP PATH 定义为 Windows 变量，或者将 php.exe 修改为“exe 的完整路径”：

```
::
:: PHP Shell launch wrapper
::
@ECHO off
call "php.exe" -a

echo.
echo.

call "PHP Shell.bat" 
```

这是一个简单的批处理启动-a 模式的php.exe。当它启动 php 时，停止脚本甚至没有写入暂停，因为它“进入”交互等待输入。当您按 CTRL Z 时，获取 SIGSTEP（下一步）而不是 SIGSTOP（关闭，通常是 CTRL+C），然后阅读下一个指令，这是对 .bat 本身的递归调用。因为你总是进入 PHP -a 模式，没有退出命令。您必须使用 CTRL+C 或用鼠标点击退出十字。（无 alt+f4）

您还可以使用“Bat to Exe”转换器来轻松使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-16T16:07:05.747

那是因为您处于“交互模式”，php 会评估您键入的所有内容。要查看最终结果，请执行“ctrl+z”并回车。您现在应该看到评估结果 :)

ps 以管理员身份运行cmd！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-18T21:05:27.233

如果您不需要旧的 php 版本，只需执行以下步骤：

*   打开 wamp 并右键单击 wamp 管理器而不是 go：工具/更改 PHP CLI 版本而不是将 php 版本更改为最新
*   另一次右键单击 wamp 管理器而不是 go：工具/删除 unuserd 版本并删除您的系统坚持将其作为您的 pc php 版本的最旧版本：D
*   转到控制面板/用户帐户/更改我的环境变量并在 PATH 变量中单击编辑并添加您的最新 php 版本路径，该路径位于您的 wamp 服务器 bin 文件夹中
*   关闭所有命令行或 IDE 并重新启动它们并检查 php -v

这很好用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-07T18:13:30.077

以下解决方案**专门针对 wamp 环境：**

这让我困惑了一会儿，尝试了所有其他建议，$PATH 等甚至搜索了 Windows 注册表寻找线索：

GUI（wampmanager）表示我选择了版本 7，是的，如果我在浏览器的页面中使用 phpinfo()，它会告诉我它的版本 7.xx 但命令提示符中的 php -v 报告一个 5.xx

如果您右键单击 wampmanager 头图标->工具->删除未使用的版本并删除旧版本，让它重新启动服务，然后命令提示符将返回 7.xx

此解决方案意味着如果您想在 php 版本之间切换，则不再拥有旧版本，但是 C:\wamp64\wampmanager.conf 中有一个配置文件，它似乎指定了与 CLI 一起使用的版本（参数称为 phpCliVersion） . 我更改了它，重新启动了服务器......以为我已经解决了它但没有效果也许我有点不耐烦所以我觉得可能会有一些里程。

希望对某人有所帮助

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-05-30T07:18:53.277

在 Windows 中，将 php.exe 文件放在 windows/system32 或任何其他系统可执行文件夹中，然后转到命令行并键入 php 并按回车键，如果它没有产生任何错误，那么您就可以在命令行上使用 PHP . 如果您将 php.exe 设置在默认系统文件夹以外的其他位置，那么您需要在环境变量中设置它的路径！您可以通过以下路径到达那里....

控制面板 -> 系统 -> 编辑您帐户的环境变量 -> 环境变量 -> 路径 -> 编辑然后在那里设置您的 php.exe 的绝对路径，并按照与第一段中相同的步骤，如果没有错误部门，那么您就可以从命令行使用 php 了！

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-11-25T22:36:57.273

如果您设置，则对上面 RiggsFolly 的脚本略有改进：

```
PATH=%phpver%;%PATH% 
```

并在开头添加新的 PHP ver 路径；这允许您在 Environment 设置中设置默认路径，然后仅当您想更改为不同版本时才需要此脚本。

另外，如果像我一样，你想在 git bash shell 中运行它，只需调用 make 一个 bash 脚本来调用 .bat 文件：

```
#!/bin/bash
eval phppath.bat $1 
```

# sql - SQL Server 2005 中的恢复模式数据库

> ID：15597071
> 
> 赞同：0
> 
> 时间：2013-03-24T09:54:05.133
> 
> 标签：sql, sql-server-2005

今天我试图附加`.MDF, .NDF, .LDF`我从客户那里收到的 SQL Server 2005 数据库的文件。附加后，数据库状态显示（只读）（例如，数据库名称（只读）。

如何将其设置为正常模式以更新数据？是否有任何查询可用于解决此问题？您的帮助将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:25:55.657

以下 SQL 语句应该使您能够进行更新：

```
ALTER DATABASE <database name> SET READ_WRITE 
```

如果这不起作用，那么我怀疑权限存在一些问题，因为文件来自不同的服务器。

# java - 为什么有效的方法不起作用？

> ID：15597073
> 
> 赞同：0
> 
> 时间：2013-03-24T09:54:25.293
> 
> 标签：java

这是我尝试使用 J Creator LE 编写的代码。我还在这方面的初学者，我希望你能帮助我。

```
public class TelNumHelper{
public static void main(String[] Args){
    String input = "1-800-FLO-WERS";
    String output = " ";
    int Key2,Key3,Key4,Key5,Key6,Key7,Key8,Key9,Key0;
    Key2 = 2;
    Key3 = 3;
    Key4 = 4;
    Key5 = 5;
    Key6 = 6;
    Key7 = 7;
    Key8 = 8;
    Key9 = 9;
    Key0 = 0;

    for(int i = 0;i<input.length();i++){
        if(input.charAt(i)=='-'){
            output = output + input.charAt(i);
        }else{
            output = output + valid(input.charAt(i));
        }

    }

public static char valid(char input){

            if(input == A||input == B||input == C||input == 2){
                System.out.println(Key2);
            }else if(input == D||input == E||input == F||input == 3){
                System.out.println(Key3);
            }else if(input == G||input == H||input == I||input == 4){
                System.out.println(Key4);
            }else if(input == J||input == K||input == L||input == 5){
                System.out.println(Key5);
            }else if(input == M||input == N||input == O||input == 6){
                System.out.println(Key6);
            }else if(input == P||input == Q||input == R||input == S||input == 7){
                System.out.println(Key7);
            }else if(input == T||input == U||input == V||input == 8){
                System.out.println(Key8);
            }else if(input == W||input == X||input == Y||input == Z||input == 9){
                    System.out.println(Key9);
            }else if(input == 0){
                System.out.println(Key0);

            }else{
                System.out.println("Error");
            }
        }
    } 
```

}

如何使该方法起作用？我尝试使用不同类型的方法，但它仍然不起作用

此代码应输出数字而不是字符，每个字符都应更改为数字。我使用手机键盘作为将字符转换为数字的基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:59:47.457

您的`valid`方法确实打印出字符而不是返回它们。除了名称暗示此方法进行某种验证外，`if`案例必须使用`return`. 您已将键定义为整数，但您确实希望返回具有适当数字的字符。而且您必须与字符进行比较，而不是一些称为 A、B 等的静态变量。你的可能应该是这样的：

```
char Key1 = '1';
char Key2 = '2';
...

public static void Main(string[] args) {
    string input = "0-800-FLO-WERS";
    string output = "";

    for(....)...

}

public static char valid(char input)
{
    if ((input == 'A') || (input == 'B') ... )
        return Key1;
    else if ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:16:49.070

如果你边走边编译和测试，你就不会写太多需要稍后修复的代码。通常在翻译中，有一些映射更简单。这是您可以做到的一种方法

```
public class Main {
    static final String codes = "00000" +
            "11111" +
            "22ABC" +
            "33DEF" +
            "44GHI" +
            "55JKL" +
            "66MNO" +
            "7PQRS" +
            "88TUV" +
            "9WXYZ";

    public static void main(String... ignore) {
        String input = "1-800-FLO-WERS";
        String output = convertTextToDigits(input);
        System.out.println(input + " can be dialed as " + output);
    }

    private static String convertTextToDigits(String input) {
        StringBuilder sb = new StringBuilder(input.length());
        for(char ch: input.toCharArray()) {
            int pos = codes.indexOf(ch);
            if (pos >=0)
                sb.append(pos/5);
        }
        return sb.toString();
    }
} 
```

印刷

```
1-800-FLO-WERS can be dialed as 18003569377 
```

# android - SQLite Android cannot open database file

> ID：15597078
> 
> 赞同：6
> 
> 时间：2013-03-24T09:54:56.683
> 
> 标签：android, sqlite

Edit: I tried this on my phone and it works, can anyone tell me why it does not work on an emulator?

I am trying to open a database on android, but it is throwing an "Database file could not be opened" Exception. In the debugger, it seems that the error is occurring on the line `mDb = mDbHelper.getWritableDatabase();`

My code is as follows:

```
package com.track.map;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

    public class DBAdapter {

        protected static final String DATABASE_NAME = "data";
        protected static final int DATABASE_VERSION = 1;

        //database tables
        //track table
        protected static final String TRACK_TABLE = "tracks";
        protected static final String TRACK_ID = "_id";
        protected static final String TRACK_DATE_TIME_START = "date_time_start";
        protected static final String TRACK_DATE_TIME_END = "date_time_end";

        //tables create
        protected static final String TRACK_TABLE_CREATE = 
                                "create table " + TRACK_TABLE + " ("
                                    + TRACK_ID + " integet promary key not null, "
                                    + TRACK_DATE_TIME_START + " text not null, "
                                    + TRACK_DATE_TIME_END + " text not null);";

        protected DatabaseHelper mDbHelper;
        protected SQLiteDatabase mDb;

        protected final Context mContext;

        public DBAdapter(Context context) {
            mContext = context;
        }

        public DBAdapter open() throws android.database.SQLException {
            mDbHelper = new DatabaseHelper(mContext);
            mDb = mDbHelper.getWritableDatabase();
            return this;
        }

        public void close() {
            mDb.close();
        }

        protected static class DatabaseHelper extends SQLiteOpenHelper {

            public DatabaseHelper(Context context) {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }

            @Override
            public void onCreate(SQLiteDatabase db) {
                db.execSQL(TRACK_TABLE_CREATE);
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                onCreate(db); //for now just recreate the database
            }

        }

    } 
```

and

```
package com.track.map;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    private DBAdapter db;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        db = new DBAdapter(this);
        db.open();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

Does anyone know what the problem is?

EDIT:

The logcat is:

```
03-24 11:43:42.022: I/Database(758): sqlite returned: error code = 14, msg = cannot open file at source line 25467
03-24 11:43:42.022: E/Database(758): sqlite3_open_v2("/data/data/com.track.map/databases/data", &handle, 6, NULL) failed
03-24 11:43:42.032: D/AndroidRuntime(758): Shutting down VM
03-24 11:43:42.032: W/dalvikvm(758): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-24 11:43:42.062: E/AndroidRuntime(758): FATAL EXCEPTION: main
03-24 11:43:42.062: E/AndroidRuntime(758): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.track.map/com.track.map.MainActivity}: android.database.sqlite.SQLiteException: unable to open database file
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.os.Looper.loop(Looper.java:123)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-24 11:43:42.062: E/AndroidRuntime(758):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 11:43:42.062: E/AndroidRuntime(758):  at java.lang.reflect.Method.invoke(Method.java:521)
03-24 11:43:42.062: E/AndroidRuntime(758):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-24 11:43:42.062: E/AndroidRuntime(758):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-24 11:43:42.062: E/AndroidRuntime(758):  at dalvik.system.NativeStart.main(Native Method)
03-24 11:43:42.062: E/AndroidRuntime(758): Caused by: android.database.sqlite.SQLiteException: unable to open database file
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1812)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:851)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:844)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:540)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
03-24 11:43:42.062: E/AndroidRuntime(758):  at com.track.map.DBAdapter.open(DBAdapter.java:37)
03-24 11:43:42.062: E/AndroidRuntime(758):  at com.track.map.MainActivity.onCreate(MainActivity.java:17)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-24 11:43:42.062: E/AndroidRuntime(758):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-24 11:43:42.062: E/AndroidRuntime(758):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-29T12:49:14.227

这可能有点晚了，但希望这对遇到这个问题的人有所帮助（因为我找不到明确的解决方案）。

我想我知道这个原因的原因（至少就我而言）。查看**DDMS** --> **File Explorer**，您会发现数据库文件夹 ( `/data/data//databases/`) 不存在，这就是应用程序无法在该不存在的文件夹中创建数据库文件的原因。如果您可以通过某种方式创建数据库文件夹，则可以避免此问题。

因为我很懒，所以`/data/data//files/`我在模拟器模式下只使用了该文件夹。您可以使用以下方法获取文件目录：

```
context.getFilesDir().getPath() 
```

这在模拟器中对我来说非常有用。

希望这可以帮助某人。

如果您想查看一些代码：

```
String dbFilename = "example.db";
try
{       
    File databaseFile = getDatabasePath(dbFilename);        
    SQLiteDatabase _db = SQLiteDatabase.openOrCreateDatabase(databaseFile);
} catch (Exception e)
{
    String databasePath =  getFilesDir().getPath() +  "/" + dbFilename;
    File databaseFile = new File(databasePath); 
    _db = SQLiteDatabase.openOrCreateDatabase(databaseFile);
} 
```

## 编辑：

我尝试在模拟器上登录 Facebook（我的应用程序具有 FB 集成），然后 /databases 文件夹出现（并持续存在）。不知道发生了什么，但有可能以某种方式创建该文件夹。这里有另一位专家可以阐明的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-01T11:09:39.513

在你的构造函数上试试这个

```
public youeConstructor(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        context.openOrCreateDatabase(DATABASE_NAME, context.MODE_PRIVATE, null);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-30T12:05:41.183

我一直在寻找解决这个问题的方法，但没有找到任何可行的方法......但幸运的是我做了一些解决它的方法。这就是我所做的：

打开您的 adb shell 并删除您尝试打开的数据库。对于不知道如何使用 Linux 终端的人：

// 首先从命令行打开 adb shell

```
adb shell 
```

// 然后这些是您需要的命令（更改您的应用程序包的 YOUR.APP.PACKAGE，它应该看起来像 com.domain.apilcation ）

```
cd /data/data/YOUR.APP.PACKAGE/databases/
ls 
```

最后一个命令 (ls) 将列出您为项目创建的所有数据库，现在您可以删除无法打开的数据库。首先，您应该复制它，以免丢失任何重要数据。（我假设您的数据库名为 your_database.db）

```
cp your_database.db your_database.db_backup
rm your_database.db 
```

然后你应该启动你的应用程序，它应该创建一个新的数据库，对我来说这永久地解决了这个问题。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T10:22:21.097

尽管与您当前的问题无关，但 SQLiteOpenHelper 中的 onUpgrade 方法将来也必然会失败：如果您在部署新版本的数据库时要执行的操作是从头开始，则需要删除首先是旧表。

**编辑**经过一些研究，我发现您的问题相当普遍：

[Android SQLiteOpenHelper 无法打开数据库文件](https://stackoverflow.com/questions/6202926/android-sqliteopenhelper-cannot-open-database-file)

此答案提供的 3 个链接

[https://stackoverflow.com/a/8957994/2177061](https://stackoverflow.com/a/8957994/2177061)

如果您找不到使错误消失的干净方法，则特别有趣并提供某种解决方法。

这就是说，如果我在你那里，作为在深入研究复杂的解决方法之前第一次尝试解决你的问题，我会尝试更新所有 Android 开发工具（特别是 SDK，但更新 eclipse 插件不会受到伤害），完全删除来自模拟器和设备的应用程序，然后再次运行它。

祝你好运！

**编辑 2**忽略以下备注（不正确，留在这里供参考）

您的代码不起作用，因为 SQL 查询错误：您拼写了

```
integet promary 
```

它应该在哪里

```
integer primary 
```

（此外，我也碰巧对 Android db 类感到疯狂，只是发现问题出在 SQL 查询中:)）

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T10:06:42.257

```
Why are you keeping code complex try this

public SQLiteDatabase sampleDB;
    public String COLUMN_ID="_id";
    public String COLUMN1="username";
    public String COLUMN2="password";
    public String TABLE_NAME="Androdata";

sampleDB =  this.openOrCreateDatabase(TABLE_NAME, MODE_PRIVATE, null);

private void insertDB() {
        sampleDB.execSQL("INSERT INTO " +
                TABLE_NAME +
                " Values ('1','Androviewer','viewer');");   
        System.out.println("Inserted data successfully....");
    }
    private void createDB() {
        sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                TABLE_NAME+ "(" + COLUMN_ID
                + " integer primary key autoincrement, " + COLUMN1
                + " text not null,"+ COLUMN2
                + " text not null);");
        System.out.println("Database created successfully....");
    } 
```

# database - performance considerations multi language site

> ID：15597081
> 
> 赞同：0
> 
> 时间：2013-03-24T09:55:21.420
> 
> 标签：database, database-design, localization

I'm starting a project for a new global website with a lot of information. All this information must be localized. I build quite some sites and most of them are only partial in more than one language, but never did something with so much localization.

Assume we have the following data:

Country, City, Store, Product and Product producer.

In the entities Store, Product and Product producer it is possible to have the data localized. The language of the country is mandatory, but next to that N extra languages can be added. This is used to show the information to people of other countries and also I need to search about this.

My initial idea is to create a parent table per localized table with just an id and maybe some metadata that is non localizable and then create a child table with a reference to the parent table, a country code and the localized fields.

This structure potentially results in joins and thus could have a bad influence on performance. Does anyone has experience with this structure? Are there things I should take into consideration? Is there an other way of doing this better?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:13:14.510

首先，我不担心在混合性能方面加入一些连接。正如我们所说，*过早优化是万恶之源。* 首先创建一个干净的设计，然后再考虑性能。

您真正需要做的是考虑您正在本地化的确切内容以及原因。我们在 LedgerSMB 中所做的正是您所建议的，即带有事实的表格（如果您愿意的话），然后是带有翻译的表格。

保持一切正常运行的关键是考虑减少来回发送的实际查询数量。运行一个连接 60 个左右的字符串然后你的应用程序处理它们是一回事。性能方面，向数据库发送 60 个不同的查询以分别提取 1 个字符串要糟糕得多*。*

还将您的主要字符串保存在 .po 文件或类似文件中，并为这些文件使用本地化框架。这不是非此即彼的事情。

# asp.net-mvc - ASP MVC open a live stream between remote host and the connected user

> ID：15597084
> 
> 赞同：1
> 
> 时间：2013-03-24T09:55:38.130
> 
> 标签：asp.net-mvc, header, stream

The idea is simple, i am creating a service where user can put the direct link of a file that is being hosted on another website and my program will open a stream to that remote server and start reading the file in bytes and then return each readed byte to the user.

Example : Internet download manager will go to my page, then my code will fetch the remote file and read it in bytes and return each byte to Internet download manager to download the file.

here is my code

```
 public void Index()
    {
        using (WebClient wcDownload = new WebClient())
        {
            try
            {
                // Create a request to the file we are downloading
                HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("http://FILE-IS-NOT-ON-MY-SERVER.com/file.zip");
                // Set default authentication for retrieving the file
                webRequest.Credentials = CredentialCache.DefaultCredentials;
                // Retrieve the response from the server
                HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();
                // Ask the server for the file size and store it
                Int64 fileSize = webResponse.ContentLength;

                // Open the URL for download 
                Stream strResponse = wcDownload.OpenRead("http://FILE-IS-NOT-ON-MY-SERVER.com/file.zip");

                // It will store the current number of bytes we retrieved from the server
                int bytesSize = 0;
                // A buffer for storing and writing the data retrieved from the server
                byte[] downBuffer = new byte[500000000];

                // Loop through the buffer until the buffer is empty
                while ((bytesSize = strResponse.Read(downBuffer, 0, downBuffer.Length)) > 0)
                {
                    // i want to return each byte to the user for example Internet Download Manager
                }

                // When the above code has ended, close the streams
                strResponse.Close();
            }
            catch (Exception)
            {

            }
        }
    } 
```

i know it is messy but i really don't know how to return each byte to the user.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:26:02.733

我认为这个链接[http://support.microsoft.com/kb/812406](http://support.microsoft.com/kb/812406)可以帮助你很多！您只需要更改打开的文件以供下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:04:36.073

简而言之，您想从请求的响应中获取一个流，然后将该流分配给您的响应流（或写入您的响应流）。

我认为*[这个 SO question](https://stackoverflow.com/questions/5596747/download-stream-file-from-url-asp-net)*有一个很好的答案。

# c++ - Wav file noise removal

> ID：15597086
> 
> 赞同：1
> 
> 时间：2013-03-24T09:56:14.533
> 
> 标签：c++, audio-streaming, wav, pcm

I'm writing a program (c++, vs2010,win7) that records audio into a wav file. When I try to hear the audio it has a lot of white noise. I tried to reopen the file with another program that I wrote. The only thing this program does is :

```
Char buffer[8000*60*2] = {} 
File *wav, *out
Wav = fopen ("raw", "r+") 
Out = fopen("out", "a+") 
fread(buffer, sizeof (char) *8000*60*2,1,wav)
fwrite(buffer, sizeof (char) *8000*60*2,1,out) 
fclose (wav) 
fclose (out) 
```

After I pass the raw data through this program I can hear a small part of the original wav file without any noise(i open this in audacity as raw data). My problem is that I'm not changing anything in the data just writing it again and like a magic I can hear clearly. What am I missing? I don't make any change of the data. When I write the data I write it as a short var. data is short fwrite(data, 1024,1,wav)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-26T18:08:19.603

在编写 WAVE 文件时，很多事情可能会导致它产生噪音。以下是您应该寻找的几件事：

**限制值**

vanilla WAVE 文件有一个 16 位数据值（如果是立体声，则为两个值），因此如果您放大这些值和它们超过了该限制，那么您将获得一个随机*值，因此在写入文件时会产生噪音。

**用二进制写**

正如罗杰在原始问题的评论中提到的那样，以二进制形式编写很重要，因为如果您尝试使用标准“r”写入文件，您只会得到很多白噪声。

**缺少标题**

有时，如果您忘记了标题，您可能还会在输出 WAVE 文件中获得噪音。

希望这会有所帮助。

# excel - .Range and .InsertShift to copy a table on a new worksheet: overwriting data

> ID：15597087
> 
> 赞同：1
> 
> 时间：2013-03-24T09:56:45.987
> 
> 标签：excel, insert, vba

I have a basic question on `Sheet.Range` and `.Insert Shift:=xlDown`. I would like to import on my worksheet a table of numbers which has just 2 columns. Every time the macro reads 2 values (on the same row) in the original table, it should copy them in columns A and B in the worksheet and continue the process by writing another pair of numbers in the subsequent row. If I write

`Sheet.Range("A1:B1").Insert Shift:=xlDown
Sheet.Cells(1, 1) = "number 1 "
Sheet.Cells(1, 2) = "number 2"`

all I get in the end is the last pair of values from the original table. In other words, the macro overwrites instead of moving down, row by row. What should I amend? Thanks! Avitus

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T23:10:36.713

您发布的代码似乎可以工作，但是以相反的顺序放置新数据

测试为

```
Sub demoAsIs()
    Dim Sheet As Worksheet
    Dim i As Long
    Set Sheet = ActiveSheet
    For i = 0 To 4
        Sheet.Range("A1:B1").Insert Shift:=xlShiftDown
        Sheet.Cells(1, 1) = "number " & 2 * i + 1
        Sheet.Cells(1, 2) = "number " & 2 * i + 2
    Next
End Sub 
```

样本数据

前：
![在此处输入图像描述](../Images/a1232c54a6f9712dbb0a0dbd28350b03.png)

后：
![在此处输入图像描述](../Images/7b16ed0a60f8f32abd24105315a4a577.png)

要颠倒顺序，试试这个

```
Sub demo()
    Dim Sheet As Worksheet
    Dim i As Long
    Dim rNewData As Range
    Set Sheet = ActiveSheet
    Set rNewData = Sheet.Range("A1:B1")
    For i = 0 To 4
        rNewData.Insert Shift:=xlShiftDown
        ' rNewData now refers to the one row down from where it was
        rNewData.Cells(0, 1) = "number " & 2 * i + 1
        rNewData.Cells(0, 2) = "number " & 2 * i + 2
    Next
End Sub 
```

结果：
![在此处输入图像描述](../Images/1f3c5ef623abd2759ad58cc11b238f4b.png)

* * *

**关于`xlDown`vs的注意事项`xlShiftDown`**

Excel VBa 为参数提供了许多枚举集。每个枚举都有一个基础数值。`Insert`方法，`Shift`参数使用Enumeration `XlInsertShiftDirection`: `xlShiftDown`, `xlShiftToRight`.
`xlShiftDown`= -4121
从另一个集合中提供一个恰好具有相同基础数值（例如`xlDown`）的枚举将起作用，但并不完全正确。

**注意事项`Insert`**

该`Shift`参数是可选的。如果省略，Excel 会根据范围的形状来决定移动的方式。

# visual-studio-2010 - Windows Phone 模拟器渲染问题

> ID：15597093
> 
> 赞同：0
> 
> 时间：2013-03-24T09:57:05.473
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-7-emulator

我从 WP 开发开始，我安装了 Microsoft Visual Studio 2010 Express for Windows Phone（在 Windows 7 64 位上）。当我尝试运行模拟器时，渲染效果不好（见下图）。你知道如何解决这个问题吗？我也可以在手机上调试，但软件模拟器也很有用。感谢您的任何提示。

![Windows 手机模拟器](../Images/74a5b1dd842bc552f5a20ab1974da98d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:47:03.723

这个模拟器有点问题。只需将网格背景设置为黑色或透明以外的任何其他颜色。这将解决问题。我的意思是将布局网格背景设置为黑色。如果您只制作内容网格，那么它将只为内容区域着色。

# c++ - 标准::向量 作为 Foo 类中的成员变量，Bar 需要一个空的构造函数

> ID：15597094
> 
> 赞同：2
> 
> 时间：2013-03-24T09:57:14.957
> 
> 标签：c++, class, vector, enums, nested-class

这是情况：

我有一个由以下文件定义的类。

Foo.h 文件：

```
template<typename MyType>
class Foo
{
public:
    Foo(int number = 50);

private:
    typedef enum {VAR1, VAR2} Type;

    class Bar
    {
        MyType a;
        Type b;

        Bar(int param1, Type param2) : a(param1), b(param2) {}
    }

    std::vector<Bar> vec;
}; 
```

Foo.cpp 文件：

```
template<typename MyType>
Foo::Foo(int number) : vec(number)
{ } 
```

问题是当我编译它时，我在 .cpp 文件的第一行收到一个错误，说它需要一个不带参数的 Bar 构造函数。我想它需要它来在 Foo 中创建向量。我为 Bar 添加了一个没有参数的构造函数，给出了以下 .h 文件：

```
template<typename MyType>
class Foo
{
public:
    Foo(int number = 50);

private:
    typedef enum {VAR1, VAR2} Type;

    class Bar
    {
        MyType a;
        Type b;

        Bar() {}   // <----  Line added
        Bar(int param1, Type param2) : a(param1), b(param2) {}
    }

    std::vector<Bar> vec;
}; 
```

现在我可以编译并且它可以工作了，但是在我刚刚添加的行中有一个警告说`Member 'b' was no initialized in this constructor`. 枚举的问题，也许？

我不明白我应该怎么做才能让它在没有这个警告的情况下工作。

**编辑**：我收到了一些答案，说要向空构造函数添加一个初始化列表。但是，我的类实际上是一个模板类，`a`对我来说是一个未知类型，所以我无法初始化它，因为我不知道它的类型。我尝试仅`b`在 Bar 的初始化列表中进行初始化，它起作用了。警告消失了，但是让`a`未初始化可以吗？有没有办法删除没有 Bar 参数的构造函数，并且仍然给 Foo 构造函数中的向量一个大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T10:04:05.627

The problem is the initializer list in the definition of `Foo::Foo(int)`. You're writing

```
Foo::Foo(int n)
    : vec(n) { } 
```

i.e. you're using the constructor

```
std::vector<Bar>::vector(size_t number, const Bar &x = Bar()) 
```

Please note that `x = Bar()` which means you fill the vector with standard constructed instances of `Bar`. Since there's at least one constructor defined in `Bar` the compiler does not automatically provide the standard constructor.

Define a standard constructor in `Bar` like the other answers suggest or put something else in the constructor of `Foo`, for example this

```
Foo::Foo(int n)
    : vec(n, Bar(1, VAR1)) { } 
```

and the compiler error vanishes.

**Answer to your edit**: The warning you receive probably means: The member `a` isn't proper initialized. Since it's an `int` this might be okay (C++ does not force you to initialize `int`s). But beware of strange and arbitrary values in the member `a` later in your program. A better solution is to set it at construction time to a well-defind state which means to you "this value is unknown."

**Edit**: I deleted all the stuff I wrote about heterogeneous containers. However if you need these things take a look at the edit history of my post.

You can initialize `a` in the standard constructor of `Bar` like this:

```
Bar::Bar() : a(MyType()), b(UNKNOWN) { } 
```

and by adding `UNKNOWN` to the enumeration `Type`. This assumes the type `MyType` is standard constructible. This applies for example to all primitive type like `int`, `double`, etc. This gives you a well defined state of the `Bar` object which could mean to you *unknown*. It can be tested by comparing `b` to `UNKNOWN`.

As yakk stated in his comment: Primitive types like enumerations can be left unitialized but in your case the compiler warns you: It may be your member `b` contains a value which has no label like `VAR1` or `VAR2` at all. It is always a good idea to initialize all members with well-defined values unless you're really forced to not to do so - for example if execution is bloody crucial.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:00:52.093

您需要向空构造函数添加一个初始化列表（并可能将其公开）。

```
class Bar
{
    int a;
    Type b;

    Bar() : a(0), b(VAR1) {}   // initialize the members to default values.
    Bar(int param1, Type param2) : a(param1), b(param2) {}
} 
```

# javascript - 在画布上绘制一个区域

> ID：15597100
> 
> 赞同：1
> 
> 时间：2013-03-24T09:58:25.740
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

我需要在绘图时用光标悬挂绘图线。我尝试了 mousemove 事件，但没有让它工作。以下是我目前所拥有的。

[http://jsfiddle.net/m1erickson/qwd2a/](http://jsfiddle.net/m1erickson/qwd2a/)

```
var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var canvasMouseX;
        var canvasMouseY;
        var canvasOffset = $("#canvas").offset();
        var offsetX = canvasOffset.left;
        var offsetY = canvasOffset.top;
        var storedLines = [];

        ctx.strokeStyle = "orange";
        ctx.font = '12px Arial';

        $("#canvas").mousedown(function (e) {
            handleMouseDown(e);
        });

        function handleMouseDown(e) {
            canvasMouseX = parseInt(e.clientX - offsetX);
            canvasMouseY = parseInt(e.clientY - offsetY);

            // Put your mousedown stuff here
            storedLines.push({
                x: canvasMouseX,
                y: canvasMouseY
            });
            var count = storedLines.length;
            var X = canvasMouseX - (count < 10 ? 4 : 7);
            ctx.strokeStyle = "orange";
            ctx.fillStyle = "black";
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.arc(canvasMouseX, canvasMouseY, 8, 0, 2 * Math.PI, false);
            ctx.fillText(storedLines.length, X, canvasMouseY + 4);
            ctx.stroke();
        }

        $("#draw").click(function () {
            ctx.strokeStyle = "red";
            ctx.fillStyle = "blue";
            ctx.lineWidth = 3;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.moveTo(storedLines[0].x, storedLines[0].y);
            for (var i = 0; i < storedLines.length; i++) {
                ctx.lineTo(storedLines[i].x, storedLines[i].y);
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            storedLines = [];
        });

        $("#clear").click(function () {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            storedLines = [];
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:13:52.377

使用画布，您负责在每次需要时重新绘制整个内容。这意味着当鼠标光标移动时，您需要清除画布，然后重新绘制所有当前线段。根据您的代码，我提出了以下示例，说明如何完成：

```
<html>
<head>
    <title>Canvas</title>
</head>
<body>

<p>Click to draw lines</p>
<p>Click back in the green circle to close+fill</p>
<br/>
<canvas id="canvas" width=300 height=300></canvas>
<br/>
<button id="clear">Clear Canvas</button>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
$(function () {
        var canvas = document.getElementById("canvas"),
            ctx = canvas.getContext("2d"),
            offset = $("#canvas").offset(),
            storedLines = [],
            polyLines = [],
            start = {x: 0, y: 0},
            radius = 7;

        function canvasPosition(e) {
            return {
                x: parseInt(e.clientX - offset.left),
                y: parseInt(e.clientY - offset.top)
            };
        }

        $("#canvas").mousedown(function (e) {
            var pos = canvasPosition(e);
            if (hitStartCircle(pos)) {
                polyLines.push(storedLines);
                storedLines = [];
                draw();
            }
            else
            {
                storedLines.push(pos);
                update(pos);
            }
        })
        .mousemove(function (e) {
            update(canvasPosition(e));
        });

        // Draw completed polylines
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            $.each(polyLines, function (idx, polyLine) {
                fillPolyline(polyLine);
            });
        }

        // Update shape currently being drawn
        function update(position) {
            var len = storedLines.length;
            if(len==0) return;

            draw();
            ctx.fillStyle = "green";
            ctx.beginPath();
            ctx.arc(storedLines[0].x, storedLines[0].y, radius, 0, 2 * Math.PI, false);
            ctx.fill();

            ctx.strokeStyle = "orange";
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(storedLines[0].x, storedLines[0].y);
            for(var i=1; i<len; ++i) {
                ctx.lineTo(storedLines[i].x, storedLines[i].y)
            }
            ctx.lineTo(position.x, position.y);
            ctx.stroke();
        };

        function hitStartCircle(pos) {
            var start = storedLines[0] || {x:0, y:0},
                dx = pos.x - start.x,
                dy = pos.y - start.y;
            return (dx * dx + dy * dy < radius * radius)
        }

        function fillPolyline(lines) {
            ctx.strokeStyle = "red";
            ctx.fillStyle = "blue";
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(lines[0].x, lines[0].y);
            for (var i = 0; i < lines.length; i++) {
                ctx.lineTo(lines[i].x, lines[i].y);
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
        }

        $("#clear").click(function () {
            polyLines = [];
            draw();
        });
});
</script>
</body>
</html> 
```

这将在用户移动鼠标光标时正确更新最后一段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:08:54.093

通过查看您的 jsfiddle，绘制新线时会有偏移。这是因为您的 css 中的 body 中的填充。

只需替换这个：

```
body {
    background-color: ivory;
    padding:10px;
} 
```

有了这个：

```
body {
    background-color: ivory;
} 
```

# ios - 如何将count的值设置为零，而count在IOS中有一些整数值init

> ID：15597101
> 
> 赞同：0
> 
> 时间：2013-03-24T09:58:42.497
> 
> 标签：ios, objective-c

我有一个问题，通过 coredata 获取的数据然后 count 中没有记录。当应用程序第一次运行时，count 的值为零，一旦取出记录，count 的值就等于 no。的记录。现在我想将 count 的值重置为零。需要你的好意建议。

```
NSFetchRequest *fetchRequest = [NSFetchRequest  fetchRequestWithEntityName:@"Article"];
NSUInteger count = [self.managedObjectContext countForFetchRequest:fetchRequest error:&error];
if(count == 0)
    {
     NSArray *array = [json valueForKey:@"Artikler"];
     for(id key in array){
     Article *article = [NSEntityDescription insertNewObjectForEntityForName:@"Article" inManagedObjectContext:context];
     article.articleId = [NSNumber numberWithInt:[[key valueForKey:@"Id"]intValue]];       
            if([key valueForKey:@"Name"]== [NSNull null])
                article.name = @"Tittel";
            else
                article.name = [key valueForKey:@"Name"];
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:30:29.000

**This is Simple Logic for you.**

Add all data in `NSMutableArray`

If you want to count number of record in your Array then write `myArray.count` this return number of record that are fetched from coreData by you.

and If You want to **reset Zero value** the then write following code

```
if(myAraay.count > 0)
  [myArray removeAllObjects]; 
```

This code remove all data from array so your array has no value.

Then when you write `myArray.count` then it give **Zero** value.

# javascript - 获取所有以某个字符串开头的JS变量

> ID：15597102
> 
> 赞同：8
> 
> 时间：2013-03-24T09:58:45.730
> 
> 标签：javascript, optimization, refactoring, global-variables

我正在为一个我无法控制的网站编写一个插件，除了我能够向它添加 JS 代码（实际上它是由过时的所见即所得 html 编辑器生成的一组 html 文档）。

出于我的目的，我需要获取以某种方式命名的所有变量。名称始终以数字开头`zzz`和结尾，从`zzz1`到`zzz999999`。现在我正在做以下事情：

```
for (var i=1; i<999999; i++) {
    if (typeof window['zzz'+i] !== 'undefined') { 
       ArrayOfAllFoundVariables.push( window['zzz'+i] )
    }
} 
```

我想知道除了迭代一百万个未定义之外，是否有更有效的方法来检测这些变量。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T10:10:45.953

您可以遍历所有顶级变量（的属性`window`），然后测试它们的名称是否与某些正则表达式模式匹配。像以前一样收集匹配的变量。

```
var pattern = /^zzz[0-9]+/;
for (var varName in window) {
    if (pattern.test(varName)) {
        ArrayOfAllFoundVariables.push(window[varName]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:20:32.823

Mikke 打败了我 :)

```
for (element in window) {
  if (element.substring(0,3) == 'zzz') {
    ArrayOfAllFoundVariables.push(window[element]);
  } 
```

}

但我错过了数字部分:) ...干得好Mikke ...

# jquery - jquery：用两个对象扩展方法 - 结果是对象对象？

> ID：15597109
> 
> 赞同：1
> 
> 时间：2013-03-24T09:59:40.627
> 
> 标签：jquery, object, extend, for-in-loop

我正在 jQuery.com 上做一些 jQuery 教程，现在尝试理解扩展方法。它几乎可以工作。

```
var object1 = {
                apple: 0,
                banana: {weight: 52, price: 100},
                cherry: 97
                };

            var object2 = {
                banana: {price: 200},
                durian: 100
                };

            var obj =   $.extend(object1, object2);

            for(var key in obj) {
                alert('key: ' + key + '\n' + 'value: ' + obj[key]); 
```

警报框提供以下输出：

*   键：苹果值：0
*   键：香蕉值：[对象对象]
*   关键：樱桃价值：97
*   关键：榴莲价值：100

第二个键值对应该是banana:200。有人可以解释为什么不是吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:10:33.937

bannana 是一种对象属性。因此，如果您扩展它，它将被秒替换。但是如果你想更新`price`and`weight`属性，你必须像这样编写代码

```
var obj = $.extend(true, object1, object2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:02:46.370

The object Banana will be:

```
banana : {
  weight: 52,
  price: 200
} 
```

`$.extend` will not remove the keys that are not overwritten, it's cleverer than that. So weight still exists.

The reason it shows `[object object]` is because there is no `toString()` method and `alert` doesn't know how to Stringify the banana Object. If you print the values on their own to the console this is what you will see.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:04:52.380

The alert box simply doesn't show nested objects.

```
//Use this on your object before you alert
alert(JSON.stringify(myObj)); 
```

If you use Chrome or Firebug, you can easily see this output using `console.log(myObj)` instead of alert. You would need to see the console by pressing `Ctrl+Shift+J` in Windows.

Hope this helps!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:07:12.193

它向您展示了对象，因为它是对象并且不会深入。

您可以通过添加以下内容轻松测试它：

```
object2.banana.toString=function (){ return this["price"]; //only for object2's banana. just for demonstrating. 
```

完整代码：http: [//jsbin.com/esobuc/2/edit](http://jsbin.com/esobuc/2/edit)

```
var object1 = {
                apple: 0,
                banana: {weight: 52, price: 100},
                cherry: 97
                };

            var object2 = {
                banana: {price: 200},
                durian: 100
                };

object2.banana.toString=function (){ return this["price"]; 
}

            var obj =   $.extend(object1, object2);

            for(var key in obj) {
              alert('key: ' + key + '\n' + 'value: ' + obj[key]);} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T10:16:16.967

以下应该有帮助：

```
// override banana with its price
object2.banana = object2.banana.price

// merge both objects
var obj = $.extend(object1, object2); 
```

# c# - 将 Jalali 月份添加到 Jalali 日期

> ID：15597119
> 
> 赞同：6
> 
> 时间：2013-03-24T10:00:40.487
> 
> 标签：c#, .net, datetime, calendar, persian

我在 Jalali（波斯日期系统）中有一个日期，我需要转发 1 个月。问题是，当我使用`myDateTime.AddMonths(1)`我的日期向前 1 公历月份添加 1 个月时，而我想要一个 Jalali 月份。

例如，如果我的日期（格式：yyyy-MM-dd）是**2013-02-28** Gregorian 和**1391/12/10** Jalali，我添加一个月它将是**2013-03-28** Gregorian（没关系）和**1392 /01/08**（这是错误的，应该是*1392/01/10*）。

说了上面所有的故事，有没有一种方法可以根据我的文化或地区或其他东西在日期上加一个月？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T10:12:57.783

您可以使用`System.Globalization.PersianCalendar`实例方法（其行为几乎类似于静态方法），如下所示：

```
var persianCalendar = new System.Globalization.PersianCalendar();
var today = DateTime.Today;
var nextMonth = persianCalendar.AddMonths(today, 1); 
```

# ruby-on-rails - 确认后是否可以将链接添加到闪存消息？

> ID：15597121
> 
> 赞同：8
> 
> 时间：2013-03-24T10:00:43.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用设计。
当用户确认成功时，会出现闪烁消息。
我想添加一个链接。

所以我想要这个消息

`Your account was successfully confirmed. You are now signed in. Go to your profile page, and edit it!`

然后的部分`profile`应该是链接到`example.com/users/username/edit`

我怎样才能使它成为可能？

**设计.en.yml**

```
confirmations:
  confirmed: 'Your account was successfully confirmed. You are now signed in.' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T12:47:17.617

您可以使用该方法[`view_context`](http://api.rubyonrails.org/classes/ActionView/Context.html)访问模型和控制器中的任何视图方法。

例如：

```
def index
  flash[:notice] = "Go to your #{view_context.link_to("profile page", link_path)}, and edit it!"
  redirect_to link_path
end 
```

相应地更新`link_path`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-03T22:48:50.590

我在实施这些解决方案时遇到了麻烦。我所需要的只是一个简单的 Flash 中的 HTML 链接。这是我在 Rails 4.1 中实现它的方法。我只需要清理 app/views/shared/_flash.html.erb 中的 flash 消息：

```
<% flash.each do |name, msg| %>
  <div class="alert alert-<%= name %>">
    <a class="close" data-dismiss="alert">&#215</a>
    <% if msg.is_a?(String) %>
      <div id="flash_<%= name %>"> <%= sanitize(msg) %> </div>
    <% end %>
  </div>
<% end %> 
```

在我的控制器中，我只是直接输入了 HTML，没有 .html_safe。工作一种享受！

```
flash[:notice] = %Q[Please <a href="#">click here</a>] 
```

# apache - 如何在不重写的情况下立即退出 Apache 重写引擎

> ID：15597125
> 
> 赞同：1
> 
> 时间：2013-03-24T10:00:52.520
> 
> 标签：apache, .htaccess, mod-rewrite

我的 .htaccess 文件位于根目录中，并为多个网站提供服务。

它包含一个 RewriteEngine 块。

如果主机不是（www）www.example.com，我想阻止 Apache 评估规则：

```
RewriteEngine On
RewriteBase /

#If this is not about example.com, it is probably about our other websites, exit here
RewriteRule %{HTTP_HOST} !^(www|)example.com$ - [L] 
```

但是，这会导致 500 内部错误。可能由于使用 {HTTP-HOST} 是 RewriteRule 指令。

所以我现在正在考虑这样的事情：

```
RewriteCond %{HTTP_HOST} !^(www|)example.com
RewriteRule (.*) $1 [L] 
```

但这需要 Apache 重写并且不利于性能。

有人建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:04:37.087

> **如果主机不是**(www) www.example.com ，我想阻止 Apache 评估规则

无论如何，您都在使用 mod_rewrite 。这样做的方法是跳过规则，如果它**不是** *www*，所以你必须确保它是。

像这样的东西应该在根目录的 .htaccess 文件中工作：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www\.example\.com [NC]
RewriteRule ^(.*)            /$1            [NC,L] 
```

这与你所尝试的相反。

### 选项

根据*Arkanon 的*建议，此选项假定有更多域，并将规则仅应用于选定的域 (example.com)，有或没有`www.`

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com [NC]
RewriteRule ^(.*)             /$1              [NC,L] 
```

# c# - 我可以在 Visual Studio 项目中运行 XAML 文件的两个实例吗？

> ID：15597127
> 
> 赞同：0
> 
> 时间：2013-03-24T10:01:04.393
> 
> 标签：c#, visual-studio-2010, visual-studio

你好：菜鸟问题

我正在学习 C# Asyn 服务器和客户端套接字。我的服务器同时接受多个客户端，我想同时运行 2 个以上的客户端来测试它

在 Eclipse 中处理类似的 Java 应用程序时，我可以简单地 (F9) 运行我的 server.java，然后通过单击运行来运行 client.java TWICE。

如何在 Visual Studio 中实现类似的功能，我是否必须运行多个 Visual Studio 实例，或者有没有办法像在 Eclipse 中那样做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:06:01.183

右键单击客户端项目，Debug/Run->Start new instance。

# mysql - vb6中选择combobox的值后自动获取textbox的值

> ID：15597128
> 
> 赞同：1
> 
> 时间：2013-03-24T10:01:08.080
> 
> 标签：mysql, database, vb6, combobox

我有一个`products`包含 6 列的表，包括**PRICE**列。我想要实现的是：

*   当我从组合框中选择一个值时，下一个文本框**Price**将自动从数据库表中填充`products`。

例如：餐桌产品

```
ProductName     Price
Mango           12
Apple           15 
```

组合框值：

```
Mango
Apple 
```

组合框文本框值：

```
Mango 
```

**PRICE**文本框的值自动填充为：

```
12 
```

试过的代码：

```
Private Sub Price()
Set Rs = New ADODB.Recordset
Set Cmd = New ADODB.Command

If txtProdName.txt Is Not Nothing Then

With Cmd
    .ActiveConnection = Conn
    .CommandType = adCmdText
    .CommandText = "SELECT price from products where productname=txtProdname.txt"
    Set Rs = .Execute
End With

txtPrice = Rs.Fields
 End If
 End Sub 
```

我整天都在尝试这个，但这不起作用，如何纠正这个？真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:33:21.773

试试这个：这个作为样本......希望它有所帮助

```
Private sub CboiPAQ_click()
Set rsiPAQs = New ADODB.Recordset 
With rsiPAQs 
.ActiveConnection = cnMHS 
.CursorLocation = adUseClient 
.CursorType = adOpenStatic 
.LockType = adLockPessimistic 
.Source = "SELECT location FROM iPAQs WHERE iPAQ=" & "'" & CboiPAQ.text & "'" 
.Open 
txtbox.text=rsiPAQs("location")
End With 
End sub 
```

# java - Two different changing there position when kept in a single panelGrid

> ID：15597133
> 
> 赞同：0
> 
> 时间：2013-03-24T10:01:35.447
> 
> 标签：java, jsf, jsf-2, richfaces

I have two rich:panel(id="pn2" and id="pn3" in given code) in a single h:panelGrid . I have positioned both panels one after another in a Single row .

I have following two problems :

1.  As both of these panel are changing height depending on the situation, so when one panel changes height, second panel is moving up or down from its current position .

2.  Why I have to give columns="4" inside the h:PanelGrid for achieving the desired position(Both panels in a single row and one after another)? I have only two panels inside the panelGrid . So, this does not seem to be logical .

    Following is the code:

    ```
     < h:panelGrid columns="4">

                        <!--This is for setting up the Accounts for customers-->                    
                        <rich:panel id="pn2" rendered="#{not empty adminBean.currentItem}" header="Add Account" style="margin-top: 10px; width: 545px; margin-left: -7px">

                            <h:panelGrid columns="2">
                                <a4j:commandButton value="Add New" action="#{adminBean.addAccountAction}" render="pn2" />
                                <a4j:commandButton value="Delete" style="margin-left: 10px; width: 70px"></a4j:commandButton>
                            </h:panelGrid>

                            <rich:dataScroller for="setacct" style="margin-top: 17px"></rich:dataScroller>
                            <rich:dataTable id="setacct" value="#{adminBean.accountList}" binding="#{adminBean.addAccountTable}" var="acct" rows="10" style="width: 430px; max-height: 10px;">

                                <rich:column id="c1">
                                    <f:facet name="header">
                                        <h:outputText value="Account Type" style="font-size: smaller; font-weight: bolder; "/>
                                    </f:facet>
                                    <h:inputText value="acct.acctType"></h:inputText>
                                </rich:column>

                                <rich:column id="c2">
                                    <f:facet name="header">
                                        <h:outputText value="Branch" style="font-size: smaller; font-weight: bolder;"/>
                                    </f:facet>
                                    <h:inputText value="acct.branch"></h:inputText>
                                </rich:column>

                                <rich:column id="c3">
                                    <f:facet name="header">
                                        <h:outputText value="Account Start Date" style="font-size: smaller; font-weight: bolder;"/>
                                    </f:facet>
                                    <rich:calendar id="calendar" value="acct.acctStartDate"/>
                                </rich:column>

                                <rich:column id="c4">
                                    <f:facet name="header">
                                        <h:outputText value="" style="font-size: smaller; font-weight: bolder;"/>
                                    </f:facet>
                                    <a4j:commandLink value="select"  render="pn3"/>
                                </rich:column>

                            </rich:dataTable>

                        </rich:panel>

                        <!--This is for issuing credit cards for customers-->
                        <rich:panel id="pn3" rendered="#{not empty adminBean.currentItem}" header="Add Cards" style="margin-top: 10px; width: 620px; margin-left: 30px">

                            <h:panelGrid columns="2">
                                <a4j:commandButton value="Add New" action="#{adminBean.addCardAction}" render="pn3" style="width: 70px"></a4j:commandButton>
                                <a4j:commandButton value="Delete" style="margin-left: 10px; width: 70px"></a4j:commandButton>
                            </h:panelGrid>

                            <rich:dataScroller for="setcard" style="margin-top: 17px"></rich:dataScroller>
                            <rich:dataTable id="setcard" value="#{adminBean.cardsList}" binding="#{adminBean.addCardTable}" var="car" rows="10" style="width: 430px; max-height: 10px;">

                                <rich:column id="cl1">
                                    <f:facet name="header">
                                        <h:outputText value="Card Type" style="font-size: smaller; font-weight: bolder; "/>
                                    </f:facet>
                                    <h:inputText value="#{car.type}"></h:inputText>
                                </rich:column>

                                <rich:column id="cl2">
                                    <f:facet name="header">
                                        <h:outputText value="VALID FROM" style="font-size: smaller; font-weight: bolder;"/>
                                    </f:facet>
                                    <rich:calendar value="#{car.validFrom}" id="cal2"/>
                                </rich:column>

                                <rich:column id="cl3">
                                    <f:facet name="header">
                                        <h:outputText value="EXPIRY ON" style="font-size: smaller; font-weight: bolder;"/>
                                    </f:facet>
                                    <rich:calendar value="#{car.expiryOn}" id="cal3"/>
                                </rich:column>

                                <rich:column id="cl4">
                                    <f:facet name="header">
                                        <h:outputText value="AUTO ALERT" style="font-size: smaller; font-weight: bolder;"/>
                                    </f:facet>
                                    <h:inputText value="#{car.autoMsg}"></h:inputText>
                                </rich:column>

                            </rich:dataTable>

                        </rich:panel>
                    </h:panelGrid> 
    ```

Can anybody tell that what is the reason behind changing position of both panels ? Note : here Height of both the panels are dynamic.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:20:23.593

对于问题1，h:panelGrid 只是一个布局，但与高度无关。对于高度，您需要使用 css 来控制它。

对于问题2，尝试删除那些

```
<!--This is for setting up the Accounts for customers--> 
```

在你的代码中。

# jquery - z-index or :hover sometimes work, sometimes not

> ID：15597136
> 
> 赞同：3
> 
> 时间：2013-03-24T10:02:18.590
> 
> 标签：jquery, css, hover, z-index

I am really scared about what happens. I am building a little site with some animation, CSS 3D transform with a bit of jQuery.

The code it's a bit too long to put it on here, so I create **[this jsfiddle](http://jsfiddle.net/Y7dTS/embedded/result/)**.

Anyway, the structure is very simple at all (this is just full code, with non vendor-prefixs, for `article`):

```
<section>
  <article>
    <h1>2012</h1>
  </article>
  <article>
    <h1>2013</h1>
  </article>
</section> 
```

```
.article {
  position: absolute;
  width: 370px;
  height: 250px;
  margin-bottom: 120px;
  background-size: cover;
  background-position: center;
  border-radius: 10px;
  background: grey;
  z-index: 50;
  box-shadow: -5px 0 3px -4px rgba(0, 0, 0, 0.6);
  -webkit-box-reflect: below -10px -webkit-linear-gradient(bottom, rgba(255, 255, 255, 0.2) 0%, transparent 40%, transparent 100%);
  transition: margin-top 0.3s, width 0.3s, height 0.3s, -webkit-transform 0.3s, top 0.3s, left 0.3s;
  transform: perspective(900px) rotateY(25deg) translateZ(-90px);
}

section article:hover {
  margin-top: -30px;
  width: 430px;
  height: 310px;
  cursor: pointer;
  box-shadow: 0 0 50px 20px rgba(0, 0, 0, 0.2);
  transition: all 0.8s;
  transform: perspective(100px) rotateY(0deg) translateZ(0);
} 
```

The problem is, when I access to the page, the `:hover` sometimes work and sometimes not. It **seems that sometimes some other element is over the article** —which couldn't really be possible seeing that there are no more elements. There is really no need to add `z-index` (there's a class `.activo` which just comes up after clicking an article), and without it happens the same. Sometimes work, sometimes not…</p>

Please try on the [link to example](http://jsfiddle.net/Y7dTS/embedded/result/) and reload it a few times. This happens in Safari, Chrome and Firefox —seems to work a bit better in FF.

Just found out, that **when** I reload the page and while loading **I get fast to the elements with the mouse** —hover articles— then **it works** as expected. If I wait until it's loaded to get hover, it doesn't work.

In addition, there's a bit of jQuery to manage the following articles to the hovered one goes more to the right. I have to do it with JavaScript because they must find the place back after hover a brother element, and can't even use `margin-right` to the hovered one because they are absolute positioned elements —and they should be absolute because after click them, they cover the whole body.

```
$('article').hover(function (event) {
    $(this).nextAll('article').each(function () {
        izquierda = izquierda_original[$(this).attr('id')].izquierda + 360;
        $(this).css('left', izquierda + 'px');
    });
}, function (event) {
    $(this).nextAll('article').each(function () {
        izquierda = izquierda_original[$(this).attr('id')].izquierda;
        $(this).css('left', izquierda + 'px');
    });
}); 
```

`izquierda_original[]` is just an object containing the `left` original value of each element.

Thanks in advance.

**EDIT** I figure out finally that the problem is the `body` element. When the height of it arise the articles, I can't hover them. This is even more weird. It's like that `body` is hover they child elements.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:14:41.107

出于某种原因，body 标签覆盖了您的元素。

这是为我解决的问题。

首先`z-index`像这样在body标签中添加一个：

```
body{
z-index: 1;
position: relative;
} 
```

然后在该部分添加一个更高`z-index`的：

```
section{  
z-index: 2;
position: relative;
} 
```

这将保留您的背景并保持元素的功能。

# android - Error: The constructor ArrayAdapter (Startup, int, ArrayList ) is undefined

> ID：15597142
> 
> 赞同：1
> 
> 时间：2013-03-24T10:03:34.920
> 
> 标签：android

I want to create gridview in android which uses database but I am getting " The constructor ArrayAdapter(Startup, int, ArrayList) is undefined" error on "Arrayadapter adapter=new Arrayadapter.." line ....my code is as given below...please help me to solve it out.....thanks in advance

Startup.java activity file

```
public class Startup extends Activity {
    private GridView gridView;
    final static ArrayList<Contact> timetable = new ArrayList<Contact>();

    String response;
    WebAPIRequest web = new WebAPIRequest();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main);
    setContentView(R.layout.main);

    String url = "http://192.168.0.101/attendance/webservice/gettingTodaysLectures.php";
    new setd().execute(url);
}

public void displayTimeTable(String response) {

    String getAllData[] = response.split("<br>");

    Contact displaylec;
    for (int i = 0; i < getAllData.length - 1; i++) {
        String tempdata[] = getAllData[i].split(":");
        // tmepdata[0]=start time // tempdata[1]=end time //
        // tempdata[2]=semester
        // tempdata[3]=department // tempdata[4]=division //
        // tempdata[5]=subject
        // tempdata[6]=type // tempdata[7]=batch // tempdata[8]=classno
        displaylec = new Contact(tempdata[0], tempdata[1], tempdata[2],
                tempdata[3], tempdata[4], tempdata[5], tempdata[6],
                tempdata[7], tempdata[8]);

        timetable.add(displaylec);
        Log.i("All sem id", tempdata[0] + ":" + tempdata[1] + ":"
                + tempdata[2] + ":" + tempdata[3] + ":" + tempdata[4] + ":"
                + tempdata[5] + ":" + tempdata[6] + ":" + tempdata[7] + ":"
                + tempdata[8]);
        Toast.makeText(getApplicationContext(), tempdata[0], 1);
    }

    gridView = (GridView) findViewById(R.id.gridView1);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, timetable);

    gridView.setAdapter(adapter);

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            Toast.makeText(getApplicationContext(),
                    ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
        }
    });

}

public class setd extends AsyncTask<String, Void, Void> {
    ProgressDialog pd;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        // pd=new ProgressDialog(getApplicationContext());
        // pd.setTitle("Loading .....");
        // pd.setMessage("Inserting data");
        Log.i("ddd", "dd");
        pd = ProgressDialog.show(Startup.this, "Loading .....",
                "getting data");
    }

    @Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub
        response = web.performGet(params[0]);
        Log.i("response", response);
        Log.i("response Display Extraactivity", response);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        // TODO Auto-generated method stub
        super.onPostExecute(result);
        pd.cancel();
        // Main Logic Write here
        Log.i("RESPONSE : ", response.toString());
        displayTimeTable(response.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:11:21.047

你应该`ArrayAdapter`用`ArrayAdapter<Contact>(Startup, int, ArrayList<Contact>)`, 因为`ArrayAdapter`包含里面的模板`ArrayList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:17:26.300

问题是您试图将`Contact`对象列表传递给期望`String`列表的构造函数。在此处查看 android 文档：[通用 ArrayList 构造函数](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20java.util.List%3CT%3E%29)

你可以通过以下方式解决这个以太：

*   创建您自己的自定义适配器，该适配器接受一个联系人对象并将其传递给视图，这是一个很好的教程：[自定义 ArrayAdapter](http://www.vogella.com/articles/AndroidListView/article.html#adapterown_custom)
*   您可以将您的`Contact`对象转换为`String`等效对象并将新生成的列表传递给`ArrayAdapter`，代码应如下所示。

    ```
    List<String> stringList = new ArrayList<String>();
    for(Contact object : timetable){
       stringList.put("new object " + object.toString());
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, stringList); 
    ```

# actionscript-3 - How to check if an SWF file loaded (ActionScript)

> ID：15597144
> 
> 赞同：0
> 
> 时间：2013-03-24T10:03:46.900
> 
> 标签：actionscript-3, flash, actionscript

How do I check if an [SWF](http://en.wikipedia.org/wiki/SWF) file loaded?

I want to execute a script when an SWF file has finished loading,

```
root.addEventListener(Event.COMPLETE, onComplete);
root.addEventListener(ProgressEvent.PROGRESS, onProgress);

function onProgress(e:ProgressEvent):void
{
    trace("onProgress");
}

function onComplete(e:Event):void
{
    trace("onComplete");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:19:19.650

试试`root.loaderInfo.addEventListener(Event.COMPLETE, onComplete)`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:01:16.523

我通过将`dispatchEvent`加载的 SWF 文件发送到加载的 SWF 文件解决了这个问题：

*   在加载 SWF 文件中：加载完成后，执行`dispatchEvent(new Event("Bla-bla"));`

*   在加载的 SWF 文件中：`addEventListener("Bla-bla", someHandler);`

第一个 SWF 文件：

`var load:Loader = new Loader(new URLReauest("name of loaded swf"));` `load.addEventListener(Event.Complete, completeHandler);`

`function completeHandler(event:Event):void` `{` `var currentLoadedSWF:MovieClip = event.target.loader;` `currentLoader.dispatchEvent(new Event("Bla-Bla"))` `}`

在第二个 SWF 文件的构造函数中，输入以下代码：

```
addEventListener("Bla-Bla", someHandler) 
```

或者，您可以调用加载的 SWF 文件中的任何公共方法。

# clojure - Accessing a function bound to a var in clojure

> ID：15597148
> 
> 赞同：3
> 
> 时间：2013-03-24T10:04:02.550
> 
> 标签：clojure

So if I understand this correctly, when I write:

```
(defn foo [x] (+ (* (- x 3) 2) (- x 3))) 
```

`foo` gets bound to:

```
(fn [x] (+ (* (- x 3) 2) (- x 3))) 
```

How do I access the function from `foo`? My intention is to change something in the function and return a new function.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:06:52.843

如果要使用存储在 Var 中的函数值`foo`，只需编写`foo`，例如：

```
(def foo2 (comp - foo))
(foo 4) ;;=> 3
(foo2 4) ;;=> -3 
```

Vars 没有特殊的 deref 表示法：只需使用它们的名称，它们就会被解析为它们的绑定值。函数不是你改变的东西，但你可以从其他函数中构建函数，就像上面一样。

# javascript - How to clear previous text in the div?

> ID：15597152
> 
> 赞同：0
> 
> 时间：2013-03-24T10:04:55.677
> 
> 标签：javascript, jquery, html

using this script i can change the text in a div on click other text..i have four different text and a Div i want to change the text in div by clicking on other four text, its working properly but the problem is that i also show previous text when i click on next link, i want to clear previous text and show only new text..Please find the attach script and HTML and then help me , and let me know for further question.

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#changeText1").click(function() {
            $("#textBox1").html("My text is changed1!");
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#changeText").click(function() {
            $("#textBox").html("My text is changed!");
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#changeText2").click(function() {
            $("#textBox2").html("My text is changed!2");
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#changeText3").click(function() {
            $("#textBox3").html("My text is changed!3");
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#changeText5").click(function() {
            $("#textBox5").html("My text is changed5!");
        });
    });
</script> 
```

and this is html

```
<ul class="tabs">
    <li><a href="#" id="changeText">inclusive</a></li>
    <li><a href="#" id="changeText2">Hotel</a></li>
    <li><a href="#" id="changeText3">Car</a></li>
    <li class="end"><a href="#" id="changeText5">Cruise</a></li>
</ul>
<div class="tabs_cont">
    <div id="textBox3" style="color:#FFF"></div>
    <div id="textBox" style="color:#FFF"></div>
    <div id="textBox1" style="color:#FFF"></div>
    <div id="textBox2" style="color:#FFF"></div>
    <div id="textBox5" style="color:#FFF"></div>
</div>
<div id="textBox4" style="color:#FFF"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:22:02.120

您不需要使用单独的`script`标签`$(document).ready`来注册每个点击事件。这都可以一次完成。

更好的解决方案是`div`为所有选项卡使用一个，但如果您想保留所有 div，以下代码应该有助于解决问题：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#changeText1").click(function() {
        $('.tabs_cont div').empty();
        $("#textBox1").html("My text is changed1!");
    });

    $("#changeText").click(function() {
        $('.tabs_cont div').empty();
        $("#textBox").html("My text is changed!");
    });

    $("#changeText2").click(function() {
        $('.tabs_cont div').empty();
        $("#textBox2").html("My text is changed!2");
    });

    $("#changeText3").click(function() {
        $('.tabs_cont div').empty();
        $("#textBox3").html("My text is changed!3");
    });

    $("#changeText5").click(function() {
        $('.tabs_cont div').empty();
        $("#textBox5").html("My text is changed5!");
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:14:43.633

在设置新文本之前尝试清除元素：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#changeText2").click(function() {
            $("#textBox2").empty().html("My text is changed!2");
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:21:11.050

我将假设您没有理由拥有多个 div。当您声明您只想写入一个 div 时。所以问题是你正在写几个 div 而不是一个。如果这不是你想要的，请纠正我。

我还删除了你的几个脚本标签和文本框，因为它们是不必要的——至少在这个例子中是这样。

[**工作演示**](http://jsfiddle.net/2aFTY/)

**html:**

```
<ul class="tabs">
    <li><a href="#" id="changeText">inclusive</a></li>
    <li><a href="#" id="changeText2">Hotel</a></li>
    <li><a href="#" id="changeText3">Car</a></li>
    <li class="end"><a href="#" id="changeText5">Cruise</a></li>
</ul>
<div class="tabs_cont">
    <div id="textBox" ></div>
</div>
<div id="textBox4" style="color:#FFF"></div> 
```

**Javascript：**

```
$(document).ready(function() {
    $("#changeText").click(function() {
        $("#textBox").text("My text is changed!");
    });
    $("#changeText2").click(function() {
        $("#textBox").text("My text is changed!2");
    });
    $("#changeText3").click(function() {
        $("#textBox").text("My text is changed!3");
    });
    $("#changeText5").click(function() {
        $("#textBox").text("My text is changed5!");
    });
}); 
```

**编辑：**忘记保存JSFiddle ..现在这很愚蠢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:17:48.650

尝试这个 ：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#changeText1").click(function() {
            $("#textBox1").text("My text is changed1!");
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T10:23:17.773

我不是 100% 确定这是否是你想要的。但是请发表评论，我会更新它。这是一个智能选择结构，它取消了您在代码中创建的所有双峰。

尝试只使用一次就绪状态，它更干净：

**HTML**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>HTML</title>
    <link rel="stylesheet" href="main.css" type="text/css" />
    <script src="jquery.js" type="text/javascript"></script>
    <script src="main.js" type="text/javascript"></script>
</head>
<body>
    <ul class="tabs">
        <li><a href="#" id="changeText">inclusive</a></li>
        <li><a href="#" id="changeText2">Hotel</a></li>
        <li><a href="#" id="changeText3">Car</a></li>
        <li class="end"><a href="#" id="changeText5">Cruise</a></li>
    </ul>
    <div class="tabs_cont" style="background-color: black;">
        <div id="textBox3" style="color:#FFF">3</div>
        <div id="textBox" style="color:#FFF">0</div>
        <div id="textBox1" style="color:#FFF">1</div>
        <div id="textBox2" style="color:#FFF">2</div>
        <div id="textBox5" style="color:#FFF">5</div>
    </div>
    <div id="textBox4" style="color:#FFF"></div>
</body>
</html> 
```

**main.js**

```
'use strict';
$(document).ready(function(){
    $('.tabs [id^="changeText"]').click(function(){
        var index = $(this).attr('id').split('changeText')[1];
        var backup_html = $('.tabs_cont #textBox' + index).html();

        // These are all the textboxes you want to match
        $('.tabs_cont [id^="textBox"]').html(''); // Empty them (or something else)

        // This HTML selector is the same as the one you clicked "changeText"
        $('.tabs_cont #textBox' + index).html('My text has changed: ' + (index == 0 ? 0 : index) + ': ' + $(this).html());
    });
}); 
```

`style="background-color: black;"`在 HTML 中仅用于测试目的:)

***更新***

`main.js`根据OP 的要求，新的：

```
'use strict';
$(document).ready(function(){
    $('.tabs [id^="changeText"]').click(function(){
        var index = $(this).attr('id').split('changeText')[1];

        var new_html = 'My text has changed: ';

        switch(index) {
            case '':
                new_html += 'Text for 0';
                break;
            case '1':
                new_html += 'Text for 1';
                break;
            case '2':
                new_html += 'Text for 2';
                break;
            case '3':
                new_html += 'Text for 3';
                break;
            case '4':
                new_html += 'Text for 4';
                break;
            case '5':
                new_html += 'Text for 5';
                break;
        }

        // These are all the textboxes you want to match
        //$('.tabs_cont [id^="textBox"]').html(''); // Empty them (or something else)

        // This HTML selector is the same as the one you clicked "changeText"
        $('.tabs_cont #textBox' + index).html(new_html);
    });
}); 
```

**第二个变体，带有更清晰的地图选择器**

```
'use strict';
$(document).ready(function(){
    $('.tabs [id^="changeText"]').click(function(){
        var index = $(this).attr('id').split('changeText')[1];

        var new_html = {
            '' : 'Text for 0',
            '1' : 'Text for 1',
            '2' : 'Text for 2',
            '3' : 'Text for 3',
            '4' : 'Text for 4',
            '5' : 'Text for 5',
        };

        // These are all the textboxes you want to match
        //$('.tabs_cont [id^="textBox"]').html(''); // Empty them (or something else)

        // This HTML selector is the same as the one you clicked "changeText"
        $('.tabs_cont #textBox' + index).html('My text has changed: ' + new_html[index]);
    });
}); 
```

# linux - Porting 16-bit DOS x86 assembly to 32-bit Linux x86 assembly

> ID：15597155
> 
> 赞同：0
> 
> 时间：2013-03-24T10:05:30.863
> 
> 标签：linux, assembly, x86, dos, att

I found code in 80836 DOS assembly that I'd like to port to 32-bit Linux assembly, using AT&T syntax.

I found site that explains some differences but only about registers. EX:

1.  cmp al, 'A' -> cmp 'A', %al

So I got problems converting following code:

```
input:
    mov ah, 00h
    int 16h
    cmp ah, 1ch
    je exit

sub al, 30h

sub al, 37h

sub al, 57h

mov ah, 02h
mov dl, al
int 21h

        mov dl, 20h
        int 21h

exit:
        int 20h 
```

I am converting [this code](http://eradicus.blogsome.com/2006/08/13/hex-to-bin-converter-in-16-bit-dos-assembly/)

I think that:

1.  sub al, 57h ---> sub $0x57, %al and ETC (not sure)

The worst problem is with interrupts since in AT&T assembly it's like:

```
SYSCALL = 0X80
SYSEXIT = 1
EXIT_SUCCESS = 0
SYSREAD = 3
SYSWRITE = 4
STDIN = 0
STDOUT = 1 
```

And in DOS16, 16h? 20h? 21h? oh man, and even then int 20h acts as interrupt and as value (mov dl, 20h)? so confusing.

Can someone help me?

@EDIT I converted it like this, but I got segmentation fault error. I am almost sure it's about interrupts..

```
.data
.text
.global _start

_start:

input:
        movb $0x0,%ah
        int $0x16
        cmpb $0x1c,%ah
        je exit

number:
        cmpb $'0', %al
        jb input
        cmpb $'9', %al
        ja uppercase
        subb $0x30,%al
        call process
        jmp input

uppercase:
        cmpb $'A', %al
        jb input
        cmpb $'F', %al
        ja lowercase
        subb $0x37,%al
        call process
        jmp input

lowercase:
        cmpb $'a', %al
        jb input
        cmpb $'f', %al
        ja input
        subb $0x57,%al
        call process
        jmp input

loop input

process:
        movb $4,%ch
        movb $3,%cl
        movb %al,%bl

convert:
        movb %bl,%al
        rorb %cl,%al
        andb $01,%al
        addb $0x30,%al

        movb $0x2,%ah
        movb %al,%dl
        int $0x21

        decb %cl
        decb %ch
        jnz convert

        movb $0x20,%dl
        int $0x21
ret

exit:

        int $0x20 
```

Anyone?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:42:58.817

## 小问题

您的代码“转换”的主要问题可能是您似乎将一些想法与并不真正适用的术语“80836 程序集”和“at&t”联系起来。

尽管这可能只是命名约定的问题，但没有“80386 程序集”与“at&t”的区别，而是“intel”与“at&T 语法”的区别，因为**intel**语法和 at&t 语法都可用于描述 x86 汇编代码.

如果您使用的是 GNU 汇编器（我不知道任何其他使用 AT&T 语法而不是 intel 的 x86 汇编器），您可能只想使用`.intel_syntax`并保留参考资料中使用的 intel 语法。

```
.intel_syntax noprefix
; your code in intel syntax here
.att_syntax prefix
; code in at&t syntax here 
```

`.code16`如果您打算在实模式下使用它，请不要忘记切换到 16 位模式。

## 更大的问题

您的问题更大的问题似乎是您不仅要尝试**将**代码从使用“intel-syntax”转换为使用“at&t-syntax”，而且还要将其**移植**到a。另一种寻址方式和 b．另一个操作系统。

特别是您关于中断调用约定的问题使我假设您正在尝试将 16 位 DOS 代码移植到在 LINUX 机器上运行的某种 32 位代码。

仅仅通过简单地替换数字来“重用”给定的代码来执行系统调用是不可能的，因为涉及到不同的调用约定。

您可能尝试修复代码的事情包括使用系统调用读取而不是 BIOS 中断从标准输入读取

```
storage:
   .ascii " "

#  ... 

    movl $3, %eax      # syscall number 
                       # (check syscall.h to see if it's  3 on your system)
    movl $0, %ebx      # file descriptor (0 designating stdin)       
    movl $storage, %ecx
    movl $1, %edx      # number of chars to read
    int $0x80 
```

使用 DOS 系统调用机制 int 0x21 的代码必须另外使用类似的东西来修复

```
 movl $4, %eax      # syscall number write
    movl $0, %ebx      # file descriptor (1 designating stdout)       
    movl $storage, %ecx
    movl $1, %edx      # number of chars to write
    int $0x80 
```

最后一步应该是修复退出系统调用：

```
 movl $1, %eax      # syscall number exit
    movl $0, %ebx      # it doesn't hurt to set a reasonable exit code here.
    int $0x80 
```

## 要求的文档来源

*   关于 DOS 系统调用，请查看[http://en.wikipedia.org/wiki/MS-DOS_API](http://en.wikipedia.org/wiki/MS-DOS_API)应该有助于理解示例代码中的用途`int 0x20`和`int 0x21`用途。

*   Seraching BIOS 中断也维基百科是你的朋友：[http](http://en.wikipedia.org/wiki/Bios_interrupt) ://en.wikipedia.org/wiki/Bios_interrupt应该回答你的问题。

    在您的情况下，它`int 0x16`与`0`in `ah`- 因此：读取字符。

# redactor - Redactor: Make dropdown menu look like an actual dropdown

> ID：15597156
> 
> 赞同：1
> 
> 时间：2013-03-24T10:05:32.270
> 
> 标签：redactor

Imperavi's WYSIWYG jQuery editor - [Redactor](http://imperavi.com/) - is a wonderful piece of code with clear documentation. However in some cases it lacks configurability.

I am trying to add a dropdown menu. Their documentation demonstrates [how to do precisely this](http://imperavi.com/redactor/examples/dropdown/), but the end result is just a square button with an image. I would like to make the dropdown "button" look like an actual dropdown menu (like a selector). Would this be possible without any deep hacks?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:35:23.943

你检查过他们的一些插件吗？（如 FontSize、FontFamily 等）

[http://imperavi.com/redactor/docs/plugins/](http://imperavi.com/redactor/docs/plugins/)

- 我是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T06:13:16.380

创建按钮 css 或制作 Font Awesome 的图标：

```
<style type="text/css">
.redactor_toolbar li a.re-advanced {
    background-image: url(/img/advanced.png);
}
.redactor_toolbar li a.re-advanced:hover {
    background-image: url(/img/advanced-hover.png);
}
</style> 
```

创建插件：

```
if (!RedactorPlugins) var RedactorPlugins = {};

RedactorPlugins.advanced = {
    init: function ()
    {
        var dropdown = {};

        dropdown['point1'] = { title: 'Point 1', callback: this.point1callback };
        dropdown['point2'] = { title: 'Point 2', callback: this.point2callback };

        this.buttonAdd('advanced', 'Advanced', false, dropdown);
    },
    point1callback: function(buttonName, buttonDOM, buttonObj, e)
    {
        alert(buttonName);
    },
    point2callback: function(buttonName, buttonDOM, buttonObj, e)
    {
        alert(buttonName);
    }
}; 
```

使用插件调用 Redactor：

```
 $(function()
    {
        $('#redactor').redactor({
            plugins: ['advanced']
        });
    }); 
```

您可以在这里查看一个工作示例：http: [//imperavi.com/redactor/examples/dropdown/](http://imperavi.com/redactor/examples/dropdown/)

# css - CSS3不透明度渐变？

> ID：15597167
> 
> 赞同：66
> 
> 时间：2013-03-24T10:06:10.773
> 
> 标签：css

我正在寻找创建这样的效果[**，**](http://jsfiddle.net/x4gSG/310/)但我的网站有一个动态的`background-color`。请注意，此示例使用白色叠加层，它不适用于不同的背景。

```
p {
    width: 300px;
    overflow: hidden;
    height: 50px;
    line-height: 50px;
    position: relative;
}
p:after {
    content: "";
    width: 100px;
    height: 50px;
    position: absolute;
    top: 0;
    right: 0;
    background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,1));
} 
```

我希望做的是设置 CSS 不透明度渐变。[**这种**](http://jsfiddle.net/kthPT/16/)工作，但代码太乱了。看看第二个例子，我可以在 jQuery 中实现它，但是有没有办法完全在 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-25T21:02:34.680

你可以在 CSS 中做到这一点，但目前除了现代版本的 Chrome、Safari 和 Opera 之外的浏览器支持不多。Firefox 目前仅支持 SVG 蒙版。有关更多信息，请参阅[Caniuse](http://caniuse.com/#search=mask)结果。

CSS：

```
p {
    color: red;
    -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, 
    from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));
} 
```

诀窍是指定一个掩码，该掩码本身就是一个以不可见结尾的渐变（通过 alpha 值）

查看具有纯色背景的演示，但您可以将其更改为您想要的任何内容。

**[演示](http://jsfiddle.net/vals/uE6pr/2/)**

另请注意，所有常用的*图像*属性都可用于 mask-image

```
p  {
  color: red;
  font-size: 30px;
  -webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1), rgba(0,0,0,0)), linear-gradient(to right, rgba(0,0,0,1), rgba(0,0,0,0));
  -webkit-mask-size: 100% 50%;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: left top, left bottom;
  }

div {
    background-color: lightblue;
}
```

```
<div><p>text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text </p></div>
```

现在，Chrome、Firefox、Safari 和 Opera 支持另一种方法。

这个想法是使用

```
mix-blend-mode: hard-light; 
```

如果颜色为灰色，则提供透明度。然后，元素上的灰色叠加层创建透明度

```
div {
  background-color: lightblue;
}

p {
  color: red;
  overflow: hidden;
  position: relative;
  width: 200px;
  mix-blend-mode: hard-light;
}

p::after {
  position: absolute;
  content: "";
  left: 0px;
  top: 0px;
  height: 100%;
  width: 100%;
  background: linear-gradient(transparent, gray);
  pointer-events: none;
}
```

```
<div><p>text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text </p></div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T11:36:35.740

我认为从[**另一个问题链接到此处**](https://stackoverflow.com/q/12664132/1397351)的“混乱”第二种方法可能是唯一的纯 CSS 解决方案。

如果您正在考虑使用 JavaScript，那么这是我对问题的解决方案：

> ## [*演示：使用`canvas`元素淡化动画背景上的文本*](http://codepen.io/thebabydino/pen/lgtvE)
> 
> 这个想法是你的元素与文本和`canvas`元素是一个在另一个之上。您将文本保留在元素中（以便允许文本选择，这对于文本来说是不可能的`canvas` ），但使其完全透明（使用`rgba(0,0,0,0)`, 以使文本在 IE8 和更早版本中可见 - 那是因为您没有`RGBa`支持并且不`canvas`支持 IE8 及更早版本）。
> 
> 然后，您读取元素内的文本并使用相同的字体属性将其写在画布上，这样您在画布上写的每个字母都会覆盖元素中带有文本的相应字母。
> 
> 该`canvas`元素不支持多行文本，因此您必须将文本分解为单词，然后继续在测试行上添加单词，然后进行测量。如果测试线的宽度大于一条线的最大允许宽度（通过读取计算出的带有文本的元素的宽度来获得最大允许宽度），那么你将它写在画布上而不用添加最后一个单词，您将测试行重置为最后一个单词，并将写入下一行的 y 坐标增加一个行高（您也可以从元素与文本的计算样式中获得）。对于您编写的每一行，您还可以通过适当的步骤降低文本的不透明度（此步骤与每行的平均字符数成反比）。
> 
> 在这种情况下，你不能轻易做的是证明文本的合理性。它可以完成，但它变得有点复杂，这意味着您必须计算每个步骤的宽度并逐字而不是逐行编写文本。
> 
> 另外，请记住，如果您的文本容器在调整窗口大小时改变了宽度，那么您必须在每次调整大小时清除画布并在其上重新绘制文本。
> 
> 好的，代码：
> 
> **HTML**：
> 
> ```
> <article>
>   <h1>Interacting Spiral Galaxies NGC 2207/ IC 2163</h1>
>   <em class='timestamp'>February 4, 2004 09:00 AM</em>
>   <section class='article-content' id='art-cntnt'>
>     <canvas id='c' class='c'></canvas>In the direction of <!--and so on-->  
>   </section>
> </article> 
> ```
> 
> **CSS**：
> 
> ```
> html {
>   background: url(moving.jpg) 0 0;
>   background-size: 200%;
>   font: 100%/1.3 Verdana, sans-serif;
>   animation: ani 4s infinite linear;
> }
> article {
>   width: 50em; /* tweak this ;) */
>   padding: .5em;
>   margin: 0 auto;
> }
> .article-content {
>   position: relative;
>   color: rgba(0,0,0,0);
>   /* add slash at the end to check they superimpose *
>   color: rgba(255,0,0,.5);/**/
> }
> .c {
>   position: absolute;
>   z-index: -1;
>   top: 0; left: 0;
> }
> @keyframes ani { to { background-position: 100% 0; } } 
> ```
> 
> **JavaScript**：
> 
> ```
> var wrapText = function(ctxt, s, x, y, maxWidth, lineHeight) {
>   var words = s.split(' '), line = '', 
>       testLine, metrics, testWidth, alpha = 1, 
>       step = .8*maxWidth/ctxt.measureText(s).width;
> 
>   for(var n = 0; n < words.length; n++) {
>     testLine = line + words[n] + ' ';
>     metrics = ctxt.measureText(testLine);
>     testWidth = metrics.width;
>     if(testWidth > maxWidth) {
>       ctxt.fillStyle = 'rgba(0,0,0,'+alpha+')';
>       alpha  -= step;
>       ctxt.fillText(line, x, y);
>       line = words[n] + ' ';
>       y += lineHeight;
>     }
>     else line = testLine;
>   }
>   ctxt.fillStyle = 'rgba(0,0,0,'+alpha+')';
>   alpha  -= step;
>   ctxt.fillText(line, x, y);
>   return y + lineHeight;
> }
> 
> window.onload = function() {
>   var c = document.getElementById('c'), 
>       ac = document.getElementById('art-cntnt'), 
>       /* use currentStyle for IE9 */
>       styles = window.getComputedStyle(ac),
>       ctxt = c.getContext('2d'), 
>       w = parseInt(styles.width.split('px')[0], 10),
>       h = parseInt(styles.height.split('px')[0], 10),
>       maxWidth = w, 
>       lineHeight = parseInt(styles.lineHeight.split('px')[0], 10), 
>       x = 0, 
>       y = parseInt(styles.fontSize.split('px')[0], 10), 
>       text = ac.innerHTML.split('</canvas>')[1];
> 
>   c.width = w;
>   c.height = h;
>   ctxt.font = '1em Verdana, sans-serif';
>   wrapText(ctxt, text, x, y, maxWidth, lineHeight);
> }; 
> ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-14T09:23:15.090

除了使用[@vals](https://stackoverflow.com/a/15624692/2485717)回答的[css 掩码](https://drafts.fxtf.org/css-masking-1/#the-mask)外，您还可以使用透明渐变背景并设置为.`background-clip``text`

创建适当的渐变：

```
background: linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%); 
```

然后用文本剪辑背景：

```
background-clip: text;
color: transparent; 
```

## 演示

[https://jsfiddle.net/simonmysun/2h61Ljbn/4/](https://jsfiddle.net/simonmysun/2h61Ljbn/4/)

在 Windows 10 下的 Chrome 75 下测试。

## 支持的平台：

*   [https://caniuse.com/mdn-css_properties_background-clip_text](https://caniuse.com/mdn-css_properties_background-clip_text)
*   [https://caniuse.com/css-gradients](https://caniuse.com/css-gradients)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-23T06:57:52.000

我们可以通过css来做到这一点。

```
body {
  background: #000;
  background-image: linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(231, 231, 231, .3) 22.39%, rgba(209, 209, 209,  .3) 42.6%, rgba(182, 182, 182, .3) 79.19%, rgba(156, 156, 156, .3) 104.86%);

} 
```

# c# - 具有对象值和数据类型的链表

> ID：15597168
> 
> 赞同：1
> 
> 时间：2013-03-24T10:06:10.887
> 
> 标签：c#, casting, linked-list

实际上，我尝试将链表实现为一个大学项目。第一步，我编写了一个`ListElementBase`类和一些 ListElement 类，每个数据类型都从这个类继承。

在第二步中，我尝试编写一个更灵活的单一结构。该结构应将值保留为对象和值的数据类型，以便将值应转换为哪种数据类型的信息在对象内。

不知何故像这样：

```
private struct Element
{
    public Element Previous;
    public Element Next;

    public object Value;
    public ValueType Type;

    public Element(Element sPrevious, Element sNext, object sValue, ValueType sType)
    {
        Previous = sPrevious;
        Next = sNext;
        Value = sValue;
        Type = sType;
    }
} 
```

但我不明白，如何处理 DataType。我无法为 DataType 创建实例或调用构造函数，如`new Element(..., ..., ..., string)`.

我完全走错了路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:23:39.847

好的，您想要创建一个可以包含任何类型（和任何混合）对象的异构列表。这意味着泛型已经过时了。

**`object.GetType()`**

如果要自动确定传递给`Element`构造函数的对象的类型，可以这样做：

```
public Element(Element sPrevious, Element sNext, object sValue)
{
    Previous = sPrevious;
    Next = sNext;
    Value = sValue;
    Type = (sValue != null) ? sValue.GetType() : typeof(object);
} 
```

换句话说，您可以完全避免传递类型参数，而只需向对象询问即可。

这是可行的，因为所有对象都派生自`System.Object`，并且存在一种方法[`System.Object.GetType()`](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)。

但是，如果为 null，它将不起作用*，*`sValue`这就是为什么我检查 null 并将类型设置为`object`if `sValue`is null。

如果你想传入空对象并保持指定类型的能力（这会有点奇怪，但仍然......）那么你可以有另一种方法，你根本不指定对象，只是一个类型：

```
public Element(Element sPrevious, Element sNext, Type type)
{
    Previous = sPrevious;
    Next = sNext;
    Value = null;
    Type = type;
} 
```

不过，我质疑它的效用。

**`typeof()`**

您缺少的另一条信息是您可以`Type`使用`typeof()`运算符从类型名称中获取对象，例如：

```
Type t1 = typeof(string);
Type t2 = typeof(int); 
```

我不确定您将如何实际使用值和类型；我想你将不得不有很多“检查类型和转换”代码，我不确定这是一个好主意......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:20:52.707

使用泛型的双链表中元素的最简单和最天真的实现如下：

```
public class Element<T>
{
    public Element<T> Prev { get; set; }
    public Element<T> Next { get; set; }
    public T Value { get; set; }

    public Element(T value, Element<T> prev, Element<T> next)
    {
        Prev = prev;
        Next = next;
        Value = value;
    }
} 
```

`T`是一个类型参数，你可以指定任何你想要的。现在您可以省略`ValueType`，因为现在您可以获得一个值类型，例如`element.Value.GetType()`外部类实现和`typeof(T)`内部类实现。

要创建列表，请使用下一个代码段：

```
var now = DateTime.Now;
var first  = new Element<DateTime>(now, null, null);

var second = new Element<DateTime>(now.AddDays(1), first, null);
first.Next = second;

var third = new Element<DateTime>(now.AddDays(2), second, null);
second.Next = third; 
```

考虑使用方法创建一些工厂，这将创建您的对象。然后，您可以省略指定泛型参数，它们将从方法的使用中推导出（或*推断*）。例如：

```
public class Factory
{
   public static Element<T> Create<T>(T value, Element<T> prev, Element<T> next)
   {
        return new Element<T> (value, prev, next);
   }
} 
```

现在您可以创建如下元素：

```
var now = DateTime.Now;

var first  = Factory.Create(now, null, null);

var second = Factory.Create(now.AddDays(1), first, null);
first.Next = second;

var third = Factory.Create(now.AddDays(2), second, null);
second.Next = third; 
```

当您有许多不同的泛型参数时，这会派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:09:53.470

尝试使用泛型而不是手动转换和类型存储。

（当然，List 和 LinkedList 已经在 .Net 框架中实现了）

# php - 带有分数的 PHP 概率数组

> ID：15597170
> 
> 赞同：4
> 
> 时间：2013-03-24T10:06:28.313
> 
> 标签：php, math, random

我有以下数组：

```
public $percentage = array(
   0 => 20.30,
   1=> 19.96,
   2=> 14.15,
   3=> 45.59
); 
```

// 总和为 100%

我需要一个随机函数按值的百分比返回键，

例如：得到 0 的可能性是 20.30%，得到 2 的可能性是 14.15%，第一个用户得到 0，第二个用户得到 2。

请让我知道您建议我使用的功能是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T10:20:39.977

将百分比转换为累积概率，然后将其与随机数进行比较。

如果随机数属于某个类别，则输出结果。如果没有，请移动到下一个，直到找到一个。这允许您根据数组中规定的百分比概率输出一个数字。

```
$percentage = array(
   0 => 20.30,
   1=> 19.96,
   2=> 14.15,
   3=> 45.59
);
$random = mt_rand(0,10000)/100;
foreach ($percentage as $key => $value) {
    $accumulate += $value;
    if ($random <= $accumulate) {
        echo $key;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:16:43.457

```
$random_n = mt_rand(0,10000)/100;
while(true){
  if($random_n <= $percentage[0])
    echo 0; break;
  else if($random_n <= $percentage[1])
    echo 1; break;
  else if($random_n <= $percentage[2])
    echo 2; break;
  else if($random_n <= $percentage[3])
    echo 3; break;
  else
    $random_n = mt_rand(0,10000)/100; //generate a new random #
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T10:19:57.147

```
<?php
$percentage = $tmp = array(
   0 => 20.30,
   1=> 19.96,
   2=> 14.15,
   3=> 45.59
);

sort($tmp);

$rand = mt_rand(0,100);
foreach($tmp as $percent) {
    if($percent >= $rand) {
        echo array_search($percent,$percentage);
        die();
    }
}

echo (count($percentage) - 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:19:18.603

我会做类似的事情：

1.  取一个 1 到 10000 之间的随机数（因为你有四个有效数字）
2.  如果数字在 1 到 2030 之间，则为零，如果在 2031 和 (2031+1996) 之间，则为 1，以此类推。
3.  ...
4.  利润

# http - 清漆重定向

> ID：15597174
> 
> 赞同：3
> 
> 时间：2013-03-24T10:06:56.020
> 
> 标签：http, url, redirect, varnish

最近我从 PHP 平台迁移到基于 Java 的新系统。新网站有漂亮的网址，例如 -

[http://mysite.com/science/2013/03/22/universe-is-older-than-previously-thought](http://mysite.com/science/2013/03/22/universe-is-older-than-previously-thought)

旧网站的网址如 -mysite.com/details.php?cid=37&id=239411

对于搜索引擎结果，我们需要重定向所有这些包含*/details.php 的 URL？*到主页，说 urlredirect.com。我一直在查看这些示例[https://www.varnish-cache.org/trac/wiki/VCLExampleRedirectInVCL](https://www.varnish-cache.org/trac/wiki/VCLExampleRedirectInVCL)并在我的 Varnish 配置的 redirect.vcl 中提出以下内容。

在 vcl_recv 函数中 -

```
 if(req.url~ "^/details.php?$" ) {
 error 301 "Moved Temporarily";
  } 
```

但我很困惑 vcl_error 函数中应该有什么？目前是这样的——

```
 else if(obj.status == 301 && req.url~ "^/details.php?$"){
    set obj.http.Location = "http://bdnews24.com";
    return (deliver);
  } 
```

我觉得就这么简单？与做过这件事的人分享经验仍然很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-09T21:47:17.813

如果您想在 Varnish 4.0 中执行此操作，则执行方式有所改变

```
#default.vcl

sub vcl_recv {
  if (req.req.url~ "^/details.php?$") {
    return (synth (750, "")); #This throws a synthetic page so the request won't go to the backend
  }
}

sub vcl_synth {
  if (resp.status == 750) {
    set resp.status = 301;
    set resp.http.Location = "http://bdnews24.com";
    return(deliver);
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T10:36:17.273

最好创建一个自定义错误代码，然后将重定向 URL 发送到那里，而不必在 vcl_error 中重复自己。一个简短的例子：

在 vcl_recv 中：

```
set req.http.x-Redir-Url = "http://newdomain.com" + req.url; 
error 750 req.http.x-Redir-Url; 
```

在 vcl_error 中：

```
if (obj.status == 750) {
    set obj.http.Location = obj.response;
    set obj.status = 301;
    return(deliver);
} 
```

# scala - Akka演员并发问题

> ID：15597178
> 
> 赞同：2
> 
> 时间：2013-03-24T10:07:46.173
> 
> 标签：scala, akka, actor

假设我有三个 Actor 相互通信：ActorControl、ActorA、ActorB。

ActorA 和 ActorB 与 ActorControl 通信。他们收到的消息大多不同，但他们也有一个相同的消息 X。当他们得到 X 时，他们都需要执行功能 Y。

为了避免重复代码，我取出函数 Y 来打包名为 common 的对象。

在这种情况下，ActorA 和 ActorB 可能同时调用 common.Y。

我的问题是这种方式是否破坏了演员的并发性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:11:09.430

您可以跨参与者共享代码，但不能共享数据。如果您的函数是纯函数（无状态且没有副作用），则根本没有问题。

这里有些例子：

```
object Helper {

  // Safe
  def incrementPure( total: Int, i: Int ) = total + i

  //Unsafe
  private var total = 0
  def incrementStateful( i: Int ) = { total += i; total }

  //Unsafe
  def incrementSideEffect( i: Int ) = {
    val total = readCurrentTotal()
    val total2 = total + i
    saveCurrentTotal( total2 )
    total2
  }

} 
```

在最后两个函数中，您应该提供某种同步。但是，如果您依赖并行性，这可能会影响性能。

# asp-classic - 沙盒测试，没有收到任何通知

> ID：15597179
> 
> 赞同：0
> 
> 时间：2013-03-24T10:07:56.477
> 
> 标签：asp-classic, paypal-sandbox

我正在尝试在旧的经典 asp 网站上安装 PayPal，但我在使用沙盒进行测试时遇到问题。

我可以进行被接受的付款，但我在我的 notify.asp 上看不到任何东西，它应该告诉我销售是否可以。我想知道我是否在此页面上使用好地址进行测试，我的代码知道 PayPal 的答案状态是什么：

' 支付宝验证

```
set objHttp = Server.CreateObject("Msxml2.ServerXMLHTTP")

if err.number <> 0 then set objHttp = Server.CreateObject("Microsoft.XMLHTTP")

str = Request.Form & "&cmd=_notify-validate"

objHttp.open "POST", "https://www.sandbox.paypal.com/cgi-bin/webscr", false

objHttp.setRequestHeader "Content-type", "application/x-www-form-urlencoded"

objHttp.Send str

if objHttp.status <> 200 then
    set objHttp = nothing
    Response.Redirect "error.asp"
end if

ret = objHttp.responseText
set objHttp = nothing

' Check notification validation
if (ret = "VERIFIED") then
     'payment is ok I write my database to confirm and send a email telling ok
     else
     'payment not ok I send a mail telling not ok
     end if 
```

我的错误在哪里，因为我没有收到任何邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:12:36.420

您将启用即时付款通知

通过两种方法

1）在商户账户 > 个人资料 > 我的销售工具 > 即时付款通知。

2）您还可以在每笔交易的基础上设置IPN URL，在这种情况下，您不需要在您的个人资料中设置它，通过设置

```
<input type="hidden" name="notify_url" value="http://yoursitename/notify.asp"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:33:18.477

我已经建立了一个与 PayPal 挂钩的 CMS。如果您认为通过我的代码可能会找到线索，这里是那些压缩的 asp 文件的链接： [http ://www.oceanmedia.net/files/PayPal.zip](http://www.oceanmedia.net/files/PayPal.zip)

# c++ - C++ (windows) 的 grep 或 awk 脚本解析库

> ID：15597182
> 
> 赞同：0
> 
> 时间：2013-03-24T10:08:09.930
> 
> 标签：c++, windows, parsing, awk, grep

我有兴趣为我正在做的事情编写一种思想组织者/伪数据库的个人程序，我可以在学习更多关于 C++ 的同时根据自己的需要进行定制。我主要在windows系统上操作，但一直在linux环境下工作，一直在学习使用grep和awk以及一些非常方便的实用程序。我想使用 grep 和 awk 样式的命令，并且我想知道在哪里可以找到用于解析它们的库（如果存在）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:17:22.607

如果你真的想的话，你可以在 Windows 上的 Cygwin 或 Mingw 下使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T13:32:23.073

我制作了一个可在 MinGW64 下使用的有限“grep 库”和一个用于 Visual Studio 的 DLL。它只计算比赛。

[在这里](https://ln.sync.com/dl/7c72e5840/gfnya6ma-ajndffi6-auq2w3nb-dkf9vvgj)得到它。

它甚至支持线程。包括一个例子。

`grep`是超不可重入的。它带有大量的状态，所以这是一个超级丑陋的黑客。唯一的优点是它**有效**。经测试。12个线程，百万行，没问题。

我必须得到`grep`权力。没有什么能比得上速度！

我将 main() 替换为两个入口点，它们接受字符串数组或模式文件（后者根本没有经过测试！使用`grep_keys()`）。

根据我所见，使 grep 成为一个干净的库，或者将其移植到 WinAPI 几乎是完全重写。

同样，这是一个黑客，所以请不要发表评论。相反，要高效并清理它，或者要求 grep 开发人员将其变成一个库。那些家伙正在做某事。`grep`属于自己的联盟​​。

# javascript - 使用 Spotify 框架 API

> ID：15597183
> 
> 赞同：0
> 
> 时间：2013-03-24T10:08:41.837
> 
> 标签：javascript, frameworks, spotify

这可能是我的错，但我无法运行 Spotify 的 Framework Api 中的类

我以用户类为例（[https://developer.spotify.com/technologies/apps/docs/preview/api/api-models-user.html](https://developer.spotify.com/technologies/apps/docs/preview/api/api-models-user.html)）

```
$(function() {
   var sp = getSpotifyApi();
   sp.require(['$api/models'], function(models) {
       var user = models.User.currentUser;
       console.log(user);
   });
 });

// Uncaught TypeError: Object $api/models has no method 'match' 
```

或者

```
$ (function() {
  var sp = getSpotifyApi();
  var models = sp.require('$api/models');
  models.User.fromURI('spotify:user:1167149818', function(user) {
      console.log(user);
  });

});
// Uncaught TypeError: undefined is not a function $api/script/models.js: 2142 
```

不适合我。

但我注意到这个 API ( [https://developer.spotify.com/technologies/apps/docs/](https://developer.spotify.com/technologies/apps/docs/) ) 中的类和方法有效！所以我想我错过了一些东西。

你能清除我的思绪吗？谢谢！

**编辑** 根据文档：“是否应该只调用一个 require 模块，并且它应该在顶层（而不是在另一个函数内）。”

我试图将所有代码放在函数之外，但结果没有改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:49:23.353

答案很简单，可能您使用的是旧的 0.x API。要使用新的`"require(['blah'])`API，您必须切换到 1.x API，您可以在此处找到一个功能示例：[https ://github.com/spotify/apps-tutorial/tree/1.0](https://github.com/spotify/apps-tutorial/tree/1.0)

试试看，我很确定它会起作用:)

**API调用示例**：

```
require(['$api/models'],function(models){
    console.log(models.session.user)
}); 
```

# codeigniter - 如何像素化图像？

> ID：15597186
> 
> 赞同：2
> 
> 时间：2013-03-24T10:09:24.713
> 
> 标签：codeigniter, image-processing

我对图像处理真的很陌生。实际上我应该做的是将图像转换为像素化形式的图像。Bellow是示例示例的输入和输出；

输入

![在此处输入图像描述](../Images/f42f4645820ad058096222f2abfeb7af.png)

输出

![在此处输入图像描述](../Images/4836253c6bbfe530be2ad10be6d054dd.png)

所以，如果有一些好的 JavaScript 或动作脚本图像处理教程，请告诉我。这将在后期使用 PHP 框架 codeigniter 实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:36:03.983

对于简单的像素化过滤器，您可以尝试将图像划分为 k×k 像素的块（大的结果像素），然后将每个块中的所有像素替换为该块中像素的平均值。

# django - 在 Django 1.5 自定义用户模型中使用电子邮件作为用户名字段导致 FieldError

> ID：15597188
> 
> 赞同：24
> 
> 时间：2013-03-24T10:09:57.513
> 
> 标签：django, django-models, django-1.5

我想使用电子邮件字段作为自定义用户模型的用户名字段。我有以下自定义用户模型继承 Django 的 AbstractUser 模型：

```
class CustomUser(AbstractUser):
    ....
    email = models.EmailField(max_length=255, unique=True)

    USERNAME_FIELD = 'email' 
```

但是当我跑步时

> python manage.py sql myapp

我收到以下错误：

> FieldError：类“CustomUser”中的本地字段“email”与基类“AbstractUser”中名称相似的字段冲突

我首先包含我自己的电子邮件字段的原因是为其添加`unique=True`选项。否则我得到：

> myapp.customuser：USERNAME_FIELD 必须是唯一的。将 unique=True 添加到字段参数。

现在，关于这个： [https](https://docs.djangoproject.com/en/1.5/topics/db/models/#field-name-hiding-is-not-permitted)
://docs.djangoproject.com/en/1.5/topics/db/models/#field-name-hiding-is-not-permitted 我怎样**才能**做到这一点？（然后将字段命名为“user_email”或类似名称）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-25T00:30:56.997

伊恩，非常感谢你的聪明回应：）

但是，我已经为我“修补”了一个解决方案。

由于`AbstractUser`还有一个`username`对我来说完全不需要的领域，
我决定创建我的“自己的” `AbstractUser`。

通过子类化`AbstractBaseUser`，`PermissionsMixin`我保留了大部分 User 模型的内置方法，而无需添加任何代码。

我还利用这个机会创建了一个自定义`Manager`来消除在 `username`现场的使用：

```
from django.contrib.auth.models import AbstractBaseUser, PermissionsMixin, BaseUserManager

class CustomUser(AbstractBaseUser, PermissionsMixin):
     ....
     email = models.EmailField(max_length=255, unique=True)
     first_name = ...
     last_name = ...
     is_active = ...
     is_staff = ...
     ....

     objects = CustomUserManager()

     USERNAME_FIELD = 'email'

class CustomUserManager(BaseUserManager):
     def create_user(self, email, password=None, **extra_fields):
          .....

     def create_superuser(self, email, password, **extra_fields):
          ..... 
```

这个解决方案确实会导致重复一些 Django 的内置代码（主要是已经存在的模型字段，`AbstractUser`例如“first_name”、“last_name”等），但也会导致更清晰的用户对象和数据库表中的重复。

遗憾的是 1.5 中引入的 flexibily 不能用于在所有现有约束下实际**创建**`USERNAME_FIELD`灵活的 User 模型。

 **编辑：官方文档中有一个全面的工作示例：[https ://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-03T17:40:49.237

如果您的真正目标是唯一的“电子邮件”值，而忽略“用户名”值，那么您可以：

*   填写“用户名”，例如`sha256(user.email).hexdigest()[:30]`
*   以这种方式添加唯一性：

    ```
    class User(AbstractUser):
        class Meta:
            unique_together = ('email', ) 
    ```

这导致：

```
CREATE TABLE "myapp_user" (
    ...
    "email" varchar(75) NOT NULL,
    UNIQUE ("email")
) 
```

按预期工作，并且非常简单。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-24T20:50:49.717

您可以编辑您的`CustomUser`以将`email`字段属性更改为`unique=True`.

将其添加到自定义用户类的末尾，如下所示：

```
class CustomUser(AbstractUser):
    ...
    USERNAME_FIELD = 'email'
    ...
CustomUser._meta.get_field_by_name('email')[0]._unique=True 
```

请注意，我们正在更改`_unique`，而不是`unique`因为后者是简单的`@property`.

这是一个黑客，我很想听到任何“官方”的答案来解决这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-24T23:48:44.107

使用来自官方网站的示例：

[https://docs.djangoproject.com/en/1.7/topics/auth/customizing/#a-full-example](https://docs.djangoproject.com/en/1.7/topics/auth/customizing/#a-full-example)

> 这是一个符合管理员要求的自定义用户应用程序的示例。此用户模型使用电子邮件地址作为用户名，并具有所需的出生日期；除了用户帐户上的简单管理标志外，它不提供权限检查。该模型将与所有内置的身份验证表单和视图兼容，除了用户创建表单。此示例说明了大多数组件如何协同工作，但并非旨在直接复制到项目中以供生产使用。**

# android - 带有加载器的 Android SimpleCursorTreeAdapter

> ID：15597191
> 
> 赞同：1
> 
> 时间：2013-03-24T10:10:39.330
> 
> 标签：android, expandablelistview, simplecursoradapter

我正在使用`Loader`with`SimpleCursorTreeAdapter` 从数据库中获取数据并将它们显示在 ExpendableListView 内的不同组中。

我的困境是我应该采取哪种方法：

1.  为 ExpendableListView 中的每个组创建加载程序
2.  只创建一个加载器并自己处理逻辑

你有什么建议？

# jakarta-ee - OS X 10.8 上的 Java EE 安装目录在哪里？

> ID：15597197
> 
> 赞同：0
> 
> 时间：2013-03-24T10:10:53.897
> 
> 标签：jakarta-ee, installation, osx-mountain-lion

Java EE安装后如何找到安装目录？

我`JAVA_HOME`的是空的。我正在使用*Mac OS X Mountain Lion*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:36:09.750

试试这个命令来检查你是否找到它：

```
ls -l /Library/Java/JavaVirtualMachines 
```

可能会使用其他路径，但您可能会在该路径上找到 jdk。如果没有，你可以试试这个：

```
ls -l /System/Library/Java/JavaVirtualMachines 
```

# c++ - C++ 测试 - 符号位 1 是否总是表示负数？

> ID：15597198
> 
> 赞同：12
> 
> 时间：2013-03-24T10:10:59.100
> 
> 标签：c++, number-formatting

我刚刚参加了一个 C++ 测试，但我错误地回答了以下问题：

**问：以下程序的输出是什么？**

```
#include <iostream>
#include <stdint.h>

using namespace std;

int main() {
    int a = 0;
    for (int8_t i = 1; i > 0; i <<= 1)
        a++;
    cout << a;
    return 0;
} 
```

有以下答案可供选择

*   8
*   7
*   未定义的行为
*   编译错误

“*正确*”的答案是 7。如果答案中有“实现定义的行为”，我会选择那个，所以我选择了最接近的未定义行为。我知道在符号和幅度、1 的补码和 2 的补码中，答案将是 7。但是 C++ 标准理论上不允许任何其他数字表示吗？例如符号和大小，但 0 表示负数？

我是否正确，因为这个问题的真正正确答案应该是实施定义的行为，如果不是，您能否解释一下为什么答案是 7 而不管实施如何？

我阅读了对该问题的评论，最初的类型似乎`a`是 char，这显然引起了很多关于是否`char`已签名的投诉，因此测试集将其更改为 int8_t。作为一个额外的问题，是`<stdint.h>`C++ 的一部分吗？O_O

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-24T10:28:51.687

由于不同的原因，我会说它是未定义的（而不是实现定义的）。

从 5.8:3

> 的值为`E1 << E2`E1 左移 E2 位位置；空出的位用零填充。如果 E1 具有无符号类型，则结果的值为 E1 × 2 ^(E2) ，比结果类型中可表示的最大值多模一减少。否则，如果 E1 具有带符号类型和非负值，并且 E1 × 2 ^(E2)在结果类型中是可表示的，那么这就是结果值；**否则，行为是 undefined**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T10:21:11.627

如果实现提供了 optional `int8_t`，那么答案应该是正确的，来自C++11 引用的关于 stdint的[C99 草案；](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)

> 7.18.1.1 精确宽度整数类型
> 
> typedef 名称 intN_t 指定宽度为 N、无填充位和**二进制补码表示的**有符号整数类型。因此，int8_t 表示宽度正好为 8 位的有符号整数类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T11:34:14.117

既然直接的问题得到了回答，我将回答额外的问题：`<stdint.h>`是一个 C 头文件，它在 C++ 中可用。但是，请改用现代 C++ 标头[`<cstdint>`](http://en.cppreference.com/w/cpp/header/cstdint)。

# objective-c - 在 UITableView 中检索 UITextField 数据

> ID：15597210
> 
> 赞同：1
> 
> 时间：2013-03-24T10:12:10.200
> 
> 标签：objective-c, uitableview, tags, uitextfield

我想在我的 UITextField 中检索输入的数据并将其分配给一个参数。我正在尝试将标签分配给文本字段，但标签都变为 0。

编码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString * defaultCellId = @"DefaultCell";
    static NSString * fieldCellId = @"FieldCell";
    static NSString * pictureCellId = @"PictureCell";

    DefaultCell *defaultCell = [_tableView dequeueReusableCellWithIdentifier:defaultCellId];
    FieldCell *fieldCell = [_tableView dequeueReusableCellWithIdentifier:fieldCellId];
    PictureCell *pictureCell = [_tableView dequeueReusableCellWithIdentifier:pictureCellId];

    if (indexPath.section == 1) {

        if (fieldCell == nil) {
            fieldCell = [[FieldCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:fieldCellId];
        }

        fieldCell.field.tag = indexPath.row + 1; //**THIS LINE**

        if (indexPath.row == 0)
            fieldCell.label.text = @"Namn";
        if (indexPath.row == 1)
            fieldCell.label.text = @"E-post";
        if (indexPath.row == 2)
            fieldCell.label.text = @"Telefon";
        return fieldCell;

    } else if (indexPath.section == 2) {

        if (defaultCell == nil) {
            defaultCell = [[DefaultCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:defaultCellId];
        }
        defaultCell.label.text = @"Plats";
        return defaultCell;

    } else if(indexPath.section == 3) {

        if (fieldCell == nil) {
            fieldCell = [[FieldCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:fieldCellId];
        }
        if(indexPath.row == 0)
            fieldCell.label.text = @"Titel";
        if(indexPath.row == 1)
            fieldCell.label.text = @"Text";
        return fieldCell;

    } else if(indexPath.section == 4) {

        if (pictureCell == nil) {
            pictureCell = [[PictureCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:pictureCellId];
        }
        pictureCell.label.text = @"Bild";
        return pictureCell;

    } else {

        if (defaultCell == nil) {
            defaultCell = [[DefaultCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:defaultCellId];
        }
        defaultCell.label.text = @"Lägg upp annons";
        return defaultCell;
    }
} 
```

在我想要的 textFieldDidEndEditing 方法中是这样的。

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

    if(textField.tag == 1)
        NSString *title = textField.text;
    if(textField.tag == 2)
        NSString *phone == textField.text;
} 
```

感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:27:10.450

对于带有多个 UITextField 的表格视图，我绝对推荐免费的 Sensible TableView 框架。在您的情况下，框架将自动从您的对象的属性创建字段，然后它还将根据用户在那里输入的任何内容自动设置它们的值。我觉得它真的很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:36:52.973

不要使用三个不同的自定义单元格，而是使用一个包含所有三个组件的单元格。并在 cellForRowAtIndexPath 方法中创建单元格时分配标签号

```
CueTableCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"CueTableCell XibName" owner:self options:nil];
    // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
    cell = [array objectAtIndex:0];

    // Set tag to textField here and implement Delegate method of it to read value
    [cell.textField setTag:indexPath.row];
} 
```

# php - 将用户友好的消息返回到视图

> ID：15597215
> 
> 赞同：0
> 
> 时间：2013-03-24T10:13:03.493
> 
> 标签：php, oop, model-view-controller

这是用户如何登录我的应用程序的摘要（直到验证数据）：

1.  提交登录表单。

2.  路由器找出用户试图去的地方。

3.  正确`Controller`初始化。

4.  `RecognitionService`启动并运行该方法`login()`。

5.  在该`login()`方法中，我在我的`User`域对象中设置了提供的用户名和密码。

6.  我的`User`域对象将通过检查用户名和密码的类型、长度、格式等来检查用户名和密码是否有效。

所有这一切都很好，除非输入的用户名包含无效字符，然后以`View`整洁的方式从我的域对象中获取错误消息。

目前，我让我的域对象将消息（实际上是消息的数组键）返回给`RecognitionService`它，然后保留消息数组键，然后在`View`我从中检索消息数组键`RecognitionService`并使用它来显示正确的信息，但我觉得有更好的方法，有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:28:03.793

控制器和当前视图应该共享同一个工厂来实例化服务，这样可以确保每个服务只初始化一次。

从控制器：

```
public function postLogin( $request )
{
    $recognition = $this->serviceFactory->create('Recognition');
    $recognition->authenticate( $request->getParameter('username'),
                                $request->getParameter('password') );
} 
```

从视图：

```
public function login()
{
    $recognition = $this->serviceFactory->create('Recognition');
    if ( $recognition->hasAuthenticationError() )
    {
        header('Location: /login');
    }

    if ( $recognition->hasChangedState() ) //was POST, PUT or DELETE call
    {
        header('Location: ./');
    }
}

public function render()
{
    // .. make the html/json/whatever
} 
```

像这样的东西..那是我的 2 美分。老实说，如何实现视图完全取决于您。

# animation - 从 Matlab 的图中打印一堆动画帧

> ID：15597218
> 
> 赞同：0
> 
> 时间：2013-03-24T10:13:35.457
> 
> 标签：animation, printing, export, matlab-figure

我有一大堆图像堆叠在一个 Matlab 图形中（例如动画帧），我想在我的打印机上打印它。我不能直接从我的图形窗口打印它，因为 Matlab 的打印功能允许我在一张纸上打印整个图形。然后我尝试以某种图像格式导出它并通过外部软件打印它。我将我的身材导出到`.jpeg`格式，生成的图像非常小，我不知道如何使它更大，因为没有缩放选项（如果我没记错的话，唯一的可能是在导出之前缩放图形窗口，例如最大可能的 jpeg 文件也将很少）。我的问题是如何从 Matlab 图形的窗口中打印如此高的图像在分开的纸上，以便用户可以指定子纸上的图像划分？如果不能直接从 Matlab 中实现，那么通过外部软件最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:32:26.967

一些想法：

*   根据您生成这些图像的方式，您可以使用该`print`功能在创建时打印每个图像。
*   您可以在使用 `set(gcf,'Position',[0,0,560,900]) 将图像导出为 jpeg 之前设置图像的大小

# jquery - 使用 jquery 在 Drupal 中显示/隐藏菜单

> ID：15597221
> 
> 赞同：0
> 
> 时间：2013-03-24T10:13:50.460
> 
> 标签：jquery, drupal, menu

我有一个 ctools 内容类型插件，其中包含一个模板文件，其中包含以下 html：

```
<a id="blah">Click me</a>
<p class="green-button"><a href="#">Read the blog</a></p>
<ul class="buying-dropdown">

      <li class="first amazon"><a href="#">paperback</a></li>
      <li class="signed"><a href="#">Signed edition</a></li>
      <li class="kindle"><a href="#">kindle edition</a></li>
      <li class="hardback"><a href="#">hardback edition</a></li>
      <li class="last postcard"><a href="#">postcard edition</a></li>
</ul> 
```

我试图简单地在 p 按钮的鼠标悬停时显示 ul，在悬停期间保持状态并选择不同的子 li，然后在鼠标悬停时消失。

正在调用 javascript 文件，就好像我在控制台中查看然后控制台正在写入“调用”。但是，我简单的“点击我”按钮测试不起作用。我还尝试使用菜单实现主要目标（按照本教程[http://www.queness.com/preview/1047/easy-to-style-jquery-drop-down-menu-tutorial](http://www.queness.com/preview/1047/easy-to-style-jquery-drop-down-menu-tutorial)），但似乎我的脚本没有被调用。任何帮助表示赞赏。

```
(function ($, Drupal, window, document, undefined) {
    console.log('called');
    $('#blah').click(function() { console.log('clickity click')});
    //when someone mouseovers the buy book button
    //the menu will show (it is hidden by default  
    //the menu will stay open whilst hovering over   
    //on mouseout the menu disappears
})(jQuery, Drupal, this, this.document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:46:51.830

这就是解决方案。最初[在 Drupal 7 中使用 JQuery上回答](https://stackoverflow.com/questions/4681309/using-jquery-in-drupal-7)

```
 (function ($) {
    Drupal.behaviors.YOURTHEMENAME = {
    attach: function(context, settings) {

     console.log('called');
        $('#blah').click(function() { console.log('clickity click')});
        //when someone mouseovers the buy book button
        //the menu will show (it is hidden by default  
        //the menu will stay open whilst hovering over   
        //on mouseout the menu disappears
    }

    };
    })(jQuery); 
```

# c++ - Win32 .EXE 格式损害知识产权

> ID：15597222
> 
> 赞同：-3
> 
> 时间：2013-03-24T10:14:02.923
> 
> 标签：c++, winapi, obfuscation

我们制作了一个封闭源代码的 C++ Native Win32 应用程序。我们希望保护我们的知识产权，我们担心竞争对手会检查我们的 .exe 文件并识别我们使用了哪些 Win32 功能，并从中了解我们使用了哪些技术。对于有经验的人，您可以很容易地找出我们用于端口管理的主要方法。

如何检查我们的 .exe 的示例： ![](../Images/f93a238b3a7091c2d1454b0214975c86.png)

*   PE文件/.exe这样公开声明Win32功能是否正常？
*   有没有办法不在 .exe 中明确说明 Win32 函数（如 utorrent）？
*   也许我们可以将 Visual Studio 2010 配置为不明确声明功能？
*   是我们唯一的混淆解决方案还是第三方应用程序可以打包/加密我们的 .exe

当我检查[utorrent.exe](https://stackoverflow.com/questions/1021210/programming-slim-c-programs-like-utorrent-for-windows)时，我注意到 .exe 中没有 Win32 函数。而且我知道 Utorrent 被开发为轻量级的，是封闭源代码并用 C++ 开发的（虽然不确定是否使用了本机 Win32）——这与我们的应用程序类似。如果您检查 Chrome.exe，您可以看到所有 Win32 函数都明确说明，就像在我们的 .exe 中一样，我还知道 Chrome 是轻量级的，使用 C++ 并使用本机 WinAPI 并且是开源的，这与我们的非常相似应用。这是我们要避免的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T10:17:39.170

底线是没有办法保护第三方不知道你的程序做了什么。你的程序可以被调试。如果计算机可以执行它，那么第三方可以对其进行逆向工程。

我相信 utorrent 使用图像打包程序，这就是为什么您不能轻松检查其导入的原因。但是您需要做的就是检查解压后的图像，所有内容都会显示出来。

# java - 按字母顺序排列给定字符串中的单词

> ID：15597223
> 
> 赞同：1
> 
> 时间：2013-03-24T10:14:13.223
> 
> 标签：java

我只是想写一个代码来按字母顺序排列字符串中的单词..但是每当我运行它时，它就会进入一个无限循环..我无法弄清楚到底发生了什么..有人能帮我吗？ .. 下面我附上了我的代码。

```
public class AscendString {
    String s=new String();

    public AscendString(String x)
    {
        s=x.trim();
    }

    public int NoWords()
    {
        int i=0;
        String s1=new String();
        s1=s;
        while(s1.length() > 0)
        {   i++;
            int j=s1.indexOf(' ');
            if(j>0)
            {
                s1.substring(j+1);
                s1=s1.trim();
            }
            else
            s1="";
        }
        return i;
    }

    public void Ascend()
    {
        String str[]=new String[NoWords()];
        String s1=new String();
        s1=s;
        int i=0;
        while(s1.length() > 0)
        {
            int j=s1.indexOf(' ');
            if(j>0)
            {
                str[i]=s1.substring(0,j) ;
                s1=s1.substring(j+1);
                s1=s1.trim();
                i++;
            }
            else
            {
                str[i]=s1;
                s1="";
            }
        }
        for(int j=0;j < str.length-1;j++)
        {
            for(int k=0;k < str.length-1-j;k++)
            if(str[k].length() > str[k+1].length())
            {String temp=str[k];
                str[k]=str[k+1];
                str[k+1]=temp;
            }
        }
        String str1="";
        for(int n=0;n < str.length;n++)
        str1=str1+str[n] +" " ;
        System.out.println("The String in Alphabetic Order is: "+str1);
    }

    public static void main(String args[])
    {
        AscendString exmpl=new AscendString("I Love Java Programming");
        exmpl.Ascend();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:18:39.913

你为什么要这么难？

```
String exmpl=new String("I Love Java Programming");  
String[] parts = exmpl.split("\\s+");   
Arrays.sort(parts);  
StringBuilder sb = new StringBuilder();  
for(String s:parts){  
   sb.append(s);  
   sb.append(" ");  
}  

String sorted = sb.toString.trim(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T10:16:04.677

尝试：

```
s1 = s1.substring(j+1); 
```

`substring`返回子字符串，不改变字符串。所以这个循环：

```
 while(s1.length() > 0)
    {   i++;
        int j=s1.indexOf(' ');
        if(j>0)
        {
            s1.substring(j+1);
            s1=s1.trim();
        }
        else
        s1="";
    } 
```

永远去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:28:38.803

1.  从来没有任何理由打电话`new String(...)`。
2.  标点符号应该重要吗？
3.  重复的单词怎么办？
4.  你想让字符串排序关心大小写吗？你对“一个人，一个计划，一条运河，巴拿马”有什么期待？“一个巴拿马。一个运河人，计划，”

适应 Cratylus 的回答，您可以将正则表达式更改为`\\W+`. 你会在非单词成分的运行中分裂。然后，了解`Collator`和`CollationKey`。您可能需要不区分大小写的搜索。或者，将传入的字符串小写。

# angularjs - Angular 在指令模板中使用带有表达式的 ng-model

> ID：15597228
> 
> 赞同：11
> 
> 时间：2013-03-24T10:15:36.073
> 
> 标签：angularjs

我想在自定义元素中使用 ng-model 属性。问题是，我需要使用表达式设置 ng-model：

```
ng-model="{{anyVariable}}" 
```

问题是，只要我将表达式添加到模板中的 ng-model 属性，我总是会收到错误消息：

```
Error: Syntax Error: Token 'x.name' is unexpected, expecting [:] at column 3 of the expression [{{x.name}}] starting at [x.name}}].
    at Error (<anonymous>)
    at throwError (http://localhost:9000/public/javascripts/angular.js:5999:11)
    at consume (http://localhost:9000/public/javascripts/angular.js:6037:7)
    at object (http://localhost:9000/public/javascripts/angular.js:6327:9)
    at primary (http://localhost:9000/public/javascripts/angular.js:6211:17)
    at unary (http://localhost:9000/public/javascripts/angular.js:6198:14)
    at multiplicative (http://localhost:9000/public/javascripts/angular.js:6181:16)
    at additive (http://localhost:9000/public/javascripts/angular.js:6172:16)
    at relational (http://localhost:9000/public/javascripts/angular.js:6163:16)
    at equality (http://localhost:9000/public/javascripts/angular.js:6154:16) 
```

使用的代码：

```
function addFormFieldDirective(elementName, template) {
    app.directive(elementName, function() {
        return {
            restrict: "E",
            scope: {},
            replace: true,
                              // adds some extra layout
            template: buildFormTemplate(template),
            link: function(scope, elm, attrs) {
                scope.x = attrs;
            }
         };
    });
}
addFormFieldDirective("textfield", '<input id="{{x.id}}" ng-model="{{x.name}}" type="text" name="{{x.name}}" value="{{x.value}}" />'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-01T21:32:17.387

试试这个版本：

```
.directive('myDir', function() {
    return {
        restrict: 'EA',
        scope:    {
                    YYY: '=ngModel'
                  },
        require:  'ngModel',
        replace:  true,
        template: '<input ng-model="YYY" />'
    };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:45:29.817

我找不到`ng-model`在指令模板中传递表达式的方法。

以下解决方案在指令中创建一个隔离模型，并且指令`controller`在主控制器模型对象中动态创建属性名称并监视隔离模型以将更新传递给主模型：

```
app.directive("textfield", function() {
    return {
        restrict: "E",
        scope: {},
        replace: true,
        controller:function($scope,$attrs)  {
            $scope.x=$attrs;

            $scope.$watch('directiveModel',function(){
                $scope.$parent.myModel[$attrs.name]=$scope.directiveModel;
            }) ;

            $scope.directiveModel=$attrs.value;
        },
        template: buildFormTemplate('<input ng-model="directiveModel" id="{{x.id}}" type="text" name="{{x.name}}" value="{{x.value}}" />');

    };
}); 
```

**[Plunkr 演示](http://plnkr.co/edit/IWSWjhJ8CSHjcBwRzEZe?p=preview)**

# php - ChatBox 奇怪的消息附加

> ID：15597236
> 
> 赞同：0
> 
> 时间：2013-03-24T10:16:36.813
> 
> 标签：php, jquery, jquery-ui, chat

你好，它是我，我有一个通过点击链接加载的聊天框。顺便说一句，我最初使用的是 jquery ui chatbox，chat_div 是隐藏的。

最初它按我希望的那样工作，但是如果我单击另一个用户并单击聊天链接与用户聊天，它显示的唯一正确的东西是聊天框的标题，但它附加的消息是来自前一个用户的消息.

这是聊天框的点击事件：

```
 <?php global $despId; ?>
    <?php foreach($usersas $x) {?>

    <?php $despId = $x->user_id?>
    <a href="#" class="chatOpener" id="<?php echo $despId?>">Chat with user</a>
    <?php } ?>      
    <?php echo br(2)?>

<div id="chat_div"></div>

    <script>
    jQuery(function($){
    $('#chat_div').hide();
    $(".chatOpener").live('click', function(event, ui){
                          var despID = $(this).attr('id');
                          box = null;
                          $('#chat_div').show();
                          //alert('1');

                        setInterval (load_messages, 2500);
                          if(box){
                              box.chatbox("option", "boxManager").toggleBox();
                          }
                          else {
                              box = $("#chat_div").chatbox({id: username, 
                                                            user:{key : username},
                                                            title : "<?php echo $x->firstName.' '.$x->lastName?>",
                                                            messageSent : function(id, user, msg) {

                                                                $.post('<?php echo site_url('/chats/addMessage')?>', {
                                                                            'username': '0', 
                                                                            'sendto' : '<?php echo $despId?>', 
                                                                            'message' : msg});

                                                                //$("#log").append(id + " said: " + msg + "<br/>");
                                                                $("#chat_div").chatbox("option", "boxManager").addMsg(id, msg);
                                                            }});
                                                            return false;
                          }
                          return false;
                      });

                      function load_messages(){
                            $('#chat_div').load('<?php echo site_url('/chats/index/'.$despId);?>');
                      }
                });
<?php }?> 
```

我想知道奇怪的行为在哪里。我已经像几天前那样工作了，但仍然没有运气。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T23:20:10.047

我看到的唯一错误是 foreach 行，请尝试更改：

```
<?php foreach($usersas $x) {?> 
```

对此：

```
<?php foreach($users as $x) {?> 
```

希望对你有帮助（=

# internet-explorer - 使用 IE 和 Jenkins 时出现 Webdriver 错误

> ID：15597239
> 
> 赞同：2
> 
> 时间：2013-03-24T10:16:50.013
> 
> 标签：internet-explorer, jenkins, webdriver

在 IE9 中使用 Webdriver 时出现此错误“启动 Internet Explorer 时出现意外错误。所有区域的保护模式必须设置为相同的值（启用或禁用）”。我可以通过按如下方式安装驱动程序来避免此错误

能力.setCapability（InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS，真）；driver = new InternetExplorerDriver(capabilities);

当我在本地运行测试时它运行良好但是当我通过 Jenkins 触发它们时它似乎不起作用（它再次给了我同样的错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T11:08:53.047

您需要将所有 Internet 区域设置为相同级别，最好是最低级别。

您可以在控制面板、Internet、安全、Internet、本地、受信任的站点等上执行此操作。

抱歉，我不能更准确地说，因为我目前在 Mac 上，但请尝试一下，它会运行。

# xml - 为什么我在加载样式表时出错：XPath expr。失败（XSD 和 XSL 文件的 XML 错误）？

> ID：15597240
> 
> 赞同：1
> 
> 时间：2013-03-24T10:16:58.573
> 
> 标签：xml, xslt, xsd

在 Firefox 上，我收到**错误加载样式表：处理 XPath 表达式失败。**但在 Chrome 中没有显示任何内容。

**对象商店.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="objectshop.xsl" ?>

<os:objectshop xmlns:os="http://www.example.org/objectshop"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.example.org/objectshop objectshop.xsd ">
  <os:catalog>
    <os:product>
        <os:productId>1</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
    <os:product>
        <os:productId>2</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
    <os:product>
        <os:productId>2</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
    <os:product>
        <os:productId>4</os:productId>
        <os:name>Achtung Baby - U2</os:name>
        <os:description>Audio CD</os:description>
        <os:price>21.0</os:price>
        <os:campaignPrice>19.0</os:campaignPrice>
        <os:icon>images/u2AchtungBaby.jpg</os:icon>
    </os:product>
  </os:catalog>
  <os:members>
    <os:customer>
        <os:userId>eteration</os:userId>
        <os:name>Esma Meral</os:name>
        <os:address>ITU andesea</os:address>
        <os:phone>+90 123 456 789</os:phone>
        <os:email>a@b.com</os:email>
    </os:customer>
  </os:members>
</os:objectshop> 
```

**对象商店.xsl**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.1"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <html>
      <body>
        <div id="headerregion">
        </div>

        <div id="middleregion">
          <div id="middle">
            <div id="sidebar">
              ...
            </div>
            <div id="content">
              <xsl:apply-templates select="/os:objectshop/os:catalog" />
            </div>
          </div>
        </div>
        <div id="footerregion">
          Something
        </div>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="/os:objectshop/os:catalog">
    <table align="center">
      <xsl:for-each select="//os:product">
        <xsl:sort select="os:productId" />
        <tr valign="top">
          <td valign="top">
            <b>
              <xsl:value-of select="os:productId" />
            </b>
          </td>
          <td>
            <img>
              <xsl:attribute name="height">50</xsl:attribute>
              <xsl:attribute name="width">50</xsl:attribute>
              <xsl:attribute name="align">top</xsl:attribute>
              <xsl:attribute name="border">0</xsl:attribute>
              <xsl:attribute name="src">
                  <xsl:value-of select="os:icon" />
                </xsl:attribute>
              xsl:attribute>
            </img>
          </td>
          <td>
            <b>
              <xsl:value-of select="os:name" />
            </b>
            <xsl:value-of select="os:description" />
            <br />
            Retail Price $
            <xsl:value-of select="os:price" />
            <br />
            <font color="RED">
              <b>
                Our Price $
                <xsl:value-of select="os:price" />
              </b>
            </font>
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <img height="1" src="images/grey-pixel.gif" width="100%"
              align="top" vspace="6" />
          </td>
        </tr>
      </xsl:for-each>
    </table>
  </xsl:template>
</xsl:stylesheet> 
```

**对象商店.xsd**

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
 targetNamespace="http://www.example.org/objectshop"
 elementFormDefault="qualified"
 xmlns:os="http://www.example.org/objectshop">

    <complexType name="ProductType">
        <sequence>
            <element name="productId" type="string"></element>
            <element name="name" type="string"></element>
            <element name="description" type="string"></element>
            <element name="price" type="double"></element>
            <element name="campaignPrice" type="double"></element>
            <element name="icon" type="string"></element>
        </sequence>
    </complexType>

    <complexType name="CustomerType">
        <sequence>
            <element name="userId" type="string"></element>
            <element name="name" type="string"></element>
            <element name="address" type="string"></element>
            <element name="phone" type="string"></element>
            <element name="email" type="string"></element>
        </sequence>
    </complexType>

    <complexType name="CatalogType">
        <sequence>
            <element name="product" type="os:ProductType"
                minOccurs="0" maxOccurs="unbounded">
            </element>
        </sequence>
    </complexType>

    <complexType name="MembersType">
        <sequence>
            <element name="customer" type="os:CustomerType" minOccurs="0" maxOccurs="unbounded"></element>
        </sequence>
    </complexType>

    <element name="objectshop" type="os:ObjectShopType"></element>

    <complexType name="ObjectShopType">
        <sequence>
            <element name="catalog" type="os:CatalogType"></element>
            <element name="members" type="os:MembersType"></element>
        </sequence>
    </complexType>
</schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:25:45.513

XPath 表达式中的命名空间前缀是指在样式表中声明的命名空间，而不是源文档。您`os:`在 xpaths 中使用了未声明的前缀，以修复需要将`xmlns:os`from objectshop.xml复制到 objectshop.xsl`xsl:stylesheet`标记中的错误。

请注意，重要的是命名空间 URI，而不是前缀。您可以`xmlns:s="http://www.example.org/objectshop"`在样式表中声明，然后`/s:product`在您的 xpaths 中使用，它仍然会匹配`<os:product>`源文档中的一个，因为命名空间是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:22:51.833

**这是更正后的代码**（添加了命名空间定义）：

```
<xsl:stylesheet version="1.1"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:os="http://www.example.org/objectshop">
  <xsl:template match="/">
    <html>
      <body>
        <div id="headerregion">
        </div>

        <div id="middleregion">
          <div id="middle">
            <div id="sidebar">
              ...
            </div>
            <div id="content">
              <xsl:apply-templates select="/os:objectshop/os:catalog" />
            </div>
          </div>
        </div>
        <div id="footerregion">
          Something
        </div>
      </body>
    </html>
  </xsl:template>
  <xsl:template match="/os:objectshop/os:catalog">
    <table align="center">
      <xsl:for-each select="//os:product">
        <xsl:sort select="os:productId" />
        <tr valign="top">
          <td valign="top">
            <b>
              <xsl:value-of select="os:productId" />
            </b>
          </td>
          <td>
            <img>
              <xsl:attribute name="height">50</xsl:attribute>
              <xsl:attribute name="width">50</xsl:attribute>
              <xsl:attribute name="align">top</xsl:attribute>
              <xsl:attribute name="border">0</xsl:attribute>
              <xsl:attribute name="src">
                  <xsl:value-of select="os:icon" />
                </xsl:attribute>
              xsl:attribute>
            </img>
          </td>
          <td>
            <b>
              <xsl:value-of select="os:name" />
            </b>
            <xsl:value-of select="os:description" />
            <br />
            Retail Price $
            <xsl:value-of select="os:price" />
            <br />
            <font color="RED">
              <b>
                Our Price $
                <xsl:value-of select="os:price" />
              </b>
            </font>
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <img height="1" src="images/grey-pixel.gif" width="100%"
              align="top" vspace="6" />
          </td>
        </tr>
      </xsl:for-each>
    </table>
  </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<os:objectshop xmlns:os="http://www.example.org/objectshop"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.example.org/objectshop objectshop.xsd ">
    <os:catalog>
        <os:product>
            <os:productId>1</os:productId>
            <os:name>Achtung Baby - U2</os:name>
            <os:description>Audio CD</os:description>
            <os:price>21.0</os:price>
            <os:campaignPrice>19.0</os:campaignPrice>
            <os:icon>images/u2AchtungBaby.jpg</os:icon>
        </os:product>
        <os:product>
            <os:productId>2</os:productId>
            <os:name>Achtung Baby - U2</os:name>
            <os:description>Audio CD</os:description>
            <os:price>21.0</os:price>
            <os:campaignPrice>19.0</os:campaignPrice>
            <os:icon>images/u2AchtungBaby.jpg</os:icon>
        </os:product>
        <os:product>
            <os:productId>2</os:productId>
            <os:name>Achtung Baby - U2</os:name>
            <os:description>Audio CD</os:description>
            <os:price>21.0</os:price>
            <os:campaignPrice>19.0</os:campaignPrice>
            <os:icon>images/u2AchtungBaby.jpg</os:icon>
        </os:product>
        <os:product>
            <os:productId>4</os:productId>
            <os:name>Achtung Baby - U2</os:name>
            <os:description>Audio CD</os:description>
            <os:price>21.0</os:price>
            <os:campaignPrice>19.0</os:campaignPrice>
            <os:icon>images/u2AchtungBaby.jpg</os:icon>
        </os:product>
    </os:catalog>
    <os:members>
        <os:customer>
            <os:userId>eteration</os:userId>
            <os:name>Esma Meral</os:name>
            <os:address>ITU andesea</os:address>
            <os:phone>+90 123 456 789</os:phone>
            <os:email>a@b.com</os:email>
        </os:customer>
    </os:members>
</os:objectshop> 
```

**产生了（似乎是）正确的，想要的结果：**

```
<html xmlns:os="http://www.example.org/objectshop">
   <body>
      <div id="headerregion"></div>
      <div id="middleregion">
         <div id="middle">
            <div id="sidebar">
               ...

            </div>
            <div id="content">
               <table align="center">
                  <tr valign="top">
                     <td valign="top"><b>1</b></td>
                     <td><img height="50" width="50" align="top" border="0" src="images/u2AchtungBaby.jpg">
                           xsl:attribute&gt;
                           </td>
                     <td><b>Achtung Baby - U2</b>Audio CD<br>
                        Retail Price $
                        21.0<br><font color="RED"><b>
                              Our Price $
                              21.0</b></font></td>
                  </tr>
                  <tr>
                     <td colspan="3"><img height="1" src="images/grey-pixel.gif" width="100%" align="top" vspace="6"></td>
                  </tr>
                  <tr valign="top">
                     <td valign="top"><b>2</b></td>
                     <td><img height="50" width="50" align="top" border="0" src="images/u2AchtungBaby.jpg">
                           xsl:attribute&gt;
                           </td>
                     <td><b>Achtung Baby - U2</b>Audio CD<br>
                        Retail Price $
                        21.0<br><font color="RED"><b>
                              Our Price $
                              21.0</b></font></td>
                  </tr>
                  <tr>
                     <td colspan="3"><img height="1" src="images/grey-pixel.gif" width="100%" align="top" vspace="6"></td>
                  </tr>
                  <tr valign="top">
                     <td valign="top"><b>2</b></td>
                     <td><img height="50" width="50" align="top" border="0" src="images/u2AchtungBaby.jpg">
                           xsl:attribute&gt;
                           </td>
                     <td><b>Achtung Baby - U2</b>Audio CD<br>
                        Retail Price $
                        21.0<br><font color="RED"><b>
                              Our Price $
                              21.0</b></font></td>
                  </tr>
                  <tr>
                     <td colspan="3"><img height="1" src="images/grey-pixel.gif" width="100%" align="top" vspace="6"></td>
                  </tr>
                  <tr valign="top">
                     <td valign="top"><b>4</b></td>
                     <td><img height="50" width="50" align="top" border="0" src="images/u2AchtungBaby.jpg">
                           xsl:attribute&gt;
                           </td>
                     <td><b>Achtung Baby - U2</b>Audio CD<br>
                        Retail Price $
                        21.0<br><font color="RED"><b>
                              Our Price $
                              21.0</b></font></td>
                  </tr>
                  <tr>
                     <td colspan="3"><img height="1" src="images/grey-pixel.gif" width="100%" align="top" vspace="6"></td>
                  </tr>
               </table>
            </div>
         </div>
      </div>
      <div id="footerregion">
         Something

      </div>
   </body>
</html> 
```

# list - 在 HASKELL 中查找元组列表的最小值

> ID：15597242
> 
> 赞同：0
> 
> 时间：2013-03-24T10:17:14.493
> 
> 标签：list, haskell, tuples

我试图找到具有特定点的最小距离（（x1，x2）和（y1，y2）距离= abs（y2-y1）+abs（x2-x1）的元组（一个或多个）。对于例子 ：

> 列表将是 [(1,2),(3,4),(5,4),(5,6),(9,12) ]
> 
> 具体点是(xpos,ypos)=(4,4)。

然后我的函数应该返回 [(3,4),(5,4)]。我试图实现这个，但我有一个问题，我认为它与基本情况有关。有没有人可以帮助我？

```
disSolver xpos ypos coor = abs (xpos - (fst coor)) +abs(ypos-(snd coor))

closestTuple _ _ [] =[]
closestTuple xpos ypos (x:y:xs) = if (disSolver xpos ypos x)<= (disSolver xpos ypos y)
then [x] ++ closestTuple xpos ypos (xs)
else closestTuple xpos ypos (y:xs) 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:53:20.357

你已经考虑`disSolver`到它自己的功能，这很好。你可以走得更远，也可以抽象出“通过某些指定度量找到最小值”的算法。`closestTuple`那么只是两者的组成。（除了我使用 leventov`distSolver`而不是你的`disSolver`，因为这些类型更好地结合在一起。）

我选择演示`minimaBy`使用函数管道而不是显式模式匹配和递归，因为我碰巧认为在这种情况下它更清晰且不易出错。

另请注意，我给出的类型`minimaBy`意味着如果它编译，它会自动没有某些错误。我们不能不小心按`c`类型排序（对应于`(a, a)`in`closestTuple`的签名），因为 only`b`被声明为 implement `Ord`。

（话虽如此，我还没有编译或以其他方式测试过这段代码，它只能保证在我的脑海中完美地工作:-)）

```
import Control.Arrow ((&&&))
import Data.Function (on)
import Data.List (groupBy, sortBy)
import Data.Maybe (fromMaybe, listToMaybe)
import Data.Ord (comparing)

minimaBy :: Ord b => (c -> b) -> [c] -> [c]
minimaBy f = map fst
           . fromMaybe []
           . listToMaybe
           . groupBy ((==) `on` snd)
           . sortBy (comparing snd)
           . map (id &&& f)

closestTuple :: (Num a, Ord a) => (a, a) -> [(a, a)] -> [(a, a)]
closestTuple = minimaBy . distSolver 
```

文档链接：

*   Control.Arrow ---[`&&&`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Arrow.html#v%3a-38--38--38-)
    *   现在忽略类型类
    *   假装`(&&&) :: (b -> c) -> (b -> c') -> (b -> (c, c'))`
*   数据.功能---[`on`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Function.html#v%3aon)
*   数据列表 --- [`groupBy`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3agroupBy),[`sortBy`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3asortBy)
*   数据。也许 --- [`fromMaybe`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Maybe.html#v%3afromMaybe),[`listToMaybe`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Maybe.html#v%3alistToMaybe)
*   数据.Ord ---[`comparing`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Ord.html#v%3acomparing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:42:33.457

当要从中找到最近点的列表恰好包含 1 个元素时，您错过了这种情况。`closestTuple`您的实现逻辑似乎也存在错误。

这是我编写函数的方式：

```
distSolver :: Num a => (a, a) -> (a, a) -> a
distSolver (px, py) (x, y) = (abs (x - px)) + (abs (y - py))

closestTuple :: (Num a, Ord a) => (a, a) -> [(a, a)] -> [(a, a)]
closestTuple _ [] = []
closestTuple pos (x:xs) = mins (distSolver pos x) [x] pos xs

mins _ mxs _ [] = mxs
mins minDist mxs pos (x:xs)
    | dist < minDist  = mins dist [x] pos xs
    | dist == minDist = mins dist (x:mxs) pos xs
    | otherwise       = mins minDist mxs pos xs
  where dist = distSolver pos x 
```

# sql-server - SQL int 到 hex 转换 little/big endian 格式

> ID：15597244
> 
> 赞同：7
> 
> 时间：2013-03-24T10:17:18.747
> 
> 标签：sql-server

使用 MSSMS 我正在尝试运行查询。

```
SELECT CONVERT(BINARY(16), 14437) 
```

结果是：

```
0x00000000000000000000000000003865 
```

但这就是我正在寻找的：

```
0x65380000000000000000000000000000 
```

我尝试使用反向但没有运气。

```
SELECT REVERSE(CONVERT(BINARY(16), 14437)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T10:20:33.233

> 我尝试使用反向但没有运气。

`REVERSE`返回一个字符串。转换回二进制返回您想要的结果

```
SELECT CONVERT(BINARY(16), REVERSE(CONVERT(BINARY(16), 14437))) 
```

# php - 使 php 在 Red hat 5 linux 上与 httpd 一起工作

> ID：15597249
> 
> 赞同：-1
> 
> 时间：2013-03-24T10:17:36.933
> 
> 标签：php, mysql, apache, rhel

我正在尝试从 linux 上的源代码安装 php。

我怎样才能使它与我当前活动的 httpd 服务一起工作？我不想为了同样的目的安装 apachectl。

根据我正在阅读的书，给出了命令：

```
./configure --prefix=/usr/local/php \ 
 --with-mysqli=/usr/local/mysql/bin/mysql_config \ 
 --with-apxs2=/usr/local/apache2/bin/apxs 

make

make install 
```

如何仅使用我的 httpd 服务从源代码安装 php？我的 httpd.conf 文件位于：/etc/httpd/conf/httpd.conf 位置..

PS：我是linux环境的新手。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:29:15.773

试试这个，在命令行上运行：

```
updatedb
locate apxs 
```

而不是添加`apxs`路径`configure`

```
./configure --prefix=/usr/local/php \
--with-mysqli=/usr/local/mysql/bin/mysql_config \
--with-apxs2=[full_path]apxs 
```

如果未安装，请运行`updatedb`并安装包。之后，将在您的系统上。`locate``yast``findutils-locate``updatedb``locate`

# c# - JSON点击事件空参数

> ID：15597252
> 
> 赞同：1
> 
> 时间：2013-03-24T10:17:45.403
> 
> 标签：c#, json, asp.net-mvc-3

单击按钮时参数`string Temat`为空哪里有问题？看起来还好吗？

文件.cshtml

```
 @using (Html.BeginForm())
    {
    <table class="edt" style="float: left; width: 600px; margin-top: 5px; background-color: white;">
    <tr>
                <td class="labelm">
                    @Html.LabelFor(m => m.Temat)<span id="Temat_2" class="a">*</span>
                </td>
                <td>
                    @Html.TextBoxFor(m => m.Temat,  new { id = "Temat" })
                </td>
    </tr>
    </table>
    <input type="button" value="save" onclick="Save();" />
    }

<script type="text/javascript">

    function Save() {
    var Temat = $('#Temat').val();

            $.ajax({
                url: '@Url.Action("DodajTematSave", "StronaGlowna")',
                dataType: "json",
                data: { Temat: Temat },
                type: "POST",
                async: false,
                error: function() {
                },
                success: function(data) {
                    if (data.Success) {
                        alert('success');
                    }

                }
            });
        }

</script> 
```

控制器中的 JSON 方法：

```
public JsonResult DodajTematSave(string Temat)
{
    var model = new StronaGlowna();
    if (!TryUpdateModel(model) || !ModelState.IsValid) // podładowanie yield 
    {
    }
    string chceSprobowac = Temat;
    return Json(new { Success = true});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:50:44.057

我想您想检索文本框的值。如果是这样，请将 id 'Temat' 分配给文本框，而不是 span，您的代码应该可以正常工作。

但是，如果您有兴趣检索跨度的文本，请使用

```
var Temat = $('#Temat').text(); 
```

如果要为文本框分配 id，

```
@Html.TextBoxFor(model => model.Password, new { id = "Temat" }) 
```

# matlab - 在 Matlab 中使用 uigetfile 选择特定文件

> ID：15597256
> 
> 赞同：-2
> 
> 时间：2013-03-24T10:18:10.607
> 
> 标签：matlab, math

我正在做小`matlab`代码，必须打开一个目录，然后从那里选择图像，选择的图像必须存储在一个变量中我已经使用加载目录

```
 [mat, dirc] = uigetfile('*.png', 'Select a  file'); 
```

像这样在matlab中加载图像

![在此处输入图像描述](../Images/7efeba07549c858cd1aada5230261cbb.png)

我希望“将所选图像保存在变量中”。
请帮我做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:34:12.097

您可以读取图像文件

```
img = imread( fullfile(dirc, mat) ); 
```

# android - ArrayAdapter 的默认布局

> ID：15597257
> 
> 赞同：8
> 
> 时间：2013-03-24T10:18:17.837
> 
> 标签：android, android-arrayadapter

我目前正在使用阵列适配器。我在网上遇到的所有示例都使用单独的阵列适配器布局。我想知道它是否有默认布局。我的代码是这样的

```
ArrayAdapter<String> adapt = new  ArrayAdapter<String>(this,,item); 
```

第二个参数应该是什么，以便我不指定资源布局并使用其默认值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-24T10:22:57.983

您可以使用默认的`TextView`一行项目：

```
android.R.layout.simple_list_item_1 
```

像这样：

```
 ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items) 
```

# opengl - 围绕原点以外的旋转点平移相机

> ID：15597258
> 
> 赞同：2
> 
> 时间：2013-03-24T10:18:20.963
> 
> 标签：opengl, matrix, camera, rotation, transform

好的，这是一个非常具体的问题，与我在 OpenGL 中的相机变换有关。当视图打开时，旋转点围绕原点 - 当您平移相机时，它首先进行平移，然后进行旋转以保持旋转点围绕原点。

好吧，我希望旋转点从原点更改为您单击的六边形图块，而相机位置不会出现变化。这似乎很模糊，所以我附上了一些图片来说明。

我不能包含图片，因为我的代表在这里不够高，但这里是 flickr 上照片的链接

[首次打开视图时](http://www.flickr.com/photos/94337433@N04/8585570026/)

现在，当我单击新图块以更改旋转点时，相机会移动以使该图块保持在屏幕中心。我会发布一个链接来显示，但同样只有两个链接的足够代表 - 所以我将发布一个链接到我希望如何改变旋转点的图片（旋转点改变时相机不会移动） .

[我希望它如何发生](http://www.flickr.com/photos/94337433@N04/8584469609/)

好的，现在一些代码 - 这是获取相机变换矩阵的代码

```
NSMatrix4Df rotateTransform = NSMatrix4Df::getRotationMatrix(-orientation.x,-orientation.y,-orientation.z);
NSMatrix4Df rotationTranslationTransform = NSMatrix4Df::getTranslationMatrix(rotationPoint.x,rotationPoint.y,rotationPoint.z);
NSMatrix4Df cameraTranslateTransform = NSMatrix4Df::getTranslationMatrix(position.x,position.y,position.z);
return cameraTranslateTransform * rotateTransform * rotateTransform; 
```

其中方向、位置和旋转点都在世界空间中。这是实际矩阵变换的代码。

```
NSMatrix4Df NSMatrix4Df::getRotationMatrix(float xAxisAng, float yAxisAng, float zAxisAng)
{
    float xRad = DegreesToRadians(xAxisAng);
    float yRad = DegreesToRadians(yAxisAng);
    float zRad = DegreesToRadians(zAxisAng);

    NSMatrix4Df xRotMat;
    NSMatrix4Df yRotMat;
    NSMatrix4Df zRotMat;

    xRotMat.value(1,1) = cosf(xRad); xRotMat.value(1,2) = -sinf(xRad);
    xRotMat.value(2,1) = sinf(xRad); xRotMat.value(2,2) = cosf(xRad);

    yRotMat.value(0,0) = cosf(yRad); yRotMat.value(0,2) = -sinf(yRad);
    yRotMat.value(2,0) = sinf(yRad); yRotMat.value(2,2) = cosf(yRad);

    zRotMat.value(0,0) = cosf(zRad); zRotMat.value(0,1) = -sinf(zRad);
    zRotMat.value(1,0) = sinf(zRad); zRotMat.value(1,1) = cosf(zRad);

    return zRotMat * yRotMat * xRotMat;
}

NSMatrix4Df NSMatrix4Df::getTranslationMatrix(float xMove, float yMove, float zMove)
{
    NSMatrix4Df identity;
    // set the fourth column of the matrix to the translation amount
    // the rest of the matrix is the identity matrix
    identity.setColumn(NSVec4Df(xMove,yMove,zMove,1),3);
    return identity;
} 
```

NSMatrix4Df 创建一个二维数组，表示填充有单位矩阵的 4x4 矩阵 ([4][4])。代码在这里。

```
NSMatrix4Df::NSMatrix4Df():rows(MATDIM4D), 
    columns(MATDIM4D)
{
    data[0][0] = 1; data[0][1] = 0; data[0][2] = 0; data[0][3] = 0;
    data[1][0] = 0; data[1][1] = 1; data[1][2] = 0; data[1][3] = 0;
    data[2][0] = 0; data[2][1] = 0; data[2][2] = 1; data[2][3] = 0;
    data[3][0] = 0; data[3][1] = 0; data[3][2] = 0; data[3][3] = 1;
} 
```

所以基本上我的问题是这个 - 有没有人知道如何在移动旋转点后平移相机的位置，以便在旋转点移动时看起来相机保持在同一个位置。我尝试像这样在旋转点平移之后添加平移...

```
NSMatrix4Df rotateTransform = NSMatrix4Df::getRotationMatrix(-orientation.x,-orientation.y,-orientation.z);
NSMatrix4Df rotationTranslationTransform = NSMatrix4Df::getTranslationMatrix(rotationPoint.x,rotationPoint.y,rotationPoint.z);
NSMatrix4Df cameraTranslateTransform = NSMatrix4Df::getTranslationMatrix(**position.x - rotationPoint.x,position.y - rotationPoint.y,position.z - rotationPoint.z**);
return cameraTranslateTransform * rotateTransform * rotateTransform; 
```

这有效，除非在更改旋转点之前完全旋转相机并且我不知道为什么。在这种情况下（当摄像机在更改旋转点之前旋转时），摄像机将以受旋转量影响的方式平移。因此，例如，如果围绕 x 轴旋转 45 度，它将导致相机在 x 方向上变换额外的量。我不知道为什么。

我知道要围绕原点以外的点旋转相机，您可以平移 * 旋转 * -translate 这是我在最后一种情况下所拥有的，但如果旋转相机，最终的平移是不正确的。我认为我的翻译或旋转代码一定有问题，但我不知道是什么。

我知道这是一个复杂的问题，如果有人有任何见解，我将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:21:44.173

您遇到了矩阵乘法的基本属性。如果你有实数 4*5 == 5*4。但是，矩阵并非如此。

我写这个答案有点醉，所以我可能会弄错，因为它与感觉自然相反：最右边的变换首先发生，左边的最后发生。

一个简单的测试方法是左右尝试你的相机矩阵。其中一个会做你想做的:) 将右侧的矩阵乘法视为对不同空间的转换通常很有帮助。在 3D 中，通常是模型 * 相机 * 投影。现在您要更改 CAMERA。您想要在它之前或之后进行转换。假设您通过鼠标输入 INPUT 的矩阵进行更改。然后你可以做 INPUT * CAMERA 或 CAMERA * INPUT。在第一种情况下，您的参考系是没有相机的世界，在第二种情况下，它是相机看到的世界。

您正在尝试通过应用和撤消翻译来做类似的事情，但这还不够。

我希望这能有所帮助。随时跟进。但也要阅读矩阵数学。这是一个陡峭的学习曲线，但非常值得，从你的问题来看，你非常接近:)

# javascript - 了解由 setTimeout 和 clearTimeout 组成的循环函数

> ID：15597260
> 
> 赞同：0
> 
> 时间：2013-03-24T10:18:30.543
> 
> 标签：javascript, jquery, settimeout

我正在制作一个使用`setTimeout`和的简单淡入/淡出循环动画`clearTimeout`。到目前为止，这是我的代码：

HTML：

```
<p><span>loading...</span></p>
<a href="#" id="btn">STOP</a> 
```

Javascript（jQuery1.9.1）：

```
var _timer;
var _timerArr = [];

var loaderBlink = function() {
    $('p').find('span').fadeTo(200,.4).fadeTo(200,1,function() {
        _timer = setTimeout(function() { loaderBlink() }, 200);
        _timerArr.push(_timer);
        //console.log('loading...');
    });
};

var clearTimer = function() {
    $.each(_timerArr, function(i,val) {
        clearTimeout(val);
        console.log(val);
    });

    $('#btn').remove();
    $('p').fadeOut('fast');

    return false;
};

$('#btn').on('click', function() {
    clearTimer();
});

loaderBlink(); 
```

演示：http: [//jsfiddle.net/nori2tae/MW9E8/](http://jsfiddle.net/nori2tae/MW9E8/)

问题是，即使我将所有计时器推入一个数组以便之后通过单击停止按钮将它们全部清除，有时计时器也不会停止，只会继续运行。

可能我不完全理解`setTimeout`and的概念`clearTimeout`。我需要一些解决方案并帮助理解这两个功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:32:35.057

这是一个 setIntevall 版本：

编辑：它运作良好，但你必须用你的函数 loaderBlink(); 包装计时器；又一次，误删了，咖啡还不够。

```
var _timer;

_timer = setInterval(function () {
            $('p').find('span').fadeTo(200,.4).fadeTo(200,1);
            console.log('loading...');
        }, 400);

var clearTimer = function() {
    clearInterval(_timer);

    $('#btn').remove();
    $('p').fadeOut('fast');

    return false;
};

$('#btn').on('click', function() {
    clearTimer();
}); 
```

[http://jsfiddle.net/XHUTV/2/](http://jsfiddle.net/XHUTV/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:28:39.947

保存对数组中所有计时器的引用没有多大意义——计时器不会连续运行，因此仅将最近的计时器存储在单个数组中就足够了。你只需要停止最后一个，其他的都已经停止了。

我怀疑当您在动画运行时单击某个时间点时计时器不会停止，因此该按钮会停止所有计时器，但尚未启动的计时器除外，因为动画队列仅在动画停止时才启动它。

无论如何，如果没有计时器，这实际上会更容易、更可靠。

```
var blink = true;

var loaderBlink = function() {
    if( blink ) {
        $('p').find('span').delay( 200 ).fadeTo(200,.4).fadeTo(200,1,function() {
            loaderBlink();
            console.log('loading...');
        });
    }
};

$('#btn').on('click', function() {    
    blink = false;
    $(this).remove();
    $('p').stop().fadeOut('fast');

    return false;
});

loaderBlink(); 
```

该操作与原始代码略有不同：200 ms 延迟是在动画循环的开始而不是之后，但我认为这不是问题。`.stop()`确保循环不会再次开始。

演示：http: [//jsfiddle.net/WAprd/17/](http://jsfiddle.net/WAprd/17/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T10:33:58.783

您解决此问题的方法有点错误-正如您所见，您将时间定义为 200 毫秒-这次时间很短，在代码做出反应之前，您的单击下一个计时器将继续进行，因此有时它有时会起作用不是。同样将所有 interval_ids 保存在一个数组中没有任何意义，因为 setTimeout 只发生一次（与 setInterval 相反）。您需要做的是使用标志并关闭单个计时器 ID：http: [//jsfiddle.net/MW9E8/2/](http://jsfiddle.net/MW9E8/2/)

```
var _timer;
var _timerArr = [];
var fading;

var loaderBlink = function() {
    if(fading){
        $('p').find('span').fadeTo(200,.4).fadeTo(200,1,function() {
            interval_id = setTimeout(function() { loaderBlink() }, 200);
           // _timerArr.push(_timer);
            console.log('loading...');
        });
    }
};

var clearTimer = function() {
    /*
    $.each(_timerArr, function(i,val) {

        console.log(val);
    });
    */    
    clearTimeout(interval_id);
    fading = false;

   // $('#btn').remove();
   // $('p').fadeOut('fast');

    return false;
};

$('#btn').on('click', function() {
    clearTimer();
});

fading = true;
loaderBlink(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T10:48:23.740

如果您在动画中使用 jQuery，那么您最好继续使用 jQuery 来处理其他所有内容……无需混入`setIntervals`and `setTimeouts`：

**小提琴**

[http://jsfiddle.net/QNMkp/](http://jsfiddle.net/QNMkp/)

**标记**

```
<span id="loading">Loading...</span>

<button id="stop">Stop!</button> 
```

**js**

```
$(function(){

    var fadeLoading;

    (fadeLoading = function(){
        $('#loading:not(.stopped)')
            .fadeTo(200,0.4)
            .fadeTo(200,1, fadeLoading) /// you can just loop this
        ;
    })();

    $('#stop').click(function(){
        $('#loading')
            .addClass('stopped') /// add a class to stop new fade starting
            .stop() /// stop existing animations
            .fadeTo(200,1) /// fade loading up to 100%
        ;
    });

}); 
```

# excel - 在许多.Children 面前快速进行.Trim 的方法：有这样的命令吗？

> ID：15597264
> 
> 赞同：0
> 
> 时间：2013-03-24T10:18:48.450
> 
> 标签：excel, web-scraping, nodes, trim, vba

当应用于网站数据抓取时，我不完全理解 Trim() 的结构。

我从网站上抓取数据`Elements`，识别相应的节点（它是一个 div class="ab" 节点）并使用

```
Set Elements = Document.getElementsByClassName("a-b") 
```

由于给定节点只有 2 个子节点，我使用

```
data1 = Trim(Element.Children(1).Children(0).innerText)
    data2 = Trim(Element.Children(1).Children(1).innerText) 
```

到达我正在搜索的数据。

我的问题是：如果节点有 X 个子节点，并且我必须使用 Trim()，有没有一种快速的方法来一次考虑所有子节点？我正在考虑一个可以设置一系列子节点的命令。我想避免编写 Trim() 枚举所有孩子。

如果不存在这样的命令，我该怎么办？

非常感谢！阿维图斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:11:18.567

The definition of Trim function for VBA is **Function Trim(String)**. It accepts **variant/string** and if the string is null, null is returned. if the node has X subnodes and you want to trim all then you will have loop through all nodes in element.

You can use the **regex** instead and trim all the nodes at once.

# 3d - 是否支持 3D 饼图？

> ID：15597268
> 
> 赞同：6
> 
> 时间：2013-03-24T10:19:21.347
> 
> 标签：3d, highcharts, pie-chart

我在我的网络上使用 Highcharts，我需要一个 3D 饼图。

Highcharts 是否支持 3D 饼图？如果是这样，有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:05:25.177

这是最受欢迎的功能

```
http://highcharts.uservoice.com/forums/55896-general 
```

看起来今年就要来了。同时，您可以添加径向渐变。[http://jsfiddle.net/LCdVd/243/](http://jsfiddle.net/LCdVd/243/)

--- 更新 --- 现在支持 3D 饼图：

[http://www.highcharts.com/demo/3d-pie](http://www.highcharts.com/demo/3d-pie)

# c++ - 一切都正确但无法运行：预期错误{或；

> ID：15597269
> 
> 赞同：-4
> 
> 时间：2013-03-24T10:19:25.960
> 
> 标签：c++, class

我找不到我的错误在哪里，你能帮帮我吗？错误是预期的；或 } 但我已经把它放在那里我无法运行它。你知道为什么吗？驱动类由 ; 虽然程序仍然无法编译。请指导我谢谢

```
 #include <iostream>
    using namespace std;
    class myBase{
          private:
                  int foodmoney;
                  int hobbymoney;

                  public:
               void setdata();
          friend int caldata();
                 };
                 void myBase::setdata(){
                      cout<<"Enter foodmoney :" ;cin>>foodmoney;
                      cout<<"enter hoobymoney:";cin>>hobbymoney;
                      }
              int caldata(int sum,int foodmoney,int hobbymoney){
                        cin>>foodmoney;
                        cin>>hobbymoney;          
                        sum=(foodmoney+hobbymoney)/2;
                        return sum;

                             }

        class Derivedclass:public myBase{
                        int moneyforfood,moneyforhobby;
                        public:
               int setmydrived(int moneyforfood,int moneyforhobby){
                        cout<<"enter money for food(drived class)"<<endl;
                        cin>>moneyforfood;
                        cout<<"enter money for hobby(drived class)"<<endl;
                        cin>>moneyforhobby;
                        }

                        int calculatedrived(){

                   int sumd=(moneyforfood+moneyforhobby);
                     cout<<"avg money on frived class "<<sumd<<endl;
                     };

                    int main(){
                     myBase baseobj;
                     baseobj.setdata();
                     int caldata();
          Derivedclass obj;
                     int setmydrived();
                     obj.calculatedrived();
                      system("puase");

         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:21:50.620

最后一个类的定义缺少右括号（和分号）。

如果您使用正常的缩进样式，则更容易发现这种情况。

您还缺少返回某些内容的函数中的两个返回语句。那是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:22:19.017

您应该`;`在类声明之后添加。例子：

```
class Whatever {

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:23:54.440

您的代码中几乎没有错误：

*   您缺少一个右大括号 ( `}`)`class Derivedclass:public myBase`

*   系统中暂停的拼写不正确（“暂停”）

*   `int setmydrived`and函数应该返回一个整数，`int calculatedrived`但你没有返回一个整数。

我已经纠正了错误。以下代码可以正常工作（参见[IDEONE](http://ideone.com/cNn5wu)上的演示）：

```
#include <iostream>
using namespace std;
class myBase
{
private:
    int foodmoney;
    int hobbymoney;

public:
    void setdata();
    friend int caldata();
};
void myBase::setdata()
{
    cout<<"Enter foodmoney :" ;cin>>foodmoney;
    cout<<"enter hoobymoney:";cin>>hobbymoney;
}
int caldata(int sum,int foodmoney,int hobbymoney)
{
    cin>>foodmoney;
    cin>>hobbymoney;          
    sum=(foodmoney+hobbymoney)/2;
    return sum;

}

class Derivedclass:public myBase
{
    int moneyforfood,moneyforhobby;
public:
    int setmydrived(int moneyforfood,int moneyforhobby)
    {
        cout<<"enter money for food(drived class)"<<endl;
        cin>>moneyforfood;
        cout<<"enter money for hobby(drived class)"<<endl;
        cin>>moneyforhobby;
                    /*THIS FUNCTION DOESNOT RETURN ANY INT VAL*/
    }

    int calculatedrived()
    {

        int sumd=(moneyforfood+moneyforhobby);
        cout<<"avg money on frived class "<<sumd<<endl;
        //return sumd;
                    /*THIS FUNCTION DOESNOT RETURN ANY INT VAL*/

    }
};

int main()
{
    myBase baseobj;
    baseobj.setdata();
    int caldata();
    Derivedclass obj;
    int setmydrived();
    obj.calculatedrived();
    system("pause");

} 
```

# asp.net - WCF 服务接收 json 并将条目添加到数据库中

> ID：15597270
> 
> 赞同：0
> 
> 时间：2013-03-24T10:19:35.917
> 
> 标签：asp.net, wcf, web-services, wcf-data-services, wcf-binding

我需要创建一个将托管在 IIS 中的服务。该服务将具有一个带有字符串类型参数的函数。此函数将接收 Json 数据。将使用此服务的客户端需要能够使用以下 url 访问此服务方法：

```
http://[local]host/Myservice/mymethod 
```

我是服务新手。我正在使用 asp.net 4.0 和 VS 2010。我的问题是：

1.  我应该创建 SOAP 服务还是 WCF 服务（我假设 WCF 不能是 SOAP）

2.  如果我需要使用 WCF 服务，那么使用哪种类型的 WCF 服务？我看到有几种类型的 WCF 服务，例如 REST 服务、数据服务（可能还有 JSON 服务）。

3.  我曾使用此模板创建 WCF 服务。使用它是否很好：http: [//visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)因为我不需要创建数据合同等，或者可能是这篇文章 [http:// www.dotnetspark.com/kb/3189-create-rest-service-wcf-40-step-by-step.aspx](http://www.dotnetspark.com/kb/3189-create-rest-service-wcf-40-step-by-step.aspx)因为我不必手动更改 web.config 和更改端点？

4.  然后，此服务方法将使用 json.net 解析 json 并获取一些值，然后将它们添加到数据库中并发送电子邮件。这是否意味着我需要 WCF 数据服务？

请建议。

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:01:48.207

好吧，首先——WCF在 SOAP 领域**非常**强大，事实上，它在一开始就专门支持基于 SOAP 的绑定。

如果您希望能够“自动发现”您的服务及其方法，那么 SOAP 是一个强有力的竞争者。SOAP 有一个完善的元数据系统（使用 WSDL 和 XSD 标准），因此客户端基本上可以只指向一个服务位置并获得该服务可以做什么以及它期望什么参数等的完整描述。另外：SOAP是基于*我有一个带有 x 方法的服务的*隐喻——所以您将拥有服务方法及其参数作为您要设计的主要项目。

另一方面，SOAP 的使用范围稍差一些——它在大多数桌面系统上都可用，但在大多数移动设备（如手机和平板电脑）上并不真正可用。

这就是 REST 大放异彩的地方——因为它只使用 HTTP，所以它**随处**可用，因此您可以接触到更多的客户。此外，由于您专门使用 JSON 并且您的服务似乎是一个相当简单的服务（只是带有单个参数的单个调用），这可能更适合 REST（WCF`webHttpBinding`或基于 ASP.NET Web 的服务API）。

但是请注意：REST 基本上是基于**资源**的——例如，你不是在谈论 REST 中的方法和方法参数——你是在操纵资源。因此，您将使用各种 HTTP 动词（GET、PUT、POST、DELETE），而您正在谈论的 URI 表示**资源**（无论它是什么）。

因此，如果您可以将系统建模为*我正在发布新资源*（如新的数据库记录），那么您可以为此使用 REST。要向数据库添加新行，您将`POST`调用代表您的资源集合的 URI，例如

```
POST  /host/app/MyResourceCollection 
```

并提供必要的数据以在 HTTP 调用的 post 正文中实际创建新行。

所以你的要求有点矛盾：

*   拥有服务方法的想法似乎更适合 SOAP
*   使用 JSON 的想法更适合 REST

我建议您阅读 Jon Flanders 撰写的这篇出色的 MSDN 文章 [An Introduction To RESTful Services With WCF](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)，以更好地了解 REST 是什么以及如何使用它。看看它是否符合您的需求，如果是，那就去尝试一下，体验一下它的工作原理。

# c# - 将 GroupBox 中的所有控件设为只读？

> ID：15597271
> 
> 赞同：2
> 
> 时间：2013-03-24T10:19:46.037
> 
> 标签：c#, .net, winforms, controls, groupbox

我知道许多单独的控件都有一个`ReadOnly`属性。但是假设我有一个`GroupBox`其中有许多不同的控件（文本框、组合框、单选按钮等），是否可以将`ReadOnly`所有这些控件的属性一起设置？

并不是说我只想为特定中的控件设置此属性`GroupBox`（因为我也有多个 GroupBox，所以我不希望对其他 GroupBox 中的控件进行设置）..

手动设置`ReadOnly`属性似乎很无聊，因为我每个都有多达 20 个控件`Groupbox`（不要问为什么：p）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:44:34.397

对于 Winform 中的标准控件，您可以使用类似这样的东西（[TextBoxBase](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.aspx)是[ReadOnly](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.readonly.aspx)属性控件的基类）：

```
 private void button1_Click(object sender, EventArgs e)
    {
        SetReadonlyControls(groupBox1.Controls);
    }

    private void SetReadonlyControls(Control.ControlCollection controlCollection)
    {
        if (controlCollection == null)
        {
            return;
        }

        foreach (TextBoxBase c in controlCollection.OfType<TextBoxBase>())
        {
            c.ReadOnly = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:24:15.400

如果禁用就足够了，您可以禁用组框，孩子也将被禁用。

如果要将输入设置为只读，则需要遍历子级，使用反射找出它们是否具有`IsReadOnly`属性，然后设置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-12T16:03:29.063

使用 Daniil 的答案，因为您提到也存在 ComboBoxes 和 RadioButtons。这段代码：

```
TextBoxBase c in controlCollection.OfType<TextBoxBase>() 
```

将无法捕捉 RadioButtons 和 ComboBoxes。您还需要添加以下 foreach 循环。

```
private void button1_Click(object sender, EventArgs e)
    {
        SetReadonlyControls(groupBox1.Controls);
    }

    private void SetReadonlyControls(Control.ControlCollection controlCollection)
    {
        if (controlCollection == null)
        {
            return;
        }
        foreach (RadioButton r in controlCollection.OfType<RadioButton>())
        {
            r.Enabled = false; //RadioButtons do not have readonly property
        }
        foreach (ComboBox c in controlCollection.OfType<ComboBox>())
        {
            c.Enabled = false;//ComboBoxes do not have readonly property
        }
        foreach (TextBoxBase c in controlCollection.OfType<TextBoxBase>())
        {
            c.ReadOnly = true;
        }
    } 
```

编辑 ：

确保所有控件都在 groupbox1 内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-13T19:22:26.380

```
 public void SetReadonlyControls(Control.ControlCollection controlCollection)
        {
            if (controlCollection == null)
            {
                return;
            }
            foreach (RadioButton r in controlCollection.OfType<RadioButton>())
            {
                r.Enabled = false; //RadioButtons do not have readonly property
            }
            foreach (ComboBox c in controlCollection.OfType<ComboBox>())
            {//AQUE
                var text = new TextBox();
                controlCollection.Add(text);
                text.Text = c.Text;
                text.Location = c.Location;
                text.Size = c.Size;
                text.Visible = true;`enter code here`
                c.Visible = false;
               /* c.Enabled = false;//ComboBoxes do not have readonly property
                c.ForeColor = System.Drawing.Color.White;
               c.DropDownStyle = ComboBoxStyle.Simple;*/
            }
            foreach (TextBoxBase c in controlCollection.OfType<TextBoxBase>())
            {
                c.ReadOnly = true;
            }
            foreach (DateTimePicker c in controlCollection.OfType<DateTimePicker>())
            {
                c.Enabled = false;
            }
        } 
```

# apache - Apache Shiro 和 SSO

> ID：15597274
> 
> 赞同：9
> 
> 时间：2013-03-24T10:20:08.210
> 
> 标签：apache, single-sign-on, shiro

Apache Shiro 是一个 Java 安全框架并支持 SSO。而且我有多个子域，每个子域都有单独的应用程序运行。我如何使用 Apache Shiro Web 过滤器（或任何其他）来提供单点登录。

在使用 Apache Shiro 之前，我是否需要 SSO 服务器或服务（如 CAS？）？或者 Apache Shiro 不需要 SSO 服务器或服务（如 CAS）？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:02:55.130

我不是 Shiro 专家，但我会尽力帮助你。
据我了解，Shiro 不提供开箱即用的 SSO 服务。您需要使用 CAS 过滤器作为 SSO 服务。请查看以下页面，该页面解释了如何定义 Shiro CasFilter：[http ://shiro.apache.org/cas.html](http://shiro.apache.org/cas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T05:26:07.843

为了让 Shiro 支持 SSO，Cas 现在已弃用，您需要使用[buji-pac4j](https://github.com/bujiio/buji-pac4j)库来支持使用多种协议（如 SAML、OpenIdConnect 等）的 SSO。

# c++ - 在什么情况下，将基类转换为派生类的 c 风格转换可能会导致崩溃

> ID：15597275
> 
> 赞同：-3
> 
> 时间：2013-03-24T10:20:14.333
> 
> 标签：c++, c, crash, sigbus

我正在调查随机崩溃（SIGBUS），并试图找出可能破坏调用崩溃方法的指针的原因。我发现这个指针是使用 C++ 代码中的 C 风格转换从它的基类转换而来的。所以，我想知道在什么情况下这样的强制转换可能会导致崩溃，并尝试了解它是否是我的问题的根本原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:25:45.690

转换本身不会导致崩溃（显然..）但是如果您转换了一个不是真正那个孩子的孩子的对象，它可能会尝试从未分配或错误的地方调用一个函数并崩溃。 .

例如，我们有 A 和 B，C 继承 A，如果 B 的大小比 C 大得多。如果将分配给 C 的内容转换为 B，则可能会崩溃。这可以使用`dynamic_cast<SomeType>(ptr);` 然后询问结果是否解决不是 nullptr

# c# - 读取文件时跳过单词/符号

> ID：15597276
> 
> 赞同：0
> 
> 时间：2013-03-24T10:20:16.650
> 
> 标签：c#, vb.net, symbols, words

我正在制作一个小型 C# 应用程序，但我遇到了一个小问题。

我有一个纯文本的 .xml，我只需要第 4 行。

```
string filename = "file.xml";
if (File.Exists(filename))
{
    string[] lines = File.ReadAllLines(filename);
    textBox1.Text += (lines[4]);
} 
```

到目前为止一切都很好，我唯一的问题是我必须从第 4 行删除一些单词和符号。

我的坏话和符号：

```
word 1 
: 
' 
, 
```

我一直在谷歌上寻找，但我找不到 C# 的任何东西。找到了 VB 的代码，但我是新手，我真的不知道如何转换它并使其工作。

```
 Dim crlf$, badChars$, badChars2$, i, tt$
  crlf$ = Chr(13) & Chr(10)
  badChars$ = "\/:*?""<>|"           ' For Testing, no spaces
  badChars2$ = "\ / : * ? "" < > |"  ' For Display, has spaces

  ' Check for bad characters
For i = 1 To Len(tt$)
  If InStr(badChars$, Mid(tt$, i, 1)) <> 0 Then
    temp = MsgBox("A directory name may not contain any of the following" _
           & crlf$ & crlf$ & "     " & badChars2$, _
           vbOKOnly + vbCritical, _
           "Bad Characters")
    Exit Sub
  End If
Next i 
```

谢谢你。

固定的 ：）

```
 textBox1.Text += (lines[4]
              .Replace("Word 1", String.Empty)
            .Replace(":", String.Empty)
            .Replace("'", String.Empty)
            .Replace(",", String.Empty)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:25:02.077

你可以用任何东西替换它们：

```
textBox1.Text += lines[4].Replace("word 1 ", string.Empty)
                         .Replace(":", string.Empty)
                         .Replace("'", string.Empty)
                         .Replace(",", string.Empty); 
```

或者也许创建一个您想要删除的表达式数组，然后将它们全部替换为空。

```
string[] wordsToBeRemoved = { "word 1", ":", "'", "," };

string result = lines[4];
foreach (string toBeRemoved in wordsToBeRemoved) {
    result = result.Replace(toBeRemoved, string.Empty);
}
textBox1.Text += result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:24:07.450

你可以用`String.Replace`什么来代替它们：

```
textBox1.Text += (lines[4]
            .Replace("Word 1", String.Empty)
            .Replace(":", String.Empty)
            .Replace("'", String.Empty)
            .Replace(",", String.Empty)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:31:02.333

Guys gave good solutions, I just want to add another fast (using `StringBuilder`) and convenient (using Extension method syntax and `params` as values) solution

```
public static string RemoveStrings(this string str, params string[] strsToRemove)
{
    var builder = new StringBuilder(str);
    strsToRemove.ToList().ForEach(v => builder.Replace(v, ""));
    return builder.ToString();
} 
```

now you can

```
string[] lines = File.ReadAllLines(filename);
textBox1.Text += lines[4].RemoveStrings("word 1", ":", "'", ","); 
```

# angularjs - 从 ng-repeat 过滤更新时，AngularJS 过滤结果不更新

> ID：15597285
> 
> 赞同：2
> 
> 时间：2013-03-24T10:21:19.283
> 
> 标签：angularjs, angularjs-ng-repeat, angular-filters

使用 AngularJS `ng-repeat`，我正在过滤人员列表。结果人员的列表被传递给一个变量`filtered`。我想显示`filtered.length`.

当我调整过滤器时，过滤器可以正常工作并显示正确的人，但是有多少人（即`filtered.length`）的计数有时不会更新。

这似乎很奇怪：

```
 <br><br>
    People Selected: {{filtered.length}}<br><br>
    Cost: {{filtered.length*0.01 | currency}}
</div>
<div class="span10">
    <br><br>
    <table class="people">
        <tr ng-repeat="person in (filtered = (data.people | filter:okay))">
            <td>{{person.age}} - {{person.gender}} - {{person.tags}}</td>
        </tr>
    </table>
</div> 
```

但是，如果我`filtered.length`在页面底部显示 之后`ng-repeat`，它似乎可以工作。如果我把它放在顶部，它只有 80% 的时间有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:43:45.540

可以将过滤器方法移动到控制器，以便您可以更新长度变量：

```
app.controller('MainCtrl', function($scope) {

  var items=[
    {name:'Jim', ok: true},
    {name:'Sue', ok: true},
    {name:'Bob', ok: false},

    ];

    $scope.$watch('filter.value',function(){     
      $scope.items=items.filter(function(item){
         return item[$scope.filter.property]==$scope.filter.value
      })
      $scope.num_items=$scope.items.length;

    });
    $scope.filter={value:true, property: 'ok'}
}); 
```

[Plunker 演示](http://plnkr.co/edit/3i8ZpQr9shRgIPTCQhFj?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:34:57.123

我找到了一个解决方案，不幸的是需要多次运行过滤器：

```
 People Selected: {{(data.people | filter:okay).length}}<br><br>
    Cost: {{(data.people | filter:okay).length*0.02|currency}} 
```

我的小数据集没问题，但如果你能在我的原始问题中看到错误，请告诉我。

# java - Java：使用类读取文件。为什么没有输出？

> ID：15597286
> 
> 赞同：1
> 
> 时间：2013-03-24T10:21:21.543
> 
> 标签：java, input, file-io

我正在尝试使用 Class In ( [http://introcs.cs.princeton.edu/java/stdlib/javadoc/](http://introcs.cs.princeton.edu/java/stdlib/javadoc/) ) 来读取文件，但我没有得到任何回报。我目前的代码是：

```
public class TestingIn {

    public static void main(String [] args){

        In file = new In("textfile.txt");
        while (!file.isEmpty()) {
            String str = file.readAll();
            System.out.println(str.substring(0, 100));
            System.out.println("abc: testing the file");
        }

        System.out.println("123: testing compilation");
    }
} 
```

目的是打印两个测试字符串和文件 textfile.txt 的前 100 个字符。该代码编译良好并打印出测试字符串“123：测试编译”，但它没有打印出字符串“abc：测试文件”或文件的前100个字符（即[http://www. gutenberg.org/files/39063/39063-0.txt](http://www.gutenberg.org/files/39063/39063-0.txt)，如果这有什么不同的话）。

我正在使用 eclipse，并且我已将 textfile.txt 放在项目的顶层。到目前为止我尝试过的事情包括查看上面链接的 API、google 搜索（这有点棘手，因为 In 这个词很常见）、搜索 stackoverflow、搜索文件输入法（主要是扫描仪提供的）、更改我的代码：

```
while (!file.isEmpty()) {
    String line = file.readLine();
    if (line.contains("mountain"))
    System.out.println(line);
} 
```

当然，将其关闭然后再打开。感谢您抽出时间来阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:25:50.360

您可以改用以下代码。

```
String line = null;
while ((line = file.readLine()) != null) {
    if (line.contains("Mountain"))
    System.out.println(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:43:17.537

代码非常好，很难我不知道 In 类的内部工作原理。

尝试以下操作：

1）通过调用以下函数确保您的文件是可读的：（假设您使用的是 java SE 7 ）

```
public static boolean isReadable(Path path) 
```

2) 正如 In 类的文档所说，关于 readAll()：“读取输入的其余部分并将其作为字符串返回。” 最好使用 In class 中给出的适当函数来倒带文件（在文件开头移动课程）。

希望能帮助到你！

# php - 忽略 PHP/MySQL 中多重下拉列表中的空值

> ID：15597287
> 
> 赞同：1
> 
> 时间：2013-03-24T10:21:26.017
> 
> 标签：php, mysql, database, drop-down-menu

我正在处理一个包含 19 个不同下拉列表的表单。每个列表都有相同的 39 个选项。我希望用户能够在一个或多个列表中选择选项并忽略其他选项。理想情况下，查询将返回 MySQL 数据库中与数据库中相应列中的所有选定选项匹配的行。

前任：

`Phoneme 1: AA <--- choice in a dropdown list of 39 items`

`Phoneme 2: <--- choice in a dropdown list of 39 items`

`Phoneme 3: CH <--- choice in a dropdown list of 39 items`

`Phoneme 4: <--- choice in a dropdown list of 39 items`

当他们点击提交时，他们将收到数据库中所有在第一个位置有音素 AA 和在第三个位置有音素 CH 的单词。但我似乎无法弄清楚如何忽略他们没有选择的选项。在示例中，他们将音素 2 和 4 留空。我怎样才能让我的查询自动尝试搜索他们选择的那些？

预先感谢您的帮助。我一直在使用的代码如下。目前我没有得到任何结果，尽管数据库中有超过 130,000 个单词，每个单词都有自己的语音构成。

```
<?php

include 'db_connect.php';

//submitted form variable definitions
$phon1=$_POST['phon1'];
$phon2=$_POST['phon2'];
$phon3=$_POST['phon3'];
$phon4=$_POST['phon4'];
$phon5=$_POST['phon5'];
$phon6=$_POST['phon6'];
$phon7=$_POST['phon7'];
$phon8=$_POST['phon8'];
$phon9=$_POST['phon9'];
$phon10=$_POST['phon10'];
$phon11=$_POST['phon11'];
$phon12=$_POST['phon12'];
$phon13=$_POST['phon13'];
$phon14=$_POST['phon14'];
$phon15=$_POST['phon15'];
$phon16=$_POST['phon16'];
$phon17=$_POST['phon17'];
$phon18=$_POST['phon18'];
$phon19=$_POST['phon19'];

//-query  the database table

$sql = '';
if ($phon1!=0) {
    $sql .= ' AND phon1 LIKE ' . $phon1;
}

if ($phon2!=0) {
    $sql .= ' AND phon2 LIKE ' . $phon2;
}

if ($phon3!=0) {
    $sql .= ' AND phon3 LIKE ' . $phon3;
}

if ($phon4!=0) {
    $sql .= ' AND phon4 LIKE ' . $phon4;
}

if ($phon5!=0) {
    $sql .= ' AND phon5 LIKE ' . $phon5;
}

if ($phon6!=0) {
    $sql .= ' AND phon6 LIKE ' . $phon6;
}

if ($phon7!=0) {
    $sql .= ' AND phon7 LIKE ' . $phon7;
}

if ($phon8!=0) {
    $sql .= ' AND phon8 LIKE ' . $phon8;
}

if ($phon9!=0) {
    $sql .= ' AND phon9 LIKE ' . $phon9;
}

if ($phon10!=0) {
    $sql .= ' AND phon10 LIKE ' . $phon10;
}

if ($phon11!=0) {
    $sql .= ' AND phon11 LIKE ' . $phon11;
}

if ($phon12!=0) {
    $sql .= ' AND phon12 LIKE ' . $phon12;
}

if ($phon13!=0) {
    $sql .= ' AND phon13 LIKE ' . $phon13;
}

if ($phon14!=0) {
    $sql .= ' AND phon14 LIKE ' . $phon14;
}

if ($phon15!=0) {
    $sql .= ' AND phon15 LIKE ' . $phon15;
}

if ($phon16!=0) {
    $sql .= ' AND phon16 LIKE ' . $phon16;
}

if ($phon17!=0) {
    $sql .= ' AND phon17 LIKE ' . $phon17;
}

if ($phon18!=0) {
    $sql .= ' AND phon18 LIKE ' . $phon18;
}

if ($phon19!=0) {
    $sql .= ' AND phon19 LIKE ' . $phon19;
}

//-run  the query against the mysql query function 
$result = mysql_query('SELECT * FROM bigdic WHERE 1=1' . $sql . 'LIMIT 0,100');
$num = mysql_numrows($result);

mysql_close();
?>

<b>Search Results:</b>
<table border="1" cellspacing="2" cellpadding="2">
    <tr>
        <th>Word</th>
        <th>Ph1</th>
        <th>Ph2</th>
        <th>Ph3</th>
        <th>Ph4</th>
        <th>Ph5</th>
        <th>Ph6</th>
        <th>Ph7</th>
        <th>Ph8</th>
        <th>Ph9</th>
        <th>Ph10</th>
        <th>Ph11</th>
        <th>Ph12</th>
        <th>Ph13</th>
        <th>Ph14</th>
        <th>Ph15</th>
        <th>Ph16</th>
        <th>Ph17</th>
        <th>Ph18</th>
        <th>Ph19</th>
    </tr>

<?
//setting up the loop
$i=0;
while($i<$num) {

    $word=mysql_result($result,$i,"word");
    $ph1=mysql_result($result,$i,"ph1");
    $ph2=mysql_result($result,$i,"ph2");
    $ph3=mysql_result($result,$i,"ph3");
    $ph4=mysql_result($result,$i,"ph4");
    $ph5=mysql_result($result,$i,"ph5");
    $ph6=mysql_result($result,$i,"ph6");
    $ph7=mysql_result($result,$i,"ph7");
    $ph8=mysql_result($result,$i,"ph8");
    $ph9=mysql_result($result,$i,"ph9");
    $ph10=mysql_result($result,$i,"ph10");
    $ph11=mysql_result($result,$i,"ph11");
    $ph12=mysql_result($result,$i,"ph12");
    $ph13=mysql_result($result,$i,"ph13");
    $ph14=mysql_result($result,$i,"ph14");
    $ph15=mysql_result($result,$i,"ph15");
    $ph16=mysql_result($result,$i,"ph16");
    $ph17=mysql_result($result,$i,"ph17");
    $ph18=mysql_result($result,$i,"ph18");
    $ph19=mysql_result($result,$i,"ph19");
?>

    <tr>
    <td><B><? echo $word; ?></B></td>
    <td><? echo $ph1; ?></td>
    <td><? echo $ph2; ?></td>
    <td><? echo $ph3; ?></td>
    <td><? echo $ph4; ?></td>
    <td><? echo $ph5; ?></td>
    <td><? echo $ph6; ?></td>
    <td><? echo $ph7; ?></td>
    <td><? echo $ph8; ?></td>
    <td><? echo $ph9; ?></td>
    <td><? echo $ph10; ?></td>
    <td><? echo $ph11; ?></td>
    <td><? echo $ph12; ?></td>
    <td><? echo $ph13; ?></td>
    <td><? echo $ph14; ?></td>
    <td><? echo $ph15; ?></td>
    <td><? echo $ph16; ?></td>
    <td><? echo $ph17; ?></td>
    <td><? echo $ph18; ?></td>
    <td><? echo $ph19; ?></td>
    </tr> 

<?
    $i++;
}

echo "</table>";

?>

<b><? echo $num; ?></b> records returned.` 
```

HTML表格：

```
<form method="post" action="search2.php?go" id="searchform2">
    Phoneme 01: <select name="phon1">
        <option value="0" selected></option>
        <option value="AA">AA</option>
        <option value="AE">AE</option>
        <option value="AH">AH</option>
        <option value="AO">AO</option>
        <option value="AW">AW</option>
        <option value="AY">AY</option>
        <option value="B">B</option>
        <option value="CH">CH</option>
        <option value="D">D</option>
        <option value="DH">DH</option>
        <option value="EH">EH</option>
        <option value="ER">ER</option>
        <option value="EY">EY</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="HH">HH</option>
        <option value="IH">IH</option>
        <option value="IY">IY</option>
        <option value="JH">JH</option>
        <option value="K">K</option>
        <option value="L">L</option>
        <option value="M">M</option>
        <option value="N">N</option>
        <option value="NG">NG</option>
        <option value="OW">OW</option>
        <option value="OY">OY</option>
        <option value="P">P</option>
        <option value="R">R</option>
        <option value="S">S</option>
        <option value="SH">SH</option>
        <option value="T">T</option>
        <option value="TH">TH</option>
        <option value="UH">UH</option>
        <option value="UW">UW</option>
        <option value="V">V</option>
        <option value="W">W</option>
        <option value="Y">Y</option>
        <option value="Z">Z</option>
        <option value="ZH">ZH</option>
    </select><br \>

    Phoneme 02: <select name="phon2">
        <option value="0" selected></option>
        <option value="AA">AA</option>
        <option value="AE">AE</option>
        <option value="AH">AH</option>
        <option value="AO">AO</option>
        <option value="AW">AW</option>
        <option value="AY">AY</option>
        <option value="B">B</option>
        <option value="CH">CH</option>
        <option value="D">D</option>
        <option value="DH">DH</option>
        <option value="EH">EH</option>
        <option value="ER">ER</option>
        <option value="EY">EY</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="HH">HH</option>
        <option value="IH">IH</option>
        <option value="IY">IY</option>
        <option value="JH">JH</option>
        <option value="K">K</option>
        <option value="L">L</option>
        <option value="M">M</option>
        <option value="N">N</option>
        <option value="NG">NG</option>
        <option value="OW">OW</option>
        <option value="OY">OY</option>
        <option value="P">P</option>
        <option value="R">R</option>
        <option value="S">S</option>
        <option value="SH">SH</option>
        <option value="T">T</option>
        <option value="TH">TH</option>
        <option value="UH">UH</option>
        <option value="UW">UW</option>
        <option value="V">V</option>
        <option value="W">W</option>
        <option value="Y">Y</option>
        <option value="Z">Z</option>
        <option value="ZH">ZH</option>
    </select><br \>

    Phoneme 03: <select name="phon3">
        <option value="0" selected></option>
        <option value="AA">AA</option>
        <option value="AE">AE</option>
        <option value="AH">AH</option>
        <option value="AO">AO</option>
        <option value="AW">AW</option>
        <option value="AY">AY</option>
        <option value="B">B</option>
        <option value="CH">CH</option>
        <option value="D">D</option>
        <option value="DH">DH</option>
        <option value="EH">EH</option>
        <option value="ER">ER</option>
        <option value="EY">EY</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="HH">HH</option>
        <option value="IH">IH</option>
        <option value="IY">IY</option>
        <option value="JH">JH</option>
        <option value="K">K</option>
        <option value="L">L</option>
        <option value="M">M</option>
        <option value="N">N</option>
        <option value="NG">NG</option>
        <option value="OW">OW</option>
        <option value="OY">OY</option>
        <option value="P">P</option>
        <option value="R">R</option>
        <option value="S">S</option>
        <option value="SH">SH</option>
        <option value="T">T</option>
        <option value="TH">TH</option>
        <option value="UH">UH</option>
        <option value="UW">UW</option>
        <option value="V">V</option>
        <option value="W">W</option>
        <option value="Y">Y</option>
        <option value="Z">Z</option>
        <option value="ZH">ZH</option>
    </select><br \>    

    <input type="submit" name="submit" value="Search">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:31:59.660

问题来自您的下拉菜单的默认值，以及对发布数组中值的测试。您还可以通过使用循环而不是`$_POST`单独测试数组的每个条目来显着缩短代码。

定义（'PHONEME_COUNT'，19）；

```
$sql = '';
for ($i = 0; $i < PHONEME_COUNT; $i++){
     $opt = 'phon'.$i;
    if (isset($_POST[$opt]) && $_POST[$opt]!='--') {
        $sql .= ' AND `'.$opt.'` LIKE ' .mysql_real_escape_string($_POST[$opt]);
} 
```

同样，在 html 部分，更改下拉标签的默认值，并使用循环构建：

```
 <?php for($i = 0; $i < PHONEME_COUNT; $I++): ?>
Phoneme <?php echo $i; ?> : <select name="phon<?php echo $i;?>">
    <option value="--" selected></option>
   <!-- options -->
   </select>

 <?php endfor; ?> 
```

# opencl - 使用 OpenCL 的矩阵向量乘法

> ID：15597299
> 
> 赞同：2
> 
> 时间：2013-03-24T10:22:21.347
> 
> 标签：opencl, matrix-multiplication, multiplication

我有 2 个不同的程序。

首先使用opencl进行矩阵-矩阵乘法。在我的 GPU 上，它产生的结果要好得多，然后在主机 CPU 上（例如，0.2 秒对 18 秒）。

其次，使用 opencl 进行矩阵向量乘法，它在 GPU 上的运行速度稍慢，然后在主机 CPU 上运行。

原因是什么？

这是内核

```
__kernel void matrixVectorMul(__global float* resultVector,
    __global float* matrixA,
    __global float* vectorB, 
    int width_A)
{
    int tx = get_global_id(0); 

    float value = 0;
    for (unsigned int k = 0; k < width_A; ++k) {
        value += matrixA[tx * width_A + k] * vectorB[k];
    }

    resultVector[tx] = value;
} 
```

和主机代码

```
#include <stdlib.h>
#define __CL_ENABLE_EXCEPTIONS
#include "cl.hpp"
#include <fstream>
#include <iostream>
#include <time.h>
#include <cmath>

#define LOCAL_SIZE 512
#define WIDTH_A (4096*2)
#define HEIGHT_A (4096*2)

float *matrix_A;
float *vector_B;
float *result_vector;
float *result_vector_host;

void randomInit(float *data, int size) {
    for (unsigned int i = 0; i < size; ++i)
        data[i] = rand() / (float)RAND_MAX;
}

void GenerateTestData() {
    srand((unsigned int)time(NULL));    

    unsigned int size_A = WIDTH_A * HEIGHT_A;
    matrix_A = new float[size_A];

    vector_B = new float[WIDTH_A];

    randomInit(matrix_A, size_A);
    randomInit(vector_B, WIDTH_A);

    result_vector = new float[WIDTH_A];
    result_vector_host = new float[WIDTH_A];
}

void PerformCalculationOnDevice(cl::Device device) {
    clock_t start_t, end_t;
    start_t = clock();
    std::vector<cl::Device> contextDevices;
    contextDevices.push_back(device);
    cl::Context context(contextDevices);

    cl::CommandQueue queue(context, device);

    std::fill_n(result_vector, WIDTH_A, 0);

    cl::Buffer cl_matrix_A = cl::Buffer(context, CL_MEM_READ_ONLY|CL_MEM_COPY_HOST_PTR, WIDTH_A * HEIGHT_A * sizeof(float), matrix_A);
    cl::Buffer cl_vector_B = cl::Buffer(context, CL_MEM_READ_ONLY|CL_MEM_COPY_HOST_PTR, WIDTH_A * sizeof(float), vector_B);
    cl::Buffer cl_result_vector = cl::Buffer(context, CL_MEM_WRITE_ONLY|CL_MEM_COPY_HOST_PTR, WIDTH_A * sizeof(float), result_vector);
    end_t = clock();
    std::cout << "Context, queue, buffers " << (float)(end_t - start_t) / CLOCKS_PER_SEC << std::endl;

    std::ifstream sourceFile("MatrixVectorMultiplicationKernel.cl");
    std::string sourceCode(std::istreambuf_iterator<char>(sourceFile),(std::istreambuf_iterator<char>()));

    cl::Program::Sources source(1, std::make_pair(sourceCode.c_str(), sourceCode.length()+1));
    cl::Program program = cl::Program(context, source);
    program.build(contextDevices);
    cl::Kernel kernel(program, "matrixVectorMul");

    int iArg = 0;
    kernel.setArg(iArg++, cl_result_vector);
    kernel.setArg(iArg++, cl_matrix_A);
    kernel.setArg(iArg++, cl_vector_B);
    kernel.setArg(iArg++, WIDTH_A);

    start_t = clock();
    queue.enqueueNDRangeKernel(kernel, cl::NullRange, cl::NDRange(HEIGHT_A), cl::NDRange(LOCAL_SIZE));
    queue.finish();

    queue.enqueueReadBuffer(cl_result_vector, CL_TRUE, 0, WIDTH_A * sizeof(float), result_vector);
    end_t = clock();
    std::cout << "enqueueNDRangeKernel and enqueueReadBuffer " << (float)(end_t - start_t) / CLOCKS_PER_SEC << std::endl;
}

void PerformCalculationOnHost() {
    float tmp;
    for(int row_A = 0; row_A < HEIGHT_A; row_A++) {
        tmp = 0;
        for(int col_A = 0; col_A < WIDTH_A; col_A++) {
            tmp += matrix_A[row_A * WIDTH_A + col_A] * vector_B[col_A];
        }
        result_vector_host[row_A] = tmp;
    }
}

int main(int argc, char** argv) {
    GenerateTestData();

    std::vector<cl::Platform> platforms;
    cl::Platform::get(&platforms);
    std::vector<cl::Device> devices;
    clock_t start_t = clock();
    for (unsigned int iPlatform=0; iPlatform<platforms.size(); iPlatform++) {
        platforms[iPlatform].getDevices(CL_DEVICE_TYPE_ALL, &devices);
        for (unsigned int iDevice=0; iDevice<devices.size(); iDevice++) {
            try {
                PerformCalculationOnDevice(devices[iDevice]);
            } catch (cl::Error error) {
                std::cout << error.what() << "(" << error.err() << ")" << std::endl;   
            }
        }
    }
    clock_t end_t = clock();
    std::cout << "Device: " << (float)(end_t - start_t) / CLOCKS_PER_SEC << " seconds" << std::endl;
    start_t = clock();
    PerformCalculationOnHost();
    end_t = clock();
    std::cout << "Host: " << (float)(end_t - start_t) / CLOCKS_PER_SEC << " seconds" << std::endl;
    int errors = 0;
    float mean_deviation = 0;
    FILE *f, *f_host;
    f = fopen("device_result", "w");
    f_host = fopen("host_result", "w");
    for(int i = 0; i < WIDTH_A; i++) {
            if(fabs(result_vector[i] - result_vector_host[i]) > 1E-3) {
                errors++;
            }
            fprintf(f, "%.2f\n", result_vector[i]);
            fprintf(f_host, "%.2f\n", result_vector_host[i]);
            mean_deviation += fabs(result_vector[i] - result_vector_host[i]);
    }
    fclose(f); fclose(f_host);
    mean_deviation /= WIDTH_A;
    std::cout << "Errors = " << errors << std::endl;
    std::cout << "Mean deviation = " << mean_deviation << std::endl;

    delete[](matrix_A);
    delete[](vector_B);
    delete[](result_vector);
    delete[](result_vector_host);
    return 0;
} 
```

当我运行它时，我得到以下结果

```
Context, queue, buffers 0.45
enqueueNDRangeKernel and enqueueReadBuffer 1.31
Device: 1.79 seconds
Host: 1.42 seconds
Errors = 0
Mean deviation = 8.78572e-05 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T01:25:52.793

在这种情况下，为了提高 GPU 效率，需要更多的工作项（每个输出值一个是不够的），并且计算/内存访问率应该更高（即尽可能多次重用值）。

我前段时间就这个问题写了几页，如果你有兴趣的话：[GPU matrix-vector product](http://www.bealto.com/gpu-gemv.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:02:34.657

您是否尝试过将本地内存用于vectorB？每个元素都被所有工作项读取，因此从本地读取它是有意义的。我在下面将本地内存大小硬编码为 8192，但你可以自己玩弄这个数字。（8192 个浮点数是 opencl 1.1/1.2 的最大值）

此外，如果可以，请尝试使用 GPU 的工作组大小为 16 的倍数（64 或 128 应该可以正常工作）。

```
__kernel void matrixVectorMul(__global float* resultVector,
    __global float* matrixA,
    __global float* vectorB, 
    int width_A)
{
    int tx = get_global_id(0);
    __local float vectB[4096*2];

    event_t copy_event = async_work_group_copy(vectB, vectorB, 4096*2, 0);
    wait_group_events(1,copy_event);

    float value = 0;
    for (unsigned int k = 0; k < width_A; ++k) {
        value += matrixA[tx * width_A + k] * vectB[k];
    }

    resultVector[tx] = value;
} 
```

# jquery - 切换禁用属性

> ID：15597301
> 
> 赞同：0
> 
> 时间：2013-03-24T10:22:52.897
> 
> 标签：jquery, performance

我正在寻找一种方法来清理/压缩/提高我当前代码段的性能：`input`&`output`已经定义了变量。

```
if (input.val().length <= 0) {
    output.attr('disabled', true);
} else {
    output.attr('disabled', false);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:24:57.217

好吧，您可以直接使用布尔表达式：

```
output.attr('disabled', input.val().length <= 0); 
```

[无偿现场示例](http://jsbin.com/uzutaq/1)| [资源](http://jsbin.com/uzutaq/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:26:29.783

你应该使用`prop`over `attr`。见这里[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

```
output.prop('disabled', (input.val().length <= 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:25:20.377

```
output.attr('disabled', (input.val().length <= 0)); 
```

# mysql - 父表中的两个外键引用同一个子表。如何构造 INNER JOIN？

> ID：15597304
> 
> 赞同：6
> 
> 时间：2013-03-24T10:22:58.237
> 
> 标签：mysql, sql, join

为简单起见，我将在这里将我的问题描述为理论问题。

想象一下，您有两张桌子—— MATCHES 和 FIGHTERS。'Fighters' 有一个战士列表（pk_fighter_id, fighter_name），其中任何两个都可以安排互相对打。“匹配”可能是一个三字段表（pk_fight_num、fk_fighter_id1、fk_fighter_id2），它跟踪这些配对。Fighter1 和 Fighter2 是引用 Fighters 表中条目的外键。

我需要获取所有战斗的列表，显示谁在与谁战斗，即“23123 | Pacquaio | Marquez”。不过，我到底该如何构建我的查询呢？

我会想象这样的事情：

```
select fk_fighter_id1, fk_fighter_id2
from matches
inner join fighters on matches.fk_fighter_id1=fighters.pk_fighter_id
inner join fighters on matches.fk_fighter_id2=fighters.pk_fighter_id; 
```

当我尝试在 Access 中模拟它时，我将它拼凑在一起，但它不起作用：

```
SELECT matches.match_no, fighters.fighter_name, fighters.fighter_name
FROM fighters 
INNER JOIN matches ON (fighters.fighter_id = matches.fighter2) AND (fighters.fighter_id = matches.fighter1); 
```

那么，有什么想法吗？我只是不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T10:28:35.520

你离你想要的很近。您只需为具有相同名称的表和投影列定义唯一别名。

```
select  a.pk_fight_num,
        b.fighter_name firstFighter, -- <<== needed also
        c.fighter_name secondFighter -- <<== needed also
from    matches a
        inner join fighters b 
            on a.fk_fighter_id1 = b.pk_fighter_id
        inner join fighters c 
            on a.fk_fighter_id2 = c.pk_fighter_id; 
```

在列名上添加别名的原因只是为了能够识别出谁是 fighter1 和 fighter2。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T10:28:18.890

如果你加入两次，你必须给一个表起别名。否则数据库将不知道您指的是哪个表`fighters`。例如：

```
select *
from matches m
inner join fighters f1 on m.fk_fighter_id1 = f1.pk_fighter_id
inner join fighters f2 on m.fk_fighter_id2 = f2.pk_fighter_id 
```

的第一个连接`fighters`别名为`f1`，第二个连接别名为`f2`。

# unix - UNIX Shell 脚本 - 保存输入文件名

> ID：15597305
> 
> 赞同：1
> 
> 时间：2013-03-24T10:23:03.343
> 
> 标签：unix, filenames, io-redirection

假设我想运行一个 shell 脚本，如下所示：

```
./script.sh < in.txt > out.txt 
```

**如何解析标准输入重定向到的文件的名称，即本例中的“in.txt”？**

我知道，如果我有：

```
./script.sh in.txt out.txt 
```

我可以在脚本文件中使用以下内容来获取“in.txt”

```
eval var1="$1" 
```

但我无法弄清楚输入重定向。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:13:08.860

首先，您不需要“评估”任何东西：

```
var1="$1" 
```

足够的。

第二：你不能，除非你对“/dev/stdin”、“/proc/self/fd/0”或你的操作系统提供的任何东西感到满意；参见例如[http://plan9.bell-labs.com/sys/doc/lexnames.html](http://plan9.bell-labs.com/sys/doc/lexnames.html) - plan9 需要**添加**fd2path()，因为（惊喜，惊喜）它以前不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T20:18:48.257

这不是一个可移植的解决方案，但它适用于某些系统（当输入流是常规文件时）：

```
#!/bin/sh
echo Input file: $( readlink -f /proc/$$/fd/0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:32:53.673

做就是了：

```
#!/bin/sh
infile=$1
outfile=$2

cat < $1
echo > $2 
```

或者如果你想变得更花哨，你可以改变标准输入和标准输出：

```
#!/bin/sh
1<$1
1>$2
echo "test" 
```

# android - 从android中的目录读取原始字节

> ID：15597310
> 
> 赞同：1
> 
> 时间：2013-03-24T10:23:53.097
> 
> 标签：android, linux, byte, dd

如何从 android 的 sd 卡 (/mnt/sdcard) 中读取原始字节？当然，我需要 root 访问权限，但一般情况下是否可能。在 linux 中，我可以使用 dd 命令`dd if=<source> of=<target> bs=<byte size>`并将原始字节写入临时文件。Android中的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:27:55.883

Android 在底层仍然是 Linux，并且将`dd`二进制文件作为系统的一部分。您可以像在任何其他 Linux 安装上一样使用它。你可以在`/system/bin/dd`.

# openrefine - Google Refine：在相似但不同的列上合并两个数据集？

> ID：15597315
> 
> 赞同：1
> 
> 时间：2013-03-24T10:24:19.453
> 
> 标签：openrefine

我有两个数据集，它们的共同列名略有不同。

数据集 A：

```
Name,Number
Hartlepool UA,306
Tyne and Wear Met County,683 
```

数据集 B：

```
Name,Number
Hartlepool,366
Tyne and Wear,353 
```

我认为 Google Refine / Open Refine 旨在以模糊的方式帮助协调这种混乱的数据，但[似乎并非如此](https://stackoverflow.com/questions/10472601/google-refine-recipe-for-reconciling-messy-entities-in-two-databases)。

有什么工具可以让我以模糊的方式匹配这些，而无需编写代码？如果需要，我可以很容易地编写代码，但令我惊讶的是，Google Refine 似乎并没有像我想象的那样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:03:14.620

你也可以：

1.  去掉所有标点符号并将地址单元格视为一个大长字符串，如果它不在一个单元格中，则需要使用一些 join()。一旦它是单个单元格中的大字符串，然后使用 Facet -> Custom Text Facet ->指纹（） GREL 函数。

    ```
    fingerprint(value)
    value.fingerprint() 
    ```

2.  使用那个大长字符串，您还可以使用聚类或自定义文本方面执行模糊分析

    ```
    value.ngramFingerprint(2) 
    ```

对于您的杂乱数据类型，这些可能仍然不是最佳解决方案......地址。特别是，如果您认为您的 2 个示例是“相同的”，但事实并非如此。因此，您需要采用 Tom 建议的方法。

但是，如果您真的想说...嘿，这两个地址中的大多数单词和数字都是相同的，并且我认为它们在我的上下文中非常接近，并且想以某种方式衡量两个字符串的接近程度指纹......那么上面的两个步骤应该让你指向正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T22:40:49.973

也许这个 [新的？] 协调服务实施可以工作并使其更容易？ [http://okfnlabs.org/reconcile-csv/](http://okfnlabs.org/reconcile-csv/)

> Reconcile-csv 是针对从 CSV 文件运行的 OpenRefine 的协调服务。它使用模糊匹配将一个数据集中的条目与另一个数据集中的条目进行匹配，有助于将唯一 ID 引入系统 - 因此它们可以用于轻松地加入您的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:53:11.643

有两种策略可以在 OpenRefine 中起作用：

1.  与 Freebase、DBpedia（使用 RDF 扩展）或其他一些强标识符源进行协调，然后使用标识符进行匹配。

2.  将列添加到每个数据集及其源（A 或 B），将列重新排列为相同的顺序，将两个数据集导入单个 Refine 项目，然后使用聚类查找重复项。

# java - 例外：“数据库行 [UnmarshalRecordImpl()] 中缺少类指示符字段。” 使用 EclipseLink JAXB (MOXy) 解组 XML 时

> ID：15597322
> 
> 赞同：3
> 
> 时间：2013-03-24T10:25:00.373
> 
> 标签：java, jaxb, eclipselink, jaxb2, moxy

是否有任何方法可以使用 @XmlDescriminatorNode/@XmlDescrimintatorValue 注释解组下一个 XML，或任何解决方法：

```
<assets>
    <asset type="full">
        <data_file role="source">
            <locale name="ru-RU"/>
        </data_file>
        <data_file role="extension">
            <locale name="ru-RU"/>
        </data_file>
        <data_file>
            <locale name="ru-RU"/>
        </data_file>
    </asset>
</assets> 
```

我的映射类：

```
@XmlRootElement(name="data_file")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlDiscriminatorNode("@role")
public abstract class BaseDataFile implements Serializable {

    @XmlPath("@role")
    @XmlAttribute(name = "role")
    private String role;

    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }
} 
```

```
@XmlRootElement(name="data_file")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlDiscriminatorValue("source")
public class SourceDataFile extends BaseDataFile {

} 
```

```
@XmlRootElement(name="data_file")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlDiscriminatorValue("source")
public class SourceDataFile extends BaseDataFile {

} 
```

```
@XmlRootElement(name="data_file")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlDiscriminatorValue("extension")
public class SourceDataFile extends BaseDataFile {

} 
```

```
@XmlRootElement(name="asset")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlDiscriminatorNode("@type")
public abstract class BaseAsset implements Serializable {

    @XmlPath("@type")
    @XmlAttribute(name = "type")
    private String type;

    @XmlPath("data_file")
    private List<BaseDataFile> dataFiles;

    public List<BaseDataFile> getDataFiles() {
        return dataFiles;
    }

    public void setDataFiles(List<BaseDataFile> dataFiles) {
        this.dataFiles = dataFiles;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }
} 
```

如果 XML 包含如下元素，但没有**“type”**属性，则会发生错误：

```
<data_file>
  <locale name="ru-RU"/>
</data_file> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:34:44.340

以下内容应该有所帮助：

**JAVA模型**

**超级班 ( `BaseDataFile`)**

以下是您的`BaseDataFile`课程的简化版本。由于您已将 XML 属性映射`role`为继承指示符，因此您无需将其也映射到对象模型中的属性。

```
import java.io.Serializable;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorNode;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlSeeAlso({SourceDataFile.class, ExtensionDataFile.class})
@XmlDiscriminatorNode("@role")
public abstract class BaseDataFile implements Serializable {

} 
```

如果您真的想将`role`XML 属性映射到对象模型中的属性，您应该使用 MOXy 的`@XmlReadOnly`属性来防止它被编组到 XML 文档（它已经被写为继承指示符）。

```
import java.io.Serializable;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorNode;
import org.eclipse.persistence.oxm.annotations.XmlReadOnly;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlSeeAlso({SourceDataFile.class, ExtensionDataFile.class})
@XmlDiscriminatorNode("@role")
public abstract class BaseDataFile implements Serializable {

    @XmlAttribute
    @XmlReadOnly
    String role;

} 
```

**子类 ( `SourceDataFile`)**

```
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorValue;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlDiscriminatorValue("source")
public class SourceDataFile extends BaseDataFile {

} 
```

* * *

**缺少继承指标**

**基类不是抽象的**

如果您的基类 ( `BaseDataFile`) 不是抽象的，那么如果缺少继承指示符，则会创建一个基类的实例。

**基类是抽象的**

由于您的基类是抽象的 MOXy 抱怨缺少继承指示符值：

```
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-44] (Eclipse Persistence Services - @VERSION@.@QUALIFIER@): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Missing class indicator field from database row [UnmarshalRecordImpl()].
Descriptor: XMLDescriptor(forum15597322.BaseDataFile --> [])
    at org.eclipse.persistence.exceptions.DescriptorException.missingClassIndicatorField(DescriptorException.java:957)
    at org.eclipse.persistence.internal.oxm.XMLRelationshipMappingNodeValue.processChild(XMLRelationshipMappingNodeValue.java:83)
    at org.eclipse.persistence.internal.oxm.XMLCompositeCollectionMappingNodeValue.startElement(XMLCompositeCollectionMappingNodeValue.java:184)
    at org.eclipse.persistence.internal.oxm.record.UnmarshalRecordImpl.startElement(UnmarshalRecordImpl.java:834)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.eclipse.persistence.internal.oxm.record.XMLReader.parse(XMLReader.java:221)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:895)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:388)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:366)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:323)
    at org.eclipse.persistence.oxm.XMLUnmarshaller.unmarshal(XMLUnmarshaller.java:367)
    at org.eclipse.persistence.jaxb.JAXBUnmarshaller.unmarshal(JAXBUnmarshaller.java:123)
    at forum15597322.Demo.main(Demo.java:23) 
```

* * *

**忽略错误**

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现（包括 MOXy 报告在编组/解组到`ValidationEventHandler`默认值期间遇到的异常）将在遇到缺少继承指示符值时出错。下面是一个设置自定义的示例，该自定义`ValidationEventHandler`表示通过`true`从`handleEvent`方法返回永不出错。

```
 Unmarshaller unmarshaller = jc.createUnmarshaller();
    unmarshaller.setEventHandler(new ValidationEventHandler() {
        @Override
        public boolean handleEvent(ValidationEvent event) {
            return true;
        }

    }); 
```

将这个答案放在一起时，我发现了以下 MOXy 错误，由于执行上述操作，该错误会将无效的文本值作为集合中的一个项目。该修复针对 EclipseLink 2.5.1。

*   [http://bugs.eclipse.org/404269](http://bugs.eclipse.org/404269)

一旦修复进入无效条目，将被忽略。这是您正在寻找的行为吗？

* * *

**了解更多信息**

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html)
*   [http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html](http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html)
*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)

# linux - 在 Bash 中使用变量的值

> ID：15597325
> 
> 赞同：-1
> 
> 时间：2013-03-24T10:25:12.733
> 
> 标签：linux, bash

嗨，我正在尝试学习和理解`Bash`. 要么我看错了，要么我的概念错了，因为我到处都看到如何初始化变量，但我没有看到解释如何使用该值。

示例：我有一个名为 的变量`FILES`，它为我提供了 X 个字符串，如果它们存在，我必须查找它们。像这样的东西：

```
FILES="inf.txt program.c" 
```

那只有 2 个，如果文件存在，我将不得不逐个查看（.txt 和 .c 文件，它们是随机的示例，可能更多）。

现在，我的问题是我不知道...将每个字符串或每个值分配给新顺序。如果它只是 1 个字符串，我想我可以寻找它，但是有几个我不知道在 bash 中是如何完成的。

而且我有点知道如何检查文件是否存在，有`[-r File]`或`-e`没有，但我没有所述变量的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:28:34.473

执行此操作的正确方法`bash`是使用数组，而不是字符串。如果您有一个名称包含空格的文件怎么办？

```
$ FILES=( "name with    space.txt" inf.txt program.c )
$ for f in "${FILES[@]}"; do
>    echo "$f"
> done 
```

我在第一个文件中放置了大量的空格，以强调`$f`在循环体中引用的重要性。尝试运行相同的代码，但使用`echo $f`（不带引号）。

在这一点上，它们只是字符串。`bash`不关心它们是否是文件名，除非您在需要文件名的上下文中使用它们，例如使用`-f`运算符（参数是文件吗？）：

```
$ FILES=( "name with    space.txt" inf.txt program.c )
$ for f in "${FILES[@]}"; do
>    if [ -f "$f" ]; then
>        echo "$f is a file"
>    else
>        echo "$f is not a file"
>    fi
> done 
```

但由于 this is `bash`, not `sh`，您应该使用条件表达式而不是`test`/`[`命令：

```
>    if [[ -f $f ]]; then 
```

使用该表达式，您可以根据需要删除引号；它们几乎都是强制性的`[...]`（我的意思是，代码将不带引号执行，但前提是不`$f`包含空格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:36:01.250

您需要使用循环遍历 $FILE 变量`for`：

```
for file in $FILES
do
[ -r "$file" ] && echo File $file exists and is readable || echo F*emphasized text*ile $file does not exists
done 
```

# c++ - C++ 与 LUA，对象设计

> ID：15597330
> 
> 赞同：-1
> 
> 时间：2013-03-24T10:25:44.160
> 
> 标签：c++, lua, game-engine

这是一个理论问题。假设我想用 C++ 制作游戏，并在其中使用 Lua 进行游戏逻辑、AI 等。我是用 C++ 还是 Lua 制作整个对象设计/层次结构？或两者？它是如何工作的？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:00:47.610

您在 C++ 中创建引擎和性能密集型库以最大限度地提高性能，并为 Lua 中的所有内容提供 API。

如果你有非常特定于游戏的东西，你可能会想用 Lua 对它们进行编码，这样你就可以重用你的游戏引擎。

你是想用 Lua 还是 C++ 编写 AI 完全取决于其他因素，我无法客观地回答你。一种选择是在 C++ 中为 AI 制作实用程序，并在 Lua 中为它们提供 API。

让我回顾一下：

*   在你用 C++ 编写代码之前，问问自己这个问题：“这个库对于大多数游戏来说是通用的吗？”
*   如果问题的答案是“否”，那么您可能希望在 Lua 中对其进行编码。
*   如果答案是“是”，那么你用 C++ 编写代码并在 Lua 中创建一个 API。

这是因为拥有游戏引擎的目的是使游戏开发从长远来看更容易、更快。您希望它拥有各种通用库和实用程序。它必须是**可重复使用**的。分离游戏逻辑和通用库还可以让您更轻松地更改整个游戏，而不会弄乱它的核心。

您的问题并不完全客观，所以我给出的答案有利于**性能**和**可能更好的工作流程**。

（我恰好在做同样的事情。）

# android - 在特定序列后播放声音的多点触控图像

> ID：15597337
> 
> 赞同：4
> 
> 时间：2013-03-24T10:26:27.500
> 
> 标签：android, multi-touch

我很困惑如何开始构建如下所示的应用程序。

`Scenario:`我有一个图像，其中两个铃铛（bell-1，bell-2）像挂着一样。我的`pendulum`目的是-

1.  如果我扫动 bell-1，它会从右侧移动到左侧（钟摆的作用）并发出声音。
2.  如果我扫 bell-2，它会像 bell-1 一样。
3.  如果我扫过 bell-1 和 bell-2，两个铃铛都会从左到右到左（像钟摆一样）并发出声音。

我的问题是：**做这样一个支持所有安卓设备的应用程序的最佳方法是什么。**

任何帮助，如文档、链接或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:16:24.067

我认为你有两个主要任务。

1.  创建一个钟摆
2.  播放多种声音

创建一个钟摆你可以看到这个[项目](https://github.com/chiuki/android-pendulum-animation)。这里从xml指定动画是关键部分

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromDegrees="15"
  android:toDegrees="-15"
  android:pivotX="50%"
  android:pivotY="0%"
  android:duration="2000"
  android:repeatMode="reverse"
  android:repeatCount="-1"/> 
```

并使用[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)播放多种声音。你可以在那里找到很多例子。

# java - 将起始字母更改为大写

> ID：15597342
> 
> 赞同：1
> 
> 时间：2013-03-24T10:27:04.783
> 
> 标签：java, string, capitalization

我正在使用 Java，我有一个字符串，并且想将单词的第一个字母变成大写（每个单词用逗号分隔）。

我知道使用`WordUtils.capitalize(str)`它是可能的，但我所拥有的如下。

```
String str = "companies,user,"; 
```

我知道`split`并且`Wordutils`会做这项工作，但我正在寻找单线。

* * *

输出看起来是一个字符串

```
Companies, User
^         ^^ 
```

## 或者

```
Companies,User
^         ^ 
```

## 并不是

```
Companies,user
^         ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:03:19.180

您可以在单行中尝试以下操作！：

```
String str = "companies,user,";
        str = String.valueOf(str.charAt(0)).toUpperCase() + str.substring(1,str.indexOf(","))+
            str.substring(str.indexOf(","),str.indexOf(",") + 1) + String.valueOf(str.charAt(str.indexOf(",") + 1)).toUpperCase() + str.substring(str.indexOf(",") + 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:30:36.040

Quite simply:

```
String str = "companies,user,";
String strCaps = Character.toUpperCase(str.charAt(0)) + str.substring(1); 
```

**Edit**: The only way to make it a single line is to make it a method, and use the method, like so:

```
public static void main(String[] args)
{
    String str = "companies,user,";
    System.out.println(capitaliseEach(str));
}

static String capitaliseEach(String string)
{
    StringBuilder sb = new StringBuilder();
    String[] split = string.split(",");
    for(int i = 0; i < split.length; i++)
    {
        if(split[i] != null && split[i].length() >= 2)
        {
            sb.append(Character.toUpperCase(split[i].charAt(0))).append(split[i].substring(0));
        }
        if((i + 1) < split.length)
        {
            sb.append(",");
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:14:50.143

clojure 之类的函数式语言非常适合这种情况。由于 clojure 是一种 jvm 语言，因此您可以从 java 中评估 clojure 代码。如果你绝望，即使是一个班轮：

```
RT.var("clojure.core", "eval")
      .invoke(RT.var("clojure.core", "read-string")
           .invoke(
              "(clojure.string/join \", \" " +
                "(map clojure.string/capitalize " +
                  "(clojure.string/split \"companies,user,\" #\",\")))")); 
```

普通的clojure版本：

```
(clojure.string/join 
   ", " (map clojure.string/capitalize 
          (clojure.string/split "companies,user," #","))) 
```

老实说，你永远不会想要那样做！但是，由于您正在寻找单线，我想这值得一玩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:49:39.830

intiCap 的可重复使用方法

```
public class YarlagaddaSireeshTest{

    public static void main(String[] args) {
        String FinalStringIs="";
        String testNames="Sireesh,Yarlagadda";
        String[] name=testNames.split(",");

        for(String nameIs :name){
        FinalStringIs+=getIntiCapString(nameIs)+","
                ;
        }
        System.out.println("Final Result "+ FinalStringIs);

    }

    public static String getIntiCapString(String param) {
        if(param != null && param.length()>0){          
            char[] charArray = param.toCharArray(); 
            charArray[0] = Character.toUpperCase(charArray[0]); 
            return new String(charArray); 
        }else{
            return "";
        }
    }
} 
```

# javascript - Jquery 按钮数组

> ID：15597343
> 
> 赞同：3
> 
> 时间：2013-03-24T10:27:18.423
> 
> 标签：javascript, jquery, jquery-ui, typeerror

我正在编写一段代码，它将显示所有具有 class="Short" 的 jquery 按钮的按钮标签

我正在使用以下代码：-

```
$('.Short').button();
var all_short_btns = $(".Short");
for(i=0; i< all_short_btns.length; i++){
   alert(all_short_btns[i].button( "option", "label" ));
} 
```

html是：

```
<button class="Short">Label1</button>
<button class="Short">Label2</button>
<button class="Short">Label3</button>
<button class="Short">Label4</button>
<button class="Short">Label5</button>
<button class="Short">Label6</button> 
```

我收到错误：

> 未捕获的类型错误：对象 # 没有方法“按钮”

我的问题是如何获取每个按钮元素的标签？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:29:08.163

您使用了错误的方法，用于`.eq(i)`获取特定项目，然后通过调用获取文本`.html()`。

[jsFiddle](http://jsfiddle.net/Tyriar/25eWd/)

```
var all_short_btns = $(".Short");
for(i=0; i< all_short_btns.length; i++){
    alert(all_short_btns.eq(i).html());
} 
```

或者，您可以使用`$.each()`，但它比本机`for`循环慢很多。

```
var all_short_btns = $(".Short");
$.each(all_short_buttons, function (i, item) {
    alert(item.html());
}); 
```

## 更新

由于 OP 使用的是 jQuery UI `.html()`，因此会打印出`<span>`自动生成的内容并包装内容。发生错误是因为当我们需要 jQuery 对象时，您使用的`[i]`是获取原始 JavaScript 对象。`.eq()`获取该索引处的 jQuery 对象。

[jsFiddle](http://jsfiddle.net/Tyriar/RqupB/)

```
all_short_btns.eq(i).button("option", "label") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:31:13.930

这可能会帮助您：

```
$(".short").each(function(){
    alert($(this).text());
})

$(".short").each(function(){
    alert($(this).html());
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T10:32:17.240

您可以使用`innerText`属性*设置或检索对象的开始和结束标记之间的文本。*

所以试试这个。

```
var all_short_btns = $(".Short");
for(i=0; i< all_short_btns.length; i++){
   alert(all_short_btns[i].innerText);
} 
```

或者，您也可以使用`eq(i)`来获取它。

```
for(i=0; i< all_short_btns.length; i++){
   alert(all_short_btns.eq(i).html());
} 
```

[JS 小提琴示例](http://jsfiddle.net/25eWd/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:34:28.980

谢谢大家，我发现这也有效：-

```
alert(all_short_btns.eq(i).button( "option", "label" )); 
```

# jquery - 用jquery添加国家自动完成和城市自动完成的最简单方法是什么

> ID：15597344
> 
> 赞同：0
> 
> 时间：2013-03-24T10:27:19.550
> 
> 标签：jquery, autocomplete, geolocation

我正在寻找将 1\. 自动完成字段添加到国家/地区的最简单方法。2.自动完成字段到城市。

我在网上搜索并发现一些不好的例子，我不介意使用 txt 文件（但如果你推荐，请提供一个）或免费的网络服务。

请[GeoNames](http://ws.geonames.org/searchJSON?name_startsWith=Chic&country=US)不支持城市，而只支持国家。maxmind 仅提供 csv，但缺少代码。（[http://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:44:22.547

如果您需要灵活的解决方案

1.  您需要名称类似于 Maxmind 的数据库
2.  您需要具有自动完成支持的搜索引擎，例如 IndexDen 参见[http://indexden.com/documentation/tutorial-autocomplete](http://indexden.com/documentation/tutorial-autocomplete)

# python - Django：排除在另一个表中有链接的表的所有行

> ID：15597345
> 
> 赞同：1
> 
> 时间：2013-03-24T10:27:20.023
> 
> 标签：python, django, django-models, django-views

我的models.py中有两个表，我想返回表A中具有特定slug值并且不作为外键出现在表B中的所有结果。

我在models.py中的表格：

```
class ModelA(models.Model):
    slug = models.SlugField()
    title = models.CharField(max_length=100)

class ModelB(models.Model):
    modela = models.ForeignKey(ModelA)
    amount = models.CharField(max_length=10) 
```

view.py 中返回 ModelA 中所有具有相同 slug 的行（如 ModelA.objects.filter(slug=slug) ）并且没有任何指向 ModelB 的链接的方式是什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:34:41.417

您应该能够使用[`filter`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#filter)with [`isnull`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#std%3afieldlookup-isnull)：

```
>>> ModelA.objects.filter(slug__iexact="foo", modelb__isnull=True) 
```

# decomposition - 合成算法，识别是否为BCNF并找到候选key

> ID：15597347
> 
> 赞同：1
> 
> 时间：2013-03-24T10:27:22.293
> 
> 标签：decomposition, 3nf

我在合成算法和寻找候选键方面遇到了一些问题，因为我觉得我课程中提供的幻灯片仅提供了如何推断它们的示例，没有任何解释。

因此，如果我们有一个具有单一关系 R[ABCDE] 的关系模式，其函数依赖关系为：{AB->CD, C->AD, E->B}，

到目前为止，我已经到了这里：规范的 shell 是：C={AB->C，C->D，E->B}，候选键是：EB AE 和 EC。

1) 应用合成算法找到无损且保持依赖关系的 3NF 分解。

我知道如何检查分解是否实际上是无损的和保持依赖关系，但不知道如何到达那里。请看下面：

i) 为 F 构造一个规范覆盖 C

ii) 定义 C'={X union Y | X->Y“属于”Consol(C)} 这个我知道

iii) 将 C 定义为 C' 的子集，其中删除了所有被另一个包含的关系。这我知道我是否认为正确。

iv) 如果 C 已经包含 R 的超键，则将 C2 定义为 C。否则，将 C2 定义为 C 并集 K 的某个键 K。这一步看不懂。

2）彻底激发3）中得到的分解是否也在BCNF中。

提前致谢！

# magento - 找到相应控制器的最佳方法是什么

> ID：15597348
> 
> 赞同：0
> 
> 时间：2013-03-24T10:27:52.283
> 
> 标签：magento, magento-1.7, recurring-billing

我正在尝试解决在可配置产品下重复出现简单产品的问题。我想我找到了[Magento 提供的解决方案：How to display recurring profile information for a configurable recurring product](https://stackoverflow.com/questions/15531348/magento-how-to-display-recurring-profile-information-for-a-configurable-recurri)

我真正的问题是，在 Magento 中，你怎么知道要编辑哪个控制器 php 文件？或者，我是否完全误解了程序？我注意到 Alan Storm 的 Commerce Bug 作为一种选择。我还尝试打开开发者工具来启用模板和块名称路径提示，这似乎对设计更有帮助。

但是，对于我要修复的错误，我怎么知道要编辑哪个 php 文件，因为有这么多连接的组件（目录、库存、计费等）？

这是一个更具程序性的问题，但也可以随意评论具体细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:20:02.620

您可以看到最初由 url 调用的动作控制器，它始终由以下方式构建：模块/控制器/动作

即，将产品添加到购物车时，网址为：checkout/cart/add

因此，您必须查看的控制器位于 app/code/core/Mage/Checkout/controllers/CartController.php 中，其中是 addAction 方法。

# java - 图像和 html 链接到 jsp 的链接不起作用

> ID：15597355
> 
> 赞同：0
> 
> 时间：2013-03-24T10:28:31.423
> 
> 标签：java, html, jsp, browser, anchor

这是我的 login.jsp 页面：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  
    pageEncoding="ISO-8859-1"%>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
    <head>  
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">  
        <title>Login Page</title>  
    </head>  
    <body>  

        <div align="center">  
            <img src="<%= request.getContextPath() %>/image/asd.jpg">  
        </div>  
        <div id=loginFormDiv align="center">  
            <form name="loginform" method="post" action="<%= request.getContextPath() %>/login">  
        <br><br>  
            <table align="center"><tr><td><h2>Login Authentication</h2></td></tr></table>  
            <table width="300px" align="center" style="border:1px solid #000000;background-color:#efefef;">  
                <tr><td colspan=2></td></tr>  
                <tr><td colspan=2> </td></tr>  
                <tr>  
                    <td><b>Login Name</b></td>  
                    <td><input type="text" name="userName" value=""></td>  
                </tr>  
                <tr>  
                    <td><b>Password</b></td>  
                    <td><input type="password" name="password" value=""></td>  
                </tr>  
                <tr>  
                    <td></td>  
                    <td><input type="submit" name="Submit" value="Submit"></td>  
                </tr>  
                <tr><td colspan=2> </td></tr>  
            </table>  
        </form>  
    </div>  
    <div id="changePasswordLinkId" align="center">  
        <a href="./ChangePassword.jsp">Change Password</a>  
    </div>  
 </body>  
 </html> 
```

在这里，当我第一次加载此页面时，图像以及指向另一个 div id =“changePasswordLinkId”的 jsp 的链接不起作用。该图像未显示，单击锚链接再次显示登录页面。但是，如果我登录一次并使用浏览器的后退按钮，它们就可以工作。此外，来自谷歌浏览器的控制台日志发出警告：-“资源解释为图像，但使用 MIME 类型 text/html 传输：“htt_p://localhot:8080/Tool/image/asd.jpg>”。ChangePassword.jsp： 12"

请帮我解决这个问题。我将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:41:27.753

我试过了，它工作正常 - 第一次。

您使用的是哪个服务器？

你是如何部署jsp的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:45:13.240

Java EE 应用服务器可以托管多个“webapp”。紧接在端口之后的 URI 部分（以粗体显示）称为 webapp 的 contextPath。

在这种情况下，'index.html' 位于名为 myWebApp 的 webapp 的根目录中。

在您发布的那些链接中，开发人员（正确地）通过从请求对象中读取 contextPath 来构建相对链接。这允许重命名 web 应用程序，而无需更改应用程序中的每个链接。

# c# - 从网站下载音频文件

> ID：15597358
> 
> 赞同：0
> 
> 时间：2013-03-24T10:28:38.990
> 
> 标签：c#, audio, web, download, html-agility-pack

我想做的也是从网站下载音频文件。单击小耳罩即可播放音频文件，并触发声音播放。我想知道是否可以找到并下载声音。

我试图找到它的尝试：

```
public void grabAudio()
    {
        string s = "http://pokedream.com/pokedex/pokemon/bulbasaur";

        HtmlWeb hw = new HtmlWeb();
        HtmlAgilityPack.HtmlDocument doc = hw.Load(s);

        var audio = doc.DocumentNode.SelectNodes("//div[@class='triggers']//img#pokecry-trigger")[0];
        if (doc.DocumentNode.SelectNodes("//div[@class='triggers']//img#pokecry-trigger")[0] != null)
        {
            //I have no idea what im doing :(
        }

    } 
```

[我想要获取的图片](http://gyazo.com/cdad274428b15c64f21d24c644516797) 并 [链接到网站](http://pokedream.com/pokedex/pokemon/bulbasaur)

任何和所有的帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:42:27.947

首先，如果您没有网站作者的许可，您可能不应该这样做。

现在，如果您*确实*有适当的许可和这样做的正当理由；您可以检查源并查看图像没有附加明显的功能 - 并且图像不播放声音。所以这个功能很可能是用 JavaScript 控制的。

因此，您开始浏览 JavaScript，寻找附加到感兴趣元素的内容。您应该在以下位置找到此代码`pokedex.js`：

```
$('#pokecry-trigger').click(function() {
    $('#pokecry').html('<embed src="/pokedex/images/cries/' + $('#identifier').text() + '.mp3" />');
  }); 
```

因此，当您单击图像时，会在`embed`标记中添加一个标签。查看 src 标记，您可以得出文件在 中的结论，`/pokedex/images/cries/<id>.mp3`该站点将 ID 输出到带有 ID 的标记中`#identifier`。

从那里您只需找到所需的每种声音的 ID，然后下载。这是通过下载 HTML 标记、找到标识符 DIV 并将其插入到 URL 模板中来完成的，如上所述：

```
string id = "001"; // found in the markup
string url = String.Format("http://pokedream.com/pokedex/images/cries/{0}.mp3", id);
using(var cli = new System.Net.WebClient()) 
{
    var mp3Data = cli.DownloadData(url);
} 
```

# ruby-on-rails - Bundler 找不到 gem “activesupport” 的兼容版本

> ID：15597361
> 
> 赞同：13
> 
> 时间：2013-03-24T10:28:50.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, activesupport

我迁移到 3.2.13 版本的 rails 并收到此错误，我该如何摆脱这个错误？

```
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Bundler could not find compatible versions for gem "activesupport":
  In snapshot (Gemfile.lock):
    activesupport (3.2.12)

  In Gemfile:
    rails (= 3.2.13) ruby depends on
      activesupport (= 3.2.13) ruby

Running `bundle update` will rebuild your snapshot from scratch, using only
the gems in your Gemfile, which may resolve the conflict. 
```

编辑

```
sinatra (1.3.6)
  rack (~> 1.4)
  rack-protection (~> 1.3)
  tilt (~> 1.3, >= 1.3.3) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T22:07:06.687

对于不小心访问此链接的任何人（当时谷歌首先提供此页面）；查看这篇文章[Bundler 找不到 gem 的兼容版本，正在更新 Rails 应用程序](https://stackoverflow.com/questions/8858706/bundler-could-not-find-compatible-versions-for-gem-updating-rails-app)

我的步骤已运行

```
gem update rails

rm Gemfile.lock 
```

更改我的 Gemfile 以引用我想要的 rails 版本

```
gem 'rails', '3.2.13' 
```

终于跑了

```
bundle install 
```

我没有按照@PistachioPony 的建议尝试捆绑更新，但这可能会取代删除锁定文件并重建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T17:15:22.637

带有 Rails 4 的 ActiveAdmin 要求您跟踪 master。从 github 页面：

> 我们目前正在开发 1.0.0，就依赖项而言，它将我们从 meta_search 转移到 Ransack 并添加了 Rails 4 支持。您可以通过 tracking master 获得 Rails 4 和 4.1 支持：

`gem 'activeadmin', github: 'gregbell/active_admin'`

另外，请确保您***不要***使用[主页上的文档，](http://activeadmin.info/documentation.html)因为它们对于 rails 4 已经过时。有[更新的](https://github.com/gregbell/active_admin/blob/master/docs/0-installation.md)带有 master 的 rails 4 文档。

我不确定这个答案会持续多久，所以你应该在盲目跟踪大师之前[检查 github](https://github.com/gregbell/active_admin)看看事情是否发生了变化。另外，请注意，跟踪大师通常意味着您将获得开发更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T11:15:05.977

像这样：`gem 'activeadmin', github: 'gregbell/active_admin'`在 da gemfile

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T15:22:41.940

如果您将 rails 更改为 3.2.13，那么还将 gemfile.lock 中的活动支持更改为 3.2.13，然后：

跑：

$捆绑更新

关闭你的服务器：

$控制c

然后确保在您的终端中***您位于项目文件夹中***：重新启动服务器：

$ 导轨服务器

刷新浏览器

# core-data - 了解核心数据中 NSManagedObjectContext 的使用

> ID：15597365
> 
> 赞同：0
> 
> 时间：2013-03-24T10:29:02.517
> 
> 标签：core-data, nsmanagedobjectcontext

我认为我在为 DO STUFF 创建代码方面并不差。但我在存储我的变量和持久数据方面很糟糕。我正在使用 ARC 和故事板（考虑放弃故事板，因为它们似乎在做一些我看不到的事情）。

我寻求帮助。到目前为止，我无法从我找到的来源中掌握如何做我想做的事情的概念。

我的想法是：向用户呈现 tableviewcontroller 类型的 viewController，它向他显示每行的字符串（股票报价名称）。我认为这些字符串需要持久存储在 coredata 中。该应用程序允许用户在第二个视图控制器中添加字符串。这些也需要与第一个数据一起持久保存。然后，应用程序需要获取一些基于 Web 的数据并将它们与字符串（股票价格）一起显示。当应用程序退出时，它可以删除基于 Web 的数据并只保留字符串（股票报价名称）。

我寻求帮助。

该应用程序不显示任何警告并且编译没有任何问题。

然后它在**NSLog(@"2");之后立即崩溃** 在`viewDidLoad`下面的代码中，**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+entityForName：nil 不是搜索实体名称“Stock”的合法 NSManagedObjectContext 参数**

```
Appdelegate.h
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

Appdelegate.m
@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (void)prvniSpusteni
{
    NSLog(@"Firt run of app, example Stocks added.");
    NSManagedObjectContext *context = [self managedObjectContext];

    // Creating, Apple, Google, Bekrshire B

    Stock *akcie1 = [NSEntityDescription insertNewObjectForEntityForName:@"Stock" inManagedObjectContext:context];
    akcie1.ticker = @"AAPL";
    akcie1.index = [NSNumber numberWithInt:0];
    Stock *akcie2 = [NSEntityDescription insertNewObjectForEntityForName:@"Stock" inManagedObjectContext:context];
    akcie2.ticker = @"HIMX";
    akcie2.index = [NSNumber numberWithInt:1];
    Stock *akcie3 = [NSEntityDescription insertNewObjectForEntityForName:@"Stock" inManagedObjectContext:context];
    akcie3.ticker = @"BRK-B";
    akcie3.index = [NSNumber numberWithInt:2];

    NSError *error;
    if (![context save:&error]) {
        NSLog(@"Error: %@", [error localizedDescription]);
    }
    [self aktualizaceDatTrhu]; // method to get data from web declared in Appdelegate aswell.
}

ViewController.h
@property (nonatomic, strong) NSManagedObjectContext* managedObjectContext;
@property (nonatomic, strong) NSArray *ulozeneAkcie;

ViewController.m
@interface ViewController ()
@end

@implementation ViewController
@synthesize managedObjectContext;
@synthesize ulozeneAkcie;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSManagedObjectContext *context = managedObjectContext;
    **NSLog(@"2");**
    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Stock" inManagedObjectContext:context];
    NSLog(@"3");
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSLog(@"4");
    [request setEntity:entityDescription];
    NSLog(@"5");
    // Nastav trideni do arraye
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                        initWithKey:@"index" ascending:YES];
    [request setSortDescriptors:@[sortDescriptor]];
    NSLog(@"6");
    NSError *error;
    ulozeneAkcie = [managedObjectContext executeFetchRequest:request error:&error];
    NSLog(@"7");
    } 
```

现在我认为问题在于视图控制器以某种方式无法访问托管对象上下文。但我认为 coredata 将被视为全局数据，可以从应用程序的任何部分访问，例如一盒乐高积木。

我最深切地感谢任何阅读到这里的人，甚至更深地感谢任何提供见解的人。

如果有人喜欢它，我很想举一个例子，说明在哪里放置哪个属性，在哪里放置哪个合成器和钩子，这样它才能真正起作用。

PS：我在网上发现了一些“类似”的问题，那些谈到将 MOC 传递给 viewController，但由于我的应用程序是用故事板制作的，我错过了很多钩子和插座，添加它们并不能解决任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:44:47.373

根据您的问题，您应该检查两个不同的事情。

首先，您是否正确设置了核心数据堆栈？通常，就像 Apple 所做的那样，这可以在应用程序委托中进行设置。

那么，你是否正确地注入了上下文引用？这可以如下执行。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"segueIdentifier"])
    {
        ViewController *vc = [segue destinationViewController];
        vc.managedObjectContext = mainContext; // pass here the context that you created in app delegate or you grabbed from another property, for example
    }
} 
```

现在，在你的`viewDidLoad`

```
[super viewDidLoad];

if(!self.managedObjectContext) // see if context is nil
    NSAssert(NO, @"The context cannot be nil"); // just for test purposes

NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Stock" inManagedObjectContext:context];
NSLog(@"3");
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSLog(@"4");
[request setEntity:entityDescription];
NSLog(@"5");
// Nastav trideni do arraye
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                    initWithKey:@"index" ascending:YES];
[request setSortDescriptors:@[sortDescriptor]];
NSLog(@"6");
NSError *error;
ulozeneAkcie = [managedObjectContext executeFetchRequest:request error:&error];
NSLog(@"7"); 
```

# svg - 是否可以在 svg 矩形中设置负宽度？

> ID：15597368
> 
> 赞同：5
> 
> 时间：2013-03-24T10:29:47.763
> 
> 标签：svg, jquery-svg, rect

我想根据鼠标移动移动矩形。请参考以下链接。

[http://atomicrobotdesign.com/blog_media/draw/draw1.html](http://atomicrobotdesign.com/blog_media/draw/draw1.html)

在 mousedown 事件中获取矩形开始位置并开始拖动它将在鼠标移动事件中创建矩形。但是当我移动到上一个值时（即移动到小于鼠标按下的值意味着它将返回负值）所以宽度变为负值。

上面的链接是画布矩形。但我创建了具有相同逻辑的 svg 矩形。

不支持矩形的负宽度？或者我如何根据鼠标移动移动矩形？

怎么了？

我的代码片段。

```
ChartMouseDown:function(e){

//       e = this.normalizeMouseEvent(e);

      var mousedownCords=this.calMousePosition(e);
      this.mouseDownX=mousedownCords.X;
      this.mouseDownY=mousedownCords.Y;

      this.chartMouseDownPoint= this.GetValuebyPoint(Math.abs(this.mouseDownX-this.model.m_AreaBounds.X),Math.abs(this.mouseDownY-(this.model.m_AreaBounds.Y + this.model.m_AreaBounds.Height)));
      this.zoomingX=true;

    },

ChartMouseMove: function (evt) {

    if( this.zoomingX)
    {

    var mouseMoveX,mouseMoveY;

     var mouseMoveCords=this.calMousePosition(evt);
      mouseMoveX=mouseMoveCords.X;
      mouseMoveY=mouseMoveCords.Y;
      $(this.ZoomAreaRect).remove();
      var width =  Math.abs(mouseMoveX - this.mouseDownX);
      var height = mouseMoveY - this.mouseDownY;
      var x;
      if(mouseMoveX > this.mouseDownX)
      x= this.mouseDownX;
      else
      x= mouseMoveX;

       this.ZoomAreaRect = document.createElementNS("http://www.w3.org/2000/svg", "rect");

        $(this.ZoomAreaRect).attr({
            'id': 'ZoomArea', 'x': x, 'y': this.model.m_AreaBounds.Y, 'width': width, 'height': this.model.m_AreaBounds.Height,
            'fill': 'gray', 'stroke-width': 1, 'stroke':'gray'
        });

       $(this.ZoomAreaRect).appendTo(this.SvgObject);

    }

 calMousePosition:function(e)
    {
     var matched = jQuery.uaMatch( navigator.userAgent );
     var browser = {};
     var mouseX,mouseY;
     if(matched.browser.toLowerCase()=="mozilla")
        {
        mouseX = (e.pageX)-  $(this.SvgObject).parent().offset().left;
        mouseY=  (e.pageY) - $(this.SvgObject).parent().offset().top;
        }
        else
        {
        mouseX =  (e.pageX +document.documentElement.scrollLeft)-$(this.SvgObject).offset().left;
        mouseY =  (e.pageY + document.documentElement.scrollTop) - $(this.SvgObject).offset().top;
        }

        return { X: mouseX, Y:mouseY};

    }, 
```

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T13:00:20.250

*   The canvas specification places [no restriction on width or height being negative](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#drawing-rectangles-to-the-bitmap), so if they were negative the rectangle would draw in the opposite direction.

*   The SVG specification says that if width or height are negative then the [rectangle is not drawn](http://www.w3.org/TR/SVG/shapes.html#RectElement).

If you want to implement this in SVG you'll have to make sure the rectangles width/height are always positive and calculate the x/y accordingly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-15T04:59:11.067

如果你有两个坐标数组开始和结束，`(start[0],start[1])`左上角（或右下角）和`(end[0],end[1])`左上角（或右下角）然后这是绘制该矩形的算法，它不关心这些坐标是否被切换

```
 <rect
                fill="rgba(255,0,0,0.3)"
                x={Math.min(start[0], end[0])}
                y={Math.min(start[1], end[1])}
                width={Math.abs(start[0] - end[0])}
                height={Math.abs(start[1] - end[1])}
              /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-15T12:06:33.400

您可以使用多边形而不是矩形，点为

```
points={`${x},${y} ${x + width},${y} ${x + width},${y + height} ${x},${y + height}`} 
```

# android - Unable to execute dex: Multiple dex files define Lorg/apache/maven/artifact/Artifact

> ID：15597371
> 
> 赞同：1
> 
> 时间：2013-03-24T10:30:11.497
> 
> 标签：android, robolectric, android-annotations

I have an Android project with Robolectric.

My application related classes are placed in `src/main/java` and test related classes in `src/test/java`.

I have these test dependencies in my `pom.xml`

```
 <dependency>
            <groupId>org.robolectric</groupId>
            <artifactId>robolectric</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency> 
```

When building and deploying from console with `mvn package android:deploy` everything is ok. Problem occurs when launching project from Eclipse (Juno).

```
[2013-03-24 12:27:26 - Dex Loader] Unable to execute dex: Multiple dex files define Lorg/apache/maven/artifact/Artifact;
[2013-03-24 12:27:26 - my-app] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lorg/apache/maven/artifact/Artifact; 
```

It appears that dependencies that are required for Robolectric only are included. What am I doing wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:49:51.603

在文件夹 bin/dexedlibs 你有一个重复的 jar

1.  去掉它
2.  大扫除
3.  重试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:52:25.727

经过一番调查，这似乎是与 m2e-android 相关的[问题](https://github.com/rgladwell/m2e-android/issues/52 "Robolectric 不能从 Eclipse 中运行")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T00:20:26.347

我曾经遇到过同样的错误。最后，我发现它是由两次包含 MoPubView 的 jar 引起的：

```
- On the one hand, I imported the MoPubView project via Eclipse Menu function "File | Import";  

 -> then right click my project, select "Properties"; 
 -> In the left bar, select "android";
 -> In the "Library" section at the right, press [Add] button...  

- On the other hand, I copied the mopub-sdk.jar to the /libs folder of my project. 
```

我删除了后者。解决了。

# mongodb - Voting in MongoDB

> ID：15597372
> 
> 赞同：12
> 
> 时间：2013-03-24T10:30:28.870
> 
> 标签：mongodb, voting, voting-system

An odd number set is recommended. My doubt is as one goes down from an odd set, we have an even number set. The number of members fluctuate between even and odd when they go down one by one. We always don’t have odd member scenario. Can some one explain how MongoDB voting works?

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-24T12:06:03.280

投票由**多数**投票成员进行。

想象一个具有三个（投票）成员的副本集。假设节点 A 是主节点，节点 B+C 是辅助节点。节点 A 宕机，因此节点 B+C 进行选举。他们仍然占多数（三分之二）。选举首先由**优先级**决定。如果两个节点 B 和 C 具有相同的优先级，那么与失败的主节点 (oplog) 相关的最新节点将获胜。假设它是节点 B。

一旦节点 A 重新活跃起来，就没有新的选举。节点 B 仍然是主节点，而 C+A 现在是从节点。

另一方面，如果两个节点出现故障，您没有多数，因此副本集不能再接受更新（应用写入），直到两个故障服务器中的至少一个变为活动状态（并由单个连接幸存节点）再次。

现在想象一个有四个（投票）成员的副本集。假设节点 A 是主节点，节点 B+C+D 是辅助节点。节点 A 宕机，因此节点 B+C+D 进行选举。他们当然占多数（四分之三）

但是，如果两个节点出现故障，则您没有多数（四分之二），因此副本集再次处于只读模式。

这就是为什么建议使用奇数的原因；如果你在 3 个成员的副本集中失去了一个成员，这与在 4 个成员的副本集中失去一个成员是一样的：你仍然获得仲裁多数并且可以选举一个新的主节点（RS 仍然可以通过以下方式选举一个新的主节点）多数）。另一方面，如果您在 3 个成员副本集或 4 个成员副本集（或 n 个成员副本集的 n/2 个成员）中失去两个成员 - 再次 - 影响是相同的：没有新的领导者可以被投票通过选举。

因此，长话短说，在副本集中拥有偶数个成员并没有冗余增益。

有关更多信息，[请参阅选举内部](http://docs.mongodb.org/manual/core/replication-internals/#election-internals)

# rest - Execute multiple CREATE UNIQUE in one cypher query through Rest API

> ID：15597377
> 
> 赞同：3
> 
> 时间：2013-03-24T10:30:48.140
> 
> 标签：rest, neo4j, cypher

Using Neo4j version 1.8.1, I'm trying to make use of the "cypher" REST entry point to insert many relationship (the query must insert the relationship, and only if necessary the destination node). I found this possibility through [http://christophewillemsen.com/streemz/8/importing-initial-data-with-the-neo4j-rest-api](http://christophewillemsen.com/streemz/8/importing-initial-data-with-the-neo4j-rest-api) blog post.

It works well if I create only one relationship but it fails as soon as I try several.

The JSON used to make the call for one relationship which is working :

```
{"query":"START n=node:node_auto_index(UserId='21000001') CREATE UNIQUE n-[:KNOWS{Label:'Friend'}]-(m{Users})", "params":{"Users" : [{"UserId":"21000003"}]}} 
```

The one I tried to make 2 relationship which is failing :

```
{"query":"START n=node:node_auto_index(UserId='21000001') CREATE UNIQUE n-[:KNOWS{Label:'Friend'}]-(m{Users})", "params":{"Users" : [{"UserId":"21000002"},{"UserId":"21000003"}]}} 
```

The error Retunred by the REST call is :

```
{
    "message": "The pattern CreateUniqueAction(List(m-[:`LOVES`]-n)) produced multiple possible paths, and that is not allowed",
    "exception": "UniquePathNotUniqueException",
    "stacktrace": "..."
} 
```

Not knowing how exactly my query is transformed inside Neo4j it's hard to find how I must change my query.

I thought that Neo4j would do 2 queries, but by the errors it seems that it is doing kind of IN statement for the other node end.

I also tried to make params as a list but it did not worked.

Thank you for your help

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:40:05.010

*请确保始终在密码查询中使用参数*

使用 rest-batch-operations 执行多个查询，请参阅[http://docs.neo4j.org/chunked/milestone/rest-api-batch-ops.html](http://docs.neo4j.org/chunked/milestone/rest-api-batch-ops.html)

```
 POST `http://localhost:7474/db/data/batch`
   Accept: application/json
   Content-Type: application/json
   [ {
     "method" : "POST",
     "to" : "/cypher",
     "body" : {
       "query" : "START n=node:node_auto_index(UserId={userId1}), m=node:node_auto_index(UserId={userId2}) CREATE UNIQUE n-[r:KNOWS{Label:{label}}]-m",
       "params" : {"userId1":"21000001", "userId2":"21000002","label":"Friend"}
     },
     "id" : 0
   },
   {
     "method" : "POST",
     "to" : "/cypher",
     "body" : {
       "query" : "START n=node:node_auto_index(UserId={userId1}), m=node:node_auto_index(UserId={userId2}) CREATE UNIQUE n-[r:KNOWS{Label:{label}}]-m",
       "params" : {"userId1":"21000003", "userId2":"21000005","label":"Friend"}
     },
     "id" : 1
   } ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:03:14.943

我曾经使用“密码查询语言”而不是 REST API。我做你想做的事情：

```
START n=node:node_auto_index('UserId:21000001'),m=node:node_auto_index('UserId:21000002 OR UserId:21000003')
CREATE UNIQUE n-[r:KNOWS{Label:'Friend'}]-m
RETURN r 
```

你可以检查这个：[http ://docs.neo4j.org/chunked/1.8/cypher-query-lang.html](http://docs.neo4j.org/chunked/1.8/cypher-query-lang.html)

对于 Rest API，您可以查看以下 URL：[http ://docs.neo4j.org/chunked/1.8/rest-api.html](http://docs.neo4j.org/chunked/1.8/rest-api.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:18:37.247

我尝试使用 Muhammad Osman 解决方案并构建一个适合我的查询，但在 REST API 中遇到另一个错误。

我试过的查询是：

> {"query":"START n=node:node_auto_index('UserId:21000001'), m=node:node_auto_index('UserId:21000002') 创建唯一 n-[r:KNOWS{Label:'Friend'}]-m START n1=node:node_auto_index('UserId:21000003'), m1=node:node_auto_index('UserId:21000005') 创建唯一 n1-[r1:KNOWS{Label:'Follow'}]-m1", "params": {}}

它给我的错误是：

> { "message": "找到匹配正则表达式`$' expected but`S' 的字符串\n\n认为我们应该在这里有更好的错误消息？请将此查询发送到 cypher@neo4j.org 帮助我们。\n\n谢谢 Neo4j 团队。\n\ n\"开始 n=node:node_auto_index('UserId:21000001'), m=node:node_auto_index('UserId:21000002') 创建唯一 n-[r:KNOWS{Label:'Friend'}]-m START n1= node:node_auto_index('UserId:21000003'), m1=node:node_auto_index('UserId:21000005') 创建唯一 n1-[r1:KNOWS{Label:'Follow'}]-m1\"\n ^", "exception ": "语法异常", "stacktrace": [...] }

据我了解，Cypher 期望查询在第一个 CREATE UNIQUE 之后结束。然而，Cypher 允许我们在一个 Cypher 中执行多个 CREATE 为什么。为什么不使用多个 CREATE UNIQUE ？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:16:46.990

你试过这个吗

```
START n=node:node_auto_index('UserId:21000001'),m=node:node_auto_index('UserId:21000002'),
n1=node:node_auto_index('UserId:21000003'),m1=node:node_auto_index('UserId:21000005') 
CREATE UNIQUE n-[r:KNOWS{Label:'Friend'}]-m ,n1-[r1:KNOWS{Label:'Follow'}]-m1 
```

# xml - 出现错误 #1007：尝试在非构造函数上进行实例化

> ID：15597385
> 
> 赞同：0
> 
> 时间：2013-03-24T10:31:36.093
> 
> 标签：xml, actionscript-3

在过去的几天里，我一直在绞尽脑汁试图弄清楚这一点：

我目前正在使用 Flashpunk 制作基于关卡的游戏。我处理关卡的方法是简单地在数组中传递一个 OGMO 编辑器文件（它基本上只是一个具有不同扩展名的 xml 文件），如下所示：

```
public static var worldOneList:Array = new Array(LEVEL_WORLD_1_1, LEVEL_WORLD_1_2,etc..);
public static var worldTwoList:Array = new Array(LEVEL_WORLD_1_1, LEVEL_WORLD_1_2,etc..);

public static var worldLists:Array = new Array(worldOneList,worldTwoList,etc...); 
```

然后以处理地图创建和关卡逻辑的类的形式调用它：

```
 public static function toLevel(worldID:int, levelID:int):void
    {
        FP.world = new LevelBase(worldLists[worldID][levelID]);
    } 
```

我可以通过关卡选择屏幕很好地访问关卡，但是在完成一个关卡并选择进入下一个关卡后，我会被抛出：

```
Error #1007: Instantiation attempted on a non-constructor. 
```

堆栈的顶部指向（在 FP 中）：

```
 public static function getXML(file:Class):XML
    {
        var bytes:ByteArray = new file;
        return XML(bytes.readUTFBytes(bytes.length));
    } 
```

奇怪的是，前两个级别会很好，然后在第三个以及之后的任何一个级别上，它都会抛出错误。

这是我用来更改级别的代码：

```
if (GlobalVar.currentLevel[1] != GlobalVar.maxLevelsInSet)
{
            LevelLists.toLevel(GlobalVar.currentLevel[0], GlobalVar.currentLevel[1] + 1);
} 
```

以及读取 ogmo 文件的代码（在 LevelBase.as 中）：

```
public function LevelBase(levelFile:Class)
{

        levelData = FP.getXML(levelFile); //Parse the .oel file and give data to levelData 
```

我猜我在做一些非常简单的错误？任何帮助，将不胜感激。干杯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:37:19.223

好吧，我看不到 GlobalVar 或 currentLevel 是什么，但从您的评论来看，它在末尾添加了一个数字，而不是添加 - 看起来 GlobalVar.currentLevel[1] 是一个字符串。因此，为了添加值，首先转换为 int 或 Number，而不是执行操作。

# html - 背景图像缩放到实际宽度但保存比例

> ID：15597387
> 
> 赞同：0
> 
> 时间：2013-03-24T10:31:57.290
> 
> 标签：html, css, background, resize, background-image

我完全是 html css 的新手，我发现写我想要实现的东西很烦人......不是那么简单的语言。一般来说，我想达到第一张手掌图像的效果 - [https://spacebox.io/](http://spacebox.io)

但事情是实现的是[我的 www.rar 文件](http://www.speedyshare.com/jMA7E/www.rar)

我不知道如何修复它..它的比例错误，我无法像在 spacebox.io 上那样获得结果

```
#topka{
    display: block;
    position: relative;
    top: 56px;
    margin: auto;
    height:350px;
    max-width: 100%;
    min-width: 100%;
    background-image: url("img/topka.png");
    background-position: center; 
    background-size:100% 1200px;
    background-repeat: no-repeat;
    width:100%; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:44:49.300

尝试：`background-size: cover;`适用于所有现代浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:10:17.493

我通常这样做的方式是将我的所有内容包装在一个 div 中，并设置该 div 以适应屏幕并将所有内容放入其中，例如：

HTML

```
<div id="background-cover">

    <!-- All page layout/divs/content here -->

</div> 
```

然后使用此代码在 css 中定位该元素，其中 background.jpg 是您的文件名。您可以使用 center center 来获得完美的居中图像：

```
#background-cover {
    width: 100%;
    height: 100%;
    background: url('background.jpg') no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.background.jpg', sizingMethod='scale');
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='background.jpg', sizingMethod='scale')";
} 
```

# ios - 身份检查器不显示将类连接到 tableviewcontroller 的选项

> ID：15597388
> 
> 赞同：1
> 
> 时间：2013-03-24T10:31:58.630
> 
> 标签：ios, objective-c, xcode, ios5, interface-builder

我在故事板上添加了一个 tableviewcontroller。我目前有两个常规视图控制器，并且我已经能够在身份检查器中转到自定义类，单击那里类名旁边的向下箭头，然后从项目中的类中选择以连接一个类。使用这个 tableviewcontroller，它只显示 Class:UITableViewController 在下拉列表中没有其他选择。这对于表视图控制器是否正常？这是我第一次和一个人一起工作，今天早上我会边走边学。

我确实尝试输入我的自定义 tableviewcontroller 类的名称，虽然它接受了这个名称，但我可以说它不起作用。我添加到视图确实加载了这个自定义类，

```
self.view.backgroundColor = [UIColor redColor]; 
```

这似乎没有任何作用。我还将返回的行数更改为 4，但这似乎没有任何作用。

我正在使用我创建的关联视图控制器加载它。

```
ChannelColorsTableViewController *vc = [mainStoryboard    instantiateViewControllerWithIdentifier:@"ChannelColors"];
[self presentModalViewController:vc animated:NO]; 
```

谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T18:04:39.467

The issue was I added a tableviewcontroller to the story board but when i created my class I made a mistake and it was inheriting from tableview.

# php - Minigal Nano 0.3.6 缩略图未生成

> ID：15597398
> 
> 赞同：2
> 
> 时间：2013-03-24T10:34:00.347
> 
> 标签：php, gallery, thumbnails

我正在使用 minigal nano 0.3.6，我将图像放在照片目录中。未生成缩略图。但是，当我单击损坏的图像或缩略图时，图像本身在灯箱中打开就好了。以下是生成缩略图的代码：

*此脚本和包含的文件受知识共享 ( [http://creativecommons.org/licenses/by-sa/2.5/](http://creativecommons.org/licenses/by-sa/2.5/) ) 的许可您可以使用、编辑和重新分发此脚本，只要您向原作者致敬不删除指向 www.minigal.dk 的链接（“Powered by MiniGal Nano xxx”）*

MiniGal Nano 由 Thomas Rybak 创建

版权所有 2010 Thomas Rybak 支持：www.minigal.dk 社区：www.minigal.dk/forum

请享受这个免费的脚本！

使用示例：文件：createthumb.php 示例：*/ // error_reporting(E_ALL);

if (preg_match("/.jpg$|.jpeg$/i", $_GET['filename'])) header('Content-type: image/jpeg'); if (preg_match("/.gif$/i", $_GET['filename'])) header('Content-type: image/gif'); if (preg_match("/.png$/i", $_GET['filename'])) header('Content-type: image/png');

```
// Display error image if file isn't found
if (!is_file($_GET['filename'])) {
    header('Content-type: image/jpeg');
    $errorimage = ImageCreateFromJPEG('images/questionmark.jpg');
    ImageJPEG($errorimage,null,90);
}

// Display error image if file exists, but can't be opened
if (substr(decoct(fileperms($_GET['filename'])), -1, strlen(fileperms($_GET['filename']))) < 4 OR substr(decoct(fileperms($_GET['filename'])), -3,1) < 4) {
    header('Content-type: image/jpeg');
    $errorimage = ImageCreateFromJPEG('images/cannotopen.jpg');
    ImageJPEG($errorimage,null,90);
}

// Define variables
$target = "";
$xoord = 0;
$yoord = 0;

if ($_GET['size'] == "") $_GET['size'] = 120; //
   $imgsize = GetImageSize($_GET['filename']);
   $width = $imgsize[0];
   $height = $imgsize[1];
  if ($width > $height) { // If the width is greater than the height it’s a horizontal picture
    $xoord = ceil(($width-$height)/2);
    $width = $height;      // Then we read a square frame that  equals the width
  } else {
    $yoord = ceil(($height-$width)/2);
    $height = $width;
  }

// Rotate JPG pictures
if (preg_match("/.jpg$|.jpeg$/i", $_GET['filename'])) {
    if (function_exists('exif_read_data') && function_exists('imagerotate')) {
        $exif = exif_read_data($_GET['filename']);
        $ort = $exif['IFD0']['Orientation'];
        $degrees = 0;
        switch($ort)
        {
            case 6: // 90 rotate right
                $degrees = 270;
            break;
            case 8:    // 90 rotate left
                $degrees = 90;
            break;
        }
        if ($degrees != 0)  $target = imagerotate($target, $degrees, 0);
    }
}

     $target = ImageCreatetruecolor($_GET['size'],$_GET['size']);
     if (preg_match("/.jpg$/i", $_GET['filename'])) $source = ImageCreateFromJPEG($_GET['filename']);
     if (preg_match("/.gif$/i", $_GET['filename'])) $source = ImageCreateFromGIF($_GET['filename']);
     if (preg_match("/.png$/i", $_GET['filename'])) $source = ImageCreateFromPNG($_GET['filename']);
     imagecopyresampled($target,$source,0,0,$xoord,$yoord,$_GET['size'],$_GET['size'],$width,$height);
     imagedestroy($source);

     if (preg_match("/.jpg$/i", $_GET['filename'])) ImageJPEG($target,null,90);
     if (preg_match("/.gif$/i", $_GET['filename'])) ImageGIF($target,null,90);
     if (preg_match("/.png$/i", $_GET['filename'])) ImageJPEG($target,null,90); // Using ImageJPEG on purpose
     imagedestroy($target); 
```

*?>*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T10:23:27.183

该错误与图像中包含的 EXIF 数据有关。我有同样的问题（使用佳能相机）。希望这对你仍然有帮助。只需转到如下所示的行：

```
$exif = exif_read_data($_GET['filename']); 
```

将其更改为以下内容：

```
$exif = @exif_read_data($_GET['filename']); 
```

错误图像应该消失，您的缩略图应该出现。

# ruby - 当我想对一个动作发出 POST 请求时，我应该使用 Net::HTTP

> ID：15597399
> 
> 赞同：0
> 
> 时间：2013-03-24T10:34:06.693
> 
> 标签：ruby, ruby-on-rails-3, ruby-1.9.2, net-http

我有一个动作`create`和另一个动作`register_and_create`。第一个创建订阅，第二个创建用户和订阅。但我将不得不在`create`行动中复制行动准则`register_and_create`。`Net::HTTP`那么使用将 POST 请求从操作发送`register_and_create`到操作是一种好习惯`create`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:25:52.777

不，这不是一个好习惯。

如果是 GET 方法，您应该执行操作代码并将重定向返回到第二个操作。

对于 POST 方法，您应该执行所有代码`register_and_create`。发送`NET:HTTP`可能会导致很多问题 - 您必须确保分配了所有 HTTP 标头，不必要的请求到达服务器等。

如果您发现代码的共同部分，最好将代码移动到`lib`模块并`include`在控制器中使用。

例如：

```
module RegistrationModule
  def create_user
    # your code goes here
  end
end

class RegistrationController < ApplicationController
  include RegistrationModule

  def register_and_create
    # subscribe
    create_user
  end

  def create
    create_user
  end
end 
```

# java - 检测是否在 HiDPI 显示器上运行

> ID：15597401
> 
> 赞同：4
> 
> 时间：2013-03-24T10:34:15.097
> 
> 标签：java, macos, swt, retina-display

如何从 SWT 应用程序中检测它在 HiDPI（“视网膜”）显示器上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:22:45.517

类`Device`是 的超类`Display`，有一个方法调用，该方法`getDPI()`将返回显示器的 DPI 值：

```
Device device = shell.getDisplay();
System.out.println(device.getDPI()); 
```

# sql - 如何将连接查询转换为子查询

> ID：15597402
> 
> 赞同：0
> 
> 时间：2013-03-24T10:34:17.437
> 
> 标签：sql, oracle11g

我想问是否可以将连接查询转换为子查询？就像我有类似的查询

```
select * from Losa_Cust_Reject_App rejectApp 
inner join 
    Losa_Cust losaCust 
on 
    rejectApp.app_Ref_No = losaCust.app_Ref_No 
where 
    rejectApp.app_Ref_No != '0000001912' and  rejectApp.app_Dt >= '23-SEP-2012' 
and
    rejectApp.cust_Id1 = 'A111111111' and rejectApp.cust_Id1_Type = '01'; 
```

我可以将此查询转换为子查询吗？意味着删除内部连接？

谢谢

# ios - UILabel 更新重置视图位置

> ID：15597404
> 
> 赞同：2
> 
> 时间：2013-03-24T10:34:33.943
> 
> 标签：ios, storyboard, uilabel

我在更新 UILabel 时遇到了一个小问题。我尝试了一个“Pong”游戏教程，它使用 UIViews 来表示球和球员。所以我在故事板的帮助下将它们定位在它们的起始位置上。游戏运行良好，但如果我实现一个 UILabel 来显示玩家得分，麻烦就开始了。随着 UILabel 的每次更新，UIView 都会重新定位到它们的起点。iOS 6 有什么变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T05:17:25.393

我遇到了类似的问题。解决方案是关闭自动布局

1.  选择您的故事板（可能称为*MainStoryboard.storyboard*）
2.  单击实用程序面板中的**显示文件检查**器（又名`command`++后跟`option`++ ）`0``command``option``1`
3.  在*Interface Builder Document*部分取消选中**Use Autolayout**复选框
4.  重新运行您的代码

# css - 响应式网站：从上到下移动标题导航问题

> ID：15597406
> 
> 赞同：1
> 
> 时间：2013-03-24T10:34:40.103
> 
> 标签：css, responsive-design, positioning, fixed, nav

在重建投资组合网站时，我正在努力提高响应能力，但我偶然发现了一个问题。你看，我在屏幕顶部有一个导航菜单，但是当在智能手机上查看时，我想将该导航放在屏幕底部。

通常，由于它是一个带有导航元素的标题，`fixed`位于屏幕的左上角，因此我只会在我的媒体查询中为它提供一个规则（在这种情况下）iPhone。

我会将顶部更改为顶部：无；（我认为无论如何都无效）并添加底部：0; 因此导航菜单的规则将变为`bottom: 0;`and`left: 0;`而不是`top: 0;`and `left: 0;`。

奇怪的是，我似乎无法让它正常工作。

下面是我的CSS：

```
 /* this is inside @media all */
header {
    position:fixed;
    top:0;
    left:0;
    display:block;
    width:100%;
    height:60px;
    border-bottom:1px solid #108ac2;
    box-shadow:1px 1px 1px 1px rgba(16,138,194,0.76);
    background:#fff;
    opacity:.9;
}

header nav {
    width:960px;
    margin:0 auto;
}
    /* this is inside @media screen and (max-width: 480px)  */
header {
    position:fixed;
    bottom:0!important;
    left:0!important;
}

header nav {
    width:90%;
    margin:0;
    height:80px;
} 
```

您还可以在此处查看我正在构建的测试站点：[我的测试组合](http://www.jorendegraaf.nl/testbed/testing.html)。

我会很感激你的帮助。我敢打赌，以前有人问过这个问题，但是我真的在这里找不到...在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:54:13.290

一旦您的 css 应用于 @media 屏幕，它将继续并应用 @media 所有。我认为这是造成问题的原因。所以我在正文的页眉和边距顶部添加了 css，这似乎完成了这项工作。

```
 /* this is inside @media all */
header {
    position:fixed;
    top:0;
    left:0;
    display:block;
    width:100%;
    height:60px;
    border-bottom:1px solid #108ac2;
    box-shadow:1px 1px 1px 1px rgba(16,138,194,0.76);
    background:#fff;
    opacity:.9;
}

header nav {
    width:960px;
    margin:0 auto;
}
    /* this is inside @media screen and (max-width: 480px)  */
header {
    position:fixed;
    bottom:0!important;
    left:0!important;
    top: initial;
}

header nav {
    width:90%;
    margin:0;
    height:80px;
}
body {
    margin:0 0 100px 0;
} 
```

# jquery - 带有滑动等的jQuery挑战

> ID：15597407
> 
> 赞同：0
> 
> 时间：2013-03-24T10:34:41.037
> 
> 标签：jquery, menu, document, slideup

我有如下代码。它基本上在触摸时打开一个菜单，并在触摸它时再次关闭。但是，当它被触摸到屏幕上的任何位置时，我试图让它关闭。也不要让其他层在上面移动，我使用 return false，如果有其他方法让我知道。实际上，总的来说，我认为这段代码可以很快变得更好，但我又不是程序员，所以以你知道的视觉方式做事:)

```
var closed = 1;
        $(".plus").on("touchstart",function(event){
                    if(closed == 1) {
                        t=$(this).parent();
                        openmenu(t,250);
                        closed = 0;
                        $(".plus").addClass("negative");
                        return false;
                    }
                    else    {
                        var handler = function(event){
                            if($(event.target).is(".toggle, .toggle *")) return;

                            $(document).off("click", handler);

                            $(".mainNav").find(".toggle").slideUp(250,easing);
                            closed = 1;
                            $(".plus").removeClass("negative");
                            return false;
                            }   
                            $(document).on("click", handler);

                }
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:31:06.590

```
$(':not(.plus)').click(function(){ //close the menu }); 
```

# android - 如何在 android 中将 Path (android.graphics.Path) 与画布一起使用？

> ID：15597411
> 
> 赞同：17
> 
> 时间：2013-03-24T10:34:43.740
> 
> 标签：android, android-custom-view

我正在开发一个自定义视图，它实现了像圆形菜单这样的 Catch 应用程序。花了很多时间后，我有了一点进步，完成了多种颜色的外半圆。现在，在阅读 Catch 应用程序的开发人员为用户提供的查询的答案时，我遇到了类 Path。Google Android 开发者页面没有提供足够的材料来理解和熟悉 Path。所以，请 ？任何人 ？

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-24T11:02:42.543

您可以使用它在画布上绘制线条。路径基本上是线条的集合。您可以使用它来创建非标准的形状。例如，有很多函数可以创建一些默认形状：

```
canvas.drawRect();
canvas.drawArc(RectF oval, float startAngle, float sweepAngle, boolean useCenter, Paint paint);
canvas.drawCircle(float cx, float cy, float radius, Paint paint);
canvas.drawLine(float startX, float startY, float stopX, float stopY, Paint paint);
canvas.drawOval(RectF oval, Paint paint);
canvas.drawRect(float left, float top, float right, float bottom, Paint paint); 
```

但是如果你想要一些自定义的东西，你可以创建一个路径，并通过调用

```
// Set the beginning of the next contour to the point (x,y).
void     moveTo(float x, float y)

// Add a line from the last point to the specified point (x,y).
void     lineTo(float x, float y) 
```

您可以控制绘制路径线条的铅笔。 [这是一个很好的教程](http://android-er.blogspot.nl/2011/08/drawpath-on-canvas.html)

# ios - Apple LLVM 编译器 4.2 错误

> ID：15597412
> 
> 赞同：0
> 
> 时间：2013-03-24T10:34:46.897
> 
> 标签：ios, objective-c, xcode, clang

每当我尝试编译我的 xcode 项目时，我都会收到此错误消息，我一直在搜索和应用其他相关问题的答案，但仍然无法解决问题，所以我发布了这个特定问题。我怎样才能解决这个问题？

```
ProcessPCH "/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/PrecompiledHeaders/Project Name-Prefix-dyzfahcpvwmwmcbbcszxksgksawt/Project Name-Prefix.pch.pth" "Company/Project Name-Prefix.pch" normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd "/Users/ObsidianSword/Dropbox/ProjectName - iOS Projects Folder/Official Projects/Project Name (Company 3.3.3.2)"
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -fexceptions -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch -mios-simulator-version-min=5.0 -iquote "/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/ProjectName-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/ProjectName.build/Debug-iphonesimulator/ProjectName.build/ProjectName-generated-files.hmap" "-I/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/ProjectName.build/Debug-iphonesimulator/ProjectName.build/ProjectName-own-target-headers.hmap" "-I/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/ProjectName.build/Debug-iphonesimulator/ProjectName.build/ProjectName-all-target-headers.hmap" -iquote "/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/ProjectName.build/Debug-iphonesimulator/ProjectName.build/ProjectName-project-headers.hmap" -I/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Products/Debug-iphonesimulator/include -I/Users/ChristianD/Applications/link_os_sdk/iOS/v1.1.5266/lib/include -I/Users/ObsidianSword/Dropbox/Company -I- -IiOS -IProjects -IFolder/Official -IProjects/Project -ISolution "-I(Company" "-I3.3.3.2)/../ReaderAPI-iOS-0.7/ReaderAPI-iOS-0.7" -I/Users/ObsidianSword/Dropbox/Company -I- -IiOS -IProjects -IFolder/Official -IProjects/Open -ISolution "-I(Company" "-I3.3.3.2)/../ReaderAPI-iOS-1.0/ReaderAPI-iOS-1.0" -I/Users/ObsidianSword/Dropbox/Company -I- -IiOS -IProjects -IFolder/Official -IProjects/Open -ISolution "-I(Company" "-I3.3.3.2)/Company/lib/include" "-I/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/ProjectName.build/Debug-iphonesimulator/ProjectName.build/DerivedSources/i386" "-I/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/ProjectName.build/Debug-iphonesimulator/ProjectName.build/DerivedSources" -F/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Products/Debug-iphonesimulator -DNS_BLOCK_ASSERTIONS=1 --serialize-diagnostics "/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/PrecompiledHeaders/ProjectName-Prefix-dyzfahcpvwmwmcbbcszxksgksawt/ProjectName-Prefix.pch.dia" -c "/Users/ObsidianSword/Dropbox/Company - iOS Projects Folder/Official Projects/Project Name (Company 3.3.3.2)/Company/Project Name-Prefix.pch" -o "/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/PrecompiledHeaders/ProjectName-Prefix-dyzfahcpvwmwmcbbcszxksgksawt/ProjectName-Prefix.pch.pth" -MMD -MT dependencies -MF "/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/Project Name-bkinddajwtvxeybjhjlenxyuhuxu/Build/Intermediates/PrecompiledHeaders/Project Name-Prefix-dyzfahcpvwmwmcbbcszxksgksawt/Project Name-Prefix.pch.d"
clang: error: '-I-' not supported, please use -iquote instead
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:06:51.353

对于遇到 LLVM 编译器 4.2 错误且上述解决方案不起作用的任何人，请尝试 clean+build 或重新启动 XCode / Mac。在我的情况下，重新启动 Xcode 不起作用，但重新启动 Mac 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:17:22.277

这看起来很可疑：

```
-I/Users/ObsidianSword/Dropbox/Company -I- -IiOS -IProjects -IFolder/Official -IProjects/Project -ISolution "-I(Company" "-I3.3.3.2)/../ReaderAPI-iOS-0.7/ReaderAPI-iOS-0.7" 
```

看起来你有一个真正应该是的包含路径

```
-I"/Users/ObsidianSword/Dropbox/Company - iOS Projects Folder/Official Projects/ProjectName (Company 3.3.3.2)/../ReaderAPI-iOS-0.7/ReaderAPI-iOS-0.7" 
```

或类似的东西，但它可能缺少引号来解释文件路径中的空格。我会在您的 Xcode 项目设置中查找类似的内容，并将完整路径用引号括起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T11:40:57.397

据我看到的崩溃日志。我认为您使用“-I”设置了错误的库路径

```
-I/Users/ObsidianSword/Library/Developer/Xcode/DerivedData/ProjectName-bkinddajwtvxeybjhjlenxyuhuxu/Build/Products/Debug-iphonesimulator/include 
```

正如您在路径的凝视处看到的那样，Apple LLVM 编译器不支持该路径。修复它，您的问题将得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T11:08:17.140

看来这与我的库编译版本有关。对于遇到相同问题或接近此问题的任何人，请确保您从设备制造商处获得了最新的库。

# php - 如果我不允许 CKEditor 中的 Source 按钮，我的应用程序是否安全

> ID：15597413
> 
> 赞同：0
> 
> 时间：2013-03-24T10:34:56.630
> 
> 标签：php, security, ckeditor, bbcode

我正在使用 CKEditor 让用户发表他们的评论。我没有在我的论坛中使用 bbcode。如果我隐藏 CKEditor 的源按钮并执行以下步骤

1.  使用 htmlspecialchars() 函数来处理 html 元素
2.  用户 parse_url 以确保数据已从我自己的域提交

我是否安全地处理用户提交的数据？我还需要使用bbcode吗？我还应该采取哪些步骤来使我的应用程序更安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:32:06.157

您不会通过隐藏该按钮来保护您的代码。事实上，您在客户端所做的任何事情都无济于事。

我强烈建议您在将其添加到数据库之前检查用户发布的内容。上次我不得不处理这样的事情时，我使用了[PHPIDS](https://phpids.org/)和[HTML Purifier](http://htmlpurifier.org/)的组合，但那是很久以前的事了，我不知道它们是否是当今最好的工具。

# ruby-on-rails - Spree 部署后忘记密码页面抛出错误

> ID：15597415
> 
> 赞同：0
> 
> 时间：2013-03-24T10:34:58.210
> 
> 标签：ruby-on-rails, ruby, email, smtp, spree

我设置了 smtp 邮件程序，**成功发送了测试邮件**。登录一切正常，但是当我尝试**忘记密码功能**时，我得到一个

> 我们很抱歉出了点问题。

屏幕。

大礼包版本：1.3.2 Rails：Rails 3.2.13

这是 /log/production.log

```
Started GET "/user/password/new" for 81.182.63.72 at 2013-03-24 10:18:28 +0000
Processing by Spree::UserPasswordsController#new as HTML
  Rendered /home/gwuix2/picurwebaruhaz/shared/bundle/ruby/1.9.1/bundler/gems/spree_auth_devise-78342b5fa7c5/app/views/spree/user_passwords/new.html.erb within spree/layouts/spree_application (3.1ms)
  Rendered /home/gwuix2/picurwebaruhaz/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/shared/_head.html.erb (2.7ms)
  Rendered /home/gwuix2/picurwebaruhaz/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/shared/_search.html.erb (2.1ms)
  Rendered /home/gwuix2/picurwebaruhaz/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/shared/_nav_bar.html.erb (3.1ms)
  Rendered /home/gwuix2/picurwebaruhaz/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/shared/_main_nav_bar.html.erb (1.0ms)
  Rendered spree/shared/_header.html.erb (5.1ms)
  Rendered spree/shared/_footer.html.erb (0.2ms)
  Rendered /home/gwuix2/picurwebaruhaz/shared/bundle/ruby/1.9.1/gems/spree_core-1.3.2/app/views/spree/shared/_google_analytics.html.erb (0.9ms)
Completed 200 OK in 97ms (Views: 17.0ms | ActiveRecord: 0.5ms)
Started POST "/user/password" for 81.182.63.72 at 2013-03-24 10:18:30 +0000
Processing by Spree::UserPasswordsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"g4fttrrEVPehE6usYfWupw+b8J3F4Y+79FBTqNWpD+I=", "user"=>{"email"=>"example@gmail.com"}, "commit"=>"Új jelszót kérek"}
  Rendered /home/gwuix2/picurwebaruhaz/shared/bundle/ruby/1.9.1/bundler/gems/spree_auth_devise-78342b5fa7c5/app/views/spree/user_mailer/reset_password_instructions.text.erb (0.8ms)

Sent mail to example@gmail.com (92ms)
Completed 500 Internal Server Error in 242ms

Errno::ECONNREFUSED (Connection refused - connect(2)):
  /home/gwuix2/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/smtp.rb:540:in `initialize' 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:02:36.933

不知道如何，但现在可以了。没有做任何事情。Mabye 问题与 SMTP 邮件程序有关。

# ruby - 在另一个块中使用传递的块

> ID：15597416
> 
> 赞同：2
> 
> 时间：2013-03-24T10:34:59.943
> 
> 标签：ruby, select, block

是否可以这样称呼：

```
def foo(param1)
   hash.select { |k,v| yield }.each do |x|
      res += do_something_with(v,param1)
   end
   res 
end 
```

来自 ERB 模板，例如：

```
<%= foo('A',{ v.field!='X' }) %> 
```

在我的哈希上实现自定义选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:44:35.320

在 ruby​​ 中，如果在参数名称前添加前导，则可以将传递的块作为最后一个参数`&`，例如`&block`，该`block`变量将被`Proc`传递给方法。

`block`如果没有通过任何块，则为 nil。

要转发块，请调用方法并添加为最后一个参数`&block`

所以现在，让我们处理你的问题：

在方法的最后一个参数处获取块并将其传递给`select`方法：

```
def foo(param1, &block)
   hash.select(&block).each do |x|
      res += do_something_with(v,param1)
   end
   res 
end 
```

你也可以做类似的事情，`.select { |v| yield(v) }`但这不那么优雅:)

您的观点有一个小问题，这里是更正的版本：

```
<%= foo('A') { |v| v.field!='X' } %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:39:12.027

您可以通过在块前面加上 and 来将块作为参数`&`：

```
def foo(&param1) 
```

然后你可以`block_given?`测试：

```
if block_given?
  #do something with param1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:42:43.993

如果您的方法 foo 所做的事情主要与演示相关，并且您需要从视图中访问它，那么拥有它的最佳位置可能是 Helper。Helpers 中声明的所有方法都可以在 erb 模板中使用。

您可以使用 & 合成器将块从一个方法传递到另一个方法：

```
def foo(values,&action)
  #pass &action to whatever method need it.
end 
```

# jquery - 文本破坏了鼠标悬停

> ID：15597422
> 
> 赞同：1
> 
> 时间：2013-03-24T10:36:00.637
> 
> 标签：jquery, text, mouseover

当光标悬停时，我为 div 设置动画。
这适用于鼠标悬停（jquery）。
现在的问题是该 div 上的文本会中断动画，因为光标不再直接接触该 div。

我该如何解决这个问题？

```
//navi is the div.

    $("#navi").mouseover(function(){
        $("#navi").stop();
        $("#navi").animate({width:'200px'},{queue: false,easing:"easeOutBounce",duration:1200});
    }); 
```

相同的代码在 text-div 上。

你可以在这里测试它[http://jsfiddle.net/rSQaP/17/](http://jsfiddle.net/rSQaP/17/)

只需在红色 div 动画时尝试 mouseover 和 mouseout。动画将受到蓝色 div 上的鼠标悬停动作的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:42:15.417

```
$("#navi").mouseover(function(){

  $("#navi").stop().animate({width:'200px'},{queue: false,easing:"easeOutBounce",duration:1200});
  while($("#navi").is(":animated")){
    $("#navi").off('click').off('mouseover'); 
    //you can add all the events you want to ignore
    //if it doesn't work, use unbind instead of off
  };
  //re-enable these events
  $("#navi").on('click').on('mouseover'); //here you could use bind instead of on
}); 
```

# java - 如何在摆动弹出对话框中模拟按钮单击？

> ID：15597425
> 
> 赞同：1
> 
> 时间：2013-03-24T10:36:17.530
> 
> 标签：java, swing, junit

我是 Java 新手，我想为名称验证类编写 JUnit 测试

我想测试以下代码：

```
public boolean createNewUMLClassFromString(String className) {
    if(validate(className)){
              ....
    }
    return false;
}

private boolean validate(String userInput){
    /* check if it's empty  */
    if (userInput.equals("")){  
                    JOptionPane.showMessageDialog(null, "Class Name can't be empty");
        return false;
    }
            return true;
} 
```

所以我写了一个JUnit

```
public void emptyStringCheckerTest(){
    assertFalse("new class can not be empty", um.createNewUMLClassFromString("do"));

} 
```

它可以工作，但是在测试运行过程中，我每次都需要单击弹出对话框。

那么有没有人可以告诉我如何在测试过程中模拟按钮点击，或者有没有更好的方法来编写测试？谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:42:16.850

查看`java.awt.Robot`, 和`abbot` [http://abbot.sourceforge.net/doc/overview.shtml](http://abbot.sourceforge.net/doc/overview.shtml)之类的库来增强它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:39:57.373

要执行编程按钮单击，只需调用该`doClick()`方法。不过，我不知道如何将其插入您的测试程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:30:49.983

重写您的`validate`方法并将`JOptionPane`调用移至可以在单元测试中替换的单独方法（例如，包可见方法）。

```
private boolean validate(String userInput){
    /* check if it's empty  */
    if (userInput.equals("")){  
        showCannotBeEmptyDialog();            
        return false;
    }
            return true;
}

void showCannotBeEmptyDialog(){
  JOptionPane.showMessageDialog(null, "Class Name can't be empty");
} 
```

使其包可见仍然允许您在测试中覆盖它（例如不显示 UI），并且您仍然能够断言该方法是否实际被调用。

另一种选择是将实例作为构造函数参数传递，该参数负责向用户显示消息。在您的生产代码中，此实例将使用`JOptionPane`该类，而在您的测试中，您只需使用一个虚拟对象。但是，如果它只是为了显示一个对话框，这可能是矫枉过正。

# ruby-on-rails - 在这种情况下，如何在语言环境文件中使用标签？

> ID：15597427
> 
> 赞同：0
> 
> 时间：2013-03-24T10:36:30.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果我`<a href>`在语言环境文件中使用，我必须添加`.html_safe`到底部的某个地方。

我该如何解决？

```
<% flash.each do |name, msg| %>
  <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
    <a class="close" data-dismiss="alert">&#215;</a>
    <%= content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:39:57.383

```
<%= content_tag :div, msg.html_safe, :id => "flash_#{name}" if msg.is_a?(String) %> 
```

# python - Python imaplib 下载 Gmail 文本而不下载完整附件

> ID：15597429
> 
> 赞同：1
> 
> 时间：2013-03-24T10:37:34.017
> 
> 标签：python, imap, gmail-imap, imaplib

我在 python 中使用“imaplib”从 Gmail 帐户中获取电子邮件。但我只想知道邮件的内容，附件的标题，而不需要下载完整的附件。

默认，

```
myGmail = imaplib.IMAP4_SSL(...)
....
(respCode, data) = myGmail.fetch(mailUid, 'RFC822') 
```

将返回电子邮件的整个部分，包括在返回数据中编码为文本的整个附件，这有时是巨大的且不必要的。

我已经在互联网和 stackOverflow 上搜索以找到答案。他们中的许多人提到使用

```
myGmail.fetch(mailUid, 'BODYSTRUCTURE') 
```

首先确定电子邮件结构，然后确定要下载的部分。而且我还阅读了关于 imap4 协议的 RFC 3501 文档，[其中](https://www.rfc-editor.org/rfc/rfc3501#section-7.4.2)提到我可以使用

> BODY[]<> 在 Fetch 命令中下载特定的正文部分。

但是我在 python imaplib 中尝试了许多命令，如下所示：

```
(rCode, data) = myGmail.fetch(mailUid, 'BODY[0]')
(rCode, data) = myGmail.fetch(mailUid, 'BODY0')
(rCode, data) = myGmail.fetch(mailUid, 'BODY[TEXT]') 
```

但所有这些都失败并显示错误消息：

> 错误：FETCH 命令错误：BAD ['Could not parse command']

所以任何人都可以告诉我如何在 python imaplib for Gmail 中使用这个命令？

仅供参考，上述示例电子邮件的 BODYSTRUCTURE 为：

```
(BODY 
 (
  (
    (
      ("TEXT" "PLAIN" ("CHARSET" "us-ascii") NIL NIL "QUOTED-PRINTABLE" 1742 33)
      ("TEXT" "HTML" ("CHARSET" "us-ascii") NIL NIL "QUOTED-PRINTABLE" 17976 485) "ALTERNATIVE"
    )
    (
      "IMAGE" "JPEG" 
      ("NAME" "image001.jpg") "<image001.jpg@01CD029F.6831C440>" "image001.jpg" "BASE64" 4070
    ) 
    "RELATED"
  )
  ("APPLICATION" "PDF" ("NAME" "SAC 2012.pdf") NIL "SAC 2012.pdf" "BASE64" 20638)
  "MIXED"
 )
 ) 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:55:21.220

只需替换`BODY[0]`为`(BODY[1])`.

# jquery - 无法在初始化之前调用方法；试图调用方法“刷新”

> ID：15597430
> 
> 赞同：20
> 
> 时间：2013-03-24T10:37:45.600
> 
> 标签：jquery, html, css, jquery-mobile, button

我想通过单击菜单项来更新链接按钮的值。

html:

```
<div id="menu">
    <ul data-role="listview" data-icon="false">
        <li><a href="#">Value A</a></li>
        <li><a href="#">Value B</a></li>
    </ul>
</div>

<a href="#" id="selected" data-role="button"></a> 
```

jQueryMobile：

```
$('#selected').hide();

$("#menu li a").on('click',function(){
    $('#selected').html($(this).html()).slideDown().button("refresh");
}); 
```

文本更新工作正常，但按钮 css 未正确更新。

我收到以下错误：

> 未捕获的错误：无法在初始化之前调用按钮上的方法；试图调用方法“刷新”

我们在谈论哪个初始化？页面和按钮已经初​​始化了，不是吗？

* * *

编辑：

我也试过这个：

```
$(document).on("mobileinit", function() {

    $('#selected').hide();

    $("#menu li a").on('click',function(){
        $('#selected').html($(this).html()).slideDown().button("refresh");
    });

}); 
```

没有错误信息了；但没有文字更新:(

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-01-11T19:07:33.847

该问题有时是由 jquery-ui 和 bootstrap-button 插件冲突引起的。jquery-ui 代码应该放在 bootstrap.js 之前，这样就解决了问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T11:47:12.130

## 工作示例

这是一个工作示例：http: [//jsfiddle.net/Gajotres/BDmex/](http://jsfiddle.net/Gajotres/BDmex/)

**HTML：**

```
<div id="menu">
    <ul data-role="listview" data-icon="false">
        <li><a href="#">Value A</a></li>
        <li><a href="#">Value B</a></li>
    </ul>
</div>

<a href="#" id="selected" data-role="button"></a> 
```

**JS：**

```
$('#selected').hide();

$("#menu li a").on('click',function(){
    $('#selected').html('<span class="ui-btn-inner"><span class="ui-btn-text">' + $(this).html() + '</span></span>').slideDown();
}); 
```

*   您在按钮标签内缺少 data-role="button"
*   因为按钮最初是在没有文本的情况下创建的，所以您需要添加具有 2 个跨度的适当内部结构

## 第二种解决方案

这个问题还有另一种解决方案，可以在这篇**[文章](http://www.gajotres.net/uncaught-error-cannot-call-methods-on-prior-to-initialization-attempted-to-call-method-refresh/)**+描述和工作示​​例中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:32:39.600

`#selected`在 jQuery Mobile 初始化之后（使用 DOM 检查器）查看链接元素的 HTML 结构。实际文本位于`ui-btn-text`类的 span 元素内。因此，当您使用该函数更新按钮的 HTML 时`.html()`，您将覆盖 jQuery Mobile 创建的 HTML 结构，从而删除 jQuery Mobile 添加的格式。

您可以选择作为`.ui-btn-text`按钮后代的元素来更新文本而不删除格式。

改变这个：

```
$('#selected').html($(this).html()).slideDown().button("refresh"); 
```

对此：

```
$('#selected').find(".ui-btn-text").html($(this).html()).slideDown(); 
```

仅供参考，这是初始化锚标记按钮的 HTML 的样子：

```
<a href="#" data-role="button" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c">
    <span class="ui-btn-inner">
        <span class="ui-btn-text">Anchor</span>
    </span>
</a> 
```

来源：http: [//view.jquerymobile.com/1.3.0/docs/widgets/buttons/](http://view.jquerymobile.com/1.3.0/docs/widgets/buttons/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T21:17:31.990

我遇到了同样的问题，并没有设法找出它发生的原因。但是知道在初始化之后，一个带有“ui-btn-text”类的跨度被放置在按钮内，我像这样解决它：

```
var button = $("#selected");
var innerTextSpan = button.find(".ui-btn-text");

// not initialized - just change label
if (innerTextSpan.size() == 0) {
    button.text(label);

// already initialized - find innerTextSpan and change its label    
} else {
    innerTextSpan.text(label);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-22T13:30:54.650

我通过删除 2"" final html 解决了同样的问题，所以我认为这是 html 目标页面的缺陷

# ms-access - 查询子表单中的数据并求和

> ID：15597437
> 
> 赞同：0
> 
> 时间：2013-03-24T10:39:01.807
> 
> 标签：ms-access, sum, subform

我有三张桌子：

```
Products(ID,Name,Price) / 
Customer(ID, Name, Surname)
Buys(ID, ID_customer, ID_product) 
```

我有一个带有子表单的表单。子表单填充了来自 Buys 表的查询，然后通过 ID_customer 连接到 Customer(ID)。ID 和 ID_customer 隐藏在子表单上。

然后我在子表单上添加了另外两个字段/控件：通过 ProductsQuery 填充的名称和 aPrice：

```
SELECT Products.Name, Products.Price
FROM Products
WHERE (((Products.ID)=[Forms]![PregledKupcev-Form]![NAKUPI-Subform]![ID])); 
```

//在这种情况下，ID 是对包含产品 ID 的子表单的控制

使用：

```
=DLookUp("[Name]";"[ProductsQuery]") 
```

和

```
=DLookUp("[Price]";"[ProductsQuery]") 
```

到目前为止一切正常，但是当我尝试对一个控件求和时（在这种情况下为价格），它给我带来了很多麻烦。

有没有办法更好地做到这一点？

然后我尝试将 aPrice 控件中的内容总结为子窗体页脚上的 PriceSum 控件：

```
=Sum([Forms]![PregledKupcev-Form]![NAKUPI-subform]![aPrice]) 
```

并将其转移到表格中：

```
=[Forms]![PregledKupcev-Form]![NAKUPI-subform]![PriceSum] 
```

但我得到错误..

如何在子窗体的价格控制中总结值？

图片： ![形式](../Images/6315e89fd53d1373b2cc1a2e06ef63a3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:06:09.457

假设您的主表单有一个名为的文本框`txtInvoiceNo`，您可以在其中显示发票编号（或将父表链接到子表的任何字段）。

还假设您的主窗体有一个文本框`txtInvoiceTotal`，您希望在其中显示每个子记录的 [Price] 值的总和。

将`txtInvoiceTotal`文本框的控制源设置为`DSum()`在子表（我称之为`InvoiceLineItems`）上执行：

`=DSum("[Price]","InvoiceLineItems","InvoiceNo=" & [txtInvoiceNo])`

在子表单的情况下，在父表单的文本框中`After Update`添加一行：`.Requery``txtInvoiceTotal`

```
Private Sub Form_AfterUpdate()
Me.Parent.txtInvoiceTotal.Requery
End Sub 
```

看看这是否对你有用。

# python - 执行即使 IF 语句为 TRUE 的 Else 语句

> ID：15597439
> 
> 赞同：1
> 
> 时间：2013-03-24T10:39:05.697
> 
> 标签：python, if-statement

我有一个标题中描述的**Python语言问题。**

```
 for slovo in slova:
        if pygame.mouse.get_pressed()[0] and slovo["rect"].collidepoint(pygame.mouse.get_pos()):
            for i in range (len(randRijec)):
                if slovo["name"] in randRijec[i]:
                    if i == 0:
                        slovo1 = randRijec[i].upper()
                        prvoSlovo = 1
                    ...
                    ...
                else:
                    pogresnoBrojac += 1
            slova.remove(slovo) 
```

所以，即使这个 IF 语句为**真**，ELSE 语句也在执行！但是，如果满足**if 语句**，则应跳过**else 语句**。

 **如何解决这个问题？

ps 这个问题我也遇到过好几次了，一直没解决。。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:49:30.273

您的代码中混合了制表符和空格：

运行`cat -A test.py`（在 Unix 上）产生

```
 for slovo in slova:$
            if pygame.mouse.get_pressed()[0] and slovo["rect"].collidepoint(pygame.mouse.get_pos()):$
                for i in range (len(randRijec)):$
                    if slovo["name"] in randRijec[i]:$
                        if i == 0:$
                            slovo1 = randRijec[i].upper()$
                            prvoSlovo = 1$
^I^I^I^I^I^I...$
^I^I^I^I^I^I...$
                    else:$
                        pogresnoBrojac += 1$
                slova.remove(slovo)$ 
```

`^I`指示选项卡。

因此，该`else`块没有被解释为处于它*看起来*所在的缩进级别。

你的 python 代码不应该混合使用制表符和空格来缩进。您可以通过运行检查您的脚本是否混合了制表符和空格`python -t script.py`。

在 Python 中，您必须承诺仅使用空格或仅使用制表符进行缩进。[PEP8](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)建议仅使用空格缩进。

[您可以使用reindent.py 程序](http://svn.python.org/projects/python/trunk/Tools/scripts/reindent.py)将制表符转换为空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T10:42:45.403

> 所以，即使这个 IF 语句为真，ELSE 语句也在执行！

我可以向你保证，这不会发生。

我注意到在您的代码大纲中，`if`它位于`for`循环内。确保在您的实际代码中，`else`不会意外地与`for`而不是`if`. 我不止一次看到这个错误。

在 Python 中，[`for`-`else`是一个有效的构造](https://stackoverflow.com/questions/9979970/why-does-python-use-else-after-for-and-while-loops)。例如，以下是完全有效的 Python：

```
for i in range(10):
    if i < 100:
        pass
else:
    print 'In else clause' 
```

运行时，会打印出`In else clause`.

将此与以下内容进行对比，后者在运行时不打印任何内容：

```
for i in range(10):
    if i < 100:
        pass
    else:
        print 'In else clause' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-11T22:31:23.500

这是很久以前的一个问题，我在解决同样的问题时偶然发现了它 - 解决方案实际上非常愚蠢，而且很可能也是这种情况 - 因为它是一个 for 循环，它遍历每个列表元素，即使其中一个元素不满足 if 条件，它会自动触发 else - 非常不言而喻，但对于初学者来说很容易错过。好吧，至少这是我的问题:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-24T11:29:17.960

下一个解决方案解决了我的问题：

```
 for slovo in slova:
        if pygame.mouse.get_pressed()[0] and slovo["rect"].collidepoint(pygame.mouse.get_pos()):
            xy = 0
            for i in range (len(randRijec)):
                if slovo["name"] in randRijec[i]:
                    xy = 1
                    if i == 0:
                        slovo1 = randRijec[i].upper()
                        prvoSlovo = 1
                        break
                    if i == 1:
                        slovo2 = randRijec[i].upper()
                        drugoSlovo = 1
                        break
            slova.remove(slovo)
            if xy == 0:
                pogresnoBrojac += 1

    ...
    ...
    ...

    xy = 1
    pygame.display.update()
    time.tick(value) 
```

所以，我刚刚添加了**xy**计数器，它使我的代码按其应有的方式工作。当满足**IF**语句时，**xy**变为**1**，如果不满足**IF**语句，则**xy**设置为**0**，然后执行此“ **else** ”语句。在代码的末尾，**xy**再次设置为**1**以防止执行此“else”（*如果 xy == 0*）块。**

# actionscript-2 - 交换深度动作脚本 2

> ID：15597440
> 
> 赞同：0
> 
> 时间：2013-03-24T10:39:09.090
> 
> 标签：actionscript-2

我想在 Press 上将影片剪辑放在前面，在从影片剪辑释放时将影片剪辑放在一层

我用this.swapDepths（深度）不起作用

代码：

`this.onPress = function(){ this.swapDepths(100);enter code here } this.onRelease = function(){this.swapDepths(-100);}`

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:10:02.730

假设您将这个“char”对象放置在屏幕中（不是动态生成的），并且您将这个“敌人”对象附加了以下代码：

```
var enemy = _root.attachMovie("enemyBmp","enemyBmp",1); 
```

现在您的问题是“敌人”对象出现在您的“字符”对象的顶部。你现在需要做的是：

```
enemy.swapDepths(char); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:35:53.333

你可能想用这个：

```
this.onRelease = function() { 
    this.swapDepths(mc1);
}; 
this.onRelease = function() { 
    this.swapDepths(mc2); 
}; 
```

mc1 和 mc2 是 2 个影片剪辑的实例名称。

如果这些影片剪辑在按钮对象内，请使用“this.mc1”/“this.mc2”。

这样，他们只是简单地相互交易深度，而您不知道每个人的深度。

# lisp - 在球拍中对非常大的数字求和

> ID：15597443
> 
> 赞同：2
> 
> 时间：2013-03-24T10:39:46.607
> 
> 标签：lisp, racket

所以我希望总结零到一亿之间的数字。这段代码运行得非常好，一千万，在我的机器上执行大约 3 秒。但是，当我试图总结一亿时，它就冻结了我的计算机，并且永远无法完成。我已经等待此代码完成五分钟，但它仍然无法完成。

```
#lang racket/base

(require (only-in racket/list range))

(let ([theList (range 0 100000000)]) (time (apply + theList))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T12:39:03.313

您可以使用`for/sum`：

```
(for/sum ([i (in-range 100000000)])
  i) 
```

像所有的`for/xxx`变体一样，`for/sum`本质上是根据`for/fold`（Chris Jester-Young 解释的）实现的。换句话说`for/sum`，它是一个方便的包装器`for/fold`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T12:07:11.957

据我所知，在 Racket 中求和数字的标准方法是使用`for/fold`而不是`apply`，如果您的范围很大：

```
(for/fold ((n 0))
          ((i (in-range 100000000)))
  (+ n i)) 
```

这需要半秒钟才能在我的计算机上运行。

# android - Android ListView 在不滚动列表视图的情况下将项目添加到顶部

> ID：15597450
> 
> 赞同：23
> 
> 时间：2013-03-24T10:41:10.670
> 
> 标签：android, listview, scroll

我有一个 listView，我想将新项目添加到列表视图的顶部，但我不希望列表视图滚动其内容。我希望用户在添加新项目之前查看与他正在查看的相同项目。

这就是我向 ListView 添加新项目的方式：

```
this.commentsListViewAdapter.addRangeToTop(comments);
this.commentsListViewAdapter.notifyDataSetChanged(); 
```

这是`addRangeToTop`方法：

```
public void addRangeToTop(ArrayList<Comment> comments)
{
    for (Comment comment : comments)
    {
        this.insert(comment, 0);        
    }
} 
```

这是我的列表视图：

```
<ListView
    android:id="@+id/CommentsListView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/AddCommentLayout" 
    android:stackFromBottom="true" >        
</ListView> 
```

我想要做的是在用户滚动到顶部时加载旧评论。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-24T11:26:08.183

我在这里找到了解决方案[Retaining position in ListView after call notifyDataSetChanged](https://stackoverflow.com/questions/8276128/retaining-position-in-listview-after-calling-notifydatasetchanged)

抱歉重复的问题。最终代码是这样的：

```
 int index = this.commentsListView.getFirstVisiblePosition() + comments.size();
    View v = this.commentsListView.getChildAt(commentsListView.getHeaderViewsCount());
    int top = (v == null) ? 0 : v.getTop();         

    this.commentsListViewAdapter.AddRangeToTop(comments);
    this.commentsListViewAdapter.notifyDataSetChanged();    

    this.commentsListView.setSelectionFromTop(index, top); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-26T12:02:02.517

可能这就是您正在寻找的：

```
android:transcriptMode="normal" 
```

“这会使列表在收到数据集更改通知时自动滚动到底部，并且仅当最后一项已在屏幕上可见时。” [-如此](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android:transcriptMode)处所引

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T10:51:21.610

也看看 ListView 的方法`public void setSelection (int position)`。添加新评论并通知您的适配器后，您可以使用它来保持当前项目处于选中状态。

```
// Get the current selected index
int previousSelectedIndex = yourListView.getSelectedItemPosition();

// Change your adapter
this.commentsListViewAdapter.AddRangeToTop(comments);
this.commentsListViewAdapter.notifyDataSetChanged();

// Determine how many elements you just inserted
int numberOfInsertedItems = comments.size();

// Update the selected position
yourListView.setSelection(previousSelectedIndex + numberOfInsertedItems); 
```

注意：代码未经测试。祝你好运

# arrays - JQplot条形图[值，描述]

> ID：15597453
> 
> 赞同：0
> 
> 时间：2013-03-24T10:41:32.080
> 
> 标签：arrays, charts, label, jqplot

我正在使用 jqplot 库，我可以使用“条形图”

如果我只想显示描述？有可能吗？

埃斯。在第一个标签中：值 4000 但仅显示“大卫”。

- - - - - - - - - - - - - - - - - - - 大卫

------------------------------- 汤姆

- - - - - - - - - - - - - - - - - - - - - - - - 安德鲁

- - - - - - 玛丽

```
var arrayValue = [4000,3000,6000,2000];
var arrayDescription = ['David', 'Tom', 'Andrew', 'Mary'];

seriesDefaults: {
    renderer: finRenderer,
    pointLabels: {
        show: true,
        location: 'e',
        edgeTolerance: -25,
        labels: arrayValue
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:42:39.767

通常，您将使用以下`formatString`选项：

```
yaxis: {
    tickOptions: { formatString: "$%'.2f" }
} 
```

这样做会呈现`4000`as的值`$4,000.00`。

# c - 用C程序调用linux命令cmp

> ID：15597454
> 
> 赞同：0
> 
> 时间：2013-03-24T10:41:50.387
> 
> 标签：c, linux, fork, cmp

我正在尝试制作一个程序，它获取 2 个文件路径到 main，并调用 linux 的 cmp 命令来比较它们。

如果它们相等，我想返回 2，如果它们不同，则返回 1。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

int main(int argc, const char* argv[])
{
pid_t pid;
int stat;

//child process
if ((pid=fork())==0)
{
    execl("/usr/bin/cmp", "/usr/bin/cmp", "-s",argv[1], argv[2], NULL);
}
//parent process
else
{
    WEXITSTATUS(stat);
    if(stat==0)
        return 2;
    else if(stat==1) 
        return 1; //never reach here
}
printf("%d\n",stat);
return 0;
} 
```

出于某种原因，如果文件相同，我确实成功返回 2，但如果它们不同，则不会进入 if(stat==1)，而是返回 0。为什么会发生这种情况？我通过终端检查了文件上的 cmp 是否确实返回 1 如果它们不同，那么为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:54:09.223

像这样做：

```
//parent process
else
{
  // get the wait status value, which possibly contains the exit status value (if WIFEXITED)
  wait(&status);
  // if the process exited normally (i.e. not by signal)
  if (WIFEXITED(status))
    // retrieve the exit status
    status = WEXITSTATUS(status);
  // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:55:12.733

在您的代码中：

```
WEXITSTATUS(&stat); 
```

尝试从指针中提取状态，但`WEXITSTATUS()`将`int`其作为参数。

一定是：

```
WEXITSTATUS(stat); 
```

# android - 禁用安卓键盘

> ID：15597465
> 
> 赞同：0
> 
> 时间：2013-03-24T10:43:03.337
> 
> 标签：android, keyboard, android-emulator

当我尝试在模拟器中输入**EditText**时，它不允许我使用计算机键盘输入，并且总是弹出**屏幕键盘。**

有没有办法禁止键盘弹出并允许从**计算机键盘输入**？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:45:41.863

尝试这个：

1.  日食`Window menu`>>`AVD Manager`
2.  选择您的虚拟设备并单击`Edit`
3.  在 下`Hardware`，单击`New`
4.  选择`Keyboard Support`然后点击`OK`
5.  将其值编辑为`yes`
6.  现在您必须单击列表中的另一个项目，例如“Abtract LCD Density”或其他内容。这似乎使 UI 保持“是”的变化。

[[资源]](https://android.stackexchange.com/a/24944/26184)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:03:57.653

转到 AVD 管理器 -> 选择您的设备 -> 单击设置 -> 选中“硬件键盘存在”选项 -> 重新启动您的虚拟设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:58:44.897

转到 AVD 本地目录中的 config.ini 文件并将 hw.keyboard 设置为“NO”。

或者您可以使用以下命令通过命令行更新您的模拟器：

```
android update -avd <avd_name> [-<option> [<value>]] ... [-<qemu args>] 
```

祝安卓好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:59:28.857

以简单的方式，

从 AVD 管理器中选择您的 AVD 单击编辑检查“键盘硬件存在”现在启动您的设备。完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-16T22:39:29.633

稍微更正您的问题，它不是屏幕键盘，而是它的软键盘（来自模拟器的键盘称为软键盘）。

但是如果你想从你的模拟器中禁用软键盘，请从你的模拟器中禁用 2 个东西，Android 键盘 (AOSP) 和 Google 应用程序。从您的模拟器转到设置 > 应用程序 > 并禁用 Android 键盘 (AOSP) 和 Google 应用程序。注意：通过禁用 Google App，您可能无法使用某些 Google App 功能，但您可以随时重新启用它。

**下图**

[![在此处输入图像描述](../Images/bc295ff2c55594d2c9c3767d05eb3ebf.png)](https://i.stack.imgur.com/WwoZk.png)

[![在此处输入图像描述](../Images/7c3481a537a9e0f129624abcd641b528.png)](https://i.stack.imgur.com/TPdn8.png)

[![在此处输入图像描述](../Images/f2bb13ee169816de52f1a49fc833e085.png)](https://i.stack.imgur.com/O5vgB.png)

[![在此处输入图像描述](../Images/48343501d581e230d81d3f8f461618f8.png)](https://i.stack.imgur.com/CuwIH.png)

# asp.net-mvc - 在视图模型静态构造函数中创建 AutoMappper 映射有什么问题吗？

> ID：15597466
> 
> 赞同：1
> 
> 时间：2013-03-24T10:43:06.810
> 
> 标签：asp.net-mvc, asp.net-mvc-4, automapper

出色地？例如，我经常这样做：

```
public class PersonEditModel: MappedViewModel<Person>
{
    static PersonEditModel()
    {
        Mapper.CreateMap<Person, PersonEditModel>().Bidirectional();
    }
    [HiddenInput(DisplayValue = false)]
    public int Id { get; set; }
    public string Name { get; set; }
    public LanguageCompetencyIndexModel Languages { get; set; }
} 
```

我的核心 MVC 加载项集中藏有一个小帮手：

```
public static void Bidirectional<TSource, TDestination>(this IMappingExpression<TSource, TDestination> expression)
{
    Mapper.CreateMap<TDestination, TSource>();
} 
```

它节省了创建第二个映射，非常适合简单的捕获/显示场景。

现在，我可以将这个视图模型放在一个库中并在任何地方使用它，而不是在其他地方、在某个地方或某个地方创建地图`App_Start`，而不必记住为其添加映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:26:08.377

如果要重用映射定义，请将它们放在[profile](https://stackoverflow.com/questions/6825244/where-to-place-automapper-createmaps)中。它从您的视图模型中删除了 Automapper 依赖项，并允许您轻松集中映射。

# user-experience - 拆分全名的启发式

> ID：15597474
> 
> 赞同：1
> 
> 时间：2013-03-24T10:44:45.437
> 
> 标签：user-experience, heuristics, names

将全名分成名字和姓氏是一个无法解决的问题，因为[名字真的非常复杂](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)。因此，我的模型代表了一本书的作者和其他贡献者，包括`name`和`filingName`字段，其中`filingName`通常应该是“Last, First”（用于西方名称）。

但是，为了方便我的用户，我想让我的应用程序在用户填写常规名称时对归档名称做出合理的猜测。当然，如果猜错了，用户可以编辑文件名，但如果我猜对了，我会为他们节省一些时间。目前我只是假设最后一个以空格分隔的“单词”是姓氏，并用逗号将其移到前面：

```
NSMutableArray * parts = [self.name componentsSeparatedByCharactersInSet:NSCharacterSet.whitespaceCharacterSet].mutableCopy;

if(parts.count < 2) {
    return self.name;
}

NSString * lastName = parts.lastObject;
[parts removeLastObject];

return [NSString stringWithFormat:@"%@, %@", lastName, [parts componentsJoinedByString:@" "]]; 
```

我可以立即想到一种情况，这会让我误入歧途：像“Jr”这样的后缀。但我敢肯定还有很多其他人。是否有任何好的资源来解释常见的命名注意事项，或者解决这个问题的代码的好例子，我可以用来改进我的启发式方法？我在 Mac 上使用 Objective-C（以防框架的某个晦涩的角落可以帮助我），但我愿意从用任何语言编写的代码中学习。

此类问题之前已[被](https://stackoverflow.com/questions/7955016/designing-a-heuristic-to-split-full-name-into-relevant-fields) [问](https://stackoverflow.com/questions/3588918/splitting-a-full-name-field-into-first-and-last-name) [过](https://stackoverflow.com/questions/10923557/split-name-with-a-regular-expression)，但大多数答案要么集中在拆分字符串的机制上，要么转向“以不同方式设计模型”。我正在以不同的方式设计我的模型；我只是想让计算机为他们完成大部分用户的工作。

正如我之前所说，这段代码主要处理书籍的作者和其他贡献者的姓名。其中的一些具体后果包括：

*   中应该只有一个名字`name`，因为我支持将多个作者附加到一本书。
*   大多数名字不会有头衔，而是像“博士”这样的专业头衔。可以出现。理想情况下，这些将被丢弃，而不是作为名字的一部分。
*   这些名字通常是人的，但有时可能是组织的。我完全愿意冒险修改组织名称以获得更好的人名处理。
*   我预计我将主要处理欧洲名称，尽管检测名称的拼写[应该不难](http://nshipster.com/nslinguistictagger/)。
*   代码不应该对用户的语言环境特别敏感。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:28:56.307

当你构建一个软件系统时，总会有一些严重的问题需要耗费大量的时间。我不会对此感到困惑，因为**没有全球命名约定或规则**。我不认为要求用户输入他/她的文件名会很麻烦，因为他们只会做**一次**。

恕我直言，这似乎是更简单的解决方案。

# mysql - 执行 UNION select 获取数据来自哪个表

> ID：15597477
> 
> 赞同：0
> 
> 时间：2013-03-24T10:44:56.937
> 
> 标签：mysql, sql

我有 3 个表共享完全相同的结构，例如：

```
id       name_col 
```

我有这个查询：

```
$query = mysql_query("SELECT * FROM tbl_1 UNION SELECT * FROM tbl_2 UNION SELECT * FROM tbl_3"); 
```

现在：

```
while($row = mysql_fetch_array($query)){
    names .= $row['name_col'];
    // HERE HOW I COULD KNOW WHICH TABLE THIS DATA IS COMING FROM?
    // THIS NAME IS FROM tbl_1 OR tbl_2 OR tbl_3
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:46:40.793

您还可以添加一个自定义列，指定它所属的表的名称，例如

```
SELECT id, name_col, 'table1' tableName FROM table1
UNION
SELECT id, name_col, 'table2' tableName FROM table2
UNION
SELECT id, name_col, 'table3' tableName FROM table3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:49:17.573

您可以将常量字段添加到子查询中以对其进行索引，如下所示：

SQL：

```
SELECT *, 1 AS tbl ROM tbl_1 
UNION
SELECT *, 2 AS tbl FROM tbl_2 
UNION
SELECT *, 3 AS tbl FROM tbl_3 
```

该额外字段的列名必须在子查询中保持一致。

PHP：

```
while($row = mysql_fetch_array($query)){
    names .= $row['name_col'];
    switch ($row['tbl']){
         case 1: // tbl_1
         break;
         // etc.
    }
} 
```

# url - Nutch - 先爬取域名

> ID：15597488
> 
> 赞同：0
> 
> 时间：2013-03-24T10:46:20.287
> 
> 标签：url, web-crawler, nutch

我是 Nutch 的新手，并且我尝试让它做一些特定的爬行，即我希望它首先进入一个特定域（例如维基百科）的 3 级深度 - 这部分可以通过修改 regex-urlfilter 文件来实现.

但后来我希望它开始抓取它之前获取的所有外部链接，但只有 1 级深度。

所以，我的问题是，有没有办法从第一次运行中获取已爬取链接的列表，以便它们可以用作第二次爬取的种子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:25:10.350

您可以使用以下命令获取已抓取的 url 列表：

```
bin/nutch readdb crawl/crawldb -dump file 
```

然后，您可以使用该命令的输出手动编辑 urls/seed.txt 文件。

# javascript - 正确处理浏览器资源

> ID：15597489
> 
> 赞同：14
> 
> 时间：2013-03-24T10:46:20.340
> 
> 标签：javascript, jquery, browser, knockout.js, resources

我有一个 Web 应用程序，它可以在很长一段时间内动态加载数据。在数据中有指向图像的链接，然后在浏览器中呈现这些图像。

例如

```
var object = { 
    Name: ko.observable("Foo"), 
    Ref: ko.observable("Bar"), 
    ImageUrl: ko.observable("http://.....")           
} 
```

我正在使用[Knockoutjs](http://knockoutjs.com/)的模板绑定在屏幕上呈现数据。

```
<img data-bind="attr: { src: imageUrl }" /> 
```

因此，每次通过 Ajax 调用更改对象时，都会使用数据重新渲染 Knockoutjs 模板，并且图像也会更改。

很长一段时间后，这些图像会堆积起来，并会消耗更多的内存。现代浏览器似乎能更好地应对，但问题主要出在 IE8 上（我们不支持 < IE8）。即使在现代浏览器中，内存最终也会变得如此之高，以至于浏览器冻结。

有关构建图像资源的示例，请参阅此屏幕截图。

![在此处输入图像描述](../Images/b6d28c96bcd9668c2ef6d14106ff203a.png)

我决定看看如果不使用`<img />`标签，使用`<iframe />`.

所以我的代码现在看起来像

```
<iframe data-bind="attr: { src: imageUrl }"></iframe> 
```

现在发生的情况是创建了框架，但是一旦 imageUrl 发生更改，框架就会简单地更新并且不会创建额外的资源。

![在此处输入图像描述](../Images/15ee030b86c223c4bada0325e8f6df2e.png)

![在此处输入图像描述](../Images/827163afa255ce5c7427b4ccf3de6c1b.png)

因此，如果我想降低浏览器内存使用率，我可以使用这种`<iframe />`技术，但我不喜欢它。它迫使我对应用程序进行许多其他更改，而且我需要使用 iframe！

我现在已经运行了各种测试，以查看使用这两种技术的内存消耗量，在同一时间段内，内存将从 81,000k 增加到200,000k（with `<img />`），而 81,000k 增加到 98,000k（with `<iframe />`）

**问题**

有没有更好的方法来管理浏览器中的图像资源？有没有办法正确处理这个图像？我已经在网上搜索了答案，但到目前为止我还没有找到任何答案。

**编辑**

在非常基础的层面上。我曾尝试通过 jQuery 方法删除图像`remove()`，但图像资源从未被删除。请参阅this fiddle以获得一个非常基本的示例。[http://jsfiddle.net/ezb9e/](http://jsfiddle.net/ezb9e/)

代码：

html

```
<img src="http://www.fillmurray.com/200/300" /> 
```

JS

```
$(function(){   
    setTimeout(function(){
        $('img').remove();
        $('body').append($('<img />', { attr: { src: 'http://www.fillmurray.com/300/200' }}));
    }, 3000);    
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:43:28.563

我会尝试使用自定义绑定，并在其中创建和销毁图像。去年我在使用 SVG 时遇到了类似的问题，这就是我必须做的。

```
ko.bindingHandlers.createImage = {
    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    // Use something unique to identify this image object
    var imageName = viewModel.Name();
    var parent = bindingContext.$parent;

    var imageObject = parent.Images[imageName];

    if (imageObject) {
        $(element).empty()
        imageObject = null;
    }

    imageObject = $(element).append('<img src="' + viewModel.imgSrc() + '" />')[0];
    parent.Images[imageName] = imageObject;
    }
}; 
```

这是重新创建您的原始问题：

[http://jsfiddle.net/manzanotti/ezb9e/5/](http://jsfiddle.net/manzanotti/ezb9e/5/)

这是我的版本：

[http://jsfiddle.net/manzanotti/ezb9e/13/](http://jsfiddle.net/manzanotti/ezb9e/13/)

内存最初会增加，但它会时不时地收集垃圾，因此它永远不会失控。这是在 IE9 和 Chrome 中测试的。

*更新*嗯，我现在不相信这完全解决了 IE8 中的问题。我已经在 sIEve 中运行了小提琴，并且内存仍在增加，尽管 sIEve 在 DOM 节点中添加了钩子，这可能是在 sIEve 中运行它的结果。不过 Chrome 肯定没问题，而且 IE9 似乎至少要好得多，如果不是完全修复的话。

# c# - HRESULT 异常：保存 Excel 文件时出现 0x800A03EC 错误

> ID：15597490
> 
> 赞同：2
> 
> 时间：2013-03-24T10:46:32.127
> 
> 标签：c#, excel, file

我在按钮的点击事件上保存数据，下面是代码：

```
using Excel = Microsoft.Office.Interop.Excel;

Excel.Application xlApp;
Excel.Workbook xlWorkBook;
Excel.Worksheet xlWorkSheet;
Excel.Range range;

object misValue = System.Reflection.Missing.Value;
String st = System.IO.Directory.GetCurrentDirectory() + "\\A.xlsx";

xlApp = new Excel.ApplicationClass();

xlWorkBook = xlApp.Workbooks.Open(st, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

int i = 6;
for (i = 6; i < 10; i++)
{
    xlWorkBook.SaveAs(st, XlFileFormat.xlExcel9795, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlShared, misValue, misValue, misValue, misValue, misValue);
MessageBox.Show(xlWorkSheet.get_Range("L" + @i, "L" + @i).Value2.ToString());
}

xlWorkBook.Close(true, misValue, misValue);
xlApp.Quit(); 
```

当我保存它时，它给了我错误：

> HRESULT: 保存 Excel 文件时出现 0x800A03EC 错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-30T15:52:43.867

检查 sheet 的单元格索引，从 [1,1] sheet.cells[0,0] 开始将引发 com 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:56:29.577

正如我在从 HRESULT 保存 Excel 文件异常中所了解的那样：当方法 SaveAs 的参数错误时引发[0x800A03EC异常。](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/3ecbc477-a5d9-4033-887b-3e7dbaf2b7cb/)请在以下位置查看您的论点：

```
xlWorkBook.SaveAs(st1, XlFileFormat.xlExcel9795, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlShared, misValue, misValue, misValue, misValue, misValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T11:42:27.073

@Sebastian 是正确的，因为您调用 SaveAs 四次，保存到同一位置而不关闭。这是行不通的，您首先需要将其移出循环。但是更仔细地查看您的代码，您并没有更改工作簿中的任何内容，因此无需保存，如果您确实更改了某些内容，您最好调用**Save**而不是 SaveAs。**除此之外，您在打开工作簿时将ReadOnly**指定为 true，因此尝试以任何身份调用 save 都行不通。

最后，如果您使用 >= C# 4，则可以使用可选参数，因此所有这些**misValue**都是不必要的。我在下面整理了您的代码：

```
using Excel = Microsoft.Office.Interop.Excel;

var st = System.IO.Directory.GetCurrentDirectory() + "\\A.xlsx";

var xlApp = new Excel.Application();
var xlWorkBook = xlApp.Workbooks.Open(st);
var xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.Item[1];

for (var i = 6; i < 10; i++)
{
    MessageBox.Show(xlWorkSheet.Range["L" + @i, "L" + @i].Value2.ToString());
}

//make some changes here

xlWorkBook.Save();
xlWorkBook.Close();
xlApp.Quit(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-23T18:38:45.483

我知道这个线程很旧，但这可能对某人有帮助。我遇到了同样的问题，调用工作簿上的[Activate](https://msdn.microsoft.com/en-us/library/bh14x010%28v=vs.100%29.aspx) () 函数为我修复了它：

```
yourWorkBookObject.Activate() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-19T12:25:20.517

我在保存 Excel 文件行时遇到了同样的错误。

```
xlWorkBook.SaveAs(st); 
```

我发现文件夹名称已被某人更改，导致我无法将文件保存到“st”的给定文件位置。我希望这有助于有人先检查。

# java - Java UDP 服务器

> ID：15597492
> 
> 赞同：0
> 
> 时间：2013-03-24T10:46:47.490
> 
> 标签：java, udp

我是 Java 编程新手，我正在尝试创建一个 UDP 服务器。当我编译代码时，它说它无法监听端口 4722，我想知道为什么。下面是代码。我将不胜感激任何建议。

```
import java.net.*;
import java.io.*;

public class Server 
{
public static void main(String[] args) throws IOException 
{
    DatagramSocket serverSocket = new DatagramSocket(4722);
    Socket clientSocket = null;
    byte[] receiveData = new byte[1024];
    byte[] sendData = new byte [1024];      

    boolean command = true;
        try
        {
            serverSocket = new DatagramSocket(4722);
            DatagramPacket receivePacket = new DatagramPacket(receiveData,receiveData.length);
            System.out.println("Waiting for client...");

        } 

        catch (IOException e) 
        {
            System.err.println("Could not listen on port: 4722.");
            System.exit(1);

        }
        DatagramPacket packet = new DatagramPacket (sendData,sendData.length,4722);
        serverSocket.send(packet);

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        String inputLine, outputLine;
        mathematicalProtocol bbm = new mathematicalProtocol();

        outputLine = bbm.processInput(null);
        out.println(outputLine);

        while ((inputLine = in.readLine()) != null) 
        {
            if(inputLine.equals("Bye."))
            break;
            outputLine = bbm.processInput(inputLine);
            out.println(outputLine);
            if (outputLine.equals("Bye."))

            break;
        }

        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:42:57.363

您正在初始化`serverSocket`，然后`DatagramSocket`再次在同一个端口上创建一个新端口（您不能这样做，因为它已经绑定在第一个端口上`DatagramSocket`）。即删除以下行：

```
 serverSocket = new DatagramSocket(4722); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-24T23:43:03.190

这是客户端/服务器 UDP 通信的完整示例。

服务器从文件中读取数据并将每一行发送到客户端。

```
import java.io.BufferedReader; 
import java.io.FileReader;
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;

/**
 * @author nono
 *
 */

public class UDPFileSender {

static class Client implements Runnable {

    // Reception socket
    private DatagramSocket socket;
    // UDP packet to receive data into
    private DatagramPacket packet;
    // Flag for initialisation
    private boolean failedInit = true;

    /**
     * Client constructor.
     * @param receptionPort
     * @param packetMaxLenght
     */
    public Client(int receptionPort, int packetMaxLenght) {
        try {
            // Create the socket using the reception port
            this.socket = new DatagramSocket(receptionPort);
            // Init the packet
            this.packet = new DatagramPacket(new byte[packetMaxLenght],packetMaxLenght);
            this.failedInit = false;
        } catch (SocketException e) {
            //Port already used or other error
            e.printStackTrace();
        }
    }

    @Override
    public void run() {
        if(failedInit){
            return;
        }
        // Loop undefinitly
        while(true){
            try {

                System.out.println("Waiting for packet...");

                // Wait for packet
                socket.receive(packet);

                // Assuming you are receiving string
                String msg = new String(packet.getData());
                System.out.println("Received : " + msg);

            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

}

public static void main(String[] args) {

    try {

        int port = 4722;

        //Start a client that can listen
        new Thread(new Client(port,1024)).start();

        // Creaete a reader
        BufferedReader reader = new BufferedReader(new FileReader("File.txt"));

        //Create a socket
        DatagramSocket socket = new DatagramSocket();

        // Create a packet
        byte[] data = new byte[1024]; // Max length
        DatagramPacket packet = new DatagramPacket(data, data.length);

        // Set the destination host and port 
        packet.setAddress(InetAddress.getByName("localhost"));
        packet.setPort(port);

        String line = null;
        while((line = reader.readLine()) != null){
            //Set the data
            packet.setData(line.getBytes());

            //Send the packet using the socket
            System.out.println("Sending : " + line);
            socket.send(packet);
            Thread.sleep(200);
        }

        //Close socket and file
        reader.close();
        socket.close();

    } catch (IOException | InterruptedException e) {
        e.printStackTrace();
    }
}

} 
```

如果您的文件包含：

```
Hello
World 
```

你应该看到：

```
Waiting for packet...
Sending : Hello
Received : HelloWaiting for packet...
Sending : World
Received : World
Waiting for packet... 
```

# php - PHP SQL 行计数或编号

> ID：15597493
> 
> 赞同：0
> 
> 时间：2013-03-24T10:46:47.923
> 
> 标签：php, sql

我有如下所示的代码。我想要做的是对每个回显行进行编号，或者根据下面的代码获得总共过滤了多少行。

```
<?php
$host="localhost"; // Host name 
$username="****"; // Mysql username 
$password="****"; // Mysql password 
$db_name="****"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$result = mysql_query("SELECT * FROM members WHERE dealer= 'Panzer Protection'");

?>
      <?php
while($rows=mysql_fetch_array($result)){
?>
      <tr>
        <td bgcolor="#FF0000"><center>
          <? echo $rows['member_msisdn']; ?></td>
        <td bgcolor="#FF0000"><center>
          <? echo $rows['member_name']; ?></td>
        <td bgcolor="#FF0000"><? echo $rows['dealer']; ?></td>
        <td align="center" bgcolor="#FFFFFF">&nbsp;</td>
        <td align="center" bgcolor="#FFFFFF"><a href="control_clientinfo.php?member_id=    
<? echo $rows['member_id']; ?>" class="update">Look Up</a></td>
      </tr>
      <?php
}
?> 
```

所以基本上我需要计算代码显示的行数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:49:12.010

`mysql_num_rows()`您可以使用函数获取行数

```
echo mysql_num_rows($result); 
```

作为旁注停止使用`mysql_*`，因为它已弃用开始使用`Mysqli`OR `PDO`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:54:52.940

您可以使用 mysql_num_rows($result) 来获取总行数，并在 while 循环中使用简单的计数变量来获取每行的数量。

# html - 无法限制垂直滚动

> ID：15597497
> 
> 赞同：1
> 
> 时间：2013-03-24T10:47:11.767
> 
> 标签：html, css

我尝试了很多，但看不出这个页面出了什么问题，

我想将滚动条限制在背景图像上，即我只需要再滚动 10%。

但是这个页面：

[点击](https://dl.dropbox.com/u/141359479/spark.html)

它显示了很多带有空白的滚动区域，并且雨插件在那里也不起作用。

我尝试使用：

`overflow:scroll`

或者

```
overflow:hidden 
```

但是没有什么帮助隐藏不会让我自己滚动，但我想要一点滚动

但是，我已经能够限制我在除此之外的所有页面上的滚动。任何人都可以帮助我，并为糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:01:03.860

将以下内容添加到您的`rain1`和`rain2`元素中：

```
height: 100%;
overflow: hidden; 
```

# sql-server - Sum 和 Group By 子句

> ID：15597505
> 
> 赞同：1
> 
> 时间：2013-03-24T10:48:06.173
> 
> 标签：sql-server, sql-server-2008

我有一个如下所示的表格

```
名称 ID Sub1 Sub2
拉吉 1 75 76   
拉梅什 2 85 58   
塞卡 3 65 55   
悉达多 4 95 85    
拉吉 1 52 75   
塞卡 3 97 95   
悉达多 5 78 85   

```

我需要如下输出

```
名称 ID Sub1 Sub2
拉吉 1 127 151  
拉梅什 2 85 58   
塞卡 3 162 150    
悉达多 4 95 85  
悉达多 5 78 85   

```

也就是说，我需要将主题列中的标记总和并按 Id 列分组。我需要显示名称，但不应将其包含在 GroupBy 子句中。我应该如何编写查询以获得所需的结果？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:54:20.097

尝试这个 ：-

```
with cte as 
(  Select row_number() over(partition by a.id order by a.ID) rn,
   a.name,a.id , b.sum1, b.sum2  from
   sample a
   inner join 
  ( Select id,sum(sub1) Sum1,sum(sub2) as sum2 
    from Sample 
    group by id)b
  on a.id=b.id
)
Select name,id,sum1,sum2 from cte where rn=1 
```

或者你也使用`Sum`and`Over`子句`Subquery`

```
 Select *
 from 
 (
  Select name,id,sum(sub1) over (partition by id) sub1,
  sum(sub2) over(partition by id) sub2,
  row_number() over(partition by Id order by id) rn
  from sample
 ) s
 where rn=1 
 order by s.name 
```

[SQLFIDDLE](http://sqlfiddle.com/#!3/7d9eb/14)演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:38:41.113

在所有的澄清之后，它似乎真的很简单：

```
select Name
  , Id
  , Sub1 = sum(Sub1)
  , Sub2 = sum(Sub2)
from MyTable
group by Name, Id
order by Id 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/9555d/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T06:06:49.920

如果您需要`Name`从 group by 子句中排除，假设您的 id 是唯一标识符并且只有 ID 仅分配给 1 个名称，则`Name`使用聚合`MAX()`

```
SELECT
    MAX(Name) AS [Name]
   ,Id
   ,SUM(Sub1) AS [Sub1]
   ,SUM(Sub2) AS [Sub2]

FROM
    MyTable

GROUP BY
    Id

ORDER BY
    Id 
```

# c++ - gcc 4.7.2 虚函数错误

> ID：15597506
> 
> 赞同：5
> 
> 时间：2013-03-24T10:48:13.030
> 
> 标签：c++, gcc, g++, mingw

`this`用于 MinGW 的 gcc 4.7.2 中有一个已知错误，在某些涉及同一类中的虚拟和非虚拟继承的情况下，该错误会导致将无效指针传递给虚拟函数。详细信息在[此 Bugzilla 页面上](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55171)。

这个 bug 困扰了我，我需要为我正在编写的 Qt 应用程序修复它。Bugzilla 页面中有一个补丁，但我如何获得包含此补丁的工作版本？据我所知，GNU 下载页面只提供原始的、有缺陷的版本。而且4.7.2之后的gcc的下一个版本是4.8.0，我不能用，因为它会和我的Qt库不兼容。

应用补丁后，我是否必须从源代码构建 gcc？如果可以的话，我当然想避免这种情况！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:07:52.207

我接受了 Haroogan 的建议（从源代码重建 Qt），但使用的是 GCC 4.8.0 而不是 GCC 4.7.1。有效！至少，我已经用了三天了，还没有出现任何惊喜。唯一的小问题是 GCC 4.8.0 中的内在头文件，它需要应用[这个补丁](http://gcc.gnu.org/bugzilla/attachment.cgi?id=29719&action=edit)。除此之外，它一帆风顺（即我只花了两个晚上）。

**更新添加：**我现在注意到调试器存在一些问题。所以也许我说得太早了！

# ibm-midrange - CL 程序中的堆栈实现（OS400/iSeries）

> ID：15597509
> 
> 赞同：2
> 
> 时间：2013-03-24T10:48:34.857
> 
> 标签：ibm-midrange, control-language

我开始在 IBM 系统 i 上使用 CL 进行编程。我的任务是使用 CL 语言实现 RPN 计算器。通常，此计算器使用堆栈。但我不知道必须在 CL 中实现它。有人可以给我一些建议吗？也许 *PTR 变量是解决方案，但有人可以给我一个如何使用它的例子吗？

提前感谢 JS

**编辑：**

CL语言是我的导师强加的。

我的程序应该接收来自用户的符号（数字/数字，数学运算的符号）。
收到每个签名后，程序应该分析收到的内容，然后采取一些行动，根据伪代码：

```
Do when new sign was entered:
if: entered sign is a number
    then push it into stack
else if: entered sign is a sign of mathematical operation 
    then 
    - pop two elements from stack 
    - make operation using this elements and entered sign 
    - push result into stack 
```

我的问题是如何实现或替换这个堆栈。需要以 LIFO 顺序到达元素，我不知道该结构最终将包含多少个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:21:58.140

理解 CL 不适合这个。以下未经测试：

```
DCL &ARRAY *CHAR 50
DCL &PTR *PTR ADDRESS(&ARRAY)
DCL &ELEM *CHAR 10 STG(*BASED) BASPTR(&PTR)
DCL &i *DEC (9 0)
...
/* Loop through the array */
DOFOR VAR(&i) FROM(1) TO(5) BY(1)
  CHGVAR %OFFSET(&PTR) (%OFFSET(&PTR) + 10)
  /* &ELEM is the current array element */
ENDDO 
```

贴一些代码；你试过什么？如果您不能发布任何代码，请发布伪代码并解释您希望代码做什么。

**编辑：** 上面的代码片段实现了一个数组。这与堆栈非常相似。LIFO 就像跟踪最新的数组索引一样简单。在上面的代码片段中，CHGVAR 向指针添加了 10 个字节。它是 10 个字节，因为每个数组元素/堆栈元素是 10 个字节（DCL 和 ELEM）。这个特定的堆栈包含 5 个条目 - 5 乘以 10 = 50 (DCL & ARRAY)。加 10 字节为 PUSH，减 10 字节为 POP。当前的 &PTR 是最近的堆栈条目。

您的下一步应该是为大纲中的每个主要操作编写一个子例程。从推开始。如果您不熟悉 IBM i 上的调试器，请使用 DMPCLPGM 查看运行中的代码结果。试试看，然后如果您仍有疑问，请发布您的代码并询问有关该代码的特定问题。编程是关于编写代码，所以跳进去试试吧！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T20:30:07.700

据我记得，导师说堆栈的大小应该只有 4 个实体（10 个会过大）。除非我们不是在谈论同一个导师（pwr？）。

感谢您的回答巴克，感谢您，我设法了解指针的工作原理:)

我为这个特定问题实现堆栈的方式是：

```
PGM                                                                  
DCL        VAR(&STACK) TYPE(*CHAR) LEN(20)                           
DCL        VAR(&STACKPTR) TYPE(*PTR) ADDRESS(&STACK)                 
DCL        VAR(&STACKVAL) TYPE(*CHAR) STG(*BASED) BASPTR(&STACKPTR) LEN(5)                                                 

/* ----------------------------------------------------- */
/* code that uses PUSH and POP subroutines when required */
/* ----------------------------------------------------- */

SUBR       SUBR(PUSH)                                                             
  CHGVAR     VAR(&STACKVAL) VALUE(&WYRAZENIE)                   
  CHGVAR     VAR(%OFFSET(&STACKPTR)) VALUE(%OFFSET(&STACKPTR)+5)
ENDSUBR                                                         
SUBR       SUBR(POP)                                            
  CHGVAR     VAR(%OFFSET(&STACKPTR)) VALUE(%OFFSET(&STACKPTR)-5)               
ENDSUBR                                                         
ENDPGM 
```

当然没有溢出控制或其他什么，但它给了你这个想法:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T15:02:51.043

创建 *LIFO 数据队列。发送到队列的条目可以按后进先出的顺序接收。

# php - php逐行输入文件使第一行标题一个标记

> ID：15597510
> 
> 赞同：0
> 
> 时间：2013-03-24T10:48:40.933
> 
> 标签：php

```
 <?php

foreach (glob("POSTS/*.txt") as $filename) 
        {       

            $file = fopen($filename, 'r') or exit("Unable to open file!");
            //Output a line of the file until the end is reached

                echo date('D, M jS, Y H:i a', filemtime($filename))."<br>";
                while(!feof($file))
                  {
                  echo fgets($file). "<br>";
                  }
            echo "<hr/>";
        }
    fclose($file);

    ?> 
```

所以这个php代码从一个文件夹中逐行读取所有文件和每个文件，我想要它以便在读取文件时：为第一行添加一个html标签以使第一行成为一个大标题和下一行普通的？我该怎么做，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:02:45.943

在进入循环之前只需阅读一行，如下所示：

```
echo date('D, M jS, Y H:i a', filemtime($filename))."<br>";
echo '<h1>' . htmlspecialchars(fgets($file)) . '</h1>';
while (!feof($file)) {
    echo htmlspecialchars(fgets($file)) . '<br/>';
} 
```

请注意，这仅在空文件的情况下偶然起作用，其中[`fgets`](http://www.php.net/manual/en/function.fgets.php)将返回 false，将显示为`''`. 您可以通过明确检查是否为假来捕捉到这一点：

```
$firstLine = fgets($file);
if ($firstLine == false) {
    echo '<h1>' . htmlspecialchars($firstLine) . '</h1>';
} 
```

# css - GWT Stockwatcher 教程 - 自动资源包括

> ID：15597511
> 
> 赞同：0
> 
> 时间：2013-03-24T10:48:41.977
> 
> 标签：css, gwt, stylesheet

我正在关注 GWT 教程（[GWT 教程）](https://developers.google.com/web-toolkit/doc/latest/tutorial/style)

关于自动资源包含的部分说：

> 对于 StockWatcher，您将遵循首选策略。您将使用模块 XML 文件，而不是在 HTML 主机页面中放置样式表的链接。然后，当您编译 StockWatcher 时，GWT 编译器将捆绑运行应用程序所需的所有静态资源，包括样式表。这种机制称为自动资源包含。

但是，它们似乎将样式表放在托管页面中，而不是模块 XML 文件中。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:18:45.793

那段肯定是过时的，应该删除/替换。您可以将链接到的当前版本与旧的 1.5 版本[https://developers.google.com/web-toolkit/doc/1.5/tutorial/style](https://developers.google.com/web-toolkit/doc/1.5/tutorial/style)进行比较，他们仍然使用`<stylesheet>`模块 XML 文件中的元素。

# python - Python - 创建索引时出现 KeyError

> ID：15597513
> 
> 赞同：2
> 
> 时间：2013-03-24T10:48:53.197
> 
> 标签：python, associative-array, keyerror

这是代码（它在类内运行）：

```
if profile['profile_picture']:
    profile['profile_picture_raw_path'], # Line 26
    profile['profile_picture_thumbnail'],
    profile['profile_picture'] = self.picture_path(profile['profile_picture']) 
```

密钥不存在。返回的典型结果`picture_path`是

```
('//domain.com/218971848/21924823397471f5e4e41a803da17f7c.jpg:large', '//domain.com/profile-images/218971848/21924823397471f5e4e41a803da17f7c.jpg:thumb-100', '//domain.com/profile-images/218971848/21924823397471f5e4e41a803da17f7c.jpg:exact') 
```

如您所见，结果是 3 个元素的元组。

我得到一个错误：

```
 File "/srv/rwt/production/application/rwt/profile.py", line 26, in load_profile
    profile['profile_picture_raw_path'],
KeyError: 'profile_picture_raw_path' 
```

为什么会出现这个错误？在 Stack Overflow 上搜索了类似的问题，但他们似乎被问及如何通过不存在的键访问字典值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:57:11.843

`profile['profile_picture_raw_path'],`on a line 本身被解析为一个独立的表达式（虽然是一个相当无用的表达式）。

您需要告诉 Python 解释器下一行是表达式的一部分：

```
profile['profile_picture_raw_path'], \
profile['profile_picture_thumbnail'], \
profile['profile_picture'] = self.picture_path(profile['profile_picture']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:18:04.830

使用括号

```
if profile['profile_picture']:
    (profile['profile_picture_raw_path'], # Line 26
    profile['profile_picture_thumbnail'],
    profile['profile_picture']) = self.picture_path(profile['profile_picture']) 
```

# postgresql - 用于 jdbc 的 postgres hba.conf

> ID：15597516
> 
> 赞同：4
> 
> 时间：2013-03-24T10:49:16.527
> 
> 标签：postgresql, jdbc, configuration, tcp, ssh

我正在尝试从另一个程序建立与 postgres 的 JDBC 连接。

当我运行程序时，我收到以下错误：

[2013-03-24 03:14:10,542][ERROR][org.elasticsearch.river.jdbc.strategy.simple.SimpleRiverSource] 打开读取连接时：jdbc:postgresql://[我的 postgres 服务器的 ip 地址]:5432 /[我的数据库名称] 致命：**主机“[我的客户端 ip 地址]”、用户“postgres”、数据库“[我的数据库名称]”没有 pg_hba.conf 条目，SSL 关闭**

我可以通过运行命令行客户端成功连接到服务器： psql -d [my database name] -U postgres -p 5432 -h [my postgres server ip address]

我认为我有一个可以工作但需要在 pg_hba.conf 中启用 tcp 连接的 unix 套接字连接，但看起来我已经在下面的 pg_hba.conf 文件中允许了几个 tcp 连接......谁能告诉我什么可能做错了吗？

我的 pg_hba.conf 包含以下未注释的行：

```
hostssl all all 0.0.0.0/0 md5
host all all 10.0.0.0/8 md5
local   all             postgres                                peer
local   all             all                                     peer
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:55:22.297

如果在本地计算机上进行开发，并且booth程序和数据库在同一台机器上运行，请使用：

```
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust 
```

# swing - 为什么计时器不递减？

> ID：15597518
> 
> 赞同：1
> 
> 时间：2013-03-24T10:49:22.610
> 
> 标签：swing

这是代码

```
public class TimeClass implements ActionListener{
    int timerCounter;

    public TimeClass(int timerCounter){
        this.timerCounter = timerCounter; 
    }

    public void ActionPerformed(ActionEvent time){

        timerCounter--;
        if(timerCounter >= 1){
        timeLeft.setText("Time Remaining: " + timerCounter);    
        }else{

            timer.stop();
            timeLeft.setText("Game Over!");
            click.setEnabled(false);    
        }
    }
    public void actionPerformed(ActionEvent e) {    
    }   
    } 
```

计时器不会递减。代码有什么问题？我的演示文稿需要这个。尽快需要这个。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:51:19.080

您以错误的方法实现了该功能，它应该位于`actionPerformed`：

```
@Override public void actionPerformed(ActionEvent time){

    timerCounter--;
    if(timerCounter >= 1){
    timeLeft.setText("Time Remaining: " + timerCounter);    
    }else{

        timer.stop();
        timeLeft.setText("Game Over!");
        click.setEnabled(false);    
    }
} 
```

在覆盖方法时使用`@Override`符号将帮助您避免此类错误，因为编译器会在用于非覆盖方法时警告您。

# php - 这个 PDO 代码对 SQL 注入是否足够安全？

> ID：15597528
> 
> 赞同：4
> 
> 时间：2013-03-24T10:50:10.570
> 
> 标签：php, html, sql, pdo, code-injection

正如标题所说：这段代码对 SQL 注入是否足够安全？

有没有更好的方法来防止 SQL 注入？

```
<?php
$hostname   = "xxx";
$username   = "xxx";
$dbname     = "xxx";

$password   = "xxx";
$usertable  = "xxx";
$yourfield  = "xxx";

$db = new PDO('mysql:host='.$hostname.';dbname='.$dbname.'', $username, $password);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$query = $db->prepare("INSERT INTO `$usertable` (first_name, last_name, username) VALUES (:first_name, :last_name, :username)");
$query->bindValue(':first_name', $_POST['first_name']);
$query->bindValue(':last_name',  $_POST['last_name']);
$query->bindValue(':username',   $_POST['username']);

$query->execute();
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:52:19.810

如果您只使用上面代码中的准备语句，那么您是安全的。AFIK 没有其他可能通过 SQL 注入来破解您的网站。

准备语句包含来自命令的数据，因此不能将任何*内容*作为 SQL 语句的一部分执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:52:23.007

是的，准备好的查询通常对 SQL 注入几乎 100% 安全。但是，我建议也将`data_type`参数传递给`PDO::bindParam()`;

请参阅：[针对 SQL 注入准备好的查询是否 100% 安全](https://security.stackexchange.com/questions/15214/are-prepared-statements-100-safe-against-sql-injection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T10:52:24.490

`Yes this PDO code safe enough from SQL injection.`

# c# - 编组一个对象数组

> ID：15597533
> 
> 赞同：1
> 
> 时间：2013-03-24T10:50:51.173
> 
> 标签：c#, arrays, marshalling

我有以下程序：

```
[StructLayout(LayoutKind.Sequential)]
class SwitchTime
{
    public byte st1 { get; set; }
    public byte st2 { get; set; }
}

[StructLayout(LayoutKind.Sequential,Size=3)]
class SwitchParam
{
    public byte sp1 { get; set; }
    public byte sp2 { get; set; }
    public byte sp3 { get; set; }
}

[StructLayout(LayoutKind.Sequential)]
class SwitchRecord
{
    public SwitchTime switchTime;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
    public SwitchParam[] switchParams;
} 
```

我有：

```
void populate( SwitchRecord SR)
{
    SR.switchTime = new SwitchTime();
    SR.switchTime.st1 = 1;
    SR.switchTime.st2 = 2;
    SR.switchParams = new SwitchParam[2];
    SR.switchParams[0] = new SwitchParam();
    SR.switchParams[0].sp1 = 3;
    SR.switchParams[0].sp2 = 4;
    SR.switchParams[0].sp3 = 5;
    SR.switchParams[1] = new SwitchParam();
    SR.switchParams[1].sp1 = 6;
    SR.switchParams[1].sp2 = 7;
    SR.switchParams[1].sp3 = 8;
}

byte[] StructureToByteArray(object obj)
{
    int len = Marshal.SizeOf(obj);//Exception here
    byte[] arr = new byte[len];
    IntPtr ptr = Marshal.AllocHGlobal(len);
    Marshal.StructureToPtr(obj, ptr, true);
    Marshal.Copy(ptr, arr, 0, len);
    Marshal.FreeHGlobal(ptr);
    return arr;
}

public MainWindow()
{
    InitializeComponent();

    SwitchRecord SR = new SwitchRecord();
    populate(SR);
    byte[] b = StructureToByteArray(SR.switchTime);     //Works!
    b = StructureToByteArray(SR.switchParams[0]);       //Works!
    try
    {
        b = StructureToByteArray(SR.switchParams);      //Failed!
    }
    catch (Exception err)
    {
        Console.WriteLine(err.Message);
    }
} 
```

在运行时，程序未能编组`SwitchParams`嵌套在`SwitchRecord`类中的数组。

`int len = Marshal.SizeOf(obj);`在函数中引发以下错误`StructureToByteArray`：

```
Type 'WpfApplication2.MainWindow+SwitchParam[]' cannot be marshaled as an unmanaged structure; no meaningful size or offset can be computed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:56:45.053

以它的`StrucyLayoutAttribute`名字说，它应该应用于结构，而不是类，所以你应该有：

```
[StructLayout(LayoutKind.Sequential)]
struct SwitchTime
{
    public byte st1 { get; set; }
    public byte st2 { get; set; }
}

[StructLayout(LayoutKind.Sequential,Size=3)]
struct SwitchParam
{
    public byte sp1 { get; set; }
    public byte sp2 { get; set; }
    public byte sp3 { get; set; }
}

[StructLayout(LayoutKind.Sequential)]
struct SwitchRecord
{
    public SwitchTime switchTime;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
    public SwitchParam[] switchParams;
} 
```

作为旁注，**请**在将来`PascalCase`使用您的方法，不要使用`camelCase`它们。C# 中的方法始终`PascalCased`遵循约定。

# module - LuaXML 错误：“未定义符号：luaL_prepbuffer”

> ID：15597536
> 
> 赞同：1
> 
> 时间：2013-03-24T10:51:10.330
> 
> 标签：module, lua, luaxml

我正在使用 lua 解释器，并且正在尝试加载[LuaXML](http://viremo.eludi.net/LuaXML/)，但是当我*require('LuaXML')*时，出现此错误。

```
lua: error loading module 'LuaXML' from file './LuaXML_lib.so':
    ./LuaXML_lib.so: undefined symbol: luaL_prepbuffer 
```

我不知道如何解决这个问题。我尝试自己编译模块，但它仍然抛出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:29:32.100

这是因为您尝试在 Lua 5.2 下使用 LuaXML。
LuaXML 是为 Lua 5.1 设计的。
该问题可以通过安装 Lua 5.1.x 或 LuaJIT 来解决。

# node.js - 如何让所有本地人在jade中从服务器传递到客户端

> ID：15597543
> 
> 赞同：0
> 
> 时间：2013-03-24T10:52:07.473
> 
> 标签：node.js, express, pug

是否可以像这样从服务器中获取所有本地人：

```
express:

res.render('index', {
  title: 'My Title',
  p1: 1,
  p1: 2,
  p1: 3,
  p1: 4
});

jade:

 html
   head
   body
     script
        var all_locals = _.getLocals(); // all_locals => { title: 'My Title', p1: 1,    p1: 2, p1: 3, p1: 4} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:30:34.903

您做得对，您可以将所有变量包装在一个变量中，然后使用[res.render()](http://expressjs.com/api.html#res.render)发送。

```
//in express
all_locals = {
  title: 'My Title',
  p1: 1,
  p2: 2,
  p3: 3,
  p4: 4
};
res.render('upload.jade',{all_locals: JSON.stringify(all_locals)});

//in jade
var all_locals = !{all_locals};
alert(all_locals.title); 
```

# javascript - Jquery Autocomplete键按下显示标签名称而不是值？

> ID：15597545
> 
> 赞同：3
> 
> 时间：2013-03-24T10:52:22.427
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

有没有办法可以强制 jQueryUI 自动完成显示数据标签而不是数据值：

例如

> [{"label":"name","value":"1"},{"label":"name3","value":"6"},{"label":"name1","value": "8"},{"label":"name2","value":"10"}]

```
$( ".auto-search" ).autocomplete({
    minLength: 2,
    dataType: 'json',
    source: tempJson,
    focus: function(event, ui){
        $('input[name="user-name"]').val(ui.item.label);
    },
    select: function (event,ui){
        $('input[name="user-name"]').val(ui.item.label);
        $('input[name="user-id"]').val(ui.item.value);
        return false;
    }
}) 
```

上面的代码，当您按下向下按钮时，会显示值而不是标签。可以更改以显示标签吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T16:17:55.807

确保`return false`或阻止`focus`事件处理程序对事件的默认操作：

```
focus: function(event, ui){
    event.preventDefault();
    $('input[name="user-name"]').val(ui.item.label);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T00:37:02.660

回调函数对我不起作用。所以我使用了绑定事件`autocompletefocus`并且工作得很好。

```
$('input[name="user-name"]').on("autocompletefocus", function (event, ui) {
   event.preventDefault();
   $(this).val(ui.item.label);
}); 
```

# php - td 的 preg_match

> ID：15597547
> 
> 赞同：0
> 
> 时间：2013-03-24T10:52:23.113
> 
> 标签：php, preg-match

我正在尝试从 td 内的网页中过滤数据，它是这样的：

```
 <td colspan="2">several anchor,bold and other html tags are inside this td</td> 
```

我已经使用了这个 preg_match 但它给出了所有其他 td 的输出，但在上述情况下它没有给出任何输出。

```
 preg_match("/\<td colspan\=\"2\"\>(.*)\<\/td\>/",$str,$title); 
```

这是完整的td：

```
 <td colspan="2">
      <div align="left" style="width:370; height:315;">
            <ins style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px">      

          <ins style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px" id="aswift_1_anchor"><iframe width="336" scrolling="no" height="280" frameborder="0" style="left:0;position:absolute;top:0;" name="aswift_1" id="aswift_1" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){w.location.replace(h)}}" allowtransparency="true" hspace="0" vspace="0" marginheight="0" marginwidth="0"></iframe></ins></ins>
           </div><p>  When starting out sometimes it is a good idea to write down your            <a href="#" style="text-decoration: underline !important;position:static;font-family:inherit !important;font-weight:inherit !important;font-size:inherit !important;" class="kLink" id="KonaLink1">   
      <font color="blue" style="color: blue !important; font-family:inherit !important;font-weight:inherit !important;font-size:inherit !important;position:static;">                   <span style="color: blue !impor  If you seriously want to take back control of your money you need to build a <a href="http://ezinearticles.com/?To-Set-Up-a-Personal-Budget-Get-a-Pencil-and-Paper&amp;id=1629478">Personal Budget</a>. To learn more about creating a budget please visit the website <a href="http://household-budget.home-choices-net.com">Household Budgets by clicking here</a>. </p><p> </p><p><!-- google_ad_section_end -->

              </p><p>
        <font style="color:02679D; font-size:12"><b><font color="000000">Related Articles - 

       </font>
           </b></font>
        </p><p><table width="100%" border="0"><tbody><tr>
        <td align="center">
           <br><br><br><br>

        <br><br>

          </font></p></td></tr></tbody></table>
            </p></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:56:15.340

一般来说，不要使用正则表达式来解析 html。但是，您的问题是您的正则表达式已准备就绪并捕获了所有可能的数据。尝试添加一个问号：

```
preg_match("/\<td colspan\=\"2\"\>(.*?)\<\/td\>/",$str,$title); 
```

问号使组非灰色，字符串将在下一个可能的标记处结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:56:21.963

您需要添加修饰符：

```
 preg_match("/\<td colspan\=\"2\"\>(.*)\<\/td\>/s",$str,$title); 
```

[http://php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

> ```
>  s (PCRE_DOTALL) 
> ```
> 
> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

# c# - 如何在实体框架中插入标识列的值？

> ID：15597551
> 
> 赞同：0
> 
> 时间：2013-03-24T10:52:38.640
> 
> 标签：c#, entity-framework

我在 sql 表中创建了两列，一列是标识列，另一列是 varchar 列。我需要从值 1000 开始生成标识列。我尝试了下面的代码片段，但是给出了错误“更新条目时发生错误。有关详细信息，请参阅内部异常..”

```
 Place objPlace = new Place();
   objPlace.PNAME = "place 3";
   //objPlace.PID = 1003;   //purposefully commented for auto increment

   objContext.Places.AddObject(objPlace);
   objContext.SaveChanges(); 
```

我想这是一个非常基本的问题，因为我是 EF 的新手，所以请帮我解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:08:13.183

您只是想在**EF**中执行此操作来学习语法吗？我问的原因是因为您可以在**SSMS**的列上设置种子（[http://msdn.microsoft.com/en-gb/library/aa933196%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-gb/library/aa933196%28v=sql.80%29.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T17:28:13.737

上述帖子中提到的 ExecuteSqlCommand() 命令将无法正常工作，如链接**中**[所述](https://social.msdn.microsoft.com/Forums/en-US/abd69be5-1410-4fdf-9e10-b9cf54bceea9/ef-codefirst-auto-increment-starting-value?forum=adodotnetentityframework)

[这里](https://stackoverflow.com/questions/23967881/entity-framework-auto-increment-with-starting-value)提到了另一种解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T08:14:48.563

让sql server生成身份。设置身份种子和身份增量的值。

当列为 identity 时，从实体框架插入记录将引发以下错误。 **当 IDENTITY_INSERT 设置为 OFF 时，无法在表“MY_ENTITY”中插入标识列的显式值。** 为避免错误设置实体属性**StoreGeneratedPattern="Identity"**

```
 <EntityType Name="MY_ENTITY">
              <Key>
                <PropertyRef Name="UserID" />
              </Key>
              <Property Name="RecordID" Type="int" StoreGeneratedPattern="Identity" Nullable="false" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:56:19.990

您不能为 Identity 列赋值。它毫无意义。

如果你想改变你的身份列的起始值，为什么不通过一个简单的脚本来做呢？

```
context.Database
       .ExecuteSqlCommand("ALTER TABLE Place ALTER COLUMN Id IDENTITY (1000,1)"); 
```

这将为`Place.Id`表中的第一行插入 1000，然后为后续行插入 1001,1002... 等等。

# shell - Mageno：PHP 致命错误：在第 79 行的 MAGENTODIR/shell/abstract.php 中找不到类“法师”

> ID：15597553
> 
> 赞同：0
> 
> 时间：2013-03-24T10:53:13.417
> 
> 标签：shell, magento-1.7, reindex

我通常通过 SSH 进入“shell”目录并使用“indexer.php”对“catalog_url”进行重新索引但昨天突然间我尝试实现该过程但出现错误。只需以下命令

```
php -f indexer.php info 
```

显示错误：

```
PHP Fatal error:  Class 'Mage' not found in MAGENTODIR/shell/abstract.php on line 79 
```

据我记得，在尝试昨天的重新索引之前，我已将“使用平面目录类别”和“使用平面目录产品”更改为“否”并禁用了“Mage_Log”模块输出。它的 Magento 1.7

任何想法或帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:40:48.557

找到了解决方案。它实际上是因为 APC 而发生的。为了测试，我通过在此处编辑 ini 禁用了 APC：

```
/etc/php5/apache2/conf.d/apc.ini 
```

通过做 ”;”

```
;extension=apc.so 
```

然后从magento shell内部尝试了索引器

`php -f indexer.php info`

一切正常。

# dart - dart 在未来 .then() 上将数据附加到 html

> ID：15597555
> 
> 赞同：0
> 
> 时间：2013-03-24T10:53:41.963
> 
> 标签：dart

所以我有这个代码：

```
import 'dart:html';
import 'dart:json';

class BaseModel {
  Map values;
  String _url;
  // another basic properties

  // constructor defined here

  fetch() {
    var el = document.query('#container');
    HttpRequest.getString(_url).then(
      (result) {
        values = new Map.from(parse(result));
        el.innerHtml = values['name'];
        return result;
      })
  }
}

void main() {
  BaseModel bm = new BaseModel(url: /path/to/test.json);
  bm.fetch();
} 
```

我有一个这样的json数据：

```
{
  "name" : "Andrew",
  "age" : 20
} 
```

我希望在 DOM 上看到“Andrew”，但我什么也没看到。如果我改变

`el.innerHtml = "SOME_TEXT"`

然后我可以看到显示的“SOME_TEXT”文本。

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:32:46.140

*   如果打印名称，您会在 JavaScript 控制台中看到什么？
*   如果添加错误处理程序会发生什么？

大致如下：

```
 HttpRequest.getString(_url)
      .then((result) {
        values = new Map.from(parse(result));
        print(values['name']);
        el.innerHtml = values['name'];
        return result;
      })
      .catchError((e) => print(e)); 
```

# html - 在 IE 中未点击横幅图像上的链接

> ID：15597556
> 
> 赞同：0
> 
> 时间：2013-03-24T10:53:55.807
> 
> 标签：html, css, internet-explorer

我的网站上有一个促销横幅。

HTML结构是这样的

```
<a href="#"><img src="#" usemap="abc"></img></a><map name="abc"><area ...></map> 
```

实际代码：

```
<div id="promotion_banner" Style="position:fixed;right:0pt;top:25%;cursor: pointer;display:none;z-index:101;"> <a href="http://www.abc.com"> <img src="off-open-mar.png" alt="ABC" usemap="#hide_promo"></img> </a> <map name="hide_promo"> <area shape="rect" coords="20,235,42,260" id="hide_promotion" alt="text"> </map> </div> 
```

当我在 Chrome 或 FireFox 或 Opera 或除 IE 之外的任何其他浏览器中单击横幅时，它工作正常。

但是当我在 IE 中尝试同样的事情时，它并没有点击。悬停时，它会显示适当的 URL，但 URL 不可点击。
您可以通过右键单击横幅或单击 URL 一次然后按 Enter 来访问 URL。

如果有人知道什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:02:49.713

这应该可以在任何浏览器中完美运行：

```
<div id="promotion_banner"> 
<a href="2.html"> <img src="r.jpg" alt="ABC" usemap="#hide_promo" onclick="location.href='2.html'" style="cursor: hand;"/> </a> 
<map name="hide_promo"> 
    <area shape="rect" coords="20,235,42,260" id="hide_promotion" alt="text" /> 
</map> 
</div> 
```

我在 IE 中测试过它，它运行良好。由于兼容性问题，横幅图像上的链接在 IE 中没有被点击，所以我调用了 javascript onclick 函数：

```
 onclick="location.href='2.html'" 
```

使其可点击。

`Please note`: 我特意在两个地方给出了 URL：

```
 (1)<a href="2.html"> 
 (2)"location.href='2.html'" 
```

因为**第二个** `onclick="location.href='2.html'"`受支持并且仅在**IE**中运行良好。

对于除**IE之外的所有浏览器（** **chrome、safari、firefox、opera** ） ，链接 都可以使用。**`<a href="2.html"><img...`**

 ***棘手的解决方案，但适用于任何浏览器。***

# java - 如何将 2 个比较放在一个 if 语句中？

> ID：15597557
> 
> 赞同：-5
> 
> 时间：2013-03-24T10:54:08.577
> 
> 标签：java, if-statement

我想知道如何在同一个 if 语句中进行两个比较，例如 if 5<6 和 <7。

请回答我。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:55:39.710

您可以使用逻辑“和”运算符`&&`：

```
if (x < 6 && y < 7) {
   ...
} 
```

当然，检查相同的值是否小于 6 和 7 是多余的，因为任何小于 6 的东西都保证小于 7。这就是为什么我在示例中使用了两个不同的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:55:25.567

```
if((5<6) && (5<7)){
  // Do something.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T10:55:38.857

```
if( 5<6 && 5 <7){
..........

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T10:57:06.800

你的意思是：

```
if ( (5 < 6) && (5 < 7) ){
    doSomething()
} 
```

说真的，你所要做的就是在谷歌中输入“AND operator java”，你会发现大量关于 java 语法的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T11:23:39.840

```
if (5 < 6 && 5 < 7) {
} 
```

像这样的括号 (5 < 6) && (5 < 7) 是不必要的。但是，您应该添加它们以便于阅读

# attributes - CAS Jasig 记住我使用旧用户属性

> ID：15597563
> 
> 赞同：0
> 
> 时间：2013-03-24T10:54:19.697
> 
> 标签：attributes, cas, remember-me, jasig

似乎当使用记住我功能登录时，用户属性（来自 AttributeRepository）没有刷新。

用例：用户星期一登录。检索其属性。星期二，它的属性发生变化（例如角色）。周三，当它返回席位并通过 Rememberme 进行身份验证时，其旧属性值由 CAS 服务器返回。如果用户注销然后登录，则其属性通常会刷新。

通过记住我登录时如何刷新用户属性？

我正在使用 CAS 服务器 3.5.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T03:12:06.347

目前，这些属性未刷新。这些属性在 TGT 生成时被检索并序列化到数据库中（它们与附加到票证的主体一起存储）。CAS4-api 分支通过始终委托底层属性存储库来解决该问题，该存储库可以决定将属性缓存一段时间。正在做一些工作来将一些 API 分支代码转移到主干中，但不是全部。如果你想在那里看到这个，你应该打开一个带有这个错误的 JIRA 问题。我可以在票证中提供详细信息，说明为什么会发生这种情况以及解决方法。

# jquery - 如何用媒体查询替换 div

> ID：15597565
> 
> 赞同：0
> 
> 时间：2013-03-24T10:54:24.167
> 
> 标签：jquery, css, media-queries

我目前正在为我的响应式网站设计搜索框，但由于设计原因，单击时展开的搜索框不适合特定区域。因此，我想将搜索框替换为另一个按钮，然后该按钮将在不同的位置显示一个搜索框。

如何用媒体查询或 jquery 替换 div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:59:31.753

这是你可以做到的：

**HTML 和 JavaScript：**

```
 <div id=a>a</div>
  <button id=b>BUT</button>
  <script>
    $('#b').click(function(){$('#a').show()})
  </script> 
```

**CSS：**

```
@media (max-height: 500px) {
   #a {
     display: none;  
   }
}
@media (min-height: 500px) {
   #b {
     display: none;  
   }
} 
```

**[示范](http://jsbin.com/iyolut/1/edit)**

如果降低窗口的高度，`#a`则隐藏 div。但是单击按钮会显示它。使用媒体查询，您还可以针对不同尺寸调整 div 的位置或外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:03:03.320

HTML

```
<div id="Box">
    <input type="submit" value="submit" id="submit" class="show" />
    <input type="text" id="text" class="hide" />
</div> 
```

CSS

```
.show
{
    display:block;
}
.hide
{
    display:none;
} 
```

jQuery

```
$(document).ready(function(){
    $("#Box").dblclick(function(){
        $('#text').toggleClass('show');
        $('#submit').toggleClass('.hide');
    });
}); 
```

# python - 在 Python 的条件语句中使用“或”：“if x == “y”或“z””

> ID：15597576
> 
> 赞同：0
> 
> 时间：2013-03-24T10:56:01.407
> 
> 标签：python, boolean, conditional

```
def shapearea():
    shape = raw_input("What shape do you want to print? ")
    if shape == "triangle" or "Triangle":
        return trianglearea()

    elif shape == "circle" or "Circle":
        return circlearea()

    elif shape == "square" or "Square":
        return squarearea()
    else:
        shapearea()

shapearea() 
```

使用此代码会破坏我的程序，我怎样才能让程序注册（例如）：

“圆圈”或“圆圈”相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:57:03.587

```
if shape in ("triangle", "Triangle") 
```

或者更好，

```
if shape.lower() == "triangle" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:57:23.813

替代@jamylak 的答案，这是您需要的：

```
if shape == "triangle" or shape == "Triangle":
    return trianglearea()

elif shape == "circle" or shape == "Circle":
    return circlearea()

elif shape == "square" or shape == "Square":
    return squarearea() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:09:21.563

```
So the actual function should be:  
def shapearea():
shape = raw_input("What shape do you want to print? ")
        if shape == "triangle" or shape == "Triangle":
            return trianglearea()

    elif shape == "circle" or shape == "Circle":
        return circlearea()

    elif shape == "square" or shape == "Square":
        return squarearea()
    else:
        shapearea()

shapearea() 
```

# java - 如何使用java创建和使用打印方法

> ID：15597587
> 
> 赞同：-3
> 
> 时间：2013-03-24T10:56:57.810
> 
> 标签：java

根据下面的代码，我需要通过创建一个名为employee print() 的专用打印方法来修改Employee 类中的代码，并展示如何在employee Test 类中使用它来打印！请问有什么帮助吗？这是代码：

```
class Employee1{
      String empName;
      String empNum;
      String empEmailAddress;
      int yearOfBirth;
}

public class employeeTest {
public static void main(String[] args) {
    Employee1 emp1 = new Employee1();
    emp1.empName = "Sam";
    emp1.empNum = "213-23-978";
    emp1.empEmailAddress = "sammy@company.za";

    Employee1 emp2 = new Employee1();
    emp2.empName = "Tasha";
    emp2.empNum = "315-90-274";
    emp2.yearOfBirth = 1982;

    System.out.println("Employee Name: " + emp1.empName);
    System.out.println("Employee Number: " + emp1.empNum);
    System.out.println("Email Adress: " + emp1.empEmailAddress);
    System.out.println("Year of Birth: " + emp1.yearOfBirth);

    System.out.println("Employee Name: " + emp2.empName);
    System.out.println("Employee Number: " + emp2.empNum);
    System.out.println("Email Address: " + emp2.empEmailAddress);
    System.out.println("Year of Birth: " + emp2.yearOfBirth);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:01:23.170

您将一个名为 print 的方法添加到名为 print 的员工类中

```
class Employee1{
      String empName;
      String empNum;
      String empEmailAddress;
      int yearOfBirth;

      public void print() {
          System.out.println("Employee name:" + empName);
          System.out.println("Employee number:" + empNum);
          // etc
      }
} 
```

并这样称呼它：

```
// these lines replace the System.out.println block in your code
emp1.print();
emp2.print(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:03:54.060

```
class Employee1
{
  String empName;
  String empNum;
  String empEmailAddress;
  int yearOfBirth;
  @Override toString(){
    System.out.println(empName + empNum + empEmailAddress + yearOfBirth);
  }
}

emp.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:17:22.783

您可以像这样覆盖 Employee 类中的 toString() 方法

```
class Employee1{
  String empName;
  String empNum;
  String empEmailAddress;
  int yearOfBirth;
@Override
public String toString(){
return empName + emNum +.....
}
} 
```

并使用它在 EmployeeTest 中打印`sysout(instanceOfEmployee)`

# mysql - 触发器上的php myadmin sql 1064错误

> ID：15597588
> 
> 赞同：-2
> 
> 时间：2013-03-24T10:57:01.083
> 
> 标签：mysql, sql, triggers, sql-insert

我试图将以下 sql 命令上传到 php myadmin。但是，我犯了一些有趣的错误。我试图解决它，但即使我仔细考虑，我也找不到错误出现的原因。

错误 ：

```
MySQL said: Documentation
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your  MySQL server version for the right syntax to use near 'ON car_model
FOR INSERT
AS
    declare @car_name VARCHAR(255)' at line 2 
```

SQL：

```
CREATE TRIGGER TRG_Update 
ON car_model
FOR INSERT
AS
        DECLARE @car_name VARCHAR(255);
        DECLARE @manufacturer_year VARCHAR(255);
        DECLARE @car_type  VARCHAR(255);

        SELECT @car_name = i.car_name FROM inserted i;
        SELECT @manufacturer_year = i.manufacturer_year FROM inserted i;
        SELECT @car_type  = i.car_type FROM inserted i;

        INSERT INTO features 
                (car_name, manufacturer_year, car_type)
        VALUES (@car_name, @manufacturer_year, @car_type);
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:04:07.980

您正在使用`SQL Server Trigger`语法。这是为了`MySQL`：

```
DELIMITER $$
CREATE TRIGGER TRG_Update 
AFTER INSERT ON car_model
FOR EACH ROW
BEGIN
        INSERT INTO features (car_name, manufacturer_year, car_type)
        VALUES (NEW.car_name, NEW.manufacturer_year, NEW.car_type);
END $$
DELIMITER ; 
```

*   [MySQL CREATE TRIGGER 语法](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:59:46.857

触发器应该是这样的

```
 TRIGGER TRG_Update BEFORE/AFTER INSERT/UPDATE/DELETE 
```

你可以看到[如何在 MySQL 中创建触发器](http://www.sitepoint.com/how-to-create-mysql-triggers/)

# python - 如何在python中定义相关的常量？

> ID：15597589
> 
> 赞同：0
> 
> 时间：2013-03-24T10:57:01.650
> 
> 标签：python

像这样定义相关的常量是pythonic吗？

定义：

```
class LinkChoices(object):
    FOLLOW, FRIENDSHIP, CLOSE_FRIENDSHIP, = 10, 20, 30, 
```

使用：

```
from  some_module import LinkChoices

link.status = LinkChoices.FOLLOW 
```

像这样定义 const 有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:33:59.613

正如链接线程中所建议的那样，您也可以采取防御措施并采取措施防止意外重新定义常量，例如：

```
def const(cls):
    class _const(type):
        def __setattr__(self,name,value):
            raise ValueError("Can't rebind const(%s)" % name)
    class _(cls):
        __metaclass__ = _const
    return _

@const
class LinkChoices(object):
    FOLLOW, FRIENDSHIP, CLOSE_FRIENDSHIP, = 10, 20, 30,

LinkChoices.FOLLOW = 123 # raises ValueError 
```

不知道这是否是“pythonic”。我宁愿不说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:58:51.897

是的，我认为它非常 Pythonic，除了我不会使用 ALL_CAPS 作为类名。

我也没有看到尾随逗号的意义。

最后，我个人可能会为每行定义一个常量，而不是将它们集中在同一行上。

有关进一步的讨论，请参阅[如何在 Python 中创建常量](https://stackoverflow.com/questions/2682745/creating-constant-in-python)

# windows-phone-7 - Microsoft.Phone.ni.dll 中出现“System.Runtime.InteropServices.COMException”类型的异常，但未在用户代码中处理

> ID：15597593
> 
> 赞同：0
> 
> 时间：2013-03-24T10:57:15.807
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1

此代码在 ScheduledTaskAgent.cs 中，当然在后台运行。

我总是在语句中得到这个异常：stream.Seek(0, SeekOrigin.Begin); 该图像位于根目录下的我的项目文件中。我尝试使用“请勿复制”和“始终复制”。但仍然出现相同的错误。

```
Deployment.Current.Dispatcher.BeginInvoke(()=>
             { 
                 BitmapImage img = new BitmapImage(new Uri(@"\DefaultImage.jpg", UriKind.Relative));
                 img.CreateOptions = BitmapCreateOptions.None;
                 img.ImageOpened += (s, e) =>
                 {
                     WriteableBitmap wbitmap = new WriteableBitmap((BitmapImage)s);
                     TextBlock textBlock = new TextBlock();                       
                     textBlock.Text = "Sample Text";
                     textBlock.TextWrapping = TextWrapping.Wrap;
                     wbitmap.Render(textBlock, new TranslateTransform() { X = 25, Y = 10 }); ;
                     wbitmap.Invalidate();

                     using (MemoryStream stream = new MemoryStream())
                     {                    
                         wbitmap.SaveJpeg(stream, wbitmap.PixelWidth, wbitmap.PixelHeight, 0, 100);
                         stream.Seek(0, SeekOrigin.Begin);
                         SaveToIsolatedStorage(stream);
                         stream.Close();
                     }
                 };
       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:27:29.693

我认为 SaveJpeg 方法会关闭流，之后您无法在其中搜索。尝试这个：

```
using (IsolatedStorageFileStream stream = IsolatedStorageFile.GetUserStoreForApplication().CreateFile(fileName))
{
    wbitmap.SaveJpeg(stream, wbitmap.PixelWidth, wbitmap.PixelHeight, 0, 100);
} 
```

# ruby-on-rails-3.2 - Rails 在 has many 中混淆 join table name 属于 many

> ID：15597594
> 
> 赞同：0
> 
> 时间：2013-03-24T10:57:20.450
> 
> 标签：ruby-on-rails-3.2, relationship, foreign-key-relationship, rails-activerecord

我正在做一个简单的待办事项应用程序，其中我只有待办事项和标记模型以及它们之间的 has_many_belongs_to_many 关系。我还为联接设置了 todo_tags 迁移，如下所示：

```
class CreateTodoTagsJoinTable < ActiveRecord::Migration
 def up
  create_table :todo_tags, :id => false do |t|
    t.integer :todo_id
    t.integer :tag_id
  end

    add_index :todo_tags, [:todo_id, :tag_id]
  end

  def down
   drop_table :todo_tags
  end
 end 
```

但是当我尝试删除任何标签或待办事项时，即使我尚未在任何标签和待办事项之间建立任何连接，我也会收到以下错误。

> Mysql2::Error: 表 'wa2do.tags_todos' 不存在：SELECT `tags`.* FROM `tags`INNER JOIN `tags_todos`ON `tags`。`id`= `tags_todos`。`tag_id`在哪里`tags_todos`。`todo_id`= 298486374

我不知道 Rails 从哪里得到 tags_todos 表的想法，在迁移时我的表称为 todo_tags。实际上这是一个练习，他们要求使用这个名字。

我有两个模型，它们看起来像这样： Todo class Todo < ActiveRecord::Base attr_accessible :task_name, :due_date, :finished, :priority

```
 validate :task_name, :presence => true
 validate :due_date_in_future?

 has_and_belongs_to_many :tags

 def due_date_in_future?
  due_date > DateTime.current
 end 
```

结尾

和标签类 Tag < ActiveRecord::Base attr_accessible :tag_name

```
 has_and_belongs_to_many :todos

  validates_uniqueness_of :tag_name, :on => :create, :message => "Tag name must be unique"

end 
```

和我的控制器

```
def destroy
  @todo = Todo.find(params[:id])
  @todo.destroy

  respond_to do |format|
    format.html { redirect_to todos_url }
    format.json { head :no_content }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:18:58.023

我发现了一些可能是正确答案的东西。在那种情况下，我想我只能通过使用我不需要的有很多直通关系来扭转局面。

> 请注意，该表需要按字母顺序命名，即 categories_stories 表而不是 stories_categories - 这是使其工作的约定。

# c# - UI 框架设计：确定列表中预选项目的不同方法？

> ID：15597596
> 
> 赞同：1
> 
> 时间：2013-03-24T10:57:26.390
> 
> 标签：c#, design-patterns, user-interface

我一直想知道的事情：如果我要实现某种列表，如 UI 小部件（这里没有假设特定的目标平台，但我使用 C# 来说明），我可以看到确定预选条目的三种方法我的列表。看看下面的存根。所有三个实现都有一个委托，它要求实现显示项目，而不是直接传递项目。这个想法是，只有当 UI 元素实际上将要显示时才会请求这些项目。

第一个实现有一个允许定义预选项目的设置器。

```
public class ListWidget<T>
{
  public Action<IList<T>> GetListItems;

  public SetPreselectedItem(T item)
  {
    this.preselectedItem = item;
  }
} 
```

或者：

这遵循了列表小部件在某些时候询问实现的想法——通过循环它知道的所有项目——是否应该预先选择一个项目。我在这里看到的优势：它允许多选。

```
public class ListWidget<T>
{
  public Action<IList<T>> GetListItems;

  public Action<bool> IsItemPreselected(T item);
} 
```

或者：

这是在需要呈现其内容时询问预选项目的实现。

```
public class ListWidget<T>
{
  public Action<IList<T>> GetListItems;

  public T GetPreselectedItem();
} 
```

如果我查看 Apple 的 UIKit，他们会使用第一种方法：列表要求显示数据，但直接设置所选项目。我在 setter 和最后一个版本中看到的问题：您可以设置任何值，即使列表中不存在该项目。如果要设置的项目确实存在于列表中，则需要额外检查。我已经在不同平台上看到了上述模式的所有变体，但我想知道是否有最好的方法？还是有另一个版本的实现它？

# c# - 使用 Helix 3d Toolikt 在 WPF 应用程序中增强 3D kinect 渲染性能

> ID：15597597
> 
> 赞同：2
> 
> 时间：2013-03-24T10:57:29.497
> 
> 标签：c#, wpf, kinect, helix-3d-toolkit

我正在制作一个小应用程序，用于从多个 kinect（实时！）创建一个 3d 模型，并且我正在使用 Helix 3D Toolkit kinect 示例作为 Ispiration 的大来源，它工作得很好！

可悲的是，它的性能非常差，看起来 CPU 可以完成所有工作 :( 我知道我必须使用比 Helix 3D 更强大的东西来处理这类东西，但我需要快速完成我的项目而且我没有时间学习slimDX、sharpGL、openTK 或其他（他们都需要编写一个着色器来做这种事情，有点太浪费时间了！）

所以，这就是我现在得到的：

![演示1](../Images/3602aba81dbd20736074dbc2c529ba60.png)

这很酷，但我的表现很差。我可以将深度传感器分辨率稍微降低到 80x60，得到这个：

![演示2](../Images/7585ad607dc0c66b95a92d885dfd51df.png)

有点太模糊了，但性能非常好：D

这个结果是创建一个`GeometryModel3D`，编辑它的几何，材质和变换值。现在在几何内部我有一个`MeshGeometry3D`，效果很好但性能很差（cpu 需要在每一帧重新生成所有三角形！）。正如[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.meshgeometry3d.aspx)所说，`MeshGeometry3D`由`Positions`,`TextureCoordinates`和`TriangleIndices`属性组成。我喜欢搞砸一切，我试图删除得到这个的值：`TriangleIndices`

![一切都搞砸了](../Images/f7de611d00afd26e2197e1b9d45c6de8.png)

没用，但性能更好。但现在我有了一些希望，看起来我有很多线（或非常扭曲的三角形？）有一些放置好的顶点。

我能做些什么来获得一些可以接受的东西？即使像浊点这样的东西也很好，我只需要有好的表现！

# ruby-on-rails - 如何显示格式正确的代码？

> ID：15597598
> 
> 赞同：0
> 
> 时间：2013-03-24T10:57:31.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何呈现正确格式化任何语言（即 JS/Ruby/C++/等）的视图？

类似于 Github 如何在浏览器中显示格式良好的代码，SO 对这些问题也是如此。

假设我的 . 中有一些代码，我`question.body`如何让它正确显示（除了将它包装进去`raw`（这还不错，但它并没有像 Github 和许多其他网站那样做漂亮的代码格式。

# ios - 委托函数与回调函数

> ID：15597601
> 
> 赞同：14
> 
> 时间：2013-03-24T10:57:52.387
> 
> 标签：ios, objective-c, delegates, callback

我在 iOS 平台上工作，我想知道什么是委托函数，什么是回调函数？两种类型的功能有什么区别或者它们是相同的？

委托函数的示例`numberOfRowsInSection`在`UITableViewDelegate`协议中，回调函数的示例`didReceiveLocalNotification`在`appDelegate.m`

我们可以在Objective-C中创建自己的回调函数吗，如果是，举个例子......

谢谢..

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-24T16:17:59.843

几个想法：

1.  您建议这[`didReceiveLocationNotification`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW22)是一个“回调函数”，但它实际上只是`UIApplicationDelegate`协议的一个委托方法。因此，两者`numberOfRowsInSection`和`didReceiveLocalNotification`都是简单的委托方法。

    更类似于通用回调函数的东西是`selector`在调度 a`NSTimer`或为 a 定义处理程序时`UIGestureRecognizer`，其中方法名称的选择不是预先确定的。

    或者回调在[`CFArray`](https://developer.apple.com/library/ios/#documentation/CoreFOundation/Reference/CFArrayRef/Reference/reference.html).

2.  但是，您问题的根源不是术语，而是如何定义接口的问题，调用者可以在其中指定某个其他对象将在将来某个日期（异步）调用的方法。有两种常见的模式：

    *   [**方法的块参数**](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxUsing.html#//apple_ref/doc/uid/TP40007502-CH5-SW3)：定义将块作为参数的方法越来越普遍。例如，您可以有一个定义如下的方法：

        ```
        - (NSURLSessionTask *)downloadAsynchronously:(NSURL *)url filename:(NSString *)filename completion:(void (^)(NSData *results, NSString *filename))completion {
            NSURLSessionTask *task = [[NSURLSession sharedSession] dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    completion(data, filename);
                });
            }];
            [task resume];

            return task;
        } 
        ```

        第三个参数 ,`completion`是下载完成后将调用的代码块。因此，您可以按如下方式调用该方法：

        ```
        [self downloadAsynchronously:url filename:filename completion:^(NSData *results, NSString *filename) {
            NSLog(@"Downloaded %d bytes", [results length]);
            [results writeToFile:filename atomically:YES];
        }];

        NSLog(@"%s done", __FUNCTION__); 
        ```

        您会看到“完成”消息立即出现，`completion`下载完成后将调用该块。诚然，要习惯构成块变量/参数定义的乱七八糟的标点符号需要一段时间，但是一旦您熟悉了块语法，您就会真正欣赏这种模式。它消除了调用某些方法和定义某些单独的回调函数之间的脱节。

        如果您想简化将块作为参数处理的语法，您实际上可以`typedef`为您的完成块定义一个：

        ```
        typedef void (^DownloadCompletionBlock)(NSData *results, NSString *filename); 
        ```

        然后方法声明本身被简化：

        ```
        - (NSURLSessionTask *)downloadAsynchronously:(NSURL *)url filename:(NSString *)filename completion:(DownloadCompletionBlock)completion {
            NSURLSessionTask *task = [[NSURLSession sharedSession] dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    completion(data, filename);
                });
            }];
            [task resume];

            return task;
        } 
        ```

    *   [**委托协议模式**](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html#//apple_ref/doc/uid/TP40008195-CH14-SW1)：对象之间通信的另一种常用技术是委托协议模式。首先，您定义协议（“回调”接口的性质）：

        ```
        @protocol DownloadDelegate <NSObject>

        - (NSURLSessionTask *)didFinishedDownload:(NSData *)data filename:(NSString *)filename;

        @end 
        ```

        然后，定义将调用此`DownloadDelegate`方法的类：

        ```
        @interface Downloader : NSObject

        @property (nonatomic, weak) id<DownloadDelegate> delegate;

        - (instancetype)initWithDelegate:(id<DownloadDelegate>)delegate;
        - (NSURLSessionTask *)downloadAsynchronously:(NSURL *)url filename:(NSString *)filename;

        @end

        @implementation Downloader

        - (instancetype)initWithDelegate:(id<DownloadDelegate>)delegate {
            self = [super init];
            if (self) {
                _delegate = delegate;
            }
            return self;
        }

        - (NSURLSessionTask *)downloadAsynchronously:(NSURL *)url filename:(NSString *)filename {
            NSURLSessionTask *task = [[NSURLSession sharedSession] dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self.delegate didFinishedDownload:data filename:filename];
                });
            }];
            [task resume];

            return task;
        }

        @end 
        ```

        最后，使用这个新`Downloader`类的原始视图控制器必须符合`DownloadDelegate`协议：

        ```
        @interface ViewController () <DownloadDelegate>

        @end 
        ```

        并定义协议方法：

        ```
        - (void)didFinishedDownload:(NSData *)data filename:(NSString *)filename {
            NSLog(@"Downloaded %d bytes", [data length]);
            [data writeToFile:filename atomically:YES];
        } 
        ```

        并执行下载：

        ```
        Downloader *downloader = [[Downloader alloc] initWithDelegate:self];
        [downloader downloadAsynchronously:url filename:filename];
        NSLog(@"%s done", __FUNCTION__); 
        ```

    *   [**选择器模式**](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Selector.html#//apple_ref/doc/uid/TP40008195-CH48-SW1)：您在某些 Cocoa 对象（例如 ）中看到的模式`NSTimer`是`UIPanGestureRecognizer`将选择器作为参数传递的概念。例如，我们可以如下定义下载器方法：

        ```
        - (NSURLSessionTask *)downloadAsynchronously:(NSURL *)url filename:(NSString *)filename target:(id)target selector:(SEL)selector {
            id __weak weakTarget = target; // so that the dispatch_async won't retain the selector

            NSURLSessionTask *task = [[NSURLSession sharedSession] dataTaskWithURL:url completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                dispatch_async(dispatch_get_main_queue(), ^{
        #pragma clang diagnostic push
        #pragma clang diagnostic ignored "-Warc-performSelector-leaks"
                    [weakTarget performSelector:selector
                                     withObject:data
                                     withObject:filename];
        #pragma clang diagnostic pop
                });
            }];
            [task resume];

            return task;
        } 
        ```

        然后，您将按如下方式调用它：

        ```
        [self downloadAsynchronously:url
                            filename:filename
                              target:self
                            selector:@selector(didFinishedDownload:filename:)]; 
        ```

        但是您还必须定义下载完成时将调用的单独方法：

        ```
        - (void)didFinishedDownload:(NSData *)data filename:(NSString *)filename {
            NSLog(@"Downloaded %d bytes", [data length]);
            [data writeToFile:filename atomically:YES];
        } 
        ```

        就个人而言，我发现这种模式太脆弱了，并且在没有编译器帮助的情况下依赖于协调接口。但是我将它包含在一些历史参考中，因为这种模式在 Cocoa 的旧类中使用得相当多。

    *   [通知](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction.html)：提供某些异步方法结果的另一种机制是发送本地通知。这通常在以下情况下最有用： (a) 网络请求结果的潜在接收者在发起请求时未知；或 (b) 可能有多个班级希望获悉此事件。因此，网络请求可以在完成后发布特定名称的通知，并且任何有兴趣了解此事件的对象都可以通过`NSNotificationCenter`.

        这本身不是“回调” *，*但确实代表了另一种模式，用于通知对象某些异步任务的完成。

这些是“回调”模式的一些示例。显然，提供的示例是任意且琐碎的，但希望它能让您了解您的替代方案。如今，两种最常见的技术是块模式和委托模式。当需要简单而优雅的界面时，块越来越受到青睐。但是对于丰富复杂的接口，委托是很常见的。

# postgresql - 为什么 PostgreSQL 在某些排序规则下不使用我的索引进行文本前缀搜索？

> ID：15597602
> 
> 赞同：2
> 
> 时间：2013-03-24T10:57:55.450
> 
> 标签：postgresql, indexing, prefix, postgresql-9.2, postgresql-performance

考虑：

```
create table tab (foo text not null);
create index tab_ix_foo on tab(foo);

select * from tab where foo like 'pre%'; 
```

Postgres 不使用索引来进行搜索。使用排序规则`"POSIX"`时，Postgres 使用索引：[http ://sqlfiddle.com/#!12/ed1cc/1](http://sqlfiddle.com/#!12/ed1cc/1)

使用排序规则`"en_US"`时，Postgres 使用顺序扫描：[http ://sqlfiddle.com/#!12/efb18/1](http://sqlfiddle.com/#!12/efb18/1)

**为什么有区别？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:16:06.467

`C`当使用(ie )以外的语言环境时，`POSIX`您需要使用opclass为文本搜索创建索引`LIKE`和前缀。请参阅有关[Operator classes](http://www.postgresql.org/docs/current/static/indexes-opclass.html)和[index types](http://www.postgresql.org/docs/current/static/indexes-types.html)的文档。我确信有比那个文档页面更好的参考，但我现在似乎找不到它。`~``text_pattern_ops`

如果我更改您的 SQLFiddle 以`text_pattern_ops`用于`en_US`索引[，您会看到它能够使用索引](http://sqlfiddle.com/#!12/3c04d/1)：

```
create index tab_ix_foo on tab using btree (foo collate "en_US" text_pattern_ops);
--                                                              ^^^^^^^^^^^^^^^^ 
```

如果您在 9.2+ 中使用该选项，您很可能需要为不同的排序规则创建不同的索引`COLLATE`，因为根据定义，不同的排序规则几乎意味着字符串的不同顺序，因此也意味着不同的 b-tree 组织。看来您已经在测试中这样做了。

也有可能您的数据太小而无法使用索引来特别有用。尝试使用更有用的数据量进行测试。

[这篇文章](http://petereisentraut.blogspot.com.au/2009/10/rethink-your-text-column-indexing-with.html)可能很有用，[排序规则支持](http://www.postgresql.org/docs/current/static/collation.html)上的文档也可能有用。

* * *

为什么不能只对不同的排序规则使用相同的 b-tree 索引，请考虑 b-trees 需要稳定且一致的排序，但是：

```
regress=> SELECT ' Bill''s' > ('bills' COLLATE "POSIX");
 ?column? 
----------
 f
(1 row)

regress=> SELECT ' Bill''s' > ('bills' COLLATE "en_US");
 ?column? 
----------
 t
(1 row) 
```

如您所见，排序规则更改了排序顺序。这就是排序规则所做的，几乎按照定义。尝试对不同的排序规则使用相同的索引就像尝试对不同的函数使用相同的功能索引；这完全没有意义。

# jquery - 使用 CheckBox 中的值更新 TextArea

> ID：15597608
> 
> 赞同：0
> 
> 时间：2013-03-24T10:58:43.190
> 
> 标签：jquery, asp.net, asp.net-mvc

我有这样的看法

```
@Html.Partial("_validationSummary")
 <div class="row-fluid">
    <div class ="span8 well">
        @using (Html.BeginForm("Send", "Message", FormMethod.Post) ) {
    <fieldset>
    <legend>Send SMS Message</legend>
      <div class="editor-label text-info">
       <small>Recipients phone numbers here.</small>
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.MessageRecipients, new { @class = "span8", rows=3 })

    </div>

       <div class="editor-label text-info">
       <small>Select from your contact listings =>.</small>
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.ContactRecipients, new { @class = "span8", rows=3, @readonly=true })
    </div>

     <div class="editor-label text-info">
       <small> Your Message Here:</small>
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Message, new { @class = "span8", rows = 5})

        <br />
        <span class="text-warning" id="char_count"></span><br />
    </div>

    <div class="editor-label text-info"><small>
      Send Message As:</small>
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.MessageSentAS)

    </div>
   <br />

    <p> <input type="submit" class="btn btn-primary btn-medium" Value="Send" name="Action" />
        <button role="button" class="btn btn-medium" data-target="#timeModal" data-toggle="modal">Send Later</button>
    </p>
</fieldset>
        } 
  </div>

 <div id="ContactList" class="span4 well" >
    <span class="label label-important">Select From Contact List</span>
    <hr />
   @* @Html.Partial("_ContactsForMessageViewPartial", Model)*@
        @Html.Action("RenderContacts");

    <hr />
    <div class="control-group">
        [@Html.ActionLink("Send Bulk SMS", "Send", "BulkMessaging")] &nbsp;[@Html.ActionLink("Add Contact", "AddContact", "Contact")]
    </div>

</div> 
```

以及从子操作填充数据的部分视图

```
@model IEnumerable<TwiiterSample.Models.ViewModels.SMSContactView>

@if (Model != null && Model.Count() > 0)
{
foreach(var item in Model){
    <div class="checkbox multiple">

        @Html.CheckBox(item.ContactDetails, new {@class="check",     @value=@item.ContactDetails, id=@item.ContactDetails})
          @Html.Label(item.Name)
   @*<input type="checkbox" id="@item.Value"  value="@item.Value" @(item.Selected ?     "checked" : "") />@item.Text</label>*@
    </div>
}
} 
```

现在，部分视图会生成一个复选框列表，其中包含根据需要填充的 IDS 和 VALUES。但是，如果将复选框单击到文本区域，我想附加它的值。我使用以下 JQUERY 片段来实现这一点

```
$('#ContactList .check').change(function ()
  {
      if ($(this).is(':checked'))
          $('#MessageRecipients').val($(this).val);

  }); 
```

但是，每当我单击复选框时，什么都没有发生。我究竟做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:10:15.310

replace

```
$('#MessageRecipients').val($(this).val); 
```

with

```
$('#MessageRecipients').val($(this).val()); 
```

# java - 在 JAVA 中通过 gmail smtp 服务器发送电子邮件

> ID：15597616
> 
> 赞同：16
> 
> 时间：2013-03-24T10:59:35.480
> 
> 标签：java, smtp, jakarta-mail

这段代码有什么问题？不知何故，它进入了一个无限循环 `Transport.send(message);`，没有错误消息，没有异常，只是可能无限循环（我不知道，因为我等待的时间不超过 5-10 分钟）

```
final String username = "<mail_name>";
final String password = "<password>";

Properties props = new Properties();
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.starttls.enable", "true");
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.port", "465");

Session session = Session.getInstance(props,
        new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password);
            }
        });

try {

    Message message = new MimeMessage(session);
    message.setFrom(new InternetAddress("<mail_from>@gmail.com"));
    message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse("<mail_to>@gmail.com"));
    message.setSubject("Test Subject");
    message.setText("Test");

    Transport.send(message);

    System.out.println("Done");

} catch (MessagingException e) {
    throw new RuntimeException(e);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-24T12:04:51.120

在这里，我进行了一些更改，这对我来说很好：

```
Session session = Session.getInstance(props,null); 
```

你像你一样实例化消息对象。最后：

```
Transport transport = session.getTransport("smtp");
String mfrom = "yourGmailUsernameWithout@"// example laabidiraissi 
transport.connect("smtp.gmail.com", mfrom, "thepassword");
transport.sendMessage(message, message.getAllRecipients()); 
```

编辑，请您帮我一个忙并复制/粘贴并尝试此示例并显示它显示的内容：

```
package com.test;

import java.util.Properties;

import javax.mail.BodyPart;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

import org.junit.Test;

public class EmailService {

@Test
public void test(){
    Properties props = System.getProperties();
    props.put("mail.smtp.starttls.enable", true); // added this line
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.user", "username");
    props.put("mail.smtp.password", "password");
    props.put("mail.smtp.port", "587");
    props.put("mail.smtp.auth", true);

    Session session = Session.getInstance(props,null);
    MimeMessage message = new MimeMessage(session);

    System.out.println("Port: "+session.getProperty("mail.smtp.port"));

    // Create the email addresses involved
    try {
        InternetAddress from = new InternetAddress("username");
        message.setSubject("Yes we can");
        message.setFrom(from);
        message.addRecipients(Message.RecipientType.TO, InternetAddress.parse("receivermail"));

        // Create a multi-part to combine the parts
        Multipart multipart = new MimeMultipart("alternative");

        // Create your text message part
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText("some text to send");

        // Add the text part to the multipart
        multipart.addBodyPart(messageBodyPart);

        // Create the html part
        messageBodyPart = new MimeBodyPart();
        String htmlMessage = "Our html text";
        messageBodyPart.setContent(htmlMessage, "text/html");

        // Add html part to multi part
        multipart.addBodyPart(messageBodyPart);

        // Associate multi-part with message
        message.setContent(multipart);

        // Send message
        Transport transport = session.getTransport("smtp");
        transport.connect("smtp.gmail.com", "username", "password");
        System.out.println("Transport: "+transport.toString());
        transport.sendMessage(message, message.getAllRecipients());

    } catch (AddressException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T23:40:33.580

好的。它比我第一次提出的要复杂一些......总结一下我得到的：

*   有一个非常有用的命令：**`session.setDebug(true);`**. 如果你设置为真，每一个重要的进程都会被调试到控制台。我建议使用它。
*   第二台计算机只能使用安全选项，您可以将其切换为：`Transport transport = session.getTransport("smtps");`而不是非安全 smtp... JavaMail API 传输对象也将处理端口（分别为 smtp：587，smtps：465）
*   您也可以使用 Transport 类的静态方法发送消息和（之前保存，非静态 sendMessage 方法不会保存消息），但是这次您需要在会话创建时使用 javax.mail.Authenticator，像这样：

    ```
    Session session = Session.getInstance(props,         new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("login", "password");
        } 
    ```

    });

1.4.2 JavaMailApi 对于这个问题有另一个 1.4.7 版本之外的异常...

如果不使用它，则无法使用静态方法进行身份验证。如果你使用实例方法，你可以。

*   一台计算机有 maven 并获得了 JavaMail API 的 1.4.2 版本。第二台计算机有一个下载的库，版本为 1.4.7，我想这也搞砸了
*   第一个比较 Netbeans，第二个比较 Intellij ... +1) 互联网上有很多旧的和糟糕的示例代码，这使得正确使用这个 API 变得更加困难。

太乱了，但有一些基本概念应该集中......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T12:27:05.670

我可以重现您问题中描述的行为并修复它。

该`send`方法卡在

```
SMTPTransport(Service).connect(String, int, String, String) line: 308 
```

连接不成功，因为您的 gmail smtp 主机端口错误：`465`

将其更改为`587`

```
props.put("mail.smtp.port", "587"); 
```

它会起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-19T11:11:50.043

使用[Simple Java Mail](http://www.simplejavamail.org)应该很简单：

```
Email email = new Email();

email.setFromAddress("lollypop", "lol.pop@somemail.com");
email.addRecipient("C.Cane", "candycane@candyshop.org", RecipientType.TO);
email.setText("We should meet up!");
email.setTextHTML("<b>We should meet up!</b>");
email.setSubject("hey");

new Mailer("smtp.gmail.com", 25, "your user", "your password", TransportStrategy.SMTP_TLS).sendMail(email);
new Mailer("smtp.gmail.com", 587, "your user", "your password", TransportStrategy.SMTP_TLS).sendMail(email);
new Mailer("smtp.gmail.com", 465, "your user", "your password", TransportStrategy.SMTP_SSL).sendMail(email); 
```

如果您启用了双因素登录，则需要从您的 Google 帐户生成[应用程序专用密码。](https://security.google.com/settings/security/apppasswords)

# typescript - 在选择中不正确

> ID：15597620
> 
> 赞同：2
> 
> 时间：2013-03-24T10:59:59.457
> 
> 标签：typescript, durandal

我正在尝试将打字稿与 Durandal 一起使用。我正在尝试使用 typescript 制作入门示例，该示例适用于大多数方法和类。但是在下面的 Flickr 类中，我在 select 方法中遇到了问题。当调用此方法时，似乎这不是 Flickr 类，而是选定项。有人可以帮我找出问题所在吗？其他方法按预期工作。

亲切的问候， Marwijn

```
///<reference path='../../Scripts/typings/requirejs/require.d.ts'/>
///<reference path='../../Scripts/typings/durandal/durandal.d.ts'/>
///<reference path='../../Scripts/typings/knockout/knockout.d.ts'/>

class Flickr 
{
    app: App;
    http: Http;

    displayName = 'Flickr';
    images = ko.observableArray([]);

    constructor(app: App, http: Http)
    {
        this.app = app;
        this.http = http;
    }

    public activate() : any 
    {
        //the router's activator calls this function and waits for it to complete before proceding
        if (this.images().length > 0) 
        {
            return;
        }

        return this.http.jsonp('http://api.flickr.com/services/feeds/photos_public.gne', { tags: 'mount ranier', tagmode: 'any', format: 'json' }, 'jsoncallback').then((response)=>
        {
            this.images(response.items);
        });
    }
    public select(item : any) {
        //the app model allows easy display of modal dialogs by passing a view model
        //views are usually located by convention, but you an specify it as well with viewUrl
        item.viewUrl = 'views/detail';
        this.app.showModal(item);
    }
    public canDeactivate() : any
    {
        //the router's activator calls this function to see if it can leave the screen
        return this.app.showMessage('Are you sure you want to leave this page?', 'Navigate', ['Yes', 'No']);
    }
}

define(['durandal/http', 'durandal/app'], function (http, app) 
{
    return new Flickr(app, http);
} ); 
```

它被编译成以下javascript：

```
var Flickr = (function () {
    function Flickr(app, http) {
        this.displayName = 'Flickr';
        this.images = ko.observableArray([]);
        this.app = app;
        this.http = http;
    }
    Flickr.prototype.activate = function () {
        var _this = this;
        if(this.images().length > 0) {
            return;
        }
        return this.http.jsonp('http://api.flickr.com/services/feeds/photos_public.gne', {
            tags: 'mount ranier',
            tagmode: 'any',
            format: 'json'
        }, 'jsoncallback').then(function (response) {
            _this.images(response.items);
        });
    };
    Flickr.prototype.select = function (item) {
        item.viewUrl = 'views/detail';
        this.app.showModal(item);
    };
    Flickr.prototype.canDeactivate = function () {
        return this.app.showMessage('Are you sure you want to leave this page?', 'Navigate', [
            'Yes', 
            'No'
        ]);
    };
    return Flickr;
})();
define([
    'durandal/http', 
    'durandal/app'
], function (http, app) {
    return new Flickr(app, http);
});
//@ sourceMappingURL=flickr.js.map 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:40:54.140

要让“this”引用视图模型，您可以执行以下操作（假设 flickr.html 视图未更改）：

更改缩略图上的点击绑定标签

```
<a href="#" class="thumbnail" data-bind="click:$parent.select"> 
```

至

```
<a href="#" class="thumbnail" data-bind="click: function (item) { $parent.select(item); }"> 
```

因为您随后直接在 $parent 对象（视图模型）上调用 select 方法，所以视图模型将绑定到“this”。

# android - Android Activity Lifecycle 和 Singleton 以及相互引用持久性（内存泄漏）

> ID：15597622
> 
> 赞同：2
> 
> 时间：2013-03-24T11:00:06.017
> 
> 标签：android, memory-leaks, singleton, lifecycle, data-persistence

据我了解，不能指望单例在 Android 应用程序中保存持久数据，因为应用程序可能会在应用程序的“表观生命周期”中多次被破坏和重新创建。这本身对我来说不是问题。问题在于当应用程序经历这个销毁 - > 创建过程时究竟会发生什么。

我在论坛上读到该应用程序将在一个新进程中重新创建，并且我认为具有所有内存管理的旧进程将被销毁。然而，这是否意味着由开发人员来清理所有单例和逻辑树，其中的节点持有相互引用？还是进程的破坏会自动清理所有内容？我不是一个经验丰富的 Java 开发人员，所以我对 GC 仍有很多不清楚的地方。

我正在处理的特定项目在设备正常运行期间仅运行一个应用程序。在桌面方面，不会有通过单例的内存泄漏的危险，因为应用程序只会在设备关闭时关闭，并且始终处于同一个进程中。然而，Android 让它变得更加困难。

在旁注中，使用模拟器的 Android 内存泄漏检测器是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:02:46.273

基本上你必须避免一直引用 UI 元素。UI 元素绑定到可能被破坏的活动的上下文。

如果你真的需要一个单例而不是扩展[Application](http://developer.android.com/reference/android/app/Application.html)类来执行它。当活动关闭或旋转等时，此实例不会被销毁。

您还应该知道您可以在代码中处理这些事件。这意味着您的活动不得重新启动。恕我直言，重新启动一个活动几乎没有任何意义。要实现这一点，您需要将该[`configChanges`属性](http://developer.android.com/guide/topics/manifest/activity-element.html)添加到清单中。我个人使用这个配置：

```
<activity android:configChanges="orientation|screenSize|keyboardHidden" ...> 
```

# javascript - Dropzone.js如何序列化值并发送它？

> ID：15597624
> 
> 赞同：3
> 
> 时间：2013-03-24T11:00:30.843
> 
> 标签：javascript, jquery, drag-and-drop

我完全坚持[Dropzone.js](http://www.dropzonejs.com/)，我想创建一个拖放文件上传

设置就好了

```
<form id='test' enctype="multipart/form-data">
    <input type="text" name="album_name">
    <div id="myId" class="dropzone">

    </div>
    <button type="submit" id="newAlbum">go go</button>
</form>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://malsup.github.com/jquery.form.js" type="text/javascript" charset="utf-8"></script>
<script src="https://raw.github.com/enyo/dropzone/master/downloads/dropzone.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
$(document).ready(function(){
     $("#myId").dropzone({ 
        paramName: 'photos',
        url: "post.php",
        dictDefaultMessage: "Drag your images",
        clickable: true,
        enqueueForUpload: true,

        selectedfiles: function()
        {
            $('#newAlbum').show();
        }
    });

});
</script> 
```

但我不知道要序列化表格并发送它

请有人给我看一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T11:44:12.960

如果输入外部表格，您可以为表格添加价值

```
<input type="text" name="album_name">    
<form id='test' enctype="multipart/form-data">    
    <div id="myId" class="dropzone">

    </div>
    <button type="submit" id="newAlbum">go go</button>
</form>
<script type="text/javascript">
    Dropzone.autoDiscover = false;

    jQuery(function() {

        var myDropzone = new Dropzone("#test",{
            url: "post.php",
            addRemoveLinks: true,
            maxFilesize: 1,
            maxFiles: 5,
            uploadMultiple: false,
            parallelUploads: 100,
            createImageThumbnails: true,
            paramName: "photos",
            autoProcessQueue: false
        });

        var submitButton = document.querySelector("#newAlbum");
        submitButton.addEventListener("click", function() {

            myDropzone.on("sending", function(file, xhr, formData) {
                formData.append("album_name", $("input[name=album_name]").val());    
            });
            myDropzone.processQueue(); // Tell Dropzone to process all queued files.
            alert('show this to have time to upload');
        });

    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T12:51:37.353

如果`enqueueForUpload`设置为`true`（默认），文件将像普通文件上传形式一样直接上传。

在您的情况下，您需要将上传脚本放在`post.php`. 在那里，文件将以`$_FILES['photos']`( `paramName`) 形式出现。默认情况下，此参数名称为“文件”，但您将其设置为不同。

这清楚吗？

因此，关于您的`post.php`-file 内容的简单示例：

```
if(!empty($_FILES)){
   move_uploaded_file($_FILES['photos']['tmp_name'],'http://mysite.com/myDir');
} 
```

# php - PJAX 和 Firefox 后退按钮问题

> ID：15597625
> 
> 赞同：1
> 
> 时间：2013-03-24T11:00:35.010
> 
> 标签：php, javascript, jquery, ajax, pjax

我正在测试 jquery.pjax.js 并注意到一个问题。
在我的最小测试项目中，发生了如下奇怪的行为：

1.  在 fireflx 中访问 index.php
2.  单击 pjax 链接：位置栏和页面内容已更改
3.  单击 Firefox 的后退按钮：位置栏已更改但内容仍然存在

这种行为在 GoogleChrome 中不会发生。
我想知道如何解决这个问题。

我的测试项目是： http:
[//karasunouta.com/php_test/pjax/](http://karasunouta.com/php_test/pjax/)
[http://karasunouta.com/files/pjax.zip](http://karasunouta.com/files/pjax.zip)

索引.php

```
<?php
    $page = 1;
    if (isset($_GET['page'])) {
        $page = $_GET['page'];
    }

    $isPjax = false;
    if (!empty($_SERVER['HTTP_X_PJAX'])) {
        $isPjax = true;
    }

    if (!$isPjax):
?>
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="UTF-8">
            <title>page<?php echo $page; ?></title>
            <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
            <script type="text/javascript" src="js/jquery.pjax.js"></script>
            <script type="text/javascript">
                $(function(){
                    // link
                    $(document).pjax('a.pjax', '#main');

                    // form
                    $(document).on('submit', 'form', function(event) {
                        $.pjax.submit(event, '#main')
                    })
                });
            </script>
        </head>
        <body>
            <h1>pjax test</h1>
            <ul class="links">
                <li><a href="?page=1" class="pjax">page1</a></li>
                <li><a href="?page=2" class="pjax">page2</a></li>
                <li><a href="?page=3" class="pjax">page3</a></li>
            </ul>
            <form>
                Page：&lt;input name="page" type="text" value="1">
                <input type="submit">
            </form>
            <div id="main" style="border: 3px double gray">
<?php endif; ?>
                <?php include("page/{$page}.html") ?>
<?php if (!$isPjax): ?>
            </div>
        </body>
    </html>
<?php endif; ?> 
```

页/1.html

```
page1 contents 
```

页/2.html

```
page2 contents 
```

页面/3.html

```
page3 contents 
```

js/jquery-1.9.1.min.js
js/jquery.pjax.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:50:47.513

我自己可以找到解决方案...

前：

```
$(function(){
    // apply pjax
}); 
```

后：

```
$(document).ready(function() {
    // apply pjax
}); 
```

现在 Firefox 后退按钮看起来工作正常。
我不确定原因。
尽管有几篇文章说这两种书写形式的含义完全相同，但它们的实际行为看起来却有所不同……

# html - 所有分辨率上的 CSS 中心定位

> ID：15597627
> 
> 赞同：0
> 
> 时间：2013-03-24T11:00:58.913
> 
> 标签：html, css

嗨，我试图将我的网站定位在所有分辨率的中心，但是当我将整个页面包装在容器 div 中并尝试对其进行样式设置时，没有任何反应，下面是我使用的 CSS：

CSS

```
 .container {
width: 95%;
margin-right: auto;
margin-left: auto;
} 
```

关于我如何解决的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:48:00.507

您的容器 div 居中，但您在左侧为 220px 的导航元素设置了边距。我还没有看过其他的，但我想你也已经在这些上设置了边距。

此外，容器内的元素是绝对定位的，这将使它们脱离正常流程。如果您希望将这些元素附加到 .container，那么您需要将其设置为 position:relative。

我在上面之前的评论中提到的一些事情，你必须记住，当你将宽度设置为百分比时，你会问自己“什么的百分比？”。它始终是父级宽度的百分比，所以下一个问题是，“父级的宽度是多少？”。如果没有设置，那么您的百分比可能无法按照您的预期方式工作，或者根本没有。

# c - 如何更改函数中的指针？

> ID：15597629
> 
> 赞同：1
> 
> 时间：2013-03-24T11:01:06.420
> 
> 标签：c, pointers, recursion

我在 C 中有一个递归函数，我希望返回的结构指针成为函数中的新结构。我对返回的结构有问题，因为它没有改变。这是我的代码的结构：

```
struct location_t{
   int x,y;
   location_t * next;
   int dir;
}

location_t * recursive_foo(location_t * loc, maze_t * m){

    int x = loc->x;
    int y = loc->y;
    int dir = loc->dir;

    loc->next = malloc(sizeof(location_t));
    location_t * temp = loc->next;

    if(m->map[--x][y] != '#' && dir != 0){
        temp->x = x;
        temp->y = y;
        temp->dir = 2;
        loc = recursive_foo(temp);
    }
    if(m->map[--x][y] != '#' && dir != 1){
        temp->x = x;
        temp->y = y;
        temp->dir = 3;
        loc = recursive_foo(temp);
    }
    if(m->map[--x][y] != '#' && dir != 2){
        temp->x = x;
        temp->y = y;
        temp->dir = 0;
        loc = recursive_foo(temp);
    }
    if(m->map[--x][y] != '#' && dir != 3){
        temp->x = x;
        temp->y = y;
        temp->dir = 1;
        loc = recursive_foo(temp);
    }

    return loc;

} 
```

我对返回的结构有问题，因为它没有改变。

它旨在通过相互引用来堆叠这些结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:05:57.403

`mystruct`是堆栈变量。换句话说，您**通过 value传递指针，而不是****通过 reference**传递它。

你目前所做的基本上是一样的：

```
int f(int i) {
   ...
   i = <any value>;
   ...
} 
```

在这种情况下，您只修改了值的副本。

在您的程序中，您还修改了指针的副本。在函数之外，指针保持不变。

如果你想修改它，你需要传递一个指向它的指针：

```
location_t * recursive_foo(location_t** loc, maze_t * m){
    int x = (*loc)->x;
    int y = (*loc)->y;
    int dir = (*loc)->dir;
    ...
    *loc = recursive_foo(&temp);
    ...
    return *loc;
} 
```

# javascript - 如何 .params 用于查找 DOM 元素

> ID：15597631
> 
> 赞同：-1
> 
> 时间：2013-03-24T11:01:16.833
> 
> 标签：javascript, jquery

我有：

```
var tag = this.params['tag']; 
```

如何使用它：

```
$('tag') 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:20:28.507

参数是`this.params['tag'];`什么？

它不是原生财产。

它可能是你的类型/对象

所以你可以在jQuery下使用它：

```
$('tag')[0].params['tag'] //better 
```

或者

```
$('tag').prop('params').tag //not recommanded 
```

# mysql - Delphi 从 SQL 表中接收数据

> ID：15597632
> 
> 赞同：0
> 
> 时间：2013-03-24T11:01:16.860
> 
> 标签：mysql, sql, delphi, tadoquery

我有一个需要从 MYSQL 数据库中获取和显示数据的表单。
我编写的 SQL 代码运行良好，因为我试图在 MYSQL 中执行它。

我还在另一种表单中使用了与我的表单中的代码类似的代码格式来获取和显示 SQL 数据。该代码以另一种形式完美运行。
但是，我的这个表单的代码似乎没有接收/显示来自 SQL 表的数据。

`OnShow`这是为表单事件编写的代码片段。

```
procedure TfrmEditBooking.FormShow(Sender: TObject);  
var  
  CustName: string;  
begin  
  if SelectedID > 0 then  
  begin  
    with frmBookingData.ADOQuery1 do  
    begin  
      Open;    
      SQL.Clear;  
      SQL.Add('SELECT Name, Surname ' +
              'FROM customers_main ' +
              'WHERE customers_main.idcustomers_main ' +
              'IN ' +
              '(SELECT bookings_main.customers_main_idcustomers_main ' +
              'FROM bookings_main ' +
              'WHERE bookings_main.idbookings_main = ' + IntToStr(SelectedID) + ')');
      ExecSQL;  
      CustName := FieldByName('Surname').AsString + ' ' + FieldByName('Name').AsString;  
      Label1.Caption := CustName;  
      Close;  
    end;  
  end;  
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:06:44.110

当一个人不期望将游标接收到数据集中时，使用“execsql”（换句话说，将“execsql”与“update”、“insert”和“delete”语句一起使用，但不能与“select”一起使用）。

你应该用'open'替换'execsql'命令......并删除'sql.clear'之前的'open'。

当您应该使用联接时，不要使用子查询。

我认为你的代码应该是这样的

```
procedure TfrmEditBooking.FormShow(Sender: TObject);
begin
 if SelectedID > 0 then
  with frmBookingData.ADOQuery1 do
   begin
    SQL.Clear;
    SQL.Add ('SELECT Name, Surname ');
    sql.add ('FROM customers_main inner join bookings_main');
    sql.add ('on customers_main.idcustomers_main = ');     
    sql.add ('bookings_main.customers_main_idcustomers_main');
    sql.add ('where bookings_main.idbookings_main = :p1');
    sql.params[0].asinteger:= SelectedID;
    open;  
    Label1.Caption := fieldbyname ('name').asstring + ' ' +
                      fieldbyname ('surname').asstring;
    Close;
   end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:01:00.060

要使其运行，您应该将其更改为

```
procedure TfrmEditBooking.FormShow(Sender: TObject);
var
  CustName: string;
begin
  if SelectedID > 0 then
    begin
      with frmBookingData.ADOQuery1 do
        begin
          Close; // close first
          SQL.Clear;
          SQL.Add(
            'SELECT Name, Surname '+
            'FROM customers_main '+
            'WHERE customers_main.idcustomers_main '+
            'IN '+
            '(SELECT bookings_main.customers_main_idcustomers_main '+
            'FROM bookings_main '+
            'WHERE bookings_main.idbookings_main = '+IntToStr(SelectedID)+')');
          Open; // open the query
          if not Eof then
            CustName := FieldByName('Surname').AsString+' '+FieldByName('Name').AsString
          else
            CustName := 'not found';
          Close; // close when finished
        end;
      Label1.Caption := CustName;
    end;
end; 
```

但是你应该得到一些（负面的）副作用，如果`frmBookingData.ADOQuery1`已经用于不同的东西

# asp.net-mvc-3 - 代码优先数据库模型

> ID：15597636
> 
> 赞同：0
> 
> 时间：2013-03-24T11:01:39.443
> 
> 标签：asp.net-mvc-3, entity-framework, fluent-interface

我正在尝试创建一个 MVC3 应用程序，我对首先创建数据库的 EF 代码感到困扰。我有这个表：用户、类别、产品、贷款。用户可以创建一个或多个类别。用户可以添加一个或多个产品。一个用户可以添加一个或多个贷款。一个类别可以有一个或多个产品。一个类别属于一个用户。一个产品可以没有或有更多的贷款。一个产品属于一个用户。产品位于类别中。贷款属于用户。贷款被添加到产品中。

```
public class User
{
    public int UserID { get; set; }
    public string UserName { get; set; }

    public virtual ICollection<Category> Categorys { get; set; }
    public virtual ICollection<Product> Products { get; set; }
    public virtual ICollection<Loan> Loans { get; set; }
}
public class Category
{
    public int CategoryID { get; set; }
    public string CategoryName { get; set; }

    public int UserID { get; set; }

    public virtual User User { get; set; }
    public virtual ICollection<Product> Products { get; set; }
}
    public class Product
{
    public int ProductID { get; set; }
    public string ProductName { get; set; }

    public int UserID { get; set; }
    public int CategoryID { get; set; }

    public virtual User User { get; set; }
    public virtual Category Category { get; set; }
    public virtual ICollection<Loan> Loans { get; set; }
}
    public class Loan
{
    public int LoanID { get; set; }
    public bool LoanStatus { get; set; }

    public int UserID { get; set; }
    public int ProductID { get; set; }

    public virtual User User { get; set; }
    public virtual Product Product { get; set; }
} 
```

已经做了上下文：

```
public class BuisnessContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Category> Categorys { get; set; }
    public DbSet<Product> Products { get; set; }
    public DbSet<Loan> Loans { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

已添加连接字符串：

```
<add name="BuisnessContext"
     connectionString="Data Source=|DataDirectory|Buisness.sdf"
     providerName="System.Data.SqlServerCe.4.0"/> 
```

还制作了一个简单的 Initializer 类：

```
public class BuisnessInitializer : DropCreateDatabaseIfModelChanges<BuisnessContext>
{
    protected override void Seed(BuisnessContext context)
    {
        var users = new List<User>
        {
            new User { UserName = "u1"},
            new User { UserName = "u2"}            };
        users.ForEach(s => context.Users.Add(s));
        context.SaveChanges();

        var categories = new List<Category>
        {
            new Category { CategoryName = "N1", UserID=1 }            };
        categories.ForEach(s => context.Categorys.Add(s));
        context.SaveChanges();

        var products = new List<Product>
        {
            new Product { ProductName = "N1", UserID = 1, CategoryID = 1 }
        };
        products.ForEach(s => context.Products.Add(s));
        context.SaveChanges();

        var loans = new List<Loan>
        {
            new Loan { LoanStatus = true, UserID = 2, ProductID = 1 }
        };
        loans.ForEach(s => context.Loans.Add(s));
        context.SaveChanges();
    }
} 
```

我还为用户生成了一个控制器来获取用户，但是当我尝试获取用户时，我收到了如下错误：

> 无法检查模型兼容性，因为模型中未包含 EdmMetadata 类型。确保已将 IncludeMetadataConvention 添加到 DbModelBuilder 约定中。

我试图改变`Database.SetInitializer<BuisnessContext>(new BuisnessInitializer());` whith`Database.SetInitializer<BuisnessContext>(null);`

然后我收到表用户不存在的错误，我在我的 APP_DATA 文件夹中找不到任何表 - > Buisness.mdf 数据库已创建，但有任何表。

我知道在我的 BuisnessContext 中我必须为一对多或类似的东西放置一些代码，但我不知道该怎么做。

请提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:47:14.750

我找到了关于[.net mvc 周期性参考问题与实体的问题的答案](https://stackoverflow.com/questions/7367339/net-mvc-cyclical-reference-issue-with-entity)

所以我的答案是这样的：

```
modelBuilder.Entity<Product>()
            .HasRequired(p => p.User).WithMany(p => p.Products).HasForeignKey(p => p.UserID).WillCascadeOnDelete(false);
        modelBuilder.Entity<Product>()
            .HasRequired(p => p.Category).WithMany(p => p.Products).HasForeignKey(p => p.CategoryID).WillCascadeOnDelete(false);
        modelBuilder.Entity<Loan>()
            .HasRequired(l => l.Product).WithMany(l => l.Loans).HasForeignKey(l => l.ProductID).WillCascadeOnDelete(false); 
```

原因是我在这里为相同的表创建了一些不同的路径，例如用户 - 类别、用户 - 类别 - 产品、类别 - 产品、用户 - 产品 - 贷款。

也许这对其他人来说是一个很好的答案。

# java - 是否可以通过反射调用无修饰符类或默认类

> ID：15597639
> 
> 赞同：1
> 
> 时间：2013-03-24T11:02:09.960
> 
> 标签：java, reflection

我想调用默认访问类Demo的main方法：

```
class Demo {
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }
} 
```

我从另一个类中调用它，例如：

```
 String[] str = {};
    Class cls = Class.forName(packClassName);        
    Method thisMethod = cls.getMethod("main", String[].class);        
    thisMethod.setAccessible(true);        
    thisMethod.invoke(cls.newInstance(), (Object) str); 
```

但我得到了例外，即

```
java.lang.IllegalAccessException: Class javaedit.Editor can not access a member of class Demo with modifiers ""
        at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:95)
        at java.lang.Class.newInstance0(Class.java:366) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:15:38.387

您的代码的主要问题是您试图在类的实例上调用静态方法。静态方法不属于对象而是属于整个类，因此将实例用作方法`null`的第一个参数`invoke`

```
String[] str = {};
Class cls = Class.forName(packClassName);        
Method thisMethod = cls.getMethod("main", String[].class);        
thisMethod.setAccessible(true);        

thisMethod.invoke(null, new Object[]{str});//ver 1
thisMethod.invoke(null, (Object)str);//ver 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T11:16:47.923

如果你知道类的全名，这可以通过反射来完成，例如给定一个包私有类：

```
class AcessCheck {

    public static final void printStuff() {
        System.out.println("Stuff");
    }
} 
```

`printStuff`您可以使用以下方法通过反射调用该方法：

```
 final Class<?> c = Thread.currentThread().getContextClassLoader().loadClass("com.mypackage.AcessCheck");
    final Method m = c.getDeclaredMethod("printStuff", (Class[]) null);
    m.setAccessible(true);
    m.invoke(null, (Object[]) null); 
```

# android - 如何使用wifi在android（服务器）和Android（客户端）之间连接

> ID：15597641
> 
> 赞同：0
> 
> 时间：2013-03-24T11:02:26.257
> 
> 标签：android

我正在构建在设备中有数据库的应用程序聊天 wifi，所以我的问题是如何使用**wifi**在 android（**服务器**）和 Android（**客户端）之间****连接**

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:06:03.130

这是一个很好的教程，可以做你想做的事：

[http://www.edumobile.org/android/android-development/socket-programming/](http://www.edumobile.org/android/android-development/socket-programming/)

编辑：要深入了解如何从 SQLite 数据库读取和写入，请查看本教程：

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

我不会发布任何代码，因为链接为您提供了这个。

还可以在此处查看数据存储的官方指南：

[http://developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)******

# javascript - javascript返回中的换行符

> ID：15597643
> 
> 赞同：0
> 
> 时间：2013-03-24T11:02:32.860
> 
> 标签：javascript

我正在尝试在这个已经工作的 javascript 中为响应添加换行符：

```
if (/example text/i.test(text)) return "example response"; 
```

我已经尝试了以下所有方法，但都没有奏效：

```
if (/example text/i.test(text)) return "example response 1/nexample response 2";
if (/example text/i.test(text)) return "example response 1" + '/n' + "example response 2";
if (/example text/i.test(text)) return "example response 1<br />example response 2"; 
```

等等等等

有没有什么简单的方法来完成这个内联而不会给我的代码的其余部分增加变量或更复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:04:42.197

如果您的字符串将显示为 HTML，您可以这样做：

```
if (/example text/i.test(text))
    return "example response 1<br"+">example response 2"; 
```

# c++ - 具有以下数据类型的模板：float、float4、float8、double、double4、int、int4、int8

> ID：15597645
> 
> 赞同：0
> 
> 时间：2013-03-24T11:02:40.067
> 
> 标签：c++, templates

我定义了以下数据类型：float、float4、float8、double、double4、int、int4、int8、long（64bit int）和 long4。假设我定义了以下函数：

```
void foo_float() {
  float f;
  int i;
  ...do something with f and i
}

void foo_float4() {
  float4 f;
  int4 i;
  ...do something with f and i
}

void foo_double4() {
  double4 f;
  int4 i;
  ...do something with f and i
} 
```

说“用 f 和 i 做某事”的部分是相同的。所以我不想写重复的代码。我想改为做类似的事情：

```
<float, 4>foo() 
```

这会生成函数：

```
void foo() {
    float4 f;
    int4 i;
    ...do something with f and i
} 
```

有什么建议么？我可以用模板做到这一点吗？或者也许是定义语句和模板的组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:05:36.960

是的，您可以将这组函数转换为单个模板函数：

```
template<typename float_type, typename int_type>
void foo() {
  float_type f;
  int_type i;
  ...do something with f and i
} 
```

然后像这样使用它：

```
foo<float4, int4>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T11:06:06.110

当然，这样做：

```
template <typename Tf, typename Ti>
void foo() {
  Tf f;
  Ti i;
  ...do something with f and i
} 
```

像这样调用它：

```
foo<float4, int4>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:57:58.510

所以一位朋友向我展示了如何做到这一点，以防有人感兴趣。现在，如果我将 float4 传递给函数，我也会得到一个 int4。我应该补充一点，int4 是具有四个整数的数据类型（实际上它对应于一个 SSE 寄存器），而不仅仅是对 int 的重命名。

```
template <typename F> struct Tupple {

};

template<> struct Tupple<float> {
    typedef int Intn;
};

template<> struct Tupple<float4> {
    typedef int4 Intn;
};

template<> struct Tupple<float8> {
    typedef int8 Intn;
};

template<> struct Tupple<double4> {
    typedef long4 Intn;
};

template <typename Floatn>
void foo(typename Floatn a) {
    typename Tupple<Floatn>::Intn i;
    Floatn b;
    i = (a < b);
    //do some more stuff
 }

int main() {
    float4 a;
    float8 b;
    float c;    
    double4 d;

    foo(a);
    foo(b);
    foo(c);
    foo(d);
} 
```

# windows - Windows 上的 Qt - 无法识别的命令行选项

> ID：15597649
> 
> 赞同：2
> 
> 时间：2013-03-24T11:03:00.413
> 
> 标签：windows, qt

我安装了 Qt Creator 5.0.1（我有 Windows 7）并尝试编译一个简单的“Hello, World”项目。它失败并带有注释“无法识别的命令行选项-fno-keep-inline-dllexport”任何想法，如何纠正或我做错了什么？

# objective-c - NSTextField 在附加到 NSStatusItem 的 NSPopover 上不活动

> ID：15597665
> 
> 赞同：1
> 
> 时间：2013-03-24T11:04:58.323
> 
> 标签：objective-c, xcode, menu, popover, nsstatusbar

我有一个这样创建的 NSStatusItem：

```
statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
[statusItem setTitle:@"DS"];
[statusItem setHighlightMode:YES];
[statusItem setAction:@selector(StatusClicked:)];
[statusItem setTarget:self]; 
```

我也有一个带有自定义视图的弹出窗口。在视图中我有文本字段： http: [//d.pr/i/CWbr](http://d.pr/i/CWbr)

我的弹出框显示如下：

```
- (void)StatusClicked:(id)sender {
    [self.popover showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMaxYEdge];
} 
```

从调试器中我了解到这`sender`是一个`NSStatusBarButton`类的实例。

问题是，当弹出窗口弹出我无法在文本字段中输入时，它似乎处于非活动状态：[http ://d.pr/i/q18U](http://d.pr/i/q18U)

该按钮正在工作。

我认为这个问题出在我传递给`ofView:`. 我试图将其更改为窗口上的控件，如下所示：

```
 [self.popover showRelativeToRect:[sender bounds] ofView:self.postText preferredEdge:NSMaxYEdge]; 
```

并且文本字段变得活跃（[http://d.pr/i/DmTz](http://d.pr/i/DmTz)），但我不知道为什么这会有所帮助。

为什么我的弹出框文本框在从菜单中弹出时变为非活动状态？为什么按钮有效？如何使文本字段处于活动状态？

PS我的应用是`Application is agent (UIElement)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:05:16.977

写完问题后，我认为这可能与关键窗口有关。所以我搜索了这个连接，发现了这个问题：[Not able to edit NSTextField on NSPopover even if Editable behavior is set](https://stackoverflow.com/questions/7214273/nstextfield-on-nspopover)

这完美地回答了我的问题。它似乎是一个错误。

# unix - AWK 先打印字段 $2，然后打印字段 $1

> ID：15597666
> 
> 赞同：47
> 
> 时间：2013-03-24T11:05:18.700
> 
> 标签：unix, awk

这是输入（样本）：

```
name1@gmail.com|com.emailclient.account
name2@msn.com|com.socialsite.auth.account 
```

我正在努力实现这一目标：

```
Emailclient name1@gmail.com
Socialsite name2@msn.com 
```

如果我像这样使用 AWK：

```
cat foo | awk 'BEGIN{FS="|"} {print $2 " " $1}' 
```

它通过在字段 2 的顶部覆盖字段 1 来弄乱输出。

任何提示/建议？谢谢你。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-24T12:44:27.433

几个一般提示*（除了 DOS 行尾问题）*：

`cat`用于连接文件，它不是唯一可以读取文件的工具！如果命令不读取文件，则使用重定向，如`command < file`.

您可以使用选项设置字段分隔符，`-F`而不是：

```
cat foo | awk 'BEGIN{FS="|"} {print $2 " " $1}' 
```

尝试：

```
awk -F'|' '{print $2" "$1}' foo 
```

这将输出：

```
com.emailclient.account name1@gmail.com
com.socialsite.auth.accoun name2@msn.com 
```

要获得所需的输出，您可以做很多事情。我可能`split()`是第二个领域：

```
awk -F'|' '{split($2,a,".");print a[2]" "$1}' file
emailclient name1@gmail.com
socialsite name2@msn.com 
```

最后将第一个字符转换为大写有点麻烦，`awk`因为您没有一个很好的内置`ucfirst()`函数：

```
awk -F'|' '{split($2,a,".");print toupper(substr(a[2],1,1)) substr(a[2],2),$1}' file
Emailclient name1@gmail.com
Socialsite name2@msn.com 
```

如果您想要更简洁的东西*（尽管您放弃了子流程）*，您可以这样做：

```
awk -F'|' '{split($2,a,".");print a[2]" "$1}' file | sed 's/^./\U&/'
Emailclient name1@gmail.com
Socialsite name2@msn.com 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T19:45:13.543

使用点或管道作为字段分隔符：

```
awk -v FS='[.|]' '{
    printf "%s%s %s.%s\n", toupper(substr($4,1,1)), substr($4,2), $1, $2
}' << END
name1@gmail.com|com.emailclient.account
name2@msn.com|com.socialsite.auth.account
END 
```

给出：

```
Emailclient name1@gmail.com
Socialsite name2@msn.com 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T11:20:35.113

awk 没问题。我猜该文件来自 Windows 系统，并且在行尾有一个 CR (^m ascii 0x0d)。

这将导致光标转到 $2 之后的行首。

使用 dos2unix 或 vi`:se ff=unix`来摆脱 CR。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-27T16:51:46.013

也许您的文件包含 CRLF 终止符。每行后跟 \r\n。

`awk`承认`$2`其实`$2\r`。手段转到行的`\r`开头。

`{print $2\r$1}`将`$2`先打印，然后返回头部，然后打印`$1`。所以字段 2 被字段 1 覆盖。

# android - ListView / GridView 中按下项目的默认背景颜色

> ID：15597667
> 
> 赞同：0
> 
> 时间：2013-03-24T11:05:20.273
> 
> 标签：android, listview, gridview, background, resources

我需要 ListView 或 GridView 中按下的项目的**默认**浅蓝色。 `view.setBackgroundResource(android.R.drawable.list_selector_background);`不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:10:50.600

You can set the ListSelector drawable in your layout xml:

```
<ListView
    ...
    android:listSelector="#ff0000"
/> 
```

or by calling:

```
yourList.setSelector(Color.BLACK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:11:45.773

Use

```
view.setBackgroundResource(android.R.color.yourcolor); 
```

# math - 你如何计算一个基本的评分系统？

> ID：15597669
> 
> 赞同：-2
> 
> 时间：2013-03-24T11:05:24.150
> 
> 标签：math, scoring

例如，我们有一个射击气球游戏，其中气球在“世界”中飞行，弓箭手或射手在气球飞出世界之前将其射中。所以，我们有这个统计数据：

```
Hits - balloons that were hit
Arrows - the number of bullets/arrows spent
Misses - is like Arrows - Hits
Escaped - balloons that player was not able to hit 
```

我认为，准确性是计算得分的好方法，但是当玩家使用 1 个箭头并击中气球时，他的准确性将是 100%（命中/箭头），因此我需要包括其他统计数据，例如错过或逃脱以便计算一个更好的分数。也许，我们甚至可以包括所花费的时间。

我认为这是一个常见的情况，但谷歌似乎无法给我任何答案。任何人？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:10:04.250

First thing could be how many balloons were shot down, so something like

```
percentage_hit = hits/total_number_of_balloons 
```

Afterwards, you can factor in accuracy, with

```
accuracy = hits/total_shots 
```

So a basic scoring would be `accuracy*percentage_hit`. You might want to add a `*100` or so in there, so the score is a bigger number.

Another idea would be to assign every balloon hit a score, maybe based on how long it is on the field already. So if the players hits it very fast after it appears, it is worth more than when it is on the field longer.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:13:11.720

这样想得分。

值得鼓励的事情：准确性命中

气馁的事情：错过逃逸的箭

然后你可以从中找出一些东西。

我会建议像 Accuracy * Hits - ( 1 - Accuracy ) * ( Misses + Escaped + Arrows )

并且您应该对这些值应用修饰符以使它们正常化，因此不会出现极端分数。

# perl - 在将变量写入文件之前处理变量内的文本

> ID：15597683
> 
> 赞同：0
> 
> 时间：2013-03-24T11:06:39.770
> 
> 标签：perl, variables

我正在使用 Perl`WWW::Mechanize`包来获取和处理来自某些网站的数据。通常我的行动方式如下：

1.  获取网页

    `$mech->get("$url");`

2.  将网页内容保存在一个变量中（顺便说一句，我不确定将这么多文本保存在一个标量中是否是正确的方法，据我所知，它应该用于单个值）

    `my $list = $mech->content();`

3.  使用我创建的子例程将变量的内容写入文本文件。（`writetoFile`子例程包括更多功能，例如路径和现有文件验证..）

    `writeToFile("$filename.tmp","$path",$list);`

4.  通过创建一个附加文件来处理在上一步中创建的文件中的文本并将处理后的内容保存在那里（然后删除初始临时文件）。

我想知道的是，是否可以在将文本存储到文件之前直接在`$list`变量中执行处理？整个过程按预期工作，但我不太喜欢它背后的逻辑，而且它似乎也有点低效，因为我必须多次重写同一个文件。

**编辑：** 只是为了提供更多关于我在处理变量内容时实际追求的信息。因此，在这种情况下，我从网站获取的数据实际上是一个由空行分隔的项目列表，第一行与我无关。所以我在处理这些数据时做的是两件事：

1.  删除空 (CRLF) 行
2.  如果第一行包含特定文本，则删除它。

理想情况下，我想将处理后的列表（没有空格和第一行删除）保存在一个文件中，而不会在途中创建任何其他文件。为了保存文件，我想使用`writeToFile`sub （我写的），因为它还对此类文件是否已经存在进行验证（如果文件将在最终处理之前保存 -`writeToFile`将始终重写现有文件）。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:27:55.923

您正在寻找[split](http://p3rl.org/split)。模式取决于：`(?<=\n)`在换行符处使用 split 并保留它。如果那没关系，请使用`\R`包含所有类型的换行符。

```
foreach my $line (split qr/\R/, $mech->content) {
    …
} 
```

现在强制性的 HTML-parsing-with-regex 警告：如果您使用 Mechanize 获得 HTML 源，则逐行解析它没有多大意义。您可能想要处理[`text`](http://p3rl.org/WWW%3a%3aMechanize#mech-text)文档的 HTML 剥离版本，或者将 HTML 源代码传递给解析器，例如[Web::Query](http://p3rl.org/Web%3a%3aQuery)，以声明方式获取您需要的部分。

# r - 仅通过 2 列键的第 2 列对 data.table 进行子集，使用二进制搜索而不是矢量扫描

> ID：15597685
> 
> 赞同：18
> 
> 时间：2013-03-24T11:06:45.523
> 
> 标签：r, data.table

我最近在`data.table`. 如果表格按多个键排序，是否只能搜索第二个键？

```
DT = data.table(x=sample(letters,1e7,T),y=sample(1:25,1e7,T),rnorm(1e7))
setkey(DT,x,y)
#R> DT[J('x')]
#        x  y       V3
#     1: x  1  0.89109
#     2: x  1 -2.01457
#    ---              
#384922: x 25  0.09676
#384923: x 25  0.25168
#R> DT[J('x',3)]
#       x y       V3
#    1: x 3 -0.88165
#    2: x 3  1.51028
#   ---             
#15383: x 3 -1.62218
#15384: x 3 -0.63601 
```

编辑：感谢@Arun

```
R> system.time(DT[J(unique(x), 25)])
   user  system elapsed 
  0.220   0.068   0.288 
R> system.time(DT[y==25])
   user  system elapsed 
  0.268   0.092   0.359 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-24T11:10:52.570

Yes, you can pass all values to the first key value and subset with the specific value for the second key.

```
DT[J(unique(x), 25), nomatch=0] 
```

If you need to subset by more than one value in the second key (e.g. the equivalent of `DT[y %in% 25:24]`), a more general solution is to use `CJ`

```
DT[CJ(unique(x), 25:24), nomatch=0] 
```

[Note](http://thread.gmane.org/gmane.comp.lang.r.datatable/2609/focus=2613) that `CJ` by default sorts the columns and sets key to all the columns, which means the result would be sorted as well. If that's not desirable, you should use `sorted=FALSE`

```
DT[CJ(unique(x), 25:24, sorted=FALSE), nomatch=0] 
```

There's also a feature request to add secondary keys to `data.table` in future. I believe the plan is to add a new function `set2key`.

[FR#1007 Build in secondary keys](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=1007&group_id=240&atid=978)

There is also `merge`, which has a method for `data.table`. It builds the secondary key inside it for you, so should be faster than base merge. See `?merge.data.table`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-21T17:13:34.713

基于[这个电子邮件线程](http://r.789695.n4.nabble.com/Select-from-second-key-but-not-first-td3663804.html)，我编写了以下函数：

```
create_index = function(dt, ..., verbose = getOption("datatable.verbose")) {
  cols = data.table:::getdots()
  res = dt[, cols, with=FALSE]
  res[, i:=1:nrow(dt)]
  setkeyv(res, cols, verbose = verbose)
}

JI = function(index, ...) {
  index[J(...),i]$i
} 
```

以下是我的系统上的结果，其 DT 较大（1e8 行）：

```
> system.time(DT[J("c")])
   user  system elapsed 
  0.168   0.136   0.306 

> system.time(DT[J(unique(x), 25)])
   user  system elapsed 
  2.472   1.508   3.980 
> system.time(DT[y==25])
   user  system elapsed 
  4.532   2.149   6.674 

> system.time(IDX_y <- create_index(DT, y))
   user  system elapsed 
  3.076   2.428   5.503 
> system.time(DT[JI(IDX_y, 25)])
   user  system elapsed 
  0.512   0.320   0.831 
```

如果您多次使用索引，这是值得的。

# jquery - jquery如何使用for循环添加到对象？

> ID：15597688
> 
> 赞同：2
> 
> 时间：2013-03-24T11:06:57.340
> 
> 标签：jquery, json, object, loops, stringify

你好，我做了一个 jquery 函数，它根据长度对单词进行排序，而且它很好。但是现在我想将这些单词存储在一个对象中，这样我就可以使用 JSON.stringify 来创建一个 JSON 字符串。问题是我只得到显示为 json 对象的最后一个单词，而不是所有单词。我认为这是因为我需要向对象添加或附加每个单词，但我不知道如何并且还没有找到答案。

这是我的功能：

```
function sortWords() {
var count7 = 0;
var count8 = 0;
var count9 = 0;
var count10 = 0;
var count11 = 0;
var count12 = 0;
var obj7 = {};
var obj8 = {};
var obj9 = {};
var obj10 = {};
var obj11 = {};
var obj12 = {};
//Get the text from the div
var str = $("div.someText").text();
//Chance everything exept words into spaces
str = str.replace(/[^a-zA-Z]/g," ");
//Replace all spaces for one space
str = str.replace(/ +/g," ");
//Make all words lowercase
str = str.toLowerCase();
//Make an array
var words = str.split(" ");
//Loop trough the array to show the result
for(var i=0;i<words.length;i++){
    //sort words by length
    switch(words[i].length) {
        case 7: 
            count7++;
            $('td.length7').append("<div>"+count7+": "+words[i]+"</div>");
            obj7["word"] = words[i];
            break;
        case 8: 
            count8++;
            $('td.length8').append("<div>"+count8+": "+words[i]+"</div>");
            obj8["word"] = words[i];
            break;
        case 9: 
            count9++;
            $('td.length9').append("<div>"+count9+": "+words[i]+"</div>");
            obj9["word"] = words[i];
            break;      
        case 10:    
            count10++;
            $('td.length10').append("<div>"+count10+": "+words[i]+"</div>");
            obj10["word"] = words[i];
            break;  
        case 11:
            count11++;
            $('td.length11').append("<div>"+count11+": "+words[i]+"</div>");
            obj11["word"] = words[i];
            break;  
        case 12:    
            count12++;
            $('td.length12').append("<div>"+count12+": "+words[i]+"</div>");
            obj12["word"] = words[i];
            break;                  
    }
}
jsonStr7 = JSON.stringify(obj7);
$("div.result1").text("The JSON String: " + jsonStr7); 
jsonStr8 = JSON.stringify(obj8);
$("div.result2").text("The JSON String: " + jsonStr8);
jsonStr9 = JSON.stringify(obj9);
$("div.result3").text("The JSON String: " + jsonStr9);
jsonStr10 = JSON.stringify(obj10);
$("div.result4").text("The JSON String: " + jsonStr10);
jsonStr11 = JSON.stringify(obj11);
$("div.result5").text("The JSON String: " + jsonStr11);
jsonStr12 = JSON.stringify(obj12);
$("div.result6").text("The JSON String: " + jsonStr12);
}; 
```

的HTML：

```
</head>
<body>
<input onClick="sortWords()" type="button" value="Sorteren op lengte" />
<table border="1" padding="10">
<tr>
    <td>length7</td>
</tr>
<tr>
    <td class="length7"></td>
</tr>
</table>    
<table border="1" padding="10">
<tr>
    <td>length8</td>
</tr>
<tr>
    <td class="length8"></td>
</tr>
</table>    

<table border="1" padding="10">
<tr>
    <td>length9</td>
</tr>
<tr>
    <td class="length9"></td>
</tr>
</table>    

<table border="1" padding="10">
<tr>
    <td>length10</td>
</tr>
<tr>
    <td class="length10"></td>
</tr>
</table>    

<table border="1" padding="10">
<tr>
    <td>length11</td>
</tr>
<tr>
    <td class="length11"></td>
</tr>
</table>    

<table border="1" padding="10">
<tr>
    <td>length12</td>
</tr>
<tr>
    <td class="length12"></td>
</tr>
</table>    

<br />
<div class="array"></div>
<br />
<div class="result1"></div>
<br />
<div class="result2"></div>
<br />
<div class="result3"></div>
<br />
<div class="result4"></div>
<br />
<div class="result5"></div>
<br />
<div class="result6"></div>
<br />
<div class="someText">
a aa aaa aaaa aaaaa aaaaaa aaaaaaa aaaaaaaa aaaaaaaaa aaaaaaaaaa aaaaaaaaaaa aaaaaaaaaaaa
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:31:05.947

正如上面提到的@Beetroot-Betroot，您遇到的问题是您有一个对象，其中包含一个名为 word 的键，并且每次将该键的值替换为最新匹配项。因此，您将始终只保存最后一个单词。

要匹配您在评论中概述的结构，您需要使用对象数组。

因此，您应该初始化一个数组而不是一个对象：即：`var obj7 = [];`

然后，每次匹配一个字长时，都应该向该数组添加一个对象。你可以通过使用类似的东西来做到这一点：`obj7.push({"word":words[i]});`

然后，当您对数组 ( `obj7`) 进行字符串化时，您将获得所需的结构。

# jquery - 在事件处理程序中选择具有类的子 div

> ID：15597689
> 
> 赞同：2
> 
> 时间：2013-03-24T11:06:59.487
> 
> 标签：jquery, jquery-selectors, parent-child, children

我不确定如何执行此操作

我有

```
<div class="a parent">
 <div class="child">
 </div>
</div>
<div class="b parent">
 <div class="child">
 </div>
</div> 
```

我想要这样的东西（在伪代码中）

```
$(".parent").mousemove(function(){

 select the `.child` which is the child of this div

}) 
```

所以当`.a`它悬停在它上面时只会选择a `.child`，当它悬停在它上面时只会`.b`选择b`.child`

这应该涉及`this`或`$this`或`$(this)`或类似的东西..但它令人困惑，我不知道在哪里可以读到它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T11:09:24.387

这将选择`.child`班级中的所有孩子。

```
$(".parent").mousemove(function() {
    var children = $(this).children('.child');
}); 
```

有了这个，您可以使用该方法选择第一个孩子`.eq()`。

```
if (children.length > 0) {
    var firstChild = children.eq(0);
} 
```

您还可以使用函数从后代（来自孩子的孩子......）中进行选择`.find()`，这不是问题的一部分，但相关且有用。

```
var descendants = $(this).find('.child'); 
```

# xslt - 分页器列表链接

> ID：15597691
> 
> 赞同：1
> 
> 时间：2013-03-24T11:07:36.257
> 
> 标签：xslt

我需要生成一个链接列表，作为最大值，我想做的是一个分页器。

示例：此变量提取最大链接数。

```
 <xsl:variable name="countPages" 
         select="substring-after(substring-before(
                     //x:div[@class='navBarBottomText']/x:span, ')'), 'till ' )" /> 
```

本例为：**30**，此值为链接总数。

**文件 XSLT：**

```
 <xsl:template match="//x:div[@class='navBarBottomText']" >
    <xsl:call-template name="paginator"/>
  </xsl:template>
  <xsl:template name="paginator">
    <xsl:param name="pos" select="number(0)"/>
    <xsl:choose>
      <xsl:when test="not($pos >= countPages)">
        <link href="{concat('localhost/link=' + $pos)}" />
        <xsl:call-template name="paginator">
          <xsl:with-param name="pos" select="$pos + 1" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise/>
    </xsl:choose>
  </xsl:template> 
```

结果应该是这样的：

```
<link href="localhost/link=0" />
<link href="localhost/link=1" />
<link href="localhost/link=2" />
<link href="localhost/link=3" />
<link href="localhost/link=4" />
<link href="localhost/link=5" />
<link href="localhost/link=6" />
..... 
```

缺少一些参数？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:09:28.010

**您可以按照您想要的方式执行此操作 - 只需使用适当的变量引用：**

**替换**：

```
<xsl:when test="not($pos >= countPages)"> 
```

**与**：

```
<xsl:when test="not($pos >= $countPages)"> 
```

**在这里，我假设变量`$countPages`是全局定义的（可见的）。**

* * *

**非递归解决方案**：

```
<xsl:variable name="vDoc" select="document('')"/>

<xsl:for-each select=
  "($vDoc//node() | $vDoc//@* | $vDoc//namespace::*)[not(position() >= $countPages)]">

  <link href="localhost/link={position() -1}" />
</xsl:for-each> 
```

# macos - 在 Mac OS X 上启动 Matlab 的后台实例

> ID：15597692
> 
> 赞同：1
> 
> 时间：2013-03-24T11:07:53.853
> 
> 标签：macos, bash, matlab, operating-system

在 Windows 中，您可以在 Matlab 中使用以下命令来启动一个新的 MATLAB 实例，该实例将在后台运行（即，您可以在您的第一个 MATLAB 版本中继续执行命令）。

> > 系统（'matlab &'）

OSX 中的类似调用，

> > 系统（[matlabroot '/bin/matlab &']）

但是会导致显示初始图像，然后什么也没有。如果我取出 & 符号，新实例将按预期打开。不幸的是，这对我不起作用，我真的需要能够在第二个运行时控制 MATLAB 的第一个实例。

有谁知道为什么操作系统之间存在这种差异？顺便说一句，我在 Mac 上使用 OSX 10.7、Windows 7 64 位和 MATLAB R2012a，在 PC 上使用 R2012b。

作为一些背景，我正在尝试为广泛使用 input() 函数的交互式命令行界面编写一个通用测试器。

**编辑：**我应该提到该命令

/Applications/MATLAB_R2012a.app/bin/matlab &

从 OSX 终端按预期工作。换句话说，一个新的 MATLAB 实例打开并且可以在终端中输入新的命令。所以这个问题似乎特定于 OSX matlab 中的 system() 函数。

此外，我尝试将该命令添加到 bash 脚本并从 matlab 调用该脚本，但遇到了与将命令放入 system() 函数时相同的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T07:18:36.053

您可以使用 applescript 来执行此操作。我做这样的事情：

```
! osascript -e "tell application \"Terminal\" to do script \"cd `pwd`;matlab -nojvm -nosplash -r 'why'\"" 
```

此示例在当前目录中打开一个新的 Matlab 实例，并运行命令“why”。如果您在后台 Matlab 进程中需要 java，您可以删除“-nojvm”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:18:55.760

`system()`这是一个长镜头，但它可能会发生，因为当您在 Unix 或 OS X 上使用命令从 Matlab 调用 Matlab 的新实例时，该`matlab_helper`进程分叉并运行一个 shell 进程来运行新应用程序。如果省略 & 符号，shell 会阻塞并等待程序完成，然后`system()`等待它，因此第一个 Matlab 锁定。并且（这里是推测部分）如果您添加与号，Matlab 在后台启动，然后分叉的 shell 退出，这会导致新的 Matlab 进程退出，因为它的父进程（shell）已经退出。（Windows 没有相同的父/子进程关系、进程启动机制或 shell，这可以解释不同的行为。）

您可以尝试在命令前加上`nohup`，这可以防止进程被 SIGHUP 杀死，这可能是您的第二个 Matlab 进程发生的情况。

```
system(['nohup ' matlabroot '/bin/matlab &']) 
```

您也可以尝试使用 OS X`open`命令来启动一个新的独立实例。像这样的东西。您可能需要摆弄选项和路径，但`-n`应该是为您提供新实例的原因。它应该指向`/Applications/MATLAB_R2012a.app`; 我假设这`matlabroot`就是 OS X 上返回的内容。

```
system(['open -na ' matlabroot]) 
```

您也可以尝试从 Matlab 中的 Java 进程启动功能运行它，而不是使用`system()`. `Runtime.exec()`不会像`system()`那样阻塞，并且可能还有其他怪癖`system()`，例如`matlab_helper`架构。尝试`java.lang.Runtime`从 Matlab 启动它。

```
jrt = java.lang.Runtime.getRuntime();
newMatlabProcess = jrt.exec([matlabroot '/bin/matlab']); 
```

您也可以使用此机制尝试上面的其他命令行变体，并且您可能需要将 stdout 重定向到 /dev/null，因为新进程的输入和输出被缓冲到该`newMatlabProcess`对象中。

# laravel - 如何将登录页面添加到魅力捆绑包

> ID：15597693
> 
> 赞同：0
> 
> 时间：2013-03-24T11:08:11.183
> 
> 标签：laravel, charisma

我正在使用伟大的魅力捆绑到`laravel framework 3.2`.

如何在页面中添加登录`/admin`页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:16:13.950

Charisma 本身并不是一个管理小组。它只是一个用户界面（或主题，随您的喜好），您可以将其用于您自己的管理面板。您将需要构建自己的面板来使用它。

请考虑查看[Laravel Auth 使用文档](http://laravel.com/docs/auth/usage)以获取有关使用身份验证和保护您的管理员路由的更多信息。

```
Route::get('admin', array('before' => 'auth', function() {})); 
```

# iphone - 将 iOS 应用程序连接到 Core Data

> ID：15597702
> 
> 赞同：1
> 
> 时间：2013-03-24T11:09:57.590
> 
> 标签：iphone, ios, cocoa-touch

我是iOS开发的初学者，我想介绍一些示例应用程序的开发。

我的问题是构建某些东西是否是一种好习惯，并在构建某些项目后弄清楚如何保存数据，或者它必须成为开发过程的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:29:50.390

这取决于您的项目，数据是您应用程序的基础部分还是只是一个加号？如果是加号，您可以稍后实现它，但总的来说，我认为您应该从一开始就考虑它发展过程。

如果您打算使用 Core Data 作为持久存储，最容易从一开始就添加它，但[在这里](https://stackoverflow.com/questions/2032818/adding-core-data-to-existing-iphone-project)您可以找到如何在开发过程的后期添加它。

# java - Why does this java program outputs false?

> ID：15597706
> 
> 赞同：-3
> 
> 时间：2013-03-24T11:10:12.253
> 
> 标签：java, equals

The following java code, which outputs false:

```
class Value {
int i;
}
public class EqualsMethod2 {
public static void main(String[] args) {
Value v1 = new Value();
Value v2 = new Value();
v1.i = v2.i = 100;
System.out.println(v1.equals(v2));
}
} 
```

Why isn't the result true instead? While reading some Java documentation I've found the following answer: *the default behavior of equals() is to compare handles*. But aren't v1 and v2 handles?

Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:25:06.463

只是`setInterval`用来定期检查你需要什么

```
<html>
    <head>
       <script type="text/javascript">
           var myInterval,
           myColorName,
           myDelay = xxx;
           function onLoad(){
               startTimer();  
           }
           function startTimer(){
               myInterval  = setInterval(function(){
                   myColorName = document.forms['form1'].elements['textbox'].value;
                   if(myColorName.length>0){
                       //do what you want with your color        
                   }
               },myDelay);
           }
           function stopTimer(){
               clearInterval(myInterval);
           }
       </script>
    </head>
    <body onload="onLoad()">
        <form name="form1">
            <fieldset>
            <legend>Enter Color Name:</legend>
            <input type="text" name="textbox"/>
            </fieldset>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:24:06.200

不要尝试定期获取值，因为在输入中键入数据时，您将无法立即获取数据。

尝试`<input type=¨text¨ name=¨some¨ onkeyup=¨typed(this.value)¨/>`

```
function typed(value)
{
console.log(value);
} 
```

# c++ - reading 2 columns from txt file

> ID：15597709
> 
> 赞同：1
> 
> 时间：2013-03-24T11:10:38.377
> 
> 标签：c++

I'm writing an small program in C++ and have an input file and need to read line by line, there're 2 columns in file, string name and integer number. for example:

```
abad 34
alex 44
chris 12 
```

I wrote such code:

```
ifstream input("file.txt");
int num;
string str;

while( getline( input, line ) ){
  istringstream sline( line );
  if( !(sline>>str>>num) ){
     //throw error
  }
  ...
} 
```

I need to throw errors in cases:

if there's no number - only name is written e.g. `abad` (actually I'm getting error with my code),

if there's a name and no number, e.g.: `abad 34a`(letter a in `34a` is ignored and transferred to just 34 in my code while error should be triggered),

or if there're more than 2 columns e.g. `abad 34 45` (2nd number is ignored).

How to read correctly input data ( and without iterators )?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:17:01.873

尝试这个：

```
if( !(sline >> str >> num >> std::ws) || sline.peek() != EOF ) {
     //throw error
} 
```

`std::ws`是一个流操纵器，用于提取后面可能出现的空白`num`。包括`<iomanip>`它。接下来检查在流中窥视是否返回 EOF。如果没有，你有更多的输入等待，这是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:29:45.647

请尝试以下操作： 保留`std::vector`每行中读取的所有字符串，以便您能够更轻松地处理它们。那么，分三种情况：

*   没有数字：vec.size( ) = 1。
*   超过两个字符串：vec.size( ) > 2。
*   无效数字：不是所有 vec[1] 的数字都是数字

代码：

```
#include <fstream>
#include <sstream>
#include <string>
#include <vector>
#include <cstdlib>
#include <cctype>

using namespace std;

int main( ) {
  fstream in( "input.txt", fstream::in );
  fstream out( "error.txt", fstream::out );

  string line;

  while( getline( in, line ) ) {
    vector< string > cmd;
    istringstream istr( line );
    string tmp;

    while( istr >> tmp ) {
      cmd.push_back( tmp );
    }

    if( cmd.size( ) == 1 ) // Case 1: the user has entered only the name
    {
      out << "Error: you should also enter a number after the name." << endl; // or whatever
      continue; // Because there is no number in the input, there is no need to proceed
    }
    else if( cmd.size( ) > 2 ) // Case 3: more than two numbers or names
    {
      out << "Error: you should enter only one name and one number." << endl;
    }

    // Case 2: the user has enetered a number like 32a

    string num = cmd[ 1 ];

    for( int i = 0; i < num.size( ); ++i ) {
      if( !isdigit( num[ i ] ) ) {
        out << "Error: the number should only consist of the characters from 1-9." << endl;
        break;
      }
    }
  }

  return 0;
} 
```

**文件：输入.txt**

```
abad 34
alex 44
chris 12
abad
abad 24a
abad 24 25 
```

**文件：error.txt**

```
Error: you should also enter a number after the name.
Error: the number should only consist of the characters from 1-9.
Error: you should enter only one name and one number. 
```

# c# - Delay in c# not thread.sleep

> ID：15597711
> 
> 赞同：-6
> 
> 时间：2013-03-24T11:10:47.600
> 
> 标签：c#, .net

Guys is there any option in c# like in VB?

```
Sub Delay(ByVal dblSecs As Double)

Const OneSec As Double = 1.0# / (1440.0# * 60.0#)
Dim dblWaitTil As Date
Now.AddSeconds(OneSec)
dblWaitTil = Now.AddSeconds(OneSec).AddSeconds(dblSecs)
Do Until Now > dblWaitTil
Application.DoEvents() ' Allow windows messages to be processed
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:13:21.770

您需要适合您需要的[Timer](http://msdn.microsoft.com/en-IN/library/system.timers.timer.aspx)类或[DispatcherTimer类。](http://msdn.microsoft.com/en-IN/library/system.windows.threading.dispatchertimer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:19:44.907

是的，您可以在 C# 中做同样的事情，但这是一个非常糟糕的主意。

这种暂停的方式称为忙循环，因为它会使主线程使用尽可能多的 CPU。

你想要做的是设置一个计时器，并从 tick 事件中调用一个回调方法：

```
public void Wait(double seconds, Action action) {
  Timer timer = new Timer();
  timer.Interval = (int)(seconds * 1000.0);
  timer.Tick += (s, o) => {
    timer.Enabled = false;
    timer.Dispose();
    action();
  };
  timer.Enabled = true;
} 
```

使用示例：

```
textbox.text = "Test";
Wait(5.0, () => {
  textbox.text = "Finish";
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:17:41.770

Patterson 算法将适用于我认为的调度程序。

[http://en.wikipedia.org/wiki/Sardinas%E2%80%93Patterson_algorithm](http://en.wikipedia.org/wiki/Sardinas%E2%80%93Patterson_algorithm)

# jquery - Slimbox V2 error when upgrading to jQuery 1.9.1

> ID：15597715
> 
> 赞同：1
> 
> 时间：2013-03-24T11:11:13.460
> 
> 标签：jquery, lightbox, slimbox

When you have a site that uses Slimbox V2 and upgrade to jQuery 1.9.1 you get a strange behavior. The semitransparent overlay layer comes in front of your image instead of behind it.

Before the upgrade, I used jQuery 1.8 and everything was working fine. Nothing else changed on the site. How to solve the issue without downgrading jQuery?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-22T20:13:20.563

我在 2.05 版本中修复了它。

这是代码更改的[差异](https://code.google.com/p/slimbox/source/diff?spec=svn319&r=319&format=side&path=/trunk/js/slimbox2.js)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T00:27:17.197

嗯...修复了 Lightbox2 jQuery 1.9.1 - [http://www.cybernova.net/javascripts/lightbox.js](http://www.cybernova.net/javascripts/lightbox.js)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T18:46:18.810

它不起作用的原因是 jQuery 1.9 改变了工作方式`.after()`，并且我在下面显示的原始灯箱中的复杂代码以`.after()`旧方式使用（假设它将新元素添加到返回的元素集中，而新`.after()`没有。）

您可以通过更改顺序轻松修复它，而不是：

```
$('.....).appendTo($('body')); 
```

你只需这样做：

```
$('body').append($('...); 
```

不过**要小心**。下面的代码已被我更改为将数据部分放在图片上方而不是图片下方，并且需要进行其他更改（您需要在`size_container`函数中添加数据部分的高度）。然而，它展示了如何解决问题——并且正在发挥作用。查看[我正在开发的网站](http://www.virginiaparkinson.com/uniform.php)

```
Lightbox.prototype.build = function() {
  var $lightbox,
    _this = this;

  $('body').append($("<div>", {
    id: 'lightboxOverlay'
  }),$('<div/>', {
    id: 'lightbox'
  }).append($('<div/>', {
    "class": 'lb-outerContainer'
  }).append($('<div/>', {
    "class": 'lb-dataContainer'
  }).append($('<div/>', {
    "class": 'lb-data'
  }).append($('<div/>', {
    "class": 'lb-details'
  }).append($('<span/>', {
    "class": 'lb-caption'
  }), $('<span/>', {
    "class": 'lb-number'
  })), $('<div/>', {
    "class": 'lb-closeContainer'
  }).append($('<a/>', {
    "class": 'lb-close'
  }).append($('<img/>', {
    src: this.options.fileCloseImage
  }))))),$('<div/>', {
    "class": 'lb-container'
  }).append($('<img/>', {
    "class": 'lb-image'
  }),$('<div/>', {
    "class": 'lb-nav'
  }).append($('<a/>', {
    "class": 'lb-prev'
  }), $('<a/>', {
    "class": 'lb-next'
  })), $('<div/>', {
    "class": 'lb-loader'
  }).append($('<a/>', {
    "class": 'lb-cancel'
  }).append($('<img/>', {
    src: this.options.fileLoadingImage
  }))))))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T19:52:14.693

这是我找到的修复程序。

```
 /*
        Slimbox v2.04 - The ultimate lightweight Lightbox clone for jQuery
        (c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
        MIT-style license.
    */
    (function(w){var E=w(window),u,f,F=-1,n,x,D,v,y,L,r,m=!window.XMLHttpRequest,s=[],l=document.documentElement,k={},t=new Image(),J=new Image(),H,a,g,p,I,d,G,c,A,K;w(function(){w("body").append(w([H=w('<div id="lbOverlay" />').click(C)[0],a=w('<div id="lbCenter" />')[0],G=w('<div id="lbBottomContainer" />')[0]]).css("display","none"));g=w('<div id="lbImage" />').appendTo(a).append(p=w('<div style="position: relative;" />').append([I=w('<a id="lbPrevLink" href="#" />').click(B)[0],d=w('<a id="lbNextLink" href="#" />').click(e)[0]])[0])[0];c=w('<div id="lbBottom" />').appendTo(G).append([w('<a id="lbCloseLink" href="#" />').click(C)[0],A=w('<div id="lbCaption" />')[0],K=w('<div id="lbNumber" />')[0],w('<div style="clear: both;" />')[0]])[0]});w.slimbox=function(O,N,M){u=w.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},M);if(typeof O=="string"){O=[[O,N]];N=0}y=E.scrollTop()+(E.height()/2);L=u.initialWidth;r=u.initialHeight;w(a).css({top:Math.max(0,y-(r/2)),width:L,height:r,marginLeft:-L/2}).show();v=m||(H.currentStyle&&(H.currentStyle.position!="fixed"));if(v){H.style.position="absolute"}w(H).css("opacity",u.overlayOpacity).fadeIn(u.overlayFadeDuration);z();j(1);f=O;u.loop=u.loop&&(f.length>1);return b(N)};w.fn.slimbox=function(M,P,O){P=P||function(Q){return[Q.href,Q.title]};O=O||function(){return true};var N=this;return N.unbind("click").click(function(){var S=this,U=0,T,Q=0,R;T=w.grep(N,function(W,V){return O.call(S,W,V)});for(R=T.length;Q<R;++Q){if(T[Q]==S){U=Q}T[Q]=P(T[Q],Q)}return w.slimbox(T,U,M)})};function z(){var N=E.scrollLeft(),M=E.width();w([a,G]).css("left",N+(M/2));if(v){w(H).css({left:N,top:E.scrollTop(),width:M,height:E.height()})}}function j(M){if(M){w("object").add(m?"select":"embed").each(function(O,P){s[O]=[P,P.style.visibility];P.style.visibility="hidden"})}else{w.each(s,function(O,P){P[0].style.visibility=P[1]});s=[]}var N=M?"bind":"unbind";E[N]("scroll resize",z);w(document)[N]("keydown",o)}function o(O){var N=O.keyCode,M=w.inArray;return(M(N,u.closeKeys)>=0)?C():(M(N,u.nextKeys)>=0)?e():(M(N,u.previousKeys)>=0)?B():false}function B(){return b(x)}function e(){return b(D)}function b(M){if(M>=0){F=M;n=f[F][0];x=(F||(u.loop?f.length:0))-1;D=((F+1)%f.length)||(u.loop?0:-1);q();a.className="lbLoading";k=new Image();k.onload=i;k.src=n}return false}function i(){a.className="";w(g).css({backgroundImage:"url("+n+")",visibility:"hidden",display:""});w(p).width(k.width);w([p,I,d]).height(k.height);w(A).html(f[F][1]||"");w(K).html((((f.length>1)&&u.counterText)||"").replace(/{x}/,F+1).replace(/{y}/,f.length));if(x>=0){t.src=f[x][0]}if(D>=0){J.src=f[D][0]}L=g.offsetWidth;r=g.offsetHeight;var M=Math.max(0,y-(r/2));if(a.offsetHeight!=r){w(a).animate({height:r,top:M},u.resizeDuration,u.resizeEasing)}if(a.offsetWidth!=L){w(a).animate({width:L,marginLeft:-L/2},u.resizeDuration,u.resizeEasing)}w(a).queue(function(){w(G).css({width:L,top:M+r,marginLeft:-L/2,visibility:"hidden",display:""});w(g).css({display:"none",visibility:"",opacity:""}).fadeIn(u.imageFadeDuration,h)})}function h(){if(x>=0){w(I).show()}if(D>=0){w(d).show()}w(c).css("marginTop",-c.offsetHeight).animate({marginTop:0},u.captionAnimationDuration);G.style.visibility=""}function q(){k.onload=null;k.src=t.src=J.src=n;w([a,g,c]).stop(true);w([I,d,g,G]).hide()}function C(){if(F>=0){q();F=x=D=-1;w(a).hide();w(H).stop().fadeOut(u.overlayFadeDuration,j)}return false}})(jQuery); 
```

来源：[http ://code.google.com/p/slimbox/issues/attachmentText?id=36&aid=360003000&name=slimbox2.js](http://code.google.com/p/slimbox/issues/attachmentText?id=36&aid=360003000&name=slimbox2.js)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-29T15:19:20.093

您遇到的问题很容易解决。我自己只花了一个小时...

在 slimbox2 的缩小版中，查找以下代码：

```
appendTo(G).append([w('<a id="lbCloseLink" href="#" />').add(H).click(C)[0] 
```

现在将其替换为以下内容：

```
appendTo(G).append([w('<a id="lbCloseLink" href="#" />').add(H).click(C).end()[0] 
```

一些解释：一些div被附加到body中，包括lblOverlay（在编译版本中被H引用）。但是，如果您查看上面的部分，通过“添加”-ing H 变量，它将被附加到 lblContainer 并且不会直接在 body ==> 覆盖跳转图片前面。通过向其中添加“end()”，您将只引用“a”元素，而不是“a”元素和覆盖层元素。

在 FF 20.0.1 和 jQuery 1.9.1 中测试

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T10:17:02.540

```
Lightbox.prototype.build = function() {
      var $lightbox,
        _this = this;
      $("<div>", {
        id: 'lightboxOverlay'
      }).appendTo('body');
      $('<div/>', {
        id: 'lightbox'
      }).append($('<div/>', {
        "class": 'lb-outerContainer'
      }).append($('<div/>', {
        "class": 'lb-container'
      }).append($('<img/>', { .... 
```

# android - Ram allocation for an application in android

> ID：15597717
> 
> 赞同：1
> 
> 时间：2013-03-24T11:11:19.587
> 
> 标签：android, memory-management

I am developing an Android application. Is it possible to allocate RAM for that application? For example: When my application opens it must allocate 30MB RAM. Mention the APIs.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T11:21:27.523

不，你不能。这完全由系统管理。

事实上，系统会在需要时随时增加分配给您的应用程序的堆。但是，应用程序对内存消耗有限制。要检索此限制，您可以使用以下命令：

```
/* Expressed in Megabytes */
Runtime.getRuntime().maxMemory() / 1024 / 1024 
```

最后，您似乎可以在清单中指定您的应用程序可能比普通应用程序使用更多的内存，方法是添加：

> [机器人：大堆=“真”](http://developer.android.com/guide/topics/manifest/application-element.html#largeHeap)

如果您使用此标记，请查看[ActivityManager.getLargeMemoryClass()](http://developer.android.com/reference/android/app/ActivityManager.html#getLargeMemoryClass%28%29)以验证分配给您的应用程序的值。返回值以兆字节表示。它*可以*高于[ActivityManager.getMemoryClass()](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass())返回的值，前提是您设备的内存可用性允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:16:28.010

不，你不能那样做。分配给应用程序的内存特定于设备。我强烈建议您观看Google IO 2011 的[内存管理视频](http://www.youtube.com/watch?v=_CruQY55HOk)，以更深入地了解该主题。

此外，请查看 logcat 中的调试日志，以了解分配给您的应用程序的内存量以及剩余的内存量。

> 01-13 14:37:54.538: D/dalvikvm(27390): GC_CONCURRENT 释放 393K，47% 释放 3377K/6279K，外部 2003K/2199K，暂停 2ms+3ms

我也不推荐使用 largeHeap="true" 。就像@Halim 在他的帖子中指出的那样，额外的内存可能不会分配给您的应用程序。

> 启用此功能也不能保证可用内存的固定增加，因为某些设备受到其总可用内存的限制。

专注于对 30MB 内存的需求以及如何减少它。

# java - IP Address Regex allowing for port

> ID：15597719
> 
> 赞同：-3
> 
> 时间：2013-03-24T11:11:51.150
> 
> 标签：java, regex, ip, port

I have the following regex to match an IP address:

```
(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$ 
```

Could someone please update it to allow for a port number on the end (port number would be optional)

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:51:17.740

伙计，那是一团糟。最好简化搜索模式，然后验证值，而不是尝试在正则表达式中做所有事情。例如，

```
private String findIP(String in) {
  Matcher m = Pattern.compile("((\\d+\\.){3}\\d+):(\\d+)").matcher(in);
  if (m.find()) {
    String[] p = m.group(1).split("\\.");
    for (int i = 0; i < 4; i++)
      if (Integer.parseInt(p[i]) > 255) return null;
    if (Integer.parseInt(m.group(3)) > 65535) return null;
    return m.group(0);
  }
  return null;
} 
```

我可能没有考虑到所有内容（地址以 0\. 开头，parseInt 返回负数等），但是使用更简单的正则表达式可以提高可读性，并且将数字 4、255 和 65535 作为提示未来的读者，我们正在谈论一个虚线四边形和一个端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:29:33.287

```
(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]):[\d]{1,5}$ 
```

# awk - Count the repetitions of an element from a file with awk

> ID：15597722
> 
> 赞同：2
> 
> 时间：2013-03-24T11:12:11.803
> 
> 标签：awk

I have a one column file composed by only integer as

```
1
1
4
3
3
2 
```

I want to count how many time a number appear in the file. The output file should be:

```
1 2
2 1
3 2
4 1 
```

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:29:17.503

试试这一行：

```
awk '{a[$0]++}END{for(x in a)print x,a[x]}' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:30:07.277

```
awk '{tot[$0]++} END{for (n in tot) {print n,tot[n]}} ' numbers 
```

# c++ - multiple linked lists for different objects in c++

> ID：15597724
> 
> 赞同：0
> 
> 时间：2013-03-24T11:12:18.887
> 
> 标签：c++, oop, pointers, linked-list, singly-linked-list

consider these classes (simplified)

```
class Character 
{
public:
char name[20];
    char type[20];
    int strength;
};

class inventoryItem
{
public:
    char name[20];
};
class weapon: public inventoryItem
{
public:
    int magical resistance;
};
class spell: public inventoryItem
{
public:
   int magical power;
}; 
```

i have written a class for a linked list (not allowed to use stl list)

```
class list
{
public:
struct listItem
{
    listItem* objectPointer;
    listItem* pnext;

}*phead;

list()
{
    phead=NULL;

}

bool isEmpty(){ 
if (!phead)
return true;
else
    return false;
}
void addToBack(listItem *itemtoadd)
{
    listItem *ptemp;
    listItem *ppast;
    listItem *pNewItem;

pNewItem=new listItem();

pNewItem->objectPointer=itemtoadd;
pNewItem->pnext=NULL;
if (phead==NULL)
    phead=itemtoadd;
else
{
      ptemp=phead;
      while(ptemp)
      {
     ptemp= ptemp->pnext;

      }
      ptemp->pnext=itemtoadd;

}

}

}; 
```

I have cut this down a lot but my question is , is there an easy way to create linked lists for all these using the same list class ? or am I wasting my time ?

every time I have tried it cant convert the pointer from type 'weapon' to type 'listitem'
I need a list of characters and a list of each weapon or spell for that character
I'm still a beginner with OOP and pointers , the program I have now compiles and I have a list of characters working , however the list is not managed by the class its managed within some other functions, I'm hoping there's a way for one class to deal with it all , can anyone help explain it to me ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:19:17.630

看看[C++ 模板](http://www.cplusplus.com/doc/tutorial/templates/)。使用模板，您可以在读/写代码方面拥有一个列表类，但您可以拥有武器列表、项目列表或任何其他列表，而无需分别编写 WeaponsList、ItemsList 和 SomethingElseList 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:21:16.320

简单的答案是这样做

```
struct listItem
{
    void* objectPointer;
    listItem* pnext;

}*phead; 
```

空指针将允许您存储指向任何内容的指针。当然，这完全取决于您确保您不会忘记您所指向的对象类型。所以这种方法是有风险的。正如建议的那样，更安全的方法是模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:25:47.690

你可以使用：

```
enum item
{
    WEAPON,SPELL
}

class list {
public:
    struct listItem {
        union {
            weapon *weaponPointer;
            spell *spellPointer
        } object;
        item objType;
        listItem* pnext;

    }*phead; 
```

但是问题是您必须访问 type 成员才能确定您正在访问的项目类型。

# java - Using Java inheritance

> ID：15597725
> 
> 赞同：1
> 
> 时间：2013-03-24T11:12:24.027
> 
> 标签：java, oop, inheritance

I think I miss some concepts of the OOP programming, but I don't know what exactly.

How Can I use the objects created from different classes?

For example, let's say I have to work with cards. There is a Card class, it contains all the shared properties. Normal cards and joker cards are inherited from the Card class (joker can take over any card color) and the a card can worth nothing or worth points, so there is a ScoreCard inherited from NormalCard.

![UML: ](../Images/19d24920d64c7f3ec07820cd9ab50606.png)

So how can I use this model when I'm programming? I create N card in an array and when generating cards should I decide whether the actual card is a Joker/Score/Normal Card? And later **how can I test if a card is a joker/normal/score card?** Because if the `ScoreCard` have a `private int score;` and setters/getters the `NormalCard` is not going to have this property, so when I write an if statement I don't know what to test.

```
 Card[] cardsArray = new Card[52];

   for (int i = 0; i<cardsArray.length;i++) {
       //Some source tells if a card is a Score/Normal/Joker
       String src;
       switch (src) {
           case "Joker":Card[i] = new JokerCard();
               break;
           case "Normal":Card[i] = new NormalCard();

               .... etc
       }
   }

   //Some Userevent:
   ..userevent(Card in) {
        //Test what
        if (in.value == 4) {
            this.user.setScore(this.user.getScore()+in.score);
        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T11:20:55.467

我认为你应该学习多态性。当与继承结合使用时，它会变得强大:)

问题是你不应该真正知道这张牌是否是一张百搭牌/普通牌/等等。相反，您提供了一个接口/抽象类级别的方法，该方法应该处理用户事件。所有“真正的”类都应该**覆盖**这个方法并提供一个实现。我会展示这个：

```
interface Card {
    void handleUserEvent(UserEvent event); 
```

}

```
public class NormalCard implements Card {
    public void handleUserEvent(UserEvent event) {
          // do something here
    } 
```

}

```
public class Joker implements Card {
    public void handleUserEvent(UserEvent event) {
         // hey I'm a joker
    } 
```

}

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T11:19:43.403

例如，所有卡片都可以有一个`int getScore()`总是返回 0 的方法，除了 ScoreCard 实例。

所有的卡片都可以有一个`boolean canTake(Card otherCard)`对于 JokerCard 总是返回 true 的卡片，并且对于其他卡片会遵守一些其他规则。

很难给出一个明确的答案，但是如果你想使用多态，那么你需要基类中的方法，必须有一个实现是所有派生类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:27:29.130

您可以在 for 循环中使用 .toString() 方法来确定卡片的类型，只要在每个子类中放置一个 toString() 方法即可。

```
Card[] cardsArray = new Card[52];

   for (int i = 0; i<cardsArray.length;i++) {
       //Some source tells if a card is a Score/Normal/Joker
       String src = Card[i].toString; // This should define the type of current card
       switch (src) {
           case "Joker":Card[i] = new JokerCard();
               break;
           case "Normal":Card[i] = new NormalCard();

               .... etc  
       }
   }

public int getScore(Card c){
    // Returns the score. In the getScore() method you should already tell if the 
    //  card is an Ace or a Joker because you can give it a number of 0 for an Ace or whatever you want.
    int Score = c.getScore();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T11:33:36.790

如果您采用 MDA 方法，则可以使用该模型生成代码。有很多工具可以有效地做到这一点。

使用接口时，您不知道该接口表示的对象的实际类型，在极少数情况下，如果您想这样做，请使用`instanceof`语句。

要创建纯接口，您不要将变量放入其中。而是`private`在实现类中使用带有 mutators 的成员。如果您想通过接口访问这些属性，请将这些修改器作为`public`方法放入接口。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-24T11:20:43.733

使用实例

```
if(someCard instanceof JokerCard) {
  /* Some logic here*/
}
else if(someCard instanceOf ScoreCard) {
  int score = ((ScoreCard) someCard).getScore();
  /* some more logic here */
} 
```

# awesomium - Awesomium, How can I catch the response data and change it before viewing it

> ID：15597726
> 
> 赞同：2
> 
> 时间：2013-03-24T11:12:27.897
> 
> 标签：awesomium

When i request a page, I need to get the returned data and changed it before viewing it How can i do that in Awesomium?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T07:42:07.803

这取决于您是使用 C++ 还是 C# 来使用 Awesomium。

Awesomium for C++ 提供了一个**ResourceInterceptor**类来拦截请求和响应：

[用于 C++ 的资源拦截器 API](http://www.awesomium.com/docs/1_7_2/cpp_api/class_awesomium_1_1_resource_interceptor.html#af31dd4e15a749eed04ba90392b9ef15c)

不幸的是，用于 C# 的 Awesomium 没有提供相同的功能。只有一个接口可以捕获请求，但没有捕获响应的等价物。

[C# 的 IResourceInterceptor API](http://docs.awesomium.net/html/AllMembers_T_Awesomium_Core_IResourceInterceptor.htm)

从这里有不同的可能性：

*   为 C# 调整 Awesomium 以实现这一点
*   使用像 Fiddler 这样的 3d 派对工具来拦截和修改请求/响应

在后一种情况下，您可以在此处找到有用的资源：

[是否可以拦截在 wpf 浏览器控件中接收到的内容？](https://stackoverflow.com/questions/11361967/is-it-possible-to-intercept-the-content-received-within-a-wpf-browser-control)

[WPF webbrowser 的 LoadCompleted 事件](https://stackoverflow.com/questions/7151535/wpf-webbrowsers-loadcompleted-event)

# java - Real-time web service java using axis2

> ID：15597728
> 
> 赞同：0
> 
> 时间：2013-03-24T11:12:48.490
> 
> 标签：java, web-services, real-time, tomcat7, axis2

Purpose: I'm trying to make a real-time web service in Java. When there're changes in database, the data in clients(probably Android client) will be changed automatically without refreshing.

Platform: I'm using Tomcat 7 container and Axis2.

Problems: I'm stuck in the way to approach. I've realized that there were 2 ways: 1\. When the data in server changes, notice to all the clients. Web-service allows us to do this, but I don't know what clients I have to inform! 2\. Clients connect to the server, keep the connection alive and whenever there's a change, update data. However, if the client is the handheld, it will consume much power and data exchange over 3G network.

I know that's a complicated problem. So I just want to ask if there is an efficient way to approach? And if possible, anyone can give me one example of realtime web service like this? I've searched over many pages, but nothing's helpful. Can anyone give me some suggestions? Tkx!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:20:56.557

是否需要使用 Web 服务或 Axis？[否则，您可能会对WebSockets](http://en.wikipedia.org/wiki/Websocket)感兴趣。这些是通过普通 HTTP 的连接，提供两种方式的通信。您的客户端将连接到您的服务器，一旦有新数据可用，您的服务器就可以将数据推送到它知道的每个连接，从而通知所有连接的客户端。

# ios - 视图和视图控制器之间的 CGAffineTransformRotate 行为不一致

> ID：15597730
> 
> 赞同：0
> 
> 时间：2013-03-24T11:13:05.520
> 
> 标签：ios, rotation, cgaffinetransform

我正在尝试复制 Music.app 的音量拇指反射。我创建了一个[演示项目](http://cl.ly/2u361m041g12) 来微调数学。

起初，我在控制器中为视图设置动画以保持简单。在我完成之后，我决定创建一个自定义`ReflectedKnobView`，以便我可以在其他项目中使用它。我将相关代码从控制器复制到视图。

即使我完全复制了控制器中的代码（进行了相关修改），但是当我运行应用程序时，视图的行为与控制器不同。

在 中`ReflectedKnobView`，`CGAffineTransformRotate()`视图以不可预知的方式倾斜和变形。

我复制的代码：

```
- (void)updateValues
{    
CMRotationRate data = self.mManager.gyroData.rotationRate;

self.xLabel.text = [NSString stringWithFormat:@"%f", RadiansToDegrees(data.x)];
self.yLabel.text = [NSString stringWithFormat:@"%f", RadiansToDegrees(data.y)];
self.zLabel.text = [NSString stringWithFormat:@"%f",RadiansToDegrees(data.z)];

[UIView animateWithDuration:1/20 animations:^{
    self.level3Left.transform = CGAffineTransformRotate(self.level3Left.transform, ((data.y / 240) + (data.x / 200)));
    self.level3Right.transform = CGAffineTransformRotate(self.level3Right.transform, ((-1 * data.y) / 240) + (data.x / 200));
}];
} 
```

是s `level3<Right/Left>`。`UIImageView`

我怀疑它的`CGAffineTransformRotate()`行为不同，因为我在一种情况下在视图中调用它，在另一种情况下在控制器中调用它。

如果您不明白我在这里所说的话，请下载[演示项目并在设备上运行它。](http://cl.ly/2u361m041g12)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:40:15.390

我刚刚对另一个问题做了类似的回答， [如何在 iOS 中旋转视图时计算仿射平移参数？](https://stackoverflow.com/questions/15606179/how-do-i-calculate-the-affine-translation-parameters-when-rotating-a-view-in-ios)

这是一个重述：

你需要注意旋转的两件事——你的锚点（旋转发生的点）和视图或视图控制器的尺寸。

原观点：

![在此处输入图像描述](../Images/923340eba3fe51bcdad4fc4ee9a3ac3e.png)

如果你的锚点在角落里，它会像这样旋转：

![在此处输入图像描述](../Images/97a369bc2d5d2a2bebd24381235d49e1.png)

如果你的锚点在中间，它会像这样旋转：

![在此处输入图像描述](../Images/aa7afaa727e7ce1b4d06c68046b498a0.png)

如果你有一个方形层、视图或视图控制器，它往往会很好地旋转。矩形视图在旋转时似乎会做一些奇怪的事情，但如果您知道大小差异，您可以对其进行调整。

# java - 使用 JUI 检测图像中的黑色圆圈（不仅仅是像素）

> ID：15597732
> 
> 赞同：1
> 
> 时间：2013-03-24T11:13:09.530
> 
> 标签：java, imaging

我有一个带有黑色圆圈的图像。

该图像是调查表的扫描副本，非常类似于 OMR 问卷表。

`JUI`我想使用（如果需要任何其他api）检测已经变黑的圆圈

我在搜索时有几个例子，但它们没有给我准确的结果。

我试过.. *UDAI，Moodle* ...等...

然后我决定自己做。我能够检测到黑色像素，但如下所示。

```
BufferedImage mapa = BMPDecoder.read(new File("testjui.bmp"));

             final int xmin = mapa.getMinX();
             final int ymin = mapa.getMinY();

             final int ymax = ymin + mapa.getHeight();
             final int xmax = xmin + mapa.getWidth();

             for (int i = xmin;i<xmax;i++)
             {
                for (int j = ymin;j<ymax;j++)
                {

                 int pixel = mapa.getRGB(i, j);

                 if ((pixel & 0x00FFFFFF) == 0)
                 {
                     System.out.println("("+i+","+j+")");
                 }
                }
             } 
```

这给了我所有黑色像素的坐标，但我无法确定它是否是一个圆圈。

我怎样才能确定它是否是一个圆圈。

**2]**另外我想知道扫描的图像是否倾斜......我知道 Udai api 会处理这个问题，但由于某种原因，我无法让我的调查模板与该代码一起运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T02:02:12.530

所以如果我理解正确，你有代码可以挑选出黑色像素，所以现在你有了所有黑色像素的坐标，你想确定所有落在一个圆圈上的像素。

我的方法是分两个步骤。

1）对像素进行聚类。创建一个名为 Cluster 的类，其中包含一个点列表，并使用您的聚类算法将所有点放在正确的集群中。

2) 确定哪些簇是圆形。为此，请找到每个集群中所有点的中点（只需取所有点的平均值）。然后找到距中心的最小和最大距离，它们之间的差异应该小于文件中圆的最大厚度。这些将为您提供圆内包含的最内圈和最外圈的半径。现在使用圆方程 x^2 + y^2 = 半径，将半径设置为之前找到的最大值和最小值之间的值，以找到集群应包含的点。如果您的集群包含这些，则它是一个圆圈。

当然，其他要考虑的因素是您的形状是否近似椭圆而不是圆形，在这种情况下，您应该使用椭圆方程。此外，如果您的文件包含类似圆形的形状，您将需要编写额外的代码来排除这些形状。另一方面，如果您所有的圆圈大小完全相同，您可以通过让算法仅搜索该大小的圆圈来减少需要完成的工作。

我希望我能有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:24:10.737

为了回答你的第一个问题，我创建了一个类来检查图像是否包含一个非黑色填充的黑色轮廓圆圈。这个类是实验性的，它并不总是提供准确的结果，请随意编辑它并纠正你可能遇到的错误。设置器不检查空值或超出范围的值。

```
import java.awt.Point;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import javax.imageio.ImageIO;

/**
 * Checks weather an image contains a single non black filled black outlined circle<br />
 * This class is experimental, it does not provide exact results all the time, feel free to edit it and to correct
 * the bugs you might encounter.
 * @author      Ahmed KRAIEM
 * @version     0.9 alpha
 * @since       2013-04-03
 */
public class CircleChecker {

    private BufferedImage image;

    /**
     * Points that are equal to the calculated radius±<code>radiusesErrorMargin%</code> are not considered rogue points.<br />
     * <code>radiusesErrorMargin</code> must be <code>>0 && <1</code>
     */
    private double radiusesErrorMargin = 0.2;

    /**
     * A shape that has fewer than roguePointSensitivity% of rogue points is considered a circle.<br />
     * <code>roguePointSensitivity</code> must be <code>>0 && <1</code>
     */
    private double roguePointSensitivity = 0.05;
    /**
     * The presumed circle is divided into <code>angleCompartimentPrecision</code> parts,<br />
     * each part must have <code>minPointsPerCompartiment</code> points
     * <code>angleCompartimentPrecision</code> must be <code>> 0</code>
     */
    private int angleCompartimentPrecision = 50;
    /**
     * The minimum number of points requiered to declare a part valid.<br />
     * <code>minPointsPerCompartiment</code> must be <code>> 0</code>
     */
    private int minPointsPerCompartiment = 20;

    public CircleChecker(BufferedImage image) {
        super();
        this.image = image;
    }

    public CircleChecker(BufferedImage image, double radiusesErrorMargin,
            int minPointsPerCompartiment, double roguePointSensitivity,
            int angleCompartimentPrecision) {
        this(image);
        this.radiusesErrorMargin = radiusesErrorMargin;
        this.minPointsPerCompartiment = minPointsPerCompartiment;
        this.roguePointSensitivity = roguePointSensitivity;
        this.angleCompartimentPrecision = angleCompartimentPrecision;
    }

    public BufferedImage getImage() {
        return image;
    }

    public void setImage(BufferedImage image) {
        this.image = image;
    }

    public double getRadiusesErrorMargin() {
        return radiusesErrorMargin;
    }

    public void setRadiusesErrorMargin(double radiusesErrorMargin) {
        this.radiusesErrorMargin = radiusesErrorMargin;
    }

    public double getMinPointsPerCompartiment() {
        return minPointsPerCompartiment;
    }

    public void setMinPointsPerCompartiment(int minPointsPerCompartiment) {
        this.minPointsPerCompartiment = minPointsPerCompartiment;
    }

    public double getRoguePointSensitivity() {
        return roguePointSensitivity;
    }

    public void setRoguePointSensitivity(double roguePointSensitivity) {
        this.roguePointSensitivity = roguePointSensitivity;
    }

    public int getAngleCompartimentPrecision() {
        return angleCompartimentPrecision;
    }

    public void setAngleCompartimentPrecision(int angleCompartimentPrecision) {
        this.angleCompartimentPrecision = angleCompartimentPrecision;
    }

    /**
     * 
     * @return true if the image contains no more than <code>roguePointSensitivity%</code> rogue points
     * and all the parts contain at least <code>minPointsPerCompartiment</code> points.
     */
    public boolean isCircle() {
        List<Point> list = new ArrayList<>();
        final int xmin = image.getMinX();
        final int ymin = image.getMinY();

        final int ymax = ymin + image.getHeight();
        final int xmax = xmin + image.getWidth();

        for (int i = xmin; i < xmax; i++) {
            for (int j = ymin; j < ymax; j++) {

                int pixel = image.getRGB(i, j);

                if ((pixel & 0x00FFFFFF) == 0) {
                    list.add(new Point(i, j));
                }
            }
        }
        if (list.size() == 0)
            return false;
        double diameter = -1;
        Point p1 = list.get(0);
        Point across = null;
        for (Point p2 : list) {
            double d = distance(p1, p2);
            if (d > diameter) {
                diameter = d;
                across = p2;
            }
        }
        double radius = diameter / 2;
        Point center = center(p1, across);
        int diffs = 0;

        int diffsUntilError = (int) (list.size() * roguePointSensitivity);
        double minRadius = radius - radius * radiusesErrorMargin;
        double maxRadius = radius + radius * radiusesErrorMargin;

        int[] compartiments = new int[angleCompartimentPrecision];

        for (int i=0; i<list.size(); i++) {
            Point p = list.get(i);
             double calRadius = distance(p, center);
             if (calRadius>maxRadius || calRadius < minRadius)
                 diffs++;
             else{
                 //Angle
                 double angle = Math.atan2(p.y -center.y,p.x-center.x);
                 //angle is between -pi and pi
                 int index = (int) ((angle + Math.PI)/(Math.PI * 2 / angleCompartimentPrecision));
                 compartiments[index]++;
             }
             if (diffs >= diffsUntilError){
                 return false;
             }
        }
        int sumCompartiments = list.size() - diffs;
        for(int comp : compartiments){
            if (comp < minPointsPerCompartiment){
                return false;
            }
        }

        return true;
    }

    private double distance(Point p1, Point p2) {
        return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));
    }

    private Point center(Point p1, Point p2) {
        return new Point((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);
    }

    public static void main(String[] args) throws IOException {
        BufferedImage image = ImageIO.read(new File("image.bmp"));

        CircleChecker cc = new CircleChecker(image);

        System.out.println(cc.isCircle());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:33:27.600

您需要在一个圆的外观模板中进行编程，然后使其可扩展以适应不同的圆大小。

例如半径为 3 的圆将是：

```
 o
 ooo
  o 
```

这假设您需要找到一组有限的圆圈，可能高达 5x5 或 6x6，这是可行的。

或者您可以使用：[中点圆算法](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)
这将涉及找到所有黑色像素组，然后为每个像素选择中间像素。
应用此算法，使用外部像素作为圆的大小的指导。
找出黑色/预期黑色像素之间的差异。
如果黑色与预期黑色的比率足够高，则它是一个黑色圆圈，您可以将其删除/变白。

# javascript - 过滤搜索

> ID：15597736
> 
> 赞同：12
> 
> 时间：2013-03-24T11:13:27.730
> 
> 标签：javascript, jquery, search, html-lists, textinput

我也有一个用户列表：

```
<ul>
<li class="thumb selectable arrow light" style="margin-bottom:-5px;"
data-image="http://cdn.tapquo.com/lungo/icon-144.png">
<strong class="name">Peter <font data-count="0" style="position:relative;top:-2px;"> </font></strong> 
<small class="description">Hi!</small> 
</li>
...
</ul> 
```

我想要的是每次您写一封信时的文本输入，以仅显示以该字母开头的用户或他们可能有名字的用户。我能做到吗？它与 jquery 一起使用，但不是...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-24T11:19:56.923

这是基于纯 JavaScript 中的值`input`过滤 a的 a。`<ul>`它通过处理`onkeyup`然后获取`<li>`s 并将它们的内部元素`.name`与过滤器文本进行比较来工作。

[jsFiddle](http://jsfiddle.net/BJ5Vu/63/)

![在此处输入图像描述](../Images/4392c3969eb2055934d78c1cd5f52e8f.png)

```
var input = document.getElementById('input');
input.onkeyup = function () {
    var filter = input.value.toUpperCase();
    var lis = document.getElementsByTagName('li');
    for (var i = 0; i < lis.length; i++) {
        var name = lis[i].getElementsByClassName('name')[0].innerHTML;
        if (name.toUpperCase().indexOf(filter) == 0) 
            lis[i].style.display = 'list-item';
        else
            lis[i].style.display = 'none';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T01:39:53.040

因此，您在这样的无序列表中有一组列表项。

```
<div class="some-input-field-class">
   <input type="text" name="filter" id="filter">
   <label for="filter">Filter Names</label>
</div>

<ul class="my-user-collection">
  <li class="thumb selectable arrow light" style="margin-bottom:-5px;"
  data-image="http://cdn.tapquo.com/lungo/icon-144.png">
  <strong class="name">Peter <font data-count="0" style="position:relative;top:-2px;"> </font></strong> 
  <small class="description">Hi!</small> 
  </li>
  ...
</ul> 
```

您可以将其添加到您的 javascript 文件中。但是您也需要加载事件侦听器。你可能有一些事件，所以只做你需要做的。也许将它添加到另一个函数中，您可以在其中加载其余的事件侦听器。

```
// Load the event listener
document.querySelector('#filter').addEventListener('keyup', filterNames); 
```

通过定位类来迭代 li 的函数，迭代数组，因为我们使用 querySelectorAll 而不是 getElementByID。-1 表示不匹配。

```
function filterNames(e) {
  const text = e.target.value.toLowerCase();
  document.querySelectorAll('.selectable').forEach(
    function(name) {
      let item = name.firstChild.textContent;
      if (item.toLowerCase().indexOf(text) != -1) {
        name.style.display = 'block';
      } else {
        name.style.display = 'none';
      }
    }
  );
} 
```

# ribbon-control - VS 2012 RibbonButton 打开表单

> ID：15597737
> 
> 赞同：0
> 
> 时间：2013-03-24T11:13:32.620
> 
> 标签：ribbon-control

你如何获得一个 RibbonButton 来打开一个表单（比如说 Form1）？RibbonButton 上有一个名为“Click”的点击回调，但我不知道该怎么做。我猜想在 VB 窗口中需要进行一些操作，但我不知道是什么。

MSDN 库建议使用“Event Click As RibbonControlEventHandler”，这很好，但是你用它做什么呢？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:42:03.740

好的，我刚刚得到了一个简单的版本。事实证明，默认情况下该按钮只有 4x4 像素，您无法看到它来单击它 - 不确定这是否也是您的问题。无论如何，这就是我所做的......

我有一个带有 Ribbon 和 RibbonButton 的主窗口 - 大小和颜色，所以我可以看到它

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Ribbon x:Name="RibbonWin"  SelectedIndex="0">
            <RibbonButton x:Name="btnOne" Height="32" Width="32">
                <RibbonButton.Background>
                    <SolidColorBrush Color="Red"/>
                </RibbonButton.Background>
            </RibbonButton>
        </Ribbon>
    </Grid>
</Window> 
```

然后我添加了第二个窗口以显示在点击事件上

```
<Window x:Class="Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <Grid>
    </Grid>
</Window> 
```

最后，我在主窗口中为 RibbonButton 添加了一个 Click 处理程序

```
Private Sub btnOne_Click(sender As Object, e As RoutedEventArgs) Handles btnOne.Click
    Dim wnd As Window1 = New Window1
    wnd.ShowDialog()
End Sub 
```

现在一切都按预期工作。这有帮助吗？

# python - Boost Python Hello World 示例再次无法在 Python 中运行

> ID：15597738
> 
> 赞同：1
> 
> 时间：2013-03-24T11:13:49.623
> 
> 标签：python, boost, dll, boost-python, pythonpath

我和这里的人有同样的问题

[Boost Python Hello World 示例在 Python 中不起作用](https://stackoverflow.com/questions/11036319/boost-python-hello-world-example-not-working-in-python)

谁解决了他的问题，但没有说明如何解决。那里的帖子已经很老了，在也在那里发布之后，我现在在这里创建一个新问题，以使事情有所更新。所以... ：

我的配置：**windows 8 62bits**，python 2.7.3 32 bits，visual studio 2010 Ultimate

我跟着

[http://www.boost.org/doc/libs/1_53_0/libs/python/doc/tutorial/doc/html/python/exposing.html](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/tutorial/doc/html/python/exposing.html)

我在 Visual Studio 中创建了一个名为 CLIB 的 win32application 项目，并勾选了“dll”而不是“导出符号”。

在属性中的 VC++ 目录中，我放了：

C:\Python27x86\include;C:\boost\boost_1_53_0;$(IncludePath)

对于包含目录和

C:\boost\boost_1_53_0\stage\lib;C:\Python27x86\libs;$(LibraryPath)

用于库目录。

在 CLIB.cpp 我把

```
// CLIB.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"
#include <iostream>
#include <string>
#include <boost/python.hpp>

using namespace boost::python;

struct World
{
    void set(std::string msg) { this->msg = msg; }
    std::string greet() { return msg; }
    std::string msg;
};

BOOST_PYTHON_MODULE(hello)
{
    boost::python::class_<World>("World")
        .def("greet", &World::greet)
        .def("set", &World::set)
        ;
} 
```

我尝试添加或不添加

```
#define BOOST_PYTHON_STATIC_LIB 
```

然后我在调试模式下编译（成功），输出.dll（或.pyd，我通过在项目的“配置属性”中的“通用”中将目标扩展名从.dll修改为.pyd都尝试过，但都没有成功) CLIB.dll 位于我也将其路径添加到 PYTHONPATH 的目录中。我什至尝试将一个空白的**init** .py 放在与 dll 相同的目录中，而且，无论我做什么，我都无法做到

```
import hello 
```

在 python 脚本中（使用 notepad++ 或 pyscripter 32 位从新鲜创建）。因此，如果有人可以提供准确的帮助，那将是完美的。

多谢。

////////////////////// 编辑1 /////////////////// /////

同时我看到python 2.7是用mvs2008编译的，所以抹掉一切，安装python 3.3，用python 3.3重建boost和boost.python，然后重试，但是......结果一样......

////////////////////// 编辑2 /////////////////// /////

正如建议的那样，使用非常冗长的 -vv 命令运行 python 脚本，结果如​​下：

```
PS C:\Users\TheUser\Desktop\CLIB\Release> python -vv .\script.py
import _frozen_importlib # frozen
import imp # builtin
import sys # builtin
# installing zipimport hook
import 'zipimport' # <class '_frozen_importlib.BuiltinImporter'>
# installed zipimport hook
# C:\Python33x86\Lib\encodings\__pycache__\__init__.cpython-33.pyc matches C:\Python33x86\Lib\encodings\__init__.py
# code object from C:\Python33x86\Lib\encodings\__pycache__\__init__.cpython-33.pyc
# C:\Python33x86\Lib\__pycache__\codecs.cpython-33.pyc matches C:\Python33x86\Lib\codecs.py
# code object from C:\Python33x86\Lib\__pycache__\codecs.cpython-33.pyc
import '_codecs' # <class '_frozen_importlib.BuiltinImporter'>
import 'codecs' # <_frozen_importlib.SourceFileLoader object at 0x01E50870>
# C:\Python33x86\Lib\encodings\__pycache__\aliases.cpython-33.pyc matches C:\Python33x86\Lib\encodings\aliases.py
# code object from C:\Python33x86\Lib\encodings\__pycache__\aliases.cpython-33.pyc
import 'encodings.aliases' # <_frozen_importlib.SourceFileLoader object at 0x01E91B90>
import 'encodings' # <_frozen_importlib.SourceFileLoader object at 0x01E503F0>
# C:\Python33x86\Lib\encodings\__pycache__\mbcs.cpython-33.pyc matches C:\Python33x86\Lib\encodings\mbcs.py
# code object from C:\Python33x86\Lib\encodings\__pycache__\mbcs.cpython-33.pyc
import 'encodings.mbcs' # <_frozen_importlib.SourceFileLoader object at 0x01E9E730>
# C:\Python33x86\Lib\encodings\__pycache__\utf_8.cpython-33.pyc matches C:\Python33x86\Lib\encodings\utf_8.py
# code object from C:\Python33x86\Lib\encodings\__pycache__\utf_8.cpython-33.pyc
import 'encodings.utf_8' # <_frozen_importlib.SourceFileLoader object at 0x01E9E8D0>
# C:\Python33x86\Lib\encodings\__pycache__\latin_1.cpython-33.pyc matches C:\Python33x86\Lib\encodings\latin_1.py
# code object from C:\Python33x86\Lib\encodings\__pycache__\latin_1.cpython-33.pyc
import 'encodings.latin_1' # <_frozen_importlib.SourceFileLoader object at 0x01E9E9B0>
# C:\Python33x86\Lib\__pycache__\io.cpython-33.pyc matches C:\Python33x86\Lib\io.py
# code object from C:\Python33x86\Lib\__pycache__\io.cpython-33.pyc
# C:\Python33x86\Lib\__pycache__\abc.cpython-33.pyc matches C:\Python33x86\Lib\abc.py
# code object from C:\Python33x86\Lib\__pycache__\abc.cpython-33.pyc
# C:\Python33x86\Lib\__pycache__\_weakrefset.cpython-33.pyc matches C:\Python33x86\Lib\_weakrefset.py
# code object from C:\Python33x86\Lib\__pycache__\_weakrefset.cpython-33.pyc
import '_weakrefset' # <_frozen_importlib.SourceFileLoader object at 0x01EA7150>
import 'abc' # <_frozen_importlib.SourceFileLoader object at 0x01E9EC30>
import 'io' # <_frozen_importlib.SourceFileLoader object at 0x01E9EB10>
# C:\Python33x86\Lib\encodings\__pycache__\cp850.cpython-33.pyc matches C:\Python33x86\Lib\encodings\cp850.py
# code object from C:\Python33x86\Lib\encodings\__pycache__\cp850.cpython-33.pyc
import 'encodings.cp850' # <_frozen_importlib.SourceFileLoader object at 0x01EA7F50>
# C:\Python33x86\Lib\__pycache__\site.cpython-33.pyc matches C:\Python33x86\Lib\site.py
# code object from C:\Python33x86\Lib\__pycache__\site.cpython-33.pyc
# C:\Python33x86\Lib\__pycache__\os.cpython-33.pyc matches C:\Python33x86\Lib\os.py
# code object from C:\Python33x86\Lib\__pycache__\os.cpython-33.pyc
import 'errno' # <class '_frozen_importlib.BuiltinImporter'>
# C:\Python33x86\Lib\__pycache__\stat.cpython-33.pyc matches C:\Python33x86\Lib\stat.py
# code object from C:\Python33x86\Lib\__pycache__\stat.cpython-33.pyc
import 'stat' # <_frozen_importlib.SourceFileLoader object at 0x01EBD190>
# C:\Python33x86\Lib\__pycache__\ntpath.cpython-33.pyc matches C:\Python33x86\Lib\ntpath.py
# code object from C:\Python33x86\Lib\__pycache__\ntpath.cpython-33.pyc
# C:\Python33x86\Lib\__pycache__\genericpath.cpython-33.pyc matches C:\Python33x86\Lib\genericpath.py
# code object from C:\Python33x86\Lib\__pycache__\genericpath.cpython-33.pyc
import 'genericpath' # <_frozen_importlib.SourceFileLoader object at 0x01EBDE50>
import 'ntpath' # <_frozen_importlib.SourceFileLoader object at 0x01EBDAD0>
# C:\Python33x86\Lib\collections\__pycache__\__init__.cpython-33.pyc matches C:\Python33x86\Lib\collections\__init__.py
# code object from C:\Python33x86\Lib\collections\__pycache__\__init__.cpython-33.pyc
# C:\Python33x86\Lib\collections\__pycache__\abc.cpython-33.pyc matches C:\Python33x86\Lib\collections\abc.py
# code object from C:\Python33x86\Lib\collections\__pycache__\abc.cpython-33.pyc
import 'collections.abc' # <_frozen_importlib.SourceFileLoader object at 0x027C3FB0>
import '_collections' # <class '_frozen_importlib.BuiltinImporter'>
import 'operator' # <class '_frozen_importlib.BuiltinImporter'>
# C:\Python33x86\Lib\__pycache__\keyword.cpython-33.pyc matches C:\Python33x86\Lib\keyword.py
# code object from C:\Python33x86\Lib\__pycache__\keyword.cpython-33.pyc
import 'keyword' # <_frozen_importlib.SourceFileLoader object at 0x027E1330>
# C:\Python33x86\Lib\__pycache__\heapq.cpython-33.pyc matches C:\Python33x86\Lib\heapq.py
# code object from C:\Python33x86\Lib\__pycache__\heapq.cpython-33.pyc
import 'itertools' # <class '_frozen_importlib.BuiltinImporter'>
# C:\Python33x86\Lib\__pycache__\bisect.cpython-33.pyc matches C:\Python33x86\Lib\bisect.py
# code object from C:\Python33x86\Lib\__pycache__\bisect.cpython-33.pyc
import '_bisect' # <class '_frozen_importlib.BuiltinImporter'>
import 'bisect' # <_frozen_importlib.SourceFileLoader object at 0x027E1EF0>
import '_heapq' # <class '_frozen_importlib.BuiltinImporter'>
import 'heapq' # <_frozen_importlib.SourceFileLoader object at 0x027E1910>
# C:\Python33x86\Lib\__pycache__\weakref.cpython-33.pyc matches C:\Python33x86\Lib\weakref.py
# code object from C:\Python33x86\Lib\__pycache__\weakref.cpython-33.pyc
import 'weakref' # <_frozen_importlib.SourceFileLoader object at 0x027E1950>
# C:\Python33x86\Lib\__pycache__\reprlib.cpython-33.pyc matches C:\Python33x86\Lib\reprlib.py
# code object from C:\Python33x86\Lib\__pycache__\reprlib.cpython-33.pyc
import 'reprlib' # <_frozen_importlib.SourceFileLoader object at 0x027E9CF0>
import 'collections' # <_frozen_importlib.SourceFileLoader object at 0x01EC0CD0>
# C:\Python33x86\Lib\__pycache__\copyreg.cpython-33.pyc matches C:\Python33x86\Lib\copyreg.py
# code object from C:\Python33x86\Lib\__pycache__\copyreg.cpython-33.pyc
import 'copyreg' # <_frozen_importlib.SourceFileLoader object at 0x027EFD10>
import 'os' # <_frozen_importlib.SourceFileLoader object at 0x01EB3130>
# C:\Python33x86\Lib\__pycache__\re.cpython-33.pyc matches C:\Python33x86\Lib\re.py
# code object from C:\Python33x86\Lib\__pycache__\re.cpython-33.pyc
# C:\Python33x86\Lib\__pycache__\sre_compile.cpython-33.pyc matches C:\Python33x86\Lib\sre_compile.py
# code object from C:\Python33x86\Lib\__pycache__\sre_compile.cpython-33.pyc
import '_sre' # <class '_frozen_importlib.BuiltinImporter'>
# C:\Python33x86\Lib\__pycache__\sre_parse.cpython-33.pyc matches C:\Python33x86\Lib\sre_parse.py
# code object from C:\Python33x86\Lib\__pycache__\sre_parse.cpython-33.pyc
# C:\Python33x86\Lib\__pycache__\sre_constants.cpython-33.pyc matches C:\Python33x86\Lib\sre_constants.py
# code object from C:\Python33x86\Lib\__pycache__\sre_constants.cpython-33.pyc
import 'sre_constants' # <_frozen_importlib.SourceFileLoader object at 0x028054F0>
import 'sre_parse' # <_frozen_importlib.SourceFileLoader object at 0x027FD530>
import 'sre_compile' # <_frozen_importlib.SourceFileLoader object at 0x01EB3690>
# C:\Python33x86\Lib\__pycache__\functools.cpython-33.pyc matches C:\Python33x86\Lib\functools.py
# code object from C:\Python33x86\Lib\__pycache__\functools.cpython-33.pyc
import '_functools' # <class '_frozen_importlib.BuiltinImporter'>
import 'functools' # <_frozen_importlib.SourceFileLoader object at 0x027FD8D0>
import 're' # <_frozen_importlib.SourceFileLoader object at 0x01EBD5D0>
# C:\Python33x86\Lib\__pycache__\sysconfig.cpython-33.pyc matches C:\Python33x86\Lib\sysconfig.py
# code object from C:\Python33x86\Lib\__pycache__\sysconfig.cpython-33.pyc
import 'sysconfig' # <_frozen_importlib.SourceFileLoader object at 0x0280D9F0>
# C:\Python33x86\Lib\__pycache__\locale.cpython-33.pyc matches C:\Python33x86\Lib\locale.py
# code object from C:\Python33x86\Lib\__pycache__\locale.cpython-33.pyc
import '_locale' # <class '_frozen_importlib.BuiltinImporter'>
import 'locale' # <_frozen_importlib.SourceFileLoader object at 0x0281B810>
# C:\Python33x86\Lib\encodings\__pycache__\cp1252.cpython-33.pyc matches C:\Python33x86\Lib\encodings\cp1252.py
# code object from C:\Python33x86\Lib\encodings\__pycache__\cp1252.cpython-33.pyc
import 'encodings.cp1252' # <_frozen_importlib.SourceFileLoader object at 0x02825350>
import 'site' # <_frozen_importlib.SourceFileLoader object at 0x01EA4290>
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
import 'math' # <class '_frozen_importlib.BuiltinImporter'>
Traceback (most recent call last):
  File ".\script.py", line 2, in <module>
    import CLIB
  File "<frozen importlib._bootstrap>", line 1558, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1525, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 586, in _check_name_wrapper
  File "<frozen importlib._bootstrap>", line 497, in set_package_wrapper
  File "<frozen importlib._bootstrap>", line 510, in set_loader_wrapper
  File "<frozen importlib._bootstrap>", line 1130, in load_module
  File "<frozen importlib._bootstrap>", line 313, in _call_with_frames_removed
ImportError: DLL load failed: The specified module could not be found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:43:18.110

导入语句、扩展模块名称和扩展库名称之间似乎存在差异：

该[`BOOST_PYTHON_MODULE`](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/module.html#BOOST_PYTHON_MODULE-spec)宏定义了模块初始化函数。`CLIB.cpp`变化中

```
BOOST_PYTHON_MODULE（你好）
```

至

```
BOOST_PYTHON_MODULE( CLIB )
```

接下来，验证生成的输出库是否具有 CLIB 前缀。Python3.3 删除了对一些很少使用的模块名称变体的支持。根据[文档](http://docs.python.org/3/faq/windows.html#is-a-pyd-file-the-same-as-a-dll)，我建议先尝试`.pyd`文件扩展名，`.dll`如果`.pyd`不起作用则求助。因此，生成的库应该是`CLIB.pyd`.

最后，在尝试导入扩展时使用

```
import CLIB 
```

代替

```
import hello 
```

# iphone - 在 StoryBoard 中保存 UITabBar 设置

> ID：15597739
> 
> 赞同：0
> 
> 时间：2013-03-24T11:13:52.050
> 
> 标签：iphone, ios, uitabbarcontroller, storyboard, uitabbar

当我在 Xcode 中创建默认选项卡栏应用程序时，我得到了 Storyboard、AppDelegate 和两个用于默认选项卡的控制器。我想要实现的是在重新启动应用程序后保存最后打开的选项卡，例如我在第二个选项卡栏中做某事，我需要关闭应用程序。但是当我再次运行它时，它会自动在第二个选项卡中打开。

我在“iOS 5 Developer's cookbook”中看到您需要为此创建新方法（`tabBarController:didEndCustomizingViewControllers:changed:`），但我不知道将其放在哪里，因为我只有 AppDelegate 而整个 UITabBarController 没有控制器，我正在尝试这样做与故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:30:32.743

```
UITabBarController *tabbar = [[UITabBarController alloc] init];

// Set selected tab bar Number in UITabBarController Delegate Method
//    - (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController;
[[NSUserDefaults standardUserDefaults] setInteger:[tabbar selectedIndex] forKey:@"selectedIndex"];
[[NSUserDefaults standardUserDefaults] synchronize];

// Retrive the selectedIndex in Method
//    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
NSInteger selectedIndex = [[NSUserDefaults standardUserDefaults] integerForKey:@"selectedIndex"];
//Now set your selected Tabbar
[tabbar setSelectedIndex:selectedIndex]; 
```

# java - Java 科学计算器正则表达式

> ID：15597745
> 
> 赞同：1
> 
> 时间：2013-03-24T11:14:42.017
> 
> 标签：java, regex, arithmetic-expressions, integer-arithmetic

像这样的表达式 (3+2)+23/12-(43/54) 在 java 中的正则表达式是什么用户将无法放置右括号。如果创建了 3 次左括号，则用户只能放置 3 次右括号，以关闭由左括号打开的表达式。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:19:42.870

简而言之，使用标准正则表达式是不可能的。

正则表达式只能匹配所谓的[正则语言](http://en.wikipedia.org/wiki/Regular_language)，而匹配嵌套结构需要[更通用](http://en.wikipedia.org/wiki/Context-free_language)的[形式语言](http://en.wikipedia.org/wiki/Chomsky_hierarchy)。

请参阅[可以使用正则表达式匹配嵌套模式吗？](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)

但是，使用其他方法很容易做您需要的事情。例如，只需遍历字符串一次，计算括号：`+1`for`'('`和`-1`for `')'`。最后计数会告诉你有多少开括号：如果计数大于零，允许用户添加右括号；否则，不要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:22:23.030

这不是你可以用正则表达式表达的东西。

为此，您需要一个上下文无关语法。

另请参阅此处：

[http://en.wikipedia.org/wiki/Context-free_grammar](http://en.wikipedia.org/wiki/Context-free_grammar)

在“格式良好的括号”部分下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T11:34:48.117

您最好的选择是使用词法分析器和解析器。在 Java 世界中，最受欢迎的是 ANTLR 和 JavaCC。

首先以 Backus-Naur 形式 [BNF] 为您的计算器语言建模。然后翻译成您选择的词法分析器，并使用解析器对结果进行操作。

# couchdb - 如何访问 couchDb 中的帖子数据？

> ID：15597747
> 
> 赞同：0
> 
> 时间：2013-03-24T11:14:58.283
> 
> 标签：couchdb

CouchDb 有一个可用于更新函数的[req](http://docs.couchdb.org/en/1.3.x/json-structure.html#request-object)对象。如何从 req 对象访问我已发布到该更新函数的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:58:50.860

在花了很多时间尝试通过 req.body() 获取发布的数据之后，我最终决定将数据发布在查询字符串中。所有这些都可以在查询对象中使用。这个[链接](http://eclipsesource.com/blogs/2012/06/08/exploring-the-request-in-a-couchdb-show-function/)有助于调试什么实际包含的 req 对象。

[couchDb wiki](http://wiki.apache.org/couchdb/Document_Update_Handlers#Usage)也提供了类似的建议。

# matlab - 如何使用 uencode 量化信号，而不是正确地使用 udecode

> ID：15597749
> 
> 赞同：0
> 
> 时间：2013-03-24T11:15:35.227
> 
> 标签：matlab, math, signal-processing

我正在尝试用幅度 A（可能小于 1）量化信号。

```
u = uencode(y, N);
            d = udecode (u, N); 
```

“输入参数不足”它对我说。

我尝试在不使用 od udecode 函数的情况下执行此操作。

```
 y = this.y;
        maxy = max(y);
        u = uencode(y, N, maxy, 'signed');
        u = double(u);
        p = u / max(u);
        d = p * maxy;
        this.yQ = d;
        this.QErr = this.y - d; 
```

但这种方式对信号的重构效果不好。

# c# - 如何将具有 3 个 Internet 连接的 3 个文件上传到 ftp？

> ID：15597751
> 
> 赞同：0
> 
> 时间：2013-03-24T11:15:50.197
> 
> 标签：c#, networking, interface, video-streaming, load-balancing

我必须通过 3 个互联网连接绑定流式传输视频第一步我将视频拆分为秒文件
第二步我需要使用不同的网关每秒上传第三步我合并秒文件

我的问题如何选择指定网卡以C#语言上传指定文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:20:14.607

通常你不需要关心使用哪个网卡。如果一张卡有公共 IP，而第二张卡有私有 IP，则内部流量将通过这张卡，并通过互联网将流量传输到具有网关的卡。

# cuda - 内核启动失败

> ID：15597752
> 
> 赞同：0
> 
> 时间：2013-03-24T11:15:51.877
> 
> 标签：cuda, runtime-error, reduce

我在 Linux 系统和 Tesla C2075 机器上运行。我正在启动一个内核，它是缩减内核的修改版本。我的目标是找到大型数据集（结果）的平均值和逐步平均版本（time_avg）。请参阅下面的代码。

“result”和“time_avg”的大小相同，等于“nsamps”。“time_avg”包含数组结果的连续平均组。因此，前半部分包含每两个非重叠样本的平均值，之后的四分之一包含每四个非重叠样本的平均值，接下来的八分之一样本包含 8 个样本，依此类推。

```
__global__ void timeavg_mean(float *result, unsigned int *nsamps, float *time_avg, float *mean) {

__shared__ float temp[1024];
int ltid = threadIdx.x, gtid = blockIdx.x*blockDim.x + threadIdx.x, stride;
int start = 0, index;
unsigned int npts = *nsamps;

printf("here here\n");

// Store chunk of memory=2*blockDim.x (which is to be reduced) into shared memory
if ( (2*gtid) < npts ){
        temp[2*ltid] = result[2*gtid];
        temp[2*ltid+1] = result[2*gtid + 1]; 
}    
        for (stride=1; stride<blockDim.x; stride>>=1) {
                __syncthreads();
                if (ltid % (stride*2) == 0){ 
                  if ( (2*gtid) < npts ){
                        temp[2*ltid] += temp[2*ltid + stride];
                        index = (int)(start + gtid/stride);
                        time_avg[index] = (float)( temp[2*ltid]/(2.0*stride) );
                  }   
                }   
        start += npts/(2*stride);
        }   
__syncthreads();
if (ltid == 0)
{
        atomicAdd(mean, temp[0]);    
}
__syncthreads();
printf("%f\n", *mean);
} 
```

启动配置为 40 个块，512 个线程。数据集约为 40k 个样本。

在我的主代码中，我`cudaGetLastError()`在内核调用之后调用它并且它没有返回错误。内存分配和内存副本不返回错误。如果我在内核调用之后写入`cudaDeviceSynchronize()`（或 a`cudaMemcpy`检查均值的值），则程序在内核调用之后完全挂起。如果我删除它，程序运行并退出。在这两种情况下，我都得到“这里”的输出还是打印的平均值。我知道除非内核成功执行，否则 printf 不会打印。这与`__syncthreads()`递归有关吗？所有线程都会达到相同的深度，所以我认为可以检查。

这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:39:42.377

内核调用是异步的，如果内核成功启动，您的主机代码将继续运行并且您不会看到任何错误。内核运行期间发生的错误仅在您执行显式同步或调用导致隐式同步的函数后才会出现。
如果您的主机在同步时挂起，那么您的内核可能还没有完成运行——它要么正在运行某个无限循环，要么正在等待某个`__synchthreads()`或其他同步原语。
您的代码似乎包含一个无限循环：`for (stride=1; stride<blockDim.x; stride>>=1)`. 您可能想要向左而不是向右移动步幅：`stride<<=1`.

您提到了递归，但您的代码仅包含一个`__global__`函数，没有递归调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:51:41.707

你的内核有一个无限循环。将 for 循环替换为

```
for (stride=1; stride<blockDim.x; stride<<=1) { 
```

# c++ - 移动语义以避免临时对象创建

> ID：15597754
> 
> 赞同：4
> 
> 时间：2013-03-24T11:16:03.363
> 
> 标签：c++, c++11, operators, move-semantics

我正在尝试在大型对象之间进行操作，并尝试使用 r 值引用来避免临时对象创建。实验是下面的代码，但结果不是我预期的。

编码：

```
#include <iostream>
using namespace std;

struct A
{
    A() = default;
    A(const A& a) { cout << "copy ctor" << endl; }
    A(A&& a) { cout << "move ctor" << endl; }
    A &operator=(const A& a) { cout << "copy assign" << endl; return *this; }
    A &operator=(A&& a) { cout << "move assign" << endl; return *this; }
    A &operator*=(double s) { cout << "this = this *= s" << endl; return *this; }
    A operator*(double s) const { cout << "A = const this * s" << endl; return *this; }
    A &operator+=(const A &b) { cout << "this = this + const A&" << endl; return *this; }
    A operator+(const A &b) const { cout << "A = const this + const A&" << endl; return *this; }
    A &operator+(A &&b) const { cout << "A&& = const this + A&& --> "; return b += *this; }
};
A &operator+(A &&a, const A &b) { cout << "A&& = A&& + const A& --> "; return a += b; }
A &operator*(A &&a, double s) { cout << "A&& = A&& * s --> "; return a *= s; }

int main()
{
    A a,b,c,d;
    a = b + a * 4 + /*operator*(static_cast<A&&>(d), 2)*/ d * 2 + (A() + c) * 5;

    return 0;
} 
```

输出：

```
A&& = A&& + const A& --> this = this + const A&     // A() + c
A = const this * s                  // (...) * 5
copy ctor                       // ???
A = const this * s                  // d * 2
copy ctor                       // ???
A = const this * s                  // a * 4
copy ctor                       // ???
A&& = const this + A&& --> this = this + const A&   // (d*2) + (...)
A&& = const this + A&& --> this = this + const A&   // (a*4) + (...)
A&& = const this + A&& --> this = this + const A&   // b + (...)
copy assign                     // a = (...) 
```

我的期望：

```
A&& = A&& + const A& --> this = this + const A&     // A() + c
A&& = A&& * s --> this = this *= s          // (...) * 5
A&& = A&& * s --> this = this *= s          // (...) * 2    d is not used anymore, so I want to move semantics
A = const this * s      // a * 4    a is not used anymore, but I want to keep semantics
A&& = A&& + const A& --> this = this + const A& // (d*2) + (...)
A&& = A&& + const A& --> this = this + const A& // (a*4) + (...)
A&& = A&& + const A& --> this = this + const A& // b + (...)
move assign     // a = (...) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:52:02.580

这是一个更正确的版本，副本更少：

```
#include <iostream>
#include <utility>
using namespace std;

struct A
{
  A() = default;
  A(const A& a) { cout << "copy ctor" << endl; }
  A(A&& a) { cout << "move ctor" << endl; }
  A &operator=(const A& a) { cout << "copy assign" << endl; return *this; }
  A &operator=(A&& a) { cout << "move assign" << endl; return *this; }
  A &operator*=(double s) { cout << "this *= s" << endl; return *this; }
  A &operator+=(const A &b) { cout << "this += const A&" << endl; return *this; }
};

A&& operator+(A &&a, const A &b)
{ cout << "A&& + const A&" << endl; a+=b; return std::move(a); }

A&& operator+(A &&a, A &&b)
{ cout << "A&& + A&&" << endl; a+=b; return std::move(a); }

// I assume commutativity
A&& operator+(const A &a, A &&b)
{ cout << "const A& + A&&" << endl; b+=a; return std::move(b); }

A operator+(const A &a, const A &b)
{ cout << "const A& + const A&" << endl; A r(a); r+=b; return r; }

A&& operator*(A &&a, double s)
{ cout << "A&& * s" << endl; a*=s; return std::move(a); }

A operator*(const A& a, double s)
{ cout << "const A& * s" << endl; A r(a); r*=s; return r; }

int main()
{
  A a,b,c,d;
  a = b + a * 4 + d * 2 + (A() + c) * 5;

  return 0;
} 
```

这是（带注释的）输出，其中`t`s 是创建的临时对象：

```
 expression level    actual operations
                       ----------------    -----------------
const A& * s           t1 = a * 4
copy ctor                                  create t1 = copy a
this *= s                                  t1 *= 4
const A& + A&&         b + t1
this += const A&                           t1 += b
const A& * s           t2 = d * 2
copy ctor                                  create t2 = copy d
this *= s                                  t2 *= 2
A&& + A&&              t1 + t2
this += const A&                           t1 += t2
A&& + const A&         A() + c (note: A() is already a temporary)
this += const A&                           A() += c
A&& * s                A'() * 5
this *= s                                  A'() *= 5
A&& + A&&              t1 + A''()
this += const A&                           t1 += A''()
move assign            a = t1              a = t1 
```

我认为你不能期望它比整个表达式只有两个临时性更好。

关于您注释掉的代码：尝试`std::move(d)`而不是普通代码`d`，您将保护上述输出中的副本并将`d`临时对象的数量减少到一个。如果您还添加`std::move(a)`，则整个表达式的计算**没有一个临时的**！

另请注意，如果没有`std::move(d)`and `std::move(a)`，编译器不知道它应该/可以移动这些对象，因此任何最终移动它们的代码都是危险且完全错误的。

* * *

**更新：**我把我的想法变成了一个库，在[GitHub 上](http://github.com/d-frey/operators)找到它。有了这个，你的代码变得很简单：

```
#include <iostream>
using namespace std;

#include <df/operators.hpp>

struct A : df::commutative_addable< A >, df::multipliable< A, double >
{
  A() = default;
  A(const A& a) { cout << "copy ctor" << endl; }
  A(A&& a) { cout << "move ctor" << endl; }
  A &operator=(const A& a) { cout << "copy assign" << endl; return *this; }
  A &operator=(A&& a) { cout << "move assign" << endl; return *this; }
  A &operator*=(double s) { cout << "this *= s" << endl; return *this; }
  A &operator+=(const A &b) { cout << "this += const A&" << endl; return *this; }
}; 
```

同时仍然高效并避免任何不必要的临时工。享受！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T11:24:25.550

首先`A() + c`通过左值引用返回。这使得表达式本身成为左值。

> 如果结果类型是左值引用类型或对函数类型的右值引用，则函数调用是左值，如果结果类型是对对象类型的右值引用，则为 xvalue，否则为纯右值。

左值不能绑定到右值引用，所以`operator*`选择成员版本。您的非成员函数可能应该按值返回：

```
A operator+(A &&a, const A &b) { cout << "A&& = A&& + const A& --> "; return a += b; }
A operator*(A &&a, double s) { cout << "A&& = A&& * s --> "; return a *= s; } 
```

这会导致结果继续是引用临时对象的纯右值表达式。

其次，复制构造函数调用是由成员`operator`s按值返回引起的。这将导致对象的副本。例如，当`(...) * 5`返回时，它将复制`*this`出函数的值：

```
A operator*(double s) const { cout << "A = const this * s" << endl; return *this; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T11:23:48.840

您的运算符被实现为**按值**/**按左值引用**返回。这导致链式操作接受对象副本（因此是复制 ctor）或左值引用。

例如`b + a * 4`等于`b.operator+(a.operator*(4))`。的输入`operator+`将是对象的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T12:54:48.487

这是您的方法的签名：

```
struct A
{
    A() = default;
    A(const A& a);
    A(A&& a);
    A &operator=(const A& a);
    A &operator=(A&& a);
    A &operator*=(double s);
    A operator*(double s) const;
    A &operator+=(const A &b);
    A operator+(const A &b) const;
    A &operator+(A &&b) const;
};
A &operator+(A &&a, const A &b);
A &operator*(A &&a, double s); 
```

问题就出现在这里。首先，free`operator+`应该返回一个`A&&`它传入的值，以避免将右值引用更改为左值。也是如此`A &A::operator+(A &&b) const;`——它应该返回一个`A&&`.

接下来，您的自由运算符链接到`+=`运算符。这是一个可爱的技术：

```
template<typename T>
A&&operator+(A &&a, T&&b){ return std::move(a+=std::forward<T>(b)); }
template<typename T>
A&&operator*(A &&a, T&&b){ return std::move(a*=std::forward<T>(b)); } 
```

我们将我们的论点蒙蔽到`+=`操作中。

`auto`使用返回值技术可以使这更健壮，更容易出错：

```
template<typename T>
auto operator+(A &&a, T&&b)->declval(std::move(a+=std::forward<T>(b)))
{ return std::move(a+=std::forward<T>(b)); }
template<typename T>
auto operator*(A &&a, T&&b)->declval(std::move(a*=std::forward<T>(b)))
{ return std::move(a*=std::forward<T>(b)); } 
```

使用 SFINAE 在解析堆栈中将错误提高 1 步。（注意`&&`in`T&&`和`A&&`有完全不同的含义 -- `T&&`'s`&&`用于类型推导上下文中，因此`T`可以绑定到任何引用类型，而`A&&`'s`&&`没有用于类型推导上下文中，因此它意味着`A&&`绑定到右值。）。

接下来是一个标记更重的版本，为了正确性和效率，做了一些基本的修改。我跟踪该字段中每个实例的历史`name`——对该字段的操作不是“真实的”，它的值表示创建给定实例所需的“计算”。

我假设移动操作会移动这种状态。

```
#include <iostream>
#include <utility>

struct A;
A &operator+=(A& a, std::string op);
A&&operator+=(A&& a, std::string op);

struct recurse_nl {
   int& count() {
      static int v = 0;
      return v;
   }
   recurse_nl(){if (++count()>1) std::cout << " --> "; else if (count()>2) std::cout << " --> [";}
   ~recurse_nl(){if (--count() == 0) std::cout <<"\n"; else if (count()>1) std::cout << "]"; }
};
struct A
{
    std::string name;
    A() = delete;
    A(std::string n):name(n) { recurse_nl _; std::cout << "AUTO ctor{"<<name<<"}";};
    A(const A& o):name(o.name+"_c&") { recurse_nl _; std::cout << "COPY ctor{"<<name<<"}(const&)"; }
    A(A&& o):name(std::move(o.name)) { recurse_nl _; std::cout << "ctor{"<<name<<"}(&&)"; }
    A(A& o):name(o.name+"_&") { recurse_nl _; std::cout << "COPY ctor{"<<name<<"}(&)"; }
    A &operator=(const A& rhs) { recurse_nl _; std::cout << "COPY assign{"<<name<<"}={"<<rhs.name<<"}"; this->name = rhs.name; return *this; }
    A &operator=(A&& rhs) { recurse_nl _; std::cout << "move assign{"<<name<<"}={"<<rhs.name<<"}"; this->name = std::move(rhs.name); return *this; }
    A &operator*=(double d) { recurse_nl _; std::cout << "this{"<<name<<"} *= s{"<<d<<"}"; return (*this) += "(*#)"; }
    A operator*(double d) const { recurse_nl _; std::cout << "A = const this{"<<name<<"} * s{"<<d<<"}"; A tmp(*this); return std::move(tmp*=d); }
    A &operator+=(const A &rhs) { recurse_nl _; std::cout << "this{"<<name<<"} += const A&{"<<rhs.name<<"}"; return ((*this)+="(+=")+=rhs.name+")"; }
    A operator+(const A &rhs) const { recurse_nl _; std::cout << "A = const this{"<<name<<"} + const A&{"<<rhs.name<<"}"; return std::move(A(*this)+="(+)"); }
    A&& operator+(A &&rhs) const { recurse_nl _; std::cout << "A&& = const this{"<<name<<"} + A&&{"<<rhs.name<<"}"; return std::move(rhs += *this); }
    ~A() { recurse_nl _; std::cout << "dtor{"<<name<<"}"; }
};

A &operator+=(A& a, std::string op)
{ a.name+=op; return a; }
A&&operator+=(A&& a, std::string op)
{ a.name+=op; return std::move(a); }

template<typename T>
struct ref_type_of {
   std::string value() const { return "value"; }
};
template<typename T>
struct ref_type_of<T&> {
   std::string value() const { return "&"; }
};
template<typename T>
struct ref_type_of<T&&> {
   std::string value() const { return "&&"; }
};
template<typename T>
struct ref_type_of<T const&&> {
   std::string value() const { return " const&&"; }
};
template<typename T>
struct ref_type_of<T const&> {
   std::string value() const { return " const&"; }
};
template<typename T>
std::string ref_type() { return ref_type_of<T>().value(); }

template<typename T>
A&& operator+(A &&a, T&& b) { recurse_nl _; std::cout << "A&&{"<<a.name<<"} = A&&{"<<a.name<<"} + T" << ref_type<T>(); return std::move(a += std::forward<T>(b)); }
template<typename T>
A&& operator*(A &&a, T&& b) { recurse_nl _; std::cout << "A&&{"<<a.name<<"} = A&&{"<<a.name<<"} * T" << ref_type<T>(); return std::move(a *= std::forward<T>(b)); }

void test1()
{
    A a("a"),b("b"),c("c"),d("d");
    a = b + a * 4 + d * 2 + (A("tmp") + c) * 5;
}
int main()
{
    std::cout << "test1\n";
    test1();
    return 0;
} 
```

我在[现场工作空间](http://liveworkspace.org/code/2VwJIX%2452)玩过这个，这是输出：

```
stdout:
test1
AUTO ctor{a}
AUTO ctor{b}
AUTO ctor{c}
AUTO ctor{d}
AUTO ctor{tmp}
A&&{tmp} = A&&{tmp} + T& --> this{tmp} += const A&{c}
A&&{tmp(+=c)} = A&&{tmp(+=c)} * Tvalue --> this{tmp(+=c)} *= s{5}
A = const this{d} * s{2} --> COPY ctor{d_c&}(const&) --> this{d_c&} *= s{2} --> ctor{d_c&(*#)}(&&) --> dtor{}
A = const this{a} * s{4} --> COPY ctor{a_c&}(const&) --> this{a_c&} *= s{4} --> ctor{a_c&(*#)}(&&) --> dtor{}
A&& = const this{b} + A&&{a_c&(*#)} --> this{a_c&(*#)} += const A&{b}
A&&{a_c&(*#)(+=b)} = A&&{a_c&(*#)(+=b)} + Tvalue --> this{a_c&(*#)(+=b)} += const A&{d_c&(*#)}
A&&{a_c&(*#)(+=b)(+=d_c&(*#))} = A&&{a_c&(*#)(+=b)(+=d_c&(*#))} + Tvalue --> this{a_c&(*#)(+=b)(+=d_c&(*#))} += const A&{tmp(+=c)(*#)}
move assign{a}={a_c&(*#)(+=b)(+=d_c&(*#))(+=tmp(+=c)(*#))}
dtor{a}
dtor{d_c&(*#)}
dtor{tmp(+=c)(*#)}
dtor{d}
dtor{c}
dtor{b}
dtor{a_c&(*#)(+=b)(+=d_c&(*#))(+=tmp(+=c)(*#))} 
```

这非常冗长，但几乎演示了每个操作。

我修改了您的代码，以便在需要`operator+`时`operator*`实际创建一个新对象。代价高昂的操作（创建新对象和复制）通过使用`AUTO`和突出显示`COPY`——如您所见，有最初的 4 个字母对象、`tmp`表达式中的对象和由 . 创建的两个副本`operator*(double)`。

我们可以用这个摆脱一些副本：

```
a = b + std::move(a) * 4 + std::move(d) * 2 + (A("tmp") + c) * 5; 
```

但是，我们最终还是要销毁 3 个具有非平凡状态的对象，因为我们这样做了两次`operator+(A&&, A&&)`，而且我并不认为这个操作会特别有效。

如果是，我们可以添加这个运算符：

```
A &operator+=(A &&rhs) { recurse_nl _; std::cout << "this{"<<name<<"} += A&&{"<<rhs.name<<"}"; return ((*this)+="(+=")+=std::move(rhs.name)+")"; } 
```

结果输出表明只有一个具有非平凡状态的对象被销毁。

现场工作区的最终版本在[这里](http://liveworkspace.org/code/2VwJIX%2451)。

（该`recurse_nl`对象用于递归跟踪。在基本级别，它在函数末尾打印一个换行符。在更深的递归中，它进行`-->`打印，理论上如果递归足够深，它会打印`[`括号以提供帮助）。

最终输出：

```
test1
AUTO ctor{a}
AUTO ctor{b}
AUTO ctor{c}
AUTO ctor{d}
AUTO ctor{tmp}
A&&{tmp} = A&&{tmp} + T& --> this{tmp} += const A&{c}
A&&{tmp(+=c)} = A&&{tmp(+=c)} * Tvalue --> this{tmp(+=c)} *= s{5}
A&&{d} = A&&{d} * Tvalue --> this{d} *= s{2}
A&&{a} = A&&{a} * Tvalue --> this{a} *= s{4}
A&& = const this{b} + A&&{a(*#)} --> this{a(*#)} += const A&{b}
A&&{a(*#)(+=b)} = A&&{a(*#)(+=b)} + Tvalue --> this{a(*#)(+=b)} += A&&{d(*#)}
A&&{a(*#)(+=b)(+=d(*#))} = A&&{a(*#)(+=b)(+=d(*#))} + Tvalue --> this{a(*#)(+=b)(+=d(*#))} += A&&{tmp(+=c)(*#)}
move assign{a(*#)(+=b)(+=d(*#))(+=tmp(+=c)(*#))}={a(*#)(+=b)(+=d(*#))(+=tmp(+=c)(*#))}
dtor{}
dtor{}
dtor{c}
dtor{b}
dtor{a(*#)(+=b)(+=d(*#))(+=tmp(+=c)(*#))} 
```

您可以在其中看到最后被破坏的单个“复杂对象”（连同其整个历史）。

# nutch - 如何在 Nutch 中查找未获取 URLS 的深度和分数

> ID：15597765
> 
> 赞同：0
> 
> 时间：2013-03-24T11:17:58.347
> 
> 标签：nutch, web-crawler

嗨，我使用带有以下参数的 nutch 1.5.1 抓取了一个网站。-depth=20 和 -topN=800。现在我有相当多的 URLS（大约 6K）的状态为 db_unfetched。我想确定两件事：

1.  为什么他们的状态无法获取。是否有某种方法可以跟踪抓取时忽略 URL 的原因。我检查了 URL 过滤器（它们都已到位）。

2.  我可以找出 Nutch 发现每个 URL 的深度吗？是否在 20 深度处找到了所有未获取的页面（所有这些页面都有内容，因此没有 404 错误），或者某些页面在达到该深度之前就被忽略了。

我负担不起再次抓取该网站的费用，是否有任何命令可用于追溯 URLS 的评分并确定其深度。

# linux - Linux 脚本文件意外结束错误

> ID：15597766
> 
> 赞同：2
> 
> 时间：2013-03-24T11:18:16.893
> 
> 标签：linux, bash, scripting

我是 shell 脚本的新手。我正在尝试编写一个脚本，该脚本会引发意外的文件结束错误。我在stackoverflow上检查了其他解决方案，但是我无法解决这里。任何帮助，将不胜感激。我的脚本是

```
if [ "$(/etc/init.d/tomcat7 status)" == " * Tomcat servlet engine is not running." ]; then /etc/init.d/tomcat7 start; fi 
```

正如建议的那样，我尝试在 linux 中创建它，现在出现错误 [: * Tomcat servlet engine is not running.: unexpected operator

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:40:26.700

当您在 Windows 上编写脚本时，问题很可能是 Windows 上的行尾字符 \r\n 的不同编码，而 Linux 上的单个 \n 编码。

尝试`dos2unix`在您的脚本上使用并再次运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T11:40:37.777

由于您在 Windows 上创建了文件，因此您最初的问题很可能是由于换行符不匹配造成的。Windows 将换行符编码为 CR-LF，而 Linux/Unix 仅使用 LF，Mac OS 仅使用 CR。你可以用例如解决这个问题

```
recode ibmpc..latin1 your.sh 
```

您还应该在脚本的第一行指定解释器：

```
#!/bin/bash 
```

您的脚本可能看起来像这样：

```
#!/bin/bash
if [ "$(/etc/init.d/tomcat7 status)" == " * Tomcat servlet engine is not running." ]; then
  /etc/init.d/tomcat7 start
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:39:37.273

通过查看[[:Unexpected operator in shell programming](https://stackoverflow.com/questions/3411048/unexpected-operator-in-shell-programming)解决了这个问题。

我不得不将它作为 bash 而不是 sh 运行。

# java - 如何在android中使用double得到精确位的答案

> ID：15597771
> 
> 赞同：-5
> 
> 时间：2013-03-24T11:18:33.503
> 
> 标签：java, android, double, floating-accuracy, floating-point-precision

我在android上做了一个计算器应用程序，但每当我做一些乘法运算时：

```
23.3 x 3.3 
```

我得到的答案是这样的：

```
76.988999999999 
```

现在请告诉我如何解决这个应用程序的冲突。答案应该是这样的

```
76.89 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T11:24:27.547

欢迎来到[IEEE-754](http://en.wikipedia.org/wiki/IEEE_754-1985)的世界。[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)在这种特殊情况下，您可以使用而不是获得更好的结果`double`：

```
import java.math.*;

public class BigCheck {
    public static final void main(String[] args) {
        BigDecimal a = new BigDecimal("23.3");
        BigDecimal b = new BigDecimal("3.3");
        System.out.println(a.multiply(b));
    }
} 
```

...但`BigDecimal`有其自身的问题（例如， try `10 / 3`）。但它可能是计算器应用程序的更好选择，请记住，在除法时，您可能需要使用[接受比例和舍入模式的版本](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#divide%28java.math.BigDecimal,%20int,%20java.math.RoundingMode%29)。并且一定要阅读课程的细节，这样你才能理解它的规模概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T11:24:21.140

你的问题不清楚。我猜你想得到确切的数字答案。

```
DecimalFormat df = new DecimalFormat(".##");
String result = df.format(76.988999999999); 
```

## 编辑

学习此十进制格式的示例。

```
import java.text.DecimalFormat;

class Demo {
    public static void main(String args[])  
    {
        double b = 756.988999999999;
        DecimalFormat df = new DecimalFormat(".##");
        String result = df.format(b);
        System.out.printf(result);  
    }
} 
```

# symfony - 如何在 Symfony 2.2.0 上安装 Buzz 包？

> ID：15597772
> 
> 赞同：0
> 
> 时间：2013-03-24T11:18:38.350
> 
> 标签：symfony, bundle, composer-php

我想安装[Buzz 捆绑包](https://github.com/sensio/SensioBuzzBundle)。在 GitHub 上，安装说明建议了该`.bin/vendors install`方法。然而，这在 Symfony 2.2.0 中不受支持。

还有其他方法可以安装捆绑包吗？我一直在尝试使用[Composer](http://knplabs.com/blog/symfony2-with-composer/)安装它，但没有任何运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:28:43.103

`require`尝试在key下添加composer.json ：

```
"sensio/buzz-bundle": "dev-master" 
```

然后按照从第 3 步开始的说明[进行](https://github.com/sensio/SensioBuzzBundle#step3-enable-the-bundle)操作

你还需要`composer.phar update`在那之后运行。

为了将来参考，请在[packagist.org](http://packagist.org)上查找您需要的包。您会在那里找到需要放入 composer.json 的内容

# qml - 无法使用 Qt.resolvedUrl 将 QString 分配给 QQuickItem*

> ID：15597775
> 
> 赞同：-1
> 
> 时间：2013-03-24T11:18:57.603
> 
> 标签：qml

我有以下代码：

```
Tabs {
    Tab {
        id: financialDetailsTab
        title: i18n.tr("Financial Details")
        page: Qt.resolvedUrl("FinancialDetails.qml")
    }
    Tab {
        id: monthlyBudgetTab
        title: i18n.tr("Monthly Budget")
        page: Qt.resolvedUrl("MonthlyBudget.qml")
    }
    Tab {
        id: annualBudgetTab
        title: i18n.tr("Annual Budget")
        page: Qt.resolvedUrl("AnnualBudget.qml")
    }
    Tab {
        id: savingsGoalsTab
        title: i18n.tr("Savings Goals")
        page: Qt.resolvedUrl("SavingsGoals.qml")
    }
} 
```

这会产生以下错误：

```
Unable to assign QString to QQuickItem*
Unable to assign QString to QQuickItem*
Unable to assign QString to QQuickItem*
Unable to assign QString to QQuickItem* 
```

在`Qt::resolvedUrl`正在使用的线路上。该`Tabs`组件是 Ubuntu SDK 的一部分，而不是 Qt Quick，并且它的唯一使用[示例](http://developer.ubuntu.com/api/ubuntu-12.10/qml/mobile/qml-ubuntu-components0-tabs.html)并没有提供对问题的深入了解。

`MainView`我在组件之外添加了与 , 的属性完全相同的行`Tabs`，但问题在那里并不明显，这让我相信问题出在 Ubuntu 组件上。虽然问题可能出在 Ubuntu 组件上，但有助于理解错误消息的实际含义会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:42:49.777

您收到的错误意味着 Tab { } 项目中的“页面”属性不能接受字符串（或 url）内容，它需要一个项目或派生组件。

所以我很确定你的 AnnualBudget 或 SavingsGoals 文件可以作为组件实例化，因为它们在同一个文件夹中（所以不需要导入）并且文件名的第一个字母是大写的，所以 QML 引擎自动允许你这样做：

```
Tabs {
    Tab {
        id: financialDetailsTab
        title: i18n.tr("Financial Details")
        page: financePage;
    }
}

FinancialDetails {
    id: financePage;
} 
```

所以'financePage'是一个ID，所以对于QML引擎它是一个QQuickItem指针，它会接受它。只需对每个选项卡/页面对执行相同操作即可。

# android - 未捕获 IllegalArgumentException

> ID：15597777
> 
> 赞同：1
> 
> 时间：2013-03-24T11:19:09.917
> 
> 标签：android

一个非常奇怪的错误...我在 onResume() 和 onPause() 方法中注册和取消注册接收器。这是 onStop() 方法中的代码：

```
 try{
        this.unregisterReceiver(this.sdCardReceiver);
    }catch(IllegalArgumentException e){
        Log.d(MyOwnLife.LOG_LIFEGALLERY, "ActivityVideo - onStop unregisterReceiver:"+e);
    } 
```

我收到以下错误：

```
Caused by: java.lang.IllegalArgumentException: Receiver not registered: myownlife.pigeau.activityVideo.ActivityVideo$SdCardReceiver@405443f8 
```

我发现了错误……但我的应用程序还是崩溃了……知道吗？

这是完整的日志：

```
 java.lang.RuntimeException: Unable to stop activity {myownlife.pigeau/myownlife.pigeau.activityVideo.ActivityVideo}: java.lang.IllegalArgumentException: Receiver not registered: myownlife.pigeau.activityVideo.ActivityVideo$SdCardReceiver@405443f8
at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:2434)
at android.app.ActivityThread.handleWindowVisibility(ActivityThread.java:2506)
at android.app.ActivityThread.access$1900(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:958)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalArgumentException: Receiver not registered: myownlife.pigeau.activityVideo.ActivityVideo$SdCardReceiver@405443f8
at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:610)
at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:851)
at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:342)
at myownlife.pigeau.activityVideo.ActivityVideo.onStop(ActivityVideo.java:224)
at android.app.Instrumentation.callActivityOnStop(Instrumentation.java:1170)
at android.app.Activity.performStop(Activity.java:3884)
at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:2431)
... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:16:33.327

我假设你得到的异常不是从你的代码中抛出的，甚至不是从 Activity 类代码中抛出的，而是在某个系统级库中创建的，所以没有办法正确处理它。

在这里您可以找到解决方法： [Android - BroadcastReceiver unregisterReceiver 问题（未注册）](https://stackoverflow.com/questions/12421449/android-broadcastreceiver-unregisterreceiver-issue-not-registered)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T22:28:05.540

如果您使用的是本地广播，那么试试这个

```
 onPause(){
  LocalBroadcastManager.getInstance(this).unregisterReceiver(broadcastReceiver);
  } 
```

# ruby-on-rails - 导轨总和模型

> ID：15597778
> 
> 赞同：0
> 
> 时间：2013-03-24T11:19:14.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我的应用程序中有很多求和函数。我将所有数据总和移动到一个单独的模型......让我们称之为......总和。这将使调用这些数字更快，因为每次我需要对许多行求和时，我都不会确定数据库。

我想做的是每次创建或更新某些其他模型时更新总和行（许多属性）。我正在尝试使用类方法通过每个模型进行此操作，但由于某种原因它不起作用。

我想知道在哪里可以创建一个通用方法，该方法可以从我选择的任何模型的 after_create 回调中调用。该总和与一个帐户相关联，该帐户不是正在更新的模型。其他帐户关联模型是那些将达到总和模型的模型。因此，我可能需要将 self.account_id 传递给回调方法。

与 Papertrails 版本模型一样，每次保存另一个模型时都会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:26:47.273

看看[统计](https://github.com/acatighera/statistics)宝石。

它有一个缓存选项，使用 Rails 缓存来防止对数据库的重复聚合调用。

我更喜欢这样的东西，而不是每次更新属性时都进行更新。如果您不打算将`sums`模型保存在内存中，那么您将不得不对`sums`表进行与实际更新一样多的更新。

虽然与读取时间相比，写入时间开销可能是可以的，但 Statistics 带有其他优化选项。

# python - 从 OSX 中的 curl 美化 JSON

> ID：15597785
> 
> 赞同：11
> 
> 时间：2013-03-24T11:19:45.167
> 
> 标签：python, json, macos, curl, terminal

我正在尝试美化来自 curl 的 JSON 响应，但它不起作用。

```
Narnia:~ vitaly$ curl -s https://api.vk.com/method/photos.getAlbums?uid=6015870&access_token=0275127e915981fe795840165e532169482cbdfc4ca1dbd48619a687a65fead88c468cdafe9743e231c37 | python -m json.tool
[4] 8822
No JSON object could be decoded
Narnia:~ vitaly$ {"response":[{"aid":"109967643","thumb_id":"163950716","owner_id":"6015870","title":"9 мая 2010","description":"","created":"1273613868","updated":"1273695901","size":7},{"aid":"95299056","thumb_id":"135702541","owner_id":"6015870","title":"Kemer 2009","description":"http:\/\/picasaweb.google.com.ua\/Ivanov.Vitalii\/Kemer2009","created":"1250355164","updated":"1250520619","size":72},{"aid":"43368938","thumb_id":"116630327","owner_id":"6015870","title":"Лето 2008 (Алупка)","description":"","created":"1220478168","updated":"1221348162","size":43},{"aid":"38630587","thumb_id":"116886016","owner_id":"6015870","title":"Flowers","description":"","created":"1217680400","updated":"1236774230","size":9},{"aid":"36658103","thumb_id":"163954451","owner_id":"6015870","title":"Моя ката","description":"","created":"1216419744","updated":"1273698620","size":8},{"aid":"23100962","thumb_id":"112723283","owner_id":"6015870","title":"Только пипл","description":"","created":"1208636545","updated":"1210382181","size":9},{"aid":"15473894","thumb_id":"114370266","owner_id":"6015870","title":"other","description":"","created":"1203516879","updated":"1327679223","size":29},{"aid":"15471241","thumb_id":"95266020","owner_id":"6015870","title":"Сам батя или чего нельзя в фотошопе =)","description":"","created":"1203516081","updated":"1203516728","size":4}]}
[4]   Done                    curl -s https://api.vk.com/method/photos.getAlbums?uid=6015870
Narnia:~ vitaly$ 
```

为什么我会收到“无法解码 JSON 对象”？我请求的 URL 总是返回有效的 json。如果我像 $ echo jsonreponse | 手动从响应中传递 json python -m json.tool，它确实美化了 json。

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T11:39:02.223

您需要在 URL 周围加上引号：

```
curl -s "https://api.vk.com/method/photos.getAlbums?uid=6015870&access_token=0275127e915981fe795840165e532169482cbdfc4ca1dbd48619a687a65fead88c468cdafe9743e231c37" | python -m json.tool 
```

该`&`字符是一个 shell 元字符，它将命令置于后台。因此，您没有将完整的 URL 传递给服务器，而是将命令`curl -s https://api.vk.com/method/photos.getAlbums?uid=6015870`放在后台。

这就是贝壳`[4] 8822`向您回响的原因；到目前为止，您将*第四个作业放入作业队列中，它的 PID 为 8822。*

剩下的命令是：

```
access_token=0275127e915981fe795840165e532169482cbdfc4ca1dbd48619a687a65fead88c468cdafe9743e231c37 | python -m json.tool 
```

这确实不会产生有效的 JSON：

```
$ access_token=0275127e915981fe795840165e532169482cbdfc4ca1dbd48619a687a65fead88c468cdafe9743e231c37 | python -m json.tool
No JSON object could be decoded 
```

您可以在下一行看到您放入后台的作业已完成：

```
Narnia:~ vitaly$ {"response":[{"aid":"109967643","thumb_id":"163950716","owner_id":"6015870","title":"9 мая 2010","description":"","created":"1273613868","updated":"1273695901","size":7},{"aid":"95299056","thumb_id":"135702541","owner_id":"6015870","title":"Kemer 2009","description":"http:\/\/picasaweb.google.com.ua\/Ivanov.Vitalii\/Kemer2009","created":"1250355164","updated":"1250520619","size":72},{"aid":"43368938","thumb_id":"116630327","owner_id":"6015870","title":"Лето 2008 (Алупка)","description":"","created":"1220478168","updated":"1221348162","size":43},{"aid":"38630587","thumb_id":"116886016","owner_id":"6015870","title":"Flowers","description":"","created":"1217680400","updated":"1236774230","size":9},{"aid":"36658103","thumb_id":"163954451","owner_id":"6015870","title":"Моя ката","description":"","created":"1216419744","updated":"1273698620","size":8},{"aid":"23100962","thumb_id":"112723283","owner_id":"6015870","title":"Только пипл","description":"","created":"1208636545","updated":"1210382181","size":9},{"aid":"15473894","thumb_id":"114370266","owner_id":"6015870","title":"other","description":"","created":"1203516879","updated":"1327679223","size":29},{"aid":"15471241","thumb_id":"95266020","owner_id":"6015870","title":"Сам батя или чего нельзя в фотошопе =)","description":"","created":"1203516081","updated":"1203516728","size":4}]}
[4]   Done                    curl -s https://api.vk.com/method/photos.getAlbums?uid=6015870 
```

*使用*引号，命令产生：

```
$ curl -s "https://api.vk.com/method/photos.getAlbums?uid=6015870&access_token=0275127e915981fe795840165e532169482cbdfc4ca1dbd48619a687a65fead88c468cdafe9743e231c37" | python -m json.tool
{
    "error": {
        "error_code": 5, 
        "error_msg": "User authorization failed: access_token was given to another ip address.", 
        "request_params": [
            {
                "key": "oauth", 
                "value": "1"
            }, 
            {
                "key": "method", 
                "value": "photos.getAlbums"
            }, 
            {
                "key": "uid", 
                "value": "6015870"
            }, 
            {
                "key": "access_token", 
                "value": "0275127e915981fe795840165e532169482cbdfc4ca1dbd48619a687a65fead88c468cdafe9743e231c37"
            }
        ]
    }
} 
```

大概对您来说，它会产生更多有用的信息，因为很明显我的 IP 地址没有正确的访问令牌。:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T11:36:44.487

引用您的网址。这个坏了：

```
curl https://api.github.com/repos/mojombo/jekyll/issues?state=closed&assignee=mojombo | python -mjson.tool 
```

这个是对的：

```
curl 'https://api.github.com/repos/mojombo/jekyll/issues?state=closed&assignee=mojombo' | python -mjson.tool 
```

# fabric - 如何找到我的 fabfile 在任务中执行的角色？

> ID：15597789
> 
> 赞同：1
> 
> 时间：2013-03-24T11:20:15.643
> 
> 标签：fabric

在命令行中我这样做：

```
fab task -Rproduction 
```

是否有一个钩子可以让我找出我在任务中执行的角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:25:21.507

答案是“直到 2.0” [https://github.com/fabric/fabric/pull/824](https://github.com/fabric/fabric/pull/824)

# vb.net - 点击按钮触发多个按钮点击

> ID：15597793
> 
> 赞同：0
> 
> 时间：2013-03-24T11:20:37.030
> 
> 标签：vb.net, infopath-2007

我正在研究 Infopath 和 VBA 并面临一个微不足道的问题。我曾尝试对此进行搜索并找到了一些示例，但无法正确理解它们（作为新手）。

如果有人能把我推向正确的方向，我将不胜感激。

我试图通过单击一个名为 MasterSumbit 的按钮来完成四个按钮（button1、2、3、4）的执行代码

我在 InternalStartup 部分加载了事件处理程序

```
 Private Sub InternalStartup(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Startup
    AddHandler DirectCast(EventManager.ControlEvents("Button1"), ButtonEvent).Clicked, AddressOf Button1_Clicked
    AddHandler DirectCast(EventManager.ControlEvents("Button2"), ButtonEvent).Clicked, AddressOf Button2_Clicked
    ...and such for button 3 and 4
    AddHandler DirectCast(EventManager.ControlEvents("MasterSubmit"), ButtonEvent).Clicked, AddressOf MasterSubmit_Clicked
    End Sub 
```

这是 MasterSubmit 按钮上单击事件的代码

```
 Public Sub MasterSubmit_Clicked(ByVal sender As Object, ByVal e As ClickedEventArgs)

    Button1_Clicked.click()
    Button2_Clicked.click()
    Button3_Clicked.click()
    Button4_Clicked.click()

    End Sub 
```

我收到每个按钮的以下错误

```
Argument not specified for parameter 'e' of 'Public Sub Button1_Clicked(sender As Object, e As Microsoft.Office.InfoPath.ClickedEventArgs)'.
Argument not specified for parameter 'sender' of 'Public Sub Button1_Clicked(sender As Object, e As Microsoft.Office.InfoPath.ClickedEventArgs)'. 
```

感谢期待

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:31:00.463

尝试这个：

```
Public Sub MasterSubmit_Clicked(ByVal sender As Object, ByVal e As ClickedEventArgs)

 Button1_Clicked.click(sender, e)
 Button2_Clicked.click(sender, e)
 Button3_Clicked.click(sender, e)
 Button4_Clicked.click(sender, e)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:16:48.393

（在 Sub for Master 按钮内）这不起作用吗？

```
Button2.PerformClick()
Button3.PerformClick() etc.... 
```

希望我有所帮助。

# perl - 如何使用 perl 从给定目录中读取所有文件名？

> ID：15597795
> 
> 赞同：-1
> 
> 时间：2013-03-24T11:20:41.920
> 
> 标签：perl, foreach, chomp

朋友们，我有这段代码，它从目录中读取文件名并打印这些名称

```
opendir DIR1,  "defaults" or die "cannot open dir: $!";#open the given dir
        my @default_files=readdir DIR1;
        foreach my $fls(@default_files){ 
                        chomp($fls); 
                        print "$fls\n";
           } 
```

当我运行上面的代码时，我得到了

```
.
..
PGR.csv
report.csv
std_headers.csv
tab_name.txt 
```

'我很困惑什么是前两行？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:34:04.683

一个更简单的替代方法是使用该`glob`函数：

```
my @default_files = glob 'defaults/*'; 
```

或者：

```
my @default_files = <defaults/*>; 
```

这些函数过滤掉以 开头的文件和目录条目，`.`就像 shell 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:23:24.250

第一行是：

*   `.`链接到您当前正在访问的目录。

*   `..`链接到您正在访问的目录（父目录）上方的目录。

**编辑：**

过滤掉两个命名条目的一种可能性是使用`grep`：

```
opendir DIR1, "tmp" or die "cannot open dir: $!";
my @default_files= grep { ! /^\.\.?$/ } readdir  DIR1;

foreach my $fls (@default_files) { 
   chomp($fls); 
   print "$fls\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:24:46.610

“。” 表示当前工作目录，“..”表示当前工作目录的父目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T13:32:02.350

在目录列表中，`.`代表[Working Directory](http://en.wikipedia.org/wiki/Working_directory)并`..`代表[Parent Directory](http://en.wikipedia.org/wiki/Parent_directory#The_folder_metaphor)。

在标量上下文中，您可以通过显式检查这些条目来跳过它们：

```
while (defined(my $next = readdir $dir)) {
    next if $next =~ /\A[.][.]?\z/;
    # ...
} 
```

或在列表上下文中：

```
my @entries = grep !/\A[.][.]?\z/, readdir $dir; 
```

如果我已经在使用[File::Slurp](http://search.cpan.org/perldoc/File%3a%3aSlurp)，我更喜欢只使用`read_dir`它提供的功能。除了将目录路径添加到每个返回的条目之外，`.`以下内容将自动跳过：`..`

```
 my @paths = read_dir('/path/to/dir', prefix => 1); 
```

# jquery - 在 ajax 的结果中使用 data()

> ID：15597799
> 
> 赞同：0
> 
> 时间：2013-03-24T11:21:02.077
> 
> 标签：jquery, ajax

我试图在 ajax 函数的结果中找到一个标签，并使用 data() 来设置`'file', file_number`如下值，但我在 console.log 中看不到它，我得到的是未定义的。
我的代码有问题吗？

```
....success: function(html){
var result = $(html).filter('.result').html();
// console.log(result);
var file_number = $(html).find('.file_number').html();
// console.log(file_number); // will get number

// 
$(html).find('img').data('file', file_number); 
console.log($(html).find('img').data('file')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:24:05.437

> 我的代码有问题吗？

是的。您`$(html)`多次调用，即 jQuery 将多次解析 HTML 字符串并从中创建**不同的**DOM 元素（每次）。您对其中一个解析集所做的更改不是持久的，并且不会对其他任何集产生任何影响。

存储`$(html)`并仅处理这一**组**DOM 元素的结果：

```
var $html = $(html);
var result = $html.filter('.result').html();
// console.log(result);

var file_number = $html.find('.file_number').html();

$html.find('img').data('file', file_number); 
console.log($html.find('img').data('file')); 
```

# csv - 页面刷新时highcharts不刷新图表

> ID：15597806
> 
> 赞同：1
> 
> 时间：2013-03-24T11:21:58.097
> 
> 标签：csv, highcharts, refresh

我创建了一个 highchart 和我从 csv 文件中获取的数据。图表运行良好并且绘图很好。但我的问题是当页面刷新时它没有从 csv 文件中获取最新值。它仍然显示旧图表。当我关闭浏览器并重新打开图表时工作正常。请帮助我如何使用来自 csv 的更新值重置/重绘下面是我的代码。这个问题IE不在Firefox中

> var options = { chart: { renderTo: 'container', defaultSeriesType: 'line', marginRight: 130, marginBottom: 25 }, title: { text: 'Support Trending P1,P2 & P3' }, xAxis: { categories: [ ] },
> 
> ```
>  yAxis: {
> 
>                   showLastLabel:true,
>                   tickInterval:5,
>                   title: {
>                           text: ""
>                   }
>                   },
> 
>               series: []
>           };
> 
>           $.get('../data/trending.txt', function(data) {
>               // Split the lines
>               var lines = data.split(';');
>               $.each(lines, function(lineNo, line) {
>                   var items = line.split(',');
> 
>                   // header line containes categories
>                   if (lineNo == 0) {
>                       $.each(items, function(itemNo, item) {
>                           if (itemNo > 0) options.xAxis.categories.push(item);
>                       });
>                   }
> 
>                   // the rest of the lines contain data with their name in the first position
>                   else {
>                       var series = {
>                           data: []
>                       };
>                       $.each(items, function(itemNo, item) {
>                           if (itemNo == 0) {
>                               series.name = item;
>                           } else {
>                               series.data.push(parseFloat(item));
>                           }
>                       });
> 
>                       options.series.push(series);
> 
>                   }
> 
>               });
> 
>               var chart = new Highcharts.Chart(options);
>           });
> 
>       }); 
> ```
> 
> > 块引用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:25:38.710

看起来您的图表数据正在被缓存，而不是被浏览器刷新。没有代码，知道如何修复它是一张卡片。

如果您使用的是 jquery $.ajax，则有一个选项

```
 cache:false 
```

这可能会有所帮助。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 对于 GamePlay 类型，方法 getString(int) 未定义

> ID：15597810
> 
> 赞同：1
> 
> 时间：2013-03-24T11:22:17.440
> 
> 标签：java, android, eclipse, android-activity, getstring

我在使用`getString`读取位于 values 文件夹中的字符串的函数时遇到问题。我得到下一个错误：

> 对于 GamePlay 类型，方法 getString(int) 未定义

这对我来说很复杂，因为我想在活动之外调用这个函数，并且不知何故，项目的结构很奇怪。

我的项目是一个游戏，当你运行你运行的游戏时`SampleGame`：

```
public class SampleGame extends AndroidGame 
```

它扩展自`AndroidGame`具有以下声明：

```
public abstract class AndroidGame extends Activity implements Game 
```

并`SampleGame`执行`SplashLoadingScreen`具有以下声明的 a：

```
public class SplashLoadingScreen extends Screen 
```

`SpalshLoadingScreen`finally 加载一些东西，然后调用`GamePlay`

```
public class GamePlay extends Screen 
```

因此，`GamePlay`它远非`Activity`...

那么我该如何使用该`getString(int)`功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:27:59.513

因为`getString(int)`你只需要一个`Context`对象。你可以将它传递给你的 GamePlay 对象，例如有一个 constructor ，但如果你不需要 Activity 上下文，请`GamePlay(Context c)`确保传递 Application Context ，因为 GarbageCollector 将无法收集你的`getApplicationContext()`如果某处有对其上下文的引用，则为活动。

# python - 从 Python 代码创建一个实际的可执行程序

> ID：15597825
> 
> 赞同：0
> 
> 时间：2013-03-24T11:24:05.090
> 
> 标签：python, python-3.x, executable, cx-freeze

我最近为一位朋友编写了一个程序，它为他/她简化了一些重要的日常计算。现在，我遇到的问题是我想将代码编译成一个可执行程序，以便他/她可以在他们的机器上舒适地运行它，也许使用简单的图形界面或诸如此类的东西。

我曾尝试将 cx_Freeze 与 Python 3.3.0 64 位一起使用，但无济于事（该程序只是拒绝在他们的机器上启动；我什至尝试通过 32 位 Python 生成可执行文件，但也无济于事）。然后我想我也许可以通过 PyGame 生成一个可执行程序？但事实是，除了 IDLE 之外，我从未使用过任何与 Python 相关的程序，所以我不知道该做什么和寻找什么。

另一种选择可能是将 Python 3.3.0 代码转换为 Python 2.x，但问题是我不熟悉 Python 2.x，也没有任何可用的自动转换器（据我所知）。我想知道你们中是否有人可以将我引向任何好的资源/链接，因为我一直在疯狂地谷歌搜索的那些是相当不具体的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:41:25.423

你可以只使用[py2exe](http://www.py2exe.org)。它与 python 3 兼容。我在 youtube 上看过它的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T13:20:54.363

[PyInstaller](http://www.pyinstaller.org/) “是一个在 Windows、Linux、Mac OS X、Solaris 和 AIX 下将 Python 程序转换（打包）为独立可执行文件的程序”，并为您提供一个独立的可执行文件。

即使作为菜鸟 Python 用户，我也成功地（相对）轻松地使用 PyInstaller 打包我的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T14:52:34.317

您可以尝试将其嵌入到 C 程序中，然后为您的可执行文件编译它。一个不错的教程在[http://docs.python.org/2/extending/embedding.html的 python 文档中](http://docs.python.org/2/extending/embedding.html)

# git - 删除github中的文件夹，但不在本地

> ID：15597828
> 
> 赞同：9
> 
> 时间：2013-03-24T11:24:07.843
> 
> 标签：git, github

我知道如果我想忽略不想推送到 Github 的文件夹。我可以`.gitignore`用来忽略它。

现在我的情况是我已经将文件夹推送到 Github，现在我希望我可以忽略它并在 Github 上删除它，但仍然希望文件夹在本地。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-24T11:29:28.243

似乎[git rm](https://www.kernel.org/pub/software/scm/git/docs/git-rm.html)`--cached`的选项就是你想要的。

```
git rm --cached fileToDelete
git commit master
git push origin master
Now add the file to .gitignore 
```

虽然没有测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-17T09:24:19.180

为了让您从**Github中删除****文件夹或文件**，但不从您的**计算机**中删除，请按以下顺序使用此命令

 ****1.  **git rm -r --cached** `name-of-the-folder`
2.  **git 提交 -m** `"insert your comment inside this quotation marks"`
3.  **git推送起源**

如果你有几个`branches`你可以做

*   **git推送起源** `master`
*   **git推送起源** `branchName`

* * *

**例子**

1.  `git rm -r --cached .vscode`
2.  `git commit -m "removed the .vscode folder"`
3.  `git push origin`****

# sqlite - 何时调用 SQLiteOpenHelper onCreate 方法？

> ID：15597833
> 
> 赞同：31
> 
> 时间：2013-03-24T06:54:29.223
> 
> 标签：sqlite, android-sqlite

我试图创建一个 SQLite 数据库并用它做一些事情。但是我发现我的`onCreate`方法甚至没有被调用！！

我在`onCreate`方法开始时向 LogCat 发送消息。

我的假设是，（超级）构造函数将调用`onCreate`方法。那正确吗？

我的代码：

```
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase;
import android.content.Context;
import android.database.Cursor;
import android.content.ContentValues;
import android.util.Log;

public class DatabaseHandler extends SQLiteOpenHelper {
    // Static Constants
    /*** Database details ***/
    // Database version
    private static final int DATABASE_VERSION           = 1;

    // Database name
    private static final String DATABASE_NAME           = "database_name";

    /*** Database Tables ***/
    /** Events **/
    // Event table
    private static final String TABLE_EVENT             = "event";

    // Event table columns
    private static final String COLUMN_EVENT_EID        = "_eid";

    private static final String COLUMN_EVENT_CREATION_DATE  = "creation_date";

    private static final String COLUMN_EVENT_TITLE      = "title";
    private static final String COLUMN_EVENT_ICON       = "icon";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.e("MyApp", "onCreate invoked");
        // Tables creation queries
        String CREATE_EVENT_TABLE = "create table " + TABLE_EVENT + "(" + COLUMN_EVENT_EID + " integer primary key, "
                + COLUMN_EVENT_CREATION_DATE + " text, "
                + COLUMN_EVENT_TITLE + " text, "
                + COLUMN_EVENT_ICON + " text)";

        // Creating tables
        db.execSQL(CREATE_EVENT_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.e("MyApp", "onUpgrade invoked");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_EVENT);
    }
} 
```

**主要活动代码：**

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        DatabaseHandler db = new DatabaseHandler(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-24T11:32:58.080

[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29)说：

> [在调用getWritableDatabase()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29)或[getReadableDatabase()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase%28%29)之一之前，不会实际创建或打开数据库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-30T14:49:26.180

让我清除一下逻辑流程。这是**延迟初始化的**概念。

（超级）构造函数`DatabaseHandler` **不会调用 onCreate 方法**。调用**DatabaseHandler**构造函数将初始化：上下文、数据库名称、创建数据库的工厂、数据库版本和数据库错误处理程序。

**getWritableDatabase()** > **getDatabaseLocked()** > - **SQLiteDatabase.create()**

或者

**getReadableDatabase()** > **getDatabaseLocked()** > - **SQLiteDatabase.create()**

**答：**成功创建数据库后，您的配置会更改，下次再次调用`getReadableDatabase()`或`getWritableDatabase()`调用`getDatabaseLocked()`其中的`onCreate(db)`方法`getDatabaseLocked()`并执行。

[![在此处输入图像描述](../Images/f8c98ce9c68a13f96c6d41508ac66c7c.png)](https://i.stack.imgur.com/TD9nr.png)

**解释：**

上述`SQLiteDatabase.create()`方法负责在磁盘中创建 SQLiteDatabase。

但是延迟初始化的过程（意思是，它不会让一切准备好。如果你需要它们，它会在运行时创建这些对象。为此它使用了很多`if..else`语句）。

如果您看到 的全文`getDatabaseLocked()`，则如下所示。[您可以*在正文中**搜索`onCreate()``getDatabaseLocked()`*方法]

```
private SQLiteDatabase getDatabaseLocked(boolean writable) {
        if (mDatabase != null) {
            if (!mDatabase.isOpen()) {
                // Darn!  The user closed the database by calling mDatabase.close().
                mDatabase = null;
            } else if (!writable || !mDatabase.isReadOnly()) {
                // The database is already open for business.
                return mDatabase;
            }
        }

        if (mIsInitializing) {
            throw new IllegalStateException("getDatabase called recursively");
        }

        SQLiteDatabase db = mDatabase;
        try {
            mIsInitializing = true;

            if (db != null) {
                if (writable && db.isReadOnly()) {
                    db.reopenReadWrite();
                }
            } else if (mName == null) {
                db = SQLiteDatabase.create(null);
            } else {
                try {
                    if (DEBUG_STRICT_READONLY && !writable) {
                        final String path = mContext.getDatabasePath(mName).getPath();
                        db = SQLiteDatabase.openDatabase(path, mFactory,
                                SQLiteDatabase.OPEN_READONLY, mErrorHandler);
                    } else {
                        db = mContext.openOrCreateDatabase(mName, mEnableWriteAheadLogging ?
                                Context.MODE_ENABLE_WRITE_AHEAD_LOGGING : 0,
                                mFactory, mErrorHandler);
                    }
                } catch (SQLiteException ex) {
                    if (writable) {
                        throw ex;
                    }
                    Log.e(TAG, "Couldn't open " + mName
                            + " for writing (will try read-only):", ex);
                    final String path = mContext.getDatabasePath(mName).getPath();
                    db = SQLiteDatabase.openDatabase(path, mFactory,
                            SQLiteDatabase.OPEN_READONLY, mErrorHandler);
                }
            }

            onConfigure(db);

            final int version = db.getVersion();
            if (version != mNewVersion) {
                if (db.isReadOnly()) {
                    throw new SQLiteException("Can't upgrade read-only database from version " +
                            db.getVersion() + " to " + mNewVersion + ": " + mName);
                }

                db.beginTransaction();
                try {
                    if (version == 0) {
                        onCreate(db);
                    } else {
                        if (version > mNewVersion) {
                            onDowngrade(db, version, mNewVersion);
                        } else {
                            onUpgrade(db, version, mNewVersion);
                        }
                    }
                    db.setVersion(mNewVersion);
                    db.setTransactionSuccessful();
                } finally {
                    db.endTransaction();
                }
            }

            onOpen(db);

            if (db.isReadOnly()) {
                Log.w(TAG, "Opened " + mName + " in read-only mode");
            }

            mDatabase = db;
            return db;
        } finally {
            mIsInitializing = false;
            if (db != null && db != mDatabase) {
                db.close();
            }
        }
    } 
```

**请注意**，在方法体内`getDatabaseLocked()`，有很多 if.. else 案例。这些 if.. else 情况决定了您当前的环境（配置），并根据您当前的环境调用适当的方法来初始化/配置所需的任何内容。

**另外，请注意：**`DatabaseHandler`您（实现的类）中的所有回调方法`SQLiteOpenHelper`都在主体内部调用 `getDatabaseLocked()`。

源代码`SQLiteOpenHelper.java`： [https ://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/database/sqlite/SQLiteOpenHelper.java](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/database/sqlite/SQLiteOpenHelper.java)

源代码`SQLiteDatabase.java`： [https ://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/database/sqlite/SQLiteDatabase.java](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/database/sqlite/SQLiteDatabase.java)

要遵循的示例：[https ://github.com/uddhavgautam/SQLiteBasicSample](https://github.com/uddhavgautam/SQLiteBasicSample)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-04T23:15:38.660

你是对的，（超级）构造函数将调用 onCreate 方法，但只有在实际数据库不退出的情况下。来自[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate%28android.database.sqlite.SQLiteDatabase%29](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate%28android.database.sqlite.SQLiteDatabase%29)

> 管理数据库创建和版本管理的助手类。
> 
> 您创建一个实现 onCreate(SQLiteDatabase)、onUpgrade(SQLiteDatabase, int, int) 和可选的 onOpen(SQLiteDatabase) 的子类，并且此类负责打开数据库（如果存在），如果不存在则创建它，并根据需要进行升级.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-24T15:47:14.060

正如官方文档所说，“ **getWritableDatabase()**创建和/或打开一个将用于读写的数据库。第一次调用这个时，将打开数据库并且 onCreate(SQLiteDatabase), onUpgrade(SQLiteDatabase, int, int) 和/或 onOpen(SQLiteDatabase) 将被调用。”

一旦打开成功，数据库就会被缓存，所以每次需要写入数据库时​​都可以调用这个方法。（确保在不再需要数据库时调用 close()。）权限错误或磁盘已满等错误可能会导致此方法失败，但如果问题得到解决，以后的尝试可能会成功。

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase())

# javascript - grunt 将所有less文件替换为css文件

> ID：15597839
> 
> 赞同：26
> 
> 时间：2013-03-24T11:25:04.757
> 
> 标签：javascript, less, gruntjs, glob

我使用 grunt 将我所有的 less 文件转换为 css 文件，使用这个：

```
less: {
  development: {
    files: {
      "css/*.css": "less/*.less"
    }
  }
} 
```

这适用于版本 0.3.0，但现在我已经升级到 v0.4.0，它不再工作了。

以下代码（不在目标中使用 *）适用于两个版本，因此问题出在目标文件上的星号上。

```
less: {
  development: {
    files: {
      "css/test.css": "less/*.less"
    }
  }
} 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-24T16:05:13.567

这不是错误。Grunt 不再支持 globbing`dest`使用该配置。但是，您可以使用“文件数组”格式，如下所示：

```
files: [
  {
    expand: true,
    cwd: 'src',
    src: ['*.less'],
    dest: 'assets/css/',
    ext: '.css'
  }
] 
```

此外，如果您使用像 Bootstrap 这样的库，并且希望将每个 LESS 文件（组件）构建成一个单独的、单独的 CSS 文件，那么“开箱即用”并不是很容易实现的。原因是每个 LESS 文件都需要有自己的and`@import`语句（以及其他几个类似and的语句，因为它们在其他文件中被引用）。`variables.less``mixins.less``forms.less``navbar.less`

为了让这变得非常简单，请尝试使用 Grunt 插件，[无汇编](https://github.com/assemble/assemble-less)（免责声明：我是该项目的维护者之一，我也是 less.js 的核心团队）。assemble-less 是 Tyler Kellen 的 grunt-contrib-less 的一个分支，但它添加了一些实验性功能，可以满足您的需求（如果您想要稳定性，请坚持使用 grunt-contrib-less）。例如：

```
// Project configuration.
grunt.initConfig({

  less: {
    // Compile all targeted LESS files individually
    components: {
      options: {
        imports: {
          // Use the new "reference" directive, e.g.
          // @import (reference) "variables.less";
          reference: [
            "bootstrap/mixins.less", 
            "bootstrap/variables.less" 
          ]
        }
      },
      files: [
        {
          expand: true,
          cwd: 'bootstrap/less',
          // Compile each LESS component excluding "bootstrap.less", 
          // "mixins.less" and "variables.less" 
          src: ['*.less', '!{boot,var,mix}*.less'],
          dest: 'assets/css/',
          ext: '.css'
        }
      ]
    }
  }
  ...
} 
```

该`imports`功能本质上是将指定的`@import`语句添加到源文件中。该`reference`选项允许您“引用”其他较少的文件，同时仅输出通过 mixins 或`:extend`. 您可能需要引用比此处显示的文件更多的文件，因为 Bootstrap 交叉引用了来自其他组件的样式，例如 forms.less、buttons.less 等。（有关示例，请参见[assemble-less 中的 Gruntfile](https://github.com/assemble/assemble-less/blob/master/Gruntfile.js)。）

因此，在`assemble-less`使用上面示例中的配置运行任务后，该`assets/css`文件夹将具有：

*   `alerts.css`
*   `badges.css`
*   `breadcrumbs.css`
*   `button-groups.css`
*   `buttons.css`
*   `carousel.css`
*   `close.css`
*   `code.css`
*   `component-animations.css`
*   `dropdowns.css`
*   `forms.css`
*   `glyphicons.css`
*   `grid.css`
*   `input-groups.css`
*   `jumbotron.css`
*   `labels.css`
*   `list-group.css`
*   `media.css`
*   `modals.css`
*   `navbar.css`
*   `navs.css`
*   `normalize.css`
*   `pager.css`
*   `pagination.css`
*   `panels.css`
*   `popovers.css`
*   `print.css`
*   `progress-bars.css`
*   `responsive-utilities.css`
*   `scaffolding.css`
*   `tables.css`
*   `theme.css`
*   `thumbnails.css`
*   `tooltip.css`
*   `type.css`
*   `utilities.css`
*   `wells.css`

还有其他功能可以帮助您解决此问题，但该**`imports`**功能非常强大，因为它允许您直接将指令添加到 Gruntfile。

# c++ - 在相机上跟踪一张脸？

> ID：15597843
> 
> 赞同：0
> 
> 时间：2013-03-24T11:25:40.453
> 
> 标签：c++, opencv, face-detection

此代码每帧返回很多面孔。我想每帧只获得一张脸，有什么代码或方法可以实现吗？

我的代码是：

```
CvSeq * detectRect_face; 
detectRect_face = cvHaarDetectObjects(frame, pCascade_face, storage,1.15, 3, 0,cvSize(100,100));

for(int i=0;i<(detectRect_face ? detectRect_face->total:0); i++ )
    {
        CvRect* r = (CvRect*)cvGetSeqElem(detectRect_face, i); 
        CvPoint pt1 = { r->x, r->y }; 
        CvPoint pt2 = { r->x + r->width, r->y + r->height }; 
        cvRectangle(frame, pt1, pt2, CV_RGB(255,0,0), 1,8, 0); 

    } 
```

# three.js - Three.js，在网格之间共享 ShaderMaterial 但具有不同的统一集

> ID：15597846
> 
> 赞同：5
> 
> 时间：2013-03-24T11:25:57.633
> 
> 标签：three.js

正如标题所说，我想为不同的网格重用给定的 ShaderMaterial，但每个网格都有一组不同的制服（事实上，一些制服可能在网格之间有所不同，但不一定全部）：这可能吗？

在这种情况下，必须为每个网格创建一个完整的 ShaderMaterial 对我来说似乎是一种资源浪费，其想法是拥有一个顶点/片段着色器程序，但通过不同的制服对其进行配置，其值会根据网格而改变. 如果我为每个网格创建一个新的 ShaderMaterial，我最终会得到很多重复（顶点 + 片段程序 + Material / ShaderMaterial 类的所有其他数据成员）。

如果引擎能够在绘制网格之前调用回调，我可以更改制服并实现我想要做的事情。另一种可能性是拥有一个“LiteShaderMaterial”，它将保存一个指向共享 ShaderMaterial 的指针 + 仅用于我的网格的特定制服。

请注意，我的问题与此有关[许多具有相同几何形状和材料的网格，我可以更改它们的颜色吗？](https://stackoverflow.com/questions/14145275/three-js-many-meshes-with-the-same-geometry-and-material-can-i-change-their-co)但仍然不同，因为我最关心资源的浪费 - 性能方面，我认为拥有多个 ShaderMaterial 或单个 ShaderMaterial 并没有太大不同，因为引擎应该足够聪明，可以注意到所有材料具有相同的程序，不要将它们重新发送到 gfx 卡。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T16:23:59.227

克隆 a`ShaderMaterial`时，通过引用复制属性和顶点/片段程序。只有制服是按价值复制的，这就是你想要的。

这应该有效地工作。

您可以通过创建一个`ShaderMaterial`然后使用`ShaderMaterial.clone()`为每个网格克隆它来向自己证明这一点。然后为每种材料分配唯一的统一值。

在控制台中输入“render.info”。它应该显示 1 个程序。

三.js r.64

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-29T00:46:55.270

您可以使用或其他方式安全地创建`ShaderMaterial`具有相同参数的多个实例。`clone`Three.js`material.needsUpdate`最初会`true`为每个实例做一些额外的检查，但随后它将能够为所有实例重用相同的程序。

在较新的版本中，另一种选择是使用单个，但要在对象的函数`ShaderMaterial`中添加对制服的更改。`onBeforeRender`这避免了`initMaterial`在渲染器中不必要的调用，但是这是否使它成为一个整体上更快的解决方案必须进行测试。如果您在渲染之前推送太多正在修改的内容，这可能是一个有风险的解决方案，因为在最坏的情况下，单个材质可能必须在渲染期间重新编译多次。我推荐[本指南](https://threejs.org/docs/#manual/en/introduction/How-to-update-things)以获取更多提示。

# sql - 如何使用 SQL Server 向上舍入到 0.05 的下一个倍数？

> ID：15597847
> 
> 赞同：2
> 
> 时间：2013-03-24T11:26:03.947
> 
> 标签：sql, sql-server, rounding

如何将浮点数四舍五入到百位，同时在 SQL Server 中四舍五入到最接近的 0.05 倍数。

示例`4.93`将四舍五入`4.95`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T11:37:08.527

将其乘以 20，然后将其四舍五入到下一个整数，然后除以 20。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T11:38:02.063

您可以使用此公式，其中`@round_to`是您想要四舍五入的倍数。 `@round_updown`选择向上或向下舍入：设置为向下舍入、向上舍`0`入`@round_to - 0.000001`或`@round_to / 2`使用中间舍入。

```
select  @round_to*cast((@value+@round_updown)/@round_to as int) 
```

例如：

```
select  0.05*cast((4.93+0.025)/0.05 as int) 
```

# jquery - 使用 jQuery.scroll() 检测滚动高度

> ID：15597850
> 
> 赞同：0
> 
> 时间：2013-03-24T11:26:21.597
> 
> 标签：jquery, scroll

我有一个#top-div，它显示“到网站顶部”-文本。当我执行以下代码时，它可以在没有“else”的情况下工作 - 然后在滚动 700px 后显示 div。

但是“else”不起作用，它根本不会显示。当您再次向上滚动到网站顶部时，应该隐藏 div。

任何帮助表示赞赏。

```
$(window).scroll(function() {
    scrollet = $(window).scrollTop();
    if(scrollet > 700) {
        $("#top").animate({"opacity":"0.6"});
    }
    else {
        $("#top").animate({"opacity":"0"});
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:52:11.943

我怀疑动画没有按预期工作，因为当您来回滚动超过 700px 边界时，动画效果已排队。

使用动画时，告诉 jQuery“放弃你现在正在做的事情，停止动画队列并按照你现在被告知的方式去做”是很重要的。这意味着你将不得不链接`.animate`一个`.stop`方法（[阅读 .stop()](http://api.jquery.com/stop/)），即：

```
$(window).scroll(function() {
    scrollet = $(window).scrollTop();
    if(scrollet > 700) {
        $("#top").stop(true, false).animate({"opacity":"0.6"});
    }
    else {
        $("#top").stop(true, false).animate({"opacity":"0"});
    }
} 
```

该`.stop(true, false)`方法强制 jQuery 清除动画队列，但不强制元素跳转到动画的末尾 - 这是因为`.scroll()`当用户滚动时会多次触发该事件。如果我们使用`.stop(true, true)`过渡将是突然的。

替代方案包括：

*   `.scroll()`去抖动[或限制](http://benalman.com/code/projects/jquery-throttle-debounce/docs/files/jquery-ba-throttle-debounce-js.html)事件
*   不要使用`.animate()`，而只需使用 CSS 设置不透明度并利用 CSS 过渡，例如`transition: opacity .25s ease-in-out`.

这是一个概念验证小提琴 - [http://jsfiddle.net/teddyrised/zdpMd/](http://jsfiddle.net/teddyrised/zdpMd/)

# c# - 同一个解决方案中的控制台项目和winforms项目

> ID：15597852
> 
> 赞同：2
> 
> 时间：2013-03-24T11:26:25.667
> 
> 标签：c#, visual-studio, projects-and-solutions

我有一个从用户那里收集信息并更新一些 SQL-Server 表的 winforms。

我有一个在远程服务器上运行并正在扫描相同表的控制台；给定表格中的某些标准，此控制台会完成几个过程。

目前控制台和 winforms 不需要相互通信。

我应该将两个项目放在同一个解决方案中还是两个单独的解决方案中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:29:25.443

使用单一解决方案。有关更多信息，您应该阅读[此](http://msdn.microsoft.com/en-us/library/ee817674.aspx)（**分区解决方案和项目**部分）

**优点**

单一解决方案模型具有以下优点：

*   当您需要引用由单独项目生成的另一个程序集时，可以使用项目引用。项目引用是建立对其他程序集的引用的首选方式，并且保证它们可以在团队环境中的所有开发工作站上工作。项目引用的许多优点以及何时使用文件引用的指导在第 4 章“管理依赖项”的引用程序集中进行了讨论。

*   避免了程序集版本控制问题，因为 Visual Studio .NET 检测到何时需要重建引用程序集的客户端。

*   项目引用对被引用项目的配置变化很敏感。这意味着您可以跨项目自动从调试和发布版本切换，而无需重置引用。

*   系统构建过程和构建脚本要简单得多。

**缺点**

建议您尽可能采用单一解决方案模型。然而：

*   该模型仅可扩展至此。如果您想在解决方案中处理单个项目，您必须获取解决方案中所有项目的所有源代码。

*   由于项目依赖性，即使对单个项目中的单个源文件进行微小（非破坏性）更改也可能导致解决方案中许多项目的重建。如果程序集的接口在引用的项目中发生更改，您希望重建客户端项目。但是，不必要的重建可能非常耗时，尤其是对于包含许多项目的解决方案。

# javascript - jQuery - 在 ajax 调用中保持点击事件

> ID：15597859
> 
> 赞同：1
> 
> 时间：2013-03-24T11:27:22.373
> 
> 标签：javascript, jquery

我正在编写一个脚本，当单击按钮时，将通过 ajax 检查用户是否已登录，如果是，则在不离开页面的情况下执行一些操作。如果用户未登录，我想打开一个登录窗口弹出窗口。问题是由于 window.open() 不是直接在“点击”事件下，它会被弹出窗口阻止程序阻止。如果我将 window.open 放在单击操作的正下方，它可以正常工作。

有什么办法吗？

```
$('.myButton').click(function() {
        $.get(ajaxUrl, function(hastoken) {
            if(hastoken == 1) {
                // do stuff here                        
            } else {

                window.open("http://www.google.com");
                // login
            }
        }); 
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:33:31.283

我建议使用fancybox：（[http://fancybox.net/](http://fancybox.net/)）

```
$('.myButton').click(function() {
    $.get(ajaxUrl, function(hastoken) {
        if(hastoken == 1) {
            // do stuff here                        
        } else {

           $("#some_div").fancybox({
    'transitionIn'  :   'elastic',
    'transitionOut' :   'elastic',
    'speedIn'       :   600, 
    'speedOut'      :   200, 
    'overlayShow'   :   false
       });
        }
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:44:36.543

OK, Here's what I came up with, many thanks to [this answer](https://stackoverflow.com/a/2592780/249868). Basically, I wrapped the ajax call in a synchronous wrapper, keeping the windw.open in the right level.

```
$('.myButton').click(function() {
    var hasToken = getResponse(url);
    if(hastoken == 1) {
        // do stuff here                        
    } else {
        window.open("http://www.google.com");
        // login
    }
});

function getResponse(strUrl) {
  var strReturn = "";

  jQuery.ajax({
    url: strUrl,
    success: function(html) {
      strReturn = html;
    },
    async:false
  });

  return strReturn;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:54:52.140

这可能会对您有所帮助-这将打开一种灯箱...

```
 $('.myButton').click(function() {
            $.get(ajaxUrl, function(hastoken) {
                if(hastoken == 1) {
                    // do stuff here                        
                } else {

                    var dialogDiv=$("<div></div>");                               
            var $dialog = $(dialogDiv)
            .load("Your Url to login form")
            .dialog({
                autoOpen: false,
                title: "Message Box",
                width: 900,
                modal: true,
                buttons: {
                    "Close": function() {                    
                        $(this).dialog("close");
                    }
                }
            });
            $dialog.dialog("open");

            return false;
        }

                }
            }); 
        }); 
```

# html - HTML/CSS 菜单悬停链接

> ID：15597863
> 
> 赞同：4
> 
> 时间：2013-03-24T11:27:50.290
> 
> 标签：html, css, menu, hyperlink, hover

我的菜单悬停链接有问题。我有一个菜单 HTML：

```
 <div class="menu">
            <ul id="nav">
                <li><div><a href="#">HOME</a> <div class="hover"></div></div></li>
                <li><div><a href="#">ABOUT</a><div class="hover"></div></div></li>
                <li><div><a href="#">PORTFOLIO</a><div class="hover"></div></div></li>
                <li><div><a href="#">SERVICE</a><div class="hover"></div></div></li>
                <li><div><a href="#">BLOG</a><div class="hover"></div></div></li>
                <li><div><a href="#">CONTACT</a><div class="hover"></div></div></li>
            </ul>
        </div> 
```

CSS：

```
.menu {
    width: 950px;
    height: 50px;
    float: right;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-weight: bold;
    font-size: 12px;
    margin-top: 80px;
    border: 1px #FFF solid;
}

.menu #nav {
    list-style: none;   
}

.menu #nav li {
    display: inline-block;
    padding: 0px 30px 0px 30px;
}

.menu #nav li a {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-weight: bold;
    font-size: 12px;
    color: #FFF;
    text-decoration: none;
}

.menu #nav li a:hover {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-weight: bold;
    font-size: 12px;
    color: #FFF;
    text-decoration: none;
    color: #ca6666;
}

.menu #nav li a .hover {
    display:none;
}

.menu li a:hover + .hover {
    background-image:url(images/hover.png);
    background-position:center;
    width: 96px;
    height: 33px;
    color: #ca6666;
    font-weight: bold;  
    display: block;
    margin-top: -20px;
}

.clear {
    clear: both;
} 
```

我想让我的链接独立于其他人。例如现在，当我将鼠标悬停在链接上时，我的菜单会展开并且看起来不太好。当我悬停菜单不展开时，我想让我的悬停链接独立于其他链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T11:32:02.687

您应该尝试`.hover`绝对定位元素，以便将其从文档流中取出，因此不会影响链接的大小：

当然，这意味着您必须使父级相对定位，即`position: relative`.

`:hover`[编辑]：当链接上触发事件时，您将在浏览器中启动无限悬停循环，因为该`<div class="hover">`元素不是该元素的子`<a>`元素，因此它会闪烁。

我建议您将`<div class="hover">`元素设置为链接的子元素，即，而不是：

```
<li><div><a href="#">HOME</a> <div class="hover"></div></div></li> 
```

利用：

```
<li><div><a href="#">HOME<div class="hover"></div></a></div></li> 
```

然后对于`:hover`事件，使用直接后裔选择器`>`。这是可以解决您的问题的最小 CSS（您可以在我下面发布的 Fiddle 链接中查看所有内容）。

```
.menu #nav li > div {
    position: relative;
}
.menu #nav li a > .hover {
    display: none;
}
.menu #nav li a:hover > .hover {
    background: #333;
    background-position:center;
    width: 96px;
    height: 33px;
    color: #ca6666;
    font-weight: bold;
    display: block;
    top: -20px;
    position: absolute;
} 
```

请在此处查看概念验证小提琴 - [http://jsfiddle.net/teddyrised/e92Dj/](http://jsfiddle.net/teddyrised/e92Dj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:36:14.293

我`.hover`使用绝对定位，然后给`.menu #nav li`（它的父）相对定位，然后`.hover`相应地定位。如果此悬停菜单用于用户交互（子菜单？），您将需要使用`.menu #nav li` 悬停效果，而不是`a`因为目前只有小文本区域用作悬停区域，而不是整个`li`.

[jsFiddle](http://jsfiddle.net/Tyriar/9FhEA/)

![在此处输入图像描述](../Images/7b2f4c3f935cde9e821e6691a98af93f.png)

（博客隐藏在图片中的悬停效果后面）

我做了这些改变：

```
.menu #nav li {   
    position:relative;
}
.menu li a:hover + .hover {
    position:absolute;
    left:100%;
    background-color:#F00;
    z-index:1;
} 
```

## 更新

由于您想要链接附近的悬停效果，因此我将页面稍微调整了一下，就在这里。请注意，`.hover`它现在位于您的锚点内，因为我们想要相对于它的位置定位它。

[jsFiddle](http://jsfiddle.net/Tyriar/nq9L5/)

![在此处输入图像描述](../Images/229eb2545b0a7086ad8ed44a51fae0e2.png)

**HTML**

```
<li>
    <div>
        <a href="#">
            HOME
            <div class="hover"></div>
        </a> 
    </div>
</li> 
```

**CSS**

.menu #nav li a { 位置：相对；} .hover { 显示：无；} a:hover .hover { 背景图片:url(images/hover.png); 背景位置：中心；宽度：96px；高度：33px；颜色：#ca6666；字体粗细：粗体；显示：块；边距顶部：-20px；

```
position:absolute;
left:100%;
background-color:#F00;
z-index:1; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-10T16:37:38.773

你可以试试这个

```
<body id="Top">
<div class="menu">
           <ul id="nav">
               <li><div><a href="#" onmouseover='document.getElementById("Top").src = "#link";'>HOME</a> <div class="hover"></div></div></li>
               <li><div><a href="#" onmouseover='document.getElementById("Top").src = "#link";'>ABOUT</a><div class="hover"></div></div></li>
               <li><div><a href="#" onmouseover='document.getElementById("Top").src = "#link";'>PORTFOLIO</a><div class="hover"></div></div></li>
               <li><div><a href="#" onmouseover='document.getElementById("Top").src = "#link";'>SERVICE</a><div class="hover"></div></div></li>
               <li><div><a href="#" onmouseover='document.getElementById("Top").src = "#link";'>BLOG</a><div class="hover"></div></div></li>
               <li><div><a href="#" onmouseover='document.getElementById("Top").src = "#link";'>CONTACT</a><div class="hover"></div></div></li>
           </ul>
       </div> 
```

# android - Android ListView 确定 Text 或 CheckMark 点击

> ID：15597865
> 
> 赞同：0
> 
> 时间：2013-03-24T11:28:23.987
> 
> 标签：android, listview, checkbox, checkedtextview

标题已经说了。
我有一个带有自定义适配器的列表视图，行只包含一个 TextView 和一个 CheckBox。
我需要确定用户是单击复选标记还是文本，所以我可以显示一个描述对话框来解释他将要检查的内容！

在我的适配器中，我正在设置一个 OnClickListener，如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;

    if(row==null){
        LayoutInflater inflater=getLayoutInflater();
        row=inflater.inflate(R.layout.entsorgung_list_item, parent, false);
    }

   // CheckedTextView checkedTextView = (CheckedTextView)row.findViewById(R.id.ctvEntsorgung);
   // checkedTextView.setText(bedarfsList.get(position));

    TextView itemText = (TextView)row.findViewById(R.id.tvEntdorgItem);
    CheckBox itemCheck = (CheckBox)row.findViewById(R.id.cbEntsorgItem);

    itemCheck.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Log.d("TRACE","check click pos "); 
            // here i need the ListView position thats been clicked
        }
    });

    itemText.setText(bedarfsList.get(position));

    Boolean checked = myChecked.get(position);
    if (checked != null) {
       itemCheck.setChecked(checked);
    }

    return row;
} 
```

CheckBox 已将焦点设置为 false。
在我的活动中，我有一个 OnItemClickListener，它适用于文本点击，我的复选框只需要同样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:38:23.287

但是您已经`CheckBox`从`getView`方法中收到了位置，因此请使用：

```
position 
```

从：

`public View getView(int position, View convertView, ViewGroup parent)`

像这样：

```
itemCheck.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Log.d("TRACE","check click pos "); 
            Boolean checked = myChecked.get(position);
        }
    }); 
```

**编辑：**看看我在非常相似的情况下使用的以下适配器：

```
 private class MySecondAdapter extends ArrayAdapter<MiniTask>
{   
    private ArrayList<MiniTask> list;

    public MySecondAdapter(Context context, int textViewResourceId, ArrayList<MiniTask> miniTaskList) 
    {
        super(context, textViewResourceId, miniTaskList);
         this.list = new ArrayList<MiniTask>();
         this.list.addAll(miniTaskList);
    }
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        miniTask = miniTaskList.get(position);
        ViewHolder holder = new ViewHolder();
        {
            LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflator.inflate(R.layout.check_list_item_new, null);

            holder.title = (TextView) convertView.findViewById(R.id.tvItemTitle);
            holder.commentsPicturesButton = (ImageView) convertView.findViewById(R.id.iAddCommetOrPicture);
            holder.commentsPicturesButton.setTag(position);
            holder.commentsPicturesButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) 
                {
                     Intent intent = new Intent(getApplicationContext(), PicturesAndCommentsActivity.class);
                     intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                     intent.putExtra("mini_task_text", miniTask.getTitle());
                     startActivity(intent);
                }
            });
            holder.selected = (CheckBox) convertView.findViewById(R.id.cbCheckListItem);
            holder.selected.setTag(position);
            holder.selected.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v)
                {    
                    {                               
                        Log.d(TAG, "pressed the checkbox: " + v.getId() + " in position: " + position + " tag: " +v.getTag() +" and item from array: " + miniTaskList.get(position) );
                        CheckBox checkbox = (CheckBox) v;
                        miniTaskList.get(position).setSelected(checkbox.isChecked());   
                        numOfCheckedMiniTasks = 0;
                        for(int i=0;i<miniTaskList.size();i++)
                        {
                             miniTask = miniTaskList.get(i);
                             if(miniTask.isSelected())
                             {
                                numOfCheckedMiniTasks ++;
                             }
                        }
                        int percent = (int)(numOfCheckedMiniTasks * 100.0f) / miniTaskList.size();
                        Log.d(TAG, "the percentage is: " +percent);
                        tasksRepository.get(tasksRepository.indexOf(task)).setMiniTasksPercentageComplete(percent);
                    }
                }
            });

        }
        holder.title.setText(miniTask.getTitle());
        holder.selected.setChecked(miniTask.isSelected());
        return convertView;
    }
}

static class ViewHolder 
{
     TextView title;
     CheckBox selected;
     ImageView commentsPicturesButton;
} 
```

# ios - 本地化后备语言

> ID：15597867
> 
> 赞同：4
> 
> 时间：2013-03-24T11:28:53.747
> 
> 标签：ios, objective-c, xcode, localization, localizable.strings

我想在我的 iPhone 应用程序中本地化几个字符串，到目前为止它适用于我选择的 5 种语言。但是，我有一个问题，如果我没有为特定语言定义一个键，我希望它选择英语作为后备，因为我知道我已经用英语定义了每个字符串。问题是，所有键都被翻译并不是很重要，例如，即使 iPhone 设置为西班牙语，也可以显示英文。

**例子：**

zh:

```
"HELLO" = "hello" ;
"PERSON" = "my friend" ; 
```

埃斯：

```
"HELLO" = "hola" ; 
```

**预期结果：**

如果 iPhone 设置为英语，我希望它说：`hello, my friend`如果语言设置为西班牙语，我希望它说`hola, my friend`。目前该应用程序将输出`hola, PERSON`. （我使用 NSLocalizedString 方法）。

可能有一个非常简单的解决方案，但我找不到任何好的解决方案。谢谢您的帮助，

马蒂亚斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T12:53:34.060

其他答案肯定是正确的，但这并不是我想要的。相反，我找到了另一种方法，并编写了一个在我的环境中非常适合我的静态方法，如果其他人想要达到同样的效果，我想在这里添加它：

```
+ (NSString *)localizedStringForKey:(NSString *)key table:(NSString *)table
{
    NSString *str = [[NSBundle mainBundle] localizedStringForKey:key value:@"NA" table:table];
    if ([str isEqualToString:@"NA"])
    {
        NSString *enPath = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
        return [[NSBundle bundleWithPath:enPath] localizedStringForKey:key value:@"NA" table:table];
    }

    return str;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T11:38:22.917

该函数的[文档](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/macro/NSLocalizedString)`NSLocalizedString`说：

> **返回值**
> 
> 在主包和 nil 表上调用本地化StringForKey:value:table: 的结果。

和`localizedStringForKey:value:table:` [说](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/localizedStringForKey:value:table:)：

> **返回值**
> 
> 由表 tableName 中的键指定的字符串的本地化版本。如果 value 是`nil`或空字符串，并且在表中未找到本地化字符串，则**返回 key**。如果 key 和 value 都是`nil`，则返回空字符串。

因此您已经本地化了所有语言的字符串或更改了`key`您正在使用的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T11:55:23.563

简单的解决方案是使用英文文本作为键。例如：

```
[NSString stringWithFormat:NSLocalizedString(@"%@, %@", "format for greeting"),
                           NSLocalizedString(@"Hello", "salutation"),
                           NSLocalizedString(@"my friend", "person")] 
```

如果字符串没有本地化版本，则使用英文键。

# primefaces - 如何在页面上没有任何事件的情况下使用 primefaces 咆哮通知？

> ID：15597868
> 
> 赞同：0
> 
> 时间：2013-03-24T11:28:54.130
> 
> 标签：primefaces, notifications, growl

当我的应用程序中出现某些情况时，我想向用户显示一条消息。除了页面上的用户交互之外，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:29:42.313

[请参阅此处](http://www.primefaces.org/showcase/push/chat.jsf;jsessionid=9tv0tk0u9g1xq7oxguewdg6t)的 primepush 聊天示例并查看咆哮的用法。

# c# - 如何在 Internet 上托管 WCF Duplex 服务

> ID：15597885
> 
> 赞同：1
> 
> 时间：2013-03-24T11:30:14.577
> 
> 标签：c#, wcf, iis, duplex

我有一个带有 WSDualHttpBinding 的 WCF 服务，该服务在本地运行良好，当我在 IIS 上托管它时它不起作用，首先它要求登录凭据，而绑定上没有设置身份验证，但是我设置了他的安全模式现在当我从客户端发出请求时，它只是等待等待响应并超时。

任何建议或示例将不胜感激。

```
<system.serviceModel>
    <services>
      <service name ="NewEngine.Engine" behaviorConfiguration ="serviceBehaviourSoap" >
        <endpoint name ="duplexendpoint" address ="" binding ="wsDualHttpBinding" contract ="NewEngine.IEngine" bindingConfiguration="wsDualBinding"/>
        <endpoint name ="MetaDataTcpEndpoint" address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="serviceBehaviourSoap">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <wsDualHttpBinding>
        <binding name="wsDualBinding" closeTimeout="00:00:05" openTimeout="00:00:05" receiveTimeout="00:10:00" sendTimeout="00:00:05" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" />
          <security mode="None" >
            <message clientCredentialType="None"/>
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T12:02:26.730

我上周遇到了同样的问题。我删除了这一行 < message clientCredentialType="None" /> 它运行良好。你可以试试

# java - 将输入的内容保存到 Android 上的 HTML 页面以存储

> ID：15597886
> 
> 赞同：0
> 
> 时间：2013-03-24T11:30:31.127
> 
> 标签：java, android, save

我目前正在开发一个允许用户在某些字段中输入详细信息的应用程序。一旦用户按下保存，我希望将此内容一起保存到用户选择的 .html 文件中。该文件将保存到用户存储中，用户可以在其中访问和传输他们喜欢的任何方式。

我已经在 StackOverflow 上搜索过此类以前的问题，但似乎找不到任何问题。我需要帮助的问题是如何创建和保存 .html 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:40:31.617

您可以像保存普通的 txt 文件而不是使用`file.txt`use一样做到这一点`file.html`。那应该是工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:41:27.690

你可以简单地使用`PrintWriter`：

```
saveButton.setOnClickListener(new View.OnClickListener(){
public void onClick(View v) {
    //get your fields
    //For the example:
    //String htmlChoosedFromUser  = myEditText1.getText().toString(),
    //       titleChoosedFromUser = myEditText2.getText().toString(),
    //       bodyChoosedFromUser  = myEditText3.getText().toString();

    PrintWriter pw = new PrintWriter(new FileWriter(new File(htmlChoosedFromUser+".html")));
    pw.print(String.format("<html><head><title>%s</title></head><body>%s</body>"),titleChoosedFromUser,bodyChoosedFromUser);
    pw.close();
}
}); 
```

# c# - C#中的全局键钩

> ID：15597890
> 
> 赞同：2
> 
> 时间：2013-03-24T11:30:55.133
> 
> 标签：c#, user-interface, global, keyhook

我想制作一个新的应用程序，我可以通过外部 GUI 的按键进行控制。如果按键被按下，首先应该有一个文本字段发生变化。最后我想在 keyPress 上启动一个计时器。我用谷歌搜索并访问了 Stack Overflow，但没有发现任何东西可以帮助我真正解决我的问题。

我在 Stack Overflow 上找到了一篇[帖子](https://stackoverflow.com/questions/15422424/global-key-mousehook-with-ui)并尝试了代码。但我只是在控制台中获取密钥，不知道如何在失焦的 GUI 上请求它。

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:37:02.907

虽然这只是一个链接，但我过去成功使用了代码项目文章“[在 C# 中处理全局鼠标和键盘挂钩](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)”中的库。

您可以注册您的事件接收器以收到有关多个事件的通知，例如：

```
var actHook = new UserActivityHook();

// hang on events

actHook.OnMouseActivity += new MouseEventHandler(MouseMoved);
actHook.KeyDown += new KeyEventHandler(MyKeyDown);
actHook.KeyPress += new KeyPressEventHandler(MyKeyPress);
actHook.KeyUp += new KeyEventHandler(MyKeyUp); 
```

在我看来相当容易使用。

**更新：**

该项目还提供[来自同一作者的更新版本，位于**CodePlex**](http://globalmousekeyhook.codeplex.com/)。

# jquery - jQuery Animation 在第一个事件上运行 pporly

> ID：15597894
> 
> 赞同：0
> 
> 时间：2013-03-24T11:31:48.410
> 
> 标签：jquery

我一直在用 jQuery 构建一些选项卡，除了选项卡容器大小的动画不一致，第一次运行时它有点跳动并且时间关闭之外，它们的效果非常好。

单击选项卡触发器时，它应该淡出当前选项卡，.show 新的 contnet（不透明度设置为 0，因此我可以获得准确的高度） - 调整容器高度并在活动选项卡上淡入不透明度。

它可以工作，但是在第一次单击任何选项卡时会出现问题，一旦再次单击选项卡，它就会完美运行-我做错了什么？

在这里查看 jsfiddle 以获得完整的代码和演示...... [http://jsfiddle.net/pushplaybang/rjS2B/](http://jsfiddle.net/pushplaybang/rjS2B/)

我的脚本如下所示：

```
var tabs = {

trig   : $('nav.tab-triggers'),
content: $('section.tabs-content'),
panels : $('section.tabs-content').children(),

// Kick off
init   : function() {
    $.each(tabs.content,function(index, value) {
         $(value).children(':first').addClass('active').show().children().css('opacity', '1');
        $(value).children().not(':first').children('opacity', '0').end().hide();
    });
    tabs.address([tabs.trig]);
    tabs.address([tabs.content]);
    tabs.trig.on('click', 'a', tabs.display);
},

// assign incremental classes hrefs and id's to containers (grouped by class), triggers, and panels
address: function(obj) {
    // for each obj
    $.each(obj, function(index,value) {
         $.each(obj[index], function(index2,value2) {
            $(value2).addClass('tabs-' + index2);
            var kids = $(value2).children();
            $.each(kids, function(index3, value3) {
                var kid = $(value3);
                // if its parent is a nav element
                if ( kid.parent().is('nav') ) {
                // add href
                    kid.attr('href', '#tab-' + index3);
                } else {
                // add matching ids
                    kid.attr('id', 'tab-' + index3);
                }
            });  // end loop through children elements
        }); // end loop through parent elements
    }); // iteration of passed obj
}, // end address method

display: function (e) {
    var clicked = $(this);
    var link    = clicked.attr('href');
    var target  = clicked.parent().next().children(link);
    var active = clicked.parent().next().children('.active');

    clicked.addClass('active').siblings().removeClass('active');

    active.children().animate({
        opacity : 0
    },180, function() {
        active.removeClass('active').fadeOut(20, function() {
            target.addClass('active').show(0, function() {
                var tabheight = target.outerHeight();
                target.parent().animate({
                    height: tabheight + 40
                },200, function() {
                    target.children().animate({
                        opacity : 1
                    });
                });
            });
        });
    });
    e.preventDefault();
} // end display method

}

tabs.init(); 
```

这是一个微妙的错误，但很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:24:49.230

你的错误的原因：

*   在活动选项卡 fadeOut 的完整回调中：
    *   你直接调用`target.addClass('active').show`但它的children'opacity没有设置为0，导致他们的延迟不透明度动画从当前不透明度到1第一次没有做任何事情
    *   =>**您可以将这些链式调用插入** `target.children().css({opacity: 0}).end().addClass('active').show`到**.children().css({opacity: 0}).end()**只是去孩子们那里并改变他们的不透明度。

你不应该做什么（为了性能和清晰度）：

*   你调用 show 时延迟为 0，这太糟糕了，因为它会在你想要立即得到结果的地方创建一个动画（是吗？也许 jQuery 1.9 现在做得更好了？）
*   您每次都检索活动选项卡。一个简单的闭包变量可以引用最后一个活动选项卡
*   您不会将显示的内容与活动内容进行比较，因此尝试显示活动内容会重新启动动画
*   不停止当前动画，导致多次点击排队动画

您可能会在这里查看幻灯片切换实现：http: [//jsfiddle.net/alexis_tondelier/Gf2dv/](http://jsfiddle.net/alexis_tondelier/Gf2dv/) 停止动画，引用活动项目，测试它是否相同并在这种情况下关闭它，还可以收听当您在外部单击时关闭（实际上这并不完全是您的情况）。

# r - R内存管理 - 增加内存消耗

> ID：15597898
> 
> 赞同：7
> 
> 时间：2013-03-24T11:32:05.690
> 
> 标签：r, memory-management, nested-loops

我的代码如下所示（与原始版本相比，它有点简化，但仍然反映了问题）。

```
require(VGAM)

Median.sum  = vector(mode="numeric", length=75) 
AA.sum      = vector(mode="numeric", length=75)                                                    
BB.sum      = vector(mode="numeric", length=75)                   
Median      = array(0, dim=c(75 ,3)) 
AA          = array(0, dim=c(75 ,3))                                                    
BB          = array(0, dim=c(75 ,3))                              

y.sum     = vector(mode="numeric", length=100000)
y         = array(0, dim=c(100000,3))
b.size    = vector(mode="numeric", length=3) 
c.size    = vector(mode="numeric", length=3) 

for (h in 1:40)
{
  for (j in 1:75)
  {  
    for (i in 1:100000)
    {
      y.sum[i] = 0

      for (f in 1:3)
      {
        b.size[f] = rbinom(1, 30, 0.9)
        c.size[f] = 30 - rbinom(1, 30, 0.9) + 1
        y[i, f] = sum( rlnorm(b.size[f], 8.5, 1.9) ) + 
          sum( rgpd(c.size[f], 120000, 1870000, 0.158) )
        y.sum[i] = y.sum[i] + y[i, f]
      }
    }

    Median.sum[j] = median(y.sum)
    AA.sum[j] = mean(y.sum)
    BB.sum[j] = quantile(y.sum, probs=0.85)

    for (f in 1:3)
    {
      Median[j,f] = median(y[,f])
      AA[j,f] = mean(y[,f])
      BB[j,f] = quantile(y[,f], probs=0.85)
    }
  }
  #gc()
} 
```

它在执行过程中中断 (h=7, j=1, i=93065) 并出现错误：

```
Error: cannot allocate vector of size 526.2 Mb 
```

收到此消息后，我已经阅读[了 this](https://stackoverflow.com/questions/6449588/r-memory-management-advice-caret-model-matrices-data-frames)，[this](https://stackoverflow.com/questions/5171593/r-memory-management-cannot-allocate-vector-of-size-n-mb)和[this](https://stackoverflow.com/questions/1395229/increasing-the-memory-available-to-r-processes)，但这还不够。问题是，垃圾收集器 (gc()) 和清除工作区中的所有对象都没有帮助。我的意思是我已经尝试将我的代码都放入我的代码中：垃圾收集器和操作删除所有变量并在循环中再次声明它们（看看 #gc() 所在的位置 - 但后者不包括在内在我发布的代码中）。

对我来说这似乎很奇怪，因为所有过程在循环的每个步骤中都使用相同的对象（=> 并且应该在循环的每个步骤中消耗相同的内存量）。为什么内存消耗会随着时间的推移而增加？

更糟糕的是，如果我想在 R 的同一会话中工作甚至执行：

```
rm(list=ls())
gc() 
```

即使我想声明一些次要的内容，我仍然会收到相同的错误消息：

```
abc = array(0, dim=c(10,3)) 
```

只有关闭 R 并开始新的会话有帮助。为什么？也许有一些方法可以重新编码我的循环？

R：2.15.1（32 位），操作系统：Windows XP（32 位）

我在这里很新，所以每一个小费都很感激！提前致谢。

* * *

**编辑：（**来自阿伦）。我发现仅通过一个简单的示例就可以更轻松地重现此行为。启动一个**新的 R 会话**并复制并粘贴此代码，然后观察系统监视器中的内存**增长情况。**

```
mm <- rep(0, 1e4) # initialise a vector
for (i in 1:1e3) {
    for (j in 1:1e3) {
        for (k in 1:1e4) {
            mm[k] <- k # already pre-allocated
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:36:35.427

`gc()`在`for (i in 1:100000)`循环内添加调用。

在 Arun 代码的紧密循环中添加对 的调用可以`gc()`消除其内存增长。

这显示了内存增长：

```
mm <- rep(0, 1e4) # initialise a vector
for (i in 1:1e3) {
    for (j in 1:1e3) {
        for (k in 1:1e4) {
            mm[k] <- k # already pre-allocated
         }
     }
 } 
```

这不会：

```
mm <- rep(0, 1e4) # initialise a vector
for (i in 1:1e3) {
    for (j in 1:1e3) {
        for (k in 1:1e4) {
            mm[k] <- k # already pre-allocated
            gc()
         }
     }
 } 
```

这里的自动垃圾收集有些问题。如前所述，收集器在第一种情况下被调用`gcinfo(TRUE)`。但是记忆增长得非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:34:41.467

这似乎可行（将最内层循环放入函数中）。我直到最后才运行它，因为它很慢，但我没有注意到你的代码中的内存膨胀。

```
require(VGAM)

Median.sum  = vector(mode="numeric", length=75) 
AA.sum      = vector(mode="numeric", length=75)                                                    
BB.sum      = vector(mode="numeric", length=75)                   
Median      = array(0, dim=c(75 ,3)) 
AA          = array(0, dim=c(75 ,3))                                                    
BB          = array(0, dim=c(75 ,3))                              

inner.fun <- function() {
  y.sum     = vector(mode="numeric", length=100000)
  y         = array(0, dim=c(100000,3))
  b.size    = vector(mode="numeric", length=3) 
  c.size    = vector(mode="numeric", length=3) 
  for (i in 1:100000)
    {
      y.sum[i] = 0

      for (f in 1:3)
      {
        b.size[f] = rbinom(1, 30, 0.9)
        c.size[f] = 30 - rbinom(1, 30, 0.9) + 1
        y[i, f] = sum( rlnorm(b.size[f], 8.5, 1.9) ) + 
          sum( rgpd(c.size[f], 120000, 1870000, 0.158) )
        y.sum[i] = y.sum[i] + y[i, f]
      }
    }
    list(y.sum, y)
}

for (h in 1:40)
{
  cat("\nh =", h,"; j = ")
  for (j in 1:75)
  {  
    cat(j," ")
    result = inner.fun()
    y.sum = result[[1]]
    y = result[[2]]
    Median.sum[j] = median(y.sum)
    AA.sum[j] = mean(y.sum)
    BB.sum[j] = quantile(y.sum, probs=0.85)

    for (f in 1:3)
    {
      Median[j,f] = median(y[,f])
      AA[j,f] = mean(y[,f])
      BB[j,f] = quantile(y[,f], probs=0.85)
    }
  }
} 
```

# ios - uifont 'Impact' 不适用于 iOS

> ID：15597905
> 
> 赞同：2
> 
> 时间：2013-03-24T11:32:37.360
> 
> 标签：ios, objective-c, uifont

![plist 文件](../Images/703df64c3f4ffcba39c6023e90a7b6b7.png)

![包括字体](../Images/8d347e28635f71f5df4eb5232d9ed981.png)

我正在尝试使用 Impact.ttf。它内置在 OSX 中，但在 xcode 上的自定义字体中看不到它。所以我将它包含在我的项目中，如屏幕所示并使用

```
UIFont *font1 = [UIFont fontWithName:@"Impact.ttf" size:50];
NSLog(@"%@",font1);
self.labelTop.font = font1; 
```

日志在 font1 中显示空值。请帮忙。如何包含字体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-01T14:46:06.527

检查字体（.ttf）文件的目标成员资格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T11:50:20.653

首先将字体 .ttf 文件添加到项目然后按照步骤

第 1 步：单击左侧导航面板中的 ProjectName
第 2 步：转到信息选项卡
第 3 步：按“+”按钮添加名称为“应用程序提供的字体”的新键
第 4 步：设置该键的值：影响。 ttf. 它是带有扩展名的字体文件名
第 5 步：现在您可以使用自定义字体，如下所示

```
[textLabel setFont:[UIFont fontWithName:@"Impact" size:12.0f]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T11:40:36.967

正如我在这个[答案](https://stackoverflow.com/questions/10541378/custom-font-in-xcode-4-3-2/10541681#10541681)中所说，文件名或字体名可能与 iOS 喜欢在 fontWithName: 中看到的名称不同。如果在更改 .plist 中的文件名后仍然无法正常工作，请使用 Mac 上的 Fontbook 获取正确的名称。您还可以使用以下代码枚举所有字体以找到正确的名称：

```
for(NSString *familyName in [UIFont familyNames]) {
   for(NSString *fontName in [UIFont fontNamesForFamilyName:familyName]) {
     NSLog(@"%@", fontName);
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T11:41:04.103

这是如何在应用程序中添加自定义字体的步骤。

1 - 在您的应用程序中添加`.TTF`字体
2 - 修改`application-info.plist file`.
3 - 将**“应用程序提供的字体”**键添加到新行
4 - 并将每个`.TTF`文件（字体）添加到每一行。

欲了解更多信息，请阅读[本](http://www.developers-life.com/how-to-include-ttf-fonts-to-ios-app.html)网站和[本](http://www.waterworld.com.hk/en/node/157)网站。

> 了解更多信息 ：

**对于粗体**

```
// Equivalent to [UIFont fontWithName:@"FontName-BoldMT" size:17]
UIFont* font = [UIFont fontWithFamilyName:@"FontName" traits:GSBoldFontMask size:17]; 
```

**和粗体/斜体**

```
UIFont* font = [UIFont fontWithMarkupDescription:@"font-family: FontName; font-size: 17px; font-weight: bold/italic;"]; // set here, either bold/italic. 
```

# php - 如果未找到 array_search 查询

> ID：15597906
> 
> 赞同：1
> 
> 时间：2013-03-24T11:32:39.313
> 
> 标签：php, database, arrays, if-statement

我最近在 Stack - [Search array for specific string](https://stackoverflow.com/questions/15409053/search-array-for-specific-string)上发布了这个问题- 并得到了我的问题的完美答案，我将其标记为正确。但是我现在有一个相关的问题，我发现很难解决，但看起来应该很容易！

我使用以下内容在数组中搜索了字符串“GB”和“US”，这是在上一篇文章中提供给我的：

```
/* Get Movie release dates */
$releases = $tmdb->getMovieReleases($tmdb_id);

echo "<pre>";
print_r($releases);
echo "</pre>";

$uk_release = -1;

foreach($releases['countries'] as $k=>$v) {
    if(array_search('GB', $v)) {
        $uk_release = $k;
        break;
    } else {
        $uk_release = null;
    }
}

$us_release = -1;

foreach($releases['countries'] as $k=>$v) {
    if(array_search('US', $v)) {
        $us_release = $k;
        break;
    } else {
        $us_release = null;
    }
}

$uk_rating = $releases['countries'][$uk_release]['certification'];
$us_rating = $releases['countries'][$us_release]['certification']; 
```

然后使用简单的`<?php echo $uk_rating; ?>`/将其解析到页面中`<?php echo $us_rating; ?>`。

但是，我发现某些数组实际上并不包含查询正在搜索的数据，例如以下没有英国评级或发布日期的数据：

```
Array
(
    [id] => 13655
    [countries] => Array
        (
            [0] => Array
                (
                    [iso_3166_1] => US
                    [certification] => G
                    [release_date] => 2008-06-20
                )

            [1] => Array
                (
                    [iso_3166_1] => CA
                    [certification] => 
                    [release_date] => 2008-06-20
                )

            [2] => Array
                (
                    [iso_3166_1] => JP
                    [certification] => 
                    [release_date] => 2008-08-01
                )

        )

) 
```

我试图构建各种 IF 语句来检查两个查询之一是否为空、空、== "" 等，但似乎没有任何效果。目前，我正在尝试以下操作，基本上使用逻辑如果两个结果都不等于无，则显示两者，或者如果两者之一为空，则仅显示不为空的那个（为格式化道歉）：

```
if ($uk_date !== "" && $us_date !== "") {?>
                                <section class="span3">
                                    <p class="overview-title">RELEASE DATE</p>
                                    <p class="section_body">
                                        <?php echo $uk_date; ?> (UK)<br>
                                        <?php echo $us_date; ?> (US)
                                    </p>
                                </section><?php
                            } else if ($uk_date = "") {?>
                                <section class="span3">
                                    <p class="overview-title">RELEASE DATE</p>
                                    <p class="section_body">
                                        <?php echo $us_date; ?> (US)
                                    </p>
                                </section><?php
                            } else if ($uk_date == "") {?>
                                <section class="span3">
                                    <p class="overview-title">RELEASE DATE</p>
                                    <p class="section_body">
                                        <?php echo $uk_date; ?> (UK)
                                    </p>
                                </section><?php
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:41:58.237

尝试

```
$uk_rating = isset($releases['countries'][$uk_release]['certification'])?$releases['countries'][$uk_release]['certification']:'';
$us_rating = isset($releases['countries'][$us_release]['certification'])?$releases['countries'][$us_release]['certification']:''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:42:32.397

`!==`运算符检查相等性和*类型*。在您的示例中-如果数组中不存在 UK-解释器将（标记警告并）将值分配`null`给`$uk_date`. （即，不是空字符串）。

如果您更改`!==`为`!=`它应该可以工作，但最佳实践通常也涉及消除警告，因此为了完整性，您应该对阵列本身进行检查。

```
if(isset($releases['countries'][$uk_release])){
  // UK exists in array
} else {
  // does not
} 
```

另一个答案也解决了这个问题 - 它只是一个速记[三元运算符](https://stackoverflow.com/tags/ternary-operator/info)
（与*条件*if-else 相对）。

# java - TransactionSynchronization.afterCompletion 中的 IncompatibleClassChangeError

> ID：15597909
> 
> 赞同：1
> 
> 时间：2013-03-24T11:33:00.410
> 
> 标签：java, spring, spring-jms, incompatibility, jmstemplate

每次我使用 JmsTemplate 发送消息时，都会抛出异常。（我使用了 Spring 3.0.5.RELEASE）。我找不到不兼容的类！

我的班级路径中的弹簧罐：

![我的班级路径中的弹簧罐](../Images/b3224cd2983f2a637ed3f208e40643b6.png)

错误日志：

```
springframework.transaction.support.TransactionSynchronizationUtils.invokeAfterCompletion(136) | TransactionSynchronization.afterCompletion threw exception
java.lang.IncompatibleClassChangeError: Class org.springframework.jms.connection.JmsResourceHolder does not implement the requested interface org.springframework.transaction.support.ResourceHolder
    at org.springframework.transaction.support.ResourceHolderSynchronization.afterCompletion(ResourceHolderSynchronization.java:105)
    at org.springframework.transaction.support.TransactionSynchronizationUtils.invokeAfterCompletion(TransactionSynchronizationUtils.java:133)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.invokeAfterCompletion(AbstractPlatformTransactionManager.java:904)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerAfterCompletion(AbstractPlatformTransactionManager.java:879)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:707)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:632)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:314)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:116)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    at ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:24:30.577

JmsResourceHandler**扩展**了org.springframework.transaction.support.ResourceHolderSupport；ResourceHolderSupport**实现**ResourceHolder。

ResourceHolderSupport 在两个罐子里：

*   spring-da-2.0.8
*   Spring-tx-3.0.5.Release

我通过使用 Spring-orm-3.0.5.Release 而不是 spring-hibernate3-2.0.8 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:47:15.257

当您拥有不兼容的 3rdparties 版本时，通常会出现此类问题。

在这种情况下，尝试“对齐”弹簧罐 - 使用相同的弹簧版本。这应该可以解决您的问题。

希望这可以帮助。

# c++ - For循环中的堆栈溢出和分段错误

> ID：15597910
> 
> 赞同：-2
> 
> 时间：2013-03-24T11:33:05.867
> 
> 标签：c++, stack-overflow

这是我的代码，我不知道这个错误的原因是什么。

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <vector>

using namespace std;

vector<vector<int>> readFile(char* fileName)
{
    vector < vector < int > > info;
    ifstream file(fileName);
    string line;
    while ( getline(file, line) )
    {
        vector < int > data;
        double value;
        istringstream iss(line);
        while (iss >> value)
        {
            data.push_back(value);
        }
        info.push_back(data);
    }
    return info;
}

void print2DVector(vector <vector <int> > input)
{
    for ( vector < vector < int > > :: size_type i = 0, size = input.size(); i < size; ++i)
    {
        for ( vector < int > :: size_type j = 0, length = input[i].size(); j < length; ++j)
        {
            cout << input[i][j] << " ";
        }
        cout << endl;
    }
}

vector <vector <int> > inverseVector(vector <vector <int> > input)
{
    int* arr;
    arr = new int[input[0].size()];
    vector <int>  data;
    vector <vector <int> > output;
    for ( vector < vector < int > > :: size_type i = 0, size = input.size(); i < size; ++i)
    {
        for ( vector < int > :: size_type j = 0, length = input[i].size(); j < length; ++j)
        {
            arr[input[i][j]] = j;
        }
        for ( vector < int > :: size_type j = 0, length = input[i].size(); j < length; ++j)
        {
            data.push_back(arr[j]);
        }

        output.push_back(data);
        data.clear();
    }

    return output;
}

vector<vector <int>> initializeEmptyHospitals(int quota, int count)
{
    vector<vector <int>> output;
    vector<int> data;
    for(int j=0; j<quota;j++)
        data.push_back(-1);
    for(int i=0; i<count; i++)
        output.push_back(data);

    data.clear();
    return output;
}

bool isEmpty(vector <int> hospital)
{
    for(int i=0;i<hospital.size();i++)
        if(hospital[i]==-1)
            return true;

    return false;
}

void reArrangeVector(vector <int> &hospital)
{
    int temp;
    for (int i = 1; i < hospital.size(); i++)
    {
        for (int j = 0; j < hospital.size()- i; j++)
        {
            if(hospital[j]>=0 && hospital[j+1]>=0)
            if(hospital[j] > hospital[j+1])
            {
                temp = hospital[j+1];
                hospital[j+1] = hospital[j];
                hospital[j] = temp;
            }
        }
    }
}

void assignResident( vector <int> residentChoices ,vector < vector <int> > &hospitalsWithQuotas, int residentNumber, vector < vector <int> > inverseHospitals)
{
    for(int i=0;i<residentChoices.size();i++)
    {
        if(isEmpty(hospitalsWithQuotas[residentChoices[i]]))
        {
            for(int j=0; j<hospitalsWithQuotas[residentChoices[i]].size(); j++)
                if(hospitalsWithQuotas[residentChoices[i]][j] == -1)
                {
                    hospitalsWithQuotas[residentChoices[i]][j]=residentNumber;
                    reArrangeVector(hospitalsWithQuotas[residentChoices[i]]);
                    return;
                }   
        }
        else
        {
            for(int k=0; k<hospitalsWithQuotas[residentChoices[i]].size(); k++)
            {
                if(inverseHospitals[residentChoices[i]][residentNumber] < hospitalsWithQuotas[residentChoices[i]][0])
                {
                    int temp = hospitalsWithQuotas[residentChoices[i]][0];
                    hospitalsWithQuotas[residentChoices[i]][0] = residentNumber;
                    assignResident(residentChoices, hospitalsWithQuotas, temp, inverseHospitals);
                    reArrangeVector(hospitalsWithQuotas[residentChoices[i]]);
                    return;
                }
                //if(k==hospitalsWithQuotas[residentChoices[i]].size()-1)
            }
        }
    }
}

int main(int argc, char* argv[])
{
    vector < vector <int> > hospitalChoices,residentChoices,inverseHospitals,hospitalsWithQuotas;
    int quota = 3;
    hospitalChoices = readFile("data1_h1.txt");
    residentChoices = readFile("data1_r1.txt");
    hospitalsWithQuotas = initializeEmptyHospitals(quota, hospitalChoices.size());  
    inverseHospitals = inverseVector(hospitalChoices);

    for(int i=0; i<15; i++)
        assignResident(residentChoices[i],hospitalsWithQuotas,i,inverseHospitals);

    print2DVector(hospitalsWithQuotas);

    system("pause");
    return 0;
} 
```

在下面的 for 循环中，当我写 i<12 时，它可以工作，但对于 i<15，它会引发堆栈溢出异常。

```
for(int i=0; i<15; i++)
    assignResident(residentChoices[i],hospitalsWithQuotas,i,inverseHospitals); 
```

整个错误文本在 VS2012 中：

```
Unhandled exception at 0x00CB33D9 in BLG372E HW1.exe: 0xC00000FD: Stack overflow (parameters: 0x00000001, 0x00E72F50). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:56:20.710

您的程序中的一些错误：

1.  在 readFile 函数中，值未初始化，您正在比较它。在比较之前对其进行初始化。
2.  在 readFile 函数中，您正在使用向量并且正在向其中推送字符，这是错误的。

您收到 Stackoverflow 错误可能是因为一些无休止的递归。

建议：在发布到任何论坛之前，请先格式化您的代码，以便其他人调试它。

# java - 无法从同一活动中按钮的 onClick 方法获取 Datepicker 对象

> ID：15597911
> 
> 赞同：0
> 
> 时间：2013-03-24T11:33:21.787
> 
> 标签：java, android, datepicker

嗨，我正在获得 NPE

```
java.lang.IllegalStateException: Could not execute method of the activity
    at android.view.View$1.onClick(View.java:3100)
    at android.view.View.performClick(View.java:3627)
    at android.view.View$PerformClick.run(View.java:14304)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4512)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:984)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:751)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at android.view.View$1.onClick(View.java:3095)
    ... 11 more
Caused by: java.lang.NullPointerException
    at com.rkapps.calendarsharing.SyncToCloudActivity.getDateFromDatePicket(SyncToCloudActivity.java:59)
    at com.rkapps.calendarsharing.SyncToCloudActivity.syncWithCloud(SyncToCloudActivity.java:47) 
```

从下面的代码

```
package com.rkapps.calendarsharing;

import java.lang.reflect.Method;
import java.util.Calendar;
import java.util.Date;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.DatePicker;

import com.rkapps.calendarsharing.events.Synchronizer;

public class SyncToCloudActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sync_to_cloud);
        DatePicker startDatePicker = (DatePicker) findViewById(R.id.datePicker1);
        DatePicker endDatePicker = (DatePicker) findViewById(R.id.datePicker2);
        setNormnalCalendar(startDatePicker);
        setNormnalCalendar(endDatePicker);
    }

    private void setNormnalCalendar(DatePicker startDatePicker) {
        int currentapiVersion = android.os.Build.VERSION.SDK_INT;
        if (currentapiVersion >= 11) {
              try {
                Method m = startDatePicker.getClass().getMethod("setCalendarViewShown", boolean.class);
                m.invoke(startDatePicker, false);
              }
              catch (Exception e) {} // eat exception in our case
            }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_sync_to_cloud, menu);
        return true;
    }

    public void syncWithCloud(View view) {
        DatePicker startDatePicker = (DatePicker) view.findViewById(R.id.datePicker1);
        Date startDate = getDateFromDatePicket(startDatePicker);
        DatePicker endDatePicker = (DatePicker) view.findViewById(R.id.datePicker2);
        Date endDate = getDateFromDatePicket(endDatePicker);
        new Synchronizer(getContentResolver(), this).syncToCloud(startDate ,endDate);
    }

    /**
     * 
     * @param datePicker
     * @return a java.util.Date
     */
    public static java.util.Date getDateFromDatePicket(DatePicker datePicker) {
        int day = datePicker.getDayOfMonth();
        int month = datePicker.getMonth();
        int year = datePicker.getYear();

        Calendar calendar = Calendar.getInstance();
        calendar.set(year, month, day);

        return calendar.getTime();
    }

} 
```

NPE 来自我试图从 syncWithCloud() 访问我的日期选择器的行——当按下同一活动中的按钮时调用该方法。

我从 android frums 中读到我应该使用 DialogFragmnet 来使用这个 DatePicker。但由于我希望我的应用程序支持 android 2.3，并且不想参与 supoprt 库的版本控制复杂性，所以我选择不使用 Dialog 片段，无论如何我可以使用 Datepickers 吗？提前致谢 。

活动xml如图

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/start_date" />

        <DatePicker
            android:id="@+id/datePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/end_date" />

        <DatePicker
            android:id="@+id/datePicker2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/sync_to_cloud" 
        android:onClick="syncWithCloud"/>

</LinearLayout> 
```

# robots.txt - robots.txt 中的 / 是否也适用于根目录？

> ID：15597915
> 
> 赞同：0
> 
> 时间：2013-03-24T11:33:32.243
> 
> 标签：robots.txt

在 website.com/path/ 中有一个 robots.txt 文件，其中包含以下内容：

```
User-agent: *
Disallow: / 
```

我不希望它申请 website.com，而只是申请路径本身。

问题是： / 实际上是指 ./ 还是指网络根文件夹？

推理：我不想在 robots.txt 中提供文件夹列表，但如果爬虫从某个外部链接获取私有文件，它不应该将其编入索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:00:47.680

您的 robots.txt 必须放在主机根目录中，您不能在`example.com/path/robots.txt`.

所以你必须将你的 robots.txt 上移一级，到`example.com/robots.txt`. 现在很明显，它`Disallow: /`阻止了该主机上的所有内容。

如果您不想提供有关“私人”网址的信息，则可以仅指定这些网址的开头（如果可能的话）：

```
User-agent: *
Disallow: /p 
```

这将阻止所有以*开头的* `example.com/p`URL ，例如：

*   `example.com/p`
*   `example.com/p.html`
*   `example.com/path`
*   `example.com/path/`
*   `example.com/path/foobar`
*   `example.com/p12asokd1`

如果这是不可能的（例如，如果您的公共 URL 也可能以此类字符开头），您可以使用该`robots` `meta`元素。

请注意，当使用`robots.txt`阻止 URL 时，搜索引擎可能仍会将您的 URL 编入索引并在其搜索结果中链接到它（例如，当有人链接到您的私人 URL 时）。所以这些 URL 不再那么“私密”了。当使用这种`meta`方式时，（礼貌的）搜索引擎甚至不会索引 URL，所以这对你来说是一个优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:56:14.420

您可以尝试`Disallow: /*/`，这将阻止任何具有路径和斜杠的内容。那会阻塞`/foo/bar.html`，但不会阻塞`/index.html`在根目录中。

不幸的是，它不会阻止`/foo`，尽管根据您的网络服务器，请求可能会*被*`/foo`重定向到`/foo/`被阻止的 。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:33:32.243

可悲的是，它也将适用于根文件夹。

实际上，每个 robots.txt 都首先适用于根文件夹，然后您才能提供有关特定文件夹的详细信息。

来自[robotstxt.org](http://www.robotstxt.org/robotstxt.html)：

> 当机器人在“/robots.txt”文件中查找 URL 时，它会从 URL 中删除路径组件（从第一个单斜杠开始的所有内容），并将“/robots.txt”放在它的位置。
> 
> 例如，对于“ [http://www.example.com/shop/index.html](http://www.example.com/shop/index.html) ” ，它将删除“/shop/index.html”，并将其替换为“/robots.txt”，最终会得到“ [http://www.example.com/robots.txt](http://www.example.com/robots.txt) ”。*

# ruby-on-rails - 如何按关联的列排序

> ID：15597920
> 
> 赞同：0
> 
> 时间：2013-03-24T11:34:01.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这些桌子

`users`和`profiles`
用户有一个配置文件。

`point`表中有一个列`profiles`。

我想获取所有按`point`. 如何自定义此控制器？

**控制器**

```
@users = User.confirmed.page(params[:page]).order("point DESC") 
```

**模型**

```
scope :confirmed, where("confirmation_token" => nil) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:04:34.870

如果要使用 sql 对列进行排序，则必须加入

```
@users = User.confirmed
  .page(params[:page])
  .order("point DESC")
  .joins(:profile) 
```

# c++ - 字符串在转换为 char* c++ 时被截断

> ID：15597924
> 
> 赞同：0
> 
> 时间：2013-03-24T11:34:15.943
> 
> 标签：c++, string, char, type-conversion, tokenize

正如标题所建议的，我在将字符串转换为 char 数组时遇到了一些麻烦。

首先让我明确我需要这样做的原因，因为如果我的方法是错误的，我很乐意采取不同的方式。（虽然我更喜欢答案可以直接关注手头的问题）

我有一个包含几行的文件。每行都有格式

> b 12 3 4
> 
> d 4 1 5.71
> 
> ...

我正在尝试做的是读取每一行（使用 getLine 并将其保存在字符串变量中）并将它们用空格分隔，以便将每个字母/数字分开。

为了做到这一点，我采用了 strtok 方法，该方法将 char* 作为参数

这种转换是出了问题的地方。

我采取了几种方法，但总是以相同的方式结束：

尝试 #1 - .data()

```
const char *converted = new char[(line.size()+1)];
//The sentence is complete in this cout!
cout << line << " -printed string\n";
converted = line.data();
converted[line.size()] = '\0';
//sentence no longer complete!
cout << converted << " -printed char array\n"; 
```

尝试#2 .c_str()

```
char *converted;
//The sentence is complete in this cout!
cout << line << " -printed string\n";
converted = (char*)line.c_str();
//sentence no longer complete!
cout << converted << " -printed char array\n"; 
```

尝试 #3 复制（）

```
char *converted = new char[(line.size()+1)];
//The sentence is complete in this cout!
cout << line << " -printed string\n";
copy(line.begin(), line.end(), converted);
//sentence no longer complete!
cout << converted << " -printed char array\n"; 
```

我在前面的代码中可能有一些语法错误。我是从记忆中做的，因为我在尝试不同的方法时删除了代码。关键是，使用 .data()、copy() 和 .c_str() 它们都编译了，并且都给出了相同的输出：

> b 12 3 4 打印字符串
> 
> b -打印的字符数组

现在我已经完成了我的作业，显然这不是一个完整的第一次。我想我在某处读到过，可能发生的事情是所有这些方法都将空白空间“”解释为“\0”，因此它在读取“b”后就停止了。解决它的方法之一是使用 boost 库。

不幸的是，这不是我的选择。我正在开发一个不能依赖外部库的可交付成果。一些帮助将不胜感激。

提前致谢。

**编辑**

编码：

```
(...)
if (fh.is_open()){
    while (fh.good()){
        getline(fh,line);
        char *converted = new char[(line.size()+1)];
        cout << line << " -printed string\n";
        strcpy(converted, line.c_str());

        cout << converted << " -printed char array\n";
(...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:37:14.510

＃1和＃2中的同样错误，您必须复制字符，您所做的就是复制指针。

代替

```
converted = line.data();
converted[line.size()] = '\0'; 
```

和

```
strcpy(converted, line.c_str()); 
```

尝试 #3 更好，但忘记添加空终止符。

也许您应该研究使用 std::string 进行标记化的方法，那么您就不会搞砸了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:36:29.987

现在已经指出了您的代码的问题

如果您打算用空格分割字符串（行），那么您可能想要使用格式化输入而不是标记化。类似的东西（这未经测试）

```
#include <sstream>
#include <string>
while (std::getline(infile, line))
{
    std::istringstream iss(line);
    string token;
    while(iss >> token) { 

       // Do your thing on token

    }
} 
```

根据您的需要对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:36:39.670

尝试 #1 中的问题，例如：

*   内存泄漏：首先将指针设置为新分配的内存块，然后将指针重置为`line.data()`

*   未定义行为：不允许修改指针返回`std::string::data()`或`std::string::c_str()`指向的内容。它可能是您的字符串对象所持有的实际缓冲区的内部副本。

为了将字符串拆分为由空格分隔的部分，您可以尝试以下方法：

```
split(const std::string &line, char &letter, std::vector<double> &numbers) {
    typedef std::string::size_t size_t;
    size_t n = line.find(' ');
    if (n == std::string::npos || n > 1) {
        // there aren't any spaces or the first part contains
        // more than one letter!
        // bad case? throw something or return an error code
    }
    letter = line[0];
    size_t n2 = line.find(' ', n);
    while (n2 != std::string::npos) {
        numbers.push_back(str2double(line.substr(n, n2 - n)));
        n = n2;
        n2 = line.find(' ', n);
    }
} 
```

我没有测试代码。可能是您必须写入`n + 1`'`find`呼叫或类似的东西。而且你必须自己编写`str2double`函数。

# asp.net - 运行 db query IF 查询字符串不为空 c# razor

> ID：15597925
> 
> 赞同：0
> 
> 时间：2013-03-24T11:34:18.557
> 
> 标签：asp.net, request.querystring

我是 C# Razor 的新手，我想运行一个非常简单的过程——本质上我想运行一个新闻页面。如果页面链接包含一个 ID，我希望页面根据该值查询 db，例如：

> ```
> var newsID = Request.QueryString["ID"];     
> var datanewsitem = db.QuerySingle("SELECT * FROM News WHERE ID=@0", newsID); 
> ```

如果没有值，我希望它选择表中的顶部记录，如下所示：

> ```
> var datanewsitem = db.QuerySingle("SELECT Top 1 ID, Title, Date, Text
> FROM news ORDER BY ID desc"); 
> ```

我正在尝试执行这样的检查：

> ```
> if (Request.QueryString["ID"] != null) {
> var newsID = Request.QueryString["ID"];    
> var datanewsitem = db.QuerySingle("SELECT * FROM News WHERE ID=@0", newsID);        
> }else{<br />
> var datanewsitem = db.QuerySingle("SELECT Top 1 ID, Title, Date, Text, FROM news ORDER BY ID desc");} 
> ```

但是，一旦我尝试从 IF 语句中执行查询，编译器就无法告诉我 datanewsitem.variable 在我尝试调用它时没有定义。

这可能是我对 C# 工作原理的理解中的一个根本缺陷，但是任何人都可以为我正在尝试做的事情提供一个解决方案（带有示例）吗？快把我逼疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:42:56.150

这有一个简单的解决方法。

您在and子句中定义了`datanewsitem`两次变量，每次一次。这意味着它只在它所属的子句中定义（称为变量的“范围”。） `if``else`

改成：

```
myNewsType datanewsitem = null;
if (Request.QueryString["ID"] != null) {
   newsID = Request.QueryString["ID"];    
   datanewsitem = db.QuerySingle("SELECT * FROM News WHERE ID=@0", newsID);        
}else{<br />
   datanewsitem = db.QuerySingle("SELECT Top 1 ID, Title, Date, Text, FROM news ORDER BY ID desc");} 
```

...`myNewsType`无论类型名称是`datanewsitem`.

# c# - 线性投影库 C#

> ID：15597926
> 
> 赞同：0
> 
> 时间：2013-03-24T11:34:31.200
> 
> 标签：c#, math

我正在做一个项目，我需要使用线性投影技术，例如傅立叶 motzkin 消除。但是当我试图为 c# 找到一个合适的实现时，我找不到一个。我发现的唯一实现是用 c 或 c++ 实现的，称为 porta（1993 年生产）。这意味着我需要了解如何编辑代码，以便能够将其移植到 C# 并将其用作 dll。是否有任何 C# 的数值或数学库可用于进行线性投影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:45:34.493

Have a look at [ILNumerics](http://en.wikipedia.org/wiki/ILNumerics.Net). Code is in [SourceForge](http://ilnumericsnet.svn.sourceforge.net/viewvc/ilnumericsnet/) with examples. Not sure if there is an implementation of Fourier Motzkin though.

Some others are listed here in [Wikipedia](http://en.wikipedia.org/wiki/List_of_numerical_libraries#.NET_Framework_languages_C.23.2C_F.23_and_VB.NET)

Edit- There is also a more recent implementation of Fourier Motzkin in C, with an example in python. - [http://code.google.com/p/fm-eliminator/](http://code.google.com/p/fm-eliminator/)

If nothing work's out, you can just port this to C# and publish it (preferably as a contribution to one of the open source libraries).

Edit 2 - Found a few implementations in Matlab. One example [here](http://www.mathworks.in/matlabcentral/fileexchange/7957-fourier-motzkin-elimination/content/fourmotz/fourmotz.m)

Now, there is this tool called [Matlab Builder NE](http://www.mathworks.in/products/netbuilder/) (which comes with a trial) that promises that you can build .NET or COM components from a Matlab program.

# jquery - 通过 AJAX 中的表单提交进行渲染

> ID：15597929
> 
> 赞同：0
> 
> 时间：2013-03-24T11:34:59.010
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我希望我的高级搜索表单在提交后保留它的表单字段值，所以我将带有 method=POST 的表单更改为 ajax。我的控制器仍然运行良好，我能够进行休息呼叫，并因此获取数据。

问题是我不知道如何使用 ajax 再次呈现页面。我不希望 ajax 与响应有任何关系，因为响应逻辑内置在 advanced_search_order_table 中。我只需要 Ajax 来重新加载 advanced_search_orders_table。

```
<%= render "advanced_search_orders_form" %>
<div id="advanced_search_orders_table" class="fk-table ajax">
  <%= render "advanced_search_orders_table" %>
</div> 
```

在 advanced_search_orders_form.html.erb 中（仅部分片段）

```
form id="advancedSearchOrder" name="advancedSearchForm" value="advancedSearch" class=" search line" action="" onsubmit="return submitForm();">

<div class="advancedSearchFormField">
      <span class="advancedSearchFormlabel">Order Id</span>
      <%= text_area_tag('filters[order_id]',filter_params['order_id'],:rows=>10) %>
</div>

<div class="advancedSearchFormSelectField">
  <span class="advancedSearchFormlabel"> Order Sales Channel </span>

  <%= select_tag 'filters[order_sales_channel]',
                  options_for_select(
                          [["Web", "Web"], ["Phone", "Phone"]]
                  ),
                  selected: filter_params['order_sales_channel'],
                  multiple: true,
                  class: "advancedSearchFormSelectBox" %>
</div>

<input type="submit" class="advanced-search-btn" id="advancedSearchButton" name="advancedSearchButton" value="Search"/> 
```

我已将 submitForm 定义为

```
function submitForm() {
    $.ajax({type:'POST',url: '', data:$('#advancedSearchOrder').serialize(), success: function(response) {
        /*Render advanced_search_orders_table here */
    }});

    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:11:35.613

只需使用 JavaScript 解析您的响应。基本上从表中删除行，然后为每个结果添加一行。您也可以添加一些不错的动画；）

另一种选择是使用已呈现的包含数据的 HTML 页面响应该 AJAX 调用，您只需将表替换为新的表（再次使用 JavaScript）。我不知道哪个会更好。

# ios - CollectionView 下拉刷新崩溃

> ID：15597930
> 
> 赞同：0
> 
> 时间：2013-03-24T11:35:19.533
> 
> 标签：ios, xcode, collectionview

我的下拉刷新“功能”有以下代码（刷新 CollectionView

```
UIRefreshControl *refreshControl = UIRefreshControl.alloc.init;
[refreshControl addTarget:self action:@selector(startRefresh:)
         forControlEvents:UIControlEventValueChanged];
[self.collectionView addSubview:refreshControl]; 
```

但是，这将使我的应用程序崩溃，并显示以下错误消息：

```
[CollectionViewController startRefresh:]: unrecognized selector sent to instance 0x7543610
2013-03-24 12:20:10.049 

*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CollectionViewController startRefresh:]: unrecognized selector sent to instance 0x7543610' 
```

我在这里想念什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:47:11.523

确保您的`startRefresh:`方法带有参数，这就是冒号的`@selector(startRefresh:)`含义。您得到的错误意味着它找不到方法并执行它。

要了解什么是选择器以及实现目标动作模式的正确方法，我建议您查看文档，[此处](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Selector.html)和[此处](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html)。

# list - 订购 int 对

> ID：15597931
> 
> 赞同：-1
> 
> 时间：2013-03-24T11:35:23.653
> 
> 标签：list, haskell, tuples

我有一个 int 对列表，例如：

```
 [(1,2),(3,5),(0,1),(1,3),(3,0),(0,3)] 
```

我想从最小的对到最大的对这个列表进行排序。对于上面的示例，它应该是：

```
 [(0,1),(0,3),(1,2),(1,3),(3,0),(3,5)]. 
```

您可以假设给定输入的列表中没有相同的对。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T11:45:26.987

Just use the function `sort` from `Data.List`. It works on any type which is an instance of `Ord` and pairs are indeed instances.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T11:44:09.867

Tuples of 2 `Ord` values (including `Int`s) are instances of `Ord` class in turn, so you can just [`sort`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3asort) the list.

# ios - ios中的xml解析器

> ID：15597935
> 
> 赞同：0
> 
> 时间：2013-03-24T11:36:20.537
> 
> 标签：ios, xml-parsing

有代码

```
`-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"%@",elementName);
    if ([elementName isEqual:@"impproject"]) {
        impprojectdata=[[impProjectData  alloc]init];
        [impprojectdata setParentParserDelegate:self];
        [parser setDelegate:impprojectdata];
    }
} 
```

`

然后它来到这里：

```
 ` -(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
        {
        NSLog(@"did start parser:%@", elementName);
        if ([elementName isEqual:@"project"]){

            ProjectDataItem *project=[[ProjectDataItem alloc]init];
            [project setParentParserDelegate:self];
            [parser setDelegate:project];
            [items addObject:project];
           }   
        }`

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    NSLog(@"found character:%@", string);
    [currentString appendString:string];
}
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    NSLog(@"did end parser:%@", elementName);
     currentString=nil;
    if ([elementName isEqual:@"improject"]) {
        [parser setDelegate:parentParserDelegate];
        NSLog(@"items.count is %d",items.count);

    }
} 
```

那么这里

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"startElement %@",elementName);
    if ([elementName isEqual:@"DWMC_CN"]) {
        currentString=[[NSMutableString alloc]init];
        self.name=currentString;
    }else if ([elementName isEqual:@"CZXMMC_CN"]){
        currentString=[[NSMutableString alloc]init];
        self.title=currentString;
    }else if ([elementName isEqual:@"CNNAME"]){
        currentString=[[NSMutableString alloc]init];
        self.name=currentString;
    }else if ([elementName isEqual:@"COMPANY"]){
        currentString=[[NSMutableString alloc]init];
        self.title=currentString;
    }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [currentString appendString:string];
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    currentString =nil;
    if ([elementName isEqual:@"project"]) {
        [parser setDelegate:parentParserDelegate];
    }
} 
```

然后它返回第二部分代码；

所以有我的问题。它只是在数组'items'中添加一个对象；

不明白为什么……这里是github链接：github.com/TedWei/gaojiaohui

请帮我 。ios新人，可怜的家伙。

我不知道为什么 elementName 是项目。它不会创建新对象。并将其添加到数组中。它只是退出......

对不起我的英语。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:06:08.987

你可以在这里使用现成的类：http: [//troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)

它非常好，它会在解析您的 xml 数据后返回一个字典。

# google-chrome - 谷歌浏览器中的阻塞时间

> ID：15597936
> 
> 赞同：4
> 
> 时间：2013-03-24T11:36:27.077
> 
> 标签：google-chrome, web, blocking

*Google Chrome 开发者工具中的阻塞时间*是什么意思，为什么这么大？

![Chrome 开发工具](../Images/1110dc3c6339a5fff1b8bc5531592e6d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:46:27.373

> “阻塞”是请求花费在等待已建立的连接变为可用的时间（即，我们正在重用一个连接，该连接在请求开始时可用于传输另一个资源）。
> 
> 通过[https://groups.google.com/forum/?fromgroups=#!topic/google-chrome-developer-tools/8jpALcJqkUM](https://groups.google.com/forum/?fromgroups=#!topic/google-chrome-developer-tools/8jpALcJqkUM)

对此有几个潜在的解决方案，将请求拆分为其他资产的不同子域。或查看 SPDY

# javascript - 如何在 JavaScript 中仅舍入浮动数字？

> ID：15597940
> 
> 赞同：1
> 
> 时间：2013-03-24T11:36:51.330
> 
> 标签：javascript, floating-point

我有一个 javacript 输出 14.85 现在我想将它设置为 14.90 用于 14.85 和 14.84 我需要它到 14.80，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:38:51.537

这个怎么样：

```
var number = Math.round(14.85 * 10) / 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:42:06.440

这是产生您需要的确切结果的解决方案：

```
function roundFloat(n) {
    return (Math.round(n * 10) / 10).toFixed(2);
}

roundFloat(14.84);  // "14.80"
roundFloat(14.85);  // "14.90" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:38:27.717

```
var newNumber = (Math.round(oldNumber*10)/10).toFixed(2); 
```

# c# - 来自单元测试的引用项目的 C# StackTrace

> ID：15597955
> 
> 赞同：0
> 
> 时间：2013-03-24T11:38:14.093
> 
> 标签：c#, stack-trace

对于一个项目，我需要知道在单元测试结束时调用了多少方法。（或者类似于 Visual Studio 中的调用层次结构（而不​​是在运行时）。我为此创建了一个测试项目。但我只获取在单元测试项目中调用的方法。

因此，例如，我有一个具有以下类（程序集）的类库：

```
public  class Program
{
    public void A()
    {
        B();
        C();
    }

    public void B()
    {

    }

    public void C()
    {
        B();
        D();
    }

    public void D()
    {

    }
} 
```

以及具有以下测试方法的单元测试（组装）

```
 [TestMethod]
    public void TestMethod1()
    {
        StackTrace stackTrace = new StackTrace();
        new Program().A();
        int count = stackTrace.FrameCount;
    }

    [TestMethod]
    public void TestMethod2()
    {
        StackTrace stackTrace = new StackTrace();
        new Program().C();
        int count = stackTrace.FrameCount;
    } 
```

在两个单元测试中计数 = 12。当我检查 stackTrace 变量的属性时，我只看到单元测试程序集调用的方法。有没有办法将类库程序集的调用包含在 stackTrace 中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:42:44.240

看起来您需要一个测试覆盖率工具。它将显示调用了测试程序集的哪些方法。VisualStudio 内置了一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:04:47.127

您是否尝试过使用覆盖工具？（我会推荐[dotCover](http://www.jetbrains.com/dotcover/)）

工具可以在`xml`、`json`等中生成报告，以便您轻松解析并使用结果进行进一步计算。

# ios - iOS：当视图背景颜色为清晰颜色时，图层背景颜色不显示

> ID：15597956
> 
> 赞同：4
> 
> 时间：2013-03-24T11:38:20.230
> 
> 标签：ios

我有两个兄弟视图：一个灰色标签和一个绿色按钮，按钮在下面。出于某种原因，我需要设置`label.backgroundColor`为清除颜色并设置`label.layer.backgroundColor`为灰色。按钮颜色为绿色。我希望在屏幕上看到灰色（因为标签位于按钮顶部）。但我看到的只是绿色（按钮的颜色）。为什么？

**编辑：相关代码**

```
// in my custom cell
-(void)awakeFromNib
{
    [super awakeFromNib];

    // customize label
    _label.layer.cornerRadius = 5;
    _label.layer.backgroundColor = [UIColor grayColor].CGColor;
    _label.backgroundColor = [UIColor clearColor];
    _label.layer.masksToBounds = NO;

    // customize button        
    // show shadow and rounded corner at the same time

    _button.backgroundColor = [UIColor clearColor];
    _button.layer.backgroundColor = [UIColor greenColor].CGColor;
    _button.layer.masksToBounds = NO;
    _button.layer.cornerRadius = 10.0f;

    self.layer.masksToBounds = NO;
    self.layer.cornerRadius = 10.0f;
    self.layer.shadowOpacity = 0.5f;
    self.layer.shadowPath = [UIBezierPath bezierPathWithRoundedRect:_button.bounds cornerRadius:10.0f].CGPath;
    self.layer.shadowOffset = CGSizeMake(0.0f, 4.0f);
    self.layer.shadowRadius = 2.0f;

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T15:03:20.717

最后我找到了解决方案：只需颠倒这两行的顺序：

```
// both set to clear color eventually
_label.layer.backgroundColor = [UIColor grayColor].CGColor;
_label.backgroundColor = [UIColor clearColor]; 
```

对此：

```
// both set to gray eventually
_label.backgroundColor = [UIColor clearColor];
_label.layer.backgroundColor = [UIColor grayColor].CGColor; 
```

原因是对于 UILabel，（虽然不是 UIView，稍后会详细介绍）**设置其背景颜色会将其图层的背景颜色设置为 nil**。但是如果我们先设置标签背景颜色，然后再设置图层背景颜色，那么两者各走各的，那么我们会在屏幕上看到标签背景颜色。

但是对于 UIView 来说，情况就完全不同了：view 背景颜色和它的 layer 的背景颜色是一回事。因此，以最后一组为准。

但是，我在文档中找不到有关上述观察的任何信息。希望有人可以介入并提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-20T10:03:41.427

不要忘记将视图的 isOpaque 值设置为 false。这在 IB 中默认为 true。

# git - 防止 git 推送到所有分支

> ID：15597959
> 
> 赞同：3
> 
> 时间：2013-03-24T11:38:37.200
> 
> 标签：git

我想防止 git push 和 pull 到所有远程分支。我知道开关 --all 并且我希望当我设置这个开关时 git 只会推送到 all 。

当我输入**git remote show origin**时，我看到我所有的本地分支都配置为 git pull 并推送到远程分支。

**但我更喜欢它，当我输入git pull**而没有**origin branchname**时，git 只会推送实际的分支。

是否有一个配置开关可以改变这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:56:09.507

Considering the new [default push policy](https://stackoverflow.com/a/10002469/6309), you can try and set:

```
git config push.default upstream
# or
git config push.default simple
# or
git config push.default current 
```

All three are only for pushing the *current* branch.

As I explain in "[git - `push current` vs. `push upstream` (tracking)](https://stackoverflow.com/a/13751847/6309)":

> Pushing only one branch (with the mode "`simple`", "`current`" or "`upstream`") avoids the scenario where all matching branches are pushed ("default "`matching`"), even though some of the branches are not ready to be pushed.

# c++ - 没有虚拟方法的虚拟析构函数有什么害处吗？

> ID：15597962
> 
> 赞同：1
> 
> 时间：2013-03-24T11:38:49.427
> 
> 标签：c++, virtual-destructor

在我的设计过程中，有时我会添加/或删除虚拟方法。我知道的经验法则是，一旦我有了虚拟方法，我就会有一个虚拟析构函数。

我的问题：如果我在创建类时立即添加虚拟析构函数（即使还没有虚拟方法），会有什么害处吗？基本上这个想法是不要忘记它。特别是对于 n 个派生类，我以后不需要在 n 个地方更改它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T11:43:07.693

虚函数表的大小有很小的开销。可能不值得担心。虚拟析构函数还将使您的类成为非聚合类、非平凡类、非标准布局类，因此也是非 POD 类。这可能是不可取的，具体取决于手头的问题。

但是，我建议专门将您的类设计为多态或非多态。如果要以多态方式使用它们，请给它们一个虚拟析构函数。如果没有，不要。如果您需要更改它，请在需要时进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:41:04.703

唯一的危害是你的类和所有派生类都会有一个 v-table，它的大小会略有增加。即使您决定稍后将基类析构函数设为虚拟，您也不需要对派生类进行任何更改。对于包括析构函数在内的任何方法，您只需在基类中使用一次虚拟关键字。派生类中的相同方法自动变为虚拟。

作为替代方案，您可以保护您的析构函数。这将防止使用基类指针意外调用删除。

```
class A
{
    protected:
    ~A(){}
};

class B : public A
{};

int main(int argc, char *argv[])
{
    A * p = new B;
    delete p;
} 
```

在我的编译器上，它给出了以下错误

> 错误 C2248：“A::~A”：无法访问在“A”类中声明的受保护成员 a.cpp(9)：编译器在此处生成了“A::~A”a.cpp(6)：参见“声明”一个'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T11:46:12.220

不，拥有一个虚拟析构函数是非常有意义的，即使你没有任何其他虚拟方法。

但是，如果内存使用很重要，那么每个字节都很重要，如果您没有任何虚拟方法，您可以获得 4 或 8 个字节。在我的应用程序中，我有一些类，其中有数百万个实例。在这种情况下，在你的类中去掉一个 v 指针真的很有意义。

如果将析构函数从非虚拟更改为虚拟（反之亦然），我不完全理解为什么需要更改派生类。一旦一个方法是虚拟的，同样的方法在所有派生类中都是虚拟的，即使你没有指定虚拟。然而，由于风格原因，可能建议在派生类中添加 virtual，即使它不是必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T12:08:13.047

不要盲目遵守规则。也就是遵守规则，但不要盲目行事。

真正需要虚拟析构函数的唯一情况是通过其基对象指针删除对象时。经验法则概括并简化了这个条件：如果一个对象有可能通过它的基对象指针被删除，那么它将被多态地使用；多态对象很可能具有虚函数，具有虚函数的对象很可能被多态使用；因此，具有虚函数的对象很可能需要虚析构函数。

这一切都很好，花花公子，这条规则大多是有效的，但有一个更重要、更基本的事实很少被提及，部分原因是这些规则确实有效。事实是，有类似值的对象，也有其他类型的对象，它们没有一个好名字，但我将它们称为实体对象。类实体对象具有与其值分离的标识，它们使用引用语义，不​​应在没有充分理由的情况下复制它们（例如创建单独的标识），它们很可能被多态访问等。类值对象没有标识除了它们的价值之外，它们可以自由复制，它们不应该被多态地使用等等。它们是如此的不同，为它们的类设置不同的关键字是值得的！当你设计你的类时，你必须决定它属于哪个类别。然后你的问题就会自行解决。实体获得虚拟析构函数，值没有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T12:36:43.050

拥有虚拟析构函数的唯一原因是可以通过指向基类型的指针删除派生类型的对象。如果这是类的设计所要求的，那么它**必须**有一个虚拟析构函数，即使它没有任何其他虚拟函数。如果设计不包括通过指向基址的指针进行删除，那么即使它具有虚函数，它也不需要虚析构函数。束手无策的人会告诉你无论如何都要让析构函数成为虚拟的，因为它不会伤害任何东西，而且，你永远不知道。这不是技术原因。这是防止不阅读和遵循文档的用户的策略选择。

# binary - Verilog：使用分配和始终

> ID：15597968
> 
> 赞同：1
> 
> 时间：2013-03-24T11:39:30.550
> 
> 标签：binary, verilog

```
module circuit_1 (a, b, c);
input [1:0J a,b;
output [3:0J c;
assign c = a + b; 
```

如果输入 a = 2'b11 并且输入 b = 2'b10，

输出 c 有什么值？请给出描述性的答案。

还请告诉我分配和始终的功能。我有点困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T00:22:42.990

```
c = 4'b0101      // Output, implicitly a wire 
```

“assign”用于网络类型声明（Wire、Tri 等）。由于导线根据驱动它们的值更改值，因此每当 RHS 上的操作数发生更改时，都会评估该值并将其分配给 LHS（模拟导线）

always - 用于寄存器 + 组合逻辑。如果是 always(@posedge clk)- posedge clk 事件触发 always 块，块内的逻辑被评估和分配。

always @ (*) - 如果 always 块的 RHS 中的某些内容发生更改，则评估并分配该特定表达式。

想象一下分配为电线并始终作为寄存器块（现在），因为它们的行为是相同的。

# r - 我们可以使用 OR 选择查询在 data.table 中进行二进制搜索吗

> ID：15597971
> 
> 赞同：8
> 
> 时间：2013-03-24T11:39:41.227
> 
> 标签：r, data.table

按照上[一个问题](https://stackoverflow.com/questions/15597685/data-table-and-binary-search/15597713?noredirect=1#comment22118099_15597713)使用`data.table`

```
DT = data.table(x=sample(letters,1e7,T),y=sample(1:25,1e7,T),rnorm(1e7))
setkey(DT,x,y) 
```

我们可以使用二分查找来查找吗

```
DT[x=='a' | y==25] 
```

请记住`DT[J('a',25)] == DT[x=='a' & y==25]`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T15:59:25.293

是的：
为了进行二元搜索，我们需要适当的索引。

```
 indx <- rbind(DT[y==25, list(y=25), by=x], DT[.("a"), list(x="a"), by=y], use.names=TRUE)
  indx <- setdiff(indx, setdiff(indx, unique(DT[, key(DT), with=FALSE])))
  indx

  DT[.(indx)] 
```

* * *

**基准测试**：
这使我们比矢量化搜索**提高了 10 倍以上。**

```
 identical(setkey(DT[.(indx)]), setkey(DT[x=="a" | y == 25]))
  # [1] TRUE

  library(microbenchmark)
  microbenchmark(UsingIndx = DT[.(indx)],  UsingVecSearch = DT[x=="a" | y == 25], times=100 )

  Unit: milliseconds
              expr       min        lq    median        uq      max
  1      UsingIndx  34.27562  41.70119  48.13215  49.29752 231.1669
  2 UsingVecSearch 506.62670 545.85673 636.67701 680.93894 802.0842 
```

* * *

* * *

*为方便起见，我们可以将代码的“创建索引”*部分包装成一个不错的函数，这样我们就可以在一行中调用它。例如：

```
DT[.(OrIndx("a", 25, DT))] 
```

其中`OrIndx()`定义如下：

```
OrIndx <- function(xval, yval, DT)  {
  # TODO: Allow for arbitrary columns and column names
  if(!is.data.table(DT))
    stop("DT is not a data.table")

  # create all appropriate combinations
  indx <- rbind(DT[y==yval, list(y=yval), by=x], DT[.(xval), list(x=xval), by=y], use.names=TRUE)

  # take out any combinations in indx that are not actually present in DT and return 
  return( setdiff(indx, setdiff(indx, unique(DT[, key(DT), with=FALSE]))) )
} 
```

## 解释：

这里的想法是执行“或”搜索需要某种形式的组合。
在标准向量搜索中，这种组合是每个单独向量搜索的结果。

data.table 通过允许搜索提供了一些极大的速度改进，例如

```
 DT[.(c("cdf", "tmb"), c(25, 3))] 
```

因此，该问题的自然解决方案是使用：

```
 DT[.(c(<all values of x>, "a"), c(25, <all values of y>))] 
```

唯一的问题是回收不能正确排列。
有一个像这样的选择是理想的

```
 DT[.(  list( c(unique(x), y=25), c(x="a", y=unique(y) )  )] 
```

但据我所知，这还没有实现（还没有！）
所以相反，我们可以采取适当的组合。
上面的函数`OrIndx`正是这样做的。 *（它又快又脏，并且有更有效的方法来创建索引）*

* * *

### 更新其他基准

根据@Aruns 的建议，我们包括

```
rbind(DT[J("a")], DT[J(setdiff(unique(x), "a"), 25)])
rbindlist(list( DT[J("a")], DT[J(setdiff(unique(x), "a"), 25)] )) 
```

在 1e6 和 1e7 行上测试：

```
 ## Using 1 Million rows
  > microbenchmark(Using_Indx = DT[.(indx)], Using_RbindList = rbindlist(list(DT[J("a")], DT[J(setdiff(unique(x), "a"), 25)])), Using_Rbind = rbind(DT[J("a")], DT[J(setdiff(unique(x), "a"), 25)]),  Using_VecSearch = DT[x=="a" | y == 25], times=70L )
  Unit: milliseconds
               expr       min        lq    median        uq        max
  1      Using_Indx  4.865089  5.755615  5.813938  5.957352   6.880743
  2     Using_Rbind 42.657953 49.239558 49.682407 50.505977 139.770670
  3 Using_RbindList 36.319170 44.169151 44.484350 45.279158 155.361338
  4 Using_VecSearch 49.003307 64.030384 64.443666 65.123886 150.099946

  ## Using 10 Milliion rows
  Unit: milliseconds
               expr       min       lq   median        uq      max
  1      Using_Indx  33.71108  47.5402  48.7574  50.75285 122.0950
  2     Using_rbind 492.38244 535.6062 565.8623 590.92841 727.3907
  3 Using_RbindList 436.29325 478.3626 507.4665 525.25980 657.6639
  4 Using_VecSearch 511.86248 607.8046 643.9822 688.36733 765.3997

  # Making sure all the same results: 
  > identical(setkey(DT[.(indx)]), setkey(DT[x=="a" | y == 25]))
  [1] TRUE
  > identical(setkey(DT[.(indx)]), setkey(rbind(DT[J("a")], DT[J(setdiff(unique(x), "a"), 25)])))
  [1] TRUE 
```

请注意，对于 SMALL 表（小于`15K`行），向量搜索更快（对于非常小的表，大约快两倍）

```
 ## Using  100 Rows
  > microbenchmark(Using_Indx = DT[.(indx)], Using_RbindList = rbindlist(list(DT[J("a")], DT[J(setdiff(unique(x), "a"), 25)])), Using_rbind = rbind(DT[J("a")], DT[J(setdiff(unique(x), "a"), 25)]),  Using_VecSearch = DT[x=="a" | y == 25], times=150L )
  Unit: microseconds
               expr      min       lq    median       uq      max
  1      Using_Indx  884.819  901.854  917.3715  933.642 9740.046
  2     Using_rbind 2385.842 2424.893 2462.5210 2502.704 4266.637
  3 Using_RbindList 1962.504 2005.594 2027.4085 2069.516 4238.146
  4 Using_VecSearch  386.867  401.328  407.5730  420.647 2908.090 
```

这种模式一直保持到大约 10,000 行，此时我们开始看到收益：

```
 ## 10,000 Rows
  Unit: microseconds
               expr      min       lq    median       uq      max
  1      Using_Indx  891.374  921.784  931.6585  956.737 3780.971
  4 Using_VecSearch  796.316  815.965  824.1480  845.151 2531.314

  ## 15,000 Rows
  Unit: microseconds
               expr      min       lq   median       uq      max
  1      Using_Indx  913.963  939.198  954.518  986.609 2900.174
  4 Using_VecSearch 1018.830 1041.449 1053.098 1072.188 8418.470

  ## 30,000 Rows
  Unit: microseconds
               expr      min       lq   median       uq       max
  1      Using_Indx  964.402  995.883 1018.535 1045.908  5999.390
  4 Using_VecSearch 1649.231 1709.090 1801.760 1927.976  8868.470

  ## 100,000 Rows
  Unit: milliseconds
               expr      min       lq   median       uq       max
  1      Using_Indx 1.142318 1.181023 1.198611 1.268417  3.611945
  4 Using_VecSearch 4.663948 4.763179 5.052995 6.058354 12.133510

  ## 10,000,000 Rows   (only ran 30 reps for this one)
  Unit: milliseconds
               expr       min        lq    median        uq      max
  1      Using_Indx  33.95004  42.24995  48.90363  50.15424 177.0991
  2 Using_VecSearch 512.34760 557.02867 622.37670 662.14323 861.3465 
```

# javascript - Javascript/网络浏览器线程模型

> ID：15597972
> 
> 赞同：9
> 
> 时间：2013-03-24T11:39:41.970
> 
> 标签：javascript, multithreading

如果我正在运行 javascript 代码，例如在计时器上执行一些操作，并且此代码嵌入在 Web 浏览器的选项卡 1 和选项卡 2 的网页中，那么客户端代码可以同时运行吗？还是 JavaScript 客户端代码总是只在一个浏览器线程中运行？

或者，如果有一个包含父框架和子框架的框架集，那么在这种情况下，javascript 代码可以同时运行吗？

是否有标准指定模型或者它依赖于浏览器？

我的主要目标环境是 IE9，所以很想知道那里发生了什么。

编辑我不是在寻找线程支持或如何在 javascript 中进行线程。我个人认为没有必要。这也让生活变得更加复杂。我只想知道我是否需要担心它，如果需要，在哪些浏览器上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T11:59:11.963

对于单个 JavaScript“对象空间”（浏览器中的单个页面或 node.js 中的解释器实例），最多运行一个线程。事实上，在 JavaScript 的上下文中谈论线程是没有意义的。JS 执行模型是基于事件循环和回调的。

不同的框架永远不能同时运行，因为它们可以访问彼此的 DOM（以及扩展的任意对象）。这会使线程不安全。

使用 web worker 时，无法直接访问 worker 边界上的任何数据结构，因此线程是不可观察的并且可以安全地发生。这里唯一的通信是通过消息传递。

# java - 将注释字符添加到 StringBuffer 中的行

> ID：15597976
> 
> 赞同：-4
> 
> 时间：2013-03-24T11:40:09.067
> 
> 标签：java, parsing, stringbuffer

我有一个 StringBuffer 代表一个文件。
我想在（某些）行的开头添加注释字符。
例如，如果我的内容是这样的：

```
line  
line  
line  
line-to-comment  
line-to-comment  
line  
line 
```

我想得到以下结果：

```
line  
line  
line  
#line-to-comment  
#line-to-comment  
line  
line 
```

顺便说一句，我们的语法不允许多行注释（例如 /** ... **/）。
最好的方法是什么？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:48:23.867

最简单的解决方案可能是直接的字符串操作。

```
StringBuffer sb = ....:
int pos = sb.indexOf("line-to-comment");
sb.insert(pos, "#"); 
```

如果您重复执行此操作，您需要检查 pos-1 处的字符是否与“#”不同。

至少这是我应该做的……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:09:46.910

我最终做了什么：

```
String uncommentedLines = myFile.substring(startIndex, endIndex);  
String commentedBlock = "#" + uncommentedLines.replaceAll(System.lineSeparator(), System.lineSeparator()+"#");  
myFile.replace(startIndex, endIndex, commentedBlock); 
```

# opengl - opengl中光计算属于什么空间？

> ID：15597989
> 
> 赞同：2
> 
> 时间：2013-03-24T11:41:28.227
> 
> 标签：opengl, glsl

上周，我看到了一个着色器脚本，它执行延迟着色。但我对顶点着色器所做的一些变换感到困惑。例如：

垂直：

```
varying vec3 normals;
varying vec4 position;
uniform mat4 ModelMatrix;
uniform mat4 WorldMatrix;

void main( void )
{
    // Move the normals back from the camera space to the world space
    mat3 worldRotationInverse = transpose(mat3(WorldMatrix));

    gl_Position     = gl_ModelViewProjectionMatrix * gl_Vertex;
    gl_TexCoord[0]  = gl_MultiTexCoord0;
    **normals           = normalize(worldRotationInverse * gl_NormalMatrix * gl_Normal);         <<<<<**
    position        = gl_ModelViewMatrix * gl_Vertex;
    gl_FrontColor = vec4(1.0, 1.0, 1.0, 1.0);
} 
```

碎片：

```
varying vec4        position;
varying vec3        normals;
varying mat4        TBN;
uniform sampler2D   tDiffuse;

void main( void )
{
    gl_FragData[0]      = vec4(texture2D(tDiffuse,gl_TexCoord[0].st).rgb, 0);
    gl_FragData[1]      = vec4(position.xyz,0);
    gl_FragData[2]      = vec4(normals.xyz,0);
} 
```

我真的不明白为什么要将法线转换为世界空间（模型空间）。因为我认为眼睛空间（相机空间）中的法线至少可以消除不可见的顶点，甚至是多边形。我不知道我是否理解错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:36:40.237

光照可以在任何预投影空间（例如，世界坐标或眼睛坐标）中完成，只要所有对象和灯光都在同一个空间中。

此着色器在眼睛坐标中进行照明 - 您可以通过使用旧的`gl_NormalMatrix`隐式统一变量来判断。这种方法模仿了传统 OpenGL 管道中所做的事情，其中​​照明（在没有着色器时由 OpenGL 实现完成）是在眼睛坐标中完成的。在眼睛坐标中进行照明并没有错，只是它不像其他空间那样直观。

更现代的方法在世界坐标中进行照明，并且不需要使用法线变换矩阵（这是当前模型视图矩阵的上 3x3 的逆转置）。

# openerp - Openerp 6.1：在销售订单行中显示日期范围

> ID：15597996
> 
> 赞同：0
> 
> 时间：2013-03-24T11:42:07.733
> 
> 标签：openerp

我试图在 sales.order.line 的搜索部分显示日期范围，即“日期从”和“日期到”，但它不显示。我在下面附上了我的代码。请问我错过了什么：

班级代码：

```
from osv import fields, osv
class sales_invoice_date(osv.osv):
_name='sale.order.line'
_inherit='sale.order.line'
_columns={
    'ordered_date': fields.related('order_id', 'date_order', type='date',    relation='sale.order', select= 1, string='Date Ordered'),
    'due_date_from':fields.function(lambda *a,**k:{}, method=True, type='date',string="Due date from"),
    'due_date_to':fields.function(lambda *a,**k:{}, method=True, type='date',string="Due date to"),

}
sales_invoice_date() 
```

查看代码：

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

    <record id="view_sale_orderlinedate" model="ir.ui.view">
        <field name="name">sale.order.line.dateinherit</field>
        <field name="model">sale.order.line</field>
        <field name="type">tree</field>
        <field name="inherit_id" ref="sale.view_order_line_tree"/>
        <field name="arch" type="xml">
            <field name="order_id" position="after">
                        <field name="ordered_date" />
                        </field>
            </field>

    </record>

    <record id="view_sale_orderlinedate2" model="ir.ui.view">
        <field name="name">sale.order.line.dateinherit2</field>
        <field name="model">sale.order.line</field>
        <field name="type">search</field>
        <field name="inherit_id" ref="sale.view_sales_order_uninvoiced_line_filter"/>
        <field name="arch" type="xml">

            <field name="product_id" position="after">
                        <field name="ordered_date" />
                        <field name="due_date_from" filter_domain="[('date_due','&gt;=',self)]"/>
                        <field name="due_date_to" filter_domain="[('date_due','&lt;=',self)]"/>
          </field>
          <field name="salesman_id" position="after">  
                        <field name="due_date_from" filter_domain="[('date_due','&gt;=',self)]"/>
                        <field name="due_date_to" filter_domain="[('date_due','&lt;=',self)]"/>
          </field>
        </field> 
    </record>

    </data>
</openerp> 
```