# StackOverflow 问答 12791000-12791999

# java - Java 有符号右移

> ID：12791001
> 
> 赞同：4
> 
> 时间：2012-10-08T23:47:43.957
> 
> 标签：java

我在java代码中看到了这一点。

```
int n = 300 //passed through a function
size = (n + 31) >> 5 //size = 10 
```

有什么意义`5`？`31`//should something to do with int size (31 bit + 1 sign) 有什么意义

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T23:49:17.013

5 的意义在于 32 = 2^5。

```
size = (n + 31) >> 5 
```

设置`size`为，这是存储位标志`ceiling(n/32)`所需的 32 位整数的数量。`n`

加上 31`n`是为了确保被除数至少与大于等于 32 的最小倍数一样大`n`。

# ruby-on-rails - starter ruby - 我的第一个 ruby 网站

> ID：12791003
> 
> 赞同：0
> 
> 时间：2012-10-08T23:48:14.527
> 
> 标签：ruby-on-rails, ruby

我正在寻找我的第一个基于 ruby​​ 的网站。

我假设正在查看`print "hello"`应该有效的教程，但事实并非如此。

任何指针？我假设这是一个愚蠢的菜鸟问题。

我的文件位于 mysite.com/test.rb

谢谢！

（这更像是一个虚拟的入门问题而不是编码，所以它在这里而不是堆栈）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T23:52:05.760

看看[辛纳屈](http://www.sinatrarb.com/)。您可以在 5 行代码中创建一个 hello world 站点，然后从那里开始查看教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:51:49.187

Check out Ruby on Rails resource [http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book). It is very easy to start learning.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:54:57.110

If your file only contains the following

```
print "hello" 
```

then it most certainly wont just work by browsing to `site.com/foo.rb`

You need things setup like a webserver to handle the request and route it to a ruby interpreter, etc...

# android - OnCreate onResume 和 onRestart 问题

> ID：12791004
> 
> 赞同：0
> 
> 时间：2012-10-08T23:48:28.263
> 
> 标签：android, lifecycle

我有一个使用 PagerAdapter 的活动应用程序。在 OnCreate 事件中，我触发了 PagerAdapter 中所有 7 个页面的膨胀。各个页面都有标准小部件，一个页面有谷歌地图。在 AVD 中进行测试时一切正常。

但是，如果我的应用程序被暂停或停止，然后重新启动或恢复怎么办？我在 pageradapter 中的所有页面的膨胀是否都会被删除？我必须重新充气所有页面吗？

更普遍...

我已经阅读了很多关于我的应用程序停止或暂停发生的情况以及在重新启动或恢复时我应该做什么的文章，但我还没有看到需要重建和不需要重建的精确说明. 我读到“这是刷新 UI 的好地方”，但我不确定这到底是什么意思。

乞讨的问题可能是...

我的内部状态是否已恢复，即我的变量、sqlLite db、文件内容的值。

我的小部件中的值是否已恢复，即文本框中的字符。

如果暂停或停止可能发生在 for 循环或代码块的中间，我如何防止损坏？

谢谢，加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:17:14.397

> 但是，如果我的应用程序被暂停或停止，然后重新启动或恢复怎么办？我在 pageradapter 中的所有页面的膨胀是否都会被删除？我必须重新充气所有页面吗？

如果你的意思是应用程序`Activity`，当它暂停时，这意味着它现在不是焦点`Activity`。所有的状态都还在。这基本上意味着您不能接受任何前台事件，直到`onResume()`. 如果操作系统决定调用 ，`onSaveInstanceState()`您实际上可以存储诸如实例变量的值之类的东西，或者只是为新实例读取的标志。你不能在这里存储复杂的东西。所以像`Thread`or`Cursor`实例这样的东西是不合适的。基本上任何不是“数据”的东西。

如果活动被破坏甚至进程被杀死，那么是的，您将需要重新绑定并重新充气所有内容。然而，它的美妙之处在于，在大多数情况下，您不必做任何特别的事情。只有在您可能已经写入捆绑包的情况下，您`onSaveInstanceState()`才需要做一些额外的工作。

> 我的内部状态是否已恢复，即我的变量、sqlLite db、文件内容的值。

如果转换仅在 onPause 和 onResume 之间进行，则可以。一切都应该没问题。如果有销毁或进程终止，活动将重新启动，`onCreate()`并且必须根据`Bundle savedInstanceState`. 稍后我将介绍 sqlite 和文件。

> 我的小部件中的值是否已恢复，即文本框中的字符。

通常如果他们有`saveEnabled(true)`（大多数人有）并且`TextView`有一个 freezesText 属性，可以让他们记住最后设置的文本。但是，大多数情况下，如果您在`onSaveInstanceState()`调用期间正确保存了状态，则很可能您不仅存储了 UI 状态，还存储了其他方式。在这种情况下，您最好在进行下一个时同步它们`onCreate()`

> 如果暂停或停止可能发生在 for 循环或代码块的中间，我如何防止损坏？

所以`onPause()`并`onStop()`发生在主 UI 线程上。如果您当前正在 UI 线程上运行代码，则它必须在这些其他回调发生之前完成。如果您在其他线程上运行，那么是的，您必须尝试在 UI 线程上完成任务的输出。它简化了很多。

另一方面，杀戮可能会发生。当我们谈论腐败时，这通常会影响程序内存之外的东西。就像您打开了文件句柄或打开了 sqlite 光标或打开了网络套接字一样。有了这个，你必须在使用它之前检查状态。

IE

*   在读取或写入目录之前确保目录确实存在
*   确保文件的内容以前被正确写入（简单的预期校验和通常在这里工作或版本元数据）。
*   在使用 sqlite 时使用事务，以确保您只将数据以完整的原子块写入表，这样您就没有表的行引用其他表中不存在的状态。
*   网络连接将被重置，并且您选择的网络协议之类的东西应该与您连接的应用程序一起为您进行完整性检查。

希望这会有所帮助，虽然它还没有完全完成，但它是一个很好的开始方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:06:24.733

在暂停和停止状态下，您的所有对象都将被保留，您无需担心循环中断，除非完成可能会产生 ANR 需要超过 5 秒。

但是，当进入这些状态以释放不需要或可以轻松重新创建的对象时，特别是当它们使用大量内存时，并在重新进入状态恢复或重新启动时重新创建它们，这是一种很好的做法。

当您的应用程序进入 Destroy 状态时，您的所有对象都将丢失。

# unity3d - Unity3d 与刚体的非传统蛇游戏碰撞

> ID：12791008
> 
> 赞同：1
> 
> 时间：2012-10-08T23:48:52.703
> 
> 标签：unity3d, collision

我正在使用 Unity3D 对经典的诺基亚蛇游戏进行改造。我们决定尝试重做蛇的工作方式。

这里的视频展示了我到目前为止的演示，新的控制设置 [http://dl.dropbox.com/u/4306843/Unity%202012-10-08%2010-11-05-44.avi](http://dl.dropbox.com/u/4306843/Unity%202012-10-08%2010-11-05-44.avi) http： //dl.dropbox.com/u/4306843/Unity%202012-10-08%2017-51-40-42.avi

我基本上是在寻找一种方法来获得这种影响，但会与刚体和自身（或者可能只是头部）发生碰撞。

代码基于此处的信息。 [http://processing.org/learning/topics/follow3.html](http://processing.org/learning/topics/follow3.html)

任何关于如何让蛇不穿透刚体的帮助或建议将不胜感激！

大部分工作都在这里完成，它为链中的每个对象调用。

```
void dragSegment(int i, float xin, float yin)
        {
            float dx = xin - x[i];
            float dy = yin - y[i];
            float angle1 = Mathf.Atan2(dy, dx);
            x[i] = xin - Mathf.Cos(angle1)*segLength;
            y[i] = yin - Mathf.Sin(angle1)*segLength;

            //set object pos
            obj[i].GetComponent<Rigidbody>().MovePosition(new Vector3(x[i],y[i],0));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:25:51.173

解决方案实际上非常简单。我需要在拖动对象和对撞机之间获取向量，对向量进行归一化并将其添加回 x 和 y 位置，以便像正常一样进行更新。

这是更新的代码，

```
void DragSegment(int i, float xin, float yin)
{
    if (obj[i].Hit)
    {
        Vector2 objV = new Vector2(x[i] - obj[i].Obj.GetComponent<Body ().hitObjectPos.x, y[i] - obj[i].Obj.GetComponent<Body>().hitObjectPos.y);
        objV = objV.normalized;

        x[i] += objV.x*1.2f;
        y[i] += objV.y*1.2f;

    }
    //Getting difference with last objects position
    float dx = xin - x[i];
    float dy = yin - y[i];
    angle1 = Mathf.Atan2(dy, dx);
    x[i] = xin - (Mathf.Cos(angle1) * segLength);
    y[i] = yin - (Mathf.Sin(angle1) * segLength);

    //simple gravity effect
    if (gravity == 1) y[i] += 0.1f;

    obj[i].Obj.transform.position = (new Vector3(x[i], y[i], 0));
} 
```

# mysql - 如何使用 GROUP BY 和 ORDER BY 处理 MySQL 结果集过滤器

> ID：12791016
> 
> 赞同：0
> 
> 时间：2012-10-08T23:49:53.363
> 
> 标签：mysql

我正在尝试创建一些有用的搜索过滤器，其中包括选择选项后将被过滤的子集的计数。但是，对于一个相当大的数据表，我怀疑我的查询效率非常低。我不确定还有什么其他策略可以解决这个问题。

```
id | color | size
 1 | Red   | Small
 2 | Blue  | Large
 3 | Green | Large
 4 | Blue  | Small
 5 | Red   | Small
 6 | Red   | Small 
```

我有 8 个属性列（例如颜色、大小、类型），表中有 50 万条记录。

我正在尝试创建“过滤器”，例如：

```
 SELECT `color`, COUNT(`color`)
    FROM `table`
GROUP BY `color`
ORDER BY `color` 
```

并会产生类似的结果。

```
Blue  (2)
Green (1)
Red   (3)

Large (2)
Small (4) 
```

然后，一旦有人选择了其中一个过滤器，例如 Small (4)，那么我们需要添加一个 WHERE size = Small，那么它就会有类似的东西。

```
 SELECT `color`, COUNT(`color`)
    FROM `table`
   WHERE `size` = 'Small'
GROUP BY `color`
ORDER BY `color`

Blue (1)
Red  (3) 
```

但是，这开始运行得非常缓慢。我认为这是因为 group by、order by 可能会创建临时表？另外，必须为每个过滤器块运行不同的查询。SELECT`color`用于颜色过滤器，SELECT`size`用于尺寸过滤器。这导致其中 8 个 groupby/orderby 查询在 500k 数据表上运行。有更好的方法吗？

一个问题是，结果集一直在变化，因此即使缓存 5 分钟也可能有相当过时的结果计数。

另外，如果我需要提供一些额外的数据来帮助开发替代方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:54:34.123

它将通过添加一个`Index`on column`color`和另一个 on column来提高其性能`size`。

```
CREATE INDEX size_index ON tableName (size);
CREATE INDEX color_index ON tableName (color); 
```

或者

```
ALTER TABLE tableName ADD INDEX size_index (size);
ALTER TABLE tableName ADD INDEX color_index (color); 
```

# wpf - 在 WPF UserControl 中公开控件的属性

> ID：12791019
> 
> 赞同：2
> 
> 时间：2012-10-08T23:49:58.217
> 
> 标签：wpf, dependency-properties

我有一个用户控件，里面有一个网格控件

```
 <UserControl x:Class="MyGrid">
      <Telerik:RadGridView EnableRowVirtualization="false"> 
     </Telerik:RadGridView/>
 </UserControl> 
```

如何使用 DependencyProperty 在用户控件中公开控件的 EnableRowVirtualization 属性，以便当有人使用 MyGrid 用户控件时，用户将执行类似这样的操作

```
 <grids:MyGrid  EnableRowVirtualization="false"> </grids:MyGrid> 
```

更新：现在，这就是我想出的

```
 public partial class MyGrid //myGrid userControl
 {
    public bool EnableRowVirtualization
    {
        get { return (bool)GetValue(EnableRowVirtualizationProperty); }
        set { SetValue(EnableRowVirtualizationProperty, value); }
    }

    // Using a DependencyProperty as the backing store for EnableRowVirtualization.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty EnableRowVirtualizationProperty =
        DependencyProperty.Register("EnableRowVirtualization", typeof(bool), typeof(MaxGridView), new UIPropertyMetadata(false, OnEnableRowVirtualizationPropertyChanged)
     );

    private static void OnEnableRowVirtualizationPropertyChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        var grid = (RadGridView)depObj;

        if (grid != null)
        {
            grid.EnableRowVirtualization = (bool)e.NewValue;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:19:49.163

如果你给 Telerik 网格起一个名字，你就可以从依赖属性的代码中访问它。如果在定义依赖项属性时还将它与 PropertyChanged 属性元数据结合起来，那么您可以简单地将值传递到底层网格。

这只是我的想法，但这样的事情应该可以解决问题：

```
public static readonly DependencyProperty EnableRowVirtualizationProperty =
    DependencyProperty.Register("EnableRowVirtualization"
    , typeof(bool)
    , typeof(MyGrid)
    , new UIPropertyMetadata(false, OnEnableRowVirtualizationPropertyChanged) 
    );

private static void OnEnableRowVirtualizationPropertyChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
{
    var myGrid = depObj as MyGrid;
    if (myGrid != null)
    {
        myGrid.InnerTelerikGrid.EnableRowVirtualization = e.NewValue;
    }
} 
```

有关更多信息，请查看[*DependencyProperty.RegisterAttached Method (String, Type, Type, PropertyMetadata)*](http://msdn.microsoft.com/en-us/library/ms597497.aspx)和[*UIPropertyMetadata Constructor (Object, PropertyChangedCallback)*](http://msdn.microsoft.com/en-us/library/ms587986.aspx)。

# azure - Windows Azure 虚拟机在达到支出限额后被删除 - 我该如何取回？

> ID：12791020
> 
> 赞同：7
> 
> 时间：2012-10-08T23:50:00.133
> 
> 标签：azure, azure-virtual-machine

从标题可以看出，我在 Azure 上设置了一个虚拟机，并安装了我公司为客户托管的网站和数据库。支出限制未解除，达到后我的虚拟机被删除。

从那时起，我已经取消了支出限制，但我不知道如何取回 VM，或者这是否可能。我需要采取哪些步骤才能回到原来的位置？这台服务器上的数据库是否永远消失了？我花了几个小时让这个服务器更新到最新版本和 Web 平台安装程序软件。如果现在一切都丢失了，这将是相当残酷的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T00:18:55.810

您确定虚拟机确实被删除了，还是部署被删除了？签入虚拟机选项卡下的门户。查看“磁盘”部分，看看那里是否有代表正在运行的服务器的磁盘。

如果是这样，您应该能够使用门户底部的新建按钮创建一个新的虚拟机实例。单击新建按钮并选择计算 > 虚拟机 > 从库。然后单击弹出屏幕下的我的磁盘。这将允许您从服务器中选择代表 OS 磁盘的磁盘。

您可能还想检查运行服务器的云服务容器是否也被删除。当您创建虚拟机时，会创建一个云服务来充当该机器实例的容器。您还可以将其他机器添加到同一个容器中。查看门户中的云服务下，看看是否有一个名称与您为虚拟机设置的名称一样。如果是这样，那么您要么必须删除此名称，以便重新使用该名称，要么可以使用 PowerShell cmdlet 启动虚拟机并将其放入现有的云服务容器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:48:29.250

我也有同样的经历。我们的 Azure 虚拟机不见了，当它也从管理门户中丢失时，我真的很害怕。我是这样解决的。

1.  从 Azure 帐户门户中删除信用卡的支出限额。
2.  删除与虚拟机同名的云服务。虚拟机消失后，云服务只是一个空容器。
3.  通过创建新的虚拟机很容易恢复丢失的虚拟机。选择从 Gallery 创建一个新的 VM，在 Gallery 下，您可以在“我的磁盘”下找到您丢失的机器硬盘。
4.  等待机器恢复，然后启动它。
5.  现在您必须手动重新创建所有网络端点。这很痛苦，因为我安装了很多不同的流媒体服务器。

我希望 Azure 只停止虚拟机，而不是在客户付款失败时静默删除它。特别是因为很难理解哪些服务是免费的，哪些服务是免费试用的，哪些服务必须付费。

# php - 如何从单个中获取多个值HTML/PHP 中的变量？好的，所以我拥有的是 HTML 表单中的标准选择选项，但我想做的是从单个选项值将多个值发送到接收 PHP 脚本。比如这样的（我知道不正确）： <select name="size" id="size" type="text"><option value="3">3 Inches x 5 Inches</option> <option value="6" <="" h1="">ID：12791021 赞同：4 时间：2012-10-08T23:50:04.220 标签：php, html, forms, variables, select 回答 #1 赞同：10 时间：2012-10-08T23:52:47.260 您可以在值中传递两个值 <select name="size" id="size" type="text"> .... <option value="6x4" >6 Inches by 4 Inches</option> </select> 在后端，您可以将其拆分以获取值 list($x,$y) = explode("x",$_GET['size']); // or POST echo $x; // 6 echo $y; // 4 回答 #2 赞同：1 时间：2012-10-08T23:52:45.390 在值属性中使用分隔符怎么样？ <option value="3_5" >3 Inches by 5 Inches</option> 现在，当您在 PHP 中检查这些值时，您可以简单地使用explode()值来提取它们。 $sizes = explode('_',$_POST['size']); 您现在将拥有一个包含分隔值的数组 - array ( 0 => '3', 1 => '5', ) 在此示例中，我选择了下划线_字符作为分隔符，但您可以使用任何您想要的字符。 参考 - explode()</option></select>

# java - 如何为 JMX 连接器设置请求超时

> ID：12791025
> 
> 赞同：15
> 
> 时间：2012-10-08T23:50:30.703
> 
> 标签：java, jmx

我正在尝试为 JMX 连接器设置请求超时，但似乎它不起作用。

```
env.put("jmx.remote.x.request.waiting.timeout", new Long(30000)); 
```

但由于它不起作用，我搜索了一下原因，发现在标准 JMX 远程 api 中不支持上述环境变量。

有没有其他方法可以设置请求超时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-18T11:45:18.260

如果您使用默认的 JMX 协议 - RMI - 那么客户端超时的最佳选项是全局 RMI 连接超时。当然，只有当您不需要使用必须永远打开的 RMI 连接时，它才会起作用。

这是超时的示例属性（取自 Oracle RMI 文档：[http](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/sunrmiproperties.html) ://docs.oracle.com/javase/7/docs/technotes/guides/rmi/sunrmiproperties.html ）：

```
-Dsun.rmi.transport.tcp.responseTimeout=60000 
```

我已经测试过了，它确实有效。在 oracle 文档中，对于通信的客户端和服务器端，还有一些其他有用的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-12T08:59:23.623

您可以尝试这些代码来设置 JMX 连接器超时：

```
 JMXConnector connectWithTimeout(JMXServiceURL url, long timeout, TimeUnit unit) {
    ExecutorService executor = Executors.newSingleThreadExecutor();
       Future<JMXConnector> future = executor.submit(new Callable<JMXConnector>() {
            public JMXConnector call() {
                return JMXConnectorFactory.connect(url);
            }
              });
       return future.get(timeout, unit);
          } 
```

# java - android和ios通讯

> ID：12791028
> 
> 赞同：-1
> 
> 时间：2012-10-08T23:50:51.500
> 
> 标签：java, android, ios

我想知道我是否可以在 ios 和 android 之间传递对象。

我正在使用命令设计模式来在 2 部 android 智能手机之间传递不同的命令。我现在对如何使用 ios 平台与 iphone 智能手机进行通信很感兴趣

JSON可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:57:26.527

我承认我对“命令设计模式”知之甚少。这是我的两分钱。

您不能在两种不同的语言之间传递*对象。*对象仅在运行时以多种不同方式在内存中创建，具体取决于语言。您可以将对象序列化为文本 (json)，然后以另一种语言反序列化为对象的相同**模型**。因此，例如，假设您的对象在 c# 中

```
public class Person
{
    String firstName { get; set; }

    public Person(String name)
    {
        this.firstName = name;
    }

} 
```

JSON 只能为您做到这一点

> ```
> {"Person": [{"Name": "Richard"}]} 
> ```

注意 json 如何只保留对象的数据结构？如果你有调用其他函数或进行某种计算的函数，json 将无法做到这一点。但一切都没有丢失！您可以做的是传递一个 json*消息*对象，该对象一旦解析，您的代码就可以根据消息检测并采取行动。

示例 json 消息可能是

```
{"REPLY": [{"Response" : "OK"}]} 
```

然后在 iOS 或 java 中，解析它，然后执行 if 语句检查（IF OK，THEN.... ELSE...）。

所以简而言之，你不能直接在不同语言之间传递对象。您可以传递数据结构。此数据结构可以帮助将消息传递给 ios 或 java 或 window 7，您可以实现这些消息来执行您需要执行的任何操作。希望这有帮助....？！

[http://en.wikipedia.org/wiki/Serialization](http://en.wikipedia.org/wiki/Serialization)

将 java 转换为 json 的 API [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# php - 转义用户输入的 URL

> ID：12791034
> 
> 赞同：1
> 
> 时间：2012-10-08T23:52:08.010
> 
> 标签：php

我有一个网站，允许用户输入网站的 URL 以与其他用户共享。

我们目前在向其他用户显示 URL 时会对其进行 htmlentities() 处理，但这有时会由于转换有效字符而导致 URL 损坏。

从 URL 中删除潜在恶意字符同时尽可能少地破坏 URL 的最佳方法是什么？

```
Example
Original URL: website.com?foo=1&bar=2
Escaped/Broken URL: website.com?foo=1&amp;bar=2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:57:34.633

这取决于你输出到什么，但如果它是 html，你可以使用它[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)。那只会转义在 html 中具有特殊含义的字符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T23:59:17.397

您应该使用 REGEX 来满足您的自定义规则。

# php - PHP sizeof 或计数不正确

> ID：12791041
> 
> 赞同：0
> 
> 时间：2012-10-08T23:52:37.757
> 
> 标签：php, arrays, multidimensional-array

以下是从 XML 文档转换而来的数组的 print_r：

```
Array
    (
        [layer1] => Array
            (
                [item] => Array
                    (
                        [item-id] => 1886731
                        [item-name] => Bad Dog
                        [category] => pets
                        [link] = http://www.baddog.com/
                    )
            [total-matched] => 1
        )
    ) 
```

对于上面的数组， sizeof($myarray[layer1][item]) 应该返回 1，但它返回 4。如果有多个“项目”项目，我会得到正确数量的“项目”项目。无论我使用“sizeof”还是“count”，都会发生同样的错误。当只有一项时，如何让 PHP 返回“1”？

因此，如果有一个项目，我无法使用 array[layer1][item][0][item-name] 访问 item-name，我必须使用 array[layer1][item][item-name]。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T00:17:46.960

两者之间存在天壤之别：

```
$array1 = array(
  'layer1' => array(
    'item' => array(
      '0' => array(
        'item-id' => 123123,
        'item-name' => 'Bad Dog',
        'category' => 'pets',
        'link' => 'http://www.baddog.com/',
      ),
    )
  )
); 
```

和：

```
$array2 = array(
  'layer1' => array(
    'item' => array(
       'item-id' => 123123,
       'item-name' => 'Bad Dog',
       'category' => 'pets',
       'link' => 'http://www.baddog.com/',
    )
  )
); 
```

基本上它们是不同的结构，PHP 正确返回以下内容：

```
count($array1['layer1']['item']);
/// = 1 (count of items in the array at that point)

count($array2['layer1']['item']);
/// = 4 (count of items in the array at that point) 
```

如果您希望计算对`['layer1']['item']`您的应用程序有意义的计数，您将始终需要`['layer1']['item']`是一个包含多个数组结构的数组......即`$array1`如上所示。这就是为什么我问是什么生成了你的数组结构的原因，因为——不管它是什么——它基本上是根据项目的数量智能地堆叠你的数组数据，这是你不想要的。

可以导致数组以这种方式堆叠的代码通常类似于以下内容：

```
/// $array = array(); /// this is implied (should be set elsewhere)

$key = 'test';
$newval = 'value';

/// if we are an array, add a new item to the array
if ( is_array($array[$key]) ) {
  $array[$key][] = $newval;
}
/// if we have a previous non-array value, convert to an array
/// containing the previous and new value
else if ( isset($array[$key]) ) {
  $array[$key] = array($array[$key],$newval);
}
/// if nothing is set, set the $newval
else {
  $array[$key] = $newval;
} 
```

基本上，如果您继续调用上述代码，并在每次运行后进行跟踪，您将看到以下结构的构建：

```
$array == 'value'; 
```

然后

```
$array == array(0 => 'value', 1 => 'value'); 
```

然后

```
$array == array(0 => 'value', 1 => 'value', 2 => 'value'); 
```

这是导致问题的过程中的第一步，`$array = 'value';`即位。如果您稍微修改代码，您可以摆脱这个：

```
/// $array = array(); /// this is implied (should be set elsewhere)
$key = 'test';
$newval = 'value';

/// if we are an array, add a new item to the array
if ( is_array($array[$key]) ) {
  $array[$key][] = $newval;
}
/// if nothing is set, set the $newval as part of an subarray
else {
  $array[$key] = array($newval);
} 
```

正如你所看到的，我所做的只是删除 itermediate `if statement`，并确保当我们发现没有设置初始值时，我们总是创建一个数组。以上将创建一个结构，您可以随时计算并知道您推送到数组的项目数。

```
$array == array(0 => 'value'); 
```

然后

```
$array == array(0 => 'value', 1 => 'value'); 
```

然后

```
$array == array(0 => 'value', 1 => 'value', 2 => 'value'); 
```

**更新**

啊，我是这么想的。所以数组是从 XML 生成的。在这种情况下，我收集到您正在使用预定义的库来执行此操作，因此修改代码是不可能的。因此，正如其他人已经说过的，您最好的选择是使用 PHP 可用的众多 XML 解析库之一：

[http://www.uk.php.net/simplexml](http://www.uk.php.net/simplexml)

[http://www.uk.php.net/dom](http://www.uk.php.net/dom)

使用这些系统时，您会保留更多应该更容易计数的对象结构。以上两种方法都支持 xpath 表示法，它可以让您计算项目数，甚至无需抓取任何数据。

**更新 2**

在您提供的功能之外，这是导致您的数组以导致问题的方式堆叠的部分：

```
$children = array();
$first = true;
foreach($xml->children() as $elementName => $child){
    $value = simpleXMLToArray($child,$attributesKey, $childrenKey,$valueKey);
    if(isset($children[$elementName])){
        if(is_array($children[$elementName])){
            if($first){
                $temp = $children[$elementName];
                unset($children[$elementName]);
                $children[$elementName][] = $temp;
                $first=false;
            }
            $children[$elementName][] = $value;
        }else{
            $children[$elementName] = array($children[$elementName],$value);
        }
    }
    else{
        $children[$elementName] = $value;
    }
} 
```

修改将是：

```
$children = array();
foreach($xml->children() as $elementName => $child){
    $value = simpleXMLToArray($child,$attributesKey, $childrenKey,$valueKey);
    if(isset($children[$elementName])){
        if(is_array($children[$elementName])){
            $children[$elementName][] = $value;
        }
    }
    else{
        $children[$elementName] = array($value);
    }
} 
```

这应该会阻止您的数组堆叠......但是，如果您的代码中有任何其他部分依赖于先前的结构，则此更改可能会破坏该代码。

# c++ - std::basic_string 类型的 Stl 容器

> ID：12791048
> 
> 赞同：1
> 
> 时间：2012-10-08T23:53:00.257
> 
> 标签：c++, string, stl, queue

```
#ifndef UNICODE
#define UNICODE
#endif

#include <iostream>
#include <queue>
#include <stdio.h>
#include <Windows.h>
#include <string>
using namespace std;

int __cdecl main()
{   
    std::queue<std::basic_string<TCHAR>> results;

    results.push(TEXT("Hello world! ♥☻☺"));

    wcout<<results.front();
    delete [] results.front();

    system("pause");
    return 0;
} 
```

> 错误 1 ​​错误 C2440: 'delete' : 无法从 'std::basic_string<_Elem,_Traits,_Ax>' 转换为 'void *' C:\Users\Tomek\Documents\Visual Studio 2010\Solutions\clean_rough_draft\clean_rough_draft\main .cpp 20 1 clean_rough_draft

为什么会抛出这样的错误以及如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T00:09:55.477

您的第一个问题是您忘记包含`<string>`.

您当前的问题是您的删除毫无意义。您的字符串不是动态分配的，并且 front() 无论如何都会返回对它的引用。所以，你试图在不是数组的东西上调用数组删除（字符串是封装数组的对象）并且首先不是动态分配的（并且在引用而不是指针上） .

# objective-c - MFMailComposeViewController 导致其他控件改变位置

> ID：12791049
> 
> 赞同：2
> 
> 时间：2012-10-08T23:53:04.137
> 
> 标签：objective-c, ios, uiview, mfmailcomposeviewcontroller

我有三个 UIViewControllers 模态显示在彼此之上。第三个打开一个 MFMailComposeViewController 并发送一封电子邮件。但是，在关闭该视图控制器后，其他视图控制器（不一定在视图控制器链中）上的各种控件已移动到位。

例如，在关闭 MFMailComposeViewController 后，父 ViewController 上的其中一个标签向下移动了大约 20px。它的父级上的滚动视图也向下移动了相同的数量。如果我从这里输入一个单独的视图控制器，则会替换一个 imageview。它们似乎总是靠近屏幕顶部的控件，并且每个屏幕只有一个。

有没有人见过这个？我检查了所有代码，没有任何可能导致它。每次显示屏幕时，我都必须重置这些控件上的框架，以防止它们出现不合适的位置。但这对我来说毫无意义。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:09:52.393

您是否尝试过从父视图控制器呈现它？我有一个类似的问题，它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:48:20.053

不知何故，这听起来像随机布局并没有发生。我可以想到一些可以尝试的方法：

*   检查你没有明确调用`-layoutIfNeeded`，尤其是在像`-setFrame:`or这样的地方`-sizeThatFits:`——它可能会导致整个视图树的布局，如果布局已经发生，这往往会做错事（在 iOS 5 上它可能导致布局不一致；在iOS 6 我观察到它卡在布局循环中）。您还需要小心一些执行布局作为副作用的方法（`UIButton.titleLabel`想到 - 修复是在将视图添加到层​​次结构*之前调用它）。*
*   如果您正在使用自动调整大小，那么它应该可以正常工作 - 除非我看到如果视图在框架更改时没有附加到窗口，它就不起作用。
*   如果您在 中进行布局`-layoutSubviews`，请覆盖`-setFrame:`调用`-setNeedsLayout`. 通常的症状是“切换标签、旋转、切换回”导致布局不正确。

# bash - 将 for 循环结果传递给 VAR 失败

> ID：12791051
> 
> 赞同：0
> 
> 时间：2012-10-08T23:53:13.297
> 
> 标签：bash

我正在计算删除 ZIP 的目录中包含的文件数

当我`echo $VAR`稍后将其运行到电子邮件时

```
 VAR=`for i in `find . -mtime 0 -name '*XML*' -exec ls '{}' \;`; do unzip -l "$i"| awk -F. '{if ($2=="XML") print $0}'|wc -l; done| paste -sd+ | bc` 
```

它失败并出现此错误：

```
-bash: command substitution: line 1: syntax error near unexpected token `;'
-bash: command substitution: line 1: `; do unzip -l "$i"| awk -F. '{if ($2=="XML") print $0}'|wc -l; done| paste -sd+ | bc'
-bash: command substitution: line 2: syntax error: unexpected end of file
-bash: .: -m: invalid option
.: usage: . filename [arguments] 
```

就其本身而言，`for`循环运行良好。

看来我错过了一些东西：转义引号。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T23:57:02.293

反引号不能嵌套。改为使用`$( ... )`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T00:05:39.773

如果要嵌套反引号，则必须对其进行转义：

```
VAR=`for i in \`find . -mtime 0 -name '*XML*' -exec ls '{}' \;\`; do unzip -l "$i"| awk -F. '{if ($2=="XML") print $0}'|wc -l; done| paste -sd+ | bc` 
```

但是，正如*choroba 所*建议的，最好使用`$(...)`：

```
VAR=$(for i in $(find . -mtime 0 -name '*XML*' -exec ls '{}' \;); do unzip -l "$i"| awk -F. '{if ($2=="XML") print $0}'|wc -l; done| paste -sd+ | bc) 
```

特别是因为如果您决定在双引号内使用反引号，则必须小心转义内部双引号：

```
test="example `echo \"internal\"`" 
```

当带括号时，它变得“更干净”：

```
test="example $(echo "internal")" 
```

希望这会有所帮助=)

# windows - 如何保存 Windows 命令行输入？

> ID：12791053
> 
> 赞同：1
> 
> 时间：2012-10-08T23:53:21.990
> 
> 标签：windows, command-line

我发现自己在 Windows 命令行中重写了相同的命令。例如，我每次使用计算机时总是使用“cd”来移动同一个文件夹。如果我关闭命令窗口，我必须从头再来。

有没有办法将命令保存到文本文件中，然后将该文本文件加载到命令窗口中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:55:53.997

这将显示命令的历史记录。

DOSKEY /历史

然后，您可以为您持续运行的所有命令创建一个宏。

**例子：**

> 一个名为 `d' 的宏来运行 dir/w DOSKEY d=dir/w
> 
> DOSKEY 宏只为当前会话保存。
> 
> 命令：doskey /macros >macros.cmd
> 
> 将所有当前的宏定义列出到 macros.cmd，编辑这个文件并将 DOSKEY 放在每行的开头。然后要在以后恢复当前会话中的所有 doskey 宏设置，请运行 macros.cmd

使用参考： [https ://ss64.com/nt/doskey.html](https://ss64.com/nt/doskey.html)

# c++ - cython 最佳实践：从 C++ 源导入枚举和结构？

> ID：12791054
> 
> 赞同：1
> 
> 时间：2012-10-08T23:53:38.120
> 
> 标签：c++, import, enums, struct, cython

从 extern C++ 公开 enum 和 struct 的最好方法是什么？

现在我只是这样做了：

```
# Redefine 't_output' enum type (no other way to do ??)
cdef public enum t_deptype:
    IND_DEP  = 1
    SITE_DEP = 2
    ENV_DEP  = 4 
```

但是重新定义对我来说有点不满意。我浏览过的每个网页都处理相同类型的重写...

我必须对 structs 做同样的事情吗？

谢谢

# php - JQuery.Validate() - 远程规则

> ID：12791055
> 
> 赞同：1
> 
> 时间：2012-10-08T23:54:07.790
> 
> 标签：php, javascript, jquery, validation, web

我正在为一个学校项目开发一个网站。虽然我主要使用 PHP，但我认为我也应该做一些客户端验证。在 Google 中搜索很短的时间就找到了 Validate JQuery 插件。到目前为止，这就是我所拥有的：

```
<form id="regform" class="well" method="post" action="Registering.php">
        <label>Name: <input type="text" placeholder="Type your name" name="Name" class="required" /></label>
        <label>Surname: <input type="text" placeholder="Type your surname" name="Surname" class="required" /></label>
        <label>Username: <input type="text" placeholder="Type your username" name="Username" class="required" /></label>
        <label>Password: <input type="password" placeholder="Type your password" name="Password" class="required" /></label>
        <label>Repeat Password: <input type="password" placeholder="Confirm Password" name="Password-confirm" class="required" /></label>
        <label>E-Mail: <input type="Email" placeholder="Type your Email" name="Email" class="required email" /></label>
        <label>Birthday: <input type="Date" name="Birthday" /></label>
        <label>Gender:</label>
        <label>Male <input type="radio" name="Gender" value="0" checked> Female <input type="radio" name="Gender" value="1"></label>
        <label>Photo: <input type="url" placeholder="Paste an image link" name="PhotoLink" class="url" /></label>
        <label><input type="submit" class="btn btn-primary" name="Submit" value="Register in YouTune" /></label>
 </form> 
```

这是表格，几乎是标准的注册表格。这里没有什么要补充的。然后我有这个小Javascript：

```
$(document).ready(function(){
        $("#regform").validate({
            rules: {
                Username: {
                    remote: { url: "/check_username.php", async: false }
                }
            },
            messages: {
                Username: { remote: "Username already on use. Pick a different one." }
            }
        });
}); 
```

最新的 JQuery 库的脚本和 Validate Plugin 的 1.10 版本都被添加到文档的头部。

好吧，简而言之，验证工作顺利进行，除了远程规则不起作用。就好像它根本不存在，无论我是否使用已使用的用户名提交都没有错误消息。Javascript 调用的 php 文件具有以下脚本：

```
<?php error_reporting(E_ALL);
     require_once("../Clases/User.php");
     header('Content-type: application/json');
     $vUser = new User();
     $vResult = $vUser->GetUserByUsername($_REQUEST["Username"]);
     if ($vResult) {
    echo false;
     } else { echo true; } 
```

?>

GetUserByUsername 方法转到数据库并使用给定参数搜索用户，然后如果匹配则返回 true，如果不匹配则返回 false。我已经在没有来自 Javascript 的远程调用的情况下对其进行了测试，它工作正常

那么，有谁知道为什么会这样？

预先感谢您花时间阅读并尝试帮助我解决这个小问题。

编辑：解决。我只需要修复远程呼叫的来源。不敢相信我错过了。无论如何，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:02:42.157

我不太确定，但看看它是否有效；从您的网址中删除“/”。使用“check_username.php”代替“/check_username.php”或绝对网址

# php - PHP Postgres JOIN 与 LIKE 查询失败

> ID：12791062
> 
> 赞同：0
> 
> 时间：2012-10-08T23:55:08.943
> 
> 标签：php, zend-framework, postgresql

我正在尝试用 postgres 找出一个查询，但我不确定它的原因我习惯了 mysql 而 postgres 没有`LIKE`查询。或者我的交易是什么。无论哪种方式，我都知道它不起作用，我不知道为什么不。有人可以帮我指出正确的方向吗？我的意思是最终我正在尝试制作这个查询的 Zend 数据库版本，但是，这是我在尝试使用 zend db 类构建它之前尝试制作的核心查询。

```
SELECT 
    org.orgid, 
    org.roleid, 
    users.userid, 
    users.email, 
    users.first_name, 
    users.last_name, 
    users.contact_id, 
    users.state, 
    users.ts, 
    users.altemail, 
    users.unboundid, 
    users.blocked 
FROM mapping AS org 
INNER JOIN my_users AS users ON org.userid = users.userid
WHERE (org.orgid = 'generated-id')
AND (org.roleid LIKE 'partner-%');

ERROR:  operator does not exist: roles ~~ unknown
LINE 17: AND (org.roleid LIKE 'partner-%');
                          ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:51:25.597

改变

```
AND (org.roleid LIKE 'partner-%'); 
```

到

```
AND (org.roleid::text LIKE 'partner-%'); 
```

显然，您正在处理角色标识的文本表示。这似乎应该可以正常工作，除非您的数据类型不匹配。通过转换为文本，您可以确保他们这样做。

请注意，一个重要的后果是，roleid 上的索引对于此类比较将无用，因为它们的操作与类型不直接兼容。这应该不是问题，因为 orgid 仍然可以使用索引，但这是需要考虑的事情。如果你想解决这个问题，你可能需要使用表格方法或其他函数来为你分解它。然后，您可以索引函数输出。

例如，您可以像这样使用表方法：

```
CREATE FUNCTION is_partner(mapping) returns bool language sql immutable as $$
    SELECT $1.roleid::text LIKE 'partner-%';
$$; 
```

然后，您可以使用以下方法对其进行索引：

```
CREATE INDEX mapping_is_partner_idx ON mapping (is_partner(mapping)); 
```

然后，您可以将连接条件从

```
AND (org.roleid LIKE 'partner-%'); 
```

到

```
AND org.is_partner; 
```

请注意，在这种情况下，org 是必需的，并且不能隐式添加，因为它使用 class.method 表示法将 org.is_oartner 更改为 is_partner(org)。

希望这可以帮助。

# ruby-on-rails - Bamboo + Cucumber + Webkit 驱动

> ID：12791064
> 
> 赞同：0
> 
> 时间：2012-10-08T23:55:21.847
> 
> 标签：ruby-on-rails, cucumber, bamboo, capybara-webkit

我在运行使用 capybara-webkit 驱动程序的 cuke 测试用例时遇到了很多麻烦。因为这是一个无头服务器，我正在尝试运行 xvfb-run 来运行测试，但一直遇到障碍。

如果我尝试跑步

```
xvfb-run rake cucumber:all 
```

然后我从我的服务器收到错误，即 rake 不存在。（尽管确实如此）

如果我尝试通过 bundle exec 运行它

```
xvfb-run bundle exec rake cucumber:all 
```

然后我收到一条错误消息，告诉我捆绑包不存在！

这两个命令都可以从 ssh 进入服务器，但只有当来自 Bamboo 时它们才不会。我已经尝试了 Rake 任务，并且只是编写了一个脚本来运行 bundle exec，但是 nada。

我想知道其他人是否有这个设置，如果他们可以指导我如何在竹子中设置它......这是一个非常典型的 Rails 项目，这是我启动 CI 之前的最后阶段和运行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:40:53.213

我想我已经根据我在这里找到的这个页面弄清楚了，这是关于使用 Jenkins 的。 [http://sermoa.wordpress.com/2011/07/02/cucumber-running-headless-selenium-with-jenkins-the-easy-way/](http://sermoa.wordpress.com/2011/07/02/cucumber-running-headless-selenium-with-jenkins-the-easy-way/)

基本思想是使用“无头”gem，然后将此部分放在您的 env.rb 中用于黄瓜：

```
if ENV['HEADLESS'] == 'true'
  require 'headless'

  headless = Headless.new
  headless.start

  at_exit do
    headless.destroy
  end
end 
```

然后使用环境变量“HEADLESS=true”在竹子中运行您的正常 rake 任务。

您还必须在服务器上安装 xvfb。(sudo apt-get install xvfb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T16:18:14.430

这是一个有效的更新版本，它将使用 before/after 钩子为黄瓜设置 capybara-webkit 和 headless。只需将其包含在您的 support/env.rb 或其他支持文件中（我使用了 support/javascript.rb，因为我做了一些相关的事情）：

```
Capybara.javascript_driver = :webkit

Before do
  # run capybara-webkit headless if not on mac and this test is selenium based.
  if Capybara.current_driver == :selenium
    require 'headless'
    @headless = Headless.new
    @headless.start
  end
end

After do
  @headless.destroy
end 
```

编辑：这是一个带有一些可标记优点的要点，如果需要，您可以在本地开发模式下使用 :chrome，同时确保 CI 环境保持无头：

[https://gist.github.com/rosskevin/5937888](https://gist.github.com/rosskevin/5937888)

# jquery - Jquery CarouselLite

> ID：12791070
> 
> 赞同：0
> 
> 时间：2012-10-08T23:55:57.517
> 
> 标签：jquery, carousel

我在 wordpress 模板页面中有一个 jQuery 轮播，它将产品构建为“幻灯片”，其中每个产品都是轮播中的幻灯片。我的具体问题是，并非所有由我的循环创建的产品都显示出来，但它们是在 DOM 中创建的。但是，当我在 Firefox 的工具栏上打开“元素信息”时，它会引入所有其他列出的产品，甚至是那些“隐藏”的产品。我有理由确定这不是 CSS 问题，但我可能是错的，而且我没有显示任何在我验证时普遍存在的错误。所以我想知道是否有人知道是什么导致它这样做？它可能是jQuery问题的一个版本吗？[您可以在http://healthylifestyleandspirit.thedesigngrouponline.com/online-store/](http://healthylifestyleandspirit.thedesigngrouponline.com/online-store/)查看该网站 自己看看问题是什么。

# mongodb - YiiMongoDbSuite 和下拉列表

> ID：12791075
> 
> 赞同：0
> 
> 时间：2012-10-08T23:56:54.633
> 
> 标签：mongodb, drop-down-menu, yii, mongoid, populate

有人知道如何从 MongoDb 集合中填充下拉列表吗？我如何访问 MongoId 对象。我正在使用带有 YiiMongoDbSuite 扩展的 Yii 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:45:56.110

我相信 YiiMongoDbSuite 返回类型的活动记录`CActiveRecord`。

这`_id`只是类的一个属性，这样做：

`$m = $v->_id`

将使`$m`该记录或活动记录类的 _id 相等。

上面的代码可能会返回一个`MongoId`对象，这可能是您遇到的问题，在这种情况下，您可以简单地执行以下操作：

`$m = (string)$v->_id`

获取`MongoId`对象的字符串表示。

# c - C语言中的atoi实现

> ID：12791077
> 
> 赞同：27
> 
> 时间：2012-10-08T23:57:04.637
> 
> 标签：c, atoi, atof

我无法理解以下`atoi`实现代码，特别是这一行：

```
k = (k << 3) + (k << 1) + (*p) - '0'; 
```

这是代码：

```
int my_atoi(char *p) {
    int k = 0;
    while (*p) {
        k = (k << 3) + (k << 1) + (*p) - '0';
        p++;
     }
     return k;
} 
```

有人可以向我解释吗？

另一个问题：实现的算法应该是什么`atof`？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-08T23:59:06.317

`<<`是位移，`(k<<3)+(k<<1)`是`k*10`由一个认为他比编译器更聪明的人写的（好吧，他错了......）

`(*p) - '0'``0`从 指向的字符中减去字符的值`p`，有效地将字符转换为数字。

我希望你能弄清楚其余的......只要记住十进制系统是如何工作的。

这是标准功能的规范`atoi`。很抱歉没有引用标准，但这同样适用（来自：[http](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/) ://www.cplusplus.com/reference/clibrary/cstdlib/atoi/ ）

> 该函数首先根据需要丢弃尽可能多的空白字符（如 中 `isspace`），直到找到第一个非空白字符。然后，从这个字符开始，采用可选的初始加号或减号，后跟尽可能多的 base-10 数字，并将它们解释为数值。
> 
> 字符串可以在构成整数的字符之后包含其他字符，这些字符将被忽略并且不会影响此函数的行为。
> 
> 如果 in 的第一个非空白字符序列`str`不是有效的整数，或者由于要么 `str`为空或仅包含空白字符而不存在此类序列，则不执行转换并返回零。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-08T23:58:51.140

```
k = (k << 3) + (k << 1); 
```

方法

```
k = k * 2³ + k * 2¹ = k * 8 + k * 2 = k * 10 
```

这有帮助吗？

该`*p - '0'`术语将下一个数字的值相加；这是可行的，因为 C 要求数字字符具有连续值，因此`'1' == '0' + 1`,`'2' == '0' + 2`等。

至于你的第二个问题（`atof`），那应该是它自己的问题，它是论文的主题，而不是简单的回答......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T06:13:08.443

```
#include <stdio.h>
#include <errno.h>
#include <limits.h>

double atof(const char *string);

int debug=1;

int main(int argc, char **argv)
{
    char *str1="3.14159",*str2="3",*str3="0.707106",*str4="-5.2";
    double f1,f2,f3,f4;
    if (debug) printf("convert %s, %s, %s, %s\n",str1,str2,str3,str4);
    f1=atof(str1);
    f2=atof(str2);
    f3=atof(str3);
    f4=atof(str4);

    if (debug) printf("converted values=%f, %f, %f, %f\n",f1,f2,f3,f4);
    if (argc > 1)
    {
        printf("string %s is floating point %f\n",argv[1],atof(argv[1]));
    }
}

double atof(const char *string)
{
    double result=0.0;
    double multiplier=1;
    double divisor=1.0;
    int integer_portion=0;

    if (!string) return result;
    integer_portion=atoi(string);

    result = (double)integer_portion;
    if (debug) printf("so far %s looks like %f\n",string,result);

    /* capture whether string is negative, don't use "result" as it could be 0 */
    if (*string == '-')
    {
        result *= -1; /* won't care if it was 0 in integer portion */
        multiplier = -1;
    }

    while (*string && (*string != '.'))
    {
        string++;
    }
    if (debug) printf("fractional part=%s\n",string);

    // if we haven't hit end of string, go past the decimal point
    if (*string)
    {
        string++;
        if (debug) printf("first char after decimal=%c\n",*string);
    }

    while (*string)
    {
        if (*string < '0' || *string > '9') return result;
        divisor *= 10.0;
        result += (double)(*string - '0')/divisor;
        if (debug) printf("result so far=%f\n",result);
        string++;
    }
    return result*multiplier;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T04:04:07.937

有趣的是， atoi 的手册页并没有指示设置 errno，所以如果你说的任何数字 > (2^31)-1，你就不走运了，同样对于小于 -2^31 的数字（假设 32 -位整数）。你会得到一个答案，但它不会是你想要的。这是一个范围为 -((2^31)-1) 到 (2^31)-1 的值，如果出错则返回 INT_MIN (-(2^31))。然后可以检查 errno 以查看它是否溢出。

```
#include <stdio.h>
#include <errno.h>  /* for errno */
#include <limits.h> /* for INT_MIN */
#include <string.h> /* for strerror */

extern int errno;

int debug=0;
int atoi(const char *c)
{
    int previous_result=0, result=0;
    int multiplier=1;

    if (debug) printf("converting %s to integer\n",c?c:"");
    if (c && *c == '-')
    {
        multiplier = -1;
        c++;
    }
    else
    {
        multiplier = 1;
    }
    if (debug) printf("multiplier = %d\n",multiplier);
    while (*c)
    {
        if (*c < '0' || *c > '9')
        {
            return result * multiplier;
        }
        result *= 10;
        if (result < previous_result)
        {
            if (debug) printf("number overflowed - return INT_MIN, errno=%d\n",errno);
            errno = EOVERFLOW;
            return(INT_MIN);
        }
        else
        {
            previous_result *= 10;
        }
        if (debug) printf("%c\n",*c);
        result += *c - '0';

        if (result < previous_result)
        {
            if (debug) printf("number overflowed - return MIN_INT\n");
            errno = EOVERFLOW;
            return(INT_MIN);
        }
        else
        {
            previous_result += *c - '0';
        }
        c++;
    }
    return(result * multiplier);
}

int main(int argc,char **argv)
{
    int result;
    printf("INT_MIN=%d will be output when number too high or too low, and errno set\n",INT_MIN);
    printf("string=%s, int=%d\n","563",atoi("563"));
    printf("string=%s, int=%d\n","-563",atoi("-563"));
    printf("string=%s, int=%d\n","-5a3",atoi("-5a3"));
    if (argc > 1)
    {
        result=atoi(argv[1]);
        printf("atoi(%s)=%d %s",argv[1],result,(result==INT_MIN)?", errno=":"",errno,strerror(errno));
        if (errno) printf("%d - %s\n",errno,strerror(errno));
        else printf("\n");
    }
    return(errno);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-20T13:13:59.603

这是我的实现（已成功测试包含字母、+、- 和零开头的案例）。我试图在*Visual Studio中对***atoi**函数进行逆向工程。如果输入字符串只包含数字字符，则可以在一个循环中实现。但它变得复杂，因为你应该照顾*-*，*+*和字母。

 ***```
int atoi(char *s)
{    
    int c=1, a=0, sign, start, end, base=1;
//Determine if the number is negative or positive 
    if (s[0] == '-')
        sign = -1;
    else if (s[0] <= '9' && s[0] >= '0')
        sign = 1;
    else if (s[0] == '+')
        sign = 2;
//No further processing if it starts with a letter 
    else 
        return 0;
//Scanning the string to find the position of the last consecutive number
    while (s[c] != '\n' && s[c] <= '9' && s[c] >= '0')
        c++;
//Index of the last consecutive number from beginning
    start = c - 1;
//Based on sign, index of the 1st number is set
    if (sign==-1)       
        end = 1;
    else if (sign==1)
        end = 0;
//When it starts with +, it is actually positive but with a different index 
//for the 1st number
    else
    { 
        end = 1;
        sign = 1;
    }
//This the main loop of algorithm which generates the absolute value of the 
//number from consecutive numerical characters.  
    for (int i = start; i >=end ; i--)
    {
        a += (s[i]-'0') * base;
        base *= 10;
    }
//The correct sign of generated absolute value is applied
    return sign*a;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-30T06:16:25.910

关于 atoi() 提示代码来自[这里](https://stackoverflow.com/questions/5710091/how-does-atoi-function-in-c-work)：

并基于 atoi()，我对 atof() 的实现：

[对原码有同样的限制，不检查长度等]

```
double atof(const char* s)
{
  double value_h = 0;
  double value_l = 0;
  double sign = 1;

  if (*s == '+' || *s == '-')
  {
    if (*s == '-') sign = -1;
    ++s;
  }

  while (*s >= 0x30 && *s <= 0x39)
  {
    value_h *= 10;
    value_h += (double)(*s - 0x30);
    ++s;
  }

  // 0x2E == '.'
  if (*s == 0x2E)
  {
    double divider = 1;
    ++s;
    while (*s >= 0x30 && *s <= 0x39)
    {
      divider *= 10;
      value_l *= 10;
      value_l += (double)(*s - 0x30);
      ++s;
    }
    return (value_h + value_l/divider) * sign;
  }
  else
  {
    return value_h * sign;
  }
} 
```***

# jquery - 以下 JQuery 代码执行 Ajax 调用

> ID：12791080
> 
> 赞同：0
> 
> 时间：2012-10-08T23:57:38.393
> 
> 标签：jquery

AJAX 调用返回的数据格式如下

```
{
  "items" : {
    "Phones" : "PhoneSelect",
    "NoteBooks" : "notebookSelect",
    "Tablets" : ""
  },
  "title" : "What would you like to purchase?",
  "defaultText" : "Choose a product category"
} 
```

AJAX 调用

```
function fetchSelect (val) {
  $.getJSON('ajax.php', {key:val}, function(r) {
  $.each(r.items, function (k, v) { 
```

根据 jQuery 规范`.getJSON`

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
}); 
```

1.  我的问题是`{key:val}`从通话中返回的数据，然后`r`里面是什么`function(r)`？

2.  我看到函数 pass in `val`，但关键值是什么`{key:val}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:59:37.710

这`{key:val}`实际上是在 AJAX 调用中发送到服务器的内容。

`r`参数是从 AJAX 调用返回的数据。数据作为参数返回到您的回调函数中。

[查看文档](http://api.jquery.com/jQuery.getJSON/)中的函数签名，我们可以看到每个参数应该是什么 -

> `jQuery.getJSON( url [, data] [, success(data, textStatus, jqXHR)] )`
> 
> *   url - 包含请求发送到的 URL 的字符串。
> *   **数据 -随请求发送到服务器**的映射或字符串。
> *   success(data,textStatus, jqXHR) - 请求成功时执行的回调函数。

您的`r`参数`data`正在返回给`success`回调。在您的情况下，它是 JSON 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:00:59.113

```
{key:val} // The data sent to the server 
```

r 包含您的回调结果

```
r.items.Phones  // PhoneSelect
r.items.NoteBooks // notebookSelect 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:01:47.303

当你调用 $.getJSON 时，它需要三个参数 1\. Url 2\. INut Data 3\. 回调函数。因此，您的问题的答案是，当 ajax 调用完成时，jQuery 将调用代替 function(R) 传递的函数，其中 R 是服务器对 ajax 调用的响应。

# ruby - 线程安全 ffi-rzmq ruby 和 zeromq

> ID：12791084
> 
> 赞同：1
> 
> 时间：2012-10-08T23:58:48.050
> 
> 标签：ruby, thread-safety, zeromq

我正在开发一个应用程序，它有几种不同的 zeromq 套接字类型相互通信，我做了很少的线程编程。我目前正在考虑的事情有 2 个线程，一个用于从 xrec 套接字推拉，另一个线程将消息传递到一对套接字。

我正在考虑使用一个简单的数组来推送/移动或弹出一个简单的内部队列中的消息。我怀疑会有很多实际的排队，但这似乎是一个很好的设计。我想我可以在 a.size > max 上添加一个短路

*   想知道下面的代码是线程安全的吗？
*   我可以做些什么来测试代码的线程安全性？
*   有什么我应该注意的吗？

...我最担心的是 << 就地修改

```
require 'thread'

m = Mutex.new
endl = false
a = []
t1 = Thread.new do
  runs = 0
  while !endl
    runs += 1
    msg = nil
    m.synchronize{msg = a.pop}
    puts "pulled -#{msg}-" if msg
    sleep(0.001)
  end
  puts "t1 exiting runs: #{runs}"
end
t2 = Thread.new do
  while !endl
    puts "endl is #{endl}"
    s = $stdin.gets
    s.chomp!
    if s == 'end'
      puts "end found... trying to exit"
      m.synchronize {endl = true}
    elsif s == 'blast'
      100.times.each_with_index  do |item,i|
        m.synchronize{a << i}
      end
    else
      m.synchronize {a << s}
      puts "ECHO: #{s}"
    end
  end
  puts "t2 exiting endl was #{endl}"
end
t1.join()
t2.join() 
```

编辑：

在这一点上，我将使用 inproc 和消息传递来避免使用任何互斥锁。它应该足够快，如果我需要剥离一个组件，我可以轻松做到。

# jquery - 按第一个属性对元素进行分组

> ID：12791094
> 
> 赞同：2
> 
> 时间：2012-10-08T23:59:37.150
> 
> 标签：jquery, jquery-selectors

如何显示具有按第一个属性分组的元素第二个属性的警报，例如：

```
<a href="#b" attA=1 attB=18 >Here</a>
<a href="#b" attA=1 attB=27>Here</a>
<a href="#b" attA=1 attB=31>Here</a>
<a href="#b" attA=2 attB=84>Here</a> 
```

当您单击任何 attA 链接时，它会显示：

```
alert("atta=1 and attB=18,27,31"); 
```

并点击 attB：

```
alert("atta=2 and attB=84"); 
```

很难，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:10:59.730

`attA`不是有效的属性，您可以使用`data-*`属性来代替，还请注意，您应该用引号将值括起来。

```
<a href="#b" data-atta='1' data-attb='18'>Here</a>
<a href="#b" data-atta='1' data-attb='27'>Here</a>
<a href="#b" data-atta='1' data-attb='31'>Here</a>
<a href="#b" data-atta='2' data-attb='84'>Here</a> 
```

```
$('a').click(function() {
    var a = this.dataset.atta;
    var b = $('a[data-atta='+a+']').map(function() {
        return this.dataset.attb
    }).get().join();
    alert('atta: ' + a + ", attb=" + b)
})​ 
```

[http://jsfiddle.net/XrF4p/](http://jsfiddle.net/XrF4p/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:07:54.777

```
$('a').click(function() {
    var attA = $(this).attr('attA'),
        attB = $.map($('a'), function(link){
            if($(link).attr('attA') == attA) {
                return $(link).attr('attB');
            }
        });

    alert('atta=' + attA + ' and attB=' + attB.join(','));
}); 
```

[**演示**](http://jsfiddle.net/eLBp4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T00:19:06.007

[检查小提琴](http://jsfiddle.net/pRENf/)

```
$(function() {
    $('a').on('click', function(e) {
        e.preventDefault();
        var $attA = $(this).attr('attA');
        var $attB = $('a[attA="'+ $attA +'"]');
        var arr = [];
        $.each($attB, function(){

             arr.push( $(this).attr('attB'));
        });
        alert('attA - ' + $attA + ' :: attB - '+ arr.join());        
    });
});​ 
```

# ios - UILocalNotification presentNotificationNow 问题

> ID：12791098
> 
> 赞同：0
> 
> 时间：2012-10-09T00:00:13.900
> 
> 标签：ios, mkmapview, uilocalnotification, clregion

这个问题一直让我发疯。我想要做的是在用户进入某个区域时触发通知。但是，我想要的是，如果用户正在使用该应用程序显示一条警报消息，并且如果该应用程序在后台显示一个本地通知。

这是我的代码：

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
    UIApplication *app = [UIApplication sharedApplication];

    if (app.applicationState == UIApplicationStateActive)
    {
        NSURL *musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Alarm" ofType:@"caf"]];
        AVAudioPlayer *audioFile = [[AVAudioPlayer alloc] init];
        audioFile = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:NULL];
        [audioFile play];

        UIAlertView *arrivingDestinationAlert = [[UIAlertView alloc] initWithTitle: @"Arriving" message:[NSString stringWithFormat:@"Alert"]  delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [arrivingDestinationAlert show];
    }else if(app.applicationState == UIApplicationStateBackground || app.applicationState == UIApplicationStateInactive)
    {
        UILocalNotification *notification = [[UILocalNotification alloc] init];
        notification.alertBody = [NSString stringWithFormat:@"%d to reach your destination", self.distToRemind];
        notification.alertAction = @"Destination Approaching";
        notification.hasAction = YES;
        notification.soundName = UILocalNotificationDefaultSoundName;
        [app presentLocalNotificationNow:notification];
    }

    [manager stopMonitoringForRegion:region];
} 
```

我之前做的是工作。这是午餐本地通知，而不询问应用程序的状态是后台还是活动。我只是在`didEnterRegion`触发时立即通知通知。但是现在我可以让它工作了。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:15:59.717

I think you are checking for the active state in the wrong spot. I do something very similar, but I check for active state in the AppDelegate when the notification fires. You should intercept the local notification in `-didReceiveLocalNotification`. If the state is active, push your UIAlertView there. If you fire the alert from the -didEnterRegion or -didExitRegion from the background, it will never be seen.

# drupal-7 - Drupal 7 Form API：基于 OR 而不是 AND 设置表单元素的可见状态

> ID：12791101
> 
> 赞同：3
> 
> 时间：2012-10-09T00:00:30.023
> 
> 标签：drupal-7, drupal-modules, drupal-forms

我有一个实地集，只有选择框选择了一些选定的选项之一时才出现。问题是，我似乎看不到如何使用 OR。如果您在数组中包含多个条件，它会像 AND 一样操作。例如，如果选择框的值为 1 2 或 3，我需要它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T00:32:18.630

显然从 drupal 7.14 开始支持“或”和“异或”。它只是不在文档中任何容易找到的地方。这是我做的一个例子，以防有人需要它。这行得通。

```
$form['survey'] = array(
    '#type' => 'fieldset',
    '#collapsible' => FALSE,
    '#states' => array(
        'visible' => array(
            array(
                array(':input[name="measurementmethod"]' => array('value'=>'5')),
                'xor',
                array(':input[name="measurementmethod"]' => array('value'=>'6')),
                'xor',
                array(':input[name="measurementmethod"]' => array('value'=>'7'))
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-30T12:30:27.833

总结[LoneWolfPR](https://stackoverflow.com/users/469219/lonewolfpr)的[回答](https://stackoverflow.com/questions/12791101/drupal-7-form-api-set-visible-state-of-form-element-based-on-or-instead-of-and/25036901#12791326)

这将是 AND：必须选中两个复选框才能生效

```
array(
    ':input[name^="field_checkbox_1"]' => array('checked' => TRUE),
    ':input[name^="field_checkbox_2"]' => array('checked' => TRUE),
) 
```

这将是 OR（将单个条件放入数组中）：必须选中一个或两个复选框

```
array(
    array(':input[name^="field_checkbox_1"]' => array('checked' => TRUE)),
    array(':input[name^="field_checkbox_2"]' => array('checked' => TRUE)),
) 
```

这将是 XOR（就像 or 并且在数组之间带有“xor”）：必须检查一个且只有一个 checkox

```
array(
    array(':input[name^="field_checkbox_1"]' => array('checked' => TRUE)),
    'xor',
    array(':input[name^="field_checkbox_2"]' => array('checked' => TRUE)),
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T13:16:12.633

参考更改记录“ [Fixed conditionals to allow OR and XOR constructions](http://drupal.org/node/1464758) ” on do

从 7.14 开始，Drupal 表单 API`#state`支持 OR 和 XOR 条件。

以下代码允许条件：`dependee_1 OR (dependee_2 OR dependee_3) OR (dependee_4 XOR dependee_5)`

```
<?php
  $form['dependent_1']['#states'] = array(
    'disabled' => array(
    // dependee_1 has value ON
      '[name="dependee_1"]' => array('value' => 'ON'),
      array(
      // At least one of dependee_2 or dependee_3 has value ON
        array('[name="dependee_2"]' => array('value' => 'ON')),
        array('[name="dependee_3"]' => array('value' => 'ON')),
      ),
      array(
      // Only one of dependee_4 or dependee_5 can have value ON
        array('[name="dependee_4"]' => array('value' => 'ON')),
        'xor',
        // The field should be disabled when Select #1 has value ON; at least one
        // of Select #2 and Select #3 has value ON; one but only one of Select #4
        // and Select #5 has value ON.
        array('[name="dependee_5"]' => array('value' => 'ON')),
      ),
    )
  );
?> 
```

基本上，对象字面量 ({ ... }) 中的所有元素都是 AND，数组字面量 ([ ... ]) 中的所有元素都是 ORed；如果数组的第一个元素是 'xor' 条件是 XORed。

# ios - NSCalendar currentCalendar setTimeZone 未设置

> ID：12791102
> 
> 赞同：3
> 
> 时间：2012-10-09T00:00:47.737
> 
> 标签：ios, nscalendar, nstimezone

如果我尝试使用以下命令从应用程序中的任何位置任意设置时区：

```
[[NSCalendar currentCalendar] setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"EST"]];
NSTimeZone *tz = [[NSCalendar currentCalendar] timeZone];
NSLog(@"%@", tz); 
```

日志语句的结果是：

**America/Los_Angeles (PDT) 偏移量 -25200（日光）**

（这是我的本地时区，即 [NSTimeZone systemTimeZone]）

但是，NSCalendar 上的一个类别中功能相似的代码可以正常工作：

```
[self setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"EST"]];
NSTimeZone *tz = [self timeZone];
NSLog(@"%@", tz); 
```

日志产生：

**America/New_York (EDT) 偏移量 -14400（日光）**

为 [NSCalendar currentCalendar] 设置时区是怎么回事？这种行为是违反直觉的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T02:13:01.740

简单的答案：`+[NSCalendar currentCalendar]`没有返回相同的实例。它应该为您返回一个实例，该实例反映了*调用**时`+currentCalendar`*当前选择的语言环境和时区。有三种可能的合理行为：

*   它每次都返回一个新值。
*   它返回一个缓存值，除非它检测到它*应该*返回一个新值。
*   它返回一个缓存值，当它注意到语言环境/日历更改时将其清除。

修改日历仅在第一种情况下是明智的。（在第二种情况下，之前的调用`+currentCalendar`将指向同一个实例。在第三种情况下，所有调用都`+currentCalendar`将返回同一个实例，直到用户更改区域设置/时区。）

设置应用程序时区的正确方法是`+[NSTimeZone setDefaultTimeZone:]`.

# jquery - 创建 div 标签模板并复用

> ID：12791106
> 
> 赞同：0
> 
> 时间：2012-10-09T00:01:06.760
> 
> 标签：jquery

是否可以使用适当的属性“标记”创建一个模板，例如其中包含许多其他元素，并使用 jquery 重用它？例如，当您想在不刷新页面的情况下显示用户提交的评论。我问这个的原因是因为 div 标签之间的代码相当长。因此，使用例如 prepend() 将需要很长时间来重写。

大型操作的最佳方法是什么？创建一个单独的html？我对操作很陌生，但由于我有编程背景，我希望有一种有效的方法来重用现有的 HTML，而不是在 jquery 中重新定义它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T00:05:07.257

创建一个包含所有元素的 div 标签。

如果您想重用它，您可以使用`.clone()`类似于 div 的模板并将其附加到您的 html..

```
<div class="template">
   // All other elements here
</div>

<div id="container">
</div>

$template = $('.template').clone() ; //  Clones the template div

// Append to your contianer

$('#container').append($template) ; 
```

# sql - SQL 查询中 WHERE 条件的顺序有所不同

> ID：12791107
> 
> 赞同：0
> 
> 时间：2012-10-09T00:01:08.240
> 
> 标签：sql

我有两个 SQL 表`Student`和`Class`.

在`Student`表中，字段是`studentNo, studentName, classNo`

在`Class`表中，字段是`classNo, className, teacherName`

我想做的是构造一个查询来列出`history`班上的所有学生。

这是我的查询：

```
SELECT studentName
FROM Student s, Class c
WHERE s.classNo = c.classNo AND
   c.className = ‘history’; 
```

但我对上述查询不是 100% 确定的。我在想也许下面的一个比上面的更有效：

```
SELECT studentName
FROM Student s, Class c
WHERE c.className = ‘history’ AND
   s.classNo = c.classNo; 
```

谁能帮我找到这个问题的正确查询？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:03:14.410

您当前的查询似乎很好，但请注意是否将其转换为`ANSI SQL_92`格式（*更清晰，并且可能不会导致交叉连接*），

```
SELECT studentName
FROM Student s INNER JOIN Class c
       ON s.classNo = c.classNo
WHERE  c.className = 'history'; 
```

如果将两者互换，则没有区别。在数学中，`commutative`法律规定`A + B = B + A`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:25:11.990

选择

学生姓名

FROM Student St JOIN Class c ON St.classNo = c.classNo WHERE c.className = 'history'

# c# - lambda 表达式和事件处理程序？

> ID：12791109
> 
> 赞同：8
> 
> 时间：2012-10-09T00:01:35.353
> 
> 标签：c#, .net, c#-4.0

有人向我提到 c# 支持使用 lambda 表达式作为事件处理程序，有人可以与我分享一些关于此的参考吗？

首选代码片段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T00:09:25.600

您可以使用 lambda 表达式来构建一个匿名方法，该方法可以附加到一个事件。

例如，如果您使用 a`Button`和 a创建 Windows 窗体`Label`，则可以在构造函数中（在 之后`InitializeComponent()`）添加：

```
 this.button1.Click += (o,e) =>
     {
        this.label1.Text = "You clicked the button!";
     }; 
```

这将导致标签在单击按钮时发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:15:17.143

试试这个例子

```
public Form1()
{
    InitializeComponent();
    this.button1.Click += new EventHandler(button1_Click);
}

void button1_Click(object sender, EventArgs e)
{
} 
```

上面的事件处理程序可以使用这个 lambda 表达式重写

```
public Form1()
{
    InitializeComponent();
    this.button1.Click += (object sender, EventArgs e) = >
    {
        MessageBox.Show(“Button clicked!”);
    };
} 
```

# php - 另一个简单的 PHP JSON DECODE 挑战

> ID：12791110
> 
> 赞同：0
> 
> 时间：2012-10-09T00:01:36.670
> 
> 标签：php, json

我有一些我正在尝试解码的 JSON——它正确地提取了值，但也产生了错误。

这是`var_dump`：

```
["success"]=>
bool(true)
["providers"]=>
array(2) {
[0]=>
object(stdClass)#5 (15) {
  ["address1"]=>
  string(14) "3240 W Lake St"
  ["address2"]=>
  NULL
  ["city"]=>
  string(11) "Minneapolis"
  ["crossStreet"]=>
  string(26) "Lake Street & Market Plaza"
  ["description"]=>
  string(55) "test location28402 description of services/prices/hours"
  ["distance"]=>
  float(0.42900015862223)
  ["lat"]=>
  float(44.948469)
  ["lon"]=>
  float(-93.321155)
  ["name"]=>
  string(17) "testlocation28402"
  ["phone"]=>
  string(10) "6125551212"
  ["precise"]=>
  bool(true)
  ["state"]=>
  string(2) "MN"
  ["url"]=>
  string(41) "http://www.testlocation28402.com?id=28402"
  ["urlCaption"]=>
  string(25) "www.testlocation28402.com"
  ["zip"]=>
  string(9) "554164512"
}
[1]=>
object(stdClass)#6 (15) {
  ["address1"]=>
  string(19) "4335 Excelsior Blvd"
  ["address2"]=>
  NULL
  ["city"]=>
  string(16) "Saint Louis Park"
  ["crossStreet"]=>
  NULL
  ["description"]=>
  string(55) "test location26358 description of services/prices/hours"
  ["distance"]=>
  float(0.91979730006713)
  ["lat"]=>
  float(44.935773)
  ["lon"]=>
  float(-93.33489)
  ["name"]=>
  string(17) "testlocation26358"
  ["phone"]=>
  string(10) "6125551212"
  ["precise"]=>
  bool(true)
  ["state"]=>
  string(2) "MN"
  ["url"]=>
  string(41) "http://www.testlocation26358.com?id=26358"
  ["urlCaption"]=>
  string(25) "www.testlocation26358.com"
  ["zip"]=>
  string(9) "554164811"
}
  } 
["errors"]=>array(0) {
}
} 
```

以上是`var_dump`变量`$jso`n的。我正在尝试使用以下方法提取 CITY 字段：

```
$json = json_decode($surescript);

foreach ($json as $providers){
foreach($providers as $onespot) {
echo "*";
echo $onespot->city;
echo "\n";
}
} 
```

这输出：

**警告：在第****153**行的**/home/content/96/7973196/html/channels/MIL432/storeFinder_2.php**中为 foreach() 提供的参数无效 *Minneapolis *Saint Louis Park

 **因此，它得到了正确的嵌套变量，但也在第二个 foreach 循环中抛出了一个错误。

我做错了什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:07:39.123

您在外部循环中迭代 JSON 中的所有内容，这意味着它正在尝试解析`success`部分、`providers`部分以及`errors`部分。

当您尝试解析 时`success`，您无法迭代内部循环中的内容，因此会出现错误。该`errors`部分是一个数组，因此您可以对其进行迭代-因为其中没有任何内容，因此尝试访问时没有错误/警告`city`，其中不存在。

仅解析提供者：

```
$json = json_decode($surescript);

foreach ($json->providers as $provider){
    echo "*";
    echo $provider->city;
    echo "\n";
} 
```**

# jquery - 使用 jQuery 获取未在 div 中单击的其他按钮

> ID：12791112
> 
> 赞同：0
> 
> 时间：2012-10-09T00:01:45.393
> 
> 标签：jquery

我有一个 HTML div

```
<div id="buttons">
   <button type="button" id= "button_1" >I am button one</button></br></br>
   <button type="button" id= "button_2">I am button two</button></br ></br>
</div> 
```

我附加了以下 jQuery 处理程序

```
$("#buttons").click(function(event) {

} 
```

我想输入代码，将单击按钮的标签类型颜色着色为红色，并将其他按钮或按钮（我可能会添加更多）标签类型颜色恢复为黑色。使用这种类型的代码：

```
 $("#button_1").css("color","red”); 
```

我认为使用 .not 可以让我获得未点击的 div，例如： `$("#buttons").not(“#” + event.target.id).css("color”,”black”)`将所有未点击的按钮 - 基本上是那些不是 event.target 的按钮 - 设置为黑色，然后我将点击设置为红色`$(“#” + event.target.id).css("color”,”black”)`-

它不工作 - 因此我的查询。感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:04:57.987

您可以使用[**.siblings()**](http://api.jquery.com/siblings/)来做到这一点，如下所示：

```
$("#button_1").siblings().css("color","black"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:05:11.443

简单地做

```
$(".buttonClass").click(function(event) {
    $(this).css("color","red");
    $(".buttonClass").not(this).css("color","black");
} 
```

`buttonClass`按钮的类别在哪里。`".buttonClass"`您可以`button`根据您的html替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:05:22.817

您可以使用`.siblings()`选择器来选择兄弟姐妹（是的，真的）：

```
$('#buttons button').click(function() {
  $(this).css('color', 'red').siblings().css('color', 'black');
}); 
```

**演示：http: [//jsfiddle.net/Bsum5/1/](http://jsfiddle.net/Bsum5/1/)**

* * *

更好的方法是使用 CSS 并添加一个类：

```
$('#buttons button').click(function() {
    $('.active').removeClass('active');
    $(this).addClass('active');
});​ 
```

并使用这个 CSS：

```
​.active {
    color: red;
}​ 
```

**演示：http: [//jsfiddle.net/Bsum5/3/](http://jsfiddle.net/Bsum5/3/)**

# javascript - 将字符串和变量连接成 Jade 的变量名

> ID：12791114
> 
> 赞同：2
> 
> 时间：2012-10-09T00:01:46.887
> 
> 标签：javascript, string, variables, concatenation, pug

有没有一种很好、干净的方法可以**将字符串和变量连接成**Jade 可以理解的变量名？

理想情况下，它看起来像这样：

```
each #{shape + 'Text'} in #{shape + 'Texts'}
    li #{shape + 'Text'} 
```

我尝试使用`window[shape + 'Text']`，但这似乎不起作用。也许我做错了？

这就是我想这样做的原因：

我有一个名为的数组`shapes`，如下所示：`['square', 'triangle', 'circle']`

我正在使用 Jade 的`each ... in ...`函数来遍历这个数组。在我的函数的每次迭代中，我需要执行其他`each ... in ...`几个数组之一。我不想使用直接变量来选择要迭代的数组，例如`each shape in shapes`，我想`shape`与字符串连接以获得类似`each squareText in squareTexts`or的东西`each circleText in circleTexts`。

目前，我正在使用条件来达到我想要的结果，但它很冗长，而且不符合语言的极简主义精神。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T15:31:14.950

So it looks like in my case, the trick is to use Javascript's `eval()` function to concatenate the variable name and the string into a new variable name. Here's my successful (and succinct) implementation.

```
- var items = eval(shape + 'Texts');
each item, i in items
    li #{items[i]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T06:14:40.513

我建议查看一个从 Jade 中创建/评估它的选项，尽可能简单地保持翡翠代码（以及与此相关的任何模板）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T02:50:20.557

您可以将变量和字符串括在括号中。

```
each item, i in items
  li=(shape + 'Texts') 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-09T01:18:21.793

我不完全遵循您所指的内容，因为我根本不知道`jade`，但是您会循环遍历这样的数组。

```
var a = ['square', 'triangle', 'circle'];
var i, l, item;
l = a.length;
for (i = 0; i < l; i++) {
  item = a[i];
  // At this point, you can refer to window[item + 'Text']
  // but I'm not sure what that is supposed to mean.
} 
```

还有一个[Array.prototype.every](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)可用，但我通常不会费心将它修补到旧浏览器中。

# encryption - 基本加密/openssl 基本问题。DES CTR 模式和其他

> ID：12791126
> 
> 赞同：0
> 
> 时间：2012-10-09T00:03:32.020
> 
> 标签：encryption, cryptography, openssl, cygwin, des

我要让这个快速而肮脏，因为我的第一个问题引起了人们抱怨它太长了。我正在处理一项密码学任务，但遇到了一些麻烦。我将发布问题，然后概述我遇到问题的特定领域。希望我可以通过这种方式获得一些 mroe 信息。

# 作业问题

1.  下载 openssl 以使用 DES 加密消息，或下载 python 脚本来执行加密和解密。5 (a) 加密短语：

1861 年春天，美国北部和南部之间在各州权利与联邦权威、向西扩张和奴隶制等问题上持续数十年的紧张关系爆发为美国内战（1861-65 年）。

使用带有以下信息的 DES：CTR 模式；没有盐，没有 IV，密钥，十六进制，你的学生 ID 的 SHA-1 哈希的最后 64 位。包括适当的屏幕截图和其他证据，以说服我您已完成加密。

(b) 验证 DES 的“互补性质”1。对于消息，使用 64 位，十六进制：2df87ac380f2f4c1。使用与上一部分相同的密钥。

# 我的问题

可以，然后呢！我不是要你们做我的问题（尽管如果你想为我提出一些好的方向，我完全愿意。

我确实需要澄清几件事。

首先，我用 Cygwin 安装了 openssl，在尝试对文件进行加密时，我遇到了一些问题，这完全让我对这个问题感到困惑。

1.  出于某种原因，我不知道将纯文本文件放在哪里，以便 Cygwin 可以直接找到它。尝试使用 .txt 的整个路径似乎会产生错误。那么我会将明文放在哪里才能直接阅读 openssl/cygwin 呢？（即它的“根”在哪里）

（尝试通用加密命令会产生错误

“aes-256-cbc -a -salt -in secrets.txt -out secrets.txt.enc secrets.txt：没有这样的文件或目录 2674688：错误：02001002：系统库：fopen：没有这样的文件或目录：bss_file。 c:398:fopen('secrets.txt','rb') 2674688:error:20074002:BIO routines:FILE_CTRL:system lib:bss_file.c:400: error in aes-256-cbc ")

1.  Cygwin openssl 似乎没有 CTR 模式，而 CTR 模式肯定需要 IV，所以我想我的教授希望我用所有这些选项来做。我是否必须导入或以其他方式获取 CTR 密码？

关于从哪里开始解决这个问题的任何其他提示都会很棒。

我不能发布很多 URL，但我确实想证明我至少做了一些研究，所以我在这里编译了 pastebin 中的链接 lsit：http: [//pastebin.com/GDhq7GmQ](http://pastebin.com/GDhq7GmQ)

无论如何，我在这个主题上很烂，但我确实想做得很好，所以你们可以给我的任何进展将不胜感激。

谦虚你，一个缓慢失败的 ITSec 第一年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:25:19.037

我认为您应该将 SSL 用作库，而不是 CLI 工具。使用“原始”块加密创建 CTR 并不难。有一种加密模式或多或少是“原始”块加密。

您需要使用 SHA-1 哈希的最后一个字节作为密钥，这有点奇怪，通常使用第一个（最左边的）字节。

# android - Android：如何在不使用finish（）的情况下返回调用活动

> ID：12791129
> 
> 赞同：0
> 
> 时间：2012-10-09T00:03:48.420
> 
> 标签：android, android-activity

我使用以下方法从名为 MainActivity 的 Activity 中调用名为 Activity1 的活动：

```
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent); 
```

所以，当控件来到 Activity1 时。开始正常的活动生命周期。即 onCreate() 被调用等等。

当我在控件处于 Activity1 时单击后退按钮时。调用完成方法，该方法又调用 onDestroy()，现在控件返回到 MainActivity 屏幕。

```
@Override
public void onBackPressed() {
        Log.d(TAG, "onBackPressed()");
        finish();
    } 
```

下次我打电话给 Activity1。当我从上一次调用中调用 onDestroy（当我按下后退按钮时）时，再次调用 onCreate。

问题：1.有没有办法在按下后退按钮时将控制权传递回MainActivity而无需调用“finish()”方法？2.调用finish的问题，每次我从MainActivity调用Activity1，都会创建一个新的Activity1实例。那是生命周期再次从 onCreate() 开始。我不希望这种情况发生，因为这已成为主要的性能问题。

我正在寻找的要点是，当我第一次调用它时，我是否可以从恢复状态而不是 oncreate 启动activity1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:23:08.957

我认为您不需要在 onBackPressed 上调用“finish()”方法。当您按下后退按钮时，Android 会为您执行此操作。onBackPressed 用于最后整理（将内容保存到共享首选项等）。

Android 默认行为是在屏幕上放置新活动时调用 onCreate。如果不发生这种情况，您将无法调用新的 Intent。

我不确定为什么这对您来说是性能问题。你能更详细地介绍一下activity1在做什么吗？您是否在进行繁重的网络通信？是否可以缓存存储结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:53:50.227

在 Actitity1 中，您将 WebView 定义为：

```
private static WebView webView = null; 
```

只有在`onCreate()`它为空时才创建它：

```
if(webView == null){
  //create webview and load from network
} 
```

明智地使用这种方法，因为如果您指向其他活动中的对象或可能保持活动状态的对象（可运行对象、消息等），它可能很容易导致内存泄漏。

# java - Java 正则表达式前瞻需要太多时间

> ID：12791130
> 
> 赞同：5
> 
> 时间：2012-10-09T00:03:49.737
> 
> 标签：java, android, regex

我正在尝试为我的问题创建一个适当的正则表达式，但显然遇到了奇怪的问题。

让我描述一下我正在尝试做的事情..

我的目标是从字符串的两端删除逗号。例如，字符串`, ,, ,,, , , Hello, my lovely, world, ,, ,`应该变成 just `Hello, my lovely, world`。

我准备了以下正则表达式来完成此操作： `(\w+,*? *?)+(?=(,?\W+$))`

它在正则表达式验证器中就像一个魅力，但是当我尝试在 Android 设备上运行它时，`matcher.find()`函数会挂起约 1 分钟以找到合适的匹配项......我认为，问题出在我正在使用的积极前瞻中，但是除了从开头和结尾分别修剪逗号之外，我找不到任何更好的解决方案：

```
output = input.replaceAll("^(,?\\W?)+", ""); //replace commas at the beginning
output = output.replaceAll("(,?\\W?)+$", ""); //replace commas at the end 
```

在 Java 正则表达式的积极前瞻中我是否缺少一些东西？如何检索开头和结尾逗号之间的字符串部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T00:09:53.433

如果您使用匹配组，则不必使用前瞻。尝试正则表达式`^[\s,]*(.+?)[\s,]*$`：

*编辑：*将其分开，`^`匹配行的开头，如果使用，这在技术上是多余的，`matches()`但在其他地方可能有用。`[\s,]*`匹配零个或多个空白字符或逗号，但贪婪 - 它会接受尽可能多的字符。`(.+?)`匹配任何字符串，但尾随的问号指示它匹配尽可能少的字符（非贪婪），并且还将内容捕获到“组 1”，因为它形成了第一组括号。非贪婪匹配允许最终组包含相同的零个或多个逗号或空格 ( `[\s,]*`)。与 一样`^`，final`$`匹配行尾——对 有用`find()`但对`matches()`.

如果您只需要它来匹配空格，请替换`[\s,]`为`[ ,]`.

这应该有效：

```
Pattern pattern = Pattern.compile("^[\\s,]*(.+?)[\\s,]*$");
Matcher matcher = pattern.matcher(", ,, ,,, , , Hello, my lovely, world, ,, ,");
if (!matcher.matches())
    return null;
return matcher.group(1); // "Hello, my lovely, world" 
```

# php - Html表单发布，没有数据传递

> ID：12791132
> 
> 赞同：2
> 
> 时间：2012-10-09T00:04:00.147
> 
> 标签：php, html, forms, post

我已经坐在这个问题上一段时间了，似乎无法弄清楚代码有什么问题。

问题是没有数据从表单发布到脚本。

```
<div class="mws-panel-body">
    <form class="mws-form" action="blueprints/add" method="post" id="pForm">
        <div class="mws-form-inline">
            <div class="mws-form-row">
                <label>Blueprint name</label>
                <div class="mws-form-item small">
                    <input type="text" class="mws-autocomplete mws-textinput" id="pName" value="" />
                    <div>The name of the blueprint, search completion is enabled.</div>
                </div>
            </div>
            <div class="mws-form-row">
                <label>Hangar</label>
                <div class="mws-form-item micro">
                    <select id="pHangar">
                        <option value="0" selected>Personal</option>
                        <option value="1">Corporation</option>
                    </select>
                    <div>Indicates who the blueprint belongs to.</div>
                </div>
            </div>
            <div class="mws-form-row">
                <label>State</label>
                <div class="mws-form-item micro">
                    <select id="pState">
                        <option value="1" selected>Original</option>
                        <option value="0">Copy</option>
                    </select>
                    <div>The state of the blueprint, be it original or a copy.</div>
                </div>
            </div>
            <div class="mws-form-row">
                <label>Productions runs</label>
                <div class="mws-form-item small">
                    <input type="text" class="mws-textinput" id="pRuns" value="0" />
                    <div>The number of production runs left on copy.</div>
                </div>
            </div>
            <div class="mws-form-row">
                <label>Material efficiency</label>
                <div class="mws-form-item small">
                    <input type="text" class="mws-textinput" id="pME" value="0" />
                    <div>The current material efficiency level of the blueprint.</div>
                </div>
            </div>
            <div class="mws-form-row">
                <label>Production efficiency</label>
                <div class="mws-form-item small">
                    <input type="text" class="mws-textinput" id="pPE" value="0" />
                    <div>The current production efficiency level of the blueprint.</div>
                </div>
            </div>
        </div>
        <div class="mws-button-row">
            <input type="submit" value="Add blueprint" class="mws-button blue" />
            <input type="reset" value="Reset" class="mws-button gray" />
        </div>
    </form>
</div> 
```

这似乎是表单本身的问题，好像表单设置为获取，它只是输入带有问号的脚本，`blueprints/add?`，意味着根本没有传递任何数据。

任何指针或建议将不胜感激。

如果有帮助，我的平台是 PHP。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T00:11:17.390

您应该使用 input 的 name 属性将数据发送到 PHP post 脚本。例子：

形式：

```
<form action="add.php" method="post">
    <input type="text" name="firstname" />
</form> 
```

脚本（add.php）：

```
<?php
//print the $_POST['firstname'] variable
echo $_POST['firstname'];
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T00:10:18.907

您需要将 name 属性添加到输入并选择元素

```
<input type="text" name="myinput"> 
```

然后 PHP 将使用这些名称构建您的 $_POST 数组。

# php - Mysql_query 不起作用

> ID：12791138
> 
> 赞同：1
> 
> 时间：2012-10-09T00:04:58.067
> 
> 标签：php, mysql, ajax, apache

这对我来说是一个严重的问题。我刚开始使用 AJAX 和 PHP，但我什至不能有一个好的开始。任何帮助是极大的赞赏。作为此代码的结果，我收到一个空白页，好像已执行查询，但数据库中没有更改。

```
<?php
$user = "login";
$pass = "password";
$con = mysql_connect("localhost","qwerty","qwerty");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("database_sky", $con);

mysql_query("INSERT INTO players (id, username, password) VALUES ('',$user, $pass)");

mysql_close($con);
?> 
```

我不知道是怎么回事。我正在使用 Apache 2.2、PHP 5、MySql 4.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:08:40.970

您的变量永远不会用单引号括起来（它们**应该**是字符串）。

尝试：

```
INSERT INTO players 
   (id, username, password)
    VALUES ('','$user', '$pass') 
```

而您的原始代码是这样评估的：

```
INSERT INTO players (id, username, password) VALUES ('',John, pass) 
```

这不起作用，因为您需要（很可能）输入字符串。你写`john`的，不是`'john'`

我建议做类似的事情`$query = "INSERT INTO .......";`

这样你就可以

**a）** `echo $query;`获取它输出的字符串并将其插入您的 PhpMyAdmin （或任何您用作数据库接口的东西。

**b）**然后你可以做`mysql_query($query)`。这使得组织更容易（在我看来，对我来说）。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T00:06:15.180

你需要传递`$con`给`mysql_query`. 以下应该可以解决您的问题：

```
mysql_query("INSERT INTO players (id, username, password) VALUES ('','$user', '$pass')", $con); 
```

**编辑：**在其他海报指出后发现另一个错误；缺少值周围的单引号。

# c# - 正则表达式替换 URL 的结尾

> ID：12791141
> 
> 赞同：0
> 
> 时间：2012-10-09T00:05:10.477
> 
> 标签：c#, regex

我有一个遵循以下模式的网址：

[http://i.ebayimg.com/00/s/MTUw12323gxNTAw/](http://i.ebayimg.com/00/s/MTUw12323gxNTAw/) $(KGr123qF,!p0F123Q~~60_12.JPG?set_id=88123231232F

我需要一个正则表达式来查找 URL _12.JPG 的结尾并将其替换为 _14.JPG。所以基本上我需要捕获 _[numbers only].JPG 模式并将其替换为我的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:08:50.147

```
var regex = new Regex(@"_\d+\.JPG");
var newUrl = regex.Replace(url, "_14.JPG"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:10:06.140

```
_[0-9]+\.JPG\? 
```

适用于示例 URL。您并没有真正提到您是否希望 ?set_id=88123231232F 消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:15:22.603

基本上，您通常不应该关心 URL 中其他任何地方的句点。这是可能的，但 jpg 扩展名的附加约束应该限制返回的任何内容，没有太大问题。

```
///_(\d?\d).jpg/ig
var regex = new Regex(@"_(\d?\d).[Jj][Pp][Gg]"); 
```

这将捕获下划线和 .jpg 之间的一两个数字

我会仔细检查一下，但它应该适用于一位数和两位数。

# jquery - jQuery scrollTo 在页面上偏移，外部链接指向页面上的锚点

> ID：12791147
> 
> 赞同：1
> 
> 时间：2012-10-09T00:05:51.393
> 
> 标签：jquery, scrollto

> **可能重复：**
> [固定位置导航栏遮盖了锚点](https://stackoverflow.com/questions/9047703/fixed-position-navbar-obscures-anchors)

我有一个使用 scrollTo 的页面（以及使用航点插件的固定标题），它工作正常，我使用 div id 从子菜单链接到页面上的内容 div。

我有另一个页面，其中包含直接指向内容 div 的链接。问题是，由于标题是固定的，当从外部链接访问时，页面内容会落在标题之下。

所以我需要找到一种方法来使用 scrollTo 或它的伴侣 localScroll，在页面加载时自动滚动到负偏移量，以使内容 div 的顶部出现在标题下方。（我通过子菜单的点击来工作，但是如何在页面加载时自动实现这一点？）。

我认为它需要偏移顶部：-150px，但一旦我可以让它工作，显然会根据需要调整它。

你可以在这里看到我的意思：http: [//pinnacleahs.com/ ?page_id=8#delivery-coordinators](http://pinnacleahs.com/?page_id=8#delivery-coordinators)

# css - 使用 CSS 对 live 类型降低 Arc 效果

> ID：12791148
> 
> 赞同：1
> 
> 时间：2012-10-09T00:05:54.660
> 
> 标签：css, text, typography, warp

我想知道 CSS 是否可以实现这种效果（http://igdaloff.com/mission.jpg）。我知道你可以弧整个字母，但很好奇是否有可能保持单词的顶部平坦而只弧形底部。Illustrator/Photoshop 中的效果称为上弧或下弧。

[http://igdaloff.com/mission.jpg](http://igdaloff.com/mission.jpg)

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:23:38.213

不是真的，我唯一能想到的就是像下面的例子一样在每个字母上放一个类，但这不是最好的，但它工作了一半。目前没有办法只使用 css 来弯曲文本，它是严格的矩形，所以你真的只能围绕文本的矩形属性工作。

```
<html>
<head>
<style type="text/css">
body {background-color:yellow;}
p {color:blue;}
.level1 {margin-top:0px !important; position:absolute;}
.level2 {margin-top:-2px; margin-left:10px; position:absolute;}
.level3 {margin-top:-4px; margin-left:20px; position:absolute;}
.level4 {margin-top:-3px; margin-left:30px; position:absolute;}
.level5 {margin-top:-2px; margin-left:40px; position:absolute;}
.level6 {margin-top:0px; margin-left:50px; position:absolute;}
</style>
</head>
<body>
<p><b class="level1">T</b><b class="level2">h</b><b class="level3">e</b> 
<b class="level4">e</b><b class="level5">n</b><b class="level6">d.</b></p>
 </body>
 </html> 
```

[jsFiddle 版本](http://jsfiddle.net/jY6w3/25/)

# c++ - 为什么我的默认构造函数返回一个布尔值？

> ID：12791152
> 
> 赞同：1
> 
> 时间：2012-10-09T00:06:22.957
> 
> 标签：c++, constructor, boolean

> **可能重复：**
> [使用空括号调用默认构造函数时出错](https://stackoverflow.com/questions/180172/error-on-calling-default-constructor-with-empty-set-of-brackets)

当我运行它时，我得到编译器警告：34 [警告]`Rational test4（）的地址，将始终评估为真。但我试图让它默认构造函数是有理数 0/1。第 34 行是 int main() 行：cout << test4;。

```
#include <iostream>

using namespace std;

class Rational
{
public:
       Rational();

       friend ostream& operator <<(ostream& out,Rational rational1);

private:
        int numerator;
        int denominator;

};

int main()
{
    //Rational test1(24,6), test2(24);
    Rational test4();
    //cout << test1<< endl;
    //cout << test2<< endl;
    cout << test4;
    system("pause");
}

Rational::Rational() : numerator(0), denominator(1)
{ 
    //empty body
}

ostream& operator <<(ostream& out,Rational rational1)
{
       out << rational1.numerator <<"/"<<rational1.denominator;
       return out;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:39:33.480

您的程序打印“1”的原因是因为`Rational test4();`声明了一个函数指针。那么如何`std::cout`打印函数指针呢？它涉及自动转换。首先查看普通的旧数据指针。I/O 机器没有打印`double*`指针、`MyClass*`指针或任何可能出现的无数指针的机制。I/O 机器可以做的是打印`void*`指针的机制。由于隐式转换，相同的机制适用于`double*`和`MyClass*`指针，因为所有指针都转换为`void*`指针。

函数指针不会转换为`void*`. 函数指针不是指针！唯一可用的转换是布尔值。转换为布尔值是让您执行诸如`if (function_pointer) do_something();`您的函数指针不为空之类的操作，因此转换为布尔值后，`bool`它会`true`打印为`1`.

解决方案很简单：将其更改`Rational test4();`为`Rational`test4;`,

# javascript - 如何在 QUnit 中进行真正的原子测试？

> ID：12791155
> 
> 赞同：5
> 
> 时间：2012-10-09T00:07:17.180
> 
> 标签：javascript, unit-testing, qunit

假设我有两个类`Book`，`Library`如下所示：

```
var Book = function(title, author)
{
   this.title = title;
   this.author = author;
}; 
```

和

```
var Library = function()
{
   var dbName = 'test';

   this.getLibrary = function() {
      return JSON.parse(window.localStorage.getItem(dbName));
   };

   this.save = function(library) {
      window.localStorage.setItem(dbName, JSON.stringify(library));
   };
}

Library.prototype.addBook = function(book) {
   var library = this.getLibrary();
   library.push(book);

   this.save(library);

   return library;
};

Library.prototype.removeBook = function(book) {
   var library = this.getLibrary();

   // Find and delete the right book

   this.save(library);

   return library;
}; 
```

我的问题是：如何`Library`使用 QUnit 对类进行单元测试以进行真正的原子和独立测试？

我写了这个测试函数，但它并没有让我满意。它似乎不是非常原子和独立的，因为它混合了我认为应该独立测试的几个功能。我想知道是否有更好的方法，或者我已经在测试它了。

```
test("test", function() {
   var library = new Library();

   deepEqual(library.getLibrary(), []);

   // Add book1
   var book1 = new Book("A book", "An author");
   deepEqual(library.addBook(book1), [book1]);
   deepEqual(library.getLibrary(), [book1]);

   // Add book2    
   book2 = new Result("A new book", "Another author");
   deepEqual(library.addBook(book2), [book2, book1]);
   deepEqual(library.getLibrary(), [book2, book1]]);

   // Remove book1
   deepEqual(library.removeResult(book1), [book2]);
   deepEqual(library.getLibrary(), [book2]);

   // Remove book2
   deepEqual(library.removeResult(book2), []);
   deepEqual(library.getLibrary(), []);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T00:31:09.350

避免编写依赖于您正在测试的单元的内部状态的“综合”测试。*对特定行为*进行细粒度测试，而不是声明：

```
test("addBooksReturnsLibrary", function(){
    var l = new Library();
    l.addBook(new Book(...));
    l.addBook(new Book(...));
    var addBooksRetval = l.addBook(new Book(...));
    deepEqual(addBooksRetval, l.getLibrary();
});

test("libraryContainsAddedBook"), function() {
    var l = new Library();
    var b = new Book(...);
    l.addBook(b);
    notEqual(-1, library.indexOf(b));
});

// etc and so forth 
```

大量使用`deepEqual`似乎经常是一种测试气味。例如，如果您确实需要按特定顺序将书籍放在图书馆中，我会说最好专门测试这些排序约束。

# actionscript-3 - 如何在另一个类中设置变量的值时更新一个类中的变量？

> ID：12791158
> 
> 赞同：1
> 
> 时间：2012-10-09T00:07:43.310
> 
> 标签：actionscript-3, flash

我对 AS3 很陌生，所以如果我的问题看起来很愚蠢，请原谅我。

让我澄清一下我具体想要什么：玩家执行一项任务，当他在途中抓到一些物体时，他将获得积分，例如物体 A 给一分，物体 B 给两分，物体 C 给加分，等等……如果玩家在途中遇到了一些障碍，他就会失败，他必须重新玩游戏，直到他到达目的地（关卡结束）。

所以我想要的是如何存储玩家在撞到障碍物之前获得的积分，并且每次玩家必须重玩游戏时累积获得的积分，直到他达到游戏关卡结束，这样总玩家获得的积分将是所有积分的总和，包括他在实际到达游戏关卡结束之前获得的积分。

My Class Player 是属于框架 WCK 的 Box 类的子类。有没有办法让我正确实现依赖注入以将变量传递给另一个类以便将它们存储在那里？

预先感谢您的帮助！

补充：这是我根据 Amy 的示例实现的，并进行了一些调整以适应我的游戏设置。它仍然不起作用，因为当我尝试在 Class Player 中检索它以累积所有积分时，变量 _totalEarnedPoints 的值没有通过 EventDispatcher 更新 Class PlayerClient 中的变量 _earnedPoints。我不确定我做错了什么或错过了什么？谁能指出并告诉我如何从 Class PlayerClient 中检索变量 _totalEarnedPoints？

班级球员：

```
package  
{

public class Player extends Box  
{  
    private var contacts:ContactList;  
    private var myLoader:SWFLoader;  
    private var mcTemp:MovieClip;  
    private var bonusPoints:int = 0;  
    private var onePoint:int = 0;  
    private var twoPoints:int = 0;  
    private var objectACount:int = 0;  
    private var objectBCount:int = 0;  
    private var objectCCount:int = 0;  
    private var replayCount:int = 0;
    protected var _earnedPoints:int; 
    private var myPlayerClient:PlayerClient = new PlayerClient();  
}

public function Player()  
{  
    super();  
}

public override function create():void  
{  
    super.create();  
    listenWhileVisible(this, ContactEvent.BEGIN_CONTACT, handleContact);  
    contacts = new ContactList();  
    contacts.listenTo(this);  
}

public function handleContact(e:ContactEvent):void   
{  
    //Detect collison with other static objects  
    var myObjectA:objectA = e.other.m_userData as objectA;  
    var myObjectB:objectB = e.other.m_userData as objectB;  
    var myObjectC:objectC = e.other.m_userData as objectC;  
    var myObstacle:obstacle = e.other.m_userData as obstacle;       

    if(myObjectC)   
    {
        objectCCount++;  
        myObjectC.remove();  
        if (objectCCount > 0)  
        {  
           bonusPoints = bonusPoints + 5;                   
        }               
    }

    else if(myObjectA) 
    {
        objectACount++;
        myObjectA.remove();
        if (objectACount > 0)
        {
           onePoint = onePoint + 1;                         
        }
    }

    else if(myObjectB) 
    {
        objectBCount++;
        myObjectB.remove();
        if (objectBCount > 0)
        {
          twoPoints = twoPoints + 2;                            
        }
    }       
    else if(myObstacle)
        {               
        var myEarnedPoints:int = myPlayerClient.totalEarnedPoints;
        _earnedPoints = bonusPoints + onePoint + twoPoints + myEarnedPoints;
        dispatchEvent(new Event("EarnedPointChanged"));

        myLoader = new SWFLoader("myMovie.swf",{container:swfHolder,alpha:0,onComplete:completeHandler});
       //adds the loader content to the display list before raw content is loaded.
       addChild(myLoader.content);
       stop();
       myLoader.load();

       function completeHandler(e:LoaderEvent):void
       {
          replayCount++;

          if (replayCount <= 1)
          {
                TweenMax.to(e.target.content, 1, {alpha:1});
                mcTemp = myLoader.rawContent;
                mcTemp.gotoAndPlay(1);
          }
          else if (replayCount >= 1)
          {
                mcTemp = myLoader.rawContent.stop();
                myLoader.unload();
                mcTemp = null;  
          }

       }
       myObstacle.remove();

     }              

}

public function get earnedPoints():int  
{  
     return _earnedPoints;  
}  
} 
```

CLASS PlayerClient

```
package  
{

public dynamic class PlayerClient extends MovieClip
{
    private var _totalEarnedPoints:int;
    protected var _player:Player;

    public function get player():Player
    {
        return _player;
    }

    public function set player(value:Player):void 
    {
        if (value != _player) 
        {
            if (_player) 
            {
                //[prevent memory leaks][2]
                _player.removeEventListener("EarnedPointChanged", updatePlayerScore);
                //don't need this if we don't have a player
                removeEventListener(Event.REMOVED_FROM_STAGE, cleanUp);
            }
            _player = value;
            if (_player) 
            {
                //listen for changes
                _player.addEventListener("EarnedPointChanged", updatePlayerScore);
                //we added a listener to the new player, need to make sure is removed
                addEventListener(Event.REMOVED_FROM_STAGE, cleanUp);
            }
        }
    }

    protected function cleanUp(e:Event):void 
    {
        _player.removeEventListener("EarnedPointChanged", updatePlayerScore);
    }

    protected function updatePlayerScore(e:Event):void 
    {
        _totalEarnedPoints = _player.earnedPoints;

    }

    public function get totalEarnedPoints():int
    {
        return _totalEarnedPoints;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:38:20.833

首先，你正在做的事情会给你带来一个伤害世界，除非你的项目是一个横幅或者你 100% 知道你将工作 2 天并且再也看不到的东西。见[http://misko.hevery.com/code-reviewers-guide/flaw-brittle-global-state-singletons/](http://misko.hevery.com/code-reviewers-guide/flaw-brittle-global-state-singletons/)

您需要意识到的是，您的 Points.pointsEarned 看起来只有在您创建 Player 的新实例时才会改变，并且如果您有多个玩家，则每个新玩家的起始点数将高于一个之前。这可能不是你想要的。你并没有真正说出你想要什么，所以让我扔掉一件你*可能*想要的东西并告诉你如何编码。如果这不正确，我们将从那里开始。

# 编辑：

好的，现在我们知道您希望能够增加获得的积分，所以这个课程现在变得更加简单（查看帖子的修订历史以查看删除了哪些部分）：

```
package{
  public class Player extends EventDispatcher {
    protected var _earnedPoints:int;
    public function Player() {
       super();//not passing a parameter, so target of events will be this
    }
    public function get earnedPoints():int {
       return _earnedPoints;
    }
    public function set earnedPoints(value:int):void {
       if (value != _earnedPoints) {
          _earnedPoints = value;
          //other Classes can listen for this to see if earnedPoints has changed:
          dispatchEvent(new Event('earnedPointsChanged');
       }
    }
  }
} 
```

你没有问这部分，但我认为这是你理解的必要部分。我将解释它以防万一它不明显。您的“对象”需要有自己的类：

```
package {
   class TargetObject extends MovieClip {
      public var points:int;
   }
} 
```

您可以在创建每个 TargetObject 时设置这些值，也可以创建多个子类，其中值是硬编码的。

所以现在，每当发生碰撞时，您都可以执行以下操作：

```
_player.earnedPoints += target.points; 
```

当您设置该变量时，您的 PlayerClient 将更新，即使它是从另一个类设置的。

总之，您需要生成一个事件，其他实例可以侦听以更新自己：

```
package {
   public class PlayerClient extends MovieClip {
      public var playerScoreText:TextField;//assume this is on stage
      protected var _player:Player;
      //assume [dependency injection][1] 
      public function get player():Player {
         return _player;
      }
      public function set player(value:Player):void {
         if (value != _player) {
            if (_player) {
               //[prevent memory leaks][2]
               _player.removeEventListener('earnedPointsChanged', updatePlayerScore);
               //don't need this if we don't have a player
               removeEventListener(Event.REMOVED_FROM_STAGE, cleanUp);
            }
            _player = value;
            if (_player) {
               //listen for changes
               _player.addEventListener('earnedPointsChanged', updatePlayerScore);
               //we added a listener to the new player, need to make sure is removed
               addEventListener(Event.REMOVED_FROM_STAGE, cleanUp);
            }
         }
      }
      protected function cleanUp(e:Event):void {
          _player.removeEventListener('earnedPointsChanged', updatePlayerScore);
      }
      /* This will trigger no matter what changes the value of
         earnedPoints or bonusPoints.
      */
      protected function updatePlayerScore(e:Event):void {
          if (playerScoreText) /*in case it wasn't put on stage */ {
              playerScoreText.text = _player.earnedPoints
          }
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:56:52.360

我自己解决了我的问题：我使用 SharedObject 方法存储积分，然后将积分值检索回我的类 Player 进行累积。EventDispatcher 确实将点传递给了另一个类，但是一旦 Player 撞到障碍物并且游戏重播，所有的点值都会恢复到初始状态，这使得很难将我传递给另一个类的点取回给 Player 类积累。SharedObject 方法确实帮助我解决了我的案例研究中的这个问题。

# clojure - Clojure 嵌套标记文字

> ID：12791161
> 
> 赞同：6
> 
> 时间：2012-10-09T00:08:28.127
> 
> 标签：clojure, literals

我正在尝试解析 PriorityMaps 的嵌套结构：

```
(def reader-map
 {
   'util/pm (fn [x] (println "reading > " x) (parse-map x))
})

(binding [*data-readers* reader-map]
    (clojure.core/read-string "#util/pm \"{:z 4 :y #util/pm \"{:y 3 :x 3}\" :x 9}\"")) 
```

...但我没有看到传递给我的处理程序的嵌套字符串，只有第一个嵌套标记的字符串：

```
 reading >  {:z 4 :y #er.util.net/pm 
```

做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T01:12:39.313

如果要嵌套引号，则需要更多反斜杠：

```
(binding [*data-readers* reader-map]
    (clojure.core/read-string "#util/pm \"{:z 4 :y #util/pm \\\"{:y 3 :x 3}\\\" :x 9}\"")) 
```

# c - 在C中的整数数组中搜索最大数/秒

> ID：12791180
> 
> 赞同：2
> 
> 时间：2012-10-09T00:11:06.750
> 
> 标签：c, search

这从我之前的[问题](https://stackoverflow.com/questions/12788713/searching-for-the-biggest-integer-in-c-more-than-2)继续。

我有一个数组，想在其中找到最大的数字。但是我不能排序，因为数字的索引非常重要，所以不能移动。最后，我的问题的输出应该是“最大的数字在索引 1 和 4 中，数字为 8。这是数组：

```
int anonarray[5] = {3,8,7,5,8}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T00:15:19.803

```
enum { MAX_ENTRIES = 5 };
int anonarray[MAX_ENTRIES] = { 3, 8, 7, 5, 8 };
int maxval = anonarray[0];
int maxidx[MAX_ENTRIES] = { 0, 0, 0, 0, 0 };
int maxnum = 1;

for (int i = 1; i < MAX_ENTRIES; i++)
{
    if (maxval < anonarray[i])
    {
        /* New largest value - one entry in list */
        maxval = anonarray[i];
        maxnum = 1;
        maxidx[0] = i;
    }
    else if (maxval == anonarray[i])
    {
        /* Another occurrence of current largest value - add entry to list */
        maxidx[maxnum++] = i;
    }
}

printf("The biggest number is in %s", ((maxnum > 1) ? "indices" : "index"));
const char *pad = " ";
for (int i = 0; i < maxnum - 1; i++)
{
    printf("%s%d", pad, maxidx[i]);
    pad = ", ";
}
printf(" %s%d, with value %d.\n", ((maxnum > 1) ? "and " : ""),
       maxidx[maxnum-1], maxval); 
```

请注意，将特定于英语的格式国际化并不一定容易！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:20:52.023

循环遍历数组以找到最大值：

```
int max = a[0], count = 0;

for(i=1;i<n;i++)
  if(max<a[i]) 
     max=a[i]; 

for(i=0;i<n;i++)
  if(max==a[i]) 
     count++; //num of maximums 
```

现在声明一个数组来存储索引：

```
int index[count], j=0;

for(i=0;i<n;i++)
{
 if(a[i]==max)
   index[j++]=i;
} 
```

现在`index`有具有元素的索引列表`max`。

这是渐近的 O(n) 并且可能是最少的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:13:11.120

这可以通过使用对指针数组进行排序的技术来解决。就像是：

```
int a[5] = {3,8,7,5,8};
int *pa[5];
for (int i = 0; i < 5; i++) {
    pa[i] = &a[i];
}
sort(pa); // pseudocode, be sure to sort by what pa[i] points to
for (int i = 0; i < 5; i++) {
    printf("n=%d index=%d\n", *pa[i], pa[i] - a);
} 
```

# c# - 无法投射自定义控件

> ID：12791181
> 
> 赞同：1
> 
> 时间：2012-10-09T00:11:14.883
> 
> 标签：c#, custom-controls, controls, ribbon

我正在尝试使用自定义功能区面板[http://www.codeproject.com/Articles/25907/A-Professional-Ribbon-You-Will-Use-Now-with-orb](http://www.codeproject.com/Articles/25907/A-Professional-Ribbon-You-Will-Use-Now-with-orb)，以及想办法制作一个将采用“插件”.dll 的应用程序。这是我目前正在尝试的代码。

```
 Assembly assembly = Assembly.LoadFrom(@"dir");
        Type type = assembly.GetType("WindowsFormsControlLibrary2.UserControl1");
        object o = Activator.CreateInstance(type);
        string s = "GiveControl";
        UserControl uc = (UserControl)type.GetMethod(s).Invoke(o, null);
        ((Panel)uc.Controls.Find("panel1", true)[0]).Parent = panel2;

        RibbonTab rt = (RibbonTab)uc.Controls.Find("ribbonTab1", true)[0]; 
```

最后一行给我一个错误，指出“无法将类型'System.Windows.Forms.Control'转换为'System.Windows.Forms.RibbonTab'”

这条消息的含义很明显，但我不明白为什么会这样。是否有原因无法以这种方式找到自定义控件？

此代码/应用程序只是概念证明/试图找到一种方法来做到这一点（我的第一次尝试）。任何已知的方法将不胜感激。

------UPDATE-----
Appologies，我应该说，这个错误发生在编译时，而不是运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:23:09.327

如果返回*的*控件实际上是一个`System.Windows.Forms.RibbonTab`.

但是，在运行时，它不是。您可以重新编写代码以使其更易于诊断。而不是写：

```
RibbonTab rt = (RibbonTab)uc.Controls.Find("ribbonTab1", true)[0]; 
```

我会把它分解并做一些错误检查：

```
Control controls[] = uc.Controls.Find("ribbonTab1", true);
if (controls.Length == 0)
{
   // No "ribbonTab1" control was found - 
}   

Control rtControl = controls[0];
RibbonTab rt = rtControl as RibbonTab;
if (rt == null)
{
    // The first control named "ribbonTab1" wasn't actually a ribbon tab...
    // Check rtControl.GetType() to see what type it is actually defined to be
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:01:49.770

这是因为 RibbonTab 不是控件

```
public class RibbonTab : Component, IRibbonElement, IContainsRibbonComponents 
```

# windows - 卷文件路径 Windows 7

> ID：12791184
> 
> 赞同：1
> 
> 时间：2012-10-09T00:11:56.183
> 
> 标签：windows, file, filesystems

使用不同外部硬盘驱动器上的视频文件和他们给我的 xml 以及所有文件路径都以 /Volume/name_of_disk/ 开头的项目工作，因为他们在 Mac 上制作了 xml。我想知道 PC 文件系统（特别是 Windows 7）中是否有 /Volume/ 的等价物，然后我可以添加 /name_of_disk/movie_name 并让它找到我的电影。（或多或少与在 Windows 资源管理器中访问计算机相同？）

结束游戏我正在使用 Python，并且可以处理这方面的所有事情，但这更像是一个 Windows 文件系统问题，因为我刚从 Mac 切换过来。

干杯!

# c++ - 在双向链表尾部插入

> ID：12791186
> 
> 赞同：1
> 
> 时间：2012-10-09T00:12:14.540
> 
> 标签：c++, linked-list, nodes, doubly-linked-list

我第一次使用链表，必须创建一个可以在双向链表末尾插入节点的函数。到目前为止我有

```
void LinkedList::insertAtTail(const value_type& entry) {
    Node *newNode = new Node(entry, NULL, tail);
    tail->next = newNode;
    tail = newNode;
    ++node_count;
} 
```

Node 类接受要存储的值、要指向的下一个指针的值以及按该顺序指向的前一个指针的值。每当我尝试在此处插入节点时，都会收到一条错误消息，提示存在未处理的异常，并且在写入位置 0x00000008 时存在访问冲突。

我不完全确定这里出了什么问题，但我认为这与根据错误消息取消引用空指针有关。我真的很感激解决这个问题的一些帮助。

编辑：

我应该早点澄清，tail 是指向列表中最后一个节点的指针。Tail->next 访问最后一个节点的下一个变量，在函数运行之前，它指向 NULL，但在它执行之后应该指向创建的新节点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T00:21:47.620

`tail`最初指向哪里？如果它为 NULL，那么您将在尝试插入第一个元素时取消引用空指针。

如果您`tail`在取消引用之前进行测试会有所帮助吗？

```
void LinkedList::insertAtTail(const value_type& entry) {
    Node *newNode = new Node(entry, NULL, tail);
    if (tail)
        tail->next = newNode;
    tail = newNode;
    ++node_count;
} 
```

If`tail`为 null 并且`offsetof(Node, next)`为 8 可以解释访问冲突，因为`tail->next`地址为 0x00000000 + 8，即 0x00000008，因此分配给`tail->next`将尝试在该地址写入内存，这正是您看到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:20:07.253

*如果不知道插入操作之前*列表的状态（顺便说一下，实际上是*追加*而不是插入），很难判断导致错误的原因。

您很有可能没有处理附加到空列表的初始情况。基本算法是（空列表由 NULL 头指针指示，其他一切都不确定）：

```
def append (entry):
    # Common stuff no matter the current list state.

    node = new Node()
    node->payload = entry
    node->next = NULL

    # Make first entry in empty list.

    if head = NULL:
        node->prev = NULL
        head = node
        tail = node
        return

    # Otherwise, we are appending to existing list.

    next->prev = tail
    tail->next = node
    tail = node 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T00:25:20.253

假设您的 LinkedList 既有头又有尾，不妨试试：

```
void LinkedList::insertAtTail(const value_type& entry) 
{
    Node *newNode = new Node(entry, NULL, tail);
    if (tail)
        tail->next = newNode;
    tail = newNode;
    if (!head)
        head = newNode;
    ++node_count;
} 
```

只是在黑暗中拍摄

# java - 迭代 LinkedList 时出现 ConcurrentModificationException

> ID：12791190
> 
> 赞同：1
> 
> 时间：2012-10-09T00:13:13.477
> 
> 标签：java, android

我不确定为什么我的这部分代码会导致错误，但我知道如果我从列表中删除一个项目并且我只是在迭代它的同时我得到这个异常。我读到同步将是另一个想法，但它并不总是正确的方法。LogCat 显示`while (sw.hasNext())`行的 ConcurrentModificationException。请注意，我的代码的其他部分对列表完全没有影响。

```
Iterator<Weapons> sw = Selected_Weapons.iterator();
                while (sw.hasNext()) {
                    Weapons www = sw.next();
                        if (www.getY()<648){

                            Iterator<Container> cit2 = Containers.iterator();
                            while (cit2.hasNext()) {
                                Container c = cit2.next();

                                if (c.getWeaponID()==www.id){
                                    c.setWeaponID(-1);
                                    c.setIsEmpty(true);
                                    Selected_Weapons.remove(www);
                                }
                            }
                        }
                } 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T00:19:36.473

您正在对 Selected_Weapons 集合进行迭代时对其进行修改。违规行实际上是：

```
Selected_Weapons.remove(www); 
```

在这种情况下，您可能希望遍历集合，并在遍历所有项目后跟踪要删除的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:53:46.767

How about using ConcurrentLinkedList?

# parsing - Haskell - 读取文件并将数据作为参数传递给函数

> ID：12791192
> 
> 赞同：2
> 
> 时间：2012-10-09T00:13:28.860
> 
> 标签：parsing, haskell, io

我正在尝试从文件中获取一些数据，然后对其进行解析并将其作为参数传递给另一个函数。

```
data LogLine = LogLine {
  name      :: String
, args1     :: String
, args2     :: String
, constant  :: String 
} deriving (Ord, Show, Eq)

main = do 
file <- readFile "foo"
let result = (parse final "Input" file) --Parses the file into the LogLine datatype
let firstargs = getFirstArgs result --Get the first argument out of the datatype
let secondargs = getSecondArgs result --Get the second argument out of the datatype
let constant = getConstant result --Get the constant out of the datatype
createGraph firstargs secondargs constant --THIS IS THE PROBLEM 
```

问题是，每当我尝试读入一个文件时，它就会变成一个（IO 字符串），无论我做什么，我都必须携带 IO。该`createGraph`函数被声明为

```
createGraph :: String -> String -> String -> Argument 
```

但是每当我尝试执行最后一条语句时，它都会抱怨：

```
Couldn't match expected type `IO a0' with actual type `Argument'
In the return type of a call of `createGraph' 
```

我不允许更改`createGraph`函数的返回类型，因为它是我需要向其提供参数的大型框架的一部分。有哪些处理方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:22:05.560

你为什么想这么做？

让你的价值进入 IO monad 的唯一方法是使用 return。您可以将对 createGraph 的调用包装到另一个函数中，例如

```
returnGraph a b c = return $ createGraph a b c 
```

或者只是使用另一个 let 绑定并在需要时使用您的值。我不知道你想在那里做什么。请给我们更多细节，比如你想对返回值做什么。

- 根据我从您的评论中了解到的情况，您只需要返回参数，因此您唯一要做的就是返回 $ createGraph firstargs secondargs 常量并将函数从 main 重命名为其他内容，因为 main 必须具有类型 IO ()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:35:38.083

> 问题是，每当我尝试读入一个文件时，它就会变成一个（IO 字符串），无论我做什么，我都必须携带 IO。

我不认为这是真正的问题。问题是 main 的返回类型为 IO() ，这是执行的最后一行的结果。在这种情况下，这意味着`createGraph`导致参数的调用。这就是你得到类型错误的原因，它与从文件中读取的 IO 字符串无关。

一种解决方案是简单地返回`createGraph`main 末尾的结果：

```
return $ createGraph firstargs secondargs constant 
```

# cocos2d-iphone - cocos2d 版本 2 中的滚动区域

> ID：12791194
> 
> 赞同：0
> 
> 时间：2012-10-09T00:13:46.523
> 
> 标签：cocos2d-iphone

我正在尝试使用 cocos2d 2.0 版在我的 cocos2d 游戏中实现帮助屏幕。我的屏幕顶部会有一个标题栏（“帮助”），然后屏幕下方的其余部分是我想要放置滚动帮助部分的地方。理想情况下，我可以将文本和图像都放入此帮助窗口。

问题是 cocos2d 没有像 UIScrollView 这样的功能，而且从我在 Google 搜索中看到的情况来看，我发现的每个自定义解决方案似乎都存在各种问题，各种设备上都会出现各种错误。

到目前为止，我已经尝试过这些解决方案：

*   CCScrollLayer： http: [//www.cocos2d-iphone.org/forum/topic/17118/page/3](http://www.cocos2d-iphone.org/forum/topic/17118/page/3)

*   滚动CCNode：[http ://tonyngo.net/2011/11/scrolling-ccnode-in-cocos2d/](http://tonyngo.net/2011/11/scrolling-ccnode-in-cocos2d/)

*   CCScrollView：[http ://bitbattalion.com/2011/09/uikit-uiscrollview-and-cocos2d/](http://bitbattalion.com/2011/09/uikit-uiscrollview-and-cocos2d/)

我最接近工作的是嵌入一个 UITextView ，但它似乎在几次滚动后随机崩溃，所以对我来说似乎不可靠。

有谁知道这个问题的一个很好的简单健壮的解决方案？看起来应该很简单，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:28:29.820

我建议您创建 new `class`say:(HelpViewClass) 并使用 an 实现它`UIScrollView`并添加您想要添加的任何内容`UIScrollView`，然后您可以将其用作`child`您的图层。

```
Steps 
```

1.  创建一个类 - 用 UIView 继承
2.  添加`UIScrollView`到视图。
3.  将您的组件添加到其中。
4.  将此添加`UIView`到`HelpLayer`.

你可以使用这个添加任何 UIKit 组件到 cocos2d 层

```
[[[CCDirector sharedDirector] view] addSubView:scrollView]; 
```

注意：当您从此 HelpLayer 返回时移除所有 UI 组件。

我想这可能对你有帮助！

# windows - 如何在 Windows 8 应用程序上处理屏幕旋转

> ID：12791195
> 
> 赞同：4
> 
> 时间：2012-10-09T00:14:14.037
> 
> 标签：windows, windows-8

我想知道如何使用 c# 处理 Windows 8 应用程序的屏幕旋转？我想创建几个 xaml 文件，并在每次更改屏幕方向时更改它们。这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:57:39.497

您可以使用 Visual Studio 中的[设备窗口](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh921077.aspx)来记录 UI 元素的状态更改。在设备窗口中，您可以选择其他视觉状态（即捕捉、全屏纵向、全屏横向和填充），然后对所需的最终状态进行所需的更改。然后，这些更改会在作为 XAML 文件一部分的 VisualStateManager 中捕获。这里明显的好处是“它只是工作”，您不必自己检测方向状态或进行任何花哨的 XAML 替换/替换。

[导航、布局和视图教程的第 3 步](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx)有一个这样的例子——当然，它非常简单，但应该让概念得到理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:15:18.957

在您的项目中打开 AppManifest 文件并选择所需的方向。

# python - 芹菜和多线程任务

> ID：12791196
> 
> 赞同：0
> 
> 时间：2012-10-09T00:14:16.193
> 
> 标签：python, multithreading, celery

我正在寻找 Celery 来执行分布在多台机器上的一组定义的任务。每台机器都可以处理多个任务中的任何一个，但其中一些任务将比其他任务需要更多的机器资源。有没有办法使用 Celery 管理这些资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T03:35:38.817

Celery 不提供测量工人当前/过去资源利用率并根据这些测量结果调整他们执行的工作量的方法。但是，您确实需要使用 Celery 进行一些调整，以实现更可预测和更均匀分布的资源利用率 (YMMV)。

[如果您有没有性能要求的任务，您可以考虑使用速率限制来限制](http://docs.celeryproject.org/en/latest/userguide/workers.html#rate-limits)在给定时间段内可以执行的任务数量。

另一种选择是使用[芹菜队列](http://docs.celeryproject.org/en/latest/userguide/routing.html#defining-queues)对您有利。根据您的需要，您可以为轻任务创建一个队列，为繁重任务创建一个队列，然后让马力更大的工人听重队列，而那些听得较少的工人听轻队列（或更多工人听重任务，少听轻任务） ）。

# iphone - 用于存储大量记录的应用程序结构

> ID：12791203
> 
> 赞同：1
> 
> 时间：2012-10-09T00:15:28.000
> 
> 标签：iphone, ios, networking, core-data, data-structures

我正在创建一个处理房地产列表的 iOS 应用程序。目前的结构如下：

1.  设备联系服务器并下载一个索引文件，该文件包含服务器上所有当前记录的 ID 以及每条记录的最后修改时间。

2.  根据索引文件检查设备上的每个核心数据记录，并且：a) 记录是最新的并且没有任何反应。b) 记录已过期，从设备中删除并从服务器重新加载。c) 记录不是索引文件的一部分，会从设备中删除。d) 在具有列表 ID 的设备上未找到任何记录，并从服务器下载。

我使用索引文件是因为我只需要为每条记录下载一小部分数据以便进行比较。

我的问题是这样的，我目前在服务器上大约有 1250 条测试记录。使用当前设置，完成初始索引检查例程大约需要 3 分钟（使用 WiFi）。必须有更好的方法来处理 iOS 应用程序中的大量记录。尝试预先加载核心数据中的所有记录我错了吗？

作为参考，我包括了 ListingRecord.h

```
@property (nonatomic, retain) NSString * amenitiesText;
@property (nonatomic, retain) NSString * bodyLabel1;
@property (nonatomic, retain) NSString * bodyLabel2;
@property (nonatomic, retain) NSString * bodyLabel3;
@property (nonatomic, retain) NSString * brokerID;
@property (nonatomic, retain) NSString * companyID;
@property (nonatomic, retain) NSDate * dateCreated;
@property (nonatomic, retain) NSString * descriptionText;
@property (nonatomic, retain) NSString * displayPrice;
@property (nonatomic, retain) NSString * featuredListing;
@property (nonatomic, retain) NSString * headerLabel;
@property (nonatomic, retain) NSData * headerPhoto;
@property (nonatomic, retain) NSString * lastUpdate;
@property (nonatomic, retain) NSNumber * latitudeData;
@property (nonatomic, retain) NSNumber * listingID;
@property (nonatomic, retain) NSString * listingType1;
@property (nonatomic, retain) NSString * listingType2;
@property (nonatomic, retain) NSString * listingType3;
@property (nonatomic, retain) NSString * listingType4;
@property (nonatomic, retain) NSString * listingType5;
@property (nonatomic, retain) NSString * listingType6;
@property (nonatomic, retain) NSString * listingType7;
@property (nonatomic, retain) NSString * listingType8;
@property (nonatomic, retain) NSNumber * longitudeData;
@property (nonatomic, retain) NSNumber * numberPrice;
@property (nonatomic, retain) NSData * photo1;
@property (nonatomic, retain) NSData * photo2;
@property (nonatomic, retain) NSData * photo3;
@property (nonatomic, retain) NSData * photo4;
@property (nonatomic, retain) NSData * photo5;
@property (nonatomic, retain) NSString * pinLabel;
@property (nonatomic, retain) NSData * thumbnailPic;
@property (nonatomic, retain) NSString * sessionID; 
```

索引文件包含listingID 和lastUpdate，并将它们与设备上的核心数据记录进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:37:59.647

似乎有两个瓶颈，与服务器的通信和检查例程。为了帮助解决第一个瓶颈，我强烈推荐 JSON，如果使用得当，它应该会减少从服务器传递到设备的数据大小，并且非常易于使用。它还应该有助于解决第二个瓶颈，即检查例程，因为您只需从服务器获取返回的数据，使用一行代码将其转换为 JSON 对象表示，然后您基本上是在处理 NSDictionary 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T01:01:18.540

如果您需要一次完成所有这些，我会安排您的流程逻辑，以便您可以在后台线程中执行此“初始索引检查例程”。

另一种选择是将索引文件发送到服务器并让您的后端服务器完成工作，它只返回用于添加、删除、更新等的列表。这取决于您的后端服务器是否能够执行此操作。

# .net - 模拟其他用户时的灾难性失败

> ID：12791207
> 
> 赞同：7
> 
> 时间：2012-10-09T00:16:22.550
> 
> 标签：.net

我正在使用与 WCF 集成的企业库验证块。`System.Runtime.InteropServices.COMException (0x8000FFFF): Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))`当我使用 WIN32 API LogonUser 和 WindowsIdentity.Impersonate 模拟其他用户时，它会报告。在加载配置时获取安全证据似乎有问题。如果我删除模拟的编码，它可以正常工作。这些是异常堆栈跟踪的一部分，希望您能给一些帮助。谢谢。

```
System.Runtime.InteropServices.COMException (0x8000FFFF): Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))
   at System.Security.Policy.PEFileEvidenceFactory.GetLocationEvidence(SafePEFileHandle peFile, SecurityZone& zone, StringHandleOnStack retUrl)
   at System.Security.Policy.PEFileEvidenceFactory.GenerateLocationEvidence()
   at System.Security.Policy.PEFileEvidenceFactory.GenerateEvidence(Type evidenceType)
   at System.Security.Policy.AssemblyEvidenceFactory.GenerateEvidence(Type evidenceType)
   at System.Security.Policy.Evidence.GenerateHostEvidence(Type type, Boolean hostCanGenerate)
   at System.Security.Policy.Evidence.GetHostEvidenceNoLock(Type type)
   at System.Security.Policy.Evidence.GetHostEvidence(Type type, Boolean markDelayEvaluatedEvidenceUsed)
   at System.Security.Policy.AppDomainEvidenceFactory.GenerateEvidence(Type evidenceType)
   at System.Security.Policy.Evidence.GenerateHostEvidence(Type type, Boolean hostCanGenerate)
   at System.Security.Policy.Evidence.GetHostEvidenceNoLock(Type type)
   at System.Security.Policy.Evidence.RawEvidenceEnumerator.MoveNext()
   at System.Security.Policy.Evidence.EvidenceEnumerator.MoveNext()
   at System.Configuration.ClientConfigPaths.GetEvidenceInfo(AppDomain appDomain, String exePath, String& typeName)
   at System.Configuration.ClientConfigPaths.GetTypeAndHashSuffix(AppDomain appDomain, String exePath)
   at System.Configuration.ClientConfigPaths..ctor(String exePath, Boolean includeUserConfig)
   at System.Configuration.ClientConfigPaths.GetPaths(String exePath, Boolean includeUserConfig)
   at System.Configuration.ClientConfigurationHost.CreateConfigurationContext(String configPath, String locationSubPath)
   at System.Configuration.Internal.DelegatingConfigHost.CreateConfigurationContext(String configPath, String locationSubPath)
   at System.Configuration.BaseConfigurationRecord.get_ConfigContext() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-03T18:49:00.270

在我看来，问题在于 System.Configuration 在加载 app.config 时会自行模拟。我能够通过运行来解决这个问题

```
ConfigurationManager.GetSection("system.xml/xmlReader"); 
```

而不是冒充。这样做导致后来的模仿成功。

编辑：稍微澄清一下，我相信这样做会导致 app.config 被加载并缓存到内存中，因此导致问题的代码路径只执行一次并使用原始凭据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-30T14:19:56.277

经过长时间的战斗和许多 ProcMon 捕获后，我发现在某些情况下，在互操作期间和模拟时检查安全区域时会失败。它与此知识库有关：

[https://support.microsoft.com/en-us/kb/945701?wa=wsignin1.0](https://support.microsoft.com/en-us/kb/945701?wa=wsignin1.0)

如果您检查添加注册表节点和密钥的末尾，而不是按照指示添加 w3wp.exe，请添加您自己的可执行文件的文件名。这对我有用 - YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-16T17:17:17.413

我正在分享这段代码，希望对未来的读者有所帮助。它在字母上帮助我摆脱了 3 小时的头痛 :)

```
 //This is an important line to write while impersonating.
        //It will allow SQL server connections to happen otherwise connection strings will error out.
        ConfigurationManager.GetSection("SqlColumnEncryptionEnclaveProviders");

        //Do the impersonation
        var credentials = new UserCredentials(DomainName, AccountName, Password);
        Impersonation.RunAsUser(credentials, LogonType.Interactive, () =>
        {
            //Your code here inside impersonation . . .
        }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-27T16:23:45.207

请参阅我在 MS 论坛中对此主题的回复：

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/b5b7a179-3737-4380-b6cf-843f3e71b317/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/b5b7a179-3737-4380-b6cf-843f3e71b317/)

这是线程标题：连接池随机抛出 COM 异常。

您可以在页面上的文本中搜索 LogonUser。

# java - 引用索引数组

> ID：12791208
> 
> 赞同：0
> 
> 时间：2012-10-09T00:16:41.147
> 
> 标签：java, arrays, slick2d

> **可能重复：**
> [检查索引数组](https://stackoverflow.com/questions/12790350/checking-against-indexed-arrays)

所以我有我的代码，每次按下鼠标时，它都会在 mouseX 和 mouseY 处绘制一个新粒子并将位置存储在一个数组中，以便它可以更新直到它到达屏幕底部时被告知停止。我想做的是检查当前位置与已经“制造”的粒子的位置，如果它具有相同的坐标，则让它更快停止，以产生堆叠效果，有人可以帮我吗？

```
 import java.awt.Point;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class Control extends BasicGameState {
    public static final int ID = 1;

    public Methods m = new Methods();
    public Point[] point = new Point[(800 * 600)];

    int pressedX;
    int pressedY;
    int num = 0;
    String Build = "1.1";

    public void init(GameContainer container, StateBasedGame game) throws SlickException{
    }

    public void render(GameContainer container, StateBasedGame game, Graphics g) throws SlickException {
        for (int index = 0; index < point.length; index++) {
            Point p = point[index];
            if (p != null) {
                if (p.y >= 598) {
                    m.drawParticle(point[index].x,(point[index].y));
                } else {
                    m.drawParticle(p.x, p.y);
                    p.y++;
                }
            }
        }
        g.drawString("Particle Test", 680, 0);
        g.drawString("Build: " + Build, 680, 15);
        g.drawString("Pixels: " + num, 10, 25);
    }

    public void update(GameContainer container, StateBasedGame game, int delta) {
    }

    public void mousePressed(int button, int x, int y) {
        pressedX = x;
        pressedY = y;
        num = num + 1;
        point[num] = new Point(pressedX, pressedY);
        }

    public int getID() {
        return ID;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:27:41.230

您可以将坐标用作哈希并将点存储在 HashSet 中，只需用 x*y 之类的东西重载 Point 的哈希函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:39:35.950

您可以编写一个新方法来检查该点是否位于数组中小于“Index”的索引处。

```
public boolean isInArray(int index)
{
    for (int index2 = 0; index2 < index; index2++)
    {
        if( (point[index2].x == point[index].x) &&
            (point[index2].y == point[index].y) )
        {
            return true;    //point(index) is previously in array
        }
    }
    return false;    //point(index) is NOT previously in array
} 
```

然后在你的 for..next 循环中，你需要使用 break 语句

```
if (isInArray(index))
{
    //the break statement causes the program to exit the current loop
    break;
} 
```

但是，最好通过在 MousePressed 方法中对其进行测试来为您提供更好的服务，以避免首先将点添加到数组中（如果它是重复的）。

祝你好运！

# java - 如何保存变量的值并防止它们在递归时发生变化？还有递归辅助？

> ID：12791209
> 
> 赞同：0
> 
> 时间：2012-10-09T00:16:56.320
> 
> 标签：java

```
import gpdraw.*;

public class Y2K {

// Attributes
SketchPad pad;
DrawingTool pen;

// Constructor
public Y2K() {

    pad = new SketchPad(600, 600, 50);
    pen = new DrawingTool(pad);

    // Back the pen up so the Y is drawn in the middle of the screen
    pen.up();
    pen.setDirection(270);
    pen.forward(150);
    pen.down();
    pen.setDirection(90);
}

public void drawY(int level, double length) {

    // Base case:  Draw an Y
    if (level == 0) {

        //pen.setDirection(90);
        pen.forward(length);
        pen.turnRight(60);
        pen.forward(length);
        pen.backward(length);
        pen.turnLeft(120);
        pen.forward(length);
        pen.backward(length);
    }

    // Recursive case:  Draw an L at each midpoint
    // of the current L's segments
    else {

            //Drawing the bottom "leg" of our Y shape
            pen.forward(length / 2);
            double xpos1 = pen.getXPos();
            double ypos1 = pen.getYPos();
            double direction1 = pen.getDirection();

            pen.turnRight(90);
            drawY(level - 1, length / 2.0);

            pen.up();
            pen.move(xpos1, ypos1);
            pen.setDirection(direction1);
            pen.down();
            pen.forward(length / 2);

            double xpos2 = pen.getXPos();
            double ypos2 = pen.getYPos();
            double direction2 = pen.getDirection();

            //Drawing upper Right Leg
            pen.turnRight(60);
            pen.forward(length / 2); //going to the midpoint
            double xpos3 = pen.getXPos();
            double ypos3 = pen.getYPos();
            double direction3 = pen.getDirection();
            pen.turnLeft(90);
            drawY(level - 1, length / 2.0);

            pen.up();
            pen.move(xpos3, ypos3);
            pen.setDirection(direction3);
            pen.down();
            pen.forward(length / 2);

            //drawing upper left leg
            pen.up();
            pen.move(xpos1, ypos1);
            pen.setDirection(direction1);
            pen.down();
            pen.forward(length / 2);

            pen.turnLeft(60);
            pen.forward(length / 2);
            double xpos4 = pen.getXPos();
            double ypos4 = pen.getYPos();
            double direction4 = pen.getDirection();

            pen.turnLeft(90);
            drawY(level - 1, length / 2.0);

            pen.up();
            pen.move(xpos4, ypos4);
            pen.setDirection(direction4);
            pen.down();
            pen.forward(length / 2);
            pen.forward(length / 2);
        }

}

public static void main(String[] args) {

    Y2K fractal = new Y2K();

    // Draw Y with given level and side length
    fractal.drawY(8, 200);
}   

} 
```

输出：

三角形的某一条腿太长，这会使输出略微偏离。也许是因为代码（长度/ 2）太远了？让我们调试一下。

否则完全没问题，递归很棒，这正是我想做的 ![在此处输入图像描述](../Images/3c78ad2bfc3284d1fd0cf79599c5ea87.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:45:06.513

由于您不断地绘制 Y，我建议您创建一个在给定特定参数（例如长度、Y 的两个分支之间的分离角度、旋转等）的情况下绘制 Y 的方法。这将使您的代码更具可读性和更易于理解。

至于移动到中心，只需考虑坐标平面上的 Y。根据 Y 轴的旋转及其起点，您可以计算中心点。

![图表](../Images/d75f3a763f92b0bf3a265fcca1d366b2.png)

只需将其分解为 x 和 y 分量即可。

![分解成组件](../Images/12712e1e2a560591c8f77c43662fab7d.png)

有了这些信息，我们可以求解**a**和**b**。

```
a = length * sin(θ)
b = length * cos(θ) 
```

然后将此添加到您的 x 和 y 以计算 Y 的中心点。

至于保持恒定的长度，你知道水平。在第一层，level == 1。但是下一层的长度应该是length * (2^level)。在这种情况下，长度/2（因为长度为-1）。

用伪代码术语：

```
public void drawY(int level, double length)
{
    //Drawing the bottom "leg" of our Y shape
    Move Forward length/2
    Save our position 
    Save our direction

    Turn to the right 90 degrees
    Recursion (call drawY())

    revert to original location
    revert to original direction
    move forward length/2 (to go to center point of Y)

    save our new position
    save our new direction 

    //Drawing upper Right Leg
    Turn 60 to the right
    Move Forward length/2 //going to the midpoint
    save our new position (don't forget the center point)
    save our new direction (don't forget the center point direction)
    Turn 90 to the left
    Recursion (call drawY())

    return to our saved position (not center one)
    return to our saved direction (not center one)

    move forward length/2

    //drawing upper left leg
    return to center point
    return to center direction

    turn left 60 
    move forward length/2
    save position (you can overwrite the center one now
    save direction (you can overwrite)

    turn left 90
    Recursion (call drawY())

    return to position
    return to direction
    move forward length/2
} 
```

# regex - 如何在 Jinja2 中使用正则表达式？

> ID：12791216
> 
> 赞同：32
> 
> 时间：2012-10-09T00:17:45.280
> 
> 标签：regex, jinja2

我是 Jinja2 的新手，到目前为止，我已经能够做大部分我想做的事情。但是，我需要使用正则表达式，我似乎在[文档](http://jinja.pocoo.org/docs/)或谷歌的任何地方都找不到任何东西。

我想创建一个模仿 Javascript 中这种行为的宏：

```
function myFunc(str) {
    return str.replace(/someregexhere/, '').replace(' ', '_');
} 
```

这将删除字符串中的字符，然后用下划线替换空格。我怎么能用 Jinja2 做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-10T17:46:20.617

[`replace`](http://jinja.pocoo.org/docs/templates/#replace)如果您实际上不需要正则表达式，则可以使用一个已经存在的过滤器。否则，您可以注册一个[自定义过滤器](http://jinja.pocoo.org/docs/api/#custom-filters)：

```
{# Replace method #}
{{my_str|replace("some text", "")|replace(" ", "_")}} 
```

```
# Custom filter method
def regex_replace(s, find, replace):
    """A non-optimal implementation of a regex filter"""
    return re.sub(find, replace, s)

jinja_environment.filters['regex_replace'] = regex_replace 
```

# c# - Dockpanel 中用户控制的分隔线

> ID：12791217
> 
> 赞同：0
> 
> 时间：2012-10-09T00:17:56.677
> 
> 标签：c#, wpf, dockpanel

我通过 C# 和 WPF 使用 Dockpanel 来显示 2 个用户控件 Left UserControl 是一个带有过滤器的 Datagrid（称为过滤器） Right UserControl 是一个自定义表单，它将根据用户正在查看的数据类型而改变。

我正在通过此代码设置 Dockpanel

```
private void SetMasterDock(UIElement MyFilter, UIElement NewViewer)
        {
            MasterDock.Children.Clear();
            DockPanel.SetDock(MyFilter, Dock.Left);
            DockPanel.SetDock(NewViewer, Dock.Right);
            MasterDock.Children.Add(MyFilter);
            MasterDock.Children.Add(NewViewer);
        } 
```

以上所有内容均按编码工作。

现在我正在寻找的改变（如果可能的话）

我想知道什么/如何使用户能够调整两个用户控件的缩放。因此，如果他们希望看到或多或少的一侧或另一侧，他们只需单击并滑动分隔栏，以便他们可以根据个人喜好调整视图。

ETA：新代码

```
 MasterDock.Children.Clear();
    Grid SplittableGrid = new Grid();
    GridSplitter MovableDevider = new GridSplitter(); MovableDevider.Background = Brushes.Blue; MovableDevider.HorizontalAlignment = HorizontalAlignment.Right; MovableDevider.VerticalAlignment = VerticalAlignment.Stretch; MovableDevider.Width = 5;
    ColumnDefinition LeftDefinition = new ColumnDefinition(); LeftDefinition.Width = new GridLength(200);
    ColumnDefinition RightDefinition = new ColumnDefinition(); RightDefinition.Width = new GridLength(1,GridUnitType.Star);
    SplittableGrid.ColumnDefinitions.Add(LeftDefinition);
    SplittableGrid.ColumnDefinitions.Add(RightDefinition);
    Grid.SetColumn(MyFilter, 0);
    Grid.SetColumn(MovableDevider, 0);
    Grid.SetColumn(NewViewer, 1);
    SplittableGrid.Children.Add(MyFilter);
    SplittableGrid.Children.Add(MovableDevider);
    SplittableGrid.Children.Add(NewViewer);

    DockPanel.SetDock(SplittableGrid, Dock.Left);
    MasterDock.Children.Add(SplittableGrid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:42:59.607

在 winforms 中，您要查找的控件是 splitcontainer。但是在 WPF 中，这是使用 grid + gridSplitter 完成的。这两个控件都在默认工具箱中。

# c# - 从 Windows 应用商店应用程序调用 ASP.NET MVC 4 WebApi 时遇到问题

> ID：12791223
> 
> 赞同：5
> 
> 时间：2012-10-09T00:19:24.913
> 
> 标签：c#, asp.net-web-api, windows-store-apps

我在*应该*调用我的 WebApis 之一的 Windows 应用商店应用程序中运行了以下代码：

```
using (var client = new HttpClient())
{
    var parms = new Dictionary<string, string>
        {
            {"vinNumber", vinNumber}, 
            {"pictureType", pictureType}, 
            {"blobUri", blobUri}
        };

    HttpResponseMessage response;

    using (HttpContent content = new FormUrlEncodedContent(parms))
    {
        const string url = "http://URL/api/vinbloburis";

        response = await client.PostAsync(url, content);
    }

    return response.StatusCode.ToString();
} 
```

WebApi 代码如下所示：

```
[HttpPost]
public HttpResponseMessage Post(string vinNumber, string pictureType, string blobUri)
{
    var vinEntity = new VinEntity
        {
            PartitionKey = vinNumber,
            RowKey = pictureType, 
            BlobUri = blobUri
        };

    _vinRepository.InsertOrUpdate(vinEntity);

    return new HttpResponseMessage { Content = new StringContent("Success"), StatusCode = HttpStatusCode.OK };
} 
```

使用 Fiddler，我观察到以下情况......这是请求的样子：

```
POST http://URL/api/vinbloburis HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Host: URL
Content-Length: 113
Expect: 100-continue

vinNumber=vinNumber&pictureType=top&blobUri=https%3A%2F%2Fmystorage.blob.core.windows.net%2Fimages%2Fimage.png 
```

但是响应是一个错误，几乎没有/没有信息：

```
{"Message":"An error has occurred."} 
```

我什至在本地尝试使用附加到 WebApis 的调试器，而我的 Post 方法永远不会捕获。

有人看到我在这里错过的东西吗？我觉得我正在看它，但没有看到它。我应该补充一点，我可以在通过查询字符串传递参数时调用 HttpGet 方法。现在问题只出在这个 HttpPost 上。

谢谢！

更新：根据人们的一些好评，我添加了更多细节。

我为 WebApis 配置了默认路由...

```
public static void Register(HttpConfiguration config)
{
    config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );
} 
```

因此，我认为 /URL/api/vinbloburis 应该可以工作。此外，如上所述，我目前正在使用 HttpGet。这是 Windows 应用商店应用程序调用 HttpGet WebApi 的工作原理......

```
using (var client = new HttpClient())
{
    using (var response = await client.GetAsync(uri))
    {
        if (response.IsSuccessStatusCode)
        {
            var sasUrl = await response.Content.ReadAsStringAsync();
            sasUrl = sasUrl.Trim('"');

            return sasUrl;
        }
    }
} 
```

...它正在调用以下 WebApi ...

```
[HttpGet]
public HttpResponseMessage Get(string blobName)
{
    const string containerName = "images";
    const string containerPolicyName = "policyname";

    _helper.SetContainerPolicy(containerName, containerPolicyName);

    string sas = _helper.GenerateSharedAccessSignature(blobName, containerName, containerPolicyName);

    return new HttpResponseMessage
        {
            Content = new StringContent(sas),
            StatusCode = HttpStatusCode.OK
        };
} 
```

我希望其他信息有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:41:33.820

我照原样复制了您的代码，但出现 404 错误。

我将签名更改为

```
public HttpResponseMessage Post(FormDataCollection data) 
```

它奏效了。

你也可以这样做，

```
public HttpResponseMessage Post(VinEntity vinEntity) 
```

模型绑定器将为您完成映射工作。

Rick Strahl 在这里有一篇关于这个问题的帖子[http://www.west-wind.com/weblog/posts/2012/Sep/11/Passing-multiple-simple-POST-Values-to-ASPNET-Web-API](http://www.west-wind.com/weblog/posts/2012/Sep/11/Passing-multiple-simple-POST-Values-to-ASPNET-Web-API)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:34:10.390

您是否在清单中打开了 Internet 网络？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:35:02.613

这可能是跨域 Ajax 安全问题。在此处查看 JSONP 信息。=> [http://json-p.org/](http://json-p.org/)

# objective-c - 数组中字典的总和

> ID：12791236
> 
> 赞同：3
> 
> 时间：2012-10-09T00:21:50.927
> 
> 标签：objective-c, nsarray, sum-of-digits

我有一个包含 NSDictionary 列表的 NSArray。喜欢：

```
NSArray *array = ...;
NSDictionary *item = [array objectAtIndex:0];
NSLog (@"quantity: %@", [item objectForKey: @"quantity"]); 
```

如何对数组的所有字典中包含的所有数量求和？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T00:58:17.887

我觉得你可以试试[KVC](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html.)

```
NSMutableArray *goods = [[NSMutableArray alloc] init];
NSString *key = @"quantity";

[goods addObject:@{key:@(1)}];

[goods addObject:@{key:@(2)}];

[goods addObject:@{key:@(3)}];

NSNumber *sum = [goods valueForKeyPath:@"@sum.quantity"];
NSLog(@"sum = %@", sum); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:24:42.193

如果您在数组上调用 valueForKey: ，它会为您提供该键的所有值的数组，因此 [array valueForKey:@"quantity"] 将为您提供一个数组，您可以循环遍历并对所有值求和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:56:30.717

```
NSMutableArray *quantityArray = [item objectForKey: @"quantity"];
int total =0;
for(int i=0;i<[quantityArray count];i++)
{
  total+= [quantityArray objectAtIndex:i];
} 
```

# delphi - Delphi XE2 TIdUDPClient ReceiveString 重载不起作用

> ID：12791237
> 
> 赞同：1
> 
> 时间：2012-10-09T00:21:58.643
> 
> 标签：delphi, compiler-errors, delphi-xe2, broadcast, indy10

我正在使用 Embarcadero RAD Studio XE2 Update 4 和随附的 Indy 软件包。

我的目的是在 LAN 中找到一个服务器，该服务器具有来自 TIdUDPClient 的广播，该服务器等待来自服务器的响应以获取其 IP。如果我使用不带参数的 TIdUDPClient 方法 ReceiveString 接收数据工作正常。

但是，当我尝试使用 RAD Studio 随附的 Indy 10 文档版本 10.5.8.3 中的重载版本时，它无法编译并显示*“E2250：没有可以使用这些参数调用的 'ReceiveString' 的重载版本”* . 这是我的代码：

```
unit Client;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, IdBaseComponent, IdComponent, IdUDPBase,
  IdUDPClient, Vcl.StdCtrls, IdGlobal;

type
  TFormLC = class(TForm)
    UDPClient: TIdUDPClient;
    LServer: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  FormLC: TFormLC;

implementation

{$R *.dfm}

function findServer:string;
var ans, ip : string;
    port: TIdPort;
begin
  with FormLC.UDPClient do begin
    Active := True;
    BroadcastEnabled:=True;
    Broadcast('ServerRequest', 1234);
    ans := ReceiveString(ip, port);
    Active := False;
  end;
  if SameText(ans, 'ServerAccept') then
    result := ip
  else
    result := '';
end;

procedure TFormLC.Button1Click(Sender: TObject);
var ans:string;
begin
  LServer.Caption := findServer;
end;

end. 
```

我注意到 Indy 的[在线文档](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=index.html)与 IDE 附带的文档不同，并按照那里的描述进行了尝试，但没有成功。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T01:47:04.033

您的问题是由`with`语句引起的，您将`port`属性`TIdUDPClient`而不是局部变量`port`传递给`ReceiveString`方法。

```
function findServer:string;
var ans, ip : string;
    port: TIdPort;
begin
  with FormLC.UDPClient do begin
    ....
    ans := ReceiveString(ip, port);//here you are passing the port property 
    Active := False;
  end;
  .... 
end; 
```

作为解决方法，您可以`port`像这样重命名局部变量：

```
 function findServer:string;
var ans, ip : string;
    vport: TIdPort;
begin
  with FormLC.UDPClient do begin
    .... 
    ans := ReceiveString(ip, vport);//now will work
    Active := False;
  end;
end; 
```

甚至最好不要使用该`with`语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T05:47:07.807

`TIdUDPClient`有 2 个重载`ReceiveString()`：

```
function ReceiveString(const AMSec: Integer = IdTimeoutDefault; AByteEncoding: TIdTextEncoding = nil{$IFDEF STRING_IS_ANSI}; ADestEncoding: TIdTextEncoding = nil{$ENDIF}): string; overload;

function ReceiveString(var VPeerIP: string; var VPeerPort: TIdPort; const AMSec: Integer = IdTimeoutDefault; AByteEncoding: TIdTextEncoding = nil{$IFDEF STRING_IS_ANSI}; ADestEncoding: TIdTextEncoding = nil{$ENDIF}): string; overload; 
```

当您`ReceiveString()`不带参数调用时，您调用的是第一个重载。尝试调用第二个重载时，您的代码无法编译，因为您的`with`语句将`TIdUDPClient.Port`属性传递给第二个参数，而不是您的局部`port`变量。编译将不允许您将属性传递给`var`参数。

您需要删除该`with`语句和/或重命名您的`port`变量以解决冲突。

# php - PHP未定义的偏移错误重复

> ID：12791243
> 
> 赞同：1
> 
> 时间：2012-10-09T00:22:24.447
> 
> 标签：php, arrays, loops

我正在尝试运行一个 PHP 脚本来查找所有可被 3 或 5 整除的数字，将它们转储到一个数组中，然后将所有值相加。但是，当我尝试运行它时，我得到一个数字输出（我不知道它是否正确）和数百个错误。他们开始于：

注意：未定义的偏移量：第 18 行 G:\Computer Stuff\WampServer\wamp\www\findthreesandfives.php 中的 1

然后偏移量以 1-3 的增量增加（随机的，我还没有看到模式）。我不知道出了什么问题。这是我的代码：

```
<?php
function loop($x)
{
$a = array(); //array of values divisible by 3 or 5
$l = 0; //length of the array
$e = 0; //sum of all the values in the array
for ($i=0; $i<=$x; $i++){ //this for loop creates the array
    $n3=$i%3; 
    $n5=$i%5;
    if($n3 === 0 || $n5 === 0){
        $a[$i]=$i;
        $l++;
    }

}
for ($v=0; $v<=$l; $v++){ //this loop adds each value of the array to the total value
    $e=$e + $a[$v];
}
return $e;   
}
echo loop(1000);
?> 
```

有人请帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T00:25:40.100

您的代码中的问题是以下行：

```
$a[$i]=$i; 
```

应该：

```
$a[count($a)] = $i; 
```

这是因为 的值`$i`总是在增加，所以使用`$i`指针会在数组的索引中产生间隙。 `count($a)`返回给定数组中的项目总数，这也恰好是下一个索引。

**编辑：** @pebbl 建议使用`$a[] = $i;`作为提供相同功能的更简单的替代方案。

**编辑2：**解决评论中描述的OP的后续问题：

问题似乎`$l`是大于`$a`. 因此，`count($a)`在 for 循环中使用应该可以修复您随后的错误。

尝试更换：

```
for ($v=0; $v<=$l; $v++){ 
```

和：

```
for ($v=0; $v<=count($a); $v++){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:37:20.340

我发现了与@zsnow 说的相同的问题。$a 内有缺口。该`if`条件允许使分配跳过某些索引的间隙。你也可以使用这个

```
foreach ($a as $v){ //this loop adds each value of the array to the total value
    $e=$e + $a[$v];
} 
```

实际上应该是

```
foreach ($a as $v){ //this loop adds each value of the array to the total value
    $e=$e + $v;
} 
```

# asp.net - 如何在 Windows 和 .NET 上运行的 AWS ElasticBeanstalk 上自动安装 SSL 证书？

> ID：12791244
> 
> 赞同：5
> 
> 时间：2012-10-09T00:22:26.867
> 
> 标签：asp.net, iis, amazon-ec2, ssl-certificate, amazon-elastic-beanstalk

有没有办法使用 SSL 证书自动部署基于 .NET/Windows 的 Amazon Elastic Beanstalk 实例？

我已经在 SSL 证书设置中拥有指向 Beanstalk 实例的域的 DNS。

我可以远程手动配置服务器，但我想知道是否有办法让它成为部署包的一部分（类似于 Windows Azure 的）。

如果这不是 Elastic Beanstalk 内置的，在部署（或更新）我的实例后是否有任何挂钩可以运行 PowerShell 脚本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T15:52:52.060

[AWS Elastic Beanstalk 开发人员指南](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_NET.managing.elb.html) 说明了如何为您的 Elastic Beanstalk 环境启用 SSL 证书。
相关部分是：

> 控制 HTTPS 端口
> 
> Elastic Load Balancing 支持 HTTPS/TLS 协议，以便为客户端连接到负载均衡器启用流量加密。从负载均衡器到 EC2 实例的连接是使用明文完成的。默认情况下，HTTPS 端口是关闭的。
> 
> 打开 HTTPS 端口
> 
> *   创建证书和密钥并将其上传到 AWS 访问和身份管理 (AWS IAM) 服务。IAM 服务将存储证书并为您上传的 SSL 证书提供 Amazon 资源名称 (ARN)。有关创建和上传证书的更多信息，请参阅使用 AWS Identity and Access Management 的[管理服务器证书](http://docs.amazonwebservices.com/IAM/latest/UserGuide/ManagingServerCerts.html)部分。
>     
>     
> *   通过从 HTTPS 侦听器端口下拉列表中选择一个端口来指定 HTTPS 端口。
>     
>     
> *   在 SSL 证书 ID 文本框中，输入您的 SSL 证书的 Amazon 资源名称 (ARN)（例如 arn:aws:iam::123456789012:server-certificate/abc/certs/build）。使用您在步骤 1 中创建和上传的 SSL 证书。有关查看证书的 ARN 的信息，请参阅使用 IAM 指南的创建和上传服务器证书部分中的[验证证书对象主题。](http://docs.amazonwebservices.com/IAM/latest/UserGuide/index.html?InstallCert.html)

# asp.net-mvc - 视图设置中的 MVC 下拉列表已选择值

> ID：12791245
> 
> 赞同：1
> 
> 时间：2012-10-09T00:22:42.620
> 
> 标签：asp.net-mvc, drop-down-menu

我正在尝试为下拉列表设置选定的值。

在控制器中我有

```
ViewData["productType"] = new SelectList(myDropDownList); 
```

在视图中：

```
<%= Html.DropDownList("productType", ViewData["productType"] as SelectList, "defaultValue")%> 
```

到目前为止很好，但问题是现在我的下拉列表中有两次“defaultValue”。所以我在下拉列表中有我的所有值，包括“defaultValue”。但此代码将添加“defaultValue”作为第一个元素。我看到了它的两个样本。

我喜欢将所选值设置为“defaultValue”而不添加两次。

我试过

```
ViewData["productType"] = new SelectList(myDropDownList, "defaultValue" ); 
```

但它没有用。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T06:07:08.413

您不应该使用与下拉列表的第一个参数相同的名称作为第二个参数。在您的示例中，您已用于`productType`存储所选值和可用值列表。为了在 ASP.NET MVC 中呈现 DropDown，您需要 2 个属性：

```
<%= Html.DropDownList(
    "selectedProductType", 
    ViewData["productType"] as SelectList, 
    "defaultValue"
) %> 
```

在您的控制器操作中，您可以设置这两个属性：

```
ViewData["selectedProductType"] = "abc";
ViewData["productType"] = new SelectList(myDropDownList); 
```

这假设您`value="abc"`的产品类型下拉列表中已经有一个元素。然后将自动预选该值。

我会向您推荐一种替代方法来呈现下拉列表。它包括摆脱视图数据和引入视图模型以及使用强类型版本的助手：

```
public class ProductViewModel
{
    public string SelectedProductType { get; set; }
    public IEnumerable<SelectListItem> ProductTypes { get; set; }
} 
```

然后您将拥有一个控制器操作，它将填充此视图模型并将其传递给视图：

```
public ActionResult SomeAction()
{
    var model = new ProductViewModel();

    // preselected an element with value = "type2"
    model.SelectedProductType = "type2";

    // bind the available product types
    model.ProductTypes = new SelectList(
        // Obviously those could come from a database or something
        new[] {
            new { Value = "type1", Text = "product type 1" },
            new { Value = "type2", Text = "product type 2" },
            new { Value = "type3", Text = "product type 3" },
            new { Value = "type4", Text = "product type 4" },
        }, 
        "Value", 
        "Text"
    );

    // pass the view model to the view
    return View(model);
} 
```

最后在您的强类型视图中：

```
<%= Html.DropDownListFor(
    x => x.SelectedProductType, 
    Model.ProductTypes, 
    "defaultValue"
) %> 
```

# cedet - 如何判断 CEDET 是否使用 GNU Global？

> ID：12791246
> 
> 赞同：3
> 
> 时间：2012-10-09T00:22:51.653
> 
> 标签：cedet, emacs24

我的 CEDET 大部分时间都在使用 bzr 存储库中的最新版本的 emacs 24.2 上工作。

当我搜索符号或定义时，我看到 cedet 迷你缓冲区显示解析了很多文件，其中一些作为头文件不存在，这些文件对我正在搜索的符号没有任何引用。我将把 CEDET 留给它的工作，让它搜索它认为合适的符号。

是否有任何调试机制或详细模式可以打开以查看 1) 它正在搜索的所有文件是什么。2) 如果它在我的项目的基础上找到了 GTAGS 文件。我了解 CEDET 仅查阅 GTAGS 文件以了解符号。

我问是因为 CEDET 无法找到一些符号的定义，但我可以从 gtags 命令行中找到它。

感谢 Alex 和 Eric 在网络上发表的大量帖子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:52:57.940

这是一个多步骤的过程。

首先，确保您已按照您想要的方式设置 Global，例如通过 ede 的定位功能和 Symref。

接下来，在访问您关心的项目中的文件时，使用：

```
M-x cedet-gnu-global-show-root RET 
```

看看它是否可以在该项目中找到全局索引文件。

接下来，要查看 symref 是否找到它，您需要对此进行评估：

```
M-: (semantic-symref-detect-symref-tool) 
```

它会给你一个符号，代表它选择使用的工具。它会说`'grep`如果它未能使用 Global。

如果你正在配置东西，你可能需要为你的缓冲区重置东西。一个简单的方法是杀死缓冲区，然后再次找到它，或者：

```
M-x (setq semantic-symref-tool 'detect) RET 
```

再次强制检测。

# linux - 如果 git 命令存在，则使 bash 命令回退到 git 命令

> ID：12791251
> 
> 赞同：2
> 
> 时间：2012-10-09T00:23:18.480
> 
> 标签：linux, git, bash, command-line, terminal

基本上我想输入`show`并检查是否`show`定义了命令或别名并触发它并且未定义触发`git show`。

例如`rm`应该做`rm`但`checkout`应该做`git checkout`。

是否可以在其中编程`bashrc`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T00:34:06.103

这非常容易：

```
master tmp$ trap 'git $BASH_COMMAND' ERR
master tmp$ touch foo
master tmp$ rm foo
master tmp$ add foo
bash: add: command not found
fatal: pathspec 'tmp/foo' did not match any files
master tmp$ branch
bash: branch: command not found
  aix
  allocators
  ... 
```

这运行通常的`touch`和`rm`命令，但是因为没有`add`命令它运行`git add foo`并且因为没有`branch`命令它运行`git branch`

The trap command is run on any error, so not only when a command isn't found. You would probably want to do something smarter e.g. run a script which checks whether `$?` is 127 (the code bash sets when a command is not found) and then checks if running it with git instead would work (e.g. by checking for a command called `git-xxx` where `xxx` is the first word of `$BASH_COMMAND`). I leave that as an exercise for the reader.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:46:50.893

There's no simple and proper way to achieve what you need. I think the best to do is to make an alias in `~/.bashrc` for every `git` commands.

But on many distros, if you check `man git`, there's some *Main porcelain commands* that looks like aliases.

You can list all of them using

```
PAGER= man git | grep -oP 'git-\w+(?=\()' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T13:01:12.313

When `bash` cannot find a command, it calls `command_not_found_handle` (if defined). You can define it to look something like this:

```
command_not_found_handle () {
    git "$@" || { echo "$1 not a 'git' command either"; exit 127; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T00:29:00.540

添加到您的`~/.bashrc`：

```
alias show='git show'
alias checkout='git checkout'
... 
```

注意不要为已经执行其他操作的命令创建别名。这可能会破坏其他程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T01:19:12.277

Here's one way of getting a list of all your git commands:

```
git help -a | egrep '^  [a-zA-Z0-9]' | xargs -n1 | sed 's/--.*//' | sort -u 
```

Or you could use what's in `contrib/completion/git-completion.sh`: (This is probably better since you'll probably be looping anyway. Note: You'll need to consider for duplicates, but they don't really matter for `alias`)

```
__git_list_all_commands ()
{
    local i IFS=" "$'\n'
    for i in $(git help -a|egrep '^  [a-zA-Z0-9]')
    do
        case $i in
        *--*)             : helper pattern;;
        *) echo $i;;
        esac
    done
} 
```

# iphone - 带有动画图像的 iPhone UIImageView 需要沿路径移动

> ID：12791253
> 
> 赞同：0
> 
> 时间：2012-10-09T00:23:34.873
> 
> 标签：iphone, animation, uiimageview

我有一个 UIImageView ，其中包含一组图像，它遍历以形成动画。

```
[imageView setAnimationImages:arrayOfImages]; 
```

我现在需要在动画时沿路径移动这个图像视图。我浏览了[这个示例](http://nachbaur.com/blog/core-animation-part-4)的源代码。它使用 UIBezierPath 创建路径，使用 CALayer 表示沿路径移动的对象。但是我将如何为动画 UIImageView 执行此操作？

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:19:18.317

[编辑] 请注意，我还必须将 UIImageView 作为子视图添加到当前视图。

终于用我之前给出的例子弄清楚了。这是我的步骤：

1.  创建路径。（注意下面代码中的 P = CGPointMake）

    ```
    UIBezierPath *trackPath = [UIBezierPath bezierPath];
    [trackPath moveToPoint:P(160, 25)];
    [trackPath addCurveToPoint:P(300, 120)
             controlPoint1:P(320, 0)
             controlPoint2:P(300, 80)];
    [trackPath addCurveToPoint:P(80, 380)
             controlPoint1:P(300, 200)
             controlPoint2:P(200, 480)]; 
    ```

    ……

2.  创建 UIImageView 并为其提供一组动画图像。

    ```
    UIImageView *test = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 30, 30)];
    [test setAnimationImages:[NSArray arrayWithObjects:[UIImage imageNamed:@"bee-1"],    
    [UIImage imageNamed:@"bee-2"], nil]];
    [test startAnimating]; 
    ```

3.  设置 UIImageView 的图层位置并将图层添加到视图的图层：

    ```
    [test.layer setPosition:P(160,25)];
    [self.view.layer addSublayer:test.layer]; 
    ```

4.  创建 CAKeyframeAnimation：

    ```
    CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    anim.path = trackPath.CGPath;
    anim.rotationMode = kCAAnimationRotateAuto;
    anim.repeatCount = HUGE_VALF;
    anim.duration = 8.0;
    [test.layer addAnimation:anim forKey:@"race"]; 
    ```

# javascript - 警告转义数字时得到一个奇怪的字符

> ID：12791256
> 
> 赞同：2
> 
> 时间：2012-10-09T00:24:44.327
> 
> 标签：javascript

我发现当我转义从 0 到 7 的数字并提醒他们时，我得到一个奇怪的符号：

```
alert( "\0" ); // or \1, \2, \3...\7 
```

![奇怪的性格](../Images/b611c0f6d8caaf5b331c8e02930c820e.png)

这仅在我提醒它时可见，但 document.write 和 console.log 不会显示它。大于 7 的转义数字看起来很好。我正在使用最新版本的 Chrome。为什么我会得到这个奇怪的角色？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T00:45:26.047

一般如何解析字符串文字在[第 7.8.4 节](http://es5.github.com/#x7.8.4)中描述。

但是，您看到的行为在[附件 B.1.2](http://es5.github.com/#B.1.2)中进行了描述。本节是关于旧 ES 版本中的八进制转义序列，似乎仍然受支持。结果字符定义如下：

> *   *OctalEscapeSequence :: OctalDigit [lookahead ∉ DecimalDigit]*的 CV是代码单元值为 OctalDigit 的 MV 的字符。
> *   *OctalEscapeSequence :: ZeroToThree OctalDigit [lookahead ∉ DecimalDigit]*的 CV是其代码单元值为（ZeroToThree 的 MV 的 8 倍）加上*OctalDigit的 MV 的**字符*。
> *   *OctalEscapeSequence :: FourToSeven OctalDigit*的 CV是其代码单元值为（FourToSeven 的 MV 的 8 倍）加上*OctalDigit的 MV 的**字符*。
> *   *OctalEscapeSequence :: ZeroToThree OctalDigit OctalDigit*的 CV是其代码单元值为（64（即 82）乘以*ZeroToThree*的 MV ）加上（8 乘以第一个*OctalDigit*的 MV）加上第二个*OctalDigit*的 MV 的字符.

`\x`( `\xx`, `\xxx`) 仅在是八进制数字时才被解释为八进制序列`x`，即介于`0`和之间`7`。

所以，所有的字符`\0`-`\7`实际上都是[控制字符](http://en.wikipedia.org/wiki/ASCII#ASCII_control_characters)。较高的值是指其他字符，例如`\101`is `A`。

我不能告诉你为什么`alert`显示一个奇怪的字符而控制台没有显示任何东西......这可能是一个实现细节。

* * *

**有趣的事实：**在严格模式下不允许八进制转义序列。

**有趣的事实#2：** `\0`实际上不是八进制转义序列，并且仍然可以在严格模式下工作，因为它有自己的生产规则（参见[第 7.8.4 节](http://es5.github.com/#x7.8.4)）。OTHA，`\00`是一个八进制序列，在严格模式下会抛出错误。

# php - 使用 Jquery 或 javascript 将 RTF 文件打印到客户端的默认打印机

> ID：12791257
> 
> 赞同：0
> 
> 时间：2012-10-09T00:25:02.573
> 
> 标签：php, javascript, jquery

我正在`.rtf`根据用户提交的表单为 php Web 应用程序创建一个文件。到这里为止还好。

现在我需要`.rtf`在客户端默认打印机上静默打印此文件，其中没有任何标签（当我们在 MS-Word 中`rtf`打开时，直接打印 rtf 文件，就像我们一样）。`.rtf`

那么是否有任何脚本，使用 javascript 或 jQuery 来执行此操作？显示打印机对话框也适用于我。

谁能给我举个例子。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:38:18.773

这将要求您的脚本到达浏览器沙箱之外并为应用程序编写脚本以启动打印，因此仅使用 javascript 和 jQuery 无法完成。

有几种方法可能有效：

首先，如果您将 RTF 转换为 HTML unsing `unoconv`，然后通过 javascript 调用 print，这将允许您从浏览器进行打印，但它可能会包含浏览器的默认页眉和页脚。

其次，但仅限于 Intranet 应用程序，您可以从 Intranet 区域降低 ActiveX 的安全设置，并将 Word 作为 ActiveX 控件运行：

```
var msw = new ActiveXObject("Word.Application"); 
```

第三，同样对于 Intranet，让服务器运行 OpenOffice 并打印到离用户最近的网络打印机。

考虑用例以及自动打印是否为最终用户增加了足够的价值，值得额外的麻烦。我从网络上“打印”的大部分内容，实际上只是打印到 PDF 并存档到磁盘，而且大多数打印对话框在将作业发送到打印机之前都需要额外点击几下鼠标。

# delphi - Delphi：使用指针函数

> ID：12791258
> 
> 赞同：3
> 
> 时间：2012-10-09T00:25:08.213
> 
> 标签：delphi, function-pointers

我是 delphi 的新手，我在 delphi 中开发的程序与在 C++ 中开发的 dll 一起工作，我需要使用抛出访问冲突地址异常的指针函数，经过多次测试，我不知道如何解决它。

这是delphi中指针函数的定义，从头文件c ++开始翻译

```
type
  TMICRCallback   = function: Integer of Object;  stdcall;
  TStatusCallback = function(dwParam: Cardinal): Integer of Object; stdcall;

  type
   TBiMICRSetReadBackFunction =
      function(const nHande:        Integer;
               pMicrCB:             TMICRCallback;
               var pReadBuffSize:    Byte;
               var readCharBuff:     Byte;
               var pStatus:          Byte;
               var pDetail:          Byte
      ): Integer; stdcall;
var
   BiMICRSetReadBackFunction: TBiMICRSetReadBackFunction;

type
   TBiMICRSetReadBackFunction =
      function(const nHande:        Integer;
               pMicrCB:             TMICRCallback;
               var pReadBuffSize:    Byte;
               var readCharBuff:     Byte;
               var pStatus:          Byte;
               var pDetail:          Byte
      ): Integer; stdcall;
var
   BiMICRSetReadBackFunction: TBiMICRSetReadBackFunction; 
```

* * *

这是调用指针函数的代码

```
type
  function CBMICRRead : Integer; stdcall;
  function CBMICRStatus(dwStatus: LongWord) : Integer;  stdcall;

  Respuesta      : TMICRCallback;
  Estado         : TStatusCallback;

  BiSetStatusBackFunction(m_hApi, Estado);

 BiMICRSetReadBackFunction (m_hApi,
                                    Respuesta,
                                    m_MICRReadBuffSize,
                                    m_MICRReadBuff[0],
                                    m_MICRReadStatus,
                                    m_MICRReadStDetail); 
```

* * *

这是接口的 C++ 端：

```
typedef int (CALLBACK* MICRCallback)(void);
typedef int (CALLBACK* StatusCallback)(DWORD);

int WINAPI BiSetStatusBackFunction(int  nHandle,
                               int (CALLBACK *pStatusCB)(DWORD dwStatus));

int WINAPI BiMICRSetReadBackFunction(int    nHandle, 
                                     int    (CALLBACK *pMicrCB)(void),
                                     LPBYTE pReadBuffSize,   
                                     LPBYTE readCharBuff,    
                                     LPBYTE pStatus,         
                                     LPBYTE pDetail); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T01:42:19.043

您必须避免`Object`从/向 DLL 函数调用结果传递参数。

```
TMICRCallback   = function: Integer;  stdcall;
TStatusCallback = function(dwParam: Cardinal): Integer; stdcall; 
```

# c# - 使用 ac# 关键字在 c# 中解析 JSON 请求

> ID：12791263
> 
> 赞同：2
> 
> 时间：2012-10-09T00:25:29.487
> 
> 标签：c#, json, parsing

我正在尝试解析 JSON rpc 2.0 请求。标准[在这里](http://www.jsonrpc.org/specification)定义。

我将我的班级定义为：

```
 [DataContract]
     public class JsonRpc2Request
     {
         public string method;
         [DataMember(Name = "params")]
         public object parameters;
         public object id;
     } 
```

然后我尝试解析一个请求，如下所示：

```
JavaScriptSerializer ser = new JavaScriptSerializer();
var obj = ser.Deserialize<JsonRpc2Request>(Message.Trim()); 
```

`obj.parameters`总是`null`。我认为这是因为我无法`params`根据 JSON RPC 规范定义具有名称的对象。（我的尝试是使用`[DataMember(Name="params")]`装饰。

`params`当 JSON RPC 规范调用c# 中的关键字名称时，如何填充我的参数对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T00:51:00.493

您可以使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)：

```
DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(JsonRpc2Request));
MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(Message.Trim()));

var obj = ser.ReadObject(stream); 
```

`method`并且您还需要`id`使用`DataMember`属性进行注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:32:11.567

我会使用[Json.Net](http://json.codeplex.com/)来完全控制序列化/反序列化过程

```
string json = @"{""method"":""mymethod"",""params"":[1,2],""id"":3}";
var rpcReq = JsonConvert.DeserializeObject<JsonRpc2Request>(json);

public class JsonRpc2Request
{
    [JsonProperty("method")]
    public string Method;

    [JsonProperty("params")]
    public object[] Parameters;

    [JsonProperty("id")]
    public string Id;
} 
```

由于完成此步骤后，您将不得不处理更复杂的情况，例如

```
 @"{""method"":""mymethod"",""params"":[{""name"":""joe""}],""id"":3}"; 
```

# c++ - C++ 将两个 int 数组连接成一个更大的数组

> ID：12791266
> 
> 赞同：24
> 
> 时间：2012-10-09T00:25:45.360
> 
> 标签：c++, arrays, int, concatenation

有没有办法在 C++ 中获取两个 int 数组

```
int * arr1;
int * arr2;
//pretend that in the lines below, we fill these two arrays with different
//int values 
```

然后将它们组合成一个更大的数组，包含两个数组的值？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-09T00:35:26.447

```
int * result = new int[size1 + size2];
std::copy(arr1, arr1 + size1, result);
std::copy(arr2, arr2 + size2, result + size1); 
```

只是建议，`vector`作为动态数组而不是指针会做得更好

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-09T00:29:53.087

如果您使用数组，则需要分配一个足够大的新数组来存储所有值，然后将值复制到数组中。这将需要知道数组大小等。

如果您使用`std::vector`而不是数组（有其他好处），这会变得更简单：

```
std::vector<int> results;
results.reserve(arr1.size() + arr2.size());
results.insert(results.end(), arr1.begin(), arr1.end());
results.insert(results.end(), arr2.begin(), arr2.end()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T01:13:38.860

另一种选择是使用表达式模板并假装两者是连接的（惰性求值）。一些链接（你可以做额外的谷歌搜索）：

[http://www10.informatik.uni-erlangen.de/~pflaum/pflaum/ProSeminar/](http://www10.informatik.uni-erlangen.de/~pflaum/pflaum/ProSeminar/) http://www.altdevblogaday.com/2012/01/23/abusing-c-with-expression-templates/ [http:// /aszt.inf.elte.hu/~gsd/halado_cpp/ch06s06.html](http://aszt.inf.elte.hu/~gsd/halado_cpp/ch06s06.html)

如果您正在寻找易用性，请尝试：

```
#include <iostream>
#include <string>

int main()
{
  int arr1[] = {1, 2, 3};
  int arr2[] = {3, 4, 6};

  std::basic_string<int> s1(arr1, 3);
  std::basic_string<int> s2(arr2, 3);

  std::basic_string<int> concat(s1 + s2);

  for (std::basic_string<int>::const_iterator i(concat.begin());
    i != concat.end();
    ++i)
  {
    std::cout << *i << " ";
  }

  std::cout << std::endl;

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-20T15:44:17.137

这是相同的解决方案-

```
#include<iostream>
#include<bits/stdc++.h>
using namespace std;
void Concatenate(char *s1,char *s2)
{
    char s[200];
    int len1=strlen(s1);
    int len2=strlen(s2);
    int j;
    ///Define k to store the values on Kth address Kstart from 0 to len1+len2;
    int k=0;

        for(j=0;j<len1;j++)
        {
            s[k]=s1[j];
            k++;

        }
        for(j=0;j<len2;j++)
        {
            s[k]=s2[j];
            k++;
        }
        ///To place a null at the last of the concatenated string to prevent Printing Garbage value;
        s[k]='\n';

    cout<<s;
}

int main()
{
    char s1[100];
    char s2[100];
    cin.getline(s1,100);
    cin.getline(s2,100);
    Concatenate(s1,s2);

    return 0;
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-14T21:28:12.133

```
for (int i = 0; i< arraySize * 2; i++)
{
    if (i < aSize)
    {
        *(array3 + i) = *(array1 + i);
    }
    else if (i >= arraySize)
    {
        *(array3 + i) = *(array2 + (i - arraySize));
    }

} 
```

这可能会对您有所帮助，它不需要向量。我在我的编程课上遇到了类似的问题。我希望这会有所帮助，我需要使用指针算术。这假设 array1 和 array2 被动态初始化为大小“aSize”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-01T20:44:35.677

给定 int * arr1 和 int * arr2，此程序在 int * arr3 中连接两个数组的元素。不幸的是，在 C++ 中，您需要知道要复制的每个数组的大小。但这并不妨碍您选择要从 arr1 复制多少元素以及从 arr2 复制多少元素。

```
#include <iostream>
using namespace std;

int main(){
int temp[] = {1,2,3,4};
int temp2[] = {33,55,22};
int * arr1, * arr2, *arr3;
int size1(4), size2(3); //size1 and size2 is how many elements you 
//want to copy from the first and second array. In our case all.
//arr1 = new int[size1]; // optional
//arr2 = new int[size2];

arr1=temp;
arr2=temp2;

arr3 = new int; 
//or if you know the size: arr3 = new int[size1+size2];

for(int i=0; i<size1+size2; i++){
    if (i<size1)
        arr3[i]=arr1[i];
    else
        arr3[i] = arr2[i-size1];
}
cout<<endl;
for (int i=0; i<size1+size2; i++) {
    cout<<arr3[i]<<", ";
}

} 
```

# android - ListView 或自己回收视图？

> ID：12791268
> 
> 赞同：1
> 
> 时间：2012-10-09T00:26:02.290
> 
> 标签：android, listview, recycle

我有一个应用程序，它加载大量图像并将它们显示`TableLayout`在`ScrollView`. 在运行时，我获取布局父级的宽度，并使用它来确定每个可以进入多少图像`TableRow`（所有图像都是固定大小）。

加载越来越多的图像时，我担心内存问题。我知道 ListView 回收其视图，但我不知道如何动态更改每个项目中的视图数量。我只知道膨胀 XML 不会在运行时更改每个项目的视图数。

所以我的问题是什么更容易 - 弄清楚如何自己回收表格中的视图，或者根据屏幕大小更改列表的项目？只是一个关于如何做更容易的教程的链接对我来说就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:42:14.600

我建议您将 ListView 与 ViewHolder 方法一起使用（您可以在此处查看：[How to load the Listview "smoothly" in android](https://stackoverflow.com/questions/1320478/how-to-load-the-listview-smoothly-in-android)）。

ListView 在滚动时会删除不再可见的视图并获取即将变得可见的视图。这样，它比使用 ScrollView 和 TableLayout 更好。

# bash - AWK：打印 $i 什么都不返回

> ID：12791269
> 
> 赞同：2
> 
> 时间：2012-10-09T00:26:13.373
> 
> 标签：bash, printing, awk

`$file`是一个 csv（制表符分隔），有 59 列和 64 行。第 1 列始终是字符串，而 cols 2+ 始终是整数（当值为 时除外`NULL`）。

```
cat ${file} | while read line 
    do awk -F'\t' '{ for (i=2; i<=NF; i++) print $1 "\t" $i "." }';
    done; 
```

输出：

```
Excellent   .
Good    .
… 
```

然而切换`$i`到`$2`工作：

```
Excellent   29.
Good    7.
… 
```

为什么？？

**编辑**：

```
#lines 1 & 2 from data.csv (columns truncated for brevity):
Excellent   29  54  47  46  38  22  50
Good    7   14  27  24  26  36  20

#reform.sh
file=$1;
awk -F'\t' '{ for (i=2; i<=NF; i++) print $1 "\t" $i; }' ${file}; 
```

仍然像以前一样表现/返回。

**解决方案**：

批准的答案确实提供了 AWK 的正确输出。重新启动我的终端应用程序后，脚本按所述执行。我无法确定终端应用程序问题的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T00:35:34.677

我认为你错了。您拥有的脚本不会输出任何智能^(（a）)，因为当您尝试将每一行读入`$line`时，您实际上并没有将它们提供给`awk`.

您可以通过以下方式摆脱多余（和不正确）的循环：

```
awk -F'\t' '{ for (i=2; i<=NF; i++) print $1 "\t" $i "." }' ${file} 
```

如以下成绩单所示：

```
pax> echo 'A 1 2
...> B 3 4
...> C 5 6' >qq.in

pax> cat qq.in
A 1 2
B 3 4
C 5 6

pax> awk -F' ' '{ for (i=2; i<=NF; i++) print $1 " " $i "." }' qq.in
A 1.
A 2.
B 3.
B 4.
C 5.
C 6. 
```

如您所见（尽管我使用的是空格而不是制表符），这会为您提供所需的输出。

* * *

针对您声称它*仍然*无法正常工作的说法，恐怕我不得不提出不同意见。以下成绩单（带有标签）表明它可以像宣传的那样工作。

```
pax> cat qq.in
Excellent   29      54      47      46      38      22      50
Good        7       14      27      24      26      36      20

pax> awk -F'\t' '{ for (i=2; i<=NF; i++) print $1 "\t" $i; }' qq.in
Excellent   29
Excellent   54
Excellent   47
Excellent   46
Excellent   38
Excellent   22
Excellent   50
Good        7
Good        14
Good        27
Good        24
Good        26
Good        36
Good        20 
```

如果它实际上不在您的环境中工作，那是一个不同的问题。您可能有越野车`awk`或任何其他原因导致它失败。

首先，弄清楚`awk`您使用的是什么版本和操作系统，例如：

```
awk --version
uname -a 
```

* * *

^((a)：)它确实输出*了一些东西，*但几乎可以肯定不是你所期望的。让我们实际看看现实中发生了什么。考虑以下与您的原件类似的成绩单：

```
pax> ( echo 1; echo 2; echo 3 ) | while read line ; do
...>     awk '{print "[" $0 "]"}'
...> done
[2]
[3] 
```

现在这看起来很奇怪，它似乎正在丢弃第一行。

造成这种情况的原因是`while`和之间的脱节`awk`。从标准输入读取第一行并将其`while`分配给`$line`，然后执行该`do..done`部分的主体。

该主体是`awk`没有输入文件的，因此*它从标准输入中获取输入！*

这意味着它将“吸收”您的标准输入流的其余部分并对其进行处理。

然后，它将返回到`while`循环，但由于标准输入上没有更多数据，它将完成。最好用以下方式说明：

```
pax> ( echo 1; echo 2; echo 3 ) | while read line ; do
...>     echo "read: $line"
...>     awk '{print "awk:  " $0}'
...> done
read: 1
awk:  2
awk:  3 
```

如果您实际上*将*`while`和`awk`与下面的部分连接起来，`echo "$line" |`您会看到它正常工作：

```
pax> ( echo 1; echo 2; echo 3 ) | while read line ; do
...>     echo "$line" | awk '{print "[" $0 "]"}'
...> done
[1]
[2]
[3] 
```

当然，将您的输入分成几行并一次发送`awk`一条是没有意义的，因为`awk`它完全能够一次处理多行。

所以这个答案的第一个代码块中显示的单行`awk`命令仍然是一种更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:28:42.893

你可以做

```
awk -F$'\t' '{ for (i=2; i<=NF; i++) print $1 "\t" $i "." }' FILE 
```

而不是所有不需要的管道。

# c# - 如何将具有索引引用的 JSON 数据反序列化为强类型 C# 对象？

> ID：12791272
> 
> 赞同：3
> 
> 时间：2012-10-09T00:26:28.550
> 
> 标签：c#, json, json.net

我想反序列化类似于以下内容的 JSON 数据（使用 Newtonsoft），并转换为 C# 中的强类型对象/列表，但无法弄清楚如何定义类以便将索引引用转换为引用的对象。

```
{
  "Countries": [
    {
      "Name": "USA",

    },
    {
      "Name": "UK",
    },
    {
      "Name": "JAPAN",
    },
  ],
  "Authors": [
    {
      "DisplayName": "John Doe",
      "RealName": "Not John Doe"
    },
    {
      "DisplayName": "Jane Doe",
      "RealName": "Not Jane Doe"
    },
  ],
  "Books": [
    {
      "Author": 0,
      "Title": "A good read",
      "PublishedCountries": "0,1",

    },
    {
      "Author": 0,
      "Title": "Another good read",
      "PublishedCountries": "0,1",
    },
    {
      "Author": 1,
      "Title": "This one is even better",
      "PublishedCountries": "0,1,2",
    },
  ],
} 
```

理想情况下，我想使用类似于以下的类：

```
public class Country
{
  public string Name { get; set;}
}

public class AuthorDetails
{
  public string DisplayName { get; set; }
  public string RealName { get; set; }
}

public class Book
{
  public AuthorDetails Author { get; set; }
  public string Title { get; set; }
  public IEnumerable<Country> PublishedCountries { get; set; }
}

public class ListOfBooks
{
  public IEnumerable<Book> Books { get; set; }
} 
```

并像这样反序列化：

```
var listOfBooks = JsonConvert.DeserializeObject<ListOfBooks>(jsonAsString); 
```

我被困在如何告诉 Json.Net JObject 书中的 Author 属性是一个索引，而不是一个整数。PublishedCountries 也是如此（以逗号分隔的索引列表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:39:30.863

除了帮助反序列化过程之外，我看不到其他方法。

```
var dynObj = (JObject)JsonConvert.DeserializeObject(json);

var authors = dynObj["Authors"]
                .Select(j => new AuthorDetails { 
                            RealName = (string)j["RealName"], 
                            DisplayName = (string)j["DisplayName"] 
                })
                .ToList();

var countries = dynObj["Countries"]
                .Select(j => new Country { Name = (string)j["Name"]})
                .ToList();

var books = dynObj["Books"].Select(x => new Book
                {
                    Author = authors[(int)x["Author"]],
                    Title = (string)x["Title"],
                    PublishedCountries = x["PublishedCountries"].ToString().Split(',')
                                            .Select(i =>countries[int.Parse(i)])
                                            .ToList()
                })
                .ToList(); 
```

* * *

```
public class Country
{
    public string Name { get; set; }
}

public class AuthorDetails
{
    public string DisplayName { get; set; }
    public string RealName { get; set; }
}

public class Book
{
    public AuthorDetails Author { get; set; }
    public string Title { get; set; }
    public List<Country> PublishedCountries { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:39:17.350

我相信您想要做的是“保留对象引用”。

您可以使用属性标记您的 C# 对象以描述何时使用引用，而不是重新复制对象的内容：

`[JsonObject(IsReference = true)]`（用于类型声明）

但是，您生成的 Javascript 看起来与您演示的不太一样，请查看此处以了解如何操作。

[http://james.newtonking.com/projects/json/help/?topic=html/PreserveObjectReferences.htm](http://james.newtonking.com/projects/json/help/?topic=html/PreserveObjectReferences.htm)

相反，您的 JSON 看起来更像这样：

```
{
  "Countries": [
    {
      "Name": "USA",

    },
    {
      "Name": "UK",
    },
    {
      "Name": "JAPAN",
    },
  ],
  "Authors": [
    {
      "DisplayName": "John Doe",
      "RealName": "Not John Doe"
    },
    {
      "DisplayName": "Jane Doe",
      "RealName": "Not Jane Doe"
    },
  ],
  "Books": [
    {
      "$id": 1,
      "Author": 0,
      "Title": "A good read",
      "PublishedCountries": "0,1",

    },
    {
      "$ref": 1
    },
    {
      "Author": 1,
      "Title": "This one is even better",
      "PublishedCountries": "0,1,2",
    },
  ],
} 
```

# jquery - 主动镜像部分屏幕的 jQuery 和 HTML5 画布

> ID：12791273
> 
> 赞同：0
> 
> 时间：2012-10-09T00:26:41.927
> 
> 标签：jquery, html, css, canvas, mirror

在一个涉及玻璃码头反射的照片网站上工作。它很光滑。

我不想使用 CSS3 的 box-reflect 属性，而是想在文档中构建一个画布层，它可以简单地翻转其上方的任何内容并具有渐变蒙版。有几个原因：

*   浏览器兼容性（Chrome 有一个 box-reflect 错误，这让我很生气）
*   吹毛求疵的人工物理……当越过码头边缘时，我只想要码头上的倒影

我在网上环顾四周，看到了很多插件资源，这些插件为你运行的每个图像构建了一个画布元素——但这些都不适合我。

理想情况下，我有一些 jQuery 可以复制停靠栏上方区域中的所有像素并将其翻转过来，然后在我将预定义的一些事件上运行（例如每当幻灯片中的图像移入时）。

有人看过这方面的资源吗？我疯了，错过了更好的方法吗？谢谢你的帮助！

这是一个小眼睛糖果的屏幕截图。页面上除图像外的所有内容都是 CSS。

[http://cloud.dhut.ch/image/0F1i2T0p3i3M](http://cloud.dhut.ch/image/0F1i2T0p3i3M)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:11:45.353

如果您想考虑移动支持，我建议您坚持使用 CSS 属性，因为它们比画布绘图更好。另一方面，如果您想支持浏览器，您可以使用画布创建反射。

画布解决方案很难。时期。从一个或一系列图像中进行反射没有捷径可走。以下是我将采取的制作画布反射的基本步骤。

1.  遍历您在给定时间显示的所有图像。
2.  [在隐藏的画布上绘制](http://www.w3schools.com/html5/canvas_drawimage.asp)每个图像。
3.  在同一基线绘制所有图像后，从整个画布中获取[图像数据。](http://www.w3schools.com/html5/canvas_getimagedata.asp)
4.  使用 simple for 对像素进行迭代来迭代和翻转图像数据。
5.  对于从顶部开始的图像数据的每个像素行，通过将每个像素的 alpha 值更改一个度数来降低不透明度。这将创建渐变淡出效果。
6.  将图像数据放入反射画布中。

每次从场景中更改一张图像时，都需要重新绘制它。每次移动时（如果有滚动条），您必须更新反射。

从性能的角度来看，这确实很昂贵。

拥有 css 反射将是硬件加速的，它会开箱即用，当浏览器完全支持它时，它会非常流畅。

在我看来，画布方法是矫枉过正的。

# python - 在 pypi 包中包含用户可编辑的配置文件的最佳方法是什么？

> ID：12791275
> 
> 赞同：3
> 
> 时间：2012-10-09T00:27:17.950
> 
> 标签：python, pypi

我有一个使用配置文件的命令行 python 脚本。我打算很快把它放在pypi上。

在包中包含默认版本的配置文件的最佳通用方法是什么，以便最终用户可以清楚地在哪里找到它？

包含用户可编辑配置文件的 pypi 项目的一个示例是 Django。在 Django 中，用户必须运行一个脚本来初始化一个新项目。这会生成一个包含一堆东西的目录，包括项目配置文件。但是，对于像我这样的简单命令行实用程序来说，这似乎是一种繁重的方法。

另一种选择是要求用户将配置文件的位置指定为命令行参数。我想这没问题，但它让用户有责任去查看文档并从头开始创建整个配置文件。

有没有更好的选择？这有什么标准做法吗？

谢谢！

-特拉维斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:06:24.373

您可以将默认值作为脚本的一部分包含在内，然后允许用户使用命令行参数或用户主目录中的配置文件更改默认值。

除非您有项目的概念，否则我认为 Django 方法不会起作用。

如果这是在 Unix 上，我会将配置文件放在 /etc 中，如果脚本将由多个用户运行，或者作为 dotfile 放在用户的主文件夹中。这样，用户不必每次都指定配置文件，尽管您也可以有一个命令行参数，让用户指定要使用的不同配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:35:42.193

我喜欢内森的回答。但在这种特定情况下，我最终向脚本添加了一个命令行选项，该选项会将示例配置文件转储到标准输出。

# c++ - 基于对话框的项目中的功能区 c++

> ID：12791279
> 
> 赞同：0
> 
> 时间：2012-10-09T00:27:48.903
> 
> 标签：c++, windows, mfc, ribbon

我有一个带有漂亮工具栏的 MFC 项目，但我想更改功能区菜单的工具栏

有谁知道如何添加功能区菜单并使用它而不是菜单工具栏？

我的项目是一个基于对话框的项目。

# c# - .Net 支持哪个版本的 httpclient

> ID：12791283
> 
> 赞同：1
> 
> 时间：2012-10-09T00:28:32.103
> 
> 标签：c#, .net, c#-4.0

有人建议我们在代码中使用 HttpClient 而不是 HttpWebRequest。我想知道 HttpClient 从哪个版本得到支持？

我搜索了， http: [//msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)

它只从4.5开始吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T00:33:43.943

它仅在 .NET 4.5 中受支持。

但是，它作为 Web API 的一部分可用于 .NET 4，包括 通过[NuGet 包的](http://nuget.org/packages/HttpClient)[源代码](http://wcf.codeplex.com/SourceControl/changeset/view/417c9a96fc24#WCFWebApi/Http/Src/Microsoft.Net.Http/HttpClient.cs)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:34:23.793

是的，它是 Framework 4.5 中的一个新类

> > HttpClient
> 
> 添加了一个名为 HttpClient 的新类，以便更轻松地处理 HTTP 请求。有关详细信息，请参阅使应用程序具有社交性并与 HTTP 服务和连接。

[Windows Communication Foundation 4.5 中的新增功能](http://msdn.microsoft.com/en-us/library/dd456789.aspx)

# css - CSS 属性选择器与兄弟选择器混合

> ID：12791284
> 
> 赞同：1
> 
> 时间：2012-10-09T00:28:34.497
> 
> 标签：css, css-selectors

是否可以使用属性选择器来部分搜索内联样式属性？

谁能找到让这段代码工作的方法？

[http://jsfiddle.net/v4xPY/1/](http://jsfiddle.net/v4xPY/1/)

似乎不可能做到这一点`.hidden[style*="display: block"] + .below`，甚至也不可能`[style]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:53:03.350

~~您尝试使用的属性选择器不是[合法的 CSS](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)，尽管它是一个 jQuery 属性选择器。据我所知，CSS 仅限于`[attribute=value]`,`[attribute~=value]`和`[attribute|=value]`.~~ （derp，见下文）

但是，由于您已经在使用 jQuery 来切换`hidden`div，因此同时在 div 上切换一个类会简单得多`below`，而不是与属性选择器搏斗（除非它有更多功能） .

修改后的 jQuery：

```
$(function() {
  $('html').click(function() {
    $('.hidden').slideToggle();
    $('.below').toggleClass('yellow');
  });
});​ 
```

和 CSS：

```
/* Margin of Below should reduce when hidden is opened */
.yellow {
  margin-top: 10px; 
  background: yellow;
} ​ 
```

[在这里拉小提琴](http://jsfiddle.net/ultranaut/4aqSV/)。

**编辑**：好的，我对属性选择器有点不了解，它是合法的 CSS3；我不知道浏览器支持的细节，但我猜它会在所有常见的“现代”浏览器中得到支持。`style`此外，IE7专门针对该属性显然存在问题。[在http://www.impressivewebs.com/attribute-selectors/](http://www.impressivewebs.com/attribute-selectors/)上有一篇很好的文章。

**再一次**：虽然我找不到任何明确证实这一点的东西，但看起来属性选择器只适用于实际硬编码到 html 中的属性；基本上它只是解析字符串，而不是检查 dom 元素的“状态”吗？

# javascript - jQuery 限制插件问题

> ID：12791286
> 
> 赞同：1
> 
> 时间：2012-10-09T00:28:39.557
> 
> 标签：javascript, jquery

这个问题是参考[这个 jQuery 限制插件](http://unwrongest.com/projects/limit/)。这是来源：

```
(function($){ 
    $.fn.extend({  
        limit: function(limit,element) {
            var interval, f;
            var self = $(this);

            $(this).focus(function(){
                interval = window.setInterval(substring,100);
            });
            $(this).blur(function(){
                clearInterval(interval);
                substring();
            });

            substringFunction = "function substring(){ var val = $(self).val();var length = val.length;if(length > limit){$(self).val($(self).val().substring(0,limit));}";

            if(typeof element != 'undefined')
                substringFunction += "if($(element).html() != limit-length){$(element).html((limit-length<=0)?'0':limit-length);}"

            substringFunction += "}";
            eval(substringFunction);
            substring();            
        } 
    }); 
})(jQuery); 
```

现在我可能只是在这里吹毛求疵......但也许我错过了一些东西。以下是我的问题/疑虑：

1）在字符串中创建子字符串函数然后`eval`'ing它的目的是什么？仔细看，如果函数正常初始化，扩展似乎可以正常工作。

2）我不喜欢它使用 a`setInterval`来执行子字符串函数。难道一个`keypress`或类似的事件不是更好、更合乎逻辑的方式吗？此外，我认为这是（或至少启用）[v1.2 更改日志](http://unwrongest.com/projects/limit/)中引用的“闪烁文本”错误的原因（不，它没有修复）。

3）为什么要`f`初始化变量？它从未被使用或引用过。

4）另外，这不是一个可链接的方法，作为一个 jQuery 扩展，它应该是。我对编写 jQuery 扩展不太熟悉，但这可以通过`return this;`在方法结束时完成，对吗？

看起来这只是一个糟糕的编程案例，但我想得到一个外界的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:06:30.560

1) 我同意。看起来他不理解我的关闭。

2) 很难准确预测哪些事件可能会改变文本框的内容。按键很明显，但也许鼠标事件也可以做到。它也可以由其他 Javascript 函数更新。

3）我有几个猜测：a）当他试图让闭包工作时，他正在使用它来保存回调函数，并且在切换到 eval kludge 时没有删除声明；b）它应该保存子字符串函数字符串，但是他犯了一个错误并`substringFunction`在分配它时调用了它（注意他忘记了`var`那里的声明）。

4) 对。

仅仅因为有人将他们的代码发布到网站并不意味着他们是专家。

# css - Twitter bootstrap 手风琴固定大小百分比

> ID：12791290
> 
> 赞同：3
> 
> 时间：2012-10-09T00:29:03.650
> 
> 标签：css, twitter-bootstrap, height, accordion

使用 twitter 引导程序，我正在尝试创建一个手风琴，它在展开时将占据`80%`屏幕`height`。到目前为止，我还没有找到一种方法让它与`%`. 固定高度可以正常工作，但如果不进行计算来确定屏幕高度的 80% 将是多少，这是毫无意义的。

```
<div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle btn-warning btn" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                RETURNED RESULTS
                </a>
            </div>
            <div id="collapseOne" class="accordion-body collapse in">
                <div class="accordion-inner">
                Anim pariatur cliche...
                </div>
            </div>
        </div>
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle btn btn-danger" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                WRITE RESPONSE
                </a>
            </div>
            <div id="collapseTwo" class="accordion-body collapse">
                <div class="accordion-inner">
                Anim pariatur cliche...
                </div>
            </div>
        </div>
    </div> 
```

**css**

```
#admin-response{
    width:60%;
    min-width:400px;
    margin-left:10%;
    height:85%;
    float:left;
}
#admin-response .accordion-inner{
    width:100%;
    background-color:#fff;
    height:100%;
    box-shadow:2px 2px 12px rgba(0, 0, 0, 0.15);
    -moz-box-shadow:2px 2px 12px rgba(0, 0, 0, 0.15);
    -webkit-box-shadow:2px 2px 12px rgba(0, 0, 0, 0.15);
}

#admin-response .accordion-body.in.collapse{
    min-height:85%;
}​ 
```

我创建了一个小提琴，显示了我在本地拥有的东西

[http://jsfiddle.net/bpSjn/1/](http://jsfiddle.net/bpSjn/1/)

手风琴模型与 twitter 给出的示例相同。对 css 进行了一些小的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:47:55.680

JSFiddle here with simple jQuery to measure window Height

```
var viewportHeight = $(window).height() * 0.8;
$('.accordion').css('max-height', viewportHeight);
$('.accordion').css('min-height', viewportHeight); 
```

[http://jsfiddle.net/bpSjn/31/](http://jsfiddle.net/bpSjn/31/)

Also note the deleted heights in the CSS

# android - 如何在 Android 上做这个自定义标签？

> ID：12791291
> 
> 赞同：1
> 
> 时间：2012-10-09T00:29:05.897
> 
> 标签：android, textview, label

我如何制作这个自定义标签？

![在此处输入图像描述](../Images/5193447a5b9c96a22eecce00f1cc6b3d.png)

它是带有背景图像的 TextView 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:55:31.287

您将不需要自定义视图来创建它。

使用带有背景图像和 Right Image 属性的 TextView。使用 RelativeLayout 将其重叠在咖啡图像上。

如果您必须在多个地方使用它，请扩展 frameLayout 以创建自定义组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:37:05.103

它可能只是位于下方 TextView 上方的另一个 ImageView（咖啡）上方的 Imageview。您可以查看 Android[布局](http://developer.android.com/guide/topics/ui/declaring-layout.html)和[UI。](http://developer.android.com/guide/topics/ui/index.html)

或者，它只是一个网页的移动版本，然后您可以查看 html 以了解如何操作。

# iphone - iPhone代码反汇编的问题

> ID：12791294
> 
> 赞同：1
> 
> 时间：2012-10-09T00:29:23.813
> 
> 标签：iphone, arm, disassembly

这是 iPhone 上 syscall() 的反汇编。

```
(gdb) disass syscall
Dump of assembler code for function syscall:
0x3195fafc <syscall+0>: mov     r12, sp
0x3195fb00 <syscall+4>: push    {r4, r5, r6, r8}
0x3195fb04 <syscall+8>: ldm     r12, {r4, r5, r6}
0x3195fb08 <syscall+12>:        mov     r12, #0 ; 0x0
0x3195fb0c <syscall+16>:        svc     0x00000080
0x3195fb10 <syscall+20>:        pop     {r4, r5, r6, r8}
0x3195fb14 <syscall+24>:        bcc     0x3195fb2c <syscall+48>
0x3195fb18 <syscall+28>:        ldr     r12, [pc, #4]   ; 0x3195fb24 <syscall+40>
0x3195fb1c <syscall+32>:        ldr     r12, [pc, r12]
0x3195fb20 <syscall+36>:        b       0x3195fb28 <syscall+44>
0x3195fb24 <syscall+40>:        cfldrdeq        mvd15, [r12], #992
0x3195fb28 <syscall+44>:        bx      r12
0x3195fb2c <syscall+48>:        bx      lr
End of assembler dump. 
```

1.  有人可以解释一下偏移量 +28,+32 的指令在做什么吗？在 +28 时，r12 的值为 0（设置为 +12），因此看起来 r12 被设置为（在 C 表示法中）*(pc + 4)。在 +32 时，r12 设置为 *(pc + r12) - 请注意，该指令未编译 - 请参见下面的 #3。+36 处的 'b' 跳转到 +44，返回到 r12 中的地址。那么 +28 和 +32 将什么值加载到 r12 中？

2.  +40 处的 cfldrdeq 指令有什么作用？我检查了 ARM 指令集并进行了搜索，但没有找到任何东西。

3.  **我使用asm** ()将此代码添加到我的 C 程序中。编译时，编译器会显示这些错误。知道如何解决这个问题吗？
    /var/folders/62/3px_xsd56ml5gz18lp8dptjc0000gv/T//ccDThXFx.s:7607: 不能将寄存器索引用于 PC 相对寻址 -- `ldr r12,[pc,r12]' /var/folders/62/3px_xsd56ml5gz18lp8dptjc0000gv/T//ccDThXFx.s:7609:selected processor does not support`cfldrdeq mvd15,[r12],#992'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:03:12.807

如果您了解有关读取 PC 的小问题，那就更有意义了：*大多数读取**PC*的指令都会看到 address_of_current_instruction+8 的值（拇指模式下的 +4 除外，而`ldm`在 ARM 模式下可能是 +8 或 +12 IIRC） .

`cfldrdeq mvd15, [r12], #992`并不意味着是一个指令；这是一个相对重定位，指向重定位 DATA 部分。在 DATA 部分中，将有一个指向实际地址的动态重定位。典型的 seudocode 看起来像这样

```
 ldr r12,[pc,#small_offset_to_foo]
  ldr r12,[pc,r12]
  bx r12

  ... a short distance away ...

foo:
  int relative_offset_of_bar_from_the_second_ldr
  ... a galaxy far far away ...

bar:
  int pointer_to_the_actual_syscall 
```

我不知道为什么在and`syscall()`之间的地方“foo”的反汇编，导致分支超过非指令“foo”。`ldr r12,[pc,r12]``bx r12`

还值得一提的是，简单地粘贴显示的代码*几乎肯定行不通*：您没有指向系统调用*实际*实现的重定位（在调试器中，一步过去`bx r12`，您应该到达那里）；你只会分支到一些随机的地址。

错误“不能使用 PC 相对寻址的寄存器索引”显然是因为您在 Thumb 模式下编译（列表是 ARM 代码）。至于`cfldrdeq`，我相信它只是一个条件`cfldrd`指令（“eq”是一个条件代码），谷歌建议它与 Cirrus Logic“Maverick”处理器系列有关。

# javascript - 使用 Javascript 在网页上旋转图像不起作用

> ID：12791296
> 
> 赞同：1
> 
> 时间：2012-10-09T00:29:41.357
> 
> 标签：javascript, html, rotation, mouse

我正在尝试为网站制作一张随鼠标位置旋转的图像，但我无法让它工作，我希望有人能向我解释原因。这是我的脚本：

```
<body background="images/x.jpg">

<div id="container">
<div id="html1" style="position:absolute; overflow:hidden; left:480px; top:180px;     width:500px; height:500px; z-index:0">
<div class="content">
<img class="Circ" src="images/img.png" style="-webkit-transform: rotate(180deg); -moz-transform: rotate(180deg);">
<script type="text/javascript">
var img = $('.Circ');
if(img.length > 0){
var offset = img.offset();
function mouse(evt){
    var center_x = (offset.left) + (img.width()/2);
    var center_y = (offset.top) + (img.height()/2);
    var mouse_x = evt.pageX; var mouse_y = evt.pageY;
    var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
    var degree = (radians * (180 / Math.PI) * -1) + 90;
    img.css('-moz-transform', 'rotate('+degree+'deg)');
    img.css('-webkit-transform', 'rotate('+degree+'deg)');
    img.css('-o-transform', 'rotate('+degree+'deg)');
    img.css('-ms-transform', 'rotate('+degree+'deg)');
}
$(document).mousemove(mouse);
}
</script>
</div></div>

</div></body>
</html> 
```

脚本来自： http: [//metatroid.com/articles](http://metatroid.com/articles)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:04:48.533

```
<body background="images/x.jpg">
<script type="text/javascript" src="jquery.js?1320880975"></script>
<div id="container">
<div id="html1" style="position:absolute; overflow:hidden; left:480px; top:180px;     width:500px; height:500px; z-index:0">
<div class="content">
<img class="image" src="img1.jpg" style="-webkit-transform: rotate(180deg); -moz-transform: rotate(180deg);">
<script type="text/javascript">
    var img = $('.image');
    if(img.length > 0){
    var offset = img.offset();
    function mouse(evt){
        var center_x = (offset.left) + (img.width()/2);
        var center_y = (offset.top) + (img.height()/2);
        var mouse_x = evt.pageX; var mouse_y = evt.pageY;
        var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
        var degree = (radians * (180 / Math.PI) * -1) + 90; 
        img.css('-moz-transform', 'rotate('+degree+'deg)');
        img.css('-webkit-transform', 'rotate('+degree+'deg)');
        img.css('-o-transform', 'rotate('+degree+'deg)');
        img.css('-ms-transform', 'rotate('+degree+'deg)');
    }
    $(document).mousemove(mouse);
    }
</script>
</div></div>

</div></body>
</html> 
```

尝试这个

# titanium - 钛：向滚动视图添加内容

> ID：12791303
> 
> 赞同：1
> 
> 时间：2012-10-09T00:30:03.450
> 
> 标签：titanium

所以我有这个代码：

```
var answerView = Ti.UI.createScrollView({ //var added
    top: Ti.Platform.displayCaps.platformHeight*0.55,
    left:Ti.Platform.displayCaps.platformWidth*0.1,
width: Ti.Platform.displayCaps.platformWidth*0.8,
backgroundImage: '/images/labelBackground.png',
borderRadius: 8,
height: Ti.Platform.displayCaps.platformHeight*0.5,
contentHeight:'auto',
    showHorizontalScrollIndicator:true,
    scrollType:'vertical',
});
for (var j = 0; j < question.answers.length; j++){
    var row = createRow(question.answers[j]);
answerView.add(row);
} 
```

这个功能：

```
function createRow(answer) {
var row = Ti.UI.createView({
    width:'100%', 
    height: 'auto',
});
var answerButton = Ti.UI.createButton({
    top: '1%',
    left: '1%',
    title: answer.answer,
    value: answer.order,
    width:'98%',
    font : {fontSize:'12sp'},
});
row.add(answerButton);
return row;
} 
```

问题是，该死的东西将所有按钮叠加成一个......也就是说，它不是“向下推”行。从这里的钛教程：

[http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.ScrollView](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.ScrollView)

我原以为这会起作用，但事实并非如此。我知道我可以用数字做一些魔术，并将每一行发送到它应该有的位置，但我想也许钛会足够聪明来做到这一点？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:17:44.557

哦，耶稣。

在这种情况下，钛是愚蠢的 - 问题是我有

height: 'auto' 在每一行的定义中 - 即：

```
function createRow(answer) {
    var row = Ti.UI.createView({
        width:'100%', 
        height: 'auto',
    });
... 
```

有趣的是，这使得每一行都非常大，可能与分配给该行的整个空间一样大。我不知道，我从来没有尝试过滚动它。因此，只需将行的高度值更改为正常的值 - 我总是将我的高度设置为显示高度。

我现在有

```
function createRow(answer) {
    var row = Ti.UI.createView({
        width:'100%', 
        height: Ti.Platform.displayCaps.platformHeight*0.1,
    });
... 
```

一切都很好。

# javascript - 如果不存在，如何在 jquery 中附加 div 元素

> ID：12791304
> 
> 赞同：0
> 
> 时间：2012-10-09T00:30:17.273
> 
> 标签：javascript, jquery, ajax

我在表格底部的 div 框中添加了我当前列表的表单。当有人单击添加按钮时，我正在附加 div 框。

但是当我多次单击添加按钮时，会附加许多 div 框。

有没有什么方法可以让无论我点击多少次按钮，只有一个实例会附加到 div 框。

这是我的代码

```
$var = $(this).parent().parent();
$var.append($('.jq_div')[0].outerHTML); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T00:32:12.640

使用 . 附加您的听众`.one()`。

```
$("button").one('click', function(){
  // Your code
}); 
```

阅读更多：[http ://api.jquery.com/one](http://api.jquery.com/one)

这是假设您使用的是 jQuery 1.7+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:33:04.043

一个简单的解决方案是拥有一个布尔标志，一旦单击按钮，您就可以切换该标志。此外，实际上有一个 jQuery 函数可以提供这种精确的功能。

它叫做`one()`——

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

所以你的代码看起来像这样 -

```
$("#someTrigger").one('click', function(){
  $var = $(this).parent().parent();
  $var.append($('.jq_div')[0].outerHTML);
}); 
```

布尔方法也很简单——

```
var wasClicked = false;

$("#someTrigger").on('click', function(){
  if (wasClicked == false){
    // append your form
    wasClicked = true;
  }
}); 
```

参考 -

*   [`one()`](http://api.jquery.com/one/)

# algorithm - 证明 f(n) + g(n) 是 O(max(f(n),g(n)))

> ID：12791306
> 
> 赞同：10
> 
> 时间：2012-10-09T00:30:30.770
> 
> 标签：algorithm, big-o, analysis, notation

您好，我在证明以下内容时遇到了一些困难。

```
f(n) + g(n) is O(max(f(n),g(n))) 
```

这是合乎逻辑的，通过查看这个我可以告诉你它是正确的，但我无法提出一个证明。

这是我到目前为止所拥有的：

```
c * (max(f(n),g(n))) > f(n) + g(n) for n > N 
```

但是我不确定如何选择 ac 和 N 来适应定义，因为我不知道 f(n) 和 g(n) 是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T00:34:04.743

```
f(n) + g(n) <= 2* max{f(n),g(n)} 
(for each n>0, assume f(n),g(n) are none-negative functions) 
```

因此，对于`N=1`，对于所有`n>N`: ，我们可以根据大 O的`f(n) + g(n) <= 2*max{f(n),g(n)}`定义说`f(n) + g(n)``O(max{f(n),g(n)})`

所以基本上，我们使用`N=1, c=2`定义的形式证明。

# python - EasyGUI-整数框输出

> ID：12791307
> 
> 赞同：3
> 
> 时间：2012-10-09T00:30:31.050
> 
> 标签：python, easygui

我刚开始学习 Python，在搞砸并创建了一个我想使用的程序之后，我想为它创建一个 GUI。我不知道如何开始使用它，所以我只是查找它并找到[`EasyGUI`](http://easygui.sourceforge.net).

我有它的工作和一切，但我如何将答案记录到一个变量中？

```
import easygui as eg
n=0
eg.integerbox(msg="What is the max integer in the Sequence, n?"
              , title="blah blah blah"
              , default=0
              , lowerbound=0) 
```

我想将问题的答案设置`What is the max integer in the Sequence, n?`为变量（在本例中为`n`）。

喜欢`n=output`什么，但没有“输出”语法。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:24:19.323

不是easygui方面的专家，但我会给它一个刺。

您是否尝试过类似的方法：

```
import easygui as eg
uservalue = eg.integerbox(msg="What is the max integer in the sequence, n?"
                  , title = "blah blah blah"
                  , default = 0
                  , lowerbound = 0 
```

easygui 文档为选择框提供了一个类似的示例：

```
msg ="What is your favorite flavor?"
title = "Ice Cream Survey"
choices = ["Vanilla", "Chocolate", "Strawberry", "Rocky Road"]
choice = choicebox(msg, title, choices) 
```

# javascript - 正确访问 a 中的图像

> ID：12791309
> 
> 赞同：1
> 
> 时间：2012-10-09T00:30:45.113
> 
> 标签：javascript, html

我目前有：

```
<div id="thumbImages">
        <ul>
            <li><img src="thumbimages/test1.jpg" alt="thumb1" width="125" height="100" /></li>
            <li><img src="thumbimages/test2.jpg" alt="thumb2" width="125" height="100" /></li>
            <li><img src="thumbimages/test3.jpg" alt="thumb3" width="125" height="100" /></li>
            <li><img src="thumbimages/test4.jpg" alt="thumb4" width="125" height="100" /></li>
        </ul>
    </div> 
```

在我的 HTML

我正在尝试使用此 javascript 向缩略图添加类似按钮的功能

```
var isMousedOver = [
false,
false,
false,
false
];

function init()
{
   DoStuffWithThumbs();
}

this.onload = init();

function DoStuffWithThumbs()
{
   var thumbs = document.getElementById("thumbImages");
   var itemsUL = thumbs.getElementsByTagName("ul");
   var itemsLI = itemsUL.item(0).getElementsByTagName("li");
   for (var i = 0; i < itemsLI.length; ++i)
   { 
      var curThumb = itemsLI[i];
      curThumb.onclick = DoStuff(i);
      curThumb.onmouseover = MouseOver(i);
      curThumb.onmouseout = MouseOut(i);
   }
}

function MouseOver(val)
{
   isMousedOver[val] = true;
}

function MouseOut(val)
{
   isMousedOver[val] = false;
}

function DoStuff(val)
{
   if(isMousedOver[val] == true)
   {
       //stuff is done here ( I know the stuff in question is working)
   }
} 
```

但是，当我单独测试结果本身时，目前我在页面上根本没有得到任何可见的响应（只需翻转图像并根据另一个数组更改页面上的一些文本）。这让我相信我错误地访问了这些元素。我是使用 Javascript 和 html 的新手，如果我犯了一些严重错误，请原谅我。我是否正确访问了我的元素？还是这完全是访问它们/使用onmouseover/onmouseout的错误方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:35:09.453

您正在调用函数而不是将它们分配为处理程序。所以你需要先解决这个问题。要根据您当前的方法修复它，您调用的每个函数都需要*返回*一个引用当前`i`值的函数。

但是，与其在 Array 中跟踪鼠标悬停状态，不如通过添加属性在 DOM 元素本身上跟踪它会更简单。

```
function DoStuffWithThumbs() {
   var thumbs = document.getElementById("thumbImages"),
       itemsUL = thumbs.getElementsByTagName("ul"),
       itemsLI = itemsUL.item(0).getElementsByTagName("li");

   for (var i = 0; i < itemsLI.length; ++i) { 
      itemsLI[i].onclick = DoStuff;
      itemsLI[i].onmouseover = MouseOver;
      itemsLI[i].onmouseout = MouseOut;
   }
}

function MouseOver(val) {
   this._over = true;
}

function MouseOut(val) {
   this._over = false;
}

function DoStuff(val) {
   if(this._over === true) {
       // do your stuff
   }
} 
```

# jquery - jQuery - 显示/隐藏 - 检查是否已经设置

> ID：12791311
> 
> 赞同：2
> 
> 时间：2012-10-09T00:30:55.693
> 
> 标签：jquery, micro-optimization

> **可能重复：**
> [Jquery 性能：hide() vs is(':visible') - 哪个更快？](https://stackoverflow.com/questions/12312047/jquery-performance-hide-vs-isvisible-which-is-faster)

在调用 jQuery.hide() 函数之前检查元素是否已经隐藏是否有意义？（*并与 jQuery.show() 类比*）

阅读函数源代码，在我看来，不管元素属性如何，它都会运行。检查或让函数集属性结束是否需要更多*时间*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:58:13.797

这类问题最好通过实际的性能测试来回答，而 jsperf 系统使测试变得非常容易。

令我惊讶的是，如果已经设置了所需的样式，那么在设置之前先检查一下似乎确实可以节省一些性能周期（在 Chrome 和 Firefox 中）。

您可以在这里看到许多不同的组合：http: [//jsperf.com/hide-vs-check](http://jsperf.com/hide-vs-check)

作为这两个选项之间最简单的比较：

```
elem.style.display = "none";
elem.style.display = "none"; 
```

和

```
elem.style.display = "none";
if (elem.style.display !== "none") {
    elem.style.display = "none";
} 
```

第二个选项稍微快一点。这表明设置样式，即使它已经设置为该值仍然需要大量成本，并且确实可以节省时间以避免在不需要时设置它。

* * *

或者两个选项的 jQuery 版本：

```
elem.style.display = "none";
elem$.hide() 
```

和

```
elem.style.display = "none";
if (elem$.css("display") !== "none") {
    elem$.hide();
} 
```

仍然表明，当已设置所需状态时，第二个选项更快。

* * *

但是，如果需要更改状态，那么额外的测试（显然）会减慢您的速度。这里的第一个选项比第二个选项快，因为如果条件评估为真，则条件只会花费额外的时间：

```
elem.style.display = "block";
elem$.hide() 
```

和

```
elem.style.display = "block";
if (elem$.css("display") !== "none") {
    elem$.hide();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:38:53.760

检查属性更耗时。首先 jQuery 必须找到元素，然后检查以下所有内容：

*   它们的 CSS 显示值为`none`.
*   它们是带有`type="hidden"`.
*   它们的宽度和高度明确设置为 0。
*   祖先元素是隐藏的，因此该元素不会显示在页面上。

在另一种情况下，设置属性只需 2 个步骤 - 找到元素并分配（或覆盖）属性。

# html - div之间的动态空间

> ID：12791314
> 
> 赞同：2
> 
> 时间：2012-10-09T00:31:17.840
> 
> 标签：html, css

所以我得到了一个 Div，它的宽度设置为 100% 宽度，这意味着它可以是各种尺寸。那个 div 的值是“min-width:950px”，所以它的宽度大小不能低于 950。

在那个div里面我有2行，每行包含4个div-具有特定的宽度值

现在发生的情况是，当低分辨率的人进入我的网站时，他可以看到 4 个 div 很好地组合在一起：

![在此处输入图像描述](../Images/bcf0e53c38dcb0c18ad3e0a4dc82528e.png)

但是当有高清晰度的人进入我的网站时，它是这样的：

![在此处输入图像描述](../Images/b3d5e568e256cdbce7f57f6ac92d588c.png)

我想要做的是，当高分辨率的人进入我的网站时，4 个 div 将彼此占用相同的空间，所以它看起来像这样：

![在此处输入图像描述](../Images/cccb260789c028b6612934172cdcbf9e.png)

我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:44:02.100

## CSS 样式

```
#container {
  text-align: justify;
  min-width: 950px;
  border: solid 1px Black; // Change this
}

#container div {
  width: 100px; //Change this
  display: inline-block;
  background: red; // Change this
}

#container:after {
  width: 100%;
  display: inline-block;
} 
```

## HTML 元素

```
<div id="container">
  <div></div>
  <div></div>
  <div></div>
  <div></div>
</div> 
```

Codepen（沙盒）：[http ://codepen.io/anon/pen/HdtiC](http://codepen.io/anon/pen/HdtiC)

原文：http: [//css-tricks.com/equidistant-objects-with-css/](http://css-tricks.com/equidistant-objects-with-css/)

# eclipse - Eclipse“粘贴”命令损坏

> ID：12791318
> 
> 赞同：0
> 
> 时间：2012-10-09T00:31:35.183
> 
> 标签：eclipse, keyboard-shortcuts

我在 OS X 10.8.2 和 Eclipse Juno 上；复制/粘贴/剪切突然坏了。Eclipse 内部没有响应。

也许是一个流氓插件（？），但这没关系，我可以重置这些值吗？

我应该将哪个组合绑定到`COMMAND`+{C,V,X}？

*   在“编辑文本”中从剪贴板粘贴
*   从“对话框和窗口”中的剪贴板粘贴
*   从“Windows”中的剪贴板粘贴
*   其他？

如果您知道如何在首选项文件中执行此操作，则更好，我使用`keyConfigurationId="org.eclipse.ui.defaultAcceleratorConfiguration"`但我不知道如何为以下`keyBinding`规则选择这些参数
`org.eclipse.ui.workbench/org.eclipse.ui.commands`：

*   上下文 ID
*   命令 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:49:12.610

在我的安装中，这些命令设置为“对话框和窗口”。在选择这些命令之一后，您还应该能够通过点击“恢复命令”按钮来自动获得它。或者在非常困难的情况下，使用右下角的“恢复默认值”来重新创建所有键绑定。

如果您使用 Android 开发工具，请升级到最新版本，因为在 ADT 20.0.2 中修复了许多 Eclipse Juno 用户出现的[复制粘贴问题。](http://code.google.com/p/android/issues/detail?id=34630)

话虽如此，您确实应该升级到 SR1，因为这是一个错误修复版本，没有功能版本。所以很有可能它解决的问题比它引入的问题多。

# java - HttpURLConnection 的身份验证器适用于 Froyo，但不适用于 IceCreamSandwich

> ID：12791320
> 
> 赞同：0
> 
> 时间：2012-10-09T00:31:54.467
> 
> 标签：java, android, http, android-4.0-ice-cream-sandwich

我在可运行文件中有这段代码，在 Froyo 上一切正常。但是在 ICS 上它说它确实连接但给了我一个找不到文件的错误并返回 -1 作为文件大小。

具有不需要身份验证的文件的 ICS 在 ICS 上没有问题。

在 ICS 上是否有不同的身份验证方式？还是我错过了一些 ICS HttpURLConnection 细节？

```
Authenticator.setDefault(new Authenticator() {
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(user,pass);
                    }
                });
URL url = new URL(URLString);

HttpURLConnection c = (HttpURLConnection) url.openConnection();
c.setRequestMethod("GET");
c.setDoOutput(true);
c.connect();//connection says that it is connected
final int filesize = c.getContentLength();//file size is -1 when using ICS
c.disconnect(); 
```

另外，我在对 Froyo 上的 https url 进行身份验证时遇到问题，不过，这是目前的次要问题。

如果可以的话，谢谢你的帮助..

我已经离开了一段时间，但这就是我现在正在使用的。它确实适用于 ICS，我目前没有使用 Froyo 进行测试，所以不能确定它是否适用于两者......

```
 private void setAuthenticationCredentials(final String username, final String password) {
            Authenticator.setDefault(new Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(username, password
                            .toCharArray()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T21:52:32.783

我一直在使用`HttpURLConnection.setRequestProperty()`这样的方式验证我的请求：

```
String unencoded = username + ":" + password;
String encoded = Base64.encodeToString(unencoded.getBytes(), Base64.DEFAULT);
Log.d(getClass().getName(), "encoded: " + encoded);
// Attach as authentication header.
connection.setRequestProperty("Authorization", "Basic " + encoded); 
```

然而，这似乎有相反的问题。它适用于 3.0 及更高版本，但不适用于 2.3.4 及更低版本（服务器显然发送 400，尽管请求不在服务器日志中）。请告诉我您是否可以正常工作/是否已经正常工作，因为我将不胜感激。

# html - Crystal Reports 2008 支持哪些 HTML 标记

> ID：12791321
> 
> 赞同：10
> 
> 时间：2012-10-09T00:31:58.873
> 
> 标签：html, crystal-reports, crystal-reports-2008

我知道通过右键单击 Crystal Reports 中的某些文本字段，您可以告诉 Crystal 将该报表呈现为`HTML`（请参见下面的屏幕截图）。我想知道这些字段中可用的可能标签是什么以及有哪些 CSS/样式功能。谢谢！

![右键单击文本字段](../Images/f5775e3a6b2478393c35be046b3b3469.png)

右键单击一个字段并选择“格式化字段”

![文本解释](../Images/b22d2f5ae9355aae99d591a52303766b.png)

单击段落标记和文本解释组合框。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T00:31:58.873

我在[一个论坛帖子](http://forums.asp.net/t/1209306.aspx)中找到了这个。不确定它的有效性，但它似乎是合法的。

Crystal Reports 似乎只支持一小部分 HTML 标记和属性。

**支持的标签有：**

*   `html`
*   `body`
*   `div`（导致段落中断）
*   `tr`（仅导致段落中断；不保留表格的列结构）
*   `span`
*   `font`
*   `p`（导致段落中断）
*   `br`（导致段落中断）
*   `h1`（导致段落中断，使字体加粗和两倍默认大小）
*   `h2`（导致段落中断，使字体粗体和默认大小的 1.5 倍）
*   `h3`（导致段落中断，使字体粗体和 9/8 默认大小）
*   `h4`（导致段落中断，使字体变粗）
*   `h5`（导致段落中断，使字体粗体和 5/6 默认大小）
*   `h6`（导致段落中断，使字体粗体和 5/8 默认大小）
*   `center`
*   `big`（将字体大小增加 2 磅）
*   `small`（如果字体大小为 8 点或更大，则将字体大小减小 2 点）
*   `b`
*   `i`
*   `s`
*   `strike`
*   `u`

**支持的属性是：**

*   `align`
*   `face`
*   `size`
*   `color`
*   `style`
*   `font-family`
*   `font-size`
*   `font-style`
*   `font-weight`

不确定CSS。我很确定你不能做任何超出你在这里看到的样式。

# android - 如何在一个页面上禁用 Android 后退按钮并在所有其他页面上更改为退出按钮

> ID：12791324
> 
> 赞同：15
> 
> 时间：2012-10-09T00:32:11.283
> 
> 标签：android, cordova, jquery-mobile, back-button-control

我正在使用与我的 Drupal 站点交互的 Phonegap 开发一个 Android 应用程序。我重新分配了 Android 的“返回”按钮来提示用户从 Drupal 服务器注销，但是，我只想在登录页面上禁用它（原因很明显）。我可以让它工作，但只有在用户注销之前，一旦在登录页面上，该按钮仍然被重新分配为注销按钮。这是我到目前为止的代码：

```
 <head>
         <script>
        /* Wait until device is ready to re-assign Back button */
        document.addEventListener("deviceready", onDeviceReady, false);
        function onDeviceReady() {
            document.addEventListener("backbutton", onBackKeyPress, false);
        }
        function onBackKeyPress() {
            /* If the current page is the login page, disable the button completely (aka do nothing) */
            if ($.mobile.activePage.attr('id') == 'login_page') {
            }

            /* Else, execute log off code */
            else {
                if (confirm("Are you sure you want to logout?")) {
                    /* Here is where my AJAX code for logging off goes */
                }
                else {
                    return false;
                }
            }
        }
        </script>
</head> 
```

问题是后退按钮没有被重新分配。当用户注销并最终回到登录页面时，我无法找到重新运行上述代码的方法。

如果有人愿意为此提供解决方案，我将不胜感激！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-27T12:29:07.920

**deviceready**很重要。如果不使用，有时您会阻止返回按钮，有时则不会。通常在调试中它可以工作，在生产中没有。

```
document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
        document.addEventListener("backbutton", function (e) {
            e.preventDefault();
        }, false );
} 
```

编辑 2013-11-03 常见错误是在桌面上执行开发并且排除了cordova脚本。然后忘记包含移动版本的科尔多瓦脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T15:56:27.080

尝试这个：

```
document.addEventListener("backbutton", function(e){
    if($.mobile.activePage.is('#login_page')){
        e.preventDefault();
    }
    else {
        if (confirm("Are you sure you want to logout?")) {
            /* Here is where my AJAX code for logging off goes */
        }
        else {
            return false;
        }
    }
}, false); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-13T12:45:48.813

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    document.addEventListener("backbutton", function (e) {
        e.preventDefault();
    }, false );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T14:24:15.630

您必须在设备就绪时覆盖后退按钮操作......这是一个完整的工作示例“index.html”

```
<!DOCTYPE html>
<html>
  <head>
    <title>Back Button</title>
    <link rel="stylesheet" type="tex`enter code here`t/css" href="style.css">
    <script>
        function getTitle() {
            document.getElementById("ct").innerHTML = "DEMO: " + document.title;
        }
    </script>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">
    // Wait for device API libraries to load
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
        getTitle();
    }
    // device APIs are available
    //
    function onDeviceReady() {
        // Register the event listener
        document.addEventListener("backbutton", onBackKeyDown, false);
    }
    // Handle the back button
    //
    function onBackKeyDown() {
        alert('Backbutton key pressed');
        console.log('Backbutton key pressed');
    }
    </script>
  </head>
  <body onload="onLoad()">
  <ul id="nav">
        <li><a href="index.html">&larr; Back</a></li>
        <li><a href="#" id="ct" onclick="location.reload();"></a></li>
    </ul>
  </body>
</html> 
```

我使用了这段代码，后退按钮终于被覆盖了......

参考-> [https://github.com/amirudin/PhoneGapPluginDemo/blob/master/www/evt-backbutton.html](https://github.com/amirudin/PhoneGapPluginDemo/blob/master/www/evt-backbutton.html)

# facebook - 来自 Facebook 图形 api 的 OAuthException 调用使用数字的有效关键字

> ID：12791325
> 
> 赞同：1
> 
> 时间：2012-10-09T00:32:16.043
> 
> 标签：facebook, facebook-graph-api

我正在`OAUthException`使用以下链接拨打电话。它似乎只发生在keyword_list 有数字的情况下，它不会发生在所有数字上，如果keyword_list=1000，相同的链接有效。（在下面的链接中，我没有提供 access_token，但我使用了正确的 access_token）

[https://graph.facebook.com/search?keyword_list=1770&type=adkeywordvalid&access_token=](https://graph.facebook.com/search?keyword_list=1770&type=adkeywordvalid&access_token=)

```
{
   "error": {
      "message": "An unknown error has occurred.",
      "type": "OAuthException",
      "code": 1
   }
} 
```

# java - AES-128 加密不适用于 Java < 1.7

> ID：12791339
> 
> 赞同：3
> 
> 时间：2012-10-09T00:34:46.650
> 
> 标签：java, cryptography, aes

我已经在学校作业上拼凑了 3 天，今天终于完成了，没有错误并且工作正常！除了，我在 Java 1.7 上测试它，而学校服务器（教授将在其中编译它）运行 1.6。所以，我在 1.6 上测试了我的代码，想要覆盖我所有的基础，我`BadPaddingException`在解密时得到了一个。

[编辑]**警告：此代码不遵循常见的安全实践，不应在生产代码中使用。**

最初，我有这个，它在 1.7 上运行良好（对不起，很多代码......所有相关......）：

```
public static String aes128(String key, String data, final int direction) {
    SecureRandom rand = new SecureRandom(key.getBytes());
    byte[] randBytes = new byte[16];
    rand.nextBytes(randBytes);
    SecretKey encKey = new SecretKeySpec(randBytes, "AES");

    Cipher cipher = null;
    try {
        cipher = Cipher.getInstance("AES");
        cipher.init((direction == ENCRYPT ? Cipher.ENCRYPT_MODE : Cipher.DECRYPT_MODE), encKey);
    } catch (InvalidKeyException e) {
        return null;
    } catch (NoSuchPaddingException e) {
        return null;
    } catch (NoSuchAlgorithmException e) {
        return null;
    }

    try {
        if (direction == ENCRYPT) {
            byte[] encVal = cipher.doFinal(data.getBytes());
            String encryptedValue = Base64.encode(encVal);
            return encryptedValue;
        } else {
            byte[] dataBytes = Base64.decode(data);
            byte[] encVal = cipher.doFinal(dataBytes);
            return new String(encVal);
        }
    } catch (NullPointerException e) {
        return null;
    } catch (BadPaddingException e) {
        return null;
    } catch (IllegalBlockSizeException e) {
        return null;
    }
} 
```

但是，我的`BadPaddingException` `catch`块在解密时执行：

```
javax.crypto.BadPaddingException: Given final block not properly padded
        at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
        at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
        at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
        at javax.crypto.Cipher.doFinal(DashoA13*..)
        at CipherUtils.aes128(CipherUtils.java:112)
        at CipherUtils.decryptFile(CipherUtils.java:44)
        at decryptFile.main(decryptFile.java:21) 
```

这就是我试图解决的问题（基本上，我自己添加了所有的填充/取消填充，并使用了`NoPadding`）：

```
public static String aes128(String key, String data, final int direction) {
    // PADCHAR = (char)0x10 as String
    while (key.length() % 16 > 0)
        key = key + PADCHAR; // Added this loop

    SecureRandom rand = new SecureRandom(key.getBytes());
    byte[] randBytes = new byte[16];
    rand.nextBytes(randBytes);
    SecretKey encKey = new SecretKeySpec(randBytes, "AES");
    AlgorithmParameterSpec paramSpec = new IvParameterSpec(key.getBytes()); // Created this

    Cipher cipher = null;
    try {
        cipher = Cipher.getInstance("AES/CBC/NoPadding"); // Added CBC/NoPadding
        cipher.init((direction == ENCRYPT ? Cipher.ENCRYPT_MODE : Cipher.DECRYPT_MODE), encKey, paramSpec); // Added paramSpec
    } catch (InvalidKeyException e) {
        return null;
    } catch (NoSuchPaddingException e) {
        return null;
    } catch (NoSuchAlgorithmException e) {
        return null;
    } catch (InvalidAlgorithmParameterException e) {
        return null; // Added this catch{}
    }

    try {
        if (direction == ENCRYPT) {
            while (data.length() % 16 > 0)
                data = data + PADCHAR; // Added this loop

            byte[] encVal = cipher.doFinal(data.getBytes());
            String encryptedValue = Base64.encode(encVal);
            return encryptedValue;
        } else {
            byte[] dataBytes = Base64.decode(data);
            byte[] encVal = cipher.doFinal(dataBytes);
            return new String(encVal);
        }
    } catch (NullPointerException e) {
        return null;
    } catch (BadPaddingException e) {
        return null;
    } catch (IllegalBlockSizeException e) {
        return null;
    }
} 
```

使用它时，我只会进进出出胡言乱语：

```
Out: u¢;èÉ÷JRLòB±J°N°[9cRÐ{ªv=]I¯¿©:
´RLA©êí;R([¶Ü9¸ßv&%®µ^#û|Bá (80)
Unpadded: u¢;èÉ÷JRLòB±J°N°[9cRÐ{ªv=]I¯¿©:
´RLA©êí;R([¶Ü9¸ßv&%®µ^#û|Bá (79) 
```

还值得注意的是，1.6 和 1.7 产生不同的加密字符串。

例如，在 1.7 上，使用密钥加密`xy`（包括`SHA-1`哈希）`hi`会产生：

```
XLUVZBIJv1n/FV2MzaBK3FLPQRCQF2FY+ghyajdqCGsggAN4aac8bfwscrLaQT7BMHJgfnjJLn+/rwGv0UEW+dbRIMQkNAwkGeSjda3aEpk= 
```

在 1.6 上，同样的事情会产生：

```
nqeahRnA0IuRn7HXUD1JnkhWB5uq/Ng+srUBYE3ycGHDC1QB6Xo7cPU6aEJxH7NKqe3kRN3rT/Ctl/OrhqVkyDDThbkY8LLP39ocC3oP/JE= 
```

没想到作业要花这么长时间，所以我的时间已经用完了，确实需要今晚完成。但是，如果到那时还没有答案，我会就此给我的老师留个便条。这似乎是在 1.7 中修复的一些问题......尽管希望可以通过我的代码中的正确添加/修复来解决。

非常感谢大家的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:37:53.680

首先：

**对于几乎所有系统，两次加密相同的明文应该*总是*（即以非常高的概率）产生不同的密文。**

传统的例子是它允许 CPA 对手仅用两个查询来区分 E（“黎明攻击”）和 E（“黄昏攻击”）。（有一些系统需要确定性加密，但正确的方法是“合成 IV”或 CMC 和 EME 等密码模式。）

最终，问题在于它`SecureRandom()`不适合密钥派生。

*   如果输入的“密钥”是密码，您应该使用类似 PBKDF2（或`scrypt()`或`bcrypt()`）的东西。
    *   此外，您应该使用显式字符集，例如`String.getBytes("UTF-8")`.
*   如果输入的“key”是一个键，最常见的字符串表示是一个 hexdump。Java 不包含 unhexing 函数，但这里有[几个](https://stackoverflow.com/questions/140131)。
    *   如果输入是“主密钥”并且您想要派生子密钥，那么您应该将其*与其他数据*进行散列。如果子键始终相同，则没有多大意义。

额外的挑剔：

*   您的代码容易受到填充预言机攻击；您确实应该在对数据进行任何操作之前验证 MAC（或者更好的是，使用经过身份验证的加密模式）。
*   在您的第二个清单中，您*明确地*重用了 IV。坏的！假设 CBC 模式，使用的 IV 应该是不可预测的；`SecureRandom`在这里很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T01:06:20.073

我一直在看一遍又一遍，我必须同意 NullUserException。问题是使用`SecureRandom`. 这意味着您永远不会真正知道您的密钥是什么，因此它不一定是相同的密钥。

> encKey 来自 SecureRandom，它由提供的密钥播种。因此，如果密钥相同，则种子相同，所以随机数应该相同......

...当然，除非 Oracle（或其他提供商）更改版本之间的实现。

好的，添加更多我研究的信息。我认为[这个答案是最有帮助](https://stackoverflow.com/a/373805/122207)的。

> 从用户那里获取密码和明文，并将它们转换为字节数组。
> 生成一个安全的随机盐。
> 将盐附加到密码并计算其加密哈希。重复多次。
> 使用生成的哈希作为初始化向量和/或密钥来加密明文。
> 保存盐和生成的密文。

对我来说，这听起来像是`SecureRandom`一次用于生成 a`salt`但`salt`必须与密码文本一起保存才能撤消密码过程。额外的安全性来自步骤的重复和变化（模糊性）。

**注意：**我无法就这些步骤是最佳实践达成共识。

# php - 减少whois查询负担的策略

> ID：12791340
> 
> 赞同：7
> 
> 时间：2012-10-09T00:34:54.993
> 
> 标签：php, javascript, whois

在最近的 100 级 CompSci 课程中，我一直在处理字符串操作。我有一个非常“原始”的想法，我可以编写一个简单的域名生成器/检查器。

所以我做了一些功课，发现各种 whois 服务器可以理解地限制了允许的查询数量。

所以，我决定首先检查一个 DNS 布尔值。如果没有找到记录，我会检查 MySQL 数据库以确保最近没有发送相同的查询。如果还没有，我使用 fsockopen 使用 PHP 启动 whois 查询。所以，我正准备完成我的小脚本并将其从我的开发服务器上传到我的生产服务器，我发现一些网站建议各种 whois 服务器将查询限制为仅 1,000。

我的问题：

我是否适当地接近这个？简单的数学表明，只有 10 个用户每个签出 10 个搜索，每个搜索仅提供 10 个结果 (10**3) 可能会导致超出限制和临时禁止。

是否有任何方法可以对 whois 服务器进行批量查询？

其他网站是否使用某种形式的客户端 javascript 查询或服务器端代理？我在 stackoverflow 上发现了另一个类似的问题，表明 *NIX 系统可以访问没有限制的终端命令。我发现的其他问题与解析数据有关——这不是我关心的问题。

我明白这是一个模糊的问题。我不想给 whois 服务器造成不适当的负担。我不期望也不想要现成的代码解决方案。一个关于替代程序化策略的基本讨论会让我成为一个非常满意的朋友:) 任何人都有一两个关键字可以让我继续研究吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T06:16:52.797

whois unix 命令的限制似乎*较少*（[https://superuser.com/questions/452751/what-are-the-limits-of-whois-command-on-unix](https://superuser.com/questions/452751/what-are-the-limits-of-whois-command-on-unix)）。做我认为`whois`在幕后做的事情并在端口 43 上打开到 whois.internic.net 的 tcp 连接可能是最简单的。

```
<?php

$fp = fsockopen("whois.internic.net", 43);
fwrite($fp, "hello.com\n");

$response = "";
while (!feof($fp)) {
    $response .= fread($fp, 8192);
}

fclose($fp);
echo $response;

?> 
```

如果这就是您已经在做的事情，那么这可能是您最好的选择。我猜 1,000 个查询限制可能是指使用某人的 Web 服务为您执行此操作（例如 whois.com）。我*认为*如果您按照我上面显示的方式进行操作，您可以进行更多查询。

（我在这里做了很多猜测和假设。）

PS这里有很多好信息：http: [//semmyfun.blogspot.com/2010/08/how-does-whois-work-dirty-guide.html](http://semmyfun.blogspot.com/2010/08/how-does-whois-work-dirty-guide.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T19:37:30.593

即使这已经被标记为已回答（我已经为另一篇文章输入了这个，所以我不妨重用它）:-)

如前所述，如果大多数 whois 权威机构认为您在 24 小时内发出过多请求，他们将限制（甚至阻止）您的流量。

相反，您可能需要考虑登录全球任何 whois 提供商的 ftp 站点并下载数据库的各个部分，所有这些都使这些公共数据可用，并且与 maxmind 等公司用于其 IP 的数据完全相同到地理查询服务，它是所有这些“whois”命令背后的相同数据，每个人都自动化。

我目前使用我自己的一台服务器执行此操作，该服务器使用以下 shell 脚本连接（每 24 小时一次）警告——这将产生近 4 GB 的数据，因此请确保在有足够空间的磁盘上执行此操作.. .:

```
#!/bin/bash
rm -f delegated-afrinic-latest
rm -f delegated-lacnic-latest
rm -f delegated-arin-latest
rm -f delegated-apnic-latest
rm -f delegated-ripencc-latest
rm -f ripe.db.inetnum
rm -f apnic.db.inetnum
rm -f ripe.db.inetnum.gz
rm -f apnic.db.inetnum.gz
wget ftp://ftp.afrinic.net/pub/stats/afrinic/delegated-afrinic-latest
wget ftp://ftp.lacnic.net/pub/stats/lacnic/delegated-lacnic-latest
wget ftp://ftp.arin.net/pub/stats/arin/delegated-arin-latest
wget ftp://ftp.apnic.net/pub/stats/apnic/delegated-apnic-latest
wget ftp://ftp.ripe.net/ripe/stats/delegated-ripencc-latest
wget ftp://ftp.ripe.net/ripe/dbase/split/ripe.db.inetnum.gz
ftp -n -v ftp.apnic.net <<END
user anonymous anonymous@anonymous.org
binary
passive
get /apnic/whois-data/APNIC/split/apnic.db.inetnum.gz apnic.db.inetnum.gz
bye
END
gunzip ripe.db.inetnum
gunzip apnic.db.inetnum 
```

然后，我有一个自定义编写的程序，它将文件解析为自定义数据库结构，然后我的服务器从中进行查询。

由于所有服务器都相互镜像数据，那么您应该能够从一台服务器获取完整的数据集，但如果没有，那么修改上述 shell 脚本以从其他服务器下载数据并不需要太多，他们都回应'ftp.????' 并具有相同的通用文件夹结构。

但是我无法帮助您使用解析器，因为它包含专有代码，但文件格式（尤其是如果您获得拆分文件）与您在典型的 whois 输出中看到的相同，因此非常容易使用。

google-code 上有一个解析器（我从那里得到下载脚本），名为“ip-country”（我认为），它旨在让您构建自己的 whois 数据库，我构建的数据库稍微复杂一些它也与其他数据结合（因此我的解析器是专有的）

通过像这样下载和处理您自己的数据，您可以绕过供应商施加的任何限制，结果是查询您自己的数据存储很可能比每次都从您的服务器向查询服务器发出请求要快得多有人输入 IP 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T05:11:52.710

如果您只对域是否已*注册*感兴趣，而不是对 WHOIS 详细信息感兴趣，那么使用 DNS 服务器而不是 WHOIS 进行检查会更好。

# php - ModX Evo：片段中的 PHP readfile()？

> ID：12791343
> 
> 赞同：0
> 
> 时间：2012-10-09T00:35:13.540
> 
> 标签：php, download, readfile, modx, modx-evolution

我有一个使用 readfile() 下载大文件 (1.3gb) 的脚本。

如果我创建一个仅包含脚本的 .php 页面，它可以正常工作，但如果我将相同的脚本放在 Snippet 中并将其放在页面上，则不会发生任何事情。

ModX 是如何阻止下载的吗？任何建议都会非常感谢！

编辑代码：

```
$file = $_SERVER['DOCUMENT_ROOT']."/movie.mov";
if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:04:16.843

Modx 确实有一个最大文件大小设置 [Maximum upload size upload_maxsize] 但这是针对文件管理器的。我怀疑这是你的问题。

让我们看看脚本和错误日志。

***更新***

刚刚测试了你的小片段[有几个小的改动]~它工作得很好。

```
$base_path = $modx->config['base_path'];

$movie = 'frankenweenie-mrwhiskers_r640s.mov';

$file = $base_path.$movie;

if (file_exists($file)) {

    echo 'file exists '.filesize($file);

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);

    return true;

}else{

    echo 'file does not exist';

    return false;

} 
```

使用 $modx->config['base_path'] 不是你的问题，它也可以使用服务器变量，这只是一个好习惯。就像返回的真/假 modx 期望它的片段返回一些东西，无论是真，假还是 $output ......而且，不是你的问题它没有工作。

开始查看您的 php 设置，我认为内存限制可能是问题所在。检查 php 文档并查看它是否需要有足够的内存来读取该大小的文件。[即使它表明“大小无关紧要”]

在脚本本身中启用错误日志并检查服务器错误日志。

它适用于小文件吗？然后看这里：[PHP readfile() and large downloads](https://stackoverflow.com/questions/2946791/php-readfile-and-large-downloads)

祝你好运！

# c# - 具有不同返回值和参数的方法的委托声明

> ID：12791349
> 
> 赞同：2
> 
> 时间：2012-10-09T00:37:01.013
> 
> 标签：c#, c#-4.0

基于 msdn 页面，当我们声明委托时，我们确实需要指定返回值以及将通过委托调用的方法的参数。

我的问题：

假设我有一个方法：

`public int MethodA(bool bValue)`并且`void MethodB(int iValue)`

我是否需要在这里为每种方法声明两个不同的委托，或者我可以使用一个来完成？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:39:24.833

> 我是否需要在这里为每种方法声明两个不同的委托，或者我可以使用一个来完成？

由于这些方法具有完全不同的签名，因此您需要不同的委托。但是，您可以使用内置[`Func<bool, int>`](http://msdn.microsoft.com/en-us/library/bb549151.aspx)和[`Action<int>`](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)委托，而不是声明您自己的委托类型。

例如，您可以使用：

```
Func<bool,int> delegateA = this.MethodA;

Action<int> delegateB = this.MethodB;
// or:  Action<int> delegateB = new Action<int>(this.MethodB); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:42:08.543

首先声明委托的目的是让您可以在不看到其声明的情况下调用方法。这就是为什么您计划通过委托间接调用的每个函数签名都需要不同的委托类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:53:53.740

您可以使用匿名方法缩短代码，而不是定义单独的方法然后使用委托变量指向它。

```
 class Program{
   delegate void MethodsDelegate(string Message);
   static void Main(string[] args){
   MethodsDelegate method = delegate(string Message){
   Console.WriteLine(Message);
    };
   //---call the delegated method---
 method("Using anonymous method.");
 Console.ReadLine();
  }
} 
```

# php - 带有 xmlreader 的 php - 你如何使 xi:include 工作？

> ID：12791354
> 
> 赞同：0
> 
> 时间：2012-10-09T00:37:18.363
> 
> 标签：php, xml

我将 php 与 xmlreader 一起使用。我正在尝试读取包含包含语句的文件。xmlreader 似乎不知道如何处理包含，只是将其视为“正常”元素。读者现在看起来像这样。

```
if (!$reader->open($file)) {
    die("Failed to open '.xml'");
}
while($reader->read()) {
 echo $reader->nodeType . " " . $reader->name . "<br/>";
}
$reader->close(); 
```

顶级 XML 如下所示：

```
<?xml version="1.0" ?>

<?xml-stylesheet type="text/xsl" href="AdvDisad.xsl"?>

<!DOCTYPE kaw [ <!ENTITY brvbar "|"> ]>

<mydata xmlns:xi="http://www.w3.org/2001/XInclude">
 <xi:include href="adv.xml"/>
</mydata> 
```

输出是这样的：

```
7 xml-stylesheet
10 kaw
1 mydata
14 #text
1 xi:include
14 #text
15 mydata 
```

如您所见， xi 并没有被解释为有什么特别之处。我需要自己处理吗？如果是这样，实体会传递吗？这是我首先打扰包含的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:00:49.833

您可以传递给 XMLReader的[`LIBXML`选项之一指示它替换 XIncludes：](http://www.php.net/manual/en/libxml.constants.php)

```
$reader->open($file, null, LIBXML_XINCLUDE); 
```

PHP 的 DOM 扩展也可以使用以下`xinclude`方法“手动”解析 XIncludes：

```
$doc = new DomDocument;
$doc->load($file);
$doc->xinclude(); 
```

# c# - 将代码替换为 ToString() 方法

> ID：12791356
> 
> 赞同：0
> 
> 时间：2012-10-09T00:37:46.803
> 
> 标签：c#, replace, tostring

我正在堆叠如何将这些行更改为 ToString() 方法

```
c1.DisplayComputerSummary();
c2.DisplayComputerSummary();

Console.WriteLine(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:43:33.220

`ToString()`您可能会问如何在通过该方法将对象打印到控制台时对自定义输出进行编程。您可以覆盖以下类型的`ToString()`类`c1`的方法`c2`：

```
public override string ToString()
{
   return DisplayComputerSummary();
} 
```

然后在您的程序中，您可以将其用作：

```
Console.WriteLine(c1.ToString());
Console.WriteLine(c2.ToString());
Console.WriteLine(); 
```

甚至只是：

```
Console.WriteLine(c1);
Console.WriteLine(c2);
Console.WriteLine(); 
```

有关该方法的更多信息，请参见[此处。](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)`ToString()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:39:33.880

你的问题是`unclear`，但试一试，

```
Console.WriteLine(c1.DisplayComputerSummary().ToString());
Console.WriteLine(c2.DisplayComputerSummary().ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:39:37.163

```
Console.WriteLine(c1.DisplayComputerSummary().ToString() + "-" + c2.DisplayComputerSummary().ToString()); 
```

# asp.net-mvc-3 - MVC3 主从验证不显示

> ID：12791361
> 
> 赞同：1
> 
> 时间：2012-10-09T00:38:25.410
> 
> 标签：asp.net-mvc-3, validation, mvc-editor-templates

我有一个 MVC3 页面，其中包含一个对象（标题），其中包含我想在单个页面上更新的数据和对象列表（详细信息）。在详细信息对象上，我有也需要运行的自定义验证 (IValidatableObject)。

这似乎通常按预期工作，验证正在运行并返回 ValidationResults 并且如果我输入 @Html.ValidationSummary(false); 在页面上显示这些验证。但是，我不希望在顶部列出验证列表，而是在正在验证的项目旁边，即页面上的 Html.ValidationMessageFor，但不显示相关消息。有什么我想念的吗？这适用于其他页面（没有这种 Master-Details 情况），所以我认为这与我将如何设置要更新的项目列表或项目的编辑器模板有关?

Edit.cshtml（Header-Details 编辑视图）

```
@foreach (var d in Model.Details.OrderBy(d => d.DetailId))
{
   @Html.EditorFor(item => d, "Detail")
} 
```

Detail.ascx（详细信息编辑器模板）

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Detail>" %>

<tr>            
    <td>
        <%= Model.Name %>
        <%= Html.HiddenFor(model => model.DetailId) %>
    </td>
    <td class="colDescription">
        <%= Html.EditorFor(model => model.Description) %>
        <%= Html.ValidationMessageFor(model => model.Description) %>
    </td>
    <td class="colAmount">
        <%= Html.EditorFor(model => model.Amount) %>
        <%= Html.ValidationMessageFor(model => model.Amount) %>
    </td>
</tr> 
```

模型是实体框架，标题具有名称和 HeaderId，详细信息具有 DetailId、HeaderId、描述和金额

控制器代码：

```
public ActionResult Edit(Header header, FormCollection formCollection)
{
   if (formCollection["saveButton"] != null)
   {
      header = this.ProcessFormCollectionHeader(header, formCollection);
      if (ModelState.IsValid)
      {
         return new RedirectResult("~/saveNotification");
      }
      else
      {
         return View("Edit", header);
      }
   }
   else
   {
      return View("Edit", header);
   }
} 
```

[我知道控制器代码可以稍微清理一下，只是在这种状态下，因为试图确定这里发生了什么]

IValidatableObject 实现：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
   if (this.Name.Length < 5) && (this.Amount > 10))
   {
      yield return new ValidationResult("Item must have sensible name to have Amount larger than 10.", new[] { "Amount" });
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:29:00.200

我建议您使用真正的编辑器模板。您的代码的问题是您正在视图中编写一个 foreach 循环来呈现模板，该模板会为相应的输入字段生成错误的名称。我想这就是为什么您在控制器操作中使用一些变通方法来填充模型 ( `header = this.ProcessFormCollectionHeader(header, formCollection);`) 而不是简单地使用模型绑定器来完成这项工作的原因。

因此，让我向您展示实现这一目标的正确方法。

模型：

```
public class Header
{
    public IEnumerable<Detail> Details { get; set; }
}

public class Detail : IValidatableObject
{
    public int DetailId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public int Amount { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if ((this.Name ?? string.Empty).Length < 5 && this.Amount > 10)
        {
            yield return new ValidationResult(
                "Item must have sensible name to have Amount larger than 10.", 
                new[] { "Amount" }
            );
        }
    }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new Header
        {
            Details = Enumerable.Range(1, 5).Select(x => new Detail
            {
                DetailId = x,
                Name = "n" + x,
                Amount = 50
            }).OrderBy(d => d.DetailId)
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(Header model)
    {
        if (ModelState.IsValid)
        {
            return Redirect("~/saveNotification");
        }
        return View(model);
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@model Header

@using (Html.BeginForm())
{
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            @Html.EditorFor(x => x.Details)
        </tbody>
    </table>
    <button type="submit">OK</button>
} 
```

Detail 类型（`~/Views/Shared/EditorTemplates/Detail.ascx`或`~/Views/Shared/EditorTemplates/Detail.cshtml`Razor）的编辑器模板：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<MvcApplication1.Controllers.Detail>" 
%>

<tr>            
    <td>
        <%= Html.DisplayFor(model => model.Name) %>
        <%= Html.HiddenFor(model => model.DetailId) %>
        <%= Html.HiddenFor(model => model.Name) %>
    </td>
    <td class="colDescription">
        <%= Html.EditorFor(model => model.Description) %>
        <%= Html.ValidationMessageFor(model => model.Description) %>
    </td>
    <td class="colAmount">
        <%= Html.EditorFor(model => model.Amount) %>
        <%= Html.ValidationMessageFor(model => model.Amount) %>
    </td>
</tr> 
```

以下是我为改进您的代码所做的几件事：

*   我在控制器级别按 DetailId 对 Details 集合进行了排序。控制器负责准备视图模型以供显示。视图不应执行此排序。视图应该做的就是显示数据
*   由于之前的改进，我摆脱了视图中用于呈现编辑器模板的 foreach 循环，并将其替换为单个`@Html.EditorFor(x => x.Details)`调用。其工作方式是 ASP.NET MVC 检测到这`Details`是一个集合属性（类型为），它会自动在名为or的文件夹`IEnumerable<Detail>`中查找模板化的自定义编辑器（与集合的类型同名）。然后它将为集合的每个元素呈现此模板，这样您就不必担心它`~/Views/SomeController/EditorTemplates``~/Views/Shared/EditorTemplates``Detail.ascx``Detail.cshtml`
*   由于之前的改进，在`[HttpPost]`动作中你不再需要任何`ProcessFormCollectionHeader`黑客。`header`action 参数将由模型绑定器从请求数据中正确绑定
*   在`Detail.ascx`我替换的模板`<%= Model.Name %>`内部`<%= Html.DisplayFor(model => model.Name) %>`，为了正确地对输出进行 HTML 编码并填充您网站上打开的 XSS 漏洞。
*   在`Validate`方法内部，我确保`Name`在测试其长度之前该属性不为空。顺便说一句，在您的示例中，模板内只有一个 Description 字段的输入字段，并且没有相应的`Name`属性输入字段，因此在提交表单时，此属性将始终为空。因此，我为其添加了相应的隐藏输入字段。

# java - 多个执行任务通知主任务完成？

> ID：12791362
> 
> 赞同：0
> 
> 时间：2012-10-09T00:38:34.037
> 
> 标签：java, parallel-processing, synchronization

我正在使用 Java 执行程序来并行划分和处理给定的任务。可以有任意数量的任务。它们都在开始时排队，主控制器对象只是等待它们全部完成。

我遇到的问题是如何确定所有任务何时完成。由于一个大任务只在一次排队（即所有当前排队的任务都属于同一个主任务）我可以使用该`getCompletedTaskCount()`方法将已完成任务的数量与最初排队的任务数量进行比较。

然而，这需要我不断地轮询执行者完成任务的数量，我认为这不是一个很好的解决方案。

```
while (pool.getCompletedTaskCount() - start_count < num_tasks)
{
    try
    {
        Thread.sleep(30);
    }
    catch (InterruptedException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我想过有一个计数器对象，每个任务都可以增加，然后如果计数等于预期任务的数量，则通知主线程。像这样的东西（忽略一些不完整的代码，比如缺少异常处理程序等）：

主线程：

```
counter_object.expected_count = num_tasks;
counter_object.count = 0;
queue_tasks();
synchronized(counter_object)
{
    counter_object.wait();
}
// all tasks have finished 
```

工人任务：

```
// ...do task
// task finished, update counter
synchronized(counter_object)
{
    ++counter_object.count;
    if(counter_object.count == counter_object.expected_count)
    {
        // all tasks have finished, notify master thread
        counter_object.notify();
    }
} 
```

此方法还有一个额外的好处，即我可以使用单个执行程序来运行多个主任务，因为计数器对象对于给定的主任务来说是本地的。

有没有更好的方法来解决这个问题？任务的数量很可能大于允许执行程序创建的最大线程数，所以我认为[CyclicBarrier](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)不会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:44:28.327

这听起来像是[ExecutorService.invokeAll](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)的工作。

```
Collection<Callable> tasks = <get all sub tasks>;
executorService.invokeAll(tasks);
// Execution proceeds at the following line only once all "tasks" have been run 
```

或者（因为您可能正在处理`Runnable`实例而不是`Callable`，您可以使用`ExecutorService.submit(Runnable)`然后等待它们完成。

```
for (Runnable task:tasks) {
    futures.add(executorService.submit(task));
}

for (Future<Void> result:futures) {
    result.get();
} 
```

*注意：省略异常处理*

# cakephp - cakephp 2.x + OpenTBS

> ID：12791364
> 
> 赞同：0
> 
> 时间：2012-10-09T00:39:00.527
> 
> 标签：cakephp, cakephp-2.x, opentbs

我试图让[OpenTBS](http://www.tinybutstrong.com/plugins/opentbs/demo/demo.html)与 cakephp 2.x 一起工作，但遇到了一些问题。我找到了以下线程并遵循了它，但这是针对 cakephp 1.x

[CakePHP + TinyButStrong](https://stackoverflow.com/questions/8547192/cakephp-tinybutstrong)

我所做的差异如下：

TbsHelper

```
class TbsHelper extends Helper 
{
  function getOpenTbs() {
    App::import('Vendor', 'tbs/tbs_class_php5');
    App::import('Vendor', 'tbs/tbs_plugin_opentbs');

    $tbs  = new clsTinyButStrong; // new instance of TBS
    $tbs->Plugin(TBS_INSTALL, OPENTBS_PLUGIN); // load OpenTBS plugin   
    return $tbs;
    }

} 
```

mail_merge 功能（将导出功能替换为下载而不是查看）

```
// FUNCTION EXPORT MAIL MERGE
// -------------------------------------------------------------->
function mail_merge()
{
    // Stop Cake from displaying action's execution time, this can corrupt the exported file
    // Re-ativate in order to see bugs
    //Configure::write('debug',0);

    // LOAD THE TBS HELPER
    // --------------------------------------------------------------->
    $this->helpers[] = 'Tbs';

    // GET THE CONTACTS
    // ------------------------------------------------------------->
    $contacts = $this->Contact->find('all', array('limit' => 20,  'contain' => FALSE));
    //debug($contacts);

    // Get a new instance of TBS with the OpenTBS plug-in
    // ------------------------------------------------------------->
    $otbs = $this->Tbs->getOpenTbs(); 

    // Load the DOCX template
    // ------------------------------------------------------------->
    $otbs->LoadTemplate($this->webroot.'/files/data_files/enquiry_letter_sample.docx');

    // Merge data in the template
    // ------------------------------------------------------------->
    $otbs->MergeBlock('r', $contacts);

    // End the merge and export
    // ------------------------------------------------------------->
    $file_name = 'export.docx';
    $otbs->Show(OPENTBS_FILE, $file_name);

    } 
```

我收到此错误：致命错误：**在第 408 行的 /home/village/public_html/app/Controller/ContactsController.php 中的非对象上调用成员函数 getOpenTbs()**

第 408 行是：$otbs = $this->Tbs->getOpenTbs();

知道会发生什么吗？

谢谢

# ios - 日历图标实现到 TableViewcontroller

> ID：12791377
> 
> 赞同：0
> 
> 时间：2012-10-09T00:41:09.107
> 
> 标签：ios, uitableview

想象一下，您的表 viewController 并且您在其中一行中有一个名为“settingDate”的元素，我想在“settingDate”行的左侧添加日历图标，但它应该在里面显示当前日期？有什么想法可以实施吗？

![在此处输入图像描述](../Images/a905ca5947f1f331c95c26e83c3babd9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:32:52.040

将不带数字的日历图标的图像设置为表格单元格的图像视图。然后添加一个标签作为 cell.imageView 的子视图，并使用 NSDate 更新标签的文本。

# javascript - 获取最近发生的星期日

> ID：12791378
> 
> 赞同：26
> 
> 时间：2012-10-09T00:41:18.717
> 
> 标签：javascript, date, datetime

我需要在日历视图中显示当前周，从星期日开始。

在Javascript中确定“上周日”的最安全方法是什么？

我正在使用以下代码计算它：

```
Date.prototype.addDays = function(n) {
      return new Date(this.getTime() + (24*60*60*1000)*n);
}

var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
var lastSunday = today.addDays(0-today.getDay()); 
```

该代码假设每天由二十四小时组成。这是正确的，除非是夏令时交叉日，在这种情况下，这一天可能是二十三或二十五小时。

本周，在澳大利亚悉尼，我们将时钟拨快了一个小时。结果，我的代码计算`lastSunday`为星期六 23:00。

那么确定上周日最安全、最有效的方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-09T00:47:06.437

要安全地精确添加一天，请使用：

```
d.setDate(d.getDate() + 1); 
```

这是夏令时安全的。要将日期对象设置为最后一个星期日：

```
function setToLastSunday(d) {
  return d.setDate(d.getDate() - d.getDay());
} 
```

或者为上周日返回一个新的 Date 对象：

```
function getLastSunday(d) {
  var t = new Date(d);
  t.setDate(t.getDate() - t.getDay());
  return t;
} 
```

### 编辑

原始答案的版本添加时间不正确，确实增加了一天，但不是OP想要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-09T01:08:08.683

试试这个[jsfiddle](http://jsfiddle.net/uUFMz/1/)

它仅使用内置日期方法

```
var now = new Date();
var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
var lastSunday = new Date(today.setDate(today.getDate()-today.getDay())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-12T12:46:09.073

使用`date-fn`库：`previousSunday(date)`

```
const now = new Date(); // the date to start counting from
previousSunday(now); 
```

文档：[https ://date-fns.org/v2.25.0/docs/previousSunday](https://date-fns.org/v2.25.0/docs/previousSunday)

# javascript - 为什么我应该使用 JQuery Ajax 模板

> ID：12791383
> 
> 赞同：0
> 
> 时间：2012-10-09T00:42:01.887
> 
> 标签：javascript, ajax, jquery

从 json 到 html 等等，我从来没有遇到过任何问题。我看到了许多用于 ajax html 模板的库，但我从来没有找到我应该使用的答案。

也许主要的答案是代码可见性和维护？速度或任何其他原因呢？

这就是我从 json 设计 html 的方式：

```
function MakeRow(item, alt) {    

    var html = "<div class='item "+alt+"'>";
    html += "<div class='checkbox'><input type='checkbox' name='checkedRecords' value='" + item.ID + "' /></div>";
    html += "<div class='attach'><img src='" + item.Attach + "' /></div>";
    html += "<div class='from'>"+item.From+"</div>";
    html += "<div class='title'>"+item.Title+"</div>";
    html += "<div class='date'>"+item.Date+"</div></div>";
    return html;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:50:34.497

模板是一种管理关注点分离的方法。基本思想是您的 HTML 应该关注文档的结构，而您的 javascript 关注更新文档呈现的数据。

通过使用模板，除了模板绑定的属性名称之外，HTML 不需要知道任何关于数据的信息，并且 Javascript 不需要知道如何呈现数据的结构。Javascript 只是从任何地方检索数据，然后使用适当的值填充 HTML 中定义的模板。

显然，您的问题中的方法有效，但问题是如果您想更改页面的布局，您可能必须浏览您的 Javascript 并修改所有这些代码。使用模板，所有布局都在它应该在的位置 - 在 HTML 中 - 因此您可以根据需要修改布局，并且它应该都可以正常工作，当然在限制范围内。

# jquery - 如何使用剃刀生成的 ID 调用 jQuery 函数？

> ID：12791386
> 
> 赞同：0
> 
> 时间：2012-10-09T00:42:15.790
> 
> 标签：jquery, razor

我有一个生成表格的剃须刀页面，我想打开一个对话框并在单击行图像时插入评论。该表此时有 5 行。

这是 tbody 标签内修改后的代码：

```
 <tbody>
    @for (int i = 0; i < 5; i++)
    {
      string dropDownAccountName = "dropDownAccountsR" + CasWtsUI.Utility.PadWithZero(@i.ToString(), 3);
      string dropDownPayType = "dropDownPayTypesR" + CasWtsUI.Utility.PadWithZero(@i.ToString(), 3);
      string showComment = "showCommentR" + CasWtsUI.Utility.PadWithZero(@i.ToString(), 3);
      string openComment = "openCommentR" + CasWtsUI.Utility.PadWithZero(@i.ToString(), 3);
      string aComment = "aCommentR" + CasWtsUI.Utility.PadWithZero(@i.ToString(), 3);
      <tr style="background-color: #ffffff; padding-left: 5px; height: 14pt">
        <td id="commentContainer" align="center">
          <a id="@showComment" name="@showComment" class="showComment" href="#">
            <img src='@Url.Content("~/Content/Images/NotepadIcon.jpg")' height="20px" width="20px" style="border:none; text-decoration:none"
       alt="Add a Comment for this Account" /></a>
        </td>
        <td align="left">
          <select id="@dropDownAccountName" name="@dropDownAccountName" style="font-size:9pt; width:120px">
            @foreach (CasWtsUI.AccountTitle accountTitle in Model.Accounts)
            {
              <option value="@accountTitle.ID">@accountTitle.Title</option>
            }
          </select>
        </td>
        <td align="left">
          <select id="@dropDownPayType" name="@dropDownPayType" style="font-size:9pt; width:90px" >
            @foreach (CASCommon.PayType payType in Model.PayTypes)
            {
              <option value="@payType.ID">@payType.Type</option>
            }
          </select>
        </td>
        @for (int dayOffset = 0; dayOffset < inputDays; dayOffset++)
        {
          System.DateTime entryDate = firstDate.AddDays(dayOffset);
          string textBoxHours = "textBoxHoursR" +
            CasWtsUI.Utility.PadWithZero(@i.ToString(), 3) + "D" +
            CasWtsUI.Utility.PadWithZero(entryDate.Year.ToString(), 4) +
            CasWtsUI.Utility.PadWithZero(entryDate.Month.ToString(), 2) +
            CasWtsUI.Utility.PadWithZero(entryDate.Day.ToString(), 2);
          <td align="center" style="width: 70px; font-size: 9pt">
            @{string theDay = entryDate.DayOfWeek.ToString();
              var backColor = "#ffffff"; }
            @if (theDay == "Saturday" || theDay == "Sunday")
            {
              backColor = "#f0f0f2";
            }
            <input type="text" id="@textBoxHours" name="@textBoxHours" style="width: 0.35in; background-color: @backColor"  />
          </td>
        }
      </tr>
      <tr>
            <td id="@openComment" class="showComment" colspan="20" style="text-align: left; padding-left: 40px;
              width: 500px; display: none">
              Enter a Comment about this account:&nbsp;&nbsp;&nbsp;&nbsp;
          <input id="@aComment" name="@aComment" type="textbox" size="120" style="color:blue; background-color:#f0f0f2" />
        </td>
      </tr>

    }
  </tbody> 
```

这是我的点击功能

```
<script src='@Url.Content("~/Scripts/jquery-ui-1.8.17.custom.min.js")' type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function () {
    $(".showComment").click(function (e) {
      $('#openComment').toggle('fade');
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:28:26.747

我看到的第一个问题是您试图将点击事件绑定到`#showComment`. 查看您正在呈现的 HTML，ID 可能如下所示：`#showCommentR001`，这就是您的点击事件未触发的原因。相反，你会想要这样的东西：

```
$(document).ready(function() {
    var $commentDialog = $("#Comment");
    $(".showComment").click(function() {
        $commentDialog.dialog("open");
    });

    $commentDialog.dialog({
        autoOpen: false,
        show: "fadeIn",
        modal: true
    });
});​ 
```

这是一个应该类似于在您的视图中得到输出的[小提琴。](http://jsfiddle.net/bhayden1/8sgKX/)

# php - 如何使用 PHP // 线程 // Mutex // Cond

> ID：12791394
> 
> 赞同：6
> 
> 时间：2012-10-09T00:44:28.753
> 
> 标签：php, multithreading, mutex

PHP 显然现在支持一个[Thread](http://www.php.net/manual/en/class.thread.php)类。还有一个[Mutex](http://www.php.net/manual/en/class.mutex.php)和[Cond](http://www.php.net/manual/en/class.cond.php)类。尽管如此，还是需要用好的选项编译它并添加一个 PECL 扩展来拥有它。

有没有好的教程从哪里开始？清楚地显示每个类/方法的合理使用的东西。

我只是不知道如何处理这些课程。我需要一些具体的例子来做非常简单的事情，展示尽可能多的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T08:07:55.340

它已在 pecl 上发布，在 github 页面上下载 windows ... git (source) 如果可以的话，更新的代码 ...

[http://pthreads.org](http://pthreads.org)包含更多信息，并检查示例文件夹...

如果您更具体地了解您需要做什么，我可以提供准确的答案，请随时直接与我联系...

抱歉缺少文档，我正在积极开发 pthreads 在我工作的那一点点时间里——它是在我下班度假时写的，现在我又回来工作了——文档将尽快更新当我找到时间。

线程通常是一件复杂的事情，但它不一定是……见过少于 100 行的线程池吗？？[https://github.com/krakjoe/pthreads/blob/master/examples/Pooling.php](https://github.com/krakjoe/pthreads/blob/master/examples/Pooling.php) ...有一个！

你不需要知道条件或互斥锁来操作 PHP 中的线程，pthreads 包括简单的 peasy 一切......

跳上船，毫无疑问，我会**完善它**...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:03:26.747

在任何语言中，线程化都不容易。它需要不同的思路（非线性）。由于您提到的内容在任何已发布的 PHP 版本中均不可用，因此我建议您使用 pctnl 和 shmop 功能。特别是 pcntl_fork。两者都已经存在了一段时间并受到支持。它是多处理而不是线程，但可以完成您正在寻找的内容。但是线程更有效。

通常，您会使用分叉让父进程检查工作，将其委托给分叉进程，然后在子进程完成工作时检查更多工作。父进程可以检查子进程的状态。例如，您可以确保只派生一定数量的子进程，并在派生另一个子进程之前等待一个完成。

我已经分叉了多达 500 个进程，此时 CPU 负载很高。如果负载太高，父进程将检查系统负载并且不再分叉。

如果你真的需要，你可以使用带有分叉的共享内存（shmop 函数）来获得你可以通过线程获得的大部分功能。

# java - json org.json.JSONException 中的 xml 解码问题：缺少“；” 在 XML 实体中

> ID：12791396
> 
> 赞同：4
> 
> 时间：2012-10-09T00:45:04.000
> 
> 标签：java, json, rest

我正在编写一个基于 REST 的 web 服务代码，其中一个 xml 被读取为 POST 正文内容。<REQ>J*Wt!&Gs+aGphxR</REQ>

数据可能包含字母数字或符号。

我正在使用 json-jena jar 并将 xml 转换为 java 对象并读取值。

```
JSONObject jsonObject = XML.toJSONObject(body); 
```

对于上面的特定请求，我收到如下错误 org.json.JSONException: Missing ';' 在 XML 实体中：&gs at 40 [character 41 line 1]

请让我知道如何无误地转换为 json 对象。

我的要求是读取 REQ 标签与用户指定的实际值（不是编码字符串）之间的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T00:55:35.980

问题是供应商没有发送 XML。在 XML 中，an`&`开始一个必须以 a 结尾的实体`;`

您的示例的正确 XML 是`<REQ>J*Wt!&amp;Gs+aGphxR</REQ>`通过替换其实体`&`引用`&amp;`（XML 还包括`&lt;`和`&gt;`for `<`and `>`）或可能将数据包含在 CDATA 部分中`<REQ><![CDATA[J*Wt!&Gs+aGphxR\]]></REQ>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:56:05.373

这似乎是在抱怨 XML 格式正确，而不是在进行转换本身时出现任何错误（尽管它可能将读取 XML 作为转换的第一步，这就是您看到错误的原因）。

首先，您是如何制作内容的？你应该确保它本身是格式良好的。像您这样的 XML 元素`<REQ>`不能只包含任意文本。字符`&`和`<`必须在元素内容中转义（`'`或者`"`可能需要在属性内容中转义）。为了避免需要转义`&`和`<`在元素内容内，您可以使用 CDATA 部分，假设您的解析器支持它们，但请记住特定序列`]]>`需要转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T00:56:31.570

这不是有效的 XML，因为该`&`字符是保留的。为了让它工作，你可能不得不像这样逃避它`&amp;`。其他保留的符号是`"`、`<`和`>`。您可以像这样转义这些：`&quot;`、`&lt;`和`&gt`。

# javascript - 使用另一个函数 JS 抓取的 flash var

> ID：12791398
> 
> 赞同：0
> 
> 时间：2012-10-09T00:45:07.433
> 
> 标签：javascript, flashvars

所以这就是我需要做的。所以页面上的Flash录像机保存视频时会调用这个函数：

```
function onSaveOk(streamName,streamDuration,userId,cameraName,micName,recorderId){
        //alert("onSaveOk("+streamName+","+streamDuration+","+userId+","+cameraName+","+micName+")");

        //the user pressed the [save] button inside the recorder and the save_video_to_db.XXX script returned save=ok
        //recorderId: the recorderId sent via flash vars, to be used when there are many recorders on the same web page
            $('#record').hide();
            $('#jwplayer').show();

    } 
```

然后我有我想使用 streamName flash var 的 JWplayer 脚本。这是我当前尝试的 JWPlayer 脚本：

```
<div id="jwplayer">
<center>
<div id='mediaplayer'></div>
<script type="text/javascript">
  jwplayer('mediaplayer').setup({
    'flashplayer': 'jwplayer/player.swf',
    'id': 'playerID',
    'width': '640',
    'height': '580',
    'provider': 'rtmp',
    'streamer': 'rtmp://domain/recorder/_definst_',
    'file': 'onSaveOk("+streamName+")'
  });
</script>
</center> 
```

这是我尝试使用 flash var 的地方，

```
'file': 'onSaveOk("+streamName+")' 
```

就像那样，它不起作用，有人可以告诉我正确的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:44:07.420

该站点使理解和实施 flash var 变得轻而易举。复制并粘贴代码：

[http://www.justthecodeplease.com/category/urls-flashvars/](http://www.justthecodeplease.com/category/urls-flashvars/)

# function - Haskell - 打印网格

> ID：12791400
> 
> 赞同：0
> 
> 时间：2012-10-09T00:45:25.623
> 
> 标签：function, haskell, printing, grid

> **可能重复：**
> [有人知道如何在 Haskell 中生成网格吗？](https://stackoverflow.com/questions/12772599/does-anybody-know-how-to-generate-a-grid-in-haskell)

我想知道 Haskell 中是否有一个函数，它允许您从列表列表（例如 [[1,2],[3,4]] ）转到更具可读性的内容，例如：

[[1,2]

[3,4]]

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:04:56.637

您可以使用该`unlines`函数从行列表中获取单个字符串。您可以从`[[Int]]`using获取字符串列表`map show`。您可以使用 将其打印到屏幕上`putStr`。一起，您将获得：

```
putStr . unlines $ map show [[1, 2], [3, 4]] 
```

打印：

```
[1,2]
[3,4] 
```

# php - 打印数据库存储的所见即所得 html 内容的安全方法

> ID：12791402
> 
> 赞同：0
> 
> 时间：2012-10-09T00:45:32.837
> 
> 标签：php, html, database, encoding, wysiwyg

我为我公司的网站用 PHP 构建了一个博客 CMS。当我们的一位员工在管理区域写博客文章时，它会将原始 HTML 保存到 MySQL 数据库中。

**例子：**

```
<p>Some example text written by my staff stored in the database</p> 
```

在我将文章打印到屏幕的页面上，在 PHP 中，打印有助于防止 XSS 或其他讨厌的 HTML 的最安全方法是什么？显然，我仍然需要 HTML 标签才能以与用户编写它的方式相同的方式显示。

我确实尝试`htmlspecialchars()`过，但打印了标签而不是使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:47:29.677

你可以使用这个库：[http ://htmlpurifier.org/](http://htmlpurifier.org/)

# r - 如何在 powerpoint (VBA) 上运行 R 脚本文件

> ID：12791404
> 
> 赞同：1
> 
> 时间：2012-10-09T00:45:41.003
> 
> 标签：r, powerpoint

## 我有这个脚本文件：

```
library(fBasics) # Load the package fBasics.
da=read.table("C:\\Users\\jose\\Tese\\Analysis of Financial Time Series\\dibm3dx7008.txt",header=T) # Load the data.

dim(da) # Find size of the data: 9845 rows and 5 columns.
da[1,] # See the first row of the data

ibm=da[,2] # Obtain IBM simple returns
sibm=ibm*100 # Percentage simple returns
basicStats(sibm) # Compute the summary statistics 
```

* * *

我想从 powerpoint 运行它；我已经在PowerPoint中尝试过VBA，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:46:52.883

您可以将您的脚本放入 *.bat 文件中，然后通过 Shellexecute 从 Powerpoint 执行此文件。但这是一个可怕的痛苦，并且极易受到更改文件位置的影响。

一些代码：

```
Dim wshshell As Object
Set wshshell = CreateObject("WScript.Shell") 'a shellconsole
Dim Shellscript as String
ShellScript = "c:\yourscript.bat" 'if this contains white spaces you have to add chr(34)  at the beginning and end of the string.

wshshell.CurrentDirectory = YourProgramPath 'set the current directory
wshshell.Run shellscript, , True 'run the script

'then parse the results -sorry I have no idea how to do this in R. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:02:25.053

不是对您问题的直接回答，但您可以看看将 Sweave（或 knitr）与投影仪幻灯片一起使用。

# ruby-on-rails - 将 Git 与托管在 Heroku 上的 Redmine 一起使用

> ID：12791407
> 
> 赞同：2
> 
> 时间：2012-10-09T00:46:16.327
> 
> 标签：ruby-on-rails, git, heroku, redmine

我有个问题。我正在为即将到来的项目使用 Redmine 作为问题跟踪系统，我最近在 Heroku 上进行了安装，我想知道是否有一种通过 github 存储库使用 Git 进行问题跟踪的好方法（即我可以提交，做一个 refs #issue_number ，它会将该提交与我正在跟踪的问题相关联）。我知道有一些方法可以用 svn 来做，但我们想在项目中使用 git。我听说 Heroku 无法使用某人的 git 进行 Redmine，因为您需要一个“裸”和“最小”目录？（或类似的东西）这是真的吗？或者是否有安装 git 以将其与我的基于 heroku 的 Redmine 的 github 存储库相关联的指南（我一直在谷歌搜索 'git with heroku 和 redmine' 和其他变体但没有运气）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:06:38.070

澄清一下，您提到您正在使用 GitHub、Redmine 和 Heroku，并希望将提交与 Redmine 中的问题编号相关联。

我相信 Heroku 不会涉及到这个，但是你想看的是你在 GitHub 上的仓库的一个 post-receive 钩子。

我能给你的最好的指导是遵循[这个](https://help.github.com/articles/post-receive-hooks)文档，但是选择“Redmine”接收后挂钩，并根据他们提供的详细说明进行设置。

钩子的文档明确说明了以下内容：

> 通过在提交消息中匹配“#IssueNo”来检测与 Redmine 问题相关的提交（即“修复错误 #234”与问题 #234 相关）

我相信这是您所追求的功能。如果我错了，请纠正我。

# r - 如何从 rep() 函数返回的向量创建矩阵？

> ID：12791409
> 
> 赞同：12
> 
> 时间：2012-10-09T00:46:33.970
> 
> 标签：r, matrix, vector, rep

> x=1:20
> 
> [1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
> 
> 代表（x，2）
> 
> [1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
> 
> 查看（代表（x，2））

使用 R 中的 rep() 函数生成 20 x 2 向量时遇到问题。

当我在 R 工作区中查看数据时，不是创建两列，每列从 1 到 20，而是显示为 40X1 向量，即 1-20 1-20。

如何使用 rep() 函数创建一个 20X2 的重复列向量？谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-09T00:48:48.187

`rep`将返回一个原子向量。如果您想要一个矩阵，请使用`matrix`具有适当尺寸的结果。

例如。

```
x <- 1:20
matrix(rep(x,2), ncol = 2)
      [,1] [,2]
 [1,]    1    1
 [2,]    2    2
 [3,]    3    3
 [4,]    4    4
 [5,]    5    5
 [6,]    6    6
 [7,]    7    7
 [8,]    8    8
 [9,]    9    9
[10,]   10   10
[11,]   11   11
[12,]   12   12
[13,]   13   13
[14,]   14   14
[15,]   15   15
[16,]   16   16
[17,]   17   17
[18,]   18   18
[19,]   19   19
[20,]   20   20 
```

# c - malloc 本身是否提供某种同步？

> ID：12791410
> 
> 赞同：2
> 
> 时间：2012-10-09T00:46:34.510
> 
> 标签：c, multithreading

我听说“malloc 是线程安全的，因为它提供了一个同步原语，因此同时到 malloc 不会破坏堆”。

但是当我在visual studio crt中查看malloc函数的源代码时，发现malloc函数只是将请求传递给syscall HeapAlloc。所以我认为是操作系统本身提供了某种同步来保护应用程序免受损坏的堆而不是malloc。

那么Linux呢？malloc 本身是否提供某种同步？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T00:52:20.203

谈到这一点的唯一标准是 C11（因为之前没有多线程的概念），它说 (7.22.3/2)：

> 为了确定数据竞争的存在，内存分配函数的行为就像它们只访问可通过其参数访问的内存位置，而不是其他静态持续时间存储。但是，这些函数可能会明显地修改它们分配或取消分配的存储空间。对内存区域的调用`free`或`realloc`取消分配内存区域`p`的调用与分配全部或部分区域的任何分配调用同步`p`。此同步发生在解除分配函数的任何访问之后`p`，以及分配函数的任何此类访问之前。

简而言之，“一切都好”。

但是，像 Linux 这样的特定实现肯定会在很长一段时间内提供自己的强有力的保证（因为`ptmalloc2`我认为），而且基本上一直没问题。[更新，感谢@ArjunShankar：Posix 确实需要`malloc`线程安全。]

（但请注意，Google 等其他实现`tcmalloc`可能在多线程应用程序中具有更好的性能。）

（对于 C++，请参阅 C++11：18.6.1.4。）

# iphone - 适用于 iOS 模拟器但不适用于 iPhone

> ID：12791411
> 
> 赞同：1
> 
> 时间：2012-10-09T00:46:34.637
> 
> 标签：iphone, objective-c, ios, xcode

这行代码在 iOS Simulator 6.0 上运行良好，但是当我尝试在我的 iPhone 上运行它时崩溃了，也运行 iOS6。

```
[menuView addSubview:mvc.view]; 
```

为什么会发生这种情况，我该如何解决？

这是代码的更完整版本：

```
SDMenuViewController *mvc = [[SDMenuViewController alloc] init];
[menuView addSubview:mvc.view]; 
```

这就是它崩溃的原因：

```
2012-10-08 21:32:32.423 CrunchCalculator1-2[21019:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/EDD23933-CE20-4AFD-A2B1-CDD56AD658E8/CrunchCalculator1-2.app> (loaded)' with name 'SDNestedTableView''
*** First throw call stack:
(0x39cd03e7 0x35ece963 0x39cd0307 0x39ee0fd1 0x39ee05ff 0x39dd9031 0x39e0786d 0x39d63419 0xb20d9 0x39d63541 0x39da3d29 0x39d9fac5 0x39de1199 0xb17c5 0x39da4a71 0x39da45f5 0x39d9c803 0x39d44ce7 0x39d44775 0x39d441b7 0x31e145f7 0x31e14227 0x39ca53e7 0x39ca538b 0x39ca420f 0x39c1723d 0x39c170c9 0x39d9b43d 0x39d98289 0xb1523 0x3792fb20)
libc++abi.dylib: terminate called throwing an exception 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T02:28:31.260

我不太确定它在您的模拟器上是如何工作的（当我在我的模拟器上尝试时，我得到了您在原始问题中列出的崩溃）。无论如何，您可以通过查看以下项目来修复它：

*   主要问题是 NIB 未包含在捆绑包中。将其添加到项目目标的“复制捆绑资源”中，例如：

![复制捆绑资源](../Images/2c14704acb30336483fd2ad2cd7735ca.png)

*   在查看“复制捆绑资源”时，您还需要包含`SDSubCell.xib`、`SDGroupCell.xib`和添加所有这些 PNG 文件。

*   顺便说一句，虽然它显然不会导致崩溃，但`SDNestedTableView`NIB 中的“文件所有者”基类指的是该项目中任何地方都不存在的类。那可不好。无论如何，您可能想将其更改为`SDMenuViewController`or `SDNestedTableViewController`;

![设置文件的所有者基类](../Images/7d691edc18e07a3858583c26c9c5e6d0.png)

* * *

这与您的崩溃有点无关，但是当我查看该项目时，我看到了一个令人担忧的结构：

```
SDMenuViewController *mvc = [[SDMenuViewController alloc] initWithNibName:@"SDNestedTableView" bundle:nil];
[menuView addSubview:mvc.view]; 
```

您正在创建一个控制器，获取其视图，然后让视图控制器超出范围并被释放（如果您使用的是 ARC）或泄漏它（如果不是 ARC）。

从最初的问题来看，我并不能完全确定您是否正在`addSubview`作为一种过渡到新视图的方式（这确实是一种不好的做法），或者您是否在进行视图控制器包含。当我查看代码时，您似乎正在执行后者，尽管您的代码中缺少一些调用。您可能想阅读[view controller contains](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)。并查看[WWDC 2011 session 102](https://developer.apple.com/videos/wwdc/2011/?id=102)。

无论如何，上面带有视图控制器`alloc`/`init`的那两行代码以及随后的代码`addSubview`将在您的非 ARC 项目中泄漏（如果您曾经使用 ARC，它会崩溃）并且您的视图层次结构与您的视图控制器层次结构不同步。我建议你可能想要：

```
SDMenuViewController *mvc = [[[SDMenuViewController alloc] initWithNibName:@"SDNestedTableView" bundle:nil] autorelease];
[self addChildViewController:mvc];
[mvc didMoveToParentViewController:self];
[menuView addSubview:mvc.view]; 
```

注意`autorelease`第一行的。

视图控制器包含功能可能很强大，但您要确保完成一些基本的内务处理。

* * *

最后一次更新：

我注意到这段代码中有一些错误。首先，您对`currentSection`in的使用`item:setSubItem:forRowAtIndexPath`不起作用。您正在根据最后一个`expandingItem`. 因此，如果您在展开任一主要项目之前单击其中一项，程序将崩溃。可能最好的方法是完全消除`currentSection`变量，并在`item:setSubItem:forRowAtIndexPath`, 使用`item.cellIndexPath.row`而不是你的变量`currentSection`。

`SDNestedTable`不幸的是，这个修复导致了一个更严重的问题，这个类本身似乎存在一个 iOS 6 错误。如果您在 iOS 6 上运行它并展开所有项目，滚动到底部然后滚动回顶部，程序将崩溃，因为返回的`cellIndexPath`属性可以被释放！如果你在 iOS 6 中打开僵尸，你会看到已经被释放。我去下载了[原始版本](https://github.com/serverdensity/ios-SDNestedTable)，在那里看到了同样的问题。问题似乎是in被定义为一个属性（这意味着如果 iOS 确定它不再需要它为自己的目的创建的它，即使维护一个`SDGroupItem *item``item:setSubItem:forRowAtIndexPath``cellIndexPath``cellIndexPath``SDGroupCell``assign``indexPath``SDGroupCell``assign`引用这个释放的对象）。只需将from的`cellIndexPath`属性更改为，这个 iOS 6 错误就消失了。我已将此问题告知开发人员，但此更改将解决 iOS 6 中代码崩溃的问题。`SDGroupCell``assign``retain``SDNestedTable``retain`

*[编辑：作者`SDNestedTable`同意我对该问题的评估，并报告此问题已在最新版本中修复。- 抢]*

最好的祝愿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:03:00.787

您可能应该在第一行使用`initWithNibName:`insead 。`init`不确定您的具体问题，但肯定可以尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:07:27.653

看起来您正在尝试实例化一个名为 SDNestedTableView.nib 的 nib，但它不存在。笔尖是否包含在项目成员中？

# c# - 为什么这不会创建一个“真正的”随机数？

> ID：12791418
> 
> 赞同：0
> 
> 时间：2012-10-09T00:48:17.710
> 
> 标签：c#, random, numbers

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)

我试图创建一个循环来在列表框中创建和输出 5 个随机数。基本上它输出相同的随机数 5 次而不是 5 个不同的随机数。当我使用断点并浏览代码时，它实际上会生成 5 个数字。那么为什么它只输出第一个答案呢？谢谢你。（这不是项目的全部，但我需要先让它工作）。

```
 public string Numbertext1;
    public string Numbertext2;       
    public int GeneratedNumbers;
    public int Average = 0;
    public int TotalSum = 0;
    public int TotalCalcs = 0;
    public int Counter = 0;

    private void btnRandomise_Click(object sender, EventArgs e)
    {
        Numbertext1 = txtNum1.Text;
        int Number1;
        int.TryParse(Numbertext1, out Number1);
        Numbertext2 = txtNum2.Text;
        int Number2;
        int.TryParse(Numbertext2, out Number2);

        do
        {

            Random num = new Random();
            int number = num.Next(Number1, Number2);
            lbNumbers.Items.Add(Convert.ToString(number));
            Counter++;
        }
        while (Counter < 5);
        {
            TotalCalcs++;
            Counter = 0;
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T00:49:54.557

您需要`num`在全局级别初始化变量。它一遍又一遍地使用相同的种子。

把这个 :`Random num = new Random();` 放在你初始化其他所有东西的顶部。然后将其从您的方法中删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T00:50:57.147

这是因为您在`Random`紧密循环中创建了一个新实例，所以种子编号将是相同的。该类`Random`并不是真正随机的（在数学意义上），因此您应该更改种子或使用它的一个实例。与其他变量一起移动`Random num = new Random();`到顶部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T00:50:57.000

因为您没有为随机数生成器提供足够的种子。

生成器有一个它遵循的算法，如果你只是创建它而不播种它，那么你的数字每次都将是相同的。[引用 MSDN](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)：

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的随机数集。

要解决此问题，请使用允许您指定种子的其他构造函数 - MSDN 上有一个[很好](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T00:58:04.753

[Random](http://msdn.microsoft.com/en-us/library/system.random.aspx)类实例化是时间相关的。通过一个非常快速的循环，您每次都在创建相同的对象，因此您会一遍又一遍地获得相同的值。您需要将实例移到循环之外，以便在调用 `Next()`.

这也是使用断点检查值时它“起作用”的原因。您创建的 Random 对象将具有不同的参考时间，因此会有所不同。

# objective-c - 如何使用 xcode 将快照划分为多个片段，以便让用户与每个片段进行交互？

> ID：12791421
> 
> 赞同：1
> 
> 时间：2012-10-09T00:49:16.627
> 
> 标签：objective-c, ios, xcode, iphone-sdk-3.0

我的应用程序的要求是它需要拍照然后将其分成几部分。例如，有 8 行和 8 列。我可能将行命名为 A 到 H，而我可能将列命名为 1 到 8。假设单击图片后的用户选择 A1，代码应该能够缩放 A1 并为他提供执行操作的选项一些事情，比如放置一些符号或从可用选项中标记一些东西。我如何实现 1) 拆分 2) 缩放 3) 以小徽标的形式向用户提供各种符号？我对 iphone 编程很陌生，发现存在一个名为 UIImagePickerController 的类来帮助你，但我不知道如何实现 1,2 和 3。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:46:45.447

好吧，要将图像分成几部分，您应该使用以下代码（将其放在`UIImage`类别中）：

```
- (UIImage *)imageCroppedWithRect:(CGRect)rect
{
    if (self.scale > 1.0f) {
        rect = CGRectMake(rect.origin.x * self.scale,
                          rect.origin.y * self.scale,
                          rect.size.width * self.scale,
                          rect.size.height * self.scale);
    }

    CGImageRef imageRef = CGImageCreateWithImageInRect(self.CGImage, rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:self.scale orientation:self.imageOrientation];
    CGImageRelease(imageRef);
    return result;
} 
```

现在您将拥有一些图像，并且应该`UIImageViews`使用这些图像创建适当数量的图像。然后取决于你想让用户如何缩放它添加`UITapGestureRecognizer`，eq。对于缩放，您可以添加隐藏`UIImageView`，当点击该部分时，使用以下代码：

```
- (void)pieceTapped:(UITapGestureRecognizer *)recognizer
{
    UIImageView *piece = recognizer.view;
    self.zoomedImageView.frame = piece.frame;
    self.zoomedImageView.image = piece.image;
    self.zoomedImageView.hidden = NO;
    [UIView animationWithDuration:0.3 animation:^{
        self.zoomedImageView.frame = self.view.frame;
    }];
} 
```

现在你应该只把你的符号放在那个图像上。但是你想怎么做呢？从某处或自动拖放图像？将符号永久放置到图像上还是仅放置在图像上？

# spring - Spring控制器的IllegalArgumentException

> ID：12791429
> 
> 赞同：0
> 
> 时间：2012-10-09T00:50:48.670
> 
> 标签：spring, spring-mvc

我有一个使用 jquery 显示/隐藏某些字段的视图（jsp）。我正在使用 jquery 使用 ajax 将数据发布到控制器（spring mvc）。当我只是在页面中输入值时效果很好，但是如果我单击一个链接以取消隐藏 2 个文本框，将值输入其中然后发送到控制器，我得到了这个异常。我检查了 spring 日志，我可以看到所有属性都转换为与 spring 绑定，但是在引发异常之后不久。以下是我在日志中可以看到的内容。我已经多次检查了所有参数，并且在 jsp/js/java 中没有任何遗漏/拼写错误。任何帮助将非常感激

```
 19:40:16,875 DEBUG GenericConversionService:254 - Caching under ConverterCacheKey [sourceType = java.lang.String, targetType = @org.springframework.web.bind.annotation.RequestParam java.lang.String]
java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,640 DEBUG GenericConversionService:186 - Converted to 540
19:40:17,644 DEBUG GenericConversionService:139 - Checking if I can convert java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,646 DEBUG GenericConversionService:358 - Searching for converters indexed by sourceType [java.lang.String]
19:40:17,647 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Integer]
19:40:17,649 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,651 DEBUG GenericConversionService:560 - Matching java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,653 DEBUG GenericConversionService:570 - Did not match converter java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,654 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Comparable]
19:40:17,656 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Number]
19:40:17,658 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,660 DEBUG GenericConversionService:576 - Matched converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,661 DEBUG GenericConversionService:254 - Caching under ConverterCacheKey [sourceType = java.lang.String, targetType = @org.springframework.web.bind.annotation.RequestParam int]
19:40:17,663 DEBUG GenericConversionService:147 - Yes, I can convert
19:40:17,665 DEBUG GenericConversionService:159 - Converting value '1380' of java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,667 DEBUG GenericConversionService:246 - Matched cached converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,668 DEBUG GenericConversionService:186 - Converted to 1380
19:40:17,672 DEBUG GenericConversionService:139 - Checking if I can convert java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,673 DEBUG GenericConversionService:358 - Searching for converters indexed by sourceType [java.lang.String]
19:40:17,675 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Integer]
19:40:17,677 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,679 DEBUG GenericConversionService:560 - Matching java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,680 DEBUG GenericConversionService:570 - Did not match converter java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,682 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Comparable]
19:40:17,684 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Number]
19:40:17,685 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,687 DEBUG GenericConversionService:576 - Matched converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,689 DEBUG GenericConversionService:254 - Caching under ConverterCacheKey [sourceType = java.lang.String, targetType = @org.springframework.web.bind.annotation.RequestParam int]
19:40:17,691 DEBUG GenericConversionService:147 - Yes, I can convert
19:40:17,693 DEBUG GenericConversionService:159 - Converting value '540' of java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,694 DEBUG GenericConversionService:246 - Matched cached converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,696 DEBUG GenericConversionService:186 - Converted to 540
19:40:17,699 DEBUG GenericConversionService:139 - Checking if I can convert java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,701 DEBUG GenericConversionService:358 - Searching for converters indexed by sourceType [java.lang.String]
19:40:17,703 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Integer]
19:40:17,705 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,707 DEBUG GenericConversionService:560 - Matching java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,708 DEBUG GenericConversionService:570 - Did not match converter java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,710 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Comparable]
19:40:17,712 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Number]
19:40:17,713 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,715 DEBUG GenericConversionService:576 - Matched converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,717 DEBUG GenericConversionService:254 - Caching under ConverterCacheKey [sourceType = java.lang.String, targetType = @org.springframework.web.bind.annotation.RequestParam int]
19:40:17,719 DEBUG GenericConversionService:147 - Yes, I can convert
19:40:17,720 DEBUG GenericConversionService:159 - Converting value '1380' of java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,722 DEBUG GenericConversionService:246 - Matched cached converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,724 DEBUG GenericConversionService:186 - Converted to 1380
19:40:17,727 DEBUG GenericConversionService:139 - Checking if I can convert java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,729 DEBUG GenericConversionService:358 - Searching for converters indexed by sourceType [java.lang.String]
19:40:17,731 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Integer]
19:40:17,732 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,734 DEBUG GenericConversionService:560 - Matching java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,736 DEBUG GenericConversionService:570 - Did not match converter java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,737 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Comparable]
19:40:17,739 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Number]
19:40:17,741 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,743 DEBUG GenericConversionService:576 - Matched converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,744 DEBUG GenericConversionService:254 - Caching under ConverterCacheKey [sourceType = java.lang.String, targetType = @org.springframework.web.bind.annotation.RequestParam int]
19:40:17,746 DEBUG GenericConversionService:147 - Yes, I can convert
19:40:17,748 DEBUG GenericConversionService:159 - Converting value '540' of java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,750 DEBUG GenericConversionService:246 - Matched cached converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,780 DEBUG GenericConversionService:186 - Converted to 540
19:40:17,784 DEBUG GenericConversionService:139 - Checking if I can convert java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,786 DEBUG GenericConversionService:358 - Searching for converters indexed by sourceType [java.lang.String]
19:40:17,788 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Integer]
19:40:17,790 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,792 DEBUG GenericConversionService:560 - Matching java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,794 DEBUG GenericConversionService:570 - Did not match converter java.lang.String -> @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@4a6ca1a6
19:40:17,795 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Comparable]
19:40:17,797 DEBUG GenericConversionService:429 - and indexed by targetType [java.lang.Number]
19:40:17,799 DEBUG GenericConversionService:473 - Found matchable converters java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,800 DEBUG GenericConversionService:576 - Matched converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,802 DEBUG GenericConversionService:254 - Caching under ConverterCacheKey [sourceType = java.lang.String, targetType = @org.springframework.web.bind.annotation.RequestParam int]
19:40:17,804 DEBUG GenericConversionService:147 - Yes, I can convert
19:40:17,806 DEBUG GenericConversionService:159 - Converting value '1380' of java.lang.String to @org.springframework.web.bind.annotation.RequestParam int
19:40:17,807 DEBUG GenericConversionService:246 - Matched cached converter java.lang.String -> java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@21e8bf76
19:40:17,809 DEBUG GenericConversionService:186 - Converted to 1380
19:40:17,812 DEBUG HandlerMethodInvoker:173 - Invoking request handler method: public com.zeater.guru.admin.command.ResultVO com.zeater.guru.admin.controller.RestaurantController.addRestaurant(java.lang.String,java.lang.String,java.lang.String,int,java.lang.String,java.lang.String,java.lang.String,java.lang.String,int,int,int,float,float,int,float,boolean,boolean,int,java.lang.String,java.lang.String,java.lang.String,int,int,int,int,int,int,int,int,int,int,int,int,int,int,org.springframework.ui.Model)
19:40:17,815 DEBUG AnnotationMethodHandlerExceptionResolver:132 - Resolving exception from handler [com.zeater.guru.admin.controller.RestaurantController@144683c2]: java.lang.IllegalArgumentException
19:40:17,818 DEBUG ResponseStatusExceptionResolver:132 - Resolving exception from handler [com.zeater.guru.admin.controller.RestaurantController@144683c2]: java.lang.IllegalArgumentException
19:40:17,820 DEBUG DefaultHandlerExceptionResolver:132 - Resolving exception from handler [com.zeater.guru.admin.controller.RestaurantController@144683c2]: java.lang.IllegalArgumentException
19:40:17,822 DEBUG DispatcherServlet:667 - Cleared thread-bound request context: org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper@188edd79
19:40:17,824 DEBUG DispatcherServlet:671 - Could not complete request
java.lang.IllegalArgumentException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:57:06.677

一个完整的堆栈跟踪将不胜感激。问题可能是，spring 无法转换您的方法参数之一。你应该重构那个方法，它的参数太多了。您可以创建一个包含所有参数的 dto（Spring 提供的参数除外）。

编辑：

而不是使用大量的`@RequestParam`注释。您可以将所有方法参数包装在一个包装对象 (DTO) 中。

例子：

```
public class MyWrapperDTO {
    private String someStrValue;
    private String anotherStrValue;
    private int someIntValue;

    // getters/setters omitted
} 
```

从这里您可以选择 2 个选项：使用`@ModelAttribute`或`@RequestBody`

对于第一个：

```
@Controller
public class Controller {
    @RequestMapping(value = "/mypage/view")
    public ModelAndView viewPage() {
        MyWrapperDTO dto = new MyWrapperDTO();
        // you could provide default values for your form here
        return new ModelAndView("/mypage").
            .addObject("form", dto);
    }

    @RequestMapping(value = "/mypage/save", method = RequestMethod.POST)
    @ResponseBody
    public void doSomething(@ModelAttribute("form") MyWrapperDTO dto) {
        // process your ajax call here
        // do something
    }
} 
```

您的 jsp 应如下所示：

```
<spring:url var="myAjaxCall" value="/mypage/save" />

<!-- you should use spring form tag -->
<form:form commandName="form" action="${myAjaxCall}">
   <form:input path="someStrValue"></form:input>
   <form:input path="anotherStrValue"></form:input>
   <form:input path="someIntValue"></form:input>
   <input type="submit" value="Submit"></input>
</form:form> 
```

第二个选项 ( `@RequestBody`)，假设您要发送一个 JSON 对象（这涉及一些 jquery）：

```
@Controller
public class Controller {
    @RequestMapping(value = "/mypage/view")
    public ModelAndView viewPage() {
        MyWrapperDTO dto = new MyWrapperDTO();
        // you could provide default values for your form here
        return new ModelAndView("/mypage").
            .addObject("form", dto);
    }

    @RequestMapping(value = "/mypage/save", method = RequestMethod.POST)
    @ResponseBody
    public void doSomething(@RequestBody MyWrapperDTO dto) {
        // process your ajax call here
        // do something
    }
} 
```

对于你的jsp：

```
<spring:url var="myAjaxCall" value="/mypage/save" />

<script type="text/javascript">
   $(document).ready(function() {
      $(document).on('click', '#submit', function() {
          // not the best way to do it
          var data = {
            'someStrValue': $('#someStrValue').val(),
            'anotherStrValue': $('#anotherStrValue').val(),
            'someIntValue': $('#someIntValue').val()
          };

          // use jQuery.ajax
          jQuery.ajax({
              'data': JSON.stringify(data),
              'type': 'POST',
              'ur': '${myAjaxCall}',
              'success': function(data) {
                   // yehey!
               }
          });
      });
    });
</script>

<!-- you should use spring form tag -->
<form:form commandName="form">
   <form:input id="someStrValue" path="someStrValue"></form:input>
   <form:input id="anotherStrValue" path="anotherStrValue"></form:input>
   <form:input id="someIntValue" path="someIntValue"></form:input>
   <button id="submit" type="button">Submit</button>
</form:form> 
```

Spring 将处理转换/绑定到您的包装器对象。第二个选项要求您在类路径中有[杰克逊](http://jackson.codehaus.org/)。

# hibernate - JSF2 + Hibernate + Guice - 使用 DI (Guice) 引入了哪些好处？

> ID：12791430
> 
> 赞同：1
> 
> 时间：2012-10-09T00:50:55.457
> 
> 标签：hibernate, jsf-2, dependency-injection, guice

我目前正准备开始一个新项目的工作，以学习集成 JSF2、Hibernate 和 DI（以 Guice 的形式）的最佳实践。

我的目标是针对表示层的 JSF2 (myfaces) 和针对数据库层 (ORM) 的 Hibernate 4.1。

通常在我使用 ORM 之前，我会满足于在项目中创建 Backbean、BDI、BD、BO、DTO 和 DAO 文件夹结构的以下模式：

*   应用程序 backbeans 方法进入 Backbean 文件夹
*   接口进入 BDI 文件夹
*   接口的实现进入 BD 文件夹
*   BO中的类用于调用上层DAO类
*   DAO 类是完成所有 JDBC 工作的地方。

**休眠问题：**

为了集成 Hibernate，我是否需要摆脱 DAO 并直接从 BO 调用 HibernateDAO？或者使用 DAO 而不是调用 JDBC 使用 Hibernate 与 SQL 交互？

**DI（Guice）问题：**

我以前一直在使用诸如“DeligateFactory”和“ServiceFactory”之类的类作为在我的代码中促进失去耦合的一种方式，例如：

```
 //interface
    public Interface UserBDI {

        public User userAuth();
    }

    //implementation of the interface
    public class UserBD implements UserBDI {

        public UserBD() {};

        //do something here
        public User userAuth() {...};
    }

    //Deligate Factory
    public class DeligateFactory{

        public DeligateFactory(){}

        public static UserBDI CreateUserBD() {
            UserBDI bdObj = new UserBD();
            return bdObj;
        }
    }

    //some backbean
    public class homePage {
        public homePage(){}

        public authUSer(){
            userBD bdOBJ = DeligateFactory.CreateUserBD();

            User u = new User();
            u.setID("test");
            u.setPass("test");

            //validate
            u = bdObj.userAuth(u);

        }
    } 
```

我理解 DI 的概念是消除代码中使用的接口实现的紧密耦合，所以如果我将 DI“集成”到我的项目中，我是否只是摆脱了所有 DeligateFactory/ServiceFactory 方法，而是使用 DI 来执行此操作我？还有其他好处吗？

# vb.net - 选择运行时标签

> ID：12791436
> 
> 赞同：1
> 
> 时间：2012-10-09T00:51:35.727
> 
> 标签：vb.net, runtime, labels

我正在用 VB.NET 编写一个塑料卡片打印程序。主要形式是设计卡片。

我在运行时将标签创建到 Panel 控件中，用户可以在它是活动控件时移动、编辑、调整大小等。创建几个标签后，我无法更改所选标签以进行编辑。

我尝试在创建控件时添加一个带有控件列表的组合框，并使用 for 循环查找控件并将其设为活动控件，但这并不是真正的用户友好。

有没有更聪明的方法来使用鼠标在面板中选择另一个标签？

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:12:35.913

将面板添加到表单并尝试以下操作：

```
Public Class Form1

  Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    For i As Integer = 0 To 4
      Dim lbl As New Label
      AddHandler lbl.Click, AddressOf lbl_Click
      Panel1.Controls.Add(lbl)
      lbl.Top = 30 * i
      lbl.Text = "Hello!"
    Next
  End Sub

  Private Sub lbl_Click(sender As System.Object, e As System.EventArgs)
    Dim lbl As Label = DirectCast(sender, Label)
    lbl.Font = New Font(System.Drawing.FontFamily.GenericMonospace, 12)
  End Sub
End Class 
```

单击标签应更改标签的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:40:03.963

我喜欢 SSS 的回答，但我会避免创建`Private Sub`事件处理程序，而只使用内联 lambda：

```
For i As Integer = 0 To 4
  Dim lbl As New Label
  AddHandler lbl.Click,
    Sub (s, e)
        lbl.Font = New Font(FontFamily.GenericMonospace, 12)
    End Sub
  Panel1.Controls.Add(lbl)
  lbl.Top = 30 * i
  lbl.Text = "Hello!"
Next 
```

# c# - 继承的控件不会显示在设计器中

> ID：12791437
> 
> 赞同：0
> 
> 时间：2012-10-09T00:52:15.770
> 
> 标签：c#, winforms, inheritance, user-controls

尝试在从 Panel 继承的 C# Winforms 中创建一个简单的自定义控件，但是一旦我将其更改为从“Panel”而不是“UserControl”继承，我就会收到此错误：

![在此处输入图像描述](../Images/0bbc94f4a85f44968c90eec9971a8edc.png)

这是整个类的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace SETPaint
{
    public partial class Canvas : Panel
    {
        public Canvas()
        {
        InitializeComponent();
        }

        private void Canvas_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:19:50.810

删除 Designer.cs 文件中的“this.AutoScaleDimensions = ...”行（根据异常，第 35 行）。可能还有另一个类似于“this.AutoScaleMode = .Font”。

出现此问题是因为您在 Control 派生自 UserControl 时使用了 Designer，并且它在 InitializeComponent() 方法中设置了一些默认属性。这些属性是 UserControl 基本类型的一部分，但不是 Panel 基本类型的一部分。

由于 IDE Designer 无法加载 Designer.cs 文件来解决此问题，因此您需要手动执行此操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T01:07:08.217

你的代码应该是这样的

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace SETPaint
{
    public class Canvas : Panel
    {

    }
} 
```

构建解决方案后，工具箱上应该有一个名为 Canvas 的项目

# c# - 如何排队/等待 TPL 任务完成

> ID：12791442
> 
> 赞同：5
> 
> 时间：2012-10-09T00:53:03.443
> 
> 标签：c#, .net, concurrency, task-parallel-library

我需要一些有关 TPL 和任务的帮助

这是我的场景：

1.  我有一些产生任务的事件处理程序。如果在之前的任务完成之前调用了一个事件，我想在继续之前等待（阻止）它。

2.  我有一个同步方法，当调用它时，必须等到任何事件处理程序的任何派生任务完成后，才能继续。

* * *

```
public void DoSomething()
{
    // Expects any running tasks from OnEvent1(), OnEvent2(), OnEvent3()
    // to be completed before proceeding.
}

public void OnEvent1()
{
    Task.Factory
    .StartNew(()=>{ /*Long running task*/ })
    .ContinueWith(task=>{ /* Updates UI */ });
}

public void OnEvent2()
{
    Task.Factory
    .StartNew(()=>{ /*Long running task*/ })
    .ContinueWith(task=>{ /* Updates UI */ });
}

public void OnEvent3()
{
    Task.Factory
    .StartNew(()=>{ /*Long running task*/ })
    .ContinueWith(task=>{ /* Updates UI */ });
} 
```

* * *

实际情况是：

*   **OnFetchData()** => 生成任务。对此的所有后续调用都需要排队。
*   **OnSyncSettings()** => 生成任务。对此的所有后续调用都需要排队。

*   **OnAutoBackup()** => 同步方法。等待任何其他任务（例如，获取数据/同步设置）完成后再保存。

*   **OnFullBackup()** => 同步方法。手动运行 FetchData() 和 SyncSettings()，等待完成，继续。

***我的问题很简单：我该怎么做？***

这种方法正确吗？

1.  每个事件处理程序都会记住它的最后一个 . 调用时，它将等待其列表中的所有任务完成后再继续。

2.  对于同步方法，它需要等待所有任务（来自每个事件处理程序）

* * *

```
Task _lastEvent1Task;
public void OnEvent1()
{
    // Wait for all tasks to complete before proceeding
    if (_lastEvent1Task!=null)
    _lastEvent1Task.Clear();

    // Spawns new task
    _lastEvent1Task = Task.Factory.StartNew(()=>{ });
}

public void OnEvent3()
{
    // Wait for any running tasks to complete before proceeding
    if (_lastEvent1Task != null) _lastEvent1Task.Wait();
    if (_lastEvent2Task != null) _lastEvent2Task.Wait();
    ...
    // Proceed

} 
```

谢谢！

* * *

**[编辑]**

当 DoSomething() 正在等待并引发 Event1 时？如果 DoSomething() 正在运行并引发事件怎么办？

*事件（）*

*   如果是第一个任务：生成任务并异步执行
*   如果之前的任务仍在运行，则排队/阻塞。临界区。
*   **认为：**
    *   这些事件通常不会多次引发。
    *   UI 应防止用户在仍在运行时引发相同的事件。

*DoSomething()*（调用时）

*   **假设：**事件通知被禁用。
*   **假设：**没有新事件将排队。
*   **预期：**等到所有剩余的排队任务完成后再继续
*   **预期：**是一个同步调用，直到通过执行才返回调用者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:31:54.350

您描述的方法存在并发问题。例如，在对 进行空检查之后`_lastEvent1Task`，其他一些线程可能会设置`_lastEvent1Task`为空，从而导致`NullReferenceException`.

我假设每个任务都应该同步运行，但有些任务不应该阻塞。实现这一点的最佳方法是使用仅使用单个线程的 a，您可以[在此处](http://msdn.microsoft.com/en-us/library/ee789351.aspx)[`TaskScheduler`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)找到示例。

```
var scheduler = new SingleThreadedTaskScheduler();
var taskFactory = new TaskFactory(scheduler); 
```

对于非阻塞方法，您会得到如下内容：

```
public void NonBlockingMethod()
{
    taskFactory
        .StartNew(() => { /* Long-running work. */ })
        .ContinueWith(t => { /* Update UI. */ });
} 
```

对于您获得的阻塞方法：

```
public void BlockingMethod()
{
    taskFactory
        .StartNew(() => { /* Do work. */ })
        .Wait();
} 
```

当你调度任务时，任务调度器将只使用一个线程来调度它们，保证所有任务同步运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:12:14.857

我认为您需要使用[ParExtSamples](http://code.msdn.microsoft.com/ParExtSamples)中的任务调度程序。您通常需要**OnEvents** **()**的OrderedTaskScheduler ，然后等待所有这些计划任务在**DoSomething()**方法中完成，或者简单地将**DoSomething()**方法安排在同一个**OrderedTaskScheduler**上，它只会执行一次任务，计划在它之前，都是完整的。

# php - 使用 PHP 和 MySQL 创建图片选择表单

> ID：12791443
> 
> 赞同：0
> 
> 时间：2012-10-09T00:53:04.893
> 
> 标签：php, mysqli

我试图有一个表单，当您选择单选按钮时，它将选择图像并查询到服务器；现在我不太确定这将如何完成，因为当我选择任何其他选项时，它似乎不起作用。我的表单代码（嗯。重要的部分）

```
<form action="update_image.php" method="post">
<input type="hidden" name="page" value="Index" />
<td><center><input name="image" type="radio" value="images/cartoon/2ofus.png" /></center></td>
<td><center><input name="image" type="radio" value="img src='images/cartoon/3lb_Bruce.png" /></center></td>
<td><center><input name="image" type="radio" value="img src='images/cartoon/bearry.png" /></center></td>
<td><center><input name="image" type="radio" value="img src='images/cartoon/Bemmer.png" /></center></td>
<input type="submit" value="Update" />
   </form> 
```

我的查询如下：

```
$link     = mysqli_connect("$server", "$user", "$pass", "$webdb");
    $page = mysqli_real_escape_string($link, (string) $_POST['page']);
    $content = mysqli_real_escape_string($link, (string) $_POST['image']);
$query = "UPDATE `pages` 
              SET `image`='<$image>' 
              WHERE `name`='$page'";

    mysqli_query($link, $query);
    mysqli_close($link);

?> 
```

它不是世界上最好的，但总的来说，我认为它应该可以稳定运行，但事实并非如此，所以如果有人可能知道为什么它会很棒。谢谢。

第一个是原版。抱歉没有具体说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:09:06.627

一个明显的错误是变量的命名，将单选按钮的值分配给`$content`然后在查询中使用`<$image>`. 那应该只是`$content`没有`<`and `>`。

除此之外，您应该添加错误处理，例如`mysqli_error($link)`会给您最后一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:00:02.163

这是我从你的问题中了解到的。您的主页中有一个特定的图像，其 src 是从数据库中查询的，可以通过您提供的表单进行更新。

将表格更改为：

```
 <form action="update_image.php" method="post">
      <input type="hidden" name="page" value="Index" />
  <td><center><input name="image" type="radio" value="images/cartoon/2ofus.png" /></center>   </td>
  <td><center><input name="image" type="radio" value="images/cartoon/3lb_Bruce.png" /></center></td>
  <td><center><input name="image" type="radio" value="images/cartoon/bearry.png" /></center></td>
 <td><center><input name="image" type="radio" value="images/cartoon/Bemmer.png" /></center></td>
 <input type="submit" value="Update" /> 
```

将查询更改为：

```
 $query = "UPDATE `pages` 
          SET `image`='$image' 
          WHERE `name`='$page'"; 
```

在索引页面中，查询表格页面后，使用图像标签中的结果，如：

```
 print "<img src='{$row['image']}'/>"; 
```

# php - 支持其他语言

> ID：12791451
> 
> 赞同：1
> 
> 时间：2012-10-09T00:53:56.437
> 
> 标签：php

我有一个基于网络的工具，主要用于英语。我刚刚收到一个问题，它是否支持泰语。由于它主要是基于文本的，我需要进行哪些修改才能支持其他语言，特别是泰语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:20:49.420

首先，您需要确保从头到尾使用 UTF8 编码。这意味着在代码、输出、数据库和数据库连接中。对于 PHP，您应该将 mb_internal_encoding 和 mb_http_output 设置为 UTF-8。

您的输出标头应设置为 UTF8。例如：

```
Content-Type:text/html; charset=UTF-8 
```

如果您使用 MySQL，请确保您的表是 UTF-8，您可以使用 ALTER TABLE 转换它们。为了安全起见，您还应该通过在每个连接上运行 SET NAMES UTF8 作为第一个查询来将您的数据库连接设置为 UTF-8。

一旦你有了它，那么你就可以支持大多数语言（即不是中文）。然后，您可以从 HTML 中删除所有文本并将其放入某种查找系统中。一个常见的解决方案是 PHP 中的 gettext 支持。尽管您可能想提出自己的解决方案，可以批量搜索和替换。

虽然完成这一切并非易事，但一旦完成，支持更多语言就很容易了。你只需要翻译你的文字。Bing 提供免费/便宜的翻译服务，而且条款很好。谷歌曾经，但大约一年前改变了他们的政策。谷歌仍然有翻译服务，但这些条款不能满足我的需要。

您的问题是一个大话题，但这些信息应该为您指明正确的方向。

# multithreading - 如何将多线程任务变成单线程任务？

> ID：12791452
> 
> 赞同：0
> 
> 时间：2012-10-09T00:53:58.483
> 
> 标签：multithreading

例如，如果一个项目需要一个日志系统，我们可以启动一个专用的日志线程，它是唯一将记录日志的线程，而不是直接写入日志文件或将日志文件包装在监视器对象中。

如果其他线程想要写日志，它会向这个专用线程发送消息。然后，日志线程可以将日志从其消息队列顺序写入日志文件。

我认为这是一个比多线程设计更好的设计，其中每个例程写入日志都应该使用某种同步方案。

那我说得对吗？您能否提供更多方法/示例将多线程问题转变为简单的单线程问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:57:45.533

> 我认为这是一个比多线程设计更好的设计，其中每个例程写入日志都应该使用某种同步方案。

在专用线程是唯一写入日志的设计中，您也必须使用同步，除了同步访问日志之外，您需要同步对写入日志的线程的生产者-消费者队列的访问。

> 您能否提供更多方法/示例将多线程问题转变为简单的单线程问题？

问题并没有变得更简单：同步的需要并没有消失，只是从一个地方转移到另一个地方。

# jquery - 事件不会在更改时触发，错误在哪里

> ID：12791454
> 
> 赞同：0
> 
> 时间：2012-10-09T00:54:20.967
> 
> 标签：jquery, image, onchange

我有这个 HTML 标记：

```
<img id="image" alt="Eye Lights Liners" title="Eye Lights Liners" src="http://kg.devserver/image/cache/data/llipsplatsqpkgmn-228x228.jpg">

<select name="option[227]" id="option_select">
  <option value=""> --- Please Select --- </option>
  <option data="http://kg.devserver/image/cache/no_image-50x50.jpg" value="19">Black Knight</option>
  <option data="http://kg.devserver/image/cache/no_image-50x50.jpg" value="18">Angel</option>
  <option data="http://kg.devserver/image/cache/no_image-50x50.jpg" value="17">Amorous</option>
  <option data="http://kg.devserver/image/cache/data/42llpkgmn-50x50.jpg" value="20">Vegas Volt</option>
</select> 
```

首先，我不知道我是否可以随意使用“数据”，如果错误，请指出正确的方向。然后解决问题，我想用select#option_select中的数据值更改img#image src。为此，我制作了这个 jQuery 代码：

```
$('#option_select').change(function(e){
    $('#image').attr('src', $(this).attr('data'));
}); 
```

但它不工作。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:56:59.000

您的数据属性无效，`data-arbitraryName`。

```
<option data-src="http://kg.devserver/image/cache/no_image-50x50.jpg" value="19">Black Knight</option> 
```

```
$('#image').attr('src', $(':selected', this).data('src')); 
```

请注意，`this`指的是您的选择元素而不是选项，您可以使用`:selected`选择器。

# php - php 变量通过 jquery ajax 到外部 php

> ID：12791455
> 
> 赞同：0
> 
> 时间：2012-10-09T00:54:46.770
> 
> 标签：php, mysql, jquery

我找到了一个 php/jquery/ajax 脚本，它有一个文本字段，在用户单击要写入 mysql 数据库的外部 php 脚本的输入后发送。 [http://gazpo.com/2011/09/contenteditable/](http://gazpo.com/2011/09/contenteditable/)

缺少的是传递到外部 php 文件中的用户 ID：

```
$sql = "UPDATE customer SET comment = '$content' WHERE userid = 12345 "; 
```

这就是我要做的：我在主文件中捕获用户ID：

```
$s = $_GET['contact']; 
```

从 url 参数。

然后我将它放入主 php 中的数据库选择中：

```
$sql = "select customer from user where userid = $s"; 
```

然后有一些 div

```
<div id="content">
    <div id="editable" contentEditable="true"> 
```

其次是ajax脚本：

```
$(document).ready(function() {  
    $("#save").click(function (e) {         
        var content = $('#editable').html();
        var content_two = $('#editable_two').html();            
        $.ajax({
            url: 'save2.php',
            type: 'POST',
            data: {
                content: content
            }, 
```

在 save.php 中有这样的：

```
$content = $_POST['content']; //get posted data     
$sql = "UPDATE customer SET comment = '$content' WHERE userid = "XXXX" "; 
```

所以：我如何从我的 url 参数中获取 $s 变量到“XXXX”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:47:37.057

非常感谢您的提示。我更改了这些行：

在主 php 文件的 Ajax/Jquery 部分：

```
 $("#save").click(function (e) {         
        var content = $('#editable').html()

var nr = <?php echo $s; ?>;

        $.ajax({
            url: 'save.php',
            type: 'POST',
            data: {
            content: content,

nr: nr

            } 
```

在外部 save.php 我添加了这个：

```
$s = $_POST['nr']; 
```

并且还将变量包含到 $s 到我的 sql 更新部分中：

```
$sql = "UPDATE ADRESSEN SET BEMERKUNG = '$content' WHERE NR = $s "; 
```

这是针对电话软件的，当有人打电话给我时，该软件正在打开带有 main.php 的网页，并且此变量正在使用 sql select 来显示客户信息，然后我在可编辑字段中写了一个推荐，它被写回进入我的sql数据库。

所以！如果有人正在寻找一种方法来通过 $_get 将 url 命令变量路径到 php，然后到 ajax bach 到外部文件中，我希望他谷歌找到这个关键字并显示这个页面来帮助他:)

简而言之：

```
www.url.com/?contact=12345 
```

php catch url 参数：$s = $_GET['contact'];

sql select: $sql = "select user, userid from customer where userid = $s";

在 AJAX/jquery 广告中：

```
var nr = <?php echo $s; ?>; 
```

后来

```
nr: nr 
```

在外部保存 php：

```
$content = $_POST['content']; //get posted data 
```

和

```
$sql = "UPDATE customer SET comment = '$content' WHERE userid = $s "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:19:34.847

将用户 ID 添加到您从 ajax 回调传回 save.php 的数据中。

```
data: {
    content: content,
    userid: <?= $s ?>
} 
```

这是一个猜测，没有看到您的其余代码以及代码实际呈现页面的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:54:16.107

正如其他人在似乎被完全忽略的评论中指出的那样，您确实需要检查一下，因为您构建查询的方式非常不安全。请[阅读有关 SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的信息。

# c - 如何在函数内部进行malloc并在C中返回指针？

> ID：12791456
> 
> 赞同：2
> 
> 时间：2012-10-09T00:54:55.537
> 
> 标签：c, function, malloc

下面是一些psudo，但我正在努力做到这一点。问题如所写，它返回一个空白指针。

```
int testFunction(char *t) {
    int size = 100;
    t = malloc(100 + 1);
    t = <do a bunch of stuff to assign a value>;
    return size;
}

int runIt() {
    char *str = 0;
    int str_size = 0;
    str_size = testFunction(str);
    <at this point, str is blank and unmodified, what's wrong?>
    free(str);
    return 0;
} 
```

如果我有预定义的大小，例如*char str[100] = ""*并且我不尝试 malloc 或释放内存后缀，这会很好。不过，我需要能够使尺寸动态化。

我也试过这个，但似乎以某种方式遇到了损坏的指针。

```
int testFunction(char **t) {
    int size = 100;
    t = malloc(100 + 1);
    t = <do a bunch of stuff to assign a value>;
    return size;
}

int runIt() {
    char *str = 0;
    int str_size = 0;
    str_size = testFunction(&str);
    <at this point, str is blank and unmodified, what's wrong?>
    free(str);
    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T00:57:54.183

您的测试功能有点落后。大小应该是一个*输入*。分配的指针应该是*输出*：

```
char* testFunction(int size) {
    char* p = malloc(size);
    <do a bunch of stuff to assign a value>;
    return p;
}

int runIt() {
    char *str = 0;
    int str_size = 100;
    str = testFunction(str_size);
    <do something>
    free(str);
    return 0;
} 
```

**编辑**

根据评论，也将尺寸作为输出。

```
char* testFunction(int *size) {
    *size = <compute size>;
    char* p = malloc(size);
    <do a bunch of stuff to assign a value>;
    return p;
}

int runIt() {
    char *str = 0;
    int str_size;
    str = testFunction(&str_size);
    <do something>
    free(str);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T00:58:46.943

第二个例子你快到了，但是改变

```
int testFunction(char **t) {
  ...
  t = malloc(100 + 1); 
```

到

```
int testFunction(char **t) {
  ...
  *t = malloc(100 + 1); 
```

关键是您要传入 a `char**`，一个指向指针的指针，因此您希望将 malloc 分配给指向的内容（指针）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-06T11:55:08.793

我也在学习c++。我也有同样的问题。所以在工作中与 c++ pro 交谈后，他建议我做这样的事情

```
int method(char* p) {                 
  if (p) {
    strcpy(p, "I like c++");
  }
  return strlen("I like c++");
}

int main()
{
      char* par = NULL;
      int len = method(par);

      if (len > 0) {
          par = (char*)malloc(len+1);
          memset(par, 0, len + 1);
          method(par);
          cout << "ret : " << par;
      }

      free(par);
} 
```

# command-line - vi 的 .exrc 默认值在命令行上转储了很多

> ID：12791457
> 
> 赞同：0
> 
> 时间：2012-10-09T00:54:56.863
> 
> 标签：command-line, vi

我在 ~/.exrc 中为 vi 指定了默认参数。只是基本的东西

```
:set ts=4
:set autoindent 
```

但是现在，当我启动 vi 时，我看到命令行上打印了很多垃圾。知道我怎么能摆脱它吗？

PS - 默认值工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:29:34.170

现在使用 .vimrc。这完美无缺。供将来参考，[http://blog.ijun.org/2011/03/ultimate-vim-confiruation-vimrc-sample.html](http://blog.ijun.org/2011/03/ultimate-vim-confiruation-vimrc-sample.html)

# php - 如何发送服务激活电子邮件

> ID：12791458
> 
> 赞同：0
> 
> 时间：2012-10-09T00:55:09.203
> 
> 标签：php, email, amazon-ec2

我有一个托管在 Amazon EC2 实例上的 Web 服务，在后端运行 PHP。我的问题如下：

我应该如何最好地为我的服务设计和实施激活电子邮件，以便它们绕过许多类型的垃圾邮件过滤器。我将主要通过电子邮件发送学校/大学的电子邮件地址，因为我的服务是一个教育网站（电子邮件地址如 Bob@harvard.edu 等）

目前我正在通过使用 PHP mail() 并通过我自己的 EC2 托管服务向用户发送电子邮件来实现这一点。这变得越来越成问题，因为许多垃圾邮件过滤器似乎都在使用国产邮件系统。选择付费选项有意义吗？有没有办法做到这一点而不必放下一些严重的$$

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:05:04.417

是的，如果您从自己的邮箱发送邮件，很容易被标记为垃圾邮件。我认为您最好（也是最简单）的选择是选择已建立的电子邮件即服务提供商之一，例如[sendgrid](http://sendgrid.com)、[postmarkapp](http://postmarkapp.com)或[mailjet](http://mailjet.com)

他们都有一个（慷慨的）免费层和良好的 PHP 库。您可以查看此[交易电子邮件提供商](http://socialcompare.com/en/comparison/transactional-emailing-providers-mailjet-sendgrid-critsend)的比较以了解更多信息

**免责声明**：我是 mailjet 的开发人员之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:46:35.210

**披露：我是 AlphaMail 背后的开发者之一**

我最近回答[了一个类似的问题](https://stackoverflow.com/a/12802506/340736)（包括 PHP 示例）。我认为您应该做的是使用事务性电子邮件服务，例如：

*   [阿尔法邮件](http://comfirm.se/alpha-mail/)
*   山魈
*   发送网格

同时，如果尚未完成，请将 SPF 和 DKIM DNS 记录添加到您的域。您的激活电子邮件将在垃圾邮件过滤器旁边闪现。

# python - 打印不在字符串中的字母

> ID：12791463
> 
> 赞同：3
> 
> 时间：2012-10-09T00:55:37.900
> 
> 标签：python, boolean

我正在尝试查看一个单词或句子是否具有字母表中的每个字母，但我无法让它打印所有不在句子/单词中的字母。

```
alpha = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t'
,'u','v','w','x','y','z']
x = raw_input('')
counter  = 0
counter2 = 0
for i in range(len(x))
    counter += 1
    for o in range(26):
        counter2 += 1
        if alpha[counter2] not in x[counter]: 
```

我被困在那里......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T01:06:39.077

```
alphabet = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t'
,'u','v','w','x','y','z'}
input_chars = set(raw_input())
print alphabet - input_chars 
```

我们所做的只是设置字母字符集和输入中的字符集之间的差异。请注意，差异操作可以将任何可迭代的操作作为第二个操作数，因此如果我们不想，我们甚至不必将输入转换为集合，尽管这会稍微加快差异。此外，有一个内置字符串可以为我们提供 ascii 字母，因此我们可以这样做：

```
import string
print set(string.ascii_lowercase) - raw_input() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T01:00:26.863

使用`set difference`：

```
import string
x=raw_input()
not_found=set(string.ascii_lowercase) - set("".join(x.split()))
print (list(not_found)) 
```

**输出：**

```
>>> 
the quick brown fox
['a', 'd', 'g', 'j', 'm', 'l', 'p', 's', 'v', 'y', 'z'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T01:08:10.607

由于您已经在两个字符串上进行迭代，因此无需使用`counter`and `counter2`。

你快到了。Python 使列表操作变得简单，因此无需使用索引逐个元素地迭代列表：

```
alphabet = 'abcdefghijklmnopqrstuvwxyz'
sentence = raw_input('Enter a sentence: ').lower()  # Because 'a' != 'A'

letters = []

for letter in sentence:
    if letter in alphabet and letter not in letters:
        letters.append(letter)

print(letters) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T00:58:04.360

容易得多：

```
 import string
 x = raw_input()
 print [c for c in string.ascii_lowercase if c not in x] 
```

# redirect - 如何使网络服务器上的文件指向 IP 地址

> ID：12791466
> 
> 赞同：-1
> 
> 时间：2012-10-09T00:55:54.243
> 
> 标签：redirect, webserver, ip-address, minecraft, tcp-ip

我希望能够将 www.mydomain.com/file.extenstion 输入到诸如 minecraft 和其他 tcp/ip 连接之类的东西中，它指向我的 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:00:12.107

您可以拥有一个包含 IP 地址的文件，但您不能“使文件指向 IP 地址”（无论如何我的世界都不能使用这种方式）。您必须使用子域。

# hibernate - Hibernate Envers：在查询中使用“in”

> ID：12791478
> 
> 赞同：0
> 
> 时间：2012-10-09T00:58:11.233
> 
> 标签：hibernate, hibernate-envers

我有三个表`A`，`B`和`AB`。AB表是关系表。因此`AB_AUD`表具有`abID`PK 和`aId`, `bID`, 修订信息。我有“bIds”列表，并希望`AB_AUD`使用该列表从表中检索审计数据。我的代码块是

```
AuditQuery query = auditReader.createQuery()
    .forRevisionsOfEntity(AB.class, false, true)
    .add(AuditEntity.property("bId").in(bIds))
    .addOrder(AuditEntity.revisionNumber().desc()); 
```

**这会引发异常：无法解析 bId 的属性**。甚至我尝试将与 single 等同起来以检索一个抛出相同`bId`的单曲的审计数据。我想知道代码中是否有任何错误。现在我正在做一个 for 循环来检索这样的数据：`bId``exception`

```
for (B b : listofB's)
{
    AuditQuery query = auditReader.createQuery()
        .forRevisionsOfEntity(AB.class, false, true)
        .add(AuditEntity.property("b").eq(b))
        .addOrder(AuditEntity.revisionNumber().desc());
} 
```

每个 B 都运行`sql query`，这不是一个好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:00:52.187

如果您的属性名称是`b`您`bId`在查询中使用的原因。更新查询以使用`b`如下：

```
 .forRevisionsOfEntity(AB.class, false, true)
             .add(AuditEntity.property("b").in(istofB's))
             .addOrder(AuditEntity.revisionNumber().desc()); 
```

这应该有效。

# c# - 如何删除代码分析警告 CA1006？

> ID：12791479
> 
> 赞同：1
> 
> 时间：2012-10-09T00:58:11.203
> 
> 标签：c#, entity-framework, repository-pattern

> **可能重复：**
> [替代 Expression<Func<T>> 类型的嵌套类型](https://stackoverflow.com/questions/3441563/alternative-to-nested-type-of-type-expressionfunct)

使用从 MSDN 文章中收集的 Facade / Repository 中的方法，我产生了：

```
public virtual IEnumerable<TEntity> Fetch(
    Expression<Func<TEntity, bool>> filter,
    Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy,
    string includeProperties)
{
    IQueryable<TEntity> query = this.DbContext.Set<TEntity>();

    if (filter != null)
    {
        query = query.Where(filter);
    }

    if (!string.IsNullOrEmpty(includeProperties))
    {
        foreach (var includeProperty in includeProperties
            .Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
        {
            query = query.Include(includeProperty);
        }
    }

    return orderBy == null 
        ? query 
        : orderBy(query);
} 
```

代码分析生成 2 条警告，如下所示：

> CA1006：Microsoft.Design：考虑一个`MyType<TDbContext, TEntity>.Fetch(Expression<Func<TEntity, bool>>, Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>>, string)`“不嵌套泛型类型”`Expression<Func<TEntity, bool>>`的设计。
> 
> CA1006：Microsoft.Design：考虑一个`MyType<TDbContext, TEntity>.Fetch(Expression<Func<TEntity, bool>>, Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>>, string)`“不嵌套泛型类型”`Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>>`的设计。

现在，我知道它们只是警告，我可以自由地压制它们（并且可能会因为它们在这种情况下显得过于迂腐）。但是，出于兴趣，是否有一种可能的设计可以完成与此方法相同的操作而不会产生代码分析警告？

理查德

# php - HTAccess 重定向以删除文件

> ID：12791484
> 
> 赞同：0
> 
> 时间：2012-10-09T00:59:26.943
> 
> 标签：php, .htaccess, url, redirect, url-rewriting

我的身边居住在

```
www.domain.com/Folder/Front.php 
```

所以在文件夹*里面*我有一个 .htaccess 文件，它只有一行读取：

```
DirectoryIndex Front.php 
```

所以输入`www.domain.com/Folder`与`www.domain.com/Folder/Front.php`. 但是我想*重定向* `www.domain.com/Folder/Front.php` **到** `www.domain.com/Folder`。我知道我必须有类似的东西：

```
RewriteEngine On
RewriteBase / 
```

但我不知道 Cond 或 Rule 是什么。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:40:02.140

我会在 Front.php 的顶部创建一个 301 重定向，以查看 URI 是否包含`Front.php`. 如果是，它会将用户重定向到根文件夹。301 重定向还将确保任何机器人也将定向到基本目录。

**放在 Front.php 文件的顶部**

```
if(strpos($_SERVER['REQUEST_URI'],'Front.php' === FALSE):

   header("HTTP/1.1 301 Moved Permanently");
   header("Location: http://www.domain.com/Folder/");

else:

   // Rest of page goes here

endif; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:52:46.437

将它放在根级别的 .htaccess 中，它将任何请求重定向到 AnyFolder/Front.php 到 AnyFolder/

```
RewriteRule ^(.+)\/Front.php$ $1/ [R=301,L] 
```

# haskell - 使用莎士比亚文本和外部文件

> ID：12791491
> 
> 赞同：3
> 
> 时间：2012-10-09T01:00:32.357
> 
> 标签：haskell, yesod, template-haskell, hamlet, shakespeare-text

如何将以下示例转换为使用外部文件而不是嵌入的惰性文本准引号？

```
{-# LANGUAGE QuasiQuotes, OverloadedStrings #-}
import Text.Shakespeare.Text
import qualified Data.Text.Lazy.IO as TLIO
import Data.Text (Text)
import Control.Monad (forM_)

data Item = Item
    { itemName :: Text
    , itemQty :: Int
    }

items :: [Item]
items =
    [ Item "apples" 5
    , Item "bananas" 10
    ]

main :: IO ()
main = forM_ items $ \item -> TLIO.putStrLn
    [lt|You have #{show $ itemQty item} #{itemName item}.|] 
```

这是来自[yesod 在线书籍](http://www.yesodweb.com/book/shakespearean-templates)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T03:33:54.073

您可以`textFile`按照`$(textFile "some-file")`.

# php - 视频 mimetype .mpg

> ID：12791492
> 
> 赞同：2
> 
> 时间：2012-07-28T06:59:18.117
> 
> 标签：php, centos, mime-types

我正在使用 php 函数 finfo_file 来确定 mimetype，它会将 .mpg 文件报告为 application/octet-stream 而不是 video/mpeg。

我正在使用 CentOS，在 /etc/mime.types 我看到：

```
# grep 'mpg' /etc/mime.types 
audio/mpeg          mpga mp2 mp3
video/mpeg          mpeg mpg mpe 
```

下面更新的是示例代码：

```
$file = '/tmp/sample.mpg';
$fi = new finfo( FILEINFO_MIME_TYPE );
echo $fi->file( $file ); 
```

输出：

```
application/octet-stream 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:52:36.943

这些 PHP 函数依赖于提供一个*魔术文件*，该文件提供数据来分析文件的内容以确定其类型。在 Unix 系统上，此功能通过`file`命令公开。

它从来没有看过`/etc/mime.types`。

由于您没有在构造函数中指定魔术文件的路径，因此 PHP`/usr/share/misc/magic`默认使用。在 CentOS 中，此文件由`file-libs`软件包提供。如果包丢失或损坏，您可能会得到意想不到的结果。

# node.js - Nodejs 环境变量 Fedora

> ID：12791499
> 
> 赞同：0
> 
> 时间：2012-10-09T01:01:20.793
> 
> 标签：node.js, fedora

我正在尝试对 nodejs 做一些事情，但我收到了这个错误

```
 /usr/bin/env: node: No such file or directory 
```

我现在这个错误是针对nodejs的，它在fedora上的调用方式与'nodejs'相同，我的问题是我如何才能仅为'node'更改它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:35:32.637

Are you sure nodejs is installed? It looks like it's a script or shell trying to launch node but not finding the executable in your path.

Try running "node --version" from a terminal, does that work?

If not, make sure you have nodejs installed. Instructions for Fedora can be found here [https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)

> sudo yum localinstall --nogpgcheck [http://nodejs.tchol.org/repocfg/fedora/nodejs-stable-release.noarch.rpm](http://nodejs.tchol.org/repocfg/fedora/nodejs-stable-release.noarch.rpm)
> 
> sudo yum install nodejs-compat-symlinks npm

# python - 为什么初始化列表列表的代码显然将列表链接在一起？

> ID：12791501
> 
> 赞同：234
> 
> 时间：2012-10-09T01:02:00.070
> 
> 标签：python, list

我打算初始化一个长度为 n 的列表列表。

```
x = [[]] * n 
```

但是，这以某种方式将列表链接在一起。

```
>>> x = [[]] * 3
>>> x[1].append(0)
>>> x
[[0], [0], [0]] 
```

我希望有类似的东西：

```
[[], [0], []] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2012-10-09T01:03:12.927

问题是它们在内存中都是完全相同的列表。当您使用该`[x]*n`语法时，您得到的是一个包含`n`许多`x`对象的列表，但它们都是对同一个对象的引用。它们不是不同的实例，而是`n`对同一个实例的引用。

要列出 3 个不同的列表，请执行以下操作：

```
x = [[] for i in range(3)] 
```

这为您提供了 3 个单独的实例`[]`，这就是您想要的

`[[]]*n`类似于

```
l = []
x = []
for i in range(n):
    x.append(l) 
```

虽然`[[] for i in range(3)]`类似于：

```
x = []
for i in range(n):
    x.append([])   # appending a new list! 
```

* * *

```
In [20]: x = [[]] * 4

In [21]: [id(i) for i in x]
Out[21]: [164363948, 164363948, 164363948, 164363948] # same id()'s for each list,i.e same object

In [22]: x=[[] for i in range(4)]

In [23]: [id(i) for i in x]
Out[23]: [164382060, 164364140, 164363628, 164381292] #different id(), i.e unique objects this time 
```

# spring - Maven 和 Spring - SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”

> ID：12791502
> 
> 赞同：2
> 
> 时间：2012-10-09T01:02:00.317
> 
> 标签：spring, maven, slf4j

我正在构建一个使用 maven 进行依赖管理的新 Spring Web 应用程序。我正在尝试使用 slf4j-api 和 slf4j-simple。我将它们添加到我的 pom 文件中，但是当我构建时出现错误

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

这表明 slf4j 没有实现，但是，slf4j-simple 包含在我的 pom.xml 中。下面是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>foo.bar</groupId>
  <artifactId>name</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>name</name>

    <properties>
        <org.springframework.version>3.1.0.RELEASE</org.springframework.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
             <exclusions>
                  <exclusion>
                      <groupId>commons-logging</groupId>
                      <artifactId>commons-logging</artifactId>
                  </exclusion>
             </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
             <version>3.6.3.Final</version>
        </dependency>
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-api</artifactId>
          <version>1.6.6</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.6.6</version>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.jtds</groupId>
            <artifactId>jtds</artifactId>
            <version>1.2.4</version>
        </dependency>
    </dependencies>
    <build>
        <finalName>ROOT</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

下面是我的 Maven 依赖树：

```
[INFO] foo.bar:name:war:0.0.1-SNAPSHOT
[INFO] +- org.springframework:spring-context:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.1.0.RELEASE:compile
[INFO] |  |  \- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-core:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-expression:jar:3.1.0.RELEASE:compile
[INFO] |  \- org.springframework:spring-asm:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-webmvc:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-context-support:jar:3.1.0.RELEASE:compile
[INFO] |  \- org.springframework:spring-web:jar:3.1.0.RELEASE:compile
[INFO] +- jstl:jstl:jar:1.2:compile
[INFO] +- org.hibernate:hibernate-core:jar:3.6.3.Final:compile
[INFO] |  +- antlr:antlr:jar:2.7.6:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.1:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  +- org.hibernate:hibernate-commons-annotations:jar:3.2.0.Final:compile
[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.0.Final:compile
[INFO] |  \- javax.transaction:jta:jar:1.1:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.6.6:compile
[INFO] +- org.slf4j:slf4j-simple:jar:1.6.6:compile
[INFO] \- net.sourceforge.jtds:jtds:jar:1.2.4:compile 
```

关于什么可能是错误的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-23T15:51:16.457

我遇到了类似的问题。更糟糕的是，Hibernate 没有显示异常的完整堆栈跟踪。

我正在使用 Eclipse Luna 并且正在开发一个 Maven 项目。

在阅读了与上述问题有关的各种答案后，在我使用之前没有任何帮助：' **Slf4j Maven Plugin Log** '：

“一个委托给 maven-plugin 日志工具包的 SLF4J 实现。当 maven-plugin 依赖项使用 slf4j 时特别有用，因为它们的日志不能作为 maven-plugin 日志使用。”

来源： http: [//mvnrepository.com/artifact/com.googlecode.slf4j-maven-plugin-log/slf4j-maven-plugin-log/1.0.0](http://mvnrepository.com/artifact/com.googlecode.slf4j-maven-plugin-log/slf4j-maven-plugin-log/1.0.0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:07:21.397

显然这是 m2eclipse 插件中的一个错误。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-26T02:41:32.860

今天早些时候在我寻找答案时发现了这个。不久之后，我终于找到了对我有用的答案。[Spring在幕后记录](https://stackoverflow.com/questions/24658384/spring-behind-the-scenes-logging)中为我回答了这个问题

它的要点是将以下内容添加到您的 pom.xml 中：

```
<dependency> 
 <groupId>org.apache.logging.log4j</groupId>
 <artifactId>log4j-slf4j-impl</artifactId>
 <version>2.1</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:07:43.497

我们对 log4j jars 也有类似的问题。

```
 CLASSPATH="default/lib/log4j-1.2.16.jar"
  CLASSPATH="$CLASSPATH:$JAVA_CLASSPATH:$APP_CLASSPATH" 
```

已添加到启动脚本中以使其首先被拾取。原来我们是从父模块继承另一个版本的 jar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T09:22:48.283

我在我的环境中尝试了您的确切 POM，一切正常 - 没有错误。这让我相信它是你的环境。它肯定会注意 POM，因为您的 WAR 文件已正确创建。所以你可以看看其他一些东西：

1.  你确定你在类路径上没有不同版本的 SLF4J 吗？Maven 在构建时倾向于只选择一个，因此可能会导致问题。
2.  我以前没有使用过 Spring Tool Suite (STS)，但也许这会导致您的问题，您是否尝试过`mvn clean package`在命令行上运行？我知道我以前在 Eclipse 中看到过类似这样的问题，我们在类路径上有另一个版本的 SLF4J，并且在 Eclipse 中构建时 mvn 会失败。

# imagemagick - 如何从保留帧尺寸的 GIF 文件中提取帧

> ID：12791505
> 
> 赞同：62
> 
> 时间：2012-10-09T01:02:17.343
> 
> 标签：imagemagick, gif

我有以下 GIF 图像文件：

![原始gif图像](../Images/30b9e776965658a8c3fc8538f6de88df.png)

我想使用这个 imagemagick 命令提取它的帧（使用 PGM 输出格式）：

```
convert brocoli.gif out%05d.pgm 
```

但是每个框架都有不同的大小。

如何在保留原始 gif 文件大小的同时提取其帧？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-10-10T20:45:39.163

使用`-coalesce`选项：

`convert -coalesce brocoli.gif out%05d.pgm`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-29T11:00:58.233

您可以使用图形魔术：

`gm convert Test.gif +adjoin Test_image%3d.png`

或者

`gm convert Test.gif -coalesce +adjoin Test_image%3d.png`.

# .htaccess - .htaccess 重写照片规则

> ID：12791507
> 
> 赞同：0
> 
> 时间：2012-10-09T01:02:46.603
> 
> 标签：.htaccess, url-rewriting

我有这样的网址

```
http://www.example.com/photo?id=196 
```

我想将此更改为其他 URL。类似的东西。

```
http://www.example.com/test-article-by-me 
```

“我的测试文章”是文章的标题，我希望它显示在 url 中。

谁能指导我如何做到这一点？等待听到你们的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:09:55.093

您不能单独使用 .htaccess 来执行此操作，因为您的 .htaccess 文件不知道 id 和页面标题之间的关系

但是，*可以*将您的 .htaccess 设置为重新指向

```
http://www.example.com/test-article-by-me 
```

到

```
http://www.example.com/photo?title=test-article-by-me 
```

在 .htaccess 中使用类似于以下行的内容

```
RewriteRule ^/([a-z0-9\-]*)$ /?title=$1 
```

但是您的网站代码必须设置为期望`title`查询字符串参数而不是`id`参数

# android - Android：自动完成文本视图

> ID：12791508
> 
> 赞同：1
> 
> 时间：2012-10-09T01:03:04.820
> 
> 标签：android, autocompletetextview

我正在开发一个使用 Google Places 自动完成功能的 android 应用程序。

当我从自动完成列表视图中选择一个项目时，整个字符串显示在自动完成文本视图中，当它不适合一行时，文本视图会自动变大以适应整个字符串。

我不希望这种情况发生，我希望文本视图保持相同的大小，如果看不到整个字符串也没关系。我怎样才能做到这一点？？

关于自动完成文本视图的另一个问题。我需要在文本视图旁边有一个按钮，以便用户可以提交搜索。建议的列表视图仅与自动完成文本视图一样宽，它不会填满屏幕的整个宽度，因为在文本视图的右侧有一个按钮。我可以让建议列表视图填满屏幕的宽度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:59:26.220

1.  我`android:singleLine`参考[singleLine](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3asingleLine)。
2.  如果你想提出建议`listview`，你可以使用这些属性`android:dropDownWidth="xx dp"`参考这里[android:dropDownWidth](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android%3adropDownWidth)。您应该在运行时计算屏幕尺寸以获得正确的值。

其他属性可以帮助您`android:dropDownHorizontalOffset` [在此处对齐下拉列表视图](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android%3adropDownHorizontalOffset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:08:39.810

试试[maxWidth](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3amaxWidth)

```
android:maxWidth

Makes the TextView be at most this many pixels wide.

Must be a dimension value, which is a floating point number appended with a unit such
as "14.5sp". Available units are: px (pixels), dp (density-independent pixels), sp 
(scaled pixels based on preferred font size), in (inches), mm (millimeters).

This may also be a reference to a resource (in the form "@[package:]type:name") or
theme attribute (in the form "?[package:][type:]name") containing a value of this type.

This corresponds to the global attribute resource symbol maxWidth.

Related Methods

setMaxWidth(int) 
```

编辑 - 您可以使用[android:imeOptions](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aimeOptions)将`actionGo`“开始”按钮添加到弹出键盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:50:35.210

> 我希望文本视图保持相同的大小，如果看不到整个字符串也没关系

您可以`android:singleLine`参考[singleLine](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3asingleLine)使用。

> 我可以让建议列表视图填满屏幕的宽度吗？

不要认为你可以通过使用 AutoCompleteTextView。您可以寻求用户：**Bill Gary**的建议，通过添加一个`android:imeOptions="actionGo"`，您可以`Go`在软键盘上拥有一个按钮。然后，在您的 Activity 上，添加`OnEditorActionListener`到您的 AutoCompleteTextView ：

```
 actv.setOnEditorActionListener(new OnEditorActionListener() {

        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            // TODO Auto-generated method stub
            if (actionId == EditorInfo.IME_ACTION_GO) {
                Toast.makeText(MainActivity.this, "GO", Toast.LENGTH_SHORT).show();
                return true;
            }
            return false;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-23T15:33:55.360

```
AutoCompleteTextView a=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView);
String s[]={"Monday","Tuesday","Wednesday","Months"};
ArrayAdapter<String> adapter=new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_list_item_1,s);
a.setAdapter(adapter); 
```

# java - 在 Java 中使用超类处理异常

> ID：12791514
> 
> 赞同：1
> 
> 时间：2012-10-09T01:03:32.737
> 
> 标签：java, exception, inheritance

对于家庭作业，我必须开发一个异常代码：

“使用继承创建异常的超类调用`ExceptionA`，以及异常的两个子类调用`ExceptionB`and `ExceptionC`，where `ExceptionB extends ExceptionA`，and `ExceptionC extends ExceptionB`。开发一个程序来证明该类型的catch块可以捕获and的`ExceptionA`异常”。`ExceptionB``ExceptionC`

我不明白该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T01:27:04.200

假装这是一个无性繁殖事物的家族，称为异常。

![家谱](../Images/ceb9086cc39b7f3f8f6c46738981986d.png)

异常 C 是异常 B 的儿子/女儿（我什至叫他们什么），异常 B 是异常 A 的儿子/女儿，异常 A 是异常的儿子/女儿。异常C继承了异常B的基因，继承了异常A的基因，等等。

你的老师希望你做的是表明你可以使用与“捕捉”异常 A 相同的方法来“捕捉”异常 C。因此，您将使用 try/catch 语句和 throw 语句（生成异常）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T01:18:08.637

这是一个非常简单的代码。你可以进一步提高你的学习。

创建异常`ExceptionA`并定义 require 构造函数和方法：

```
 public class ExceptionA extends Exception {

        public ExceptionA(String message){
            super(message);
        }
    } 
```

创建异常 `ExceptionB` 并定义 require 构造函数和方法：

```
 public class ExceptionB extends ExceptionA {

        public ExceptionB(String message){
            super(message);
        }
    } 
```

创建异常 `ExceptionC` 并定义 require 构造函数和方法：

```
 public class ExceptionC extends ExceptionB {

        public ExceptionC(String message){
            super(message);
        }
    } 
```

创建`TestException`捕获`ExceptionB`和`ExceptionC`使用的类，`ExceptionA`如下所示：

```
 public class TestException {

        public static void main(String[] args){

            try{
                getExceptionB();
            }catch(ExceptionA ea){
                ea.printStackTrace();
            }

            try{
                getExceptionC();
            }catch(ExceptionA ea){
                ea.printStackTrace();
            }

        }

        public static void  getExceptionB() throws ExceptionB{
            throw new ExceptionB("Exception B");
        }

        public static void  getExceptionC() throws ExceptionC{
            throw new ExceptionC("Exception C");
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:10:58.643

我希望它是：使用继承来创建一个名为 ExceptionA 的 Exception 子类。

所以，来帮助你。

异常->异常A->异常B->异常C

所以，如果我想创建一个 Object 类型的子类，那么： public class ObjectA extends Object { // 在这里放新方法 }

因此，请尝试创建您的子类，然后在遇到困难时显示一些代码。

这可能会对您有所帮助，但请不要将答案复制为您的作业：

[如何在 Java 中定义自定义异常类，最简单的方法？](https://stackoverflow.com/questions/3776327/how-to-define-custom-exception-class-in-java-the-easiest-way)

# iphone - 粒子设计器设置背景图像

> ID：12791516
> 
> 赞同：0
> 
> 时间：2012-10-09T01:04:09.277
> 
> 标签：iphone, opengl-es, particles

首先，我是新手 iPhone 开发者。我正在使用从粒子设计器（.pex 文件）（71squared）创建的粒子。我的应用程序不是 cocos2d。如何设置背景图像。我的应用程序在背景中有一个图像，并添加了这个带有粒子设计 pex 文件的粒子视图作为子视图。现在，这个粒子视图隐藏了带有 pex 文件黑色背景的背景图像。我在创建它时尝试将背景放入 pex 文件。但这不包括在内。我试图将背景图像放入我为加载此 pex 文件而创建的视图中，但没有帮助。我试图将背景图像放在我正在加载此视图的粒子视图中，但这没有帮助。还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:02:46.553

转到此处并下载 zip 以查看示例

[https://github.com/icanzilb/UIEffectDesignerView](https://github.com/icanzilb/UIEffectDesignerView)

# ruby-on-rails - Rails：belongs_to & accept_nested_attributes_for，多态

> ID：12791518
> 
> 赞同：2
> 
> 时间：2012-10-09T01:04:32.870
> 
> 标签：ruby-on-rails, ruby

我正在做我的第一个 Rails 项目，我有以下模型关系：

```
class Profile < ActiveRecord::Base
  belongs_to :identifiable, polymorphic: true
  accepts_nested_attributes_for :students

class Student < ActiveRecord::Base
  has_one :profile, as: :identifiable
  attr_accessible :profile 
```

相关的控制器是：

```
class StudentsController < ApplicationController
  def new
    @student = Student.new
  end

  def create
    @student = Student.new(params[:student])
    if @student.save
      redirect_to root_path
    else
      render 'new'
   end
  end
end 
```

和

```
class ProfilesController < ApplicationController
  def new
    @profile = Profile.new
  end

 def create
    @profile = Profile.new(params[:profile])
    @profile.save
 end
end 
```

我正在尝试做的是`Student`使用以下形式创建一个新的，它位于`students\new.html.erb`：

```
<h1>Create a new Student Account</h1>
<div class="row">
  <div class="span6 offset3">
  <%= form_for(@student) do |f| %>
    <%= render 'shared/error_messages' %>
    <%= f.fields_for :profile, @profile do |builder| %>
      <%= builder.label :name %>
      <%= builder.text_field :name %>

      <%= builder.label :email %>
      <%= builder.text_field :email %>

      <%= builder.label :password %>
      <%= builder.password_field :password %>

      <%= builder.label :password_confirmation, "Confirmation" %>
      <%= builder.password_field :password_confirmation %>
    <% end %>
  </div>
</div>
  <p><%= f.submit "Submit", class: "btn btn-large btn-primary" %></p>
<% end %> 
```

当我尝试提交表单时收到以下错误消息：`No association found for name 'students'. Has it been defined yet?`我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T01:49:27.317

为了让一个模型接受另一个模型的嵌套属性，需要声明与另一个模型的关联。在`Profile`你有`accepts_nested_attributes_for :students`，但没有定义相应的关联（例如`has_many :students`），这就是你得到那个特定错误的原因。但是，在您的情况下，这种关联是不正确的。

通常，如果模型`A`接受模型的嵌套属性，则为`B`或。在你的情况下，你有. 更好的设计是`A` `has_many` `B``A` `has_one` `B``A` `belongs_to` `B`

```
class Profile < ActiveRecord::Base
  belongs_to :identifiable, polymorphic: true

class Student < ActiveRecord::Base
  attr_accessible :profile_attributes
  has_one :profile, as: :identifiable
  accepts_nested_attributes_for :profile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:07:43.373

你的学生应该是单数吗？IE：`accepts_nested_attributes_for :student`

编辑：此外，如果学生 has_one 个人资料，并且学生表格包含 fields_for 调用（我认为......），您的学生应该接受个人资料的嵌套属性

# php - php 反向图像createfromstring

> ID：12791522
> 
> 赞同：0
> 
> 时间：2012-10-09T01:05:24.177
> 
> 标签：php, binary

有没有办法将 jpg 转换为字符串，反转`imagecreatefromstring`？
我必须与需要图像二进制文件的服务器通信，我看到很多 jpg 到二进制文件，但反之则不然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:13:13.980

在这里只是在黑暗中拍摄......没有真正的经验，只是我在查看一些文档后的想法......

我在文档中看到[`imagecreatefromstring()`](http://php.net/manual/en/function.imagecreatefromstring.php)一个示例，其中给出了将 base64 编码的字符串转换为图像的示例。以这个例子为例并翻转它可能正是您正在寻找的。

```
$image = file_get_contents('image_file.jpg');
$imageString = base64_encode($image); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:19:22.083

`imagecreatefromstring`获取一个包含图像二进制数据的字符串并将其转换为 gd 图像资源，以便您可以使用 gd 图像库对其进行操作。从字面上看，它的“反向”是 ，它将`imagejpeg`gd 图像资源保存到 jpeg 图像。

我猜你真正想要的只是初始字符串，它包含图像的二进制数据。IE：

1.  `$imageString = file_get_contents('image.jpg');`
2.  `$gd = imagecreatefromstring($imageString);`

只需跳过第 2 步。

# jquery - JQuery 框架（非移动）和移动浏览器支持

> ID：12791524
> 
> 赞同：0
> 
> 时间：2012-10-09T01:05:31.950
> 
> 标签：jquery, browser, cross-browser

> **可能重复：**
> [jquery 和移动浏览器兼容性？](https://stackoverflow.com/questions/2233292/jquery-and-mobile-browser-compatiblity)

我已经看到了支持 JQuery 的浏览器，但我试图找出 JQuery 的所有者是否评估过它支持哪些类型的**移动**浏览器，其中包括常见的浏览器（FireFox 移动、Chrome 移动、Opera Mobile、等）和内部浏览器。请注意，我**不是**在谈论 JQuery Mobile，而只是在谈论 JQuery 框架。

一切似乎都只指向 JQuery Mobile，所以我在搜索中得到了很多误报。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:33:18.540

我不完全确定您指的是 jQuery 库（核心）还是 jQuery UI？

如果您指的是库（核心），那么您会发现它几乎 100% 受到所有移动浏览器的支持。我这么说的原因是，除了为现有的 JS 对象提供包装器方法之外，jQuery 并没有做太多的事情。jQuery 功能检测并尝试一个方法，如果它失败则恢复到另一个方法，如果另一个方法失败，依此类推。此外，当我说“几乎”时，您可能会发现一些关于它如何测量偏移量、触发事件（鼠标事件，如悬停是显而易见的事件）的特殊性。

所以总而言之，你可能不会找到一个说明 jQuery 支持哪些移动浏览器的魔法表，因为简短的答案是……所有这些，而长答案是，是的，你可能会遇到一些小特性，尽管人们会期望它们都不是关键的。

# compilation - 未安装卡的 AMD 和 NVIDIA OpenCL 内核的离线编译

> ID：12791527
> 
> 赞同：1
> 
> 时间：2012-10-09T01:05:57.263
> 
> 标签：compilation, opencl, nvidia, amd-processor

我试图找出一种在不安装显卡的情况下执行 OpenCL 内核离线编译的方法。我已经安装了 SDK。

有没有人在没有为 NVIDIA 或 AMD 中的任何一个安装显卡的情况下编译 OpenCL 内核的经验。

```
I had asked a similar question on AMD forums 
(http://devgurus.amd.com/message/1284379). 
NVIDIA forums for long are in accessible so couldn't get any help from there. 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T15:36:51.533

AMD 有一个 OpenCL 扩展，用于为系统上不存在的设备编译二进制文件。该扩展名为 cl_amd_offline_devices。在创建上下文时传递属性 CL_CONTEXT_OFFLINE_DEVICES_AMD 并报告所有支持 AMD 的设备，并可用于创建二进制文件，就好像它们存在于系统上一样。

[在http://developer.amd.com/tools/hc/AMDAPPSDK/assets/AMD_Accelerated_Parallel_Processing_OpenCL_Programming_Guide.pdf](http://developer.amd.com/tools/hc/AMDAPPSDK/assets/AMD_Accelerated_Parallel_Processing_OpenCL_Programming_Guide.pdf)查看他们的 OpenCL 编程指南以获取更多信息

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T17:07:11.353

No need to graphic card, you can compile OpenCL programs for CPU too. If you have Intel or AMD CPU this idea works. Download latest OpenCL SDK from corresponding manufacturer website and compile OpenCL program: [Intel OpenCL SDK](http://software.intel.com/en-us/vcsource/tools/opencl-sdk) [AMD APP](http://developer.amd.com/tools/hc/AMDAPPSDK/downloads/Pages/default.aspx)

# programming-languages - 编写程序语言

> ID：12791531
> 
> 赞同：0
> 
> 时间：2012-10-09T01:06:49.800
> 
> 标签：programming-languages

> **可能重复：**
> [编写编程语言的建议？](https://stackoverflow.com/questions/453870/suggestions-for-writing-a-programming-language)

我用过很多编程语言，经过几年的经验，我终于决定和朋友一起做一门语言。我知道这是一项不适合胆小的人的任务。我们致力于这项任务，并将确保完成这项任务。

现在我想首先问：编写编程语言的步骤是什么？我们应该从什么开始（例如解析器）？

任何答案都有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:11:20.967

如果这是你的第一语言，那么同时处理它的所有部分，从一个迷你语言规范开始，逐个特性地扩展它。除非它是一种特定于领域的语言，否则您应该使用与您尝试实现的语言接近的语言，以便稍后您可以编写转换工具来获得编译器的引导版本。

# javascript - 显示类似标签的内容

> ID：12791533
> 
> 赞同：1
> 
> 时间：2012-10-09T01:07:16.180
> 
> 标签：javascript, jquery, css

我正在尝试在我的页面上创建一个部分，允许用户将鼠标悬停或单击类似标签的标题，并使其内容滚动显示在下面。

我的意思的示例显示在此页面上：[http](http://www.iflexion.com/) ://www.iflexion.com/如果您查看其主滑块下方的部分，您可以将鼠标悬停在“解决方案”、“服务”等上，然后内容将显示。

我很想找到一个关于如何完成此操作的示例教程，但我不确切知道函数调用什么来知道要查找的内容。我看过一些选项卡显示，比如 JQuery 的，但它并不完全像这个。

如果他们使用了我可以查找的东西，或者这种类型的功能被称为什么以便我可以查找更准确的示例，任何人都有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:25:45.730

你可以从这个开始：http: [//blogs.msdn.com/b/thebeebs/archive/2010/11/10/how-to-create-an-awesome-scrolling-navigation-using-jquery.aspx](http://blogs.msdn.com/b/thebeebs/archive/2010/11/10/how-to-create-an-awesome-scrolling-navigation-using-jquery.aspx)

然后进行以下修改：

*   修改为垂直滚动
*   通过 onhover 而不是 onclick 调用滚动
*   调用 .insertAfter() ( [http://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/) ) 在当前活动块之后插入块。然后你就可以开始滚动了。

然后，您将获得内容总是从 div 底部弹出的效果

# authentication - Web2py 和 AFS 身份验证

> ID：12791534
> 
> 赞同：1
> 
> 时间：2012-10-09T01:07:24.043
> 
> 标签：authentication, web2py, openafs

我想使用 AFS 对我的 web2py 应用程序的用户进行身份验证。不幸的是，pam.py 模块似乎不支持 AFS，只支持本地用户。是否可以用 pam 做到这一点，或者我应该使用其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:29:46.160

由于 web2py 是基于 web 的，并且由于 AFS 使用 Kerberos，因此您肯定需要在用户和 web2py 层之间传递 Kerberos 票证，以便让 web2py 以用户的名义获取 AFS 令牌。

您可以使用带有 SPNEGO 的 Kerberos 向 Web 服务器验证浏览器。需要将浏览器配置为允许委托（如[本示例中使用 Java SPNEGO 过滤器](http://spnego.sourceforge.net/credential_delegation.html)所描述的那样）。

如果您设法在您的 web2py 应用程序中获得一次委托的 Kerberos 票证，您应该能够使用它`aklog`来获得 AFS 令牌。

我对 web2py 不是很熟悉，但是快速浏览一下文档并没有显示出太多支持 SPNEGO 的迹象：您可能必须自己实现它。（如果您可以找到支持它的现有 GSS 库，则它应该“仅”是在浏览器和此库之间来回传递 SPNEGO 令牌的问题，前提是它已正确配置。这可能有点偏离主题Python，但如果您找到与 JGSS 等效的 Python，[此 Java/JGSS 教程](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jgss/lab/part5.html)可以告诉您需要什么。）

请注意不要在运行 web2py 的同一进程用户下共享所有传入请求（可能来自不同用户）的 AFS 令牌。您可能需要考虑从 web2py 层查看 PAG（进程身份验证组）。您需要将这些进程与到达 web2py 的请求联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T06:44:50.670

使用 PAM 可能是您想要做的，因为 web2py 没有对 AFS 或 krb5 的任何内置支持。为了对非本地用户进行身份验证，您需要指定一个不同的 PAM 服务进行身份验证，并修改本地 PAM 配置以使该服务对 AFS 进行身份验证。

看起来 pam_auth.py 模块除了默认的“登录”之外不支持使用 PAM 服务，但这样做看起来很简单，或者创建你自己的。你只需要做这样的事情：

```
from gluon.contrib.pam import authenticate

def mypam_auth():
    def pam_auth_aux(username, password):
        return authenticate(username, password, "myservice")

auth.settings.login_methods.append(mypam_auth()) 
```

其中“myservice”只是您选择的服务名称。然后您需要修改本地 PAM 配置以使“myservice”对 AFS 进行身份验证。在 Linux 上，这通常意味着创建一个文件 /etc/pam.d/myservice，并用 PAM 配置填充它以向 AFS 进行身份验证。

如今，大多数 AFS 单元都使用 Kerberos 5 进行身份验证，因此这仅意味着您需要对 Kerberos 5 进行身份验证，并且不需要打扰任何 AFS 内容（除非您想验证用户是否拥有有效的 AFS 帐户；但那是更多的是授权问题而不是身份验证）。有一些使用 krb5 登录设置 PAM 的指南和示例，例如：[http ://techpubs.spinlocksolutions.com/dklar/kerberos.html#PAM_configuration](http://techpubs.spinlocksolutions.com/dklar/kerberos.html#PAM_configuration)

您可以尝试遵循其中一个指南，但您可能只需要“身份验证”部分，因为您无需担心会话和票证以及所有这些。您可能只需要 /etc/pam.d/myservice 中的类似内容：

```
auth required pam_krb5.so no_ccache use_first_pass
auth required pam_deny.so 
```

如果您所说的“AFS 身份验证”是指旧的 kaserver 基于 krb4 的身份验证而不是 krb5（也就是说，您使用 'klog' 对 AFS 进行身份验证，而不是 'kinit' 和 'aklog' 或 'klog.krb5'），你而是需要使用 pam_afs.so PAM 模块。像这样的东西可能会起作用：

```
auth required pam_afs.so use_first_pass
auth required pam_deny.so 
```

如果您无法控制本地计算机上的本地 PAM 配置，则可以尝试通过生成“kinit”（krb5）或“klog”（旧 kaserver）命令来验证用户身份，并为命令提供密码这是标准输入。这不是很优雅，但它应该可以工作。

# shell - Bourne Shell 编程：处理参数错误

> ID：12791535
> 
> 赞同：1
> 
> 时间：2012-10-09T01:07:37.350
> 
> 标签：shell, input

我正在编写一个接受三个参数的 shell 程序：

*   确定程序功能的整数
*   程序使用的文件

该命令的格式为 myProgram num 文件。但是，如果命令只有 0、1 或超过 2 个参数，我希望程序输出错误。也就是说，如果我输入“myProgram”、“myProgram num”或“myProgram num file anotherWord”，则会在屏幕上打印错误。有谁知道我如何将它实现到我现有的代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:44:29.347

在 bash 中，使用整数时，`(( ))` [更直观](http://wiki.bash-hackers.org/syntax/arith_expr)：

```
#!/bin/bash

if (($# < 2)); then
    printf >&2 "There's less than 2 arguments\n"
    exit 1
fi

if (($# > 2)); then
    printf >&2 "There's more than 2 arguments\n"
    exit 1
fi

if ! (($1)); then
    printf >&2 "First argument must be a positive integer\n"
    exit 1
fi

if [[ ! -f "$2" ]]; then
    printf >&2 "Second argument must be an exited file\n"
    exit 1
fi

# -->the rest of the script here<-- 
```

此外，为了尊重*最佳实践*和正确编码，在打印错误时，它必须`STDERR`像我一样`printf >&2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:11:17.117

内置变量`$#`包含传递给脚本的参数数量。您可以使用它来检查是否有足够的参数，如下所示：

```
#!/bin/bash

if [ $# -ne 2 ]; then
    echo "Usage: myProgram num file" >&2
    exit 1
fi

# The rest of your script. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:15:09.357

如果您使用的是 bash，那么您可以像这样处理它：

```
#!/bin/bash
if [ $# -lt 2 ] || [ $# -gt 3 ]
then
  echo "You did not provide the correct parameters"
  echo "Usage: blah blah blah"
fi 
```

这是一个非常简单的检查。您还可以查看 getopt 处理的手册页，这在评估命令行参数时功能更强大。

好起来

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T01:10:27.250

使用 $# 中内置的 shell 来确定传递给脚本的参数数量。您的程序名称不计算在内。

# grails - 从 grails grails.config.location 加载多个文件

> ID：12791536
> 
> 赞同：1
> 
> 时间：2012-10-09T01:07:37.273
> 
> 标签：grails

我正在使用 grails 1.3.7。我有一个`Config.groovy`文件，它为该`grails.config.locations`属性指定了许多其他 groovy 文件位置。我不清楚这些其他文件何时被解析，以便我可以使用它们的信息。例如，在`Bootstrap.groovy`执行时，这些文件似乎没有被解析。这些东西记录在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:28:55.717

这些东西记录在[Grails 配置文档中](http://grails.org/doc/latest/guide/conf.html#configExternalized)

根据我的经验，它们都应该在 Bootstrap 开始执行时被解析。

# html - 如何对与其父表的标题对齐（并关联）的 HTML 嵌套表进行语义编码

> ID：12791541
> 
> 赞同：26
> 
> 时间：2012-10-09T01:08:24.877
> 
> 标签：html, html-table, semantic-markup

编辑：所选答案包含指向工作小提琴的链接，我可以在不使用嵌套表的情况下进行创作。

我想在 HTML 中使用如下图所示的布局对表格进行语义编码。不幸的是，我无法在网络上找到类似的东西。

![在此处输入图像描述](../Images/06331fa999346f26dd0c98df6ef4bd0a.png)

我已经能够通过手动设置单元格宽度来强制外观，但我想确保我生成的代码是有意义的，我认为情况并非如此，因为如果不手动设置宽度，标准渲染看起来更多如下图。

![在此处输入图像描述](../Images/20b93a118d87763c6b2ed57d8f8ae6f4.png)

到目前为止，我提出的有问题的代码如下所示：

```
<table>
  <thead>
    <tr>
      <th scope="col">Type of Loss Dollar</th>
      <th scope="col">Reserve Amount</th>
      <th scope="col">Paid Amount</th>
      <th scope="col">Total This Loss</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td colspan="3">
        <table>
          <tbody>
            <tr>
              <th scope="row">Medical</th>
              <td><input type="text" /></td>
              <td><input type="text" /></td>
            </tr><tr>
              <th scope="row">Indemnity</th>
              <td><input type="text" /></td>
              <td><input type="text" /></td>
            </tr><tr>
              <th scope="row">Expense</th>
              <td><input type="text" /></td>
              <td><input type="text" /></td>
            </tr>
          </tbody>
        </table>
      </td><td>
        TOTAL
      </td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-09T01:17:12.537

没有图像很难说，但我认为比嵌套表更好的解决方案是简单地使用`colspan`and`rowspan`属性。

编辑：看到我想说的图像，您绝对可以使用`rowspan`（以及`colspan`您已经使用它的方式）实现这一目标。

`scope`此外，如果它是“col”，则不需要设置属性。它默认为“col”。

编辑：正如 Marat Tanalin 指出的那样，该`scope`属性的默认值实际上`auto`是“使标题单元格应用于根据上下文选择的一组单元格”。根据我的经验，它与将其设置为“col”（对于屏幕阅读器）完全相同。

编辑：这里有两篇关于标记高级表格的好文章：[http](http://www.456bereastreet.com/archive/200910/use_the_th_element_to_specify_row_and_column_headers_in_data_tables/) ://www.456bereastreet.com/archive/200910/use_the_th_element_to_specify_row_and_column_headers_in_data_tables/ & [http://www.456bereastreet.com/archive/200410/bring_on_the_tables/](http://www.456bereastreet.com/archive/200410/bring_on_the_tables/)

编辑：[这是](http://jsfiddle.net/DWM4T/)展示所需行为的小提琴（至少在视觉上），该小提琴的源代码如下：

```
<table border="1">
  <thead>
    <tr>
      <th>Status</th>
      <th>Type of Loss Dollar</th>
      <th>Reserve Amount</th>
      <th>Paid Amount</th>
      <th>Total This Loss</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td rowspan="3">Open</td>
      <td>Medical</td>
      <td><input type="text" /></td>
      <td><input type="text" /></td>
      <td rowspan="3">TOTAL</td>
    </tr><tr>
      <td>Indemnity</td>
      <td><input type="text" /></td>
      <td><input type="text" /></td>
    </tr><tr>
      <td>Expense</td>
      <td><input type="text" /></td>
      <td><input type="text" /></td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:34:14.117

是的，正如上面所有的窥视所暗示的那样，这都是关于行跨度的。

这是您的代码的重写：

```
<table>
  <thead>
    <tr>
      <th>Type of Loss Dollar</th>
      <th>Reserve Amount</th>
      <th>Paid Amount</th>
      <th>Total This Loss</th>
      <th>Last Heading</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td rowspan="3"></td>
      <td>Medical</td>
      <td><input type="text" /></td>
      <td><input type="text" /></td>
      <td rowspan="3">TOTAL</td>
    </tr><tr>
      <td>Indemnity</td>
      <td><input type="text" /></td>
      <td><input type="text" /></td>
    </tr><tr>
      <td>Expense</td>
      <td><input type="text" /></td>
      <td><input type="text" /></td>
    </tr>
  </tbody>
</table> 
```

# frameworks - 实体框架 - 无法启用代码优先迁移

> ID：12791544
> 
> 赞同：3
> 
> 时间：2012-10-09T01:08:42.563
> 
> 标签：frameworks, migration, entity

我在按照[http://msdn.microsoft.com/en-us/data/jj591621.aspx上的 Microsoft Data Developer 程序启用代码优先迁移时遇到了一些问题](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

我正在使用 Visual Studio 2010 并以 .NET Framework 4.0 为目标

我可以运行以下步骤而不会出错：

*   创建一个新的 MigrationsDemo 控制台应用程序
*   将最新版本的 EntityFramework NuGet 包添加到项目中。
    *   工具 -> 库包管理器 -> 包管理器控制台
    *   运行 Install-Package EntityFramework 命令（这将安装 Entity Framework 5）

但是，尝试在包管理器控制台中运行“Enable-Migrations”命令时收到错误消息：

> 未解析成员“System.Data.Entity.Migrations.Design.ToolingFacade+GetContextTypeRunner,EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的类型。

我将非常感谢任何关于我可以做些什么来解决这个问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:32:53.057

仅供参考，我在 VS 2012 和 .NET 框架 4.0 中也遇到了这个问题，对我有帮助的是这个答案[https://stackoverflow.com/a/13572319/2259509](https://stackoverflow.com/a/13572319/2259509)，这很荒谬，但与号似乎确实会导致这个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T05:31:18.523

`<Private>True</Private>`

对我来说，csproj 文件中的程序集引用中缺少上述内容。

这意味着在构建时它不会被复制，因此无法看到。

```
<Reference Include="Oracle.ManagedDataAccess, Version=4.122.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342, processorArchitecture=MSIL">
      <HintPath>..\packages\Oracle.ManagedDataAccess.12.2.1100\lib\net40\Oracle.ManagedDataAccess.dll</HintPath>
      <Private>True</Private>
</Reference> 
```

# ruby-on-rails - UsersController#show 中的 NoMethodError / 未定义方法“键？” 对于零：NilClass

> ID：12791545
> 
> 赞同：1
> 
> 时间：2012-10-09T01:08:43.260
> 
> 标签：ruby-on-rails, railstutorial.org

我在学习 Michael Hartl 的*Rails 教程*时遇到了意外错误。一帆风顺。

在完成[Hartl 的清单 7.3](http://ruby.railstutorial.org/chapters/sign-up.html#code-users_resource)后，我第一次看到与教程不同的“动作控制器：异常捕获”错误。

具体来说，当尝试访问 /users/1 时，我得到：

> 用户控制器中的 NoMethodError#show
> 
> 未定义的方法“键？” 对于零：NilClass

我继续执行清单 7.5——为用户的显示操作添加一个视图，然后将显示操作添加到用户控制器——这解决了 Hartl 遇到的错误，但这些步骤并没有解决我的错误。

基于[这个问题](https://stackoverflow.com/questions/9440325/rails-3-2-undefined-method-key-for-nilnilclass)，我已经验证了我的 app/models/user.rb 没有拼写错误：在检查了拼写错误之后，我将 Hartl 的代码复制并粘贴到了我的文件中，以防万一。

任何关于在哪里寻找错别字/问题的指导将不胜感激。

**编辑 1：**根据要求， UsersController#show 方法：

```
def show
  @user = User.find(params[:id])
end 
```

**编辑 2：**完整跟踪：

> actionpack (3.2.8) lib/action_controller/metal/hide_actions.rb:36:in `visible_action?'
> 
> actionpack (3.2.8) lib/action_controller/metal/hide_actions.rb:18:in `method_for_action'
> 
> actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:14:in `method_for_action'
> 
> actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:61:in `method_for_action'
> 
> actionpack (3.2.8) lib/abstract_controller/base.rb:115:in `process'
> 
> actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
> 
> actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
> 
> actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
> 
> actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
> 
> actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
> 
> actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
> 
> 旅程 (1.0.4) lib/journey/router.rb:68:in `block in call'
> 
> 旅程 (1.0.4) lib/journey/router.rb:56:in `each'
> 
> 旅程 (1.0.4) lib/journey/router.rb:56:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
> 
> rack (1.4.1) lib/rack/etag.rb:23:in `call'
> 
> rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
> 
> rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
> 
> rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
> 
> activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
> 
> activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
> 
> activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__35606540​​18285941260__call__3098371293035639072__callbacks'
> 
> activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
> 
> activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
> 
> activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
> 
> railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
> 
> railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
> 
> rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
> 
> rack (1.4.1) lib/rack/runtime.rb:17:in `call'
> 
> activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
> 
> rack (1.4.1) lib/rack/lock.rb:15:in `call'
> 
> actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
> 
> railties (3.2.8) lib/rails/engine.rb:479:in `call'
> 
> railties (3.2.8) lib/rails/application.rb:223:in `call'
> 
> rack (1.4.1) lib/rack/content_length.rb:14:in `call'
> 
> railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
> 
> 机架 (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
> 
> /Users/aaronmacy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `服务'
> 
> /Users/aaronmacy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:在“运行”中
> 
> /Users/aaronmacy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

**编辑 3：** users_controller.rb：

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

  def new
  end
end 
```

用户.rb：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  before_save { self.email.downcase! }

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

路线.rb：

```
SampleApp::Application.routes.draw do
  resources :users

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:56:36.237

这是一个 bcrypt 问题。确认您在 Gemfile 中取消了 bcrypt 的注释，运行`bundle install`，然后重新启动服务器。

请参阅： [未定义的方法“键？” 对于 nil:NilClass 与 bcrypt-ruby 和 has_secure_password](https://stackoverflow.com/questions/10568316/undefined-method-key-for-nilnilclass-with-bcrypt-ruby-and-has-secure-passwor)

# python - Python3关于Loops Iteration多变量简单算法

> ID：12791546
> 
> 赞同：1
> 
> 时间：2012-10-09T01:08:45.053
> 
> 标签：python, loops, iteration

我要做的是有T个测试用例，这是我将获得每个测试用例中“n”个学生的平均值的时间，我需要显示每个测试用例的平均分数和最高分那个测试用例和学生的名字

如果您能告诉我编码的正确方法并解释为什么必须这样，我将不胜感激！我搞不清楚了

我的代码：

```
t = int(input("enter number of cases: "))
def casing(t):
    for case in range (1, t+1):
        n = int(input("enter number of students: "))
        def studentmarks(n):
            total = 0
            student = "none"
            for computetotal in range(1,n+1):
                student = input("please enter student name: ")
                mark = int(input("please enter mark: ")) 
                total = total+ mark
                highestmark = mark
                if studentmark(n) > mark:
                    highestmark = mark
                    achieve = student
                    return highestmark, acheive
            return total, studentmark()[0], studentmark()[1]
        average = float((studentmarks(n)[0])/ n)
        print("average: ", average, "highest: ",studentmark(n)[1], "student: ", studentmark(n)[2]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:59:08.850

我认为如果没有函数声明，代码会更容易理解和调试。除非您正在执行函数式编程（例如传递函数对象），否则很少有充分的理由使用嵌套函数。在这里，您定义了函数，然后立即调用它们一次，这是毫无意义的。因此，这是您的代码的简化版本：

```
t = int(input("enter number of cases: "))
for _ in range (t):
    total = 0
    highest_mark = 0
    best_student = "none"

    n = int(input("enter number of students: "))

    for _ in range(n):
        student = input("please enter student name: ")
        mark = int(input("please enter mark: ")) 
        total = total+ mark
        if mark > highestmark:
            highestmark = mark
            beststudent = student

    average = total / n
    print("average: {}, highest: {}, student: {}"
          .format(average, highestmark beststudent)) 
```

`studentmark`我还删除了您的代码正在调用但从未定义的名为（没有“s”）的函数。我不确定我是否正确解释了它应该做什么，但我认为是的。以前肯定行不通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:00:26.340

这不起作用有几个原因 - 但根本原因似乎是因为你的最高分是在错误的地方开始的。看起来您稍后希望学生姓名和标记位于一个元组中，这是一个好主意 - 但您实际上从未在任何地方创建此元组。因此，制作一个并调用它`highest`- 它同时替换了`student`和`highestmark`变量。开始它`None`而不是`"none"`（这实际上可能是一个有效的学生姓名！），所以你有上面的循环：

```
total = 0
highest = None 
```

并将您的“这是否高于最高”逻辑更改为：

```
if highest is None or mark > highest[1]:
    highest = (name, mark) 
```

读作“如果还没有最高的学生，或者这个学生的分数高于当前的最高学生，这个学生是最高的”。然后你会希望回报是：

```
return total, highest[0], highest[1] 
```

但是，由于您只有少量数据（足以让用户在控制台中输入数据），因此您可以大大简化此逻辑。将特定测试用例的*所有*数据读取到`(student, mark)`元组列表中，然后使用 Python 的内置函数进行计算：

```
def studentmarks(n):
    marks = []
    for _ in range(n):
       student = input("please enter student name: ")
       mark = int(input("please enter mark: ")) 
       marks.append(student, mark)
    return marks

# Calculations
marks = studentmarks(5)
print('Average: ', sum(result[1] for result in marks)/len(marks))
print('Highest: ', max(marks, key=lambda s: s[1]) 
```

播种：

```
>>> marks
[('Fred', 4), ('Wilma', 10), ('Barney', 8), ('Wilma', 7), ('Pebbles', 6)] 
```

平均为 7.0，最大为`('Wilma', 10)`.

# ruby - 如何使用变量通过正则表达式匹配这段代码？

> ID：12791547
> 
> 赞同：2
> 
> 时间：2012-10-09T01:08:46.147
> 
> 标签：ruby, regex

我正在尝试使用正则表达式在某些代码中查找匹配项。

我正在使用的字符串

```
"input[type=radio],input[type=checkbox] {" 
```

为了匹配这一点，我为每个括号添加了转义字符：

```
"input\[type=radio\],input\[type=checkbox\] \{" 
```

我正在运行`.match`以在特定代码行中查找匹配项：

```
"input[type=radio],input[type=checkbox] {".match(/input\[type=radio\],input\[type=checkbox\] \{/) 
```

哪个有效。但是当我把它们变成变量时，它没有。

```
str = "input[type=radio],input[type=checkbox] {"
code_to_match_against = "input\[type=radio\],input\[type=checkbox\] \{"

str.match(/#{code_to_match_against}/) # => nil 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:25:56.783

这里的双引号：

```
code_to_match_against = "input\[type=radio\],input\[type=checkbox\] \{" 
```

正在吃你的反斜杠。考虑一下：

```
>> code_to_match_against = "input\[type=radio\],input\[type=checkbox\] \{"
>> p code_to_match_against
"input[type=radio],input[type=checkbox] {" 
```

因此，当您插入`code_to_match_against`正则表达式时，正则表达式引擎认为您正在使用两个字符类：

```
/input[type=radio],input[type=checkbox] {/
#     ^^^^^^^^^^^^      ^^^^^^^^^^^^^^^ 
```

并且字符类一次只匹配一个字符（除非您附加`*`或`+`）。

将反斜杠加倍以使它们超过双引号或使用单引号代替：

```
>> code_to_match_against = 'input\[type=radio\],input\[type=checkbox\] \{'
>> p code_to_match_against
"input\\[type=radio\\],input\\[type=checkbox\\] \\{"
>> puts code_to_match_against
input\[type=radio\],input\[type=checkbox\] \{ 
```

# iphone - Xcode NSTimer 每毫秒获取位置对象

> ID：12791548
> 
> 赞同：0
> 
> 时间：2012-10-09T01:08:47.040
> 
> 标签：iphone, ios, xcode, nstimer

我需要始终每 .1 秒获取 _propArrow (UIImageView) 的位置，并使用 NSLog 在方法 (void)runScheduledTask 中进行验证

但并非每 0.1 秒运行一次。

只表示动画运动的开始和结束

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _propArrow.frame = CGRectMake(144, 291, 33, 71);

      aTimer = [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(runScheduledTask) userInfo:nil repeats:YES];

}

- (void)runScheduledTask {

  NSLog(@"Position: %@", NSStringFromCGRect(_propArrow.frame));

}

- (IBAction)fire:(id)sender {

[UIView animateWithDuration:1
                          delay:0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{

                              _propArrow.frame = CGRectMake(144, 0, 33, 71);
                     }
                     completion:^(BOOL finished){

                     }];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:14:03.010

首先，根据[NSTimer 文档，](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)该类的有效分辨率约为 50-100 毫秒。所以用它以 1 毫秒的间隔做任何事情肯定会失败。

其次，即使 NSTimer 可以处理 1 毫秒的间隔，您甚至不会要求它这样做：

> `aTimer = [NSTimer scheduledTimerWithTimeInterval:.05...`

您的代码将计时器安排为每 0.05 秒运行一次，即每 50 毫秒运行一次。

第三，屏幕不会以接近 1 毫秒的间隔更新，因此您的图像在屏幕上的实际位置变化的频率要低得多。

那么，您到底想在这里完成什么？*如果您想*知道物体在现实世界中连续运动的位置，您可以计算任何时间点的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:51:22.163

因为在大多数 UIKit 动画属性中，新值会*立即*从代码的角度设置；它是实际动画的*显示*值。读取动画属性`UIView.frame`永远不应该给你一个中间值（主要的例外是 UIScrollView 它为动画滚动做了自己的事情）。

如果您想要“大致显示在屏幕上的内容”，则需要访问 CoreAnimation“表示层”：

```
#import <QuartzCore/CALayer.h>

- (void)runScheduledTask {
  NSLog(@"Position: %@", NSStringFromCGRect(_propArrow.layer.presentationLayer.frame));
} 
```

`CADisplayLink`如果您想要一个在每一帧都运行的回调，也可以考虑使用。

# events - jQuery Mousemove：更改 5px 时触发

> ID：12791549
> 
> 赞同：2
> 
> 时间：2012-10-09T01:09:02.973
> 
> 标签：events, triggers, jquery, mousemove

出于多种技术原因，我在 jQuery 上实现了我自己的“可拖动”功能，而不是使用 jQuery UI，并且我正在使用 mousedown 和 mousemove 事件来监听试图拖动元素的用户。

到目前为止效果很好，我只想每移动 5 px 触发 mousemove 事件，而不是逐个像素。我试过编码一个简单的：

```
$('#element').bind('mousemove', function(e) {
    if(e.pageX % 5 == 0) {
        // Do something
    }
}); 
```

但是，每 5 个像素的移动并不稳定，有时如果您将鼠标移动得太快，它会跳过几个步骤。我认为这是因为当鼠标移动得非常快时，jQuery 不会触发每个像素的事件。

你们知道如何每 5 个像素触发一次事件吗？

非常感谢，

安东尼奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:19:58.173

您的代码没有考虑拖动开始的位置。 `e.pageX`只会给你页面坐标，而不是差异。您需要检查移动距离的变化。

[这篇文章](https://stackoverflow.com/questions/8686619/how-can-i-detect-the-distance-that-the-users-mouse-has-moved)非常相关。

这是基本代码：

```
$(document).mousemove(function(event) {
    var startingTop = 10,
        startingLeft = 22,
        math = Math.round(Math.sqrt(Math.pow(startingTop - event.clientY, 2) + 
                                    Math.pow(startingLeft - event.clientX, 2))) + 'px';
    $('span').text('From your starting point(22x10) you moved:   ' + math);
}); 
```

编辑：现在我想我明白了 OP 在说什么。我用上面的代码想出了[这个小提琴](http://jsfiddle.net/Em4Xu/57/)。它跟踪您当前相对于屏幕左上角的位置，并检查您的差异是否大于 5 个像素。

新脚本：

```
var oldMath = 0;
$(document).mousemove(function(event) {
    var startingTop = 10,
        startingLeft = 22,
        math = Math.round(Math.sqrt(Math.pow(startingTop - event.clientY, 2) +Math.pow(startingLeft - event.clientX, 2))) + 'px';
    $('#currentPos').text('you are at :' + math);

    if(Math.abs(parseInt(math) - oldMath) > 5){
        //you have moved 5 pixles, put your stuff in here
        $('#logPos').append('5');

        //keep track of your position to compare against next time
        oldMath = parseInt(math);
    }
});​ 
```

# php - PHP 发布变量

> ID：12791553
> 
> 赞同：0
> 
> 时间：2012-10-09T01:09:58.597
> 
> 标签：php, variables, post, form-post

我如何将 $frompage 变量发送到它发布到的页面是我的想法：

```
<link rel="stylesheet" type="text/css" href="style1.css" />
<?php 
$frompage = $_SERVER['HTTP_REFERER'];
echo '<form name="form1" method="post" action="report.php">';
echo "What is Wrong?";
echo '<textarea style="resize: none;" name="message" cols="70" rows="10" id="message">        </textarea>';
echo'<input type="hidden" name="$frompage" value="$frompage">';
echo '<input type="submit" name="Submit" value="Submit">';
echo "</form>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:13:04.290

如果您更改此行：

```
'<input type="hidden" name="$frompage" value="$frompage">' 
```

进入这个：

```
'<input type="hidden" name="frompage" value="$frompage">' 
```

当用户发送数据时，您可以使用以下方法检索它：

```
$_POST['frompage'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:14:43.333

保持简单，无需回显所有 HTML。

```
<link rel="stylesheet" type="text/css" href="style1.css" />
<form name="form1" method="post" action="report.php">
    <label>What is Wrong?</label>
    <textarea style="resize: none;" name="message" cols="70" rows="10" id="message">        </textarea>
    <input type="hidden" name="frompage" value="<?php echo $_SERVER['HTTP_REFERER']; ?>" />
    <input type="submit" name="Submit" value="Submit" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:16:53.177

首先，您使用了太多回声：P 这就是我的做法。

```
<link rel="stylesheet" type="text/css" href="style1.css" />
<?php 
$frompage = $_SERVER['HTTP_REFERER'];
?>
<form name="form1" method="post" action="report.php">
What is Wrong?
<textarea style="resize: none;" name="message" cols="70" rows="10" id="message">        </textarea>
<input type="hidden" name="<?php echo $frompage" ?> value="<?php echo $frompage" ?>>
<input type="submit" name="Submit" value="Submit">
</form> 
```

当你使用 echo ''; 单引号强制所有内容都按照它的说明进行阅读。如果您真的想回显所有这些 html，请使用双引号。如 echo "Hello $frompage";

# eclipse - 为什么在 Eclipse OS X 中无法解析符号“CV_8UC3”？

> ID：12791558
> 
> 赞同：2
> 
> 时间：2012-10-09T01:10:52.027
> 
> 标签：eclipse, opencv

我收到 Symbol 'CV_8UC3' could not be resolved 错误，无法构建项目。

```
cv::Mat ImgBuf(yRes,xRes,CV_8UC3,(unsigned char*) g_Img); 
```

这包括已包括在内，没有任何错误。

```
#include <cv.h>
#include <highgui.h> 
```

# ruby-on-rails-3 - 如何使用 rails 读取 JSON 子级别？

> ID：12791563
> 
> 赞同：1
> 
> 时间：2012-10-09T01:11:27.220
> 
> 标签：ruby-on-rails-3

我是 Rails 新手，我正在尝试读取 JSON uri。我可以阅读这些信息，但我不知道如何访问 json 文件的子级别。我正在这样做：

```
resp = Net::HTTP.get_response(URI.parse(uri))

parsedresp = JSON.parse(resp.body) 
```

我得到以下信息作为答案：

```
{"success"=>true, "data"=>[{"id"=>1, "public_id"=>1, "company_id"=>60861, "user_id"=>{"value"=>74138, "name"=>"Daniel Galvao"}}]} 
```

当我使用`parsedresp["data"]`我得到的信息：

```
[{"id"=>1, "public_id"=>1, "company_id"=>60861, "user_id"=>{"value"=>74138, "name"=>"Daniel Galvao"}}] 
```

我的问题是我不知道如何将信息“name”=>“Daniel Galvao”存储在数据库中。有人能帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:15:36.860

的值`parsedresp["data"]`是一个数组，因此要获取它的值，您必须向它传递一个索引（`[0]`对于第一个也是唯一的元素）：

```
parsedresp["data"][0]
#=> {"id"=>1, "public_id"=>1, "company_id"=>60861, "user_id"=>{"value"=>74138, "name"=>"Daniel Galvao"}} 
```

要获取用户数据，请将此哈希传递给`user_id`哈希键：

```
parsedresp["data"][0]["user_id"]
#=> {"value"=>74138, "name"=>"Daniel Galvao"} 
```

如果要获取用户名，则：

```
parsedresp["data"][0]["user_id"]["name"]
#=> "Daniel Galvao" 
```

# design-patterns - 好莱坞校长：我不明白

> ID：12791566
> 
> 赞同：1
> 
> 时间：2012-10-09T01:12:37.660
> 
> 标签：design-patterns

我最近切换到 Enterprise Library 5 和 Unity。我对提供的示例非常满意，直到我四处浏览并开始阅读有关“服务定位器是一种反模式”的嘶嘶声。从那里我偶然发现了关于 Composite Root 和好莱坞校长“不要打电话给我们，我们会打电话给你”的著作。

我想我了解 Composite Root 的好处，但我不明白我们如何避免调用它以获取应用程序所需的类的实例。所以我想我可能误解了整个想法。

我将其作为一种新的方式来实现集中式工厂模式。但是在某些时候我仍然需要调用工厂模式来获取我的实例？因此，对于我读过的以下代码，Unity Container 应该创建在应用程序根附近的某个位置（而不是在表单中）。这反过来应该照顾我的 DI 以进行异常处理和日志记录。（请注意，这只是 2 分钟的播放代码，因此毫无意义）

```
 public partial class Form1 : Form
    {
        public IUnityContainer Container { get; protected set; }

        public Form1()
        {
            InitializeComponent();
        }

        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);
            this.Container = new UnityContainer().AddNewExtension<EnterpriseLibraryCoreExtension>();
            try
            {
                throw new NullReferenceException("Mucking around.");
            }
            catch (Exception ex)
            {
                    TaxCalculator calc = this.Container.Resolve<TaxCalculator>(new ParameterOverride("fire", 888));
                    calc.LogWriter.Write(calc.Fire, "muckaround");
            }
        }

public class TaxCalculator
{
    private ExceptionManager _exceptionManager;
    public LogWriter LogWriter { get; protected set; }

    public string Fire { get; set; }

    public TaxCalculator(ExceptionManager em, LogWriter lw, int fire)
    {
        this._exceptionManager = em;
        this.LogWriter = lw;
        this.Fire = fire.ToString();
    }
} 
```

麻烦的是，如果我不能调用 TaxCalculatorFactory 反过来调用容器，或者只是调用容器本身，我如何获得特定类型的税收计算器？

我如何/从哪里获取我的实例？我是否启动应用程序，构建一堆在应用程序生命周期中可能需要或不需要的工厂，然后从工厂获取应用程序请求实例的各个层？好像我会传递很多工厂参考资料，所以我不确定有什么好处？还是我在容器中初始化静态类并调用它们？

正如你所看到的，我对好莱坞校长的想法一头雾水。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:44:23.130

服务定位器的一种替代方法是使用可以在对象创建期间注入依赖项的 IoC 容器。

[这个 SO question](https://stackoverflow.com/questions/4609360/resolve-icontainer)提出了一个类似的问题，它指向这篇[Autofac 文章对象引用类型](http://code.google.com/p/autofac/wiki/RelationshipTypes)。它应该给你一些关于 IoC 容器如何解决这个问题的想法。

# vb.net - 在 vb.net 中从一种形式获取可变数据到另一种形式

> ID：12791567
> 
> 赞同：0
> 
> 时间：2012-10-09T01:12:36.927
> 
> 标签：vb.net, forms, hyperlink

一旦员工输入他们的信息和时间，我编写了一个程序来计算工资数据。我在将数据从一种形式的变量读取到另一种形式时遇到问题。我试图做的是从另一个名为 Payroll_Submission 的表单中读取一个名为 TimeSheet 的表单。这是我到目前为止的代码，我真的需要从其他表单中获取数据来进行计算。如果您需要我的 TimeSheet 代码，请告诉我，它很长，所以我这次没有附上。

```
Public Class Payroll_Submission

Private Sub Payroll_Submission_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    Dim counter As Integer
    counter = 0

    lblEmployee.Text = TimeSheet.EmpName
    lblSuperName.Text = TimeSheet.Supervisor
    lblReport.Text = TimeSheet.Period

    If Not TimeSheet.flag Then
        lblHoursWorked.Text = TimeSheet.txtMon1 + TimeSheet.txtTues1 + TimeSheet.txtWed1 + TimeSheet.txtThurs1 + TimeSheet.txtFri1 + TimeSheet.txtSat1 + TimeSheet.txtSun1
        If lblOvertimeHours.Text > 40 Then
            lblRegHours.Text = 40
            lblRegHours.Text = lblHoursWorked.Text - 40
        Else
            lblRegHours.Text = lblHoursWorked.Text
            lblOvertimeHours.Text = 0
        End If
        lblOvertimeHours.Text = "$15"
        lblRateOver.Text = "$22.50"

        HourlyPay.Text = Convert.ToInt32(lblRegHours.Text) * 15
        lblOvertimeHours.Text = Convert.ToInt32(lblOvertimeHours.Text) * 22.5
        lblGrossPay.Text = Convert.ToInt32(HourlyPay.Text) + Convert.ToInt32(lblOvertimeHours.Text)

        If TimeSheet.chk1.Checked Then
            counter = counter + 1
        End If

        If TimeSheet.chk2.Checked Then
            counter = counter + 1
        End If

        If TimeSheet.chk3.Checked Then
            counter = counter + 1
        End If

        If TimeSheet.chk4.Checked Then
            counter = counter + 1
        End If

        If TimeSheet.chk5.Checked Then
            counter = counter + 1
        End If

        If TimeSheet.chk6.Checked Then
            counter = counter + 1
        End If

        If TimeSheet.chk7.Checked Then
            counter = counter + 1
        End If

        lblPTOHours.Text = counter

    End If

    HourlyPay.Text = Convert.ToInt32(lblRegHours.Text) * 15
    lblOvertimeHours.Text = Convert.ToInt32(lblOvertimeHours.Text) * 22.5
    lblGrossPay.Text = Convert.ToInt32(lblRegHours.Text) + Convert.ToInt32(lblOvertimeHours.Text)
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:38:03.310

如果我理解您想要正确做的事情，那实际上非常简单。在您的时间表表格中，您是否像这样称呼您的工资单？

```
dim payroll as new Payroll_Submission
payroll.showdialog() 
```

如果您这样做，您应该能够通过以下方式访问工资单上的所有控件：

```
payroll.lblEmployee.Text = Me.EmpName 
```

等等等等

然后，这会将工资单表单上的每个标签和其他控件设置为您在时间表表单中拥有的变量。在执行 .showdialog 之前，您需要确保在工资单表单上设置控件。

它应该看起来像这样：

```
 dim payroll as new Payroll_Submission
    payroll.lblEmployee.Text = Me.EmpName
    payroll.lblSuperName.Text = Me.Supervisor
    payroll.showdialog() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:54:48.857

Assuming that you create the `Payroll_Submission` form from your `Timesheet` form I would look at adding a second constructor to your `Payroll_Submission` form:

```
Private _ts As Form

Public Sub New(ts As Form)
    Me.New()
    _ts = ts
End Sub 
```

When you create the form pass a reference to your form through the constructor

```
 Dim ps As New Payroll_Submission(Me) 
```

Then, once you change references to `TimeSheet` to be `_ts`, your code should work fine.

Just looking at your code, you could also do this to shrink it down a bit for the calculation of `counter`:

```
Dim cbs As New List(Of CheckBox) From _
{ _
    _ts.chk1, _ts.chk2, _ts.chk3, _
    _ts.chk4, _ts.chk5, _ts.chk6, _
    _ts.chk7 _
}
Dim counter = cbs.Where(Function (cb) cb.Checked).Count() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:16:42.660

将 Timesheet 表单中的变量声明为 Friend。例如

```
Public Class Timesheet
  Friend EmpName As String
  Friend Supervisor As String 
```

# html - 输入文本表单不可点击 - 嵌套 DIV

> ID：12791569
> 
> 赞同：1
> 
> 时间：2012-10-09T01:12:40.780
> 
> 标签：html, css

我正在完成一个我为朋友做的网站，我在这个页面上遇到了一个问题 [http://directv.spacecommand.tv/order/](http://directv.spacecommand.tv/order/)

（出于提供信息的目的。他是网站上列出的所有公司的授权经销商，因此能够使用各自网站上的内容。我们问过。）

那里的表格不可点击。我试图寻找一个错误，但我似乎无法找出它是什么。我 17 岁，这是我的第一个网站，我缺乏一些经验。所以这可能是显而易见的。如果您发现有问题，请告诉我。谢谢。

编辑：我使用嵌套的 DIV。我试过用 z-index 堆叠它们，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:36:44.823

删除中的`z-index: -1`声明`#maincontainer`。这导致 div 被放置在 下方`body`，使其无法点击。

# c - 在 C 中从 char* 数组的末尾取出东西

> ID：12791570
> 
> 赞同：-3
> 
> 时间：2012-10-09T01:12:56.443
> 
> 标签：c, char

如何从 char* 末尾删除字符？我有：“123456ABC”，我想要：“123456”。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T01:16:09.763

您可以将其中一个元素设置为空字符。假设您想将字符串“123456ABC”缩减为“123456”，您可以这样做，

```
str[6] = '\0'; 
```

但字符串的其余部分仍将为其分配内存。您可能想要做的是创建一个新字符串并将旧字符串的所需部分复制到其中，然后删除旧字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:30:48.467

如果您有所需剩余字符串的**长度 length**，请设置**str[length]='\0'**并执行以下操作：

```
// Assuming str was obtained through malloc/realloc functions.
str = realloc(str, sizeof(char)*(1+length)); 
```

这样，您可以缩短概念字符串及其使用的内存，以防您想优化！

编辑：感谢 Jim Balter 对我最初的提案提出了问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T01:16:28.013

用 '\0' 终止 char * 字符串。

```
char c[] = "123456ABC";
c[6] = '\0'; 
```

# git - Aptana Studio GIT：src refspec master 不匹配任何

> ID：12791571
> 
> 赞同：1
> 
> 时间：2012-10-09T01:13:03.073
> 
> 标签：git, aptana, bitbucket

当我发现自己在 PHP 中开发了一个非常复杂的基于 MVC 的 CMS 时。我确实创建了一个“更新”系统，但我听说过很多关于 git 和 SVN 的信息，所以我花了几个小时试图弄清楚如何使用 aptana studio 来做到这一点。

我正在使用 bitbucket.org。我添加了我的 repo 东西，然后继续“推送”我的项目。它要求我输入密码：我输入它。然后我收到错误：错误：src refspec master does not match any。错误：未能将一些参考资料推送到“https.//pthowsen@bitbucket.org/pthowsen/dvc5.git”

也许我必须使用 github 而不是 bitbucket？

反正。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:02:49.077

第一次推送需要在本地 master 和远程 repo 之间建立链接（通常称为 'origin'）

如“[让 git 在 Ubuntu 上的 aptana 中工作](http://sysadmin.circularvale.com/desktop-config/getting-git-working-in-aptana-on-ubuntu/)”中所述，转到 git 命令行并输入：

```
git push -u origin master 
```

然后，您从 Aptana 进行的所有后续推送都将起作用。

注意：这假设您至少添加并提交了一次。
如果您的 repo 刚刚初始化，则没有提交，也没有 ' `master`' 分支。

# javascript - 在图片加载或验证图片 URL时调用

> ID：12791576
> 
> 赞同：2
> 
> 时间：2012-10-09T01:13:38.423
> 
> 标签：javascript, jquery

我正在制作一个包含一些输入等的表单......其中一个要求提供图片的 URL，我希望浏览器验证给定的 url 或图片是否处于活动状态并且正常工作。

所以我`img`在 url 输入旁边有一个元素，当这个输入模糊时，`src`该 img 的属性会自动随 javascript 更改并设置为给定的 url。我想确定图像是否正确加载，或者它不工作。我不知道是否有没有 img 元素的功能，但请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:16:31.697

您可以在DOM 元素上使用`onerror`和`onload`事件。`img`只需确保在实际设置`src`图像属性之前设置回调。以下代码可用于检查 URL 是否为有效的图像 URL。您可以使用类似的代码来检查图像是否已加载到现有`img`元素中（只需选择该元素而不是创建新元素）。

```
var checkImage = function (url) {

  var image = document.createElement('img');

  image.onerror = function () {
      // image has failed to load
      console.log('url is not valid');
  };

  image.onload = function () {
      // image has loaded successfully
      console.log('url is valid');
  };

  image.src = url;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:29:17.360

或者，您可以执行以下操作：

```
$.ajax({
    url:'http://www.example.com/yourimage.jpg',
    type:'HEAD',
    error: function(){
            //do sth to handle error
           },
    success: function(){
            //do sth when load succeeded
           }
}); 
```

上面的代码应该检查错误，比如 404 等。

另外，您可能想看看[这个答案](https://stackoverflow.com/a/3381694/786796)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T18:54:15.813

使用 jQuery：http: [//jsfiddle.net/0kwsetp1/1/](http://jsfiddle.net/0kwsetp1/1/)

```
$("input").on("blur change", function () {
    var image = $("#the-image"),
        $this = $(this),
        string = $this.val();

    image[0].onerror = function () {
        alert("Image could not be loaded");
    };
    image.attr("src", string);
}); 
```

感谢比尔指导我`onerror`。

# ruby-on-rails - 防止长请求的请求超时

> ID：12791580
> 
> 赞同：6
> 
> 时间：2012-10-09T01:14:53.027
> 
> 标签：ruby-on-rails, heroku

我在 Heroku 上有一个 Rails 控制器，我在其中循环发送电子邮件，并向用户回复一些关于电子邮件发送到哪个电子邮件地址的信息。

虽然这在只需要发送几封（约 40 封）电子邮件时有效，但当要发送的电子邮件不止几封（例如 > 40 封）时，请求就会超时。

Heroku 在其指南中指出，请求必须在 30 秒内至少响应一个字节：[https ://devcenter.heroku.com/articles/request-timeout](https://devcenter.heroku.com/articles/request-timeout)

虽然我知道这不是实现这一目标的最佳方式，但我目前正试图弄清楚如何在 Ruby 中做到这一点。

如果这是一个 PHP 应用程序，我可以`echo`在进入循环之前做一个，然后`echo`在每次迭代中保留一些东西。我如何在 Rails 中实现类似的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:28:16.943

您最好的选择是在发回回复之前不要进行邮寄。您将有更好的运气首先将作业添加到 Heroku 的许多可用工作队列之一，然后跳转到显示作业进度并定期更新自身的监控页面。如果您出于预算原因试图避免使用其中一种队列服务，则可以使用新线程而不是队列来完成相同的事情。无论哪种方式，这种技术都会更好地扩展，并且能够更容易地从故障中恢复。

正如您似乎已经知道您提出的解决方案不是理想的解决方案，我也会尝试回答您的确切问题。您也许可以为此使用 HTTP 流式传输。我建议查看[http://railscasts.com/episodes/266-http-streaming](http://railscasts.com/episodes/266-http-streaming)。

# jquery - document.ready 上的 JQuery 关闭对话框

> ID：12791582
> 
> 赞同：0
> 
> 时间：2012-10-09T01:14:55.690
> 
> 标签：jquery, dialog

```
<div id="dialog"><img src="images/load.gif"/></div> 
```

我有这个之前播放的 gif，`document.ready`我正试图在页面准备好后关闭它。我试过了：

```
<script type="text/javascript">
$("#dialog").dialog('option', 'dialogClass', 'alert'); //show dialog modal while page is loading

$(document).ready(function() { //document is ready, close loading gif
$("#dialog").dialog('destroy'); 
```

此代码有效，但不会删除加载 gif，它仍会显示在页面上。我尝试添加`$('#dialog').remove()`，但这似乎通过不让页面的其余部分执行来“破坏”我的页面。

页面准备好后如何删除此对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:39:35.113

在你的 CSS

```
#dialog {
display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:42:21.930

你试过这个吗？

```
$("#dialog").hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:43:18.833

首先，在使用 jQuery 方法之前，最好等待 DOM（以及 JQuery 库）被加载。

其次，除非你是通过Ajax加载内容，否则显示一个对话框等待框并立即删除它有点没用（对话框创建和对话框销毁之前的时间非常短）。

此外，与 destroy 一起使用的对话框函数**不会**删除原始 HTML 代码。它仅删除对话框创建期间对话框插件所做的所有修改。

所以，当你申请

```
$("#dialog").dialog('destroy'); 
```

您只需删除包装在

```
<div id="dialog"><img src="images/load.gif"/></div> 
```

但不是它自己的DIV。

在我看来，最好的方法是使用经典的 HTML 和 CSS 添加微调器，当页面加载并加载 jQuery 时，稍等片刻然后将其删除。

你可以拥有这段 CSS

```
#dialog
{
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0.8;
    background-color: grey;
    text-align: center;
    padding-top: 50px;
} 
```

和这段 Javascript

```
$(document).ready(function() {

    // Wait a short delay, animate opacity and finally remove
    $("#dialog").delay(300).animate({
        "opacity" : 0
    }, 500, function() {
        $("#dialog").remove();
    });

}); 
```

祝你好运

# sql - 提供来自 R 向量的查找列表作为用于 RODBC 查找的 SQL 表

> ID：12791584
> 
> 赞同：2
> 
> 时间：2012-10-09T01:15:11.387
> 
> 标签：sql, r, rodbc

我有一个 R 向量中的 ID 列表。

```
IDlist <- c(23, 232, 434, 35445) 
```

我想写一个 RODBC sqlQuery，其中有一个子句说明类似

```
WHERE idname IN IDlist 
```

我是否必须阅读整个表格，然后将其合并到 R 中的 idList 向量？或者如何将这些值提供给 RODBC 语句，以便只恢复我感兴趣的记录？

**注意：**由于列表很长，将单个值粘贴到 SQL 语句中，如下面的答案所示，不会这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T01:31:31.900

你总是可以使用构造语句`paste`

```
IDlist <- c(23, 232, 434, 35445)
paste("WHERE idname IN (", paste(IDlist, collapse = ", "), ")")
#[1] "WHERE idname IN ( 23, 232, 434, 35445 )" 
```

显然，您需要为此添加更多内容以构建您的确切陈述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-01T17:20:43.343

[我通过结合此处](https://stackoverflow.com/questions/2624713/how-do-i-insert-multiple-rows-without-repeating-the-insert-into-dbo-blah-part)和[此处](https://stackoverflow.com/questions/4747768/rodbc-temporary-table-issue-when-connecting-to-ms-sql-server?rq=1)的提示并分批运行，为类似问题提出了解决方案。大致代码如下（从隔离机器重新输入）：

```
#assuming you have a list of IDs you want to match in vIDs and an RODBC connection in mycon

#queries that don't change
q_create_tmp <- "create table #tmptbl (ID int)"
q_get_records <- "select * from mastertbl as X join #tmptbl as Y on (X.ID = Y.ID)"
q_del_tmp <- "drop table #tmptbl"

#initialize counters and storage
start_row <- 1
batch_size <- 1000
allresults <- data.frame()

while(start_row <= length(vIDs) {
    end_row <- min(length(vIDs), start_row+batch_size-1)
    q_fill_tmp <- sprintf("insert into #tmptbl (ID) values %s", paste(sprintf("(%d)", vIDs[start_row:end_row]), collapse=","))

    q_all <- list(q_create_tmp, q_fill_tmp, q_get_records, q_del_tmp)
    sqlOutput <- lapply(q_all, function(x) sqlQuery(mycon, x))

    allresults <- rbind(allresults, sqlOutput[[3]])
    start_row <- end_row + 1
} 
```

# c++ - 在多个节点上运行时 MPI_Reduce() 中的死锁

> ID：12791591
> 
> 赞同：1
> 
> 时间：2012-10-09T01:16:29.310
> 
> 标签：c++, parallel-processing, mpi, distributed-computing

我的 MPI 代码有问题，当代码在**多个节点**上运行时它挂起。在**单个节点上运行时****成功**完成。我不确定如何调试它。有人可以帮我调试这个问题吗？

 **程序用法：

```
mpicc -o string strin.cpp
mpirun -np 4 -npernode 2 -hostfile hosts ./string 12 0.1 0.9 10 2 
```

我的代码：

```
#include <iostream>
#include <vector>
#include <stdio.h>
#include <stdlib.h>
#include "mpi.h"

int main ( int argc, char **argv )
{

    float *y, *yold;
    float *v, *vold;
    int nprocs, myid;
    FILE *f = NULL;
    MPI_Status   status;
    int namelen;
    char processor_name[MPI_MAX_PROCESSOR_NAME];

    //  const int NUM_MASSES = 1000;
    //  const float Ktension = 0.1;
    //  const float Kdamping = 0.9;
    //  const float duration = 10.0;

#if 0
    if ( argc != 5 ) {
        std::cout << "usage: " << argv[0] << " NUM_MASSES durationInSecs Ktension Kdamping\n";
        return 2;
    }
#endif

    int NUM_MASSES  = atoi ( argv[1] );
    float duration = atof ( argv[2] );
    float Ktension = atof ( argv[3] );
    float Kdamping = atof ( argv[4] );
    const int PICKUP_POS = NUM_MASSES / 7;    // change this for diff harmonics
    const int OVERSAMPLING = 16;  // run sim at this multiple of audio sampling rate

    MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&nprocs);
    MPI_Comm_rank(MPI_COMM_WORLD,&myid);
    MPI_Get_processor_name(processor_name, &namelen);

    // open output file
    if (myid  == 0) {
        f = fopen ( "rstring.raw", "wb" );
        if (!f) {
            std::cout << "can't open output file\n";
            return 1;
        }
    }

    // allocate displacement and velocity arrays
    y = new float[NUM_MASSES];
    yold = new float[NUM_MASSES];
    v = new float[NUM_MASSES];

    // initialize displacements (pluck it!) and velocities
    for (int i = 0; i < NUM_MASSES; i++ ) {
        v[i]  = 0.0f;
        yold[i] = y[i] = 0.0f;
        if (i == NUM_MASSES/2 )
            yold[i] = 1.0; // impulse at string center
    }

    // Broadcast data
    //MPI_Bcast(y, NUM_MASSES, MPI_FLOAT, 0, MPI_COMM_WORLD);
    //MPI_Bcast(yold, NUM_MASSES, MPI_FLOAT, 0, MPI_COMM_WORLD);
    //MPI_Bcast(v, NUM_MASSES, MPI_FLOAT, 0, MPI_COMM_WORLD);

    //int numIters = duration * 44100 * OVERSAMPLING; 
    int numIters = atoi( argv[5] );
    for ( int t = 0; t < numIters; t++ ) {
        // for each mass element
        float sum = 0;
        float gsum = 0;
        int i_start;
        int i_end ;

        i_start = myid * (NUM_MASSES/nprocs);
        i_end = i_start + (NUM_MASSES/nprocs);

        for ( int i = i_start; i < i_end; i++ ) {
            if ( i == 0 || i == NUM_MASSES-1 ) {
            } else {
                float accel = Ktension * (yold[i+1] + yold[i-1] - 2*yold[i]);
                v[i] += accel;
                v[i] *= Kdamping;
                y[i] = yold[i] + v[i];
                sum += y[i];
            }
        }

        MPI_Reduce(&sum, &gsum, 1, MPI_FLOAT, MPI_SUM, 0, MPI_COMM_WORLD);

        float *tmp = y;
        y = yold;
        yold = tmp;

        if (myid == 0) {
            //printf("%f\n", gsum);
            if ( t % OVERSAMPLING == 0 ) {
                fwrite ( &gsum, sizeof(float), 1, f );
            }
        }
    }
    if (myid  == 0) {
        fclose ( f );
    }
    MPI_Finalize();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:21:57.290

如果您有可能这样做，您可以尝试在并行调试器（如[Totalview](http://www.roguewave.com/products/totalview.aspx)）中运行您的应用程序。

否则，当程序挂起时，您可以一次将一个免费可用的串行调试器（如[GDB](http://www.gnu.org/software/gdb/)）附加到一个进程，以便查看潜在问题的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:29:04.777

我猜您正在接收消息，该消息不是由任何节点发送的。如果每个节点都先尝试接收消息，哪个节点会发送？

例如，您可以修改程序`if id == 0 send(msg) else receive(&msg)`并尝试使用超时。

在一张纸上写下它是如何工作的以及节点如何交互，你会看到问题出在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:24:56.043

我终于从 OpenMPI 邮件列表中找到了答案。我认为问题出在我的主机设置方式上。

我猜 TCP BTL 在多个节点上运行时会被虚拟接口（vmnet？）弄糊涂。我使用“--mca btl_tcp_if_include eth0”参数限制了使用的接口。这解决了我的问题。**

# objective-c - UILabel 文本与字符串比较

> ID：12791593
> 
> 赞同：-1
> 
> 时间：2012-10-09T01:16:31.760
> 
> 标签：objective-c, ios

> **可能重复：**
> [iOS 将按钮标题与字符串进行比较](https://stackoverflow.com/questions/5270260/ios-compare-button-title-to-string)

有人可以告诉我如何比较 UIlabel 和字符串@“abc”。

让我们说 if(UIlabel??? == @"abc");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:18:00.570

```
[myLabel.text isEqualToString:@"abc"] 
```

# c# - 无法将 QuickTime 控件添加到 Visual Studio 中的 Windows 窗体项目

> ID：12791595
> 
> 赞同：2
> 
> 时间：2012-10-09T01:16:35.190
> 
> 标签：c#, visual-studio-2010, visual-studio, activex, quicktime

我正在尝试按照[http://www.codeproject.com/Articles/50056/Read-M4A-tags-in-C](http://www.codeproject.com/Articles/50056/Read-M4A-tags-in-C)上的说明在 Windows 窗体项目中托管 QuickTime 控件。我正在使用带有 C# 的 VS2010。

我已将所有可用的 Apple QuickTime COM 引用添加到我的项目中，但我没有看到工具箱中列出的 QuickTime 控件。

在网上的几个例子中，人们都用`AxQTOControlLib.AxQTControl qtPlayerObj = new AxQTOControlLib.AxQTControl();`它来初始化控件。在我的项目中，我只有`QTOControlLib`，没有`AxQTOControlLib`。

我已经用其他控件做了很多次。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:07:46.497

您可以右键单击您的工具箱选择**选择项目**，然后选择**Com 组件**选项卡。然后，您将要查找`Apple QuickTime Control 2.0`并选择它。当您单击确定时，您将在工具箱中拥有控件。

![在此处输入图像描述](../Images/b213b4cd02147e4b7d25c9aa3ae3f3b6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:47:49.603

试试这个，打开一个控制台并浏览到`QTOControlLib`. 作为参数运行`AxImp.exe`。`QTOControlLib.dll`它应该生成`AxInterop`您将在项目中引用的内容。

PS：如果您已经添加`QTOControlLib.dll`到工具箱中，请添加一个临时窗口窗体并将控件拖到窗体上。Visual Studio 应自动生成`AxInterop`. 如果这不起作用，请尝试上述解决方案。

# java - 当我尝试更新我的图形时，线程“Thread-1”java.lang.NullPointerException 中出现异常

> ID：12791601
> 
> 赞同：1
> 
> 时间：2012-10-09T01:17:12.917
> 
> 标签：java, multithreading, exception, exception-handling, io

我编辑了一个 JFreeChart 实时图表，现在当我尝试运行它时出现此错误。当我运行它时，GUI 会弹出它的只是图形没有随机数据流。任何想法都会有很大的帮助。

```
public class Therm extends ApplicationFrame implements ActionListener{

private static TimeSeries ts;
JTextArea text = new JTextArea("25");
JTextArea degreeC = new JTextArea("degrees C");
JTextArea degreeF = new JTextArea("degrees F");

public Therm(final String title){
super(title);

ts = new TimeSeries("Data", Millisecond.class);
TimeSeriesCollection data = new TimeSeriesCollection(ts);

JFreeChart chart = create(data);
JFrame frame = new JFrame("GraphTest");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
ChartPanel label = new ChartPanel(chart);
frame.getContentPane().add(label);  

ChartPanel chartPanel = new ChartPanel(chart);
JButton buttonC = new JButton("Celsius");
JButton buttonF = new JButton("Farenheit");
JButton button1 = new JButton("Toggle Extension (60 and 300 seconds)");
JButton buttonOff = new JButton("Turn Box");
buttonC.setActionCommand("C");
buttonC.addActionListener(this);
buttonF.setActionCommand("F");
buttonF.addActionListener(this);
button1.setActionCommand("ADD");
button1.addActionListener(this);
buttonOff.setActionCommand("off");
buttonOff.addActionListener(this);

Font font = new Font ("Verdana", Font.BOLD, 26);
text.setFont(font);
degreeC.setFont(font);
degreeF.setFont(font);

JPanel graph = new JPanel(new BorderLayout());
graph.add(chartPanel);
chartPanel.setPreferredSize(new java.awt.Dimension(700,300));
setContentPane(graph);

JPanel content = new JPanel(new GridLayout(3,2));
content.setLayout(new GridLayout(3,2));
content.add(text);
content.add(degreeC);
content.add(buttonC);
content.add(buttonF);
content.add(button1);
content.add(buttonOff);
add(content,BorderLayout.SOUTH);
chartPanel.setPreferredSize(new java.awt.Dimension(700,300));

} 

private JFreeChart create(final XYDataset data){
    JFreeChart chart = ChartFactory.createTimeSeriesChart(
        "Thermometer Reading",
        "Time",
        "Degrees",
        data,
        true,
        true,
        false
    );

    final XYPlot plot = chart.getXYPlot();
    ValueAxis axisy = plot.getDomainAxis();
    axisy.setFixedAutoRange(60000.0);
    axisy = plot.getRangeAxis();
    axisy.setRange(10.0,50.0);
    return chart;
    }

public void actionPerformed(final ActionEvent e) {
    if (e.getActionCommand().equals("C")) {  
        degreeC.setText("degrees C");
    }
    if (e.getActionCommand().equals("F")){
        degreeC.setText("degrees F");
    }
    if (e.getActionCommand().equals("off")){

    }
}

public static void main(String[] args) throws IOException{
    gen myGen = new gen();
    new Thread(myGen).start();

    final Therm prog = new Therm("Thermometer Graph");
    prog.pack();
    prog.setVisible(true);
}

static class gen implements Runnable{
    public void run() {
        while(true) {
            int num = 25 + (int)(Math.random() * ((40 - 30) + 1));
            System.out.println(num);
            ts.addOrUpdate(new Millisecond(), num);
            System.out.println("HI");
            try {
                Thread.sleep(20);
            }
            catch (InterruptedException ex) {
                System.out.println(ex);
            }

        }
    }
}
} 
```

编辑：这是接收错误“”语法错误，插入“类体”以完成类声明“”在“gen”的新代码

```
static class gen{
    while(true) {
        // don't forget to make num final!
        final int num = 25 + (int)(Math.random() * ((40 - 30) + 1));
        System.out.println(num);
        SwingUtilities.invokeLater(new Runnable(){
          public void run() {
            ts.addOrUpdate(new Millisecond(), num);                
          }
        });
        // ts.addOrUpdate(new Millisecond(), num);
        System.out.println("HI");
        try {
            Thread.sleep(20);
        }
        catch (InterruptedException ex) {
            System.out.println(ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:19:07.140

TimeSeries 是一个 Swing GUI 模型，可能只应在 Swing 事件线程上更新。

如果您像这样将更新添加到事件队列会发生什么：

```
 while(true) {
        // don't forget to make num final!
        final int num = 25 + (int)(Math.random() * ((40 - 30) + 1));
        System.out.println(num);
        SwingUtilities.invokeLater(new Runnable(){
          public void run() {
            ts.addOrUpdate(new Millisecond(), num);                
          }
        });
        // ts.addOrUpdate(new Millisecond(), num);
        System.out.println("HI");
        try {
            Thread.sleep(20);
        }
        catch (InterruptedException ex) {
            System.out.println(ex);
        }
    } 
```

如果这没有帮助，请打印异常的整个堆栈跟踪，并指出堆栈跟踪引用的类中的任何行。

# objective-c - 继承的简单示例（来自 Kochan 的书）

> ID：12791607
> 
> 赞同：1
> 
> 时间：2012-10-09T01:18:33.447
> 
> 标签：objective-c

Kochan- 在 Objective-C 中编程。

两行代码看不懂。（标记为“评论”）

XYPoint.h 接口文件

```
#import <Foundation/Foundation.h>
@interface XYPoint: NSObject
{
int x;
int y;
}
@property int x, y;
-(void) setX: (int) xVal andY: (int) yVal;    
@end 
```

XYPoint.m 实现文件

```
#import "XYPoint.h"
@implementation XYPoint.h
@synthesize x, y;
-(void) setX: (int) xVal andY: (int) yVal
{
x = xVal;
y = yVal;
}
@end 
```

Rectangle.h 接口文件

```
#import <Foundation/Foundation.h>
@class XYPoint;
@interface Rectangle: NSObject
{
int width;
int height;
XYPoint *origin; // What does this line mean?  
}
@property int width, height;
-(XYPoint *) origin;
-(void) setOrigin: (XYPoint *) pt;
-(void) setWidth: (int) w andHeight: (int) h;
-(int) area;
-(int) perimeter;
@end 
```

Rectangle.m 实现文件

```
#import "Rectangle.h"
@implementation Rectangle
@synthesize width, height;
-(void) setWidth: (int) w andHeight: (int) h
{
width = w;
height = h;
}
–(void) setOrigin: (XYPoint *) pt
{
origin = pt;
}
–(int) area
{
return width * height;
}
–(int) perimeter
{
return (width + height) * 2;
}
–(XYPoint *) origin
{
return origin;
}
@end 
```

测试程序

```
#import "Rectangle.h"
#import "XYPoint.h"
int main (int argc, char *argv[])
{
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
Rectangle *myRect = [[Rectangle alloc] init];
XYPoint *myPoint = [[XYPoint alloc] init];
[myPoint setX: 100 andY: 200];
[myRect setWidth: 5 andHeight: 8];
myRect.origin = myPoint; // What does this line mean? 
NSLog (@"Rectangle w = %i, h = %i", myRect.width, myRect.height);
NSLog (@"Origin at (%i, %i)",myRect.origin.x, myRect.origin.y);
NSLog (@"Area = %i, Perimeter = %i",
[myRect area], [myRect perimeter]);
[myRect release];
[myPoint release];
[pool drain];
return 0;
} 
```

输出

```
Rectangle w = 5, h = 8
Origin at (100, 200)
Area = 40, Perimeter = 26 
```

Kochan 对这一行的解释 myRect.origin = myPoint; 是：“将矩形的宽度和高度分别设置为 5 和 8 后，您调用了 setOrigin 方法将矩形的原点设置为 myPoint 指示的点。” 但是我们没有调用 setOrigin！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:28:09.227

```
myRect.origin = myPoint; 
```

与（几乎）相同

```
[myRect setOrigin:myPoint]; 
```

这只是实现相同结果的不同方式。

正如马赫什解释的那样，

```
XPoint *origin; 
```

声明一个名为 origin 的指针（变量），类型为 XPoint。

# linux - /proc/net/wireless 中的“状态”字段

> ID：12791608
> 
> 赞同：1
> 
> 时间：2012-10-09T01:18:39.733
> 
> 标签：linux, bash, networking

我试图检查是否有任何无线接口使用 bash 脚本启动。我想我可以通过检查 /proc/net/wireless 中每个接口的 Status 字段来做到这一点。但是，我试图查找对该字段中可能值的参考以及它们的含义，但似乎没有任何结果。有人知道吗？这是解决这个问题的理想方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:06:12.177

您将需要检查`operstate`每个接口以判断它是否是；向上、向下或未知。这是一种使用方法`GNU awk`：

```
awk '{ split(FILENAME, array, "/"); print array[5] ": " $1 }' $(find /sys/class/net/*/operstate ! -type d) 
```

在我的系统上，这里有一些结果：

```
eth0: up
lo: unknown
vboxnet0: down
wlan0: up 
```

* * *

要仅检查无线接口，您需要在每个接口下检查名为“无线”的文件夹。这是使用`GNU awk`.

```
awk -F "/" 'FNR==NR { wire[$5]++; next } { split(FILENAME, state, "/"); if (state[5] in wire && $1 == "up") print state[5] }' <(find /sys/class/net/*/wireless -type d) $(find /sys/class/net/*/operstate ! -type d) 
```

结果：

```
wlan0 
```

伪代码：

```
1\. Get the directory names of the wireless devices as the 1st argument
2\. Split these names on the "/" delimiter
3\. Add the 5th column (the name of the wireless device) to an array called 'wire'
4\. Now read in the operstates of all network interfaces as the 2nd argument
5\. Split the interface filenames on the "/" delimiter to an array called 'state'
6\. If the interface is a wireless interface (i.e. if it's in the array called
   wire) and its operstate is "up", print it. 
```

# java - 代码格式化：处理长调用、操作和布尔逻辑

> ID：12791614
> 
> 赞同：0
> 
> 时间：2012-10-09T01:19:32.820
> 
> 标签：java, javascript, format

我确信这已经被回答过，但我很好奇格式化长代码行时的最佳实践。

**如果它们运行时间过长，我们如何格式化它们**

> 请注意，这不是关于下面的正确代码，而是关于我们如何格式化每种类型的 run on 语句。

*假设我们在 javascript/jquery 中有一个很长的条件运算符*

```
var tablesToHide = $('table').length > 1 ? $('table') : $($('.nav > li[class="active"] > a').attr('href'));
tablesToHide.hide(); 
```

*假设我们在 java 中有一个长的带有空检查的条件*

```
if(person.firstName != null && person.firstName.length() > 32 && person.firstName.length() < 5 && person.lastName != null &&  person.lastName.length() > 32 && person.lastName.length() < 5){//ridiculous operation} 
```

*假设我们有一个很长的操作*

```
long worldVsUnitedStates = (worldDuckCount + worldCatCount + worldTugBoatCount)/(unitedStatesTugBoatCount + unitedStatesDuckCount + unitedStatesCatCount) 
```

*像 Guava 操作这样的长方法调用*

```
final Iterable<AccountingDocument> documentList = Iterables.filter(resultRecord.getAccountingDocuments(), AccountingDocument.class); 
```

大型方法参数，例如日志记录语句

```
logger.entering("UserAccountingAdministrationController", "createNewUserAccountingDocument", new Object[] { userAccountingForm, result, model }); 
```

由于使用 FindBugs 和 throws 声明而导致的大方法参数

```
public void saveAccountingFormWithValues( @Nullable FooA firstValue, @Nonnull FooB secondValue, @Nullable FooC thirdValue, @Nullable FooD fourthValue) throws DataAccessException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:37:10.323

[Java 编码约定](http://www.oracle.com/technetwork/java/codeconventions-150003.pdf)中有一项建议，即代码行不应超过 80 个字符*，“因为许多终端和工具不能很好地处理它们”* ......显然，这不再适用，但是，应该这并不意味着我们不应该争取可读性。

即使使用 LCD 和高分辨率屏幕，也不是每个人都会使用相同的字体大小（我的一位开发人员因为他们的眼睛而使用 14-16 pt 字体），因此您应该以可读性为目标并使语句易于理解。

尽可能将逻辑元素组合在一起，特别是在`if`语句和复杂计算等方面......

很多都归结为单个声明（还要记住，并非所有选项卡都是平等的），但是......

我个人会使用类似...

```
if(person.firstName != null && 
   person.firstName.length() > 32 && 
   person.firstName.length() < 5 && 
   person.lastName != null &&  
   person.lastName.length() > 32 && 
   person.lastName.length() < 5) {...} 
```

和

```
long worldVsUnitedStates = (worldDuckCount + 
                            worldCatCount +
                            worldTugBoatCount) /
                           (unitedStatesTugBoatCount + 
                            unitedStatesDuckCount + 
                            unitedStatesCatCount) 
```

和

```
final Iterable<AccountingDocument> documentList = Iterables.filter(
    resultRecord.getAccountingDocuments(), 
    AccountingDocument.class); 
```

恕我直言

# cloudbees - Cloudbees Lift ClickStart pom.xml 码头依赖？

> ID：12791620
> 
> 赞同：0
> 
> 时间：2012-10-09T01:20:27.610
> 
> 标签：cloudbees

[CloudBees Lift 模板 pom.xml](https://github.com/CloudBees-community/lift_template/blob/master/pom.xml)将 Jetty 指定为依赖项，即使 Jetty 尚不适用于 Cloudbees。这只是样板 pom.xml 的剩余部分，还是需要它？

```
<dependency>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty</artifactId>
    <version>6.1.26</version>
</dependency> 
```

...

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.22</version>
    <configuration>
      <contextPath>/</contextPath>
      <scanIntervalSeconds>5</scanIntervalSeconds>
    </configuration>
  </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:45:27.867

在 CloudBees 上运行您的应用程序时没有必要，但如果您愿意，它可以让您在本地运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:36:00.237

我认为这是 lift 的遗留问题——我们现在可以通过普通的 JVM 应用程序运行 jetty，如果这是首选的话（但是需要新的 clickstart）。

[http://developer.cloudbees.com/bin/view/RUN/Java+Container](http://developer.cloudbees.com/bin/view/RUN/Java+Container)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:46:15.440

我建议你 fork [https://github.com/CloudBees-community/lift_template](https://github.com/CloudBees-community/lift_template)，尝试没有这个依赖的clickstart，如果你成功部署它没有这个依赖就创建一个pull-request

# php - Drupal 7 - 需要更改使用 ajax 提交的表单值

> ID：12791622
> 
> 赞同：1
> 
> 时间：2012-10-09T01:20:30.880
> 
> 标签：php, ajax, drupal, drupal-7

我有一个通过 ajax 提交的暴露过滤器的视图。问题是当它提交时，它从查询字符串中获取一个值并添加到正在发送的值中。例如，如果 ?page=2 在查询字符串中，它将被包含在 ajax 标头中。我需要在处理之前更改 ajax 标头，以便获得正确的页面，基本上我需要在 ajax 标头中设置 page=0。

我尝试了 hook_ajax_render_alter，但这只会改变从视图发回的命令。而且 hook_alter_form 似乎也不对。

通过使用 hook_search_api_solr_query_alter 更改搜索查询，我能够获得正确的结果，但是寻呼机链接返回时错误的链接处于活动状态。

所以我的问题的本质是，在处理视图之前，是否有一个钩子可以用来改变 ajax 标头？

# php - Mysql Group By and Order by 给出奇怪的结果

> ID：12791624
> 
> 赞同：2
> 
> 时间：2012-10-09T01:20:41.153
> 
> 标签：php, mysql, sql, group-by, sql-order-by

我正在开发一个聊天工具，但我在使用 group by 和 order by 返回正确结果的 sql 时遇到问题。该表的结构如下所示；

表名：聊天

```
id | from | to | sent | read | message 
```

'from' 和 'to' 是有符号整数（用户 ID） 'sent' 是发送消息时的时间戳。'message' 是文本 msg 'read' 是一个 int（0 表示未读，1 表示已读）。

我试图返回按用户分组的最新消息列表

例如

```
id         from     to      message        sent    read
7324       21      1       try again    1349697192  1
7325       251       1     yo whats up  1349741502  0
7326       251       1     u there      1349741686  0 
```

应该在查询后返回

```
 id      from    to     message      sent        read
7326        251     1        u there    1349741686   0
7324        21      1       try again    1349697192  1 
```

这是我的查询

```
$q ="SELECT chat.to,chat.read,chat.message,chat.sent,chat.from FROM `chat` WHERE chat.to=$userid GROUP BY chat.from ORDER BY chat.sent DESC,chat.read ASC LIMIT ".(($page-1)*$count).",$count"; 
```

它没有返回所需的结果；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:24:05.370

您应该创建一个确定最新的子查询，`sent`然后`users`将其与`chat`表连接。

```
SELECT  a.*                   -- this will list all latest rows from chat table
FROM    `chat` a
        INNER JOIN
        (
            SELECT `from`, `to`, MAX(sent) maxSent
            FROM `chat`
            GROUP BY `from`, `to`
        ) b ON a.`from` = b.`from` AND
                a.`to` = b.`to` AND
                a.sent = b.maxSent
-- WHERE ....                 -- add your condition(s) here 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/63bdf/1)

# django - Django 'int' 对象没有属性 'status_code'

> ID：12791630
> 
> 赞同：2
> 
> 时间：2012-10-09T01:21:35.053
> 
> 标签：django

我从 def start 方法开始，它调用 go_adder 在 adder.html 中将 num 值相加 5 次，直到 num 等于 5。之后，adder 方法应该返回 ready=1

在views.py

```
def start(request):
    num=0
    ready_or_not=go_adder(num)
    return HttpResponse("Ready: %s "%str(ready_or_not))

def go_adder(num):
    ready=0
    if num<5:
        return render_to_response('adder.html',{'num':num})
    elif num==5:
        ready=1
        return ready

def check_post(request,num):
    if request.method == 'POST':
        num+=1
        return adder(num) 
```

当我尝试运行此代码段时，它一直有效，直到我的“num = 5”，然后我得到那个错误：

```
'int' object has no attribute 'status_code' 
Exception Location: C:\Python27\lib\site-packages\django\middleware\common.py in process_response, line 94 
```

和 Traceback 说：

```
C:\Python27\lib\site-packages\django\core\handlers\base.py in get_response
                response = middleware_method(request, response) ...
▶ Local vars
C:\Python27\lib\site-packages\django\middleware\common.py in process_response
        if response.status_code == 404: ...
▶ Local vars 
```

我该如何解决这个错误？请你帮助我好吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T01:24:47.437

django 视图需要返回一个`HttpResponse`对象。您正在这样做 while `num < 5`，但是当您返回 int 时`num == 5`：

```
def adder(num):
    ready=0
    if num<5:
        num+=1
        # This renders the template and returns and HttpResponse; good
        return render_to_response('adder.html',{'num':num})
    elif num==5:
        ready=1
        # DONT RETURN AN INT HERE. RETURN AN HttpResponse
        return ready 
```

如果你想要什么时候`num==5`返回一个数字 1 的纯文本响应，那么你可以返回一个 HttpResponse 并设置内容类型：

```
 elif num==5:
        ready=1
        return HttpResponse(str(ready), content_type="text/plain") 
```

## 更新 1

根据我们的对话，您建议无论如何都希望视图不断传递计数值，并且您正在`num`以实际形式发布值。如果数量小于 5，则应返回一种模板，否则应返回另一种模板。

您可以将两个不同的视图组合成一个视图，以同时处理页面首次加载时的原始 GET 请求和表单提交的 POST 请求。只需确保将您的表单指向同一页面即可。

```
def check(request):
    num = 0

    if request.method == 'POST':
        num = int(request.POST.get('num'))

    return adder(num)

def adder(num):
    if num < 5:
        num += 1
        tpl_name = 'adder.html'
    else:
        tpl_name = 'print.html'

    return render_to_response(tpl_name, {'num':num}) 
```

*   `check()`是你的单一观点。
*   `adder()`是辅助函数，它将添加值、检查它并`HttpResponse`根据该值返回一个对象。您必须始终将其从您的视图返回给客户。
*   两个模板都将传递包含值的上下文`num`

## 更新 2

您说您实际上是`num`通过 url 而不是通过 POST 表单传递的。对上一个示例进行小幅调整。你甚至`adder()`不再需要一个。您只需要一个视图。

将您的网址设置为具有可选`num`模式：

**网址.py**

```
(r'^checker/(?P<num>\d+)$', 'myapp.views.check') 
```

**视图.py**

```
def check(request, num=0):
    num = int(num)
    if num < 5:
        num += 1
        tpl_name = 'adder.html'
    else:
        tpl_name = 'print.html'

    return render_to_response(tpl_name, {'num':num}) 
```

您的“检查器”网址现在有一个可选编号。如果没有在 url 中传递，它将是`0`视图中的值。如果您将其作为 POST 请求发送，它将添加并返回不同的模板。

# html - 去除文本输入的内阴影

> ID：12791631
> 
> 赞同：86
> 
> 时间：2012-10-09T01:22:22.307
> 
> 标签：html, css, input

所以我有一个文本输入，我在 chrome 上使用 html5，我想更改文本输入的外观，我已经删除了焦点上的轮廓（chrome 上的橙色），我将背景设置为浅色`#f1f1f1`但现在在顶部和左侧有一个更厚的边框，就像它看起来像是被推入的，当背景颜色没有变化时，这不会发生。如何删除它？抱歉，我无法在移动设备上提供图片。

它发生在chrome，ie和Firefox上，无法测试任何其他人。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-10-09T01:28:50.123

`border-style:solid;`将覆盖`inset`样式。这是你问的。

`border:none`将一起删除边框。

`border-width:1px`将其设置为类似于背景更改之前的样子。

`border:1px solid #cccccc`更具体，并应用所有三个，宽度，样式和颜色。

示例：[https ://jsbin.com/quleh/2/edit?html,output](https://jsbin.com/quleh/2/edit?html,output)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-09-10T16:55:13.393

这是移动 safari 的解决方案：

```
 appearance: none;
  -moz-appearance: none;
  -webkit-appearance: none; 
```

根据[https://developer.mozilla.org/en-US/docs/Web/CSS/appearance](https://developer.mozilla.org/en-US/docs/Web/CSS/appearance)

并按照此处的建议：[删除 Mobile Safari (iPhone) 上的 textarea 内阴影](https://stackoverflow.com/questions/3062968/remove-textarea-inner-shadow-on-mobile-safari-iphone)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-11-22T01:43:08.707

目前没有任何解决方案有效。这是我的解决方案。您可以添加前缀。

```
box-shadow: inset 0px 0px 0px 0px red; 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-10-09T01:24:28.483

添加`border: none`或`border: 0`完全删除边框，或`border: 1px solid #ccc`使边框变薄而平坦。

要删除 Firefox 中的幽灵填充，您可以使用`::-moz-focus-inner`：

```
::-moz-focus-inner {
    border: 0;
    padding: 0;
} 
```

见[现场演示](http://jsfiddle.net/ZdQnX/)。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-10-09T01:27:11.253

设置`border: 1px solid black`为使所有边相等并删除任何类型的自定义边框（实心除外）。此外，设置`box-shadow: none`为删除应用到它的任何嵌入阴影。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-02-07T05:06:26.573

试试这个
`outline: none;`

现场演示[https://codepen.io/wenpingguo/pen/KQgbXq](https://codepen.io/wenpingguo/pen/KQgbXq)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-01-12T02:34:50.450

所有浏览器，包括 Safari（+ 移动）：

```
input[type=text] {   
    /* Remove */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;

    /* Optional */
    border: solid;
    box-shadow: none;
    /*etc.*/
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-15T22:12:33.327

我正在研究火狐。我遇到了同样的问题，输入类型的文本是自动定义的，看起来像 boxshadow 插图，但事实并非如此。您要更改的是边框...只需设置即可`border:0;`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-15T22:01:39.597

这是一个小片段，尝试一下可能很酷：

```
input {
border-radius: 10px;
border-color: violet;
border-style: solid;
} 
```

请注意：`border-style`删除内部阴影。

```
input {
    border-radius: 10px;
    border-color: violet;
    border-style: solid;
  }
```

```
<input type="text"/>
```

# javascript - 大型 JSON 数据的 JSON 差异，发现一些 JSON 作为另一个 JSON 的子集

> ID：12791639
> 
> 赞同：13
> 
> 时间：2012-10-09T01:24:15.443
> 
> 标签：javascript, json, diff

我有一个问题我想解决，不必花费大量的手动工作来分析作为替代方案。

我有 2 个 JSON 对象（从不同的 Web 服务 API 或 HTTP 响应返回）。两个 JSON 对象之间存在交叉数据，它们共享相似的 JSON 结构，但并不完全相同。一个 JSON（较小的）就像较大的 JSON 对象的子集。

我想找到两个对象之间的所有相交数据。实际上，我对对象内的共享参数/属性更感兴趣，而不是每个对象的参数/属性的实际值。因为我想最终使用来自一个 JSON 输出的数据来构造另一个 JSON 作为 API 调用的输入。不幸的是，我没有为每个 API 定义 JSON 的文档。:(

让这更难的是 JSON 对象非常庞大。如果您通过 Windows 记事本打印出来，它会跨越一页。另一个跨越 37 页。API 返回压缩为单行的 JSON 输出。普通文本比较没有太大作用，我必须手动重新格式化或使用脚本来分解带有换行符的对象等，以便文本比较能够正常工作。尝试使用 Beyond Compare 工具。

我可以进行手动搜索/grep，但是在较小的 JSON 中循环遍历所有参数会很痛苦。可以编写代码来做到这一点，但我也必须花时间去做，并测试代码是否也有效。或者也许已经有一些现成的代码......

或者可以寻找 JSON diff 类型的工具。找了一些。遇到了这些：

[https://github.com/samsonjs/json-diff](https://github.com/samsonjs/json-diff)或[https://tlrobinson.net/projects/javascript-fun/jsondiff](https://tlrobinson.net/projects/javascript-fun/jsondiff)

[https://github.com/andreyvit/json-diff](https://github.com/andreyvit/json-diff)

两者都没有做我想做的事。大概 JSON 太复杂或太大而无法处理。

关于最佳解决方案的任何想法？还是目前最好的解决方案是使用 grep 对每个参数/属性进行手动分析？

就代码解决方案而言，任何语言都可以。我只需要一个解析器或差异工具来做我想做的事。

抱歉，也无法与您共享 JSON 数据结构，它可能被视为机密。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-19T02:28:42.010

[Beyond Compare](http://www.scootersoftware.com/moreinfo.php)效果很好，如果您在其中设置 JSON 文件格式以使用[Python](https://stackoverflow.com/a/1920585/25507)漂亮地打印 JSON。Windows 的示例设置：

1.  安装 Python 2.7。
2.  在 Beyond Compare 中，进入工具下的文件格式下。
3.  单击新建。选择文本格式。输入“JSON”作为名称。
4.  在常规选项卡下：
    *   面具：`*.json`
5.  在转换选项卡下：
    *   转换：外部程序（Unicode 文件名）
    *   加载：`c:\Python27\python.exe -m json.tool %s %t`
        *   注意，命令行中的第二个参数必须是`%t`，如果输入两个`%s`s 会导致数据丢失。
6.  单击保存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-13T13:24:30.447

Jeremy Simmons 创建了一个更好的文件格式包[发布在论坛上：“JsonFileFormat.bcpkg”](http://www.scootersoftware.com/vbulletin/showthread.php?11878-JSON-File-Format)用于[BEYOND COMPARE](http://www.scootersoftware.com)，不需要安装 python 左右。

只需下载文件并使用 BC 打开它就可以了。所以，它更简单。

> **JSON 文件格式**
> 
> 我需要 JSON 文件的文件格式。
> 
> 我想漂亮地打印和排序我的 JSON 以便于比较。
> 
> 我已将我的 bcpackage 附加到我完成的 JSON 文件格式中。
> 
> 格式化是通过 jq - [http://stedolan.github.io/jq/](http://stedolan.github.io/jq/)
> 
> [为实用程序https://github.com/stedolan](https://github.com/stedolan)向 Stephen Dolan 提供道具。
> 
> 我已向 Scooter Software 的人员发送了一条消息，要求他们将其以其他格式包含在页面中。
> 
> 如果您有兴趣在那里看到它，我敢肯定，快速回复该线程并投票将帮助他们看到发布它的价值。附加文件 附加文件 文件类型：bcpkg JsonFileFormat.bcpkg（449.8 KB，58 次查看）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T03:01:26.370

我有一个小型 GPL 项目，可以解决*简单*JSON 的问题。我没有添加对嵌套实体的支持，因为它更像是一个简单的 ObjectDB 解决方案，而不是真正的 JSON（尽管它显然受到了它的启发。

API 非常简单。创建一个新组，填充它，然后通过您需要的任何逻辑参数提取一个子集。

[https://github.com/danielbchapman/groups](https://github.com/danielbchapman/groups)

API的使用基本上像->

```
SubGroup items = group
                  .notEqual("field", "value")
                  .lessThan("field2", 50); //...etc... 
```

实际上支持基本联合和连接，它们几乎可以满足您的需求。

长短，你可能想要一个 Set 作为你的数据类型。考虑到您的比较可能很复杂，您需要一组更复杂的方法。

*我唯一要注意的是它是 GPL。如果您的数据是机密的，那么您可能对该许可证不感兴趣。*

# objective-c - 如何使用 NSViewController 识别 modalForWindow

> ID：12791642
> 
> 赞同：1
> 
> 时间：2012-10-09T01:24:35.583
> 
> 标签：objective-c, macos, cocoa, nswindowcontroller, nsviewcontroller

我的 OSX NSApplicationDelegate 有一个 NSWindow（主窗口）。NSWindow 还包含几个 NSView，其中内容是使用 NSViewControllers 设置的。目前，当我想要一个 NSPanel（一张工作表）从我的一个 NSView 的顶部（而不是从我的应用程序的顶部）下拉时，我遇到了一个问题。我想使用代码：

```
[NSApp beginSheet:self.loginSheet.window
       modalForWindow:self.view.window
        modalDelegate:self
       didEndSelector:nil
          contextInfo:nil]; 
```

loginSheet 是 NSWindowController 的子类，它使用以下方式加载 xib 文件：

```
 loginSheet = [[sheetWindowController alloc] initWithWindowNibName:@"loginSheet"]; 
```

但是，我从我的 NSViewController 运行此代码，而我的 self.view.window 始终为零。我的 NSView 似乎以其他方式正确初始化并且工作正常，但是由于我的 modalForwindow (self.view.window) 为 nil，因此工作表的下拉菜单不起作用。如果我使用代码：

```
 [NSApp beginSheet:self.loginSheet.window
       modalForWindow:[[NSApplication sharedApplication] mainWindow]
        modalDelegate:self
       didEndSelector:nil
          contextInfo:nil]; 
```

它就像一个魅力。但从我所有寻找问题答案的搜索来看，这种工作方法似乎是一个很大的禁忌，因为它阻止了整个应用程序的任何响应。我希望我的工作表链接到我的 NSView 之一，但鉴于该应用程序只有一个 NSWindow，我不知道如何做到这一点？我没有做一些让我的 self.view.window 保持为零的事情吗？有什么好方法可以让我找到自定义视图的父窗口吗？如果您对如何解决此问题有任何建议，或者可以提示我做错了什么，将不胜感激。

谢谢！干杯，特隆德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:24:30.280

您应该查看“表格简介”文档的“定位表格”部分。它解释了如何使用 window:willPositionSheet:usingRect 使工作表从其他地方出现在窗口标题栏下方：

# php - PHP => 调用不存在的类常量，如何处理？

> ID：12791652
> 
> 赞同：1
> 
> 时间：2012-10-09T01:25:48.583
> 
> 标签：php

就像`__call`我们可以在 PHP 中使用的魔术方法来挂钩对未定义方法的调用一样，有没有办法挂钩对未定义常量或变量的调用？

像`A::B`， where`B`不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:30:07.840

不。常量是在操作码编译时而不是运行时评估的，所以没有办法“捕捉”它们。与此相关的 php 仍然存在一个问题，即父类无法在父方法中调用子常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:29:56.283

您可能正在寻找[`__get`and`__set`](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)。~~不过，我不确定它如何与静态常量一起使用，您可能只能使用实例对象。~~ [请参阅 G-Nugget](https://stackoverflow.com/questions/12791652/php-call-to-non-existing-class-constants-way-to-handle/12791685#comment17294579_12791685)关于静态使用它们的评论。

# java - 完美的shuffle算法实现错误

> ID：12791653
> 
> 赞同：1
> 
> 时间：2012-10-09T01:25:51.637
> 
> 标签：java

此代码对于完美的洗牌算法是否正确？我总是试图生成一个从 0 到 n 的数字，并将该数字与数组中的最后一个元素交换，从而减小 n 的范围。但是，当 n=0 时，我得到一个异常。我该如何处理这种情况？

```
 int [] array ={1,2,3,4,5};
    Random random = new Random();
    int n=array.length;

    while(n--!=0)
    {
        int number = random.nextInt(n);
        int temp = array[n];
        array[n] = array[number];
        array[number] = temp;
    } 
```

编辑：如果我将其更改为 --n >0 那么它可以正常工作，但是在这种情况下我是否正确实施了洗牌算法，因为我从来没有为 n=0 做任何事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:45:26.367

在您的代码段中

```
 while(n--!=0) 

 if n is 1, it will become 0 and `random.nextInt(0)` will return an error. 
```

[参考这个链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:57:39.590

如果您传递 0 的参数，我认为 nextInt 不起作用。

洗牌的最佳方法是使用[Fisher Yates 算法](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle)。它速度快，可以就地工作，而且没有偏见：

```
int [] array = {1,2,3,4,5};
Shuffle(array, new Random());

// Fisher Yates shuffle - see http://en.wikipedia.org/wiki/Fisher-Yates_shuffle
void Shuffle(int[] array, Random RNG)
{
    for (int i = array.length - 1; i >= 1; i -= 1)
    {
        // get integer in range of j >= 0 && j < i + 1
        int j = RNG.nextInt(i + 1);
        //assert(j >= 0 && j <= i);
        if (i != j)
        {
            // only swap if i and j are different
            int temp = array[i];
            array[i] = array[j];
            array[j] = temp;
        }
    }
} 
```

# r - 格子图中的传奇外观

> ID：12791657
> 
> 赞同：1
> 
> 时间：2012-10-09T01:26:17.267
> 
> 标签：r, lattice

我正在寻找 1）“A”、“B”和“C”之间的更多垂直空间，“\n”不是我想要的解决方案。2）我想改变符号和文本的绘制顺序。这意味着，首先我想绘制图例的线条，然后是该文本。

```
 attach(mtcars)
 gear.f<-factor(gear,levels=c(3,4,5),
 labels=c("3gears","4gears","5gears"))
 cyl.f <-factor(cyl,levels=c(4,6,8),
 labels=c("4cyl","6cyl","8cyl"))

 densityplot(~mpg|cyl.f,
      main="Density Plot by Number of Cylinders",
      xlab="Miles per Gallon"
     ,par.settings = list(superpose.line = list(col=c(1,2,3)))
     ,auto.key=list(corner = c(.98, .02),text = c("A", "B", "C")
                   ,lines=T,points=F)
            ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:57:13.177

从美学的角度来看，我认为这更好，但您可以通过更改关键参数的“x”和“y”参数来移动它以适应您的感受：

```
 densityplot(~mpg|cyl.f,
      main="Density Plot by Number of Cylinders",
      xlab="Miles per Gallon"
     ,par.settings = list(superpose.line = list(col=c(1,2,3)))
     ,key = list(lines = list(col=c("black", "red", "green")),
                  text = list(c("A", "B", "C")), x=0.8, y=0.8, corner.x=0,corner.y=0 )
            ) 
```

我不认为你可以用'auto.key'或'simpleKey'来做到这一点。）

# wolfram-mathematica - 使用 Mathematica 的泊松求解器

> ID：12791659
> 
> 赞同：2
> 
> 时间：2012-10-09T01:26:32.490
> 
> 标签：wolfram-mathematica, solver, poisson

我正在寻求有关我在 Mathematica 中编写的 Poisson Solver 的帮助。插入数组的代码很长，但可以在[http://pastebin.com/uSrSDcW6找到完整的详细信息](http://pastebin.com/uSrSDcW6)

我正在使用源自泊松方程的中心差分法计算给定电荷密度的电压。计算电压后，我测试数据集的收敛性。我将收敛阈值设置为 10^-1000+ 的数量级。我将循环设置为在 10000 次迭代后退出，以防万一出现问题，作为故障保险。我有一个循环计数器以保持理智。只要收敛阈值设置为 10^-100，程序似乎运行良好。

我的问题是：无论我更新阈值，例如 10^-100、10^-150，计算在 633 次迭代后停止并退出循环。我将不胜感激，我完全被困住了。我已经在程序中添加了评论，这些评论应该对这个论坛上的任何人都有解释。再说一次，我知道这个描述是有限的，所以请查看附加的 URL [http://pastebin.com/uSrSDcW6](http://pastebin.com/uSrSDcW6)以获得完整的程序。

***更新***10/9/12* ***我已将问题隔离到 16 位机器精度。我需要将它打开到我的机器最大精度为 10^309。Mathematica 帮助很少说明如何做到这一点。例如“N [机器精度，50]”。我将在我的程序中将其设置在哪里以将其应用于所有计算？如果有帮助，我会在此处粘贴循环

Vnew / Vold / RHO 是 10x10x34 矩阵 Epsilon 是一个常数
（*将 ConvergenceLoop 初始化为 O - 如果需要，这将作为故障安全退出循环*）

收敛环 = 0;

（*将收敛初始化为零*）

收敛 = 0;

而[收敛 == 0 && 收敛循环 < 10000,

（*遍历所有 i,j,k 元素，计算新的电压值*）

Do[Vnew[[i]][[j]][[k]] = (1/(2/deltaX^2 + 2/deltaY^2 + 2/deltaZ^2)) *(((Vold[[i + 1]][[j]][[k]] +

```
 Vold[[i - 1]][[j]][[k]])/(deltaX^2)) + ((Vold[[i]][[j + 1]][[k]] + 

  Vold[[i]][[j - 1]][[k]])/(deltaY^2)) + ((Vold[[i]][[j]][[k + 1]] + 

   Vold[[i]][[j]][[k - 1]])/(deltaZ^2)) + ((Rho[[i]][[j]][[k]]/Epsilon))), {i, 2, 9}, {j, 2,9}, {k, 2, 33}]; 
```

（*假设收敛，因此当测试达到超过定义的收敛阈值的第一个值时触发循环*）

收敛 = 1;

（*这是收敛测试。用户定义的收敛阈值*）

```
 Do[If[Vold[[i]][[j]][[k]] == 0, Null, 

    If[(Vnew[[i]][[j]][[k]] - Vold[[i]][[j]][[k]])/Vold[[i]][[j]][[k]] > .0000001,               Convergence = 0;

(*This is purely diagnostic. I added a Tracker point to follow the convergence along. 
```

用户在任何元素上定义*)

```
If[i == 5 && j == 5 && k == 10, 

 Print[ "Tracker Point" (Vnew[[i]][[j]][[k]] - 
      Vold[[i]][[j]][[k]])/Vold[[i]][[j]][[k]]], Null],Null]], {i, 2, 9}, {j, 2, 9}, {k, 2, 33}]; 
```

（*忽略第一次迭代，直到 Vnew 和 Vold 非零*）

If[ConvergenceLoop < 2, Convergence = 0, Null];

（*迫使 Vold 与 Vnew 一起进化*）

Vold = Vnew；

收敛循环 ++;]

（*为未来计划添加了 SessionTime*）

如果[ConvergenceLoop == 10000,

Print["达到收敛循环限制。" (SessionTime[]/3600) ],

Print["未达到收敛循环限制。"]];

（*我们打破了while循环，意味着我们的数据收敛了，所以打印收敛的值*）

如果[收敛 == 1,

打印[ConvergenceLoop“恭喜收敛！” MatrixForm [Vnew]], Print["没有收敛！"]];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:49:28.830

由于根据上面的评论，您已将其缩小为我怀疑的精度问题，请阅读以下内容：

[绘制高次和大系数多项式时的有趣行为](https://mathematica.stackexchange.com/q/3152/121)

[全局精度设置](https://mathematica.stackexchange.com/q/6421/121)

[对（明显的）不一致的精度感到困惑](https://mathematica.stackexchange.com/q/10624/121)

# sql-server-ce - 如何通过 NSIS 安装 SQL Server Compact Edition 4.0

> ID：12791661
> 
> 赞同：0
> 
> 时间：2012-10-09T01:26:35.787
> 
> 标签：sql-server-ce, nsis

我正在寻找一个示例 NSIS 脚本，仅在必要时检测和安装 SQL Server Compact Edition 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:26:35.787

为我未来的自己回答我自己的问题。包括：

```
!include "x64.nsh"
!include LogicLib.nsh 
```

部分如下。版本检查正在测试 SP1

```
Section "SQL Server Compact Edition 4.0 (required)"
    SectionIn RO

    ${If} ${RunningX64} 
        ReadRegStr $0 HKLM "SOFTWARE\Wow6432Node\Microsoft\Microsoft SQL Server Compact Edition\v4.0\ENU" "DesktopRuntimeVersion"
        DetailPrint "Microsoft SQL Server Compact Edition (64 bit) DesktopRuntimeVersion=$0"
        ${If} $0 == '4.0.8876.1'
            DetailPrint "Microsoft SQL Server Compact Edition 4.0 SP1 (64 bit) is installed"
        ${Else}
            DetailPrint "Installing Microsoft SQL Server Compact Edition 4.0 SP1 (64 bit)"
            SetDetailsPrint listonly
            ExecWait '"$INSTDIR\Tools\SSCERuntime_x64-ENU.exe" /i /passive'
        ${EndIf}
    ${Else}
        ReadRegStr $0 HKLM "SOFTWARE\Microsoft\Microsoft SQL Server Compact Edition\v4.0\ENU" "DesktopRuntimeVersion"
        DetailPrint "Microsoft SQL Server Compact Edition (32 bit) DesktopRuntimeVersion=$0"
        ${If} $0 == '4.0.8876.1'
            DetailPrint "Microsoft SQL Server Compact Edition 4.0 SP1 (32 bit) is installed"
        ${Else}
            DetailPrint "Installing Microsoft SQL Server Compact Edition 4.0 SP1 (32 bit)"
            SetDetailsPrint listonly
            ExecWait '"$INSTDIR\Tools\SSCERuntime_x86-ENU.exe" /i /passive'
        ${EndIf}
    ${EndIf}

    SetDetailsPrint lastused

SectionEnd 
```

顺便说一句，我看到一些博客说 x86 和 x64 必须安装在 64 位系统上，但如果我在 64 位系统上运行 x86，则会出现不兼容的错误。因此只安装或。

# android - 重试网络通信的正确方法

> ID：12791663
> 
> 赞同：2
> 
> 时间：2012-10-09T01:26:55.787
> 
> 标签：android

我正在构建一个应用程序，该应用程序使用重复警报和 IntentService 定期从网站检索数据。在运行更新之前，我使用 ConnectivityManager 检查网络连接。

如果 ConnectivityManager 报告没有活动网络，我希望在网络变为活动状态时再次尝试更新。使用 BroadcastReceiver 监听 Co​​nnectivityManager.CONNECTIVITY_ACTION 似乎是最好的方法，但是注册/注销此接收器的正确方法是什么？

我在想，当 IntentService 中的网络检查失败时，我可以使用 ApplicationContext 注册 BroadcastReceiver，这样当服务停止时它就不会被取消注册。然后我可以在接收器触发时在它自己的 onReceive 方法中取消注册接收器吗？我离基地很远吗？

一些伪代码示例：

我的意图服务：

```
if ( !isNetworkConnected() )
    getApplicationContext().registerReceiver( new MyBroadcastReceiver(), new IntentFilter( ConnectivityManager.CONNECTIVITY_ACTION ); 
```

我的广播接收器：

```
public void onReceive( Context context, Intent intent ) {
    context.getApplicationContext().unregisterReceiver( this ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:18:57.830

我相信我已经找到了解决问题的方法。使用 ApplicationContext 注册接收器将不起作用，因为当应用进程终止时它将被取消注册。

我相信处理这个问题的正确方法是在清单中声明接收器，然后根据需要使用 PackageManager.setComponentEnabledSetting 启用/禁用接收器（代替我上面的两个示例）。

所以，我会在 Manifest 中将其注册为禁用（启用 = false），然后执行以下操作：

我的意图服务：

```
protected void onHandleIntent( Intent intent ) {
    if ( !isNetworkConnected() )
        getPackageManager().setComponentEnabledSetting(
            new ComponentName( this, MyBroadcastReceiver.class ),
            PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
            PackageManager.DONT_KILL_APP ); 
```

我的广播接收器：

```
public void onReceive( Context context, Intent intent ) {
    getPackageManager().setComponentEnabledSetting(
        new ComponentName( this, MyBroadcastReceiver.class ),
        PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
        PackageManager.DONT_KILL_APP ); 
```

# python - 使用 cx_freeze 创建 python exe 文件后，该文件不执行任何操作

> ID：12791666
> 
> 赞同：11
> 
> 时间：2012-10-09T01:27:15.353
> 
> 标签：python, exe, cx-freeze

我最近创建了使用 cx_freeze 来创建 python 3.2.2 exe 文件。当我尝试运行 exe 文件时，什么也没发生。

这是我的 test.py 文件的代码：

```
print("hello world")

for i in range(5):
    print(i) 
```

这是我的 testSetup.py 文件的代码：

```
from cx_Freeze import setup, Executable

exe = Executable(
   script="test.py",
   base="Win32GUI",
   targetName="Test.exe"
   )

setup(
    name = "Test",
    version = "0.1",
    description = "I wish programming was this easy",
    executables = [exe]) 
```

cx_freeze 创建的构建目录有一个名为 exe.win32-3.2 的文件夹，其中包含以下文件：

bz2.pyd
library.zip
python32.dll
Test.exe
unicodedata.pyd

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-21T19:07:17.237

我的建议：

1.  设置`base = None`（试试看：也许这就是你想要的？`base = Win32GUI`是否“隐藏”控制台 - 这在你构建 GUI 时很有用）

2.  在与您的 .exe 相同的文件夹中创建一个调用您的 .exe 的批处理文件（带有 .bat 的文本文件）：

这进入你的批处理文件：

```
name-of-your-app.exe %1

PAUSE 
```

您将通过单击批处理文件来启动您的应用程序 - 它使控制台保持打开状态，因此您可以重新读取错误/输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T01:30:28.360

将 a`input()`放在代码底部，然后重试：

看起来你的`.exe`运行和存在之前你可以看到任何东西，所以`input()`在底部放置一个让脚本在退出之前等待用户输入。

```
print("hello world")

for i in range(5):
    print(i)
input() 
```

# angularjs - 如何为自定义 Angular $resource 操作指定 headers 参数

> ID：12791667
> 
> 赞同：27
> 
> 时间：2012-10-09T01:27:41.960
> 
> 标签：angularjs

以下工作正常，但我认为这会修改 $httpProvider 全局，这不是我想要的。

```
angular.module('SessionService', ['ngResource'])
    .config(function($httpProvider){
        $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'
    })
    .factory('Login', function($resource){
        var resource = $resource('/adminui/login',{},{
            post:{
                method:"POST",
                isArray:false
            },
        });
        return resource;
    })
LoginCtrl = function($scope,Login) {
    $scope.login = function(){
        Login.post($.param({user:$scope.user.username,password:$scope.user.password}),$.noop,$.noop)
    }
} 
```

反正有这样做吗？

```
...
    .factory('Login', function($resource){
        var resource = $resource('/adminui/login',{},{
            post:{
                method:"POST",
                isArray:false,
                headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'} // ignored
            },
        });
        return resource;
    }) 
```

“headers”参数似乎被忽略了。请求仍然

`Content-Type:application/json;charset=UTF-8`

我的标头值可以吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-04T02:29:46.793

我已经确认 1.1.3 确实支持这一点。但是，您需要确保您还获得了 1.1.3 版本的资源服务。快速测试：

```
angular.module('myApp', ['ngResource']).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/', {templateUrl: 'partials/partial1.html',controller: 'MyController'});
    $routeProvider.otherwise({redirectTo: '/'});
  }])

  .controller("MyController", function( $scope, Bug) {
    Bug.post({test:"test"});
  })

  .factory('Bug', function($resource){
    var resource = $resource('/bug',{},{
        post:{
            method:"POST",
            isArray:false,
            headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'} 
        },
    });
    return resource;
}); 
```

这将发出请求，并将标头设置为（使用 Chrome 确认）：

```
Content-Type:application/x-www-form-urlencoded; charset=UTF-8 
```

快速说明，我无法找到 angular-resource.js 的下载，所以我不得不去 github 网站下载它。它就在[这里](https://raw.github.com/angular/angular.js/v1.1.3/src/ngResource/resource.js)。

对于一些傻笑，我创造了一个小提琴。请注意，将有一个失败的 POST 调用，但它的标头设置正确。[示例小提琴](http://jsfiddle.net/Xesued/eYeM3/2/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-13T20:39:26.307

虽然开发文档（截至 10 月 12 日）表明可以在 $resource 中覆盖标头，但它尚未发布（v1.0.2 或 v1.1.0）。但是，该功能位于 v1.0.x 和 master 分支中。为了获得该功能，您现在可以考虑从 v1.0.x 分支构建。

如何构建：[http ://docs.angularjs.org/#H1_4](http://docs.angularjs.org/#H1_4)

或者，您可以从快照构建中提取： http: [//code.angularjs.org/snapshot/](http://code.angularjs.org/snapshot/)

看起来这个功能将在下一个版本中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-17T17:54:14.387

只需将链接添加到 1.1.5 资源文件（和其他）：[http ://code.angularjs.org/1.1.5/](http://code.angularjs.org/1.1.5/)

您可以设置 URL 以匹配您要查找的版本。
例如 1.1.4：[http ://code.angularjs.org/1.1.4/](http://code.angularjs.org/1.1.4/)

# java - 如何使用来自 apache.commons 的工厂？

> ID：12791669
> 
> 赞同：0
> 
> 时间：2012-10-09T01:27:55.883
> 
> 标签：java, factory, apache-commons, factory-pattern, jung

java代码的用途是什么：`org.apache.commons.collections15.Factory`

1.  是否有文档（我找不到任何有用的东西）
2.  如何使用它在 Java Jung 图形包的[BarabasiAlbertGenerator](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/algorithms/generators/random/BarabasiAlbertGenerator.html)的构造函数中实例化类型为:`Factory<Integer>`的对象？`Factory<String>`
3.  如何获得功能正常的 BarabasiAlbertGenerator。

这是我的代码，它只输出一个顶点。

```
 Factory<Graph<String, Integer>> graphFactory = SparseGraph.getFactory();
    Integer[] ints = {1};
    String[] strs = {"12"};
    Class[] typesStr = {String.class};
    Class[] typesInt = {int.class};

    Factory<String> vertexFactory = InstantiateFactory.getInstance(String.class, typesStr, strs);
    Factory<Integer> edgeFactory = InstantiateFactory.getInstance(Integer.class, typesInt, ints);
    HashSet<String> seedVertices = new HashSet(); 
    for(int i = 0; i < 10; i++)
    {
        seedVertices.add("v"+i);
    }

    BarabasiAlbertGenerator<String, Integer> barabasiGen = new 
            BarabasiAlbertGenerator<String,Integer>(graphFactory, vertexFactory,
                                                    edgeFactory, seedVertices.size(), 1, seedVertices);

    Graph g = barabasiGen.create(); 
```

我认为我的问题与我的 vertexFactory 和 edgeFactory 有关。在我看来，我的 vertexFactory 似乎只能创建值为 12 的顶点，而我的 edgeFactory 只能创建值为 1 的边。因此，该图将只有 1 个值为 12 的顶点。这个推理准确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:32:57.230

你做的太复杂了。

工厂只是生成对象的类的接口。实施起来很简单。

您不需要 InstantiationFactory。只写你自己的。例如：

```
 Factory<Integer> vertexFactory = 
            new Factory<Integer>() {
                int count;
                public Integer create() {
                    return count++;
            }}; 
```

连续调用以递增顺序`vertexFactory.create()`生成一系列对象，从 0 开始。`Integer`

您想要的工厂的具体性质将取决于您希望顶点对象具有哪些属性（如果有），但您实际上可能并不关心。如果你这样做了，并且你有（比如说）一个`List`要用于顶点的对象，那么你的`Factory`实例可以使用该列表。

任何生成临时图形或使用图形生成器（而不是静态保存的图形）的 JUNG 示例都将使用`Factory`实例。他们无处不在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:37:35.497

从它的外观（即[Javadoc](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/Factory.html)）来看，它是一个定义`create`创建新实例的方法的接口：

> `java.lang.Object create()`
> 
> 创建一个新对象。
> 
> 返回：一个新对象

* * *

> 如何使用它来实例化类型的对象：`Factory<Integer>`, `Factory<String>`？

实际上，您会使用`Factory<Integer>`来实例化一个整数（而不是另一个工厂）。

例如

```
Factory<Integer> factory = ConstantFactory.getInstance(123);
Integer oneTwoThree = factory.create(); // will give you the Integer "123" 
```

# perl - 如何在 Perl 中正确使用带有参数空格的文件路径？

> ID：12791672
> 
> 赞同：1
> 
> 时间：2012-10-09T01:28:25.533
> 
> 标签：perl

想要打开一个文件，`'"E:\\Program Files (x86)\\Vim\\vim73\\gvim.exe -f " %s" "'`我得到`Cannot find e:\Program`.

我需要做什么才能让它工作？

*编辑*：这是我要开始工作的[脚本](http://pastebin.com/jgYuixke)（这是完整的脚本，因为我还不熟悉 perl，抱歉）。当我通过 chrome 的 TextAid 向服务器发出 POST 请求时，它应该启动 gvim。查看第 38 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:30:12.457

它要么是单\双引号路径，要么是用反斜杠转义空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:36:23.283

```
system
   sprintf
      '"E:\\Program Files (x86)\\Vim\\vim73\\gvim.exe" -f "%s"',
      $file; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T04:33:00.550

我发现使用正斜杠更安全/更容易。

```
 my $file = 'C:/Program Files (x86)/Adobe/Reader 10.0/Reader/AcroRd32.exe' ;
    system $file ; 
```

如果您需要 cmmmond 的参数

```
 my $file = '"C:/Program Files (x86)/Adobe/Reader 10.0/Reader/AcroRd32.exe"' ;
    my $data = '"C:\working_dir/music/interim/a b.pdf"' ;
    system "$file $data" ; 
```

使用单引号可以更轻松地嵌入双引号，而无需转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T04:50:46.167

处理这个问题的一种方法是搞乱引用和转义。您需要确保单独引用命令和命令的每个参数作为单独的字符串。

此外，在 win32 上，您可以使用真正的斜杠而不是反斜杠作为目录分隔符。所以：

```
system( sprintf '"E:/Program Files (x86)/Vim/vim73/gvim.exe" -f "%s"', $file ); 
```

另一个更简单的选择是将参数列表与`system()`.

第 38 行：

```
my @EDITOR_COMMAND = ( 'E:/Program Files (x86)/Vim/vim73/gvim.exe', '-f' ); 
```

第 185/186 行：

```
system( @EDITOR_COMMAND, $file ); 
```

然后所有讨厌的报价都会为您处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T08:18:10.760

```
our $EDITOR_CMD = "'E:\\Program Files (x86)\\Vim\\vim73\\gvim.exe' -f %s"; 
```

# c - C程序中特定函数经过的计算时间

> ID：12791676
> 
> 赞同：2
> 
> 时间：2012-10-09T01:29:14.177
> 
> 标签：c, timer, clock

我有一个代码，我想在其中计算两种排序算法合并排序和快速排序以微秒或更精确地对 N 个数字进行排序所花费的时间。这样计算出来的两次，然后我们将输出到终端。代码（部分代码）：

```
printf("THE LIST BEFORE SORTING IS(UNSORTED LIST):\n");
printlist(arr,n);
mergesort(extarr,0,n-1);
printf("THE LIST AFTER SORTING BY MERGE SORT IS(SORTED LIST):\n");
printlist(extarr,n);
quicksort(arr,0,n-1);
printf("THE LIST AFTER SORTING BY QUICK SORT IS(SORTED LIST):\n");
printlist(arr,n); 
```

通过提供如何完成来帮助我。我已经尝试通过将两个变量作为开始停止并将它们分别保持在函数调用的上方和下方来尝试clock_t，但这根本没有帮助，并且总是将其差异打印为零。请建议一些其他方法或功能，记住它在任何类型的操作系统中运行都没有问题。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-11T07:08:05.623

方法：1

计算程序花费的总时间您可以使用 linux 实用程序“时间”。

```
 Lets your program name is test.cpp.
    $g++ -o test test.cpp
    $time ./test

    Output will be like :
    real    0m11.418s
    user    0m0.004s
    sys 0m0.004s 
```

方法：2

您还可以使用 linux 分析方法“gprof”通过不同的函数来查找时间。

首先，您必须使用“-pg”标志编译程序。

```
 $g++ -pg -o test test.cpp
    $./test
    $gprof test gmon.out 
```

PS：gmon.out 是 gprof 创建的默认文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:36:02.567

您可以在 Linux 中调用[gettimeofday](http://linux.die.net/man/2/gettimeofday)函数，在 Windows 中调用[timeGetTime](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757629%28v=vs.85%29.aspx)。在调用排序函数之前和调用排序函数之后调用这些函数并获取差异。

请查看手册页以获取更多详细信息。如果您仍然无法获得一些有形数据（由于较小的数据集，所花费的时间可能太小），最好尝试一起测量“n”次迭代的时间，然后推断单次运行的时间或增加要排序的数据集的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T01:44:16.763

不确定您是否尝试过以下操作。我知道您的原始帖子说您已尝试使用`CLOCKS_PER_SEC`. 使用`CLOCKS_PER_SEC`和做`(stop-start)/CLOCKS_PER_SEC`会让你得到秒。双精度将提供更高的精度。

```
#include <time.h>

main()
{
clock_t launch = clock();
//do work
clock_t done = clock();
double diff = (done - launch) / CLOCKS_PER_SEC;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T07:13:53.693

得到`Zero`结果的原因可能是您使用的时间源的分辨率很差。这些时间源通常以大约 10 到 20 ms 递增。这很糟糕，但这就是他们的工作方式。当您的排序完成时间少于此时间增量时，结果将为`zero`. 您可以通过增加系统中断频率将此结果增加到 1 ms 状态。对于 Windows `and`Linux，没有标准的方法来实现这一点。他们有自己的方式。通过高频计数器可以获得更高的分辨率。Windows 和 Linux 确实提供了对此类计数器的访问，但同样，代码看起来可能略有不同。

如果您值得`one piece of code`继续运行`windows and linux`，我建议您在循环中执行时间测量。运行代码以在循环中测量数百次甚至更多次，并捕获循环外的时间。将捕获的时间除以循环周期数并得到结果。

**当然：**这仅用于评估。您不想在最终代码中使用它。 **并且：**考虑到时间分辨率在 1 到 20 毫秒之间，您应该对总时间做出一个很好的选择，以获得良好的测量分辨率。（提示：调整循环计数，让它至少持续一秒钟左右。）

**例子：**

```
clock_t start, end;

printf("THE LIST BEFORE SORTING IS(UNSORTED LIST):\n");
printlist(arr,n);

start = clock();
for(int i = 0; i < 100; i++){ 
  mergesort(extarr,0,n-1);
}
end   = clock();
double diff = (end - start) / CLOCKS_PER_SEC;

// and so on...

printf("THE LIST AFTER SORTING BY MERGE SORT IS(SORTED LIST):\n");
printlist(extarr,n);
quicksort(arr,0,n-1);
printf("THE LIST AFTER SORTING BY QUICK SORT IS(SORTED LIST):\n");
printlist(arr,n); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T06:49:43.853

如果您使用的是 Linux 2.6.26 或更高版本，那么 getrusage(2) 是最准确的方法：

```
#include <sys/time.h>
#include <sys/resource.h>

// since Linux 2.6.26
// The macro is not defined in all headers, but supported if your Linux version matches
#ifndef RUSAGE_THREAD
#define RUSAGE_THREAD 1
#endif
// If you are single-threaded then RUSAGE_SELF is POSIX compliant 
// http://linux.die.net/man/2/getrusage

struct rusage rusage_start, rusage_stop;

getrusage(RUSAGE_THREAD, &rusage_start);

...

getrusage(RUSAGE_THREAD, &rusage_stop);

// amount of microseconds spent in user space
size_t user_time = ((rusage_stop.ru_utime.tv_sec - rusage_start.ru_stime.tv_sec) * 1000000) + rusage_stop.ru_utime.tv_usec - rusage_start.ru_stime.tv_usec;
// amount of microseconds spent in kernel space
size_t system_time = ((rusage_stop.ru_stime.tv_sec - rusage_start.ru_stime.tv_sec) * 1000000) + rusage_stop.ru_stime.tv_usec - rusage_start.ru_stime.tv_usec; 
```

# uitableview - UITableView 以排序顺序划分，未正确划分

> ID：12791678
> 
> 赞同：0
> 
> 时间：2012-10-09T01:29:17.870
> 
> 标签：uitableview, core-data, nsfetchrequest

所以我试图让 UITableView 按部分（thing.title）显示对象列表，但按日期降序列出它们。

该表分为多个部分，这些部分被**正确**标记（部分标题是不同的事物标题）。

但是每个部分的对象只对了一半。每个部分中的对象按降序列出，但某些部分包含应该在其他部分中的数据。

正在发生的事情的一个例子：

```
<Header> Big Title Name
    <data><Big Title><id=1></data>
    <data><Big Title><id=4></data>
    **<data><Small Title><id=6></data>**   <-- should not be in this section

<Header> Small Title Name
    <data><Small Title><id=11></data>
    <data><Big Title><id=23></data>  <-- should not be in this section
    **<data><Small Title><id=66></data>** 
```

这是我的代码的一部分：

```
- (NSFetchedResultsController *)fetchedResultsController {

if (fetchedResultsController != nil) {
    return fetchedResultsController;
}

/*
 Set up the fetched results controller.
 */
// Create the fetch request for the entity.
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"AReads" inManagedObjectContext:[NSManagedObjectContext defaultContext]];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

// Sort using the timeStamp property..
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

[fetchRequest setSortDescriptors:sortDescriptors];

// Use the sectionIdentifier property to group into sections.
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[NSManagedObjectContext defaultContext] sectionNameKeyPath:@"sessionTitle" cacheName:@"Root"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

return fetchedResultsController;
}

- (NSString*) tableView:(UITableView *)tableView titleForHeaderInSection:  (NSInteger)section
{
//return [(Sessions*)[masterSessions objectAtIndex: section] title];
id <NSFetchedResultsSectionInfo> theSection = [[fetchedResultsController sections] objectAtIndex:section];

NSString *theTitle = [theSection name];

return theTitle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:18:38.883

用于`sectionNameKeyPath`获取结果控制器的键和第一个排序描述符中使用的键必须是相同的键或生成相同的相对排序。因此，您不能使用*sessionTitle*作为`sectionNameKeyPath`和完全不同的键*timeStamp*作为部分的排序描述符。

在您的情况下，最好在排序描述符中使用*timeStamp 。*`sectionNameKeyPath`这将确保所有条目都正确分组到各个部分。

要在节标题中显示*sessionTitle*而不是*timeStamp*，您可以修改 `titleForHeaderInSection`：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { 
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.controller sections] objectAtIndex:section];
    return [[[sectionInfo objects] objectAtIndex:0] sessionTitle];
} 
```

# asp.net - 查询字符串在不为空时抛出异常

> ID：12791679
> 
> 赞同：2
> 
> 时间：2012-10-09T01:29:39.450
> 
> 标签：asp.net, query-string

这是发生了什么，如果用户已登录 - 这是直接从 Page_Load 调用的

```
Protected Sub EnterNewTransInDb()
        Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("connstring").ConnectionString)
        Dim comm As New SqlCommand("INSERT INTO tblRegisterRedirect (RegID , UserID, EventID, TimeStamp) VALUES (@RegID, @UserID, @EventID , getdate()) ;", conn)

        Dim RegID As Guid
        RegID = Guid.NewGuid()
        Dim GIUDuserid As Guid
        GIUDuserid = New Guid(HttpContext.Current.Request.Cookies("UserID").Value.ToString())
        Dim GIUDevnetid As New Guid(HttpContext.Current.Request.QueryString("id").ToString())
        comm.Parameters.AddWithValue("@RegID", RegID)
        comm.Parameters.AddWithValue("@UserID", GIUDuserid)
        comm.Parameters.AddWithValue("@EventID", GIUDevnetid)

        Try
            conn.Open()
            Dim i As Integer = comm.ExecuteNonQuery()
            conn.Close()
        Catch ex As Exception
            Dim errors As String = ex.ToString()
        End Try
        Dim URL As String = Request.QueryString("url").ToString()
        Response.Redirect(URL + "?aid=854&rid=" + RegID.ToString())
    End Sub 
```

这很好用，但是如果他们没有登录，那么他们输入他们的登录凭据 - 这发生在 Button_Click 事件中，在点击事件中我调用这个函数`EnterNewTransInDb()`，当我这次运行它时，登录后 - 相同的代码，它引发异常 - 对象引用为空 - 引用查询字符串

```
 Protected Sub btnLogin_Click(sender As Object, e As System.EventArgs) Handles btnLogin.Click
      'took out code SqlConnection onnection and SqlDataReader Code
        dbCon.Open()            

        'If Email and PW are found
        If dr.Read Then
            Dim appCookie As New HttpCookie("UserID")
            appCookie.Value = dr("GUID").ToString()
            appCookie.Expires = DateTime.Now.AddDays(30)
            HttpContext.Current.Response.Cookies.Add(appCookie)

            Dim appCookie1 As New HttpCookie("UserName")
            appCookie1.Value = dr("UserName").ToString
            appCookie1.Expires = DateTime.Now.AddDays(30)
            HttpContext.Current.Response.Cookies.Add(appCookie1)

            Dim appCookie2 As New HttpCookie("UserEmail")
            appCookie2.Value = txtEmail.Text.ToLower()
            appCookie2.Expires = DateTime.Now.AddDays(30)
            HttpContext.Current.Response.Cookies.Add(appCookie2)

            Dim appCookie3 As New HttpCookie("Lat")
            appCookie3.Value = dr("GeoLat").ToString()
            appCookie3.Expires = DateTime.Now.AddDays(30)
            HttpContext.Current.Response.Cookies.Add(appCookie3)

            Dim appCookie4 As New HttpCookie("Long")
            appCookie4.Value = dr("GeoLong").ToString()
            appCookie4.Expires = DateTime.Now.AddDays(30)
            HttpContext.Current.Response.Cookies.Add(appCookie4)

            Dim appCookie5 As New HttpCookie("City")
            appCookie5.Value = dr("City").ToString()
            appCookie5.Expires = DateTime.Now.AddDays(30)
            HttpContext.Current.Response.Cookies.Add(appCookie5)

            Dim appCookie6 As New HttpCookie("State")
            appCookie6.Value = dr("State").ToString
            appCookie6.Expires = DateTime.Now.AddDays(30)
            HttpContext.Current.Response.Cookies.Add(appCookie6)

            HttpContext.Current.Response.Cookies("EO_Login").Expires = Now.AddDays(30)
            HttpContext.Current.Response.Cookies("EO_Login")("EMail") = txtEmail.Text.ToLower()

            Dim sUserData As String = HttpContext.Current.Server.HtmlEncode(HttpContext.Current.Request.Cookies("UserID").Value) & "|" & HttpContext.Current.Server.HtmlEncode(HttpContext.Current.Request.Cookies("UserName").Value) & "|" & HttpContext.Current.Server.HtmlEncode(HttpContext.Current.Request.Cookies("UserEmail").Value)
            ' Dim sUserData As String = "dbcf586f-82ac-4aef-8cd0-0809d20c70db|scott selby|scottselby@live.com"
            Dim fat As FormsAuthenticationTicket = New FormsAuthenticationTicket(1, _
                     dr("UserName").ToString, DateTime.Now, _
                     DateTime.Now.AddDays(6), True, sUserData, _
                     FormsAuthentication.FormsCookiePath)
            Dim encTicket As String = FormsAuthentication.Encrypt(fat)
            HttpContext.Current.Response.Cookies.Add(New HttpCookie(FormsAuthentication.FormsCookieName, encTicket))

            'If Email and Pw are not found
        Else
            dr.Close()
            dbCon.Close()

        End If

        'Always do this
        dr.Close()
        sSql = "UPDATE eo_Users SET LastLogin=GETUTCDATE() WHERE GUID=@GUID; "
        cmd = New SqlCommand(sSql, dbCon)
        cmd.Parameters.AddWithValue("@GUID", HttpContext.Current.Session("UserID"))
        cmd.ExecuteNonQuery()
        dbCon.Close()
        EnterNewTransInDb()
        'Dim URL As String = Request.QueryString("url").ToString()
        'Response.Redirect(URL + "?aid=854&rid=" + RegID.ToString())
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:10:15.283

尝试在调用之前设置断点并确保为变量分配了值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:14:44.237

假设您只希望此代码在存在有效 QueryString 的情况下运行，您可以在方法的开头放置一个保护子句来简单地检查 QueryString 是否为空，然后如果在没有 QueryString 的情况下调用此页面，则执行一些其他操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:33:45.283

您是否尝试过在代码中设置断点`Dim URL As String = Request.QueryString("url").ToString()`？也许您只需要首先评估“url”参数的查询字符串（如果存在）；在将其转换为字符串之前。

# javascript - 无 iframe 的 URL 转发

> ID：12791680
> 
> 赞同：1
> 
> 时间：2012-10-09T01:29:40.587
> 
> 标签：javascript, url, iframe, forwarding

问题的一些背景：

我们已经为一个域设置了网站，我们称之为 X.com 现在我们已经购买了另一个域 Y.com 并使用 Masking 完成了一个 URL 转发到 X.com，这样当有人访问 Y.Com 时，地址栏将显示 Y.com 将显示的网站将来自 X.com

问题 ：

使用屏蔽时，网页会在 iframe 中加载。这会导致很多问题，例如 IE 页面总是以 Quirks 模式加载，因为外部页面上不存在 DOC 类型等。

有没有办法通过不加载 Iframe 来保持域屏蔽？

我们尝试了 (top = self) javascript 检查，然后将 href 设置为 self，但这会破坏屏蔽并在地址栏上显示 X.com。

请指导我们如何从 URL 转发创建的 IFrame 中获取内容并将其放在顶级窗口中，否则是否有其他解决方案？

提前致谢

# php - adduser_process.php 不向 MySQL 表添加信息

> ID：12791682
> 
> 赞同：1
> 
> 时间：2012-10-09T01:29:47.953
> 
> 标签：php, mysql, forms

我的网站上有一个用户创建表单，它无法将任何新用户数据添加到相关的 MySQL 表中。我真的不太清楚为什么它没有添加数据，也没有抛出任何错误来告诉我出了什么问题。

我目前有以下用户创建表单：

```
<form name="adduser_form" action="process/adduser_process.php" method="post">
    Username:<input id="username" type="test" name="username" />
    Email:<input id="email" type="text" name="email" />
    Password:<input id="password" type="password" name="password" />
    <input id="add_usr" type="button" value="Add User" onclick="formhash(this.form, this.form.password);" />
</form> 
```

单击“添加用户”按钮后，formhash JS 会创建一个散列密码，然后将表单提交到 adduser_process.php：

```
function formhash(form, password) {
    var p = document.createElement("input");
    form.appendChild(p);
    p.name = "p";
    p.type = "hidden";
    p.value = hex_sha512(password.value);
    password.value = "";
    form.submit();
} 
```

adduser_process.php 的工作方式如下（故意省略标签）：

```
include '../includes/lgn_connect.php';
include '../includes/functions.php';
sec_session_start(); 

$password = $_POST['p']; 

$random_salt = hash('sha512', uniqid(mt_rand(1, mt_getrandmax()), true));

$password = hash('sha512', $password.$random_salt);

if($insert_stmt = $mysqli->prepare("INSERT INTO users (username, email, password, salt) VALUES (?, ?, ?, ?)")) {
$insert_stmt->bind_param('ssss', $username, $email, $password, $random_salt); 

$insert_stmt->execute();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:18:38.003

第一个错误是您将类型设置为`test`不是`text`用户名

```
<input id="username" type="test" name="username" />     //should be
<input id="username" type="text" name="username" /> 
```

第二个错误是 if 条件，你没有`()`在条件中添加额外的

```
if($insert_stmt = $mysqli->prepare("INSERT INTO users (username, email, password, salt) VALUES (?, ?, ?, ?)"))   //should be

if(($insert_stmt = $mysqli->prepare("INSERT INTO users (username, email, password, salt) VALUES (?, ?, ?, ?)"))) 
```

第三个错误`sec_session_start();`不是开始会话的功能，它应该是

```
session_start(); 
```

# sybase - Sybase 得到今天的结果，两种方式比较

> ID：12791688
> 
> 赞同：1
> 
> 时间：2012-10-09T01:30:17.423
> 
> 标签：sybase, getdate

我不知道如何测试这两种获得我想要的方式的性能。

```
select * 
from table 
where column like '%'+left(getdate(),11)+"%

select * 
from table 
where
              DATEPART (DD, column) = DATEPART (DD, GETDATE())  
      AND     DATEPART (MM, column) = DATEPART (MM, GETDATE())  
      AND     DATEPART (YY, column) = DATEPART (YY, GETDATE()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:07:25.043

通常在 SQL 中，您可以循环执行该语句多次并计算每个语句的执行时间。这样做几次以确保并比较结果。

```
declare @startTime datetime
declare @endTime datetime
declare @execution BIGINT

SET @execution = 0

set @startTime = GETDATE()
while (@execution < 1000000)
begin    
    --TestSyntax goes here

    SET @execution = @execution + 1

end
set @endTime = GETDATE()

SELECT DATEDIFF(ms, @endTime, @startTime) AS 'TimeToExecute' 
```

还知道，字符串比较在所有语言中通常都比较慢。

# php - 超时后自动关闭窗口

> ID：12791695
> 
> 赞同：3
> 
> 时间：2012-10-09T01:31:17.423
> 
> 标签：php, javascript

我知道 php 是服务器端的，但是有没有办法让这个窗口在 3 秒后关闭？

```
<link rel="stylesheet" type="text/css" href="style1.css" />
<?php 
$contact_message=$_POST['message'];
$errpage = $_POST['frompage'];
$ip=$_SERVER['REMOTE_ADDR'];
$message = "$contact_message -SENT FROM THIS IP: $ip";
mail("maxgee@me.com", "$Error Reported on: $errpage", $message);
echo "We have documented the web address of the problem and thank you for helping us    improve our site!"
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T01:40:38.210

这应该这样做：

```
<script type="text/javascript">setTimeout("window.close();", 3000);</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-07T11:10:05.030

很简单——只需在你想从自身移出的地方用echo在PHP中编写JavaScript代码即可，例如：

```
<?php

    echo '<script> window.setTimeout("window.close()", 1000); </script>';

?> 
```

它肯定会奏效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T02:45:46.040

如果我正在观看的页面突然关闭，这似乎有点奇怪。

# php - 访问另一个属性中的一个对象属性

> ID：12791696
> 
> 赞同：1
> 
> 时间：2012-10-09T01:31:20.813
> 
> 标签：php, attributes

当我尝试执行以下操作时，我得到一个`syntax error, unexpected T_VARIABLE`. 我究竟做错了什么？

```
class myObj {
  public $birth_month;
  public $birthday = array('input_val' => $this->birth_month);
} 
```

我也试过

```
class myObj {
  public $birth_month;
  public $birthday = array('input_val' => $birth_month);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:35:28.530

您不能使用表达式来初始化类属性。它必须是一个常量值，或者您必须在构造函数中对其进行初始化。那是您的语法错误的根源。

```
class myObj {
  public $birth_month;
  public $birthday;

  // Initialize it in the constructor
  public function __construct($birth_month) {
    $this->birth_month = $birth_month;
    $this->birthday = array('input_val' => $this->birth_month);
  }
} 
```

[从关于类属性的文档中：](http://php.net/manual/en/language.oop5.properties.php)

> 它们是通过使用关键字 public、protected 或 private 之一定义的，后跟一个普通的变量声明。这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

在您的第一次尝试中，`$this`即使不考虑属性初始化的编译时限制，也不支持在实例方法外部使用，因为`$this`只有在实例方法内部才有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:35:23.657

$this 在您的类的非静态方法之外不存在。此外，在初始化时，还没有 $this。在构造函数方法中初始化您的数组。

# python - 适合初学者的 Python 回溯模块

> ID：12791698
> 
> 赞同：9
> 
> 时间：2012-10-09T01:31:36.580
> 
> 标签：python, python-2.7

我是 python 新手，发现很难理解 traceback 模块的官方文档 [http://docs.python.org/release/3.1.5/library/traceback.html](http://docs.python.org/release/3.1.5/library/traceback.html)

如果有人可以指导我如何提取回溯参数（有问题的代码行等），我将非常感激。

如果代码中有两个异常，我也可以对回溯功能如何使用一些了解，我们可以为它们都传递回溯吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T15:42:24.323

你可以看看这些帮助我的教程：

[有关异常处理的一些一般信息。](http://www.blog.pythonlibrary.org/2012/09/12/python-101-exception-handling/)

[Python 异常处理技术](https://doughellmann.com/blog/2009/06/19/python-exception-handling-techniques/)

# javascript - Web Worker 会增加（或降低）安全性吗？

> ID：12791699
> 
> 赞同：6
> 
> 时间：2012-10-09T01:31:49.170
> 
> 标签：javascript, security, web-worker, browser-security

网络工作者是否缓解或加强了 JavaScript 和浏览器环境的任何已知安全问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T08:42:01.040

根据 Mozilla Web Workers 安全评论：

*   工作人员在严格控制的沙箱中执行。
*   无法访问组件或其他全局 JS 组件。
*   只有基本的 JS（数学、日期等）、超时、XHR 和 importScripts。
*   脚本加载受到与主线程相同的限制（内容策略、同源限制等）。
*   XHR 使用与主线程相同的代码。

这些回答了我所有的安全考虑。

# c++ - 为什么你可以调用一个拷贝构造函数传入你正在构造的对象？(C++) (GCC)

> ID：12791704
> 
> 赞同：8
> 
> 时间：2012-10-09T01:32:53.850
> 
> 标签：c++, class, copy-constructor, member

> **可能重复：**
> [std::string x(x);](https://stackoverflow.com/questions/2529111/stdstring-xx)

```
class A {};

int main() {

    A a(a);
} 
```

这编译。

> gcc (GCC) 4.7.2 20120921 (红帽 4.7.2-2)
> `g++ -o main main.cpp -Wall -w -ansi`

我没有收到任何警告。

为什么这似乎是有效的 C++？
标准中的任何地方都提到了这一点吗？
是否有可以为 gcc 报告此问题的警告标志？

当类有成员数据时，数据最终是随机的。
例子：

```
#include <iostream>

class A {

public:
    int i;
    A() : i{6} {}
};

int main() {

    A a(a);
    std::cout << a.i << '\n';
} 
```

> 输出：-482728464

这里发生了什么？另外，我怎样才能防止自己不小心这样做呢？- 是否有可能使其成为编译器错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T01:37:36.417

> （第 3.3.2/1 节）名称*的声明点*紧接在其完整声明符（第 8 条）之后和其*初始化器*（如果有）之前，除非下文另有说明。[ 例子：
> 
> ```
> int x = 12;
> { int x = x; } 
> ```
> 
> 这里第二个 x 用它自己的（不确定的）值初始化。—结束示例]

这也适用于用户定义的类型，例如 your `class A`。使用的复制构造函数是默认的，由编译器自动生成。

# javascript - CSS/Javascript 框架，可将图片放在一个屏幕上

> ID：12791712
> 
> 赞同：3
> 
> 时间：2012-10-09T01:33:48.063
> 
> 标签：javascript, html, css, image

我试图在一个 HTML 页面中放置 3 张图片，这样将使用最大屏幕区域，而无需滚动。当屏幕尺寸改变时，图片应该重新排列，覆盖最大的屏幕区域。每张图片都有不同的尺寸。为了更容易拟合，可以裁剪每张图片（最大比例为 2:3）。布局应该流畅且响应迅速。请参阅下面的示例

![在此处输入图像描述](../Images/883554dac68cf74abc26762ad3025b0e.png)

我正在考虑解决这个问题的两个框架是 Twitter Bootstrap 和 jQuery Masonry，但这些都不能解决拟合问题。

目前我解决了这个问题，用css制作方形缩略图并重叠这些图片，但用户希望看到整个图片没有重叠并且尽可能大：

[！![裁剪为正方形，例如 vash.co](../Images/6bbbec317819356dfc57dfff4ca0c936.png)](http://vash.co)

您可以在[vash.co上看到它的实际应用](http://vash.co)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:54:50.387

You can get pretty close using pure CSS. Take this example, try it in Google Chrome: [http://jsbin.com/ixomav/1](http://jsbin.com/ixomav/1) ([source](http://jsbin.com/ixomav/1/edit))

It's pretty crude but it should get the idea across. Going furthur you could add js code to resize images with a proper aspect ratio or keep trying with a css only approach. I used random images from wikipedia for my example but you may have an easier time if all your photos are the same dimensions.

If you remove the height you'll get properly aspected images but the problem with that is the white space, example: [http://jsbin.com/ixomav/2](http://jsbin.com/ixomav/2)

Check out [Isotope](http://isotope.metafizzy.co/index.html): [http://isotope.metafizzy.co/demos/images.html](http://isotope.metafizzy.co/demos/images.html)

# objective-c - 一个字符串在 Objective-C 中可以有多长？

> ID：12791714
> 
> 赞同：0
> 
> 时间：2012-10-09T01:34:30.467
> 
> 标签：objective-c, string

> **可能重复：**
> [NSString 对象的最大长度是多少？](https://stackoverflow.com/questions/6482641/what-is-the-maximum-length-of-an-nsstring-object)

我正在尝试决定一种将我的图块数据存储在解析数据库中的好方法。我需要的是存储 24x24 的值，不确定这些值会有多长时间，但假设我需要存储 24x24 字节（每个图块有 256 种可能性）。我正在考虑将它们存储在一个大字符串中，这可能吗？字符串的大小是否有限制？还是在目标c中有更好的方法来做到这一点？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:38:59.387

回复：字符串长度，我认为字符串的长度没有硬性限制。但是在存储这种类型的数据方面，多维数组呢？这是关于该主题的讨论。

[如何在 Objective-C 中声明一个字符串类型的二维数组？](https://stackoverflow.com/questions/638129/how-to-declare-a-two-dimensional-array-of-string-type-in-objective-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:44:28.290

最大长度由 NSUInteger 的大小决定（因此，十亿）。

这个问题已经在 stackoverflow 上被问及回答了 [What is the maximum length of an NSString object?](https://stackoverflow.com/questions/6482641/what-is-the-maximum-length-of-an-nsstring-object)

# php - 访问模型中的帖子变量或通过视图中的函数调用传递它们？

> ID：12791722
> 
> 赞同：0
> 
> 时间：2012-10-09T01:36:08.500
> 
> 标签：php, model-view-controller

因此，在修补我自己构建的 MVC 框架时，我注意到一些看起来需要重构的东西。

如果我在视图中有一个调用驻留在模型中的函数的函数调用，并且该函数采用会话/发布/获取变量作为参数。最好在函数调用中将这些变量作为参数传递，还是只在模型中的函数中访问它们？

视图中的代码：

```
$model = $this->model; // Shortcut to the model
$vaildator = $this->model->validator; // Shortcut to the Validator object in the model
$btnPressed = $this->model->btnPressed; // Shortcut to the btnPressed flag var in the model

<label for="firstName">First Name: <span class="<?php echo $model->setReq($_POST['firstName'], 'First name'); // Set the class of the span tag the holds the 'required' text ?>">(required)</span></label>
<input type="text" name="firstName" id="firstName" title="First name" value="<?php echo htmlspecialchars($btnPressed ? $_POST['firstName'] : 'First name'); // Echo the user's entry or the default text ?>" maxlength="50" />
<?php if($btnPressed) $vaildator->valName($_POST['firstName'], true, true, 'First name'); // Check for errors and display msg if error is found ?> 
```

模型中的代码：

```
// If the field is empty or still contains the default text, highlight the 'required' error msg on the input field by changing the msg's class
// Note: used only for input fields that are required
public function setReq($postVar, $defaultText)
{
    $className = 'required';

    if($this->btnPressed)
    {
        $className = $postVar == '' || $postVar == $defaultText ? 'reqError' : 'required';
        return htmlspecialchars($className);
    }
    else
    {
        return htmlspecialchars($className); 
    }
} 
```

我问的原因是因为将参数放在视图中的函数调用中会使视图看起来逻辑很重，但反过来做，访问模型中的 session/get/post 变量，似乎有点 hacky 并且会使代码不非常可重复使用。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:38:37.763

解决办法是：**解耦**。

基本上，在函数调用中**传递POST 变量。**

为什么？因为逻辑将保持分离（控制器将使用它需要的请求的任何部分，然后调用模型），而且它会更容易测试（你将能够只传递假参数而不是假装`$_POST`和`$_GET`变量或做其他一些花哨的东西）。它也将更容易调试。

换句话说，解耦会减轻你的工作。

# java - guava-testlib 未来版本 JAR

> ID：12791737
> 
> 赞同：2
> 
> 时间：2012-10-09T01:38:11.330
> 
> 标签：java, unit-testing, testing, null, guava

今天，目前的 Guava 版本似乎是：

`release is 13.0.1, August 3, 2012.`

但我检查了以下来源：

`git clone https://code.google.com/p/guava-libraries/`

并对我来说似乎*非常*有用的测试工具产生了兴趣：

[http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java](http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java)

我试图验证我的所有方法`null`都像 Doug Lea ( [http://gee.cs.oswego.edu/dl/html/vita.html](http://gee.cs.oswego.edu/dl/html/vita.html) ) 似乎做的那样讨厌，除非 Joshua Bloch 错误地引用了他的话 ( [http: //www.youtube.com/watch?v=ZeO_J2OcHYM#t=26m35s](http://www.youtube.com/watch?v=ZeO_J2OcHYM#t=26m35s)）处于“空敌对”状态。

无论如何，`NullPointerTester.java`似乎很完美，所以我正在尝试将它构建到我的项目中。

当我遇到基本上属于未来版本的类时，遵循依赖项（例如`NullPointerTester`-> ， -> ...）是乏味的。`Invokable<?, ?>``@since 14.0`

构建下一个/未来版本的 Guava 的自包含 JAR 的最佳方法是什么，并为我处理所有依赖项？注意：来源似乎是“全部” `git`...

* * *

*你可以在这里停止阅读。*

我迫不及待地想做这样的事情，我认为这真的很酷：

*   [http://www.massapi.com/class/nu/NullPointerTester.html](http://www.massapi.com/class/nu/NullPointerTester.html)

注意：缺少的是“安全检查”，如“如果构造函数已设为私有，请检查我是否无法反射调用它......

如果我是一个更好的编码员，我会做出贡献，但这是我能做的，而且很差，尽管意图应该很清楚？

```
static boolean isDefaultConstructorDisabled(Class<?> type) {
  boolean isDefaultConstructorDisabled = false;
  Constructor<?>[] declaredConstructors = type.getDeclaredConstructors();
  Constructor<?> defaultContructor = declaredConstructors[0];
  defaultContructor.setAccessible(true);
  try {
    defaultContructor.newInstance();
  } catch (InvocationTargetException invocationTargetException) {
    Throwable cause = invocationTargetException.getCause();
    if (cause instanceof UnsupportedOperationException
        && cause.getMessage().contains(
            ErrorMessage.DefaultConstructor.DISABLED)) {
      isDefaultConstructorDisabled = true;
    }
  } catch (Throwable throwable) {
    throwable.printStackTrace();
  }
  return isDefaultConstructorDisabled;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:14:17.903

您是否尝试在 Maven 中查找？

[http://search.maven.org/#browse%7C-723200679](http://search.maven.org/#browse%7C-723200679)

我认为 guava-testlib 是包含 NullPointerTester 的。你可以抓住 13.0.1 罐子。

[http://search.maven.org/#browse%7C1590928164](http://search.maven.org/#browse%7C1590928164)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:38:52.823

如果您克隆了整个 Guava 存储库，那么 v13.0.1 标记将具有 guava-testlib，特别是 NullPointerTester，从 13.0.1 开始，它应该可以工作——不是吗？

# java - 在 Eclipse jdt/ast 中为 ASTParser.setSource() 方法使用 ICompilationUnit

> ID：12791739
> 
> 赞同：1
> 
> 时间：2012-10-09T01:38:14.880
> 
> 标签：java, eclipse, methods, abstract-syntax-tree, eclipse-jdt

ASTParser.setSource 具有不同输入类型的多态方法。

![在此处输入图像描述](../Images/c236af243e20752b3da9a6af860363f8.png)

但是，当我`ICompilationUnit`用作 setSource 方法的输入时，

![在此处输入图像描述](../Images/d4ee2505d5c855f37592e005974784c4.png)

我收到一条错误消息，说我没有使用 char[] 作为输入参数。

![在此处输入图像描述](../Images/4be929e4bca87ac9368b46dc952e8bbf.png)

为什么会出现这个错误？

## 添加

我使用 eclipse jdt/ast 作为独立 java 程序的一部分。在此过程中，我不使用 eclipse 项目/资源，而是将 java 源代码加载到 char[] 作为 setSource() 的参数。我不确定，但 Eclipse 可能会认识到它没有作为插件运行以阻止使用其他多态方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:14:06.057

检查您是否已将种类指定为编译单元。

```
// Parse the class as a compilation unit.
parser.setKind(ASTParser.K_COMPILATION_UNIT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:08:35.883

我试图将 jdt/ast 作为独立 java 程序的库来执行。当我在插件上下文中重新运行它们时，一切正常。

# c++ - 使用 dumpbin 查看 C++ 库信息时，notype() 和 notype 是什么意思？

> ID：12791747
> 
> 赞同：3
> 
> 时间：2012-10-09T01:39:32.650
> 
> 标签：c++, dumpbin

我使用 dumpbin /SYMBOLS 来查看我创建的库。有些行在输出中有 notype() 和 notype。这意味着什么？

我猜 notype() 是函数，notype 是变量。我的想法正确吗？

# php - XML 与 JSON 数据的问题

> ID：12791750
> 
> 赞同：2
> 
> 时间：2012-10-09T01:39:39.523
> 
> 标签：php, xml, arrays, json

使用 PHP，我试图从返回 XML 的 Goodreads API 中获取数据。我一直在努力弄清楚如何从中提取数据。

在冒险的某个时刻，有人建议我对整个事情进行 json decode( json encode ($blah)) 并使用 JSON 而不是 XML。

这让我想到了我目前的情况。一切正常，直到我从返回的数组中提取数据。我可能应该花更多的时间阅读和学习数组，但是在我能想到的每一个谷歌搜索都做了两天多之后，我来到了这里。

以下是 Goodreads 返回的全部内容：

```
a:2:{s:7:"Request";a:3:{s:14:"authentication";s:4:"true";s:3:"key";a:0:{}s:6:"method";a:0:{}}s:6:"search";a:7:{s:5:"query";a:0:{}s:13:"results-start";s:1:"1";s:11:"results-end";s:1:"1";s:13:"total-results";s:1:"1";s:6:"source";s:9:"Goodreads";s:18:"query-time-seconds";s:4:"0.06";s:7:"results";a:1:{s:4:"work";a:9:{s:11:"books_count";s:1:"7";s:2:"id";s:7:"5024045";s:24:"original_publication_day";s:2:"16";s:26:"original_publication_month";s:1:"9";s:25:"original_publication_year";s:4:"2008";s:13:"ratings_count";s:3:"227";s:18:"text_reviews_count";s:2:"53";s:14:"average_rating";s:4:"4.33";s:9:"best_book";a:5:{s:2:"id";s:7:"4958245";s:5:"title";s:37:"7 Habits of Happy Kids [With Earbuds]";s:6:"author";a:2:{s:2:"id";s:5:"38343";s:4:"name";s:10:"Sean Covey";}s:9:"image_url";s:56:"http://photo.goodreads.com/books/1343744353m/4958245.jpg";s:15:"small_image_url";s:56:"http://photo.goodreads.com/books/1343744353s/4958245.jpg";}}}}} 
```

我想从这个数组中得到“id”变量出现在“best_book”下。为此，我正在使用这些代码行：

```
$goodreads_results = json_decode(json_encode((array) simplexml_load_string($goodreads_data_a)), 1);
$goodreads_id = $goodreads_results->search->results->work->best_book->id; 
```

我应该指出，我发布的数组（以“a:2:{s:7”开头）是 $goodreads_results 在上述两行代码之后包含的内容。所以我知道到目前为止的一切都是正常的。

不管什么原因，我没有得到身份证。$goodreads_id 变量为空。

有人可以帮我弄清楚为什么吗？尽管我知道这可能是一些基本的东西，但我迷失了，一切都开始对我来说看起来一样了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:19:57.633

尝试：

```
<?php
$goodreads_data_a = 'a:2:{s:7:"Request";a:3:{s:14:"authentication";s:4:"true";s:3:"key";a:0:{}s:6:"method";a:0:{}}s:6:"search";a:7:{s:5:"query";a:0:{}s:13:"results-start";s:1:"1";s:11:"results-end";s:1:"1";s:13:"total-results";s:1:"1";s:6:"source";s:9:"Goodreads";s:18:"query-time-seconds";s:4:"0.06";s:7:"results";a:1:{s:4:"work";a:9:{s:11:"books_count";s:1:"7";s:2:"id";s:7:"5024045";s:24:"original_publication_day";s:2:"16";s:26:"original_publication_month";s:1:"9";s:25:"original_publication_year";s:4:"2008";s:13:"ratings_count";s:3:"227";s:18:"text_reviews_count";s:2:"53";s:14:"average_rating";s:4:"4.33";s:9:"best_book";a:5:{s:2:"id";s:7:"4958245";s:5:"title";s:37:"7 Habits of Happy Kids [With Earbuds]";s:6:"author";a:2:{s:2:"id";s:5:"38343";s:4:"name";s:10:"Sean Covey";}s:9:"image_url";s:56:"http://photo.goodreads.com/books/1343744353m/4958245.jpg";s:15:"small_image_url";s:56:"http://photo.goodreads.com/books/1343744353s/4958245.jpg";}}}}}
';

$goodreads_results = unserialize($goodreads_data_a);
echo $goodreads_id = $goodreads_results['search']['results']['work']['best_book']['id'];
?> 
```

# c++ - 我想从有空格的文件中读取 c++ ifstream

> ID：12791754
> 
> 赞同：0
> 
> 时间：2012-10-09T01:40:44.117
> 
> 标签：c++, io, ifstream

我的文件看起来像这样

```
0 0 5
1 10 20
2 10 10
3 15 3
4 20 30
5 25 5 
```

我把它保存在一个向量中。我不知道如何阅读它，以便我可以将每个组件保存在不同的向量中。

尝试解决方案：

```
if (inFile.is_open()) { 
     while ( inFile) { 
          getline (inFile,line); 
          cout << line << endl; 
     } 
     inFile.close(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:32:28.697

我认为这是你想要做的：

```
ifstream fin("C:/file.txt");

if(!fin)
{
    cout<<"Cannot Open File";
    exit(EXIT_FAILURE);
}

vector<vector<int>> v;

int vector_length = 3;

int count = 0;
while(!fin.eof()) //Read till the end of file
{       
    v.push_back(vector<int>()); //Add vector for new line
    int number;
    for(int i=0; i<vector_length; i++)
    {
        fin>>number;  //Read a number from the file
        v[count].push_back(number);  //Add the number to the vector
    }
    count++;
}

//Show the output to confirm that the file has been read correctly
for(int i=0; i<v.size(); i++)
{
    for(int j=0; j<v[i].size(); j++)
    {
        cout<<v[i][j]<<"\t";
    }
    cout<<endl;

} 
```

# python - python3 - 对绘制文本三角形的嵌套 for 循环的概念理解

> ID：12791756
> 
> 赞同：0
> 
> 时间：2012-10-09T01:40:59.747
> 
> 标签：python, for-loop, nested-loops, python-3.2

首先是代码：

```
# the star triangle
# the user gives a base length, to print a triangle

base_length = int(input("enter the base of the triangle: "))
for row in range(base_length):
    print()
    for column in range (row + 1):
        print("*", end=" ") 
```

如您所知，它将绘制一个三角形，其基本大小与用户输入的任何内容相同。

现在，我无法理解代码如何“绘制”三角形。

从解释中，我知道代码有两个嵌套循环，一个负责“绘制”行，另一个负责“绘制”列。

我尝试通过尝试理解以下内容将其分解为多个步骤：

```
base_length = int(input("enter the base of the triangle: "))
for row in range(base_length):
    print("*")
#    for column in range (row + 1):
#        print("*", end=" ") 
```

这没有帮助。我不明白为什么它在多行而不是在同一行中打印“*”。

其余的，无论我怎么想，对我来说都毫无意义。我所理解的大约是“+ 1”，它让你使用范围内的最后一个数字，因为如果没有指定，Python 将不会使用范围内的最后一个数字。

我想我只是没有得到 for 循环，当你嵌套了 for 循环时，我真的有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:50:35.610

我相信理解代码的问题会导致不同的行为`print()`：

*   `print("*")`- 打印“ `*`”和 endline（转到下一行），
*   `print("*", end=" ")`- 打印“ `*`”并以空格结束输出（“ `”而不是新行），`
`*   当你这样做时`print()`，它会打印“nothing”（或空字符串，如果这更容易理解的话）并以新行结束（这使得文本进入下一行）。`

 `对理解代码有帮助吗？如果没有，这是代码中的解释：

```
# User gives the integer, being a number of the rows
base_length = int(input("enter the base of the triangle: "))

# This is a loop on the integers, from zero (0) to the (base_length - 1)
# Which means the number of iterations equals exactly base_length value:
for row in range(base_length):
    print()  # Prints just a new line

    # First uses "row" as a base, it will be the number of the asterisks
    # Then it iterates on the list of integers (column equals zero, then 1 etc.)
    for column in range (row + 1):

        # Prints asterisk and ends the output with space instead of new line:
        print("*", end=" ") 
````

# sql-server - SQL Server 触发器自动更新数据

> ID：12791758
> 
> 赞同：0
> 
> 时间：2012-10-09T01:41:12.483
> 
> 标签：sql-server

我正在设计一个图书馆管理数据库模式，假设有一个表“借”

* * *

## 借

id
user_id
book_id
borrow_date
due_date
isExpired
expired_day（图书过期后的天数）
罚款

* * *

SQL Trigger 可以实现以下情况吗？
1.比较due_date和Today，如果相同-->发送邮件-->将isExpired标记为true
2.如果isExpired标记为true-->比较today和due_date的差异，
更新expired_day--->更新很好（过期天数 * 5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:51:25.863

触发器仅在表或行发生某些事情时触发。它不会连续（或每天）发射。如果表格没有发生任何事情，那么您的触发器将永远不会触发，因此您的检查将无法完成。

因此，当您第一次将记录插入行时，您描述的触发器将起作用，但是没有自动方法在到期日之后触发触发器以检查到期和罚款。

您很可能需要设置一个包含您的代码的存储过程，并找到一种按计划运行它的方法。

以下链接介绍了如何进行设置： [SQL server 上存储过程的计划运行](https://stackoverflow.com/questions/287060/scheduled-run-of-stored-procedure-on-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:31:48.490

由于您想每天检查图书馆的所有记录并希望它们相应地更新，因此最好制作一个每日作业并安排一个代理并设置特定时间，以便每天自动执行该每日作业。
请注意：您应该记住选择您认为您的应用程序在一天中最少使用的时间。

创建代理： http: [//msdn.microsoft.com/en-us/library/ms181153 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms181153(v=sql.105).aspx)

# mysql - 这个简单的创建表查询出现不可理解的错误

> ID：12791760
> 
> 赞同：1
> 
> 时间：2012-10-09T01:41:17.140
> 
> 标签：mysql, sql, phpmyadmin, export

我刚刚使用 phpmyadmin 导出了单个表的 CREATE sql。这是结果：

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `register_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `account_type` int(11) NOT NULL,
  `active` int(11) NOT NULL,
  `email` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `login` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(200) COLLATE utf8_unicode_ci NOT NULL
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ; 
```

但是当我在非常 phpmyadmin 上运行此代码时，我收到此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREME' at line 14 
```

我尝试了很多方法，但我的技能还不够。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T01:42:00.493

你之前忘了加逗号`PRIMARY KEY (id)`

```
`name` varchar(200) COLLATE utf8_unicode_ci NOT NULL,   -- <== this
 PRIMARY KEY (`id`) 
```

添加逗号，它会工作，[看到这个小提琴（点击链接）](http://sqlfiddle.com/#!2/8b142)

# ruby-on-rails - 如何使用回形针保存 raw_data 照片

> ID：12791764
> 
> 赞同：6
> 
> 时间：2012-10-09T01:41:55.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我正在使用 jpegcam 允许用户拍摄网络摄像头照片以设置为他们的个人资料照片。这个库最终将原始数据发布到我在我的 rails 控制器中获得的服务器，如下所示：

```
def ajax_photo_upload
  # Rails.logger.info request.raw_post
  @user = User.find(current_user.id)
  @user.picture = File.new(request.raw_post) 
```

当您尝试保存 request.raw_post 时，这不起作用并且回形针/导轨失败。

```
Errno::ENOENT (No such file or directory - ????JFIF??? 
```

我见过制作临时文件的解决方案，但我很想知道是否有办法让 Paperclip 自动保存 request.raw_post 而无需制作临时文件。有什么优雅的想法或解决方案吗？

**丑陋的解决方案（需要临时文件）**

```
class ApiV1::UsersController < ApiV1::APIController

  def create
    File.open(upload_path, 'w:ASCII-8BIT') do |f|
      f.write request.raw_post
    end
    current_user.photo = File.open(upload_path)
  end

 private

  def upload_path # is used in upload and create
    file_name = 'temp.jpg'
    File.join(::Rails.root.to_s, 'public', 'temp', file_name)
  end

end 
```

这很难看，因为它需要在服务器上保存一个临时文件。关于如何在没有需要保存的临时文件的情况下实现这一点的提示？可以使用StringIO吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T02:28:11.197

我之前的解决方案的问题是临时文件已经关闭，因此 Paperclip 不能再使用了。下面的解决方案对我有用。这是 IMO 最干净的方式，并且（根据文档）确保您的临时文件在使用后被删除。

将以下方法添加到您的`User`模型中：

```
def set_picture(data)
  temp_file = Tempfile.new(['temp', '.jpg'], :encoding => 'ascii-8bit')

  begin
    temp_file.write(data)
    self.picture = temp_file # assumes has_attached_file :picture
  ensure
    temp_file.close
    temp_file.unlink
  end
end 
```

控制器：

```
current_user.set_picture(request.raw_post)
current_user.save 
```

不要忘记在模型文件`require 'tempfile'`的顶部添加。`User`

# sinatra - 部署 Sinatra 应用程序 .rb

> ID：12791767
> 
> 赞同：-1
> 
> 时间：2012-10-09T01:42:08.817
> 
> 标签：sinatra

我知道这可能是一个愚蠢的问题。但是我使用 Sinatra 框架创建了一个 .rb 文件，但我不确定如何“部署”它。当我在服务器上发布文件时，我只得到一个简单的文本文件，它可以读回我的代码。当我使用 Sinatra 运行它时效果很好。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:01:21.027

看起来您的 Web 服务器（Apache？）只是*为*您提供 Ruby 脚本（即文本、ASCII 文件）而不是*运行*它（即：而不是通过 Ruby 解释器传递它）。

因此：

1.  您的服务器上是否安装了 Ruby 解释器？
2.  您的 Web 服务器是否配置为*运行*Ruby 脚本（以“.rb”结尾的文件）？
3.  而且，Sinatra 本身是否安装在您的 Web 服务器上？

无论如何，Ruby 应用程序（Rails、Sinatra、Padrino）通常使用 GIT 部署到服务器。看看 Heroku 和 Engine Yard。

此外，还有专门设计用于帮助开发人员部署 Ruby 应用程序的工具。查看 Capistrano 或 Vlad 和/或 Google 以了解“如何部署 sinatra 应用程序”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:58:47.340

对于 Sinatra/Rails/etc，大多数人使用 Web 服务器（即 Apache、Nginx 等）和应用服务器（Thin、Passenger、Unicorn）。对于一个简单的应用程序，它们可以存在于同一主机上。网络服务器管理传入流量，应用服务器执行 ruby​​ 代码并将结果传递给网络服务器。

当您执行`ruby app.rb`运行您的 Sinatra 应用程序时，您实际上是在加载作为应用程序服务器的 WEBrick。由于您的开发机器是本地的，您可以直接在`localhost:3000`或类似的地址访问它。

查看有关使用 Thin 设置网络服务器的教程，它是更容易使用的教程之一。当/如果你长大了，然后看看独角兽。

# python - Reportlab：如何使用 BaseDocTemplate 添加不确定的内容？

> ID：12791769
> 
> 赞同：0
> 
> 时间：2012-10-09T01:42:20.183
> 
> 标签：python, pdf, reportlab

我想在第一页添加内容。但是数据是不确定的，内容要根据数据来绘制。

我尝试通过绘制两次，计算并记录内容来解决这个问题，并且效果很好。但这既浪费时间又笨拙。

我可以在完成绘图后插入第一页吗？或者其他解决这个问题的方法？

对不起，我英语很差。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:17:45.727

如果您将 Platypus 与 ReportLab 一起使用，您可以“免费”获得目录：只需查看 ReportLab 手册了解详细信息，但您基本上只需在文档`TableOfContents`列表中添加一个即可。`Flowables`否则，您必须自己弄清楚构建目录的所有逻辑。

# jquery - 在 jquery 的按键上更改文本框的值

> ID：12791779
> 
> 赞同：0
> 
> 时间：2012-10-09T01:43:41.953
> 
> 标签：jquery, asp.net-mvc

我从我的 ASP.net MVC 控制器中获取了 JSON 数据，并将其循环显示在我的视图中。

![在此处输入图像描述](../Images/a6283e3c5eea480fe4e4ce4042dc27c6.png)

```
$(document).ready(function () {
var amount = 0;
var subTotal = 0;
var vat = 0;
var total = 0;
var qty = 0;
var urlSession = '<%: Url.Content("~/") %>' + "Quotation/ProductInSession";
$.getJSON(urlSession, function (dataQuote) {
    var i = dataQuote.ja.length;
    $.each(dataQuote.ja, function (index, data) {
        amount = data.ProductQty * data.ProductPrice;
        subTotal += amount;
        $("#listProduct tr#first_row").after('<tr style="height:25px;"><td class="tablecell2" width="40px" align="center">' + i + '</td><td class="tablecell2">' + data.ProductName + '</td><td class="tablecell2" width="70px" align="center"><input id="qty" type="text" value="' + data.ProductQty + '" size="2"/></td><td class="tablecell2" width="90px" align="right" style="padding-right:5px;">' + data.ProductPrice + '</td><td class="tablecell2" style="border-right:1px solid silver;padding-right:5px;" width="120px" align="right"><span id="amount">' + amount + '</span></td></tr>');
        i--;
        $('#qty').keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') {
                qty = $("#qty").val();

                $("#qty").html(qty);

                amount = qty * data.ProductPrice;
                $("#amount").html(amount);
            }
        });
    });
    vat = (subTotal * 10) / 100;
    total = subTotal + vat;
    $("#vvat").html("<b>" + vat + "</b>");
    $("#ssubtotal").html(subTotal);
    $("#sgrandtotal").html("<b>" + total + "</b>");
  });
}); 
```

我想做的是：

1.  当我按下 Enter 键时更改文本框中的值
2.  更改金额的值（金额 = 数量 * 单价）

我是否应该创建控制器的另一个操作来处​​理此更新或除此之外的任何内容。

感谢任何人都可以给我的任何帮助！

这

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:53:41.677

try this

```
 $('#qty').bind("keydown",function (e) {
        if (e.which == 13) {
         e.preventDefault();
            qty = $("#qty").val();

            $("#qty").html(qty);

            amount = qty * data.ProductPrice;
        }
    }); 
```

# ios - CLLocationManager 放大-缩小

> ID：12791780
> 
> 赞同：1
> 
> 时间：2012-10-09T01:43:50.237
> 
> 标签：ios, cllocationmanager

我已经实现了一个`CLLocationManager`来显示用户位置。一旦用户单击按钮，地图就会放大用户位置。但是，一旦用户想要缩小回来，它就不允许用户缩小。实际上，它缩小了一点，但又放大了！

![在此处输入图像描述](../Images/baaaf0ef6020eb13837deb6c09d09371.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:14:41.323

当您有地图视图时，您不需要使用 CLLocationManager 来获取用户位置。您可以使用地图视图的 userLocation 属性，还可以收听委托回调，该回调将为您提供有关用户位置的更新。

由于您没有提供任何代码，我会说无论是在 MKMapView 委托方法还是 CLLocationManager 委托方法上，您都在放大和/或关注最新的位置。由于这是一个在有新位置时立即更新的委托方法，因此您可能每次都在放大。如果你只想放大一次，你可能想尝试调度一个 dispatch_once 块来确保你只是在第一次有坐标更新时才放大。您还可以修改 CLLocationManager，使其仅在距离发生重大变化时使用距离过滤器属性更新位置。这完全取决于您要完成的工作。

# ruby-on-rails - Ruby on Rails 泛化

> ID：12791781
> 
> 赞同：0
> 
> 时间：2012-10-09T01:43:58.920
> 
> 标签：ruby-on-rails, ruby, database

我正在尝试对我的应用程序中的某些类进行概括。我有一个具有“数字”、“姓名”和“工资”作为属性的“员工”类。我有“工人”类和“销售员”类，它们都是员工，因此具有所有“员工”属性。例如，当创建一个新的“Worker”时，我必须将数据放在我的“Employee”类和我的“Worker”类上......我如何在 RoR 上进行这种概括？

(http://support.objecteering.com/objecteering6.1/help/us/sql_designer/sql_images/fig13.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:48:07.557

我完全不确定你在问什么，但我怀疑答案可能是[单表继承](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)。

# nullpointerexception - 在安装位置屏幕中单击“浏览”按钮时 install4j java.lang.NullPointerException

> ID：12791782
> 
> 赞同：1
> 
> 时间：2012-10-09T01:44:09.630
> 
> 标签：nullpointerexception, install4j

我用 install4j 版本 5.1.2 制作了一个安装包。

在安装包的过程中，首先在安装位置屏幕上清除“目标目录”的文本字段，然后单击浏览按钮并想选择一个全新的安装位置，同时这个鼠标事件没有响应时间有一个error.log文件创建。

error.log 的内容如下：

```
java.lang.NullPointerException
    at com.install4j.runtime.installer.frontend.components.DirectorySelector.doBrowse(Unknown Source)
    at com.install4j.runtime.installer.frontend.components.DirectorySelector.access$000(Unknown Source)
    at com.install4j.runtime.installer.frontend.components.DirectorySelector$1.actionPerformed(Unknown Source)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source) 
```

install4j有什么问题吗？还是有什么其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:50:34.680

这是 install4j 中的一个错误，已在 5.1.3 中修复。

# list - Ocaml 中的 List.Fold_Left 类型系统？

> ID：12791786
> 
> 赞同：2
> 
> 时间：2012-10-09T01:44:28.910
> 
> 标签：list, ocaml, fold, higher-order-functions

编写一个 Ocaml 函数`list_print : string list -> unit`，从左到右打印列表中的所有字符串：

所以假设我有一个 Ocaml 函数`list_print: string list -> unit`，它打印列表中的所有字符串，从左到右写入。现在正确的解决方案是：

```
let list_print lst = List.fold_left (fun ( ) -> fun s -> print_string s) () lst;; 
```

但是在编写我的解决方案时，我是这样写的：

```
let list_print lst = List.fold_left (fun s -> print_string s) () lst;; 
```

但这给了我

**错误：此表达式具有单元类型，但预期的表达式类型为 'a -> string**

为什么我需要第一个参数 fun() -> 在 fun 之前？我还是 Ocaml 的新手，所以这种类型系统让我很困惑

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T02:16:40.567

`fold_left`(and )的目的`fold_right`是在您进行过程中累积一个值。额外的参数是这个累积值。

你可以使用`List.iter`你的问题。它*不会*累积价值。

您可以将其`List.iter`视为`List.fold_left`累积 type 值的版本`unit`。而且，事实上，你可以这样实现它：

```
let iter f = List.fold_left (fun () a -> f a) () 
```

要点（与 总是一样`unit`）是该类型只有一个值，因此它表示该值不感兴趣的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:07:30.680

您想使用`List.fold_left`，这很好，但您应该从阅读该函数的文档开始。官方文档很短：

```
val fold_left : ('a -> 'b -> 'a) -> 'a -> 'b list -> 'a
List.fold_left f a [b1; ...; bn] is f (... (f (f a b1) b2) ...) bn. 
```

首先是该函数的*类型*。类型是

```
 ('a -> 'b -> 'a) -> 'a -> 'b list -> 'a 
```

换句话说，该函数`fold_left`具有三个参数和一个结果值。第一个参数有 type `('a -> 'b -> 'a)`。第二个参数有 type `'a`。第三个参数有 type `'b list`。函数的结果值类型为`'a`。

现在，在您的情况下，您想要*打印*字符串。所以你实际上不需要任何*结果值*，你需要一个副作用。但是，在 OCaml 中，所有函数都必须有一个结果值。因此，您使用空值 ，`()`它的类型为`unit`。因此，在您的情况下，类型参数`'a`将等于`unit`。

类型参数`'b`是`string`因为您需要处理字符串列表。

因此，在您的情况下，函数`fold_left`必须具有类型

```
 (unit -> string -> unit) -> unit -> string list -> unit. 
```

的第一个参数`fold_left`必须具有类型`unit->string->unit`。换句话说，它必须是一个有两个参数的函数，第一个参数是空值，即`()`，第二个参数是一个字符串。所以第一个参数`fold_left`必须是这种函数，

```
 fun x y -> ... 
```

where`x`必须是 type`unit`和`y`type `string`。因为`x`总是等于`()`，所以没有必要把这个参数写成一个变量`x`，相反我们可以简单地写`()`甚至是哑参数`_`。（语法`fun x -> fun y -> ...`提供与 相同的功能`fun x y -> ...`。）

现在你可以开始弄清楚 fold_left 是如何工作的。由于这显然是一个家庭作业问题，我将把这个任务留给你。

# php - 尝试解析 SQL 数据以制作更易于处理的关联数组

> ID：12791790
> 
> 赞同：0
> 
> 时间：2012-10-09T01:45:38.670
> 
> 标签：php, mysql, wordpress, object, associative-array

我为此使用了 Wordpress，但这不是以 Wordpress 为中心的问题，所以我在这里问。

你可以在这里看到我的代码片段：http: [//pastebin.com/Cbc8wKvB](http://pastebin.com/Cbc8wKvB)

```
<?php

function getFormIds() 
{
        global $wpdb;

        $sql = "
                        SELECT a.id
                        FROM wp_rg_lead a
                        WHERE a.form_id = 10 AND a.payment_status = 'Approved'
        ";

        $query = $wpdb->get_results($sql);

        if($query)
                return $query;

        return false;
}

function getFormInfo($form_id) 
{
        global $wpdb;
        $sql = "
                        SELECT *
                        FROM wp_rg_lead_detail
                        WHERE lead_id = $form_id
                        ";

        $query = $wpdb->get_results($sql);

        if($query)
                return $query;

        return false;
}

$credit_card_form_ids = getFormIds();

if ( $credit_card_form_ids ) {
        $entries = array();

        foreach( $credit_card_form_ids as $entry) {
                $single_entry = getFormInfo($entry->id);

                if ( $single_entry ) {

                        $entry_array = array();
                        $full_array = array();

                        foreach( $single_entry as $entry ) {
                                $curr_array = array( $entry->field_number => strip_tags($entry->value));
                                $entry_array[$entry->field_number] = strip_tags($entry->value);
                                array_push($full_array, $entry_array);
                        }
                }
        }
        #var_dump('full_array', $full_array);
} 
```

基本上我正在运行一个数据库查询来获取所有符合某个条件的条目 ID。这将返回单个值的对象数组。然后我通过 a 传递这个数组`foreach()`并尝试提取/组合数据以使其更易于使用。

这是上面代码`print_r()`中的一个：http: [//pastebin.com/RZmfD2EU](http://pastebin.com/RZmfD2EU)`$single_entry`

单项：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1983
            [lead_id] => 86
            [form_id] => 10
            [field_number] => 34
            [value] => 695
        )

    [1] => stdClass Object
        (
            [id] => 1982
            [lead_id] => 86
            [form_id] => 10
            [field_number] => 39
            [value] => 0
        )

    [2] => stdClass Object
        (
            [id] => 1981
            [lead_id] => 86
            [form_id] => 10
            [field_number] => 40.1
            [value] => Yes
        )
    ... etc etc. 
```

使用我提供的代码，最终的数组似乎以某种方式崩溃——这意味着我在途中的某个地方丢失了条目。

理想情况下，我希望将数据关联`id`到他们的`key`=>`value`对。即：

```
 [id] => [lead_id]
 [field_number#] => [field_number_value] 
```

对于提供的前几行数据的实际表示：

```
Array (
    [0] =>
        (
            [id] => 86
            [34] => 695
            [39] => 0
            [40.1] => Yes
            ...etc
        )
) 
```

有没有比我正在做的更好的方法来循环和关联数据？我对 PHP 和 MySQL 比较陌生/不擅长，希望得到一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:07:40.793

我不确定我是否理解正确，但是如果您想为指定的键分配值……</p>

```
if ( $single_entry ) {

    $entry_array = array();
    $full_array = array();

    foreach( $single_entry as $entry ) {
        $curr_array = array( $entry->field_number => strip_tags($entry->value));
        $entry_array[$entry->field_number] = strip_tags($entry->value);
        $lead_id = $entry['lead_id'];
        $full_array[$lead_id] = $entry_array;
    }
} 
```

# sql - 最终 REBUILD WITH () 上的 SQL 语法错误

> ID：12791793
> 
> 赞同：0
> 
> 时间：2012-10-09T01:46:38.903
> 
> 标签：sql, sql-server, tsql, stored-procedures, syntax-error

知道如何让这个语法错误消失吗？它位于整个过程的最后一个括号中。我似乎无法弄清楚我错过了什么。当我尝试运行它时没有发生其他错误。

```
CREATE PROCEDURE pRebuildOrReorg
(
    @db VARCHAR(50) =  'AdventureWorksLT2012',
    @table VARCHAR(50) = 'SalesLT.Customer',
    @indexName VARCHAR(50) = 'IX_Customer_EmailAddress'
)
AS 
DECLARE @objID INT
DECLARE @dbID SMALLINT
DECLARE @indexID SMALLINT
DECLARE @avgFrag INT
DECLARE @cmd VARCHAR(100)
DECLARE @message VARCHAR(100)

-- 1\. find the object id of the desired table
SET @objID = OBJECT_ID(@table)
SET @dbID = DB_ID(@db)
SET @IndexID = (SELECT index_id FROM sys.indexes WHERE name = @indexName)
-- 2\. View the statistics for all indexes of the table
SELECT @avgFrag = avg_fragmentation_in_percent
FROM sys.dm_db_index_physical_stats(DB_ID('AdventureWorksLT2012'),
  OBJECT_ID('SalesLT.Customer'),
 @IndexID, NULL , 'DETAILED')

if @avgFrag >= 30
BEGIN SET @cmd = 'ALTER INDEX ' + @indexName + ' ON ' + @table + ' STATISTICS_NORECOMPUTE = OFF)' 
EXEC (@cmd) 
SET @message = 'Reorganized Index ' + @indexName
ALTER INDEX PK_StoreContact_CustomerID_ContactID
  ON AdventureWorks.Sales.StoreContact
REORGANIZE 
END

else if @avgFrag < 30
BEGIN SET @cmd = 'ALTER INDEX ' + @indexName + ' ON ' + @table + ' STATISTICS_NORECOMPUTE = OFF)' 
EXEC (@cmd) 
SET @message = 'Rebuilt Index ' + @indexName
ALTER INDEX IX_StoreContact_ContactID
  ON AdventureWorks.Sales.StoreContact
REBUILD WITH(
fillfactor = 70,
online = ON
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:10:11.320

欢迎使用您的个人语法检查和调试服务。

请在最后一行之后在新行上添加一个**END 。**

您是否下载了具有改进的智能感知和错误检测功能的 SQL Server Management Studio 2012？

# entity-framework - 考虑以下架构更改并需要一些建议（域实体、DTO、聚合）

> ID：12791795
> 
> 赞同：2
> 
> 时间：2012-10-09T01:46:59.980
> 
> 标签：entity-framework, domain-driven-design, dto, aggregates

大约一年前，我建立了一个由 ASP.Net MVC 3（现在）表示层、应用程序层、域层和基础设施层（横切材料和数据）组成的解决方案。我决定将域模型与域逻辑保持在一个单独的项目中，并通过传递域实体而不是 DTO 对表示层使用一种轻松的方法，因为我们现在实际上只有一个前端。

除了我们的主网站之外，我们将很快为分布式层提供服务，我将在那里使用 DTO，但我也在考虑在主网站中使用 DTO。我还想知道我是否应该费心在域层（IRepository、IUnitOfWork、实体/值对象超类型等）中分解框架代码。那么在这里，让我列出我需要反馈的问题：

1) 我非常努力地避免没有贫血的领域模型，并且还注意特定于演示问题的行为。所需的大多数业务计算都在域实体上，表示层可以直接调用此行为还是应该调用应用程序服务，然后调用域实体？这向我表明，没有理由让表示层知道域实体，而是可以使用 DTO。或者，我可以让 DTO 公开这些行为，但是我觉得我在抢劫域实体。所以我猜这是最好的 3 个选项（直接调用丰富的域对象、服务层或具有行为的 dto）？

2）现在我有一个领域项目，它具有领域服务、规范和逻辑，由应用层和单独的领域模型项目（由表示层和应用层使用）编排。我这里还有通用存储库和工作单元模式的框架接口。我是否应该将框架内容分解为一个单独的项目并将其余部分合并为一个项目？

3）我想将我的领域层重组为聚合，现在所有的领域模型都是由模块组织的，基本上每个模块的所有类型都在一个命名空间中。通过聚合来组织实体、价值对象、服务和其他东西会更好吗？

4) 对于基本上是 .net 框架助手库类型的基础设施服务，我应该使用分离接口模式吗？例如配置对象或验证运行器？这样做有什么好处？

5) 最后，我所见过的使用域实体接口的例子并不多。由于依赖的原因，我几乎所有的对象都喜欢传递接口，它使测试变得更加容易。使用接口而不是混凝土是否有效？我应该提到我们使用 EF 4.3.1（即将升级到最新版本），我似乎记得 EF 在使用接口或其他东西时遇到了问题。我应该公开接口而不是域实体吗？

非常感谢您提前。

项目结构：

```
Presentation.Web
     | |
     | 应用
     | | |
Domain.Model - 域

（基础设施.数据、基础设施.核心、基础设施.安全）

```

说明：Presentation.Web（MVC3 Web 项目）

应用程序——编排领域层并响应来自表示层的请求的服务层（获取此更新）。这是按模块组织的，例如，如果我有一个客户模块，我将拥有 Application.Customer，其中包含所有应用程序服务

域——包含域服务、规范、计算和其他不作为域实体行为公开的域逻辑。例如，涉及多个域实体的计算，这些实体公开为应用层调用的域服务。-- 还包含规范框架的框架代码和通用存储库和工作单元模式的主要接口。

Domain.Model -- 包含域实体和枚举。按模块组织。例如，如果我可能有一个客户模块，它有一个客户实体、客户订单实体等。这是从域项目中分离出来的，以便应用程序和表示层可以使用这些对象。

Infrastructure.Security -- 用于身份验证和授权的安全基础设施

Infrastructure.Core - 由多个层（验证器、日志记录、配置、扩展、IoC、电子邮件等）使用的横切内容。大多数项目依赖于该项目中的接口（除了domain.model）来提供基础设施服务。

Infrastructure.Data——通过 LINQ 和 EF 4.3.1 的存储库实现、映射层、工作单元实现。接口在域项目中（分离接口模式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:23:39.487

1）首先，确定你的主网站是否真的需要用到应用层。恕我直言，如果您的应用程序服务和您的主网站位于同一 Web 服务器上，那么您应该评估潜在的性能损失是否值得让您的主网站在可以直接调用域对象时调用应用服务器方法。但是，如果您的应用程序服务器肯定在另一台服务器上，那么是的，您应该让应用程序服务器调用您的域对象，并且只在它与您可能拥有的任何表示层（包括您的主网站）之间来回传递 DTO。

2）这确实是一个关于组织偏好的问题。两者都是有效的。你选。

3）关于组织偏好的另一个问题。我个人首先通过限界上下文组织我的代码。然后，我在它们的正下方有实体和聚合根。然后，我有枚举、存储库（接口）、服务（接口）、规范和值的文件夹。命名空间不反映最后一个有界上下文文件夹之后的这种组织结构。但是，同样，您应该以最适合您查看代码的方式来执行此操作。

4）这是一个实施问题。如果我认为将来很有可能需要更换实现，我个人只会将实现问题分解为接口。话虽如此，我通常将我的帮助程序库组织到特定的基础设施上下文中（例如 MainContext.Web.MVC.Helpers 或 MainContext.Web.WebForms.Helpers。）这些很少改变，我还没有遇到我需要的实例完全换掉实现。

5）据我了解，为您的域实体使用接口而不是具体是完全有效的。话虽如此，我还没有遇到过我的域实体需要不同实现的情况。我什至能想到的唯一原因是，如果您需要更改一个应用程序的业务逻辑，但保留使用原始业务逻辑的旧应用程序。如果您的业务对象是该领域的良好模型，我无法理解您实际上会遇到这个问题，但我已经看到人们只是为了抽象而这样做的示例。恕我直言，这不值得额外的编码工作，但如果它让你内心感觉良好或者你获得了一些实际好处（例如，使测试更容易），那么你没有任何理由不能抽象出你的域实体。话虽如此，

答案 5 源于应用程序是选择实现的人的想法。如果您正在尝试实现洋葱架构，那么您的应用程序将为所有内容（存储库、域服务和其他抽象的实现问题）选择具体的实现。我看不出它为什么不能直接使用域聚合，因为它们是域模型的具体表示。（注意：所有实体都应该封装到聚合中。应用程序永远不能持有对在上下文中不是聚合的实体的引用）

# java - 强制解锁可重入锁

> ID：12791797
> 
> 赞同：3
> 
> 时间：2012-10-09T01:47:29.423
> 
> 标签：java, multithreading, concurrency, locking, reentrancy

我有一个可重入锁，我将它包装在一个自定义类中以满足我自己的需要。但是，由于应用程序的性质，持有可重入锁的锁的线程会卡住（外部故障）并且无法释放可重入锁。

我想知道是否有一种方法可以显式解锁可重入锁？我知道可重入锁的 API 没有这样的方法 - 但是我正在考虑引入一个计时器任务，该任务将在一段时间后解锁可重入锁或杀死持有可重入锁的线程。

尝试强制解锁我的可重入锁还有其他建议吗？我的解决方案很漂亮，所以我问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:58:05.597

我不会在外部解锁，而是在单独的线程中执行阻塞代码并让它超时

像这样的东西

```
Future<MyTask>future = taskExecutor.submit(myTask)
try {
    future.get(5,TimeUnit.Seconds);
    ...
    }
    catch (Exception e)
    {
        future.cancel(true); // attempt to interupt the thread
        throw new Exception();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:00:26.420

根据我的评论，任何锁都应该包裹在一个`try/finally`块周围，以确保在出现问题时释放锁

```
_lock.lock(); // will wait until this thread gets the lock
try
{
    // critical section
}
finally
{
    //releasing the lock so that other threads can get notifies
    _lock.unlock();
} 
```

这在[锁定对象](http://docs.oracle.com/javase/tutorial/essential/concurrency/newlocks.html)跟踪中得到了演示

# php - 使用斜线和引号转换 WYSIWYG 的输出 HTML

> ID：12791799
> 
> 赞同：2
> 
> 时间：2012-10-09T01:47:47.353
> 
> 标签：php, html, wysiwyg

我有一个所见即所得的编辑器 (TinyMCE) 可以将博客文章添加到我的网站。如果我只是写一个相当正常的段落：

```
<p><strong>Hello world!</strong></p> 
```

它输出就好了。但是，如果我尝试一些额外的 HTML，例如链接和下划线，我的编辑器会踢出以下内容，这些内容在打印到屏幕时不起作用或看起来不正确：

```
<p>This is some test <span style=\"text-decoration: underline;\">content</span> with <a href=\"\\&quot;\\\\&quot;http:/www.google.com\\\\&quot;\\&quot;\" target=\"\\&quot;\\\\&quot;_blank\\\\&quot;\\&quot;\">more</a> <em>tags</em> than I would <strong>normally</strong> add.</p> 
```

这是一堆斜线和引号。我该怎么解决这个问题？有哪些方法或功能？我更关心链接而不是样式标签。任何建议都会很棒。

**更新 1** 我已经使用了**stripslashes()**来修复`<SPAN>`标签但没有修复`A`标签。

**我的设置** 这是我的 TinyMCE 编辑器代码：

```
<script>
tinyMCE.init({
    mode : "exact",
    elements : "content",
    theme : "advanced",
    plugins : "autolink,lists,spellchecker,pagebreak,advhr,advlink,iespell,inlinepopups,"
    + "print,noneditable,visualchars,nonbreaking,xhtmlxtras",
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,bullist,"
    + "numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_resizing : true,
    width: "100%",
    height: "425"
});
</script> 
```

然后通过 AJAX 将 textareas 内容发布 (POST) 到另一个页面，然后*按原样*存储到数据库中。当我从我的数据库中将这个所见即所得的 HTML 打印到页面上时，我写道：

```
<?php
echo stripslashes($dbResults['article_body']);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:17:40.890

下面的块呢？

```
<?php
  echo html_entity_decode(stripslashes($dbResults['article_body']));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:26:49.983

“自动链接”插件显然会自行更改可能的链接，这就是为什么它被您和插件更改两次的原因。

# jquery - 使用 jQuery 计算 div 的高度 - 减去页眉和页脚

> ID：12791801
> 
> 赞同：1
> 
> 时间：2012-10-09T01:47:51.253
> 
> 标签：jquery

我正在使用粘性页脚（负边距解决方案），它工作正常。我需要做的是计算窗口的高度，减去页眉和页脚的已知高度，然后应用该数字并将其用于主包装 div 的高度。CSS解决方案会导致其他问题，有没有好的方法来做到这一点？

```
var h = window.height();
var k = 300; //header is 100px footer is 200px
$('#wrap').height(h-k); 
```

粗略的想法，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:52:39.257

You have the right idea:

```
var h = window.innerHeight;
var k = 300;
$('#wrap').height(h-k); 
```

However, I'd recommend doing this in CSS as doing this in JavaScript without a specific reason is bad form.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T03:34:08.253

只需将我的评论改写为ans。这是我通常做的：

```
$(function() {
    $(window).bind("resize", function() {
        var height = $(window).height();
        var k = 112;

        $('#sidebar').height(height - k);

    }).trigger("resize");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T02:10:04.583

正如罗兰和米峰指出的那样，我走在了正确的轨道上。经过更多的挖掘，我能够想出这个，这完全符合我的需求。谢谢大佬们的推！

```
<script type="text/javascript">
  var callback = function () {
     var h = $(window).height();
     var k = 112;
     $('#sidebar').height(h-k);
  };
  $(document).ready(callback);
  $(window).resize(callback);
</script> 
```

# c++ - 使用 std::ios::ate 获取文件大小？

> ID：12791807
> 
> 赞同：1
> 
> 时间：2012-10-09T01:49:06.723
> 
> 标签：c++, file, size, fstream, standard-library

关于如何测量文件大小的几个主题（请参阅[Using C++ filestreams (fstream), how can you can determine the size of a file?](https://stackoverflow.com/questions/2409504/using-c-filestreams-fstream-how-can-you-determine-the-size-of-a-file)和[C++: Getting wrong file size](https://stackoverflow.com/questions/2282549/c-getting-incorrect-file-size/2289423#2289423)）计算文件开头和结尾之间的差异：

```
std::streampos fileSize( const char* filePath ){

    std::streampos fsize = 0;
    std::ifstream file( filePath, std::ios::binary );

    fsize = file.tellg();
    file.seekg( 0, std::ios::end );
    fsize = file.tellg() - fsize;
    file.close();

    return fsize;
} 
```

但不是在开始时打开文件，我们可以在最后打开它并采取措施，如下所示：

```
std::streampos fileSize( const char* filePath ){

    std::ifstream file( filePath, std::ios::ate | std::ios::binary );
    std::streampos fsize = file.tellg();
    file.close();

    return fsize;
} 
```

它会起作用吗？如果不是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:04:35.327

它应该工作得很好。C++ 标准说`std::ios::ate`

> `ate`- 打开并在打开后立即结束

当手动打开然后搜索成功时，它没有理由失败。并且`tellg`在任何一种情况下都是相同的。

# asp.net - 纯javascript ajax调用asp.net webmethod

> ID：12791811
> 
> 赞同：0
> 
> 时间：2012-10-09T01:49:16.870
> 
> 标签：asp.net, ajax

我不想用 jquery $.ajax 调用 asp.net 服务器端代码。所以我写了一个纯 javascript ajax 文件。但是当我调用 webmethod 时，这不起作用。任何人都可以帮我解决这个问题吗？非常感谢你 。

ajax.js：

```
var ajax = {
    _params: null,
_callback: null,
 _xhr: null,
_createXHR: function () {
if (window.ActiveXObject) {
 _xhr = new ActiveXObject("Microsoft.XMLHTTP");     //IE
}
    else if (window.XMLHttpRequest) {
        _xhr = new XMLHttpRequest();      //FireFox,Chrome et.
    }
},

_ajaxcallback: function () {
    if (_xhr.readyState == 4) {
        if (_xhr.status == 200) {
            _callback.call(this, _xhr.responseText)
        }
    }
},

_changeParams: function () {
    var args = arguments[0];
    var s = "";
    for (var i in args) {
        s += "&" + i + "=" + args[i];
    }
    _params = s;
},

get: function (url, params, callback) {
    _callback = callback;
    ajax._createXHR();
    ajax._changeParams(params);
    if (null != _xhr) {
        _xhr.open('get', url + '?' + _params, true);
        _xhr.onreadystatechange = ajax._ajaxcallback;
        _xhr.send();
    }
},

post: function (url, params, callback) {
    _callback = callback;
    ajax._createXHR();
    ajax._changeParams(params);
    if (null != _xhr) {
        _xhr.open('post', url, true);
        _xhr.onreadystatechange = ajax._ajaxcallback;
        _xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        _xhr.send(_params);
    }
}
} 
```

WebForm1.aspx

```
<head runat="server">
<title></title>
<script src="ajax.js" type="text/javascript"></script>
<script type="text/javascript">
    function ajaxtest() {
        var uid = document.getElementById("txtuid").value;
        var pwd = document.getElementById("txtpwd").value;
        ajax.post("WebForm1.aspx/GetModel", "{ 'uid':" + uid + ", 'pwd':" + pwd + " }", function (data) {
            alert(data);
        });
    }
</script>

</head>
<body>
<form id="form1" runat="server">
<div>
<input type="text" id="txtuid" value="eeee" />
<input type="text" value="222" id="txtpwd" onblur="ajaxtest()"/> 
```

WebForm1.cs：

```
 [WebMethod]
    public static string GetModel(string uid,string pwd)
    {

     return "1";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:17:09.720

在您的标记中，您需要将`ScriptManager`with`EnablePageMethods`设置为 true。这样做将确保您可以调用已标记的方法`[WebMethod]`。

在你的 JavaScript 中，你可以像这样调用你的方法：`PageMethods.GetModel("userName", "password", OnSuccessMethod, OnFailureMethod);`- 如果你这样做，你将不需要任何`ActiveXObject/XmlHttpRequest`东西，这让事情变得更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:03:56.013

使用 Michael Schwarz 的 AJAX.PRO --> [http://www.ajaxpro.info/](http://www.ajaxpro.info/)

# c++ - 在旧代码中创建基于类型的标识号，更改最少

> ID：12791812
> 
> 赞同：0
> 
> 时间：2012-10-09T01:49:21.133
> 
> 标签：c++, linux, templates, gcc, maintenance

我正在维护一个非常古老（20 多年）且相当大（15 KLOC）的库，其中包含当前由整数标识的各种类型的对象。这提出了一个问题，即只给定整数我不知道它应该识别哪种类型的对象。在编译时这样做会非常好。

我想出的最小改动的解决方案是创建一个 ID 模板，然后为它为各种类型的对象 ID 创建 typedef。

我意识到我必须在模板中添加第三个参数，因为我认为两个完全不同的标识符可能具有相同的基础类型和范围。

我发现 C++ 不考虑

```
typedef int X;
typedef int Y; 
```

作为完全不同的类型。

这是解决方案吗：-

A）合理（我知道它有效）

B）是否有另一种简单的方法来做到这一点 - 管理层害怕高 LOC 变化

仅使用示例运算符简化解决方案。

```
#include <iostream>

// Horrible old definition of current code
class OldObjectA
{
   public:
      int ident_; // int identifier
      int uniq_;  // another int identifier unique to OldObjectA's only
};

class OldObjectB
{
   public:
      int ident_;
      int next_; // int of another OldObjectB ident_
      int uniq_; // another int identifier unique to OldObjectB's only
      int dq_;   // int of yet anothera OldObjectB ident_
      int com_;  // int of ident_ of a OldObjectA
      int ld_;   // int of ident_ of a OldObjectC
};

class OldObjectC
{
   public:
      int indent_;
      int next_; // int of another OldObjectC ident_
      int com_;  // int of ident_ of a OldObjectA
};

enum Type { TypeA, TypeAU, TypeB, TypeBU, TypeC };

template<class T, T maxval, Type type>
class ID
{
   public:
      friend bool operator==(const ID<T, maxval, type> &lhs, const ID<T, maxval, type> &rhs)
      {
         std::cout << __PRETTY_FUNCTION__ << std::endl;
         return true;
      }
};

typedef ID<int, 42, TypeA>  ID_A;
typedef ID<int, 42, TypeAU> ID_UniqA;
typedef ID<int, 42, TypeB>  ID_B;
typedef ID<int, 42, TypeBU> ID_UniqB;
typedef ID<int, 100, TypeC> ID_C;

// What I was thinking of doing
class NewObjectA
{
   public:
      ID_A ident_; // int identifier
      ID_UniqA uniq_;  // another int identifer
};

class NewObjectB
{
   public:
      ID_B ident_;
      ID_B next_; // int of another OldObjectB ident_
      ID_UniqB uniq_; // another int
      ID_B dq_;   // int of yet anothera OldObjectB ident_
      ID_A com_;  // int of ident_ of a OldObjectA
      ID_C ld_;   // int of ident_ of a OldObjectC
};

class NewObjectC
{
   public:
      ID_C indent_;
      ID_C next_; // int of another OldObjectC ident_
      ID_A com_;  // int of ident_ of a OldObjectA
};

int main(int argc, char *argv[])
{
   std::cout << "================================================================================\n";
   ID_A a,a2;
   ID_UniqA au,au2;
   ID_B b,b2;
   ID_UniqB bu,bu2;
   ID_C c,c2;

   a==a2;
   au==au2;
   b==b2;
   bu==bu2;
   c==c2;

   // wanted and expected compile time fails
   // a=au;
   // a=b;
   // a=bu;
   // a=c;
   // au=b;
   // au=bu;
   // au=c;
   // b=bu;
   // b=c;

   std::cout << "================================================================================\n";

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:10:17.320

添加模板参数以区分其他相同类型的想法是合理的。这是一种有用的技术，每隔一段时间就会出现一次。最近，我在定义测量类型（即公里、升、秒等）时使用了类似的技术。

你可以对你所拥有的东西进行至少一种简化。枚举不是必需的。您可以在其 ID 定义中使用类型本身。

```
template<class T, T maxval, class tag>
struct ID {
};

template<class T, T maxval, class tag>
bool operator==(ID<T, maxval, tag> lhs, ID<T, maxval, tag> rhs)
{
    return true;
}

typedef ID<int, 42, class NewObjectA> ID_A;
typedef ID<int, 42, class NewObjectB> ID_B;

struct NewObjectA {
    ID_A id;
};

struct NewObjectB {
    ID_B id;
};

void f()
{
    ID_A id_a;
    ID_B id_b;

    id_a == id_a;
    id_b == id_b;
    //id_a == id_b; // won't compile as expected
} 
```

这样做的好处是不会在一个地方创建程序中所有类型的全局列表。如果您需要根据继承层次结构允许的转换来处理 ID，使用类型本身也可能会使事情变得更容易。例如，ObjectC 是 ObjectA，因此 ID_C 可以转换为 ID_A。

我发现添加这种东西（我正在做的测量工作是相似的）增量方法通常是要走的路。每次您需要修改一段代码时，都会在本地引入一些改进，并在进行更多更改之前确认它们按预期工作。如果您认为您已经确定了一个错误并改变了程序行为，那么测试这些更改尤其重要。相反，试图一次改变一切往往会带来很多痛苦。

# trigger.io - getCurrentPosition 不会在 Android 上通过 Trigger Toolkit 执行

> ID：12791814
> 
> 赞同：2
> 
> 时间：2012-10-09T01:49:58.883
> 
> 标签：trigger.io

我正在尝试使用 forge.geolocation.getCurrentPosition 获取用户的当前位置。我在我的代码中启用了该模块，我打开了设备的 GPS 和移动数据，并且我正在通过 Trigger Toolkit 在我的 Android 设备上运行代码。

当我这样做时，似乎 forge.geolocation.getCurrentPosition 永远不会执行。没有达到成功或失败回调函数（每个中的第一个命令是日志消息）。也不会抛出任何错误。

但是，当我将我的应用程序打包为 apk 并将其安装在我的设备上时，完全相同的代码可以正常工作。

有什么想法为什么不能通过 Trigger Toolkit 在 Android 上执行，或者我该如何进行调试？

# python - 关于字典上的嵌套生成器理解的误解

> ID：12791815
> 
> 赞同：0
> 
> 时间：2012-10-09T01:50:06.317
> 
> 标签：python, dictionary, generator, list-comprehension

我尝试在字典上使用嵌套生成器理解，并将列表作为存储值，并观察到以下奇怪的（对我而言）行为：

```
Python 2.6.5 (r265:79063, Oct  1 2012, 22:07:21) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> dummy = {1:[1,2,3],2:[2,3,4],3:[3,4,5]}
>>> a = (d for _,d in dummy.iteritems())
>>> a.next()
[1, 2, 3]
>>> a.next()
[2, 3, 4]
>>> a.next()
[3, 4, 5]
>>> a.next()
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
StopIteration 
```

这是有道理的。接下来的事情没有（至少对我而言）

```
>>> aa = (dd for dd in (d for _,d in dummy.iteritems()))
>>> aa.next()
[1, 2, 3]
>>> aa.next()
[2, 3, 4]
>>> aa.next()
[3, 4, 5]
>>> aa.next()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration 
```

为什么我的（尝试的）嵌套生成器理解的行为方式与非嵌套版本相同？我本来希望每个 aa.next() 给出一个元素结果，而不是一个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:56:15.907

您的内部生成器每次迭代时都会返回一个值，并且每个值都是一个列表。您将需要使用实际的嵌套结构。

```
>>> aa = (d3 for dd in (d for _,d in dummy.iteritems()) for d3 in dd)
>>> next(aa)
1
>>> next(aa)
2
>>> next(aa)
3
>>> next(aa)
2
>>> next(aa)
3
>>> next(aa)
4
>>> next(aa)
3
>>> next(aa)
4
>>> next(aa)
5
>>> next(aa)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:58:46.827

要获得嵌套，您不需要内部生成器。相反，使用普通的嵌套 for 循环：

```
>>> dummy = {1:[1,2,3],2:[2,3,4],3:[3,4,5]}
>>> aa = (dd for _,d in dummy.iteritems() for dd in d)
>>> list(aa)
[1, 2, 3, 2, 3, 4, 3, 4, 5] 
```

这将与以下内容相同：

```
def aa(dummy):
    for _, d in dummy.iteritems():
        for dd in d:
            yield dd

print list(aa()) 
```

学习生成器表达式的最佳方法是从普通生成器开始，这样您就可以轻松查看每一步的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:54:23.130

正如您正在考虑的那样，这并不是真正的“嵌套”生成器。

您的代码（大致）相当于：

```
for dd in (d for _,d in dummy.iteritems()):
    print dd 
```

通常，“嵌套”用于表示以下内容：

```
(dd for _, d in dummy.iteritems() for dd in d) 
```

# c++ - 不包括一种类型的模板

> ID：12791816
> 
> 赞同：2
> 
> 时间：2012-10-09T01:50:14.077
> 
> 标签：c++, string, templates, types, char

我想做一个不包括字符串或字符类型的解析函数

```
template <typename T>
bool parse(T & value, const string & token){
    istringstream sin(token);
    T t;
    if( !(sin >>t) )  return false;
    char junk;
    if( sin >>junk )  return false;
    value = t;
    return true;
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:06:37.863

取决于*排除类型`string`或`char`*. 如果您希望它不链接，您可以声明但不定义类型的特化：

```
template <>
void parse<std::string>( std::string & value, const std::string& token ); 
```

编译器将看到特化而不生成代码。链接器将失败，因为该符号未在任何翻译单元中定义。

第二种方法有点复杂，不是在链接时失败，而是让编译器不接受这些类型的模板。这可以使用 SFINAE 来完成，它在 C++11 中更简单，但是如果您需要 C++03 解决方案，您可以搜索它或添加评论：

```
template <typename T, 
          typename = typename std::enable_if<!std::is_same<T,std::string>
                                          && !std::is_same<T,char>>::type >
void parse( T & t, const std::string& token ) {
// ...
} 
```

（我没有通过编译器运行它，所以语法可能有点偏离，玩吧）编译器将看到模板，当它尝试执行类型的替换时，`T`由于`std::enable_if<...>::type`没有解析为类型。

通常，您可能想要的是提供不同的重载来执行特定版本的`parse`and 优先：

```
void parse( std::string& v, const std::string& token ) {
    v = token;
} 
```

请注意，这不是模板，而是常规函数。当调用的参数完全匹配时，非模板函数将比模板函数更好地匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:05:58.217

您可以使用增强型特征。他们有一个名为 is_same 的类型比较检查

[http://www.boost.org/doc/libs/1_51_0/libs/type_traits/doc/html/boost_typetraits/reference/is_same.html](http://www.boost.org/doc/libs/1_51_0/libs/type_traits/doc/html/boost_typetraits/reference/is_same.html)

您可以将比较结果用于 char 和 string。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T01:21:48.423

模板应该在 David Rodríguez 的方法中这样声明（对于具有返回类型的函数）：

```
template <template T, typename std::enable_if<!std::is_same<T,std::string>::value>::type* = nullptr >
T func(T x){} 
```

对于多个条件：

```
template <template T, typename std::enable_if<!std::is_same<T,std::string>::value &&!std::is_same<T,int>::value>::type* = nullptr >
T func(T x){} 
```

对于没有返回类型的函数：

```
template <template T>
typename std::enable_if<!std::is_same<T,std::string>::value>::type
func(T x){} 
```

对于多个条件：

```
template <template T>
typename std::enable_if<!std::is_same<T,std::string>::value &&!std::is_same<T,int>::value>::type
func(T x){} 
```

不要忘记包括`#include <type_traits>`

# c# - 为什么使用 ASP.NET ReportViewer 时 HttpContext.Current 有时为空？

> ID：12791817
> 
> 赞同：1
> 
> 时间：2012-10-09T01:50:27.280
> 
> 标签：c#, asp.net, reportviewer, httpcontext, reportviewer2008

在我们的 ASP.NET Web 应用程序中，我们有一个具有生命周期/范围的服务，可以描述为“每个请求的实例”，即该实例存储在`HttpContext.Current.Items`集合中。

在从 ASP.NET控件调用期间，我们遇到了这个间歇性问题`HttpContext.Current`。有时是，有时不是。登台网站上的行为与开发机器上的行为可能不同，甚至在不同的开发机器之间也有所不同。`null``ReportViewer``null`

这将导致想要使用我们的服务抛出异常的报告。

为什么是`HttpContext.Current`财产`null`？

为什么是断断续续的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:40:45.683

问题的根源似乎是报表查看器有时使用线程池线程来检索报表中定义的数据集的数据。线程池线程无法访问`HttpContext.Current`服务于 HTTP 请求的线程实例（[更多信息在这篇博](http://odetocode.com/articles/112.aspx)文中）。

我的场景中的报告在报告定义中有许多数据集，每个数据集对应于`ObjectDataSource`页面上定义的一个。经过大量调试后，我发现报表将在为 HTTP 请求提供服务的同一线程上检索报表定义中声明的第一个 DataSet 的数据。任何后续数据集都将*在*主 HTTP 请求线程*或*线程池线程上检索。然后，这些后续的 DataSet 会间歇性地抛出异常，说它`HttpContext.Current`为空。

似乎没有任何方法可以预测或控制在第一个数据集之后将在哪个线程上检索数据集。

# c# - 没有“IEnumerable”类型的 ViewData 项 ' 具有键 'RegisterModel.SelectedRoles'

> ID：12791820
> 
> 赞同：1
> 
> 时间：2012-10-09T01:50:37.530
> 
> 标签：c#, asp.net-mvc, multi-select

我正在尝试`MultiSelectList`在我的视图中创建一个，但是在 PartialView 的这一行上抛出了一个异常：

```
@Html.ListBoxFor(x => x.RegisterModel.SelectedRoles, Model.RegisterModel.Roles) 
```

> 没有具有键“RegisterModel.SelectedRoles”的“IEnumerable”类型的 ViewData 项。

我希望`MultiSelectList`成为所有角色的列表，但我不太确定我做错了什么。我最初制作`RegisterModel.SelectedRoles`了一个`string[]`，因为当将用户添加到角色时，a`string[]`应该作为`System.Web.Security.Roles.AddUserToRoles()`.

**模型**

```
public class DynamicActionUserModel {
    public string Action { get; set; }
    public RegisterModel RegisterModel { get; set; }
}

public class RegisterModel {
    public string[] SelectedRoles { get; set; }
    public MultiSelectList Roles { get; set; }
} 
```

**控制器**

```
[HttpGet]
public ActionResult CreateUser() {
    DynamicActionUserModel model = new DynamicActionUserModel {
        Action = "CreateUser",
        RegisterModel = new RegisterModel {
            Roles = new MultiSelectList(System.Web.Security.Roles.GetAllRoles().OrderBy(r => r))
        }
    };

    return PartialView("_UserPartial", model);
} 
```

**看法**

```
<div>
    @Html.Partial("_UserPartial", new DynamicActionUserModel{ Action = "CreateUser", RegisterModel = new RegisterModel()})
</div> 
```

**部分视图**

```
@Html.LabelFor(x => x.RegisterModel.Roles)
@Html.ListBoxFor(x => x.RegisterModel.SelectedRoles, Model.RegisterModel.Roles) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:02:08.023

在这一行上，您正在渲染`_UserPartial`部分，但您传递给此视图的模型是空的，您只是实例化了它，但里面没有角色：

```
@Html.Partial("_UserPartial", new DynamicActionUserModel{ Action = "CreateUser", RegisterModel = new RegisterModel()}) 
```

永远不会调用该`CreateUser`操作来填充 Roles 属性。

您可能希望将其作为子操作调用：

```
<div>
    @Html.Action("CreateUser")
</div> 
```

现在 CreateUser 操作将作为子操作调用，它将填充模型的 Roles 属性并将其传递给部分。这个部分的执行结果将被注入到包含的`<div>`.

请查看[以下文章](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)`Html.Partial`以更好地了解和之间的区别`Html.Action`。

# c++ - C ++合并排序两次以按从低到高的顺序显示多项式

> ID：12791821
> 
> 赞同：0
> 
> 时间：2012-10-09T01:50:56.970
> 
> 标签：c++

我想做的是让第一次通过检查 deg 并将其放入最低到最高...然后进行第二次通过并进行 coef 并将最低到最高。

我遇到分段错误...我想知道这两个 if 语句是否可能

```
Poly merge(Poly* plist1,Poly* plist2){
  Term **pp;
  Poly merged,list1,list2;
  merged = new_Term(); //function for new term in another file
  list1 = *plist1;
  list2 = *plist2;
  pp= &merged;
  while(list1 != NULL && list2 != NULL){
    if(list2->deg < list1->deg)
      {
        *pp = list1;
        list1 = list1->next;
        (*pp)->next = NULL;
      }
    else
      {
        *pp = list2;
        list2 = list2->next;
        (*pp)->next = NULL;
      }
    if(list2->coef < list1->coef)
      {
        *pp = list1;
        list1 = list1->next;
        (*pp)->next = NULL;
      }
    else
      {
        *pp = list2;
        list2 = list2->next;
        (*pp)->next = NULL;
      }
    pp = &( (*pp)->next );

  }
  if(list1 != NULL)
    *pp = list1;
  if(list2 != NULL)
    *pp = list2;

  *plist1 = NULL;
  *plist2 = NULL;
  return merged;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:06:53.040

NVM 我想我发现了我的问题...我需要将它变成一个 if...else if 语句并删除其中一个

```
else
  {
    *pp = list2;
    list2 = list2->next;
    (*pp)->next = NULL;
  } 
```

块

无论如何感谢那些快速响应者

更新：

我也需要改变

```
if(list2->deg > list1->deg) 
```

至

```
if(list2->coef < list1->coef) 
```

# android - Android Java IF THEN ELSE.... =/

> ID：12791822
> 
> 赞同：0
> 
> 时间：2012-10-09T01:50:57.930
> 
> 标签：android

我正在尝试使用 IF THEN 在代码中添加和添加整数：

```
 one.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            subtotal = 1;
            if (variable1==1) (counter + 1)

            else if (variable1==2) then (counter + 1);
            display.setText("Your total is" + counter);
        }
    }); 
```

但我认为我的格式有错误.. =/

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:55:48.377

您应该使用大括号`{}`。
而且，说出来`counter + 1`也没多大意义。我确定您的意思是`counter += 1`，可以写成`counter++`，因为您只是添加一个。

```
if (variable1==1) {
    counter++;
} else if (variable1==2) {
    counter++;
} 
```

此外，由于`if`s 的主体是相同的，因此您可以将两个表达式放在同一个 中`if`。

```
if (variable1==1 || variable1==2) {
    counter++;
} 
```

# eclipse - 无法启动 Eclipse Juno

> ID：12791823
> 
> 赞同：0
> 
> 时间：2012-10-09T01:51:09.700
> 
> 标签：eclipse, macos

这很愚蠢，但我的想法已经不多了。

我为我的 mac 下载了最新的 eclipse (EE) 64 位软件包，解压它并在启动它时收到一条错误消息。重新打开它，当然没有用。

![在此处输入图像描述](../Images/260333f5e4a8c72994b1cfd6dcb7a040.png)

我试过了：

*   重新启动
*   从多个镜像下载包
*   下载非 EE 版本失败并出现同样的错误
*   下载`Indigo`版本 - 启动并运行良好。

我已经安装了：

*   标准`Juno`安装（非 EE）。它可以毫无问题地运行。会不会和这里的任何东西发生冲突？
*   新的非 EE 版本 Juno 安装失败并出现与 EE 版本相同的错误

我不确定还有什么可以尝试或如何解释这种行为。有任何想法吗？

我在启用安全设置的 10.8.2 OSX (Mountain Lion) 上运行

![在此处输入图像描述](../Images/c02ff6c88f20720b7c937707c29420d0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:43:26.107

问题是[Unarchiver](http://itunes.apple.com/us/app/the-unarchiver/id425424353?mt=12)。作为解压的一部分，它破坏了一些东西。

手动解压缩 tarball 后，一切都像魅力一样工作。没有魔法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T05:43:23.283

我在同样的情况下遇到了同样的麻烦。最新更新后 eclipse.ini 文件在 Eclipse.app/Contents/MacOS 文件夹中丢失。我恢复了它并重新启动了eclipse（eclipse -clean）。成功地开始工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:12:15.367

我刚刚遇到了同样的问题，花了很长时间才弄清楚，因为我刚刚更新了 eclipse.ini，然后它在更新后又消失了。

最近关于 Eclipse 更新删除 Mac OS X 中的 eclipse.ini 的错误（2012 年 9 月 29 日）“错误 390756 - Juno SR1 更新正在删除 eclipse.ini 文件” [https://bugs.eclipse.org/bugs/show_bug。 cgi?id=390756#c40](https://bugs.eclipse.org/bugs/show_bug.cgi?id=390756#c40)

见评论：大卫威廉姆斯 2012-10-10 16:15:52 EDT：

> 从 SR0 或 SR1 重新开始工作正常，但从已经损坏的版本开始（即使 eclipse.ini 已恢复）确实会删除 eclipse.ini。

# javascript - Unloading module in nodejs

> ID：12791827
> 
> 赞同：1
> 
> 时间：2012-10-09T01:51:28.647
> 
> 标签：javascript, node.js, require

Is it possible to unload modules in nodejs?
In other words: clear event listeners, timeouts, and intervals.

These modules are "sub-files" of my project, and i could overwrite the `.on()`, and `.once()`, but what about timeouts and intervals?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:01:32.437

不，我不知道。

您可以通过调用来移除发射器上的所有事件侦听器`myEmitter.removeAllListeners()`。至于清除超时和间隔，分别调用`clearTimeout(timeoutName)`和`clearInterval(intervalName)`。

例子：

```
var x = 0;
var myInterval = setInterval(function(){
  console.log('hello');
  if (x > 5) clearInterval(myInterval);
  x += 1;
},1000); 
```

希望这会有所帮助。

# magento - Magento add extra fields to /customer/account/create/ page

> ID：12791832
> 
> 赞同：1
> 
> 时间：2012-10-09T01:52:26.540
> 
> 标签：magento, field, frontend, account

I'm making great progress learning magento. My questions is, how do I add extra fields to the /customer/account/create/ page? The fields I want to add are below. Can the fields I add also appear under:

1) Frontend: Customer is able to edit/change the added fields answers in their accounts area 2) Backend: Administrator is able to see and manage the added fields under customers/manage customers/ selected customer/ customer information.

Any help or pointers is immensely appreciated.

11 OF 11 About You WHAT IS YOUR AGE? 18-23 24-29 30-35 36-45 46-55 66+ WHAT IS YOUR HEIGHT?

WHAT IS YOUR WEIGHT?

WHAT IS YOUR ZIPCODE?

HOW DID YOU HEAR ABOUT US? Magazine Online Ad TV Newspaper Friend

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T03:53:08.690

这是一个很好但很老的教程如何在注册页面
[http://www.fontis.com.au/blog/magento/custom-customer-signup-attributes添加自定义字段](http://www.fontis.com.au/blog/magento/custom-customer-signup-attributes)

它是为 Magento 1.3 完成的，因此您需要阅读文章下方的评论以使其适用于 Magento 1.7 或查看关于 SO [Can no longer add registration fields in Magento 1.4.2.0 的答案](https://stackoverflow.com/questions/4549112/can-no-longer-add-registration-fields-in-magento-1-4-2-0)

Magento connect 上也有一些扩展用于此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T02:33:59.557

感谢您的输入。我遇到了这个扩展，它对我来说真的很棒！ [http://www.magentocommerce.com/magento-connect/custom-customer-registration-fields.html](http://www.magentocommerce.com/magento-connect/custom-customer-registration-fields.html)

# android - Image not parsing from xml

> ID：12791833
> 
> 赞同：1
> 
> 时间：2012-10-09T01:52:28.480
> 
> 标签：android, xml-parsing, android-listview

I have a xml that i'm parsing using a DOM parser. Its supposed to pull an image and load it into my list view along with the Title and pub date. It is only loading the default image if no image if found in the xml file yet i know there is an image in the xml file. Instead of filling this with a long list of all my activities i'm providing a link to my dropbox so the code can be checked out. Any help with this would be greatly appreciated. THank you

here is the link [https://www.dropbox.com/sh/29qkueuxatlcwn8/0DDI7tPQfe](https://www.dropbox.com/sh/29qkueuxatlcwn8/0DDI7tPQfe)

# internet-explorer-8 - CSS3 Pie Not Working in IE8

> ID：12791836
> 
> 赞同：5
> 
> 时间：2012-10-09T01:53:01.463
> 
> 标签：internet-explorer-8, css, css3pie

***UPDATE*** This would appear to be a issue with `background` in IE8\. CSS3 PIE appears to work correctly however when I have a background it doesn't show. If I remove the background css completely it shows again. IE:

```
html, body{ 
  background: /*CSS */; /* Remove this property */
} 
```

Now my question turns into how do I get CSS3 PIE to work properly in IE 8 *with* a background?

[Here is a jsFiddle](http://jsfiddle.net/Lynda333/2Vm8e/2/) with the above code.

* * *

## ***Original Question***

* * *

I am attempting to replicate a look in IE 8 using CSS3 Pie JS Edition. Here is what I want it to look like:

![Correct Look](../Images/26fe5444409e70eb5a9c03b879709b4e.png)

Here is the way it looks in IE 8 with CSS3 PIE:

![IE 8 Screenshot](../Images/74b6c6c90a4a341b09dfd6393915f878.png)

As you can see when I implement CSS3 PIE the box disappears! I have not used CSS3 PIE before and do not know what is wrong. Here is the code I am using:

***NOTE***: I am using the JS edition (I am using a hosted CMS and do not have server side access thus *cannot* use the `.htc` file.)

Here is my code to call CSS3 Pie:

```
<!--[if lt IE 10]>
  <script type="text/javascript" src="/js/PIE.js"></script>
  <script type="text/javascript">
    $(function() {
       if (window.PIE) {
         $('.surround').each(function() {
           PIE.attach(this);
          });
         }
       });
  </script>
<![endif]--> 
```

Here is the HTML and CSS:

```
<div class="row surround">
<div class="twelvecol">
 <p>Lorem Ipsum</p>
</div>
</div>

.surround
 {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -o-box-sizing: border-box;
  box-sizing: border-box; 
  padding: 25px;
  background:#f5f2f7;
  border: 5px solid #b30005;
  -webkit-box-shadow: 0 5px 10px rgba(0,0,0,0.4);
  -moz-box-shadow: 0 5px 10px rgba(0,0,0,0.4);
  -o-box-shadow: 0 5px 10px rgba(0,0,0,0.4);
  box-shadow: 0 5px 10px rgba(0,0,0,0.4);
  -webkit-border-radius:25px;
  -moz-border-radius: 25px;
  -o-border-radius: 25px;
  border-radius:25px;
  border-top: solid #b30005 25px;
 } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T18:19:41.297

正如@Spudley 在上面的评论中提到的那样，该问题是一个 z-index 问题，[如 CSS3 PIE 网站上所述](http://css3pie.com/documentation/known-issues/#z-index)：

> **消失的背景/边框/阴影（z-index 问题）**
> 
> 首先，介绍一下 PIE 如何渲染 CSS3 装饰的背景知识：创建一个包含所有 VML 对象的元素。这个容器元素作为目标元素的前一个兄弟元素插入，并且绝对定位在相同的坐标上。如果目标元素是 position:absolute 或 position:relative，则 css3-container 元素被赋予与目标元素相同的 z-index，并且由于它是 DOM 树中的前一个兄弟元素，因此它被显示在后面，不可能任何其他元素潜入其间。
> 
> 但是，当目标元素为 position:static 时，这并不好用，因为静态元素不参与 z-index 堆叠。让我们的 position:absolute css3 元素落后的唯一方法是给它 z-index:-1。不幸的是，这有一个不好的副作用：css3 元素不仅会落后于目标元素，它还会落后于任何本身是 position:static 的祖先元素的背景。这会导致 PIE 正确创建 VML 渲染但它消失在父元素的背景后面的情况。
> 
> 我知道解决此问题的唯一方法是：
> 
> ```
>  make the target element position:relative, or
>      make the ancestor element position:relative and give it a z-index. 
> ```
> 
> 这两种解决方法都可能在子元素定位和 z-index 堆叠方面产生潜在的不良副作用。PIE 可以很容易地强制其中一个或另一个本身，但是：
> 
> 根据具体情况，一种或另一种可能更合适，因此 CSS 作者需要能够控制选择哪一种。在 CSS 之外强制 position:relative 会使 IE 与其他浏览器不同步，从而导致混乱的不一致。
> 
> 因此，PIE 两者都没有，并且由作者在必要时实施任一变通方法。在大多数情况下，只需添加 position:relative 到目标元素就可以了。

该解决方案可能会导致其他问题。我最终问自己，创建圆角是否值得麻烦？对于某些站点，是的，对于其他站点，这是您的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T09:40:20.447

取而代之的是`behavior: url(PIE.htc);`，您可以设置`behavior: url(PIE.php);`.

# sql - 这个sql是什么意思

> ID：12791838
> 
> 赞同：2
> 
> 时间：2012-10-09T01:53:31.747
> 
> 标签：sql, oracle

```
INSERT INTO MAPPING_TBL ( G_ID, MR_ID, G_TYPE, G_NUMBER ) 
SELECT :G_ID AS G_ID, :MR_ID AS MR_ID, :G_TYPE AS G_TYPE, :G_NUMBER AS G_NUMBER 
FROM DUAL WHERE NOT EXISTS 
         (SELECT G_ID, MR_ID, G_TYPE, G_NUMBER 
          FROM MAPPING_TBL 
          WHERE G_ID = :G_ID2 AND 
                MR_ID = :MR_ID2 AND 
                G_TYPE = :G_TYPE2 AND 
                G_NUMBER = :G_NUMBER2 ) 
```

谁能解释一下这个sql实际在做什么？特别是这是什么

```
SELECT :G_ID AS G_ID, :MR_ID AS MR_ID, :G_TYPE AS G_TYPE, :G_NUMBER AS G_NUMBER 
FROM DUAL 
```

sql做，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:03:39.337

这是一个“条件插入”。

`MAPPING_TBL`如果该记录在表中尚不存在，则该语句将用户提供的记录插入到表中。在 MySQL 中，这是通过“INSERT IGNORE”完成的。在当代甲骨文中，可以使用“MERGE INTO”来达到同样的效果。

这`SELECT :G_ID AS G_ID ... FROM DUAL`是一种指定值元组的方法，在这种情况下，来自调用程序的参数化值。（例如，如果您从 DUAL 中选择 1、2、3、4，您将连续获得这些值。在这种情况下，调用程序在查询执行时提供 :G_ID 等。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:00:16.030

它只是一种`INSERT INTO...SELECT`语句的语法。为了使其更简单，请看下面的示例

```
INSERT INTO table1 (colA, colB, colC)
SELECT colA, colB, colC
FROM table2 
```

它的作用是，将ed on`SELECT`编辑的任何行。`table2``INSERT``table1`

[有关详细信息，请参阅：**Oracle [插入...选择]**](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/insert-select.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:01:43.080

```
SELECT :G_ID AS G_ID, :MR_ID AS MR_ID, :G_TYPE AS G_TYPE, :G_NUMBER AS G_NUMBER 
FROM DUAL 
```

分号表示将提示用户输入这些值。它们就像预期在运行时填写的参数

# sql - SQL how to sort column by percentages?

> ID：12791841
> 
> 赞同：4
> 
> 时间：2012-10-09T01:53:49.573
> 
> 标签：sql, percentage

Hi I'm trying to sort in sql a column of percentages, but I'm unable to bring '100%' from the bottom to the top result, anyone has a solution to this?

I was using concat(x/y*100,'%') as percentage function, which gave me varying percentages e.g. 50%, 60%, 99%, 100%.

However an order by percentage desc then gives me the following order: 99% 60% 50% 100%

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T01:55:30.967

Add this in your order by clause

```
SELECT  ...
FROM    ...
WHERE   ...
ORDER BY (x/y*100) ASC 
```

The reason why `ORDER BY percentage DESC` doesn't work is because `percentage` column is a string and not a numeric.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:55:33.410

You should be ordering by `x/y`, it will give you the correct sort order. Use your expression that multiplies by `100` and adds a percentage sign to the end to format the output, not for sorting.

# php - What tool or method am I supposed to use to find performance point is in a web application?

> ID：12791843
> 
> 赞同：0
> 
> 时间：2012-10-09T01:54:06.593
> 
> 标签：php, mysql, performance, maintenance

I am maintaining a custom service system which is written in `apache` + `php` + `mysql` + `html` + `javascript`, the question is it costs too much time to get the web pages, What tool or method am I supposed to use to find where the time-consuming point is?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:56:37.013

我不确定 PHP 世界中有哪些服务器端工具，但如果你在 Javascript 中发生了很多客户端的事情，那么**FireBug**有一个非常好的客户端分析器。

# java - 在 Java 中生成随机字母

> ID：12791845
> 
> 赞同：-2
> 
> 时间：2012-10-09T01:54:27.017
> 
> 标签：java, arrays, random, char

嘿伙计们这是我的问题..

我想生成一个单词特定长度的随机字母，但起始字母应该对应于我声明的变量的值。

例子：

*   `A3`应该生成`AER`
*   `A5`应该生成`AJIEH`
*   `B2`应该生成`BJ`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:00:51.007

使用变量名会很乏味（尽管我认为可以通过反射）。但是，您可以尝试这样的事情：

```
public static String genString(char first, int len) {
    String s = "";
    for (int i = 1 ; i < len ; i++)
        s += (char)(Math.random() * ('Z' - 'A' + 1) + 'A');
    return first + s;
} 
```

* * *

例如：

```
System.out.println(genString('A', 4)); 
```

输出（许多可能之一）：

> 平均

# objective-c - Do I use _property or self.property in implementation

> ID：12791851
> 
> 赞同：0
> 
> 时间：2012-10-09T01:55:11.083
> 
> 标签：objective-c

> **Possible Duplicate:**
> [Difference between self.ivar and ivar?](https://stackoverflow.com/questions/4142177/difference-between-self-ivar-and-ivar)

Let's say I have the following class

```
@interface
@property ( nonatomic, retain ) MyObject* property;
@end

@implementation
@synthesize property = _property;

-(id) init{
   if ((self = [super init])) {
        _property = [MyObject new];
        self.property = [MyObject new];
        NSLog(@"%@", _property.description);
        NSLog(@"%@", self.property.description);
    }
    return self;
}
@end 
```

What is the correct way? using accessors (synthesize: self.property) or using the ivar directly? It's just that i have sometimes felt that using the accessors caused in errors when I try to use them in other files.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T01:57:52.773

哪一个都好。Using`self.property`调用 getter 或 setter 方法（合成或定义），同时`_property`直接访问实例变量。

由于`self.property`调用方法，它可能会产生副作用。例如：

```
- (Property *)property {
    if (_property == nil) {
        _property = [[Property alloc] init];
    }
    return _property;
} 
```

如果在返回该值之前它不存在，调用`self.property`将创建一个新属性并将其分配给它，而如果在此类的特定实例上第一次调用它之前访问它，则将指向 nil 。`_property``_property``self.property`

事实上，`@property`声明不必与实例变量相对应；该`-property`方法的实现可以在每次调用时创建并返回一个新属性。

# jquery - 将属性转换为标题

> ID：12791858
> 
> 赞同：0
> 
> 时间：2012-10-09T01:55:51.087
> 
> 标签：jquery, string, attributes, append, each

我正在使用以下代码从列表中的每个图像中获取标题属性：

```
$("ul#images li img").each(function(index) {
    $(this).attr("title");
}); 
```

然后如何使用此属性作为每个图像的标题？我是否首先需要以某种方式将其转换为字符串，然后将其附加到列表项？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:06:18.060

你需要一些 CSS 和修改你的 javascript。但基本上你抓住 attr 值并将其附加到你喜欢的地方。

使用您的示例：

[http://jsbin.com/irabiv/1/edit](http://jsbin.com/irabiv/1/edit)

```
$("ul#images li img").each(function(index) {
    $(this).parent().append('<div class="caption">'+$(this).attr("title")+'</div>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:11:18.227

属性总是字符串，`title`属性也是字符串，所以你只需要附加它。

```
$("ul#images li img").each(function() {
    $(this).closest('li').append('<br>' + this.title);
}); 
```

[**小提琴**](http://jsfiddle.net/susHP/2/)

现在，如果您正在寻找更语义化的 HTML5 解决方案，我建议您使用`figure`and`figcaption`元素：

```
$("ul#images li img").each(function() {
    $(this).wrap('<figure/>').after($('<figcaption>', {text: this.title}));
}); 
```

[**小提琴**](http://jsfiddle.net/susHP/3/)

# mysql - 具有公共 customerId 字段的 JPA 条件子查询

> ID：12791860
> 
> 赞同：0
> 
> 时间：2012-10-09T01:56:04.780
> 
> 标签：mysql, jpa-2.0

如何使用 JPA Criteria 编写以下 MySQL 查询？

```
select * from deptors where customerId in 
   (select customerId from address where zipcode="12345-6789")
and gender="male"; 
```

我已阅读[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Subquery](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Subquery)和许多 stackoverflow 线程，包括[JPA 2.0、Criteria API、Subqueries、In Expressions](https://stackoverflow.com/questions/4483576/jpa-2-0-criteria-api-subqueries-in-expressions)。但我就是不明白。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:40:46.183

就像是：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Deptors> cq = cb.createQuery(Deptors.class);
Root<Deptors> c = cq.from(Deptors.class);

Subquery<Address> subquery = cq.subquery(Address.class);
Root<Address> a = subquery.from(Address.class); 
```

但是，我宁愿建议使用 JPQL 构建此查询和/或将其作为 NamedQuery 外部化到您的实体中。

塞巴斯蒂安

# c - 用于检查小端与大端的 C 程序

> ID：12791864
> 
> 赞同：80
> 
> 时间：2012-10-09T01:56:50.443
> 
> 标签：c, byte, endianness

> **可能重复：**
> [C 宏定义来确定大端或小端机器？](https://stackoverflow.com/questions/2100331/c-macro-definition-to-determine-big-endian-or-little-endian-machine)

```
int main()
{
  int x = 1;

  char *y = (char*)&x;

  printf("%c\n",*y+48);
} 
```

如果是小端，它将打印 1。如果它是大端，它将打印 0。对吗？还是将 char* 设置为 int x 总是指向最低有效位，而不管字节顺序如何？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-10-09T03:05:42.163

简而言之，是的。

假设我们在一台 32 位机器上。

如果是小端，`x`内存中的将是这样的：

```
 higher memory
          ----->
    +----+----+----+----+
    |0x01|0x00|0x00|0x00|
    +----+----+----+----+
    A
    |
   &x 
```

所以`(char*)(&x) == 1`和`*y+48 == '1'`。（48是'0'的ASCII码）

如果它是大端，它将是：

```
 +----+----+----+----+
    |0x00|0x00|0x00|0x01|
    +----+----+----+----+
    A
    |
   &x 
```

所以这个会`'0'`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-09T03:24:06.457

以下会做。

```
unsigned int x = 1;
printf ("%d", (int) (((char *)&x)[0])); 
```

设置`&x`为`char *`将使您能够访问整数的各个字节，并且字节的顺序将取决于系统的字节序。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-10-09T02:26:37.040

[这是来自配置](http://en.wikipedia.org/wiki/Configure_script)脚本的大端测试：

```
#include <inttypes.h>
int main(int argc, char ** argv){
    volatile uint32_t i=0x01234567;
    // return 0 for big endian, 1 for little endian.
    return (*((uint8_t*)(&i))) == 0x67;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-10-09T02:23:15.853

以为我知道我已经在标准中读到了这一点；但找不到。继续寻找。老的; 回答标题；不是 Q-tex ;P:

* * *

以下程序将确定：

```
#include <stdio.h>
#include <stdint.h>

int is_big_endian(void)
{
    union {
        uint32_t i;
        char c[4];
    } e = { 0x01000000 };

    return e.c[0];
}

int main(void)
{
    printf("System is %s-endian.\n",
        is_big_endian() ? "big" : "little");

    return 0;
} 
```

你也有[这种方法](https://bitbucket.org/thejeshgn/quake/src/14ba6369f82c/WinQuake/common.c#cl-1125)；来自地震 II：

```
byte    swaptest[2] = {1,0};
if ( *(short *)swaptest == 1) {
    bigendien = false; 
```

并且`!is_big_endian()`不是 100% 小，因为它可以混合/中间。

相信这可以使用相同的方法进行检查，只需将值从 更改`0x01000000`为 即`0x01020304`给出：

```
switch(e.c[0]) {
case 0x01: BIG
case 0x02: MIX
default: LITTLE 
```

但不完全确定那个...

# c# - 运行 WPF 应用程序时出现异常

> ID：12791865
> 
> 赞同：0
> 
> 时间：2012-10-09T01:56:57.277
> 
> 标签：c#, wpf, exception, windows-xp

尝试在 Windows XP 上运行基于 WPF 的应用程序时出现以下错误，在 Windows 7 上运行良好。

```
System.DllNotFoundException was unhandled
  Message=Unable to load DLL 'dwmapi.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
  Source=***************************
  TypeName=""
  StackTrace:
       at Presentation.Common.MetroWindowBase.NativeMethods.DwmSetWindowAttribute(IntPtr , Int32 , Int32& , Int32 )
       at Presentation.Common.MetroWindowBase.HandleSourceInitialized(Object sender, EventArgs e)
       at System.Windows.Window.OnSourceInitialized(EventArgs e)
       at System.Windows.Window.CreateSourceWindow(Boolean duringShow)
       at System.Windows.Window.CreateSourceWindowDuringShow()
       at System.Windows.Window.SafeCreateWindowDuringShow()
       at System.Windows.Window.ShowHelper(Object booleanBox)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.DispatcherOperation.InvokeImpl()
       at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
       at System.Threading.ExecutionContext.runTryCode(Object userData)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.ProcessQueue()
       at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       at System.Windows.Application.RunDispatcher(Object ignore)
       at System.Windows.Application.RunInternal(Window window)
       at System.Windows.Application.Run(Window window)
       at *********************
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:19:31.360

桌面窗口管理器是在 Vista 中引入的，这几乎肯定是您无法在 XP 中加载它的原因。

你应该看看[这个相关的问题](https://stackoverflow.com/questions/173433/how-to-fix-dwmapi-dll-delay-load-dependency-under-winxp)，看看它是否能解决你的问题。

# c++ - 无法从类中访问全局函数

> ID：12791868
> 
> 赞同：1
> 
> 时间：2012-10-09T01:57:20.150
> 
> 标签：c++, global, class-members

我创建了一个全局函数 CallPrice(args)。我有一个类 EuropeanOption，还有一个名为 CallPrice 的类函数，它应该使用 EuropeanOption 类中的变量调用全局函数，并返回 CallPrice。我收到一个错误，“全局范围没有“CallPrice”。

我认为这是一个普遍的问题。我搜索了其他线程，其中说添加 :: 应该可以解决问题，但它不适用于我。你能找出错误的原因吗？我是否需要将此作为朋友功能或其他一些解决方法？

谢谢！

标题：

```
#ifndef EuropeanOption_HPP
#define EuropeanOption_HPP

#include <iostream>
#include <string>
#include <vector>
#include <cmath>
#include <boost/math/distributions/normal.hpp>

using namespace boost::math;
using namespace std;

namespace CLARK
{

struct EquityParms
{
    double T; // years until expiry
    double K; // strike price
    double sig; // vol
    double r; // risk free rate
    double b; // cost of carry  
};

// Global Call function
const double CallPrice(double T, double K, double sig, double r, double b, double EquityPrice);

class EuropeanOption
{
private:
    double T; // years until expiry
    double K; // strike price
    double sig; // vol
    double r; // risk free rate
    double b; // cost of carry
    double S; // current equity price   
    double ExactCallPrice;

public:
    EuropeanOption(); // default constructor (empty)
    EuropeanOption(const EquityParms& data, double EquityPrice); // constructor that sets parms
    void copy(const EuropeanOption& source);
    ~EuropeanOption();

    void init(const EquityParms& data, double EquityPrice); // initialize EquityParms

    const double CallPrice(); // trying to call global function in this function

};    
}

#endif 
```

来源：

```
#include "EuropeanOption_H.hpp"

namespace CLARK
{

const double CallPrice(double T, double K, double sig, double r, double b, double EquityPrice)
{// Global Function
    double temp = sig * sqrt(T);
    double d1 = (log(EquityPrice / K) + (r + (sig*sig) * 0.5) * T) / temp;
    double d2 = d1 - temp;

    normal_distribution<> myNormal(0,1);
    return (EquityPrice * cdf(myNormal,d1)) - (K * exp((b - r) * T) * cdf(myNormal, d2));
}    

EuropeanOption::EuropeanOption()
{// default constructor
    cout << "Default constructor call" << endl;
}

EuropeanOption::EuropeanOption(const EquityParms& data, double EquityPrice)
{// constructor that sets parms
    init(data, EquityPrice);
}

void EuropeanOption::copy(const EuropeanOption& source)
{
    T = source.T;
    K = source.K;
    sig = source.sig;
    r = source.r;
    S = source.S;
    b = source.b;
}

EuropeanOption::~EuropeanOption()
{   
}

void EuropeanOption::init(const EquityParms& data, double EquityPrice)
{
    T = data.T;
    K = data.K;
    sig = data.sig;
    r = data.r;
    S = EquityPrice;
    b = data.b;     
}

const double EuropeanOption::CallPrice()
{ // trying to call global function in this function
    return ::CallPrice(T, K, sig, r, b, S); // the global scope has no "CallPrice" ???
}    

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:00:27.500

`CallPrice`在命名空间中`CLARK`。所以试试

```
CLARK::CallPrice(/* ... */); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:00:46.247

`CallPrice`您已经在命名空间中声明了全局`CLARK`。该语法`::CallPrice`尝试使用`CallPrice`在全局命名空间或匿名命名空间中定义的函数。相反，使用`CLARK::CallPrice`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:04:47.727

您在命名空间 CLARK 中：

```
return CLARK::CallPrice(T, K, sig, r, b, S); 
```

# python - 十二生肖Python程序

> ID：12791871
> 
> 赞同：0
> 
> 时间：2012-10-09T01:57:51.897
> 
> 标签：python

我正在用 python 编写一个程序，它将接受用户的生日输入并输出他们的西方和中国十二生肖。现在我只是想让中文标志工作。到目前为止，这是我的代码：

```
ZODIAC = [(1900, "Rat"), (1901, "Ox"), (1902, "Tiger"), (1903, "Rabbit"), (1904\
, "Dragon"), (1905, "Snake"), (1906, "Horse"), (1907, "Sheep"), (1908, "Monkey"\
), (1909, "Rooster"), (1910, "Dog"), (1911, "Pig")]

def getChineseZodiac(year):
    for i in ZODIAC:
        if (year - ZODIAC[i]) % 12 == 0:
            return ZODIAC[i]

year = input("Enter a year: ")
getChineseZodiac(year) 
```

我希望这段代码做的是在 ZODIAC 中的每一年中运行并找到模数为 0 的匹配项，然后返回附加的字符串。但我得到的错误是`TypeError: list indices must be integers, not tuple`. 我该如何解决这个问题？我应该为 ZODIAC 使用其他格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:06:21.560

你得到的例外是因为你索引列表的方式。`for i in ZODIAC`设置`i`为 ZODIAC 的成员，而不是索引。然后你不能使用`ZODIAC[i]`它并让它有意义。相反，`i`直接使用（在这种情况下，通过使用`i[0]`and`i`代替您使用的两种情况`ZODIAC[i]`）。或者，如果您确实想迭代索引，请将循环更改为使用`for i in range(len(ZODIAC))`.

但是，整个问题可以简化。由于列表中的符号是有序的，因此您可以只进行一次模数计算并将其用作列表中的索引，而不是遍历列表值并测试每个值：

```
def getChineseZodiac(year):
    index = (year - ZODIAC[0][0]) % 12
    return ZODIAC[index]       # or ZODIAC[index][1], depending on what you want 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T02:17:26.510

在`for i in ZODIAC`中，i 表示 ZODIAC 列表中的每个元素，即元组。如果您打印 i，您可以看到您放入列表中的每个元组。

在`ZODIAC[i]`中，i 是一个指数，应该是整数。

您可以使用`ZODIAC[i][0]`获取年份（int）和`ZODIAC[i][1]`获取中国十二生肖。

您可以使用字典来执行此操作。

```
ZODIAC = { 1900:"Rat", 1901:"Ox", 1902:"Tiger", 1903:"Rabbit", ... }
def getChineseZodiac(year):
    index = 1900 + (year - 1900) % 12
    return ZODIAC[index] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:00:11.537

与 JavaScript 不同，在 Python 中对序列进行迭代会产生元素，而不是位置。直接使用`i`而不是使用它来索引`ZODIAC`。

```
>>> for i in ZODIAC:
...   print i
... 
(1900, 'Rat')
(1901, 'Ox')
(1902, 'Tiger')
(1903, 'Rabbit')
(1904, 'Dragon')
(1905, 'Snake')
(1906, 'Horse')
(1907, 'Sheep')
(1908, 'Monkey')
(1909, 'Rooster')
(1910, 'Dog')
(1911, 'Pig') 
```

# ruby-on-rails - 如何允许多个 Rails 应用程序访问本地 postgreSQL 数据库

> ID：12791875
> 
> 赞同：0
> 
> 时间：2012-10-09T01:58:19.117
> 
> 标签：ruby-on-rails, postgresql

我是 Ruby/Rails 和 PostgreSQL 的新手。是否可以让多个 Rails 应用程序同时访问 psql 本地数据库，如果不是，您如何在应用程序之间切换？目前 RailsApp1 正在按预期与我的 psql db 交互，但是 RailsApp2 无法连接并且 rake 命令中止。

运行：`OSX Mountain Lion, ruby 1.9.3p194, rails 3.2.8, psql 9.2.1.`

```
~/RailsApp2 #: rake db:migrate
rake aborted!
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:06:54.320

PostgreSQL 使用客户端-服务器模型，因此您只需连接到服务器，多个应用程序就可以使其工作。您的具体问题听起来像是服务器没有运行或不接受连接。按顺序尝试的步骤：

1.  `ps -A | grep post`寻找 postgres 或 postmaster 进程。如果没有找到使用 pg_ctl 程序启动服务器。
2.  假设它正在运行，尝试将 PGHOST 环境变量设置为“localhost”，以便它强制 rake、psql 等通过 TCP/IP 连接。如果 UNIX 套接字丢失或不在客户端应用程序期望的位置，这将有所帮助。
3.  如果这两个失败，请找到您的 postgresql 日志（有时称为 serverlog，有时在 pg_log 目录中）并发布错误消息。

# ios - 如何定义 UITabBarController 的子类？

> ID：12791880
> 
> 赞同：2
> 
> 时间：2012-10-09T01:59:04.503
> 
> 标签：ios, uitabbarcontroller

我们的应用程序无法旋转时遇到问题，但该问题已解决。我们现在需要强制我们的视图进入纵向模式。

最好的方案是定义我们的 UITabBarController 的子类，然后用肖像蒙版覆盖supportedInterfaceOrientations。

我似乎无法弄清楚如何正确地继承我们的 UITabBarController。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:04:05.530

右击项目，选择新建一个objective-c Class，然后在文本框的子类中写入UITabBarController。完毕。

![创建新文件](../Images/ab1bb8a9f992f937378236f186fe7b46.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:15:58.623

我在几个项目中实现了自定义标签栏控制器。

```
#import <UIKit/UIKit.h>

@interface CustomTabBarController : UITabBarController<UITabBarControllerDelegate>
{

}

@end 
```

你可以让它像任何其他 Objective-C 类一样。我发现使用标签栏控制器的一种非常有趣的方式是在带有按钮的标签栏上使用自定义视图。您可以使用任何大小或形状的选项卡自定义选项卡栏，并且可以在这些自定义选项卡上编写操作以更改选项卡栏控制器的选项卡。

# visual-studio-2012 - 如何从 TFS2012 Scrum 2.0 获得详细的积压报告？

> ID：12791881
> 
> 赞同：3
> 
> 时间：2012-10-09T01:59:04.707
> 
> 标签：visual-studio-2012

我的团队在 TFS 2012 中使用 Scrum 2.0 模板。我们已将详细的用户故事作为产品待办事项中的项目输入。如何让它们以适合与业务利益相关者共享的格式输出？

有一个“积压概览”报告，但它只有剩余小时数的项目标题列表。我需要一份报告，其中包含我们添加到每个产品待办事项项目的所有详细信息，包括描述、验收标准、状态、优先级、分配对象等...

这肯定已经存在了吗？还是 TFS 团队完全忽略了与外部利益相关者和审计员交流细节的任何需要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T06:02:15.213

几周前，Visual Studio ALM Rangers 发布了一个名为[Team Foundation Server Word Add-in的工具。](http://vsarword4tfs.codeplex.com/)

> 从 Team Foundation Server 团队项目导入工作项，并从 TFS 工作项生成具有专业外观的 Word 文档。

这个特定工具还处于早期阶段，但请查看下载部分中的自述文件。

[Team For Word](http://blogs.microsoft.co.il/blogs/eranruso/archive/2010/12/28/team-for-word-a-tfs-word-client-and-a-user-guide-for-it.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+EranRuso+%28Eran+Ruso%29&utm_content=Google+Reader)是另一个由第 3 方制作的非常相似的工具，我相信它最初是为 TFS2008 制作的，但已更新为与 2010 一起使用，如果您安装 2010 的团队资源管理器，可能与 2012 一起使用

# php - 单击链接时插入值以配置 Ajax 功能

> ID：12791907
> 
> 赞同：0
> 
> 时间：2012-10-09T02:03:59.003
> 
> 标签：php, javascript, xml, ajax

我正在尝试设置一个进行 Ajax 调用的函数，但我必须承认，当我设置 onclick 事件时，我无法理解发生了什么。我正在尝试进行 Ajax 调用以从数据库中获取字段并将它们显示给用户。这个想法是用户在输入字段中输入姓氏，然后根据他们单击的链接，我正在尝试构建的函数显示对数据库的查询结果。我在 Ajax 函数调用的脚本上使用 PHP 中的 switch 语句处理查询，但我无法在 Javascript 代码上设置处理此行为的变量。

我有这样的Javascript代码：

```
var ajaxRequest = ajaxFunction();
function ajaxFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
} return ajaxRequest;
} 

function process() {
id="default";
profesional = document.getElementById('profesional');
dotal = document.getElementById('dot'); 
proyecta = document.getElementById('proy');
proyecta_A = document.getElementById('proy_af');
gastosM = document.getElementById('gastos_med');
autos = document.getElementById('aut');
polifam = document.getElementById('polif');

profesional.onclick=function() {
id="prof";
return id;  
}
dotal.onclick=function() {
id="dotal";
return id;  
}
proyecta.onclick=function() {
id="proyecta";  
return id;
}
proyecta_A.onclick=function() {
id="proyAf";
return id;  
}
gastosM.onclick=function() {
id="gastos_medicos";
return id;  
}
autos.onclick=function() {
id="autos"; 
return id;
}
polifam.onclick=function() {
id="polifam";
return id;  
}   
if(ajaxRequest.readyState==4 || ajaxRequest.readyState==0) {apellido =     encodeURIComponent(document.getElementById('query').value)
if (apellido != undefined) {
ajaxRequest.open("GET", 'adminsrc.php?buscarregistro=' +apellido +'&id='+id, true)
ajaxRequest.send("");   
ajaxRequest.onreadystatechange=handleServerResponse;
}
}
else setTimeout('process()',1000);
}

function handleServerResponse(){
{
if (ajaxRequest.readyState==4) {

if(ajaxRequest.status==200) {   
respuesta=ajaxRequest.responseXML;
respuestadoc = respuesta.documentElement;
if (apellido != undefined) {
ident = respuesta.getElementsByTagName('identidad')[0];
result = ident.firstChild;
refrescar = respuesta.getElementsByTagName('identidad')[1];
actualizar = refrescar.firstChild;
if(result!=undefined) {
resultado = result.data;
document.getElementById('profesreg').setAttribute('value', resultado);
document.getElementById('dotalreg').setAttribute('value', resultado);
document.getElementById('gmmreg').setAttribute('value', resultado);
document.getElementById('proyectareg').setAttribute('value', resultado);
document.getElementById('proyecta2reg').setAttribute('value', resultado);
document.getElementById('autosreg').setAttribute('value', resultado);
document.getElementById('polifreg').setAttribute('value', resultado);
}
if(actualizar!=undefined) {
actualiza = actualizar.data;
document.getElementById('actual_1').setAttribute('value', actualiza);
document.getElementById('actual_2').setAttribute('value', actualiza);
document.getElementById('actual_3').setAttribute('value', actualiza);
document.getElementById('actual_4').setAttribute('value', actualiza);
document.getElementById('actual_5').setAttribute('value', actualiza);
document.getElementById('actual_6').setAttribute('value', actualiza);
document.getElementById('actual_7').setAttribute('value', actualiza);
}
msje = respuestadoc.firstChild.childNodes[0]; 
if (msje !=undefined) {
mess = msje.data;
document.getElementById("res").innerHTML = "<h4>"+ mess +"</h4>";
} 
     }
    setTimeout('process()',1000);
    }
    else alert ('hubo un problema al conectarse con el servidor: ' +    ajaxRequest.statusText);
}
}
} 

//--> 
```

最后一部分只是设置表单中隐藏字段的值，以便 PHP 识别这些值（它们被设置为更新数据库中的某些字段）。但我必须说我非常坚持使用 javascript（我从来不擅长它）。请问有什么建议吗？

@Mate xml 文件是这样构建的：

```
<identificacion>
<response>
Se encontró al asegurado con nombre Mara Fernanda Bravo Palomino, número de póliza        27608165, la cual vence el 2003-04-05 y cuyos beneficiarios contratados son Ana Camila Lpez       Bravo
</response>
<identidad>Bravo Palomino</identidad>
<identidad>si</identidad>
</identificacion> 
```

有一次（几周前）我已经让它使用这样的功能：

```
 function process() {
    if(ajaxRequest.readyState==4 || ajaxRequest.readyState==0) {apellido =        encodeURIComponent(document.getElementById('query').value)
    if (apellido != undefined) {
    ajaxRequest.open("GET", 'adminsrc.php?buscarregistro=' +apellido, true)
    ajaxRequest.send("");   
    ajaxRequest.onreadystatechange=handleServerResponse;
    }
    }
    else setTimeout('process()',1000);
    } 
```

以及上面的函数handleServerResponse；但正如您所见，我只能通过复杂的迭代从 xml 中提取文本节点。当然有更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:06:11.783

1) 下载 jQuery 库并链接到正确的路径！！

2）我对html和xml响应有点盲目，但我认为你可以很好地解决。

```
 <script src="jquery-1.8.2.min.js" type="text/javascript"></script>
        <script type="text/javascript">

            function AjaxCall(id) {

                //Obtengo el appelido.
                var apellido = $('#query').val();

                //Armo la url con el querystring
                var urlPhp = 'adminsrc.php?buscarregistro=' + apellido + '&id=' + id;

                $.ajax({
                    type: "GET",
                    url: urlPhp,
                    contentType: "charset=utf-8",
                    dataType: "xml",
                    success: function (xml) {
                        successProcess(xml);
                    },
                    error: function (msg) {
                        alert("error");
                    }
                });
            }

            //Proceso el xml si estuvo Ok.
            function successProcess(xml) {
                //Revisar bien el XML devuelto

                var identidades = $(xml).find("identidad");

                result = identidades[0];
                refresh = identidades[1];
                message = $(xml).find('mensaje');

                SetResult(result);
                SetActualizar(refresh);
                SetMsj(message);

            }

            //Seteo el resultado en los valores de los controles.
            function SetResult(resultado) {

                if (result != undefined) {
                    $('#profesreg').val(resultado);
                    $('#dotalreg').val(resultado);
                    $('#gmmreg').val(resultado);
                    $('#proyectareg').val(resultado);
                    $('#proyecta2reg').val(resultado);
                    $('#autosreg').val(resultado);
                    $('#polifreg').val(resultado);
                }
            }

            //Seteo los dato actualizados
            function SetActualizar(actualiza) {
                if (actualiza != undefined) {
                    $('#actual_1').val(actualiza);
                    $('#actual_2').val(actualiza);
                    $('#actual_3').val(actualiza);
                    $('#actual_4').val(actualiza);
                    $('#actual_5').val(actualiza);
                    $('#actual_6').val(actualiza);
                    $('#actual_7').val(actualiza);
                }
            }

            //Muestro el mensaje
            function SetMsj(msje) {

                if (msje != undefined) {
                    $('#res').html("<h4>" + msje + "</h4>");
                }
            }

            //Este evento se dispara cuando carga el documento.
            $(document).ready(function () {

                $('#profesional').click(function () { AjaxCall('prof') });
                $('#dot').click(function () { AjaxCall('dotal') });
                $('#proy').click(function () { AjaxCall('proyecta') });
                $('#proy_af').click(function () { AjaxCall('proyAf') });
                $('#gastos_med').click(function () { AjaxCall('gastos_medicos') });
                $('#aut').click(function () { AjaxCall('autos') });
                $('#polif').click(function () { AjaxCall('polifam') });

            });

        </script>
    </head> 
```

# c# - 将行 ID 发布到新页面以进行编辑

> ID：12791914
> 
> 赞同：0
> 
> 时间：2012-10-09T02:05:14.543
> 
> 标签：c#, asp.net

请在这里帮助我，我有大约 1 天的 C# ASP.NET Web 开发经验，但我被困在一些非常简单的事情上。我在 PHP 和 jQuery 方面更有经验。

我需要做什么：

*   从 MSSQL DB 创建一个 GridView 并显示数据`[done]`
*   向每一行添加按钮以直接编辑两列中的值`[done]`
*   每行代表用户可以编辑/保存的设备列表，我需要在每一行添加一个额外的“编辑详细信息”按钮`[done]`
*   单击“编辑详细信息”按钮后，我需要将该列表的 ID 传递到用户可以编辑和保存列表的新页面

我`HyperLinkField`为要传递的行 ID 添加了一个，在 Visual Studio 中我尝试对其进行配置，以便可以在接收页面上读取该值，`Request.Params["xxxx"]`但它不起作用。

在 PHP 中，我只需创建一个`POST <form>`带有隐藏`<input>`值的值并通过`$_POST["xxxx"]`

然而，似乎所有这些花哨的 ASP.NET 和 Visual Studio DataSource 指针/引用和配置都让事情变得比我希望的更复杂。

我非常感谢提供的任何帮助，或任何有助于我将 PHP 技能转移到使用 C# 的 ASP.NET 的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:10:39.897

如果您通过查询字符串传递它，请使用

```
string value = Request.QueryString["id"].ToString();; 
```

如果您通过后期使用传递它

```
string value = Request.Forms["id"].ToString(); 
```

# python - 在 Python 中使用 sorted()

> ID：12791923
> 
> 赞同：16
> 
> 时间：2012-10-09T02:06:34.357
> 
> 标签：python

> **可能重复：**
> [sorted(key=lambda :) 后面的语法](https://stackoverflow.com/questions/8966538/syntax-behind-sortedkey-lambda)

我正在浏览[文档](http://docs.python.org/howto/sorting.html)并遇到了这个例子：

```
> student_tuples = [
      ('john', 'A', 15),
      ('jane', 'B', 12),
      ('dave', 'B', 10), ]

> sorted(student_tuples, key=lambda student: student[2])  # sort by age 
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)] 
```

我不明白这里的 lambda 和 student 是什么？它们可以用任何其他名称代替吗？在`:`做什么`student:student[2]`？这有点模棱两可，因为我以前从未遇到过。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-09T02:11:32.427

从语义上讲，这：

```
print sorted(student_tuples, key=lambda student: student[2]) 
```

与此相同：

```
def sort_key(student):
    return student[2]

print sorted(student_tuples, key=sort_key) 
```

`lambda`只是为函数定义提供了另一种语法。结果是一个函数对象，就像由`def`. 然而，有些事情是`lambda`函数不能做的——比如定义新变量。它们非常适合创建小型的一次性功能，例如这个。

一旦你理解了这一点，那么你所需要知道的就是`key`接受一个函数，在传递给的序列中的每个值上调用它`sorted`，并根据它们的对应`key`值在它们自己排序时所采用的顺序对值进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T02:10:27.747

`lambda`是内联定义函数的一种方式，冒号前的部分`:`是函数的参数；在这种情况下，它被称为`student`. 在本例中，该函数只是返回传递给它的列表或元组的第三部分，即年龄。

# c# - 并行 For 循环

> ID：12791925
> 
> 赞同：1
> 
> 时间：2012-10-09T02:06:39.307
> 
> 标签：c#, c#-4.0

我正在尝试利用 .NET Framework 4.0 中的并行 for 循环。但是我注意到，我在结果集中缺少一些元素。

我有如下代码片段。**lhs.ListData**是一个可以为空的双精度列表，而**rhs.ListData**是一个可以为空的双精度列表。

```
int recordCount = lhs.ListData.Count > rhs.ListData.Count ? rhs.ListData.Count : lhs.ListData.Count;

List<double?> listResult = new List<double?>(recordCount);
var rangePartitioner = Partitioner.Create(0, recordCount);  

Parallel.ForEach(rangePartitioner, range =>
                    {
                        for (int index = range.Item1; index < range.Item2; index++)
                        {
                            double? result = lhs.ListData[index] * rhs.ListData[index];
                            listResult.Add(result);
                        }
                    }); 
```

**lhs.ListData**的长度为 7964，**rhs.ListData**的长度为 7962。当我执行“ ***** ”操作时，listResult 的输出只有 7867。两个输入列表中都有空元素。

我不确定执行期间发生了什么。为什么我在结果集中看到更少的元素有什么原因吗？请指教...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:42:42.077

正确的方法是使用 LINQ 的`IEnumerable.AsParallel()`扩展。它为您完成所有分区，并且 PLINQ 中的所有内容本质上都是线程安全的。还有另一个称为 LINQ 扩展`Zip`，它根据您提供的函数将两个集合压缩为一个。但是，这并不完全是您所需要的，因为它只是两个列表中较短的长度，而不是较长的长度。这样做可能很容易，但首先通过`null`在列表末尾填充两个列表中较短的一个，将其扩展为较长一个的长度。

```
IEnumerable<double?> lhs, rhs;    // Assume these are filled with your numbers.
double?[] result = System.Linq.Enumerable.Zip(lhs, rhs, (a, b) => a * b).AsParallel().ToArray(); 
```

这是 MSDN 页面`Zip`：

[http://msdn.microsoft.com/en-us/library/dd267698%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd267698%28VS.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:20:45.713

这可能是因为`List<T>`（例如`Add`）上的操作不是线程安全的 - 您的结果可能会有所不同。作为一种解决方法，您可以使用锁，但这会大大降低性能。

看起来您只是希望结果列表中的每个项目都是两个输入列表中相应索引处的项目的乘积，而不是使用 PLINQ 怎么样：

```
var listResult = lhs.AsParallel()
                    .Zip(rhs.AsParallel(), (a,b) => a*b)
                    .ToList(); 
```

不知道你为什么在这里选择并行，如果这甚至是必要的，我会进行基准测试——这真的是你应用程序的瓶颈吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:33:51.160

您`List<double?>`用于存储结果，但`Add`方法不是线程安全的。您可以使用显式索引来存储结果（而不是调用`Add`）：

```
listResult[index] = result; 
```

# html - 下载图像时，无法触发 html 中的加载事件

> ID：12791932
> 
> 赞同：1
> 
> 时间：2012-10-09T02:06:55.387
> 
> 标签：html, image, http, dynamic

如果访问者的带宽较低，则图像已加载接缝暂停。

下面的状态来自firefox的firebug。

GET 0.jpg 200 OK sunshopg.com 0 (305.3 KB) 1.06s

GET 1.jpg 200 OK sunshopg.com 0 (72.7 KB)

一旦变成这样，图像将永远无法加载，为什么？

# javascript - 滚动效果

> ID：12791939
> 
> 赞同：4
> 
> 时间：2012-10-09T02:08:16.530
> 
> 标签：javascript, html, css

我正在尝试做这样的事情。

[http://www.mini.jp/event_campaign/big-point/](http://www.mini.jp/event_campaign/big-point/)

我想不通的是，当滚动到达特定位置时，如何根据滚动发生动画。我有类似的内容块，我只想根据滚动和滚动时块在浏览器视图区域内时为其部分设置动画。

我了解使用滚动事件来获取 scrollTop 位置我更关心其他一切如何工作。

```
$(window).bind('scroll',function(e){
    var scrolledY = $(window).scrollTop();
}); 
```

任何人都可以帮助解释其中的一些。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:24:37.343

就像[MiniGod](https://stackoverflow.com/users/916892/minigod)在评论中所说的，查看源代码（[animate.js](http://www.mini.jp/event_campaign/big-point/commons/scripts/animate.js)），你可以看到他们已经记录了所有的“场景”和所有其他的东西，比如`alpha`和`pos`。

```
// scene 1
{
    scene:"#scene1",
    name:".car",
    runStatus:[
        {p:10,pos:true,x:275,y:240,alpha:true,opacity:1,scale:true,orgSize:[475,270],scaleSize:1},
        {p:180,pos:true,x:275,y:200,alpha:true,opacity:1,scale:true,orgSize:[475,270],scaleSize:1},
        {p:270,pos:true,x:275,y:140,alpha:true,opacity:1,scale:true,orgSize:[475,270],scaleSize:1},
        {p:500,pos:true,x:275,y:-300,alpha:true,opacity:0,scale:true,orgSize:[475,270],scaleSize:1}
        ]
} 
```

# iphone - Xcode：URL 类型：图标？

> ID：12791940
> 
> 赞同：7
> 
> 时间：2012-10-09T02:08:48.787
> 
> 标签：iphone, xcode, url

Xcode 文档解释说，该`CFBundleURLIconFile`键包含用于显示此类 URL 的图标图像文件的名称（减去扩展名）。

我剩下的问题是：

1.  我应该使用什么图标图像？例如，如果 URL 类型是针对另一个应用程序的，我应该使用该应用程序的应用程序图标吗？
2.  什么尺寸？如果有很多尺寸，我如何命名它们以便正确使用尺寸？
3.  它在哪里显示？我想知道一个iPhone应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:20:28.703

1.  Apple 没有具体说明这一点，但我的解释是它应该是一个图标，代表应该/将打开/处理这种类型的 URL 的应用程序。
2.  在 OS X 上，通常的方法是使用图标文件 (.icns)。我怀疑你应该在你的 iOS 应用上试试。如果这不起作用，请复制标准应用程序图标文件的命名方案。
3.  尝试在 iOS 上的 Safari 中查看 PDF。如果您有 iBooks，它应该会显示一个“在 iBooks 中打开”按钮，并在其旁边显示一个图标。此图标是您要设置的图标。

我希望这足以回答您的问题。如果不是，请解释需要澄清的内容。

# jquery - jQuery - 鼠标悬停时图像闪烁

> ID：12791941
> 
> 赞同：-2
> 
> 时间：2012-10-09T02:09:05.610
> 
> 标签：jquery

我有以下代码，但是当“上一个”或“下一个”按钮出现时，当我`mouseover`在按钮上执行事件时它会闪烁。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
     <html xmlns="http://www.w3.org/1999/xhtml">
     <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <title>Portfolio</title>
     <link rel="stylesheet" href="css/global.css">

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
 <script src="js/jquery.easing.1.3.js"></script>
 <script src="js/slides.jquery.js"></script>

     </head>
     <body bgcolor="#FFFFFF">
 <div id="container">
     <div id="example">
    <div id="slides">
        <div class="slides_container">
            <img src="imgs/test.gif" width="800" height="456" id="gallery_img" border="0"/>
            </div>
        <div class="prevButton" style="visibility:hidden"><a href="#" class="prev"><img src="imgs/arrow-prev.png" width="24" height="43" alt="Arrow Prev"/></a></div>
        <div class="nextButton" style="visibility:hidden"><a href="#" class="next"><img src="imgs/arrow-next.png" width="24" height="43" alt="Arrow Next"/></a></div>
         </div>
      </div>
  </div>
     <script>
        $(document).ready(function() {
        $('#gallery_img').mouseover(function() {
            $('.prevButton').css("visibility", "visible");
            $('.nextButton').css("visibility", "visible");
        });

        $('#gallery_img').mouseout(function() {
            $('.prevButton').css("visibility", "hidden");
            $('.nextButton').css("visibility", "hidden");
        });
         });
     </script>

     </body>
     </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:40:22.107

一些浏览器倾向于不加载页面中未显示的源，这些源被 css 规则隐藏：`display:none`或`visibility:hidden`- 或它们的任何父项隐藏。这实际上是因为浏览器试图在每个网页的缓存中保留空间（出于速度/效率的原因）。

无论如何要预加载（并使浏览器缓存）隐藏的东西，我可以想到 2 个解决方案：要么将它们加载到不隐藏但偏移的元素中（因此它们对用户不可见），要么采用 Javascript 方法，如下列的。

```
<script type="text/javascript">
    var imgArr = ['arrow-prev.png','arrow-next.png'];
    for (var i = 0; i < imgArr.length; i++) {
        var img = new Image();
        img.src = 'imgs/' + imgArr[i];
        img.onload = function(){}; // this is dummy. not sure if it's needed
    }
</script> 
```

我不确定这是否是您所遇到的，但您可能想试一试。

**编辑：**只需重新阅读您的代码。我认为现在发生的事情是，当您将鼠标悬停在按钮上时，鼠标实际上首先离开了图像，这使得它触发了 mouseout 功能（然后在鼠标移动后返回 mouseover 功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:11:38.157

你实际上并不需要 JavaScript，因为你可以使用纯 CSS 实现相同的效果：

```
#slides:hover div.prevButton, #slides:hover div.nextButton
{
    visibility: visible;
} 
```

这将要求您删除`div`s 上的内联样式，因为它们将覆盖外部样式表中的任何内容以及`<head>`. 您应该能够定义一种样式，例如：

```
div.prevButton, div.nextButton
{
    visibility:hidden;
} 
```

HTH。

**编辑：** [jsFiddle](http://jsfiddle.net/qEPTk/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T03:32:39.987

试试这个 jsfiddle 内容。它会帮助你。[演示](http://jsfiddle.net/mangalauwu/5WBhc/1/)

这使用了 jquery() hover api 而不是鼠标悬停。

下面是示例代码。

```
$(document).ready(function() {
     $("#b").hide();
     $("#a").hover(
           function(){
              $("#b").show();   
             },
           function(){
            $("#b").hide();  
             }                          
     )

 }); 
```

# hash - rspec - 为什么这个属性比较usng assert_equal 在它们相同时会失败，仅在ubuntu上？

> ID：12791943
> 
> 赞同：2
> 
> 时间：2012-10-09T02:09:26.763
> 
> 标签：hash, rspec, factory-bot, assert, assertions

两个测试失败了——但只在 Ubuntu(12) 上而不是在我的（新）Mac 上。

失败的两个是 Active Record 对象属性比较，但我努力比较它们，例如在命令行中创建哈希并粘贴属性，比较表明它们是相同的。

一个真正的难题，因为我们有一个包含数百个测试的广泛测试套件。导轨 3.2.8，rspec 2.11

```
Failure/Error: assert_equal @iep_service.attributes, IepService.first.attributes
 MiniTest::Assertion:
   <{"id"=>414,
    "duration"=>30,
    "frequency"=>3,
    "period"=>"week",
    "group_size"=>"group",
    "location"=>nil,
    "service"=>nil,
    "area_of_need"=>"speech",
    "created_at"=>Tue, 09 Oct 2012 01:53:39 UTC +00:00,
    "updated_at"=>Tue, 09 Oct 2012 01:53:39 UTC +00:00,
    "therapist_id"=>nil,
    "start_date"=>nil,
    "end_date"=>nil,
    "student_id"=>469,
    "adhoc"=>false}> expected but was
   <{"id"=>414,
    "duration"=>30,
    "frequency"=>3,
    "period"=>"week",
    "group_size"=>"group",
    "location"=>nil,
    "service"=>nil,
    "area_of_need"=>"speech",
    "created_at"=>Tue, 09 Oct 2012 01:53:39 UTC +00:00,
    "updated_at"=>Tue, 09 Oct 2012 01:53:39 UTC +00:00,
    "therapist_id"=>nil,
    "start_date"=>nil,
    "end_date"=>nil,
    "student_id"=>469,
    "adhoc"=>false}>.
# (eval):2:in `assert_equal' 
```

测试代码：

```
 context "And a pre-existing Iep Service for one of those students" do
    before(:each) { @iep_service = FactoryGirl.create(:iep_service, :student => @district.students.first) }

    context "And an Iep Service CSV" do
      before(:each) { @spreadsheet = IepServiceSpreadsheet.new(@district, open_spec_fixture_file('sample-ieps.csv')) }

      specify "Prevent importing" do
        # Leave database untouched
        assert_equal 1, IepService.count
        assert_equal @iep_service.attributes, IepService.first.attributes

        # Provide error report
        assert @spreadsheet.error_report.any?
      end 
    end 
  end 
```

我也试过：`@iep_service.attributes.should == IepService.first.attributes`

但得到：

```
 Failure/Error: @iep_service.attributes.should == IepService.first.attributes
   expected: {"id"=>421, "duration"=>30, "frequency"=>3, "period"=>"week", "group_size"=>"group", "location"=>nil, "service"=>nil, "area_of_need"=>"speech", "created_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "updated_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "therapist_id"=>nil, "start_date"=>nil, "end_date"=>nil, "student_id"=>483, "adhoc"=>false}
        got: {"id"=>421, "duration"=>30, "frequency"=>3, "period"=>"week", "group_size"=>"group", "location"=>nil, "service"=>nil, "area_of_need"=>"speech", "created_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "updated_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "therapist_id"=>nil, "start_date"=>nil, "end_date"=>nil, "student_id"=>483, "adhoc"=>false} (using ==) 
```

有一个很大的差异，包括“检查实施”：

```
 Diff:{"id"=>421, "duration"=>30, "frequency"=>3, "period"=>"week",  
"group_size"=>"group", "location"=>nil, "service"=>nil, "area_of_need"=>"speech",  
"created_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "updated_at"=>Tue, 09 Oct 2012 02:13:51 
UTC +00:00, "therapist_id"=>nil, "start_date"=>nil, "end_date"=>nil, "student_id"=>483, 
"adhoc"=>false}.==({"id"=>421, "duration"=>30, "frequency"=>3, "period"=>"week", 
"group_size"=>"group", "location"=>nil, "service"=>nil, "area_of_need"=>"speech", "created_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "updated_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "therapist_id"=>nil, "start_date"=>nil, "end_date"=>nil, "student_id"=>483, "adhoc"=>false}) returned false even though the diff between {"id"=>421, "duration"=>30, "frequency"=>3, "period"=>"week", "group_size"=>"group", "location"=>nil, "service"=>nil, 
"area_of_need"=>"speech", "created_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, 
"updated_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "therapist_id"=>nil, "start_date"=>nil, 
"end_date"=>nil, "student_id"=>483, "adhoc"=>false} and {"id"=>421, "duration"=>30, 
"frequency"=>3, "period"=>"week", "group_size"=>"group", "location"=>nil, "service"=>nil, 
"area_of_need"=>"speech", "created_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, 
"updated_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, "therapist_id"=>nil, "start_date"=>nil, 
"end_date"=>nil, "student_id"=>483, "adhoc"=>false} is empty. 
Check the implementation of 
{"id"=>421, "duration"=>30, "frequency"=>3, "period"=>"week", "group_size"=>"group", 
"location"=>nil, "service"=>nil, "area_of_need"=>"speech", "created_at"=>Tue, 09 Oct 2012 
02:13:51 UTC +00:00, "updated_at"=>Tue, 09 Oct 2012 02:13:51 UTC +00:00, 
"therapist_id"=>nil, "start_date"=>nil, "end_date"=>nil, "student_id"=>483, 
"adhoc"=>false}.==. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:26:26.637

没有给出真正的答案，所以我已经遍历属性，例如

```
i=0
while i < @student.attributes.count
  assert_equal @student.attributes[i], Student.first.attributes[i]
  i+= 1
end

# Comparing field by field as ruby hash comparison isn't working right - 
# but only on Ubuntu! 
```

# sql - 在以下情况下如何编写查询？

> ID：12791949
> 
> 赞同：1
> 
> 时间：2012-10-09T02:10:39.807
> 
> 标签：sql

我有下表。如何查询 Table Team 如下：

```
 ID,Name,City,League
    1,Name1,City1, A
    2,Name2,City1, B 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:14:37.513

诀窍是获取每个城市的数据，并将该数字与整个表格`COUNT(DISTINCT League)`中的联赛总数进行比较。`COUNT(DISTINCT League)`

```
SELECT
  City,
  COUNT(DISTINCT League) AS numleagues
FROM yourtable
GROUP BY City
/* Only cities which have the same number of distinct leagues as the total number of distinct leagues */
HAVING COUNT(DISTINCT League) = (SELECT COUNT(DISTINCT League) FROM yourtable) 
```

[它在 SQLFiddle 中起作用](http://sqlfiddle.com/#!2/f67d9/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:17:42.640

所有不存在联赛且不在与该城市关联的联赛列表中的城市：

```
 SELECT DISTINCT City FROM Teams T1 WHERE NOT EXISTS
    (SELECT * FROM Teams T2 WHERE League NOT IN 
      (SELECT League FROM Teams T3 WHERE T3.City = T1.City)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T02:20:33.800

几乎和你用英语说的一样，但有一点不同......你想要所有城市在所有联赛中都有一个名字，或者换种说法，你想要所有不存在联赛的城市在所有联赛中都没有名字它来自那个城市。;...

```
 Select Distinct City From Table t
  Where Not Exists
    (Select Distinct League From Table L
     Where Not Exists 
         (Select * From Table
          Where City = t.City
             And League = L.League 
             And Name Not in 
                  (Select distinct Name from table 
                   Where City = t.City) )) 
```

# zend-framework - 为什么 Google 会截断我的网址？（使用 Zend 框架）

> ID：12791951
> 
> 赞同：0
> 
> 时间：2012-10-09T02:10:43.373
> 
> 标签：zend-framework, url, seo

我经营一个名为 anecdotage.com 的网站（一堆关于著名 ppl 的有趣故事）。

我们刚刚搬到了一个新平台（socialengine 4，Zend 框架）。我们的 URL 是新的，谷歌已经将它们编入索引，这太棒了！但我只是注意到它忽略了 URL 中最重要的部分......不太好！

它仍然有效，但我担心我们的页面排名。

EG：系统网址： [http ://www.anecdotage.com/articles/7994/allman-brothers-foot-shootin-morons](http://www.anecdotage.com/articles/7994/allman-brothers-foot-shootin-morons)

谷歌网址： [http ://www.anecdotage.com/articles/7994/](http://www.anecdotage.com/articles/7994/)

[你可以在这里看到： [https ://www.google.com.mx/#hl=en&sclient=psy-ab&q=site:anecdotage.com%2Farticles&oq=site:anecdotage.com%2Farticles](https://www.google.com.mx/#hl=en&sclient=psy-ab&q=site:anecdotage.com%2Farticles&oq=site:anecdotage.com%2Farticles)

我们提交了一个带有完整链接的 txt 站点地图。谷歌为什么要这样做？对SEO有影响吗？

另外：当我点击谷歌的链接时，它会这样做： [http ://www.anecdotage.com/articles/7994/#.UHOF_JhX3ZI](http://www.anecdotage.com/articles/7994/#.UHOF_JhX3ZI)

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:55:28.667

两个网址具有相同的内容。

为了解决这个问题，您可以在标题中使用规范链接指向您希望 goole 索引的所需 url：

<link rel="canonical" href="http://www.anecdotage.com/articles/7994/allman-brothers-foot-shootin-morons" />

更多细节在[谷歌博客](http://googlewebmastercentral.blogspot.pt/2009/02/specify-your-canonical.html)

# internet-explorer - 如何使用 base64 编码方法在 IE 中创建链接？

> ID：12791952
> 
> 赞同：4
> 
> 时间：2012-10-09T02:10:43.467
> 
> 标签：internet-explorer, base64, data-uri

我正在动态生成一个base64 gif，并试图创建一个指向新页面的链接以打开一个完整大小的gif 版本。这适用于 chrome，但在 IE 中，仅显示 img 缩略图。当有人点击 IE 中的链接时，会打开一个空白页面。

有什么想法吗？

谢谢

马特

```
echo '<a href="data:image/gif;base64,'. $data. '" target=_blank>';
echo '<img src="data:image/gif;base64,'. $data . '" width="200"/></a>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T02:44:04.857

据此，[您](http://en.wikipedia.org/wiki/Data_URI_scheme#Disadvantages)不能在 IE 中使用数据 uri 进行导航。

> *   Internet Explorer 到第 7 版（截至 2011 年 9 月约占网络流量的 5%），缺乏支持。然而，这可以通过提供浏览器特定的内容来克服。^([ [6](http://www.7cynics.com/webdesign/css/css-inline-images-data-uri.html) ])
> *   Internet Explorer 8 将数据 URI 的最大长度限制为 32 KB。（Internet Explorer 9 没有这个限制）^([ [4](http://msdn.microsoft.com/en-us/library/cc848897%28VS.85%29.aspx) ][ [3](http://blogs.msdn.com/b/ieinternals/archive/2010/09/15/ie9-beta-minor-change-list.aspx) ])
> *   在 IE 8 和 9 中，数据 URI 只能用于图像，不能用于导航或 Javascript 生成的文件下载。^([ [7](http://www.google.com/search?q=ie%20data%20uri%20supported%20site%3amicrosoft.com&btnI=1) ])

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T02:49:08.313

如果您使用 Java，您将创建一个 servlet 解码器。像这样：[https](https://gist.github.com/sjpuas/6217394) ://gist.github.com/sjpuas/6217394这适用于所有 IE 版本

用jquery替换像这样的url图片

```
if ($.browser.msie && $.browser.version == "6.0") {
                $("img[src*=base64]").each(function (i, img) {
                    var base64 = $(img).attr("src").split("base64,")[1];
                    var encoded = encodeURIComponent(base64);
                    $(img).attr("src", "/myApp/base64Servlet?base64=" + encoded);
                });
            } 
```

# java - 将多个继承对象添加到容器类

> ID：12791954
> 
> 赞同：0
> 
> 时间：2012-10-09T02:11:11.197
> 
> 标签：java, inheritance, abstract-class, containers, implementation

我有一个正在顺利进行的程序，但我似乎无法提前了解如何将某些类添加到容器中。

我正在为一个 2D 人创建一个 java 程序。我有一个抽象类，BodyPart（所有身体部位共有），DrawablePart 和 ContainerPart 类实现了抽象类，其中 Drawable 部分包括实现的类，如头、腿、脚等；ContainerParts 包括实现的类，例如人 > 上身和下身。

我剩下要做的唯一部分是创建从容器类派生的上半身和下半身类，它有一个 BodyParts 数组。

假设我正在开发从 ContainerPart 派生的 LowerBody 容器。怎么可能有一个可以包含 Legs 和 Feet 数组（从 DrawablePart 派生）的 LowerBody 构造函数？我想让 LowerBody 和 UpperBody 从派生自 ContainerPart 的 Avatar 容器派生。

我知道如果不显示我的代码很难得到答案，但我认为有人可以用我在下面从我的课程中创建的这个 UML 图向我解释它。

**这是UML图**：

![在此处输入图像描述](../Images/0d9ded6eb116ea8556df03be2773cf79.png)

这是一个包含 BodyParts 数组的 ContainerPart 构造函数（super 来自 BodyPart），这是我想要的，但我需要 LowerBody 的构造函数中的某些部分，如 Leg 和 Feet：

```
 public ContainerPart(String name, String color, int xCoord, int yCoord, BodyPart[] yourParts) {
        super(name, color, xCoord, yCoord);
        parts = yourParts;
} 
```

在我的容器类中，我有一个 BodyParts 数组的实例字段，如上面的构造函数所示。但是当我尝试使用多个派生的 BodyPart 时，我得到了这个：

![在此处输入图像描述](../Images/4d7e0a5a0a5e409daab14d7d60c406ad.png)

但是，如果我只有一个，在 super() 中说“yourFoot”，它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:28:13.413

我无法将此添加为评论，因此放在这里。

如果我理解正确，您会看到以下内容 ( `your real constructor has more arguments`)：

```
public abstract class BodyPart {
  private String name;
  private String color;
      ......
      ......
}

public class DrawablePart extends BodyPart {

    public DrawablePart(){
        super();
    }
}

public class ContainerPart extends BodyPart {

    public ContainerPart(String name, String color, int xCoord, int yCoord, BodyPart[] yourParts){
        super(......);
        ...........
     }
}

public class Legs extends DrawablePart {

    public Legs(){
        super();
    }
} 
```

现在您要创建`LowerBody`为：

```
public class LowerBody extends ContainerPart {

    public LowerBody(Legs[] legs, Feet[] feet, String name, String color, int xCoord, int yCoord){
         super(name, color,xCoord, yCoord, legs);
         ........
         .......
    }

    public LowerBody(Legs leg, Feet feet, String name, String color, int xCoord, int yCoord){
        super(name, color,xCoord, yCoord, new BodyPart[]{leg, feet});
    }
} 
```

如果是，问题是什么？它应该可以正常工作。如果我遗漏了什么，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:20:42.140

也许是一个愚蠢的问题。为什么不让 LowerBody 扩展 Avatar？您仍然可以获得 ContainerPart 的好处。

或者您可以添加一个新的构造函数：

```
public LowerBody(List<DrawableParts> parts) {

} 
```

# c# - 如何使用 process.start 从注册表中移动值

> ID：12791958
> 
> 赞同：0
> 
> 时间：2012-10-09T02:11:31.330
> 
> 标签：c#, registry, process.start

使用 process.start 我试图将一些注册表项导出到`spath`使用以下代码在路径中创建的文件中，但它不起作用，任何人都可以告诉我这里出了什么问题

```
rk = @HKEY_LOCAL_MACHINE\software\test\sim
File.Create(Path.Combine(spath, m_samview) + ".rtt");
Process ps1 = Process.Start("/C regedit.exe /e spath\\m_samview.rtt rk");
         ps1.WaitForExit();
         ps1.Close(); 
```

我检查了链接[proces.start](https://stackoverflow.com/questions/2171431/c-sharp-import-reg-file-to-the-registry-without-user-confirmation-box)基于我做了这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:19:04.147

您是否在报价单中直接使用了 spath？两件事要尝试

*   格式化命令，以便将 spath 变量解析为实际路径字符串
*   如果路径有空格，请用引号括起来（带有文件名）

例子：

```
 string processString = string.Format("/C regedit.exe /e \"{0}\\m_samview.rtt\" rk", spath);
 Process ps1 = Process.Start(processString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:39:35.837

使用 Process.Start，您可能需要提供文件的完整路径。尝试指向 \system32\regedit.exe 而不仅仅是 regedit.exe

# php - 在 WordPress 中创建国家 > 州 > 城市列表

> ID：12791959
> 
> 赞同：4
> 
> 时间：2012-10-09T02:11:35.203
> 
> 标签：php, wordpress

我的任务是为 WordPress 页面创建一个动态的排序列表。我将有一个国家列表，然后当一个国家被选中时，下一个列表将填充该国家的州，然后是下一个菜单，其中包含该州的城市。

我一直无法找到一个明确的解决方案，已经进行了广泛的搜索。

有谁知道如何实现这个，或者我可以在插件的哪里找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:44:46.853

太麻烦了……
这里……

```
function datak()
{
  $url = 'http://api.sba.gov/geodata/city_links_for_state_of/tx.json';
  $crl = curl_init($url);
  curl_setopt($crl, CURLOPT_HEADER, 0);
  curl_setopt($crl, CURLOPT_RETURNTRANSFER, 1);
  $rtn = curl_exec($crl);
  $srn = json_decode($rtn);
  $nmb=0;
  echo "<select name='state' id='state'><option value='-1'>Choose a state</option>";
  while( $nmb < count($srn) ) {   
    echo '<option value="' . $srn[$nmb]->name . '">' . $srn[$nmb]->name . ' - ' . $srn[$nmb]->primary_longitude . ' - ' . $srn[$nmb]->primary_latitude . "</option>" ; 
    $nmb++;
  }
  echo "</select>";
  curl_close($crl);
      } 
```

它需要一些清理和排序——有 dup 条目。更改 url 中的状态前缀，如果您愿意，可以将文件类型设置为 xml，但您必须重新编码该过程。

让其他人做数据保存。只需给用户内容。

[在这里](http://www.sba.gov/about-sba-services/7617/)得到它。

希望这可以帮助。主义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:28:23.970

我不知道有什么插件可以满足您的需求，但如果我要亲自从头开始构建它，我会首先查看[此信息](https://stackoverflow.com/questions/2463004/free-sql-script-to-get-a-list-of-countries-provinces-states-and-their-cities)，以使用每个城市的所有信息填充数据库。

信息将像这样组织：

```
---------------------------------------------------------------------------------
|   Country   |   State   |   Province   |   City   |  Latitude  |  Longitude   |
--------------------------------------------------------------------------------- 
```

每个城市在数据库中都有自己的行。纬度和经度是可选的，但建议使用。

之后，就可以使用[AJAX 动态](http://api.jquery.com/jQuery.ajax/)填充下拉列表了。基本上，您可以使用 jQuery（推荐用于此任务，因为我们不想重新发明轮子）将 GET 或 POST 请求传递给单独的 PHP 脚本。该文件将运行 SQL 查询（请务必避免使用 mysql_* 函数，因为它们已被弃用。查看[PDO](http://php.net/manual/en/book.pdo.php)以获得更好的替代方案）并根据数据库检查传递给它的值。

我建议使用一些基本信息填充您的数据库。也许与几个州和城市一起设置它，然后查看我给你的资源，以获得一个可行的概念证明。

如果您遇到任何绊脚石，请随时提出另一个问题，以便我们为您提供帮助。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-24T11:32:12.317

我找到了一种简单的方法来显示世界的国家-州-城市列表。只需将以下 HTML 和 javascript 添加到您的模板

```
<select name="country" class="countries" id="countryId">
    <option value="">Select Country</option>
</select>
<select name="state" class="states" id="stateId">
    <option value="">Select State</option>
</select>
<select name="city" class="cities" id="cityId">
    <option value="">Select City</option>
</select>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://lab.iamrohit.in/js/location.js"></script> 
```

[https://github.com/hiiamrohit/Countries-States-Cities-database](https://github.com/hiiamrohit/Countries-States-Cities-database)

# arrays - 遍历未排序的数组，元素之间的距离

> ID：12791962
> 
> 赞同：2
> 
> 时间：2012-10-09T02:12:47.327
> 
> 标签：arrays, quicksort, binary-search, mergesort, divide-and-conquer

建议？

给定一个未排序的数组和元素的数量，对于每个元素，如果没有数字 -1，我必须打印其自身与数组中小于他的最远元素之间的元素数量

例子：

输入：10 6 10 3 9 15 输出：3 1 1 -1 -1 -1

我已经做到了，但是我的教授告诉我它可以做得更高效，当然我实际上在做 o(n^2)。分而治之？，二分查找？

我的解决方案：

```
public void MedidaMolestia(int A[], int  N)
    {
    int i=0,  temp=0, k=N-1, j=0;

    for(i=0; i<N; i++) 
    {
        temp = A[i];

        for(j=N-1;j>i ; j--)
        {
            if(A[j]<temp)
            break;
        }

        if(i==j)
            System.out.print(-1 + " ");

        else 
            System.out.print((j-i)-1 + " ");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:43:49.103

即兴发挥，我可以建议使用一点动态编程进行一些渐近改进：-

1.  使用快速排序来获取排序版本数组中每个元素的索引。花费 O(n log n)。对于您的示例，它应该是：-

    ```
    sindex = [3 1 3 0 5 2] ( since sorted array is 3 6 9 10 10 15) 
    ```

2.  您需要填充数组 B，以便 B[i] 存储小于 i 的索引最右边的第一个出现。执行以下操作：-

    ```
    Initialize B to [N, N,...]
    filledpos = N;
    for j = N-1 to 0 inclusive
        if(sindex[j] < filledpos) do 
        for i = sindex[j] to filledpos - 1 inclusive 
        // like if you find the 3rd smallest element fill B[4],.. B[filledpos]
           B[i] = j
        filledpos = sindex[j] 
    ```

    对于您的示例 B = [2 2 3 3 5 5]。采用 O(n) 最坏情况

3.  现在你知道了最右边 elem < i 的位置。做foll（需要O（n））

    ```
    for i = 0 to N-1
       print i - B[sindex[i]] 
    ```

# javascript - 使用 put 或 delete（与 post）发送登录凭据是否安全？

> ID：12791968
> 
> 赞同：2
> 
> 时间：2012-10-09T02:14:29.680
> 
> 标签：javascript, html, api, rest, login

我正在为 webapp 制作一个 RESTful API。

因为一旦用户退出浏览器，某些移动浏览器会删除客户端 cookie，所以我使用 local.storage 来存储用户的密钥，该密钥可以发送到 API 以对用户进行身份验证。

鉴于密钥足够长，经常更改，并且所有通信都通过 https 进行，使用 put 或 delete 发送密钥是否安全？我的理解是，如果我使用 get，密钥可能会留在浏览器历史记录中，恶意用户可能会使用它来访问用户帐户。相比之下，邮政更安全。如何放置或删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:16:51.117

如果可能，我会通过 HTTP 标头发送密钥；这样，您使用哪种方法都没有关系，无论是 GET、POST、PUT 等。

也可以看看：[`setRequestHeader()`](http://www.w3.org/TR/XMLHttpRequest/#dom-xmlhttprequest-setrequestheader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:43:37.510

如果您使用 GET 并将密钥作为参数发送，那么绝对是不安全的。浏览器将缓存 URL，这意味着密钥将在历史记录中可用。为了安全起见，我会将它们放在标题中。

如果您真的对安全感兴趣，尽管您可以使用诸如质询-响应身份验证模式（或此模式的许多变体）之类的东西。我猜你在某种程度上是在正确的轨道上，因为你经常提到你的关键变化。真正的问题是您如何在客户端的第一个实例中获取该密钥（这安全吗？）...

# javascript - Github 的 gist 端点不适用于 Javascript

> ID：12791969
> 
> 赞同：2
> 
> 时间：2012-10-09T02:14:31.827
> 
> 标签：javascript, jquery, json, gist

我想通过 javascript 访问我的公共要点，但以下代码不起作用：

```
$(document).ready(function() {

    var url = 'https://api.github.com/users/binroot/gists';

    $.getJSON(url, function(data) {
        document.write(data[0].description);                                           
    });
}); 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:26:29.463

这大概是[同源政策问题](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)。GitHub API[支持 JSONP](http://developer.github.com/v3/#json-p-callbacks)，所以你可以使用它。jQuery`callback=?`在您的 URL 中获取并自动使用 JSONP。

```
$.getJSON('https://api.github.com/users/binroot/gists?callback=?', function(data) {
    // do whatever as before, but note that your data
    // will now be in a property called "data" with the
    // header information in "meta"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:36:44.280

[由于Access-Control-Allow-Origin](https://developer.mozilla.org/en-US/docs/HTTP_access_control) ，您不能使用 JavaScript 从不同来源请求资源，有关 gist api 的更多信息，请查看：http: [//developer.github.com/v3/gists/](http://developer.github.com/v3/gists/)

# css - 在块内垂直居中元素

> ID：12791973
> 
> 赞同：8
> 
> 时间：2012-10-09T02:15:32.317
> 
> 标签：css, layout, web

我目前正在将我的网站从表格布局重新设计为 CSS。我在看似非常简单的任务中遇到了一些问题。

该网站很简单。屏幕中间的一个框，其中包含多个链接。

旧站点用于`<td valign="center">`将框中的所有链接居中。CSS 似乎没有等价物。我一直在使用负边距使元素居中，如下所示：

```
div {
    height: 200px;
    position: absolute;
    top: 50%;
    margin-top: -100px;
} 
```

当您确切知道要居中的元素有多大时，这很好用，但是我需要能够在不知道链接占用多少垂直大小的情况下使链接居中。我只希望框中的对齐方式像`text-align: center`. 也只是垂直的。

[当前使用表格设计的网站](http://www.nickober.net)
[CSS 版本的当前进展](http://www.nickober.net/so/css_layout.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T02:20:22.427

您有 4 个，可能是 5 个解决方案，其中一个添加到底部，因为它是来自原始和 js 的不同 css 的组合来设置高度：

*   使用表格单元格并将其内容垂直居中
*   `display: table-cell; vertical-align: middle;`用作 div 的css
*   每次通过javascript更改div的高度时更新margin-top
*   使用 css3 flexbox（您需要使用特定于供应商的扩展，因此它不适用于某些较旧的浏览器）

使用旧式 flexbox 的简单示例 - chrome 版本 - 添加包装器 div 并将其样式设置为：

```
#wrapper { display: -webkit-box; -webkit-box-align: center; }
#wrapper > div { margin: auto; } 
```

小提琴这个[http://jsfiddle.net/gK7YU/](http://jsfiddle.net/gK7YU/)

新样式的 flexbox - 也是 chrome 版本，您必须在最终产品中添加其他供应商前缀以及没有任何前缀的版本。

```
#wrapper { display: -webkit-flex; }
#wrapper > div { margin: auto; } 
```

为此小提琴：http: [//jsfiddle.net/LeHRD/](http://jsfiddle.net/LeHRD/)

小提琴包含更多的 css 属性，因此您可以轻松查看正在发生的事情。

哦，对不起，您不需要包装器 div，您可以使用 flexbox 将任何内容垂直居中...好吧，无论如何我提出的解决方案可以结合使用，`display: table-cell;`因此它也适用于旧浏览器。

您还可以使用具有指定高度的绝对定位 jsfiddle.net/N28AU/1

```
#wrapper { possition:relative }
#wrapper > div { position:absolute;top:0;right:0;bottom:0;left:0;margin: auto;} 
```

如果您想避免负边距，您可以从包含的元素计算高度并通过 js 更新它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T02:29:47.480

我去过你的网站并在这里复制了html。

你可以这样做：

```
<style>
#box{
    display: table;
}
#box > div {
    display: table-cell;
    vertical-align: middle;
}
</style>

<!-- Your html part -->
<div id="box">
    <div>
        <a href="#">Link A</a>
        <a href="#">Link B</a>
        <a href="#">Link C</a>
        <a href="#">Link D</a>
    </div>
</div> 
```

您必须`div`在其中包装一个元素，`#box`因为`display: table-cell`如果您没有将包装器元素设置为 ，则属性将无法正常工作`display: table`。

你在这里的例子：[jsfiddle](http://jsfiddle.net/yXr9V/)

# php - 如何修复 php 警告：file_get_contents？未能打开流：HTTP 请求失败

> ID：12791974
> 
> 赞同：4
> 
> 时间：2012-10-09T02:15:56.663
> 
> 标签：php, file-get-contents

如何修复 php 警告：file_get_contents？

```
Warning: file_get_contents(http://192.168.1.254:9999/api/p/internal/ucenter/login?loginName=test102&password=111111) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.1 400 Bad Request in /Applications/XAMPP/xamppfiles/htdocs/PHP_test/index.php on line 49 
```

这是与 $files 相关的代码：

```
<?php
$loginNames="test102";
$passwords="111111";
$apiUrl = "http://192.168.1.254:9999/api/p/internal/ucenter/login?loginName=".$loginNames."&password=".$passwords;
$callback = file_get_contents($apiUrl);

print_r($callback);
//echo $callback;
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T02:22:58.557

如果这显示在您的页面中，则说明您的[`display_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)设置有问题。

理想情况下，`display_errors`应该`Off`用于生产机器，您应该自己使用[`set_error_handler()`](http://sg3.php.net/set_error_handler).

另请参阅：[以流畅的方式记录错误](https://stackoverflow.com/questions/10331084/error-logging-in-a-smooth-way/10476589#10476589)

除非您确保该页面存在，否则无法停止此特定警告。但是，单独使用，您可以使用[muffle 运算符](http://sg2.php.net/manual/en/language.operators.errorcontrol.php)来防止出现警告：

```
if (false !== ($contents = @file_get_contents('...'))) {
    // all good
} else {
    // error happened
} 
```

*请注意，这仍会调用您的自定义错误处理程序*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T11:52:14.550

我有更好的选择给你。

避免`file_get_contents`，用户 `cURL`。

让我给你看一个例子：

```
$url = 'http://www.yoururl.com';
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HEADER, false);
$data = curl_exec($curl);
curl_close($curl); 
```

注意：您是否觉得编码问题添加此：`curl_setopt($curl, CURLOPT_ENCODING ,"");`

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-12T16:33:35.357

我建议在调用 file_get_contents 之前尝试检查 url 是否存在。您可以参考页面[如何通过 PHP 检查 URL 是否存在？](https://stackoverflow.com/questions/2280394/how-can-i-check-if-a-url-exists-via-php)

# c# - 在 C# 应用程序中触发 Windows 资源管理器的“顺时针旋转”操作

> ID：12791977
> 
> 赞同：1
> 
> 时间：2012-10-09T02:16:37.820
> 
> 标签：c#, windows, image, rotation

在某个操作后，我只需要顺时针旋转一次图像。我懒得在我当前的图像操作类中包含旋转逻辑，然后我就有了这个想法。我需要的东西已经内置在 Windows 资源管理器中，因此是否可以在 ac# 应用程序中触发 Windows 资源管理器的旋转操作以获取指定的有效文件？

我怀疑我无法访问那种功能，但我想问一下。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:07:21.810

您最好不要依赖该功能，因为它不是 API 的一部分，并且可能随时消失。你应该只做你自己的图像旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T03:11:42.293

我认为 Windows Explorer 的集成照片旋转无法做到这一点，但您应该查看名为 ImageMagick 的出色图像编辑/处理库。最初的 API 是本机 Windows (dll) API，但有一个易于使用的良好 .NET 包装器。

这里是：

[http://imagemagick.codeplex.com/](http://imagemagick.codeplex.com/)

还有两打左右其他语言的包装器，链接在 ImageMagick 的网站上： [http ://www.imagemagick.org/](http://www.imagemagick.org/)

# android - 设置应用程序的屏幕

> ID：12791979
> 
> 赞同：1
> 
> 时间：2012-10-09T02:16:43.437
> 
> 标签：android, android-layout

如何设置应用程序的屏幕，使其不占用设备的整个屏幕？也许甚至是屏幕的一半或更少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:35:56.623

你应该研究如何在 Android 中使用布局（线性布局，相对布局，表格布局..）

# css - css 媒体查询 - 这是一种不好的实现方式吗？

> ID：12791982
> 
> 赞同：0
> 
> 时间：2012-10-09T02:17:12.263
> 
> 标签：css, media-queries

我最近问了一个关于如何在支持不支持它们的旧浏览器的回退的同时使用媒体查询的问题。唯一的答案（当它有效时）是使用 javascript（如 adapt.js）来确定要加载的样式表。

我一直在修补并实现了一个难以置信的简单解决方案，无论如何它在 IE7 中对我有用，如下所示：

```
.wrapper{width:1024px;}

@media all and (min-width: 1025px) {
    .wrapper{width:1024px;}
}

@media all and (max-width: 1024px) {
    .wrapper{width:1024px;}
}

@media all and (max-width: 900px){
    .wrapper{width:900px;}
} 
```

以上只是一个非常简单的例子。当我摆弄时，我注意到如果我为 .wrapper 指定了默认值，IE7 会渲染它并忽略媒体查询。在 Chrome/FF/Safari 中，它使用了媒体查询 css。这使我认为这可能是与 javascript 兼容的解决方法，但我不确定浏览器兼容性或 SEO 是否会产生任何影响。

这是一种不好的实现方式吗？它会有任何兼容性问题吗？我喜欢将所有 css 放在一个文件中的想法。

任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:36:48.683

您对媒体查询的排序`max-width`意味着通过级联，这条规则变得完全没有必要；您可以删除它，除非您希望此规则中的样式与您的第一个规则不同，该规则不在其自己的`@media`块中：

```
@media all and (min-width: 1025px) {
    .wrapper{width:1024px;}
} 
```

除此之外，我没有看到任何后果或兼容性问题。这几乎就是使用带有`@media`规则的媒体查询的方式。

# javascript - jquery ui自动完成添加跨度

> ID：12791984
> 
> 赞同：23
> 
> 时间：2012-10-09T02:17:29.053
> 
> 标签：javascript, jquery

我在 div 上使用 jQuery 自动完成，但我得到了由 jquery 自动添加的这个额外跨度

```
"<span role="status" aria-live="polite" class="ui-helper-hidden-accessible">search test</span>" 
```

如何防止创建此跨度？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-14T14:24:01.410

我通过添加 CSS 规则解决了这个问题：

```
.ui-helper-hidden-accessible { display: none; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T02:28:13.220

出于可访问性的原因，盲人可以“阅读”找到多少结果。如果你真的想删除这个，你可以修改源代码：

```
this.liveRegion = $( "<span>", {
                role: "status",
                "aria-live": "polite"
            })
            .addClass( "ui-helper-hidden-accessible" )
            .insertAfter( this.element ); 
```

但不建议这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-25T09:56:00.460

我使用 CSS flex box 进行带有 nth-child 选择器的布局，所以，这个跨度扭曲了我的列布局。

`display: none`或者`position: absolute; top: -999999`不会解决我的问题。我必须完全从 DOM 中删除元素，所以，我编写了以下[创建事件](http://api.jqueryui.com/autocomplete/#event-create)处理程序：

```
create: function (e)
{
    e.target.parentElement.removeChild(e.target.parentElement.querySelector(".ui-helper-hidden-accessible"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T13:22:03.897

您可以通过将此事件处理程序添加到您的自动完成来摆脱它：

```
$(element).autocomplete({
    ...
    create: function (e) {
        $(this).prev('.ui-helper-hidden-accessible').remove();
    }
}); 
```

除非您关心盲人访问我们的页面，否则删除它并没有什么坏处。我尝试了这个`display: none`技巧，但这对我不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-17T13:46:35.080

你真的不应该删除这个（你想浏览一个仅供盲人使用的网页并且你无法访问内容吗？）...

使网站符合 ada 标准并不容易。这个跨度只是所有这些东西的一小部分。

隐藏不显示或不显示的元素对于 ada 来说是一种不好的做法。这就是为什么像 facebook 这样的页面通过将它们缩进到屏幕外的某个地方来隐藏一些元素：

[display:none vs visibility:hidden vs text-indent:9999 每个屏幕阅读器的行为如何？](https://stackoverflow.com/questions/1755656/displaynone-vs-visibilityhidden-vs-text-indent9999-how-screen-reader-behave-w)

对于 ada 相关的东西，你可以从这里开始： [http ://www.techrepublic.com/blog/web-designer/creating-an-ada-compliant-website/](http://www.techrepublic.com/blog/web-designer/creating-an-ada-compliant-website/)

在这种情况下，也许将高度强制为 0 可能有用......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-16T07:30:33.557

添加 .css 文件对我有用（当然删除所有 span 元素也有效，但这不是一个好的解决方案）：

```
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" /> 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2014-11-27T07:41:23.723

这将完美地工作：

```
$(document).ready(function(){ $("span").remove(); }); 
```

# cocoa - Cocoa：以独立于时间和时区的方式使用 NSDates？

> ID：12791985
> 
> 赞同：1
> 
> 时间：2012-10-09T02:17:29.503
> 
> 标签：cocoa, nsdate, nsdatepicker

我正在开发一个使用大量日期的应用程序，但这根本不依赖于时间。我想在内部将它们存储为 NSDates，以便我可以使用 NSDatePicker 控件、内置日期函数等。

然而，我一直对 NSDates 坚持存储时间和日期的事实感到不安。许多日期初始化函数会附加当前时间或任意时间。我已经编写了代码，通过将时间组件设置为 0 来消除所有日期的时间 ​​- 但即便如此，时区问题也会破坏一些比较（例如，将当前日期与特定日期进行比较会产生错误的答案如果本地时区的当前日期与 GMT 的日期不同）。

当然有更好的方法来解决这个问题......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:41:05.383

正如 Thilo 所提到的，答案是设置一个固定的时区。

请注意，这还*不够*。最初，我选择了 GMT，并将时间固定在 00:00:00。碰巧，这是一种愚蠢的举动，因为任何*实际*的时间调整都可能导致问题。比如说...将该值加载到 DatePicker 控件中，然后在格林威治标准时间以西的时区凌晨 1 点左右使用该应用程序。哎呀。

为了解决大多数这些问题，我选择了 GMT*并将*时间设置为固定的 12:00:00。这应该使 GMT 以东或以西 11 个时区的日期保持同步。

# cmake - CMake 打印进度和构建时间

> ID：12791989
> 
> 赞同：2
> 
> 时间：2012-10-09T02:17:53.030
> 
> 标签：cmake, gfortran

我正在使用 gfortran 编译一个相当大的 Fortran 程序。在我的笔记本电脑上的单个处理器上编译大约需要 5 分钟。我从手写开始，`Makefile`它几乎可以将它所做的所有事情都打印到屏幕上。它还打印了完成后构建所需的时间。

从那以后我搬到了 CMake，我发现一个干净的构建会打印括号中的百分比作为进度（例如`[ XX%]`），但它不再打印完成时间。重建时，除了最后一个，它几乎没有给我任何东西

```
[100%] Buildt target <Project Name> 
```

并且仍然需要大约相同的时间来构建。

我希望它显示每个构建的百分比进度和完成时间。

所以这是我的问题：

如何打印构建时间？当我重建项目时，为什么不打印进度（或任何相关内容）？如何在每个构建中显示一些进度指示器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-19T09:06:02.880

您也可以使用`zsh`显示您在单个进程上花费了多少时间的主题。例如使用`powerlevel10k`主题。

[Powerlevel10k github](https://github.com/romkatv/powerlevel10k) [![powerlevel10k on alacritty](../Images/b9a3ef4f6d1f6d0dd78c9900692c89bf.png)](https://i.stack.imgur.com/ZNU1J.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-10T09:35:41.887

您可以像这样设置 cmake 属性：

```
set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE "${CMAKE_COMMAND} -E time") set_property(GLOBAL PROPERTY RULE_LAUNCH_LINK "${CMAKE_COMMAND} -E time") 
```

然后你会得到这样的结果：

![在此处输入图像描述](../Images/a6948a6e087bf9b688031e77471e6009.png)

# javascript - 使用 Javascript 数组（或对象）的单位转换器

> ID：12791992
> 
> 赞同：0
> 
> 时间：2012-10-09T02:18:36.083
> 
> 标签：javascript, arrays

我正在 Javascript 上构建一个单位转换器。我想要做的是将所有单位值存储或预定义在这样的数组中：

```
var converter_table = {
    'mass' : {
        'kilogram' : 1000,
        'gram' : 1,
        'ounce' : .035274,
        'pound' : .00220462
    },

    'length' : {
        'kilometer' : 1000,
        'meter' : 1
    }
}; 
```

然后能够提取值并根据用户输入进行计算。例如：

```
var quantity = 25, 
    category = 'mass',
    from_unit = 'kilogram',
    to_unit = 'pound';

var result = quantity * converter_table.category.from_unit * converter_table.category.to_unit;

alert(result); 
```

当然，converter_table.category.from_unit 是未定义的。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:21:20.560

您可以使用数组表示法：

```
var result = quantity * converter_table[category][from_unit] * converter_table[category][to_unit]; 
```

# mysql - MySQL JOIN 时间减少

> ID：12791996
> 
> 赞同：1
> 
> 时间：2012-10-09T02:18:47.490
> 
> 标签：mysql

此查询需要一分钟多的时间才能完成：

```
SELECT keyword, count(*) as 'Number of Occurences'
    FROM movie_keyword
    JOIN
    keyword
    ON keyword.`id` = movie_keyword.`keyword_id`
    GROUP BY keyword
    ORDER BY count(*) DESC
    LIMIT 5 
```

每个关键字都有一个与之关联的 ID（keyword_id 列）。该 ID 用于从关键字表中查找实际关键字。

movie_keyword 有 280 万行

关键字有 127,000

然而，只返回最常用的关键字 ID 只需要 1 秒：

```
SELECT keyword_id, count(*)
    FROM movie_keyword
    GROUP BY keyword_id
    ORDER BY count(*) DESC
    LIMIT 5 
```

有没有更有效的方法来做到这一点？

输出解释：

```
1   SIMPLE  keyword ALL PRIMARY NULL    NULL    NULL    125405  Using temporary; Using filesort
1   SIMPLE  movie_keyword   ref idx_keywordid   idx_keywordid   4   imdb.keyword.id 28  Using index 
```

结构：

```
CREATE TABLE `movie_keyword` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `movie_id` int(11) NOT NULL,
  `keyword_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_mid` (`movie_id`),
  KEY `idx_keywordid` (`keyword_id`),
  KEY `keyword_ix` (`keyword_id`),
  CONSTRAINT `movie_keyword_keyword_id_exists` FOREIGN KEY (`keyword_id`) REFERENCES `keyword` (`id`),
  CONSTRAINT `movie_keyword_movie_id_exists` FOREIGN KEY (`movie_id`) REFERENCES `title` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4256379 DEFAULT CHARSET=latin1;

CREATE TABLE `keyword` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `keyword` text NOT NULL,
  `phonetic_code` varchar(5) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_keyword` (`keyword`(5)),
  KEY `idx_pcode` (`phonetic_code`),
  KEY `keyword_ix` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=127044 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:17:50.300

未经测试，但在我看来应该可以工作并且明显更快，虽然不太确定是否允许在 mysql 的子查询中使用限制，但还有其他方法可以解决这个问题。

```
SELECT keyword, count(*) as 'Number of Occurences'
    FROM movie_keyword
    JOIN
    keyword
    ON keyword.`id` = movie_keyword.`keyword_id`
    WHERE movie_keyword.keyword_id IN (
        SELECT keyword_id
        FROM movie_keyword
        GROUP BY keyword
        ORDER BY count(*) DESC    
        LIMIT 5
    )
    GROUP BY keyword
    ORDER BY count(*) DESC; 
```

这应该更快，因为您没有将 movie_keyword 中的所有 280 万个条目与关键字连接起来，而只是那些实际匹配的条目，我猜这要少得多。

**编辑**，因为 mysql 不支持您必须运行的子查询中的限制

```
SELECT keyword_id
FROM movie_keyword
GROUP BY keyword
ORDER BY count(*) DESC    
LIMIT 5; 
```

首先，在获取结果之后运行第二个查询

```
SELECT keyword, count(*) as 'Number of Occurences'
    FROM movie_keyword
    JOIN
    keyword
    ON keyword.`id` = movie_keyword.`keyword_id`
    WHERE movie_keyword.keyword_id IN (RESULTS_FROM_FIRST_QUERY_SEPARATED_BY_COMMAS)
    GROUP BY keyword
    ORDER BY count(*) DESC; 
```

`RESULTS_FROM_FIRST_QUERY_SEPARATED_BY_COMMAS`以编程方式从您使用的任何语言替换为正确的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:22:50.557

查询似乎很好，但我认为结构不是，尝试在列上给出索引

```
keyword.id 
```

尝试，

```
CREATE INDEX keyword_ix ON keyword (id); 
```

或者

```
ALTER TABLE keyword ADD INDEX keyword_ix (id); 
```

如果您可以发布表格的结构会更好：`keyword`和`Movie_keyword`. 两者哪个是主表和引用表？

```
SELECT keyword, count(movie_keyword.id) as 'Number of Occurences'
FROM movie_keyword
     INNER JOIN  keyword
           ON keyword.`id` = movie_keyword.`keyword_id`
GROUP BY keyword
ORDER BY 'Number of Occurences' DESC
LIMIT 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T14:55:09.597

我知道这是一个很老的问题，但是因为我认为 xception 忘记了 mysql 中的交付表，所以我想提出另一种解决方案。它只需要一个查询，并且省略了大数据的连接。如果有人拥有如此大的数据并且可以对其进行测试（也许是问题创建者），请分享结果。

```
SELECT keyword.keyword, _temp.occurences
FROM (
  SELECT keyword_id, COUNT( keyword_id ) AS occurences
  FROM movie_keyword
  GROUP BY keyword_id
  ORDER BY occurences DESC 
  LIMIT 5
) AS _temp
JOIN keyword ON _temp.keyword_id = keyword.id
ORDER BY _temp.occurences DESC 
```

# python - 你如何在 python 中做一个简单的“chmod +x”？

> ID：12791997
> 
> 赞同：152
> 
> 时间：2012-10-09T02:18:47.773
> 
> 标签：python, chmod

我想从一个可执行的 python 脚本中创建一个文件。

```
import os
import stat
os.chmod('somefile', stat.S_IEXEC) 
```

它似乎`os.chmod`不像unix`chmod`那样“添加”权限。注释掉最后一行，文件有 filemode `-rw-r--r--`，没有注释掉，文件模式是`---x------`. 如何`u+x`在保持其余模式不变的同时添加标志？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-10-09T02:19:58.493

用于`os.stat()`获取当前权限，用于`|`OR 位，并用于`os.chmod()`设置更新的权限。

例子：

```
import os
import stat

st = os.stat('somefile')
os.chmod('somefile', st.st_mode | stat.S_IEXEC) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-05-26T16:22:19.000

对于生成可执行文件（例如脚本）的工具，以下代码可能会有所帮助：

```
def make_executable(path):
    mode = os.stat(path).st_mode
    mode |= (mode & 0o444) >> 2    # copy R bits to X
    os.chmod(path, mode) 
```

这使得它（或多或少）尊重`umask`创建文件时生效的内容：可执行文件仅设置为那些可以读取的文件。

用法：

```
path = 'foo.sh'
with open(path, 'w') as f:           # umask in effect when file is created
    f.write('#!/bin/sh\n')
    f.write('echo "hello world"\n')

make_executable(path) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-06-17T18:43:27.547

如果您知道所需的权限，那么以下示例可能是保持简单的方法。

蟒蛇2：

```
os.chmod("/somedir/somefile", 0775) 
```

蟒蛇 3：

```
os.chmod("/somedir/somefile", 0o775) 
```

兼容任一（八进制转换）：

```
os.chmod("/somedir/somefile", 509) 
```

参考[权限示例](http://permissions-calculator.org/examples/)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-05-08T21:39:10.633

如果您使用的是 Python 3.4+，则可以使用标准库的便捷[pathlib](https://docs.python.org/3/library/pathlib.html)。

它的[Path](https://docs.python.org/3/library/pathlib.html#pathlib.Path)类具有内置的[chmod](https://docs.python.org/3/library/pathlib.html#pathlib.Path.chmod)和[stat](https://docs.python.org/3/library/pathlib.html#pathlib.Path.stat)方法。

```
from pathlib import Path
import stat

f = Path("/path/to/file.txt")
f.chmod(f.stat().st_mode | stat.S_IEXEC) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-04-09T11:11:01.743

**尊重`umask`喜欢`chmod +x`**

`man chmod`表示如果`augo`没有给出如下：

```
chmod +x mypath 
```

然后`a`使用但与`umask`：

> 字母 ugoa 的组合控制哪些用户对文件的访问权限将被更改：拥有文件的用户 (u)、文件组中的其他用户 (g)、不在文件组中的其他用户 (o) 或所有用户（一）。如果这些都没有给出，效果就像给出 (a) 一样，**但在 umask 中设置的位不受影响。**

这样做的目的是让您不会意外授予太多权限。umask 确定新文件的默认权限，例如 umask为当前用户生成权限`0077`，因为 77 将排除组和其他（尽管默认情况下触摸不会给出 x）。并且由于掩码的一部分，同样只会为用户添加，忽略组和其他：您需要, ,或强制设置它们。`touch newfile.txt``rw``chmod +x``+x``0011``chmod o+x``chmod g+x``chmod go+x``chmod a+x`

这是一个完全模拟该行为的版本：

```
#!/usr/bin/env python3

import os
import stat

def get_umask():
    umask = os.umask(0)
    os.umask(umask)
    return umask

def chmod_plus_x(path):
    os.chmod(
        path,
        os.stat(path).st_mode |
        (
            (
                stat.S_IXUSR |
                stat.S_IXGRP |
                stat.S_IXOTH
            )
            & ~get_umask()
        )
    )

chmod_plus_x('.gitignore') 
```

另请参阅：[如何在 Python 中获取默认文件权限？](https://stackoverflow.com/questions/7150826/how-can-i-get-the-default-file-permissions-in-python)

在 Ubuntu 16.04、Python 3.5.2 中测试。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-16T21:40:26.520

你也可以这样做

```
>>> import os
>>> st = os.stat("hello.txt") 
```

当前文件列表

```
$ ls -l hello.txt
-rw-r--r--  1 morrison  staff  17 Jan 13  2014 hello.txt 
```

现在这样做。

```
>>> os.chmod("hello.txt", st.st_mode | 0o111) 
```

你会在终端看到这个。

```
ls -l hello.txt    
-rwxr-xr-x  1 morrison  staff  17 Jan 13  2014 hello.txt 
```

您可以按位或使用 0o111 使所有可执行，0o222 使所有可写，0o444 使所有可读。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-02-14T13:06:12.070

在python3中：

```
import os
os.chmod("somefile", 0o664) 
```

请记住添加`0o`前缀，因为权限设置为八进制整数，Python 会自动将任何带有前导零的整数视为八进制。否则，您`os.chmod("somefile", 1230)`确实在通过，它是 的八进制数`664`。

# haskell - 单子迭代 Data.Sequence

> ID：12791998
> 
> 赞同：2
> 
> 时间：2012-10-09T02:19:15.343
> 
> 标签：haskell, state-monad

我有一个需要迭代的 Data.Sequence。问题在于它是有状态的，并且序列可能会由于所述迭代而增长。

```
data Chart = Chart {
       charts :: M.Map Int (Seq.Seq RState), --map from position to list of chart states
       ...
} deriving (Show)

processChartSeq :: Int -> Int  -> State Chart ()
processChartSeq chtIndx stIndx = do s <- get
                                    let seq = fromJust $ M.lookup chtIndx (charts s)
                                        rstate = Seq.index seq  stIndx
                                    processState rstate
                                    when (stIndx < Seq.length seq) (processChartSeq chtIndx (stIndx+1)) 
```

所以我用显式递归来做这件事，但它看起来很笨重。此外，这似乎是一件很平常的事情。我重新发明了哪些常见的一元控制结构，很糟糕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:43:13.283

为了回答最初的问题，您在状态单子本身中“重新发明”了状态单子！您可以将您明确线程化的内容移动到您的状态中，以避免直接传递它。另一方面，对于像这样简单的事情，我明确地传递东西没有问题，而且经常发现它更干净。

最后，正如 Daniel Wagner 指出的那样，为了提高效率，您应该尽可能地从顶部推动和弹出。