# StackOverflow 问答 14280000-14280999

# c# - 为什么我们不能在 C# 项目中使用 F# 类？

> ID：14280001
> 
> 赞同：19
> 
> 时间：2013-01-11T14:17:54.357
> 
> 标签：c#, f#, clr

为什么我们不能在 C# 项目中使用 F# 类？

最终，这都是 CIL，不是吗？

那么我们有什么理由不能将 F# 源文件添加到 C# 项目中呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-11T14:19:51.110

您可以在 C# 项目中使用 F# 类。不能在 C# 项目中使用 F# 源文件。

C# 项目由 C# 编译器编译。F# 项目由 F# 编译器编译。为了在 C# 项目中使用 F# 类，您需要创建一个单独的 F# 项目，将您的类放入其中，并在您的 C# 项目中添加对该项目的引用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T14:19:39.490

为了使用来自不同语言的程序集，您需要确保您的代码[符合 CLS](http://msdn.microsoft.com/en-us/library/bhc3fa7f.aspx)。

这可确保您的代码使用与所有 .NET 语言通用且兼容的功能。

* * *

您不能在一个项目中混合使用不同语言的代码文件。这是 Visual Studio 及其构建系统的设计方式的限制。

# eclipse - 一种让 Eclipse PyDev 在异常时播放声音的方法？

> ID：14280004
> 
> 赞同：1
> 
> 时间：2013-01-11T14:18:00.363
> 
> 标签：eclipse, pydev

我想知道如果控制台注册异常并破坏脚本，是否有办法让 Eclipse 或 PyDev 播放声音？

我想我可以按照以下方式做一些事情：

```
try:
    function_name()
except Exception as exception_data:
    import winsound
    winsound.Beep(440, 200)
    print exception_data 
```

但我宁愿有某种捷径。是否有某种插件可以做到这一点，或者这真的是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:44:27.600

我不知道有什么插件可以开箱即用，但看起来并不难编码。您只需要在平台日志上添加一个监听器并在记录“错误”时播放声音。像这样的东西应该可以解决问题。

```
ILogListener listener = new ILogListener() {
  public void logging(IStatus status, String plugin) {
    if (status.getSeverity() == IStatus.ERRROR) {
      // play beep sound
    }
  }
};
Platform.addLogListener(listener); 
```

这需要在 Eclipse 插件中完成，甚至可能在它的“start()”方法中完成，因为它不需要更多。这个[简单的教程](http://www.vogella.com/articles/EclipsePlugIn/article.html)可以告诉你如何创建一个基本的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-17T20:58:34.407

您还可以执行以下操作：

```
import os 
```

在程序的开头，然后在您想要例外的某些部分使用以下命令。

```
os.system('say "your program has exceptions"') 
```

# c# - 将 C# 正则表达式转换为 Java 正则表达式

> ID：14280005
> 
> 赞同：1
> 
> 时间：2013-01-11T14:18:07.260
> 
> 标签：c#, java, regex

任何简单的 unicode 字符串都使用以下模式在 c# 正则表达式中类似`زسس`或`یسیتنانت`匹配，但它们在 java 中不匹配。

谁能解释一下？如何更正它以使其在 Java 中工作？

```
 "\\b[\\w\\p{M}\\u200B\\u200C\\u00AC\\u001F\\u200D\\u200E\\u200F]+\\b" 
```

c# 代码：（它匹配字符串）

```
 private static readonly Regex s_regexEngine;

    private static readonly string s_wordPattern = @"\b[\w\p{M}\u200B\u200C\u00AC\u001F\u200D\u200E\u200F]+\b";

    static PersianWordTokenizer()
    {
        s_regexEngine = new Regex(s_wordPattern, RegexOptions.Multiline);
    }

    public static List<string> Tokenize(string text, bool removeSeparators, bool standardized)
    {
        List<string> tokens = new List<string>();

        int strIndex = 0;
        foreach (Match match in s_regexEngine.Matches(text))
        {
            //Enter in this block
        } 
```

java代码：（它不匹配字符串）

```
 private static final String s_wordPattern = "\\b[\\w\\p{M}\\u200B\\u200C\\u00AC\\u001F\\u200D\\u200E\\u200F]+\\b";

static
{
    s_regexpattern = Pattern.compile(Pattern.quote(s_wordPattern));
}

public static java.util.ArrayList<String> Tokenize(String text, boolean removeSeparators, boolean standardized)
{
    java.util.ArrayList<String> tokens = new java.util.ArrayList<String>();

    int strIndex = 0;
    s_regexEngine=s_regexpattern.matcher(text);
    while(s_regexEngine.find())
    {
              // it dosnt enter in this block
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T15:27:11.610

查看“任何字母”的 unicode 字符类**\p{L}**或java Pattern.compile 方法的**Pattern.UNICODE_CHARACTER_CLASS参数。**

我猜第二个，因为只是 Java，你不会感兴趣，但值得一提。

```
import java.util.regex.Pattern;

/**
 * @author Luc
 */
public class Test {

  /**
   * @param args
   */
  public static void main(final String[] args) {

    test("Bonjour");

    test("یسیتنانت");

    test("世界人权宣言 ");
  }

  private static void test(final String text) {

    showMatch(Pattern.compile("\\b\\p{L}+\\b"), text);

    showMatch(Pattern.compile("\\b\\w+\\b", Pattern.UNICODE_CHARACTER_CLASS), text);
  }

  private static void showMatch(final Pattern pattern, final String text) {

    System.out.println("With pattern \"" + pattern + "\": " + text + " " + pattern.matcher(text).find());
  }

} 
```

结果 ：

```
With pattern "\b\w+\b": Bonjour true
With pattern "\b\p{L}+\b": Bonjour true
With pattern "\b\w+\b": یسیتنانت true
With pattern "\b\p{L}+\b": یسیتنانت true
With pattern "\b\w+\b": 世界人权宣言  true
With pattern "\b\p{L}+\b": 世界人权宣言  true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:23:28.663

正则表达式本身在 .NET 和 Java 之间没有变化，所以这里大致介绍了在 Java 中如何使用它。

```
package regexdemo;
import java.util.regex.*;

public class void main(String[] args) {
    String term = "Hello-World";
    boolean found = false;
    Pattern p = Pattern.compile("\\b[\\w\\p{M}\\u200B\\u200C\\u00AC\\u001F\\u200D\\u200E\\u200F]+\\b");
    Matcher m = p.matcher(term);
    if (matcher.find()){
        found = true;
    }
} 
```

另外，作为确定正则表达式不同风格的起点，我建议您查看这些站点

[http://docs.oracle.com/javase/tutorial/essential/regex/index.html](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)
[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-11T16:29:37.360

将正则表达式字符串包装在对 java.util.regex.Pattern.quote 的调用中。例如，java.util.regex.Pattern.quote(yourCSharpRegexString)。

# java - Java中的线程安全队列

> ID：14280007
> 
> 赞同：17
> 
> 时间：2013-01-11T14:18:18.120
> 
> 标签：java, multithreading, thread-safety, queue

我想实现一个队列，它被多个线程击中。

这是堆栈在单例类中。

现在，一个简单的解决方案是同步这个？我认为它需要这个作为标准？但是，我想优先写入它。

所以，写是高优先级，读是低优先级。

这可能吗？
理想情况下，如果可能的话，在不同步的情况下由多个线程编写会很棒。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-11T14:20:32.183

为什么要避免同步？可以编写“无锁”结构，但非常棘手且容易出错。

如果我是你，我会使用`ArrayBlockingQueue`or `ConcurrentLinkedQueue`（或来自 的其他结构之一`java.util.concurrent`）让你的生活变得轻松！

哦，我错过了关于优先读取优先于写入的内容。你可以在`ReentrantReadWriteLock`课堂上做到这一点。那么你就不需要线程安全队列了——你只需根据你是在读还是在写，使用读写锁在外部锁定。

# javascript - jQuery中的Buggy切换div，跳跃，不流畅

> ID：14280018
> 
> 赞同：0
> 
> 时间：2013-01-11T14:18:58.787
> 
> 标签：javascript, jquery, css, html

我试图为这个网站[www.hellomonday.com](http://www.hellomonday.com)上的工作部分构建一个 jquery 解决方案。

我已经构建了它，因此图像在悬停时会发生变化，并且当 div 仅在您看到它在运行时才会展开时，它看起来非常跳跃和抖动，特别是如果我的网站上有超过 1 行的工作。

您在顶部看到的图像，我想在悬停时更改，当单击并且 div 展开时，我希望图像随着我的 div 的高度而增长，并淡入第三张图像（您会在看到演示时理解） . 如果再次单击，图像应淡出到第一张图像并相应缩小。

**演示**

[http://jsfiddle.net/fRfd4/1/](http://jsfiddle.net/fRfd4/1/)

```
// On work showcase click, expand area to show information
    $('.work-showcase').click(function(){
        if ( !$(this).hasClass('active') ){
            $(this).addClass('active');
            $(this).find('ul li').animate({height:'350px'}, 500);
            $(this).find('ul li').css({
                'background':'url("http://www.placekitten.com/502/135")'
            });         
            $(this).find('ul li img').animate({height:'350px'}, 500);
            $(this).animate({height:'650px'}, 500,function() {  
                $("html, body").animate({ scrollTop: $(this).offset().top });  
            });
        } else { 
            //return false;
            $(this).removeClass('active');
            $(this).find('ul li').animate({height:'120px'}, 500);
            $(this).find('ul li').css({
                'background':'url("http://www.placekitten.com/500/135")'
            });         
            $(this).find('ul li img').animate({height:'120px'}, 500);
            $(this).animate({height:'130px'}, 500);  
        };
    }); 
```

有人能想出更好的方法来构建它吗？

# javascript - 创建工具链的方法比较：JS modules/loader/build

> ID：14280019
> 
> 赞同：2
> 
> 时间：2013-01-11T14:19:13.010
> 
> 标签：javascript, build, module, amd, js-amd

在评估开发人员可用于使用 javascript 模块、模块加载器和构建工具的各种方法的过程中，我想要一些关于您使用哪些工具以及为什么使用的建议。

我目前正在寻求能够：
- 鼓励模块化代码 -
允许根据给定模块的必要性添加功能 [认为 mixins/inheritance]
- 生成包含开发版本的 BUILD，并且至少是具有不同层的生产版本（例如，我想要一个包含我的引导代码、模块 1、2 和 3 的层 [一个脚本]；然后是另一个包含模块 4、5 和 6 的层。这样我可以推迟加载代码基于应用程序中实际发生的情况。） -
在带宽极低的情况下工作 [当为生产而构建时]，xfer 速度为 1kbps 和高延迟（考虑最坏情况下通过 GPRS 的移动连接以获得图片）。

我已经看到了以下内容：使用原型继承，如：

```
myNS.thing = function(){};
myns.thing.prototype = {
    something: "foo"
} 
```

可以通过简单地获取此脚本的内容并将其附加到下一个想要包含在生产优化包中作为单个脚本的内容来构建。在这种情况下，加载程序是基于已知文件的简单脚本标签注入/评估或类似的。

我还看到了其他方法，例如：

```
function(){
    return function(){
        something: "foo"
    }
}(); 
```

构建它已经变得更加复杂，因为必须操作脚本，删除包装自执行函数并将返回值组合到一个对象中。我不知道使用可用构建工具的“简单”方法。加载器方法的工作方式与上述相同。

这两种方法都缺乏依赖性。

然后我们有 AMD：

```
define("mymodule", ["dep1"], function(dep1){
    return {something: dep1}
}); 
```

有些人可能会对它的缩进和“仪式”感到恶心，但它仍然非常有效，google 闭包编译器本身就知道它，它知道依赖关系，并且似乎已被广泛采用。有很多可用的模块加载器（https://docs.google.com/spreadsheet/ccc?key=0Aqln2akPWiMIdERkY3J2OXdOUVJDTkNSQ2ZsV3hoWVE#gid=2）和不少构建工具。

您还知道哪些其他选项，或者您见过在生产中使用过哪些选项？

如前所述，我对代码语法、加载器工具和构建工具的组合感兴趣。这三个必须存在并且可以正常协同工作。剩下的就是我不感兴趣的学术练习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:40:14.910

您可能有兴趣查看[Grunt](http://gruntjs.com/)一个命令行工具，其中包含用于构建 javascript 项目的各种模块。它使用 npm 作为依赖项，并且可以与 amd 模块一起使用，但您可以将其配置为使用[grunt-buildconcat](https://npmjs.org/package/grunt-buildconcat)连接您需要的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:49:20.540

我个人使用 AMD 解决方案 RequireJS。如果我要快速进行概念验证，我不会费心设置它，但我现在知道的最常见的源/dep-mapping 解决方案包括：

*   要求JS
*   CommonJS
*   谷歌关闭
*   YepNope（条件加载器，可以与其他加载器结合使用）

我已经开始了一个样板文件，它使用 Require 和 Backbone 组合来消除所有丑陋的设置代码：

[https://github.com/nick-jonas/assemblejs](https://github.com/nick-jonas/assemblejs)

因此，您可以键入`assemble init`来搭建基本项目并`assemble build`运行编译器并获得最终的生产就绪构建。

# flash - flex sdk——在哪里可以使用 playerglobals.swc 获得适用于 flash player 11.2 的正确版本

> ID：14280022
> 
> 赞同：2
> 
> 时间：2013-01-11T14:19:26.493
> 
> 标签：flash, flash-builder, flash-player-11

我正在 Ubuntu 12.04 上使用 FB4Linux 进行开发，并且我已经安装了最新的 linux 可用版本的 flashplayer，即 11.2。当我搜索 adobe 参考资料时，我发现[MouseEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html)从 11.2 版本开始支持中键和右键单击事件。我已经从[adobe here](http://www.adobe.com/devnet/flex/flex-sdk-download.html)下载了最新的 flex sdk 4.6 ，这个 sdk 包含 11.1 版的 playerglobals.swc，其中尚不支持这些事件。

是否可以更新此 sdk 以使 flashplayer 11.2 成为目标运行时，或者这仅适用于 windows 和 mac，因为 flex sdk 已移交给 apache flex sdk，在那里我只能找到 windows 和 mac 的下载。

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:28:23.247

转到[http://get2.adobe.com/flashplayer/otherversions/](http://get2.adobe.com/flashplayer/otherversions/)并选择您想要的播放器。在 runtimes/player/11.2 下的 sdk 文件夹中替换它（您需要创建 11.2 文件夹）。

在 Flash Builder 中加载该 sdk 并查看是否获得鼠标支持。

# c - 从字符串复制到分配的内存的函数中的运行时错误

> ID：14280028
> 
> 赞同：1
> 
> 时间：2013-01-11T14:19:40.363
> 
> 标签：c, memcpy, strlen, calloc

我对以下 C 难题有一些想法。我很好奇有更多经验的 C 程序员可能会怎么想……看看示例代码：

```
char * strdup (const char * s) { 
    char * buf;
    int len;
    assert(s != NULL);
    len = strlen(s);
    buf = (char *) calloc(len + 1, sizeof(char)); 
    memcpy(buf, s, len); 
    return buf;
} 
```

上面建议的 strdup() 实现包含一个运行时错误，该错误可能与每次调用都不一致。以下哪一项准确地描述了这个错误？

对此的可能答案是：

1 calloc() 的参数不会导致分配足够的内存来存储 s 的内容。

2 如果内存不足，calloc() 可能会失败并返回 NULL。代码没有预料到这种情况。

3 memcpy() 如果用于复制 ASCII 字符串，可能会损坏数据。

4 buf 永远不会以 NUL 结尾，因此不能被影响字符串的 C 库函数使用。

5 函数返回一个指向动态内存的指针。应该避免这种做法，并且总是会造成内存泄漏。

我认为**正确答案是 2**，但这更多是因为其他答案对我来说似乎不正确，而不是因为答案 2 是直接正确的答案。

*   答案 1 似乎不正确，因为 calloc 保留了足够的内存 (len+1) 来适当地结束字符串，

*   我对答案 3 中的内容一无所知，

*   answer4：memcpy 将 s 的内容复制到 buf 留下最后一个字节等于 0（复制 len 个字节，注意 previos 调用 calloc 用 0 填充最后一个字节）。因此，这个答案是不正确的，

*   答案5：？

你怎么看？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:25:37.670

正确答案是 2 和 5。

`#2`因为内存分配函数可能会失败，您必须检查它们的返回值。

`#5`因为，除非您记录您的函数动态分配返回的缓冲区的事实，否则调用者无法知道他们必须释放返回的缓冲区。

`#1`是不正确的，因为正如您正确所说的分配字符串所需的内存+终止`calloc`所需的额外字节。`NULL`

`#3`不正确，因为它不正确，`memcpy`只是将数据从源复制到目标。它不受该内存中存储的内容的影响。

`#4`不正确，因为`calloc`将分配的内存清零。

# c++ - 遍历 BST 时遇到问题

> ID：14280032
> 
> 赞同：0
> 
> 时间：2013-01-11T14:19:52.060
> 
> 标签：c++, binary-search-tree

我开始学习树并尝试为 BST 编写代码。不幸的是，我无法显示树数据。我正在尝试实现深度优先遍历。但不知道如何实现它。下面是我的代码

```
#include<iostream>
using namespace std;

class node
{
  public:
  int data;
  node *left,*right;
};

class btree
{
private:
node *root;
public:
btree(){root=NULL;}
void insert(int value)
{node *temp=new node;
    if(root == NULL)
        {
        temp->right=NULL;
        temp->data=value;
        temp->left=NULL;
        root=temp;
        }
    else
        insertHelper(root, value);
}

void insertHelper(node* Node, int value)
{
    if(value < Node->data)
    {
        if(Node->left == NULL)
            {
                Node->left=new node;
                Node->left->data=value;
                Node->left->left=NULL;
                Node->left->right=NULL;
                }
        else
            insertHelper(Node->left, value);
    }
    else
    {
        if(Node->right== NULL)
           {
               Node->right = new node;
               Node->right->data=value;
               Node->right->left=NULL;
               Node->right->right=NULL;
               }
        else
            insertHelper(Node->right, value);
    }

}

void disp()
{node*tmp=root;
if(tmp==NULL)
    cout<<"empty"<<endl;
else
    {
        cout<<tmp->data<<endl;
        disphelper(tmp);
    }
}

void disphelper(node *tmp)
{

    if(tmp->left!=NULL)
    {
        cout<<tmp->left->data<<endl;
        tmp=tmp->left;
        disphelper(tmp);}
    if(tmp->right!=NULL)
    {
       cout<<tmp->right->data<<endl;
        tmp=tmp->right;
        disphelper(tmp);
    }
}
};

int main()
{
    btree binarytree;
    binarytree.disp();
    binarytree.insert(10);
    binarytree.insert(5);
    binarytree.insert(30);
    binarytree.disp();
} 
```

输出是

```
empty
10
5 
```

谁能告诉我为什么不显示30？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:39:01.823

你在这里没有得到任何输出的原因是`disphelper()`你首先检查左节点是否是`NULL`，然后在你递归到它时*改变*它。当您递归到正确的节点时也是如此。

```
 void disphelper(node *tmp)
    {
        if(tmp->left!=NULL)
        {
            cout<<tmp->left->data<<endl;
            //tmp=tmp->left; // Get rid of this.
            disphelper(tmp->left); // Use this.
        }
        if(tmp->right!=NULL)
        {
            cout<<tmp->right->data<<endl;
            //tmp=tmp->right; // Get rid of this
            disphelper(tmp->right); // Use this.
        }
    } 
```

而不是更改 temp 的值，这对于两个比较应该是相同的，只需传入左节点或右节点。

另外两件事。首先，您在这里疯狂地泄漏内存：在您的`insert()`中，您每次都创建一个新对象，但仅在第一次使用它，每隔一次泄漏。您的`node`类应该通过删除两个节点的析构函数来处理内存。

其次，在你发布代码之前，你能不能麻烦把它格式化一下，让缩进保持一致？这不是以前做这件事的痛苦——很多编辑会为你做这件事，或者你可以使用优秀的[Astyle](http://astyle.sourceforge.net/)。我知道这是一个小问题，但对于那些阅读你的代码的人来说，这很烦人——包括，大概是那个会给你做作业的人！谢谢 ：-）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:47:53.117

将您的代码修改为

```
void disphelper(node *tmp)
{
    if(tmp == NULL)
       return;
    cout<<tmp->data<<endl; // print data for current node

    if(tmp->left!=NULL) // traverse left branch
    {
        //cout<<tmp->left->data<<endl;
        //tmp=tmp->left;
        disphelper(tmp->left);}
    if(tmp->right!=NULL) // traverse right branch
    {
       //cout<<tmp->right->data<<endl;
        //tmp=tmp->right;
        disphelper(tmp->right);
    }
} 
```

它应该工作。

```
void disp()
{node*tmp=root;
if(tmp==NULL)
    cout<<"empty"<<endl;
else
    {   
        disphelper(tmp);
    }
} 
```

# wpf - 以页面为中心打印 FlowDocument

> ID：14280033
> 
> 赞同：1
> 
> 时间：2013-01-11T14:19:58.643
> 
> 标签：wpf, printing

在我的 WPF 应用程序中，我想打印一个自定义生成的 FlowDocument，但是我在将页面放在纸张中心时遇到了很大的问题。每个页面都与左上角对齐。即使如此靠近打印机也无法触及它。文件的小部分丢失。下方和右侧有足够的空白空间，因此文档可以轻松地放在纸上。如果它是居中的！

有什么方法可以为 PrintTicket 或 Paginator 设置边框/边距/或偏移量？

我没有找到任何可行的方法。

这就是我所做的：

```
// selectedDocument is a FlowDocument

private const double PAGE_HEIGHT = 728;
private const double PAGE_WIDTH = 1024;

var paginator 
= ((IDocumentPaginatorSource)this .selectedDocument).DocumentPaginator;
paginator.PageSize = new Size(PAGE_WIDTH, PAGE_HEIGHT); 
printDialog.PrintTicket.PageOrientation 
= System.Printing.PageOrientation.Landscape;
printDialog.PrintDocument(paginator, "Report"); 
```

我也尝试了不同的页面大小，但没有区别。

如果我通过 XpsSerializationManager 将 FlowDocument 保存为 XpsDocument，则创建的文件看起来很完美。边框和边距都是应有的。在后面的步骤中，我使用这个文件来创建一个 pdf 文件。如果我然后打印 pdf 文件，它在纸上看起来也很好。

# windows - 在 Qt 中获取父进程

> ID：14280036
> 
> 赞同：1
> 
> 时间：2013-01-11T14:20:07.420
> 
> 标签：windows, macos, qt, process

我在 Mac 和 Windows 上使用 Qt。QProcess 或类似的东西有没有很好的方法来找到我的应用程序的父进程？我需要找出启​​动我的应用程序的应用程序。

# css - CSS element.style，它来自哪里，我该如何关闭它？

> ID：14280042
> 
> 赞同：0
> 
> 时间：2013-01-11T14:20:22.560
> 
> 标签：css, video-streaming, element

我为 Wordpress 安装了 S3 Video Plugin - 它运行良好，除了它或我的主题正在应用 padding-top % element.style 并且我无法在不搞砸的情况下更改播放器大小。这是从萤火虫复制的：

```
element.style {
    padding-top: 59.375%;
}
.fluid-width-video-wrapper {
    padding: 0;
    position: relative;
}
.fluid-width-video-wrapper {
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
    content: "";
    height: 10px;
    left: 0;
    margin-left: auto;
    margin-right: auto;
    padding: 0;
    position: relative;
    top: -15px;
    width: 100%;
    z-index: 100;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:24:08.183

毫不奇怪，元素样式是元素本身的样式，例如

```
<div style="padding-top: 59.375%;"></div> 
```

它将优先于您在 CSS 中指定的任何其他样式，除非您使用`!important`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:22:49.150

也许播放器中有一些 JavaScript，所以添加了 CSS。将您的 CSS 规则写入`!important`应该明确执行的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:49:02.253

`Element.style`可能由您正在使用的插件通过其 Javascript 函数之一或类似的东西设置。可以通过删除脚本更改元素默认 CSS 样式的行来关闭它。

# asp.net-mvc - MVC 区域，MvcCodeRouting，两者，还是其他一些架构？

> ID：14280045
> 
> 赞同：2
> 
> 时间：2013-01-11T14:20:38.360
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-areas

我正在整理一个 MVC 4 项目，该项目可能会在未来几年内广泛发展。带着从零开始的奢侈和挑战，我试图找出路由和组织我的控制器和视图的最佳实践。

MvcCodeRouting NuGet 包很有吸引力，我打算使用它。但是，我不确定使用 MVC 区域是否也是明智的。如果使用 MvcCodeRouting，似乎 MVC 区域是多余的，但我不确定区域提供的额外代码组织是否仍然是可取的。

为了说明我的意思，让我们以这个虚构的评分应用程序为例。它具有以下高级领域：

*   公共门户
*   经过身份验证的学生门户
*   认证教师门户
*   经过身份验证的管理员门户

假设每个门户最终会有 100 个不同的视图（让我们雄心勃勃！）。如果实现了这种规模，MVC 区域似乎是划分代码的好方法，在每个区域中使用 MvcCodeRouting。或者也许我们应该按照我们喜欢的方式组织代码，让 MvcCodeRouting 完成繁重的工作。

因此，Areas plus MvcCodeRouting 设计看起来像这样（文件夹结构）：

*   MvcWeb项目
    *   领域
        *   行政
            *   控制器
            *   楷模
            *   意见
        *   上市
            *   控制器
            *   楷模
            *   意见
        *   学生
            *   控制器
            *   楷模
            *   意见
        *   老师
            *   控制器
            *   楷模
            *   意见
    *   内容
    *   控制器
    *   脚本
    *   意见

没有区域的 MvcCodeRouting 设计看起来像这样（文件夹结构）：

*   MvcWeb项目
    *   内容
    *   控制器
        *   行政
        *   上市
        *   学生
        *   老师
    *   楷模
        *   行政
        *   上市
        *   学生
        *   老师
    *   脚本
    *   意见
        *   行政
        *   上市
        *   学生
        *   老师

这些设计中隐含的是 MvcCodeRouting 将用于通过命名空间进一步组织类。

在这些设计中，哪个是更好的方法？为什么？还有另一种更好的方法吗？在一种设计或另一种设计中，在门户之间共享资源是更容易还是更困难？

请注意，这只是整个代码解决方案的前端，因此其背后的整个服务/域/数据库都有自己特定的架构。出于这个问题的目的，我只是对如何在 MVC 中构建这些不同的应用程序领域感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:58:13.433

我不会将区域仅用于文件夹组织。使用 MvcCodeRouting 完全不需要区域，因为您可以使用命名空间来代替，并且同时使用两者可能会造成混淆。

让我建议您可以与 MvcCodeRouting 一起使用的其他文件夹结构：

**选项1**

*   MvcWeb项目
    *   行政
        *   控制器
        *   楷模
    *   上市
        *   控制器
        *   楷模
    *   学生
        *   控制器
        *   楷模
    *   老师
        *   控制器
        *   楷模
    *   意见
        *   行政
        *   上市
        *   学生
        *   老师
    *   内容
    *   脚本

**选项#2** 在这个选项中，您可以将 ViewModels 放在与使用它的控制器相同的目录/命名空间中。

*   MvcWeb项目
    *   控制器
        *   行政
        *   上市
        *   学生
        *   老师
    *   意见
        *   行政
        *   上市
        *   学生
        *   老师
    *   内容
    *   脚本

MvcCodeRouting 没有改变的一件事是 Views 文件夹的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T14:34:51.320

MvcCodeRouting 能否帮助嵌入/提供其他静态内容，如 CSS 和 JS 文件？

# android - 理解paint.measureText

> ID：14280046
> 
> 赞同：0
> 
> 时间：2013-01-11T14:20:38.847
> 
> 标签：android

需要一些帮助来理解 android 中的绘画对象。我有一个名为 myString 的字符串对象。我在资产下的 txt 文件中加载了一些内容。在我的代码中，当我执行 myString.length() 时，我得到一个 16708 的值。

当我使用下面的绘制对象来获取长度时，我得到的值为 211050

```
myTextView = (TextView)findViewById(R.id.my_text_view);
Paint paint = myTextView.getPaint();
float length = paint.measureText(myString, 0, myString.length()); 
```

我得到一个长度值为 211050 的值。

现在我试图了解这里的这些值是什么。16708 显然是我的字符串的总长度。这里的 211050 是什么？它是以像素为单位的字符串宽度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:22:41.077

是的，您的文本在屏幕上的长度将以像素为单位。

编辑：

是的，`paint.breakText()`有助于根据参数中提供的最大宽度断开字符串。

但也必须使用,`setSubpixelText (true)`来解释包含**i**或**l(small L)**或**w**的字符串，因为 breaktext 不知何故无法使用`breakText()`. 至少我遇到了这个问题，并使用`setSubpixelText()`.

希望这可以帮助。

# mysql - 加载逗号后空格不一致的 CSV 文件

> ID：14280052
> 
> 赞同：2
> 
> 时间：2013-01-11T14:21:05.327
> 
> 标签：mysql, sql, database, csv

我想使用`LOAD DATA INFILE`命令加载一个 CSV 文件，但逗号后的空格不一致，即有逗号后跟一个空格，而逗号不是。

我尝试使用`FIELDS TERMINATED BY ","`指令，但结果表中的某些字段包含前导空格；如果输入是

```
abc,def, ghi, klm 
```

然后在加载我的桌子后

```
column1 = 'abc'
column2 = 'def'
column3 = ' ghi'
column4 = ' klm' 
```

请注意，第 3 列和第 4 列包含前导空格。

我希望我的列不包含前导空格。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:30:16.520

这行得通吗？

```
LOAD DATA INFILE 'file.csv'
INTO TABLE t1 (column1, @col2, @col3, @col4)
SET
  column2 = TRIM(@col2),
  column3 = TRIM(@col3),
  column4 = TRIM(@col4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:32:43.737

您可以使用简短的`sed`替换模式来执行此操作：

```
sed -i 's/, /,/g' file.csv 
```

之后，file.csv（其内容为“abc,def, ghi, klm”）包含：

```
abc,def,ghi,klm 
```

# arm - Atmel SAM4S Xplained UART

> ID：14280053
> 
> 赞同：4
> 
> 时间：2013-01-11T14:21:08.290
> 
> 标签：arm, uart

我有一个 SAM4s Xplained 并想使用 UART1 但找不到示例或帮助。我自己尝试过，但它不起作用。

到目前为止，这是我的代码：

**conf_uart.h**

```
#include "asf.h" //uart.h etc. included here
#include <sam4s_xplained.h>

#define UART_SERIAL_BAUDRATE        9600
#define UART_SERIAL_CHANNEL_MODE   UART_MR_CHMODE_AUTOMATIC //UART_MR_CHMODE_NORMAL
#define UART_SERIAL_MCK            240000000UL //CHIP_FREQ_CPU_MAX (tired both!)
#define UART_SERIAL_MODE         UART_MR_PAR_NO

void uart_custom_init(void); 
```

**conf_uart.c**

```
#include "conf_uart.h"

uint8_t received_byte;

void uart_custom_init(void) {
    sysclk_init();

    const sam_uart_opt_t uart_console_settings = {
       UART_SERIAL_BAUDRATE,
       UART_SERIAL_CHANNEL_MODE,
       UART_SERIAL_MCK,
       UART_SERIAL_MODE
    };

    uart_init(UART1,&uart_console_settings);      //Init UART1

    uart_enable_rx(UART1);                     //Enable RX (receiving)
    uart_enable_tx(UART1);                     //Enable TX (transmitting)
    uart_enable(UART1);                     //Enable UART1

    uart_enable_interrupt(UART1,UART_IER_RXRDY);   //Interrupt reading ready
    NVIC_EnableIRQ(UART1_IRQn);

}

void UART1_Handler() {
   uint32_t dw_status = uart_get_status(UART1);

   if(dw_status & UART_SR_RXRDY) {
      uint8_t received_byte;
      uart_read(UART1, &received_byte);
      uart_write(UART1, received_byte);
   }
} 
```

我尝试了不同的东西。作为示例，我激活了自动回显，但我的计算机上没有收到任何内容，我的 SAM4 上也没有收到任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:05:39.580

这是我的工作代码：离线

conf_uart.h

```
#include "asf.h" //uart.h etc. included here

#define UART_SERIAL_BAUDRATE        9600
#define UART_SERIAL_CHANNEL_MODE   UART_MR_CHMODE_NORMAL
#define UART_SERIAL_MODE         UART_MR_PAR_NO

/* =============== UART1 =============== */ //(UART0 is defined but not UART1)
#define PINS_UART1          (PIO_PB2A_URXD1 | PIO_PB3A_UTXD1)
#define PINS_UART1_FLAGS    (PIO_PERIPH_A | PIO_DEFAULT)
#define PINS_UART1_MASK     (PIO_PB2A_URXD1 | PIO_PB3A_UTXD1)
#define PINS_UART1_PIO      PIOB
#define PINS_UART1_ID       ID_PIOB
#define PINS_UART1_TYPE     PIO_PERIPH_A
#define PINS_UART1_ATTR     PIO_DEFAULT

void uart_custom_init(void);
void sendViaUart(uint8_t data); 
```

conf_uart.cpp

```
#include "conf_uart.h"

void uart_custom_init(void) {
    sysclk_init();

     // set the pins to use the uart peripheral
    pio_configure(PINS_UART1_PIO, PINS_UART1_TYPE, PINS_UART1_MASK, PINS_UART1_ATTR);

    //enable the uart peripherial clock
    pmc_enable_periph_clk(ID_UART1);

    const sam_uart_opt_t uart1_settings =
      { sysclk_get_cpu_hz(), UART_SERIAL_BAUDRATE, UART_SERIAL_MODE };

    uart_init(UART1,&uart1_settings);      //Init UART1 and enable Rx and Tx

    uart_enable_interrupt(UART1,UART_IER_RXRDY);   //Interrupt reading ready
    NVIC_EnableIRQ(UART1_IRQn);

}

void sendViaUart(uint8_t data) {
   while (!(UART1->UART_SR & UART_SR_TXRDY));
   uart_write(UART1, data);
}

void UART1_Handler() {
   uint32_t dw_status = uart_get_status(UART1);

   if(dw_status & UART_SR_RXRDY) {
      uint8_t received_byte;
      uart_read(UART1, &received_byte);
      sendViaUart(received_byte);
   }
} 
```

最好的问候狮子座

*   关闭 -

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-21T21:12:29.407

问题是这块板上 Sam4S Explained Pro 上的 UART 没有映射到 PB2A 和 PB3A。UART 映射到 PB2A 和 PA22A。我花了很长时间才弄清楚这一点，因为它在文档中是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T21:22:37.917

您可能还喜欢这个页面：它包含 SAM4S uart 的设置和许多其他示例。 [ASF 源代码文档](http://asf.atmel.com/docs/latest/sam.drivers.usart.usart_synchronous_example.sam4s_xplained/html/sam_usart_quickstart.html)它使用 USART0，我知道您想使用 USART1。但仍然是一个很好的参考。

希望这可以帮助

# apache-flex - 从 Flex Chart 获取系列的标题/颜色

> ID：14280056
> 
> 赞同：0
> 
> 时间：2013-01-11T14:21:20.510
> 
> 标签：apache-flex, charts

我已经在 flex 中创建了一个图表，现​​在我需要获取该系列的标签和颜色，但我找不到这样做的方法。你知道找回它们的方法吗？

我知道我可以使用 Legend Control，但我不需要它。我只需要获得一个带有系列标签和颜色的数组集合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:31:42.520

找到了答案..这就是我用来从第一个系列（lineseries） myChart.legendData[0].element.getStyle('lineStroke');

# objective-c - if 语句，更快的方法？

> ID：14280059
> 
> 赞同：0
> 
> 时间：2013-01-11T14:21:31.263
> 
> 标签：objective-c, xcode, if-statement, coding-style

我知道这可以更快，但我没有多年的编码经验，所以我只是在努力学习..

我做了一个函数来检查一个字符串是否不是 "" 如果没有将它添加到一个 nsurl 然后我检查 nsurl 是否不是 nil 并将它添加到一个可变数组中：

```
-(void)CheckUrls
{    
self.items = [NSMutableArray array];

NSURL *URL1 ;
NSURL *URL2 ;
NSURL *URL3 ;
NSURL *URL4 ;
NSURL *URL5 ;
NSURL *URL6 ;

NSLog(@" FOTO 1: %@ \n FOTO2 : %@ \n FOTO 3 : %@ \n FOTO 4 : %@ \n FOTO 5: %@ \n FOTO 6: %@ \n",self.searchResult.foto1,self.searchResult.foto2,self.searchResult.foto3,self.searchResult.foto4,self.searchResult.foto5,self.searchResult.foto6);

if (![self.searchResult.foto1 isEqualToString:@""]) {
    URL1 = [NSURL URLWithString:self.searchResult.foto1];

}
if (![self.searchResult.foto2 isEqualToString:@""]) {
    URL2 = [NSURL URLWithString:self.searchResult.foto2];

}
if (![self.searchResult.foto3 isEqualToString:@""]) {
    URL3 = [NSURL URLWithString:self.searchResult.foto3];

}
if (![self.searchResult.foto4 isEqualToString:@""]) {
    URL4 = [NSURL URLWithString:self.searchResult.foto4];

}
if (![self.searchResult.foto5 isEqualToString:@""]) {
    URL5 = [NSURL URLWithString:self.searchResult.foto5];

}
if (![self.searchResult.foto6 isEqualToString:@""]) {
    URL6 = [NSURL URLWithString:self.searchResult.foto6];

}

if (URL1 !=NULL) {
    [items addObject:URL1];
}

if (URL2 !=NULL) {
    [items addObject:URL2];
}
if (URL3 !=NULL) {
    [items addObject:URL3];
}
if (URL4 !=NULL) {
    [items addObject:URL4];
}
if (URL5 !=NULL) {
    [items addObject:URL5];
}
if (URL6 !=NULL) {
    [items addObject:URL6];
} 
```

这个功能可以优化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:29:06.037

```
NSArray* photosToCheck = [NSArray arrayWithObjects:
  self.searchResult.foto1, self.searchResult.foto2, self.searchResult.foto3, self.searchResult.foto4, self.searchResult.foto5, self.searchResult.foto6, nil];

for (NSString* photo in photosToCheck) {
    if (photo.length > 0) {
        NSURL* photoUrl = [NSURL URLWithString:photo];
        [items addObject:photoUrl];
    }
} 
```

但是，拥有名为`foto1`, `foto2`, ... 的属性会立即告诉我们应该使用数组来保存数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:28:49.017

如果您正好有 6 张照片，请保持原样。
否则使用 URL 数组，并循环遍历它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:29:11.107

与空字符串进行比较相当于测试字符串是否为零长度。它不会在 CPU 时间方面节省太多，但至少更容易阅读。您还可以在设置 URL 时将它们存储在数组中，因此以后无需对其进行测试：

```
if ([self.searchResult.foto1 length] > 0) {
    URL1 = [NSURL URLWithString:self.searchResult.foto1];
    [items addObject:URL1];
}
if ([self.searchResult.foto2 length] > 0) {
    URL2 = [NSURL URLWithString:self.searchResult.foto2];
    [items addObject:URL2];
}
// etc. 
```

如果您实际上不使用`URL1`etc，您可以将它们直接放入数组中：

```
if ([self.searchResult.foto1 length] > 0) {
    [items addObject:[NSURL URLWithString:self.searchResult.foto1]];
}
// etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:53:59.937

使 self.searchResults 成为一个 NSArray 的字符串，无论您在哪里为照片赋值

有两种方法可以执行循环

```
for(NSInteger x = 0;x<100;x++) 
```

在这种情况下，它将循环直到条件为假 x 大于 99 或

```
for(NSObject *key in anArrayOfObjects) 
```

它将遍历数组中的每个对象

空值检查总是一个好主意， (NSString *) 将 [NSNull null] 类型转换为空 NSString

```
url != (NSString *)[NSNull null] 
```

您不需要中间 NSURL，因为您已经知道 foto 值是空还是 null，因此您可以立即将对象作为新的 NSURL 放入项目数组中

```
[items addObject:[NSURL URLWithString:url]]; 
```

最终代码

```
-(void)CheckUrls
{    
    self.items = [NSMutableArray array];

    for(NSString *url in self.searchResult){
        if( url != (NSString *)[NSNull null] && ![url isEqualToString:@""] ){
            [items addObject:[NSURL URLWithString:url]];
        }
    }
} 
```

# oracle - 使用实体框架时不写入默认值

> ID：14280062
> 
> 赞同：2
> 
> 时间：2013-01-11T14:21:55.280
> 
> 标签：oracle, entity-framework, default-value

我有一个简单的表，其中包含 ID、REGDATE 和 EVENT_NAME 列。我已将 SYSDATE 设置为 REGDATE 列的默认值。如果我从 SQL Developer 插入一条记录，当前日期将写入 REGDATE 列。但是，如果我插入一条带有 Entity Framework REGDATE 列的记录有 NULL。使用实体框架时数据库默认值不工作吗？我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:30:42.250

你可以设置该属性，`StoreGeneratedpattern`然后`Computed`EF不会更新它，但你也不能。此方法将解决您在列上的 Db 默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:32:45.593

您可以做到这一点的一种方法是在您的类中使用构造函数来在您实例化该类型的新对象时自动设置该默认值。这类似于 Ladislav 对[这个 SO question](https://stackoverflow.com/questions/6273303/entity-framework-default-value-for-property-using-data-annotations)的回答。

# mysql - 使用 group by 时合并两个查询

> ID：14280063
> 
> 赞同：4
> 
> 时间：2013-01-11T14:21:56.777
> 
> 标签：mysql, sql

在弄清楚这其中的逻辑时遇到了一些麻烦。请参阅下面的两个查询：

查询一：

```
SELECT cId, crId, COUNT(EventType)
FROM Data
WHERE EventType='0' OR EventType='0p' OR EventType='n' OR EventType = 'np'
GROUP BY crId; 
```

查询 2：

```
SELECT cId, crId, COUNT(EventType) AS Clicks
FROM Data
WHERE EventType='c'
GROUP BY crId; 
```

只是想知道是否有一种方法可以使我在查询 2 结束时获得的列出现在查询 1 中。由于 where 语句不同，因此不确定该去哪里，以及我刚刚编写的任何子查询没有奏效。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:29:07.347

```
SELECT cId, crId, 
SUM(CASE WHEN EventType='0' OR EventType='0p' OR EventType='n' OR EventType = 'np' THEN 1 ELSE 0 END) AS Count_1,
SUM(CASE WHEN EventType='c' THEN 1 ELSE 0 END) AS Count_2
FROM Data
WHERE EventType IN ('0','0p','n','np','c')
GROUP BY crId; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:26:37.097

您可以将两者结合起来，将第二个用作相关子查询。

```
SELECT 
  Data.cId, 
  Data.crId, 
  COUNT(EventType) AS event_type_count,
  click_counts.Clicks
FROM 
  Data
  /* Correlated subquery retrieves the Clicks (EventType 'c') per cId */
  LEFT JOIN  (
    SELECT cId, crId, COUNT(EventType) AS Clicks
    FROM Data
    WHERE EventType='c'
    GROUP BY crId
  ) AS click_count ON Data.cId = click_count.cId AND Data.crId = click_count.crId
/* OR chain replaced with IN() clause */
WHERE Data.EventType IN ('0','0p','n','np')
/* This GROUP BY should probably also include Data.cId... */
GROUP BY Data.crId; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T14:31:28.170

您可以从表中查询一次并使用`CASE`语句来完成所有这些操作。

```
SELECT  cId, crId, 
        SUM(CASE WHEN EventType IN ('0', '0p', 'n', 'np') THEN 1 ELSE 0 END) as events,
        SUM(CASE WHEN EventType = 'c' THEN 1 ELSE 0 END) as clicks
FROM    Data
WHERE   EventType IN ('0', '0p', 'n', 'np', 'c')
GROUP BY crId; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:25:03.127

你想用`IN`吗？

```
SELECT cId, crId, COUNT(EventType) as Clicks
FROM Data 

WHERE EventType IN ('0','0p','n','np','c') 
GROUP BY crId; 
```

* * *

:) 让自己朝着正确的方向前进 ;)

[sqlfiddle 演示](http://sqlfiddle.com/#!2/6c059/7)

```
select id, crid, 
 count(case when type <> 'c' 
       then crid end) count_others,
 count(case when type ='c' 
       then crid end) count_c
 from tb
 group by crid
 ; 
```

# c++ - 带有证书验证的本机 C++ HTTPS REST 调用

> ID：14280067
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:22:06.583
> 
> 标签：c++, linux, rest, ssl, https

哪个库最适合用于此目的？目标平台是Linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:47:26.510

我选择了[libcurl](http://curl.haxx.se/)，因此它通过 SSL 证书验证来强制执行。关于 REST，我也可以发送 GET 和 POST 请求。但是它是 C 而不是 C++ 库。但这对我来说并没有太大的区别，因为语法很清楚，而且有很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:26:08.727

很难说最好，但我成功地使用了 Qt (QNetworkAccessManager) 和 Qt JSON Parser。

# javascript - Knockout.js 预种子 ObservableArray

> ID：14280078
> 
> 赞同：4
> 
> 时间：2013-01-11T14:22:30.477
> 
> 标签：javascript, asp.net-mvc, knockout.js

我不确定我是否在这里尝试做太多事情，但这是场景。我有一个 asp.net mvc 页面，在第一次加载时，它使用 mvc 框架中的标准 foreach 机制在视图中返回一个数据表。如果用户启用了 javascript，我想使用敲除来更新表格。有没有办法让淘汰赛从 dom 表中读取数据并将该数据用作初始可观察集合。从那时起，我会使用 knockout 和 ajax 来添加、编辑或删除数据。

简而言之，我需要将一个 html 表解析为一个淘汰赛 observable 集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:56:03.290

如何只用数据提供你的可观察数组而不是解析 html 表

```
myArray: ko.observableArray(@Html.Raw(Json.Encode(Model.myTableData))) 
```

如果真的需要去解析html的方式，可以使用下面的代码

```
var tableData = $('#myTable tr').map(function(){
return [
    $('td,th',this).map(function(){
        return $(this).text();
    }).get()
];
}).get();
$(document).ready(function() {
    var myData = JSON.stringify(tableData);
    alert(myData)
}); 
```

这是一个显示实际代码的小提琴：http: [//jsfiddle.net/FWCXH/](http://jsfiddle.net/FWCXH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:00:22.807

我已经开始编写代码了：

这是基本标记：

```
<table id="table" data-bind="template: { name: 'table-template' }">
  <thead>
    <tr>
      <th>Name</th>
      <th>Surname</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Richard</td>
      <td>Willis</td>
    </tr>
    <tr>
      <td>John</td>
      <td>Smith</td>
    </tr>
  </tbody>
</table>

<!-- Here is the template we'll use for re-building the table -->

<script type="text/html" id="table-template">
  <thead>
    <tr>
      <th>Name</th>
      <th>Surname</th>
    </tr>
  </thead>
  <tbody data-bind="foreach: data">
    <tr>
      <td data-bind="text: name"></td>
      <td data-bind="text: surname"></td>
    </tr>
  </tbody>
</script> 
```

Javascript：

```
(function() {

  function getTableData() {
    // http://johndyer.name/html-table-to-json/

    var table = document.getElementById('table');
    var data = [];
    var headers = [];

    for (var i = 0; i < table.rows[0].cells.length; i++) { 
      headers[i] = table.rows[0].cells[i].innerHTML.toLowerCase().replace(/ /gi, '');
    }
    // go through cells 
    for (var i = 1; i < table.rows.length; i++) {
      var tableRow = table.rows[i];
      var rowData = {};
      for (var j = 0; j < tableRow.cells.length; j++) {
        rowData[headers[j]] = tableRow.cells[j].innerHTML;
      }
      data.push(rowData);
    }

    return data;     
  }

  var Vm = function () {  
    this.data = ko.observableArray(getTableData());     
  };

  ko.applyBindings(new Vm(), document.getElementById('table'));
})(); 
```

您可以使用映射插件扩展此概念，为每一行创建 observable：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

在此处查看演示：http: [//jsfiddle.net/CShqK/1/](http://jsfiddle.net/CShqK/1/)

编辑：我并不是说这是最好的方法，因为遍历一个大表来获取数据可能会很昂贵。我可能会按照此线程中其他人的建议在页面中输出 JSON。

# android - 如何在android中停止（杀死）AsyncTask

> ID：14280080
> 
> 赞同：4
> 
> 时间：2013-01-11T14:22:37.900
> 
> 标签：android, gridview, asynchronous

嗨，我是 android 新手：

我在 GridView 中显示图像缩略图。为了获得更好的性能，我异步加载它。

我的 AsyncTask 是：

```
class BitmapWorkerTask extends AsyncTask<Integer, Void, Bitmap> {
        private final WeakReference<ImageView> imageViewReference;
        private int data = 0;
        private String image_path;

        public BitmapWorkerTask(ImageView imageView) {
            imageViewReference = new WeakReference<ImageView>(imageView);
        }

        @Override
        protected Bitmap doInBackground(Integer... params) {
            data = params[0];
            Bitmap picture = BitmapFactory.decodeFile(image_path);
            int width = picture.getWidth();
            int height = picture.getHeight();
            float aspectRatio = (float) width / (float) height;
            int newWidth = 98;
            int newHeight = (int) (98 / aspectRatio);
            return picture = Bitmap.createScaledBitmap(picture, newWidth,
                    newHeight, true);

        }

        @Override
        protected void onPostExecute(Bitmap bitmap) {
            if (imageViewReference != null && bitmap != null) {
                final ImageView imageView = imageViewReference.get();
                if (imageView != null) {
                    imageView.setImageBitmap(bitmap);
                }

            }
        }

        public void onDismiss(DialogInterface dialog) {
            this.cancel(true);
        }
    } 
```

和调用形式：

```
public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater layoutInflater = (LayoutInflater) ctx
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        ListRowHolder listRowHolder;
        if (convertView == null) {
            convertView = layoutInflater.inflate(R.layout.ll_sponsor_list_item,
                    parent, false);
            listRowHolder = new ListRowHolder();
            listRowHolder.imgSponsor = (ImageView) convertView
                    .findViewById(R.id.imggrid_item_image);
            convertView.setTag(listRowHolder);

        } else {
            listRowHolder = (ListRowHolder) convertView.getTag();
        }
        try {
            BitmapWorkerTask task = new BitmapWorkerTask(
                    listRowHolder.imgSponsor);
            task.image_path = ImageName.get(position);
            task.execute(1);

        } catch (Exception e) {
            Toast.makeText(ctx, e + "", Toast.LENGTH_SHORT).show();
        }

        return convertView;
    } 
```

这里的问题是即使我点击后退按钮，任务也在后台运行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T14:27:36.627

用于[`cancel()`](http://developer.android.com/reference/android/os/AsyncTask.html#cancel(boolean))停止`AsyncTask`：

```
task.cancel(true); 
```

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的文档在“取消任务”部分提供了一些额外的细节：

> 可以通过调用[cancel(boolean) 随时](/reference/android/os/AsyncTask.html#cancel(boolean))取消任务。调用此方法将导致对[isCancelled()](/reference/android/os/AsyncTask.html#isCancelled())的后续调用返回 true。调用此方法后，将在[doInBackground(Object[])](/reference/android/os/AsyncTask.html#doInBackground(Params...))返回后调用 onCancelled( [Object)](/reference/android/os/AsyncTask.html#onCancelled(Result))，而不是 [onPostExecute(Object) 。](/reference/android/os/AsyncTask.html#onPostExecute(Result))为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从[doInBackground(Object[])](/reference/android/os/AsyncTask.html#doInBackground(Params...))定期检查[isCancelled()的返回值。](/reference/android/os/AsyncTask.html#isCancelled())

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T14:33:08.853

首先，您需要保留对您执行的每个异步任务的引用。当活动暂停时，您应该遍历对 asynctask 的引用并使用[cancel()](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)取消它们。您还应该在每个异步任务上调用[get() 。](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)这将确保 UI 线程等到异步任务完成后再更改活动。

如果您希望异步任务的线程被中断，请使用 cancel(true)，或者使用 cancel(false)，并且在您的 doInBackground() 方法中，您应该检查[isCancelled()](http://developer.android.com/reference/android/os/AsyncTask.html#isCancelled%28%29)并返回。

为了安全起见，您必须非常小心异步任务。查看[这篇](http://www.shanekirk.com/2012/04/asynctask-missteps/)关于安全处理它们的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:26:33.297

做这样的事情

```
private class myAsyncTask extends AsyncTask<Void, String, Void> {
          private boolean isTaskCancelled = false;

          public void cancelTask(){
               isTaskCancelled = true;
          }

          private boolean isTaskCancelled(){
               return isTaskCancelled;
          }

          protected Void doInBackground( Void... ignoredParams ) {
            //Do some stuff
             if (isTaskCancelled()){
                return;
             }
          }

          protected void onPostExecute( Void array )
          {
           //Do something
          }

          protected void onProgressUpdate(String... values)
          {
           //Do something
          }
    } 
```

当您按下 Activity 时，将 asynctask 置于取消模式，这样它将停止执行。

**检查您在 asynctask 中执行的每个步骤中的取消方法，以在下一行停止它**

# log4j - Log4J - 禁用特定类的日志记录 - 多个附加程序

> ID：14280087
> 
> 赞同：0
> 
> 时间：2013-01-11T14:22:57.813
> 
> 标签：log4j

我将 Log4J 设置为使用多个附加程序。这工作正常。但是，我想将默认日志级别设置为 DEBUG 的一个附加程序，并将特定类的日志记录限制为 INFO 及更高版本。我想出的适用于 FA 附加程序，但不适用于 DCSLOAD 和 DCSPROC 附加程序。我究竟做错了什么？

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger = CA, FA

# CA is set to be a ConsoleAppender.
log4j.appender.CA=org.apache.log4j.ConsoleAppender

# CA uses PatternLayout.
log4j.appender.CA.layout=org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5p %c{3} %x - %m%n

# FA uses PatternLayout.
log4j.appender.FA=org.apache.log4j.RollingFileAppender 
log4j.appender.FA.File=${catalina.base}/logs/dcs.log 
log4j.appender.FA.layout=org.apache.log4j.PatternLayout 
log4j.appender.FA.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5p %c{3} %x - %m%n
log4j.appender.FA.MaxFileSize=1024KB
log4j.appender.FA.MaxBackupIndex=100

# DCSPROC, DCSLOAD and DCSDB are all File Appenders to different targets
log4j.appender.DCSPROC=org.apache.log4j.RollingFileAppender
log4j.appender.DCSPROC.File=${catalina.base}/logs/dcs_process.log 
log4j.appender.DCSPROC.layout=org.apache.log4j.PatternLayout 
log4j.appender.DCSPROC.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5p %c{3} %x - %m%n
log4j.appender.DCSPROC.MaxFileSize=1024KB
log4j.appender.DCSPROC.MaxBackupIndex=100

log4j.appender.DCSLOAD=org.apache.log4j.RollingFileAppender
log4j.appender.DCSLOAD.File=${catalina.base}/logs/dcs_business.log 
log4j.appender.DCSLOAD.layout=org.apache.log4j.PatternLayout 
log4j.appender.DCSLOAD.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5p %c{3} %x - %m%n
log4j.appender.DCSLOAD.MaxFileSize=1024KB
log4j.appender.DCSLOAD.MaxBackupIndex=100

log4j.appender.DCSDB=org.apache.log4j.RollingFileAppender
log4j.appender.DCSDB.File=${catalina.base}/logs/dcs_database.log 
log4j.appender.DCSDB.layout=org.apache.log4j.PatternLayout 
log4j.appender.DCSDB.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5p %c{3} %x - %m%n
log4j.appender.DCSDB.MaxFileSize=1024KB
log4j.appender.DCSDB.MaxBackupIndex=100

# set default logging level for outputs
log4j.logger.CA = DEBUG
log4j.logger.FA = DEBUG

log4j.logger.DCSDB = DEBUG, DCSDB
log4j.logger.DCSPROC = DEBUG, DCSPROC
log4j.logger.DCSLOAD = DEBUG, DCSLOAD

log4j.additivity.DCSDB=false
log4j.additivity.DCSPROC=false
log4j.additivity.DCSLOAD=false

#This works
log4j.logger.LoginServlet=INFO, FA

#These two do not  
log4j.logger.LoginServlet=INFO, DCSLOAD
log4j.logger.LoginServlet=INFO, DCSPROC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:35:07.920

改变这些：</p>

```
 log4j.logger.DCSDB = DEBUG, DCSDB
    log4j.logger.DCSPROC = DEBUG, DCSPROC
    log4j.logger.DCSLOAD = DEBUG, DCSLOAD 
```

至

```
 log4j.logger.DCSDB = DEBUG
    log4j.logger.DCSPROC = DEBUG
    log4j.logger.DCSLOAD = DEBUG 
```

# sql - 使用 select 动态设置 IDMultilingual 值

> ID：14280090
> 
> 赞同：1
> 
> 时间：2013-01-11T14:23:08.870
> 
> 标签：sql

在我的`INNER JOIN`子句中，我想`IDMultilingual`使用 select 语句动态设置列值。我必须使用`IN`从句，我可以使用`EXISTS`从句吗？

```
INNER JOIN  MLTA ON MLTA.IDObject = MSR.idobject 
        AND MLTA.IDObjectType = 15
        AND MLTA.IDMultilingual = SELECT ID 
                                  FROM   MLA 
                                  WHERE  Columnname = 'SHOW' 
                                  AND    Tablename = 'Category' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:25:58.373

使用新别名`JOIN`向同一个表中添加一个额外的。`MLTA`就像是：

```
...
INNER JOIN MLTA   m  ON m.IDObject       = MSR.idobject 
                    AND m.IDObjectType   = 15
INNER JOIN MLTA  m2  ON m.IDMultilingual = m2.ID     ---<<<<<<<<<<<<<<<<<<<<<<<
.... 
```

但是，您可以`IN`像这样使用谓词：

```
....
INNER JOIN  MLTA ON MLTA.IDObject = MSR.idobject 
        AND MLTA.IDObjectType = 15
WHERE MLTA.IDMultilingual IN(SELECT ID 
                             from MLA 
                             WHERE Columnname = 'SHOW' 
                               AND Tablename = 'Category'); 
```

或谓词以相同的方式，并且对于 column 的值，`EXISTS`它可能比`IN`谓词更安全。`NULL``ID`

# python - 按组连接字符串python

> ID：14280092
> 
> 赞同：3
> 
> 时间：2013-01-11T14:23:14.643
> 
> 标签：python, string, group-by, string-concatenation

我想将一个字符串列表连接成按列表中的值分组的新字符串。这是我的意思的一个例子：

**输入**

```
key = ['1','2','2','3']
data = ['a','b','c','d'] 
```

**结果**

```
newkey = ['1','2','3']
newdata = ['a','b c','d'] 
```

我了解如何加入文本。但我不知道如何正确迭代列表的值以聚合相同键值共有的字符串。

任何帮助或建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T14:27:05.820

```
from collections import defaultdict

d = defaultdict(list)

for k, v in zip(key, data):
    d[k].append(v)

print [(k, ' '.join(v)) for k, v in d.items()] 
```

输出：

```
[('1', 'a'), ('3', 'd'), ('2', 'b c')] 
```

以及如何获取新列表：

```
newkey, newvalue = d.keys(), [' '.join(v) for v in d.values()] 
```

并保存订单：

```
newkey, newvalue = zip(*[(k, ' '.join(d.pop(k))) for k in key if k in d]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:27:01.047

使用`itertools.groupby()`功能组合元素；zip 将允许您将两个输入列表分组为两个输出列表：

```
import itertools
import operator

newkey, newdata = [], []
for key, items in itertools.groupby(zip(key, data), key=operator.itemgetter(0)):
    # key is the grouped key, items an iterable of key, data pairs
    newkey.append(key)
    newdata.append(' '.join(d for k, d in items)) 
```

你可以把它变成一个更`zip()`神奇的列表理解：

```
from itertools import groupby
from operator import itemgetter

newkey, newdata = zip(*[(k, ' '.join(d for _, d in it)) for k, it in groupby(zip(key, data), key=itemgetter(0))]) 
```

请注意，这确实需要对输入进行排序；`groupby`仅根据相同的连续键对元素进行分组。另一方面，它确实保留了最初的排序顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:14:44.277

只是为了多样化，这里有一个没有任何外部库和字典的解决方案：

```
def group_vals(keys, vals):
    new_keys= sorted(set(keys))
    zipped_keys = zip(keys, keys[1:]+[''])
    zipped_vals = zip(vals, vals[1:]+[''])
    new_vals = []
    for i, (key1, key2) in enumerate(zipped_keys):
        if key1 == key2:
            new_vals.append(' '.join(zipped_vals[i]))
        else:
            new_vals.append(zipped_vals[i][0])
    return new_keys, new_vals

group_vals([1,2,2,3], ['a','b','c','d'])
# --> ([1, 2, 3], ['a', 'b c', 'd']) 
```

但我知道它很丑陋，可能不如其他解决方案那么高效。仅用于演示目的。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:26:27.457

你可以`itertools.groupby()`使用`zip(key,data)`：

```
In [128]: from itertools import *

In [129]: from operator import *

In [133]: lis=[(k," ".join(x[1] for x in g)) for k,g in groupby(zip(key,data),key=itemgetter(0))]

In [134]: newkey,newdata=zip(*lis)

In [135]: newkey
Out[135]: ('1', '2', '3')

In [136]: newdata
Out[136]: ('a', 'b c', 'd') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:31:37.120

如果您不想导入集合，您可以随时使用常规字典。

```
key = ['1','2','2','3']
data = ['a','b','c','d']
newkeydata = {}

for k,d in zip(key,data):
    newkeydata[k] = newkeydata.get(k, []).append(d) 
```

# google-maps - 在本地化地图上创建和运行您自己的算法

> ID：14280098
> 
> 赞同：1
> 
> 时间：2013-01-11T14:23:32.613
> 
> 标签：google-maps, openlayers, openstreetmap

所以这是我的问题。我计划为我的大学实施一个本地化地图，显示所有位置，如主街区、科技园等。
我不仅计划开发 GUI，而且我还想运行我自己的算法，比如找到从一个块到另一个块等（注意：该算法是我将要编写的，因为我不想将**最短**路线作为**最快**路线，但想将我自己的参数添加为权重）。
我想在本地托管地图（比如在内部系统上），并且应该能够满足实时请求（显示到最近的自助餐厅的路线）并显示当前数据（例如在校园的哪个角落发生了什么事件）。
我知道 Google Maps API 或 Openstreetmap/OpenLyers API 将使我能够构建自己的地图，但我可以在它们上运行自己的算法吗？我也可以添加我创建的元素并用我自己的替换传统的建筑/办公室组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:38:59.303

您可以执行以下操作：
1\. 从他们的网站导出部分开放街道地图。（转到导出选项卡）
2\. 在 python 中使用 ElementTree 来解析导出的 xml 数据。
3\. 使用 networkx 将解析后的数据添加到图中。
4\. 在上面运行你的算法。

# javascript - 为什么 jQuery 代码不使用原型作为方法？

> ID：14280099
> 
> 赞同：2
> 
> 时间：2013-01-11T14:23:34.113
> 
> 标签：javascript, jquery

为什么 jquery 代码（[https://github.com/jquery/jquery/blob/master/src/callbacks.js](https://github.com/jquery/jquery/blob/master/src/callbacks.js)）不使用原型作为方法？

我问这个是因为[专家建议](https://stackoverflow.com/questions/4736910/javascript-when-to-use-prototypes)出于性能原因使用原​​型作为方法（因为函数只创建一次）。

来自 jquery 代码的代码片段，

```
self = {
            // Add a callback or a collection of callbacks to the list
            add: function() {
                if ( list ) {
                    // First, we save the current length
                    var start = list.length;
                    (function add( args ) {
                        jQuery.each( args, function( _, arg ) {
                            var type = jQuery.type( arg );
                            if ( type === "function" ) {
                                if ( !options.unique || !self.has( arg ) ) {
                                    list.push( arg );
                                }
                            } else if ( arg && arg.length && type !== "string" ) {
                                // Inspect recursively
                                add( arg );
                            }
                        });
                    })( arguments );
                    // Do we need to add the callbacks to the
                    // current firing batch?
                    if ( firing ) {
                        firingLength = list.length;
                    // With memory, if we're not firing then
                    // we should call right away
                    } else if ( memory ) {
                        firingStart = start;
                        fire( memory );
                    }
                }
                return this;
            },
            // Remove a callback from the list
            remove: function() {
                if ( list ) {
                    jQuery.each( arguments, function( _, arg ) {
                        var index;
                        while( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
                            list.splice( index, 1 );
                            // Handle firing indexes
                            if ( firing ) {
                                if ( index <= firingLength ) {
                                    firingLength--;
                                }
                                if ( index <= firingIndex ) {
                                    firingIndex--;
                                }
                            }
                        }
                    });
                }
                return this;
            }, 
```

我的问题是为什么所有方法都不是成为自我对象原型的单独对象的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:24:49.810

在此处使用这些特定函数允许在闭包中嵌入特定变量（例如`list`），同时保持它们的私有性。

以标准方式使用基于原型的对象会使这些属性公开。

选择时的经验法则可能是变量连贯性的必要性。当直接的变量更改可能使对象处于无效状态时，它可能看起来更具有保护性。例如，在这里，减少列表长度可能会使索引无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:37:15.063

使用原型时，您只能访问对象的[特权/​​公共](http://javascript.crockford.com/private.html)成员。

正如我从代码中看到的，jQuery 没有将任何选项设置为回调对象的公共/特权成员，它们使用闭包来访问回调实例中的选项。如果他们初始化原型中的方法，他们将无法访问选项对象。

这是一个替代示例：

**使用原型**

```
function Callback(opt) {
    var options = opt;
}

Callback.prototype.execute = function () {
   console.log(typeof options);   //undefined
} 
```

**不使用原型**

```
function Callback(opt) {
    var options = opt;
    this.execute = function () {
       console.log(typeof options);   //object
    }
} 
```

我不能确定 jQuery 的考虑因素，但这里有几个假设：

1.  在我看来，他们不想提供对回调对象内部使用的所有内容的公共访问。

2.  使用新的。我还没有看到 jQuery 要求客户端使用`new`API 提供的初始化对象。

可以通过以下方式避免新的：

```
function Callbacks() {
    if (this === window) {
        return new Callbacks();
    }
}

Callbacks.prototype.method = function () {
    //implementation
}

var c = Callbacks(); 
```

但是很少有性能开销：

*   这是由于递归调用的开销`return new Callbacks()`。
*   另一个是因为使用`new`. 在[jsperf](http://jsperf.com/object-create-vs-constructor-vs-object-literal/12)中，您可以看到通常对象字面量比`new`.
*   而最后一个来自原型链的遍历：

    如果我使用：`c.method();`首先 JS 解释器将查看`c`for invoking的属性`method`。当然它不会在那里找到它，所以它也必须在`c`的原型中查找。

# dynamics-crm-2011 - 动态营销列表不包括静态列表？在 CRM 2011 中可能吗？

> ID：14280100
> 
> 赞同：0
> 
> 时间：2013-01-11T14:23:36.640
> 
> 标签：dynamics-crm-2011

几周前我开始学习 CRM 2011，因为我的工作需要我参与其中。我来自 SharePoint 和 SQL 背景。了解其他的 ASP.NET 或 oData 等...

我的问题是，我有动态营销列表，我们的头部营销想要使用它，但想要排除静态客户列表。我们有一些不良数据，它们正在电子邮件营销中反弹。

有什么方法可以创建动态营销列表，然后从中排除静态营销列表？任何帮助将不胜感激（链接会很棒！）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:03:39.187

我认为这是不可能的，我玩了一段时间，我能够创建一个动态营销列表，其中包含静态列表的结果，但我无法让它排除静态列表。

我的建议是在这些联系人之间找到一个共性（或创建一个，例如一个新字段或可能使用营销偏好），并将该过滤器添加到您的动态列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T14:05:38.317

这可能为时已晚，但我想让我添加我现在用于此问题的解决方案。

正如其他人所提到的，这是不可能的。这是我修复它的方法：
1\. 在 crm 中添加临时标志
2\. 创建一个基本的 Windows 表单应用程序，在其中搜索要排除的静态市场列表（下拉菜单太大）
3\. 选择后正确的静态营销列表，点击按钮，将此营销列表中所有联系人的临时标志值设置为“1”。
4\. 创建动态列表时，添加额外的条件，其中 temp 标志为 != 1。

发送活动后，将临时标志重置为 0。

# javascript - 究竟是什么充当了 Javascript 中自定义事件的触发器

> ID：14280101
> 
> 赞同：0
> 
> 时间：2013-01-11T14:23:38.370
> 
> 标签：javascript, events, triggers

我一直在阅读有关自定义事件的内容并查看了一些示例。也许我误解了自定义事件是什么以及它们是如何触发的，希望能得到一些帮助。

示例问题

当 div 的背景颜色从一种颜色变为另一种颜色时触发事件。

情况 A) 颜色会因脚本中可检测到的用户活动而发生变化，例如通过 onclick、onmouseover、onkeypress，然后我将为这些事件设置一个侦听器并做出相应的响应。这个我明白该怎么做了。

情况 B）由于无法从脚本中检测到用户活动导致颜色发生变化，例如应用到页面的新主题，那么我认为以下内容是否必要是正确的吗？

1.  我需要为颜色更改创建一个自定义事件。
2.  将事件的侦听器添加到适当的 DIV
3.  侦听器需要定期轮询 DIV 以检查颜色变化

真的是第3步，我不清楚。如果您不轮询 DIV，事件颜色更改如何触发事件？换句话说，脚本如何知道颜色发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:32:14.953

自定义事件与 DOM 事件不同，它们不会触发，因为浏览器中发生了一些交互。当编写代码的人决定让它们发生时，它们就会发生。您必须在需要时显式触发自定义事件。

例如，您可能具有类似的功能

```
function updateBackground (element, color) {
  elmenet.css('background-color', color);
  // element has to be an object that has `trigger` function on its prototype
  // like jQuery wrapped element, for example
  element.trigger('updated-background', color);
} 
```

然后每次执行此代码时，您都会`'updated-background'`在 this 的上下文中触发`element`。

**升级版**。

> 使用浏览器选项，用户可以更改字体大小、背景颜色等，即应用新主题。据我所知，javascript 中没有本机事件来处理这些，所以我需要在我的脚本中创建一个自定义事件。我想问的是如何知道自定义事件何时发生？

你发现是因为你创造了它们。您是正确的（据我所知），当用户更改字体大小/默认正文背景等时没有触发 DOM 事件。正如您所说，您可以在检测到更改时轮询正文并触发自定义事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:38:42.333

在 JavaScript 中，自定义事件只是一条消息，广播给所有事件侦听器，上面写着：“大家注意：事件 X 刚刚发生！” 任何关心该事件的侦听器都可以运行一些函数。

但是，您的自定义事件仍然需要以*某种方式*触发。[`.dispatchEvent`](https://developer.mozilla.org/en-US/docs/DOM/Creating_and_triggering_events)除非在代码中的某处调用（或[`.trigger`](http://api.jquery.com/trigger/)在 jQuery 中），否则不会触发自定义事件。您的程序必须决定何时触发该事件。如果浏览器本身没有触发事件，您可以将其用作您自己的自定义事件的提示，那么通常轮询是知道何时触发事件的唯一方法。

这里的底线是**事件只是消息**。这取决于您和您编写的代码来决定何时解雇它们。

# memory-management - 如何解决 iOS 6 上 Map 的内存问题

> ID：14280106
> 
> 赞同：8
> 
> 时间：2013-01-11T14:23:47.343
> 
> 标签：memory-management, ios6, crash, mapkit

我在 iOS 6 上创建了一个应用程序，其中显示了地图。问题是在与地图的简单交互（即捏合和平移以及拖动操作）中，内存分配会大大增加。我认为 iOS 6 中的 Mapkit 可能有一些我不知道的增强功能，所以我尝试了[Raywenderlich 的示例代码，](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)但我仍然面临同样的问题。请看一下我附上的图片。我只是将地图拖了一段时间，分配了 55MB。我已经在模拟器上对此进行了测试，但在设备上，应用程序很快就会崩溃。请在这方面以任何方式提供一些帮助！

![在此处输入图像描述](../Images/2d998c3ddcaa0215d38ab73e18b4b8d8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:14:27.870

从表面上看，这个问题似乎只在拖动和缩放时影响 iOS 6 地图。已经提出了各种热修复程序来解决此问题。但是，这似乎是一个需要 Apple 解决的错误。

在这个问题中提出了解决方案：[iOS6 MKMapView using a ton of memory, to crash the app, 还有人注意到这一点吗？](https://stackoverflow.com/questions/12641658/ios6-mkmapview-using-a-ton-of-memory-to-the-point-of-crashing-the-app-anyone-e)

编辑：关于 stackoverflow 的一些其他问题声称此问题。

1.  [使用 MKMapView 的 iOS6 应用程序可接受的“实时字节”指南](https://stackoverflow.com/questions/13340999/guide-to-acceptable-live-bytes-of-ios6-app-using-mkmapview)
2.  [MKMapView 内存使用量稳步增长](https://stackoverflow.com/questions/12904990/mkmapview-memory-usage-steadily-increasing)
3.  [MKMapView 的内存使用率很高](https://stackoverflow.com/questions/11982924/memory-usage-of-mkmapview-is-very-high)

# c# - 遍历列表并修改对象正在更新原始

> ID：14280107
> 
> 赞同：1
> 
> 时间：2013-01-11T14:23:51.960
> 
> 标签：c#, list, bindinglist

出于某种原因，我似乎无法确定我做错了什么。我尝试了几件事，每次修改原始记录。

我有一个特定班级的清单。我正在遍历列表，如果满足特定条件，我需要为此迭代创建一个重复项，修改 2 个值，然后将其添加到最终列表中。除了每次我修改我创建的副本时，原始值都会被修改。数据是设置为列表的绑定列表。

```
// MyClasses is a BindingList<MyClass>
List<MyClass> classesToSave = new List<MyClass>();
foreach (var class in MyClasses)
{
    classesToSave(class);

    if (class.NeedsDupe)
    {
        MyClass dupeClass = new MyClass();
        dupeClass = class;
        dupeClass.NeedsDupe = false;
        dupeClass.IsDupe = true;
        classesToSave(dupeClass);
    }
} 
```

假设通过第一次迭代，MyClasses 中的第一项具有 class.NeedsDupe == true 和 class.IsDupe == false。在条件命中之前将类添加到 classesToSave 时，classesToSave 中的唯一条目是原始类（class.NeedsDupe == true 和 class.IsDupe == false）。但是，当满足条件并修改 dupeClass 对象时，并且在将 dupeClass 添加到 classesToSave 之前，然后修改 classesToSave 中的原始条目（并且唯一条目）。

我完全错过了什么吗？我有一种感觉，我正在画一个大脑放屁，可能需要参考旧对象？或者我是否以某种方式复制了 BindingList 的属性，并且当我更改我认为是新对象的 dupeClass 对象时，我实际上导致更改回传？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:48:21.460

这就是类的本质，它们是引用类型。为 MyClass 创建一个复制构造函数

```
class MyClass
{
   public MyClass(MyClass myClass)
   {
       //Assign the properties here
       //this.x = myClass.x;
       //....
       //....
   }
} 
```

然后你打电话

```
MyClass dupeClass = new MyClass(@class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:26:46.630

以下几行是有问题的。dupeclass 引用该类；它们指向同一个对象。不要让它们相等，而是将 的属性设置`dupeClass`为 的属性`class`。

```
MyClass dupeClass = new MyClass();
dupeClass = class; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T14:27:40.547

在这一行中，您正在创建 MyClass 的一个新实例：

```
MyClass dupeClass = new MyClass(); 
```

但是你会立即用原来的覆盖它：

```
dupeClass = class; 
```

从那时起，`dupeClass`并且`class`都引用同一个对象，因此`dupeClass`也对`class`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:26:03.490

您正在创建一个新实例，然后将旧实例分配给它

```
MyClass dupeClass = new MyClass();
        dupeClass = class; 
```

更新您必须手动复制属性或使用反射

```
foreach (var property in oldObject.GetType().GetProperties())
            {
                var prop= newObject.GetType().GetProperty(property.Name);
                if (prop!= null)
                    prop.SetValue(newObject, property.GetValue(oldObject));
            } 
```

# backbone.js - 骨干关系：保存期间丢失的关系

> ID：14280109
> 
> 赞同：1
> 
> 时间：2013-01-11T14:23:56.277
> 
> 标签：backbone.js, backbone-relational, backbone.js-collections

今天我更新了backbone.js (0.9.2 => 0.9.9) 和backbone-relational (0.5.0 => 0.7.0)，一段代码停止工作，我不知道为什么。（我什至尝试逐步升级（例如骨干关系 0.5.0 => 0.6.0），但这并没有帮助。）

我的模型（包含几章的书）：

```
window.Book = Backbone.RelationalModel.extend({
  relations:[{
    type: Backbone.HasMany,
    key:"chapters",
    relatedModel: "Chapter",
    collectionType:"ChaptersCollection",
    reverseRelation:{
      key:"book"
    }
  }]
});

window.BookCollection = Backbone.Collection.extend({
  model: Book,
  url: "/books"
});

window.Chapter = Backbone.RelationalModel.extend();
window.ChaptersCollection = Backbone.Collection.extend({
  model: Chapter,
  url: "/chapters"
}); 
```

现在我想在现有书籍中添加一章，并在“添加”事件期间做一些事情。问题是`chapter.get("book")`，`undefined`虽然这本书是在`success`回调中返回的。但是看看你自己：

```
var book = ...;
book.get("chapters").on("add", function (chapter) {
  console.log("add");
  console.log(chapter.get("id"));
  console.log(chapter.get("book_id"));
  console.log(chapter.get("book"));
});

var chapter = book.get("chapters").create({title:"Foo"}, {
  wait: true,
  success:function () {
    console.log("success")
    console.log(chapter.get("id"));
    console.log(chapter.get("book_id"));
    console.log(chapter.get("book"));
  }
}); 
```

控制台输出：

```
> add
> 83
> 3
> null <<<<<<< Expecting a book object here, why null?
> success
> 83
> 3
> Book{...} 
```

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:13:16.897

问题似乎是当`add`为子集合触发事件时，反向关系尚未更新。我不确定 Backbone 或 Backbone.Relational 版本之间的什么变化导致了这种变化，但很容易修复。

`add`而不是像您在此处那样收听相关集合上的事件：

```
book.get("chapters").on("add", function (chapter) { 
```

[您应该按照Backbone.Relational 文档](https://github.com/PaulUithol/Backbone-relational#events)`add:<key>`中的描述监听模型本身的事件：

```
book.on("add:chapters", function (chapter) { 
```

查看[此小提琴](http://jsfiddle.net/sXXaE/7/)以获取工作示例。

# sql - 如何在存储过程中使用 SP 参数作为表名和列名

> ID：14280110
> 
> 赞同：-6
> 
> 时间：2013-01-11T14:23:55.560
> 
> 标签：sql, sql-server, tsql, stored-procedures

```
create procedure <procedure>
(
    @tbl as varchar(50)='product',
    @col as varchar(50)='proid'
)
as 
begin
    select @col from @tbl 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:27:57.550

因为默认情况下您不能使用参数化的表名或列名。你可以做到这一点的唯一方法是在字符串中创建动态 SQL，然后执行该字符串。例如，

```
create procedure <procedure>
(
    @tbl as varchar(50)='product',
    @col as varchar(50)='proid'
)
as 
begin

   Declare @SQL VarChar(1000)

   SET @SQL = 'select ' + @col + ' from ' + @tbl 
   Exec ( @SQL)
end 
```

*   [在 SQL Server 中执行动态 SQL 命令](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)

# javascript - 定义允许在文本区域字段中提交的字数

> ID：14280120
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:24:20.353
> 
> 标签：javascript, textarea, word

我有一个带有 textarea 字段的表单。我喜欢将允许的字数定义为 150 个字。

如何使用 javascript 实现这一点？

```
<form name="main" action="" method="post">
    <label>
    <span class="legend">Details: </span>(Enter a maximum of 150 words)
    <textarea name="description">

     </textarea>
    </label>
    </fieldset>
   <input type="submit" class="search" value="Submit">
 </form> 
```

我有以下似乎错误的代码。

```
<script type="text/javascript">
        function validate() {
             if (document.forms['main'].detail.value.length > 150)
              {
               document.forms['main'].detail.focus();
              alert("Detail text should be a maximum of 150 characters");
               return false;
            }     
             if (document.forms['main'].faultType[1].checked==true && (document.forms['main'].detail.value).length == 0)
            {
              document.forms['main'].detail.focus();
              alert("Enter some text that describes the fault");
              return false;
            }
             return true;
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:31:33.897

只需将您的文本拆分为`" "`，然后以这种方式计算单词：

```
function validate() {
    var main = document.forms['main'];
    if (main.detail.value.split(' ').length > 150){
        main.detail.focus();
        alert("Detail text should be a maximum of 150 words");
        return false;
    }     
    if (main.faultType[1].checked==true && main.detail.value.length == 0) {
        main.detail.focus();
        alert("Enter some text that describes the fault");
        return false;
    }
    return true;
} 
```

例如：

```
"Detail text should be a maximum of 150 words".split(' '); 
```

将返回一个`Array`这样的：

```
["Detail", "text", "should", "be", "a", "maximum", "of", "150", "words"]; 
```

它的长度是`9`，它是字符串中的单词数量。

# java - Tika 无法删除临时文件

> ID：14280128
> 
> 赞同：3
> 
> 时间：2013-01-11T14:24:49.623
> 
> 标签：java, io, garbage-collection, apache-tika, memory-mapping

在我们的应用程序中，我们使用 Apache Tika 处理文件。但是有些文件（例如 *.mov、*.mp4）是 Tika 无法处理的，因此会将相应的 *.tmp 文件留在用户的 Temp 文件夹中。经过一番研究，我发现这是一个已知的错误：[https ://issues.apache.org/jira/browse/TIKA-1040?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://issues.apache.org/jira/browse/TIKA-1040?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

在最后一条评论中，一位用户谈到了一种解决方法，但它对我不起作用：

```
final Tika tika = new Tika();
final TikaInputStream fileStream = TikaInputStream.get(/*some InputStream*/);
try {
    final String extractedString = tika.parseToString(fileStream);
    //do something with the string
} finally {
    CloseUtils.close(fileStream);
} 
```

使用上面的代码仍然会在 Temp 文件夹中留下临时文件。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:06:45.463

应该使用 File 对象而不是 InputStream 调用 get() 方法：

```
final File file = new File("c:/some_file.mov");
final TikaInputStream fileStream = TikaInputStream.get(file); 
```

Tika 仍然无法处理它，但它实际上设法删除了相应的 tmp 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:31:25.577

另一种解决方法是禁用`org.apache.tika.parser.mp4.MP4Parser`. 这里有两个解决方案：

*   [带配置](https://stackoverflow.com/a/14597077/843804)
*   [带代码](https://stackoverflow.com/a/14416836/843804)

# matlab - Matlab - 具有对比度 DICOM 的 3D 视图

> ID：14280129
> 
> 赞同：0
> 
> 时间：2013-01-11T14:25:00.197
> 
> 标签：matlab, dicom

我正在寻找一种方法来在我以 3D 渲染它们时显示我的 dicom 文件的对比度。基本上，当我使用一张图像时，对比度很好：

```
i = dicomread(t);
imshow(i) 
```

但是我正在构建一个 3D 矩阵`patch`来渲染它，并且一旦绘制对比度就会消失（它使用轮廓而不是强度，尽管我的图像使用 堆叠成 3D 矩阵`dicomread`）

有没有办法使用体素强度而不是 3D 绘图`patch`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:38:21.387

您可以使用 FEX [vol3d-v2](http://www.mathworks.com/matlabcentral/fileexchange/22940-vol3d-v2)中的以下文件。

# c++ - 高效的“滚动/移动哈希”计算（如移动平均）

> ID：14280134
> 
> 赞同：2
> 
> 时间：2013-01-11T14:25:15.593
> 
> 标签：c++, hash

我正在尝试优化一个程序，该程序需要在流的每个位置（字节）处为数据流中的恒定大小窗口计算哈希。在比可用 RAM 大得多的磁盘文件中查找重复项是必需的。目前我为每个窗口计算单独的 md5 哈希，但它花费大量时间（窗口大小为几千字节，因此每个字节的数据被处理几千次）。我想知道是否有一种方法可以在恒定（与窗口大小无关）时间内计算每个后续哈希（例如移动平均线中 1 个元素的加法和减法）？散列函数可以是任何东西，只要它不提供长散列（50-100 位就可以）并且它的计算速度相当快。

如果您指出 linux 上可用的现有库函数（如果有的话），我将不胜感激。

这是我在这里的第一个问题，所以如果我做错了什么，请多多包涵。

问候，巴托什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:06:41.123

[关于滚动散列](http://en.wikipedia.org/wiki/Rolling_hash)的维基百科文章有一个指向[ngramhashing](http://code.google.com/p/ngramhashing/)的链接，它在 C++ 中实现了一些不同的技术，包括：

*   随机 Karp-Rabin（有时称为 Rabin-Karp）
*   循环多项式哈希（也称为 Buzhash）
*   通过不可约多项式散列

（也可以在[GitHub](https://github.com/lemire/rollinghashcpp)上找到）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:33:12.757

您所描述的与重复数据删除存储中使用的基本方法非常接近。

在重复数据删除系统中，我们通常使用[Rabin 的指纹](http://www.cs.princeton.edu/courses/archive/spr05/cos598E/bib/broder93some.pdf)方法作为快速、滚动的哈希函数。然而，虽然 Rabin 指纹是良好且易于理解的碰撞特性，但它在密码学上并不安全，即**会**发生碰撞。检查例如[Bentley 等人如何。在他们的压缩方法中使用了这种方法](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=755678)。问题是您是否可以容忍以及可以容忍多少冲突。如果您可以容忍偶尔的碰撞，那么一个好的 Rabin 指纹实现可能是一个好主意。好的实现每个核心每秒可以处理超过 200 MB。

我不知道有任何几乎没有冲突（又名加密安全）并且同时滚动的方法。作为 PlasmaHH，我非常怀疑这实际上是否可行。

想想你是否可以放松你的限制。也许你可以允许错过一些重复。在这些情况下，更快的方法是可能的。

# r - 变量 a 与变量 b 存在的日期的折线图？

> ID：14280136
> 
> 赞同：0
> 
> 时间：2013-01-11T12:42:44.137
> 
> 标签：r, data-visualization

我是统计、R 和一般编程的新手，在被深入学习之前只上过一个短期课程。然而，我热衷于为自己解决问题。

我的首要任务是检查我收到的异常数据。我得到了一个包含 和 列的电子`Date`表格。我假设如果我绘制反对的每个因素，一条直线将表明没有异常，因为一次只能存在于一个地方。但是，我担心如果一个上有两个相同的，我的情节无法显示这一点。`PersonID``PlaceID``PersonID``Date``PersonID``PersonID``Date`

我使用了简单的代码：

```
require(ggplot2)
qplot(Date,PersonID) 
```

我的问题是我不确定如何将其`Date`纳入这个问题。本质上，我正在尝试检查 no 是否`PersonID`出现在多个`PlaceID`同一个中`Date`，并且已经尝试了 2 天，无法弄清楚如何将所有 3 个变量放在同一个图上。

我不是要求有人为我编写代码。我只是想知道我的思路是否正确，如果是这样，我应该如何考虑让 R 来绘制这个。有谁能够帮我？抱歉，如果这个问题相当冗长，或者张贴在错误的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:29:34.060

如果您只想知道这是否发生在数据集中，请尝试`duplicated()`。例如，假设您的数据框被称为`df`：

```
sum(duplicated(df[,c("Date","PersonID")])) 
```

将根据列`Date`和数据框中的重复数返回`PersonID`。如果它大于零，则数据中有重复项。

# iphone - 如何创建CALayer文字发光效果

> ID：14280143
> 
> 赞同：1
> 
> 时间：2013-01-11T14:25:42.907
> 
> 标签：iphone, ios, calayer, glow

我正在按照[布拉德的回答](https://stackoverflow.com/a/1230907/1506363)在我的 CALayer 文本中应用发光效果。

这是我的代码：

```
- (void)drawLayer:(CALayer *)theLayer inContext:(CGContextRef)context
{   
    UIGraphicsPushContext(context);
    UIFont *font = [UIFont fontWithName:@"Verdana" size:11.0f];

    CGRect rect = CGRectMake(theLayer.bounds.origin.x + 5, theLayer.bounds.origin.y + 5, theLayer.bounds.size.width - 10, theLayer.bounds.size.height - 10);

    NSString * textToWrite = @"Some text";         

    UIColor *color = [ UIColor colorWithRed: (100.0f)  green: (50.0)  blue:(200.0f) alpha: 1.0f ];

    CGContextSetFillColorWithColor(context, color.CGColor); //this has no effect!!!

    CGContextSetShadowWithColor(context, CGSizeMake(0.0, 0.0), 2.0f, [UIColor greenColor].CGColor);

    [textToWrite drawInRect:rect withFont:font
          lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];       

    UIGraphicsPopContext(); 
```

}

我在这里得到了体面的绿色光芒。但是我希望文本也有自己的颜色，除了发光。为此，我在这里使用颜色变量以及`CGContextSetFillColorWithColor`. 但它似乎没有任何效果。文字看起来是白色的，带有绿色的光芒。我想要主颜色=颜色和发光=绿色的文本。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:35:58.747

我对你的颜色感到困惑......我认为在objective-c中声明红色绿色和蓝色时，你设置的值最大为1.0（就像你对alpha所做的那样）所以当你给它们真正的255十六进制值时然后你除以 255。你的颜色应该是白色，因为所有 3 个值都远远高于最大值......也许我错了，虽然首先尝试这两个代码......

将您当前的 FillColorWithColor 代码替换为：

`[[UIColor colorWithCGColor:color] set];`

（或者也许这个......）

`[[UIColor colorWithCGColor:color.CGColor] set];`

如果它们不起作用，请尝试它们，同时将您的颜色代码更改为：

`UIColor *color = [ UIColor colorWithRed: (100.0f/255.0f) green: (50.0f/255.0f) blue:(200.0f/255.0f) alpha: 1.0f ];`

# javascript - 正则表达式前瞻多个元素

> ID：14280146
> 
> 赞同：2
> 
> 时间：2013-01-11T14:25:55.693
> 
> 标签：javascript, regex, regex-lookarounds

*当这些字符没有立即*遵循先行断言时，是否可以使用先行来确定一个或多个字符是否存在/不存在？

例如
给定类似于此的正则表达式：

```
([abc])([def])([ghi]) 
```

例如，如果第一组中有“a”，我是否可以只允许第三组中的“i”作为匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:40:45.460

您可以使用后向断言（除非您的目标是正则表达式引擎不支持的 JavaScript）：

```
([abc])([def])([gh]|(?<=a.)i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:33:34.180

如果要使用 OR 操作，请使用`|` Like this

```
(asd)|(zxc)|(qwe) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:36:16.140

您可以使用条件模式。

试试这个 ：

```
/((a)|(b|c))([def])(?(2)i|[gh])/ 
```

（用 PCRE 测试）

# postgresql - 如何确保在一个 select 语句中返回的一行或一系列行被排除在单独线程中对数据库的其他查询之外

> ID：14280147
> 
> 赞同：0
> 
> 时间：2013-01-11T14:25:56.003
> 
> 标签：postgresql

我有一个 PostgreSQL 9.2.2 数据库，为我的 ERP 系统提供订单。数据库表包含布尔列，指示是否在其他记录中添加了客户。我使用的代码从数据库中提取行并将它们一次发送到我们的 ERP 系统（单线程）。我的代码在这方面工作得很好；但是在过去的一年中，我们的数量已经增长到足以需要多线程解决方案。

我认为 MVCC 模式对我不起作用，因为 added_customer 列仅在成功添加客户后更新。默认的 MVCC 模式可能会导致同时处理同一行，从而导致重复的 Web 服务调用。我要避免的是对我们的 ERP 系统的重复 Web 服务调用，因为它们可能相当繁重，尽管我承认我不是 MVCC 方面的专家，也不是 PostgreSQL 提供的其他模式的专家。

我的问题是：**如何确保在一个 select 语句中返回的一行或一系列行被排除在单独线程中对数据库的其他查询之外？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:13:00.180

您可以在表格中添加一列`user_is_proccesed`。它可以保存用于更新记录的后端进程 ID。

然后使用一个小的可序列化事务将其设置`user_is_proccesed`为“锁定行以进行处理”。

就像是：

```
START TRANSACTION  ISOLATION LEVEL SERIALIZABLE;

UPDATE user_table
SET user_is_proccesed = pg_backend_pid()
WHERE <some condition>
  AND user_is_proccesed IS NULL; -- no one is proccesing it now

COMMIT; 
```

这里的关键 -`SERIALIZABLE`只有一个事务可以成功更新记录（所有其他并发`SERIALIZABLE`更新都将失败`ERROR: could not serialize access due to concurrent update`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:52:45.560

您将需要记录正在以某种方式处理行的事实。您还需要处理并发尝试，将它们标记为正在处理，并通过将它们发送到您的 ERP 系统来处理失败。

您可能会发现[SELECT ... FOR UPDATE](http://www.postgresql.org/docs/9.2/static/sql-select.html#SQL-FOR-UPDATE-SHARE)对于获取一组行并同时锁定它们以防止更新很有用。一种方法可能是让每个线程选择一个目标行，尝试将其 ID 添加到“处理”表中，然后在您更新 added_customer 的同一事务中将其删除。

如果一个线程没有获取候选行，或者插入失败，那么它只需要短暂休眠并重试。如果出现任何严重错误，那么您应该在“处理”表中留下可以检查/更正的行。

当然，另一种选择是只获取一组候选行并为每个与 ERP 通信的单独的进程/线程生成一个单独的进程/线程。这使数据库保持单线程获取，同时允许 ERP 的多个通道。

# r - 仅在顶点内显示顶点标签

> ID：14280151
> 
> 赞同：0
> 
> 时间：2013-01-11T14:26:05.067
> 
> 标签：r, igraph

我有这个数据框：

输入（df2）

```
structure(list(Receiver = structure(c(4L, 3L, 2L, 1L), .Label = c("Australia", 
"United Arab Emirates", "United Kingdom", "United States of America"
), class = "factor"), Sender = structure(c(1L, 1L, 1L, 1L), .Label = "United States of America", class = "factor")), .Names = c("Receiver", 
"Sender"), row.names = c(NA, -4L), class = "data.frame") 
```

我想这样绘制和 igraph：

```
library(igraph)
g<-graph.data.frame(df2)
plot(g, layout = layout.kamada.kawai,  vertex.label = V(g)$name,  
     vertex.label.color= "red",  edge.arrow.size=0.8,  
      edge.curved=T, edge.label.color="white",                              
      edge.label.cex=0.8,vertex.shape="circle",edge.color="pink",
      vertex.color="lightblue", asp=0, margin=0) 
```

我想在顶点内显示顶点标签，而不增加顶点的大小。任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:47:48.783

您可以在调用图之前执行以下操作：

```
 V(g)$label.cex <- 0.5 
```

但是为什么不使用名称的快捷方式呢？

```
 V(g)$name<-c('USA','UK','UAE','Aus') 
```

![在此处输入图像描述](../Images/27fc72bee656c8a715c1e4747f280798.png)

```
dat <- structure(list(Receiver = structure(c(4L, 3L, 2L, 1L), .Label = c("Australia", 
                                                                  "United Arab \nEmirates", "United \nKingdom", "United \nStates of \nAmerica"
), class = "factor"), Sender = structure(c(1L, 1L, 1L, 1L), .Label = "United \nStates of \nAmerica", class = "factor")), .Names = c("Receiver", 
                                                                                                                                "Sender"), row.names = c(NA, -4L), class = "data.frame")

library(igraph)
g<-graph.data.frame(dat)
V(g)$label.cex <- 0.6
plot(g, layout = layout.kamada.kawai,  vertex.label = V(g)$name,  
     vertex.label.color= "red",  edge.arrow.size=0.8,  
     edge.curved=T, edge.label.color="white",                              
     edge.label.cex=0.8,vertex.shape="circle",edge.color="pink",
     vertex.color="lightblue", asp=0, margin=0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-27T07:44:08.827

以下可能会有所帮助。

```
# size the network nodes based on their centrality
deg = igraph::degree(graph = g, v = V(g), mode = "all", loops = TRUE, normalized = FALSE);
igraph::V(g)$size = deg*3;

# set the label size based on the node size
igraph::V(g)$label.cex = igraph::V(g)$size/max(igraph::V(g)$size); 
```

# ios - QuickBlox“需要令牌”

> ID：14280154
> 
> 赞同：0
> 
> 时间：2013-01-11T14:26:14.533
> 
> 标签：ios, quickblox

我`QuickBlox`在我的 iOS 应用程序中使用它今天早上运行良好，但现在出现错误`Token is required`。我没有改变任何东西。

我认为这是由于以下代码。

```
 NSMutableDictionary *getRequest = [NSMutableDictionary dictionary];
[getRequest setObject:@"total" forKey:@"sort_asc"];
[QBCustomObjects objectsWithClassName:@"TopChatPoints" extendedRequest:getRequest delegate:self];

- (void)completedWithResult:(Result *)result{
// Get objects result
if(result.success && [result isKindOfClass:QBCOCustomObjectPagedResult.class]){
    QBCOCustomObjectPagedResult *getObjectsResult = (QBCOCustomObjectPagedResult *)result;
    NSLog(@"Objects: %@, count: %d", getObjectsResult.objects, getObjectsResult.count);
}else{
    NSLog(@"errors=%@", result.errors);
    }
} 
```

## 休息响应：

```
<QBASIHTTPRequest: 0xb37fc00>
headers:{
"Access-Control-Allow-Origin" = "*";
"Access-Control-Request-Method" = "*";
"Cache-Control" = "no-cache";
Connection = "keep-alive";
"Content-Length" = 106;
"Content-Type" = "application/xml; charset=utf-8";
Date = "Fri, 11 Jan 2013 14:19:40 GMT";
"QuickBlox-REST-API-Version" = "0.1.1";
Server = "nginx/1.0.15";
Status = "401 Unauthorized";
"X-Rack-Cache" = miss;
"X-Request-Id" = 6ddecf8ad894891fdc7c2b14562acc3e;
"X-Runtime" = "0.004958";
"X-UA-Compatible" = "IE=Edge,chrome=1";
}
body:<?xml version="1.0" encoding="UTF-8"?>
<errors type="array">
<error>Token is required</error>
</errors>

error:Error Domain=QBASIHTTPRequestErrorDomain Code=3 "Authentication needed" UserInfo=0xae30300 {NSLocalizedDescription=Authentication needed}
2013-01-11 19:50:06.509 Chat.Points[6832:c07] errors=(
"Token is required" 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T12:16:29.297

`[QBAuth createSessionWithDelegate:self]`在 appdelegate 中添加这个。它会

# asp.net - 配置 Visual Studio 以通过一键发布将处理程序映射发布到 IIS Web 应用程序

> ID：14280157
> 
> 赞同：1
> 
> 时间：2013-01-11T14:26:22.217
> 
> 标签：asp.net, iis-7, visual-studio-2012

每次我在 ms Visual Studio 中使用发布功能时，我的自定义处理程序映射都会被删除。我有一些 HttpHandler 项目需要部署在我的 IIS 服务器上。有没有办法配置 Visual Studio 来发布我的所有处理程序，这样我就不必每次发布时都这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:23:41.870

问题是当我真的需要 Web 服务时，我正在使用处理程序。我切换到 Web 服务，现在我不需要在每次部署时都进行处理程序映射

# java - Liferay 页面重定向

> ID：14280158
> 
> 赞同：0
> 
> 时间：2013-01-11T14:26:24.347
> 
> 标签：java, redirect, liferay, liferay-6

我在 liferay 6.1 中开发了一个主题。我有一个名为“localhost:8080/home”的页面，但现在我希望在单击页面的此链接时将其重定向到 localhost:8080

欢迎任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:14:31.850

我想你有点困惑，所以你应该知道一些事情：

1.  你不能（通常并且没有黑客）有一个名为“localhost：8080”的页面。每个页面（或 Liferay 中的“布局”）都有一个短名称，它是 url 的一部分。这通常被称为“友好 url”，但它经常与“友好 url 功能”混淆，后者是一种缩短 url 请求数据的方法。所以你总是会有像'localhost:8080/something'这样的url。“主页”页面也是如此
2.  您可以使用“虚拟主机”部分缩短 URL。它会删除页面名称之前的 url 部分（例如删除 web/guest 或 user/username ）后缀
3.  您可以使用“友好 url”功能来缩短页面名称之后的 url 部分，并包含生命周期状态信息或自定义请求参数等请求信息

# html - 如何在 Web Audio Api 中释放缓冲区？

> ID：14280163
> 
> 赞同：4
> 
> 时间：2013-01-11T14:26:32.913
> 
> 标签：html, webkit, web-audio-api

我喜欢网络音频 API。可能性非常大。话虽如此，它仍处于早期阶段。最让我担心的是，我不知道如何释放不再需要的缓冲区/声音。因为我将混合来自通过 websocket 连接的音乐家 / DJ / 主持人的现场声音，所以声音缓冲区总是带有新的声音。

以下代码模拟连续加载新缓冲区的播放。我需要网络音频 api 来添加效果混合，这样每个人都可以通过他的表演听到现场结果。

不幸的是，这段代码吃掉了整个内存并导致移动和桌面 safari 崩溃。我不知道在播放这些大缓冲区后如何释放它们，我不再需要它们。我真的需要在内存中加载新的大数据。有人知道吗？否则我会卡在播放的前 8 个文件无法再加载。

```
var context = new webkitAudioContext();
var total=0;

function onTouchStart(){
    setInterval(function(){
    total+=10;
    source = context.createBufferSource();    
    source.connect(context.destination); // simulates loading large file
    source.buffer=context.createBuffer(1, 10*1024*1024, context.sampleRate);
    source.noteOn(0);
    source.noteOff(0); // acording to w3c spec resources should be deleted immediately.
    // making source property and call delete or =null will release nether source or buffer i am desperate.
    console.log(total,'mb'); //
    },1000);
}

document.addEventListener( "touchstart", onTouchStart );
document.addEventListener( "click", onTouchStart ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:14:22.083

JavaScript 中的内存管理使用垃圾收集，这使得术语“立即”相对。直到 webkit 认为是时候释放缓冲区才真正释放。您可以通过在 Chrome 开发人员工具中进行时间线记录来查看此操作（但不确定在 Safari 中是否有任何方法可以这样做）。查看这篇文章以了解如何做到这一点：[https ://developers.google.com/chrome-developer-tools/docs/timeline](https://developers.google.com/chrome-developer-tools/docs/timeline)

此外，由于您将事件侦听器附加到文档，每次点击设备时都会开始另一轮间隔，因此如果您碰巧触摸它两次，您将创建双倍数量的缓冲区，即表示每秒 20mb。

话虽如此，您在实际播放真实文件时是否尝试过？您可能不会遇到这个问题，因为垃圾收集器将能够在文件播放时跟上。10mb 大的 mp3 或 ogg 是几分钟的音频。

希望有帮助！

# java - Java：具有toDTO方法的持久类被归类为适配器模式？

> ID：14280168
> 
> 赞同：0
> 
> 时间：2013-01-11T14:26:42.543
> 
> 标签：java, adapter, dto

如果我有一个实现方法“toDTO”的持久性类，并且该方法返回一个表示对象的 POJO，这会被归类为适配器模式吗？

请注意，这不是实现本身的问题，而是它将以何种方式分类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:34:09.390

如果 DTO 使用 Persistence 对象的活动状态，则可以将其归类为适配器；如果它制作了数据的防御性副本，丢弃了原始数据，那么它就不是适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:48:44.233

请注意，DTO 通常被归类为自身的模式。请参阅 Fowler 的[企业应用程序架构模式](http://martinfowler.com/eaaCatalog/dataTransferObject.html)。

另请参阅[此 SO question](https://stackoverflow.com/questions/1440952/why-are-data-transfer-objects-an-anti-pattern)以讨论 DTO 是一种反模式。

# php - 如果 php 变量中存在特定单词，则重定向

> ID：14280171
> 
> 赞同：0
> 
> 时间：2013-01-11T14:26:56.140
> 
> 标签：php, variables, redirect

我正在制作一个网络托管网站。我有一个文本字段，用户可以在其中输入他们想要注册的域名，例如“domain.com”或“domain.info”。我想将 .info 在其 url 中的域重定向到不同的页面，例如 www.example.com/info.php 和在其 url 中具有 .com 的域到 www.example.com/com.php，是吗可以使用php做到这一点吗？

您的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:32:01.680

是的，这是可能的。

例如，您的输入称为 name="domain"

在 php 中，您可以看到帖子：

```
if($_SERVER["REQUEST_METHOD"] == "POST") {
    $extension = end(explode($_POST["domain"]));
    header("Location: ".$extension.".php");
} 
```

这将使用 .php 重定向扩展名

请注意，这不安全！但只是朝着正确的方向推动。

更安全的选择：

```
if($_SERVER["REQUEST_METHOD"] == "POST") {
    $extension = end(explode($_POST["domain"]));
    switch($extension) {
        case 'com':
            $redirect = 'com.php';
            break;
        case 'info':
            $redirect = 'info.php';
            break;
        default :
            $redirect = 'unknown.php';
            break;
    }
    header("Location: ".$redirect);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:33:14.220

像这样的东西：

```
if(isset($_POST['domain'])){
   $arr = explode('.', $_POST['domain']);
   if($arr[1] == 'com'){
       // redirect
   }elseif($arr[1] == 'info'){
       // redirect somewhere else
   }
} 
```

这只是一个指导方针。您应该转义`$_POST`数据。

# asp.net-web-api - 修改并返回对象 .InRequestScope (Ninject)

> ID：14280174
> 
> 赞同：0
> 
> 时间：2013-01-11T14:27:06.097
> 
> 标签：asp.net-web-api, ninject

如果我通过注入请求一个对象并指定 InRequestScope，我假设它返回相同的实例，直到请求上下文发生变化。我想知道的是，如果我修改该值，下一次注入是否包含修改？

示例（伪）：

```
 // In one class
 var Obj = kernel.Get<IObjType>();
 Obj.SomeProp = "Value"

 // In another class in the same request context.
 var Obj = kernel.Get<IObjType>();
 Assert.True(Obj.SomeProp = value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:53:36.997

短：是的

Long：在同一个请求中，Ninject 将在请求范围内返回相同的对象实例。

这意味着当以下测试通过并且两个代码片段的执行顺序正确时，您的测试将通过。

```
Obj.SomeProp = "Value"
Assert.True(Obj.SomeProp == value); 
```

# iphone - 块内块 = EXC_BAD_ACCESS

> ID：14280176
> 
> 赞同：3
> 
> 时间：2013-01-11T14:27:16.333
> 
> 标签：iphone, ios, objective-c, xcode

我有一个单例类来处理所有游戏中心逻辑：

```
typedef void (^GameCenterCallbackFinishUpdating)();

- (void)getAllMatches:(GameCenterCallbackFinishUpdating)onComplete
{
    [GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error)
    {      
        //Do stuff here... 
        onComplete();
    }];
} 
```

从我使用的另一个视图控制器：

```
[[GameCenterHelper sharedHelper] getAllMatches:^{

    [self.myTableView reloadData]; 

}]; 
```

当我在应用程序中时效果很好，但是一旦我关闭应用程序（后台）然后再次启动它，我会得到：

```
 onComplete();     ---- Thread 1: EXC_BAD_ACCESS (code=2, address=0xc) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T15:25:39.513

***一些背景信息：**块是对象，如果有任何块* `nil` *并且您尝试调用它们，它会使应用程序崩溃。*

在你调用它之前，某个地方以某种方式`onComplete`变成了块。`nil`以下`if (...)`语句可帮助您防止调用`nil`指针，因此应用程序不会崩溃。

```
if (onComplete) onComplete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T10:01:31.453

感谢@holex 和@Paul.s 很好地解释了它。我有类似的情况，我将块作为方法参数（`completionHandler`）发送。

```
- (void)callX:(NSString *)xyz withCompletionHandler:(void (^)(NSString *response))completion
{
    completion(something);
} 
```

我使用这个块有两种情况，比如：

```
[MyClass sharedInstance] callX:@"abc" withCompletionHandler:^(NSString *response) {
    if (response) {
        //do something
    }
}]; 
```

或者这个块可以`nil`作为方法参数：

```
[MyClass sharedInstance] callX:@"abc" withCompletionHandler:nil]; 
```

在第二种情况下，当块作为方法参数传递时，`nil`这会导致**completion()**。因此，@holex 声明*块是对象，如果任何块为 nil 并且您尝试调用它们，它会使应用程序崩溃。* 一个 if 节省了我很多时间`EXC_BAD_ACCESS`

 ***```
- (void)callX:(NSString *)xyz withCompletionHandler:(void (^)(NSString *response))completion
{
    if (completion)
        completion(something);
} 
```

PS：这个解释只针对**`NERDS`**像我这样的人。| 'L' |***

# inno-setup - Inno 设置许可协议计时器

> ID：14280178
> 
> 赞同：1
> 
> 时间：2013-01-11T14:27:21.383
> 
> 标签：inno-setup

我目前正在使用 LicenseFile=

有没有办法将计时器添加到下一个按钮？这样，如果某个时间段还没有过去，它会询问用户是否真的阅读了协议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:21:22.333

没有内置任何东西，但您可以调用标准的 WinAPI`GetTickCount`函数：

```
function GetTickCount(): Cardinal;
external 'GetTickCount@kernel32.dll'; 
```

调用一次 from`CurPageChanged(wpLicense)`以将当前刻度值保存在全局变量中，然后再次调用它`NextButtonClicked(wpLicense)`并从旧刻度中减去新刻度以获得经过的时间。

不过有两点需要注意：

1.  仅仅因为该页面已经打开了一段时间并不意味着他们实际上已经阅读了它。

2.  我还没有测试过，但我很确定`NextButtonClick`即使他们没有选择“是”也会被调用（即代码处理程序在内部验证之前被调用）。所以你可能也想检查一下，以避免显示“你读过吗？” 当他们甚至还没有勾选是时的消息。

# c# - Lotus Domino：如何使用 Domino.dll 在通过 C# 发送的电子邮件中添加部门签名

> ID：14280180
> 
> 赞同：1
> 
> 时间：2013-01-11T14:27:29.347
> 
> 标签：c#, lotus-notes, lotus-domino

我正在编写一个程序，我可以在其中从三个不同的部门邮箱（每个使用自己的邮件服务器和 nsf 文件）发送邮件（使用 domino.dll）。所有三个部门邮箱都有一个预定义的邮件签名，例如

问候 X 部门

由于这些可以随时更改，我不想在我的程序中对签名进行硬编码，而是从邮箱/nsf 文件中提取它们并将其附加到邮件正文（或者如果有更好的方法的话）。

我整天都在寻找解决这个问题的方法，所以我的问题是：这是如何实现的？

到目前为止，我的代码与此类似：

```
public Boolean sendNotesMail(String messageText)
    {
        //Create new notes session 
        NotesSession _notesSession = new NotesSession();
        //Initialize Notes Database to null; 
        NotesDatabase _notesDataBase = null;
        //Initialize Notes Document to null; 
        NotesDocument _notesDocument = null;

        string mailServer = @"Path/DDB";
        string mailFile = @"Deparmentmail\number.nsf";

        //required for send, since its byRef and not byVal, gets set later. 
        object oItemValue = null;

        // Start the connection to Notes. Otherwise log the error and return false
        try
        {
            //Initialize Notes Session 
            _notesSession.Initialize("");
        }
        catch
        {
           //Log
        }

        // Set database from the mailServer and mailFile
        _notesDataBase = _notesSession.GetDatabase(mailServer, mailFile, false);

        //If the database is not already open then open it. 
        if (!_notesDataBase.IsOpen)
        {
            _notesDataBase.Open();
        }

        //Create the notes document 
        _notesDocument = _notesDataBase.CreateDocument();

        //Set document type 
        _notesDocument.ReplaceItemValue("Form", "Memo");

        //sent notes memo fields (To and Subject) 
        _notesDocument.ReplaceItemValue("SendTo", emailAddress);
        _notesDocument.ReplaceItemValue("Subject", subjectText);
        // Needed in order to send from a departmental mailbox
        _notesDocument.ReplaceItemValue("Principal", _notesDataBase.Title);

        //Set the body of the email. This allows you to use the appendtext 
        NotesRichTextItem _richTextItem = _notesDocument.CreateRichTextItem("Body");

        // Insert the text to the body 
        _richTextItem.AppendText(messageText);
        try
        {
            _notesDocument.Send(false, ref oItemValue);
        } 
```

}

编辑：感谢 Richard Schwartz，我的解决方案是：

```
object signature = _notesDataBase.GetProfileDocument("calendarprofile", "").GetItemValue("Signature");
String[] stringArray = ((IEnumerable)signature).Cast<object>().Select(x => x.ToString()).ToArray();
_richTextItem.AppendText(stringArray[0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:42:13.453

签名存储在 NSF 文件的配置文件中。您可以使用该方法`NotesDatabase.getProfileDocument()`访问它。这个方法有两个参数：

ProfileName：需要查找签名的profile文件名称为“calendarprofile”。（是的，没错。它实际上是许多功能的通用配置文件，但是日历开发人员首先到达那里并为其命名。;-)）

UniqueKey：将此保留为空字符串。（它传统上用于将用户名存储在共享数据库中的配置文件文档中，但不用于邮件文件的 calendarprofile 文档中。）

您访问配置文件文档中的数据的方式与在常规文档中访问它们的方式相同，例如，使用 getItem()、getItemValue() 等。对于简单的文本签名，您要查找的 NotesItem 称为“签名”。但是，我注意到还有名为“Signature_1”和“Signature_2”以及“SignatureOption”的项目。

如果您查看用于在 Notes 邮件中设置签名的首选项 UI，您将看到在简单文本和 HTML 或图形文件之间进行选择。毫无疑问，此选择将​​反映在 SignatureOption 项中，因此您可能需要先检查一下。如果您使用导入的 HTML 或图形文件，我尚未探索数据的去向，因此我无法确定它是否进入 Signature、Signature_1、Signature_2 或其他地方。但是您可以使用 NotesPeek 自行探索。你可以[在这里下载](http://www-01.ibm.com/support/docview.wss?uid=swg24005686). 它显示了 NSF 文件的树形视图。配置文件树有一个分支，您可以在那里找到日历配置文件。然后只需在 Notes 邮件首选项中使用不同的设置，看看有什么变化。（NotesPeek 不会即时获取更改。在 Notes 邮件首选项对话框中保存更改后，您必须关闭并重新打开 NotesPeek 中的配置文件才能查看更改。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:47:15.607

如果这变得太难了，并且您想要一个适用于所有邮件的标准解决方案，您可以考虑使用[此产品](http://www-304.ibm.com/partnerworld/gsd/displaysolutiondetails.do?name=Destination_z&solution=28634&lc=en)或类似产品。

# hibernate - 如何在休眠中只保存日期？

> ID：14280181
> 
> 赞同：2
> 
> 时间：2013-01-11T14:27:31.150
> 
> 标签：hibernate, hibernate-mapping

我已将 Java.util.Date 类型的属性映射到 MySQL 数据库中的表列。它保存了整个日期/时间！我怎样才能让休眠只保存日期而不是时间。我的映射是：

```
 <property name="registrationDate" type="java.util.Date">
        <column name="regDate" length="10" />
    </property> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T14:32:50.743

您必须在表中将列指定为 DateTime 类型。只需将其设为日期类型列即可。所以只会存储日期部分。

编辑：

如果您使用表自动生成，您可以按如下方式定义您的 java.util.date；

```
@Temporal(DATE)
protected java.util.Date endDate; 
```

如果您使用的是 xml 配置，则可以定义如下；

```
<basic name="myDate"/>
<temporal>DATE</temporal>
</basic> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T20:22:15.777

如果您只需要今天的日期，您可以使用。在映射类中：

```
 @Temporal(TemporalType.DATE)
    @Column(name="ROW_DATE", length=7)
    public Date getMyDate() {
        return this.rowDate;
} 
```

如果需要日期和时间，可以使用。在映射类中：

```
 @Column(name="ROW_DATE")
    public Date getMyDate() {
        return rowDate;
    } 
```

# share - 如何加快 Alfresco Share 开发

> ID：14280186
> 
> 赞同：5
> 
> 时间：2013-01-11T14:27:38.497
> 
> 标签：share, development-environment, alfresco

我正在开发并在 Share 上执行一些自定义。我的 IDE 是 Eclipse Juno，工作区由以下元素组成：

*   露天网络项目
*   扩展 Java 项目
*   共享网络项目

alfresco 和 share web 项目都部署在单独的 Tomcat 实例中，这样我可以通过仅重新启动部署 Share 的 Tomcat 实例来稍微加快我的开发任务。

我的扩展 Java 项目与 Alfresco 提出的 Eclipse 项目具有相同的结构。Y 提供的 Ant 任务，用于在 Tomcat 中编译、压缩 JavaScript 文件、打包和部署生成的 JAR 文件。

我正在开发一些新的 JavaScript 客户端小部件，这意味着每次我进行更改时，我都必须停止 Tomcat，启动 Ant 构建脚本并重新启动，因为我必须经常这样做，你可以猜到它有多痛苦正变成。我只是想知道是否有任何方法可以加快 Share 上的开发任务。Alfresco 开发团队是如何做到的？他们建立了什么样的环境？

我正在考虑创建一个新的 Ant 目标，将扩展项目的内容热部署到已部署的 Share web 项目中，当然要考虑路径；顺便说一句，该机制必须允许反向操作。那会可行吗？我们的想法是拥有与开发常规 Web 项目时类似的部署机制：当您进行任何更改时，只需按下“发布”按钮，更改就会填充到服务器中。

如果可能的话，我想知道一些技巧和想法，特别是来自 Alfresco 开发团队。

PS：我已经阅读了[https://forums.alfresco.com/en/viewtopic.php?f=47&t=44850](https://forums.alfresco.com/en/viewtopic.php?f=47&t=44850)和[https://forums.alfresco.com/en/viewtopic.php?f=48&t=18749](https://forums.alfresco.com/en/viewtopic.php?f=48&t=18749)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:30:36.530

有两件事可以大大加快速度：

*   投资 jrebel 许可证，无需重新启动服务器即可重新加载类[http://zeroturnaround.com/software/jrebel/](http://zeroturnaround.com/software/jrebel/)

*   构建将 webscripts 复制到目标文件夹并在必要时使用 curl 重新加载 webscripts 的 ant 任务。

重新加载 Alfresco Share webscript 的任务示例：

```
<target name="deploy-share-webscripts" depends="Share: Copy files" description="Refreshes the list of webscripts">
    <exec executable="curl">
    <arg value="-d"/>
    <arg value="reset=on"/>
    <arg value="http://admin:admin@${share.web.url}/page/console?reset=webscripts"/>
    </exec>
</target> 
```

附加 ant 任务的复制部分（src-dirs 在构建文件的开头被声明为属性）：

```
 <echo message="- Copying java classes" />
    <copy todir="${warWebappTargetClasses}" overwrite="false" verbose="true">
        <fileset dir="${warTargetJavaDir}" />
    </copy>

    <echo message="- Copying resource files" />
    <copy todir="${warWebappTargetClasses}" overwrite="false" verbose="true">
        <fileset dir="${warSrcResourcesDir}" >
            <include name="**/model/*"/>
            <include name="**/templates/**/*"/>
            <include name="**/custom-model-context.xml"/>
            <include name="**/web-client-config-custom.xml"/>
            <include name="**/webclient.properties"/>
            <include name="**/aka-model-resourcebundle*"/>
            <include name="log4j.properties"/>
        </fileset>
    </copy>

    <echo message="- Copying resource files from amp into war for quick deployment." />
    <copy todir="${warWebappTargetClasses}" overwrite="false" verbose="true">
        <fileset dir="${projectAmpResourcesSrcDir}" />
        <fileset dir="${projectAmpClassesDir}" />

        <fileset dir="${listmanagerAmpResourcesSrcDir}" />

    </copy>

    <echo message="- Copying config files from amp into war for quick deployment." />
    <copy todir="${warWebappTargetClasses}\alfresco\module\Project-amp\" overwrite="false" verbose="true">

        <fileset dir="${projectAmpConfigSrcDir}" />

    </copy>
</target> 
```

我使用 maven alfresco 生命周期[http://wiki.alfresco.com/wiki/Managing_Alfresco_Lifecyle_with_Maven](http://wiki.alfresco.com/wiki/Managing_Alfresco_Lifecyle_with_Maven)进行设置，这也加快了速度。我相信这个话题可以添加很多东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T16:12:24.160

您可以通过为 tomcats 共享类加载器配置其他路径来避免将 webscripts 复制到 tomcat。这是 中的设置`tomcat/conf/catalina.properties`。我将它直接设置为项目源目录，因此不需要编译步骤。

```
shared.loader=${catalina.home}/shared/classes,${catalina.home}/shared/lib/*.jar,\
/path/to/my/dashlet/src/main/resources,\ 
```

我还具有以下设置`shared/classes/alfresco/web-extension/share-config-custom.xml`以启用模板和 web 脚本的自动刷新。

```
<alfresco-config>
    <!-- Global config section -->
    <config replace="true">
        <flags>
            <!-- Developer debugging setting - DEBUG mode for client scripts in the browser -->
            <client-debug>true</client-debug>

            <!-- LOGGING can be toggled at runtime when in DEBUG mode (Ctrl, Ctrl, Shift, Shift).
                 This flag automatically activates logging on page load. -->
            <client-debug-autologging>false</client-debug-autologging>
        </flags>
    </config>

    <config evaluator="string-compare" condition="WebFramework">
        <web-framework>
            <!-- Autowire Runtime Settings -->
            <autowire>
                <!--
                    Developers can set mode to 'production' or 'development' (to disable; SpringSurf caches,
                    FreeMarker template caching and Rhino JavaScript compilation.)
                -->
                <mode>development</mode>
            </autowire>
        </web-framework>
    </config>
</alfresco-config> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T08:31:03.497

嗯，这是我预期的 100% 工作的解决方案。在@erik-b 和@jorn-horstmann 的回答之后，我想到了这个，并考虑了我读过的一些帖子。

所以基本上我有下一个 Ant 目标，它热部署我的 Share extensions Java 项目的内容：

```
<!--
    Hot copy individual files into appropriate deployment folder (e.g. $TOMCAT_HOME/webapps/share)
-->
<target name="hotdeploy-tomcat-share" depends="clean, prepare, build-jar" description="Hot copy individual files into appropriate deployment folder (e.g. $TOMCAT_HOME/webapps/share)">
    <echo message="Generating and deploying JAR file with custom configuration files" />
    <jar destfile="${dist.dir}/${jar.name}">
        <!-- Only including configuration XML files such as share-config-custom.xml -->
        <fileset dir="${build.jar.dir}" includes="**/META-INF/*.xml" />
    </jar>
    <copy todir="${tomcat.share.deployment.path}/WEB-INF/lib">
        <fileset file="${dist.dir}/${jar.name}" />
    </copy>

    <echo message="Hot deploying Share files" />
    <copy todir="${tomcat.share.deployment.path}/WEB-INF/classes" includeEmptyDirs="false">
        <fileset dir="${build.jar.dir}">
            <patternset refid="hotdeploy-tomcat-patternset" />
        </fileset>
    </copy>
</target> 
```

必须禁用自动重新加载模块功能，否则每次执行上述 Ant 目标时，Tomcat 都会重新加载 Share 和其他部署的 Web 应用程序。另外，我相信也可以在 $TOMCAT_HOME/shared/ 目录中进行热部署，但我还没有尝试过。

我用于开发扩展的 Java 项目是这个模型项目：[http](http://code.google.com/p/share-extras/wiki/SampleProject) ://code.google.com/p/share-extras/wiki/SampleProject 。有完整的构建脚本以及所需的其他目标。

我也在我的 share-config-custom.xml 中使用它：

```
 <!-- Global config section -->
   <config replace="true">
      <flags>
         <!--
            Developer debugging setting to turn on DEBUG mode for client scripts in the browser
         -->
         <client-debug>true</client-debug>

         <!--
            LOGGING can always be toggled at runtime when in DEBUG mode (Ctrl, Ctrl, Shift, Shift).
            This flag automatically activates logging on page load.
         -->
         <client-debug-autologging>false</client-debug-autologging>
      </flags>
   </config>

   <config evaluator="string-compare" condition="WebFramework">
      <web-framework>
         <!-- SpringSurf Autowire Runtime Settings -->
         <!-- 
              Developers can set mode to 'development' to disable; SpringSurf caches,
              FreeMarker template caching and Rhino JavaScript compilation.
         -->
         <autowire>
            <!-- Pick the mode: "production" or "development" -->
            <mode>development</mode>
         </autowire>

         <!-- Allows extension modules with <auto-deploy> set to true to be automatically deployed -->
         <module-deployment>
            <mode>manual</mode>
            <enable-auto-deploy-modules>true</enable-auto-deploy-modules>
         </module-deployment>
      </web-framework>
   </config> 
```

例如，最后一个 XML 片段避免在对 FTL 页面执行任何更改后刷新 Web 脚本。

我还使用 JRebel 进行了一些测试，但根据我的经验，我会说它对 Share 开发没有多大帮助。

接下来的文章中还有一些有趣的东西：

[http://blogs.alfresco.com/wp/kevinr/2010/04/07/developer-tips-for-alfresco-share-33/](http://blogs.alfresco.com/wp/kevinr/2010/04/07/developer-tips-for-alfresco-share-33/)

[http://techblog.zabuchy.net/2012/debugging-javascript-in-alfresco/](http://techblog.zabuchy.net/2012/debugging-javascript-in-alfresco/)

希望它可以帮助别人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-09T14:35:04.297

我通常在私有实例上工作，因此我可以负担得起自己运行爆炸式应用程序，因此我可以立即看到任何更改。我只需要在更改数据模型、部署一些新的 java 支持的模块或 webscripts 或类似时重新启动 tomcat。即使其中一些也可以重新加载。

# mongodb - 外键约束的 mongoDB 替代方案

> ID：14280189
> 
> 赞同：8
> 
> 时间：2013-01-11T14:27:52.010
> 
> 标签：mongodb

我创建了一个 SQL DB 并检查了完整性。现在我想把这些表放在 mongoDB 中，我把它保存在映射规则中。表 = 集合，行 = 文档，依此类推。

但是如何在 mongoDB 中设置以下内容：

```
create table pruefen 
( MatrNr integer references Studenten on delete cascade,
  VorlNr integer references Vorlesungen,  
  PersNr integer references Professoren on delete set null,  
  Note numeric(2,1) check (Note between 0.7 and 5.0),   
  primary key (MatrNr, VorlNr)); 
```

DBRef，我试过但不是外键替代品。

如果应用程序按照它的样子接管呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-11T14:49:30.547

MongoDB 没有级联删除。当您的应用程序删除数据时，它还负责删除任何引用的对象本身以及对已删除文档的任何引用。但通常`on delete`在关系型数据库中使用时，会出现一个父对象拥有一个或多个子对象的组合情况，而子对象没有父对象就毫无意义。[在这种情况下，MongoDB 鼓励嵌入而不是引用](http://docs.mongodb.org/manual/core/data-modeling/#data-modeling-embedding)。这意味着您在父对象中创建一个数组，并将完整的子文档放入该数组中，而不是将它们保存在自己的集合中。这样，它们将与父级一起被删除，因为它们是其中的一部分。

虽然在一个字段中保留多个值在 SQL 中是绝对不行的，但在 MongoDB 中并没有错。这是因为 MongoDB 查询语言可以轻松处理数组和嵌入对象。您甚至可以在数组中的子文档的字段上创建索引，因此您可以轻松搜索嵌入在其他对象中的对象。

当您仍想从另一个集合中引用对象时，您可以使用 DBRef，也可以使用任何其他唯一标识符（唯一性是 MongoDB 可以强制执行的少数事情之一。为此，请[创建一个唯一索引使用 createIndex 命令](http://docs.mongodb.org/manual/core/indexes/)）。但是在这种情况下 MongoDB 并不强制执行一致性。您可以创建指向不存在的 ObjectIds 的 DBRefs，并且当 DBRef 指向的文档被删除时，什么都不会发生。应用程序负责确保当它删除一个文档时，所有引用它的文档都会更新。

MongoDB 也不能强制执行约束。由于 MongoDB 的无模式特性，它甚至不能为字段强制执行特定类型。同样，您的应用程序负责确保它放入 mongodb 的数据遵循特定规范。当您想要自动化此操作时，可以使用适用于 MongoDB 的许多编程语言的对象关系映射框架。

**总结一下：** MongoDB 不像 SQL 数据库那样“聪明”。它本身并没有多大作用。它做应用程序告诉它做的事情，不多也不少。但这就是它如此快速（无需昂贵的一致性检查）和灵活（无需修改数据库即可实现新功能）的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-29T14:53:25.180

关系数据库的一大优点是它非常擅长保持数据库内的数据一致。其中一种方法是使用外键。外键约束是，假设有一个表有一些列，该表将有一个外键列，其中的值来自另一个表的列。在`MongoDB`中，不能保证外键会被保留。程序员有责任确保数据以这种方式保持一致。这在未来的版本中可能是可能的，`MongoDB`但今天，没有这样的选择。外键约束的替代方法是**嵌入数据**。

# javascript - CRM 2011 表单上相同查找字段的多个查找控件实例

> ID：14280191
> 
> 赞同：0
> 
> 时间：2013-01-11T14:28:00.940
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

我有一个 CRM 2011 表单，其中包含同一查找字段的多个控件实例。这些实例中的每一个都包含在不同的**部分**中。根据类别数据字段，通过`setVisible`在 onLoad javascript 函数中的部分上适当地应用属性，在表单加载时只有一个部分可见。

在这种情况下，每次我更改可见查找字段时，具有相同控件属性的所有其他查找控件也会自动更新，即使它们被禁用且不可见。在查找字段中选择查找值时，这会导致长时间延迟。

我想要的是只更新可见的查找控件，而不是其他“不可见”的查找控件，以避免性能下降。

有没有有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:55:31.737

您可以使用html或silverlight webresource创建“假”查找，设置查找值时仅设置webresource，然后在保存记录时使用plugin或onsave javascript设置真实查找值；显示网络资源时，检索查找值并根据可见或不可见部分显示在网络资源上。

我的问题是，为什么不将查找放在始终可见的另一个部分？如果某些部分不需要该查找，那么您只需使查找部分不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:14:48.820

我遇到过同样的问题。我试过Control.setVisible(false)，没有结果。最好的解决方案是将查找字段移动到另一个部分。但我仍然相信我们可以取消传递到所有部分的查找字段的 onChange 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:01:02.113

如果我理解正确，您在一个实体表单上有 100 个不同的部分？在我看来，你的设计是错误的。我会重新审视创建 100 个不同部分的原因，而不是与 CRM 抗争，而是使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T21:05:43.890

将该控件放在一个部分中，然后当另一个部分需要该控件时使其可见。

或者不要隐藏和显示部分，隐藏和显示控件。

这些涉及更多，但它避免了您当前的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:57:03.500

我认为在这种情况下，您可以为每个部分创建单独的查找字段（只需将它们设置为相同的标签）。并使用 javascript 或新插件填充其他字段 onSave 事件。

# c# - App Current Shutdown 关闭窗口提示

> ID：14280195
> 
> 赞同：2
> 
> 时间：2013-01-11T14:28:13.010
> 
> 标签：c#, .net, wpf, windows, .net-4.5

我有一个 wpf 项目，它有几个窗口，当我从一个窗口导航到另一个窗口时，我只是隐藏一个窗口并创建另一个窗口的实例（如果尚未创建），否则只是让它可见

在所有窗口中都有窗口关闭事件处理程序

```
 private void Window_Closing_1(object sender, CancelEventArgs e)
    {
         {

        string message = "You are trying to close window " + this.Name + " .Are you sure?";
        string caption = "Exit";
        MessageBoxButton buttons = MessageBoxButton.YesNo;
        MessageBoxImage icon = MessageBoxImage.Question;
        if (MessageBox.Show(message, caption, buttons, icon) == MessageBoxResult.Yes)
        {
            App.Current.Shutdown();

        }
        else
        {
         MessageBox.Show("Closing aborted");

        }
    } 
```

但问题是这个事件存在于每个窗口中，所以当我关闭它时，其他窗口中的许多其他不可见的提示也会出现。如果我只在一个窗口中关闭，有没有办法避免其他提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:50:44.123

您是否尝试过在 App.xaml 中添加退出属性？

这将是一个更好的解决方案，因为您只需编写此确认退出代码一次。关于窗口名称，您可以将发件人投射到窗口以找出其名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:42:40.907

只需在另一个类中创建一个静态方法来处理表单的关闭。

```
public class X 
{
    private static bool isClosingHandled = false;

    public static void HandleClose()
    {
        //// app closing logic
        isClosingHandled = true;
    }
}

private void Window_Closing_1(object sender, CancelEventArgs e)
{
    X.HandleClose();   
} 
```

# joomla - 中东和非洲地图

> ID：14280201
> 
> 赞同：0
> 
> 时间：2013-01-11T14:28:28.900
> 
> 标签：joomla, joomla2.5

我正在尝试为中东和非洲地图找到一个模块，以允许我单击一个国家并根据我单击或指定的国家显示弹出文本，这将在 joomla 2.5 上使用。任何机构都可以提供此类插件或模块的名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:08:49.290

ZHGoogle 地图很好，它可以让您设置地图的初始范围（例如非洲和中东）以及添加带有您想要显示的弹出信息的点。

[http://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/maps/16900](http://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/maps/16900)

希望这可以帮助

# c# - 在启动时强制启动应用程序

> ID：14280202
> 
> 赞同：1
> 
> 时间：2013-01-11T14:28:29.203
> 
> 标签：c#

我正在为我的孩子创造一个类似信息亭的环境。我的应用程序扫描并杀死了很多游戏进程，因为他们还很年轻，无法玩 M 或以上评级的游戏，禁用任务管理器，因为他们不需要或使用它。但我需要一种方法，我可以运行这个应用程序一次，它会复制/添加自身以自动启动。谢谢 ：）

哦，不，我不想让我的应用程序成为 Windows 服务。

可以轻松编辑注册表或添加到启动文件夹的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:32:44.123

这实际上很容易做到。这是您可以用来执行此操作的两个代码片段。这会将您的程序复制到一个很少访问的文件夹中，然后使用计算机的注册表在计算机启动时打开它。

**注意**：我们使用 try 和 catch 语句以防万一，您应该始终使用它们。

```
public static void AddToRegistry()
{
       try
       {
           System.IO.File.Copy(Application.ExecutablePath, Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\ATI\" + "msceInter.exe");
           RegistryKey RegStartUp = Registry.LocalMachine.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
           RegStartUp.SetValue("msceInter", Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\ATI\" + "msceInter.exe");
       }
       catch { }
} 
```

这是添加启动（我们将文件复制到启动文件夹中，**开始按钮>所有程序>启动**是它的位置）

```
 public static void AddToStartup()
 {
       try
       {
           System.IO.File.Copy(Application.ExecutablePath, Environment.GetFolderPath(Environment.SpecialFolder.Startup) + @"\" + "msceInter.exe");
       } 
       catch { }
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T15:44:17.430

如果您不想将应用程序作为 Windows 服务运行，那么您可以考虑将应用程序注册为 ，`HKey_Current_User\Software\Microsoft\Windows\CurrentVersion\Run` 这样可以确保应用程序在启动时执行。

注册应用程序`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`将确保应用程序在启动时为所有用户执行。

```
RegistryKey registryKey = Registry.CurrentUser.OpenSubKey
            ("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
registryKey.SetValue("ApplicationName", Application.ExecutablePath); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T03:49:17.080

这是我通常用来自动将应用程序添加到启动环境的代码。它还包括一小段代码，可以绕过 UAC 保护。

```
using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Security.Principal;
using System.Windows.Forms;

public static class Program
{
    [STAThread]
    public static void Main()
    {
        if (!IsAdmin() && IsWindowsVistaOrHigher())
            RestartElevated();
        else
            AddToStartup(true);
    }

    private static Boolean IsAdmin()
    {
        WindowsIdentity identity = WindowsIdentity.GetCurrent();

        if (identity != null)
            return (new WindowsPrincipal(identity)).IsInRole(WindowsBuiltInRole.Administrator);

        return false;
    }

    private static Boolean IsWindowsVistaOrHigher()
    {
        OperatingSystem os = Environment.OSVersion;
        return ((os.Platform == PlatformID.Win32NT) && (os.Version.Major >= 6));
    }

    private static void AddToStartup(Boolean targetEveryone)
    {
        try
        {
            Environment.SpecialFolder folder = ((targetEveryone && IsWindowsVistaOrHigher()) ? Environment.SpecialFolder.CommonStartup : Environment.SpecialFolder.Startup);
            String fileDestination = Path.Combine(Environment.GetFolderPath(folder), Path.GetFileName(Application.ExecutablePath));

            if (!File.Exists(fileDestination))
                File.Copy(Application.ExecutablePath, fileDestination);
        }
        catch { }

        try
        {
            using (RegistryKey main = (targetEveryone ? Registry.LocalMachine : Registry.CurrentUser))
            {
                using (RegistryKey key = main.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true))
                {
                    String fileName = Path.GetFileNameWithoutExtension(Application.ExecutablePath);

                    if (key.GetValue(fileName) == null)
                        key.SetValue(fileName, Application.ExecutablePath);
                }
            }
        }
        catch { }
    }

    private static void RestartElevated()
    {
        String[] argumentsArray = Environment.GetCommandLineArgs();
        String argumentsLine = String.Empty;

        for (Int32 i = 1; i < argumentsArray.Length; ++i)
            argumentsLine += "\"" + argumentsArray[i] + "\" ";

        ProcessStartInfo info = new ProcessStartInfo();
        info.Arguments = argumentsLine.TrimEnd();
        info.FileName = Application.ExecutablePath;
        info.UseShellExecute = true;
        info.Verb = "runas";
        info.WorkingDirectory = Environment.CurrentDirectory;

        try
        {
            Process.Start(info);
        }
        catch { return; }

        Application.Exit();
    }
} 
```

如果您只想为 Startup 文件夹创建一个应用程序快捷方式，而不是复制整个文件，请查看[this](http://www.vbaccelerator.com/home/NET/Code/Libraries/Shell_Projects/Creating_and_Modifying_Shortcuts/article.asp)和[this](http://www.codeproject.com/Articles/146757/Add-Remove-Startup-Folder-Shortcut-to-Your-App)，因为它并不像乍一看那么简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T17:25:49.657

```
 using Microsoft.Win32;

    public partial class Form1 : Form
            {

            RegistryKey reg = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
            public Form1()
            {
                reg.SetValue("AutoRun", Application.ExecutablePath.ToString());
                InitializeComponent();
            }
    } 
```

这是一段代码，可以让它在 Windows 启动时启动。

# encryption - 填充无效，无法通过 Rijndael 解密移除

> ID：14280207
> 
> 赞同：1
> 
> 时间：2013-01-11T14:28:36.367
> 
> 标签：encryption, rijndael

当我调用以下方法从 Windows 应用程序解密字符串时，我看到“填充无效且无法删除”错误。字符串是从 asp.net 应用程序加密的。两个应用程序都引用同一个程序集。我能够从 asp.net 应用程序中毫无问题地加密和解密。这是我进行加密和解密的主要代码。

```
 private static byte[] EncryptHelper(byte[] arrData, string Password, bool Encrypt)
    {
        //Create the SymetricAlgorithem object
        SymmetricAlgorithm myAlg = new RijndaelManaged();

        //define a salt value to derive the key.
        byte[] salt = System.Text.Encoding.ASCII.GetBytes("hjkhj877ffasah");

        //Instantiate Rfc2898DeriveBytes with the password and salt.
        Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(Password, salt);

        myAlg.Key = key.GetBytes(myAlg.KeySize / 8); 
        myAlg.IV = key.GetBytes(myAlg.BlockSize / 8); 
        myAlg.Padding = PaddingMode.PKCS7;
        //Create the ICryptoTransform Object
        ICryptoTransform encrytptor = Encrypt ? myAlg.CreateEncryptor() : myAlg.CreateDecryptor();

        //Create Memorystream to write the encrypted data
        using (MemoryStream aStream = new MemoryStream())
        {

            //Create the CryptoStream Ojbect using the aStream object
            using (CryptoStream encryptStream = new CryptoStream(aStream, encrytptor, CryptoStreamMode.Write))
            {
                //Write the contents to crypto stream
                encryptStream.Write(arrData, 0, arrData.Length);

                //Flush the cryptostream
                encryptStream.FlushFinalBlock();

                //Reposition the memorystream to write the contents to an array.
                aStream.Position = 0;

            }
            aStream.Flush();
            //Convert to an array and return
            return aStream.ToArray();

        }
    } 
```

这是我用来将纯文本从/到字节数组转换的方法

```
 private static byte[] GetBytes(string str)
    {
        byte[] bytes = new byte[str.Length * sizeof(char)];
        System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
        return bytes;
    }

    private static string GetString(byte[] bytes)
    {
        char[] chars = new char[bytes.Length / sizeof(char)];
        System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
        return new string(chars);
    } 
```

为了将密文保存到数据库，我使用 Convert.ToBase64String() 和 Convert.FromBase64String。问题出在我使用 Rfc2898DeriveBytes 类的方式上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:43:28.147

好吧，我认为重要的是要提一下，从安全角度来看，对于具有相同密码的每条消息，您将拥有相同的 IV，而可预测的 IV 是一个非常**大**的禁忌。

在那之后，我有点不想多看它，看看出了什么问题，stackoverflow 上有很多非常糟糕的剪切和粘贴 C# 加密，他们只是坐在那里，没有更新机制，没有人看除了人们发现它们再次剪切和粘贴之外。

查看[字符串对称认证加密的现代示例。＃](https://stackoverflow.com/a/10366194/637783)。

我尽量保持最新并进行审查。

# objective-c - CoreMIDI 制造商预设

> ID：14280210
> 
> 赞同：1
> 
> 时间：2013-01-11T14:28:47.133
> 
> 标签：objective-c, cocoa, audio, core-audio, coremidi

我用 CoreMIDI 构建了一个虚拟 MIDI 控制器，并希望为 ControlChange 导入制造商预设（即 cc 值、与 cc 编号关联的效果名称、预设名称等）。有没有一种简单的方法可以做到这一点，还是我需要对这些信息进行硬编码？我在 MMA 网站上找到了 MIDI 制造商 ID，这可以用来获取虚拟乐器中的特定数据吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:01:58.973

MIDI 从未提供过一种自我描述的方式。

已经努力标准化 MIDI 参数集，例如[General MIDI](http://en.wikipedia.org/wiki/General_MIDI)，以及供应商标准，例如[Yamaha XG](http://en.wikipedia.org/wiki/Yamaha_XG)和[Roland GS](http://en.wikipedia.org/wiki/Roland_GS)，但即使在来自同一供应商的乐器中，控制集也不一致。也许并不奇怪，至于这个工作，用于声音的样本数据也需要标准化 - 当然，这是乐器之间的区别。

倾向于发生的情况是，制造商以`SYSEX`完全非标准化的方式大量使用控制功能（特别是在他们*自己的*产品中）。

构建任何类型的通用 MIDI 编辑器都需要您为要控制的每个设备创建一个映射表，以描述控件及其 MIDI 映射。您通常会在每个乐器的用户手册中找到包含数据的大量 MIDI 实现图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T20:08:25.503

截至 2020 年，这可能最好通过 MIDI 能力查询来完成。参数调用可以通过 MIDI-CI 属性交换来完成。

# security - 无法通过自定义 JSF 登录表单使用编程安全性

> ID：14280213
> 
> 赞同：1
> 
> 时间：2013-01-11T14:28:58.140
> 
> 标签：security, jsf, jakarta-ee, jboss, jaas

我正在尝试做这样的事情：[https ://stackoverflow.com/a/2207147/494826](https://stackoverflow.com/a/2207147/494826)

```
<security-constraint>
        <display-name>Amministrazione</display-name>
        <web-resource-collection>
            <web-resource-name>wrcollAdmin</web-resource-name>
            <description/>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>admin</role-name>
            <role-name>guest</role-name>
        </auth-constraint>
    </security-constraint>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Risorse</web-resource-name>
            <url-pattern>/javax.faces.resource/*</url-pattern>
        </web-resource-collection>
        <!-- No Auth Contraint! -->
    </security-constraint>

    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/login.htm</form-login-page>
            <form-error-page>/loginError.htm</form-error-page>
        </form-login-config>
    </login-config> 
```

我的登录 JSF 包含：

```
<h:form id="loginForm">                 
    <div class="inputlabel">
        <h:outputLabel for="j_username" value="Utente:"/>
    </div>
    <div>
        <h:inputText value="#{loginController.username}" id="j_username" size="25" />
    </div>
    <div class="inputlabel">
        <h:outputLabel for="j_password" value="Password:"/>
    </div>
    <div>
        <h:inputText value="#{loginController.password}" id="j_password" size="25" />
    </div>
    <div>
        <h:commandButton action="#{loginController.login}" value="LOGIN" />
    </div>                  
</h:form>
<h:messages styleClass="errors" />
    ... 
```

这是登录方法：

```
public void login() throws IOException {
    FacesContext context = FacesContext.getCurrentInstance();
    ExternalContext externalContext = context.getExternalContext();
    HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
    try {
        log4jLogger.info("LOGIN");
        request.login(username, password);            
        externalContext.redirect("/");
    } catch (ServletException e) {
        log4jLogger.info("DENIED");
        context.addMessage(null, new FacesMessage("Accesso Negato"));        
    }
} 
```

这不起作用，因为表单**从不**调用该`login()`方法。为什么？我想它的行为是因为 web.xml 安全配置。也许它将 loginController（命名`@ViewScoped`bean）视为受保护的资源？

第二个问题更笼统。这是实现程序安全的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:55:52.787

由于登录页面本身也被安全约束限制所覆盖，并且登录不是由 处理的`j_security_check`，因此您还需要将登录页面本身添加到允许的资源集合中。

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Risorse</web-resource-name>
        <url-pattern>/javax.faces.resource/*</url-pattern>
        <url-pattern>/login.htm</url-pattern>
    </web-resource-collection>
    <!-- No Auth Contraint! -->
</security-constraint> 
```

# knockout.js - 限制每个循环的迭代

> ID：14280219
> 
> 赞同：0
> 
> 时间：2013-01-11T14:29:11.567
> 
> 标签：knockout.js, knockout-2.0

这是我用来在每一列中生成单元格的代码块。有没有办法在前两次迭代中限制这个循环。

```
<tr data-bind="foreach: activeColumns">
   <td>
      <select data-bind = "options:$root.weightageType" style="font-size: 12px;">
      </select>       
   </td>
</tr> 
```

这里的 activecolumn 是一个可观察的数组，表示我的表的所有列。我想在除前两列之外的每一列中添加一个下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:39:10.150

您可以使用 $index 获取循环的[索引](http://knockoutjs.com/documentation/foreach-binding.html)，您可以将其与 if 一起使用以仅绑定前两个。否则，您可以使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)并在其中包含您的逻辑。

为了澄清起见，您可以创建自定义绑定并使用以下方式传递索引：

```
data-bind="text: Name, nameOfYourCustomBindingMethod: $index 
```

然后在您的自定义活页夹中，您可以使用以下方法获取索引：

```
ko.utils.unwrapObservable(valueAccessor()) 
```

# c++ - 如何使用 cv::setMouseCallback

> ID：14280220
> 
> 赞同：5
> 
> 时间：2013-01-11T14:29:17.347
> 
> 标签：c++, opencv

我正在尝试在我的 c++ 项目中使用 cv::setMouseCallback。我只是不明白。让我成为一个班级 Stuff 如何告诉这个班级你有一个框架并在这个框架上运行 cv::setMouseCallback 这是我正在尝试做的一个**例子：**

```
 class Stuff{
 public: 
Stuff();
void setFrame(cv::Mat); 
void mouse (int,int, int, int,void*);
  private :
cv::Mat frame;
int key;
 };

 Stuff::Stuff(){}

 void Stuff::setFrame(cv::Mat framex){
frame = framex;
 }

  int main (){
Stuff  obj;

cv::Mat frame = cv::imread ("examople.jpg");
char* name;
cv::imshow(name,frame);
cv::setMouseCallback(name,obj.mouse,&frame) // I' stop here because that's exactlly what just don't work 
    } 
```

这是得到的错误消息：

```
 Stuff::mouse : function call missing argument list; use '&Stuff::mouse ' to create a pointer to member 
```

真正的程序太大了，无法将其代码放在这里，这就是为什么我要简化问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:01:12.463

您必须在类中将鼠标处理程序声明为静态。例如，我有一个`dragger`with a member `mouser`，我想被调用。我声明了一个 helper `static void mouser`，它转换接收到的 void* 并调用该成员：

```
class dragger {

void mouser(int event, int x, int y) {
  current_img = original_img.clone();
  Point P(x, y);
  ...
}
static void mouser(int event, int x, int y, int, void* this_) {
  static_cast<dragger*>(this_)->mouser(event, x, y);
} 
```

`dragger`并以这种方式在构造函数中实例化

```
dragger(string w, Mat m) :
    window_id(w), status(0), original_img(m), /*black(0, 0, 0),*/ K(5, 5)
{
   ...
   setMouseCallback(w, mouser, this);
}

...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:22:28.647

首先，您需要在`main`函数中创建一个命名窗口。`namedWindow( "image", 0 );`或类似的东西可以完成这项工作。

鼠标回调函数与`frame`变量无关，但与窗口相关联。在您的情况下，它将是：

```
char* name = "image";
cv::namedWindow( name, 0 );
cv::setMousCallback(name, obj.mouse,&frame); 
```

回调是在窗口上发生事件时调用其他函数的函数。对于鼠标，事件可以是鼠标移动、左键、右键或中键。[在这里](http://opencv-srf.blogspot.ch/2011/11/mouse-events.html)您可以找到它们的列表以及很好的解释。

因此，当此“事件”发生在窗口中时，opencv 会调用`setMouseCallback`在您的情况下作为参数指定名称的函数`Stuff::mouse`。如果你这样定义函数：

```
Stuff::mouse( int event, int x, int y, int flags, void* params ) 
```

当它被调用时，事件变量将填充触发器的值，x 和 y 以及鼠标在图像上的位置等。如果你想在鼠标函数中传递帧，你可以像在[这个](https://stackoverflow.com/questions/5000721/mouse-event-handling-with-cvsetmousecallback)问题中那样使用它，如果您考虑更正 patxiska 的答案。

因此，通过开关，您可以找出它是什么类型的事件：

```
switch( event ){
    case CV_EVENT_LBUTTONDOWN:
        //...
        break;

    case CV_EVENT_RBUTTONDOWN:
        //...
        break;

    case CV_EVENT_FLAG_CTRLKEY:
        //...
        break;
} 
```

并将您的框架从`void*`后面转换为`cv::Mat`.

[在这里](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/cpp/ffilldemo.cpp)，您可以找到有关如何使用鼠标回调的 Opencv 网站的另一个示例。

希望我能帮上忙，我有一段时间没有使用 opencv 了，现在也没有我的示例源文件。回调在 Opencv GUI 中得到了简化，但这是使用任何 GUI 的逻辑。诸如鼠标和键盘触发事件之类的输入以及回调函数将事件传递给您的实现的函数。

# windows-phone-7 - Pivot 内的图像被多次下载和解码？

> ID：14280221
> 
> 赞同：2
> 
> 时间：2013-01-11T14:29:21.380
> 
> 标签：windows-phone-7, windows-phone-8

我将 Pivot 的 ItemsSource 属性设置为 3 个 URL 字符串的列表。

奇怪的事情发生：

*   使用下面的模板，ImageOpened 事件被调用 6 次而不是 3 次。
*   如果我将 BitmapImage 的 CreateOptions 设置为“BackgroundCreation”，则可以无缘无故地调用数百次 ImageOpened 事件
*   如果我将 Pivot 放在 UserControl 中并为 BitmapImage 使用“BackgroundCreation”选项，那么尽管 ImageOpened 事件被调用（数百次），但图像根本不会在 Pivot 内呈现。

同样的行为发生在 WP7 和 WP8 上。我很惊讶，因为我刚刚创建了一个 ImageGallery UserControl，它在下面使用了一个 Pivot，我想利用 BackgroundCreation 选项将解码工作卸载到后台线程，但是这样的症状似乎毫无意义:(。

1）枢轴

```
<phone:PhoneApplicationPage 
    x:Class="WP7.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <Button Tap="UIElement_OnTap">press</Button>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <controls:Pivot x:Name="gallery">
                <controls:Pivot.ItemTemplate>
                    <DataTemplate>
                        <Image>
                            <Image.Source>
                                <BitmapImage ImageOpened="BitmapImage_OnImageOpened" ImageFailed="BitmapImage_OnImageFailed" UriSource="{Binding}" CreateOptions="DelayCreation"></BitmapImage>
                            </Image.Source>
                        </Image>
                    </DataTemplate>
                </controls:Pivot.ItemTemplate>
            </controls:Pivot>

        </Grid> 
    </Grid> 
```

2) 代码隐藏

```
 public partial class MainPage : PhoneApplicationPage
    {
        int c = 0;
        List<string> list = new List<string>()
                             {
                            "http://d24w6bsrhbeh9d.cloudfront.net/photo/6298284_460s.jpg", "http://d24w6bsrhbeh9d.cloudfront.net/photo/6291760_460s.jpg", "http://d24w6bsrhbeh9d.cloudfront.net/photo/6298282_460s.jpg",  
                             }; 
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void UIElement_OnTap(object sender, GestureEventArgs e)
        {
            c = 0;
            gallery.ItemsSource = list;

        }

        private void BitmapImage_OnImageOpened(object sender, RoutedEventArgs e)
        {
            c++;
            Debug.WriteLine("opened - {0}", c);
        }

        private void BitmapImage_OnImageFailed(object sender, ExceptionRoutedEventArgs e)
        {
            Debug.WriteLine("failed");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:03:02.040

为了让您更好地了解正在发生的事情，您可以查看以下代码段：

```
private void BitmapImage_OnImageOpened(object sender, RoutedEventArgs e)
{
    BitmapImage image = (BitmapImage)sender;

    Debug.WriteLine("opened - {0}", image.UriSource.ToString());
} 
```

一开始，当您按下按钮时，您会注意到列表中的第一个图像似乎被加载了两次：

![在此处输入图像描述](../Images/afcc27efaac88fd706bba68c4d3336d7.png)

即使您删除该`DelayCreation`标志，您仍然会得到相同的结果，因为该标志是默认设置的。

![在此处输入图像描述](../Images/7425cd82f048fb41b935bfc3dd5abdc7.png)

现在，如果我们使用连接到 ad-hoc 网络的电话 WireShark 检查它会发生什么：

![在此处输入图像描述](../Images/83569be47a1f0d9fc8fcde53b9f1100c.png)

（**注意：**我在这里使用不同的图片 URL）

该图像仅下载一次，因此您本身无需担心额外的数据。您看到它触发两次的原因似乎是它为源触发一次，而另一个为图像触发。

从技术上讲，如果你这样做，也是一样的：

```
List<BitmapImage> list = new List<BitmapImage>();

// Constructor
public MainPage()
{
    InitializeComponent();

    BitmapImage image = new BitmapImage();
    image.UriSource = new Uri("http://timenerdworld.files.wordpress.com/2012/08/new-microsoft-logo.jpg");
    image.ImageOpened += image_ImageOpened;

    list.Add(image);
}

void image_ImageOpened(object sender, RoutedEventArgs e)
{
    Debug.WriteLine("opened image from bitmap");
}

private void UIElement_OnTap(object sender, GestureEventArgs e)
{
    gallery.ItemsSource = list;
}

private void BitmapImage_OnImageOpened(object sender, RoutedEventArgs e)
{
    Image image = (Image)sender;

    Debug.WriteLine("opened - {0}", ((BitmapImage)image.Source).UriSource.ToString());
} 
```

所以不，**图像没有下载两次**。

# javascript - 使用 JsonRest 存储向 OnDemandGrid 样式的 dGrid 添加实时查询？

> ID：14280222
> 
> 赞同：0
> 
> 时间：2013-01-11T14:29:23.240
> 
> 标签：javascript, dojo, dgrid

当 dGrid 由 JsonRest 存储支持时，如何实现 dijit/TextBox 过滤 OnDemandGrid 样式 dGrid 中的数据？我想在框中搜索并在我输入时更新网格。

我在 dGrid 文档中找不到任何示例，尽管这看起来就是这样 -[是否可以像在数据网格中一样过滤 dgrid 中的数据？如果是这样，怎么做？](https://stackoverflow.com/questions/12010731)- 它使用 MemoryStore 并将其换成 JsonRest 存储不起作用。

我需要查询商店然后刷新网格吗？我需要 Observable 吗？dojo.store.util.SimpleQueryEngine 呢？这是答案的一部分。

据推测，服务器上也必须进行一些更改才能响应查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:51:53.530

事实证明这很容易。您只需在网格上设置查询属性并调用 refresh()。

然后我必须对我的服务器端代码进行简单的更改来处理 ?search=whatever 查询字符串。

这是我的代码：

```
// assuming we have a declarative dijit/TextBox and a reference to our grid in myGrid                                           
// wait for DOM before wiring up our textbox (when dijit parsed)
ready( function() 
{
    var timeoutId = null,
        searchTextBox = registry.byId( 'searchTextBox' );

    searchTextBox.watch( 'value', function( name, oldValue, newValue ) 
    {
        if( newValue.length == 1 )
        {
            return;
        }   

        if( timeoutId ) 
        {
            clearTimeout( timeoutId );
            timeoutId = null;
        };

        timeoutId = setTimeout( function() 
        {
            myGrid.query = { search: newValue };
            myGrid.refresh();
        }, 300 );
    } );
} ); 
```

# networking - 尝试调用 Web 服务或连接到任何服务器时显示服务器身份验证失败的黑莓应用程序

> ID：14280225
> 
> 赞同：0
> 
> 时间：2013-01-11T14:29:26.647
> 
> 标签：networking, blackberry

我的黑莓应用程序有问题。实际上，我开发了一个黑莓聊天应用程序，使用第三方服务器进行即时消息传递以及一些用于 Web 服务调用的代码。

该应用程序在 WIFI 网络上运行良好，但是当我尝试在**运营商网络**上运行该应用程序时，它显示

**服务器认证失败**

这是**连接字符串的代码：**

```
 public static String getConnectionString() {
    String connectionString = "";

    if (DeviceInfo.isSimulator()) {
    if (USE_MDS_IN_SIMULATOR) {
    connectionString = ";deviceside=false";
    } else {
    connectionString = ";deviceside=true";
    }
    }

    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
    String carrierUid = getCarrierBIBSUid();
    if (carrierUid == null) {
    // Has carrier coverage, but not BIBS. So use the carrier's TCP
    // network
    connectionString = ";deviceside=true";
    } else {
    connectionString = ";deviceside=false;connectionUID=" + carrierUid + ";ConnectionType=mds-public";
    }
    }
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {
    connectionString = ";deviceside=false";
    }
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
    }
    else {
    connectionString = ";deviceside=true";
    }
    if ((RadioInfo.getActiveWAFs() & RadioInfo.WAF_WLAN) != 0
    && WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
    connectionString += ";interface=wifi";
    }
    connectionString += ";ConnectionTimeout=30000";
    return connectionString;
    } 
```

这是获取**BIS 运营商**的代码：

```
public static String getCarrierBIBSUid() {
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;
    try{
    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
    if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
    if (records[currentRecord].getName().toLowerCase().indexOf("bibs") >= 0) {
    return records[currentRecord].getUid();
    }
    }
    }
}catch (Exception e) {
}
return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:39:05.633

您可能没有正确的 BIS 后缀。看看代码有多棘手。有很多事情要考虑，很容易犯错误。这就是 5.0 之前的工作方式。

幸运的是，现在我们有了[`ConnectionFactory`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/io/transport/ConnectionFactory.html)，这让事情变得容易多了。

# sql - SQL Server 将表列传递给函数的参数

> ID：14280230
> 
> 赞同：7
> 
> 时间：2013-01-11T14:29:30.967
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个 SQL 函数，它返回商品的最低和最高售价。我想做一个查询，获取其他 StockItem 列及其售价

像这样：

```
SELECT i.StockItemID ii, 
       i.Name, 
       i.Code, 
       pli.SellingPrice AS MinSellingPrice,
       pli.StandardSellingPrice AS MaxSellingPrice,
       i.WebDetailedDescription,
       i.WebAdditionalInfo,
       i.FeaturedItemDescription
FROM SC_StockItem AS i, 
     func_GetPrice(17, i.StockItemID, 5) pli 
```

然而，这给出了一个错误：

> 消息 4104，级别 16，状态 1，第 12 行 无法绑定多部分标识符“i.StockItemID”。

知道我该怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-11T14:31:44.037

如果这是一个表值函数，那么您可以使用[`OUTER APPLY`](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
select i.StockItemID ii, 
  i.Name, 
  i.Code, 
  pli.SellingPrice as MinSellingPrice, 
  pli.StandardSellingPrice as MaxSellingPrice,
  i.WebDetailedDescription, 
  i.WebAdditionalInfo, 
  i.FeaturedItemDescription
from SC_StockItem as i
OUTER APPLY func_GetPrice(17, i.StockItemID, 5) pli 
```

[来自 MSDN](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

> APPLY 运算符允许您为查询的外部表表达式返回的每一行调用表值函数。

# mysql - 将 int-timestamp 转换为时间戳（更新行时）

> ID：14280231
> 
> 赞同：0
> 
> 时间：2013-01-11T14:29:31.730
> 
> 标签：mysql, join, timestamp, sql-update

我添加了一个应该存储`timestamp`值的新列。该值当前存在于另一个表中。所以我尝试构建一个查询来使用另一个表更新我的新列。

这是我当前的查询：

```
 UPDATE `gc_users` U 
    SET    `registration_date` = ( SELECT `joindate` 
                                   FROM    `vb_user` 
                                   WHERE   `username` = U.`name` 
                                   LIMIT 0,1
                                 ) 
```

问题是更新后`registration_date`的值是`0000-00-00 00:00:00`

新表：`gc_users`

*   列：registration_date（时间戳）
*   例子：*`2013-01-11 15:24:04`*

源表：`va_user`

*   列：连接日期（ int ）
*   例子：*`1354290120`*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:34:28.083

采用`FROM_UNIXTIME`

```
UPDATE  `gc_users` U
         INNER JOIN `vb_user` a
            ON a.`username` = U.`name`
SET     u.`registration_date` = FROM_UNIXTIME(a.`joindate`)
LIMIT   0,1 
```

*   [FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

# javascript - 如何让元素在视口中可见？jQuery

> ID：14280232
> 
> 赞同：2
> 
> 时间：2013-01-11T14:29:54.257
> 
> 标签：javascript, jquery

我在页面上有一个图像列表。当我滚动页面时，我想在当前视口中图像的导航栏中显示一些选项。因此我需要获取当前在视口中的图像元素，这可能吗？

雅各布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:33:05.030

谁说视口中只有一张图像？人多的时候你想做什么？

但除此之外，您始终可以使用图像获取容器的滚动位置以及图像的顶部偏移量，以查看当前处于视图中的图像。

### 所以这些值会让你得到你的结果

*   容器滚动位置
*   容器可见客户端高度
*   图像的顶部偏移

使用这些值可以定位视图中的所有图像，无论它们是完全显示还是部分显示（在顶部或底部）。

这是一个简化的[JSFiddle ，它在第一个](http://jsfiddle.net/Yr5PK/)*完全可见的*图像周围给出了红色边框。代码这样做：

```
// get top positions and references to all images
var pos = $("img").map(function(){
  var $this = $(this);
  return {
    el: $this,
    top: $this.offset().top
  };
}).get();

// provide document scrolling
$(document).on("scroll", function() {

  $("img").removeClass("first-in-view");

  var scroll = $(this).scrollTop();
  var i = 0;
  while(pos[i].top < scroll) i++;

  pos[i].el.addClass("first-in-view");

}).scroll(); 
```

这应该优化为仅在需要时切换类。否则，我们在每个滚动中都会闪烁。但它展示了如何做到这一点，您可以从这里开始。

### 重要的

**将图像位置确定过程附加到文档加载**事件而不是通常使用的 DOM 准备就绪是非常重要的，因为您必须等待文档加载才能使图像具有最终位置。

# robotium - 带有黄瓜的 Robotium BDD

> ID：14280233
> 
> 赞同：1
> 
> 时间：2013-01-11T14:29:56.860
> 
> 标签：robotium

我想知道你们是否知道如何使用 Robotium 进行 BDD 测试。

当我研究 Robotium 使用不同的虚拟机（Dalvik）时，我不能作为 Junit Test 运行（仅使用 Android Junit Test）。所以我找到了一个可能的解决方案，用 Junit 和 RoboRemote [https://github.com/groupon/robo-remote](https://github.com/groupon/robo-remote)运行 Robotium 。但是当我尝试与黄瓜集成时，测试变得不稳定。

所以你们知道一些使用 Robotium 进行 BDD 测试的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T21:50:56.297

我已经使用 Cucumber-JVM for Android 成功集成了 Robotium。

有关`cucumber-android`Cucumber-JVM 的现在官方模块和安装[的信息，请查看此处](http://cukes.info/install-cucumber-jvm.html)。您还可以在此处找到有关 Cucumber-JVM 的 API 文档和示例：http: [//cukes.info/platforms.html](http://cukes.info/platforms.html)。

在您的应用程序的测试模块中，只需将[Robotium](https://code.google.com/p/robotium/) Solo jar 文件添加为依赖项（范围：编译）。

我的一个测试类如下所示：

```
public class CucumberSteps extends ActivityInstrumentationTestCase2<YourActivity> {

  private Solo solo;

  public CucumberSteps() {
    super(YourActivity.class);
  }

  @Override
  protected void setUp() throws Exception {
    super.setUp();
  }

  @Before
  public void before() {
    solo = new Solo(getInstrumentation(), getActivity());
  }

  @After
  public void after() throws Throwable {
    //clean up
    solo.finalize();
  }

  @Override
  protected void tearDown() throws Exception {
    solo.finishOpenedActivities();
    super.tearDown();
  }

  @Given("^step_given_description$")
  public void step_given_description() throws Throwable {
    final View testView = solo.getView(R.id.testView);
    solo.waitForView(testView);
    solo.clickOnView(testView);
    // and so on
  }
} 
```

我希望这是足以让任何人开始的信息。当被问到这个问题时，cucumber-android 还不存在。但请记住，GUI 测试通常有些不稳定！我设法在本地获得了一组稳定的测试，但例如在 Jenkins 中，通常一些测试由于未知原因而失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T14:09:35.820

我知道这是一个非常古老的问题，但是关于这个主题的文档非常有限，所以我会发布另一条信息。

这篇文章对我帮助很大：[http ://www.opencredo.com/2014/01/28/cucumber-android-vs-cucumber-appium/](http://www.opencredo.com/2014/01/28/cucumber-android-vs-cucumber-appium/)

我也在这里使用了文档（我知道它已被弃用，但主项目根本没有关于 android 的文档）：[https](https://github.com/mfellner/cucumber-android) ://github.com/mfellner/cucumber-android 。

我使用来自 Android Bootstrap 的位 - [http://www.androidbootstrap.com/](http://www.androidbootstrap.com/)（主要是 Maven 集成测试项目配置）让它与 IntelliJ 13 社区版和 Maven 一起工作

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T09:02:26.373

我使用这个运行器与 cucumber-jvm 和 androidstudio 一起工作：

```
 import android.os.Bundle;

   import cucumber.api.CucumberOptions; import
   cucumber.api.android.CucumberInstrumentation;

   @CucumberOptions(features = {"features"}, tags = {"@smoke",
   "~@pending", "~@manual", "~@reboot"})

   public class Instrumentation extends CucumberInstrumentation {

       private final CucumberInstrumentation instrumentationCore = new CucumberInstrumentation();

       @Override
       public void onCreate(final Bundle bundle) {
           super.onCreate(bundle);
           instrumentationCore.onCreate(bundle);
           start();
       }

       @Override
       public void onStart() {
           waitForIdleSync();
           instrumentationCore.start();
       }
   } 
```

# ruby-on-rails - Capistrano TOUCH_ASSETS 错误

> ID：14280239
> 
> 赞同：0
> 
> 时间：2013-01-11T14:30:19.550
> 
> 标签：ruby-on-rails, capistrano, rvm-capistrano

最近将项目移动到另一台服务器。Capistrano 停止工作。如何找出问题所在？

```
 ** sftp upload #<StringIO:0x00000001b4b5d0> -> /home/xxx/production/TOUCH_ASSETS
    [yyy.xxx.lt] /home/xxx/production/TOUCH_ASSETS
    [yyy.xxx.lt] done
  * sftp upload complete
  * executing "cat /home/xxx/production/TOUCH_ASSETS | while read asset; do touch -cm -- \"$asset\"; done && rm -f -- /home/xxx/production/TOUCH_ASSETS"
    servers: ["yyy.xxx.lt"]
    [yyy.xxx.lt] executing command
    command finished in 593ms
*** [deploy:update_code] rolling back 
```

使用 RVM 和 Capistrano 2.14.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T21:52:38.337

我遇到了同样的问题，只需执行**set :rails_env, "production"**而不是**set :rails_env, :production**。

# java - 是否可以通过 HttpServletrequest 属性来公开从控制器调用的方法

> ID：14280241
> 
> 赞同：0
> 
> 时间：2013-01-11T14:30:24.460
> 
> 标签：java, jakarta-ee, servlets

我的问题可能很成熟，但我仍然想知道我们是否可以将 HttpServletRequest、HttpServletResponse 对象作为参数传递给业务逻辑方法？

**这是一个好的编程习惯吗？**

**例子 ：**

```
@RequestMapping( value = "/controller_name" , method = RequestMethod.GET)
public String getNewRegistrationPage(HttpServletRequest req,HttpServletResponse res)
{
    getDetails(req);
}

public void businessLogic(HttpServletRequest **req**)
{
    //business logic here
} 
```

谢谢， Sridhar R

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:36:59.373

好的做法是相对的。我个人的意见是不要这样做。我觉得控制器应该从请求中提取信息以发送到业务层。这样，您就有可能在非 Web 应用程序环境中使用业务层。在这不可行的情况下，我将有一个实用程序类来与业务层和 HttpServletRequest 对象进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:46:14.487

最好不要那样做。我明白您为什么要这样做是因为您希望将来自 JSP 的参数用于业务逻辑。所以这可以使用：

```
DataType param = request.getParameter("param");

getDetails(param); 
```

因此，按照建议的方式，您的所有业务逻辑都应该在您重定向到相应视图之前在控制器中调用的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:46:53.710

我认为做一个使用请求和响应作为输入参数的业务逻辑不是一个好习惯，因为在其他情况下你不能有效地重用业务逻辑。

过去，我们习惯于将请求中的所有数据复制到 Hashmap 中，并将 hashmap 作为业务逻辑的输入参数传递。

我不认为你总是需要读取无限参数，所以现在我更喜欢使用简单的 POJO，这在我看来更易于维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:47:08.807

出于与本文中已经提到的相同原因：我认为这不是一个好习惯。

相反，我建议您查看[此处](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping)以获取有关提取请求数据并将其传递给您的业务逻辑的可能方法的更多信息。

# javascript - 标记上带有长标题描述的 Prettyphoto会导致脚本失败

ID：14280242

赞同：0

时间：2013-01-11T14:30:28.320

标签：javascript, jquery, prettyphoto

# web-applications - 使用 grails 解析 pdf 文件并将数据存储到数据库中

> ID：14280243
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:30:29.297
> 
> 标签：web-applications, grails

我们有一个 URL，我们可以通过它下载 pdf 文件。问题是我们有一个输入文本字段，我们在其中提供 URL，并且我们有一个提交按钮。如果我们点击提交按钮，然后下载相关文件并解析并存储在数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:59:31.547

**域类**：

```
class Data {  
    byte[] pdfFile  

    static mapping = {  
        pdfFile sqlType:'longblob'      //use mysql  
    }  

    static constraints = {  
        pdfFile nullable:true  
    }  
} 
```

gsp 视图将 url 提交给控制器，例如**getFile.gsp**：

```
<g:form url="[action:'savePdf',controller:'data']" >  
       <g:textField name="externalUrl" >  
       <g:submitButton name="submit" value="Submit" />  
</g:form> 
```

**数据控制器**：

```
class DataController {
    def savePdf() {                                  //save pdf file into database  
        def url = params.externalUrl           // for example:'http://moodle.njit.edu/tutorials/downloading_moodle.pdf' 

        def localFile = new FileOutputStream('test.pdf')  
        localFile << new URL(url).openStream()  
        localFile.close()  

        def pdfFile = new FileInputStream('test.pdf')  
        byte[] buf = new byte [102400]  
        byte[] pdfData = new byte[10240000]              //pdf file size limited to 10M  
        int len = pdfFile.read(buf, 0, 102400)  
        ByteArrayOutputStream bytestream = new ByteArrayOutputStream()  
        while(len > 0) {  
            bytestream.write(buf, 0, len)  
            len =pdfFile.read(buf, 0, 102400)  
        }  
        data.pdfFile = bytestream.toByteArray()  
        data.save()  
    }  

    def renderPdf() {                              //for pdf file download  
        def dataInstance = Data.get(params.id)  
        response.setContentType('application/pdf')  
        byte[] pdf = dataInstance?.pdfFile  
        response.outputStream << pdf  
    }  
} 
```

要触发 renderPdf() 方法，请在另一个 gsp 视图中放置一个链接，比如**render.gsp**：

```
<a href="${createLink(uri:'/data/renderPdf/'+dataInstance.id)}">pdf file</a> 
```

# ruby-on-rails - 默认情况下，如何仅将确认的用户设为有效用户？

> ID：14280245
> 
> 赞同：1
> 
> 时间：2013-01-11T14:30:31.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用`Devise`它的确认选项。
如您所知，除非用户单击确认邮件中的链接，否则不会激活用户。

我这里的问题是，我们可以看到包括尚未确认的用户在内的所有成员！

> @users = User.all 将获取所有用户！我不想包括未经确认的用户。

有什么技巧可以忽略那些尚未确认的人吗？
在用户模型中添加一些东西将是最好的！

请帮我：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:40:12.430

设计会给你属性`confirmed_at`。您可以使用：

```
@user = User.where('confirmed_at IS NOT NULL') 
```

而且，如果我没记错的话，在确认 Devise 后将 Confirmation_token 设置为 NULL 以便它不能再次使用，所以你也可以这样做：

```
@user = User.where('confirmation_token IS NULL') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:54:58.570

我建议为您的用户模型添加一个范围以实现一致的访问：

```
class User

  def self.unconfirmed
    where('users.confirmed_at is null')
  end

  def self.confirmed
    where('users.confirmed_at is not null')
  end

end 
```

然后在控制器（或其他模型）中，可以通过以下方式访问此列表：

```
@users = User.confirmed 
```

范围的美妙之处在于它们可以进一步链接：

```
@unformed_males = User.confirmed.where(:sex => 'male').order(:height) 
```

你明白了；）

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:41:05.650

Devise 将 Confirmed_at 列添加到您的用户表中。所以你可以使用如下：

```
 @users = User.all(:conditions => ["confirmed_at is not null"]) 
```

# c# - 具体类如何隐藏它实现的接口的成员

> ID：14280246
> 
> 赞同：6
> 
> 时间：2013-01-11T14:30:33.080
> 
> 标签：c#, .net

我将举一个 .NET 的例子。

```
ConcurrentDictionary<TKey, TValue> : IDictionary<TKey, TValue>, IDictionary 
```

在这里你可以看到 ConcurrentDictionary 实现字典接口。但是我无法`Add<TKey,TValue>`从 ConcurrentDictionary 实例访问方法。这怎么可能？

```
IDictionary<int, int> dictionary = new ConcurrentDictionary<int, int>();
dictionary.Add(3, 3); //no errors

ConcurrentDictionary<int, int> concurrentDictionary = new ConcurrentDictionary<int, int>();
concurrentDictionary.Add(3, 3); //Cannot access private method here 
```

**更新：**

我知道如何访问它，但我不知道显式实现接口可以允许将访问修饰符更改为内部。它仍然不允许将其设为私有。这个对吗？关于该部分的更详细的解释会有所帮助。另外我想知道一些有效的用例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T14:32:15.310

因为该`IDictionary.Add`方法是由 ConcurrentDictionary[显式实现的。](http://msdn.microsoft.com/en-us/library/dd267263.aspx)

要从类中访问它而不必将变量声明为 IDictionary，请将其强制转换为所需的接口：

```
((IDictionary)concurrentDictionary).Add(3, 3) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T14:32:02.600

这是通过显式接口实现来完成的

```
public interface ISomeInterface
{
    void SomeMethod();
}

public class SomeClass : ISomeInterface
{
    void SomeInterface.SomeMethod()
    {
        // ...
    }
} 
```

现在，当您引用一个`SomeClass`对象时，您将看不到`SomeMethod`可用的方法。为了调用它，您必须将对象转换回`ISomeInterface`...

```
((ISomeInterface)mySomeClass).SomeMethod(); 
```

这是 C# imo 中未被充分利用的有用特性之一

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T14:32:24.313

它被实现为[显式接口实现](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)，这意味着您需要该`IDictionary<TKey, TValue>`类型的变量来访问它。

[`ConcurrentDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)请参阅Explicit Interface Implementations 部分下的文档。

如果您将并发字典转换为`IDictionary<TKey, TValue>`，您将能够调用`Add`它。

* * *

> 我不知道显式实现接口可以允许将访问修饰符更改为内部。它仍然不允许将其设为私有。这个对吗？

不，这是不正确的。

显式接口实现不会更改访问修饰符。它们改变了您如何访问以这种方式实现的成员（即要求您使用接口类型的变量）。它们仍然是*公共*成员，但只能使用接口类型访问，而不是实现类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T14:32:46.637

显式接口实现。举一个更简单的例子：

```
public interface IFoo {
    void Bar();
}
public class Foo : IFoo {
    void IFoo.Bar() { ... }
} 
```

这里`Bar`不在`Foo`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T14:37:11.027

该接口是显式实现的。在以下示例中，您无法`Add`使用 A 类的实例访问方法。

```
public interface IA
{
    void Add();
}

public class A : IA
{
    void IA.Add()
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T15:22:21.177

感谢大家提供出色的答案，其中一个已删除的答案让我对访问修饰符感到困惑。我能够从链接的问题中找到一些很好的解释。

Michael Hopcroft 的[隐式和显式接口实现](http://blogs.msdn.com/b/mhop/archive/2006/12/12/implicit-and-explicit-interface-implementations.aspx)

Jon Skeet 的[一些用例](https://stackoverflow.com/a/6129922/205859)

[显式实现 IDisposable](https://stackoverflow.com/q/3119288/205859)

Brad Abrams[的显式成员实现设计指南](http://blogs.msdn.com/b/brada/archive/2003/11/15/50721.aspx)

[可恶的模棱两可的重载，第一部分](http://blogs.msdn.com/b/ericlippert/archive/2006/04/05/569085.aspx)和[第二部分](http://blogs.msdn.com/b/ericlippert/archive/2006/04/06/570126.aspx)Eric Lippert

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T15:00:12.100

访问修饰符没有改变；`ConcurrentDictionary<TKey, TValue>`已经通过显式接口实现定义了方法`IDictionary.Add`，还没有实现`Add`方法。

如果您查看[类文档](http://msdn.microsoft.com/en-us/library/dd287191.aspx)，您会发现不`Add`存在任何方法（因此`concurrentDictionary.Add(3, 3);`类似于调用`concurrentDictionary.MethodThatDoesntExist(3, 3);`）。但是，在[Explicit Interface Implementations 部分](http://msdn.microsoft.com/en-us/library/dd287191.aspx#ExplicitInterfaceImplementationTableToggle)下，您可以看到有方法`ICollection.Add`和`IDictionary.Add`。

这个特性允许一个类实现多个共享一个方法名的接口，而不需要每个接口的实现都相同。

# jquery - jQuery存储textarea的初始值

> ID：14280250
> 
> 赞同：0
> 
> 时间：2013-01-11T14:30:45.030
> 
> 标签：jquery

在下面的脚本中，我想保持 htmlStrTOCpre 的初始值是静态的，这样它就不会改变。但是，一旦我编辑了文本区域，撤消将不再将原始文本粘贴回文本区域。我相信这是因为 htmlStrTOCpre 是基于调用 undoTOC 函数时 textarea 的 html() ，而不是页面加载时的初始值。

如何存储该初始值，以便始终将其粘贴回文本区域（通过 undoTOC 函数）？

```
<script>
jQuery(document).ready(function()
    {
        var pageurl = jQuery("#sample-permalink").text();
        var htmlStrTOCpre = jQuery("#cb2_customTOC").html();
        var htmlStrTOC  = '<h3>Table of Contents</h3>\n';
        htmlStrTOC += '<ul>\n';
        htmlStrTOC += '    <li><a href="'+pageurl+'">Introduction&nbsp;</a></li>\n';
        htmlStrTOC += '    <li><a href="'+pageurl+'2/">Introduction&nbsp;</a></li>\n';
        htmlStrTOC += '    <li><a href="'+pageurl+'3/">Conclusion&nbsp;</a></li>\n';
        htmlStrTOC += '</ul>';

        var checkTOC = function()
        {
            jQuery("#cb2_customTOC").html(htmlStrTOC);
        }

        jQuery("#cb-toc-click").bind("click", checkTOC);

        var undoTOC = function()
        {
            jQuery("#cb2_customTOC").html(htmlStrTOCpre);
        }

        jQuery("#cb-toc-undo").bind("click", undoTOC);

</script>

<div id="post_TOC" class="postbox ">
    <h3 class="hndle"><span>Table of Contents</span></h3>
    <div class="inside">
        <style>
        .cb-toc{color:blue;text-decoration:underline;cursor:pointer;}
        </style>
        <div class="inside">
            <textarea name="cb2_customTOC" id="cb2_customTOC">Some initial value</textarea>
            <span class="cb-toc" id="cb-toc-click">Paste TOC</span> | <span class="cb-toc" id="cb-toc-undo">Undo</span></p>
        </div>
    </div>
</div>

<span id="sample-permalink">http://localhost:8888/test/</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:36:24.820

使用`.val()`而不是`.html()`在文本区域上。然后将其存储在该`.data()`文本区域中。

保存：

```
$('#id').data('oldvalue',$('#id').val()); 
```

检索和重置：

```
$('#id').val($('#id').data('oldvalue')); 
```

[http://api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:45:30.903

在这里您会找到我的解决方案：http: [//jsfiddle.net/EBqZy/](http://jsfiddle.net/EBqZy/)，顺便说一句，我将在下面修改您的代码。

```
jQuery(document).ready(function()
{
    var pageurl = jQuery("#sample-permalink").text();
    var htmlStrTOCpre = jQuery("#cb2_customTOC").text();

    var htmlStrTOC  = '<h3>Table of Contents</h3>\n';
    htmlStrTOC += '<ul>\n';
    htmlStrTOC += '    <li><a href="'+pageurl+'">Introduction&nbsp;</a></li>\n';
    htmlStrTOC += '    <li><a href="'+pageurl+'2/">Introduction&nbsp;</a></li>\n';
    htmlStrTOC += '    <li><a href="'+pageurl+'3/">Conclusion&nbsp;</a></li>\n';
    htmlStrTOC += '</ul>';

    var checkTOC = function()
    {
        jQuery("#cb2_customTOC").val(htmlStrTOC);
    }

    jQuery("#cb-toc-click").bind("click", checkTOC);

    var undoTOC = function()
    {
        jQuery("#cb2_customTOC").val(htmlStrTOCpre);
    }

    jQuery("#cb-toc-undo").bind("click", undoTOC);

})

<div id="post_TOC" class="postbox ">
<h3 class="hndle"><span>Table of Contents</span></h3>
<div class="inside">
    <style>
    .cb-toc{color:blue;text-decoration:underline;cursor:pointer;}
    </style>
    <div class="inside">
        <textarea name="cb2_customTOC" id="cb2_customTOC">Default text</textarea>
        <span class="cb-toc" id="cb-toc-click">Paste TOC</span> | <span class="cb-toc" id="cb-toc-undo">Undo</span></p>
    </div>
</div> 
```

http://localhost:8888/test/

# javascript - 在生产服务器上加载优化的脚本，在开发期间使用 RequireJS 进行非优化

> ID：14280252
> 
> 赞同：0
> 
> 时间：2013-01-11T14:30:47.880
> 
> 标签：javascript, requirejs, js-amd

**当项目在生产服务器上**运行时，如何告诉 require.js**加载优化的文件**而不是未优化的 JavaScript 文件。使用需要配置文件是否可以实现。我的意思是**不替换 /js**文件夹的内容或更改脚本标记中的数据主引用？

 ****编辑：最后我使用服务器端模板变量来决定使用哪个 JS 目录

```
<script data-main="/{{jsMain}}/main" 
        src="/{{jsMain}}/libs/require/require.js">
</script> 
```****

# stylecop - StyleCop 在什么情况下会选择跳过文件？

> ID：14280255
> 
> 赞同：0
> 
> 时间：2013-01-11T14:31:03.597
> 
> 标签：stylecop

我有一个包含 20 个 c# 项目的解决方案。直到最近，StyleCop 会在所有项目中针对所有文件（自动生成的文件除外）运行，并报告它发现的任何问题。最近（尚不清楚确切的时间）它对报告问题的文件变得挑剔。

在给定的项目中，我故意将相同的缺陷添加到多个源文件中，StyleCop 在某些情况下会报告该问题，但在其他情况下不会。

自 10 月以来基本未更改的同一代码的早期分支不会显示此行为。只更改源代码我可以演示最新代码中存在的问题，但不能在 10 月的代码中。

跳过的文件不包含任何“我是自动生成的”标记，我希望这些标记会导致 StyleCop 跳过它们，并且我找不到跳过的文件或分析的文件之间的共性。

解决方案文件在分支之间保持不变，对 csproj 文件的唯一更改是添加/删除源文件。

有没有人有任何想法可能导致这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:57:50.597

所以，在大量食用巧克力和咒骂之后，我有了答案：

我们最近在所有源文件的顶部插入了版权声明。事实证明，我们的一些源文件在文件开头有一个[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)(U+FEFF)，并且通知最终被插入到该字符之前。

StyleCop 对这个角色的存在感到冒犯，并默默地忽略了文件的其余部分。

鉴于 Visual Studio IDE 未正确呈现该字符，我花了三天时间才发现它:(

编辑（2013.01.14）：我创建了一个 Perl 脚本来从我们的源文件中删除 BOM：

```
#!/usr/bin/perl -w
use strict; 
use warnings;
use File::Find;

my @dir = "C:/TopLevelSourceCodeDirectory";

find(\&edits, @dir);

sub edits() {

    my $file = $_;

    if( (-f $file) 
        && 
        (
            ($file =~ /.*\.cs$/)
            ||
            ($file =~ /.*\.xaml$/)
            ||
            ($file =~ /.*\.whatever$/)
        )
      ) {

        #Open the file and read in the data
        open (my $in, '<', $file) or die "Can't open $file: $!\n";
        my @lines = <$in>;
        close $in;

        #Open same file for writing
        open (my $out, '>', $file) or die "Can't open $file: $!\n";

        #Walk through lines, putting into $_, and remove BOMs
        for ( @lines ) {
            s/\xef\xbb\xbf//g;
            print $out $_;
        }

        close $out;
    }
} 
```

最后一点；我在编写这个脚本时遇到了所有问题，因为当我粘贴某些字符串时（即使这些字符串最初不包含 BOM），记事本似乎在我的文件中间添加了 BOM（当然，这些是不可见的） . 当您无法判断它在匹配器字符串的中间有一个不可见的 BOM 时，找出您的正则表达式不匹配的原因并不令人愉快。

# c++ - Qt“hello world”GUI应用程序没有链接？

> ID：14280258
> 
> 赞同：3
> 
> 时间：2013-01-11T14:31:14.907
> 
> 标签：c++, qt

> **可能重复：**
> [Qt：信号和插槽错误：未定义的对 `vtable 的引用](https://stackoverflow.com/questions/5854626/qt-signals-and-slots-error-undefined-reference-to-vtable-for)

这里我们有 test.cpp：

```
#include <QApplication>
#include <QMainWindow>

class MainWindow : public QMainWindow
{
    Q_OBJECT
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

单独放置在新目录中并：

```
$ qmake -project
$ qmake
$ make 
```

它不起作用：

```
test.o: In function `MainWindow::~MainWindow()':
test.cpp:(.text._ZN10MainWindowD2Ev[_ZN10MainWindowD5Ev]+0x3): undefined reference to `vtable for MainWindow'
test.cpp:(.text._ZN10MainWindowD2Ev[_ZN10MainWindowD5Ev]+0xb): undefined reference to `vtable for MainWindow'
test.o: In function `main':
test.cpp:(.text.startup+0x48): undefined reference to `vtable for MainWindow'
test.cpp:(.text.startup+0x51): undefined reference to `vtable for MainWindow'
test.o: In function `MainWindow::~MainWindow()':
test.cpp:(.text._ZN10MainWindowD0Ev[_ZN10MainWindowD0Ev]+0x7): undefined reference to `vtable for MainWindow'
test.o:test.cpp:(.text._ZN10MainWindowD0Ev[_ZN10MainWindowD0Ev]+0xf): more undefined references to `vtable for MainWindow' follow
collect2: error: ld returned 1 exit status
make: *** [tmp] Error 1 
```

一般来说，这样的错误要么是因为 moc 没有被调用，要么是因为未实现的虚拟方法。

moc 应该由 qmake 自动调用，而 afaik QMainWindow 没有任何纯虚拟方法 - 那么这里的问题是什么？

当我删除 Q_OBJECT 时，它可以工作。为什么是这样？到底是怎么回事？

我看到 Q_OBJECT 告诉 moc 为该对象生成信号/插槽元数据，为什么在这种情况下不能这样做？

**更新：**

解决方案是在类下面添加`#include "test.moc"`：

```
#include <QApplication>
#include <QMainWindow>

class MainWindow : public QMainWindow
{
    Q_OBJECT
};

#include "test.moc"  // <----------- HERE

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T14:36:54.773

这是因为您在 .cpp 文件中声明了该类。将其放入单独的 .h 标头中。

默认情况下，不会为源文件调用 MOC，仅针对标头调用（编辑：根据@Kamil，MOC 是针对 .cpp 源文件运行的，除了生成的 .moc 文件应该`#include`在 .cpp 文件中手动 -d - - 请参阅下面的编辑）。

然后，将相应的头文件添加到 .pro 文件内的 HEADERS 变量中。

当然，`#include`同样的头文件放入test.cpp。

另外，请在此处查看此答案：

[https://stackoverflow.com/a/5854884/1284631](https://stackoverflow.com/a/5854884/1284631)

编辑：

根据这个线程：[http ://www.qtcentre.org/threads/28580-Why-does-qmake-moc-only-process-header-files](http://www.qtcentre.org/threads/28580-Why-does-qmake-moc-only-process-header-files)

要强制为 .cpp 文件运行 MOC，您应该添加：

`#include "test.moc"`

就在你的班级定义的正下方。并重新运行 qmake。但是，我没有对此进行测试。

编辑2：有关OP正在寻找的内容的讨论，请参见此参考：

[http://harmattan-dev.nokia.com/docs/library/html/qt4/moc.html](http://harmattan-dev.nokia.com/docs/library/html/qt4/moc.html)

# java - 如何将 JSON 的增量更改应用到 Jackson / Play 2.0 中的原始对象？

> ID：14280259
> 
> 赞同：0
> 
> 时间：2013-01-11T14:31:19.387
> 
> 标签：java, json, playframework-2.0

后端接收对现有对象的修改作为 PUT 请求。正文仅包含更改的字段。

将更改应用到原始 Java 对象的最佳方法是什么？

编辑：对象更新很浅，没有深拷贝。原始对象...

```
'car' : {'id':'34','brand':'Ford','type':'Pinto','color':'blue','owner':'joe'} 
```

更新为 PUT /car/34 与 body...

```
'car' : {'color':'red','owner':null} 
```

结果应该...

```
'car' : {'id':'34','brand':'Ford','type':'Pinto','color':'red','owner':null} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:46:38.640

从安全角度来看：

*   从数据库中获取所需的对象
*   遍历传入 Json 的节点
*   验证每个节点的数据（类型+允许的值/范围）
*   更新对象的选定字段
*   更新数据库中的对象

# windows - 如果运行 node.js 的 Azure Worker Role 终止，它是否会重新启动节点进程？

> ID：14280265
> 
> 赞同：4
> 
> 时间：2013-01-11T14:31:37.793
> 
> 标签：windows, node.js, azure, azure-worker-roles

我使用[Windows Azure PowerShell](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/powershell-cmdlets/)创建了一个运行 node.js 的 Azure Worker Role 。我已经成功部署了我的服务，并且想知道如果 Worker Role 死了，它是否会重新启动该进程。这是使用 Web 角色和 iisnode 而非 Worker 角色的好处吗？

**更新**

正如 Golo Roden 在他的回答中建议的那样，我做了一个快速测试，并确认如果 Azure Worker Role 死了，它确实会重新启动节点进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:57:38.777

说真的，我不知道。

但是应该很容易发现：只需编写一个简单的 Node.js 应用程序，它只会以简单的形式对请求做出反应，并在 60 秒左右使用`setTimeout`and后自行关闭`process.exit();`。

然后部署它，测试它，等待几分钟，如果它仍然有效，显然 Azure 会重新启动该过程。

PS：如果你能在这里发布你的发现，那就太棒了。

# crystal-reports - 子报表内连接显示与相同主报表内连接不同的结果

> ID：14280275
> 
> 赞同：0
> 
> 时间：2013-01-11T14:32:11.053
> 
> 标签：crystal-reports, inner-join

在我的例子中，Crystal Reports 用于为另一个应用程序创建模板。一个值从另一个应用程序传递到一个特定的表，然后我可以在水晶中使用与其他表的内部连接来指定报表其余部分的值。

这在我没有使用子报表的情况下效果很好。在我的主报告中，我有 4 个内部连接的表，并且它们正确地从该程序中传递了某个值。

我的问题在于尝试为此特定报告创建封面。我需要封面上的详细信息部分，因此我希望在主报告的报告标题上创建一个子报告。我在子报表本身中使用了相同的表和相同的内部连接。它接收额外的值。这是与主报告中相同的表的精确内部连接设计，但它显示了不同的结果。

有人对此有解决方案吗？我对水晶报告特别陌生，并且刚刚避免使用子报告以避免更复杂的情况。我相信我可能只是能够通过共享变量或参数从主报告中传递标准值作为我当前尝试的替代方法，但我不确定如何。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:53:16.430

听起来您通过使用子报告采取了正确的方法。您确实将参数添加到子报表并从主报表链接它？

我建议您查看主报表和子报表的 SQL 查询以识别差异。

# ms-access - MS Access 关键字搜索优化

> ID：14280276
> 
> 赞同：0
> 
> 时间：2013-01-11T14:32:12.953
> 
> 标签：ms-access, vba

我相信这个主题已经被触及了很多，但是经过几个小时的谷歌搜索，我担心我找不到我需要的答案。我真正在寻找的只是一个方向，一个学习我需要的东西的路径。我有一个 MA Access 数据库，我正在尝试编写一个关键字搜索查询，但我想从我的查询中获得非常广泛的结果。说起来很容易，`description LIKE "red"`但我正在寻找更强大的搜索。甚至会返回部分搜索词的东西，所以如果我搜索“剪贴板”，我也想找到“冲浪板”。我真正想要的是能够进行关键字搜索，它会返回大量结果，但有一种方法可以根据与原始搜索的相关性对它们进行排名。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:52:15.620

您可以计算单词之间的[Levenshtein 距离。](http://en.wikipedia.org/wiki/Levenshtein_distance)Levenshtein 距离测量两个序列之间的差异。这也可以让你考虑相似的词。

Levenshtein 距离的范围从 0（单词相等）到最长单词的长度（单词完全不同）。您可能希望将 Levenshtein 值转换为更合适的值。

```
Dim maxlength As Long
Dim similarity As Single

maxlength = Max(word1.Length, word2.Length)
similarity = (maxlength - levenshteinDist) / maxlength 
```

这会产生 0（不相似）到 1（相等）之间的相似性值。

您可以在此处找到 VBA 实现：
[Excel 中的 Levenshtein 距离 - 堆栈溢出](https://stackoverflow.com/a/4243652/880990)
[ms 访问 - 在 VBA 中查找类似的发音文本 - 代码日志](https://stackoverflow.com/a/1607709/880990)

注意：Access 没有`Max`功能。自己编写或明确编码。

# .net - 从 C# WPF 中的 2 个 ObservableCollection 对 ObservableCollection 进行数据绑定

> ID：14280285
> 
> 赞同：0
> 
> 时间：2013-01-11T14:32:34.737
> 
> 标签：.net, wpf, observablecollection

我在尝试绑定由其他 2 个制成的 ObservableCollection 时遇到了一些问题。首先我需要绑定 ActiveSketchs，其次我必须单独绑定 Sketchs（即 ActivesSketchs.Union(InactiveSketchs)。

我认为下面的代码可以工作，但事实并非如此。ActiveSketch 绑定可以正常工作，但 Sketch 不能正常工作：

```
 private ObservableCollection<Sketch> _sketchs;
    public ObservableCollection<Sketch> Sketchs
    {
        get { return _sketchs = new ObservableCollection<Sketch>(ActiveSketchs.Union(InactiveSketchs)); }
        set { _sketchs = value; }
    }

    private ObservableCollection<Sketch> _activeSketchs;
    public ObservableCollection<Sketch> ActiveSketchs
    {
        get { return _activeSketchs; }
        set { _activeSketchs = value; }
    }

    private ObservableCollection<Sketch> _inactiveSketchs;
    public ObservableCollection<Sketch> InactiveSketchs
    {
        get { return _inactiveSketchs; }
        set { _inactiveSketchs = value; }
    } 
```

这是我设置源项目的方式：

```
 HeadbandRight.ItemsSource = Sketchs;
    HeadbandLeft.ItemsSource = Sketchs;
    MainScatterViewer.ItemsSource = ActiveSketchs; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:43:23.043

这对我来说没有意义

```
private ObservableCollection<Sketch> _sketchs;
public ObservableCollection<Sketch> Sketchs
{
    get { return _sketchs = new ObservableCollection<Sketch>(ActiveSketchs.Union(InactiveSketchs)); }
    set { _sketchs = value; }
} 
```

如果 get 是一个联合，为什么还要设置一个集合？

如果它只是一个 get，为什么它需要是一个 ObservableCollection？
对单个 OC 的更改无论如何都不会触发在组合上更改的集合。
您可以通过 newing 返回组合的 OC，但对 oc1 或 oc2 的更改仍然不会触发集合更改的 OCcomb 以便 UI 知道更新。
由于您需要在组合上手动触发 NotifyPropertyChanged，您不妨返回一个 IEnumerable。

```
 private ObservableCollection<string> oc1 = new ObservableCollection<string>();
    private ObservableCollection<string> oc2 = new ObservableCollection<string>();
    public MainWindow()
    {
        oc1.Add("one");
        oc1.Add("two");
        oc2.Add("three");
        oc2.Add("four");
        this.DataContext = this;
        InitializeComponent();
    }
    public IEnumerable<string> IEcomb { get { return oc1.Union(oc2); } }
    public ObservableCollection<string> OCcomb { get { return new ObservableCollection<string>(oc1.Union(oc2)); } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:07:12.550

您应该使用[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)从列表中获取过滤后的项目：

```
public InitFunction()
{
    this.Sketchs = new ObservableCollection<Sketch>();

    this.ActiveSketchs = new CollectionViewSource();
    this.ActiveSketchs.Source = this.Sketches ;
    this.ActiveSketchs.Filter += (s, e) =>
    {
        var sketch = e.Item as Sketch;

        e.Accepted = sketch.IsActive; // or whatever test you need
    };

    HeadbandRight.ItemsSource = Sketchs;
    HeadbandLeft.ItemsSource = Sketchs;
    MainScatterViewer.ItemsSource = ActiveSketchs.View;
}

public ObservableCollection<Sketch> Sketchs { get; set; }

public CollectionViewSource ActiveSketchs { get; set; } 
```

完整示例：http: [//uicraftsman.com/blog/2010/10/27/filtering-data-using-collectionviewsource/](http://uicraftsman.com/blog/2010/10/27/filtering-data-using-collectionviewsource/)

# iphone - iOS：如何在设置更改时隐藏 UITextField？

> ID：14280287
> 
> 赞同：0
> 
> 时间：2013-01-11T14:32:39.010
> 
> 标签：iphone, ios, objective-c, ipad

我有一个设置屏幕，在其中设置应用程序的单位。用户可以从主屏幕转到设置屏幕，在选择所需的单位后，设置屏幕被关闭。

当用户返回主屏幕时，我想隐藏和显示两个 UITextField。

我尝试了以下代码`viewDidLoad`，`viewDidAppear`但不起作用：

```
textBox1.hidden = YES;
textBox2.hidden = NO; 
```

这可能是微不足道的，但任何帮助表示赞赏。谢谢。

**更新：**

我已将“设置”屏幕与`Sugue`使用`push`和关闭设置屏幕连接，使用`[self.navigationController popViewControllerAnimated:YES];`该屏幕将用户带回主屏幕。现在，我需要根据设置刷新屏幕控件，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:56:45.793

第一：不应该

```
self.textBox1 = YES; // or [self.textBox1 setHidden:YES];
self.textBox2 = NO; // or [self.textBox2 setHidden:NO]; 
```

第二：确保网点不为空

```
NSLog("textBox1 = %@" , self.textBox1); 
```

第三：尝试一些这样的代码

```
int64_t delayInSeconds = 15.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
  self.textBox1.hidden = YES;
  self.textBox2.hidden = NO ;
}); 
```

在您的 viewWillAppear 或 DidAppear 中执行此操作。然后在 15 秒内，如果一切连接正确，您将看到变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:29:56.020

感谢您抽出宝贵的时间.. 我刚刚意识到我的代码用于读取布尔键的值`NSUserDefaults`，`viewDidLoad`其中只被调用一次:)

我把那行代码移到了`viewWillAppear`，一切都按预期工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:23:37.627

由于设置文本也不起作用，我猜你的 IBOutlets 可能搞砸了。要重新执行它们，请执行以下操作：

1.  首先进入您的故事板并放大您正在处理的视图控制器
2.  Control + 单击您的 UITextView 或 UITextField，您将看到类似的菜单： ![在此处输入图像描述](../Images/b01cc16e9235cb7586b6c543942b717d.png)

您可以看到我有一个名为 txtCaseID 的 IBOutlet 集

3.  如果您看到像我一样设置的插座，请继续并单击 X 将其删除
4.  要重新添加此插座，请打开协助编辑器以查看情节提要和您的 .h
5.  Control + Click & 从 Storyboard 中的 textBox 拖动到您之前在 .h 中创建的 IBOutlet，如下所示：

![在此处输入图像描述](../Images/d9fce02e0979bea1cfa28a6f9ef3ac13.png)

确保对两个文本框都这样做。如果您需要任何其他帮助，请告诉我——

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:11:03.563

将以下布尔值设置为是或否（在设置屏幕中）。

```
BOOL hideTextBox1;
BOOL hideTextBox2; 
```

保存变量（在设置屏幕中）：

```
NSString *hideTextBox1String;
NSString *hideTextBox2String;

if(hideTextBox1 == YES){
    hideTextBox1String = @"YES"
}else{
    hideTextBox1String = nil
}

if(hideTextBox2 == YES){
    hideTextBox2String = @"YES"
}else{
    hideTextBox2String = nil
}

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:hideTextBox2String  forKey:@"hideTextBox2"];
[defaults setObject:hideTextBox1String  forKey:@"hideTextBox1"];
[defaults synchronize]; 
```

在第一个视图控制器中检索它：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *hideBox1 = [defaults objectForKey:@"hideTextBox1"];
NSString *hideBox2 = [defaults objectForKey:@"hideTextBox2"];

if(hideBox1 != nil){
    textBox1.hidden = YES;
}else{
    textBox1.hidden = NO;
}

if(hideBox2 != nil){
    textBox2.hidden = YES;
}else{
    textBox2.hidden = NO;
} 
```

这将使更改永久生效，直到您更改回来。猜猜这就是你要找的。

# css - 在 Chrome/Safari 中导致溢出的相对元素中的绝对定位元素

> ID：14280293
> 
> 赞同：0
> 
> 时间：2013-01-11T14:32:47.373
> 
> 标签：css, css-position

我们试图解决的问题是文本在`<p>`. 它似乎是其内容的结果，其中包括一个相对位置`<a>`元素，其中有一个绝对定位`<span>`元素，其中有填充。Firefox 像我通常期望的那样包装文本。

这是我的 HTML 的抽象：

```
<p>
    In this second example, 
    <a href="#">
        <span class="icon"><img src="play.gif"></span>
        mo
    </a> 
    muh...
</p> 
```

还有一个 CSS 的抽象，就像我认为的那样简化：

```
a {
    padding: 5px;
}
a span.icon {
    position: absolute;
    display: block;
    width: 15px;
    height: 15px;
} 
```

这是问题的屏幕截图（突出显示的是 Chrome 的元素检查器，其中`<p>`元素突出显示）。`immediately`您可以在 的末尾看到溢出的单词`<p>`：

[![](../Images/0c3bdd4a06fb3c25e1b291b9e00ef17f.png)](https://imgur.com/H9lbA)

任何指向正确方向的指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:28:16.163

不要使用绝对定位，而是尝试使用`display:inline`or `display:inline-block`（如果您需要设置高度/宽度 - 注意：在 IE 7 及更低版本中不支持）。

您可以将`display`所有内容放在一起，因为图像和跨度从一开始就是内联的。我在这里有一个[示例](http://jsfiddle.net/Rykus0/JxqMp/2/)，删除了跨度并仅设置图像和周围链接的样式。

您还可以将图像用作按钮的背景，并设置填充以占空间。例子：

```
.button{
  background: url(img/buttonIcon.png) no-repeat; /* 15x15 icon */
  padding: 0 0 0 15px;
} 
```

[例子](http://jsfiddle.net/Rykus0/gXhMN/1/)

# ios - 在同一个 UIImageView 上移动、缩放和绘图

> ID：14280295
> 
> 赞同：0
> 
> 时间：2013-01-11T14:32:50.990
> 
> 标签：ios, uiimageview, uiimage, uigesturerecognizer

我想在 UIImageView 上绘图，为此我使用 touchesMoved 和 touchesBegan，它可以工作。

我使用捏识别器进行缩放，它也可以。

但我怎样才能移动它？因为如果我使用平移识别器，它将与 touchesMoved 冲突。

我该怎么做才能仅在用户使用 3 个手指时调用平移识别器？

我认为其他人已经面临这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:20:15.690

使用 touchesMoved 进行两次触摸，用户可以用两根手指滑动图像，但只需一根手指即可绘制……此外，在任何地方使用 3 根手指都不是一个好主意，因为任何人在他们的设备中启用了三次点击缩放辅助功能将无法使用三指功能。（我和我的很多朋友都启用了此功能）

首先验证两个触摸都在 UIImageView 上，然后从两个触摸中获取 x&y 值并对它们进行平均以获得手指之间的中点。使用此值进行平移。找出当前平均中点与先前平均中点之间的变化，并将此变化应用于图像中心。

`image.center = CGPointMake(image.center.x+changeInX, image.center.y+changeInY);`

# android - 如何在 Android 的光标适配器中获取 bindView 中的视图尺寸？

> ID：14280297
> 
> 赞同：1
> 
> 时间：2013-01-11T14:32:56.970
> 
> 标签：android, listview, bind, measure

我想在方法`ImageView`期间获得尺寸`bindView`。

不幸的是，在`bindView`测量的高度和宽度为 0。

我需要这些尺寸来从 web 请求特定的图像宽度和高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:43:21.503

在您的 AdapterView 开始回收视图之前，视图还没有在屏幕上分层，因此它们的宽度和高度将为零，因为它确实为零。

在您的 bindView 开始接收回收视图后，它们将具有宽度和高度，但为时已晚。

在这些情况下，您必须找到一种不同的方法来计算它们的大小，例如，您可以在 DP 中为每个视图设置一个固定值，然后使用该值。例子：

```
int size = context.getResources().getDimensionPixelSize(R.dimen.img_size); 
```

# java - 如何下载歌曲并将其添加到用户的音乐库？

> ID：14280308
> 
> 赞同：1
> 
> 时间：2013-01-11T14:33:40.467
> 
> 标签：java, android

我的 Android 应用需要下载 MP3 曲目并将其添加到用户的媒体库中。

我还没有找到任何好的文档，所以我想知道它是否像将 MP3 存储在 Music 目录中一样简单？如果是这样，用户音乐目录的位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:39:13.907

它只是像任何其他文件类型一样下载 mp3 文件。

您应该通过调用环境找到要保存的目录：

```
Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC); 
```

您可以使用[scanFile 方法](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28java.lang.String,%20java.lang.String%29)向媒体扫描器提示新音乐存在：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:44:30.023

采用`MediaScanner`

```
String mp3path = "Your MP3 file path";   
MediaScannerConnection msc = new MediaScannerConnection(yourcontext,
        new MediaScannerConnection.MediaScannerConnectionClient() {
            @Override
            public void onScanCompleted(String path, Uri uri){
                msc.disconnect();
            }
            @Override
            public void onMediaScannerConnected() {
                msc.scanFile(mp3path, null);
            }           
        });             
msc.connect(); 
```

# c# - 使用 emguCV (OpenCV) 从火线相机捕获 2 个不同程序中的视频？

> ID：14280310
> 
> 赞同：1
> 
> 时间：2013-01-11T14:33:53.377
> 
> 标签：c#, emgucv, firewire

我正在寻找一种方法来使用 OpenCV（或特别是 C# 中的 emguCV）同时从 2 个不同程序上的同一火线上捕获视频。这里的一些帖子说它无法完成，因为源驱动程序一次会被锁定到一个应用程序中。

我在这里找到了一些建议使用[SplitCam的](http://splitcam.biz/)[答案](https://stackoverflow.com/questions/4238029/opencv-how-to-be-capable-to-capture-frames-from-same-camera-with-2-different-ap)，但它似乎只适用于网络摄像头。我也不喜欢 SplitCam 上的广告（但我不能抱怨，因为它是免费软件）。

SplitCam 似乎正在使用源信号并创建一个虚拟驱动程序供其他程序使用。有没有办法像使用 OpenCV 的 SplitCam 一样做同样的事情？OpenCV 可以访问火线摄像头，我在运行单个程序的 emguCV 中使用它没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:19:42.263

搜索了一段时间后，我找到了两种不同的解决方案。

1) 实现 DirectShow 虚拟视频捕获源过滤器。[这个项目已经在CodeProject](http://www.codeproject.com/Articles/437617/DirectShow-Virtual-Video-Capture-Source-Filter-in)上得到了很好的记录。这种方法需要一些学习曲线，因为我对 DirectShow 了解不多。

2) 使用第 3 方组件。我从[e2esoft](http://www.e2esoft.cn/vcam/vcamsdk.asp)找到了一个类似于 SplitCam 的工具，但它是一个可以在自己的项目中使用的 SDK。他们已经有一个 CSharp 示例。我在使用本示例提供的 COM 对象时确实遇到了一点问题（错误 80040154），因为它是一个 32 位 COM 对象，但我运行的是 64 位 Windows 7。我在[这里](http://www.gfi.com/blog/32bit-object-64bit-environment/)找到了一个使用注册表黑客的工作.

我最终选择了解决方案＃2，因为它很容易快速实施。我使用该组件创建了一个虚拟设备，该设备从主火线摄像头设备中获取视频。之后，我使用 emguCV 抓取帧的程序可以从虚拟设备中抓取。虚拟设备可以被多个来源使用，到目前为止，我有 3 个程序实例从虚拟设备中获取，并且我没有看到帧速率有任何滞后（假设这个火线相机最多只能运行 15FPS）。这个解决方案的缺点是我必须支付许可证才能去除视频上的水印。当我发现它是多少时，我会更新它，因为他们没有在网站上发布 SDK 的价格。如果真的很贵，我

2013 年 1 月 16 日编辑：VCam SDK 的价格为 699 美元。

![在此处输入图像描述](../Images/ce9962ea1f533a8b7fcf249eb36e06ab.png)

# python - 没有河流的世界地图与matplotlib / Basemap？

> ID：14280312
> 
> 赞同：20
> 
> 时间：2013-01-11T14:34:06.643
> 
> 标签：python, matplotlib, maps, geography, matplotlib-basemap

有没有办法用底图（或没有底图，如果有其他方法）绘制大陆边界，而不会出现那些烦人的河流？尤其是那条连大海都没有的金刚河，令人不安。

编辑：我打算在地图上进一步绘制数据，就像在底[图库](http://matplotlib.org/basemap/users/examples.html)中一样（并且仍然将大陆的边界线绘制为数据上的黑线，为世界地图提供结构）所以虽然下面 Hooked 的解决方案很好，甚至高手，也不适用于此目的。

![世界地图](../Images/e326b50233f55ded542bccb725be62c9.png)

图片制作者：

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt

fig = plt.figure(figsize=(8, 4.5))
plt.subplots_adjust(left=0.02, right=0.98, top=0.98, bottom=0.00)
m = Basemap(projection='robin',lon_0=0,resolution='c')
m.fillcontinents(color='gray',lake_color='white')
m.drawcoastlines()
plt.savefig('world.png',dpi=75) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:11:27.233

出于这样的原因，我经常一起避免使用 Basemap 并使用 OGR 读取 shapefile 并将它们自己转换为 Matplotlib 艺术家。这是更多的工作，但也提供了更多的灵活性。

底图具有一些非常简洁的功能，例如将输入数据的坐标转换为您的“工作投影”。

如果您想坚持使用底图，请获取一个不包含河流的 shapefile。例如，自然地球在物理部分有一个很好的“土地”形状文件（下载“比例等级”数据并解压缩）。见[http://www.naturalearthdata.com/downloads/10m-physical-vectors/](http://www.naturalearthdata.com/downloads/10m-physical-vectors/)

您可以使用 Basemap 中的 m.readshapefile() 方法读取 shapefile。这允许您在投影坐标中获取 Matplotlib 路径顶点和代码，然后您可以将其转换为新路径。它有点绕道，但它为您提供了来自 Matplotlib 的所有样式选项，其中大部分不能通过 Basemap 直接获得。它有点骇人听闻，但我现在在坚持底图时没有另一种方式。

所以：

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
from matplotlib.collections import PathCollection
from matplotlib.path import Path

fig = plt.figure(figsize=(8, 4.5))
plt.subplots_adjust(left=0.02, right=0.98, top=0.98, bottom=0.00)

# MPL searches for ne_10m_land.shp in the directory 'D:\\ne_10m_land'
m = Basemap(projection='robin',lon_0=0,resolution='c')
shp_info = m.readshapefile('D:\\ne_10m_land', 'scalerank', drawbounds=True)
ax = plt.gca()
ax.cla()

paths = []
for line in shp_info[4]._paths:
    paths.append(Path(line.vertices, codes=line.codes))

coll = PathCollection(paths, linewidths=0, facecolors='grey', zorder=2)

m = Basemap(projection='robin',lon_0=0,resolution='c')
# drawing something seems necessary to 'initiate' the map properly
m.drawcoastlines(color='white', zorder=0)

ax = plt.gca()
ax.add_collection(coll)

plt.savefig('world.png',dpi=75) 
```

给出：

![在此处输入图像描述](../Images/34975d56fe19e9c7c1fd5382d3a1b2de.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T16:10:21.253

# 如何去除“烦人”的河流：

如果您想对图像进行后处理（而不是直接使用底图），您可以移除未连接到海洋的水体：

```
import pylab as plt
A = plt.imread("world.png")

import numpy as np
import scipy.ndimage as nd
import collections

# Get a counter of the greyscale colors
a      = A[:,:,0]
colors = collections.Counter(a.ravel())
outside_and_water_color, land_color = colors.most_common(2)

# Find the contigous landmass
land_idx = a == land_color[0]

# Index these land masses
L = np.zeros(a.shape,dtype=int) 
L[land_idx] = 1
L,mass_count = nd.measurements.label(L)

# Loop over the land masses and fill the "holes"
# (rivers without outlays)
L2 = np.zeros(a.shape,dtype=int) 
L2[land_idx] = 1
L2 = nd.morphology.binary_fill_holes(L2)

# Remap onto original image
new_land = L2==1
A2 = A.copy()
c = [land_color[0],]*3 + [1,]
A2[new_land] = land_color[0]

# Plot results
plt.subplot(221)
plt.imshow(A)
plt.axis('off')

plt.subplot(222)
plt.axis('off')
B = A.copy()
B[land_idx] = [1,0,0,1]
plt.imshow(B)

plt.subplot(223)
L = L.astype(float)
L[L==0] = None
plt.axis('off')
plt.imshow(L)

plt.subplot(224)
plt.axis('off')
plt.imshow(A2)

plt.tight_layout()  # Only with newer matplotlib
plt.show() 
```

![在此处输入图像描述](../Images/0b387437ff6bb90406365e0734e04c1e.png)

第一张图像是原始图像，第二张是地块。第三个不是必需的，但很有趣，因为它标识了每个单独的连续陆地。第四张图片就是你想要的，去掉了“河流”的图像。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T14:11:19.327

按照 user1868739 的示例，我只能选择我想要的路径（对于某些湖泊）： ![世界2](../Images/75f42ef55fc86a4e012b4d24b2fba8ba.png)

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt

fig = plt.figure(figsize=(8, 4.5))
plt.subplots_adjust(left=0.02, right=0.98, top=0.98, bottom=0.00)
m = Basemap(resolution='c',projection='robin',lon_0=0)
m.fillcontinents(color='white',lake_color='white',zorder=2)
coasts = m.drawcoastlines(zorder=1,color='white',linewidth=0)
coasts_paths = coasts.get_paths()

ipolygons = range(83) + [84] # want Baikal, but not Tanganyika
# 80 = Superior+Michigan+Huron, 81 = Victoria, 82 = Aral, 83 = Tanganyika,
# 84 = Baikal, 85 = Great Bear, 86 = Great Slave, 87 = Nyasa, 88 = Erie
# 89 = Winnipeg, 90 = Ontario
for ipoly in ipolygons:
    r = coasts_paths[ipoly]
    # Convert into lon/lat vertices
    polygon_vertices = [(vertex[0],vertex[1]) for (vertex,code) in
                        r.iter_segments(simplify=False)]
    px = [polygon_vertices[i][0] for i in xrange(len(polygon_vertices))]
    py = [polygon_vertices[i][2] for i in xrange(len(polygon_vertices))]
    m.plot(px,py,linewidth=0.5,zorder=3,color='black')

plt.savefig('world2.png',dpi=100) 
```

但这仅在为大陆使用白色背景时才有效。如果我在下面的行中更改`color`为`'gray'`，我们会看到其他河流和湖泊没有填充与大陆相同的颜色。（同样玩弄`area_thresh`不会删除那些与海洋相连的河流。）

```
m.fillcontinents(color='gray',lake_color='white',zorder=2) 
```

![世界3](../Images/3d263930dc6e6d3cab5debe26730e77b.png)

白色背景的版本足以对大陆上的各种土地信息进行进一步的彩色绘图，但如果想要保留大陆的灰色背景，则需要更精细的解决方案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-10T19:20:08.607

我经常修改 Basemap 的 drawcoastlines() 以避免那些“破碎”的河流。为了数据源的一致性，我还修改了 drawcountries()。

这是我用来支持自然地球数据中可用的不同分辨率的内容：

```
from mpl_toolkits.basemap import Basemap

class Basemap(Basemap):
    """ Modify Basemap to use Natural Earth data instead of GSHHG data """
    def drawcoastlines(self):
        shapefile = 'data/naturalearth/coastline/ne_%sm_coastline' % \
                    {'l':110, 'm':50, 'h':10}[self.resolution]
        self.readshapefile(shapefile, 'coastline', linewidth=1.)
    def drawcountries(self):
        shapefile = 'data/naturalearth/countries/ne_%sm_admin_0_countries' % \
                    {'l':110, 'm':50, 'h':10}[self.resolution]
        self.readshapefile(shapefile, 'countries', linewidth=0.5)

m = Basemap(llcrnrlon=-90, llcrnrlat=-40, urcrnrlon=-30, urcrnrlat=+20,
            resolution='l')  # resolution = (l)ow | (m)edium | (h)igh
m.drawcoastlines()
m.drawcountries() 
```

这是输出： [![在此处输入图像描述](../Images/a4f677b254dad3b2c62dd01ab58774a1.png)](https://i.stack.imgur.com/d92g6.png)

请注意，默认情况下，底图使用 resolution='c'（粗略），显示的代码不支持此功能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T20:48:24.040

如果您可以绘制轮廓而不是 shapefile，那么绘制可以从任何地方获得的海岸线非常容易。我从 NOAA 海岸线提取器以 MATLAB 格式获取了我的海岸线： [http ://www.ngdc.noaa.gov/mgg/shorelines/shorelines.html](http://www.ngdc.noaa.gov/mgg/shorelines/shorelines.html)

为了编辑海岸线，我将其转换为 SVG，然后使用 Inkscape 对其进行编辑，然后再转换回 lat/lon 文本文件（“MATLAB”格式）。

所有 Python 代码都包含在下面。

```
# ---------------------------------------------------------------
def plot_lines(mymap, lons, lats, **kwargs) :
    """Plots a custom coastline.  This plots simple lines, not
    ArcInfo-style SHAPE files.

    Args:
        lons: Longitude coordinates for line segments (degrees E)
        lats: Latitude coordinates for line segments (degrees N)

    Type Info:
        len(lons) == len(lats)
        A NaN in lons and lats signifies a new line segment.

    See:
        giss.noaa.drawcoastline_file()
    """

    # Project onto the map
    x, y = mymap(lons, lats)

    # BUG workaround: Basemap projects our NaN's to 1e30.
    x[x==1e30] = np.nan
    y[y==1e30] = np.nan

    # Plot projected line segments.
    mymap.plot(x, y, **kwargs)

# Read "Matlab" format files from NOAA Coastline Extractor.
# See: http://www.ngdc.noaa.gov/mgg/coast/

lineRE=re.compile('(.*?)\s+(.*)')
def read_coastline(fname, take_every=1) :
    nlines = 0
    xdata = array.array('d')
    ydata = array.array('d')
    for line in file(fname) :
#        if (nlines % 10000 == 0) :
#            print 'nlines = %d' % (nlines,)
        if (nlines % take_every == 0 or line[0:3] == 'nan') :
            match = lineRE.match(line)
            lon = float(match.group(1))
            lat = float(match.group(2))

            xdata.append(lon)
            ydata.append(lat)
        nlines = nlines + 1

    return (np.array(xdata),np.array(ydata))

def drawcoastline_file(mymap, fname, **kwargs) :
    """Reads and plots a coastline file.
    See:
        giss.basemap.drawcoastline()
        giss.basemap.read_coastline()
    """

    lons, lats = read_coastline(fname, take_every=1)
    return drawcoastline(mymap, lons, lats, **kwargs)
# =========================================================
# coastline2svg.py
#
import giss.io.noaa
import os
import numpy as np
import sys

svg_header = """<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   version="1.1"
   width="360"
   height="180"
   id="svg2">
  <defs
     id="defs4" />
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     id="layer1">
"""

path_tpl = """
    <path
       d="%PATH%"
       id="%PATH_ID%"
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
"""

svg_footer = "</g></svg>"

# Set up paths
data_root = os.path.join(os.environ['HOME'], 'data')
#modelerc = giss.modele.read_modelerc()
#cmrun = modelerc['CMRUNDIR']
#savedisk = modelerc['SAVEDISK']

ifname = sys.argv[1]
ofname = ifname.replace('.dat', '.svg')

lons, lats = giss.io.noaa.read_coastline(ifname, 1)

out = open(ofname, 'w')
out.write(svg_header)

path_id = 1
points = []
for lon, lat in zip(lons, lats) :
    if np.isnan(lon) or np.isnan(lat) :
        # Process what we have
        if len(points) > 2 :
            out.write('\n<path d="')
            out.write('m %f,%f L' % (points[0][0], points[0][1]))
            for pt in points[1:] :
                out.write(' %f,%f' % pt)
            out.write('"\n   id="path%d"\n' % (path_id))
#            out.write('style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"')
            out.write(' />\n')
            path_id += 1
        points = []
    else :
        lon += 180
        lat = 180 - (lat + 90)
        points.append((lon, lat))

out.write(svg_footer)
out.close()

# =============================================================
# svg2coastline.py

import os
import sys
import re

# Reads the output of Inkscape's "Plain SVG" format, outputs in NOAA MATLAB coastline format

mainRE = re.compile(r'\s*d=".*"')
lineRE = re.compile(r'\s*d="(m|M)\s*(.*?)"')

fname = sys.argv[1]

lons = []
lats = []
for line in open(fname, 'r') :
    # Weed out extraneous lines in the SVG file
    match = mainRE.match(line)
    if match is None :
        continue

    match = lineRE.match(line)

    # Stop if something is wrong
    if match is None :
        sys.stderr.write(line)
        sys.exit(-1)

    type = match.group(1)[0]
    spairs = match.group(2).split(' ')
    x = 0
    y = 0
    for spair in spairs :
        if spair == 'L' :
            type = 'M'
            continue

        (sdelx, sdely) = spair.split(',')
        delx = float(sdelx)
        dely = float(sdely)
        if type == 'm' :
            x += delx
            y += dely
        else :
            x = delx
            y = dely
        lon = x - 180
        lat = 90 - y
        print '%f\t%f' % (lon, lat)
    print 'nan\tnan' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T19:13:11.703

好的，我想我有一个部分解决方案。

基本思想是 drawcoastlines() 使用的路径按大小/面积排序。这意味着前 N 条路径（对于大多数应用程序）是主要的陆块和湖泊，后面的路径是较小的岛屿和河流。

问题是您想要的前 N ​​条路径将取决于投影（例如，全球、极地、区域），是否已应用 area_thresh 以及您是否想要湖泊或小岛等。换句话说，您将不得不调整这个每个应用程序。

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt

mp = 'cyl'
m = Basemap(resolution='c',projection=mp,lon_0=0,area_thresh=200000)

fill_color = '0.9'

# If you don't want lakes set lake_color to fill_color
m.fillcontinents(color=fill_color,lake_color='white')

# Draw the coastlines, with a thin line and same color as the continent fill.
coasts = m.drawcoastlines(zorder=100,color=fill_color,linewidth=0.5)

# Exact the paths from coasts
coasts_paths = coasts.get_paths()

# In order to see which paths you want to retain or discard you'll need to plot them one
# at a time noting those that you want etc. 
for ipoly in xrange(len(coasts_paths)):
    print ipoly
    r = coasts_paths[ipoly]
    # Convert into lon/lat vertices
    polygon_vertices = [(vertex[0],vertex[1]) for (vertex,code) in
                        r.iter_segments(simplify=False)]
    px = [polygon_vertices[i][0] for i in xrange(len(polygon_vertices))]
    py = [polygon_vertices[i][1] for i in xrange(len(polygon_vertices))]
    m.plot(px,py,'k-',linewidth=1)
    plt.show() 
```

一旦你知道相关的 ipoly 停止绘图（poly_stop），那么你可以做这样的事情......

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt

mproj = ['nplaea','cyl']
mp = mproj[0]

if mp == 'nplaea':
    m = Basemap(resolution='c',projection=mp,lon_0=0,boundinglat=30,area_thresh=200000,round=1)
    poly_stop = 10
else:
    m = Basemap(resolution='c',projection=mp,lon_0=0,area_thresh=200000)
    poly_stop = 18
fill_color = '0.9'

# If you don't want lakes set lake_color to fill_color
m.fillcontinents(color=fill_color,lake_color='white')

# Draw the coastlines, with a thin line and same color as the continent fill.
coasts = m.drawcoastlines(zorder=100,color=fill_color,linewidth=0.5)

# Exact the paths from coasts
coasts_paths = coasts.get_paths()

# In order to see which paths you want to retain or discard you'll need to plot them one
# at a time noting those that you want etc. 
for ipoly in xrange(len(coasts_paths)):
    if ipoly > poly_stop: continue
    r = coasts_paths[ipoly]
    # Convert into lon/lat vertices
    polygon_vertices = [(vertex[0],vertex[1]) for (vertex,code) in
                        r.iter_segments(simplify=False)]
    px = [polygon_vertices[i][0] for i in xrange(len(polygon_vertices))]
    py = [polygon_vertices[i][1] for i in xrange(len(polygon_vertices))]
    m.plot(px,py,'k-',linewidth=1)
plt.show() 
```

![在此处输入图像描述](../Images/97a052780519aed8712d77371fa85284.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T17:34:45.420

根据我对@sampo-smolander 的评论

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt

fig = plt.figure(figsize=(8, 4.5))
plt.subplots_adjust(left=0.02, right=0.98, top=0.98, bottom=0.00)
m = Basemap(resolution='c',projection='robin',lon_0=0)
m.fillcontinents(color='gray',lake_color='white',zorder=2)
coasts = m.drawcoastlines(zorder=1,color='white',linewidth=0)
coasts_paths = coasts.get_paths()

ipolygons = range(83) + [84]
for ipoly in xrange(len(coasts_paths)):
    r = coasts_paths[ipoly]
    # Convert into lon/lat vertices
    polygon_vertices = [(vertex[0],vertex[1]) for (vertex,code) in
                        r.iter_segments(simplify=False)]
    px = [polygon_vertices[i][0] for i in xrange(len(polygon_vertices))]
    py = [polygon_vertices[i][1] for i in xrange(len(polygon_vertices))]
    if ipoly in ipolygons:
        m.plot(px,py,linewidth=0.5,zorder=3,color='black')
    else:
        m.plot(px,py,linewidth=0.5,zorder=4,color='grey')
plt.savefig('world2.png',dpi=100) 
```

![在此处输入图像描述](../Images/fcc3b84a82e0e5716e5f836aea0731b4.png)

# ruby-on-rails - Rails 2.3 的 Authlogic_oauth2 替代方案

> ID：14280318
> 
> 赞同：1
> 
> 时间：2013-01-11T14:34:28.810
> 
> 标签：ruby-on-rails, oauth-2.0, authlogic, facebook-oauth

为了让用户使用 facebook 注册和登录，我在 Rails 2.3 应用程序中使用了 authlogic_oauth2 gem (v.1.1.2) 以及 oauth2 (v. 0.0.10) 和 authlogic (2.1.6)。

一切运行良好超过 2 年，但从一个月左右开始，用户无法再登录或注册 Facebook。

我不知道发生了什么，但我没有改变任何东西，所以 Facebook 似乎改变了一些东西，而 authlogic_oauth2 似乎无法再工作了。

哪种方法可能是解决问题并恢复用户使用 Facebook 登录/注册的最简单方法？有没有更好的宝石来帮助工作？

在此先感谢，奥古斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:10:32.677

我怀疑您可能在不知不觉中对当前的应用程序进行了一些更改，从而导致了`login`失败`logout`。

问题的一个可能原因可能是根据您所做的更改从[http://yoursite.com](http://yoursite.com)重定向到[http://www.yoursite.com 。](http://www.yoursite.com)检查提到[此](http://garrickvanburen.com/archive/rails-cookie-settings-for-cross-subdomain-sessions)问题的博客。

解决方法是在 environment.rb 中设置：config.action_controller.session[:domain] = '.YOURDOMAIN.COM' （确保在其前面加上 .）。这将使 cookie 适用于 www.yourdomain.com 和 yourdomain.com（以及任何其他子域）。

我还建议检查不同环境下的登录行为：`Development`然后清楚地`Production`检查文件中的输出。`log`

这可以帮助您调整问题域，因为您提到您的代码以前可以工作。

**更新：**

facebook oauth 中有一个更新，提到所有应用程序都需要更新到最新版本的 oauth。

所以这可能是你的问题的原因。

它概述了一项计划，要求所有站点和应用程序迁移到 OAuth 2.0，处理 signed_request 参数，并在 10 月 1 日之前获得 SSL 证书。

检查下面的链接：

[http://developers.facebook.com/blog/post/497/](http://developers.facebook.com/blog/post/497/)

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:05:17.980

我找到了解决方案：Omniauth 与 Rails 2.3 完美配合，甚至还有[一个演示应用程序介绍如何将其与 Authlogic 集成](https://github.com/qed42/omniauth-authlogic-demo)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:30:26.820

一个流行的将是与 Omniauth 配合得很好的设计。不过，我不确定与 rails 2 的兼容性，也许是时候升级了……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T02:05:08.770

有什么理由不能使用考拉？ [https://github.com/arsduo/koala](https://github.com/arsduo/koala)

# javascript - 消息：“ActiveXOjbect”未定义

> ID：14280319
> 
> 赞同：0
> 
> 时间：2013-01-11T14:34:28.930
> 
> 标签：javascript, html, xhtml

```
<?xml version = "1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/tr/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml" xml:lang = "en" lang = "en">
    <head>
        <title>Finding Element Values in an XML Document</title>

        <script language = "javascript" type = "text/javascript">
            function getStudentData(){
                var xmlDoc;
                xmlDoc = new ActiveXOjbect("Microsoft.XMLDOM");
                xmlDoc.load("School.xml");

                nodeSchool = xmlDoc.documentElement;
                nodeClass = nodeSchool.firstChild;
                nodeStudents = nodeClass.lastChild;
                nodeStudent = nodeStudents.lastChild;
                nodeFirstName = nodeStudent.firstChild;
                nodeLastName = nodeFirstName.nextSibling;

                outputMessage = "Name: " + nodeFirstName.firstChild.nodeValue + " " + nodeLastName.firstChild.nodeValue;
                message.innerHTML = outputMessage;
            }
        </script>
    </head>

    <body>
        <center>
            <h1>Finding Element Values in an XML Document</h1>

            <div id = "message"></div>
            <p>
                <input type = "button" value = "Get Second Student's Name" onClick = "getStudentData()" />
            </p>
        </center>
    </body>
</html> 
```

它给出了这样的错误

> 网页错误详情
> 
> 用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；InfoPath。 2) 时间戳：2013 年 1 月 11 日星期五 14:33:05 UTC
> 
> 消息：“ActiveXOjbect”未定义行：19 字符：5 代码：0 URI：file:///D:/Priyal/Personal/Programing/XHTML/XML/School.html
> 
> 消息：“ActiveXOjbect”未定义行：19 字符：5 代码：0 URI：file:///D:/Priyal/Personal/Programing/XHTML/XML/School.html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:35:03.163

## 你有一个错字。

替换`ActiveXOjbect`为`ActiveXObject`。

但您还应该注意，`ActiveXObject`它**仅**在 Internet Explorer 中可用。所有其他浏览器都会抛出相同的错误。

# java - Hibernate 不再记录任何内容，因为我重新定位了 log4j.xml 和 hibernate.properties 文件

> ID：14280320
> 
> 赞同：1
> 
> 时间：2013-01-11T14:34:30.033
> 
> 标签：java, hibernate, log4j

我有以下工作组织

*   `src/main/resources/log4j.xml`
*   `src/main/resources/hibernate.properties`

我想重组我的 webapp 如下：

*   `src/main/resources/log/log4j.xml`
*   `src/main/resources/orm/hibernate.properties`

仍然可以很好地记录（在`Logger.info("foobar")`设置了`log4jConfigLocation`上下文参数之后），并且应用程序仍然具有有效的数据库连接。

问题是 Hibernate 不再记录任何内容，即使`hibernate.show_sql`设置为`true`. 知道为什么吗？是否应该指定`log4j.xml`Hibernate 文件的新路径？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:06:07.020

Log4j 首先通过查看系统属性“log4j.configuration”来查找其配置。如果未设置该系统属性，它会在类路径中查找 log4j.properties 或 log4j.xml 文件。

因此，如果您真的想要 src/main/resources/log/log4j.xml 中的 log4j.xml，则必须设置 log4j 配置系统属性。这基本上就是 limc 通过将其作为 vm 参数提供的功能。

就像 limc 所说，您可能应该将 log4j.xml 保留在默认位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:09:42.547

您可以使用此 VM 参数运行您的服务器：-

```
-Dlog4j.configuration=/path/to/log4j.xml 
```

我通常倾向于将 log4j.xml 放在推荐的默认位置，除非有必要这样做……“约定优于配置”很重要，特别是如果其他同行将来可能在同一个项目上工作。

# php - 如何将数据写入csv文件？

> ID：14280321
> 
> 赞同：1
> 
> 时间：2013-01-11T14:34:30.123
> 
> 标签：php, magento

例如：`csv`有两列。结构是：它只有标题。

```
sku name 
```

现在，有一个 foreach 循环：

```
foreach ($collection as $product_all) 
{
    $sku = $product_all['sku'];
    $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);
    $product    = Mage::getModel('catalog/product');
    $product ->load($product_id);
    $name = $product['name'];
} 
```

如果有 8000 行，我想将`$sku`和放入 csv 文件中。`$name`我该怎么办？我使用以下代码。但它不起作用。如何纠正它？谢谢你。

```
foreach ($collection as $product_all) 
{
    $sku = $product_all['sku'];
    $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);
    $product    = Mage::getModel('catalog/product');
    $product ->load($product_id);   
    $name = $product['name'];
    $newCsvData = array();
    if (($handle = fopen("test.csv", "r")) !== FALSE) 
    {
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) 
        {
            $data[0] = $sku;
            $data[2] = $name;
            $newCsvData[] = $data;
        }
        fclose($handle);
    }

    $handle = fopen('test.csv', 'w');
    foreach ($newCsvData as $line) 
    {
        fputcsv($handle, $line);
    }

    fclose($handle);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:49:30.513

没试过，但应该可以。

```
$csvData = array();
foreach ($collection as $product_all) {
  $sku = $product_all['sku'];
  $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);
  $product    = Mage::getModel('catalog/product');
  $product ->load($product_id);   
  $name = $product['name'];

  $csvData[] = array($sku, $name);
}

$handle = fopen('test.csv', 'w');
fputcsv($handle, array('sku', 'name'));
foreach($csvData as $row) {
  fputcsv($handle, $row);
}
fclose($handle); 
```

该`fputcsv`函数会为您处理所有转义，如果您希望 csv 文件适用于任何输入，这可不是一件容易的事。

在阅读了对其他答案的一些评论后，您可以`fputcsv`在循环中移动调用：

```
$handle = fopen('test.csv', 'w');
fputcsv($handle, array('sku', 'name'));

foreach ($collection as $product_all) {
  $sku = $product_all['sku'];
  $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);
  $product    = Mage::getModel('catalog/product');
  $product ->load($product_id);   
  $name = $product['name'];

  fputcsv($handle, array($sku, $name));
}

fclose($handle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:42:09.830

我能想到的最简单的解决方案：

```
// The filename to write to
$csvFile = 'theCSVfile.csv';
$csvRows = array();

foreach ($collection as $product_all) {
  $sku = $product_all['sku'];
  $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);
  $product    = Mage::getModel('catalog/product');
  $product ->load($product_id);
  // Replacing quotation marks with CSV escaped ones
  $name = str_replace( '"' , '""' , $product['name'] );

  $csvRows[] = "{$sku},\"{$name}\"";
}

file_put_contents( $csvFile , implode( "\n" , $csvRows ) ); 
```

请记住，如果`$name`变量包含逗号或其他异常字符，这可能会产生无效的 CSV 语法。

正如**Bogdan**所指出的，这可能是内存密集型的，因为它涉及在对文件执行单次写入之前将所有行保存在 RAM 中。如果这是一个问题，或者您正在处理大量行，则以下代码将写入批处理成更小的块。

```
// The filename to write to
$csvFile = 'theCSVfile.csv';
// Rows per chunk
$csvChunk = 1000;

// Initialise the Array
$csvRows = array();
// Variable to check if first write performed
$firstWriteDone = false;

function writeChunk(){
  global $csvFile, $csvRows, $csvChunk, $firstWriteDone;

  if( count( $csvRows )==$csvChunk ){
    // Chunk Limit Reached - Write to disk
    file_put_contents(
      $csvFile ,
      ( !$firstWriteDone ? "\n" : '' ) . implode( "\n" , $csvRows ) ,
      ( !$firstWriteDone ? FILE_APPEND : 0 )
    );
    // Set the First Write Done flag
    $firstWriteDone = true;
    // Reset the Array
    $csvRows = array();
  }
}

foreach ($collection as $product_all) {
  $sku = $product_all['sku'];
  $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);
  $product    = Mage::getModel('catalog/product');
  $product ->load($product_id);
  // Replacing quotation marks with CSV escaped ones
  $name = str_replace( '"' , '""' , $product['name'] );

  $csvRows[] = "{$sku},\"{$name}\"";

  if( count( $csvRows )==$csvChunk ){
    // Chunk Limit Reached - Write to disk
    writeChunk();
  }
}
if( count( $csvRows ) ){
  // Write the Last Chunk, even if not at the limit
  writeChunk();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:01:01.787

在迭代产品集合时将行写入文件。

```
$fh = fopen('test.csv', 'w');

foreach ($collection as $product_all) {
    $sku = $product_all['sku'];
    $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);
    $product    = Mage::getModel('catalog/product');
    $product ->load($product_id);   
    $name = $product['name'];

    fwrite($fh, "{$sku},{$name}\n");
}

fclose($fh); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:58:31.223

你的代码搞砸了人......对于每个数据库条目..你阅读csv ..从中收集日期（没有？）并将其“写入”到csv ..

修复你的代码：

```
 $newCsvData = array();

    foreach ($collection as $product_all) { 
        $sku = $product_all['sku'];

        $product_id = Mage::getModel('catalog/product')->getIdBySku($sku);

        $product = Mage::getModel('catalog/product');

        $product->load($product_id);

        $name = $product['name'];

        //move BEFORE the foreach
        /*$newCsvData = array();*/

        //remove this ...
        /*if (($handle = fopen("test.csv", "r")) !== FALSE) {
            while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
                $data[0] = $sku;
                $data[2] = $name;
                $newCsvData[] = $data;
            }
            fclose($handle);
        }*/

        //move AFTER the foreach
        /*
        $handle = fopen('test.csv', 'w');

        foreach ($newCsvData as $line) {
            fputcsv($handle, $line);
        }

        fclose($handle);*/
    }

    $handle = fopen('test.csv', 'w');

    foreach ($newCsvData as $line) {
        fputcsv($handle, $line);
    }

    fclose($handle); 
```

检查其他示例，它们可能更好，只是习惯于指出您的代码有什么问题。

# ruby-on-rails - 带有 Rails 的 ShopifyAPI - 如何创建计算字段

> ID：14280322
> 
> 赞同：0
> 
> 时间：2013-01-11T14:34:36.767
> 
> 标签：ruby-on-rails, shopify

我正在构建一个 Rails 应用程序来访问 ShopifyAPI。如何在返回的对象上添加“计算”字段。例如，在我的控制器中，为了获得所有订单，我打电话给：

@orders = ShopifyAPI::Order.find(:all, :params => { :status => 'any'})

这很好用，但我希望@orders 包含一个新的计算字段“全名”（order.customer.firstname + order.customer.lastname 的 concat）

任何想法都非常感谢:-) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:08:31.313

对资源的 GET 意味着您将其从 A 转移到 B，在这种情况下，您正在将订单从您的商店转移到您的应用程序。如果您想连接客户名称，请在您的应用程序代码中执行此操作。您无法更改从 API 请求的数据格式以适合您。你按原样得到它。

# java - Facebook oauth 对话登录错误“发生错误。请稍后再试。”

> ID：14280325
> 
> 赞同：1
> 
> 时间：2013-01-11T14:34:47.883
> 
> 标签：java, android, iphone, batch-file, restfb

我不断收到此错误“发生错误。请稍后再试。” 当我尝试在我的 android 和 iphone 应用程序中使用 oauth 对话框登录 facebook 时。我只是在最近两天才开始遇到这个问题。我不知道为什么会发生这种情况，Facebook 文档中也没有提供有关此的信息。

由于它在很长一段时间内都运行良好，我认为我的代码没有任何问题。

仅供参考：developer.facebook.com 目前正在维护中，这可能是个问题..？

提前致谢

# javascript - Javascript TypeError：JSON数组对象未定义

> ID：14280326
> 
> 赞同：0
> 
> 时间：2013-01-11T14:34:48.100
> 
> 标签：javascript, json

我从服务器响应中获得了一个完美创建的 JSON 对象。

例如：

```
{
    "users": [
        {
            "userId": 20410,
            "firstName": "Viral",
            "lastName": "Shah",
            "loginId": "viralp.shah@tcs.com",
            "userRole": 3
        },
        {
            "userId": 400881,
            "firstName": "Viral",
            "lastName": "Shah",
            "loginId": "viralpshah123@gmail.com",
            "userRole": 0
        },
        {
            "userId": 425622,
            "firstName": "Viral",
            "lastName": "Shah",
            "loginId": "viralpshah123@tcs-itontap.com",
            "userRole": 0
        }
    ]
} 
```

我在使用 AJAX 的 JavaScript 中使用它，如下所示：

```
var jsonobj2 = null;
var respObj = getSearchedWPUsers(firstname, lastname, loginid); //return json response
var len = respObj.length;
jsonobj2 = eval('(' + respObj + ')');

var tablehtml = "<table><tr><td><b>First Name</td><td><b>Last Name</td><td><b>Login Id</td><td><b>Editing Rights</td></tr><tr></tr>";

for (i = 0; i < len; i++) {
  tablehtml = tablehtml + "<tr>";
  //--------------
  tablehtml = tablehtml + "<td>";
  tablehtml = tablehtml + jsonobj2.users[i].firstName;
  tablehtml = tablehtml + "</td>";
  //--------------
  tablehtml = tablehtml + "<td>";
  tablehtml = tablehtml + jsonobj2.users[i].lastName;
  tablehtml = tablehtml + "</td>";
  //--------------
  tablehtml = tablehtml + "<td>";
  tablehtml = tablehtml + jsonobj2.users[i].loginId;
  tablehtml = tablehtml + "</td>";
  //--------------
  tablehtml = tablehtml + "<td><b>";
  var role = jsonobj2.users[i].userRole;
  if (role == 1 || role == 2 || role == 3) tablehtml = tablehtml + "<a href ='javascript:removeXML(" + jsonobj2.users[i].userId + ")'><u><font color='red'>Revoke access</font></a> ";
  else tablehtml = tablehtml + "<a href ='javascript:generateXML(" + jsonobj2.users[i].userId + ")'><u><font color='blue'>Assign access</font></a> ";

  tablehtml = tablehtml + "</td>";
  tablehtml = tablehtml + "</tr>";

}
tablehtml = tablehtml + "</table>";

document.getElementById("TableHolder").innerHTML = tablehtml;

//-------------------------- 
```

它会引发如下错误

> `TypeError: jsonobj2.users[i] is undefined`
> `[Break On This Error]`
> `tablehtml = tablehtml + jsonobj2.users[i].firstName;`

尝试过`JSON.parse(serverresponse);`——什么也没发生

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:41:59.553

试试这个：

```
jsonobj2 = eval('(' + respObj + ')');
var len = jsonobj2.users.length; 
```

据我了解，`respObj`是一个包含 JSON 响应的字符串，但仍需要对其进行解析。所以，如果你这样做`respObj.length`，你得到的是字符串的长度，而不是用户数组的长度。`JSON.parse`另外，我建议您使用（只要浏览器可用）而不是使用来解析此响应`eval`：

```
var respObj = getSearchedWPUsers(firstname, lastname, loginid);
var jsonobj2 = JSON.parse ? JSON.parse(respObj) : eval('(' + respObj + ')');
var len = respObj && respObj.users ? respObj.users.length : 0; 
```

然而，正如 Felix Kling 和 Aamir Adnan 所说，ajax 调用大多是异步的，所以你可以传递一个回调函数作为参数，它会按照你的意愿处理响应：

```
getSearchedWPUsers(firstname, lastname, loginid, function(respObj){
    var jsonobj2 = JSON.parse ? JSON.parse(respObj) : eval('(' + respObj + ')');
    var len = respObj && respObj.users ? respObj.users.length : 0;
    var tablehtml = "<table><tr><td><b>First Name</td><td><b>Last Name</td><td><b>Login Id</td><td><b>Editing Rights</td></tr><tr></tr>";

    for (i = 0; i < len; i++) {
        tablehtml = tablehtml + "<tr>";
        //--------------
        tablehtml = tablehtml + "<td>";
        tablehtml = tablehtml + jsonobj2.users[i].firstName;
        tablehtml = tablehtml + "</td>";
        //--------------
        tablehtml = tablehtml + "<td>";
        tablehtml = tablehtml + jsonobj2.users[i].lastName;
        tablehtml = tablehtml + "</td>";
        //--------------
        tablehtml = tablehtml + "<td>";
        tablehtml = tablehtml + jsonobj2.users[i].loginId;
        tablehtml = tablehtml + "</td>";
        //--------------
        tablehtml = tablehtml + "<td><b>";
        var role = jsonobj2.users[i].userRole;
        if (role == 1 || role == 2 || role == 3)
            tablehtml = tablehtml + "<a href ='javascript:removeXML(" + jsonobj2.users[i].userId + ")'><u><font color='red'>Revoke access</font></a> ";

        else tablehtml = tablehtml + "<a href ='javascript:generateXML(" + jsonobj2.users[i].userId + ")'><u><font color='blue'>Assign access</font></a> ";

        tablehtml = tablehtml + "</td>";
        tablehtml = tablehtml + "</tr>";

    }
    tablehtml = tablehtml + "</table>";

    document.getElementById("TableHolder").innerHTML = tablehtml;
}); 
```

# google-chrome - Chrome 版本 11，无法运行 background.js

> ID：14280333
> 
> 赞同：0
> 
> 时间：2013-01-11T14:35:12.930
> 
> 标签：google-chrome, google-chrome-extension

我在 Google chrome 中创建了一个简单的扩展，下面是我的 manifast.json

```
{
    "name":"Hello World",
    "version":"1.0",
    "manifest_version":2,
    "description":"The first extension that I made.",
    "browser_action":{
        "default_icon":"icon.png"
    },
    "background": {
        "scripts": ["background.js"]
    },
    "permissions":[
        "tabs", "http://*/*", "https://*/*"
    ]
} 
```

下面是我的 background.js。

```
alert('test application'); 
```

现在，扩展正在加载，但没有运行后台页面。

有人可以帮我吗？它在版本 24 上运行良好，但我想创建一个扩展来测试我的网页，它应该在任何 Chrome 版本上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:29:46.390

为什么还要使用 Chrome 11？它太旧了。Chrome 24 稳定版刚刚发布。

但是，如果您确实需要支持不支持“manifest_version”的旧版 Chrome：2（例如，支持其他未与 Chrome 更新的基于 Chromium 的浏览器），这里有一些建议。

*   编写 manifest.json 的多个版本，并使用不同版本的 Chrome 打包你的扩展，以支持旧版本和最新版本的 Chrome。说`your_extension_chrome17.crx`和`your_extension_chrome18.crx`（清单版本 2）。要求您的用户根据他们的 Chrome 版本下载相应的软件包。请注意，您必须使用`"background_page": "bg.html"`where bg.html 是包含背景脚本的背景页面，而不是`"background": {...}`（并且“background_page”不能在 v2 清单中使用）。`"manifest_version": 2`在 Chrome 17 之前将被默默忽略，所以这不会是一个麻烦。
*   查看[https://developer.chrome.com/trunk/extensions/whats_new.html](https://developer.chrome.com/trunk/extensions/whats_new.html)以大致了解何时支持这些新 API 并考虑旧版本的解决方法。
*   除非您需要支持 Chrome 6 或更早版本（您确定吗？），否则未知权限（在较新版本中受支持）将被静默忽略。
*   为了获得自动更新支持，您需要注意更新清单。用于`minprodversion`防止安装新版本的包（也在`minimum_chrome_version`manifest.json 中设置）并在更新清单中包含多个条目。请注意，一个元素只能包含一个元素，因此您必须使用多个元素。有关详细信息，请参阅[https://developer.chrome.com/extensions/autoupdate.html](https://developer.chrome.com/extensions/autoupdate.html)。例如：

```
<?xml version='1.0' encoding='UTF-8'?>
<gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'>
  <app appid='aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'>
    <updatecheck codebase='http://myhost.com/mytestextension/your_extension_chrome18.crx' version='2.0' prodversionmin='18.0.1025.142'/>
  </app>
  <app appid='aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'>
    <updatecheck codebase='http://myhost.com/mytestextension/your_extension_chrome17.crx' version='2.0' prodversionmin='3.0.193.0'/>
  </app>
</gupdate> 
```

并且一定要在不同的版本中彻底测试你的扩展，虽然这会很头疼。据我所知，您不能将这些技巧用于托管在 Chrome Web Store 中的扩展程序。

# c - 在C中将十进制转换为二进制

> ID：14280336
> 
> 赞同：2
> 
> 时间：2013-01-11T14:35:30.607
> 
> 标签：c, binary, decimal

我正在尝试将十进制转换为二进制，例如 192 到 11000000。我只需要一些简单的代码来执行此操作，但到目前为止我的代码不起作用：

```
void dectobin(int value, char* output)
{
    int i;
    output[5] = '\0';
    for (i = 4; i >= 0; --i, value >>= 1)
    {
        output[i] = (value & 1) + '0';
    }
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:40:00.247

该值不是十进制的。计算机内存中的所有值都是二进制的。

您要做的是使用特定的基数将 int 转换为字符串。有一个功能，它被称为`itoa`. [http://www.cplusplus.com/reference/cstdlib/itoa/](http://www.cplusplus.com/reference/cstdlib/itoa/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-24T06:21:38.393

首先`192`不能用`4`位表示

`192 = 1100 0000`这需要最少的`8`位数。

这是一个将十进制数系统转换为二进制数系统的简单[C程序](http://codeforwin.org/2015/08/c-program-to-convert-from-decimal-to-binary-number-system.html)

```
#include <stdio.h>  
#include <string.h>  

int main()  
{  
    long decimal, tempDecimal;  
    char binary[65];  
    int index = 0;  

    /* 
     * Reads decimal number from user 
     */  
    printf("Enter any decimal value : ");  
    scanf("%ld", &decimal);  

    /* Copies decimal value to temp variable */  
    tempDecimal = decimal;  

    while(tempDecimal!=0)  
    {  
        /* Finds decimal%2 and adds to the binary value */  
        binary[index] = (tempDecimal % 2) + '0';  

        tempDecimal /= 2;  
        index++;  
    }  
    binary[index] = '\0';  

    /* Reverse the binary value found */  
    strrev(binary);  

    printf("\nDecimal value = %ld\n", decimal);  
    printf("Binary value of decimal = %s", binary);  

    return 0;  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T14:39:44.093

对于您的示例（192），5 位数字是不够的。可能你应该增加`output`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T18:43:33.703

几天前，我正在寻找快速**便携**的做事方式`sprintf("%d", num)`。[在带有 GCC](http://www.strudel.org.uk/itoa/)的 itoa 页面上找到了这个实现：

```
/**
 * C++ version 0.4 char* style "itoa":
 * Written by Lukás Chmela
 * Released under GPLv3.

 */
char* itoa(int value, char* result, int base) {
    // check that the base if valid
    if (base < 2 || base > 36) { *result = '\0'; return result; }

    char* ptr = result, *ptr1 = result, tmp_char;
    int tmp_value;

    do {
        tmp_value = value;
        value /= base;
        *ptr++ = "zyxwvutsrqponmlkjihgfedcba9876543210123456789abcdefghijklmnopqrstuvwxyz" [35 + (tmp_value - value * base)];
    } while ( value );

    // Apply negative sign
    if (tmp_value < 0) *ptr++ = '-';
    *ptr-- = '\0';
    while(ptr1 < ptr) {
        tmp_char = *ptr;
        *ptr--= *ptr1;
        *ptr1++ = tmp_char;
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-13T18:04:31.827

这是将十进制数转换为二进制数的算法

*   将输入的十进制数除以 2 并存储余数。
*   将商存储回输入数字变量。
*   重复这个过程，直到商变为零。
*   等效二进制数将是上述过程中以相反顺序的余数。

您可以在此处查看 c 程序[http://www.techcrashcourse.com/2015/08/c-program-to-convert-decimal-number-binary.html](http://www.techcrashcourse.com/2015/08/c-program-to-convert-decimal-number-binary.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-12T04:47:26.887

您也可以在函数下使用 while 循环来执行此操作。我只是在寻找我的解决方案，但我得到的解决方案不合适，所以我已经按照实际方法完成了它（使用 2 划分直到得到 0 并将提醒存储在一个数组中）并打印数组的反面并[共享这里](http://www.designprotrick.com/2013/08/c-programming-convert-decimal-number-to-binary.html)

```
#include <stdio.h>

    int main()
    {
        long long int a,c;
        int i=0,count=0;
        char bol[10000];
        scanf("%lld", &a);
        c = a;
        while(a!=0)
        {
            bol[i] = a%2;
            a = a / 2;
            count++;
            i++;
        }
        if(c==0)
        {
            printf("0");
        }
        else
        {
            for(i=count-1; i>=0; i--)
            {
                printf("%d", bol[i]);
            }
        }
        printf("\n");
        return 0;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T15:21:26.193

那么...您是否检查了代码的输出以了解它为什么不起作用？

```
So iteration 1 of your loop:
value = 192
i = 4
output[i] = (11000000 & 1) + '0' = 0 + 48 = 48 (char `0`)

Iteration 2 of your loop:
value = 96
i = 3
output[i] = (1100000 & 1) + '0' = 0 + 48 = 48 (char `0`)

Iteration 3 of your loop:
value = 48
i = 2
output[i] = (110000 & 1) + '0' = 0 + 48 = 48 (char `0`)

Iteration 4 of your loop:
value = 24
i = 1
output[i] = (11000 & 1) + '0' = 0 + 48 = 48 (char `0`)

Iteration 5 of your loop:
value = 12
i = 0
output[i] = (1100 & 1) + '0' = 0 + 48 = 48 (char `0`)

Final string: "00000"  and you wanted: "11000000" 
```

看到你的代码有什么问题吗？没有。我也没有，你只是还不够远。将您的输出/循环更改为：

```
output[8] = '\0';
for (i = 7; i >= 0; --i, value >>= 1) 
```

然后您将返回正确的结果。

我会推荐一种更通用的方法，您使用的是固定长度的字符串，这将您限制为一定长度的二进制数。您可能想要执行以下操作：

```
loop while number dividing down is > 0
count number of times we loop
malloc an array the correct length and be returned 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-01T05:45:56.393

```
#include <stdio.h>
#include <stdlib.h>
void bin(int num) {
    int n = num;
    char *s = malloc(sizeof(int) * 8);
    int i, c = 0;
    printf("%d\n", num);

    for (i = sizeof(int) * 8 - 1; i >= 0; i--) {
        n = num >> i;
        *(s + c) = (n & 1) ? '1' : '0';
        c++;
    }
    *(s + c) = NULL;
    printf("%s", s); // or you can also return the string s and then free it whenever needed
}

int main(int argc, char *argv[]) {
    bin(atoi(argv[1]));
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-11T14:56:17.233

它看起来像这样，但要小心，你必须反转结果字符串:-)

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char output[256]="";

int main()
{
int x= 192;
int n;
n = x;
int r;
do {
r = n % 2;
if (r == 1)
   strcat(output,"1");
else strcat(output,"0");
n = n / 2;
}
while (n > 0);

printf("%s\n",output);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-06T04:06:10.030

//使用堆栈将十进制转换为二进制的C程序

```
#include<stdio.h>

#define max 100

int stack[max],top=-1,i,x;  

void push (int x)
{
  ++top;
  stack [top] = x;
}

int pop ()
{ 
   return stack[top];
}   

void  main()
{
  int num, total = 0,item;
  print f( "Please enter a decimal: ");
  scanf("%d",&num);
  while(num > 0)
  {  
    total = num % 2;
    push(total);
    num /= 2;
  }

 for(i=top;top>-1;top--)
 {     
     item = pop ();
     print f("%d",item);
 }

 } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-27T09:40:23.573

***C语言*十进制转二进制**

 *```
#include<stdio.h>
void main()
{
    long int n,n1,m=1,rem,ans=0;
    printf("\nEnter Your Decimal No (between 0 to 1023) :: ");
    scanf("%ld",&n);

    n1=n;
    while(n>0)
    {
        rem=n%2;
        ans=(rem*m)+ans;
        n=n/2;
        m=m*10;
    }

    printf("\nYour Decimal No is   :: %ld",n1);
    printf("\nConvert into Binary No is :: %ld",ans);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-23T14:38:35.990

**这是最简单的方法**

```
#include <stdio.h>

void main()
{
    int n,i,j,sum=0;
    printf("Enter a Decimal number to convert it to binary : ");
    scanf("%d",&n);
    for(i=n,j=1;i>=1;j*=10,i/=2)
        sum+=(i%2)*j;
    printf("\n%d",sum);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-27T13:45:38.867

这是一个将数字从十进制转换为二进制的简单程序

```
#include <stdio.h>
#include <conio.h>
void decToBinary(int);

int main()
{
    int number;

    printf("Enter number to convert to binary: ");
    scanf("%d", &number);

    decToBinary(number);
  return 0;
}

void decToBinary(int num)
{
    if (num == 0)
    {
        return ;
    }

    decToBinary(num / 2);
    printf("%d", num % 2);
} 
```

程序的输出： ![程序的输出](../Images/656fedbee9c9ab0e30557b9fa5667d6a.png)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-01-11T15:03:10.447

也许理解该算法将允许您编写或修改自己的代码以满足您的需要。我确实看到您没有足够的 char 数组长度来显示 192 的二进制值（您需要 8 位二进制，但您的代码只给出 5 位二进制）

这是一个清楚地解释算法的[页面。](http://www.cs.uaf.edu/~cs301/notes/Chapter3/node7.html)

我不是 C/C++ 程序员，所以这是我基于算法示例的 C# 代码贡献。

```
int I = 0;
int Q = 95;
string B = "";
while (Q != 0)
{
    Debug.Print(I.ToString());
    B += (Q%2);
    Q = Q/2;
    Debug.Print(Q.ToString());
    I++;
}

Debug.Print(B); 
```

所有的 Debug.Print 只是为了显示输出。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-02-06T10:27:53.063

```
//decimal to binary converter
long int dec2bin(unsigned int decimal_number){
  if (decimal_number == 0)
    return 0;
  else
    return ((decimal_number%2) + 10 * dec2bin(decimal_number/2));
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-01-04T19:00:15.087

```
number=215
a=str(int(number//128>=1))+str(int(number%128>=64))+
str(int(((number%128)%64)>=32))+str(int((((number%12
8)%64)%32)>=16))+str(int(((((number%128)%64)%32)%16)>=8))
+str(int(((((((number%128)%64)%32)%16)%8)>=4)))
+str(int(((((((((number%128)%64)%32)%16)%8)%4)>=2))))
+str(int(((((((((((number%128)%64)%32)%16)%8)%4)%2)>=1)))))
print(a) 
```

您还可以使用“if”、“else”语句来编写此代码。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-10-21T18:24:34.557

```
int main() 
{ 
 int n, c, k;
 printf("Enter an integer in decimal number system: ");
 scanf("%d", &n);
 printf("%d in binary number system is: ", n);
 for (c = n; c > 0; c = c/2) 
  {
   k = c % 2;//To
   k = (k > 0) ? printf("1") : printf("0");
  }
 getch();
 return 0; 
} 
```*

# jquery - 页面转换后的 JQuery 移动冲突

> ID：14280343
> 
> 赞同：1
> 
> 时间：2013-01-11T14:36:00.210
> 
> 标签：jquery, html, jquery-mobile

我是这个社区的新手，首先很抱歉我来自委内瑞拉的英语不好，我的问题如下。我正在开发一个带有标题菜单动画的 jquery 移动应用程序，该项目是一个单页 HTML 文档，包含许多“页面”容器，在第一次加载时工作正常，但是当使用 $.mobile.changePage() 更改页面时菜单工作错误。

标题 html

```
<div data-role="header" data-position="fixed" style="text-align:center;">
   <div id="navigation">
      <div class="home" style="height:100%">
         <div class="cls" style="height:100%;"></div>
         <div class="cls2" style="height:100%;"></div>
         <div class="cls3" style="height:100%;"></div>
         <div class="cls4" style="height:100%;"></div>
         <div class="cnf" style="height:100%;"></div>
      </div>
   </div>
    <h1 id="title" style="padding:4px;"></h1>

   <div id="navigation2">
      <div class="home2" style="height:100%">
         <div class="home2" style="height:100%">
            <div class="img" style="height:95%;"></div>
            <div class="cls" style="height:95%;"></div>
            <div class="cls2" style="height:95%;"></div>
            <div class="cls3" style="height:95%;"></div>
            <div class="cls4" style="height:90%;"></div>
         </div>
      </div>
   </div>
</div> 
```

javascript

```
 $('div.cnf').bind('click',function(e) {
    e.preventDefault();
    if (click === null) {          
        $('div.home').stop(true, true).animate({
            'marginLeft' : '+=80%'
        }, 1000);
        click = 1;

    }else{            
        $('div.home').stop(true, true).animate({
            'marginLeft' : '-=80%'
        }, 1000);
        resetmenu();
    }

});

$('div.home2').toggle(function(e) {
    e.preventDefault();
    $(this).stop(true, true).animate({
        'marginLeft' : '-=80%'
    }, 1000);

}, function() {       
    $(this).stop(true, true).animate({
       'marginLeft' : '+=80%' 
    }, 1000);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:49:52.480

使用 $.mobile.changePage() 时，请了解您实际上并没有“更改”到该页面，并且您没有处理 head 标记中的任何脚本。**在 JQM 中，当您使用 changePage() 时，JQM 会从指定文件中的第一个data-role="page"**开始获取所有 HTML （绕过 head 部分）。

这里的链接非常好： [Jquery Mobile - $.mobile.changepage not loading external .JS files](https://stackoverflow.com/questions/7449402/jquery-mobile-mobile-changepage-not-loading-external-js-files)

希望有帮助

~红色

# c# - Azure 存储队列中的重复检测

> ID：14280346
> 
> 赞同：8
> 
> 时间：2013-01-11T14:36:13.230
> 
> 标签：c#, azure, azure-storage

我想知道是否有任何优雅的方法来确保队列始终具有不同的消息（与重复检测窗口或任何时间段无关）？

我知道服务总线队列提供会话概念（正如我提到的服务总线队列的重复检测对我没有帮助，因为它取决于时间段），这可以达到我的目的，但我不希望我的组件依赖于另一个 Azure服务，就因为这个功能。

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T15:02:15.937

这是不可能可靠地做到的。

只是没有机制可以查询存储队列并找出具有相同内容的消息是否已经存在或以前存在。您可以尝试使用一些存储表来实现自己的逻辑，但这并不可靠——因为进入表可能会成功，然后进入队列可能会失败——现在你可能会在表中有错误的数据。

您的代码应始终假定它可以检索包含已处理的相同数据的消息。这是因为当正在处理消息的工作人员崩溃或花费太长时间时，消息可能会返回队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-12T18:05:19.523

您可以使用服务总线。类似于 Azure 存储队列，但它允许 256Kb-1MB 的消息并进行重复检测

# javascript - 鼠标悬停时的 FullCalendar 事件给出 jQuery 错误

> ID：14280349
> 
> 赞同：1
> 
> 时间：2013-01-11T14:36:18.207
> 
> 标签：javascript, jquery, firebug, fullcalendar

在周视图下，`mouseOver`我在萤火虫中收到此错误消息：

> `Error: Syntax error, unrecognized expression: ,
> throw new Error( "Syntax error, unrecognized expression: " + msg );
> jquery-1.8.3.js (line 4680)`

有没有人遇到过这样的问题，或者有没有办法调试错误的根源？

提前
致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T01:59:07.093

它看起来像一个选择器错误：

```
$("abc, def, "); // or
$("<div,"); 
```

不确定。

如果您查看 jQuery 1.8.3 的源代码，您会在 4680 行附近找到这些行：

```
/*LINE: 4679*/ Sizzle.error = function( msg ) {
/*LINE: 4680*/     throw new Error( "Syntax error, unrecognized expression: " + msg );
/*LINE: 4681*/ }; 
```

很难从这里调试您的代码，但您可以尝试在`arguments.callee.caller`之前放置`throw new Error`：

```
Sizzle.error = function( msg ) {
    console.log( arguments.callee.caller );
    throw new Error( "Syntax error, unrecognized expression: " + msg );
}; 
```

这会告诉你什么函数正在调用这个函数。从那里您可以尝试使用相同的方法向上旅行。最后你会发现你的问题。

* * *

**是什么`arguments.callee.caller`**？

`arguments`是一个类似属性的数组，包含解析为函数的所有参数：

```
function a() {}
a(1, 2, 3); // Inside a arguments will be: [1, 2, 3] 
```

`arguments`有一个名`callee`为此属性的属性包含对名为例如的函数的引用。它自己：

```
function a() {} // arguments.callee === a. 
```

`arguments.callee`有一个称为此属性的非标准（但标准，只是未在 ECMA 中描述）`caller`属性包含对在运行时调用它的函数的引用。

```
function a() {
    b()
}
function b() {}; // arguments.callee.caller === a;

a(); 
```

还有一些文档：

*   [论据](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)
*   [arguments.callee](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)
*   [函数调用者](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/caller)

你知道`console`-object吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:09:12.980

通过离开 jQuery-Mobile 并仅返回 jQuery-UI 解决了这个问题。FullCalendar 在 jQuery-Mobile 下无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T09:53:56.247

问题是由 jQuery-Mobile 引起的。FullCalendar 无法在 jQuery-Mobile 环境中正常运行。回到 jQuery-UI 之后，一切都恢复正常了。

感谢您的帮助

# ruby-on-rails - 具有持久对象的 Elasticsearch/tire 嵌套查询

> ID：14280353
> 
> 赞同：0
> 
> 时间：2013-01-11T14:36:24.367
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我正在尝试使用 Tire 对持久模型执行嵌套查询。模型（事物）具有标签，我正在寻找所有带有特定标签的事物

```
class Thing
  include Tire::Model::Callbacks
  include Tire::Model::Persistence

  index_name { "#{Rails.env}-thing" }

  property :title, :type => :string
  property :tags, :default => [], :analyzer => 'keyword', :class => [Tag], :type => :nested
end 
```

嵌套查询看起来像

```
class Thing 
   def self.find_all_by_tag(tag_name, args)
      self.search(args) do
         query do
            nested path: 'tags' do
               query do
                  boolean do
                     must { match 'tags.name', tag_name }
                 end
               end
            end
         end
      end 
   end 
 end 
```

当我执行查询时，出现“非嵌套类型”错误

```
Parse Failure [Failed to parse source [{\"query\":{\"nested\":{\"query\":{\"bool\":{\"must\":[{\"match\":{\"tags.name\":{\"query\":\"TestTag\"}}}]}},\"path\":\"tags\"}},\"size\":10,\"from\":0,\"version\":true}]]]; nested: QueryParsingException[[test-thing] [nested] nested object under path [tags] is not of nested type]; }]","status":500} 
```

查看轮胎的来源，似乎映射是从传递给“属性”方法的选项创建的，所以我认为我不需要在类中单独的“映射”块。谁能看到我做错了什么？

**更新**

按照下面 Karmi 的回答，我重新创建了索引并验证了映射是否正确：

```
thing: {
  properties: {
    tags: {
      properties: {
        name: {
          type: string
        }
        type: nested
      }
    }
    title: {
      type: string
    }
   } 
```

但是，当我向 Thing 添加新标签时

```
thing = Thing.new
thing.title = "Title"
thing.tags << {:name => 'Tag'}
thing.save 
```

映射恢复为“动态”类型并且“嵌套”丢失。

```
thing: {
  properties: {
    tags: {
      properties: {
        name: {
          type: string
        }
        type: "dynamic"
      }
    }
    title: {
      type: string
    }
   } 
```

查询失败并出现与以前相同的错误。添加新标签时如何保留嵌套类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:59:32.103

是的，确实，`property`声明中的映射配置在 Persistence 集成中传递。

在这种情况下，总是有一个也是唯一的第一个问题：**映射看起来如何真实**？

所以，使用例如。该`Thing.index.mapping`方法或 Elasticsearch 的 REST API：`curl localhost:9200/things/_mapping`看看。

很有可能，您的索引是根据您使用的 JSON 使用动态映射创建的，并且您稍后更改了映射。在这种情况下，索引创建逻辑被跳过，映射不是你所期望的。

* * *

当索引映射与模型中定义的映射不同时，会出现关于显示警告的*轮胎* [问题。](https://github.com/karmi/tire/issues/161)

# android - 如何设置按钮的相同宽度和高度

> ID：14280355
> 
> 赞同：7
> 
> 时间：2013-01-11T14:36:26.957
> 
> 标签：android, android-layout

我有一个 xml 布局文件，其中有一个`Button`. 的高度`Button`设置为`match_parent`。现在我希望宽度与按钮的高度相同，以制作方形按钮，而不管更改父布局的高度和宽度..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T14:45:03.387

这个怎么样：

```
Button yourBtn = (Button) findViewById.(R.id.yourBtn);

int btnSize=yourBtn.getLayoutParams().width;
yourBtn.setLayoutParams(new LayoutParams(btnSize, btnSize)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:49:53.497

您必须以编程方式进行。XML 布局仅适用于静态内容。

在屏幕上至少绘制一次按钮后，您将通过为其设置新`LayoutParams`的所需值来调整其大小。

# sql - 在 Sybase 中，将 sql 时间戳转换为 unixtime

> ID：14280361
> 
> 赞同：1
> 
> 时间：2013-01-11T14:37:00.320
> 
> 标签：sql, timestamp, type-conversion, sybase, unix-timestamp

我正在使用 Sybase 数据库，如何将出现在数据库中的 SQL 时间戳更改`2012-03-23 11:27:04.870000`为 unixtime。

我希望能够在 sql 中做这样的事情：

```
select time1, unix_time_function(time1) as time1_to_unixtime from mytable 
```

可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:56:39.927

根据[Wikipedia](http://en.wikipedia.org/wiki/Unix_time)，UNIX 时间是自 1970 年 1 月 1 日以来经过的秒数（不包括闰秒）。

记住这一点（如果我没有完全失去它）它应该只是 1970-01-01 和你的时间之间的差异，以秒为单位：

```
SELECT time1,
       Datediff(SECOND, '1970-01-01', time1) AS time1_to_unixtime
FROM   mytable 
```

我不确定是否`DateDiff`考虑闰秒，如果没有，可能需要进行一些调整。

`DateDiff`Sybase 的文档在[这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks139.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:11:15.413

Sybase 中的`convert`函数具有不同的选项来转换时间，例如

```
select convert(char(20),getdate(),101) --- value from 101 to 123 
```

查看[Sybase 信息中心中的这篇文章](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks125.htm)。

# javascript - Three.js 的第一个示例不起作用

> ID：14280363
> 
> 赞同：1
> 
> 时间：2013-01-11T14:37:03.413
> 
> 标签：javascript, three.js, webgl

我要学习了`three.js`。我已经`library`从 github 下载了：[**three.js**](https://github.com/mrdoob/three.js/)

我尝试在上面的链接中运行 three.js 的第一个示例。奇怪的问题是，它在 jsFiddle 中运行，但在我的计算机中却无法运行。

我在控制台中有这个错误：

```
TypeError: document.body is null
[Break On This Error]   
document.body.appendChild( renderer.domElement ); 
```

**[jsFiddle Live Working Demo](http://jsfiddle.net/BlackSRC/XWCRM/1/)**

这是我从上面的链接完全复制的代码：

*是的，页面中包含的three.js。*

```
 var camera, scene, renderer;
    var geometry, material, mesh;

    init();
    animate();

    function init() {

        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
        camera.position.z = 1000;

        scene = new THREE.Scene();

        geometry = new THREE.CubeGeometry( 200, 200, 200 );
        material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );

        mesh = new THREE.Mesh( geometry, material );
        scene.add( mesh );

        renderer = new THREE.CanvasRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );

        document.body.appendChild( renderer.domElement );

    }

    function animate() {

        // note: three.js includes requestAnimationFrame shim
        requestAnimationFrame( animate );

        mesh.rotation.x += 0.01;
        mesh.rotation.y += 0.02;

        renderer.render( scene, camera );

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:49:55.683

您的代码在浏览器解析 HTML 文档并构建 DOM 之前运行。这`document.body`就是未定义的原因。

使用“加载”事件处理程序：

```
window.onload = function() {
  // all that code here
}; 
```

您的 jsfiddle 版本有效，因为该站点为您执行此操作；这就是左侧控制面板上的顶部选择。

哦，另外，从 jsfiddle 复制代码时必须小心。除非他们通过最近的整容修复了它，否则当您复制/粘贴时很容易找到奇怪的隐藏字符，从而导致神秘的 JavaScript 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:35:58.117

只需在里面写你的代码`onload`。它工作正常。

```
window.onload = function() { // your code } 
```

# cocos2d-iphone - Cocos2d：用于 Retina 设备的 CCMenu 按钮具有较小的可触摸区域

> ID：14280366
> 
> 赞同：0
> 
> 时间：2013-01-11T14:37:32.027
> 
> 标签：cocos2d-iphone

对于我正在进行的项目，我正在执行以下操作：

```
CCLabelBMFont *howtoplayGameLabelFont = [CCLabelBMFont labelWithString:@"HOW TO PLAY" fntFile:font];
[howtoplayGameLabelFont setFontsize:fontSize];

CCMenuItemLabel *howtoplayGameLabel = [CCMenuItemLabel itemWithLabel:howtoplayGameLabelFont target:self selector:@selector(startHowToPlay:)];

CCMenu *bottomMenu = [CCMenu menuWithItems:howtoplayGameLabel,creditsGameLabel, nil];
[bottomMenu alignItemsVerticallyWithPadding:padding];
[bottomMenu setPosition:ccp( size.width/2 + bottomXOffSet, size.height/2 + bottomYOffSet)];

[self addChild: bottomMenu z:10]; 
```

对于非视网膜显示器，整个标签都是可点击的，但对于视网膜显示器，标签的一小部分是可点击的。

如何解决这个问题？

完全忘记了我在 CCMenuItemLabel 上添加了 setFontSize 的代码。这里是：

```
-(void)setFontsize:(float)fontsize
{
    Fontsize_   = fontsize * CC_CONTENT_SCALE_FACTOR();
    self.scale = (Fontsize_ / OriginalFontsize_);
} 
```

# windows - 如何以编程方式确定是否安装了 VS2012 Update 1？

> ID：14280367
> 
> 赞同：2
> 
> 时间：2013-01-11T14:37:30.960
> 
> 标签：windows, visual-studio-2012

对于我们的构建系统，我希望能够确保只使用 VS2012 Update 1 而*不是*基本的 VS2012。我怎样才能以编程方式做到这一点？

通常，我会检查是否安装了正确的 Service Pack。但这是一个*更新*，而不是服务包。因此，Service Pack 的所有注册表项仍然为零。

啊，我已经进一步调查了......

在所有情况下，我们都会检查编译器的版本是否符合我们的预期。我被误导了，因为 cl.exe 的 amd64 版本报告的*版本*与更新前 1 (17.00.50727.1) 相同，所以我一直在寻找其他方法来进行检测。另一方面，cl.exe 的 x86、x86_amd64 和 x86_arm 版本都报告了一个新版本 (17.00.51106.1)。

一些人已经要求澄清这是否是在对[MS 博客文章的评论中关于更新](http://blogs.msdn.com/b/vcblog/archive/2012/11/26/visual-studio-2012-update-1-now-available.aspx)而没有任何回应。

我想我可以检查 crtversion.h 中的版本，但现在担心 amd64 编译器尚未更新以与新的 CRT 一起正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:39:20.410

*如果您想要在VS2012*和*VS2012 Update 1*之间更改的注册表项，我建议您签入`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\11.0\SplashInfo`

在 Visual Studio 2012 中没有`EnvVersion`密钥。

在 Visual Studio 2012 Update 1 中，它具有以下值：EnvVersion =`11.0.51106.01 Update 1`

# sql-server - 使用 IN 条件

> ID：14280369
> 
> 赞同：0
> 
> 时间：2013-01-11T14:37:50.993
> 
> 标签：sql-server, tsql, sql-server-2005, stored-procedures

我可以轻松地在 SQL Server 中使用我使用的参数和大多数运算符创建存储`=`过程`LIKE`。但是说到使用`IN`，我真的不明白该怎么做，也找不到一个好的网站来教我。

例子

```
 CREATE PROCEDURE TEST 
    @Ids --- What type should go here?
    AS BEGIN
        SELECT * FROM TableA WHERE ID IN ( @Ids )
    END 
```

这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:40:03.600

在 SQL Server 2008 及更高版本中，您可以使用[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)。

`IN`您声明一个表类型，并且可以将其用作可在子句中使用的存储过程的参数（只读） 。

对于不同的选项，我建议您阅读Erland Sommarskog 所著[的 SQL Server 中优秀数组和列表版本的相关文章。](http://www.sommarskog.se/arrays-in-sql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:03:42.537

我在过去使用添加到我的模式函数中的拆分函数来完成此操作，如此处[所述](http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx)

然后您可以执行以下操作：

```
CREATE PROCEDURE TEST 
@Ids --- What type should go here?
AS BEGIN

    SELECT * FROM TableA WHERE ID IN ( dbo.Split(@Ids, ',') )
END 
```

请记住，IN 函数总是需要一个值表作为结果。SQL Server 足够聪明，可以将字符串转换为这种表格式，只要它们是专门写在过程中的。

但是，您的特定示例中的另一个选项可能是使用联接。这将提高性能，但通常不能真正满足您需要的实际示例。加入版本将是：

```
SELECT * 
FROM TableA AS ta 
    INNER JOIN dbo.Split(@Ids, ',') AS ids 
        ON ta.Id = ids.items 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:32:41.673

如果你问我认为你在问什么，我每天都这样做..

```
WITH myData(FileNames)
AS
(
    SELECT '0608751970%'
    UNION ALL SELECT '1000098846%'
    UNION ALL SELECT '1000101277%'
    UNION ALL SELECT '1000108488%'
)
SELECT DISTINCT f.* 
FROM tblFiles (nolock) f
INNER JOIN myData md 
    ON b.FileNames LIKE md.FileNames 
```

或者，如果您基于另一个表执行此操作：

```
WITH myData(FileNames)
AS
(
    SELECT RTRIM(FileNames) + '%'
    FROM tblOldFiles
    WHERE Active=1
)
SELECT DISTINCT f.* 
FROM tblFiles (nolock) f
INNER JOIN myData md 
    ON b.FileNames LIKE md.FileNames 
```

# python - Pylint 误报 E1101：“Popen”实例没有“投票”成员

> ID：14280372
> 
> 赞同：7
> 
> 时间：2013-01-11T14:38:13.517
> 
> 标签：python, static-analysis, abstract-syntax-tree, pylint

Pylint 正在为子进程模块返回大量误报：

```
E1101:184,7:resetboard: Instance of 'Popen' has no 'poll' member
E1101:188,4:resetboard: Instance of 'Popen' has no 'terminate' member
# etc. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T14:38:13.517

此错误已在`logilab-astng`包中确定： [http ://www.logilab.org/ticket/46273](http://www.logilab.org/ticket/46273)

他们创建了一个名为的新项目`pylint-brain`，该项目将是一组插件并包含在`logilab-astng`. 同时，您可以从此处克隆或下载最新代码：[https ://bitbucket.org/logilab/pylint-brain/overview](https://bitbucket.org/logilab/pylint-brain/overview)

说明在上述网站上，但基本方法是：

1.  提炼`pylint-brain`
2.  将“.../site-packages/logilab/astng/brain”重命名为“.../site-packages/logilab/astng/brain-old”
3.  将提取的“brain”文件夹复制或软链接到“.../site-packages/logilab/astng/brain”
4.  验证 pylint 仍然运行并且`subprocess.Popen`问题已修复

# php - 如何更新幻灯片中呈现的 RSS 提要？

> ID：14280374
> 
> 赞同：0
> 
> 时间：2013-01-11T14:38:14.453
> 
> 标签：php, javascript, jquery, jquery-cycle

我正在尝试在我的网页上放置一个 rss 提要，并希望以幻灯片形式展示这些文章（第 2 周期）。

我正在使用 php 脚本（“functions.php”）来获取提要，一切正常，但我需要有关如何每 5 分钟更新一次提要以检查提要中是否有任何新文章的帮助。

这就是我的 div 中的内容：

```
<div id="rss-news" class="cycle-slideshow" 
data-cycle-fx="fade"
data-cycle-speed="500" 
data-cycle-timeout="6000"
data-cycle-slides="> div"
>
<?php
include("functions.php");
//Runs function with feed url and number of posts as arguments
$my_rss = fetch_rss_feed('http://www.thefeed.com/rss', 10); 
?>

<?php foreach ($my_rss as $k => $v) : ?>
 <div>
 <span class="title"><b><?php echo $v['title']; ?></b></span>
 <!--<span class="date"><?php echo $v['date']; ?></span> -->
 <span class="descr"><?php echo $v['descr']; ?></span>
 <span class="enclosure"><img src="<?php echo $v['enclosure']; ?>"></span>
 </div>
<?php endforeach; ?> 
```

更新：

我试过这个代码。但它同时显示所有文章 - 没有循环：

```
<html>
<head>
<title>Test</title>
<!--<link rel="stylesheet" href="style.css">-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://malsup.github.com/jquery.cycle2.js"></script>
<script type="text/javascript">
function update() {
$("#notice_div").html('Loading..'); 
$.ajax({
type: 'GET',
url: 'getrss.php',
timeout: 2000,
success: function(data) {
  $("#div-one").html(data);
  $("#notice_div").html(''); 
  window.setTimeout(update, 10000);
},
error: function (XMLHttpRequest, textStatus, errorThrown) {
  $("#notice_div").html('Timeout contacting server..');
  window.setTimeout(update, 60000);
}
});
}
$(document).ready(function() {
update();
});
</script>
</head>
<body>
<div id="div-one" class="cycle-slideshow" 
data-cycle-fx="fade"
data-cycle-speed="500" 
data-cycle-timeout="6000"
data-cycle-slides="> div"
></div>
<div id="notice-div"></div>
</body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:11:25.873

为此，您需要 Javascript/jQuery，请在此处查看：[Jquery/Ajax call with timer](https://stackoverflow.com/questions/4542863/jquery-ajax-call-with-timer)所以基本上您正在设置一个每 5 分钟调用一次的函数，该函数提取新数据并将其插入幻灯片的区域位于（jQuery .html() 函数将在这里派上用场）

# java - 定位服务计算

> ID：14280379
> 
> 赞同：-2
> 
> 时间：2013-01-11T14:38:39.100
> 
> 标签：java, android, geolocation

我创建了一个应用程序，它每 1 分钟将电话位置（使用 GPS 卫星）发送到我的 mysql 数据库。

一个位置有时可能会给您不同的结果，例如 st。x # 5 或圣。×#2-8。这对我来说是个问题，因为如果我在同一个位置停留 12 小时（睡觉时），我的数据库将被几乎相同的位置淹没。

我的问题是我如何避免这种情况，在整个 12 小时内，我将获得一个位置，如果可能是最准确的（不太重要）.. 也许可以选择检查手机是否在移动？如果不停止跟踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:34:34.300

正如Android开发人员所建议的[那样](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.app.PendingIntent%29)

通过在方法中使用最小距离`requestLocationUpdate()`。

要确定最小距离，您可以评估最后一个位置的准确度并将阈值设置为准确度的 1.5 倍。

此外，您可以设置一个`minTime`取决于您想要更新位置的频率。还有一个代码教程。

[http://developer.android.com/guide/topics/location/strategies.html#BestEstimate](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)

您可以在其中确定当前位置是否比新位置更好，然后才将其发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:43:08.803

我将从数据库的角度回答您的问题。

如果自上次间隔以来对数据库有任何更改，则应仅插入数据库。

例如，在您睡觉的前一天晚上，您将 x1, y1 发送到带有时间戳 t1 的数据库。您将继续从 t2、t3、t4 将 x1、y1 发送到数据库。您可以将其从数据库中丢弃。一旦开始移动，您将在 t1000 处插入 x2、y2。

在数据库中，只有 t1 和 t1000 两条记录。

如果您想知道 t10 的位置，那么您应该只从 t1 获取结果。

# python - 低级 os.open、os.fdopen 和朋友的用例？

> ID：14280384
> 
> 赞同：13
> 
> 时间：2013-01-11T14:39:06.313
> 
> 标签：python, io, low-level

在 Python 3.2（和其他版本）中，[os.open 的文档](http://docs.python.org/3.2/library/os.html#os.open)指出：

> 此函数适用于低级 I/O。对于正常使用，使用内置函数 open()，它返回一个带有 read() 和 write() 方法（以及更多）的文件对象。要将文件描述符包装在文件对象中，请使用 fdopen()。

[对于 fdopen(](http://docs.python.org/3.2/library/os.html#os.fdopen) ) ：

> 返回连接到文件描述符 fd 的打开文件对象。这是 open() 的别名并接受相同的参数。唯一的区别是 fdopen() 的第一个参数必须始终是整数。

`io.open`在关于and之间区别的问题中的[这条评论](https://stackoverflow.com/questions/7219511/whats-the-difference-between-io-open-and-os-open-on-python/7219537#comment8678465_7219535)`os.open`（*这个区别对我来说是完全清楚的，我总是使用`io.open`，从不`os.open`*）问：*为什么有人会选择 Python 进行低级 I/O？*，但并没有真正得到答案。

我的问题与评论问题非常相似：在 Python 中，通过*,* *,* *,**等**进行低级 I/O 的用例是什么？`os.open``os.fdopen``os.close``os.read`*我曾经认为需要对流程进行去魔化，但[我不再那么确定了](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)。是否有任何任务*只能*使用低级 I/O 而不能使用更高级别的包装器来执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:11:44.027

当我需要使用它[`O_CREAT | O_EXCL`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/open.html)来原子地创建文件时，我会使用它，如果文件存在则失败。如果您的测试发现文件不存在，则无法检查文件是否存在然后创建文件，因为这将产生竞争条件，在您检查和创建之间的过渡期间可以创建文件。

简要查看[您提供的链接](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)，我相信 pidfile 创建有一个竞争条件。

在 Python 3.3 中，添加了[一个新`'x'`模式](http://docs.python.org/3/library/functions.html#open)`open()`似乎可以做到这一点。不过，我还没有尝试过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T15:50:23.517

主要区别：

*   对文件的低级访问是无缓冲的
*   低级访问不可移植
*   低级别允许更细粒度的控制，例如在读取时是否阻塞

低级 io 的用例：

*   该文件是块设备
*   该文件是一个套接字
*   该文件是一个tty
*   ...

在所有这些情况下，您可能希望拥有更细粒度的控制（过度缓冲和阻塞行为）。

您可能永远不需要常规文件的低级函数。我认为大多数时候用例将是一些设备驱动程序的东西。然而，这最好在 C 中完成。但我也可以看到 python 的用例，例如用于设备驱动程序的快速原型设计。

# java - Java中的文件截断操作

> ID：14280385
> 
> 赞同：22
> 
> 时间：2013-01-11T14:39:06.097
> 
> 标签：java, file, file-io

在 Java 中截断文件的最佳实践方法是什么？例如这个虚拟函数，只是作为一个例子来阐明意图：

```
void readAndTruncate(File f, List<String> lines)
        throws FileNotFoundException {
    for (Scanner s = new Scanner(f); s.hasNextLine(); lines.add(s.nextLine())) {}

    // truncate f here! how?

} 
```

由于该文件充当占位符，因此无法删除该文件。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-11T14:44:33.150

使用[FileChannel.truncate](https://docs.oracle.com/javase/8/docs/api/java/nio/channels/FileChannel.html#truncate-long-)：

```
try (FileChannel outChan = new FileOutputStream(f, true).getChannel()) {
  outChan.truncate(newSize);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-30T17:54:07.063

一个使用[Files.write()](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#write-java.nio.file.Path-byte:A-java.nio.file.OpenOption...-)的班轮...

```
Files.write(outFile, new byte[0], StandardOpenOption.TRUNCATE_EXISTING); 
```

也可以使用[File.toPath()](https://docs.oracle.com/javase/8/docs/api/java/io/File.html#toPath--)从 File 转换为 Path 之前。

还允许其他**StandardOpenOptions**。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-11T14:48:07.810

`new FileWriter(f)`将在打开时截断您的文件（为零字节），之后您可以向其写入行

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T14:42:42.360

这取决于您将如何写入文件，但最简单的方法是打开一个新的[FileOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29)而不指定您打算追加到文件（注意：基本`FileOuptutStream`构造函数将截断文件，但如果您想明确文件被截断，我建议使用双参数变体）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-15T18:57:45.637

`RandomAccessFile.setLength()` seems to be exactly what's prescribed in this case.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T14:41:55.160

使用[RandomAccessFile#read](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html#read%28byte%5B%5D%29)并将以这种方式记录的字节推送到新`File`对象中。

```
RandomAccessFile raf = new RandomAccessFile(myFile,myMode);  
byte[] numberOfBytesToRead = new byte[truncatedFileSizeInBytes];  
raf.read(numberOfBytesToRead);    
FileOutputStream fos = new FileOutputStream(newFile);  
fos.write(numberOfBytesToRead); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-26T20:06:23.040

使用 Apache Commons IO API：

```
 org.apache.commons.io.FileUtils.write(new File(...), "", Charset.defaultCharset()); 
```

# zend-framework2 - Zend 框架 2 - 普通类

> ID：14280389
> 
> 赞同：0
> 
> 时间：2013-01-11T14:39:12.807
> 
> 标签：zend-framework2

我想为所有模块使用一个公共类文件。我喜欢将所有公共变量和数组保留在该文件中。

我创建了一个文件夹“Common”，就像“Zend”库文件夹一样。并在该文件夹中创建了一个类 Common.php。

之后，我`use Common/Common`在控制器中初始化；

创建了一个对象

```
$common = new Common(); 
```

它显示了一个错误。

> '找不到类 Common\Common'。

我如何在 ZF2 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:38:17.907

真的建议您使用 Zend Framework 2 跳出单一思想。使模块独立且自包含。这也意味着您不应该让大类的类在您的应用程序中四处飘荡。

例如，如果您想拥有一个共享的记录器实例，请创建一个您的其他模块所依赖的日志模块。缓存、数据库连接等也是如此。我将有其他几个人真正试图说服人们不要使用这些策略。

当您对为什么需要“通用”类提供更多见解时，也许更详细的答案可以帮助您做出架构决策。就个人而言，我建议您首先查看您的模块化架构，而不是尝试解决这个特定问题。

PS。真正的答案：可能你有一个自动加载问题......

# lambda - CUDA中如何使用thrust::placeholders初始化设备向量？

> ID：14280391
> 
> 赞同：1
> 
> 时间：2013-01-11T14:39:28.530
> 
> 标签：lambda, cuda, gpu, placeholder, thrust

我是 lambda 表达式的新手。我正在尝试`data[10]`使用以下公式初始化推力装置矢量，

数据[i] = i * 0.1 + 0.5;

我已经包含了这些头文件和命名空间

```
#include <thrust/device_vector.h>
#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/transform_iterator.h>
#include <thrust/functional.h>
using namespace thrust::placeholders; 
```

这是定义和初始化的代码`data`，

```
thrust::device_vector<double> data(
        thrust::make_transform_iterator(
                thrust::counting_iterator<double>(0), _1 * 0.1 + 0.5),
        thrust::make_transform_iterator(
                thrust::counting_iterator<double>(0), _1 * 0.1 + 0.5) + 10); 
```

但是它无法编译，显示很长的错误消息，如帖子末尾所示。

我做错什么了吗？

我正在使用 CUDA 5.0、CentOS 6.3 x86_64、gcc 4.4.6

```
/usr/local/cuda-5.0/bin/../include/thrust/iterator/detail/transform_iterator.inl(94): error: no instance of overloaded function "thrust::detail::functional::actor<Eval>::operator() [with Eval=thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>]" matches the argument list
            argument types are: (double)
            object type is: thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>
          detected during:
            instantiation of "thrust::detail::backend::dereference_result<thrust::transform_iterator<UnaryFunc, Iterator, Reference, Value>>::type thrust::detail::backend::dereference(const thrust::transform_iterator<UnaryFunc, Iterator, Reference, Value> &) [with UnaryFunc=thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, Iterator=thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, Reference=thrust::use_default, Value=thrust::use_default]" 
/usr/local/cuda-5.0/bin/../include/thrust/iterator/detail/zip_iterator_base.h(128): here
            instantiation of "thrust::detail::device_dereference_iterator::apply<Iterator>::type thrust::detail::device_dereference_iterator::operator()(const Iterator &) [with Iterator=thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>]" 
/usr/local/cuda-5.0/bin/../include/thrust/detail/tuple_transform.h(102): here
            instantiation of "thrust::detail::tuple_meta_transform<Tuple, UnaryMetaFunction, thrust::tuple_size<Tuple>::value>::type thrust::detail::tuple_transform_functor<Tuple, UnaryMetaFunction, UnaryFunction, 2U>::do_it_on_the_host_or_device(const Tuple &, UnaryFunction) [with Tuple=thrust::tuple<thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>, thrust::detail::normal_iterator<thrust::device_ptr<double>>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>, UnaryMetaFunction=thrust::detail::device_dereference_iterator::apply, UnaryFunction=thrust::detail::device_dereference_iterator]" 
/usr/local/cuda-5.0/bin/../include/thrust/detail/tuple_transform.h(412): here
            instantiation of "thrust::detail::tuple_meta_transform<Tuple, UnaryMetaFunction, thrust::tuple_size<Tuple>::value>::type thrust::detail::tuple_host_device_transform<UnaryMetaFunction,Tuple,UnaryFunction>(const Tuple &, UnaryFunction) [with UnaryMetaFunction=thrust::detail::device_dereference_iterator::apply, Tuple=thrust::tuple<thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>, thrust::detail::normal_iterator<thrust::device_ptr<double>>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>, UnaryFunction=thrust::detail::device_dereference_iterator]" 
/usr/local/cuda-5.0/bin/../include/thrust/iterator/detail/zip_iterator.inl(160): here
            instantiation of "thrust::detail::backend::dereference_result<thrust::zip_iterator<IteratorTuple>>::type thrust::detail::backend::dereference(const thrust::zip_iterator<IteratorTuple> &) [with IteratorTuple=thrust::tuple<thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>, thrust::detail::normal_iterator<thrust::device_ptr<double>>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>]" 
/usr/local/cuda-5.0/bin/../include/thrust/detail/backend/cuda/for_each.inl(75): here
            [ 24 instantiation contexts not shown ]
            instantiation of "void thrust::detail::vector_base<T, Alloc>::allocate_and_copy(thrust::detail::vector_base<T, Alloc>::size_type, ForwardIterator, ForwardIterator, thrust::detail::vector_base<T, Alloc>::storage_type &) [with T=double, Alloc=thrust::device_malloc_allocator<double>, ForwardIterator=thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>]" 
/usr/local/cuda-5.0/bin/../include/thrust/detail/vector_base.inl(191): here
            instantiation of "void thrust::detail::vector_base<T, Alloc>::range_init(ForwardIterator, ForwardIterator, thrust::detail::false_type) [with T=double, Alloc=thrust::device_malloc_allocator<double>, ForwardIterator=thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>]" 
/usr/local/cuda-5.0/bin/../include/thrust/detail/vector_base.inl(168): here
            instantiation of "void thrust::detail::vector_base<T, Alloc>::init_dispatch(IteratorOrIntegralType, IteratorOrIntegralType, thrust::detail::false_type) [with T=double, Alloc=thrust::device_malloc_allocator<double>, IteratorOrIntegralType=thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>]" 
/usr/local/cuda-5.0/bin/../include/thrust/detail/vector_base.inl(207): here
            instantiation of "thrust::detail::vector_base<T, Alloc>::vector_base(InputIterator, InputIterator) [with T=double, Alloc=thrust::device_malloc_allocator<double>, InputIterator=thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>]" 
/usr/local/cuda-5.0/bin/../include/thrust/device_vector.h(131): here
            instantiation of "thrust::device_vector<T, Alloc>::device_vector(InputIterator, InputIterator) [with T=double, Alloc=thrust::device_malloc_allocator<double>, InputIterator=thrust::transform_iterator<thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::plus>, thrust::detail::functional::actor<thrust::detail::functional::composite<thrust::detail::functional::binary_operator<thrust::multiplies>, thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::detail::functional::value<double>, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type>>, thrust::counting_iterator<double, thrust::use_default, thrust::use_default, thrust::use_default>, thrust::use_default, thrust::use_default>]" 
test/lambda.cu(27): here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:18:28.207

感谢@RobertCrovella 的建议。

将推力升级到 v1.6/v1.7 后，问题得到修复，而无需更改问题中显示的代码。cuda 5.0 中的推力 v1.53 对于 lambda 表达式功能来说似乎太旧了。

# java - Junit+Hibernate+Spring+H2 :inserts 执行没有错误但是 select 没有返回数据

> ID：14280392
> 
> 赞同：1
> 
> 时间：2013-01-11T14:39:30.973
> 
> 标签：java, spring, hibernate, junit, h2

我正在尝试使用内存数据库 H2 对我的代码中的事务进行 junit 测试。一切看起来都很好 - 表是从 hbm2ddl 创建的，执行了插入但 select 返回 null。

Junit测试在线失败：

```
 assertNotNull(artifactManager.getArtifact(id)); 
```

整体测试

```
@Test
@Transactional()
@Rollback(true)
public void failTransactionOnUpdateArtifactStateArtifactVerification() throws IllegalStateException, IOException {
    //GIVEN
    //some initialization already happened
    artifactManager.saveArtifact(artifact);

    //WHEN
    HibernateException exc = Mockito.mock(HibernateException.class);
    Mockito.when(historyDao.saveArtifactInHistory(artifact, ver)).thenThrow(exc);

    //THEN
    //artifact should be present in DB
    assertNotNull(artifactManager.getArtifact(id));
    assertEquals(artifactManager.getArtifact(id).getState().getType(),StateTypes.SENT);

    //and after exception rollback on artifacts Table should be performed and no artifacts should be present in DB
    try{
        stateService.updateArtifactState( ver,artifact);
    }catch(Exception e){
        e.printStackTrace();
    }
    //updateArtifact(artifact); should be rolled back and state reverted to SENT
    assertEquals(artifactManager.getArtifact(id).getState().getType(),StateTypes.SENT);
} 
```

控制台日志的相关部分：

```
2013-01-11 15:02:21,538 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate] - <schema update complete>
2013-01-11 15:02:21,934 INFO [org.acegisecurity.intercept.AbstractSecurityInterceptor] - <Validated configuration attributes>    Hibernate: select artifact0_.Id as Id99_4_, artifact0_.CrosscheckerID as Crossche7_99_4_, artifact0_.CategoryID as CategoryID99_4_, artifact0_.CreationDate as Creation2_99_4_, artifact0_.Description as Descript3_99_4_, artifact0_.FileChecksum as FileChec4_99_4_, artifact0_.ReportID as ReportID99_4_, artifact0_.StateID as StateID99_4_, artifact0_.StateChangeDate as StateCha5_99_4_, artifact0_.Storage as Storage99_4_, user1_.ID as ID86_0_, user1_.Name as Name86_0_, user1_.Surname as Surname86_0_, user1_.username as username86_0_, user1_.jobPositionID as jobPosit5_86_0_, user1_.Email as Email86_0_, user1_.NSNID as NSNID86_0_, user1_.PESEL as PESEL86_0_, user1_.NIP as NIP86_0_, user1_.InProgram as InProgram86_0_, user1_.Employeed as Employeed86_0_, user1_.OutsidePoland as Outside12_86_0_, user1_.Password as Password86_0_, user1_.IncomeCosts as IncomeC14_86_0_, user1_.SupervisorID as Supervi15_86_0_, user1_.Disclosure as Disclosure86_0_, user1_.UserState as UserState86_0_, user1_.FailedLoginAttempts as FailedL18_86_0_, user1_.LastFailedLoginAttempt as LastFai19_86_0_, category2_.ID as ID107_1_, category2_.Name as Name107_1_, category2_."Order" as Order3_107_1_, report3_.ID as ID88_2_, report3_.UserID as UserID88_2_, report3_.StateID as StateID88_2_, report3_.CreationDate as Creation4_88_2_, report3_.StateChangeDate as StateCha5_88_2_, report3_.SupervisorID as Supervis6_88_2_, report3_.AccepterId as AccepterId88_2_, report3_.IncomeCosts as IncomeCo8_88_2_, report3_.AccInProg as AccInProg88_2_, state4_.ID as ID89_3_, state4_.Name as Name89_3_ from Artifacts artifact0_ left outer join Users user1_ on artifact0_.CrosscheckerID=user1_.ID left outer join Categories category2_ on artifact0_.CategoryID=category2_.ID left outer join Reports report3_ on artifact0_.ReportID=report3_.ID left outer join States state4_ on artifact0_.StateID=state4_.ID where artifact0_.Id=?
Hibernate: select max(ID) from Reports
Hibernate: select state0_.ID as ID89_0_, state0_.Name as Name89_0_ from States state0_ where state0_.ID=?
Hibernate: select max(ID) from States
Hibernate: insert into Reports (UserID, StateID, CreationDate, StateChangeDate, SupervisorID, AccepterId, IncomeCosts, AccInProg, ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into States (Name, ID) values (?, ?)
Hibernate: insert into Artifacts (Id, CrosscheckerID, CategoryID, CreationDate, Description, FileChecksum, ReportID, StateID, StateChangeDate, Storage) values (null, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: select artifact0_.Id as Id99_5_, artifact0_.CrosscheckerID as Crossche7_99_5_, artifact0_.CategoryID as CategoryID99_5_, artifact0_.CreationDate as Creation2_99_5_, artifact0_.Description as Descript3_99_5_, artifact0_.FileChecksum as FileChec4_99_5_, artifact0_.ReportID as ReportID99_5_, artifact0_.StateID as StateID99_5_, artifact0_.StateChangeDate as StateCha5_99_5_, artifact0_.Storage as Storage99_5_, user1_.ID as ID86_0_, user1_.Name as Name86_0_, user1_.Surname as Surname86_0_, user1_.username as username86_0_, user1_.jobPositionID as jobPosit5_86_0_, user1_.Email as Email86_0_, user1_.NSNID as NSNID86_0_, user1_.PESEL as PESEL86_0_, user1_.NIP as NIP86_0_, user1_.InProgram as InProgram86_0_, user1_.Employeed as Employeed86_0_, user1_.OutsidePoland as Outside12_86_0_, user1_.Password as Password86_0_, user1_.IncomeCosts as IncomeC14_86_0_, user1_.SupervisorID as Supervi15_86_0_, user1_.Disclosure as Disclosure86_0_, user1_.UserState as UserState86_0_, user1_.FailedLoginAttempts as FailedL18_86_0_, user1_.LastFailedLoginAttempt as LastFai19_86_0_, category2_.ID as ID107_1_, category2_.Name as Name107_1_, category2_."Order" as Order3_107_1_, report3_.ID as ID88_2_, report3_.UserID as UserID88_2_, report3_.StateID as StateID88_2_, report3_.CreationDate as Creation4_88_2_, report3_.StateChangeDate as StateCha5_88_2_, report3_.SupervisorID as Supervis6_88_2_, report3_.AccepterId as AccepterId88_2_, report3_.IncomeCosts as IncomeCo8_88_2_, report3_.AccInProg as AccInProg88_2_, user4_.ID as ID86_3_, user4_.Name as Name86_3_, user4_.Surname as Surname86_3_, user4_.username as username86_3_, user4_.jobPositionID as jobPosit5_86_3_, user4_.Email as Email86_3_, user4_.NSNID as NSNID86_3_, user4_.PESEL as PESEL86_3_, user4_.NIP as NIP86_3_, user4_.InProgram as InProgram86_3_, user4_.Employeed as Employeed86_3_, user4_.OutsidePoland as Outside12_86_3_, user4_.Password as Password86_3_, user4_.IncomeCosts as IncomeC14_86_3_, user4_.SupervisorID as Supervi15_86_3_, user4_.Disclosure as Disclosure86_3_, user4_.UserState as UserState86_3_, user4_.FailedLoginAttempts as FailedL18_86_3_, user4_.LastFailedLoginAttempt as LastFai19_86_3_, state5_.ID as ID89_4_, state5_.Name as Name89_4_ from Artifacts artifact0_ left outer join Users user1_ on artifact0_.CrosscheckerID=user1_.ID left outer join Categories category2_ on artifact0_.CategoryID=category2_.ID left outer join Reports report3_ on artifact0_.ReportID=report3_.ID left outer join Users user4_ on report3_.UserID=user4_.ID left outer join States state5_ on artifact0_.StateID=state5_.ID where artifact0_.Id=?
2013-01-11 15:02:22,213 INFO [org.hibernate.impl.SessionFactoryImpl] - <closing> 
```

我已将数据库配置如下：

```
<bean id="dataSource" 
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:mem:taxMemDB;DB_CLOSE_DELAY=-1" />
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean>
<bean id="taxSessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" >
    <property name="AnnotatedClasses">
        <list>    ...</list>
    </property>
    <property name="dataSource" ref="dataSource" />
    <property name="mappingResources">
        <list>
            <value>mapping.hbm.xml</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <value>
            hibernate.dialect=org.hibernate.dialect.H2Dialect
            hibernate.connection.charSet=UTF-8
            hibernate.connection.pool_size=15
            hibernate.show_sql=true
            hibernate.hbm2ddl.auto=update
        </value>
    </property>         
</bean>
<bean id="hibernateTemplate"
    class="org.springframework.orm.hibernate3.HibernateTemplate">
    <property name="sessionFactory">
        <ref bean="taxSessionFactory" />
    </property>
</bean> 
```

任何线索可能是什么问题？还是我应该附加更多代码？

--请求的代码ArtifactManager：

```
 public Artifact getArtifact(long artifactId) {
    Artifact artifact = artifactDao.getArtifact(artifactId);
    return artifact;
} 
```

神器道：

```
@Override
public Artifact getArtifact(Long id) {
    Session session = sessionFactory.getCurrentSession();
    return (Artifact) session.get(Artifact.class, id);
} 
```

ArtifactManager.saveArifact：

```
 @Transactional(rollbackFor = Exception.class)
public boolean saveArtifact(Artifact artifact)throws IOException {

    String checksum = null;
    String userPath = null;

        checksum = checksumGenerator.generateChecksum(artifact.getFile().getInputStream());
        userPath = storageManager.upload(artifact);
        artifact.setStoragePath(userPath);
        artifact.setFileChecksum(checksum);
        if(artifact.getId()!=null){
            return  artifactDao.mergeArtifact(artifact);
        }else{
            return artifactDao.saveOrUpdateArtifact(artifact);
        }
} 
```

ArifactDao 部分

```
@Override
public boolean saveOrUpdateArtifact(Artifact artifact) {
    Session session = sessionFactory.getCurrentSession();
    try {
        session.saveOrUpdate(artifact);
    } catch (DataAccessException ex) {
        log.error(ex.getMessage());
        return false;
    }
    return true;
}

@Override
public boolean mergeArtifact(Artifact artifact) {
    Session session = sessionFactory.getCurrentSession();
    try {
        session.merge(artifact);
    } catch (DataAccessException ex) {
        log.error(ex.getMessage());
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:05:55.413

我认为您的方法`ArtifactManager.getArtifact(id)`是直接查看数据库，并且由于您的事务尚未提交......它什么也没找到。

请注意，这`@Rollback(true)`意味着您的事务将永远不会被提交。

**编辑**

根据您的代码，您似乎正在寻找当前会话以查找工件（因此，未提交事务的 OK 事件）。

其他一些对检查有用的代码：

*   你如何在你的映射中指定 artifact 的 id ？（自动生成或手动定义？）
*   你的`saveArtifact`方法的代码是什么？

**编辑**

我在您的代码中发现了一些烦人的事情：

*   您正在调用`saveArtifact`，但您不检查返回值。在做任何其他事情之前最好检查一下。就像是`assertTrue(artifactManager.saveArtifact(artifact)));`

*   通常，当合并一个实例时，取回合并的实例是很有趣的……但是在你的 DAO 中你忘记了它并返回一个布尔值。见[merge API](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#merge%28java.lang.String,%20java.lang.Object%29)，真正有趣的部分是这个

> 给定的实例（即参数）**不会与会话相关联**。

*   根据您的评论，工件初始化为 id=10L。因此，您将调用 session.merge 方法。但是您的工件不应该在会话中，也不应该在数据库中......所以我认为您应该在某处有一些相关的错误日志？不 ？

# android - 我怎样才能实现这个布局？

> ID：14280393
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:39:34.657
> 
> 标签：android, android-layout

我有一个有 3 个按钮的布局。我想为每个图像视图定位两个文本视图。我怎样才能实现这个布局？AbsoluteLayout 是否足以满足我的需求？

这是我的布局部分。

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:layout_gravity="center_horizontal"
        android:weightSum="2" >       

         <ImageView
             android:id="@+id/btn1"
             android:layout_width="100dp"
             android:layout_height="wrap_content"
             android:layout_alignParentRight="true"             
             android:background="@drawable/gray" />

         <ImageView
             android:id="@+id/btn2"
             android:layout_width="100dp"
             android:layout_height="wrap_content"
             android:layout_alignParentRight="true"             
             android:background="@drawable/gray" />

         <ImageView
             android:id="@+id/btn3"
             android:layout_width="100dp"
             android:layout_height="wrap_content"
             android:layout_alignParentRight="true"             
             android:background="@drawable/gray" />

    </LinearLayout> 
```

我想实现这个布局。框是图像视图。 [一只忙碌的猫 http://img824.imageshack.us/img824/2385/layoutrq.jpg](http://img824.imageshack.us/img824/2385/layoutrq.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:20:21.973

使用线性布局你可以这样做。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="3"
    android:background="#F0F0F0" >

       <LinearLayout android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:gravity="center_vertical|center_horizontal"
           android:orientation="vertical">

            <TextView
           android:id="@+id/textView2"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="TextView" />

       <TextView
           android:id="@+id/textView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_marginTop="20dp"
           android:text="TextView" />
       </LinearLayout>

      <LinearLayout android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_weight="1"
            android:gravity="center_vertical|center_horizontal"
           android:orientation="vertical">

            <TextView
           android:id="@+id/textView2"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="TextView" />

       <TextView
           android:id="@+id/textView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_marginTop="20dp"
           android:text="TextView" />
       </LinearLayout>

      <LinearLayout android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_weight="1"
            android:gravity="center_vertical|center_horizontal"
           android:orientation="vertical">

            <TextView
           android:id="@+id/textView2"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="TextView" />

       <TextView
           android:id="@+id/textView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_marginTop="20dp"
           android:text="TextView" />
       </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:59:39.997

使用**RelativeLayout**而不是 ImageView ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:background="#000">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:text="TextView2" />

</RelativeLayout> 
```

我建议为它创建一个单独的布局和类以供重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:47:33.347

使用 Button 而不是 ImageView，您可能想要自定义按钮背景？用这个：

```
<ImageButton
android:id="@+id/ImageButton01"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/album_icon"
android:background="@drawable/round_button" /> 
```

或者这仍然使用图像文件：

```
ImageView iv = (ImageView)findViewById(R.id.ImageView01);
iv.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
// TODO Auto-generated method stub

}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:22:09.000

这是你需要的吗？

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dp"
        android:gravity="center"
        android:orientation="horizontal">       

        <RelativeLayout
            android:id="@+id/btn1"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_margin="10dp"
            android:layout_alignParentLeft="true"
            android:background="@drawable/gray"
            android:orientation="vertical">   

            <TextView
                android:id="@+id/txt1"
                android:layout_width="match_parent"
                android:layout_alignParentTop="true"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="Label 1" />

            <TextView
                android:id="@+id/txt2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:gravity="center_horizontal"
                android:text="Label 2" />

        </RelativeLayout>    

        <RelativeLayout
            android:id="@+id/btn2"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_margin="10dp"
            android:layout_toRightOf="@id/btn1"
            android:background="@drawable/gray"
            android:orientation="vertical">   

            <TextView
                android:id="@+id/txt3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:gravity="center_horizontal"
                android:text="Label 3" />

            <TextView
                android:id="@+id/txt4"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:gravity="center_horizontal"
                android:text="Label 4" />

        </RelativeLayout>    

        <RelativeLayout
            android:id="@+id/btn3"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_margin="10dp"
            android:layout_toRightOf="@id/btn2"
            android:background="@drawable/gray"
            android:orientation="vertical">   

            <TextView
                android:id="@+id/txt5"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:gravity="center_horizontal"
                android:text="Label 5" />

            <TextView
                android:id="@+id/txt6"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:gravity="center_horizontal"
                android:text="Label 6" />

        </RelativeLayout>    

    </RelativeLayout> 
```

编辑：现在检查。您可以将 relativeLayouts 的背景设置为图像视图中所需的任何内容，并设置 clicklistener 以便它们像按钮一样工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:41:59.300

使用 Button 而不是 ImageView。

# ruby-on-rails - 如何在控制器中为 IF 条件创建一个方法以在 ruby on rails 中调用视图？

> ID：14280395
> 
> 赞同：0
> 
> 时间：2013-01-11T14:39:37.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我是新手。我只想在控制器中为以下代码创建一个方法，以避免在视图中再次重复。如何在 ruby​​ on rails 中以简短而优雅的方式编写代码？

```
<% @A = ....... %>
<% @B = ....... %>
<% @C = ....... %>
<% @D = ....... %>
<% @E = ....... %>

<% if (@A || @B || @C) %>
  <label> One: </label>
  <%= ... %>

  <label> Two: </label>
  <%= ... %>
<% end %>

<% if (@A || @B || @C || (@D && @E)) %>
  <label> Three: </label>
  <%= ... %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:58:20.267

假设您的模型被调用**`User`**并且您提供的代码被放置在**“app/views/users/show.html.erb”中**

我建议进行以下重构：（
您需要`A,B,C,D and E`用适当的逻辑替换并将方法重命名为更有意义的名称）

```
# in "app/helpers/users_helper.rb"
module UsersHelper
  def isABC
    return A || B || C
  end

  def isDandE
    return D && E
  end
end

# in "app/views/users/show.html.erb
<% if (isABC) %>
  <label> One: </label>
  <%= ... %>

  <label> Two: </label>
  <%= ... %>
<% end %>

<% if (isABC || isDandE) %>
  <label> Three: </label>
  <%= ... %>
<% end %> 
```

* * *

您可以在此处阅读 Rails 助手：http: [//paulsturgess.co.uk/articles/49-using-helper-methods-in-ruby-on-rails](http://paulsturgess.co.uk/articles/49-using-helper-methods-in-ruby-on-rails)

基本上，控制器的职责是接受传入的 Web 请求，获取必要的数据 ( `Model`) 并调用适当`View`的渲染。

Rails 具有`Helpers`可以从您的`Views`. 习惯用法是您将视图中使用的任何*高级逻辑放入*`Helper`

# jquery - JQuery Post 调用返回服务器 500 错误

> ID：14280400
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:39:50.463
> 
> 标签：jquery, ajax, post

我无法在我的新服务器中进行 Jquery 发布调用。当我关闭一个 Jquery Ui 对话框时，我正在测试发送一个 post call，该对话框通过[Twilio 接口发送一条短信](https://www.twilio.com/docs/api/rest/sending-messages)。它在我的旧服务器上工作，但是当我将它安装在我的新服务器上时它不起作用，我不知道为什么。

这是发送帖子呼叫的按钮：

```
 $( "#dialog1" ).dialog({
        autoOpen: false,
        width:240,
        height:250,
        modal:true,
        show: "blind",
        hide: "fade",
        buttons: {
            Ok: function() {

                $( this ).dialog( "close" );
                $.post("tmpl/do/sms.php", { cantidad : $("#test").val() });
            }
        }
    }).css("font-size", "16px"); 
```

这是接收该调用的 PHP：

```
 <?php       
      require("twilio/Services/Twilio.php");
      // require POST request       
      if ($_SERVER['REQUEST_METHOD'] != "POST") die;
      $number = ($_POST["cantidad"]);
      $AccountSid = "Axxxxx";       
      $AuthToken = "axxxxxxx";
      // Instantiate a new Twilio Rest Client       
      $client = new Services_Twilio($AccountSid, $AuthToken);
      try {     
        // make call        
    $call = $client->account->sms_messages->create(     
      'xxxxx,        // From        
      '+xxxxx',     // To       
      'yyyyy' // SMS        
        );      
      } catch (Exception $e) {      
        echo 'Error sending sms: ' . $e->getMessage();      
      }
    ?> 
```

如果我按下对话框中的按钮，它会在控制台中发送错误 500。如果有人有任何想法，我将非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-08-25T18:03:34.870

评论中可能的解决方案包括：

> 你错过了一个 " ' " $call = $client->account->sms_messages->create('xxxxx, 如果你打开 url tmpl/do/sms.php 你会得到任何错误吗？
> 
> 您可能会遇到 require 的问题 - 例如，错误的路径或 Twilio.php 中的某些内容。另一个可能的问题 - 字段中缺少右引号。要获取更多信息 - 查看 php 错误日志文件。

# eclipse - 使用 Salesforce 在 Eclipse 中创建部件控件失败

> ID：14280402
> 
> 赞同：13
> 
> 时间：2013-01-11T14:39:57.853
> 
> 标签：eclipse, eclipse-plugin, salesforce, linker-errors, force.com

我有 Eclipse Juno 和 Force.com IDE。当我尝试创建新类时，它们总是显示：**failed to create the part's controls**。它第一次起作用，但现在他们总是展示这一点。如果我在`force.com`平台内创建它们，也会发生同样的情况。

```
Error details:
org.eclipse.core.runtime.AssertionFailedException: assertion failed:
at org.eclipse.core.runtime.Assert.isTrue(Assert.java:110) 
```

ETC ...

我将不胜感激所有帮助。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-28T07:59:18.843

我有同样的错误。我通过切换 Eclipse 工作区来修复它。转到菜单文件->切换工作区->其他，然后选择您正在使用的同一工作区。Eclipse 将重新启动，您应该不会收到错误消息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-24T15:15:48.043

我遇到了同样的问题，我的 JSP 的默认编辑器是网页编辑器。我将其更改为 JSP 编辑器，一切都很好。

PS：要更改为 JSP 编辑器，请右键单击 JSP 页面 --> 使用 jsp 打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-27T17:31:12.650

有一天，当我打开 Eclipse 并尝试查看我一直在处理的 java 文件时，我得到了“未能创建部件的控件”错误。当我打开我需要的文件时，它显示了一个红色的 X 和 NullPointerException 而不是代码。由于某种原因，错误日志提到了“事件循环异常”。
我重新启动了 Eclipse，但错误仍然存​​在。我清理项目，更新项目，删除并重新导入项目，删除并重新导入文件，错误仍然存​​在。作为最后的手段，我再次重新启动了 Eclipse，然后文件就很好了。所以清理/更新/删除/导入步骤之一有效，但我不知道是哪一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-19T06:48:34.580

使用`eclipse -clean`命令提示符解决此问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-15T02:58:17.167

我这样解决了我的问题：

![日食](../Images/176f78f020799546f779dce02273a546.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-12T10:40:07.177

出现此问题是因为在 Eclipse 默认编辑器中无法识别该文件的扩展名。如果您右键单击文件并使用相应的文本编辑器打开它，问题将得到解决

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-02T06:55:16.817

[![在此处输入图像描述](../Images/d162cb19a83c16577b8c4ae36594673a.png)](https://i.stack.imgur.com/JceKO.png)在 ecllipse 中，每种文件类型都有一些关联的默认格式和设置为特定文件类型的默认格式之一。

您可以在 General -> Editors -> File Associations- 中看到这一点

当我们以不是特定类型的默认格式的格式打开任何文件时，通常会发生此问题。

当我在 ecllipse 中打开一个文本格式的 Java 文件时，我遇到了同样的问题，然后我开始遇到同样的问题。经过研究，我观察到 AspectJ/Java Editor 被设置为默认值。将其重置为 Java Editor 后，问题得到解决。

步骤： 1\. 常规 -> 编辑器 -> 文件关联 - 2\. 选择内容类型并为其选择默认格式。3\. 重启日食。

通常，在 eclipse 中设置的某些默认文件格式会导致相同的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-07T12:17:31.063

就我而言，问题是服务器是树脂的，我没有安装树脂服务器扩展

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-09T01:15:20.500

我解决了这个问题。

(1)用TXT打开文件。

（2）搜索并删除数字之间的下划线，如：

int a = 10_000;

当我像其他人一样编译和运行时它可以工作，但如果我保存并再次打开它会失败。

# regex - 使用平面文件在目录中的多个文件中搜索特定标签值

> ID：14280405
> 
> 赞同：0
> 
> 时间：2013-01-11T14:40:07.280
> 
> 标签：regex, code-snippets

我们有很多 SQL 脚本存储在一个共享目录 (cca 500) 中。它按文件夹组织，但树结构不是最好的，因为一个文件可以分配到更多类别（文件夹）。

我想我可以用一些附加信息标记所有文件，例如通过向每个文件添加一行：

```
/* Project<ProjectName>, Department<DepartmentName> Tags<Tag1, Tag2, Tag3> */ 
```

并使用一些正则表达式仅在这些标签中进行搜索。有没有办法做到这一点？

**如何找到 Project=ProjectName 和标签之一是 Tag1 的所有文件？**

更多细节：我们希望拥有易于使用、易于搜索的 SQL 脚本共享存储库。我们不需要版本控制（sql 脚本主要是代码片段）。我试过 Git（对于这个任务来说太复杂了），Trac Wiki - 存储和加载脚本的额外工作太多（我们使用 PostgreSQL 和 pgAdmin/Squirell）。这就是我最终得到普通共享目录的原因——唯一的问题是内容不容易搜索。我可以一次搜索所有文件（例如使用 SublimeText），但我认为通过找到这个问题的答案可以显着改善这一点。

# c# - 正则表达式解析'之间的文本

> ID：14280408
> 
> 赞同：1
> 
> 时间：2013-01-11T14:40:20.703
> 
> 标签：c#, regex

我有以下文字：

1.  向 BizTalk 发送请求。CaseID：'2011000264'，标题：'ArchiveDocument Poup - fields.docx'，日期：'11.01.2013 13:15:28'
2.  向 BizTalk 发送请求。标题：'Jallafields.docx'，日期：'11.01.2013 13:15:28'

现在我想解析出`Title`. 我知道这应该很简单，但我很挣扎，所以任何帮助都会非常受欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:44:31.510

将您的文本与：

```
\bTitle: '([^']+)' 
```

并捕获第一组。

当然，这假设没有嵌入的单引号......如果有，请`normal* (special normal*)*`像这样使用“正则表达式模式”（此示例假设此类嵌入的引号用反斜杠转义）：

```
\bTitle: '([^\\']+(?:\\'[^\\']*)*)' 
```

在这里，`normal`is `[^\\']`（除反斜杠或单引号外的任何内容）和`special`is `\\'`（反斜杠后跟单引号）。这是经常使用（过度使用？）惰性量词不能做的事情；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:57:14.940

只是为了一些 Regex/LINQ 的乐趣：

```
var s = "Send Request to BizTalk. CaseID: '2011000264', Title: 'ArchiveDocument Poup - fields.docx', Date: '11.01.2013 13:15:28'"   ;
var d = Regex.Matches(s, @"(?<=[\W])(\w*):\W'([^']*)'").OfType<Match>().ToDictionary (m => m.Groups[1].Value, m=>m.Groups[2].Value); 
```

`d`就是现在

![enter image description here](../Images/8712a1284af6129413e1a12bd5db5a3f.png)

J̶u̶s̶t̶ ̶h̶o̶p̶e̶ ̶t̶h̶e̶r̶e̶'̶s̶ ̶n̶o̶ ̶`̶'̶`̶ ̶i̶n̶ ̶t̶h̶e̶ ̶t̶i̶t̶l̶e̶,̶ ̶t̶h̶o̶u̶g̶h̶.̶.̶.̶

To handle embedded single quotes, just replace the `'([^']+)'` part with `'([^']+(?:\\'[^']*)*)'`, as [fge suggests in his great answer](https://stackoverflow.com/a/14280470/142637):

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:42:58.467

正则表达式对此太过分了。

改用`string.Split`：

```
myString.Split('\'')[3] 
```

稍微分解一下 -`myString.Split('\'')`将通过传入的字符拆分字符串，`'`在这种情况下并返回一个结果数组。我使用数组中的第四个值来检索标题 - 使用数组下标`[3]`。

以上假设字符串的结构*非常*严格。

* * *

对于您发布的第二个示例，很明显上述方法不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:44:17.407

像这样解析字符串对你有用

```
String s = " Send Request to BizTalk. CaseID: '2011000264', Title: 'ArchiveDocument Poup - fields.docx', Date: '11.01.2013 13:15:28'";

string[] all = s.Split(',');

foreach( string str in all)
{
  if(str.Contains("Title:"))
  {
     Console.Writeln( (str.Split(':'))[1]);
   }
} 
```

# android - BulkCursorToCursorAdaptor 抛出 StaleDataException

> ID：14280410
> 
> 赞同：1
> 
> 时间：2013-01-11T14:40:24.567
> 
> 标签：android, listview, staledataexception

请帮忙。

我正在学习使用 SimpleCursorAdaptor 来填充 ListView。我有一个带有 ListView 的 Activity，我使用 SimpleCursorAdapter 填充它。当我单击其中一个列表项时，它应该启动另一个 Activity，但是一旦新 Activity 启动，我就会得到以下日志：

```
01-11 15:28:31.847: E/AndroidRuntime(996): FATAL EXCEPTION: main
01-11 15:28:31.847: E/AndroidRuntime(996): android.database.StaleDataException: Attempted to access a cursor after it has been closed.
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.database.BulkCursorToCursorAdaptor.throwIfCursorIsClosed(BulkCursorToCursorAdaptor.java:64)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.database.BulkCursorToCursorAdaptor.getCount(BulkCursorToCursorAdaptor.java:70)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:196)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.database.CursorWrapper.moveToPosition(CursorWrapper.java:162)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.support.v4.widget.CursorAdapter.getItemId(CursorAdapter.java:225)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.widget.AbsListView.onSaveInstanceState(AbsListView.java:1782)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.View.dispatchSaveInstanceState(View.java:11839)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchFreezeSelfOnly(ViewGroup.java:2576)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.widget.AdapterView.dispatchSaveInstanceState(AdapterView.java:782)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:2562)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:2562)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:2562)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:2562)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:2562)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:2562)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.view.View.saveHierarchyState(View.java:11822)
01-11 15:28:31.847: E/AndroidRuntime(996):  at com.android.internal.policy.impl.PhoneWindow.saveHierarchyState(PhoneWindow.java:1566)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.Activity.onSaveInstanceState(Activity.java:1188)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:498)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.Activity.performSaveInstanceState(Activity.java:1137)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1215)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:2951)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.ActivityThread.handleStopActivity(ActivityThread.java:3010)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.ActivityThread.access$900(ActivityThread.java:130)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1222)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.os.Looper.loop(Looper.java:137)
01-11 15:28:31.847: E/AndroidRuntime(996):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-11 15:28:31.847: E/AndroidRuntime(996):  at java.lang.reflect.Method.invokeNative(Native Method)
01-11 15:28:31.847: E/AndroidRuntime(996):  at java.lang.reflect.Method.invoke(Method.java:511)
01-11 15:28:31.847: E/AndroidRuntime(996):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-11 15:28:31.847: E/AndroidRuntime(996):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-11 15:28:31.847: E/AndroidRuntime(996):  at dalvik.system.NativeStart.main(Native Method) 
```

我看了看，但无法弄清楚这个错误是从哪里来的。

我在谷歌上搜索了这个 BulkCursorToCursorAdaptor 类，我发现它在不同的情况下出于不同的原因抛出了这个异常。

我想知道您是否可以解释错误的来源，因为我没有关闭适配器中的光标。

以下是代码片段：

ListView 的活动：

```
MyAdapter adapter;
ListView list;

@Override
public void onCreate(Bundle savedInstanceState)
{
    ....
    list = (ListView)findViewById(R.id.myList);
    list.setOnItemClickListener(new OnItemClickListener()
    {
       @Override
        public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long myLong)
        {
              Intent request = new Intent(MyActivity.this, NewActivity.class);
              startActivity(request);
        }
    }

    getSupportLoaderManager().restartLoader(0, null, this);

    adapter = new MyAdapter(this,
                R.layout.list_item,
                null, new String[]{MediaStore.Audio.Media._ID, MediaStore.Audio.Media.DISPLAY_NAME},
                new int[] {R.id.Name}, Adapter.NO_SELECTION);
    list.setAdapter(adapter);
}

@Override
public Loader<Cursor> onCreateLoader(int i, Bundle bundle)
{
    return new CursorLoader(this,
                MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                new String[]{MediaStore.Audio.Media._ID, MediaStore.Audio.Media.DISPLAY_NAME},
                null, null, null);
}

@Override
public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor aCursor)
{
    adapter.swapCursor(aCursor);
}

@Override
public void onLoaderReset(Loader<Cursor> aCursor)
{
    adapter.swapCursor(null);
} 
```

这是适配器：

```
public MyAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags)
{
    super(context, layout, c, from, to, flags);
}

@Override
public int getCount()
{
    Cursor c = getCursor(); // without this, sometimes, I get NullPointerException
    return c.getCount();
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    Cursor c = getCursor();
    c.moveToPosition(position);
    ....
    ....
} 
```

请帮忙

# ruby-on-rails - 如何创建带有 or 或 not 的 rails 范围？

> ID：14280412
> 
> 赞同：2
> 
> 时间：2013-01-11T14:40:35.277
> 
> 标签：ruby-on-rails, ruby

我的用户模型中有两个范围：

```
scope :hard_deactivated, where(:hard_deactivated => true)
scope :soft_deactivated, where(:soft_deactivated => true) 
```

到目前为止，一切都很好

## 或者

我想创建一个范围：deactivated，其中将包括 hard_deactivated 为 true 或 soft deactivated 为 true 的所有用户。显然我可以这样做：

```
scope :deactivated, where("hard_deactivated = ? or soft_deactivated = ?", true, true) 
```

但这感觉不是很干。

## 不是

另外我想创建一个逆作用域：not_hard_deactivated。我可以这样做：

```
scope :not_hard_deactivated, where(:hard_deactivated => false) 
```

但同样，这感觉很糟糕，尤其是当我的范围变得更复杂时。在 not 子句中应该有某种方式或扭曲前一个范围生成的 SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:09:16.783

使用 arel 表：

```
hard_deactivated_true = arel_table[:hard_deactivated].eq(true)
soft_deactivated_true = arel_table[:soft_deactivated].eq(true)

scope :deactivated, where(hard_deactivated_true.and(soft_deactivated_true))
scope :not_hard_deactivated, where(hard_deactivated_true.not) 
```

请参阅：[是否可以在 Rails3 中反转命名范围？](https://stackoverflow.com/questions/9574959/is-it-possible-to-invert-a-named-scope-in-rails3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:08:56.737

对于“NOT”部分，您可以执行以下操作：

```
extend ScopeUtils

positive_and_negative_scopes :deactivated do |value|
  where(:hard_deactivated => value)
end 
```

并在单独的模块中实现此方法：

```
module ScopeUtils
  def positive_and_negative_scopes(name)
    [true, false].each do |filter_value|
      prefix = ("not_" if filter_value == false)
      scope :"#{prefix}#{name}", yield(filter_value)
    end
  end
end 
```

关于“OR”的情况，您可能会遇到类似的情况，具体取决于您的重复模式。在上面的简单示例中，它不值得，因为它不利于可读性。

```
scopes_with_adjectives_and_negatives :deactivated, [:soft, :hard]

module ScopeUtils
  def scopes_with_adjectives_and_negatives(name, kinds)
    kinds.each do |kind|
      positive_and_negative_scopes name do |filter_value|
        where("#{kind}_#{name}" => filter_value)
      end
    end
    scope :"#{name}", where(kinds.map{|kind| "#{kind}_#{name} = ?"}.join(" OR "), true, true)
    scope :"not_#{name}", where(kinds.map{|kind| "#{kind}_#{name} = ?"}.join(" AND "), false, false)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:08:01.793

您应该在方法中使用 sql 片段`where`（如在第二个示例中），或者更多像[squeel这样的“糖”宝石](https://github.com/ernie/squeel)

# javascript - 在 tomcat 服务器上启用 gzip 压缩会使 js 的缩小变得多余？

> ID：14280415
> 
> 赞同：1
> 
> 时间：2013-01-11T14:40:53.870
> 
> 标签：javascript, tomcat, webserver, gzip, minify

所以我不必担心在我的构建过程中包含缩小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:45:09.663

缩小删除冗余空格，缩短方法/变量名称等。

压缩主要是搜索重复的模式并确保它们不重复。

例如，我刚刚将 jquery-1.4.2.min.js（72174 字节）压缩成 24550 字节。因此，您很可能会从两者结合中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:43:34.397

不一定，某些客户端可能不会发送适当的`Accept-Encoding`标头。

您也可能出于其他原因缩小（剥离未使用的代码，使其逆向工程稍微困难一些）等。

如前所述`Mindas`，两者都不会出错。

# vbscript - 无法查询远程系统和更改注册表

> ID：14280420
> 
> 赞同：1
> 
> 时间：2013-01-11T14:41:40.743
> 
> 标签：vbscript

我需要一种方法来更改 Java NextGen 插件。我需要事先检查操作系统，以便它进入正确的路径。我有一个检查操作系统的脚本，我已经检查并重新检查了它，它确实有效

```
On Error Resume Next

Const HKEY_LOCAL_MACHINE = &H80000002

set objShell = wscript.createobject("wscript.shell")

strComputer = InputBox("Enter PC name:", "JavaNextGen Disable")
strVersion = InputBox("Enter Java Version:", "JavaNextGen Disable")
If ((strComputer <> "") And (strVersion <> "")) Then
 Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
 Set colOperatingSystems = objWMIService.ExecQuery _
  ("Select * from Win32_OperatingSystem")
 For Each objOperatingSystem in colOperatingSystems
  If objOperatingSystem.Caption = "Microsoft Windows 7 Enterprise" Then
   wscript.echo strComputer & "Is Windows 7"
  Elseif  objOperatingSystem.Caption = "Microsoft Windows XP Professional" Then
   wscript.echo strComputer & "Is Windows XP"
  End If 
```

现在这是我用来更改注册表设置的代码

```
 Set objReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\default:StdRegProv")
   strKeyPath = "SOFTWARE\Wow6432Node\JavaSoft\Java Plug-in\1.6.0_" & strVersion
   strEntryName = "UseNewJavaPlugin"
   dwValue = 0
   objReg.SetDWORDValue HKEY_LOCAL_MACHINE, strKeyPath, strEntryName, dwValue
wscript.echo strKeyPath
   If Not Err.Number = 0 Then 
    wscript.Echo "Error: "& vbCrLf & strComputer & "Please check to make sure the computer is on the network!  And that you have admin rights on the computer!"
   Else
    wscript.echo strComputer & "NextGen has been turned off."
   End If 
```

现在，如果我把它们放在一起，它看起来像这样

```
On Error Resume Next
Const HKEY_LOCAL_MACHINE = &H80000002

set objShell = wscript.createobject("wscript.shell")

strComputer = InputBox("Enter PC name:", "JavaNextGen Disable")
strVersion = InputBox("Enter Java Version:", "JavaNextGen Disable")
If ((strComputer <> "") And (strVersion <> "")) Then
 Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
 Set objReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\default:StdRegProv")
 Set colOperatingSystems = objWMIService.ExecQuery _
  ("Select * from Win32_OperatingSystem")
 For Each objOperatingSystem in colOperatingSystems
  If objOperatingSystem.Caption = "Microsoft Windows 7 Enterprise" Then
   strKeyPath = "SOFTWARE\Wow6432Node\JavaSoft\Java Plug-in\1.6.0_" & strVersion
   strEntryName = "UseNewJavaPlugin"
   dwValue = 0
   objReg.SetDWORDValue HKEY_LOCAL_MACHINE, strKeyPath, strEntryName, dwValue

   If Not Err.Number = 0 Then 
    wscript.Echo "Error: "& vbCrLf & strComputer & "Please check to make sure the computer is on the network!  And that you have admin rights on the computer!"
   Else
    wscript.echo strComputer & "NextGen has been turned off."
   End If
  Elseif  objOperatingSystem.Caption = "Microsoft Windows XP Professional" Then
   Set objReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _
    strComputer & "\root\default:StdRegProv")
   strKeyPath = "SOFTWARE\JavaSoft\Java Plug-in\1.6.0_" & strVersion
   strEntryName = "UseNewJavaPlugin"
   dwValue = 0
   objReg.SetDWORDValue HKEY_LOCAL_MACHINE, strKeyPath, strEntryName, dwValue

   If Not Err.Number = 0 Then 
    wscript.Echo "Error: "& vbCrLf & strComputer & "Please check to make sure the computer is on the network!  And that you have admin rights on the computer!"
   Else
    wscript.echo strComputer & "NextGen has been turned off."
   End If
  End If
 Next
End If 
```

但是它在这条线之后没有做任何事情，我知道是因为在那之后添加了一个回声，我的屏幕上什么也没有。如果 objOperatingSystem.Caption = "Microsoft Windows 7 Enterprise" 那么

# python - 通过 dlsym cython 传播异常

> ID：14280421
> 
> 赞同：2
> 
> 时间：2013-01-11T14:41:42.113
> 
> 标签：python, exception-handling, cython, dlsym

我无法通过 dlsym 传播异常。我使用 dlsym 加载一个 cythonized python 文件。我在下面做了一个最小的工作示例，因此您可以自己尝试：

我有一个 pyx 文件 c_fun.pyx，我使用 Cython 将其编译为 C 文件。然后我使用 dlsym 在另​​一个程序中加载 so 文件，比如 use_fun.c++。您可以使用 ./compile.sh 来编译文件。在执行 ./test 时，程序因分段错误而崩溃。

```
#c_fun.pyx:
cdef public double _myfunction(double x) except*:
    a=1/0          # This does not propagate an exception. Comment to make the example work
    return x**2-x  # This works.

#use_fun.c++
#include <dlfcn.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    void* handle = dlopen("./c_fun.so", RTLD_NOW | RTLD_GLOBAL);
    if(handle==NULL) {
        printf("%s \nat line number: %i\n",dlerror(),__LINE__); return;
    }

    double (*f)(double) = (double (*)(double))dlsym(handle, "_myfunction");
    if(f==NULL) {
        printf("%s\n",dlerror()); return;
    }

    double res = 0;
    try {
        res = (*f)((double)99);
    } catch(char *err) {
        printf("Got exception: %s.\n", err);
    }
    printf("res = %f\n", res);
}

#setup.py
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

ext_modules = [Extension("c_fun", ["c_fun.pyx"], libraries = ['python2.7'], extra_compile_args= ['-fexceptions'])]

setup(
  name = 'Hello world app', cmdclass = {'build_ext': build_ext}, ext_modules = ext_modules
)

# compile.sh
python setup.py build_ext --inplace
echo "gcc use_fun.c++ -g -O0 -o test -ldl"
g++ use_fun.c++ -g -O0 -o test -ldl 
```

最初，我尝试在函数末尾不使用“except*”，也没有使用“-fexceptions”编译器标志。但是添加这些并不会改变行为。gdb 甚至不允许我回溯问题，并说：“找不到新线程：通用错误”。我在互联网上查看了与 dlsym 结合使用的异常处理，但发现的信息很少。

故事的其余部分：为了使它更复杂，实际上这个 use_fun.c++ 文件是我导入的 Python 模块。所以：我正在使用 Python 加载模块 use_fun，并在该 C++ 模块中调用 _myfunction。但同样，我无法正确处理异常。但是，在那种情况下，我确实成功地使用 gdb 进入 C 代码并看到 PyErr_Format 被成功调用。但是错误不会被触发，也不会在 C++ 代码中被捕获。

请注意，为了能够公开文件 _myfunction，我在 pyx 文件中指定了“public”关键字。没有它，名称修改将导致 dlsym 函数调用失败。我尝试在这两个链接上查找文档：

[http://docs.cython.org/src/userguide/external_C_code.html#using-cython-declarations-from-c](http://docs.cython.org/src/userguide/external_C_code.html#using-cython-declarations-from-c)

[http://docs.cython.org/src/userguide/language_basics.html#error-return-values](http://docs.cython.org/src/userguide/language_basics.html#error-return-values)

编辑：我找到了解决方案。我将保留上面的原始问题，以便对其他人有所帮助。基本上有2个问题

1) 当然，由于 C 没有异常，所以在函数上设置 try/catch 是错误的！起作用的是使用 PyErr_Occurred() 检查 Python 中是否发生错误。

2) 由于 cython 生成一个模块，因此必须先对其进行初始化，然后才能正确使用它。这意味着：调用 Py_Initialize/Py_Finalize，同时也调用 init_cfun 方法。

解决方案如下图所示：

```
#include "Python.h"
#include <dlfcn.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    Py_Initialize();
    void* handle = dlopen("./c_fun.so", RTLD_NOW | RTLD_GLOBAL);
    if(handle==NULL) {
        printf("%s \nat line number: %i\n",dlerror(),__LINE__); return -1;
    }
    void (*init_func)();
    *(void**)(&init_func) = dlsym(handle, "initc_fun");
    init_func();

    double (*f)(double) = (double (*)(double))dlsym(handle, "_myfunction");
    if(f==NULL) {
        printf("%s\n",dlerror()); return -1;
    }

    double res = 0;
    res = (*f)((double)99);
    if(PyErr_Occurred()) {
        PyErr_Print();
    }
    printf("res = %f\n", res);
    Py_Finalize();
    return 0;
} 
```

# objective-c - 如何在 Objective C 中使用 NSArray。iPhone 上的 Card Deck

> ID：14280430
> 
> 赞同：1
> 
> 时间：2013-01-11T14:42:06.603
> 
> 标签：objective-c, nsarray

我是 Objective C 的新手，我似乎无法找到如何做到这一点（如果可能的话）。

我有一张`NSArray`装满 4 张卡片（卡片 = 我自己的班级），我想将标签的文本设置为`NSString`我的卡片对象持有的。

在 Java 中，我会做这样的事情：如果我有一个有 4 张卡片的卡片数组，而 theLabel 是一个字符串。

```
theLabel = deck[2].getLabel(); 
```

这似乎不适用于Objective C。到目前为止，我在Objective C中的代码：

```
- (IBAction)nextCard:(id)sender {
    theLabel.text = [deck objectAtIndex:j].getLabel;
    theImage.image = [deck objectAtIndex:j].getImage;
} 
```

每次我点击 iPhone 上的按钮时，nextCard 都会调用。j 是一个普通的 int，它将跟踪显示哪张卡片。

当我创建数组时，它看起来像这样：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    ah = [[Card alloc]init];
    [ah setLabel:@"label1"];
    [ah setCardImage: [UIImage imageNamed:@"3.png" ]];

    as = [[Card alloc]init];
    [as setLabel:@"label2"];
    [as setCardImage: [UIImage imageNamed:@"2.png" ]];

    ac = [[Card alloc]init];
    [ac setLabel:@"labbel3"];
    [ac setCardImage: [UIImage imageNamed:@"1.png" ]];

    ad = [[Card alloc]init];
    [ad setLabel:@"label4"];
    [ad setCardImage: [UIImage imageNamed:@"4.png" ]];

    deck = [NSMutableArray arrayWithCapacity:25];
    [deck addObject:ah];
    [deck addObject:as];
    [deck addObject:ac];
    [deck addObject:ad];
} 
```

所以我基本上希望能够使用方法 ob 对象存储在 NSArray 中。

非常感谢您的回答，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:48:35.343

在 Objective-C 中，生成的 getter 没有 get 前缀，所以你可以这样使用它：

```
theLabel = deck[2].label; 
```

或者：

```
theLabel= [deck[2] label]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:46:12.300

检查这个：

```
[deck objectAtIndex:0].label; 
```

或者：

```
[[deck objectAtIndex:0] label]; 
```

或者：

```
[[deck objectAtIndex:0] yourMethodWithParameter:@"foo"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:51:34.527

在 Objective-C 中，大多数情况下访问器方法是自动生成的。假设我们有一个名为“object”的属性 getter 方法不是这样命名的`getObject`，其中“object”是您要访问的属性。它只是由这样的属性名称命名`object`

所以在你的情况下，它应该是这样的：

```
NSString *theLabelString = [[deck objectAtIndex:j] label];
//or this:
NSString *theLabelString = [deck[j] label];
//or this:
NSString *theLabelString = deck[j].label; 
```

# iphone - 固定大小的网页在 iPhone 上以高度为中心

> ID：14280432
> 
> 赞同：0
> 
> 时间：2013-01-11T14:42:15.050
> 
> 标签：iphone, html, css

我正在调整一个固定大小的网站（800x600 像素）以在手机上工作，我在 iPhone 上遇到了一些问题。

我已经设置了宽度= 800 的元视口标签以完全适合屏幕上的页面。

不幸的是，在 iPhone 上，它使页面以高度为中心，给它一个不需要的上边距。它在 Android 上运行良好。

如何让它与 iPhone 的顶部对齐？

这是页面的简化版本

```
<html>
<header>
  <meta name="viewport" content="width=800">
</header>
<body>
  <div style="width:800px; height: 600px;">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:45:48.950

试试这个，它应该会自动重新缩放

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# c++ - 如何将变量传递给类

> ID：14280433
> 
> 赞同：0
> 
> 时间：2013-01-11T14:42:23.543
> 
> 标签：c++

我已经在这段代码上工作了很长一段时间了，我之前已经发布过它，但是在解决了这个问题之后又出现了另一个问题，所以我用这个问题的名称创建了一个新帖子。好的，问题是我显然没有以正确的方式将变量传递给 Administrator 类。我尝试了两种方法，这是我所有的书都显示的，都给了我一个错误，上面写着错误 C2512：'SalariedEmployee'：没有合适的默认构造函数可用“。我试过了

```
 //Lynette Wilkins
//Week 12

#include <iostream>
#include <cstdlib>
#include <string>
#include <iomanip>
#include <cmath>

using namespace std;

class SalariedEmployee
{
private:
    double wageRate;
    int hours;
protected:
    string name;
    string ssn;
    double netPay;
    string department;

public:
    SalariedEmployee(string n, string s, double np, double w, int h, string d);
     ~SalariedEmployee() {cout<<endl;}
     string Getname();  //returns name
     string Getssn();   // returns social security number
     double GetnetPay(); //returns netPay
     string Getdepartment(); // returns department
     double GetwageRate(); //returns wage rate
     int Gethours(); //returns hours
     void Setname(string); //sets name
     void Setssn(string); //sets ssn
     void SetnetPay(double); //sets net pay
     void Setdepartment(string); //sets department
     void SetwageRate(double); //sets wage rate
     void Sethours(int); //sets hours

};

SalariedEmployee::SalariedEmployee(string n, string s, double np, double w, int h, string d) : name(n),
      ssn(s),
      netPay(np),
      wageRate(w),
      hours(h),
      department(d)
{}

string SalariedEmployee::Getname()
{
    return name;
}

string SalariedEmployee::Getssn()
{
    return ssn;
}

double SalariedEmployee::GetnetPay()
{
    return netPay;
}

double SalariedEmployee::GetwageRate()
{
    return wageRate;
}

int SalariedEmployee::Gethours()
{
    return hours;
}
void SalariedEmployee::Setname(string n)
{
    name = n;

}

void SalariedEmployee::Setssn(string s)
{
    ssn = s;
}

void SalariedEmployee::SetnetPay(double np)
{
    netPay = np;
}

void SalariedEmployee::Setdepartment(string d)
{
    department = d;
}

void SalariedEmployee::SetwageRate(double w)
{
    wageRate = w;
}

void SalariedEmployee::Sethours(int h)
{
    hours = h;
}

class Administrator : public SalariedEmployee
{
protected:
    string title;
    string responsi;
    string super;
    double salary;
public:
    Administrator(string t, string r, string s, double sa);
     ~Administrator();
    string Gettitle();
    string Getresponsi();
    string Getsuper();
    double Getsalary();
    void Settitle(string);
    void Setresponsi(string);
    void Setsuper(string);
    void Setsalary(double);
    void print();
};

Administrator::Administrator(string t, string r, string s, double sa) :  title(t), responsi(r), super(s), salary(sa)
{
}

Administrator::~Administrator()
{
    cout<<endl;
}

string Administrator::Gettitle()
{
    return title;
}

string Administrator::Getresponsi()
{
    return responsi;
}

string Administrator::Getsuper()
{
    return super;
}

double Administrator::Getsalary()
{
    return salary;
}
void Administrator::Settitle(string ti)
{
    title = ti;
}
void Administrator::Setresponsi(string re)
{
    responsi = re;
}

void Administrator::Setsuper(string su)
{
    super=su;
}

void Administrator::Setsalary(double sa)
{
    salary= sa;
}

void Administrator::print( )
  {

    cout << "\n_______________________________________________\n";

    cout << "Pay to the order of " << name<< endl;
    cout << "The sum of " << netPay << " Dollars\n";
    cout << "_________________________________________________\n";
    cout <<endl<<endl;
    cout << "Employee Number: " << ssn << endl;
    cout << "Salaried Employee. Regular Pay: " 
       << salary << endl; 
    cout << "_________________________________________________\n";
  }

int main()
{

    string name;
    string soc;
    double net = 0;
    double wage = 0;
    int hrs = 0;
    string dept;
    string admtitle;
    string resp;
    string sup;
    double sal = 0;
    int response = 0;

    string date = "January 12, 2013";

    cout<<setprecision(2)
    <<setiosflags(ios::fixed)
    <<setiosflags(ios::showpoint);

    SalariedEmployee emp1(name, soc,net, wage, hrs, dept);
    Administrator adm1(admtitle, resp, sup, sal);

while(response != 4){

    cout<<"Employee and Administrator Salary Program "<<endl;
    cout<<"(You will have to enter data first before you do anything else)"<<endl<<endl;
    cout<<"Enter Employee Data,  Enter 1"<<endl;
    cout<<"Change data,   Enter 2"<<endl;
    cout<<"Print Check,   Enter 3"<<endl;
    cout<<"End Program, Enter 4"<<endl<<endl;
    cout<<"Please make your selection"<<endl;

cin>> response;

    switch (response)

    {
    case 1:
        cout <<"The employee's data will be entered here: "<<endl<<endl;

        cout<<"Enter the employees name: ";
        cin.ignore();
        getline(cin, name);

        cout<<"Enter the employees social security number: ";
         cin.ignore();
        getline(cin, soc);

        cout<<"Enter the employees net pay: ";
        cin>>net;

        cout<<"Enter the employees wage rate: ";
        cin>>wage;

        cout<<"Enter the number of hours the employer worked: ";
        cin>>hrs;

        cout<<"Enter the employees title: ";
        cin.ignore();
        getline(cin,admtitle);

        cout<<"Enter the employees area responsibility: ";
        cin.ignore();
        getline(cin, resp);

        cout<<"Enter the employees salary: ";
        cin>>sal;

        cout<<endl<<endl<<endl;

        break;

    case 2:

        cout<<"Please change the data you entered previously here. " <<endl<<endl;

        cout<<"Enter the employees name: ";
        cin.ignore();
        getline(cin, name);

        cout<<"Enter the employees social security number: ";
         cin.ignore();
        getline(cin, soc);

        cout<<"Enter the employees net pay: ";
        cin>>net;

        cout<<"Enter the employees wage rate: ";
        cin>>wage;

        cout<<"Enter the number of hours the employer worked: ";
        cin>>hrs;

        cout<<"Enter the employees title: ";
        cin.ignore();
        getline(cin,admtitle);

        cout<<"Enter the employees area responsibility: ";
        cin.ignore();
        getline(cin, resp);

        cout<<"Enter the employees salary: ";
        cin>>sal;

        cout<<endl<<endl<<endl;
break;

    case 3:

        cout <<"Information Printed"<<endl<<endl;

        cout<<"_____________________________"<<date<<endl;
        &Administrator::print;

        break;

    default:

        cout<<endl<<endl
            <<"Invalid Selection! Try Again"<<endl;
        exit(1);

}
}

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:44:15.427

`Administrator(string t, string r, string s, double sa);`如果您不指定另一个，将尝试调用基类的默认构造函数。（默认构造函数是可以在没有任何参数的情况下调用的构造函数）

基类没有默认构造函数，因此错误。

调用基类的另一个构造函数：

```
Administrator::Administrator(string t, string r, string s, double sa) :  
SalariedEmployee(<args>), //base constructor call
title(t), responsi(r), super(s), salary(sa) //members
{
} 
```

# data-binding - 输入过滤器对象操作后未从对象更新 ZF2 表单数据

> ID：14280435
> 
> 赞同：0
> 
> 时间：2013-01-11T14:42:25.540
> 
> 标签：data-binding, doctrine-orm, zend-form, zend-framework2, zend-inputfilter

我有一个表单过滤器，它更改传递给它的值并返回这个新值。绑定实体后，对象按预期更新为新值，但再次显示表单时，仍显示旧数据（从表单传递）。

在 $form 对象中，有 2 个数据集，$data（数组）和 $object（实体）... 绑定时，$data 从 $object 获取值，当处理输入过滤器时，$object 从输入过滤器，当再次显示表单时，会显示 $data（输入过滤器对 $object 没有更新的更改）...

如何在确定有效性（并因此运行输入过滤器）后重新填充 $data？

```
// $form->data == $entity Values (Original)
$form->bind($entity);
// $form->data updated to $formValues (from post)
$form->setData($formValues);
// $entity Values update to InputFilters & $formValues
if($form->isValid()) {
  // Saves the new $entity values
  $this->getEntityManager()->flush();
}
$response->setVariables(array(
  // $form->data shows $formValues but not updated InputFilter values 
  'form' => $form,
} 
```

# php - 如何在wordpress中生成顺序编号

> ID：14280437
> 
> 赞同：1
> 
> 时间：2013-01-11T14:42:29.240
> 
> 标签：php, mysql, wordpress

我正在测试 WordPress 的功能并尝试构建一种后台/工作流系统。基本原则是每个帖子都将代表一个属于某些类别的工作/规范等......到目前为止它工作得很好，但我在生成顺序工作编号时遇到了麻烦。

这个想法是，当用户发布规范时，WP 会自动生成一个唯一的 4 位 ID，该 ID 将代表该规范的工作编号。

当前的解决方案仅适用于每次在不同类别的情况下调用帖子时生成 id 等。我想要它做的是在发布时生成数字，然后永久写入数据库而不是使用 PHP 生成。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:34:34.127

既然您说您不能使用 WordPress 帖子 ID，您可以创建一个使用**AUTO_INCREMENT**列来创建和存储它们的表。在此处插入新条目后，您可以通过 PHP 检索生成的 ID：

```
$lastid = $wpdb->insert_id; 
```

这样，您可以让 MySQL 处理 ID 的生成，而将 PHP 排除在外。

# ios - 只会显示一次的帮助屏幕 - UIImageView？

> ID：14280441
> 
> 赞同：0
> 
> 时间：2013-01-11T14:42:43.060
> 
> 标签：ios, objective-c, cocoa-touch

`UIImage`当用户第一次打开我的应用程序时，我想显示一个有用的提示。我想过`UIImageView`在相关的顶部放置一个和一个按钮，`ViewController`然后点击一下（alpha从1到0）将关闭图像，但我不确定`UIImageview`在顶部放置一个按钮和一个按钮是否是个好主意如果只使用一次，我的应用程序会一直使用。我希望图像位于当前 ViewController 的顶部，这样我就可以用箭头指向按钮等。有没有更优雅的方式来实现我的目标？

还有一件事，我希望我的应用程序记住图片已经显示。我应该使用`NSUserDefaults`它还是有其他我不知道的解决方案？

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:45:36.940

是的，使用 NSUserDefaults。在 appDelegate 中检查此项，如果尚未显示，请显示您的图像。忘记 alpha，只显示一个视图控制器（模态，弹出窗口，但你喜欢）并包含一个“关闭”或“关闭”按钮来关闭视图控制器。

# javascript - 优化 Javascript 方法填充或清空数组

> ID：14280442
> 
> 赞同：0
> 
> 时间：2013-01-11T14:42:52.840
> 
> 标签：javascript, jquery, arrays, optimization

我想知道是否有更好的方法将复选框值添加/删除到数组中。遗憾的是我不能使用 ECMAScript 5 `indexOf()`，因为我需要支持 IE8/7。

这是一个有效的 jsfiddle 示例：http: [//jsfiddle.net/puyQr/](http://jsfiddle.net/puyQr/)

该方法的作用是：

```
/**
 * If a user clicks onto the checkbox, the value of the value attribute is
 * only added to the array when the value not yet exists. However, if
 * the value already exists, the value is removed.
 */

var values = [];
jQuery(':checkbox').on('click', function(){     
    var index = jQuery.inArray(this.value, values);
    if(index === -1) {
        values.push(this.value);
    } else {
        values.splice(index, 1);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:49:45.950

从复选框获取值的另一种方法：

```
var values = jQuery(':checkbox:checked').map(function(){
    return $(this).val();
}).get(); 
```

[演示](http://jsfiddle.net/eRqCJ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:50:10.610

是的，使用对象文字。

```
var values = {};
jQuery(':checkbox').on('click', function () {     
    if (this.value in values && values[this.value] === 1) {
        values[this.value] = 0;
    } else {
        values[this.value] = 1;
    }
}); 
```

看[这里](http://jsfiddle.net/kLeWc/)。

如果你以后想要它作为一个*数组*，转换它是一件简单的事情，使用[`for..in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)和检查*值*是`1`在保留*key*之前。

# java - 使用特殊字符从 ajax 帖子中解码 Java 中的参数

> ID：14280445
> 
> 赞同：0
> 
> 时间：2013-01-11T14:43:13.513
> 
> 标签：java, jquery, ajax

我有一个带有表单的 html 页面，以及以下代码：

```
$.ajax({
   url: 'xxxxx',
   data: $('#contact-form').serialize(),
   type: 'post',
   cache: false,
   dataType: 'html',
   success: function (data) {....},
   error: contact.error
}); 
```

当我从 html 页面通过邮件发送字符串时，例如，字符串`áéíúó`，在 Java 中，我收到了字符串`Ã¡Ã©Ã­ÃºÃ³`。我应该怎么做才能解决这个问题？任何帮助都会非常有用。

**（日期 20131401）解决方案：** @TechSpellBound，感谢您的回复。您的解决方案促使我搜索另一个：D，我找到了另外两个对我有用的解决方案：1）在 Java 中，使用以下代码：

```
String param =  new String(req.getParameter("param").getBytes(), "iso-8859-1"); 
```

2) 其他解决方案是，在我的 Tomcat 中配置文件 web.xml 并放入：

```
 <filter>
        <filter-name>setCharacterEncodingFilter</filter-name>
        <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
            <init-param>
                <param-name>encoding</param-name>
                <param-value>UTF-8</param-value>
            </init-param>
        <async-supported>true</async-supported>
</filter>   

<filter-mapping>
    <filter-name>setCharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后文件 server.xml，把属性 URIEncoding="UTF-8" 放在所有配置的连接器中。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:21:29.897

尝试在您的 HTML 页面中声明以下内容之一：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
...
</head> 
```

**或者**

为了跨浏览器兼容性，添加：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

在 HTML 页面的顶部和

```
<head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8">
...
</head> 
```

# jquery - 带有 iscroll 和 stellar 的褪色元素

> ID：14280448
> 
> 赞同：1
> 
> 时间：2013-01-11T14:43:23.100
> 
> 标签：jquery, mobile, touch, fade, iscroll

我正在使用 stellar.js 和 iscroll.js 在移动页面上实现视差效果。到目前为止，一切正常。

但我想通过滚动来淡化视差元素。iscroll 有一个 onScrollMove 事件，只要您的手指在触摸屏上移动，就会触发该事件。但是在动画“滚动”期间，当您不再触摸屏幕时，不再触发此事件。因此，在这一刻，包括视差在内的滚动仍在继续，但褪色停止了。

有谁知道如何解决这个问题？

谢谢你的帮助！

# php - XPath 和 PHP：没有什么能正常工作

> ID：14280450
> 
> 赞同：1
> 
> 时间：2013-01-11T14:43:30.427
> 
> 标签：php, xml, xpath, simplexml

这是我的代码：

```
$XML = <<<XML
<items>
    <item id="123">
        <name>Item 1</name>
    </item>
    <item id="456">
        <name>Item 2</name>
    </item>
    <item id="789">
        <name>Item 3</name>
    </item>
</items>
XML;

$objSimpleXML = new SimpleXMLElement($XML);

print_r($objSimpleXML->xpath('./item[1]'));
print "- - - - - - -\n";
print_r($objSimpleXML->xpath('./item[2][@id]'));
print "- - - - - - -\n";
print_r($objSimpleXML->xpath('./item[1]/name')); 
```

没什么特别的：我试图通过`XPath`. 路径必须是字符串以设计从`XML`配置文件加载其数据的动态程序。

当使用 PHP 对象访问时，`$objSimpleXML->items->item[0]['id']`一切正常。但是`XPath`方法并没有真正起作用。上面的代码生成以下输出：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [id] => 123
                )

            [name] => Item 1
        )

)
- - - - - - -
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [id] => 456
                )

            [name] => Item 2
        )

)
- - - - - - -
Array
(
    [0] => SimpleXMLElement Object
        (
        )

) 
```

我同意第一个输出。但在第二个输出中，返回的是整个元素而不是属性。为什么？最后一个listing是空的而不是name内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:48:08.230

这是因为您的 XPath 错误。您正在使用谓词，即

```
./item[2][@id] 
```

这意味着“`item`具有`id`属性的第二个”，但看起来你想要

```
./item[2]/@id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:56:41.230

试试这个，如果那不是你想要的，请举一个更好的例子。

```
<?php

$XML = <<<XML
<items>
    <item id="123">
        <name>Item 1</name>
    </item>
    <item id="456">
        <name>Item 2</name>
    </item>
    <item id="789">
        <name>Item 3</name>
    </item>
</items>
XML;

$objSimpleXML = new SimpleXMLElement($XML);

$items = $objSimpleXML->xpath('./item');

print '<pre>';
print_r($items[0]);
print "- - - - - - -\n";
print_r($items[1]->attributes()->id);
print "- - - - - - -\n";
print_r($items[2]->name); 
```

# gcc - 生成标题中定义的所有预处理器符号的列表

> ID：14280451
> 
> 赞同：13
> 
> 时间：2013-01-11T14:43:33.040
> 
> 标签：gcc, macros, c-preprocessor

假设我使用一些 C 或 C++ 库，由头文件和一些源文件组成，这些库被编译成我可以链接的静态或共享库。

在库的标题（数十个......或数百个文件）中，定义了一些宏/符号。

现在我想在一个项目中使用这个库，它还定义了一些宏和符号。当然，我想避免名称冲突，因为有时会出现这种情况，尤其是 windows.h。但更一般地说，我想控制从该标题中真正导出的内容。

我可以使用 gcc 预处理器选项生成已定义符号的列表：

```
gcc -E -dM include/great_lib.h | sort -V >symbols.txt 
```

这会在文件 symbols.txt 中输出包含此标头的用户文件中包含的所有已定义符号的排序列表。

但是，它只给出符号，**而不是定义它的文件**。

我觉得这可能是一个有用的信息。例如，检查某些系统宏是否在“great_lib.h”或其上级中被重新定义。不幸的是，在检查[gcc 预处理器选项](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Preprocessor-Options.html)后，我看不到使用 gcc 的方法。

例如，而不是只给我：

```
#define M_PI 3.14159265358979323846 
```

它会产生

```
#define M_PI 3.14159265358979323846; /usr/include/math.h 
```

也许与 -dN 选项有关？但是它的输出让我感到困惑，它需要进一步的文本处理，而且我不明白信息是如何分层的。还是更简单的方法？

相关问题：

*   [无论如何要查看预处理器定义的宏列表？](https://stackoverflow.com/questions/10904873/)
*   [如何获取文件中使用（或定义）的所有预处理器符号的列表？](https://stackoverflow.com/questions/5603870/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:58:38.000

-dD 选项与宏一起输出预处理的源代码。这包括指示当前源文件的行，例如

```
# 1 "c:\\mingw\\bin\\../lib/gcc/mingw32/4.5.2/../../../../include/_mingw.h" 1 3 
```

您可以编写一个小程序，（i）通过解析这些行来跟踪当前源文件；(ii) 输出所有以`#define`(and `\t# define`etc.) 开头的行，后跟当前源文件名；(iii) 丢弃所有其他行（源代码、声明等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:48:10.243

一种快速的 unix 方法：

```
find "$PATH_TO_LIB" -name "*.h" | xargs grep "^[ \t]*#[ \t]*define" 
```

然后，您可以使用 sed 和 sort 来稍微清理一下格式。

此外，根据 gcc 手册，gcc 会警告您此类事情。

[http://gcc.gnu.org/onlinedocs/cpp/Undefining-and-Redefining-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Undefining-and-Redefining-Macros.html)

> 如果使用与旧定义不同的定义重新定义宏，则预处理器会发出警告并更改宏以使用新定义。如果新定义实际上相同，则重新定义将被忽略。例如，这允许两个不同的标头定义一个公共宏。如果定义不匹配，预处理器只会抱怨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-23T20:18:23.780

不要笨拙地重新发明轮子。所有 gcc -dM 的东西都给你一个方形轮子:-)

任何`ctags`（对于 vi）或`etags`（对于 emacs）程序都将提取该信息（哪个标识符在哪个文件中定义/声明）。作为奖励，您将以编辑者可以直接理解的形式获得它，允许您将光标放在标识符上，然后跳转到其声明/定义。

使用工具箱中的工具，使用 Unix 哲学，让一个工具做好一件事。

# sql - 将 2 亿行从暂存表插入到同一 SQL 数据库中的另一个表中

> ID：14280454
> 
> 赞同：0
> 
> 时间：2013-01-11T14:43:35.087
> 
> 标签：sql, insert

不炸毁事务日志的最快方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:51:19.083

CTAS-create table as select 可能是在任何数据库上执行此类操作的最快方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:09:39.303

CTAS 或 create table as select 语句作为一个事务完成。

```
Create table new_table  
as  
select * from old_table 
```

如果您从临时表插入到您的基表中，这可能是最快的：

```
insert /*+ append */ into base_table  
values(select * from staging_table) ; 
```

提示您生成最少的`append`日志记录，因此您**必须**立即执行备份。

# c++ - 具有迭代器但类型固定的模板函数

> ID：14280456
> 
> 赞同：5
> 
> 时间：2013-01-11T14:43:43.327
> 
> 标签：c++, templates, stl, function-templates

```
ProcessIndex( int index );

template< typename Iterator >
void ProcessIndexes( Iterator start, Iterator end )
{
    while( start!=end )
    {
        ProcessIndex(*start++);
    }
} 
```

我怎样才能强制这个函数只能用一个特定的、固定的迭代器值类型来调用，例如`int`（但任何容器类型）？在这种情况下，`ProcessIndex()`将 a`int`作为输入，因此，非原始类型的编译失败并为 eg 生成警告`float`。但是，我希望声明强制执行`int`，以便编译失败，但`int`.

尽管付出了很大的努力，但在这里或其他地方还没有找到“解决方案”，这是微不足道的（？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-18T11:07:31.373

从 C++20 开始，您可以使用新概念和`requires`关键字来检查迭代器是否指向`int`类型：

```
#include <vector>

void ProcessIndex( int ) {}

template< typename Iterator >
void ProcessIndecies( Iterator start, Iterator end )
    requires( std::same_as<std::decay_t<decltype(*start)>, int> )
{
    while( start!=end )
    {
        ProcessIndex(*start++);
    }
}

int main() {
    std::vector<int> vi;
    ProcessIndecies(vi.begin(), vi.end()); //ok

    std::vector<float> vf;
    //ProcessIndecies(vf.begin(), vf.end()); //fails
} 
```

演示：[https ://gcc.godbolt.org/z/hba1qh8bz](https://gcc.godbolt.org/z/hba1qh8bz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-18T12:04:07.280

使用 C++11，您可以使用[enable_if](https://en.cppreference.com/w/cpp/types/enable_if)、[is_same](https://en.cppreference.com/w/cpp/types/is_same)和[decay](https://en.cppreference.com/w/cpp/types/decay)来做到这一点，如下所示：

```
#include<iostream>
#include <type_traits>
#include <vector>

void ProcessIndex( int index )
{
    //do something here
    std::cout<<"Inside ProcessIndex with: "<< index <<std::endl;
}

template< typename Iterator >
auto ProcessIndexes( Iterator start, Iterator end ) -> typename std::enable_if<std::is_same<typename std::decay<decltype(*start)>::type, int>::value>::type
{
    std::cout<<"Inside ProcessIndexes"<<std::endl;
    while( start!=end )
    {
        ProcessIndex(*start++);
    }
}

int main(){
    std::vector<int> vec{1,2,3};
    ProcessIndexes(vec.begin(), vec.end()); //WORKS

    std::vector<float> vec2;
    //ProcessIndexes(vec2.begin(), vec2.end()); //this won't work
} 
```

# dll - D3D注入一个设备，多个renderTargets - >从后台缓冲区中获取图像位

> ID：14280458
> 
> 赞同：0
> 
> 时间：2013-01-11T14:43:51.253
> 
> 标签：dll, code-injection, direct3d

我有一个游戏，我在其中注入了一个 directx dll 来抓取图像。这就是我抓取图像位的方式：

 `````
void dumb_buffer(LPDIRECT3DDEVICE9 pDevice){

    ret = pDevice->GetRenderTarget(0,&pRenderTarget);
    ret = pRenderTarget->GetDesc(&rtDesc);

    pDevice->CreateOffscreenPlainSurface(rtDesc.Width, rtDesc.Height,rtDesc.Format,   
                                            D3DPOOL_DEFAULT, &pDestTarget, NULL);

    pDevice->GetRenderTargetData(pRenderTarget,pDestTarget);

    if(pDestTarget != NULL){
       pDestTarget->LockRect(&rect,0, D3DLOCK_READONLY);
       bits = (unsigned char*)rect.pBits;
       pDestTarget->UnlockRect();
       pDestTarget->Release();
    }

    pRenderTarget->Release();
} 
````  `在第一帧中，一切正常，rtDesc 看起来像这样：

 `````
rtDesc.Format = D3DFMT_R32F
rtDesc.width = 1920
rtDesc.height = 1200 
```` 

`在第二帧 rtDesc 现在看起来像这样：`

 ``````
rtDesc.Format = 1280070990
rtDesc.width = 1
rtDesc.height = 1 
````  `然后下一帧一切都很好，下一帧又是“1280070990”。

有什么建议为什么它会这样？有两种不同的渲染器吗？

此外，如果我使用“dumb_buffer(..)”开始注入和帧抓取，游戏中的帧速率会下降并且游戏会抖动。

这里还有两张截图：

luna-arts.de/others/misc/1.jpg

luna-arts.de/others/misc/2.jpg

看起来每第二帧/运行都会创建一个 1x1 表面。

GetRenderTarget(..) 和 GetDesc(..) 的返回值为**D3D_OK**

游戏 (VBS2) 支持 SLI 显卡，这个 1x1 表面是否可能类似于第二张显卡的占位符？我现在正在使用一张显卡。

设备始终相同，但 renderTarget 的地址在屏幕截图中看到的两个地址之间切换。所以看起来有两个渲染目标。

带有“if(...)”的代码正在运行，但帧率下降并且游戏抖动。有什么想法可以解决这个问题吗？

在这个游戏的旧版本中，一切正常。

此外，只要我在游戏的菜单中，只有一个 renderTarget 并且一切正常，但是一旦我启动一个关卡，就会出现第二个 renderTarget。

多谢

问候丹尼斯``````

# coding-style - 在调用者或被调用者中处理数据？

> ID：14280459
> 
> 赞同：2
> 
> 时间：2013-01-11T14:43:53.760
> 
> 标签：coding-style

假设我有一个名为 OO 语言的对象`Man`，并且`Man`有一个属性`name`。如果我有一个向这个人打招呼的函数，我应该`Man.name`作为参数发送还是只发送`Man`。例如，在 python 中：

```
def sayHello(Man):
    print 'hello! ' + Man.name

def sayHello2(name):
    print 'hello! ' + name 
```

哪一个更好？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:55:13.037

如果您的函数需要名称，并且不需要 Man 的其他属性，只需发送名称即可。原因是为了减少耦合（sayHello 不需要知道 Man 的属性）。

如果您的函数需要 Man 的两个或更多属性，您可能应该传递该对象。*主体在 Martin Fowler 的书Refactoring: Improvement the Design of Existing Code*中称为“Preserve Whole Object” 。

# java - 无法从有效 URL 读取 HTML 内容

> ID：14280464
> 
> 赞同：1
> 
> 时间：2013-01-11T14:44:12.963
> 
> 标签：java, url, io, network-programming, inputstream

我正在尝试一个简单的程序来从给定的 URL 读取 HTML 内容。在这种情况下，我尝试的 URL 不需要任何 cookie/用户名/密码，但我仍然收到**io.IOException：服务器返回 HTTP 响应代码：403**错误。谁能告诉我我在这里做错了什么？（我知道SO中有类似的问题，但他们没有帮助）：

```
 import java.net.*;
import java.io.*;
import java.net.MalformedURLException;
import java.io.IOException;
public class urlcont {
public static void main(String[] args) {
try {
  URL u = new URL("http://www.amnesty.org/");
  URLConnection uc = u.openConnection();
  uc.addRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)");
  uc.connect();
  InputStream in = uc.getInputStream();
  int b;
  File f = new File("C:\\Users\\kausta\\Desktop\\urlcont.txt");
  f.createNewFile();
  OutputStream s = new FileOutputStream(f);
  while ((b = in.read()) != -1) {
    s.write(b);
  }
}
catch (MalformedURLException e) {System.err.println(e);}
catch (IOException e) {System.err.println(e);} 
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:51:04.917

如果您可以在浏览器中获取 URL，但不能通过 Java 获取，那么在我看来，这表明他们正在通过用户代理过滤阻止对页面的编程访问。尝试在您的连接上设置用户代理，以便您的代码在网络服务器上显示为网络浏览器。

请参阅此线程以获取帮助：[在 URLConnection 中设置标头的正确方法是什么？](https://stackoverflow.com/questions/331538/what-is-the-proper-way-of-setting-headers-in-a-urlconnection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:46:50.053

存在权限问题：

> Web 服务器可能会返回 403 Forbidden HTTP 状态代码以响应客户端对网页或资源的请求，以指示服务器拒绝允许所请求的操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:47:37.467

您没有做任何“错误”的事情，您尝试访问的服务器正在阻止您的请求，因为您无权访问该文件

Http-Error 403 表示禁止 -> 远程服务器阻止请求。

检查您是否需要提供身份验证才能访问所需的文档，并在这种情况下提供请求；）

# asp.net-web-api - 对 Web API 的 POST 请求的 JSON 反序列化问题（使用 EF 5）

> ID：14280476
> 
> 赞同：0
> 
> 时间：2013-01-11T14:44:38.883
> 
> 标签：asp.net-web-api, entity-framework-5, asp.net-web-api-routing

我有一个使用 ADD.net DB 模型生成的数据模型，用于从 Azure SQL DB 生成 .edmx 文件。

包含为 .edmx 文件生成的代码的设计器文件，如下所示 -

```
 public partial class DefectManagementSystemEntities : ObjectContext
    {

        #region Partial Methods

        partial void OnContextCreated();

        #endregion

        #region ObjectSet Properties

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<User> Users
        {
            get
            {
                if ((_Users == null))
                {
                    _Users = base.CreateObjectSet<User>("Users");
                }
                return _Users;
            }
        }
        private ObjectSet<User> _Users;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<WorkItem> WorkItems
        {
            get
            {
                if ((_WorkItems == null))
                {
                    _WorkItems = base.CreateObjectSet<WorkItem>("WorkItems");
                }
                return _WorkItems;
            }
        }
        private ObjectSet<WorkItem> _WorkItems;

        #endregion

    #region Entities

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmEntityTypeAttribute(NamespaceName="DefectManagementSystemModel", Name="User")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class User : EntityObject
    {
        #region Factory Method

        /// <summary>
        /// Create a new User object.
        /// </summary>
        /// <param name="id">Initial value of the ID property.</param>
        /// <param name="login_Id">Initial value of the Login_Id property.</param>
        /// <param name="password">Initial value of the Password property.</param>
        /// <param name="role">Initial value of the Role property.</param>
        public static User CreateUser(global::System.Int32 id, global::System.String login_Id, global::System.String password, global::System.Int32 role)
        {
            User user = new User();
            user.ID = id;
            user.Login_Id = login_Id;
            user.Password = password;
            user.Role = role;
            return user;
        }

        #endregion

        #region Simple Properties

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 ID
        {
            get
            {
                return _ID;
            }
            set
            {
                if (_ID != value)
                {
                    OnIDChanging(value);
                    ReportPropertyChanging("ID");
                    _ID = StructuralObject.SetValidValue(value, "ID");
                    ReportPropertyChanged("ID");
                    OnIDChanged();
                }
            }
        }
        private global::System.Int32 _ID;
        partial void OnIDChanging(global::System.Int32 value);
        partial void OnIDChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String First_Name
        {
            get
            {
                return _First_Name;
            }
            set
            {
                OnFirst_NameChanging(value);
                ReportPropertyChanging("First_Name");
                _First_Name = StructuralObject.SetValidValue(value, true, "First_Name");
                ReportPropertyChanged("First_Name");
                OnFirst_NameChanged();
            }
        }
        private global::System.String _First_Name;
        partial void OnFirst_NameChanging(global::System.String value);
        partial void OnFirst_NameChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Last_Name
        {
            get
            {
                return _Last_Name;
            }
            set
            {
                OnLast_NameChanging(value);
                ReportPropertyChanging("Last_Name");
                _Last_Name = StructuralObject.SetValidValue(value, true, "Last_Name");
                ReportPropertyChanged("Last_Name");
                OnLast_NameChanged();
            }
        }
        private global::System.String _Last_Name;
        partial void OnLast_NameChanging(global::System.String value);
        partial void OnLast_NameChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.String Login_Id
        {
            get
            {
                return _Login_Id;
            }
            set
            {
                OnLogin_IdChanging(value);
                ReportPropertyChanging("Login_Id");
                _Login_Id = StructuralObject.SetValidValue(value, false, "Login_Id");
                ReportPropertyChanged("Login_Id");
                OnLogin_IdChanged();
            }
        }
        private global::System.String _Login_Id;
        partial void OnLogin_IdChanging(global::System.String value);
        partial void OnLogin_IdChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.String Password
        {
            get
            {
                return _Password;
            }
            set
            {
                OnPasswordChanging(value);
                ReportPropertyChanging("Password");
                _Password = StructuralObject.SetValidValue(value, false, "Password");
                ReportPropertyChanged("Password");
                OnPasswordChanged();
            }
        }
        private global::System.String _Password;
        partial void OnPasswordChanging(global::System.String value);
        partial void OnPasswordChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 Role
        {
            get
            {
                return _Role;
            }
            set
            {
                OnRoleChanging(value);
                ReportPropertyChanging("Role");
                _Role = StructuralObject.SetValidValue(value, "Role");
                ReportPropertyChanged("Role");
                OnRoleChanged();
            }
        }
        private global::System.Int32 _Role;
        partial void OnRoleChanging(global::System.Int32 value);
        partial void OnRoleChanged();

        #endregion

    }

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmEntityTypeAttribute(NamespaceName="DefectManagementSystemModel", Name="WorkItem")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class WorkItem : EntityObject
    {
        #region Factory Method

        /// <summary>
        /// Create a new WorkItem object.
        /// </summary>
        /// <param name="id">Initial value of the ID property.</param>
        /// <param name="type">Initial value of the Type property.</param>
        /// <param name="status">Initial value of the Status property.</param>
        /// <param name="title">Initial value of the Title property.</param>
        /// <param name="priority">Initial value of the Priority property.</param>
        /// <param name="severity">Initial value of the Severity property.</param>
        /// <param name="assignTo">Initial value of the AssignTo property.</param>
        /// <param name="openedBy">Initial value of the OpenedBy property.</param>
        /// <param name="areaPath">Initial value of the AreaPath property.</param>
        public static WorkItem CreateWorkItem(global::System.Int32 id, global::System.Int32 type, global::System.Int32 status, global::System.String title, global::System.Int32 priority, global::System.Int32 severity, global::System.Int32 assignTo, global::System.Int32 openedBy, global::System.String areaPath)
        {
            WorkItem workItem = new WorkItem();
            workItem.ID = id;
            workItem.Type = type;
            workItem.Status = status;
            workItem.Title = title;
            workItem.Priority = priority;
            workItem.Severity = severity;
            workItem.AssignTo = assignTo;
            workItem.OpenedBy = openedBy;
            workItem.AreaPath = areaPath;
            return workItem;
        }

        #endregion

        #region Simple Properties

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 ID
        {
            get
            {
                return _ID;
            }
            set
            {
                if (_ID != value)
                {
                    OnIDChanging(value);
                    ReportPropertyChanging("ID");
                    _ID = StructuralObject.SetValidValue(value, "ID");
                    ReportPropertyChanged("ID");
                    OnIDChanged();
                }
            }
        }
        private global::System.Int32 _ID;
        partial void OnIDChanging(global::System.Int32 value);
        partial void OnIDChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 Type
        {
            get
            {
                return _Type;
            }
            set
            {
                OnTypeChanging(value);
                ReportPropertyChanging("Type");
                _Type = StructuralObject.SetValidValue(value, "Type");
                ReportPropertyChanged("Type");
                OnTypeChanged();
            }
        }
        private global::System.Int32 _Type;
        partial void OnTypeChanging(global::System.Int32 value);
        partial void OnTypeChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 Status
        {
            get
            {
                return _Status;
            }
            set
            {
                OnStatusChanging(value);
                ReportPropertyChanging("Status");
                _Status = StructuralObject.SetValidValue(value, "Status");
                ReportPropertyChanged("Status");
                OnStatusChanged();
            }
        }
        private global::System.Int32 _Status;
        partial void OnStatusChanging(global::System.Int32 value);
        partial void OnStatusChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.String Title
        {
            get
            {
                return _Title;
            }
            set
            {
                OnTitleChanging(value);
                ReportPropertyChanging("Title");
                _Title = StructuralObject.SetValidValue(value, false, "Title");
                ReportPropertyChanged("Title");
                OnTitleChanged();
            }
        }
        private global::System.String _Title;
        partial void OnTitleChanging(global::System.String value);
        partial void OnTitleChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Description
        {
            get
            {
                return _Description;
            }
            set
            {
                OnDescriptionChanging(value);
                ReportPropertyChanging("Description");
                _Description = StructuralObject.SetValidValue(value, true, "Description");
                ReportPropertyChanged("Description");
                OnDescriptionChanged();
            }
        }
        private global::System.String _Description;
        partial void OnDescriptionChanging(global::System.String value);
        partial void OnDescriptionChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 Priority
        {
            get
            {
                return _Priority;
            }
            set
            {
                OnPriorityChanging(value);
                ReportPropertyChanging("Priority");
                _Priority = StructuralObject.SetValidValue(value, "Priority");
                ReportPropertyChanged("Priority");
                OnPriorityChanged();
            }
        }
        private global::System.Int32 _Priority;
        partial void OnPriorityChanging(global::System.Int32 value);
        partial void OnPriorityChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 Severity
        {
            get
            {
                return _Severity;
            }
            set
            {
                OnSeverityChanging(value);
                ReportPropertyChanging("Severity");
                _Severity = StructuralObject.SetValidValue(value, "Severity");
                ReportPropertyChanged("Severity");
                OnSeverityChanged();
            }
        }
        private global::System.Int32 _Severity;
        partial void OnSeverityChanging(global::System.Int32 value);
        partial void OnSeverityChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Environment
        {
            get
            {
                return _Environment;
            }
            set
            {
                OnEnvironmentChanging(value);
                ReportPropertyChanging("Environment");
                _Environment = StructuralObject.SetValidValue(value, true, "Environment");
                ReportPropertyChanged("Environment");
                OnEnvironmentChanged();
            }
        }
        private global::System.String _Environment;
        partial void OnEnvironmentChanging(global::System.String value);
        partial void OnEnvironmentChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String OS
        {
            get
            {
                return _OS;
            }
            set
            {
                OnOSChanging(value);
                ReportPropertyChanging("OS");
                _OS = StructuralObject.SetValidValue(value, true, "OS");
                ReportPropertyChanged("OS");
                OnOSChanged();
            }
        }
        private global::System.String _OS;
        partial void OnOSChanging(global::System.String value);
        partial void OnOSChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Browser
        {
            get
            {
                return _Browser;
            }
            set
            {
                OnBrowserChanging(value);
                ReportPropertyChanging("Browser");
                _Browser = StructuralObject.SetValidValue(value, true, "Browser");
                ReportPropertyChanged("Browser");
                OnBrowserChanged();
            }
        }
        private global::System.String _Browser;
        partial void OnBrowserChanging(global::System.String value);
        partial void OnBrowserChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public Nullable<global::System.Int32> Resolution
        {
            get
            {
                return _Resolution;
            }
            set
            {
                OnResolutionChanging(value);
                ReportPropertyChanging("Resolution");
                _Resolution = StructuralObject.SetValidValue(value, "Resolution");
                ReportPropertyChanged("Resolution");
                OnResolutionChanged();
            }
        }
        private Nullable<global::System.Int32> _Resolution;
        partial void OnResolutionChanging(Nullable<global::System.Int32> value);
        partial void OnResolutionChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public Nullable<global::System.Int32> Build
        {
            get
            {
                return _Build;
            }
            set
            {
                OnBuildChanging(value);
                ReportPropertyChanging("Build");
                _Build = StructuralObject.SetValidValue(value, "Build");
                ReportPropertyChanged("Build");
                OnBuildChanged();
            }
        }
        private Nullable<global::System.Int32> _Build;
        partial void OnBuildChanging(Nullable<global::System.Int32> value);
        partial void OnBuildChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 AssignTo
        {
            get
            {
                return _AssignTo;
            }
            set
            {
                OnAssignToChanging(value);
                ReportPropertyChanging("AssignTo");
                _AssignTo = StructuralObject.SetValidValue(value, "AssignTo");
                ReportPropertyChanged("AssignTo");
                OnAssignToChanged();
            }
        }
        private global::System.Int32 _AssignTo;
        partial void OnAssignToChanging(global::System.Int32 value);
        partial void OnAssignToChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Int32 OpenedBy
        {
            get
            {
                return _OpenedBy;
            }
            set
            {
                OnOpenedByChanging(value);
                ReportPropertyChanging("OpenedBy");
                _OpenedBy = StructuralObject.SetValidValue(value, "OpenedBy");
                ReportPropertyChanged("OpenedBy");
                OnOpenedByChanged();
            }
        }
        private global::System.Int32 _OpenedBy;
        partial void OnOpenedByChanging(global::System.Int32 value);
        partial void OnOpenedByChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public Nullable<global::System.Int32> ActivatedBy
        {
            get
            {
                return _ActivatedBy;
            }
            set
            {
                OnActivatedByChanging(value);
                ReportPropertyChanging("ActivatedBy");
                _ActivatedBy = StructuralObject.SetValidValue(value, "ActivatedBy");
                ReportPropertyChanged("ActivatedBy");
                OnActivatedByChanged();
            }
        }
        private Nullable<global::System.Int32> _ActivatedBy;
        partial void OnActivatedByChanging(Nullable<global::System.Int32> value);
        partial void OnActivatedByChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public Nullable<global::System.Int32> ClosedBy
        {
            get
            {
                return _ClosedBy;
            }
            set
            {
                OnClosedByChanging(value);
                ReportPropertyChanging("ClosedBy");
                _ClosedBy = StructuralObject.SetValidValue(value, "ClosedBy");
                ReportPropertyChanged("ClosedBy");
                OnClosedByChanged();
            }
        }
        private Nullable<global::System.Int32> _ClosedBy;
        partial void OnClosedByChanging(Nullable<global::System.Int32> value);
        partial void OnClosedByChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.String AreaPath
        {
            get
            {
                return _AreaPath;
            }
            set
            {
                OnAreaPathChanging(value);
                ReportPropertyChanging("AreaPath");
                _AreaPath = StructuralObject.SetValidValue(value, false, "AreaPath");
                ReportPropertyChanged("AreaPath");
                OnAreaPathChanged();
            }
        }
        private global::System.String _AreaPath;
        partial void OnAreaPathChanging(global::System.String value);
        partial void OnAreaPathChanged();

        #endregion

    }

    #endregion

} 
```

和一个控制器方法作为

```
 public class UserController : ApiController
        {
            DMSDataAccessLayer DBUser = new DMSDataAccessLayer();

            // GET api/User/All
            [HttpGet]
            public IEnumerable<UserDTO> Get()
            {
                return DBUser.ReadAllUsersFromDMS();
            }

            // POST api/User
            public HttpResponseMessage Post(User user)
            {
                try
                {
                    //DBUser.InsertToDMS(user);
                }
                catch (Exception e)
                {
                    Logger.ErrorLog(e.Message);
                    throw e;
                }

                return Request.CreateResponse(HttpStatusCode.Created);            
            } 
```

我在 POST 请求中传递的 JSON 正文是 -

```
 {"User": 
  [{"ID":1,"First_Name":"Vaibhav","Last_Name":"N","Login_Id":"manishn_007@hotmail.com",
  "Password":"test123","Role":0}]} 
```

问题：

1.  虽然我可以将 Post 请求发送到 Web API，但*用户*对象会填充值设置为*null*的属性。

对我来说，问题似乎在于 JSON 序列化。我尝试 Bing 这个问题，发现 Web API 内置的 JSON 序列化很糟糕，需要自定义将 JSON.NET 定义为默认序列化程序。不幸的是，这对我不起作用。

有什么我可能遗漏的吗？

哦，是的，我通过提琴手发送的 Post 请求看起来像

```
 Connection: keep-alive
Content-Length: 76
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Accept: application/json, text/javascript, */*; q=0.01
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:31:16.630

尝试将 POST Action 签名更改为

```
 public HttpResponseMessage Post([ModelBinder]User user) 
```

确保您使用`System.Web.Http.ModelBinding`

因此

```
 [HttpPost]
    public HttpResponseMessage Post([ModelBinder]User user)
    {
        try
        {
            //DBUser.InsertToDMS(user);
        }
        catch (Exception e)
        {
            Logger.ErrorLog(e.Message);
            throw e;
        }

        return Request.CreateResponse(HttpStatusCode.Created);            
    } 
```

[此处的此博客](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)很好地了解了模型绑定如何为 ASP.NET Web API 工作，这与 ASP.NET MVC 中的模型绑定不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:10:56.323

我认为问题不在于 JSON 序列化。相反，请尝试传递一个没有外部“用户”属性的 JSON 对象。所以只需发布：

```
{"ID":1,"First_Name":"Vaibhav","Last_Name":"N","Login_Id":"manishn_007@hotmail.com",
  "Password":"test123","Role":0} 
```

# php - 如何验证 Bingbot？还是 Bingbot 坏了？

> ID：14280479
> 
> 赞同：2
> 
> 时间：2013-01-11T14:44:59.757
> 
> 标签：php, dns, bing, msn, reverse-dns

我只是尝试验证 Bingbot 并使用了这个官方微软博客条目的规则：http: [//www.bing.com/community/site_blogs/b/webmaster/archive/2012/08/31/how-to-verify-那-bingbot-是-bingbot.aspx](http://www.bing.com/community/site_blogs/b/webmaster/archive/2012/08/31/how-to-verify-that-bingbot-is-bingbot.aspx)

这种技术在大多数情况下都有效，但在某些情况下却不起作用：（我的错还是他们的错？）

**作品：**
`202.96.51.137`使用反向 DNS 检查：`gethostbyname(gethostbyaddr(202.96.51.137))`结果`202.96.51.137`

**错误结果：**
此 MSN bot IP：`65.55.213.246`通过反向 DNS 检查进行检查`gethostbyname(gethostbyaddr(65.55.213.246))` 并导致：（`msnbot-65-55-213-246.search.msn.com` 通常它们使用 ip 解析）

**另一个错误结果**
This MSN bot IP: `157.55.33.113`check with a reverse DNS `gethostbyname(gethostbyaddr("157.55.33.113"))`resolves in `157.55.33.11`(IP D class wrong)

# android - Android HTTP GET 参数

> ID：14280483
> 
> 赞同：3
> 
> 时间：2013-01-11T14:45:02.807
> 
> 标签：android, apache, http, get, query-parameters

我正在使用 apache http 库，需要知道如何向 HTTP GET 请求添加参数。我已经查看了[如何在 Android 中向 HTTP GET 请求添加参数？](https://stackoverflow.com/questions/2959316/how-to-add-parameters-to-a-http-get-request-in-android)但接受的答案将参数添加到 HTTP POST。到目前为止，这是我的代码，但它不起作用。

```
HttpGet get = new HttpGet("https://server.com/stuff");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("count", "5"));
HttpParams p = get.getParams();
p.setParameter("length", "5");
get.setParams(p); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-14T04:23:25.973

```
String url = "https://server.com/stuff"
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
nameValuePairs.add(new BasicNameValuePair("count", "5"));
HttpClient httpClient = new DefaultHttpClient();
String paramsString = URLEncodedUtils.format(nameValuePairs, "UTF-8");
HttpGet httpGet = new HttpGet(url + "?" + paramsString);
HttpResponse response = httpClient.execute(httpGet); 
```

**编辑：**自 Android SDK v22 以来，该类型`NameValuePair`已被弃用。我推荐使用[Volley](https://developer.android.com/training/volley/index.html)，这是一个 HTTP 库，它使 Android 应用程序的网络更容易，最重要的是，更快。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T14:50:10.780

与 POST 不同，GET 在 url 下发送参数，如下所示：

```
http://myurl.com?variable1=value&variable2=value2 
```

其中：参数区域从问号开始，因此*变量*1 是第一个参数，它具有“*值*”值...

请参阅[此处](http://www.w3schools.com/tags/ref_httpmethods.asp)了解更多信息。

所以你需要做的只是根据服务器的需要构建一个包含这些参数的 url。

**编辑：**

在你的情况下：

```
HttpGet get = new HttpGet("https://server.com/stuff?count=5&length=5");
... 
```

其中：count=5 和 length=5 是参数和“？” 标记是参数定义的开始......我希望这会有所帮助。

# java - 条纹：java.lang.NoSuchMethodException：net.sourceforge.stripes.action.Resolution。

> ID：14280484
> 
> 赞同：0
> 
> 时间：2013-01-11T14:45:07.500
> 
> 标签：java, stripes

我是 Stripes 的新手，当我向我的 Java 应用程序发帖时出现以下错误：

```
java.lang.NoSuchMethodException: net.sourceforge.stripes.action.Resolution.<init> 
```

帖子被很好地接收，并且适当的方法被调用（setHeadings），但是只要帖子发生，它就会在日志和控制台中留下大堆栈转储，显然是因为上述原因。

什么可能导致此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:48:25.693

原来我有 2 个名为“setHeadings”的方法和 2 个名为“getHeadings”的方法，但签名不同，Stripes 感到困惑并调用了错误的方法。

因此，当它想要一个“getHeadings”作为解决方案时，stripes 试图为该属性调用我的“getHeadings”，因此它可以返回响应。

解决方案是简单地将我的帖子方法名称更改为“saveHeadings”而不是“setHeadings”以避免冲突！

# node.js - 猫鼬断开连接不起作用

> ID：14280489
> 
> 赞同：8
> 
> 时间：2013-01-11T14:45:33.820
> 
> 标签：node.js, mongodb, mongoose

完成数据库工作后，我试图断开猫鼬连接，但似乎没有用

```
var mongoose = require('mongoose');

mongoose.connect('mongodb://localhost:27017/myDatabase'); 

var MyModel =  mongoose.model('MyModel', MySchema);

//do something here

mongoose.disconnect(); 
```

第一次一切正常，但第二次运行代码时，我收到错误“尝试打开未关闭的连接”。我也试过 mongoose.connection.close(); 并得到相同的结果。

谁能帮我解决这个问题？

非常感谢！

加里

我想我想通了。

在我的代码中，我试图对我的模型和数据库做一些事情：

var 猫鼬 = 要求（'猫鼬'）；

```
mongoose.connect('mongodb://localhost:27017/myDatabase'); 

var MyModel =  mongoose.model('MyModel', MySchema);

MyModel.findOne({}, function () {...});

mongoose.disconnect(); 
```

看到问题了吗？由于 Nodejs 的非阻塞特性，在“findOne”完成之前就执行了“断开连接”，所以当然没有用！

解决方法是将断开连接放入回调函数中：

```
MyModel.findOne({}, function () {
...
mongoose.disconnect();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-27T02:46:29.050

试试这样：

```
var db = mongoose.connect('mongodb://localhost:27017/myDatabase'); 
MyModel.findOne({}, function () {
    // todo
    db.disconnect();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-19T14:13:12.233

```
var db = mongoose.createConnection('mongodb://localhost:27017/myDatabase'); 

MyModel.findOne({}, function () {

     // Processing to be done

     db.close();
}); 
```

# c# - 在 WPF 中创建自定义图像显示作为优化机制

> ID：14280493
> 
> 赞同：0
> 
> 时间：2013-01-11T14:45:56.083
> 
> 标签：c#, wpf, optimization, wpf-controls, custom-controls

我正在对代表 16 位灰度图像的自定义类进行一些图像处理。像素的强度存储在一个单维 ushort 数组中：`ushort[] data` 如果需要，我还有宽度、高度、dpi、步幅。

我的动机如下：我很快就展示了某些操作的结果，但是从数组到位图源到图像对象的转换太长了，所以我在想一个图像对象，它直接从大批。因此，我可以编写一个方法“update()”而不是进行多次转换。

1/ 这可能吗？

2/ 会更快吗？

3/ 我将如何去做？

我目前绘制图像的方式是使用以下代码（还有更多内容，但本质上是它的核心）

```
BitmapSource bmps = BitmapSource.Create(Width, Height, Dpi, Dpi, PixelFormats.Gray16, null,
                                     data, stride); 
image.Source=bmps; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:11:57.437

与其使用单独的数组来存储像素，然后创建一个*BitmapSource来显示结果，我认为使用***WriteableBitmap**会更好，这样您就可以将像素数据（16 位灰度值）直接存储在其[BackBuffer](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.backbuffer.aspx)中。因此，您可以编写如下代码：

```
 // You create "bmp" just once and then update its content when needed
    var bmp = new WriteableBitmap(640, 480, 96, 96, PixelFormats.Gray16, null);
    var imgRect = new Int32Rect(0, 0, bmp.PixelWidth, bmp.PixelHeight); 
```

然后更新图像：

```
 bmp.Lock();
    ApplySomeFilter(bmp.BackBuffer, ImageFilter.Blur);   // this is just an example ;)
    bmp.AddDirtyRect(imgRect);
    bmp.Unlock(); 
```

ApplySomeFilter方法可以使用**不安全**的代码来修改*WriteableBitmap的像素**数据*。

* * *

***例如，如果*ApplySomeFilter*是这样定义的：

```
 unsafe public void ApplySomeFilter(void* imgBuffer, ImageFilter filter)
    {
        // code that modifies pixels goes here
    } 
```

那么你可以这样称呼它：

```
 ApplySomeFilter(bmp.BackBuffer.ToPointer(), ImageFilter.Blur); 
```***

# javascript - 将所选文本拖入输入不会触发“DOMNodeRemoved”

> ID：14280494
> 
> 赞同：0
> 
> 时间：2013-01-11T14:45:59.103
> 
> 标签：javascript, jquery, javascript-events

当我将文本从 div 拖放到输入未触发`DOMNodeRemoved`事件时。如何验证文本已被删除？

js：

```
$(function() {
  $('.content').on('DOMNodeRemoved', function(event) {
    console.log(event);
  });
}); 
```

html:

```
<h2>Div content editable</h2>
<div class="content" contenteditable="true">
  drop text to input
</div>
<h2>Input</h2>
<input class="input" type="text"/> 
```

演示：[jsbin](http://jsbin.com/izorij/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:54:52.353

不确定您在寻找什么：

[http://jsbin.com/izorij/5/edit](http://jsbin.com/izorij/5/edit)

```
var cached;
$(function() {
  $('.content').on('focusout', function(event) {
    if(cached!=this.innerHTML) {
      console.log(event);
      cached = this.innerHTML;
    }
  });
}); 
```

# gwt - 在 GWT 中通过反射调用方法的最佳方法是什么

> ID：14280495
> 
> 赞同：1
> 
> 时间：2013-01-11T14:46:09.433
> 
> 标签：gwt, reflection

使用 GWT 通过反射调用方法的最佳方式是什么，我知道有一些框架，例如“GWT Reflection”，但我真的很想听听一些关于此的反馈。如何转换这样的东西的最佳方法是：

```
GreetingServiceAsync service = GWT.create(GreetingService.class);
AsyncCallback callBack = new AsyncCallback< Void>() {
            @Override
            public void onFailure(Throwable caught) {               
            }
            @Override
            public void onSuccess(Void result) {            
            }
        };      
service.doSomething(callBack);

in:
GreetingServiceAsync greetingService = GWT.create(GreetingService.class);

String methodName = “doSomething”;
Object service;
AsyncCallback callBack = new AsyncCallback< Void>() {
            @Override
            public void onFailure(Throwable caught) {               
            }
            @Override
            public void onSuccess(Void result) {            
            }
        };

/*somehow invoke by reflection*/
Class<?> c = Class.forName(GreetingServiceAsync.class.getName());
Method  method = c.getMethod(methodName, AsyncCallback.class);
method.invoke (service, callBack); 
```

非常感谢，路易斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:36:29.077

Javascript 101 - 没有反射的概念。GWT java 转换为 javascript。所以 gwt 不提供反射支持。在其主页中声明 gwt 反射的所有其他库都只是解决了一个角落功能并错误地说明了它们的功能。

# windows - 在没有服务器管理器的情况下安装硬盘 Window Server 2008

> ID：14280498
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:46:17.577
> 
> 标签：windows, window, mount, hard-drive

在没有服务器管理器的情况下安装硬盘 Window Server 2008

我的服务器管理器出错

```
mmc could not create the snap-in. CLSID: FX:{18ea3f92-d6aa-41d9-a205-2023400c8fbb} when opening server manager. 
```

这发生在我重新启动服务器后，我想安装我的另一个硬盘，通常我将它安装为 Drive D ，使用服务器管理器，但由于服务器管理有问题。我装不上

我重新安装了 .NEt framework 4 并将 machine.config 重命名为 machine.config_old，正如某些网站所建议的那样，但无济于事。

我怎样才能安装我的驱动器 d 或解决问题..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:49:24.743

你可以在Ubuntu中挂载硬盘并查看日志吗？

# c# - 一次只在一种方法中使用所有线程？

> ID：14280504
> 
> 赞同：6
> 
> 时间：2013-01-11T14:46:51.600
> 
> 标签：c#, multithreading, semaphore, locks

我有几个从 ClassA 继承的对象，它有一个抽象方法 MethodA。

这些继承对象中的每一个都可以允许最多特定数量的线程同时进入它们的 MethodA。

问题：线程只能在一个对象的 MethodA 中，而不能同时处理其他对象的 MethodA。

我该如何解决这个问题？我正在考虑使用信号量，但不知道具体该怎么做，因为我无法完全解决问题以获得解决方案。

**编辑：**

示例代码（可能包含语法错误：）

```
public class ClassA
{
  public virtual void MethodA{}
}

public class OneOfMySubclassesOfClassA // there can be multiple instances of each subclass!
{
  public override void MethodA{

  // WHILE any number of threads are in here, THIS MethodA shall be the ONLY MethodA in the entire program to contain threads
  EDIT2: // I mean: ...ONLY MethodA of a subclass (not of a instance of a subclass) in the entire program...
}
}

...and more subclasses... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:24:16.063

派生类型与静态信号量一起用作基类中的类型参数，以在每个子类的所有实例之间共享一个信号量。然后有一些混乱，以确保只有一种类型处于活动状态。快速测试表明这可以正常工作，但存在问题。

例如假设`ClassA1`当前正在执行的方法。如果执行此方法的新请求以很高的频率到达，则可能会发生其他派生类没有机会执行的情况，因为不断有新线程执行该类的方法`ClassA1`。

```
internal abstract class ClassA<TDerived> : ClassA
{
    private const Int32 MaximumNumberConcurrentThreads = 3;

    private static readonly Semaphore semaphore = new Semaphore(ClassA<TDerived>.MaximumNumberConcurrentThreads, ClassA<TDerived>.MaximumNumberConcurrentThreads);

    internal void MethodA()
    {
        lock (ClassA.setCurrentlyExcutingTypeLock)
        {
            while (!((ClassA.currentlyExcutingType == null) || (ClassA.currentlyExcutingType == typeof(TDerived))))
            {
                Monitor.Wait(ClassA.setCurrentlyExcutingTypeLock);
            }

            if (ClassA.currentlyExcutingType == null)
            {
                ClassA.currentlyExcutingType = typeof(TDerived);
            }

            ClassA.numberCurrentlyPossiblyExecutingThreads++;

            Monitor.PulseAll(ClassA.setCurrentlyExcutingTypeLock);
        }

        try
        {
            ClassA<TDerived>.semaphore.WaitOne();

            this.MethodACore();
        }
        finally
        {
            ClassA<TDerived>.semaphore.Release();
        }

        lock (ClassA.setCurrentlyExcutingTypeLock)
        {
            ClassA.numberCurrentlyPossiblyExecutingThreads--;

            if (ClassA.numberCurrentlyPossiblyExecutingThreads == 0)
            {
                ClassA.currentlyExcutingType = null;

                Monitor.Pulse(ClassA.setCurrentlyExcutingTypeLock);
            }
        }
    }

    protected abstract void MethodACore();
} 
```

请注意，包装器方法用于调用`MethodACore`. 所有派生类之间共享的所有同步对象都在非泛型基类中。

```
internal abstract class ClassA
{
    protected static Type currentlyExcutingType = null;

    protected static readonly Object setCurrentlyExcutingTypeLock = new Object();

    protected static Int32 numberCurrentlyPossiblyExecutingThreads = 0;
} 
```

派生类将如下所示。

```
internal sealed class ClassA1 : ClassA<ClassA1>
{
    protected override void MethodACore()
    {
        // Do work here.
    }
}

internal sealed class ClassA2 : ClassA<ClassA2>
{
    protected override void MethodACore()
    {
        // Do work here.
    }
} 
```

不幸的是，我现在没有时间更详细地解释它是如何以及为什么起作用的，但我明天会更新答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:30:15.867

```
public abstract class Foo
{
    private static Type lockedType = null;
    private static object key = new object();
    private static ManualResetEvent signal = new ManualResetEvent(false);
    private static int threadsInMethodA = 0;
    private static Semaphore semaphore = new Semaphore(5, 5);//TODO set appropriate number of instances

    public void MethodA()
    {
        lock (key)
        {
            while (lockedType != this.GetType())
            {
                if (lockedType == null)
                {
                    lockedType = this.GetType();
                    //there may be other threads trying to get into the instance we just locked in
                    signal.Set();
                }
                else if (lockedType != this.GetType())
                {
                    signal.WaitOne();
                }
            }

            Interlocked.Increment(ref threadsInMethodA);
        }
        semaphore.WaitOne();

        try
        {
            MethodAImplementation();
        }
        finally
        {
            lock (key)
            {
                semaphore.Release();
                int threads = Interlocked.Decrement(ref threadsInMethodA);
                if (threads == 0)
                {
                    lockedType = null;
                    signal.Reset();
                }
            }
        }
    }

    protected abstract void MethodAImplementation();
} 
```

所以这里有几个关键点。首先，我们有一个静态对象，它代表唯一允许拥有线程的实例。 `null`意味着下一个线程可以放入“他们的”实例。如果另一个实例是“活动的”实例，则当前线程等待手动重置事件，直到没有锁定的实例，或者锁定的实例更改为可能是该线程的实例。

计算方法中的线程数以了解何时将锁定实例设置为也很重要`null`（设置为 null 而不跟踪它会使新实例在一些先前实例完成时启动。

在开始和结束时锁定另一个键是相当重要的。

另请注意，使用此设置，一种类型可能会饿死其他类型，因此如果这是一个竞争激烈的资源，则需要提防。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:06:13.713

假设您有所有相关实例的列表，此代码将锁定所有其他实例，因此在任何给定时间只允许执行一个实例的代码：

```
void MethodA()
{
     foreach (var obj in objects)
         if (obj != this)
             Monitor.Enter(obj);

try
{
    // do stuff
}
finally
{
        foreach( var obj in objects)
        if (obj != this)
                 Monitor.Exit(obj);
}   
} 
```

# json - 如何更新 Solr 4 中的动态字段范围？

> ID：14280506
> 
> 赞同：1
> 
> 时间：2013-01-11T14:46:52.083
> 
> 标签：json, solr, dynamic-data, solr4

我的 Solr 4 架构中有以下字段

```
<field name="id" type="string" indexed="true" stored="true" required="true" />
<dynamicField name="rank_*" type="int" indexed="true" stored="true" /> 
```

我可以在下面使用它进行原子更新，效果很好，并且不理会其他领域

```
{"add":{"doc":{"id":"111","rank_350":{"set":"1"},"rank_391":{"set":"4"}}},
 "add":{"doc":{"id":"222","rank_350":{"set":"1"},"rank_391":{"set":"4"}}}} 
```

现在我想在用新的等级更新之前清除任何现有的等级，而不必先查询它们是什么。如果我使用上面的方法并只更新新等级，那么旧的两个将保留在那里，因为更新是原子的。

我曾尝试在一篇文章或其他更新中使用通配符，但 solr 认为有一个名为 rank_* 的字段，而不是将 null 设置应用于所有等级。

```
{"add":{"doc":{"id":"111","rank_*":{"set":"null"}}} 
```

**如何对所有 rank_* 动态字段应用更新？**

原因是我不想先查询以查看之前的内容，因为我将一次批量更新多达 200 个（这可以在一篇文章中完成）。如果我必须查询那将是 201 个帖子而不是 1 个，或者更改我的事件以了解已删除的内容，这也很困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-23T23:15:24.333

据我所知，Solr 中唯一支持通配符的字段相关功能是 fl 参数、dynamicField 和 copyField。其他任何东西，包括所有形式的索引，一次只能引用一个字段。据我所知，没有办法完全按照您的要求去做。

# json - 来自javascript变量的json

> ID：14280507
> 
> 赞同：0
> 
> 时间：2013-01-11T14:46:53.350
> 
> 标签：json

我有一个动态存储 JSON 的 'routeMapping'。

如果 Json 原来是下面的示例，我将如何访问它：

```
{"users":[
            {
                "firstName":"Ray",
                "lastName":"Villalobos",
                "joined": {
                    "month":"January",
                    "day":12,
                    "year":2012
                }
            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:50:24.607

由于 JSON 是有效的 JavaScript 对象，您可以通过点表示法访问它，例如：

`routeMapping.users[0].firstName`它应该给你`Ray`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:57:24.697

如果您在 javascript 环境中拥有 json，即在浏览器中，那么您可以将其视为 javascipt 对象。例如

`routeMapping.users[0].firstName`

要更深入地了解如何访问各个字段，您可以使用浏览器的 javascript 控制台。（例如chrome或firefox。）首先将json（javascript对象）分配给一个变量并打印值：

```
var routeMapping = {"users":[
        {
            "firstName":"Ray",
            "lastName":"Villalobos",
            "joined": {
                "month":"January",
                "day":12,
                "year":2012
            }
        }]};
alert(routeMapping.users[0].firstName); 
```

然后，您可以在控制台的下一行开始试验哪种访问方式有效。浏览器甚至会为此提供建议。

If you have the json value in another language (e.g. java) then you can use JSON libraries to parse and access the values within the JSON expression.

# solr - 如何在 solr 中为建议者配置 solrconfig.xml？

> ID：14280513
> 
> 赞同：0
> 
> 时间：2013-01-11T14:47:20.397
> 
> 标签：solr, autocomplete

我已将我的 solrconfig.xml 配置为使用 Suggester 组件，如`http://wiki.apache.org/solr/Suggester`.

```
<searchComponent class="solr.SpellCheckComponent" name="suggest">
    <lst name="spellchecker">
      <str name="name">suggest</str>
      <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
      <str name="lookupImpl">org.apache.solr.spelling.suggest.fst.FSTLookup</str>
      <str name="field">name</str>
      <!-- the indexed field to derive suggestions from -->
      <float name="threshold">0.005</float>
      <str name="buildOnCommit">true</str>
      <!--
      <str name="sourceLocation">american-english</str>
-->
    </lst>
  </searchComponent>

  <requestHandler class="org.apache.solr.handler.component.SearchHandler" name="/suggest">
    <lst name="defaults">
      <str name="spellcheck">true</str>
      <str name="spellcheck.dictionary">suggest</str>
      <str name="spellcheck.onlyMorePopular">true</str>
      <str name="spellcheck.count">5</str>
      <str name="spellcheck.collate">true</str>
    </lst>
    <arr name="components">
      <str>suggest</str>
    </arr>
  </requestHandler> 
```

但是，当我从浏览器 url 浏览时，我没有得到任何建议。

```
http://localhost:8080/solr/collection1/suggest?q=ava&fq=type%3ACategory&wt=xml

<response>
<lst name="responseHeader">
<int name="status">
0
</int>
<int name="QTime">
0
</int>
</lst>
<lst name="spellcheck">
<lst name="suggestions"/>
</lst>
</response> 
```

即使我删除了 fq 过滤器，我也没有得到建议。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:00:53.793

我不确定，您可以尝试添加 spellcheck=on

```
http://localhost:8080/solr/collection1/suggest?q=ava&spellcheck=on&fq=type%3ACategory&wt=xml 
```

# objective-c - 法语本地化问题

> ID：14280515
> 
> 赞同：0
> 
> 时间：2013-01-11T14:47:23.723
> 
> 标签：objective-c, localization, return-value

目前我正在使用我的第一个本地化应用程序进行一些测试。请参阅屏幕截图。
为了在第一次使用时在 PopUpMenu 中使用本地化文本，我使用它来找出我在哪个系统上：

```
NSString *identifier = [[NSLocale currentLocale] localeIdentifier]; 
```

在德语系统标识符上返回**de_DE**，在英语系统上我得到**en_EN_POSIX**。在法语系统上，我希望得到**fr_FR**但不幸的是我也得到了**de_DE**。

知道我在做什么错吗？

![在此处输入图像描述](../Images/3f6aa1df967fc2b46b8f676696274f7a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:01:21.350

确保在系统首选项中设置了此区域设置。选择语言和文本，然后选择区域文本并将其切换到您的区域。

![在此处输入图像描述](../Images/c6254cf7508853e3c4bc27e4b7ef9c46.png)

# iis - 用于 ODBC 驱动程序的 OLE DB 提供程序错误“80004005”

> ID：14280517
> 
> 赞同：5
> 
> 时间：2013-01-11T14:47:33.157
> 
> 标签：iis, asp-classic, odbc, oledb

我必须将一些客户站点从一个非常旧的 IIS 服务器移动到一个较新的服务器，并且一些站点无法以正确的方式工作。他们中的大多数人抱怨失败，称为：

> 用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序错误“80004005”
> 
> [Microsoft][ODBC Driver Manager]未找到数据源名称且未指定默认驱动程序。

我在互联网上读到这可能取决于赋予用户的权利缺失；其他网站指出缺少 Temp 文件夹（我无法想象这是正确的）......还有其他几个“解决方案”：

为服务器上的每个人开放权限（如某人所说）对我来说不是一个选择。此外，为每个客户赋予明确的权利是非常痛苦的（有几个客户需要这些权利）。

您知道更简单的解决方案、类似的方法或替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:32:31.447

That error is nearly always caused by a bad connection string when an `ADODB.connection` object has its `.open()` method called.

For example, take the following code:

```
Dim SqlUsername : SqlUsername = "YOURSQLUSERNAME"
Dim SqlPassword : SqlPassword = "YOURSQLPASSWORD"
Dim ConnectionString : ConnectionString = "DRIVER={SQL Server};SERVER=YOURSERVERNAME;DATABASE=YOURDATABASENAME;UID=" & SqlUsername & ";PWD=" & SqlPassword 
Dim db
Set db = Server.CreateObject("ADODB.Connection")
db.Open ConnectionString , SqlUsername , SqlPassword 
```

Note how the connection string includes a driver identifier, in this example that is SQL Server.

Somewhere in your application you'll have an `adodb.connection.open()` method being called with a connection string, you need to find it, determine the driver being used and install it on your server.

Another thing to keep in mind, some data source drivers are 32bit and if your running your website in a 64bit application pool in IIS you'll need to allow 32bit objects - see this related question on that: [Uploading picture after migration from IIS 6.0 to IIS 7.5](https://stackoverflow.com/questions/11016438/uploading-picture-after-migration-from-iis-6-0-to-iis-7-5/11017277#11017277)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-26T05:53:18.743

在使用经典 asp 和`IBM DB2 ODBC Driver`. 我确实在我的本地配置了两个网站`IIS 7.5`，Connection.Open 在默认网站上运行良好，而在第二个网站上却不行.

对我有用的是启用（设置为 True）经典应用程序池的`32bit`应用程序高级设置。`ASP.NET V4.0`

```
Application Pools-->ASP.NET V4.0 Classic-->
           Advanced Settings--> under General Options double click Enable 32-bit Applications to set to True. 
```

这个小配置可能会对遇到相同问题的人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T22:32:45.983

您的旧服务器定义了一些[ODBC DSN](http://support.microsoft.com/kb/966849)（数据源名称），这就是您的应用程序连接到数据库的方式。您需要在新服务器上定义这些。查看服务器的控制面板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-24T12:04:08.280

现在可以肯定的是，您已经解决了问题，但是出于知识目的，这里是可行的：

除了@webaware 所说的，请在您的新服务器机器上按照以下步骤操作：

1.  转到控制面板
2.  管理工具
3.  数据源 (ODBC)
4.  单击系统 DSN 选项卡
5.  单击添加按钮
6.  在客户端驱动程序中查找并选择**Oracle 。**
7.  现在输入数据源名称、描述、TNS 服务名称和用户 ID

> **注意：**请向您的数据库管理员询问正确的 TNS 服务名称和用户 ID。您还需要用户 ID 来测试您的连接。

8.  单击测试连接按钮
9.  输入您的 TNS 服务名称作为**服务名称**，用户 ID 作为**用户名**和用户 ID 的密码
10.  单击确定按钮

> 您的连接现在应该成功了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-19T18:03:20.233

在将控制面板 Plesk 12.5 更新到 Plesk Onyx 17.5.3 并查看更新的 ODBC 驱动程序到 5.3 后，我遇到了同样的问题。

为了解决这个问题，我将连接字符串中的 ( 5.1 ) 更改为 ( 5.3 Unicode Driver )。

改变这个：

```
Conn.Open "DRIVER={MySQL ODBC 5.1 };SERVER=localhost; DATABASE=psa; UID=admin;PASSWORD=mypassword;Port=8306; OPTION=3" 
```

至 ：

```
Conn.Open "DRIVER={MySQL ODBC **5.3 Unicode Driver**};SERVER=localhost; DATABASE=psa; UID=admin;PASSWORD=mypassword;Port=8306; OPTION=3" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-22T04:18:50.660

请务必将连接代码放在页面顶部和底部。这解决了我的这个错误问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-27T02:06:58.860

这与权限无关。您可能正在定义明确引用特定版本的 mysql ODBC 驱动程序的数据库连接。

您将不得不更新您的连接字符串。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-13T14:46:14.887

对我来说，这只是一个缺失的“；” 在连接字符串中的数据库名称之后

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-25T05:19:27.643

找不到驱动是因为这些驱动没有在系统中配置或注册，我在localhost中运行asp页面网站时也出现这样的错误。同一页面在主机服务器中运行顺利。要注册，请转到 Microsoft ODBC 管理员 -> SYSTEM DSN 选项卡 -> 单击“配置”按钮添加您的驱动程序。希望这可以帮助。

# javascript - jQuery隐藏li标签

> ID：14280520
> 
> 赞同：-2
> 
> 时间：2013-01-11T14:47:38.433
> 
> 标签：javascript, jquery

我有这样的html。我只想显示第一个`li`标签，不想显示跨度。如何用 jquery 做到这一点？

```
 <div id="div1">
      <ul class="class2">
         <li class="class3"><span class="sfBreadcrumbNodeSeparator">/</span> </li> 
         <li class="class3"> </li> 
         <li class="class3"> </li> 
      </ul>
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:00:24.680

`$('.class2 li').not(':first').hide();`将隐藏除第一个列表项之外的所有项目，`$('.class2 li:first span').hide();`将隐藏跨度。请参阅[http://jsfiddle.net/jhfrench/agga6/4/](http://jsfiddle.net/jhfrench/agga6/4/)。

或者您可以在一行中使用`$('.class2 li:not(":first")' || '.class2 li:first span').hide();`. 见[http://jsfiddle.net/jhfrench/agga6/5/](http://jsfiddle.net/jhfrench/agga6/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:50:17.833

如果你只想隐藏跨度，你可以做

```
$('.sfBreadcrumbNodeSeparator').hide() 
```

或者在标记中给它一个id值，并根据id值进行选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:52:53.127

嗨，你可以使用这个。

```
$('.sfBreadcrumbNodeSeparator').hide(); 
```

或者这是 ul 的第一个 li

```
 $('.class2 li:first span').hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:57:34.050

你可以试试 ：

```
<script>
$('div#div1 ul li:first-child span').hide();   
</script> 
```

# spring - 期望带有“XOR”验证的请求参数

> ID：14280521
> 
> 赞同：0
> 
> 时间：2013-01-11T14:47:40.480
> 
> 标签：spring, spring-mvc

我在 spring mvc 控制器中有一个简单的请求调用

```
@ResponseBody
@RequestMapping(value = "/url", method = RequestMethod.GET)
public SomeDTO getSth(@RequestParam("paramA") Integer paramA, @RequestParam("paramB") Integer paramB) {
    // ...
} 
```

并且我想要 paramA 或 paramB 否则是正常的 http 响应，因为如果我不提供这两个参数，它当前会发生。

我知道有一个必需的参数可用，但我没有看到连接两者的方法。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:42:10.337

我想不出一个很好的解决方案，但是直截了当的似乎很正常，不是吗？

```
@ResponseBody
@RequestMapping(value = "/url", method = RequestMethod.GET)
public String getSth(@RequestParam(value = "paramA", required = false) Integer paramA,
        @RequestParam(value = "paramB", required = false) Integer paramB) {
    if (paramA == null ^ paramB == null) {
        return "body";
    } else {
        throw new BadRequestException();
    }
}

@ResponseStatus(value = HttpStatus.NOT_FOUND)
public static class BadRequestException extends RuntimeException {
    private static final long serialVersionUID = 1L;
} 
```

# sql - 无法在函数 MS SQL 中声明变量

> ID：14280522
> 
> 赞同：6
> 
> 时间：2013-01-11T14:47:41.960
> 
> 标签：sql, sql-server-2008, tsql, user-defined-functions

我是 SQL 新手，试图在 MS SQL 2008R2 中创建函数，但不能在函数内声明变量。这段代码有什么问题？

```
CREATE FUNCTION denominator() RETURNS int
BEGIN
    DECLARE @Count;
    -- Some logic here
END;

GO
SELECT dbo.denominator()

DROP FUNCTION denominator 
```

我遇到了这种错误：

```
Msg 102, Level 15, State 1, Procedure denominator, Line 3
Incorrect syntax near ';'.
Msg 4121, Level 16, State 1, Line 1
Cannot find either column "dbo" or the user-defined function or aggregate "dbo.denominator", or the name is ambiguous. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T14:49:15.353

你需要这样写，变量的数据类型丢失

```
DECLARE @Count int; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:49:34.043

您声明的`@Count`没有数据类型，您应该提供它。

```
DECLARE @Count int 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T17:23:31.957

变量@Count 没有数据类型。使用这个：

```
Declare @Count int 
```

不要忘记在函数中添加**RETURN**关键字

# c++ - 使用 Ajax 请求从 QWebView 读取本地文件

> ID：14280531
> 
> 赞同：3
> 
> 时间：2013-01-11T14:48:11.087
> 
> 标签：c++, ajax, file, qt, qwebview

我正在开发一个封装 HTML5/JQuery Web 应用程序的 Qt/C++ 程序。

我曾经发出 Ajax 请求以从服务器读取文件。但现在，我希望 Qt 从本地磁盘读取文件并将其内容发送到我的网络应用程序。

我想我需要 Qt 来捕获来自 Web 应用程序的 Ajax 请求并将文件内容作为 Ajax 请求结果返回。

问题是我不知道该怎么做。目前，我还没有在谷歌上找到任何关于它的信息。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:31:27.587

我终于找到了方法。我推翻了`QNetworkAccessManager`。

**MyQNetworkAccessManager .h：**

```
class MyQNetworkAccessManager : public QNetworkAccessManager
{
    Q_OBJECT

protected:
    virtual QNetworkReply * createRequest(Operation op, const QNetworkRequest & req, QIODevice * outgoingData = 0);
}; 
```

**MyQNetworkAccessManager.cpp：**

```
QNetworkReply * MyQNetworkAccessManager::createRequest(Operation op, const QNetworkRequest & req, QIODevice * outgoingData) {
    QUrl url = req.url();
    QString path = url.path();

    if (op == QNetworkAccessManager::GetOperation && path.endsWith("xml")) {
        QUrl newUrl;

        if(path.endsWith("..")) {
            newUrl.setUrl("...");
        }
        else if(path.endsWith("...")) {
            newUrl.setUrl("...");
        }
        else {
            newUrl = url;
        }
        return QNetworkAccessManager::createRequest(QNetworkAccessManager::GetOperation, QNetworkRequest(newUrl));
    }
    else
    {
        return QNetworkAccessManager::createRequest(op, req, outgoingData);
    }
} 
```

**主窗口.cpp：**

```
// ....

QWebView *qWebView = new QWebView();

QWebPage *page = qWebView->page();
MyQNetworkAccessManager *networkManager = new MyQNetworkAccessManager();
page->setNetworkAccessManager(networkManager);

qWebView->setPage(page);

qWebView->load(QUrl("..."));

// .... 
```

# c#-4.0 - 为工作流变量赋值

> ID：14280534
> 
> 赞同：1
> 
> 时间：2013-01-11T14:48:28.133
> 
> 标签：c#-4.0, workflow-foundation-4, workflow-activity

我有一个关于 Windows Workflow Foundation 4 的问题。我有一个名为 PositionArrayActivity 的活动。这个活动里面有一个序列活动。我需要在 Execute 方法中（在工作流执行期间）将他的值映射到在 Create 方法中创建的 PORTFOLIO_NAME 的 oneFund 变量....在运行时将 oneFund 值映射到 PORTFOLIO_NAME 我该怎么做？

谢谢

```
public sealed class PositionArrayActivity : NativeActivity, IActivityTemplateFactory
{
    [Browsable(false)]
    public Dictionary<string, List<Entity>> dictionary = new Dictionary<string, List<Entity>>();
    public ActivityAction<Entity[]> Body { get; set; }
    public Entity[] PositionList { get; set; }
    public SqlDataReader rdr;
    public SqlDataReader sdr;
    public Entity[] positionArray;
    public List<String> fundList;
    public String oneFund { get; set; }
    public String date { get; set; }
    public List<Entity> listToArrayPositions;

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        metadata.AddDelegate(Body);
    }

    protected override void Execute(NativeActivityContext context)
    {
       // A lot of code.... 
    }

    public Activity Create(DependencyObject target)
    {
        Variable<string> var = new Variable<string>
        {
            Name = "PORTFOLIO_NAME"
        };

        var fef = new PositionArrayActivity();  
        var aa = new ActivityAction<Entity[]>();
        var da = new DelegateInArgument<Entity[]>();
        da.Name = "positions";
        fef.Body = aa;
        aa.Argument = da;
        aa.Handler = new Sequence
        {
            Variables = { var }
        };

        return fef;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:09:36.503

您需要一个 ActivityContext 来设置变量值，因此首先将 var 的声明（该名称是否实际编译？）移动到更高的范围。

然后在 Execute var.Set(activityContext, oneFund);

不过有一件事，oneFund 属性只会在应用程序启动时设置一次，因此您可能会得到一些令人惊讶的结果。如果您希望每个实例都这样，您需要一个论据。

# facebook - 是否可以检查电子邮件是否在 Facebook 上得到确认？

> ID：14280535
> 
> 赞同：71
> 
> 时间：2013-01-11T14:48:30.093
> 
> 标签：facebook, security, facebook-graph-api, single-sign-on, facebook-authentication

# 更新

这是在 2013 年 12 月 16 日通过[https://www.facebook.com/whitehat/report/](https://www.facebook.com/whitehat/report/)向 Facebook 报告的，Facebook于 12 月 17 日回应说**该错误早已得到修复**。

我已经用我的 Facebook 帐户（我仍然没有验证电子邮件地址）对此进行了重新测试，并且在使用[Grap API Explorer 工具](https://developers.facebook.com/tools/explorer)时，无法使用 Graph API 或使用 FQL 查询获取此帐户的电子邮件地址.

**结论：**您使用 Graph API 或 FQL 查询从 Facebook 获得的电子邮件地址是经过验证的电子邮件。如果一个帐户尚未验证它的电子邮件，但它是不可能得到它。

# 原帖

我正在使用 SSO 制作一个 Web 应用程序，为用户提供使用 Google 或 Facebook 登录的功能。我希望拥有两种类型帐户的用户在我的系统中显示为同一用户，无论他们使用哪个身份登录。为了实现这一点，我正在考虑使用电子邮件地址作为标识符来了解我是否应该创建一个新帐户或者用户是否已经存在。

为了不引入任何安全问题，我必须知道电子邮件地址已经过验证并且实际上属于用户。对于 Google，[userinfo API](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)可以告诉我电子邮件是否经过验证，所以这里没有问题。[但我在Facebook Graph API](http://developers.facebook.com/docs/reference/api/)中找不到类似的东西。

**是否可以知道电子邮件地址是否在 Facebook 上得到确认？**

我知道有一个`verified`字段，但它只说明帐户是否经过验证，而不是电子邮件地址。

起初，您似乎只能将 Graph API 用于已确认电子邮件地址的帐户。如果地址未被确认，我只是收到一个错误，告诉我必须先确认电子邮件地址，然后才能登录任何第三方网站。

然而，这似乎并不适用于所有帐户。在某些情况下，即使您没有确认的电子邮件地址，也可以访问 Facebook 的所有部分。例如，当您使用[@myopera.com](http://my.opera.com/community/)邮件地址注册时。

当您使用@myopera.com 电子邮件地址注册 Facebook 时，您会在提交注册表单后立即收到一条消息，说明您的帐户已被暂时锁定。要继续，您需要提供您的电话号码来验证您的帐户并“确保 Facebook 安全且不受垃圾邮件的影响”（对于屏幕截图中的瑞典语，我很抱歉，这是在我进入 Facebook 并将语言更改为英语之前）：

![注册时的安全检查](../Images/87592fd42f8a37d7e310b897d0d8109d.png)

当您提供您的电话号码时，您已登录，Facebook 不会再唠叨您必须验证您的电子邮件地址。

您可以看到您的电子邮件地址尚未验证的唯一地方是设置页面：

![带有未确认电子邮件地址的 Facebook 设置视图](../Images/c4a8b7e052aa25a37fe00c3fda0157ae.png)

在您验证您的电子邮件地址之前通常无法访问的移动设置可用，并列出了在注册期间输入的电话号码：

![带有未确认电子邮件地址的 Facebook 移动设置视图](../Images/97a717e90860a1964a4e060d25b82b35.png)

除此之外，还可以使用未经确认的电子邮件地址登录第三方网站：

![使用未确认的电子邮件地址登录到图形 API 浏览器](../Images/2966c57e63de636d8fb53d7605f30691.png)

当我使用此用户连接到图形 api 时，我可以获得未经确认的电子邮件地址，并且该`verified`字段按预期返回 true，因为我已通过添加电话号码[验证了帐户。](http://www.facebook.com/help/247686808605261/)所以显然我不能相信我从 Facebook 获得的电子邮件地址真的属于拥有 Facebook 帐户的用户。

有没有其他方法可以知道电子邮件地址是否经过验证，或者如果我想用它来识别用户，我必须自己验证吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-05-09T09:10:30.483

我一直在寻找关于这个问题的官方 Facebook 声明，最后我发现了这个：[https](https://developers.facebook.com/docs/facebook-login/multiple-providers#postfb1) ://developers.facebook.com/docs/facebook-login/multiple-providers#postfb1 ，这清楚地表明开发人员不应该依赖这个事实该电子邮件地址已通过验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T05:56:09.500

我从未使用过它，但您可以使用 user.email_hashes 的 FQL 查询进行检查：http: [//developers.facebook.com/docs/reference/fql/user](http://developers.facebook.com/docs/reference/fql/user)

# javascript - 如何连接到 iPhone 的 webkit 调试器？

> ID：14280536
> 
> 赞同：5
> 
> 时间：2013-01-11T14:48:32.650
> 
> 标签：javascript, debugging, ios6, remote-debugging, web-inspector

iOS 6 的新功能是，您可以在桌面 safari 中调试在设备或模拟器上运行的 html 和 javascript。我想，这个功能是基于[Webkit Remote Debugging Protocol](https://www.webkit.org/blog/1875/announcing-remote-debugging-protocol-v1-0/)的。

如何在没有桌面 Safari 的情况下连接到在 iPhone 上运行的 webkit？

我可以使用 websockets 为在 Android 上运行的移动 Chrome 执行此操作，但如何为 iOS 设备执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T20:21:51.537

[ios-webkit-debug-proxy](https://github.com/google/ios-webkit-debug-proxy)项目（来自 Google！）就是这样做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T00:52:26.490

您想查看此代码[https://github.com/leftlogic/remote-debug/tree/master/safari](https://github.com/leftlogic/remote-debug/tree/master/safari) - 尽管它在实际涉及使用 __rpc_forwardSocketData 的 RPC 调用时会失败。

如果您有任何想法，为什么我们中的几个人对此感兴趣！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:37:31.230

您需要打开 iPhone 模拟器并浏览到一个网站。

然后打开 Safari 并从菜单栏中选择“开发”。有一个名为“iPhone Simulator”的选项。

如果你将鼠标悬停在上面，你可以看到模拟器的所有打开的网站。

这为您提供了与 Safari 相同的检查器。您甚至可以在 iPhone 模拟器中看到悬停的元素。

# html - CSS：在多行上浮动具有不同高度的多个元素？

> ID：14280539
> 
> 赞同：12
> 
> 时间：2013-01-11T14:48:38.700
> 
> 标签：html, css, rows

我试图将`div`s 组织成两列，但不强制它们成行。我也试图保持`div`sa 之间的垂直间距不变。

[您可以看到以下演示](http://jsfiddle.net/89mW6/1/)，如果每列中的 div 之间没有大量的垂直空白，这将是正确的。

# html

```
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div> 
```

我以为我可以将它们以静态宽度浮动到左侧，但显然这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-02-12T15:49:15.393

感谢**[J.Albert Bowden](https://jsfiddle.net/user/jalbertbowdenii/fiddles/)**的**[小提琴](https://jsfiddle.net/jalbertbowdenii/7Chkz/)**

**HTML**

```
<div id="box">
    <div class="module"></div>
    <div class="module"></div>
    <div class="module"></div>
    <div class="module"></div>
    <div class="module"></div>
</div> 
```

**CSS**

```
#box{
    -moz-column-count:3;
    -moz-column-gap: 3%;
    -moz-column-width: 30%;
    -webkit-column-count:3;
    -webkit-column-gap: 3%;
    -webkit-column-width: 30%;
    column-count: 3;
    column-gap: 3%;
    column-width: 30%;
}
.module{
    margin-bottom: 20px;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-15T20:12:55.897

首先要做的事情：您将无法使用浮动实现*柱状包装*布局：正如其他评论者所指出的那样，浮动不是这样工作的。CSS 中也没有“自动砌体布局”模块，我怀疑这是您真正想要的。我还假设单独放置每个项目是不可能的。

您将获得的最接近的东西是网格布局——我们将在最后谈到这一点。**剧透：**这真的很酷，但是浏览器支持真的很好之前还需要一段时间。

所以，TL；DR：没有跨浏览器的方法可以在 CSS 中进行智能的、逐行的、类似砌体的布局。但是网格布局非常接近。如果你迫不及待，请使用 JS 或将设计切换为适用于包装列的设计。

如果你选择 JS 路由，你可以使用[Grid Layout JS polyfill](https://github.com/FremyCompany/css-grid-polyfill)！这样，您现在可以编写网格布局语法，并在将来某个时候不再需要它时删除 polyfill。

* * *

## 具有多列的列式布局

从其他答案和评论来看，柱状环绕布局并不是您想要的。万一你仍然决定走那条路，你可以用[Multi Column layout](https://www.w3.org/TR/css3-multicol/)来做。支持非常好：除了 IE<10，几乎所有的东西。

一个简单的示例，以防万一您想将布局更改为多列方向：这是一个[具有 2 列多列](http://jsbin.com/mayema/1/edit?html,css,output)布局的 JSBin。请注意，您不需要同时设置`column-count`and `column-width`：设置 a `column-count`(and `column-gap`)，其余的将自行排序。

哦，如果你得到带有边距的错误渲染（例如，边距环绕新列，创建不均匀的布局），通常的解决方法是`display: inline-block; width: 100%;`在`.module`. 您的里程可能会有所不同：对于已经存在很长时间的东西，multicol 肯定是错误的。

## 使用 flexbox 的列式布局

再坚持一下柱状布局，你也可以使用 flexbox。（我看到另一个关于 Flexbox 的答案，但遗憾的是，这是一种完全过时的语法，在现代浏览器中不起作用）。

在 multi-col 与 flexbox 中包装成列之间的区别在于 flexbox 不会为您将项目平衡到列中（它并不是真正为那种类型的布局而设计的），因此您需要设置特定的高度以强制列包裹。如果您有一个容器元素 ( `.container`) 和其中的`.module`项目，则以下是基本方法：

```
.container {
  display: flex;
  flex-flow: column wrap;
  height: 1000px; /* or whatever works for you */
}
.module {
  /* whatever props you want for modules */
} 
```

...不计算 IE10 的前缀和语法变体，它使用了稍旧的规范变体。（还有旧的 flexbox，它不支持 flex wrapping，所以我们会忘记它）。简单[的 JSBin 包装 flexbox 示例在这里](http://jsbin.com/momuli/4/edit?html,css,output)。

## 使用网格布局自动放置的密集包装

最后，我们进入网格布局。这个新规范有一些非常酷的特性，允许我们做一些*接近*“砌体”布局的事情。

**注意：**您需要在 Chrome Canary、WebKit Nightly 或 Firefox 开发者版中查看这些示例。在 IE10+（以及 Edge）中有一个旧的 Grid Layout 实现，但它不包含我们需要的所有新的 hotness*属性*。

首先是标记：我们将使用一个包装器元素 +`.module`里面的项目（包装器不是绝对必要的——我们可以将模块直接放入`body`，但我只是觉得这样更清楚）：

```
<div class="container">
  <div class="module"></div>
  <div class="module"></div>
  <!-- and so on -->
</div> 
```

接下来，我们告诉容器是一个网格容器：

```
.container {
  display: grid;
} 
```

然后我们将它设置为具有 2 个等宽列（1 个“小数单位”）的列的“模板”，以及列之间的间隙以及 20px 的行：

```
.container {
  display: grid;

  /* 2 columns, equally wide: */
  grid-template-columns: 1fr 1fr;

  /* gaps between each column and row. */
  grid-column-gap: 20px;
  grid-row-gap: 20px;
  /* ...can also be shortened to grid-gap: 20px; */
} 
```

我们还没有给它一个行模板，但我们只需要让它根据需要自动创建它们。为此，我们设置`grid-auto-rows`属性，以`50px`根据需要添加尽可能多的高行：

```
.container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-column-gap: 20px;
  grid-row-gap: 20px;

  /* automatically create rows, 50px tall each: */
  grid-auto-rows: 50px;
} 
```

在这一点上，我们还没有在容器中放置任何项目，至少没有明确地放置。使用网格，您可以准确指定项目应属于网格的哪个区域。问题是，您不必这样做！除非您另有说明，否则网格将自动将它们放置在第一个可用插槽中，从左上角开始并默认逐行排列。

相反，我们需要告诉它有些项目比其他项目大。我们不为此使用大小，而是告诉奇数项目跨越 2 行，每 3 个项目跨越 4 行。

```
.module {
  background: yellow;
}

.module:nth-child(odd) {
  grid-row: span 2;
  background: green;
}
.module:nth-child(3n) {
  grid-row: span 4;
  background: orange;
} 
```

最后，我们需要告诉网格使用“密集”算法，这意味着它将对每个项目进行一次放置传递，试图避免在自动放置中产生“洞”。

```
.container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-column-gap: 20px;
  grid-row-gap: 20px;
  grid-auto-rows: 50px;

  /* use the "dense" algorithm: */
  grid-auto-flow: row dense;
} 
```

这为我们提供了非常接近“砌体”布局的东西，正如在[密集网格布局的 JSBin 示例中](http://jsbin.com/reweyo/6/edit?html,css,output)所看到的那样——再次注意，您将需要 Chrome/WebKit 或 Firefox 的 nightly/dev 版本来查看它是如何工作的。

这是在 Chrome Canary 中查看的结果图像：

[![Chrome Canary 中的网格布局](../Images/6bef7fd590914d9562afa32f38283ee8.png)](https://i.stack.imgur.com/9lqL0.png)

需要注意的一些事项：

*   打包算法在这里`row dense`并没有真正的区别，因为这些物品碰巧堆叠在一起，没有留下任何洞，但我把它放在那里是为了完整性。
*   如您所见，最后一行有一个单独的项目——网格不能神奇地调整大小（例如 jQuery Masonry 插件），它只能根据网格位置或跨度来调整大小。这不是装箱算法布局的灵丹妙药。也就是说，一旦你掌握了它，它就会变得非常强大和有趣。在一年左右的时间内（我猜最多），它将出现在所有主要（常绿）浏览器中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-16T09:27:32.167

试试这个.. [http://jsfiddle.net/rymfev8c/1/](http://jsfiddle.net/rymfev8c/1/)

HTML

```
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div> 
```

CSS

```
body {
  padding: 40px;
}

.module {
  height: 50px;
  width: 45%;
  margin-right: 3%;
 margin-bottom: 60px;
  background: yellow;
  float: left;
}

.module:nth-child(odd) {
  height: 100px;
  background: green;
 margin-bottom: 5px;
}
.module:nth-child(3n) {
  height: 200px;
  background: orange;
  margin-bottom: 5px;
} 
```

天哪它 3 岁..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T15:09:09.083

HTML

```
<div id = "box">
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
<div class="module"></div>
</div> 
```

CSS：

```
#box{
display:box;
box-orient: vertical;
-webkit-display:box; 
-webkit-box-orient: vertical;
}

.module{
box-flex: 1;
-webkit-box-flex: 1;
} 
```

这是在 css3 中引入的 box-flex。您可能还必须使用 -webkit-/ -moz- 属性，在“display”、“box orient”等之前，这取决于浏览器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:53:47.777

您可以使用`table`标签。尝试这样的事情

**HTML**

```
<table cellpadding="0" cellspacing="0" width="100%" height="100%">  
  <tr>     
    <td>      
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>
    </td>
    <td>
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>
      <div class="module"></div>           
    </td>    
  </tr>  
</table> 
```

**CSS**

```
body {
  padding: 40px;
}

.module {
  height: 50px;
  width: 45%;
  margin-right: 3%;
  margin-bottom: 20px;
  background: yellow;
} 
```

**演示：http:** [//jsfiddle.net/89mW6/5/](http://jsfiddle.net/89mW6/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-19T15:22:58.963

我认为这不是一个好的做法，但我通常在这种情况下做的是 building 2 `div`，将它们并排放置，然后用你想要的任何内容填充它们，但同样，这就是我这样做的方式，它可能适合你，也可能不适合你:)

# .net - 使用自定义配置创建 SQL Server 2005 数据库部署设置

> ID：14280540
> 
> 赞同：1
> 
> 时间：2013-01-11T14:48:39.237
> 
> 标签：.net, sql-server-2005

我创建了一个项目 - 现在我必须在客户端部署它。我安装了 SQL Server 2005，但不能在客户端安装它，因为它是非法的。

我想使用我的自定义配置创建一个数据库部署设置，以将其映射到 ADO.NET Entity Framework。配置，例如实例名称、用户名、密码等。我该怎么做？

# asp.net - 使用简单的 ActionFilterAttribute 运行时出错

> ID：14280542
> 
> 赞同：4
> 
> 时间：2013-01-11T14:48:46.733
> 
> 标签：asp.net, asp.net-mvc

开始编写一个简单的过滤器，在每次动作加载时从请求中提取一些东西，从其他 stackoverflow 中复制一些代码，如下所示：

```
public class TestKeyAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext context)
    {
        if (context.Request.Properties.ContainsKey("test"))
        {
        // do stuff
        }
    }
} 
```

然后将属性与其余部分一起添加：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    GlobalConfiguration.Configuration.Filters.Add(new ElmahHandledErrorLoggerFilter());
    filters.Add(new HandleErrorAttribute());
    filters.Add(new TestKeyAttribute());
} 
```

运行时，会导致此错误：

```
The given filter instance must implement one or more of the following filter
interfaces: IAuthorizationFilter, IActionFilter, IResultFilter, IExceptionFilter. 
```

我发现的大多数链接都与 MVC 3 相关，这似乎可行；但是，我正在使用 MVC 4 并使用 Web API - 我现在需要通过其他方式注册属性吗？

请注意：我不希望将过滤器附加到 Web API 控制器（不过，将其添加到 GlobalConfiguration.Configuration.Filters 确实有效），而是普通的 Web 控制器。

**编辑：**我知道我可以通过从 IActionFilter 继承并使用 OnActionExecuting 来实现这个工作，我只是好奇为什么这种方法不起作用，因为一堆教程似乎说它应该。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-11T08:13:05.630

我遇到了同样的错误，并且和`ElmahHandledErrorLoggerFilter`implement一样感到困惑`IExceptionFilter`。

经过调查，我踢了自己，我将其添加`filters.Add(new ElmahHandledErrorLoggerFilter());`到 FilterConfig 类下的 MVC 站点配置中。`config.Filters.Add(new ElmahHandleErrorApiAttribute());`改为添加到 WebApiConfig 类有效。

注意：我在这里使用的是 WebAPi v1，但我已经以同样的方式配置了一个 v2 项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-04T15:42:32.873

这不起作用的原因是您的过滤器是 WebAPI 过滤器，它不能与 Mvc 过滤器互换。Mvc 和 WebAPI FilterAttribute 以及相关的类和接口有许多相同的名称（这就是教程似乎说这应该有效的原因），但它们位于不同的命名空间中。Mvc 过滤器类`System.Web.Mvc`和 WebAPI 类在`System.Web.Http`.

进一步阅读：[https ://stackoverflow.com/a/23094418/22392](https://stackoverflow.com/a/23094418/22392)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T23:01:16.700

使用 MVC4 时，您的自定义属性所在的项目必须包含对 System.Web.Http.Common 库的引用。我使用 NuGet 将它添加到我的项目中，嘿！错误消失了。

# c# - c# 应用程序在浏览器中检测表单字段

> ID：14280545
> 
> 赞同：1
> 
> 时间：2013-01-11T14:48:50.147
> 
> 标签：c#, html, browser

我创建了一个填充网站字段的 winForm 应用程序：

```
private void Form1_Load(object sender, EventArgs e)
        {
           this.webBrowser1.Navigate(new Uri("http://www.site.com”));
            this.textBox1.Text = this.webBrowser1.Version.ToString();
        }
private void button1_Click (object sender, EventArgs e)
        {
            System.Windows.Forms.HtmlDocument document =
       this.webBrowser1.Document;

            document.GetElementById("login").SetAttribute("Value","user");

        } 
```

当网站页面在应用程序控件中加载但当我想在新浏览器中使用`webBrowser1.Navigate(new Uri("http://www.site.com”),true);`页面字段打开它时，它可以完美运行。这个问题有解决方案吗？提前致谢

# asp.net-mvc-4 - ASP.NET Web API 示例成员身份验证 - Azure DB 初始化

> ID：14280548
> 
> 赞同：0
> 
> 时间：2013-01-11T14:49:03.293
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我创建了一个全新的 MVC 4 项目（使用 Web Api 模板，而不是 Internet 模板）。如何在第一次运行时完全像互联网模板一样初始化简单的会员数据库？到目前为止我做了什么：

*   创建了全新的 MVC 4 项目 -> Web Api 模板
*   实现了过滤器 InitializeSimpleMembershipAttribute.cs 并用它装饰了 HomeController。
*   添加模型 AccountModels.cs
*   在 web.config 中 system.web 下的 roleManager 中添加了 enabled="true" 属性
*   连接字符串指向 SQL Azure 并且工作正常

当我第一次运行这个应用程序时，创建了数据库，但只在其中创建了 1 个表：UserProfile，所有其他表：webpages_Membership、webpages_Roles ... 都丢失了。没有任何错误。

我所需要的只是当我的 MVC4 项目（Web Api 模板）第一次运行时，将确保创建 SampleMembership 数据库和表。为了能够使用成员身份验证来验证客户端休息呼叫。

请让我知道这是否是正确的道路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:57:20.890

您是否检查过 web.config 中的连接字符串名称是否已定义

*   在用户上下文的 AccountModels.cs 中
*   在 InitializeSimpleMembershipAttribute.cs 中进行数据库初始化

# java - 在 where 条件下使用多个表的 ormlite 查询

> ID：14280551
> 
> 赞同：2
> 
> 时间：2013-01-11T14:49:27.263
> 
> 标签：java, ormlite

我想做这样的事情：

```
 Select * from A join B where (A.a=x and B.b=y); 
```

我试过了：

```
 qbA = aDao.queryBuilder();
    qbB = bDao.queryBuilder();
    whereA = qbA.where();
    whereB = qbB.where();
    join = qbA.join(qbB);
    whereJ = join.where();
    whereJ.and(whereA.eq(A.a, x), whereB.eq(B.b, y)); 
```

它给了我编译错误。我还尝试仅使用以下连接：

```
 whereJ.and(whereJ.eq(A.a=x), whereJ.eq(B.b=y)); 
```

我收到运行时错误：“A 没有 'b' 属性”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T17:42:26.207

是的，你不能像这样组合 where 语句。您应该执行以下操作：

```
whereA = qbA.where();
whereA.eq(A.a, x);
whereB = qbB.where();
whereB.eq(B.b, y);
join = qbA.join(qbB); 
```

[ORMLite](http://ormlite.com/)应该负责将 2 个不同的语句`AND`放在一起。`WHERE`

# iframe - How to replace an existing iframe instead of appending it to the document body?

> ID：14280560
> 
> 赞同：0
> 
> 时间：2013-01-11T14:49:35.293
> 
> 标签：iframe, appendchild

While rendering `iframes`, I use the code:

```
ifrm = document.createElement("IFRAME");
ifrm.style.width = "100%";
ifrm.style.height = 600+"px";
function makeFrame() {
document.body.appendChild(ifrm);
} 
```

However, this keeps appending `iframes` below the existing one, each time I call the function `makeFrame()`. So, if I call `makeFrame()` (say thrice), then I get three `iframes` one below the previous. How to prevent this and replace the existing one instead of appending to the last one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:54:16.430

Create a div . Let's say div id is iframecontainer so your code should be like:

```
<div id="iframecontainer">
<!-- Iframe goes here -->

</div> 
```

Now simply getElementById with javascript and set the innerHTML to "" before appending the iframe.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:02:09.133

The simplest answer:

If you want to change your code as little as possible, and you're certain that you'll only have exactly one iframe on the page at any given time

```
function makeFrame() {
oldiframe = document.getElementsByTagName("IFRAME")[0] 
// getElementsByTagName will return an array (a list). 
// Adding [0] will return the first (and, under our assumptions, only) element
ifrm = document.createElement("IFRAME");
ifrm.style.width = "100%";
ifrm.style.height = 600+"px";
document.body.replaceChild(ifrm, oldiframe);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:24:07.193

Hi @mikemxm I was finally able to solve the problem. The final code looks like this:

```
oldiframe = document.getElementsByTagName("IFRAME")[0]; 
ifrm = document.createElement("IFRAME");
ifrm.style.width = "100%";
ifrm.style.height = 600+"px";
function makeFrame() {
   if(oldiframe == null)
     document.body.appendChild(ifrm);
   else
     document.body.replaceChild(ifrm, oldiframe);
} 
```

And thanks for the warning against iframes. Do you know of any better way/technology to render content from external websites? Can there be any copyright issues? Thanks.

# ajax - usatoday 如何显示新闻文档的 URI？

> ID：14280562
> 
> 赞同：1
> 
> 时间：2013-01-11T14:49:42.357
> 
> 标签：ajax, web-applications

我正在用 AJAX 开发一个网络应用程序/留言板。我已经到了我需要决定如何显示线程的部分。

我应该为每个线程刷新一个全新的页面吗？或者通过 AJAX 加载它。显然，我希望每个线程都是可抓取的、可链接的，并且可以保存为浏览器中的收藏夹。

然后我看到了今日美国的网站（www.usatoday.com/news）。他们如何通过弹出窗口加载页面、更改 URI 并将数据保留在后台，这非常有趣。

这正是我想要的，但我不知道他们在做什么。

其他人可以破译这个或引导我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:32:03.873

我无可挑剔的谷歌搜索技巧让我相信答案在于 pushState。

[http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate](http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate)

从本质上讲，它们似乎是...

1.  使用提供的链接的 HREF 通过 pushState 更改 URI。
2.  使用 AJAX 加载通过链接访问的页面的内容。
3.  关闭时，他们很可能使用新加载页面中的数据来确定其所在的部分（体育、娱乐等），然后重新加载该页面。

# sql - SQL 查询 w/2 的同一列

> ID：14280564
> 
> 赞同：0
> 
> 时间：2013-01-11T14:49:48.673
> 
> 标签：sql

我想从缺陷数据库构建查询。每个缺陷都有一个提交日期和一个状态（打开、关闭、延迟等）。我希望我的结果集有 3 列：

```
Date, # bugs w/ Open status, # bugs with Closed status
2012-05-31, 3, 1
2012-06-01, 2, 0
2012-06-02, 3, 2 
```

我不知道如何超越这个查询来获得我想要的：

```
select 
    DEFECT.SUBMITTED_DATE as "Opened", 
    count (DEFECT.SUBMITTED_DATE), 
    DEFECT.STATUS as "Status"
from 
     DEFECT
where 
     DEFECT.STATUS='Open' or DEFECT.STATUS='Fixed'
group by 
     DEFECT.SUBMITTED_DATE 
```

寻找建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:52:38.747

在 MySQL 中，

```
SELECT  DATE(DEFECT.SUBMITTED_DATE) as `DATE_SUBMITTED`, 
        SUM(CASE WHEN DEFECT.STATUS='Open' THEN 1 ELSE 0 END) `# bugs w/ Open status`,
        SUM(CASE WHEN DEFECT.STATUS='Fixed' THEN 1 ELSE 0 END) `# bugs with Closed status`,
FROM     DEFECT
GROUP BY DATE(DEFECT.SUBMITTED_DATE) 
```

在 TSQL 中

```
SELECT  CAST(DEFECT.SUBMITTED_DATE as DATE) as [DATE_SUBMITTED], 
        SUM(CASE WHEN DEFECT.STATUS='Open' THEN 1 ELSE 0 END) [# bugs w/ Open status],
        SUM(CASE WHEN DEFECT.STATUS='Fixed' THEN 1 ELSE 0 END) [# bugs with Closed status],
FROM     DEFECT
GROUP BY CAST(DEFECT.SUBMITTED_DATE as DATE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:52:47.717

尝试 ：

```
SELECT DEFECT.SUBMITTED_DATE as DATE_SUBMITTED,
    SUM(CASE WHEN DEFECT.STATUS = 'Open' THEN 1 ELSE 0 END) AS `# bugs w/ Open status`,
    SUM(CASE WHEN DEFECT.STATUS = 'Fixed' THEN 1 ELSE 0 END) AS `# bugs w/ Open status`
FROM DEFECT
WHERE DEFECT.STATUS IN ('Open', 'Fixed')
GROUP BY DEFECT.SUBMITTED_DATE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:54:40.880

**假设 MS SQL Server：**

```
SELECT DEFECT.SUBMITTED_DATE as [Date]
,SUM(CASE WHEN DEFECT.STATUS = 'Open' THEN 1 ELSE 0 END) AS number_open
,SUM(CASE WHEN DEFECT.STATUS = 'Fixed' THEN 1 ELSE 0 END) AS number_fixed
FROM DEFECT 
WHERE DEFECT.STATUS IN ('Open' ,'Fixed')
GROUP BY DEFECT.SUBMITTED_DATE 
```

# ios - 导入头文件并在 Xcode 中保留 .m 更改

> ID：14280567
> 
> 赞同：0
> 
> 时间：2013-01-11T14:49:56.553
> 
> 标签：ios, xcode, header, sdwebimage

对于我的第一个 iPhone 应用程序，我一直在 Github 上使用 SDWebImage 从互联网上提取图像。

这个软件包带有一个`SDWebImage.framework`. `"#import SDWebImage/UIImageView+WebCache.h`到目前为止，我已经能够导入该头文件了。

但是，我需要缩短缓存时间，因此在阅读了一些关于此主题的内容后，我将包的 Xcode 项目导入到我的应用程序中。通过添加这些文件，我现在可以看到与框架中的头文件分开的 WebImageCache.m 文件。不幸的是，我无法弄清楚如何让我的工作在 .m 文件中影响我的视图控制器导入的方式`SDWebImage`。我找到了需要更改 maxCacheAge 的地方，但如果我无法让 Xcode 读取它，那就不好了。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:16:37.733

删除框架，否则您将拥有两次相同的类/类别——复制项目中 m 文件旁边的标题

# vb.net - 从类型“Object(,)”到类型“String”的转换无效

> ID：14280568
> 
> 赞同：0
> 
> 时间：2013-01-11T14:49:57.007
> 
> 标签：vb.net, excel, object, .net

我正在使用 VB.Net 处理/阅读 Excel 工作簿。
如果工作表的行数少于 20000，则一切正常，但如果超过 20000 行，则会引发以下异常。

> 发生 InvalidCastException
> 从类型`'Object(,)'`到类型`'String'`的转换无效。

我的问题是为什么它有时会起作用而其他时候不起作用？
可能是什么潜在问题？

编辑：
代码如下所示：

```
uArea.Digits = CurrentRow.Columns(AREA_DIGIT).value 
uArea.ValidFrom = CurrentRow.Columns(VALID_FROM).value.ToString() 
```

# c++ - 在 VB6 中，我是否需要在分配有 SysAllocString 的字符串上调用 SysFreeString？

> ID：14280569
> 
> 赞同：1
> 
> 时间：2013-01-11T14:49:59.380
> 
> 标签：c++, dll, com, memory-leaks, vb6

我有一个使用 C++ COM DLL 的 VB6 应用程序，并且 BSTR 在两者之间传递。我从 C++ DLL 中返回 BSTR，使用`return ::SysAllocString(L"example");`.

我是否需要`SysFreeString`在以下示例中调用这样的字符串？

```
Sub Main()
    Dim own_str As String
    Dim dll_str As String

    own_str = "my own string"
    dll_str = DllComObj.FunctionReturningString()
    ' when leaving the scope:
    ' no need to free own_str,
    ' do I need to free dll_str?
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:51:38.033

不，你没有。VB6 将释放它们，因为 BSTR 是其原生字符串格式。

# java - 当我将 LinkedList 放入数组时输入安全警告

> ID：14280570
> 
> 赞同：3
> 
> 时间：2013-01-11T14:50:06.777
> 
> 标签：java

我已经声明了一个这样的数组：

```
LinkedList< Interval>[] resTable = new LinkedList[10]; 
```

我如何以某种方式声明这一点以避免在 eclipse 中显示的类型安全警告？

这是警告：

> 类型安全：LinkedList[] 类型的表达式需要未经检查的转换才能符合 LinkedList<Interval>[]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:52:26.970

泛型数组不是类型安全的，因为泛型是通过擦除实现的。

您将需要强制转换以表明它是安全的。

有关更多详细信息，请参阅此问题：[如何在 Java 中创建通用数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

简短回答：考虑使用

```
ArrayList< LinkedList<Interval> > 
```

反而。ArrayList 类负责泛型，代码干净可靠，不需要未经检查的强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:21:55.550

它只是一个 Eclipse 警告，您可以忽略或标记为忽略：

```
@SuppressWarnings({"unchecked"})
LinkedList<Integer>[] tableX = new LinkedList[10];
tableX[3].add(3); 
```

我使用整数而不是间隔，这样我就可以编译代码。

# ruby-on-rails - 将文本解析为维度哈希

> ID：14280573
> 
> 赞同：0
> 
> 时间：2013-01-11T14:50:16.163
> 
> 标签：ruby-on-rails, ruby

我想将此文本字符串转换为哈希，以根据用户输入创建页面。

```
Home
About
- News
-- Local News
-- Global News
- Who We Are
Product 
```

这只是一个示例，但我想将其转换为可以迭代的多维哈希。我想为用户创建一种在 CMS 中创建页面的简单方法。

我已经尝试过拆分字符串和正则表达式，但还没有走多远。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:21:41.423

看起来 Yaml 会是你的朋友。查看 Yaml.load。测试.yml：

```
"Home":
  "About":
    "News":
      "Local News":
      "Global News":
      "Who We Are":
  "Products": 
```

irb

```
require 'yaml'
YAML.load(File.open('test.yml'))
=> {"home"=>{"About"=>{"News"=>{"Local News"=>nil, "Global News"=>nil, "Who We Are"=>nil}}, "Product"=>nil}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:54:39.623

@Sergio：这是一条线！（诚​​然，为了“清晰”，我将它分成了几行）

@lt-matt8：如果您真的使用它，那么我对以后阅读您的代码的任何人的理智不承担任何责任 :)

```
text = <<-TEXT
Home
About
- News
-- Local News
-- Global News
- Who We Are
Product
TEXT

hash = text.lines.each_with_object([{}]) {|item, levels|
  item.match(/(-*)\s*(.*)/).captures.tap {|level, title|
    levels[level.size][title] = (levels[level.size + 1] = {})
  }
}.first
# => {"Home"=>{}, "About"=>{"News"=>{"Local News"=>{}, "Global News"=>{}}, "Who We Are"=>{}}, "Product"=>{}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:04:13.553

```
txt = <<-TXT
Home
About
- News
-- Local News
-- Global News
- Who We Are
Product
TXT

def hashify s
  Hash[s.split(/^(?!-)\s*(.*)/).drop(1).each_slice(2).map{|k, v| [k, hashify(v.to_s.strip.gsub(/^-/, ""))]}]
end

hashify(txt)
# =>
# {
#   "Home"    => {},
#   "About"   => {
#     "News"       => {
#       "Local News"  => {},
#       "Global News" => {}
#     },
#     "Who We Are" => {}
#   },
#   "Product" => {}
# } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:12:28.633

这是我的尝试。我完全承认它看起来并不惯用，并且 ruby​​ stdlib 中可能有一个可以替代它的单行代码。但是，嘿，至少这有效:)

所以，基本思路是这样的：

*   将文本拆分为单独的行
*   迭代这个线数组并逐渐构建散列。在执行此操作时继续跟踪“当前节点”
*   如果这一行的“-”字符多于上一行，则该行必须是上一行的子行
*   等等

代码：

```
txt = <<-TXT
Home
About
- News
-- Local News
-- Global News
- Who We Are
Product
TXT

def lines_to_hash lines
  res = {}
  last_level = 0
  parent_stack = [res]
  last_line = nil

  lines.each do |line|
    cur_level = line.scan('-').length
    if cur_level > last_level
      parent_stack << parent_stack.last[last_line]
    elsif cur_level < last_level
      parent_stack.pop
    end

    clean_line = line.gsub(/^[-\s]+/, '')
    parent_stack.last[clean_line] = {}
    last_line = clean_line
    last_level = cur_level
  end
  res
end

res = lines_to_hash(txt.split("\n"))
res # => {"Home"=>{}, 
    #     "About"=>{"News"=>{"Local News"=>{}, "Global News"=>{}}, 
    #               "Who We Are"=>{}}, 
    #     "Product"=>{}} 
```

如果有人提出单行，我将奖励 +100 代表赏金:)

# javascript - javascript console.log(obj) 显示现有属性 'context' 和 console.log(obj.context) 显示未定义

> ID：14280576
> 
> 赞同：1
> 
> 时间：2013-01-11T14:50:24.343
> 
> 标签：javascript, properties

谁能详细说明可能出了什么问题？在这一点上，我不知道要寻找什么。

示例代码：

```
$.ajax({
    url: uploader.fileupload('option', 'url'),
    context: uploader,
    success: function(response){
        //logging uploader
        console.log(uploader);
        //logging this --> logs the same as logging uploader
        console.log(this);
        //loggin response --> clearly shows a context attribute holding the correct data for this response
        console.log(response);
        //logging response.context --> shows undefined
        console.log(response.context)

        var done = uploader.fileupload('option','done');
        done.call(this, null, response);
    },
    dataType:"json"
}) 
```

我不习惯在 $.ajax() 调用中使用 context 属性，我怀疑这个功能会导致我的问题。

该代码段在 ajax 调用后的某个时间导致我的代码出现问题。我很确定这与 ASYNC 问题无关，因为问题已经存在于原始 ajax 请求的实际成功回调中。

我已经禁用了发送的 php-headers，但它保持不变。我根据另一个主题尝试了这个，这意味着我的标题可能有问题。我还禁用了 $.ajax() 中的 dataType attr，但是我的响应不被识别为 json。

非常感谢任何有关如何调试的帮助或提示！

**更新：** 删除 ajax 调用中的上下文属性确实解决了这个问题。但是为什么在 console.logging() 时它会被附加到我的响应对象（或至少似乎被附加）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:58:42.583

我不确定这是否是您的问题，因为应该更好地说明问题本身。但是看标题，`console.log()`异步和通过引用传递似乎是一个简单的老问题。

当您调用`console.log(object)`该对象时，该对象被保留为参考，并且不会立即打印。一段时间后，当实际发生日志记录时，对象可能处于不同的状态（例如，在这种情况下，它可能具有属性）。

相反，当您记录`obj.property`调用是同步的并且该属性尚未定义时。

# java - 如何设置 Java VM 以使用 Mac OS X 处理的根证书（信任库）

> ID：14280578
> 
> 赞同：25
> 
> 时间：2013-01-11T14:50:32.983
> 
> 标签：java, macos, ssl-certificate, scribe, truststore

[使用scribe](https://github.com/fernandezpablo85/scribe-java) OAuth 库时出现以下异常。

```
Caused by: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty 
```

基于一些谷歌搜索，我似乎应该以某种方式设置 JVM 信任库。

为什么我需要这样做？如何指示 Java VM 使用操作系统的默认信任库？（在我的情况下是 Mac OS X）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2019-07-20T00:57:16.193

您可以使用[Apple JCA Provider](https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#Apple)将 OSX 钥匙串用作 java 信任存储。只需使用以下系统属性启动 JVM：

```
-Djavax.net.ssl.trustStoreType=KeychainStore 
```

您可以使用环境变量为每个启动的 JVM 设置此属性`JAVA_TOOL_OPTIONS`，如[hagrawal 的回答](https://stackoverflow.com/a/41371938/4692517)中所述。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-11T17:19:49.297

我可以通过在启动 VM 时添加此系统属性来设置默认信任库：

```
-Djavax.net.ssl.trustStore=/Library/Java/Home/lib/security/cacerts 
```

我仍然不明白为什么我需要这样做。这应该是默认值。每次添加这个也很烦人。有没有更好的方法，例如一些操作系统设置？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-29T01:14:50.907

我想大家都清楚，JAVA在处理SSL的时候需要一种方法来识别默认的truststore，所以这个信息已经以某种方式传递给了JAVA，所以我认为手头的“更新”问题是怎么做以一次做一次然后忘记每次的方式。

我能找到的最好方法是`JAVA_TOOL_OPTIONS`在您的操作系统级别设置环境变量，如果设置了此环境变量，则默认情况下将使用您在此环境变量中提供的参数启动 JAVA。

**因此，您无需在** `-Djavax.net.ssl.trustStore=/Library/Java/Home/lib/security/cacerts` **每次启动 JVM 时都进行设置，而是** `JAVA_TOOL_OPTIONS` **在您的操作系统级别设置环境变量“一次”，其值为 as** `-Djavax.net.ssl.trustStore=/Library/Java/Home/lib/security/cacerts` **，然后您就完成了。**

以下是“进一步阅读”#1的摘录：

> 设置此环境变量后，JNI_CreateJavaVM 函数（在 JNI 调用 API 中）会将环境变量的值预先添加到其 JavaVMInitArgs 参数中提供的选项中。

下面提到了需要注意的唯一警告，摘自“进一步阅读”的#1：

> 在某些情况下，出于安全原因禁用此选项，例如，在 Solaris OS 上，当有效用户或组 ID 与实际 ID 不同时，该选项将被禁用。

下面是一个需要注意的警告（摘自“进一步阅读”的#1），但我认为因为上下文与 VM 选择参数无关，所以它不相关，只是提一下。

> 由于在调用 JNI_CreateJavaVM 时会检查此环境变量，因此它不能用于使用通常由启动程序处理的选项来扩充命令行，例如，使用 -client 或 -server 选项进行 VM 选择。

**进一步阅读：**

*   [http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html)
*   [http://docs.oracle.com/javase/7/docs/platform/jvmti/jvmti.html#tooloptions](http://docs.oracle.com/javase/7/docs/platform/jvmti/jvmti.html#tooloptions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-28T15:46:45.557

啊! 我知道这个问题。我有类似的问题，它与 OSX 中的 Java 绑定有关。一旦我安装了最新版本，它就得到了修复。

[https://support.apple.com/en-us/HT204036](https://support.apple.com/en-us/HT204036)

# c++ - c++ lnk 2028, lnk 2020, lnk 2019 和 lnk 2001 导入dll时

> ID：14280582
> 
> 赞同：1
> 
> 时间：2013-01-11T14:50:48.957
> 
> 标签：c++, .net, dllimport, unmanaged

前几天我问了一个类似的问题，这帮助我用 __declspec() 找到了正确的方向，但我又卡住了。我会尽可能清楚。希望有人能告诉我我做错了什么。这可能是一件小而简单的事情。

**项目信息：**

```
jc:
    project type:                    Class Library
    configuration type:              Dynamic Library (.dll)
    common runtime language support: /clr
    references:                      System
                                     System.Data
                                     System.Drawing
                                     System.Windows.Forms
                                     System.Xml
test (start up project):
    project type:                    CLR Empty project
    configuration type:              Application (.exe)
    common runtime language support: /clr
    references:                      jc
    project dependencies:            jc 
```

**jc 文件：**

注意：我没有改变 resource.h、stdafx.h/cpp 和 AssemblyInfo.cpp。

jc.h

```
#ifndef JC_H
#define JC_H
#include "def.h"
#include "file.h"
#endif 
```

定义.h

```
#ifndef JC_DEF_H
#define JC_DEF_H
#ifdef JC_API_DEFINITIONS
#   define JC_API __declspec(dllexport)
#else
#   define JC_API __declspec(dllimport)
#endif
#endif 
```

文件.h

```
#ifndef JC_FILE_H
#define JC_FILE_H
#include "def.h"
extern JC_API int test_var;
JC_API void test_func(void);
class JC_API test_class
{
public:
    __thiscall test_class();//I inserted __thiscall for compatibility with other compilers. Is this necessary and should I use it for the definition as well?
};
#endif 
```

文件.cpp

```
#include "StdAfx.h"
#define JC_API_DEFINITIONS
#include "file.h"
JC_API int test_var = 10;
JC_API void test_func(void){}
__thiscall test_class::test_class(){} 
```

**测试文件：**

测试.cpp

```
#include "../jc/jc.h"
int main(void)
{
    int x = test_var;
    test_func();
    test_class obj;
    return 0;
} 
```

**这些是我得到的错误：**

```
1>main.obj : error LNK2028: unresolved token (0A000009) "public: __thiscall test_class::test_class(void)" (??0test_class@@$$FQAE@XZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2028: unresolved token (0A00000A) "void __cdecl test_func(void)" (?test_func@@$$FYAXXZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2020: unresolved token (0A00000B) "__declspec(dllimport) int test_var" (__imp_?test_var@@3HA)
1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall test_class::test_class(void)" (??0test_class@@$$FQAE@XZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2019: unresolved external symbol "void __cdecl test_func(void)" (?test_func@@$$FYAXXZ) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) int test_var" (__imp_?test_var@@3HA) 
```

我被这个问题困扰了几天，希望有人能帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:47:03.657

Found the answer. The mistake wasn't in the code. I didn't know I had to include the ".lib" file to "additional dependencies" in "linker/input" options of the "dll" properties. This video made it clear: "http://www.youtube.com/watch?v=yEqRyQhhto8."

# iphone - Cocos2d (ARC) 不释放自定义 CCSprite 类的内存

> ID：14280588
> 
> 赞同：1
> 
> 时间：2013-01-11T14:51:26.150
> 
> 标签：iphone, ios, objective-c, opengl-es, cocos2d-iphone

我正在使用 Cocos2d(ARC)。我正在制作一个使用自定义 CCSprite 类的游戏

```
+(id)createMySprite
{
   return [[self alloc] initMy] ;
} 
```

这是我的 CCSprite 类。我在哪里分配内存。由于 ARC，我无法编写 autorelease。我有两个 CCLayer 类。在头等舱中，只需单击该按钮即可播放按钮，它会替换屏幕并移动第二个屏幕。在第二类中，我获取了许多自定义 CCSprite 类。当我更换到第一类 CCLayer 时，它永远不会释放第二类的内存，内存会不断增加。然后在达到 20-30 MB 实时内存后崩溃。所以我需要这方面的帮助。

![分配](../Images/c40fd4c04b76eab3b4225908e4d345ee.png)

基本上，标头是 ARC 兼容的。源代码不支持 ARC。因此，您在不启用 ARC 的情况下将 Cocos2D 编译为静态库，然后在代码中链接到它，您可以安全地将 ARC 用于您的类和 Cocos2D 元素的自定义子类。如果我错了，请纠正我，但是在你的项目中使用 ARC 应该没有问题，并且说一个使用 ARC 并且不手动放置保留和释放消息的 CCSprite 子类。正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T05:31:58.247

我知道这已经存在了很长一段时间，并且很可能您已经解决了它，但是对于那些正在阅读并仍在寻找答案的人，这是我对 CCNodes 和保留周期的理解。

基本上我已经写过关于这个的博客，并且我有一个设计模式可以绕过保留的 CCNodes。链接在这里。[http://www.rotategears.com/development/ccnode-arc-memory-management/](http://www.rotategears.com/development/ccnode-arc-memory-management/)

简而言之，如果您创建一个节点 ivar 并且不指定引用的强度，它将获得一个强引用。然后，当您将它作为子节点添加到也将维护引用的节点时，您将创建一个双重保留，当操作系统尝试释放它时会导致问题。ivar 必须是周，以便您在此容器中的保留计数仅为 1。话虽如此，然后您必须小心如何将此弱引用分配给 ivar，因为在分配它之前它需要一个引用计数 1，否则 ivar 将被设置为 nil。

# openssl - 使用 openssl 解密 AES-GCM 文件

> ID：14280592
> 
> 赞同：4
> 
> 时间：2013-01-11T14:51:37.103
> 
> 标签：openssl, aes, encryption, aes-gcm

我目前正在尝试使用 openssl 解密给定的文本。我尝试使用那里给出的示例编写自己的代码： [OpenSSL GCM 解密中的后期身份验证，](https://stackoverflow.com/questions/12972610/late-authentication-in-openssl-gcm-decryption) 但最终我的结果仍然很糟糕。我的解密函数如下：

```
void aes_decrypt(EVP_CIPHER_CTX ctx, unsigned char *pCipherText,
    int pCipherTextLen, int AADLen, unsigned char* pKey, unsigned char* pIv,
    unsigned char* pMac, int MacLen) {
int bytesProcessed = 12;
int dec_success;

}
unsigned char * pOut = malloc(pCipherTextLen);
unsigned char * pAAD = malloc(AADLen);
unsigned char * pClearText = malloc(pCipherTextLen);

// setting cipher, key and iv
EVP_DecryptInit(&ctx, EVP_aes_256_gcm(), pKey, pIv);
// setting tag
EVP_CIPHER_CTX_ctrl(&ctx, EVP_CTRL_GCM_SET_IVLEN, 24, NULL);
EVP_CIPHER_CTX_ctrl(&ctx, EVP_CTRL_GCM_SET_TAG, 16, pMac);
// adding Additional Authenticated Data (AAD)
EVP_DecryptUpdate(&ctx, NULL, &bytesProcessed, pAAD, AADLen);
// decrypting data
EVP_DecryptUpdate(&ctx, pClearText, &bytesProcessed, pCipherText,
        pCipherTextLen);
// authentication step
dec_success = EVP_DecryptFinal(&ctx, pOut, &bytesProcessed);
free(pOut);
free(pMac);
free(pAAD);
free(pClearText);
} 
```

除了 AAD 之外的所有数据都是以前通过读取文本文件给出的（我有一个加密数据列表、使用的密钥/Iv、MAC 和解密后预期的结果）经过几次实验，出现以下问题： - 结果是与预期不同 - 修改 MAC 不会影响结果（明文） - 抑制 AAD 不会影响结果。

我真的不知道为什么它不起作用。如果您有任何想法、提示或具体示例，这将是一个很大的帮助

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:28:52.417

问题已经解决了。程序提供的 AAD 错误

# regex - 为什么这个正则表达式模式不起作用？

> ID：14280597
> 
> 赞同：0
> 
> 时间：2013-01-11T14:51:42.827
> 
> 标签：regex

我试图选择没有 4 位数字的逗号或之前的“id”一词，我尝试了这个：

```
 ( ? < ! [ \ d { 5 } | id ] ) , 
```

**问题**

例如，如果输入字符串是“1999”，则没有选择逗号，我不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:56:04.223

试试这个模式：

```
(?<!\d{5}|id), 
```

您的模式`(?<![\d{5}|id]),`正在寻找不在数字之后的逗号，`{`, `}`, `|`, `i`, 或`d`- 他们不应该在租船者类中：`[]`. 如果有的话，`(?<![\d]{5}|id),`也可以工作，但是是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:57:54.893

首先，除非您使用`/x`标志，否则每个空格都会尝试匹配一个空格。所以把那些拿出来。

其次，您`[...]`可能正在使用对交替 ( `|`) 进行分组，但方括号实际上表示一个字符类，*即* `[\d{5}|id]`等同于`[id5{}|]`并匹配这些字符中的任何*一个*，但仅此而已。你的意思是这样的：

```
(?<!\d{5}|id), 
```

最后一个问题可能是正则表达式的许多实现（您没有指定您正在使用的）不支持可变宽度的lookbehind断言。因此，您可能需要执行以下操作：

```
(?<!\d{5}|...id), 
```

# c# - C# TcpListener AcceptSocket 在单独的线程中不起作用

> ID：14280598
> 
> 赞同：0
> 
> 时间：2013-01-11T14:51:43.153
> 
> 标签：c#, winforms, multithreading, tcplistener

我有一个基于 TcpListener 的简单 TCP 服务器。因为我想在 Windows 窗体应用程序中使用它，所以我让它在一个单独的线程中运行，如下所示：

```
 public void Start() {          
        this.serverThread = new Thread(new ThreadStart(this.ThreadProcess));
        this.serverThread.Name = "Tcp-Server";
        this.serverThread.Start();
    }
 protected void ThreadProcess() {
        try
        {
            IPAddress ipAd = IPAddress.Parse("169.254.42.86");
            this.listener = new TcpListener(ipAd, this.port);
            this.listener.Start();
            Socket mySocket = this.listener.AcceptSocket();
            while (true)
            {                    
                if (mySocket.Connected)
                {                        
                    byte[] RecvBytes = new byte[8192];
                    int byteNo = mySocket.Receive(RecvBytes, RecvBytes.Length, 0);                     
                    ASCIIEncoding asen = new ASCIIEncoding();
                    mySocket.Send(asen.GetBytes("srv reply msg"));                     
                }
                else
                {
                    WriteLine("socket not connected.");
                }
            }
        }
        finally {
            StopListener();
        }
    } 
```

如果我在控制台应用程序中将此服务器用作：

```
static void Main(string[] args)
    {
        try
        {                
            int port = 8001;
            Server server = new Server(port);
            server.Start();                             
            while (true) {
                //server is running in separate thread          
            }   
            ... 
```

一切都按预期工作。但是，当我尝试将它包含在单击按钮时启动服务器的 Windows 窗体应用程序中时，代码不再起作用。服务器线程正在启​​动，但它不接受任何套接字。有什么我想念的吗？我一直在谷歌上搜索高低没有结果......感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:18:49.283

不是真正的答案，但在评论中输入太多：

调试此问题的最简单方法是简单地`ThreadProcess()`在同一线程中调用该方法：

```
public void Start() {          
    ThreadProcess();
    //this.serverThread = new Thread(new ThreadStart(this.ThreadProcess));
    //this.serverThread.Name = "Tcp-Server";
    //this.serverThread.Start();
} 
```

然后，您可以单步执行您的代码，看看会发生什么。一旦您点击`this.listener.AcceptSocket();`线路，您的应用程序就会阻塞，但您应该能够连接到它。

通常问题是每个人都忽略了一些愚蠢的事情，比如`Start()`没有调用方法。

# tapestry - 如何为特定语言编写通用属性文件

> ID：14280600
> 
> 赞同：0
> 
> 时间：2013-01-11T14:51:54.150
> 
> 标签：tapestry

我正在使用挂毯开发 Web 应用程序。我的应用程序中有超过 15 个 tml 文件。我正在为所有页面编写德语、英语、法语的属性文件。在我的所有页面中，我都有相同的页脚、页眉和用户身份验证标签。

所以我想避免为所有页面编写单独的属性文件，并尽量减少应用程序内存大小。

请任何人说如何为每种语言编写通用属性文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:25:20.117

您是否尝试将这些常见属性放入`WEB-INF/app.properties`.

# javascript - Jade + JQuery Mobile，如何添加某种按钮？

> ID：14280602
> 
> 赞同：0
> 
> 时间：2013-01-11T14:52:03.123
> 
> 标签：javascript, jquery, html, mobile, pug

就像编译成 HTML 的 .jade 文件一样，我也是 JQuery Mobile 的新手。我正在这个玉文件中初始化 JQuery Mobile ..

```
doctype 5
html
  head
    title= title
    meta(name='viewport', content='width=device-width,initial-scale=1')
    link(rel='stylesheet', href='/stylesheets/jquery.mobile-1.2.0.min.css')
    script(type='text/javascript', src='/javascripts/jquery-1.8.2.min.js')
    script(type='text/javascript', src='/javascripts/jquery.mobile-1.2.0.min.js') 
```

这合适吗？另外我将如何改变这样的事情......

```
if (elem.onload == 1)                                                   
  input(type = 'checkbox', name = elem.name + '|onl', checked)
else
  input(type = 'checkbox', name = elem.name + '|onl') 
| OnLoad 
```

对于使用 JQuery 移动按钮的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:54:01.783

关于jQuery部分，它可以正常工作，因为我刚刚测试了这段代码，点击它们时两个内容都消失了。

```
!!! 5
html(lang="en")
  head
    title Holamundo!
    script(type='text/javascript', src='http://code.jquery.com/jquery-1.9.1.js')
  body
    h1#headTitle Hello, World
    p#content This is an example of Jade.
    script
      $('#headTitle').click(function() {
        $(this).hide();
      });
      $('#content').click(function() {
        $(this).hide();
      }); 
```

# android - 设备上的应用图标下缺少应用标题

> ID：14280603
> 
> 赞同：1
> 
> 时间：2013-01-11T14:52:06.543
> 
> 标签：android, icons, android-manifest

我已经安装了我目前在华硕平板电脑上运行的 Android 应用程序，运行 4.0.3

但是，我一定是不小心删除了 Manifest.xml 中的某些内容，因为 app 图标下方没有任何文字。换句话说，应用程序名称没有出现在我设备上的应用程序图标下方，因此，它在“所有应用程序”屏幕中的错误位置进行了排序。

这是我的清单的相关部分：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="tra.games.mytaboo"
    android:versionCode="1"
    android:versionName="1.2.1" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="Taboo"
    android:theme="@style/AppTheme" >
..... 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T15:07:33.943

Tim，将显示您的启动器活动的标签。

```
<activity 
    android:label="Taboo" 
    android:icon="@drawable/icon"
    android:name=".activity.LaunchrActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"></action>
        <category android:name="android.intent.category.LAUNCHER"></category>
    </intent-filter> 
</activity> 
```

[http://developer.android.com/guide/topics/manifest/activity-element.html#label](http://developer.android.com/guide/topics/manifest/activity-element.html#label)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:57:16.167

```
<activity 
    android:label="Your Name"  <---- here name!
    android:icon="@drawable/icon"
    android:name=".activity.LoginActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"></action>
        <category android:name="android.intent.category.LAUNCHER"></category>
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:54:27.747

您可以从 Activity 中调用 setTitle() 函数。它采用 int（资源 ID）或 CharSequence 作为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:02:54.950

您错过了 android:label 属性。这是在图标下设置您的应用程序名称

```
android:label="@string/app_name" 
```

在这里，我已设置从 string.xml 文件加载应用程序名称。也可以直接这样设置

```
android:label="app name" 
```

# batch-file - 在bat文件中将xp桌面背景更改为默认值

> ID：14280606
> 
> 赞同：0
> 
> 时间：2013-01-11T14:52:11.707
> 
> 标签：batch-file

我有 xp 的 destkop 背景。我想运行一个批处理文件，将我当前的背景更改为默认值 None ，它只是纯色。如果有人有一个例子，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:14:12.780

我最终放弃了这个想法，因为在我发现另一个问题后我不需要它，但我确实找到了一个我不记得的好网站，它给出了使用 vbscript 读取和写入注册表项的示例。我能够在我的桌面上有一些壁纸并将这个 vbscript 放入我的启动中，以便壁纸将恢复为“无”纯色样式。看起来像这样

```
Option Explicit

Dim SysVarReg, Value, NewValue

Set SysVarReg = WScript.CreateObject("WScript.Shell")

' Read current value of desktop wallpaper
value = SysVarReg.RegRead ("HKEY_CURRENT_USER\Control Panel\Desktop\Wallpaper")

' Display to screen for testing
'MsgBox(value)

NewValue = ""

' Reset the value of the wallpaper to an empty string for the default no wallpaper
SysVarReg.RegWrite "HKEY_CURRENT_USER\Control Panel\Desktop\Wallpaper", NewValue

' Display to screen again for testing
'MsgBox(NewValue) 
```

# jquery - 我们如何在动态添加的文本字段上应用 jQuery 日期选择器

> ID：14280608
> 
> 赞同：0
> 
> 时间：2013-01-11T14:52:13.090
> 
> 标签：jquery, jquery-ui-datepicker

这是我的代码

```
 $(function() {
    $( ".datepicker" ).datepicker();
    }); 
```

此代码正在生成额外的文本字段：

```
<script type="text/javascript">
   var counter = 0;
function add_user1(FieldName) {
counter++;
var newFields = document.getElementById(FieldName).cloneNode(true);
newFields.id = '';
newFields.style.display = 'block';
var newField = newFields.childNodes;
for (var i=0;i<newField.length;i++) {
var theName = newField[i].name
if (theName)
newField[i].name = theName + counter;
}
var insertHere = document.getElementById(FieldName);
insertHere.parentNode.insertBefore(newFields,insertHere);
}
</script> 
```

但这部分`html`工作完美，但是当我单击添加更多字段时，日期选择器不起作用。

```
 **<label id="l" style="width:120px;">Employment History:</label>
                <br class="clear"/>
                <label id="l" style="width:80px;">Role:</label>
                <input id="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_role[]"/>
                <br class="clear"/>
                <label id="l" style="width:80px;">Company:</label>
                <input id="l" type="text" size="37" onblur="" value="" style="width:auto;" name="user_com[]"/>
                <br class="clear"/>
                <label id="l" style="width:80px;">From:</label>
                <input class="datepicker"  type="text" size="37" onblur="" value="" style="width:auto;" name="user_from[]"/>
                <br class="clear"/>
                <label id="l" style="width:80px;">To:</label>
                <input class="datepicker"  type="text" size="37" onblur="" value="" style="width:auto;" name="user_to[]"/>
                <br class="clear"/>** 
```

它正在查看 jquery 日历，但是当我把它放在这个特定的 div 中时，日期选择器不起作用

```
 **<div id="add_user1" style="display: none;" >**
<label id="l" style="width:80px;">Role:</label><input id="l" type="text" size="37" style="width:auto;" name="user_role[]" value="" /><br class="clear"/>
<label id="l" style="width:80px;">Company:</label><input id="l" type="text" size="37" style="width:auto;" name="user_com[]" value="" /><br class="clear"/>
<label id="l" style="width:80px;">From:</label><input class="datepicker" type="text" size="37" onblur="" value="" style="width:auto;" name="user_from[]" /><br class="clear"/>
<label id="l" style="width:80px;">To:</label><input class="datepicker"  type="text" size="37" onblur="" value="" style="width:auto;" name="user_to[]"/><br class="clear"/></div>
<input type="button" id="add_user1()" onclick="add_user1('add_user1')" name="btn" value="Add More!" /><br>
                <br class="clear"/>
               <!---------Dyanmic Fields ----------> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:56:50.847

您应该只需要`.datepicker();`在创建新字段后调用它们。

```
var counter = 0;
function add_user(FieldName) {
  counter++;
  var newFields = document.getElementById(FieldName).cloneNode(true);
  newFields.id = '';
  newFields.style.display = 'block';
  var newField = newFields.childNodes;
  for (var i=0;i<newField.length;i++) {
    var theName = newField[i].name
    if (theName)
      newField[i].name = theName + counter;
  }
  var insertHere = document.getElementById(FieldName);
  insertHere.parentNode.insertBefore(newFields,insertHere);

  $(newFields).find('.datepicker').datepicker();
} 
```

您的按钮的单击事件也有一个错字：将功能从更改`add_user1('add_user1')`为`add_user('add_user1')`

工作小提琴演示：http: [//jsfiddle.net/Rykus0/xTqvC/](http://jsfiddle.net/Rykus0/xTqvC/)

# c# - 如何更改 Telerik OpenAccess 命名空间？

> ID：14280614
> 
> 赞同：3
> 
> 时间：2013-01-11T14:52:31.847
> 
> 标签：c#, telerik-open-access

我想更改创建域方法时生成的复杂类型的命名空间。

当我右键单击类型并转到 时`Properties`，有一个名为 的属性`Namespace`，但如果我更改它，它只会产生编译错误。

我尝试更改代码中的命名空间并且效果很好，但是在更新模型时，命名空间会恢复为默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:19:01.627

我相信通过`Properties`选项卡更改单个对象的命名空间将更改该代码的命名空间，但是每当 OpenAccess 重新生成代码时，它会覆盖该更改并使用为模型定义的命名空间。

您可以通过右键单击设计器表面并选择来更改模型的命名空间`Show Model Settings`。

这将打开一个窗口，您可以在其中指定自定义命名空间；屏幕如下所示：

![机型设定画面](../Images/6dc109ef095d42a7ba763f563042f7d4.png)

***注意：****请记住，这将更改模型中所有域类和域方法的命名空间。*

# java - 应用程序崩溃后Android蓝牙连接不关闭

> ID：14280623
> 
> 赞同：3
> 
> 时间：2013-01-11T14:52:59.290
> 
> 标签：java, android, bluetooth

我正在使用 SPP 配置文件连接到我的设备：

```
 Set<BluetoothDevice> devices = ba.getBondedDevices();
    for(BluetoothDevice bd : devices)
    {
        String name = bd.getName();
        if(name.equals("CELLMETER"))
        {
            try
            {
                BluetoothSocket bs = bd.createRfcommSocketToServiceRecord(UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
                bs.connect();
            } catch (IOException e)
            {
                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
        }
    } 
```

一切似乎都还好，我创建了关闭输入输出缓冲区并关闭套接字的函数。但是，当应用程序崩溃或我在断点到达时停止应用程序时，套接字不会关闭，即使我手动终止进程并且它不适用于来自新应用程序实例的新连接。

我做错了什么？对于每个崩溃/调试操作，我必须重新启动手机:(

它仅在 Android 2.3.5 (Samsung 5830i) 和 Android 4.0.4 (Freelander P10) 上出现。在我的 Android 4.2.1 (Galaxy Nexus) 上一切正常，应用崩溃后连接自动关闭。（似乎是因为有新的蓝牙堆栈）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:25:25.710

我可以看到 2 个选项来解决这个问题： 1- 在您的应用程序中添加一个 UncaughtExceptionHandler，最好在应用程序派生类中：

```
 mUEHandler = new Thread.UncaughtExceptionHandler()
        {
            @Override
            public void uncaughtException(Thread t, Throwable e)
            {
                // Close any opened sockets here

                defaultUEH.uncaughtException(t, e);
            }
        };

        Thread.setDefaultUncaughtExceptionHandler(mUEHandler); 
```

但这只会处理应用程序崩溃。如果用户杀死该应用程序，则根本不会进入那里。

2-存储一些套接字标识，允许您在应用程序重新启动时关闭它。

它并不完美，但这可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T00:24:23.047

我通过让我的 BluetoothSockets 由在其自己的进程中运行的服务管理来解决了这个问题。我通过向服务传递消息和从服务传递消息来打开、关闭、读取和写入套接字。如果应用程序崩溃，服务会彻底关闭，关闭套接字。（如果它与应用程序在同一进程中运行，它不会完全关闭。）

# timeout - 多应用程序会话的会话超时

> ID：14280625
> 
> 赞同：1
> 
> 时间：2013-01-11T14:53:11.343
> 
> 标签：timeout, oracle-apex

（顶点 4.1.1.00.23）

我有两个应用程序 A 和 B 共享同一个会话（因为它们使用相同的会话 cookie），并且每个应用程序的最大会话空闲时间都设置为相同的值 N。建立会话并访问两个应用程序后，如果我花更多的钱在应用程序 A 中工作超过 N 秒（执行大量页面加载，因此不会超时），如果我然后导航到应用程序 B，它会立即超时并将我发送到其登录页面。

我还尝试在两个应用程序中调用 APEX_UTIL.SET_SESSION_MAX_IDLE_SECONDS(N)，p_scopr 默认为“SESSION”，注意到 API 文档说

> 当多个 Application Express 应用程序使用通用身份验证方案并设计为在通用会话中作为套件运行时，这将是最常见的用例。

然而同样的事情也会发生。

我希望超时适用于整个会话，而不是单独适用于每个应用程序。这不是上面应该实现的目标，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:30:39.773

[我从Oracle APEX 论坛](https://forums.oracle.com/forums/message.jspa?messageID=10793282)上的 Christian Neumueller 那里得到了答案：

> ...在 4.2 中不再是问题。看4.1.1的代码，似乎问题在于我们如何存储最后一次访问时间。虽然具有 SESSION 范围的 APEX_UTIL 调用将为两个应用程序设置空闲超时，但我们为每个应用程序维护了一个计时器 (FSP_LAST_REQUEST_TIME)。在 TIMTEST1 中工作仅更新了 TIMETEST1 的计时器，而不是 TIMTEST2 的计时器。在使用一个应用程序并切换回另一个应用程序后，Apex 看到过时的计时器并确定会话已过期。这显然是一个错误。坏消息是反向移植是不可行的，因为会话状态管理发生了很大变化。

# java - 是否可以查看 Object Graph JAXB 分析？

> ID：14280626
> 
> 赞同：1
> 
> 时间：2013-01-11T14:53:15.087
> 
> 标签：java, groovy, jaxb, object-graph

我有一个现有的复杂对象模型，我试图将其编组为 JAXB xml。如果可能，我不想更改任何现有的域类。我有这个片段可以编组到一个文件（使用 Groovy）

```
def marshallToFile(Object objectToMarshall, File location){

    def context = JAXBContext.newInstance(objectToMarshall.class)

    def m = context.createMarshaller()
    m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true)

    location.withOutputStream { out ->
        m.marshal(new JAXBElement(new QName("","rootTag"),objectToMarshall.class,objectToMarshall), out)
    }

} 
```

问题是对象图非常复杂，JAXB 告诉我`com.sun.istack.internal.SAXException2: A cycle is detected in the object graph. This will cause infinitely deep XML: com.example.Object@1eef1eb[Id=100053900] -> com.example.Object@1eef1eb[Id=100053900]`

有什么方法可以获取有关检测到的周期的更多信息？有谁知道可以帮助分析图表或以图形方式列出图表以便我挑选周期的工具？我感觉这张图中有很多周期（它既古老又复杂），因此我们将不胜感激。

也许作为替代方案，您能否告诉 JAXB 只深入“n”级或类似的东西，这样它就不会创建无限深的 XML？

**编辑：**

所以关于我的具体问题......原来现有的域对象定义了一个`Object getThis()`和`void setThis(Object obj)`方法，即“获取”和“设置”`this`自引用关键字。这就是导致我循环的原因。这也突出了这样一个事实，即 JAXB 必须使用 JavaBean 方法定义来确定它将编组哪些属性（我以前不知道）。

但是，我认为最初的问题仍然存在，是否有任何好的工具可以分析/查看对象图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:33:10.927

也许您可以引入一个[Marshaller.Listener](http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/Marshaller.Listener.html)来跟踪编组过程并转储对象信息，以进行诊断。有关详细信息，请参阅[“Marshal Event Callbacks”](http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/Marshaller.html#marshalEventCallback)（引用“外部侦听器”的部分）。这不应该需要更改您现有的域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:25:56.707

您可以让您的对象实现`CycleRecoverable`接口以查找有关循环的信息。

```
import java.util.*;
import javax.xml.bind.annotation.*;
import com.sun.xml.bind.CycleRecoverable;

@XmlRootElement
public class Department implements CycleRecoverable {

   @XmlAttribute
   public int id;
   public String name;
   public List<Employee> employees = new ArrayList<Employee>();

   public Object onCycleDetected(Context arg0) {
       // Context provides access to the Marshaller being used:
       System.out.println("JAXB Marshaller is: " + cycleRecoveryContext.getMarshaller());

       DepartmentPointer p = new DepartmentPointer();
       p.id = this.id;
       return p;
   }

} 
```

**了解更多信息**

*   [http://wiki.eclipse.org/EclipseLink/Release/2.4.0/JAXB_RI_Extensions/Cycle_Recoverable](http://wiki.eclipse.org/EclipseLink/Release/2.4.0/JAXB_RI_Extensions/Cycle_Recoverable)

# magento - 购物车价格规则更改

> ID：14280627
> 
> 赞同：5
> 
> 时间：2013-01-11T14:53:15.940
> 
> 标签：magento

我想修改购物车价格规则并在那里添加一个新字段 - 折扣小计。知道怎么做吗？除了小计，我也想有折扣小计，这样我就可以根据折扣小计而不是基础小计给予折扣。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T11:42:21.240

这是一个相关的答案。没有自定义修改是不可能的。

> 未经修改 Magento 不允许这样做。
> 
> 购物车价格规则适用于购物车，而总计通常要到结账的最后阶段才计算。两个非常不同的接触点。这将是极其困难的，我什至无法开始思考你会从哪里开始。

[相关答案](https://webmasters.stackexchange.com/questions/31742/magento-shopping-cart-rule-based-on-grand-total)

# c - 禁止 GCC 警告“#include 指令末尾的额外标记”

> ID：14280630
> 
> 赞同：3
> 
> 时间：2013-01-11T14:53:26.390
> 
> 标签：c, gcc, warnings, compiler-warnings, gcc-warning

我正在用 C 语言编写一个程序，旨在在 HP NonStop 机器上编译和运行。但是，我想在运行 Linux 的工作站上进行主要开发。HP NonStop C 编译器需要非标准 #include 指令，如下所示：

```
#include <stdio.h> nolist 
```

对于每个 #include 指令，我的工作站的 GCC 都在抱怨：

```
S88USF.c:139:21: warning: extra tokens at end of #include directive 
```

我怎样才能抑制这个特定的警告？

注意：在 SO 上，已经提出了类似的问题，正确的答案是“一开始就不要给 gcc 任何抱怨的理由”。然而，在这种情况下，我明确希望 #include 指令与它们完全一样。

我知道我在做什么，只是不知道如何通知 gcc。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T14:59:44.007

一种解决方法是定义一个包含以下 preproccesor 宏的标头：

```
//hp_workaround.h
#ifdef HP_
#define HP_INCLUDE_DIRECTIVE(x) x
#else
#define HP_INCLUDE_DIRECTIVE(x) 
#endif 
```

然后用这个宏保护你的指令

```
#include "hp_workaround.h"
#include <stdio.h> HP_INCLUDE_DIRECTIVE(nolist) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:00:49.463

在 include 中发生的宏扩展可能会有所帮助。

GCC 将接受这一点：

```
#define nolist
#include <stdlib.h> nolist
/* maybe #undef nolist here */ 
```

# java - 通过零大小的数组，节省分配？

> ID：14280631
> 
> 赞同：7
> 
> 时间：2013-01-11T14:53:28.260
> 
> 标签：java, arrays, garbage-collection

在[The Well-Grounded Java Developer](https://rads.stackoverflow.com/amzn/click/com/1617290068)第 114 页的代码示例中，最后一行：

```
Update[] updates = lu.toArray(new Update[0]); 
```

包含注释：**传递零大小的数组，保存分配**

```
List<Update> lu = new ArrayList<Update>();
String text = "";
final Update.Builder ub = new Update.Builder();
final Author a = new Author("Tallulah");

for (int i=0; i<256; i++) {
  text = text + "X";
  long now = System.currentTimeMillis();
  lu.add(ub.author(a).updateText(text).createTime(now).build());
  try {
    Thread.sleep(1);
  } catch (InterruptedException e) {
  }
}

Collections.shuffle(lu);
Update[] updates = lu.toArray(new Update[0]); 
```

这种节省究竟是什么分配？

[List#toArray(T[] a)](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29)的 javadoc提到：

> 如果列表适合指定的数组，则在其中返回。否则，将使用指定数组的运行时类型和此列表的大小分配一个新数组。

这是我记得的：如果您传递给的数组`toArray(T[] a)`不能适合列表中的所有内容，则会分配一个新数组。很明显，列表中有 256 个元素，无法放入大小为 0 的数组中，因此必须在方法内部分配一个新数组，对吗？

那么这个注释不正确吗？或者还有别的意思吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:02:10.637

> 很明显，列表中有 256 个元素，无法放入大小为 0 的数组中，因此必须在方法内部分配一个新数组，对吗？

是的。

* * *

您可以使用

```
 private static final Update NO_UPDATES = { }

 lu.toArray(NO_UPDATES); 
```

但是，这仅在您希望列表通常为 0 长度时才会有所帮助。

一般来说，我会采用与 fge 相同的方法

```
 lu.toArray(new Update[lu.size()]); 
```

在您的具体情况下，您提前知道尺寸，以便您可以做

```
Update[] updates = new Update[256];
String text = "";
final Update.Builder ub = new Update.Builder();
final Author a = new Author("Tallulah");

long now = System.currentTimeMillis();
for (int i=0; i<updates.length; i++) 
  updates[i] = ub.author(a).updateText(text += 'X').createTime(now++).build();

Collections.shuffle(Arrays.asList(updates)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:03:39.490

离开@Andreas 对这个问题的评论，我认为这*是*一个错字，应该说：

> 传递零大小数组，**安全**分配。

因为如果你什么都不传递给方法，你最终会调用[List#toArray()](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28%29)无参数重载！

这将返回一个`Object[]`（尽管它只包含`Update`实例）并且需要更改`updates`变量的类型，因此最后一行将变为：

```
Object[] updates = lu.toArray(); 
```

然后每次您想要迭代并使用该数组中的元素时，您都必须将它们强制转换为`Update`.

提供数组调用[List#toArray(T[] a)](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29)方法，该方法返回一个`<T> T[]`. 这个数组被具体化以知道它是一个`Update`实例数组。

因此，提供一个空的 Updates 数组会导致从 toArray 调用返回的 Update[]，而不是 Object[]。这是一个更加类型**安全**的分配！ *注释中的“保存”二字一定是错字！*

...这消耗了太多的脑力劳动。将在本书的论坛中发布此链接，以便他们进行更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:15:01.917

它节省了分配，比较`toArray(new Update[255])`或`toArray(new Update[1000])`

# javascript - 角度 ng-class 对点击没有反应

> ID：14280632
> 
> 赞同：4
> 
> 时间：2013-01-11T14:53:34.167
> 
> 标签：javascript, angularjs, ng-class

我正在尝试使用 ng-class 并将一个类绑定到一个表达式，以便我可以对表达式绑定进行单元测试。但是，似乎我错过了一些东西。

按钮：

```
<li><a class=""  ng-click="onAddInterface()"><i class="icon-plus-sign"></i> add interface </a></li> 
```

应该折叠和展开的面板：

```
<div class="collapse" ng-class="{in:showCreateNewInterfacePanel}"><div> 
```

被触发的函数

```
$scope.onAddInterface=function(){
  $scope.showCreateNewInterfacePanel=true;
} 
```

无论如何点击链接没有任何反应。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:09:15.780

我不确定这是否是您真正定义`$scope.onAddInterface`函数的方式，或者它只是一个示例......不过，您应该这样做：

```
$scope.onAddInterface = function() {
  $scope.showCreateNewInterfacePanel = true;
} 
```

**更新**

还要确保链接和可折叠元素在同一个 $scope/Controller 下：

```
<div ng-controller="Ctrl">
  ...
  <a ng-click="onAddInterface()">add interface</a>
  ...
  <div class="collapse" ng-class="{in:showCreateNewInterfacePanel}"><div>
  ...
</div> 
```

控制器：

```
function Ctrl($scope) {
  $scope.onAddInterface = function() {
    $scope.showCreateNewInterfacePanel = true;
  }
}​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-14T04:20:19.430

我有一个非常相似的问题，并且能够通过将“in”放在引号中来解决这个问题。它是一个字符串，而不是一个变量。

```
 ...
  <div class="collapse" ng-class="{'in':showCreateNewInterfacePanel}"><div>
  ... 
```

# javascript - Javascript cookie 和重定向

> ID：14280635
> 
> 赞同：1
> 
> 时间：2013-01-11T14:53:39.493
> 
> 标签：javascript, cookies, session-cookies

我需要帮助更改此代码，以便 cookie 仅持续整个会话而不是 1 年。我需要做哪些改变？

```
function createCookie(name,value,) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000*365));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
        document.cookie = name+"="+value+expires+"; path=/";
    } 
```

我试图这样做，但它似乎不起作用。Cookie 已创建，但在会话关闭后不会消失。

```
function createCookie(name,value) {
    document.cookie = name+"="+value+"; path=/";
} 
```

- - 更新 - -

我对代码做了一些小的改动：

```
 function createCookie(name,value,expires) {
        var expires = "";
        document.cookie = name+"="+value+expires+"; path=/";
    } 
```

现在我使用的是 Chrome，它不适用于我拥有的代码，也不适用于此代码。但是这段代码可以在 IE、Firefox 和 Opera 中运行。会话结束时会删除 cookie，但不会在 Chrome 中...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:42:45.810

自 19 版以来的 Chrome 在会话 cookie 的处理方面做出了突破性的改变。为了改善用户体验，不会删除会话 cookie。

如果我理解正确，因为 chrome 设置中设置的选项说：“从我离开的地方继续”，会话 cookie 永远不会过期。

请看：

[Chrome 不会删除会话 cookie](https://stackoverflow.com/questions/10617954/chrome-doesnt-delete-session-cookies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:05:08.503

如果您使用的是 Chrome 或 Firefox，则将 expires 设置为 0，如果您使用的是 IE，则将 expires 参数全部省略。

# javascript - Internet Explorer 中的复选框在未悬停时具有“悬停”视图

> ID：14280636
> 
> 赞同：1
> 
> 时间：2013-01-11T14:53:43.380
> 
> 标签：javascript, internet-explorer, checkbox, hover

我有几个*`checkbox lists`*，每次用户选中或*取消*选中任何*复选框*时，我都需要更新它们。有些列表可能包含数千个`checkboxes`.

由于创建新元素很慢，我想避免它。因此，在更新期间，我没有删除它们，而是将对元素的引用保存到堆栈中。

这是代码的摘录：

```
// Save element to buffer. Each element looks like <div><input type="checkbox" /><label>label here</label></div>
while (checkBoxList.firstChild) {
    var div = checkBoxList.firstChild;
    buffer.push(div);
    checkBoxList.removeChild(div);
}

// elided ...

// Getting the new options...
// For each new option try to pop existing element from buffer or create new one if       buffer has no elements

var div = buffer.pop();
var divExists = div != undefined;
var checkBox = divExists ? div.firstChild : document.createElement('input');
var label = divExists ? div.lastChild : document.createElement('label');

checkBox.id = newId; // set new id
checkBox.name = newName; // set new name
checkBox.value = newValue // set new value

// elided...

// Append updated (or created one) to checkbox list
checkBoxList.appendChild(div); 
```

这种技术工作正常，但在`IE`我得到以下问题：`checkboxes`出现蓝色，好像鼠标会悬停在它们上面*`(see the screenshot at http://postimage.org/image/z6yeckuz5/).`*

有没有人遇到过类似的问题？为什么会发生这种情况？

# java - 如何使用 QRGen 设置 QRC 的纠错级别？

> ID：14280638
> 
> 赞同：0
> 
> 时间：2013-01-11T14:53:54.180
> 
> 标签：java, qr-code, zxing, error-correction

我有下面的项目在我的系统上工作：

[如何使用 Java 创建二维码](https://stackoverflow.com/a/9257063/867591)

但我无法弄清楚如何使用这个库设置纠错级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:16:44.237

从[QRGen 文档](http://kenglxn.github.com/QRGen/javadocs/index.html)中，你不能。

这个库是 ZXing 的一个方便的包装器，可以更轻松地创建简单的二维码，但是如果你想做更复杂的事情，比如指定纠错级别，你必须直接使用 ZXing。

# c# - 带有 ServiceNotification 选项的服务

> ID：14280640
> 
> 赞同：1
> 
> 时间：2013-01-11T14:53:56.470
> 
> 标签：c#, .net-4.0, windows-services, messagebox

在 Windows Vista 及更高版本中，服务无法再访问 GUI。然而，在编写了一个将消息从我的服务传递到辅助 GUI 应用程序的简单机制之后，我发现了以下重载 for `System.Windows.Forms.MessageBox.Show`，其中“MessageBoxOptions”参数引起了我的注意：

```
public static DialogResult Show(
    string text,
    string caption,
    MessageBoxButtons buttons,
    MessageBoxIcon icon,
    MessageBoxDefaultButton defaultButton,
    MessageBoxOptions options
) 
```

更仔细地查看枚举，其中一个有效选项是`MessageBoxOptions.ServiceNotification`，它在[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxoptions.aspx)上指出：

> 消息框显示在活动桌面上。调用者是通知用户事件的服务。即使没有用户登录到计算机，该功能也会在当前活动桌面上显示一个消息框。

这是否意味着通过传递`MessageBox.Show()`此选项的方法，我的服务实际上可以处理显示来自服务的简单消息，而无需在 Vista、Windows 7 及更高版本中使用帮助应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:01:42.523

[MESSAGEBOXOPTIONS ENUM DEMYSTIFIED - 适用于 XP](http://bartdesmet.net/blogs/bart/archive/2004/12/03/488.aspx)

> 从 Windows Vista 及更高版本开始，无法看到由 Windows 服务生成的用户界面。更糟糕的是，您的服务可能会卡在等待用户无法提供的某些用户输入，因为她看不到任何内容

从[这里](http://blogs.msdn.com/b/yvesdolc/archive/2009/08/20/do-you-still-use-the-messagebox-api-in-your-windows-service.aspx)

* * *

要在 Windows 服务中显示 MessageBox，您需要发送 [`WTSSendMessage`](http://msdn.microsoft.com/en-us/library/ms683502%28VS.85%29.aspx)消息。它将在[Session 0 特殊桌面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756986.aspx)中显示 DialogBox 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:00:34.283

是的，你的提议会奏效，但你真的想这样做吗？请记住，默认情况下 MessageBox.Show() 是一个**阻塞**操作。通常，让服务等待 UI 操作是一种非常糟糕的做法。

你的问题的答案是：“是的，但请不要。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-26T10:45:53.657

仅当您已启动“交互式服务检测”服务时，您的服务才能使用 Show 方法显示 MessageBox。要启动此服务，请在“运行”窗口中键入“services.msc”。

# jquery - 将切换跨度添加到 twitter bootstrap 崩溃

> ID：14280642
> 
> 赞同：3
> 
> 时间：2013-01-11T14:54:01.070
> 
> 标签：jquery, twitter-bootstrap, accordion, collapse

我在一个新站点上使用 Twitter Bootstrap，我需要在切换器中添加一个加号/减号。该部分包含在 EE 频道条目标签中，以循环遍历整个职业生涯并创建手风琴列表。我的手风琴代码如下：

```
{if count == "1"}
<div class="accordion" id="my_accordion">
{/if}
    <div class="accordion-group">
        <div class="accordion-heading">
            <h2><a class="accordion-toggle" data-parent="#my_accordion" data-toggle="collapse" href="#collapse{count}">{title} <span class="pull-right">+</span></a></h2>
        </div>
        <div class="accordion-body collapse" id="collapse{count}">
            <div class="accordion-inner">
                {careers-summary}
                <p><a href="{page_uri}" class="btn btn-small">Learn More</a></p>
            </div>
        </div>
    </div>
{if count == total_results}
</div>
{/if} 
```

我开始编写但似乎不想工作的 javascript 如下（请参阅下面的新代码）：

我要做的就是在手风琴打开/关闭时将加号变为减号，反之亦然。我越看我开始的 javascript，即使它确实按照我的意愿更改了文本，但当我单击另一个手风琴切换器时，它不一定会这样做。让它工作并让它足够灵活以在多个手风琴切换器上工作的最佳方法是什么？

**更新**我对 javascript 做了一些更改，并使用了 Twitter Bootstrap 提供的事件。我还删除了 data-parent 属性，因此它们就像可折叠的切换器，而不是手风琴。新代码如下：

```
$('.accordion').on('hide', function () {
    $('.accordion-toggle span').html('+');     
})
$('.accordion').on('show', function () {
    $('.accordion-toggle span').html('-');     
}) 
```

这实际上会更改文本，但会更改每个切换器的加号/减号，而不仅仅是您单击的切换器。我可以为每个跨度添加一个自定义类，但我不确定如何在 javascript 中定位它，而不必为每个切换创建一个 show.hide 函数。这似乎效率低下，必须有一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:09:12.707

您应该使用 Bootstrap`show`和`hide`类似的事件，而不是`click`上面的函数：

```
$(".accordion-body").on("show",function(event){
        $('span', $(this).prev()).text('-');
});
$(".accordion-body").on("hide",function(event){
        $('span', $(this).prev()).text('+');
}); 
```

[JS 小提琴在这里](http://jsfiddle.net/mccannf/e9uQx/5/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T18:49:27.150

简单的解决方案适用于 Bootstrap 3。

```
$('[data-toggle="collapse"]').click(function(e) {
    $(e.target).find('.icon-minus-sign, .icon-plus-sign').toggleClass("icon-minus-sign icon-plus-sign");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T08:30:29.147

以下是一次只能打开一个面板的手风琴（对于 Bootstrap 3）

**1\. CSS - 仅限**

```
#accordion2 .accordion-toggle span.glyphicon.glyphicon-collapse-up:before { 
content:"\e160" /* an up type icon */
}

#accordion2 .accordion-toggle.collapsed span.glyphicon.glyphicon-collapse-up:before { 
content:"\e159" /* a down type icon */
} 
```

折叠的类需要从一开始的 [JS小提琴示例中设置在HTML中](http://jsfiddle.net/3T6XF/1/ "http://jsfiddle.net/3T6XF/1/")

**2\. Javascript**

使用 Javascript 检查所有带有类 '.accordion-toggle' 的链接上的类 '.collapsed'：

```
jQuery(document).ready(function ($) {
    $(document).on('click', '.accordion-toggle', function () {
        $(".accordion-toggle").each(function () {
            var iconSpan = $(this).find('.glyphicon');
            if ($(this).hasClass('collapsed')) {
                $(iconSpan).removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
            } else {
                $(iconSpan).removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
            }
        });
    });
}); 
```

小提琴：http: [//jsfiddle.net/JungleEditor/bCk3f/](http://jsfiddle.net/JungleEditor/bCk3f/ "http://jsfiddle.net/JungleEditor/bCk3f/")

# java - 在 Tapestry 中添加带参数的 js 文件

> ID：14280645
> 
> 赞同：0
> 
> 时间：2013-01-11T14:54:14.693
> 
> 标签：java, javascript, maps, tapestry

我想将 google maps js lib 添加到我的挂毯应用程序中，但挂毯不允许我发送参数。“https://maps.googleapis.com/maps/api/js?key=ansdjaskdjaksdajskdaskda&sensor=true”发送实体“传感器”的引用必须以“;”结尾 分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:18:45.527

你应该使用`[JavaScriptSupport#importJavaScriptLibrary][1]`. 你可以看一下[`GMap`](https://github.com/exanpe/exanpe-t5-lib/blob/master/src/main/java/fr/exanpe/t5/lib/components/GMap.java)组件。

# android - 来自不同应用程序的多个活动

> ID：14280647
> 
> 赞同：0
> 
> 时间：2013-01-11T14:54:20.543
> 
> 标签：android, android-activity

我有两个活动...一个在 A 应用程序中，另一个在 B 应用程序中。

我正在从 A 应用程序向 B 应用程序调用活动，因此 A 应用程序活动将暂停并向 B 应用程序活动抛出意图，在 B 应用程序活动之后，我将再次返回 A 应用程序活动，因此 A 应用程序活动应该从 onrestart 或onresume() 就像在 onPause() 中一样，但它会在 oncreate() 中。我确信 A 应用程序活动没有被破坏，因为当我点击返回按钮时，它从恢复或重新启动状态开始。

基本上，这两个应用程序活动以循环方式运行，例如 A 应用程序活动 - B 应用程序活动 - A 应用程序活动 - B 应用程序活动 ....................很快

另一种想法是，当我按下返回按钮时，它们都没有被破坏，然后它进入恢复状态，所以没有任何东西被杀死。

有什么办法可以让我的过渡成为——

A 应用程序活动 - B 应用程序活动（A 暂停状态 - B 创建状态） B 应用程序活动 - A 应用程序活动（B 暂停状态 - A 恢复状态）

注意：来自差异应用程序的两个活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:58:35.540

很大程度上取决于您如何从一项活动转到另一项活动以及您如何在清单中声明它们。

没有更多代码，我建议你阅读[这里](http://developer.android.com/guide/components/tasks-and-back-stack.html)的文档，特别注意`taskAffinity`和`launchMode`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:39:29.670

> 我将再次回到应用程序活动，因此应用程序活动应该从 onrestart 或 onresume() 开始，就像它在 onPause() 中一样，但它将到 oncreate()

正如@Eigor 提到的 - 在这种情况下，操作系统可以喊出停止的活动（不可见，并且在当前进程的活动堆栈中的某处）**- Android 操作系统会在不通过的情况下喊出活动`onDestroy()`**，但会通过`onSaveInstanceState()`回调让您有机会在您点击返回按钮时重新创建活动时保留您想要恢复的任何数据状态。您之前保存的数据将存储在`onCreate()`

阅读 - [http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle) )

我猜是因为你不知道操作系统是这样的，所以感觉很奇怪。知道知识并加以考虑应该可以解决您的问题

> 我确信 A 应用程序活动没有被破坏，因为当我点击返回按钮时，它从恢复或重新启动状态开始。

在这种情况下，应用程序活动没有被破坏的事实不是你可以指望的，这与我之前所说的并不矛盾。在某些情况下，它仍然会被操作系统喊叫而没有`onDestroy`出于同样的原因而被调用。

关于你想在 A 和 B 之间进行的所有循环：我认为我写的内容可以帮助你理解为什么它没有按你的预期工作......

# android - 在nexus 7 android的android webview中从内部存储播放.SWF文件

> ID：14280648
> 
> 赞同：2
> 
> 时间：2013-01-11T14:54:24.443
> 
> 标签：android, flash, android-webview, local-storage, android-4.2-jelly-bean

无法在安装了 jellybean 的设备（例如：-nexus7）上的 android webview 的内部存储中播放 .swf（flash 文件）文件，但我可以在 android 蜂窝设备上播放 .swf（flash 文件）......我也认为这是 jellybean之后 android 停止支持 flash 文件插件，甚至 adobe 也停止在 android 中进行相同的开发。

这是我尝试过的一些代码片段，但没有结果----

```
wv = (WebView) findViewById(R.id.webView1);
    String url =Environment.getExternalStorageDirectory()+"/FolderName/Filename.swf";
    wv.setWebChromeClient(new WebChromeClient());//also tried WebViewClient
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginState(PluginState.ON);
    wv.getSettings().setAllowFileAccess(true);
    wv.getSettings().setUseWideViewPort(true);
    wv.loadUrl(url); 
```

webview 的中心只显示一个小图标。[注意-我什至尝试使用 html 文件加载，但没有任何效果]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:04:47.583

我找到了一个可行的解决方案......不知道它有多可行，但这个解决方案对我有用，请按照以下步骤操作..

```
Step1->Download flash player apk from this 
```

[下载 Flash Player apk 的链接](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html?PID=3640929)

```
Step2->After downloading go to settings--->security---->Check "Unkown sources option".

Step3->install the apk that you downloaded+

Now your webview code will work and .swf files can be played inside webview 
```

[note-download flashplayer apk for android 4.0 devices for ics 及以上]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:55:32.680

这不可能。

Android 不再支持 Flash 文件。

# session - 外部访问 symfony 2.1 会话

> ID：14280650
> 
> 赞同：0
> 
> 时间：2013-01-11T14:54:27.250
> 
> 标签：session, upload, external, symfony-2.1

我使用带有 symfony 2.1 的 BlueImp 文件上传器服务器端作为外部必须是轻量级的 php UploadHandler.php 脚本我想获取记录的用户 ID 以使用其自己的目录进行上传出于安全原因，它必须通过会话完成，而不是 POST。当我尝试 session_start() 时，在外部文件中，$_SESSION 仍然为空。我知道如何使用 1.4： [Symfony 会话外的应用程序？](https://stackoverflow.com/questions/2222227/symfony-sessions-outside-app) 但我不知道 2.1

也许我错了，有更好的方法可以在外部脚本中实现用户 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:09:21.653

如果您`main`在 security.yml 配置中调用了防火墙，您应该可以访问安全令牌（序列化），`$_SESSION['_sf2_attributes']['_security_main']`注意第二个密钥具有模式：`_security_filewallName'

在您的情况下[punkave/symfony2-file-upload-bundle](https://github.com/punkave/symfony2-file-uploader-bundle)也可能很有趣。

# ios - 在对象类型（自定义）xcode 上找不到属性

> ID：14280659
> 
> 赞同：0
> 
> 时间：2013-01-11T14:54:59.640
> 
> 标签：ios, nsmutablearray

最奇怪的事情发生了。虽然我不认为我在那堂课上碰过任何东西，但突然它开始告诉我它在课堂上找不到数组......

以下是错误：

基本上它无法访问 baseobject 中的可变数组（自定义 Car.h 类型）（语义问题：在 CarPacket 类型的对象中找不到属性 objectReadyForCoreDatabase（false，因为它已声明））

```
if([baseObject.objectsReadyForCoreDataBaseInput count]<kLenght )
            {
} 
```

车包.h

```
 #import <Foundation/Foundation.h>
    #import "ResponsePacket.h"

    @interface CarPacket : ResponsePacket

    @property (nonatomic, copy) NSString *objectID;
    @property (nonatomic, retain) NSMutableArray *objectsReadyForCoreDataBaseInput;
    @property (nonatomic, assign) NSInteger timeStamp;

@end 
```

这很奇怪，因为在我输入 object.objectID 的同一页面上，它会识别但不是 object.objectReadyForCoreDataBaseInput （它也只是突然停止工作）

如果您有任何想法，请告诉我...谢谢

我尝试恢复到以前的快照，但它没有任何效果......它仍然显示错误（即使我知道在那一天它没有）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:25:05.693

您没有分享太多关于您拨打电话（并看到错误）的上下文。也就是说，我的猜测是以下两种情况之一：调用类不熟悉接收类 (CarPacket)，或者调用类不知道 baseObject 是 CarPacket。

你从哪里打来的？确保调用类导入标头。因为我不知道你从哪里打电话，所以假设它来自 UnknownClass：

```
UnknownClass.m

#import UnknownClass.h
#import CarPacket.h // This should make your class familiar

@implementation UnknownClass 
```

另一件事是您需要确保在您触摸 baseObject 时，您的 UnknownClass 实例知道它正在处理 CarPacket 实例，例如：

```
- (void)someMethodOfUnknownClass
{

CarPacket *baseObject = (CarPacket *)baseObject; // Cast baseObject if it hasn't been declared as a CarPack in scope...

if([baseObject.objectsReadyForCoreDataBaseInput count]<kLenght )
    {
    }

} 
```

# java - 在 JScrollPane 中调用 setViewportView 后避免自动滚动到底部

> ID：14280660
> 
> 赞同：1
> 
> 时间：2013-01-11T14:55:02.313
> 
> 标签：java, swing, jscrollpane

情况：我有一个`JScrollPane`“scrollPane”，其中包含一个`JPanel`“mainPanel”，其中包含多个`JPanel`彼此下方的“itemPanel”（从数据库读取的信息和相应创建的对象）。用户可以在现有条目之间插入新条目。在这种情况下，新条目被添加到数据库中，并且所有组件（“itemPanels”）再次生成并添加到新的“mainPanel”中。最后，使用 setViewPortView 将新的“mainPanel”设置为 scrollPane。

```
Vector<JPanel> itemPanels = generateMyPanelsFromDB();
JPanel mainPanel = new JPanel(new GridBagLayout());
//.. layout stuff
for(JPanel itemPanel: itemPanels) mainPanel.add(itemPanel,<gridbagconstraintsvar>);
scrollPane.setViewportView(mainPanel); 
```

发生的情况是新组件被正确添加并且滚动窗格自动滚动到最后。

我怎样才能避免，滚动窗格滚动到最后（=保持原来的位置）。我尝试了什么：围绕上述动作：

```
int currentPos = scrollPane.getVerticalScrollBar().getValue();
//.. to the setViewPortView stuff
scrollPane.getVerticalScrollBar().setValue(value); 
```

这没有做任何事情（滚动窗格仍然滚动到最后，没有任何事情发生）。我只设法使用以下嵌套invokeLater重新滚动，但这不是正确的方式，也不会阻止向下滚动然后备份（=伤害眼睛）

```
final int value = scrollPane.getVerticalScrollBar().getValue();
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
       public void run() { 
            scrollPane.setViewportView(mainPanel);
            Thread t = new Thread() {
                public void run() {
                    try {
                        Thread.sleep(1);
                    }
                    catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    javax.swing.SwingUtilities.invokeLater(new Runnable() {
                           public void run() { 
                                scrollPane.getVerticalScrollBar().setValue(value);
                           }
                        });
                }
            };
            t.start();
       }
    }); 
```

2012 年 1 月 14 日添加：

```
public class DebugImportCommandEditPanel extends JPanel {
private static final long serialVersionUID = 1L;

private JScrollPane commandScrollPane;

public DebugImportCommandEditPanel() {
    this.setLayout(new BorderLayout());
    this.commandScrollPane = new JScrollPane(this.getMainPanel());
    this.add(this.commandScrollPane, BorderLayout.CENTER);
}

private JPanel getMainPanel() {
    Vector<InnerPanel> innerPanels = new Vector<InnerPanel>();
    for(int i=0;i<12;i++) innerPanels.add(new InnerPanel((i+1)+ "."));

    JPanel mainPanel = new JPanel(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    c.gridx=0;c.gridy=0;c.weightx=1;c.weighty=1;c.fill = GridBagConstraints.BOTH;
    for(InnerPanel panel: innerPanels) {
        mainPanel.add(panel,c);
        c.gridy++;
    }
    return mainPanel;
}

class InnerPanel extends JPanel {
    private static final long serialVersionUID = 1L;

    protected InnerPanel(String number) {
        this.setLayout(new BorderLayout());
        this.setBorder(BorderFactory.createTitledBorder("Inner Panel No. "+number));
        JTextPane textPane = new JTextPane();
        textPane.setText("Lorem ipsum dolor sit amet consectetuer tellus sociis sapien porttitor "+
                        "Suspendisse. Mattis morbi eu In non ante convallis\n  "+
                        "tempus risus venenatis urna. Sed ipsum et parturient volutpat\n "+ 
                        "adipiscing dolor quis adipiscing Donec odio.\n "+
                        "Neque adipiscing pretium lacus Phasellus neque a vel sed wisi alique\n"+
                        "t. Condimentum Sed pretium libero vitae facilisi pretium sit consequat a "+ 
                        "tincidunt. Pharetra ac Aliquam.");
        this.add(textPane,BorderLayout.CENTER);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:11:32.140

看到您的编辑：它可能是嵌套的 JTextPane - 出乎意料（对我来说，至少 :-)，即使不是视口的直接子项，它似乎也会[影响整体滚动行为。](https://stackoverflow.com/a/14277765/203657)

出路是将插入符号策略配置为在设置文本时不更新：

```
JTextPane tp = new JTextPane();
DefaultCaret caret = (DefaultCaret) tp.getCaret();
caret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE);
textPane.setText("Lorem ipsum dolor sit amet consectetuer tellus sociis sapien porttitor "+
    .... 
```

请注意，您必须在设置文本*之前设置策略。*

# zsh - 在 zsh 中传递哈希作为参数

> ID：14280661
> 
> 赞同：2
> 
> 时间：2013-01-11T14:55:03.270
> 
> 标签：zsh

将哈希传递给函数的正确/惯用方式是什么？

我对此有所了解，但不确定这有多干净或是否有任何陷阱。

```
typeset -A hash
hash=(a sometext b moretext)

foo hash

foo() {
  typeset -A mhash
  mhash=( ${(Pkv)1} )
} 
```

P 标志解释结果（在这种情况下 $1 为持有参数名称）。由于这导致只获取值而不是键，因此我使用“kv”来获取键和值。

这是正确的方法，还是有其他方法。顺便说一句，因为我在我的实际程序中传递了一个数组和一个哈希，我不想使用“$*”或“$@”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:41:59.053

我尝试了一点，但我不确定除了在函数上使用 $@ 之外还有其他方法。

[Re: 数组作为参数 - Zsh 邮件列表](http://www.zsh.org/mla/users/2011/msg00870.html)

这些问题的可能答案（面向 bash）：
[如何将关联数组作为参数传递给 Bash 中的函数？](https://stackoverflow.com/questions/4069188/how-to-pass-an-associative-array-as-argument-to-a-function-in-bash)
[在bash中将数组作为参数](https://stackoverflow.com/questions/1063347/passing-arrays-as-parameters-in-bash)
[传递将数组传递给shell脚本的函数](https://stackoverflow.com/questions/6533364/passing-array-to-function-of-shell-script)

事实上，当你开始需要在 shell 脚本中使用数组，或者更糟糕的是，关联数组时，也许是时候切换到更强大的脚本语言了，比如 perl 或 python。
如果您不为您做这件事，那么从现在起 6 个月后为您做这件事/为您的继任者做这件事。

# java - Google Maps Geolocation API 只返回我阵列中第一个塔的位置

> ID：14280662
> 
> 赞同：5
> 
> 时间：2013-01-11T14:55:07.823
> 
> 标签：java, google-maps

我正在尝试使用 Google Maps Geolocation API。我正在将一个仅包含手机信号塔的 JSON 文件发布到`https://www.googleapis.com/geolocation/v1/geolocate?key=MYKEY`.

示例 JSON：

```
{
    "cellTowers":[
    {
        "cellId":65535,
        "locationAreaCode":5160,
        "mobileCountryCode":234,
        "mobileNetworkCode":10,
        "signalStrength":-53
    },
    {
        "cellId":34177,
        "locationAreaCode":5160,
        "mobileCountryCode":234,
        "mobileNetworkCode":10,
        "signalStrength":-55
    }
]} 
```

这已被验证为正确的 JSON。但是，我在从 API 中获取体面的数据时遇到问题。

我已经使用 Apache HTTPClient 和 HTTPPost 库在 Java 中实现了 POST。我得到了一个有效的回复，但它始终是 cellTowers 数组中第一个蜂窝塔的 LAT、LNG。好像 API 正在读取第一个蜂窝塔，获取位置然后忽略其余部分。当然，我已经通过反转和改组列表来验证这是行为，并且每次响应都会更改到第一个塔的位置。这是我的代码：

```
HttpParams httpParams = new BasicHttpParams();
ConnRouteParams.setDefaultProxy(httpParams, new HttpHost(PROXY_HOST, PROXY_PORT));
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);

HttpClient client = new DefaultHttpClient(httpParams);
HttpPost request = new HttpPost(GOOGLE_GEOLOCATION_API);
request.setHeader("Content-type", "application/json");

try {
    StringEntity se = new StringEntity(json);
    request.setEntity(se);

    HttpResponse response = client.execute(request);
    if(response!=null){
        String jsonResult = EntityUtils.toString(response.getEntity());
        GeolocationResponse geolocationResponse = gson.fromJson(jsonResult, GeolocationResponse.class);

        logger.info(jsonResult);
        logger.info("Est. Location: " + geolocationResponse.toString());
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

Geolocation API 是否一次只支持一个手机信号塔？我认为它会比这更聪明，使用某种信号传播和跨所有塔的距离估计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T11:09:06.693

在最近与 Google 就我们的地图 API 订阅进行的沟通中，我询问了有关 Geo-location API 的一些一般信息。事实证明，它不会对蜂窝塔信号进行任何复杂的三角测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-03T17:31:22.667

他们只使用第一个被认为有效的。参考：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=6929](http://code.google.com/p/gmaps-api-issues/issues/detail?id=6929)

# mono - 在 Mono 中导航后 XPathNavigator.SchemaInfo 为空

> ID：14280666
> 
> 赞同：0
> 
> 时间：2013-01-11T14:55:15.953
> 
> 标签：mono, xpathnavigator, system.xml

我将 C# 与 Mono 一起使用，并且我想使用 XPathNavigator 导航经过 XML Schema 验证的 XmlDocument。关键是当我遍历文档时，我可以通过 XPathNavigator.SchemaInfo 属性获取每个元素的 XML Schema 信息。但是，在我调用 XPathNavigator.MoveToFirstChild() 之后，XPathNavigator.SchemaInfo = null。这是一个例子

```
using System;

using System.IO;
using System.Xml;
using System.Xml.XPath;
using System.Xml.Schema;

namespace XmlSchemaTest
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlDocument xmlDocument = ReadAndValidateXmlFile(@"../test.xml", @"../test.xsd");

            if (xmlDocument == null)
                Console.WriteLine("Cannot open document or it didn't validate.");
            else
            {
                XPathNavigator xpathNavigator = xmlDocument.CreateNavigator();
                Console.WriteLine("XPathNavigator.SchemaInfo is " + ((xpathNavigator.SchemaInfo == null) ? "null" : "not null"));

                xpathNavigator.MoveToRoot();
                Console.WriteLine("Called XPathNavigator.MoveToRoot()");

                if(xpathNavigator.MoveToFirstChild())
                {
                    Console.WriteLine("XPathNavigator.LocalName after .MoveToFirstChild() succeeded = " + xpathNavigator.LocalName);
                    Console.WriteLine("XPathNavigator.NodeType value = " + xpathNavigator.NodeType.ToString());
                    Console.WriteLine("XPathNavigator.SchemaInfo is " + ((xpathNavigator.SchemaInfo == null) ? "null" : "not null"));
                }
            }

            //Console.ReadLine();
        }

        private static XmlDocument ReadAndValidateXmlFile(string xmlPath, string xsdPath)
        {
            // Load the XML Schema
            bool anyValidationErrors = false;
            XmlSchemaSet oSchemaSet = new XmlSchemaSet();
            ValidationEventHandler Handler = new ValidationEventHandler((object sender, ValidationEventArgs args) => {Console.WriteLine(args.Message); anyValidationErrors = true;} );
            oSchemaSet.ValidationEventHandler += Handler;
            XmlSchema oSchema = null;
            using (StreamReader sr = new StreamReader(xsdPath)) {
                oSchema = XmlSchema.Read(sr, Handler);  
            }
            if (anyValidationErrors || (oSchema == null)) {
                Console.WriteLine("Schema validation errors");
                return null;    
            }
            oSchemaSet.Add(oSchema);

            // Set up the Xml reader to do schema validation
            XmlReaderSettings xmlReaderSettings = new XmlReaderSettings();
            xmlReaderSettings.ValidationType = ValidationType.Schema;
            xmlReaderSettings.Schemas.Add(oSchemaSet);
            anyValidationErrors = false;
            xmlReaderSettings.ValidationEventHandler += new ValidationEventHandler((object sender, ValidationEventArgs args) => {Console.WriteLine(args.Message); anyValidationErrors = true;} );

            // Load the Xml and validate against schemer
            using (XmlReader xmlReader = XmlReader.Create(xmlPath, xmlReaderSettings))
            {
                XmlDocument xmlDocument = new XmlDocument();
                xmlDocument.Load(xmlReader);

                if (anyValidationErrors) {
                    Console.WriteLine("Xml validation errors");
                    return null;
                }
                else
                    return xmlDocument;
            }
        }
    }
} 
```

有了这个 XSD

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="TEST" 
            targetNamespace="urn:test" 
            xmlns:tst="urn:test" 
            xmlns="urn:test" 
            elementFormDefault="qualified"
            xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="TestElement">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="SubEle">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="ChildEle" type="xs:unsignedInt" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

而这个 XML

```
<?xml version="1.0" encoding="utf-8" ?>
<tst:TestElement xmlns:tst="urn:test">
  <tst:SubEle>
    <tst:ChildEle>123</tst:ChildEle>
  </tst:SubEle>
</tst:TestElement> 
```

给出这个输出

```
XPathNavigator.SchemaInfo is not null
Called XPathNavigator.MoveToRoot()
XPathNavigator.LocalName after .MoveToFirstChild() succeeded = TestElement
XPathNavigator.NodeType value = Element
XPathNavigator.SchemaInfo is null 
```

有人对正在发生的事情或我做错了什么有建议吗？

谢谢戴夫

PS我说“单声道”是因为那是我正在使用的，我还不能在 Windows 上确认。此外，它的运行时版本是 .Net 4.0，发生在 Debug 和 Release 中。

*更新*我刚刚在 Windows 上尝试过这个并得到了这个结果

```
XPathNavigator.SchemaInfo is not null
Called XPathNavigator.MoveToRoot()
XPathNavigator.LocalName after .MoveToFirstChild() succeeded = TestElement
XPathNavigator.NodeType value = Element
XPathNavigator.SchemaInfo is not null
Press any key to continue . . . 
```

所以也许是 Mono 的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:43:35.477

我最终提交了一个错误 - [https://bugzilla.xamarin.com/show_bug.cgi?id=9541](https://bugzilla.xamarin.com/show_bug.cgi?id=9541)

我正在通过从 XmlSchemaSet 中的根 XmlSchemaElement 遍历并通过 XmlQualifiedName 记录所有 XmlSchemaElements 和 XmlSchemaAttributes，然后在通过 XPathNavigator 遍历 XmlDocument 时使用 XPathNavigator 中的 XmlQualifiedName 来查找 XmlSchemaElement/XmlSchemaAttribute 来解决该问题。它有点工作，但也没有，因为 XmlQualifiedName 不足以唯一地标识架构中的元素实例，例如，一个元素可以在具有不同 maxOccurs/minOccurs 值的架构中的不同位置使用。

# angularjs - Angularjs 似乎抛出了无意义的错误

> ID：14280669
> 
> 赞同：3
> 
> 时间：2013-01-11T14:55:32.797
> 
> 标签：angularjs

我在控制台中不断收到这样的错误日志：

```
ReferenceError {}      angular.min.js:60
  (anonymous function) angular.min.js:60
  (anonymous function) angular.min.js:51
  (anonymous function) angular.min.js:88
  m                    angular.min.js:6
  e.$broadcast         angular.min.js:88
  (anonymous function) angular.min.js:80
  i                    angular.min.js:76
  i                    angular.min.js:76
  (anonymous function) angular.min.js:76
  e.$eval              angular.min.js:86
  e.$digest            angular.min.js:84
  e.$apply             angular.min.js:86
  e                    angular.min.js:92
  o                    angular.min.js:95
  q.onreadystatechange angular.min.js:96 
```

我通常可以自己调试它，但是这些堆栈跟踪非常没有意义..我做错了什么还是这就是它的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:59:49.917

我引用了跟踪提供者：

```
ReferenceError {}      angular.min.js:60
  (anonymous function) angular.min.js:60
  (anonymous function) angular.min.js:51
  (anonymous function) angular.min.js:88 
```

有些事情，您的错误似乎与 $http 或 $resource 和 AJAX 有关。如果您使用匿名回调，请为其命名

例如 ：

```
$http.get("/blop")
  .success(function _successGet(){})
  .error(function _errorGet(){}) 
```

这样，您将获得有关堆栈跟踪的一些线索。而不是（匿名函数），您将获得 _successGet 或 _errorGet 的引用。

# ruby-on-rails - 如何使用 vim 脚本向规范添加/删除焦点标记？

> ID：14280670
> 
> 赞同：0
> 
> 时间：2013-01-11T14:55:44.437
> 
> 标签：ruby-on-rails, rspec, vim

你知道任何通过使用键映射来添加或删除焦点标记来帮助我的插件：`focus: true`如下所示。

```
it "has added a feed item", focus: true do
  page[ cursor ].should have_css "#activities .feed-item"
end

it "shows question title in feed" do
  within ".feed-item" do
    page.should have_content "Where is wally"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:21:09.997

`/, focus: true`你想做类似的事情`d3E`。使用该`:map`命令在按键上执行此序列非常容易：`:map <F2> /, focus: true<CR>d3E`

# c# - 在插入、查找最近的键和按键顺序迭代时需要快速的关联数组

> ID：14280671
> 
> 赞同：1
> 
> 时间：2013-01-11T14:55:50.357
> 
> 标签：c#, algorithm, associative-array

我正在执行类似于 N 维卷积的操作，但会在我继续进行时组合彼此接近的值，以节省内存和时间。

1.  我在数组中寻找一个键。
2.  如果我找到密钥，我将添加到存储在该密钥中的值。
3.  如果我没有找到密钥，我会找到下一个最高和下一个最低的密钥。
4.  如果两个邻居中的较近者足够接近，那么我会使用该键值对进行累加。
5.  否则我添加一个新的键值对。

关键是双。它总是积极的，永远不会是无限的。（我专门处理零。）我预计值的范围从几美分到高达 1000 亿。随着算法继续保持最大数组大小在 10,000 和 1,000,000 之间，舍入粗糙度将发生变化。（只有测试才能揭示速度、内存和准确性之间权衡的最佳点。）由于值的范围与数组大小的关系，直接寻址是不切实际的；我需要稀疏存储。

天真的方法是使用 List 并执行 BinarySearch 来查找键或插入点，然后从那里继续。这对于找到最近的键来说很快，可以按键顺序迭代，但是插入很糟糕。（我不需要执行删除！外循环中的每次迭代都会从头开始创建一个新列表。）

推荐什么数据结构？Wikipedia 提到了一些，例如 Trie、Judy 数组等。

（几年前我实现了一些类似 Trie 的东西，但那是在 java 中实现的，花了我一周的时间来实现，而且很棘手。我时间紧迫。）

更新：

SortedSet 的建议使我修改了我的要求。虽然找到下一个最低键和下一个最高键是我完成任务的方式，但 SortedSet.GetViewBetween 以不同的方式处理事情。因为我只是想看看是否有一个足够接近的值可以聚合，并且我有一定的舍入粒度 G，所以我可以使用

```
var possibilities = mySet.GetViewBetween(x - G, x + G) 
```

如果该集合为空，我需要添加。如果不是，它可能是一个小集合，我会遍历它。

我需要进行性能测试，看看它是否足够快。但即使没有，具有相同合约的另一个集合也是 FindNextHighestKey 和 FindNextLowestKey 的可接受替代方案。

更新 2：

我决定使用普通字典，并使用自定义舍入函数将键强制放入存储桶中。按排序顺序迭代项目并不重要，通过使用这个舍入函数，我可以找到“足够接近”的值来聚合。我不会在迭代期间更改粒度；每次完成与新维度的卷积时，我都会对其进行调整。每次迭代我都会创建一个新数组来保存该遍的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:02:50.793

如果您的密钥是唯一的，您可以查看`Dictionary<TKey,TValue>`或`SortedDictionary<TKey,TValue>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:11:52.003

我发现[了这个问题](https://stackoverflow.com/questions/3262947/is-there-a-built-in-binary-search-tree-in-net-4-0)，这让我明白了[`SortedSet<T>`](http://msdn.microsoft.com/en-us/library/dd381801.aspx)。

如果您可以处理 O(log(n)) 以进行插入、删除和查找，那么这可能是您应该保留密钥的地方。

* * *

根据您的新要求...为什么不在使用前按粒度将双精度映射到稀疏键并使用 a `Dictionary<double, T>`？如果您希望在运行时更改粒度，这将不起作用，但其他方法也不会真正起作用。

# vb.net - 这个简单的 VB.Net 类线程安全吗？如果没有，我该如何改进它？

> ID：14280672
> 
> 赞同：3
> 
> 时间：2013-01-11T14:55:49.960
> 
> 标签：vb.net, thread-safety

```
Option Strict On

Public Class UtilityClass
  Private Shared _MyVar As String

  Public Shared ReadOnly Property MyVar() As String
    Get
      If String.IsNullOrEmpty(_MyVar) Then
        _MyVar = System.Guid.NewGuid.ToString()
      End If
      Return _MyVar
    End Get
  End Property

  Public Shared Sub SaveValue(ByVal newValue As String)
    _MyVar = newValue
  End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T18:51:47.190

虽然锁定是增加线程安全性的一种很好的通用方法，但在许多涉及一次性写入准不变性的场景中，一旦将非空值写入字段就应该变得不可变，这`Threading.Interlocked.CompareExchange`可能会更好。本质上，该方法读取一个字段，并且在其他人可以触摸它之前写入一个新值，当且仅当该字段与提供的“比较”值匹配时；它返回在任何情况下读取的值。如果两个线程同时尝试 a `CompareExchange`，并且两个线程都将字段的当前值指定为“比较”值，则其中一个操作将更新该值，而另一个则不会，并且每个操作都将“知道”它是否成功。

CompareExchange 有两种主要的使用模式。第一个对于生成可变单例对象最有用，在这种情况下，每个人都看到相同的实例很重要。

```
If _thing is Nothing then
    Dim NewThing as New Thingie() ' Or construct it somehow
    Threading.Interlocked.CompareExchange(_thing, NewThing, Nothing)
End If 
```

这种模式可能就是你所追求的。请注意，如果一个线程在另一个线程执行此操作和`CompareExchange`执行`Thingie`. 如果发生这种情况，无论哪个线程首先到达 CompareExchange，都会将其新实例存储在 _thing 中，而另一个线程将放弃其实例。在这种情况下，线程不关心他们是赢还是输；_thing 里面会有一个新的实例，所有线程都会在那里看到同一个实例。还要注意，因为在第一次读取之前没有内存屏障，理论上有可能在过去某个时间检查过 _thing 值的线程可能会继续将其视为`Nothing`直到某些事情导致它更新其缓存，但如果发生这种情况，唯一的后果将是创建一个无用的新实例，然后当发现已写入的内容时，该实例`Thingie`将被丢弃。`Interlocked.CompareExchange``_thing`

另一个主要的使用模式对于更新对不可变对象的引用很有用，或者——稍作修改——更新某些值类型，如 Integer 或 Long。

```
Dim NewThing, WasThing As Thingie
Do
    WasThing = _thing
    NewThing = WasThing.WithSomeChange();
Loop While Threading.Interlocked.CompareExchange(_thing, NewThing, WasThing) IsNot WasThing 
```

在这种情况下，假设有一些方法可以通过引用 Thingie 来廉价地生成一个以某种所需方式不同的新实例，则可以以线程安全的方式对 _thing 执行任何此类操作。例如，给定一个`String`，一个人可能很容易产生一个新的`String`，它附加了一些字符。如果希望以线程安全的方式将一些文本附加到字符串（例如，如果一个线程尝试添加`Fred`而另一个线程尝试添加`Joe`，则最终结果将是追加`FredJoe`或`JoeFred`，而不是类似的东西`FrJoeed`），上面代码将读取每个线程`_thing`，生成附加文本的版本，然后尝试更新`_thing`. 如果其他一些线程更新`_thing`同时，放弃上一个构造的字符串，根据更新的字符串创建一个新字符串`_thing`，然后重试。

请注意，虽然这种方法不一定比锁定方法快，但它确实提供了一个优势：如果获取锁的线程陷入无限循环或以其他方式被阻塞，所有线程将永远被阻止访问锁定的资源。相比之下，如果`WithSomeChanges()`上面的方法陷入死循环，其他用户`_thing`不会受到影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T15:37:54.697

对于多线程代码，相关问题是：可以从多个线程修改状态吗？如果是这样，则代码不是线程安全的。

在您的代码中，情况就是这样：有几个地方发生了变异`_MyVar`，因此代码不是线程安全的。使代码线程安全的最佳方法*几乎总是*使其不可变：不可变状态在默认情况下只是线程安全的。此外，不跨线程修改状态的代码比修改多线程代码更简单且通常更有效。

不幸的是，如果没有上下文，就不可能看到您的代码是否（或如何）在多个线程中是不可变的。因此，我们需要使用速度慢、容易出错的锁（请参阅另一个答案，了解它是多么容易出错）并给人一种虚假的安全感。

以下是我尝试使用锁使代码正确。它*应该可以*工作（但请记住错误的安全感）：

```
Public Class UtilityClass
  Private Shared _MyVar As String
  Private Shared ReadOnly _LockObj As New Object()

  Public Shared ReadOnly Property MyVar() As String
    Get
      SyncLock _LockObj
        If String.IsNullOrEmpty(_MyVar) Then
          _MyVar = System.Guid.NewGuid.ToString()
        End If
        Return _MyVar
      End SyncLock
    End Get
  End Property

  Public Shared Sub SaveValue(ByVal newValue As String)
    SyncLock _lockObj
      _MyVar = newValue
    End SyncLock
  End Sub

End Class 
```

几点评论：

*   我们无法锁定，`_MyVar`因为我们*更改*了 的引用`_MyVar`，从而失去了锁定。我们需要一个单独的专用锁定对象。
*   我们需要锁定对变量的**每次**访问，或者至少锁定每次变异访问。否则所有的锁定都是徒劳的，因为它可以通过在另一个地方更改变量来撤消。
*   从理论上讲，如果我们只读取值，我们不需要锁定 - 但是，这将需要[双重检查锁定](https://en.wikipedia.org/wiki/Double-checked_locking)，这会引入更多错误的机会，所以我在这里没有这样做。
*   尽管我们不一定需要锁定读取访问（参见前两点），但我们可能仍需要在某处引入内存屏障以防止对该属性的读写访问重新排序。我不知道这什么时候会变得相关，因为规则非常复杂，这也是我不喜欢锁的另一个原因。

总而言之，更改代码设计以便一次不超过一个线程对任何给定变量具有写访问权，并通过[同步数据结构](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)将线程之间所有必要的通信限制为定义良好的通信通道，要容易得多。

# eclipse - 是否可以在不重新发布的情况下将更改应用于 JSF 文件？

> ID：14280675
> 
> 赞同：1
> 
> 时间：2013-01-11T14:56:02.613
> 
> 标签：eclipse, jsf, websphere, ibm-rad

我正在使用 IBM RAD 8.0 版并将 EAR 应用程序部署到 IBM WebSphere 7.0。每次更改 JSF 文件时，都需要重新发布应用程序，否则更改将不可见。

发布需要一些时间，所以通常至少需要一分钟我才能看到即使是最微小的变化的影响。在“正常”应用程序开发中，大约需要几秒钟，这对于不是 JSF coryphee 并且仍在学习并需要进行实验的人来说至关重要......

在使用 IBM RAD 和 WebSphere 时，是否可以使用 JSF 功能重新加载 JSF 页面定义而无需重新启动应用程序？或者我将被迫使用 Eclipse 和 Tomcat 创建第二个环境，仅用于 JSF 实验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:13:29.430

这通常在服务器配置中进行配置。*在 Eclipse 的Servers*视图中双击所需的服务器并前往*Publishing*部分。

![在此处输入图像描述](../Images/bea607fea21fc90c84d4528f2d540a10.png)

* * *

请注意，您还应该考虑 Facelet 缓存，尤其是在使用相对积极缓存的 MyFaces 时。如果您确保将`javax.faces.PROJECT_STAGE`context 参数设置为`Development`，那么 MyFaces 和 Mojarra 都会放宽 Facelet 缓存策略，导致它几乎立即重新编译 Facelet 文件，而不是在相当长的时间内使用缓存版本。

*Publishing*设置的替代方法是使用[JRebel](http://zeroturnaround.com/jrebel/)。它还能够发布托管 bean 和 EJB 等 Java 类中的更改，从而节省大量热部署时间。它也有一个[Eclipse 插件](http://zeroturnaround.com/software/jrebel/download/installing-jrebel-plugin-for-eclipse/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-11T14:13:35.117

这个线程很旧，但我仍然有同样的问题，使用 eclipse 和 WebSphere。

一个检查的地方是这个。如果您使用以 .xhtml 结尾的 JSF 文件，则必须确保这些文件中的更改不会触发自动重新发布。

1.  在“服务器”选项卡中，双击您的服务器。
2.  打开“WebSphere Application Server 的发布设置”
3.  单击“设置高级发布设置...”。
4.  在“不触发服务器发布的文件扩展名列表...”中插入或附加“，*.xhtml”。
5.  关闭这些设置并重新启动服务器。

在 web.xml 中，我还添加了一个名为 javax.faces.PROJECT_STAGE 和值 Development 的参数，这可能会对违规行为产生影响。

# ios - 同时使用 OpenAL、RemoteIO 和 AVPlayer 在播放音频时处理中断

> ID：14280678
> 
> 赞同：0
> 
> 时间：2013-01-11T14:56:17.230
> 
> 标签：ios, core-audio, avplayer, openal, remoteio

我正在开发一个需要同时使用 OpenAL、RemoteIO 和 AVPlayer 播放音频的应用程序。我还按照此处 Apple 的指南处理中断：http: [//developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html)

RemoteIO 和 AVPlayer 的播放正在正常恢复。但是，OpenAL 的播放被静音。

对于 OpenAL，我在中断结束时重置上下文，如下所示：

```
alcMakeContextCurrent (myContext); 
```

当仅发生 OpenAL 播放**或**OpenAL 播放与 RemoteIO 一起发生时，播放会正确恢复。但是，如果我同时使用 OpenAL、RemoteIO 和 AVPlayer 播放音频，则在恢复时，OpenAL 播放会静音。可能出了什么问题？

# php - 通过 PHP 表单进行 FTP 上传

> ID：14280688
> 
> 赞同：8
> 
> 时间：2013-01-11T14:56:56.110
> 
> 标签：php, ftp

我想通过 FTP 上传表单中的文件。

```
<html>
  <body>
    <form enctype="multipart/form-data" action="upload_file.php" method="POST">
      <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
      Choose a file to upload: <input name="uploadedfile" type="file" /><br />
      <input type="submit" value="Upload File" />
    </form>
  </body>
</html> 
```

这是PHP文件：

```
<?php

$ftp_server = "xxx";
$ftp_username   = "xxx";
$ftp_password   =  "xxx";

// setup of connection
$conn_id = ftp_connect($ftp_server) or die("could not connect to $ftp_server");

// login
if (@ftp_login($conn_id, $ftp_username, $ftp_password))
{
  echo "conectd as $ftp_username@$ftp_server\n";
}
else
{
  echo "could not connect as $ftp_username\n";
}

$file = $_FILES["file"]["name"];
$remote_file_path = "/home/www/lifestyle69/import/".$file;
ftp_put($conn_id, $remote_file_path, $file, FTP_ASCII);
ftp_close($conn_id);
echo "\n\nconnection closed";

?> 
```

FTP 连接成功，但文件不存在。

有谁能够帮助我？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T15:08:58.160

因为你有`<input name="uploadedfile" type="file" />`：

```
$file = $_FILES["file"]["name"]; // wrong
$file = $_FILES["uploadedfile"]["name"]; // right 
```

因为你需要PHP存储的临时副本的文件名，它存在于服务器上：

```
ftp_put($conn_id, $remote_file_path, $file, FTP_ASCII); // wrong
ftp_put($conn_id, $remote_file_path, $_FILES["uploadedfile"]["tmp_name"],
        FTP_ASCII); // right 
```

有关 $_FILES 的更多信息，请参阅[PHP 文档](http://php.net/manual/en/features.file-upload.post-method.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:58:29.177

您确定要上传到的文件夹具有正确的权限吗？尝试将其更改为 777 并查看是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:03:02.320

该文件以临时名称存储在服务器上，因此当您尝试上传时`$_FILES['file']['name']`，它会失败，因为该名称的文件不存在。相反，你应该打电话`ftp_put()`给`$_FILES['file']['tmp_name']`

[这里](http://php.net/manual/en/features.file-upload.post-method.php)解释得好一点

# ember.js - 在 DOM 底部呈现的 Ember 视图

> ID：14280696
> 
> 赞同：16
> 
> 时间：2013-01-11T14:57:16.407
> 
> 标签：ember.js, handlebars.js

我正在使用 Ember，我的视图在我的 HTML DOM 的最底部呈现，而不是在我的 div 元素内。这是我的源代码：

**索引.html：**

```
<body>
  <div id="test">
    <script type="text/x-handlebars">
      {{view Skills.RecommendedSkillsListView}}
    </script>
  </div>

  <script type="text/x-handlebars" data-template-name="recommended_skills_list">
  <a href="#" {{action "b"}}>DO A NEW THING</a>
  </script>

  <script src="js/libs/jquery-1.8.3.min.js"></script>
  <script src="js/libs/handlebars-1.0.rc.1.js"></script>
  <script src="js/libs/ember-1.0.0-pre.2.js"></script>
  <script src="js/app.js"></script>
</body> 
```

**应用程序.js：**

```
Skills = Ember.Application.create({});
Skills.RecommendedSkillsListView = Ember.View.extend({
  templateName: 'recommended_skills_list',
  b: function(v) {
      alert('new hello');
  }    
});
Skills.initialize(); 
```

**呈现的文档：**

```
<body class="ember-application">
  <div id="test"></div>

  <script src="js/libs/jquery-1.8.3.min.js"></script>
  <script src="js/libs/handlebars-1.0.rc.1.js"></script>
  <script src="js/libs/ember-1.0.0-pre.2.js"></script>
  <script src="js/app.js"></script>

  <div id="ember135" class="ember-view">
    <div id="ember140" class="ember-view">
      <a href="#" data-ember-action="1">DO A NEW THING</a>
    </div>
  </div>
</body> 
```

注意：当使用与之前版本的 ember (0.9.5) 相同的代码时，它可以按预期工作

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-11T18:22:19.550

啊，看起来它正在将您的视图“附加到”正文中，您已为 Ember 将查找的“应用程序”模板名称提供了该名称。为什么不尝试在正文中放置一个 div，然后在 Ember.Application.create(); 中引用它？

# Ember.Router

```
Skills = Ember.Application.create({
  rootElement: '#test'
}); 
```

# 看法

```
<body>
  <div id="test"></div>

  <script src="js/libs/jquery-1.8.3.min.js"></script>
  <script src="js/libs/handlebars-1.0.rc.1.js"></script>
  <script src="js/libs/ember-1.0.0-pre.2.js"></script>
  <script src="js/app.js"></script>

  <div id="ember135" class="ember-view">
    <div id="ember140" class="ember-view">
      <a href="#" data-ember-action="1">DO A NEW THING</a>
    </div>
  </div>
</body> 
```

如果我错过了重点，请告诉我；）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T19:15:48.210

您需要指定元素以使用应用程序的`rootElement`（[此处的文档](http://emberjs.com/api/classes/Ember.Application.html#property_rootElement)，相关问题：[Emberjs rootElement](https://stackoverflow.com/questions/11399577/emberjs-rootelement)）属性来呈现您的应用程序：

```
Skills = Ember.Application.create({
    rootElement: "#test"
}); 
```

这是一个工作示例：[jsfiddle example](http://jsfiddle.net/cteegarden/6p6XJ/321/)

**示例的渲染输出：**

```
<body>
  <div id="test" class="ember-application">
    <div id="ember135" class="ember-view">
      <div id="ember140" class="ember-view">
        <a href="#" data-ember-action="1">DO A NEW THING</a>
      </div>
    </div>
  </div>
</body> 
```

# c++ - 将指向派生类的指针传递给需要指向基类的指针的函数？

> ID：14280698
> 
> 赞同：1
> 
> 时间：2013-01-11T14:57:23.910
> 
> 标签：c++, pointers, reference, polymorphism, virtual

好的。我不太擅长 C++ 中的多态性，但我现在遇到了问题。想象一下这些类：

```
class Parent {
public:
     Parent();
     virtual ~Parent();
};

class Child : public Parent
{
public:
     Child();
};

class Director
public:
     Director();
     void doStuff(Parent* p);
};

// Assume we have a instance of Director, and call the doStuff function here:
doStuff(new Child()); // Gives error 
```

我得到错误

> 无法将参数 1 从“子 *”转换为“父 *”

我的简单问题是，为什么这不起作用？我需要做任何类型的演员或什么，或者是什么问题？

**编辑：** 我把我所有的文件都放在这里。我认为问题在于我的包含，因为我真的不知道应该如何使用#ifndef 等来完成。请检查一下。
Director.h：[http](http://pastebin.com/2uJqezju)
://pastebin.com/2uJqezju Director.cpp：[http](http://pastebin.com/SZ6cuBJC)
://pastebin.com/SZ6cuBJC IApp.h：[http ://pastebin.com/euCAwpnL IApp.cpp：](http://pastebin.com/euCAwpnL) [http](http://pastebin.com/JHDuQUhW)
: //pastebin.com [/JHDuQUhW IScene](http://pastebin.com/JHDuQUhW)
：h：[http](http://pastebin.com/cweH9G6p)
://pastebin.com/cweH9G6p IScene.cpp：[http ://pastebin.com/9epW0dRA](http://pastebin.com/9epW0dRA)

然后我创建了它的一些实例：
GameApp.h (inherits EDGE::IApp): [http://pastebin.com/QbjbVqSi](http://pastebin.com/QbjbVqSi)
GameApp.cpp: [http://pastebin.com/sYJvmbeP](http://pastebin.com/sYJvmbeP)
GameScene.h (inherits EDGE:: IScene）：[http](http://pastebin.com/K1WYNvRf)
: //pastebin.com/K1WYNvRf GameScene.cpp：[http ://pastebin.com/uJx3FLBW](http://pastebin.com/uJx3FLBW)

不要害怕检查它们，它们每个都有大约 10 行代码。但问题出在 GameApp.cpp 中，我在其中尝试创建 GameScene 的实例，并将其传递给 Director->createNewScene(IScene* scene)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:32:58.837

导演.h：

```
class IScene; 
```

应该在命名空间内

# django - 在 django-tables2 中禁用分页？

> ID：14280699
> 
> 赞同：12
> 
> 时间：2013-01-11T14:57:24.890
> 
> 标签：django-tables2, django, tags, django-tables2

在[django-tables2](/questions/tagged/django-tables2 "显示标记为“django-tables2”的问题")中，我有一个不想分页的表格。我没有指定分页，如文档中所示：

```
table.paginate(page=request.GET.get('page', 1), per_page=25) 
```

表格仍然分页，大概是默认情况下。类`RequestConfig`文档字符串说要为分页传递一个错误值以禁用分页，但我对此很模糊。以下是我在视图类中尝试过的选项：

```
my_table.paginate = False
RequestConfig(request).configure(my_table, paginate=False)
RequestConfig(request).configure(my_table).paginate(False)
RequestConfig(request).configure(my_table, {table.paginate:False})
RequestConfig(request).configure(my_table, {paginate:False})
RequestConfig(request).configure(my_table, {"paginate":False}) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T19:33:32.773

你想做：

```
RequestConfig(request, paginate=False).configure(my_table) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T14:20:21.463

如果您正在使用基于类的 Django 视图，只需覆盖视图类中的 get_table_pagination 方法和表类中的 get_caption_display 方法：

```
class YourView(SingleTableMixin, generic.TemplateView):
    def get_table_pagination(self):
        return False 
```

在你的餐桌课上，

```
class YourTable(Table):
    def get_caption_display(self):
        return False 
```

# clojure - 如何在 Clojure 中验证重构？

> ID：14280703
> 
> 赞同：1
> 
> 时间：2013-01-11T14:57:34.640
> 
> 标签：clojure

[我在enlive](https://github.com/cgrand/enlive)中找到了以下代码：

```
net.cgrand.enlive-html=> (source node-selector?)
(defn node-selector? [selector]
  (not (fragment-selector? selector))) 
```

并考虑将其重构为以下代码：

```
(def node-selector? (complement fragment-selector?)) 
```

如何验证重构的完整性，以便通过更改正确处理所有案例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T15:09:02.350

*咳嗽*测试*咳嗽*并努力思考。您必须确保参数和结果域没有改变（处理真实值时要特别小心）。在这种情况下，更改似乎无害，但您会丢失一些东西：doc 不再记录 arglist。另一个微妙的后果：当你重新定义片段选择器？，节点选择器？仍然是指旧的片段选择器？

# asp.net - 将 ExcelPackage 文件发送给用户

> ID：14280705
> 
> 赞同：2
> 
> 时间：2013-01-11T14:57:36.863
> 
> 标签：asp.net, excel, file

我想`ExcelPackage`在服务器端构建文件，然后发送允许用户下载它。这是我的文件创建代码：

```
private byte[] ExcelFileCreate()
        {
            using (var excelPackage = new ExcelPackage())
            {
                excelPackage.Workbook.Properties.Author = User.Identity.Name;
                excelPackage.Workbook.Properties.Title = "Skybot";
                excelPackage.Workbook.Properties.Company = "Dataminds";

                excelPackage.Workbook.Worksheets.Add("Selected unit folder");
                var excelWorksheet = excelPackage.Workbook.Worksheets[1];
                excelWorksheet.Name = "Selected unit folder";

                int rowIndex = 1;
                int columnIndex = 1;

                do
                {
                    var cell = excelWorksheet.Cells[rowIndex, columnIndex];
                    var fill = cell.Style.Fill;
                    fill.PatternType = ExcelFillStyle.Solid;
                    fill.BackgroundColor.SetColor(Color.LightGray);
                    columnIndex++;
                } while (columnIndex != 4);

                excelWorksheet.Cells[1, 1].Value = "action cell";
                excelWorksheet.Cells[1, 2].Value = "time cell";
                excelWorksheet.Cells[1, 3].Value = "processor cell";
                excelWorksheet.Cells[2, 1].Value = "action cell";
                excelWorksheet.Cells[2, 2].Value = "time cell";
                excelWorksheet.Cells[2, 3].Value = "processor cell";

                return excelPackage.GetAsByteArray();
            }
        } 
```

并将其发送给您的用户：

变体1：

```
private void FileTransfer(byte[] fileBytes)
        {
            //Clear the response               
            Response.Clear();
            Response.ClearContent();
            Response.ClearHeaders();
            Response.Cookies.Clear();
            //Add the header & other information      
            Response.Cache.SetCacheability(HttpCacheability.Private);
            Response.CacheControl = "private";
            Response.Charset = System.Text.UTF8Encoding.UTF8.WebName;
            Response.ContentEncoding = System.Text.UTF8Encoding.UTF8;
            Response.AppendHeader("Content-Length", fileBytes.Length.ToString());
            Response.AppendHeader("Pragma", "cache");
            Response.AppendHeader("Expires", "60");
            Response.AppendHeader("Content-Disposition",
            "attachment; " +
            "filename=\"ExcelReport.xlsx\"; " +
            "size=" + fileBytes.Length.ToString() + "; " +
            "creation-date=" + DateTime.Now.ToString("R") + "; " +
            "modification-date=" + DateTime.Now.ToString("R") + "; " +
            "read-date=" + DateTime.Now.ToString("R"));
            Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
            //Write it back to the client    
            Response.BinaryWrite(fileBytes);
            Response.End();

            Response.ContentType = "application/vnd.ms-excel";
            Response.AppendHeader("content-disposition", "attachment;filename=test.xlsx");
            Response.BinaryWrite(fileBytes);
            Response.End();
        } 
```

变体 2：

```
 Response.ContentType = "application/vnd.ms-excel";
    Response.AppendHeader("content-disposition", "attachment;filename=test.xlsx");
    Response.BinaryWrite(fileBytes);
    Response.End(); 
```

变体 3：

```
 Response.ContentType = "application/vnd.ms-excel";
    Response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}", fileBytes));

    Response.AppendHeader("Content-Length", fileBytes.Length.ToString());
    Response.BinaryWrite(fileBytes);
    Response.End(); 
```

而且它们都不起作用。没有建议存储/打开文件的弹出窗口。

应该使它工作的事件处理程序：

```
protected void TreeViewUnit_OnContextMenuItemClick(object sender, 
      RadTreeViewContextMenuEventArgs eventArgs)
{
    FileTransfer(ExcelFileCreate());
} 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:02:47.650

尝试

```
Response.Clear();
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment; filename=ExcelReport.xlsx");
Response.BinaryWrite(fileBytes);
Response.End(); 
```

它对我有用，如此[处所示](https://stackoverflow.com/a/9574414/284240)。

# javascript - 打字稿与 Marionette.js

> ID：14280711
> 
> 赞同：2
> 
> 时间：2013-01-11T14:57:55.790
> 
> 标签：javascript, backbone.js, typescript, marionette

我最近发现了 Typescript。来自 OOP C# 背景，我发现 Javascript 很难使用，并且自然对 Typescript 感到兴奋。

我目前在我的应用程序中使用 Backbone.Marionette.js 来管理未来的复杂性（未来因为它仍处于早期阶段，还没有那么复杂）。

现在我明白了，即使我使用 Typescript，Backbone.js 仍有空间在我的应用程序中发挥重要作用，但是我越了解 Typescript（并开始喜欢它），我就越开始认为它的目标是管理企业应用程序的复杂性与 Marionette 试图完成的任务重叠太多。我知道他们以两种完全不同的方式做到这一点，但来自 C# 我当然更喜欢 OOP 方法而不是另一个 JS 插件。

我考虑从我的申请中逐步淘汰 Marionette 是否合理，或者重叠程度是否比我想象的要少？请记住，我对所有 3 Backbone、TypeScript 和 Marionette 都是新手，这是我在其中使用它们的第一个应用程序，这让我很难评估这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T20:06:15.987

“TypeScript vs Marionette”是错误的观点。这就像“C# vs WinForms”，并询问“当我从 C# 切换到 VB.NET 时是否应该停止使用 WinForms？” 这个问题没有任何意义，因为它试图将语言与框架进行比较。

There are some things that [TypeScript will prevent you from doing with Marionette](https://stackoverflow.com/questions/13075487/how-do-i-tell-typescript-about-dynamic-addition-of-properties) or any other JavaScript framework that takes advantage of JavaScript being dynamic. But that doesn't mean TypeScript replaces Marionette or any other framework. It only limits the usefulness of the framework due to restrictions that TypeScript places on you.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T15:32:43.143

我的回答将基于以下考虑。

首先，您使用的是 Marionette 的哪些部分？如果只是模块加载，则不需要它。如果您使用大量模板和事件，它可能仍然有用。如果您还不确定您可能会使用哪些部件，请在您有令人信服的理由使用它之前不要使用它。

其次，在你需要做出决定之前，你能写多少？例如，如果您今天开始编码，您可以推迟多长时间做出决定。您等待的时间越长，您将获得更多信息来帮助您做出正确的选择。如果你写的是普通的 TypeScript，你可以等到你真正需要引入一个框架或工具包，然后选择一个能解决你真正问题的。

所以真的，我的答案是没有它开始，等到你有问题要解决，然后再选择如何解决它。

# java - java中的关联和哈希图

> ID：14280712
> 
> 赞同：0
> 
> 时间：2013-01-11T14:58:09.487
> 
> 标签：java, hashmap

我有4节课。一个持有有关客户的信息。另一个关于订单。还有2个类扮演注册中心的角色，一个是客户注册中心，一个是订单注册中心。

订单注册表有一个哈希图，如下所示：

```
private HashMap<Integer, Order> orderRegistryMap = new HashMap<>(); 
```

客户登记也是如此。

```
private HashMap<Integer, Customer> customersRegistryMap = new HashMap<>(); 
```

类 orders 有一个 int orderid。类客户有一个 int customerid。我通过两个注册表添加了演示数据（假设 1 个客户的 customerid 为 100，一个订单的 orderid 为 500。

我编写了简单的方法来通过 orderid 搜索订单或获取所有订单的哈希图。我还编写了简单的方法来通过 customerid 搜索客户或获取所有客户的哈希图。

我需要帮助编写一种方法，该方法可以通过 orderid 找到客户并获取与该 customerid 关联的所有订单。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:03:29.750

处理这种关系的典型方法（这似乎是一对多的关系）是将客户 ID 存储在订单本身中。这样做是因为每个订单只有一个客户。如果你不这样做，你别无选择，只能遍历数组。

编辑：对于反向关系 Customer->Orders 我会使用反向注册表，例如：

```
HashMap<Integer/*customer_id*/, 
        List<Integer> /*list of orders for the customer*/> customer_orders; 
```

并与订单和客户保持同步。这将尽可能快地执行，我认为你不能使用更少的内存来实现你想要的。

# c# - 如何在 ASP .NET MVC 中仅验证模型的一部分？

> ID：14280714
> 
> 赞同：23
> 
> 时间：2013-01-11T14:58:12.440
> 
> 标签：c#, asp.net-mvc, model-view-controller, model

我有一个大模型（大我的意思是模型类包含很多字段/属性，每个都至少有一个验证属性（例如`Required`,`MaxLength`等`MinLength`））。我不想创建一个包含大量输入的视图来让用户用数据填充模型，我想创建几个视图，用户将在其中填充部分模型字段并进入下一步（某种*“向导”*）。在步骤之间重定向时，我将未填充的模型对象存储在`Session`. 如下所示：

模型：

```
public class ModelClass
{
    [MaxLength(100)] ...
    public string Prop1{get;set;}
    [MaxLength(100)] ...
    public string Prop2{get;set;}
    ...
    [Required][MaxLength(100)] ...
    public string Prop20{get;set;}
} 
```

控制器：

```
[HttpPost]
public ActionResult Step1(ModelClass postedModel)
{    
    // user posts only for example Prop1 and Prop2
    // so while submit I have completly emty model object
    // but with filled Prop1 and Prop2
    // I pass those two values to Session["model"]
    var originalModel = Session["model"] as ModelClass ?? new ModelClass();
    originalModel.Prop1 = postedModel.Prop1;
    originalModel.Prop2 = postedModel.Prop2;
    Session["model"] = originalModel;

    // and return next step view
    return View("Step2");
}

[HttpPost]
public ActionResult Step2(ModelClass postedModel)
{
    // Analogically the same
    // I have posted only Prop3 and Prop4

    var originalModel = Session["model"] as ModelClass;
    if (originalModel!=null)
    {
        originalModel.Prop3 = postedModel.Prop3;
        originalModel.Prop4 = postedModel.Prop4;
        Session["model"] = originalModel;

        // return next step view
        return View("Step3");
    }
    return View("SomeErrorViewIfSessionBrokesSomeHow")
} 
```

`Step1`视图只有`Prop1`and的输入`Prop2`，Step2 视图包含 and 的输入`Prop3`等`Prop4`。

**但事情是这样的**

例如，当用户打开时，步骤 1 并用长度超过 100 个字符的值填充 Prop1 客户端验证工作正常。但是，当然，我必须在控制器的服务器端验证这个值。如果我有完整的模型，我只需执行以下操作：

```
if(!ModelState.IsValid) return View("the same view with the same model object"); 
```

所以用户必须再次填写表格并更正。 **但是**在第 1 步用户只填写了 20 个属性，我需要验证它们。我不能使用`ModelState.IsValid`，因为模型状态将无效。如您所见`Prop20`，标记为`[Required]`属性，当用户提交时`Prop1`，`Prop2`为`Prop20`空，这`ModelState`就是无效的原因。当然，我可以允许用户进入第 2 步，填写所有步骤并仅在最后一步验证模型状态，但我不想让用户进入第 2 步，如果他填写的第 1 步不正确。我希望在控制器中进行此验证。*所以问题是：* **我怎样才能只验证模型的一部分？如何验证只有部分模型属性与它们的验证属性匹配？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T15:32:55.063

一种可能的解决方案：

1.  使用 ModelState.IsValidField(string key);

    ```
    if (ModelState.IsValidField("Name") && ModelState.IsValidField("Address"))
    { ... } 
    ```

然后在一切完成后使用：

```
if(ModelState.IsValid) { .. } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T15:44:47.273

我认为最优雅的方法是这样做：

```
List<string> PropertyNames = new List<string>()
{
    "Prop1",
    "Prop2"
};

if (PropertyNames.Any(p => !ModelState.IsValidField(p)))
{
    // Error
}
else
{
    // Everything is okay
} 
```

或者：

```
List<string> PropertyNames = new List<string>()
{
    "Prop1",
    "Prop2"
};

if (PropertyNames.All(p => ModelState.IsValidField(p)))
{
    // Everything is okay
}
else
{
    // Error
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-08T14:40:19.180

在 MVC Core 中，这将相当于：

```
if (ModelState.GetFieldValidationState("Name") == Microsoft.AspNetCore.Mvc.ModelBinding.ModelValidationState.Valid)
{
    // do something
} 
```

但是，我建议在这种情况下简单地**创建一个单独的视图模型。**

您的局部视图模型可以由您的较大视图模型继承，因此您不必在代码中重复自己（DRY 主体）。

最好避免对属性名称进行硬编码！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-20T13:57:34.337

只是为了添加到现有的答案。我不会硬编码属性名称，而是使用一个属性与其余的验证属性一起添加，如下所示：

```
public class ValidationStageAttribute : Attribute
{
    public int StageNumber { get; private set; }
    public ValidationStageAttribute(int stageNumber)
    {
        StageNumber = stageNumber;
    }
} 
```

现在我们可以在不了解模型本身的情况下获取属性名称，可以将部分验证提取到方法中（如果您经常使用它，您的基本控制器将是一个好地方）。

```
protected bool ValidateStage(object viewModel, int stageToValidate)
{
    var propertiesForStage = viewModel.GetType()
        .GetProperties()
        .Where(prop => prop.GetCustomAttributes(false).OfType<ValidationStageAttribute>().Any(attr => attr.StageNumber == stageToValidate))
        .Select(prop => prop.Name);

    return propertiesForStage.All(p => ModelState.IsValidField(p));
} 
```

现在，您在发布操作中需要做的就是致电`ValidateStage(viewModel, 1)`

# ruby-on-rails - 未定义的常量 Rails 4

> ID：14280715
> 
> 赞同：0
> 
> 时间：2013-01-11T14:58:14.503
> 
> 标签：ruby-on-rails, controller, crud, scaffold, ruby-on-rails-4

通过复制并尝试在 Rails 4 中手动修改脚手架，当我想删除文章时出现错误：`uninitialized constant Article::Tag`. 我想编辑文章时的另一个错误：“未定义的局部变量或方法 `article_params'”。

我不知道它来自哪里，显示的突出显示的错误是`@article.destroy` if `@article.update(article_params)`。考虑到我认为完美地复制了脚手架，我完全不明白......

```
def destroy
  @article.destroy
  respond_to do |format|
    format.html { redirect_to articles_url }
    format.json { head :no_content }
  end
end

def update
  respond_to do |format|
    if @article.update(article_params)
      format.html { redirect_to @article, notice: 'Article was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: 'edit' }
      format.json { render json: @article.errors, status: :unprocessable_entity }
    end
  end
end 
```

谢谢你的帮助

# c - arp_send：target_hw 和 dest_hw 有什么区别？

> ID：14280719
> 
> 赞同：1
> 
> 时间：2013-01-11T14:58:26.350
> 
> 标签：c, linux-kernel, network-programming, mac-address, arp

我正在尝试从内核中生成 arp 请求，但我不明白“目标 MAC 地址”和“目标 MAC 地址”之间的区别。我正在使用的内核函数是这个：

```
void arp_send(int type, int ptype, __be32 dest_ip,
          struct net_device *dev, __be32 src_ip,
          const unsigned char *dest_hw, const unsigned char *src_hw,
          const unsigned char *target_hw) 
```

有谁知道'target_hw'（目标MAC地址）和'dst_hw'（目标MAC地址）之间的区别？对我来说，它们应该是一样的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:41:50.120

arp_send 函数是一个通用函数，用于发送 ARP 请求和响应。

在您的情况下（ARP 请求）`target_hw`是您想要了解的信息，因此可以忽略此字段（设置为 NULL，请参阅[RFC826](https://www.rfc-editor.org/rfc/rfc826)示例） `dest_hw`也将为 NULL - 这将导致使用广播地址（请参阅[arp_create 注释](http://lxr.free-electrons.com/source/net/ipv4/arp.c#L575)）

我在这里假设 IPv4 over Ethernet。对于其他第 2/3 层协议，它可能看起来不同。

# batch-file - 从 VB 脚本运行批处理文件时出错

> ID：14280720
> 
> 赞同：0
> 
> 时间：2013-01-11T14:58:27.427
> 
> 标签：batch-file, vbscript, admin-rights

`VB scripting`对我来说完全陌生，但今天降落在一个情况下写一个小。我需要管理员权限才能运行我的`.bat`文件。因此，如果没有管理员权限，我将尝试提升为管理员权限。在 SO 和 Google 的帮助下，我达到了：

```
Function Length()

Set WshShell = WScript.CreateObject("WScript.Shell") 
If WScript.Arguments.length = 0 Then 
    Set ObjShell = CreateObject("Shell.Application") 
    ObjShell.ShellExecute "wscript.exe", """" & WScript.ScriptFullName & """" & " RunAsAdministrator", , "runas", 1 
Else
    Dim shell
    set shell=createobject("wscript.shell")
    shell.run "ExtractFiles.bat"
End If

End Function

Length 
```

在这里，这`.vbs`和`ExtractFiles.bat`保存在同一个文件夹中。我打开了 2 个命令提示符。一个处于管理员模式，另一个正常。在管理员模式下通过命令提示符运行此脚本时，我得到了成功。但是在正常模式下，首先我会看到一个切换到管理员模式的窗口，然后按下`Yes`它。然后我得到以下错误：

![在此处输入图像描述](../Images/9f4b0d5991df4298b272d92b1ec84853.png)

谁能指出我正确的代码。我遇到错误`shell.run "ExtractFiles.bat"`。请帮忙！

正如我也提到的要求，也欢迎采用不同的方法。在这个问题中，我不确定如何在管理员模式下运行 bat 文件并在正常模式下失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:33:15.887

你在命令提示符下输入了什么？是吗...

```
InstallACS.vbs ExtractFiles.bat 
```

您的脚本在 XP x64 上运行得很好（如果这很重要），不管我将如何运行它 - 从销售或控制台运行，也可以使用和不使用参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:41:27.137

根据您启动 VBScript 的方式，脚本所在的目录不一定是工作目录。尝试这个：

```
Set fso = CreateObject("Scripting.FileSystemObject")
scriptDir = fso.GetParentFolderName(WScript.ScriptFullName)
shell.run "%COMSPEC% /c """ & fso.BuildPath(scriptDir, "ExtractFiles.bat") & """" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:02:32.320

将 Admin VBS 代码添加到您的 bat 文件中。这是我的日常工作。

```
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:Admin <Return> [Needed] [Success]
:: Check for Administrator privileges and request privileges if Needed 'true'.
:::: Usage: call :Admin xReturn true
:: Return success value, if user is Admin. Default `true` if Success not set.
setlocal
set "xVBUAC=%Temp%\AdminUAC.vbs"
set "xSuccess=true"
set "xAdmin=false"
if not "%~3"=="" set "xSuccess=%~3"

:: Check for Access
::net session >nul 2>&1
>nul 2>&1 "%SystemRoot%\system32\cacls.exe" "%SystemRoot%\system32\config\system"
if %ErrorLevel% EQU 0 set "xAdmin=%xSuccess%"

:: Execute UAC
if /i not "%xAdmin%"=="%xSuccess%" if not "%~2"=="" if /i "%~2"=="true" (
    echo Set UAC = CreateObject^("Shell.Application"^) > "%xVBUAC%"
    echo UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%xVBUAC%"
    if exist "%xVBUAC%" (
        "%xVBUAC%"
        rem if %ErrorLevel% EQU 5 echo Access Denied. Launching UAC.
        del "%xVBUAC%"
    )
)
endlocal & if not "%~1"=="" set "%~1=%xAdmin%"
goto :eof 
```

如何使用它

```
:: Example Admin check

@echo off
setlocal EnableExtensions

call :Admin xReturn true 1
if not "%xReturn%"=="1" goto End

:: Do my .bat stuff here.

goto End

:: TODO Place the admin function here.

:End 
```

# ruby-on-rails - Redis 中缓存的最佳 expire_in 值

> ID：14280724
> 
> 赞同：1
> 
> 时间：2013-01-11T14:58:35.370
> 
> 标签：ruby-on-rails, caching, redis

我想`gem "redis-store"`在我的 Rails 应用程序中用作缓存存储。与 memcached 不同，redis 不会清理未使用的键，但我可以`EXPIRE`在每个键上使用命令（通过`:expire_in`选项）来限制每个键的生命周期。

然后我想使用`cache_key`我的模型（包括`id`and `updated_at`）作为 redis 键的一部分，用于缓存。因此，当模型更新时，将创建新的缓存键，而旧的将永远不会被使用。

那么问题来了，选择哪个过期时间呢？如果设置得太小，它会消除缓存的好处，如果太长 - 它会用未使用的数据填充 redis，这会（可能）降低性能。中庸之道在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:31:44.920

我建议使用 Redis 的 LRU 过期策略，让 Redis 自己过期最近最少使用的密钥。这样，您就不必担心自己的密钥过期了。

按照您的建议使用模型的 cache_key 确实会在模型更改时生成一个新密钥。您的视图将不再使用该模型的“旧”键，Redis 最终将使它们过期。

有关如何将 Redis 配置为 LRU 存储的信息，请参阅[http://redis.io/topics/config 。](http://redis.io/topics/config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:17:17.080

当然这取决于应用程序吗？如果它是一个非常昂贵的页面，您希望尽可能少地重新计算它，但如果它快速变化，您就别无选择。

我会亲自实验。选择一些数字，看看它们如何影响性能。一开始就犯错（信任您的数据库，在本例中为 Redis），然后在遇到问题时对其进行调整。

# facebook - 找不到搜索“X or Y AND Z”的方法

> ID：14280729
> 
> 赞同：0
> 
> 时间：2013-01-11T14:58:49.827
> 
> 标签：facebook, facebook-graph-api

我正在使用 facebook graph api 搜索帖子。我找不到应在 URL 中形成查询的格式。

例如：我要搜索“X or Y AND Z”

[https://graph.facebook.com/search?q=X](https://graph.facebook.com/search?q=X) | Y AND Z&type=post

我在上面尝试过，但没有得到正确的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:02:05.667

您只需对您的请求进行 url 编码：

```
https://graph.facebook.com/search?q=X%20|%20Y%20AND%20Z&type=post 
```

# forms - 在后台刷新 vb6 表单而不会丢失用户输入的数据

> ID：14280731
> 
> 赞同：1
> 
> 时间：2013-01-11T14:59:05.567
> 
> 标签：forms, vb6, refresh

我正在使用一些旧的 VB6 代码并且有一个我正在尝试纠正的场景。我有一个表格，允许您输入个人 ID（在顶部的文本框中使用租户），然后单击“显示”，它会在同一表格的文本框中列出约会。还有一个按钮可以加载一个新表单，允许用户编辑显示的数据并保存更改。

例如，将人的年龄从 65 岁更改为 64 岁。我进行此更改并保存它。保存成功，我卸载表单返回Form1。但是，我必须再次单击“显示”以刷新文本框中显示的数据，以确保更改可见。我不知道如何刷新此表单，因此用户不必单击“显示”即可使用新值重新填充文本框。有人可以帮忙吗？我不能只创建 Form1 的新实例，因为如果我这样做了，则人员 ID 字段将是空白的。

谢谢！

简短版：如何刷新表单以获取最新数据，同时仍获取相关人员 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:06:56.983

这里没有足够的信息来回答你的问题。您在这种情况下使用的一般模式如下：

1.  SearchForm 启动 ViewForm。
2.  ViewForm 启动 EditForm。当 ViewForm 构造它的 EditForm 实例时，它会传递`Me`给 EditForm（可能通过设置 EditForm.Parent）。
3.  当 EditForm 的 Save 按钮单击事件触发时，它调用 Parent.ReloadData（其中 Parent 是启动 EditForm 的 ViewForm）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:54:30.203

这是应该有效的方法。在编辑器中有一个公共属性，它返回表单是否被取消。（。取消）。您将拥有一个对象，该对象带有您尝试更改其年龄的人的属性。然后就很简单了。主窗体中的代码：

```
dim oPerson as clsPerson
dim oFrm as frmAgeEditor

set oPerson = GetCurrentPerson()
set oFrm = new frmAgeEditor

with oFrm
    set .Person = oPerson
    .Show vbModal

    if not .Cancelled then
        ' Update Main form with the contents of oPerson

    end if

end with 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:57:06.953

您可以在更新后立即调用“显示”功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:45:00.183

```
Call Me.frmParent.Refresh 
```

我用它来刷新屏幕而不会丢失数据。我不得不挖掘很多旧代码才能弄清楚。这部分是很久以前写的，效果很好。

```
Public Sub Refresh()
Call cmdDetails_Click
If tvwScreeningSchedule.Nodes.Count > 0 Then
    tvwScreeningSchedule.SelectedItem = tvwScreeningSchedule.Nodes(1)
    Call tvwScreeningSchedule_Click
End If

End Sub 
```

这是一个非常具体的功能，“cmdDetails_Click”包含很多自定义验证，但它与 AngryHackers 的答案并不太相似。

# android - 许多布局的android保存状态

> ID：14280735
> 
> 赞同：0
> 
> 时间：2013-01-11T14:59:26.863
> 
> 标签：android, android-layout, android-activity

我有一个简单的聊天应用程序，其中为每条消息创建了一个具有多个视图的 RelativeLayout。活动停止或销毁后，我添加的所有布局都从父级中消失，因此所有消息都消失了。

当然，我可以将每个视图的 ID（连同其他值）放入 SharedPreferences 对象或数据库中，以在重新创建活动后恢复所有消息。但是有没有更简单的方法来保存动态创建的布局。 ? 父级由 XML 定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:04:26.557

当 a `Activity`（或 a `Fragment`）变得不可见时 - 它的`View`层次结构被破坏了，你无法克服它。事实上，你也不需要。解决方案是将消息存储在数据库中，并在启动时根据数据库内容重新创建`View`层次结构。`Activity`无需在这里重新发明轮子。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:15:17.433

将您的消息集合放在 OnSaveInstanceState() 的 Bundle savedInstanceState 中，然后在您的 onCreate() 中恢复它们。

# c++ - 从原生 iOS C 代码访问所有环境变量

> ID：14280740
> 
> 赞同：2
> 
> 时间：2013-01-11T14:59:35.517
> 
> 标签：c++, ios, c, environment-variables

我必须将用 C 和 C++ 编写的现有代码移植到 iOS。

此代码在某些时候使用该[`environ`](http://linux.die.net/man/5/environ)变量来访问所有环境变量。

使用 iOS 编译器工具链编译此代码时，它会抱怨`environ`不是已定义的符号。我找不到任何可以提供它的标题或任何合适的替代方法。

不幸的是，`environ`用于获取**所有**环境变量并将它们传递给子例程。也就是说，这`getenv()`不是一个选项，因为我们不知道要检查哪些环境变量。

有没有在 C 或 C++ 代码中使用 iOS 编译器工具链访问`environ`变量的方法？或者您知道任何替代解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:18:35.627

该`environ`变量必须在用户程序中的 C 代码中声明。所以在访问之前像这样声明它：

```
extern char **environ; 
```

您可能还会发现[这篇](http://chaosinmotion.com/blog/?p=829)关于 iOS 环境的文章很有帮助（它也有一个示例项目）。

# coldfusion - 在表单内设置表单变量（coldfusion）

> ID：14280744
> 
> 赞同：3
> 
> 时间：2013-01-11T14:59:44.847
> 
> 标签：coldfusion, coldfusion-9

我正在尝试在表单内手动设置一个变量，因为它包含 html 并将其放在标签的 value 属性中会导致显示错误。目前，我检查该属性是否包含 html，如果是，则该字段为空。

如果它在表单的先前条目中包含 html，我希望能够将变量设置为旧值，这样用户每次加载该 ORM 对象进行编辑时就不必输入该字段。

这是一个片段：

```
<cfif ("#dataobject.getField()#" NEQ "" AND Left(dataobject.getField(), 1) EQ "<")>
<cfscript>
    temp = dataobject.getField();
    temp2=temp;
    temp2 = Insert("---", temp2, 0);
    temp2 = Insert("<!", temp2, 0);
    temp2 = Insert("--->", temp2, Len(temp2));
    dataobject.setField(temp2);                             
</cfscript>

<label for="name">
    Field:
</label>
<input type="text" name="Field" value="">
<button id="savefield" name="savefield">Save</button>
<cfif form.Field EQ ""><cfset form.Field = temp></cfif>
<cfscript>
    dataobject.setField(temp);
</cfscript>

<cfelse>
<label for="name">
    Field:
</label>
<input type="text" name="Field" <cfif ("#dataobject.getField()#" NEQ "")>value="#dataobject.getField()#"</cfif>>
<button id="savefield" name="savefield">Save</button>
</cfif> 
```

我试图使用的代码： `<cfif form.Field EQ ""><cfset form.Field = temp></cfif>`

Coldfusion 抛出一个错误，指出 FORM 变量未定义（这并不让我感到惊讶）。“保存字段”按钮调用 javascript 打开一个允许用户设置值的窗口，然后关闭。我应该把我的代码放在那里吗？

- 将字符串转换为注释的插入是对无效解决方法的早期尝试：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:18:47.300

好的，希望以下指针可以帮助您：

*   验证该字段是否存在于表单中；structKeyExists(form, "field") 或使用 cfparam 初始化默认值
*   使用 HTMLEditFormat(dataObject.getField()) 转义值以转义任何破坏 html 的 HTML 代码

所以例如；

```
<cfparam name="form.field" default="" />

<label for="field">
    Field:
</label>
<input type="text" id="field" name="field" value="#htmlEditFormat(form.field)#" />
<button id="savefield" name="savefield">Save</button> 
```

格！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:29:45.243

如果你想强制一个值进入表单（或任何）范围，你需要在使用它之前使用[cfparam 。](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7faf.html)

```
<cfparam name = "form.field" default = "">
<cfif form.Field EQ "">
  <cfset form.Field = temp>
</cfif> 
```

本质上，这与

```
<cfif !structKeyExists(form,"field")>
  <cfset form.field = "">
</cfif> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T18:44:17.450

不要忘记 preservedata 是您的朋友。如果您提前填充表单字段，则不必担心 value="" 属性。

```
<cfquery name="qry">
SELECT Field1,Field2
FROM table
WHERE ID=<cfqueryparam cfsqltype="cf_sql_integer" value="#url.ID#">
</cfquery>

<cfloop list="#qry.Columnlist#" index="FieldName">
    <cfset form[FieldName] = HTMLEditFormat(qry[FieldName][1])>
</cfloop>

<cfform preservedata="yes">
    <label for="Field1">Field One:</label>
    <cfinput name="Field1">
    <label for="Field2">Field Two:</label>
    <cfinput name="Field2">
</cfform> 
```

# c# - C# AES 函数未返回预期结果

> ID：14280748
> 
> 赞同：1
> 
> 时间：2013-01-11T15:00:05.543
> 
> 标签：c#, encryption, aes

我正在使用此函数使用 AES 加密/解密数据，因为它看起来简单干净（谷歌代码）

```
public static string Encrypt(string toEncrypt)
    {
        byte[] keyArray = UTF8Encoding.UTF8.GetBytes("3a8114db34d5623d4fd1ee0fb0ga7a73"); // 256-AES key
        byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);
        RijndaelManaged rDel = new RijndaelManaged();
        rDel.Key = keyArray;
        rDel.Mode = CipherMode.CBC;
        rDel.Padding = PaddingMode.PKCS7; // better lang support
        ICryptoTransform cTransform = rDel.CreateEncryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);
        return Convert.ToBase64String(resultArray, 0, resultArray.Length);
    }
    public static string Decrypt(string toDecrypt)
    {
        byte[] keyArray = UTF8Encoding.UTF8.GetBytes("3a8114db34d5623d4fd1ee0fb0ga7a73"); // AES-256 key
        byte[] toEncryptArray = Convert.FromBase64String(toDecrypt);
        RijndaelManaged rDel = new RijndaelManaged();
        rDel.Key = keyArray;
        rDel.Mode = CipherMode.CBC;
        rDel.Padding = PaddingMode.PKCS7; // better lang support
        ICryptoTransform cTransform = rDel.CreateDecryptor();
        byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);
        return UTF8Encoding.UTF8.GetString(resultArray);
    } 
```

我正在尝试加密数据“测试垃圾”，这就是我收到的内容：

> YfhyS3GE/liPCaXR0cMHfQ==

但是，我在许多在线 aes 加密/解密上尝试了相同的密钥/短语，并且所有这些都返回

> U2FsdGVkX184u0/vPgA/B0rxofp5Iuqm7hfn4+QZAhg=

谁能真正告诉我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:04:57.717

首先是您的代码的一些问题。显然谷歌并不总是返回最好的代码。

*   您通过 UTF8 编码获得密钥，这很愚蠢。这会产生一个非常弱的密钥：

```
 // 256-AES key
 byte[] keyArray = UTF8Encoding.UTF8.GetBytes("3a8114db34d5623d4fd1ee0fb0ga7a73"); 
```

*   您正在使用 CBC 模式，但未（明确）设置 IV。

然后你与一些在线AES加密/解密服务进行比较，你会发现不同之处。那是因为他们可能（希望）工作不同。

这里的主要内容是您的 2 种方法是匹配的，您可以往返您的数据。但是一个好的加密会使用不同的方式来获取 Key 和 IV。

我不确定为什么您会看到不同（较小）长度的加密数据，但这取决于整个设置列表：密钥长度、填充模式等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:06:28.077

“3a8114db34d5623d4fd1ee0fb0ga7a73”是十六进制编码的 128 位密钥，而不是 utf8 编码的 256 位密钥。

这就是说简单和干净并不一定意味着正确。例如，您使用的代码确实使用了随机 IV，但未将其包含在有线格式中，您将永远无法解密您加密的内容。

我有一个剪切和粘贴样式的简单代码示例，我尝试保持最新并查看它使用使用 AES 的经过身份验证的加密：

[字符串的对称认证加密的现代示例。C＃](https://stackoverflow.com/a/10366194/637783)

# ruby-on-rails - 关于 Ruby on Rails 中的控制器和脚手架

> ID：14280751
> 
> 赞同：1
> 
> 时间：2013-01-11T15:00:12.770
> 
> 标签：ruby-on-rails, ruby

我现在正在研究 Rails 指南，对控制器和脚手架感到困惑。在指南中，我看到了两个命令：

```
$ rails generate controller home index
$ rails generate scaffold Post name:string title:string content:text 
```

我知道第一行意味着它创建了一个带有动作索引的家庭控制器。但是，我不太明白这里的实际含义是什么。它只是意味着它将呈现一个地址为“home/index”的页面吗？

对于第二行，我的理解是它创建了一个名为 Post 的应用程序，其中包含三个参数名称、标题和内容。我不知道它是否正确，我想知道脚手架的真正含义。该指南的解释对我来说有点模棱两可。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:16:08.830

所以，首先，你应该运行它们。他们将列出他们创建的文件，您可以查看它们。

第一个创建了一个名为`home`（用于响应 Web 请求的一段代码）的控制器，其中包含一个名为`index`. 动作是 ant HTTP 动词和`/home/index`对应于控制器中方法的 URL（在本例中为 GET ）的组合。生成器还创建了一个用于呈现该操作的虚拟视图，以及一些空的测试和帮助文件。您可以在打印的内容中看到：

```
 create  app/controllers/home_controller.rb
   route  get "home/index"
  invoke  erb
  create    app/views/home
  create    app/views/home/index.html.erb
  invoke  test_unit
  create    test/functional/home_controller_test.rb
  invoke  helper
  create    app/helpers/home_helper.rb
  invoke    test_unit
  create      test/unit/helpers/home_helper_test.rb
  invoke  assets
  invoke    coffee
  create      app/assets/javascripts/home.js.coffee
  invoke    scss
  create      app/assets/stylesheets/home.css.scss 
```

特别有用的是控制器：

```
class HomeController < ApplicationController
  def index
  end
end 
```

您没有向 Rails 提供有关您希望该操作做什么的任何信息（您刚刚说过，“创建一个名为 'home' 的控制器和一些称为 'index' 的操作”），因此由您来填写该方法。您可以通过调用查看 URL 信息`rake routes`：

```
home_index GET /home/index(.:format) home#index 
```

换句话说，当您向`/home/index`它发送 GET 请求时，会调用`HomeController#index`. 由于该方法是空的并且不告诉 Rails 要渲染什么，它会默认渲染视图 at `app/views/home/index.html.erb`，生成器也创建了该视图，并希望您做一些有趣的事情。

第二个生成器做得更多。它创建了一个资源，这意味着您存储在数据库中的模型以及具有简单 CRUD 操作和虚拟视图来操作该模型的控制器。因此，除了上面的控制器/视图之外，它还创建了一个升级脚本以在数据库中创建正确的表和一个用作模型的 Ruby 类。特别注意这里的前两个“创建”项目，并将它们加载到您的编辑器中：

```
 invoke  active_record
  create    db/migrate/20130111151206_create_posts.rb
  create    app/models/post.rb
  invoke    test_unit
  create      test/unit/post_test.rb
  create      test/fixtures/posts.yml
  invoke  resource_route
   route    resources :posts
  invoke  scaffold_controller
  create    app/controllers/posts_controller.rb
  invoke    erb
  create      app/views/posts
  create      app/views/posts/index.html.erb
  create      app/views/posts/edit.html.erb
  create      app/views/posts/show.html.erb
  create      app/views/posts/new.html.erb
  create      app/views/posts/_form.html.erb
  invoke    test_unit
  create      test/functional/posts_controller_test.rb
  invoke    helper
  create      app/helpers/posts_helper.rb
  invoke      test_unit
  create        test/unit/helpers/posts_helper_test.rb
  invoke  assets
  invoke    coffee
  create      app/assets/javascripts/posts.js.coffee
  invoke    scss
  create      app/assets/stylesheets/posts.css.scss
  invoke  scss
  create    app/assets/stylesheets/scaffolds.css.scss 
```

您可以再次通过运行查看您实际可以执行的所有操作`rake routes`：

```
 posts GET    /posts(.:format)          posts#index
           POST   /posts(.:format)          posts#create
  new_post GET    /posts/new(.:format)      posts#new
 edit_post GET    /posts/:id/edit(.:format) posts#edit
      post GET    /posts/:id(.:format)      posts#show
           PUT    /posts/:id(.:format)      posts#update
           DELETE /posts/:id(.:format)      posts#destroy 
```

最后，查看控制器代码`app/controllers/PostsController.rb`以了解这些操作的实际作用（它们更有趣一些）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:08:09.043

第 1 行创建了一个控制器，其中包含 2 个操作（及其视图）。但是没有型号。

第 2 行创建一个*资源*。资源具有在其控制器中预定义的默认 REST 操作（创建、删除、更新等）。相应的视图也会为您创建。该资源还使用给定的参数（名称：datatype_in_sql）创建一个新模型（包括为其迁移）。

# .net - 清除网络流中的数据而不进行处理

> ID：14280752
> 
> 赞同：4
> 
> 时间：2013-01-11T15:00:12.163
> 
> 标签：.net, vb.net, networkstream

如何在不处理网络流的情况下清除网络流中的数据？

```
Dim ns As NetworkStream 
```

**编辑：**

根据**James**下面的评论，这个问题似乎还没有得到正确回答。

我想这样做：

```
ns = Nothing 
```

会清除网络流，但我错了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T22:52:55.253

我假设“清除网络流”是指要清空输入缓冲区？

```
var buffer = new byte[4096];
while (ns.DataAvailable)
{
    ns.Read(buffer, 0, buffer.Length);
} 
```

这会丢弃所有数据，但会打开流以供读取。

如果您的意思是要清除输出缓冲区（在可写流上），我不知道。您可能必须关闭流并创建一个新流。

# macos - 从字典创建单独的 plist 文件，将它们压缩然后保存 zip，所有这些都没有临时存储？

> ID：14280753
> 
> 赞同：0
> 
> 时间：2013-01-11T15:00:12.317
> 
> 标签：macos, cocoa, file, zip, save

所以我有一堆字典，它们都应该放在单独的 plist 中，有些甚至在特定的子文件夹中，然后我需要将所有这些压缩到一个 zip 文件中并将该文件保存到磁盘。

现在......在代码中执行此操作的最佳方法是什么？我可以不先将每个字典保存到磁盘上的单独文件中吗？我应该使用哪个 zip 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:36:40.023

是的，您无需先将每个字典保存到磁盘上的单独文件即可。要将字典转换为内存中的 plist，请使用`+[NSPropertyListSerialization dataWithPropertyList:format:options:error:]`或等效的`CFPropertyListCreateData`. 为了制作 zip 文件，我使用了[zlib](http://zlib.net "zlib")库附带的“minizip”插件。我认为有一些 C++ 或 Objective-C 包装器可以更方便地处理 zip 文件，但这并不难。

# python - 范数与对数范数图

> ID：14280758
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:00:31.700
> 
> 标签：python, matplotlib, scipy

我想使用以下代码绘制正态函数与对数正态函数：

```
from scipy.stats import norm, lognorm
import numpy as np
import matplotlib.pyplot as plt
# example: r(t) = ln(1 + R(t)) ~ N(0.05, (0.5)^2))
#          1 + R(t) = exp(r(t)) ~ logNormal(0.05, (0.5)^2)
#          R(t) = e(r(t)) - 1 ~ logNormal(0.05, (0.5)^2) - 1
#  
# plot normal and log normal density
mu = .05
sd = .5
x = np.linspace(mu - 3 * sd, mu + 3 * sd, 100)
plt.plot(x, norm.pdf(x, mu, sd), label="Normal") 
plt.plot(exp(x)-1, lognorm.pdf(exp(x), mu, sd), '--', label="Log-Normal") 
```

怎么了 ？我期待类似的东西：![范数与对数范数](../Images/73fdc4218e832e7c03370cb95fe489d5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:20:17.900

lognorm.pdf 函数中的参数顺序不是你想的那样！当您将顺序反转为： `lognorm.pdf(exp(x), sd, mu)`时，您会得到您所期望的情节。

编辑：[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.lognorm.html#scipy.stats.lognorm)给出`pdf(x, s, loc=0, scale=1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:10:40.753

关于阅读 python 文档/函数调用如何工作的简要说明：

没有默认值的参数，即`some_fun(a,b)`是位置参数，它们是必需的（或者 python 将引发关于参数数量的错误）并根据函数调用中的位置进行分配。如果有一个默认值，即`some_other_fun(a,b,c=None,d=0)`它们被称为关键字参数并且是可选的。您可以通过两种方式使用可选参数，如果您不使用关键字，则将它们视为位置参数。如果您提供的参数少于签名中的参数总数，则这些值将按顺序分配，其余参数采用其默认值。您还可以使用关键字形式仅分配您想要的可选参数，而不为它们之前的列表中的所有内容提供值，即`some_other_fun(1,2,d=3)`不同于`some_other_fun(1,2,3)`

因此，当您调用时，`lognorm.pdf(x,sd,mu)`您的绑定为`x=x`, `s=sd`, `loc=mu`,`scale=1`与`norm.pdf(x,mu,sd)`您的绑定一样`x=x`, `loc=mu`,`scale=sd`

[另请参阅本教程](http://docs.python.org/2/tutorial/controlflow.html#more-on-defining-functions)的这一部分 。

# spring - Spring Social 和 Spring Security：保护网站资源

> ID：14280760
> 
> 赞同：1
> 
> 时间：2013-01-11T15:00:37.780
> 
> 标签：spring, spring-security, spring-social

我正在使用 spring-social 开发一个应用程序，它允许用户通过 facebook 连接而无需注册，只需单击连接按钮即可登录。

我正在通过 cookie 跟踪用户，并使用 RESTful API 代表用户调用 Facebook。如果用户未登录，则 oauth 异常会将他重定向到他需要与 Facebook 连接的登录页面 - 这是服务端。

还有一个网站（或仪表板）允许用户通过网络浏览器连接并查看一些统计数据并管理他的个人资料。

我想为网站强制执行相同的注册逻辑。

即，如果未通过身份验证，则任何人都无法访问页面（即随请求发送有效的 cookie）。

使用 Spring Social 和 Spring 安全性对所有资源强制执行此操作的最佳方法是什么？（记住，没有用户/通行证，只有 cookie）

PS 我在 Spring-social 快速入门示例之上构建了我的项目。该项目有一个 HandlerInterceptorAdapter 确保所有请求都通过该适配器检查用户提供的 cookie 是否在数据库中，如果是，则使用用户信息设置一个 SecurityContext 并继续。我想将此适配器重新用于网站登录缺陷。

天呐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:40:09.713

您可以使用 SpringSecurity 保护所有网站 URL。如果用户未通过身份验证，则它将被重定向到登录页面。在登录页面上，您可以放置​​ SpringSocial 注册按钮（而不是通常的登录表单）。单击此按钮后，用户将被重定向到 Facebook。成功验证后，它将被重定向到您的应用程序。SpringSocial 可以自动通知 SpringSecurity 用户已经通过身份验证。因此，该用户将能够毫无问题地使用所有网站 URL。

**编辑。**通常，您需要允许登录页面上的所有用户访问。在您的情况下，您也需要为**ProviderSignInController** ( **/signin** ) 执行此操作。

# android - 网站未在 WebView 中加载

> ID：14280761
> 
> 赞同：2
> 
> 时间：2013-01-11T15:00:40.810
> 
> 标签：android, android-webview

读完[这篇](https://stackoverflow.com/questions/7305089/android-how-to-load-external-webpage-inside-webview)`WebView`文章后，我认为添加我的一个网页会一帆风顺。但是我错了，我只能假设问题是由于脚本造成的，但这是我的代码

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout);

    WebView mv = (WebView)findViewById(R.id.webView);
    mv.getSettings().setJavaScriptEnabled(true);

    final Activity activity = this;

    mv.setWebViewClient(new WebViewClient() {
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Toast.makeText(activity, description + " (" + errorCode + ") " + failingUrl, Toast.LENGTH_SHORT).show();
        }
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            Toast.makeText(activity, url, Toast.LENGTH_SHORT).show();
            view.loadUrl(url);
            return true;
        }
    });
    mv.loadUrl("http://www.google.co.uk");

} 
```

代码构建并运行，但网页未加载我得到一个错误代码 -1 并查看下面的 logcat 行。

```
 01-11 14:46:55.362: D/chromium(22438): Unknown chromium error: -400 
```

我有互联网许可，因为我的应用程序的另一部分使用广告，它们很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:57:04.690

您对 shouldOverrideUrlLoading 的实现让我感到困惑。为什么叫 loadUrl？尝试更改为：

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
   Toast.makeText(activity, url, Toast.LENGTH_SHORT).show();
   return super.shouldOverrideUrlLoading(view, url);
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-11T15:19:11.160

请检查您是否忘记添加：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

在你的 AndroidManifest.xml

# haskell - WinGHCi 无法启动

> ID：14280764
> 
> 赞同：8
> 
> 时间：2013-01-11T15:00:45.007
> 
> 标签：haskell, crash, ghci, winghci

因此，我尝试在 WinGHCi 中“设置提示符“λ>”，它崩溃了，之后就无法重新启动（不响应）。我重新安装了 Haskell 平台，但它仍然无法启动（不响应）。GHCi 在 cmd 中工作。在第一次卸载/重新安装 WinGHCi 之前，我搜索了剩余的 .conf 文件，这可能使其崩溃但找不到任何文件。我会很感激任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T15:18:40.020

WinGHCi 将其命令历史存储在注册表中。只需`HKEY_CURRENT_USER\SOFTWARE\Haskell\WinGHCi`从注册表中删除所有内容（使用`regedit`）。

此外，请将此情况报告给[开发人员](http://code.google.com/p/winghci/issues/list)。

# excel - 列出 Excel 表格中的前 5 个项目

> ID：14280766
> 
> 赞同：3
> 
> 时间：2013-01-11T15:00:52.717
> 
> 标签：excel, list, match, worksheet-function

我正在尝试在 Excel 中使用 LARGE 函数，但是当我有多个具有相同数字的结果时，它会返回相同的结果两次或更多次。我想要它做的是移动到列表中的下一个项目。这是一个例子：

```
=INDEX(Movies[Title],MATCH(LARGE(Movies[Rating If Genres],1),Movies[Rating If Genres],0))
=INDEX(Movies[Rating],MATCH(LARGE(Movies[Rating If Genres],1),Movies[Rating If Genres],0))

=INDEX(Movies[Title],MATCH(LARGE(Movies[Rating If Genres],2),Movies[Rating If Genres],0))
=INDEX(Movies[Rating],MATCH(LARGE(Movies[Rating If Genres],2),Movies[Rating If Genres],0))

=INDEX(Movies[Title],MATCH(LARGE(Movies[Rating If Genres],3),Movies[Rating If Genres],0))
=INDEX(Movies[Rating],MATCH(LARGE(Movies[Rating If Genres],3),Movies[Rating If Genres],0))

=INDEX(Movies[Title],MATCH(LARGE(Movies[Rating If Genres],4),Movies[Rating If Genres],0))
=INDEX(Movies[Rating],MATCH(LARGE(Movies[Rating If Genres],4),Movies[Rating If Genres],0))

=INDEX(Movies[Title],MATCH(LARGE(Movies[Rating If Genres],5),Movies[Rating If Genres],0))
=INDEX(Movies[Rating],MATCH(LARGE(Movies[Rating If Genres],5),Movies[Rating If Genres],0)) 
```

产生：

```
 Title                     | Rating
 --------------------------|---------
 Alien                     | 8.5
 Blade                     | 7.0
>30 Days of Night          | 6.6
>30 Days of Night          | 6.6
 Blade: House of Chthon    | 6.5 
```

这部电影两次播放同一部电影（30 Days of Night），其中一部应该是 Blade II，因为它的评分也为 6.6。

因此，如果我指定的流派与电影的流派匹配（Rating If Genres），我所做的就是将评级存储在表的列中。之后，我从该列表中选择最高的流派。

如何使它显示来自 LARGE 功能的 Blade II 结果，而不是显示 30 天的夜晚两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:36:43.697

在您的“前 5”表中，假设第一个评分（在您的示例中为 8.5）在 B2 中，然后在 A2 中尝试此数组公式

`=INDEX(Movies[Title],SMALL(IF(Movies[Rating If Genres]=B2,ROW(Movies[Rating If Genres])-MIN(ROW(Movies[Rating If Genres]))+1),COUNTIF(B$2:B2,B2)))`

用 CTRL+SHIFT+ENTER 确认并复制下来

即使评级中有重复，这也会检索到正确的标题

编辑：或者也许这个非数组版本......

`=INDEX(Movies[Title],MATCH(1,INDEX((Movies[Rating If Genres]=B2)*(COUNTIF(A$1:A1,Movies[Title])=0),0),0))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:26:46.957

为评级创建一个辅助列。

如果评级在 A 列中，则辅助列的第一个单元格中的公式（复制下来）

```
=IF(COUNTIF($A:$A;$A5)>1;$A5+ROW($A5)*0.000001;$A5) 
```

根据它们的行号（即总是不同），在相同的排名中添加少量，这将永远不会达到下一个排名。应用`LARGE`到该列将对最初相等的条目进行排名。

例如，4.8 的 3 倍将变为 4.800002、4.80005、4.802。

更简单的方法：将行号除以足够大的数字添加到所有条目：如果它们的准确度为 0.1，则为所有条目添加少量将使它们唯一。四舍五入最终结果将使它们再次相等。

# spring - 是否同步了 Spring 请求

> ID：14280767
> 
> 赞同：4
> 
> 时间：2013-01-11T15:00:54.370
> 
> 标签：spring, request

我想知道`Spring`请求是否同步。这是我的场景：

我有一个映射到 Controller1 的请求，它本身调用我的`DAO1.aMethod()`. 假设另一个用户调用了相同的方法，并且另一个请求被 Controller1 映射到`DAO1.aMethod()`第一次调用`DAO1.aMethod()`返回值之前。

我问这个，因为我有一个运行复杂算法的 DAO，我很好奇如果他开始另一个用户的另一个呼叫是否会干扰计算。

我这边的测试表明，如果在我的 DAO 中保留一个字段说“iRunsCalculation”并跟踪实际状态，第二个请求可以读取请求一个设置的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:13:48.933

我假设“同步”是指它们是同时运行还是排队。它们当然可以同时运行，这就是 Web 容器通常的工作方式。Spring 与这里发生的事情并没有太大关系，因为它将是您的 servlet 容器来处理传入的请求并将它们放到 Spring`DispatcherServlet`中。

如果您的计算以某种方式依赖于当前和过去对该服务的调用，那么如果您没有正确保护您的同步，很可能会遇到一些“同步”问题。

# web-applications - 使用 Grails 阅读 PDF 文件

> ID：14280769
> 
> 赞同：0
> 
> 时间：2013-01-11T15:00:57.953
> 
> 标签：web-applications, grails

我想解析网站上的 PDF 文件。

谁能说如何使用 Grails 从 PDF 文件中提取文本（逐字）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:57:08.190

其他选项包括支持 pdf 和其他格式的[Apache Tika](http://tika.apache.org/)以及[iText](http://itextpdf.com/)。

要与 Groovy/Grails 一起使用，请像使用 Groovy/Grails 一样使用下面的 Java

要将 Apache tika 与 Java 一起使用，您必须：

*   从 tika.apache.org 下载 tika-app- [1.2.jar](http://tika.apache.org)
*   下载 [此](http://blog.vigneshwaran.in/java-program-using-apache-tika-to-extract-tex)示例程序
*   使用 javac -cp tika-app-1.2.jar TextExtractor.java 编译程序
*   提取一些文本 java -cp tika-app-1.2.jar:。TextExtractor aPDFFile.pdf

要将 itext 与 Java 一起使用，您将：

*   下载itextpdf-5.3.5.jar
*   编译以下内容：

    ```
    import java.io.IOException;

    import com.itextpdf.text.pdf.PdfReader;
    import com.itextpdf.text.pdf.parser.PdfTextExtractor;

    public class itextHelloWorld {

       static void extract(String input) throws IOException{
           String path = input;
           PdfReader reader = new PdfReader(path);
           int numberOfPages = reader.getNumberOfPages();
           for (int i = 0;i<numberOfPages;i++) {
               System.out.println(PdfTextExtractor.getTextFromPage(reader,i+1));
           }
       } 

        public static void main(String[] args) throws IOException {
            extract(args[0]);
        }
    } 
    ```

*   使用 java -cp itextpdf-5.3.5.jar: 提取文本。itextHelloWorld aPDFFile.pdf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:13:28.023

我不知道 Grails / Groovy 但您可以使用 Apache lib [PDF Box](http://pdfbox.apache.org/)在您的项目中解析 PDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:16:07.447

作为另一种选择，我一直在使用[Aspose](http://www.aspose.com/java/pdf-component.aspx)产品来解决此类问题。我与 Aspose 没有任何关系。我只是喜欢他们的产品。

# php - 当会话到期而我们仍在查看页面时，我们应该怎么做？

> ID：14280773
> 
> 赞同：0
> 
> 时间：2013-01-11T15:01:05.420
> 
> 标签：php

我有一个包含`$_SESSION`变量的页面。现在经过一定时间后，所有会话都将过期，这很公平。但问题是，我们突然收到关于 $_SESSION 变量的未定义通知，因为它们现在已过期。

因此，在这种情况下，会话到期时最好做的事情是什么。我们是否只包含`E ^ NOTICE`代码以不显示通知（在我们知道页面完全完整且没有错误之后），或者我们是否希望销毁`session_destroy()`页面上使用的会话，或者是否有其他方式不显示这些未定义的错误给正在浏览器上查看这些页面的用户，并且可以在会话到期时查看该页面。

下面是关于如何显示 $_SESSION 代码的示例代码：

```
 <?php

    ini_set('session.gc_maxlifetime',12*60*60); //12 hours until session expires
    ini_set('session.gc_divisor', '1');
    ini_set('session.gc_probability', '1');
    ini_set('session.cookie_lifetime', '0');
    require_once 'init.php'; 

    session_start();  //starts sessions

    include('member.php');  //this php script also contains sessions

    if (isset($_POST['id'])) {

    $_SESSION['id'] = $_POST['id'];

    }

    if(isset($_POST['sessionNum'])){
                //Declare my counter for the first time

                $_SESSION['initial_count'] = $_POST['sessionNum'];
                $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
                $_SESSION['sessionCount'] = 1;

        }

    if (isset($_POST['submitDetails']) && $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
        $_SESSION['sessionCount']++;
    }

    $sessionMinus =  $_SESSION['sessionCount'];

    if (isset($_POST['textQuestion'])) {

    $_SESSION['textQuestion'] = $_POST['textQuestion'];

    }

    if (isset($_POST['textMarks'])) {

    $_SESSION['textMarks'] = $_POST['textMarks'];

    }

    if (isset($_POST['totalWeight'])) {

    $_SESSION['totalWeight'] = $_POST['totalWeight'];

    }

    if ($sessionMinus == $_SESSION['initial_count']){ 

        $action = 'individualmarks.php'; 

    }elseif($sessionMinus != $_SESSION['initial_count']){ 

        $action = $_SERVER['PHP_SELF']; 

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:03:37.773

`isset()`您可以像使用 $_POST 变量一样检查功能，并且通知将消失

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:05:32.720

检查是否存在特定的哨兵值。例如，如果您对会话所做的任何事情都是针对受登录保护的系统，那么请检查 `isset($_SESSION['loggedIn']) && ($_SESSION['loggedIn'] == true)`.

如果哨兵值不存在，那么会话发生了一些事情，您应该将用户重定向到其他地方以将事情恢复到应有的方式（例如显示登录页面）。

由于您无法提前知道“慢”用户会点击哪个页面，因此您必须假设会话随时可能消失，并在每个页面上进行哨兵检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:06:47.750

首先，在实时站点中，您将需要 error_reporting(0)，因此您不会看到通知。

如果您不想再看到通知，则还需要检查数组键。你通过使用检查`if(isset($_SESSION['some_key']))`

完成此操作后，您可以安全地使用该变量。

# linux - nohup 或 disown 是否适用于批处理脚本？

> ID：14280776
> 
> 赞同：1
> 
> 时间：2013-01-11T15:01:26.373
> 
> 标签：linux, nohup

我有一个包含 302 个命令的文件，这些命令在我们的服务器上启动进程。一次盯着它们会杀了它，所以我有一个脚本，它将一个命令推送到 shell，等待进程完成，然后调用下一个。

整个过程可能需要一天左右的时间才能完成，我想在这期间注销。我知道有`nohup`，或者，如果你一开始就忘记了，`disown`确保即使你关闭连接，进程仍然会运行，但我不确定在我的情况下我应该把那个调用放在哪里。只有引导命令的脚本；仅在命令上；或两者兼而有之？

如果这是一个愚蠢的问题，我深表歉意，但我无法在网上找到该问题的简单答案，我不能因为我做错了什么而冒险破坏这些过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:44:09.533

当然你可以使用 nohup：

```
nohup <script name> & 
```

您可以执行此命令并安全注销。然后您可以重新登录并使用 ps 命令查看您的脚本是否仍在运行。我还将创建一个日志文件，以便能够监控进度并将所有标准和错误输出重定向到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:07:58.463

您可以安排您的脚本运行，这样您就不必在进程运行时连接到服务器。查看 cron 帮助：[http ://www.scrounge.org/linux/cron.html](http://www.scrounge.org/linux/cron.html)

# angularjs - 在 AngularJs 指令中集成 Redactor WYSIWYG

> ID：14280780
> 
> 赞同：10
> 
> 时间：2013-01-11T15:01:40.597
> 
> 标签：angularjs, wysiwyg, directive, redactor

我尝试将 Beautifull WYSIWYG Redactor ( [http://imperavi.com/redactor/](http://imperavi.com/redactor/) ) 集成到自定义 AngularJS 指令中。

Visualy 它可以工作，但我的自定义指令与 ng-model 不兼容（我不明白为什么）

这就是你可以使用我的指令的方式：

```
<wysiwyg ng-model="edited.comment" id="contactEditCom" content="{{content}}" required></wysiwyg> 
```

这是指令代码：

```
var myApp = angular.module('myApp', []);
myApp.directive("wysiwyg", function(){

var linkFn = function(scope, el, attr, ngModel) {

    scope.redactor = null;

    scope.$watch('content', function(val) {
        if (val !== "")
        {
            scope.redactor = $("#" + attr.id).redactor({
                focus : false,
                callback: function(o) {
                    o.setCode(val);
                    $("#" + attr.id).keydown(function(){
                        scope.$apply(read);
                    });
                }
            });
        }
    });

    function read() {
        var content = scope.redactor.getCode();
        console.log(content);
        if (ngModel.viewValue != content)
        {
            ngModel.$setViewValue(content);
            console.log(ngModel);
        }
    }

};

 return {
     require: 'ngModel',
     link: linkFn,
     restrict: 'E',
     scope: {
         content: '@'
     },
     transclude: true
 };
}); 
```

最后这是小提琴-> [http://fiddle.jshell.net/MyBoon ​​/STLW5/](http://fiddle.jshell.net/MyBoon/STLW5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T03:55:38.897

我根据 Angular-UI 的 TinyMCE 指令制作了一个。这一个也听格式按钮的点击。它还处理模型在指令之外更改的情况。

Directive.coffee（对不起咖啡脚本）

```
angular.module("ui.directives").directive "uiRedactor", ["ui.config", (uiConfig) ->

  require: "ngModel"
  link: (scope, elm, attrs, ngModelCtrl) ->
    redactor = null

    getVal = -> redactor?.getCode()

    apply = ->
      ngModelCtrl.$pristine = false
      scope.$apply()

    options =
      execCommandCallback: apply
      keydownCallback: apply
      keyupCallback: apply

    scope.$watch getVal, (newVal) ->
      ngModelCtrl.$setViewValue newVal unless ngModelCtrl.$pristine

    #watch external model change
    ngModelCtrl.$render = ->
      redactor?.setCode(ngModelCtrl.$viewValue or '')

    expression = if attrs.uiRedactor then scope.$eval(attrs.uiRedactor) else {}

    angular.extend options, expression

    setTimeout ->
      redactor = elm.redactor options
] 
```

html

```
<textarea ui-redactor='{minHeight: 500}' ng-model='content'></textarea> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-07T21:32:05.577

**更新 --- Rails 4.2 --- Angular-Rails 1.3.14**

好吧，伙计们，经过大量研究和其他成员对堆栈溢出的帮助，这里有一个解决方案，它直接输入控制器 $scope 和应用到 textarea 的 ng-model：

** 渲染原始 HTML **

```
# Filter for raw HTML
app.filter "unsafe", ['$sce', ($sce) ->
    (htmlCode) ->
        $sce.trustAsHtml htmlCode
] 
```

[过滤器的功劳](https://stackoverflow.com/a/25513186/737275)

**指示：**

```
# For Redactor WYSIWYG
app.directive "redactor", ->
require: "?ngModel"
link: ($scope, elem, attrs, controller) ->
    controller.$render = ->
        elem.redactor
            changeCallback: (value) ->
                $scope.$apply controller.$setViewValue value
            buttons: ['html', '|', 'formatting', '|',
                'fontcolor', 'backcolor', '|', 'image', 'video', '|',
                'alignleft', 'aligncenter', 'alignright', 'justify', '|',
                'bold', 'italic', 'deleted', 'underline', '|',
                'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
                'table', 'link', 'horizontalrule', '|']
            imageUpload: '/modules/imageUpload'
        elem.redactor 'insert.set', controller.$viewValue 
```

[最后一行更新原因](https://github.com/TylerGarlick/angular-redactor/issues/21)

**在 HTML 视图中：**

```
<div ng-controller="PostCtrl">  
    <form ng-submit="addPost()">
        <textarea ng-model="newPost.content" redactor required></textarea>
        <br />
        <input type="submit" value="add post">
    </form>

    {{newPost.content}} <!-- This outputs the raw html with tags -->
    <br />
    <div ng-bind-html="newPost.content | unsafe"></div> <!-- This outputs the html -->
</div> 
```

**和控制器：**

```
$scope.addPost = ->     
    post = Post.save($scope.newPost)
    console.log post
    $scope.posts.unshift post
    $scope.newPost.content = "<p>Add a new post...</p>" 
```

为了防止 TypeError 与 redactor 在调用操作之前将一个值填充到 textarea 中，这对我来说最适合保留格式：

```
# Set the values of Reactor to prevent error
    $scope.newPost = {content: '<p>Add a new post...</p>'} 
```

如果您遇到 CSRF 错误，这将解决该问题：

```
# Fixes CSRF Error OR: https://github.com/xrd/ng-rails-csrf
app.config ["$httpProvider", (provider) ->
    provider.defaults.headers.common['X-CSRF-Token'] = angular.element('meta[name=csrf-token]').attr('content') 
```

]

非常感谢：[AngularJS 和 Redactor 插件](https://stackoverflow.com/questions/15470721/angularjs-redactor-plugin/16264310#16264310)

最后....

如果您使用 ng-repeat 创建这些编辑器文本区域并且无法访问范围，请查看以下答案：[Accessing the model inside a ng-repeat](https://stackoverflow.com/a/14491487)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T00:40:23.930

看看这个[小提琴](http://fiddle.jshell.net/7BFmG/1/)是不是你想要的。

ng-model 可以设置为内容：

```
<wysiwyg ng-model="content" required></wysiwyg> 
```

在链接函数内部，el 已经设置为定义指令的元素，因此`id`不需要 an。el 已经是一个包装好的 jQuery 元素。

链接功能：

```
var linkFn = function (scope, el, attr, ngModel) {
    scope.redactor = el.redactor({
        focus: false,
        callback: function (o) {
            o.setCode(scope.content);
            el.keydown(function () {
                console.log(o.getCode());
                scope.$apply(ngModel.$setViewValue(o.getCode())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-27T16:26:18.043

我的解决方案是

1) 克隆[https://github.com/dybskiy/redactor-js.git](https://github.com/dybskiy/redactor-js.git) 2) 包括 jquery、redactor.js、redactor.css 3) 添加标签：`<textarea wysiwyg ng-model="post.content" cols="18" required></textarea>`到您的 html 正文 4) 添加指令：

```
yourapp.directive('wysiwyg', function () {
  return {
    require: 'ngModel',
    link: function (scope, el, attrs, ngModel) {
      el.redactor({
        keyupCallback: function(obj, e) {
            scope.$apply(ngModel.$setViewValue(obj.getCode()));
        }
      });
      el.setCode(scope.content);
    }
  };
}); 
```

最好的问候， Jeliuc Alexandr

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-19T06:09:00.770

上述解决方案不适用于所有情况，因此我使用它们创建了以下指令，使模型和编辑器保持同步。

```
angular.module('redactor', []) 
```

.directive('redactor', function () { return { require: '?ngModel', link: function (scope, el, attrs, ngModel) {

```
 // Function to update model
  var updateModel = function() {
        scope.$apply(ngModel.$setViewValue(el.getCode()));
    };

  // Get the redactor element and call update model
  el.redactor({
    keyupCallback: updateModel,
    keydownCallback: updateModel,
    execCommandCallback: updateModel,
    autosaveCallback: updateModel
  });

  // Call to sync the redactor content
          ngModel.$render = function(value) {
        el.setCode(ngModel.$viewValue);
    };
  }
}; 
```

});

只需将 redactor 模块添加为依赖项，并将以下内容添加到您的 html 中：

**注意：升级到 9.1.1 版本后我必须更新代码**

这是新版本：

```
 .directive('redactor', function () {
        return {
          require: '?ngModel',
          link: function (scope, el, attrs, ngModel) {

            var updateModel, errorHandling;
            // Function to update model
            updateModel = function() {
              if(!scope.$$phase) {
                  scope.$apply(ngModel.$setViewValue(el.redactor('get')));
                }
              };

            uploadErrorHandling = function(response)
              {
                console.log(response.error);
                alert("Error: "+ response.error);
              }; 

            // Get the redactor element and call update model
            el.redactor({
              minHeight: 100,
              buttons: ['formatting', '|', 'bold', 'italic', 'deleted', '|',
              'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
              'image', 'video', 'file', 'table', 'link', '|', 'alignment', '|', 'horizontalrule'],
              keyupCallback: updateModel,
              keydownCallback: updateModel,
              changeCallback: updateModel,
              execCommandCallback: updateModel,
              autosaveCallback: updateModel,
              imageUpload: '/file/upload/image',
              imageUploadErrorCallback: uploadErrorHandling,
              imageGetJson: '/api/v1/gallery'
              });

            // Call to sync the redactor content
              ngModel.$render = function(value) {
                  el.redactor('set', ngModel.$viewValue);
              };
          }
        };
      }); 
```

# r - 如何在R表达式中将方括号和下标彼此相邻？

> ID：14280785
> 
> 赞同：6
> 
> 时间：2013-01-11T15:01:57.683
> 
> 标签：r

这是我的问题：对于绘图标签，我需要在方括号 ([M]) 中添加一个字母，并在其旁边添加一个下标。用表达式函数制作下标的正常方法不起作用：

```
expression(paste("[M]",[P])) 
```

返回一个错误 - 显然它想在下标前面有一些东西，因为这样 -

```
expression(M[P]) 
```

有用。

有谁知道如何克服这个？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T15:06:39.737

您可以使用

```
expression("[M]"[P]) 
```

一个例子：

```
plot(1, main = expression("[M]"[P])) 
```

![在此处输入图像描述](../Images/d18651a7197f66fc57158efbc023e0a0.png)

# java - 访问数据时对负索引取模出错

> ID：14280791
> 
> 赞同：0
> 
> 时间：2013-01-11T15:02:15.630
> 
> 标签：java, modulo

我想存储一个二维世界，由块（具有 x 和 y 坐标）组成，这些块（具有 x 和 y 坐标）分组在块（具有 x 和 y 坐标）中。

这段代码显示了一个块如何对一些块进行分组：

```
public class Chunk {

    Block[][] blocks = new Block[GameProperties.MAP_SIZE_CHUNK][GameProperties.MAP_SIZE_CHUNK];
    int xpos, ypos;
    public Chunk(int posx, int posy){
        this.xpos = posx;
        this.ypos = posy;
        for (int x = 0; x < blocks.length; x++) {
            for (int y = 0; y < blocks.length; y++) {
                int blockx = xpos*GameProperties.MAP_SIZE_CHUNK + x;
                int blocky = ypos*GameProperties.MAP_SIZE_CHUNK + y;
                blocks[x][y] = new Block(blockx, blocky);
            }
        }
    }

} 
```

目前**GameProperties.MAP_SIZE_CHUNK** = 8，所以每个块代表 8x8 = 64 块，但这是内容要更改，我必须动态进行！

坐标是整数，可以是正数和负数。

> -100 >= y > MAXINT -MAXINT > x > MAXINT

块坐标具有相同的规则，但从左上块开始计算：

> 块 (0|0) = 0 <= x/y < 8 块 (-1|0) = -8 <= x/y < 0

这就是我从块坐标计算块和相对块的方式：

```
public int modulo(int a, int b){
    if(a < 0){
        return (a % b + b) % b;
    }
    return a % b;
}

public Block getBlock(int x, int y){
    int chunkx;
    int blockx;
    if(x < 0){
        int xn = x-GameProperties.MAP_SIZE_CHUNK;
        if(xn > GameProperties.MAP_SIZE_CHUNK){
            xn--;
        }
        chunkx = (xn)/GameProperties.MAP_SIZE_CHUNK;
        blockx = modulo((xn),GameProperties.MAP_SIZE_CHUNK);
    }else{
        chunkx = x/GameProperties.MAP_SIZE_CHUNK;
        blockx = modulo(x,GameProperties.MAP_SIZE_CHUNK);
    }

    int chunky;
    int blocky;
    if(y < 0){
        chunky = y/GameProperties.MAP_SIZE_CHUNK;
        if(chunky == 0){
            chunky = -1;
        }
        blocky = modulo(y,GameProperties.MAP_SIZE_CHUNK);
    }else{
        chunky = y/GameProperties.MAP_SIZE_CHUNK;
        blocky = modulo((y),GameProperties.MAP_SIZE_CHUNK);
    }
    Chunk c = getChunk(chunkx, chunky);
    Block b = c.getRelativeBlock(blockx, blocky);
    System.out.println("<<< " + x + " | " + b.getxPos() + "   = " + (x-b.getxPos()));
    return b;
} 
```

公平地说，这真是一团糟，因为我已经尝试了所有方法来使模对负数起作用...有时，块（-1 | 0）有时会到达位置（0 | 0），块与x <- 1 被移动一个街区。我想了很久，但对这个问题视而不见，你能帮忙吗？

GetChunk 和 Chunk.getRelativeBlock 功能齐全，只是从 Map/Array 返回放置的块/块。

**编辑**

因为不清楚我在问什么：我在 Java 中遇到了负模数的问题。但即使最终结果有问题，也可能是模函数，也可能在其他地方。 **有人知道我的代码哪里有问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:20:58.490

也许你可以使用这个：

```
public int modulo(int a, int b){
    if(a < 0){
        return (a + b) % b;
    }
    return a % b;
} 
```

而不是这个：

```
public int modulo(int a, int b){
    if(a < 0){
        return (a % b + (1 + (Math.abs(a) / b)) * b) % b;
    }
    return a % b;
} 
```

另一个问题：你怎么知道 b 是正数？

# xaml - 如何在 XAML Windows8 中将一个网格浮动到另一个网格之上

> ID：14280793
> 
> 赞同：0
> 
> 时间：2013-01-11T15:02:29.350
> 
> 标签：xaml, windows-8, grid

我现在正在搜索超过 15 分钟以获得没有成功的答案。

我的问题是我想在另一个网格上方浮动一个网格。

这可能吗？如果是这样，我该怎么做？

我试着把我的想法画出来。

![我的素描](../Images/71c5e484d093e8f1b8ba59a7250eb9a8.png)

任何代码示例都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:12:34.860

```
<Grid><!-- This Grid acts as a container -->
   <Grid>
      <!-- This Grid would be on the bottom -->
   </Grid>
   <Grid>
      <!-- This Grid would be on the top -->
   </Grid>
</Grid> 
```

希望这可以帮助... ：）

# algorithm - 唐叶乘数

> ID：14280798
> 
> 赞同：0
> 
> 时间：2013-01-11T15:02:52.633
> 
> 标签：algorithm, recursion, multiplication

我将两个 n 位正整数与一个 n 位 Karatsuba 乘数相乘。但大多数时候，子问题仍然需要处理两个 n 位数。那么我应该再次递归地使用 n 位 Karatsuba 算法来解决子问题吗？这种方法有冗余吗？它会以任何方式损害计算时间（O（n ^ 1.5））吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:17:31.437

是的，您必须使用相同的方法。仍然对于足够小的数字使用其他方法，因为添加数字的开销可能太大。

但是，您不需要再次乘以 n 位数字，这不是真的，您将需要乘以`n/2`数字。这就是方法的重点。

# mysql - 使用 LEFT JOIN 在 MYSql 更新中添加多值列

> ID：14280800
> 
> 赞同：0
> 
> 时间：2013-01-11T15:02:55.290
> 
> 标签：mysql, concatenation

我已经处理了几个小时了。我有这个查询：

```
update xcart.xcart_products_lng_en
left join xcart.xcart_products 
    on xcart.xcart_products.productid = xcart.xcart_products_lng_en.productid
left join xcart.xcart_extra_field_values
    on xcart.xcart_extra_field_values.productid = xcart.xcart_products.productid
set `keywords` =  CONCAT(product, " ", productcode, " ",value) 
where value is not null;` 
```

起初，这达到了我的预期，但是客户设置数据库的方式，它有我似乎无法弄清楚的问题。

事实证明，拉取 VALUE 的表是动态生成的，最终看起来像这样。

**产品 1|字段 id 1|产品 ISBN
产品 1|字段 id 3|作者姓名
产品 1|字段 id 2|货架 ID**

问题是，当我创建的查询运行时，它只添加一个字段 ID 的值，并且不考虑其他字段 ID，有没有办法这样做？我知道“CONCAT”，我不确定如何使用它，或者在这种情况下使用它是否有意义。

~ 特蕾西·沃西克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:27:11.233

您的联接派生了一个表。您需要更新现有表。例如，如果您有 T1、T2、T3 作为表，并且您想根据 T1、T2、T3 更新 T1，那么您编写：

```
update T1
set T1.Field = (select ... from ... where ...) 
```

我希望这有帮助。

# facebook-graph-api - 在 facebook 图形 api 中共享对象

> ID：14280801
> 
> 赞同：2
> 
> 时间：2013-01-11T15:03:00.203
> 
> 标签：facebook-graph-api, sharing

我试图使用图形 API 共享一个 facebook 对象，但我不知道如何。我正在寻找类似于喜欢操作的东西，[https://graph.facebook.com/OBJ_ID/likes](https://graph.facebook.com/OBJ_ID/likes)？使用 HTTP_POST。任何人都知道我该怎么做？

谢谢。

# wpf - 在 TextBox LostFocus 事件中未更新 ViewModel

> ID：14280802
> 
> 赞同：1
> 
> 时间：2013-01-11T15:03:00.460
> 
> 标签：wpf, events, wpf-controls, viewmodel

我的 TextBox 附加了一个 LostFocus 事件。此 TextBox 绑定到 ViewModel。但是，当我失去对 TextBox 的关注并输入 LostFocus 事件时，我发现 ViewModel 上的属性尚未更新。它仍然显示我在 TextBox 中的旧值。

在我执行事件中的任何代码之前，我应该使用什么事件来确保更新 ViewModel？

我意识到这可能不是正常的设计，只是为了给你一些背景知识。我有一个基于 TextBox 上下文的动态列网格。当 TextBox 失去焦点时，我更新了这些。我还有一个针对 TextBox 的验证规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:04:57.343

在您的 Binding 中类似于

```
Text="{Binding Path=Val}" 
```

确保你也有

```
 UpdateSourceTrigger=PropertyChanged 
```

# php - PHP / JavaScript 检查 SSL

> ID：14280809
> 
> 赞同：0
> 
> 时间：2013-01-11T15:03:33.453
> 
> 标签：php, javascript, ssl, https

有机会用 PHP/JavaScript 检查页面上是否有任何不安全的项目？在工作中，我们在这里使用 SSL，有时（很少，但仍然）我们中的某些人正在使用错误的路径提交设计元素，最好添加带有错误的大红色块，作为浏览器检查的奖励 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:13:13.060

据我了解，有时使用图像的路径会`http://`导致浏览器说页面上的某些元素不安全。最好不要指定 http:// 或 https:// 而是使用[协议相对 url](http://paulirish.com/2010/the-protocol-relative-url/)

`http://`您可以通过添加这个简单的 css 规则轻松检查页面上的任何图像是否正在使用：

```
img[src^=http\:\/\/] {
    border: 5px solid red;
} 
```

[http://jsfiddle.net/qFtVD/2/](http://jsfiddle.net/qFtVD/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:10:47.963

这很简单。

查看：

*http://*的所有链接、图像和脚本、样式、链接、*iframe*标记。

 *正则表达式可以解决问题。

此外，您可以要求人们使用`://`。它会自动检查页面是通过什么协议打开的，并相应地链接内容。*

# php - 如何使用 PHP 解析 NSDictionary 数组

> ID：14280811
> 
> 赞同：0
> 
> 时间：2013-01-11T15:03:38.473
> 
> 标签：php, objective-c, arrays, titanium, nsdictionary

我正在使用 Appcelerator Titanium 构建一个应用程序。它具有照片上传功能，因此我构建了一个 PHP 后端（CodeIgniter + RESTful Server）来处理上传的文件。由于 Titanium 会从照片中删除 EXIF 数据，因此我使用[myMedia 模块](https://github.com/dbubs/myMedia-Titanium-Module)来获取 EXIF 数据，因此我仍然可以将 EXIF 数据发布到 PHP 后端。

模块返回的数组如下所示：

```
{
exif =     {
    ApertureValue = "2.970853567123413";
    BrightnessValue = "5.906054496765137";
    ColorSpace = 1;
    ComponentsConfiguration =         (
        0,
        0,
        0,
        1
    );
    DateTimeDigitized = "2012:12:22 12:59:56";
    DateTimeOriginal = "2012:12:22 12:59:56";
    ExifVersion =         (
        2,
        2,
        1
    );
    ExposureMode = 0;
    ExposureProgram = 2;
    ExposureTime = "0.007936508394777775";
    FNumber = "2.799999952316284";
    Flash = 16;
    FlashPixVersion =         (
        1,
        0
    );
    FocalLenIn35mmFilm = 35;
    FocalLength = "3.849999904632568";
    ISOSpeedRatings =         (
        80
    );
    MeteringMode = 5;
    PixelXDimension = 2592;
    PixelYDimension = 1936;
    SceneCaptureType = 0;
    SensingMethod = 2;
    ShutterSpeedValue = "6.973695755004883";
    SubjectArea =         (
        1295,
        967,
        699,
        696
    );
    WhiteBalance = 0;
};
location =     {
    latitude = "52.51933333333334";
    longitude = "13.40083333333333";
};
path = "assets-library://asset/asset.JPG?id=E5040F0C-C86A-411B-ADA8-36C9EC91A526&ext=JPG";
} 
```

我在互联网上进行了一些研究，以找出这是什么类型的数组，对我来说它似乎是一个 Plist (XML)。我查看了 myMedia 模块类，发现它使用 NSDictionary 类返回 EXIF 数据。

我尝试了一些 PHP Plist 解析来处理这个数组，但它们都没有真正起作用。我不知道如何解析这个数组。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:42:54.993

我找到了解决方案！**[JSONkit](https://github.com/johnezang/JSONKit)**解决了我的问题。Apple 自己的 JSON 库不起作用，它无法将 NSDictionary 对象转换为 JSON 字符串。

我在**MyMediaModule.M**中插入了这个字符串（在第 1473 行之后）：

```
NSString *JSONMeta = [metadata JSONString]; 
```

然后我替换了第 1475 行：

```
//[dictionary setObject:dictMeta forKey:@"metadata"];
[dictionary setObject:JSONMeta forKey:@"JSONMeta"]; 
```

也不要忘记包含 JSONkit 库：

```
#import "JSONKit.h" 
```

现在在 Appcelerator Titanium 中，只需使用`event.JSONMeta`而不是`event.metadata`：

```
mymedia.openPhotoGallery({
    success:function(event)
    {
        Ti.API.info(event.JSONMeta);
    }
} 
```

谢谢你的帮助！我从来没有用 Objective-C 写过代码，所以很难开始，但毕竟解决方案非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:15:23.120

这似乎是一个老式的 ASCII 属性列表。您可能找不到这种格式的任何解析器，因为它几乎不再用于交换——AFAIK 唯一可以解析它的是 Apple 自己的库，我什至不确定它们是否支持这种破旧的旧格式。你可能从 NSDictionary 的`description`方法中得到了这个，它不是为此目的而设计的。为了准备发布到服务器的数据，首先通过 NSJSONSerialization 运行它并发送它。然后你将处理普通的 JSON。（您也可以通过 NSPropertyListSerialization 运行它并使用您找到的 plist 库，但是考虑到这两个选项，我不明白您为什么会选择那个。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:17:59.513

从模块中获取结果并将其转换为字符串。将字符串传递到您的服务器并将其转换回 JSON...我不是 php 人，但我猜有一种方法可以在 php 中解析 JSON？

# javascript - 每次更改输入（其名称在数组中定义）时运行一个函数

> ID：14280812
> 
> 赞同：0
> 
> 时间：2013-01-11T15:03:40.867
> 
> 标签：javascript, arrays, input

我正在尝试这样做，以便在用户在页面上有未保存的设置时显示警告。

到目前为止，我已经在页面加载时向页面添加了一个 JSON 对象，并从那里获取了一个对象键数组。

接下来，每次更改其中一个设置时，我需要检查所有选项是否与 JSON 对象中指定的设置相同（我假设我可以通过循环执行此操作） - 我不知道如何要做的是，每次更改具有这些名称之一的输入时，从我拥有的键数组中运行一个 JS 函数。欢迎任何建议。这是我到目前为止所拥有的（有两个以上的选项，只是从这里删除以节省空间）。

JSON 对象 -

```
var front_page_admin_args = {"image_type":"rotate","slideshow_pagination":null}; 
```

制作键数组 -

```
var keys

try{ // Using Try/Catch as some older browsers do not support 'Object.keys()'
    keys = Object.keys(front_page_admin_args);
}
catch(err){
    var keys = $.map(front_page_admin_args, function(value, key){
        return key;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:10:13.827

当页面上的任何输入发生更改时，此代码将运行给定的嵌入函数。在里面你可以检查这个输入是否对你感兴趣。

```
var watchedKeys = ['email', 'password'];
$('input').change(function(e) {
  if (watchedKeys.indexOf(e.target.name) != -1) {
    alert(e.target.name + " has changed. new value:" + e.target.value);
  }
}); 
```

# .net - 具有 JSONP 但没有特殊属性的 WCF

> ID：14280814
> 
> 赞同：0
> 
> 时间：2013-01-11T15:03:46.467
> 
> 标签：.net, wcf, jsonp, compatibility

我有一个需要返回 JSON/JSONP 的 WCF 4.5 服务。我可以通过使用来做到这一点`WebScriptServiceHostFactory`，但这会将`__type`特殊属性添加到所有对象并将响应包装在一个`{d:{...}}`对象中。我不想要那个。

我可以通过使用来摆脱它`WebServiceHostFactory`，但它不支持 JSONP。

如何从 WCF 获得干净的 JSONP 输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:09:42.957

你的函数/方法有这些属性吗？

```
<OperationContract()> _
<WebGet(UriTemplate:="GetJobDetails?inpt={inpt}", BodyStyle:=WebMessageBodyStyle.Wrapped,
        RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Json)> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:12:37.433

您有几个选项可以通过 webHttpBinding 启用 JSONP：

如果要使用`WebServiceHostFactory`，可以更改该工厂创建的*默认*端点中`crossDomainScriptAccessEnabled`属性的默认值。这可以通过将以下部分添加到您的配置中来完成：

 *```
<system.serviceModel>
    <standardEndpoints>
        <webHttpEndpoint>
            <standardEndpoint crossDomainScriptAccessEnabled="true"
                              defaultOutgoingResponseFormat="Json"/>
        </webHttpEndpoint>
    </standardEndpoints>
</system.serviceModel> 
```

如果您不想更改应用程序中*所有*Web 服务主机的默认值，那么您可以仅对您的应用程序进行更改。一种替代方法是使用自定义服务主机工厂，它将根据需要设置端点：

```
 public class MyFactory : ServiceHostFactory
    {
        protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
        {
            return new MyServiceHost(serviceType, baseAddresses);
        }

        class MyServiceHost : ServiceHost
        {
            public MyServiceHost(Type serviceType, Uri[] baseAddresses)
                : base(serviceType, baseAddresses)
            {
            }

            protected override void OnOpening()
            {
                // this assumes the service contract is the same as the service type
                // (i.e., the [ServiceContract] attribute is applied to the class itself;
                // if this is not the case, change the type below.
                var contractType = this.Description.ServiceType;
                WebHttpBinding binding = new WebHttpBinding();
                binding.CrossDomainScriptAccessEnabled = true;
                var endpoint = this.AddServiceEndpoint(contractType, binding, "");
                var behavior = new WebHttpBehavior();
                behavior.DefaultOutgoingResponseFormat = WebMessageFormat.Json;
                endpoint.Behaviors.Add(behavior);
            }
        }
    } 
```

另一种选择是通过配置定义端点：

```
<system.serviceModel>
    <services>
        <service name="StackOverflow_14280814.MyService">
            <endpoint address=""
                      binding="webHttpBinding"
                      bindingConfiguration="withJsonp"
                      behaviorConfiguration="web"
                      contract="StackOverflow_14280814.MyService" />
        </service>
    </services>
    <bindings>
        <webHttpBinding>
            <binding name="withJsonp" crossDomainScriptAccessEnabled="true" />
        </webHttpBinding>
    </bindings>
    <behaviors>
        <endpointBehaviors>
            <behavior name="web">
                <webHttp/>
            </behavior>
        </endpointBehaviors>
    </behaviors>
</system.serviceModel> 
```*

# forms - Delphi 应用程序窗口 z 顺序和 MainFormOnTaskBar 属性

> ID：14280817
> 
> 赞同：8
> 
> 时间：2013-01-11T15:04:13.480
> 
> 标签：forms, delphi, windows-7, delphi-xe, z-order

我正在维护一个最初用 Delphi 7 编写并移植到 Delphi XE 的应用程序。

在使用 Windows 7 时，我们遇到了一些问题，例如模态窗口出现在主窗口下，最终无法与程序交互，因为用户希望与模态表单交互，而这是不可能的，因为它在主窗口下。

为了避免这个问题，我将项目的[MainFormOnTaskBar](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.MainFormOnTaskBar)属性更改为 True（旧项目没有此属性），现在我继续使用同一个项目。阅读文档我发现了新的 Form 属性[PopupParent](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TForm.PopupParent)。如果我将 MainFormOnTaskBar 设置为 True，是否必须使用此属性？这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-06T09:40:54.573

是的，对于“弹出”的模态表单，您必须使用[PopupParent](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TForm.PopupParent)或[PopupMode](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TCustomForm.PopupMode)来修复 Z 顺序，正如[Allen Bauer](https://stackoverflow.com/users/20552/allen-bauer)在他的博客文章[PopupMode 和 PopupParent](http://blogs.embarcadero.com/abauer/2004/02/10/295)中所解释的那样。

[MainFormOnTaskBar](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.MainFormOnTaskBar)文档说它与 pop-under 几乎没有关系：它用于选择从哪里获取任务栏上的 Title/Icon 信息（您的[Application](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.Application)或[MainForm](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.MainForm)）。

然而，[Steve Trefethen（前 Delphi 团队成员）的这篇文章](http://www.stevetrefethen.com/blog/the-new-vcl-property-tapplication-mainformontaskbar-in-delphi-2007)`MainFormOnTaskBar := True`做得更多，更详细地解释了更多细节。

这个“更多”具有涉及 z 顺序的后果。有些你可能更喜欢或更少，所以这里有几个例子：

*   [MainForm 将成为新子窗口的父级，](http://www.cybelesoft.com/blog/index.php/keep-child-windows-in-front/)这使得[MainForm 的 Z 顺序始终小于子窗口](http://borland.newsgroups.archived.at/public.delphi.ide.general/200705/0705109235.html)
*   就像您观察到的那样，它修复了 Delphi <= 8 版本中的大多数 z 排序问题（如果您希望它们恢复，包括可能出现在主窗体下的模态对话框，则设置`MainFormOnTaskBar := False`）
*   它支持某些形式的对接，[例如在 LMD 组件中](http://forum.lmd.de/discussion/205/application-mainformontaskbar-must-be-true-for-conjoined-docking-to-work-while-over-the-main-form)

请注意，与 Vista 引入的问题作斗争并非易事，因为微软引入了更多功能，但也剥夺了一些曾经拥有的自由应用程序。阅读Nathanial Woolls 的[这](http://web.archive.org/web/20121016073000/http://www.installationexcellence.com/articles/VistaWithDelphi/Original/Index.html)两篇[文章](http://web.archive.org/web/20121016071202/http://www.installationexcellence.com/articles/VistaWithDelphi/Index.html)，以获得更好的印象。

# ruby-on-rails - 如何在模型中调用控制器方法

> ID：14280818
> 
> 赞同：0
> 
> 时间：2013-01-11T15:04:15.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有一个与组关联的用户模型。关系如下

```
class User < ActiveRecord:;Base
  has_many :groups
end
class Group < ActiveRecord::Base
  belongs_to :user
  scope :user_groups, lambda { where(arel_table(:user_id).eq(@current_user.id) }
end

class ApplicationController < ActionController::Base
  def current_user
    @current_user ||= User.find(session['entity.user']) if session['entity.user']
  end
end 
```

我想在组索引页面中的 select_tag 中过滤 current_user 组。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:07:50.873

您不应该在模型内部访问这些数据（它违反了 MVC）。您最好将其作为参数传递给范围：

```
scope :user_groups, 
           lambda { |user| where(arel_table(:user_id).eq(user.try(:id) || user) } 
```

并这样称呼它：

```
User.user_groups(@current_user) # or you can pass @current_user.id, still works 
```

**注意**：您可以将 id（整数）或用户对象传递给`user_groups`lambda。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:08:36.403

有时您可能需要检查模型中的 current_user。所以在当前的用户方法中设置如下：

```
 ActiveRecord::Base.current_user = @current_user 
```

这将有助于检查您将来定义的任何模型中的 current_user。

# rest - Play Framework 2.0 - Restful URL 命名约定

> ID：14280822
> 
> 赞同：2
> 
> 时间：2013-01-11T15:04:46.723
> 
> 标签：rest, playframework, playframework-2.0, naming-conventions

我想提出这个问题，并从 Play 框架（特别是 Play 2.0）的其他用户那里获得一些反馈。

假设我有一个名为“FooBar”的实体。我们还假设我提供了一个允许在 URL 上进行 CRUD 操作的 Restful API `'http://<host>/api/foo_bar'`。

我的问题是，社区之间是否就如何命名 URL 达成共识，其中 URL 提供对名称包含多个单词的实体的访问？

我可以想到以下 4 个选项来命名这样的 URL，每个选项看起来都很合理：

1.  蛇案例（这将是 Rails 约定）- http:///api/foo_bar
2.  骆驼香烟盒 - `http://<host>/api/fooBar`
3.  帕斯卡案例——`http://<host>/api/FooBar`
4.  只是消除下划线（有这个名字吗？） -`http://<host>/api/foobar`

提前感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:55:35.923

AFAIK，网址没有约定。

大多数示例使用单个单词作为实体名称，并在 URL 中用小写字母表示它们：实体 = `Computer`，列出它们的路径 = `/computers`，所以`multi-word-parts`我建议使用小写字母和连字符或下划线 - 取决于您的习惯。

我还看到使用您指出的所有符号的 Play 项目和/或示例（即[Play 文档](http://www.playframework.org/documentation/2.0.4/Home)使用 Pascal，[play-authenticate 示例](https://github.com/joscha/play-authenticate/tree/master/samples/java/play-authenticate-usage)使用小写连字符符号等）

另一方面，对于普通用户可见的 URL（我知道这是题外话），特别是如果 URL 表示显示页面的标题，我建议使用`/The_Wikipedia_style`- 支持非拉丁字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:05:08.277

我会避免选项 2 和 3 有两个原因：

1.  URI 的路径组件区分大小写**，因此这些路径实际上可能指向您应用程序中的不同 REST 端点，这令人困惑。

2.  某些服务器（即在 Windows 上）将路径视为不区分大小写，如果您需要将应用程序迁移到不同的平台（或托管服务提供商），这可能会给您带来问题。

在选项 1 和 4 之间，我更喜欢 1（或连字符），这是事实上的标准，但我不知道任何官方信息。

** [URI 的路径组件的规范](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)没有指定不区分大小写，因为它明确指定了所有内容。

# jquery - 停止 jQuery 执行/评估 .html() 命令和运行脚本

> ID：14280823
> 
> 赞同：0
> 
> 时间：2013-01-11T15:04:47.683
> 
> 标签：jquery, google-chrome-extension

我想使用 jQuery 从 document.documentElement.innerHTML 的 resultText 字符串中遍历 DOM 树。

**代码**

```
console.log(request.data);
sourceDOM = $('<html>').html(request.data); 
```

当第 1 行运行时，我可以看到包括所有脚本在内的完整源代码。

当第 2 行运行时，我收到几行 Refused to load the script 因为它违反了以下 *Content Security Policy 指令错误：

> script-src 'self' 'unsafe-eval'

当我`sourceDOM`通过控制台检查时，我只看到`html`并且所有脚本标签都被删除了。

如何将 HTML 分配给不执行它的 JQuery 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:13:45.543

尝试

```
console.log(request.data);
sourceDOM = $(request.data); 
```

# activemq - 如何找到从 ActiveMQ 中提取消息的消费者的 IP？

> ID：14280824
> 
> 赞同：1
> 
> 时间：2013-01-11T15:04:50.623
> 
> 标签：activemq

我有`ActiveMQ`服务器（上面部署了 Camel），不同机器上的消费者从中读取消息。

我可以通过 Web 界面看到消息已入队和出队，`ActiveMQ`但我不知道它们在哪里登陆。

如何找到`IP`从队列中提取消息的消费者`ActiveMQ`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:09:43.410

好的，我看了看，`conf/camel.xml`发现消息被路由了。

# php - 使用 Ajax 拥有一组顺序的 DB 派生单选按钮

> ID：14280828
> 
> 赞同：0
> 
> 时间：2013-01-11T15:05:03.217
> 
> 标签：php, html, mysql, ajax

我以前从未使用过 Ajax，我正在尝试学习它（我喜欢在像同事建议的那样去 jquery 之前了解一些东西）。我有一个以单选按钮开头的页面（从数据库中获取的选项），onselect 应该触发一个新的单选按钮（同样，从数据库中获取的选项）。我从简单地显示初始“选择”的结果开始，但是当我从单选按钮中选择某些内容时没有任何反应，我真的不明白为什么。如果有人能够告诉我为什么这不符合我的预期，我会很高兴。

提前致谢

主页：

```
<html>
  <head>
    <script>
      function showGlycopeptides(str)
      {
        var xmlhttp;
        if (str=="")
        {
          document.getElementById("txtField").innerHTML="";
          return;
        }
        if (window.XMLHttpRequest)
        {
          xmlhttp=new XMLHttpRequest();
        }
        else 
        {
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()
        {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
          {
            document.getElementById("txtField").innerHTML=xmlhttp.responseText;
          }
        }
        xmlhttp.open("GET","getglycopeptides.php?q="+str,true);
        xmlhttp.send();
      }
    </script>
    <title>LeidenGlycoPeptide DataBase</title>
  </head>
  <body>
    <h1>Welcome to the LeidenGlycoPeptide DataBase</h1>
    <?php
      $link = mysql_connect("localhost","reader","") or die (mysql_error());
      mysql_select_db('leidenGlycoPeptide') or die ();
      $query = 'select protein from glycoPeptide';
      $result = mysql_query($query);
      mysql_close($link);  
    ?>
    <form>
      <p>Select glycopeptide to search for (interactive dialog)</p>
      <?php
         echo"<select name=\"prec\" onchange=\"showGlycopeptides(this.value)\">";
         echo"<option value=\"\">select glycoprotein</option>";
         while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
           foreach ($line as $col_value) {
             echo"<option value=\"$col_value\">$col_value</option>";
           }
         } 
         echo"</select>";
       ?>
    </form>
    <br>
    <div id="txtField"><b>Text field</b></div>
  </body> 
```

获取糖肽.php：

```
<html>
  <head>
    <title>glyco</title>
  </head>
  <body>
    <?php
      $q=$_GET["q"];
      $link = mysql_connect("localhost","reader","") or die (mysql_error());
      mysql_select_db("leidenGlycoPeptide",$link) or die();
      $query = "select glycoType from run,glycoPeptide where run.id = glycoPeptide.id and glycoPeptide.protein like '".$q."'";
      echo "<select name=\"type\" onchange=\"foo\">";
      echo "<option value=\"\">select glycosylation</option>";
      while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
      {
        foreach ($row as $col_value)
          {
            echo"<option value=\"$col_value\">$col_value</option>";
          }
      }
      echo "</select>";
      $result = mysql_query($query);
      mysql_close($link);
    ?>
  </body>
</html> 
```

----已编辑----

对代码进行了编辑，以便它们可以作为示例（供其他人使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:51:49.727

很抱歉将此作为答案发布，但我尚未解锁发表评论的功能。

我的猜测是问题出在 ajax 请求中，因为即使未发送查询参数，PHP 文件 getglycopeptides.php 也会返回一些内容。

验证这一点的一种简单方法是使用 chrome 上的网络面板或 firefox firebug 中的控制台面板。

当您从选择中选择不同的选项时，请检查是否正在发出新请求。

另一种方法是使用 console.log('Something'); 在哪里获得 ajax 响应，如果您看到控制台中正在打印“Something”，那么 ajax 正在被触发。请记住，console.log 在 IE 中不起作用。

只需先验证这一点，这样我们就可以排除它并发现问题。

# php - 数据库值显示两次

> ID：14280830
> 
> 赞同：2
> 
> 时间：2013-01-11T15:05:09.637
> 
> 标签：php

这是我从数据库中检索值的代码

```
 $query = "SELECT * FROM t_contact
                      WHERE id = {$project_details_id} LIMIT 1";
     $all_post_info1 = mysql_query($query, $connection);
     confirm_query($all_post_info1);
     $project_details = mysql_fetch_array(show_project_details($project_details_id));

     foreach ($project_details as $fieldname) {
        echo $fieldname . "</br>";
     } 
```

和

```
function confirm_query($confirm_result) {

    if (!$confirm_result) {
        die("Database query failed1: " . mysql_error());
    }
} 
```

我为每个字段获得两次输出。我的数据库中有 27 列，我得到 54 个输出。例如，数据库中有名称、电子邮件列，我的输出显示如下

```
name
name
email
email 
```

有些人请告诉我这段代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:09:13.550

> 通过使用 MYSQL_BOTH（默认），您将获得一个包含关联索引和数字索引的数组。

那是因为你`$project_details`实际上看起来像这样：

```
$project_details = array(
  [0] => 'name',
  [name] => 'name',
  [1] => 'email',
  [email] => 'email'
); 
```

尝试`MYSQL_ASSOC`在您的[`mysql_fetch_array`](http://php.net/manual/en/function.mysql-fetch-array.php)通话中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:11:34.563

尝试这样做：

```
$query = "SELECT * FROM t_contact
                        WHERE id = {$project_details_id} LIMIT 1";
$all_post_info1 = mysql_query($query, $connection);
confirm_query($all_post_info1);

while($data = mysql_fetch_assoc($all_post_info1))
{

print_r($data);

} 
```

mysql_fetch_assoc 将返回一个关联数组，这意味着一个数组，其中键与查询中的字段相关联。mysql_fetch_array 将返回一个包含字段以及数字键值的数组，因此是双变量。我很少使用 mysql_fetch_array，几乎在所有情况下 mysql_fetch_assoc 都是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:09:35.790

而不是使用 foreach 你应该使用 while。例如：

```
while($row = db_fetch_array($all_post_info1)) {
    echo $row[field_name];
} 
```

希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:09:37.673

默认情况下返回索引和关联格式的`mysql_fetch_array()`键。

使用`MYSQL_ASSOC`参数仅获取关联版本：

```
$project_details = mysql_fetch_array(show_project_details($project_details_id), MYSQL_ASSOC); 
```

按照惯例，我还会提醒您，**不推荐使用 mysql 函数**，您应该考虑使用例如[PDO](http://php.net/manual/en/ref.pdo-mysql.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T15:10:12.533

更改此行：

```
$project_details = mysql_fetch_array($project_details_id); 
```

有了这条线：

```
$project_details = mysql_fetch_array($project_details_id, MYSQL_ASSOC); 
```

# c++ - 生成二维魔法六边形格子的算法

> ID：14280831
> 
> 赞同：5
> 
> 时间：2013-01-11T15:05:15.857
> 
> 标签：c++, c

我正在尝试生成一个 2D 魔法六边形格子，（即我需要用 C 语言生成点的坐标）见附图，该图看起来像一个洋葱结构，其中较大的一个内有六边形，依此类推。

有人有想法吗？

注意：如果有人在其他语言中有答案，那没关系，我只需要看看，这样我就可以开始构建自己的代码了。提前致谢。

```
 void generate_particles(void)
      {/* Generates the particle - positions and charge
      Here it indicated to use the hexagonal referential !!*/
      int    i,j;
      int    n=3; /*n represent the nth centered hex number given by the formula 3*n(n- )+1*/
      double b;
      b=(1.0/sqrt(sqrt(3)))*sqrt(2.0/par.NA);
      /* b=1.0;*/

      fprintf(stderr,"Distributing %d particles  on the hexagonal lattice'...", par.N);

      for (i=0;i<n-1;i++)
     {
      coo[i][0]= (sqrt(3)*i*b)/2.0;
       for (j=0;j<(2*n-i-1);j++)
       {
        coo [i][1]= (-(2*n-i-2)*b)/2.0 + j*b;

       fprintf(stderr," %lf    %lf\n",coo[i][0],coo[i][1]);

        /*plot the points with coordinate (x,y) here*/
       if(coo[i][0]!=0)
           {     
       fprintf(stderr," %lf    %lf\n",-coo[i][0],coo[i][1]);
              /*plot the points with coordinates (-x,y)*/
         }
        }

        }fprintf(stderr," done\n\n");
       }  

        void write_configuration_file(void)
    {/* Writes the binary configuration file '<prefix>_config.<postfix>'
     i.e velocities and coordinates. */

     FILE *fp;
     char  filename[100];
      char  postfix_string[100];
      int   i;

      fprintf(stderr,"Writing configuration file");

     if (postfix >=0 ) {
    if      (postfix <   10) sprintf(postfix_string,"000%d",postfix);
    else if (postfix <  100) sprintf(postfix_string, "00%d",postfix);
    else if (postfix < 1000) sprintf(postfix_string,  "0%d",postfix);
    else if (postfix <10000) sprintf(postfix_string,   "%d",postfix);
    else                     sprintf(postfix_string,  "_%d",postfix);
    } else {
    fprintf(stderr,"\nThe internal postfix is negative.\n\n");
    exit(1);
    }

    sprintf(filename,"%s_config.%s",prefix,postfix_string); 

    fprintf(stderr," %s...", filename);

    if ((fp = fopen(filename,"r")) != NULL) {
    fprintf(stderr,"\nFile '%s' already exists. Don't want to overwrite it.\n\n",filename);
    fclose(fp);
    exit(1);
    }

     if ((fp = fopen(filename,"w")) == NULL) {
      fprintf(stderr,"Could not create file '%s'.\n\n",filename);
     exit(1);
     }

     /* postfix */
      if (fwrite(&postfix,sizeof(int),1,fp) != 1)
     { fprintf(stderr,"fwrite error 1.\n\n"); exit(1); }

     /* time */
     if (fwrite(&ti,sizeof(int),1,fp) != 1)
     { fprintf(stderr,"fwrite error 2.\n\n"); exit(1); }

     /* x,y coordinates of all particles/charges */

      if (fwrite(coo,sizeof(double) ,2*par.N,fp) != 2*par.N)
       { 
        fprintf(stderr,"fwrite error 4.\n\n"); exit(1); }

        fclose(fp);

        fprintf(stderr," done\n");
        }

and the main program is:

     int main()
    {
    int i;

         printf("\n");
         printf("\n");
          printf("***************************************************************\n");
      printf("* OK LETS GENERATE THE CONFIG FILE FOR MONTE CARLO SIMULATION *\n");
      printf("***************************************************************\n\n");

      read_wishlist();

      init_ran1();

      for (i=0; i<seed; i++) ran1_fast();

      if (par.N > 0) generate_particles();

      write_parameter_file();
      write_configuration_file();
      write_task_file();

      /*final_test();*/

      fprintf(stderr,"\n\nConfiguration successfully generated.\n\n");
    } 
```

好的，让我解释一下我的问题，实际上你之前给我的代码是完美的，我能够在 C 和 matlab 中绘制六边形中的粒子，但这只是在绘图；当我开始模拟时，每个粒子都有一个在我的代码中从 0 到 par.N 开始标记，但我写这个的方式只是读取第 13 层上的 13 个粒子，所以请你帮我找到一个解决方案，如何修改它，以便每个粒子都有一个提前协调谢谢。

@MohamedKALLEL 首先在函数 generate_particles

coo[i][0] 表示 x 坐标， coo [i](http://i.stack.imgur.com/JMIOj.png)y 坐标，只看 generate_particles 部分，忘记其余部分，它与您之前给我的相似，但是当我执行此文件时，我用自己的语言和其他变量编写了它，屏幕上绘制的坐标正是我的那个想要开始初始配置，但我们所做的是将这些坐标写入配置二进制文件中，问题是当我读取这个二进制文件时，似乎打印的唯一坐标是从 0 到 n-1 n 是层顺序，有一个我无法解决的问题，可能是我编写代码的方式，因为我有 547 个粒子，但这段代码只给了我 13 个坐标我应该给每个粒子一个标签，即 547 个粒子应该每个人都有自己的坐标这么清楚吗？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T17:21:14.237

```
int i, j;
float y,x;
float d=1.0;// d is the distance between 2 points as indicated in your schema
for(i=0; i<=(n-1); i++) {
    y = (sqrt(3)*i*d)/2.0;
    for (j = 0; j < (2*n-1-i); j++) {
        x = (-(2*n-i-2)*d)/2.0 + j*d;
        //plot the point with coordinate (x,y) here
        if (y!=0) {
            // plot the point with coordinate (x,-y) here
        }
    }

} 
```

用架构解释：

![在此处输入图像描述](../Images/fb024ca442ca0fa471f28edbeab6a9ef.png)

如您的维基百科链接所示[http://en.wikipedia.org/wiki/Centered_hexagonal_number](http://en.wikipedia.org/wiki/Centered_hexagonal_number)居中的`nth`六边形数由公式给出

![在此处输入图像描述](../Images/63a6815b0b4fc9c980b3d75ed7051803.png)

*   因此，对于 n = 1，六边形中的点数为 1。
*   对于 n = 2，六边形中的点数为 7。
*   对于 n = 3，六边形中的点数为 19
*   ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:30:39.630

在数学上，这些点是

```
(j + 2k, sqrt(3)j) L/2 
```

其中 j 和 k 是整数，L 是两个点之间的距离（图像中的蓝线）。

**编辑：**

^(这是打印第n)层的 (i,j) 对的代码：

```
for(int t=0; t<n ; ++t)
    {
      cout << " (" << t << ", " << n-t << ")" << endl;
      cout << " (" << n << ", " << -t << ")" << endl;
      cout << " (" << n-t << ", " << -n << ")" << endl;
      cout << " (" << -t << ", " << -n+t << ")" << endl;
      cout << " (" << -n << ", " << t << ")" << endl;
      cout << " (" << -n+t << ", " << n << ")" << endl;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:34:08.153

如果你只想要格子，那么坐标就是第一个六边形的坐标，水平行重复并移动。画几十个六边形，它会很明显。

洋葱参考让我认为你想构建一个六边形，然后在它的所有顶点上构建新的六边形，*然后*在第二代的外边界上构建另一代（第三代）六边形。

你可以通过蛮力来做到这一点。

*   绘制第一个六边形（参见例如 Aki Suihkonen 的答案）。
*   将其所有顶点放在一个封闭列表中。
*   对于所有连续的顶点对（当你在最后一点时，“下一个”是第一个），通过减去（或添加，取决于你是沿着你的六边形太阳还是 widdershins 走）120 度来构建一个等边三角形。通过前两点。
*   您得到的点数与边数（顶点对）的数量一样多。
*   这些点是新一代六边形的中心。您仍然拥有旧的边列表，以避免重绘已经存在的边。绘制这些六边形并存储它们的顶点（注意连接边上的重复项）。
*   新的顶点列表替换了第一个。
*   洗涤，冲洗，重复。

也可能有一个公式 - 尝试寻找“六边形镶嵌”。

更新：另一种可能性是使用相同的方法构建*三角形*网格并将它们组合成六边形（请参阅[此处](http://gwydir.demon.co.uk/jo/tess/grids.htm)查看漂亮的图形）。一旦你有了组成六边形的六个三角形，就有快速的算法来填充三角形；您可以调整这些以枚举内部点。还有一些快速方法可以检查一个点是否在三角形内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T15:16:40.867

极坐标形式为 R*exp(i*n*pi/3)；其中 n = 0..5。

这映射到 x=R*cos(n); y=R*sin(n)；n = 0..5 * pi / 3；

这使六边形以原点为中心（x=0，y=0）。

下一级六边形的角中心令人惊讶：

```
a = n*R*( exp(i*n*pi/3) + exp(i*(n+1)*pi/3);
            ___
           /   \
       ___/  b  \
      /   \     /
  ___/  a  \___/
 /   \     /   \
/  x  \___/  b1 \
\     /   \     /
 \___/ a1  \___/
           /   \
          /  b2 \
          \     /
           \___/ 
```

从“a”或“b”点开始，必须向下迭代 n-1 步。然后这些坐标是 center_a + m*R*exp(i*(n+4)/3) + m*R*exp(i*(n+5)/3)

# sql-server - 来自 Netbeans JSP 的 UnsupportedOperationException

> ID：14280832
> 
> 赞同：2
> 
> 时间：2013-01-11T15:05:20.207
> 
> 标签：sql-server, netbeans, jdbc, datasource

我正在使用以下规范创建一个基于 Web 的应用程序：Glassfish 服务器 3.1.1 - SQL Server 2012 Express - Netbeans 7.01 - JDK 1.7 - Sql Server 4.0 的 JDBC 驱动程序

我已经创建了一个连接资源和连接池，并且可以从 glassfish 管理 Web 界面成功 ping 池。然后我在连接池的 xml 文件中创建了一个数据资源（数据源）。

为了测试数据资源，我在 WEB-INF 文件夹之外创建了一个测试 JSP，并使用在上一步中创建的数据源添加了一个 DB 报告。

运行测试 JSP 时收到以下错误：

TYPE：异常报告

信息：

描述：服务器遇到内部错误 ()，导致它无法完成此请求。

异常：org.apache.jasperException：java.lang.unsupportedOperationException：不支持此操作。

根本原因：java.lang.UnsupportedOperationException：不支持此操作。

在过去的 2-3 天里，我一直在网上搜索解决方案，但我可以找到的所有示例都在异常描述中的“不支持此操作”之后提供了额外的详细信息/错误代码。

我检查了 glassfish，他们没有提供有关上述错误的其他详细信息。

希望有人遇到过同样的问题并且能够解决这个问题。

这是堆栈跟踪：

```
INFO: RAR7114: Unable to get ClientInfo for connection 
WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
java.lang.UnsupportedOperationException: This operation is not supported.
            at com.microsoft.sqlserver.jdbc.SQLServerConnection.setClientInfo(SQLServerConnection.java:2890)
            at com.sun.gjc.spi.jdbc40.ConnectionHolder40.setClientInfo(ConnectionHolder40.java:322)
            at com.sun.gjc.spi.jdbc40.ConnectionHolder40.close(ConnectionHolder40.java:530)
            at org.apache.taglibs.standard.tag.common.sql.QueryTagSupport.doFinally(QueryTagSupport.java:278)
            at org.apache.jsp.test.newjsp_jsp._jspx_meth_sql_query_0(newjsp_jsp.java:126)
            at org.apache.jsp.test.newjsp_jsp._jspService(newjsp_jsp.java:68)
            at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
            at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
            at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
            at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
            at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
            at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
            at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
            at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
            at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
            at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
            at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
            at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
            at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
            at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
            at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
            at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
            at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
            at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
            at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
            at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
            at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
            at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
            at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
            at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
            at java.lang.Thread.run(Thread.java:722) 
```

任何帮助都将得到应用。如果有人有推荐，我会使用另一种连接方法。谢谢！

JSP test.jsp。我将从数据库中存在的视图创建类，因此 JSP 中的 sql 相对简单。该报告是为了确保 JSP 可以与 sql server 数据库进行通信的测试。

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%>
<%-- 
Document   : test
Created on : Jan 11, 2013, 8:06:27 PM
Author     : Developer
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
    <sql:query var="result" dataSource="jdbc/TestAddOn">
        select * from tblCustomer
    </sql:query>

    <table border="1">
        <!-- column headers -->
        <tr>
        <c:forEach var="columnName" items="${result.columnNames}">
            <th><c:out value="${columnName}"/></th>
        </c:forEach>
    </tr>
    <!-- column data -->
    <c:forEach var="row" items="${result.rowsByIndex}">
        <tr>
        <c:forEach var="column" items="${row}">
            <td><c:out value="${column}"/></td>
        </c:forEach>
        </tr>
    </c:forEach>
</table>
    </body>
</html> 
```

XML 参考

```
<resource-ref>
        <res-ref-name>jdbc/TestAddOn</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
```

glassfish 资源 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
  <jdbc-resource enabled="true" jndi-name="jdbc/TestAddOn" object-type="user" pool-name="TestAddOnConnectionPool">
    <description/>
  </jdbc-resource>
  <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="com.microsoft.sqlserver.jdbc.SQLServerDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="TestAddOnConnectionPool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.ConnectionPoolDataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
    <property name="URL" value="jdbc:sqlserver://Localhost:1433;databaseName= MyDatabaseName"/>
    <property name="User" value="*******"/>
    <property name="Password" value="*******"/>
 </jdbc-connection-pool>
</resources> 
```

# java - JTextField setText() 方法在 run() 方法中不起作用

> ID：14280833
> 
> 赞同：2
> 
> 时间：2013-01-11T15:05:21.327
> 
> 标签：java, multithreading, swing

我在使用 JTextField 类的 setText() 方法时遇到问题。简而言之，它在下面的 CounterPanel 类中不起作用。它在 run() 方法中调用，它不会更新文本字段。其余代码运行（可以使用我留下的 println() 语句将其打印到控制台。

这些面板被添加到我也在下面包含的 MainWindow 类中。MainWindow 中有 4 个 CounterPanel，每个都有自己的线程。正如我所说，run() 方法中的其余代码工作正常，所以谁能告诉我哪里出错了？

非常感谢。

```
import java.awt.Color;

import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

import net.miginfocom.swing.MigLayout;

public class CounterPanel extends JPanel implements Runnable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private JLabel labelOne = new JLabel("Counter 1");
    private JTextField textFieldOne = new JTextField(3);
    private JLabel labelTwo = new JLabel("Counter 2");
    private JTextField textFieldTwo = new JTextField(3);

    private int counter;
    private String counterAsString = Integer.toString(counter);

    public CounterPanel() {
        this.setLayout(new MigLayout());
        this.setBorder(BorderFactory.createLineBorder(Color.black, 1));
        this.add(labelOne);
        this.add(textFieldOne);
        this.add(labelTwo);
        this.add(textFieldTwo);
    }

    @Override
    public void run() {
        while(counter < 100) {
            textFieldOne.setText(counterAsString);
            textFieldTwo.setText(counterAsString);
            System.out.println("Counter 1 = " + counterAsString + ", Counter 2 = " + counterAsString);
            counter++;
        }
        System.out.println("FINISHED");
    }

}

import java.awt.Color;

import javax.swing.*;

import net.miginfocom.swing.MigLayout;

public class MainWindow extends JFrame {

    private CounterPanel panel1 = new CounterPanel();
    private CounterPanel panel2 = new CounterPanel();
    private CounterPanel panel3 = new CounterPanel();
    private CounterPanel panel4 = new CounterPanel();

    private JLabel labelOne = new JLabel("A");
    private JLabel labelTwo = new JLabel("B");
    private JLabel labelThree = new JLabel("C");
    private JLabel labelFour = new JLabel("D");

    public MainWindow() {
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setLayout(new MigLayout());
        this.add(labelOne, "gapright 20px");
        this.getContentPane().add(panel1, "wrap");
        this.add(labelTwo);
        this.getContentPane().add(panel2, "wrap");
        this.add(labelThree);
        this.getContentPane().add(panel3, "wrap");
        this.add(labelFour);
        this.getContentPane().add(panel4);
        this.pack();
        this.setVisible(true);
    }

    public static void main(String[] args) {
        MainWindow window = new MainWindow();
        window.setLocationRelativeTo(null);
        window.runThreads();
    }

    public void runThreads() {
        Thread panelThread1 = new Thread(panel1);
        Thread panelThread2 = new Thread(panel2);
        Thread panelThread3 = new Thread(panel3);
        Thread panelThread4 = new Thread(panel4);

        panelThread1.start();
        panelThread2.start();
        panelThread3.start();
        panelThread4.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:07:47.290

问题是：

Swing 组件应该在[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)via`SwingUtilities.invokeXXX`块上创建和操作。

你不这样做。阅读：

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:08:01.580

每次 int 计数器获取时，您的 String counterAsString 都不会更新

```
while(counter < 100) {
            // put this here
            >>  counterAsString = Integer.toString(counter);
            textFieldOne.setText(counterAsString);
            textFieldTwo.setText(counterAsString);
            System.out.println("Counter 1 = " + counterAsString + ", Counter 2 = " + counterAsString);
            counter++;
} 
```

# flash - 如何获取实例的 alpha 值（在 JSFL 中）？

> ID：14280834
> 
> 赞同：0
> 
> 时间：2013-01-11T15:05:21.373
> 
> 标签：flash, properties, alpha, getter-setter, jsfl

如果我在舞台上的一个实例上使用简单的 Alpha 颜色效果，我如何通过 JSFL 访问它？

![在此处输入图像描述](../Images/414b75c957538c626fad21cfaa262fea.png)

实例的 *.colorAlphaAmount 和 *.colorAlphaPercent 不会访问上图的值。它仅对“高级颜色”效果有用。

它看起来像**fl.getDocumentDOM().setInstanceAlpha(18);** 可以设置 alpha 属性，但**不能**获取它。此外，此方法会假定在当前时间线/图层/帧中选择了实例，而我可能不会（因为我正在遍历库而不打开每个单独的符号）。

在其他地方的实例中是否有隐藏的 alpha 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:37:38.343

其实我很笨！**colorAlphaPercent**是从中读取它的正确值。

但是，如果 alpha 被补间，它将无法正确读取。它只会引用动画关键帧处的 alpha 值，而不是介于两者之间。

因此，对于简单的线性、easeIn 和 easeOut 补间，我开发了这个 MathUtils 类，它可能对尝试从补间动画中读取 alpha 和其他值（x、y、缩放、倾斜、旋转）的其他人有所帮助。

您可以将以下内容放入它自己的 JSFL 文件中，然后将其加载到您需要的任何地方。

```
MathUtils = {
    pi2: Math.PI/2,
    easeValue: function( pStart, pFinish, pRatio, pEasing ) {
        var diff = pFinish - pStart;

        var eased =     pEasing > 0 ? this.easeOut( pRatio ) : this.easeIn( pRatio );
        var linear =    pRatio;

        var blendRatio =    Math.abs(pEasing);
        var easeBlend =     blendRatio * eased;
        var linearBlend =   (1 - blendRatio) * linear;

        return pStart + diff * (easeBlend + linearBlend);
    },
    easeIn: function( pRatio ) {
        return 1 - Math.sin((1-pRatio) * this.pi2);
    },
    easeOut: function( pRatio ) {
        return Math.sin(pRatio * this.pi2);
    }
}; 
```

**如何使用这个：**

*pStart, pFinish*：提供您尝试读取的元素的开始值和结束值（换句话说，它是开始关键帧和下一个关键帧的 alpha）。

*pRatio*：一个从 0.0 到 1.0 的值，表示给定帧的补间距离。通常，可以使用**(currentFrameID - startFrameID) / (endFrameID - startFrameID)**计算此值。

*pEasing*：给**startFrame**的缓动值，通常在 -100 和 100 之间（0 = 线性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:36:57.620

好课！

它与转换为关键帧和读取值的工作方式相同吗？

如果是这样，那真是个好主意（希望我们在 CS7 中不需要这个！）

# php - urlencoded 数据上的 escapeshellarg()

> ID：14280835
> 
> 赞同：0
> 
> 时间：2013-01-11T15:05:23.427
> 
> 标签：php

我将 $data (array) 从一台服务器发送到另一台服务器，如下所示。当它到达第二个服务器时，$data 元素显然是 urlencoded。在第二台服务器上，我希望在 exec() 中使用一些 $data。即使我传递了一个哈希并确保它在另一端有效，我仍然希望在适当的时候使用 escapeshellarg()。由于 $data 元素已经被 urlencoded，我应该如何应用 escapeshellarg()？谢谢

```
curl_setopt($ch,CURLOPT_POSTFIELDS,flatten_GP_array($data));

function flatten_GP_array(array $var,$prefix = false)
{
    //Used for CURL routines when sending multi-dimential array
    $return = array();
    foreach($var as $idx => $value){
        if(is_scalar($value)){
            if($prefix){$return[$prefix.'['.$idx.']'] = urlencode($value);}
            else {$return[$idx] = urlencode($value);}
        }
        else {$return = array_merge($return,library::flatten_GP_array($value,$prefix ? $prefix.'['.$idx.']' : $idx));}
    }
    return $return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:15:02.220

我建议您使用只有您的主机和服务器知道的非常长的加密密钥来加密您的数据。

您可以使用John Conde 的[这个加密/解密类 (StackOverflow)](https://stackoverflow.com/a/2448441/601386)。

为简单起见，我将简单地序列化您的`$data`数组，对其进行加密并将其发送到您的服务器。

```
$urlData = Encryption::encrypt(serialize($data));
curl_setopt($ch,CURLOPT_POSTFIELDS,array('data' => $urlData)); 
```

在您的传真服务器一侧，只需解密数据并再次反序列化

```
$data = unserialize(Encryption::decrypt($dataParameterFromUrl)); 
```

您知道的服务器端拥有与客户端上完全相同的数据，并且可以用它做任何您想做的事情。

此外，您可以使用[质询响应](https://stackoverflow.com/a/9934272/601386)之类的方法来验证您的主机。

# xml - 如何在 QTP 的 VBScript 中从 db2 数据库中检索 xml 列

> ID：14280836
> 
> 赞同：0
> 
> 时间：2013-01-11T15:05:29.247
> 
> 标签：xml, vbscript, db2, qtp

我正在尝试从 DB2 数据库中的表中检索 XML 列。使用下面的代码，我可以检索任何没有 xml 作为数据类型的列：

```
query = "some query"  
strConn = "my connection string"  
set dbConn = CreateObject("ADODB.Connection")  
set rs = CreateObject("ADODB.RecordSet")  
dbConn.Open strConn  
rs.Open query, dbConn  

rs.MoveFirst  
While Not rs.EOF  
 data = rs.Fields(0)  
 rs.MoveNext  
Wend  
dbConn.Close 
```

当数据是 xml 数据类型时，“data = rs.Fields(0)”行会引发“未指定错误”。我想既然记录集返回一个 XML 对象，我需要将它分配给这样的 DOM 对象：

```
Set xDOM = CreateObject("Microsoft.XMLDOM")  
rs.Save xDOM, adPersistXML 
```

但这仍然不起作用，QTP 在执行保存行时会引发“未指定的错误”。

我用谷歌搜索了答案，但找不到任何有用的东西。有没有人成功地做到了这一点？

感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:47:22.947

根据[DB2 - .NET 数据类型](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.swg.im.dbclient.adonet.doc/doc/c0053251.html)，DB2Xml 映射到 Byte()/Blob。因此，**也许**您可​​以像盖茨先生[处理图片](http://support.microsoft.com/kb/258038/en-us)一样处理您的 XML 字段，例如：

```
Set cn = New ADODB.Connection   ---> CreateObject("ADODB.Connection")
cn.Open "DB2 Connection String"

Set rs = New ADODB.Recordset    ---> CreateObject("ADODB.Recordset")
rs.Open "Your SQL", cn, adOpenKeyset, adLockOptimistic ---> Const defines needed

Set mstream = New ADODB.Stream ---> CreateObject("ADODB.Stream")
mstream.Type = adTypeBinary ---> Const define needed
mstream.Open
mstream.Write rs.Fields("Your XML field").Value
mstream.SaveToFile "fullfilespec.xml", adSaveCreateOverWrite ---> Const define needed

rs.Close
cn.Close 
```

（显然未经测试的空气代码）

PS你`rs.Save xDOM, adPersistXML`完全错了；.Save 将整个记录集保存到指定为第一个参数的文件中。

# emacs - yasnippets 不适用于 javascript 模式

> ID：14280838
> 
> 赞同：2
> 
> 时间：2013-01-11T15:05:34.053
> 
> 标签：emacs, yasnippet

我在 .emacs 中有以下代码：

```
;yasnippet
;;{{{

(load (concat *my-emacs-lib-dir* "plugins/yasnippet/yasnippet"))
(setq yas/snippet-dirs nil)
(yas/initialize)

;; Develop and keep personal snippets under ~/emacs.d/yasnippets
(setq yas/root-directory (concat *my-emacs-lib-dir* "yasnippets"))
(yas/load-directory yas/root-directory)

;;}}}
(add-hook 'javascript-mode-hook (lambda () (yas/minor-mode-on))) 
```

我在`*my-emacs-lib-dir* "yasnippets/javascript-mode"`和 中有片段文件`*my-emacs-lib-dir* "yasnippets/php-mode"`。

它适用于 php 模式，不适用于 javascript 模式。设置相同，文件没问题。可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:49:43.440

您确定在 javascript 文件中打开了`javascript-mode`吗？查看`major-mode`变量 (with `C-h v`) 的值，如果它与 不同`javascript-mode`，则以该模式的名称创建新目录，并将文件添加到`.yas-parents`该目录中。放入`javascript-mode`这个文件，然后保存...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T17:42:57.940

模式名称是`js-mode`，钩子是`js-mode-hook`。

# android - 与游标的内连接产生另一个游标对象

> ID：14280842
> 
> 赞同：0
> 
> 时间：2013-01-11T15:05:54.743
> 
> 标签：android, sqlite, cursor, android-contentprovider

事实上，我有 2 个`Cursor`，一个是 SQLite 游标，另一个来自`ContentProvider`- 在它下面是复杂的 SQLite 查询 - 但我无权访问它。

两个游标具有相同的唯一`_ID`字段。在纯 SQL 中，使用这些 id 字段连接它们真的很容易，但在我的情况下不是这样，因为 2nd Cursor 不是 SQLite 查询。

我需要产生结果加入`Cursor`。也`CursorJoiner`没有`MergeCursor`帮助我。

任何想法，线索，提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:15:55.393

选项#1：编写你自己的实现`Cursor`——也许是扩展`AbstractCursor`——进行连接。我在[一本已停产的书的过时版本中](http://commonsware.com/AdvAndroid/AdvAndroid-1_2-CC.pdf)有一些古老的代码证明了这一点（见第 186-190 页）。

选项 #2：创建一个`MatrixCursor`表示连接的。

# extjs - extjs 文本字段和特殊字符 (& + #)

> ID：14280847
> 
> 赞同：2
> 
> 时间：2013-01-11T15:06:02.553
> 
> 标签：extjs, special-characters, textfield

我有一个名为 New Project 的窗口，其中包含 2 个字段集：设置项目属性（其中包含文本字段，用户可以在其中输入项目名称、项目代码等详细信息）和设置权限（用户可以在其中选中/取消选中复选框以指示权限给定项目成员的级别）。项目名称和项目代码是接受空格和特殊字符的文本字段。当用户在填写所有项目属性并选择适当的项目权限后单击“创建项目”按钮时，将生成一个字符串，然后将其用于 Ajax 请求并创建项目。

但是，如果用户输入的项目名称中包含 &（与号）字符，则项目会被保存，但与号字符及其后面的所有字符都不会被保存。例如，如果我输入项目名称为“Testing1&56”，在按下创建项目按钮后，项目被创建并且项目名称变为“Testing1”（&56 不保存/显示）。当在项目名称字段中输入加号 (+) 时，也会发生类似的情况。按下 Create Project 按钮后，项目已创建，但加号消失，取而代之的是一个空格。比如我输入“Testing+Developing”作为Project Name，点击Create Project按钮后，项目创建完成，Project Name变成“Testing Developing”。

我发现在该字符串中，显示了字符 & 和 +。但是，一旦执行了 Ajax 请求并创建了项目，“&”号及其后面的所有字符和加号就不会保存在“项目名称”中。

任何有关如何解决此问题的提示将不胜感激。

PS 此外，项目名称字段中不接受井号 (#) 符号 - 当我单击创建项目按钮时，我收到错误消息“创建项目失败”。但是，我希望用户可以在“项目名称”字段中输入 # 符号，并在用户单击“创建项目”按钮时创建这样的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:40:07.670

在请求的情况下使用`Post`请求或`encodeURI()`用于 url 编码`Get`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:09:51.073

encodeURIComponent 有效！我出错的地方是我试图对 params 变量进行整体编码（通过尝试 encodeURIComponent(params)），而我应该分别对每个变量（项目名称、项目代码等）进行编码。这是如何完成的：

```
var result = Ext.String.format("?project.ProjectName={0}&project.ProjectCode={1}&project.BaseFormatID={2}&region={3}&project.Company={4}&project.Location={5}&project.StartDate={6}&project.DeadlineDate={7}", encodeURIComponent(projectname), encodeURIComponent(projectcode), projectformat, region, encodeURIComponent(company), encodeURIComponent(location), startdate, deadlinedate); 
```

# asp.net-mvc - 使用多个 List<> 填充 mvc4 视图模型

> ID：14280848
> 
> 赞同：0
> 
> 时间：2013-01-11T15:06:01.857
> 
> 标签：asp.net-mvc, asp.net-mvc-viewmodel, view-model-pattern

我有一个包含 22 个类别的列表，每个类别大约有 8 个菜单项，但我的视图模型最终只有列表中的最后一项。我很难看出问题出在哪里。
在这一点上，我确定问题在于我如何填充视图模型，但我不知道问题出在哪里。

**视图**模型：

```
public class MenuViewModel    

    public List<CategoryViewModel> CategoryList { get; set; } 
```

* * *

```
public class CategoryViewModel
{
    public int CategoryID { get; set; }
    public string CategoryTitle { get; set; }
    public List<MenuItemViewModel> MenuItemList { get; set; }
}

public class MenuItemViewModel
{
    public string Title { get; set; }
    public string Note { get; set; }
    public string Description { get; set; }
    public List<PriceViewModel> PriceList { get; set; }

} 
```

* * *

```
public class PriceViewModel
{
    public decimal PriceValueRegularLunch { get; set; }
    public decimal PriceValueSmallLunch { get; set; }
    public decimal PriceValueLargeLunch { get; set; }

    public decimal PriceValueRegularDinner { get; set; }
    public decimal PriceValueSmallDinner { get; set; }
    public decimal PriceValueLargeDinner { get; set; }

    public decimal PriceValueRegularTakeOut { get; set; }
    public decimal PriceValueSmallTakeOut { get; set; }
    public decimal PriceValueLargeTakeOut { get; set; }
} 
```

* * *

```
private MenuViewModel LoadViewModel(int menuNameID)        
{

        List<Category> returnedCategories = GetAllMenuDataModel.GetAllMenuItemsByCategory(menuNameID);

        MenuViewModel vmMenu = new MenuViewModel();

        PriceViewModel vmPrices = new PriceViewModel();

        foreach (Category category in returnedCategories)
        {
            CategoryViewModel vmCategory = new CategoryViewModel
                                               {
                                                   CategoryID = category.categoryId,
                                                   CategoryTitle = category.categoryTitle
                                               };

            foreach (MenuItem menuItem in category.MenuItems)
            {
                MenuItemViewModel vmMenuItem = new MenuItemViewModel
                                                   {
                                                       Title = menuItem.itemTitle,
                                                       Description = menuItem.itemDescription,
                                                       Note = menuItem.itemNote
                                                   };

                foreach (Price price in menuItem.Prices)
                {
                    switch (price.MealType.mealName.ToLower())
                    {
                        case "lunch":
                            if (price.ServingSize.sizeName == "Regular")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            if (price.ServingSize.sizeName == "Small")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            if (price.ServingSize.sizeName == "Large")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            break;
                        case "dinner":
                            if (price.ServingSize.sizeName == "Regular")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            if (price.ServingSize.sizeName == "Small")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            if (price.ServingSize.sizeName == "Large")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            break;
                        case "takeOut":
                            if (price.ServingSize.sizeName == "Regular")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            if (price.ServingSize.sizeName == "Small")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            if (price.ServingSize.sizeName == "Large")
                            {
                                vmPrices.PriceValueLargeLunch = price.priceValue;
                            }
                            break;
                    }

                    vmMenuItem.PriceList = new List<PriceViewModel> { vmPrices };
                }

                vmCategory.MenuItemList = new List<MenuItemViewModel> { vmMenuItem };
            }
            vmMenu.CategoryList = new List<CategoryViewModel> { vmCategory };
        }
        return vmMenu;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:13:19.880

是的，问题在于您填充视图模型的方式。您必须初始化列表，然后向其中添加项目：

```
private MenuViewModel LoadViewModel(int menuNameID)
{
    List<Category> returnedCategories = GetAllMenuDataModel.GetAllMenuItemsByCategory(menuNameID);
    MenuViewModel vmMenu = new MenuViewModel();
    vmMenu.CategoryList = new List<CategoryViewModel>();
    foreach (Category category in returnedCategories)
    {
        CategoryViewModel vmCategory = new CategoryViewModel
        {
            CategoryID = category.categoryId,
            CategoryTitle = category.categoryTitle
        };
        vmCategory.MenuItemList = new List<MenuItemViewModel>();

        foreach (MenuItem menuItem in category.MenuItems)
        {
            MenuItemViewModel vmMenuItem = new MenuItemViewModel
            {
                Title = menuItem.itemTitle,
                Description = menuItem.itemDescription,
                Note = menuItem.itemNote
            };
            vmMenuItem.PriceList = new List<PriceViewModel>();

            foreach (Price price in menuItem.Prices)
            {
                PriceViewModel vmPrices = new PriceViewModel();
                switch (price.MealType.mealName.ToLower())
                {
                    case "lunch":
                        if (price.ServingSize.sizeName == "Regular")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        if (price.ServingSize.sizeName == "Small")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        if (price.ServingSize.sizeName == "Large")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        break;
                    case "dinner":
                        if (price.ServingSize.sizeName == "Regular")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        if (price.ServingSize.sizeName == "Small")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        if (price.ServingSize.sizeName == "Large")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        break;
                    case "takeOut":
                        if (price.ServingSize.sizeName == "Regular")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        if (price.ServingSize.sizeName == "Small")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        if (price.ServingSize.sizeName == "Large")
                        {
                            vmPrices.PriceValueLargeLunch = price.priceValue;
                        }
                        break;
                }
                vmMenuItem.PriceList.Add(vmPrices);
            }
            vmCategory.MenuItemList.Add(vmMenuItem);
        }
        vmMenu.CategoryList.Add(vmCategory);
    }
    return vmMenu;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:10:10.943

这是因为在循环的底部，不是*将*项目添加到列表中，而是创建了一个包含一个项目的新列表。

`vmMenuItem.PriceList.Add(vmPrices)`（同样适用于 vmCategory 和 vmMenu）可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:13:10.283

在顶部添加这个

```
 vmMenuItem.PriceList = new List<PriceViewModel> ;
    vmCategory.MenuItemList = new List<MenuItemViewModel> ;
    vmMenu.CategoryList = new List<CategoryViewModel> ; 
```

然后最后做

```
 vmMenuItem.PriceList.Add(vmPrices );
                }
                vmCategory.MenuItemList.Add(vmMenuItem);
            }
            vmMenu.CategoryList.Add(vmCategory ); 
```

你没有添加你正在用新的替换它们

# iframe - iframe 与静态代理

> ID：14280853
> 
> 赞同：1
> 
> 时间：2013-01-11T15:06:31.607
> 
> 标签：iframe, proxy, load, load-balancing

我正在研究未来的负载要求，想知道为什么不将 iframe 用于静态内容，将其定向到专用于仅静态内容的服务器？

静态服务器可以与动态内容服务器位于相同或不同的物理系统上。

这将代替必须在动态服务器前面配置负载平衡器和静态代理服务器（如 Varnish）。

FWIW 我在旧框架时代就这样做了，当时我们只有一个 Pentium I @ 133 Mhz（在框架变得邪恶之前）

***编辑：***我收集到如果 iframe 的内容被过度设计，它们可能会对调整大小和其他页面级事件感到不愉快。IIRC 这可以避免，但 iframe 不会继承任何样式更改（CSS 不会级联到 iframe 内容和/或跨域阻抗）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:31:00.920

如果您必须更改站点的外观和感觉，您不会希望将负载平衡问题作为副作用来处理。

你提到处理能力。今天的处理器比 Pentium 133 强大 1000 倍。在尝试之前，我真的很想确认处理器存在瓶颈

# python - 即使列表不能被 10 整除，也可以根据百分比将列表分成四部分。 Python

> ID：14280856
> 
> 赞同：3
> 
> 时间：2013-01-11T15:06:35.760
> 
> 标签：python, math, python-2.7

所以我正在处理一个未知长度的列表。我需要把这份清单分成四个部分。

第一部分 = 列表的前 20%

第二部分 = 列表的 20% 到 40%

第三部分 = 列表的 40% 到 80%

第四部分 = 从列表的 80% 到 100%。

**现在的问题是，如果列表中的元素少于 10 个，我的一些列表将是空的。我的问题是如何避免这个问题。**

这是我现在拥有的脚本：

```
x = ["one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten"]

twentyPercentOne = len(x) * 0.2

twentyPercentTwo = len(x) * 0.4

fourtyPercentThree = len(x) * 0.8

i = 0
j = 2

m = []
while j < (twentyPercentOne + 1):
    m.append(x[i:j])
    i = (i + 2)
    j = (j + 2)

h = []  
while j < (twentyPercentTwo + 1):
    h.append(x[i:j])
    i = (i + 2)
    j = (j + 2)

l = []        
while j < (fourtyPercentThree + 1):
    l.append(x[i:j])
    i = (i + 2)
    j = (j + 2)

t = x[i:len(x)] 
```

输出：

```
[['one', 'two']]
[['three', 'four']]
[['five', 'six'], ['seven', 'eight']]
['nine', 'ten'] 
```

如果列表长度小于 10，则输出：x = [“一”、“二”、“三”、“四”、“五”、“六”、“七”]

```
[['one', 'two']]
[]
[['three', 'four'], ['five', 'six']]
['seven'] 
```

有人知道怎么做这个吗？我知道它更多的是数学问题而不是 python 问题，但我不知道该怎么做，并且已经研究了好几天。我将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T15:17:59.717

这应该是正确的方法，对于任何大小的任意数量的拆分（不仅仅是四个）（只要它们加起来为 1）：

```
def percentage_split(seq, percentages):
   assert sum(percentages) == 1.0
   prv = 0
   size = len(seq)
   cum_percentage = 0
   for p in percentages:
       cum_percentage += p
       nxt = int(cum_percentage * size)
       yield seq[prv:nxt]
       prv = nxt 
```

（这是一个生成器函数，您可以像这样获取四分位数列表：

```
list(percentage_split(x, [0.25]*4)) 
```

)

如果您安装了 numpy，它可能会更简洁：

```
from numpy import cumsum

def percentage_split(seq, percentages):
    cdf = cumsum(percentages)
    assert cdf[-1] == 1.0
    stops = map(int, cdf * len(seq))
    return [seq[a:b] for a, b in zip([0]+stops, stops)] 
```

如果你只想要四个相等的四分位数......

```
numpy.split(seq, 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:24:04.210

您应该清楚，不可能以这种方式以匹配长度划分列表。但这里有另一种方式：

```
def do_split(x, percent):
    L = len(x)
    idx1 = [0] + list(int(L * p) for p in percent[:-1])
    idx2 = idx1[1:] + [L]
    return list(x[i1:i2] for i1,i2 in zip(idx1, idx2))

splits = [0.2, 0.4, 0.8, 1.0]
print do_split(["one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten"], splits)
# ---> [['one', 'two'], ['three', 'four'], ['five', 'six', 'seven', 'eight'], ['nine', 'ten']]
print do_split( ["one", "two", "three", "four", "five", "six", "seven"], splits)
# --> [['one'], ['two'], ['three', 'four', 'five'], ['six', 'seven']] 
```

# java - 运行时高效的公式绑定

> ID：14280863
> 
> 赞同：1
> 
> 时间：2013-01-11T15:06:55.567
> 
> 标签：java, runtime, formula, jvm-languages

我的 UI 的元素之一是显示项目列表的表格，按类别聚合，并带有一些公式（请参阅下面的目标输出）。

允许用户将单元格绑定到类似电子表格的公式的*最佳方法是什么？*

*   性能：实际数据变化频繁，表可能很大，公式很复杂，因此性能和 CPU 使用率是一个问题。
*   易于配置（假设配置由开发人员完成，因此可能涉及编程）
*   配置的可维护性

到目前为止我设想的方法：

1.  使用 Java Scripting API，但我宁愿坚持使用基于 JVM 的方法以获得更好的性能
2.  在运行时创建`interface Formula { double calculate(); }`并生成、编译和加载实现 - 允许 JIT 编译生成的方法
3.  与 2 相同，但使用另一种基于 JVM 的语言，例如 clojure，它允许轻松的即时编译并具有非常适合的功能方法（例如，map/reduce 将有助于下面的平均值和总和计算） - 不确定关于性能影响。

**哪种方法更有意义？我应该考虑其他任何解决方案或库吗？**

* * *

**例子**

为了使目标更清晰，这里是一个人为的例子——让我们假设表中的项目是：

```
public class Item() {
    public String category;
    public String name;
    public int quantity;
    public double price;
} 
```

**目标输出**

```
Category     Name        Quantity    Price (avg)     Value (sum)
All                                      82            1,090

Bikes                                    45              650
             Bike 1         10           40              400
             Bike 2          5           50              250

Cars                                    120              440
             Car 1           3          100              300
             Car 2           1          140              140 
```

**列配置**

列可以这样定义：

```
Column #      Formula
    1         item.name;
    2         item.quantity;
    3         item.price;
    4         Math.abs(column_2 * column_3); //calls a JDK method 
```

**聚合配置**

聚合类别和汇总公式可以这样定义：

```
AGGREGATION #1: Category cat = item.category();
Column #      Formula
    1         cat;
    2         "";
    3         thisColumn.filter(cat).items().average(); //utility method
    //this one is more complex
    4         { double sum = 0;
                for (double value : thisColumn.filter(cat).items())
                    sum += value;
                return sum;
              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:32:06.840

我将使用您的用户可以使用的自定义域特定语言，并让 ANTLR 在 java 中生成一个本机解析器，将表达式解析为可执行函数。

请参阅例如[http://arcanecoder.blogspot.be/2008/04/using-antlr-to-create-excel-like.html](http://arcanecoder.blogspot.be/2008/04/using-antlr-to-create-excel-like.html)以获取执行类似操作的示例，或[http://www.antlr.org/wiki/ display/ANTLR3/Expression+evaluator](http://www.antlr.org/wiki/display/ANTLR3/Expression+evaluator)用于更新的一个。

您可以定义“sum”、“average”等函数并将其映射到自定义Java 代码，并使用例如$1 或${name} 让它们引用属性。

您只定义您希望用户使用的那些函数，因此他们不能使用通用脚本语言中可用的任何有害函数。

# android - 安卓上的 Wowza .mp3 RTSP 流

> ID：14280865
> 
> 赞同：5
> 
> 时间：2013-01-11T15:06:58.083
> 
> 标签：android, mp3, rtsp, live-streaming, wowza

我想使用默认的 MediaPlayer 库在 android 上播放 wowza .mp3 流。但是我尝试使用android本身提供的API演示播放流，但它不起作用。尽管 android 文档声明它确实如此。

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

我查看了 wowza 文档，发现 .mp3 rtsp 流无法在任何 Android 设备上播放。 [http://www.wowza.com/forums/content.php?62](http://www.wowza.com/forums/content.php?62)

我很困惑，这里真正的问题是什么，因为一个文档说明它可以，而另一个文档说明它没有？有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:15:28.233

您应该对 MP3 文件使用 HTTP 流，这是由 Wowza 支持的，参考：[http ://broadcastengineering.com/products/wowza-expands-media-server-2-http-streaming-ability](http://broadcastengineering.com/products/wowza-expands-media-server-2-http-streaming-ability)

您还可以找到适用于 Android 的 MP4 规格，甚至是多个平台支持的 MP4 规格并使用它们。根据您的连接带宽，带有 AAC 音频的 480p 或 720p 应该可以在任何地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T02:12:18.857

我在开发 Android 媒体播放器时遇到了同样的问题。我使用 iMove 从 .mp4 文件中分离音频。这很容易做到，双击视频并选择分离音频，然后删除音轨。

我分别传输视频轨道和音轨，至于视频我使用rtsp，至于音频我使用apache web服务器，android可以静态读取音频，就像读取本地文件一样。

顺便说一句，我尝试使用 Wowza 提供的每个协议来流式传输 .mp3，但它们都不起作用。

我的代码如下：

```
public void PlayVideo() {
        MediaController vidControl = new MediaController(this);
        vidControl.setAnchorView(VideoPlayer);
        VideoPlayer.setMediaController(vidControl);

        VideoPlayer.setVideoPath("rtsp://137.110.90.123:1935/vod/SamNoSound.mp4");

        VideoPlayer.start();

    }

public void PlayAudio() {
        //play audio
        String url = "http://137.110.90.123/~chenyu/sample.mp3"; // your URL here

        try {
            AudioPlayer.setDataSource(url);
            AudioPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            AudioPlayer.prepare();
            AudioPlayer.start();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

我想说如果你真的想强调流媒体，我会推荐使用 VLC，我的流媒体 .mp3 命令是：

仅流式传输音频

```
vlc /Users/chenyu/Sites/XXXX.mp3 -I http --sout "#transcode{ab=128,samplerate=44100,channels=2,acodec=mpga,vcodec=none}:gather:rtp{mp4a-latm,sdp=rtsp://137.110.92.231:5554/stream.sdp}" 
```

# android - 使用 akquinet / android-archetypes 生成 Android Achetype

> ID：14280866
> 
> 赞同：0
> 
> 时间：2013-01-11T15:06:58.363
> 
> 标签：android, maven

我正在尝试为 apklib 生成一个 android 原型，以便我可以使用[这个库](https://github.com/jfeinstein10/SlidingMenu)。正如[本页](http://code.google.com/p/maven-android-plugin/wiki/ApkLib)所示，我尝试像这样创建它。

```
mvn archetype:generate \
  -DarchetypeArtifactId=android-library-quickstart \
  -DarchetypeGroupId=com.slidingmenu \
  -DarchetypeVersion=1.0.9 \
  -DgroupId=com.sliding \
  -DartifactId=slidingmenu 
```

但是我每次都会出错。我收到以下错误

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (com.slidingmenu:android-library-quickstart:1.0.9) -> [Help 1] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:02:52.197

使用这个命令作为 ben75 说

```
mvn archetype:generate \
  -DarchetypeArtifactId=android-library-quickstart \
  -DarchetypeGroupId=de.akquinet.android.archetypes \
  -DarchetypeVersion=1.0.9 \
  -DgroupId=com.sliding \
  -DartifactId=slidingmenu 
```

然后将库添加到您的构建路径或 pom 文件中（使用 apklib 作为类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:14:03.417

您使用了错误的archetypeGroupId。改用这个：

```
-DarchetypeGroupId=de.akquinet.android.archetypes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:42:20.923

最简单的方法是执行 mvn archetype:generate 并以交互模式生成项目。android 应用程序的原型编号是 95（搜索 android-quickstart ）。另请参阅问题/答案：[maven archetype for an android project](https://stackoverflow.com/questions/6609753/maven-archetype-for-an-android-project)

# java - 修复 XPath 表达式中的绝对路径，以便它们在另一个文档的上下文中工作

> ID：14280869
> 
> 赞同：2
> 
> 时间：2013-01-11T15:07:10.283
> 
> 标签：java, xml, regex, xslt, xpath

我想从 XPath 表达式中提取对文档根目录的所有引用，并在它们之后注入一个自定义根目录。

我正在实现基于某种模式语言创建的 XML 实例文档的一小部分验证（或者更确切地说是修复错误）。该语言提供了指定自包含 XML 块的方法。每个这样的块都在一个单独的文件中定义，并指定 XML 元素层次结构。每个这样的层次结构都有一个或多个属于同一文档根的根元素，就像任何 XML 文档的不可见文档根一样。

然而，这些文件并不知道它们指定的只是更大系统的一部分。这个更大的系统实际上是另一个具有单个顶级 XML 元素的 XML 文档（具有另一个文档根），其中包含由任意数量的此类模式语言文件定义的所有根元素。

XML 层次结构中的任何节点都可能受到 XPath 表达式的约束，该表达式必须计算为真，以便在验证期间元素被视为有效。这就是我的问题的根源。这些 XPath 表达式可能包含绝对位置路径，它引用单个 XML 块的文档根而不是系统的文档根。考虑以下 XML 实例：

```
<data xmlns="system:uri">
    <root-one xmlns="root-one:uri">
        <items>
            <item>
                <group>base</group>
                <class>person</person>
                <name>John Smith</name>
                <description>valid entry</description>
            </item>
            <item>
                <group>base</group>
                <class>animal</person>
                <name>Dog</name>
                <description>invalid entry</description>
            </item>
        </items>
        <item-classes>
            <item-class>                
                <class>person</class>
                <group>base</group>
            </item-class>
        </item-classes>
    </root-one>
    <root-two xmlns="root-two:uri">
        <!-- obscured content -->
    </root-two>
</data> 
```

`{system:uri}data`代表系统，`{root-one:uri}root-one`是`{root-two:uri}root-two`两个 XML 块，每个都在它自己的模式语言文件中定义。假设每个`root-one/items/item`实例必须满足以下 XPath 条件，在模式语言文件中定义（不要介意`current()`，它与 XSLT 中的相同，指的是`item`实例之一）：

```
context: /root-one/items/item
assert: group=/root-one/item-classes/item-class[class=current()/class]/group 
```

实际上应该是

```
context: /data/root-one/items/item
assert: group=/data/root-one/item-classes/item-class[class=current()/class]/group 
```

如何在任何 XPath 表达式中获取对文档根 (/) 的所有引用并使用正确的根注入它们？我无法控制这些表达式是如何形成的，所以它们可以有任何形状和大小，只要它们满足 XPath 1.0 语法，但我必须让它们正确计算。

我目前正在考虑在 java 中编写某种标记器来处理这个问题，但如果有更简单的解决方案，我宁愿不去研究它。表达式是在系统文档上下文中的 Schematron XSLT 转换期间评估的，所以如果我能以某种方式使用 XSLT 实现路径修复，那将是完美的。但是，我已准备好接受任何可能导致我找到解决方案的指示。

**编辑01**

这就是包含 XPath 表达式的示例文件的样子（在我的脑海中）。我希望转换`@test`属性的内容。属性的值`@context`是微不足道的，因为它总是具有相似的结构。

```
<?xml version="1.0" encoding="utf-8"?>
<iso:schema    xmlns="http://purl.oclc.org/dsdl/schematron" 
           xmlns:iso="http://purl.oclc.org/dsdl/schematron" 
           xmlns:sch="http://www.ascc.net/xml/schematron"
           xmlns:tl="toplevel:uri"
           xmlns:r1="root-one:uri"
           xmlns:r2="root-two:uri">

  <iso:ns prefix="tl" uri="toplevel:uri" />
  <iso:ns prefix="r1" uri="root-one:uri" />
  <iso:ns prefix="r2" uri="root-two:uri" />

  <iso:pattern>
    <iso:rule context="/r1:root-one/r1:items/r1:item">
      <iso:assert test="r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group">The group of an item must match one of the predefined class groups.</iso:assert>
    </iso:rule>
  </iso:pattern>

</iso:schema> 
```

请注意，`@test`属性的值可以是任何有效的 XPath 1.0 表达式。我想找到一个通用解决方案，它可以找到表达式中任何位置定义的任何文档根（'/'），并使用自定义根元素注入它。实际文件可能包含任意数量的`iso:pattern`元素、`iso:rule`元素等。

**编辑02**

对于上面的示例，想要的结果是以下`iso:assert`元素：

```
<iso:assert test="r1:group=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group">The group of an item must match one of the predefined class groups.</iso:assert> 
```

**编辑03**

作为回应您*如何决定 /r1:root-one/ 必须以 '/tl:data' 开头？能否请您描述一下规则？——迪米特雷·诺瓦切夫*

`/tl:data`表示通过将多个其他 XML 文档组合成一个文档而创建的文档的根元素。这些文档的内容作为子元素附加到此根元素。`r1:root-one`成为这样的孩子之一。XPath 约束是描述元素结构`r1:root-one`外观的模式定义的一部分，旨在仅在此子 XML 文档的上下文中工作。当子 XML 文档被附加到“父”文档时，如果表达式中存在绝对路径，它们就失去了意义。因此，如果表达式包含`/r1:root-one`this 在新文档中将没有任何意义（其中没有`root-one`根元素，`tl:data`是唯一的根）。我想找到所有这样的案例（`/r1:root-one/`）并将它们转换（变成`/tl:data/r1:root-one/`) 所以表达式在新文档的上下文中起作用。

很难指定确切的规则。每个`/`出现在路径开头的“”（因此引用子 XML 文档的文档根）都应该替换为“ `/tl:data/`”，因此它现在引用新创建的文档的文档根。

**编辑04**

如上文所述，该解决方案应该适用于任何可以想象的 XPath 表达式。其他示例（来自 r1 命名空间的虚构元素是由我组成的 - 这在我脑海中听起来更好）：

```
<iso:assert test="r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group and r1:imaginary-element1=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:imaginary-element1" />
<iso:assert test="r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=/r1:root-one/r1:imaginary-constants/r1:imaginary-constant]/r1:group" /> 
```

应该成为

```
<iso:assert test="r1:group=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group and r1:imaginary-element1=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:imaginary-element1" />
<iso:assert test="r1:group=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=/tl:data/r1:root-one/r1:imaginary-constants/r1:imaginary-constant]/r1:group" /> 
```

**编辑05**

我现在可以选择切换到 XSLT 2.0 处理器。所以我会接受 XSLT 2.0 解决方案。

事实上，如果有人可以为我提供一个***XSLT 正则表达式***，该表达式将匹配`/`表示 XPath 1.0 表达式中的文档根的符号，这将解决我的问题（我将使用该`replace()`函数）。我一直在研究[XPath 1.0 语法](http://www.galiel.net/el/study/XPath_Overview.html)，但还没有任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:41:45.937

在检查了`XPath 1.0`语法/[规范](http://www.w3.org/TR/xpath/)并切换到`XSLT2.0`以获得`regex`支持后，我想出了以下怪物。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:iso="http://purl.oclc.org/dsdl/schematron"
 xmlns:def="http://purl.oclc.org/dsdl/schematron">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="iso:assert">
    <xsl:copy>

        <xsl:variable name="no-double-slash">
          <!-- need to ignore double slashes since they interfere later -->  
          <xsl:value-of select="replace(@test,'//','unlikelycharseq_double_slash')" />
        </xsl:variable>        
        <xsl:variable name="no-asterisk">
          <!-- need to ignore '*/' which is preceded by and|or|mod|div since that's not mul operator -->  
          <xsl:value-of select="replace($no-double-slash,'([^a-zA-Z0-9_\-](and|or|mod|div)\s*)\*\s*/',concat('$1','unlikelycharseq_asterisk_slash'))" />
        </xsl:variable>
        <xsl:variable name="escaped1">
          <!-- any slash at line start or after an operator (except mul) needs to be replaced, '-' needs to be preceded by whitespace if it represents an operator -->  
          <xsl:value-of select="replace($no-asterisk,'^\s*/|([=+&lt;&gt;\[\(]\s*|\s+\-\s*|[^a-zA-Z0-9_\-](and|or|mod|div)\s*)/',concat('$1','/tl:data/'))" />
        </xsl:variable>
        <xsl:variable name="escaped2">
          <!-- any '*' not preceded by an operator, '@', '::', '(', '[' or ','  is a mul operator, so the following slash needs to be replaced -->  
          <xsl:value-of select="replace($escaped1,'((\s+[^\-]|[^@:\(\[,/|+=&gt;&lt;*])\s*\*\s*)/',concat('$1','/tl:data/'))" />
        </xsl:variable>  
        <xsl:variable name="with-asterisk">
          <!-- restore '*/' which we needed to ignore for the above regexes to work  -->  
          <xsl:value-of select="replace($escaped2,'unlikelycharseq_asterisk_slash','*/')" />
        </xsl:variable>        
        <xsl:variable name="fixed-path">
          <!-- restore '//' which we needed to ignore for the above regexes to work -->  
          <xsl:value-of select="replace($with-asterisk,'unlikelycharseq_double_slash','//')" />
        </xsl:variable>      

      <xsl:attribute name="test">
        <xsl:value-of select="$fixed-path" />
      </xsl:attribute>

      <xsl:comment>
        <xsl:value-of select="@test" />
      </xsl:comment>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

它实现了一些必须满足的规则，以便 '/' 表示文档根而不是路径分隔符：

1.  出现在行首
2.  出现在运算符之后
3.  出现在 [, ( 等之后。

在使用正则表达式进行处理时，有几个 XPath 标记需要特殊处理，并且还必须考虑空格。字符 '*' 和 '-' 可能根本不代表运算符。到目前为止，这对我所有的测试用例都有效，但是由于我依赖语法而不是 XPath 的经验来形成表达式，所以我可能遗漏了一些东西。

这些正则表达式展示了 XML Schema/XPath 正则表达式风格的许多功能。需要多次替换运行，因为其中不支持某些高级功能。最值得注意的是环视。

如果有人给我比这个意大利面条 XSLT 更好的解决方案，我会很乐意接受。请注意，这可能不是最好的，甚至不是解决我的问题的唯一方法。

当这个变换被应用到

```
<iso:schema    xmlns="http://purl.oclc.org/dsdl/schematron"
           xmlns:iso="http://purl.oclc.org/dsdl/schematron"
           xmlns:sch="http://www.ascc.net/xml/schematron"
           xmlns:tl="toplevel:uri"
           xmlns:r1="root-one:uri"
           xmlns:r2="root-two:uri">

  <iso:ns prefix="tl" uri="toplevel:uri" />
  <iso:ns prefix="r1" uri="root-one:uri" />
  <iso:ns prefix="r2" uri="root-two:uri" />

  <iso:pattern>
    <iso:rule context="/r1:root-one/r1:items/r1:item">
      <iso:assert test="r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group">The group of an item must match one of the predefined class groups.</iso:assert>
      <iso:assert test="r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group and r1:imaginary-element1=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:imaginary-element1" />
      <iso:assert test="r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=/r1:root-one/r1:imaginary-constants/r1:imaginary-constant]/r1:group" />
      <iso:assert test="../type[. * /root-one/imaginary-constants/imaginary-constant1 > 10]"/>
      <iso:assert test="../type[. mod /root-one/imaginary-constants/imaginary-constant1 = 1]"/>
      <iso:assert test="   /root-one/imaginary-constants/imaginary-constant1"/>
      <iso:assert test="../type[. mod /root-one/imaginary-constants/imaginary-constant1 = 1]"/>
      <iso:assert test="../group= /root-one/item-classes/item-class[name=current()/name]/group and ../class=/root-one/item-classes/item-class[name=current()/name]/class"/>
      <iso:assert test="../type[. = /root-one/imaginary-constants/imaginary-constant1]"/>
      <iso:assert test="../type[.*/root-one/imaginary-constants/imaginary-constant1 = 1]"/>
      <iso:assert test="../type[/root-one/imaginary-constants/imaginary-constant1 mod ../../*/type]"/>
      <iso:assert test="../type[/root-one/imaginary-constants/imaginary-constant1 mod ../multiminus---/type > 1]"/>
      <iso:assert test="../type[../multiminus---*/root-one/imaginary-constants/imaginary-constant1 > 1]"/>
      <iso:assert test="//container/*/type[. &gt; 5]"/>
    </iso:rule>
  </iso:pattern>
</iso:schema> 
```

它导致了这个（路径按预期固定）

```
<iso:schema xmlns="http://purl.oclc.org/dsdl/schematron"
            xmlns:iso="http://purl.oclc.org/dsdl/schematron"
            xmlns:sch="http://www.ascc.net/xml/schematron"
            xmlns:tl="toplevel:uri"
            xmlns:r1="root-one:uri"
            xmlns:r2="root-two:uri">
   <iso:ns prefix="tl" uri="toplevel:uri"/>
   <iso:ns prefix="r1" uri="root-one:uri"/>
   <iso:ns prefix="r2" uri="root-two:uri"/>
   <iso:pattern>
      <iso:rule context="/r1:root-one/r1:items/r1:item">
         <iso:assert test="r1:group=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group"><!--r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group--></iso:assert>
         <iso:assert test="r1:group=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group and r1:imaginary-element1=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:imaginary-element1"><!--r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group and r1:imaginary-element1=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:imaginary-element1--></iso:assert>
         <iso:assert test="r1:group=/tl:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=/tl:data/r1:root-one/r1:imaginary-constants/r1:imaginary-constant]/r1:group"><!--r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=/r1:root-one/r1:imaginary-constants/r1:imaginary-constant]/r1:group--></iso:assert>
         <iso:assert test="../type[. * /tl:data/root-one/imaginary-constants/imaginary-constant1 &gt; 10]"><!--../type[. * /root-one/imaginary-constants/imaginary-constant1 > 10]--></iso:assert>
         <iso:assert test="../type[. mod /tl:data/root-one/imaginary-constants/imaginary-constant1 = 1]"><!--../type[. mod /root-one/imaginary-constants/imaginary-constant1 = 1]--></iso:assert>
         <iso:assert test="/tl:data/root-one/imaginary-constants/imaginary-constant1"><!--   /root-one/imaginary-constants/imaginary-constant1--></iso:assert>
         <iso:assert test="../type[. mod /tl:data/root-one/imaginary-constants/imaginary-constant1 = 1]"><!--../type[. mod /root-one/imaginary-constants/imaginary-constant1 = 1]--></iso:assert>
         <iso:assert test="../group= /tl:data/root-one/item-classes/item-class[name=current()/name]/group and ../class=/tl:data/root-one/item-classes/item-class[name=current()/name]/class"><!--../group= /root-one/item-classes/item-class[name=current()/name]/group and ../class=/root-one/item-classes/item-class[name=current()/name]/class--></iso:assert>
         <iso:assert test="../type[. = /tl:data/root-one/imaginary-constants/imaginary-constant1]"><!--../type[. = /root-one/imaginary-constants/imaginary-constant1]--></iso:assert>
         <iso:assert test="../type[.*/tl:data/root-one/imaginary-constants/imaginary-constant1 = 1]"><!--../type[.*/root-one/imaginary-constants/imaginary-constant1 = 1]--></iso:assert>
         <iso:assert test="../type[/tl:data/root-one/imaginary-constants/imaginary-constant1 mod ../../*/type]"><!--../type[/root-one/imaginary-constants/imaginary-constant1 mod ../../*/type]--></iso:assert>
         <iso:assert test="../type[/tl:data/root-one/imaginary-constants/imaginary-constant1 mod ../multiminus---/type &gt; 1]"><!--../type[/root-one/imaginary-constants/imaginary-constant1 mod ../multiminus- - -/type > 1]--></iso:assert>
         <iso:assert test="../type[../multiminus---*/tl:data/root-one/imaginary-constants/imaginary-constant1 &gt; 1]"><!--../type[../multiminus- - -*/root-one/imaginary-constants/imaginary-constant1 > 1]--></iso:assert>
         <iso:assert test="//container/*/type[. &gt; 5]"><!--//container/*/type[. > 5]--></iso:assert>
      </iso:rule>
   </iso:pattern>
</iso:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:50:17.107

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:iso="http://purl.oclc.org/dsdl/schematron"
 xmlns:def="http://purl.oclc.org/dsdl/schematron">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="iso:assert/@test">
  <xsl:attribute name="test">
    <xsl:value-of select=
    "concat(substring-before(.,'/'),'/t1:data/', substring-after(.,'/'))"/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<iso:schema    xmlns="http://purl.oclc.org/dsdl/schematron"
           xmlns:iso="http://purl.oclc.org/dsdl/schematron"
           xmlns:sch="http://www.ascc.net/xml/schematron"
           xmlns:tl="toplevel:uri"
           xmlns:r1="root-one:uri"
           xmlns:r2="root-two:uri">

  <iso:ns prefix="tl" uri="toplevel:uri" />
  <iso:ns prefix="r1" uri="root-one:uri" />
  <iso:ns prefix="r2" uri="root-two:uri" />

  <iso:pattern>
    <iso:rule context="/r1:root-one/r1:items/r1:item">
      <iso:assert test="r1:group=/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group">The group of an item must match one of the predefined class groups.</iso:assert>
    </iso:rule>
  </iso:pattern>
</iso:schema> 
```

**产生想要的正确结果**：

```
<iso:schema xmlns:iso="http://purl.oclc.org/dsdl/schematron"
 xmlns="http://purl.oclc.org/dsdl/schematron"
 xmlns:sch="http://www.ascc.net/xml/schematron"
 xmlns:tl="toplevel:uri" xmlns:r1="root-one:uri"
 xmlns:r2="root-two:uri">
   <iso:ns prefix="tl" uri="toplevel:uri"/>
   <iso:ns prefix="r1" uri="root-one:uri"/>
   <iso:ns prefix="r2" uri="root-two:uri"/>
   <iso:pattern>
      <iso:rule context="/r1:root-one/r1:items/r1:item">
         <iso:assert test="r1:group=/t1:data/r1:root-one/r1:item-classes/r1:item-class[r1:class=current()/r1:class]/r1:group">The group of an item must match one of the predefined class groups.</iso:assert>
      </iso:rule>
   </iso:pattern>
</iso:schema> 
```

**说明**：

正确使用：

1.  身份规则。

2.  模板匹配模式。

3.  标准 XPath函数**[`concat()`](http://www.w3.org/TR/xpath/#function-concat)**和.**[`substring-before()`](http://www.w3.org/TR/xpath/#function-substring-before)****[`substring-after()`](http://www.w3.org/TR/xpath/#function-substring-after)**

# php - 我有一些 php 登录问题

> ID：14280870
> 
> 赞同：0
> 
> 时间：2013-01-11T15:07:26.460
> 
> 标签：php, login

我有一个奇怪的，但我确定很简单的登录问题。当我在这里使用我的代码时，会话部分有问题。验证登录信息工作正常，但它不会在成功登录时重定向。如果我注释掉会话信息，它工作正常。这发生在我的 process-login.php 页面和我的 success.php 页面上。任何想法将不胜感激。

先感谢您。

这是我的登录页面：

```
 <form action="process-login.php" method="post">
     <fieldset>
      <legend>Login Form</legend>
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" />
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" />
      <button type="submit">Send</button>
     </fieldset>
    </form> 
```

这是我的流程登录页面：

```
 <?php

    ob_start();
    // Set form data as variables

    $myusername=$_POST['username'];
    $mypassword=$_POST['password'];

    // DB login
    $host="localhost";
    $username="root";
    $password="pass1";
    $db_name="contact";
    $tbl_name="users";

    // Open database connection
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    // Query with data
    $query="SELECT * from $tbl_name where username='$myusername'
    and password='$mypassword'";
    $result=mysql_query($query);

    // Check for entry
    $count=mysql_num_rows($result);

    // If it matches register and send on
    if($count==1){
    session_start("username");
    session_start("password");
    header("location:success.php");
    }
    else {
    echo "Wrong!";
    }
    ob_end_flush();
    ?> 
```

最后，这是我的成功页面：

```
 <?php
    session_start();
    if(!isset($_SESSION['username'])){
    header("location:login.php");
    }
    else
    {
    echo "Welcome";
    }
    ?> 
```

如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:10:42.660

`session_start()`创建一个会话。它不需要任何论据。

要在会话中存储数据，您需要`$_SESSION['foo'] = $bar;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:11:05.560

首先移动到 PDO。第二次阅读 session_start() 以及如何设置 $_SESSION 变量。

```
 session_start();
 $_SESSION['username']='me';
 if(!isset($_SESSION['username'])){
      header("Location:login.php");
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:11:49.663

您只需调用`session_start()`一次。通过超级全局变量为您的会话注册变量：

```
session_start();
$_SESSION['username'] = $myusername;
$_SESSION['password'] = $mypassword; 
```

然后您可以`$_SESSION['password']`在任何网站上使用`session_start()`

# django - Django Formsets - 如何正确构建表单集并验证它？

> ID：14280875
> 
> 赞同：5
> 
> 时间：2013-01-11T15:07:40.690
> 
> 标签：django, django-forms

我正在使用 Django 1.4，但我正在为 Formsets 苦苦挣扎。我已经阅读了文档和很多 SO 问题。我对它们的实际工作方式一无所知。

**- Fomset 应该像这样配置/声明吗？**

我是如何在 forms.py 和 views.py 中设置表单集的。

forms.py：（我已经声明了一个forms.Form）

```
class BicycleAdItemKindPropertyValueForm(forms.Form):
    bicycleaditemkindpropertyvalue = forms.ChoiceField() 
```

视图.py：

```
def submit_ad_view(request):

    # This class is used to make empty formset forms required
    class BicycleAdItemKindPropertyValueFormSet(BaseFormSet):
        def __init__(self, *args, **kwargs):
            super(BicycleAdItemKindPropertyValueFormSet, self).__init__(*args, **kwargs)
            for form in self.forms:
                form.empty_permitted = False

        def clean(self):
            pdb.set_trace()  
            for form in self.forms:
                None
            #form.fields['bicycleaditemkindpropertyvalue']

    formsetBicycleAdItemKindPropertyValue = formset_factory(BicycleAdItemKindPropertyValueForm, formset=BicycleAdItemKindPropertyValueFormSet)

    if request.method == 'POST':      
        model_main = Main()
        model_main.section = Section.objects.get(pk=request.POST['section'])
        model_main.user = request.user

        model_bicyclead = BicycleAd()
        model_bicyclead.bicycleadtype = BicycleAdType.objects.get(pk=2) #1-Ad Link, 2-Ad Insite. Em principio ficara pre-definido
        model_bicyclead.bicycleaditemkind = BicycleAdItemKind.objects.get(pk=4) 
        model_bicyclead.bicycleadcondition = BicycleAdCondition.objects.get(pk=2)
        model_bicyclead.city = GeonamesLocal.objects.get(pk=4803854)

        # Build the forms
        form_main = MainForm(request.POST, instance = model_main)
        form_bicyclead = BicycleAdForm(request.POST, instance = model_bicyclead)
        form_bicycleadcategory = BicycleAdCategoryForm(request.POST)
        form_bicycleaditemkindselect = BicycleAdItemKindSelectForm(request.POST)
        formset_bicycleaditemkindpropertyvalue = formsetBicycleAdItemKindPropertyValue(request.POST)

        #pdb.set_trace()

        if form_main.is_valid() and form_bicyclead.is_valid() and form_bicycleadcategory.is_valid() and form_bicycleaditemkindselect.is_valid() and formset_bicycleaditemkindpropertyvalue.is_valid():
            main_f = form_main.save()

            bicyclead_f = form_bicyclead.save(commit=False)
            bicyclead_f.main = main_f
            bicyclead_f.save()

            bicycleadcategory_f = form_bicycleadcategory.save(commit=False, rel_obj=model_bicyclead)  

    else:
        # Build the forms
        form_main = MainForm()
        form_bicyclead = BicycleAdForm()
        form_bicycleadcategory = BicycleAdCategoryForm()
        form_bicycleaditemkindselect = BicycleAdItemKindSelectForm()
        formset_bicycleaditemkindpropertyvalue = formsetBicycleAdItemKindPropertyValue()

    return render_to_response('app/submit/submit_ad.html', {'form_main': form_main, 'form_bicyclead': form_bicyclead, 'form_bicycleadcategory': form_bicycleadcategory, 'form_bicycleaditemkindselect': form_bicycleaditemkindselect, 'formset_bicycleaditemkindpropertyvalue': formset_bicycleaditemkindpropertyvalue}, context_instance=RequestContext(request)) 
```

前面这两个步骤正确吗？表单集声明正确？

现在，模板。我已经这样声明了：

一些模板.html：

```
{{formset_bicycleaditemkindpropertyvalue.management_form}}
{{formset_bicycleaditemkindpropertyvalue.non_form_errors}}
{{formset_bicycleaditemkindpropertyvalue.errors}}
{% for form in formset_bicycleaditemkindpropertyvalue.forms %}
<div class="item-bicycleaditemkindpropertyvalue">
    <label for="{{form.bicycleaditemkindpropertyvalue.auto_id}}"></label>
    {{form.bicycleaditemkindpropertyvalue}}
</div> 
```

在 JavaScript 的帮助下，代码将生成如下内容：

```
<form action="/submeter/anuncio/" method="post"><div style="display: none;"><input type="hidden" value="3TWjKpqnXG7afZcvF1YmmWcRBKnYqePB" name="csrfmiddlewaretoken"></div>
...         
        <div class="someclass">
            <input type="hidden" id="id_form-TOTAL_FORMS" value="1" name="form-TOTAL_FORMS">
            <input type="hidden" id="id_form-INITIAL_FORMS" value="0" name="form-INITIAL_FORMS">
            <input type="hidden" id="id_form-MAX_NUM_FORMS" name="form-MAX_NUM_FORMS">
            []
            <div class="item-bicycleaditemkindpropertyvalue">
                <label for="id_form-0-bicycleaditemkindpropertyvalue">Some 0</label>
                <select id="id_form-0-bicycleaditemkindpropertyvalue" name="form-0-bicycleaditemkindpropertyvalue">
                    ...
                </select>
            </div><div class="item-bicycleaditemkindpropertyvalue">
                <label for="id_form-1-bicycleaditemkindpropertyvalue">Some 1</label>
                <select id="id_form-1-bicycleaditemkindpropertyvalue" name="form-1-bicycleaditemkindpropertyvalue">
                    ...
                </select>
            </div>
            <div class="item-bicycleaditemkindpropertyvalue">
                <label for="id_form-2-bicycleaditemkindpropertyvalue">Some 2</label>
                <select id="id_form-2-bicycleaditemkindpropertyvalue" name="form-2-bicycleaditemkindpropertyvalue">
                    ...
                </select>
            </div>      
        </div>
        <input type="submit">
</form> 
```

输出正确吗？应该是这样的吗？

**- 验证，如何验证表单集？**

现在关于验证。我的表单中有一个 forms.ChoiceField()

```
class BicycleAdItemKindPropertyValueForm(forms.Form):
    bicycleaditemkindpropertyvalue = forms.ChoiceField() 
```

我读过应根据选择列表验证 forms.ChoiceField() 。我的问题是我该怎么做？

**- 一些信息调试**

在 clean() 中使用 pdb(python debuger) 我看到我得到了这些数据：

```
class BicycleAdItemKindPropertyValueFormSet(BaseFormSet):
    def __init__(self, *args, **kwargs):
        super(BicycleAdItemKindPropertyValueFormSet, self).__init__(*args, **kwargs)
        for form in self.forms:
            form.empty_permitted = False

    def clean(self):
        pdb.set_trace()  
        for form in self.forms:
            None
        #form.fields['bicycleaditemkindpropertyvalue'] 
```

调试 self.data：

```
(Pdb) self.data
<QueryDict: {u'form-1-bicycleaditemkindpropertyvalue': [u'29'], 
             u'form-2-bicycleaditemkindpropertyvalue': [u'33'], 
             u'title': [u'adasd'], 
             u'form-MAX_NUM_FORMS': [u''], 
             u'country': [u'42'], 
             u'section': [u'5'], 
             u'item_kind': [u'4'], 
             u'form-INITIAL_FORMS': [u'0'], 
             u'bicycleadcategorytype': [u'3', u'2'], 
             u'csrfmiddlewaretoken': [u'3TWjKpqnXG7afZcvF1YmmWcRBKnYqePB'], 
             u'form-TOTAL_FORMS': [u'3'], 
             u'form-0-bicycleaditemkindpropertyvalue': [u'4']}> 
```

调试 self.is_valid()：

```
(Pdb) self.is_valid()
False 
```

关于如何验证此表单集的任何线索？

最好的祝福，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:15:39.140

`formset`上面代码中的声明正确。此外，生成的输出是表单集生成它的理想方式。关于验证表格，你可以简单地做。

```
for form in formset:
    if form.is_valid():
        # If is valid do something here
    else:
        # Do something Else 
```

如果你想自己做验证工作，你可以覆盖类`clean`下的方法，`form`因为这个方法是由`is_valid`方法调用的。

```
class BicycleAdItemKindPropertyValueForm(forms.Form):
    bicycleaditemkindpropertyvalue = forms.ChoiceField()

    def clean(self):
        # Do field validation here. 
```

如果您要验证并且只有一个字段，您可以覆盖该`clean_field`方法，如下所示：

```
class BicycleAdItemKindPropertyValueForm(forms.Form):
    bicycleaditemkindpropertyvalue = forms.ChoiceField()

    def clean_bicycleaditemkindpropertyvalue(self):
        # Do single field validation here. 
```

# multidimensional-array - awk 中的多维数组

> ID：14280877
> 
> 赞同：7
> 
> 时间：2013-01-11T15:07:42.980
> 
> 标签：multidimensional-array, awk, gawk

我尝试在 awk 中创建一个伪多维数组。

```
# Calculate cumulative context score

BEGIN { FS=OFS="\t" }

{
        a[$2+FS+$7,$3]+=$6
}

END { for (i,j) in a
        { print i,j,a[i,j] }

} 
```

输出：

```
awk: ccstscan.awk:9: END { for (i,j) in a
awk: ccstscan.awk:9:             ^ syntax error 
```

这就是 GNU awk 手册中提到的内容：

> 要测试特定索引序列是否存在于多维数组中，请使用与单维数组相同的运算符 (in)。将整个索引序列写在括号中，用逗号分隔，作为左操作数：
> 
> ```
>  (subscript1, subscript2, ...) in array 
> ```

我尝试修改脚本以创建一个真正的多维数组：

```
BEGIN { FS=OFS="\t" }

{
    a[$2+FS+$7][$3]+=$6
}

END { for i in a
    {
     for j in a[i]
        { print i,j,a[i][j]
        }

    }
} 
```

我用 gawk 运行它。它也给出了一个错误：

```
gawk: ccstscan.awk:6:   a[$2+FS+$7][$3]+=$6
gawk: ccstscan.awk:6:              ^ syntax error
gawk: ccstscan.awk:9: END { for i in a
gawk: ccstscan.awk:9:           ^ syntax error
gawk: ccstscan.awk:11:   for j in a[i]
gawk: ccstscan.awk:11:       ^ syntax error
gawk: ccstscan.awk:11:   for j in a[i]
gawk: ccstscan.awk:11:             ^ syntax error
gawk: ccstscan.awk:12:          { print i,j,a[i][j]
gawk: ccstscan.awk:12:                          ^ syntax error 
```

制作和扫描多维关联数组的正确格式是什么

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T15:19:19.120

如果您使用的是模拟的多维数组，您的循环需要是这样的：

```
 END { 
    for (ij in a) {
      split(ij,indices,SUBSEP);
      i=indices[1];
      j=indices[2];
      print i,j,a[ij]
    }
  } 
```

该`(i,j) in a`语法仅适用于测试特定索引是否在数组中。它不适用于 for 循环，尽管 for 循环允许类似的语法。

对于真正的多维数组（arrays of arrays），可以这样写：

```
BEGIN { FS=OFS="\t" }

{ a[$2+FS+$7][$3]+=$6 }

END { 
  for (i in a) {
    for (j in a[i]) { 
      print i,j,a[i][j]
    }
  }
} 
```

但是，数组的数组只在 gawk 4.0 中添加，因此您的 gawk 版本可能不支持它。

另一个注意事项：在这一行：

```
a[$2+FS+$7,$3]+=$6 
```

似乎您正在尝试连接 $2、FS 和 $7，但“+”用于数字加法，而不是连接。你需要这样写：

```
a[$2 FS $7,$3] += $6 
```

# python - Python：仅将文件内容转换为大写字符

> ID：14280888
> 
> 赞同：2
> 
> 时间：2013-01-11T15:08:07.237
> 
> 标签：python

我正在尝试将一组文件的内容转换为仅大写字符。这是我到目前为止的代码：

```
import os

def test():
    os.chdir("C:/Users/David/Files")
    files = os.listdir(".")
    for x in files:
        inputFile = open(x, "r")
        content = inputFile.read()
        with open(x, "wb") as outputFile:
                str.upper(content) 
```

当我运行它时，它会删除文件的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:12:06.697

您实际上并没有编写文件的内容。试试`outputFile.write(content.upper())`。

```
import os

def test():
    os.chdir("C:/Users/David/Files")
    files = os.listdir(".")
    for x in files:
        inputFile = open(x, "r")
        content = inputFile.read()
        with open(x, "wb") as outputFile:
                outputFile.write(content.upper()) 
```

当您打开一个带有 的文件时`w`，任何具有该名称的现有文件都会被删除（参见[此处](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)）。虽然这很好，但`str.upper(content)`导致问题的是您的语句，因为它实际上并没有对文件做任何事情 - 它大写`content`但不会在任何地方写入（请注意，`.upper()`如果需要，您也可以调用内容本身）。为了将内容写入文件，您需要使用`outputFile`您创建的内容并`content`使用该`write()`方法写入文件。您还可以`with`像编写文件时一样使用另一个语句，这将确保它也被正确关闭：

```
import os

def test():
    os.chdir("C:/Users/David/Files")
    files = os.listdir(".")
    for x in files:
        with open(x, "r") as inputFile:
            content = inputFile.read()
        with open(x, "wb") as outputFile:
            outputFile.write(content.upper()) 
```

您也可以尝试以`r+b`模式打开文件，读取然后覆盖`seek`文件的开头并写入（文件长度应该相同，但`truncate()`如果需要，您可以在读取后清除文件）：

```
import os

def test():
    x = 'testfile'
    with open(x, "r+b") as inputFile:
        content = inputFile.read()
        inputFile.seek(0)
        inputFile.write(content.upper()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:12:09.113

```
def test():
os.chdir("C:/Users/David/Files")
files = os.listdir(".")
for x in files:
    inputFile = open(x, "r")
    content = inputFile.read()
    with open(x, "wb") as outputFile:
            outputfile.write(str.upper(content))
            outputfile.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T10:07:19.173

```
import os
def test(x):
    with open(x, "r+b") as file:
        content = file.read()
        file.seek(0)
        file.write(content.upper()) 
```

如果您将文件名传入，上述内容应该可以工作`x`

以下是对单个文件执行相同操作的命令行版本，您可以从终端调用`ls -1 | parallel python upper.py`

```
import os, sys
with open(sys.argv[1], "r+b") as file:
    content = file.read()
    file.seek(0)
    file.write(content.upper()) 
```

# sql - 以下查询有什么区别？一个是直接的 SQL，另一个是 LINQ 中的等价物

> ID：14280893
> 
> 赞同：0
> 
> 时间：2013-01-11T15:08:19.253
> 
> 标签：sql, linq, entity-framework, tsql, join

我在这里有一个如下所示的 SQL 查询：

```
SELECT R.Extra3 AS 'Practice',
    SUM(DATEDIFF(s, R.Pickup, R.Hangup)) AS 'Seconds',
    COUNT(R.Extra3) AS 'Calls'
FROM Outbound.dbo.Results R
JOIN Outbound.dbo.Queue Q
    ON Q.QueueID = R.QueueID
    AND Q.Attempt = R.Attempt
WHERE R.CampaignId = 1
    AND DATEPART(m, R.Pickup) = DATEPART(m, DATEADD(m, -1, getdate()))
    AND DATEPART(y, R.Pickup) = DATEPART(y, DATEADD(m, -1, getdate()))
GROUP BY R.Extra3 
```

我必须在程序中使用它并决定采用 LINQ 路线。所以这就是我想出的：

```
IQueryable<PracticeSummary> query = db.Results
    .Join(
        db.Queues,
        r => new { Id = r.QueueID.Value, Attempt = r.Attempt.Value },
        q => new { Id = q.QueueID, Attempt = (byte)q.Attempt },
        (r, q) => r
    )
    .Where(
        r => r.CampaignID == 1
            && r.PickUp.Value.Month == lastMonth
            && r.PickUp.Value.Year == lastMonthYear
    )
    .GroupBy(g => g.Extra3)
    .Select(r => new PracticeSummary
    {
        Practice = r.Key,
        Calls = r.Count(),
        Seconds = (r.Sum(item => EntityFunctions.DiffSeconds(item.PickUp, item.HangUp).Value))
    }); 
```

我的 SQL 查询给了我正确的结果，而我的 LINQ 查询返回的行数超过了 10 倍，因此总和和计数更多。

我什至查看了生成的 TSQL。它看起来像这样：

```
SELECT 
1 AS [C1], 
[GroupBy1].[K1] AS [Extra3], 
[GroupBy1].[A1] AS [C2], 
[GroupBy1].[A2] AS [C3]
FROM ( SELECT 
        [Filter1].[K1] AS [K1], 
        COUNT([Filter1].[A1]) AS [A1], 
        SUM([Filter1].[A2]) AS [A2]
        FROM ( SELECT 
                [Extent1].[Extra3] AS [K1], 
                1 AS [A1], 
                DATEDIFF (second, [Extent1].[PickUp], [Extent1].[HangUp]) AS [A2]
                FROM  [dbo].[Results] AS [Extent1]
                INNER JOIN [dbo].[Queue] AS [Extent2] ON ([Extent1].[QueueID] = [Extent2].[QueueID]) AND (([Extent1].[Attempt] =  CAST( [Extent2].[Attempt] AS tinyint)) OR (([Extent1].[Attempt] IS NULL) AND ( CAST( [Extent2].[Attempt] AS tinyint) IS NULL)))
                WHERE (1 = [Extent1].[CampaignID]) AND ((DATEPART (month, [Extent1].[PickUp])) = @p__linq__0) AND ((DATEPART (year, [Extent1].[PickUp])) = @p__linq__1)
        )  AS [Filter1]
        GROUP BY [K1]
)  AS [GroupBy1] 
```

据我所知，它与我拥有和想要的非常相似。

所以我的问题是为什么结果不同？我的 SQL 和 LINQ 查询有什么区别？我错过了什么？

提前感谢您的时间和精力！

编辑：

以下是队列和结果的类：

```
public partial class Queue
{
    public long QueueID { get; set; }
    public long CampaignID { get; set; }
    public int Attempt { get; set; }
    public System.DateTime StartTime { get; set; }
    public System.DateTime EndTime { get; set; }
    public string Extra1 { get; set; }
    public string Extra2 { get; set; }
    public string Extra3 { get; set; }
}

public partial class Result
{
    public long ResultID { get; set; }
    public Nullable<long> QueueID { get; set; }
    public Nullable<long> CampaignID { get; set; }
    public Nullable<byte> Attempt { get; set; }
    public Nullable<System.DateTime> PickUp { get; set; }
    public Nullable<System.DateTime> HangUp { get; set; }
    public string Extra1 { get; set; }
    public string Extra2 { get; set; }
    public string Extra3 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:22:39.257

如果您获得的结果数量是十倍，则表明问题出在联接中。我建议自下而上构建查询并测试结果以确定连接是否存在问题。

先试试这个：

```
IQueryable<PracticeSummary> query = db.Results
    .Join(
        db.Queues,
        r => new { Id = r.QueueID.Value, Attempt = r.Attempt.Value },
        q => new { Id = q.QueueID, Attempt = (byte)q.Attempt },
        (r, q) => new { ResultID = r.ResultID, QueueID = q.QueueID
    );

foreach (var result in query)
{
    // See what you have got
} 
```

也许甚至先做 where 会更容易：

```
IQueryable<PracticeSummary> query = db.Results
    .Where(
        r => r.CampaignID == 1
            && r.PickUp.Value.Month == lastMonth
            && r.PickUp.Value.Year == lastMonthYear
    )
    .Join(
        db.Queues,
        r => new { Id = r.QueueID.Value, Attempt = r.Attempt.Value },
        q => new { Id = q.QueueID, Attempt = (byte)q.Attempt },
        (r, q) => new { ResultID = r.ResultID, QueueID = q.QueueID
    );

foreach (var result in query)
{
    // See what you have got
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:24:58.933

您的 Results.Attempt 和 Queue.Attempt 值是否可能包含一些空值？

如果是这样，下面的语句将在结果中将所有行与空值相乘：

```
OR (([Results].[Attempt] IS NULL) AND ( CAST( [Queue].[Attempt] AS tinyint) IS NULL)) 
```

# apache-flex - 如何仅在 flex 中为一个组件设置工具提示延迟？

> ID：14280894
> 
> 赞同：3
> 
> 时间：2013-01-11T15:08:24.027
> 
> 标签：apache-flex

TooltipManager[允许](http://livedocs.adobe.com/flex/3/html/help.html?content=tooltips_4.html)设置`showDelay`,`hideDelay`和`scrubDelay`属性。但是，这些是静态的，所以我假设它们对于我的应用程序中的所有组件都是全局的。我只想更改 1 个组件的这些值。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:45:08.040

它应该可以在设置为首选值`ToolTipEvent.TOOL_TIP_START`的组件上注册一个事件，以及一个重置的事件。`ToolTipManager.showDelay``ToolTipEvent.TOOL_TIP_HIDE``showDelay`

# c# - 在 .NET 中搜索多个类型的所有文件的目录

> ID：14280897
> 
> 赞同：0
> 
> 时间：2013-01-11T15:08:34.783
> 
> 标签：c#, .net, .net-2.0

假设我有一个像“ *.vcproj;* .csproj;*.sln”这样的字符串，并且我想在一个目录中显示这些类型的所有文件...... Windows 一直通过打开文件对话框来执行此操作。

我知道，`Directory.GetFiles`但它只允许我运行给定的搜索模式，所以我必须拆分我的输入，然后循环遍历每个。

在所有打开文件对话框之后，是否没有内置功能可以做到这一点？

.NET 2 所以没有 LINQ 的聪明才智是可用的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:11:14.423

试试这个方法：

```
string[] formats = {".jpg", ".png", ".txt"};
var files = Directory.GetFiles("C:\\");
var neededFiles = files.
    Where(file => formats.Any(file.EndsWith)).
    ToArray(); 
```

或者，对于 .NET 2.0：

```
var desiredFiles = new List<string>(files.Length);
foreach (var file in files)
{
    foreach (var format in formats)
        if (file.EndsWith(format))
        {
            desiredFiles.Add(file);
            break;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:27:33.687

您可以使用垂直管道'|' 对于[RegEx 交替](http://www.regular-expressions.info/alternation.html "正则表达式参考：交替")。我认为您的最终代码应类似于：

```
string input_files = ".vcproj;.csproj;*.sln";
string search_for = input_files.Replace(".","\.").Replace(";","|")

Directory.GetFiles("/path/to/directory",search_for) 
```

我从未在 .NET 中进行过任何编码，因此如果我的语法错误，我深表歉意。显然，如果您的初始搜索词字符串以有效的正则表达式形式开始，您可以节省一些时间。

# android - 没有上下文的 Android ORMLite

> ID：14280900
> 
> 赞同：0
> 
> 时间：2013-01-11T15:08:49.083
> 
> 标签：android, ormlite

有没有办法在***没有***应用程序上下文的情况下访问 ORMLite DatabaseHelper？我的数据结构中有一个多层次结构，但我总是只将父级保存在数据库中，并想用 SQL 语句检索子级。

我宁愿这样做而不必使用上下文，特别是对于单元测试。这是可能的，还是我总是需要有上下文才能与数据库交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:12:19.337

当您按照这些示例进行操作时，您会启动一次数据库助手或管理器，并使用来自您的启动 Activity 或其父级的基本上下文。

从那时起，您无需在任何上下文中重新创建它。

您将需要在某一时刻提供一个上下文，但是第一次启动它。

# c# - 阅读 XML 中的下一个节点（Linq to XML C#）

> ID：14280901
> 
> 赞同：2
> 
> 时间：2013-01-11T15:08:54.133
> 
> 标签：c#, xml, linq-to-xml

我有一个这样设置的 XML 文档（没有属性）：

```
<variables>
    <variable>
        <name>Name_Value</name>
        <value>Value of Entry</value>
    </variable>
    <variable>
        <name>Name_Value2</name>
        <value>Value of Entry2</value>
    </variable>
</variables> 
```

我使用 LINQ to XML 来获取`<name>`文档中所有值的列表。这些名称值按字母顺序（*不是*XML 文档中名称的顺序）显示在列表框控件中。

当在列表框中选择一个项目时，我想将项目的名称传递给一个方法，该方法将在 XML 文档中搜索`<name>`节点内的该值。一旦找到，我想找到下一个节点（即`<value>`节点）并将其值作为字符串返回。

我已经尝试了各种方法来获取这些信息，但显然我对 LINQ to XML 的了解还不够，无法完成这项工作。只能为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:12:15.603

```
XDocument xdoc = XDocument.Load(path_to_xml);
var query = from v in xdoc.Descendants("variable")
            where (string)v.Element("name") == name
            select (string)v.Element("value"); 
```

此 Linq 查询将返回`IEnumerbale<string>`与您的姓名匹配的值元素。如果您确定不应该有超过一个具有指定名称的变量

```
string value = query.SingleOrDefault(); 
```

或在单个查询中：

```
string value =  xdoc.Descendants("variable")
                    .Where(v => (string)v.Element("name") == name)
                    .Select(v => (string)v.Element("value"))
                    .SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:23:53.540

我认为使用 XPath 的方法更容易阅读：

```
using System;
using System.Linq;
using System.Xml.Linq;
using System.Xml;
using System.Xml.XPath;

public class Test
{
    public static void Main()
    {
        var xml = XElement.Parse(@"<variables>
    <variable>
        <name>Name_Value</name>
        <value>Value of Entry</value>
    </variable>
    <variable>
        <name>Name_Value2</name>
        <value>Value of Entry2</value>
    </variable>
</variables>");

        Console.WriteLine(
                      GetVariableValue(xml, "Name_Value")
                ); 
        Console.WriteLine(
                      GetVariableValue(xml, "Name_Value2")
                ); 

    }

        public static string GetVariableValue(XElement xml, string variableName)
        {
             return xml.XPathSelectElement("variables/variable[name='" + variableName + "']/value").Value;
        }
} 
```

# html - leftbars 似乎有点左移

> ID：14280903
> 
> 赞同：0
> 
> 时间：2013-01-11T15:08:56.833
> 
> 标签：html, css

我正在为我的网站制作左栏，但它们似乎有点左移。我不知道为什么会这样。我附上了代码。

**HTML**

```
<div id="main_element">
    <div id="first-child">
        <img/><span id="edit">Edit Picture</span>
    </div>
    <div id="leftbar" align="center">
        <div>Left bar 1</div>
        <div>Left bar 2</div>
        <div>Left bar 3</div>
    </div>
</div> 
```

**CSS**

```
#main_element{
width:90%;
position:relative;
border:1px solid teal;
}

#first-child{
position:relative;
height:90%;
width:100%;
}

#edit{
position:absolute;
right:6%;
top:4%;
font-size:1em;
}

#main_element #first-child img{
border:1px solid teal;
height:50%;
width:90%;
margin:5%;
background-color:#ccc;
}

#leftbar{
height:40%;
margin:0 1%;
}

#leftbar div{
border:1px solid;
width:100%;
height:25%;
background:#E0E0E0;
text-align:center;
padding:1% 0;
} 
```

我也附上一个演示。[http://jsbin.com/agahuw/2/edit](http://jsbin.com/agahuw/2/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:24:05.240

这是因为您将它们的宽度设置为 100%，但您还为它们添加了边框，这意味着实际宽度为 100% + 2px

如果您需要对它们设置边框，请不要给它们指定宽度 - 默认情况下它们应该填充其容器（除非您浮动它们）

# javascript - AngularJS无限滚动有大量数据

> ID：14280905
> 
> 赞同：52
> 
> 时间：2013-01-11T15:08:59.277
> 
> 标签：javascript, angularjs

所以我正在尝试使用 AngularJS 创建一个无限滚动表，类似于：http: [//jsfiddle.net/vojtajina/U7Bz9/](http://jsfiddle.net/vojtajina/U7Bz9/)

我遇到的问题是，在 jsfiddle 示例中，如果我继续滚动直到获得一百万个结果，浏览器会慢到爬行，不是吗？因为现在 $scope.items 中会有`1,000,000`结果。例如，如果我只`1000`在 $scope.items 内有一次结果，而我正在查看的结果恰好在这些`1000`.

示例用例：页面加载，我看到了第一个`10`结果（超出`1,000,000`）。即使我只看到`10`，第一个`1000`结果实际上已加载。然后我滚动到列表的最底部以查看最后的`10`项目。如果我再次向上滚动到顶部，我希望`10`必须从服务器再次加载顶部结果。

我有一个使用 ExtJS 完成的项目，情况类似：一个包含数千个结果的无限滚动列表。ExtJS 处理这个问题的方法是加载当前页面的结果，然后预加载几个额外的结果页面。然而，在任何时候，只有`10`一页页的结果存储在本地。

所以我想我的问题是我将如何在 AngularJS 中实现它？我知道我没有提供太多代码，所以我不希望人们只给出编码的答案，但至少给出一些方向的建议。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-11T18:54:07.823

A couple of things:

1.  "Infinite scrolling" to "1,000,000" rows is likely to have issues regardless of the framework, just because you've created millions and millions of DOM nodes (presuming you have more than one element in each record)

2.  The implementation you're looking at doing with `<li ng-repeat="item in items">{{item.foo}}</li>` or anything like that will have issues *very* quickly for one big reason: `{{item.foo}}}` or any ngBind like that will set up a `$watch` on that field, which creates a lot of overhead in the form of function references, etc. So while 10,000 small objects in an "array" isn't going to be that bad... 10,000-20,000 additional function references for each of those 10,000 items will be.

What you'd want to do in this case would be create a directive that handles the adding and removing of DOM elements that are "too far" out of view as well as keeping the data up to date. That should mitigate most performance issues you might have.

... good infinite scrolling isn't simple, I'm sorry to say.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-10-08T18:19:26.523

我喜欢angular-ui实现ui-scroll ...

[https://github.com/angular-ui/ui-scroll](https://github.com/angular-ui/ui-scroll)

...在 ngInfiniteScroll 上。ui-scroll 与标准无限滚动的主要区别在于，在离开视口时会删除先前的元素。

从他们的自述文件...

> 向用户呈现未定义长度的数据元素列表的常用方法是从列表顶部的一小部分开始 - 刚好足以填满页面上的空间。当用户向下滚动列表时，额外的行会附加到列表的底部。
> 
> **这种方法的问题在于，即使列表顶部的行在滚动出视图时变得不可见，它们仍然是页面的一部分并且仍然消耗资源**。随着用户向下滚动，列表会增长，网络应用程序会变慢。
> 
> 如果代表一行的 html 附加了事件处理程序和/或角度观察程序，这将成为一个真正的问题。一个平均复杂度的 Web 应用程序可以轻松地每行引入 20 个观察者。对于 100 行的列表，您总共有 2000 个观察者和一个缓慢的应用程序。

此外，积极维护 ui-scroll。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-09-26T06:18:27.707

似乎[http://kamilkp.github.io/angular-vs-repeat](http://kamilkp.github.io/angular-vs-repeat)将是您正在寻找的。它是一个虚拟滚动指令。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-14T15:15:35.183

事实证明，AngularJS 的[ng-grid](http://angular-ui.github.com/ng-grid/#/overview)模块几乎完全符合我的需要。如果您查看[示例页面](http://angular-ui.github.com/ng-grid/#/examples)，服务器端处理示例也是一个无限滚动列表，仅加载需要的数据。

感谢那些无论如何评论和回答的人。

最新网址：**[ng-grid](http://angular-ui.github.io/ui-grid/)**

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-16T05:45:20.517

您可以尝试使用 ng-infinite-scroll ：

[http://binarymuse.github.io/ngInfiniteScroll/](http://binarymuse.github.io/ngInfiniteScroll/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-16T17:46:26.837

从 Angular Material查看[virtualRepeat](https://material.angularjs.org/latest/demo/virtualRepeat)

它实现了对视口区域中可见行的动态重用，就像 ui-scroll

# jquery - Discogs API getJSON 不工作

> ID：14280906
> 
> 赞同：0
> 
> 时间：2013-01-11T15:09:01.550
> 
> 标签：jquery, json, api, getjson, discogs-api

我试图简单地搜索 Discogs 数据库并以 HTML 格式显示结果，但是当我尝试执行 jQuery 函数 getJSON 时，它的行为就好像我提供的 URL 不正确，因为在 getJSON 函数中没有任何作用。当我查看该函数在浏览器中创建的 URL 时，它会转到正确的 JSON 搜索页面并显示正确的结果，但不会让我解析结果。

有人可以告诉我我尝试使用的 Discogs API URL 是否有问题，或者我的编码语法是否有问题？

提前致谢。

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Discogs Search</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$("#button").click(function(){
    $.getJSON("http://api.discogs.com/database/search?type=master&q=illmatic&page=1&per_page=100", function(data) {
        $("#output").append("TEST");
        var theid = data.results[0].id;         
    }); 
});
});
</script>
</head>
<body>
<button id="button">Search</button>
<div id="output"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:25:01.370

我只需要添加一个“回调=？” 我试图访问的 JSON URL 的参数和值，它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T03:40:31.600

似乎是一个安全问题。可能试图从您的本地主机而不是 Web 服务器访问。当您将该 URL 放入浏览器时，您会收到以下消息：{“message”：“您必须进行身份验证才能访问此资源。”}

另外：我在 Discogs 论坛上找到了这个帖子。 [http://www.discogs.com/forum/thread/396480](http://www.discogs.com/forum/thread/396480)

# php - 使用 PHP 将 HEX 插入到文件中

> ID：14280908
> 
> 赞同：0
> 
> 时间：2013-01-11T15:09:05.600
> 
> 标签：php, hex, fopen

我有一个 PHP 工具，用于自动生成一些十六进制的过程，然后我使用十六进制编辑器手动将其放入文件中。

我有 1 个字节到偏移量 0x345，还有一个更大的可变长度部分到 0x560。我使用 Paste > Write 以便我生成的十六进制替换它的方式，而不是增加文件的大小。

有没有办法可以自动化这个，`fopen();`这样我就可以跳过手动粘贴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:11:54.453

您可以使用这些功能：`fopen`打开文件，`fseek`到所需的位置和`fwrite`您的数据。

# string - 指向具有二维数组的结构的指针

> ID：14280909
> 
> 赞同：0
> 
> 时间：2013-01-11T15:09:06.117
> 
> 标签：string, pointers, structure

我有这个结构：

```
struct dict{
int len;
char (*dict0)[MAX_WORD_LEN+1];
char (*dict1)[MAX_WORD_LEN+1]; 
```

};

我这样做：

结构字典字典；结构字典 *p_diction=&dictionary; 但是当我尝试使用指向指针的指针进行扫描时，我得到一个错误，自然我已经定义了一切。

scanf("%10s",p_diction->(*(dict0+i))[0]);

''(' 标记之前的预期标识符

不，我不想使用 &dictionary 进行 scanf，因为除了 scanf 之外的其他情况也会发生这种情况。

编写命令的正确形式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:13:16.263

你想要的是

```
p_diction->dict0[i] 
```

或者

```
*(p_diction->dict0 + i) 
```

您需要传递一个指针来`char`进行`%s`转换，所以`char[MAX_WORD_LEN+1]`没关系（它将被转换为指向其中第一个的指针`char`）。

```
p_diction->dict0 
```

为您提供指向 的指针`char[MAX_WORD_LEN+1]`，并且您想要`i`这些数组中的第 - 个，因此您必须将此指针递增`i`. 然后要获得正确类型的指针，您必须取消引用才能获得数组。然后您可以使用自动数组到指针的转换，或者显式传递`char`数组中第一个的地址

```
&p_diction->dict0[i][0] 
```

使用您尝试的两次取消引用，您将通过 a `char`，这将造成严重破坏。你只需要一个。

# java - 这是与 Ready to Program Java 相关的问题还是语法错误？（对象错误）

> ID：14280910
> 
> 赞同：0
> 
> 时间：2013-01-11T15:09:05.950
> 
> 标签：java, class, object

在这个程序中，我正在创建一个类实例。

我正在尝试制作一个 void 方法来在主要方法之外显示人的（对象）属性。

错误是：

**1.** '*没有在人员中找到字段名称大小*' (5)

**2.** '*在 People 中找不到名为 DisplayAtt 的方法*' (20)

我想知道这是否是与我的程序或 RTP 的一般语法相关的错误。

我正在尝试学习 OOP。

```
class People
    {
        public void DisplayAtt ()
        {
            System.out.println (size);
            System.out.println (race);
            System.out.println (personality);
        }

        public static void main (String args[])
        {
            Person thisPerson;
            thisPerson = new Person ();

            thisPerson.size = "Average";
            thisPerson.race = "Caucasian";
            thisPerson.personality = "Stubborn";

            thisPerson.DisplayAtt ();
        }
    }

    /// Object Class ///

    public class Person
    {
        String size;
        String race;
        String personality;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:11:46.060

`DisplayAtt`移到非人`Person`。

通常，您会`toString()`使用 IDE 覆盖以生成代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:12:07.247

显示 att 需要是您的 Person 类中的一个方法，或者需要接受一个人作为参数。

# c# - 通过触摸不可见的滚动视图中的Windows 8滚动条

> ID：14280911
> 
> 赞同：1
> 
> 时间：2013-01-11T15:09:06.673
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

在我的应用程序中，我有一个 ScrollViewer，其中我在 StackPanel 中显示项目。当我用鼠标滚动它时，垂直滚动条可见。当我通过手指触摸滚动时，垂直滚动条不可见。是否可以在触摸模式下显示我的垂直滚动条？在下面我的 xaml 代码中：

```
 <ScrollViewer Width="580"
                  Height="580"
                  Visibility="Visible"
                  IsDeferredScrollingEnabled="True"
                  VerticalScrollBarVisibility="Visible"
                  HorizontalScrollMode="Disabled"
                  ZoomMode="Disabled">  
            <StackPanel x:Name="viewPanel"
                Background="Transparent"
                Orientation="Vertical"
                Width="Auto"
                Height="Auto"/> 
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:53:27.933

您将在触摸模式下显示更细的滚动指示器。这是设计使然。如果您想要不同的行为，则必须覆盖 ScrollViewer 模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:20:48.853

尝试使用 VerticleScrollMode="Enabled"

# jquery - jQuery UI 手风琴破坏不起作用

> ID：14280920
> 
> 赞同：0
> 
> 时间：2013-01-11T15:09:20.737
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion, destroy

当窗口大小调整到设定点以上时，我在删除手风琴小部件时遇到了问题。

我正在使用 jQuery 1.8.3 和 jQuery UI 1.9.2。

这是我的代码：

```
/*
* Detect browser size and add accordian on page (at load) if necessary
*/
$(document).ready(function() {
    var window_width = $(window).width();  
    if (window_width <= 767){
        $("div.innernav ul.menu").accordion({ 
            header: '.separator',
            animated: 'slide',
            event: "click",
            heightStyle: "content",
            icons: { "header": false, "headerSelected": false } ,
            collapsible: true, 
            active: false,
        });
    }
});
/*
* Detect browser size on resize and add/remove accordian
*/
$(window).resize(function() {
    var wi = $(window).width();
    if (wi <= 767){
        $("div.innernav ul.menu").accordion({ 
            header: '.separator',
            animated: 'slide',
            event: "click",
            heightStyle: "content",
            icons: { "header": false, "headerSelected": false } ,
            collapsible: true, 
            active: false,
        });
    } else if (wi >= 768){
        $("div.innernav ul.menu").accordion("destroy");
    }
}); 
```

该代码有效，我的手风琴仅在窗口宽度小于 768px 时才处于活动状态，但我得到：

`Error: cannot call methods on accordion prior to initialisation; attempted to call method 'destroy'`

似乎这个错误使我在页面上的其他代码变得笨拙，所以我可以删除这个错误。我是一个 javascript/jQuery 新手，所以非常感谢您的帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:16:06.737

尝试将您的就绪函数更改为单独的函数。

在 else 部分：

```
$("div.innernav ul.menu").empty(); 
```

然后只需像准备功能一样重新填充 ul 菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:49:58.867

最后，我使用 if 语句重新编写了函数，以检查小部件是否在元素上实际处于活动状态：[在运行 Jquery 函数之前检查小部件是否可用](https://stackoverflow.com/questions/12733132/check-if-widget-is-available-before-running-jquery-function)

这是完成的代码：

```
$(window).load(function(){
    var element = $('div.innernav ul.menu');
    if($(window).width() < 768){
        element.accordion({ header: '.separator', animated: 'slide', event: "click", heightStyle: "content", icons: { "header": false, "headerSelected": false }, collapsible: true, active: false});
    } 
    else {
        element.accordion = false;
    }
    $(window).resize(function(){
        if($(window).width() > 767) {
            element.find('.item').removeAttr('style');
            if(element.accordion) {
                element.accordion('destroy');
                element.accordion = false;
            }
        } 
        else {
            element = $('div.innernav ul.menu');
            element.accordion({ header: '.separator', animated: 'slide', event: "click", heightStyle: "content", icons: { "header": false, "headerSelected": false }, collapsible: true, active: false});
        }
    });
}); 
```

# google-maps - 为什么打印网页时 Google Map API V3 画布不打印？

> ID：14280923
> 
> 赞同：0
> 
> 时间：2013-01-11T15:09:30.477
> 
> 标签：google-maps, google-maps-api-3, webkit, webkit-transform

提前感谢您提供的任何帮助！我创建了一个似乎运行良好的地图工具；我得到了一张地图、一条可拖动的路线、多个航路点和一个完整的动态方向面板。我希望用户能够打印此网页并获取 map_canvas 和 Directions_panel。在测试中，打印预览曾经包含 map_canvas，但在此过程中，当我打印网页时，map_canvas 停止出现。如何在打印时显示它？

这是我的 HTML。

```
<div id="map-route-page">
<div id="map_canvas"></div>
<div class="clear"></div>
<div class="map-buttons">
<input type="submit" id="showform" value="Edit Map">
<a href="javascript:if(window.print)window.print()"><input type="submit" id="printpage" value="Print this Page"></a>
</div>
<div class="clear"></div>
<div id="directions_panel"></div>
</div> 
```

更新：搞乱CSS，我发现如果我删除“位置：相对”和“-webkit-transform: translateZ(0);”，地图就可以打印了。来自#map_canvas。不幸的是，这使得整个打印页面看起来很奇怪（地图太大而且位置不正确。）我应该添加另一个标签或 CSS 来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:29:15.387

呸！经过大量的反复试验，我找到了解决方案。虽然我在 main.css 文件中指定了 #map_canvas 的宽度和高度，但我没有在 print.css 文件中指定这些属性。我没有编辑 position:relative 或 -webkit-transform 属性以使其适合我。

# asp.net-mvc-3 - 将 css 样式应用于 @Html.TextBoxFor 不起作用

> ID：14280924
> 
> 赞同：1
> 
> 时间：2013-01-11T15:09:33.913
> 
> 标签：asp.net-mvc-3

我正在尝试将 css 类样式应用于 mvc3 razor 视图中的 @Html.TextBoxFor 控件。但我无法看到应用于控件的定义样式。下面是我的代码：

在我的 .cshtml 文件中，我的控件为：

```
@Html.TextBoxFor(model => model.project.ProjectName, new { @class = "myStyle"}) 
```

在 .css 文件中，我将样式定义为：

```
.myStyle
{
    width: 150px;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 1.00em;
} 
```

我究竟做错了什么？任何人都可以帮助我吗？

谢谢， 巴拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:20:13.957

如果您确定您的样式表已正确加载到页面（检查样式表的路径是否正确），则问题的可能原因可能是，其他一些样式覆盖了您定义的样式。用于`IMPORTANT`使其覆盖其他所有内容

```
input.myStyle
{
    width: 150px !IMPORTANT;
    font-family:Arial, Helvetica, sans-serif !IMPORTANT;
    font-size: 1.00em !IMPORTANT;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:18:04.507

.cshtml 代码对我来说看起来是正确的。我会检查生成的 HTML 源代码，以验证`class="myStyle"`ProjectName 输入中是否存在该源代码。如果它存在，那么问题出在您的 CSS 上（例如，另一种样式可能会被覆盖`myStyle`）。

# css - 使用输入提交按钮修复 css 按钮

> ID：14280931
> 
> 赞同：0
> 
> 时间：2013-01-11T15:09:48.523
> 
> 标签：css

我有一个可以很好地与锚标记配合使用但不能与提交输入标记配合使用的按钮。我如何使用提交按钮进行这项工作？

```
.classname {
     -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
     -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
     box-shadow:inset 0px 1px 0px 0px #ffffff;
     background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
     background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
     filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
     background-color:#ededed;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
     border-radius:6px;
     border:1px solid #dcdcdc;
     display:inline-block;
     color:#777777;
     font-family:arial;
     font-size:15px;
     font-weight:bold;
     padding:6px 24px;
     text-decoration:none;
     text-shadow:1px 1px 0px #ffffff;
}
.classname:hover {
     background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
     background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );
     filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed');
     background-color:#dfdfdf;
}
.classname:active {
     position:relative;
     top:1px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:14:01.767

当我第一次开始学习输入并进入提交时，我认为它崩溃并且提交不起作用。实际上它变成了只有`cursor`变化。尝试设置按钮样式`cursor: pointer`。

# javascript - 获取元素的 :hover 大小而不实际悬停

> ID：14280932
> 
> 赞同：1
> 
> 时间：2013-01-11T15:09:49.807
> 
> 标签：javascript, html, css, hover

我知道可以在[不悬停在元素上的情况下获得 a:hover 颜色](https://stackoverflow.com/questions/13651337/is-it-possible-to-get-an-ahover-color-via-javascript-without-hovering-on-the-el)，但是它的宽度和高度呢？如果链接的大小为`auto`，则无法从样式表中读取。我打算用悬停到粗体的链接做一些实验性的诡计。我唯一的选项是否绑定到悬停事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:15:26.813

你可以用与颜色类似的方式来解决它。如果您从样式表中提取所有会影响宽度的信息。并将其应用于与链接内容相同的临时元素。然后你可以计算宽度。

如果您自己创建样式表，那么创建这样的 CSS 规则会更容易。

```
a:hover, a.hover {} 
```

然后临时将类 .hover 添加到链接并计算其大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:59:41.743

就个人而言，如果没有性能泄漏问题，
我可以建议一种更简单的方法，使用 jquery在所需元素上`.trigger()`触发`mouseover`事件，然后获取它的宽度，它可以为您提供比其他方式更实用的大小。尽管您可以将它与其他脚本和函数异步使用，以免影响您的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:18:05.673

我建议使用[此方法](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)，但将其更改为将样式添加到 中`span`，使其与您的`a:hover`.

# ios - 如何返回ios资源文件夹中所有文件的名称？

> ID：14280933
> 
> 赞同：0
> 
> 时间：2013-01-11T15:10:06.060
> 
> 标签：ios, nsfilemanager

我想检索 Resources 文件夹中具有`.html`扩展名的文件名的数组。我已经这样做了：

```
NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Resources"];
NSError *error = nil;
NSArray *documentArray = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:&error];
for (int i=0; i < [documentArray count] - 1; i++) {
    NSLog(@"value %@", [documentArray objectAtIndex:i]);
} 
```

但是 for 循环始终显示为空。任何人都知道我怎样才能正确完成这项任务？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:18:20.450

不要使用`NSHomeDirectory`. 用于`[[NSBundle mainBundle] resourcePath]`获取应用程序资源的路径。

已编辑：这是您的示例代码。

```
NSString *resPath = [[NSBundle mainBundle] resourcePath];
NSError *error = nil;
NSArray *filenames = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:resPath error:&error];
if (!error)
{
    for (NSString * filename in filenames)
    {
        NSString *extension = [filename pathExtension];
        if ([extension isEqualToString:@"html"])
        {
            NSLog(@"%@", filename);
        }
    }
} 
```

# java - 使用 ResourceBundle 将属性文件从一种语言翻译成另一种语言

> ID：14280938
> 
> 赞同：0
> 
> 时间：2013-01-11T15:10:12.130
> 
> 标签：java, properties, locale, resourcebundle, country

I have message.properties file. by default it will load as English when I use Locale and Resource Bundle in Java file. Now, I need to specify the Country Code or Type in Locale, Then the message.properties file key values should be load as the specified Country in Locale. How can I do this.?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:19:51.807

[Oracle在这里](http://docs.oracle.com/javase/tutorial/i18n/resbundle/propfile.html)有一些示例代码。

基本上，您使用正确的语言创建捆绑包，`Locale`然后加载它：

```
ResourceBundle.getBundle("LabelsBundle", currentLocale); 
```

有关[国际化](http://docs.oracle.com/javase/tutorial/i18n/intro/index.html)的更多信息..

另外，在提出问题之前，请尝试自己搜索一下......

# python - 导入从同一目录导入的模块

> ID：14280942
> 
> 赞同：2
> 
> 时间：2013-01-11T15:10:26.607
> 
> 标签：python, python-3.x

假设我有一个项目设置如下：

```
myproject/
  setup.py
  myproject/
    __init__.py
    module1/
      __init__.py
      a.py
      b.py
      test/
        __init__.py
        test.py 
```

在`a.py`我有：

```
from b import Something 
```

在`test.py`我有：

```
from myproject.module1 import a 
```

当我运行时，`test.py`我得到一个`ImportError`因为`b`找不到 - 因为 test.py 在不同的目录中。

我知道我可以`a.py`通过写作来解决这个问题`from myproject.module1.b import Something`，但这似乎过于冗长，无法在整个项目中完成。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:23:01.483

我认为你可以使用

```
from .b import Something 
```

由于这是相对的，它应该始终有效。

请参阅[http://docs.python.org/3/tutorial/modules.html#intra-package-references](http://docs.python.org/3/tutorial/modules.html#intra-package-references)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:29:34.097

`from myproject.module1.b import Something`是最好的方法。它可能有点冗长，但它是明确的，这通常是 Pythonic 代码中理想的品质。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:30:37.777

您可以尝试[相对导入](http://docs.python.org/2/tutorial/modules.html#intra-package-references)，`a.py`例如

```
from .b import Something 
```

但这可能不是您问题的完整解决方案。与`import`在更高级别的目录结构中模块/打包的任何模块一样，您必须小心运行它的方式。具体来说，以`python submodule.py`隐式方式运行模块会将模块的`__name__`变量设置为`"__main__"`. 由于导入（相对和绝对相似）依赖于 that`__name__`和`PYTHONPATH`，因此直接运行子模块可能会使导入行为不同（或中断，如您的情况）。

尝试运行您的`tests.py`as

```
python myproject/module1/test/test.py 
```

*从包的顶层*而不是直接运行它。

# python - 即使在while循环中触发了break，也会执行else语句

> ID：14280943
> 
> 赞同：1
> 
> 时间：2013-01-11T15:10:33.190
> 
> 标签：python, python-2.7, embedded

我有一个 while 循环来检查变量 Accessory2 的上升沿。我的代码如下：

```
 # Check for rising edge of ACC2
    while (currentTime.Value - StartTime) < TimeOutValue:
        if Accessory2.Value == 1:
            Acc2StartTime = currentTime.Value
            print rttPrefix + "ACC2 output to ON"
            break
        yield None
    else:
        print rttPrefix + "No ACC2 output"
        DynamicFlag.Value = -2 
```

但是，当变量 Accessory2 上升时，break 条件停止 if 语句，但 else 语句也被执行。知道为什么吗？

输出如下：

```
*RTT:* ACC2 output to ON
*RTT:* No ACC2 output 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:52:37.827

也许你只是多次执行（或继续）while循环，第一次执行打印你的第一行，随后的执行打印第二行。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T15:19:01.397

您的 else 语句与您的 while 循环在同一级别缩进，因此不在其中。

# django - django缓存外键

> ID：14280945
> 
> 赞同：2
> 
> 时间：2013-01-11T15:10:35.543
> 
> 标签：django, django-models

我正在创建一个数据库模型与此类似的站点。

```
class Category(models.Model):
    name = modles.CharField(max_length=30)

class Photos(models.Model):
    name = models.CharField(max_length=30)
    category = models.ForeignKey(Category) 
```

现在我从照片中选择一个元素并将其存储到缓存中`cache.set('object',object,timeout)`。现在我尝试`photos.name`从这个缓存中访问，没有执行任何查询。我查询`photos.category`它的那一刻执行查询。有什么办法可以防止这种情况。我只想要category的id，拿到id后，可以查询category缓存获取元素。实现这一点的解决方案是什么。缓存它显着提高了我的基准，我正试图从中获得更多性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:16:47.780

如果你只想要ID，你可以这样做`photos.category_id`。

您可能还想`select_related()`在查询原始照片时探索使用以获取相关类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:11:26.280

我自己想出了答案。我的问题是，当我从缓存中检索对象并查询 id 时，它会对实际数据库进行另一个查询。解决方案很简单。在将查询集保存到缓存之前，只需查询外键。喜欢

```
 get photo object from database
 q=photos.category
 cache.set('object',object,timeout) 
```

记住查询集是惰性的。如果你把它保存到数据库中，下次你从缓存中访问它时，它也会包含外键数据。希望这可以帮助。

# actionscript-3 - Flash 错误 2012 无法实例化共享对象类？

> ID：14280946
> 
> 赞同：0
> 
> 时间：2013-01-11T15:10:41.540
> 
> 标签：actionscript-3, flash

我不知道为什么会出现此错误，有人可以告诉我.. 导致此错误的原因以及如何解决...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:12:35.010

听起来您正在使用`new SharedObject()`，但共享对象与正常情况有些不同。而不是尝试自己创建一个新实例，您应该`SharedObject.getLocal`像这样使用：

```
private var mySo:SharedObject = SharedObject.getLocal("application-name"); 
```

但显然将“应用程序名称”更改为特定于您的项目的内容。

这里的文档中有一个更详细的示例：[共享对象示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html#includeExamplesSummary)

# google-maps - jQuery 移动单页模板通过 ajax 加载内容

> ID：14280951
> 
> 赞同：1
> 
> 时间：2013-01-11T15:10:47.417
> 
> 标签：google-maps, jquery, cordova, jquery-mobile

我正在使用和创建移动应用`phonegap`程序。我想要一个以上的 html 模板文件（页面导航），并通过覆盖仅加载页面的内容。`google maps``jquery mobile``ajax``javascript`

此外，我想保留历史记录和哈希值，以便能够返回上一页等。我尝试使用`$.mobile.loadPage`，`changePage`但这正在改变整个页面，我只想改变内容。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:16:21.513

You will find [this framework](http://cordova.codeplex.com/) the exact one you are looking for.

# windows-phone-7 - Windows Phone 7 未注册证书中心

> ID：14280952
> 
> 赞同：0
> 
> 时间：2013-01-11T15:10:52.300
> 
> 标签：windows-phone-7, certificate, webclient

我正在开发 WP7 应用程序。它通过 WebClient 连接到由证书 https 地址保护。证书由未在电话证书中心注册的人提供。当应用程序通过 https 连接时不会发生错误，因为证书无效 - 对于 WP，但确实如此。浏览器中的调用地址表明证书在任何注册的 CA 中心均无效。如何在安装过程中注册 CA 中心，或者如果无法进行 CA 注册，如何安装此证书。我找不到任何相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:22:29.850

按照[此处](https://stackoverflow.com/questions/681695/what-do-i-need-to-do-to-get-internet-explorer-8-to-accept-a-self-signed-certific)列出的步骤操作：然后将证书通过电子邮件发送给您自己（您需要一个物理设备）。电子邮件应用程序是安装证书的唯一方法。

[StackOverflow：我需要做什么才能获得......自签名证书](https://stackoverflow.com/questions/681695/what-do-i-need-to-do-to-get-internet-explorer-8-to-accept-a-self-signed-certific)

# css - 页脚中的图像和链接宽度

> ID：14280953
> 
> 赞同：0
> 
> 时间：2013-01-11T15:10:52.907
> 
> 标签：css, twitter-bootstrap

我试图在页脚区域居中放置一个可点击的图像。我已经在 Chrome 和 Firefox 上进行了测试，整个页脚都是可点击的。Chrome 检查器将元素显示为 0 像素高和 0 像素宽。我究竟做错了什么？

PS：我正在使用 Twitter Bootstrap

这是CSS：

```
body {
    margin:0;
    padding-top: 0px;
    margin-bottom: 20px;
}

#footerLogo { 
    display:block;
    margin-left: auto;
    margin-right: auto;
    width: 73px;
}

#footer {
    position: fixed;
    bottom: 0px;
    width: 100%;
    padding-top: 5px;
    padding-bottom: 5px;
    background-color:red;
} 
```

这是HTML：

```
<div id="footer">
    <a href="#"><img id="footerLogo" src="/images/footer.gif"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:21:12.140

```
<div id="footer">
    <a href="#"><img id="footerLogo" src="/images/footer.gif" /></a>
</div> 
```

注意我是如何关闭 img 元素的 `/>`

整个页脚可点击的问题是`display: block` ，还去掉了 img 的边距

```
#footerLogo { 
    display:block;  //this line - take it out
    width: 73px;
} 
```

如果你想居中，那么居中`<a>`

```
#footer a {
position: relative;
margin: auto;
width: 74px; //this may be necessary for IE7
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:29:00.700

添加到`#footer`a`text-align: center`以标记其中元素的居中，并添加`margin: 0 auto`到`#footerLogo`并删除`display:block`- 因为该块将`<a>`标签设置为 box 并占据整个父容器。

[http://jsfiddle.net/T4PSS/](http://jsfiddle.net/T4PSS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:14:56.943

这是因为您正在使用

```
margin-left:auto;
margin-right: auto; 
```

没有指定的宽度，适用`id="footerLogo"`于`<a>`：

```
<style>
    body {
        margin:0;
        padding-top: 0px;
        margin-bottom: 20px;
    }

    #footerLogo {
        display:block;
        margin:0 auto;
        width: 200px;
    }

    #footer {
        position: fixed;
        bottom: 0px;
        width: 100%;
        padding-top: 5px;
        padding-bottom: 5px;
        background-color:red;
    }
</style> 
```

HTML：

```
<div id="footer">
    <a id="footerLogo" href="#"><img src="/images/footer.gif" /></a>
</div> 
```

# java - 是否可以在部署期间自动更新后端配置？

> ID：14280955
> 
> 赞同：2
> 
> 时间：2013-01-11T15:10:58.120
> 
> 标签：java, python, google-app-engine, deployment, backend

[作为部署的一部分， cron 作业](https://developers.google.com/appengine/docs/java/config/cron)的配置会自动更新。只要我的应用程序包含 cron.xml 文件，GAE 就会在部署过程中自动更新配置。我希望[backends.xml 文件](https://developers.google.com/appengine/docs/java/backends/overview)中的更改以相同的方式处理。

我必须运行

```
 appcfg backends <dir> update backend_name 
```

每次部署后手动命令以更新后端配置？或者我可以重新配置部署以便自动更新后端配置吗？

**编辑：**再次[阅读有关驻留与动态后端实例的文档](https://developers.google.com/appengine/docs/java/config/backends#Types_of_Backends)后，似乎很清楚。对于常驻后端实例，启动是：*手动，通过管理控制台或命令行工具*。对于动态实例，启动发生*在收到 HTTP 请求后*。如果我正确阅读了这篇文章，则没有在部署时重新启动/重新配置后端的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T13:58:36.550

我认为后端开发应该分开到另一个文件夹中，并且必须使用 appcfg backends 命令上传。

这样想，后端可以拥有自己的 appengine-web.xml 配置文件来指定如何处理请求以及哪些文件是静态资源等......很明显后端可以包含与前端完全不同的代码。

只是不要将后端和前端文件混合在一起。把他们当作不同的应用程序是我所做的

# c# - DataGridView 单元格中的自定义控件

> ID：14280960
> 
> 赞同：5
> 
> 时间：2013-01-11T15:11:09.833
> 
> 标签：c#, .net, datagridview

我在 DataGridView 单元格中有一个自定义控件。它是一个包含复选框项目（CheckBoxComboBox）的组合框。这是问题所在： 1\. 输入其中一个 CheckBoxComboBoxes 并选择一些复选框项目。CheckboxComboBox 的 Text 是选中项的 csv 字符串。2\. 单击另一个空的 CheckboxComboBox 单元格（没有选中的项目）

结果：新单元格的文本包含旧单元格的文本。如果我单击 CheckBoxComboBox 单元格，然后单击非 CheckBoxComboBox 单元格，然后单击 CheckBoxComboBox 单元格，则它可以正常工作。

我已阅读并基于此文档实现了自定义 DataGridViewCell： [如何：Windows 窗体 DataGridView 单元格中的主机控件](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx?PHPSESSID=o1fb21liejulfgrptbmi9dec92)

当我通过我的自定义 DataGridViewEditingControl 进行调试时，EditingControl.Tag 似乎没有更新。

所以我假设我在重用 EditingControl 时遇到了问题。

我尝试过的事情：

**1\. 覆盖 DataGridViewCell.Clone()**

```
 public override object Clone()
    {
        DataGridViewCheckBoxComboBoxCell checkBoxComboBoxCell = base.Clone() as DataGridViewCheckBoxComboBoxCell;
        if (checkBoxComboBoxCell != null)
        {
            checkBoxComboBoxCell.Tag = this.Tag;
            checkBoxComboBoxCell.Values = this.Values;

        }
        return checkBoxComboBoxCell; 
    } 
```

**2.覆盖DataGridViewCell.DetachEditingControl()**

```
public override void DetachEditingControl()
    {
        DataGridView dataGridView = this.DataGridView;

        if (dataGridView == null || dataGridView.EditingControl == null)
        {
            throw new InvalidOperationException("Cell is detached or its grid has no editing control.");
        }

        DataGridViewCheckBoxComboBoxCellEditingControl ctl = DataGridView.EditingControl as DataGridViewCheckBoxComboBoxCellEditingControl;
        if (ctl != null)
        {
            //Just trying different things
            ctl.EditingControlFormattedValue = String.Empty;
            ctl.Text = string.Empty;
            ctl.Tag = null;
            ctl.Items.Clear();
        }

        base.DetachEditingControl();
    } 
```

知道如何解决这个问题吗？谢谢。

**编辑 1**

这是 DataGridViewCheckBoxComboBoxColumn 类

```
class DataGridViewCheckBoxComboBoxColumn : DataGridViewColumn
{
     public override object Clone()
    {
        DataGridViewCheckBoxComboBoxColumn that = (DataGridViewCheckBoxComboBoxColumn)base.Clone();

        return that;
    }

    private DataGridViewCheckBoxComboBoxCell _cell = null;
    public DataGridViewCheckBoxComboBoxColumn()
    {
        _cell = new DataGridViewCheckBoxComboBoxCell();
        base.CellTemplate = _cell;
    }

    public override DataGridViewCell CellTemplate
    {
        get
        {
            return base.CellTemplate;
        }
        set
        {
            // Ensure that the cell used for the template is a DateCell.
            if (value != null &&
                !value.GetType().IsAssignableFrom(typeof(DataGridViewCheckBoxComboBoxCell)))
            {
                throw new InvalidCastException("Must be a DataGridViewCheckBoxComboBoxColumn");
            }
            base.CellTemplate = value;
        }
    }

    public string Values
    {
        set
        {
            _cell.Tag = value;
            this.Tag = value;
        }
        get
        {
            return _cell.Tag.ToString();
        }
    }
} 
```

**编辑 2** 我的 DataGridViewCheckBoxComboBoxCell 覆盖 Paint()。当我在此方法上设置断点时，单击单元格时会调用它两次。第一次调用时，formattedValue 为空。但是，第二次，formattedValue 包含前一个 checkboxcombobox 单元格的错误字符串。

```
protected override void Paint(Graphics graphics, Rectangle clipBounds, Rectangle cellBounds, int rowIndex,
                                  DataGridViewElementStates cellState, object value, object formattedValue,
                                  string errorText, DataGridViewCellStyle cellStyle,
                                  DataGridViewAdvancedBorderStyle advancedBorderStyle,
                                  DataGridViewPaintParts paintParts)
    {} 
```

为什么它被调用两次，为什么在第二次调用时它包含正确单元格的错误格式值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:19:53.167

弄清楚了。问题是在 DetachEditingControl() 中我需要清除 CheckBoxItems。

```
public override void DetachEditingControl()
    {
        DataGridView dataGridView = this.DataGridView;

        if (dataGridView == null || dataGridView.EditingControl == null)
        {
            throw new InvalidOperationException("Cell is detached or its grid has no editing control.");
        }

        DataGridViewCheckBoxComboBoxCellEditingControl ctl = DataGridView.EditingControl as DataGridViewCheckBoxComboBoxCellEditingControl;
        if (ctl != null)
        {
            ctl.CheckBoxItems.Clear();  //Forgot to do this.
            ctl.EditingControlFormattedValue = String.Empty;
        }

        base.DetachEditingControl();
    } 
```

# javascript - Node.js Kue 如何重启失败的作业

> ID：14280962
> 
> 赞同：14
> 
> 时间：2013-01-11T15:11:16.790
> 
> 标签：javascript, node.js, redis, delayed-job, kue

我在我的 node.js 应用程序中使用[kue](https://github.com/LearnBoost/kue)处理延迟作业。

我有一些问题要弄清楚如何使用 kue 的 API 重新启动作业，而不必使用 redis 命令将作业的 id 从失败作业列表手动移动到非活动作业列表。

这可以使用 kue 吗？

我不想设置固定的重试次数——我只想重试特定的作业。

也欢迎提出维护良好的 kue 替代方案的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T19:59:51.020

我不知道这是否有效，但您可以尝试将作业状态重置为活动，然后再次保存作业：

```
job.on('failed', function() {
  job.state('inactive').save(); 
```

编辑：将状态设置为非活动将正确地重新排队任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-27T20:44:31.720

这也可以使用队列级事件来完成。

```
queue.on('job failed', function(id, result) {
    kue.Job.get(id, function(err, job) {
        if (!err && shouldRetry(job))
            job.state('inactive').save();
    });
}); 
```

因此，您无需为希望重试的每项工作都执行此操作。相反，您可以在队列级别事件中对其进行过滤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-14T19:57:01.533

**请参阅官方文档中的失败尝试**

> 默认情况下，作业只有一次尝试，即当它们失败时，它们被标记为失败，并保持这种状态，直到您进行干预。但是，Kue 允许您指定这一点，这对于传输电子邮件等工作很重要，如果失败，通常可以重试而不会出现问题。为此，请使用数字调用 .attempts() 方法。

```
 queue.create('email', {
     title: 'welcome email for tj'
   , to: 'tj@learnboost.com'
   , template: 'welcome-email'
 }).priority('high').attempts(5).save(); 
```

参考：[失败尝试](https://github.com/Automattic/kue#failure-attempts)

# php - 登录表单未通过身份验证

> ID：14280964
> 
> 赞同：1
> 
> 时间：2013-01-11T15:11:20.693
> 
> 标签：php, html, forms

我为我的网站创建了一个登录表单，但目前它不起作用，我被定向到 invalid.php，这表明我的身份验证失败。

```
 <?php
     session_start();
     include("scripts/dbconnect.php");
     $numrows=0;
     $password=$_POST['password'];
     $email=$_POST['email'];
     $query="select fname,lname,email from mayan_users where (password='$password' && email='$email')";
     $link = mysql_query($query);
     if (!$link) {
      die('login error');
     }
     $numrows=mysql_num_rows($link);
     if ($numrows>0){  // authentication is successfull
      $row = mysql_fetch_array($link, MYSQL_ASSOC);
      $_SESSION['user']['fname']=$row['fname'];
      $_SESSION['user']['lname']=$row['lname'];
      $_SESSION['user']['email']=$row['email'];
      header("location:../index2.php");
     } else {
      header("location:../invalid.php");  // authentication was unsuccessfull
     }
    ?> 
```

这是我的登录表格

```
<div id="Loginform" style="background-color:fuchsia; width:100%">

<span id="logspan">
     <input type="email" name="email" id="email" placeholder="Email" required />
     <input type="password" name="password" id="password" placeholder="Password" required/>
     <input type="button" name="submit" style="cursor:pointer" id="submit" value="Log In" onclick="logMeIn()" />
    </span>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:13:48.570

如果您不通过其他方法提交登录名，则可能需要将其包装在表单标签中。

> ```
> <form method="post" action="">
>      <span id="logspan">
>          <input type="email" name="email" id="email" placeholder="Email" required />
>          <input type="password" name="password" id="password" placeholder="Password" required/>
>          <input type="button" name="submit" style="cursor:pointer" id="submit" value="Log In" onclick="logMeIn()" />
>      </span>
> </form> 
> ```

如果您的 PHP 在另一个文档中，则将操作设置为表单处理器

```
action="form-processor.php" 
```

（谢谢njk！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:13:12.593

您没有表单标签。像这样添加它们

```
<form method="POST" action="">
<!-- INSERT INPUTS HERE -->
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:14:37.957

试试这个：

```
<form id="Loginform" style="background-color:fuchsia; width:100%">

<span id="logspan">
     <input type="email" name="email" id="email" placeholder="Email" required />
     <input type="password" name="password" id="password" placeholder="Password" required/>
     <input type="button" name="submit" style="cursor:pointer" id="submit" value="Log In" onclick="logMeIn()" />
    </span>

</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T15:29:25.697

首先，如果您的 PHP 版本支持，我建议您使用 PDO。
然后我想你的javascript函数以正确的方式发送参数。
最后，您可以避免检查行数。简单地

```
if($row = mysql_fetch_array($link))
{
  ...
}
else
{
  header("location: ../invalid.php");
  exit; //It's a good practice
} 
```

# git - 是否有可能让 git 忽略损坏的 blob

> ID：14280984
> 
> 赞同：4
> 
> 时间：2013-01-11T15:12:22.267
> 
> 标签：git

我有一个损坏的 blob 对象，可以在这里看到

```
> git fsck --full
错误：无法解压 5426a4097ea6a3597a1674b0b7fa67f395006f2a 标头
错误：inflateEnd：流一致性错误（无消息）
致命：松散对象 5426a4097ea6a3597a1674b0b7fa67f395006f2a（存储在 .git/obj 中
ects/54/26a4097ea6a3597a1674b0b7fa67f395006f2a) 已损坏

```

git cat-file -t 542... 也有同样的错误无法解压头

我检查了其他机器，并且都有损坏的版本。

我完成了这个过程 - [http://www.kernel.org/pub/software/scm/git/docs/v1.7.10.1/howto/recover-corrupted-blob-object.txt](http://www.kernel.org/pub/software/scm/git/docs/v1.7.10.1/howto/recover-corrupted-blob-object.txt)并将其缩小到特定的文件（Site.css）和日期范围（之前和之后的提交），但我无法重建更改以恢复文件，因为它是很长时间所做的一组相当大的更改的一部分ago：很久以前，我真的不在乎那段历史。

因为我现在有了之前和之后提交的哈希值，我可以做些什么来忘记那一点历史 - 有点像变基（尽管我想变基会失败 - 还没有尝试过！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:05:54.353

看看[`git-replace`手册页](http://git-scm.com/docs/git-replace)。替换机制允许您放入具有不同散列的新 blob 来替代旧散列。这可能对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T17:30:01.997

这就是我要做的。可能有更优雅的解决方案，但对于那些能让你到达你需要的地方的东西，这会成功。

你需要什么：

*   紧接在引入 duff blob 之前的提交的 SHA1 `<LastGoodCommit>`，.
*   包含 duff blob 的提交的 SHA1 `<BadCommit>`，.

你需要做什么：

1.  获取包含 duff 提交的所有分支和标签的列表，并保存这些：

    ```
    git branch --contains <BadCommit> >branches.txt
    git tag --contains <BadCommit> >tags.txt 
    ```

2.  查看好的提交：

    ```
    git checkout <LastGoodCommit> 
    ```

3.  创建一个新的提交，它将替换包含坏 blob 的提交。

    您可能可以使用`git cherry-pick -n <BadCommit>`来获取更改，也可能不会。我无法对其进行测试，因此您需要自己尝试一下，看看会发生什么。如果它不起作用，您应该能够使用`git checkout <BadCommit>:<path>`.

    您需要确定您希望该`site.css`文件在此提交中的样子。我可以看到两个选项：

    *   保持原样`<LastGoodCommit>`

    *   找到下一次你在你的`site.css`一个分支中有一个好的 blob （理想情况：它在所有分支中都是一样的）并使用它。

    无论您做什么，请注意新的提交哈希`<NewGoodCommit>`。

4.  将上面列出的所有`branches.txt`包含错误提交的分支重新设置到这个新提交上。根据您在步骤 3 中选择的选项，您可能会遇到合并冲突；只需使用新版本的文件解决这些问题。

    如果所有分支都具有相同的以下版本`site.css`，您应该可以确信不会发生冲突，并使用以下单行代码进行所有变基：

    ```
    while read branchname; do git rebase --onto <NewGoodCommit> <BadCommit> "$branchname" || echo "Failed rebasing $branchname" && break; done 
    ```

5.  浏览您的标签（在 中`tags.txt`）并为新重新设置的分支上的每个标签创建替换。可悲的是，我不知道一种自动化的方法。

# objective-c - 使用 Obj-C 重命名现有文件

> ID：14280989
> 
> 赞同：7
> 
> 时间：2013-01-11T15:12:39.273
> 
> 标签：objective-c

我已经看到这个问题被问了几次，但到目前为止我无法使用任何帖子解决方案取得成功。我想要做的是重命名应用程序本地存储中的文件（对于 Obj-c 来说也是一种新的）。我能够检索旧路径并创建新路径，但是我必须写什么才能真正更改文件名？

到目前为止，我所拥有的是：

```
- (void) setPDFName:(NSString*)name{
    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                   NSUserDomainMask, YES);
    NSString* initPath = [NSString stringWithFormat:@"%@/%@",[dirPaths objectAtIndex:0], @"newPDF.pdf"];
    NSString *newPath = [[NSString stringWithFormat:@"%@/%@",
                          [initPath stringByDeletingLastPathComponent], name]
                         stringByAppendingPathExtension:[initPath pathExtension]];
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-11T15:15:27.660

```
NSError *error = nil;
[[NSFileManager defaultManager] moveItemAtPath:initPath toPath:newPath error:&error]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-11T15:22:05.183

代码很乱；试试这个：

```
- (BOOL)renameFileFrom:(NSString*)oldName to:(NSString *)newName
{
    NSString *documentDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                   NSUserDomainMask, YES) objectAtIndex:0];
    NSString *oldPath = [documentDir stringByAppendingPathComponent:oldName];
    NSString *newPath = [documentDir stringByAppendingPathComponent:newName];

    NSFileManager *fileMan = [NSFileManager defaultManager];
    NSError *error = nil;
    if (![fileMan moveItemAtPath:oldPath toPath:newPath error:&error])
    {
        NSLog(@"Failed to move '%@' to '%@': %@", oldPath, newPath, [error localizedDescription]);
        return NO;
    }
    return YES;
} 
```

并使用：

```
if (![self renameFileFrom:@"oldName.pdf" to:@"newName.pdf])
{
    // Something went wrong
} 
```

更好的是，将该`renameFileFrom:to:`方法放入实用程序类中并使其成为类方法，以便可以从项目中的任何位置调用它。

# jsf - 在 JSF 中传递参数的动态导航

> ID：14280990
> 
> 赞同：0
> 
> 时间：2013-01-11T15:12:39.333
> 
> 标签：jsf, primefaces, navigation, parameter-passing

我想将以下列表中的“title”参数动态传递给另一个 jsf Facelet，具体取决于 selectOneMenu 的选择。我的第一种方法如下所示：

```
<h:form id="form">

    <p:selectOneMenu value="#{exerciseEditorBean.selectedExerciseType}" >
        <f:selectItem itemLabel="Multiple Choice Exercise" itemValue="MultipleChoiceExercise" />  
        <f:selectItem itemLabel="Vocabulary Test" itemValue="VocabularyTest" />  
    </p:selectOneMenu>

    <h:outputText value="Enter Title of your Exercise: " />  
    <h:inputText id="title" value="#{exerciseEditorBean.exerciseTitle}" />

    <h:commandButton value="Next" action="#{exerciseEditorBean.openEditor()}" />

</h:form> 
```

ExerciseEditorBean 是 ViewScoped。

然后 openEditor() 函数通过 selectedExerciseType 属性决定接下来要显示哪个 Facelet 并返回类似“multipleChoiceEditor.xhtml”的内容。我现在如何将 title 属性传递给这个 Facelet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:49:01.710

我现在在目标 serverlet 中使用 f:ViewParam，它运行良好，除了“multipleChoiceEditor.xhtml?includeViewParams=true”不起作用，但这是另一个问题。感谢您的讨论！

# android - RelativeLayout 参数 AddRule 不能始终如一地工作？

> ID：14280993
> 
> 赞同：1
> 
> 时间：2013-01-11T15:12:40.800
> 
> 标签：android, android-layout, android-relativelayout

我有一个视图，它是 a 的子视图，`RelativeLayout`我正在尝试修改 Java 中的布局参数。我得到`LayoutParams`如下：

```
RelativeLayout.LayoutParams dlp = (LayoutParams) dimBackground.getLayoutParams();

dlp.addRule(RelativeLayout.BELOW, currentTextView.getId());
//dlp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

dimBackground.setLayoutParams(dlp); 
```

该行`dlp.addRule(RelativeLayout.BELOW, currentTextView.getId());`不会更改 的位置`dimBackground`，但如果我取消注释下面的行，则将`dimBackground`与父视图的底部对齐。

知道为什么第一条规则不起作用吗？

**编辑：**

按照建议，我在 xml 中尝试过，但仍然没有运气。下面是我的xml：

```
<RelativeLayout
    android:id="@+id/dim_background_bottom"
    android:layout_width="fill_parent"
    android:layout_height="80dp"
    android:layout_below="@+id/product_subtotal_row"
    android:background="@color/gray_tint"
    android:visibility="visible" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:41:21.007

（因为你没有发布太多关于你的布局的细节......很难给你一个明确的答案）。

我猜你`currentTextView`和你`dimBackground`没有相同的父 relativeLayout。正如[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html) doc中提到的：

> 一种布局，其中子项的位置可以相对于彼此或与父项进行描述。

所以请仔细检查，`currentTextView`并且`dimBackground`都是同一个孩子`RelativeLayout`

# javascript - 具有 jQuery.easing 冲突的菜单和横幅

> ID：14280996
> 
> 赞同：-1
> 
> 时间：2013-01-11T15:12:52.237
> 
> 标签：javascript, jquery

`http://open-pages.com/Alpinemadotcom/`

我认为菜单和幻灯片横幅有冲突。

下面之前`</body>`每个菜单和横幅都有两个脚本，它们使用相同或不同的 jquery 版本。

如果我使用`either`或`both`版本。菜单不能正常工作，或者横幅不能通过点击和淡入淡出或幻灯片（突然的图像变化）工作。

有什么问题？

**乌达--------**

我发现，经过一番尝试和尝试，这`jquery.easing.js`会导致横幅出现问题，如果被排除在外。菜单不起作用。`jquery.easing.compatibility.js`也不解决问题。我怀疑`jquery.min`（实际上`v1.3.2`）也在警告问题。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:18:43.537

如果您尝试使用这两个库，我并不感到惊讶，那只是自找麻烦。

您使用的 Nivo 滑块似乎不喜欢较新版本的 jQuery。不过，您似乎并没有对那个插件做任何特别的事情，所以使用 jQuery 循环插件可能会更好？我在不同的网站上使用了很多它，它有很多很棒的功能，也很容易实现，并且可以与您在菜单上使用的 jQuery 版本一起使用。

# multithreading - 立即调度创建的线程

> ID：14280999
> 
> 赞同：0
> 
> 时间：2013-01-11T15:13:01.530
> 
> 标签：multithreading, operating-system, scheduling

我正在使用 PsCreateSystemThread() 创建线程。但它没有立即安排。如何在创建线程后立即强制执行该线程调度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:48:49.593

调度可以由[KeSetPriorityThread](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553265%28v=vs.85%29.aspx)和/或[KeSetBasePriorityThread 强制](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553246%28v=vs.85%29.aspx)。