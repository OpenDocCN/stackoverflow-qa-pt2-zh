# StackOverflow 问答 14638000-14638999

# php - CodeIgniter：使用 Active Record 插入数组时出错

> ID：14638000
> 
> 赞同：0
> 
> 时间：2013-02-01T00:59:06.220
> 
> 标签：php, mysql, codeigniter

尝试在 CodeIgniter Active reacords 的帮助下插入一个数组。表只有两列`id(autoincrement pk column)`和`value`.

我从 Google Contact API 响应中填充的 $data 数组。在这里，我如何在控制器中填充数组 $data 并将其传递给模型

```
$val = $client->getIo()->authenticatedRequest($req);//Getting response from Google Contact API.
$xml = simplexml_load_string($val->getResponseBody());
$result = $xml->xpath('//gd:email');  //Fetching email addressed from the response
foreach ($result as $title) {
            array_push($gmailContacts, mysql_real_escape_string($title->attributes()->address));
 }
$this->load->model('gmailContacts');
$this->gmailContacts->saveContacts($gmailContacts); 
```

**型号代码是**

```
 function saveGmailContacts($data=array()) 
  {
    $this->db->insert('contact_table',$data);
  } 
```

**错误是**

```
Error Number: 1054

Unknown column '0' in 'field list'

INSERT INTO `importedgmailcontacts` (`0`, `1`, `2`, `3`, `4`, `5`)VALUES ('VALUE1', 'VALUE2', 'VALUE3','VALUE4', 'VALUE5') 
```

我正在将 Codeigniter 与 XAMPP 1.7.7 一起使用，它具有 PHP 5.3.3 和 MySql 5.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:35:23.540

CodeIgniter 假定当您传递这样的数组时，您正在设置具有多列的单行。数组键是列名，值是行中的内容。如果要使用 ActiveRecord 类，则需要多次调用 insert，每行一次。

你可能会更好地为这个滚动你自己的查询。

# android - 在内部设备的 xml 文件中使用 px vs dp

> ID：14638003
> 
> 赞同：0
> 
> 时间：2013-02-01T00:59:17.447
> 
> 标签：android, layout

我很难说服人们我喜欢在我们的内部设备上使用 px 而不是 dp，因为我们没有对不同的手机/平板电脑进行编程。我们有 2 个具有 1280 和 1980 像素宽度的内部设备。我以编程方式找出设备的宽度并设置正确的 xml 文件。

有什么理由我应该为我们使用 dp 而不是 px 吗？

在我看来，使用 px 可以更准确，并且开发时间更短，因为我不必考虑 dp。从技术上讲，Android 将所有 dp 转换为 px，因此它应该更快，但我怀疑它的速度要快得多。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:58:38.567

选择 DP 以获得可扩展性。您很少能确定要求在产品的整个生命周期内都是固定的。为未知做计划。

# jquery - 在不知道父高度的情况下垂直居中子 div

> ID：14638012
> 
> 赞同：0
> 
> 时间：2013-02-01T01:00:10.060
> 
> 标签：jquery, css

我想知道有人知道如何在不知道父 div 高度的情况下将子 div 垂直居中在父 div 内？

我有一个 pinterest 风格的画廊页面（图像），在悬停时，我在图像顶部显示一个 div，其中包含有关图像的信息。知道因为每个图像可能有不同的高度，我不知道如何将子内容居中到父 div 的中间。

我正在使用 jQuery Masonary 插件来创建布局。

目前我有一个包含图像的外部 div。背景颜色为白色（或其他颜色）的内部 div 位于 0,0 位置，宽度和高度为 100%。这一切都很好，我已经能够通过简单地使用 text-align: center; 来水平居中。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:14:47.447

这应该可以将其设置为双向居中。还没测试：

```
var ParentW = $("parent-id").width();
var ParentH = $("parent-id").height();
var ChildW = $("child-id").width();
var ChildH = $("child-id").height();
var PosW = (ParentW - ChildW)/2;
var PosH = (ParentH - ChildH)/3;
$("child-id").css({"top":PosH, "left": PosW }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:54:24.170

如果您需要 CSS 解决方案，我认为这对您有用。

例如，如果您有这样的布局：

```
<div class="container">
    <div class="parent">
        <div class="child">
            Lorem ipsum....
        </div>
   </div>
</div> 
```

使用此 CSS，您应该能够`.child`在容器内水平和垂直居中块`.parent`：

```
.parent {
    /* change values to adjust the top and bottom space used to vertically center */
    padding-top: 33%;
    padding-bottom: 33%;
}

.child {
    width: 50%; /* the width is not mandatory, of course */
    margin: auto;
    overflow: hidden;
} 
```

你可以[在这里](http://jsfiddle.net/ragnarokkr/tgv6Q/)测试它。希望这会有所帮助。

# java - DefaultMessageListenerContainer 不会停止

> ID：14638014
> 
> 赞同：2
> 
> 时间：2013-02-01T01:00:17.717
> 
> 标签：java, spring, jms

我将 Spring JMS 与以下上下文 XML 文件一起使用。

```
<bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory"
      p:brokerURL="tcp://localhost:61616" />

<bean id="pooledConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory" destroy-method="stop"
      p:connectionFactory-ref="connectionFactory" />

<bean id="queue1" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="foo.bar"/>
</bean>

<bean id="listenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer" destroy-method="destroy"
      p:autoStartup="true"
      p:connectionFactory-ref="pooledConnectionFactory"
      p:destination-ref="queue1"
      p:messageListener-ref="listener"
      p:acceptMessagesWhileStopping="false"
      p:sessionTransacted="true" /> 
```

我的应用程序是命令行独立的，并且看起来像这样：

```
public static void main(String[] args) throws JMSException, InterruptedException  {
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("my-context.xml");
    context.registerShutdownHook();

    App app = context.getBean("app", App.class);
    app.start();
} 
```

这里的问题是，当主线程结束时，进程并没有停止。我目前的猜测是侦听器容器没有停止。

这是最后的日志消息：

```
16:54:02,747 DEBUG [main] DefaultListableBeanFactory:246 - Returning cached instance of singleton bean 'app'
16:54:02,747  INFO [main] App:47 - Terminating...
16:54:02,747  INFO [main] App:51 - Terminated.
16:54:02,771 DEBUG [listenerContainer-1] TaskRunnerFactory:91 - Initialized TaskRunnerFactory[ActiveMQ Session Task] using ExecutorService: java.util.concurrent.ThreadPoolExecutor@6c63a721
16:54:03,783 DEBUG [listenerContainer-1] ActiveMQSession:559 - ID:Daniels-MacBook-Pro.local-56179-1359680042616-1:1:1 Transaction Commit :null
16:54:04,784 DEBUG [listenerContainer-1] ActiveMQSession:559 - ID:Daniels-MacBook-Pro.local-56179-1359680042616-1:1:1 Transaction Commit :null
16:54:05,785 DEBUG [listenerContainer-1] ActiveMQSession:559 - ID:Daniels-MacBook-Pro.local-56179-1359680042616-1:1:1 Transaction Commit :null
16:54:06,787 DEBUG [listenerContainer-1] ActiveMQSession:559 - ID:Daniels-MacBook-Pro.local-56179-1359680042616-1:1:1 Transaction Commit :null
16:54:07,788 DEBUG [listenerContainer-1] ActiveMQSession:559 - ID:Daniels-MacBook-Pro.local-56179-1359680042616-1:1:1 Transaction Commit :null
... 
```

仅供参考，我尝试关闭自动启动（通过设置`p:autoStartup="false"`）并在代码中手动启动/停止容器，但是它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:49:37.597

您`stop()`在退出之前屏蔽上下文：

```
public static void main(String[] args) throws JMSException, InterruptedException  {
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("my-    context.xml");
    context.registerShutdownHook();

    App app = context.getBean("app", App.class);
    app.start();

    context.stop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:41:21.390

我通过`context.close()`在最后添加调用解决了这个问题。

```
public static void main(String[] args) {
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("my-context.xml");
    context.registerShutdownHook();

    App app = context.getBean("app", App.class);
    app.start();

    context.close();
} 
```

`context.registerShutdownHook()`如果应用程序在外部关闭（例如`Ctrl+C`） ，我会留下电话。

我做对了吗？

# java - java中的out.write()，如何插入换行符

> ID：14638015
> 
> 赞同：4
> 
> 时间：2013-02-01T01:00:25.447
> 
> 标签：java

在 java 中写入文本文件时，如何在新行中输入值

代码片段

```
while (rs.next()) {
                int sport = rs.getInt("sport");

                String name = rs.getString("name");

                out.write(sport + " : " + name);} 
```

文本文件填充“value1 value2 value3 ...等”我希望它填充

```
value1
value2
value3 
. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T01:13:44.470

*   如果 'out' 是 PrintWriter，则使用 println()。
*   如果 'out' 是 BufferedWriter，则使用 newLine()。
*   如果 'out' 是其他 Writer，请使用 write('\n')，或将 newLine 直接附加到您正在编写的字符串中。如果您需要系统的行分隔符，请参阅 System.getProperty() 的值为“line.separator”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T01:04:44.727

非常简单

`out.write(sport + " : " + name + "\n");`

就这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T04:46:40.730

使用 out.write(10); 添加新行。10 是换行符的 acsii 字符。但它不适用于 Indirect/Direct Buffer 类型的 FileChannel。

# javascript - 使用 Javascript 格式化当前时间

> ID：14638018
> 
> 赞同：121
> 
> 时间：2013-02-01T01:00:42.177
> 
> 标签：javascript, date, time, format

我想用 javascript 以特定格式获取当前时间。

使用下面的函数并调用它会给我 **Fri Feb 01 2013 13:56:40 GMT+1300 (New Zealand Daylight Time)** 但我想将其格式化为 **2013 年 2 月 1 日星期五下午 2:00**

```
var d = new Date();
var x = document.getElementById("time");
x.innerHTML = d; 
```

当然，上面的代码没有任何格式化逻辑，但我还没有遇到任何“工作”格式化程序。

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-02-01T01:05:44.933

你可能想试试

```
var d = new Date();
d.toLocaleString();       // -> "2/1/2013 7:37:08 AM"
d.toLocaleDateString();   // -> "2/1/2013"
d.toLocaleTimeString();  // -> "7:38:05 AM" 
```

[文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString)

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2013-02-01T01:18:34.827

JavaScript Date 有几种方法允许您提取其部分：

`getFullYear()`- 返回 4 位数年份
`getMonth()`- 返回一个从零开始的整数 (0-11)，表示一年中的月份。
`getDate()`- 返回月份中的第几天 (1-31)。
`getDay()`- 返回星期几 (0-6)。0 是星期日，6 是星期六。
`getHours()`- 返回一天中的小时 (0-23)。
`getMinutes()`- 返回分钟 (0-59)。
`getSeconds()`- 返回第二个 (0-59)。
`getMilliseconds()`- 返回毫秒 (0-999)。
`getTimezoneOffset()`- 返回机器本地时间和 UTC 之间的分钟数。

没有内置方法可让您获取本地化字符串，如“Friday”、“February”或“PM”。你必须自己编写代码。要获得您想要的字符串，您至少需要存储日期和月份的字符串表示形式：

```
var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; 
```

然后，使用上述方法将其放在一起：

```
var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
var d = new Date();
var day = days[d.getDay()];
var hr = d.getHours();
var min = d.getMinutes();
if (min < 10) {
    min = "0" + min;
}
var ampm = "am";
if( hr > 12 ) {
    hr -= 12;
    ampm = "pm";
}
var date = d.getDate();
var month = months[d.getMonth()];
var year = d.getFullYear();
var x = document.getElementById("time");
x.innerHTML = day + " " + hr + ":" + min + ampm + " " + date + " " + month + " " + year;
```

```
<span id="time"></span>
```

我有一个我喜欢包含在我的标准库中的日期格式函数。它采用定义所需输出的格式字符串参数。格式字符串*松散地*基于[.Net 自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。对于您指定的格式，可以使用以下格式字符串： `"dddd h:mmtt d MMM yyyy"`.

```
var d = new Date();
var x = document.getElementById("time");
x.innerHTML = formatDate(d, "dddd h:mmtt d MMM yyyy"); 
```

**演示：** [jsfiddle.net/BNkkB/1](http://jsfiddle.net/BNkkB/1/)

这是我的完整日期格式化功能：

```
function formatDate(date, format, utc) {
    var MMMM = ["\x00", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var MMM = ["\x01", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var dddd = ["\x02", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    var ddd = ["\x03", "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

    function ii(i, len) {
        var s = i + "";
        len = len || 2;
        while (s.length < len) s = "0" + s;
        return s;
    }

    var y = utc ? date.getUTCFullYear() : date.getFullYear();
    format = format.replace(/(^|[^\\])yyyy+/g, "$1" + y);
    format = format.replace(/(^|[^\\])yy/g, "$1" + y.toString().substr(2, 2));
    format = format.replace(/(^|[^\\])y/g, "$1" + y);

    var M = (utc ? date.getUTCMonth() : date.getMonth()) + 1;
    format = format.replace(/(^|[^\\])MMMM+/g, "$1" + MMMM[0]);
    format = format.replace(/(^|[^\\])MMM/g, "$1" + MMM[0]);
    format = format.replace(/(^|[^\\])MM/g, "$1" + ii(M));
    format = format.replace(/(^|[^\\])M/g, "$1" + M);

    var d = utc ? date.getUTCDate() : date.getDate();
    format = format.replace(/(^|[^\\])dddd+/g, "$1" + dddd[0]);
    format = format.replace(/(^|[^\\])ddd/g, "$1" + ddd[0]);
    format = format.replace(/(^|[^\\])dd/g, "$1" + ii(d));
    format = format.replace(/(^|[^\\])d/g, "$1" + d);

    var H = utc ? date.getUTCHours() : date.getHours();
    format = format.replace(/(^|[^\\])HH+/g, "$1" + ii(H));
    format = format.replace(/(^|[^\\])H/g, "$1" + H);

    var h = H > 12 ? H - 12 : H == 0 ? 12 : H;
    format = format.replace(/(^|[^\\])hh+/g, "$1" + ii(h));
    format = format.replace(/(^|[^\\])h/g, "$1" + h);

    var m = utc ? date.getUTCMinutes() : date.getMinutes();
    format = format.replace(/(^|[^\\])mm+/g, "$1" + ii(m));
    format = format.replace(/(^|[^\\])m/g, "$1" + m);

    var s = utc ? date.getUTCSeconds() : date.getSeconds();
    format = format.replace(/(^|[^\\])ss+/g, "$1" + ii(s));
    format = format.replace(/(^|[^\\])s/g, "$1" + s);

    var f = utc ? date.getUTCMilliseconds() : date.getMilliseconds();
    format = format.replace(/(^|[^\\])fff+/g, "$1" + ii(f, 3));
    f = Math.round(f / 10);
    format = format.replace(/(^|[^\\])ff/g, "$1" + ii(f));
    f = Math.round(f / 10);
    format = format.replace(/(^|[^\\])f/g, "$1" + f);

    var T = H < 12 ? "AM" : "PM";
    format = format.replace(/(^|[^\\])TT+/g, "$1" + T);
    format = format.replace(/(^|[^\\])T/g, "$1" + T.charAt(0));

    var t = T.toLowerCase();
    format = format.replace(/(^|[^\\])tt+/g, "$1" + t);
    format = format.replace(/(^|[^\\])t/g, "$1" + t.charAt(0));

    var tz = -date.getTimezoneOffset();
    var K = utc || !tz ? "Z" : tz > 0 ? "+" : "-";
    if (!utc) {
        tz = Math.abs(tz);
        var tzHrs = Math.floor(tz / 60);
        var tzMin = tz % 60;
        K += ii(tzHrs) + ":" + ii(tzMin);
    }
    format = format.replace(/(^|[^\\])K/g, "$1" + K);

    var day = (utc ? date.getUTCDay() : date.getDay()) + 1;
    format = format.replace(new RegExp(dddd[0], "g"), dddd[day]);
    format = format.replace(new RegExp(ddd[0], "g"), ddd[day]);

    format = format.replace(new RegExp(MMMM[0], "g"), MMMM[M]);
    format = format.replace(new RegExp(MMM[0], "g"), MMM[M]);

    format = format.replace(/\\(.)/g, "$1");

    return format;
}; 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-10-25T14:51:36.283

**2017 更新**：使用**toLocaleDateString**和**toLocaleTimeString**来格式化日期和时间。传递给这些方法的第一个参数是语言环境值，例如**en-us**。第二个参数（如果存在）指定格式选项，例如工作日的长格式。

```
let date = new Date();  
let options = {  
    weekday: "long", year: "numeric", month: "short",  
    day: "numeric", hour: "2-digit", minute: "2-digit"  
};  

console.log(date.toLocaleTimeString("en-us", options)); 
```

> 输出：2017 年 10 月 25 日，星期三，晚上 8:19

请参阅以下链接了解更多详情。

[日期和时间字符串 (JavaScript)](https://docs.microsoft.com/en-us/scripting/javascript/date-and-time-strings-javascript)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-09-15T08:44:22.480

您可以使用我的[strftime](http://man7.org/linux/man-pages/man3/strftime.3.html)端口：

```
/* Port of strftime(). Compatibility notes:
 *
 * %c - formatted string is slightly different
 * %D - not implemented (use "%m/%d/%y" or "%d/%m/%y")
 * %e - space is not added
 * %E - not implemented
 * %h - not implemented (use "%b")
 * %k - space is not added
 * %n - not implemented (use "\n")
 * %O - not implemented
 * %r - not implemented (use "%I:%M:%S %p")
 * %R - not implemented (use "%H:%M")
 * %t - not implemented (use "\t")
 * %T - not implemented (use "%H:%M:%S")
 * %U - not implemented
 * %W - not implemented
 * %+ - not implemented
 * %% - not implemented (use "%")
 *
 * strftime() reference:
 * http://man7.org/linux/man-pages/man3/strftime.3.html
 *
 * Day of year (%j) code based on Joe Orost's answer:
 * http://stackoverflow.com/questions/8619879/javascript-calculate-the-day-of-the-year-1-366
 *
 * Week number (%V) code based on Taco van den Broek's prototype:
 * http://techblog.procurios.nl/k/news/view/33796/14863/calculate-iso-8601-week-and-year-in-javascript.html
 */
function strftime(sFormat, date) {
  if (!(date instanceof Date)) date = new Date();
  var nDay = date.getDay(),
    nDate = date.getDate(),
    nMonth = date.getMonth(),
    nYear = date.getFullYear(),
    nHour = date.getHours(),
    aDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
    aMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
    aDayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],
    isLeapYear = function() {
      if ((nYear&3)!==0) return false;
      return nYear%100!==0 || nYear%400===0;
    },
    getThursday = function() {
      var target = new Date(date);
      target.setDate(nDate - ((nDay+6)%7) + 3);
      return target;
    },
    zeroPad = function(nNum, nPad) {
      return ('' + (Math.pow(10, nPad) + nNum)).slice(1);
    };
  return sFormat.replace(/%[a-z]/gi, function(sMatch) {
    return {
      '%a': aDays[nDay].slice(0,3),
      '%A': aDays[nDay],
      '%b': aMonths[nMonth].slice(0,3),
      '%B': aMonths[nMonth],
      '%c': date.toUTCString(),
      '%C': Math.floor(nYear/100),
      '%d': zeroPad(nDate, 2),
      '%e': nDate,
      '%F': date.toISOString().slice(0,10),
      '%G': getThursday().getFullYear(),
      '%g': ('' + getThursday().getFullYear()).slice(2),
      '%H': zeroPad(nHour, 2),
      '%I': zeroPad((nHour+11)%12 + 1, 2),
      '%j': zeroPad(aDayCount[nMonth] + nDate + ((nMonth>1 && isLeapYear()) ? 1 : 0), 3),
      '%k': '' + nHour,
      '%l': (nHour+11)%12 + 1,
      '%m': zeroPad(nMonth + 1, 2),
      '%M': zeroPad(date.getMinutes(), 2),
      '%p': (nHour<12) ? 'AM' : 'PM',
      '%P': (nHour<12) ? 'am' : 'pm',
      '%s': Math.round(date.getTime()/1000),
      '%S': zeroPad(date.getSeconds(), 2),
      '%u': nDay || 7,
      '%V': (function() {
              var target = getThursday(),
                n1stThu = target.valueOf();
              target.setMonth(0, 1);
              var nJan1 = target.getDay();
              if (nJan1!==4) target.setMonth(0, 1 + ((4-nJan1)+7)%7);
              return zeroPad(1 + Math.ceil((n1stThu-target)/604800000), 2);
            })(),
      '%w': '' + nDay,
      '%x': date.toLocaleDateString(),
      '%X': date.toLocaleTimeString(),
      '%y': ('' + nYear).slice(2),
      '%Y': nYear,
      '%z': date.toTimeString().replace(/.+GMT([+-]\d+).+/, '$1'),
      '%Z': date.toTimeString().replace(/.+\((.+?)\)$/, '$1')
    }[sMatch] || sMatch;
  });
} 
```

**示例用法：**

```
// Returns "Thursday 4:45pm 15 Sep 2016"
strftime('%A %l:%M%P %e %b %Y');

// You can optionally pass it a Date object
// Returns "Friday 2:00pm 1 Feb 2013"
strftime('%A %l:%M%P %e %b %Y', new Date('Feb 1, 2013 2:00 PM')); 
```

最新代码可在此处获得：[https ://github.com/thdoan/strftime](https://github.com/thdoan/strftime)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-01T01:04:04.333

查看 Date 类的内部结构，您会发现可以提取所有位（日期、月份、年份、小时等）。

[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

对于类似`Fri 23:00 1 Feb 2013`代码的东西是这样的：

```
date = new Date();

weekdayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var dateString = weekdayNames[date.getDay()] + " " 
    + date.getHours() + ":" + ("00" + date.getMinutes()).slice(-2) + " " 
    + date.getDate() + " " + monthNames[date.getMonth()] + " " + date.getFullYear();

console.log(dateString);
```

**** 于 2019-05-29 修改，以保持 3 名反对者满意

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-12-17T17:04:54.790

有很多很棒的图书馆，对于那些感兴趣的人

*   [http://www.datejs.com/](http://www.datejs.com/)
*   [http://momentjs.com/](http://momentjs.com/)
*   [https://github.com/samsonjs/strftime](https://github.com/samsonjs/strftime)

这些天真的不需要发明自己的格式说明符。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-12-09T16:32:39.757

## 使用[时刻](https://momentjs.com/)。

我不能足够推荐使用[Moment](https://momentjs.com/)。如果您能够使用第三方库，我强烈建议您这样做。除了格式化之外，它还可以非常好地处理时区、解析、持续时间和时间旅行，并将在简单性和时间上带来好处（以较小的大小、抽象和性能为代价）。

### 用法

你想要看起来像这样的东西：

> 2013 年 2 月 1 日星期五下午 2:00

好吧，有了 Moment，您需要做的就是：

```
import Moment from "moment";

Moment().format( "dddd h:mma D MMM YYYY" ); //=> "Wednesday 9:20am 9 Dec 2020" 
```

如果您想匹配确切的日期和时间，您需要做的就是：

```
import Moment from "moment";

Moment( "2013-2-1 14:00:00" ).format( "dddd h:mma D MMM YYYY" ) ); //=> "Friday 2:00pm 1 Feb 2013" 
```

[在这里](https://momentjs.com/docs/#/displaying/)可以找到无数其他格式选项。

### 安装

转到他们的[主页](https://momentjs.com/)以查看更详细的说明，但如果您使用的是 npm 或 yarn，则非常简单：

```
npm install moment --save 
```

*或者*

```
yarn add moment 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-23T21:47:58.373

```
d = Date.now();
d = new Date(d);
d = (d.getMonth()+1)+'/'+d.getDate()+'/'+d.getFullYear()+' '+(d.getHours() > 12 ? d.getHours() - 12 : d.getHours())+':'+d.getMinutes()+' '+(d.getHours() >= 12 ? "PM" : "AM");

console.log(d);
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-14T14:06:24.430

对于这种真正的 mysql 风格，请使用以下函数：`2019/02/28 15:33:12`

*   如果您单击
*   下方的“运行代码片段”按钮
*   它将向您展示一个简单的实时数字时钟示例 该演示将出现在代码片段下方。

```
function getDateTime() {
        var now     = new Date(); 
        var year    = now.getFullYear();
        var month   = now.getMonth()+1; 
        var day     = now.getDate();
        var hour    = now.getHours();
        var minute  = now.getMinutes();
        var second  = now.getSeconds(); 
        if(month.toString().length == 1) {
             month = '0'+month;
        }
        if(day.toString().length == 1) {
             day = '0'+day;
        }   
        if(hour.toString().length == 1) {
             hour = '0'+hour;
        }
        if(minute.toString().length == 1) {
             minute = '0'+minute;
        }
        if(second.toString().length == 1) {
             second = '0'+second;
        }   
        var dateTime = year+'/'+month+'/'+day+' '+hour+':'+minute+':'+second;   
         return dateTime;
    }

    // example usage: realtime clock
    setInterval(function(){
        currentTime = getDateTime();
        document.getElementById("digital-clock").innerHTML = currentTime;
    }, 1000);
```

```
<div id="digital-clock"></div>
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-08-28T22:06:35.573

只有时间

```
const getTime = ()=>{
    const d = new Date();
    const dd = [d.getHours(), d.getMinutes(), d.getSeconds()].map((a)=>(a < 10 ? '0' + a : a));
    return dd.join(':');
}; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-03T22:52:35.277

2.39KB 缩小。一份文件。[https://github.com/rhroyston/clock-js](https://github.com/rhroyston/clock-js)

当前时间是

```
var str = clock.month;
var m = str.charAt(0).toUpperCase() + str.slice(1,3); //gets you abbreviated month
clock.weekday + ' ' + clock.time + ' ' + clock.day + ' ' + m + ' ' + clock.year; //"tuesday 5:50 PM 3 May 2016" 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-03T11:51:33.553

```
function formatTime(date){

  d = new Date(date);
  var h=d.getHours(),m=d.getMinutes(),l="AM";
  if(h > 12){
    h = h - 12;
  }
  if(h < 10){
    h = '0'+h;
  }
  if(m < 10){
    m = '0'+m;
  }
  if(d.getHours() >= 12){
    l="PM"
  }else{
    l="AM"
  }

  return h+':'+m+' '+l;

} 
```

用法和结果：

```
var formattedTime=formatTime(new Date('2020 15:00'));
// Output: "03:00 PM" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-01T01:11:02.683

要使用基础 Date 类，您可以查看[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)的方法（由于[这个原因](http://w3fools.com/)，而不是 W3Schools ）。在那里，您可以找到有关用于访问每个日期/时间组件的每种方法的良好描述，以及与方法是否被弃用相关的信息。

否则，您可以查看[Moment.js](http://momentjs.com/)，它是一个用于日期和时间处理的好库。您可以使用它来操作日期和时间（例如解析、格式化、i18n 等）。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2017-03-23T11:43:32.927

```
function startTime() {
    var today = new Date(),
        h = checkTime(((today.getHours() + 11) % 12 + 1)),
        m = checkTime(today.getMinutes()),
        s = checkTime(today.getSeconds());
    document.getElementById('demo').innerHTML = h + ":" + m + ":" + s;
    t = setTimeout(function () {
        startTime()
    }, 500);
}
startTime(); 
```

})();

05:12:00

* * *

## 回答 #15

> 赞同：-10
> 
> 时间：2019-09-27T09:23:09.123

```
let date = new Date();
let time = date.format("hh:ss")
```

# c - strftime 和 struct tm 中的两位数日期

> ID：14638019
> 
> 赞同：1
> 
> 时间：2013-02-01T01:00:54.397
> 
> 标签：c, struct, strftime

我正在执行以下操作以获取“日月日年”格式的时间。

```
struct tm *example= localtime(&t);
strftime(buf,sizeof(buf),"%a %b %d %Y",example);
strncpy(time_buffer,buffer,sizeof(time_buffer))   ; 
```

但是，如果日期是个位数，例如 9，则显示为 9。我想将其打印为 09。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:04:39.767

strftime 的联机帮助页说：

```
%d     The day of the month as a decimal number (range 01 to 31). 
```

这似乎是你想要的。

```
// compile with: gcc -o ex1 -Wall ex1.c
#include "stdio.h"
#include "sys/time.h"
#include "time.h"

int main (const int argc, const char ** argv ) {
  time_t curr_time;
  char buff[1024];
  // time(&curr_time);
  curr_time = 1359684105; // Thu Jan 31 2013
  struct tm *now = localtime(&curr_time);
  strftime(buff, sizeof(buff),  "%a %b %d %Y", now);
  printf("time: %ld\n", curr_time);
  printf("time: %s\n", buff);

  curr_time += 24 * 60 * 60; // Fri Feb 01 2013
  now = localtime(&curr_time);
  strftime(buff, sizeof(buff),  "%a %b %d %Y", now);
  printf("time: %ld\n", curr_time);
  printf("time: %s\n", buff);
  return 0;
} 
```

这会产生：

```
time: 1359684105
time: Thu Jan 31 2013
time: 1359770505
time: Fri Feb 01 2013 
```

这看起来像你所追求的。如果要删除前导零，可以使用 %e：

```
 %e     Like %d, the day of the month as a decimal number, but a leading zero is replaced by a space. (SU) 
```

作者报告说 %d 不遵守 solaris 上的联机帮助页，这是直接使用 sprintf 的替代解决方案：

```
// compile with: gcc -o ex1 -Wall ex1.c
#include "stdio.h"
#include "sys/time.h"
#include "time.h"

int main (const int argc, const char ** argv ) {
  time_t curr_time;
  char buff[1024], daynamebuff[8], monbuff[8], daynumbuff[3], yearbuff[8];

  // time(&curr_time);
  curr_time = 1359684105; // Thu Jan 31 2013
  curr_time += 24 * 60 * 60; // Fri Feb 01 2013
  struct tm *now = localtime(&curr_time);

  strftime(daynamebuff, sizeof(daynamebuff), "%a", now);
  strftime(monbuff,     sizeof(monbuff), "%b", now);
  strftime(daynumbuff,  sizeof(daynumbuff), "%e", now);
  strftime(yearbuff,    sizeof(yearbuff), "%Y", now);

  sprintf(buff, "%s %s %02d %s", daynamebuff, monbuff, now->tm_mday, yearbuff);
  printf("%s\n", buff);
  return 0;
} 
```

# sql - 如何在 Heroku 上将 intarray 扩展添加到 PostgreSQL

> ID：14638021
> 
> 赞同：2
> 
> 时间：2013-02-01T01:01:08.053
> 
> 标签：sql, ruby, postgresql, heroku

我拥有的应用程序正在使用`intarray`PostgreSQL 的扩展。

[不幸的是，根据文档](https://devcenter.heroku.com/articles/heroku-postgres-extensions-postgis-full-text-search)和命令行，它似乎不可用：

```
> echo 'show extwlist.extensions' | heroku pg:psql
                                                                                extwlist.extensions                                                                                 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 btree_gist,chkpass,cube,dblink,dict_int,dict_xsyn,earthdistance,fuzzystrmatch,hstore,isn,ltree,pg_trgm,pgcrypto,pgrowlocks,pgstattuple,plpgsql,unaccent,uuid-ossp,citext,tablefunc
(1 row) 
```

还：

```
> heroku pg:psql
psql (9.1.5, server 9.1.6)
SSL connection
Type "help" for help.

=> CREATE EXTENSION intarray;
WARNING:  extension "intarray" is not whitelisted
CREATE EXTENSION 
```

那么这是否意味着我**不能使用 Heroku**或者有一种方法可以添加`intarray`扩展（`idx`例如使用函数）。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T04:42:18.500

我得到的 Postgres 社区的普遍共识是`intarray`，仅仅使用它就已经过时了`int[]`，它只是为了向后兼容非常旧的应用程序而保留下来。这就是为什么我们没有添加对它的支持。

到目前为止，要求它的每个人实际上都更满意`int[]`，只是没有找到它。是否有一些用例您实际上想要一个`intarray`列？我们可以打开它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-27T22:36:09.367

`intarray`[自 2014 年 3 月以来](https://devcenter.heroku.com/changelog-items/435)已在 Heroku 上列入白名单，因此您应该能够直接启用该扩展。如果您在此之前配置了您的数据库，您首先需要[升级您的数据库](https://devcenter.heroku.com/articles/upgrading-heroku-postgres-databases)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T00:16:00.053

必须回答我自己的问题只是为了提供更多细节。

`intarray`用于从包含字符串的列中提取路径信息，例如`123/312/56/9863`. 这首先存储为（很差）作为字符串而不是数组。

我们需要的原因`intarray`是因为我们有这个`idx`功能。

发生的事情是这样的：

*   将字符串转换为数组
*   使用`idx`
*   按顺序返回下一个数字。

所有这些都是临时措施。但是由于 heroku 不支持`idx`使用它的唯一方法是添加[自定义函数](http://wiki.postgresql.org/wiki/Array_Index)。但相反，我们将查询和数据结构转换为使用`ltree`及其`index`功能。

除了不需要依赖`idx`（但引入了另一个依赖`ltree`）之外，我们还将查询的性能提高了 x200 倍。

# c# - 将包含图像的流保存到 Windows Phone 8 上的本地文件夹

> ID：14638029
> 
> 赞同：8
> 
> 时间：2013-02-01T01:01:49.217
> 
> 标签：c#, windows-runtime, windows-phone-8, windows-phone

我目前正在尝试将包含我从相机返回的 jpeg 图像的流保存到本地存储文件夹。正在创建文件，但不幸的是根本不包含任何数据。这是我尝试使用的代码：

```
public async Task SaveToLocalFolderAsync(Stream file, string fileName)
{
  StorageFolder localFolder = ApplicationData.Current.LocalFolder;
  StorageFile storageFile = await localFolder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);

  using (IRandomAccessStream fileStream = await storageFile.OpenAsync(FileAccessMode.ReadWrite))
  {
    using (IOutputStream outputStream = fileStream.GetOutputStreamAt(0))
    {
      using (DataWriter dataWriter = new DataWriter(outputStream))
      {
        dataWriter.WriteBytes(UsefulOperations.StreamToBytes(file));
        await dataWriter.StoreAsync();
        dataWriter.DetachStream();
      }
      await outputStream.FlushAsync();
    }
  }
}

public static class UsefulOperations
{
  public static byte[] StreamToBytes(Stream input)
  {
    using (MemoryStream ms = new MemoryStream())
    {
      input.CopyTo(ms);
      return ms.ToArray();
    }
  } 
} 
```

任何以这种方式保存文件的帮助将不胜感激 - 我在网上找到的所有帮助都是指保存文本。我正在使用 Windows.Storage 命名空间，因此它也应该适用于 Windows 8。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T06:09:10.373

你的方法`SaveToLocalFolderAsync`工作得很好。我在我传入的一个上试了一下`Stream`，它按预期复制了它的完整内容。

我想这是您传递给该方法的流状态的问题。也许您只需要预先将其位置设置为开头`file.Seek(0, SeekOrigin.Begin);`。如果这不起作用，请将该代码添加到您的问题中，以便我们为您提供帮助。

此外，您可以使您的代码更简单。如果没有中间类，以下内容完全相同：

```
public async Task SaveToLocalFolderAsync(Stream file, string fileName)
{
    StorageFolder localFolder = ApplicationData.Current.LocalFolder;
    StorageFile storageFile = await localFolder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);
    using (Stream outputStream = await storageFile.OpenStreamForWriteAsync())
    {
        await file.CopyToAsync(outputStream);
    }
} 
```

# visual-studio - 如何在 VS.NET 2010 中安装 Microsoft.Office.Interop 引用？

> ID：14638030
> 
> 赞同：0
> 
> 时间：2013-02-01T01:01:57.180
> 
> 标签：visual-studio

我试图使用 Microsoft.Office.Interop 库创建一个 Windows 窗体，但我找不到它们。我尝试仅遵循指南并安装了 Microsoft Office 2010：Primary Interop Assemblies Redistributable，但引用未显示在 COM 选项卡中。我关闭了 VS.NET，重新启动了我的计算机，但它们仍然没有显示。

我正在使用带有 .NET Framework 4.0.3 的 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:20:59.413

PIA 只是一个互操作层，您需要安装 Office 才能看到 COM 引用。如果您引用 COM 类型库，并且正确安装了相应的 PIA，则您的引用将被 PIA 替换。您还可以通过浏览到其文件夹并添加引用来直接引用 PIA，但除非您安装了 Office，否则 PIA 将无法正常工作。

# c# - 在 MVC 剃刀视图中迭代树节点？

> ID：14638031
> 
> 赞同：3
> 
> 时间：2013-02-01T01:02:10.567
> 
> 标签：c#, asp.net-mvc-4, tree

有没有办法对循环有向图的节点进行编码？

我对 ASP.NET MVC 有点陌生，我所处的模式是尝试使用包含的逻辑片段在视图模型中呈现数据。

也就是说，如果没有非递归方式来做到这一点，那么递归“MVC 风格”的最佳方式是什么？

这是我到目前为止所得到的。

**模型：**

```
namespace AaronWeb.Models
{
    public class Node
    {
        public Node()
        {
            Nodes = new List<Node>();
            Data = string.Empty;
        }

        public ICollection<Node> Nodes { get; set; }

        public string Data { get; set; }

        public override string ToString()
        {
            if (Data != null)
            {
                return Data.ToString();
            }
            else
            {
                return string.Empty;
            }
        }
    }
} 
```

**看法**

```
@model AaronWeb.Models.Node

@{
    var q = new Queue<AaronWeb.Models.Node>();
    q.Enqueue(Model);
}
<h1>Graph Partial View</h1>

@while (q.Count > 0)
{
    var node = q.Dequeue();
    <ul>
        <li>@node.ToString()
            @if (node.Nodes.Count > 0)
            {
                <ul>
                    @foreach (var child in node.Nodes)
                    {
                        <li>
                            @child.ToString()
                        </li>
                        q.Enqueue(child);
                    }
                </ul>
            }
        </li>
    </ul>
} 
```

**动作方法**

```
public ActionResult Graph()
{
    var model = new Node
    {
        Data = "Foo",
        Nodes = new[] {
             new Node
             {
                 Data = "Bar",
                 Nodes = new [] {
                     new Node
                     {
                         Data = "Bing"
                     },
                     new Node
                     {
                         Data = "Bang"
                     }
                 }
             },
             new Node
             {
                 Data = "Bat"
             },
         },
    };
    return View(model);
} 
```

**结果（错误）**

![在此处输入图像描述](../Images/f51423c02793883cdef683e78d5daf59.png)

```
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Graph</title>
</head>
<body>
    <div>

<h1>Graph Partial View</h1>

    <ul>
        <li>Foo
                <ul>
                        <li>
                            Bar
                        </li>
                        <li>
                            Bat
                        </li>
                </ul>
        </li>
    </ul>
    <ul>
        <li>Bar
                <ul>
                        <li>
                            Bing
                        </li>
                        <li>
                            Bang
                        </li>
                </ul>
        </li>
    </ul>
    <ul>
        <li>Bat
        </li>
    </ul>
    <ul>
        <li>Bing
        </li>
    </ul>
    <ul>
        <li>Bang
        </li>
    </ul>

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T01:46:22.683

我自己想通了。

关键是要意识到我可以递归地调用部分视图！

```
@model AaronWeb.Models.Node
<ul>
    <li>@Model.ToString()
        @foreach (var child in Model.Nodes)
        {
            Html.RenderPartial("_GraphPartial", child);
        }
    </li>
</ul> 
```

# prolog - 如何在 SWI-Prolog 中保存所有可能的解决方案？

> ID：14638034
> 
> 赞同：0
> 
> 时间：2013-02-01T01:02:18.803
> 
> 标签：prolog

我有这个谓词，它有大约一千种可能性，我需要所有可能性作为输出。不可能在 Windows 上的 SWI-Prolog 中简单地复制和粘贴所有列出的可能性，因为您只能向上滚动这么多。

我的谓词如下所示：

```
?- question(X,Y,Z).
X = 'Fo',
Y = 'Ob',
Z = 'Ar' ;
X = 'Fo2',
etc... 
```

我想知道是否有办法将结果保存在文件或其他东西中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:10:45.887

使用 findall/3：

```
findall([X,Y,Z],question(X,Y,Z),R). 
```

R 应绑定到所有 [X,Y,Z] 的列表，以便 question(X,Y,Z) 成功。

有关更多信息，请参阅：[Findall 上的文档](http://en.wikibooks.org/wiki/Prolog/Bagof,_Setof_and_Findall)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:23:17.863

你可以使用这样的东西：

```
main :-
    tell('output.txt'),
    (
        question(X,Y,Z),
        writeln([X, Y, Z]),
        fail
    ;
        told
    ). 
```

或者，您可以`( question(X,Y,Z), writeln([X, Y, Z]), fail ; true ).`在 Prolog 中运行查询并在标准输出（屏幕）中获取所有解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:07:28.627

SWI-Prolog 提供了一种方法来保存 REPL（读取、评估、打印、循环）控制台上进行的交互：请参阅内置[协议](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.37%27,swi%28%27/doc/Manual/protocol.html%27%29%29)。这种方式变量名称被保留。请注意，输出可能难以处理，长变量将被省略号替换（您可以更改此设置，请参阅[这些答案](https://stackoverflow.com/questions/10252431/using-swi-prolog-interactively-output-taken-off)）。

否则，[forall](http://www.swi-prolog.org/pldoc/doc_for?object=forall/2) /2 可能是一个可行的选择

```
?- open('a.txt',write,S), forall(member(X,[martin,carlo]), format(S,'~q~n',[X])), close(S). 
```

# php - 如何在 php 中编写多页面系统

> ID：14638037
> 
> 赞同：-2
> 
> 时间：2013-02-01T01:02:37.727
> 
> 标签：php, sql

我有 PHP 脚本，我编写了主题系统
，我想在一页中显示每 10 个主题，怎么做？
sql表：

```
ID
L_TITLE
L_URL
L_COMMENTS
L_VIEWS
L_STATE 
```

php代码：

```
$sql = mysql_query("SELECT * FROM LESSONS WHERE L_STATE='0' ORDER BY ID DESC") or die($sql_error);
if(mysql_num_rows($sql) > 0){
    while($rs = mysql_fetch_assoc($sql)){
        $l_id = $rs['ID'];
        $l_title = $rs['L_TITLE'];
        $l_comments = $rs['L_COMMENTS'];
        $l_views = $rs['L_VIEWS'];
    }
}else{
        $l_id = $no_data;
        $l_title = $no_data;
        $l_comments = $no_data;
        $l_views = $no_data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:46:24.157

您可以通过多种方式执行此操作。

我看到的一种常见方式是让一个页面查询整个数据库，然后将结果存储到一个数组中。一个变量用于决定每页有多少结果，一个变量用于保存活动页面。您可以使用 GET 或 POST 来管理当前页面。

例子：

如果您有 100 个项目，并且希望每页显示 10 个项目，那么您将有 10 个页面。（如果您有 91 个项目，它也应该显示 10 页！）

```
$sql = mysql_query("SELECT * FROM LESSONS WHERE L_STATE='0' ORDER BY ID DESC") or die($sql_error);

//DETERMINE PAGE SIZE/NUMBERS
$currentPage = $_GET["page"];
$itemPerPage = 10;
$itemTotal = mysql_num_rows($sql);
$lastPage = $itemTotal / $itemPerPage + 1; //+1, because you round up to whole pages
$startItem = $currentPage * $itemsPerPage;

if($itemTotal > 0){
    //PUT DATA IN ARRAYS
    while($rs = mysql_fetch_assoc($sql)){
        $id[] = $rs['ID'];
        $l_title[] = $rs['L_TITLE'];
        $l_comments[] = $rs['L_COMMENTS'];
        $l_views[] = $rs['L_VIEWS'];
    }

    //DETERMINE WHAT PAGE AND ITEMS TO SHOW
    if(0 < $currentPage && $currentPage <= $lastPage){
        for($i=$startItem;$i<=$startItem+$itemsPerPage;$i++){
            //EXIT LOOP IF END OF ITEMS
            if($i > $itemTotal){
                break;
            }
            //DISPLAY DATA
            echo "<table><tr><th>id</th><th>title</th><th>comments</th><th>views</th></tr><tr>";
            echo "<tr><td>" . $id[$i] . "</td><td>" . $l_title[$i] . "</td><td>" . $l_comments[$i] . "</td><td>" . $l_views[$i] . "</td></tr>";
            echo "</table>";
        }
        //DISPLAY PAGE NUMBERS
        echo "<br />";
        echo "<a href='/?page=0'>|&lt;</a>";
        echo "<a href='/?page=" . $currentPage - 1 . "'>&lt;</a>";
        for($i=0;$i<$lastPage;$i++){
            echo "<a href='/?page=" . $i . "'>" . $i . "</a>";
        }
        echo "<a href='/?page=" . $currentPage + 1 . "'>&gt;</a>";
        echo "<a href='/?page=" . $lastPage . "'>&gt;|</a>";
        echo "<br />";
    } else {
        //If invalid page number, send to page 0
        header("Location: /?page=0");
    }
}else{
        $l_id = $no_data;
        $l_title = $no_data;
        $l_comments = $no_data;
        $l_views = $no_data;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:06:42.623

First, don't use mysql_* functions anymore. They aren't officially depreciated, but they might as well be. Second. I've just glanced over the code for a second but try making those variables in the while loop arrays i.e

```
$l_id[] = $rs['ID']; 
```

Then call $l_id with a foreach loop

EDIT: I guess I'm wrong abotu the mysql_* functions as well, it appears the yare officially depreciated.

# c++ - 在 opencv 和 Qt 中结合视频

> ID：14638038
> 
> 赞同：2
> 
> 时间：2013-02-01T01:02:43.160
> 
> 标签：c++, qt, video, opencv, qt-creator

我正在尝试编写一个程序，将 4 个视频组合成一个视频，将它们排列成 2x2 网格。下面是相关代码：

```
void CombineVideoApp::on_GoButton_clicked()
{
    std::string Video1Name = Video1Path.toUtf8().constData();
    std::string Video2Name = Video2Path.toUtf8().constData();
    std::string Video3Name = Video3Path.toUtf8().constData();
    std::string Video4Name = Video4Path.toUtf8().constData();

    int VideoWidth = 640;
    int VideoHeight = 360;

    cv::Mat Video1Frame, Video2Frame, Video3Frame, Video4Frame; // Creating Mat objects to store the captured frames
    cv::Mat Video1Shrunk, Video2Shrunk, Video3Shrunk, Video4Shrunk; //Creating Mat objects to store the shrunk frames
    cv::Mat FullCombinedVideo(VideoWidth,VideoHeight, Video1Shrunk.type()); //Creating Mat object to store the combined video
    cv::Mat CombinedVideoTop(VideoWidth, VideoHeight/2, Video1Shrunk.type());
    cv::Mat CombinedVideoBottom(VideoWidth, VideoHeight/2, Video1Shrunk.type());

    cv::VideoCapture Video1(Video1Name);
    cv::VideoCapture Video2(Video2Name);
    cv::VideoCapture Video3(Video3Name);
    cv::VideoCapture Video4(Video4Name);

    double Video1FrameCount = Video1.get(CV_CAP_PROP_FRAME_COUNT);
    double Video2FrameCount = Video2.get(CV_CAP_PROP_FRAME_COUNT);
    double Video3FrameCount = Video3.get(CV_CAP_PROP_FRAME_COUNT);
    double Video4FrameCount = Video4.get(CV_CAP_PROP_FRAME_COUNT);

    double CombinedFrameTopCount = min(Video1FrameCount, Video2FrameCount);
    double CombinedFrameBottomCount = min(Video3FrameCount, Video4FrameCount);
    double CombinedFrameCount = min(CombinedFrameBottomCount, CombinedFrameTopCount);

    Video1.set(CV_CAP_PROP_FRAME_COUNT, CombinedFrameCount);
    Video2.set(CV_CAP_PROP_FRAME_COUNT, CombinedFrameCount);
    Video3.set(CV_CAP_PROP_FRAME_COUNT, CombinedFrameCount);
    Video4.set(CV_CAP_PROP_FRAME_COUNT, CombinedFrameCount);

    for(;;)
    {
        Video1 >> Video1Frame;
        Video2 >> Video2Frame;
        Video3 >> Video3Frame;
        Video4 >> Video4Frame;

        cv::resize(Video1Frame, Video1Shrunk, Size((VideoWidth/2), (VideoHeight/2)));
        cv::resize(Video2Frame, Video2Shrunk, Size((VideoWidth/2), (VideoHeight/2)));
        cv::resize(Video3Frame, Video3Shrunk, Size((VideoWidth/2), (VideoHeight/2)));
        cv::resize(Video4Frame, Video4Shrunk, Size((VideoWidth/2), (VideoHeight/2)));

        Video1Shrunk.copyTo(CombinedVideoTop(Rect(0,0,Video1Shrunk.cols,Video1Shrunk.rows)));
        Video2Shrunk.copyTo(CombinedVideoTop(Rect(Video1Shrunk.cols,0,Video2Shrunk.cols,Video2Shrunk.rows)));
        Video3Shrunk.copyTo(CombinedVideoBottom(Rect(0,0,Video3Shrunk.cols,Video3Shrunk.rows)));
        Video4Shrunk.copyTo(CombinedVideoBottom(Rect(Video3Shrunk.cols,0,Video4Shrunk.cols,Video4Shrunk.rows)));

        CombinedVideoTop.copyTo(FullCombinedVideo(Rect(0,0,CombinedVideoTop.cols, CombinedVideoTop.rows)));
        CombinedVideoBottom.copyTo(FullCombinedVideo(Rect(0,CombinedVideoTop.rows, CombinedVideoBottom.cols,CombinedVideoBottom.rows)));

        std::string FinalFilePath = CombinedVideo.toUtf8().constData();
        cv::VideoWriter CombinedWriter(FinalFilePath, CV_FOURCC('D', 'I', 'V', 'X'),10,cvSize(FullCombinedVideo.cols, FullCombinedVideo.rows));

        CombinedWriter << FullCombinedVideo;

    }

} 
```

该程序编译没有问题，但是当我实际尝试运行它时，我收到以下错误：

```
OpenCV Error: Assertion failed (0 <= roi.x && 0 <= roi.width && roi.x + roi.width <= m.cols && 0 <= roi.y && 0 <= roi.height && roi.y + roi.height <= m.rows) in Mat, file /tmp/OpenCV-2.4.3/modules/core/src/matrix.cpp, line 322
Qt has caught an exception thrown from an event handler. Throwing
exceptions from an event handler is not supported in Qt. You must
reimplement QApplication::notify() and catch all exceptions there.

The program has unexpectedly finished. 
```

谁能告诉我这里有什么问题？我完全被难住了。我试图打开的视频文件是 .avi 格式，我使用的是 QtCreator、OpenCV 2.4.3，并在 OSX Snow Leopard 上运行它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:06:36.570

将帧写入视频文件很容易，这里有几个[示例](https://stackoverflow.com/a/13658885/176769)。

棘手的部分是将 4 个帧组装成一个，因此**以下代码**演示了如何做到这一点，并且考虑到所有帧都可以具有任意大小：

```
// Load 4 images from the disk
cv::Mat img1 = cv::imread("test1.jpg");
cv::Mat img2 = cv::imread("test2.jpg");
cv::Mat img3 = cv::imread("test3.jpg");
cv::Mat img4 = cv::imread("test4.jpg");

// Make sure they have been loaded successfully
if (img1.empty() || img2.empty() || img3.empty() || img4.empty())
{
    std::cout << "!!! Failed to load one of the images\n";
    return -1;
}

/* Make sure they are compatible: same type, depth and # channels */

if ( (img1.type() != img2.type()) ||
     (img3.type() != img4.type()) ||
     (img1.type() != img4.type()) )
{
    std::cout << "!!! The depth doesn't match!\n";
    return -1;
}

if ( (img1.depth() != img2.depth()) ||
     (img3.depth() != img4.depth()) ||
     (img1.depth() != img4.depth()) )
{
    std::cout << "!!! The depth doesn't match!\n";
    return -1;
}

if ( (img1.channels() != img2.channels()) ||
     (img3.channels() != img4.channels()) ||
     (img1.channels() != img4.channels()) )
{
    std::cout << "!!! Number of channels doesn't match!\n";
    return -1;
}

// Create the destination image based on the size of the loaded images
//  _________
// |    |    |
// |_1__|_2__|
// |    |    |
// |_3__|_4__|

/* As the input images might have different sizes, we need to make sure
 * to create an output image that is big enough to store all of them.
 */

// Compute the width of the output image
int row1_size = img1.size().width + img2.size().width;
int row2_size = img3.size().width + img4.size().width;
int new_width = std::max(row1_size, row2_size);

// Compute the height of the output image
int col1_size = img1.size().height + img3.size().height;
int col2_size = img2.size().height + img4.size().height;
int new_height = std::max(col1_size, col2_size);

// Create the destination image
cv::Mat dst_img(cv::Size(new_width, new_height), img1.type(), cv::Scalar(0, 0, 0));
std::cout << "dst: size " << dst_img.size().width << "x" << dst_img.size().height << std::endl;

/* Copy the pixels of the input images to the destination */

//  _________
// |    |    |
// |_1__|    |
// |         |
// |_________|
img1.copyTo(dst_img(cv::Rect(0, 0, img1.cols, img1.rows))); 

//  _________
// |    |    |
// |_1__|_2__|
// |         |
// |_________|    
img2.copyTo(dst_img(cv::Rect(img1.size().width, 0, img2.cols, img2.rows)));

//  _________
// |    |    |
// |_1__|_2__|
// |    |    |
// |_3__|____|    
img3.copyTo(dst_img(cv::Rect(0, 
                             std::max(img1.size().height, img2.size().height), 
                             img3.cols, 
                             img3.rows)));

//  _________
// |    |    |
// |_1__|_2__|
// |    |    |
// |_3__|_4__|    
img4.copyTo(dst_img(cv::Rect(img3.size().width, 
                             std::max(img1.size().height, img2.size().height), 
                             img4.cols, 
                             img4.rows)));

// For testing purposes, display it on the screen
cv::imshow("Test", dst_img);
cv::waitKey(0); 
```

这些是用于测试的图像尺寸：*64x64、128x128、256x256 和 320x320*

**结果**：

![在此处输入图像描述](../Images/a2eb4f15bd18cc38ae96fe6a0b8d0c2c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:50:54.573

使用 ffmpeg（或 libav），它是完成此任务的合适工具，而且执行速度更快。

请参阅： [FFMPEG 2 视频在 1 帧中并排转码？](https://stackoverflow.com/questions/9293265/ffmpeg-2-videos-transcoded-and-side-by-side-in-1-frame)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T23:00:52.947

正如 opencv 所说，您的 ROI（感兴趣区域）错误。

可能您有一个错误，因此您有一个从 -1 开始或超出宽度/高度结​​束的区域。

要么在调试器中检查这些，要么打印坐标并查看哪个是错误的。

# python - 跟踪文件路径和行号

> ID：14638041
> 
> 赞同：3
> 
> 时间：2013-02-01T01:03:23.773
> 
> 标签：python, python-2.7, trace, filepath

我正在使用 python 的`trace`模块来跟踪一些代码。当我以这种方式跟踪代码时，我可以获得以下两个结果之一：

**致电**：

```
tracer = trace.Trace(count=False, trace=True, ignoredirs=[sys.prefix, sys.exec_prefix])
r = tracer.run('run()')
tracer.results().write_results(show_missing=True) 
```

**结果**：

```
<filename>(<line number>): <line of code> 
```

**致电**[[引文](https://stackoverflow.com/a/14496861/198633)]：

```
tracer = trace.Trace(count=False, trace=True, ignoredirs=[sys.prefix, sys.exec_prefix], countfuncs=True)
r = tracer.run('run()')
tracer.results().write_results(show_missing=True) 
```

**结果**：

```
filename:<filepath>, modulename:<module name>, funcname: <function name> 
```

我真正需要的是给我这个的踪迹：

```
<filepath> <line number> 
```

似乎我可以使用上述信息并将它们交错以获得我需要的东西，但是在以下用例中这种尝试会失败：

*   `sys.path`包含目录`A`和目录`B`。
*   有两个文件`A/foo.py`和`B/foo.py`
*   两者都`A/foo.py`包含`B/foo.py`函数`bar`，定义在第 100 - 120 行
*   `A/foo.py`和之间有一些细微差别`B/foo.py`

在这种情况下，如果不静态分析 each 中的代码，就不可能使用这种交错来正确识别哪个`bar`被调用（如果我错了，请纠正我）`bar`，这对于非平凡的函数本身来说是非常困难的。

那么，如何获得所需的正确跟踪输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T12:20:16.677

用一点猴子补丁，这实际上很容易。在`trace`模块的源代码中挖掘似乎回调用于报告每个执行步骤。的基本功能`Trace.run`，大大简化，是：

```
sys.settrace(globaltrace)   # Set the trace callback function
exec function               # Execute the function, invoking the callback as necessary
sys.settrace(None)          # Reset the trace 
```

`globaltrace``Trace.__init__`根据传递的参数定义。具体来说，使用第一个示例中的参数`Trace.globaltrace_lt`作为全局回调，它调用`Trace.localtrace_trace`每一行执行。更改它只是修改的一种情况`Trace.localtrace`，因此要获得您想要的结果：

```
import trace
import sys
import time
import linecache

class Trace(trace.Trace):
    def localtrace_trace(self, frame, why, arg):
        if why == "line":
            # record the file name and line number of every trace
            filename = frame.f_code.co_filename
            lineno = frame.f_lineno

            if self.start_time:
                print '%.2f' % (time.time() - self.start_time),
            print "%s (%d): %s" % (filename, lineno,
                                  linecache.getline(filename, lineno)),
        return self.localtrace

tracer = Trace(count=False, trace=True, ignoredirs=[sys.prefix, sys.exec_prefix])
r = tracer.run('run()') 
```

您给出的两个示例之间存在差异；如果第一个输出在`Trace.run`调用期间打印，则在第二个输出期间打印`write_results`。我上面给出的代码遵循前者的模式，所以`tracer.results().write_results()`没有必要。但是，如果您想操作此输出，则可以通过`trace.CoverageResults.write_results`以类似方式修补方法来实现。

# ruby-on-rails - 在 Rails 中使用 params[:value] 引用控制器方法

> ID：14638044
> 
> 赞同：0
> 
> 时间：2013-02-01T01:03:49.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我目前有一个表格（使用 form_tag）。其中一个字段是选项的下拉列表。每个选项值都与我的控制器中的方法名称匹配。我想要做的是当点击表单提交按钮时，它运行直接对应于下拉字段中选择的值的控制器方法。

我现在已经建立了一个解决方法，但感觉太冗长了：

```
def run_reports
  case params[:report_name]
    when 'method_1' then method_1
    when 'method_2' then method_2
    when 'method_3' then method_3
    when 'method_4' then method_4
    else method_1
end
# each method matches a method already defined in the controller 
# (i.e. method_1  is an existing method) 
```

我曾认为使用下拉选项值通过 form_tag 操作（即：action => params[:report_name]）在我的控制器中运行相应的方法可能会起作用，但这不起作用，因为表单中的操作需要在设置参数值之前设置。我不想为这个功能使用 javascript。

这是我的表格：

```
<%= form_tag("../reports/run_reports", :method => "get") do %>
  <%= select_tag :report_name, options_for_select([['--  Please Select  --',nil],['Option 1','method_1'], ['Option 2','method_2'], ['Option 3','method_3'], ['Option 4','method_4']]) %>
  <%= submit_tag "Run Report" %>
<% end %> 
```

有什么建议么？

我可以改变我的控制器方法看起来像这样 - 但实际上调用控制器方法来运行？我猜这不会运行，因为参数值作为字符串返回......

```
def run_reports
  params[:report_name]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:16:36.240

**警告：这是一个糟糕的主意**

您可以通过控制器中这样的代码片段调用该方法：

```
send(params[:report_name].to_sym) 
```

这是一个糟糕的想法的原因是任何访问该页面的人都可以通过注入一个调用危险的请求来手动构造一个调用*任何方法的请求。*你真的，真的不想这样做。你最好设置一些东西来动态调用你的表单中已知的、受信任的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:16:53.327

我认为你应该重新考虑你的应用程序的设计（基于我对它的了解很少）。您有一个负责运行报告的控制器，但实际上不应该这样做。控制器用于管理 Web 服务器和应用程序其余部分之间的连接。

一种解决方案是编写一个名为 ReportGenerator 的新类，该类将运行报告并将结果返回给控制器，控制器将通过单个操作（例如，`show`）运行任何可能的报告。如果您需要可变视图，您可以使用与不同类型的报告相对应的部分视图。

至于 ReportGenerator，您需要有点创意。完全有可能最好的解决方案是有一个单独的类来生成每种报告类型。

# mysql - 使用 lat 和 lng 小数搜索时 MySQL 查询返回 0 行

> ID：14638045
> 
> 赞同：1
> 
> 时间：2013-02-01T01:03:53.660
> 
> 标签：mysql, sql, select, geospatial

我正在尝试执行此查询：

```
SELECT  `venues` . * 
FROM  `venues` 
WHERE  `lat` >= 39.847991180331
AND  `lng` >= -86.332592054637
AND  `lat` <= 40.137846252794
AND  `lng` <= -85.954901904578
LIMIT 0 , 30 
```

这是 lat 和 lng 字段的表结构和一个示例行，它应该返回至少 1 行

```
lng decimal(65,15)                              
lat decimal(65,15)

Name                  Lng                   Lat
Ambre Blends Studio   -86.143746979607530   39.875314973898870 
```

但是，当我执行上述查询时，它不会返回任何行。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:20:07.313

我总是对浮点相等和不等式操作持谨慎态度，而 MySQL 过去曾遇到过此类问题的历史（我不确定您使用的是哪个版本，但在 503/505 附近进行了一些更改）。

我要做的第一件事是调试实际的语句。从...开始：

```
select venues.* from venues
 where name like 'Ambre%' 
```

并确保你只得到一行（`where`如果有很多以 开头的行，你可能需要调整子句`Ambre`）。

然后一次添加其他子条款，直到该行不出现。第一个是：

```
select venues.* from venues
 where name like 'Ambre%'
   and lat >= 39.847991180331 
```

一旦确定了导致失败的条件*，*`select`您就可以开始调查原因。

# c# - c#中的SerialPort，数据接收不完整消息

> ID：14638047
> 
> 赞同：1
> 
> 时间：2013-02-01T01:04:03.310
> 
> 标签：c#, serial-port

我正在研究串行端口。我面临一个新问题，即一旦收到数据，我的数据就会不完整。如何检查我的数据是否完整然后处理它们，如果不完整，不处理它们？

这是我的数据接收和发送功能：

```
 private void Send(byte[] cmd)
        {
            bResponse = new byte[0];
            Write(cmd);        
        }

 void comPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            int iCount = comPort.BytesToRead;
            byte[] bBuffer = new byte[iCount];
            comPort.Read(bBuffer, 0, iCount)
            if (bBuffer.Length == 1 && bBuffer[0] == ACK)
                Write(new byte[] { ENQ });
            else if (bBuffer.Length == 1 && bBuffer[0] == NAK)
            {
                Debug.WriteLine("Incomplete Message detected!");  
            }
            else
            {
                bResponse = bResponse.Concat(bBuffer).ToArray();
                    rResponse = Decode(bResponse);
                    Write(new byte[] { ACK });
            }
        } 
```

我知道我的数据是在几个包中收到的，我需要等到响应完成，但根据上面的代码我不知道。我应该如何检查数据是否完整，以确定是否等待？（PS：收到的响应大小不同。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:14:45.950

没有完整性或数据包大小的内置概念。

您必须附加到缓冲区，直到看到您（或其他人）定义为协议规范的一部分的可识别的数据包结束模式。- 如果你还没有看到你要找的东西，那么可能会在一段时间后超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:32:26.683

老项目的例子，注意firstindex，lastindex，你输入一个字符来知道长度，开始/结束字符是预定义的，可以是你选择的任何字符，注意不要带任何常见字符

这适用于 tcp/ip，但同样的原理可用于串口

```
 public void ReceiveMessage(IAsyncResult ar) 
    {
        int bytesRead;
        try
        {
            lock (client1.GetStream()) 
            {
                bytesRead = client1.GetStream().EndRead(ar);
            }
            string messageReceived = System.Text.Encoding.ASCII.GetString(data, 0, bytesRead);
            received = messageReceived;
            int firstindex = received.IndexOf((char)2);
            int lastindex = received.IndexOf((char)3);
            if (firstindex > 0 && lastindex > 0)
            {
                string first = received.Substring(firstindex, 1);
                string last = received.Substring(lastindex, 1);
            }
            lock (client1.GetStream())
            {
                client1.GetStream().BeginRead(data, 0, System.Convert.ToInt32(client1.ReceiveBufferSize), ReceiveMessage, null);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:53:30.533

我有一些代码给你。首先，您实现 DataReceived 事件（正如您已经完成的那样）。仅当有数据要处理时才调用此事件。虽然我不会称它为基于中断（如“实时能力”），但绝对不是轮询。哪个好。

第二：调用事件时，您可能只有一个字节，但可能有更多字节。要捕获每个数据包，您需要实现自定义缓冲区。

第三：将一个字节附加到缓冲区后，检查缓冲区是否包含有效数据包。如果是，请处理它。如果没有：追加另一个。如果没有剩余字节，则等待再次调用事件。

在代码中它看起来像这样：

```
const BUFFERLENGTH = 17; // Bytes
byte[] buffer = new byte[BUFFERLENGTH];

private void COM_Port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    var port = (SerialPort)sender;
    while (port.BytesToRead > 0)
    {
        var data = (byte)port.ReadByte();
        Read(data);
    }
}

private void Read(byte value)
{
    // Append Byte to buffer
    System.Buffer.BlockCopy(buffer, 1, buffer, 0, BUFFERLENGTH- 1);
    buffer[BUFFERLENGTH - 1] = value;

    // Check for valid Packet
    if (IsValidPacket(buffer))
    {
        // Yeah! Gotcha :-)
        // Now copy your Packet from the Buffer to your struct/whatever
    }
}

private bool IsValidPacket(byte[] buffer)
{
    // Todo: Check whether buffer contains a valid Packet.
    // Some think like:
    // return buffer != null && buffer[0] == 0xF4 && buffer[2] == buffer.length
    throw new NotImplementedException();
} 
```

请注意，我没有“将字节附加到缓冲区”。我丢弃了第一个字节，将每个字节移动了一个位置，并在最后插入了新字节。如果找到一个有效的数据包，我可以将它在一个块中复制到一个结构中。因此缓冲区大小始终是恒定的，并且与一个数据包一样长。

这可能不是最快的代码（因为它分别读取每个字节）但对我来说效果很好:-)

哦，如果您想在 GUI 中显示这些内容，请记住使用 Begininvoke()。

# osx-mountain-lion - 无法安装 capybara-webkit gem

> ID：14638051
> 
> 赞同：1
> 
> 时间：2013-02-01T01:04:22.600
> 
> 标签：osx-mountain-lion, capybara-webkit

这对我来说真的是一个艰难的过程。我正在尝试迁移到 Mountain Lion，但在尝试安装 capybara-webkit 时得到以下信息。

最初的错误：

Gem::Installer::ExtensionBuildError: 错误: 无法构建 gem 原生扩展。

```
 /Users/martinb/.rvm/rubies/ruby-1.9.3-p374/bin/ruby extconf.rb 
    cd src/ && /usr/bin/qmake /Users/martinb/.rvm/gems/ruby-1.9.3-p374/gems/capybara-webkit-0.14.1/src/webkit_server.pro -spec /usr/local/Qt4.7/mkspecs/macx-g++ -o Makefile.webkit_server
    cd src/ && make -f Makefile.webkit_server 
    g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o EnableLogging.o EnableLogging.cpp
    In file included from /Library/Frameworks/QtCore.framework/Headers/qnamespace.h:45,
                     from /Library/Frameworks/QtCore.framework/Headers/qobjectdefs.h:45,
                     from /Library/Frameworks/QtCore.framework/Versions/4/Headers/qobject.h:47,
                     from /Library/Frameworks/QtCore.framework/Versions/4/Headers/QObject:1,
                     from SocketCommand.h:4,
                     from EnableLogging.h:1,
                     from EnableLogging.cpp:1:
    /Library/Frameworks/QtCore.framework/Headers/qglobal.h:320:6: warning: #warning "This version of Mac OS X is unsupported"
    g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o Authenticate.o Authenticate.cpp
    In file included from /Library/Frameworks/QtCore.framework/Headers/qnamespace.h:45,
                     from /Library/Frameworks/QtCore.framework/Headers/qobjectdefs.h:45,
                     from /Library/Frameworks/QtCore.framework/Versions/4/Headers/qobject.h:47,
                     from /Library/Frameworks/QtCore.framework/Versions/4/Headers/QObject:1,
                     from SocketCommand.h:4,
                     from Authenticate.h:1,
[...]
    make[1]: *** [Authenticate.o] Error 1
    make: *** [sub-src-webkit_server-pro-make_default-ordered] Error 2

    Gem files will remain installed in /Users/martinb/.rvm/gems/ruby-1.9.3-p374/gems/capybara-webkit-0.14.1 for inspection.
    Results logged to /Users/martinb/.rvm/gems/ruby-1.9.3-p374/gems/capybara-webkit-0.14.1/./gem_make.out 
```

所以我使用自制软件安装了最新的 qt：

```
> brew install qt
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/qt-4.8.2.mountainlion.bottle.1.tar.gz
######################################################################## 100.0%
==> Pouring qt-4.8.2.mountainlion.bottle.1.tar.gz
==> Caveats
We agreed to the Qt opensource license for you.
If this is unacceptable you should uninstall.
==> Summary
  /usr/local/Cellar/qt/4.8.2: 2752 files, 197M 
```

然后：

```
> gem install capybara-webkit

Building native extensions.  This could take a while...
ERROR:  Error installing capybara-webkit:
    ERROR: Failed to build gem native extension.

        /Users/martinb/.rvm/rubies/ruby-1.9.3-p374/bin/ruby extconf.rb
cd src/ && /usr/bin/qmake /Users/martinb/.rvm/gems/ruby-1.9.3-p374/gems/capybara-webkit-0.14.1/src/webkit_server.pro -spec /usr/local/Qt4.7/mkspecs/macx-g++ -o Makefile.webkit_server
cd src/ && make -f Makefile.webkit_server 
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o EnableLogging.o EnableLogging.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o Authenticate.o Authenticate.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o SetConfirmAction.o SetConfirmAction.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o SetPromptAction.o SetPromptAction.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o SetPromptText.o SetPromptText.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o ClearPromptText.o ClearPromptText.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o JavascriptAlertMessages.o JavascriptAlertMessages.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o JavascriptConfirmMessages.o JavascriptConfirmMessages.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o JavascriptPromptMessages.o JavascriptPromptMessages.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o IgnoreSslErrors.o IgnoreSslErrors.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o ResizeWindow.o ResizeWindow.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o CurrentUrl.o CurrentUrl.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o ConsoleMessages.o ConsoleMessages.cpp
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o main.o main.cpp
main.cpp:2:17: error: QtGui: No such file or directory
main.cpp: In function ‘int main(int, char**)’:
main.cpp:16: error: ‘QApplication’ was not declared in this scope
main.cpp:16: error: expected `;' before ‘app’
main.cpp:17: error: ‘app’ was not declared in this scope
main.cpp: At global scope:
main.cpp:8: warning: unused parameter ‘argc’
main.cpp:8: warning: unused parameter ‘argv’
make[1]: *** [main.o] Error 1
make: *** [sub-src-webkit_server-pro-make_default-ordered] Error 2
Command 'make' failed

make
cd src/ && make -f Makefile.webkit_server 
g++ -c -pipe -g -gdwarf-2 -Wall -W -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/Qt4.7/mkspecs/macx-g++ -I. -I/Library/Frameworks/QtCore.framework/Versions/4/Headers -I/usr/include/QtCore -I/Library/Frameworks/QtNetwork.framework/Versions/4/Headers -I/usr/include/QtNetwork -I/usr/include/QtGui -I/Library/Frameworks/QtWebKit.framework/Versions/4/Headers -I/usr/include/QtWebKit -I/usr/include -I. -F/Library/Frameworks -o main.o main.cpp
main.cpp:2:17: error: QtGui: No such file or directory
main.cpp: In function ‘int main(int, char**)’:
main.cpp:16: error: ‘QApplication’ was not declared in this scope
main.cpp:16: error: expected `;' before ‘app’
main.cpp:17: error: ‘app’ was not declared in this scope
main.cpp: At global scope:
main.cpp:8: warning: unused parameter ‘argc’
main.cpp:8: warning: unused parameter ‘argv’
make[1]: *** [main.o] Error 1
make: *** [sub-src-webkit_server-pro-make_default-ordered] Error 2

Gem files will remain installed in /Users/martinb/.rvm/gems/ruby-1.9.3-p374/gems/capybara-webkit-0.14.1 for inspection.
Results logged to /Users/martinb/.rvm/gems/ruby-1.9.3-p374/gems/capybara-webkit-0.14.1/./gem_make.out 
```

我真的，真的被困住了。有解决方案吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:30:11.127

哇！我听从了保罗的建议（谢谢保罗！）并将 qmake 链接到新版本。（是 4.7.3，我需要它才能使用最新的 4.8.2）。

提示： qmake -v 查看正在使用的版本。

如果我只知道这个...：P

# linux - Linux文件实用程序magic.mgc数据库获取内容

> ID：14638052
> 
> 赞同：3
> 
> 时间：2013-02-01T01:04:26.227
> 
> 标签：linux, file, unix

我在需要识别某些文件格式的地方编写项目。对于某些格式，我找到了可以轻松识别的签名（mp3、ogg），而对于另一种格式（如 MPEG ADTS），我有一个大问题——我只是找不到可以用于它的签名类型。

我发现 Linux 环境的 File 实用程序可以做到这一点。我试图在源代码中搜索它，但我什么也没找到。

我发现文件实用程序将其数据库保存在 magic.mgc 文件中。但它以二进制形式存在。看起来像： ![在此处输入图像描述](../Images/d8e874ac6f3fce2ac7c2109acfdb0f85.png)

有人可能知道如何以纯文本格式查找该数据库吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T01:17:13.540

该实用程序不是特定于 Linux 的实用程序。它是[最初由 Ian Darwin 编写的 UN*X 文件命令的版本](http://www.darwinsys.com/file/)。二进制`.mgc`文件是从一堆源文件生成的。

你的 Linux 发行版可能有它的源代码包；从哪里获得该软件包以及如何安装它取决于您使用的发行版。

生成文件的源文件`.mgc`也可能在您的发行版中可用，*而无需*安装源包`file`；如果是这样，您可以使用该命令使用标志`file`生成它。`-C`我在我的 Ubuntu 12.04 虚拟机上看不到它们明显的地方，因此可能需要安装一些*其他*软件包（安装了`file`它本身*）*。（在 OS X 上，它们位于目录中`/usr/share/file/magic`。）

或者，您可以下载该文件的标准版本（可能已被您的发行版修改，因此您可能不需要该版本）并修改和构建它。

请注意，在某些版本的 UN*X 系统上，该`file`命令完成的大部分工作是在“libmagic”库中的库例程中完成的；查看您的发行版是否具有或可以安装它（例如，尝试`man libmagic`）以及它是否可以为您完成这项工作。

# c# - 我怎样才能看到森林的树木？

> ID：14638058
> 
> 赞同：-3
> 
> 时间：2013-02-01T01:05:09.420
> 
> 标签：c#, html, asp.net-mvc-3, refactoring, resharper

Resharper 发现一个原始的 asp.net MVC 3 Internet 应用程序存在 1,953 个问题（我什至没有碰过代码 - 只是看着它）：

```
Common Practices and Code Improvements: 1024 issues
Constraints Violations: 150 issues
Potential Code Quality Issues: 252
Redundancies in Code: 77 issues
Redundancies in Symbol Declarations: 450 issues 
```

asp.net 新手如何知道（当他试图重新锐化自己的代码时）哪些问题是真正的问题，哪些是真正的非问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:11:03.437

除了 5 个错误，所有这些错误都来自包含的 js。您真的需要检查 Microsoft.Ajax.js 中的代码问题吗？

.cs 中发现的 5 个问题是针对非常常见的未使用用途：System、System.Linq、System.Collections.Generic 等。

我希望这不是你今天要解决的最大问题。

# java - Ubuntu中Netbeans构建的JAR在windows7中找不到主类

> ID：14638061
> 
> 赞同：0
> 
> 时间：2013-02-01T01:05:37.913
> 
> 标签：java, jar

我有一个由 Netbeans 在 Ubuntu 中构建的 JAR，在 Ubuntu 中运行得很好。但在 Windows 中，我双击同一个 JAR 文件导致错误“找不到主类”......提前非常感谢。

# php - 从另一个类 OOP 调用一个类

> ID：14638065
> 
> 赞同：0
> 
> 时间：2013-02-01T01:05:54.317
> 
> 标签：php

我目前有一个名为 Connect 的类，代码如下：

```
class Connect
{
public $sqlHost='host';
public $sqlUser='user';
public $sqlPass='pass';
public $sqlDB='db';

public $db;
    public function __construct() {
        $this->db = new mysqli($this->sqlHost, $this->sqlUser, $this->sqlPass, $this>sqlDB);
    }
}
?> 
```

我还有一个名为 TODO 的类，我想知道如何从 TODO 类调用位于 Connect 类中的 $db？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:11:51.150

imagine you have have two objects called

```
$connect = new Connect();
$todo = new TODO(); 
```

now 1 of 3 things can happen, You can pass the $connect object into a method of $todo or if a Connect object is a member of a TODO object, or create a new connect object.

scenario 1:

```
class TODO {
    public function foo($connect){
        // You can get the db object here:
        $connect->db
    }
}

$todo->foo($connect) 
```

scenario 2:

```
class TODO {
    public $connect;
    public function __construct(){
        $this->connect=new Connect(); 
    }
    public function foo(){
        //get db:
        $this->connect->db;
    }
}
$todo->foo(); 
```

scenario 3:

```
class TODO {
    public function foo(){
        $connect = new Connect();
        $connect->db;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:09:22.023

我不确定你想要什么，但我认为这是

`$connectInstance = new Connect();`
`$connectInstance->db...`

这样您就可以访问连接对象中的 db 变量。但首先，您必须实例化对象。

# cuda - CUDA实现PUSH RELABEL解决通用图？

> ID：14638066
> 
> 赞同：2
> 
> 时间：2013-02-01T01:05:54.273
> 
> 标签：cuda, push-relabel

我一直在尝试找到一些开源代码，它可以执行 Goldberg 的 push 和 relabel 或 preflow-push 、 preflow-relabel 来解决 GENERAL 图的图切割问题。

我知道 CUDA 有 npp GrabCut 2D 示例代码，而且我也知道当每个像素都被视为一个节点时，nppiGraphCut() 会解决 2D 平面的图形切割问题。但是，鉴于以下图形输入，我想要解决的问题：

源、汇、节点数、从节点到节点、前向弧权重（从 -> 到节点） 后向弧权重（到 -> 从节点） 源权重（源到非终端节点容量） 汇权重（非终端节点接收容量）

我在matlab中有这个，如下图是这样给出的，其中源用sourceWeights连接到节点<1><2><3>，节点<1><2><3>用sinkWeights连接到sink节点。同样，容量之间也有节点，但只连接一个方向（即反向容量为0）。

```
 <source> 
```

<1> -> <2> -> <3> -> <4> -> <5> -> <6> ...

```
 <sink> 
```

这可以在 nppGraphCut 中用作一维数组 (<1><2><3>) 来执行图形切割吗？

# oracle - Oracle.DataAccess 不匹配错误

> ID：14638067
> 
> 赞同：9
> 
> 时间：2013-02-01T01:05:58.780
> 
> 标签：oracle, odp.net

我为 Visual Studio 2012 安装了 odp.net 32​​ 位安装。我设置了对 Oracle.DataAccess.dll 的引用，并且我与 Oracle 的连接似乎正常工作。

当我构建项目（.net 4）时，出现以下错误。该项目设置为构建 AnyCPU（我的工作站是 64 位，我们最终将部署到的服务器是 32 位）

'正在构建的项目的处理器架构“MSIL”与参考 Oracle.DataAcess 的处理器架构不匹配，版本 4.112.3.0，Culture=neutral，PublicKeyToken=89b483f429c47342，processorArchitecture=x86，“x86”。这种不匹配可能会导致运行时失败。请考虑通过配置管理器更改项目的目标处理器架构，以使项目与参考之间的处理器架构保持一致，或者使用与项目的目标处理器架构相匹配的处理器架构来依赖参考。

这只是一个 vs.net 警告但是有没有办法摆脱这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T18:08:34.047

就像你说的，这只是一个警告。因为 ODP.net 不是“AnyCPU”，警告表明您有一个依赖项，它不会像您自己的应用程序那样适应主机操作系统。只要您的 odp.net 安装在位方面与操作系统匹配，就可以了。但是编译器无法做出这个决定，并试图给你一个提示。

我确实找到了一篇关于此的[连接文章](http://connect.microsoft.com/VisualStudio/feedback/details/738322/irritating-warning-from-msbuild)，其中包括可能的更改（我假设 proj 文件）以禁用错误：

```
<PropertyGroup>
<ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>None</ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>
</PropertyGroup> 
```

在任何情况下，只要您在服务器上安装的 32 位 odp.net 与您引用的 64 位 odp.net 版本相同（或发布者策略已正确安装到重定向到更高版本）。为了消除任何混淆，我通常将“复制本地”设置为“假”的引用。换句话说，我针对特定版本的 dll 进行编译，但让它针对它从 GAC 解析的内容运行（其中包括大多数 odp.net 安装包含的发布者策略）。

您还可以在您的开发机器上安装 32 位 odp.net（最好再次使用相同的版本），以便运行/调试 32 位应用程序或使用 Visual 内部“随 Oracle Developer Tools for Visual Studio”提供的集成工具工作室。

话虽如此，这里还有很多东西。如果您的应用程序实际上正在运行（暗示“它只是一个警告”），作为 64 位，而不是使用您的 32 位安装。我猜你的机器已经安装了 64 位版本（多个 oracle home）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T12:49:15.990

另一种解决方案：

下载[ODAC 11.2 Release 5 (11.2.0.3.20)](http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html)并将编译器设置为 x86。我 100% 确定它会清除所有与 oracle 相关的警告。将命名空间设置为：`using System.Data.Odbc;`

然后建立数据库连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:16:05.373

> 这只是一个 vs.net 警告但是有没有办法摆脱这个？

我相信没有办法摆脱它，因为您想在 32 位机器上部署并在 64 位上创建。这只是一个警告，通知您驱动程序可能有问题。如果您现在正在做什么，则无需担心。

您应该期待它 - 您在 64 位架构上使用 32 位库。

# javascript - Optimizing recurring ui updates

> ID：14638073
> 
> 赞同：2
> 
> 时间：2013-02-01T01:06:30.427
> 
> 标签：javascript, timeout, angularjs, angularjs-directive

I just figured what's slowing down entire page.

I have a directive that updates date, based on Resig's prettyDate jquery plugin, showing in convenient format how long ago the event took place... The directive itself build around the angular's sample that they use on the documentation page [here's the sample](http://jsfiddle.net/czPgL/).

it works perfectly if you have a few elements on the page, but once you put more it slows down the entire page, because it's constantly updating the time, even if you put longer interval between the updates it still will update simultaneously all the elements.

Can you guys suggest any solution to that? Is it possible somehow to update them asynchronously or I know it sounds silly like in a different thread or something like that.

How do people generally solve that, how do you update thousands of elements without sacrificing performance?

```
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:26:41.567

你需要它每秒更新吗？每分钟怎么样？

与其让每个指令运行自己的计时器，不如创建一个 timerService。将此服务注入到每个指令中。让指令 $watch 更改服务属性（例如 currentTime），并在更改时更新其视图。

如果您不希望所有日期同时更新，您可以在 timerService 中创建一个计时器数组（并在更新数组的每个元素时交错）并让每个指令的链接函数从要观看的数组。

# iphone - NSDateformatter 格式不正确

> ID：14638074
> 
> 赞同：-2
> 
> 时间：2013-02-01T01:06:32.053
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

我有一个不能正常工作的 NSDateformatter。我的日期是这样的字符串。

```
2013-02-20 00:00:00 
```

我需要像这样将它作为 NSDate 返回

```
2013-02-20 
```

我现在得到的就是这个。

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"yyyy-MM-dd hh:mm:ss"];

[dateFormat setDateFormat:@"yyyy-MM-dd"];
[dateFormat dateFromString:dateString] 
```

但这不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:48:18.280

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
NSDate* date=[dateFormat dateFromString: dateString];
[dateFormat setDateFormat:@"yyyy-MM-dd"];
NSLog(@"%@",[dateFormat stringFromDate: date]); 
```

这将工作尝试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:18:10.907

如果您有多个要解析的日期，则值得创建一个输入和一个输出日期格式化程序

```
static NSDateFormatter *inputDateFormatter;
static NSDateFormatter *outputDateFormatter;
if (!inputDateFormatter) {
    inputDateFormatter= [[NSDateFormatter alloc] init];
    [inputDateFormatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"];

    outputDateFormatter = [[NSDateFormatter alloc] init];
    [outputDateFormatter setDateFormat:@"yyyy-MM-dd"];
}
NSDate *date = [inputDateFormatter dateFromString:@"2013-02-20 00:00:00"];

NSString *string = [outputDateFormatter stringFromDate:date];

NSLog(@"%@", string); 
```

结果

```
2013-02-20 
```

由于创建 NSDateFormatter 的成本很高，因此您应该将它们存储在单例中或将它们声明为静态以便为该方法创建一次。

* * *

> 我需要像这样将它作为 NSDate 返回

日期没有格式，它只是一个时间点。您必须在需要的地方创建一个具有所需格式的字符串。

# symfony - Set 'parameters' annotation in NelmioApiDocBundle

> ID：14638076
> 
> 赞同：0
> 
> 时间：2013-02-01T01:06:42.040
> 
> 标签：symfony, symfony-2.1, fosrestbundle, api-doc

I create an API RESTfull using Symfony2.1 with FOSRESTBundle and I am using [NelmioApiDocBundle](https://github.com/nelmio/NelmioApiDocBundle) to generate automatic documentation.

I have a PUT request in which the user should send one parameter, but I don't need to create a Form for this purpose. All works perfectly but when I generate the documentation I don't know how to add this parameter to the documentation because I don't have a 'input' form.

I tried this but seems doesn't work:

```
 /**
 * @ApiDoc(
 *  description="description",
 *  statusCodes={
 *         200="Success",
 *         400="Bad request"},
 *  parameters={
 *         {"name"="parameter_name", "dataType"="integer"}
 *  }
 * )
 ... 
```

In the documentation of [NelmioApiDocBundle](https://github.com/nelmio/NelmioApiDocBundle) I didn't see any solution for this...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:40:39.177

使用过滤器键而不是参数

```
 * filters={
 *     {"name"="parameter_name", "dataType"="integer"},
 * }, 
```

# python - Russian Peasant Multiplication Python 3.3

> ID：14638078
> 
> 赞同：6
> 
> 时间：2013-02-01T01:07:21.040
> 
> 标签：python, if-statement, python-3.x, while-loop

I need help with a program in python 3.3 that is supposed to do Russian peasant multiplication/ancient Egyptian multiplication. The assignment says," If "A" and "B" are the two integers to be multiplied, we repeatedly multiply "A" by 2 and divide "B" by 2, until "B" cannot divide any more and is not zero (integer division). During each set of multiplying "A" and dividing "B", if the value of "B" is an odd number, you add whatever the "A" value is to a total. At the end, the sum of all the "A" values (when "B" is odd) should be equal to the product of the original "A" and "B" inputs. In short, sum up all the "A" values for which "B" is odd and it will be equal (or close) to the product of "A" and "B".

*edit*

I may have phrased some of the question wrong.

Here is an example:

If "A" is 34, and "B" is 19, multiplying "A" by two and dividing "B" by two each line.

"A" "B"

(34) (19) ("B" is odd, add "A" to total)

(68) (9) ("B" is odd, add "A" to total)

(136) (4) ("B" is even, ignore "A" value)

(272) (2) ("B" is even, ignore "A" value)

(544) (1) ("B" is odd, add "A" to total)

When you sum all the values of "A" for which "B" is odd, you get (34 + 68 + 544 = 646), which is equal to just multiplying "A" and "B", (34 * 19 = 646).

The part I'm having trouble with is adding "A" to a total whenever "B" is an odd number.

This is what I have so far,

```
x = int(input("What is the first number? "))
y = int(input("What is the second number? "))
answer = 0

while y != 0:
    if (y%2 != 0):
        x*2
        y//2
        answer == answer + x
    if (y%2 == 0):
        x*2
        y//2
print("the product is",(answer)) 
```

I'm very new to python and programming, so any help and/or explanations of why its wrong would be greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:54:45.607

我不熟悉您尝试实现的算法，但我对您的代码进行了一些修改。

```
x = int(input("What is the first number? "))
y = int(input("What is the second number? "))
answer = 0

# != 0 is redundant: y is True if it is not 0
while y:
    # no need to have parentheses here
    if y % 2:
        # this needs to be an assignment, not a check for equality
        answer += x  # shorthand for answer = answer + x
    # These happen every time, so does not need to be inside the if
    # these also need to be an assignment, not just an expression
    x *= 2
    y /= 2
# total was never defined
print("the product is", (answer)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T05:59:52.733

您需要先添加 x 才能回答，然后更新 x

这是正确的代码

```
x = int(input("What is the first number? "))
y = int(input("What is the second number? "))
answer = 0

while y != 0:
   if (y%2 != 0):
      answer=answer+x
      x=x*2
      y=y//2
   if (y%2 == 0):
      x=x*2
      y=y//2

print("the product is",(answer)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-18T16:58:11.890

上一次加 x 是在 y 等于 1 的时候。如果一直减半直到数字达到 0，将需要非常大量的迭代（从逻辑上讲，这将需要永远）。

想想 2x2。如果你将 x 加倍为 4，将 y 减半为 1，x 就是你的答案。

换句话说，认为`y`是`how many of x I need to yield answer`。由于您不能相乘，只能相加/加倍/减半，因此您可以选择 - 您可以等到 y 为 2，然后添加 x 的两倍值，或者您可以等到 y 为 1 并简单地添加 x 的值。后者更简单，更清晰，仅此而已。

我认为在这种情况下使用`while True`循环更清楚：

```
def mult2(x, y):
    answer = 0
    while True:
        if y % 2:
            answer += x
        if y < 1:
            break
        x *= 2
        y //= 2
    print("the product is", answer) 
```

递归调用函数：

```
def mult2(x, y):
    """aka 'Russian peasant method'; allowed: addition, halving, doubling."""
    if y==1:
        return x
    else:
        add = x if y%2 else 0
        return mult2(x*2, y//2) + add 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T11:56:28.920

一个旁注。坦率地说，直到现在我才知道算法。它被古埃及人或旧俄罗斯使用的越让我感到惊讶。（实际上，我倾向于认为俄罗斯起源的可能性更大，因为斯拉夫民族似乎与古老的伊特鲁里亚人直接相关）。

旧的起源让我感到惊讶，因为它实际上是你在基础学校学到的简单的手工乘法。唯一的区别是数字首先转换为*二进制*表示。而是面向机器的，不是吗？:)

对于问题中的数字，十进制表示的 34 等于二进制的 100010，十进制的 19 是二进制的 10011。现在在纸上简单的基本学校乘法：

```
 100010
x    10011
------------
    100010   i.e. 100010 times 1
   100010        1000100 times 1
  000000        10001000 times 0
 000000        100010000 times 0
100010        1000100000 times 1
------------                   ^ binary digits of the multiplier
1010000110                       (reminder of division by 2)
                       ^ adding the zero means multiplying by 2
i.e. sum only when 1 is the reminder of division 
```

似乎设计方法的人（在古代）知道二进制数是什么。

# java - Cannot add Linked file on a Server to R.raw

> ID：14638081
> 
> 赞同：0
> 
> 时间：2013-02-01T01:07:56.213
> 
> 标签：java, android, eclipse, sqlite

I'm trying to add a file from our fileserver to my Android Project

```
\\server\common\applicationname\DemoDatabase\demo.sqlite 
```

When I add this to the Project I am adding it in res/raw as "demodatabase"

When I then Clean and rebuild, in the R.java file it doesn't add my `demodatabase`

If I copy the file from the Server directly into the Raw directory, and then choose to link it, then it gets added to the R.java file.

```
"C:\Development\Android\project\res\raw\demo.sqlite" 
```

and choose to link and select this file as `demo`

```
public static final class raw {
    public static final int demo=0x7f040000;
} 
```

the snippet from my .project file looks like this

```
<linkedResources>
  <link>
    <name>res/raw/demo</name>
    <type>1</type>
    <location>C:/Development/Android/project/res/raw/demo.sqlite</location>
  </link>
  <link>
    <name>res/raw/demodatabase</name>
    <type>1</type>
    <location>//server/common/applicationname/DemoDatabase/demo.sqlite</location>
  </link>
</linkedResources> 
```

Is there something I need to do so that I can leave the file on the fileserver, or do I need to copy it to be project local?

# javascript - Js setTimeout() 不起作用

> ID：14638085
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:08:23.030
> 
> 标签：javascript, setinterval

我正在制作一个蛇游戏，正如您从我之前的问题中可能知道的那样。我正在跟进做一个这样的数组：

```
var snakeX = new Array();
var snakeY = new Array(); 
```

然后在for循环中：

```
for (var i = 0;i<=num;i++) {

    snakeX[0] = xCoord;

    snakeY[0] = yCoord;

    context.fillRect(snakeX[0], snakeY[0], sH, sW);

    xCoord = xCoord + 11;

    console.log('xCoord = ' + xCoord + ', yCoord = ' + yCoord);

} 
```

和vars`xCoord`都`yCoord`设置为`0`.

我的问题是为什么这不起作用？

```
setInterval(function() {

    num++;  

}, 1000); 
```

这是我所拥有的一切：

```
function snake() {

    //Let's make the snake start at 4 squares wide, and 1 square tall

    function createSnake() {

        var xCoord = 0;

        var yCoord = 0;

        var snakeX = new Array();

        var snakeY = new Array();

        var num = 3;

        setInterval(function() {

            num = num + 1;  

        }, 1000);

        for (var i = 0;i<=num;i++) {

            snakeX[0] = xCoord;

            snakeY[0] = yCoord;

            context.fillRect(snakeX[0], snakeY[0], sH, sW);

            xCoord = xCoord + 11;

            console.log('xCoord = ' + xCoord + ', yCoord = ' + yCoord);

        }
    }
    createSnake();

}

snake(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T01:26:56.320

你似乎从来没有修改`xCoord`和`yCoord`. 同样，您的“间隔”只是增加了一个数字，实际上并没有做任何其他事情。你需要有某种“重绘”功能来移动蛇。此外，您正在创建`snakeX`和`snakeY`作为数组，但只使用`snakeX[0]`和`snakeY[i]`- 事实上，您甚至没有使用`i`迭代器。

总体而言，您的代码看起来有点像火车残骸。也许您的项目对于您当前的技能水平有点雄心勃勃，在您尝试之前，您应该做一些更基础的工作。我这样说并不是想劝阻你，我只是想提供一些建议。

# android - ARGB_8888 位图是不可见的，而 RGB_565 是

> ID：14638087
> 
> 赞同：2
> 
> 时间：2013-02-01T01:08:44.107
> 
> 标签：android, canvas, bitmap, config

我在为自定义模拟时钟小部件创建位图时遇到了一些麻烦。当我使用 RGB_565 配置时，图像显示正常，但没有透明背景。当我将配置更改为 ARGB_8888 时，我的图像根本没有显示。

```
 static void updateTime(Context context) {
    int iW = 400, iH = 400;

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
    R.layout.clock22analog);

    Bitmap bitmap = Bitmap.createBitmap(iW, iH, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);

    Paint paint = new Paint();
    paint.setColor(Color.WHITE);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(getPxl(context, 8));
    paint.setAntiAlias(true);

    canvas.drawCircle(iW/2, iH/2, getPxl(context, 100), paint);

    remoteViews.setImageViewBitmap(R.id.analogclock, bitmap);

    ComponentName clockWidget = new ComponentName(context,
    Clock_22_analog.class);
    AppWidgetManager appWidgetManager = AppWidgetManager
    .getInstance(context);
    appWidgetManager.updateAppWidget(clockWidget, remoteViews);
} 
```

我究竟做错了什么？

感谢您的回答。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T02:46:57.753

您可能需要清除画布。

```
Canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR) 
```

# parallel-processing - 使用并行优化标志时我们需要定义什么？

> ID：14638088
> 
> 赞同：0
> 
> 时间：2013-02-01T01:08:54.007
> 
> 标签：parallel-processing, fortran

我有一个包含 100 多个子例程的程序，我正在尝试使此代码运行得更快，并且我正在尝试使用并行标志编译这些子例程。我想知道如果我想使用并行标志，我需要在程序中定义哪些变量或参数。与没有并行标志的程序相比，仅使用并行优化标志增加了我的程序的运行时间。

任何建议都非常感谢。非常感谢。

最好的问候， 贾巴巴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:40:46.643

我可以为您提供一些一般性指导，但在不了解您的特定编译器和平台/操作系统的情况下，我将无法具体为您提供帮助。据我所知，Fortran 编译器中使用的所有自动并行化方案最终都使用 OpenMP 或 MPI 命令将循环拆分为线程或进程。问题是这些方案有一定的开销。例如，在一个案例中，我有一个程序使用供应商提供的优化库作为编译库，其中没有优化。由于我的所有子例程和函数都在优化器的大循环之外或之内，并且由于只有对象数据，因此自动并行器无法执行 ipo，因此它无法使用多个核心。

需要注意的是，自动并行器并不神奇。本质上，他们所做的一切与自动向量化技术所做的事情相同，即寻找没有依赖于先前迭代的数据的循环。如果它检测到变量在迭代之间发生了变化，或者编译器无法判断，那么它就不会尝试并行化循环。

如果您使用的是英特尔 Fortran 编译器，您可以打开诊断开关“/qpar-report3”或“-par-report3”，为您提供有关循环依赖树的信息，以了解它们未能优化的原因。如果您无法访问正在使用的大部分代码，尤其是具有主要循环的部分，那么您的代码很可能不会有太多机会使用自动并行器。

在任何情况下，您都可以尝试减少依赖关系并重新编写代码，使其对自动并行化更加友好。

# android - 滚动 ListView 混合图像

> ID：14638090
> 
> 赞同：0
> 
> 时间：2013-02-01T01:09:08.350
> 
> 标签：android, scroll, textview, imageview, simplecursoradapter

我已经实现了一个自定义`SimpleCursorAdapter`，以便将图像和文本插入到 my`ListView`中，但是当用户滚动时图像会四处移动。我怎样才能让他们留在原地？这是我的代码（为简单起见，我将其剥离）：

```
 final class mySimpleCursorAdapter extends SimpleCursorAdapter {

public mySimpleCursorAdapter(Context context, int layout, Cursor cur,
        String[] from, int[] to) {
   super(context, layout, cur, from, to);
   mContext = context;
   mLayoutInflater = LayoutInflater.from(context); 
 }

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    View v = mLayoutInflater.inflate(R.layout.row, parent, false);
    return v;
}

@Override
public void bindView(View v, Context context, Cursor c) {

        ImageView bar11 = (ImageView) v.findViewById(R.id.bar);
        ImageView bar12 = (ImageView) v.findViewById(R.id.bar2);
           ImageView bar13 = (ImageView) v.findViewById(R.id.bar3);
        TextView sign = (TextView) v.findViewById(R.id.text3);                        
               sign.setText(currency);

            if (someValue == 0){
                bar11.setVisibility(View.GONE);
            }

          if (someValue == 1){
                bar12.setVisibility(View.VISIBLE);
            }        

          if (someValue == 2){
                bar13.setVisibility(View.VISIBLE);
            }   

   }
 } 
```

*行.xml*

```
 <?xml version="1.0" encoding="utf-8"?>

 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

  android:layout_width="fill_parent"

  android:layout_height="wrap_content">

 <ImageView 
  android:id="@+id/bar"

  android:layout_width="fill_parent"

  android:layout_height="65dp"

  android:background="@drawable/greenbar"/>

    <ImageView 
  android:id="@+id/bar2"

  android:layout_width="fill_parent"

  android:layout_height="65dp"

  android:background="@drawable/two"/>

    <ImageView 
  android:id="@+id/bar3"

  android:layout_width="fill_parent"

  android:layout_height="65dp"

  android:background="@drawable/two"/>

 <TextView

  android:id="@+id/text3"

  android:layout_width="wrap_content"

  android:layout_height="fill_parent"

  android:layout_alignParentRight="true"

  android:layout_centerVertical="true"/>

 </RelativeLayout> 
```

*列表.xml*

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:id="@+id/expense"
android:background="@drawable/expensebackgroundblue">

<ListView
    android:id="@+id/contentlist"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#00000000" 
    android:cacheColorHint="#00000000" >
</ListView>

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:35:54.907

问题正在发生，因为视图回收您需要做些什么来将视图可见性设置为可见或像这样消失

```
@Override
public void bindView(View v, Context context, Cursor c) {

    ImageView bar11 = (ImageView) v.findViewById(R.id.bar);
    ImageView bar12 = (ImageView) v.findViewById(R.id.bar2);
       ImageView bar13 = (ImageView) v.findViewById(R.id.bar3);
    TextView sign = (TextView) v.findViewById(R.id.text3);                        
           sign.setText(currency);

        if (someValue == 0){
            bar11.setVisibility(View.GONE);
        }else
        {
            bar11.setVisibility(View.VISIBLE);
        }

        if (someValue == 1){
            bar12.setVisibility(View.VISIBLE);
        }else
        {
            bar12.setVisibility(View.GONE);
         }        

      if (someValue == 2){
            bar13.setVisibility(View.VISIBLE);
        }else
        {
             bar13.setVisibility(View.GONE);
        }
} 
```

# firefox - Selenium IDE gotoIF 比较 vchar 字符串

> ID：14638094
> 
> 赞同：5
> 
> 时间：2013-02-01T01:09:24.060
> 
> 标签：firefox, selenium, selenium-ide

我试过以下

```
gotoIf "${oneoff}"=="Jeff Della Rosa" 
gotoIf ${oneoff}=="Jeff Della Rosa" 
gotoIf ${oneoff}=={"Jeff Della Rosa"} <-- not sure why, just trying anything. 
```

-------- 这是整个序列----------

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-09T21:27:53.103

此外，要测试“不等于”，请使用以下语法：

`gotoIf '${variable}'!='the string operand' target_label`

在变量和操作数周围加上单引号很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T06:53:22.293

正确的格式是。

```
gotoIf '${oneoff}'=='Jeff Della Rosa' 
```

单引号... Grr！

# php - 我无法使用 PHP 上传多张图片

> ID：14638099
> 
> 赞同：-4
> 
> 时间：2013-02-01T01:10:16.987
> 
> 标签：php, mysql

> **可能重复：**
> [PHP - 上传多张图片](https://stackoverflow.com/questions/7712715/php-upload-multiple-images)

我想使用 PHP 上传多个图像，但我被卡住了。我有代码，但它只上传 1 张图片。

```
<?php
if (isset($_POST['newuser'])) {
    if ((!empty($_POST['year'])) AND (!empty($_POST['make'])) AND (!empty($_POST['model'])) AND (!empty($_POST['engine'])) AND (!empty($_POST['mileage'])) AND (!empty($_POST['exterior'])) AND (!empty($_POST['interior'])) AND (!empty($_POST['transmission'])) AND (!empty($_POST['body'])) AND (!empty($_POST['fuel'])) AND (!empty($_POST['drive'])) AND (!empty($_POST['doors'])) AND (!empty($_POST['description']))) {
        $year = htmlspecialchars($_POST['year']);
        $make = htmlspecialchars($_POST['make']);
        $model = htmlspecialchars($_POST['model']);
        $engine = htmlspecialchars($_POST['engine']);
        $mileage = htmlspecialchars($_POST['mileage']);
        $exterior = htmlspecialchars($_POST['exterior']);
        $interior = htmlspecialchars($_POST['interior']);
        $transmission = htmlspecialchars($_POST['transmission']);
        $body = htmlspecialchars($_POST['body']);
        $fuel = htmlspecialchars($_POST['fuel']);
        $drive = htmlspecialchars($_POST['drive']);
        $doors = htmlspecialchars($_POST['doors']);
        $description = htmlspecialchars($_POST['description']);

        $target = "images/default.jpg";
        $msg = "";        
        if (!empty($_FILES['fisier']['name'])) {    
            $target = "images/";
            $target = $target . basename($_FILES['fisier']['name']);
            $file_size = $_FILES['fisier']['size'];    
            $file_type = $_FILES['fisier']['type'];
            $ok = 1;
            if ($file_size > 2048000) {
                echo "Too large";
                $ok = 0;
            }
            if ($file_type == "application/octet-stream") {
                echo "no PHP";
                $ok = 0;
            }
            if ($ok == 0) {
                echo "No file saved";
            } else {
                if (!move_uploaded_file($_FILES['fisier']['tmp_name'],$target)) {
                    $target = "images/default.jpg";
                    $msg = "No file saved. ";
                }
            }
        }
        require_once("mysql_connect.php");
        $sql = "INSERT INTO astonmartin VALUES('','$year','$make','$model','$engine','$mileage','$exterior','$interior','$transmission','$body','$fuel','$drive','$doors','$description','$target','$target2','$target3','$target4','$target5','$target6')";
        mysql_query($sql) or die(mysql_error());
        $msg .= "";    
        header("Location: add_user.php?msg=$msg");
    } else {
        $error = "Complete form";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:01:27.317

我认为你首先需要这个函数`assoc`，这里：[multidimensional for loops in php](https://stackoverflow.com/questions/14613183/multidimensional-for-loops-in-php/14613920#14613920)

并继续；

```
<?php
$allowed_types = array(
    'image/gif',
    'image/jpeg',
    // add your mime types more
);

if (isset($_POST['newuser'])) {
    if ((!empty($_POST['year'])) AND ...
        // that gives an associative array
        // i think it's more handy in your case
        $files = assoc($_FILES['fisier']);
        // now you have a files like
        // tmp_name => d:\tmp\abs123, name => cats.jpg, size => 128 ..
        // tmp_name => d:\tmp\abs254, name => dogs.jpg, size => 211 ..
        // ... more code here
        // and here, remove this line
        if (!empty($_FILES['fisier']['name'])) {
        // put this. yes 6, cos you want 6 pics
        if (count($files) == 6) {
            // loop over files
            foreach ($files as $i => $file) {
                // create targets, securely
                $targets[$i] = 
                    'images/'. preg_replace('~[^\w\d\.]~i', '', 
                                    basename($file['name']));
                // check some errors
                if ($file['error'] == 0 && $file['size'] < 2048000
                        // check file type
                        && in_array($file['type'], $allowed_types)) {
                    if (!move_uploaded_file(
                            $file['tmp_name'], 'images/'. $file['name'])) {
                        $targets[$i] = 'images/default.jpg';
                        // collect messages
                        $messages[] = $file['name'] . ' not saved!';
                    }
                }
            }
        }
        // and creating target 1 2 3 ...
        $targets_string = '';
        if (!empty($targets)) {
            // this provides: '$target', '$target2', '$target3' ...
            $targets_string = "'". join("', '", $targets) ."'";
        }
        // ... more code here
        // and sql part
        $sql = "INSERT INTO astonmartin VALUES('', '$year', '$make', ..."
                // add target string
                . "'$description', $targets_string";
        // ... more code here
        // msg part
        $msg = empty($messages) ? '' : join('', $messages);
        header("Location: add_user.php?msg=$msg");
?> 
```

# performance - 这个站点每秒多少查询是正常的？

> ID：14638102
> 
> 赞同：0
> 
> 时间：2013-02-01T01:10:24.770
> 
> 标签：performance, load

我有一个运行 Flynax 分类软件的小网站。我最多获得 10/15 个用户并发用户。有时我会得到非常高的平均负载，这会导致我的服务器出现中断和停机问题。

我跑

```
root@host [~]# mysqladmin proc stat 
```

我看到了这个：

```
Uptime: 111346  Threads: 2  Questions: 22577216  Slow queries: 5159  Opens: 395  Flush tables: 1  Open tables: 285  Queries per second avg: 202.766 
```

对于像我这样的小型站点，每秒 202.766 次查询是否正常？

托管公司说，我的应用程序编码很差，必须优化。

Flynax 开发人员说，服务器又差又弱，必须更换。

我不知道该怎么办？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T08:27:38.067

对于您描述的小型网站，每秒 202.766 次查询不是正常的。可能一些查询循环运行，这就是为什么你有这样的统计数据。

据我所知，最新的 flynax 版本有 mysql 调试选项，使用此选项您可以看到页面上运行了多少查询以及每个查询执行了多少时间。

干杯

# jsf-2 - 防止 af:fileDownloadActionListener 动作事件

> ID：14638103
> 
> 赞同：1
> 
> 时间：2013-02-01T01:10:29.857
> 
> 标签：jsf-2, download, oracle-adf, phaselistener

# 背景

使用 JDeveloper 11.1.2.3 创建报告下载按钮，使用`fileDownloadActionListener`如下：

```
<af:commandButton text="Run Report" id="submitReport">
  <af:fileDownloadActionListener method="#{reportBean.run}"/>
</af:commandButton> 
```

此 JSF 页面的顶部是以下内容：

```
<f:view afterPhase="#{validationBean.afterPhase}" ...>
  ...
    <af:form id="f1">
      <f:event listener="#{validationBean.postValidate}" type="postValidate"/> 
```

这个想法是验证 Bean 可以捕获任何验证问题，如下所示：

```
public void afterPhase(javax.faces.event.PhaseEvent phaseEvent) {
  if (phaseEvent.getPhaseId() == PhaseId.RENDER_RESPONSE) {
    FacesContext context = phaseEvent.getFacesContext();
    FacesMessage.Severity severity = context.getMaximumSeverity();

    if (isSevereError(severity)) {
      context.getExternalContext().getSessionMap().put(ERROR_FLAG_NAME, true);
    }
  }
} 
```

这按预期工作。当用户按下按钮，但表单出现错误时，`validationError`会话变量设置为`true`. 如果表单参数有错误，这应该允许框架防止生成报告。

# 问题

报告 bean的`validationError`run 方法使用 session 变量，如下所示：

```
 public void run(FacesContext facesContext, OutputStream outputStream) {
    Object error = facesContext.getExternalContext().getSessionMap().get( ERROR_FLAG_NAME );

    if( error != null && error != Boolean.TRUE ) {
      Report report = null;

      try {
        report = getReport();
        report.setOutputStream(outputStream);
        configure(report.getParameters());
        report.run();
      } catch (Exception e) {
        if (report != null && facesContext != null) {
          report.publish(e);
        }
      }
    }
    else {
      facesContext.getExternalContext().getSessionMap().remove( ERROR_FLAG_NAME );
      facesContext.renderResponse();
    }
  } 
```

当页面出现验证错误时，`facesContext.renderResponse();`代码被执行，但生成的网页是空白的。不记录任何异常。不会产生错误。

# 问题

避免这种情况的一种方法是使用隐藏按钮、自定义 Java 和一些 JavaScript，如下页所述：

*   [http://jobinesh.blogspot.ca/2010/01/customizing-execution-of-to-validate.html](http://jobinesh.blogspot.ca/2010/01/customizing-execution-of-to-validate.html)
*   [http://tompeez.wordpress.com/2011/07/14/validate-data-before-export-via-afexportcollectionactionlistener-or-affiledownloadactionlistener/](http://tompeez.wordpress.com/2011/07/14/validate-data-before-export-via-afexportcollectionactionlistener-or-affiledownloadactionlistener/)

然而，这种机制是复杂的。如果页面可以照常呈现，我想到的解决方案将起作用。

`af:fileDownloadActionListener`事件触发后如何强制呈现页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:00:47.420

弗兰克·尼菲乌斯[说](https://forums.oracle.com/forums/message.jspa?messageID=10827427)：

> 使用隐藏按钮是您今天唯一可用的选项。我将提交一个 ER，它会为 fileDownload 侦听器（某种预下载）引发一个事件，该事件应该允许您通过调用 Render Response 来取消它。如前所述，这还不存在，隐藏按钮是您可用的选项（请注意，文件下载标签是客户端行为标签，而不是完整的 UI 组件，这就是为什么还没有办法中断执行的原因。

# perl - Perl - 由打印中未初始化的值引起的错误

> ID：14638106
> 
> 赞同：1
> 
> 时间：2013-02-01T01:10:48.997
> 
> 标签：perl, file-io, compiler-errors, terminal, padre

我正在编写一个简单的程序，它从文件中读取莫尔斯电码并将其转换为纯文本。不过，我遇到了一些疯狂的错误。我对 perl 不是很熟悉，我不得不从命令行运行它。以下是我收到的错误和代码。有可能我只是运行错了。我在命令行中输入：“perl -w Lott_Morse.pl morse.txt”。任何帮助，将不胜感激。

错误：

```
Use of uninitialized value in print at Lott_CSC360_Morse2.pl line 31, <> line 7.
Use of uninitialized value in print at Lott_CSC360_Morse2.pl line 31, <> line 7.
Use of uninitialized value in print at Lott_CSC360_Morse2.pl line 31, <> line 7.
Use of uninitialized value in print at Lott_CSC360_Morse2.pl line 31, <> line 7.
Use of uninitialized value in print at Lott_CSC360_Morse2.pl line 31, <> line 7.
Use of uninitialized value in print at Lott_CSC360_Morse2.pl line 31, <> line 7.
The message is 0Jessicas-MacBook-Pro:Documents 
```

代码：

```
#!/usr/bin/perl 

 use 5.010;
 use warnings;

%morse_to_plain=(
".-" =>"A", "-..." => "B", "-.-." => "C", "-.." => "D", "." => "E",
"..-." => "F", "--." => "G", "...." => "H", ".." => "I", ".---" => "J",
"-.-" => "K", ".-.." => "L", "--" => "M", "-." => "N", "---" => "O", 
".--." => "P", "--.-" => "Q", ".-." => "R", "..." => "S", "-" => "T",
"..-" => "U", "...-" => "V", ".--" => "W", "-..-" => "X", "-.--" => "Y",
"--.." => "Z", "-----" => "0", ".----" => "1", "..---" => "2", "...--" => "3",
"....-" => "4", "....." => "5", "-...." => "6", "--..." => "7", "---.." => "8",
"----." => "9", ".-.-.-" => ".", "--..--" => ",", "..--.." => "?", ".----." => "'",
"-....-" => "-", ".-..-." => '"', ".--.-." => "@", "-...-" => "=", "!" => " "
);

chomp(@message = <>);

print "The message is ";
foreach $char (@message)
{
  print $morse_to_plain{$char};
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T01:28:13.890

您正在读取在哈希中没有匹配键的字符串，因此哈希值未定义（未初始化）。很可能是输入问题。出于调试目的尝试此操作：

```
print $morse_to_plain{$char} // "Key does not exist: '$char'\n"; 
```

对于较长的字符串，您可能会考虑这样：

```
$string =~ s{([-.]+)}{ $morse_to_plain{$1} // $1 }ge; 
```

它将搜索点和破折号的组合并将它们翻译成它们的等效文本，或者如果没有找到翻译则它们自己。

您还应该考虑使您的哈希分配更具可读性：

```
my %morse_to_plain = (
    ".-"     => "A", "-..."   => "B", "-.-."   => "C", "-.."    => "D", "."      => "E",
    "..-."   => "F", "--."    => "G", "...."   => "H", ".."     => "I", ".---"   => "J",
    "-.-"    => "K", ".-.."   => "L", "--"     => "M", "-."     => "N", "---"    => "O", 
    ".--."   => "P", "--.-"   => "Q", ".-."    => "R", "..."    => "S", "-"      => "T",
    "..-"    => "U", "...-"   => "V", ".--"    => "W", "-..-"   => "X", "-.--"   => "Y",
    "--.."   => "Z", "-----"  => "0", ".----"  => "1", "..---"  => "2", "...--"  => "3",
    "....-"  => "4", "....."  => "5", "-...."  => "6", "--..."  => "7", "---.."  => "8",
    "----."  => "9", ".-.-.-" => ".", "--..--" => ",", "..--.." => "?", ".----." => "'",
    "-....-" => "-", ".-..-." => '"', ".--.-." => "@", "-...-"  => "=", "!"      => " "
); 
```

这将使拼写错误更容易被发现。此外，您可以很容易地制作反向查找表：

```
my %plain_to_morse = reverse %morse_to_plain; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:24:59.257

记住要永远`use strict;`。在文件中的多个`... --- ...`（我知道的所有摩尔斯电码）上运行良好：

```
#!/usr/bin/perl 

use 5.010;
use strict;
use warnings;

my %morse_to_plain=(
".-" =>"A", "-..." => "B", "-.-." => "C", "-.." => "D", "." => "E",
"..-." => "F", "--." => "G", "...." => "H", ".." => "I", ".---" => "J",
"-.-" => "K", ".-.." => "L", "--" => "M", "-." => "N", "---" => "O", 
".--." => "P", "--.-" => "Q", ".-." => "R", "..." => "S", "-" => "T",
"..-" => "U", "...-" => "V", ".--" => "W", "-..-" => "X", "-.--" => "Y",
"--.." => "Z", "-----" => "0", ".----" => "1", "..---" => "2", "...--" => "3",
"....-" => "4", "....." => "5", "-...." => "6", "--..." => "7", "---.." => "8",
"----." => "9", ".-.-.-" => ".", "--..--" => ",", "..--.." => "?", ".----." => "'",
"-....-" => "-", ".-..-." => '"', ".--.-." => "@", "-...-" => "=", "!" => " "
);

print "The message is \n";

while (<>) {
    chomp;
    foreach my $char ( split ' ' ) {
        print $morse_to_plain{$char};
    }
    print "\n";
} 
```

# android - Eclipse 在调试时无法识别 Galaxy S 2

> ID：14638107
> 
> 赞同：0
> 
> 时间：2013-02-01T01:10:49.037
> 
> 标签：android, eclipse

> **可能重复：**
> [Eclipse 和 Android：无法在三星 Galaxy S2 上调试，因为未检测到](https://stackoverflow.com/questions/10300511/eclipse-and-android-cannot-debug-on-samsung-galaxy-s2-because-not-detected)

我是一个java初学者。我现在正在读一本书，实际上是在学习 java 和 android 编程。无论如何，对于我的问题。我正在使用 eclipse 制作一个简单的应用程序，我想将它转移到我的 Galaxy s 2。我准备调试它并选择我的设备......除了它不在那里。我已经安装了驱动程序 Kies，确保它处于 USB 调试模式，但它无法识别它。有什么建议么？这不是重复的！这是不同的，因为即使它处于调试模式，即使我已经重新安装了两次 kies，即使我确保 USB 端口或电源线没有问题，它仍然无法工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:58:48.313

我建议您下载[http://www.sendspace.com/file/m6btv6](http://www.sendspace.com/file/m6btv6)。这适用于 Galaxy III。它只是 USB 驱动程序，而不是整个 Sansung Kies 套件。它应该让 ABD 正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:59:00.357

您必须从`Settings -> Applications -> Development`. 大多数初学者都没有意识到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:14:36.587

据我所知，当它连接到 Kies 时，它不能用作测试设备。

您不需要 Kies 进行调试，只需确保您的 PC 将您的手机视为闪存驱动器，而不仅仅是打开 USB 调试模式并运行您的应用程序。

# c# - 获取 SQL 错误：无法将参数值从字符串转换为布尔值。1

> ID：14638108
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:10:55.193
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

使用 Asp.Net (C#) 我将以下值提交到数据库中的字段：

```
//Adding to parameters (for stored proc)
command.Parameters.Add( "MyField", SqlDbType.Bit, 1 ).Value = "1"; 
```

我该如何解决这个问题？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:12:34.773

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqldbtype%28v=vs.100%29.aspx)，`SqlDbType.Bit`是：

> 一个无符号数值，可以是 0、1 或 null。

所以，试试：

```
command.Parameters.Add( "MyField", SqlDbType.Bit, 1 ).Value = 1; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T10:34:40.450

`cmd.Parameters.Add("MyField", SqlDbType.Bit).Value = true;`

# ruby-on-rails - Ruby attr_accessor 和收集括号

> ID：14638113
> 
> 赞同：1
> 
> 时间：2013-02-01T01:11:12.130
> 
> 标签：ruby-on-rails, ruby, attr-accessor

我以为我理解 attr_* 和 map(&:name.to_proc).join(' ') 的简写符号，但我今天遇到了这个问题。

为什么设置 attr_accessor 使我无法写出类似的东西`NaughtyWord.all.collect(&:word)`，而是要求我写出更长的时间`NaughtyWord.all.collect{|naughty_word| naughty_word["word"]}`

```
class NaughtyWord < ActiveRecord::Base
  attr_accessor :word, :must_review

  validates_presence_of :word

  def self.regex_filter
    words = NaughtyWord.all.collect(&:word).join("|")
  end
end

#irb(main):014:0> NaughtyWord.all.collect(&:word)
#  NaughtyWord Load (0.4ms)  SELECT `naughty_words`.* FROM `naughty_words` 
#=> [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]

#irb(main):024:0> NaughtyWord.last
#  NaughtyWord Load (0.3ms)  SELECT `naughty_words`.* FROM `naughty_words` ORDER BY `naughty_words`.`id` DESC LIMIT 1
#=> #<NaughtyWord id: 11, word: "word", must_review: true>

#irb(main):025:0> NaughtyWord.last.word
#  NaughtyWord Load (0.6ms)  SELECT `naughty_words`.* FROM `naughty_words` ORDER BY `naughty_words`.`id` DESC LIMIT 1
#=> nil

# irb(main):026:0> NaughtyWord.last["word"]
# NaughtyWord Load (0.6ms)  SELECT `naughty_words`.* FROM `naughty_words` ORDER BY `naughty_words`.`id` DESC LIMIT 1
# => "word"

#irb(main):030:0> NaughtyWord.all.collect{|naughty_word| naughty_word["word"]}
# NaughtyWord Load (0.6ms)  SELECT `naughty_words`.* FROM `naughty_words` 
#=> ["word", "word", "word", "word", "word", "word", "word", "word", "word", "word", "word"] 
```

如果我注释掉 attr_accessor 行，一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:20:25.947

I think you want to use `attr_accessible` instead of `attr_accessor`. The first is a Rails method to white label for mass assignment attributes so it's possible to use something like `User.new params[:user]` in your controller. The second one is plain Ruby, it's a helper to create both the read and write (aka getter and setter) methods for a given instance variable.

So what you are doing with `attr_accessor` is actually overriding the attribute accessor method made by ActiveRecord and that's why it returns nil.

# c - 在不添加长前缀的情况下确保 C 中的枚举名称唯一性

> ID：14638114
> 
> 赞同：5
> 
> 时间：2013-02-01T01:11:19.293
> 
> 标签：c, enums, c99

我发现自己总是将枚举的名称附加到它的值上，因为否则我经常与其他枚举发生冲突，例如：

```
typedef enum
{
    A_ONE,
    A_TWO,
} A;

typedef enum
{
    B_ONE,
    B_TWO,
} B; 
```

在 C 中有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:13:25.683

No, there is not. C++ has namespaces, or enums existing in classes (IIRC), but C is extremely primitive in this regard.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T01:16:51.130

这是您自己的决定，但您可以使用 #define 指令

`#define WHAT_EVER TO_BE_REPLACED`

定义将从`WHAT_EVER`您的代码中替换为`TO_BE_REPLACED`.

在你的预处理器运行抛出你的代码之后，所有的都将被替换。

# iphone - How do I make a section of my UIView a clickable area

> ID：14638117
> 
> 赞同：3
> 
> 时间：2013-02-01T01:11:33.323
> 
> 标签：iphone, objective-c

I want to make a certain section of my UIView clickable. When clicked, it triggers an IBAction, as would an UIButton.

How do I do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:43:07.463

在您的视图上添加自定义 UIButton，您需要点击的任何位置，然后对其执行操作。

```
 UIButton *button = [UIButton buttonWithType:0];
    [button setFrame:CGRectmake(0,0,0,0)]; //What ever clickable area, provide here
    [button addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T05:35:35.833

使用 UITapGestureRecognizer 并将透明按钮放在您希望可点击部分可用的区域上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:16:38.087

添加[`UITapGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)到您的`UIView`. 当您收到点击时，请检查您的识别器的`locationInView:`. 如果点击发生在您想要使点击敏感的区域，则触发操作；否则，忽略点击事件。

# python - Lambda 函数 Python

> ID：14638126
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:12:16.297
> 
> 标签：python, algorithm, sorting, lambda

我在使用 lambda 函数时遇到了问题，并且没有真正完全理解它。我正在尝试计算两点之间的曼哈顿距离，1 点是当前位置，第二点来自包含多个位置的列表。任何帮助表示赞赏，谢谢

我的功能是：

```
toVisit.sort(toVisit,key = lambda x: util.manhattanDistance(curr,x)) 
```

我试图从 toVisit 列表中获取一个值，但不知道如何准确。我正在考虑将 x 与当前位置一起传递，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:23:52.547

查看[文档](http://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)（或内置帮助，或[操作方法](http://wiki.python.org/moin/HowTo/Sorting/)。签名为`list.sort`：

```
s.sort([cmp[, key[, reverse]]]) sort the items of s in place    (7)(8)(9)(10) 
```

除其他外，这些注释解释了每个参数的含义。特别是，第一个参数`cmp`：

> 指定两个参数的自定义比较函数（列表项）

你`toVisit`作为第一个参数传递。因此，`toVisit`将用作比较函数。你不可能想到那是你想要的。所以，我猜你可能不了解对象和点符号的基础知识，你需要阅读适当的教程。（对不起，我没有推荐的。我查看了[官方的Python教程](http://docs.python.org/2/tutorial/introduction.html)，但似乎假设点符号，以及方法是什么等等都是显而易见的，不需要解释......）

这是正确的版本：

```
toVisit.sort(key = lambda x: util.manhattanDistance(curr,x)) 
```

* * *

同时，`lambda`函数本身似乎没有任何问题，但您似乎在连续两个问题中确信这`lambda`是您遇到问题的部分。如果你在使用 a 时遇到问题`lambda`，最简单的方法是将其转换为普通的命名函数，这很容易做到。

你有这个：

```
lambda ARGS: EXPR 
```

在它上面做一行：

```
def good_name_for_what_expr_does(ARGS):
    return EXPR 
```

然后，将 替换`lambda ARGS: EXPR`为`good_name_for_what_expr_does`。

因此，这相当于您的原始代码：

```
def manhattanDistanceFromCurr(x):
    return util.manhattanDistance(curr, x)
toVisit.sort(toVisit, key = manhattanDistanceFromCurr) 
```

你能比在`lambda`版本中更容易地看到那里的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:27:36.840

我建议您在 Google 上搜索“Python 对 lambda 的介绍”。这是第一个结果，这是一个很好的解释：

[http://pythonconquerstheuniverse.wordpress.com/2011/08/29/lambda_tutorial/](http://pythonconquerstheuniverse.wordpress.com/2011/08/29/lambda_tutorial/)

# android - Error when compiling a Cocos2d-x project on Android platform

> ID：14638128
> 
> 赞同：1
> 
> 时间：2013-02-01T01:12:41.593
> 
> 标签：android, cocos2d-x

Description Resource Path Location Type The declared package "org.cocos2dx.lib" does not match the expected package "src.org.cocos2dx.lib" Cocos2dxMusic.java /java/src/org/cocos2dx/lib line 24 Java Problem

Someone said that cocos2d-x 2.0.3 has a bug that will not create cocos2dx.lib. Anybody know how to solve this?

# validation - bean validation get parameter jsf

> ID：14638130
> 
> 赞同：0
> 
> 时间：2013-02-01T01:13:10.193
> 
> 标签：validation, jsf, bean-validation

Using bean validation like:

```
@Size(max = 5)
private String name; 
```

How do I retrieve the `max` value to use within my JSF site? For example to set maxlength value in input text component.

# c++ - 我怎样才能声明一个常量数据成员但直到稍后才初始化它？

> ID：14638134
> 
> 赞同：5
> 
> 时间：2013-02-01T01:13:35.360
> 
> 标签：c++, initialization, declaration

假设在我的 main 方法中，我声明了一个指向在堆上创建的数组的 const int 数组指针。然后我想在构造函数 TryInitialize() 中初始化它的值（使用内存地址），然后将它们打印出来。这不起作用，我想知道我做错了什么？谢谢！

```
#include "stdafx.h"
#include "part_one.h"
#include <string>
#include <iostream>

using namespace std;

string createTable(unsigned int* acc, double* bal, int n) {
    string s;
    char buf[50];

    for (int i = 0; i < n; i++) {
            sprintf_s(buf,"%7u\t%10.2f\n",acc[i], bal[i]);
            s += string(buf);
    }

    return s;
}

int _tmain(int argc, _TCHAR* argv[])
{

    const int *tempInt = new const int[4];
    TryInitialize(tempInt);
    std::cout << tempInt[1] << endl;

    system("pause");

    return 0;
} 
```

这是我的构造函数的代码：

```
#include "part_one.h"

TryInitialize::TryInitialize(void) {

}

TryInitialize::TryInitialize(int constInt[]) {
    constInt[0] = 8;
    constInt[1] = 0;
    constInt[2] = 0;
    constInt[3] = 8;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:19:00.237

您不应更改`const`值。

对于您要完成的工作，我建议声明一个非常量指针和一个常量指针，并在初始化后将非常量指针分配给常量指针：

```
int _tmain(int argc, _TCHAR* argv[])
{
    const int *tempTempInt = new int[4];
    TryInitialize(tempInt);
    const int* const tempInt = tempTempInt;
    std::cout << tempInt[1] << endl; //this is now constant.

    system("pause");

    return 0;
} 
```

还要注意将 const 放在指针声明中的位置：

```
const int* const tempInt = tempTempInt; 
```

在上面的声明中，第二个`const`意味着你不能改变指针；第一个`const`意味着您不能更改指向的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:15:47.303

您将指针声明为`const int*`. `const`修饰符意味着您不能更改数组值。

要么删除`const`，要么为其创建一个初始化方法，该方法可以分配数组并返回它（与构造函数不同）。

```
const int* init_my_array()
{
  int * ret = new int[4];
  ret [0] = 8;
  ret [1] = 0;
  ret [2] = 0;
  ret [3] = 8;
  return ret;
}
...
const int *tempInt = init_my_array(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:21:01.693

你没有。为什么？因为如果它是 const，那么一旦构造了对象就不能更改它。注意：**即使设置它**也会有效地**改变**其未初始化值的值，这与 const 一开始的定义背道而驰。

# javascript - FirstPersonControls start by looking at an object

> ID：14638135
> 
> 赞同：2
> 
> 时间：2013-02-01T01:13:39.597
> 
> 标签：javascript, jquery, three.js

My camera.lookAt(cube.position); works only if I disable FirstPersonControls. How do I make so that I start my exploration by looking at first at my object ?

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-28T15:09:02.843

从`three.js`R101 开始，可以使用`FirstPersonControls.lookAt()`. `FirstPersonControls.lat`并`FirstPersonControls.lon`已被删除。

# css - Font-Awesome icons look strange in IE9 and IE8

> ID：14638139
> 
> 赞同：0
> 
> 时间：2013-02-01T01:14:06.073
> 
> 标签：css, webfonts, font-awesome

I'm using the font-awesome library for icons/buttons in my site.

Not using bootstrap, just plugging them in directly.

In IE9 and IE8, the icons double up and it's driving me bonkers!

Anyone know what this might be?

![enter image description here](../Images/940fa9cde2dce4148505b47d5e0b6c85.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:52:23.870

看起来您对图标应用了某种文本阴影？使用 IE F12 devtools 来尝试并准​​确追踪应用到图标的 CSS。

您是否还检查过是否*有条件*地包含了 IE7 font-awesome-ie7.css 文件`<!--[if IE 7]>`？IE

```
<!--[if IE 7]> 
<link rel="stylesheet" href="Content/fontawesome/font-awesome-ie7.css">
<![endif]--> 
```

# php - How to replace special symbol?

> ID：14638140
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:14:06.187
> 
> 标签：php, xml-parsing

> **Possible Duplicate:**
> [Parsing xml from url php](https://stackoverflow.com/questions/14511687/parsing-xml-from-url-php)

I need to parse xml-document from url and solve to use CURL, because my hosting don't working with some dom or simplexml functions. How I can replace symbol of euro and show them. Function str_replace dont help me.

```
<?php
$url = 'http://www.aviasales.ru/latest-offers.xml';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, 'app');

$query = curl_exec($ch);
curl_close($ch);
$xml=simplexml_load_string($query);
//$xml = str_replace('&euro;', '€', $xml);
?>

<table width=100%>

    <tr bgcolor="#CAE8F0" align="left">
        <td><b><?= $xml->offer[1]['title']?></b></td>
       <td width=5%><b><a href="<?=$xml->offer[1]["href"]?>">buy</a></td>
    </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:18:55.973

`str_replace`正如您所发现的，它不适用于对象。但是，如果您将其输出到 html，您可以保持实体不变。

如果您需要对其进行解码，请运行您的属性，而不是整个对象，通过`html_entity_decode`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:39:26.620

您将无法使用 SimpleXML 直接编辑 XML：

> SimpleXML 扩展提供了一个非常简单且易于使用的工具集，用于将 XML 转换为可以使用普通属性选择器和数组迭代器处理的对象。*[http://www.php.net/manual/en/intro.simplexml.php](http://www.php.net/manual/en/intro.simplexml.php)*

您将不得不使用 PHP DOM 扩展：

> DOM 扩展允许您使用 PHP 5 通过 DOM API 对 XML 文档进行操作。*[http://www.php.net/manual/en/intro.dom.php](http://www.php.net/manual/en/intro.dom.php)*

## 例子：

```
// Create
$doc = new DOMDocument();
$doc->formatOutput = true;

// Load
if(is_file($filePath))
    $doc->load($filePath);
else
    $doc->loadXML('<rss version="2.0"><channel><title></title><description></description><link></link></channel></rss>');

// Update nodes content
$doc->getElementsByTagName("title")->item(0)->nodeValue = 'Foo';
$doc->getElementsByTagName("description")->item(0)->nodeValue = 'Bar';
$doc->getElementsByTagName("link")->item(0)->nodeValue = 'Baz'; 
```

在此处结合问题和选择的答案的示例：[https ://stackoverflow.com/a/6001937/358906](https://stackoverflow.com/a/6001937/358906)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:22:15.763

在您的代码中，$xml 不是字符串，而是 SimpleXMLElement。您可以在加载字符串之前替换 € 实体：

```
$xml = simplesml_load_string(str_replace('&euro;', '€', $query)); 
```

只要 $query 是用多字节字符编码的，你应该没问题。如果没有，您可能必须遍历 $xml。

# scala - Scala 2.10 反射：从类型创建数组

> ID：14638143
> 
> 赞同：3
> 
> 时间：2013-02-01T01:14:11.473
> 
> 标签：scala, reflection, types, casting, scala-2.10

我在挖掘新 2.10 版本的 Scala（有点稀疏？）文档时遇到了麻烦。我有一种情况，我从没有类型信息的源递归地读取数据。在阅读时，我知道预期的类型，因此我可以检查该类型是否与传入的数据一致。

我的问题是：当尝试使用类型参数（例如 an `Array[Int]`）检索集合对象时，如何使用预期的类型来确保读取的值是正确的类型？

到目前为止，我已经摆弄了[Scala Api](http://docs.scala-lang.org/overviews/reflection/typetags-manifests.html#using_an_implicit_parameter_of_type___or_)提供的允许您提取类型参数的代码。我还阅读了有关[类标签](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.ClassTag)以及如何使用它们来创建数组的信息。所以我的下一个想法是 1）找到类型参数，2）从该类型创建一个数组，3）查看读取的数据是否适合无异常，如下所示：

```
val paramType = paramInfo[Array[X]]  // Step 1: Find the X type parameter
val array     = Array[paramType](size) // Step 2: Can't use TypeTags#Type as a normal Java type...
// Step 3: Feed data into the array and hope for the best
// Step 4: Profit! 
```

由于上面`paramType`给了我类型，将类型转换为类标记应该很简单。但答案让我感到困惑。

老实说，这个解决方案对我来说似乎有点混乱，但我还没有找到更聪明的办法。如果有其他解决方案，我会全力以赴！

提前致谢。

编辑：为了澄清，我上面的例子应该证明我想从 Array[Int] 中提取类型 X （例如），然后创建一个包含该特定类型的数组的实例。希望这更清楚。

编辑：也许需要进一步澄清（我真的让它不清楚吗？:-)）。我想从数据源中读取一个集合。我希望使用正确的、预期的类型键入该集合。所以假设我调用方法`readData`。因为我知道预期的类型，所以我给它一个预期类型的​​类型参数。例如，假设 Array[Int]。它可以是 Array[String] 或 Iterable[Any] 或只是 Null 或其他。当。。。的时候`readData`方法被调用时，我想将给定的预期类型 (Array[Int]) 与从外部源读取的数据的类型相匹配。如果找到的类型与我们期望的类型相同或子类型，则可以转换并返回数据。如果不是，则抛出异常，通知用户找到的数据不是预期的类型。所以总结一下：我如何打电话`readData[Array[Int]]`上班？

编辑：我通过创建 Array[Any] 解决了这个问题，检索预期类型（上面的 X）并迭代数组以查看元素是否与 X 的类型（或子类型）相同。如果是，我们可以安全地转换为数组 [X]。在下面的示例中，预期的类型由 E 表示。我知道这很 hackish，但同样：我很乐意看到替代方案......

```
// Matches if the type of o corresponds (<:<) to the type of x
def verifyType(o : Any, x : Type) : Boolean = { ... } 

// Get the type of the array parameter (X)
val tpe = reflect.runtime.universe.typeOf[E] tpe match {  
  // The returned Type is not an instance of universe.Type - hence the cast              
  case TypeRef(_, _, args) => args.asInstanceOf[List[Type]] 
  case _ => throw new IllegalArgumentException("Could not find type parameters in type " + tpe)
} 

// Iterate the array and make sure the types match
val hasWrongType = array.exists(e => !verifyType(e, tpe))

if (hasWrongType) throw new Exception(...) // The types does not fit
else array.asInstanceOf[E] // We can safely cast 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:45:12.160

您实际上并不需要 Scala 2.10 中的任何新内容来执行此操作，尽管`ClassManifest`您使用替换而不是早期版本，`ClassTag`：

```
def makeArray[T : reflect.ClassTag](length: Int): Array[T] = {
  val tTag = implicitly[reflect.ClassTag[T]]
  tTag.newArray(length)
} 
```

在 REPL 中：

```
scala> makeArray[String](5)
res0: Array[String] = Array(null, null, null, null, null) 
```

使用原始类型：

```
scala> makeArray[Int](5)
res1: Array[Int] = Array(0, 0, 0, 0, 0) 
```

**编辑**：拿两个：

```
def makeArrayLike(a: Array[_], length: Int): Array[_] = {
  val cA = a.getClass
  val cC = cA.getComponentType
  java.lang.reflect.Array.newInstance(cC, length).asInstanceOf[Array[_]]
} 
```

在 REPL 中：

```
scala> val ai1 = Array[Int](1, 2, 3)
ai1: Array[Int] = Array(1, 2, 3)

scala> val as1 = Array[String]("one", "two", "three")
as1: Array[String] = Array(one, two, three)

scala> makeArrayLike(as1, 5)
res0: Array[_] = Array(null, null, null, null, null)

scala> makeArrayLike(ai1, 5)
res1: Array[_] = Array(0, 0, 0, 0, 0) 
```

# java - Android应用程序一启动就崩溃

> ID：14638144
> 
> 赞同：0
> 
> 时间：2013-02-01T01:14:11.193
> 
> 标签：java, android, crash, double, calculator

如果这是一个愚蠢的问题，那么我道歉：

这是我第一次尝试制作一个安卓应用程序，由于某种原因这不会启动。它总是在我单击它时立即关闭关于可能出现问题的任何想法？我迷路了。

```
package weight.Lifting.stuff;
import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;
import android.view.View;
public class MainActivity extends Activity 
{   
TextView weight100, weight95, weight90, weight85, weight80, weight75, weight70, weight65, weight60;
    EditText enterWeight, enterReps;

    double Weight=1,Reps=1,a=1,b=1,c=1,d=1,e=1,f=1,g=1,h=1,i=1,A=.95,B=.90,C=.85,D=.80,E=.75,F=.70,G=.65,H=.60,I=.333;

    @Override
    public void onCreate(Bundle savedInstanceState){ 

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_activity__lifting);

        weight100 = (TextView) findViewById (R.id.textView3);
        weight95 = (TextView) findViewById (R.id.textView8);
        weight90 = (TextView) findViewById (R.id.textView9);
        weight85 = (TextView) findViewById (R.id.textView10);
        weight80 = (TextView) findViewById (R.id.textView11);
        weight75 = (TextView) findViewById (R.id.textView12);
        weight70 = (TextView) findViewById (R.id.textView15);
        weight65 = (TextView) findViewById (R.id.textView16);
        weight60 = (TextView) findViewById (R.id.textView17);

        enterWeight = (EditText) findViewById (R.id.editText1);
        enterReps = (EditText) findViewById (R.id.editText2);
    }

            public void onButton1Click (View v)
            {

                Weight = Double.parseDouble(enterWeight.getText().toString());
                Reps = Double.parseDouble(enterReps.getText().toString());

                a = ((Weight*I*Reps)+Weight);
                b = ((Weight*I*Reps)+Weight)*A;
                c = ((Weight*I*Reps)+Weight)*B;
                d = ((Weight*I*Reps)+Weight)*C;
                e = ((Weight*I*Reps)+Weight)*D;
                f = ((Weight*I*Reps)+Weight)*E;
                g = ((Weight*I*Reps)+Weight)*F;
                h = ((Weight*I*Reps)+Weight)*G;
                i = ((Weight*I*Reps)+Weight)*H;

                weight100.setText(Double.toString(a));
                weight95.setText(Double.toString(b));
                weight90.setText(Double.toString(c));
                weight85.setText(Double.toString(d));
                weight80.setText(Double.toString(e));
                weight75.setText(Double.toString(f));
                weight70.setText(Double.toString(g));
                weight65.setText(Double.toString(h));
                weight60.setText(Double.toString(i));
            }
    } 
```

这是我的xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity_Lifting" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Enter Weight:" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/textView2"
        android:layout_below="@+id/textView1"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1"
        android:text="Enter Reps:" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/textView2"
        android:layout_below="@+id/textView2"
        android:ems="10" />

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText2"
        android:focusableInTouchMode="true"
        android:gravity="center_vertical|center_horizontal|left"
        android:onClick="onButton1Click"
        android:text="Calculate"
        android:textSize="10sp" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/editText1"
        android:layout_marginLeft="58dp"
        android:layout_toRightOf="@+id/editText1"
        android:text="95% (3 reps)" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/editText2"
        android:layout_alignLeft="@+id/textView4"
        android:text="90% (5 reps)" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView5"
        android:layout_alignTop="@+id/editText2"
        android:text="85% (6 reps)" />

    <TextView
        android:id="@+id/textView100"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView4"
        android:layout_alignRight="@+id/textView4"
        android:text="100% (1 rep)" />

    <TextView
        android:id="@+id/textView14"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView13"
        android:layout_below="@+id/textView13"
        android:text="70% (12 reps)" />

    <TextView
        android:id="@+id/textView18"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView14"
        android:layout_below="@+id/textView14"
        android:text="65% (15 reps)" />

    <TextView
        android:id="@+id/textView19"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView100"
        android:layout_below="@+id/textView18"
        android:text="60% (20 reps)" />

    <TextView
        android:id="@+id/textView13"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView7"
        android:layout_below="@+id/editText2"
        android:text="75% (10 reps)" />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView100"
        android:layout_below="@+id/textView6"
        android:text="80% (8 reps)" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView100"
        android:layout_alignBottom="@+id/textView100"
        android:layout_toRightOf="@+id/textView7"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView3"
        android:layout_toRightOf="@+id/textView4"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView3"
        android:layout_below="@+id/textView4"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView6"
        android:layout_alignBottom="@+id/textView6"
        android:layout_alignLeft="@+id/textView8"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView6"
        android:layout_toRightOf="@+id/textView7"
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView11"
        android:layout_toRightOf="@+id/textView13"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView15"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView12"
        android:layout_below="@+id/textView13"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView16"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView18"
        android:layout_alignBottom="@+id/textView18"
        android:layout_alignLeft="@+id/textView15"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView17"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView19"
        android:layout_alignBottom="@+id/textView19"
        android:layout_alignLeft="@+id/textView16"
        android:text="TextView" />

</RelativeLayout> 
```

*编辑*添加的清单 xml 和日志 cat

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="weight.Lifting.stuff"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:debuggable="true">
        <activity
            android:name="weight.Lifting.stuff.MainActivity_Lifting"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

LogCat 输出：

```
02-01 01:49:15.962: W/Trace(785): Unexpected value from nativeGetEnabledTags: 0
02-01 01:49:15.962: W/Trace(785): Unexpected value from nativeGetEnabledTags: 0
02-01 01:49:15.983: W/dalvikvm(785): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-01 01:49:16.003: E/AndroidRuntime(785): FATAL EXCEPTION: main
02-01 01:49:16.003: E/AndroidRuntime(785): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{weight.Lifting.stuff/weight.Lifting.stuff.MainActivity_Lifting}: java.lang.ClassNotFoundException: Didn't find class "weight.Lifting.stuff.MainActivity_Lifting" on path: /data/app/weight.Lifting.stuff-1.apk
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.os.Looper.loop(Looper.java:137)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-01 01:49:16.003: E/AndroidRuntime(785):  at java.lang.reflect.Method.invokeNative(Native Method)
02-01 01:49:16.003: E/AndroidRuntime(785):  at java.lang.reflect.Method.invoke(Method.java:511)
02-01 01:49:16.003: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-01 01:49:16.003: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-01 01:49:16.003: E/AndroidRuntime(785):  at dalvik.system.NativeStart.main(Native Method)
02-01 01:49:16.003: E/AndroidRuntime(785): Caused by: java.lang.ClassNotFoundException: Didn't find class "weight.Lifting.stuff.MainActivity_Lifting" on path: /data/app/weight.Lifting.stuff-1.apk
02-01 01:49:16.003: E/AndroidRuntime(785):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-01 01:49:16.003: E/AndroidRuntime(785):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-01 01:49:16.003: E/AndroidRuntime(785):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
02-01 01:49:16.003: E/AndroidRuntime(785):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:26:24.167

当您尝试使用这些`parseDouble`方法时，它们可能会引发异常，因为您的 EditText 字段是空的/用字符串填充。但下一次，请显示 logcat :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:35:32.373

我重新创建了您的项目，它编译并运行没有问题。检查您的 AndroidManifest.xml 是否有问题。考虑将其与您的 LogCat 输出一起发布。

# linux - 如何找到 AM_MAKEFLAGS 的值？

> ID：14638145
> 
> 赞同：1
> 
> 时间：2013-02-01T01:14:17.433
> 
> 标签：linux, makefile, automake

我正在尝试构建一个我不熟悉的软件包，它使用我也不熟悉的 automake。各种 Makefile 到处都有宏 $(AM_MAKEFLAGS)。我需要知道这个宏中有什么。我已经 grepped 和 grepped 并且找不到它的定义位置。这是否意味着 AM_MAKEFLAGS 为空白？还是 automake 通常把它放在我永远不会想到的地方？底线：如果我在任何地方都找不到它的定义，我怎么知道里面有什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:59:33.313

调用时`make`，您可以使用命令行参数`-p`或`--print-data-base`让它打印它遇到的所有规则和变量的值。将输出重定向到文件并`AM_MAKEFLAGS`在该文件中搜索将显示变量是否已定义，如果已定义，其值是什么。有关一些额外信息，请参阅第[9.7 节选项摘要。](http://www.gnu.org/software/make/manual/html_node/Options-Summary.html#Options-Summary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:00:30.573

首先，请注意，很少有必要也不需要查看模板中`Makefile.in`的 automake 生成的或`Makefile`configure（通过 config.status）构建的。`Makefile.in`这些不打算用于人类消费。阅读它们类似于查看编译器生成的机器代码而不是原始源代码。

`AM_MAKEFLAGS`是一种机制，包维护者基本上可以通过该机制将文本附加到`MAKEFLAGS`. 每次调用都`make`将`AM_MAKEFLAGS`作为参数调用。它（非常）经常未定义，可以忽略。如果维护者确实选择定义它，定义将是 in `Makefile.am`，并且提供定义的行将`Makefile.in`被 automake 简单地逐字复制。

# javascript - Textarea 自动完成 - 使用 JavaScript 将文本输入定位在 textarea 的光标位置之上

> ID：14638146
> 
> 赞同：0
> 
> 时间：2013-02-01T01:14:18.973
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有一个问题我需要帮助...

我想创建一个自动完成字段，如果有人键入“@”，他们会得到一个自动完成的姓名列表。

我正在使用 jQueryUI 自动完成，我的解决方案（[http://jsfiddle.net/aUfrz/22/](http://jsfiddle.net/aUfrz/22/)）的唯一问题是需要将可自动完成的文本输入放在 textarea 光标位置而不是在当前位置的右侧。

这是我在 JSFiddle 中的 JS：

```
$(document.body).on('keypress', 'textarea', function(e) {
   var names = [
        "johnny",
        "susie",
        "bobby",
        "seth"
    ],
    $this=$(this),
    char = String.fromCharCode(e.which);

    if(char == '@') {
       console.log('@ sign pressed');
       var input=$('<input style="position:relative; top:0px; left:0px;background:none;border:1px solid red" id="atSign" >');
       $this.parent().append(input);
       input.focus();
       input.autocomplete({
        source: names,
        select: function (event, ui) {
            console.log('value selected'+ui.item.value);
            //$this.val('@'+ui.item.value);
            $this.insertAtCaret(ui.item.value);
            $this.focus();
            input.remove();
        } //select
    });  //autocomplete
  } //if 
}); // keypress 
```

HTML：

```
<textarea></textarea>​ 
```

请注意，我没有在此处显示用于在插入符号位置插入所选自动完成建议的 jQuery 插件：`insertAtCaret()`我在[另一个 SO question](https://stackoverflow.com/questions/946534/insert-text-into-textarea-with-jquery/946556#946556)中找到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:55:19.987

没有跨浏览器的方法来检索文本区域插入符号位置的屏幕坐标。

IE 有选择对象，我相信您可以获得 X/Y 坐标来放置您的自动完成输入元素 - 但这不适用于任何其他浏览器。

我从未见过带有自动完成小部件的文本区域小部件，它与您输入的文本内联显示 - 它只是不实用，并且不适用于所有浏览器。

您也许可以创建一个自定义富文本编辑器，该编辑器使用 iframe 并使用 content editable 标志 - 但要确保它看起来像一个常规文本区域将非常困难（因为复制粘贴会粘贴格式，这可能是你不想要的）。

将自动完成框放置在文本区域旁边（在某侧，可能在它下方？）似乎是您最好的选择。

# ios - 当更新版本已经在内存中时，强制核心数据从以前存储的版本刷新 NSManagedObject

> ID：14638148
> 
> 赞同：3
> 
> 时间：2013-02-01T01:14:39.757
> 
> 标签：ios, core-data

在我正在编写的基于文档的 iOS 应用程序中，我无法强制 Core Data 刷新我的一些 NSManagedObject 子类。

问题在于处理用户加载第二个文档而当前文档中有未保存的更改的情况。此时，如果用户再次加载第一个文档，则显示未保存的更改。使用文档根对象的 NSFetchRequest 加载文档。此获取请求的属性`-setShouldRefreshRefetchedObjects:`设置为`YES`并且属性 `-setIncludesPendingChanges:`设置为`NO`我确定它们没有被保存到持久存储中，因为终止应用程序并重新启动它会导致显示原始未更改的文档。另外，我打开了 SQL 调试，它显示应用程序第二次没有从相关表中获取

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-15T04:52:36.417

我知道这个问题已经回答了，但是使用方法 refreshObject:mergeChanges: NSManagedObjectContext 呢？

请参阅[NSManagedObject 类参考 refreshObject:mergeChanges:](https://developer.apple.com/documentation/coredata/nsmanagedobjectcontext/1506224-refreshobject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:52:43.020

[此链接](http://www.section42.de/coredata-how-to-revert-a-managed-object-to-its-original-state/)可能会对您有所帮助，它添加了一个用于恢复对 NSManagedObject 的更改的类别。祝你好运。

```
#import "NSManagedObject+RevertChanges.h"

@implementation NSManagedObject (NSManagedObject_RevertChanges)

- (void) revertChanges {
    // Revert to original Values
    NSDictionary *changedValues = [self changedValues];
    NSDictionary *committedValues = [self committedValuesForKeys:[changedValues allKeys]];
    NSEnumerator *enumerator;
    id key;
    enumerator = [changedValues keyEnumerator];

    while ((key = [enumerator nextObject])) {
        NSLog(@"Reverting field ""%@"" from ""%@"" to ""%@""", key, [changedValues objectForKey:key], [committedValues objectForKey:key]);
        [self setValue:[committedValues objectForKey:key] forKey:key];
    }
} 
```

# sql - Oracle 查询查找日期间隔，比较日期范围的间隔

> ID：14638154
> 
> 赞同：0
> 
> 时间：2013-02-01T01:14:53.750
> 
> 标签：sql, oracle

如何编写查询以查找以下数据空白。

--Scenario1 -- Query1 --在同一个表中查找间隙（例如 tableb ）

```
ID      EFF_DT                                  TERM_DT 
800    6/15/2012 12:00:00.000 AM    10/14/2012 12:00:00.000 AM      -- GAP 
800    10/16/2012 12:00:00.000 AM    11/14/2012 12:00:00.000 AM
800    11/15/2012 12:00:00.000 AM    12/31/9999 12:00:00.000 AM 
```

--Scenario2 -- Query2 --查找 2 个表之间的不匹配项 (tablea , tableb )

```
-- tablea  , sample data below 
ID      EFF_DT                                  TERM_DT 
400    6/15/2012 12:00:00.000 AM    10/14/2012 12:00:00.000 AM      
400    11/15/2012 12:00:00.000 AM    12/31/9999 12:00:00.000 AM

500    6/15/2012 12:00:00.000 AM    10/14/2012 12:00:00.000 AM      
500    10/15/2012 12:00:00.000 AM    11/14/2012 12:00:00.000 AM      
500    11/15/2012 12:00:00.000 AM    12/31/9999 12:00:00.000 AM

-- tableb, sample data below 
ID      EFF_DT                                  TERM_DT 
400    6/15/2012 12:00:00.000 AM    10/13/2012 12:00:00.000 AM      -- mismatch 
400    11/15/2012 12:00:00.000 AM    12/31/9999 12:00:00.000 AM

500    6/15/2012 12:00:00.000 AM    11/14/2012 12:00:00.000 AM      
500    11/15/2012 12:00:00.000 AM    12/31/9999 12:00:00.000 AM

-- Note 400 is a mismatch since ranges are different in both tables, 500 is okay (even though rows are split they still match )
-- Need to identify ID 400 
```

这些表有时有 1/1/1753 的低日期和 12/31/9999 的高日期。

尝试了以下查询，但它在第一种情况下会引发 oracle 错误。[ ORA-01841：（完整）年份必须介于 -4713 和 +9999 之间，并且不能为 0 ]

```
SELECT ID, TERM_DT AS gap_lower_bound, next_date AS gap_upper_bound
  FROM (SELECT t.*,
               LEAD (EFF_DT)
                  OVER (PARTITION BY ID ORDER BY EFF_DT)
                  next_date
          FROM TABLEB t)
 WHERE                                      -- trim(next_date) is not null and
      next_date > TERM_DT + 1 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:50:58.747

对于 Scenario1，让我们取样，

```
 ID    EFF_DT         TERM_DT 
____________________________________
    800 15-JUN-12   14-OCT-12 --GAP
    800 16-OCT-12   14-NOV-12
    800 15-NOV-12   31-DEC-12
    800 01-JAN-13   01-FEB-13  --GAP
    800 03-FEB-13   01-MAR-13 
```

查询可能是

```
 SELECT term_dt
FROM
     (SELECT t.*,
          lead(eff_dt,1) OVER (ORDER BY eff_dt) AS next_date
     FROM lead_test t
     )
WHERE term_dt+1<>next_date; 
```

结果：

```
 term_dt
__________
14-OCT-12
01-FEB-13 
```

对于方案2：

`select to_date('12/31/9999', 'mm/dd/yyyy')+1 from dual;`抛出相同的错误。，

`ORA-01841`由于您使用的 where 子句中的条件，您会遇到错误`TERM_DT + 1`，因此最好更改/减少 . 中的值`12/31/9999`，

# java - Google Play 过滤器可以基于操作系统吗

> ID：14638155
> 
> 赞同：0
> 
> 时间：2013-02-01T01:15:21.857
> 
> 标签：java, android, google-play

我开发了一个仅适用于 Jelly Bean（而不是 ICS）的应用程序。Google Play 是否会阻止 ICS 设备下载我的应用程序？

如果同一设备具有差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:17:55.650

您可以参考[Play Store 上的此过滤器](http://developer.android.com/google/play/filters.html)，您可以尝试通过添加`AndroidManifest.xml`这些值来尝试。

```
<uses-sdk android:minSdkVersion="integer" 
          android:targetSdkVersion="integer"
          android:maxSdkVersion="integer" /> 
```

对于 Jelly Bean，`minSdkVersion`应该是 16，然后 Google Play 会自动过滤它。你可以参考[这里](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:19:13.727

清单中的 minSdkVersion 属性。[安卓sdk版本](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:19:58.380

在您的 AndroidMainifest.xml 文件中，您应该将 minimun sdk 声明为 16。

```
android:minSdkVersion="16" 
```

# algorithm - 在渐近符号中，给定 g(n)，O(g(n)) 和 Ω(g(n)) 的并集是否是所有函数的全集 U？

> ID：14638157
> 
> 赞同：2
> 
> 时间：2013-02-01T01:15:24.533
> 
> 标签：algorithm, big-o

似乎是的。任何直观或严肃的证据都值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:30:09.463

不。

我认为您的问题与此等价：给定函数 f 和 g，f 是 O(g) 还是 g 是 O(f) 是否总是正确的？这在 SE 计算机科学问题中得到了回答，[这些函数是否总是渐近可比的？](https://cs.stackexchange.com/questions/1780/are-the-functions-always-asymptotically-comparable). 如果 f 和 g 不能通过 big-O 进行比较，则 f 不在 O(g) 中，f 也不在 big-Omega(g) 中。

例如，以上面 SE 问题的最高答案：定义 f(n) = n，并定义 g(n) = 1（如果 n 是奇数），n^2（如果 n 是偶数）。不管你走多远，有时 f 比 g 大得多，有时 g 比 f 大得多。所以 f 既不在 O(g) 也不在 big-Omega(g) 中。

# javascript - javascript代码执行和ajax异步

> ID：14638158
> 
> 赞同：0
> 
> 时间：2013-02-01T01:15:26.773
> 
> 标签：javascript, jquery, ajax, mvvm

我已经阅读了有关函数表达式与声明、回调、提升的分配，并且我对其中的大部分内容有了大致的了解，但我想由于下面的代码，我不能完全掌握这个概念，让我发布代码然后问真正的问题。

```
 var url = "beverages.txt";

   var GridModel = function () {
        this.items = ko.observableArray();
        var me = this;
        $.ajax({
            datatype: 'json',
            url: "beverages.txt"
        }).done(function (data) {
            debugger;
            var jsonData = $.parseJSON(data);
            me.items(jsonData);
        });
    };

    var model = new GridModel();

    // prepare the data
    var source =
    {
        datatype: "observablearray",
        datafields: [
            { name: 'name' },
            { name: 'type' },
            { name: 'calories', type: 'int' },
            { name: 'totalfat' },
            { name: 'protein' },
        ],
        id: 'id',
        localdata: model.items
    };

    var dataAdapter = new $.jqx.dataAdapter(source);

    $("#grid").jqxGrid(
    {
        width: 670,
        source: dataAdapter,
        theme: 'classic',
        columns: [
          { text: 'Name', datafield: 'name', width: 250 },
          { text: 'Beverage Type', datafield: 'type', width: 250 },
          { text: 'Calories', datafield: 'calories', width: 180 },
          { text: 'Total Fat', datafield: 'totalfat', width: 120 },
          { text: 'Protein', datafield: 'protein', minwidth: 120 }
        ]
    });

    ko.applyBindings(model);
}); 
```

好的，所以这段代码工作正常，它通过 var model = new GridModel(); 调用 ajax 请求。问题是，如果我添加一个调试器；var model = new GridModel(); 之后的语句 它失败。此外，ajax 请求中的调试器语句不会触发，但是如果我在 var model = new GridModel(); 之后删除调试器语句 然后 ajax 触发，我可以调试请求。为什么附加调试器会失败，是因为 var GridModel 是一个表达式。

基本上我想做的是创建一个我可以调用的声明函数，当ajax请求完成时我返回observableArray我。如果我改变这样的功能

```
 function GridModel (param1,param2) {
            this.items = ko.observableArray();
            var me = this;
            $.ajax({
                datatype: 'json',
                url: "beverages.txt"
            }).done(function (data) {
                debugger;
                var jsonData = $.parseJSON(data);
                me.items(jsonData);
            });
            return me
        }; 
```

然后我希望能够像这样调用该函数 var myitems = GridModel(param1,param2) 期望 myitems 现在将保存 ajax 请求的结果。我只是不完全理解代码执行流程是如何工作的，如果有人能解释为什么底部功能不起作用以及如何让它工作，我将不胜感激。

谢谢，丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:28:11.263

如果您有一个异步操作（如 Ajax 请求），并且其他一切都取决于其结果，**请从回调恢复您的程序流程**。您不能使用`return`语句，它仅适用于同步代码。

您可能需要修改`GridModel`构造函数以将回调作为参数：

```
var GridModel = function (callback) {
    this.items = ko.observableArray();
    $.ajax({
        datatype: 'json',
        url: "beverages.txt"
    }).done(callback);
}; 
```

然后从回调内部恢复您的程序流程：

```
function resumeMyProgramFlow(data) {
    // Now you can use the data, resume flow from here
    debugger;
    var jsonData = $.parseJSON(data);
    model.items(jsonData);
    // etc.
} 
```

并像这样实例化`GridModel`：

```
var model = new GridModel(resumeMyProgramFlow); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:37:40.087

返回时`$.ajax(...).done(...)`，程序流程继续。

但是 ajax 调用还没有完成，因为它在后台向服务器发送数据并等待响应。这是异步部分。当响应最终从服务器到达时，`.done(...)`执行部分

```
function (data) {
    debugger;
    var jsonData = $.parseJSON(data);
    me.items(jsonData);
} 
```

这是处理返回数据的位置和时间。

您所描述的`var myitems = GridModel(param1,param2)`是一种*同步*方法。它调用服务器停止进一步处理并*等待*响应。

虽然这是可能的，但它也会阻塞整个程序流程。这就是为什么 ajax 调用是异步的并且响应在回调函数中处理的原因。

您想要同步执行的操作

```
var myitems = GridModel(param1,param2);
// do something with myitems 
```

以这种方式异步完成

```
$.ajax(...).done(function(data) {
    // 1\. do something with myitems
});

// 2\. this will run usually *before* number 1\. above 
```

# c++ - 创建一个布尔函数来确定两个数组是否是等价的

> ID：14638160
> 
> 赞同：1
> 
> 时间：2013-02-01T01:15:27.960
> 
> 标签：c++, function, boolean, dynamic-arrays, boolean-expression

两个数组：

```
a[] = {1 2 3 4}
b[] = {3 4 1 2} 
```

底部数组只是顶部数组向右移动了两个位置。如果顶部数组可以右移以创建底部数组，我们称它们为等价移位。

这是我尝试创建一个函数（我需要使用布尔函数）来确定两个数组是否“移位等效”：

```
#include <iostream>
using namespace std;

bool equivalent(int a[], int b[], int size) {

    int value; // if 1 returns as truth
    int k; // counter to compare both arrays

    for (int j = 0; j <= size; j++) {
        for (int i = 0; i <= size; i++) {
            a[i] = a[i + j];
        }
    }

    for (k = 0; k <= size; k++) {
        if (a[k] != b[k]) {
            value = 0;
        } else value = 1;
    }

    return (value == 1);
}

int main() {
    int n;
    cout << "Please input a size " << endl;
    cin >> n;

    int *mtrx = new int[n];
    int *mtrx1 = new int[n];
    int x;
    for (x = 0; x < n; x++) {
        cout << "Please make entries for the first array: " << endl;
        cin >> mtrx[x];
    }
    x = 0;
    for (x = 0; x < n; x++) {
        cout << "Please make entries for the 2nd array: " << endl;
        cin >> mtrx1[x];
    }

    bool answr = equivalent(mtrx, mtrx1, n = n - 1);

    if (answr) {
        cout << "They are shift equivalent." << endl;
    } else {
        cout << "They are not shift equivalent." << endl;
    }

    delete[] mtrx;
    delete[] mtrx1;

    system("PAUSE");
    return 0;
} 
```

当我执行我的程序时，我使用`array1 = {1 2 3}`and`array2 = {3 1 2}`来测试班次等价性。他们应该是，但我的程序说他们不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T01:20:38.993

One problem which I see in your code is that you access memory beyond the array. If you add two indices, you have to make sure that they "wrap around" if you want to treat your array cyclic. This can be done with a modulo. Instead of

```
a[i + j] 
```

you should write

```
a[(i + j) % size] 
```

I'd split your algorithm into two parts: First, write a function which tests if `a` equals `b` with a shift of `shift`. Then, within a second function (the final `equivalent` function), test for all possible values for `shift`.

```
bool equivalentFixed(int a[], int b[], int size, int shift) {
    for (int i = 0; i < size; ++i) {
        if (a[i] != a[(i + shift) % size])
            return false;
    }
    return true;
}

bool equivalent(int a[], int b[], int size) {
    for (int shift = 0; shift < size; ++shift) {
        if (equivalentFixed(a, b, size, shift))
            return true;
    }
    return false;
} 
```

If you look close, you don't see any local variable to hold (store) the value if the arrays are equivalent. Indeed, your code has a problem here, too, since you always overwrite the old status with the new one for each single entry you compare. So if the comparison fails anywhere during scanning the arrays, but the very last entry compares to equal, you return "yes, they are equal", since you have overwritten the status.

Now have a look at my `equivalent` implementation. I scan for different offsets (`shift`) if the arrays compare equal. Let's focus on this function, not how the comparison is done in the other function. The point is: We have to return true if for *any* shift they compare equal, not for *the last* one and not for *all*.

The idea to solve this is to break the loop (stop) if you found a solution. You can even return the whole function, since you know the complete return value, namely `true`.

If for no possible shift the comparison is true, we didn't find any possible shift, so they aren't "shift equivalent".

I used a very similar approach to implement the comparison of two arrays with a fixed shift (`equivalentFixed`). Can you explain how this is done?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:20:10.300

here you get `i+j>size`

```
a[i]=a[i+j]; 
```

And here just a litte variation to make the whole in only one function: (this is a rare case when it is good to use a dynosaur goto - to get out of an internal loop, whithout introducing new temporal variables)

```
#include <iostream>
using namespace std;

bool equivalent(int a[], int b[], int size) 
{
    for (int j = 0; j < size; j++) 
    {
        for (int i = 0; i < size; i++) 
        {
            if (a[i] != b[(i + j)%size]) goto next_shift;
        }
        return true;
        next_shift: ;
    }
    return false;
}

int main() {
    int n;
    cout << "Please input a size " << endl;
    cin >> n;

    int *mtrx = new int[n];
    int *mtrx1 = new int[n];
    int x;
    for (x = 0; x < n; x++) {
        cout << "Please make entries for the first array: " << endl;
        cin >> mtrx[x];
    }
    x = 0;
    for (x = 0; x < n; x++) {
        cout << "Please make entries for the 2nd array: " << endl;
        cin >> mtrx1[x];
    }

    bool answr = equivalent(mtrx, mtrx1, n );

    if (answr) {
        cout << "They are shift equivalent." << endl;
    } else {
        cout << "They are not shift equivalent." << endl;
    }

    delete[] mtrx;
    delete[] mtrx1;

    system("PAUSE");
    return 0;
} 
```

**EDIT:** From:The C+ + Programming Language. Third Edition. Bjarne Stroustrup

> **6.3.4 Goto [expr.goto]** C++ possesses the infamous g o t o :

```
goto identifier ;
identifier : statement 
```

> The g o t o has few uses in general highlevel programming

…</p>

> One of the few sensible uses of `goto` in ordinary code is to break out from a nested loop or switch statement (a `break` breaks out of only the innermost enclosing loop or switchstatement).
> 
> For example:

```
voidf ()
{
int i ;
int j ;
for (i = 0 ; i <n ; i ++)
for (j = 0 ; j <m ; j ++) i f (nm [i ][j ] == a ) goto found ;
// not found
// ...
found :
// nm[i][j] == a
} 
```

# html - 如何阻止表格调整大小以适应屏幕？

> ID：14638162
> 
> 赞同：1
> 
> 时间：2013-02-01T01:15:41.827
> 
> 标签：html, css, html-table, resize

我试图将宽度设置为特定值（1300px）并且它不会改变任何东西......

我从其他人那里得到了这段代码，我是初学者，所以请在这里帮助我。提前致谢。

以下是代码：单击 Next Iteration！直到添加的列超出您的窗口范围。你会明白我的意思。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<SCRIPT LANGUAGE="JavaScript"> function addCell(start, end) { counter = 0;for (i= 0; i< document.getElementById("Table").rows.length; i++){ if (document.getElementById("Table").rows[i].cells[0].innerHTML != ""){counter++;}if (start<=counter && counter<=end && document.getElementById("Table").rows[i].cells[1].innerHTML != "" && document.getElementById("Table").rows[i].cells[1].innerHTML != "Variable Values"){var x = document.getElementById("Table").rows[i].insertCell(-1); x.innerHTML = document.getElementById("Table").rows[i].cells[1].innerHTML;}}}
function deleteCell(start, end) {counter = 0; for (i= 0; i< document.getElementById("Table").rows.length; i++){if (document.getElementById("Table").rows[i].cells[0].innerHTML != ""){counter++;}if (start<=counter && counter<=end && document.getElementById("Table").rows[i].cells[1].innerHTML != ""){if (document.getElementById("Table").rows[i].cells[1].innerHTML != "Variable Values"){if (document.getElementById("Table").rows[i].cells.length>2){document.getElementById("Table").rows[i].deleteCell(-1);}}}}}</SCRIPT>
<title>Tracing Table</title>
<link href="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>
<style type="text/css">
ol.nested {
counter-reset: item}
li.nested {display: block}
li.nested:before {
content: counters(item, ".") ". ";
counter-increment: item}
.mainimage { max-width: 100%}
.thumbnail {position: relative;z-index: 0;}
.thumbnail:hover {background-color: transparent; z-index: 50;}
.thumbnail span { position: absolute;visibility: hidden;color: black;text-decoration: none;}
.thumbnail span img { border-width: 0;}
.thumbnail:hover span { visibility: visible;top: 0; left: 60px;}
table {font-family: arial, sans;border-collapse: collapse;table-layout: fixed;}
table .var {width: 100%;}
table .stm {width: auto;}
th,td {border: 2px solid black; padding: 5px;}
td.left {text-align: left;}
tr.header th {background-color: #C3D9FF;color: black;}
tr.variables td {background-color: #F9F9F9;color: black;}
tr.statement td {background-color: #E5ECF9;color: black;font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New",Courier, monospace;ont-size: 1em !important;white-space: nowrap;}
td.bg {background-image: url(images/lab-icon.png);background-repeat: no-repeat;background-size: auto;background-position: center;}
td a:hover img,a:hover span {background-color: #3CB4F6;}
textarea {resize: both;height: 15px;overflow: auto;}
 </style>
</head>
<body onload="prettyPrint()">
<h1>Tracing Table</h1>
<hr />
<table id="Table">
<tr class = "header">
<th>Statement</th>
<th>Variable Values</th>
</tr>
<tr class="statement">
<td><code class="prettyprint">public class Test {
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">public static void main(String[] args) {
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">int a = 0; 
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">System.out.println("import ");
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">ArrayList&ltInteger&gt list = new ArrayList&ltInteger&gt();
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">while (a &lt 1) {
<button type="button" onclick="addCell(7,17)"><span class="nocode">Next Iteration!</span></button>
<button type="button" onclick="deleteCell(7,17)"><span class="nocode">Go back!</span></button>
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">for (int x = 0; x &lt 5; x++) {
<button type="button" onclick="addCell(8,16)"><span class="nocode">Next Iteration!</span></button>
<button type="button" onclick="deleteCell(8,16)"><span class="nocode">Go back!</span></button>
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">for (int y = 0; y &lt 5; y++) {
<button type="button" onclick="addCell(9,14)"><span class="nocode">Next Iteration!</span></button>
<button type="button" onclick="deleteCell(9,14)"><span class="nocode">Go back!</span></button>
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
<br>y = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">for (int z = 0; z &lt 5; z++) {
<button type="button" onclick="addCell(10,12)"><span class="nocode">Next Iteration!</span></button>
<button type="button" onclick="deleteCell(10,12)"><span class="nocode">Go back!</span></button>
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
<br>y = <textarea cols="30" rows="1"></textarea>
<br>z = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">a++;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
<br>y = <textarea cols="30" rows="1"></textarea>
<br>z = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">y++;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
<br>y = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">x++;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">a++;}
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">list.add(a);
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">boolean ok = list.add(a);
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>ok = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">insert(list, a, 2);
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>a = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
<br>list = <textarea cols="30" rows="1"></textarea>
<br>ok = <textarea cols="30" rows="1"></textarea>
<br>2 = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">private static void insert(ArrayList&ltInteger&gt list, int a, int n) {
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>list = <textarea cols="30" rows="1"></textarea>
<br>a = <textarea cols="30" rows="1"></textarea>
<br>n = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">while (true)
<button type="button" onclick="addCell(23,30)"><span class="nocode">Next Iteration!</span></button>
<button type="button" onclick="deleteCell(23,30)"><span class="nocode">Go back!</span></button>
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">{
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">int kk = 22;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>list = <textarea cols="30" rows="1"></textarea>
<br>a = <textarea cols="30" rows="1"></textarea>
<br>n = <textarea cols="30" rows="1"></textarea>
<br>kk = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">while(true)
<button type="button" onclick="addCell(26,27)"><span class="nocode">Next Iteration!</span></button>
<button type="button" onclick="deleteCell(26,27)"><span class="nocode">Go back!</span></button>
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">{int mn = 2, ll = 3; break;}
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>list = <textarea cols="30" rows="1"></textarea>
<br>a = <textarea cols="30" rows="1"></textarea>
<br>n = <textarea cols="30" rows="1"></textarea>
<br>kk = <textarea cols="30" rows="1"></textarea>
<br>mn = <textarea cols="30" rows="1"></textarea>
<br>ll = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">System.out.println();
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>list = <textarea cols="30" rows="1"></textarea>
<br>a = <textarea cols="30" rows="1"></textarea>
<br>n = <textarea cols="30" rows="1"></textarea>
<br>kk = <textarea cols="30" rows="1"></textarea>
<br>System.out = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">break;
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">list.add(a);
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>list = <textarea cols="30" rows="1"></textarea>
<br>a = <textarea cols="30" rows="1"></textarea>
<br>n = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">public static void main2(String[] args) {
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">SimpleWriter out = new SimpleWriter1L();
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">final int[] values = { 8, -4, 3, 0, -5 };
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">int i = 0;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">while (i &lt values.length) {
<button type="button" onclick="addCell(37,48)"><span class="nocode">Next Iteration!</span></button>
<button type="button" onclick="deleteCell(37,48)"><span class="nocode">Go back!</span></button>
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">int remainder = values[i] % 2;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
<br>remainder = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">if (remainder == 1) {
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">out.println("odd");
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
<br>remainder = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">int x = 2;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
<br>remainder = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">int z = 3;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
<br>remainder = <textarea cols="30" rows="1"></textarea>
<br>x = <textarea cols="30" rows="1"></textarea>
<br>z = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">} else {
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">int y= 3;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
<br>remainder = <textarea cols="30" rows="1"></textarea>
<br>y = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">out.println("even");
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
<br>remainder = <textarea cols="30" rows="1"></textarea>
<br>y = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">i = i + 1;
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
<br>remainder = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">out.close();
</code></td>
<td></td>
</tr>
<tr class="variables">
<td></td>
<td width: 100px>out = <textarea cols="30" rows="1"></textarea>
<br>values = <textarea cols="30" rows="1"></textarea>
<br>i = <textarea cols="30" rows="1"></textarea>
</td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
<tr class="statement">
<td><code class="prettyprint">}
</code></td>
<td></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:41:45.590

通过添加空格解决： nowrap;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:22:32.313

可以在 CSS 中试试这个。

```
 table.fixed { table-layout:fixed; }
  table.fixed td { overflow: hidden; } 
```

# paypal - CI-Merchant 中的自定义付款值

> ID：14638163
> 
> 赞同：2
> 
> 时间：2013-02-01T01:15:41.890
> 
> 标签：paypal, express-checkout, ci-merchant

我试图在付款期间通过贝宝传递一些自定义值，以便在调用 IPSN 端点时贝宝将其返回给我。

我使用常规的 html 表单执行此操作，一切都很好，但如果我使用 CI-Merchant 执行此操作，则自定义值为空。

```
 $params = array(
        'amount' => $amount_dollars,
        'currency' => 'CAD',
        'description' => $paypal_description,
        'custom' => 'some_id='.$some_id_value,
        'return_url' => base_url('callback'),
        'cancel_url' => base_url('callback-cancelled'));

    $response = $this->merchant->purchase($params); 
```

有人知道我怎样才能让它工作吗？

谢谢伊万

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T02:22:41.817

CI Merchant 让您不必担心自己处理 IPN，所以我认为您遇到问题是因为您尝试做太多工作:)

此处概述了处理 PayPal 付款的一般流程：http: [//ci-merchant.org/](http://ci-merchant.org/)

首先，正如您所做的那样，您将在数据库中记录付款。这通常与您的`orders`表格分开，因此请创建一个`transactions`表格或其他东西。给事务一个状态`in_progress`或某事（在您的数据库中，具体取决于您）。

然后，按照您的操作创建付款请求（确保您使用的是`paypal_express`驱动程序，而不是旧的已弃用`paypal`驱动程序）：

```
$this->load->library('merchant');
$this->merchant->load('paypal_express');

$params = array(
    'amount' => $amount_dollars,
    'currency' => 'CAD',
    'description' => $paypal_description,
    'return_url' => base_url('callback'),
    'cancel_url' => base_url('callback-cancelled'));

$response = $this->merchant->purchase($params); 
```

此时，请仔细检查响应是否失败。如果成功，用户应该已经被重定向到 Paypal。

**对于您要执行**的操作（在通知 URL 中识别交易），诀窍是使用自定义 return_url。例如：

```
'return_url' => base_url('callback/transaction/'.$transaction_id), 
```

这意味着在该页面上，您可以从段变量中获取交易 ID。您的回调控制器将如下所示：

```
// which transaction did we just complete
$transaction_id = $this->uri->segment(3);

// query database to find out transaction details
$transaction = $this->db->where('transaction_id', $transaction_id)->get('transactions')->row();

// confirm the paypal payment
$this->load->library('merchant');
$this->merchant->load('paypal_express');

// params array should be identical to what you passed to the `purchase()` method
// normally you would have some shared method somewhere to generate the $params
$params = array(
    'amount' => $transaction->amount_dollars,
    'currency' => 'CAD',
    'description' => $transaction->description);

$response = $this->merchant->purchase_return($params); 
```

此时您可以检查`$response`以检查付款是否成功，并相应地更新您的数据库/行为。

# android - 如何在未经身份验证的情况下从 Google Play 商店请求应用程序信息

> ID：14638169
> 
> 赞同：8
> 
> 时间：2013-02-01T01:16:31.983
> 
> 标签：android, google-api, google-play, version

我做了一些研究，偶然发现了以下（可能是非官方的）url，它用于从 android play store 查询应用程序的详细信息。但基于非官方的谷歌市场 api 我猜这个*是*使用身份验证令牌

```
http://android.clients.google.com/market/api/ApiRequest 
```

显然有一种方法可以在不登录谷歌帐户的情况下请求安卓应用程序的详细信息——这就是谷歌播放网站在网络浏览器中浏览时的工作方式。

我无法找到有关如何实际执行此操作的任何指导。

我开发的项目中不能有任何非官方的库或代码，也不能使用任何私有的android API。

我还找到了以下链接，这显然不是官方的 google api 链接（换句话说，它不是 100% 值得信赖的，它不会在没有事先通知的情况下更改）

```
https://androidquery.appspot.com/api/market?app=(put the package name here) 
```

但我想任何可能的解决方案都应该类似于这个链接在内部执行的内容。

那么，如何构造一个对 google play store 的有效请求来检索应用信息（请求 url、参数、参数格式、cookie 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T12:38:21.163

我对这个有趣的案例有点谷歌。

简短的回答是，没有简单的 API 可以获取此信息。您需要做一些工作才能获得干净的数据。

这将很有用：
[Google Play Store 应用程序是否有官方 API？](https://stackoverflow.com/questions/12017291/is-there-an-official-api-for-the-google-play-store-app)

[https://developer.android.com/distribute/googleplay/promote/linking.html](https://developer.android.com/distribute/googleplay/promote/linking.html)

[从 Google Play 获取应用详细信息](https://stackoverflow.com/questions/14354816/get-app-details-from-google-play)

希望这可以帮助 ：）。

# c# - 在详细信息视图中保存数据时，Entitydatasource 声明性标记处理错误

> ID：14638171
> 
> 赞同：0
> 
> 时间：2013-02-01T01:16:35.900
> 
> 标签：c#, asp.net, sql, entity-framework

我有一个简单的页面`EntityDataSource`和`DetailsView`控件，用于捕获用户输入。所有拖放和声明性标记。后面的代码中没有代码，它可以正常工作。

但是如果用户输入重复键（`EmployeeID`是键），系统会在页面上抛出错误。我想捕捉这个错误并向用户显示一条简单的消息，说它是重复的。

我的问题是，由于我使用声明性标记和所有拖放操作，我在哪里放置异常处理？我应该使用哪个事件以及如何捕获错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:27:23.603

我找到了答案...您可以在 GridView 或 DetailsView RowUpdated 事件中处理此问题，如下所示。人们总是在谈论 EntityDataSource 更新事件，但无论如何这对我不起作用。

工作代码：

```
protected void GridView1_RowUpdated(object sender, GridViewUpdatedEventArgs e)
        {
            if (e.Exception != null)
            {
                Response.Write(e.Exception);
                e.ExceptionHandled = true;
                Response.Write("Error handled row");
            }
        } 
```

# vb.net - 向表单添加按钮可防止发送 WM_KEYDOWN 消息

> ID：14638181
> 
> 赞同：0
> 
> 时间：2013-02-01T01:17:25.793
> 
> 标签：vb.net, winforms, wndproc, windows-messages

以下代码有效，并在用户按下键盘上的 a 键时打印到 Label1：

```
Public Class Form1

Sub New()

    InitializeComponent()

End Sub

Public Declare Function PostMessage Lib "user32.dll" Alias "PostMessageA" (ByVal HWND As IntPtr, ByVal WMSG As Integer, ByVal WPARAM As Integer, ByVal LPARAM As IntPtr) As IntPtr

Private WM_KEYDOWN As Integer = &H100

Protected Overrides Sub WndProc(ByRef WindowsMessage As Message)

    Select Case WindowsMessage.Msg

        Case WM_KEYDOWN

            Dim VirtualKeyCode As Integer = CType(WindowsMessage.WParam, Integer)

            Select Case (VirtualKeyCode)

                Case Keys.A
                    Label1.Text = "The a key was pressed"

            End Select

    End Select

    MyBase.WndProc(WindowsMessage)

End Sub 
```

结束类

将按钮添加（拖动）到表单后，代码停止工作。一旦按钮位于表单上，就不再发送 WM_KEYDOWN 消息。在 Case WM_KEYDOWN 处设置的断点永远不会被命中。

如果我删除按钮，代码将再次开始工作。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:46:27.550

键盘消息发布到具有焦点的窗口。只要您的表单没有任何子控件，表单就会在激活时获得焦点。尽管它不擅长处理获得焦点，但它没有任何方式表明它拥有焦点，并且它本身对击键没有任何用处。

一旦您将控件放在*确实*喜欢获得焦点的表单上，这种情况就会发生变化。像一个按钮。现在该控件始终获得焦点，您无法将其返回给表单。因此，表单停止接收 WM_KEYDOWN 消息，而是转到 Button。

有一种方法可以让表单响应击键，如果它们是*快捷键*，它们可能很重要。像 F1 一样应该显示帮助，无论哪个控件具有焦点。Winforms 中有内置支持，您可以覆盖 ProcessCmdKey() 方法。像这样：

```
Protected Overrides Function ProcessCmdKey(ByRef msg As Message, ByVal keyData As Keys) As Boolean
    If keyData = Keys.Control Or Keys.A Then
        MessageBox.Show("yada")
        Return True
    End If
    Return MyBase.ProcessCmdKey(msg, keyData)
End Function 
```

将其粘贴到表单的代码中，然后按 Ctrl+A 对其进行测试。

# hibernate - 如何使用struts 1.3和hibernate显示图像以及来自mysql的其他对象数据

> ID：14638190
> 
> 赞同：1
> 
> 时间：2013-02-01T01:18:32.483
> 
> 标签：hibernate, jsp, jakarta-ee, struts-1

我在使用 struts 操作在 jsp 页面上显示存储在 mysql 数据库中的图像 blob 时遇到问题，该操作使用 hibernate 获取对象（包括图像）。我尝试了技术，但这个问题需要某种 ID，但我不想这样做。我的程序实际上在做的是一旦用户登录，用户就会看到按钮'mypartners'。单击此按钮会调用 myPartners 操作，该操作首先确定从请求传递的用户 ID，然后使用 Hibernate 从 mySQl 数据库中获取 userPartner 列表。它工作正常，如果我在数据库中没有 blob，但是当我添加 blob 'logo' 以显示合作伙伴的图像时，这是我遇到问题的时候。

如果可能，请提供帮助并提供一些代码示例。

萨尔曼

# hudson - 使用 Jmeter 进行负载分布测试

> ID：14638195
> 
> 赞同：3
> 
> 时间：2013-02-01T01:18:55.687
> 
> 标签：hudson, jmeter, load-testing

我已经在 J​​meter 中成功设置了一个测试计划，它可以执行 500 个线程并在单台机器上循环几个 http 请求，并与 Hudson 集成。因此，假设我想将线程数增加到 6000。

对于初学者，我设置了几台机器来容纳较小的总线程数，例如 1500。我使用在分发模式下运行 Jmeter 的内置功能。我在主测试计划中输入了 1500 个线程。所以这是我的 10 美元问题：

1.  为什么每个客户端都运行 1500 个线程，而不是智能地共享来自控制器/主控器的总线程数？（我是否错误地配置了我的测试计划？）
2.  Jmeter 是否也可以跟踪分配给它们的每台机器的线程数并跟踪计数器的连续计数？

我是不是完全误解了在分布模式下执行负载的概念（我是这么认为的）？如果我想拆分负载，我是否需要手动配置变量、线程、循环等并在每台机器上单独手动运行它们？

谢谢阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:19:50.557

1.  这不是它的工作原理，分布式测试有测试计划的副本并将其发送到 jmeter-servers 所以如果你想总共有 1500 个，请将计划中的数量设置为 1500 除以 jmeter-server 的数量
2.  每个 jmeter-server 都会跟踪自己的编号，但不会将其报告给 Controller。但是你会在输出报告中看到这个

读这个：

*   [http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf)

使用 JMeter，您通常必须在此模式下复制的是：

*   CSV 使用的数据

*   jmeter.properties 和 user.properties

但是对于测试计划，您只需要在 Controller 上安装它。

# c - 这个 C 程序在做什么？整数运算**

> ID：14638201
> 
> 赞同：0
> 
> 时间：2013-02-01T01:19:18.007
> 
> 标签：c, integer-arithmetic

不管 x 和 y 的值是多少，它都会返回 1。我不明白如何或为什么。我从教科书中复制了一个程序，所以这不是我写的。我们目前正在研究整数算术。

有人可以解释一下这段代码在做什么吗？谢谢！

```
#include <stdio.h>

int uadd_ok(unsigned x, unsigned y)
{
unsigned sum = x+y;
return sum >=y;
}

int main(int argc, char** argv) 
{ 
int x = 1, y = 5;

printf("Answer is: %d\n", uadd_ok(x,y));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:21:17.513

该表达式`sum >= y`是一个布尔值，因此它被转换为`0`或者`1`取决于它的值。由于`x`和`y`是无符号的，假设没有溢出，您将始终拥有`x + y >= y`，因此结果始终为真，因此`1`。

（想必该函数的重点是检查是否发生了溢出……）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:21:29.093

由于 x 和 y 是无符号的，它们都是正数。因此，x 和 y 之和必须大于 y。所以 sum >= y 为真，它被转换为 1，因为您将其格式化为 %d。

# android - 将 Drawable/Bitmap 转换为 ResourceID (android)

> ID：14638203
> 
> 赞同：2
> 
> 时间：2013-02-01T01:19:34.407
> 
> 标签：android, resources, bitmap, drawable

所以我需要有一个基于我的 SDCARD 上的图像的图标，但我只能得到 Drawable/Bitmap，我怎样才能得到基于它的 int 资源？

```
public static String SDCARD_PATH = Environment.getExternalStorageDirectory().getPath() + "/folder/";

public static Drawable getDrawableFromChannelID(int id) {
    return Drawable.createFromPath(Utils.SDCARD_PATH + id + ".png");
}

public static Bitmap getBitmapFromChannelID(int id) {
    return BitmapFactory.decodeFile(Utils.SDCARD_PATH + id + ".png");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:22:56.573

我认为你不能。所有 R.id.. 等都是[您的 apk 中包含](http://developer.android.com/guide/topics/resources/accessing-resources.html)的资源。为什么你仍然需要一个资源ID？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:16:02.147

是的，我相信你不能那样做。您必须手动将图像添加到资源中以获取 id，或者您可以将其添加为 Contentview 中的 ImageView 并在其上添加 Id，只需将其可见性设置为 Gone，这样就不会影响您的其他布局，像这样

```
 ImageView icon=new ImageView(this);
   img.setBackground(<urDrawableIcon>);
   RelativeLayout.LayoutParams iconlayout=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
   icon.setId(11111);//set your own id;
   icon.setVisibility(View.GONE);
   addContentView(icon,iconlayout);

   //so your id is 11111; NotificationBuilder.setIcon(11111); 
```

# java - Object o = makeMeAnObjectPlease(); 之间的区别 和对象 o = new Object();

> ID：14638204
> 
> 赞同：2
> 
> 时间：2013-02-01T01:19:42.550
> 
> 标签：java, oop, object, new-operator, assignment-operator

我最近开始重构我的 Java 代码。一切都运行良好，直到后来，我注意到我的一些对象丢失了*“正确引用”*，即对象是*“按值传递”*，而不是*“按引用传递”*。请注意，我确实理解 Java 始终是[**按值**](http://javadude.com/articles/passbyvalue.htm)传递的，而按引用传递只能通过内存地址传递来模拟（这就是我引用这两个短语的原因）。

我的问题是：两者之间有区别吗

```
Object o = new Object(); 
```

和

```
Object o = makeMeAnObjectPlease(); 
```

在哪里

```
public Object makeMeAnObjectPlease()
{
    Object c = new Object();
    return c;
} 
```

*不同*的是，我的意思是`o`指`Object o = makeMeAnObjectPlease()`与内部创建的内存地址相同的内存地址`makeMeAnObjectPlease()`吗？还有更多的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:24:30.597

是的，它将引用同一个对象。不，没有其他区别。进一步举例：

```
Date d = makeMeAnObjectPlease();
System.out.println(d);
Date d2 = d;
changeMyObjectPlease(d2);
System.out.println(d);
System.out.println(d2);

Date makeMeAnObjectPlease() {
    return new Date();
}

void changeMyObjectPlease(Date date) {
    date.setTime(1234);
} 
```

该代码中只有一个 Date 对象，尽管它在不同的时间有不同的名称。最后，所有的名字都指向同一个对象，所以最后，当我们用两个不同的名字将对象打印出来时，你会发现它们实际上表示内存中的同一个对象，并且被`changeMyObjectPlease()`方法修改了。运行上述示例是：

```
Thu Jan 31 19:29:29 CST 2013
Wed Dec 31 18:00:01 CST 1969
Wed Dec 31 18:00:01 CST 1969 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:41:42.457

这两种方法在功能上没有区别。

在第一个示例中，`new Object`创建了 a 并将对象的引用位置存储在`Object`引用变量`o`中。

在第二个例子中，同样的过程发生在`c`. 然后将`c`（对创建对象的内存引用）的值复制到`o`. 如果此时两者`c`和`o`都在范围内，则对（通过调用方法或更改字段）所做的任何`o`更改都将反映在`c`其中，反之亦然。

要回答有关参考如何在 java 中工作的问题，请考虑以下事项：

```
Object o,c;
o = c = new Object(); 
```

在此示例中，两者`o`和`c`具有相同的值（对 an 的引用`Object`）并指向同一个对象。我可以传入`o`一个方法，改变它指向的对象，并通过访问`Object`from来见证变化`c`。但是，如果我将一个新对象分配给我传入的引用（如下所示）

```
public class Test{

    public static void main(String[] args){
        Object o,c;
        o = c = new Object();
        assignIntoTheReferencePlease(c);
        System.out.println(o == c);
    }

    public static void assignIntoTheReferencePlease(Object c){
        c = new Object();
    }
} 
```

没有任何反应（程序打印`true`）。

为什么？

这是因为你说的是​​真的——所有的方法调用和返回都是*按值传递的*。这意味着 的引用值`c`被复制到方法变量`c`中。对该变量所做的任何分配都不会影响外部范围内的其他变量，因为它不是真正的指针。

我希望我回答了你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T01:26:33.593

正如其他人所说，正如你所展示的那样，根本没有区别。唯一的区别在于可能是什么。

例如，如果您不知道/控制定义`makeMeAnObjectPlease`，它可以返回 的任何子类`Object`，并且代码仍将保留，而第一个选项将始终返回`Object`。正是由于这种抽象，第二种风格通常用于[`Factory Pattern`](http://en.wikipedia.org/wiki/Factory_method_pattern).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T01:27:36.243

> Object o = makeMeAnObjectPlease() 之后的 o 是否会引用与在 makeMeAnObjectPlease() 中创建的内存地址相同的内存地址？

我们不谈论 Java 中的内存地址。它将引用同一个*对象。*怎么可能没有？

> 还有更多的区别吗？

只有额外的方法调用，以及其中的任何内容。

# iphone - 必须为单视图应用程序应用标签栏

> ID：14638205
> 
> 赞同：0
> 
> 时间：2013-02-01T01:19:48.620
> 
> 标签：iphone, ios, xcode4.2

我正在使用 xcode4.2 我在单视图应用程序中为标签栏添加了 3 个项目。

问题是我无法在 ios 模拟器上显示输出而不是黑屏

谁能帮帮我

我的代码是

```
@synthesize window = _window;
@synthesize viewController = _viewController;
@synthesize appNavigation = _appNavigation;  

- (void)dealloc
{
    [_window release];
    [_viewController release];
    [_appNavigation release];    
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

            UITabBarController *tabController = [[UITabBarController alloc] init];
            NSMutableArray *tabsArray = [[NSMutableArray alloc] init];
            `enter code here`ViewController *homeScreen = [[ViewController alloc] init];
            homeScreen.navigationItem.title = @"App Title";
            _appNavigation = [[UINavigationController alloc]initWithRootViewController:homeScreen];
            _appNavigation.tabBarItem.title = @"Home";
            [_appNavigation.tabBarItem setImage:[UIImage imageNamed:@"Home_Button.png"]];
            [tabsArray addObject:_appNavigation];
            [_appNavigation release];

            BookmarksViewController *bookMark = [[BookmarksViewController alloc] init];
            bookMark.navigationItem.title = @"Bookmarks";
            _appNavigation = [[UINavigationController alloc] initWithRootViewController:bookMark];
            [_appNavigation.tabBarItem initWithTabBarSystemItem:UITabBarSystemItemBookmarks tag:2];
            _appNavigation.tabBarItem.title = @"Bookmarks";
            [tabsArray addObject:_appNavigation];
            [_appNavigation release];

            AppSettingsController *settings = [[AppSettingsController alloc] initWithStyle:UITableViewStyleGrouped];
            settings.navigationItem.title = @"Settings";
            _appNavigation = [[UINavigationController alloc] initWithRootViewController:settings];
            _appNavigation.tabBarItem.title = @"Settings";
            [_appNavigation.tabBarItem setImage:[UIImage imageNamed:@"Settings_Button.png"]];
            [tabsArray addObject:_appNavigation];
            [_appNavigation release];

            SearchViewController *searchView = [[SearchViewController alloc] init];
            searchView.navigationItem.title = @"Ranga";
            _appNavigation = [[UINavigationController alloc] initWithRootViewController:searchView];
            _appNavigation.tabBarItem.title = @"Search";
            [_appNavigation.tabBarItem initWithTabBarSystemItem:UITabBarSystemItemSearch tag:4];
            [tabsArray addObject:_appNavigation];
            [_appNavigation release];

            tabController.viewControllers = tabsArray;

LoginViewController *loginView = [[LoginViewController alloc] init];

           [self.window addSubview:tabController.view];

[tabController presentModalViewController:loginView animated:NO];

    [self.window makeKeyAndVisible];
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:47:32.617

只需以这种方式更新您的应用程序代码。

**1.代码变化**

打开**AppDelegate.h**文件应该是这样的

```
#import <UIKit/UIKit.h>

@class FirstViewController,SecondViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>

@property (strong, nonatomic) UIWindow *window;

//these two view controllers (screens) for adding to tabs.
@property (strong, nonatomic) FirstViewController *firstViewController;
@property (strong, nonatomic) SecondViewController *secondViewController;

//this will be the tab bar-controller
@property (strong, nonatomic) UITabBarController *baseTabBarController;

@end 
```

现在你的**AppDelegate.m**文件代码应该像

```
#import "AppDelegate.h"    
#import "FirstViewController .h"
#import "SecondViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize firstViewController;
@synthesize secondViewController;
@synthesize baseTabBarController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 

    // create tab bar
    baseTabBarController = [[UITabBarController alloc]init];

    baseTabBarController.delegate=self;

    // initialize first screen
    firstViewController = [[FirstViewController alloc] initWithNibName:@"FirstViewController " bundle:nil]; 
    UINavigationController *homeView = [[UINavigationController alloc]initWithRootViewController:firstViewController]; 
    firstViewController.title = @"Home ";

    // initialize second screen
    secondViewController = [[SecondViewController alloc] initWithNibName:@"FavViewController" bundle:nil];
    secondViewController.title = @"My Favourite";
    UINavigationController *favouriteView = [[UINavigationController alloc] initWithRootViewController:secondViewController];  

    //add both views in array
    NSArray *controllers = [NSArray arrayWithObjects:homeView,favouriteView, nil];
    //add array to tab bar  
    baseTabBarController.viewControllers = controllers; 
    //add tab bar to window
    self.window.rootViewController = baseTabBarController;

    [self.window makeKeyAndVisible];    

    return YES;
} 
```

**2.UI变化**

现在转到两个视图控制器的 xib 文件我们要添加 TAB 的内容，只需在界面生成器中更改这种方式

> 底栏 = 标签栏

![在此处输入图像描述](../Images/1171987bae4419d4652c9364b15ab1e3.png)

而已！！您将在应用程序底部获得两个选项卡。 ![在此处输入图像描述](../Images/61e9ee3c25230819544495b92d01a812.png)

如果您有任何问题，请随时问我。

# autohotkey - 如何为热字符串设置忽略退格？

> ID：14638208
> 
> 赞同：2
> 
> 时间：2013-02-01T01:20:07.340
> 
> 标签：autohotkey

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:21:37.600

这是 AutoHotKey 的不寻常行为。我的许多热门字符串之一是`:*:ahk::AutoHotKey`，如果我按预期`ah``BackSpace``k``Space`得到，而*不是*像你的情况那样。`ak`*`AutoHotKey`*

 *您能否显示脚本的初始行和热字符串，并告诉我们您使用的是哪个操作系统和哪个 AutoHotKey 版本？

我确实运行过 AutoHotKey_L，但过去我运行过 AutoHotKey，但我从未遇到过你的行为。*

# ruby-on-rails - 从提交中找到每个用户的最高分数

> ID：14638210
> 
> 赞同：0
> 
> 时间：2013-02-01T01:20:12.923
> 
> 标签：ruby-on-rails, ruby, arrays

我正在尝试编写一个方法，到目前为止没有成功。

我有三个交互的模型：用户、提交和分数

score有submission_id，submission有user_id。

用户提交了 1-5 次提交，然后他们收到了每个提交的分数。现在我需要找到每个用户所有提交的最高分。

例如，如果用户 1 提交了 2 张照片，第一次提交得分为 25，第二次得分为 50，我需要该方法为该用户返回 50。

在阵列和范围方面，我需要提高我的技能，但这是我的一位团队成员在他跑出去之前给我的快速反应：

“我会这样做的方法是检查所有提交并将每个提交存储在一个哈希中，键是 user_id，值是一个带有分数的数组。因此，如果您有 2 次以上相同 user_id 的提交，它将指向到一个分数数组。一旦你有了哈希，只需遍历数组的每个元素并选择最高分数。然后你将分数存储在另一个哈希中，但这一次分数是键，值是一个数组所有具有该分数的 user_id。”

如果你能帮助我，我将不胜感激。我不是懒惰，只是筋疲力尽，我不能再思考了。

以下是相关信息：

用户模型：

```
class User < ActiveRecord::Base
  has_many :submissions, :dependent => :destroy
end 
```

提交模型：

```
class Submission < ActiveRecord::Base
  attr_accessible :contest_id, :description, :title, :user_id, :video, :image_attributes,
                  :comment_show
  default_scope order: 'submissions.created_at DESC'
  belongs_to :user
  has_one :score, :dependent => :destroy
end 
```

评分模型：

```
class Score < ActiveRecord::Base
  attr_accessible :effort, :innovation, :passion, :photo_contest_1, :reputation, 
                  :scorable_id, :scorable_type, :technical, :uniqueness, :submission_id,
                  :sub_total

  belongs_to :submission
end 
```

[编辑]

所以，我`helper_method :contest_score`在应用程序控制器中使用 a ，如下所示：

```
def contest_score
   User.joins(submissions: :score).maximum(:sub_total, group: 'users.id')  
end 
```

或者：

```
def contest_score
  hashed_scores = Submission.joins(:score)
                      .select('max(scores.sub_total) as max_score, submissions.user_id as user_id')
                      .group('submissions.user_id')
                      .map { |subm| Hash[subm.user_id, subm.max_score] }
                      .reduce(&:merge)
end 
```

然后，我在用户展示模板中呈现每个成员在比赛中的高分：

```
 <%= contest_score %> contest points<br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:42:26.523

我相信你可以做到这一点。它将使用一个查询并为您提供所需的数据。

```
hashed_scores = Submission.joins(:score)
                          .select('max(scores.sub_total) as max_score, submissions.user_id as user_id')
                          .group('submissions.user_id')
                          .map { |subm| Hash[subm.user_id, subm.max_score] }
                          .reduce(&:merge) 
```

这应该比您的解决方案更有效，因为它只访问数据库一次，并且不需要对分数进行排序并只选择最大分数，因为数据库可以为您完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:01:44.280

这应该可以解决问题

```
scores = User.joins(submissions: :score).maximum(:sub_total, group: 'users.id') 
```

这将导致一个哈希`user_id`值等于所有提交中的最高分的键和值。

更新：

以下是如何获得最高分数的结果

```
scores.inject({}) do |hash, (user_id, score)|
  hash[score] ||= []
  hash[score]  << user_id
  hash
end 
```

更新：无需离开`User`

```
Score.joins(:submission).maximum(:sub_total, group: 'submissions.user_id') 
```

# php - php spider breaks in middle (Domdocument, xpath, curl) - help needed

> ID：14638214
> 
> 赞同：0
> 
> 时间：2013-02-01T01:20:46.293
> 
> 标签：php, curl, xpath, domdocument, web-crawler

I am a beginner programmer, designing a spider that crawls pages. Logic goes like this:

*   get $url with curl
*   create dom document
*   parsing out href tags using xpath
*   storing href attributes in $totalurls (that aren't already there)
*   updating $url from $totalurls

Problem is that after the 10th crawled page the spider says it does not find ANY links on the page, no no one on the next, and so on.

But if I begin with the page that was 10th in previous example it finds all links with no problem but breaks again after 10 urls crawled.

Any idea what might cause this? My guess is something with domdocument, maybe, I am not 100%familiar with that. Or can storing too much data cause trouble? It can be some really beginner issue cause i am brand new - AND clueless. Please give me some advice where to look for problem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:38:45.223

我的猜测是您的脚本在 30 或 60 秒后超时（默认为 php）可以被覆盖，`set_time_limit($num_of_seconds);`或者您可以`max_execution_time`在 php.ini 中更改您的脚本，或者如果您有主机，您可以通过 php 设置更改一些值（或其他它被称为）。

此外，您可能希望将其添加到页面顶部：

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

并检查您的错误日志以查看是否有与您的蜘蛛有关的消息。

# c - 函数调用之间是否刷新全局变量？

> ID：14638216
> 
> 赞同：9
> 
> 时间：2013-02-01T01:20:58.540
> 
> 标签：c, gcc, embedded, c99, volatile

我正在编写嵌入式固件，有时很难决定何时需要易失性。

当我有一个等待某个布尔标志被中断更改的函数时，很明显该标志需要是可变的，因为否则该函数将永远等待，因为编译器没有意识到该值可以通过打断。

但是当我有一个只在第一行检查一个标志的简短函数时，我希望该标志不需要是易失的，因为每次我进入函数时都会读取它的值？所以当一个中断在我第一次调用函数和第二次之间修改它的值时，我会得到新的值。还是不保证每次我进入函数时所有缓存寄存器都被清除？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T01:26:07.633

你仍然需要标记你的变量`volatile`：因为优化器可以自由地*内联*你的函数，尤其是短函数，所以在没有标记的情况下在循环中调用你的函数`volatile`来访问硬件修改的内存会使你有在之后不读取内存的危险初始迭代。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T07:58:12.513

> ...因为每次我进入函数时都会读取它的值？

不，对此没有任何保证。“缺少易失性错误”的问题在于编译器的优化器不知道某个变量可以从外部源更改，从而改变了代码的整体含义。

所以如果你有这个：

```
static int x=0;

int func (void)
{
  if(x == 0)
  {
    return 1;
  }
  else
  {
    return 0;
  }
}

interrupt void isr (void)
{
  x = SOMETHING;
} 
```

然后编译器会思考：“嗯，x 永远不会在任何地方修改，因为“isr”永远不会从程序中调用。所以 x 始终为 0，我将代码优化为：

```
int func (void)
{
  return 1;
} 
```

然后，也许，它将内联整个函数。发生与否无关紧要，因为代码的含义已经在前面的优化步骤中被破坏了。

任何与中断（或线程、DMA、硬件寄存器或回调函数）共享的变量都*必须*始终声明为易失性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T01:28:39.043

对硬件寄存器的任何访问都最好标记为易失性。编译器不知道它将通过硬件的中断或 DMA 进行更改，并且编译器可以并且将假设它不会，因此它可以并且将缓存某些值。

本质上，如果它是硬件映射的或可以通过中断（从硬件）更改，则将其标记为易失性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T01:36:29.370

除了将变量标记为 volatile 以强制加载（正如@dasblinkenlight 建议的那样），您还应该采取措施确保以原子方式读取（和写入）变量。在某些特定大小对象的平台上（例如最近的 x86 处理器上的 32 位值），这会自动发生。通常，您可能需要在变量周围放置一个同步锁，例如互斥锁或信号量。当异步代码是线程时，这相对容易做到。我不确定当涉及真正的中断时该怎么做，因为某些同步技术可能是不可能的。您的平台文档应该在这里提供一些见解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T18:25:04.067

应该声明所有共享内存`volatile`。

您的特定编译器不会优化特定示例中的读取可能是正确的，也可能不是正确的，但在这种情况下，`volatile`关键字会增加*零*开销（即，在指定显式读取将在任何情况下发生读取时没有开销）案例），那么为什么要冒未定义或不可移植的行为呢？

# wordpress - Wordpress 3 - 父/子类别操作

> ID：14638223
> 
> 赞同：3
> 
> 时间：2013-02-01T01:21:43.533
> 
> 标签：wordpress, categories

可以在 Wordpress 中显示父类别的子类别。

但是，我需要只显示父类别，然后在用户单击父类别时显示子类别。

假设我有 A 类和 B 类。在 AI 中有 A1、A2 和 A3。在 B B1 和 B2 中。现在我想在前端显示类别......比如：

```
Category A:
Category B: 
```

当用户单击类别 A 时，我希望发生以下情况：

```
Category A
- A1
- A2
- A3
Category B 
```

当用户单击类别 B 时，我希望发生以下情况：

```
Category A
Category B
- B1
- B2 
```

请问有谁知道这是否可行？如果是这样，您能否添加一些可以帮助我理解的伪代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:47:04.390

我猜您不是在问如何获取类别和子类别，而是您想知道如何呈现 html，以便仅显示父类别，并在单击父子类别时显示。为此，您需要使用手风琴菜单。您可以根据自己的需要设计它们。因此，所有类别（父级和子级）都将被渲染，但会根据需要显示。

手风琴菜单的一些示例，查看 html，您将了解如何在您的情况下呈现 html。

[示例 1](http://jquerytools.org/demos/tabs/accordion.html) [示例 2](http://jqueryui.com/accordion/)

# signals - 如何找到导致 SIGPIPE 的文件描述符？

> ID：14638225
> 
> 赞同：3
> 
> 时间：2013-02-01T01:21:52.280
> 
> 标签：signals

当 SIGPIPE 的信号处理函数被触发时，如何检索导致它的文件描述符？谢谢你的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:40:31.873

看看这个[问题和答案](https://stackoverflow.com/questions/7774569/using-signals-and-sigpipe)。Dietrich 描述，如果您忽略 SIGPIPE，那么您将获得从 read 或 write 函数返回的 EPIPE，从而知道遇到错误的文件描述符。

# android - 当另一个 Ruby 子进程完成时杀死一个 Ruby 子进程

> ID：14638226
> 
> 赞同：1
> 
> 时间：2013-02-01T01:22:07.093
> 
> 标签：android, ruby, process, stress-testing, monkey

我正在尝试使用 Ruby 编写脚本以在 Android 应用程序上运行猴子测试。我坚持使用 1.8 Ruby，无法使用 spawn。

有关详细信息，请参见下面的代码。由于某些原因，即使该过程完成后，该`logcat`过程仍将继续运行。`monkey`在杀死进程之前，我曾使用`Process.wait()`等待`monkey`进程完成`logcat`，但它并没有杀死它。我没有`fork`正确使用吗？

谢谢。

```
pid_logcat = fork do
    puts "Enter capturing logcat"
    system("adb shell logcat | tee logcat.log")
end

pid_monkey = fork do
    puts "Running monkey script"
    system("adb shell monkey -p TestApp --throttle 200 -v 1000000 | tee Monkeylog.txt")
end

Process.wait(pid_monkey)
Process.kill("KILL", pid_logcat) 
```

**已编辑 1**

我可以确认`adb`确实会产生另一个不受 ruby​​ 控制的进程，我现在该怎么办？`Process.kill('HUP', -Process.getpgid(pid_logcat))`不会工作，因为这也会杀死父进程（红宝石进程分叉这个）

**EDITED 2** `exec()`似乎也不适用于`pid_logcat`分叉进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:14:36.280

只需`Process.wait(pid_logcat)`在您的代码后添加。

# vb.net - 以编程方式设置组合框的值成员

> ID：14638227
> 
> 赞同：3
> 
> 时间：2013-02-01T01:22:09.630
> 
> 标签：vb.net, combobox, visual-studio-2012, selectedvalue

我一直在寻找这个答案。在这里检查：[如何设置组合框值](https://stackoverflow.com/questions/5257016/how-to-set-a-combobox-value)，但我不确定它是否适用于我（可能是错误的，如果我是，请纠正我）。我正在使用 VB.Net，VS2012，我需要以编程方式设置数据绑定的组合框的值成员。

我现在的代码如下（这是来自分配一堆控件值的循环内）：

```
 cboCountry.SelectedValue = row.Item("CCCOUNTRY").ToString 
```

这不会分配任何选定的值。我也试过：

```
 cboCountry.SelectedItem = cboCountry.FindString(row.Item("CCCOUNTRY").ToString) 
```

但这也不起作用。对于这种情况：

1.  我有一个组合框
2.  它的 valuemember 属性中有两个数据绑定值，“US”和“CA”
3.  我分配给它的行项目是这些值之一。

同样，我需要做的就是以编程方式设置 selectedvalue。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T06:48:51.900

您第二次尝试已接近尾声——将 SelectedItem 替换为 SelectedIndex：

```
cboCountry.SelectedIndex = cboCountry.FindString(row.Item("CCCOUNTRY").ToString) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-15T11:18:59.900

你应该使用：

```
cboCountry.Items.FindByText(row.Item("CCCOUNTRY").ToString()).Selected = True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-27T23:24:08.747

这今天在 vb.net vs2010 对我有用

cboCountry.SelectedIndex = cboCountry.FindString("CCCOUNTRY").ToString

我的控件和值的名称不同，但我继续以前的用户帖子......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-27T23:38:05.680

这在 VB.NET VS2010 的项目中对我有用

```
cboCountry.SelectedIndex = cboCountry.FindString("CCCOUNTRY").ToString 
```

当然项目有不同的名称和价值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-27T22:26:02.780

我也遇到了同样的问题，在网上没有找到答案。显然，微软还没有解决这个问题。我正在将 VB 用于 VS2010 WinForms 应用程序（在 Windows 7 中）。我终于决定编写一个解决方法，无论我在哪里尝试预设 ComboBox 的选定值，我都进行了以下更改：

```
' my_cbx.SelectedValue = data_row.value  ' doesn't work!
PresetSelectedValue(my_cbx, data_row.value) 
```

然后，我添加了以下子例程以供上述更改调用：

```
Public Sub PresetSelectedValue(ByRef ComboBox As ComboBox, ByVal value As Object)
    Dim item_ndx As Integer

    If ComboBox Is Nothing Then
        '   throw exception?
        Exit Sub
    End If
    With ComboBox
        .Tag = "PresetSelectedValue"
        For item_ndx = 0 To .Items.Count - 1
            .SelectedIndex = item_ndx
            If .SelectedValue = value Then
                Exit For
            End If
        Next
        If item_ndx >= .Items.Count Then
            .SelectedIndex = -1
        End If
        .Tag = ""
    End With
End Sub 
```

最后，我将以下代码添加到我的 ComboBox.SelectedValueChanged 事件中（这可以防止在我上面的子例程中的 For 循环的每次迭代中执行用户更改值时的正常事件逻辑）：

```
If my_cbx.Tag = "PresetSelectedValue" Then
    Exit Sub
End If 
```

# php - 使用变量作为哈希键的树枝

> ID：14638231
> 
> 赞同：15
> 
> 时间：2013-02-01T01:22:17.757
> 
> 标签：php, symfony, twig

是否可以动态使用该`path`功能？以变​​量为参数？

`{{ path(nav.url, { nav.param_name : nav.param_value }) }}`

因为如果我尝试使用该代码，我会得到：

```
A hash key must be followed by a colon (:). 
Unexpected token "punctuation" of value "." 
("punctuation" expected with value ":") 
```

我知道通过“硬编码”`param_name`将起作用......就像这样：

`{{ path('nav.url', { 'id' : nav.param_value }) }}`

但是我需要动态传递 3 值

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-01T01:27:31.607

Twig book 说你必须将表达式括在括号中才能将它们用作键，所以也许这会起作用：

```
{{ path(nav.url, { (nav.param_name) : nav.param_value }) }} 
```

[http://twig.sensiolabs.org/doc/templates.html#literals](http://twig.sensiolabs.org/doc/templates.html#literals)

# sql - 连接上一行的 sql 或 t-sql

> ID：14638232
> 
> 赞同：0
> 
> 时间：2013-02-01T01:22:17.610
> 
> 标签：sql, tsql, concatenation

我在这里遇到了一些真正的麻烦。我在表格中有以下数据。

```
(Input)  (Output) (Status)
YELLOW   YELLOW   YELLO-YELLOW     - because there is no previous row. Please watch the next
Red       GREEN   YELLOW,RED-YELLOW-GREEN 
```

..基本上我需要一个存储过程或一种方法来从表记录中获取上一行并将其添加到下一行。最近几天我一直在努力做到这一点，没有任何运气。请帮忙。谢谢你。

到目前为止我有这个：

```
select input, output, concat(input,output) as status from Status 
```

但是我无法连接现有的行。在我的示例中，如果输入为黄色且输出为黄色，我将获得状态字段 YELLOW-YELLOW 的第一行。但是在下一条记录中，如果我有红色作为输入，绿色作为输出，在这种情况下，我应该有黄色、红色-黄色、绿色状态。

基本上我需要找到一种方法来获取输入字段和输出字段的先前记录并将其添加到下一条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:28:12.557

老实说，不是 100% 确定你在寻找什么问题。但是，如果我理解正确，您想从上一行获取输入/输出并将其添加到当前行的状态中吗？

根据您的 RDBMS，这样的事情应该可以帮助您入门——这是特定于 SQL Server 的：

```
WITH cte AS
(
   SELECT *,
      ROW_NUMBER() OVER (ORDER BY (SELECT 1)) AS row
   FROM yourTable
)
SELECT 
  t1.input, 
  t1.output, 
  CASE 
    WHEN t2.input IS NULL
      THEN t1.input + '-' + t1.output
    ELSE 
      t2.input + ',' + t1.input + '-' + t2.output + ',' + t1.output
  END status
FROM cte t1
  LEFT JOIN cte t2 ON t1.row = t2.row+1 
```

这是用于测试的[SQL Fiddle 。](http://sqlfiddle.com/#!3/c677b/2)

祝你好运。

# excel - Excel日期公式查找下个月第二个工作日的日期

> ID：14638233
> 
> 赞同：2
> 
> 时间：2013-02-01T01:22:25.997
> 
> 标签：excel, date

我有一个电子表格，其中包含我报告的月份，但我想计算出截止日期，即下个月的第二个工作日。

```
Report Month               Due Date
January-13                 04-Feb-13 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:13:39.627

如果您使用的是 Excel 2007 或更高版本，或者您使用的是 Excel 2003 或更早版本并启用了分析工具包加载项，则可以使用[`EOMONTH`](http://office.microsoft.com/en-us/excel-help/eomonth-HP005209076.aspx)查找该月的第一天（`EOMONTH`返回该月的最后一天，因此添加1 天到下个月的第一天）并[`WORKDAY`](http://office.microsoft.com/en-us/excel-help/workday-HP005209339.aspx)找到返回日期之后的第二个工作日`EOMONTH`。

如果您不想将假期考虑在内，则公式如下所示：

`=WORKDAY((EOMONTH("January-2013",0)),2)`

如果您确实想将假期考虑在内，则需要在`WORKDAY`函数调用中添加第三个 agument，其中包含您想要包含的假期日期列表。处理构建列表的最简单方法是使用包含假期日期的范围。

TechRepublic 有一篇关于这个功能的[好帖子。](http://www.techrepublic.com/blog/msoffice/use-excels-workday-function-to-determine-delivery-dates/623)`WORKDAY`

我要提醒您注意的一件事是，如果可能的话，使用格式`Month-YYYY`而不是`Month-YY`excel 来输入月份通常会将输入的日期解释`Month-YY`为`Month-DD-Current year`. Microsoft 甚至建议使用`date`公式来构建传递给这些函数的日期，而不是为它们使用文本值。

# javascript - 判断一个jQuery事件是否已经过期（事件冒泡已经结束）

> ID：14638235
> 
> 赞同：2
> 
> 时间：2013-02-01T01:22:38.243
> 
> 标签：javascript, jquery, html, dom, javascript-events

DOM 事件分为捕获、目标和冒泡三个阶段，`eventPhase`DOM 事件的属性反映了事件处于哪个阶段。

jQuery 事件也具有此属性，但它似乎不会随着事件在其生命周期中的移动而更新。我认为这只是特定时间 DOM 事件的快照。

**有没有办法从 jQuery 事件中确定原始事件的生命周期是否已经结束而不检查原始事件？**（检查原始事件对我不起作用，因为 IE6-8 事件没有类似`eventPhase`或`currentTarget`可用于确定事件是否仍在冒泡的属性。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:32:23.510

正如您所提到的，旧版本的 IE 不支持它，因此 jQuery 无论如何都不会为您提供帮助。因此，现在只需在原始 DOM 事件可用时使用 eventPhase。

# android - 如何在 AVD 上分配超过 1024 MB 的 RAM？

> ID：14638243
> 
> 赞同：7
> 
> 时间：2013-02-01T01:23:53.713
> 
> 标签：android, android-emulator, avd, ram

我想使用 1024MB 或更大的 RAM 大小，但是当我尝试启动我的虚拟设备时，我收到此错误：

```
Failed to allocate memory: 8 
```

经过研究，一些对我不起作用的解决方案是：

*   手动更改 avd 的 .ini 文件等。
*   以管理员身份运行模拟器
*   从命令行运行
*   [一个解法](https://stackoverflow.com/questions/8853541/why-cant-i-boot-an-avd-from-eclipse-with-1024-mb-of-ram/14487341#14487341)
*   [另一种解决方案](https://stackoverflow.com/questions/5969067/android-failed-to-allocate-memory/6884186#6884186)

系统规格：

*   64 位 Windows 7 64 位
*   i7 3610QM CPU
*   8GB 内存
*   2GB 显卡

我正在使用安卓**4.2**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:05:50.897

你应该尝试改变你的模拟器 - 如果它的版本是 20。

这是描述问题的链接：[Emulator stop working after upgrade to version 20](http://code.google.com/p/android/issues/detail?id=33930)

*更新*

我还发现了这个链接：[Android Virtual Device (AVD) Emulator stop working](http://droidsquad.blogspot.de/2011/04/android-virtual-device-avd-stopped.html) - 有趣的是，一位用户在评论中写道：*“你可能想知道，在我的系统上我有 8gb 的 RAM，但我无法将设备内存大小设置为 2048，但将其降低到 1024 时它起作用了。”*

也许RAM管理通常是某些Android SDK的问题。

# base64 - 如何将base64导出到文件？

> ID：14638245
> 
> 赞同：7
> 
> 时间：2013-02-01T01:23:57.960
> 
> 标签：base64

我目前正在尝试将我的电子邮件（jpg）中的图像附件从 base64 解码为 un​​icode，然后将其导出到文件中（这样我就可以从原始数据中获取图像）。

我现在将数据从 base64 解码为 Unicode，但是如何将 Unicode 转换回图像？

希望你能帮忙！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-22T18:32:39.753

您不必将其转换为 unicode。

在 Linux 机器上，您可以简单地将 base64 解码的附件保存到磁盘并执行以下操作：

```
cat foo | base64 -d > bar.jpg 
```

对于 Windows，您可以下载此工具：

[http://www.f2ko.de/downloads/base64.zip](http://www.f2ko.de/downloads/base64.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T16:14:11.233

如果您只需要从附件中解码几个文件，您可以使用特殊的在线服务，例如[Base64online.org/decode](http://base64online.org/decode)。它可以将您的 base64 编码数据解码为可下载的图像。

# asp.net - site.master 中的 MenuItemDataBound

> ID：14638246
> 
> 赞同：0
> 
> 时间：2013-02-01T01:24:03.353
> 
> 标签：asp.net, vb.net, menu, menuitem, master-pages

试图在我的 site.master 中操纵菜单，我快疯了。我的 site.master 中有以下菜单：

```
 <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal"> 
        <Items> 
            <asp:MenuItem Text="Welcome" Value="0" NavigateUrl="Default.aspx"></asp:MenuItem> 
            <asp:MenuItem NavigateUrl="Times.aspx" Text="Timesheets" Value="1"></asp:MenuItem> 
            <asp:MenuItem NavigateUrl="View.aspx" Text="View Staff" Value="2"/> 
            <asp:MenuItem Text="Add Staff" Value="2" NavigateUrl="Add.aspx"></asp:MenuItem> 
            <asp:MenuItem Text="Options" Value="3"> 
                <asp:MenuItem Text="Jobs" Value="3" NavigateUrl="Jobx.aspx"></asp:MenuItem> 
                <asp:MenuItem Text="Courses" Value="3" NavigateUrl="Modx.aspx"></asp:MenuItem> 
                <asp:MenuItem Text="Increases" Value="3" NavigateUrl="Incx.aspx"></asp:MenuItem> 
                <asp:MenuItem NavigateUrl="User.aspx" Text="Users" Value="3"></asp:MenuItem> 
            </asp:MenuItem> 
        </Items> 
    </asp:Menu> 
```

为了简单起见，我在我的 site.master vb 文件中添加并调整了以下[这个 msdn VB 示例：](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.menuitemdatabound.aspx)

```
Partial Class Site
Inherits System.Web.UI.MasterPage 

Public Sub NavigationMenu_MenuItemDataBound(sender As Object, e As System.Web.UI.WebControls.MenuEventArgs) Handles NavigationMenu.MenuItemDataBound 

    e.Item.Text = "Custom Text" 

End Sub 
End Class 
```

我的理解是，我的菜单中的所有项目随后都应该有文本“自定义文本”，但它只是没有发生。我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:32:58.270

此菜单没有附加数据源，因此永远不会执行 menuitemdatabound。

如果您想操作这些项目，您可以在 page_load 中执行此操作。

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    For Each item As MenuItem In NavigationMenu.Items
        item.Text = "CUSTOM"
    Next
End Sub 
```

# c# - 根据拼写距离获取 Distinct by Property

> ID：14638250
> 
> 赞同：2
> 
> 时间：2013-02-01T01:24:19.923
> 
> 标签：c#, linq, lambda, extension-methods

我有这个集合，我想根据评分对其进行排序，然后使用 Levenshtein 算法根据最近的拼写距离删除重复的名称。

到目前为止，这是我的代码

我的预期结果是

```
 /* 
  * Expected result:
  * 
  * Jjamppong v2
  * Maggi
  * Quick Chow
  * 
  */ 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Item> _items = new List<Item>();

            _items.Add(new Item() { ItemID = 1, Name = "Jjamppong", Rating = 4 });
            _items.Add(new Item() { ItemID = 2, Name = "Jjamppong v2", Rating = 6 });
            _items.Add(new Item() { ItemID = 3, Name = "Jjamppong v3", Rating = 3 });
            _items.Add(new Item() { ItemID = 4, Name = "Jjamppong v4", Rating = 2 });
            _items.Add(new Item() { ItemID = 5, Name = "Maggi", Rating = 8 });
            _items.Add(new Item() { ItemID = 6, Name = "Quick Chow", Rating = 1 });
            _items.Add(new Item() { ItemID = 7, Name = "Maggi v2", Rating = 5 });

            _items.OrderByDescending(i => i.Rating)
                .Distinct(new DistinctByNameNearComparer<Item>())
                .Select(i => i)
                .ToList()
                .ForEach(i =>
                {
                    Console.WriteLine(i.Name);
                });

            Console.ReadKey();

            /* 
             * Expected result:
             * 
             * Jjamppong v2
             * Maggi
             * Quick Chow
             * 
             */
        }
    }

    class Item
    {
        public int ItemID { get; set; }
        public string Name { get; set; }
        public int Rating { get; set; }
    }

    class DistinctByNameNearComparer : IEqualityComparer<Item>
    {

        public bool Equals(Item x, Item y)
        {
            int _distance = LevenshteinDistance.Compute(x.Name, y.Name);
            int _maxLen = Math.Max(x.Name.Length, y.Name.Length);

            return (_distance > (_maxLen - 5));
        }

        public int GetHashCode(Item obj)
        {
            return obj.GetHashCode();
        }
    }

    class LevenshteinDistance
    {
        /// <summary>
        /// Compute the distance between two strings.
        /// </summary>
        public static int Compute(string s, string t)
        {
            int n = s.Length;
            int m = t.Length;
            int[,] d = new int[n + 1, m + 1];

            // Step 1
            if (n == 0)
            {
                return m;
            }

            if (m == 0)
            {
                return n;
            }

            // Step 2
            for (int i = 0; i <= n; d[i, 0] = i++)
            {
            }

            for (int j = 0; j <= m; d[0, j] = j++)
            {
            }

            // Step 3
            for (int i = 1; i <= n; i++)
            {
                //Step 4
                for (int j = 1; j <= m; j++)
                {
                    // Step 5
                    int cost = (t[j - 1] == s[i - 1]) ? 0 : 1;

                    // Step 6
                    d[i, j] = Math.Min(
                        Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
                        d[i - 1, j - 1] + cost);
                }
            }
            // Step 7
            return d[n, m];
        }
    }
} 
```

我在这里遇到错误

```
_items.OrderByDescending(i => i.Rating)
                    .Distinct(new DistinctByNameNearComparer<Item>())
                    .Select(i => i)
                    .ToList()
                    .ForEach(i =>
                    {
                        Console.WriteLine(i.Name);
                    }); 
```

任何帮助，将不胜感激。

**回答：**

```
class DistinctByNameNearComparer : IEqualityComparer<Item>
    {

        public bool Equals(Item x, Item y)
        {
            int _distance = LevenshteinDistance.Compute(x.Name, y.Name);
            int _maxLen = Math.Max(x.Name.Length, y.Name.Length);
            bool _comp = _distance < 4;

            return _comp;
        }

        public int GetHashCode(Item obj)
        {
            return 1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:41:21.143

我想你收到[Compiler Error CS0308](http://msdn.microsoft.com/en-us/library/sfhfe070%28v=vs.80%29.aspx)，说

> 非泛型类型或方法“标识符”不能与类型参数一起使用。
> 
> 方法或类型不是通用的，但它与类型参数一起使用。为避免此错误，请删除尖括号和类型参数，或将方法或类型重新声明为泛型方法或类型。

所以正确的linq是：

```
_items.OrderByDescending(i => i.Rating)
    .Distinct(new DistinctByNameNearComparer())
    .Select(i => i)
    .ToList()
    .ForEach(i =>
    {
        Console.WriteLine(i.Name);
    }); 
```

当你指定

```
.Distinct(new DistinctByNameNearComparer<Item>()) 
```

错误是`DistinctByNameNearComparer`不是通用的，因此您不能为其指定类型参数。编译器从中推断出`_items.OrderByDescending(i => i.Rating)`参数 for`Distinct`应该是类型`IEqualityComparer<Item>`，并且您应该指定它。但是您`DistinctByNameNearComparer`的声明为

```
class DistinctByNameNearComparer : IEqualityComparer<Item> 
```

也就是说，它确实是`IEqualityComparer<Item>`。你唯一需要做的就是写

```
.Distinct(new DistinctByNameNearComparer()) 
```

# cucumber - Gherkin to (not for) Javascript

> ID：14638254
> 
> 赞同：0
> 
> 时间：2013-02-01T01:24:39.443
> 
> 标签：cucumber, bdd, gherkin

我是 BDD 和 Gherkin 的新手。尝试使用 Cucumber，它将 Gherkin 解析为 Ruby——一种我不知道的语言。有没有将 Gherkin 转换为 Javascript 的库？如果我得到 Gherkin 的 Javascript 输出，我计划修改代码并调用我自己的一些 Javascript 函数。请注意，我不打算测试这些 javascript 函数 - 这些函数来自我试图链接到的其他一些测试工具。我希望我不打算做一些奇怪的事情。问题是我们的团队不想学习 Ruby。请提出一些选择。

我想，我需要的是一个允许我用 javascript 编写步骤定义的工具——而不是 Ruby。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:41:34.297

我认为您正在寻找 Cucumber.js： http: [//git.io/cukejs](http://git.io/cukejs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:31:06.793

[Gherkin](https://github.com/cucumber/cucumber/wiki/Gherkin/)是一种人类可读的 DSL，cucumber 并不关心您使用什么语言来创建步骤定义。

虽然我在 cucumber wiki 上没有看到任何特定于 javascript 的[示例](https://github.com/cucumber/cucumber/tree/master/examples)，但您可能需要查看[cucumber.js](https://github.com/cucumber/cucumber-js)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:57:41.480

Cucumber.js 是一个不错的选择，如果你使用 nodejitsu 的东西，Kyuri 是一个不错的选择:) [https://github.com/nodejitsu/kyuri](https://github.com/nodejitsu/kyuri)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-05T04:06:26.543

您可以尝试使用名为[CukeTest](http://cuketest.com)的 cucumber.js 创作工具，它具有以下相关功能。

*   从步骤文本生成 JavaScript 代码
*   提示您是否存在步骤的现有/待定/重复定义。
*   给定 JavaScript 文件中的特定步骤定义代码，跳转到与其匹配的步骤定义
*   从可视化编辑视图切换到文本视图

有两种可用的桌面版本，或[Windows Store](https://www.microsoft.com/en-gb/store/p/cuketest/9p9lchrp8kb8)版本。这是一个演示：

[![在此处输入图像描述](../Images/b334f25dcea8fd142ed5b4dee35d69ef.png)](https://i.stack.imgur.com/mag3i.gif)

# wordpress - 如何初始化 WP 插件以使用其类？

> ID：14638257
> 
> 赞同：1
> 
> 时间：2013-02-01T01:24:46.633
> 
> 标签：wordpress, plugins

我想在我的 php 页面中使用来自 Wordpress WYSIJA 插件的类。我如何需要初始化一个插件才能访问它的类？

我正在尝试做的事情：

```
<?php
require_once(dirname(__FILE__).'/wp-blog-header.php');
require_once(dirname(__FILE__).'/wp-content/plugins/wysija-newsletters/core/base.php');
function display()
{

$myEmailVariable=$_POST['usremail']; 
$myListId1='3';
echo($myEmailVariable);
$userData=array(        'email'=>$myEmailVariable,        'firstname'=>'',        'lastname'=>'');
$data=array(      'user'=>$userData,      'user_list'=>array('list_ids'=>array($myListId1))    );
$userHelper=&WYSIJA::get('user','helper');
print_r($data);
$userHelper->addSubscriber($data);
}

add_action('init','display'); 
```

我得到一个错误：致命错误：在编辑中找不到类'WYSIJA'：现在我将处理表单的函数移到functions.php并编辑了代码：

```
 <?php
   require_once(dirname(__FILE__).'/wp-blog-header.php');

   if (isset($_POST['usremail'])) {

    add_subscriber_wys();
}
   else {
       //show form
?>

<body>
    <div class="box_email">
        <p>Секунду, мы перенаправляем Вас на страницу банка</p>
        <div class='email_frame'>
        <form method="post" action="<?php echo($_SERVER['PHP_SELF']) ?>">

        <span class="email_label">Введите e-mail</span>
        <input type="email" name="usremail" size="35" onfocus="stoptimer()" style="line-height: 60px;" >

        <br>
        <span>чтобы получать лучшие предложения от банков-партнеров</span>
        </div>
        <div>
        <img src="http://moscow-kredit.ru/wp-content/themes/arthemia-premium/images/banki.png"></img>
        </div>
        <div class="or">
        или просто нажмите
        </div >
        <div class='button'><input type="image" src="http://moscow-kredit.ru/wp-content/themes/arthemia-premium/images/knopka.png" alt="Далее" name='submit' /></div>

        </form>

<?php

   }

?>  

    </div>

    <script>

var foo;

function redirectme(){
var refarray = new Array();
refarray['homenal'] = "http://test1.ru";
refarray['genal'] = "http://test2.ru";
refarray['domain3.com'] = "http://test3.ru";
for (var i in refarray) {
if (window.location.href.indexOf(i) != -1) window.location.replace(refarray[i]);
}
}
function stoptimer(){
clearTimeout(window.foo);
}

foo=setTimeout("redirectme();", 5000);

    </script>

    </body>
</html> 
```

但它仍然没有显示表单，也没有显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:20:22.347

尝试这样的事情：

```
<?php

define( 'WP_USE_THEMES', false );
require( './wp-load.php' );

add_action( 'plugins_loaded', 'display_so_14638257' );

function display_so_14638257() 
{
    // Your stuff
} 
```

*为您的函数名称添加前缀或后缀，以免与其他函数发生冲突。*

# javascript - 将 Marionette 与 JQuery-Mobile (JQM) 一起使用的新手

> ID：14638258
> 
> 赞同：2
> 
> 时间：2013-02-01T01:24:52.123
> 
> 标签：javascript, jquery-mobile, backbone.js, marionette

刚开始研究木偶并阅读文档。另外，我们是 JQM 的新手

以下是我对“非常”高级别的木偶的理解。有 Application 和 Region、Composite 视图等概念来帮助构建复杂的 UI。我可以看到在 JQM 页面中，可以通过使用 marionette 的区域和复合视图来构建“视图”……

由于我们正在研究具有多个页面的 JQM 应用程序，那么问题也是一 (1) 个 Marionette 应用程序是否应该管理所有 JQM 页面的所有区域/复合视图。或者更好的做法应该是为每个 Marionette 应用程序创建每个 JQM 页面和应用程序之间都会有某种路由以反映 JQM 页面转换。

提前感谢您的患者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T05:06:40.110

这是我的版本[`the boilerplate`](https://github.com/mingchan/jquerymobile-marionette)：

# 使用的包

*   木偶
*   骨干
*   jQuery & JQM
*   JQM 路由器 - 不是骨干路由器（这只是我的偏好）
    *   在当前版本中，它并没有真正被使用。
*   罗达什
*   需要js

# 应用程序流 - 用户预期

*   它具有三个 JQM 页面：“登陆、关于、登录”
*   当它启动时，它会进入登陆页面。
*   从登录页面，用户可以转到“关于”或“登录页面”。
*   从“关于/登录”页面可以返回到其他两个页面。

# 应用结构

*   使用 requirejs 加载所有模块
*   有一个 Marionette 应用程序实例充当中央集线器
*   每个 JQM 页面都被建模为 Marionette 布局，它具有三个区域：页眉、内容和页脚。这与 JQM 页面的划分方式相匹配。
*   这些区域（页眉、内容和页脚）中的每一个都包含其 Marionette 视图（Item、Composite、Collection 或 Layout 视图）。可以嵌套视图以根据您的需要构建任何复杂的视图。
*   其余的只是 Backbone/JQM 的东西。
*   这就对了！

欢迎任何想法和评论！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T23:07:30.600

我在同一条船上。我正在尝试找到一种方法来充分利用 Marionette 和 jQuery Mobile，但由于我对这两个框架都缺乏经验并且（似乎）缺乏它们一起工作的可用示例，我正在苦苦挣扎。我会仔细观察这个问题，希望比我更有资格的人来回答它。不过，我或许可以根据我的经验提供一些建议。

虽然似乎缺少 Marionette 和 jQuery Mobile 一起工作的示例，但有一些示例演示了如何集成普通的 Backbone 和 jQuery Mobile。我见过的最好的是[这个示例](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)，它使用 Backbone 的路由，但使用 jQuery Mobile[`changePage`](http://jquerymobile.com/test/docs/api/methods.html)方法管理页面，这意味着您保留了 jQuery Mobile 中内置的大部分功能，包括页面转换。

[我使用上面的示例作为这个样板](https://github.com/net-uk-sweet/bbb-phonegap-marionette-jqm-boilerplate)的起点，它试图将 Marionette 添加到组合中。它绝不是完美的，因为它牺牲了 Marionette 的一些功能（特别是 的`Marionette.Application`）来保留 jQuery Mobile 的功能，但您可能会感兴趣。我认为，如果对这两个框架有更好的了解，也许可以对其进行改进，从而保留两个框架的特性。

# python - Python使用文本文件

> ID：14638260
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:25:03.343
> 
> 标签：python, text, python-3.x

我正在使用 python33 并想从包含单词和数字的文本文件中获取一串数字（下面复制/粘贴的 txt 文件中的第 30 行）。捕获所需的数字后，我想使用一个等式（即（number-30）/2）转换它们，然后找到它们的平均值并将其写入一个新文件（例如 Scope22.txt 或 csv）。我有许多单独的文件，这是第一个必须进行类似处理的文件，每个平均值都将写入同一个文件（Scope22.txt 或 csv）。附件包含关注的数量（0.0, 66.0, 70.0, 0.0, 0.0, 81.0, 64.0, 0.0, 76.0）......转换它们（（number-30）/ 2）然后找到它们的平均值。
我衷心感谢您的帮助。

我的.txt：

```
次要类型范围
有效时间 201012132300
范围 536
西塔 48
身份证坐
名称 站点
拉特中心 23.45459
伦敦中心 -22.766379
分辨率1 1.0
分辨率1 1.0
高度 1 11.0
高度3 600.0
数据索引
输入文件类型 AAA,0,1,PPTOA
次要产品参数 SCOPe,,BBBBBBB,KKKKK_LIST_SIT,0,0,1,1
TableLabels_Locations ID 名称 有效纬度经度范围 Theta BBN Yyy
TableStart_SiteLocations
"LLL", "QQQQ_WWWWW", 1, 23.45459,-22.766379, 536.11,48.14, 55,22;
TableEnd_SiteLocations
TableLabels_TableInfoSites ID Lat Lon Range Theta BMHT PNTVlU Min Max Avg Median P95 AbsDev Var Sd Skew Curt
TableStart_TableInfoSites
LLL, 23.45459,-22.766379, 536.11,48.14, -1.00, 0.00, 0.00, 81.00, 39.67, 64.00, 0.00, 35.26,1.44e+03, 37.96, -0.14, -2.13;
TableEnd_TableInfoSites
TableLabels_TableDis Dis M
TableStart_TableDis
LLL, 4,200,190,180,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0, 0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,;
TableEnd_TableDis
TableLabels_TableData 值_M
TableStart_TableData
LLL, 0.0, 66.0, 70.0, 0.0, 0.0, 81.0, 64.0, 0.0, 76.0,;
TableEnd_TableData

```

这是我的代码：

```
STATS11_filename='C:/Python33/STATS11.txt'
STATS11_filename=open(STATS11_filename,'r')
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline() 
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline() 
line=STATS11_filename.readline()
line=STATS11_filename.readline()
line=STATS11_filename.readline()    
line=STATS11_filename.readline()
b=line=STATS11_filename.readline()
d=(str(b[7:-3]))
print(len(b[7:-3]))
STATS11_filename.close()
a=7
Scope22_filename='C:/Python33/Scope22.txt'
Scope22_filename=open(Scope22_filename,'w')
for i in range (len(b[7:-3])):
    if (b[a])>='64' or (b[a])<='254':
        Scope22_filename.write(b[a])       
             if a==53:
                 quit
             else:
                 a=a+2
Scope22_filename.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:07:54.120

您的变量 b 是一个字符串（在您的示例中，b 等于 "0.0, 66.0, 70.0, 0.0, 0.0, 81.0, 64.0, 0.0, 76."）并且您的变量 a 是一个 int （a 等于 7），然后是 b[a]将只引用一个字符，这不能是 '64'（两个字符长）。

我想你想要做的是像这样得到一片`if float(b[a:a+3])>=64 or float(b[a:a+3])<=254:`

（在 Python 中可以通过 来改进`if 64 <= float(b[a:a+3]) <= 254:`）

你真的想计算这一系列数字的平均值吗？

如果是这样，您应该执行以下操作：

```
b = list(map(lambda n: (float(n)-30)/2, b.split(","))
b = sum(b)/len(b) 
```

与你的概率无关，但不是复制/过去一堆`line=STATS11_filename.readline()`你可以做的`[STATS11_filename.readline() for i in range(29)]`（即使我认为必须有一个函数可以跳转到你想要的行（也许））。

**编辑：**确实，您也可以这样做：`b = STATS11_filename.readlines()[29]`.

# python - Python 检查中 <..> 的含义

> ID：14638261
> 
> 赞同：2
> 
> 时间：2013-02-01T01:25:06.727
> 
> 标签：python

在 IPython 会话中，我有以下内容：

```
> my_array?
Type:       ndarray
String Form:
[[ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.] <...> [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]
           [ 1.]]
Length: 500 
```

上面是什么**`<...>`** 意思？我有一维数组的一维数组还是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:04:23.427

`<...>`只是当字符串太长时，IPython 如何跳过值。在[IPython/core/oinspect.py](https://github.com/ipython/ipython/blob/master/IPython/core/oinspect.py)：

```
 # String form, but snip if too long in ? form (full in ??)
    if detail_level >= self.str_detail_level:
        try:
            ostr = str(obj)
            str_head = 'string_form'
            if not detail_level and len(ostr)>string_max:
                ostr = ostr[:shalf] + ' <...> ' + ostr[-shalf:]
                ostr = ("\n" + " " * len(str_head.expandtabs())).\
                        join(q.strip() for q in ostr.split("\n"))
            out[str_head] = ostr
        except:
            pass 
```

# python - Python 2.7：如何在 Google App Engine 中使用 BeautifulSoup？

> ID：14638262
> 
> 赞同：15
> 
> 时间：2013-02-01T01:25:24.400
> 
> 标签：python, google-app-engine, beautifulsoup

我正在尝试遵循：

```
from bs4 import BeautifulSoup 
```

并得到了错误

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/admin/__init__.py", line 355, in post
    exec(compiled_code, globals())
  File "<string>", line 1, in <module>
ImportError: No module named bs4 
```

我该如何使用它`Google App Engine runtime 2.7`？

**更新**
我的项目结构看起来像

```
flask-appengine-template/
                        docs/
                        licenses/
                        src/
                            application/
                                        static/
                                        templates/
                                        models.py
                                        settings.py
                                        urls.py
                                        views.py
                        libs/
                            bs4/
                         app.yaml
                         src.py 
```

我从[这里](https://github.com/kamalgill/flask-appengine-template)使用这个模板 由于`app.yaml`is的父级`src`，我添加了一个文件`src.py`并在那里添加了两行。

我仍然看到同样的错误

```
ImportError: No module named bs4 
```

但是，我的项目名称`app.yaml`是`flaskonappengine` 请告诉我我仍然做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-01T14:05:03.293

如果您想使用未包含[在此列表](https://developers.google.com/appengine/docs/python/tools/libraries27)中的 3rd 方库，则必须手动添加它们。

为了手动包含任何其他库，您必须将它们放在所在的目录中`app.yaml`。因此，例如，如果您具有以下结构：

```
hello
├── libs
│   └── bs4 
├── hello.py 
└── app.yaml 
```

然后在你的`hello.py`你必须把这两行放在文件的开头：

```
import sys
sys.path.insert(0, 'libs') 
```

完成此操作后，您将能够使用要放入该`libs`目录的任何 3rd 方库。例如：

```
from bs4 import BeautifulSoup 
```

## 更新

由于您使用的是该框架，因此回滚您的更改并使用与用于烧瓶或 werkzeug 或其他 3rd 方库的相同模式。把bs4放到src目录下试试就可以正常包含了。

# dart - 在 dart vm 上使用 math.pow() 的奇怪行为

> ID：14638268
> 
> 赞同：1
> 
> 时间：2013-02-01T01:26:09.193
> 
> 标签：dart

其他人在 Dart vm 中有这个问题吗？出了什么问题？

```
import 'dart:math' as math;

void main() {
  print ( math.pow( 2, 60 ) ); // -> 1152921504606846976
  print ( math.pow( 2, 61 ) ); // -> 2305843009213693952
  print ( math.pow( 2, 62 ) ); // -> -4611686018427387904
  print ( math.pow( 2, 63 ) ); // -> -9223372036854775808
  print ( math.pow( 2, 64 ) ); // -> 18446744073709551616
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:54:34.000

Math.pow 和大量数字中有一个错误：[https ://code.google.com/p/dart/issues/detail?id=8259](https://code.google.com/p/dart/issues/detail?id=8259)

约翰

# python - 只能在交互模式下使用 Scapy？

> ID：14638271
> 
> 赞同：1
> 
> 时间：2013-02-01T01:26:28.223
> 
> 标签：python, scapy

我只想做-

```
from scapy import *

target = "42.42.42.42"
packet = IP()/UDP()
packet.dst = target

del pak[IP].chksum
del pak[TCP].chksum

pak.show2() 
```

但是没有定义“IP()”和“UDP()”。

如果我使用 scapy.all 它会给我这个；

```
Traceback (most recent call last):
  File "C:\Python27\scapy_stuff.py", line 1, in <module>
    import scapy.all
  File "C:\Python25\Lib\site-packages\scapy\all.py", line 13, in <module>
    from arch import *
  File "C:\Python25\lib\site-packages\scapy\arch\__init__.py", line 75, in <module>
    from windows import *
  File "C:\Python25\Lib\site-packages\scapy\arch\windows\__init__.py", line 19, in <module>
    from scapy.arch import pcapdnet
  File "C:\Python25\lib\site-packages\scapy\arch\pcapdnet.py", line 157, in <module>
    import dnet
ImportError: No module named dnet 
```

我到处看到人们只是使用交互模式，我开始相信这是唯一的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T15:42:14.467

你需要做一个`from scapy.all import *`.

SecDev 文档中的所有详细信息，[使用 Scapy 构建您自己的工具](http://www.secdev.org/projects/scapy/build_your_own_tools.html)。

您可以导入整个 scapy.all 命名空间，也可以专门导入您需要的内容。

对于 dnet 问题，请在适合您的 Scapy 安装的位置尝试此配置。

```
Change "scapy.config.conf.use_dnet = 1" to equal = 0 
```

根据您的系统，它位于 scapy/arch/unix.py 或 scapy/arch/pcapdnet.py

# linq - 如何将嵌套的 NOT EXISTS 查询转换为 LINQ

> ID：14638273
> 
> 赞同：0
> 
> 时间：2013-02-01T01:26:31.610
> 
> 标签：linq, tsql

知道如何将其转换为 linq 吗？

```
SELECT DISTINCT PartNumber AS [PartNumber That Includes EVERY ItemNumber Listed in @RequiredItemsTable]
  FROM Part.BillsOfMaterialsFlattened AS bom1 
  WHERE NOT EXISTS
       (SELECT *
          FROM @RequiredItemsTable w
         WHERE NOT EXISTS
               (SELECT *
                  FROM Part.BillsOfMaterialsFlattened AS bom2
                 WHERE (bom1.PartNumber = bom2.PartNumber)
                   AND (bom2.ItemNumber = w.ItemNumber))); 
```

我在这个网站上看到了几个例子，试图模仿它们......但到目前为止还没有到达那里。

谢谢！

这是我希望通过 linq 实现的表格示例。前面的 T-SQL 可以解决问题。

```
Part.BillsOfMaterialsFlattened
PartNumber  ItemNumber
10041047    10034480
10041047    10041090
10041047    10041091
10041048    10034480
10041048    10041091
10041049    10034650
10041049    10041090
10041049    10041091
10041050    10034650
10041050    10041091
10041061    10001331
10041061    10001422

@RequiredItemsTable
ItemNumber
10041090
10041091 
```

想要生成 LINQ 语句`IQueryable<String>`

```
PartNumber (Part Numbers that include all Required Item Numbers)
10041047
10041049 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:06:17.497

以下 linq 可以解决问题：

```
var requiredItems = criteria.BomItemsIncluded.AsQueryable();
var partNumbers = (from b in _db.BillsOfMaterialsFlatteneds
                    group b by b.PartNumber into g
                    where requiredItems.All(r => g.Select(_ => _.ItemNumber).Contains(r))
                    select g.Key).Distinct(); 
```

# arduino - Arduino 上的 LED

> ID：14638276
> 
> 赞同：-2
> 
> 时间：2013-02-01T01:27:29.290
> 
> 标签：arduino

如果我将[LED](http://en.wikipedia.org/wiki/Light-emitting_diode) (3.1 V) 或 LED (2.4 V) 插入 Arduino 3.5 V 端口会发生什么？会不会损坏LED？我需要一个电阻吗？如果有，是什么类型的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:12:51.777

你真正应该关心的是什么样的电流将通过你的 LED。我猜你的 LED 的最大工作电流约为 20 mA，正常电流为 10 mA。那些 3.1 V 或 2.4 V 值是 LED 上的正向压降。如果您的 Arduino 端口输出 3.5 V 并且您的 LED 下降 3.1 V，那么您仍然有 0.4 V 必须通过某种电阻下降。由于您希望通过 LED 将电流限制在 10 mA 左右，因此您应该将与 LED 串联的电阻值设置为 R = V/I 或 R = 0.4 V / 0.01 A = 40 ohms。

# html - IE 9 的 Magic Zoom z-index 问题

> ID：14638281
> 
> 赞同：0
> 
> 时间：2013-02-01T01:27:39.990
> 
> 标签：html, css, internet-explorer, z-index, magiczoom

有没有人在 IE 8 或 9 上遇到过[Magic Zoom的 z-index 问题？](http://www.magictoolbox.com/magiczoom/)

我有一个元素，`z-index: 1`
MagicZoom 创建了一个元素，`z-index: 100`
但是 IE9 在 100 的顶部显示了 z-index 1 的元素。

这是[页面](http://famous.fbstest.com.au/CustomPages/zindex1.html)。

奇怪的是，如果我“冻结”条件并删除magiczoom.js，我将无法再重现该问题。这是[结果](http://famous.fbstest.com.au/CustomPages/zindex.html)，即使在 IE 9 上也很完美。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:23:32.627

文档说：

* * *

如果你给它一个唯一的 id 并用 div 引用它，你可以将缩放的图像放在页面上的任何位置。将您的 div 放在代码中的任何位置并使用 CSS 定位它。示例 HTML：缩放

```
<a href="big.jpg" class="MagicZoom" rel="zoom-position:#yourzoom">
    <img src="small.jpg"/>
</a> 
<div id="yourzoom"></div> 
```

* * *

所以我建议将目标 div 添加到 body 并通过 css 设置它的位置 或者您可以尝试将目标 div 添加到`td`元素，但如果表将有其他行/列问题可能会再次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:45:50.890

您正在使用 3.1.18 版的 Magic Zoom，它已经 3 岁了。

如果您升级到最新版本：4.0.19，此问题将得到解决。

# android - VerifyError：错误 #1079：加载的代码中不允许使用本机方法

> ID：14638283
> 
> 赞同：2
> 
> 时间：2013-02-01T01:27:52.313
> 
> 标签：android, ios, actionscript-3, flash

我有一个用 AS3 编译的 Android/iOS 应用程序。我遇到了问题，并被建议升级到 Flash Builder 4.7（从 4.6）。我这样做了，当我尝试使用新的 Air 3.4 运行时，我收到以下错误：

```
VerifyError: Error #1079: Native methods are not allowed in loaded code. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:46:38.033

对我来说同样的问题。我通过以下方式解决了这个问题：

项目 -> 属性 -> 库路径 ->

从 fb 4.6 中清除此处的旧库并单击“添加空气 sdk”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:34:44.360

所以我尝试卸载 Flash Builder 4.7 64 位并安装 32 位版本。这没有帮助（同样的问题）。

但后来我尝试了一些不同的东西。所以我的工作区最初是我的 Adob​​e Flash Builder 4.6（因为我在那个工作区中有很多 AS3 项目，并且想在 4.7 中加载它）。显然这导致了我的问题（或者至少在我执行以下操作时它消失了）。

我决定使用 Flash Builder 4.7 的默认工作区 (Users\\Adobe Flash Builder 4.7) 而不是切换到 4.6。然后，我导入了位于 4.6 目录中的现有项目。编译并运行良好！

我想从 Flash Builder 4.6 升级到 4.7 并使用 4.6 中的旧工作区时会出现问题……不知道为什么会导致这个奇怪的错误，但我很高兴能够继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T14:18:10.017

这就是帮助我的原因（也可能帮助其他人）。

我在 FB 4.6 上，我清楚地记得我将我的 SDK 更新到了 Apatch 13.0。之后我项目中的库搞砸了。我删除了项目（也删除了文件），然后再次导入了同一个项目的副本。像魅力一样工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T02:04:17.847

我有这个问题。原来是因为在

项目 -> 属性 -> 库路径

**引用了较早版本的 playerGlobal.swc，而不是作为 Air SDK 的一部分提供的默认版本。删除它并从 Air SDK 手动添加 playerGlobal SWC 解决了这个问题**。

（显然，Playerglobal.swc 仅包含 Player 中类的接口定义，包括本地方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-29T06:44:25.437

就我而言，问题出在构建脚本中。我升级到 AIR SDK 22，但构建任务包含：

```
<target-player>11.1</target-player> 
```

删除此参数或将值更改为 23.0 解决了问题。

# android - 调用主要活动之前的Android屏幕

> ID：14638284
> 
> 赞同：0
> 
> 时间：2013-02-01T01:28:02.460
> 
> 标签：android, view, android-activity, screen

我正在为 Android 4.x 开发一个应用程序，并意识到在我的主屏幕加载前一秒我有一个带有默认操作栏的黑屏。

以前有人遇到过这个问题吗？可以将其关闭或显示不同的“默认”屏幕吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:34:37.177

要指定您要首先加载的活动，请在您的 AndroidManifest.xml 中，将其放入`<activity>`：

```
<intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
 </intent-filter> 
```

例如：

```
<activity
         android:name=".MainActivity"
         android:label="@string/app_name" >
         <intent-filter>
              <action android:name="android.intent.action.MAIN" />

              <category android:name="android.intent.category.LAUNCHER" />
          </intent-filter>
</activity> 
```

# javascript - JS 旋转横幅不显示在 IE 中

> ID：14638291
> 
> 赞同：1
> 
> 时间：2013-02-01T01:28:49.787
> 
> 标签：javascript, rotation, ads

我目前在我的网站中使用 JS 旋转横幅。横幅出现在所有浏览器中，大多数版本的 IE 除外。

```
var banners = Array(); //The first element pushed in the array is at the index 0 

banners.push({link: '', target:'_blank', image: '', title: ''});

var rotate = function() {

//Find all images with class myImage
var images = document.getElementsByClassName('myImage');
var total  = images.length;

//Looping through all the elements found
for (var i = 0; i < total; i++) {
    if (banners.length == 0) {
          break;//No more banners can't display anymore
                }

    //Retrieve a random banner
     var rnd = Math.floor((Math.random()*banners.length));
    //Add the html to the element
    images[i].innerHTML = '<a href="'+banners[rnd].link+'" target="'+banners[rnd].target+'"><img src="'+banners[rnd].image+'" title="'+banners[rnd].title+'" /></a>'; //Added target blank and empty alt attribute
    banners.splice(rnd, 1);
}
}

    if (window.addEventListener)  // W3C DOM
    window.addEventListener('load',rotate,false);
else if (window.attachEvent)  // IE DOM
     window.attachEvent("onload", rotate); 
```

然后我在我的 html 中使用一个简单的 div 调用横幅。

```
< div class="myImage">< /div> 
```

任何帮助都会非常感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:33:27.507

`getElementsByClassName`仅在 IE9 中添加。要支持 IE8，您可以使用`querySelectorAll(".myImage")`，但对于 IE7 及更低版本，您需要使用不同的东西，例如`name`属性和`getElementsByName`.

也就是说，如果页面上只有一个这样的横幅，您可以轻松使用`<div id="myImage">`-`getElementById`即使在旧版本的 IE 中也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:11:01.860

正如其他人所说，`getElementsByClassName`大多数版本的 IE 都不支持。

我注意到您还为事件侦听器使用了其他特定于 IE 的代码。

这种事情正是编写像 jQuery 这样的库的原因。您需要的所有功能都在 jQuery 中可用，并且完全跨浏览器兼容。我不知道您是否已经在使用它，但我强烈推荐它作为您的问题的解决方案；它会让你的代码更整洁。

使用 jQuery：

```
$(document).ready(function() {
    var banners = Array(); //The first element pushed in the array is at the index 0 
    banners.push({link: '', target:'_blank', image: '', title: ''});

    //Find all images with class myImage
    $('.myImage').each(function() {
        //Looping through all the elements found
        if (banners.length == 0) {
              return; //No more banners can't display anymore
        }

        //Retrieve a random banner
        var rnd = Math.floor((Math.random()*banners.length));
        //Add the html to the element
        $(this).html('<a href="'+banners[rnd].link+'" target="'+banners[rnd].target+'"><img src="'+banners[rnd].image+'" title="'+banners[rnd].title+'" /></a>'); //Added target blank and empty alt attribute
        banners.splice(rnd, 1);
    }
}); 
```

比你的代码短得多，也更容易阅读。它可以变得更短、更高效，但我现在有时间将现有代码修改为 jQuery 样式。我希望它无论如何都能证明我的观点。

# python - 通过csv文件的多个条件迭代列表 - Python

> ID：14638292
> 
> 赞同：0
> 
> 时间：2013-02-01T01:28:51.340
> 
> 标签：python, csv, iteration

我在运行 Python 2.7.3 的 Windows 7 x64 工作站上。

我有一个包含项目 ID 行的 CSV 文件，每一行属于一个组 ID，如下所示：

```
GroupID ItemID
a   1
a   2
a   3
b   4
b   5
b   6
c   7
c   8
c   9
etc… 
```

我需要做的是生成一个元组列表，其中每个元组是 GroupID 的字符串和与 GroupID 关联的每个 ItemID 的列表，如下所示：

```
[('a', [1, 2, 3]), ('b', [4, 5, 6]), ('c', [7 , 8, 9])] 
```

到目前为止，我已经考虑过使用函数或列表来设置转换以对 GroupID 列进行重复数据删除，然后在第二个循环中进行某种比较 if 语句。有人可以给我一些建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:35:05.010

您正在寻找[`itertools.groupby()`](http://docs.python.org/3/library/itertools.html#itertools.groupby)：

> 创建一个从可迭代对象返回连续键和组的迭代器。键是计算每个元素的键值的函数。如果未指定或为 None，则 key 默认为标识函数并返回未更改的元素。通常，iterable 需要已经在相同的 key 函数上排序。

例如：

```
import csv
from itertools import groupby
from operator import itemgetter

with open("test.csv") as file:
    reader = csv.reader(file)
    next(reader) #Skip header
    data = groupby(reader, itemgetter(0))
    print([(key, [item for _, item in items]) for key, items in data]) 
```

我们将它与[`operator.itemgetter()`](http://docs.python.org/3.3/library/operator.html#operator.itemgetter)表示我们想按行中的第一项分组，然后我们使用嵌套[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)来提取我们想要的数据。

这给了我们：

```
[('a', ['1', '2', '3']), ('b', ['4', '5', '6']), ('c', ['7', '8', '9'])] 
```

当然，除非你*需要*一个列表，否则最好在这里使用生成器表达式来懒惰地进行操作。（我们在这里使用列表推导来获得不错的输出）。

请注意，我假设您的文件是逗号分隔的，就像您说的那样，而不是您的示例中所示。如果它是制表符分隔的，请使用`csv.reader(file, dialect=csv.excel_tab)`它来正确解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:37:46.800

如果分组键是连续的，那么类似于：

```
from itertools import groupby
from operator import itemgetter

data = [('a', 1), ('a', 2), ('b', 3), ('b', 5)]

grouped = [(k, map(itemgetter(1), g)) for k, g in groupby(data, itemgetter(0))]
# [('a', [1, 2]), ('b', [3, 5])] 
```

否则，使用`collections.defaultdict`.

# python - 如何安装 sqlite3 数据库表以与 Django 项目一起运行？

> ID：14638293
> 
> 赞同：0
> 
> 时间：2013-02-01T01:28:54.060
> 
> 标签：python, django, sqlite

我正在阅读有关如何使用 Django 构建 Web 应用程序的教程。到目前为止，我已经安装了 Django，它似乎可以找到。

本教程要求通过键入（在 Windows 命令提示符中）创建项目文件夹：

```
django-admin.py startproject django_bookmarks 
```

文件夹和文件已成功创建。见下文：

```
django_bookmarks/
__init__.py
manage.py
settings.py
urls.py 
```

然后它说我们现在可以使用 SQLite3（稍后当我们部署时，我们将需要更大的数据库引擎，例如 MySQL。然后我必须通过运行 settings.py 在引擎中设置数据库。并确保代码编写如下：

```
DATABASE_ENGINE = 'sqlite3'
DATABASE_NAME = 'bookmarksdb'
DATABASE_USER = ''
DATABASE_PASSWORD = ''
DATABASE_HOST = ''
DATABASE_PORT = '' 
```

我做了上面的更改。坏事来了。我需要通过键入（在 Windows 命令提示符中）创建应用程序将运行的数据库表：

```
python manage.py syncdb 
```

然后我收到一条错误消息，内容如下：

```
"load_backend raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured:'sqlite3 isn't an available database
backend.
Try using django.db.backends.sqlite3 instead.
Error was: No module named base" 
```

现在，我该如何设置那些需要的 sqlite3 数据库表？任何帮助都可以，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:33:10.783

数据库引擎需要设置为 django.db.backends.sqlite3

```
DATABASE_ENGINE = 'django.db.backends.sqlite3'
DATABASE_NAME = 'bookmarksdb'
DATABASE_USER = ''
DATABASE_PASSWORD = ''
DATABASE_HOST = ''
DATABASE_PORT = '' 
```

更新的 Django 版本（1.3 后）需要完全指定这一点。如果您正在关注一本书或指南，它可能指的是较旧的 Django 版本。

# mysql - 根据命令显示特定的输出 MYSQL

> ID：14638294
> 
> 赞同：1
> 
> 时间：2013-02-01T01:28:55.397
> 
> 标签：mysql, sql, greatest-n-per-group

我有一张下表。

```
ID Name State Date
1   A1   First 1/10/2013
2   A1   Second 1/11/2013
3   A1   Last   1/12/2013
4   A2   First  1/10/2013
5   A2   Closed 1/11/2013
6   A3   First  1/10/2012
7   A3   Second 1/10/2012 
```

状态的优先顺序如下

```
 1 First
 2 Second
 3 Last
 4 Closed 
```

这意味着我必须只显示名称的最新状态（前提是状态未关闭。如果状态关闭，我不必显示该 ID）。

所以上表的输出应该是

```
ID Name State Date
3  A1    Last  1/12/2013
7  A3    Second 1/10/2012 
```

我不确定如何进行？如果我知道的话，我会尝试一些东西，但现在我正在努力解决它。我可以这样做`php`并将输出存储在另一个中`table/view`并显示它，但它必须在数据库中完成。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:31:10.157

假设您`ID`是 auto_incremented。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  name, MAX(ID) max_ID
            FROM    tableName
            GROUP   BY Name
        ) b ON  a.ID = b.max_ID AND
                a.Name = b.Name
WHERE   a.State <> 'Closed' 
```

 ~~或者如果列日期的数据类型是`DATE`

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  name, MAX(date) max_date
            FROM    tableName
            GROUP   BY Name
        ) b ON  a.ID = b.max_date AND
                a.Name = b.Name
WHERE   a.State <> 'Closed' 
```

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:46:05.530

我也提出了这样的解决方案，但我不确定我的是否更快。

```
SELECT * FROM 
    (SELECT id, name, state, date FROM myTable ORDER BY state DESC, id DESC) AS subQuery
WHERE state <> 'Closed' GROUP BY name 
```

**EDIT:** I tried it this way because GROUP BY will only return you the first item, not the last one, so by first ordering it to put first the one you look for then grouping them, you get it!~~~~

# ios - 对 Xcode 中的调试不太熟悉。知道为什么会抛出这个异常吗？

> ID：14638297
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:29:15.593
> 
> 标签：ios, objective-c, xcode

![ ](../Images/88040633a77ae9e5e7f3bf308b4da4df.png)

不太清楚为什么我会遇到异常。这可能是一个很常见的错误，但老实说，我不知道。谢谢您的帮助。

![这是所有抛出异常的断点。](../Images/15cac99b07a9eae38d7db0dcfaeb6abf.png)

上图来自我的 main.m 文件

![抛出异常](../Images/c17094b11e2ecb9e4f29ecc627338b4c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:19:51.150

UITableViewControllers 期望他们的顶级视图是一个 UITableView。

看起来你有一个 UITableViewController（或它的子类），它的顶层**不是**UITableView。因此，请检查情节提要中的每个顶级视图。

# c - 如何在 C 中将任何数据类型转换为字符串（不知道它的类型）

> ID：14638298
> 
> 赞同：1
> 
> 时间：2013-02-01T01:29:29.270
> 
> 标签：c, string, variadic-functions

我正在尝试编写一个函数，它采用任意数量的参数格式化并将其打印到控制台。我希望函数具有以下签名

```
void formatted_text(...); 
```

我希望以下列方式调用此函数。

```
formatted_text("String 1", 1, "String 2", 2.2); 
```

现在的问题是，在函数中我不知道哪个参数属于哪个数据类型。一种解决方案是我可以要求用户将所有参数转换为字符串，然后将其传递给这样的函数

```
formatted_text("String 1", "1", "String 2", "2.2"); 
```

但使用起来不会那么方便。我可以做的另一件事是要求用户为每个参数提供数据类型，这又不是一个很好的解决方案。

有没有办法在不知道其数据类型的情况下将任何数据类型转换为字符串。我知道答案......，但你可能知道一些我不知道的事情。

处理这种需求之王的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:41:17.987

C 数据类型本身并不是自描述的，就像它们通常在 Java、Python、PHP 等其他语言中一样。您**必须**提供一些元数据，以便`formatted_text(...)`知道如何解释您在堆栈上传递的字节。正如评论所提到的，您传递给的格式字符串（即第一个参数）`printf`是元数据可以采用的一种形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:41:43.357

您的问题有两个部分：需要一个带有可变数量参数且方便的打印函数；并且想要一种打印任意用户定义数据类型的好方法。

对于第一部分，您可以编写一个“可变参数”函数，与`printf()`. 但是你有一个问题：没有办法计算有多少参数，而且你不知道参数的类型。您可以使函数更简单，而不是`printf()`说每个参数都必须是指向字符串的指针，并且最后一个参数必须始终是`NULL`指针；然后你可以编写一个简单的循环，直到它到达`NULL`. 谷歌搜索`c varargs`以了解更多信息。

如果您这样做，您可以创建一个宏，该宏始终扩展为以 a`NULL`作为最后一个参数调用您的函数，以减少用户忘记将`NULL`. 像这样的东西：

```
#define CONVENIENT_PRINT(...) \
    my_convenient_print_function(__VA_ARGS__, NULL) 
```

当然，有趣的部分是一些编译器在上述情况下工作得很好，但有些编译器不能。编写具有可变数量参数的宏不像 C 的某些其他部分那样可移植。但上述形式在 Microsoft C 和 GCC 和 Clang 中有效，因此您可能对它没问题。

对于第二部分，C 并没有给你太多帮助。我可以为这个问题提出两种可能的解决方案。一是要有严格的命名约定，方便用户判断调用什么函数；对于任何数据类型`FOO`，总会有一个函数`StringFromFoo()`，用户必须学会调用正确的函数。第二个是实现自己的面向对象类型，并确保每个对象都有一个指向方法函数`ToString()`或其他调用的指针。像这样的东西：

```
typedef struct
{
    char const *(*ToString)(void const *this);
} FOO_CLASS;  // class struct
static FOO_CLASS _foo_class;

char const *FooToString(void const *this)
{
    return NULL; // yeah I'm not really implementing this here
}
_foo_class.ToString = FooToString;

typedef struct
{
    // member variables go here
    int x;
    float f;
    // need a reference back to the class; just one
    FOO_CLASS *pclass;
} FOO;  // instance struct

int InitFoo(int x, float f, FOO **ppfooNew)
{
    FOO *pfoo = malloc(sizeof(FOO));
    if (!pfoo)
    {
        *ppfooNew = NULL;
        return ENOMEM;
    }
    pfoo->x = x;
    pfoo->f = f;
    pfoo->pclass = &_foo_class;

    *ppfooNew = pfoo;
    return 0; // success!
}
// in your code:
FOO *pfoo;
char const *str;

if (InitFoo(x, f, &pfoo))
    goto crash_and_burn;

str = pfoo->pclass->ToString(pfoo); 
```

哇，这比面向对象的语言更烦人！那是面向对象的代码，但 C 对你一点帮助都没有；你必须自己做所有的工作。

注意我们如何使用`pfoo`查找类，然后在类中找到方法函数，*然后*我们仍然必须`pfoo`作为方法函数的参数（`this`指针）传入。C++ 为您完成了这一切。

至少您可以为调用方法函数的常见工作制作一个宏：

```
#define STR(instance) \
    (instance)->pclass->ToString(instance)

str = STR(pfoo); 
```

对于这个简单的示例，我们在类中只有一个函数。对于一个真实的例子，你可能会有更多的功能！对于单个函数，您可以将其放入实例中，它的工作量会减少，但这不会扩展，如果您完全这样做，您应该始终如一地这样做。

所以，我认为大多数人会采用命名约定解决方案，并称其为足够好。我以部分面向对象的风格编写了一个大型项目，我认为它有助于使代码更易于管理。即使在面向对象的风格中，我仍然有很多命名约定。

PS你可能已经注意到上面的代码实际上并没有实现`ToString()`，实现它实际上会有点烦人。字符串会去哪里？如果您的需求非常简单，您可以在`ToString()`函数内部使用静态缓冲区，但这不是一个好的解决方案……否则您需要更改`ToString()`以传入缓冲区，或者调用它`malloc()`以获取新的字符串缓冲区；然后处理可能的失败`malloc()`；然后在处理完字符串后以某种方式调用`free()`（或者只是可耻地泄漏内存！）。这是 C++ 将为您做的更多事情……您可以创建 a `std::string`，将其传递，当它超出范围时，将调用析构函数。

# c++ - 如何避免重写初始值设定项列表中存在的构造逻辑？

> ID：14638302
> 
> 赞同：0
> 
> 时间：2013-02-01T01:30:50.973
> 
> 标签：c++

假设我有一个 CPP 类

```
 class A {
    A() :
     max_(0),
     num_(0),
     sum_(0),
     sum_squares_(0) {}

    void Clear() {
      min_ = bucketMapper.LastValue();
      max_ = 0;
      num_ = 0;
      sum_ = 0;
      sum_squares_ = 0;
    }

    void SomethingElse {}
} 
```

我在构造函数和 Clear 中有初始化代码，有没有办法可以避免两次使用相同的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T01:33:33.543

如果您需要多个调用相同逻辑的构造函数，则应将所有构造函数编写在`Clear`or`Reset`函数中并从每个构造函数中调用它。

在相当少的情况下需要初始化器列表，除此之外，它只是提高效率的首选。

它是必需的：

*   基类（除非默认不存在参数构造函数并且您可以调用它）
*   作为参考的成员
*   `const`会员

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:41:57.057

这个原始代码，

```
 class A {
    A() :
     max_(0),
     num_(0),
     sum_(0),
     sum_squares_(0) {}

    void Clear() {
      min_ = bucketMapper.LastValue();
      max_ = 0;
      num_ = 0;
      sum_ = 0;
      sum_squares_ = 0;
    }

    void SomethingElse {}
} 
```

由于缺少参数列表和分号，将无法编译，并且无法`min_`在默认构造函数中初始化，从而使该成员具有**不确定的值**，并且其中的所有内容都**无法访问**。

你真的想赋予`min_`不同的、新的价值`Clear`吗？

如果不是，那么只需分配一个默认构造的实例：

```
*this = A(); 
```

从构造函数调用`Clear`通常不是一个好主意，主要是因为它非常类似于用赋值来表达构造的不良习惯，因此可能会诱使您这样做。

对于更通用的解决方案，请排除纯数据：

```
namespace detail {
    struct A_Data
    {
        double min_;
        double max_;
        int    num_;
        double sum_;
    };
}  // namespace detail

class A
    : private detail::A_Data
{
public:    
    A(): detail::A_Data() {}

    void clear()
    {
        *this = A();
        min_ = bucketMapper.LastValue();
    }

    void somethingElse() {}
}; 
```

但最有可能

```
*this = A(); 
```

将作为您的需求的解决方案。

* * *

-1 表示非真实代码。请在以后的问题中发布真实代码。不像。

# css - 使用and保持一致的行距

> ID：14638308
> 
> 赞同：1
> 
> 时间：2013-02-01T01:31:24.530
> 
> 标签：css

添加`<sup>`or`<sub>`标记可以消除文本块的行距，我该如何防止这种情况发生？

![前](../Images/f311009e57e5cc903e1efb133c2c267f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:31:24.530

使用 CSS 覆盖默认浏览器样式：

```
sup, sub
{
    height: 0;
    line-height: 1;
    vertical-align: baseline;
    _vertical-align: bottom;
    position: relative;
}

sup { bottom: 1ex; }
sub { top: .5ex; } 
```

请注意，在版本 7 之前，IE`vertical-align`在其他浏览器中是唯一的。使用这种方法，我需要 IE 6 及以下版本的下划线破解。

**前：**

![前](../Images/f311009e57e5cc903e1efb133c2c267f.png)

**后：**

![后](../Images/ecab443d529eb855aec66b5061b84006.png)

[资源](http://www.adobe.com/cfusion/communityengine/index.cfm?event=showdetails&postId=5341&productId=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:28:46.050

除了@DannyBeckett 的出色答案之外，还有一种完全不同的方法，它可以在工作时产生更好的排版质量——但目前除了现代浏览器中的一些字体（主要是 Microsoft C 字体）外，还不能工作。我希望它在几年内成为一个现实的选择，即使现在在某些条件下它也可以使用。

除了使用`sup`，您可以使用，说，`<span class=sup>`并指定使用上标样式字形，通过设置

```
.sup { font-feature-settings: "sups"; } 
```

以及带有浏览器前缀的[`font-feature-settings`](https://developer.mozilla.org/en-US/docs/CSS/font-feature-settings).

[演示](http://www.cs.tut.fi/~jkorpela/www/sup.html)可用。预计它可以在现代 Windows 环境中工作，在其他地方几乎没有。

这仅适用于实际包含此类字形的字体，以使用 OpenType 功能可访问的方式，并且具有增加但仍然有限的浏览器支持。但是当它工作时，它使用由创建字体的排版师设计的字形，因此可以期望它们很好地适应字体（尽管这种期望并不总是得到满足）。

所以除了消除行间距问题外，这也有助于解决`sup`在更高垂直位置使用普通字符的缩小版本的问题（这样笔画往往太细，并避免出现这个问题太大，实现倾向于使用适度的尺寸缩减，因此结果太大）。

在这方面，使用可下载的字体 via`@font-face`听起来是个好主意。然而，在我测试的谷歌字体中，只有 Source Sans Pro 似乎包含字母的上标字形，并且 a) 使用它作为由谷歌托管由于某种原因无法访问它们，b) 当使用 FontSquirrel 处理时，字形是那里，但不知何故扭曲（例如，“h”看起来比“t”高），即使它们在原始.ttf文件中似乎没问题。

`span`（使用而不使用的原因`sub`是，对于后者，您必须将字体大小设置为 100% 以避免默认大小减小。如果 IE 在这种情况下没有解释百分比错误的讨厌错误，这将是可以的，与 IE 中元素的默认字体大小有关，与父元素字体大小无关。）

# java - 获取线程内存

> ID：14638310
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:31:35.587
> 
> 标签：java, multithreading, memory-management

再会！我无法获取 java 线程的内存使用情况。我的研究把我带到了 ThreadMxBean 库。根据[javadoc`ThreadMXBean#setThreadAllocatedMemoryEnabled`](http://docs.oracle.com/javase/6/docs/jre/api/management/extension/com/sun/management/ThreadMXBean.html#setThreadAllocatedMemoryEnabled%28boolean%29)，应该有一个方法`getThreadAllocatedBytes`允许获取线程的内存。但是，我找不到这种类方法，而存在上述文档中描述的其他方法。

示例`getCurrentThreadCpuTime()`并`isThreadCpuTimeEnabled()`显示在我的代码中。

```
import java.lang.management.ManagementFactory;
import java.lang.management.ThreadMXBean;
import javax.management.AttributeNotFoundException;
import javax.management.InstanceNotFoundException;
import javax.management.MBeanException;
import javax.management.MalformedObjectNameException;
import javax.management.ReflectionException;

class TwoThreadsTest {
    public static void main (String[] args) throws Exception {
        new Coding("Jamaica").start();
        ThreadMXBean threadBean = ManagementFactory.getThreadMXBean();
        long b = threadBean.getCurrentThreadCpuTime();
        boolean bool= threadBean.isThreadCpuTimeEnabled();
        System.out.println(bool);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:44:14.050

`java.lang.management.ThreadMXBean`当方法实际在接口中定义时，您的代码正在使用接口`com.sun.management.ThreadMXBean`。您的链接指的是后者。

### 编辑：

没有“线程记忆”。所有线程在您的进程中共享同一个堆，并且您的线程没有私有内存。getThreadAllocatedBytes() 方法返回的是线程分配的字节数。据我了解，这意味着它还计算分配的不再引用的字节数，并且可能或已经被垃圾收集器回收。

因此，它是线程分配内存的度量，而不是内存使用量的度量。

# objective-c - 更改图像视图对象的位置（非常基本的 iPhone 游戏）

> ID：14638314
> 
> 赞同：0
> 
> 时间：2013-02-01T01:32:07.037
> 
> 标签：objective-c, uiview, uiimageview

我觉得掌握一门新的编程语言最好的方法就是制作简单的游戏。

所以对于我的第一个游戏设置，只有 4 个按钮（上、下、左和右）。这些按钮将更改单个图像视图对象的位置。因此，例如，如果我想按向上，则对象将通过更改其 XY 坐标而向上移动。这就是我卡住的地方，我该怎么做？

这是我的伪代码：

```
_imgShip.frame.position.x += 1; 
```

那行代码在按钮按下事件处理程序中，所以如果我按下 Right 则当前 X 坐标的值将自身加 1。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:35:41.077

你很接近。不过，您最好还是移动中心。

```
_imgShip.center = CGPointMake(_imgShip.center.x + 1.0, _imgShip.center.y); 
```

**更新：** 我还应该注意您可以翻译视图。这有点不同，但也为旋转和缩放打开了大门，这对游戏很有用:)

```
_imgShip.transform = CGAffineTransformMakeTranslation(1.0, 0.0); 
```

对于开始转换，请使用`Make`变体。但也有一些是相互建立的，所以如果你想旋转和翻译，你可以这样做：

```
_imgShip.transform = CGAffineTransformMakeTranslation(1.0, 0.0);
_imgShip.transform = CGAffineTransformRotate(_imgShip.transform, 0.785); // in radians 
```

# javascript - 使用 Javascript 替换图像 src 的目录

> ID：14638315
> 
> 赞同：2
> 
> 时间：2013-02-01T01:32:12.293
> 
> 标签：javascript, greasemonkey

我想替换图像的目录`src`，更改`.*pinterest.com/192/`为`.*pinterest.com/550/`.

我一直在尝试修改此代码以更改目录名称，而不仅仅是删除文件名的“_b”部分。

```
document.getElementById("chrome")
.addEventListener("DOMNodeInserted", function (a) {
if (a.target.tagName && a.target.tagName == "DIV" && /entry\s?/.test(a.target.className)) {
    var b = a.target.getElementsByTagName("img");
    for (var c in b) {
        var d = b[c];
        if (/.*pinterest\.com.*_b\.\w+$/.test(d.src)) {
            d.style.width = d.style.height = "inherit";
            d.src = d.src.replace(/_b\.(\w+)$/, ".$1")
        }
    }
}
}, false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:25:25.717

首先，一些问题/问题：

1.  不清楚是否要*同时*更改`_b`和`192`。你？如果是这样，请链接到具有此类图像的页面。
2.  [`DOMNodeInserted`已弃用](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)，使用它不是一个好主意。
3.  那是`document.getElementById ("chrome")`从哪里来的？这似乎很可疑，如果这是针对 Pinterest 页面的，那么`chrome`在我检查的页面上没有具有 id 的节点。 **链接到您尝试修改的目标页面**。
4.  对于 Pinterest，您还需要重置`max-width`CSS 以使新图像大小生效。

您的代码重构以替换路径中的 192 是：

```
document.getElementById ("chrome").addEventListener (
    "DOMNodeInserted",
    function (zEvent) {
        var newNode = zEvent.target;
        if (
               newNode.tagName  &&  newNode.tagName == "DIV"
            && /entry\b/i.test (newNode.className)
        ) {
            var images = newNode.getElementsByTagName ("img");
            for (var J in images) {
                var image = images[J];
                if (    /pinterest\.com.*_b\.\w+$/.test (image.src)
                    ||  /pinterest\.com\/192\//.test (image.src)
                ) {
                    image.style.width   = "inherit";
                    image.style.height  = "inherit";
                    image.src           = image.src.replace (/_b\.(\w+)$/, ".$1");
                    image.src           = image.src.replace (/\.com\/192\//, ".com/550/");
                }
            }
        }
    },
    false
); 
```

* * *

* * *

但是，考虑到问题 2、3 和 4；**在 Pinterest 上实际运行****的*完整脚本***是：

```
// ==UserScript==
// @name     _Pinterest, resize thumbnails
// @include  http://pinterest.com/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("#ColumnContainer a.PinImage img.PinImageImg", resizeThumbnails);

function resizeThumbnails (jNode) {
    var imgSrc  = jNode.attr ("src");

    if (/pinterest\.com\/192\//.test (imgSrc) ) {
        jNode.css ( {
            width:          "inherit",
            height:         "inherit",
            "max-width":    "550px"
        } );
        jNode.attr ("src", imgSrc.replace (/\.com\/192\//, ".com/550/") );
    }
} 
```

请注意，需要额外的样式和布局模块，但这超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:45:42.693

如果您想了解和修改代码，最简单的方法是将其分解为多个步骤，以便您了解它在做什么。

例如，在此代码行中，您有 if 语句和循环，只会使问题复杂化。

从头开始，假设您知道如何获取初始 URL 字符串。

```
var string = '.*pinterest.com/192/'; 
```

现在我们可以使用 substring 方法将其返回到倒数第二个正斜杠。使用 javascript，我们将使用的两种方法是

```
string.indexOf(searchvalue,start) 
```

和

```
string.substring(from, to) 
```

将它们组合起来：

```
string = string.substring(0, string.substring('//'); 
```

你会注意到我已经用另一个转义了正斜杠，所以它可以被识别而不是被解析。这应该设置 string = ".*pinterest.com/";

所以现在你可以在最后添加你自己的目录。

```
string += '550/'; 
```

* * *

* * *

回覆：

> `http://media-cache-ec4.pinterest.com/192/24/4c/a5/244ca513d930a9f21fd89e8455948a49.jpg`
> 知道将图像文件名从以下内容更改为的代码是什么样的：
> `http://media-cache-ec4.pinterest.com/550/24/4c/a5/244ca513d930a9f21fd89e8455948a49.jpg`？

我会在这里回答你的第二个问题，因为评论不允许我多行。

```
var s1 = string.substring(0, string.substring('//'));
var s2 = string.substring(string.substring('//')+1);
string = s1+'550/'+s2; 
```

[参考资料`indexOf()`。](http://www.w3schools.com/jsref/jsref_indexof.asp)

# mysql - 使用 CASE 和 Left Join 时出现 MySql 错误

> ID：14638316
> 
> 赞同：0
> 
> 时间：2013-02-01T01:32:21.920
> 
> 标签：mysql, sql

我有三个表 table1、table2 和 table 3。我正在将数据获取到一个文件，其输出顺序如下所示。我想将该文件中的数据附加到无法使用 Java 创建和持久化的 table4 中。

场景：我希望这三个表中的所有数据都放在一个 cloumn 中，其中 table2 元素与**C4中的 table3 元素匹配，然后我想用****C5**中的相应数据替换那个匹配的元素，而不是那个匹配的元素。例如，在下面提到的表格中，我们看到 table2 中的 11 与 C4 列的 table3 匹配。那么输出应该有 11_1、11_2 而不是 11。

需要帮助

```
Table1:                  Table2:                          Table3:

C1                       C3                               C4        C5
-----                    ------                           ------    -------
1                        11                               11        11_1
2                        12                               11        11_2
3                        13                               14        14_1
4                        14                               14        14_2
5                        15                               14        14_3
                         16                               null      null 
```

我工作的代码：

```
SELECT c1 
FROM   (SELECT c1 
        FROM   table1 
        UNION ALL 
        SELECT c3 
        FROM   table2 
        UNION ALL 
        SELECT c5 
        FROM   table3) temp 
```

这个查询让我得到了一切:(

```
SELECT C1 FROM(SELECT DISTINCT C1 AS C1 FROM table1 UNION ALL SELECT DISTINCT C2 FROM table2)AS 
temp LEFT JOIN table3 ON .temp.C1=table3.C4 CASE WHEN table3.C4=NULL THEN temp.C1 ELSE table3.C5 
```

输出要求：

```
表4
C1
-----
1
2
3
4
5
11_1
11_2
12
13
14_1
14_2
14_3
15
16
```

**帮助表示赞赏**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:36:42.830

这应该有效：

```
SELECT col 
FROM   (SELECT c1 AS col 
        FROM   table1 
        UNION ALL 
        SELECT CASE 
                 WHEN t3.c4 IS NULL THEN t2.c3 
                 ELSE t3.c5 
               end AS col 
        FROM   table2 t2 
               LEFT JOIN table3 t3 
                      ON t3.c4 = t2.c3) temp 
```

**结果**

```
| 色彩 |
--------
| 1 |
| 2 |
| 3 |
| 4 |
| 5 |
| 11_1 |
| 11_2 |
| 12 |
| 13 |
| 14_1 |
| 14_2 |
| 14_3 |
| 15 |
| 16 |
```

## [查看演示](http://sqlfiddle.com/#!2/49652b/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:42:22.763

这将从表 3 中获取与 Table3.C4 匹配到 Table2.C1 的所有内容。它返回 ROWS：

```
SELECT C5
FROM Table3
LEFT JOIN Table2 ON Table2.C3 = Table3.C4 
```

我只在这里很短的时间，我一直看到人们希望 ROWS 在 COLUMNS 中返回的问题。SQL 返回匹配的 ROWS，而不是 COLUMNS。上面的 SQL 语句将列出数据如下：

```
11_1
11_2
:
: 
```

如果您希望将 rws 转换为列，请使用您选择的语言进行操作。（Python 让这种事情变得很好！:)）

马特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:46:10.070

这将产生指定的输出，但行的顺序是不确定的：

```
SELECT t1.c1
  FROM table1 t1
 UNION ALL
SELECT IFNULL(t3.c5,t2.c3)
  FROM table2 t2
  LEFT
  JOIN table3 t3
    ON t3.c4 = t2.c3 
```

要获得指定顺序的行，我们需要做更多的工作。如果上一个查询没有返回“重复项”，并且我们不担心任何重复项可能会被删除：

```
SELECT t1.c1
  FROM table1 t1
 GROUP BY t1.c1
 UNION ALL
SELECT IFNULL(t3.c5,t2.c3)
  FROM table2 t2
  LEFT
  JOIN table3 t3
    ON t3.c4 = t2.c3
 GROUP
    BY t2.c3
     , t3.c5 
```

[SQL Fiddle 演示](http://sqlfiddle.com/#!2/ddffc/1 "SQL Fiddle 演示")

目的是使用此结果集填充另一个表，这可以通过 SQL 语句完成：

```
INSERT INTO table4 (c1)
SELECT t1.c1
  FROM ... 
```

# linux - 长时间运行脚本的 Unix 重定向

> ID：14638322
> 
> 赞同：3
> 
> 时间：2013-02-01T01:32:53.763
> 
> 标签：linux, io-redirection

我有一个基本上看起来像这样的 cron 工作：

```
*/3 * * * * ruby myscript.rb > /my/location/file.txt 
```

myscript.rb 基本上看起来像这样：

```
#!/usr/bin/env ruby
sleep(120)
puts "Hello" 
```

因此，我每三分钟运行一个脚本，该脚本在写入 STDOUT 之前运行两分钟。（事实上​​，myscript.rb 正在发出大量的 HTTP 请求，而不是在休眠。我怀疑这是重要的时间。）

奇怪的结果是，在一定百分比的时间内，/my/location/file.txt 是空的。

似乎*脚本*开始了，文件被清空了，只有当脚本结束时，才会有数据写入文件。

这不是 *nix 重定向的工作原理，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:34:59.360

ruby 进程可能只是缓冲它的输出，将 STDOUT 设置为始终刷新其输出，为 STDOUT 设置 sync=true：

```
STDOUT.sync = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:42:24.617

你是对的，`file.txt`只要执行命令就会被截断。如果您需要文件的旧内容，除非脚本将完成这项工作，您可能需要写入另一个临时文件`file-tmp.txt`，然后将其重命名为`file.txt`. 如果您只想尽快看到输出，请查看@kyle-burton 的评论——您需要在脚本中刷新。

# asp.net-mvc - 包含 System.Web.Mvc 库时，HttpGet 属性不可用

> ID：14638326
> 
> 赞同：3
> 
> 时间：2013-02-01T01:33:21.483
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在编写一个区分请求类型`HttpGet`和`HttpPost`请求类型的 Web API。我刚刚将`System.Web.Mvc`and`System.Web.Mvc.Ajax`命名空间添加到项目中，而我定义`HttpGet`和`HttpPost`消失的能力。它再也找不到属性了。

发生了什么事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T02:50:28.723

您是否在同一个文件中同时包含 System.Web.Http 和 System.Web.Mvc 命名空间？

我想不出你想要这样做的很多充分理由，但如果你是，那么你需要添加完整的命名空间。请参阅下面的示例。由于 Mvc 和 Http 命名空间都有 HttpGet 和 HttpPost，因此您需要指定使用哪一个。

![用于 Http 和 Mvc 的 HttpGet](../Images/c1bbea3cc05a911d4fe16f0ed819c24d.png)

# iphone - 什么是推荐的核心图形技术来绘制非常自定义的 UITableViewCells

> ID：14638337
> 
> 赞同：1
> 
> 时间：2013-02-01T01:34:41.713
> 
> 标签：iphone, ios, core-graphics

![在此处输入图像描述](../Images/fd1ffe6f6f63c8769fb2c4c0fef091dd.png)

大家好。对在核心图形中绘制类似这样的东西的几个关键点感到好奇。

**什么时候应该使用多层？** 我知道我可以使用剪切路径在拐角处进行舍入，据我所知，这听起来比在 CALayer 上设置边界半径更有效。

**是否可以在 drawRect 中使用 UIImageView 的输出？** 我知道你实际上不能使用视图，但我在很多地方看到 UIImageView 绘制图像比直接在 drawRect 中绘制图像更有效。是否有可能以某种方式利用它们，或者你只需​​要吸收它并使用 CG？

欢迎任何其他提示、技巧和资源，以最佳方式绘制像这样的单元格以获得尽可能高的 FPS 速率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:12:27.030

1.  现在性能是个问题吗？我会远离“优化”，直到你注意到滞后并且你肯定它来自绘制“缓慢”。

2.  如果你还没有开始，那么做基本/简单的方法。在新的 iOS 设备上，它很可能会足够快。

3.  只需在drawRect中绘制图像，不要做任何花哨的事情。

[PaintCode](http://www.paintcodeapp.com)可以提供帮助吗？它根据您的设计输出核心图形代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:34:41.673

> 什么时候应该使用多层？

不幸的是，答案是：必要时。层很便宜，当然比 UIView/UIImageView 更轻，但它们也不是传统 iOS 响应器链的一部分（因为它们不能直接接收/中继触摸），但单元本身通常会为您处理。Apple[建议您避免](http://developer.apple.com/library/ios/#qa/qa1708/_index.html) `-drawRect:`为了清洁而使用拆分视图层次结构，但这并不意味着您必须为背景使用不同的视图。

> 是否可以在 drawRect 中使用 UIImageView 的输出？

如果您在使用 FPS 时遇到问题，最好先隔离它的来源，然后再优化可能不是问题点的​​东西。我会先调查图像：您是在执行任何类型的缓存，还是每次`-drawRect:`调用 tableview 单元时都必须重新绘制它？UIImageView 是否必须对图像执行任何类型的调整大小/缩放/解压缩？如果是这样，您是否考虑过自己调整图像大小一次，然后将结果保存到位图上下文中，您只需从数组中提取并绘制，而不是让 UIImageView 浪费时间为您做这件事？

[只要您的其他问题已解决，我也会解决动画问题]

为表格单元格的背景设置动画是微不足道的，特别是如果您的单元格在 Core Graphics 中绘制它的背景，而不是使用 CALayer（这意味着您将使用 CABasicAnimation 对背景颜色进行动画处理，详见[此处](https://stackoverflow.com/questions/518192/how-do-you-explicitly-animate-a-calayers-backgroundcolor)）。我特别喜欢[TwUI 的选定状态更改动画机制](https://github.com/twitter/twui/blob/master/lib/UIKit/TUITableViewCell.m#L173)，因为它非常简单：

1.  启动动画上下文。
2.  有一个调用的方法`-setNeedsDisplay`，或者做一些你想要动画的额外工作。
3.  提交动画。

# google-maps - Google Maps 中的 Fusion Table 不会显示整个几何图层

> ID：14638346
> 
> 赞同：2
> 
> 时间：2013-02-01T01:35:30.220
> 
> 标签：google-maps, geometry, google-fusion-tables

我在 google 驱动器中创建了一个新的融合表，其中包含放置在某些城镇上的大型子集几何。

但是，当我查看地图和相应的融合表叠加时，只会显示与城镇相关的几何图形的某些部分，有些城镇甚至根本不会显示几何图形。

在 google earth 中查看相同的 kml 文件时，所有几何图形都正确显示。

演示我在说什么（查看 mount barker 进行演示）。
[链接到谷歌地图](https://www.google.com/fusiontables/DataSource?docid=1scR-QveiRdz5PpLqjVxOLvr35Bm9nPQfEMt4FMY#map%3aid=3)

我还使用地图 API 在此融合表上进行搜索，以查找位于几何区域中的位置，但是当我向 api 提供几何渲染中未显示的位置时，它将返回错误结果。

融合表中当前有 185 行。我导入的 kml 的初始文件大小约为 13mb。

有没有办法让所有的几何数据显示出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:21:30.637

看起来您在多几何显示限制中遇到了 10 个最大的多边形：

从[这个答案](http://support.google.com/fusiontables/answer/174680)

> 支持多几何地标，但在地图上显示期间限制为十个多边形。

您可能需要将每个多边形导出到单独的行中。

# java - Java thottling 机制

> ID：14638349
> 
> 赞同：3
> 
> 时间：2013-02-01T01:35:48.723
> 
> 标签：java, multithreading, locking, mutex, throttling

**更新**：我使用的是 Java 1.6.34，没有机会升级到 Java 7。

我有一个场景，我每分钟只能调用一个方法 80 次。它实际上是由第 3 方编写的服务 API，如果您调用它太多次，它会“关闭”（忽略调用）它的 API：

```
public class WidgetService {
    // Can only call this method 80x/min, otherwise it
    // it just doesn't do anything
    public void doSomething(Fizz fizz);
} 
```

我想写一个`ApiThrottler`类，它有一个`boolean canRun()`方法可以告诉我的Java客户端是否`doSomething(Fizz)`可以调用该方法。（当然它总是可以*调用*的，但是如果我们超过了我们的速率，调用它就没有意义了。）

因此，可以让我编写如下代码：

```
// 80x/min
ApiThrottler throttler = new ApiThrottler(80);

WidgetService widgetService = new DefaultWidgetService();

// Massive list of Fizzes
List<Fizz> fizzes = getFizzes();

for(Fizz fizz : fizzes)
    if(throttler.canRun())
        widgetService.doSomething(fizz); 
```

这不一定是 API ( `ApiThrottler#canRun`)，但是我需要一个可靠/可靠的机制，它会暂停/休眠直到`WidgetService#doSomething(Fizz)` *可以*调用。

这让我*觉得*我们正在进入使用多线程的领域，这让我*觉得*我们可以使用某种锁定机制和 Java 通知 ( `wait()`/ `notify()`) 模型。但是在这个领域没有经验，我似乎无法理解最优雅的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:42:59.777

最好的选择之一可能是使用 Semaphore [http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)类并每分钟给它 80 个许可。例如，这可以通过使用计时器类[http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)来完成。调用者线程将在每次通过调用信号量上的 acquire() 执行对服务的调用时消耗许可，如果所有许可都已经耗尽，这将阻塞。

正如您所提到的，当然可以使用等待/通知和带有计时器或单独线程的整数计数器来编写代码，但是与我概述的更现代的 java.util.concurrent API 的使用相比，这将更加复杂多于。

它可以看起来接近以下内容：

```
class Throttler implements TimerTask {
  final Semaphore s = new Semaphore(80);  
  final Timer timer = new Timer(true);

  Throttler() {
    timer.schedule(this, 0, 60*1000);   //schedule this for 1 min execution  
  }

  run() {  //called by timer 
    s.release(80 - s.availablePermits());
  }

  makeCall() {
    s.acquire();
    doMakeCall();
  }

} 
```

这应该从 Java 5 开始工作。

同样更好的解决方案是使用`com.google.common.util.concurrent.RateLimiter`Guava。它看起来像这样：

```
class Throttler {
  final RateLimiter rateLimiter = RateLimiter.create(80.0/60.0);

  makeCall() {
    rateLimiter.acquire();
    doMakeCall();
  }
} 
```

与 Semaphore 解决方案相比，语义略有不同，RateLimiter 很可能更适合您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:43:02.783

我最近写了类似的东西。唯一的变化是我的代码在函数运行完成时需要回调。所以如果它不能运行，我直接调用回调。

另一个变化是，由于此调用可能是异步的，因此当您第二次调用它时，该调用可能正在进行中。在这种情况下，我只是忽略了电话。

我的节流器有一个辅助函数`call`，它接受要调用的函数和回调。这是用 C++ 编写的，所以对你来说，这将是 Action 和 listener 接口的形式。

与基于信号量的解决方案相比，这具有序列化请求的优势，**因此您也不会过于频繁地调用它**。

```
interface Callback{
    public void OnFunctionCalled();
}

class APIThrottler
   //ctor etc
   boolean CanCall();

   public boolean IsInProgress();

   public void SetInProgress(boolean inProgress = true);

   public void Mark(){/*increment counter*/; SetInProgress(false);} // couldnt think of a better name..

   public void Call(Callable event, Callback callback){
        If(IsInProgress())
            return;
        else if(CanCall())
        {
            SetInProgress();
            event.Call();
        }
        else
            callback.OnFunctionCalled();

    }
} 
```

一旦函数回调（或者如果它是同步的，则在函数本身内）`Mark()`一旦完成，您就需要这样做。

这在很大程度上是我的实现，唯一的区别是我在 x 秒（或几分钟）内处理一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:07:51.170

这可以通过使用一个简单的计数器来实现。我们称它为初始化为 80 的“许可”计数器。在调用“函数”之前，首先尝试获取许可。完成后，释放它。然后设置一个重复计时器，将计数器重置为每秒 80。

```
class Permit extends TimerTask
{
    private Integer permit = 80;

    private synchronized void resetPermit() { this.permit = 80; }

    public synchronized boolean acquire() {
        if(this.permit == 0) return false;
        this.permit--;
        return true;
    }

    public synchronized void release() { this.permit++; }

    @Override public void run() { resetPermit(); }
} 
```

像这样设置计时器以每秒重置一次许可。schedule 方法的第一个参数是 TimerTask 的一个实例（传递上面的 Permit 类对象）。run() 方法将在第二个参数中指定的每个时间段（此处为 1000 毫秒/1 秒）中调用。'true' 参数表示这是一个将不断重复的守护程序计时器。

```
Timer timer = new Timer(true);
timer.schedule(permit, 1000); 
```

然后每次你需要调用你的函数时，首先检查你是否可以获得任何许可。完成后不要忘记释放它

```
void myFunction() {
  if(!permit.acquire()) {
      System.out.println("Nah.. been calling this 80x in the past 1 sec");
      return;
  }

  // do stuff here

  permit.release();
} 
```

注意上面 Permit 类方法中 synchronized 关键字的使用——这应该避免超过 1 个线程同时执行同一对象实例的任何方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T02:59:55.890

您可以保留时间记录，并确保最后一分钟不超过 80 条记录。

```
// first=newest, last=oldest
final LinkedList<Long> records = new LinkedList<>();

synchronized public void canRun() throws InterruptedException
{
    while(true)
    {
        long now = System.currentTimeMillis();
        long oneMinuteAgo = now - 60000;

        // remove records older than one minute
        while(records.getLast() < oneMinuteAgo)
            records.removeLast();

        if(records.size()<80) // less than 80 records in the last minute
        {
            records.addFirst(now);
            return;   // can run
        }

        // wait for the oldest record to expire, then check again
        wait( 1 + records.getLast() - oneMinuteAgo);
    }
} 
```

有可能在第 0 秒，我们发出 80 个调用，等待一分钟，然后在第 60 秒，我们又发出 80 个调用。由于两端时钟不精确或网络随机延迟，另一端可能在一分钟内测量到 160 个呼叫。为安全起见，请扩大时间窗口，例如以每 70 秒 80 次调用进行节流。

# php - 通过 PHP 从 Internet 流式传输文件很慢

> ID：14638357
> 
> 赞同：7
> 
> 时间：2013-02-01T01:36:44.100
> 
> 标签：php, stream, download

我正在编写一个脚本，它将通过我的服务器将文件从网址流式传输给用户。在当前状态下，它可以工作，但速度很慢。

以下是相关代码：

```
/* Bytes per second */
define('TRANSFER_CAP', 1048576);

/* Hard part... stream the file to the user */
header('Content-Description: File Transfer');
header('Content-Disposition: attachment; filename=' . $filename);
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . $filesize);

$file = fopen($fileLocation, 'rb');
if(!$file) {
    // TODO: handle errors
}

while(!feof($file)) {
    echo fread($file, TRANSFER_CAP / 2);
    ob_flush();
    flush();

    /* Limit the download speed by sleeping */
    usleep(500);
} 
```

这个脚本在我的本地机器上运行。当我在浏览器中请求文件时（不通过脚本），我获得了大约 2.5MB/s 的稳定下载速度，这是我的互联网最大速度。但是，如果我运行脚本并尝试下载相同的文件，我只能得到大约 240-250KB/s。

我知道这不是限制传输速度的脚本，因为我将它设置为 1MB/s。我也想不出这个脚本中的任何东西会产生很大的开销，从而降低速度。

编辑：有趣的事情，如果我这样做，`readfile()`我几乎可以得到完整的下载速度：

```
readfile('http://cachefly.cachefly.net/100mb.test'); 
```

所以这一定是使用`fopen`and的问题`fread`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:57:58.570

Why don't you just do a HTTP header redirect to the binary file itself? That way you take the PHP out of the equation all together since all you want to do is serve up the file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:05:06.650

基本上，您正在使用 PHP 构建代理服务器。您是否考虑过使用 mod_proxy ( [http://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html) ) 或 Squid Proxy ( [http://www.squid-cache.org/](http://www.squid-cache.org/) )

# kml - 使用高度模式 relativeToGround 镶嵌多边形（线性环）

> ID：14638358
> 
> 赞同：2
> 
> 时间：2013-02-01T01:36:52.153
> 
> 标签：kml, google-earth, google-earth-plugin

谷[歌地球 KML 文档](https://developers.google.com/kml/documentation/kmlreference#tessellate)似乎明确地说你不能这样做，但我想要镶嵌多边形（线性环），这样多边形的内部会像在`<altitudeMode>clampToGround</altitudeMode>`. 但是，我希望这些多边形像它们一样“浮动”`<altitudeMode>relativeToGround</altitudeMode>`

有没有人遇到过这种情况或找到解决方法？

# java - 从 java 源文件夹制作 JAR 文件

> ID：14638364
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:37:39.727
> 
> 标签：java, android, jar

我想为 android 使用 spongycastle api。

[https://github.com/rtyley/spongycastle/archive/spongy-master.zip](https://github.com/rtyley/spongycastle/archive/spongy-master.zip)

但是，链接文件仅包含 .java 文件，我无法将其用于 eclipse 外部库。

你能给我从 src 文件夹构建 jar 文件的方法吗？（带有特定命令请）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:45:07.933

您应该能够将 java 文件作为包导入。无需构建罐子或任何东西。只需单击并将所有 java 文件（和源中的文件夹）拖放到您的包资源管理器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:41:44.720

ZIP 文件包含一个`POM.xml`文件，这意味着您应该能够使用[Maven](http://maven.apache.org/)构建它。但是还有一个名为的脚本`use-maven-layout.sh`似乎用于将文件移动到 Maven 首选目录布局中。你需要自己弄清楚那里发生了什么。

其他替代方案是：

*   从 Maven Central 手动下载预构建的 JAR 文件，或者
*   （如果您已经在项目中使用 Maven），请将相关依赖项添加到项目的 POM.xml 中，以便它们自动下载。

# c# - 如果用户不是当前用户，EF 不会返回用户？

> ID：14638368
> 
> 赞同：1
> 
> 时间：2013-02-01T01:38:16.670
> 
> 标签：c#, asp.net, entity-framework, asp.net-mvc-4

Entity Framework 有一个奇怪的问题，如果我尝试访问不是当前用户的用户变量，则会引发错误。我将 ASP.NET MVC 4 与 SignalR（这是在 SignalR 集线器中）和 SimpleMembership 一起使用来提供身份验证。

这是我的代码：

```
using (CfDb db = new CfDb())
{
    var currUser = db.Users.FirstOrDefault(a => a.ID == UserID);
    if (currUser != null && currUser.Challenge == Challenge)
    {
        var posts = db.Posts.Where(a => a.Privacy == "public").OrderByDescending(a => a.PostedTime);
        List<int> People = new List<int>();
        foreach (Post post in posts)
        {
            People.Add(post.Poster.ID);
        }
    }
} 
```

如果`post.Poster`与当前登录用户相同，它将返回发布帖子的正确用户，但如果不是，则为`post.Poster`null 并`post.Poster.ID`引发异常。如果我取出所有 currUser 代码（并且只执行 if(true)），错误仍然会发生，因此它似乎与 currUser 变量无关。我什至没有对 WebSecurity 做任何事情——`using System.Web.Security;`从页面顶部删除并不能解决它。我不知道它似乎如何知道当前用户是谁，而且如果它是当前用户，它只会返回海报似乎很奇怪。

这是我的代码优先模型的重要部分：

```
public class User
{
    [Key]
    public int ID { get; set; }

    [Required]
    public string Username { get; set; }
    [Required]
    public string Email { get; set; }
    [Required]
    public string Realname { get; set; }
    [Required]
    public DateTime JoinDate { get; set; }
    public virtual ICollection<User> Friends { get; set; }
    [Required]
    public string Challenge { get; set; }
    public School School { get; set; }
    public int Grade { get; set; }
    [Required]
    public double Vici { get; set; }
    public virtual ICollection<Classroom> Classes { get; set; }
}
public class Post
{
    public int ID { get; set; }
    [Required]
    public double Vici { get; set; }
    public User Poster { get; set; }
    public Classroom Class { get; set; }
    [Required]
    public string Content { get; set; }
    public virtual ICollection<User> Likes { get; set; }
    public virtual ICollection<Comment> Comments { get; set; }
    public string Type { get; set; }
    public string Privacy { get; set; }
    [Required]
    public DateTime PostedTime { get; set; }
}
public class CfDb : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Post> Posts { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Post>().HasMany(e => e.Likes).WithMany();
        modelBuilder.Entity<User>().HasMany(e => e.Friends).WithMany();
        modelBuilder.Entity<Post>().HasMany(e => e.Comments).WithMany();
        modelBuilder.Entity<Comment>().HasMany(e => e.Likes).WithMany();
    }
} 
```

在我的数据库中，Poster_ID 列都设置正确，所以这似乎不是问题。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:46:47.917

您需要告诉 EF 急切加载您的 User 属性，在查询中访问它，或者将其设为虚拟，以便代理可以延迟加载它们 - 类似于您设置集合的方式。它适用于当前用户，因为该对象已经加载。

例如：

```
var posts = db.Posts.Where(a => a.Privacy == "public")
                    .OrderByDescending(a => a.PostedTime)
                    .Select(a=> new { Post = a, User = a.Poster });

foreach (var post in posts) { 
    People.Add(post.User.Id);
} 
```

# php - PHP str_replace() 用于 $category['name'] 子字符串

> ID：14638371
> 
> 赞同：0
> 
> 时间：2013-02-01T01:38:48.800
> 
> 标签：php, substring, str-replace

我正在呼应菜单的类别名称：

```
<?php echo $category['name']; ?> 
```

其中“名称”是一个数组：

普瑞纳狗粮，普瑞纳猫粮，Eukanuba 狗粮，Eukanuba 猫粮，...

我不知道如何使用`str_replace();`来阻止子字符串“狗食”和“猫食”出现在菜单中。

我试过这个没有成功（当然）：

```
<?php echo $category['name']; str_replace("Cat Food", "", $category['name']); ?> 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:39:53.643

`str_replace()`可以将数组作为其第一个参数并用单个值（第二个参数）替换它们。

```
str_replace(array('Cat Food', 'Dog Food'), '', $category['name']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:06:00.607

您可以使用 John Conde 的答案，也可以使用以下内容：

```
$category['name'] = preg_replace('/ (Cat|Dog) Food/i', '', $category['name']); 
```

它应该用猫/狗粮替换所有出现的地方，您可能需要再次循环以消除重复的名称。示例：[http ://codepad.viper-7.com/kj883M](http://codepad.viper-7.com/kj883M)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:32:36.293

你也可以使用[strtr](http://php.net/strtr)；

```
$s = 'Cat Food, Dog Food';
$r = $category['name'];
echo strtr($s, array(
    'Cat Food' => $r,
    'Dog Food' => $r
)); 
```

# php - Joomla 2.5 模块问题，PHP 致命错误调用非对象上的成员函数 get()

> ID：14638372
> 
> 赞同：0
> 
> 时间：2013-02-01T01:38:51.037
> 
> 标签：php, joomla, joomla2.5, joomla-module

我在使用模块的参数执行任何特定操作时遇到问题。我不断从我的代码中收到以下错误：

```
PHP Fatal error:  Call to a member function get() on a non-object 
```

此错误发生在以下文件的第 10 行：

```
<?php
echo($params)
class modSystemValidation {

function buildForm() {
    $form = '';
    $tabIndex = 0;

     if($params->get('includeGender','0') == 1 ) {
        $form .= '<div id="gender"><input type="radio" name="gender" id="gender_m" value="m" tabindex="' . $tabIndex . '" class="label" /><label for="gender_m">Male</label><input type="radio" name="gender" id="gender_f" value="f" tabindex="' . $tabIndex + 1 . '" /><label for="gender_f"></label></div>'; 

        $tabIndex++;
        $tabIndex++;
    }
  }
return $form
}

modSystemValidation::buildForm();

?> 
```

我已经能够得出结论，这就是 params 对带有 echo($params) 的页面的回声：

```
{"includeFirstName":"1","includeLastName":"1","includeEmail":"1","includePhone":"0","includeAddress1":"0","includeAddress2":"0","includeZip":"0","includeCity":"0","includeState":"0","includeGender":"0","validateFirstName":"0","validateLastName":"0","validateEmail":"0","validatePhone":"0","validateAddress1":"0","validateAddress2":"0","validateZip":"0","validateCity":"0","validateState":"0","validateGender":"0"} 
```

我认为我的问题是 $params 变量是一个数组而不是一个对象，但我似乎很难用 is_array() 和 is_object() 函数确认这一点。

在有人回答这个问题之前，这里有一个快速概述：

1.  我知道 $params 已定义
2.  我的问题是我需要一种方法来查看 $params 并根据其内容做一些事情。
3.  虽然我很感激在为 Joomla 标准正确构建我的代码方面的帮助，但我想推迟这个问题，直到我解决了这个问题。

任何帮助将不胜感激，我只是试图访问我的模块的参数并根据用户是否启用该特定字段来构建表单值。现在我知道，使用当前代码，性别字段不会放在页面上，这是意料之中的。我要解决的是为什么我在第 10 行使用 get 函数收到错误。$params 可以在课堂外呼应，但不能在课堂内呼应？这对我来说没有意义，似乎是我遇到问题的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:09:31.137

在你`var_dump()`的 $params 中没有`includeGender`- 只有一个`validateGender`. 如果参数名称`includeGender`不存在 - 那么您将从语句中得到一个 php 致命错误。

在第 9 行尝试类似的操作（请注意，如果您是真心的，`includeGender`那么您需要检查您的参数名称！

```
if($params->get('validateGender','0') == 1 ) { 
```

@Lodder 在技术上也是正确的，它应该在一个 helper.php 文件中，它有一个帮助类以遵守 Joomla 标准——而不是作为 tpml.php 文件中的一个函数。然而，这不会对编码错误产生影响——它只会让你的模块更好地遵守 Joomla 标准！

* * *

***更新***

Lodder 弄错了——昨晚没注意到。

在 helper.php 文件中，您需要放置函数：

```
class modSystemValidationHelper {

    function my_function($params) { 
         $form = '';
         $tabIndex = 0;

         if($params->get('includeGender','0') == 1 ) {
              $form .= '<div id="gender"><input type="radio" name="gender" id="gender_m" value="m" tabindex="' . $tabIndex . '" class="label" /><label for="gender_m">Male</label><input type="radio" name="gender" id="gender_f" value="f" tabindex="' . $tabIndex + 1 . '" /><label for="gender_f"></label></div>'; 

              $tabIndex++;
              $tabIndex++;
         }

    }

} 
```

然后在视图的 default.php 文件中调用该函数，例如

```
 modSystemValidationHelper::buildForm($params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:07:15.873

您应该将所有函数放在一个 helper.php 文件中，如下所示：

```
class modSystemValidation {

    function my_function() { 

    }

} 
```

您可以在 default.php 中简单地使用这样的函数

```
modSystemValidation::my_function(); 
```

无需使用：`global $form , $tabIndex, $params;`

# c# - 向图标/图像添加下拉菜单

> ID：14638379
> 
> 赞同：0
> 
> 时间：2013-02-01T01:39:34.613
> 
> 标签：c#, drop-down-menu, icons

我想在我的 .NET 应用程序中添加一个图标（而不是在标题区域），其中有一个菜单。因此，您单击该图标会出现一个下拉菜单……与多级网站菜单非常相似。我只是没有文字空间，所以我必须坚持使用 24x24 图标。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:43:43.837

一种方法是简单地为单击事件连接一个事件处理程序，并在触发时只显示一个带有下拉菜单的面板。

# mysql - MySQL 图像插入

> ID：14638380
> 
> 赞同：1
> 
> 时间：2013-02-01T01:39:45.910
> 
> 标签：mysql, sql, database, insert, blob

G'day 我只是想知道如何将图像插入数据库。我创建了一个表，其中每一列都已经存在数据，并且我添加了一个“图像”列，如何将图像插入特定行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:42:31.793

你*不想*这样做。相反，将文件系统用于它的好处——存储数据。拥有图像的名称以及它们在 SQL 表中对应的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:50:27.817

试试这个代码：

```
CREATE TABLE Employees
(
  Id int,
  Name varchar(50) not null,
  Photo varbinary(max) not null
)

INSERT INTO Employees (Id, Name, Photo) 
  SELECT 10, 'John', BulkColumn 
  FROM Openrowset( Bulk 'C:\photo.bmp', Single_Blob) as EmployeePicture 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:51:58.460

这是PHP的方式：

```
$fileblob =file_get_contents("path/to/imagefile");
$cleandata=addslashes($fileblob);

$sql="update mytable set blobcolumn='$cleandata' where pkcol=$mypkvalue";

mysql_query($sql); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T01:53:25.020

hd1有一个好点；文件系统更擅长处理图像对象——用户检索和缓存对象会更快。

但是要回答它，您需要将其存储在 blob ddatatype 中。（二进制大对象）。请记住在将其导入数据库之前转义源，并在检索时取消转义。

INSERT INTO table ( `blobcolumn`) VALUES (...blob 内容在这里...);

# c++ - 无法摆脱 do{}while(); 循环 (C++)

> ID：14638383
> 
> 赞同：-3
> 
> 时间：2013-02-01T01:40:07.177
> 
> 标签：c++, loops

出于某种奇怪的原因，我无法摆脱要求输入答案的循环，任何帮助都会很棒：

```
#include <iostream>
using namespace std;

int main(){
    const int TEST=20;
    char crctAnswrs[TEST]={'B', 'D', 'A', 'A', 'C',
                           'A', 'B', 'A', 'C', 'D',
                           'B', 'C', 'D', 'A', 'D',
                           'C', 'C', 'B', 'D', 'A'};
    char stdntAnswer[TEST];

    for(int index=0; index<TEST; index++){
        do{
            cout<<"Please enter the answer for question #"<<(index+1)<<": ";
            cin.ignore();
            char input;
            cin.get(input);
            stdntAnswer[index]=input;
            if(stdntAnswer[index]!='A' && stdntAnswer[index]!='B' &&
               stdntAnswer[index]!='C' && stdntAnswer[index]!='D'){
                cout<<"Please enter A, B, C, or D as an answer."<<endl;
            }
        }while(stdntAnswer[index]!='A' && stdntAnswer[index]!='B' &&
               stdntAnswer[index]!='C' && stdntAnswer[index]!='D');
    }
} 
```

编辑：更改了条件，我在此示例中输入错误。现在每个条件都有 != 问题是一样的，它不能跳出循环。我认为如果其中一个条件为假，则整个条件集为假，从而导致它跳出循环......但是，它仍然循环并且如果我输入 A，B 仍然会显示验证消息、C 或 D.... 是 cin.get() 吗？我不想使用 getline() 因为这不是本书要求做的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T01:47:17.373

`cin.ignore()`您在读取字符之前调用。

这将导致它忽略*下一个*输入字符（因为如果`cin`流只是坐在那里等待输入，则流没有 EOF）。所以你总是会得到一个“输入”而不是字母。

*在读取字符后*执行忽略，或者更好的是，用于`getline`读取字符串。

您可以通过显示读取的字符（或其值）来解决此问题。标准调试实践：“为什么这个应该工作的东西不起作用？”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:42:45.150

我建议不要`std::cin.ignore()`在阅读之前做一些事情，比如`std::cin >> input`or `std::getline(std::cin,input)`while `input`is an `std::string`. 如果你坚持，`std::cin >> input`那么你可能应该打电话`std::cin.ignore(20,'\n');`来丢弃换行符。

# asp.net-mvc - VB.NET 中的 ASP.NET MVC 4 HtmlHelper 扩展需要 App_Code？

> ID：14638384
> 
> 赞同：4
> 
> 时间：2013-02-01T01:40:21.040
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-4, visual-studio-2012, html-helper

我花了两个小时的大部分时间试图弄清楚这一点。开始：

我只想创建一个 HTMLHelper 扩展方法。这已经做过很多次了，我知道我的编码是正确的。但是，如果我将代码文件放在 App_Code 中（我认为在 MVC 世界中不再有意义的文件夹！），Razor 似乎只知道它。

我怎么知道这个？

很简单...我在两个单独的同名文件中有两个相同编码的 HTMLHelper 扩展方法。

第一个文件，放在 ~/Extensions 中包含扩展方法`DisplayForProperty`

第二个文件，放在 ~/App_Code 中，包含扩展方法`DisplayForProperty2`

在视图中，我输入`@Html.Displ`- Intellisense 只显示我`DisplayForProperty2`！

我没有`@using`声明，因为这似乎没有必要看到`DisplayForProperty2`。更不用说，在这种情况下它不会改变任何东西。

那么，这是为什么呢？这甚至应该以这种方式发生吗？这只是Razor智障，还是我智障？

我正在使用 VS 2012 的完全更新副本。

PS - 另一方面，我是否必须将命名空间引用放在每个 /Views 目录下的每个 web.config 中（如在每个区域中），加上根目录？为什么我不能把它放在根目录或根 /Views 目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:04:03.707

您不必将 html 辅助扩展方法放在 App_Code 中。虽然有点老，但 asp.net 上的教程：[http](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs) ://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs可以很好地指导您。

我通常在 MVC 项目的根目录下有一个“Helpers”文件夹，每个文件夹都有单独的类文件。它们在`Project.MVC.Helpers`命名空间中，我在 Razor 视图中添加了一个`@using Project.MVC.Helpers`我想在其中使用帮助器的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:18:03.577

当您将 HtmlHelper 类放在 App_Code 之外的文件夹中时，您是否检查了在 HtmlHelper 类上生成的命名空间？

也许你错过的只是@using 指令指向你视图中的命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:24:44.240

您可能需要将包含您的帮助程序的命名空间添加到您的视图文件夹内的 Web.config 文件中。

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="Namespace.Of.Your.Helper" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

这将允许您的视图在没有引用命名空间的 @using 的情况下使用您的助手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:35:03.340

app_code 文件夹仍然是一个特殊的文件夹，由项目自动编译和引用。

# java - 尝试将文本文件信息添加到数组列表

> ID：14638387
> 
> 赞同：0
> 
> 时间：2013-02-01T01:40:53.550
> 
> 标签：java, arrays, syntax

我正在做一个项目，我必须构建一个可以从文件加载课程的课程组织者。我在将文件加载到程序中并将文件中的信息放入数组时遇到了一些麻烦。文件中的信息只是课程信息，也可以在程序本身中输入。我的希望是必须编程能够在同一个文件中读取和写入信息。关于我做错了什么的任何提示？我对用java读/写不是很有经验。非常感谢任何帮助。

以下是我收到的错误：

```
 C:\java\bin>javac CourseOrganizer.java
CourseOrganizer.java:248: missing method body, or declare abstract
    private static void LoadCourses();
                        ^
CourseOrganizer.java:253: cannot resolve symbol
symbol  : class ListCourses
location: class CourseOrganizer
                ListCourses lines = new ArrayList(ListCourses);
                ^
2 errors 
```

这是代码：

```
 import java.io.*;
import java.util.*;

public class CourseOrganizer
{
    static ArrayList ListCourses = new ArrayList();
    public static void main(String[] args)
    {
        InputStreamReader inp = null;
        BufferedReader input = null;
        int nOption  = 0;
        try
        {
            inp = new InputStreamReader(System.in);
            input = new BufferedReader(inp);
            while(true)
            {
                System.out.println("1\. Add Courses");
                System.out.println("2\. Modify Courses");
                System.out.println("3\. Delete Courses");
                System.out.println("4\. Sort Courses");
                System.out.println("5\. Show all Courses");
                System.out.println("6\. Load Courses");
                System.out.println("7\. Exit.");
                System.out.println("\nChoose an option(1-6) >> ");
                nOption = Integer.parseInt(input.readLine());

                switch(nOption)
                {
                    case 1:
                        AddCourses(input);
                        break;
                    case 2:
                        ModifyCourses(input);
                        break;
                    case 3:
                        DeleteCourses(input);
                        break;
                    case 4:
                        SortCourses(input);
                        break;
                    case 5:
                        ShowAllCourses();
                        break;
                    case 6:
                        System.out.println("Exiting program. Press any key to continue....");
                        input.read();
                        System.exit(0);
                        break;
                }
            }
        }
        catch(Exception exp)
        {
        }
    }
    //Setup Add Courses function for case 1
    private static void AddCourses(BufferedReader input) throws IOException
    {
        CourseTemplate tmpObject = null;
        while(true)
        {
            tmpObject = new CourseTemplate();
            System.out.println("Course Name >> ");
            tmpObject.CourseName = input.readLine().toString();
            System.out.println("Day of Course "+tmpObject.CourseName+"(1...6) >> ");
            tmpObject.Day = input.readLine().toString();
            System.out.println("Time of Course Start "+tmpObject.CourseName+" (in HH:MM AM/PM format)  >> ");
            tmpObject.Time = input.readLine().toString();
            System.out.println("Course Mark "+tmpObject.CourseName+"(0...100) >>");
            tmpObject.Mark = input.readLine().toString();
            if(tmpObject != null)
                ListCourses.add(tmpObject);

            System.out.println("\n Do you want to add another Course?(y/n) >>");            
            if(!input.readLine().toLowerCase().equals("y"))
                break;
        }
    }

    private static void ModifyCourses(BufferedReader input) throws IOException
    {
         CourseTemplate tmpObject = null;
         System.out.println("Name of the Course to modify >> ");
         String OldCourseName = input.readLine();
         int index = getCourseIndexByName(OldCourseName);
         if(index == -1)
         {
             System.out.println(" Course " + OldCourseName+ " not found.");
         }
         else
         {
             tmpObject = (CourseTemplate)ListCourses.get(index);
             showCourse(tmpObject);
             System.out.println("What you want to modify (Name|Day|Time|Mark)? >>");
             String strOption = input.readLine();
             if("name".equals(strOption.toLowerCase()))
             {
                System.out.println("New Name of the Course >> ");
                tmpObject.CourseName = input.readLine().toString();
             }
             else  if("day".equals(strOption.toLowerCase()))
             {
                System.out.println("New Day of the Course "+tmpObject.CourseName+"(1...6) >> ");
                tmpObject.Day = input.readLine().toString();
             }
             else  if("mark".equals(strOption.toLowerCase()))
             {
                System.out.println("New Mark of the Course "+tmpObject.CourseName+"(0...100) >> ");
                tmpObject.Day = input.readLine().toString();
             }
             else if("time".equals(strOption.toLowerCase()))
             {
                System.out.println("New Time of the Course "+tmpObject.CourseName+" (in HH:MM AM/PM format)  >> ");
                tmpObject.Time = input.readLine().toString();
             }
             else
             {
                 System.out.println("Unable to locate the propety entered..");
             }

             ListCourses.set(index, tmpObject);
         }
    }

    private static int getCourseIndexByName(String Name)
    {
        int index = -1;
        CourseTemplate tmp =null;
        for(int i=0;i<ListCourses.size();i++)
        {
            tmp = (CourseTemplate)ListCourses.get(i);
            if(tmp.CourseName.toLowerCase().equals(Name.toLowerCase()))
            {    
                index = i;
                break;
            }
        }
        return index;
    }

    private static void showCourse(CourseTemplate tcourse)
    {
        System.out.println(tcourse.CourseName+"\t\t"+tcourse.Day+"\t"+tcourse.Time+"\t"+tcourse.Mark);
    }

    private static void DeleteCourses(BufferedReader input) throws IOException
    {
         System.out.println("Name of the Course to delete >> ");
         String OldCourseName = input.readLine();
         int index = getCourseIndexByName(OldCourseName);
         if(index == -1)
         {
             System.out.println(" Course " + OldCourseName+ " not found.");
         }
         else
         {
             ListCourses.remove(index);
             System.out.println(" Course " + OldCourseName+ "deleted successfully.");
         }
    }

    private static void SortCourses(BufferedReader input) throws IOException
    {
         System.out.println("Enter the key to sort (Name|Day|Time|Mark)? >>");
         String strOption = input.readLine();
         int nSize = ListCourses.size();
         String str1, str2;
         if("name".equals(strOption.toLowerCase()))
         {
             for(int i = 0;i<nSize;i++)
             {
                 for(int j = (i+1);j<nSize;j++)
                 {
                     str1 = ((CourseTemplate)ListCourses.get(i)).CourseName;
                     str2 = ((CourseTemplate)ListCourses.get(j)).CourseName;

                     if(str1.compareToIgnoreCase(str2) > 0)
                     {
                         CourseTemplate  tmp = (CourseTemplate) ListCourses.get(i);
                         ListCourses.set(i, (CourseTemplate) ListCourses.get(j));
                         ListCourses.set(j, tmp);
                     }
                 }
             }
         }
         else  if("day".equals(strOption.toLowerCase()))
         {
             for(int i = 0;i<nSize;i++)
             {
                 for(int j = (i+1);j<nSize;j++)
                 {
                     str1 = ((CourseTemplate)ListCourses.get(i)).Day;
                     str2 = ((CourseTemplate)ListCourses.get(j)).Day;

                     if(str1.compareToIgnoreCase(str2) > 0)
                     {   
                         CourseTemplate  tmp = (CourseTemplate) ListCourses.get(i);
                         ListCourses.set(i, (CourseTemplate) ListCourses.get(j));
                         ListCourses.set(j, tmp);
                     }
                 }
             }
         }
         else if("time".equals(strOption.toLowerCase()))
         {
             for(int i = 0;i<nSize;i++)
             {
                 for(int j = (i+1);j<nSize;j++)
                 {
                     str1 = ((CourseTemplate)ListCourses.get(i)).Time;
                     str2 = ((CourseTemplate)ListCourses.get(j)).Time;

                     if(str1.compareToIgnoreCase(str2) > 0)
                     {
                         CourseTemplate  tmp = (CourseTemplate) ListCourses.get(i);
                         ListCourses.set(i, (CourseTemplate) ListCourses.get(j));
                         ListCourses.set(j, tmp);
                     }
                 }
             }
         }
         else if("mark".equals(strOption.toLowerCase()))
         {
             for(int i = 0;i<nSize;i++)
             {
                 for(int j = (i+1);j<nSize;j++)
                 {
                     str1 = ((CourseTemplate)ListCourses.get(i)).Mark;
                     str2 = ((CourseTemplate)ListCourses.get(j)).Mark;

                     if(str1.compareToIgnoreCase(str2) > 0)
                     {
                         CourseTemplate  tmp = (CourseTemplate) ListCourses.get(i);
                         ListCourses.set(i, (CourseTemplate) ListCourses.get(j));
                         ListCourses.set(j, tmp);
                     }
                 }
             }
         }
         else
         {
             System.out.println("Unable to locate the text entered..");
         }
         ShowAllCourses();
    }

    private static void LoadCourses();

        public String[] readLines(String filename) throws IOException {
            FileReader fileReader = new FileReader("Courses.txt");
            BufferedReader bufferedReader = new BufferedReader(fileReader);
            ListCourses lines = new ArrayList();
            String line = null;
            while ((line = bufferedReader.readLine()) != null) {
                    lines.add(line);
            }
            bufferedReader.close();
            return lines.toArray(new String[lines.size()]);
        }

    private static void ShowAllCourses()
    {
         System.out.println("Course List\n");
         System.out.println("Name\t\tDay\tTime\tMark");
         for(int i=0;i<ListCourses.size();i++)
         {

             showCourse((CourseTemplate)ListCourses.get(i));
         }
    }
}
class CourseTemplate
{
    public String CourseName = "";
    public String Day = "";
    public String Time="";
    public String Mark="";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:04:40.343

嘿朋友，我没有看到你将列表中的课程信息保存到磁盘，你从不使用 OutPutStream 或 BufferedWriter，所以没有文本文件，你如何通过 FileReader 读取 Courses.txt？（你应该创建并将其保存在第一个）...其次，我看到，在 switch 结构中，“案例 6”与供用户选择的屏幕消息不同，是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:02:14.337

你已经声明

```
static ArrayList ListCourses = new ArrayList(); 
```

所以***ListCources***实际上是您的**ArrayList**对象的名称。
现在在您的**readLines**方法中，您有：

```
ListCourses lines = new ArrayList(); 
```

这是没有意义的，因为*ListCources*是变量名而不是对象类型。为了更正此问题，必须将上述行更改为：

```
ArrayList lines = new ArrayList(); 
```

因此，您的方法将如下所示：

```
public String[] readLines(String filename) throws IOException {
            FileReader fileReader = new FileReader("Courses.txt");
            BufferedReader bufferedReader = new BufferedReader(fileReader);
            ArrayList lines = new ArrayList();
            String line = null;
            while ((line = bufferedReader.readLine()) != null) {
                    lines.add(line);
            }
            bufferedReader.close();
            return lines.toArray(new String[lines.size()]);
        } 
```

我可以建议用特定类型声明您的**ArrayList 。**这将有助于编译器查明未来的问题，通常是一种更好的做法。

```
ArrayList<String> lines = new ArrayList<String>(); 
```

**编辑：**
同样在***readLines()***方法之前，您已经声明：

```
private static void LoadCourses(); 
```

此方法没有主体，因此编译器会抱怨。如果您不需要它，请将其删除或实施。

# visual-studio-2010 - Visual Studio“对象文件名”项目设置

> ID：14638388
> 
> 赞同：0
> 
> 时间：2013-02-01T01:41:13.697
> 
> 标签：visual-studio-2010, project-settings

我们的项目中有几个具有相同文件名的模块。所以我将`Object Filename`项目设置设置为：

`$(IntDir)\%(Directory)\`.

这很好用，只是它使用了太多的文件路径。因此路径结构为：

```
C:\a\b\c\project.sln
C:\a\d\extern 
```

`extern`里面有一些东西，比如 boost 。结果输出是...

```
C:\a\b\c\Release\a\b\c\etc\.obj
C:\a\b\c\Release\a\d\extern\etc\.obj 
```

我宁愿去掉文件夹名称的前两个级别，所以它的结果是..

```
C:\a\b\c\Release\c\etc\.obj
C:\a\b\c\Release\extern\etc\.obj 
```

是否有某种未记录的路径语法类似于`..`但作用于下一个文件夹的前面而不是前一个文件夹的后面？就像是：

`$(IntDir)\>>\>>\%(Directory)\`哪里`>>`把我们移到左手边`%(Directory)`？

提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T23:29:13.880

我觉得你可以试试

```
$(IntDir)\%(RelativeDir)\ 
```

# excel - 在 Rally 的 Excel 插件中，xParent 字段是什么？

> ID：14638393
> 
> 赞同：0
> 
> 时间：2013-02-01T01:41:30.610
> 
> 标签：excel, rally

我为 Excel 安装了 Rally 插件并查询了用户故事。有一个 Parent 字段，它只给我来自父故事的 Name 字段。我尝试了 xParent 字段，但它给了我一个 JSON 字符串，它看起来像一个具有 ObjectID 的对象，但它与父故事不匹配（并不是每个有父故事的故事在 xParent 中也有值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:42:01.830

好吧，我觉得很傻。字段 xParent 是一个自定义字段。跟家长没关系。

很酷的是，我了解到您可以键入 Parent.FormattedID 以使列显示 Parent 的 FormattedID。

# java - Android 线程问题（线程在后台运行）

> ID：14638404
> 
> 赞同：1
> 
> 时间：2013-02-01T01:42:20.553
> 
> 标签：java, android, multithreading, dialog

**嘿伙计们**
我今天遇到的问题是关于**Threads**的，在一个 Android 活动中，我想显示一个带有消息、图标和标题以及三个按钮（正面、负面和中性）的对话框，我已经做到了，没有错误（加上听众和所有这些），我一次又一次地正确执行，没有错误，问题出在：

```
 alert.setPositiveButton("Yes", new android.content.DialogInterface.OnClickListener(){
        public void onClick(DialogInterface i, int j)
        {

            pb.setVisibility(0); //pb is a progress bar
            new Thread (new Runnable ()
            {
                public void run ()
                {
                    try {
                        tv.setText("Saved!");
                        Thread.sleep(5000);
                        tv.setText(null);  //tv is a text view
                        Thread.sleep(5000);
                        finish();

                    } catch (InterruptedException e) {
                        alerttmp.setIcon(R.drawable.ic_launcher);
                        alerttmp.setTitle("Error");
                        alerttmp.setMessage("Thread could not be executed Thread id: 100390");
                        alerttmp.show();
                    }

                }
            }).run();
        }
    }); 
```

看，正按钮被突出显示并保持突出显示，直到活动关闭，而我希望对话框消失，显示 pb，电视显示文本“已保存！！” 在其中，然后没有文本，毕竟这会杀死活动。

求救各位！谢谢！

**ps：**英语不是我的母语，所以请不要用莎士比亚的话！:) 请让语言尽可能简单！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:09:21.167

问题是你没有在 UI 线程中做你的 UI 工作。

您需要将可运行对象发布到 UI 处理程序，而不仅仅是为此生成一个新线程。

你可以用它`new Handler().postDelayed(Runnable runnable, long millis)`来实现。当然，这必须从 UI 线程运行 - 而不是从您生成的任何其他线程运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:35:53.973

使用两个处理程序设法做到这一点，这里是代码：注意：我仍然需要更多地了解处理程序和 postDelayed 方法，所以评论会有所帮助，并且一定会受到赞赏，否则我会用谷歌搜索它（去做无论如何）

```
 alert.setPositiveButton("Yes", new android.content.DialogInterface.OnClickListener(){
        public void onClick(DialogInterface i, int j)
        {
            pb.setVisibility(0);
            tv.setText("Saved!");
    new Handler().postDelayed(new Runnable() {
                public void run() {
                    tv.setText(null);
        }}, 5000);
    new Handler().postDelayed(new Runnable() {
        public void run() {
            finish();
}}, 5000);
        }}); 
```

# php - 无法找到如何将优惠券添加到贝宝网站专业结帐流程

> ID：14638409
> 
> 赞同：1
> 
> 时间：2013-02-01T01:42:30.507
> 
> 标签：php, paypal, sdk, paypal-sandbox

在过去的 2 天里，我已经阅读并测试了如何将 paypal website pro 集成到我当前的网站。

我正在使用可下载的贝宝最新 SDK：[https ://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

到目前为止，我已经设法添加了运输/抄送详细信息、项目详细信息、税务详细信息和其他所有内容。我唯一的问题是如何添加优惠券。我到处寻找一种方法来做到这一点，但我找不到它。

我正在尝试整合直接付款。和快速退房 - 现在我正在处理直接付款

这是到目前为止我得到的代码，其中大部分位于他们的示例文件中。

```
$firstName = $_POST['firstName'];
$lastName = $_POST['lastName'];

$address = new AddressType();
$address->Name = "$firstName $lastName";
$address->Street1 = $_POST['address1'];
$address->Street2 = $_POST['address2'];
$address->CityName = $_POST['city'];
$address->StateOrProvince = $_POST['state'];
$address->PostalCode = $_POST['zip'];
$address->Country = $_POST['country'];
$address->Phone = $_POST['phone'];

$shippingTotal = new BasicAmountType($currencyCode, 25);
$handlingTotal = new BasicAmountType($currencyCode, 0);
$insuranceTotal = new BasicAmountType($currencyCode, 0);

$paymentDetails = new PaymentDetailsType();
$itemTotalValue = 0;
$taxTotalValue = 0;

$itemTotalValue += 15 * 2; 
$taxTotalValue += 0 * 2;
$itemDetails = new PaymentDetailsItemType();
$itemDetails->Name = 'First Item';
$itemDetails->Amount = new BasicAmountType($currencyCode, 15);
$itemDetails->Quantity = 2;
$itemDetails->ItemCategory = 'Digital';
$itemDetails->Tax = new BasicAmountType($currencyCode, 0);  

$paymentDetails->PaymentDetailsItem[0] = $itemDetails;  
//}

$orderTotalValue = $shippingTotal->value + $handlingTotal->value +
$insuranceTotal->value +
$itemTotalValue + $taxTotalValue;

$paymentDetails->ShipToAddress = $address;
$paymentDetails->ItemTotal = new BasicAmountType($currencyCode, $itemTotalValue);
$paymentDetails->OrderTotal = new BasicAmountType($currencyCode, $orderTotalValue);
$paymentDetails->TaxTotal = new BasicAmountType($currencyCode, $taxTotalValue);
$paymentDetails->PaymentAction = $_REQUEST['paymentType'];

$paymentDetails->HandlingTotal = $handlingTotal;
$paymentDetails->InsuranceTotal = $insuranceTotal;
$paymentDetails->ShippingTotal = $shippingTotal;

if(isset($_REQUEST['notifyURL']))
{
$paymentDetails->NotifyURL = $_REQUEST['notifyURL'];
} 
```

我已经挖掘了他们的课程并找到了一个课程名称：`OfferCouponInfoType`

这似乎做了我想要实现的目标，但是我不知道如何使用它。

# java - 如何为大量字符串计算一个好的哈希码？

> ID：14638411
> 
> 赞同：7
> 
> 时间：2013-02-01T01:42:33.770
> 
> 标签：java, string, performance, hash, hashcode

一次根据这些字符串的值计算哈希码的最佳方法是什么？

好的，我的意思是它需要：

1 - 快速：我需要获取大量短字符串列表（10^3..10^8 项）的哈希码。

2 - 识别整个数据列表，因此可能只有几个不同字符串的列表必须具有不同的哈希码

如何在 Java 中做到这一点？

也许有一种方法可以使用现有的字符串哈希码，但是如何合并为单独的字符串计算的许多哈希码？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T02:43:01.433

为您的字符串创建一个占位符类，然后使用[CRC32 类](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/CRC32.html)。它简单快捷：

```
import java.util.zip.CRC32;

public class HugeStringCollection {
    private Collection<String> strings;

    public HugeStringCollection(Collection<String> strings) {
        this.strings = strings;
    }

    public int hashCode() {
        CRC32 crc = new CRC32();
        for(String string : strings) {
            crc.update(string.getBytes())
        }

        return (int)( crc.getValue() );
    }
} 
```

如果集合本身是不可变的，您可以计算一次哈希并将其存储以供后期重用。

# iframe - 我无法在 Internet Explorer 9 中更改 iframe 尺寸

> ID：14638412
> 
> 赞同：0
> 
> 时间：2013-02-01T01:42:34.523
> 
> 标签：iframe, internet-explorer-9

[http://www.chungstudio.com/the_city_stars/#blog](http://www.chungstudio.com/the_city_stars/#blog)

我在 iframe 中有一个 tumblr 博客，它通常出现在 firefox、chrome、safari 甚至 Internet Explorer 10 中，但使用 Internet Explorer 9，我无法更改 iframe 的尺寸。

ie9 中的 iframe 是否有替代标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:16:15.440

我看到您正在使用 css 将其设置为 100%；CSS 在不同浏览器中的解释不同 - 尝试使用 CSS 重置或删除填充/边距。

在 main.css 中：

```
.blog iframe {
  width: 100%;
  height: 100%;
} 
```

尝试添加行：

```
margin: 0px;
padding: 0px; 
```

（或将它们设置为您喜欢的间距）。如果您定义您希望它们具有的行为而不是依赖于默认值，浏览器会更好地适应规则。

我尽量不过度关注跨浏览器 CSS 的统一性；人们出于不同的原因选择浏览器——其中之一就是它如何解释默认值。

当然，如果您不想要 100%……这些是要修改的行。

# c# - 当 Console.CursorTop 到达某个位置时捕获

> ID：14638418
> 
> 赞同：0
> 
> 时间：2013-02-01T01:43:07.997
> 
> 标签：c#, console

我正在编写一个搜索文件的递归方法，当它遇到匹配时，它会打印到控制台窗口的完整路径。显然，如果这会返回很多结果，它会很快填满屏幕，没有足够的时间来查看结果。我想要一种在控制台的`CursorLeft`属性到达某个位置以插入`ReadKey()`以允许查看结果时捕获的方法。我的搜索方法如下

```
static void FileSearch(string Base, string Pattern)
{
    if (!Directory.Exists(Base)) return;

    string _Patt = Pattern.ToLower();

    var Files = Directory.GetFiles(Base).Where(File 
        => Path.GetFileName(File).ToLower().Contains(_Patt));

    foreach (string File in Files)
        Console.WriteLine(File);

    string[] Dirs = Directory.GetDirectories(Base);

    foreach (string Dir in Dirs)
        FileSearch(Dir, Pattern);
} 
```

我知道我可以添加某种索引器，例如递增`int`，以跟踪位置并在循环的每次迭代中检查它，并且`int`可以将其作为 a 传递，`ref`以便所有调用都查看相同的`int`. 我也知道每次迭代我都可以简单地检查当前位置。我只是想知道是否会有一种更清洁的方法来实现这一点，也许类似于事件处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:00:45.647

我认为这`Console.CursorTop`是正确的财产。打印每一行后检查以下内容：

```
if (Console.CursorTop % (Console.WindowHeight - 1) == 0)
    Console.ReadKey(); 
```

如：

```
static void FileSearch(string Base, string Pattern)
{
    if (!Directory.Exists(Base)) return;

    string _Patt = Pattern.ToLower();

    var Files = Directory.GetFiles(Base).Where(File 
        => Path.GetFileName(File).ToLower().Contains(_Patt));

    foreach (string File in Files)
    {
        Console.WriteLine(File);
        if (Console.CursorTop % (Console.WindowHeight - 1) == 0)
            Console.ReadKey();
    }

    string[] Dirs = Directory.GetDirectories(Base);

    foreach (string Dir in Dirs)
        FileSearch(Dir, Pattern);
} 
```

# php - Zend 2.0 Select 查询不起作用，但原始 SQL 中的相同查询起作用

> ID：14638419
> 
> 赞同：0
> 
> 时间：2013-02-01T01:43:10.290
> 
> 标签：php, sql, pdo, zend-framework2

下面是我在 Zend 2.0 中创建查询的方式

```
$getVenues = $this->tableGateway->select(function (Select $select) {
    $select->where->greaterThanOrEqualTo('lat', (float) $lat_min);
    $select->where->greaterThanOrEqualTo('lng', (float) $lng_min);
    $select->where->lessThanOrEqualTo('lat', (float) $lat_max);
    $select->where->lessThanOrEqualTo('lng', (float) $lng_max);
}); 
```

输出以下查询：

```
SELECT `venues`.* FROM `venues` WHERE `lat` >= :where1 AND `lng` >= :where2 AND `lat` <= :where3 AND `lng` <= :where4 
```

填写每个参数`:where*`后，它看起来像这样：

```
SELECT `venues`.* FROM `venues` WHERE `lat` >= 39.730387437667 AND `lng` >= -86.332592054637 AND `lat` <= 40.020242510131 AND `lng` <= -85.954901904578 
```

在 phpMyAdmin 中执行原始 SQL 查询返回正确的结果，但我的 Zend 2.0 查询返回 0 行。

下面是`var_dump`Zend 的查询结果集：

```
object(Zend\Db\ResultSet\ResultSet)#227 (8) {
  ["allowedReturnTypes":protected]=>
  array(2) {
    [0]=>
    string(11) "arrayobject"
    [1]=>
    string(5) "array"
  }
  ["arrayObjectPrototype":protected]=>
  object(Application\Model\Venue)#208 (12) {
    ["id"]=>NULL
    ["fsq_venue_id"]=>NULL
    ["name"]=>NULL
    ["address"]=>NULL
    ["city"]=>NULL
    ["state"]=>NULL
    ["zip"]=>NULL
    ["country"]=>NULL
    ["cross_street"]=>NULL
    ["lat"]=>NULL
    ["lng"]=>NULL
    ["updated_at"]=>NULL
  }
  ["returnType":protected]=>
  string(11) "arrayobject"
  ["buffer":protected]=>
  NULL
  ["count":protected]=>
  int(0)
  ["dataSource":protected]=>
  object(Zend\Db\Adapter\Driver\Pdo\Result)#214 (8) {
    ["statementMode":protected]=>
    string(7) "forward"
    ["resource":protected]=>
    object(PDOStatement)#215 (1) {
      ["queryString"]=>
      string(117) "SELECT `venues`.* FROM `venues` WHERE `lat` >= :where1 AND `lng` >= :where2 AND `lat` <= :where3 AND `lng` <= :where4"
    }
    ["options":protected]=>
    NULL
    ["currentComplete":protected]=>
    bool(false)
    ["currentData":protected]=>
    NULL
    ["position":protected]=>
    int(-1)
    ["generatedValue":protected]=>
    string(1) "0"
    ["rowCount":protected]=>
    int(0)
  }
  ["fieldCount":protected]=>
  int(12)
  ["position":protected]=>
  NULL
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:20:06.067

变量未在闭包上下文中设置

# android - 将旧版本 SQLite db 复制到较新版本的应用程序时如何避免崩溃

> ID：14638421
> 
> 赞同：1
> 
> 时间：2013-02-01T01:43:20.883
> 
> 标签：android, android-sqlite

我为我的用户提供了备份 sqlite 数据库的选项。我这样做的方法是将其复制到外部存储器。他们可以根据需要将其加载回来。

但是，我想知道如何解决这种情况：

如果我的用户在版本 1 中备份了数据库。将应用程序更新到版本 2，这是一个更改的数据库。然后我的用户重新加载数据库（旧版本）。这将导致应用程序崩溃有没有办法1-检测用户正在复制的数据库版本，所以我比较它当前的数据库版本并防止复制？2-（甚至更好）能够将复制的 DB 版本更新到版本 2 并将其加载到我的应用程序中吗？

对此的任何帮助表示赞赏谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:50:53.063

我有一个应用程序，我让用户能够保存数据库。但是，为了避免这种问题，我不只是“复制”数据库文件来保存它，而是**以特定的方式将数据库中包含的数据写入另一个文件（保存文件），**换句话说，我创建了一种新的文件格式来存储导出的数据。

而且，当我必须恢复导出的数据时，我所要做的就是解析保存文件，并将导入的数据插入数据库中。所以，我控制什么出口和什么进口。

实现起来比较复杂，但我认为这是最好的做法。

# c - 如何通过 rootkit 列出隐藏的文件/进程/regKeys

> ID：14638429
> 
> 赞同：0
> 
> 时间：2013-02-01T01:44:59.447
> 
> 标签：c, windows, hide, rootkit

我想知道如何列出被 Rootkit 隐藏的文件或进程或注册表项？

例如，[gmer](http://www.gmer.net)做到了，我想知道怎么做。

谢谢！

PS：我的主要编程语言是 AutoIt，但任何可以在标准 C 中使用的答案都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T11:25:59.183

swatkat 建议非常有用——其中一个链接到 Windows Internals 课程（使用 Win Int 5th Ed 作为文本）：[CS490 Windows Internals](http://www.cs.sjtu.edu.cn/~kzhu/cs490/)

# python - 在 Python 中格式化右对齐

> ID：14638430
> 
> 赞同：-2
> 
> 时间：2013-02-01T01:45:01.523
> 
> 标签：python, format

大家好，我在 Python 课程的介绍中有一个作业，我的老师指出（他还没有解释）输出的某些部分必须通过 format() 函数右对齐。

到目前为止，我已经了解了一些有关格式的知识，例如：

```
print(format(12345.6789,'.2f'))
print(format(12345.6789,',.2f'))
print('The number is ',format(12345.6789,'10,.3f'))
print(format(123456,'10,d')) 
```

我理解这些很好，但这就是我的教授在我的程序中想要的。

这需要正确的理由：

```
 Amount paid for the stock:      $ 350,000
    Commission paid on the purchase:$  27,000
    Amount the stock sold for:      $ 350,000 
    Commission paid on the sale:    $   30,00
    Profit (or loss if negative):   $ -57,000 
```

这些数字不正确^我忘记了实际值，但你明白了。

这是我已经拥有的代码。

```
#Output
print("\n\n")
print("Amount paid for the stock:      $",format(stockPaid,',.2f'),sep='')
print("Commission paid on the purchase:$",format(commissionBuy,',.2f'),sep='')
print("Amount the stock sold for:      $",format(stockSold,',.2f'),sep='')
print("Commission paid on the sale:    $",format(commissionSell,',.2f'),sep='')
print("Profit (or loss if negative):   $",format(profit,',.2f'),sep='') 
```

那么如何让这些值右对齐打印，而每个之前的字符串的其余部分左对齐呢？

谢谢你们的帮助，你们一如既往的棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:45:15.413

这个问题几乎是[Python 中 Align Left / Right 的](https://stackoverflow.com/questions/9640109/allign-left-and-right-in-python)重复，有一个修改可以让它为你工作（以下代码是 Python 3.X 兼容的）：

```
# generic list name with generic values
apples = ['a', 'ab', 'abc', 'abcd']

def align_text(le, ri):
    max_left_size = len(max(le, key=len))
    max_right_size = len(max(ri, key=len))
    padding = max_left_size + max_right_size + 1

    return ['{}{}{}'.format(x[0], ' '*(padding-(len(x[0])+len(x[1]))), x[1]) for x in zip(le, ri)]

for x in align_text(apples, apples):
    print (x) 
```

该`"".format()`语法用于将字符串中的占位符替换为您提供的参数，它的文档是[Python Docs String Formatter](http://docs.python.org/2/library/string.html#string-formatting)。当您创建混入变量的字符串时，我怎么强调都不过分。

这将要求您将左右值放在单独的列表中，但是，从您的示例来看，它将是：

```
left_stuff = [
        "Amount paid for the stock:      $",
        "Commission paid on the purchase:$",
        "Amount the stock sold for:      $",
        "Commission paid on the sale:    $",
        "Profit (or loss if negative):   $"]

right_stuff = [
        format(1,',.2f'),
        format(1,',.2f'),
        format(1,',.2f'),
        format(1,',.2f'),
        format(1,',.2f')] 
```

输出是：

```
Amount paid for the stock:      $ 1.00
Commission paid on the purchase:$ 1.00
Amount the stock sold for:      $ 1.00
Commission paid on the sale:    $ 1.00
Profit (or loss if negative):   $ 1.00 
```

您可以通过删除`+1`函数中的 $ 或将 $ 放在右侧来消除 $ 之间的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:29:17.913

尝试使用它 - 虽然它在文档中。您将需要应用您已经拥有的任何其他适用的格式。

```
>>> format('123', '>30')
'                           123' 
```

# google-app-engine - 使用游标完全实现分页

> ID：14638431
> 
> 赞同：1
> 
> 时间：2013-02-01T01:45:07.817
> 
> 标签：google-app-engine, app-engine-ndb

任何人都可以使用游标提供分页的工作实现吗？

大多数示例都是关于如何访问下一页的。我无法访问以前的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:47:19.983

```
def get(self):
    echo = self.response.out.write
    limit = 10
    if self.is_logged_in():
        curs = Cursor(urlsafe=self.request.get('curs'))

        query = Postdb.query()

        if self.request.get('type') == 'prev':
            query_reverse = query.order(-Postdb.key)

            posts, cursor, more = query_reverse.fetch_page(limit, start_cursor=curs.reversed())

            echo('<ol>')
            for post in reversed(posts):
                echo('<li><a href="'+post.key.urlsafe()+'">'+post.title+'</a></li>')
            echo('</ol>')

            if more and cursor:
                echo('<a href="?type=prev&curs='+cursor.reversed().urlsafe()+'">prev</a> ')

            echo('<a href="?type=next&curs='+curs.urlsafe()+'">next</a>')
        else:
            query_forward = query.order(Postdb.key)

            posts, cursor, more = query_forward.fetch_page(limit, start_cursor=curs)

            echo('<ol>')
            for post in posts:
                echo('<li><a href="'+post.key.urlsafe()+'">'+post.title+'</a></li>')
            echo('</ol>')

            if self.request.get('curs') != '':
                echo('<a href="?type=prev&curs='+curs.urlsafe()+'">prev</a> ')

            if more and cursor:
                echo('<a href="?type=next&curs='+cursor.urlsafe()+'">next</a>')

        echo('<br><br><a href="/auth/posts/list">start</a>') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:19:28.550

如果您只有有限数量的不同查询，您可能需要查看

[https://bitbucket.org/viur/server/src/1b739a5e4ff1c2e3ce8933603a6faf32b364e708/indexes.py?at=master](https://bitbucket.org/viur/server/src/1b739a5e4ff1c2e3ce8933603a6faf32b364e708/indexes.py?at=master)

此类为您处理所有光标内容并允许有效地随机访问页面（即，您可以直接跳转到第 n 页，而不必单击“下一个”n 次）。

# objective-c - 在 TabBar 中切换视图时，ScrollView 的偏移量搞砸了

> ID：14638434
> 
> 赞同：1
> 
> 时间：2013-02-01T01:45:17.937
> 
> 标签：objective-c, uiscrollview, uitabbarcontroller, uitabbar

这个问题说明了一切。每当我在 TabBar 中切换视图时，如果向下滚动滚动视图，它将随后滚动滚动偏移量的 1.5 倍。当我切换视图时，是否有阻止 ScrollView 额外滚动的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:00:47.333

我有同样的问题。我通过关闭自动布局模式来修复它。但我相信这应该是另一种解决方案。

# ios - UILongPressGestureRecognizer 不会响应触摸和按住

> ID：14638435
> 
> 赞同：7
> 
> 时间：2013-02-01T01:45:23.470
> 
> 标签：ios, objective-c, cocoa-touch, uigesturerecognizer

我正在为 iPhone 编写一个 Objective-C 程序。

我正在尝试实现 a`UILongPressGestureRecognizer`并且无法让它按照我想要的方式运行。

我*想做*的很简单：

响应在屏幕上*按住*的触摸。

每当触摸移动和触摸开始时，`UILongPressGestureRecognizer`效果都很好，但如果我在同一个地方按住触摸，什么也不会发生。

为什么？

如何处理开始、不动并停留在同一个地方的触摸？

这是我当前的代码。

* * *

```
// Configure the press and hold gesture recognizer 
touchAndHoldRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(touchAndHold:)]; 
touchAndHoldRecognizer.minimumPressDuration = 0.1; 
touchAndHoldRecognizer.allowableMovement = 600;
[self.view addGestureRecognizer:touchAndHoldRecognizer]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T03:54:35.967

您描述的行为，当您不移动时，您的手势识别器不会收到对您的处理程序的进一步调用是标准行为。`state`当你移动时这些手势的属性是 type `UIGestureRecognizerStateChanged`，所以如果事情没有改变，你的处理程序就不会被调用是有道理的。

你可以

*   在调用您的手势识别器`state`时`UIGestureRecognizerStateBegan`启动一个重复计时器；
*   `state`使用of `UIGestureRecognizerStateCancelled`、`UIGestureRecognizerStateFailed`或`UIGestureRecognizerStateEnded`then调用您的手势识别`invalidate`器并释放计时器；
*   确保手势识别器方法保存了您在某个类属性中寻找的任何值（例如，值`locationInView`或其他）

所以，也许是这样的：

```
@interface ViewController ()

@property (nonatomic) CGPoint location;
@property (nonatomic, strong) NSTimer *timer;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UILongPressGestureRecognizer *gesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];
    gesture.minimumPressDuration = 0.1;
    gesture.allowableMovement = 600;
    [self.view addGestureRecognizer:gesture];
}

- (void)handleTimer:(NSTimer *)timer
{
    [self someMethod:self.location];
}

- (void)handleGesture:(UIGestureRecognizer *)gesture
{
    self.location = [gesture locationInView:self.view];

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(handleTimer:) userInfo:nil repeats:YES];
    }
    else if (gesture.state == UIGestureRecognizerStateCancelled ||
             gesture.state == UIGestureRecognizerStateFailed ||
             gesture.state == UIGestureRecognizerStateEnded)
    {
        [self.timer invalidate];
        self.timer = nil;
    }

    [self someMethod:self.location];
}

- (void)someMethod:(CGPoint)location
{
    // move whatever you wanted to do in the gesture handler here.

    NSLog(@"%s", __FUNCTION__);
}

@end 
```

# python - 芹菜：事件==信号？

> ID：14638437
> 
> 赞同：2
> 
> 时间：2013-02-01T01:45:29.480
> 
> 标签：python, postgresql, events, signals, celery

我正在尝试连接到此处描述的 celery 信号：http:
[//docs.celeryproject.org/en/latest/userguide/signals.html](http://docs.celeryproject.org/en/latest/userguide/signals.html)
我可以连接到 task_sent 信号没问题。

但是当我尝试连接到 task_success 或 task_postrun 时，什么也没有发生。对于我的经纪人和我的后端，我使用的是 postgres sql。

**我试图理解为什么它不起作用**

我从这里的文档中想知道的一件事：http:
[//docs.celeryproject.org/en/latest/getting-started/brokers/sqlalchemy.html#broker-sqlalchemy](http://docs.celeryproject.org/en/latest/getting-started/brokers/sqlalchemy.html#broker-sqlalchemy)
它说：

> 限制：事件，包括 Django Admin 监视器。

目前尚不清楚当他们说事件时，他们是否意味着信号。

请帮忙。

**任务.py**

```
from celery import Celery
from celery.signals import task_sent, task_success, task_postrun
import celeryconfig

celery_config_dict = {** stuff **}

celery = Celery('tasks',)
celery.add_defaults(celery_config_dict)

@celery.task
def add(x, y):
    return x + y

@task_sent.connect
def task_sent_handler(sender=None, task_id=None, task=None, args=None, kwargs=None, **kwds):
    print('''   Task Sent!
    sender: %s
    task_id: %s
    task: %s
    args: %s
    kargs: %s
    kwds: %s''' % (   sender, 
                        task_id, 
                        task,
                        args,
                        kwargs,
                        kwds))

@task_success.connect
def task_success_handler(sender=None, result=None, args=None, kwargs=None, **kwds):
    print('''   Success!
    sender:%s
    result:%s
    args:%s
    kwargs:%s
    kwds:%s''' % (sender, result, args, kwargs, kwds))

@task_postrun.connect
def task_postrun_handler(sender=None, task_id=None, task=None, args=None, kwargs=None, retval=None, state=None, **kwds):
    print('''   Done!
    sender: %s
    task_id: %s
    task: %s 
    retval: %s
    state: %s
    args:%s
    kwargs:%s   
    kwds:%s''' % (sender, task_id, task, retval, state, args, kwargs, kwds,)) 
```

在 python 解释器中

```
>>> import tasks
>>> r = tasks.add.apply_async((3,8), countdown=10)
   Task Sent!
    sender: tasks.add
    task_id: None
    task: tasks.add
    args: (3, 8)
    kargs: {}
    kwds: {'utc': True, 'chord': None, 'retries': 0, 'signal': <Signal: Signal>, 'expires': None, 'callbacks': None, 'errbacks': None, 'taskset': None, 'eta': '2013-02-01T01:43:35.978889', 'id': '87c8d0f4-ae67-4c3d-9e94-45e99cf6304a'}
>>> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T11:07:12.177

不，事件和信号不一样。请参阅[http://docs.celeryproject.org/en/latest/userguide/monitoring.html#events](http://docs.celeryproject.org/en/latest/userguide/monitoring.html#events)

您不会期望在该解释器中打印任何内容，因为信号是当前进程的本地信号，因此将在执行任务的进程中触发预运行/后运行信号。

# android - 如何在 Android 中设置登录对话框？

> ID：14638438
> 
> 赞同：3
> 
> 时间：2013-02-01T01:45:38.603
> 
> 标签：android, login, android-alertdialog

我试图在我的编辑按钮中添加登录名。我想要做的是，当用户选择要编辑的项目，然后点击编辑按钮时，将显示一个弹出窗口，询问用户的用户名和密码。我尝试制作一个登录对话框，但我一直失败。

这是我的代码：

```
public void btn_edit_click(View v){
        LayoutInflater li = LayoutInflater.from(context);
        View prompt = li.inflate(R.layout.prompts, null);
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
        alertDialogBuilder.setView(prompt);
        final String username = getIntent().getStringExtra("USERNAME");
        final EditText user = (EditText) prompt.findViewById(R.id.loginEmail);
        final EditText pass = (EditText) prompt.findViewById(R.id.loginPassword);
        final TextView msg = (TextView) prompt.findViewById(R.id.login_error);
        final String password = pass.getText().toString();
        user.setText(getIntent().getStringExtra("USERNAME"));
        if(this.selected_website != null){
            alertDialogBuilder.setCancelable(false)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {   
                    DBAdapter dbUser = new DBAdapter(PasswordActivity.this);
                    dbUser.open();
                    if(dbUser.Login(username, password))
                    {
                        show_add_layout();

                    }
                    else
                    {
                        msg.setText("Username or Password is incorrect");
                    }
                }
                });

                    alertDialogBuilder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();

                        }
                    });
                    alertDialogBuilder.show();  
                    }                   
                    else{
                        show_mesg("Please select item to edit.");
                    }
    } 
```

当我单击“确定”按钮时，它给了我“用户名或密码不正确”的语句。但是我输入了正确的用户名和密码。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T04:45:44.437

一个小时后，我设法解决了自己的问题。所以我想分享这个答案，所以如果有人遇到我刚才遇到的问题，他们可以把它作为一个很好的参考。

我所做的是，我尝试使用登录类的代码。但我不再要求用户名了。我问的只是密码。但是对于用户名，我从之前的登录中获得了 Intent。就像，您使用用户名“john316”登录，密码为“123abc”，然后您将被重定向到主类。您在列表视图中选择一个项目，当您单击编辑时，将显示一个弹出窗口，要求您输入密码以进行验证。但是，任何密码都不起作用。如果正确，它将从数据库和您登录的用户名（“john316”）调用密码，您将被重定向到编辑类。如果错误，它会显示“密码不正确”。并且会阻止您进入该页面。为了缩短这个解释，这里是代码：

```
public void btn_edit_click(View v){
    LayoutInflater li = LayoutInflater.from(context);
    View prompt = li.inflate(R.layout.prompts, null);
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
    alertDialogBuilder.setView(prompt);
    final String username = getIntent().getStringExtra("USERNAME");
    final EditText pass = (EditText) prompt.findViewById(R.id.loginPassword);
    final TextView msg = (TextView) prompt.findViewById(R.id.login_error);

    if(this.selected_website != null){
        alertDialogBuilder.setCancelable(false)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int id) {   
                String password = pass.getText().toString();

                try{
                    if(username.equals(getIntent().getStringExtra("USERNAME")) && password.length() > 0)
                    {
                        DBAdapter dbUser = new DBAdapter(PasswordActivity.this);
                        dbUser.open();

                        if(dbUser.Login(username, password))
                        {
                            show_add_layout();
                        }else{
                            msg.setText("Password is incorrect");
                        }
                        dbUser.close();
                    }

                }catch(Exception e)
                {
                    Toast.makeText(PasswordActivity.this,e.getMessage(), Toast.LENGTH_LONG).show();
                }
            }
            });

                alertDialogBuilder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();

                    }
                });
                alertDialogBuilder.show();  
                }                   
                else{
                    show_mesg("Please select item to edit.");
                }
} 
```

这就是它的工作原理。我感谢那些回答我的问题并给了我一点帮助的人。我希望这个也能帮助其他人。感谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:58:48.573

似乎您没有像 passwor 那样正确获取 User Name ，因为您正在使用它。

```
 final String username = getIntent().getStringExtra("USERNAME"); 
```

但是您在为 userEmail 归档的对话框 EditText 中输入用户名（如密码）。您应该使用它来获取输入的用户名

```
final String username  = user.getText().toString(); 
```

您还应该验证 User Name ， Passowrd 为 null ，在 DB 中检查之前为空

# visual-studio-2010 - Visual Studio 2010 删除不需要的库

> ID：14638445
> 
> 赞同：0
> 
> 时间：2013-02-01T01:46:25.827
> 
> 标签：visual-studio-2010, linker

这是我所做的简化方案：

1.  包含项目 (lib) A 和 B 的 Visual Studio 2010 解决方案
2.  我删除了lib B，进行了调整，所以A没有在代码中链接到B，现在构建。
3.  我开始遇到错误，例如：
    *   Microsoft.Common.Targets(1200,9)：警告：引用的项目 B.vcxproj 不存在
    *   链接：致命错误 LNK1181：无法打开输入文件：'path-to-\B.lib'

查看配置属性->链接器->命令行，无论我做什么，我都可以看到 B.lib 挂在那里。我相信这是一些 VS 项目设置错误，有人有类似的经验并知道一些解决方法吗？

我知道重新创建我的项目 A，拉入所有文件可能会解决这个问题，但只是遇到了太多次。希望把它扔在这里，如果有好的答案，也对社区有所帮助。谢谢！

# asp.net - ASP NET Web API 路由模板

> ID：14638447
> 
> 赞同：4
> 
> 时间：2013-02-01T01:46:28.947
> 
> 标签：asp.net, asp.net-web-api, routes, asp.net-web-api-routing

我有一个名为 Agency 的实体，具有以下 api

```
GET     http://localhost:37331/api/agency?start=1&limit=10&status=1
GET     http://localhost:37331/api/agency/2
POST    http://localhost:37331/api/agency 
PUT     http://localhost:37331/api/agency
DELETE  http://localhost:37331/api/agency/4
POST    http://localhost:37331/api/agency/activate/3
POST    http://localhost:37331/api/agency/deactivate/3
GET     http://localhost:37331/api/agency/types 
```

我使用的路线模板是

```
 config.Routes.MapHttpRoute(
            name: "ControllerActionIdApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { },
            constraints: new { id = @"\d+" }
        );
        //
        config.Routes.MapHttpRoute(
            name: "ControllerActionApi",
            routeTemplate: "api/{controller}/{action}"
        );
        //
        config.Routes.MapHttpRoute(
            name: "ControllerIdApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { },
            constraints: new { id = @"\d+" }
        );
        //
        config.Routes.MapHttpRoute(
            name: "ControllerApi",
            routeTemplate: "api/{controller}"
        ); 
```

显然，第 2 和第 3 之间存在歧义。我确实有一个解决方法，将 id 放入查询字符串

```
GET     http://localhost:37331/api/agency?id=2
DELETE  http://localhost:37331/api/agency?id=4 
```

我认为必须有聪明的方法。你能就此提出建议吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T10:08:40.893

路由按顺序匹配。您的约束：第三条路线上的 new { id = @"\d+" } 没有得到查看，因为第二条路线总是会赢。

所以交换你的第二和第三条路线。

始终将最具选择性的路线放在顶部。

```
 config.Routes.MapHttpRoute(
        name: "ControllerActionIdApi",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { },
        constraints: new { id = @"\d+" }
    );
    //

    config.Routes.MapHttpRoute(
        name: "ControllerIdApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { },
        constraints: new { id = @"\d+" }
    );
    //
    config.Routes.MapHttpRoute(
        name: "ControllerActionApi",
        routeTemplate: "api/{controller}/{action}"
    );
    //
    config.Routes.MapHttpRoute(
        name: "ControllerApi",
        routeTemplate: "api/{controller}"
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:23:16.620

试试这个

```
routeTemplate: "api/{controller}/{action}/{id}" 
```

# php - 按数据库中的字段排序/排序

> ID：14638448
> 
> 赞同：0
> 
> 时间：2013-02-01T01:46:42.177
> 
> 标签：php, database

嗨，当显示在网页中时，是否可以对 agestart 字段上的记录进行排序。这是可以正常工作的代码，但我无法对其进行排序。

```
case 'lookagestart':
    $data = $osDB->getAll ( $sqlSelect.$same_lookagestartsql, array( USER_TABLE, $user['username'], $user['lookagestart'],'active',$active_lang ) ) ;
    $t->assign('showhead',get_lang('above_lookagestart'));

    break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:51:15.897

如果无法访问您的系统，我无法确定，但是...

如果你试过这个怎么办？

```
case 'lookagestart':
    $sort_clause = ' ORDER BY `lookagestart` ';
    $data = $osDB->getAll ( $sqlSelect.$same_lookagestartsql.$sort_clause, array( USER_TABLE, $user['username'], $user['lookagestart'],'active',$active_lang ) ) ;
    $t->assign('showhead',get_lang('above_lookagestart'));

    break; 
```

# ruby-on-rails - 不知道如何构建任务 'db:create'

> ID：14638454
> 
> 赞同：9
> 
> 时间：2013-02-01T01:47:04.673
> 
> 标签：ruby-on-rails, rake

我正在从 sqllite db 迁移到 mysql2。我正在运行 mysql（并更改了 database.yml），但由于某种原因，我的 rake db:create 回来了：

```
rake aborted!
Don't know how to build task 'db:create' 
```

当我执行：rake -T 时，列表中不会出现任何数据库任务。

我在 Rails 3.2.9 上

我在这里缺少什么明显的东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T02:22:35.187

刚刚想通了。有人在 application.rb 中注释掉了以下内容：

```
require 'rails/all' 
```

一旦放回 rake -T 返回数据库任务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-02T13:11:55.800

对于 2019 年登陆这里的人：

如果您`rails new`使用`-O`(Capital 'O') 运行或`--skip-activerecord`想稍后添加数据库，则需要取消注释`application.rb`以启用 Active Record 框架：

`require "active_record/railtie"`

*编辑：*
您还需要在应用程序的根目录中创建以下结构：

```
your_app
  |_config
    |_ database.yml
  |_db
    |_ migrate
    |_ schema.rb 
```

然后运行：
`rake db:schema:dump`

# ios - 从带有数据的照片库中打开 UIImage

> ID：14638457
> 
> 赞同：1
> 
> 时间：2013-02-01T01:47:21.233
> 
> 标签：ios, nsdictionary, photo, nsdata

我有两个视图控制器，其中一个我从照片库中选择图像并将其分配给图像属性。使用这个选择器：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo 
```

但相反，我只想从第一个控制器中的选择器中获取图像的地址/数据，推送下一个视图控制器，然后在那里打开具有该地址的图像。那么我执行以下操作：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

当我打印照片的信息时，它看起来像这样：

assets-library://asset/asset.JPG?id=52219875-C221-4F60-B9D4-984AAADB6E63&ext=JPG

问题是 UIImage 有方法`initWithData`，或者`imageWithData`这些方法接受 NSData 而不是 NSDictionary。

如何使用照片库中的数据打开图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:21:28.007

这种方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker 
        didFinishPickingImage:(UIImage *)img 
                  editingInfo:(NSDictionary *)editInfo 
```

不应该使用，自 ios3 以来已被弃用

这种方法：

```
 - (void)imagePickerController:(UIImagePickerController *)picker 
  didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

在您报告时返回字典。

图像指针是该字典中的对象之一。您可以这样获得它：

```
 UIImage* image = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:20:47.943

这是该方法的[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/occ/intf/UIImagePickerControllerDelegate)。

基本上那个字典里有几个键，听[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/occ/intf/UIImagePickerControllerDelegate)：

```
NSString *const UIImagePickerControllerMediaType;
NSString *const UIImagePickerControllerOriginalImage;
NSString *const UIImagePickerControllerEditedImage;
NSString *const UIImagePickerControllerCropRect;
NSString *const UIImagePickerControllerMediaURL;
NSString *const UIImagePickerControllerReferenceURL;
NSString *const UIImagePickerControllerMediaMetadata; 
```

你可能想要`UIImagePickerControllerEditedImage`. 所以这就是你要找的：

```
UIImage *theImage = [info valueForKey:UIImagePickerControllerEditedImage]; 
```

当然，您也可以使用字典中的其他键从图像中获取其他信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:20:22.100

字典提供图像的 URL。所以加载数据

```
NSData *imageData = [NSData dataWithContentsOfURL:[info valueForKey: UIImagePickerControllerReferenceURL]]; 
```

并将此数据用于该`NSImage initWithData`方法。

# python - Python - 执行顺序（文件写入和读取）

> ID：14638459
> 
> 赞同：0
> 
> 时间：2013-02-01T01:47:29.097
> 
> 标签：python, operating-system, system

线条有什么原因吗

```
out = open("tmp.gp",'w')
out.write('plot sin(x)')
out.close
system('gnuplot -persist tmp.gp') 
```

不工作，但这些（下面）呢？

```
system('gnuplot -persist tmp.gp')
out = open("tmp.gp",'w')
out.write('plot sin(x)')
out.close 
```

请注意，我不会在程序期间删除 tmp.gp，因此无论哪种情况，文件都存在并且在执行任何这些行之前包含命令“plot sin(x)”（因为该文件存在于上一次运行中）？

我唯一的猜测是这可能是一种竞争条件，但是将 raw_input() 用于消磨时间并没有帮助（见下文）。谢谢你的帮助！

```
out = open("tmp.gp",'w')
out.write('plot sin(x)')
out.close
raw_input()
system('gnuplot -persist tmp.gp') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:51:01.043

这是因为您实际上并没有调用 close 函数，请更改`out.close`为`out.close()`. 函数调用需要`()`才能被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:26:12.877

正如其他人提到的那样，您没有正确使用 close() 。还可以处理您应该与语句一起使用的文件：

```
with open("tmp.gp",'w') as out:
    out.write('plot sin(x)')
    out.close() 
```

这样即使您不会自己关闭文件或写入文件会引发错误，文件仍然会被关闭。

# java - NetBeans 不会在“项目”视图下显示静态 Web 文件

> ID：14638460
> 
> 赞同：0
> 
> 时间：2013-02-01T01:47:32.300
> 
> 标签：java, maven, netbeans

我有一个多模块 maven 项目，其中一个模块称为“webapp”，并且在 src/main/webapp 中有这些静态文件的所有静态文件和目录。

我习惯于在“项目”视图下看到这些文件+目录，但现在它们不再出现。（我切换到最新版本的 NetBeans，这可能是部分原因。）我现在看到的是

```
webapp Maven Webapp（战争）
   -> 其他来源
        -> 源/主/资源
   -> 依赖项
   -> 项目文件

```

这里缺少的是 src/main/webapp，它是我所有静态文件和 Web 内容的目录。当然，我可以在“文件”视图下看到它，但我不想使用“文件”视图。为什么我在“项目”视图下看不到这个目录？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:34:31.673

从同事那里找到答案。我必须安装一些 NetBeans 插件...我认为是 Java EE Base 做到了。

# php - PHP preg_replace 不匹配多行

> ID：14638461
> 
> 赞同：0
> 
> 时间：2013-02-01T01:47:42.253
> 
> 标签：php, regex, preg-replace

帮助！我正在做一个替换，它将括号中的块转换为由`<div>`s 包围的块。请看下文。

编码：

```
$data = '
<p>
{ 
asdf
asdf
asdf
}
</p>
';

echo preg_replace('%{(.*)}%m', '<div>\1</div>', $data); 
```

输出应该是：

```
<p>
<div>
asdf
asdf
asdf
</div>
</p> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:52:10.343

使用`s`修饰符而不是`m`修饰符。

`s`修饰符允许`.`匹配换行符。

`m`修饰符创建`^`并匹配单个行的`$`开始和结束，而不是整个字符串的开始和结束。

旁注：替换的首选语法是`<div>$1</div>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:52:00.537

使用`s`修饰符。

```
preg_replace('%{(.*)}%s', '<div>\1</div>', $data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T02:26:46.103

使用`s`代替`m`;

```
echo preg_replace('~\{(.*)\}~s', '<div>\1</div>', $data); 
```

只是一个建议，转义所有正则表达式专用的字符。

# c# - C# Json 反序列化

> ID：14638462
> 
> 赞同：1
> 
> 时间：2013-02-01T01:47:50.953
> 
> 标签：c#, json.net

我被要求使用 json 数据，以便在 windows phone 中创建一个问答游戏。我知道我必须使用 json.net 来实现我以前使用过的这个，但是我过去使用的方法在这里没有用。

我的问题是这个。我有这个 json 字符串

```
 [{"corr":"1","q":"text.","type":"0"},
    {"corr":"0","q":"text.","type":"0"},
    {"corr":"1","q":"text.","type":"0"},
    {"corr":"0","q":"text.","type":"0"},
    {"corr":"0","q":"text.","type":"0"},
    {"corr":"1","q":"text.","type":"0"},
    {"corr":"4","q":"text","a":["text","text","text","text"],"type":"1"},
    {"corr":"2","q":"text","a":["text","text","text","text"],"type":"1"},
    {"corr":"1","q":"text","a":["text","text","text","text"],"type":"1"},
    {"corr":"2","q":"text","a":["22,2%","45%","54%","67%"],"type":"1"}] 
```

如您所见，我想用上面的属性填充一些列表。我创建了以下类以表示 json 对象

```
public class QuizObj
{
    public string corr { get; set; }
    public string q { get; set; }
    public string type { get; set; }
    public List<string> a { get; set; }
} 
```

但我真的不知道如何使用它，也找不到真正相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:52:22.330

这样的事情应该可以解决问题：

```
var quizObjs = JsonConvert.DeserializeObject<List<QuizObj>>(serializedStringValue);
string corr = quizObjs.First().corr;
// or
foreach(var quizObj in quizObjs)
{
    string corr = quizObj.corr;
    // etc
} 
```

您将需要添加对 NewtonSoft.Json 的引用，您可以通过[NuGet](http://www.nuget.org)获得它（如果您还没有的话）。

# vb.net - 串口上的十六进制数

> ID：14638464
> 
> 赞同：0
> 
> 时间：2013-02-01T01:48:04.903
> 
> 标签：vb.net, serial-port, networkstream, hex

大家好，我正在尝试控制 Onkyo 接收器的主音量。问题是它在我到达第 10**卷之前一直有效。第 0-9 卷工作得很好**（将音量从 0 提高到 9）。但是，当我转到第 10 卷时，它显示的音量为**16**。**第 11 卷=17**卷，**第 12 卷=18 卷**等等。

excel表是这样说的：

```
"00"-"64"   Volume Level 0 - 100 ( In hexadecimal representation) 
```

![在此处输入图像描述](../Images/e120500554fd59e785deb25386e444ee.png)

串行命令是：

```
Public Function remoteCommands(ByVal theCommand As String) As Boolean
    Dim Stream As NetworkStream
    Dim Client As New TcpClient()
    Dim streamw As StreamWriter
    Dim i As Int32
    On Error GoTo blah

    Client.Connect(main.avIP, 60128)
    Stream = Client.GetStream()
    Dim returndata As String = ""

    If Client.Connected And Stream.CanWrite Then
        streamw = New StreamWriter(Stream)
        Dim sendBytes(theCommand.Length + 18) As Char

        sendBytes(0) = "I"
        sendBytes(1) = "S"
        sendBytes(2) = "C"
        sendBytes(3) = "P"
        sendBytes(4) = Chr(0)
        sendBytes(5) = Chr(0)
        sendBytes(6) = Chr(0)
        sendBytes(7) = Chr(16)
        sendBytes(8) = Chr(0)
        sendBytes(9) = Chr(0)
        sendBytes(10) = Chr(0)
        sendBytes(11) = Chr(theCommand.Length + 3)
        sendBytes(12) = Chr(1)
        sendBytes(13) = Chr(0)
        sendBytes(14) = Chr(0)
        sendBytes(15) = Chr(0)
        sendBytes(16) = "!"
        sendBytes(17) = "1"

        For i = 0 To (theCommand.Length - 1)
            sendBytes(18 + i) = theCommand.Chars(i)
        Next

        sendBytes(theCommand.Length + 18) = Chr(13) '&HD
        streamw.Write(sendBytes)

        Dim bytes(Client.ReceiveBufferSize) As Byte
        Stream.Read(bytes, 0, CInt(Client.ReceiveBufferSize))
        returndata = Encoding.ASCII.GetString(bytes)

        streamw.Flush()
    Else
        MsgBox("error: Stream.Canwrite failed")
    End If
    Client.Close()
End Function 
```

这就是我如何调用上面的函数：

```
Dim vol As String = Trim(lanSent(1).Replace("AVVOL", ""))

If Len(vol) = 1 Then
   vol = "0" + vol
Else
   Select Case vol
      Case 10
        vol = "a"
      Case 11
        vol = "b"
   End Select
End If

Call avReceiver.remoteCommands("MVL" & vol) 
```

我正在寻找转换器，我注意到**10**代表十六进制**的 A。**但即使发送该**MVLA**也无济于事。

我会错过什么？

**更新（并解决）**

```
Dim vol As Integer = Trim(lanSent(1).Replace("AVVOL", ""))
Dim vol2 = vol.ToString("X2")

Call avReceiver.remoteCommands("MVL" & vol2) 
```

![在此处输入图像描述](../Images/f6aae164b784391133677a01427dac25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:10:04.880

发送`OA`（零 A）。文本说它正在寻找十六进制`00`到十六进制`64`（十进制0到100）。请注意，十六进制值表示为两位数字，而不是一位。

如果您实际使用的是标签所示的 VB.NET，那么您做错了。:-) 你应该使用类似的东西：

```
newvol = 10;
vol = newvol.ToString("X2")    `Converts to 2-digit hex string
Call avReceiver.remoteCommands("MVL" & vol) 
```

# html - Magento 添加到购物车滑块

> ID：14638466
> 
> 赞同：0
> 
> 时间：2013-02-01T01:48:18.970
> 
> 标签：html, magento, slider, cart

有没有办法将添加到购物车按钮替换为像 Magento 中的滑块一样的 iPhone？

另外，有没有办法将外部链接添加到主菜单而不是指向另一个类别？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:01:28.573

您可以在 design/frontend/yourpackage/yourtheme/template/catalog/navigation/top.phtml 中创建自定义模板。

通过粘贴来自 base/default/template/catalog/navigation/top.phtml 的代码，之后您可以添加

```
 <div class="nav-container">
        <ul id="nav">
           <?php echo $_menu ?>
           **<li> <a href="external link"> Testimonials </a> </li>**
         </ul>
    </div> 
```

或者您可以使用扩展灵活菜单 ( [http://www.magentocommerce.com/magento-connect/flexible-menu-9755.html](http://www.magentocommerce.com/magento-connect/flexible-menu-9755.html) ) 来帮助您实现这一目标。

希望这可以帮助 ：）。

干杯，
斯瓦普纳

# git - 为什么基于合并的 SCM 比基于锁的系统更好？

> ID：14638467
> 
> 赞同：3
> 
> 时间：2013-02-01T01:48:25.243
> 
> 标签：git, version-control, merge, locking

到目前为止，我们的开发团队一直在使用基于 Lock 的 SCM（Source Control Management）系统。最近，我们面临着用新的、更好的系统更换系统的必要性。

作为一个新系统，我建议使用 Git。除了包括我在内的少数人，他们从未听说过 Git。所以我对此做了一些解释。

问题是他们认为合并系统而不是锁定系统不能安全地保持源代码的完整性。

尽管我解释了 Git 的系统以及许多已经在使用 Git 系统的知名项目并享有很高的声誉，但他们从未对 Git 感到放心。

我怎样才能让他们对此感到放心？我如何解释合并不是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T10:25:47.040

本身基于合并的系统并不比基于锁的系统好。这完全取决于您的项目。如果您有不可合并的文件，则基于锁的系统可能会更好。

但是，如果我正确理解您的问题，您想知道如何说服您的同事。

你可能会说 linux 是一个很好的例子，linux 开发永远不可能使用基于锁的系统。但是，linux 有一个庞大的开发基础，您的团队可能还没有。所以这真的不是争论。如果对您来说不是问题，那么可扩展性和多用户带来的所有好处都不适用。

但是，您的同事担心代码完整性。这就是为什么你应该改变系统。基于锁的方法是以文件为中心的。（当然有像svn这样的中间解决方案，但是假设你使用像cvs och vss这样的东西）。然而，一个单独的文件很少单独分发。

也就是说，一个文件的更改将影响其他文件，因为它们相互通信。使用基于锁的方法，您永远无法确定您的更改将如何影响其他同事的更改。如果您将文件 A 更新为 rev 2 并使用文件 B rev 1 对其进行测试，然后您的同事将文件 B 更新为 rev 2，您怎么知道它会起作用？为什么你的同事甚至会认为这可能是一个问题？他只碰了文件B，他为什么要测试文件A？

使用 git，您可以采用基于系统的方法来解决问题。每个更改都是对整个存储库的更改，您始终可以拥有一个可以保证工作的版本。关键是，只看一个文件，无论如何你都会破坏代码的完整性。

# php - 如何从数据库表中取出所有数据？

> ID：14638470
> 
> 赞同：0
> 
> 时间：2013-02-01T01:49:21.060
> 
> 标签：php

我有这个查询，但结果只是数据库表中的最后一行
（我想显示表中的所有行：

```
$sql = mysql_query("SELECT * FROM LESSONS WHERE L_STATE='0' ORDER BY ID DESC") or die($sql_error);
if(mysql_num_rows($sql) > 0){
    $resultset = array();
    while($rs = mysql_fetch_assoc($sql)){
        $resultset[] = $rs;
    }
    foreach ($resultset as $rs){
        $l_id = $rs['ID'];
        $l_title = $rs['L_TITLE'];
        $l_comments = $rs['L_COMMENTS'];
        $l_views = $rs['L_VIEWS'];
    }
}else{
        $l_id = $no_data;
        $l_title = $no_data;
        $l_comments = $no_data;
        $l_views = $no_data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:50:42.560

您反复覆盖相同的变量`$l_id`，`$l_title`以此类推，直到下一行，直到最后一行……然后您惊讶地发现只得到最后一行？

您需要将输出内容放在循环内才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:52:00.757

您正在循环您的结果集，将结果分配给它们各自的变量，然后对它们不做任何事情。每次循环迭代时，所述变量都会被覆盖，因此你只能得到最后一行。

# java - Servlet 的 MVC 架构的工作

> ID：14638472
> 
> 赞同：3
> 
> 时间：2013-02-01T01:49:52.127
> 
> 标签：java, jsp, model-view-controller, servlets

![在此处输入图像描述](../Images/a592987c788da2f7c334856e3d9994c1.png)

所以，是的，这就是我所理解的。

*   **Servlet**只是一个中介，负责找出请求中的参数是什么意思。这些参数被提供给`.java`文件。它只是一个中介
*   `.java`文件是执行业务逻辑的**模型**
*   **View**是将进行演示的 JSP

我做对了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:28:36.350

模型视图控制器模式并不特定于 Java 或 Servlet 技术。有很多非java的MVC实现，而在Java中，也有非Servlet的实现（Swing就是一个例子）。

在 Java 中，当使用基于 Servlet 的 MVC 时，通常会使用 MVC 框架。这里有两个主要类别：基于动作和基于组件，区别在于基于动作的框架独立地监听每个注册的 URL，而基于组件的框架保持一个组件树并维护服务器端状态。

基于动作的框架有 Spring MVC、Struts 1+2、Stripes、Play 等。基于组件的框架有 Wicket、JSF 1 & 2、Tapestry 等。

您的图表接近事实，但存在一些微妙的误解。

首先，谈论 .java 文件是没有意义的。Java 源文件与已部署的 Web 应用程序完全无关，它仅使用已编译的 .class 文件，并且 JavaVM 可以用多种不同的语言进行编程，因此应用程序不关心 .class 文件是否从 Java、Scala、 Groovy、JRuby、Clojure、AspectJ 或其他任何东西，只要它们符合 Java 类文件规范即可。

其次，虽然 JSP 长期以来一直是 Java Servlet 技术中的默认视图技术，但它远非唯一。其他技术包括 Facelets、Velocity、Freemarker 等，也没有什么可以阻止您在没有专用视图技术的情况下将数据直接写入来自控制器的请求（尽管通常不建议这样做）。

基本上，MVC 代表的是一个系统，其中有用于业务逻辑（M）、视图技术（V）和将事物联系在一起的控制器的单独代码。在组织良好的 MVC 架构中，M 部分被很好地封装，相同的业务逻辑也可以通过其他渠道（例如 Web 服务、直接库访问等）执行。此外，应该可以通过外部配置来切换视图技术，而无需编辑实际的控制器逻辑。

我建议您阅读[Spring MVC 框架的文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)，据我所知，它是目前最强大（并且也易于使用）的 MVC 框架，并且工具支持也很棒（在 InteliJ Idea 或基于 Eclipse 的 SpringSource 工具套件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T09:46:16.200

当您谈论 MVC 时，所有三个层都应该彼此分开。在网络应用程序中：

1：控制器应负责处理用户请求，然后过滤并执行适当的操作，然后将生成的响应转发给客户端。

2：模型由您的业务逻辑、bean 和 Pojo 类组成。这应该处理您的逻辑，执行一些操作并将生成的结果呈现给某种持久对象或 DTO。

3：视图由您的GUI、一些表示逻辑组成，它应该与您的后端分离，最终您向客户显示结果的封装形式，即客户实际需要的结果。

> MVC有两种类型：MVC1（Push-MVC）和MVC2（Pull-MVC）

Pull-MVC 和 Push-MVC 可以更好地理解视图层如何获取数据，即要渲染的模型。在 Push-MVC 的情况下，数据（模型）由控制器构造并提供给视图层，方法是将其放入范围变量（如请求或会话）中。典型的例子是 Spring MVC 和 Struts1。另一方面，Pull-MVC 将通常在 Controller 中构建的模型数据保存在一个公共位置，即在动作中，然后由视图层呈现。Struts2 是一个基于 Pull-MVC 的架构，其中所有数据都存储在 Value Stack 中，并由视图层检索以进行渲染。

# ios - UITableViewHeaderFooterView* header =[self.tableView headerViewForSection:0];

> ID：14638477
> 
> 赞同：0
> 
> 时间：2013-02-01T01:50:50.740
> 
> 标签：ios, objective-c, uitableview

所以我有一个表视图的以下标题：

```
UITableViewHeaderFooterView* header =[self.tableView headerViewForSection:0]; 
```

此标头有一个图像视图，我以编程方式将其添加为子视图。如何修改和重新加载此图像或标题中的任何内容，而无需执行 [tableView reloadData]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:02:00.467

我想你可以像这样枚举标题的子视图：

```
UITableViewHeaderFooterView* header =[self.tableView headerViewForSection:0];
for(UIView *v in header.subviews){
    if([v isKindOfClass:[UIImageView class]])
         {
           UIImageView *imgView = (UImageView*)v;
           //do ur stuff here for modification
            break;
         }   
    } 
```

**如果你有多个 ImageViews 你可以用标签**来区分它们

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:05:31.220

您可以为要访问的视图设置 IBOUTLET 属性。**

# .net - 如何在函数的元组中定义类型

> ID：14638484
> 
> 赞同：2
> 
> 时间：2013-02-01T01:51:22.143
> 
> 标签：.net, f#, functional-programming

我刚刚开始使用 F# 和函数式编程。我想知道如何使函数采用元组，其中我定义第一个值必须是字符串，而不是标准的 int。

例子：

复制字符串`s`,`n`次并返回它的函数。我现在拥有的是这样的：

```
let rec pow2 = function
    | (s:string,0) -> ""
    | (s:string,n) -> s + pow2(s,n-1) 
```

这行得通，但我认为有比定义`s:string`每个案例更好的方法。

（我知道`String.replicate`，这不是为了效果，而是为了学习）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T02:06:02.223

实际上，这里不需要类型注释。第`""`一个模式匹配中的返回值对编译器来说是一个足够的提示：

```
> let rec pow2 = function
    | (s,0) -> ""
    | (s,n) -> s + pow2(s,n-1);;

val pow2 : string * int -> string 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T02:06:17.627

您只需要在第一种情况下使用类型注释——F# 编译器可以推断`string`在其余情况下元组的第一个元素必须是 a。

```
let rec pow2 = function
    | (s:string,0) -> ""
    | (s,n) -> s + pow2(s,n-1) 
```

这只是风格问题，但我认为如果您编写这样的函数，它会更容易阅读：

```
let rec pow2 (s, n) =
    match n with
    | 0 -> ""
    | _ -> s + pow2(s, n-1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T21:32:55.547

您也可以这样做，其中元组的类型在函数定义中给出：

```
let rec pow2 ((s, n) : string * int) =
    match n with
    | 0 -> ""
    | _ -> s + pow2 (s, n - 1) 
```

请注意，元组的元素`*`在显式类型注释中被分隔。此外，正如 Stephen 所指出的，在这个例子中，类型推断系统将足够聪明，可以找出元组的类型，因为我们匹配`n`一个整数，并且我们添加了一个字符串 ( `""`) `s`。

# c# - 如何从网格获取值到c#控制器

> ID：14638486
> 
> 赞同：0
> 
> 时间：2013-02-01T01:51:37.517
> 
> 标签：c#, asp.net-mvc, extjs, extjs4, extjs4.1

我正在尝试从我的 c# 控制器中的网格中获取值。这是我的商店和网格

```
Ext.create('Ext.data.Store', {
    storeId:'store',
    fields:['name', 'email', 'phone'],
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
     }
});

Ext.create('Ext.grid.Panel', {
    store: Ext.data.StoreManager.lookup('store'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

这就是我试图将我的网格值传递给控制器​​的方式

```
var records = [];
this.store.data.each(function(rec) {
     records.push(rec.data);
});
Ext.Ajax.request({
     url: 'mycontroller/read_grid',
     params: {
          par1: Ext.encode(records)
     }
}) 
```

我的问题是如何从列电话中获取所有值来更新我的 sql 数据库。我是使用某种数组还是有一种方法可以将“phone”列的所有值存储在数据库中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:08:55.380

你做错了。首先，您应该始终`[idProperty][1]`为模型拥有一个属性，并且您应该始终使用模型！现在，如果您没有定义模型，商店将使用隐式模型，如果您没有定义 a `idProperty`，它将默认为“id”。

**现在假设您拥有所有这些：** 如果您随后添加或编辑绑定到商店（添加或加载到其中）的该类型的模型实例（记录），您可以提交所有已更改的模型实例（有脏字段）或通过访问`sync()`商店是新的（幻影） 。代理将需要一个合适的作家。在您的情况下，您可以将写入配置`[allowSingle][2]`为 false 以强制写入器始终将记录数组（列表）发送回服务器，否则您可能会遇到控制器上的反序列化错误。

你的情况听起来有点不寻常，因为如果你只是发送电话号码，你怎么知道哪个电话号码属于谁？无论如何，如果您按照上述方式进行操作，那么您的方法就正确，您仍然可以决定在服务器上采用哪些字段。

> **注意**：如果您在模型上定义代理，则无需在商店中再次定义相同的代理。

**更新**

要仅获取一种字段类型并将其发送，您可以执行（未经测试）

```
var emails = store.collect('email');
Ext.Ajax.request({
    url: 'page.php',
    jsonData: emails,
    success: function(response){
        var text = response.responseText;
        // process server response here
    }
}); 
```

请参阅**[收集](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-collect)**和**[索取](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request)**更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-20T20:43:03.700

```
public class UserController : ControllerBase
{
    private DemoDbContext _dbContext;

    public UserController(DemoDbContext dbContext)
    {
        _dbContext = dbContext;
    }

    [HttpGet("GetUsers")]
    public IActionResult Get()
    {
        var users = _dbContext.demodb.ToList();
        return Ok(users);
    }

    [HttpPost("CreateUser")]
    public IActionResult Create([FromBody] UserRequest request)
    {
        tblDemodb user = new tblDemodb();
        user.UserName = request.UserName;
        user.FirstName = request.FirstName;
        user.LastName = request.LastName;
        user.City = request.City;
        user.State = request.Country;
        user.Country = request.State;
        _dbContext.demodb.Add(user);
        _dbContext.SaveChanges();
        return Ok();
    }

    [HttpPut("UpdateUser")]
    public IActionResult Update([FromBody] UserRequest request)
    {
        var user = _dbContext.demodb.FirstOrDefault(x => x.Id == request.Id);
        user.UserName = request.UserName;
        user.FirstName = request.FirstName;
        user.LastName = request.LastName;
        user.City = request.City;
        user.State = request.Country;
        user.Country = request.State;
        _dbContext.Entry(user).State = EntityState.Modified;
        _dbContext.SaveChanges();
        return Ok(_dbContext.demodb.ToList());
    } 
```

# .net - VB6 和 VB.NET 有什么区别？

> ID：14638495
> 
> 赞同：0
> 
> 时间：2013-02-01T01:52:23.233
> 
> 标签：.net, vb.net

> **可能重复：**
> [VB.NET 和以前的 VB 版本有什么区别？](https://stackoverflow.com/questions/1363509/what-are-the-differences-between-vb-net-and-previous-versions-of-vb)

VB6 和 VB.NET 有什么区别？有哪些变种？?? 我是这个领域的新手，希望能得到更多的意见。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:41:20.627

你可以说 VB.Net 已经取代了 VB6，就像现代英语取代了中世纪英语一样。

我建议从维基百科或谷歌开始。

[http://en.wikipedia.org/wiki/Visual_basic](http://en.wikipedia.org/wiki/Visual_basic)
[http://en.wikipedia.org/wiki/Visual_Basic_.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)

如果您打算学习一个，请选择 .Net

# php - 我应该使用什么格式将用户的首选时区存储在 MySQL 表中？

> ID：14638498
> 
> 赞同：0
> 
> 时间：2013-02-01T01:53:11.483
> 
> 标签：php, mysql, database, datetime, timezone

> **可能重复：**
> [在 MySQL 中存储时区的数据类型/结构](https://stackoverflow.com/questions/7586819/datatype-structure-to-store-timezones-in-mysql)
> [如何在 mysql 中存储用户时区？](https://stackoverflow.com/questions/7679794/how-to-store-users-timezone-in-mysql)

我看到两个选项 - 与 UTC 或 GMT 的偏移量，或者将时区存储在像“Asia/Seoul”这样的字符串中。我知道偏移方法不考虑时间变化，所以我不会使用它，但由于某种原因，存储用户刚刚用英语输入的时区似乎有点奇怪。还有其他一些我忽略的时区格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:54:16.467

如果您要使用 PHP，那么像这样的时区字符串`Asia/Seoul`会更容易使用，尤其是在您使用[`DateTime`](http://us3.php.net/manual/en/book.datetime.php)类套件时（尤其是[`DateTimeZone`](http://us3.php.net/manual/en/class.datetimezone.php).

# javascript - 如何从 iframe 内部调用 Javascript 函数？

> ID：14638500
> 
> 赞同：1
> 
> 时间：2013-02-01T01:53:14.997
> 
> 标签：javascript, html, iframe

> **可能重复：**
> [从 Iframe 到父页面 javascript 函数的 Iframe 函数调用](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function)

我需要从 iframe 运行 JavaScript 函数（在 HTML 页面中），我按照在网上找到的说明进行操作，但无法使其工作。有任何想法吗？

这是代码：

```
<html>
<head>
<script type="text/javascript"> 
function testFunction()
{
    var jsmessage = "Test succeed.";
    alert(jsmessage);
    return false;
}
</script>
</head>
<body>

<iframe id="myframe" src="iframe.html" height="260" width="620" frameborder="0"></iframe>

</body>
</html> 
```

这是 iframe.html 代码：

```
<html>
<body>

<input type="button" onclick="parent.testFunction();" value="Test function">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:15:50.433

我刚刚复制了你的代码，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:11:59.560

我已经测试过了，运行正常。为什么你说它不能工作？请详细写出错误信息。
还有一个问题，html5中不允许使用“frameborder”。我删除它。

# zend-framework - 如何在 Zend Framework 编写的模块中检查 drupal 用户角色

> ID：14638502
> 
> 赞同：0
> 
> 时间：2013-02-01T01:53:36.930
> 
> 标签：zend-framework, drupal, drupal-modules

我使用 Zend 框架编写了一个 Web 应用程序，并使用“.module”文件将其转换为 drupal 模块。

但我需要在该模块中授权当前的 drupal 用户。

我如何检查 Zend 中的 drupal 用户角色？

顺便说一句，我发现 Drupal 有自己的会话处理程序来将数据存储在数据库中，而 zend 使用默认处理程序将会话数据存储到文件系统中。所以它使它们分开。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:39:55.413

在 Drupal 中检查角色数组本身被认为是不好的做法，正确的方法是为该角色分配适当的权限，并使用 来检查该权限[`user_access()`](http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_access/7)，例如

```
if (user_access('an appropriate permission')) {
  // User is authorised.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:33:19.800

所以你实际上有一个 Drupal 模块。

尝试

```
<?php
global $user;
if (in_array('administrator', array_values($user->roles))) {

} 
```

# html - XSLT 转换成固定表结构

> ID：14638508
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:54:17.693
> 
> 标签：html, xml, xslt, xslt-1.0

我对具有固定结构和可变输入内容的输出表的 XSLT 转换有疑问。

我概述了 2 个不同的示例。

所需的输出表是 6 列和 2 行。

但所需的 td 类和内容取决于输入 XML

我有一个前面的例子，由@Kirill Polishchuk 提供

[使用 xsl 从部分属性中提取类](https://stackoverflow.com/questions/13466641/extracting-a-class-from-the-section-attribute-using-xsl)

请注意我正在使用 XSLT 1.0。任何建议或指导将不胜感激。

示例 1

输入包含 6 个部分的 XML

```
<root>
  <page number="1" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="2" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="3" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="4" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="5" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="6" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="7" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="8" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="9" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="10" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="11" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="12" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="13" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="14" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="15" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="16" section="Arsenal_Revenue">Arsenal_Revenue</page> 
  <page number="17" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="18" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="19" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="20" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="21" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="22" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="23" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="24" section="Arsenal_Outlook">Arsenal_Outlook</page> 
 </root> 
```

所需输出 6 行和 2 列

```
<table>
<tr>
<td class="Stadium">Stadium</td>
<td class="Crowds">Crowds</td>
<td class="Support">Support</td>
<td class="Revenue">Revenue</td>
<td class="Cost">Cost</td>
<td class="Outlook">Outlook</td>
</tr>
<tr>
<td class="Stadium_R2">1-4</td>
<td class="Crowds_R2">5-6</td>
<td class="Support_R2">7-10</td>
<td class="Revenue_R2">11-14</td>
<td class="Cost_R2">15-18</td>
<td class="Outlook_R2">19-22</td>
</tr>
</table> 
```

示例 2

输入 XML 4 部分

```
<root>
  <page number="1" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="2" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="3" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="4" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="5" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="6" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="7" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="8" section="Arsenal_Support">Arsenal_Support</page> 
  <page number="9" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="10" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="11" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="12" section="Arsenal_Cost">Arsenal_Cost</page> 
  <page number="13" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="14" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="15" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="16" section="Arsenal_Outlook">Arsenal_Outlook</page> 
 </root> 
```

所需输出 6 行和 2 列

```
<table>
<tr>
<td class="Stadium">Stadium</td>
<td class="Support">Support</td>
<td class="Cost">Cost</td>
<td class="Outlook">Outlook</td>
<td class="None"></td>
<td class="None"></td>
</tr>
<tr>
<td class="Stadium_R2">1-4</td>
<td class="Support_R2">5-8</td>
<td class="Cost_R2">9-12</td>
<td class="Outlook_R2">13-16</td>
<td class="None"></td>
<td class="None"></td>
</tr>
</table> 
```

问候JJ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:41:32.687

我相信这应该可以解决问题。注意使用`NoneRows`模板将多余的单元格填充为6：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kGroup" match="page" use="@section"/>

  <xsl:template match="/*">
    <table>
      <xsl:variable name="groups"
         select="*[generate-id() = generate-id(key('kGroup', @section)[1])]" />

      <tr>
        <xsl:apply-templates select="$groups" mode="top" />
        <xsl:call-template name="NoneCells">
          <xsl:with-param name="count" select="6 - count($groups)" />
        </xsl:call-template>
      </tr>
      <tr>
        <xsl:apply-templates select="$groups" mode="pageNums" />
        <xsl:call-template name="NoneCells">
          <xsl:with-param name="count" select="6 - count($groups)" />
        </xsl:call-template>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page" mode="top">
    <xsl:variable name="sectName" select="substring-after(@section, 'Arsenal_')" />
    <td class="{$sectName}">
      <xsl:value-of select="$sectName" />
    </td>
  </xsl:template>

  <xsl:template match="page" mode="pageNums">
    <xsl:variable name="groupMembers" select="key('kGroup', @section)" />
    <td class="{substring-after(@section, 'Arsenal_')}_R2">
      <xsl:value-of select="concat($groupMembers[1]/@number, '-', 
                                   $groupMembers[last()]/@number)"/>
    </td>
  </xsl:template>

  <xsl:template name="NoneCells">
    <xsl:param name="count" />
    <xsl:if test="$count > 0">
      <td class="None"></td>
      <xsl:call-template name="NoneCells">
        <xsl:with-param name="count" select="$count - 1" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

在您的第一个示例输入上运行时：

```
<table>
  <tr>
    <td class="Stadium">Stadium</td>
    <td class="Crowds">Crowds</td>
    <td class="Support">Support</td>
    <td class="Revenue">Revenue</td>
    <td class="Cost">Cost</td>
    <td class="Outlook">Outlook</td>
  </tr>
  <tr>
    <td class="Stadium_R2">1-4</td>
    <td class="Crowds_R2">5-8</td>
    <td class="Support_R2">9-12</td>
    <td class="Revenue_R2">13-16</td>
    <td class="Cost_R2">17-20</td>
    <td class="Outlook_R2">21-24</td>
  </tr>
</table> 
```

在第二个示例输入上运行时：

```
<table>
  <tr>
    <td class="Stadium">Stadium</td>
    <td class="Support">Support</td>
    <td class="Cost">Cost</td>
    <td class="Outlook">Outlook</td>
    <td class="None" />
    <td class="None" />
  </tr>
  <tr>
    <td class="Stadium_R2">1-4</td>
    <td class="Support_R2">5-8</td>
    <td class="Cost_R2">9-12</td>
    <td class="Outlook_R2">13-16</td>
    <td class="None" />
    <td class="None" />
  </tr>
</table> 
```

# video.js - video.js - 默认为 Flash 播放器

> ID：14638520
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:55:32.563
> 
> 标签：video.js

在 Google 中工作，但在最新版本的 FF 中，它默认为 Flash。也根本不会在andriod上玩。视频文件是 mp4

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:50:12.663

Firefox 无法播放 MP4，因此必须使用 Flash 后备。如果您想在 Firefox 上避免使用 Flash，请包含 webm 或 ogv 源。

Android 上的 MP4 应该没问题。你能给一些代码/链接吗？

# html - CSS字体大小在移动设备上无法正常工作

> ID：14638524
> 
> 赞同：12
> 
> 时间：2013-02-01T01:56:08.630
> 
> 标签：html, css, mobile, browser

我正在为学校做一个小项目，我们必须将 html5 和 css3 结合起来。它现在只是在开始阶段，因为我正在尝试为移动版和桌面版创建两个单独的 css 文件。

对于移动版本，我试图让菜单仅显示为列表，但字体更大。不过，我绝对无法让它发挥作用。

这是菜单的CSS：

```
nav ul {
    list-style: none;
    background-color: green;
    padding: 0;
}

nav li {
    border-bottom: 1px solid black;
    padding: 5px;
}

nav {
    margin-top: -36px;
    width: 100%
}

nav h1{
    margin: 0;
} 
```

这会在我的桌面![带 1em 的桌面](../Images/3e262228e18e040e91414abcf6d1acef.png) 和我的 iPhone上创建以下内容![带 1em 的 iPhone](../Images/0738464b4820d3a5df330357f810b98c.png)

在文件顶部的 HTML 中，字体大小设置为 1em。但是 1em 对于移动设备来说还不够大，所以我想要它更大，这似乎是不可能的。

即使我给`nav h1`一个 10em 的字体大小，它也不会比这个大： ![iPhone 10em](../Images/12e994fac8ac1ddd78ed89412203e3a2.png)

虽然在我的桌面上它确实可以正常工作，但它看起来像这样：![10em 桌面](../Images/0cfdb5e50a5e201c76be2b2206600ba2.png)

当试图使“博客文章”更大时也会出现同样的问题，他们就是不会这样做。

我通常使用 CSS 没有问题，但这次我想不通。希望任何人都可以提供帮助！我觉得这是非常明显的事情。

这是完整的 CSS：[http ://snipt.org/zLic5](http://snipt.org/zLic5)

这是html：[http ://snipt.org/zLid2](http://snipt.org/zLid2)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T07:12:01.637

我看到了你的 html 代码。您没有添加任何元标记。当您开发移动网站时，需要某些元标记，

例如，您必须添加 -

```
<meta name="HandheldFriendly" content="true" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, width=device-width, user-scalable=no" />
<title>Welcome to your school name</title>

<!-- smart phone css  -->
<link href="assets/phone.css" rel="stylesheet" type="text/css" media="all and (min-width: 0px) and (max-width: 480px)" />

<!-- Tablet -->
<link href="assets/tablet.css" rel="stylesheet" type="text/css" media="all and (min-width: 481px) and (max-width: 800px)" />

<!-- Desktop -->
<link href="assets/desktop.css" rel="stylesheet" type="text/css" media="only screen and (min-width:801px)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:25:37.807

我看到了一些我认为可以帮助您解决问题的事情。从语义上讲，您根本不想`<h1>`在菜单列表中使用标签。删除这些标签并将样式应用于`nav li`css 样式并相应地调整填充。此外，这只是一个建议，但我从一些网站上听说理想的移动字体大小是`pt`.

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:48:00.067

返回使用 li 导航。

然后将字体大小设置为可接受的值（14 像素或 16 像素）。

然后，在您的 CSS 中，使用媒体查询。

```
@media (max-width: 480px) { // will only happen on viewport less then 480 pixels (mobile)
  li {
    font-size:18px; // larger font (or whatever you want to do
    padding: 20px; // can even increase your padding
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-13T19:49:19.443

尝试使用 css 属性`text-size-adjust`在移动设备上缩放文本。就像是：

```
nav {
    text-size-adjust: 200%;
}
nav ul {
    text-size-adjust: 300%;
}
nav h1 {
    text-size-adjust: 400%;
} 
```

# django - 按邮政编码的 Django 距离搜索

> ID：14638525
> 
> 赞同：0
> 
> 时间：2013-02-01T01:56:12.227
> 
> 标签：django, search, distance

我想根据输入的美国邮政编码的距离进行搜索。

首先，我知道我需要一个搜索表单：

```
class SearchForm(forms.Form):
    zipcode = forms.CharField(max_length=5) 
```

然后我将这些选项传递给下一个视图，在该视图中我根据输入的参数进行过滤。这对我来说很棘手。我搜索了很多，似乎有很多解决方案。我用[这篇文章](https://stackoverflow.com/questions/6229827/django-is-geodjango-a-good-fit-for-my-website)作为参考会给我这样的东西：

```
def display_map(request, zipcode):
    objects_near_zip = Thing.objects.filter(location__distance_lte=(Point([zipcode]), D(mi=5))) 
```

但我需要把邮政编码变成一个点。我该怎么做？您是否使用过更好的解决方案？谢谢你的想法！

* * *

编辑：

我找到[了这个讨论](https://groups.google.com/forum/?fromgroups=#!msg/geodjango/butW7zJQhSw/FuRQ09VbI3cJ)，但实现对我来说有点难以理解。我创建了一个`Zipcode`模型，这是有道理的。

但我不确定如何或在哪里加载邮政编码，就像他在帖子中所说的那样：

```
lm = LayerMapping(Zipcode, 'tl_2008_us_zcta5.shp',
                   { 'code' : 'ZCTA5CE',
                     'mpoly' : 'MULTIPOLYGON',
                   })
lm.save() 
```

我在哪里放置此代码？shp 文件很大，即使在我的桌面上也需要很长时间，所以我不确定这是最好的解决方案。

# python - 相对自增 id

> ID：14638526
> 
> 赞同：0
> 
> 时间：2013-02-01T01:56:19.070
> 
> 标签：python, sql, django

我有一个代表项目的 django 模型，每个项目都可以存储在一个特定的组中，如下所示：

```
+----+----------+-----+--------+
| id | group_id | ... | rel_id |
+----+----------+-----+--------+
|  1 |        1 | ... |      1 |
|  2 |        1 | ... |      2 |
|  3 |        2 | ... |      1 |
|  4 |        2 | ... |      2 |
|  5 |        1 | ... |      3 |
|  6 |        3 | ... |      1 |
|  7 |        1 | ... |      4 |
|  8 |        1 | ... |      5 |
+----+----------+-----+--------+ 
```

我需要以`rel_id`某种方式生成和存储该值。

所以基本上我想要和这里完全一样的东西：[Relative incremental ID by reference field](https://stackoverflow.com/questions/8618766/relative-incremental-id-by-reference-field)，但是动态计算不适合我，因为我必须操作表的内容（删除、更新、获取表的切片等） ）。

做这个的最好方式是什么？

目前，我使用 PostgreSQL，但我想找到一个使用 django 抽象层的解决方案，因为我以后必须切换到 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:05:15.087

这是您正在寻找的 - 一种创建 rel_id 列的方法吗？这应该在 PostgreSQL 中工作：

```
SELECT Id, 
  Group_Id, 
  Row_Number() OVER (PARTITION BY Group_ID ORDER BY Id) rn
FROM YourTable
ORDER BY Id 
```

这是[小提琴](http://www.sqlfiddle.com/#!1/644c3/2)。

这应该适用于 MySQL：

```
SELECT ID, Group_Id, RowNumber
FROM (
  SELECT Id, Group_ID,
    @row_num := IF(@prev_value=Group_Id,@row_num+1,1) AS RowNumber
     ,@prev_value := Group_Id as groupRowNumber
  FROM YourTable,
     (SELECT @row_num := 1) x,
     (SELECT @prev_value := '') y
  ORDER BY Group_ID
) t 
```

还有[小提琴](http://www.sqlfiddle.com/#!2/644c3/14)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:14:16.430

```
  ``class Item(models.Model):
    group = models.ForeignKey(Group)
    number = models.IntegerField()
    def save(self, force_insert=False, force_update=False, using=None):
        super(Item, self).save(force_insert = force_insert, force_update = force_update, using = using)
        self.number = Item.objects.filter(group = self.group).filter(id__lte = self.id).count()
        super(Item, self).save(force_insert = force_insert, force_update = force_update, using = using)
</pre> </code>`` `That seems to work.

First `save()` fetches auto generated id, second `save()` updates record with `rel_id`, called `number` in this case.

Filtering with id_lte`用于消除竞争条件。

```

# iphone - 访问另一个数组的值并将其存储到另一个数组

> ID：14638530
> 
> 赞同：-1
> 
> 时间：2013-02-01T01:56:43.127
> 
> 标签：iphone, ios, nsmutablearray, nsarray

我有两个班级 A 级和 B 级

我想访问 A 类中一个数组的值，并将该值传递给 B 类中的一个方法，该方法将一个数组作为参数。

我在 B 类中创建了一个全局变量

```
@property (nonatomic,retain) NSMutableArray *globalArray;
@synthesize globalArray; 
```

在 AI 类中，我使用实例数组变量来存储本地数组的值。

```
globalArray =[[NSMutableArray alloc]initWithArray:localArray]; 
```

但是当我尝试从 B 类访问实例数组时，计数显示为 0

在 BI 类中有以下代码

```
[self insertingArrayHere:globalArray] 
```

我已经导入了标题，但我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:09:39.253

我需要查看更多代码才能获得更准确的答案，但是

根据您的问题，我会说您没有区分 a`class`和`instance`a 的类。

我的意思是你可能在代码的某个地方创建了一个实例 A1，然后在另一个地方你正在创建一个实例 A2。你想知道为什么 A1 和 A2 没有相同的数组。
原因很简单：它们是 2 个不同的实例（如果您愿意，可以是 2 个不同的对象/2 个不同的汽车）。

您的实例属性`globalArray`不是全局变量。

要解决您的问题，您需要查看`singleton`模式。

# algorithm - 为几个旅行者找到最合适的位置折衷的算法

> ID：14638531
> 
> 赞同：3
> 
> 时间：2013-02-01T01:56:52.860
> 
> 标签：algorithm, geolocation

我一直想知道是否有一种已知的算法可以解决以下问题，或者至少是其中的一部分。

假设有一组有限的位置 (x,y)，每个位置都有一个类型（房子、餐厅、咖啡馆、电影院……）和权重（用户评分、质量/价格比……） . 此外，有一部分路径比其他路径更快（取决于运输类型和所需的到达时间）。

要回答的问题是：我们是一群人，都位于 n 个不同的地点，我们想在时间 T 见面，找到我们类型 t（电影院......）的最佳地点（最小化每个人的路径长度和旅行时间） .

这听起来像任何已知的算法吗？

最好的问候， 罗尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:07:16.617

有几种算法可以解决这个问题，这个问题被称为设施位置或 k 中心问题[http://en.wikipedia.org/wiki/Facility_location](http://en.wikipedia.org/wiki/Facility_location)这是一个 NP Hard 问题，并且有一些算法可以近似解决方案，也可以搜索用于空间数据库的“最佳会合点”问题。

# php - 查询以返回数组中的记录

> ID：14638532
> 
> 赞同：0
> 
> 时间：2013-02-01T01:56:56.677
> 
> 标签：php, mysql

我有一个多选列表（链接），它将值发布到 $links。然后，我想对表“链接”运行查询，返回与 $links 中的值匹配的记录。我正在使用以下代码，但没有得到任何结果：

```
<select name="links[]" size="9" multiple="multiple" id="links">
            <?php 
$query = mysql_query("SELECT * from link ORDER BY link_title ASC");
for($i=0;$i<mysql_num_rows($query);$i++) {
$row=mysql_fetch_assoc($query);
?>
            <option value="<?php echo $row['link_pk']; ?>"><?php echo $row['link_title']; ?></option>
            <?php 
}
?>
          </select> 
```

和提交代码：

```
$author_pk = $_GET['author_pk'];
$title = $_POST['title'];
$topic_introduction = $_POST['topic_introduction'];
$selected_topic = $_POST['selected_topic'];
$links = $_POST['links'];
$majors = $_POST['majors'];
$majors_string = implode(",", $majors);
$sub_discipline = $_POST['sub_discipline'];

 if(isset($_POST['submit'])){

$query_links = "SELECT * FROM link WHERE link_pk IN ('.implode(',',$links).')";
 $result_links = mysql_query($query_links, $connection) or die(mysql_error());
 while ($row_links = mysql_fetch_assoc($query_links)){
     $topic_links = array();
     $topic_links[$row_links['url']] = $row_links;

     } if($result_links){

$topic = $topic_introduction . '<p>' . $topic_links;

        $query = "INSERT INTO topic (topic_pk,title,topic,majors,sub_discipline_fk,author_fk,created)
          VALUES ('','$title','$topic','$majors_string','$sub_discipline','$author_pk',NOW())";
        $result = mysql_query($query, $connection) or die(mysql_error());
        if($result){
            $message = "- The topic '" . $title . "' has been created";
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T02:15:06.003

这一行是错误的：

```
while ($row_links = mysql_fetch_assoc($query_links)){ 
```

...因为 $query_links 实际上是一个字符串（您的 SQL 查询）。您应该改用 $result_links。

此外，$query_links 字符串的定义不正确。您必须在开头使用的字符串文字的末尾使用相同的分隔符。代替：

```
$query_links = "SELECT * FROM link WHERE link_pk IN ('.implode(',',$links).')"; 
```

尝试：

```
$query_links = 'SELECT * FROM link WHERE link_pk IN (' . implode(',', $links) . ')'; 
```

# macos - Webstart 在 OSX 上运行错误的 jre 版本

> ID：14638534
> 
> 赞同：2
> 
> 时间：2013-02-01T01:57:20.487
> 
> 标签：macos, java, jnlp, java-web-start

我在 OSX 10.8.2 中使用 jre 运行 jnlp，jre 版本为 1.7.0_11，并且 jnlp 标记设置为在 1.6 中运行：

```
<j2se version="1.6" href="http://java.sun.com/products/autodl/j2se"> 
```

或者

```
<j2se version="1.6*" ...> 
```

但是，当 jnlp 运行时，控制台中会显示以下内容： Java Web Start 10.11.2.21 Using JRE version 1.7.0_11-b21 Java HotSpot(TM) 64-Bit Server

当我使用 jre 1.7 在 windows 中运行相同的 jnlp 文件时，它工作正常，它加载 jre 1.7，然后下载 jre 1.6 并在其上运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:44:42.660

根本原因：

1.  jnlp 设置为仅使用 java 1.6，否则从自动下载站点下载并自动安装

2.  mac 的所有 java 版本，但 1.7 都是由 Apple 开发的，因此它们没有自动下载 url

3.  1.7之后oracle正在为macs开发java

4.  当我查看 java 首选项时，只发现 java 1.7

5.  Jnlp 寻找 java 1.6 并且找不到它并尝试自动下载并且也无法做到这一点，所以它唯一的选择是在 java 1.7 上运行

为了解决这个问题，我们卸载了 java 1.7，然后我们使用以下说明将 1.6 java 默认设置为：http: [//support.apple.com/kb/dl1573](http://support.apple.com/kb/dl1573)

[http://blog.nominet.org.uk/tech/2008/04/24/restarting-the-awt-native-event-thread/](http://blog.nominet.org.uk/tech/2008/04/24/restarting-the-awt-native-event-thread/)

[http://support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)

然后我们遇到了证书问题，但我们做了以下事情： [https ://stackoverflow.com/questions/11727955/the-digital-signature-is-not-trusted-java-will-not-allow-any-access-to -这个应用程序](https://stackoverflow.com/questions/11727955/the-digital-signature-is-not-trusted-)

java 将不允许任何访问此应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:29:13.813

现在，他们告诉我他们需要默认的 java 1.7。

所以，我发现安装 JDK 1.7 而不是 JRE，它是固定的。我可以同时拥有这两个版本，并且我的 jnlp 正在使用 jre 1.6 运行。

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

然后我必须从[http://support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)运行以下命令：

sudo mkdir -p /Library/Internet\ Plug-Ins/disabled

sudo mv /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin /Library/Internet\ Plug-Ins/disabled

sudo ln -sf /System/Library/Java/Support/Deploy.bundle/Contents/Resources/JavaPlugin2_NPAPI.plugin /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin

sudo ln -sf /System/Library/Frameworks/JavaVM.framework/Commands/javaws /usr/bin/javaws

运行后，java小程序插件开始在Chrome中运行，我可以处理Application/Utilities/JavaPreferences中的所有Java版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:24:24.710

修复这些链接以使 java -version 指向 7

```
cd /System/Library/Frameworks/JavaVM.framework/Versions
sudo rm CurrentJDK
sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/ CurrentJDK
sudo ln -s CurrentJDK 1.7
sudo ln -s CurrentJDK 1.7.0 
```

您可以创建指向旧 1.6 的链接

```
sudo rm 1.6 1.6.0
sudo ln -s /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents 1.6
sudo ln -s /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents 1.6.0 
```

# javascript - 为什么我的 div 没有正确更新？

> ID：14638535
> 
> 赞同：0
> 
> 时间：2013-02-01T01:57:21.513
> 
> 标签：javascript

所以我的代码基本上是告诉用户他们的注册出了什么问题，一切正常，但只有一件事。Div 应该更新文本字段以说明他们的注册有什么问题，但事实并非如此，这是我的 JavaScript

```
window.onload = initPage;
submitBtn = document.getElementById("￼submit");
errorText = document.getElementById("￼errortext");

function initPage() {
    document.getElementById("password2").onkeyup = checkPassword;
    document.getElementById("￼password2").onblur = checkPassword;
    document.getElementById("￼email2").onkeyup = checkEmail;
    document.getElementById("￼email2").onblur = checkEmail;
    submitBtn.disabled = false;
}

function checkPassword() {
    var password1 = document.getElementById("password1").value;
    var password2 = document.getElementById("password2").value;
    if (password1 != password2) {
        document.getElementById("password1").className = "denied";
        document.getElementById("password2").className = "denied";
        submitBtn.disabled = true;
        document.getElementById("submit").className = "denied";
        errorText.innerHTML = "Passwords do not match.";
    } else {
        document.getElementById("password1").className = "password2";
        document.getElementById("password2").className = "password2";
        document.getElementById("submit").className = "button1";
        submitBtn.disabled = false;
        errorText.innerHTML = "";
    }
}

function checkEmail() {
    var email1 = document.getElementById("email1").value;
    var email2 = document.getElementById("email2").value;
    if (email1 != email2) {
        document.getElementById("￼email1").className = "denied";
        document.getElementById("email2").className = "denied";
        submitBtn.disabled = true;
        document.getElementById("submit").className = "denied";
        errorText.innerHTML = "Emails Do Not Match.";

    } else {
        document.getElementById("￼email1").className = "regtext";
        document.getElementById("email2").className =  "regtext";
        submitBtn.getElementById("submit").disabled = true;
        document.getElementById("submit").className = "button1";
        errorText.innerHTML = "";
    }
} 
```

这是我的 div

```
<tr><td colspan="2"><div id="errortext"></div></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:01:45.367

您可能正在尝试在 DOM 完全构建之前访问该 div。将该代码与`initPage`函数一起放入。您需要该函数范围之外的变量，以便您的其他函数可以访问它们。您应该将所有这些都放在一个闭包中以避免创建全局变量。

前任：

```
(function(){    
    var submitBtn;
    var errorText;

    function initPage() {
        submitBtn = document.getElementById("￼submit");
        errorText = document.getElementById("￼errortext");
        document.getElementById("password2").onkeyup = checkPassword;
        document.getElementById("￼password2").onblur = checkPassword;
        document.getElementById("￼email2").onkeyup = checkEmail;
        document.getElementById("￼email2").onblur = checkEmail;
        submitBtn.disabled = false;
    }

    // This next line should be under the declaration above
    window.onload = initPage;

    // ...
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:00:42.970

您必须通过 id 获取元素，然后设置其内部 html。

```
document.getElementById("errorText").innerHTML = "Emails Do Not Match."; 
```

在你直接使用 errorText.innerHTML 的地方做同样的事情。

# c - 通过 C 中的直线位操作查找正整数的最高有效位或对数基数 2（下限）

> ID：14638536
> 
> 赞同：0
> 
> 时间：2013-02-01T01:57:21.767
> 
> 标签：c, bit-manipulation

这是我需要做的：

```
int lg(int v)
{
    int r = 0;
    while (v >>= 1) // unroll for more speed...
    {
        r++;
    }
} 
```

我在以下位置找到了上述解决方案：http: [//graphics.stanford.edu/~seander/bithacks.html#IntegerLog](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLog)

这行得通，但我需要在没有大于 0xFF (255) 的循环、控制结构或常量的情况下执行此操作，事实证明这对我来说很难找到。我一直在尝试使用表格中的条件来解决问题

```
( x ? y : z ) = (((~(!!x) + 1)) & y) | ((~(~(!!x) + 1)) & z) 
```

但我无法让它工作。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:05:16.693

这听起来像是一项家庭作业。好吧，如果你不能使用控制结构，一个好的选择是预先计算你能做的事情：分而治之。求解较小的部分（一个字节，一个半字节，您的选择），并应用于整数的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:36:15.670

无需任何控制结构，甚至无需`?:`操作员，您都可以模拟自己的算法

```
int r = 0;

x >>= 1;
r += (x != 0);
x >>= 1;
r += (x != 0);
... 
```

前提是，在 C 中，

*   *x*被假定为正数（否则`int x=-1;`例如 `x >>= 1` *n 次*总是`!= 0`
*   像`x != 0`返回 0 ( *false* ) 或 1 (*true)这样的条件

# emacs - 如何让 Emacs 跳转到远程 Linux 机器？

> ID：14638539
> 
> 赞同：1
> 
> 时间：2013-02-01T01:58:05.233
> 
> 标签：emacs

我现在正在一台有点复杂的远程 Linux 机器上工作。首先，我使用Putty登录了我办公室的一台同样是Linux系统的跳转机，然后我使用命令go跳转到我办公室外的远程机器。使用 putty 时，我还需要一个密钥文件。Linux跳转命令是这样的：

```
ssh 119.11.11.11 -p 22 
```

IP应根据远程机器IP更改。

我通常的开发方式总是使用[Emacs Tramp](http://bigbang.waterlin.org/bang/basic-emacs-tramp-usage-under-windows/)来远程编辑文件。

我不想将我的 Emacs 配置文件复制到远程机器上，因为在机器之间同步配置文件有点困难。我也不想将文件下载到本地，因为它不方便调试。

在这种情况下，如何使用 Emacs 跳转到远程机器？是否可以使用 Cygwin、Putty 或其他东西进行跳转？

我的桌面是 Windows 7，我的 Emacs 是 24.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:02:57.623

假设您不能直接通过 SSH 连接到目标服务器，听起来您可以通过为 tramp 配置多跳代理来解决此问题。

我只尝试过一次，但情况略有不同，我在让它工作时遇到了问题；因此，我将仅将您指向文档，并将其留给更有知识的人在需要时提供其他详细信息。

`C-h``i``g` `(tramp) Multi-hops` `RET`

如果可能的话，我强烈建议使用其中一个`scpc`或`rsyncc`作为第二个跃点的方法，因为这将自动利用 SSH ControlMaster 保持连接打开，从而显着提高 Tramp 性能。

我不确定是否有 PuTTY/plink 的等价物？我确实知道 Cygwin 由于某些技术原因无法支持 ControlMaster（或者至少几年前就是这种情况），所以使用它可能无济于事。

Cygwin 的 SSH 和 PuTTY 的另一种替代方案是[在您的 Windows 机器上托管 Linux(*) VM 并在其中运行 Emacs](https://stackoverflow.com/questions/2690050/using-tramp-with-emacsw32-and-cygwin-possible/3049375#3049375)（这意味着您可以使用 Linux 的 SSH 和 ControlMaster）。Cygwin 可以在这种情况下提供 X 显示。当然，这会使事情复杂化，所以我肯定会先尝试更简单的选项；但如果性能不足，而您的本地 PC 相当强大，那么 VM 方法可能会让您大吃一惊。

* 或类似

完全忽略 Tramp，sshfs 通常用于在本地挂载远程文件系统，在这种情况下，Emacs 甚至不知道它正在与远程服务器通信。我自己从未使用过它，当然也没有[在 Windows 上使用](http://code.google.com/p/win-sshfs/)过，但它也值得一看。

# nginx - 配置 nginx“图像过滤器”模块以从 url 获取图像尺寸

> ID：14638541
> 
> 赞同：0
> 
> 时间：2013-02-01T01:58:32.287
> 
> 标签：nginx

如何配置 nginx 的“图像过滤器”模块以从 url 获取调整大小操作的宽度和高度？例如， `http://mysite/img/image600x800.jpg`应该返回调整为 600x800 大小的 image.jpg。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:32:51.377

首先提取宽度和高度，将值保存在变量中，如下所示：

```
location ~ "/img/(.*[^0-9])([0-9]+)x([0-9]+).jpg$" {
  set $image $1;
  set $width $2;
  set $height $3;
} 
```

然后，您可以添加类似的`image_filter resize $width $height;`内容以及实际服务器文件所需的任何其他指令

# php - 为什么我们要在 MySql 查询中转义双引号和 NULL？

> ID：14638542
> 
> 赞同：1
> 
> 时间：2013-02-01T01:58:32.520
> 
> 标签：php, mysql, sql

> **可能重复：**
> [今天，mysql_real_escape_string() 正在转义单引号和双引号](https://stackoverflow.com/questions/3575969/today-mysql-real-escape-string-is-escaping-single-quotes-and-double-quotes)

我知道单引号和反斜杠具有特殊含义，因此如果我们希望将它们解释为字面意思，则需要对其进行转义。

据我了解，mysql查询中不允许使用双引号来表示字符串（如果这个假设是正确的，这是转义它们的唯一原因吗？）我们应该使用单引号来表示字符串。

那么NULL呢？寻找具体的例子来理解为什么双引号和 NULL 需要被转义。

补充一下，我已经在 stackoverflow 上进行了搜索，我看到大多数示例都引用了我已经理解的单引号……但我需要了解双引号背后的原因，但我找不到任何示例……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:07:06.197

在默认模式下，MySQL 允许将字符串文字括在单引号或双引号中。

```
SELECT 'single', "double" 
```

为了与其他 DBMS 兼容，并且以防万一 MySQL 模式设置为`ANSI_QUOTES`，大多数 SQL 作者使用单引号来指定字符串文字。使用双引号确实没有优势。（以及当有人在他们的 MySQL 服务器会话中更改变量时，为什么要以一种会导致查询“中断”的方式编写查询。）

所以，简短的回答是在所有情况下都不*需要*转义双引号，例如

```
SELECT 'Bob cried "Wheeeee!"' 
```

在某些情况下，它们确实*需要转义：*

```
SELECT "Sue screamed \"Stop!\"" 
```

但在任何情况下转义双引号都没有坏处：

```
SELECT 'Bob cried \"Wheeeee!\"', "Sue screamed \"Stop!\"" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:20:11.000

从手册；`The mysql client truncates quoted strings containing NUL characters if they are not escaped`

> 如果要将二进制数据插入字符串列（例如 BLOB 列），则应使用转义序列表示某些字符。反斜杠 (“\”) 和用于引用字符串的引号字符必须进行转义。在某些客户端环境中，可能还需要转义 NUL 或 Control+Z。如果未转义，mysql 客户端会截断包含 NUL 字符的引用字符串，如果未转义，则可能会在 Windows 上将 Control+Z 用于 END-OF-FILE。对于代表这些字符中的每一个的转义序列，请参见表 9.1，“特殊字符转义序列”。

参考：[http ://dev.mysql.com/doc/refman/5.0/en/string-literals.html#character-escape-sequences](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html#character-escape-sequences)

而且你不需要转义双引号，但我认为这不是玩弦乐的正确方法。

```
# intead of this
INSERT INTO table (1, "John's cats")
# preferred by many programmer
INSERT INTO table (1, 'John\'s cats')
# but needs to escape here 
"INSERT INTO table (1, \"John's cats\")" 
```

# jquery - 无法弄清楚为什么 jQuery 行切换在一个表上起作用，而在另一个表上不起作用

> ID：14638547
> 
> 赞同：0
> 
> 时间：2013-02-01T01:59:14.600
> 
> 标签：jquery, toggle, rows

我设置了一个测试页面，该页面从一个实际项目页面中剥离到足以证明我的问题。[这是链接](http://www.eventidewebdesign.com/public/testRowToggle/)。

要了解我的意思，请转到链接并观察单击顶部表格的行如何切换显示该行的文本框和标签，交替显示。请注意单击“取消”按钮如何使两行都显示标签。

当您单击其行时，底部表格的行为相同。但是，当您单击底部表格中的“取消”按钮时，问题就会出现。页面实际上会刷新，而不是仅仅隐藏该行的文本框。

我已经在这上面花了**几个小时**，但我一辈子都无法弄清楚发生了什么，也不知道如何解决它。

如果有人可以看看这个并帮助我弄清楚发生了什么，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:07:24.230

`stopPropogation`是区分大小写的。您的第二个事件处理程序使用了错误的大小写（它以大写 S 开头）。

```
// Prevent bubbling of click events in #tblBranchCoverage
$('#tblBranchCoverage').on('click', ':input', function (e) {
    e.stopPropagation();
});

// Prevent bubbling of click events in #tblViewEditAllBranches
$('#tblViewEditAllBranches').on('click', ':input', function (e) {
    e.StopPropagation();
}); 
```

但是，正如*niahar*指出的那样，您的第二张桌子在一个表格内，而且`e.stopPropagation`还不够。您可以修改两个事件处理程序以简单地返回 false。在这种情况下，可能值得[一读](https://stackoverflow.com/a/2017761/609176)`e.stopPropogation()`,`e.preventDefault()`和之间的差异。`return false`

如果您正在考虑在单击保存时使用 ajax 进行更新的方法，您可以简单地使用基本按钮而不是输入按钮，而不必担心必须取消表单提交。

```
<button type="button">Save</button> 
```

请注意该`type="button"`位很重要，否则它将像一个输入按钮并提交您的表单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:18:11.423

不确定您是否设法使其工作，但我[在 jsfiddle 中尝试了 Spencerooni 的代码，](http://jsfiddle.net/QKfRs/)但没有帮助。

但是，如果你用这个替换你的最后一点 js，那么它应该没问题：

```
$('tr input.cancelListEditBranch').click(function(e) {
    // Show the labels and hide the edit elements
    $(this).closest("tr").find('.edit').fadeOut(200);
    $(this).closest("tr").find('.detailDisplay').delay(200).fadeIn(200);
    return false;
}); 
```

这是[另一个 jsfiddle](http://jsfiddle.net/jpSwQ/)。

它在第一种情况而不是第二种情况下起作用的原因是第二个表被包装在`form`标签中，因此**提交按钮`POST`在单击时会立即自动执行，而无需等待事件传播**。因此，如果您想取消表单提交，您需要在事件的第一阶段捕获事件（而不是在它传播到 时`table`）。

# android - 如何获取 Android 设备的 CamcorderProfile.videoBitRate？

> ID：14638548
> 
> 赞同：14
> 
> 时间：2013-02-01T01:59:14.977
> 
> 标签：android

我的应用程序使用 HLS 从服务器流式传输视频，但是当我从服务器请求 HLS 流时，我需要将设备可以处理的最大视频比特率传递给它。在[Android API 指南](http://developer.android.com/guide/appendix/media-formats.html#recommendations)中，它说“设备的可用视频录制配置文件可以用作媒体播放功能的代理”，但是当我尝试检索设备后置摄像头的 videoBitRate 时，它​​总是返回 12Mb/s无论设备如何（Galaxy Nexus、Galaxy Tab Plus 7"、Galaxy Tab 8.9），尽管它们有 3 个不同的 GPU（PowerVR SGX540、Mali-400 MP、Tegra 250 T20）。这是我的代码，我在做什么错误的？

```
CamcorderProfile camcorderProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
targetVideoBitRate = camcorderProfile.videoBitRate; 
```

如果我在 Galaxy Tab Plus 上试试这个：

```
boolean hasProfile = CamcorderProfile.hasProfile(CamcorderProfile.QUALITY_HIGH); 
```

它返回 True，尽管 QUALITY_HIGH 用于 1080p 录制并且规格说它只能以 720p 录制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-16T02:26:46.873

看来我已经找到了自己问题的答案。

我没有仔细阅读[文档](http://developer.android.com/reference/android/media/CamcorderProfile.html#QUALITY_HIGH)，QUALITY_HIGH 不等于 1080p，它只是指定设备支持的最高质量配置文件的一种方式。因此，根据定义，`CamcorderProfile.hasProfile( CamcorderProfile.QUALITY_HIGH )`总是正确的。我应该写这样的东西：

```
public enum mVideoQuality { 
    FullHD, HD, SD
}
mVideoQuality mMaxVideoQuality;
int mTargetVideoBitRate;

private void initVideoQuality {
    if ( CamcorderProfile.hasProfile( CamcorderProfile.QUALITY_1080P ) ) {
        mMaxVideoQuality = mVideoQuality.FullHD;
    } else if ( CamcorderProfile.hasProfile( CamcorderProfile.QUALITY_720P ) ) {
        mMaxVideoQuality = mVideoQuality.HD;
    } else {
        mMaxVideoQuality = mVideoQuality.SD;
    }
    CamcorderProfile cProfile = CamcorderProfile.get( CamcorderProfile.QUALITY_HIGH );
    mTargetVideoBitRate = cProfile.videoBitRate;
} 
```

我的大多数设备仍在报告对 1080p 编码的支持，我对此表示怀疑，但是我在 Sony Experia Tipo（我的低端测试设备）上运行了此代码，它报告的最大编码质量为 480p，videoBitRate 为 720Kb /秒。

正如我所说，我不确定是否每个设备都值得信赖，但我已经看到了从 720Kb/s 到 17Mb/s 的一系列视频比特率和从 480p 到 1080p 的配置文件质量。希望其他人会发现此信息有用。

# git - 无法使用 git 插件签出本地分支

> ID：14638550
> 
> 赞同：1
> 
> 时间：2013-02-01T01:59:26.123
> 
> 标签：git, github, intellij-idea, phpstorm

出于某种原因，我无法在 IntelliJ IDEA (123.150) git 插件中签出本地分支。我怀疑我根本不明白它应该如何工作。

如果我在磁盘上克隆 repo，我认为我有本地分支。

这是我所做的

*   通过“从版本控制签出”创建了新项目。
*   IDEA 显示我在 git 的主分支中。
*   如果我单击“Git：master”标签的右下角，它会显示远程分支列表并且没有本地分支
*   如果我单击远程`origin/master`并选择`Checkout as new local branch`它会给我错误提示`Branch name master already`存在。

我很困惑。为什么它不显示任何本地分支机构？如果我没有，为什么它不允许我在本地创建一个新的名称`master`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:02:34.870

`checkout`*用于在分支之间切换或在*存储库中创建新分支。如果要从另一个存储库中获取代码，则需要使用`pull`or`fetch`命令。我不知道这些在 IntelliJ 插件中的位置。我只是使用命令行中使用的名称。希望他们能帮助你找到你需要的东西。

# css - Twitter Bootstrap：在移动设备上堆叠导航

> ID：14638551
> 
> 赞同：2
> 
> 时间：2013-02-01T01:59:34.193
> 
> 标签：css, twitter-bootstrap, uinavigationbar

我试图在我的 twitter boostrap 模板中有一个非常简单的导航栏，它可以简单地将菜单项垂直堆叠在移动设备上（并在点击时显示子项）。因为我是 Bootstrap 的新手（我已经习惯了 Foundation 3），所以我使用Bootswatch的[Cyborg配色方案来启动我对这个网站的开发。](http://bootswatch.com/cyborg/)我在标题中包含了所有可用的 javascript 插件和 jquery。

到目前为止，我对文档感到非常困惑，非常感谢一些帮助修改当前菜单以在移动设备上正常运行的帮助。谢谢！

```
<div class="navbar">
  <div class="navbar-inner">
    <ul class="nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:05:50.687

要让值折叠，您需要添加一个`.nav-collapse`div`navbar-inner`并将其设置为针对您的可折叠 div 导航部分。

```
<div class="navbar-inner">
<div class="container">
    <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                    <!--These are to make the button look fancy-->
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </a>

    <div class="nav-collapse collapse">
        <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </div>
</div>
</div> 
```

引导文档的[响应部分](http://twitter.github.io/bootstrap/components.html#navbar)中的更多信息

# oracle - Oracle Odp.net 驱动程序部署

> ID：14638552
> 
> 赞同：0
> 
> 时间：2013-02-01T01:59:44.197
> 
> 标签：oracle, odp.net

我们已经为 Oracle 安装了 32 位 odp.net 驱动程序。我们的服务器当前托管使用已弃用的 Microsoft Oracle 驱动程序的应用程序。

要在服务器上使用新的 odp.net 驱动程序，是否会与 Microsoft 的旧版已弃用驱动程序发生冲突？

服务器上需要安装什么？（如何避免与现有 Web 应用程序发生冲突？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:46:59.707

System.Data.OracleClient 以与 odp.net 相同的方式依赖于非托管 Oracle 客户端软件：

[http://msdn.microsoft.com/en-us/library/2d7h4ycx.aspx](http://msdn.microsoft.com/en-us/library/2d7h4ycx.aspx)

> **.NET Framework Data Provider for Oracle 使用Oracle 客户端软件提供**的 Oracle 调用接口 (OCI) 提供对 Oracle 数据库的访问。数据提供者的功能被设计为类似于用于 SQL Server、OLE DB 和 ODBC 的 .NET Framework 数据提供者的功能。

安装 Oracle 客户端时，它会建立一个“oracle_home”（允许多个 oracle 主目录）并使用各种方法查找相关依赖项，包括注册表（HKLM/Software/Oracle）、.config 选项和路径语句。我不确定 System.Data.OracleClient 使用哪种方法，但我猜它依赖于路径环境变量，就像旧版本的客户端一样。

安装新客户端可能会将其自身放在路径语句的首位。例如，考虑安装了我的 4 个客户端的命令行“set”命令中的以下片段：

> OS=Windows_NT 路径=C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live; **C:\Oracle\product\11.2.0\client_ODT;C:\Oracle\product\11.2.0\client_ODT\bin;C:\Oracle\product\11.2.0\client_ODACx64;C:\Oracle\product\11.2。 0\client_O DACx64\bin;C:\Oracle\product\11.2.0\client_1\bin** ;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\ WindowsPowerShell\v1.0\; **C:\ORA6i\bin;C:\ORANT\bin** ;C:\Windows\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\ORA6i\jdk\bin;C:\Windows\system32 ;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\ORA6i\jdk\bin;C:\ORA6i\bin;C:\ORANT\bin;C:\Windows\system32;C:\WINDOWS; C:\WINDOWS\System32\Wbem;C:\ORA6i\jdk\bin;

届时，现有的客户端用户可能会开始使用您新安装的客户端。因此，您可能需要在安装前后检查您的系统是否有此类更改。

在新客户端下运行可能会很好，但如果您希望避免接触现有系统。考虑改用[xcopy 安装](http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html)。以下是有关安装它的信息的一些链接： [http://www.oracle.com/technetwork/issue-archive/2008/08-nov/o68odpnet-101744.html](http://www.oracle.com/technetwork/issue-archive/2008/08-nov/o68odpnet-101744.html) [http://www.brothersincode.com/post/Oracle -ODPnet-xcopy-deployment-for-aspnet.aspx](http://www.brothersincode.com/post/Oracle-ODPnet-xcopy-deployment-for-aspnet.aspx)

xcopy 安装不会将自身添加到路径语句中，因此它不应该影响您的其他安装。新版本的 odp.net 应该通过注册表解决非托管二进制文件，因此您的新应用程序可能会毫无问题地找到它。但是，我发现 dllPath 配置更可靠 - 您的配置文件中会包含以下内容：

```
<configuration>
  <oracle.dataaccess.client> 
    <add key="DllPath" value="c:\oracle\product\1.1.0-xcopy-dep\BIN"/>
  </oracle.dataaccess.client>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:28:55.933

据我所知，没有冲突。这对 Oracle 来说会更好——开发进度比 MS 解决方案要大。您可以在此处阅读有关安装过程和要求的所有信息 -> [Oracle® Data Provider for .NET](http://docs.oracle.com/cd/E11882_01/win.112/e21641/toc.htm)

# silverlight - 从组标题上的按钮访问 Telerik Silverlight RadGridView

> ID：14638553
> 
> 赞同：0
> 
> 时间：2013-02-01T01:59:47.857
> 
> 标签：silverlight, telerik, radgridview

我有一个 RadGridView，它对它的内容进行分组。我在组标题上有一个按钮 当我单击按钮 (btnSave) 时，我想访问组以读取组密钥。

我可以在 btnSave 的 Click 中添加什么来完成此操作？

```
<telerik:RadGridView x:Name="grdNotams" Grid.Row="1" AutoGenerateColumns="False" RowIndicatorVisibility="Collapsed" ShowGroupPanel="False">
    <telerik:RadGridView.Columns>
        <telerik:GridViewDataColumn  UniqueName="colNewStatus" DataMemberBinding="{Binding NewStatus}" Header="New Status" IsFilterable="False" IsSortable="False">
            <telerik:GridViewDataColumn.CellTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <telerik:RadRadioButton Content="C" Width="30" IsChecked="{Binding NewStatus, Mode=TwoWay, Converter={StaticResource StringToBooleanConverter},ConverterParameter=C}" GroupName="{Binding RadioButtonName}"/>
                        <telerik:RadRadioButton Content="M" Width="30" Margin="5,0,0,0"  IsChecked="{Binding NewStatus, Mode=TwoWay, Converter={StaticResource StringToBooleanConverter},ConverterParameter=M}" GroupName="{Binding RadioButtonName}"/>
                        <telerik:RadRadioButton Content="I" Width="30" Margin="5,0,0,0"  IsChecked="{Binding NewStatus, Mode=TwoWay, Converter={StaticResource StringToBooleanConverter},ConverterParameter=I}" GroupName="{Binding RadioButtonName}"/>                                    
                    </StackPanel>
                </DataTemplate>
            </telerik:GridViewDataColumn.CellTemplate>
        </telerik:GridViewDataColumn>
        <telerik:GridViewDataColumn Header="Status" UniqueName="colStatus" DataMemberBinding="{Binding Model.Status, Converter={StaticResource StatusConverter}}" HeaderTextAlignment="Center" TextAlignment="Center" IsFilterable="False" IsSortable="False"/>
        <telerik:GridViewDataColumn Header="Trip #" UniqueName="colTripNumber" DataMemberBinding="{Binding Model.TripNumber}" HeaderTextAlignment="Center" TextAlignment="Center" IsFilterable="False" IsSortable="False"/>
        <telerik:GridViewDataColumn Header="Date" UniqueName="colDate" DataMemberBinding="{Binding Model.DepartureTime}" DataFormatString="d"  HeaderTextAlignment="Center" TextAlignment="Center" IsFilterable="False" IsSortable="False"/>
    </telerik:RadGridView.Columns>
    <telerik:RadGridView.GroupHeaderTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <telerik:RadButton x:Name="btnSave" Click="btnSave_Click">
                    <StackPanel Orientation="Vertical">
                        <Image Source="../images/save.jpg" Height="30" Width="30" HorizontalAlignment="Center"/>
                        <TextBlock TextAlignment="Center" TextWrapping="Wrap">Update</TextBlock>
                    </StackPanel>
                </telerik:RadButton>
                <TextBlock Text="{Binding Group.Key}" FontSize="14" FontWeight="Bold" FontStyle="{Binding EarliestNotamDepartureTime, Converter={StaticResource DateTimeToItalicsConverter}}" TextWrapping="Wrap" VerticalAlignment="Center" Padding="5"/>
            </StackPanel>
        </DataTemplate>
    </telerik:RadGridView.GroupHeaderTemplate>
    <telerik:RadGridView.GroupDescriptors>
        <telerik:GroupDescriptor Member="NotamGroup"  >
        </telerik:GroupDescriptor>
        <telerik:GroupDescriptor Member="Model.NotamText">
        </telerik:GroupDescriptor>
    </telerik:RadGridView.GroupDescriptors>
</telerik:RadGridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:11:15.143

弄清楚了。

DataContext 以 GroupViewModel 类的形式包含我需要的信息。

**代码**

```
private void btnSave_Click(object sender, RoutedEventArgs e)
{
    GroupViewModel vm = ((RadButton)sender).DataContext as GroupViewModel;
} 
```

# jquery - jQuery 和 Array 类型类

> ID：14638555
> 
> 赞同：0
> 
> 时间：2013-02-01T02:00:10.060
> 
> 标签：jquery, html, document-ready

我正在尝试使用以下类访问所有输入：

```
validate['number'] 
```

当然，有时其中一些是：

```
validate['required', 'number'] 
```

所以我需要`number`那里的一切。这是制作这些类的 Chronoform 系统的一部分。

我已经尝试过了，想如果它有效，我会从那里开始，让它适用于所有拥有的`required`或`alpha`.

```
jQuery(document).ready(function() {
  jQuery(".validate['number']").change(function() {
    if(this.value <= '') {
      this.value = '0';
    }
  });
}); 
```

但是不行，它不会找到他们的。那么我如何找到这样的类及其子部分呢？我什至不知道如何称呼这些类，因为我以前从未见过它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:02:12.323

带有特殊字符的类名不能直接用`.classname`.

相反，您需要使用此选择器：`[class~="validate['number']"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:13:01.870

确保正确转义特殊字符。试试这个：

```
$(".validate\\[\\'required\\'\\]") 
```

来自 jQuery API 文档：

> 要使用任何元字符（例如 !"#$%&'()*+,./:;<=>?@[]^`{|}~ ）作为名称的文字部分，它必须用两个反斜杠转义：\。例​​如，id="foo.bar" 的元素可以使用选择器 $("#foo\.bar")。

更多关于选择器转义：[http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

我什至建议您扩展 jQuery 对伪选择器的支持，如下所示：

```
(function () {
    var rRequired = /\bvalidate\[[^\]]*\brequired\b[^\]]*\]/,
        rAlpha = /\bvalidate\[[^\]]*\balpha\b[^\]]*\]/,
        rNumber = /\bvalidate\[[^\]]*\bnumber\b[^\]]*\]/;

    $.extend($.expr[':'], {
        mandatory: function(elem) {
            return rRequired.test(elem.className)
        },

        number: function (elem) {
            return rNumber.test(elem.className)
        },

        alpha: function (elem) {
            return rAlpha.test(elem.className)
        }
    });
})(); 
```

然后您可以在代码中使用更简单的选择器：

```
$('input:mandatory')
$('input:number')
$('input:alpha') 
```

*注意：我尝试制作 ":required" 伪选择器，但由于某种原因它不起作用，因此`:mandatory`改为。*

# selenium-webdriver - 使用 selenium 2.29 和 IEDriverServer.exe 在 IE 8 和 IE 9 上运行的测试非常慢

> ID：14638560
> 
> 赞同：6
> 
> 时间：2013-02-01T02:00:55.153
> 
> 标签：selenium-webdriver, internet-explorer-8, internet-explorer-9

我在 Internet Explorer 8 和 9 上使用 selenium 版本 2.29 和 IEDriverServer.exe 64 运行脚本，它们都是 64 位的。当我在 Firefox 上运行这些测试时，大约需要 2 分钟，但在 IE 中大约需要 20-40 分钟，而且它们根本不运行，有时只是卡住了。我们使用 windows server 2008 r2 和 java jdk jdk1.7.0_11 64 位版本。我们通过使用初始证书

```
selenium.getWebDriver().navigate().to("javascript:document.getElementById('overridelink').click()"); 
```

有没有办法让这些测试更快。每次关闭浏览器时，我什至都会关闭 IEDriverServer.exe 的实例。

有没有办法让我的测试更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:56:01.943

在听到正在发生的事情以及在产生多个实例之外（感谢 Lucas）之后，另一个想到的罪魁祸首是您使用的是哪种定位器。使用 Xpath 会减慢 IE 的速度，尽管时间差有点极端，这是唯一的问题。

如果您使用的是 xpath，请尝试切换到 id 或 name 定位器。但是，如果您的测试与我的测试类似，那么这些测试并不总是可用的。如果是这种情况，CSS 在 IE 中而不是 xpath 中效果更好（更快）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T13:33:38.980

使用 32 位版本的 IE 驱动程序并运行测试套件。它肯定会工作

# c - 最大子数组：分而治之

> ID：14638561
> 
> 赞同：9
> 
> 时间：2013-02-01T02:00:57.723
> 
> 标签：c, algorithm, recursion, divide-and-conquer

## 免责声明：这是一个任务。我不要求明确的代码，只需要足够的帮助来理解所涉及的算法，以便我可以修复代码中的错误。

好的，所以您可能熟悉最大子数组问题：计算并返回数组中最大的连续整数块。很简单，但这个任务需要我以三种不同的复杂度来完成：O(n^3)、O(n^2) 和 O(n log n)。我已经得到了前两个没有太多麻烦（蛮力），但第三个让我头疼......从字面上看。

我了解该算法应该如何工作：一个数组被传递给一个函数，该函数递归地将其分成两半，然后比较各个组件以找到每一半的最大子数组。然后，因为最大子数组必须完全位于左半部分或右半部分，或者位于与两者重叠的段中，所以您必须找到与左右重叠的最大子数组。比较每种情况的最大子数组，最大的将是您的返回值。

我相信我已经编写了能够充分执行该任务的代码，但我的评估似乎是错误的。我一直在尝试联系导师和助教寻求帮助，但我觉得他们中的任何一个都没有取得任何进展。以下是我迄今为止设法编写的代码。如果您发现任何明显的错误，请告诉我。同样，我不是在寻找明确的代码或答案，而是帮助理解我做错了什么。我浏览了这里介绍的所有类似案例，但没有发现任何可以真正帮助我的东西。我也做了很多谷歌搜索以寻求指导，但这也无济于事。无论如何，这是有问题的代码：

```
int conquer(int arr[], int first, int mid, int last) {

    int i = 0;
    int maxLeft = 0;
    int maxRight = 0;

    int temp = 0;
    for (i = mid; i >= first; i--) {
        temp = temp + arr[i];
        if (maxLeft < temp) {
            maxLeft = temp;
        }
    }
    temp = 0;
    for (i = (mid + 1); i <= last; i++) {
        temp = temp + arr[i];
        if (maxRight < temp) {
            maxRight = temp;
        }
    }

    return (maxLeft + maxRight);
}

int divide(int arr[], int start, int end) {

    int i;
    int maxSum;
    int maxLeftSum;
    int maxRightSum;
    int maxOverlapSum;

    if (start == end) {
        return arr[start];
    } else {
        int first = start;
        int mid = (end / 2);
        int last = end;

        maxSum = 0;
        maxLeftSum = 0;

        for (i = first; i < mid; i++) {
            maxSum = maxSum + arr[i];
            if (maxLeftSum < maxSum) {
                maxLeftSum = maxSum;
            }
        }
        for (i = (mid + 1); i < last; i++) {
            maxSum = maxSum + arr[i];
            if (maxRightSum < maxSum) {
                maxRightSum = maxSum;
            }
        }

        maxOverlapSum = conquer(arr, first, mid, last);
    }

    if ((maxLeftSum > maxRightSum) && (maxLeftSum > maxOverlapSum)) {
        return maxLeftSum;
    } else if ((maxRightSum > maxLeftSum) && (maxRightSum > maxOverlapSum)) {
        return maxRightSum;
    } else
        return maxOverlapSum;
} 
```

编辑：我得到的错误是不正确的结果。我的其他两种算法之间的结果一致且正确，但这个不正确。

编辑#2：这是我的代码的更新版本，精简了一点，我修复了一些东西。它仍然没有正确运行，但它应该更接近......

```
#include <stdio.h>
#include <stdlib.h>

int numarr[] = {22, -27, 38, -34, 49, 40, 13, -44, -13, 28, 46, 7, -26, 42,
        29, 0, -6, 35, 23, -37, 10, 12, -2, 18, -12, -49, -10, 37, -5, 17,
        6, -11, -22, -17, -50, -40, 44, 14, -41, 19, -15, 45, -23, 48, -1,
        -39, -46, 15, 3, -32, -29, -48, -19, 27, -33, -8, 11, 21, -43, 24,
        5, 34, -36, -9, 16, -31, -7, -24, -47, -14, -16, -18, 39, -30, 33,
        -45, -38, 41, -3, 4, -25, 20, -35, 32, 26, 47, 2, -4, 8, 9, 31, -28,
        36, 1, -21, 30, 43, 25, -20, -42};

int length = ((sizeof(numarr))/(sizeof(int)));

int divide(int left, int right) {

    int mid, i, temp, mLeft, mRight, mCross = 0;

    if (left == right) {
        return left;
    } else if (left > right) {
        return 0;
    } else {
        mid = (left + right) / 2;

        divide(left, mid);
        divide(mid + 1, right);

        for (i = mid; i >= left; i--) {
            temp = temp + numarr[i];
            if (mLeft < temp) {
                mLeft = temp;
            }
        }

        for (i = mid + 1; i <= right; i++) {
            temp = temp + numarr[i];
            if (mRight < temp) {
                mRight = temp;
            }
        }

        mCross = (mLeft + mRight);

        printf("mLeft:  %d\n", mLeft);
        printf("mRight: %d\n", mRight);
        printf("mCross: %d\n", mCross);

        return 0;
    }
}

int main(int argc, char const *argv[])
{
    divide(0, length);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T03:53:33.217

我仍然盯着你的问题，但我几乎立即注意到了几个错误。

首先，如果`first`和`last`他们的名字一样，你会错误地找到中点。你来做这件事：

```
mid = end/2; 
```

什么时候应该是这样的：

```
mid = first + (last-first)/2; 
```

接下来，您的第一个枚举循环从运行（注意右侧`[first,mid)` 的排除）。`mid`此循环不*包含*以下`arr[mid]`元素：

```
 for (i = first; i < mid; i++) { 
```

您的第二次从 运行`[mid+1,last)`，其中也不包括以下`arr[mid]`元素：

```
 for (i = (mid + 1); i < last; i++) { 
```

这会留下一个元素的洞，特别是`arr[mid]`. 现在，我并没有声称我完全理解该算法，因为我几乎没有机会阅读它，但如果你打算涵盖从 的整个范围`[first,last)`，这可能不会这样做。此外，由 SauceMaster 链接的论文提出的教科书算法的明显缺点是使用一种语言，该语言不允许您偏移到数组中并通过指针衰减将其传递给函数调用作为基地址大批。C 允许你这样做，你应该利用它。我想你会发现它使数字更容易理解，并且不需要你传入的索引之一。

例如：一个接受数组、中间分割和递归的函数可能看起来像这样：

```
void midsplit( int arr[], int len)
{
    if (len < 2)
    {
         // base case
    }
    else
    {
        int mid = len/2;
        midsplit(arr, mid);
        midsplit(arr+mid, len-mid);

        // cumulative case
    } 
} 
```

在每次递归中，分割点始终是一个范围的结尾，并用于对第二个范围进行偏移寻址，在递归调用中将其视为其自己的从 0 开始的数组。不知道你是否可以使用它，但它确实让它更容易掌握（至少对我来说）。

最后，我可以看到，您的除法似乎没有做太多递归，这将是一个问题，因为这毕竟是一种递归算法。看来你至少错过了一个电话`divide()`。

我可能错过了一些东西，这不是第一次，但正如我所说，我没有倾注太多（还）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T02:20:19.587

John Bentley 于 1984 年就此发表了一篇论文。您可以在线免费找到 PDF：[http ://www.akira.ruc.dk/~keld/teaching/algoritmedesign_f03/Artikler/05/Bentley84.pdf](http://www.akira.ruc.dk/~keld/teaching/algoritmedesign_f03/Artikler/05/Bentley84.pdf)

他在第二页开始讨论 O(n log n) 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T03:47:39.213

我认为您几乎拥有所需的所有代码，但是这两个问题对我来说很突出：

*   `mid`变量计算是可疑的。
*   你的`divide`功能并没有真正做任何划分。

在分治的递归公式中，您将在数组的下半部分递归调用您的除法函数，然后在数组的上半部分调用。征服步骤可以被认为是计算重叠和并返回三个候选者中最大者的代码。

*编辑*：当递归地思考问题时，实现函数的目的，并利用它。在这种情况下，该`divide`函数将返回所提供数组的最大子数组总和。因此，计算的方法`maxLeftSum`是在左子数组上调用除法。同样对于`maxRightSum`。

```
int divide(int arr[], int start, int end) {
    if (end > start) {
        int mid = (start + end)/2;
        int maxLeftSum = divide(arr, start, mid);
        int maxRightSum = divide(arr, mid+1, end);
        return conquer(arr, start, end, maxLeftSum, maxRightSum);
    }
    return (start == end) ? arr[start] : 0;
} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-04T11:19:47.350

我认为您只关注交叉子阵部分。但是，也有左子阵部分和右子阵部分，它们都有比交叉子阵更大的可能性。

因为英语不是我的第一语言而且我不擅长它。我不相信我已经表达了我想要表达的确切内容，所以我将粘贴我的代码。这是我的代码：

```
int find_max_subarr(int a[],int l,int r)
{
    if(l>r)return 0;
    if(l==r) return a[l];
    int lsum=-1000,rsum=-1000;
    int sum=0;
    if(l<r) {
        int mid=(l+r)/2;
        for(int i=mid;i>=l;i--) {
            sum+=a[i];
            if(lsum<sum)lsum=sum;
        }
        sum=0;
        for(int i=mid+1;i<=r;i++) {
            sum+=a[i];
            if(rsum<sum)rsum=sum;
        }
        int all_sum=lsum+rsum;
        int llsum=find_max_subarr(a,l,mid);
        int rrsum=find_max_subarr(a,mid+1,r);
        if(llsum<all_sum&&rrsum<all_sum) return all_sum;
        if(all_sum<llsum&&rrsum<llsum)return llsum;
        if(all_sum<rrsum&&llsum<rrsum)return rrsum;
    }
}

int main()
{
    int a[SUM]={100,113,110,85,105,102,86,63,81,101,94,106,101,79,94,90,97};
    int b[SUM-1];
    int t=0;
    for(int i=1;i<SUM;i++) {
        b[t]=a[i]-a[i-1];
        t++;
    }
    int sum=find_max_subarr(b,0,t-1);
    cout<<sum<<endl;
    return 0;
} 
```

# asp.net - 如何有每周约会

> ID：14638563
> 
> 赞同：0
> 
> 时间：2013-02-01T02:00:59.153
> 
> 标签：asp.net, vb.net, datetime, datetime-format

我们如何计算过去一周中星期一的日期。我正在使用 asp 和 VB.net。有没有日期功能。我们在 VB 中确实有 NOW。但我想知道我们如何计算过去一周星期一的日期。例如今天是 2013 年 1 月 31 日，当天是星期四，我想要 2013 年 1 月 21 日星期一的日期。我将如何做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:34:38.730

我不确定你想要什么，但试试这个：

```
Public Function GetMondayLastWeek() As Date
    Return DateAdd(DateInterval.Day, -Now.DayOfWeek + 1, Now.Date)
End Function 
```

或这个：

```
Public Function GetMondayLastWeek() As Date
    Return DateAdd(DateInterval.Day, -Now.DayOfWeek + 8, Now.Date)
End Function 
```

# c++ - $(SolutionDir)\..\..\..\是什么意思

> ID：14638564
> 
> 赞同：2
> 
> 时间：2013-02-01T02:01:21.750
> 
> 标签：c++, visual-studio-2010

在属性表中：对于一个用户宏，名称为 OSGVE_DIR，其值：$(SolutionDir)\..\..\..\..

$(SolutionDir) 的路径是什么？ \..\..\..\.. 斜线表示切换到子目录还是上目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:12:16.830

你问了两个完全独立的问题。下面是你第二个的答案。我建议将您的第一个问题作为一个单独的问题重新提出。

* * *

这些字符`..\`表示将文件夹层次结构向上移动一级。因此，如果在`a\b\c\d\e\f\g\`我引用的目录中`\..\..\..\`，我现在会查看`a\b\c\d\`The beginning`\`只是说引用当前目录并且（通常）是可选的。

# mysql - 我应该如何使用 AND 运算符提出有关显示此 MySQL 查询数据的请求？

> ID：14638565
> 
> 赞同：1
> 
> 时间：2013-02-01T02:01:27.337
> 
> 标签：mysql, operator-keyword

这是教师的要求，他的以下查询作为答案：

[“Q12\. 显示**为部门 10 和 60 工作的**所有员工。”

```
mysql> select last_name, department_id
> from employees
> where department_id = 10 or department_id = 60;]

This is the result:

+-----------+---------------+
| last_name | department_id |
+-----------+---------------+
| Hunold    |            60 |
| Ernst     |            60 |
| Lorentz   |            60 |
| Whalen    |            10 |
+-----------+---------------+ 
```

在我看来，考虑到一个人想要显示的信息，一个更好的问题是：“显示为部门 10 工作的所有员工，并显示为部门 60 工作的所有员工。” 在当前构建的问题下，似乎他要求仅显示为这两个部门工作的员工，即同时为 60 和 10 工作的员工（或至少在一天中的不同时间）。

这是表格说明：

```
+----------------+--------------+------+-----+---------+-------+
| Field          | Type         | Null | Key | Default | Extra |
+----------------+--------------+------+-----+---------+-------+
| Employee_id    | decimal(6,0) | NO   | PRI | NULL    |       |
| First_Name     | varchar(20)  | YES  |     | NULL    |       |
| Last_Name      | varchar(25)  | NO   |     | NULL    |       |
| Email          | varchar(20)  | YES  |     | NULL    |       |
| Phone_Number   | varchar(20)  | YES  |     | NULL    |       |
| Hire_Date      | date         | NO   |     | NULL    |       |
| Job_Id         | varchar(10)  | YES  |     | NULL    |       |
| Salary         | decimal(8,2) | YES  |     | NULL    |       |
| Commission_Pct | decimal(2,2) | YES  |     | NULL    |       |
| Manager_Id     | decimal(6,0) | YES  |     | NULL    |       |
| Department_Id  | decimal(4,0) | YES  |     | NULL    |       |
+----------------+--------------+------+-----+---------+-------+ 
```

也许我在这里遗漏了一些东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:04:51.617

> *在当前构建的问题下，似乎他要求仅显示为这两个部门工作的员工，即同时为 60 和 10 工作的员工（或至少在一天中的不同时间）。*

除了，员工**不能**在具有给定表结构的两个部门工作（假设它是规范化的）。

你有没有尝试过：

```
... where department_id = 10 AND department_id = 60 
```

# jquery - WP如何在单击时隐藏整个内容区域以显示完整的背景图像？

> ID：14638571
> 
> 赞同：1
> 
> 时间：2013-02-01T02:01:50.770
> 
> 标签：jquery, click, hide, main, area

情况：我使用的是 Wordpress 3.4.2。主题加载 Jquery。我是 Jquery 的新手。我添加了带有手动导航选项卡的 WPSupersized 背景滑块。内容和小部件区域是半透明的，并包含在#main div 中。所以你可以看到背景图像的 1/2。

问题：Jquery如何隐藏整个#main区域以显示完整的背景图片？这个论坛上的所有示例都指的是按钮后面的显示隐藏部分文本，但我想隐藏整个#main。

有没有人已经找到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:51:00.410

If you want toggle show and hide, you can use: $('#your_trigger').click(function(){ $('#main').toggle(); }), if only want to hide the #main, you can use $('#your_trigger').click(function(){ $('#main').hide(); }).

# javascript - 提交表单后隐藏带有表单的 div 并显示隐藏的 div

> ID：14638575
> 
> 赞同：4
> 
> 时间：2013-02-01T02:02:02.670
> 
> 标签：javascript, forms, hide, show, onsubmit

所以我有这个

```
 <div id="first" class="1" style="display:">
        <form>
            <input type=submit>
        </form>
    </div>
    <div id="second" class="2" style="display:none">
        test
    </div> 
```

我想在表单提交后切换显示选项（按下按钮）。我希望脚本在点击提交按钮后变成这样

```
 <div id="first" class="1" style="display:none">
        <form>
            <input type=submit>
        </form>
    </div>
    <div id="second" class="2" style="display:">
        test
    </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T02:06:46.893

您可以添加`onsubmit`处理程序。在不使用第三方库（如 jQuery）的情况下，这是使用内联 JavaScript 的基本方法：

```
<form onsubmit="document.getElementById('first').style.display = 'none';document.getElementById('second').style.display = '';"> 
```

`onsubmit`每当提交表单时都会触发 ，例如通过单击按钮`Submit`、以编程方式或用户`Enter`在文本字段中点击。

但是，我建议您使用 jQuery 和比这种内联方法更不显眼的方法。如果您想了解如何使用 jQuery 来做到这一点，这里有一个[jsFiddle](http://jsfiddle.net/Uw6SL/1/)，它展示了实现此目的的一种方法。基本上，您会在元素上添加一个`id`诸如，然后将其添加到您的 JavaScript：`myform``form`

```
$(document).ready(function() {
    $("#myform").submit(function(e) {
        $("#first").hide();
        $("#second").show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:10:23.130

首先给 id 提交按钮。

```
<div id="first" class="1" style="display:">
    <form>
        <input type=submit **id="submit-btn"**>
    </form>
</div>
<div id="second" class="2" style="display:none">
    test
</div> 
```

然后写提交按钮的点击事件

```
jQuery("#submit-btn").click(function(e)) {
    e.preventDefault();
    jQuery('#first').hide();
    jQuery('#show').show();
} 
```

# jquery - 获取struts2 jQuery中的价值？

> ID：14638576
> 
> 赞同：0
> 
> 时间：2013-02-01T02:02:06.370
> 
> 标签：jquery, struts2

我使用 struts2 生成操作 url，例如：

```
<s:url id="response_url" action="submitReponse" /> 
```

如何在 jQuery 中获取生成操作 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:16:54.133

您可以使用 struts2 [jQuery 插件](http://code.google.com/p/struts2-jquery/)

# android - 语法错误，无法将电子邮件键入 SQLite

> ID：14638580
> 
> 赞同：1
> 
> 时间：2013-02-01T02:02:24.200
> 
> 标签：android, database, sqlite

就像标题一样，我无法将电子邮件地址键入 SQLite 数据库。错误如下：

```
02-01 09:49:52.300: I/SqliteDatabaseCpp(16157): sqlite returned: error code = 1, msg = near "@gmail": syntax error, db=/data/data/com.proj.db/databases/FormDetails 
```

创建数据库没有任何问题，只是最近我将其添加到电子邮件列中，然后出现此错误。是因为“@”符号无法键入数据库吗？

我的表格代码：

```
String insertNewFormDetails = "create table if not exists " + TABLE_NAME + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
                                                            + NAME + " text not null, "
                                                            + SCHOOL + " text not null, "
                                                            + CURRENTDATE + " text not null, "
                                                            + FORMTYPE + " text not null, "
                                                            + EMAIL + " text not null);";

    db.execSQL(insertNewFormDetails); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:41:24.373

它不允许使用`@`in 列名 like`@Email`但您仍然可以通过使用`square brackets`arround 列名 like来使用它`[@email]`。

**有效**：

`[@Email]`

**无效**：

`@Email`

请注意，您需要像`[@Email]`在 SQL 查询中一样引用此列，它将起作用。

# ruby-on-rails - 如何将 Haml::Engine 中的错误嵌入 Heroku 生产中的网页中

> ID：14638587
> 
> 赞同：1
> 
> 时间：2013-02-01T02:03:29.847
> 
> 标签：ruby-on-rails, security, heroku, error-handling, haml

当我以管理员身份登录时，我可以单独访问我的部分应用程序。

在`documents#new`和`documents#edit`中，我有`<textarea>`一个表单，用于使用 HAML 编写和编辑结构化文本。

`documents#show`我通过以下方式显示结构化文本`documents#print`：

```
- engine = Haml::Engine.new(@document.content)
= engine.render 
```

在 上`localhost:3000`，如果我在 HAML 中出错（例如使用错误数量的空格缩进），我会在浏览器中看到错误。

在 Heroku 上的生产中，出于安全原因，这是禁用的，这是您想要的。

但我仍然希望在生产中看到这个特殊错误，因为它实际上只是我的文本中的错字，而不是我的应用程序中的漏洞。有什么方法可以将此 HAML 呈现错误发送到浏览器？

我在想答案可能如下所示，但我不确定是什么。

```
- begin
  - engine = Haml::Engine.new(@document.content)
  = engine.render
- rescue
  - return ##something??##
- end 
```

当然，更好的方法是找到一种将其推入模型级验证的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:32:18.257

答案是：

```
-begin
  - engine = Haml::Engine.new(@document.content)
  = engine.render
- rescue => e
  = e.message 
```

# java - Vim java折叠不识别折叠

> ID：14638589
> 
> 赞同：1
> 
> 时间：2013-02-01T02:03:57.190
> 
> 标签：java, vim, folding

我试图在工作中的机器上进行一些编程，但我无法让 Vim 识别我的 Java 程序中的折叠。我已将 foldmethod 设置为“syntax”，但当我尝试折叠方法主体时，我得到：“No Fold Found”。我将文件类型更改为“cpp”以测试 foldmethod=syntax 并且它有效！

我试图比较 'java.vim' 和 'cpp.vim' 看看我是否能发现问题，但我无法找出 'java.vim' 的问题。

我的 'java.vim' 有以下标题：

```
" Vim syntax file                                                                                                                                                                                   
" Language:     Java                                                                                                                                                                                
" Maintainer:   Claudio Fleiner <claudio@fleiner.com>                                                                                                                                               
" URL:      http://www.fleiner.com/vim/syntax/java.vim                                                                                                                                              
" Last Change:  2007 Dec 21 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:35:11.883

**哪个 Vim 版本？**

默认的 Vim 7.3.000 安装附带`syntax/java.vim`一个`2010 March 23`; 最新的运行时文件（来自 Mercurial repo）有`2012 Oct 05`；两者都可以进行Java折叠。我强烈建议您升级。

如果您不能这样做，请将以下内容放入`~/.vim/after/syntax/java.vim`：

```
if v:version < 703
    " The default Java syntax file lacks the 'fold' option.
    syn region javaFold start="{" end="}" transparent fold
endif 
```

# java - Java - 调用静态方法会调用所有实例上的方法吗？

> ID：14638590
> 
> 赞同：-1
> 
> 时间：2013-02-01T02:04:04.527
> 
> 标签：java, class, static, invoke

假设我有一个类`A`，它有自己的实例变量。它有一个名为 的方法`doSomething()`，它是一个`static`方法。现在，`A`添加另一个类`B`作为指针。在类里面说`B`，我运行一些逻辑并确定我需要运行包含在`doSomething()`. 我可以直接说`A.doSomething()`吗？如果我有一个被调用的实例`A`，`a`是否会调用`a`'s`doSomething()`方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T02:07:07.307

如果您调用`A.doSomething()`它，它将只执行该静态方法。说`a`'s`doSomething`没有意义，因为静态方法不属于您的类的对象或实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:07:17.583

静态方法不属于任何特定实例。因此，当您调用 A.doSomething() 时，是否存在 0、1 或一百万个 A 实例都无关紧要。调用一个方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T02:13:21.497

你的第一个问题的答案：“我可以直接说`A.doSomething()`吗？”
是的。正如其他答案所指出的那样......`doSomething()`存在`static`是一种类方法，因此确实需要 A 的创建对象来调用它。

第二个问题的答案：“如果我有一个被调用的实例`A`，`a`是否会调用`a`'s`doSomething()`方法？”
事实上它会，但它类似于说`A.doSomething()`。因此，以这种方式调用它是没有意义的。如果有的话，它会在您稍后阅读代码时增加您的困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T02:07:52.783

虽然我质疑你的一些术语（我感觉你知道你在说什么，但你只是没有完美地表达出来），回答你的问题，不，因为它不能。静态方法与类绑定。调用 a.staticMethod() 与 A.staticMethod 相同。两者都做完全相同的事情。

# python - Python：无法理解正则表达式

> ID：14638593
> 
> 赞同：2
> 
> 时间：2013-02-01T02:04:17.960
> 
> 标签：python, regex, django

我正在阅读 django 教程，虽然现在几乎所有内容看起来都很清楚，但我在匹配 url 时无法理解正则表达式：

`r'^(?P<poll_id>\d+)/$`

做`(?P<poll_id>\d+)`什么？

我知道在剥离`"34/"`from之后`"polls/34/"`，`polls.url`正在调用 The 并且`urlpatterns`正在寻找关键字，但是如何`poll_id`获得这个值`34`？

我只知道一点正则表达式，所以这就是我可能难以阅读的原因。另外，这里是我用于这个问题的参考：[Tutorial Part3](https://docs.djangoproject.com/en/dev/intro/tutorial03/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T02:12:21.327

这是一个将`poll_id`（数字）作为变量的正则表达式。

对应的视图是：

```
def detail(request, poll_id):
    return HttpResponse("You're looking at poll %s." % poll_id) 
```

现在当你去的时候`example.com/polls/34/`，它知道你在找`poll`数字`34`，并且把它作为`poll_id`.

所以在你看来，`poll_id = 34`. 这允许您显示或操作此特定民意调查。

本质上，在这种情况下，正则表达式的重点是允许您查看大量特定的民意调查，而无需为每个民意调查创建明确的 url。

澄清一下，这个正则表达式是说取任意数字`\d+`，将其另存为`poll_id`，然后使用 that 继续查看此视图`poll_id`​​。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:35:00.657

为了支持 Dan Hoerst 的回答：是的，django 使用正则表达式来提取视图的 poll_id。这个的底线是：

```
import re 
r = re.compile(r'^poll/(?P<poll_id>\d+)/$')
r.match('poll/132/').groups() # ('132',) 
```

# javascript - vim 没有正确缩进文件类型插件缩进

> ID：14638594
> 
> 赞同：0
> 
> 时间：2013-02-01T02:04:24.277
> 
> 标签：javascript, json, vim

我`filetype plugin indent`的 ~/.vimrc 中有，但它搞砸了 JSON 对象的缩进。

我开始 vim`vim -N -u NONE <filename.js>`

我启用`:filetype plugin indent on` 并`:set sw=4 fileetype=javascript`

这就是我得到的：

```
var foo = {
    Bar: function(){
         },
    Baz: function(){
         } 
}; 
```

这应该是 - 有没有办法得到这个？：

```
var foo = {
    Bar: function(){
    },
    Baz: function(){
    } 
}; 
```

我启用缩进插件的原因是块注释更容易。如果我输入`/* <enter>`它将假设我正在做一个块文档注释。但如果它破坏了我的 JSON 结尾括号，我将避免使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:41:08.420

我有[Ryan Fabella 的这个缩进脚本](http://www.vim.org/scripts/script.php?script_id=1936)；它会根据需要缩进您的示例。

# knockout.js - 如何检测所有绑定何时更新且页面更新完成？

> ID：14638599
> 
> 赞同：1
> 
> 时间：2013-02-01T02:04:57.570
> 
> 标签：knockout.js, web-testing

我正在研究如何通过 Selenium 或 PhantomJS 等自动化测试工具测试基于淘汰赛的网站。测试的一般流程是：

1.  做某事（例如，单击按钮）
2.  检查是否发生了成功的副作用（例如，span text updated）
3.  重复

问题是#2。淘汰赛更新不会立即发生，因此我执行以下操作：

1.  每 100 毫秒检查一次成功条件
2.  如果超过 5 秒，则失败。

这很糟糕，因为我要么必须让超时时间足够长以使淘汰赛始终完成，要么忍受虚假的失败。

有没有一种方法可以检测到所有依赖项何时都已更新？还是我错过了另一种方法？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:27:39.703

您可以附加自己的订阅，以便在可观察对象发生更改时收到通知。一旦您的订阅被调用，它可以成为您检查成功条件的触发器。

例如：

```
myViewModel.personName.subscribe(function(newValue) {
    alert("The person's new name is " + newValue);
    //Person got a new name, now lets run the testing tool 
}); 
```

[更多细节在这里](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)。

# c# - 如何处理 CustomCreationConverter (json.net) 中的引用

> ID：14638600
> 
> 赞同：8
> 
> 时间：2013-02-01T02:05:01.673
> 
> 标签：c#, json.net, converter

有两个班

```
public class Playlist {
    public string Name { get; set; }
    public Schedule Schedule1 { get; set; }
    public Schedule Schedule2 { get; set; }
}

public interface Schedule {
    string Name { get; set; }
}

[JsonObject(MemberSerialization = MemberSerialization.OptIn, IsReference = true)]
public class ScheduleImpl : Schedule {
    [JsonProperty]
    public string Name { get; set; }
} 
```

每个播放列表有两个时间表，客户端代码如下，

```
static void Main(string[] args) {
    Playlist p1 = new Playlist { Name = "playlist1" };
    p1.Schedule1 = new ScheduleImpl { Name = "schedule1" };
    p1.Schedule2 = p1.Schedule1;

    var content = Serialize(p1);
    Console.WriteLine(content);

    Console.WriteLine("----------------------------------------------------");
    Console.ReadLine();

    var p = Deserialize<Playlist>(content);
    Console.WriteLine(p.Schedule1.Name);
    Console.WriteLine(p.Schedule2.Name);

    Console.WriteLine("press any key to exit.");
    Console.ReadLine();
}

private static string Serialize(Playlist arg) {
    var settings = new JsonSerializerSettings() { NullValueHandling = NullValueHandling.Ignore };
    return JsonConvert.SerializeObject(arg, Formatting.Indented, settings);
}

private static T Deserialize<T>(string arg) {
    var settings = new JsonSerializerSettings();
    settings.Converters = new JsonConverter[] { 
        new CustomCreationConverter<Schedule, ScheduleImpl>()
    };
    return JsonConvert.DeserializeObject<T>(arg, settings);
} 
```

自定义创建转换器无法处理引用，我应该自己解析“引用”吗？

```
public class CustomCreationConverter<A, T> : CustomCreationConverter<A>
    where T : A, new() {
    public override A Create(Type objectType) {
        return new T();
    }
} 
```

json输出是，

```
{
  “名称”：“播放列表1”，
  “时间表1”：{
    "$id": "1",
    “名称”：“计划 1”
  },
  “时间表2”：{
    "$ref": "1"
  }
}

```

* * *

我从源代码中得到了答案，

```
public class InheritConverter<T> : JsonConverter {
    public override bool CanConvert(Type objectType) {
        return typeof(T).IsAssignableFrom(objectType);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) {
        if (reader.TokenType == JsonToken.Null) return null;

        JObject jObject = JObject.Load(reader);
        T target = default(T);
        if (jObject != null) {
            if (jObject["$ref"] != null) {
                string id = (jObject["$ref"] as JValue).Value as string;
                target = (T)serializer.ReferenceResolver.ResolveReference(serializer, id);
            } else {
                target = Create(objectType, jObject);
                serializer.Populate(jObject.CreateReader(), target);
            }
        }
        return target;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer) {
        throw new InvalidOperationException("never use this in serialize");
    }

    protected virtual T Create(Type objectType, JObject jObject) {
        T result = default(T);
        try {
            var type = (jObject["$type"] as JValue).Value as string;
            result = (T)Activator.CreateInstance(Type.GetType(type));
        } catch (NullReferenceException) {
            throw new InvalidCastException("Add ItemTypeNameHandling setting");
        }
        return result;
    }
} 
```

# java - 适用于 Google App Engine 的服务器端 Java 图表库

> ID：14638603
> 
> 赞同：2
> 
> 时间：2013-02-01T02:05:29.987
> 
> 标签：java, google-app-engine, charts

除了 gwt-visualization 或 Google Charts 之外，是否有用于 Google App Engine 的服务器端图表库？大多数库（如 JFreeCharts、JOpenCharts、EasyCharts 等）使用 GAE 不支持的 java.awt.* 类。

我需要将服务器生成的图表嵌入到 pdf 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:56:40.127

在我的一个应用程序中，我曾经在服务器端（JFreeCharts）做图表，但是当我转移到应用程序引擎时，我发现将数据发送到客户端（json 或其他格式）并在浏览器中做图表更方便javascript 而不是在服务器端生成图像。

目前我最喜欢的绘图库是[flot](http://www.flotcharts.org/)。

它也会为您省钱，因为您不会在服务器端生成图像（计算时间）并发送原始数据而不是图像（传出带宽）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:06:09.913

我在[Zingchart](http://www.zingchart.com)的团队中。我们最近推出了我们库的服务器端版本。这将允许您在服务器上创建 HTML5 图表并将它们包含在 PDF 中或作为图像。如果有什么我可以提供帮助的，请随时与我联系。

——杰夫·弗雷德里希

# r - 哪些数值优化器可以只使用梯度而没有明确的目标值？

> ID：14638606
> 
> 赞同：2
> 
> 时间：2013-02-01T02:05:32.650
> 
> 标签：r, optimization, numpy, numerical-methods, numerics

我有一个优化问题，涉及最小化我知道梯度的函数，但目标函数在任何点的实际值都是未知的。

我想使用 BFGS 优化函数，但我发现的所有 BFGS 实现似乎都需要了解目标的值，尤其是在行搜索步骤中。我查看了 BFGS 的 python (scipy) 和 C++ 实现。

显然我可以使用梯度下降，但我不想在这里重新发明轮子。

有任何想法吗？

*更多细节*：我想最小化**h**。但我没有得到**h**。我得到的是**h = f(g)**，以及**g(x)**的明确公式。**f**基本上以一种不太难计算但不可能积分的复杂几何方式来转换**g的梯度。**因此，计算**h(x)**的梯度非常简单，但很难获得**h(x)**的明确值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:51:04.973

我相信您已将问题简化为寻找根源的问题。您可以使用[scipy 中的根查找器之一](http://docs.scipy.org/doc/scipy/reference/optimize.nonlin.html#module-scipy.optimize.nonlin)，然后您只需检查该点是最小值、最大值还是拐点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T04:22:38.030

在这种情况下，请尝试将 h(x) 最小化为 2 次方。这是因为您实际上是在搜索 h(x) 接近于零的点。您可以通过平方和运行参数搜索来凸化它。

编辑：对不起，我的意思是 h(x) 是渐变..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T00:06:26.473

在花了一些时间思考这个问题之后，我认为答案是只采用像 BFGS 这样的准牛顿方法。函数值进入 BFGS 计算的唯一地方是线搜索部分，即第一个 Wolfe 条件。

我认为解决方案是使用不检查第一个 Wolfe 条件（Armijo 规则）的线搜索方法。

我在 python 和 C++ 中为 BFGS 实现了它：[https](https://gist.github.com/rmcgibbo/4735287) ://gist.github.com/rmcgibbo/4735287 。尽管如此，我认为你可以通过为 BFGS 例程提供一个始终递减的函数来获得相同的结果（例如，它包含一个跟踪它被调用的次数的计数器，并且总是返回一个比它小的数字你最后一次调用它）。减少量必须足够大，以便您始终通过 Armijo 规则 ( [http://en.wikipedia.org/wiki/Wolfe_conditions](http://en.wikipedia.org/wiki/Wolfe_conditions) )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:48:54.227

也许谈论一个更简单的例子会有所帮助。取一些标量 y=f(x)。y 的梯度是 df/dx 。如果你知道无处不在的导数，你可以很容易地（！！）通过解析或数值积分来确定 f(x) 的值，但具有无法确定的全局常数。旧的“积分（f（x）dx）= F（x）+ C”技巧。因此，除非您至少可以在某一点上锚定您的`h`功能，否则您无法解决问题。您可以追踪最小值的位置，`x`例如`h(x)`min)，但不是`h(x)`

# android - 如何在不分叉的情况下创建黑莓版本的 android 项目？

> ID：14638607
> 
> 赞同：2
> 
> 时间：2013-02-01T02:05:54.007
> 
> 标签：android, blackberry-10, blackberry-android

Blackberry 10 现在接受 android 但不接受 google map。

基本上我们想将我们的应用程序移植到 android 并为谷歌地图使用不同的技术，但我们不想分叉该项目。所以我们希望原始项目其他区域的所有更新都延续到 bb 项目之类的东西（它应该仍然是同一个项目）

所以我想进行一些预处理，上面写着：（如果是黑莓，请执行此操作）。之类的事情。

有没有办法这样做？

基本上最糟糕的是，我们只是去掉了 bb 版本的地图功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:15:52.647

`boolean`您可以在常量类中创建一个值：

```
public class Constants{

public static boolean isForBlackberry = true;

} 
```

然后你可以用它来操作。因此，如果你想对地图做一些事情，你可以像这样检查它：

```
if(!Constants.isForBlackberry){
// open up a map
}
else{
// don't open up a map, do something else instead
} 
```

现在每次导出 apk(Android) 时都将`boolean`值设置为`false`，但如果导出 bar(Blackberry) 文件，则将其设置为`true`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:04:59.460

首先，我想说有一个 jar 文件可以同时支持 android 和 blackberry。例如，如果您从 android 和 blackberry 应用程序中访问 Web 服务，则可以将 http 请求 + xml 解析器隔离到单独的 jar 文件中。它是可能的，我已经成功地做到了。

android 和 blackberry（java 部分）之间存在细微差别。Blackberry 有时比 android 落后 1 个版本，因此您需要添加一些注释来支持您在 blackberry 上的代码。您确实需要将 java 类从您的 android 中分离到一个单独的项目中。我还隐约记得您需要删除未使用的导入。

尽一切可能，继续。您将节省大量时间，并为您的开发人员工作。

不要做“如果黑莓”这样做。你会在代码上弄得一团糟。而且，如果您想“不”支持黑莓，哦，伙计，您将面临一项任务。你也可能不想仅仅因为你不能让该死的东西在黑莓上工作而束缚你的 android 版本。在外面的 lib jar 中将项目与常见的东西分开。这就是走的路，伙计。

# javascript - 使用 jquery 遍历对象的 json 数组

> ID：14638612
> 
> 赞同：1
> 
> 时间：2013-02-01T02:06:54.437
> 
> 标签：javascript, jquery, json

我知道这对你们中的一些人来说可能看起来很基础，但我正在尝试迭代一个 json 对象。我很抱歉，因为我似乎很难让各种例子起作用。我还阅读了 jQuery 文档，其中列出的 json 示例与我的 json 结构不太匹配。

这是我的示例的链接，它在我希望看到“1”的控制台中显示“null”。我只是想打印出 json 数组中每个“节点”的 article_id 元素。

[http://jsfiddle.net/zZjfj/1/](http://jsfiddle.net/zZjfj/1/)

```
var json = [
    [{
        "article_id": 1,
            "article_title": "test",
            "article_content": "test1"
    }, {
        "article_id": 2,
            "article_title": "test2",
            "article_content": "this is a second test article"
    }]
];

$.each(json, function (arrayID, group) {
    console.log(group.article_id);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T02:10:10.490

您的 json 不是对象数组，它是对象**数组的数组**。

当您在迭代中输入时，对于每个元素，**arrayID**是索引（0、1 等...），组是子数组。

要解决您的问题，请在代码中使用 json[0] 而不是 json

```
$.each(json[0], function (arrayID, group) {
    console.log(group.article_id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:11:11.150

您的对象“json”是一个包含 1 个元素的数组，它本身就是一个包含 2 个元素的数组。如果您将示例更改为：

```
var json = [
    { "article_id": 1,
      "article_title": "test",
      "article_content": "test1" },
    { "article_id": 2,
      "article_title": "test2",
      "article_content": "this is a second test article" }
  ]; 
```

然后它会生成文章 ID：1,2。

如果您需要遍历二维数组，则可以使用嵌套循环：

```
$.each(json, function (idx1, entry) {
  $.each(entry, function (idx2, group) {
      console.log(group.article_id);
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T02:11:26.493

您有一个嵌套在另一个数组中的数组。您可能想看看您的 JSON 是如何输出的，但与此同时，它可以通过另一个级别的迭代轻松解决：

```
$.each(json, function (arrayID, group) {
    $.each(group, function (arrayID, group) {
        console.log(group.article_id);
    });
}); 
```

[http://jsfiddle.net/zZjfj/2/](http://jsfiddle.net/zZjfj/2/)

我创建了一个脚本，它允许您在 JSON 中查看值的路径：http: [//jsfiddle.net/ExplosionPIlls/zEBZr/1/](http://jsfiddle.net/ExplosionPIlls/zEBZr/1/)

# hadoop - Splunk：HDFS 容量不适用

> ID：14638613
> 
> 赞同：1
> 
> 时间：2013-02-01T02:06:56.987
> 
> 标签：hadoop, monitoring, hdfs, splunk

我安装了 splunk 来监控和分析 hadoop 作业。在其他节点的 Jobtracker、转发器和 TA 中安装 splunk core 和 splunk hadoop 应用程序后，HDFS 容量和插槽容量在 Utilization 部分显示 N/A。任何可能的原因的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:55:36.520

HDFS 和 Slots 显示 N/A，因为未启用指标并且 Splunk 没有获得有关 HDFS 容量的必要信息。

这就是我所做的。

1.  配置 hadoop 以发送指标 [http://docs.splunk.com/Documentation/HadoopOps/latest/HadoopOps/SplunkTAforHadoopOps#Hadoop_metrics](http://docs.splunk.com/Documentation/HadoopOps/latest/HadoopOps/SplunkTAforHadoopOps#Hadoop_metrics)
2.  配置 splunk 转发器以监控输出。 [http://docs.splunk.com/Documentation/HadoopOps/latest/HadoopOps/SampleHadoopinputs.conffiles](http://docs.splunk.com/Documentation/HadoopOps/latest/HadoopOps/SampleHadoopinputs.conffiles)

# c++ - 这是重命名和重新包含 std::unique_ptr 的好习惯吗？

> ID：14638626
> 
> 赞同：0
> 
> 时间：2013-02-01T02:07:59.300
> 
> 标签：c++

代码如下

```
// in ptr.h
#pragma once
#include <memory>
template<class T> using Ptr = std::unique_ptr<T>; 
```

所以每次我使用 std::unique_ptr 时，我都会包含“ptr.h”并将其用作 Ptr。这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T02:11:19.093

这种事情只会损害可读性。`unique_ptr`一般 C++ 程序员在知道你的概念之前知道a 是什么的可能性更高`Ptr`。此外，我可以搜索前者而不是后者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:21:16.163

假设您的需求发生了变化并决定使用`std::share_ptr`. 你自然会这样做：

```
template<class T> using Ptr = std::shared_ptr<T>; 
```

好的！伟大的！使用`Ptr`. 但`std::shared_ptr`在语义上不同于`std::unique_ptr`. 当一些不知道变化的不知情的程序员继续认为那`Ptr`仍然是`std::unique_ptr`...... kaboom！

我学到的一件事是，不要仅仅为了简洁而牺牲代码的可读性，这一点很重要。

# ruby-on-rails - 添加关联的正确方法有很多

> ID：14638629
> 
> 赞同：0
> 
> 时间：2013-02-01T02:08:17.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在使用一个 has many through 关联，如下所示：

```
class Rating < ActiveRecord::Base  
  has_many :recommendation_ratings, :dependent => :destroy
  has_many :recommendations, :through => :recommendation_ratings
end

class Recommendation < ActiveRecord::Base  
  has_many :recommendation_ratings, :dependent => :destroy
  has_many :ratings, :through => :recommendation_ratings
end

class RecommendationRating < ActiveRecord::Base  
  validates :recommendation_id, presence: true
  validates :rating_id, presence: true

  belongs_to :recommendation
  belongs_to :rating
end 
```

我目前正在我的控制器中创建我的关联，如下所示：

```
 rr   = RecommendationRating.find_by_recommendation_id(recommendation_id)
   rr ||= RecommendationRating.new(recommendation_id: recommendation_id)

   rr.rating_id = rating_id
   rr.save 
```

或者，我可以为推荐分配评级，如下所示：

```
 @recommendation = Recommendation.find(recommendation_id)
   @rating = Rating.find(rating_id)
   @recommendation.ratings << @rating 
```

哪种方法是关联这些记录的正确方法，第一种方法有缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:14:50.683

这取决于你需要什么。

第一个更新一条`recommendation_rating`记录（如果它已经存在）并使您能够在调用后运行回调和验证`save`

第二个会在您每次调用`<<`时创建评分，并直接在数据库上创建记录，因此不会触发验证和回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:22:04.660

我想我可能会

```
RecommendationRating.find_or_create_by_rating_id_and_recommendation_id(
  rating_id,
  recommendation_id
) 
```

我相信，如果我理解正确的话，它在功能上等同于您描述的两种方法。

# c++ - 获取错误浮点异常：8

> ID：14638632
> 
> 赞同：19
> 
> 时间：2013-02-01T02:08:25.033
> 
> 标签：c++

我不知道为什么 g++ 不喜欢我的代码。它在java中运行良好。任何见解将不胜感激。

```
#include<iostream>

using namespace std;

bool isPrime(long number);

int main(){
const long number = 600851475143;
long max = 0;
for(long i= 0; i*i <= number; i++)
    if(number % i == 0 && isPrime(i))
        max = i;
cout<< max << endl;

return 0;
}

bool isPrime(long number){
if(number <= 1) return false;
if(number == 2) return true;
if(number % 2 == 0) return false;

for(long     i= 3; i*i <= number; i+=2)
    if(number % i == 0)
        return false;
return true;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T02:12:28.283

```
const long number = 600851475143; 
```

有溢出，长容纳不了这么大的数字。

看到[这个链接](http://msdn.microsoft.com/en-us/library/296az74e%28v=vs.80%29.aspx)

```
LONG_MAX is 2147483647 
```

尝试：

```
const unsigned long long number = 600851475143;
unsigned long longmax = 0; 
```

编辑：

你不能 % 反对 0，`i`从`0`

```
for(long i= 0; i*i <= number; i++)
           ^^
{
    if(number % i == 0 && isPrime(i))
               ^^^
{
   max = i;
   cout<< max << endl;
} 
```

}

对工作版本的小改动：

```
bool isPrime(unsigned long long  number);

int main(){

    const unsigned long long number = 600851475143;
    unsigned long long max = 0;
    for(long i = 1; i*i <= number; i++)
    {
        if(number % i == 0 && isPrime(i))
        {
            max = i;
            cout<< max << endl;
        }
    }
    return 0;
}

bool isPrime(unsigned long long  number)
{
    if(number <= 1) return false;
    if(number == 2) return true;
    if(number % 2 == 0) return false;

    for(unsigned long long i= 3; i*i <= number; i+=2)
    {
        if(number % i == 0)
        {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:10:26.363

我在任何地方都看不到浮点数，但如果我不得不猜测那是因为它是由于溢出造成的。使用`unsigned long long`or`long long`代替常规`long`.

`sizeof(long)`在某些编译器上已评估为 4，类似于`sizeof(int)`，这意味着 C++ 标准要求的限制`long`为 2147483647.`long long`至少为 64 位，是`long`和的两倍`int`，其最大有符号数为 9223372036854775807。

该错误源于您的代码：您将模数为零，这是错误的。

考虑这样做：

```
#include <iostream>

using namespace std;

bool isPrime(unsigned long long number);

int main(){
    const unsigned long long number = 600851475143;
    unsigned long long max = 0;
    for(unsigned long long i= 1; i*i <= number; i++)
        if(number % i == 0 && isPrime(i))
            max = i;
    cout<< max << endl;

    return 0;
}

bool isPrime(unsigned long long number) {
    if(number <= 1) return false;
    if(number == 2) return true;
    if(number % 2 == 0) return false;

    for(unsigned long long i= 3; i*i <= number; i+=2)
        if(number % i == 0)
            return false;
    return true;
} 
```

注意如何`i = 0`更改为`i = 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-17T09:08:13.677

对我来说，在做产品时检查整数溢出时出现了这个错误：

```
#define INT_MIN -2147483648 // -2^31
#define INT_MAX  2147483647 //  2^31-1

int out=-1, x=-5;

if ((out > 0 && (x > INT_MAX/out || x < INT_MIN/out)) ||
    (out < 0 && (x < INT_MAX/out || x > INT_MIN/out))) {
  // what to do for overflow
} else {
  out *= x;
} 
```

问题是，因为`abs(INT_MIN) > abs(INT_MAX)`，正是在 时`out=-1`，条件`INT_MIN/out`导致了 的溢出`int`（因为`0`，没有足够的空间容纳`INT_MAX+1`）`int`。我添加了一个新条件来解决浮点问题：`out == -1 && (x > INT_MAX || x <= INT_MIN)`

# mysql - MySQL - 在 where 子句中引用聚合列

> ID：14638634
> 
> 赞同：7
> 
> 时间：2013-02-01T02:08:45.903
> 
> 标签：mysql, sql, max, aggregate

这看起来很简单，但如果不做子查询我似乎无法弄清楚（这似乎显着减慢了查询速度 - 需要将近 10 秒而不是 <1）。

假设我有一张已发送文档的表格，我想选择自上次发送以来已更新的文档，以及从未发送过的文档。

```
SELECT d.document_id, max(sd.document_sent_date) as last_sent_date
FROM documents d
LEFT JOIN sent_documents sd ON d.document_id=sd.document_id
WHERE last_sent_date is NULL OR last_sent_date<d.last_updated
GROUP BY d.document_id 
```

这样的事情可能吗？基本上，我想在 where 子句中使用 max() 的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T02:10:46.820

你想要这个`having`子句。

一般规则：在聚合*前*`where`对日期进行操作，对聚合*后*的数据进行操作。*`having`*

# java - 使用合并排序计算数组中的反转未给出正确结果

> ID：14638644
> 
> 赞同：0
> 
> 时间：2013-02-01T02:10:09.003
> 
> 标签：java, algorithm, sorting, mergesort

我已经实现了使用归并排序计算数组反转的程序。程序与归并排序相同，倒数计数略有变化。

```
public class HMergeSortVer1 {

    public int inversions;

    public void msort(int [] A,int p, int r){
        if(p<r){
            int q=(int) Math.floor((r+p)/2);
        //  System.out.println("q--"+q);
            msort(A, p, q);
            msort(A, q+1, r);
            merge(A,p,q,r);
        }

    }

    private void merge(int [] A,int p,int q,int r){
        //System.out.println("In the merge");
        int n1=q-p+1; // number of elements in left array
        int n2=(r-q);
        int[] L=new int[n1+1];
        int[] R=new int[n2+1];
        for(int i=0;i<n1;i++){
            L[i]=A[p+i];
        }
        for(int j=0;j<n2;j++){
            R[j]=A[q+j+1];
        }
        L[n1]=Integer.MAX_VALUE;
        R[n2]=Integer.MAX_VALUE;
        int i=0;
        int j=0;
        for(int k=p;k<(r+1);k++){
            if(L[i]<= R[j]){                
                A[k]=L[i];
                i=i+1;
            }
            else {
                A[k]=R[j];
                j=j+1;
                int numOFElements=n1-i; 
                inversions=inversions+numOFElements; // this counts inversion
            }
        }
    }

} 
```

它适用于某些情况，但在其他情况下会给出错误的输出。如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T22:56:22.717

问题是您使用“反转”作为“int”数据类型，因此对于非常大的输入它会溢出。改用“long”，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T03:19:20.553

这是 Cormen book 的相同实现。但在书中它假设数组是 1 索引的。大概就是这个了。考虑到您有 0 索引数组，请尝试更改您的代码。

如果它是 0-indexed 那么你的 n1 变量应该等于 qp

# javascript - 回写到 Knockout.js 中的计算数组？

> ID：14638645
> 
> 赞同：4
> 
> 时间：2013-02-01T02:10:10.093
> 
> 标签：javascript, knockout.js

我的模型上有一个计算属性，它只是将逗号分隔的字符串拆分为一个数组，我希望能够利用“已检查”绑定的特殊数组功能通过计算属性写回更改。

一切都非常适合读取计算的属性，但是一旦我选中其中一个复选框，我就会收到有关某些功能不支持拼接（如果我取消选中）或不支持推送（如果我选中）的错误。

```
> Uncaught TypeError: Object function
> h(){if(0<arguments.length)return"function"===typeof
> v?v.apply(d,arguments):j(Error("Cannot write a value to a ko.computed
> unless you specify a 'write' option. If you wish to read the current
> value, don't pass any parameters.")),this;n||g();b.r.Wa(h);return l}
> has no method 'splice' knockout-min.js:60 (anonymous function) 
```

我在 jsfiddle 上创建了一个快速示例来说明发生了什么。[http://jsfiddle.net/Y6tXw/](http://jsfiddle.net/Y6tXw/)

```
var MyModel = function() {
    this.src = ko.observable("one,two");
    this.comp = ko.computed({
        read: function() {
            return (this.src() || "").split(",");
        },
        write: function(value) {
            var csvs = (value || []).join(",");
            this.src(csvs);
        },
        owner: this
    });
};

var model = new MyModel();
ko.applyBindings(model); 
```

它从不调用我的 write 函数。似乎它在绑定中崩溃了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:42:03.077

在上述情况下，comp 在计算中，而不是数组中。我已经修改了你的代码。我使用 subscribe 来收听 comp 提出的更改通知并重新计算 sec 的值

```
<input type="checkbox" value="one" data-bind="{ checked: comp }"/>
<input type="checkbox" value="two" data-bind="{ checked: comp }"/>
<input type="checkbox" value="three" data-bind="{ checked: comp }"/>
<input type="text" data-bind="{ value: src }"/>

var MyModel = function () {

    var self = this;

    self.src = ko.observable("one,two");

    self.comp = ko.observableArray((self.src() || "").split(","));

    self.comp.subscribe(function () {
        self.src(ko.utils.unwrapObservable(self.comp).join(","));
    });
};

$(function () {
    var model = new MyModel();
    ko.applyBindings(model);
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T03:47:11.707

Knockout 假设你绑定的是一个可观察的数组。我不认为他们打算支持这个选项。（至少现在还没有）为了解决这个问题，换一种方式会更容易。使数组成为数组，并`src`改为计算。

```
function ViewModel(data) {
    this.comp = ko.observableArray(["one","two"]);
    this.src = ko.computed({
        read: function () {
            return this.comp().join(",");
        },
        write: function (value) {
            this.comp(value.split(","));
        },
        owner: this
    });
} 
```

# class - 我可以围绕使用 .NET 函数的 COM 包装 DLL 创建包装类吗？

> ID：14638652
> 
> 赞同：1
> 
> 时间：2013-02-01T02:10:50.033
> 
> 标签：class, com, vb6, wrapper, filenet-p8

很多人都在讨论 COM 互操作，我已经全部阅读过了。

案例 1：VB 6 或 VBA 需要使用 .NET 中的库（我有 FileNet 对象，IBM 已经创建了一个可以被 VBA 使用的 COM 包装器 DLL

[http://pic.dhe.ibm.com/infocenter/p8docs/v4r5m1/index.jsp?topic=%2Fcom.ibm.p8.doc%2Fdeveloper_help%2Fupg_custom_apps%2Fce_com_api.htm](http://pic.dhe.ibm.com/infocenter/p8docs/v4r5m1/index.jsp?topic=%2Fcom.ibm.p8.doc%2Fdeveloper_help%2Fupg_custom_apps%2Fce_com_api.htm) ）

案例 2：您的 .NET 源代码需要使用 COM/COM+ 对象类，这不是我的情况。

所以我的情况是案例1。我不必处理泛型（请参阅Genetics and COM interop don't Mix，文章使用反射来解决问题，但速度很慢。现在使用C＃4.0动态是去（快 100 倍） [http://www.west-wind.com/weblog/posts/2007/Jul/10/Generics-and-COM-Interop-dont-mix](http://www.west-wind.com/weblog/posts/2007/Jul/10/Generics-and-COM-Interop-dont-mix) ）

为什么我需要编写另一个包装器？因为 IBM 文档说由于 .NET 库的限制，不支持 ADOConnection。还有另一个功能不可用（它曾经在以前的版本中可用，所以我的 ASP 调用它）所以我必须生成我自己的。

Function FilterClassDescriptions(ByVal ObjType As Variant, Optional FilterType As Variant) As Variant

FileNet 的包装 COM DLL 使用 FNCE 的类，该类被编译成 .NET DLL。由于 .NET 不支持 ADOConnection，显然有些功能不再支持。但我的 ASP 依赖于这些功能。FNCE => FileNet 内容引擎。 ![FileNet ObjectStore 类](../Images/609339b449f3356a84660efa0daabf7d.png)

所以我围绕 COM 兼容层 DLL 创建了一个包装 VB6 类，我尝试注册活动 DLL 和活动 EXE，但是在 Excel 的 VBA 中我没有成功创建对象（myFNCE2013）（意味着我没有对象的内容） ，我确实得到了 creteObject(FNCE)，因为我可以在 ObjectStore 中看到东西。那么出了什么问题呢？

我的问题是包装器坏了之后的包装器？还是因为我之前注册了相同的活动 EXE/DLL 导致问题？我用双击的方法注册，第一次看到注册成功。我有带有 SP2 的 Windows 2003 服务器，为我的 ASP 运行 IIS。 ![在此处输入图像描述](../Images/13f8ee8d52d650daf1ccf6768e518567.png)

![在此处输入图像描述](../Images/700fcd6a26d5e47ea7d21ef4a514aa7c.png)

这是 IBM 对此的描述。

**不支持内容引擎方法**

由 Content Engine 4.x 添加到 COM 兼容层支持的对象的新方法不会在 COM 兼容层中公开。

COM API 支持但 Content Engine 4.x API 不支持的方法在 COM 兼容层接口中公开，但尝试调用这些方法将返回“不支持”错误。以下是这些方法的列表：

文件存储相关

```
ObjectStore.CreateFileStore
ObjectStore.ReindexFileStore 
```

OLEDB/ADO相关

```
**ObjectStore.GetADOConnection** 
```

各种各样的

```
**ObjectStore.FilterClassDescriptions**
ObjectStore.FilterPropertyDescriptions 
```

**如果您现有的代码使用这些 ObjectStore 属性中的任何一个，则必须基于迭代 ObjectStore.ClassDescriptions 集合或使用 ObjectStore.GetObject("ClassDescription", "") 编写自己的过滤逻辑。**

这是我的调试信息。 ![在此处输入图像描述](../Images/ae7ae120ac17c2c12fe5f374f8d65413.png)

感谢阅读到这里。我有一个丑陋的解决方案，但我仍然想听听你的聪明解决方案。我的丑小鸭是：不要再编写包装器 VB6 类，将代码放入 ASP 包含文件中，以便 ASP 页面可以使用这些功能，但是我没有 VB 类，因为 ASP 包含文件不允许这样做。这些包含文件应该能够直接调用 COM 对象。但是将类对象分解为非 OOP 功能代码？我们对类对象的思考非常舒适，非 OOP 编程对我来说似乎很简单。

```
Private oEntireNetwork As FNCE.EntireNetwork
Private oObjectStore As FNCE.ObjectStore
Private oUser As FNCE.user
Private sObjectStoreName As String
Private oDocument As FNCE.Document
Private sName As String
Private sSessionManager As String
Private sLogonID As String
Private ADOCnn As ADODB.Connection
Private oRtnRecordSet As New ADODB.Recordset

Public Function ActiveUser() As Variant
    On Error GoTo E
    Set ActiveUser = oEntireNetwork.CurrentUser
E:
    If Err.Number <> 0 Then Set ActiveUser = Nothing
End Function

Public Function Users() As Variant
    On Error GoTo E
    Set Users = oEntireNetwork.MyRealm.Users
E:
    If Err.Number <> 0 Then Set Users = Nothing
End Function

Public Function Groups() As Variant
    On Error GoTo E
    Set Groups = oEntireNetwork.MyRealm.Groups
E:
    If Err.Number <> 0 Then Set Groups = Nothing
End Function

Private Sub Class_Initialize()
    Dim iLoop
    On Error GoTo E
    bLogError = True
    sLogErrorPath = App.Path
    iDebugLevel = 1
    iLoop = 0

    If oEntireNetwork Is Nothing Then
        Set oEntireNetwork = New FNCE.EntireNetwork
    End If

    If bLogError = True Then
        WriteMsgToLogFile 1, "MyFNCE.ObjectStore:Class_Initialize()"
    End If
E:
    If Err.Number <> 0 Then
        If bLogError = True Then
            WriteMsgToLogFile 1, "MyFNCE.ObjectStore:Class_Initialize() -- Exception Error #" & Err.Number & ": " & Err.Description
        End If
    End If
End Sub 
```

所以没有更多的类启动，我的 ASP 不能调用对象属性或函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:02:01.550

我自己弄明白了。包装器周围的包装器很好。我犯了一个错误，没有公开变量，它们应该是公共的以供 VBA 使用，默认情况下它们是私有的。

# c++ - 如何处理外部应用程序窗口？MFC

> ID：14638654
> 
> 赞同：0
> 
> 时间：2013-02-01T02:11:00.903
> 
> 标签：c++, mfc, window, handler

我需要按名称、ID 或进程句柄来处理另一个正在运行的应用程序。我得到了 ID 和进程句柄，但我不知道如何获取窗口句柄来更改外部程序标题。

有我的代码：

```
BOOL CFindProcess::OnInitDialog()
{
    CDialogEx::OnInitDialog();
    CComboBox* pComboBox = (CComboBox*)GetDlgItem(IDC_COMBO_PROCESS);
    HANDLE hSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
    PROCESSENTRY32 proc;
    proc.dwSize = sizeof(PROCESSENTRY32);
    if (Process32First(hSnap, &proc)){
        pComboBox->AddString(proc.szExeFile);
        while (Process32Next(hSnap, &proc)){
            if (0!=wcscmp(proc.szExeFile, L"svchost.exe"))
                pComboBox->AddString(proc.szExeFile);
            if (wcscmp(proc.szExeFile, L"notepad.exe") == 0){
                HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, proc.th32ProcessID);
                GetProcessId(hProcess);
                AfxMessageBox(L"Handeled");
                //SetWindowText(hProcess, L"Weather");
                CloseHandle(hProcess);
            }
        }
    }
    CloseHandle(hSnap);
    return TRUE;
} 
```

我的问题是如何通过名称或 ID 获取 notepad.exe 的窗口句柄，使用 MFC 处理句柄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:37:01.107

此代码演示了 Jerry 所指的内容：

```
struct MYFINDSTRUCT
{
    DWORD dwPID;
    HWND hWnd;
};

BOOL CALLBACK MyWndEnum(HWND hwnd,LPARAM lParam)
{
    MYFINDSTRUCT* pP = (MYFINDSTRUCT*)lParam;
        DWORD dwPID = 0;
    GetWindowThreadProcessId(hwnd,&dwPID);
    if(dwPID==pP->dwPID)
    {
        pP->hWnd = hwnd;
        return 0;
    }
    return 1;
}

HWND GetProcessHWND(unsigned int nPID)
{
    MYFINDSTRUCT p;
    p.hWnd = 0;
    p.dwPID = nPID;
    EnumWindows(MyWndEnum,(LPARAM)&p);
    return p.hWnd;
} 
```

# java - Google App Engine - 无法编译生成的 JSP java 文件

> ID：14638655
> 
> 赞同：14
> 
> 时间：2013-02-01T02:11:06.853
> 
> 标签：java, google-app-engine

我的项目在本地运行良好，但是在尝试将其部署到 GAE 服务器时，我收到以下错误消息：

```
Unable to update app: Failed to compile the generated JSP java files. 
```

这主要发生在我从 Java 7 切换到 Java 6 时，因为显然 GAE 还不支持它。我使用的是 GAE 1.7.4，这是一个已知问题吗？项目有什么问题？它是 JSP 中的语法吗？他们曾经在我开始使用 GAE 1.7.4 之前进行编译，但我不知道何时开始编译的确切原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T20:03:32.833

我一直有同样的问题，并确信存在 GAE 问题。但是，现在我意识到我已经更改了由我的几个 .jsp 文件引用的 .java 文件的名称，并且 .jsp 中的文件名没有更改。在我修复 .jsp 部署中的文件名后，再次正常工作。啊。

我认为在 GAE 开始编译 JSP 文件之前，有错误的 JSP 文件会成功部署。此外，在本地运行时，JSP 显然在被访问之前不会编译，因此除非所有 JSP 文件都在本地测试，否则您可能不知道错误。但是如果您尝试部署，JSP 编译会失败并且部署会中止。不幸的是，没有合理的错误消息提示问题所在的位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-27T02:44:28.080

我尝试再次在eclipse上重新编译java文件并检查错误。
我认为这是检查它的更好方法。

这是我的详细博客。
[http://nurinamu.tumblr.com/post/62384368766/how-to-detect-the-jsp-compile-error-when-deploy-to](http://nurinamu.tumblr.com/post/62384368766/how-to-detect-the-jsp-compile-error-when-deploy-to)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-29T18:02:38.400

我有同样的问题。我更改了一个由我通常不去的 JSP 调用的方法的方法签名。因此，当在本地运行时，一切正常，因为我从未去过有问题的 JSP。

解决此问题的方法是在本地运行并转到项目中的每个 JSP。最终，我找到了一个 JSP，它在我的浏览器窗口中本地为我提供了完整的堆栈跟踪。当我修复该 JSP 中的错误时，我再次能够部署到应用引擎生产环境。

如果 GAE 能够报告哪个 JSP 出现故障会更好，但是这种技术会起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T06:35:01.627

我在同样的问题上运行。是的，您在 Eclipse 和日志中遇到的错误确实无济于事，但想分享部署到本地开发服务器而不是提供了非常有用的错误消息，例如在我的情况下：

* * *

HTTP 错误 500

访问 / 时出现问题。原因：

无法为 JSP 编译类：

在 jsp 文件中的第 286 行发生错误：/dashboard.jsp

重复的局部变量数据存储

```
283:   </head>
284:   <body onload="initialize()">
285:     <%
286:     DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
287: 
288:     UserService userService = UserServiceFactory.getUserService();
289:     User user = userService.getCurrentUser(); 
```

* * *

省了一个大头疼。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-26T18:04:05.363

nurinamu 的回答是好的，但它对我不起作用，因为我的项目太复杂，而且我无法解决链接 appengine 暂存区域中生成的源文件夹时遇到的错误。但是我确实设法解决了我的问题！

这种方法有点麻烦，但在最坏的情况下：**将 JSP 移出项目并进行测试部署，直到缩小范围并找到导致问题的 JSP。**

这真的是我能找出导致问题的唯一方法。

**更新**

对我来说，错误是 appengine 不支持的恶意导入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T21:18:13.803

如果您使用 JSP 包含，您必须确保包含在其他文件中的 JSP 文件具有所有正确的导入，即使一切似乎在测试环境中运行良好。

例如，如果您有一个名为的文件`inc.jsp`，并且在其他文件中包含它，如下所示：

```
<%@include file="inc.jsp" %> 
```

然后在里面`inc.jsp`你必须确保所有正确的导入都在那里，即使编译器没有明确抱怨它。

在包含 JSP 中查找错误的一种简单方法是在运行开发服务器时尝试在浏览器中打开它。您将看到编译器没有告诉您的 JSP 错误。

这是我发现问题中提到的错误的原因之一。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-26T18:50:12.467

只需确保所有 jsp 文件都在本地运行，这样您就可以尝试`run and/or test all jsp files on your local`. 它们在任何 jsp 文件中都必须是错误的。

我以这种方式解决了这个问题。

我只有一个 jsp 文件有错误，但它对所有 jsp 文件显示相同的错误，所以不要担心所有文件。

# scala - 尝试打开使用 gen-idea 生成的 Intellij IDEA lift 项目

> ID：14638658
> 
> 赞同：1
> 
> 时间：2013-02-01T02:11:14.153
> 
> 标签：scala, intellij-idea, sbt, lift

我正在尝试将 Intellij IDEA 用于电梯项目。我已经安装了 sbt 和 scala 插件，最近我按照这里的说明进行操作[https://github.com/lift/lift_25_sbt](https://github.com/lift/lift_25_sbt)。当我打开项目时，它似乎在尝试索引文件时挂起。它也占用了大量的CPU。不完全确定从这里去哪里。我正在使用 Scala 2.9.2 和 Intellij 12。有人可以帮忙吗！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:34:13.763

JetBrains 对 IDEA 的替代版本（和任何插件）提供的支持很少。由于 12.0 是当前版本，因此我会使用它。我几乎记不起 10.x 时代的所有缺点，但从那以后它一直在稳步改善。

由于 IDEA 对 Scala 的支持在 Community（免费、开源）和 Ultimate（商业）版本中是相同的，所以没有理由不升级。

另外，我什至不知道`sbt-idea`插件是否生成了可以被那个旧版本的IDEA读取的项目文件。

**更新**

JetBrains 现在拥有 IDEA 12.1 的 EAP（早期访问程序）版本。我正在使用它，并且每天都会发布最新的 Scala 插件 EAP，它运行良好。进展继续快速...

# java - 如何删除此代码示例的重复代码？

> ID：14638662
> 
> 赞同：0
> 
> 时间：2013-02-01T02:11:58.283
> 
> 标签：java

给定以下代码：

```
public interface DTMFKeys {

    public String getKeyStr();

    public static enum Sign implements TahoeDTMFKeys {

        SIGN_1("*1"), SIGN_2("*2"), SING_3("*3"), SIGN_4("*4"), SIGN_5("*5"), SIGN_6(
                "*6"), SIGN_7("*7"), SIGN_8("*8"), SIGN_9("*9");

        private String keyStr;

        private Sign(String keyStr) {
            this.keyStr = keyStr;
        }

        @Override
        public String getKeyStr() {
            return keyStr;
        }
    }

    public static enum Pound implements TahoeDTMFKeys {

        POUND_1("1#"), POUND_2("2#"), POUND_3("3#"), POUND_4("4#"), POUND_5(
                "5#"), POUND_6("6#"), POUND_7("7#"), POUND_8("8#"), POUND_9(
                "9#");

        private String keyStr;

        private Pound(String keyStr) {
            this.keyStr = keyStr;
        }

        @Override
        public String getKeyStr() {
            return keyStr;
        }
    }
} 
```

如何删除重复的代码：

```
private Sign(String keyStr){
    this.keyStr=keyStr;
}

@Override
public String getKeyStr() {
    return keyStr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:23:34.237

它的代码不多，所以我真的不会担心重构它。Java 枚举不能扩展其他类。避免代码中的重复实际上是关于重复大量复杂的逻辑，而不是 getter/setter 字段。

如果您真的担心“重复”，您可以完全取消枚举吗？

```
public static String getKeyString(int n, char sign) {
  if (n < 0 || n > 9) throw new IllegalArgumentException();
  if (sign == '#') {
    return ""+n+sign;
  else if (sign == '*') {
    return ""+sign+n;
  else {
    throw new IllegalAgumentException()
  }
} 
```

此外，SING_3 拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:24:41.670

删除这些既不可能也不可取。因为枚举不能从抽象类继承，所以这是不可能的。`keyStr`对 Pound 和 Sign 类来说都是一个私有概念，它们在概念上是相互独立的。

# php - 如果变量不存在的语句？

> ID：14638677
> 
> 赞同：0
> 
> 时间：2013-02-01T02:13:24.757
> 
> 标签：php

我对 PHP 很陌生，这让我陷入了一个循环。

所以我了解一些基本的 PHP IF 语句，例如“如果包含”“超过”，但是当涉及到我的示例时；我有点困惑。

下面的代码用于 SEO 标题标签。目前它只是回显以下示例：

霍比特人海报 #1 - 电影海报

我将如何创建一个 IF 语句，如果 movie_name 和 poster_name 不存在，那么它只会回显“电影海报”

```
<title><?php echo $movie['movie_name']; ?> <?php echo $poster['poster_name']; ?> - Movie Posters</title> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:14:52.010

选项1：

```
<title><?php echo (isset($movie['movie_name'])) ? $movie['movie_name'] : ''; ?> <?php echo (isset($poster['poster_name'])) ? $poster['poster_name'] : ''; ?> - Movie Posters</title> 
```

选项 2：

```
$movie_name = (isset($movie['movie_name'])) ? $movie['movie_name'] : '';
$poster_name = (isset($poster['poster_name'])) ? $poster['poster_name'] : '';

<title><?php echo $movie_name; ?> <?php echo $poster_name; ?> - Movie Posters</title> 
```

有很多方法可以做到这一点。希望这些为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:26:34.920

换一种方式想一想：

> 如果（您有电影名称或海报名称）显示 DASH

```
<title><?php 
    $separator='';
    if (isset($movie['movie_name'])) { echo $movie['movie_name'].' '; $separator='- '; }
    if (isset($poster['poster_name'])) { echo $poster['poster_name'].' '; $separator='- '; }
    echo $separator;
?>Movie Posters</title> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:43:46.103

因为看起来我们都在这里发布了我们自己提出的解决方案，所以这是我的解释。建立你拥有的所有东西的字符串，然后修剪任何多余的空白。基本上建立在@John Conde 的方法之上……他几乎第一次就搞定了。这只是看待如何使用 PHP 的另一种方式。

```
// If either are set, echo a dash
if (isset($movie['movie_name']) || isset($poster['poster_name'])) {
    $title = $movie['movie_name'];
    $title .= ' ';
    $title .= $poster['poster_name'];
    $title .= ' - '
}
$title .= 'Movie Posters'

echo trim($title) 
```

另请注意，您可以使用以下语法来回显变量：

```
<span>Random number: <?= rand() ?></span>
<small><?= $text_to_go_in_small ?></small> 
```

# c# - MVC 路由错误处理程序

> ID：14638678
> 
> 赞同：0
> 
> 时间：2013-02-01T02:13:27.160
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我想捕获最新的未处理错误应用程序，并在发生错误时将其重定向到错误页面。但我收到错误“找不到 RedirectToRoute 的匹配路由”。我的代码有什么问题？这是我的实现：

**全球.asax**

```
routes.MapRoute(
        "ErrorHandler",
        "{ErrorHandler}/{action}/{errMsg}",
       new {controller="ErrorHandler", action = "Index", errMsg = UrlParameter.Optional }
       ); 
```

**申请_结束**

```
 protected void Application_Error(object sender, EventArgs e)
        {
            var strError = Server.GetLastError().Message;
            if (string.IsNullOrWhiteSpace(strError)) return;
            Response.RedirectToRoute("ErrorHandler", new {controller="ErrorHandler", action = "Index", errMsg = strError });
            this.Context.ClearError();
        } 
```

**错误处理器控制器**

```
public class ErrorHandlerController : Controller
    {

        public ActionResult Index(string errMsg)
        {
            ViewBag.Exception = errMsg;
            return View();
        }

    } 
```

**在我的家庭控制器上测试错误处理程序**

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            //just intentionally added this code so that exception will occur
            int.Parse("test");
            return View();
        }
    } 
```

**更新**

错字“控制器”。感谢drch。但我仍然收到错误“找不到 RedirectToRoute 的匹配路由”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T02:51:02.280

您的路线定义一定有问题。

您拥有的路线：

```
routes.MapRoute(
    "ErrorHandler",
    "{ErrorHandler}/{action}/{errMsg}",
   new {controller="ErrorHandler", action = "Index", errMsg = UrlParameter.Optional }
   ); 
```

非常渴望并且会引起问题。这将匹配任何`http://yoursite/anything/anything/*`. 因为您的 HomeController.Index 甚至正在执行，这意味着该路由已经与更贪婪的路由匹配（也许是默认路由？）。

所以有两件事——

1）您需要将错误处理程序路由向上移动。MVC 使用它在路由表中找到的第一个匹配路由。

2）让你的路线不那么贪婪，即：

```
routes.MapRoute(
    "ErrorHandler",
    "ErrorHandler/{action}/{errMsg}",
   new {controller="ErrorHandler", action = "Index", errMsg = UrlParameter.Optional }
   ); 
```

# haskell - yesod 持久性：在小村庄内获取实体值

> ID：14638682
> 
> 赞同：3
> 
> 时间：2013-02-01T02:14:03.570
> 
> 标签：haskell, persistent, yesod, hamlet

假设我的 config/models 文件如下所示：

```
Pet
    name Text
    owner OwnerId
Owner
    name Text 
```

我可以像这样得到宠物的名字：

```
 $forall Entity key pet <- pets
     <span>#{petName pet} 
```

但是我如何从宠物实体那里获得主人的名字呢？

换句话说，应该`foo`是以下内容：

```
 <span>#{ownerName $ foo $ petOwner pet} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:27:59.840

Yesod 不会像（例如）rails 那样为关系构建函数，所以你必须自己编写这种东西。

```
-- just one naive example
petOwnerName :: Pet -> Handler (Maybe Text)
petOwnerName p = do
    mo <- runDB $ get (petOwner p)
    return $ fmap ownerName mo 
```

请注意，这会在 Handler 中返回（并且它必须是由于所需的 DB 查询），这意味着您不能直接将其用作`foo`插值。

从字面上看您的示例，从模板中执行该操作正是您期望能够执行的操作。我要强调的是，这通常是一种设计气味，我建议您重组事物，以便您在处理程序中预先执行所有数据库查询，然后将模板需要的任何（纯）值直接传递给它。例如，您可以构建并传入一个`[(Pet,Owner)]`或`[(Owner, [Pet])]`。

我在我的一个站点中有一些[帮助](https://github.com/pbrisbin/renters-reality/blob/master/Helpers/Model.hs)程序，它们抽象了查询数据库中一对多关系的常用方法，并返回一个元组列表，就像`(parent, child)`我发现这是最有用的方法一样。

希望这可以帮助。

# optimization - 通过额外的优化标志减少 fortran 运行时间

> ID：14638688
> 
> 赞同：1
> 
> 时间：2013-02-01T02:15:49.550
> 
> 标签：optimization, fortran

一段时间以来，我一直在尝试优化我的程序。它有100多个子程序。到目前为止，我在英特尔 Fortran 编译器中使用的优化标志如下。

```
Optimization flag Time of completion
-c                     0.190 hr
-O3                    0.185 hr
-fast                  0.155 hr 
```

因此，使用优化标志“-fast”我能够获得 18.42% 的速度。我想知道是否有任何其他优化标志可以让我的程序运行得更快。因为现在，当我针对我的一个问题只使用 O2 标志运行我的程序时，大约需要 25 小时才能完成。我真的需要提高计算效率。

[我从https://support.scinet.utoronto.ca/wiki/images/7/77/Snug_techtalk_compiler.pdf](https://support.scinet.utoronto.ca/wiki/images/7/77/Snug_techtalk_compiler.pdf)找到了有关“-fast”标志的信息

我在 linux 中使用 intel fortran 13.1 编译器。

非常感谢任何帮助。

非常感谢。

最好的祝福，

贾巴巴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:36:06.347

您没有说您正在使用哪个编译器，而是在您的链接中暗示英特尔。借助 Intel ifort，您可以尝试`-parallel`获得自动并行化。过去某个时间点，编译器会尽力处理您的源代码，进一步减少运行时间将需要改进错误的编码决策或算法改进，我们都没有来自您的问题的信息来提供具体建议。“分析”是确定你的程序在哪里花费它的运行时间。如果程序只在子例程 A 中花费 1% 的运行时间，那么让子例程 A 的运行速度提高 10 倍是没有意义的……你将获得很少的整体改进。最好处理程序花费 80% 或 50% 或...运行时的子例程。

# java - Lucene 演示类的 Servlet 异常

> ID：14638696
> 
> 赞同：0
> 
> 时间：2013-02-01T02:16:34.303
> 
> 标签：java, servlets, lucene

我只是想从一个 servlet 调用基本的 Lucene 演示类，并得到这个异常：

> 严重：servlet SearcServlet 的 Servlet.service() 抛出异常 java.lang.ClassNotFoundException: org.apache.lucene.store.Directory at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645) at org.apache .catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491) 在 servlet.SearcServlet.doPost(SearcServlet.java:50)

我的小服务程序方法：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    PrintWriter out=response.getWriter();
    try {
        String[] arguments = new String[] {"123"};
        SearchFiles.main(arguments);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

当我从另一个 Java 类调用它时，搜索正在执行，但是当我从 servlet 执行它时，我得到了这个异常。我正在使用 lucene 演示搜索类，不包含其他功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:08:28.223

`java.lang.ClassNotFoundException`与Java Classpath 有关。`ClassNotFoundException`当 JVM 尝试在运行时动态加载一个类并且如果在类路径中找不到该类时，它会抛出`java.lang.ClassNotFoundException`。

由于您使用的是名为 Apache Lucene 的第三方 API，因此您需要将所有必需的*jar*文件放置到应用程序类路径中。

对于 Web 应用程序，默认类路径是**webapp**或**WebContent**`/WEB-INF/lib`目录下的 目录。

 ****在那里复制所有需要的*jar*文件，eclipse 会照顾好一切。****

# iphone - 想在uiwebview中加载手机版页面

> ID：14638697
> 
> 赞同：0
> 
> 时间：2013-02-01T02:16:40.570
> 
> 标签：iphone, uiwebview

基于这个问题

> [将 NSData 加载到 UIWebView](https://stackoverflow.com/questions/9475768/loading-nsdata-into-a-uiwebview)

我们可以默认加载移动版本视图吗？

但是如果我使用这种方法，它会自动在 uiwebview 中加载桌面视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:28:22.743

由服务器识别它正在与移动设备（手机）通话并调整数据。您可以在客户端做很多事情来解决这个问题。服务器应该能够使用与请求一起发送的用户代理来识别您的设备。您可以在请求数据时添加额外的自定义标头或参数；但这通常不需要。

您可能需要确保该`scalesPageToFit`属性在您的 web 视图上设置为 YES。这通常有助于页面的外观。

# vb.net - GetResponseStream 的读取行

> ID：14638700
> 
> 赞同：0
> 
> 时间：2013-02-01T02:16:58.807
> 
> 标签：vb.net, httpwebrequest, web-scraping

我正在使用以下内容获取网页：

```
Dim request As HttpWebRequest = DirectCast(WebRequest.Create(url), HttpWebRequest)
request.CookieContainer = logincookie
Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
Dim reader As New StreamReader(response.GetResponseStream())
Dim thesource As String = reader.ReadToEnd 
```

我正在尝试从源中提取数据。**thesource**成功保存了页面的源代码，但是，我无法使用 For Each 循环遍历每一行，因为它仅响应每个字符而不是每一行。

有人可以建议如何解决这个问题吗？谢谢大家，斯坦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:58:07.563

我看到三个选项。

选项 1\. 在 While 循环中逐行读取，而不是 For Each。如果一切都将在同一个函数中，请使用它。

```
Dim request As HttpWebRequest = DirectCast(WebRequest.Create(url), HttpWebRequest)
request.CookieContainer = logincookie
Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
Dim reader As New StreamReader(response.GetResponseStream())
Dim line As String = reader.ReadLine()

While line IsNot Nothing

    'Contents of your For Each loop go here

    line = reader.ReadLine()
End While 
```

选项 2：您至少拥有 Visual Studio 2012 并希望从此函数返回结果，以便可以在调用此代码的代码中使用 For Each 循环。

```
Public Iterator Function GetUrl(ByVal url As String) As IEnumerable(Of String)

    Dim request As HttpWebRequest = DirectCast(WebRequest.Create(url), HttpWebRequest)
    request.CookieContainer = logincookie
    Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
    Dim reader As New StreamReader(response.GetResponseStream())
    Dim line As String = reader.ReadLine()

    While line IsNot Nothing

        Yield line
        line = reader.ReadLine()
    End While
End Function 
```

像这样称呼它：

```
For Each line As String In GetUrl("http://example.com")
    '...
Next line 
```

选项 3：您想从函数返回，就像上一个选项一样，但您不能使用新的迭代器语言功能。

```
Public Sub GetUrl(ByVal url As String, ByVal lineAction As Action(Of String))

    Dim request As HttpWebRequest = DirectCast(WebRequest.Create(url), HttpWebRequest)
    request.CookieContainer = logincookie
    Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
    Dim reader As New StreamReader(response.GetResponseStream())
    Dim line As String = reader.ReadLine()

    While line IsNot Nothing
        lineAction(line)
        line = reader.ReadLine()
    End While
End Sub 
```

像这样称呼它：

```
GetUrl("http://example.com", _
   Sub(l)
       'Do stuff here
   End Sub) 
```

# objective-c - iOS 中的 __weak 和 __strong 属性有什么区别？

> ID：14638703
> 
> 赞同：4
> 
> 时间：2013-02-01T02:17:47.163
> 
> 标签：objective-c, ios6, weak-references, strong-references

在一个开源项目中有代码：

```
- (id) initWithContentPath: (NSString *) path parameters: (NSDictionary *) parameters
{
    NSAssert(path.length > 0, @"empty path");
    playPath = path;
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        _moviePosition = 0;
        _startTime = -1;
        self.wantsFullScreenLayout = YES;

        _decodeDuration = DEFAULT_DECODE_DURATION;
        _minBufferedDuration = LOCAL_BUFFERED_DURATION;

        _parameters = parameters;

        __weak KxMovieViewController *weakSelf = self;

        dispatch_async(dispatch_get_global_queue(0, 0), ^{

            NSError *error;
            KxMovieDecoder *decoder;
            decoder = [KxMovieDecoder movieDecoderWithContentPath:path error:&error];

            NSLog(@"KxMovie load video %@", path);

            __strong KxMovieViewController *strongSelf = weakSelf;
            if (strongSelf) {

                dispatch_sync(dispatch_get_main_queue(), ^{

                    [strongSelf setMovieDecoder:decoder withError:error];                    
                });
            }
        });
    }
    return self;
} 
```

我想知道一个类什么时候需要设置`self`为强或弱？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T03:29:50.417

当您想要确保您所引用的对象在您仍在使用它时不会被释放时，使用*强引用。*当您不关心您引用的对象是否被释放时，使用*弱引用。*`nil`当没有对该对象的强引用时，会自动设置弱引用。

基本上，只要至少有一个对象的强引用，它就不会被释放。当没有更多的强引用时，所有弱引用（如果有）都设置为`nil`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T07:49:11.943

如果您正在寻找对您发布的代码的清晰解释，我可以尝试提供帮助。我发布了一个类似的问题，并对正在发生的事情进行了假设，并等待答案来验证或使我的假设无效。

我的问题在这里：[解释 SDWebImage 代码中的 __weak 和 __strong 使用原因](https://stackoverflow.com/questions/14908057/explain-weak-and-strong-usage-reasons-in-sdwebimage-code)

总结一下，我的想法是：这段代码正在初始化一个类的实例。但它需要运行一个异步块。__weak 和 __strong 关键字用于确保实例在异步块运行时仍然有效。如果实例已被释放，则无需执行“setMovieDecoder”操作。

要回答您的特定问题，您希望在运行需要更新某些对象实例的异步块并且需要该实例来更新它时使用此 Code Pattern。不要在只是下载诸如同步引擎之类的东西的异步块周围使用此 Code Pattern。

**** 免责声明：检查我提炼的问题的答案，以期获得对我上面描述的代码模式的真正专家解释。希望我是对的。

# visual-studio-2010 - GLFW 和 glew 与 Visual Studios 2010 的链接错误

> ID：14638705
> 
> 赞同：3
> 
> 时间：2013-02-01T02:18:08.490
> 
> 标签：visual-studio-2010, opengl, linker, glut, glfw

简而言之：

```
error LNK2019: unresolved external symbol _glfwSetWindowTitle referenced in function _main
error LNK2019: unresolved external symbol __imp__glewInit@0 referenced in function _main
error LNK2001: unresolved external symbol __imp__glewExperimental
error LNK2019: unresolved external symbol _glfwTerminate referenced in function _main
error LNK2019: unresolved external symbol _glfwOpenWindow referenced in function _main
....etc.... 
```

在链接器->输入->附加依赖项中：

```
opengl32.lib
glfw.lib
glew32.lib
glu32.lib 
```

我一直在尝试我能想到的一切，但没有任何效果，所以其中一些甚至可能没有必要。

然后在其他库目录中，我有: `$(VSInstallDir)lib; $(Path)`，这两个都不是必需的。我在那里有库文件，并且还尝试将它们复制到项目目录和每个子目录，但仍然没有骰子。我很感激任何建议或见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T18:27:38.613

不确定 GLFW 的问题，但对于 GLEW，我必须定义 GLEW_STATIC。

转到 Project->Properties->C/C++->Preprocessor，然后在 Preprocessor Definitions 下添加 GLEW_STATIC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:58:03.217

也许您在添加`#define GLFW_DLL` 时添加了我可以重现错误。如果你想使用 GLFW 的 DLL 版本，你应该添加 GLFWDLL.lib。
检查[GLFW 2.7.4 发行说明](http://www.glfw.org/release-2.7.4.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T16:44:30.727

我有一个与此非常相似的问题。我可以在我的入口点编写代码以使用 GLFW 和 GLEW 来创建一个窗口，但是一旦我将它抽象到一个单独的文档（即 app.hpp）中，并将其包含到我的入口点，它就不会编译尽管代码是正确的。

> 错误 LNK2019：未解析的外部符号 __imp__glewInit@0 在函数 _main 中引用错误 LNK2001：未解析的外部符号 __imp__glewExperimental

我得到这两个错误是因为不知何故，GLEW 没有正确地包含在我的项目中。实际问题是链接器没有得到它需要的正确文档。即我使用 glew32s.dll 而不是 glew32.dll。

立即修复是停止使用 GLEW_STATIC 并使用 GLEW。我做了下面列出的相同步骤，而不是使用 glew32.dll 而不是静态 GLEW，这对我来说一切正常。

确保 GLFW 和 GLEW 的包含是在：

> 属性 > C/C++ > 常规 > 附加包含目录

然后您需要将库 GLFW 和 GLEW 链接到：

> 属性 > 链接器 > 常规 > 其他库目录

当然，请确保您告诉输入您要使用的 DLL（在这种情况下是 GLFW 和 GLEW）

> 属性 > 链接器 > 输入 > 附加依赖项

然后，您将刚刚告知的 GLFW 和 GLEW DLL 添加到附加依赖项中，并将它们粘贴到包含您的入口点 (main.cpp) 的文件夹中。

这解决了我所有的问题——这本质上是一个与你类似的问题。

希望这解决了你的问题。密切注意将这些 DLL 文件复制到包含入口点的文件夹中——这正是我的不足之处。

> opengl32.lib glfw3.lib glew32s.lib glew32.lib

# c - IPv6 地址的正则表达式

> ID：14638711
> 
> 赞同：3
> 
> 时间：2013-02-01T02:18:42.873
> 
> 标签：c, regex, networking, ipv6, flex-lexer

我有一个 IPv6 地址的正则表达式，如下所示

```
IPV4ADDRESS      [ \t]*(([[:digit:]]{1,3}"."){3}([[:digit:]]{1,3}))[ \t]*
x4               ([[:xdigit:]]{1,4})
xseq             ({x4}(:{x4}){0,7})
xpart            ({xseq}|({xseq}::({xseq}?))|::{xseq})
IPV6ADDRESS      [ \t]*({xpart}(":"{IPV4ADDRESS})?)[ \t]* 
```

它是正确的所有格式的 IPv6 地址，包括

```
1) non-compressed IPv6 addresses
2) compressed IPv6 addresses
3) IPv6 addresses in legacy formats.(supporting IPv4) 
```

传统格式的 IPv6 地址的理想示例是

```
2001:1234::3210:5.6.7.8

     OR
2001:1234:1234:5432:4578:5678:5.6.7.8

As you can see above there are 10 groups separated by either `":" or ".".` 
```

与普通 IPv6 地址中的 8 组相反。这是因为最后 4 组用“”分隔。应该压缩成 IPv6 地址的最低有效 32 位。因此我们需要 10 个组来满足 128 位。

但是，如果我使用以下地址格式

```
 2001:1234:4563:3210:5.6.7.8 
```

这里用“：”分隔的每组代表16位。最后四组用“。”分隔。表示 8 位。总位数为 64 + 32 = 96 位。缺少 32 位

正则表达式接受它作为有效的 IPv6 地址格式。我无法弄清楚如何修复正则表达式以丢弃这些值。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T04:07:56.760

[这是RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)中给出的 IPv6 地址的语法，随后在[RFC 5954](http://www.ietf.org/rfc/rfc5954.txt)中得到确认：

```
 IPv6address   =                             6( h16 ":" ) ls32
                /                       "::" 5( h16 ":" ) ls32
                / [               h16 ] "::" 4( h16 ":" ) ls32
                / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
                / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
                / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
                / [ *4( h16 ":" ) h16 ] "::"              ls32
                / [ *5( h16 ":" ) h16 ] "::"              h16
                / [ *6( h16 ":" ) h16 ] "::"

 h16           = 1*4HEXDIG
 ls32          = ( h16 ":" h16 ) / IPv4address
 IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
 dec-octet     = DIGIT                 ; 0-9
                / %x31-39 DIGIT         ; 10-99
                / "1" 2DIGIT            ; 100-199
                / "2" %x30-34 DIGIT     ; 200-249
                / "25" %x30-35          ; 250-255 
```

使用它，我们可以为 IPv6 地址构建符合标准的正则表达式。

```
dec_octet      ([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])
ipv4address    ({dec_octet}"."){3}{dec_octet}
h16            ([[:xdigit:]]{1,4})
ls32           ({h16}:{h16}|{ipv4address})
ipv6address    (({h16}:){6}{ls32}|::({h16}:){5}{ls32}|({h16})?::({h16}:){4}{ls32}|(({h16}:){0,1}{h16})?::({h16}:){3}{ls32}|(({h16}:){0,2}{h16})?::({h16}:){2}{ls32}|(({h16}:){0,3}{h16})?::{h16}:{ls32}|(({h16}:){0,4}{h16})?::{ls32}|(({h16}:){0,5}{h16})?::{h16}|(({h16}:){0,6}{h16})?::) 
```

免责声明：未经测试。

# c# - 将基于会话的数据发送到 SignalR Hub 的安全方法

> ID：14638713
> 
> 赞同：0
> 
> 时间：2013-02-01T02:19:17.907
> 
> 标签：c#, asp.net-mvc, signalr, signalr-hub

我知道 SignalR 不能很好地访问 Session 的原因，但是你们能向我解释一下将敏感数据发送到 SignalR Hub 的最佳方式吗？

这是我的问题。

我开发具有聊天功能（基于 xmpp）的网站，聊天客户端（agsxmpp）留在 SignalR 集线器的服务器端。问题是每次加载页面时我都应该将用户名/密码（加密）发送到 SignalR 集线器以登录到聊天客户端，或者如果它已经登录，它应该确保当前连接的客户端将获得正确的聊天客户端连接。

即使用户名/密码被加密，我仍然不满意这样做。我不确定我在做什么是正确的，请分享您对此的了解，或者如果有更好的方法可以做到这一点，我愿意征求意见。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:00:16.327

我刚刚发布了关于如何使用 SignalR 的只读会话的​​要点。[https://gist.github.com/4692934](https://gist.github.com/4692934)

# javascript - 不断更新来自两个滑块的值

> ID：14638715
> 
> 赞同：1
> 
> 时间：2013-02-01T02:19:30.777
> 
> 标签：javascript, jquery

我正在使用两个滑块创建一个储蓄计算器。有两个输入（学生人数和小组规模）和两个输出（节省金钱和节省时间）。我附上了一张图片以供参考。计算正在运行，但是当我移动滑块时，我必须点击刷新才能看到新的答案。相反，我希望我的答案随着我移动滑块而改变。

我在这个站点工作，但对计算进行了更改：http: [//egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/)

我希望它最终看起来如何：

![](../Images/0e69f20ac590d3fcf84f12bc824b1020.png)

```
<div class="layout">
    <div class="layout-slider" style="width: 20%">
        <input id="SliderSingle" type="slider" name="kids" value="20" />
        <script type="text/javascript" charset="utf-8">
            jQuery("#SliderSingle").slider({
                from: 1,
                to: 1000,
                step: 1,
                round: 1,
                format: {
                    format: '0',
                    locale: 'de'
                },
                dimension: ' Kids',
            });
            var numkids = $("#SliderSingle").slider("value");
        </script>
    </div>
    <div class="layout-slider" style="width: 20%">
        <input id="Slider" type="slider" name="group" value="20" />
        <script type="text/javascript" charset="utf-8">
            jQuery("#Slider").slider({
                from: 1,
                to: 5,
                step: 1,
                round: 1,
                format: {
                    format: '0',
                    locale: 'de'
                },
                dimension: ' Kids',
            });
            var groupsize = $("#Slider").slider("value");
        </script>
    </div>
    <script type="text/javascript" charset="utf-8">
        var timesaved = (numkids * 65) / groupsize;
        var moneysaved = timesaved * 60;
        document.write(timesaved + "hrs            ");
        document.write("   |   " + numkids + "   |   ");
        document.write("$" + moneysaved);
    </script>
    <div> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:29:06.717

围绕执行更新并获取值的 JavaScript 创建一个函数，然后在[滑块更改事件](http://api.jqueryui.com/slider/#event-change)上调用它。

```
function updateSavings() {
  var groupsize = $("#Slider").slider("value");
  var numkids = $("#SliderSingle").slider("value");
  var timesaved = (numkids*65) / groupsize;
  var moneysaved = timesaved * 60;

  document.write (timesaved + "hrs            ");
  document.write ("   |   " + numkids + "   |   ");
  document.write ("$" + moneysaved);
}

jQuery("#Slider").slider({
  change: function() { updateSavings(); }
});

jQuery("#SliderSingle").slider({
  change: function() { updateSavings(); }
}); 
```

您将需要更改该函数，以便它更新 DOM 元素而不是写入文档，否则每次更改滑块时它都会继续添加文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:30:34.020

你追求的是[jQuery Slider 插件：onchangestate](http://egorkhmelev.github.com/jslider/)
我还编辑了你的 javascript 代码。为了更好地使用滑块值`val`，例如：

```
jQuery("#Slider").val(); 
```

为了更新文本，更好地使用`text`，例如：

```
jQuery('.money_saved').text("$" + moneysaved); 
```

这是我使用过的代码，可以按照您的意愿工作：

**代码**

```
<div class="layout">

    <div class="layout-slider" style="width: 20%">
        <input id="SliderSingle" type="slider" name="kids" value="20" />
    </div>
    <div class="layout-slider" style="width: 20%">
        <input id="Slider" type="slider" name="group" value="20" />
    </div>

    <div class="time_saved"></div>
    <div class="money_saved"></div>
    <div class="number_kids"></div>

</div> 
```

**Javascript**

```
<script type="text/javascript" charset="utf-8">

  jQuery("#SliderSingle").slider({
    from: 1,
    to: 1000,
    step: 1,
    round: 1,
    format: {
      format: '0',
      locale: 'de'
    },
    dimension: ' Kids',
    onstatechange: function() {
      SliderChange();
    }
  });

  jQuery("#Slider").slider({
    from: 1,
    to: 5,
    step: 1,
    round: 1,
    format: {
      format: '0',
      locale: 'de'
    },
    dimension: ' Kids',
    onstatechange: function() {
      SliderChange();
    }
  });

  function SliderChange() {
    var numkids = jQuery("#SliderSingle").val();
    var groupsize = jQuery("#Slider").val();

    var timesaved = (numkids*65) / groupsize;
    var timesaved2decimal = Math.floor(timesaved * 100) / 100;

    var moneysaved = timesaved * 60;
    var moneysaved2decimal = Math.floor(moneysaved * 100) / 100;

    jQuery('.time_saved').text(timesaved2decimal + "hrs            ");
    jQuery('.number_kids').text("   |   " + numkids + "   |   ");
    jQuery('.money_saved').text("$" + moneysaved);
  }

</script> 
```

# android - listview 行布局的动态更改也会影响其他行

> ID：14638717
> 
> 赞同：2
> 
> 时间：2013-02-01T02:19:50.470
> 
> 标签：android, listview, listadapter

我正在使用 ListView，每个列表元素上有几个按钮。

当单击一行上的按钮时，该按钮应该消失。单击时单击的按钮会消失，这没关系。问题是其他一些列表元素按钮也消失了。

例如，当我单击第一个元素按钮时，它也会影响第 6、11、16 个元素中的按钮。第 7 个元素按钮也会影响第 2、第 12、第 17 个元素。

原因是适配器没有为数据中的所有元素创建列表元素。它只创建几个足以在屏幕上显示的对象。如图所示，当在列表中向下时，顶部元素成为最后一个元素，并且其值发生了变化。所以当我在第一个元素中隐藏按钮时，第 8 个元素中的按钮（数字来自图片）也被隐藏了。

![在此处输入图像描述](../Images/0a32590f95ba21f79bb06bb9fd36146f.png)

我可以避免使用已创建项目的副本并为每个元素创建新项目可能是解决方案，但在查看这么多行后会减慢应用程序的速度。

我一直在寻找几个小时，但找不到任何解决方案。我希望有人知道任何解决方案，或者至少向我建议一种不同类型的适配器、实现或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:39:53.350

您应该跟踪显示或隐藏天气的每个元素按钮状态。在`getView()`适配器的方法中检查当前元素状态，然后相应地隐藏或显示按钮。使用此方法时，请确保将每个按钮状态设置为不仅应隐藏的状态，以便在视图回收时，视图获取新项目状态而不是旧状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:08:22.167

阿马尔有你的部分答案。当您的适配器收到 getview 调用时，完全重新初始化重用的视图。

至于你的速度问题。听起来您希望您的适配器延迟加载其数据。您加载该数据的速度很慢。有些东西必须付出。此问题的常见解决方案是在后台线程中加载数据。

# javascript - JavaScript 变量未定义

> ID：14638724
> 
> 赞同：0
> 
> 时间：2013-02-01T02:20:32.820
> 
> 标签：javascript, variables

我正在创建一个 Java Script/HTML crapps 游戏。我让游戏像你掷骰子一样工作，它会告诉你你赢了、创造了点还是输了。显然这个游戏没有完成。我想在创建点的位置添加代码，然后再次掷骰子，直到达到点或掷出 7 点。这是我当前的代码：

```
 function game()
    {
        if(point==4,5,6,8,9,10)
        {
            if(total==point)
            {
                if(total==6,8)
                {
                    var temp= 2.2 * bet;
                    alert("You win $" + temp);
                }
                if(total==5,9)
                {
                    var temp= 2.5 * bet;
                    alert("You win $" + temp);
                }
                if(total==4,10)
                {
                    var temp= 3 * bet;
                    alert("You win $" + temp);
                }
            }
            if(total==7)
            {
                alert("You lose. Please start a New Round");
            }
            else
            {
                setTimeout(rolldice(),3000);
            }
        }
        if(total== 2,3,12)
        {
            alert("You lose. Please start a New Round");
        }
        if(total==4,5,6,8,9,10)
        {
            alert("Point Established. Roll again.");
            var point=total;
            setTimeout(rolldice(),3000);
        }
        if(total==7,11)
        {
            var temp= 2 * bet;
            alert("You win $" + temp);
        }
    } 
```

在掷骰子之前的函数称为 rolldice()。该功能在掷骰子并按我喜欢的方式显示图片时起作用。如果我在精神上通过脚本，我看不到任何错误。我经历了所有的基地 - 2-12。我不知道第一个选择是否会引发功能。此时文件中的点尚未创建。然而，它需要先通过，因为如果它第二次通过它，它就需要去那里。起初，我以为我没有调用此操作。但是我在函数的第一行添加了一个警报，当我触发这个函数时，警报就发生了。这告诉我我的功能有问题。我进入谷歌浏览器的控制台，它说在第 130 行有一个名为“未捕获的 rangeerror 最大调用堆栈”的错误，位于

> if(total==7)......alert("你松了")

当我用谷歌搜索这个时，我发现了很多东西，但由于我没有经验并且只是不使用 jquery 输入它，我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:16:54.093

您应该更改如下表达式：

```
if(total==5,9) 
```

像这样：

```
if(total==5 || total==9) 
```

如果你的意思是逻辑或。

# wpf - 绑定列表 > 到网格中的单元格

> ID：14638728
> 
> 赞同：0
> 
> 时间：2013-02-01T02:21:06.453
> 
> 标签：wpf, xaml

这是我的相关帖子中的一些上下文： [How to databind using to a 2d array of objects of different types](https://stackoverflow.com/questions/14589511/how-to-databind-using-to-a-2d-array-of-objects-of-different-types)

所以我有一个：

```
List<List<FarmyardSpace>> 
```

我希望将其表示为网格单元格中的按钮。我不能像在相关帖子中那样使用 UniformGrid，因为我需要定义网格中单元格的大小。理想情况下，我不想在我的数据中定义 Row 和 Column 字段（尽管也许这应该由 ViewModel 以某种方式处理？前几天刚开始学习这些东西，但我仍然在 WPF 和 MVVM 上纠结） .

这是我最新的尝试，它不起作用（实际上引发了异常），在这个特定的示例中，我依赖于 FarmyardSpaces 上存在的 Column 和 Row 属性：

```
<ItemsControl ItemsSource="{Binding FarmyardGrid}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ItemsControl ItemsSource="{Binding}">
                <ItemsPanelTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="15"/>
                            <RowDefinition />
                            <RowDefinition Height="15"/>
                            <RowDefinition />
                            <RowDefinition Height="15"/>
                            <RowDefinition />
                            <RowDefinition Height="15"/>
                        </Grid.RowDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="ContentPresenter">
                        <Setter Property="Grid.Row" Value="{Binding Row}"/>
                    </Style>
                </ItemsControl.ItemContainerStyle>
            </ItemsControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="15"/>
                </Grid.ColumnDefinitions>
            </Grid>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="ContentPresenter">
            <Setter Property="Grid.Column" Value="{Binding Column}"/>
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

我认为这不起作用的部分原因是外部 ItemsControl 包含的项目不是 FarmyardSpaces 而是 List，因此它们没有要绑定的 Column 属性。我还尝试使用内部 ItemsControl 中的 RowDefinitions 和 ColumnDefinitions。这消除了异常，但也不起作用，对我来说似乎是错误的，特别是考虑到在相关帖子中使用 UniformGrid 时有效的解决方案，其中列在外部 ItemsControl 中声明。

无论如何，我将不胜感激任何帮助解决这个问题，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:24:59.570

如果您的集合项上有属性，可以指定它们在网格中的位置，那显然是最简单的，这就是您现在设置的。如果没有，您可以使用转换器为您计算出每个项目的索引，然后将其分配为行/列值 - 它在两个维度上的工作方式相同。这是基本的转换器：

```
public class ItemToIndexConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        object item = values.FirstOrDefault();
        IList collection = values.OfType<IList>().LastOrDefault();

        if (collection == null || item == null)
            return 0;

        return collection.IndexOf(item);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

和您的 XAML 的修改版本（减少到 3x3）从父 ItemsControl 获取当前项目和完整集合以传递到转换器：

```
<ItemsControl ItemsSource="{Binding FarmyardGrid}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ItemsControl ItemsSource="{Binding}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="15"/>
                                <RowDefinition />
                                <RowDefinition Height="15"/>
                            </Grid.RowDefinitions>
                        </Grid>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="ContentPresenter">
                        <Setter Property="Grid.Row">
                            <Setter.Value>
                                <MultiBinding>
                                    <MultiBinding.Converter>
                                        <local:ItemToIndexConverter/>
                                    </MultiBinding.Converter>
                                    <Binding/>
                                    <Binding Path="ItemsSource"
                                             RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type ItemsControl}}"/>
                                </MultiBinding>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ItemsControl.ItemContainerStyle>
            </ItemsControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="15"/>
                </Grid.ColumnDefinitions>
            </Grid>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="ContentPresenter">
            <Setter Property="Grid.Column">
                <Setter.Value>
                    <MultiBinding>
                        <MultiBinding.Converter>
                            <local:ItemToIndexConverter/>
                        </MultiBinding.Converter>
                        <Binding/>
                        <Binding Path="ItemsSource"
                                 RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type ItemsControl}}"/>
                    </MultiBinding>
                </Setter.Value>
            </Setter>
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

# javascript - 在 knockoutjs 中将 2 路值添加到选择中

> ID：14638730
> 
> 赞同：2
> 
> 时间：2013-02-01T02:21:16.903
> 
> 标签：javascript, knockout.js

我需要帮助

我有 2 个选择框，我希望能够更改一个选择值，另一个将被计算和选择

问题是当我从一个选择框中选择一个值并且第二个选择框中不存在计算时，例如，如果我将风险金额设置为 700，则投资金额应为 1400，它不会显示在投资金额选择框中

我想要发生的是将其显示在选择框中，但不将其添加为选项

顺便说一句，选择应该双向工作

请帮忙

[http://jsfiddle.net/Z3mCH/](http://jsfiddle.net/Z3mCH/)

**HTML**

```
Invest Amount:
<select style="width:70px;height:22px;" data-bind="options: AvailableInvestAmount, 
                                                    optionsText: function(item) {
                                                        return '$' + item;
                                                    },
                                                    value: InvestAmount"></select>
<span data-bind="text: InvestAmount"></span>

<br />
<br />

Risk Amount:
<select style="width:70px;height:22px;" data-bind="options: AvailableRiskAmount, 
                                                    optionsText: function(item) {
                                                        return '$' + item;
                                                    },
                                                    value: RiskAmount"></select>
<span data-bind="text: RiskAmount"></span> 
```

**视图模型**

```
var viewModel = {
    RiskAmount: ko.observable(200)
};

viewModel.AvailableInvestAmount = ko.observableArray(['200', '400', '500', '600', '700', '800', '900', '1000', '1200', '1500', '2000', '3000', '5000']);
viewModel.AvailableRiskAmount = ko.observableArray(['200', '400', '500', '600', '700', '800', '900', '1000', '1200', '1500', '2000', '3000', '5000']);

viewModel.InvestAmount = ko.computed({
    read: function () {
        return this.RiskAmount() * 2;
    },
    write: function (value) {
        this.RiskAmount(value / 2);
    },
    owner: viewModel
});

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:40:46.453

[http://jsfiddle.net/vol7ron/RZjPx/](http://jsfiddle.net/vol7ron/RZjPx/)

所以看起来它工作正常，但是当它计算时，它试图找到另一个列表中不存在的值（x/2）。因此，您可以看到您的示例适用于其他列表`1000`中存在的值。`500`

通常，自动更新两者是一个坏主意 - 它通常会以类似无限循环的状态结束。相反，您可能需要考虑在点击时执行这些计算。查看 [awesome] 教程以[创建自定义绑定](http://learn.knockoutjs.com/#/?tutorial=custombindings)。

另外，我上面的小提琴显示了应该如何实现 viewModel。虽然您的方法可能有效，但如果您实现更接近文档的教学方式，则更容易遵循。我自己还在学习KO，所以我的立场可能会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:04:17.113

我设法让 i 使用 jquery 工作并绑定一个函数而不是计算绑定

[http://jsfiddle.net/abbasmhd/Z3mCH/14/](http://jsfiddle.net/abbasmhd/Z3mCH/14/)

```
var viewModel = {
    RiskAmount: ko.observable(200)
};

viewModel.AvailableInvestAmount = ko.observableArray(['200', '200', '400', '500', '600', '700', '800', '900', '1000', '1200', '1500', '2000', '3000', '5000']);
viewModel.AvailableRiskAmount = ko.observableArray(['200', '200', '400', '500', '600', '700', '800', '900', '1000', '1200', '1500', '2000', '3000', '5000']);

viewModel.CalculateInvestAmount = function () {
    var riskAmount = $('#RiskAmount').val();
    var investAmount = riskAmount * 2;
    $('#InvestAmount option:first').val(investAmount).text('$' + investAmount);
    $('#InvestAmount').val(investAmount);

};

viewModel.CalculateRiskAmount = function () {
    var investAmount = $('#InvestAmount').val();
    var riskAmount = investAmount / 2;
    console.log(investAmount);
    console.log(riskAmount);
    $('#RiskAmount option:first').val(riskAmount).text('$' + riskAmount.toFixed(0));
    $('#RiskAmount').val(riskAmount.toFixed(0));
};

ko.applyBindings(viewModel); 
```

# c++ - 查询vs2010属性表

> ID：14638735
> 
> 赞同：0
> 
> 时间：2013-02-01T02:21:42.927
> 
> 标签：c++, visual-studio-2010

我有一个来自我的导师的基本程序集。基本上有两个部分： 1\. 有一个库程序，学生应该先编译它。2\. 有几个示例程序应该使用库程序中的“支持”。

属性管理器的屏幕截图如下所示：![在此处输入图像描述](../Images/e357d368b4afdacbd17be251afb705e7.png)

我认为 Microsoft.Cpp.Win32.user 属性表可用于全局设置；

osgVirtualEnvironment 是库程序的名称。但似乎没有由 example1 解决方案命名的适当工作表？（因为我认为应该有一个用于本地包含和库设置的属性表）

此外，还有两个由库程序命名的属性表：osgVirtualEnvironment APP、osgVirtualEnvironment Library。看来我需要为两个属性表设置用户宏才能执行 #include<>

我的问题是：</p>

1.为什么有两个以库程序命名的属性表，而没有以示例程序命名的属性表？

2.osgVirtualEnvironment库的User Macro（一个属性表），名字是OSGVE_DIR，取值：$(SolutionDir)\..\..\..\..SolutionDir的路径就是osgVirtualEnvironment.sln的路径还是osgVirtualEnvironment库Debug.props的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:08:37.290

如果您的问题是“为什么我的项目没有属性表”，那么答案是：

这不是必需的。属性表使您可以在多个项目中重复使用属性。如果您只想编辑项目的属性，可以从主菜单“Project->Properties”中进行。

至于为什么那个库有两个属性表，我不知道。问你的老师，他是为你设置的，对吧？

# c++ - 在一系列值之间生成随机双精度

> ID：14638739
> 
> 赞同：5
> 
> 时间：2013-02-01T02:22:30.887
> 
> 标签：c++, algorithm, random, prng, genetic

我目前无法在 -32.768 和 32.768 之间生成随机数。它一直给我相同的值，但小数字段的变化很小。例如：27.xxx。

这是我的代码，任何帮助将不胜感激。

```
#include <iostream>
#include <ctime>
#include <cstdlib>

using namespace std;

int main()
{
    srand( time(NULL) );
    double r = (68.556*rand()/RAND_MAX - 32.768);
    cout << r << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T02:38:30.520

我应该提一下，如果你使用的是 C++11 编译器，你可以使用这样的东西，这实际上更容易阅读，更难搞砸：

```
#include <random>
#include <iostream>
#include <ctime>

int main()
{
    //Type of random number distribution
    std::uniform_real_distribution<double> dist(-32.768, 32.768);  //(min, max)

    //Mersenne Twister: Good quality random number generator
    std::mt19937 rng; 
    //Initialize with non-deterministic seeds
    rng.seed(std::random_device{}()); 

    // generate 10 random numbers.
    for (int i=0; i<10; i++)
    {
      std::cout << dist(rng) << std::endl;
    }
    return 0;
} 
```

正如bames53所指出的，如果你充分利用c++11，上面的代码可以变得更短：

```
#include <random>
#include <iostream>
#include <ctime>
#include <algorithm>
#include <iterator>

int main()
{
    std::mt19937 rng; 
    std::uniform_real_distribution<double> dist(-32.768, 32.768);  //(min, max)
    rng.seed(std::random_device{}()); //non-deterministic seed
    std::generate_n( 
         std::ostream_iterator<double>(std::cout, "\n"),
         10, 
         [&]{ return dist(rng);} ); 
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-24T22:19:56.427

此外，如果您不使用 c++ 11，则可以使用以下函数：

```
double randDouble(double precision, double lowerBound, double upperBound) {
 double random;
 random = static_cast<double>(((rand()%(static_cast<int>(std::pow(10,precision)*(upperBound - lowerBound) + 1))) + lowerBound*std::pow(10,precision)))/std::pow(10,precision);
 return random;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T02:26:34.657

我在`for`您的程序中添加了一个循环：

```
#include <iostream>
#include <ctime>
#include <cstdlib>

using namespace std;

int main () {
    srand(time (NULL));

    for (int i = 0; i < 10; ++i) {
        double r = ((68.556 * rand () / RAND_MAX) - 32.768);

        cout << r << endl;
    }

    return 0;
} 
```

示例输出：

```
 31.6779 
-28.2096
 31.5672
 18.9916 
-1.57149 
-0.993889
-32.4737
 24.6982
 25.936 
 26.4152 
```

对我来说似乎没问题。我已经为您在[Ideone](http://ideone.com/sAdt02)上添加了代码。

这里有四次运行：

```
 Run 1:
    -29.0863
    -22.3973
     34.1034
    -1.41155
    -2.60232
    -30.5257
     31.9254
    -17.0673
     31.7522
     28.227

Run 2:
    -14.2872
    -0.185124
    -27.3674
     8.12921
     22.4611
    -0.414546
    -21.4944
    -11.0871
     4.87673
     5.4545

Run 3:
    -23.9083
    -6.04738
    -6.54314
     30.1767
    -16.2224
    -19.4619
     3.37444
     9.28014
     25.9318
    -22.8807

Run 4:
     25.1364
     16.3011
     0.596151
     5.3953
    -25.2851
     10.7301
     18.4541
    -18.8511
    -0.828694
     22.8335 
```

也许您在两次运行之间至少没有等待一秒钟？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T02:31:31.353

因此，我认为这是“使用 time(NULL) 不是为开始靠近的运行播种随机数的好方法”的典型案例。从一个调用到下一个调用的变化并不多`time(NULL)`，因此随机数非常相似。这不是一个新现象——如果你用谷歌搜索“我的随机数不是很随机”，你会发现很多。

有几种不同的解决方案 - 获得微秒或纳秒时间将是最简单的选择 - 在 Linux`gettimeofday`中，作为结构的一部分，您将获得微秒时间。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T03:28:01.510

接缝似乎很明显，但有些例子另有说明......但我认为当你将 1 个 int 与另一个相除时，你总是得到一个 int？并且您需要在划分它们之前将每个 int 类型转换为 double/float。

即：double r = (68.556* (double)rand()/(double)RAND_MAX - 32.768);

此外，如果您每次调用 rand() 时都调用 srand()，则您会重置种子，这会导致每次返回的值相似，而不是“随机”值。

# iphone - iTunes 应用截图

> ID：14638742
> 
> 赞同：0
> 
> 时间：2013-02-01T02:23:05.950
> 
> 标签：iphone, app-store, app-store-connect, itunes

我有一个要上传到 iTunes Connect 的应用程序，并且我已经加载了五个高分辨率 iPhone 5 图像（因为它在 iPhone 5 上运行）。我知道我还必须加载 640x960 图像。但是我需要加载 5 个，才能在 iTunes 上看到 5 个图像。

在[这个](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html)Apple Developer 文档中，他们只有一张 iPhone 5 的图像。在这种情况下，只会加载一张图像，还是会加载其他 640x960 图像？它也会反过来工作吗？

我之所以问，主要是因为我只有 iPhone 5 来测试它，而且模拟器的图形甚至具有可比性，缩放图像会使它们看起来很奇怪。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:37:50.840

不，iTunes 只加载与其正在使用的设备的屏幕尺寸对应的屏幕截图。在计算机上，我很确定它会加载 3.5"。

# command - APDU 命令检查芯片在 PIV 应用程序和验证中的尝试次数

> ID：14638744
> 
> 赞同：1
> 
> 时间：2013-02-01T02:23:12.267
> 
> 标签：command, apdu

我正在使用智能卡芯片并使用它的 PIV 应用程序， `{00 A4 P1 P2 Le Data Lc}`所有的验证词都很好`{00 20 P1 P2 Le Data Lc}`，而且`{00 21 P1 P2 Le Data Lc}`.

但是你知道 piv 应用程序有一个失败尝试的计数器；在这种情况下，在锁定之前`00 20`有一个`3`并且`00 21`有尽可能多的失败尝试。`15`

我想知道是否有任何可用的 APDU 命令实际读取尝试次数，而不增加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T10:03:43.363

您可以发送没有命令数据的确切命令，即 Lc 为“00”。卡应返回 SW1-SW2='63 CX'，其中 X 表示剩余尝试次数。

APDU 应如下所示：

```
Command APDU: 00 20 P1 P2 00
Response APDU: 63 C3 
```

注意：我一直将它用于 INS '20'，但从未尝试过用于 INS '21'。

# java - Java获取整数输入法需要输入两次

> ID：14638745
> 
> 赞同：0
> 
> 时间：2013-02-01T02:23:20.927
> 
> 标签：java, input

这是菜单类

导入 java.util.Scanner；

公共类菜单 { 私有字符串 [] menu_options;

```
public Menu(String[] menu_options) {
    this.menu_options = menu_options;
}

public int getUserInput() {
    int i = 1;
    for (String s : this.menu_options) {
        System.out.println(i + ". " + s);
        i++;
    }

    int selection = getint_input(menu_options.length);
    return (selection);
}

private int getint_input(int max) {
    boolean run = true;
    int selection = 0;

    while (run) {
        System.out.print("Select an option: ");
        Scanner in = new Scanner(System.in);

        if (in.hasNextInt()) {
            int value = in.nextInt();
            if(value>=1 || value<=max){
                selection = value; //fixed this now working
                run = false;    
            }

        } else {
            System.out
                    .print("Invalid input. Please enter a integer between 1 and "
                            + max + ": ");

        }
    }
    return selection;
} 
```

}

这是我使用的菜单驱动程序

公共类 Menutester {

```
public static void main(String[] args) {
    String[] menuitems = new String[2];
    menuitems[0] = "option one";
    menuitems[1] = "option two";
    Menu tm = new Menu(menuitems);
    int choice  = tm.getUserInput();
    System.out.println("Got input");
} 
```

}

我第一次输入它根本不注册的东西，当我尝试在 eclipse 中调试它时，它给了我错误 FileNotFoundException(Throwable).(String) line: 195 在第一个输入。

这就是它返回的内容

1.  选项一
2.  选项二 选择一个选项：1（我输入了这个并按下了回车键）1（这里相同，只是它注册了输入）得到了输入

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T02:29:20.340

`nextInt`读取输入并将其从缓冲区中删除。如果不存储值，您就不能这样称呼它。

调用一次，存储值，然后执行所有需要的检查。

改变这个：

```
if (in.hasNextInt() && in.nextInt() >= 1 || in.nextInt() <= max) {
            selection = in.nextInt();
//... 
```

为了这：

```
if(in.hasNextInt()) {
   int selection = in.nextInt();
   if(selection >= 1 || selection <= max) {
       run = false;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:39:30.447

代替：

```
 if (in.hasNextInt() && in.nextInt() >= 1 || in.nextInt() <= max) {
        selection = in.nextInt();
        run = false;
        System.out.println(run);

    } 
```

作为：

```
int input = in.nextInt();
if (input  >= 1 || input  <= max) {
    selection = in.nextInt();
    run = false;
    System.out.println(run);
} 
```

再试一次。

# r - 如何仅堆叠数据框中的某些列？

> ID：14638747
> 
> 赞同：4
> 
> 时间：2013-02-01T02:23:47.730
> 
> 标签：r, reshape

我在数据框中有一些数据，格式如下：

```
A  B  C  V1  V2  V3
1  1  1  x   y   z
1  1  2  a   b   c
... 
```

其中 A,B,C 是因子，并且 A,B,C 的组合对于每一行都是唯一的。

我需要将一些列转换为因子，以实现如下形式：

```
A  B  C  V  val
1  1  1  V1 x
1  1  1  V2 y
1  1  1  V3 z
1  1  2  V1 a
1  1  2  V2 b
1  1  2  V2 c
... 
```

这似乎与[stack](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/stack.html)和[xtabs](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/xtabs.html)的倒数有关，但我不知道如何指定只有某些列应该“堆叠”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T02:55:00.197

在@AnandaMahto 来到这里并提供他的基本`reshape`解决方案之前，这是我的尝试：

```
dat <- read.table(text = 'A  B  C  V1  V2  V3
1  1  1  x   y   z
1  1  2  a   b   c',header= T)

expandvars <- c("V1","V2","V3")

datreshape <- reshape(dat,
                   idvar=c("A","B","C"),
                   varying=list(expandvars),
                   v.names=c("val"),
                   times=expandvars,
                   direction="long")

> datreshape
         A B C time val
1.1.1.V1 1 1 1   V1   x
1.1.2.V1 1 1 2   V1   a
1.1.1.V2 1 1 1   V2   y
1.1.2.V2 1 1 2   V2   b
1.1.1.V3 1 1 1   V3   z
1.1.2.V3 1 1 2   V3   c 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T02:28:14.727

使用`reshape2`包

```
dat <- read.table(text = 'A  B  C  V1  V2  V3
1  1  1  x   y   z
1  1  2  a   b   c',header= T)
library(reshape2)
melt(dat,id.vars = c('A','B','C'))
 A B C variable value
1 1 1 1       V1     x
2 1 1 2       V1     a
3 1 1 1       V2     y
4 1 1 2       V2     b
5 1 1 1       V3     z
6 1 1 2       V3     c 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T04:56:03.043

## `stack`

你是对的，这`stack`是一种可能性，但你可能错过了文档中的关键行`stack`：

> 请注意，堆栈适用于向量（由 is.vector 确定）：非向量列（例如，因子）将被忽略（从 R 2.15.0 开始出现警告）。

那么，我们该如何进行呢？

这是您的数据：

```
dat <- read.table(text = 'A  B  C  V1  V2  V3
    1  1  1  x   y   z
    1  1  2  a   b   c',header= T) 
```

在这里，我们将因子转换为`as.character`：

```
dat[sapply(dat, is.factor)] = lapply(dat[sapply(dat, is.factor)], as.character) 
```

下面是我们如何指定哪些列`stack`：

```
stack(dat[4:6])
#   values ind
# 1      x  V1
# 2      a  V1
# 3      y  V2
# 4      b  V2
# 5      z  V3
# 6      c  V3 
```

但是，我们仍然需要为第 1-3 列“扩展”您的行。请参阅[此处](https://stackoverflow.com/a/2894825/1270695)了解如何执行此操作。

有了这些信息，我们就可以使用`cbind`来获得想要的结果。

```
cbind(dat[rep(row.names(dat), 3), 1:3], stack(dat[4:6]))
#     A B C values ind
# 1   1 1 1      x  V1
# 2   1 1 2      a  V1
# 1.1 1 1 1      y  V2
# 2.1 1 1 2      b  V2
# 1.2 1 1 1      z  V3
# 2.2 1 1 2      c  V3 
```

## `xtabs`

您也是对的，这`xtabs`似乎是一种可能的可能性，但`xtabs`实际上期望与您提供的*相反。*也就是说，当你指定一个公式时，它期望左边的项目是数字，右边的项目是因子。因此，如果您的数据被交换，您当然*可以*使用`xtabs`.

这是一个演示（它之所以有效，是因为您使用的是一个简单的示例，我们可以轻松地`match`将“字母”转换为“数字”）。

```
dat2 <- dat # Make a copy of "dat"
# Swap out dat 4-6 with numbers
dat2[4:6] <- lapply(dat2[4:6], function(x) match(x, letters))
# Swap out dat 1-3 with letters
dat2[1:3] <- lapply(dat2[1:3], function(x) letters[x])
# Our new "dat"
dat2
#   A B C V1 V2 V3
# 1 a a a 24 25 26
# 2 a a b  1  2  3
data.frame(xtabs(cbind(V1, V2, V3) ~ A + B + C, dat2))
#   A B C Var4 Freq
# 1 a a a   V1   24
# 2 a a b   V1    1
# 3 a a a   V2   25
# 4 a a b   V2    2
# 5 a a a   V3   26
# 6 a a b   V3    3 
```

* * *

换句话说，您选择的工具可能是正确的，但您的数据也需要采用工具期望的形式。

`reshape`但是，我不确定当与朋友们有更好的解决方案时，你为什么要完成我展示的所有工作；）

* * *

### 好晚更新。。。

您还可以`merged.stack`从我的“splitstackshape”包中查看：

```
library(splitstackshape)
merged.stack(dat, var.stubs = "V", sep = "NoSep")
#    A B C .time_1 V
# 1: 1 1 1      V1 x
# 2: 1 1 1      V2 y
# 3: 1 1 1      V3 z
# 4: 1 1 2      V1 a
# 5: 1 1 2      V2 b
# 6: 1 1 2      V3 c 
```

或`gather`来自“tidyr”：

```
library(dplyr)
library(tidyr)
# gather(dat, var, val, V1:V3)
dat %>% gather(var, val, V1:V3) 
#   A B C var val
# 1 1 1 1  V1   x
# 2 1 1 2  V1   a
# 3 1 1 1  V2   y
# 4 1 1 2  V2   b
# 5 1 1 1  V3   z
# 6 1 1 2  V3   c 
```

# ios - UISwitch - 我如何不让它动画

> ID：14638749
> 
> 赞同：0
> 
> 时间：2013-02-01T02:24:34.573
> 
> 标签：ios, uiswitch

我有一个 UISwitch，它在打开时显示密码并在关闭时隐藏它。单击它时，会弹出一个 AlertView 要求输入密码然后确认。我的问题是当用户单击它/输入错误密码时，开关仍会切换为显示 OFF 文本，而不是仍处于 ON 状态。我需要它仍然读取 ON 状态/文本，直到用户在 alertview 上成功输入正确的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:40:17.273

界面中的第 1 步执行此操作

```
IBOutlet UISwitch *passwordSwitch; 
```

第2步将您的开关设置为上述

第 3 步根据您的逻辑，如果密码失败，请执行此操作

```
 passwordSwitch.on=NO; 
```

编辑：

如果成功，请执行此操作

```
 passwordSwitch.on=YES; 
```

# key - 如何在谷歌数据存储中获取实体的密钥

> ID：14638751
> 
> 赞同：0
> 
> 时间：2013-02-01T02:24:43.170
> 
> 标签：key, entity, google-cloud-datastore

我是 Google App Engine Datastore 的新手，无法理解实体键。我一直让数据存储区自动为实体分配密钥。我想要做的是检索实体的密钥，以便将其作为参数传递给另一个方法。当我将实体添加到数据库时，有没有办法在不手动设置密钥的情况下获得它。到目前为止，我一直在通过我编写的函数查找实体，该函数通过查询用户的特定电子邮件地址从数据库中获取用户。任何帮助将非常感激。

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:54:47.323

使用 key() 方法。

例如，如果您有一个 Photo 类的实例照片，那么您可以通过 photo.key() 检索密钥

# c# - 匿名类型，什么时候有用？

> ID：14638757
> 
> 赞同：1
> 
> 时间：2013-02-01T02:25:57.840
> 
> 标签：c#

这种匿名类型如何在现实生活中有用？为什么匿名是好事？

```
// sampleObject is an instance of a simple anonymous type.
var sampleObject = 
    new { FirstProperty = "A", SecondProperty = "B" }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:31:34.510

来自 MSDN[匿名类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)：

> 匿名类型通常用于查询表达式的 select 子句，以返回源序列中每个对象的属性子集。
> 
> ...
> 
> 最常见的场景是使用其他类型的属性初始化匿名类型。

有关更多信息，您可以阅读[查询表达式中的匿名类型](http://blogs.msdn.com/b/charlie/archive/2007/09/26/choosing-not-to-use-anonymous-types-in-query-expressions.aspx)。

另外，考虑阅读[SO 匿名类型的目的是什么？](https://stackoverflow.com/questions/1028117/what-is-the-purpose-of-anonymous-types)

* * *

考虑[How to: Join by Using Composite Keys (C# Programming Guide) 中](http://msdn.microsoft.com/en-us/library/bb907099.aspx)的一个示例：

```
var query = from o in db.Orders
            from p in db.Products
            join d in db.OrderDetails
                on new { o.OrderID, p.ProductID } 
            equals new { d.OrderID, d.ProductID } 
            into details
            from d in details
            select new { o.OrderID, p.ProductID, d.UnitPrice }; 
```

> 此示例说明如何执行要使用多个键来定义匹配项的连接操作。这是通过使用复合键来完成的。您可以将复合键创建为匿名类型或命名类型，并使用要比较的值。

* * *

以及使用匿名类型对 dara 进行分组以封装包含多个值的键的示例，该键[使用 LINQ to SQL 中的匿名类型按多列分组](http://www.manojn.com/2009/06/group-by-multiple-columns-using-anonymous-types-in-linq-to-sql/)：

```
var months = from t in db.TransactionData
             group t by new { month = t.Date.Month, year = t.Date.Year } 
                into d
             select new { t.Key.month, t.Key.year }; 
```

或[更好的如何：分组查询结果（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb545971.aspx)：

> 使用匿名类型是因为不需要使用完整的对象来显示结果
> 
> 请注意，匿名类型中的属性成为 Key 成员上的属性，并且可以在执行查询时按名称访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:31:19.607

通常，当您使用匿名类型初始化变量时，您使用 var 将变量声明为隐式类型的局部变量。不能在变量声明中指定类型名称，因为只有编译器才能访问匿名类型的基础名称。有关 var 的更多信息，请参阅[隐式类型局部变量（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb384061.aspx)。

# sql - Sybase 将问题从 float 转换为 varchar

> ID：14638758
> 
> 赞同：2
> 
> 时间：2013-02-01T02:26:00.083
> 
> 标签：sql, stored-procedures, sap-ase

首先，我需要提到我当前的 sybase db 版本是**Adaptive Server Enterprise 12.5.4**。`varchar`我的目标是通过 sybase convert 函数将浮点数据类型转换`concat`为这些变量中的几种，格式化并存储为字符串类型。

不幸的是，事实并非如此。简单地使用`convert(varchar(20), float_var)`or`cast()`函数不能正确返回精确值。

例如， ...

```
declare @float_var float
begin
    select @float_var =345.1237    --from table actually
    select convert(varchar(20),@float_var)     --return 345.1236999999
end 
```

返回的错误字符串结果偶尔会有`99999`或`00001`后缀。

我尝试了许多功能，包括指定精度，但仍有一些情况无法解决。sybase 内部函数并不完全适用于它。

我想这是使用 Sybase DB 时的一个常见问题，但是在 serach 中找到的答案很少。在我过去的经验中，Sybase 存储过程游戏玩家总是在运行时具有某种容忍度，并在遇到错误时进行内部修复。这个问题让我对 Sybase 内部的工作方式感到困惑。任何建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:10:12.590

有几个可能的解决方案。

首先，让我们先尝试将浮点数转换为十进制，然后再转换为 varchar。

```
select cast(cast(@float_var as decimal(13,4)) as varchar) 
```

或者，这就是我的 ASE 记忆可能会让我失望的地方，就像这样使用 STR 函数：

```
Select ltrim(str(@float_var, 25, 5)) 
```

您必须修剪输出作为 STR 函数在结果左侧填充空格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:24:40.653

这对我有用：

```
declare @float_var float
begin
    select @float_var = 96.332 
    select cast(cast(@float_var as decimal(13,4)) as varchar)     -- Returns 96.3320
end

declare @float_var float
begin
    select @float_var = 345.1237
    select cast(cast(@float_var as decimal(13,4)) as varchar)     -- Returns 345.1237
end 
```

# java - 尝试更新我的 JFrame，为什么无法重新绘制工作？

> ID：14638767
> 
> 赞同：1
> 
> 时间：2013-02-01T02:27:29.997
> 
> 标签：java, swing, user-interface, jframe, jlabel

我将运行程序，但是当我激活事件时， JFrame 不会更新（它只会删除 JLabel ），除非我手动拖动窗口来调整它的大小，即使在事件发生后调用 repaint() 也是如此。怎么了？

```
public Driver() {
    setLayout( new FlowLayout() );

    pass = new JPasswordField( 4 );
        add( pass );

    image = new ImageIcon( "closedD.png" );
    label = new JLabel( "Enter the password to enter the journal of dreams" , image , JLabel.LEFT );
        add( label );

    button = new JButton( "Enter" );
        add( button );

    event e = new event();
        button.addActionListener( e );

    setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    setVisible( true );
    setSize( 1600/2 , 900/2 );
    setTitle( "Diary" );
}

//main method
//
//
public static void main( String[] args ) {
    win = new Driver();
}

public class event implements ActionListener {
    private boolean clickAgain = false;

    public void actionPerformed( ActionEvent e ) {
        if ( passEquals( password ) && clickAgain == false ) {
            image2 = new ImageIcon( "openD.png" );
            remove( label );

            label = new JLabel( "Good Job! Here is the journal of dreams." , image2 , JLabel.LEFT );
                add( label );

                clickAgain = true;
        }

        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T02:28:58.247

每次添加或删除组件时，都必须告诉其容器重新布局它所包含的当前组件。你通过调用`revalidate()`它来做到这一点。然后，您将`repaint()`在 revalidate 调用之后调用以使容器重新绘制自身。

```
public void actionPerformed( ActionEvent e ) {
    if ( passEquals( password ) && clickAgain == false ) {
        image2 = new ImageIcon( "openD.png" );
        remove( label );

        label = new JLabel( "Good Job! Here is the journal of dreams.", 
             image2 , JLabel.LEFT );
            add( label );

            clickAgain = true;
    }
    revalidate(); // **** added ****
    repaint();
} 
```

注意：您的问题的措辞好像您假设我们知道您要做什么。下次请给我们更多信息。问题越好，信息越丰富，答案就越好，信息越丰富。

编辑 2：
我想知道您是否可以稍微简化您的代码。与其删除和添加 JLabel，不如简单地设置当前 JLabel 的文本和图标：

```
public void actionPerformed( ActionEvent e ) {
    if ( passEquals( password ) && clickAgain == false ) {
        image2 = new ImageIcon( "openD.png" );
        // remove( label );  // removed

        label.setText( "Good Job! Here is the journal of dreams.");
        label.setIcon(image2);
    }
} 
```

# c# - 从指定点退出 Android 应用程序

> ID：14638776
> 
> 赞同：0
> 
> 时间：2013-02-01T02:29:09.003
> 
> 标签：c#, android, mono, back-button

好的，首先，让我说，我已经在这里和其他地方阅读了很多主题，但似乎无法在这里找到答案。我意识到“退出”和应用程序不受欢迎，但这是我的场景，我该怎么办？

*   首次启动，客户看到登录屏幕，可选择记住我
*   登录后，菜单活动被激活
*   我希望后退按钮从菜单中退出应用程序，而不是返回应用程序启动的登录活动。如果他们需要返回登录屏幕，我有一个“注销”菜单选项，否则我只想从菜单活动中退出应用程序。

有没有办法，在我的覆盖中`OnBackButtonPressed`，我可以触发应用程序退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:40:11.780

为什么不在 Intent 中使用标志开始活动 C？我认为您不需要覆盖`OnBackButtonPressed`. 对于一个相当简单的解决方案来说太复杂了。

例如：

```
Intent showActivity = new Intent(Sender.this, Receiver.class);
showActivity.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(showActivity); 
```

这样，当用户按下后退按钮时，他将*退出*应用程序并且不会返回到*登录屏幕*。

如果您仍然需要覆盖*Back Button*，请尝试以下示例：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Intent a = new Intent(this,A.class);
    a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(a);
    return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

[**在这里为bitstar**](https://stackoverflow.com/users/880047/bitestar)提供这段代码的道具： [https ://stackoverflow.com/a/9398171/450534](https://stackoverflow.com/a/9398171/450534)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:17:10.397

我已经阅读了您的所有要求，您只需要操纵应用程序的流程，如下所示即可实现。希望对您有所帮助。

在启动应用程序时将启动的登录屏幕内，

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    UTILS.Log_e(TAG, "onCreate");

        initialize();

    //check for configuration
//here you need to check,whether user has been logged in already or not
    if(!CONSTANTS.isConfigured)
    {
//display login dialog if user has not been logged in already

        displayLoginDialog();
    }
    else
    {

//move to Home screen if user has already logged in
        i.setClass(mContext, HomeActivity.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(i);
        finish();
    }

} 
```

在主屏幕内，

```
 @Override
public void onBackPressed() {
    exitApp();
}

private void exitApp()
{
    i.setClass(mContext, ExitActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(i);
    finish();
}

//call logout function as per your requirement

    private void logout()
{
    i.setClass(mContext, LoginActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(i);
    finish();

} 
```

在您的 ExitActivity 中，

```
 public class ExitActivity extends Activity{

    private static final String TAG = "ExitActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        moveTaskToBack(true);
        finish();
        }

} 
```

**注意：** 在上面的代码中，我使用`i.setClass(context,destination_class_name)`了 which`i`的实例`Intent`。

在您的清单中，

```
 <activity
        android:name=".ui.LoginActivity"
        android:label="@string/app_name" 
        android:windowSoftInputMode="stateHidden|adjustPan">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".ui.HomeActivity" >
    </activity>
    <activity
        android:name=".ui.ExitActivity" >
    </activity> 
```

如果您遇到任何问题或者您不理解上述代码中的任何一点，请告诉我。

# spring - spring如何编写配置来支持2个数据库

> ID：14638778
> 
> 赞同：0
> 
> 时间：2013-02-01T02:29:15.757
> 
> 标签：spring, hibernate, h2

我尝试使用以下配置配置数据源----> mysql另一个数据源---->内存中的h2（嵌入式）：

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    p:driverClassName="com.mysql.jdbc.Driver" p:url="jdbc:mysql://localhost/item"
    p:username="" p:password="" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
    p:dataSource-ref="dataSource">
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</prop>
            <prop key="net.sf.ehcache.configurationResourceName">/ehcache.xml</prop>
        </props>
    </property>
    <property name="packagesToScan" value="*************" />
</bean>

<!-- Spring transaction management -->
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    p:sessionFactory-ref="sessionFactory" />

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="org.h2.tools.Server" class="org.h2.tools.Server" scope="singleton" factory-method="createTcpServer"
      init-method="start" depends-on="org.h2.tools.Server-WebServer">
    <constructor-arg value="-tcp,-tcpAllowOthers,true,-tcpPort,9092"/>
</bean>

<bean id="org.h2.tools.Server-WebServer" class="org.h2.tools.Server" scope="singleton" factory-method="createWebServer" init-method="start">
    <constructor-arg value="-web,-webAllowOthers,true,-webPort,8082"/>
</bean>

<!-- notice that loading the Driver as a bean is unnecessary is most cases! u could safely remove this and the depends-on in the next bean -->

<bean id="H2DatabaseJDBCDriver" class="org.h2.Driver" scope="singleton" init-method="load" depends-on="org.h2.tools.Server"/>

<bean id="H2InMemoryDB"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource"
    depends-on="org.h2.tools.Server">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:mem:appdb1;DB_CLOSE_DELAY=-1" />
    <!-- ;TRACE_LEVEL_FILE=3;TRACE_LEVEL_SYSTEM_OUT=3 -->
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean>

<bean id="H2InMemoryDBPool" class="org.apache.commons.pool.impl.GenericObjectPool">
    <!-- Two connections: InMemoryEntityManagerFactory and transactionManager -->
    <property name="minIdle" value="1"/>
    <property name="maxWait" value="10"/>
    <property name="maxActive" value="10"/>
    <property name="maxIdle" value="10"/>
    <property name="minEvictableIdleTimeMillis" value="300000"/>
    <property name="timeBetweenEvictionRunsMillis" value="60000"/>
</bean>

<bean id="H2InMemoryDBDSConnFactory" class="org.apache.commons.dbcp.DataSourceConnectionFactory">
    <constructor-arg><ref bean="H2InMemoryDB"/></constructor-arg>
</bean>

<bean id="H2InMemoryDBPoolableConnFactory" class="org.apache.commons.dbcp.PoolableConnectionFactory">
    <constructor-arg index="0"><ref bean="H2InMemoryDBDSConnFactory"/></constructor-arg>
    <constructor-arg index="1"><ref bean="H2InMemoryDBPool"/></constructor-arg>
    <constructor-arg index="2"><null/></constructor-arg>
    <constructor-arg index="3"><null/></constructor-arg>
    <constructor-arg index="4"><value>false</value></constructor-arg>
    <constructor-arg index="5"><value>true</value></constructor-arg>
</bean>

<bean id="pooledInMemoryDB" class="org.apache.commons.dbcp.PoolingDataSource" depends-on="H2InMemoryDBPoolableConnFactory">
    <constructor-arg><ref bean="H2InMemoryDBPool"/></constructor-arg>      
</bean>   

 <bean id="sessionFactory2"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
    p:dataSource-ref="pooledInMemoryDB">
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
            <prop key="hibernate.show_sql">false</prop>
        </props>
    </property>
    <property name="packagesToScan" value="********" />

</bean>

    <bean id="transactionManager2"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    p:sessionFactory-ref="sessionFactory" /> 
```

但它不起作用。

所以我的问题是：

我需要使用 2 个会话工厂还是使用动态数据源开关？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:53:15.270

我用

```
 <jdbc:embedded-database id="embeddedDatasource" type="DERBY">
    <jdbc:script location="classpath:test.sql"/>
 </jdbc:embedded-database> 
```

反而

有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:56:47.100

我确实发现了一个可能导致您代码中断的错字。

您的第二个事务管理器指的是第一个 sessionFactory。我认为您希望它引用第二个事务管理器。尝试：

```
<bean id="transactionManager2"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    p:sessionFactory-ref="sessionFactory2" /> 
```

关于您是否必须使用此处所述的某种“动态数据源开关”的[问题](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing)，多个数据源应该没问题。

# windows - 用户注销时进程是否退出？

> ID：14638779
> 
> 赞同：0
> 
> 时间：2013-02-01T02:29:16.160
> 
> 标签：windows

在 Windows 中（通常），当相应用户注销时（但计算机仍处于打开状态？），特定用户拥有的进程是否会退出？

Windows / Windows Server 的行为是否一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:39:31.130

是的，由用户（或由系统代表用户）启动的进程在该用户注销时终止。如果他们只是“切换用户”或“锁定”计算机，那么进程会像往常一样在内存中运行（尽管他们可能会失去队列中的优先级，以便由同时登录的其他用户或代表其他用户发起的进程）。

据我所知，这种行为在 Windows Server 上是相同的，尽管我认为当用户未主动登录时，优先级队列更加偏向于系统进程。

# ruby-on-rails - Rspec 控制器测试 - 如何将参数传递给我正在测试的方法

> ID：14638783
> 
> 赞同：1
> 
> 时间：2013-02-01T02:29:52.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara

我想在我的控制器中测试这个方法。

```
def fetch_match_displayed_count(params)
  match_count = 0
  params.each do |param|
    match_count += 1 if param[1]["result"] && param[1]["result"] != "result"
  end
  match_count
end 
```

这是我到目前为止写的测试。

```
describe "fetch_match_displayed_count" do
  it "should assign match_count with correct number of matches" do
    params = {"result_1"=>{"match_id"=>"975", "result"=>"not_match"}, "result_2"=>{"match_id"=>"976", "result"=>"match"}, "result_3"=>{"match_id"=>"977", "result"=>"not_sure"}, "result_4"=>{"match_id"=>"978", "result"=>"match"}, "result_5"=>{"match_id"=>"979", "result"=>"not_match"}, "workerId"=>"123", "hitId"=>"", "assignmentId"=>"", "controller"=>"mt_results", "action"=>"create"}
    controller.should_receive(:fetch_match_displayed_count).with(params)
    get :fetch_match_displayed_count, {params:params}
    assigns(:match_count).should == 5
  end
end 
```

我的问题似乎出在这一行`get :fetch_match_displayed_count, {params:params}` 该方法期望参数，但结果为零。

我有两个问题。

1.  该方法是否应该在帮助程序中而不是在控制器本身中（根据 Rails 约定）？

2.  如何提交获取请求并通过`params`测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:41:39.737

作为一般规则，您应该测试类的公共接口。对于控制器，这意味着您测试操作，而不是辅助方法。

您应该能够通过设置一个或多个调用适当操作的单独测试用例来完成这项工作，然后使用消息期望来测试是否使用正确的参数调用了辅助方法 - 或测试辅助方法方法做它应该做的（设置正确的实例变量/重定向/等）。

# r - R中两个变量的直方图

> ID：14638788
> 
> 赞同：11
> 
> 时间：2013-02-01T02:30:54.160
> 
> 标签：r, plot, histogram, data-visualization

我有两个变量要在直方图中进行比较，如下图所示。对于直方图的每个 bin，显示了两个变量的频率，这使得比较它们变得容易。

![在此处输入图像描述](../Images/6aa97fdc5913c49f2c45f3b3659d6c03.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T02:44:59.577

您可以使用该`add`参数来`hist`（参见`?hist`, `?plot.histogram`）：

```
hist(rnorm(1000, mean=0.2, sd=0.1), col='blue', xlim=c(0, 1))
hist(rnorm(1000, mean=0.8, sd=0.1), col='red', add=T) 
```

![在此处输入图像描述](../Images/6ee6b8bc1d06a146d98fe8f390254e69.png)

为了找出`add`参数，我注意到在`?hist`参数中`...`说这些是传递给的参数`plot.histogram`，并`add`记录在`?plot.histogram`. 或者，底部的示例之一`?hist`使用该`add`参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T02:38:37.217

你可以使用`prop.table`并`barplot`喜欢这个

```
somkes <- sample(c('Y','N'),10,replace=T)
amount <- sample (c(1,2,3),10,replace=T)
barplot(prop.table(table(somkes,amount)),beside=T) 
```

![在此处输入图像描述](../Images/b930f356f727cbaeea96a94c3bff7e81.png)

# objective-c - 反转精灵动画

> ID：14638793
> 
> 赞同：0
> 
> 时间：2013-02-01T02:31:19.677
> 
> 标签：objective-c, cocos2d-iphone

按照建议对我的代码进行调整后，我的动画现在可以工作了。现在，我想问一下如何反转精灵的动作。我试图让精灵移动，就好像风在里面一样。这是我现在的代码：

```
-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super's" return value
if( (self=[super init]) ) {
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    self.isTouchEnabled = YES;

    CCSprite *black = [CCSprite spriteWithFile:@"b.png"];
    black.position = ccp(100, 160);
    black.scaleX = 100 / black.contentSize.width;
    black.anchorPoint = ccp(0.03, 0);

    CCSpriteFrameCache *frame = [CCSpriteFrameCache sharedSpriteFrameCache];
    [frame addSpriteFramesWithFile:@"bLongAnimation.plist"];
    CCSpriteBatchNode *bHair = [CCSpriteBatchNode batchNodeWithFile:@"bLongAnimation.png"];
    [self addChild:bHair];

    [self addChild:black z:1 tag:1];

    //Animation
    NSMutableArray *animateBlackHair = [NSMutableArray arrayWithCapacity:10];
    for (int i = 1; i < 10; i++)
    {
        NSString *animBlackHair = [NSString stringWithFormat:@"b%i.png", i];
        CCSpriteFrame *blackFrame = [frame spriteFrameByName:animBlackHair];
        [animateBlackHair addObject:blackFrame];

        //I added this code block thinking it might work
        for(i = 10; i > 1; i--)
        {
            NSString *revAnimation = [NSString stringWithFormat:@"bRightLong%i.png", i];
            CCSpriteFrame *revFrame = [frame spriteFrameByName:revAnimation];
            [animateBlackHair1 addObject:revFrame];
        }
    }
    CCAnimation *blowHair = [CCAnimation animationWithSpriteFrames:animateBlackHair delay:0.1];
    CCAction *blowingHair = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:blowHair]];
    [black runAction:blowingHair];        
}
return self;} 
```

我的猜测没有奏效，所以我想知道如何在完成第一个动作后立即反转动作？

更新：没关系，我想通了。我只是移动了 for 循环，以便在另一个循环之外反转动作。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:53:35.593

尝试将动画的延迟设置为 0 以外的值。尝试 0.1 或 0.4 或其他值。如果您将其设置为零，我认为动画不会运行，如果运行，它会运行得太快而无法看到。

# symfony - 为学说集合中的每个实体构建一个具有复选框的表单

> ID：14638794
> 
> 赞同：13
> 
> 时间：2013-02-01T02:31:23.630
> 
> 标签：symfony, symfony-forms, symfony-2.2

我正在为过滤的实体集合显示一个 html 表，并且我想在每一行中显示一个复选框，作为表单的一部分，它将所选实体添加到会话 var。

我在想每个复选框都应该有实体 id 作为它的值，我会从表单字段数据中得到一个 id 数组（好的，所以值应该是实体的间接引用，但是为了简单）。

我尝试使用单个实体类型字段创建表单类型，映射到实体的 id 属性并嵌入到另一个具有集合类型字段的表单类型中。

```
class FooEntitySelectByIdentityType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('foo_id', 'entity', array(
            'required'  => false,
            'class'    => 'MeMyBundle:FooEntity',
            'property' => 'id',
            'multiple' => true,
            'expanded' => true
        ));
    }

# ... 
```

和

```
class FooEntitySelectionType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('identity', 'collection', array(
            'type'   => new FooEntitySelectByIdentityType,
            'options'  => array(
                'required' => false,
                'multiple' => true,
                'expanded' => true,
                'attr'     => array('class' => 'foo')
            ),
        ));
    }

# ... 
```

在控制器中，表单是使用实体集合作为初始数据创建的

```
$form = $this
    ->createForm(
        new \Me\MyBundle\Form\Type\FooEntitySelectionType,
        $collection_of_foo
    )
    ->createView()
; 
```

呈现表单时，标识字段只有一个标签，但没有小部件。

甚至可以以这种特殊方式使用实体和集合类型字段吗？如果是这样，我可能做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T19:11:43.250

我想这会回答你的问题。

忘记`FooEntitySelectionType`. 添加一个`property_path`字段选项`FooEntitySelectByIdentityType`并将`data_class`选项设置为`null`：

```
class FooEntitySelectByIdentityType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('foo_id', 'entity', array(
            'required'      => false,
            'class'         => 'MeMyBundle:FooEntity',
            'property'      => 'id',
            'property_path' => '[id]', # in square brackets!
            'multiple'      => true,
            'expanded'      => true
        ));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class'      => null,
            'csrf_protection' => false
        ));
    }

# ... 
```

并在您的控制器中，构建`FooEntitySelectByIdentityType`：

```
$form = $this
    ->createForm(
        new \Me\MyBundle\Form\Type\FooEntitySelectByIdentityType,
        $collection_of_foo
    )
    ->createView()
; 
```

然后在接收 POSTed 数据的控制器动作中：

```
$form = $this
    ->createForm(new \Me\MyBundle\Form\Type\FooEntitySelectByIdentityType)
;
$form->bind($request);
if ($form->isValid()) {
    $data = $form->getData();
    $ids  = array();
    foreach ($data['foo_id'] as $entity) {
        $ids[] = $entity->getId();
    }
    $request->getSession()->set('admin/foo_list/batch', $ids);
} 
```

最后，在你的树枝模板中：

```
{# ... #}
{% for entity in foo_entity_collection %}
    {# ... #}

    {{ form_widget(form.foo_id[entity.id]) }}

    {# ... #} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-12T09:23:23.917

如果有人正在寻找 Symfony >=2.3 的解决方案

你必须改变这个：

```
 $data = $form->getData();
    $ids  = array();
    foreach ($data['foo_id'] as $entity) {
        $ids[] = $entity->getId();
    } 
```

对此：

```
 $data = $form['foo_id']->getData();
    $ids = array();
    foreach ($data as $entity) {
        $ids[] = $entity->getId();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-18T14:00:29.460

我创建了一个[symfony 包](https://github.com/abdielcs/ExpandedCollectionBundle)，用于以可配置的方式将实体集合呈现为复选框表。虽然问这个问题已经有一段时间了，但我希望这可以帮助其他人解决同样的问题。

# c# - 初始化列表 用字符串

> ID：14638797
> 
> 赞同：0
> 
> 时间：2013-02-01T02:31:35.597
> 
> 标签：c#

用字符串初始化列表的最简单方法是什么？说我有一个

```
String a="a"
List<string> b; 
```

如何用字符串“a”初始化 b？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T02:33:07.803

```
var b = new List<string> {a}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:37:10.870

```
 String a = "a";
  List<string> b = new List<string>{a}; 
```

# python - Django：如何将相同的功能扩展到多个视图？

> ID：14638799
> 
> 赞同：1
> 
> 时间：2013-02-01T02:31:48.357
> 
> 标签：python, django, django-templates, django-views, template-inheritance

我有一个在网站的许多部分使用的父模板，称为`base.html`. 该模板包含许多功能组件，例如触发不同表单的按钮（在模式窗口内）允许用户上传不同类型的内容等。我希望用户能够从站点的几乎任何部分单击这些按钮（来自所有继承自`base.html`) 的模板。

我编写了一个处理站点主页的视图`HomeView`（它呈现`homepage.html`，它继承自`base.html`）。我在这个视图中写了一堆功能，它处理所有的上传。

由于许多模板将继承自`base.html`，因此具有所有相同的功能，我是否必须将数百行代码从 复制并粘贴`HomeView`到呈现所有其他页面的视图中？

一定有更好的方法，对吧？

如何确保父基础模板中的功能对于调用从该基础模板继承的子模板的所有视图都适用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:39:27.620

您可以将所有代码行`HomeView`放在一个单独的函数中`func`
，让我们`func`返回一个包含所有需要的上下文变量的字典，
并在需要时调用它，这样您`HomeView`就会看起来像这样：

```
def HomeView(request):
  dict = func(request)
  ... # rest of code that is not common with other views 
```

你`func`看起来像：

```
def func(request):
  #all repeated code
  #put all needed variables in a dictionary and return it
  dict = {'var1': 4, 'var2': "a String" ...}
  return dict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:21:21.587

我相信将您的上传相关功能分离到单独的视图中将是更好的方法。这样，您的所有模板（继承自`base.html`）都将引用适当的视图进行上传。

您可以使用`HTTP_REFERER`标头从上传视图重定向到适当的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:34:24.453

1.  使用`TemplateResponse`而不是`HttpResponse`in `home_view`。这样，您将能够更新上下文并在响应上切换模板。

2.  `home_view`像这样在其他视图中调用：

    ```
    from django.template.response import TemplateResponse

    def other_view( request ):

        #produce other_context

        t = home_view( request )
        t.context.update( other_context )
        t.template = 'other_template.html'
        return t 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:37:38.053

您可以通过在每个视图中要求唯一值或使用请求会话来在一个视图中呈现多个模板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:27:24.243

在 base.html 上使用 ajax 加载功能部分。

这样，您就有了一个专门处理这些功能的 view_method。

# ruby - 寻找在 ruby 中找到匹配后替换文件中的文本

> ID：14638811
> 
> 赞同：0
> 
> 时间：2013-02-01T02:34:17.250
> 
> 标签：ruby

我在 .txt 文件中有以下格式的数据：

`parameter1=12345 parameter2=23456 parameter3=23456`等等..列表很长。

我找到了一种方法来匹配`parameter1`等并将其替换为其他数字。

```
modified_file=File.read("modified_file.txt",)
modified_file=modified_file.to_s.sub(/#{parameter1}=/, "some text of your choice") 
```

上面的正则表达式只会将值替换为，`parameter1=`但我打算更改以下`parameter1=`.

我想编写一个正则表达式，它可以匹配数据`=`并替换之后的数据。

例如：我想替换`12345`to`abcde`和`23456`to`xyzab`所以最终结果是：

`parameter1=abcde parameter2=xyzab`等等..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:05:28.530

`/(?<=parameter1=)\S+/`

你想要的被称为“ [lookbehind](http://www.ruby-doc.org/core-1.9.3/Regexp.html#label-Anchors) ”。

# android - 编舞（697）：跳过152帧！调试日志

> ID：14638812
> 
> 赞同：0
> 
> 时间：2013-02-01T02:34:20.417
> 
> 标签：android, andengine

我正在用 andengine 构建一个新游戏，出于某种原因，我不断在 logcat 中得到这个调试语句：

```
01-31 21:29:50.503: I/Choreographer(697): Skipped 152 frames!  The application may be doing too much work on its main thread. 
```

我不太确定在我的游戏过程中究竟是什么导致了这个错误。我正在检查很多碰撞，但直到游戏场景开始后它们才开始。

我还注意到在我的 Galaxy S3 上，当滑动更改主屏幕并拉下顶部的任务栏时，游戏会导致我的手机“闪烁”。

我认为这个错误与它有关，但我不确定。你们有什么感想？

此外，每次用户进入另一个级别时，我都会重新初始化碰撞检测器。但我不会取消注册或停止最后一次开始的碰撞。我认为当新的初始化时它们会自动清理。

你们有什么感想？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:01:03.670

听起来您知道消息在告诉您什么，即您的帧速率滞后。你的后续问题，“为什么？” 如果没有更多信息，将无法回答。您提供了一些可能性：是碰撞处理吗？是处理不必要的碰撞吗？是不是场景转换有问题？答案是，也许。也许是这些事情中的任何一个。也许是别的东西。目前我们所能做的就是猜测，因为我们没有看代码。

但好消息是，您并非没有追索权！您需要做的是测试您的代码并找出瓶颈所在。一个好的开始是在您怀疑是问题的代码块之间进行一些调用以计算毫秒数。你可能会发现，你认为我们很慢的事情实际上发生得很快，相反，你认为很快的事情正在慢慢发生。专注于后者！在那里打更多电话，看看到底哪里需要更长的时间。并查看您的代码，看看为什么它可能在那里运行缓慢。那里有很多对象被实例化吗？它是从磁盘读取的吗？等等。

当您准备好使用它们时，有一些很棒的第三方工具可以更深入地进行测试，但值得花一些时间来计时并首先检查您自己的代码。作为作者，您具有怀疑问题可能出在哪里的优势。开始调查！

旁注，我会提供一些第三方工具的链接，但我是从按摩浴缸写的。我稍后会更新。

# ruby-on-rails - ActionController::RoutingError (没有路由匹配 {:controller=>"users", :action=>"profile"})

> ID：14638814
> 
> 赞同：1
> 
> 时间：2013-02-01T02:34:38.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我继承了一个旧的 Rails 应用程序，我真的在为这个错误而苦苦挣扎：

```
ActionController::RoutingError 
    (No route matches {:controller=>"users", :action=>"profile"}):
app/views/layouts/application.html.erb:59:in
    `_app_views_layouts_application_html_erb__105<snip>'
app/controllers/users_controller.rb:40:in `index' 
```

我仅在以管理员身份登录时出现此错误，而不是以任何其他用户身份登录。

这是我的路线.rb

```
Vvault::Application.routes.draw do
  resources :orders

  devise_for :users

  resources :videos

  resources :users

  root :to => "users#index"

  match 'users/:id/profile' => 'users#profile', :as => :user_profile
end 
```

我认为这是来自 users_controller.rb 的相关片段：

```
def index
  if current_user.admin?
    # admin sees all users
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  else
    redirect_to "/users/" + current_user.id.to_s() and return
  end
end 
```

我认为这是来自 application_html.erb 的相关片段：

```
<div class="sidebar">
    <% if user_signed_in? %>
      <%= link_to "My account", user_profile_path, :method => :get %>
    <% end %>
 </div> 
```

如果我注释掉 application_html.erb 的第三行，我可以以管理员身份登录，但显然配置文件链接不会为任何用户呈现。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:15:19.823

尝试：

```
<%= link_to "My account", user_profile_path(current_user.id), :method => :get %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:39:28.147

您的`user_profile_path`助手需要`id`传入一个，因为相应的路由有一个`:id`参数。

错误消息告诉您，在没有任何其他参数的情况下，该控制器/操作组合不存在路由。

或者，您需要定义一个*不带*参数的路由`id`，控制器会自动加载当前用户的配置文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:40:06.410

您需要将 id 提供给`user_profile_path`. 但是由于该路由指向用户的帐户，因此设置 id 没有意义，因为它应该始终是当前用户（这是您的意图吗？）。如果是这种情况，那么您可以将路线重写为：

```
match 'users/profile' => 'users#profile', :as => :user_profile 
```

如果没有，则为您的路线的辅助方法提供一个 id。

# c# - 使用按位运算符设置选项的正则表达式

> ID：14638816
> 
> 赞同：0
> 
> 时间：2013-02-01T02:34:43.280
> 
> 标签：c#, regex, options

[http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx)

> **指定选项**
> 
> options 参数是 RegexOptions 枚举值的按位或组合。
> 
> ```
> RegexOptions options = RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace; 
> ```

这是什么意思？例如，为什么要使用按位运算符，而不是使用数组有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:38:57.710

这实际上是枚举标志。每个枚举条目都与一个数字相关联，并且使用按位运算符，您实际上是在对每个枚举名称后面的数字进行操作。

有关更多信息，请参阅此内容：[[Flags] 枚举属性在 C# 中的含义是什么？](https://stackoverflow.com/questions/8447/enum-flags-attribute)

# c - C：如何按最小数字对文件进行排序（使用结构）？

> ID：14638822
> 
> 赞同：1
> 
> 时间：2013-02-01T02:35:08.917
> 
> 标签：c, sorting, structure

所以我想做的是找出如何按最小数字对文件进行排序。数字在结构内。该程序有点像记分牌。您可以添加一个名称并包含分数（在这种情况下，它是关于跑步者和所用时间）。

添加名称后，程序按最佳时间将分数和跑步者排序到文件中。

我无法弄清楚如何：

1.  按最低/最高对它们进行排序。
2.  排序后保持跑步者姓名与他们的分数保持不变。

到代码：

```
#include <stdio.h>
#include <string.h>

struct kilpailijat     //The structure im using
{
char nimi[43+1];
float aika;
};

int main() {
int i, maara;
struct kilpailijat henkilo[50];
FILE *tulos;
size_t ln;

while (1 != 0) {
    printf("Montako kilpailijaa haluat lisätä? (max 50): "); //How many runners
    scanf_s("%d", &maara);        // User input of how many runners
    while (getchar() != '\n');    

    if (maara > 50) {   //Checks that the ammount of runners is no more then 50
        printf("Yritit lisätä liian monta kilpailijaa.\n");
    } else if (maara < 0) { //And no less then 0
        printf("Mielenkiintoista. Jos yrittäisit uudelleen.\n");
    } else if (maara == 0) { // Zero Quits the program
        return 0;
    } else {
        break;
    }
}

for (i = 0; i < maara; i++){  // Start loop to add runners and their score.
    printf("\nAnna kilpailijan nimi: ");
    fgets(&henkilo[i].nimi[0], 43, stdin); //Add name of runner

    ln = strlen(henkilo[i].nimi) - 1; //Remove newline off of fgets()
    if (henkilo[i].nimi[ln] == '\n'){
        henkilo[i].nimi[ln] = '\0';
    }

    printf("Kilpailijan aika: ");  //Add score
    scanf_s("%f", &henkilo[i].aika);
    while (getchar() != '\n');
}

if ((tulos = fopen("tulos.txt", "w")) == NULL){ // Check if file opens
    printf("Tiedoston avauksessa tapahtui virhe.\n");
}

for (i = 0; i < maara; i++){ //Writes Name and Score to file.
    fprintf(tulos, "%s\t%.1f\n", henkilo[i].nimi, henkilo[i].aika);
}
fclose(tulos);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:43:56.087

使用[qsort](http://www.cplusplus.com/reference/cstdlib/qsort/)并实现自定义比较方法。

```
int compare (const void * a, const void * b)
{
    float f1 = ((struct kilpailijat *)a)->aika;
    float f2 = ((struct kilpailijat *)b)->aika;
    int result = 0;
    if (f1 < f2) 
    {
        result = -1;
    }
    else if (f1 > f2) 
    {
        result = 1;
    }
    return result;
} 
```

进而：

```
qsort (henkilo, maara, sizeof(kilpailijat), compare); 
```

* * *

**更新**：

女士们，先生们，我很自豪能举出一个[有效的例子](http://ideone.com/UJRCWQ)。

它使用三种我不太熟悉的语言……芬兰语、英语和 C！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T05:06:34.743

以 Anthony Accioly 的答案为基础，但使用我最喜欢的运算符。

```
int compare (const void * a, const void * b)
{
    float f1 = ((struct kilpailijat *)a)->aika;
    float f2 = ((struct kilpailijat *)b)->aika;
    return f1 < f2
        ? -1
        : f1 > f2
        ? 1
        : 0;
} 
```

# ios - 使用日期选择器加载 xib 文件很慢

> ID：14638831
> 
> 赞同：2
> 
> 时间：2013-02-01T02:37:12.063
> 
> 标签：ios, objective-c, ipad

我有一个带有 2 个日期选择器的 xib 文件，其中有几个标签和一个段控件。我正在将 xib 的关联视图控制器加载到弹出窗口中，并且仅在您第一次打开它时加载速度非常慢（加载约 5 秒）。因此，我在 open popover 方法及其父级 init 方法之外引用了日期选择器控制器的视图，并且确实加载父视图控制器现在加载速度很慢，而 open popover 方法运行得很快。所以我得出的结论是 xib 文件连接出口/加载速度很慢。

从日期选择器控制器的 viewDidLoad 和 init 方法中删除所有内容并没有帮助。

删除 1 个日期选择器大大提高了速度，添加更多日期选择器似乎根本不会影响速度。

发生在 ios 5.1 和 6.0 上。

我可以通过调度另一个线程在启动时加载它来解决它，但无论如何我知道为什么这会很慢？我已经看到其他应用程序在一个视图中使用多个日期选择器没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T16:53:10.820

解决方案只是在应用程序启动时加载它并继续重复使用相同的控制器，这将导致一个小的启动延迟，但它比无响应的控件更好，所以在你的应用程序委托中调用如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  //only use this one controller, allocing another one will be just as slow
  self.datecontrollerwith2pickers = [[datecontrollerwith2pickers alloc] init];
  //forces xib to load
  self.datecontrollerwith2pickers.view;
} 
```

加载缓慢绝对是Apple代码中某处的错误。

# c# - 多个作家，一个读者，哪个收藏

> ID：14638834
> 
> 赞同：8
> 
> 时间：2013-02-01T02:37:23.740
> 
> 标签：c#, multithreading, concurrency

我的情况是这样的：

多个线程必须同时写入同一个集合（add 和 addrange）。物品的顺序不是问题。当所有线程都完成（加入）并回到我的主线程时，我需要以 foreach 样式快速读取所有收集的数据，因为所有线程都已完成，因此不需要实际锁定。

在“过去”中，我可能会在列表上为此使用读写器锁，但是对于新的并发集合，我想知道是否有更好的选择。我只是不知道哪个因为大多数并发集合似乎假设读者也在并发线程上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T03:03:04.743

我不相信你想使用`System.Collections.Concurrent`. 这些通常具有额外的开销以允许并发读取。

除非您有很多争用，否则您最好锁定一个简单的`List<T>`并添加它。当列表调整大小时，您将有少量开销，但这种情况很少见。

但是，在这种情况下，我可能会做的只是添加到`List<T>` *每个线程*而不是共享线程，然后在处理结束时合并它们，或者简单地迭代每个集合中的所有元素。

您可以在准备好读取时使用 a`ConcurrentBag`然后调用`.ToArray()`or `GetEnumerator()`（绕过每次读取的惩罚），但您可能会发现插入速度比您在简单`List`. 这实际上取决于争用的数量。`ConcurrentBag`分区非常好，但正如您所指出的，它适用于并发读取和*写入*。

与往常一样，对您的特定情况进行基准测试！多线程性能高度依赖于实际使用中的许多因素，诸如数据类型、插入次数等因素会极大地改变结果 - 少数现实值得一加仑理论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T04:21:27.720

> 物品的顺序不是问题。当所有线程都完成（加入）并且我回到我的主线程时，我需要读取所有收集的数据

您根本没有声明对线程安全集合的要求。共享一个集合是没有意义的，因为你从来没有在写作的同时阅读。所有写入都发生在同一个集合上也没关系，因为顺序无关紧要。这也不重要，因为无论如何顺序都是随机的。

所以只需给每个线程自己的集合来填充，不需要锁定。然后一个一个地迭代它们，不需要锁定。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T02:44:44.247

尝试[`System.Collections.Concurrent.ConcurrentBag`](http://msdn.microsoft.com/en-us/library/dd381779.aspx).

从集合的描述：

> 表示一个线程安全的、无序的对象集合。

我相信这符合您处理多个线程和不重要的项目顺序的标准，稍后当您回到主线程时，您可以快速 foreach 迭代集合并对每个项目采取行动。

# c - 无法将所有 8 个字节放入 unsigned long long

> ID：14638835
> 
> 赞同：1
> 
> 时间：2013-02-01T02:37:29.810
> 
> 标签：c, hex

我正在尝试将 16 个十六进制值放入可视 C 中的 unsigned long long

```
unsigned long long test = 0x1A2A00DABABA7890;
printf("long long value %X\n", test);
printf("%d", sizeof(test)); 
```

我的输出显示它是 8 个字节，但在输出时只存储前 4 个字节

```
long long value BABA7890
8 
```

我是否误解了这是如何工作的？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T02:40:02.693

您的`printf`格式说明符与您的类型不匹配，这会导致未定义的行为。尝试：

```
printf("long long value %llX\n", test); 
```

`%d`结果的格式也是错误的`sizeof`。你应该在`%zu`那里使用。

如果您打开一些警告设置，您的编译器可能会警告您（`clang`例如，默认情况下）：

```
example.c:6:30: warning: format specifies type 'unsigned int' but the argument
      has type 'unsigned long long' [-Wformat]
    printf("long long value %X\n", test);
                            ~^     ~~~~
                            %llX
example.c:7:14: warning: format specifies type 'int' but the argument has type
      'unsigned long' [-Wformat]
    printf("%d", sizeof(test));
            ~^   ~~~~~~~~~~~~
            %ld
2 warnings generated. 
```

编辑：我在您的问题中注意到您正在使用 Visual C. `%z`是 C99 功能，您的编译器可能不支持。在这种情况下，您应该检查文档以查看要使用的正确格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:39:58.527

an 的正确格式说明符`unsigned long long`是`llX`（即 ell-ell，而不是十一）。

从标准：

> **ll (ell-ell)：**指定后面的`d`, `i`, `o`, `u`, `x`, or`X`转换说明符适用于`long long int`or`unsigned long long int`参数；或者后面的`n`转换说明符适用于指向`long long int`参数的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T02:42:08.373

它正在正确存储它，但您没有正确打印它

对于 unsigned long long，您需要使用 %llX

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T02:44:32.800

您需要指定整数的宽度。默认情况下，printf 将假定它是 32 位。使用 I64 前缀，如下所示：

printf("long long value %I64X", test);

这是 Visual C/C++ 的文档：

[http://msdn.microsoft.com/en-us/library/vstudio/56e442dc(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/56e442dc(v=vs.100).aspx)

# php - PHP 将数组传递给函数

> ID：14638837
> 
> 赞同：1
> 
> 时间：2013-02-01T02:37:41.693
> 
> 标签：php, arrays, function, multidimensional-array

如何将数组传递给函数？

假设我有这个多维数组：

```
$TheArray = (
array("Value 1 0","Value 1 1","Value 1 2"),
array("Value 2 0","Value 2 1","Value 2 2"),
array("Value 3 0","Value 3 1","Value 3 2")
); 
```

而不是这样做...

```
for ($i=0; $i<=(count($TheArray)-1); $i++)
{
echo $TheArray[$i][0] . " " . $TheArray[$i][1] . " " . $TheArray[$i][2] . "<br />";
} 
```

我想做这个...

```
function DoStuffWithTheArray($SubArr)
{
echo $SubArr[0] . " " . $SubArr[1] . " " . $SubArr[2] . "<br />";
}

for ($i=0; $i<=(count($TheArray)-1); $i++)
{
DoStuffWithTheArray($TheArray[$i]);
} 
```

希望你能说出我想要做什么，但我不知道如何让它工作。当我按照我想要的方式尝试时，所有的值都是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:08:51.307

我认为，您首先需要学习如何创建数组；

```
// instead of this
$TheArray = (...
// you can create an array so
$TheArray = array(... 
```

二、改这种风格请看： http: [//php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

```
for ($i = 0; $i < count($TheArray); $i++) 
```

并回答；

```
$array = array(
    array("Value 1 0", "Value 1 1", "Value 1 2"),
    array("Value 2 0", "Value 2 1", "Value 2 2"),
    array("Value 3 0", "Value 3 1", "Value 3 2")
);

function fn($a) {
    print "$a[0], $a[1], $a[1]\n";
}

foreach ($array as $a) fn($a); 
```

```
值 1 0，值 1 1，值 1 1
值 2 0，值 2 1，值 2 1
值 3 0，值 3 1，值 3 1

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:43:04.140

只需将数组传入：

```
function DoStuffWithTheArray($array) {
    $array[0]...$array[n];
} 
```

那应该行得通。不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:22:33.673

如果要更改数组的内容，则需要通过引用传递它：

[通过引用传递参数](http://www.php.net/manual/en/functions.arguments.php#functions.arguments.by-reference)

# sql - SQL Server：通过平面文件导入数据失败错误 0xc02020a1：数据流任务 1：数据转换失败

> ID：14638840
> 
> 赞同：3
> 
> 时间：2013-02-01T02:37:57.863
> 
> 标签：sql, sql-server-2012

我正在尝试将 CSV 文件（逗号分隔）上传到 SQL Server 2012（与 11.0.2100.60）表。为了测试目的，我创建了一个*所有*列都等于的表，`nvarchar(MAX)`因为我只想将数据放入数据库中进行测试。不幸的是，我不断收到以下错误：

> *消息错误 0xc02020a1：数据流任务 1：数据转换失败。列“列 2”的数据转换返回状态*
> *值 4 和状态文本“文本被截断或一个或多个字符在目标代码页中不匹配。”。（SQL Server 导入和导出向导）*
> 
> *错误 0xc020902a：数据流任务 1：“Source - Book2_txt.Outputs[Flat File Source Output].Columns[Column 2]”失败，因为发生了截断，并且“Source - Book2_txt.Outputs[Flat File Source Output] 上的截断行处置].Columns[Column 2]" 指定截断失败。指定组件的指定对象发生截断错误。（SQL Server 导入和导出向导）*
> 
> *错误 0xc0202092：数据流任务 1：处理数据行 3 上的文件“C:\Users\shalinp\Desktop\MISO\junk\Book2.txt”时出错。（SQL Server 导入和导出向导）*
> 
> *错误 0xc0047038：数据流任务 1：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。Source - Book2_txt 上的 PrimeOutput 方法返回错误代码 0xC0202092。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。（SQL Server 导入和导出向导）*

我的文件很大，但我创建了一个新文件，其中只有前 4 行数据要测试。不幸的是，stackoverflow 不允许您上传文件，所以我无法提供它（如果我弄错了，请纠正我？）。

但这里是它的剪切和粘贴：

```
1/1/2010,ARNLD HAZELTON BASE,HAZLTON HAZLTARNOL34_1 1 (LN/ALTW/ALTW),ACTUAL,1,($23.18)
1/1/2010,MANISTIQ_T1_T1_XF,MANISTIQ T1 T1 (XF/WEC/*),,1,($12.47)
1/1/2010,ONT-NYIS BASE,BECK2 BECK2GPACKAR_1 A (LN/ONT/NYISO); BECK2 BECK_BNIAG_3_1 A (LN/ONT/NYISO); BECK2 BECK_ANIAG_3_1 A (LN/ONT/NYISO); STLAWRE1 SAUND_MOSES1_1 A (LN/ONT/NYISO); BECK2 BECK2GNIAG_3_1 A (LN/ONT/NYISO); STLAWRE1 SAUND_MOSES__1 A (LN/ONT/NYISO),ACTUAL,1,($6.05)
1/1/2010,PADDCK_TWNLINE FLO PADDCK_BLACKHWK,TOWNELIN TLR_PAD 1 (LN/ALTE/ALTE),PADDOCK-BLACKHAWK 138 (X-53),1,($3.06) 
```

我怀疑故障发生在第 3 行第 3 列，它有一个长文本字符串：

```
BECK2 BECK2GPACKAR_1 A (LN/ONT/NYISO); BECK2 BECK_BNIAG_3_1 A (LN/ONT/NYISO); BECK2 BECK_ANIAG_3_1 A (LN/ONT/NYISO); STLAWRE1 SAUND_MOSES1_1 A (LN/ONT/NYISO); BECK2 BECK2GNIAG_3_1 A (LN/ONT/NYISO); STLAWRE1 SAUND_MOSES__1 A (LN/ONT/NYISO) 
```

也就是说，这就是我使用 type 的原因`nvarchar(max)`。无论如何，我感谢您的帮助。

谢谢你。

# android - 是否需要将此类放在清单文件中？类没有扩展任何东西。安卓

> ID：14638846
> 
> 赞同：0
> 
> 时间：2013-02-01T02:38:49.230
> 
> 标签：android, manifest

如果类 TestClass 没有扩展任何其他类，如 Activity。这将是一个助手类。在这种情况下，是否需要在清单文件中注册此类？或者因为这个类没有显示 UI 或扩展任何 UI 类，我可以将它从清单中删除而不会导致问题吗？

```
 <activity android:name=".TestClass"> 
        <intent-filter >
            <action android:name="com.example.TESTCLASS"/>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:43:04.177

您不需要在清单中注册帮助程序或实用程序类。

[只有这里](http://developer.android.com/guide/topics/manifest/manifest-intro.html)列出的组件，即活动、服务、提供者和接收者需要注册。

其他类如帮助类或扩展 SQLiteOpenHelper 等的类不需要包含在清单中。

# c# - 追加字符串的最简单方法是什么

> ID：14638847
> 
> 赞同：0
> 
> 时间：2013-02-01T02:38:52.660
> 
> 标签：c#

假设我有一个`List<string> list`内容功能`{"a","b","c","d"}`

是否有可能有一个像这样的返回语句

`return list union {"d"}`//这本质上是`{"a","b","c","d","d"}`

如果是，语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:41:51.377

是的：

```
return list.Concat(new[] {"d"}).ToList(); 
```

此声明不会更改`list`. 该`Concat`方法是 LINQ 提供的扩展方法，因此请确保`using`在文件顶部有以下语句：

```
using System.Linq; 
```

# eclipse - Ubuntu 上的 Subclipse：“文件夹”远程不存在”，连接被拒绝错误

> ID：14638849
> 
> 赞同：2
> 
> 时间：2013-02-01T02:39:13.823
> 
> 标签：eclipse, ubuntu, subclipse, javahl

所以几天来我一直在用头撞墙。当我最初设置 Subclipse 并第一次连接到我的本地 SVN 存储库时，一切都很好。不知道从那以后发生了什么变化，但现在我在尝试访问存储库时不断收到错误。

在 SVN Repository Exploring 透视图中，如果我双击我的 repo，我会看到一个弹出窗口，上面写着“问题发生 - 文件夹”不存在远程“。在我的控制台中，我收到此错误：

连接被拒绝 svn：无法连接到 URL 'svn://userid@localhost/home/userid/myrepository/java' 的存储库 svn：无法连接到主机 'localhost'：连接被拒绝

我有：Eclipse Juno Ubuntu 12.04 Subversion 1.7.8

我最初从 Subclipse 1.6 和 JavaHL 1.6 开始，但后来升级到 Subclipse 1.8.3/JavaHL 1.7.8.1，努力让一切恢复正常。我什至卸载了 Eclipse 并重新安装，重新安装了 Subclipse 和 JavaHL，将 JavaHL 路径添加到 eclpise.ini... 仍然无法访问 repo。

我通过“svn://userid@localhost/svn/home/userid/myrepository/java”在 subclipse 中本地访问 repo。我可以从命令行本地访问这个 repo 就好了，我可以使用 svn+ssh 从我网络上的另一台机器访问这个 repo 就好了。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:53:08.463

如果存储库是本地的，您应该使用像 file:///home/userID/myrepository/java 这样的 URL

要使用 svn:// 协议，您必须运行 svnserve。该 URL 将类似于：

svn://localhost/myrepository/java

当您使用 svn+ssh:// 协议时，SSH 守护进程会在 SSH 会话中以 --tunnel 模式启动并启动 svnserve。因此它不需要或使用可能正在运行的普通 svnserve 守护程序服务器。

FWIW，运行 svnserve 可能是个好主意，但这意味着您还需要配置它。但我不会使用 SVNKit 使用 file:// URL。如果您只使用 JavaHL，那很好，但我不会让 SVNKit 直接写入我的存储库。尽管他们在测试和维护兼容性方面做得很好，但运行 svnserve 并让 SVNKit 通过协议与其对话更容易。

# mysql - 如何在小时内求和 TIMEDIFF

> ID：14638853
> 
> 赞同：0
> 
> 时间：2013-02-01T02:39:32.087
> 
> 标签：mysql, aggregate-functions

我希望这可以清楚地解释我在寻找什么。我在这个网站上搜索了几篇文章，但没有找到我要找的东西。我也花了将近 3 个小时试图自己解决这个问题。

我正在尝试计算记录数并对 WorkTime 求和。这是我一直在处理的问题。

```
SELECT Log.User
 , sum(if(hour(endtime) = 0, 1, 0)) AS Midnight
 , sum(if(hour(endtime) = 1, 1, 0)) AS `1AM`
 , sum(if(hour(endtime) = 2, 1, 0)) AS `2AM`
 , sum(if(hour(endtime) = 3, 1, 0)) AS `3AM`
 , sum(if(hour(endtime) = 4, 1, 0)) AS `4AM`
 , sum(if(hour(endtime) = 5, 1, 0)) AS `5AM`
 , sum(if(hour(endtime) = 6, 1, 0)) AS `6AM`
 , sum(if(hour(endtime) = 7, 1, 0)) AS `7AM`
 , sum(if(hour(endtime) = 8, 1, 0)) AS `8AM`
 , sum(if(hour(endtime) = 9, 1, 0)) AS `9AM`
 , sum(if(hour(endtime) = 10, 1, 0)) AS `10AM`
 , sum(if(hour(endtime) = 11, 1, 0)) AS `11AM`
 , sum(if(hour(endtime) = 12, 1, 0)) AS `12PM`
 , sum(if(hour(endtime) = 13, 1, 0)) AS `1PM`
 , sum(if(hour(endtime) = 14, 1, 0)) AS `2PM`
 , sum(if(hour(endtime) = 15, 1, 0)) AS `3PM`
 , sum(if(hour(endtime) = 16, 1, 0)) AS `4PM`
 , sum(if(hour(endtime) = 17, 1, 0)) AS `5PM`
 , sum(if(hour(endtime) = 18, 1, 0)) AS `6PM`
 , sum(if(hour(endtime) = 19, 1, 0)) AS `7PM`
 , sum(if(hour(endtime) = 20, 1, 0)) AS `8PM`
 , if(hour(endtime) = 20, sec_to_time(sum(time_to_sec(endtime) - time_to_sec(starttime))), 0) AS `8PM Time`
 , sum(if(hour(endtime) = 21, 1, 0)) AS `9PM`
 , sum(if(hour(endtime) = 22, 1, 0)) AS `10PM`
 , sum(if(hour(endtime) = 23, 1, 0)) AS `11PM`
FROM
  (
  SELECT user
   , controlnumber
   , starttime
   , endtime
   , timediff(endtime, starttime) AS Worktime
FROM
   atrtaxcert.ordertimeworked
  ) AS Log
GROUP BY
   Log.User; 
```

这些开始和结束时间仅相隔几分钟。非常感谢任何指导。这是我在这里的第一篇文章，无法提供任何图像来帮助描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:58:59.487

如果 starttime 和 endtime 是 TIME 数据类型，则使用 TIME_TO_SEC 函数并进行减法。总计秒数，然后将总计转换为字符串表示形式。

```
SELECT `Log`.`User`
     , ...
     , SUM(HOUR(`Log`.endtime)=20) AS `8PM_count` 
     , SUM(IF(HOUR(`Log`.endtime)=20,work_seconds,0) AS `8PM_seconds`
     , SEC_TO_TIME(SUM(IF(HOUR(`Log`.endtime)=20,`Log`.work_seconds,0) AS `8PM_hhhmmss`
     , ...
  FROM ( SELECT
              , TIME_TO_SEC(endtime)-TIME_TO_SEC(starttime) AS work_seconds
       ) `Log`
 GROUP
    BY `Log`.`User` 
```

* * *

注意：这个：

```
SELECT HOUR(endtime)=0 AS foo 
```

速记相当于

```
SELECT IF(HOUR(endtime) = 0, 1, 0) AS foo 
```

* * *

如果`starttime`和`endtime`是 DATETIME 值，则可以使用 TIMESTAMPDIFF 函数计算以秒为单位的差异：

```
SELECT `Log`.`User`
     , ...
     , SUM(HOUR(`Log`.endtime)=20) AS `8PM_count` 
     , SUM(IF(HOUR(endtime)=20,TIMESTAMPDIFF(SECOND,`Log`.starttime,`Log`.endtime),0) AS `8PM_seconds`
     , ...
  FROM (
       ) `Log`
 GROUP
    BY `Log`.`User` 
```

（您可能希望忽略例如 starttime = '23:59:00' 和 endtime = '00:01:00' 时返回的值，这需要另一个条件测试。）

# ruby-on-rails - 使用轮胎（和 ElasticSearch）混合复杂布尔值时遇到问题

> ID：14638861
> 
> 赞同：0
> 
> 时间：2013-02-01T02:40:26.170
> 
> 标签：ruby-on-rails, ruby, boolean, elasticsearch, tire

我一直在试图弄清楚如何使用轮胎进行使用嵌套对象的混合布尔搜索。我发现的所有简单示例都不包含更复杂的查询（在搜索其他属性时）。

我的搜索涉及找到一个“需要”特定类型人员的团队。当试图建立一支足球队时，球队需要在名单上填充特定体重级别的某些类型的球员，可以选择排除一个或另一个。

其他参数，例如“地区”或“种类”，与球队的比赛地点以及球队的类型（休闲、竞技等）有关。

我目前的设置：

```
mapping do
  indexes :region, index: :not_analyzed
  indexes :kind, index: :not_analyzed

  indexes :role_requirements do
    indexes :need, type: 'boolean'
    indexes :weight_class_id, type: 'integer'
    indexes :role_id, type: 'integer'
  end

  .
  .
  .

end

def self.search(params)
  team_params = params[:team_search]
  tire.search(page: params[:page], per_page: 10) do
    query do
      boolean do
        must { string team_params[:query], default_operator: "AND" } if team_params[:query].present?
        must { term :kind, team_params[:kind] } if team_params[:kind].present?
        must { term :region, team_params[:region] } if team_params[:region].present?

        if team_params[:weight_class_id].present? || team_params[:role_id].present?
          must { term 'role_requirements.need', true }
        end

        must { term 'role_requirements.weight_class_id', team_params[:job_id].to_i } if team_params[:weight_class_id].present?
        must { term 'role_requirements.role_id', team_params[:role_id].to_i } if team_params[:role_id].present?

        .
        .
        .

      end
    end
  end
end 
```

我尝试了多种方法，但通常似乎存在问题，要么是 ElasticSearch 无法解析事物，要么是轮胎没有该范围内的方法：

通过这个实现，这里是生成的 to_json：[https ://gist.github.com/8a615e701eb31ff2e250](https://gist.github.com/8a615e701eb31ff2e250)

目前没有给我任何结果。

我尝试过的所有不同方式：[https ://gist.github.com/907c9571caa0e87bad27](https://gist.github.com/907c9571caa0e87bad27)

没有人能真正给我完整的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T12:17:08.570

您似乎缺少映射中的嵌套类型：

```
mapping do
  indexes :region, index: :not_analyzed
  indexes :kind,   index: :not_analyzed

  indexes :role_requirements, type: 'nested' do
    indexes :need,            type: 'boolean'
    indexes :weight_class_id, type: 'integer'
    indexes :role_id,         type: 'integer'
  end

  # ..more mappings..

end 
```

然后你可以像这样构建你的查询：

```
tire.search(page: params[:page], per_page: 10) do
  query do
    boolean do
      must { string team_params[:query], default_operator: "AND" } if team_params[:query].present?
      must { term :kind, team_params[:kind] } if team_params[:kind].present?
      must { term :region, team_params[:region] } if team_params[:region].present?

      must do
        nested path: 'role_requirements' do
          query do
            boolean do
              if team_params[:weight_class_id].present? || team_params[:role_id].present?
                must { term 'role_requirements.need', true }
              end
              must { term 'role_requirements.weight_class_id', team_params[:job_id].to_i } if team_params[:weight_class_id].present?
              must { term 'role_requirements.role_id', team_params[:role_id].to_i } if team_params[:role_id].present?
            end
          end
        end
      end
    end
  end
end 
```

以下是 Tire[集成测试](https://github.com/karmi/tire/blob/master/test/integration/nested_query_test.rb#L109-L126)中的一些示例。

希望这可以帮助 ：）

# iphone - 在uiwebview中加载页面哪种方式更快

> ID：14638878
> 
> 赞同：0
> 
> 时间：2013-02-01T02:41:59.550
> 
> 标签：iphone, uiwebview

在uiwebivew中哪种方式加载网页更快

使用

> 将 NSData 加载到 UIWebView

或者

> 使用加载请求 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:53:52.663

网络请求需要时间。尝试优化这种类型的代码几毫秒是没有意义的。编写最具可读性/可维护性的代码，它将为您提供更好的服务。

您可以将网页、脚本、css 和图像放入您的应用程序包中；获取指向它的 URL (file://...) 并使用它。在您的网页中，您可以使用 AJAX 提取一些动态数据等。

那将是更好的优化途径；但这一切都取决于您的情况。

如果您可以选择使用`loadRequest`，我会推荐它。让操作系统从您手中接过工作。

编辑：PS：UIWebView 往往会花时间来显示数据；即使不涉及网络。我经常在 IB 或 viewDidLoad 中将 webview 的 alpha 设置为 0；然后在内容准备好时将其淡入。

在您的`webViewDidFinishLoad:`方法中，添加以下内容：

```
if (0.0f == webview.alpha) {
    [UIView animateWithDuration:0.4f
                     animations:^{
                         webview.alpha = 1.0f;
                     }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:46:38.223

他们真的不是更快加载 Webview 的任何“技术”方式，但我建议您使用：

> 加载请求 URL

加载请求 URL 代码：

```
@interface WebViewController : UIViewController {

IBOutlet UIWebView *webView;
}

@property (nonatomic, retain) UIWebView *webView;

@end 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////

```
- (void)viewDidLoad {

NSString *urlAddress = @"http://www.google.com";

//Create a URL object.
NSURL *url = [NSURL URLWithString:urlAddress];

//URL Request Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[webView loadRequest:requestObj];

} 
```

# c# - 错误：“方法 'ExecuteInsert' 没有过载采用 '5' 参数”

> ID：14638880
> 
> 赞同：-2
> 
> 时间：2013-02-01T02:42:15.923
> 
> 标签：c#, sql, sql-server

我对 C# 参数有疑问，

我得到这个错误：

> 方法“ExecuteInsert”没有过载需要“5”

这是我的代码：

```
private void ExecuteInsert(string FirstName, string LastName, string MiddleName, string UserName, string Password, string MemberStatus)
{
    SqlConnection conn = new SqlConnection(GetConnectionString());
    string sql = "INSERT INTO Registration (FirstName, LastName, MiddleName, UserName, Password, MemberStatus, DateRegistration) VALUES"
                + " (@FirstName,@LastName,@MiddleName,@UserName,@Password,'ACTIVE',CURRENT_TIMESTAMP)";

    try
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand(sql, conn);
        SqlParameter[] param = new SqlParameter[5];
        param[0] = new SqlParameter("@FirstName", SqlDbType.VarChar, 50);
        param[1] = new SqlParameter("@LastName", SqlDbType.VarChar, 50);
        param[2] = new SqlParameter("@MiddleName", SqlDbType.VarChar, 50);
        param[3] = new SqlParameter("@UserName", SqlDbType.VarChar, 50);
        param[4] = new SqlParameter("@Password", SqlDbType.VarChar, 50);
        param[5] = new SqlParameter("ACTIVE", SqlDbType.VarChar, 50);
        param[6] = new SqlParameter("CURRENT_TIMESTAMP", SqlDbType.VarChar, 50);

        param[0].Value = FirstName;
        param[1].Value = LastName;
        param[2].Value = MiddleName;
        param[3].Value = UserName;
        param[4].Value = Password;
        param[5].Value = MemberStatus;
        param[6].Value = DateRegistration;

        for (int i = 0; i < param.Length; i++)
        {
            cmd.Parameters.Add(param[i]);
        }

        cmd.CommandType = CommandType.Text;
        cmd.ExecuteNonQuery();
    }
    catch (System.Data.SqlClient.SqlException ex)
    {
        string msg = "Insert Error:";
        msg += ex.Message;
        throw new Exception(msg);
    }
    finally
    {
        conn.Close();
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    if (TxtPassword.Text == TxtRePassword.Text)
    {
        //call the method to execute insert to the database
        ExecuteInsert(TxtFName.Text,
                      TxtLName.Text,
                      TxtMName.Text,
                      TxtUserName.Text,
                      TxtPassword.Text);
        Response.Write("Record was successfully added!");
        ClearControls(Page);
    }
    else
    {
        Response.Write("Password did not match");
        TxtPassword.Focus();
    }
}
public static void ClearControls(Control Parent)
{
    if (Parent is TextBox)
    { (Parent as TextBox).Text = string.Empty; }
    else
    {
        foreach (Control c in Parent.Controls)
            ClearControls(c);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T02:44:05.847

你在开玩笑吗？计算您的参数，注意您`string MemberStatus`在拨打电话时丢失了。错误再清楚不过了

# java - 用java开发一个图像编辑器

> ID：14638888
> 
> 赞同：1
> 
> 时间：2013-02-01T00:47:45.890
> 
> 标签：java, image, swing, editor

我正在尝试用 Java 开发图像编辑器。我的图像编辑器的 Java 图像实现的一部分是加载图像并绘制一些形状，以及执行旋转、缩放等。

我正在使用 JLabel 加载图像，但有没有办法使用 JLabel 在图像上绘制和应用转换？我在网上找到的所有示例都使用了 JPanel。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T04:11:04.470

你真的需要看看[Java2D turorial](http://docs.oracle.com/javase/tutorial/2d/index.html)。您应该在 上绘制图像`Graphics2D`并旋转和缩放图像`Graphics2D`。

***不要使用`JLabel`，因为***

*   *J-* 组件很重（尽管`JLabel`很轻）。您可以在 JLabel 中添加图标，但一般情况下，它们用于稳定的情况，不会频繁和随意更改。在 J-* 组件上绘画会带来太多的变化。*

*   *如果添加大量组件，也会降低性能。`Graphics`（每个组件都会在属于它的单独对象中绘制自己，并且它的容器会将它们全部绘制出来，并且布局也很重要。）*

*   *另一个缺点是有时很难甚至不可能对一个组件或几个组件一起进行一些操作。例如，如果要添加两张图片并将它们分组怎么办？你需要 2`JLabel`秒，1 `JPanel`（也许）。那么如果你想在这两个图像上画一条线并再次分组呢？*

**以下是基本步骤：**

1.  组件的覆盖`paint`或`paintComponent`方法；
2.  将`Graphics`实例转换为`Graphics2D`；
3.  设置一些渲染属性`Graphics2D`；
4.  设置变换（旋转、缩放等）`Graphics2D`；
5.  在上面绘制图像`Graphics2D`

使用了各种各样的类，例如`Graphics2D`, `AffineTransform`, `RenderingHints`, `BufferedImage`,`Shape`等，甚至更多的方法。我无法描述这里的一切。只需阅读 Java2D 教程。它为您提供 API 的概述，并告诉您如何执行这些操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T08:02:15.777

> 我正在使用 JLabel 加载图像，但是否可以使用 JLabel 在图像上绘制和应用转换？

不确定你的意思。

但是您可以简单地获取`JLabel`（这是正在显示的图像）的图标，对我们转换为的图标执行需要执行的操作，`BufferedImage`而不是通过重新应用图标`setIcon(..)`。

这是一个简短的示例，希望对您有所帮助：

`JLabel``BufferedImage`在旋转-45度之前带有图标/ ：

![在此处输入图像描述](../Images/3801b4557ff822c6a4b068d0e3e5dacd.png)

`JLabel`获得图标后，通过以下方式旋转并重新应用`setIcon(...)`：

![在此处输入图像描述](../Images/5023290a210dd541bd1ae6b59c0645f7.png)

```
import java.awt.Color;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import javax.swing.AbstractAction;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class Test {

    private static JLabel imageLabel;
    private static JFrame frame;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

                JPanel panel = new JPanel();

                imageLabel = new JLabel(new ImageIcon(createImage()));//set image of JLabel

                panel.add(imageLabel);

                frame.add(panel);

                frame.pack();
                frame.setVisible(true);

                startImageChangeTimer();//creates a timer which will rotate image after 5 seconds
            }

            private void startImageChangeTimer() {
                Timer timer = new Timer(5000, new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        //get JLabel Icon and convert to BufferedImage
                        BufferedImage img = getBufferedImageOfIcon(imageLabel.getIcon(), imageLabel.getWidth(), imageLabel.getHeight());
                        //rotate the image
                        img = createTransformedImage(img, -45);
                        //change the labels image
                        imageLabel.setIcon(new ImageIcon(img));

                        frame.pack();//resize frame accrodingly
                    }
                });
                timer.setRepeats(false);
                timer.start();
            }
        });
    }

    public static BufferedImage createImage() {
        BufferedImage img = new BufferedImage(100, 50, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = img.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setColor(Color.WHITE);
        g2d.fillRect(0, 0, img.getWidth(), img.getHeight());
        g2d.setColor(Color.BLACK);
        g2d.setFont(new Font("Calibri", Font.BOLD, 20));
        FontMetrics fm = g2d.getFontMetrics();
        String text = "Hello world";
        int textWidth = fm.stringWidth(text);
        g2d.drawString(text, (img.getWidth() / 2) - textWidth / 2, img.getHeight() / 2);
        g2d.dispose();
        return img;
    }

    public static BufferedImage getBufferedImageOfIcon(Icon icon, int imgW, int imgH) {
        BufferedImage img = new BufferedImage(imgW, imgH, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = (Graphics2D) img.getGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        icon.paintIcon(null, g2d, 0, 0);
        g2d.dispose();
        return img;
    }

    public static BufferedImage createTransformedImage(BufferedImage image, double angle) {
        double sin = Math.abs(Math.sin(angle));
        double cos = Math.abs(Math.cos(angle));
        int originalWidth = image.getWidth();
        int originalHeight = image.getHeight();
        int newWidth = (int) Math.floor(originalWidth * cos + originalHeight * sin);
        int newHeight = (int) Math.floor(originalHeight * cos + originalWidth * sin);
        BufferedImage rotatedBI = new BufferedImage(newWidth, newHeight, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = rotatedBI.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.translate((newWidth - originalWidth) / 2, (newHeight - originalHeight) / 2);
        g2d.rotate(angle, originalWidth / 2, originalHeight / 2);
        g2d.drawImage(image, 0, 0, null);
        g2d.dispose();
        return rotatedBI;
    }
} 
```

**更新：**

我确实倾向于同意@shuangwhywhy。将图像绘制到`JPanel`via`paintComponent(Graphics g)`因此您可以简单地调整图像大小并将其设置为`JPanel`图像（通过*getter 和 setter*），然后调用`repaint()`以显示更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T15:20:09.580

这是简单的图像编辑器

```
 /*Arpana*/
  CPanel displayPanel;

  JButton sharpenButton, blurringButton, edButton, resetButton;

  public ConvolveApp()
    super();
    Container container = getContentPane();

    displayPanel = new CPanel();
    container.add(displayPanel);

    JPanel panel = new JPanel();
    panel.setLayout(new GridLayout(2, 2));
    panel
        .setBorder(new TitledBorder(
            "Click a Button to Perform the Associated Operation and Reset..."));

    sharpenButton = new JButton("Sharpen");
    sharpenButton.addActionListener(new ButtonListener());
    blurringButton = new JButton("Blur");
    blurringButton.addActionListener(new ButtonListener());
    edButton = new JButton("Edge Detect");
    edButton.addActionListener(new ButtonListener());
    resetButton = new JButton("Reset");
    resetButton.addActionListener(new ButtonListener());

    panel.add(sharpenButton);
    panel.add(blurringButton);
    panel.add(edButton);
    panel.add(resetButton);

    container.add(BorderLayout.SOUTH, panel);

    addWindowListener(new WindowAdapter() {
      public void windowClosing(WindowEvent e) {

    setSize(displayPanel.getWidth(), displayPanel.getHeight() + 10);
    setVisible(true); 

  public static void main(String arg[]) {
    new ConvolveApp();

  class ButtonListener implements ActionListener 
    public void actionPerformed(ActionEvent e) 
      JButton button = (JButton) e.getSource();

      if (button.equals(sharpenButton)) 
        displayPanel.sharpen();
        displayPanel.repaint();
       else if (button.equals(blurringButton)) 
        displayPanel.blur();
        displayPanel.repaint();
       else if (button.equals(edButton)) 
        displayPanel.edgeDetect();
        displayPanel.repaint();
      else if (button.equals(resetButton)) 
        displayPanel.reset();
        displayPanel.repaint();

class CPanel extends JLabel 
  Image displayImage;

  BufferedImage biSrc;

  BufferedImage biDest; 

  BufferedImage bi; 

  Graphics2D big;

  CPanel()
    setBackground(Color.black);
    loadImage();
    setSize(displayImage.getWidth(this), displayImage.getWidth(this)); 
    createBufferedImages();
    bi = biSrc;

  public void loadImage() 
    displayImage = Toolkit.getDefaultToolkit().getImage("Arpana.jpg");
    MediaTracker mt = new MediaTracker(this);
    mt.addImage(displayImage, 1);
    try
      mt.waitForAll();
       if (displayImage.getWidth(this) == -1) 
      System.out.println("No jpg file");
      System.exit(0);

  public void createBufferedImages() 
    biSrc = new BufferedImage(displayImage.getWidth(this), displayImage
        .getHeight(this), BufferedImage.TYPE_INT_RGB);

    big = biSrc.createGraphics();
    big.drawImage(displayImage, 0, 0, this);

    biDest = new BufferedImage(displayImage.getWidth(this), displayImage
        .getHeight(this), BufferedImage.TYPE_INT_RGB);

  public void sharpen() 
    float data[] = { -1.0f, -1.0f, -1.0f, -1.0f, 9.0f, -1.0f, -1.0f, -1.0f,
        -1.0f };
    Kernel kernel = new Kernel(3, 3, data);
    ConvolveOp convolve = new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP,
        null);
    convolve.filter(biSrc, biDest);
    bi = biDest;

  public void blur() 
    float data[] = { 0.0625f, 0.125f, 0.0625f, 0.125f, 0.25f, 0.125f,
        0.0625f, 0.125f, 0.0625f };
    Kernel kernel = new Kernel(3, 3, data);
    ConvolveOp convolve = new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP,
        null);
    convolve.filter(biSrc, biDest);
    bi = biDest;

    public void edgeDetect() 
    float data[] = { 1.0f, 0.0f, -1.0f, 1.0f, 0.0f, -1.0f, 1.0f, 0.0f,
        -1.0f };

    Kernel kernel = new Kernel(3, 3, data);
    ConvolveOp convolve = new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP,
        null);
    convolve.filter(biSrc, biDest);

public void reset()
    big.setColor(Color.black);
    big.clearRect(0, 0, bi.getWidth(this), bi.getHeight(this));
    big.drawImage(displayImage, 0, 0, this);
    bi = biSrc;

  public void update(Graphics g) 
    g.clearRect(0, 0, getWidth(), getHeight());
    paintComponent(g); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T15:25:53.560

```
 /* Arpana*/   
     import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Container;
    import java.awt.Graphics;
    import java.awt.Graphics2D;
    import java.awt.GridLayout;
    import java.awt.Image;
    import java.awt.MediaTracker;
    import java.awt.Toolkit;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.awt.event.WindowAdapter;
    import java.awt.event.WindowEvent;
    import java.awt.image.BufferedImage;
    import java.awt.image.ConvolveOp;
    import java.awt.image.Kernel;

    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.border.TitledBorder;

    public class ConvolveApp extends JFrame {
      CPanel displayPanel;

      JButton sharpenButton, blurringButton, edButton, resetButton;

      public ConvolveApp() {
        super();
        Container container = getContentPane();

        displayPanel = new CPanel();
        container.add(displayPanel);

        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(2, 2));
        panel
            .setBorder(new TitledBorder(
                "Click a Button to Perform the Associated Operation and Reset..."));

        sharpenButton = new JButton("Sharpen");
        sharpenButton.addActionListener(new ButtonListener());
        blurringButton = new JButton("Blur");
        blurringButton.addActionListener(new ButtonListener());
        edButton = new JButton("Edge Detect");
        edButton.addActionListener(new ButtonListener());
        resetButton = new JButton("Reset");
        resetButton.addActionListener(new ButtonListener());

        panel.add(sharpenButton);
        panel.add(blurringButton);
        panel.add(edButton);
        panel.add(resetButton);

        container.add(BorderLayout.SOUTH, panel);

        addWindowListener(new WindowAdapter() {
          public void windowClosing(WindowEvent e) {
            System.exit(0);
          }
        });
        setSize(displayPanel.getWidth(), displayPanel.getHeight() + 10);
        setVisible(true); 
      }
      public static void main(String arg[]) {
        new ConvolveApp();
      }

      class ButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
          JButton button = (JButton) e.getSource();

          if (button.equals(sharpenButton)) {
            displayPanel.sharpen();
            displayPanel.repaint();
          } else if (button.equals(blurringButton)) {
            displayPanel.blur();
            displayPanel.repaint();
          } else if (button.equals(edButton)) {
            displayPanel.edgeDetect();
            displayPanel.repaint();
          } else if (button.equals(resetButton)) {
            displayPanel.reset();
            displayPanel.repaint();
          }
        }
      }
    }

    class CPanel extends JLabel {
      Image displayImage;

      BufferedImage biSrc;

      BufferedImage biDest; // Destination image is mandetory.

      BufferedImage bi; // Only an additional reference.

      Graphics2D big;

      CPanel() {
        setBackground(Color.black);
        loadImage();
        setSize(displayImage.getWidth(this), displayImage.getWidth(this)); 
        createBufferedImages();
        bi = biSrc;
      }

      public void loadImage() {
        displayImage = Toolkit.getDefaultToolkit().getImage("Arpana.jpg");
        MediaTracker mt = new MediaTracker(this);
        mt.addImage(displayImage, 1);
        try {
          mt.waitForAll();
        } catch (Exception e) {
          System.out.println("Exception while loading.");
        }
        if (displayImage.getWidth(this) == -1) {
          System.out.println("No jpg file");
          System.exit(0);
        }
      }

      public void createBufferedImages() {
        biSrc = new BufferedImage(displayImage.getWidth(this), displayImage
            .getHeight(this), BufferedImage.TYPE_INT_RGB);

        big = biSrc.createGraphics();
        big.drawImage(displayImage, 0, 0, this);

        biDest = new BufferedImage(displayImage.getWidth(this), displayImage
            .getHeight(this), BufferedImage.TYPE_INT_RGB);
      }

      public void sharpen() {
        float data[] = { -1.0f, -1.0f, -1.0f, -1.0f, 9.0f, -1.0f, -1.0f, -1.0f,
            -1.0f };
        Kernel kernel = new Kernel(3, 3, data);
        ConvolveOp convolve = new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP,
            null);
        convolve.filter(biSrc, biDest);
        bi = biDest;
      }

      public void blur() {
        float data[] = { 0.0625f, 0.125f, 0.0625f, 0.125f, 0.25f, 0.125f,
            0.0625f, 0.125f, 0.0625f };
        Kernel kernel = new Kernel(3, 3, data);
        ConvolveOp convolve = new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP,
            null);
        convolve.filter(biSrc, biDest);
        bi = biDest;
      }

        public void edgeDetect() {
        float data[] = { 1.0f, 0.0f, -1.0f, 1.0f, 0.0f, -1.0f, 1.0f, 0.0f,
            -1.0f };

        Kernel kernel = new Kernel(3, 3, data);
        ConvolveOp convolve = new ConvolveOp(kernel, ConvolveOp.EDGE_NO_OP,
            null);
        convolve.filter(biSrc, biDest);

        bi = biDest;
      }

      public void reset() {
        big.setColor(Color.black);
        big.clearRect(0, 0, bi.getWidth(this), bi.getHeight(this));
        big.drawImage(displayImage, 0, 0, this);
        bi = biSrc;
      }

      public void update(Graphics g) {
        g.clearRect(0, 0, getWidth(), getHeight());
        paintComponent(g);
      }

      public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2D = (Graphics2D) g;

        g2D.drawImage(bi, 0, 0, this);
      }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T04:04:15.777

我只听说有人使用 JLabels 来完成此任务。我建议将 显示`BufferedImage`为 JLabel 的背景。当用户对图像进行编辑时，编辑图像（如果您还没有用于处理图像的库，我强烈推荐[imgscalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)）并将其重新应用为 JLabel 的背景（如果它不自动更新） .

# ember.js - 在视图中获取控制器

> ID：14638904
> 
> 赞同：0
> 
> 时间：2013-02-01T02:45:14.150
> 
> 标签：ember.js

我使用最新的 emberjs 1.0 pre4。

在 App.FormController 中，我将 childView 插入到 containerView：

```
containerView.get('childViews').pushObject(
    App.FieldData4MultipleChoiceView.create()
); 
```

在这个 childView 中，我尝试打印“me.get('controller')”：

```
didInsertElement: function() {
    var me = this;
    $(".fieldset.group").on("click", ".fieldChoice img", function(e){
        var controller = me.get('controller');
        console.log(controller); // line A
    });
} 
```

问题 1：为什么“A 行”返回的是 App.ApplicationController 类的实例，而不是 App.FormController？

问题 2：如何在任何其他视图（不仅仅是 App.FormController 下的视图）中获取 App.FormController 的单个实例？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:26:18.893

> 问题 1：为什么“A 行”返回的是 App.ApplicationController 类的实例，而不是 App.FormController？

您的示例说“在 App.FormController 中，我将 childView 插入到 containerView”，但尚不清楚该 containerView 是如何存在的或其上下文是什么。该 childView 将继承其父级的上下文，所以我的猜测是 containerView 本身没有`App.FormController`作为它的控制器。

> 问题 2：如何在任何其他视图（不仅仅是 App.FormController 下的视图）中获取 App.FormController 的单个实例？

你不能，至少在没有真正破解 ember 的内部 API 的情况下是不能的。这是设计使然。每个视图都应该非常轻量级，并且只依赖于它对应的控制器。该控制器可以绑定到 App.FormController 或其属性之一，但视图不需要知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:49:23.427

> 问题 1：为什么“A 行”返回的是 App.ApplicationController 类的实例，而不是 App.FormController？

我不太明白为什么没有将上下文传递到视图中，但是您可以在实例化视图时通过传递它来自己指定控制器：

```
App.FieldData4MultipleChoiceView.create({ controller: this.get('formController'); }); 
```

> 问题 2：如何在任何其他视图（不仅仅是 App.FormController 下的视图）中获取 App.FormController 的单个实例？

如果您按照自己的方式进行操作，则需要通过控制器。您可以`{{render "my"}}`在 Handlebars 中使用，它会自动附加`MyView`和`MyController`. 但是，如果您不这样做，那么您可以将控制器传递给 using `setupController`：

```
var MyRoute = Ember.Route.extend({
    setupController: function(controller) {
        controller.set('formController', this.controllerFor('form'));
    }
}); 
```

现在您可以`this.get('formController')`从`MyController`实例中访问。

*在 EMBER 1.0.0-PRE.5 中，我们不会再有`this.controllerFor`更多的了，但是我们将使用`needs`来指定任何给定控制器中所需的控制器。*

# parameters - nginx重写查询参数值

> ID：14638906
> 
> 赞同：2
> 
> 时间：2013-02-01T02:45:20.887
> 
> 标签：parameters, nginx, rewrite

如何在 nginx 中编写配置以重写以下 url: `domain.com/index.php?page=home`into`domain.com/index.php?page=m-home`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T08:01:14.777

```
if ($args ~* (.*)(page=home)(.*)){
set $args $1page=m-home$3;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T19:56:44.820

```
rewrite ^/index.php?page=(.+?)&(.*)$ /index.php?page=m-$1&$2 break; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T02:53:45.117

```
rewrite ^/index.php?page=m-(.*) /index.php?page=$1 last; 
```

# ios - 根据一天中的时间采取行动？

> ID：14638910
> 
> 赞同：1
> 
> 时间：2013-02-01T02:45:48.593
> 
> 标签：ios, xcode, if-statement, time

我的应用程序有两组图标，一组用于白天，一组用于晚上。我可以使用什么样的`if-then`语句来告诉我的应用程序，如果时间晚于`8PM-7AM`.. 执行此操作，如果时间介于`7AM-8PM`.. 之间，请执行不同的操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:56:09.490

做一个昼夜枚举或布尔 ivar

当您的应用程序启动时，您可以获得当前时间。然后您可以计算是白天还是晚上，然后设置枚举。

然后，如果现在是白天，您应该计算`timeInterval`从现在到晚上 8 点，命名为 timeInterval1，然后`NSTimer`调用您的方法将枚举更改为晚上。延迟时间为 timeInterval1。

```
- (void)yourmethod
{
    if(enum == day)
    {

    }
    else
    {
    }
} 
```

更多信息，你可以看到：[如何创建线程来检查时间？](https://stackoverflow.com/questions/14475195/how-to-create-thread-to-checking-time/14475498#14475498)

# java - 无法在 Mac 上加载 jar-with-dependencies

> ID：14638911
> 
> 赞同：1
> 
> 时间：2013-02-01T02:46:10.433
> 
> 标签：java, macos, maven

我有一个在 Maven 中创建的应用程序作为一个完整的 jar，它可以在大多数平台（Windows、Unix、某些 Mac）上运行，但不能在 Mac lion/10.6 上运行，失败并出现错误

```
java –jar jumbo-converters-crystal-cif-0.3-SNAPSHOT-jar-with-dependencies.jar 0151.cif 0151.cml
Exception in thread "main" java.lang.NoClassDefFoundError: ?jar
Caused by: java.lang.ClassNotFoundException: ?jar
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

更新： MANIFEST.MF 包含：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: pm286
Build-Jdk: 1.6.0_24
Main-Class: org.xmlcml.cml.converters.cif.CIF2CMLConverter 
```

解决方案：@Charlie 是对的。这个错误发生在一个类中。大多数代表没有问题。“罪魁祸首”是Powerpoint。我被要求将我的材料作为 Powerpoint 提供（不是我的正常做法），并且它“有用地”将 HYPHEN-MINUS (U+002D) 转换为 EN_DASH。大多数代表正常键入此内容，但有些代表剪切并粘贴了损坏的命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:06:01.720

问题是您用来执行的命令

```
java –jar jumbo-converters-crystal-cif-0.3-SNAPSHOT-jar-with-dependencies.jar 0151.cif 0151.cml 
```

错了……应该是：

```
java -jar jumbo-converters-crystal-cif-0.3-SNAPSHOT-jar-with-dependencies.jar 0151.cif 0151.cml 
```

(It might not be apparent but the first one is an ['EN DASH' (U+2013)](http://www.fileformat.info/info/unicode/char/2013/index.htm) before the `jar` and the second is a [hyphen](http://www.fileformat.info/info/unicode/char/002d/index.htm).)

# javascript - 如何在具有 html 的变量中使用变量

> ID：14638913
> 
> 赞同：-1
> 
> 时间：2013-02-01T02:46:20.230
> 
> 标签：javascript, html, css, variables

我想知道如何在包含 HTML 的 Javascript 变量中使用变量，例如在下面的代码中

```
function SetCFonts()
{
    var Color = $('#CColor').val();
    var Font = $('#CFont').val();
    var Size = $('#CSize').val();
    var Bold = $('#CBoldOp').val();
    var Text = $('#NMsg').val();
    var Gen = "<font style=font-weight:+Bold color:+Color font-size:+Size font-family:+Font>Your Text Here</font>";

    alert(Gen);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:48:37.543

您需要将字符串连接在一起：

```
var Gen = "<font style=font-weight:" +Bold + " color:" +Color + " font-size:"+Size + " font-family:" +Font+ ">Your Text Here</font>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:54:12.767

您应该从中创建一个元素，并`.css()`在其上调用 jQuery 的方法：

```
function SetCFonts ()
{
    var Gen = $('<font />').css({
        'color'         : $('#CColor').val(),
        'font-family'   : $('#CFont').val(),
        'font-size'     : $('#CSize').val(),
        'font-weight'   : $('#CBoldOp').val()
    }).text( $('#NMsg').val() );

    console.log( Gen );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:56:50.313

使用 + 运算符，如 John Koerner 回答。或者您也可以使用[concat](http://www.w3schools.com/jsref/jsref_concat_string.asp)运算符。

```
var Gen = "<font style=font-weight:".concat(Bold).concat("color:").concat(Color).concat("font-size:").concat(Size).concat("font-family:").concat(Font).concat(">").concat(Text).concat("</font>"); 
```

更多详细信息： [在 Javascript 中连接字符串的多种方法](http://sraji.wordpress.com/2011/01/10/multiple-ways-to-concatenate-a-string-in-javascript/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T03:00:18.873

您缺少的是连接：您必须关闭并重新打开引号：

```
function SetCFonts()
{
    var Color = $('#CColor').val();
    var Font = $('#CFont').val();
    var Size = $('#CSize').val();
    var Bold = $('#CBoldOp').val();
    var Text = $('#NMsg').val();
    var Gen = "<font style=font-weight:" + Bold + "; color:" + Color + "; font-size: " + Size + "; font-family: "+ Font +" >Your Text Here</font>";

    alert(Gen);
} 
```

# php - htmlentities 不适用于 json 编码

> ID：14638914
> 
> 赞同：1
> 
> 时间：2013-02-01T02:46:20.567
> 
> 标签：php, mysqli

我不知道这是怎么回事，但 htmlentities() 函数不起作用！

这是我所做的

（底部代码可以正常工作，但 htmlentities() 不会将引号转换为 html 代码！例如 " 应该更改为一些 html5 代码！

```
$term = "'" . addslashes($_GET['search_term']) . "%'";
if(!isset($term{2})){
    exit();
}

$query = $db->query('SELECT customerID, fullName, dID, birthYear, homeAddress, ID, DATE_FORMAT(idIssue, "%d-%m-%Y") AS idIssue, DATE_FORMAT(idExp, "%d-%m-%Y") AS idExp, phone
                     FROM customers WHERE (fullName LIKE '.$term.' ) LIMIT 0,10');

while( $row = $query->fetch_assoc()){

    foreach($row as $key => $value){
        $arr[$key] = htmlentities(stripslashes($value), ENT_QUOTES);
    }
    $json[] = $arr;
}

echo json_encode($json); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T03:51:56.237

您传递给 json_encode() 的值必须是 UTF-8 编码数据。因此，在运行之前`json_encode`，请使用`utf8_encode`.

例子：

```
 $arr[$key] = htmlentities(stripslashes(utf8_encode($value)), ENT_QUOTES); 
```

# coldfusion - 允许 CFFILE 和 CFFTP 在同一个 CFFORM 中工作

> ID：14638915
> 
> 赞同：0
> 
> 时间：2013-02-01T02:46:26.183
> 
> 标签：coldfusion, forms

我正在使用一个共享托管服务器来限制 CFFILE Action="Upload" 的文件大小（比如说 100 MB） - 我的代码适用于所有上传的 99%，但是对于大于 100 MB 的文件，他们建议我使用FTP。

为了让 CFFTP 工作，我需要本地路径名（即“c:\myFiles\fileToUpload.mpg”），但是因为如果我转储表单字段，我使用的是 CFFORM ENCYTYPE="multipart/form-data"，它在服务器上被列为 .tmp。如果我消除了 ENCTYPE 名称，那么我会得到本地路径名，然后就可以开始了。

如果文件大小超过 100 MB，我的目标是无缝切换到 CFFTP。当 ENCTYPE 设置为 "multipart/form-data" 时是否可以提取本地路径名？

或者是否有其他方法可以让 CFFTP 和 CFFILE 以这种方式工作？

这是我希望如何工作的抽象：

```
<!--- perform actions --->
<cfif isdefined("FORM.fileToUpload")>
    <cfif fileSizeInMB(FORM.fileToUpload) < 100>
        <cffile action="upload" blah blah>
    <cfelse>
        <cfftp action="putfile" blah blah>
    </cfif>
</cfif>

<!--- show page --->
<cfform action="#CGI.SCRIPT_NAME#" method="post" enctype="multipart/form-data">
    <input type="file" name="fileToUpload" />
    <input type="submit" />
</cfform> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:48:46.843

根据 ColdFusion 文档，CFFTP 标签用于“......在 ColdFusion 服务器和 FTP 服务器之间移动文件”。- 这个标签不允许你从客户端的硬盘读取上传到服务器。从客户端传输文件的唯一方法是使用 CFFILE。

在我的情况下，我必须让客户知道现在上传文件的大小有限制 - 根据 Dan 的建议，我会推荐使用 Firezilla 上传所有超过 100 MB 的文件。

感谢大家的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:10:50.170

我认为你不走运有几个原因。首先，在没有用户明确同意的情况下获取本地文件路径是不会发生的。您可以编写一些活动的 x 控件来执行此操作，但浏览器会询问用户是否允许这样做。认为这不太可能。

接下来，cfftp 将仅适用于启用了 ftp 的机器。大多数个人电脑不是。那些可能有安全措施供您克服。

我认为如果文件太大，你能做的最好的事情就是向用户显示一条消息。此消息将包含有关 ftp 客户端（例如 Filezilla）的信息，以及有关如何将文件 ftp 到服务器的说明，当然假设服务器的所有者将允许公众将文件 ftp 进来。

# python - Python 3.x：对象不接受定义？

> ID：14638918
> 
> 赞同：0
> 
> 时间：2013-02-01T02:46:47.060
> 
> 标签：python

好的，所以我有这个应该有 , 和其他一些属性的`food`类`hunger`。

我只有这样的定义：

```
def setfood():
     choice = input("Choice: ")
     if choice == "1":
           food = 1
           bored = 2
     if choice == "2":
           food = 4
           bored = 8
     return food
     return bored 
```

然后我有这样的课程。

```
class thing(object):
    def __init__(self, name, hunger = 0, boredom = 0):
        self.name = name
        self.hunger = hunger
        self.boredom = boredom

    def eat(self):
       setfood()
       self.hunger -= food
       self.boredom += bored 
```

好吧，无论我做什么，我都无法让它工作。我不断收到有关全局变量的错误消息。

好吧，我添加`food = 0`并添加`bored = 0`到程序的主要部分中，这没有什么区别，因为我无法将全局变量传递到定义中。

我试图将定义添加到我的课程中，但它仍然没有任何区别。我还尝试进行单独的定义以返回每个变量……也没有奏效。不管我做什么，我都赢不了。

我可以让它工作的唯一方法是如果我这样做：

```
food = setfood() 
```

我想我可以把它改成这样：

```
food = setfood(food)
food = setfood(bored) 
```

但这也不起作用...

但是，如果我对这两个变量都这样做，我必须经历两次。那么我具体该怎么做呢？我很失落和沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:09:34.670

> “NameError：未定义全局名称‘food’”

`food``if`仅当您输入其中一个块时才定义您的函数。您输入的输入不是 1 或 2 吗？如果 os`food`不会被定义为任何东西。你可以有一个默认值，`food`比如：

```
food = 0 # food stays at 0 for invalid choices
choice = input("Choice: ")
if choice == "1":
     food = 1
     bored = 2
if choice == "2":
     food = 4
     bored = 8
return food 
```

同样要返回两个变量，您的返回语句需要返回一个元组，即

```
 return (food, bored) 
```

然后调用者可以做

```
 (food, bored) = setfood() 
```

并且您将能够按照您的意图一次返回两个值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:06:39.987

```
def setfood(): 
```

是一套方法。它不应该返回任何东西。您应该定义其他方法，例如 getfood() 或 getboredStatus() 来返回食物状态或无聊状态。请参阅[此处](https://stackoverflow.com/questions/9316598/how-to-use-get-set-methods)了解更多信息

# google-apps-script - 谷歌应用脚 本：时间触发器和用户上下文

> ID：14638919
> 
> 赞同：1
> 
> 时间：2013-02-01T02:46:54.037
> 
> 标签：google-apps-script

我想知道时间触发器是否记得“用户上下文”。我的谷歌应用程序脚本查看用户谷歌驱动器文件夹，我想知道是否可以创建时间触发器来检查例如谷歌驱动器的每小时内容。

我正在使用此配置运行脚本：

```
Execute the app as : "User accessing the web app" 
```

和时间触发：

```
var later = new Date(new Date().getTime() + 1 * 60 * 60 * 1000); 
ScriptApp.newTrigger("timeDrivenMethod").timeBased().at(later).create(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T06:24:26.367

正如[文档](https://developers.google.com/apps-script/scripts_google_accounts#understandingPermissions)[中提到](https://developers.google.com/apps-script/understanding_triggers)的'可安装触发器与简单触发器有一些相似之处，但也有这些区别：

**他们以安装触发器的用户身份运行**，而不是以触发事件的用户身份运行。

因此，您的应用程序将要求对此进行授权，并且触发的函数将作为创建触发器的用户执行，在这种情况下，作为运行 webapp 的用户（因为脚本在您定义的活动用户的权限下创建它）部署参数）。

# jqgrid - jqgrid拖线问题

> ID：14638922
> 
> 赞同：0
> 
> 时间：2013-02-01T02:47:16.097
> 
> 标签：jqgrid, resize

大家，我在我的项目中使用了很棒的 jQgrid，发现在 Chrome（版本 25.0.1337.0）中拖动列调整大小时出现了一个问题，就像我试图调整列大小时拖动线偏离标题行一样，下面是截图 ![在此处输入图像描述](../Images/de78bd75baeb3d4d0be2861052b0dd4a.png)

红线是拖线，蓝线是标题栏，更奇怪的是当我将鼠标移动到正好是蓝色栏的拖动位置开始拖动时，鼠标图标应该像（![在此处输入图像描述](../Images/9096bb2b14eff9699092f3fd37c9b9b6.png)) 在 Chrome 中消失。

但它在 Firefox 和 IE 中表现很酷，这是屏幕截图（在 Firefox 中） ![在此处输入图像描述](../Images/fe36d2742cdfd8e2c105021146e4ceb1.png)

如何在 Chrome 中解决此问题？我的 jqgrid 版本是 4.4.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:50:30.277

我找到了一个不优雅的解决方案，但在 IE8、Chrome v25、firefox v3.6 中表现我想要的，这可能只是一个粗略的修复！在 getOffset 方法中

```
getOffset = function (iCol) {             
      var i, ret = [0], brd1 = $.jgrid.cell_width ? 0 : ts.p.cellLayout; 
```

> if(/chrome/i.test(navigator.userAgent)) brd1 = 5;//这可以在chrome中临时修复

```
 for(i=0;i<=iCol;i++){
            if(ts.p.colModel[i].hidden === false ) {
                ret[0] += ts.p.colModel[i].width+brd1;
            }
        }
        if(ts.p.direction=="rtl") {   ret[0] = ts.p.width - ret[0]; }
        ret[0] -= ts.grid.bDiv.scrollLeft;
        ret.push($(ts.grid.hDiv).position().top);
        ret.push($(ts.grid.bDiv).offset().top - $(ts.grid.hDiv).offset().top + $(ts.grid.bDiv).height());
        return ret;
    } 
```

如您所见，我明确分配 brd1 = 5..因为在 chrome $.jqgrid.cell_width 中返回 true，而在 firefox/IE 中返回 false

# ios - [NSArray count] 冗长的 GHAssertEquals

> ID：14638936
> 
> 赞同：0
> 
> 时间：2013-02-01T02:49:41.957
> 
> 标签：ios, objective-c, unit-testing, gh-unit

有人可以告诉我这个断言可以优化吗？iOS 中的单元测试让我难以接受。一个关于 NSArray 计数的简单断言不应该这么冗长：

```
GHAssertEquals([[NSNumber numberWithInt:[caseArray count]] intValue], 
                             [[NSNumber numberWithInt:627] intValue], 
                                              @"array count equals"); 
```

**编辑：**下面的建议行

```
GHAssertEquals([caseArray count], 627, @"array count equals"); 
```

产生这个输出：

```
Reason: Type mismatch -- array count equals

0   CoreFoundation                      0x01cfd02e __exceptionPreprocess + 206
1   libobjc.A.dylib                     0x0113ae7e objc_exception_throw + 44
2   CoreFoundation                      0x01d85fb1 -[NSException raise] + 17
3   Tests                               0x00027711 -[GHTestCase failWithException:] + 33
4   Tests                               0x0001a0ed -[CaseTest testGetCaseArrayFromJSONArray] + 3293
5   libobjc.A.dylib                     0x0114e663 -[NSObject performSelector:] + 62
6   Tests                               0x00022e19 +[GHTesting runTestWithTarget:selector:exception:interval:reraiseExceptions:] + 450
7   Tests                               0x0001ea90 -[GHTest run:] + 275
8   Tests                               0x000211ea -[GHTestGroup _run:] + 696
9   Tests                               0x00021513 -[GHTestGroup run:] + 130
10  Tests                               0x000211ea -[GHTestGroup _run:] + 696
11  Tests                               0x00021513 -[GHTestGroup run:] + 130
12  Tests                               0x000239a2 -[GHTestRunner runTests] + 257
13  Tests                               0x00023b12 -[GHTestRunner _runInBackground] + 79
14  Foundation                          0x00b85805 -[NSThread main] + 76
15  Foundation                          0x00b85764 __NSThread__main__ + 1304
16  libsystem_c.dylib                   0x983c7557 _pthread_start + 344
17  libsystem_c.dylib                   0x983b1cee thread_start + 34

FAIL (0.033s) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T03:10:53.347

“类型不匹配”是因为 GHAssertEquals 要求两个参数是相同的类型。`[caseArray count]`返回一个无符号整数。这与有符号整数 627 不匹配。因此，请与无符号 627 进行比较，即`627U`：

```
GHAssertEquals([caseArray count], 627U, @"array count equals"); 
```

或者，您可以使用 OCHamcrest 说

```
assertThat(caseArray, hasCountOf(627)); 
```

（OCHamcrest 与 GHUnit 兼容。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:53:24.520

我不知道 GHAsserEquals，但你的表达相当于：

```
GHAssertEquals([caseArray count], 627, @"array count equals"); 
```

# c# - Webclient.DownloadFile 类、结构或接口成员声明中的无效标记 '('

> ID：14638939
> 
> 赞同：0
> 
> 时间：2013-02-01T02:50:18.303
> 
> 标签：c#, file, download

我正在尝试从[https://webgis.dme.qld.gov.au/webgis/webqmin/shapes/epm.tar](https://webgis.dme.qld.gov.au/webgis/webqmin/shapes/epm.tar)下载文件以使用 webclient 保存到我的 d:\ 驱动器。我在“Client.DownloadFile”之后收到错误 Invalid token '(' in class、struct 或 interface member declaration

这是我第一次使用 C#！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Project1
{
    class Class1
    {
        WebClient Client = new WebClient ();
        Client.DownloadFile("https://webgis.dme.qld.gov.au/webgis/webqmin/shapes/epm.tar", @"d:\epm.tar");
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:53:11.670

您需要将代码放入一个方法中：

```
namespace Project1
{
  class Class1
  {

    public void DownloadIt()
    {
        WebClient Client = new WebClient ();
        Client.DownloadFile("https://webgis.dme.qld.gov.au/webgis/webqmin/shapes/epm.tar",      @"d:\epm.tar");
    }
  }
} 
```

然后要使用它，您只需从控制台应用程序或 winform 应用程序调用该方法：

```
Class1 c = new Class1();
c.DownloadIt(); 
```

# java - 用 Spring 测试 Dao

> ID：14638941
> 
> 赞同：0
> 
> 时间：2013-02-01T02:50:25.690
> 
> 标签：java, spring, spring-test

我在使用 spring junit runner 运行一些测试时遇到了一些问题。

我正在为 spring 使用 Java 配置，所以我似乎找不到适合我的示例。

我要做的就是编写一个 junit 测试，我可以在其中使用我的一个 dao 类，并让它与 hibernate 和所有东西一起工作，但为此我需要将它加载到真正的 spring 上下文中。

我试过这样写我的测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes=HibernateConfig.class, loader=AnnotationConfigContextLoader.class)

public class TestNodeDao {

    @Configuration
    @ComponentScan(basePackages = "com.orclands" )
    static class Config {

        @Bean
        public NodeDao nd() {
            NodeDao nd = new NodeDao();

            return nd;
        }
    }

    @Autowired
    private NodeDao nd; 
```

但它不能在`nodeDao`. 它说`NoSuchBeanDefinitionException`。

如果我尝试自动装配`NodeDao`，那么它会运行，但是将它作为弹簧测试运行的唯一一点是，我可以测试真正的 spring-configured `NodeDao`。

我也试过没有组件扫描，有组件扫描但没有bean声明和其他一些方法，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:32:08.330

两件事情...

1.  无需声明加载程序。
2.  一旦您声明了显式配置类，将不再检测默认值（即嵌套的静态配置类）。

所以尝试这样的事情：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes={HibernateConfig.class, TestNodeDao.Config.class})
public class TestNodeDao {

  @Configuration
  static class Config {

      @Bean
      public NodeDao nd() {
        return new NodeDao();
      }
  }

  @Autowired
  private NodeDao nd;

  // ...
} 
```

或者甚至更清洁：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class TestNodeDao {

  @Configuration
  @Import(HibernateConfig.class)
  static class Config {

      @Bean
      public NodeDao nd() {
        return new NodeDao();
      }
  }

  @Autowired
  private NodeDao nd;

  // ...
} 
```

问候，

山姆

# iphone - 加载数据 uitextfield

> ID：14638943
> 
> 赞同：0
> 
> 时间：2013-02-01T02:50:30.867
> 
> 标签：iphone, ios, objective-c, uitextfield

我有一个 uitext 字段 iboutlet 集合，我想加载数据，但 loadData 不起作用，只有 saveData。

保存数据：

```
-(IBAction)saveData:(id)sender{
for (UITextField*longitud in guardarDatos){
    NSString*saveString=longitud.text;
    NSUserDefaults*defauls = [NSUserDefaults standardUserDefaults];
    [defauls setObject:saveString forKey:@"savedString"];
    [defauls synchronize];
    NSLog(@"%@",saveString);
}
} 
```

加载数据：

```
-(IBAction)loadData:(id)sender{
for (UITextField*longitud in guardarDatos){
    NSUserDefaults*defauls = [NSUserDefaults standardUserDefaults];
    NSString*loadString=[defauls objectForKey:@"savedString"];
    [longitud setText:loadString];
    NSLog(@"%@",longitud);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:26:31.167

您正在使用相同的密钥保存不同的对象。所以对不同的对象使用不同的键

保存数据

```
-(IBAction)saveData:(id)sender{
UITextField*longitud = nil;
for (int i = 0; i < guardarDatos.count; i++){
    longitud  = [guardarDatos objectAtIndex:i];
    NSString*saveString=longitud.text;
    NSUserDefaults*defauls = [NSUserDefaults standardUserDefaults];
    [defauls setObject:saveString forKey:[NSString stringWithFormat:@"savedString%d",i]];
    [defauls synchronize];
    NSLog(@"%@",saveString);
}
} 
```

加载数据：

```
-(IBAction)loadData:(id)sender{
UITextField*longitud = nil;
for (int i = 0; i < guardarDatos.count; i++){
    longitud  = [guardarDatos objectAtIndex:i];
    NSUserDefaults*defauls = [NSUserDefaults standardUserDefaults];
    NSString*loadString=[defauls objectForKey:[NSString stringWithFormat:@"savedString%d",i]];
    [longitud setText:loadString];
    NSLog(@"%@",longitud);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:08:58.477

即使您正确保存，在 saveData 结束时，objectForKey:@"savedString" 只有一个值，即您保存的最后一个值。当您加载数据时，它将为每个文本字段加载相同的数据。你的逻辑似乎是错误的。每次为 savedString 设置一个不同的名称，并尝试从新名称中获取值。

另一个建议是，在为您拥有的所有文本字段运行之前，尝试为一个文本字段运行 saveData 和 loadData 。

# python - 用于重复标点和符号的 Python 正则表达式

> ID：14638945
> 
> 赞同：1
> 
> 时间：2013-02-01T02:50:53.953
> 
> 标签：python, regex

我需要一个匹配重复（多个）标点和符号的正则表达式。基本上所有重复的非字母数字和非空白字符，例如 ...、???、!!!、###、@@@、+++ 等。它必须是重复的相同字符，所以不是像“！？@”这样的序列。

我曾尝试过 [^\s\w]+ ，虽然它涵盖了所有 !!!, ???, $$$ 案例，但这给了我比我想要的更多的东西，因为它也会匹配 "!?@" .

有人可以启发我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:46:38.427

我想你正在寻找这样的东西：

`[run for run, leadchar in re.findall(r'(([^\w\s])\2+)', yourstring)]`

例子：

```
In : teststr = "4spaces    then(*(@^#$&&&&(2((((99999****"

In : [run for run, leadchar in re.findall(r'(([^\w\s])\2+)',teststr)]
Out: ['&&&&', '((((', '****'] 
```

这将为您提供运行列表，不包括该字符串中的 4 个空格以及像 '*(@^' 这样的序列

如果这不是您想要的，您可以使用示例字符串以及您想要查看的确切输出来编辑您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:53:55.540

试试这个模式：

```
([.\?#@+,<>%~`!$^&\(\):;])\1+ 
```

`\1`指的是第一个匹配的组，即括号中的内容。

您需要根据需要扩展标点和符号列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T03:23:18.127

编辑：@Firoze Lafeer 发布了一个使用单个正则表达式完成所有操作的答案。如果有人有兴趣将正则表达式与过滤函数结合起来，我会保留它，但对于这个问题，使用 Firoze Lafeer 的答案会更简单、更快捷。

在我看到 Firoze Lafeer 的答案之前写的答案如下，不变。

一个简单的正则表达式不能做到这一点。经典的精辟总结是“正则表达式不能算”。讨论在这里：

[如何使用正则表达式检查字符串是否为回文？](https://stackoverflow.com/questions/233243/how-to-check-that-a-string-is-a-palindrome-using-regular-expressions)

对于 Python 解决方案，我建议将正则表达式与一些 Python 代码结合起来。正则表达式会抛出所有不包含某种标点符号的内容，然后 Python 代码会检查以抛出错误匹配项（包含标点符号但不是所有相同字符的匹配项）。

```
import re
import string

# Character class to match punctuation.  The dash ('-') is special
# in character classes, so put a backslash in front of it to make
# it just a literal dash.
_char_class_punct = "[" + re.escape(string.punctuation) + "]"

# Pattern: a punctuation character followed by one or more punctuation characters.
# Thus, a run of two or more punctuation characters.
_pat_punct_run = re.compile(_char_class_punct + _char_class_punct + '+')

def all_same(seq, basis_case=True):
    itr = iter(seq)
    try:
        first = next(itr)
    except StopIteration:
        return basis_case
    return all(x == first for x in itr)

def find_all_punct_runs(text):
    return [s for s in _pat_punct_run.findall(text) if all_same(s, False)]

# alternate version of find_all_punct_runs() using re.finditer()
def find_all_punct_runs(text):
    return (s for s in (m.group(0) for m in _pat_punct_run.finditer(text)) if all_same(s, False)) 
```

我按照我的方式编写`all_same()`，以便它在迭代器上和在字符串上一样好。Python 内置`all()`返回一个空序列，`True`这不是我们`all_same()`对`True`.`all()`

这使用 Python 的内部（正则表达式引擎或）尽可能多地完成工作，`all()`因此它应该非常快。对于较大的输入文本，您可能需要重写`find_all_punct_runs()`以使用`re.finditer()`而不是`re.findall()`. 我举了一个例子。该示例还返回生成器表达式而不是列表。你总是可以强制它列出一个列表：

```
lst = list(find_all_punct_runs(text)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T03:33:25.090

我会这样做：

```
>>> st='non-whitespace characters such as ..., ???, !!!, ###, @@@, +++ and' 
>>> reg=r'(([.?#@+])\2{2,})'
>>> print [m.group(0) for m in re.finditer(reg,st)] 
```

或者

```
>>> print [g for g,l in re.findall(reg, st)] 
```

任一打印：

```
['...', '???', '###', '@@@', '+++'] 
```

# nginx - 如何以及在哪里可以在 Nginx 中设置 MONO_IOMAP=all

> ID：14638949
> 
> 赞同：2
> 
> 时间：2013-02-01T02:51:34.187
> 
> 标签：nginx, mono

我在 Ubuntu 中使用 Mono(asp.net mvc)，为了解决区分大小写的问题，我必须全部设置 IOMAP。

不幸的是，我只找到了 Apache 示例（[http://www.mono-project.com/IOMap](http://www.mono-project.com/IOMap)），任何人都可以告诉我如何在 Nginx 中完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:40:11.257

请查看以下链接：

[https://serverfault.com/a/452835/20853](https://serverfault.com/a/452835/20853)

[http://forum.nginx.org/read.php?11,121225,164503](http://forum.nginx.org/read.php?11,121225,164503)

开始时，`fastcgi-mono-server`您可以：

```
MONO_IOMAP=all  fastcgi-mono-server4 /address=127.0.0.1 /applications=/:/srv/www/ /socket=tcp:9000 & 
```

或者您可以：

```
export MONO_IOMAP=all  
fastcgi-mono-server4 /address=127.0.0.1 /applications=/:/srv/www/ /socket=tcp:9000 & 
```

# macos - 在 Mac OS X 上使用 gcc 4.2 安装 gcc 3.4.6

> ID：14638956
> 
> 赞同：0
> 
> 时间：2013-02-01T02:52:34.620
> 
> 标签：macos, gcc

我正在尝试在 Mac OS X 10.6.8 上安装 gcc 3.4.6；要安装 gcc 3.4.6，我需要一个编译器，并且不知何故我能够安装 gcc-4.2。现在使用 4.2 我正在尝试安装 3.4.6，这会引发错误

```
./gcc.c:716: warning: string length ‘2483’ is greater than the length ‘509’ ISO C90 compilers are required to support
./gcc.c:723: warning: string length ‘636’ is greater than the length ‘509’ ISO C90 compilers are required to support
./gcc.c:906: warning: string length ‘529’ is greater than the length ‘509’ ISO C90 compilers are required to support
./gcc.c:924: warning: string length ‘608’ is greater than the length ‘509’ ISO C90 compilers are required to support
./gcc.c:1095: error: expected expression before ‘,’ token
./gcc.c:1506: warning: string length ‘833’ is greater than the length ‘509’ ISO C90 compilers are required to support
./gcc.c: In function ‘main’:
./gcc.c:6261: warning: format not a string literal and no format arguments
make[1]: *** [gcc.o] Error 1
make: *** [all-gcc] Error 2 
```

任何有关为什么会出现此错误以及解决方案是什么的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:59:51.817

你不能使用新版本的 gcc 来编译一个非常旧的版本，因为它会导致大量的语法错误。也许你应该找到一个预编译的版本。

# javascript - appendChild 不会将节点添加到指定父节点的子节点列表的末尾

> ID：14638957
> 
> 赞同：1
> 
> 时间：2013-02-01T02:52:43.563
> 
> 标签：javascript, dom, appendchild

这是我的代码

```
var targetArea = document.getElementById('nav');
var div = document.createElement('div');
var snippet = document.createTextNode('this is a new DIV');
div.appendChild(snippet);
targetArea.appendChild(div); 
```

这是我的例子：

[http://jsfiddle.net/dennisboys/BRtYb/6/](http://jsfiddle.net/dennisboys/BRtYb/6/)

developer.mozilla.org/en-US/docs/DOM/Node.appendChild，文档说“将节点添加到指定父节点的子节点列表的末尾。”，但我的示例显示，它添加到孩子名单的首位。知道为什么会这样吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T02:55:54.410

`.createTextNode`应该叫上`document`。

```
var targetArea = document.getElementById('nav');
var div = document.createElement('div');
var snippet = document.createTextNode('this is a new DIV');
div.appendChild(snippet);
targetArea.appendChild(div); 
```

但是通过您的示例，您使用的是 jQuery，那么为什么不这样做：

```
$('#nav').append('<div>this is a new DIV</div>'); 
```

***[和演示。](http://jsfiddle.net/BRtYb/8/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:55:20.433

createTextNode 是文档 api，而不是元素 api [https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode)

我相信您正在寻找 div.textContent

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:04:49.100

```
document.getElementById('nav')
        .appendChild(document.createElement('div'))
        .appendChild(document.createTextNode('this is a new DIV')); 
```

或者

```
document.getElementById('nav')
        .appendChild(document.createElement('div'))
        .textContent = 'this is a new DIV'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T21:51:34.880

在您看来，end 和 top 有什么区别？它们不是很相关，但我认为屏幕上的外观取决于您使用的位置。对于绝对定位，'end' 意味着'top'，对于relative 意味着右下或'end'

# objective-c - 奇怪的目标C错误，属性不区分大小写？

> ID：14638960
> 
> 赞同：7
> 
> 时间：2013-02-01T02:53:18.133
> 
> 标签：objective-c

我有两个属性“M”和“m”，这不是我所知道的最好的编码风格，但请容忍我。在 init 方法中对这些属性的赋值不能正常工作。这是完整的代码：

```
#import "AppDelegate.h"

@interface Foo : NSObject
@property (nonatomic, assign) int M;
@property (nonatomic, assign) int m;
- (id)initWithM:(int)M m:(int)m;
@end

@implementation Foo

- (id)initWithM:(int)M m:(int)m {
    if((self = [super init])) {
        self.M = M;
        printf("M = %d %d\n", M, self.M);
        self.m = m;
        printf("M = %d %d\n", M, self.M);
        printf("m = %d %d\n", m, self.m);
    }
    return self;
}
@end

@implementation AppDelegate
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    Foo *f = [[Foo alloc] initWithM:2 m:1];
}
@end 
```

这是 printf 的输出：

```
M = 2 2
M = 2 1
m = 1 0 
```

如果我将“M”更改为“BAR”并将“m”更改为“bar”，它会按我的预期工作。除了编译器错误之外，还有其他解释吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T02:57:11.127

```
@property int M;
@property int m; 
```

两者都创建

```
- (void)setM:(int) 
```

如果你真的想同时拥有一个`m`和一个`M`属性（你绝对不应该），你可以使用

```
@property int M;
@property (setter = setLowerCaseM:, getter = lowerCaseM)int m; 
```

# php - 将两个嵌套的关联数组变成一个平面数组？

> ID：14638963
> 
> 赞同：2
> 
> 时间：2013-02-01T02:53:37.123
> 
> 标签：php, arrays, loops, flatten

我正在运行两个查询，它们返回类似于如下所示的数组：

第一的：

```
array(
    array(
        'id' => 1
    ),
    array(
        'id' => 2
    ),
    array(
        'id' => 3
    ),
    array(
        'id' => 4
    ),
) 
```

第二：

```
array(
    array(
        'id' => 4
    ),
    array(
        'id' => 5
    ),
    array(
        'id' => 6
    ),
    array(
        'id' => 7
    ),
) 
```

但我想结束

```
$ids = array(1,2,3,4,5,6,7); 
```

但我能想到的唯一方法是

```
$ids = array();
foreach(array($array1, $array2) as $a){
    foreach($a as $id){
        $ids[] = $id['id'];
    }
}
$ids = array_unique($ids); 
```

但这对我来说似乎不是很有效，并且有大量的数组函数，我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:58:46.557

有几种方法可以处理这个问题。我想我可能会从`array_merge()`两个原始数组开始，然后将其展平`array_map()`，最后调用`array_unique()`.

```
// Combine them
$new = array_merge($array1, $array2);
// Flatten them
// array_map() is used to select the 'id' key from each
$new = array_map(function($a) { 
  return $a['id'];
}, $new);
// And get the unique values
$ids = array_unique($new);

print_r($ids);
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [5] => 5
    [6] => 6
    [7] => 7
) 
```

### 更好：在一个查询中完成。

看到查询后，这些不需要是两个数组。它可以通过单个`UNION`查询来完成。使用普通`UNION`而不是 a`UNION ALL`将为您删除重复数据。

```
SELECT
  game_id AS id
FROM user_game 
WHERE user_id = :userid
UNION
SELECT
  id
FROM games
WHERE referee_id = :userid OR reviewer_id = :userid
ORDER BY id 
```

在获取行时，由于您只有一列，您可以考虑在获取时直接将其展平。

```
// For example
while ($row = $stmt->fetch()) {
  // Pluck only the id from the row fetched
  $ids[] = $row['id'];
}
// $ids is now a 1D array. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:01:20.307

不确定这是否是您要查找的内容，但请尝试：

```
array_unique(array_merge($firstArr, $secndArr)); 
```

可能不是因为您的数组是关联的，但至少您可以跳过一些步骤。

# regex - 从 Excel 中解析 A ccess 表上 LIKE 子句中的正则表达式

> ID：14638966
> 
> 赞同：0
> 
> 时间：2013-02-01T02:53:52.490
> 
> 标签：regex, vba, ado, adodb

我有一个老式的 Access 数据库 (.mdb)。我有一个启用宏的 Excel 电子表格，它通过 ADODB 连接与该数据库进行交互。

我想在“like”子句中使用正则表达式对数据库执行查询；就像是：

（我想匹配“SM39_002xx”）

`"SELECT Serial from tbl1939 where Serial like RegExpMatch(""^SM+[0-9]+[_][0-9]+[a-z]?"", [Serial])"`

它在 Access 中完美运行，但从 Excel 中找不到“RegExpMatch”函数，整个事情都失败了。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:59:28.213

我相当确定您在 RegExpMatch 中拥有的用户定义函数 (UDF) 仅在 MS Access 中可用。在大多数情况下，除非没有其他选择，否则您应该避免创建它们。例如，以下查询将在 MS Access 之外运行并近似于您想要的：

```
SELECT t.Field1
FROM ATable t
WHERE t.Field1 Like "SM[0-9][0-9][_][0-9][0-9][0-9][a-z]?" 
```

# java - 字符串排列

> ID：14638970
> 
> 赞同：0
> 
> 时间：2013-02-01T02:54:04.180
> 
> 标签：java, string, arraylist, permutation, recurrence

我最近试图编写一个脚本，打印出 Java 中一个单词的所有排列。由于某种原因，它只打印出一个。我就是想不通！

```
import java.util.*;

public class AllPermutations {

    ArrayList<String> letters = new ArrayList<String>();
    public void main(){
        letters.add("H");
        letters.add("a");
        letters.add("s");
        permutate("",letters);
    }

    public void permutate(String word, ArrayList<String> lettersLeft){
        if(lettersLeft.size()==0){
            System.out.println(word);
        }else{
            for(int i=0;i<lettersLeft.size();i++){
                String newWord = new String();
                newWord = word+lettersLeft.get(i);
                lettersLeft.remove(i);
                permutate(newWord, lettersLeft);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:06:54.980

您需要将已删除的字母添加回 lettersLeft 列表

```
public void permutate(String word, ArrayList<String> lettersLeft){
    if(lettersLeft.size()==0){
        System.out.println(word);
    }else{
        for(int i=0;i<lettersLeft.size();i++){
            String temp = lettersLeft.remove(i);
            String  newWord = word+temp;
            permutate(newWord, lettersLeft);
            lettersLeft.add(i, temp);
        }
    }
} 
```

我还没有测试过，但我认为它应该可以工作。

问题是 Java/您通过引用传递，而不是复制（ArrayList）。因此，一旦您到达递归树的底部， lettersLeft 将包含 0 个元素，而一旦您返回，它仍将包含 0 个元素。

附带说明一下，StringBuilder/StringBuffer 更擅长执行字符串置换任务，因为 String 是不可变的，因此创建新字符串会浪费大量资源，n！确切地说。两个 StringBuilder/Buffer 的区别由你来发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:40:33.440

原因是`lettersLeft`总是通过引用传递。一旦您从 lettersLeft 中删除了一个字母，它就会被永久删除。因此，对于第一次迭代，您打印出“HAS”。一旦完成，递归算法会备份一个级别以进行第二次迭代，但是您知道什么？字母左为空。所以它在没有通过 if 语句的情况下终止，导致它没有得到另一个单词或排列。为了解决这个问题，创建一个本地副本，就像使用 newWord 一样。希望有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-22T10:58:34.530

在这种情况下，您要从中删除字母`Arraylist`，它会变空，直到它到达第一个单词的末尾。然后在该列表大小之后总是为零`Add the removed letter back to the list`............

我希望`recommend`您使用下面的链接并找到字符串排列的好例子，因为字符串排列有内存高效和空间高效的解决方案......

[http://www.codingeek.com/java/strings/find-all-possible-permutations-of-string-using-recursive-method/](http://www.codingeek.com/java/strings/find-all-possible-permutations-of-string-using-recursive-method/)

# design-patterns - SOLID GRASP 控制器模式？

> ID：14638972
> 
> 赞同：3
> 
> 时间：2013-02-01T02:54:33.687
> 
> 标签：design-patterns, controller, solid-principles, single-responsibility-principle, grasp

我有一个关于应用 GRASP 控制器模式同时保持其 SOLID 的问题，更具体地说，同时保持它的单一职责。

[维基百科的](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29#Controller)控制器模式定义说：

> 控制器模式将处理系统事件的责任分配给代表整个系统或用例场景的非 UI 类。控制器对象是负责接收或处理系统事件的非用户界面对象。

关于 SOLID 的[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)：

> 在面向对象编程中，单一职责原则指出每个类都应该有单一职责，并且该职责应该完全由类封装。它的所有服务都应与该责任密切相关。

让我们来看一些示例代码。假设我有以下 Java 类：

```
public class foo {
    public foo(){}
    public int foo1(){/*Some code*/}
    public String foo2(){/*Some code*/}
    public String foo3(int foo31){/*Some code*/}
}

public class bar {
    public bar(){}
    public int bar1(){/*Some code*/}
    public String bar2(){/*Some code*/}
    public String bar3(int bar31){/*Some code*/}
} 
```

什么是一个好的控制器实现，同时保持一个单一的责任？我只是通过用例还是什么？例如：

```
public class bazController {

    private foo fooInstance;
    private bar barInstance;

    public bazController(){
        this.fooInstance = new foo();
        this.barInstance = new bar();
    }

    public void fooAction1(int arg){
        this.foo.foo3(arg);
    }

    public void barAction1(int arg){
        this.bar.bar3(arg);
    }

    public void fooAction2(){
        this.foo.foo1();
    }

    public void barAction2(){
        this.bar.bar1();
    }

} 
```

我在这里承担一项责任吗？我这样做或理解正确吗？事先谢谢你。

编辑：如果`bazController`有这种方法会发生什么，使两个类相关？

```
public int bazAction(){
    return this.foo.fooAction1() + this.bar.barAction1();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:54:06.683

我不是一个经验丰富的开发人员，但我会尝试基于对概念的理解来探索我的想法。

**单一职责：**我相信，这是“你的班级负责什么？”这个问题的答案。当你要回答这个问题时，你应该只说一个责任。在您的情况下，答案是：“我的班级负责控制 baz”（您的实现当然应该这样做）。

由于您的答案仅指定了一项职责，因此您正确实施了它。

但我认为您的代码不符合`D`. `SOLID`即依赖注入。您可以通过构造函数或其他方式注入`foo`和注入。`bar`

**更新：**您的班级仍然很好，因为您班级的职责是`control the baz`.

`foo`并且`bar`是 的组件，`baz`您正在通过`bazCntroller`.

我可以说，`Single Responsibility`当您添加的方法除了控制您的 baz 之外，您还违反了其他工作。前任：

```
public void LogBazExecution() {}
public int GetBazExecutionCount() {} 
```

如您所见，`baz controller`跟踪 baz 动作触发的次数不是 的责任。

原理背后的原因是`ease of maintenance`。当每个类被设计为只有一个职责时，您很容易在系统中找到故障的位置，并且可以在需要时轻松扩展它，而不会引入很多新的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:45:58.700

这实际上取决于类*foo*和*bar*背后的上下文以及它们在业务方面与控制器的业务上下文的紧密程度。

在您的示例中，您有与`foo`和 一起使用的方法`bar`，但与和一起使用的方法**为零**。对我来说，这表明并且可能没有太多共同点。`foo``bar``foo``bar`

这就是我将如何更改您的示例：（假设`foo`并且`bar`没有任何共同点）：

```
public class fooController
{
    private foo fooInstance;

    public fooController() {
        fooInstance = new foo
    }

    public void fooAction1(int arg){
        this.foo.foo3(arg);
    }

    public void fooAction2(){
        this.foo.foo1();
    }
}

public class barController 
{

    private bar barInstance;

    public bazController(){
        this.barInstance = new bar();
    }

    public void barAction1(int arg){
         this.bar.bar3(arg);
    }

    public void barAction2(){
         this.bar.bar1();
    }
} 
```

**编辑**
您将拥有一个委托给多个业务逻辑实例的控制器的示例可能如下所示：

```
public class UserSettingsController
{
    private UserAddressLogic addressLogic;
    private UserPersonalInfoLogic personalInfoLogic;

    public UserSettingsController() {
        addressLogic = new UserAddressLogic();
        personalInfoLogic = new UserPersonalInfoLogic();
    }

    public User GetUser() {
        User user = new User();
        user.Address = addressLogic.GetUserAddress();
        user.PersonalInfo = personalInfoLogic.GetPersonalInfo();

        return user;
    }
} 
```

# matlab - 如何基于两个几乎垂直的向量创建正交基？

> ID：14638976
> 
> 赞同：3
> 
> 时间：2013-02-01T02:55:13.343
> 
> 标签：matlab, orthogonal

我正在尝试基于两个“几乎”垂直向量创建一个正交坐标系，这些向量是从医学图像中推导出来的。我有两个向量，例如：

```
Z=[-1.02,1.53,-1.63];
Y=[2.39,-1.39,-2.8]; 
```

它们几乎是垂直的，因为它们的内积等于 5e-4。

然后我找到他们的交叉产品来创建我的第三个基础：

```
X=cross(Y,Z); 
```

甚至这第三个向量也不是完全正交于`Z`and `Y`，因为它们的内积是 -15 和 -16 的顺序，但我猜这几乎为零。为了使用这组向量作为局部坐标系的正交基，我假设它们应该几乎完全垂直。我首先认为我可以通过将向量四舍五入到更少的小数来做到这一点，但没有帮助。我想我需要找到一种方法来稍微改变我的初始向量以使它们更垂直，但我不知道该怎么做。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:23:25.943

如上所述，格拉姆-施密特是正确的。

基本上，您想从 Y 中减去在 Z 方向上的 Y 分量（注意：您也可以对 Z 而不是 Y 进行操作）。

Y 在 Z 方向的分量由下式给出：

```
 dot(Y,Z)*Z/(norm(Z)^2) 
```

（Y 到 Z 的投影）

请注意，如果 Y 与 Z 正交，则为 0。

所以：

```
 Y = Y - dot(Y,Z)*Z/(norm(Z)^2) 
```

Z 保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:16:17.643

let V=Y+aZ Z dot V = 0 这样你就可以解决 a 并得到 V 现在使用 V 和 Z 作为你的基础

您可能需要对向量进行归一化并使用双精度类型来获得所需的精度。

# ruby-on-rails - 需要使用 key-value 为每个用户提取值

> ID：14638984
> 
> 赞同：0
> 
> 时间：2013-02-01T02:55:55.780
> 
> 标签：ruby-on-rails, key-value

努力让正确的分数出现在每个用户>显示页面上。

我`helper_method :high_scores`在应用程序控制器中使用 a ，如下所示：

```
def scores
   User.joins(submissions: :score).maximum(:sub_total, group: 'users.id')  
end 
```

这会返回：

```
{6619=>"5", 6608=>"50", 6601=>"10", 6598=>"15", 6594=>"20", 6582=>"20", 6574=>"5", 6565=>"15", 6553=>"20", 6549=>"10", 6543=>"5", 6527=>"10", 6476=>"10", 6467=>"20", 6465=>"20", 6447=>"15", 6414=>"25", 6404=>"20"...} 
```

以 user_id 作为键，返回该用户的最高分值。

然后，我想在用户展示模板中呈现每个成员的高分：

```
 <%= contest_score %> contest points<br/> 
```

或类似的东西。

我不知道如何提取值。这听起来很简单，但我正在学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:58:39.750

尝试这个

```
<% contest_scores.each do |(user_id, score)| %>
  <%= user_id %>
  <%= score %>
<% end %> 
```

# javascript - 动态重新加载后的 jQuery 选择器和 $(this)

> ID：14638986
> 
> 赞同：0
> 
> 时间：2013-02-01T02:56:04.323
> 
> 标签：javascript, jquery

我需要一些帮助。我每 5 秒在 div 中加载一个条目列表。每个条目都是一个 div 并且有一个唯一的 ID。像这样：

```
<div class="entry">
<div class="textbox">
    <p class="entry-text">
        <?php echo $text;?>
    </p>
</div>
<div class="infobox">
    <p class="date"><a #<?php echo $id;?> id="<?php echo $id;?>" href="gen_details.php?id=<?php echo $id;?>"><?php echo $t;?></a> </p>
    <p class="ip"><?php echo $ip;?></p>
</div> 
```

正如我所说，这些每 5 秒加载一次。我正在为每个条目添加一个详细信息页面，其中：

```
 $('.date a').click(function () {
                var dataString = 'id=' + $(this).attr("id"); 
                //alert(dataString);
                $.ajax({
                    type: "POST",
                    url: "gen_details.php",
                    data: dataString,
                    success: function(data) {
                        $("#content").hide().fadeOut('fast');
                        $("#content").html(data).show('fast');
                        refresh = 0;
                    },
                });
                return false;
            }); 
```

这工作得很好，直到它重新加载。它似乎失去了 a href 的句柄，而不是执行它去 gen_details.php 的过程

我曾尝试使用 .on()，但我不知道如何使用 .on() 获取条目的 ID，因为我不能使用 $(this) (afaik)。

我希望我至少解释了我的问题一半。英语不是我的母语，所以没那么容易。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:25:27.817

试试这个选择器

```
$('div').on('click', '.date a', function () { 
```

这会将事件委托给其父 div。所以它也应该适用于动态创建的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T03:10:35.740

```
Live click event bind event handler to element even after you reload some element. Default click event bind to element when a page load once you reload that element then it also delete event handler of that element.
works on till jquery 1.7 version.

    $('.date a').live('click',(function (e) {
    e.preventDefault()
                    var dataString = 'id=' + $(this).attr("id"); 
                    //alert(dataString);
                    $.ajax({
                        type: "POST",
                        url: "gen_details.php",
                        data: dataString,
                        success: function(data) {
                            $("#content").hide().fadeOut('fast');
                            $("#content").html(data).show('fast');
                            refresh = 0;
                        },
                    });

                });
//when jQuery > 1.7 then used this method

$('body').on('click' '.date a',function () {
  //call 
 }); 
```

# mysql - 用于删除背靠背重复项的 MySQL

> ID：14638989
> 
> 赞同：0
> 
> 时间：2013-02-01T02:56:15.857
> 
> 标签：mysql, sql

我有一个表，其中有一些重复的文件访问信息，其中重复的文件访问定义为同一用户背靠背访问同一文件。换句话说，如果用户按该顺序访问文件 A、B、A，则它不会被视为重复文件。所以基本上，每个用户我想确保每个后续访问都是针对与上一个不同的文件。

```
UserID  FileID
1       1
2       1
1       1   <-  Remove
2       1   <-  Remove
2       2
1       2
2       2   <-  Remove
1       1
1       2 
```

任何人都知道如何在mysql中处理这样的事情？理想情况下，我想在不使用函数的情况下使用它，但如果它是唯一的选择，我对函数持开放态度。

该表有以下列：ID（主键）、userID、fileID、accessTime

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:43:27.950

如果你制作了一个 SPROC，它会看起来像这样。您可能需要另一个临时表和循环，因为当游标打开时 DELETE 语句可能会失败。

```
CREATE PROCEDURE `proc_CURSOR` ()  
BEGIN  
    CREATE TEMPORARY TABLE lastUserAccess;
    DECLARE cur1 CURSOR FOR SELECT userId, fileId, pkId FROM table1 ORDER BY time_stamp;  
    DECLARE a, b, c, d INT;  
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET a = 1;  
    OPEN cur1;  

    WHILE a = 0 DO  
        FETCH cur1 INTO b, c, d;

        SELECT fileId FROM lastUserAccess WHERE userId = b

        IF fileId IS NULL THEN
            INSERT INTO lastUserAccess (b, c, d);
        ELSE
            IF fileId = c THEN
                DELETE FROM table1 WHERE pkId = d;
            ELSE
                UPDATE lastUserAccess SET fileId = c WHERE userId = b;
            END IF;
        END IF;
    END WHILE;  

    CLOSE cur1;  
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:47:06.407

对于 mysql

```
DELETE a from  tbl a , tbl b WHERE a.Id>b.Id and
a.UserID = b.UserID and a.FileID= b.FileID; 
```

检查这个小提琴[http://sqlfiddle.com/#!2/aece0a/1](http://sqlfiddle.com/#!2/aece0a/1)

不能在 mysql 中工作，对于 sql server

```
DELETE FROM tbl WHERE ID NOT IN (SELECT MIN(ID) 
FROM tbl GROUP BY userID, fileID) 
```

希望这对你有用。

# typescript - TypeScript 中是否可以将强类型函数作为参数？

> ID：14638990
> 
> 赞同：735
> 
> 时间：2013-02-01T02:56:27.053
> 
> 标签：typescript

在 TypeScript 中，我可以将函数的参数声明为函数类型。有没有我想念的“类型安全”的方式来做到这一点？例如，考虑一下：

```
class Foo {
    save(callback: Function) : void {
        //Do the save
        var result : number = 42; //We get a number from the save operation
        //Can I at compile-time ensure the callback accepts a single parameter of type number somehow?
        callback(result);
    }
}

var foo = new Foo();
var callback = (result: string) : void => {
    alert(result);
}
foo.save(callback); 
```

保存回调不是类型安全的，我给它一个回调函数，其中函数的参数是一个字符串，但我传递给它一个数字，并且编译没有错误。我可以在保存类型安全函数中设置结果参数吗？

TL;DR 版本：TypeScript 中是否有一个等效的 .NET 委托？

* * *

## 回答 #1

> 赞同：1008
> 
> 时间：2013-02-01T03:25:19.147

当然。函数的[类型](https://www.typescriptlang.org/docs/handbook/functions.html#writing-the-function-type)由其参数的类型和返回类型组成。这里我们指定`callback`参数的类型必须是“接受数字并返回类型的函数`any`”：

```
class Foo {
    save(callback: (n: number) => any) : void {
        callback(42);
    }
}
var foo = new Foo();

var strCallback = (result: string) : void => {
    alert(result);
}
var numCallback = (result: number) : void => {
    alert(result.toString());
}

foo.save(strCallback); // not OK
foo.save(numCallback); // OK 
```

如果你愿意，你可以定义一个[类型别名](https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases)来封装它：

```
type NumberCallback = (n: number) => any;

class Foo {
    // Equivalent
    save(callback: NumberCallback) : void {
        callback(42);
    }
} 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2014-06-04T09:59:52.393

以下是一些常见的 .NET 委托的 TypeScript 等价物：

```
interface Action<T>
{
    (item: T): void;
}

interface Func<T,TResult>
{
    (item: T): TResult;
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-08-18T04:29:39.640

```
type FunctionName = (n: inputType) => any;

class ClassName {
    save(callback: FunctionName) : void {
        callback(data);
    }
} 
```

这肯定符合函数式编程范式。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-01-25T19:00:15.467

我意识到这篇文章很旧，但是有一种更紧凑的方法，与所要求的略有不同，但可能是一个非常有用的选择。您可以在调用方法时（在这种情况下为`Foo`'s ）内联声明函数。`save()`它看起来像这样：

```
class Foo {
    save(callback: (n: number) => any) : void {
        callback(42)
    }

    multipleCallbacks(firstCallback: (s: string) => void, secondCallback: (b: boolean) => boolean): void {
        firstCallback("hello world")

        let result: boolean = secondCallback(true)
        console.log("Resulting boolean: " + result)
    }
}

var foo = new Foo()

// Single callback example.
// Just like with @RyanCavanaugh's approach, ensure the parameter(s) and return
// types match the declared types above in the `save()` method definition.
foo.save((newNumber: number) => {
    console.log("Some number: " + newNumber)

    // This is optional, since "any" is the declared return type.
    return newNumber
})

// Multiple callbacks example.
// Each call is on a separate line for clarity.
// Note that `firstCallback()` has a void return type, while the second is boolean.
foo.multipleCallbacks(
    (s: string) => {
         console.log("Some string: " + s)
    },
    (b: boolean) => {
        console.log("Some boolean: " + b)
        let result = b && false

        return result
    }
) 
```

该`multipleCallback()`方法对于诸如可能成功或失败的网络调用之类的事情非常有用。再次假设一个网络调用示例，当`multipleCallbacks()`被调用时，成功和失败的行为都可以在一个地方定义，这有助于未来的代码阅读器更加清晰。

一般来说，根据我的经验，这种方法更简洁，更简洁，整体上更清晰。

祝大家好运！

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-07-04T11:46:23.350

在 TS 中，我们可以通过以下方式键入函数：

**函数类型/签名**

这用于函数/方法的实际实现，它具有以下语法：

```
(arg1: Arg1type, arg2: Arg2type) : ReturnType 
```

**例子：**

```
function add(x: number, y: number): number {
    return x + y;
}

class Date {
  setTime(time: number): number {
   // ...
  }

} 
```

**函数类型文字**

函数类型文字是另一种声明函数类型的方法。它们通常应用于高阶函数的函数签名中。高阶函数是接受函数作为参数或返回函数的函数。它具有以下语法：

```
(arg1: Arg1type, arg2: Arg2type) => ReturnType 
```

**例子：**

```
type FunctionType1 = (x: string, y: number) => number;

class Foo {
    save(callback: (str: string) => void) {
       // ...
    }

    doStuff(callback: FunctionType1) {
       // ...
    }

} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-09-14T19:09:59.887

因为你不能轻易地将函数定义和另一种数据类型结合起来，所以我发现这些类型对强类型很有用。根据德鲁的回答。

```
type Func<TArgs extends any[], TResult> = (...args: TArgs) => TResult; 
//Syntax sugar
type Action<TArgs extends any[]> = Func<TArgs, undefined>; 
```

现在您可以强输入每个参数和返回类型！这是一个比上面更多参数的示例。

```
save(callback: Func<[string, Object, boolean], number>): number
{
    let str = "";
    let obj = {};
    let bool = true;
    let result: number = callback(str, obj, bool);
    return result;
} 
```

现在您可以编写联合类型，如对象或返回对象的函数，而无需创建可能需要导出或使用的全新类型。

```
//THIS DOESN'T WORK
let myVar1: boolean | (parameters: object) => boolean;

//This works, but requires a type be defined each time
type myBoolFunc = (parameters: object) => boolean;
let myVar1: boolean | myBoolFunc;

//This works, with a generic type that can be used anywhere
let myVar2: boolean | Func<[object], boolean>; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-06-17T05:39:56.827

如果你先定义函数类型，那么它看起来像

```
type Callback = (n: number) => void;

class Foo {
    save(callback: Callback) : void {        
        callback(42);
    }
}

var foo = new Foo();
var stringCallback = (result: string) : void => {
    console.log(result);
}

var numberCallback = (result: number) : void => {
    console.log(result);
}

foo.save(stringCallback); //--will be showing error
foo.save(numberCallback); 
```

如果没有使用普通属性语法的函数类型，它将是：

```
class Foo {
    save(callback: (n: number) => void) : void {        
        callback(42);
    }
}

var foo = new Foo();
var stringCallback = (result: string) : void => {
    console.log(result);
}

var numberCallback = (result: number) : void => {
    console.log(result);
}

foo.save(stringCallback); //--will be showing error
foo.save(numberCallback); 
```

如果你想使用像 c# generic delegates 这样的接口函数，它会是：

```
interface CallBackFunc<T, U>
{
    (input:T): U;
};

class Foo {
    save(callback: CallBackFunc<number,void>) : void {        
        callback(42);
    }
}

var foo = new Foo();
var stringCallback = (result: string) : void => {
    console.log(result);
}

var numberCallback = (result: number) : void => {
    console.log(result);
}

let strCBObj:CallBackFunc<string,void> = stringCallback;
let numberCBObj:CallBackFunc<number,void> = numberCallback;

foo.save(strCBObj); //--will be showing error
foo.save(numberCBObj); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-13T23:45:39.153

除了其他所说的，一个常见的问题是声明重载的同一函数的类型。典型情况是 EventEmitter on() 方法，它将接受多种侦听器。使用 redux 操作时可能会发生类似情况 - 并且您使用操作类型作为文字来标记重载，如果是 EventEmitters，则使用事件名称文字类型：

```
interface MyEmitter extends EventEmitter {
  on(name:'click', l: ClickListener):void
  on(name:'move', l: MoveListener):void
  on(name:'die', l: DieListener):void
  //and a generic one
  on(name:string, l:(...a:any[])=>any):void
}

type ClickListener = (e:ClickEvent)=>void
type MoveListener = (e:MoveEvent)=>void
... etc

// will type check the correct listener when writing something like:
myEmitter.on('click', e=>...<--- autocompletion 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-25T17:02:09.600

```
function callbackTesting(callbacks: {onYes: (data: any) => void,onNo: (data: any) => void,onError: (err: any) => void,}, type: String){
    switch(type){
        case "one": 
        callbacks.onYes("Print yes");
        break;
        case "two": 
        callbacks.onNo("Print no");
        break;
        default:
        callbacks.onError("Print error");
        break;
    }
}

const onYes1 = (data: any) : void => {
    console.log(data);
}
const onNo1 = (data: any) : void => {
    console.log(data);
}
const onError1 = (data: any) : void => {
    console.log(data);
}

callbackTesting({onYes: function (data: any)  {onYes1(data);},onNo: function (data: any)  {onNo1(data);},onError: function (data: any)  {onError1(data);}}, "one");

callbackTesting({onYes: function (data: any)  {onYes1(data);},onNo: function (data: any)  {onNo1(data);},onError: function (data: any)  {onError1(data);}}, "two");

callbackTesting({onYes: function (data: any)  {onYes1(data);},onNo: function (data: any)  {onNo1(data);},onError: function (data: any)  {onError1(data);}}, "cfhvgjbhkjlkm");
```

# mysql - SQL 子查询和连接

> ID：14638991
> 
> 赞同：0
> 
> 时间：2013-02-01T02:56:33.343
> 
> 标签：mysql, sql, select, subquery

```
SELECT
session.session_id as ID,
session.anum,
student.first,
student.last,
session.why,
session.studentcomments,
session.aidyear,
support.counselorcomments
FROM student
INNER JOIN session ON student.anum = session.anum
LEFT JOIN support ON session.session_id = support.session_id
LEFT JOIN (
SELECT session_id, cid, starttime FROM support ORDER BY starttime asc limit 1
) 
AS timing ON timing.session_id = session.session_id 
WHERE session.status NOT IN (0,2); 
```

这会返回我这个值：

```
+-----+-----------+---------+---------+--------------+-----------------+---------+-------------------+
| ID  | anum      | first   | last    | why          | studentcomments | aidyear | counselorcomments |
+-----+-----------+---------+---------+--------------+-----------------+---------+-------------------+
| 175 | A00000000 | rixhers | ajazi   | Appeal       |                 | 12-13   | NULL              |
| 176 | B00000000 | Testing | thisout | Tap Question |                 | 12-13   | omg!              |
| 176 | B00000000 | Testing | thisout | Tap Question |                 | 12-13   | Jesus!!           |
+-----+-----------+---------+---------+--------------+-----------------+---------+-------------------+
3 rows in set (0.00 sec) 
```

我不想在那里有两个 ID 176，我想要最近添加的一个（这就是为什么我在我的子查询中使用 order by starttime asc limit 1）。有什么办法可以让我用我现在提出的方法来解决这个问题？

编辑编号 1：

```
mysql> SELECT  session.session_id as ID,
    ->         session.anum,
    ->         student.first,
    ->         student.last,
    ->         session.why,
    ->         session.studentcomments,
    ->         session.aidyear,
    ->         support.counselorcomments
    -> FROM    student
    ->         INNER JOIN session 
    ->             ON student.anum = session.anum
    ->         LEFT JOIN support 
    ->             ON session.session_id = support.session_id
    ->         LEFT JOIN 
    ->         (
    ->             SELECT session_id, max(starttime) max_time
    ->             FROM support 
    ->             GROUP BY session_id
    ->         ) timing ON timing.session_id = support.session_id AND
    ->                     timing.max_time = support.starttime
    -> WHERE   session.status IN (0,2);
+-----+-----------+---------+---------+--------------+-----------------+---------+-------------------+
| ID  | anum      | first   | last    | why          | studentcomments | aidyear | counselorcomments |
+-----+-----------+---------+---------+--------------+-----------------+---------+-------------------+
| 175 | A00000000 | rixhers | ajazi   | Appeal       |                 | 12-13   | NULL              |
| 176 | B00000000 | Testing | thisout | Tap Question |                 | 12-13   | omg!              |
| 176 | B00000000 | Testing | thisout | Tap Question |                 | 12-13   | Jesus!!           |
+-----+-----------+---------+---------+--------------+-----------------+---------+-------------------+
3 rows in set (0.00 sec) 
```

也没有达到预期的效果吗？我的 support.starttime 是否应该是数据库的索引，因此 timing.starttime = support.starttime 会起作用？

编辑 2：

```
mysql> SELECT session_id,
    -> max(starttime) max_time FROM support
    -> GROUP BY session_id;
+------------+---------------------+
| session_id | max_time            |
+------------+---------------------+
|        176 | 2013-01-28 07:44:17 |
+------------+---------------------+
1 row in set (0.00 sec) 
```

编辑 3：

```
mysql> SELECT session_id, cid, starttime FROM support;
+------------+-----+---------------------+
| session_id | cid | starttime           |
+------------+-----+---------------------+
|        176 |   1 | 2013-01-28 07:44:08 |
|        176 |   2 | 2013-01-28 07:44:17 |
+------------+-----+---------------------+
2 rows in set (0.00 sec) 
```

编辑：现在可以使用，感谢 JQ 的帮助！

并感谢 sgeddes 的回答！

```
mysql> SELECT  DISTINCT session.session_id as id,
    ->         session.anum,
    ->         student.first,
    ->         student.last,
    ->         session.why,
    ->         session.studentcomments,
    ->         session.aidyear,
    ->         support.counselorcomments
    -> FROM    student
    ->         INNER JOIN session 
    ->             ON student.anum = session.anum
    ->         LEFT JOIN support 
    ->             ON session.session_id = support.session_id
    ->         LEFT JOIN support support2
    ->             ON support.session_id = support2.session_id
    ->                 AND support.starttime < support2.starttime
    -> WHERE   session.status IN (0,2) 
    ->     AND support2.session_id IS NULL;
+-----+-----------+---------+---------+--------------+-----------------+---------+--------------------+
| id  | anum      | first   | last    | why          | studentcomments | aidyear | counselorcomments  |
+-----+-----------+---------+---------+--------------+-----------------+---------+--------------------+
| 175 | A00000000 | rixhers | ajazi   | Appeal       |                 | 12-13   | yo please help me! |
| 176 | B00000000 | Testing | thisout | Tap Question |                 | 12-13   | Jesus!!            |
| 177 | C00000000 | ufufu   | ufufjn  | Appeal       |                 | 12-13   | NULL               |
+-----+-----------+---------+---------+--------------+-----------------+---------+--------------------+
3 rows in set (0.00 sec) 
```

编辑 4：不更改表格，当我运行报告时，我只有一个可用的历史视图。然后我现在需要一个最新的当前视图。

```
mysql> SELECT session_id, cid, counselorcomments starttime FROM support;
+------------+-----+-------------------+
| session_id | cid | starttime         |
+------------+-----+-------------------+
|        175 |   4 | NULL              |
|        175 |   5 | help!             |
|        175 |   7 | please need help! |
|        176 |   1 | omg!              |
|        176 |   2 | Jesus!!           |
|        177 |   1 | ihgggwhb          |
+------------+-----+-------------------+
6 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:59:49.540

```
SELECT  session.session_id as ID,
        session.anum,
        student.first,
        student.last,
        session.why,
        session.studentcomments,
        session.aidyear,
        support.counselorcomments
FROM    student
        INNER JOIN session 
            ON student.anum = session.anum
        INNER JOIN support 
            ON session.session_id = support.session_id
        INNER JOIN 
        (
            SELECT session_id, max(starttime) max_time
            FROM support 
            GROUP BY session_id
        ) timing ON timing.session_id = support.session_id AND
                    timing.max_time = support.starttime
WHERE   session.status NOT IN (0,2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:16:42.930

这是使用子查询的替代方法。你可以再次加入桌子。像这样的东西：

```
SELECT  DISTINCT session.session_id as ID,
        session.anum,
        student.first,
        student.last,
        session.why,
        session.studentcomments,
        session.aidyear,
        support.counselorcomments
FROM    student
        INNER JOIN session 
            ON student.anum = session.anum
        INNER JOIN support 
            ON session.session_id = support.session_id
        LEFT JOIN support support2
            ON support.session_id = support2.session_id
                AND support.starttime < support2.starttime
WHERE   session.status NOT IN (0,2) 
    AND support2.session_id IS NULL 
```

两种方法都应该产生相同的结果。

祝你好运。

# winforms - Windows 工作流程 - 审批级别流程

> ID：14638993
> 
> 赞同：0
> 
> 时间：2013-02-01T02:56:53.560
> 
> 标签：winforms, workflow-foundation-4

我打算编写一个需要多级批准才能处理某些内容的 Windows 窗体应用程序。Like Creator（请求者）-> Review（审核订单并升级到下一级）-> Clerk（一级批准）-> Manager（最终批准）-> 返回创建者

创建者/请求者填写表格并提交后，我想启动一个工作流程，该工作流程自动触发电子邮件并根据响应将其发送到下一个级别。

*   问题：我从未从事过 Windows 工作流程，WF 是否适合这种类型的应用程序？有没有可用的样本（不完全像这样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:00:59.937

这听起来像是 WF4 非常适合的流程编排。一般来说，我建议使用 IIS 软管工作流服务，并让它负责所有处理。

# vb.net - parallel.foreach 正在挂起我的应用程序

> ID：14638994
> 
> 赞同：1
> 
> 时间：2013-02-01T02:57:10.393
> 
> 标签：vb.net, .net-4.0, parallel-processing, task-parallel-library

我有一个**List(of MyCustomObject)**。此列表是 TreeView 的数据源。现在，所有收集到的对象都必须定期更新 Rising Timer1_Timer 事件。要更新我正在使用**Parallel.ForEach**。这在测试应用程序中运行良好，但在添加计算代码后最终应用程序挂起，并且可能不存在随机数的结果。请帮助修复它。

```
Imports System.Threading.Tasks
Imports Telerik.WinControls.UI
Imports System.ComponentModel
Imports System.Threading
Imports Accessibility

Public Class Form1
    Dim WithEvents bw As New BackgroundWorker

    Private Sub Button6_Click(sender As System.Object, e As System.EventArgs) Handles Button6.Click
        Upadte(rt.Nodes.Cast(Of RadTreeNode)())
    End Sub

    Private Shared Sub Upadte(Of T)(source As IEnumerable(Of T))
        Parallel.ForEach(source, New ParallelOptions With {.TaskScheduler =    TaskScheduler.FromCurrentSynchronizationContext, .MaxDegreeOfParallelism = 5}, AddressOf    zUpdate)
    End Sub

    ' Following fragment is a simple example. Real code is more difficult. It includes Network requests, WQL queries e.t.c.
    ' -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
    Private Shared Sub zUpdate(Of T)(node As T)
        Dim item = TryCast(node, RadTreeNode)
        If item Is Nothing Then
            Return
        End If
        Dim n_node As New RadTreeNode("_" & item.Name)
        n_node.Nodes.Add("Hardware")
        Dim tf As Form = Control.FromHandle(Form1.Handle)
        tf.BeginInvoke(New Action(Function() InlineAssignHelper(item, n_node)))
    End Sub
    ' -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
    Private Shared Function InlineAssignHelper(ByRef target As RadTreeNode, ByVal value As RadTreeNode) As RadTreeNode
        target.Nodes.Add(value.Clone)
        Return target
    End Function
End Class 
```

* * *

好主意！我会检查一下。顺便说一句，完整的代码没有任何秘密。这不仅仅是第一个例子。这是没有一些典型查询的完整子 zUpdate 的副本，在 STA 中运行良好：

```
Private Shared Sub zUpdate(Of T)(anode As T)
    Dim searcher As New ManagementObjectSearcher
    Dim tt_node As RadTreeNode = TryCast(anode, RadTreeNode)
    If tt_node Is Nothing Then
        Return
    End If
    Dim t_node As String = tt_node.Name
    Dim n_node As New RadTreeNode With {.Name = "_" & t_node, .Text = "_" & t_node}
    Dim opt As New ConnectionOptions
    opt.Authentication = AuthenticationLevel.PacketPrivacy
    opt.EnablePrivileges = True
    opt.Impersonation = ImpersonationLevel.Impersonate
    opt.Username = CredentialCache.DefaultNetworkCredentials.UserName
    opt.Password = CredentialCache.DefaultNetworkCredentials.Password
    opt.Authority = "ntlmdomain:" & CredentialCache.DefaultNetworkCredentials.Domain
    Dim scope As New ManagementScope("\\" & t_node & "\ROOT\CIMV2", opt)
    Dim query As New ObjectQuery

    If My.Computer.Network.Ping(t_node, 10) = False Then
        Return
        GoTo 1
    End If

    scope.Connect()
    If Not scope.IsConnected Then
        Return
        GoTo 1
    End If

    'Summary
    query.QueryString = "SELECT * FROM Win32_ComputerSystem"
    searcher.Scope = scope
    searcher.Query = query

    n_node.Nodes.Add("Summary")
    For Each queryobj As ManagementObject In searcher.Get
        With n_node.Nodes("Summary")
            .Nodes.Add("Name", "Name:" & queryobj("Name"), 6)
            .Nodes.Add("Domain", "Domain:" & queryobj("Domain"), 6)
            .Nodes.Add("Manufacturer", "Manufacturer:" & queryobj("Manufacturer"), 6)
            .Nodes.Add("Model", "Model:" & queryobj("Model"), 6)
            .Nodes.Add("NumberOfLogicalProcessors", "NumberOfLogicalProcessors:" & queryobj("NumberOfLogicalProcessors").ToString, 6)
            .Nodes.Add("NumberOfProcessors", "NumberOfProcessors:" & queryobj("NumberOfProcessors").ToString, 6)
            .Nodes.Add("TotalPhysicalMemory", "TotalPhysicalMemory:" & queryobj("TotalPhysicalMemory").ToString, 6)
            .Nodes.Add("UserName", "UserName:" & queryobj("UserName"), 6)
            .Nodes.Add("Workgroup", "Workgroup:" & queryobj("Workgroup"), 6)
        End With
    Next

    'LogicalDisk
    query.QueryString = "SELECT * FROM Win32_LogicalDisk"
    searcher.Query = query
    n_node.Nodes.Add("Hardware")
    With n_node.Nodes("Hardware")
        .Nodes.Add("LogicalDisks")
        With .Nodes("LogicalDisks")
            For Each queryobj As ManagementObject In searcher.Get
                .Nodes.Add("Name", "Name" & ": " & queryobj("Name"), 6)
                With .Nodes("Name")
                    .Nodes.Add("Description", "Description: " & queryobj("Description"), 6)
                    .Nodes.Add("DriveType", "DriveType: " & queryobj("DriveType"), 6)
                    .Nodes.Add("Size", "Size: " & queryobj("Size").ToString, 6)
                    .Nodes.Add("FreeSpace", "FreeSpace: " & queryobj("FreeSpace"), 6)
                    .Nodes.Add("VolumeName", "VolumeName: " & queryobj("VolumeName"), 6)
                    .Nodes.Add("VolumeSerialNumber", "VolumeSerialNumber: " & queryobj("VolumeSerialNumber"), 6)
                End With
            Next
        End With

        'network adapters
        query.QueryString = "SELECT * FROM Win32_NetworkAdapterConfiguration"
        searcher.Query = query
        .Nodes.Add("NetworkAdapters")
        With .Nodes("NetworkAdapters")
            For Each queryobj As ManagementObject In searcher.Get
                .Nodes.Add(CStr(queryobj("Description")))
                With .Nodes(CStr(queryobj("Description")))
                    .Nodes.Add("DHCPServer", "DHCPServer: " & queryobj("DHCPServer"), 6)
                    .Nodes.Add("DNSDomain", "DNSDomain: " & queryobj("DNSDomain"), 6)
                    .Nodes.Add("DNSHostName", "DNSHostName: " & queryobj("DNSHostName"), 6)
                    .Nodes.Add("MACAddress", "MACAddress: " & queryobj("MACAddress"), 6)
                    .Nodes.Add("SettingID", "SettingID: " & queryobj("SettingID"), 6)
                End With
            Next
        End With
    End With

    'software
    query.QueryString = "SELECT * FROM Win32_Product"
    searcher.Query = query
    n_node.Nodes.Add("Software")
    With n_node.Nodes("Software")
        For Each queryobj As ManagementObject In searcher.Get
            .Nodes.Add(queryobj("Name"))
            With .Nodes(queryobj("Name"))
                .Nodes.Add("InstallDate", "InstallDate: " & queryobj("InstallDate"), 6)
                .Nodes.Add("IdentifyingNumber", "IdentifyingNumber: " & queryobj("IdentifyingNumber"), 6)
            End With
        Next
    End With

    Dim tf As Form = Control.FromHandle(Form2.Handle)
    tf.BeginInvoke(New Action(Function() InlineAssignHelper(tt_node, n_node)))

1:
    If Not searcher Is Nothing Then
        searcher.Dispose()
        scope = Nothing
    End If
End Sub

Private Shared Function InlineAssignHelper(ByRef target As RadTreeNode, ByVal value1 As RadTreeNode) As RadTreeNode
    Dim t_str As String = Now.Date.ToString & Now.TimeOfDay.ToString

    target.Nodes.Add(t_str)
    target.Nodes(t_str).Nodes.Add(value1.Clone)

    Return target
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:33:59.347

> 这在测试应用程序中运行良好，但在添加计算代码后最终应用程序挂起，并且可能不存在随机数量的结果。

我怀疑这意味着您的问题可能在于您没有向我们展示的代码。

最有可能的候选者是您的*真实* `zupdate`方法中的代码正在访问某种死锁的共享资源。

# javascript - 如何获取flexslider中的幻灯片总数

> ID：14638996
> 
> 赞同：7
> 
> 时间：2013-02-01T02:57:12.583
> 
> 标签：javascript, jquery, flexslider

我正在使用 flexslider [http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)，现在我想获取幻灯片的总数和 sildes 的数量。

```
number of the slide/total number of the slides 
```

例如，如果我有 5 张幻灯片，而我现在在第二张幻灯片中，那么这将是幻灯片下方的输出。

```
2/5 
```

如果我点击“下一个导航”，它将变成

```
3/5 
```

如果“上一个导航”；

```
2/5 
```

在flexslider中可以吗？如果是，该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-26T16:08:23.733

您可以在这里找到答案：[http](http://www.woothemes.com/flexslider) ://www.woothemes.com/flexslider 。

```
 <script type="text/javascript" charset="utf-8">
      $(window).load(function() {
        $('.flexslider').flexslider({
          animation: "slide",
          controlsContainer: ".flex-container",
          start: function(slider) {
            $('.total-slides').text(slider.count);
          },
          after: function(slider) {
            $('.current-slide').text(slider.currentSlide);
          }
       });
     });
    </script> 
```

如果您甚至想要计算第一张幻灯片，您可以添加开始功能：

```
$('.current-slide').text(slider.currentSlide); 
```

如果您希望当前幻灯片以数字 1（而不是 0）开头，您可以执行以下操作：

```
$('.current-slide').text(slider.currentSlide+1); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-12T14:39:18.597

根据this website，您可以使用回调API来做到这一点。[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)。实例化flexslider的时候写一个Start和After回调方法，传入slider。然后使用 slider.count 和 slider.currentSlide 得到你需要的。在我下面的代码中，$slider_wrap、$current_slide 和 $total_slides 只是分配给我想要显示滑块计数的 jQuery 对象的变量。我做了 slider.currentSlide+1 因为第一张幻灯片实际上是数组中的 0。

```
$slider_wrap.flexslider({
    start: function(slider){
      $current_slide.html(slider.currentSlide+1);
      $total_slides.html(slider.count);
    },
    after: function(slider){
      $current_slide.html(slider.currentSlide+1);
      $total_slides.html(slider.count);
    }
  }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T03:20:00.030

基于[这里的演示](http://flexslider.woothemes.com/index.html)

我注意到演示和其他人将生成如下代码：

```
<ol class="flex-control-nav flex-control-paging">
    <li><a class="">1</a>
    </li>
    <li><a class="flex-active">2</a>
    </li>
    <li><a>3</a>
    </li>
    <li><a>4</a>
    </li>
</ol> 
```

因此，据此，您可以使用代码获得所需的内容：

```
var index = $('li:has(.flex-active)').index('.flex-control-nav li')+1;
var total = $('.flex-control-nav li').length; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T03:16:24.977

根据您链接的该页面中的标记，您可以获得如下幻灯片的数量：

```
$(".slides").find("li").length 
```

您可以通过以下方式找到活动幻灯片的编号：

```
$(".slides").find("li.flex-active-slide").index() + 1; 
```

如果您想在滑块更改时更改某些内容，您可以在`after`回调中添加一些内容。

```
$(".mybox").flexslider({
  after: function() {
    // update the count
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T13:02:21.437

我目前正在做完全相同的事情来生成幻灯片索引（......虽然我正在使用 PHP 为图像数量生成一个整数）

尝试为幻灯片索引创建一个元素...

```
<p class="slideIndex"></p> 
```

...并使用 after:function...

```
$('.flexslider').flexslider({
    after: function(slider) {
        slider.find('.slideIndex').html(slider.currentSlide + 1);
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-27T15:30:32.020

获取滑块，然后使用计数：

`$(yourslider).data('flexslider').count`