# StackOverflow 问答 12763000-12763999

# winapi - 处理 Windows 消息的更好方法？

> ID：12763000
> 
> 赞同：2
> 
> 时间：2012-10-06T19:15:28.203
> 
> 标签：winapi, design-patterns, messages

我在一些项目上使用 C 并使用 Win32API，使用不同的语言或任何其他库，如 MFC、GTK、QT .. 等，不是一种选择。

我正在寻找一种处理 Windows 消息/信号/事件的好方法，例如：

```
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
    switch(msg) {
        case WM_CLOSE:
            DestroyWindow(hwnd);
            break;
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        case WM_COMMAND:
            switch(wparam) {
                case ID_OK_BUTTON:
                    DoSomething(hwnd);
                    break;
                case ID_FOO_BUTTON:
                    DoFoo(hwnd);
                    break;
                /*
                ....
                It's only getting more complex
                ....
                */
                case ID_BAR_BUTTON:
                    DoBar(hwnd);
                    break;
                case ID_EXIT_BUTTON:
                    SendMessage(hwnd, WM_CLOSE, wparam, lparam);
                    break;
                case ID_OPEN_BUTTON:
                    OpenFile(hwnd);
                    break;
            }
            break;
        default:
            return DefWindowProc(hwnd, msg, wparam, lparam);
    }
    return 0;
} 
```

这部分只会变得越来越复杂和丑陋。您是否知道任何简化它的方法，也许就像我在许多 GUI 库中经常看到的那样：

```
some_magic(some_object, message, callback); 
```

任何简单的建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T19:39:00.750

MFC、ATL、WTL 使用映射概念以开发人员友好的方式定义消息到成员的映射。宏隐藏消息/命令/通知代码的比较，并且在满足标准时调用相应的成员函数。

我希望这能解释它是如何工作的。一组`MAP_ENTRY`线条应该看起来不那么难看。

```
#define MAP_ENTRY(message, callback) if(msg == message) return callback(wnd, msg, wparam, lparam);
// ...
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
  MAP_ENTRY(WM_INITDIALOG, OnInitDialog)
  MAP_ENTRY(WM_DESTROY, OnDestroy)
  MAP_ENTRY(WM_TIMER, OnTimer)
  return DefWindowProc(hwnd, msg, wparam, lparam);
}
LRESULT OnInitDialog(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
  // ...
}
LRESULT OnDestroy(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
  // ...
}
LRESULT OnTimer(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam)
{
  // ...
} 
```

# c# - C# JSON 字符串反序列化

> ID：12763011
> 
> 赞同：6
> 
> 时间：2012-10-06T19:16:18.633
> 
> 标签：c#, .net, json, deserialization

我真的很难在 C# 中找到任何 JSON 反序列化示例，其中每个 JSON 项中的第一个属性是不同的 ID。

```
 {
       "12112083":{
           "Topic_ID":"12112083",
           "Moved_ID":"51",
           "subject":"subject text goes here"      
           },
       "12111966":{
           "Topic_ID":"12111966",
           "Moved_ID":"51",
           "subject":"another subject text"      
           },
       "12106917":{
           "Topic_ID":"12106917",
           "Moved_ID":"0",
           "subject":"test"      
           }
    } 
```

我尝试了几种不同的方法都没有成功。返回的我无法控制的 JSON 有时是单个项目，有时是一组项目，如上面的示例。理想情况下，如果可能的话，我想反序列化为一个类型化的对象类。

谢谢

谢谢 LB

我已经尝试通过以下字符串提供的代码示例

```
 '{"12112083":{"Topic_ID":"12112083","Moved_ID":"51","subject":"Due to a computer virus, many of my files are \u005C"Crypted\u005C",espe","Start_date":"10/6/2012 6:54:37 PM","InitialResponseDueDate":"10/6/2012 7:01:37 PM","Locked":"0","QValue":"$10","Status":"1","Author_ID":"71318191","Question_Text":"Due to a computer virus, many of my files are \u005C"Crypted\u005C",especially my pictures.  Now my FinepixA500 camera will not upload photos to my computer (laptop).  Geek Squad could not crack the code and suggested that I contact Toshiba and have them reset the computer to its original manufacturer settings.  If I do that, I will lose all of my data.  The only thing that appears not to be working is \u005C"photo gallery\u005C". (therefore, my camera will not upload photos anymore.....) Any suggestions?","Username":"JACUSTOMER-iei7o0tr-","No_of_Questions":"0","No_of_Accepts":"0","Last_visit":"10/6/2012 7:22:18 PM","Join_Date":"10/6/2012 6:46:29 PM","lastExpert":"","IsPress":"False","hasCustomerOptOuts":"0","RecCount":"0","OptedOut":"","Urgency":"51","AuthorHasSubscription":"False","Relisted":"0","IsAbandoned":"False","categoryName":"Camera and Video","categoryName_Additional":"Laptop","QuestionCommissionHasAdjusted":"False","LockedBy":"-1","IsOnline":"False","QuestionLink":"/video-camera-repair/77lqr-due-computer-virus-files-crypted-espe.html","WaitingForYou":"False","RequestedForYou":"False","IsChatEnabled":"False","ChangedKeyList":"","DeltaType":"A"},"12111966":{"Topic_ID":"12111966","Moved_ID":"51","subject":"office/outlook for mac 2011 keeps hanging upMicrosoft Error","Start_date":"10/6/2012 6:25:06 PM","InitialResponseDueDate":"10/6/2012 7:25:06 PM","Locked":"0","QValue":"$19","Status":"1","Author_ID":"71317792","Question_Text":"office/outlook for mac 2011 keeps hanging upMicrosoft Error Reporting log version: 2.0<br/><br/>Error Signature:<br/>Exception: EXC_CRASH (SIGTRAP)<br/>Date/Time: 2012-10-06 17:59:38 +0000<br/>Application Name: Microsoft Outlook<br/>Application Bundle ID: com.microsoft.Outlook<br/>Application Signature: OPIM<br/>Application Version: 14.2.4.120824<br/>Crashed Module Name: merp<br/>Crashed Module Version: 2.2.4.120824<br/>Crashed Module Offset: 0x00003aa2<br/>Blame Module Name: Microsoft Outlook<br/>Blame Module Version: 14.2.4.120824<br/>Blame Module Offset: 0x003c900c<br/>Application LCID: 1033<br/>Extra app info: Reg=en Loc=0x0409<br/>Crashed thread: 10","Username":"JACUSTOMER-wr0d1qwb-","No_of_Questions":"0","No_of_Accepts":"0","Last_visit":"10/6/2012 6:54:53 PM","Join_Date":"10/6/2012 6:25:00 PM","lastExpert":"","IsPress":"False","hasCustomerOptOuts":"0","RecCount":"0","OptedOut":"","Urgency":"51","AuthorHasSubscription":"False","Relisted":"0","IsAbandoned":"False","categoryName":"Microsoft Office","categoryName_Additional":"","QuestionCommissionHasAdjusted":"False","LockedBy":"-1","IsOnline":"False","QuestionLink":"/microsoft-office/77lni-office-outlook-mac-2011-keeps-hanging-upmicrosoft-error.html","WaitingForYou":"False","RequestedForYou":"False","IsChatEnabled":"True","ChangedKeyList":"","DeltaType":"A"},"12106917":{"Topic_ID":"12106917","Moved_ID":"0","subject":"test","Start_date":"10/5/2012 6:22:42 PM","InitialResponseDueDate":"10/5/2012 6:40:42 PM","Locked":"0","QValue":"$21","Status":"1","Author_ID":"69617617","Question_Text":"test","Username":"JACUSTOMER-dwbsyao6-","No_of_Questions":"4","No_of_Accepts":"1","Last_visit":"10/6/2012 11:12:19 AM","Join_Date":"7/16/2012 12:59:47 PM","lastExpert":"","IsPress":"False","hasCustomerOptOuts":"0","RecCount":"0","OptedOut":"","Urgency":"0","AuthorHasSubscription":"True","Relisted":"0","IsAbandoned":"False","categoryName":"Computer","categoryName_Additional":"","QuestionCommissionHasAdjusted":"True","LockedBy":"-1","IsOnline":"True","QuestionLink":"/computer/77hr9-test.html","WaitingForYou":"False","RequestedForYou":"False","IsChatEnabled":"True","ChangedKeyList":"","DeltaType":"A"}}' 
```

我收到“InvalidCastException”，无法将“System.String”类型的对象转换为“Newtonsoft.Json.Linq.JObject”类型。

我尝试从字符串的开头和结尾删除单引号但得到相同的消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T19:29:45.990

使用[Json.Net](http://json.codeplex.com/)

（发布的 JSON 无效。将 invalid s替换为*后*，以下工作。）`\u005C"``\u005C`

```
string json = @"{""12112083"":{""Topic_ID"":""12112083"",""Moved_ID"":""51"",""subject"":""Due to a computer virus, many of my files are \u005CCrypted\u005C,espe"",""Start_date"":""10/6/2012 6:54:37 PM"",""InitialResponseDueDate"":""10/6/2012 7:01:37 PM"",""Locked"":""0"",""QValue"":""$10"",""Status"":""1"",""Author_ID"":""71318191"",""Question_Text"":""Due to a computer virus, many of my files are \u005CCrypted\u005C,especially my pictures.  Now my FinepixA500 camera will not upload photos to my computer (laptop).  Geek Squad could not crack the code and suggested that I contact Toshiba and have them reset the computer to its original manufacturer settings.  If I do that, I will lose all of my data.  The only thing that appears not to be working is \u005Cphoto gallery\u005C. (therefore, my camera will not upload photos anymore.....) Any suggestions?"",""Username"":""JACUSTOMER-iei7o0tr-"",""No_of_Questions"":""0"",""No_of_Accepts"":""0"",""Last_visit"":""10/6/2012 7:22:18 PM"",""Join_Date"":""10/6/2012 6:46:29 PM"",""lastExpert"":"""",""IsPress"":""False"",""hasCustomerOptOuts"":""0"",""RecCount"":""0"",""OptedOut"":"""",""Urgency"":""51"",""AuthorHasSubscription"":""False"",""Relisted"":""0"",""IsAbandoned"":""False"",""categoryName"":""Camera and Video"",""categoryName_Additional"":""Laptop"",""QuestionCommissionHasAdjusted"":""False"",""LockedBy"":""-1"",""IsOnline"":""False"",""QuestionLink"":""/video-camera-repair/77lqr-due-computer-virus-files-crypted-espe.html"",""WaitingForYou"":""False"",""RequestedForYou"":""False"",""IsChatEnabled"":""False"",""ChangedKeyList"":"""",""DeltaType"":""A""},""12111966"":{""Topic_ID"":""12111966"",""Moved_ID"":""51"",""subject"":""office/outlook for mac 2011 keeps hanging upMicrosoft Error"",""Start_date"":""10/6/2012 6:25:06 PM"",""InitialResponseDueDate"":""10/6/2012 7:25:06 PM"",""Locked"":""0"",""QValue"":""$19"",""Status"":""1"",""Author_ID"":""71317792"",""Question_Text"":""office/outlook for mac 2011 keeps hanging upMicrosoft Error Reporting log version: 2.0<br/><br/>Error Signature:<br/>Exception: EXC_CRASH (SIGTRAP)<br/>Date/Time: 2012-10-06 17:59:38 +0000<br/>Application Name: Microsoft Outlook<br/>Application Bundle ID: com.microsoft.Outlook<br/>Application Signature: OPIM<br/>Application Version: 14.2.4.120824<br/>Crashed Module Name: merp<br/>Crashed Module Version: 2.2.4.120824<br/>Crashed Module Offset: 0x00003aa2<br/>Blame Module Name: Microsoft Outlook<br/>Blame Module Version: 14.2.4.120824<br/>Blame Module Offset: 0x003c900c<br/>Application LCID: 1033<br/>Extra app info: Reg=en Loc=0x0409<br/>Crashed thread: 10"",""Username"":""JACUSTOMER-wr0d1qwb-"",""No_of_Questions"":""0"",""No_of_Accepts"":""0"",""Last_visit"":""10/6/2012 6:54:53 PM"",""Join_Date"":""10/6/2012 6:25:00 PM"",""lastExpert"":"""",""IsPress"":""False"",""hasCustomerOptOuts"":""0"",""RecCount"":""0"",""OptedOut"":"""",""Urgency"":""51"",""AuthorHasSubscription"":""False"",""Relisted"":""0"",""IsAbandoned"":""False"",""categoryName"":""Microsoft Office"",""categoryName_Additional"":"""",""QuestionCommissionHasAdjusted"":""False"",""LockedBy"":""-1"",""IsOnline"":""False"",""QuestionLink"":""/microsoft-office/77lni-office-outlook-mac-2011-keeps-hanging-upmicrosoft-error.html"",""WaitingForYou"":""False"",""RequestedForYou"":""False"",""IsChatEnabled"":""True"",""ChangedKeyList"":"""",""DeltaType"":""A""},""12106917"":{""Topic_ID"":""12106917"",""Moved_ID"":""0"",""subject"":""test"",""Start_date"":""10/5/2012 6:22:42 PM"",""InitialResponseDueDate"":""10/5/2012 6:40:42 PM"",""Locked"":""0"",""QValue"":""$21"",""Status"":""1"",""Author_ID"":""69617617"",""Question_Text"":""test"",""Username"":""JACUSTOMER-dwbsyao6-"",""No_of_Questions"":""4"",""No_of_Accepts"":""1"",""Last_visit"":""10/6/2012 11:12:19 AM"",""Join_Date"":""7/16/2012 12:59:47 PM"",""lastExpert"":"""",""IsPress"":""False"",""hasCustomerOptOuts"":""0"",""RecCount"":""0"",""OptedOut"":"""",""Urgency"":""0"",""AuthorHasSubscription"":""True"",""Relisted"":""0"",""IsAbandoned"":""False"",""categoryName"":""Computer"",""categoryName_Additional"":"""",""QuestionCommissionHasAdjusted"":""True"",""LockedBy"":""-1"",""IsOnline"":""True"",""QuestionLink"":""/computer/77hr9-test.html"",""WaitingForYou"":""False"",""RequestedForYou"":""False"",""IsChatEnabled"":""True"",""ChangedKeyList"":"""",""DeltaType"":""A""}}";

var jobj = (JObject)JsonConvert.DeserializeObject(json);
var items = jobj.Children()
    .Cast<JProperty>()
    .Select(j=>new
    {
        ID=j.Name,
        Topic = (string)j.Value["Topic_ID"],
        Moved = (string)j.Value["Moved_ID"],
        Subject = (string)j.Value["subject"],
    })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T17:37:22.767

使用 System.Web，我有一个小方法似乎适用于每个使用 JSON 进行数据存储的项目：

```
private T UnpackJson<T>(object data)
{
    var serializer = new JavaScriptSerializer();
    string rawJSON = serializer.Serialize(data);

    var result = serializer.Deserialize<T>(rawJSON);
    return result;
} 
```

...其中 T 是某种类型，其元素与您要反序列化的架构匹配。对于顶部给出的 blob，我建议如下：

```
// Using my above method...
var x = UnpackJson<Foo[]>(blob);

public class Foo
{
    public string ID;
    public Bar SubItem;
}

public class Bar
{
    public int Topic_ID;
    public int Subject_ID;
    public string subject; 
} 
```

...请注意，您的变量名称应与 JSON blob 中的属性名称*完全匹配！*我当然希望这可行（请注意，虽然我使用该方法并确定它将反序列化一个 blob 到一个类，但此实现未经测试。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:25:19.947

使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx) - 用于 .NET 的免费 JSON 解析器/序列化器。

# java - 单击 JButton 时仅打开一次新的 JDialog

> ID：12763013
> 
> 赞同：0
> 
> 时间：2012-10-06T19:16:38.670
> 
> 标签：java, swing, modal-dialog, jbutton, jdialog

单击两次或更多次时如何停止重复`JDialog`打开？`JButton`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:18:55.933

你可以：

1.  使该对话框[*模态*](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Dialog,%20boolean%29)。

2.  使用`boolean`标志来指示对话框是否已打开。打开时设置，关闭对话框时清除。

# linux - 如何为python项目制作可执行文件

> ID：12763015
> 
> 赞同：1
> 
> 时间：2012-10-06T19:16:56.067
> 
> 标签：linux, jar, python-2.7

对不起，如果我的标题不正确。以下是我正在寻找的解释。

我用 python 编写了一个小型 GUI 游戏（比如说一个蛇游戏），我希望它可以在 Linux 机器上运行。我可以通过在终端中运行命令“python snake.py”来运行这个程序。

但是，我想将我所有的 .py 文件合并到一个文件中，当我点击这个文件时，它只是运行我的游戏。我不想去 shell 并输入“python snake.py”。我的意思是类似 java 中的 manifest .jar。

有人可以帮我吗？如果我的解释不够好，请告诉我。我再做一些解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:20:41.157

Unix可以使用[Freeze ，Windows 可以使用](http://wiki.python.org/moin/Freeze)[py2exe](http://wiki.python.org/moin/Py2Exe)。

[我从未尝试过的cx_freeze](http://cx-freeze.sourceforge.net/)、[PyInstaller](http://www.pyinstaller.org/)、 [bbfreeze](http://www.jroller.com/alessiopace/entry/python_standalone_executables_with_bbfreeze)和[py2app](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html)也可用于各种平台，因此有很多选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:28:13.353

如果你只希望它在 Linux 机器上运行，使用 Python Eggs 是最简单的方法。

python snake.egg 将尝试在 egg 中执行**main** .py。

Python 鸡蛋是包，基本上是一个包含元数据文件的 zip 文件。

# ruby - 如何用 new 干净地初始化 Ruby 中的属性？

> ID：12763016
> 
> 赞同：32
> 
> 时间：2012-10-06T19:17:10.143
> 
> 标签：ruby, object, new-operator, ruby-1.9.3

```
class Foo
  attr_accessor :name, :age, :email, :gender, :height

  def initalize params
    @name = params[:name]
    @age = params[:age]
    @email = params[:email]
    .
    .
    .
  end 
```

这似乎是一种愚蠢的做法。在 Ruby 中初始化对象的更好/更惯用的方法是什么？

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-06T19:20:17.743

您可以只遍历键并调用设置器。我更喜欢这个，因为如果您传递无效的密钥，它会捕获。

```
class Foo
  attr_accessor :name, :age, :email, :gender, :height

  def initialize params = {}
    params.each { |key, value| send "#{key}=", value }
  end
end

foo = Foo.new name: 'Josh', age: 456
foo.name  # => "Josh"
foo.age   # => 456
foo.email # => nil 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-06T19:20:03.113

```
def initialize(params)
  params.each do |key, value|
    instance_variable_set("@#{key}", value)
  end
end 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-04-14T21:59:32.620

通过一些概括来利用 Joshua Cheek 的回答

```
module Initializable
  def initialize(params = {})
    params.each do |key, value|
      setter = "#{key}="
      send(setter, value) if respond_to?(setter.to_sym, false)
    end
  end
end

class Foo
  include Initializable

  attr_accessor :name, :age, :email, :gender, :height
end

Foo.new name: 'Josh', age: 456
=> #<Foo:0x007fdeac02ecb0 @name="Josh", @age=456> 
```

**注意**如果已经使用了初始化混合*并且*我们需要自定义初始化，我们只需调用 super：

```
class Foo
  include Initializable

  attr_accessor :name, :age, :email, :gender, :height, :handler

  def initialize(*)
    super

    self.handler = "#{self.name} #{self.age}"
  end
end

Foo.new name: 'Josh', age: 45
=> #<Foo:0x007fe94c0446f0 @name="Josh", @age=45, @handler="Josh 45"> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-06T20:31:06.247

```
Foo = Struct.new(:name, :age, :email, :gender, :height) 
```

这对于一个功能齐全的班级来说已经足够了。演示：

```
p Foo.class # Class

employee = Foo.new("smith", 29, "smith@foo.com", "m", 1.75) #create an instance
p employee.class # Foo
p employee.methods.sort # huge list which includes name, name=, age, age= etc 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-06T20:19:28.693

为什么不直接明确指定一个实际的参数列表？

```
class Foo
  attr_accessor :name, :age, :email, :gender, :height

  def initialize(name, age, email, gender, height)
    @name = name
    @age = age
    @email = email
    @gender = gender
    @height = height
  end
end 
```

这个版本可能比其他版本有更多的代码行，但它更容易利用内置的语言特性（例如，参数的默认值或如果`initialize`以不正确的数量调用则引发错误）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-06T19:39:46.927

使用 params 中的所有键是不正确的，您可以定义不愿意的名称。我认为这应该是一个名字的白名单

```
class Foo
   @@attributes = [:name, :age, :email, :gender, :height]  

   @@attributes.each do |attr|
     class_eval { attr_accessor "#{attr}" }
   end  

   def initialize params
     @@attributes.each do |attr|
       instance_variable_set("@#{attr}", params[attr]) if params[attr]
     end  
   end
end

Foo.new({:name => 'test'}).name #=> 'test' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-06T19:29:41.993

如果您收到一个散列作为唯一参数，为什么不将其保留为实例变量？每当您需要一个值时，请从哈希中调用它。您可以保持实例变量名称简短，以便可以轻松调用它。

```
class Foo
  attr_reader :p
  def initalize p
    @p = p
  end
  def foo
    do_something_with(@p[:name])
    ...
  end
end 
```

如果`@p[:name]`对您来说仍然太长，那么您可以将 proc 保存为实例变量，并调用相关值，例如`@p.(:name)`.

```
class Foo
  attr_reader :p
  def initialize p
    @p = ->x{p[x]}
  end
  def foo
    do_something_with(@p.(:name))
    ...
  end
end 
```

或者，另一种方法是定义一个调用散列并应用密钥的方法。

```
class Foo
  def initalize p
    @p = p
  end
  def get key
    @p[key]
  end
  def foo
    do_something_with(get(:name))
    ...
  end
end 
```

如果要设置值，您可以定义一个 setter 方法，并根据需要进一步检查无效键。

```
class Foo
  Keys = [:name, :age, :email, :gender, :height]
  def initalize p
    raise "Invalid key in argument" unless (p.keys - Keys).empty?
    @p = p
  end
  def set key, value
    raise "Invalid key" unless Keys.key?(key)
    @p[key] = value
  end
  def get key
    @p[key]
  end
  def foo
    do_something_with(get(:name))
    ...
  end
end 
```

# jquery - 怎么改变大小 带有 JQuery 的可排序网格上的元素（参见图片）

> ID：12763019
> 
> 赞同：0
> 
> 时间：2012-10-06T19:17:43.820
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在尝试从这里应用相同的功能：

[JQuery 可排序为网格](http://jqueryui.com/demos/sortable/display-grid.html)

![在此处输入图像描述](../Images/ff39057ce24aeae33a6fde65de0349de.png)

他是我的一方：当有换行符时，如何更改尺寸（宽度，高度）以使元素适合？

![在此处输入图像描述](../Images/42aa3021a1ab7e76f6a04e0d2a5e109b.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T19:30:48.413

您需要为 li 定义确切的宽度和高度来解决此类问题。

# magento - 即使全新安装，Magento 管理后端也很慢

> ID：12763020
> 
> 赞同：5
> 
> 时间：2012-10-06T19:17:52.377
> 
> 标签：magento, slowdown, performance

全新安装相同版本 1.7.0.2 时，Magento 管理后端非常慢。

在我之前的安装中，它在具有相同托管公司的同一台服务器上以相当不错的速度运行，并且完全没有额外的调整。

但突然间，由于我安装了另一个自定义主题，我把它搞砸了。所以我删除它后重新安装它。然后我什至在访问它时发现了更多问题。

因此，我创建了新`public_html`文件夹并将前一个文件夹重命名为`public_html.old`.

然后我能够在根文件夹上成功重新安装 Magento。但是这一次打开的速度非常非常慢，其实每一步都是慢的。

谁能帮我追查真正的原因。可能是什么可能性。它之前工作得很好，但为什么这次不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T16:25:44.123

我知道这是一个老问题，但很多人仍在使用 1.7.0.2，所以我认为它仍然相关。

所描述的性能滞后使系统无法使用，而且绝对不仅仅是可以修复它的标准调整。如果您可以这样称呼它，那么这是一个具有如此简单“解决方法”的错误，修复它可能是一个低优先级。但我没有轻易找到这项工作。所以我在这里发帖。

**我的设置：**

*   MacBook Pro
*   在 VirtualBox 上使用 NFS 设置 Vagrant
*   Ubuntu 12.4 的虚拟机
*   灯
*   Magento 1.7.0.2
*   足够的内存等

 **我在管理界面上加载 8 到 12 秒**的问题。**正常工作时的典型性能约为 1 秒加载。**

 ****诊断**
*我运行了 Magento Profiler：*见[http://www.neptuneweb.com/blog/?id=24](http://www.neptuneweb.com/blog/?id=24)

*   首先，通过 System -> Configuration -> Developer -> Profile 启用分析器（是）。这会启用分析器，但不会填写任何基准时间。
*   在第 71 行附近的 /index.php 中找到注释掉的行
*   取消注释此行以启用分析器。“Varien_Profiler::enable();”
*   刷新您正在优化的页面。在页面底部，您将看到性能表。

就我而言，分析器表（不幸的是不可排序）显示“adminhtml/default/default/template/notification/survey.phtml”的时间很晚

当请求进入时，它似乎向您显示了一个从 0 开始的时间戳，到每个跟踪事件的任何标记。通过这种方式，您无法看到处理和返回某件事需要多长时间。但是你可以知道它何时完成，并通过减去不同过程的下一个最高时间，你可以（有点）知道它花了多长时间。可能有一些不对称的处理正在使事情复杂化。但由于有些人可能有他们等待的依赖项，这似乎工作正常。

**解决方案**

*   再次加载管理界面后，我注意到顶部的唠叨栏要求我填写一份调查表以发送回 Magento。解除通知后，一切都变得很快……

因此，经过多次故障排除后，这对我来说是一个非常简单的解决方案。但是，如果这不是您的确切原因，或者没有出现弹出窗口，则故障排除信息应该有助于找到原因。

分析器也是一个很好的工具，可以帮助优化页面加载，即使它工作或多或少都可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:02:06.053

确保您已打开编译：admin> System-Tools-Compilation。这可以提高性能。

Magento 社区论坛上有一个类似的[主题，stackoverflow 上有一个](http://www.magentocommerce.com/boards/viewthread/264175/#t402302)[问题](https://stackoverflow.com/questions/1403184/what-are-the-best-steps-to-improve-magento-performance/12641438#12641438)。**

# java - 检测 Bytebuffer 是否包含 int 或仅包含 byte[]

> ID：12763026
> 
> 赞同：1
> 
> 时间：2012-10-06T19:18:56.340
> 
> 标签：java, bytebuffer

我将列值存储在 DB 中：

1.  一个空字节数组`new byte[0]`
2.  一个 int 值
3.  一个非空`byte[]`

在检索列值时，我将其作为字节缓冲区进行检索，并且我需要检测它是否存储了整数、空字节 [] 或非空字节 []。

我如何检测读取的 Bytebuffer，在上述 3 个可能的选项中存储了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:20:40.957

你不能，毕竟它们只是一堆碎片。你需要一个外部指标。它可以是第二列或输入的第一位。

如果您加载了一个空缓冲区，则会`byte[]`存储空缓冲区。如果它不为空，请检查第一位（或为简单起见的字节）。同意某个值表示其余的是`byte[]`，而其他值表示已编码`int`。当然，在此之前，您还必须存储该指标。

# json - github 插件 gitlab jenkins null json

> ID：12763033
> 
> 赞同：3
> 
> 时间：2012-10-06T19:20:36.370
> 
> 标签：json, github, jenkins

我希望有人可以帮助我，因为我无能为力。我们有两台服务器，一台使用运行在 8080 上的 jenkins 设置，另一台使用 gitlab 设置。我正在尝试启用 jenkins 在推送到 gitlab 的基础上构建，但没有成功。我什至已经下载了源代码，编译它并添加了额外的日志记录，但仍然没有。当我在 gitlab 上测试钩子时会出现问题。当我测试钩子时，我在 jenkins 日志中收到以下错误：

```
Oct 4, 2012 12:09:34 PM com.cloudbees.jenkins.GitHubWebHook processGitHubPayload
INFO: Received payload for null
2012-10-04 12:09:34.743:Jenkins v1.445:WARN:  Error while serving http://160.129.228.150:8080/github-webhook/
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:282)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:149)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:88)
    at org.kohsuke.stapler.MetaClass$2.dispatch(MetaClass.java:149)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.MetaClass$12.dispatch(MetaClass.java:377)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:477)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:159)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:491)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1074)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:146)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
    at org.mortbay.jetty.Server.handle(Server.java:285)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:765)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:628)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:203)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Caused by: net.sf.json.JSONException: null object
    at net.sf.json.JSONObject.verifyIsNull(JSONObject.java:2428)
    at net.sf.json.JSONObject.getJSONObject(JSONObject.java:1751)
    at com.cloudbees.jenkins.GitHubWebHook.processGitHubPayload(GitHubWebHook.java:160)
    at com.cloudbees.jenkins.GitHubWebHook.doIndex(GitHubWebHook.java:154)
    ... 45 more
2012-10-04 12:09:34.744::WARN:  EXCEPTION
javax.servlet.ServletException: net.sf.json.JSONException: null object
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:605)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.MetaClass$12.dispatch(MetaClass.java:377)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:477)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:159)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:491)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1074)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:146)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
    at org.mortbay.jetty.Server.handle(Server.java:285)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:765)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:628)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:203)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Caused by: net.sf.json.JSONException: null object
    at net.sf.json.JSONObject.verifyIsNull(JSONObject.java:2428)
    at net.sf.json.JSONObject.getJSONObject(JSONObject.java:1751)
    at com.cloudbees.jenkins.GitHubWebHook.processGitHubPayload(GitHubWebHook.java:160)
    at com.cloudbees.jenkins.GitHubWebHook.doIndex(GitHubWebHook.java:154)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:282)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:149)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:88)
    at org.kohsuke.stapler.MetaClass$2.dispatch(MetaClass.java:149)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    ... 36 more
2012-10-04 12:09:34.745::WARN:  Nested in javax.servlet.ServletException: net.sf.json.JSONException: null object:
net.sf.json.JSONException: null object
    at net.sf.json.JSONObject.verifyIsNull(JSONObject.java:2428)
    at net.sf.json.JSONObject.getJSONObject(JSONObject.java:1751)
    at com.cloudbees.jenkins.GitHubWebHook.processGitHubPayload(GitHubWebHook.java:160)
    at com.cloudbees.jenkins.GitHubWebHook.doIndex(GitHubWebHook.java:154)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:282)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:149)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:88)
    at org.kohsuke.stapler.MetaClass$2.dispatch(MetaClass.java:149)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.MetaClass$12.dispatch(MetaClass.java:377)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:477)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:159)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:491)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1074)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:146)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
    at org.mortbay.jetty.Server.handle(Server.java:285)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:765)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:628)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:203)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
2012-10-04 12:09:34.745::WARN:  /github-webhook/:
net.sf.json.JSONException: null object
    at net.sf.json.JSONObject.verifyIsNull(JSONObject.java:2428)
    at net.sf.json.JSONObject.getJSONObject(JSONObject.java:1751)
    at com.cloudbees.jenkins.GitHubWebHook.processGitHubPayload(GitHubWebHook.java:160)
    at com.cloudbees.jenkins.GitHubWebHook.doIndex(GitHubWebHook.java:154)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:282)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:149)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:88)
    at org.kohsuke.stapler.MetaClass$2.dispatch(MetaClass.java:149)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.MetaClass$12.dispatch(MetaClass.java:377)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:477)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:159)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:491)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1074)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:146)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
    at org.mortbay.jetty.Server.handle(Server.java:285)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:765)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:628)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:203)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
2012-10-04 12:09:34.746::WARN:  /github-webhook/
net.sf.json.JSONException: null object
    at net.sf.json.JSONObject.verifyIsNull(JSONObject.java:2428)
    at net.sf.json.JSONObject.getJSONObject(JSONObject.java:1751)
    at com.cloudbees.jenkins.GitHubWebHook.processGitHubPayload(GitHubWebHook.java:160)
    at com.cloudbees.jenkins.GitHubWebHook.doIndex(GitHubWebHook.java:154)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:282)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:149)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:88)
    at org.kohsuke.stapler.MetaClass$2.dispatch(MetaClass.java:149)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.MetaClass$12.dispatch(MetaClass.java:377)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:563)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:648)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:477)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:159)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:491)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1074)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:146)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
    at org.mortbay.jetty.Server.handle(Server.java:285)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:765)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:628)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:203)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475) 
```

这显然是由 null json 对象引起的。我在 GitHubWebHook 类中添加了更多日志记录，以查看发生了什么：

```
public void doIndex(StaplerRequest req) {
    List<String> requestParameterNames  = Collections.list((Enumeration<String>)req.getParameterNames());
    for (String param : requestParameterNames){
      LOGGER.info(param);
    }
    processGitHubPayload(req.getParameter("payload"),GitHubPushTrigger.class);
} 
```

但是没有为参数枚举循环记录任何内容。我添加了另一个指向 RequestBin 的钩子，以查看正在发送的内容：

```
body
{color:#404040}{ "after": "107d58a97e22566e9a945aea3fbfc95e118cad62", "before": "8c99ce6e10f59caa1dac88b192d003d525ad741d", "commits": \[ { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "654f98a9705812e7525be39ac3e64249e3b062ee", "message": "Updated readme.", "timestamp": "2012-04-30T17:11:17-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/654f98a9705812e7525be39ac3e64249e3b062ee" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "ceda577922f585760e7a7c208b66a5154886dbd1", "message": "Updated readme.", "timestamp": "2012-04-30T17:20:22-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/ceda577922f585760e7a7c208b66a5154886dbd1" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "4745dbacce4f8f85e9152fac3265fef398a24fce", "message": "Updated readme.", "timestamp": "2012-04-30T17:27:49-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/4745dbacce4f8f85e9152fac3265fef398a24fce" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "77bd3aa3c55e7c903f7c3ecb5a9692ea997e68f0", "message": "Updated readme.", "timestamp": "2012-04-30T17:33:48-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/77bd3aa3c55e7c903f7c3ecb5a9692ea997e68f0" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "14ac4a5db34623d357078900efa44fc0dff6c4b2", "message": "Updated readme.", "timestamp": "2012-04-30T17:36:41-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/14ac4a5db34623d357078900efa44fc0dff6c4b2" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "551d3be096b2aeea886ee0acbaef4d45e70774f4", "message": "Updated readme file.", "timestamp": "2012-05-02T13:07:24-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/551d3be096b2aeea886ee0acbaef4d45e70774f4" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "c58cba90d9febc9a3bf4f523ef19836140f45f0c", "message": "Update readme file.", "timestamp": "2012-05-02T15:00:36-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/c58cba90d9febc9a3bf4f523ef19836140f45f0c" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "9c6f03f116cde6c569c2c3ab64ac568f13aa7a3b", "message": "Update readme file.", "timestamp": "2012-05-02T15:01:22-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/9c6f03f116cde6c569c2c3ab64ac568f13aa7a3b" }, { "author": { "email": "bob.mcclellan@gmail.com", "name": "Bob McClellan Jr" }, "id": "107d58a97e22566e9a945aea3fbfc95e118cad62", "message": "Update readme file.", "timestamp": "2012-05-02T15:02:29-05:00", "url": "https://cgc-git.mc.vanderbilt.edu/hermes/commits/107d58a97e22566e9a945aea3fbfc95e118cad62" } \], "ref": "refs/heads/master", "repository": { "description": "", "homepage": "https://cgc-git.mc.vanderbilt.edu/hermes", "name": "hermes", "url": "https://cgc-git.mc.vanderbilt.edu/hermes" }, "total_commits_count": 9, "user_id": 2, "user_name": "Bob McClellan Jr" }{color} 
```

我知道代码正在请求中寻找“有效负载”，但我没有看到*参数*中显示任何内容。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:54:18.787

现在有[GitLab 钩子插件](https://wiki.jenkins-ci.org/display/JENKINS/Gitlab+Hook+Plugin)正是为此目的。

# javascript - 为什么选择在 ExtJS (Ext.selection.Model) 中不起作用

> ID：12763037
> 
> 赞同：2
> 
> 时间：2012-10-06T19:20:46.577
> 
> 标签：javascript, extjs4

我有一个奇怪的问题。

在我的代码中，我有以下几行：

```
var theId = operation.records[0].get('id');
console.log("theId: " + theId); // print 4 in firebug
var index = gridStore.find('id', theId);
console.log("index: " + index); // print 3 in firebug

if (index != -1) {
    gridPanel.getSelectionModel().select(index);
} 
```

选择无效！

现在，如果我改变：

```
var theId = operation.records[0].get('id'); 
```

至

```
var theId = 4; 
```

...选择有效

和 ：

```
console.log("theId: " + theId); 
```

在萤火虫中打印 4

```
console.log("index: " + index); 
```

在萤火虫中打印 3

为什么 ？**theId 的内容始终为 4，index 的内容始终为 3 ！！！**

任何想法 ？

谢谢，

让-米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:58:54.817

我忘了说我在控制器的网格上有一个 selectionchange 事件：

```
gridSelectionChange: function(grid, records) {
    console.log('gridSelectionChange');

    if (records[0]) {
        this.getAuthorForm().getForm().loadRecord(records[0]);
    }
}, 
```

如果我删除它，一切正常......但我的绑定表单没有更新。所以我需要它。

让-米歇尔

# winforms - PictureBox 不会改变它的大小

> ID：12763038
> 
> 赞同：1
> 
> 时间：2012-10-06T19:20:54.957
> 
> 标签：winforms, image, picturebox

我有一个`PictureBox`和一个`Button`里面的`Form`。`PictureBox`填充和属性设置`Form`为。`SizeMode``StretchImage`

当我单击按钮时，我想更改图像大小（更大），并且**我还希望出现滚动条**。

所以，我在点击事件上更改了`Size`my 的属性：`PictureBox`

```
pictureBox1.Size = new Size(800, 800); 
```

但是这段代码没有任何作用。
为什么？

我也尝试重绘图像本身（使用 GDI 命令），但这样滚动条不会出现。

我怎么解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:52:49.387

放：

```
pictureBox1.Bounds = this.ClientRectangle;
pictureBox1.Dock = DockStyle.None; 
```

为您`PictureBox`和您将能够调整`PictureBox`自身的大小。

# assembly - .foo : { *(.*) } 在链接描述文件中是什么意思？

> ID：12763041
> 
> 赞同：1
> 
> 时间：2012-10-06T19:21:40.503
> 
> 标签：assembly, linker-scripts

我正在编写一个 512 字节的可引导程序，我必须将 0xAA55 粘贴在我的 512 字节程序映像的最后 2 个字节中。所以我做到了。现在我的链接器脚本应该很简单。我只是好奇这个语法是什么意思

```
.foo : { *(.*) } 
```

我以它为例。没有 .foo 部分，在此之前，我将程序计数器更改为

```
. = 0x1000 //To account for the elf header which I will strip later 
```

所以在这个指令之后

```
.foo : { *(.*) } 
```

这是做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T08:30:29.120

它将尚未分配给任何先前定义的部分的所有目标文件（第一个）中的`.foo`所有代码、数据、bss、rodata 等（第二个）存储在部分中。`*``*`

# android - 在 Android 应用上显示图片

> ID：12763042
> 
> 赞同：0
> 
> 时间：2012-10-06T19:21:52.490
> 
> 标签：android

我正在尝试检索服务器上的图片。所以我试图用以下方法检索它：

```
 static Bitmap downloadBitmap(String url) {
    final AndroidHttpClient client = AndroidHttpClient.newInstance("Android");
    final HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) { 
            Log.w("ImageDownloader", "Error " + statusCode + " while retrieving bitmap from " + url); 
            return null;
        }

        final HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = null;
            try {
                inputStream = entity.getContent(); 
                final Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                return bitmap;
            } finally {
                if (inputStream != null) {
                    inputStream.close();  
                }
                entity.consumeContent();
            }
        }
    } catch (Exception e) {
        // Could provide a more explicit error message for IOException or IllegalStateException
        getRequest.abort();
    } finally {
        if (client != null) {
            client.close();
        }
    }
    return null;
} 
```

然后在另一种方法中，我有以下两行：

```
 ImageView e = (ImageView) findViewById(R.id.img);
      e.setImageBitmap(downloadBitmap(img_url(param1.img))); 
```

和 xml

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <!-- Name Label -->
    <ImageView
      android:id="@+id/img"  
      android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:contentDescription="@string/picture">         
    </ImageView> 
```

但是图片没有显示，我没有收到任何错误。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:33:43.563

我建议使用[“通用图像加载器”](https://github.com/nostra13/Android-Universal-Image-Loader)库来显示图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:39:38.913

我将首先在这个 catch 语句中添加一个日志语句：

```
} catch (Exception e) {
    // Could provide a more explicit error message for IOException or IllegalStateException
    getRequest.abort();
} 
```

它可能会在其中引发另一个您不知道的异常。

# uitableview - uitableview 删除行

> ID：12763044
> 
> 赞同：0
> 
> 时间：2012-10-06T19:22:07.803
> 
> 标签：uitableview, core-data, nsfetchedresultscontroller

```
 if (editingStyle == UITableViewCellEditingStyleDelete) {
    //add code here for when you hit delete

    Budget *deletedBudget = (Budget *)[self.budgetList objectAtIndexPath:indexPath];
    [self.context deleteObject:deletedBudget];

    NSError* error;
    if(![self.context  save:&error]) {
        NSLog(@"Failed to save to data store: %@", [error localizedDescription]);
        NSArray* detailedErrors = [[error userInfo] objectForKey:NSDetailedErrorsKey];
        if(detailedErrors != nil && [detailedErrors count] > 0) {
            for(NSError* detailedError in detailedErrors) {
                NSLog(@"  DetailedError: %@", [detailedError userInfo]);
            }
        }
        else {
            NSLog(@" something wierd happens ... hmmm");

        }
    }else {
        NSLog(@"budget deleted!!!! YEEEEE");
    }

    [self updateBugetList];
       [self.tableView beginUpdates];
    if ([self.budgetList.fetchedObjects count] >= 1) {

        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    }

    if ([self.budgetList.fetchedObjects count] == 0) {
        //[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationFade];
        //[self.tableView reloadData];
    }

    [self.tableView endUpdates];

} 
```

此代码适用于大多数行，但不适用于最后一行。

当最后一行的删除被点击时，显示实体被删除的日志消息，但该行没有从表视图中删除......

```
 Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of sections.  The number of sections contained in the table view after the update (1) must be equal to the number of sections contained in the table view before the update (1), plus or minus the number of sections inserted or deleted (0 inserted, 1 deleted).' 
```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:11:32.593

我对这种情况有点困惑：

```
 if ([self.budgetList.fetchedObjects count] >= 1) {
...

        if ([self.budgetList.fetchedObjects count] == 0) {
...            
         [tableView reloadData];
        }
        [tableView endUpdates];
    } 
```

似乎您永远不会更新表格，因为第二个条件不会运行。我认为在这种情况下你应该总是重新加载表

# c - 数组函数导致另一个数组的值改变

> ID：12763048
> 
> 赞同：2
> 
> 时间：2012-10-06T19:22:39.630
> 
> 标签：c, arrays, function, int, overwrite

所以，我正在用 C 语言编写一些代码，以便为 ECG 设备处理更大的程序数据。该程序有几个全局 int 数组来存储数据，因为它必须连续过滤数据，同时还要使用以前的原始数据和过滤后的数据。因此，我必须不时移动数组中的整数，以便丢弃不再用于过滤的数据并用新的原始数据替换它等等。实现这一点并不比在我的代码中到处实现一些 for 循环来为我做这件事更困难。但是，我想定义一个为我执行此操作的函数，因为我这样做了很多次。因此我编写了这样一个函数，看起来像这样：

```
void updateArray(int array[], int size){
size = size / sizeof(int);
int i;
for(i = size; i > 0; i--){
    array[i] = array[i-1];
}} 
```

但是，由于我不习惯用 C 编写代码，我显然在这里做错了，因为使用这个函数会产生错误的数据。调试该函数，我发现当调用此函数时，数组按预期移动，但我的其他数组之一的其中一个值发生了变化。我不太确定为什么会这样，但我真的希望一些反馈可以帮助我更好地理解这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:29:11.427

`array[size]`超出了数组的末尾。您正在复制一个太多的值。

它应该是：

```
void updateArray(int array[], int size) {
    size = size / sizeof(int);
    int i;
    for(i = size - 1; i > 0; i--) {
        array[i] = array[i-1];
    }
} 
```

# java - JFreeChart 折线图 OHLCDataItem

> ID：12763049
> 
> 赞同：1
> 
> 时间：2012-10-06T19:22:51.423
> 
> 标签：java, graph, jfreechart, candlestick-chart

> **可能重复：**
> [一张图像中有多个 OHLC 数据集](https://stackoverflow.com/questions/3221844/multiple-ohlc-datasets-in-one-image)

嗨所以我已经使用`OHLCDataItem`数组绘制了一个烛台图，并且我还在使用相同的数组在顶部绘制了一个折线图，但是目前折线图绘制了`OHLCDataItem`. 我如何让它绘制一个不同的变量。
即构造函数是：

```
OHLCDataItem(java.util.Date date, double open, double high, double low, double close, double volume) 
```

所以目前这是我设置图表的代码：

```
List<OHLCDataItem> data = getData(stockSymbol);
OHLCDataItem[] dataItems = data.toArray(new OHLCDataItem[data.size()]);
XYDataset generalDataSet = new DefaultOHLCDataset(stockSymbol, dataItems);
XYPlot mainPlot = new XYPlot(generalDataSet, domainAxis, rangeAxis, candleStickRenderer);

mainPlot.setDataset(1,  generalDataSet);
mainPlot.setRenderer(1, LineRenderer); 
```

这条线：`mainPlot.setDataset(1, generalDataSet);` 正在为折线图设置绘图，但我不知道如何绘制与“打开”不同的变量。我认为它必须是直截了当的，但我无法掌握它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:51:14.547

您可能需要 OHLCSeries 和 OHLCSeriesCollection（实现 XYDataset），而不是 OHLCDataItem 数组和 DefaultOHLCDataset。

# java - 摆脱网格迷宫中不连贯的矩形

> ID：12763051
> 
> 赞同：1
> 
> 时间：2012-10-06T19:22:56.777
> 
> 标签：java

这不是一个真正的迷宫，但想法是相似的。

我有这个：

![在此处输入图像描述](../Images/40b13a8ea42177dad5304d4192bd9e9c.png)

问题是我用红色圈起来的地方。我需要一种方法来摆脱不属于拼图其余部分的矩形。

我创建了一个适用于正方形的简单算法：

其工作方式是 2D 数组的每个元素代表一个顶点（图形节点）。每个图节点都有一个与之相连的顶点列表。该图是通过从每个顶点到它们的每个连接绘制线来绘制的。

```
private void removeDisconnectedSquare(int x, int y)
{
    GraphNode topLeft = getNodeAt(x, y);
    GraphNode topRight = getNodeAt(x + 1, y);
    GraphNode bottomLeft = getNodeAt(x, y + 1);
    GraphNode bottomRight = getNodeAt(x + 1, y + 1);

    if(topLeft != null &&
       topRight != null &&
       bottomLeft != null &&
       bottomRight != null &&
       !hasNodeToLeft(topLeft) && hasNodeToRight(topLeft) && 
       !hasNodeAbove(topLeft) && hasNodeBelow(topLeft) &&
       hasNodeToLeft(topRight) && !hasNodeToRight(topRight) && 
       !hasNodeAbove(topRight) && hasNodeBelow(topRight) &&
       !hasNodeToLeft(bottomLeft) && hasNodeToRight(bottomLeft) && 
       hasNodeAbove(bottomLeft) && !hasNodeBelow(bottomLeft) &&
       hasNodeToLeft(bottomRight) && !hasNodeToRight(bottomRight) && 
       hasNodeAbove(bottomRight) && !hasNodeBelow(bottomRight))
    {
        removeVertex(x, y);
        removeVertex(x + 1, y);
        removeVertex(x,  y + 1);
        removeVertex(x + 1, y + 1);
    }
} 
```

是否有一种算法或方法可以检测顶点路径是否不是顶点的大连接路径的一部分？有时这会产生一条小路径。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:40:28.113

我建议找到一个好的图形库。然后，将每个正方形表示为一个节点，如果它们之间有直接路径，则在正方形之间有一条边。最后使用从“入口节点”开始的“连接节点”算法（由图形库提供）。最后，您可以遍历所有没有被连通性算法标记的节点并适当地处理它们。

例如，如果您使用 C++，则可以使用[Boost Graph Library Connected Components algorithm](http://www.boost.org/doc/libs/1_51_0/libs/graph/doc/connected_components.html)。其他好的图形库应该有类似的支持。

你也可以滚动你自己的这种算法的版本；例如，将未标记的邻居节点压入堆栈，标记访问的节点，然后将一个节点从堆栈中弹出直到完成。但是，拥有一个好的图形库对于您在此类项目中可能遇到的其他问题很有用，而且 IMO 比自己滚动更可取。

还可能值得注意的是，您可能会更改迷宫生成算法以始终生成连通图，从而避免事后清理断开连接的组件的需要。

# c - 指向任何函数的指针？

> ID：12763052
> 
> 赞同：11
> 
> 时间：2012-10-06T19:22:58.693
> 
> 标签：c, function-pointers

如何声明可以安全地指向任何函数的函数指针？

我需要`void`指针之类的东西，但对于函数。我想过简单地使用它，但是根据[这个问题](https://stackoverflow.com/q/4924690/512904)的答案，函数指针不能可靠地转换为数据指针，至少在非 POSIX 系统上是这样。

我搜索并找到了一些可能的例子：

*   Windows 有[FARPROC](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633571(v=vs.85).aspx)：

    ```
    int (FAR WINAPI * FARPROC) () 
    ```

    该文档还提到了这一点：

    > 在 C 中，FARPROC 声明表示具有未指定参数列表的回调函数。

    听起来不错，但是返回值呢？它明确指定为`int`。

*   [OpenGL 的规范之一](http://www.opengl.org/registry/specs/ARB/get_proc_address.txt)具有：

    ```
    typedef void (*GLfunction)();
    extern GLfunction glXGetProcAddressARB(const GLubyte *procName); 
    ```

    参数列表也未指定，但返回类型明确指定为`void`。

我不确定如何解释这一点。在使用之前，函数指针将被转换为具有适当原型的函数指针类型。例如：

```
typedef void (*function_pointer_t)();
extern function_pointer_t get_function(const char * name);

/* Somewhere else... */

typedef double (*cosine_function_t)(double);
cosine_function_t cosine = (cosine_function_t) get_function("cos"); 
```

这段代码安全吗？它是否违反任何 C 标准或导致任何未定义的行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T19:26:58.553

首先，没有办法声明一个函数指针，它能够在没有强制转换的情况下接受任何函数指针类型。正如您自己已经注意到的那样，问题是任何函数指针声明都会立即假定特定的返回类型。`void *`因此，在函数指针世界中没有完全类似的东西。

其次，只要您使用*显式*强制转换，任何函数指针都可以用于存储任何其他函数指针值。当然，为了通过强制转换为不同类型的指针执行正确的调用，您需要将其转换回原始类型。即，只要在调用时恢复了正确的函数指针类型，这不会导致任何未定义的行为。

在您的示例中，如果返回的指针`get_function`确实指向`double (double)`类型的函数，那么通过`cosine`指针调用该函数是完全安全的。指针值中间存储在`void (*)()`指针中的事实不会破坏它。

第三，在 C 语言中，`()`参数声明代表未指定数量和类型的参数。这是朝着“通用”函数指针类型方向迈出的一步，可以在没有强制转换的情况下使用（只要您在调用中提供正确的参数并且返回类型匹配）

```
void foo(void);
void bar(int i);
void baz(long i, double x);

int main() {
  void (*a[3])() = { foo, bar, baz };
  a[0]();
  a[1](42);
  a[2](5L, 3.1415);
} 
```

但是，返回类型的问题仍然存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T19:48:24.810

您可以使用联合。*通过这个指针调用*的函数类型肯定是有限的，你可以把它们都放在联合中。

# cocoa - 刷新 NSManagedObject 的获取属性

> ID：12763053
> 
> 赞同：2
> 
> 时间：2012-10-06T19:23:20.647
> 
> 标签：cocoa, core-data, nsmanagedobjectcontext

我有一个`NSManagedObject`子类，它具有一对多关系和一个在数据模型中设置的获取属性，以提供该关系中对象的过滤子集。

```
//School.h
@interface School : NSManagedObject
@property (nonatomic, retain) NSSet *pupils;
@property (nonatomic, retain) NSArray *starPupuils;
@end

//School.m
@implementation School
@dynamic pupils;
@dynamic starPupils;
@end 
```

然后我有一个视图控制器，它监视 School 对象以了解学生的变化，然后刷新 starPupils 数据：

```
-(void)setSchool:(School *)school
{
    …
    self.contentArray = [self.school starPupils];
    [self.school addObserver:self
                  forKeyPath:@"pupils"
                     options:nil
                     context:nil];
    …
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString:@"pupils"])
    {
        self.contentArray = [self.school starPupils];
    }
} 
```

这在首次访问获取的属性时工作正常，但正如预期的那样，starPupils 数组被缓存并且不会在添加和删除学生时自行更新。

> 如果目标实体中的对象发生更改，您必须重新评估获取的属性以确保它是最新的。您用于`refreshObject:mergeChanges:`手动刷新属性——这会导致在下次触发对象故障时再次执行与此属性关联的获取请求。—[核心数据编程指南：关系和获取的属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

**我的问题是，我应该`refreshObject:mergeChanges:`从哪里打电话？**

我已经研究过从处理添加和删除学生的代码库部分调用它，并且在相同的上下文中工作正常，但通常更改发生在单独的背景上下文中。

这个背景上下文`parentContext`设置为`mainContext`我的视图控制器总是处理的，所以当它被保存时，更改会自动合并回`mainContext`. 我调查`refreshObject:mergeChanges:`了响应的调用`NSManagedObjectContextDidSaveNotification`，`bgContext`但是到了调用的时候，已经进行了更改并且已经触发了 KVO 的东西。

我尝试添加以下内容，但最终陷入无限循环：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString:@"pupils"])
    {
        [self.school.managedObjectContext refreshObject:self.school mergeChanges:YES];
        self.contentArray = [self.school starPupils];
    }
} 
```

我目前的实现如下：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString:@"pupils"])
    {
        if (self.contentArray == [self.school starPupils])
        {
            /*
             self.contentArray is currently pointing at previous fetched starPupils
             we need to reset the object to a faulted state
             this will twigger another KVO notification for @"pupils" but the code within this if statement will not be executed again
             */
            [self.school.managedObjectContext refreshObject:self.school mergeChanges:YES];
            self.contentArray = [self.school starPupils];
        }
    }
} 
```

这有效，但感觉不是最佳的。您对最佳实践有更好的建议或参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:31:31.187

是否可以使用 NSManagedObjectContextDidSaveNotification 来触发 UI 更新而不使用 KVO？

# post - nginx gzip 不适用于 GET 方法，但适用于 POST 方法

> ID：12763056
> 
> 赞同：0
> 
> 时间：2012-10-06T19:23:55.263
> 
> 标签：post, nginx, get, gzip

我在 nginx 0.9.6 (centos) 上遇到了关于 gzip 的问题，当我使用 POST 方法时，gzip 可以工作，但是当我使用 GET 方法时，它不起作用。测试页面为text/html页面，nginx.conf：

```
 gzip            on;
gzip_min_length 1k;
gzip_buffers    4 16k;
gzip_http_version 1.0;
gzip_comp_level 5;
gzip_types      text/plain text/css text/javascript application/x-javascript application/xml;
gzip_vary       on;
gzip_proxied    any;
gzip_disable    "msie6"; 
```

感谢您的回复。请让我知道您需要更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T20:06:17.313

我知道这是一年前的事了，但您只需要将 text/html 添加到 gzip_types 列表中。

# objective-c - 将对象附加到 UIActionSheet

> ID：12763066
> 
> 赞同：2
> 
> 时间：2012-10-06T19:25:23.590
> 
> 标签：objective-c, cocoa-touch, uiactionsheet

按下视图的“删除”按钮。该视图属于一个视图控制器，它处理按钮按下。但是，该视图控制器是容器视图控制器的子视图，因此它会向其委托发送一条消息，说明已请求删除，并包含应删除的对象。

委托（父视图控制器）收到通知并提出`UIActionSheet`确认删除。它还使自己成为该操作表的代表。

用户确认删除，父视图控制器准备删除对象。除了它必须在`actionSheet:didDismissWithButtonIndex:`. 到那时，它不再知道哪个对象是从子视图控制器传递下来的。

有没有办法将对象附加到警报表，以便在触发解除操作时，可以检索该对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:32:57.480

Objective-C 2.0 运行时支持关联对象 - 使用此 API，您可以使用键值方法将对象相互*关联。*例子：

```
id someObject = // however you obtain it
objc_setAssociatedObject(theActionSheet, "AssociatedDelegateObject", someObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);

// later try to get the object:
id someObject = objc_getAssociatedObject(theActionSheet, "AssociatedDelegateObject");
// process the associated object, then release it:
objc_removeAssociatedObjects(theAlertSheet); 
```

编辑：似乎你真的不需要用大炮射击鸟并使用运行时函数，因为管理警报表的同一个类/对象也关心委托，所以你可以暂时将它分配给一个实例多变的。但是，当您的对象模型变得更复杂时，这种方法可能更容易扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:36:02.143

有很多方法可以做到这一点。

到目前为止最简单的就是给你的父视图控制器一个实例变量来保存要删除的对象。由于一个`UIActionSheet`会阻止其他用户交互，因此用户不可能在第一个对象的删除待处理时请求删除第二个对象。

最好的方法是根本不显示操作表，而只是删除并给用户一个“撤消”按钮。

您可以使用关联的对象（请参阅 H2CO3 的答案）。

您可以使用包装器，让您将块设置为警报视图的按钮处理程序（请参阅 Josh Caswell 的回答或我自己的[`BlockActionSheet`](https://github.com/mayoff/BlockModals)）。

您可以创建 UIActionSheet 的子类并为其提供一个属性来保存待删除的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T19:33:09.650

您可以使用[我的 ActionSheetDelegate 类](https://github.com/woolsweater/ActionSheetDelegate)来创建一个 Block 来代替`actionSheet:clickedButtonAtIndex:`方法。由于块将在与创建操作表相同的上下文中创建，因此它可以捕获您希望删除的对象：

```
ActionSheetDelegate * delegate;
delegate = [ActionSheetDelegate delegateWithHandler:
    ^( UIActionSheet * sheet, NSInteger idx ){
        if( idx == [sheet destructiveButtonIndex] ){
            [self destroyObject:obj];
        }
        // Cancel button "falls through" to no action
}]; 
```

您还可以使用[关联对象运行时工具](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-DontLinkElementID_3)将一个对象与另一个任意对象“关联” 。从本质上讲，这允许您随时将 ivar 添加到任何实例。

```
// Set:
objc_setAssociatedObject(sheet, &key, objectToDestroy, OBJC_ASSOCIATION_RETAIN);

// Retrieve:
id objectToDestroy = objc_getAssociatedObject(sheet, &key); 
```

这只需要你在`key`某个地方有一个变量。`static char`正如我在这里所做的那样，文档建议使用其地址的文件级。但是，任何在设置和获取之间不会改变的值都可以使用。

# ruby-on-rails - 如何重构 after_create 回调？

> ID：12763068
> 
> 赞同：0
> 
> 时间：2012-10-06T19:25:49.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, callback, refactoring

这是我的 after_create 回调：

```
after_create { |f| if f.target.class.eql?(Question)  
        if f.target.user != User.current_user
          Notify.create_notify( Notify::QUESTION_FOLLOW, f.target.user, User.current_user, f.target) 
        end
      elsif f.target.class.eql?(User)   
        Notify.create_notify( Notify::USER_FOLLOW, f.target, User.current_user,f.target)  if f.target.can_mail_user(:follower) 
      end 
  } 
```

我尝试将它移动到一个块中，所以现在它如下所示：

```
after_create do |f| 
  if f.target.class.eql?(Question)  
    if f.target.user != User.current_user
      Notify.create_notify( Notify::QUESTION_FOLLOW, f.target.user, User.current_user, f.target) 
    end
  elsif f.target.class.eql?(User)   
    Notify.create_notify( Notify::USER_FOLLOW, f.target, User.current_user,f.target)  if f.target.can_mail_user(:follower) 
  end 
end 
```

我还能做些什么来改进该代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:40:09.720

大部分应该去`Notify`。我假设这是一`Follow`堂课。在重构时要问自己一个有用的问题是“这个类需要知道这种行为吗？”，我认为在这种情况下答案是否定的。尝试做这样的事情：

```
after_create do |f|
  Notify.create_notify(f.target.user, User.current_user, f.target)
end 
```

...其余的分支逻辑进入 Notify，它的工作是确定要发送哪个通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:31:26.343

改进它的一种方法是使用 is_a? 方法而不是直接比较类名。此外，变量 f 的描述性不够。最后，我将创建一个新变量来存储 f.target，这样您就不会重复自己。

例如：

```
after_create do |record| 
  target = record.target
  if target.is_a?(Question) 
    if target.user != User.current_user
      Notify.create_notify( Notify::QUESTION_FOLLOW, target.user, User.current_user, target) 
    end
  elsif target.is_a?(User)   
    Notify.create_notify( Notify::USER_FOLLOW, target, User.current_user, target)  if target.can_mail_user(:follower) 
  end 
end 
```

# actionscript-3 - actionscript 3 包命名约定

> ID：12763078
> 
> 赞同：3
> 
> 时间：2012-10-06T19:27:11.377
> 
> 标签：actionscript-3, naming-conventions, packages

名称中包含多个单词的包的命名约定是什么？假设我有一个名为“花园软管”的包裹，我应该将其命名为 garden_hose、gardenHose 还是简单地命名为 gardenhose？

我知道包通常只用小写字母命名。我在 api 中只看到由一个单词组成的包名，是否有由几个单词组成的包名的约定？

我们有类：ClassName。例如 RaceCar，包裹呢？

我有一个名为 animationPath 的包，我想知道是否应该重命名它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:56:45.563

包名都应该是小写的。ActionScript 3 文档中没有示例，因为它们似乎都有一个单词名称，但是另一种 ECMAScript 派生语言 Java 中的几个包名称揭示了这种约定。例如：

```
javax.swing.colorchooser
java.awt.datatransfer 
```

但是，我也看到了以 camelCase、ALLCAPS 甚至 CapitalCase 命名的包。虽然我建议您避免使用 ALLCAPS，因为这个约定通常是为常量保留的，而 CapitalCase 约定通常是为类名保留的，我相信如果需要的话，camelCase 包名称会更宽容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:51:11.573

Adobe 曾经在他们的网站上有一篇关于 AS3 编码约定的文章，但似乎随着 Flex 框架的开源，该页面已经消失了。如果我没记错的话，他们建议包名像你用`animationPath`. 在我看来，它看起来不像所有小写字母那么好，但下划线更糟糕。

最后，这一切都与可读性有关，并试图传达包中的类的作用。所以做你认为最能解释你的包裹里面的东西。

# c - 在 GDB 中打印汇编变量

> ID：12763079
> 
> 赞同：1
> 
> 时间：2012-10-06T19:27:11.877
> 
> 标签：c, assembly, gdb

我没有完整的源代码，但有一个带有符号的目标文件。有一条读线：

```
=> 0x080489cd <+169>:   call   0x8049275 <read_line>
   0x080489d2 <+174>:   mov    %eax,(%esp)
   0x080489d5 <+177>:   call   0x8048d59 <phase_1>

in the function:
 8048d59:   55                      push   %ebp
 8048d5a:   89 e5                   mov    %esp,%ebp
 8048d5c:   83 ec 08                sub    $0x8,%esp 
```

我将 ab 放在第一行，并在函数名称中添加了一个以确保。输入“1”后尝试`p *(char**)$esp`，我得到：

```
0x80489da "\350\355\006" 
```

这不是我所期望的。我预计会看到“1”。我也试过：

```
gdb x $esp
0xbffff0cc: 0x080489da

gdb x *0xbffff0cc

0x80489da <main+182>: 0x0006ede8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T19:37:10.090

如果你在第一个喜欢的函数上中断（我假设这就是你的意思：“我把 ab 放在第一行”）那么你看到的是返回地址。看起来您实际上是从调用 phase_1 看到返回地址。

如果您要查找的是第一个参数，请尝试：

```
p *(char**)($esp+4); 
```

# android - 支持Android中对应API级别的相同视图的不同外观

> ID：12763080
> 
> 赞同：1
> 
> 时间：2012-10-06T19:27:23.883
> 
> 标签：android, android-layout, android-view, apk

我在 Android 中构建了一个测试应用程序，最低 API 级别为 8，我想在其中实现以下内容：

我有一个看起来像这样的切换按钮：

![在此处输入图像描述](../Images/56e097a5163d1e3229a91e2a3c9c5880.png)

如您所知，这是 API 级别 8 中切换按钮的默认设计。但我希望我的 UI 能够适应应用程序运行的 API 级别。因此，如果同一个应用程序在 Ice Cream Sandwhich 上运行（API 级别 15 ) ，相同的切换按钮应如下所示：

![在此处输入图像描述](../Images/7ee2e02bcabf54bde2e06d9a1a64b6c7.png)

android 是否提供任何方法来支持此功能，而无需为每个 API 级别构建不同的 apk？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:35:30.760

*编辑*

*   您需要使用 sdk 级别 16（或最新），因此 Switch 类将被识别
*   在清单中将 android:minSdkVersion 设置为 8
*   使用如下所述的文件夹：

* * *

你必须使用不同的布局，你将把它们放在不同的布局文件夹中。

对于 api 8 级（及以上），放入

**/res/layout-v8** 并使用 ToggleButton 类：http: [//developer.android.com/guide/topics/ui/controls/togglebutton.html](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)

对于 15 级：

**/res/layout-v15** 并使用 Switch 类。

适合您的阅读：http: [//developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# c++ - 奇怪的 VS2012 C++ 解析

> ID：12763082
> 
> 赞同：0
> 
> 时间：2012-10-06T19:27:31.857
> 
> 标签：c++, visual-studio-2012

**连接器.hpp**

```
#ifndef __CONNECTOR_HPP_
#define __CONNECTOR_HPP_

#include <a/b/c/connection.hpp>

namespace a {
    namespace b {
        namespace c {

        class connector {
        public:
            explicit connector(const int port);
            void run();
            void stop();
        };

    }
}
}
#endif 
```

**连接.hpp**

```
#ifndef __CONNECTION_HPP_
#define __CONNECTION_HPP_

#include <a/b/c/connector.hpp>

namespace a {
    namespace b {
        namespace c {

            class connection {
            private:
              connector owner_; //line 42

            };

        }
    }
}

#endif 
```

这些简单的类在 cpp 文件中有一些琐碎（空）的实现。
当我尝试编译时，VS2012 会这样说：

> 错误 1 ​​错误 C2146：语法错误：缺少 ';' 在标识符“所有者_”之前 c:\a\b\c\connection.hpp 42 1 测试
> 
> 错误 2 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int c:\a\b\c\connection.hpp 42 1 test

问题是 VS 编辑器没有看到任何问题 - 没有红色下划线等。包含路径设置正确，我已添加`$(SolutionDir)\..\`到包含中，以便我可以使用完整路径`a/b/c`而不是相对路径。

尽管如此，这并没有编译..但它编译过一次。

**问：为什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:00:32.597

通常这些循环`#include`指令是致命的。这肯定是这里正在发生的事情。假设您`#include "connector.hpp"`在其他文件中。将会发生的事情是 connector.hpp 将`#include "connection.hpp"`. 该文件将依次`#include "connector.hpp"`执行，但现在这是一个空操作，因为 connector.hpp 的包含防护已经处于活动状态。你最终得到的是`class connection`之前定义的`class connector`。这是一个问题，因为数据成员 in`class connection`是`class connector`.

为什么connector.hpp包含connection.hpp？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:15:39.267

在我看来你有包含循环。

即你包括`connection.hpp`在`connector.hpp`和`connector.hpp``connection.hpp`

省略`#include <a/b/c/connection.hpp>`in connector.hpp

我认为问题可能是编译器开始编译`connector.hpp`然后预处理器看到用 .hpp 文件的内容`#include <a/b/c/connection.hpp>`替换`#include`（粗略地说）当它尝试包含 connector.hpp 时，它会检查防护并看到它`__CONNECTOR_HPP_`已定义并跳过它并且由于`class connector`尚未声明它会产生此错误。

PS：哦，没关系，我看到它已经回答了。

# python - 将 3D 数组更改为包含 Python/Pulp 中的列表的 2D 数组

> ID：12763085
> 
> 赞同：1
> 
> 时间：2012-10-06T19:27:59.713
> 
> 标签：python, arrays, list

我正在使用 Solverstudio（使用 Pulp 求解器），并且我试图从已找到的 3D 变量中获取 2D 输出（到电子表格中），以获取该变量的某些值。

我试过了：

```
for (m,c,t) in mct:                 
 if Ymct[m][c][t].varValue>0:
  Schedule[m,t]=[c] 
```

但是由于某些 m,t 组合的值超过 1 c，因此它不起作用。我想列出 m,t 组合的所有 c 值。

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:20:01.583

使用`collections.defaultdict`as `Schedule`，您可以通过以下方式简单地将`c`s 添加到列表中：

```
from collections import defaultdict

schedule = defaultdict(list)
for (m,c,t) in mct:
    if Ymct[m][c][t].varValue>0:
    schedule[(m,t)].extend([c]) 
```

（顺便说一句，您应该根据[PEP8](http://www.python.org/dev/peps/pep-0008/)正确命名变量。具体来说，`under_store`用于变量名和函数名以及`CapWords`类名）

* * *

更新：

要将a写入`defaultdict`csv，可以考虑以下方法：import csv

```
from collections import defaultdict

schedule = defaultdict(list)
schedule[1, 1] = [2, 3, 4]
schedule[1, 2] = [3, 4, 5]
schedule[1, 3] = [4, 5, 6]
schedule[1, 4] = [5, 6, 7]

with open("data.csv", "wb") as f:
    csv.writer(f).writerows([k, ] + v for k, v in schedule.iteritems()) 
```

* * *

或者，我想知道是否`LpVariable.varValue`可以返回列表。如果是这样，以下更改应该有效：

```
#schedule=defaultdict(list)
schedule = LpVariable.dicts("schedule", (moderator, time))

# ... many lines ...

for (m,c,t) in mct:
    if Ymct[m][c][t].varValue>0:
        #schedule[(m,t)].extend([c])
        schedule.setdefault(m, {}).setdefault(t, []).append(c)

# List entries in model output area
for (m,t) in mt:
    if len(schedule[(m,t)])>0:
        print (m,t), schedule[m][t]
        #print (m,t), schedule[(m,t)]

# ... many lines ...

for (m,t) in mt:
    timetable[m,t]=schedule[m][t].varValue
    #timetable[m,t]=schedule[m,t].items() 
```

您可以在此处阅读更改后的代码：http: [//pastebin.com/UCVjqRwQ](http://pastebin.com/UCVjqRwQ)

# javascript - 如果页面内容改变高度，向上/向下滑动页脚

> ID：12763090
> 
> 赞同：1
> 
> 时间：2012-10-06T19:29:06.080
> 
> 标签：javascript, jquery, web

使用 jQuery，我将如何进行以下操作：

我在页面上有一个 div，里面有内容。但是，此 div 没有设置高度，它会根据用户正在搜索的内容定期更改高度（内容根据输入的内容出现/消失）。

这一切都有效，但是页脚看起来不太好，因为一旦 div 改变高度，它就会跳到该位置。

有什么办法可以让页脚也滑动到它要去的位置吗？而不是跳过去？

我会提供代码，但我不知道该怎么做对不起！

我的猜测：抓住div当前的高度，当它发生变化时，计算差值并向上移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:34:51.673

如果 css3 是可以接受的并且我理解您的要求正确，您可以添加一个过渡属性，例如

```
#content {
    transition: height 2s;
    -webkit-transition: height 2s;
    -moz-transition: height 2s;
    -o-transition: height 2s;
    -khtml-transition: height 2s;
    -ms-transition: height 2s;
} 
```

如果不是，您可以像在这个小提琴[http://jsfiddle.net/YLKf9/1/中那样使用 jquery](http://jsfiddle.net/YLKf9/1/)

# python - Python交叉匹配

> ID：12763094
> 
> 赞同：1
> 
> 时间：2012-10-06T19:29:25.367
> 
> 标签：python, python-2.7

在执行了一些算法之后，我最终得到了一个类似于下面的列表：

```
l = Set([(integer_4_digits, integer_n_digits], ..)
ex: l = Set([(1011, 123556), (1041, 424553), (1241, 464096), (1027, 589325), (1011, 432341), (1031, 423076)])
l = list(l) #all tuples must exist once. need to get items by index to match (perhaps?) 
```

*此列表中的每个元组的第一项是 4 位整数（正数），第二项是另一个正整数。*

我想要的是：

创建一个新列表（列表或元组），其中所有可能的组合通过交叉匹配分组在一起（在列表或元组中），包括第五个（或第三个，如果它是元组+元组+布尔）元素`True`或`False`取决于两个新匹配的交叉元组的前 4 位整数是否相同（例如：`1011 == 1011`所以 Bool= `True`）。

所以在这个过程之后，我想得到类似的东西：

```
new_list = [(l[0], l[1], False), (l[0], l[2], False), (l[0], l[3], False), (l[0], l[4], True) ..
            (l[1], l[2], False), (l[1], l[3], False), (l[1], l[4], False), ..
            (l[2], l[3], False), (l[2], l[4], False), (l[2], l[5], False), ..] 
```

如您所见，`new_list`不包含重复匹配项。(`l[0]`只匹配`l[1]`一次，无论匹配元组是 a to be 还是 b to a ( `l[0],l[1],..`) 或 ( `l[1],l[0],..`)

现在我可以使用嵌套`for e in l`循环和弹出最后一个`e`元素并执行`e[0]`布尔检查并创建一个新的元组（或列表）并添加到`new_list`列表中来实现这一点。

那么我该怎么做呢？我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T19:34:53.383

使用[`itertools.combinations()`](http://docs.python.org/library/itertools.html#itertools.combinations)；它会创建您正在寻找的组合。连同列表理解，您应该设置：

```
from itertools import combinations

[(i, j, i[0] == j[0]) for i, j in combinations(l, 2)] 
```

请注意，该`Set`类型是 python 中的内置本机类型；只需将`set`（小写）用于本机版本。我们不需要把集合变成一个列表就可以了；itertools 不关心任何一种方式。您甚至可以使用新的`{elem, elem, elem}`set 文字语法。

这会产生：

```
>>> from itertools import combinations
>>> l = {(1011, 123556), (1041, 424553), (1241, 464096), (1027, 589325), (1011, 432341), (1031, 423076)}
>>> [(i, j, i[0] == j[0]) for i, j in combinations(l, 2)]
[((1041, 424553), (1027, 589325), False), ((1041, 424553), (1011, 123556), False), ((1041, 424553), (1031, 423076), False), ((1041, 424553), (1241, 464096), False), ((1041, 424553), (1011, 432341), False), ((1027, 589325), (1011, 123556), False), ((1027, 589325), (1031, 423076), False), ((1027, 589325), (1241, 464096), False), ((1027, 589325), (1011, 432341), False), ((1011, 123556), (1031, 423076), False), ((1011, 123556), (1241, 464096), False), ((1011, 123556), (1011, 432341), True), ((1031, 423076), (1241, 464096), False), ((1031, 423076), (1011, 432341), False), ((1241, 464096), (1011, 432341), False)] 
```

# azure - 在将流写入 blob 时租用 blob，直到完成

> ID：12763099
> 
> 赞同：1
> 
> 时间：2012-10-06T19:30:29.783
> 
> 标签：azure, azure-storage, azure-blob-storage

我想在向它写入流的同时租用一个 blob 直到它完成。以下代码：

场景一：

```
 blob.AcquireLease();
  blob.UploadText("Content");
  blob.Release(); 
```

如果我首先获得 blob 的租约，则需要将内容上传到哪个内容会引发异常，因为 blob 已经被锁定。

场景二：

```
 blob.uploadText("Content");
  blob.AcquireLease();
  blob.Release(); 
```

由于我将内容同步上传到blob，blob.AcquireLease（）语句只有在上传完成后才会执行。如果是这种情况，这样做有什么好处。

1.  基本上，我正在寻找可以在开始上传内容之前锁定/租用 blob 并在上传完成时释放锁定的建议。
2.  我们只能租用一个 blob 90 秒（默认情况下）。如果 blob.upload 需要超过 90 秒（考虑文件大小为 100MB），我想知道如何继续更新租约直到上传完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T03:21:48.987

如果您拥有租约，则只能修改租用的 blob。这意味着您必须连同您的请求一起通过租约。

像这样的代码应该可以工作（警告：未经测试，甚至编译）：

```
var leaseId = blob.AcquireLease();
blob.UploadText("Content", Encoding.UTF8, AccessCondition.GenerateLeaseCondition(leaseId), null);
blob.ReleaseLease(AccessCondition.GenerateLeaseCondition(leaseId)); 
```

想一想，您上面的代码是否有效？`ReleaseLease`至少需要一个参数，不是吗？

对于您的第二个问题，我相信默认情况下租约最多为 60（不是 90）秒。回到存储客户端库支持租约之前，我为此构建了自己的代码，并创建了一个名为的类`AutoRenewLease`，它每 45 秒更新一次租约，以确保我不会丢失它。[您可以在https://github.com/smarx/WazStorageExtensions](https://github.com/smarx/WazStorageExtensions)找到代码。类似的东西应该适合你。

# mysql - 使用合适的 String-End 获取 MySQL 数据

> ID：12763100
> 
> 赞同：0
> 
> 时间：2012-10-06T19:30:35.143
> 
> 标签：mysql, string, fetch

是否有可能获取以字母“ly”结尾的表的每个字符串？

这行得通吗：`SELECT * FROM Table WHERE word LIKE %ly`;

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:35:28.850

如果您的意思是：“获取具有特定字段匹配字符串表达式的表的每条记录”，然后尝试（如您所建议）：

```
SELECT * FROM myTable WHERE myField LIKE '%ly'; 
```

只需将您的搜索字符串放入单引号中。

# objective-c - 仅在 Cocoa 中允许全屏

> ID：12763101
> 
> 赞同：0
> 
> 时间：2012-10-06T19:30:37.920
> 
> 标签：objective-c, cocoa, fullscreen

我怎样才能做到，我的应用程序只能全屏打开？所以也许你可以把它变小，但最好的方法是只启用它全屏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:33:41.597

`[window toggleFullScreen:nil];`你可以在你的方法中添加一些东西`- (void) awakeFromNib`，每次你的应用程序启动时，它都会进入全屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:11:35.960

在您的 AppDelegate.m 文件中找到 applicationDidFinishLaunching: 调用 toggleFullScreen: 方法

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [self.window toggleFullScreen:self];
} 
```

# c# - 如何将所有用户的 DropDownlist 添加到 ListView

> ID：12763102
> 
> 赞同：0
> 
> 时间：2012-10-06T19:30:42.283
> 
> 标签：c#, asp.net

我有一个 ListView 控件，我想编辑 InsertItem 模板以包含一个 Dropdownlist 项，其中包含成员目录中的用户列表。

我试过这个：

```
 MembershipUserCollection users = Membership.GetAllUsers();

    assigned_volunteerDropDownBox.DataSource = users;
    assigned_volunteerDropDownBox.DataBind(); 
```

最大的问题是它说`assigned_volunteerDropDownBox`在当前上下文中不存在......实际上插入模板上的任何 TextBox 项目都不在当前上下文中（这是否正常）？

我该怎么做呢？我希望能够只允许使用有效的用户名更新该行。

我查看了[这个](https://stackoverflow.com/questions/8906367/how-to-list-all-users-in-active-directory-in-dropdownlist-control)，但它实际上并不包含将 DataBind 到 DropDownList 项的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:36:30.433

您可以访问`assigned_volunteerDropDownBox`后面的代码；但从下拉控件本身进行绑定可能更容易。创建要绑定到的属性：

```
// lazy-loaded property
public MembershipUserCollection UsersCollection
{
    get
    { 
        if (_usersCollection == null)
        {
            _usersCollection = Membership.GetAllUsers();
        }
        return _usersCollection;
    }
}
MembershipUserCollection _usersCollection; 
```

然后`DataSource`使用`DropDownList`：

```
<asp:DropDownList RunAt="Server" DataSource=<%# UsersCollection %> ID="assigned_volunteerDropDownBox" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:35:44.403

您需要使用[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)在模板中查找控件。

# android - 用加速度计移动一个球android

> ID：12763104
> 
> 赞同：0
> 
> 时间：2012-10-06T19:30:51.313
> 
> 标签：android, accelerometer

嗨，我已经编写了这段代码来使用 ImageView 和加速度计移动一个简单的球，但不起作用。我使用了 ball.scrollTo(xa, ya) 但此代码不适用于变量捕捉加速度计

发布我的代码：

主.java

```
package com.crowley.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.widget.ImageView;
import android.widget.TextView;
import android.util.Log;

public class Main extends Activity implements SensorEventListener {
final String tag = "AccLogger";
SensorManager sensore=null;
TextView x=null;
TextView y=null;
TextView z=null;
TextView xat=null;
TextView yat=null;
String a;
String b;
private ImageView ball;

int xa=0;
int ya=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    sensore = (SensorManager) getSystemService(SENSOR_SERVICE);
    x= (TextView) findViewById(R.id.x);
    y= (TextView) findViewById(R.id.y);
    z= (TextView) findViewById(R.id.z);
    xat= (TextView) findViewById(R.id.textView1);
    yat= (TextView) findViewById(R.id.textView2);

    ball = (ImageView) findViewById(R.id.ball);
    ball.scrollTo(xa, ya);

    ball.setImageResource(R.drawable.ball);

 }

  public void onSensorChanged(SensorEvent event){
     Sensor sensor = event.sensor;
     float [] values = event.values;
     synchronized (this) {
             Log.d(tag, "onSensorChanged: " + sensor + ", x: " + 
                             values[0] + ", y: " + values[1] + ", z: " + values[2]);
     if (sensor.getType() == Sensor.TYPE_ACCELEROMETER ) {
         x.setText("x"+ values[0]);
         y.setText("y"+ values[1]);
         z.setText("z"+ values[2]);

         xa=(int)values[0];// this part of code is only test to see int x and y on Activity
         ya=(int)values[1];

         a=Integer.toString(xa);
         b=Integer.toString(ya);

         xat.setText(a);
         yat.setText(b);

         //x.setText("x"+ SensorManager.DATA_X);
         //y.setText("y"+ SensorManager.DATA_Y);
         //z.setText("z"+ SensorManager.DATA_Z);
     }
     }
  }

 public void onAccuracyChanged(Sensor sensor, int accuracy) {
    Log.d(tag,"onAccuracyChanged: " + sensor + ", accuracy: " + accuracy);
 }

  protected void onResume() {
    super.onResume();
    Sensor Accel = sensore.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
   // register this class as a listener for the orientation and accelerometer sensors
    sensore.registerListener((SensorEventListener) this, Accel,        SensorManager.SENSOR_DELAY_FASTEST);
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
} 
```

和我的 main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/x"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="16dp"
    android:text="" />

<TextView
    android:id="@+id/y"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/x"
    android:text="" />

<TextView
    android:id="@+id/z"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/y"
    android:text="" />

<ImageView
    android:id="@+id/ball"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ball" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="71dp"
    android:layout_marginRight="66dp"
    android:text="TextView" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView1"
    android:layout_alignTop="@+id/textView1"
    android:layout_marginTop="35dp"
    android:text="TextView" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:41:25.207

当传感器改变时，你不会改变球的位置。

我没有测试过，但你应该这样做：

在`onSensorChanged()`添加`ball.scrollBy(xa, ya);`或类似内容的末尾。

`ball.scrollTo(x,y);`您在 中调用`onCreate()`，但是一旦您的传感器开始报告，您根本不会移动球。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:41:35.003

你做错了两件事。你没有移动你的 ImageView。您只需在 onCreate() 方法中设置其坐标。您应该一直设置它 - 在 onSensorChanged 方法中。

其次，您不应该使用scrollTo，而是使用`offsetLeftAndRight(int offset)`&`offsetTopAndBottom(int offset)`和调用ball。`invalide()`在`onSensorChanged`方法结束时。

# java - 拯救 Liblinear for Java 中的所有预测结果

> ID：12763105
> 
> 赞同：1
> 
> 时间：2012-10-06T19:31:14.613
> 
> 标签：java, libsvm, linear-regression, predict

我想知道如何在使用 Java API for liblinear 时挽救所有的预测结果。

由于它有据可查，因此可以使用以下代码来挽救预测的准确性：

```
Feature[] instance = new FeatureNode[5];
double prediction = Linear.predict(model, instance); 
```

但是我们如何才能挽救保存在运行时提供给我们的文件中的其余结果，例如：

```
./predict -b 1 testfile.test modelfile.model resultfile.out 
```

希望您能提供帮助，目前我正在从文件中抢救数据，但效率最低的是必须去磁盘获取它。提前致谢。

最好的问候，丹尼尔·马林·苏比亚布雷

PS：小结果文件示例

```
labels 4 6 1 2
4 0.384792 0.384792 0.0620402 0.168375
4 0.384792 0.384792 0.0620402 0.168375
2 0.127897 0.127897 0.303788 0.440419
2 0.127897 0.127897 0.303788 0.440419
2 0.137623 0.137623 0.121928 0.602825 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T15:39:09.430

如果我对您的理解正确，您正在尝试在运行时获得概率结果。好吧，我正在使用的是以下代码：

```
double[] probabilityResults = new double[<num_of_classifiers>];
double prediction = Linear.predictProbability(model, instanceToTest, probabilityResults); 
```

在`probabilityResults`数组中，您将找到预测的概率。祝你好运！

# php - 动态添加/删除文本框并发布到 php

> ID：12763110
> 
> 赞同：-2
> 
> 时间：2012-10-06T19:31:36.360
> 
> 标签：php, javascript, jquery, html

我能否得到一个添加/删除动态文本框的框架，然后发布附加的结果。

我希望它看起来像这样：

> [空文本框][添加按钮]

一旦将 Value1 放入文本框中并单击添加，它将显示：

> [空文本框][添加按钮]
> [Value1][删除按钮]

添加完所有内容后，我希望将其发布并允许人们删除任何添加的文本框。

我一直在寻找示例，但找不到以这种方式工作的示例。

```
<form method="post" id="multi" action="process.php">

   <label for="cname">Company Name: <span class="required">*</span></label>
   <input type="text" size="30px" id="cname" name="cname" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['cname'] : '' ?>" placeholder="The Rainbow Kingdom" required autofocus />

   <label for="name">Contact Name: <span class="required">*</span></label>
   <input type="text" size="30px"id="name" name="name" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['name'] : '' ?>" placeholder="John Doe" required autofocus />

   <label for="email">Email Address: <span class="required">*</span></label>
   <input type="email" size="50px" id="email" name="email" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['email'] : '' ?>" placeholder="johndoe@example.com" required />

   <label for="telephone">Telephone: </label>                   
   <input size="9px" placeholder="1112223333" autofocus maxlength="9" type="tel" id="telephone" name="telephone" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['telephone'] : '' ?>" />         
   <div>
      <label>Tag</label><input class="tag" type="text" name="" type="text" />
      <div id="content" ></div>
   </div>

   <label for="message">Message: <span class="required">*</span></label>
   <textarea id="message" name="message" placeholder="Your message must be greater than 20 characters" required data-minlength="20"><?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['message'] : '' ?></textarea>

   <p id="req-field-desc">
      <span class="required">*</span> indicates a required field
   </p>
   <span id="loading"></span>

   <input type="submit" value="Submit!" id="submit-button" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:10:44.660

[你可以看看这个](http://jsfiddle.net/MJUzM/)。相当丑陋但仍然可读。足以给你的想法。
该值将显示为普通文本，并将存储在具有类似数组名称的隐藏字段中。
当您提交表单时，将收集隐藏字段中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:54:22.343

去这里： [http ://charlie.griefer.com/blog/jquery-dynamically-adding-form-elements/](http://charlie.griefer.com/blog/jquery-dynamically-adding-form-elements/)

# c# - 通过 TCP 接收数据包

> ID：12763115
> 
> 赞同：0
> 
> 时间：2012-10-06T19:32:14.940
> 
> 标签：c#, tcp, tcplistener

我有一个特定的数据包，我想从服务器接收。我正在编写一个从服务器接收数据的程序，我的程序可以在任何 PC 上使用——作为客户端。

服务器发送的数据包内容：

1) 数据包 ID - 字节

2) 玩家 ID - SByte

3) 消息 - 字符串

数据包 ID 为 0x0d。

我查看了 TCPListener 示例，但我真的不确定如何自定义它来专门处理这个数据包。如果它有帮助，我的客户端在接收任何这样的数据包之前就已经连接到服务器：

```
 ConnectionSocket = new Socket(AddressFamily.InterNetwork,
               SocketType.Stream, ProtocolType.Tcp);

        IEP = new IPEndPoint(IPAddress.Any, port);
        ConnectionSocket.Connect(serverAddress, port); 
```

如果这对 TCPListener 有帮助，我会知道服务器的端口和 IP 是什么？

我希望有人能帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:57:17.967

如果您想弄乱标识字段，则说明您没有使用标准 TCP。对于应用程序，TCP 连接被呈现为流。您无权访问基本数据包。此外，在标准 TCP 连接中，标识字段是一个随机的 16 位字段。0x0d 不会填充此宽度，并且很可能不会是恒定的。但是，我可以想象其他几种您需要这种情况的情况。

首先，如果您希望使用基于数据包的协议，请尝试使用 UDP。UdpClient 类 (http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx) 将允许您接收单个数据报，然后您可以对其进行操作。

其次，如果您实际上正在使用 TCP，并且出于某种原因确实需要获取标识为 0x000d 的数据包，那么您需要在堆栈上坐得更低。Winsock 通过 RAW 套接字 (http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548(v=vs.85).aspx) 公开了这一点，但似乎 XP 和超过。

第三，如果您正在寻找一个应用程序定义的数据包，其中包含一个名为 PacketID 的字段，则会在 TCP 上叠加一个数据包协议。在所有可能的情况下，都会有一个具有恒定值的 StartOfPacket 字节和一个 EndOfPacket 字节。但是，还有一千种其他方法可以对流进行打包，您必须检查服务器实现以确定解析流的正确方法。在任何情况下，使用 TcpListener、TcpClient 或 Socket，您都需要循环读取流到缓冲区中。每次读取后，扫描缓冲区以查找有效数据包，并对其进行处理。此时，您可以根据数据包的偏移量检查 PacketID 字段的内容。

# javascript - 是否可以在关闭 JS 的情况下使 AJAX 网站可抓取并优雅地降级？

> ID：12763117
> 
> 赞同：1
> 
> 时间：2012-10-06T19:32:21.257
> 
> 标签：javascript, ajax, seo, progressive-enhancement, graceful-degradation

根据[此规范](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)，使 Googlebot 可抓取 AJAX 站点意味着您必须在其中使用 hashbang (#!) 链接，这意味着当 JS 关闭时它不会优雅地降级（或在打开时逐渐增强）。这可能意味着在这种情况下，可爬取性和优雅降级/渐进增强是相互排斥的。事实上是这样吗？有什么可以做的吗？

*注意：为了透明起见，我会注意到 Pro Webmasters 网站上也[有人问](https://webmasters.stackexchange.com/questions/35400/is-making-ajax-site-crawlable-and-degrading-gracefully-with-js-turned-off-possib)过这个问题，但从纯程序化的角度来看，我认为它也很有趣。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T19:36:32.680

如果可能，我喜欢只在`history.pushState`可用时使用 AJAX 来加载新页面。当`history.pushState`不可用时，我回退到非 AJAX。虽然这对于那些没有`history.pushState`.

# python - 如何在python中将变量设置为等于字典中的对象

> ID：12763118
> 
> 赞同：1
> 
> 时间：2012-10-06T19:32:39.713
> 
> 标签：python

我是 python 新手，我正在尝试使用字典编写一个简单的单词计数器。我想知道为什么以下代码不起作用：

```
while word != None:
      wordObject = Word()
      wordObject.setWord(word)
      if dictionary.has_key(wordObject.getWord():
            setCount = dictionary[wordObject.getWord()]
            setCount.setCount() 
```

如果我保持原样，它永远不会进入 if 语句，如果我在 has key 方法中放置一个键值，那么它将进入语句并说我的 setCount 变量有无效的语法。我正在尝试将该变量设置为存储在我创建的字典中的键值中的对象，然后使用 setCount 方法增加单词计数。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:43:41.483

用于[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)计数（Python 2.7+）。例如，如果你想计算一个单词列表，这就是你要做的：

```
from collections import Counter

words = ['stack', 'overflow', 'stack', 'exchange']
counter = Counter(words)

print counter 
```

结果：

```
Counter({'stack': 2, 'overflow': 1, 'exchange': 1}) 
```

A`Counter`只是一个带有一些额外便利方法的字典，例如`most_common([n])`当尝试获取不存在的键时它返回零。因此，如果您使用的是 Python < 2.7，您可以通过子类化轻松实现自己的`dict`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:38:04.020

我看不到你的整个代码，但可以预测你一定有一些方法`setCount`，`wordObject`并且错误地使用了局部变量。更改为`wordObject.setCount()`可能有助于否则一个简单的

```
count = 0
while word != None:
      wordObject = Word()
      wordObject.setWord(word)
      if dictionary.has_key(wordObject.getWord():
            setCount=dictionary[wordObject.getWord()]
            count += 1 
```

足以存储计数。

# c# - SignalR ARGB 从服务器到客户端

> ID：12763119
> 
> 赞同：-1
> 
> 时间：2012-10-06T19:32:45.790
> 
> 标签：c#, javascript, jquery, signalr

有人可以建议我如何将一组 ARGB 值从 C# signalR 服务器传递到 JS SIGnalR 客户端吗？

换句话说，如何以最有效的方式将一堆 ARGB 值从 C# 传递到 Javascript，从而避免多个循环？

谢谢。

编辑：这是用于远程 PC 查看应用程序。我只想发送像素差异。我发送它的最佳形式是什么？如果您需要更多详细信息，请随时告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T05:30:10.707

您的问题不是很具体，但您显然可以以十六进制 AARRGGBB 格式的字符串发送它们。您实际上只是向客户端发送一条字符串消息，因此要发送红色、绿色和蓝色这三个值，您将执行以下操作：

```
Clients.SendColors("FFFF0000FF00FF00FF0000FF"); 
```

当然，如果您要求通过网络发送实际的位图图像，这将是非常低效的。如果您可以为您的问题添加更多细节，我们可能会提供更多想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:21:58.983

没有使用过 SignalR，看起来您应该能够替换服务器端的默认 JSON 序列化程序，以添加对您尝试序列化的对象的支持。话虽如此，它只是将循环移动到其他地方，我不确定您需要在客户端做什么来支持额外的序列化格式。

有关示例，请参见[https://github.com/SignalR/SignalR/wiki/Extensibility 。](https://github.com/SignalR/SignalR/wiki/Extensibility)

# c++ - Sublime Text 未在 C++ 中编译多文件项目

> ID：12763122
> 
> 赞同：1
> 
> 时间：2012-10-06T19:32:57.097
> 
> 标签：c++, sublimetext2, sublimetext

我要编译一个多文件C++程序，出现以下错误；

```
Undefined symbols for architecture i386:
  "included::printMSG()", referenced from:
      _main in ccQwMj1l.o
ld: symbol(s) not[Finished in 0.3s with exit code 1] found for architecture i386
collect2: ld returned 1 exit status 
```

我的代码：main.cpp：[https ://gist.github.com/3845822](https://gist.github.com/3845822)

包含的.cpp：[https ://gist.github.com/3845825](https://gist.github.com/3845825)

包括.h：[https ://gist.github.com/3845827](https://gist.github.com/3845827)

（确认与 合作`g++`）

编辑：我没有把这些文件放在一个项目中，它们都在同一个文件夹中，我正在编译`main.cpp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:47:10.750

您不能只编译单个文件并希望所有其他文件都自动链接到它以创建最终程序。

实现这一点的一种方法是使用一个名为 的程序[`make`](http://en.wikipedia.org/wiki/Make_%28software%29)，该程序读取`Makefile`具有以下规则的`make`a 。

一个简单的`Makefile`可以是这样的：

```
CXXFLAGS = -Wall -g

my_pogram: main.o other_file.o third_file.o
    g++ main.o other_file.o third_file.o -o my_program

main.o: main.cpp
    g++ $(CXXFLAGS) -c -o main.o main.cpp

other_file.o: other_file.cpp
    g++ $(CXXFLAGS) -c -o other_file.o other_file.cpp

third_file.o: third_file.cpp
    g++ $(CXXFLAGS) -c -o third_file.o third_file.cpp 
```

还有其他类似的程序可以处理这个问题。一种流行的是[CMake](http://www.cmake.org/)。

# android - 应用程序在更高版本的 android 上崩溃

> ID：12763126
> 
> 赞同：1
> 
> 时间：2012-10-06T19:33:36.400
> 
> 标签：android, nullpointerexception, runtime-error

我一直在创建一个应用程序，构建在目标 sdk 版本 15 和最低 sdk 版本 8 上。当我在运行版本 8 的设备上运行它时，每件事都运行完美。但是当我在高于版本 10 的任何设备上尝试它时，它会崩溃带有 NullPointerException。

logcat 给了我这个：

```
10-06 19:23:12.927: E/AndroidRuntime(589): FATAL EXCEPTION: main
10-06 19:23:12.927: E/AndroidRuntime(589): java.lang.RuntimeException: Unable to start                 activity        ComponentInfo{com.fansheroid.facts.chicks/com.fansheroid.facts.chicks.MainActivity}:   java.lang.NullPointerException
10-06 19:23:12.927: E/AndroidRuntime(589):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.os.Looper.loop(Looper.java:137)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.app.ActivityThread.main(ActivityThread.java:4340)
10-06 19:23:12.927: E/AndroidRuntime(589):  at java.lang.reflect.Method.invokeNative(Native Method)
10-06 19:23:12.927: E/AndroidRuntime(589):  at java.lang.reflect.Method.invoke(Method.java:511)
10-06 19:23:12.927: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-06 19:23:12.927: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-06 19:23:12.927: E/AndroidRuntime(589):  at dalvik.system.NativeStart.main(Native Method)
10-06 19:23:12.927: E/AndroidRuntime(589): Caused by: java.lang.NullPointerException
10-06 19:23:12.927: E/AndroidRuntime(589):  at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
10-06 19:23:12.927: E/AndroidRuntime(589):  at org.json.JSONTokener.nextValue(JSONTokener.java:94)
10-06 19:23:12.927: E/AndroidRuntime(589):  at org.json.JSONObject.<init>(JSONObject.java:154)
10-06 19:23:12.927: E/AndroidRuntime(589):  at org.json.JSONObject.<init>(JSONObject.java:171)
10-06 19:23:12.927: E/AndroidRuntime(589):  at com.fansheroid.facts.chicks.MainActivity.getTumblrs(MainActivity.java:156)
10-06 19:23:12.927: E/AndroidRuntime(589):  at com.fansheroid.facts.chicks.MainActivity.onCreate(MainActivity.java:62)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.app.Activity.performCreate(Activity.java:4465)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-06 19:23:12.927: E/AndroidRuntime(589):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
10-06 19:23:12.927: E/AndroidRuntime(589):  ... 11 more 
```

在过去的两天里，我一直试图找出问题所在，但这对我来说没有意义。

编辑添加的代码

```
public ArrayList<Tumblr> getTumblrs() throws ClientProtocolException,
        IOException, JSONException {
    String searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY";

    ArrayList<Tumblr> tumblrs = new ArrayList<Tumblr>();

    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(searchUrl);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String responseBody = null;
    try {
        responseBody = client.execute(get, responseHandler);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    JSONObject jsonObject = new JSONObject(responseBody);

    JSONArray posts = jsonObject.getJSONObject("response").getJSONArray(
            "posts");
    for (int i = 0; i < posts.length(); i++) {
        JSONArray photos = posts.getJSONObject(i).getJSONArray("photos");
        for (int j = 0; j < photos.length(); j++) {
            JSONObject photo = photos.getJSONObject(j);
            String url = photo.getJSONArray("alt_sizes").getJSONObject(0)
                    .getString("url");

            Tumblr tumblr = new Tumblr(url);
            tumblrs.add(tumblr);
        }
    }
    return tumblrs;
} 
```

第 156 行：

```
JSONObject jsonObject = new JSONObject(responseBody); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:38:52.557

啊，看看这个：

```
E/AndroidRuntime(589): Caused by: java.lang.NullPointerException 10-06 19:23:12.927: 
E/AndroidRuntime(589): at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116) 10-06 19:23:12.927:
E/AndroidRuntime(589): at org.json.JSONTokener.nextValue(JSONTokener.java:94) 10-06 19:23:12.927:
E/AndroidRuntime(589): at org.json.JSONObject.(JSONObject.java:154) 10-06 19:23:12.927: 
E/AndroidRuntime(589): at org.json.JSONObject.(JSONObject.java:171) 10-06 19:23:12.927: 
E/AndroidRuntime(589): at com.fansheroid.facts.chicks.MainActivity.getTumblrs(MainActivity.java:156) 10-06 19:23:12.927: 
E/AndroidRuntime(589): at com.fansheroid.facts.chicks.MainActivity.onCreate(MainActivity.java:62) 
```

它基本上说 JSON 解析器失败：您可能在 MainActivity.java 的第 156 行传递了 NULL。您应该检查该行的值，看看您的设备升级是否没有以某种方式清除值或未能正确检索值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:52:56.867

```
try {
    responseBody = client.execute(get, responseHandler);
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

这部分代码是您的响应失败的地方。您将 null 分配给 responsebody，您的调用可能会失败，因此 responsebody 在到达第 156 行时仍然为 null。

尝试在您的调试输出中查找 ex.printStackTrace(); 输出看看发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:23:54.497

通过使用 HttpResponse 和 HttpEntity 而不是 ResponseHandler 解决了这个问题，这解决了这个问题。

# oauth-2.0 - 什么是云端硬盘启动的授权？

> ID：12763128
> 
> 赞同：2
> 
> 时间：2012-10-06T19:33:48.413
> 
> 标签：oauth-2.0, google-drive-api

Google Drive SDK 文档中的[“About Authorizaion”页面有一个标题为“Drive-initiated Authorization”的部分。](https://developers.google.com/drive/about-auth)显然，我可以让 Google Drive 处理我的应用程序的身份验证流程。我该如何使用或不使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:36:58.077

当您的应用程序与 Drive UI 集成并且用户在“新建”或“打开方式”菜单中选择您的应用程序时，驱动器启动的流程就会发生。

感谢您的反馈，我们将努力使这部分文档更易于理解。

# python - 如何连接到 boto 中的现有 CloudSearch 域？

> ID：12763129
> 
> 赞同：6
> 
> 时间：2012-10-06T19:33:51.443
> 
> 标签：python, amazon-web-services, boto, amazon-cloudsearch

我刚刚开始使用 boto 连接到 Amazon CloudSearch。

我让示例正常工作，但我找不到任何连接到现有域的示例，所有示例都创建了一个新域。

四处寻找，我找到了 get_domain，但如果我在连接对象上调用它，它就会失败。

```
>>> conn.get_domain('foo')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Layer2' object has no attribute 'get_domain' 
```

关于如何连接到现有域的任何建议？

[编辑] 我从这个开始：http: [//boto.cloudhackers.com/en/latest/cloudsearch_tut.html](http://boto.cloudhackers.com/en/latest/cloudsearch_tut.html)

所以，我所做的一切

```
import boto
conn = boto.connect_cloudsearch() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T20:33:52.573

您可以执行`conn.list_domains()`此操作将返回所有当前域的域对象列表，也可以执行`conn.lookup('foo')`此操作将返回指定域名的域对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-26T06:02:08.347

**这是完美的解决方案。** 我正在使用 boto 2.38.0

我遇到了其他人面临的同样问题。然后我制作了这个脚本来连接 aws 搜索域并获得结果

```
import boto.cloudsearch2
from boto.cloudsearch2.layer2 import Layer2
from boto.cloudsearch2.domain import Domain

# from boto.cloudsearch.domain import Domain
conn = boto.cloudsearch2.connect_to_region("xxxxxx",
                aws_access_key_id='xxxxxxxxxx',
                aws_secret_access_key='xxxxxxxxx')

domain_data =  conn.describe_domains('domaainname')

domain_data = (domain_data['DescribeDomainsResponse']
                          ['DescribeDomainsResult']
                          ['DomainStatusList'])

domain = Domain(conn, domain_data[0])
search_service = domain.get_search_service()
results = search_service.search(q="abc")

print map(lambda x: x, results) 
```

**让我知道任何错误。我希望这对所有人都有效。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-19T23:48:34.627

使用 boto 2.36，我通过查看源代码来完成这项工作。

```
import boto.cloudsearch
# login to AWS
conn = boto.connect_cloudsearch2(region="us-west-1",
                aws_access_key_id='xxxxx',
                aws_secret_access_key='xxxxx')

# get the right Domain:
domain = conn.lookup('toolbox')

print domain 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T14:28:30.903

这对我有用，
我们只有一个域，
dom = Domain(con,con.describe_domains()[0])

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-07T18:10:42.177

我最初使用 Layer2 方法实现了连接：

`Layer2(region='region name').lookup('domain name')`.

但是，经过一些分析后，我发现创建连接的延迟*非常*高。

当我说非常高时，我的意思是创建连接的时间与实际执行查询并获得响应的时间相媲美（在大多数情况下 > 500 毫秒）。

因此，我的解决方案是`Domain`直接创建。**注意：这个解决方案很脆弱，但它确实显着减少了延迟**

您可以通过执行以下操作来创建域（其中许多值可以通过执行找到`aws cloudsearch describe-domains`）：

```
 domain = Domain(boto.cloudsearch2.connect_to_region('region name'), {
            'Created': True,
            'Deleted': False,
            'Processing': False,
            'RequiresIndexDocuments': False,
            'DomainId': 'domain_id',
            'DomainName': 'domain_name',
            'SearchInstanceCount': 2,
            'SearchPartitionCount': 1,
            'DocService': {
                'Endpoint': 'doc_service_endpoint',
            },
            'ARN': 'domain_arn',
            'SearchService': {
                'Endpoint': 'search_service_endpoint'
            }
        }) 
```

# javascript - 为什么我的 array.join() 不能按预期工作？

> ID：12763132
> 
> 赞同：2
> 
> 时间：2012-10-06T19:34:20.410
> 
> 标签：javascript, arrays, string, join, safari

野生动物园 6：

```
> ['a=23', 'b=234', 'c=23'].join('&');
"a=23&b=234&c=23" 
```

然后我需要使用一个变量来执行此操作。它是

```
jsss
  [
  Array[8]
    0: "s=1"
    1: "l=NTA4NTQzNnw0NzczOTg"
    2: "r=-1"
    3: "t=a"
    4: "m=0"
    5: "si=5156695"
    6: "u=5085436"
    7: "sn=mip"
    length: 8
    __proto__: Array[0]
   ]

> jsss.join('&');
"s=1,l=NTA4NTQzNnw0NzczOTg,r=-1,t=a,m=0,si=5156695,u=5085436,sn=mip" 
```

为什么它似乎忽略了分隔符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T19:38:09.950

看起来您有一个带有嵌套数组的数组，因此您只在只有一个元素（子数组）的顶部数组上调用 join，因此只是以默认行为回显该数组，没有任何要分隔的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T19:37:12.077

数组中只有一项，`jsss`因此分隔符没有用处。我想你想要的是`jsss[0].join('&');`

# c# - 更改 PropertyGrid 中的属性顺序

> ID：12763133
> 
> 赞同：1
> 
> 时间：2012-10-06T19:34:33.530
> 
> 标签：c#, propertygrid

我知道这是一个奇怪的问题，但我有这个“问题”。我正在创建游戏中间件，以使用全局照明等创建逼真的照明。

我正处于创建世界查看器的阶段，您可以在其中查看世界，对其进行一些更改，看看光照贴图的样子，你知道的。

其中有一个属性网格。在网格类中，我有一个网格数据属性，在网格数据属性中我有材料属性，在那个材料属性中我有颜色属性。是的。它具有 RGB 属性。当我在属性网格中查看颜色属性时，这些值的顺序就像 BGR，我可以将其更改为 RGB 吗？

大声笑我写得太多了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:41:10.673

您的 Color 属性是什么类型？如果可以，您应该使用 System.Windows.Media.Color 结构作为您的属性类型。

由于您需要浮点数据来表示每种颜色，请查看 System.Windows.Media.Color 的定义

```
 public float ScA { get; set; }        
    public float ScB { get; set; }       
    public float ScG { get; set; }
    public float ScR { get; set; }

    public static Color FromScRgb(float a, float r, float g, float b);
    public static Color FromAValues(float a, float[] values, Uri profileUri);
    public float[] GetNativeColorValues();
    public static Color FromValues(float[] values, Uri profileUri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T03:27:39.723

您可以将**PropertyOrder**属性与您的**PropertySorter**一起使用。
创建继承自 ExpandableObjectConverter 的 PropertySorter 类并覆盖 GetPropertiesSupported 和 GetProperties 方法以定义您自己的排序顺序。

```
[TypeConverter(typeof(PropertySorter))]
public class ColorProperty
{
    [PropertyOrder(1)]
    public int R { get; set; }
    [PropertyOrder(2)]
    public int G { get; set; }
    [PropertyOrder(3)]
    public int B { get; set; }
} 
```

# java - 达到特定值时停止 Java 摆动计时器

> ID：12763135
> 
> 赞同：1
> 
> 时间：2012-10-06T19:34:42.123
> 
> 标签：java, swing, timer, actionlistener, paintcomponent

您好，我正在使用 Java Swing 计时器让蜡烛燃烧。一切都很好，除了蜡烛几乎烧到底部的末端部分。当大小更小时计时器应该停止然后让我们说 15.. 现在我做了一些代码，似乎我所做的 if/else 语句被完全忽略了.. 有人能告诉我我做错了什么吗？

下面你可以看到我的代码：（ps getCandleSize 方法现在将长度从 500 带到 10 > 0，然后我得到负值）

```
package h04SelfBurnCandle;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import h02aKaars.DrawCandle;

public class CandlePanel extends JPanel implements ActionListener {

private boolean aan = true;
private int lengte = 500;
private int x;
private int y;
private int speed = 10;
private final int WACHTTIJD = 100; // wachttijd voor de timer

public CandlePanel() {

    javax.swing.Timer autoburn = new javax.swing.Timer(WACHTTIJD,this);

    autoburn.start();

}

DrawCandle candle = new DrawCandle();

@Override
public void paintComponent(Graphics g) {

    super.paintComponent(g);
    x = 10;
    y = getHeight() - (lengte + 10);

    for(int i=0; i < 5; i++) {

        if(lengte > 15){

        candle.drawCandle(g, x, y, lengte, aan);

        }
        else {

            candle.drawCandleBurned(g, x, y, lengte);

        }

        x = x + 70;

        System.out.println(lengte);

    }

}

public int getCandleSize() {

    do {
        lengte -= speed;
    }
    while(lengte > 15);

    return lengte;
}

@Override
public void actionPerformed(ActionEvent e) {

    getCandleSize();
    //System.out.println(lengte);
    repaint();

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:43:05.437

当`getCandleSize()`被调用但它会导致 lente 立即减少到 10。你想要的可能更像是：

```
public int getCandleSize() {
    if(lengte > 15)
        lengte -= speed;
    else
        autoburn.stop();

    return lengte;
} 
```

**注意：**您需要将自动刻录从本地更改为班级成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:43:10.613

您的绘图逻辑应该在 Swing Timer 的 ActionListener 代码中。您应该在 actionPerformed 中更改蜡烛的大小。如果大小小于最小值，则在 actionPerformed 中，停止 Timer。

# javascript - Google +1，每次点击都会中断。使用谷歌的代码。为什么会破

> ID：12763139
> 
> 赞同：0
> 
> 时间：2012-10-06T19:35:07.553
> 
> 标签：javascript, html, tinymce, google-plus, google-plus-one

我刚刚开始将一些社交媒体“分享”整合到一个网站中，第一个是 Google +1 按钮。

我已经直接从谷歌的网站管理员仪表板中取出代码，按照所有说明将其放入，当我尝试点击 +1 时，它就会崩溃

我把它“活”在：

[http://www.techonline.co.nz/modules/navigator/navto.php?unique_ID=16](http://www.techonline.co.nz/modules/navigator/navto.php?unique_ID=16)

按钮本身在这里：

```
<td style="width: 33%; text-align: center;">
    <div class="g-plusone" data-annotation="inline" data-width="130" data-href="#">Google +1</div>
</td> 
```

和底部的 Javascript 表单 Google

```
<script type="text/javascript">// <![CDATA[
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
// ]]></script> 
```

CDATA 是 TinyMCE 的自动整理。也不知道它做了什么，但它并没有阻止任何其他 Javascript 在我的网站上工作。由于按钮的显示，此实例中的代码仍然执行。

谁能告诉我为什么它会坏，就像我错了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:40:04.993

data-href 设置可能是问题所在。请参阅有关[设置 URL](https://developers.google.com/+/plugins/+1button/#target-url)的文档。理想情况下，您应该将规范元数据添加到您的页面，这在您的情况下应该会有所帮助，因为您似乎正在编写动态页面，其中 URL 可能略有不同，但仍引用相同的资源。

另一个提示，[使用网站管理员丰富网页摘要工具测试您的网页](http://www.google.com/webmasters/tools/richsnippets)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:44:35.733

你必须有一个可验证的文件，谷歌到达你的页面，发现它是无效的 - 并关闭插件。只是一种预感 - 但做

试试[validator.w3.org](http://validator.w3.org)

# jquery - Jquery 分别替换 2 次 html 字符串

> ID：12763141
> 
> 赞同：0
> 
> 时间：2012-10-06T19:35:16.033
> 
> 标签：jquery, asp.net

所以我有一个html模板：

```
 <div style='background-color: red;'>
          <div>
                $QuestionUpButton
              <%--<img style="cursor: pointer" onclick="onAddQUestionVote" src="../../Images/arrow-up-24-ns.png" data-questionvoteupbutton="$i" id='addQuestionVote' alt='Vote up' data-questionid='$questionUid' />--%>
              <span data-questionvotegroup='$i'>$QuestionVote</span>
              <span data-questiontextgroup='$i'>$textboxText<br />
              </span>
          </div>
          <div id="mm" style='background-color: white;'>
              $AnswerUpVote
              <%--<img style="cursor: pointer" onclick="onAddAnswerVote" src="../../Images/arrow-up-24-ns.png" data-answervoteupbutton="$i" id='addAnswerVote' alt='Vote up' data-answeruid='$answerGuid' />--%>
              <img style="cursor: pointer" onclick="onRemoveAnswerVote" src="../../Images/arrow-down-24-ns.png" data-answervotedownbutton="$i" id='removeAnswerVote' alt='Vote down' data-answeruid='$answerGuid' />
              <span data-answervotegroup='$i'>$AnswerVotes</span>
              <span data-labelgroup='$i'>Answer : </span>
              <span data-answertextgroup="$i" data-questionid='$questionUid' data-answerid="$answerGuid">$AnswerSpan</span>
              <input type='button' id='editButton' data-editlinkbuttongroup="$i" value='Edit' />
              <input type='button' id='deleteButton' data-deletelinkbuttongroup="$i" value='Delete Question' />
          </div>

      </div> 
```

在文档加载时，我运行代码替换所有 $ 变量，如下所示：

```
function MyFunction(result) {
    //console.log(result);
    var panel = $('#mypanel');
    var userGuid = GetUserGuid().d;
    var panel = $('#MainContent_AnsweredQuestions_mypanel');

    for (var k = 0; k < result.d.length; k++) {
        var notVotedQuestion = "<img style='cursor: pointer' onclick='onAddQUestionVote' src='../../Images/arrow-up-24-ns.png' data-questionvoteupbutton='" + i + "' id='Img1' alt='Vote up' data-questionid='" + result.d[k].Uid + "' />";
        var notVotedQuestion1 = "hulabula";
        var notVotedAnswer = "notVotedAnswer";
        var votedAnswer = "";

        console.log(result.d[k].Uid)
        var html = $("#OwnerTemplateQuestionWithoutAnswer").html().replace(/\$i/g, i)
            .replace(/\$AnswerSpan/g, result.d[k].Answers[0].Conetent)
            .replace(/\$answerGuid/g, result.d[k].Answers[0].Uid)
            .replace(/\$questionUid/g, result.d[k].Uid)
            .replace(/\$QuestionVote/g, result.d[k].QuestionVotes.length)
            .replace(/\$AnswerVotes/g, result.d[k].Answers[0].AnswerVotes.length)
            .replace(/\$textboxText/g, result.d[k].Content);

        //var html1 = $("#OwnerTemplateQuestionWithoutAnswer").html(html);

        if (didUserVote(result.d[k], userGuid) == false){
            html.html().replace("$AnswerUpVote", notVotedQuestion); 
        }

        panel.append(html);
        i++;

    }

} 
```

我第一次更换的部分工作得很好，正是我想要的：

```
 var html = $("#OwnerTemplateQuestionWithoutAnswer").html().replace(/\$i/g, i)
                .replace(/\$AnswerSpan/g, result.d[k].Answers[0].Conetent)
                .replace(/\$answerGuid/g, result.d[k].Answers[0].Uid)
                .replace(/\$questionUid/g, result.d[k].Uid)
                .replace(/\$QuestionVote/g, result.d[k].QuestionVotes.length)
                .replace(/\$AnswerVotes/g, result.d[k].Answers[0].AnswerVotes.length)
                .replace(/\$textboxText/g, result.d[k].Content); 
```

但稍后在代码中我需要以不同方式加载图像取决于某些条件

```
 if (didUserVote(result.d[k], userGuid) == false){
        html.html().replace("$AnswerUpVote", notVotedQuestion); 
    } 
```

而这部分 cide 根本不起作用......关于如何解决这个问题的任何建议，或者我如何以某种方式改进替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:56:39.870

改变这个：

```
html.html().replace("$AnswerUpVote", notVotedQuestion); 
```

对此：

```
var html = $("#OwnerTemplateQuestionWithoutAnswer");
html.html(html.html().replace("$AnswerUpVote", notVotedQuestion)); 
```

您的代码不起作用的原因是，首先您将新的 Html 分配给 var html；稍后，由于对象已经创建，您需要将其 Html 值设置为自身更新（替换/过滤）的 html 代码。当您调用 .html() 时，您将得到一个按值传递的字符串，而不是按引用传递的字符串，这就是为什么当您只是替换 .html() 时，您正在替换它，但您没有对结果做任何事情.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:43:23.260

好吧，我不确定您是否得出了上述解决方案，但我强烈建议您使用 mustache js。

Mustache 是一种“无逻辑”的模板语法。“无逻辑”意味着它不依赖于过程语句（if、else、for 等）：Mustache 模板完全用标签定义。

所以你不需要上面很难理解的javascript逻辑来做你想做的事情。

检查[Mustache.JS](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://mustache.github.com/&ei=wKd-UKKIGpHKrAftj4EI&usg=AFQjCNGB5SwnAZJriMnK2DjI2Y0o4VTeDA) 和它的[模板](http://coenraets.org/blog/2011/12/tutorial-html-templates-with-mustache-js/)教程。

# preprocessor - 在 cpp 中截断字符串（预处理器）

> ID：12763142
> 
> 赞同：2
> 
> 时间：2012-10-06T19:35:26.430
> 
> 标签：preprocessor, fortran

我将 cpp 与一些 fortran 源代码一起使用，这些源代码编译时的最大行长度为 72 个字符。 `__FILE__`效果很好，但偶尔会扩展为长字符串，因此 cpp 的输出的行数超过 72 个字符。是否有一些我可以用来截断的预处理器魔法`__FILE__`？（固定大小或获取基本名称。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:02:23.947

为什么不编译让您的 Fortran 源代码长于 72 个字符？大多数编译器对此都有一个选项，例如，gfortran 的 -fixed-line-length-none。除非超过 72 的列被用于评论，否则这应该不是问题。最初，第 73 到 80 列用于行号以对穿孔卡片进行排序——已过时！！如果必须，请使用程序修改当前代码以删除第 73 列之后的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T04:58:41.420

根据标准，C/C++ 预处理器没有允许截断字符串的功能。

我的 2 美分。

# google-drive-api - 通过 Google Drive 权限列表进行用户识别

> ID：12763169
> 
> 赞同：2
> 
> 时间：2012-10-06T19:38:40.823
> 
> 标签：google-drive-api

> **可能重复：**
> [响应中未填充权限资源的值属性](https://stackoverflow.com/questions/11846293/value-attribute-for-permissions-resource-not-populated-in-responses)

我正在尝试使用 Google Drive API，并且正在研究如何收集有关我们域中不同用户的文件权限的数据。我正在努力解决当我们尝试查看特定文件 ID 的权限时，我们得到如下响应的事实。

```
 {
   "kind": "drive#permission",
   "etag": "Some valid etag",
   "id": "some id",
   "selfLink": "https://www.googleapis.com/drive/v2/files/XXXXXXXXXXXXX/permissions/XXXXXXXXXXX",
   "name": "John Doe",
   "role": "writer",
   "type": "user"
  }, 
```

name 字段通过他们的名字和姓氏引用一个人，而不是他们的 id@domain.com，这将是唯一的。是否存在或可以添加某些内容，可以让我们查看以这种格式引用的人员的权限？我们机构中有很多人有重复的名字。我们在机构中可能有 4 或 5 个“John Doe”，这无助于确定哪个用户有权访问我们查找的文件。

关于我的角色的其他背景是，我的团队负责在域范围内提供帐户，并且正在开发用于代表使用服务帐户的机构行事的工具。

# c# - 确定一个 List 是否包含来自另一个 List 的元素

> ID：12763171
> 
> 赞同：2
> 
> 时间：2012-10-06T19:38:55.087
> 
> 标签：c#

我有一个对象模型`MyObject`，其中包含一个名为 long 的列表`ObjectList`。我有另一个名为的列表`TestList`，它也包含 long，我想确定是否`TheObject.ObjectList`包含`TestList`.

我正在尝试这样的事情，但它没有提供 Count 作为选项。

```
if (TheObject.ObjectList.Any(TestList).Count() > 0) {...} 
```

我应该如何重写这个？感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:40:39.327

使用[`Intersect`](http://msdn.microsoft.com/en-us/library/bb460136.aspx)：

```
TheObject.ObjectList.Intersect(TestList).Any() 
```

> 通过使用默认相等比较器比较值来生成两个序列的集合交集。

注意：还有[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)和[`Union`](http://msdn.microsoft.com/en-us/library/bb358229.aspx)设置操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T19:40:28.840

```
 if ( TheObject.ObjectList.Intersect(TestList).Any() ) 
 { 
   ... 
 } 
```

# php - 移动到主机 cakephp 时丢失了 $this->Auth->user('id')

> ID：12763172
> 
> 赞同：0
> 
> 时间：2012-10-06T19:38:58.740
> 
> 标签：php, cakephp-2.1

当我在`$this->Auth->user('id')`本地测试时，它运行良好，并且文件`/app/Config/core`具有 Session 的此配置

```
Configure::write('Session', array(
        'defaults' => 'cake'
    )); 
```

现在它托管在我的服务器上，我注意到我需要更改该文件，所以它看起来像

```
Configure::write('Session', array(
        'defaults' => 'php'
    )); 
```

但是这样做，我失去了`$this->Auth->user('id')`，我能找到的其他领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:19:46.730

您是如何登录用户的？

你用了`$this->Auth->login($this->data);`吗？

如果是这样，用户将使用数据登录，`$this->data`并且此数据将保存在会话中。试试`debug($this->Auth->user());`你可能只会看到用户名（也可能是密码）。

要在登录时检索所有用户数据，您需要登录而不将数据传递给 AuthComponent。

`$this->Auth->login();`将为您施展魔法，它将从数据库中检索用户（包括包含）并将此数据存储在会话中。

`$this->Auth->login();`仅当 $this->data 填充了正确的凭据时才有效。

# image - google api图片搜索不起作用

> ID：12763186
> 
> 赞同：0
> 
> 时间：2012-10-06T19:40:30.763
> 
> 标签：image, api, search

我正在尝试使用[https://developers.google.com/apis-explorer/#p/customsearch/v1/search.cse.list](https://developers.google.com/apis-explorer/#p/customsearch/v1/search.cse.list) 工具来创建图像搜索查询。参数 cx：017576662512468239146：omuauf_lfve searchType：图像编号：1 q：西蒙猫

当我提交表单时，我只能看到空响应。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:58:43.177

我也面临同样的问题。我通过创建 CSE 解决了这个问题。

1- 您应该访问[http://www.google.com/cse](http://www.google.com/cse)并创建自定义搜索引擎。2-在第 1 步之后，您应该在 CSE 的配置中启用图像搜索 ![启用图像搜索](../Images/67e0a12904d9f543574e97408a83419d.png)

3-您应该使用自己的 cx：您也可以在 CSE 基本信息选项卡中找到它。

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T23:30:10.400

我今天正在处理同样的问题，通过阅读 CSE 配置，有一个**高级选项**，您可以在其中告诉引擎它应该从哪些站点查找。

将该选项设置为“搜索整个网络但强调包含的站点”，您可以将包含的站点列表留空。希望这可以帮助。

![要搜索的站点选项](../Images/45ded127e9940c8e8d667c8f63be5160.png)

# c# - 如何等到我的进程将在磁盘上创建我的文件以避免在我检查此文件时出现 null

> ID：12763192
> 
> 赞同：1
> 
> 时间：2012-10-06T19:41:09.420
> 
> 标签：c#

我有应用程序如何打开 Tshark 进程并开始捕获数据包，该进程在磁盘上创建 pcap 文件，并从我的主窗体中检查此类属性并更新我的 GUI。

最近我添加了检查磁盘上的文件大小并且此属性不断增长的选项，我的问题是，在我启动我的函数后，代表文件大小的属性尝试检查此文件，但如果进程没有创建文件然而这个属性是空的，我的应用程序崩溃了，所以我添加了 Thread.Sleep 现在它正在工作，但我想知道是否有击球手的方式来做到这一点。

这是我的类，具有开始捕获的函数，我正在谈论的属性是 _myFile，我想要更改的 Thread.Sleep 在我的 tshark.Start();

```
 public class Tshark2
    {
        #region class members
        public string _tshark;
        public string _filePath;
        public List<string> _list;
        public ProcessStartInfo _process;
        public myObject _obj;
        public int _interfaceNumber;
        public string _pcapPath;
        public string _status;
        public int _receivesPackets;
        public int _packetsCount;
        public string _packet;
        public double _bitsPerSecond;
        public double _packetsPerSecond;
        public decimal _packetLimitSize;
        public DateTime _lastTimestamp;
        PacketDevice _device;
        public delegate void dlgPackProgress(int progress);
        public event dlgPackProgress evePacketProgress;
        public DirectoryInfo _directoryInfo;
        public FileInfo _myFile;
        public FileInfo _fileInfo;
        public FileInfo[] _dirs;
        public long _fileSize;

        public void startCapturing()
        {
            _status = "Listening...";
            ThreadStart tStarter = delegate { openAdapterForStatistics(_device); };
            Thread thread = new Thread(tStarter);
            thread.IsBackground = true;
            thread.Start();

            Process tshark = new Process();
            tshark.StartInfo.FileName = _tshark;
            tshark.StartInfo.Arguments = string.Format(" -i " + _interfaceNumber + " -V -x -s " + _packetLimitSize + " -w " + _pcapPath);
            tshark.StartInfo.RedirectStandardOutput = true;
            tshark.StartInfo.UseShellExecute = false;
            tshark.StartInfo.CreateNoWindow = true;
            tshark.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            tshark.Start();
            Thread.Sleep(1000);
            DateTime lastUpdate = DateTime.MinValue;
            StreamReader myStreamReader = tshark.StandardOutput;
            _fileInfo = new FileInfo(_pcapPath);
            string directoryName = _fileInfo.DirectoryName;
            _directoryInfo = new DirectoryInfo(directoryName);
            _dirs = _directoryInfo.GetFiles();
            _myFile = _dirs.FirstOrDefault(f => f.Name.Equals(_fileInfo.Name));

            while (!myStreamReader.EndOfStream)
            {
                _packet = myStreamReader.ReadLine();

                if (_packet.StartsWith("    Frame Number:"))
                {
                    string[] arr = _packet.Split(default(char[]), StringSplitOptions.RemoveEmptyEntries);
                    _receivesPackets = int.Parse(arr[2]);
                    _packetsCount++;
                }

                if ((DateTime.Now - lastUpdate).TotalMilliseconds > 1000)
                {
                    lastUpdate = DateTime.Now;
                    OnPacketProgress(_packetsCount++);
                }
            }

            tshark.WaitForExit();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:50:52.057

尝试 Process.WaitForExit 而不是固定的睡眠时间。请参阅[http://msdn.microsoft.com/en-us/library/ty0d8k56.aspx](http://msdn.microsoft.com/en-us/library/ty0d8k56.aspx)。

编辑：WaitForExit 应该在读取您正在生成的进程的输出之前进行，如果您试图利用该进程的输出。在这种情况下，WaitForExit 将取代 Thread.Sleep。如果要在写入时监视文件大小，请等待文件创建完成，然后使用计时器检查文件写入的进度。请参见下面的示例。

```
for (int i = 20 /* seconds till exception */; i > 0; i--)
{
    if (File.Exists(_pcapPath))
        break;
    else if (i == 1)
        throw new Exception("File was not created within 20 seconds.");
    else
        Thread.Sleep(1000);
}

while (!tshark.WaitForExit(1000 /* file size update interval */))
{
    var fileInfo = new FileInfo(_pcapPath);
    Console.WriteLine("File has grown to {0} bytes", fileInfo.Length);
}

Console.WriteLine("Complete"); 
```

# c++ - QPluginLoader 实例总是返回 null

> ID：12763194
> 
> 赞同：0
> 
> 时间：2012-10-06T19:41:47.083
> 
> 标签：c++, qt, dll, shared-libraries

我正在构建 Qt 应用程序。虽然我之前编写了很多 GUI 的东西并且框架本身没有出现问题，但我从未编写过任何能够加载插件的东西（C# .NET 应用程序之外）。我正在尝试构建的项目将插件作为其不可或缺的一部分，我认为 Qt 框架看起来不错，因为它几乎是通用的跨平台，并且似乎有一个非常好的插件系统。

我的问题是：*我似乎无法让 QPluginLoader.instance() 方法返回除了 null value 之外的任何内容*。

根据我的阅读，这是因为它没有找到插件。我想我可能忘记做某事了，但是我几乎找不到关于实际编写插件的文档（有示例，但它们并不是非常详细）。有很多加载插件的示例，我认为我这样做是正确的，但我还没有真正找到实际制作插件的示例。

这就是我所做的：

使用 Qt-Creator 我创建了两个项目：一个窗口应用程序假装它是我的插件接收应用程序和一个共享库项目假装是插件

在我的窗口应用程序中，我有一个头文件，如下所示：

```
#ifndef PLUGININTERFACE_H
#define PLUGININTERFACE_H

#include <QtPlugin>

class QStringList;

class PluginInterface
{
public:
    virtual ~PluginInterface() {};

    virtual QStringList messages() const = 0;
};

Q_DECLARE_INTERFACE(PluginInterface,
                    "com.kevincuzner.LearningPlugins.PluginInterface/1.0")

#endif // PLUGININTERFACE_H 
```

在我的共享库应用程序中，我创建了一个名为 ATestPlugin 的类（这也是项目的 TARGET 值）：

```
#ifndef ATESTPLUGIN_H
#define ATESTPLUGIN_H

#include "ATestPlugin_global.h"
#include "../LearningPlugins/PluginInterface.h"

#include <QStringList>

class ATESTPLUGINSHARED_EXPORT ATestPlugin : public PluginInterface, public QObject
{

    Q_OBJECT
    Q_INTERFACES(PluginInterface)

public:
    ATestPlugin();

    virtual QStringList messages() const
    {
        //this part is actually defined in the .cpp file, but I don't feel like pasting that here
        QStringList ret;
        ret << "foo" << "bar" << "noms" << "Hello";

        return ret;
    }
};

#endif // ATESTPLUGIN_H 
```

在我放置的 ATestPlugin.cpp 文件的末尾`Q_EXPORT_PLUGIN2(ATestPlugin, ATestPlugin)`

然后在 main 方法的 main.cpp 文件中，我执行以下操作（&w 指向主窗口）：

```
QString text = QFileDialog::getOpenFileName(&w, "Get a file");
QPluginLoader loader(text);
QObject* plugin = loader.instance();
if (plugin)
{
    QMessageBox msgBox;
    msgBox.setText(text);
    msgBox.exec();
} 
```

当我运行程序并在弹出的文件对话框中从我的库项目的构建目录中选择 libATestPlugin.so 时，我没有看到任何消息框，这意味着 *plugin 为空。以前我总是弹出消息框并显示选定的文件名，所以我知道该部分正在工作。

有没有人知道我需要做什么才能使我的插件对 QPluginLoader 可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:48:36.727

它对我不起作用。将之前的 TARGET 更改为 $$qtLibraryTarget(...) 可确保在不同平台上构建期间正确扩展。

我对 QPluginLoader 也有同样的问题。简而言之，我是如何解决它的：我创建了插件库，比如说 lib1.dll，它使用了 lib2.dll 中的一些东西。在我的应用程序中，我尝试通过 QPluginLoader 加载 lib1。

```
QPluginLoader loader( adaptersDir.absoluteFilePath(fileName) );
AdapterInterface* adapterIface = qobject_cast<AdapterInterface*>(loader.instance()); 
```

在这种情况下 loader.instance() 返回 0。解决方案是将 lib2.dll 复制到应用程序文件夹中，因为应用程序使用它来正确加载插件 lib1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:18:30.330

经过进一步的实验，我设法让插件加载。这么说我觉得不好意思，但这是 RTFM 的经典案例。

[echo 插件教程](http://qt-project.org/doc/qt-5.0/tools-echoplugin.html)（直到发布问题后我才发现）对库中的 .pro 文件进行了一些修改，以使其正确声明插件：

该行`TARGET = ATestPlugin`必须更改为`TARGET = $$qtLibraryTarget(ATestPlugin)`. 进行此更改后，弹出上述程序中的消息框，然后当我运行`qobject_cast< PluginInterface* >(plugin)`然后询问运行时，`PluginInterface->messages()`我得到了在单独的类中实现的列表。

此外，我确实更改了继承顺序以将 QObject 放在首位，并且由于它以这种方式工作，我可能会保持它（尽管我不知道它是否有所作为）。

# javascript - 设置“onclick”变量

> ID：12763198
> 
> 赞同：-1
> 
> 时间：2012-10-06T19:42:13.847
> 
> 标签：javascript, html

我对 JavaScript 相当缺乏经验。到目前为止，在这种情况下我只使用了常量，而不是变量，所以我尝试调整代码，但显然不正确。这是代码：

```
function setInput(button, setValue) {
  var vrybl='hello',
    buttonVal = button.value,
    textbox = document.getElementById('input_' + buttonVal);
textbox.value = setValue;

<html>
<input type='submit' name='submit_a' value="a" onclick="setInput('vrybl'); return false;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:44:40.843

你的函数调用是错误的。您没有提供第一个参数（或者您提供了错误的参数，并且没有提供第二个：P）。

```
setInput(this, 'vrybl'); 
```

# api - Foursquare Specials API：foursquare 如何退出特价商品？

> ID：12763203
> 
> 赞同：1
> 
> 时间：2012-10-06T19:42:42.243
> 
> 标签：api, foursquare

“状态”属性是否更改为“锁定”？他们被完全删除了吗？

基本上，我存储了一个特殊的 ID（连同一些数据），并想在以后测试它是否仍然是一个有效的特殊。实现这一目标的最佳方法是什么？

我已经无数次通过特价API，我找不到简单描述特价是否“活跃”的属性。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:24:12.600

如果无法再兑换特殊物品，则其状态将设置为“锁定”。有关更多详细信息，请参阅[https://developer.foursquare.com/docs/responses/special](https://developer.foursquare.com/docs/responses/special)。

# vb.net - VB.NET 异常问题

> ID：12763206
> 
> 赞同：0
> 
> 时间：2012-10-06T19:42:52.010
> 
> 标签：vb.net, exception, loops

我正在做我的家庭作业。我的任务是创建一个将用户选择的文件读入内存的应用程序。在这种情况下，它正在读取包含国家和匹配缩写的数组对象结构。文件正确加载，当我使用应用程序按国家或缩写搜索时，它会在文件中找到匹配的国家或缩写，并按应有的方式显示。但是，当我错误地输入信息并且找不到匹配项时，它应该转到 If Not Found 代码块并显示一个消息框。相反，它崩溃并抛出一个异常，上面写着：

你调用的对象是空的。

我不明白发生了什么。如果可以，请查看我的代码并提供帮助。谢谢你。

```
Option Strict On

'import a file
Imports System.IO

Public Class frmCountry

'Module Structure
Structure Countries
    Dim Names As String
    Dim Abbreviation As String
End Structure

'module array
Dim Country(257) As Countries
'file reader
Private sr As StreamReader

'search button click event
Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearch.Click
    'event level variables
    Dim Found As Boolean
    Dim Counter As Integer

    'looks for entry match
    If rdoAbbrev.Checked = True Then
        Do Until Found Or Counter > 256
            Found = Country(Counter).Abbreviation.ToUpper = txtAbbrev.Text.ToUpper
            If Found Then
                txtCountry.Text = Country(Counter).Names
            Else
                Counter += 1
            End If
        Loop
    Else
        Do Until Found Or Counter > 256
            Found = Country(Counter).Names.ToUpper = txtCountry.Text.ToUpper
            If Found Then
                txtAbbrev.Text = Country(Counter).Abbreviation
            Else
                Counter += 1
            End If
        Loop

    End If
    'match not found response
    If Not Found Then
        MessageBox.Show("This is not a valid entry.", "NO MATCH FOUND", MessageBoxButtons.OK)
        If rdoAbbrev.Checked = True Then
            txtAbbrev.Text = ""
            txtAbbrev.Focus()
        Else
            txtCountry.Text = ""
            txtCountry.Focus()

        End If
    End If
    'reset variables
    Counter = 0
    Found = False
End Sub
'exit button click event
Private Sub btnExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnExit.Click
    Me.Close()
End Sub
'clear button click event
Private Sub btnClear_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnClear.Click
    rdoAbbrev.Checked = False
    rdoCountry.Checked = False
    txtAbbrev.Text = ""
    txtAbbrev.ReadOnly = True
    txtCountry.Text = ""
    txtCountry.ReadOnly = True
    lblAbbrev.Visible = False
    lblName.Visible = False
    lblTitle.Focus()

End Sub
'radio button selected event
Private Sub rdoCountry_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles rdoCountry.CheckedChanged, rdoAbbrev.CheckedChanged
    Dim ButtonSelected As RadioButton

    ButtonSelected = CType(sender, RadioButton)

    Select Case ButtonSelected.Name
        Case "rdoAbbrev"
            lblName.Text = "Matching Name:  "
            txtCountry.Text = ""
            lblName.Visible = True
            txtCountry.ReadOnly = True
            lblAbbrev.Text = "Enter Abbreviation:  "
            lblAbbrev.Visible = True
            txtAbbrev.ReadOnly = False
            txtAbbrev.Focus()

        Case Else
            lblName.Text = "Enter Name:  "
            lblName.Visible = True
            txtCountry.ReadOnly = False
            txtCountry.Focus()
            lblAbbrev.Text = "Matching Abbreviation:  "
            lblAbbrev.Visible = True
            txtAbbrev.ReadOnly = True
            txtAbbrev.Text = ""
    End Select

End Sub
'user uses browse button to select file
Private Sub btnBrowse_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnBrowse.Click
    Dim DialogueResponse As DialogResult
    Dim IndexInteger As Integer

    If sr IsNot Nothing Then
        sr.Close()
    End If

    With OpenFileDialog1
        .InitialDirectory = Directory.GetCurrentDirectory
        .FileName = "Country.txt"
        .Title = "Select File or Directory for File"
        DialogueResponse = .ShowDialog
    End With

    If DialogueResponse <> DialogResult.Cancel Then
        sr = New StreamReader(OpenFileDialog1.FileName)
    End If

    Do Until sr.Peek = -1
        If IndexInteger <= 256 Then
            Country(IndexInteger).Abbreviation = sr.ReadLine
            Country(IndexInteger).Names = sr.ReadLine
            IndexInteger += 1
        Else
            Exit Do
        End If
    Loop
    sr.Close()
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:15:46.833

显然抛出异常是因为数组和循环被设置为搜索比包含的文件更多的对象。

此问题已得到解决

-解决了-

# iphone - iOS - 对调用者 viewController 的引用

> ID：12763209
> 
> 赞同：3
> 
> 时间：2012-10-06T19:43:11.273
> 
> 标签：iphone, ios, cocoa-touch, ipad

我在一个viewController中，我们称之为vcA，我称之为第二个vcB，使用

```
[self presentModalViewController:vcB animated:YES]; 
```

一旦加载了vcB，有没有办法获得对vcA的引用？

是的，我知道我可以继承 vcB 并向其添加属性。我只是在问是否有一些本机 iOS 方法/属性/已经这样做的任何东西。

我在一个 navigationController 应用程序上。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T21:19:23.817

如果它是单火使用并且没有很多协作，我倾向于使用块而不是委托，因为它看起来有点整洁。

例如，如果它只是在您使用完 secondViewController 后回调，我会：

向 SecondViewController 添加块属性

```
@property (nonatomic, strong) void (^onCompletion)(void); 
```

然后在 firstViewController 时创建 secondViewController

```
- (void)showSecondViewController;
{
  SecondViewController *viewController = [[SecondViewController alloc] init];
  viewController.onCompletion = ^{
    [self dismissViewControllerAnimated:YES completion:nil];
  };

  [self presentViewController:viewController
                 animated:YES
               completion:nil];
} 
```

然后在完成后在 secondViewController 中

```
- (IBAction)doneTapped;
{
  if (self.onCompletion) {
    self.onCompletion();
  }
} 
```

如果您需要返回值，则只需修改块以接受参数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:46:35.450

如果您的部署目标是 iOS 5 或更高版本，那么该[`presentingViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/presentingViewController)属性可能会为您提供所需的内容。

如果您的部署目标是 iOS 4，您可能会从该`parentViewController`属性中获得所需的内容。

否则，您需要定义自己的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:30:03.857

我建议使用委托。您在 vcB 上声明一个属性并将 vcA 设置为委托。这样，您可以将各种状态更改传达给呈现的 UIViewController。

首先进行协议声明并声明委托属性。

```
// ViewControllerB.h

@class ViewControllerB;

@protocol ViewControllerBDelegate <NSObject>
- (void)viewControllerDidClose:(ViewControllerB *)viewController;
@end

@property (unsafe_unretained, nonatomic) id<ViewControllerBDelegate> delegate; 
```

然后在某个事件发生时调用委托。确保检查接收对象是否实现了协议。

```
// ViewControllerB.m

- (IBAction)closeButtonTapped:(id)sender 
{
    if ([self.delegate respondsToSelector:@selector(viewControllerDidClose:)]) {
        [self.delegate viewControllerDidClose:self];
    }
} 
```

然后在vcA中实现协议。

```
// ViewControllerA.h

@interface ViewControllerA : UIViewController <ViewControllerBDelegate> 
```

设置vcA为vcB的委托。

```
// ViewControllerA.m

- (void)presentVcB {
    vcB = [[ViewControllerB alloc] initWithNibName:nil bundle:nil];
    vcB.delegate = self;
    [self presentModalViewController:vcB animated:YES];
} 
```

并在调用该方法时做出相应的响应。

```
// Implementing ViewControllerBDelegate
- viewControllerDidClose:(ViewControllerB *)viewController {
    [self dismissModalViewControllerAnimated:YES];
} 
```

请注意，此模式可用于多种目的，而不仅仅是关闭模式视图。

# javascript - 自发电功能？

> ID：12763211
> 
> 赞同：0
> 
> 时间：2012-10-06T19:43:31.353
> 
> 标签：javascript

这可能吗？如果可以，怎么办？（我还没有找到让它工作的方法）

```
var foo = function() 
{ 
    console.log("Original Function");
    this = function() 
    {
        console.log("New Function");
    }
};
console.log("Calling foo()");
foo(); 
```

期望的输出：

> 原始功能
> 
> 调用 foo()
> 
> 新功能

要提前回答问题，是的，我知道还有其他方法可以做到这一点。我只是好奇我是否可以做类似的事情`var bar = new foo();`并在`foo()`没有额外功能的情况下为其自身分配一些时间相关的属性。

**编辑：对 Charmanders 问题的回应，以及稍微不那么简化、更实际的应用**

```
var node = function(parent)
{
    this = function()
    {
        for (i in this)
        {
            // perform actions (which will occasionally include calling i()
        }
    }
    if (parent !== null)
    {
        this.parent = parent;
        // code to determine children
        this.somechild = new node(this);
        this.someotherchild = new node(this);
    }
};
var ancestor = new node(new node(null)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:48:06.510

如果要使用此技术，则需要直接分配给外部函数变量：

```
var foo = function() 
{ 
    console.log("Original Function");
    foo = function() 
    {
        console.log("New Function");
    };
}; 
```

如果函数不应该知道它的存储位置以便可以存在多个独立的函数副本，那么您真的想使用闭包工厂：

```
function makeReplacingFunction() {
    var fn;

    fn = function() {
        console.log("Original Function");
        fn = function() {
            console.log("New Function");
        };
    };

    return function() { fn(); }
}

var foo = makeReplacingFunction();
foo();
foo(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:48:42.543

分配一个新值`this`将不起作用，但您可以简单地返回一个函数：

```
var foo = function() { 
    console.log("Original Function");
    return function() {
        console.log("New Function");
    };
};

console.log("Calling foo()");
var f = foo(); /* or even: f = new foo(); */
f(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:45:43.220

是的，但你不能通过分配来做到这一点`this`：

```
function foo() {
  console.log("original");
  foo = function() {
    console.log("new");
  };
} 
```

所做的只是为全局符号“foo”分配一个新值，这样新值恰好是一个函数。

因此，当您调用`foo()`两次时，它会第一次打印“原始”，之后每次都打印“新”。

的值`this`通常不是引用它的函数的值；可以，但是*您*必须设置一个有点不寻常的情况。即使是这样，您也不能为`this`.

# windows - 在任务计划程序中指定秒数

> ID：12763214
> 
> 赞同：2
> 
> 时间：2012-10-06T19:43:55.603
> 
> 标签：windows

我的命令行是：

```
schtasks /Create /SC ONCE /ST 00:00:30 /TN MyApp /TR notepad.exe 
```

但是任务在 00:00 初始化，为什么忽略 30 秒呢？

我的操作系统是 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:39:59.170

从输出`schtasks /create ?`：

```
 /ST   starttime    Specifies the start time to run the task. The time
                  format is HH:mm (24 hour time) for example, 14:30 for
                  2:30 PM. Defaults to current time if /ST is not
                  specified.  This option is required with /SC ONCE. 
```

如您所见，/ST 参数的格式没有秒数。

# php - 如何将域中斜线后面的内容插入页面上的 php 脚本？

> ID：12763217
> 
> 赞同：1
> 
> 时间：2012-10-06T19:44:32.370
> 
> 标签：php, sendmail

我不精通PHP，这很明显。我正在使用此处显示的电子邮件 php 脚本[http://support.hostgator.com/articles/specialized-help/technical/how-to-use-sendmail-with-php](http://support.hostgator.com/articles/specialized-help/technical/how-to-use-sendmail-with-php)

这就是我想要做的。当有人访问[http://example.com/jeremy](http://example.com/jeremy)时，我希望将表单的结果发送到 jeremy@domain.com 。如果有人去 /brian 我希望将结果发送到 brian@domain.com 。

因此，在脚本中，我将此代码放入电子邮件行

```
$myemail = "$request_url=ltrim($_SERVER['REQUEST_URI'],'/');echo.$request_url;@domain.com"; 
```

但这给了我这个错误

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING in /email_form.php on line 78 
```

我觉得我很接近，但我就是想不通。我应该使用什么？感谢您的耐心和回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:51:47.130

有一些语法错误。我将分解并清理您的代码，使其符合您可能打算做的事情：

```
$request_url = ltrim($_SERVER['REQUEST_URI'],'/');
$myemail = $request_url . '@domain.com'; 
```

当然，您可以将其写成单行：

```
$myemail = ltrim($_SERVER['REQUEST_URI'],'/') . '@domain.com'; 
```

# drupal - Drupal 7 如何触发/挂钩节点“发布”事件？

> ID：12763223
> 
> 赞同：4
> 
> 时间：2012-10-06T19:45:13.197
> 
> 标签：drupal, drupal-7, drupal-nodes

在 Drupal 7 中，我想在节点发布时添加一个额外的进程。当该节点的“发布”事件触发时，我怎样才能被触发？

节点“发布”有什么钩子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T20:11:05.563

有了核心功能，就没有钩子了。但[修订](http://drupal.org/project/revisioning)模块提供了一个。

但是，您可以通过在更新 OP 上检查节点的状态来解决问题。虽然不是很聪明。

```
<?php
function MYMODULE_node_update($node){
  if (isset($node->original->status) && $node->original->status == 0 && $node->status == 1){
     MYMODULE_mymagic_func($node);
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-05T13:45:05.750

正如 Ayesh K[所写](https://stackoverflow.com/a/12763423/52023)，我也不知道核心功能。他的解决方法有效，但错过了立即发布新创建的节点的情况。

所以我扩展了代码并将其包装成一个函数：

```
/**
 * Checks if a node is being published.
 *
 * @param object $node
 *   The node to check.
 *
 * @return bool
 *   TRUE if node is now published and
 *     1) was not published before or
 *     2) did not exist before;
 *   FALSE in all other cases.
 */
function MYMODULE_node_is_being_published(&$node) {

  if (isset($node->original)) {
    return (
      isset($node->original->status) && 
      $node->original->status == 0 && 
      $node->status == 1
    );
  }
  else {
    return $node->status == 1;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T04:46:02.313

Ayesh K 的回答很好。我还通过使用 Drupal触发发布事件
找到了另一种选择。`"Rules"`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-13T10:19:27.817

如果触发函数用于更新节点，则将函数 MYMODULE_node_update($node) 更改为函数 MYMODULE_node_presave($node)

# c# - WPF 工具包是否与 Visual Studio 2012 兼容？

> ID：12763225
> 
> 赞同：1
> 
> 时间：2012-10-06T19:45:36.273
> 
> 标签：c#, visual-studio, visual-studio-2012

我有一个 C# 程序，我需要向它添加一个图表。我已经下载了 WPF Toolkit 并运行了安装程序。但是这些工具没有出现在我的设计视图中的工具箱中。

我在网上找不到任何关于设置 WPF Tooking 的好的指南，甚至 WPF Toolkit 网页也没有任何文档，这有点儿笑话。那么谁能告诉我如何让 WPF Toolkit 与 VS2012 一起工作？

或者，如果有人对其他可以完成这项工作的免费图表库有建议，并且有一些文档，我很乐意在这里提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:58:04.977

我不知道安装程序是如何创建的，但是如果它无法注册工具箱项目，您可以手动创建它们。甚至一些商业控制供应商建议，当他们的安装程序失败时，例如

[http://www.telerik.com/help/wpf/installation-adding-to-vs-2010-toolbox-wpf.html](http://www.telerik.com/help/wpf/installation-adding-to-vs-2010-toolbox-wpf.html)

您还可以向 WPF Toolkit 项目提供错误报告。

# c# - Membership.DeleteUser() 因 RI 约束而失败

> ID：12763229
> 
> 赞同：2
> 
> 时间：2012-10-06T19:45:47.567
> 
> 标签：c#, asp.net-membership

我在这里缺少一个概念。我假设这`Membership.DeleteUser()`会将用户从我的会员表中删除。我的代码：

```
// remove all but 'admin' from Membership
MembershipUserCollection users = Membership.GetAllUsers();

foreach ( MembershipUser user in users )
{
    if ( user.UserName != "admin" )
    {
        Membership.DeleteUser( user.UserName );
    }
} 
```

`DeleteUser()`失败但有异常：

```
The DELETE statement conflicted with the REFERENCE constraint 
"FK__aspnet_Me__UserI__58D1301D". The conflict occurred in database 
"MyDatabase", table "dbo.aspnet_Membership", column 'UserId'.
The statement has been terminated. 
```

在我的 Web.config 中：

```
<membership defaultProvider="MyMembershipProvider">
  <providers>
    <clear/>
    <add name="MyMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="MembershipConnectionString" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="5" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="MyApplication"/>
  </providers>
</membership> 
```

我知道两者之间存在外键关系，`Membership.UserId -> Users.UserId`但会假设整个要点`DeleteUser()`是删除该用户在和表中的所有记录`Membership`，仅举几例。`User``UsersInRoles`

当然，我可以直接进入`Membership`表格并删除相应的记录，但这违背了使用 API 的目的。我究竟做错了什么？从成员资格表中删除用户的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T20:15:34.897

好吧，使用 true`Membership.DeleteUser(string)`调用`SqlMembershipProvider.DeleteUser(string, bool)`，并且调用存储的 proc `aspnet_Users_DeleteUser`。该存储过程中包含用于删除其他相关表中的各种额外数据的代码。

你可以检查你的sproc，看看它是否被改变了。

我能想到的唯一另一件事是您是否创建了与成员资格表的任何其他外键关系，例如您自己的用户表？如果是这样，您必须先删除这些记录。这是不建议创建此类外键关系的原因之一。

检查 aspnet_Membership 表上的 FK 关系，看看是否有任何不应该存在的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-05T12:25:37.203

我有同样的问题。对我来说，原来是因为我的数据库有 ASP 成员的表和存储过程，但没有视图。我安装了九个视图，然后它工作了。我通过查看 SP aspnet_Users_DeleteUser 的实现找到了答案。在其中，您可以看到出于某种奇怪的原因，它会在从某些表中删除记录之前查看视图是否存在。由于我的数据库中不存在该视图，因此它没有首先从 aspnet_Membership 中删除记录。

# linux - ld：未定义对“eax”的引用

> ID：12763230
> 
> 赞同：0
> 
> 时间：2012-10-06T19:46:05.030
> 
> 标签：linux, assembly, x86, ld

我从来没有在我的旧 linux 机器上遇到过这个错误（都是 intel 32bit），所以我很茫然。

我正在尝试汇编和链接汇编代码（这非常简单并且应该可以工作）但是`ld`给出了错误

```
rs.o: In function `_start':
(.text+0x11): undefined reference to `eax' 
```

有问题的线就是`pushl %eax`线。我只需要将 0 的单个字节推入堆栈，因此我决定使用 xor'd`eax`寄存器。但是在使用代码进行汇编时`pushb`给了我一个“*无效的后缀或操作数用于推送*”错误，如果我尝试使用汇编很好但链接器对我大喊大叫。`as``pushb %al``pushl %eax` `as`

这是代码。

```
.section .data

.section .text

.global _start

_start:

xorl %eax, %eax

#sys_socketcall(int call, __user *args)
#sys_socket(int domain, int type, int protocol)

pushl %eax          #protocol: 0
pushl $1            #type: SOCK_STREAM
pushl $2            #domain: AF_INET
movL $1, %ebx       #sys_socket
movl $102, %eax    #sys_socketcall
int $0x80

movl $eax, %ebx  #move socket fd to check echo $?
movl $1, %eax    #exit
int $0x80 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:50:59.410

您的程序集中有一个错误：`$eax`应该`%eax`在

```
movl $eax, %ebx  #move socket fd to check echo $? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T19:50:30.190

我可以想象它是

```
movl $eax, %ebx  #move socket fd to check echo $? 
```

线。

相反，它应该是

```
movl %eax, %ebx  #move socket fd to check echo $? 
```

...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T19:52:45.443

```
movl $eax, %ebx 
```

是有问题的。它尝试将**名为 ebx 的符号的地址加载`eax`到 ebx 中，**这不是您想要的。把那个错字改成

```
movl %eax, %ebx 
```

告诉它做你真正想做的事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T19:59:25.093

除了语法错误之外，问题是您无法将字节推送到堆栈上。看着

[http://coding.derkeiler.com/Archive/Assembler/comp.lang.asm.x86/2006-03/msg00253.html](http://coding.derkeiler.com/Archive/Assembler/comp.lang.asm.x86/2006-03/msg00253.html)

[http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc266.htm](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc266.htm)

如果可能，我会建议使用 pushw %ax。

# javascript - 如何仅使用 CSS 切换 2 个 div 的位置？

> ID：12763231
> 
> 赞同：1
> 
> 时间：2012-10-06T19:46:09.250
> 
> 标签：javascript, jquery, html, css

这就是[我创建](http://jsfiddle.net/LBTHw/embedded/result/)的。我在 iPad 中设置`class='handHeld'`为`<body>`，基于它，optionsWrapper 和#container 应该使用我在 jsfiddle.net 底部定义的 CSS 类来切换位置。

```
.handHeld div.optionsWrapper { ... }
.handHeld div#container { ... } 
```

像这样：![在此处输入图像描述](../Images/61160518783733548ba935be5963f2fc.png)

如何仅使用 CSS 来实现？请注意，前 3 行（绿色、灰色和蓝色）可能并不总是存在，所以我不能静态抓取它们的高度来定位`div.optionsWrapper`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:15:52.940

由于`optionsWrapper`是 的孩子`container`，因此您无法通过 CSS 执行此操作。您必须将两个 div 并排作为开始。然后，两个 div 之一必须具有绝对高度（以 px 为单位）。最后但并非最不重要的`position`一点是，他们父母的风格必须是`relative`. 拥有父亲戚，`absolute left/top:0`optionsWrapper 上的设置应将其放在容器的左上角。

通过这里的内联样式最简单的说明：

### 没有“手持”，您的标准样式（但有“外部”选项）

```
<div style="position: relative">
   <div id="container">   stretching? lots of contents   </div>
   <div id="optionsWrapper"> left right </div>
</div> 
```

### 当 body 具有“手持”类时：

```
<div style="position: relative; overflow:hidden:">
   <div id="container" 

          style="margin-top: 50px; z-index:9;">

         stretching? lots of contents
   </div>
   <div id="optionsWrapper" 

          style="position:absolute; top:0; left:0; z-index:99;">

      left right 
   </div>
</div> 
```

[http://jsfiddle.net/QzQCt/](http://jsfiddle.net/QzQCt/)

# c# - 文本框百分比格式化和取消格式化

> ID：12763232
> 
> 赞同：0
> 
> 时间：2012-10-06T19:46:25.807
> 
> 标签：c#, winforms

在 C# windows 窗体类中，我像这样绑定我的文本框。

```
this.textMargin.DataBindings.Add(new Binding("Text", dt, "Margin", true, DataSourceUpdateMode.OnValidation, 0, "P")); 
```

这适用于将文本框“textMargin”显示为百分比。但是，当我将文本框的值传递给我的更新语句时，即使我尝试像这样使用 Decimal.Parse，也会收到字符串格式错误：

```
decimal testconvert = Decimal.Parse(this.textMargin.Text); 
```

我试图传递的值是“100%”，但它需要作为 1 提交回数据库。

这里有什么秘密？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:16:31.017

尝试

```
string textMargin = this.textMargin.Text.EndsWith("%") ? this.textMargin.Text.Replace("%","") : this.textMargin.Text;

decimal testconvert = Decimal.Parse(textMargin) / 100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:13:58.753

这应该对你有用，使用[decimal.TryParse](http://msdn.microsoft.com/en-us/library/system.decimal.tryparse.aspx)避免错误和[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)删除你的 %。

```
decimal.TryParse(this.textMargin.Text.Replace("%", ""), out testconvert);
testconvert = testconvert / 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T19:48:47.197

`%`不是小数的有效部分，不能被 解析`Decimal.Parse`。

在解析之前，您需要将其从字符串中清除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T19:48:37.753

如您所见`Decimal.Parse`，不会接受非数字值，但您可以使用如下所示的简单算法来摆脱非数字：

```
 public static string RemoveNonDigits(string s)
    {
        string newS = "";
        if (s.Length == 0) return newS;
        for (int i = 0; i < s.Length; i++)
        {

            if (Char.IsDigit(s[i]) || s[i] == '.')
                 newS += s[i];

            else if (!Char.IsDigit(s[i]))
            {
                newS += "";
            }

            return newS;
        } 
```

然后你可以打电话

```
Decimal percent = Decimal.Parse(RemoveNonDigits(textMargin.Text.ToString())); 
```

# winapi - 将 Win32 程序拆分为多个文件

> ID：12763233
> 
> 赞同：3
> 
> 时间：2012-10-06T19:46:25.327
> 
> 标签：winapi, include

我的 win32 程序变得有点大，无法保存在一个主文件中。我的计划是将代码分成三个文件，一个用于 procs 的主文件，一个用于处理文件的文件和一个用于处理字体的文件。我在拆分文件时遇到了麻烦，我不知道应该如何包含它们才能让它们充当一个主文件。例如我的一些主要内容：

```
 #include <iostream>
    #include <windows.h>
    #include "resource.h"
    #include <commctrl.h>
    #include "hideconsole.h"

    #define IDC_MAIN_MDI    101
    #define IDC_MAIN_TOOL   102
    #define IDC_MAIN_STATUS 103

    #define IDC_CHILD_EDIT 101

    #define ID_MDI_FIRSTCHILD 50000

    const char szClassName[] = "MainClass";                         //window class
    const char szChildClassName[] = "ChildClass";                   //child class

    HWND g_hMDIClient = NULL;
    HWND g_hMainWindow = NULL;

//functions and procs for windows 
```

我应该如何分离这些文件？我之前尝试过，但我无法集中精力让所有文件都可以访问主变量。谁能给我一些指示？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:54:31.330

对于全局变量（非常量），您应该放入一个头文件：

```
extern HWND g_hMDIClient = NULL;
extern HWND g_hMainWindow = NULL; 
```

您将在主 cpp 文件中保留非外部版本（它可以在任何文件中，但您最好不要移动它们）。只需将常量和宏移动到头文件中，编译器就可以自行计算出来。最后，将此头文件包含在所有 cpp 文件中。

对于函数，您需要头文件中的声明和代码文件中的定义。

头文件：

```
void myFunc(); 
```

代码文件：

```
void myFunc()
{
    // Do something
} 
```

# java - 输入流中的无限循环

> ID：12763235
> 
> 赞同：1
> 
> 时间：2012-10-06T19:46:38.317
> 
> 标签：java, sockets, input, inputstream

我正在读取从套接字的服务器端接收的输入流。我无法知道我的响应的大小是多少，我正在读入一个字节数组，这是代码

```
public static String readString(InputStream inputStream) throws IOException {

    ByteArrayOutputStream into = new ByteArrayOutputStream();
    byte[] buf = new byte[4096];
    for (int n; 0 < (n = inputStream.read(buf));) {
        System.out.println("Got to this point n is "+n);
        into.write(buf, 0, n); 
    }
    into.close();
    System.out.println("passed this point");
    return new String(into.toByteArray(), AddATudeMessage.CHARENC); 
} 
```

现在写数字 11 和 235 被打印到控制台，所以我假设服务器仍在将输出写入输入流。然而，它卡在 235 并且似乎没有发生任何事情。我尝试暂停主执行线程长达 20 秒，此时我从服务器收到 241 个字节，然后再次发生相同的无限循环，任何人都知道发生了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:15:58.120

您的代码的结构方式只有在服务器完成后关闭套接字时才能工作。否则，您的一方永远无法知道服务器是否已完成或仅仅是缓慢（或存在网络拥塞）。

解决这个问题只有两种方法：

1.  让服务器先发送预期的长度，然后在收到指定的字节数时停止读取并继续。
2.  让服务器在完成后发送一个特殊的数据序列，某种在正常数据中不会出现的 EOF 标记，您可以寻找它来告诉您何时没有更多数据。

使用的解决方案`available()`是不正确的，因为如果接收缓冲区当前为空但仍有数据在传输中，则它可以返回零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:49:23.173

`inputStream.read(buf)`在服务器关闭套接字（或者可能是元数据包的某些特殊情况或其他情况）之前，不会返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:54:15.360

考虑使用`int available()`(InputStream)
它返回可以从此输入流读取（或跳过）的字节数，而不会被此输入流的方法的下一个调用者阻塞。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T20:12:26.567

方法 int InputStream.read() 阻塞，直到它从套接字接收到数据，接收到流序列的结尾或抛出异常。

考虑使用以下语句：

```
 for (; inputStream.available() > 0;) 
```

在这种情况下，如果套接字上没有可用数据，则 for 循环结束并且您的程序可以继续。当然，你必须调整你的代码来做你想做的事情。

# ios - 如何下载 JSON 数据并在 iOS 的后台线程中处理它？

> ID：12763239
> 
> 赞同：1
> 
> 时间：2012-10-06T19:47:21.723
> 
> 标签：ios, multithreading, grand-central-dispatch

我需要下载 JSON 并在 iOS5 的后台处理它，所以我不会冻结我的主线程。我这样做没有任何成功。

这是我正在做的事情：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{

    NSURL *url = [NSURL URLWithString:myURL];
    myData = [NSData dataWithContentsOfURL:url];

    [self performSelectorOnMainThread:@selector(processTheData:)
                           withObject:myData
                        waitUntilDone:YES];
}); 

-(void)processTheData:(NSData *)data
{
    //Parse JSON here
} 
```

在上面的代码中，一旦下载完成，我会在 Main thrd 上处理它。当我知道我得到数据时，如何在后台运行它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T16:52:21.603

典型的模式是：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{

    NSURL *url = [NSURL URLWithString:myURL];
    myData = [NSData dataWithContentsOfURL:url];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self processTheData:myData];
    });
}); 
```

或者，假设它`processTheData`本身不进行 UI 更新，但您希望在完成后这样做，典型的方法是在需要更新用户界面之前不分派回主队列：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{

    NSURL *url = [NSURL URLWithString:myURL];
    myData = [NSData dataWithContentsOfURL:url];

    [self processTheData:myData];

    dispatch_async(dispatch_get_main_queue(), ^{
        // code that updates UI goes here
    });
}); 
```

最后，如果您对上述代码进行少量调用，那很好，但如果您可能会执行大量请求，您应该知道许多服务器限制了它们将接受的并发请求的数量从给定的客户。即使服务器没有，您也确实想限制您对服务器发出的并发请求数。如果您使用`NSOperationQueue`而不是 GCD，您可以轻松地做到这一点。

因此，如果您正在执行多个异步请求，您可能需要执行以下操作（使用第二个示例作为模型）。首先，在您开始发起请求之前，您应该创建一个`NSOperationQueue`对象：

```
@property (nonatomic, strong) NSOperationQueue *queue;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.queue = [[NSOperationQueue alloc] init];
    self.queue.maxConcurrentOperationCount = 4;
} 
```

然后，您必须执行单个异步请求的代码将：

```
[self.queue addOperationWithBlock:^{

    NSURL *url = [NSURL URLWithString:myURL];
    myData = [NSData dataWithContentsOfURL:url];

    [self processTheData:myData];

    [[NSOperationQueue mainQueue] addOperationWithBlock:{
        // code that updates UI goes here
    }];
}]; 
```

# ruby - 发送推荐邮件 UI 设计？

> ID：12763248
> 
> 赞同：0
> 
> 时间：2012-10-06T19:48:48.613
> 
> 标签：ruby, ruby-on-rails-3, gmail, social, google-contacts-api

我允许用户使用他们的 gmail 联系人列表将朋友推荐发送到网站。目前我正计划给他们一个选择对话框以及一个示例电子邮件示例消息。然后，当他们点击“发送”时，它基本上会调出 gmail，他们的联系人填写在密件抄送字段中，同时还有标题和他们输入的消息。

不幸的是，这似乎不是很理想。我想其他人已经在这个过程中投入了很多心思，并且已经制定了一个有效的解决方案。

在这方面存在哪些预先选择的选项？和/或您认为哪些 UI 模板效果最好？

# python - 如何在目标 c 中使用 Python 中的 str.translate() 方法？

> ID：12763253
> 
> 赞同：3
> 
> 时间：2012-10-06T19:49:59.173
> 
> 标签：python, ios, translate

所以标题解释了大部分内容。我开始为 iOS 开发 Objective c，但我还没有发现是否有办法在 Objective c 中使用类似 translate() 的方法。

这是我在 python 中使用的程序：

```
#!/usr/bin/python

from string import maketrans   # Required to call maketrans function.

intab = "aeiou"
outtab = "12345"
trantab = maketrans(intab, outtab)

str = "this is string example....wow!!!";
print str.translate(trantab); 
```

输出：

> th3s 3s str3ng 2x1mpl2....w4w！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:13:25.610

就我而言， like 没有内置方法`translate()`。（但是，您可以使用 PyObjc 在 Objective C 中获得完全相同的功能，请查阅）

你可以尝试在[`replaceOccurrencesOfString:withString:options:range`](http://developer.apple.com/library/mac/#documentation/cocoa/reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)NSMutableString 上做一些事情，或者自己编写一个函数，使用一个循环查看字符串中的每个字符，检查它是否必须被替换，如果是，用正确的字符替换它。（因为这就是`translate()`函数的作用，对吧？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:29:51.613

[`translates()`](http://hg.python.org/cpython/file/5e319fdab563/Objects/bytesobject.c#l1523)的纯 C 中的算法（就地变体）是：

```
char *input; // input C string

for (char *s = input; *s; ++s) 
  *s = trantab[(unsigned char) *s]; 
```

哪里`trantab`可以从`intab`, `outtab`:

```
char trantab[256]; // translation table
for (int i = 0; i < 256; ++i)
  trantab[i] = i; // initialize

while (*intab && *outtab)
  trantab[(unsigned char) *intab++] = *outtab++; 
```

# android - Android：如何将数据与联系人相关联

> ID：12763254
> 
> 赞同：0
> 
> 时间：2012-10-06T19:49:59.657
> 
> 标签：android, database, sqlite, android-contacts

我是 android 编程的新手，我正在寻找一种向联系人添加数据的方法。特别是，我想向联系人添加几个字符串以在我的应用程序中使用。我认为最好的方法是有一个单独的数据库表（使用 sqlite）来存储这些字符串，并有一种方法可以将联系人与该表连接起来，例如通过表中包含的联系人的 ID。这是正确的方法吗？你能给我一个如何做到这一点的代码示例吗？还有其他方法可以实现这一点吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:52:34.627

SQLite 具有[附加到其他数据库](http://www.sqlite.org/lang_attach.html)的能力，以便可以在一个查询中使用它们的表。但是，这将要求您的应用程序可以实际访问联系人数据库文件，但事实*并非*如此。

访问联系人数据的唯一方法是通过联系人内容提供程序。[它允许您通过将具有用户定义的 MIME 类型的行添加到数据表](http://developer.android.com/guide/topics/providers/contacts-provider.html#DataBasics)来添加自己的数据。

# css - 如何在图像的内联块设计中摆脱空白？

> ID：12763255
> 
> 赞同：1
> 
> 时间：2012-10-06T19:50:05.023
> 
> 标签：css, html, safari, whitespace

我有这个页面 [http://www.tripleagent.co.uk/index2.html](http://www.tripleagent.co.uk/index2.html) （将在某个点更改为索引）我的问题是我看到图像之间的空白。它仅出现在适用于 windows (Safari 5.1.7) 和 Android (4.0) 手机的 Safari 上，对于所有其他操作系统，它都可以正常工作（我不关心 ie8 及以下版本）。有一个删除html中空格的解决方案......但它变得不可读。我很想把它做成这样的可读格式......

```
<figure>
<a href="projects.html"><img src="images/squares/mosaics0001.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0002.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0003.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0004.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0006.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0061.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0062.jpg"></a>
<a href="projects.html"><img class="gif" src="images/squares/animgif/mosaic1.gif"></a>
<a href="projects.html"><img src="images/squares/mosaics0008.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0009.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0010.jpg"></a>

<a href="projects.html"><img src="images/squares/mosaics0005.jpg"></a>
<a href="projects.html"><img src="images/squares/mosaics0012.jpg"></a>

<ul class=nav><a href="projects2.html">projects</a></ul>
<a href="projects.html"><img class="gif" src="images/squares/animgif/mosaic2.gif"></a>
<a href="projects.html"><img src="images/squares/mosaics0015.jpg" ></a>
</figure> 
```

我也尝试了 0 大小的字体和字间距技巧，但它们不起作用

```
figure
{
    background: rgb(0,0,0);
    width : 100%;
    max-width: 800px;
    display: inline-block;
    font-size: 0;
    text-decoration:none;
    word-spacing: -.43em; 
} 
```

我尝试`<li></li>`消除空白，但无法使其平铺在中间，如该页面所示。 [http://www.tripleagent.co.uk/index.html](http://www.tripleagent.co.uk/index.html)

我对这一切真的很陌生，如果我错过了一些非常基本的东西，我就会徘徊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:08:17.040

使用 inline-block 时，我总是注释掉空格：

```
<!-- the usual inline-block thing...
--><div class="inlineBlockThing">foo</div><!--
--><div class="inlineBlockThing">bar</div><!--
--><div class="inlineBlockThing">baz</div><!--
... all done --> 
```

这消除了差距并使其更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:53:49.670

可能`float:left`会比`display:inline-block`?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:09:07.967

有几种方法可以对抗空间： [http ://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

就个人而言，我喜欢评论它：

```
<img /><!--
--><img /><!--
--><img /><!--
--><img /><!--
--><img /> 
```

如果您无法调整标记，则通过 CSS 浮动是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T04:58:01.990

您好，您可以用于父母（图）

```
display: table;
font: 0/0 sans-serif; 
```

或者，您可以在 base64 中使用 @font-face 0 空格作为父 [http://csscoder.ru/safari-5-1-7-win-eshhe-odin-xak-chtoby-pobedit-inline-block/](http://csscoder.ru/safari-5-1-7-win-eshhe-odin-xak-chtoby-pobedit-inline-block/) 或[http： //csscoder.ru/examples/safari-inline-block/index.html](http://csscoder.ru/examples/safari-inline-block/index.html)

```
@font-face {
font-family: 'inline-block';
src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAREAA8AAAAABjAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABWAAAABwAAAAcZhKVeUdERUYAAAF0AAAAHAAAACAAMgAET1MvMgAAAZAAAABDAAAAYG8LT11jbWFwAAAB1AAAAE0AAAFawBQnGWN2dCAAAAIkAAAABAAAAAQARAURZ2FzcAAAAigAAAAIAAAACAAAABBnbHlmAAACMAAAAGEAAABoJ54Dp2hlYWQAAAKUAAAALgAAADb7cuTdaGhlYQAAAsQAAAAdAAAAJAgAB95obXR4AAAC5AAAABQAAAAUFuwARGxvY2EAAAL4AAAADAAAAAwAWACMbWF4cAAAAwQAAAAfAAAAIABJADluYW1lAAADJAAAAOMAAAHgJGtDI3Bvc3QAAAQIAAAAMQAAAEPCf+Zpd2ViZgAABDwAAAAGAAAABpymUMgAAAABAAAAAMw9os8AAAAAzOalhQAAAADM7k0keNpjYGRgYOADYgkGEGBiYARCFjAG8RgABHYAN3jaY2BmY2CcwMDKwMJqzHKWgYFhFoRmOsuQxpQG5AOl4ICRAQmEeof7MTgw8D5gYEv7B1TJOotBA02NAgMjABIYCh4AeNpjYGBgZoBgGQZGBhAIAfIYwXwWBgsgzcXAwcAEhAwMvAwKDxj+/wergrEZ/3/9/1iBBaoXChjZGOACjCCdTAyogBFi5XAGAHUwCw0AAAAARAURAAEAAf//AA942mNgYnBhYGBKYQ1lYGZgZ9DbyMigb7OJnYXhrdFGNtY7NpuYmYBMho3MIGFWkPAmdjbGPzabGEHixoKKgqqKgoouTAr/VBhn/MtgDf212oXlLAMDAyMDEjBkAACuEhZiAAAAeNpjYGRgYGBkcJSTmSUez2/zlUGegwEEzrzzVUWmmVJYQ4EUBwMTiAcA8dIIFwAAeNpjYGRgYJ31/wYDAwcDCDClMDAyoAJWAFJhAuwAAAAC7ABECAAAAAgAAAAAAAAABAAAAAAAACwALAAsACwANHjaY2BkYGBgZeBgYGIAARDJyAASc2DQAwkAAAScAIMAeNqljs1OwkAUhb8RMLAxxgVL06UbSFsk/CWsCBsTQjTK2lZUAkLCnz4ivApPwWE61NitaebOd86993SAEktymHwJwzU4vuBKKuEc99w6zuPx6LjAT7p7qYmD4xs8U3S8o2zuHO/xTZc5Y76V0mchXittzAcbZrwqLaCKry+gwzMPjBiIkp3zRiWzk030Mv0XqSUrJrbv/fnHkCc5ifp1PzW5Jrbz23SjSkO1w5dSp8o8zbzLnSk5IhTV7WlSk2r989UjqUj5527yhpP7JtXTHVs3tNWnrVOzNZAT2js8As27QLYAeNpjYGIAg//pDGkM2AArAwMjEyMzAzMjC1t6TmVBhiF7aV6mgYGBC4h2BTIAv3wIjQAAAAABUMicpQAA) format('woff');
}
figure {
font-family: 'inline-block';
font: 0/0 sans-serif;
} 
```

# image - Starling 将按钮检测为图像

> ID：12763263
> 
> 赞同：2
> 
> 时间：2012-10-06T19:50:54.383
> 
> 标签：image, flash, button, actionscript, starling-framework

我有一个屏幕类，当我移动光标时，我想检测它下面有什么对象。我添加了一个类 TalentBtn 的自定义按钮，它从 starling 的 Button 类扩展而来，但是当我追踪它时，它是 Image 类的一个实例。我无法将其转换为 talenTbtn，当我尝试时，它指的是 null。我使用 hitTest(point) 方法检测对象，该方法返回一个 DisplayObject。你们认为我能以某种方式解决这个问题吗？下面是检测方法

```
private function onOverTalent(e:TouchEvent):void {
        var point:Point = new Point(e.getTouch(stage).globalX, e.getTouch(stage).globalY);

        displayObject = hitTest(point);
        if (displayObject == null) {
            return;
        }

        if (displayObject is Image) {
            talentFound = displayObject as TalentBtn;

            trace(displayObject);
            trace(talentFound);
        }

    } 
```

跟踪结果如下：

```
 [object Image]
    null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:18:14.463

Button 是 DisplayObjectContainer 的子类，当它被创建时，它会为自己添加一个 Image 作为背景，一个 TextField 作为标签（如果有的话）。这两者都包含在按钮内的 Sprite 中。

要专门解决您要执行的操作，请尝试以下操作：

```
private function onOverTalent(e:TouchEvent):void
{
    var point:Point = new Point(e.getTouch(stage).globalX, e.getTouch(stage).globalY);

    var hit:DisplayObject = hitTest(point);
    if (!hit)
    {
        return;
    }

    // Probably not a good idea, in case the interior structure of Button ever changes.
    var button:Button = hit.parent.parent as Button;
    trace(button);
    }
} 
```

但是，这种方法有一个问题：如果 Button 内部的代码发生变化，它可能会中断。所以这里有一个更通用的方法：

```
private function onOverTalent(e:TouchEvent):void
{
    var point:Point = new Point(e.getTouch(stage).globalX, e.getTouch(stage).globalY);

    var hit:DisplayObject = hitTest(point);
    if (!hit)
    {
        return;
    }

    var button:Button;
    if (hit is Image || hit is TextField)
    {
        // Should be the containing Sprite now
        hit = hit.parent;
        while (hit)
        {
            button = hit as Button;

            if (button)
            {
                break;
            }

            // Go up one in the display hierarchy
            hit = hit.parent;
        }

        // None of it was a button.
        if (!button)
        {
            return;
        }

        // button will be the Button object at this point.
        trace(button);
    }
} 
```

但是，您是否有理由不只是`touch`在按钮本身上监听事件？

[http://doc.starling-framework.org/core/starling/display/DisplayObject.html#event:touch](http://doc.starling-framework.org/core/starling/display/DisplayObject.html#event:touch)

# sockets - 为什么在 TCP 中使用 bind()？为什么它只用在服务器端而不用在客户端？

> ID：12763268
> 
> 赞同：57
> 
> 时间：2012-10-06T19:51:26.463
> 
> 标签：sockets, networking, tcp, network-programming, bind

我想知道 TCP 中 bind() 的确切功能。将本地地址“绑定”到套接字是什么意思？如果它为套接字分配一个端口号，那么我们为什么不在客户端使用它呢？我知道该端口是由操作系统在客户端自动分配的，但我没有全面了解这一切是如何工作的。

在bind()之后，我们listen()。绑定与listen() 有什么关系？listen() 会知道 bind() 已经执行了吗？如果是这样，bind() 会进行哪些更改以使其为人所知？我的意思是，成功执行返回零有什么帮助？

我已经经历了许多定义，但我无法详细了解所有这些。因此，如果有人可以向我解释这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-06T19:55:14.843

它分配“本地”端的端口号。

对于服务器套接字，这是最终的方法——这正是所需要的：例如，将您的套接字绑定到 Web 服务器的端口 80。

然而，对于客户端套接字，本地地址和端口通常并不重要。所以你不`bind()`。如果服务器将其客户端限制为可能具有某个端口号或超出给定范围的端口号，您也可以`bind()`在客户端使用。

另一方面，您也可以`listen()`在尚未调用的套接字上进行操作`bind()`（实际上我不确定，但这是有道理的）。在这种情况下，您的服务器端口将是随机的，并且服务器进程将通过不同的方式将其端口传递给客户端。想象一个“双连接”协议，例如 FTP，其中有一个控制连接和一个数据连接。数据连接侦听的端口是完全任意的，但必须与另一端通信。所以使用“自动确定的端口”进行通信。

Python 中的一个示例：

```
import socket
s = socket.socket() # create your socket
s.listen(10) # call listen without bind
s.getsockname() Which random port number did we get?
# here results in ('0.0.0.0', 61372)

s2 = socket.socket() # create client socket
s2.connect(('localhost', 61372)) # connect to the one above
s3, x = s.accept() # Python specific use; s3 is our connected socket on the server side
s2.getpeername()
# gives ('127.0.0.1', 61372)
s2.getsockname()
# gives ('127.0.0.1', 54663)
s3.getsockname()
# gives ('127.0.0.1', 61372), the same as s2.getpeername(), for symmetry
s3.getpeername()
#gives ('127.0.0.1', 54663), the same as s2.getsockname(), for symmetry
#test the connection
s2.send('hello')
print s3.recv(10) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-07T13:54:55.680

`bind()`定义连接的本地端口和接口地址。 如果之前没有做过`connect()`一个隐含的（零被视为“任何”）。`bind("0.0.0.0", 0)`

对于传出连接，这通常是可以接受和首选的。操作系统将简单地绑定到“所有接口”并选择一些高编号的未使用端口。如果服务器期望您来自特定端口或端口范围，您只需要在客户端上绑定。有些服务只允许来自小于 1024 的端口号的连接，这些只能由超级用户绑定，尽管现在每个人都控制自己的机器，这并不意味着什么。

对于传入连接，您必须绑定到已知端口，以便客户端知道在哪里与您联系。一旦他们这样做了，他们就为服务器提供了他们的本地地址/端口，以便通信可以双向流动。 `listen()`只会在`bind()`通话后工作。

所有套接字都必须绑定，无论它们是 UDP、TCP 还是其他。它并不总是明确地完成。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-06T19:55:04.323

它将一个套接字“绑定”到一个地址，否则它不知道它应该监听哪个地址（IP 地址/端口对）。

也`bind`可以在客户端使用。一个示例是在具有多个网卡连接到同一网络的计算机上，但客户端只想被视为来自一个特定的网络地址。

绑定不仅用于 TCP 套接字，还用于 UDP 套接字以及其他协议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-02T01:05:11.443

我知道这是一个老问题，但我有一个新答案:)

您可能希望连接到每个 IP 只允许有限数量的传入连接的服务器。

如果您有多个网络接口卡（因此有多个可能的传出 ip 进行连接），您可以使用 bind()，手动循环遍历每个 ip，以平衡您的连接，因此连接数是否则将被允许。

要获取您的接口和 ips 的列表，请参阅[此](https://stackoverflow.com/questions/270745/how-do-i-determine-all-of-my-ip-addresses-when-i-have-multiple-nics)答案。

# java - 为什么我的 equals 方法在这个类中不起作用？它无法正常运行

> ID：12763269
> 
> 赞同：0
> 
> 时间：2012-10-06T19:51:32.310
> 
> 标签：java, string, comparison

基本上，如果他们已经将该人添加到 ArrayList 中，我希望它停止并打印一条消息，但它不会那样做。

这是方法：

```
@Override
    public boolean equals(Object o) {
        if (this.name == ((Student)o).getName() && this.ID == ((Student)o).getID()) {
            return true;
        }
        else {
            return false;
        }
    } 
```

以及它用于的代码部分：

```
public void addStudents() {
        Scanner keyboard = new Scanner(System.in);
        String name = "", ID = "";

        System.out.println("Welcome! Please type exit at any point to stop entering students and for the lottery to commence.\n");

        System.out.print("Student name: ");
        name = keyboard.nextLine();

        if (!name.equals("exit")) {
            System.out.print("Student ID: ");
            ID = keyboard.nextLine();
        }

        while (!name.equals("exit") && !ID.equals("exit")) {
            System.out.print("\nStudent name: ");
            name = keyboard.nextLine();

            if (!name.equals("exit")) {
                System.out.print("Student ID: ");
                ID = keyboard.nextLine();

                if (!ID.equals("exit")) {
                    boolean contains = false;

                    for (int i = 0; i < students.size(); i++) {
                        if (students.get(i).equals((new Student(name, ID)))) {
                            contains = true;
                        }
                    }

                    if (!contains) {
                        students.add(new Student(name, ID));
                    }
                    else {
                        System.out.println("You can only enter once.");
                    }
                }
            }
        }
    } 
```

我已经为此苦苦挣扎了一段时间，但无法弄清楚为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:54:01.510

使用 equals() 方法比较字符串，而不是 ==

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:54:03.273

您还应该`String.equals`在您的`Student.equals`方法中使用：

```
if (this.getName().equals(((Student) o).getName()) && 
    this.getID().equals(((Student)o).getID())) 
```

您`Student.equals`用于比较`==`，`String`比较对象引用，如果它们`Strings`在字典上相等但不是同一个`String`对象，则会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:54:05.960

你的方法有问题`equals`。。

```
public boolean equals(Object o) {
    if (this.name == ((Student)o).getName() && this.ID == ((Student)o).getID()) {
            return true;
    }
    else {
           return false;
    }
} 
```

你也应该比较一下这个中的`name`使用`equals()`方法..

```
this.name.equals(((Student)o).getName()) 
```

如果您的 ID 也是一个字符串，请也为它执行此操作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T19:54:09.857

用于`equals`比较名称和 ID。在这种情况下，`==`比较归结为将导致错误的对象比较，因为两个名称（每个名称都不同`String`）是不同的对象。它不会进行字面比较。

以防万一，因为它是您可能想要使用的名称比较`equalsIgnoreCase`，例如，`John Doe`本质上与`john doe`. 如果 ID 是字母数字，则同样适用。

# algorithm - 您将如何验证两个图形是否相同？

> ID：12763275
> 
> 赞同：4
> 
> 时间：2012-10-06T19:52:16.183
> 
> 标签：algorithm, tree, graph-theory

假设我们想用图来表示分子，其中每个节点是一个原子，每个边是原子之间的连接。什么是确定两个图（代表分子）是否等价的算法。由于正在表示分子，因此每个节点都需要一个属性来定义它是哪个分子（碳、氮、氧等）。

为了更容易，假设每个图都从同一个根原子 Nitrogen 分支出来，我们可以将其用作算法的起始节点。

例如。NX，纽约，新西兰。其中 N 是根 Nitrogen 节点，X,Y,Z 是图的其余部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T19:59:40.187

这就是[图同构问题](http://en.wikipedia.org/wiki/Graph_isomorphism)；

> 图同构问题是计算复杂性理论中属于 NP 的少数标准问题之一，但不知道属于其众所周知的（并且，如果 P ≠ NP，不相交）子集：P 和 NP-完全。它是 Garey & Johnson (1979) 列出的 12 个问题中仅有的两个问题之一，其复杂性仍未解决，另一个是整数分解。

换句话说，在一般情况下解决它是*困难*的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T21:32:07.930

我同意[Joachim Isaksson 的回答](https://stackoverflow.com/a/12763347/1201210)，即一般情况 - 哎呀，即使是不太一般的情况 - 也很难解决。但我想提出一种策略来解决具有指定起始元素的分子树图的相对狭窄情况。[请注意，这相当于我在处理此答案时发布的[Peter de Rivaz 的答案。]](https://stackoverflow.com/a/12764015/1201210)

* * *

首先让我们定义一种形式或语言来描述该图所独有的分子图——该图只能形成一个字符串。这将允许我们比较两个字符串以确定两个图表是否相同，从而将您的问题简化为创建两个正确的字符串进行比较。（这种方法的好处是比直接的图形比较算法更容易在视觉上进行调试。）我通常看到以 H [2] O 和 H [2] SO [4]等形式描述的分子，但这种方法并不能保留图形性的分子，因此不能用于比较（H [2]O 可能是水或其他一些非常奇怪的元素排列）。所以让我们根据这些规则使用类似 Lisp 的东西来描述分子：

1.  每个图（包括子图）`(`以`)`
2.  任何具有子节点的节点 A 都是新图中列出的第一个节点，并且该图按特定顺序列在其父图中（稍后确定）
3.  任何没有子节点的节点 A 在其父图中以特定顺序列出（稍后确定）

有了这些起始规则，我们现在可以用更多类似图形的术语来描述 H [2] O：

1.  `O`是图的根，因此它开始一个新图：`(O)`
2.  `H`是 的第一个孩子`O`，但它没有孩子，因此它按原样列在其父级中，而不是作为子图的开头：`(OH)`
3.  `H`是 的第二个孩子`O`，但 is 没有孩子，因此它按原样列在其父级中，而不是作为子图的开头：`(OHH)`

所以

![H2O 图表](../Images/60d7a176efd3a6e2712e7f2339ed1cad.png)

变成`(OHH)`.

在这种情况下排序无关紧要，因为这两个`H`s 是无子元素且在元素上是等价的。

让我们尝试一种奇怪的、非理性的 H [2] O 形式来测试这种方法：

![OHH 图](../Images/f1e1be5a54616e3a37a16c476067c413.png)

1.  `O`是图的根，因此它开始一个新图：`(O)`
2.  `H`是 的第一个孩子`O`。它有一个孩子，所以它开始一个新的图表：`(O(H))`
3.  `H`是 的第一个子级`H`，但 is 没有子级，因此它按原样列在其父级中，而不是作为子图的开头：`(O(HH))`

我们知道到目前为止，我们的方法可以处理像 H 2 O 这样的简单情况[，][其中]排序[不是]问题，但是如果没有一致地对从. 在计算子图（如果有的话）之前，不可能给一个子图一个有意义的命令，所以我们将添加一个最终规则来执行：[[`O``S`]]

1.  每个图（包括子图）`(`以`)`
2.  任何具有子节点的节点 A 都是新图中列出的第一个节点，并且该图按特定顺序列在其父图中（参见步骤 4）
3.  任何没有子节点的节点 A 按特定顺序列在其父图中（参见步骤 4）
4.  **在访问了所有子节点并创建了它们的子图（如果有）之后，按字母顺序排列父节点中的子节点/子子图**

用这个新规则重新访问H [2] O 会产生相同的输出，因为这两个`H`s 在字母上是等价的并且它们没有孩子。所以让我们试试 H [2] SO [4]：

![h2so4 图表](../Images/b24b6ed2b83144b401ea0a30797aa0fe.png)

1.  `S`是图的根，因此它开始一个新图：`(S)`
2.  `O`是 的第一个孩子`S`。它有孩子，所以它开始一个新的图表：`(S[unsorted:](O))`
3.  'H' 是 的第一个孩子`O`。它没有孩子。没有要处理的其他子级，因此不需要在此级别进行排序：`(S[unsorted:](OH))`

4.  `O`是 的第二个孩子`S`。这个没有孩子：`(S[unsorted:](OH)O)`

5.  `O`是 的第三个孩子`S`。它有孩子，所以它开始一个新的图表：`(S[unsorted:](OH)O(O))`

6.  'H' 是 的第一个孩子`O`。它没有孩子。没有要处理的其他子级，因此不需要在此级别进行排序：`(S[unsorted:](OH)O(OH))`

7.  `O`是 的第四个孩子`S`。这个没有孩子：`(S[unsorted:](OH)O(OH)O)`

8.  最后，`S`按字母顺序对子图进行排序：（`(S(OH)(OH)OO)`请注意，我在字母比较中对子图进行了特殊处理，但这不是必需的。）

最终结果是`(S(OH)(OH)OO)`

让我们尝试 H [2] SO [4]的变体，看看它会产生什么。请注意，这并不能证明该方法是好的，只是演示图表中的变化如何产生不同的结果。

![一些奇怪的 H2SO4 图表](../Images/24ab414857bba70c65fdb2ed204793ae.png)

1.  `S`是图的根，因此它开始一个新图：`(S)`
2.  `O`是 的第一个孩子`S`。它有孩子，所以它开始一个新的图表：`(S[unsorted:](O))`
3.  `O`是第一个孩子。它没有孩子。`(S[unsorted:](O[unsorted:]O))`
4.  `H`是老二，没有孩子。`(S[unsorted:](O[unsorted:]OH))`
5.  现在对 的孩子进行排序`O`：`(S[unsorted:](OHO)`
6.  `O`是 的第二个孩子`S`。它有孩子，所以它开始一个新的图表：`(S[unsorted:](O))`
7.  `H`是第一个孩子。它没有孩子。`(S[unsorted:](OHO)(O[unsorted:]H))`
8.  `O`是老二，没有孩子。`(S[unsorted:](OHO)(O[unsorted:]HO))`
9.  现在对 的孩子进行排序`O`：`(S[unsorted:](OHO)(OHO))`
10.  最后，按字母顺序对 的孩子进行`S`排序：`(S(OHO)(OHO))`

该 H [2] SO [4] ( `(S(OHO)(OHO))`) 与前一个 ( `(S(OH)(OH)OO)`) 不同。

* * *

我没有试图正式证明这种方法可以保证有效，甚至没有正式描述它，或者解释那里广泛的分子细节，如债券计数等。不过，至少，我希望这能鼓励您尝试解决图形比较问题。我认为这是可行的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T21:26:10.353

您的问题被标记为“树”，这可能意味着图中没有循环？

如果是这种情况，那么就有一种有效的算法来确定分子是否等价。

给定根原子，想象这是向下延伸的树的顶部。

这个想法是从树的底部迭代地计算出哪些子树是等效的。

从底部开始并标记两个分子中的所有等效原子。对该列表进行排序并检查两个列表是否匹配。（在底层，这只是简单地计算每种原子的数量是否相同。）

然后工作到下一个最低水平。对于每个原子，给它一个基于原子类型的标签，以及它连接到的子树的排序标签。

再次对该列表进行排序并检查列表是否匹配。

当您到达根节点时，如果所有检查均已通过，则分子是同构的。

# javascript - 尝试为所有图像添加属性

> ID：12763281
> 
> 赞同：-1
> 
> 时间：2012-10-06T19:52:53.937
> 
> 标签：javascript, html

我不明白我做错了什么，这应该将 contextmenu 属性添加到图像以返回 false。我试过 'img[i].contextmenu="return false";' 也。

```
var img = document.body.getElementsByTagName("img");
var i = 0;
while (i < img.length) {
    img[i].setAttribute("contextmenu", "return false;");
    i++;
} 
```

我基本上想把这个jQuery变成JavaScript：

```
$(document).ready(function() {
    $("img").bind("contextmenu", function(e) {
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:55:40.423

事件属性开头`on`so try

```
var img = document.body.getElementsByTagName("img");
var i = 0;
while (i < img.length) {
    img[i].setAttribute("oncontextmenu", "return false;");
    //img[i].oncontextmenu = function(){return false;};
    i++;
} 
```

[**演示**](http://jsfiddle.net/zT3Vu/)

# c++ - CxImage GIF 保存时“损坏”

> ID：12763287
> 
> 赞同：2
> 
> 时间：2012-10-06T19:53:14.153
> 
> 标签：c++, image, gif

在 C++ CxImage 库中保存 GIF 有一点问题。我也在 CxImage 论坛上发布了这个，但它们似乎已经死了，所以我希望在这里找到使用 CxImage 并且可能遇到过这个问题的人。

我正在使用版本 7.01（最新）。

当我保存 GIF 时，它总是显示为 17x15 像素，大多数软件无法显示。（Internet Explorer、Windows Explorer、Photoshop 7.0、Irfanview）。其他软件可以处理这个问题（MSPaint、MSOffice 照片编辑器和 CxImage 本身）。

我已经深入挖掘，发现它是在 ximagif.cpp 的第 698 行的 CxImageGIF::EncodeRGB 中引起的：

```
const int32_t cellw = 17; // <-- This is where the dimensions shown in Win Explorer come from
const int32_t cellh = 15; // <--
CxImageGIF tmp;
for (int32_t y=0;y<head.biHeight;y+=cellh){
    for (int32_t x=0;x<head.biWidth;x+=cellw){
        if ((head.biWidth -x)<cellw) w=head.biWidth -x; else w=cellw;
        if ((head.biHeight-y)<cellh) h=head.biHeight-y; else h=cellh;

        if (w!=tmp.GetWidth() || h!=tmp.GetHeight()) tmp.Create(w,h,8);

        if (IsTransparent()){
            tmp.SetTransIndex(0);
            tmp.SetPaletteColor(0,GetTransColor());
        }

        uint8_t i;
        for (uint32_t j=0;j<h;j++){
            for (uint32_t k=0;k<w;k++){
                i=(uint8_t)(1+k+cellw*j);
                tmp.SetPaletteColor(i,GetPixelColor(x+k,head.biHeight-y-h+j));
                tmp.SetPixelIndex(k,j,tmp.GetNearestIndex(tmp.GetPaletteColor(i)));
            }
        }

        tmp.SetOffset(x,y);
        tmp.EncodeExtension(fp);
        tmp.EncodeBody(fp,true);
    }
} 
```

逻辑屏幕描述符设置为正确的图像大小，但显然，图像被编码为 15x17 的小数据块。

根据我对 GIF 标准的了解，可以这样做，但似乎很多程序没有正确理解这一点，并假设每个块都是一整帧。也许我错了，我昨晚刚读到关于 GIF 标准的那部分

看起来这通常用于动画，并且 CxImage 将此帧的帧时间正确设置为 0。但是，一些程序会使用默认的 GIF 超时逐块绘制图像。

我尝试通过将 cellw 和 cellh 分别设置为 head.biWidth 和 head.biHeight 来修改代码以使其在一个块中编码每一帧，但无济于事。有没有人遇到过这个问题？

即使您不使用CxImage，但熟悉GIF89a，也许您可​​以确认我对GIF标准的解释是正确的？我很难相信微软和/或 Adob​​e 不会编写可以根据标准正确解码任何 GIF 图像的代码。我也很难相信用于图像处理的最佳可用 C++ 库之一会不正确或异常地编码常见的文件格式，如 GIF。

# jquery - div出现盲效问题jquery

> ID：12763289
> 
> 赞同：1
> 
> 时间：2012-10-06T19:53:38.560
> 
> 标签：jquery

我编写了一个例程，它将动态创建一个 div 并覆盖另一个 div。我的代码可以正常工作，但我正在尝试做的事情并没有变得完美。我认为我的代码中存在逻辑或 css 相关问题。所以在这里我给我的代码请通过，如果可能的话，请纠正它。

## 我的 html

```
<div id="box-outer">
    <div id="data-box">
        This is your data.
    </div>
 </div>
 <asp:Button ID="blinddwn" runat="server" Text="BLIND-2-DOWN" /> 
```

## 我的 CSS

```
 #box-outer
    {
        overflow: hidden;
        height: 200px;
        width: 200px;
        margin: 20px;
        padding: 10px;
        background-color:Green;
    } 
```

## 我的 Jquery 例程

```
 $(document).ready(function () {
        jQuery.fn.exists = function () { return this.length > 0; }

        jQuery.fn.blindToggle = function (speed, easing, callback) {
            var oDiv;
            var margin_top = this.outerHeight() + parseInt(this.css('paddingTop')) + parseInt(this.css('paddingBottom'));

            if ($("#BlindBox").exists() == false) {
                var _height = this.outerHeight();
                var _width = this.outerWidth();

                oDiv = $("<div id='BlindBox'></div>");
                oDiv.css("height", _height + 'px');
                oDiv.css("width", _width + 'px');
                oDiv.css("margin-top", ('-' + margin_top + 'px'));
                oDiv.css("padding", "10px");
                oDiv.css("background", "#e459e9");
                oDiv.css("position", "relative");
                oDiv.css("display", "none");
                this.append(oDiv);
            }
            else {
                oDiv = $('#BlindBox');
            }

            if (parseInt(oDiv.css('marginTop')) < 0) {
                oDiv.css('display', 'none');
            }

            return oDiv.animate({ opacity: 'toggle',
                marginTop: parseInt(oDiv.css('marginTop')) < 0 ? 0 : ('-' + margin_top + 'px')
            }, speed, easing, callback);

        };
    });

        $(document).ready(function () {
            $('#blinddwn').click(function () {
                $('#box-outer').blindToggle('slow');
                return false;
            });
        }); 
```

如果有人运行代码，那么他/她会看到 BlindBox div 没有正确覆盖我的另一个名为 box-outer 的 div。请看看我的例程并告诉我有什么问题。如果可能，纠正它

在这里，我给出了另一个 url 链接[http://jsfiddle.net/tridip/YdnLd/8/](http://jsfiddle.net/tridip/YdnLd/8/)只需单击此处，您将看到我试图通过代码完全实现的效果。我想通过我的代码来实现同样的效果。所以请告诉我我的代码有什么问题。谢谢

# macos - OS X arch 命令不正确

> ID：12763296
> 
> 赞同：16
> 
> 时间：2012-10-06T19:54:01.133
> 
> 标签：macos, cpu-architecture

我试图弄清楚我的 MacBook 必须使用什么 CPU 架构来尝试找出为什么 NASM 不能与 x86_64 gcc 一起工作。arch 命令返回 i386。但是，我可以运行 i386 和 x86_64 二进制文件，并且根据系统信息，我有一个 64 位 CPU（Intel i7）。不仅如此，当我在 /usr/bin/arch 上运行 lipo -info 时，它说它是一个具有 i386 和 x86_64 架构的胖文件。如果我没有运行 i386 系统，为什么 arch 会说我在运行？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-06T20:03:24.093

不幸的是，这正是 OS X 上的`arch`工作方式。对于当前的 OS X 系统，`arch`报告`i386`了能够运行 32 位的英特尔架构；它不会告诉您它们是否可以运行 64 位。该行为似乎是在 OS X 中首次引入英特尔支持时`arch`用于区分平台`ppc`和`i386`平台的遗留问题。从命令行中，可以使用`system_profiler`;获得更详细的信息。更多详细信息，请参阅`man 8 system_profiler`。

# c++ - 从 C 程序访问 dtrace 探针

> ID：12763297
> 
> 赞同：0
> 
> 时间：2012-10-06T19:54:01.013
> 
> 标签：c++, macos, dtrace

有 runocc.d dtrace 脚本，它打印每个处理器的运行队列。我需要在 Mac OS X 上的 C++ 程序中获取运行队列长度。是否有可能以某种方式将 dtrace 构造嵌入到 C++ 程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:52:04.357

OK，发现有dtrace API，虽然它是“私有的”和“不稳定的”，而且你似乎不能只要求一次probe的值——你需要开始监控，然后定期轮询probe。由于这不是我们项目中的最高优先级，我不会立即尝试，但很高兴知道它存在 - [http://www.osdevcon.org/2008/files/osdevcon2008-petr.pdf](http://www.osdevcon.org/2008/files/osdevcon2008-petr.pdf)

还快速检查确认有一个文件 /usr/include/dtrace.h 并且它确实具有 PDF 中提到的功能。

# emacs - 在 emacs 文本缓冲区中插入图像

> ID：12763309
> 
> 赞同：0
> 
> 时间：2012-10-06T19:54:59.140
> 
> 标签：emacs, elisp

我们如何在 emacs 中插入图像？我知道：

```
(insert-image (create-image "image/path")) 
```

并用`C-x C-e`. 我想我必须打开 iimage-mode 但它不起作用。这种方法有什么错误？还有哪些其他插入图像的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:54:00.083

您需要使用图像的完整路径：

```
(insert-image (create-image "~/imagedir/...image...")) 
```

# java - 通用 N 元树（每个子节点超过两个节点的树）Java 中的树遍历，使用节点列表

> ID：12763316
> 
> 赞同：0
> 
> 时间：2012-10-06T19:55:24.193
> 
> 标签：java, algorithm, generics, tree, iterator

我一直在尝试在工作中实现 Autosys 作业计划的树表示。由于每个作业（流程）都可以有一个或多个相关作业，因此我决定使用 n-ary tree 实现，以便我可以映射流程。我使用相同的 java 集合。

Q1（已解决）：目前的问题是显示功能陷入无限循环。我尝试寻找现有线程，但找不到使用迭代器进行遍历的示例。

Q2:(OPEN)显示函数以Post order方式遍历树。我想以级别顺序方式遍历它，其中节点在级别基础上打印。根，然后是一级的所有节点，然后是二级的所有节点，依此类推。DFS 遍历的链接作为另一个问题发布在下面的链接中。（大家好，我对同一棵树的级别顺序遍历还有另一个问题，我已经在下面给出的链接上发布了这个问题。如果你们能提供帮助，我会很高兴。 [通用树的级别顺序遍历（n-ary tree ) 在 java 中](https://stackoverflow.com/questions/12788641/level-order-traversal-of-a-generic-treen-ary-tree-in-java) 让我们为泛型树提供更多资源。)

我们可以为刚接触 n 元树的人制作一个资源丰富的帖子吗，因为我发现那里的基本示例很少。

这是我的代码，我从一个具有三个孩子的根节点开始。我计划稍后扩展它。

一个初级问题。不建议在递归中使用迭代器。我尝试在 display() 中单独定义一个迭代器，但它仍然不起作用。

当前树结构：

> ```
>  root(100)
>     /      |       \
>   90       50       70
>   /        \
> 20 30   200  300 
> ```

输出是后序的（不确定这是否意味着 DFS）。

```
20 30 90 200 300 50 70 100 
```

代码

```
import java.util.*;
import java.io.*;
import java.util.List;

//The node for the n-ary tree

public class NaryTree 
{
//The display function traverses the tree

void display(NaryTreeNode t)
{
    Iterator<NaryTreeNode> IT = t.nary_list.iterator();
    if(!(IT.hasNext()))   //If the node does not  have any children, enter.
    {
    //    System.out.println("No more childs of this node");
        System.out.print( t.data + " ");
        return;
    }

    while(IT.hasNext()){
        display(IT.next()) ;            //Recursive Call
    }

   System.out.print(t.data + " ");
}

public static void main(String args[]){

    NaryTree t1 = new NaryTree();

    NaryTreeNode root = new NaryTreeNode();

    root.data = 100;

    NaryTreeNode lev_11 = new NaryTreeNode();   lev_11.data=90;
    NaryTreeNode lev_12 = new NaryTreeNode();   lev_12.data=50;
    NaryTreeNode lev_13 = new NaryTreeNode();   lev_13.data=70;
    NaryTreeNode lev_21 = new NaryTreeNode();   lev_21.data=20;
    NaryTreeNode lev_22 = new NaryTreeNode();   lev_22.data=30;
    NaryTreeNode lev_23 = new NaryTreeNode();   lev_23.data=200;
    NaryTreeNode lev_24 = new NaryTreeNode();   lev_24.data=300;

    //Add all the nodes to a list.

    List<NaryTreeNode> temp2 = new ArrayList<NaryTreeNode>();  //Level two first branch
    temp2.add(lev_21);
    temp2.add(lev_22);

    List<NaryTreeNode> temp3 = new ArrayList<NaryTreeNode>();  //level two second branch
    temp3.add(lev_23);
    temp3.add(lev_24);

    List<NaryTreeNode> temp = new ArrayList<NaryTreeNode>();  //level one
    temp.add(lev_11);
    temp.add(lev_12);
    temp.add(lev_13);

    lev_11.nary_list.addAll(temp2);
    lev_12.nary_list.addAll(temp3);
    //Add Temp to root  to form a leaf of the root

    root.nary_list.addAll(temp);
    //Call the display function.
    t1.display(root); 
```

} }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:29:59.633

```
nary_list.iterator() 
```

每次创建一个新的迭代器。所以如果一个列表里面有任何东西，这将是一个无限循环；它每次运行时都会创建一个新的迭代器，并且总是在其中包含元素：

```
while(t.nary_list.iterator().hasNext()){ 
```

如果你想直接使用迭代器，你可以这样做：

```
Iterator<NaryTreeNode> iterator = t.nary_list.iterator();
while (iterator.hasNext()) { 
```

但是，您也可以在 Java 中使用 for each 循环来减少冗长：

```
for (NaryTreeNode node : t.nary_list) 
```

**编辑**

我还将按此顺序编写显示函数，以便在用尽迭代器后打印当前节点的值，而不必询问`!hasNext()`：

```
// Display all of my children
for (NaryTreeNode node : t.nary_list) {
    display(node);
}

// Display myself
System.out.println("Value is: " + t.data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:14:37.863

在我看来，您每次都在通过循环创建一个新的迭代器，因此每个迭代器都设置为列表的开头。稍后我将尝试添加规范参考。尝试：

```
 Iterator<NsryTreeNode> i = t.nary_list.iterator();
    while(i.hasNext()){
        display(t.nary_list.iterator().next()) ;            //Recursive Call
    } 
```

您可能想查看[http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)。您可能会发现 ListIterator 具有价值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T20:20:54.153

我对 Java 的了解不够多，无法理解该循环中可能发生的事情，但我觉得这很可疑；按照我的阅读方式，您每次都在循环中创建一个新的迭代器。

我还建议您考虑使用 first-child/next-sibling 选项，而不是在每个节点中放置一个列表。在这个系统中，每个节点（最多）引用两个其他节点：它的第一个子节点（如果它有任何子节点）和它的下一个兄弟节点（除非它是其父节点的最后一个兄弟节点）。然后，您可以通过兄弟列表遍历兄弟列表以枚举子节点，并且您最终不会在每个节点中遇到可变长度数组的所有开销。

# html - 为什么没有隐藏的东西？

> ID：12763317
> 
> 赞同：0
> 
> 时间：2012-10-06T19:55:25.480
> 
> 标签：html, css

我使用以下代码在[我的博客](http://speakingwithpictures.com)上隐藏了一个横幅：

```
#collection-506d943d84aead5098d63cc2 #banner-area {
    display: none;
} 
```

但是，当我单击帖子标题时，[它会重新出现](http://speakingwithpictures.com/2012/10/6/this-is-a-test-post-what-do-you-think)。

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:01:50.147

`collection-506d943d84aead5098d63cc2`是一个类，而不是一个 id，所以你不要在 CSS 中用“#”来指定它。

# android - 启动后杀死Android进程

> ID：12763318
> 
> 赞同：3
> 
> 时间：2012-10-06T19:55:28.833
> 
> 标签：android

我需要找到解决方案，以杀死所有外国应用程序，但允许的应用程序列表除外（这是我们使用 Android 平板电脑的公司经理的任务）。

现在，我以这种方式杀死外国应用程序（代码由服务中的计时器工作，每 2 秒）：

```
if (killThisProcess) {
    Log.i("Process to KILL: ", appProcess.processName);

    // kill app
    activityManager.killBackgroundProcesses(appProcess.processName);
} 
```

此代码有效，但仅在后台应用时有效。用户可以启动应用程序，做某事，只有在应用程序进入后台后，它才会被杀死。

启动后如何在前台模式下杀死进程？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T20:01:21.610

> 启动后如何在前台模式下杀死进程？

幸运的是，您不能，除非以超级用户身份运行时在 root 设备上。

> 这是我们使用 Android 平板电脑的公司经理的任务

欢迎您创建自己的 ROM 模组，以消除您不想要的应用程序并在相关平板电脑上安装该 ROM 模组。

或者，解雇滥用平板电脑的“公司经理”。

或者，解雇*不*滥用平板电脑的“公司经理”，因为我可以教孩子如何通过您的应用程序，而任何愚蠢到*无法*通过您的应用程序的“公司经理”都不应该担任管理职位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:07:38.990

restartPackage - 但现在已弃用

```
List<ActivityManager.RunningAppProcessInfo> listOfProcesses = manager.getRunningAppProcesses();
for (ActivityManager.RunningAppProcessInfo process : listOfProcesses)
{
     if (pids.contains(process.pid))
     {
      // Ends the app
      manager.restartPackage(process.processName);
     }
} 
```

权限

```
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.RESTART_PACKAGES"/> 
```

# mysql - 使用 Null 字段来表示什么？

> ID：12763322
> 
> 赞同：0
> 
> 时间：2012-10-06T19:55:44.817
> 
> 标签：mysql, database, database-design, relational-database

可以在 中使用 'NULL' 值`deal.tariff_id`来表示它属于`tariff_data`表中的任何关税`affiliate_id=3`吗？

例如：

```
mysql> select * from phone;
+----+------------------+
| id | name             |
+----+------------------+
|  4 | HTC Sensation XL |
| 26 | iPhone 4s        |
| 25 | iPhone 5         |
| 24 | Nokia C3-01      |
+----+------------------+

mysql> select * from tariff;
+----+-----------------+-----------------+--------------+-------------+
| id | name            | tariff_duration | monthly_cost | description |
+----+-----------------+-----------------+--------------+-------------+
|  1 | Business Plan 1 |              24 |         5.00 |             |
|  2 | Business Plan 2 |              24 |        10.00 |             |
|  4 | Business Plan 3 |              24 |        15.52 |             |
|  5 | Business Plan 4 |              24 |        18.52 |             |
|  8 | Super Plan      |              12 |        15.00 |             |
+----+-----------------+-----------------+--------------+-------------+

mysql> select * from tariff_data;
+----+-----------+--------------+-------+
| id | tariff_id | affiliate_id | bonus |
+----+-----------+--------------+-------+
|  1 |         1 |            3 | 34.00 |
|  2 |         2 |            3 | 44.00 |
|  5 |         3 |            3 | 10.00 |
|  6 |         4 |            3 | 10.00 |
|  7 |         5 |            3 | 10.00 |
+----+-----------+--------------+-------+ 
```

在一张`deal`表上，您可以看到`affiliate_id=3`并`tariff_id=NULL`属于`tariff_data`表中列出的任何关税。我这样做是为了减少`deal`. 如果我不包含 NULL ，则意味着我必须包含许多`tariff_id`相同的内容`phone_id`，反之亦然。

```
mysql> select * from deal;
+----+----------+-----------+--------------+--------+
| id | phone_id | tariff_id | affiliate_id | active |
+----+----------+-----------+--------------+--------+
|  1 |        4 |      NULL |            3 |      1 |
|  3 |       24 |      NULL |            3 |      1 |
|  9 |       24 |         8 |            4 |      1 |
| 10 |       25 |         8 |            4 |      1 |
| 11 |       26 |         8 |            4 |      1 |
+----+----------+-----------+--------------+--------+ 
```

**更新**，例如，如果我没有使用 NULL 值：

```
mysql> select * from deal;
+----+----------+-----------+--------------+--------+
| id | phone_id | tariff_id | affiliate_id | active |
+----+----------+-----------+--------------+--------+
|  1 |        4 |         1 |            3 |      1 |
|  2 |        4 |         2 |            3 |      1 |
|  3 |       24 |         1 |            3 |      1 |
|  4 |       24 |         2 |            3 |      1 |
|  5 |       24 |         3 |            3 |      1 |
|  6 |       24 |         4 |            3 |      1 |
|  7 |       24 |         5 |            3 |      1 |
|  9 |       24 |         8 |            4 |      1 |
| 10 |       25 |         8 |            4 |      1 |
| 11 |       26 |         8 |            4 |      1 |
+----+----------+-----------+--------------+--------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:20:42.873

有许多方法可以实现所需的结果，但使用比 NULL 更合乎逻辑的方法。

正如 Oded 指出的那样，NULL 表示**缺少未知值**

*   可能有一个列来指示所有权
*   正常化
*   使用现有列“tariff_id”作为具有 NON NULL 值的所有权指标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:00:26.010

不是一个好主意。

`NULL`表示未知值。情况并非如此，使用它来具有特定含义会反过来咬你。

首先，任何接触系统部分（代码和 SQL）的人都必须知道并记住该约定。

其次，它是不可扩展的——如果你需要一些东西来代表所有`affiliate_id`4 的 tarrifs 怎么办？

第三——如果你真的需要使用，你会怎么做`NULL`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T22:47:29.313

与其他两个答案一样，这不是一个好主意。这是规范化的建议。

您希望某些交易代表“一般”交易，而不考虑关税。您可以将 deail 表拆分为两个，一个用于简单交易，一个用于一般交易：

```
mysql> select * from deal_simple;
+----+----------+-----------+--------------+--------+
| id | phone_id | tariff_id | affiliate_id | active |
+----+----------+-----------+--------------+--------+
|    |       24 |         8 |            4 |      1 |
|    |       25 |         8 |            4 |      1 |
|    |       26 |         8 |            4 |      1 |
+----+----------+-----------+--------------+--------+

mysql> select * from deal_general_tariff;
+----+----------+--------------+--------+
| id | phone_id | affiliate_id | active |
+----+----------+--------------+--------+
|    |        4 |            3 |      1 |
|    |       24 |            3 |      1 |
+----+----------+--------------+--------+ 
```

然后，您可以使用简单查询获得扩展结果（我假设您没有错误地包含与 相关的 3 行`phone_id` `4`）`tariff_id` `3, 4, 5`：

```
SELECT phone_id, tariff_id, affiliate_id, active
FROM deal_simple

UNION

SELECT dgt.phone_id, td.tariff_id, dgt.affiliate_id, dgt.active
FROM 
    deal_general_tariff AS dgt
  JOIN 
    tariff_data AS td
      ON td.affiliate_id = dgt.affiliate_id ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T05:20:19.343

不是一个好主意。基本问题是 NULL 已经意味着三个不同的东西，这使它们成为问题。你在问问题。它代表的是：

1.  未知值（即未输入，预期存在）。这意味着 NULL || 'mytext' 为空。
2.  已知不存在的值（例如，在街道地址的第二行使用 NULL）。这是有问题的，但很难避免。在非 Oracle 平台上，空字符串在这里更适合字符类型。看起来你正在称这个重量。
3.  在外连接的结果中未找到值

这意味着在处理 NULL 值时，您已经准备好三种不同的情况，并且您必须使用上下文来解决它。如果您可以将含义减少到两个，或者更好的是 1（外部连接未找到记录），那么您的情况会更好，并且您需要担心的情​​况更少。

当一个人预期存在两个值之一时，问题当然必须解决，例如employee.hourly_wage 或employee.monthy_salary。这当然是一个不好的例子，因为可以做工资或工资加上工资单位，但问题很普遍。很多时候，您必须在完美规范化和避免列中的空值和另一方面丰富的跨列数据约束之间进行权衡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T12:35:26.583

不要使用 NULL 来传达消息。使用 NULL 表示没有值。

缺少值可能意味着存在值，但未知。此案由 Oded 报道。

这也可能意味着某个值在这种情况下不适用。当表包含描述给定类的对象的行时，通常会发生这种情况，但有多个子类扩展了该类。某些列可能与某些子类有关，但与其他子类无关。

如果需要，您可以通过一种在 SO 中具有名为“类表继承”的标记的技术来解决最后一种情况。

如果数据的读者从缺乏价值中得出推论，他们可以。但推理不是交流。

# php - JS数组转PHP

> ID：12763323
> 
> 赞同：0
> 
> 时间：2012-10-06T19:55:46.623
> 
> 标签：php, javascript, arrays

我有一个从包含 Array 的特定设备生成的**output.js**文件：

```
var OUT=new Array (0x80,0x00,0x40,0x0026,0x0011,0x0014,0x0013,0x0018,0x0017,0x03FD,0x0116) 
```

如何使用 PHP 访问该数组，以便在任何位置轻松打印指定的 Array[x]：

```
print $OUT[4]; 
```

使用简单的 JS，我可以做到：

```
document.write(OUT[4]); 
```

如果我也可以像 txt 文件一样用 PHP 处理 output.js，然后拆分并“像数组一样做”，但我认为可以正确使用它.. ^_^

对此有何提示或建议？:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:59:48.890

如果您想直接使用 PHP 获取文件，那么您可以编写自定义解析器（如果您相信文件格式一致，则使用正则表达式）或通过[与 JavaScript 引擎交互](https://stackoverflow.com/questions/3971232/executing-javascript-within-php)。

否则，假设 JavaScript 在网络浏览器中运行……</p>

最简单的方法是使用`createElement`and `appendChild`while 循环遍历一个数组来创建一个元素，该`form`元素包含数组`hidden`中每个元素的输入（具有`foo[]`满足 PHP 用来填充`$_POST`和友元的算法的名称），然后`submit()`表格。

或者，您可以将数组序列化为字符串（例如，如果您知道数据中没有逗号，则使用逗号分隔）并使用它创建一个查询字符串 ( `var qs = "?foo=" + encodeURIComponent(serialised_array);`)，然后使用[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:05:16.817

您可以使用 json 来执行此操作

```
var jsonString  = JSON.stringify(OUT); 
```

然后

```
document.getElementById('IdOfYourFormInputField').value = jsonString; 
```

// 隐藏元素类型

现在，当您提交表单时，您将在 $_POST 字段中获得 json 字符串

所以你可以像解码它

```
$phpArray = json_decode($_POST['NameOfYoutInputEleMent']); 
```

就是这样！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:32:22.260

最简单的方法是使用像 jQuery 这样的库，而不是自己动手......

```
<head>
<script src="http://code.jquery.com/jquery.min.js">
.... 
```

然后在您计算数据时，将其发布到 PHP 服务器

```
var OUT = new Array (0x80,0x00,0x40,0x0026,0x0011,0x0014,0x0013,0x0018,0x0017,0x03FD,0x0116);
$.ajax({
    url: 'http://www.example.com/receiver.php'  //change example.com to your server
    ,type: 'POST' //use POST so don't have to worry about URL length
    ,data: {out: OUT} //pass contents of 'OUT' in variable 'out'
    ,dataType: 'json' //use JSON formatting of data
    ,error: function() { 
        alert("Failed to contact server"); 
    }
    ,complete: function() {
        alert("Finished sending data to server.");
    }
}); 
```

在receiver.php

```
$OUT = json_decode( $_POST['out'] ); // 'out' matches the parameter name in jQuery Ajax call
print_r( $OUT ); //print contents of array $OUT 
```

# java - 不能使用 AuthenticationException 的子类

> ID：12763324
> 
> 赞同：2
> 
> 时间：2012-10-06T19:55:47.500
> 
> 标签：java, exception, jakarta-ee, exception-handling, spring-security

我正在尝试创建一个异常子类，`AuthenticationException`如下所示：

```
public class RegistrationNotCompleteException extends AuthenticationException {
    public RegistrationNotCompleteException(String msg) {
        super(msg);
    }
} 
```

在`loadUserByUsername`我的`UserDetailsService`课堂上，我做了以下检查：

```
if (!user.getHasRegistered()) {
    System.out.println("######## User: " + username
        + " has not completed the registration");
    throw new RegistrationNotCompleteException(
        "User has not completed registration");
} 
```

`AuthenticationFailureHandler`因此用户按预期转发到班级。

但是当试图在`onAuthenticationFailure`方法中获取异常类时如下：

```
public void onAuthenticationFailure(HttpServletRequest request,
    HttpServletResponse response, AuthenticationException exception)
    throws IOException, ServletException {

    UsernamePasswordAuthenticationToken token =
        (UsernamePasswordAuthenticationToken) exception.getAuthentication();
    String username = token.getName();
    String credentials = token.getCredentials().toString();
    System.out.println("Exception class: " + exception.getClass()); 
```

它打印出异常类`AuthenticationException`不是`RegistrationNotCompleteException`。

我想验证异常类是`RegistrationNotCompleteException`.

请告知如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:25:27.927

通过将检查更改为`exception.getCause().getClass()`而不是解决`exception.getClass()`

# android - 截取包含自定义视图的屏幕截图

> ID：12763328
> 
> 赞同：1
> 
> 时间：2012-10-06T19:56:24.127
> 
> 标签：android

我想向应用程序添加一项功能，该功能可以截取屏幕截图，然后允许您发送（通过电子邮件等）。我读了这个帖子： [Android save view to jpg or png](https://stackoverflow.com/questions/3107527/android-save-view-to-jpg-or-png) ，答案很完美。

但是，当我将顶级线性布局设置为视图时，图像包含正确的所有内容，除了我的自定义视图，它只是绘制为黑色方块。我的自定义视图是表面视图的扩展，onDraw 方法是从线程调用的。

有谁知道是否有办法使这项工作？

# c++ - 向量 ::迭代器与列表 std::map 中的 ::iterator 键

> ID：12763334
> 
> 赞同：3
> 
> 时间：2012-10-06T19:57:01.500
> 
> 标签：c++, stdmap

为什么可以定义 vector::iterator 到 int 的映射，但不能定义 list::iterator 到 int 的映射？

```
#include <vector>
#include <list>
#include <map>
#include <algorithm>
using namespace std;

int main()
{
    int ia[] = {1,2,3,4,5,6,7,8,9,0};

    vector<int> v(begin(ia), end(ia));
    auto it1 = find(begin(v), end(v), 4);
    map< vector<int>::const_iterator, int > m1;
    m1.insert(map<vector<int>::const_iterator, int>::value_type(it1,*it1));

    list<int> l(begin(ia), end(ia));
    auto it2 = find(begin(l), end(l),5);
    map< list<int>::const_iterator, int> m2;
    m2.insert(map<list<int>::const_iterator, int>::value_type(it2,*it2)); //doesn't compile

} 
```

* * *

> 错误 1 ​​错误 C2678：二进制“<”：未找到采用“const std::_List_const_iterator<_Mylist>”类型的左侧操作数的运算符（或没有可接受的转换）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T20:11:01.280

`std::map`要求密钥具有可比较性，可以使用`<`或提供的比较器。

从概念上讲，随机访问迭代器是可比较的，但双向迭代器不是。`std::vector`迭代器是随机访问的，`std::list`迭代器是双向的。

因此，您的列表迭代器不满足`std::map`键类型的类似要求。如果您提供一个比较器，它*可以*有效地决定哪个`std::list::const_iterator`应该在另一个之前，您可以将它传递给地图，这将起作用。粗略的草图：

```
struct ListIterCmp {
    bool operator() (list<int>::const_iterator a, list<int>::const_iterator b)
    {
        // how?
    }
};
map< list<int>::const_iterator, int, ListIterCmp> m2;
// this should work now... 
```

* * *

[cppreference](http://en.cppreference.com/w/cpp/iterator)文档涵盖了我以前使用旧[SGI](https://www.sgi.com/tech/stl/Iterators.html)文档的所有内容，并且仍在更新。看到它们都描述`a<b`了 RandomAccessIterator，而不是 BidirectionalIterator 概念。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T20:00:20.973

您不能比较来自`std::list<T>`任何 T 的迭代器。事实上，`std::vector<T>::iterator`只有当所讨论的两个迭代器都来自同一个向量时，它才具有可比性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:06:32.543

您无法比较`std::list`迭代器的原因是它的效率非常低 - 您可能必须从其中一个走到整个列表的末尾才能发现另一个元素不在它之后。那将是`O(N)`复杂性，对于像`<`.

我不能建议更换，因为我不知道你需要它。因为`std::list`' 元素的地址是稳定的，所以您可以将地址用作 a 的键`map`。但我看不出这会有什么用。

# sql - 异构分片

> ID：12763338
> 
> 赞同：0
> 
> 时间：2012-10-06T19:57:56.897
> 
> 标签：sql, caching, sharding, heterogeneous

存在：不同 DBSM 上的多个数据库（Postgres、Mysql、Oracle、Firebird 等） 数据库有几个相同的行（ID、实体名称）

任务：对整个数据库列表执行读取 SQL 查询。

问题：有没有已知的解决方案？可能已经存在某种 sql 缓存数据库或类似的东西。

有什么建议、想法、关键词吗？

谢谢你。

# objective-c - UITextField 到 sms recipents

> ID：12763339
> 
> 赞同：0
> 
> 时间：2012-10-06T19:58:17.730
> 
> 标签：objective-c, ios, sms, uitextfield

我有一个 UITextField，用户将输入手机号码。用户触摸 IBAction 按钮并将其传递给 MFMessageComposeViewController 短信收件人。似乎收件人不会允许使用 NSString。将 NSString 传递给正文有效，但不是收件人。

```
-(IBAction)buttonSMS: (id)sender
{
    if([MFMessageComposeViewController canSendText])
    {

    MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];

    picker.recipients=[NSArray arrayWithObjects:@"15557774444", nil];
    picker.body = textField.text;
    picker.messageComposeDelegate = self;
    [self presentViewController:picker animated:YES completion:NULL];
    }

} 
```

这是我试过的

```
picker.recipients = telField.text; 
```

代替

```
picker.recipients=[NSArray arrayWithObjects:@"15557774444", nil]; 
```

有人可以用一些示例代码指出我的仪式方向吗.....请谢谢

html、javascript 和 css 方面的专家，但目标 c 方面的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:02:18.350

该`recipients`属性的类型为`NSArray *`。字符串不是。您必须将字符串包装在一个数组中，如下所示：`[NSArray arrayWithObject:telField.text]`.

# html - 从标题的一部分中删除粗体样式

> ID：12763344
> 
> 赞同：37
> 
> 时间：2012-10-06T19:59:10.780
> 
> 标签：html

有没有办法从标题的一部分中删除粗体样式？

```
<h1>**This text should be bold**, but this text should not</h1> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-06T20:03:00.873

您可以将非粗体文本包装到一个跨度中，并为该跨度提供以下属性：

```
.notbold{
    font-weight:normal
}​ 
```

和

```
<h1>**This text should be bold**, <span class='notbold'>but this text should not</span></h1> 
```

见：http: [//jsfiddle.net/MRcpa/1/](http://jsfiddle.net/MRcpa/1/)

`<span>`当您想要更改元素的样式而不将它们放置在文档中的新块级元素中时使用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-06T20:09:35.490

如果您不想要单独的 CSS 文件，可以使用内联 CSS：

```
<h1>This text should be bold, <span style="font-weight:normal">but this text should not</span></h1> 
```

但是，正如 Madara 的评论所暗示的，您**可能**需要考虑将非粗体部分放在不同的标题中，具体取决于所涉及的用例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T20:01:41.113

是的，您可以在其中添加文本`<span>`并覆盖 css。[jsfiddle](http://jsfiddle.net/fmUKa/1/)

html:

```
<h1>**This text should be bold**, <span>but this text should not</span><h1> 
```

CSS：

```
span{
   font-weight: normal;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-27T19:48:16.543

```
<h1 style="font-weight: normal;"></h1> 
```

试试这个？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-02T04:38:01.560

更好的一个：您可以执行以下操作，而不是在 html 中使用额外的 span 标签并增加 html 代码：

```
<div id="sc-nav-display">
    <table class="sc-nav-table">
      <tr>
        <th class="nav-invent-head">Inventory</th>
        <th class="nav-orders-head">Orders</th>
      </tr>
    </table>
  </div> 
```

在这里，您可以使用 CSS，如下所示：

```
#sc-nav-display th{
    font-weight: normal;
} 
```

您只需要使用分配给表的受尊重的 div 标签的 ID。我在 CSS 中使用了“#sc-nav-display”和“th”，这样，所有其他表格标题都将保持粗体，除非你对所有其他表格标题执行相同的操作，如我所说。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-04-15T17:19:32.013

超级简单，通过在段落内使用“字体”。一个例子如下所示：

```
<h1>Heading 1</h1>
<p><font size="6"> Heading 1</font></p> 
```

**标题 1**

标题 1

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2017-01-31T19:16:38.477

```
<ul>
    <li><strong>This text will be bold.</strong>This text will NOT be bold.
    </li>
</ul> 
```

# memory-management - 在内核模块上使用 kfree

> ID：12763346
> 
> 赞同：1
> 
> 时间：2012-10-06T19:59:32.973
> 
> 标签：memory-management, kernel, kernel-module

下午好 SO-

第一次使用 kmallocs 和 kfrees，我遇到了错误。

```
struct module* mod;
const struct kernel_symbol* ksymbol;

ksymbol = kmalloc(sizeof(struct kernel_symbol), GFP_KERNEL);
if(!sym | !dst | (dst_sz <= 0)) return -EFAULT;

mutex_lock(&module_mutex);

mod = (struct module*)kmalloc(sizeof(struct module), GFP_KERNEL);
ksymbol = find_symbol(sym, &mod, NULL, true, false);

if(!mod){
  for(i = 0; i < dst_sz; i++) dst[i] = '\0';
  mutex_unlock(&module_mutex);
  kfree(ksymbol);
  kfree(mod);
  return SUCCESS;
} 
```

我还有其他情况（！mod 用于将模块内置到内核中），但是为什么会产生错误？一开始我有...

```
 kfree(ksymbol);
  kfree(mod);
  mutex_unlock(&module_mutex);
  return SUCCESS; 
```

这导致了段错误。我想可能是因为我在解锁之前无法释放，所以我继续将互斥锁解锁放在顶部（如更大的代码部分所示），这只是说“Killed”。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:59:02.163

抱歉回复晚了。

通过查看您的代码，我可以这么说。

```
ksymbol = find_symbol(sym, &mod, NULL, true, false); 
```

您正在分配一个常量。这可能会导致错误。

但否则你可以发布错误。

# c++ - 为什么我们需要外部？

> ID：12763352
> 
> 赞同：2
> 
> 时间：2012-10-06T20:00:11.850
> 
> 标签：c++, namespaces, extern

在[这个](https://stackoverflow.com/questions/11623451/static-vs-non-static-variables-in-namespace)问题中，我问为什么

```
//foo.h
namespace foo{
    int bar;
} 
```

`foo.h`当我包含在多个文件中时，给了我一个链接器错误。原来我需要`extern int bar;`防止错误。为什么我需要`extern`？我不想`extern`在我想在多个翻译单元中访问的每个命名空间中的每个变量之前键入。为什么不`int bar;`按我的预期做？为什么 C++ 标准委员会坚持让我`extern`到处打字？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T20:02:16.473

Extern 表示变量的存储声明将在其他地方进行。然后，链接器会在链接时在另一个文件中查找符号。如果没有 extern，您是在告诉编译器，为全局分配一些空间。如果您在多个文件中执行此操作，链接器将看到同一符号的多个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T20:10:24.960

> 为什么 C++ 标准委员会坚持让我在任何地方都输入 extern？

它从来没有告诉过到处写....

```
namespace foo{
extern "C++" {
    int bar;
    int car;
    int dar;
    int xar;
}

} 
```

# android - 捕获正在从 android 设备播放的音频

> ID：12763360
> 
> 赞同：0
> 
> 时间：2012-10-06T20:01:10.503
> 
> 标签：android, audio

我似乎无法找到如何做到这一点，也许出于安全原因无法做到这一点。

我希望能够将设备上正在播放的音频（无论是什么应用程序生成它等）捕获为流，然后可以对其进行操作/传输。

对于一些背景知识，它实际上可能会通过 WiFi 或蓝牙无线传输到网络上的另一台设备。

如果真的可能的话，关于 API 的哪些部分可能会让我这样做的任何指针？

谢谢

PS。我的源设备是 Jelly Bean。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:49:21.863

不幸的是，没有环回音频源可以让您录制设备生成的声音。你能做的最好的就是记录一切，并希望你的环境噪音不会太糟糕。

# c# - 来自多个进程的 Log4Net 写入文件

> ID：12763366
> 
> 赞同：12
> 
> 时间：2012-10-06T20:01:51.877
> 
> 标签：c#, thread-safety, log4net

是否可以将 5 个不同的进程写入同一个日志文件？

我正在使用 Log4Net 进行日志记录，但似乎只有 1 个进程正在写入文件，当我关闭该进程时，第二个进程正在写入。

我要大家一起写。

如何？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-06T20:13:04.163

如果要从多个进程写入单个文件，请将`MinimalLock`as添加`LockinModel`到您的`<appender>`节点：

```
<appender .... >
  ......
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
  ......
</appender> 
```

注意这对性能有一些影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T01:48:48.257

尽管@Erwin 的建议在大多数情况下都有效，但您应该重新考虑更好的架构是否有助于提高性能。

例如，Microsoft IIS 服务器运行着许多工作进程，每个工作进程都通过命名管道将日志条目发送到 IIS 服务进程。并且只有 IIS 服务进程才有权写入日志文件。这样，工作进程就不需要锁定日志文件，服务进程可以缓存条目并批量写入。

遵循 IIS 的方法并获得良好的性能非常容易。没有文件锁。

（更新：您现在可以使用[LogMaster4Net](https://github.com/kerryjiang/LogMaster4Net)，它实现了基于 UDP 的这种架构。）

# php - Php mail() 和 Header("Location: 'url') 导致“无限”循环？

> ID：12763368
> 
> 赞同：0
> 
> 时间：2012-10-06T20:02:05.023
> 
> 标签：php, email, header

嗨，我使用了一个教程来学习在 php 中发送带有可选附件的电子邮件所需的中等难度的标题信息。我对其进行了一些修改，它按预期工作，直到我将其更改为与教程完全匹配以进行测试。一旦我测试它，几秒钟后我检查了我的电子邮件，并且已经向我发送了 21 封电子邮件。我立即从服务器上删除了文件并关闭了页面。我想知道究竟是什么导致了这种行为。

在 mail() 函数之后，我立即将重定向设置为我想要的页面。

```
if (mail($mailto, $subject, "", $header)) {
    header("Location: $redirectUrl");
    exit;       
} 
```

其中 $header 是半页长。是导致它的 header() 函数吗？该页面只是说页面重定向时间太长。我对转义/非转义字符有问题吗？我只调用一次该函数，它不包含在任何类型的 for 循环或 do while 中。页面本身不包含在其他任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:45:26.680

NullUserException 提出了一个很好的观点。变量超出范围。一个非常简单的更改修复了脚本。最初该变量是在函数外部声明的，并且在函数内部不可见。

# java - Maven依赖错误

> ID：12763369
> 
> 赞同：0
> 
> 时间：2012-10-06T20:02:13.110
> 
> 标签：java, eclipse, maven-3

> **可能重复：**
> [Maven 无法解析本地依赖](https://stackoverflow.com/questions/12760715/maven-cannot-resolve-local-dependency)

我正在使用带有 eclispe juno 的 maven 3。

创建maven项目后，我使用eclipse插件生成eclipse文件并将项目导入eclipse。

我已将我创建的 jar 添加到 maven 项目中。

jar 文件安装到项目本地存储库中。那是项目基目录中一个名为 repo 的文件。

install:install-file 命令用于将 jar 添加到 repo 文件中，然后将 jar 依赖项添加到项目的 Pom 文件中。

在 Eclipse IDE 中，我可以将 jar 文件作为任何其他库导入来导入。

但是，当我运行 mvn compile 命令时，我得到一个依赖错误并且 maven 说它找不到 jar 文件。我提供下面的代码。

他是 POM repo 配置

```
 <repository>
    <id>repo</id>
    <releases>
        <enabled>true</enabled>
        <checksumPolicy>ignore</checksumPolicy>
    </releases>
    <snapshots>
        <enabled>false</enabled>
    </snapshots>
    <url>file://${project.basedir}/repo</url>
</repository> 
```

这是依赖配置

```
<dependency>
      <groupId>Com.RubineEngine.GesturePoints</groupId>
      <artifactId>Com-RubineEngine-GesturePoints</artifactId>
      <version>1.0-SNAPSHOT</version>
    </dependency> 
```

使用 U 和 X 开关运行编译时，出现以下错误

```
[DEBUG] ======================================================================= 
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for file://C:\U 
sers\FAISAL\Desktop\disaster\com-initialtheta-theta/repo 
Downloading: file://C:\Users\FAISAL\Desktop\disaster\com-initialtheta-theta/repo 
/Com/RubineEngine/GesturePoints/Com-RubineEngine-GesturePoints/1.0-SNAPSHOT/mave 
n-metadata.xml 
[DEBUG] Writing resolution tracking file C:\Users\FAISAL\.m2\repository\Com\Rubi 
neEngine\GesturePoints\Com-RubineEngine-GesturePoints\1.0-SNAPSHOT\resolver-stat 
us.properties 
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for repo 
.typesafe.com/typesafe/releases/ 
Downloading: repo.typesafe.com/typesafe/… 
Points/Com-RubineEngine-GesturePoints/1.0-SNAPSHOT/maven-metadata.xml 
[DEBUG] Writing resolution tracking file C:\Users\FAISAL\.m2\repository\Com\Rubi 
neEngine\GesturePoints\Com-RubineEngine-GesturePoints\1.0-SNAPSHOT\resolver-stat 
us.properties 
[DEBUG] Could not find metadata Com.RubineEngine.GesturePoints:Com-RubineEngine- 
GesturePoints:1.0-SNAPSHOT/maven-metadata.xml in typesafe (repo.typesafe. 
com/typesafe/releases/) 
[DEBUG] Could not find metadata Com.RubineEngine.GesturePoints:Com-RubineEngine- 
GesturePoints:1.0-SNAPSHOT/maven-metadata.xml in lib (file://C:\Users\FAISAL\Des 
ktop\disaster\com-initialtheta-theta/repo) 
[DEBUG] Skipped remote update check for Com.RubineEngine.GesturePoints:Com-Rubin 
eEngine-GesturePoints:1.0-SNAPSHOT/maven-metadata.xml, already updated during th 
is session. 
[DEBUG] Failure to find Com.RubineEngine.GesturePoints:Com-RubineEngine-GestureP 
oints:1.0-SNAPSHOT/maven-metadata.xml in repo.typesafe.com/typesafe/… 
ses/ was cached in the local repository, resolution will not be reattempted unti 
l the update interval of typesafe has elapsed or updates are forced 
[DEBUG] Skipped remote update check for Com.RubineEngine.GesturePoints:Com-Rubin 
eEngine-GesturePoints:1.0-SNAPSHOT/maven-metadata.xml, already updated during th 
is session. 
[DEBUG] Failure to find Com.RubineEngine.GesturePoints:Com-RubineEngine-GestureP 
oints:1.0-SNAPSHOT/maven-metadata.xml in file://C:\Users\FAISAL\Desktop\disaster 
\com-initialtheta-theta/repo was cached in the local repository, resolution will 
not be reattempted until the update interval of lib has elapsed or updates are 
forced 
```

谁能帮帮我，因为我要迟到了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:14:23.903

一些事情要尝试/确认：

*   机器是否可以访问互联网。不要只是说有。通过 ping 远程来确认它。Maven 不喜欢无法访问存储库
*   在 pom 编辑器中，是否显示任何错误消息？您可以删除依赖项并使用添加依赖项对话框添加它吗？
*   尝试将存储库放在 Eclipse 工作区之外。从理论上讲，它应该在它所在的地方工作，但是拥有一个存储库是一个奇怪的地方，而且 maven 不喜欢“奇怪”。
*   转到存储库根目录并确认文件夹名称与依赖项的组 ID、工件 ID 和版本完全匹配。

# jsf - 如何在 Primefaces p:tabMenu 中使用 ui:insert

> ID：12763373
> 
> 赞同：3
> 
> 时间：2012-10-06T20:02:45.900
> 
> 标签：jsf, jsf-2, primefaces

我有一个兄弟问题，我不知道如何解决。我有这个 Primefaces`p:tabMenu`用于调用延迟加载的选项卡。

```
<p:tabMenu id="tabs" activeIndex="0" > 
    <p:menuitem value="tab1" url="/tab1.jsf" /> 
    <p:menuitem value="tab2" url="/tab2.jsf" /> 

</p:tabMenu> 
```

我想使用 JSF 标记`ui:insert`来调用选项卡的代码。如何将`ui:insert`标签组合到上面的代码中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T19:54:12.530

我在这里看到两种方法：

1) 每个选项卡使用一页。使用 p:tabMenu 组件（在 primefaces 3.4 中可用）。在这种情况下，如果用户正在查看一个选项卡并单击第二个选项卡以显示它，他将被重定向到另一个页面。
**优点**：如果您想从另一个页面导航到第二个选项卡，这很容易，因为它是一个不同的页面（请参阅第二种方法中的缺点）。此外，每个标签页加载速度很快，因为它只包含一个标签的代码。你会有更好的代码分离。
**缺点**：如果用户转到另一个选项卡，则在当前选项卡中输入的所有数据都将丢失。此外，从一个选项卡切换到另一个选项卡并不是那么快，因为涉及到导航。

这是一个标签页（tab1.xhtml）：

```
<h:body>
    <p:tabMenu activeIndex="0">  
        <p:menuitem value="Tab 1" url="/tab1.jsf" />  
        <p:menuitem value="Tab 2" url="/tab2.jsf" />  
    </p:tabMenu>
    <!-- content of tab1 goes here -->
</h:body> 
```

这是另一个选项卡（tab2.xhtml）的代码：

```
<h:body>
    <p:tabMenu activeIndex="1">  
        <p:menuitem value="Tab 1" url="/tab1.jsf" />  
        <p:menuitem value="Tab 2" url="/tab2.jsf" />  
    </p:tabMenu>
    <!-- content of tab2 goes here -->
</h:body> 
```

2) 另一种方法是在一个页面中使用 p:tabView。在这种情况下，所有选项卡内容都在同一页面中。您可以在 p:tabView 上使用 dynamic="true" 属性来按需呈现选项卡内容并加速页面加载。
**优点**：从选项卡到选项卡的过渡更顺畅（始终保持在同一页面上）。
**缺点**：例如，如果您想直接导航到第二个选项卡，这并不容易。所以必须使用 tabView 的 activeIndex 属性指向托管 bean 中处理第一个选项卡的属性，并且当您实际上不需要它时，您仍然会构造第一个选项卡的 bean。

这是包含选项卡的主页的代码：

```
<h:body>
    <p:tabView dynamic="true">
        <p:tab id="tab1" title="Tab 1" >
            <ui:include src="tab2.xhtml" />
        </p:tabView>
        <p:tab id="tab2" title="Tab 2" >
            <ui:include src="tab2.xhtml" />
        </p:tab>
    </p:tabView>
</h:body> 
```

并且您需要每个选项卡的页面（插入到主页中）：tab1.xhtml：

tab2.xhtml:

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:52:16.373

我假设您想在选项卡之间共享代码？

我认为您对 tabMenu 组件视而不见。在这里正确使用模板不需要它的帮助。

只是：

1.  定义模板
2.  让页面使用该模板

这些页面可以是标签或任何你想要的。

一个适当的结构可能是定义 tabs.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    xmlns:o="http://omnifaces.org/ui">

<h:head>
    <h:outputStylesheet name="style.css" library="css" />
    <div id="header">

        <ui:insert name="header">
            <title><ui:insert name="title">title</ui:insert></title>

        </ui:insert>
    </div>

</h:head>

<h:body>
    <div id="content">

        <ui:insert name="content">
        content here
        </ui:insert>
    </div>

</h:body>

</html> 
```

然后对于您拥有的每个选项卡：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    xmlns:pe="http://primefaces.org/ui/extensions"
    template="/WEB-INF/templates/template.xhtml">

    <ui:define name="header">
    a specific tab header here
    </ui:define>
    <ui:define name="content">
    specific content here
    </ui:define>
    </ui:composition> 
```

请注意，这只是 JSF 2 的标准模板。祝你好运

# hibernate - 创建休眠映射 - 初学者 qn

> ID：12763378
> 
> 赞同：0
> 
> 时间：2012-10-06T20:03:03.937
> 
> 标签：hibernate

我有以下表格，取自[这里](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#db_schema_users_authorities)（作为 Spring Security 模型的一部分）：

```
 create table users(
      username varchar_ignorecase(50) not null primary key,
      password varchar_ignorecase(50) not null,
      enabled boolean not null);

  create table authorities (
      username varchar_ignorecase(50) not null,
      authority varchar_ignorecase(50) not null,
      constraint fk_authorities_users foreign key(username) references users(username));

  create unique index ix_auth_username on authorities (username,authority); 
```

我对休眠真的很陌生，不知道如何将这些表映射到 xml 文件中的休眠映射。如何映射外键？如何映射索引？我知道每个表都有一个主键，但在这种情况下，权限表没有。所以这意味着`<id>`休眠映射中没有列？

这是我到目前为止所得到的：

```
<class name="com.foo.beans.User" table="users">
    <id name="username" column="username"/>
    <property name="password" column="password"/>
    <property name="enabled" column="enabled"/>
</class>

<class name="com.foo.beans.Authority" table="authorities">
    <composite-id name="ix_auth_username">
        <key-property name="username" column="username" />
        <key-property name="authority" column="authority" />
    </composite-id>
</class> 
```

知道我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:22:10.570

我建议使用注释而不是 XML。XML 有点过时了。

使用注释它看起来像这样：

```
@Entity
@Table(name="user_table")
public class User implements Serializable {

    Long userId;
    String username;
    String password;
    boolean enabled;

    @Id
    @Column(name="user_table_id")
    public Long getUserId() { return userId; }

    public void setUserId(Long id) { this.userId = userId; }

    @Column(name="username", length=80, nullable=true)
    public String getUsername() { return username };

    public void setUsername(String username) { this.username = username; };
    /* getters and settings annotated et cetera */
} 
```

权限很可能是用户对象内的延迟加载列表。

因此，在用户内部，您将定义如下内容：

```
List<Authority> authorities;

@OneToMany(mappedBy="userId",
               cascade=CascadeType.ALL, 
               fetch=FetchType.LAZY)
@OrderBy("xyz")
public List<Authority> getAuthorities() {
    return authorities;
}

public void setAuthorities (List<Authority> authorities) { this.authorities = authorities; }; 
```

有关更多示例和注释选项，请参阅参考指南：http: [//docs.jboss.org/hibernate/annotations/3.5/reference/en/html/](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/)

塞巴斯蒂安

# c++ - 为 C++ 结构定义显式析构函数如何影响调用约定？

> ID：12763381
> 
> 赞同：3
> 
> 时间：2012-10-06T20:04:11.930
> 
> 标签：c++, assembly, struct, calling-convention

在注意到 C++ 结构的奇怪行为后，一位同事向我提出了这个问题。

拿这个简单的代码：

```
struct S {
  int i;
#ifdef TEST
  ~S() {}
#endif
};

void foo (S s) {
  (void)s;
}

int main () {
  foo(S());
  return 0;
} 
```

我在没有显式析构函数的情况下生成了一次汇编代码：

```
g++-4.7.2 destructor.cc -S -O0 -o destructor_no.s 
```

后来包括它：

```
g++-4.7.2 destructor.cc -DTEST -S -O0 -o destructor_yes.s 
```

`main`这是in的代码[1] `destructor_no.s`：

```
main:
    pushq   %rbp
    movq    %rsp, %rbp
    movl    $0, %eax
    movl    %eax, %edi
    call    _Z3foo1S   // call to foo()
    movl    $0, %eax
    popq    %rbp
    ret 
```

而相反，如果析构函数被显式定义：

```
main:
    pushq   %rbp
    movq    %rsp, %rbp
    subq    $16, %rsp
    movl    $0, -16(%rbp)
    leaq    -16(%rbp), %rax
    movq    %rax, %rdi
    call    _Z3foo1S   // call to foo()
    leaq    -16(%rbp), %rax
    movq    %rax, %rdi
    call    _ZN1SD1Ev  // call to S::~S()
    movl    $0, %eax
    leave
    ret 
```

现在，我的组装知识有点生疏，但在我看来：

1.  在第一种情况下，结构是“按值”传递的。即，它的内存内容被复制到`%edi`寄存器中，如果我没记错的话，它是第一个用于在`x86-64`ABI 中传递参数的寄存器。

2.  相反，在第二种情况下，结构体是在堆栈上分配的，但`foo()`函数是使用 in 中的指针调用的`%rdi`。

**为什么会有这样的差异？**

* * *

*笔记：*

*   如果使用`gcc-4.6.3`, 或 ，则确认相同的行为`clang 3.1`。

*   当然，如果启用了优化，对函数的调用`foo()`在任何情况下都会被完全优化掉。

*   `struct`如果没有明确提供析构函数，则在向 中添加更多变量时会出现一个有趣的模式。

最多 4`int`秒（= 16 字节）通过参数寄存器传递：

```
pushq   %rbp
movq    %rsp, %rbp
subq    $16, %rsp
movl    $0, -16(%rbp)
movl    $0, -12(%rbp)
movl    $0, -8(%rbp)
movl    $0, -4(%rbp)
movq    -16(%rbp), %rdx
movq    -8(%rbp), %rax
movq    %rdx, %rdi
movq    %rax, %rsi
call    _Z3foo1S 
```

但是一旦我`int`在结构中添加第五个，函数的参数，仍然“按值”传递，现在在堆栈上：

```
pushq   %rbp
movq    %rsp, %rbp
subq    $56, %rsp
movl    $0, -32(%rbp)
movl    $0, -28(%rbp)
movl    $0, -24(%rbp)
movl    $0, -20(%rbp)
movl    $0, -16(%rbp)
movq    -32(%rbp), %rax
movq    %rax, (%rsp)
movq    -24(%rbp), %rax
movq    %rax, 8(%rsp)
movl    -16(%rbp), %eax
movl    %eax, 16(%rsp)
call    _Z3foo1S 
```

[1] 对于这个问题，我删除了一些我认为不必要的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:18:25.660

在 C++03 中，如果您定义析构函数，则您的结构不再是[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)类型。没有析构函数的变体对象的行为类似于 C 结构变量（因此它只是按值传递），而具有用户定义的对象的行为类似于 C++ 对象。

# python - 定义后可以更改其值的整数对象？

> ID：12763382
> 
> 赞同：6
> 
> 时间：2012-10-06T20:04:54.637
> 
> 标签：python

我需要一个整数类，它的值可以在创建对象后更改。我需要这个类来定义一个首先以毫米为单位的尺寸。稍后当创建用户界面时，我从设备上下文中得到一个将毫米转换为像素的因子。这个因素应该将我的对象的毫米值更改为像素值。

我试图继承 int （参见[increment int object](https://stackoverflow.com/questions/1135335/increment-int-object)），但 int 是不可变的，所以我不能改变它的值。

```
class UiSize(int):
    def __new__(cls, value=0):
        i = int.__new__(cls, value)
        i._orig_value = value
        return i

    def set_px_per_mm(self, px_per_mm):
        pixel_value = int(round(self._orig_value * px_per_mm))
        print "pixel_value", pixel_value
        # how to set the new pixel_value to the object's value ?

s = UiSize(500)
s.set_px_per_mm(300.0 / 500.0)
print "1px + 500mm =", 1 + s, "px" # the result should be 301 pixels 
```

[增量 int 对象](https://stackoverflow.com/questions/1135335/increment-int-object)的答案是使用所有 int 方法构建我自己的类。所以我尝试了这个：

```
class UiSize2(object):
    def __init__(self, value=0):
        self._int_value = int(value)

    def __add__(self, other):
        return self._int_value.__add__(other)

    def set_px_per_mm(self, px_per_mm):
        self._int_value = int(round(self._int_value * px_per_mm))

s = UiSize2(500)
s.set_px_per_mm(300.0 / 500.0)
print "500mm + 1 =", s + 1, "px" 
```

我为's + 1'工作，但对于'1 + s'我得到一个TypeError：

```
>>> print "1 + 500mm =", 1 + s, "px"
TypeError: unsupported operand type(s) for +: 'int' and 'UiSize2' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T20:07:04.370

`__radd__`当您的自定义类型位于添加的右侧时，您需要定义魔术方法（“右添加”）来控制行为。您需要对 , 等执行相同`__rmul__`操作`__rsub__`以提供所有操作的右手版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:17:55.120

使用[幅度包](http://juanreyero.com/open/magnitude/)，您可以像这样处理单位转换：

```
import magnitude
mg = magnitude.mg
new_mag = magnitude.new_mag

s = mg(500, 'mm')    # s is 500mm

# Define a pixel unit; 300 px = 500 mm
new_mag('px', mg(500.0/300.0, 'mm'))

p = mg(1, 'px')      # p is 1 px

print('500mm + 1px = {u}'.format(u = (s + p).ounit('px')))
# 500mm + 1px = 301.0000 px
print('500mm + 1px = {u}'.format(u = (s + p).ounit('mm')))    
# 500mm + 1px = 501.6667 mm 
```

# objective-c - 轻松加载动画

> ID：12763383
> 
> 赞同：0
> 
> 时间：2012-10-06T20:05:05.677
> 
> 标签：objective-c, ios, xcode

我正在编写一个在不同视图中有多个 UIImage 动画的应用程序。现在我正在使用这行代码来加载所有图像：

```
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"10001.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"10002.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"10003.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"10004.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"10005.png" ofType:nil]], 
```

并像这样加载所有 100 张图像。

然后，在第二个视图中，我像这样加载它：

```
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"20001.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"20002.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"20003.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"20004.png" ofType:nil]],
[UIImage    imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"20005.png" ofType:nil]], 
```

并再次加载 100 张图像。

有没有办法加载所有图像，但只输入一次图像的名称？例如，我想要输入前 2 个数字 (10)，然后自动加载其余的图像。在 Xcode 中可以吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:10:07.920

这应该有效（未经测试，但想法应该很清楚）

```
- (NSArray *)loadImagesWithNumber:(NSInteger)number count:(NSUInteger)count
{
    NSMutableArray *array = [NSMutableArray arrayWithCapacity:count];

    for(NSUInteger i=0; i<count; i++)
    {
        NSString *name = [NSString stringWithFormat:@"%u.png", number + i];
        UIImage *image = [UIImage imageNamed:name];

        [array addObject:image];
    }

    return array;
} 
```

示例： ，这将加载 100 张以to`NSArray *images = [self loadImagesWithNumber:1000 count:100];`开头的图像。`1000.png``1099.png`

请记住，如果您有喜欢的图像，这不起作用`0000.png`，`0099.png`因为代码没有添加任何前导零。但是，如果您需要它，添加它是微不足道的（随时询问您是否需要帮助）

# javascript - IE 事件为空

> ID：12763385
> 
> 赞同：0
> 
> 时间：2012-10-06T20:05:29.313
> 
> 标签：javascript, internet-explorer, simulation, jxbrowser

我正在尝试使用 JXBrowser 在 IE 中模拟模糊事件。

HTML 代码：

```
<input type="text" id="email" name="email" onblur="test()"> 
```

和功能“测试”

```
function test(){    
    alert("1");    
   alert(event.srcElement);    
} 
```

当我在 IE 中手动尝试时，它可以完美运行，但是当我使用 JXBrowser 运行时，它会弹出第一个警报 (alert("1"))，然后说：“无法获取属性 'srcElement' 的值：对象为空或未定义”。为什么当我运行 JXBrowser 时它会模拟事件，但它却说该事件为空？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:08:20.347

大多数情况下，在其他浏览器`event.srcElement`中调用。`event.target`一般可以这样写：

```
var element = event.srcElement ? event.srcElement : event.target; 
```

# php - PHP Codeigniter 数据库助手类“未使用表”

> ID：12763387
> 
> 赞同：1
> 
> 时间：2012-10-06T20:05:56.397
> 
> 标签：php, mysql, database, codeigniter, orm

好的，这显然不是完整的代码，但这是错误所在的代码。

```
$this->db->select('post_likes');
$this->db->from('user_dash_posts');
$this->db->where('post_idn', $idn);
$this->db->where('isactive', '0');
if($this->db->count_all_results() > 0)
{
    $dataDB = $this->db->get(); 
```

`get()`关于我在这里展示的最后一行的声明，我得到“没有使用表” 。我对整个 CI 数据库类/帮助器还是有点陌生​​，因为我以前更喜欢手写完整的查询器。但我正在尝试在 ORM 层上自学并更好地熟悉它们。然而，这对我的问题来说是一个无声的点。我试图弄清楚我在这个陈述中做错了什么，解决方法是什么，如果可能的话，解释我是如何做错的，这样我就可以理解而不是再犯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:18:54.497

根据[文档](http://codeigniter.com/user_guide/database/active_record.html)：

> 通常，当一个 Active Record 调用完成时，所有存储的信息都会为下一次调用重置。

如果要重用查询，请使用同一页面底部的缓存方法。完成后不要忘记刷新缓存：

```
$this->db->start_cache();
$this->db->select('post_likes');
$this->db->from('user_dash_posts');
$this->db->where('post_idn', $idn);
$this->db->where('isactive', '0');
$this->db->stop_cache();

if($this->db->count_all_results() > 0) {
     $dataDB = $this->db->get();
}
$this->db->flush_cache(); 
```

编辑：

另一个使用单个查询而不是两个查询的选项：

```
$this->db->select('post_likes');
$this->db->from('user_dash_posts');
$this->db->where('post_idn', $idn);
$this->db->where('isactive', '0');
$query = $this->db->get();

if($query->num_rows() > 0) {
     $dataDB = $query->result();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T03:30:05.013

您可以简单地删除`$this->db->from('user_dash_posts');`行并将您的表名添加到`get()`函数中，如下所示： `$dataDB = $this->db->get('user_dash_posts');`

# facebook-opengraph - Facebook 如何解析 blogspot.com 开放图属性

> ID：12763389
> 
> 赞同：1
> 
> 时间：2012-10-06T20:06:28.313
> 
> 标签：facebook-opengraph, blogspot

blogspot.com 的某些页面不包含开放图标签，但 Facebook 对象调试器仍然正确解析开放图属性。它是如何获取开放图信息的？

例如，我在[http://sushiwens.blogspot.com/](http://sushiwens.blogspot.com/)源代码中看不到任何打开的图元标记。但它被 facebook [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fsushiwens.blogspot.com%2F正确解析](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fsushiwens.blogspot.com%2F)

我需要在python中实现类似open graph parsing函数的东西，所以我需要知道怎么做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2022-02-08T21:33:04.417

我没有真正的来源来确定 facebook 是如何做的，但[这个网站](https://andrejgajdos.com/how-to-create-a-link-preview/)可能会对你有所帮助。
我用他的想法用python开发了一个解析器。如果它可以帮助你，python 项目就[在这里](https://github.com/gri38/hyperlink_preview)。

如果我尝试总结一个策略来获取没有 og 标签的数据：

*   **标题**：
    *   搜索标题标签
    *   在正文中搜索 h1
    *   在正文中搜索 h2 ...
*   **说明**：
    *   在 <meta name="description"> 中搜索
    *   在正文中的可见文本中搜索（例如，第一个 <p>）
    *   搜索 <meta name="twitter:description"> 是一个解决方案，但我不这样做：通常描述很糟糕，与 twitter 的内容相关的更多，而不是链接的真实内容。
*   **域名**：
    *   搜索 <link rel="canonical">
    *   搜索 og:url
    *   但我做的更简单：从目标链接中提取域（在python中：`urlparse(url).netloc`
*   最后但并非最不重要的：**图片**：
    *   搜索 <link rel="image_src" href="图片网址" />
    *   解析所有 <img> 标签的目标链接 html 并“排序”它们：
        *   小图像：一维 <= 50px
        *   坏比率图像：剩余的比率最长边/最短边> 3
        *   好图片：剩下的
    *   然后在好的图像中选择最大的图像。如果没有好的形象：坏的比例最大。否则：小图像中最大的。（最大 = 最大宽度 x 高度）
    *   获取所有图像可能很耗时！可以使用图像的第一个字节获取尺寸，但这是另一回事（参见第二个链接）

# c# - Use proxy in webBrowser without editing registry

> ID：12763394
> 
> 赞同：0
> 
> 时间：2012-10-06T20:07:43.563
> 
> 标签：c#, proxy, browser

I would like to use a proxy in my webbrowser but without editing the registry on the machine.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:44:41.467

You could use [WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394389%28v=vs.85%29.aspx), but that would still adjust the system settings. If you want to adjust only the proxy settings for your own process, you can do that via [UrlMkSetSessionOption](http://msdn.microsoft.com/en-us/library/ms775125%28v=vs.85%29.aspx) exposed by urlmon.dll. An example of this function is listed below. For more information on INTERNET_OPTION_PROXY, see [http://msdn.microsoft.com/en-us/library/windows/desktop/aa385328(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385328(v=vs.85).aspx).

```
private void SetSessionProxy(strin ProxyAddress, string BypassList)
{
    var proxyInfo= new INTERNET_PROXY_INFO {
        dwAccessType = 0x3,
        lpszProxy = ProxyAddress,
        lpszProxyBypass = BypassList
    };
    int structSize = Marshal.SizeOf(proxyInfo);
    const uint SetProxy = 0x26;

    if (Win32Native.UrlMkSetSessionOption(SetProxy, structure, dwLen, 0) != 0)
        throw new Win32Exception();
}

[StructLayout(LayoutKind.Sequential)]
private class INTERNET_PROXY_INFO
{
    public uint dwAccessType;
    [MarshalAs(UnmanagedType.LPStr)]
    public string lpszProxy;
    [MarshalAs(UnmanagedType.LPStr)]
    public string lpszProxyBypass;
}

[DllImport("urlmon.dll", CharSet=CharSet.Unicode, SetLastError=true)]
private static extern int UrlMkSetSessionOption(uint dwOption, INTERNET_PROXY_INFO structNewProxy, uint dwLen, uint dwZero); 
```

# javascript - JavaScript - 函数没有返回好的值

> ID：12763396
> 
> 赞同：-2
> 
> 时间：2012-10-06T20:07:52.017
> 
> 标签：javascript, jquery, function, return

> **可能重复：**
> [如何从 AJAX 请求返回值？](https://stackoverflow.com/questions/2956261/how-can-i-return-a-value-from-an-ajax-request)

我编写了从 .php 文件中获取用户名的函数

```
function pobierzLogin()
{
  var myVar= "0";
  $.post("logowanie.php", { "logowanie" : 3 }, function(odp)
  {
    myVar = odp;
  });
  return myVar;
} 
```

myVar 将返回 0，但 alert(odp); 显示出良好的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:15:46.070

这应该工作得很好。

```
function pobierzLogin()
{
    var myVar= "0";
    return $.post("logowanie.php", { "logowanie" : 3 }, function(odp)
    {
        return odp;
    });
} 
```

我不时使用它，并且每次都能成功运行。

**更新**

在@user1689607 的帮助下，这应该是

```
function pobierzLogin()
{
    return $.ajax({
        url : "logowanie.php",
        type : "post",
        dataType: "json", 
        data: {
            "logowanie": 3
        }
    })
}

pobierzLogin().done(function(odp){
   //... do stuff
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:10:36.903

Ajax 是异步的。因此，您的函数在为其赋值之前会返回变量。这样做：

```
function pobierzLogin(callback)
{
  var myVar= "0";
  $.post("logowanie.php", { "logowanie" : 3 }, function(odp)
  {
    callback(odp);
  });
} 
```

然后像这样使用它：

```
pobierzLogin(function(odp){
      //do smthing with odp
}); 
```

编辑：

您可以在 ajax 参数中设置 async: false ，在这种情况下 ajax 调用将是同步的：

```
return $.ajax({
    url : "logowanie.php",
    type : "post",
    dataType: "json", 
    async: false,
    data: {
        "logowanie": 3
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:09:39.107

这是因为您的请求是**异步发生的，因此****在** 方法完成之前不会设置该值`pobierzLogin`，因为请求需要时间才能到达互联网并返回。

不要做你正在做的事情，而是定义一些你想在请求返回时触发的方法，并在你的回调中执行它到`$.post`.

```
var whenRequestReturns = function(args){ ...  }

$.post("logowanie.php", { "logowanie" : 3 }, function(odp)
  {
    whenRequestReturns(); // invoke here
  }); 
```

或者只是做类似的事情

`$.post("logowanie.php", { "logowanie" : 3 }, whenRequestReturns)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T20:09:43.590

您 `alert(odp);`必须按原样在 post 的回调`$.post`中`asynchronous`。

修改后的代码：

```
function pobierzLogin(cb)
{
  var myVar= "0";
  $.post("logowanie.php", { "logowanie" : 3 }, function(odp)
  {
     myVar = odp;
      cb(odp):
   });
   return myVar;
 }
 pobierzLogin(function(myVar ){
   alert(myVar );
}); 
```

# regex - 正则表达式用所需字符替换任何出现的任何数字或任何字符

> ID：12763398
> 
> 赞同：0
> 
> 时间：2012-10-06T20:08:19.890
> 
> 标签：regex, masking

我需要帮助找出模式生成器的解决方案。

我有一个应用程序使用具有不同模式的交换格式，例如

00350-ABA-0NZ0:AXYA-11/11/2012 等，

具有由“-”、“.”、“:”和“/”分隔的数字和字母数字数据。现在我想要做的是将其转换为通用格式，如 nnnnn-ccc-nccn:cccc-nn/nn/nnnn 其中 n 是数字，c 是字符。

任何帮助/建议/想法。. . 谢谢CSK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:39:42.577

您不能在单个正则表达式中进行条件替换。您需要分两步完成（这是一个 Python 示例）：

```
>>> s = "00350-ABA-0NZ0:AXYA-11/11/2012"
>>> s = re.sub(r"[A-Za-z]", "c", s)
>>> s
'00350-ccc-0cc0:cccc-11/11/2012'
>>> s = re.sub(r"\d", "n", s)
>>> s
'nnnnn-ccc-nccn:cccc-nn/nn/nnnn' 
```

你需要这样做——我刚刚在你的评论中看到了你的解决方案，如果你再看一遍，你会发现它不起作用。提示：你会得到`'ccccc-ccc-cccc:cccc-cc/cc/cccc'`结果...

另一种解决方案是使用一个回调函数来检查匹配并相应地选择替换字符串。但这不再是纯正则表达式了：

```
>>> def replace(m):
...     return "n" if m.group(0).isdigit() else "c"
...
>>> s = re.sub(r"[A-Za-z0-9]", replace, s)
>>> s
'nnnnn-ccc-nccn:cccc-nn/nn/nnnn' 
```

# titanium - 钛工作室的camelCase ctrl左右？

> ID：12763402
> 
> 赞同：0
> 
> 时间：2012-10-06T20:08:43.470
> 
> 标签：titanium

所以我使用的是钛工作室，我注意到它像 jetBrains 一样，预先打包了一个单词的 ctrl-left 或 ctrl-right 到该单词的开头或结尾的想法，而不是“骆驼套”子部分。

呃，这里举个例子：

```
|ThisIsCool = new ArrayList(); 
```

假设“管道”字符是光标，如果我按 ctrl-right 一次，我希望它转到：

```
This|IsCool = new ArrayList(); 
```

然后再次：

```
ThisIs|Cool = new ArrayList(); 
```

相反，在 Titanium 工作室中，它只是跳到`=`标志处。

我如何让 Titanium studio 行为正确？我认为这是某种设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:02:33.293

键绑定位于 Window->Perferences->Keys 中。

我尝试了一些选项，但 Next Word 是我能找到的最接近的选项，它可能会完成你想要的。当我绑定它时，它只是做了默认的 CTRL+右箭头已经在做的事情。没有“camel”或“c​​ap”（大写字母）。在我看来，这个功能并没有内置在 IDE 中。如果您查看该部分，也许其中的某些内容会引起您的注意并为您工作。

否则，我可能会访问 Appcelerator 特定论坛，并让开发人员在那里注意到它。

# google-bigquery - 大查询移动平均线

> ID：12763404
> 
> 赞同：2
> 
> 时间：2012-10-06T20:09:01.183
> 
> 标签：google-bigquery

谁能告诉我如何在 bigquery 中计算移动平均线。

这是我需要的 mysql 风格。

```
SELECT T1.id, T1.value_column1, avg(T2.value_column1)
FROM table1 T1
INNER JOIN table1 T2 ON T2.Id BETWEEN T1.Id-19 AND T1.Id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:20:23.150

您可以做同样的事情，但由于 BigQuery 只允许在相等时加入，因此需要做更多的工作。这是一个示例，它将从公共出生样本中计算出生体重的 6 个月移动平均值。

```
SELECT 
  --Convert months-since-year-0 back to year, month
  INTEGER(month / 12) as year, 
  month % 12 as month, 
  avg 
FROM (
  SELECT month, 
    -- Note that this average is the average over all of the data in the 
    -- last 6 months, not an average over the avg values for the last 6 months.
    -- It is easy to compute the latter, if that is what is desired -- just 
    -- compute the average in the inner select, and take the average of those
    -- here.
     SUM(total_weight_per_month) / SUM(records_per_month) as avg
  FROM (
    SELECT 
       -- Note we use t2.month here since that is what is compared against
       -- 6 different t1 months.
       t2.month as month, 
       t1.records_per_month as records_per_month,     
       t1.total_weight_per_month as total_weight_per_month 
    FROM (
      SELECT month,
        COUNT( weight_pounds ) as records_per_month, 
        SUM( weight_pounds)  as total_weight_per_month,
        -- This active field is the key that lets us join all of the
        -- values against the values in the date subselect.
        1 AS active
      FROM (
        SELECT 
           -- Convert year and month fields to a single value that
           -- has the number of months since year 0\. This will allow
           -- us to do math on the dates.
          year * 12 + month AS month, 
          weight_pounds 
        FROM [publicdata:samples.natality] 
        WHERE weight_pounds > 0)
      GROUP BY month) as t1
    JOIN  
      -- We join the weights per month agsint a subselect that contains
      -- all months.
      (SELECT month, 1 as active 
      FROM
        (SELECT 
           year * 12 + month AS month, 
        FROM [publicdata:samples.natality])
      GROUP BY month) as t2
    ON t1.active = t2.active 
    -- Here is where we get the moving average -- we basically take the month 
    -- value from t1 and make it apply for 6 months.
    WHERE t1.month >= t2.month && t1.month - 6 < t2.month)
  GROUP BY month
  ORDER BY month desc) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T22:44:20.807

*如需更新和更有效的答案，[请访问 https://stackoverflow.com/a/24943950/132438](https://stackoverflow.com/a/24943950/132438)。*

* * *

检查新的 LAG() 和 LEAD() 窗口函数。它们允许您遍历结果集，而无需自连接。

[https://developers.google.com/bigquery/docs/query-reference#windowfunctions](https://developers.google.com/bigquery/docs/query-reference#windowfunctions)

JOIN EACH 的不同选项（这可能会变得太慢，因为在中间步骤中会生成大量数据）：

```
SELECT a.SensorId SensorId, a.Timestamp, AVG(b.Data) AS avg_prev_hour_load
FROM (
  SELECT * FROM [io_sensor_data.moscone_io13]
  WHERE SensorId = 'XBee_40670EB0/mic') a
JOIN EACH [io_sensor_data.moscone_io13] b
ON a.SensorId = b.SensorId
WHERE b.Timestamp BETWEEN (a.Timestamp - 3600000) AND a.Timestamp
GROUP BY SensorId, a.Timestamp; 
```

（基于 Joe Celko 的 SQL 问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T16:40:00.687

我创建了以下“Times”表：

```
Table Details: Dim_Periods
Schema
Date    TIMESTAMP   
Year    INTEGER         
Month   INTEGER         
day         INTEGER         
QUARTER INTEGER     
DAYOFWEEK   INTEGER     
MonthStart  TIMESTAMP   
MonthEnd    TIMESTAMP   
WeekStart   TIMESTAMP   
WeekEnd TIMESTAMP   
Back30Days  TIMESTAMP   -- the date 30 days before "Date"
Back7Days   TIMESTAMP   -- the date 7 days before "Date" 
```

我使用这样的查询来处理“运行总和”

```
SELECT Date,Count(*) as MovingCNT
FROM

(SELECT Date,
                Back7Days 
                    FROM DWH.Dim_Periods  
                 where Date < timestamp(current_date()) AND
                             Date >= (DATE_ADD (CURRENT_TIMESTAMP(), -5, 'month'))
                )P
                CROSS JOIN EACH
    (SELECT repository_url,repository_created_at
    FROM publicdata:samples.github_timeline
                ) L
        WHERE timestamp(repository_created_at)>= Back7Days 
              AND timestamp(repository_created_at)<= Date

GROUP EACH BY Date 
```

请注意，它也可用于“月至今”、“周至今”、“30 天前”等聚合。但是，性能不是最好的，并且由于笛卡尔坐标，查询在较大的数据集上可能需要一段时间加入。希望这会有所帮助

# java - 如何使用 php/java/jQuery/etc 使表单出现和消失？

> ID：12763406
> 
> 赞同：0
> 
> 时间：2012-10-06T20:09:08.800
> 
> 标签：java, php, html, forms

我需要知道如何制作一个像这样的页面：

[http://www.stampile.ro/comanda.php](http://www.stampile.ro/comanda.php)

如何使表格出现和消失？

你能告诉我怎么做吗？我有所有的表格和单选按钮，但我不知道如何创建类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:19:37.253

`<div>`您可以使用 jquery更改 a 的内容。基本上它是这样工作的：

```
$('.click').click(function() {

var content = "<img src='test.jpg'> <p>lorum ipsum ipsum ipsum </p>"
// replace the contents of the div with the new contents
$('#content-container').html(lcontent);

// cancel the default action of the link by returning false
return false;
}); 
```

见：http: [//jsfiddle.net/n9Vb9/](http://jsfiddle.net/n9Vb9/)

在表单中使用它时，我想建议您查看此页面：[根据选择值显示/隐藏字段](https://stackoverflow.com/questions/835259/show-hide-fields-depending-on-select-value)

# c# - 字符串操作

> ID：12763412
> 
> 赞同：-4
> 
> 时间：2012-10-06T20:09:47.070
> 
> 标签：c#, java, string, substring, indexof

好吧，假设我有以下字符串：

> 75 \r\n 95 64 \r\n 17 47 82

请注意，数字是用空格分隔的。

我希望我的数组具有以下元素：75 95 64 17 47 82。

我一直在尝试解决它很长时间，但还没有运气..

任何人都可以为此提供任何解决方案或想法吗？

这不是家庭作业。我只是想增加我对字符串操作练习的了解。

**编辑：**请不要使用 LINQ 解决方案，因为我对该主题一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:16:55.833

在 C# 中：

```
string toSplit = "75 \r\n 95 64 \r\n 17 47 82";

string[] numbers = toSplit.Split(new[] { Environment.NewLine, "\t", " " },
                                 StringSplitOptions.RemoveEmptyEntries); 
```

Split() 的第一个参数是一个字符串数组，它确定要在输入字符串中查找哪些字符串以进行拆分。第二个参数将确保从拆分数组中删除任何空白条目。

该数组仍然包含字符串，但之后您可以轻松地转换为您选择的数字格式（`short`、`int`、`ushort`等`uint`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:11:26.333

在 Java 中：

```
String yourString = "75 \r\n 95 64 \r\n 17 47 82";
String[] array = yourString.split("\\s+"); 
```

将删除所有空白字符：`[ \t\n\x0B\f\r]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T02:35:57.343

只需使用 'replace' 删除带有空白的 '\r\n'。看下面的例子：

```
 string s = "75 \r\n 95 64 \r\n 17 47 82";
   s = s.Replace("\r\n ", ""); 
```

如果你想把它放在数组中，你可以使用 split

```
 string[] string_arr = s.Split(' '); 
```

# python - 具有父子关系的 Python OOO 编码

> ID：12763413
> 
> 赞同：0
> 
> 时间：2012-10-06T20:10:07.420
> 
> 标签：python

我有一个父子类。父类有 2 个属性 x,y。Y 可以使用 __(双下划线) 设置为私有变量，但我不能将它公开给子类，所以我将它作为 _(单下划线) 将其公开给子类。

但我不希望它暴露在子类之外..

无论如何要覆盖子方法中的 init 类以保护 y 变量被暴露？

测试.py

```
class parent:

    def __init__(self,x):
        self.x = x
        self._y =   ' '
        self.setyvalue()

    def setyvalue(self):
        self._y = 10
        return self._y 
class child(parent):
    def test(self):
        print('self.x',self.x)
        print('self._y',self._y)

if __name__ == '__main__':
    x = child(2)
    x.test() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:13:40.727

不，Python 没有提供真正隐藏属性的方法。它只是提供了阻止不当访问的约定。使用单个下划线是一种将其标记为私有的约定，并警告用户如果他们使用该变量，他们将面临灾难的风险。

请注意，即使是双下划线“隐藏”也不是很强的安全性。如果你的类 Foo 有一个属性`__blah`，它仍然可以被外人访问为`_Foo__blah`. 同样，这只是一种不鼓励外部访问但并不阻止它的约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:14:20.263

按照惯例，以下划线开头的变量被认为是“私有的”，不应在类外使用。Python 不会阻止它，但它是应该尊重的约定。这就是你在 Python 中所做的方式：一切都是允许的，但你记录了它应该如何使用。

# android - 可以将项目重新设置为 Google AOSP 的 Gerrit 实例？

> ID：12763419
> 
> 赞同：2
> 
> 时间：2012-10-06T20:10:32.740
> 
> 标签：android, git, branch, rebase, gerrit

我为我的组织推出了一个 Gerrit 实例，进行了 LDAP 身份验证，并手动导入了一些 Android 的工作副本。凉爽的。

但是，工作副本不包括对上游（远程）分支的引用。对于给定的项目，比如框架/基础，我希望实现的是：

```
git branch -r  
# See Google branches
git rebase # to a Google branch.
git push # back to my Gerrit instance. 
```

如上所述，如何确保我的本地 git 存储库知道上游项目？我是否需要在本地镜像 AOSP 内容？

我已经尝试阅读一些文档，并且还简单地将 Google 的远程延迟添加到我的清单 xml 中。推送复制被广泛覆盖，但这不是我的用例，因为我想跟踪远程分支，而不是将本地更改推送回它们。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:30:48.683

据我所知，大多数团队使用的脚本会拉下 Google 版本的 Android 并将其直接推送到他们的 Gerrit 服务器，绕过审查。清单 xml 文件中没有可以帮助解决此问题的设置。

一些 Android 商店希望为上游分支和标签使用不同的命名空间。例如，它们可能会在所有内容前加上- 、和，而不是`master`and`froyo`分支和标签。`android-4.1.1_r6``external``external/master``external/froyo``external/android-4.1.1_r6`

其他商店以类似的方式为其内部分支和标签添加前缀。

您执行此工作的脚本将与此类似（未经测试）。`--mirror`首先使用该选项从上游设置本地 repo 克隆。

```
# this only needs to be ran once, or for any new repositories added to repo:
repo forall -c \
  'git remote add local_server ssh://path/to/local/gerrit:29418/$REPO_PROJECT'

# fetch changes
repo forall -c 'git fetch'

# push to your local Gerrit server
repo forall -c 'git push local_server refs/*:refs/external/*' 
```

当然，您可以使用 cron 作业来自动执行此脚本。一旦这到位，当开发人员运行时，`git branch -r`他们将看到来自上游的 origin/external/blah 分支，并且可以基于这些分支进行 rebase。

# c - 如何声明一个新结构

> ID：12763424
> 
> 赞同：-1
> 
> 时间：2012-10-06T20:11:07.170
> 
> 标签：c, binary-tree

我正在尝试通过从文件中读取行来实现二叉搜索树。

```
 while(fgets(p, 1024, fp))
  {
     struct node child;
     child.str = (char *)malloc(plen);      
     strcpy(child.str,p);
     insert(&tree,&child);
  } 
```

现在的问题是我似乎无法找到一种方法来制作一个全新的 child 副本，而是在每次 while 循环重新启动时更改它的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:14:54.057

那是因为指向子对象的指针 ( `&child`) 没有改变。您可以通过打印出来来说服自己：

```
printf("address of child = %p\n", &child); 
```

解决方案：您还需要分配节点：

```
struct node*child = malloc(sizeof(struct node)); 
```

然后，您可以按原样分配`child.str`，现在使用指针语法：

```
child->str = (char *)malloc(plen);      
strcpy(child->str,p); 
```

...并且因为孩子是一个指针，所以你不需要这里的＆符号：

```
insert(&tree,child); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T20:14:55.150

没有看到很难说`insert()`。我的猜测是你的自动`struct node`在每次迭代时都超出了范围。指向此类变量的指针不再有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:21:36.923

如果你以这种方式定义成一个函数

```
struct node child; 
```

这是一个临时内存，因此在退出该功能后，您可能会丢失数据。所以你必须用`malloc`or动态定义结构`calloc`

```
struct node *child = malloc(sizeof(struct node)); 
```

或者

```
struct node *child = calloc(1,sizeof(struct node)); 
```

calloc 允许分配内存并将其设置为 0

# c# - 更改 ObservableCollection 值会引发只读错误

> ID：12763427
> 
> 赞同：0
> 
> 时间：2012-10-06T20:11:44.290
> 
> 标签：c#

我有一个 ObservableCollection 定义为

```
public ObservableCollection<KeyValuePair<string, double>> comboBoxSelections 
{ 
 get; 
 set; 
} 
```

稍后在我的代码中，我需要迭代集合并仅更改一些值但保持相同的键。我试过以下

```
 for (int i = 0; i < comboBoxSelections.Count ; i++)
        {
            comboBoxSelections[i].Value = SomeDoubleValue;
        } 
```

但这给出了错误`Property or indexer 'System.Collections.Generic.KeyValuePair<string,double>.Value' cannot be assigned to -- it is read only`

有人可以解释为什么我收到错误以及如何允许更新`ObservableCollection`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:21:54.543

不是`ObservableCollection<T>`只读的，而是`KeyValuePair<TKey, TValue>`，因为后者是`struct`. `struct`s 是不可变的，这是一个很好的设计实践。

更新收藏的正确方法是

```
comboBoxSelections[i] =
    new KeyValuePair<string, double>(comboBoxSelections[i].Key, someDoubleValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:14:40.190

好吧，错误信息很清楚。的`Value`属性`KeyValuePair`是只读的。我无法为问题的第二部分提供详细答案，但快速谷歌搜索给出：

[http://blogs.microsoft.co.il/blogs/shimmy/archive/2010/12/26/observabledictionary-lt-tkey-tvalue-gt-c.aspx](http://blogs.microsoft.co.il/blogs/shimmy/archive/2010/12/26/observabledictionary-lt-tkey-tvalue-gt-c.aspx)

# java - 这个'\x00\x00\x00\x05'是什么编码？

> ID：12763428
> 
> 赞同：1
> 
> 时间：2012-10-06T20:11:47.083
> 
> 标签：java, python, sockets, encoding, tcp

我使用以下方法将整数从我的 Java 客户端发送到我的 Python 服务器：

```
outputStream.writeInt(5); 
```

在服务器上：

```
_id = self.request.recv(4) 
```

我得到：

```
Name   | Type|  Value
_id    | str |  '\x00\x00\x00\x05' 
```

我该如何解码并将其转换回 Integer ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T20:12:41.807

您可以使用 python[`struct`模块](http://docs.python.org/library/struct.html)对此进行解码：

```
>>> import struct
>>> struct.unpack('>i', '\x00\x00\x00\x05')
(5,) 
```

该`>i`模式需要一个大端有符号整数（4 个字节）。

# ios - 为什么 Xcode 在构建到设备时会复制未更改的资源？

> ID：12763429
> 
> 赞同：12
> 
> 时间：2012-10-06T20:11:51.960
> 
> 标签：ios, xcode, bundle

我正在为 iOS 处理一个相当大的、资产繁重的项目，我不禁注意到 Xcode 复制了数百个资源（纹理、精灵表、声音文件等），自上次以来根本没有改变我为设备构建的时间。当每次构建需要 2-4 分钟才能在设备上弹出时，它会使编码变得非常非常慢。

有没有办法让 Xcode 识别它正在做多余的事情，或者编写一个脚本，让它更智能地了解如何将资源传输到设备？

PS我意识到应用程序可能没有任何内置的“附加”功能。我希望情况并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:30:34.313

您可以尝试向项目中添加另一个目标并将其命名为“无资源”。从该目标中排除所有重资源。第一次需要使用所有资源目标启动应用程序，下次使用“无资源”目标。如果你在项目中添加了一些东西，你应该使用第一个目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T21:40:39.523

iOS 仅支持部署已签名到设备的完整应用程序包。将调试版本部署到设备的过程是这样的。

1.  编译更改的源代码并签署二进制文件
2.  Alpha预乘PNG图像
3.  创建一个包含应用程序资源和二进制文件的文件夹
4.  对文件夹的内容进行签名并使用文件夹和签名创建一个 ZIP 文件
5.  将 ZIP 文件 (.ipa) 复制到设备

不幸的是，我想时间花在 #3 和 #4 上，每个构建都会创建它们。我还没有看到任何加快速度的方法。如果你有很多很多 PNG 图像，你可以[尝试告诉 Xcode 跳过 Step 2](https://stackoverflow.com/questions/1565962/is-there-a-trick-to-save-time-building-in-xcode-when-there-are-thousands-of-imag?rq=1)。

如果您的应用程序允许您在开发的大部分时间不包含许多资源，[NeverBe 的方法听起来是个好主意。](https://stackoverflow.com/a/12764051/458592)您也可以拥有第二组更小/虚拟的资源，您可以切换进出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:24:47.930

有时，XCode 确实将未更改的资源打包。通常，当您通过 Finder 而不是 XCode 更改文件时。

Make Project -> Clean 进行完全重建

# sql - 在 CouchDB 中执行 WHERE - IN 查询

> ID：12763430
> 
> 赞同：9
> 
> 时间：2012-10-06T20:12:02.210
> 
> 标签：sql, database, couchdb, where-in

我想通过一次调用 CouchDB 来查询特定文档的列表。

使用 SQL 我会做类似的事情

```
SELECT *
FROM database.table
WHERE database.table.id
IN (2,4,56); 
```

在 CouchDB 中通过任`_id`一字段或其他字段执行此操作的秘诀是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T20:21:24.430

您需要使用 views`keys` [查询参数](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)来获取具有指定集中键的记录。

```
function(doc){
    emit(doc.table.id, null);
} 
```

接着

```
GET /db/_design/ddoc_name/_view/by_table_id?keys=[2,4,56] 
```

要同时检索文档内容，只需将`include_docs=True`查询参数添加到您的请求中。

*UPD*：您可能有兴趣按此参考 ID (2,4,56) 检索文档。默认情况下，CouchDB 会查看“映射”发出的键及其所属的文档。要调整此行为，您可以使用[链接文档](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Linked_documents)技巧：

```
function(doc){
    emit(doc.table.id, {'_id': doc.table.id});
} 
```

现在请求

```
GET /db/_design/ddoc_name/_view/by_table_id?keys=[2,4,56]&include_docs=True 
```

将返回行，其`id`字段指向保存的文档，`2`键和`4`包含引用文档内容的键。`56``doc`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T08:37:31.587

在 CouchDB Bulk 文档中，API 用于此目的：

```
curl -d '{"keys":["2","4", "56"]}' -X POST http://127.0.0.1:5984/foo/_all_docs?include_docs=true 
```

[http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API)

# java - 一种递归算法来找到给定整数数组的每个可能的总和？

> ID：12763431
> 
> 赞同：2
> 
> 时间：2012-10-06T20:12:12.153
> 
> 标签：java, recursion

所以给定一个数组，例如**[3, 5, 7, 2]**我想使用递归来给我所有可能的总和组合`for example: 3, 5, 7, 2, 8(3+5),10(3+7),5(3+5)... 15(3+5+7)`等。我不完全确定如何使用 java 来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:25:15.823

数组中的每个数字都有两个选择。

1.  使用号码
2.  不要使用号码

    ```
    void foo(int[] array, int start, int sum) {
        if(array.length == start) return;
        int val = sum + array[start];
        //print val;
        foo(array, start + 1, val); //use the number
        foo(array, start + 1, sum); //don't use the number
    } 
    ```

最初的电话是`foo(a, 0, 0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:19:58.533

对此的递归算法可以按如下方式工作：

列表的所有总和等于以下的并集：

*   第一个数字加上没有第一个数字的子列表的总和
*   没有第一个数字的子列表的总和

最终，您的递归调用将达到一个空列表的停止条件，该列表只有一个总和（零）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:20:28.900

这是用伪代码执行此操作的一种方法：

```
getAllPossibleSums(list)
    if(list.length == 1)
        return list[0];
    otherSums = getAllPossibleSums(list[1:end])
    return union(
        otherSums, list[0] + otherSums); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T23:21:50.617

```
public static void main(String[] args) {
    int [] A = {3, 5, 7, 2};
    int summation = recursiveSum(A, 0, A.length-1);
    System.out.println(summation);
  }

  static int recursiveSum(int[] Array, int p, int q) {
    int mid = (p+q)/2; //Base case
    if (p>q) return 0; //Base case
    else if (p==q) return Array[p];
    **else
      return  recursiveSum(Array, p, mid) +  recursiveSum(Array, mid + 1, q);**
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T20:32:18.390

```
public static void main(String[] args) {
    findAllSums(new int[] {3, 5, 7, 2}, 0, 0);
}

static void findAllSums(int[] arrayOfNumbers, int index, int sum) {     
    if (index == arrayOfNumbers.length) {
        System.out.println(sum);
        return;
    }

    findAllSums(arrayOfNumbers, index + 1, sum + arrayOfNumbers[index]);
    findAllSums(arrayOfNumbers, index + 1, sum);
} 
```

您有两个分支，一个在其中添加当前号码，另一个在其中不添加。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-17T15:39:40.007

有史以来最简单的方法：

```
private int noOfSet; 
```

添加以下方法：

```
private void checkSum() {
        List<Integer> input = new ArrayList<>();
        input.add(9);
        input.add(8);
        input.add(10);
        input.add(4);
        input.add(5);
        input.add(7);
        input.add(3);

        int targetSum = 15;
        checkSumRecursive(input, targetSum, new ArrayList<Integer>());

    }

    private void checkSumRecursive(List<Integer> remaining, int targetSum, List<Integer> listToSum) {
        // Sum up partial
        int sum = 0;
        for (int x : listToSum) {
            sum += x;
        }

        //Check if sum matched with potential
        if (sum == targetSum) {
            noOfSet++;
            Log.i("Set Count", noOfSet + "");
            for (int value : listToSum) {
                Log.i("Value", value + "");
            }
        }

        //Check sum passed
        if (sum >= targetSum)
            return;

        //Iterate each input character
        for (int i = 0; i < remaining.size(); i++) {
            // Build list of remaining items to iterate
            List<Integer> newRemaining = new ArrayList<>();
            for (int j = i + 1; j < remaining.size(); j++)
                newRemaining.add(remaining.get(j));

            // Update partial list
            List<Integer> newListToSum = new ArrayList<>(listToSum);
            int currentItem = remaining.get(i);
            newListToSum.add(currentItem);
            checkSumRecursive(newRemaining, targetSum, newListToSum);
        }
    } 
```

希望这会帮助你。

# .htaccess - 规范 URL 未重定向

> ID：12763432
> 
> 赞同：2
> 
> 时间：2012-10-06T20:12:22.210
> 
> 标签：.htaccess, url, canonical-link

我想去掉我的网站名称之前的，所以我尝试在文件中设置一个规范的 URL 标签，但是当我输入 www.blablabla.tk 时`www.`它没有将我重定向到[http://blablabla.tk](http://blablabla.tk)

我试过这段代码：`<link rel="canonical" href="http://blablabla.tk" />`

我是否必须更改**.htaccess**文件中的某些内容或其他内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:07:12.430

是的，将其添加到文档根目录中 htaccess 文件的顶部：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.blablabla.tk$ [NC]
RewriteRule ^(.*)$ http://blablabla.tk/$1 [L,R=301] 
```

您拥有的**“规范”**链接告诉[搜索引擎索引机器人等客户哪个版本的页面是“首选”版本](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)。它实际上并没有重定向任何东西。

# jquery - jQuery – 来自“each()”函数的复合变量

> ID：12763434
> 
> 赞同：0
> 
> 时间：2012-10-06T20:12:34.883
> 
> 标签：jquery, string, checkbox, each

每次单击对象时，我可能无法使用基本的 jQuery 返回一个新的复合字符串（图像 src-paths）。

```
$(":checkbox").click(function(){
    $(":checked").each(function(){
        var auswahl += $(this).attr('data-imagesrc');
    });

    alert(auswahl);
}); 
```

我稍后尝试将此图像 src-paths 字符串发送到 PHP 文件以压缩这些图像（PHP 文件从路径数组中压缩）。不幸的是，如果这将是一个更好的解决方案，我还不熟悉数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:14:46.880

您的变量`auswahl`包含在`each`范围内，这意味着您无法从该函数外部访问它。对外宣布。

```
$(":checkbox").click(function(){
    var auswahl = '';
    $(".check:checked").each(function(){
        auswahl += $(this).attr('data-imagesrc');
    });
    alert(auswahl);
}); 
```

要将信息发送到服务器，请尝试[`$.ajax`](http://api.jquery.com/jQuery.ajax/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:16:40.203

每次单击后，您都会一次又一次地连接值，您应该`''`在调用 `each`方法之前将变量设置为。您可以在单击处理程序之外定义变量并使用`map`返回值数组的方法，请注意`:checkbox`选择器已弃用。

```
var auswahl;
$("input[type=checkbox]").click(function(){
    auswahl = $(".check:checked").map(function(){
        return this.dataset.imagesrc
    }).get();
    alert(auswahl);
}); 
```

如果要将数组转换为字符串，可以使用`join`方法。

```
auswahl.join() 
```

# php - 从头开始查找和替换

> ID：12763436
> 
> 赞同：1
> 
> 时间：2012-10-06T20:12:49.220
> 
> 标签：php, regex, replace

> **可能重复：**
> [Preg Replace - 替换匹配的第二次出现](https://stackoverflow.com/questions/5687334/preg-replace-replace-second-occurance-of-a-match)

我有一个包含`rules`两次单词的字符串。我需要找到并替换第二个单词。试图鬼混，`str_replace()`但什么也得不到，第四个参数不是我所期望的。

这是一个示例字符串：

```
http://localhost/proj1/modstart/admin/index.php?i=rules&sid=397ab1f6b8eb8a17787438a7e2e60ea3&mode=rules 
```

我替换后它应该是这样的：

```
http://localhost/proj1/modstart/admin/index.php?i=rules&sid=397ab1f6b8eb8a17787438a7e2e60ea3&mode=manage 
```

我读到这`preg_replace()`可能会有所帮助，但我不知道如何编写模式。

想法？

PS：不要建议将字符串分成两个变量，这不符合我的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:25:29.523

你应该使用正则表达式>>

```
$new = preg_replace('/\brules\b(?!.*\brules\b)/', 'manage', $old); 
```

使用单词边界是个好主意`\b`，因此它不会匹配一些包含**“规则”**的较大字符串，例如**“preudorules”**。

负前瞻`(?!.*\brules\b)`确保后面没有其他单词**“规则”**，因此您要替换的是最后一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:29:00.513

要不使用正则表达式，也不要将任何内容存储到第二个变量中，您可以使用`str_replace()`以下魔法`strpos()`：

```
$string = substr($string, 0, strpos($str, 'rules') + 5) . str_replace('rules', 'whatever', substr($string, strpos($string, 'rules') + 5)); 
```

这将把完整的字符串带到第一个实例的末尾，`rules`然后对字符串的第二部分进行字符串替换，该字符串将包含该单词的任何其他实例。

同样的事情，但更干净一点（是的，通过使用第二个变量）：

```
$pos = strpos($string, 'rules') + 5;
$string = substr($string, 0, $pos) . str_replace('rules', 'whatever', substr($string, $pos)); 
```

如果要查找+替换的词是动态的，或者您想在不同的页面上使用不同的词，则可以将*其*设为变量，如下所示：

```
$findMe = 'rules';
$replaceWith = 'whatever';
$pos = strpos($string, $findMe) + strlen($findMe);
$string = substr($string, 0, $pos) . str_replace($findMe, $replaceWith, substr($string, $pos)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:31:34.500

学习正则表达式是一个非常好的主意。在 PHP 中，您可以像这样完成查找/替换：

```
$result = preg_replace('/(rules.*?)rules/','$1manage',$str,1); 
```

它基本上找到“规则”一次，然后找到任何东西，然后第二次找到规则，然后将其全部放回第二次匹配之前并替换单词。

# python - 如何访问 Heroku 上的文件？

> ID：12763440
> 
> 赞同：8
> 
> 时间：2012-10-06T20:13:08.263
> 
> 标签：python, heroku

我有一个关于 Heroku 的项目。这个项目允许我更新一个 JSON 文件。如果通过项目的 Web 界面更新 Heroku 上的某些内容，我会看到更新。我可以关闭浏览器，再次打开它，更新仍然存在。

现在，我想向这个项目推一些东西。如果这样做，JSON 文件将被覆盖。因此，我首先从 heroku 获取当前项目状态。Heroku 的提示说一切都是最新的，这是不正确的，因为我更改了 JSON 文件。

使用`heroku run ls static/json/`显示更改的文件。我需要在推送到 heroku 之前获取此文件，以避免破坏通过 Web 界面完成的更新。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T20:34:29.437

我认为这是不可能的，原因之一是：Heroku dyno 拥有自己的[临时文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)，并带有对最新代码的 git checkout。但是，它不能反过来，无法将 dyno 中的文件更改检查到 git repo 中。这就是为什么您会收到“已经是最新的”响应。尝试拉时，因为 heroku git 遥控器与您的本地仓库同步。

您可能应该将您的文件存储在 Amazon 的 S3 或数据库中，甚至将您的数据写入数据库，以便在 heroku 部署之间持久保存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-19T07:10:08.100

您可以运行`heroku run bash`并备份文件，然后`heroku run bash`再次部署您的应用程序运行并删除新文件并将其替换为您备份的旧文件。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-21T09:19:31.870

如果要检查上次部署中的文件，可以运行`heroku run bash --app your-app-name`.
但是，如果您以编程方式将文件上传到您的应用程序，例如提交包含文件的表单，这些文件将在一段时间后消失，正如[herok doc](https://help.heroku.com/K1PPS2WM/why-are-my-file-uploads-missing-deleted)提到的

> Heroku 文件系统是短暂的 - 这意味着在 dyno 运行时对文件系统的任何更改只会持续到该 dyno 关闭或重新启动。每个测功机都使用最新部署的文件系统的干净副本启动。这类似于有多少基于容器的系统（例如 Docker）运行。此外，在正常操作下，dynos 每天都会在一个称为“循环”的过程中重新启动。

# wpf - 如何在 WPF 中的特定 x,y 屏幕位置绘制一个矩形？

> ID：12763441
> 
> 赞同：9
> 
> 时间：2012-10-06T20:13:14.940
> 
> 标签：wpf, draw, rectangles

在 C#、WPF 中，我创建了一个矩形：

```
 Rectangle myRgbRectangle = new Rectangle();
        myRgbRectangle.Width = 1;
        myRgbRectangle.Height = 1;
        SolidColorBrush mySolidColorBrush = new SolidColorBrush(); 
```

是的，我真的只是希望它是 1 像素乘 1 像素。我想根据可变高度更改颜色，如下所示：

```
 mySolidColorBrush.Color = Color.FromArgb(255, 0, 0, (byte)height);
        myRgbRectangle.Fill = mySolidColorBrush; 
```

现在，我如何在屏幕上的特定 x,y 位置绘制？我的 MainWindow.xaml 上确实有一个网格 (myGrid)。

谢谢！

* * *

这是相关的代码：

```
 myRgbRectangle.Width = 1;
        myRgbRectangle.Height = 1;
        SolidColorBrush mySolidColorBrush = new SolidColorBrush();

        int height;
        for (int i = 0; i < ElevationManager.Instance.heightData.GetLength(0); i++)
            for (int j = 0; j < ElevationManager.Instance.heightData.GetLength(1); j++)
            {
                height = ElevationManager.Instance.heightData[i, j] / 100;
                // Describes the brush's color using RGB values. 
                // Each value has a range of 0-255.
                mySolidColorBrush.Color = Color.FromArgb(255, 0, 0, (byte)height);
                myRgbRectangle.Fill = mySolidColorBrush;

                myCanvas.Children.Add(myRgbRectangle);
                Canvas.SetTop(myRgbRectangle, j);
                Canvas.SetLeft(myRgbRectangle, i); 
```

它抛出了这个错误：指定的 Visual 已经是另一个 Visual 的子对象或 CompositionTarget 的根。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-06T20:24:30.697

您需要使用 a [`Canvas`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)is 而不是 a [`Grid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)。您使用坐标来定位 a 中的元素，`Canvas`而不是 a 中的 Column 和 Row `Grid`。

画布的定义：

> 定义一个区域，您可以在其中使用相对于 Canvas 区域的坐标显式定位子元素。

然后，您将像这样使用[`Canvas.SetTop`](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.settop.aspx)和[`Canvas.SetLeft`](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.setleft.aspx)属性（*假设您的画布已命名`myCanvas`*）：

```
 myCanvas.Children.Add(myRgbRectangle);
 Canvas.SetTop(myRgbRectangle, 50);
 Canvas.SetLeft(myRgbRectangle, 50); 
```

* * *

**编辑**

根据您的编辑，就像我说您不止一次添加同一个矩形一样。每次添加时都需要在 For 循环中创建它。像这样的东西。

```
for (int i = 0; i < ElevationManager.Instance.heightData.GetLength(0); i++) 
    for (int j = 0; j < ElevationManager.Instance.heightData.GetLength(1); j++) 
    { 
        Rectangle rect = new Rectangle();
        rect.Width = 1;
        rect.Height = 1;
        height = ElevationManager.Instance.heightData[i, j] / 100; 
        // Describes the brush's color using RGB values.  
        // Each value has a range of 0-255\. 
        mySolidColorBrush.Color = Color.FromArgb(255, 0, 0, (byte)height); 
        rect.Fill = mySolidColorBrush; 

        myCanvas.Children.Add(rect); 
        Canvas.SetTop(rect, j); 
        Canvas.SetLeft(rect, i); 
    } 
```

# windows - 在 Windows 上使用 TortoiseSVN 更改文件名大小写

> ID：12763444
> 
> 赞同：29
> 
> 时间：2012-10-06T20:07:26.863
> 
> 标签：windows, tortoisesvn, case-sensitive, case-insensitive

我一直在使用 Windows 机器作为测试服务器进行开发项目。最终，我希望“实时”版本最终出现在 Linux 机器上。在尝试在 Linux 机器上进行测试时，很明显我需要更改几个文件名的大小写，因为 Windows 不区分大小写，但 Linux 不区分大小写。当我在 Windows 中更改文件名大小写时，TortoiseSVN 识别出文件已更改并适当地标记了我的文件夹。但是，当我尝试提交更改时，TortoiseSVN 不仅告诉我没有进行任何更改，而且实际上将我所做的所有文件名更改恢复为原始大小写。

我的问题是，**有没有一种简单的方法可以*从 Windows PC*更改文件名大小写并使更改出现在我的存储库中？**如果可能的话，我想避免任何类型的删除、提交、替换、提交情况，以保持我的提交整洁。谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-06T20:37:20.100

从弹出菜单中使用Tortoise SVN 中的**重命名**选项。[在此处](https://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-rename.html)查看详细信息（“移动文件和文件夹”一章）。

当您更改多个文件名的大小写时，换句话说，您更改了文件名-它们已超出版本控制-这就是为什么 SVN 客户端注意到受版本控制的文件已经消失（显然，这是因为 SVN 客户端没有t 正确通知）。

如果您在 IDE 时碰巧遇到这种情况，或者您不小心更改了案例 -当您选择显示为“缺失”和“非版本化”的两个文件时，会出现特殊的菜单选项**修复移动。**检查[这个](https://tortoisesvn.net/repairmoves.html)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-11-17T11:20:50.533

我发现 Tortoise SVN 有一个自动修复文件名大小写更改的设置。默认情况下它设置为 true，因此如果您只更改名称中字母的大小写，那么它将为您撤消更改......我可能会默默地无情地添加，在我看来，这是非常烦人的默认设置。

无论如何，幸运的是，如果您导航到 TortoiseSVN Settings->Advanced->FixCaseRenames，您可以将其更改为 false，它将不再自动更正大小写更改。[设置位置](http://i.stack.imgur.com/bfQaf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T09:36:36.630

如果有人在 Windows（不区分大小写的操作系统）上搜索如何在[SmartSVN中执行此操作，步骤如下：](http://www.smartsvn.com/)

1.  在浏览器中选择文件，在菜单 Modify -> Rename 并使用一些临时名称（例如在文件名末尾添加 X），提交更改
2.  在浏览器中选择文件，在菜单中修改 -> 重命名并在正确的情况下使用正确的文件名，提交更改

只有在这种情况下，文件的日志才会被保存。

# c# - MySQL 连接器/网络和 C# 的希腊字符不正确

> ID：12763459
> 
> 赞同：0
> 
> 时间：2012-10-06T20:15:08.283
> 
> 标签：c#, mysql, character-encoding

我正在尝试制作从 MySQL 数据库读取的 ac# 项目。

数据是从使用 utf-8 编码的 php 页面插入的。页面和数据都是 utf-8。

数据是自我是希腊词，如“Λεπτομέρεια 3”。

获取数据时，它看起来像“Î›ÎµÏ€Ï„Î¿Î¼ÎÏÎµÎ¹Î± 3”。

我在连接字符串中设置了 'charset=utf8' 并尝试使用 'set session character_set_results=latin1;' 询问。

当对 mysql (linux)、MySQL Workbench、用于 OpenOffice 的 MySQL 本机连接器和 OpenOffice Base 执行相同操作时，数据会正确显示。

我做错了什么或者我还能做什么？

运行查询'SELECT value, HEX(value), LENGTH(value), CHAR_LENGTH(value) FROM call_attribute;' 从我的程序内部。它返回：

值：Î›ÎµÏ€Ï„Î¿Î¼ÎÏÎµÎ¹Î± 3

十六进制（值）：C38EE280BAC38EC2B5C38FE282ACC38FE2809EC38EC2BFC38EC2BCC38EC2ADC38FC281C38EC2B5C38EC2B9C38EC2B12033

长度（值）：49

CHAR_LENGTH（值）：24

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:28:34.037

您应该尝试`SET NAMES 'utf8'`查看[此链接](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:54:41.880

您声明数据的第一个字符是大写 lambda, `Λ`。

该字符的 UTF-8 表示为[0xCE 0x9B](http://www.fileformat.info/info/unicode/char/039b/index.htm)，而 HEX() 值以[C38E 开头](http://www.fileformat.info/info/unicode/char/00ce/index.htm)，这确实是带有抑扬符的大写 I，如您的问题所示。

所以我猜原来的错误不在 PHP 配置中，并且您对“数据正确显示”的印象是错误的，并且是由于编码问题。

另请注意，在将希腊数据存储为单字节字符而不是 Unicode 时，希腊字母表只需要[Latin-7而不是 Latin-1。](http://en.wikipedia.org/wiki/ISO/IEC_8859-7)

很可能，您在这里遇到了编码问题，这意味着不同的应用程序将二进制数据解释为不同的字符集或编码。（但缺乏 PHP 和 MySQL 知识，我无法真正帮助您如何正确配置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:13:32.227

我已经通过在 /etc/my.cnf 中设置“skip-character-set-client-handshake”来解决我的问题。之后一切正常，希腊词的编码正确，显示完美。

一个缺点是我必须再次将所有数据重新输入数据库。

# php - cURL 在 Windows 任务计划程序中不起作用

> ID：12763468
> 
> 赞同：0
> 
> 时间：2012-10-06T20:16:22.950
> 
> 标签：php, windows, curl, scheduled-tasks

我有一个使用 cURL 执行某些任务的 PHP 脚本。目前，我的脚本每 10 分钟运行一次。这就是我通过 Windows 任务计划程序运行的。

> C:\wamp\bin\php\php5.4.3\php.exe -f C:\wamp\www\autoscripts\index.php

但是，由于某种原因，每当上面引用的参数通过命令行运行时，我都会收到错误“致命错误：调用未定义的函数 curl_init()”。当我通过浏览器访问该脚本时，该脚本运行良好。PHP 是否有任何理由无法通过命令行访问 cURL 扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:29:45.797

从命令行运行很可能不使用任何加载扩展的 ini 文件。从浏览器打开`phpinfo()`，将路径复制到加载的ini文件并将您的任务更改为：

```
C:\wamp\bin\php\php5.4.3\php.exe -c "C:\path\to\php.ini" -f C:\wamp\www\autoscripts\index.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:32:19.920

弄清楚了。基本上，在 WampServer 上，您需要注意两个 php.ini 文件。

*   C:\wamp\bin\php\php5.4.3\php.ini
*   C:\wamp\bin\apache\apache2.2.22\bin\php.ini

忘记了命令行使用与 Web 服务器不同的 ini 文件。:(

# iphone - 根据设备标题旋转 MKAnnotationPinView

> ID：12763469
> 
> 赞同：1
> 
> 时间：2012-10-06T20:16:28.573
> 
> 标签：iphone, annotations, mkmapview, mkpinannotationview

在我的应用程序中，我正在根据设备标题旋转 MapView，我只有一个注释，我正在旋转它的 pin 和 pinView。我的旋转方法在​​下一个函数内

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading {
if (newHeading.headingAccuracy < 0)
    return;

CLLocationDirection  theHeading = ((newHeading.trueHeading > 0) ?
                                   newHeading.trueHeading : newHeading.magneticHeading);

lastHeading = theHeading;
[self rotateImage:self.mapView duration:0.1 degrees:-theHeading];

[self rotateImage:jerusalemPinView duration:0.1 degrees:theHeading];

} 
```

旋转功能：

```
- (void)rotateImage:(UIView *)view duration:(NSTimeInterval)duration
        degrees:(double)angleDegrees
{

// Setup the animation
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:duration];
[UIView setAnimationBeginsFromCurrentState:YES];

// The transform matrix

CGAffineTransform transform =
CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(angleDegrees));
view.transform = transform;

[UIView commitAnimations];
} 
```

它正在工作，但是注释和 pinView 总是“尝试转回北方”，然后下一次当设备转身时，我的方法有效等等。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:41:38.793

旋转jerusalemPinView后，视图是否被viewForAnnotation重绘？我建议在重要方法的顶部放置一条调试行，并检查它们被调用的顺序。我的猜测是，在 viewForAnnotation 中，您创建了一个新的 jerusalemPinView，将其分配给引脚，然后调用 didUpdateHeading 并旋转它，然后再次调用 viewForAnnotation 并再次创建一个新的（未旋转的）jerusalemPinView。

# iphone - 将 IBaction 传递给另一个 ViewController

> ID：12763470
> 
> 赞同：0
> 
> 时间：2012-10-06T20:16:38.197
> 
> 标签：iphone, objective-c, ipad, iphone-sdk-4.3

我在一个 UIViewController 中有一个 IBAction 按钮，我想在另一个 UIViewController 中执行一个操作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:27:28.873

在第二个 UIViewController 中声明一个方法并从第一个控制器中的 IBAction 调用。

像这样的东西：

```
-(IBAction)myMethodFromFirstController{

SecondController *secondController = [[SecondController alloc] init];
[secondController method]; 
```

}

# c# - 确保用户在特定视图上加载了会话密钥，否则再次获取或重新登录

> ID：12763472
> 
> 赞同：0
> 
> 时间：2012-10-06T20:16:45.297
> 
> 标签：c#, asp.net, asp.net-mvc-3, session, razor

目前我的母版页顶部有这行代码

```
@{
    MyApp.Domain.Concrete.FullUserProfile fullUser = (MyApp.Domain.Concrete.FullUserProfile)HttpContext.Current.Session[Membership.GetUser().ProviderUserKey.ToString()];
} 
```

这会在缓存中获取用户的个人资料信息，但我的问题是这将始终可用吗？如果用户长时间登录怎么办。如何使他或她的信息不存储在会话中，它将再次从数据库中检索？我很难理解，因为我不知道所有这些代码是否应该在视图中，以及你是否会从后面的代码中调用方法以触发数据库调用并保存到缓存中。我不想把它放在控制器中的原因似乎是重复的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:26:33.853

你可以这样做：

```
@{
    MyApp.Domain.Concrete.FullUserProfile fullUser = null;
    if (Membership.GetUser() != null && Session[Membership.GetUser().ProviderUserKey.ToString()] != null) {
        //Logged in
        fullUser = (MyApp.Domain.Concrete.FullUserProfile)HttpContext.Current.Session[Membership.GetUser().ProviderUserKey.ToString()];
    } else {
        //Not logged in logic
    }
} 
```

或者你可以试试这个，但我不完全确定，因为我不经常使用 MembershipProvider 系统：

```
if (Page.User.Identity.IsAuthenticated)
{
    //Logged in
}
else
{
    //Not logged in
} 
```

但是，如果您这样做，您可以设置任何页面/目录所需的表单身份验证，您需要将它们登录到您的 web.config 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:34:54.017

如果您需要编写将由多个或所有控制器和/或操作使用的代码，您可以创建**过滤器**并在其中编写您需要的逻辑，最后您只需在*控制器或操作*级别应用您的过滤器。

欲了解更多信息：

[http://msdn.microsoft.com/en-us/library/dd410056(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd410056(v=vs.90).aspx)

例子：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class CustomFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // execution order: 1
        // your actions here
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        // execution order: 2
        base.OnActionExecuted(filterContext);
    }

    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        // execution order: 3
        base.OnResultExecuting(filterContext);
    }

    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        // execution order: 4
        base.OnResultExecuted(filterContext);
    }
} 
```

注意执行顺序。的成员`IActionFilter`在动作之前和动作返回一个继承自的对象之后执行`ActionResult`（但结果还没有被解析，这意味着HTML还没有生成）。此时的成员`IResultFilter`被执行，在`ActionResult`对象生成HTML之前和之后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:41:04.070

您通常会有一个 ViewModel，其中包含您需要显示的用户数据。

动作过滤器会填充数据，因为您担心重复

我不会将用户存储在会话状态中。很难保持同步。（会话和授权超时时间不同）

要检查授权，您不需要访问配置文件使用：

```
HttpContext.Current.User.Identity.IsAuthenticated 
```

# java - 比较字符串时忽略希伯来语元音

> ID：12763476
> 
> 赞同：5
> 
> 时间：2012-10-06T20:17:30.783
> 
> 标签：java, encoding, hebrew

晚上好，我希望你能帮助我解决这个问题，因为我正在努力寻找解决方案。

我有一个单词提供者，他给我希伯来语元音单词，例如 -

> 元音 - בַּיִת 不元音 - בית
> 
> 元音 - הַבַּיְתָה 不元音 - הביתה

与我的提供者不同，我的用户通常不能输入希伯来元音（我也不希望他这样做）。用户故事是用户在提供的单词中寻找单词。问题是元音词和非元音词之间的比较。由于每个都由内存中的不同字节数组表示，因此 equals 方法返回 false。

我尝试研究 UTF-8 如何处理希伯来元音，它似乎只是普通字符。

我确实想将元音呈现给用户，所以我想将字符串原样保留在内存中，但是在比较时我想忽略它们。有什么简单的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T20:37:52.300

您可以使用[Collat​​or](http://docs.oracle.com/javase/7/docs/api/java/text/Collator.html)。我不能告诉你它是如何工作的，因为它对我来说是新的，但这似乎可以解决问题：

```
public static void main( String[] args ) {
    String withVowels = "בַּיִת";
    String withoutVowels = "בית";

    String withVowelsTwo = "הַבַּיְתָה";
    String withoutVowelsTwo = "הביתה";

    System.out.println( "These two strings are " + (withVowels.equals( withoutVowels ) ? "" : "not ") + "equal" );
    System.out.println( "The second two strings are " + (withVowelsTwo.equals( withoutVowelsTwo ) ? "" : "not ") + "equal" );

    Collator collator = Collator.getInstance( new Locale( "he" ) );
    collator.setStrength( Collator.PRIMARY );

    System.out.println( collator.equals( withVowels, withoutVowels ) );
    System.out.println( collator.equals( withVowelsTwo, withoutVowelsTwo ) );
} 
```

由此，我得到以下输出：

```
These two strings are not equal
The second two strings are not equal
true
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:39:25.817

AFAIK 没有。元音是字符。甚至某些字母和点的组合也是字符。请参阅维基百科页面。

[http://en.wikipedia.org/wiki/Unicode_and_HTML_for_the_Hebrew_alphabet](http://en.wikipedia.org/wiki/Unicode_and_HTML_for_the_Hebrew_alphabet)

您只能将单词的搜索关键字存储为 05dx-05ex 范围内的字符。您可以为带有元音的单词添加另一个字段。

当然，您应该期待以下内容：

*   根据 nikkud，您应该需要考虑具有不同含义的单词。
*   您应该考虑到 י 和 ו 的“拼写错误”，这是司空见惯的。

# glsl - GLSL 相当于 HLSL 剪辑（）？

> ID：12763477
> 
> 赞同：6
> 
> 时间：2012-10-06T20:17:31.963
> 
> 标签：glsl

[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204826%28v=vs.85%29.aspx)描述了HLSL`clip()`功能。

我打算在 OpenGL 中将其用于 alpha 截止。GLSL 中的等价物是否只是

```
if (gl_FragColor.a < cutoff)
{
    discard;
} 
```

还是有一些更有效的等价物？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T20:29:36.897

OpenGL 没有这样的功能。它不需要一个。

> 还是有一些更有效的等价物？

该问题假定此条件语句的效率低于调用 HLSL 的`clip`函数。它很有可能*更*有效（尽管如此，它还是一个完全的微优化）。`clip`检查该值是否小于 0，如果是，则丢弃该片段。但是您不是针对零*进行测试；*您正在针对 进行测试`cutoff`，这可能不是 0。因此，您必须`clip`像这样调用（使用 GLSL 样式）：`clip(gl_FragColor.a - cutoff)`

如果硬件不直接支持 clip ，那么您的调用相当于`if(gl_FragColor.a - cutoff < 0) discard;`. 这是一个数学运算*和*一个条件测试。这比条件测试要慢。如果不是……驱动程序几乎肯定会重新排列您的代码以以这种方式进行条件测试。

条件会比`clip`硬件有特定支持的唯一方法要慢，`clip` *并且*驱动程序太愚蠢而无法转换`if(gl_FragColor.a < cutoff) discard;`为`clip(gl_FragColor.a - cutoff)`. 如果驱动程序那么愚蠢，如果它缺乏基本的针孔优化，那么您将面临比这*更大的*性能问题要处理。

简而言之：不用担心。

# hadoop - 输出收集器如何工作？

> ID：12763478
> 
> 赞同：0
> 
> 时间：2012-10-06T20:17:35.927
> 
> 标签：hadoop, mapreduce, reduce, partitioner

我试图分析默认的 map reduce 作业，它没有定义 mapper 或 reducer。即一个使用 IdentityMapper 和 IdentityReducer 为了让自己清楚我刚刚写了我的身份缩减器

```
public static class MyIdentityReducer extends MapReduceBase implements Reducer<Text,Text,Text,Text> {
        @Override
        public void reduce(Text key, Iterator<Text> values,
                OutputCollector<Text, Text> output, Reporter reporter)
                throws IOException {
            while(values.hasNext()) {
                Text value = values.next();
                output.collect(key, value);
            }
        }   
    } 
```

我的输入文件是：

```
$ hadoop fs -cat NameAddress.txt
Dravid Banglore
Sachin Mumbai
Dhoni Ranchi
Dravid Jaipur
Dhoni Chennai
Sehwag Delhi
Gambhir Delhi
Gambhir Calcutta

I was expecting
Dravid Jaipur
Dhoni Chennai
Gambhir Calcutta
Sachin Mumbai
Sehwag Delhi

I got
$ hadoop fs -cat NameAddress/part-00000
Dhoni   Ranchi
Dhoni   Chennai
Dravid  Banglore
Dravid  Jaipur
Gambhir Delhi
Gambhir Calcutta
Sachin  Mumbai
Sehwag  Delhi 
```

我的观点是，由于聚合是由程序员在 reducer 的 while 循环中完成的，然后写入 outputcollector。我的印象是传递给 outputcollector 的减速器的键总是唯一的，因为如果我不聚合，最后一个键的值会覆盖前一个值。显然不是这样。有人可以给我一个更好的输出收集器，它是如何工作的以及它如何处理所有的键。我在 hadoop src 代码中看到了许多 outputcollector 的实现。我可以编写自己的输出收集器来完成我所期望的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:23:14.017

键对于reducer 是唯一的，并且对reducer 的每次调用都有一个唯一的键值和与该键关联的所有值的可迭代。您正在做的是迭代所有传入的值并写出每个值。

因此，在您的情况下，调用可能少于数据并不重要。您仍然最终会写出所有值。

# android - 非法状态异常在 Eclipse 中使用 ADT 找不到方法？

> ID：12763480
> 
> 赞同：0
> 
> 时间：2012-10-06T20:17:43.883
> 
> 标签：android, eclipse, adt

我创建了两个活动并添加了一个 onClick 按钮以从第一个活动转到第二个活动，效果很好......但是当我尝试向第二个活动添加一个“返回”按钮以返回第一个活动时当我点击返回时在模拟器中运行它说应用程序已停止工作并且logcat如下

```
10-07 01:28:13.385: E/AndroidRuntime(628): FATAL EXCEPTION: main
10-07 01:28:13.385: E/AndroidRuntime(628): java.lang.IllegalStateException: Could not                         find a method back(View) in the activity class com.example.app2.MainActivity for onClick     handler on view class android.widget.Button
10-07 01:28:13.385: E/AndroidRuntime(628):  at android.view.View$1.onClick(View.java:3578)
10-07 01:28:13.385: E/AndroidRuntime(628):  at android.view.View.performClick(View.java:4084)
10-07 01:28:13.385: E/AndroidRuntime(628):  at android.view.View$PerformClick.run(View.java:16966)
10-07 01:28:13.385: E/AndroidRuntime(628):  at android.os.Handler.handleCallback(Handler.java:615)
10-07 01:28:13.385: E/AndroidRuntime(628):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-07 01:28:13.385: E/AndroidRuntime(628):  at android.os.Looper.loop(Looper.java:137)
10-07 01:28:13.385: E/AndroidRuntime(628):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-07 01:28:13.385: E/AndroidRuntime(628):  at java.lang.reflect.Method.invokeNative(Native Method) 
```

这是我的代码中的一个片段 mainactivity.java

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

    public void clubs(View v1) {
            setContentView(R.layout.activity_display_clubs);
    } 
```

clubsactivity.java

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

public void back(View v) {
    setContentView(R.layout.activity_main);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:56:33.677

这不是开始新活动的正确方法。

您只需更改屏幕上的视图。

开始一项新活动：

1.  添加第二个活动 tom manifist.xml 文件
2.  在俱乐部功能（按钮单击操作）添加此代码

    Intent intent = new Intent(CurrentActivity.this, SecondActivity.class); 开始活动（意图）；

而且您不需要在第二个活动上使用后退按钮。android有一个后退按钮，这不是iOS。

你必须阅读更多关于android开发的信息。

# java - Java：如何用导入的 PNG 文件替换“椭圆”或“矩形”图形？

> ID：12763483
> 
> 赞同：2
> 
> 时间：2012-10-06T20:18:10.850
> 
> 标签：java, image, import, replace, png

我进口了：

```
 import javax.swing.ImageIcon; 
```

我使用此代码导入 PNG 文件。（我知道我可以轻松创建一个黑色方块，但它是将任何图像导入到我想要的游戏中）。

```
Image player1 = Toolkit.getDefaultToolkit().createImage("Users/Documents/JavaGameImages/Tag/BlackSquare.png"); 
```

我稍后尝试调用此图像，但图像没有出现在窗口中。（假设 myX = 100 和 myY = 100）

```
public void paint(Graphics g) {         
        g.setColor(BackgroundColor);
        g.fillRect(WindowWidth, WindowHeight, 1000, 1000); 
```

//////////////////// 下面的代码是我遇到问题的地方：

```
 g.drawImage(player1, myX, myY, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:30:51.743

当您构建用于分发的代码时，您可能希望将图像与类文件一起放入 jar 文件中。我所做的是将它放在与访问它的类相同的目录中，然后我使用 getClass().getResource(fileName) 访问它，就像来自纹理背景边框的这段代码一样：

```
final Toolkit toolKit  = Toolkit.getDefaultToolkit();
URL imgURL = getClass().getResource(textureFileName);
if (imgURL != null)
{
  Image tmpImage = toolKit.createImage(imgURL);
  toolKit.prepareImage(tmpImage, -1, -1, 
            new ImageObserver() {
    public boolean imageUpdate(Image updatedImage, int infoFlags, int x, 
                               int y, int width, int height)
    {
      if ((infoFlags & ImageObserver.ALLBITS) == ImageObserver.ALLBITS)
      {
        int           w               = updatedImage.getWidth(null);
        int           h               = updatedImage.getHeight(null);
        BufferedImage backgroundImage = new BufferedImage(w, h, 
                                            BufferedImage.TYPE_INT_ARGB_PRE);
        Graphics2D    g = backgroundImage.createGraphics();
        g.drawImage(updatedImage, 0, 0, null);
        g.dispose();

        Rectangle rect = new Rectangle(0, 0, w, h);
        texture = new TexturePaint(backgroundImage, rect);

        return false;
      }

      return true;
    }
  });
} 
```

# php - 提交后更新显示旧数据的查询

> ID：12763489
> 
> 赞同：0
> 
> 时间：2012-10-06T20:18:31.473
> 
> 标签：php, mysql

我有以下代码：

```
$sql = mysql_query("UPDATE users SET name='$name' WHERE email='$email'") or die(mysql_error());
echo "<h4>Your information has been updated</h4><br />"; 
```

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <p>
        <label for='name'>Name</label><br /><br />
        <input class="input-text required" name="name" type="text" value="<?php echo $row[name]; ?>" />
    </p>
    <p><input type="submit" name="update" value="Update" /></p>
</form> 
```

单击更新后，它会更新数据库中的信息，但`<?php echo $row['name']; ?>`仍显示旧值。只有在刷新页面后才会显示更新的信息。我可以在更新后通过回显元刷新来刷新页面，但我希望它仍然显示回显“您的信息已更新”，如果我将其设置为刷新，则不会发生这种情况。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:21:04.880

您将需要重新查询数据库以重新填充`$row`或将`$row`变量显式设置为您的值（为了安全起见，我建议重新填充它）。

或者`echo $name`，而不是`$row[name]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:21:58.887

数据库的更新不是数据的新选择。

您有 2 个选项：

*   更新后，重新选择数据
*   不是将行写回表单，而是写回发布的值

# blackberry-playbook - 试图在黑莓剧本上播放声音

> ID：12763500
> 
> 赞同：0
> 
> 时间：2012-10-06T20:19:52.670
> 
> 标签：blackberry-playbook, playbook, blackberry-qnx

当倒计时到期时，我正在尝试在我的剧本应用程序中播放简单的哔声。我设法让倒计时正常工作，但我无法让我的声音正常工作。

这就是我播放声音的方式。

```
[Embed(source="sounds/beep.mp3")] private var CustomSound:Class;
...
...
...
var sound : Sound = new CustomSound() as Sound;
sound.play(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:34:41.957

如果只是哔声，您可以执行以下操作：

```
// play some sound
var fx:AudioEffectsManager = new AudioEffectsManager();
fx.play(AudioEffect.ALARM_BATTERY); 
```

只需更换

```
AudioEffect.ALARM_BATTERY 
```

由您选择的声音。

# c# - 一个 sql 连接的几个查询

> ID：12763501
> 
> 赞同：1
> 
> 时间：2012-10-06T20:19:55.060
> 
> 标签：c#

```
private void button5_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
    SqlCommand cmd = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='1'", conn);
    conn.Open();
    label1.Text = cmd.ExecuteReader().ToString();
    conn.Close();

    SqlConnection conn1 = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
    SqlCommand cmd1 = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='2'", conn1);
    conn1.Open();
    label2.Text = cmd1.ExecuteReader().ToString();
    conn1.Close();

    SqlConnection conn2 = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
    SqlCommand cmd2 = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='3'", conn2);
    conn2.Open();
    label3.Text = cmd2.ExecuteReader().ToString();
    conn2.Close();
} 
```

我从数据库中获取标签文本。但是在每次获取操作中，我都会打开一个连接以编写查询。这是我在 C# 中的第一个项目。如何在不打开许多连接的情况下编写一些查询？谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:36:11.207

1.  用于`using-statement`确保即使在异常情况下也能关闭连接。当类实现时，您应该始终使用它`IDisposable`。
2.  当[`Connection-Pooling`](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)您调用`con.Open()`或时，您并不总是打开和关闭连接`con.Close()`。实际上`Close`只是使连接可重用，否则它将被标记为“正在使用”。因此，最好尽快关闭连接。

您可以使用 a`DataAdapter`来填充`DataTable` 一个查询。然后您将拥有所有三个记录并可以获取您需要的内容：

```
using (var conn = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True"))
{
    var sql = "select label_sh from label_text where label_form_labelID IN('1','2','3') and label_form='2'";
    using (var da = new SqlDataAdapter(sql, conn))
    {
        da.Fill(table); // you don't need to open a connection when using a DataAdapter
    }
}

label1.Text = table.AsEnumerable()
                   .Single(r => r.Field<int>("label_form_labelID") == 1)
                   .Field<String>("label_sh");
label2.Text = table.AsEnumerable()
                   .Single(r => r.Field<int>("label_form_labelID") == 2)
                   .Field<String>("label_sh");
label3.Text = table.AsEnumerable()
                  .Single(r => r.Field<int>("label_form_labelID") == 3)
                  .Field<String>("label_sh"); 
```

请注意，您需要添加`using System.Linq;`for `Linq-To-DataTable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:26:25.563

无需每次都关闭连接。您甚至可以在示例中重用 SqlCommand 变量。

```
private void button5_Click(object sender, EventArgs e)
        {
            SqlConnection conn = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");

            SqlCommand cmd = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='1'", conn);
            conn.Open();
            label1.Text = cmd.ExecuteReader().ToString();

            cmd.CommandText ="select label_sh from label_text where label_form='2' and label_form_labelID='2'";
            label2.Text = cmd.ExecuteReader().ToString();

            cmd.CommandText = "select label_sh from label_text where label_form='2' and label_form_labelID='3'"
            label3.Text = cmd.ExecuteReader().ToString();

            conn.Close();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:27:09.827

您可以重复使用`SqlConnection`所有`SqlCommand`对象，完成后您可以关闭`SqlConnection`：

```
SqlConnection conn = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
conn.Open();

SqlCommand cmd = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='1'", conn);    
label1.Text = cmd.ExecuteReader().ToString();

SqlCommand cmd1 = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='2'", conn);    
label2.Text = cmd1.ExecuteReader().ToString();  

SqlCommand cmd2 = new SqlCommand("select label_sh from label_text where label_form='2' and label_form_labelID='3'", conn);   
label3.Text = cmd2.ExecuteReader().ToString();

conn.Close(); 
```

但是，创建一个 SQL 查询来检索标签的性能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T20:31:11.110

好吧，我建议你只创建一个到 de DB 的连接

```
 SqlConnection conn = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True"); 
```

然后你可以使用 SQL IN 运算符只做一个这样的查询

```
select label_sh 
from label_text 
where label_form='2' and label_form_labelID IN ('1','2','3') 
```

[SQL IN 运算符](http://msdn.microsoft.com/en-us/library/ms177682.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T20:46:29.730

只是展示了另一种方法，它只需要一个连接、一个命令和一个数据读取器。

虽然 Tim Schmelter 方法在您的情况下是最有效的，但这是 a`NextResult`方法的演示`DataReader`。

注意`SqlCommand`包含的 3 个子查询中的 sql 查询是如何用分号分隔的。每当您调用`NextResult`时，您都会转到下一个查询。

```
using (var connection = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True"))
using (var command = new SqlCommand(
@"select label_sh from label_text where label_form='2' and label_form_labelID='1';
select label_sh from label_text where label_form='2' and label_form_labelID='2';
select label_sh from label_text where label_form='2' and label_form_labelID='3'", connection))
using (var reader = command.ExecuteReader())
{
    var label1 = reader["label_sh"];

    reader.NextResult();

    var label2 = reader["label_sh"];

    reader.NextResult();

    var label3 = reader["label_sh"];
} 
```

# python - 在 Python 中，如何通过任意增量进行 for 循环计数？

> ID：12763505
> 
> 赞同：1
> 
> 时间：2012-10-06T20:20:29.490
> 
> 标签：python, loops, for-loop

范围内的功能对我不起作用：

```
for x in range(0, 10):
    print str(x) 
```

如果我想按两位数（或其他离散增量）怎么办？在 Java 或 C 中，这很简单，但在 Python 中，您还可以在每次循环迭代时设置计数器的增量吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T20:21:18.750

range 函数将步长值作为第三个参数..

```
for x in range(0, 10, 2):
    print str(x) 
```

# android - android EditText android:textDirection

> ID：12763508
> 
> 赞同：6
> 
> 时间：2012-10-06T20:20:51.933
> 
> 标签：android, android-edittext, direction

我想始终将 EditText 设置为 LTR，我该怎么做？android:textDirection 似乎确实是答案，我无法使用该指令编译项目

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T20:34:45.840

对editText使用重力

```
android:gravity="right" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:49:15.900

将 \u202D (LTR OVERRIDE) 添加到字符串的开头就可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T10:35:03.117

使用 editText 的方向

```
android:textDirection="ltr" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-29T14:04:15.827

将这些添加到您的`EditText`：

```
android:gravity="left"
android:textDirection="ltr" 
```

注意：`android:textDirection`需要 API 级别 17

# packet-sniffers - 为什么可以进行数据包嗅探？

> ID：12763512
> 
> 赞同：3
> 
> 时间：2012-10-06T20:21:15.440
> 
> 标签：packet-sniffers, man-in-the-middle, network-analysis

我无法理解网络上的任何人如何使用数据包嗅探器。

我对网络的工作原理知之甚少，但让我这样说吧：假设邮递员过来把包裹送到我家门口。为什么我能够通过他所有的其他包裹来步枪并环顾四周？邮递员不应该只把属于我的包裹递给我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T23:58:34.287

引用 William Pursell 的评论，他应该做出回答并且应该扩大：

> 邮递员不会把信送到你家门口。相反，他打开你的邮件并大声喊道：“这封信是给<name>的。其他人不应该听”，然后继续大声朗读这封信。——</p>

在最初的以太网中，所有主机都连接到一条共享电缆；如果主机想向另一台主机发送消息，它将在共享电缆上传输数据包，并带有带有另一台主机目标以太网地址的以太网报头。 理论上，电缆上的*所有主机都可以看到数据包。*（这是在一个安全性不太受关注的时代；对于需要关注安全性的情况，数据包以其他主机可以相当容易解密但其他主机必须以其他更困难的方式解密的方式加密时尚。）

此外，可以将数据包发送到“广播”以太网地址（全为 1）或“多播”以太网地址（配置多个主机来处理）；广播数据包供以太网上的所有主机查看，多播数据包供地址的“多播组”中的所有主机查看。

通常，以太网适配器会忽略未发送到其以太网地址、广播以太网地址或配置为接收数据包的多播地址的数据包。然而，大多数都可以进入“混杂”模式，将*所有*数据包传递给主机；该模式用于数据包嗅探器。

大多数当前的以太网都是“交换的”；代替共享电缆，有一个以太网交换机，主机通过电缆插入交换机。发送到特定主机的以太网地址的数据包只会从该主机的交换机端口发送出去（除非有人将主机配置为具有发送所有流量的“镜像端口”，或者除非交换机尚未确定哪个端口是该以太网地址的端口）。广播数据包被发送到所有端口，多播数据包可能被发送到所有端口，或者，如果交换机可以确定，则发送到那些为所讨论的多播地址配置了适配器的端口。

Wi-Fi 网络是类似的，但它们通常受到加密保护，因为与携带笔记本电脑相比，携带笔记本电脑并将其置于“监控模式”以嗅探给定频道更容易，将交换机配置为具有镜像端口（或使用其他机制来访问流量），然后将笔记本电脑插入交换机上的相应端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:23:23.983

一般来说，使用开关是正确的。但是，拥有交换机的人可以随意拦截您的流量（在您的示例中，这将是邮件服务）。此外，有时交换机可能会被骗重新路由流量（有人代表您接受包裹，然后通过它）。

此外，需要广播某些类型的数据包。例如 ARP 数据包（其中一台计算机正在请求由 IP 指定的另一台计算机的以太网地址）被广播到所有以太网地址，因此可以被嗅探。

一般来说，中间人需要连接链中的某个人受到损害。例如，您的 ISP 或他们从中购买传输的公司可能会造成中间人攻击。（这也是为什么专制政权的国家的安全如此困难，他们控制着互联网，因此可以随意嗅探/中间人攻击）。这也可以通过破坏您用来将您指向另一个站点的 DNS 服务器来完成，该站点可以获取您的数据并将您的数据（或其修改版本）转发到真实站点。

在过去的好日子里，集线器相当普遍（甚至更老，每个人都共用一个同轴电缆）。在这种情况下，它更像是包裹掉在第一扇门上，乘员查看它是否是他们的，如果不是，则将其传递，如果是，则复制里面的内容并将包裹传递。换句话说，数据包嗅探实际上很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:33:14.237

是的或更简单的数据包嗅探方式不好，当您登录网页时，您通常使用秘密密码来验证这是您。

但如果我们有数据包嗅探器，她/他也可以看到并读取您的密码。并以您的身份登录网页。

或者她/他也可以在路上修改你的数据来做其他事情。

![在此处输入图像描述](../Images/e8ad16dd312124d1016ecbe3de482e79.png) 而在互联网的情况下，通常的方式更多是使用一台计算机从在这种情况下的 Alice 发送消息到 Alice 银行。并且在每台计算机（图像右侧）中，如果用户想要在此图像中编辑消息，则可以使用它。

Eva 用于将消息传递给 Alice 银行，但她可以阅读消息/订单并在某些情况下对其进行编辑以使银行认为 Alice 想要将钱转给 Eva 而不是 Bob。

简而言之，为了保护我们免受 eva 修改消息，我们可以使用散列算法或密码算法。

# actionscript-3 - 使用 as3 在 swf 中嵌入字体

> ID：12763516
> 
> 赞同：0
> 
> 时间：2012-10-06T20:21:32.890
> 
> 标签：actionscript-3, fonts, embed

我有一个项目使用 flash（以及 AIR for android 和最终的 iOS）来翻译一些短语。虽然大多数字体都很好，但在用户选择语言后我必须加载一些字体。一年多以前，我生成了几个 swf 文件（孟加拉语和乌尔都语）并将它们放在我的 Web 服务器上。然后 Flash 应用程序在需要时加载它们，一切正常......但是，当我即将实施该项目时，我认为我应该为管道中的其他语言生成 swf 文件，但由于某种原因我无法管理它！不用说，我已经为我所做的两种字体放错了（整理）原始 AS3 源代码。

```
package   
{  
    import flash.display.Sprite;  
    import flash.events.Event;  
    public class ArabicF extends Sprite   
    {       
        [Embed(source = "trado.ttf",
        fontName = "ArabicX",
        fontFamily = "ArabicY",
        fontWeight = "normal",
        fontStyle = "normal",
        mimeType = "application/x-font",
        advancedAntiAliasing="true",
        embedAsCFF="true")]  
        public static const ArabicZ:Class;  
    }   
} 
```

这已经从一个更简单的形式扩展，因为我添加了一些东西来让它工作，我必须尝试所有真假排列。我加载 swf 正常，但无法提取类。我在 swf 类和参数之前嵌入的两种字体都具有相同的名称并且它们工作正常（即 Urdu.swf 然后稍后： var FontClass:Class = evt.target.applicationDomain.getDefinition("Urdu") as Class;然后 Font.registerFont(FontClass.Urdu);
在使用上述 Arabic.swf 调用 .as 应用程序中我尝试

```
trace("1 Arabic "+evt.target.applicationDomain.hasDefinition("ArabicF"));  
trace("2 Arabic "+evt.target.applicationDomain.hasDefinition("Arabic"));  
trace("3 ArabicX "+evt.target.applicationDomain.hasDefinition("ArabicX"));  
trace("4 ArabicY "+evt.target.applicationDomain.hasDefinition("ArabicY"));  
trace("5 ArabicZ "+evt.target.applicationDomain.hasDefinition("ArabicZ")); 
```

但都返回假

PS还尝试使用fontswf.bat生成Arabic.swf，这似乎再次生成了一个非常相似的swf文件，但我无法从中提取类

PPS 我使用的是 flashdevelop，字体 swf 设置为 AS3 标准项目编译器选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:31:05.650

我不使用 Flash Develop，但也许我可以从我的实现中提供一些观点。

* * *

如果我想嵌入 Arial，嵌入 swf 将“导出为 ActionScript”嵌入字体。在其文档类中，使用[`registerFont()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/Font.html#registerFont%28%29)如下：

```
Font.registerFont(Arial); 
```

与其他所有 swf 一样，您可以使用 a[`Loader`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)将其导入运行时，此时该字体将可用于您的全局表。[您可以使用enumerateFonts()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts%28%29)查询已注册字体的完整列表。

```
var fontList:Array = Font.enumerateFonts();
for (var i:int = 0; i < fontList.length; i++) {
    trace(fontList[i].fontName);
} 
```

假设我们有一个名为“txt”的 TextField，那么您可以[`setTextFormat()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextFormat.html)像这样实现该字体：

```
var format:TextFormat = new TextFormat();
format.font = "Arial";
txt.embedFonts = true;
txt.antiAliasType = AntiAliasType.ADVANCED;
txt.setTextFormat(format);
txt.defaultTextFormat = format; 
```

Adobe 关于使用[最后两个设置](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextFormat.html)的免责声明：

> “当您使用 TextField.defaultTextFormat 属性或 TextField.setTextFormat() 方法将 TextFormat 对象应用于文本字段时，只会应用其定义的属性。在向 TextField 添加文本之前，请使用 TextField.defaultTextFormat 属性应用格式设置，和 setTextFormat() 方法在向 TextField 添加文本后添加格式。”

正如我之前所说，我的工作流程不使用 Flash Develop，而是使用 Flash IDE 将字体嵌入到 swfs 中。您的结果可能会有所不同，但请注意您必须设置`embedFonts`为 true，否则它不会响应您嵌入的字体。我以前在这个问题上掉过头发。

希望有帮助。干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:32:19.603

好的万一其他人遇到类似的问题，这是答案的第一阶段（真的是我原来问题的答案）仍然必须理清如何让字体在 flash.font.engine 设备中使用！

关键部分是：

第 1 点。嵌入字体 swf 的名称必须与调用脚本中注册的任何名称不冲突。离奇和（据我所知）无证。即我有一个通过 xml 服务上传到 xml 对象的语言列表，其中包括例如“英语”，但是字体加载在我将可加载字体文件变为“EnglishF.swf”之前不起作用。显而易见的选择只是“ English.swf' 失败。所以我嵌入的字体源现在被称为 EnglishF.swf 并且内容如下：

```
package 
{
import flash.display.Sprite;
import flash.text.Font;
import flash.system.Security;

Security.allowDomain("*");
/**
 * ...
 * @author patrick
 */
public class EnglishF extends Sprite 
{       
    [Embed(source = "Kingthings Exeter.ttf",
        fontName = "EnglishF",
        fontFamily = "EnglishF",
        fontWeight = "normal",
        fontStyle = "normal",
        mimeType = "application/x-font",
        advancedAntiAliasing="true",
        embedAsCFF="true")]
        public static var myFont:Class;
}   
} 
```

并且使用脚本是：

```
private function fontLoaded(evt:Event):void { 
        var FontClass:Class
        if (evt.target.applicationDomain.hasDefinition(font1Name)) FontClass = evt.target.applicationDomain.getDefinition(font1Name) as Class;
        else if (evt.target.applicationDomain.hasDefinition(font2Name)) FontClass = evt.target.applicationDomain.getDefinition(font2Name) as Class;
        try {
            Font.registerFont(FontClass.myFont);
            trace("successfully loaded " + FontClass);
        } catch (err:Error) { 
            trace("couldn't register font "+FontClass.myFont+" =>"+err);
        }
    } 
```

嵌入式脚本中关于安全性的行是因为第 2 点：registerFont 不能跨域工作。事实上 Security.allowDomain() 没有工作，为了调试它，我不得不在 PC 上复制/粘贴 swf 文件并相应地更改 loader.load(URLRequest())

仍然存在一个问题，尽管该字体已注册并声称与 flash.text.engine TextElement 要求兼容，但仍无法使用，如下所示：

```
 _tl = new Array();

        var block:TextBlock = new TextBlock();
        var font:FontDescription = new FontDescription(fontName);
        var formt:ElementFormat = new ElementFormat(font, fontSize);
//following gives 'true EnglishF'
trace(FontDescription.isFontCompatible(fontName,"normal","normal"), formt.fontDescription.fontName);
        formt.color = colr;
        var span:TextElement = new TextElement(text, formt);
        block.content = span;

        _tl[0] = null;
        _tl[0] = block.createTextLine(null, width);
        var tl:TextLine;
// after here justification and addition lines 
```

如果以及当我弄清楚为什么这不起作用时，我会发布一些东西（除非有人为我这样做！）

# php - 需要帮助.. php 肥皂

> ID：12763518
> 
> 赞同：0
> 
> 时间：2012-10-06T20:21:38.850
> 
> 标签：php, xml, soap

我有一个 xml 文档，我需要通过帮助 php 来获取 name 属性的值。xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:GetGoodsTreeResponse xmlns:ns2="http://b2b.alta.com.ge" xmlns:ns3="http://192.168.0.10/b2b">
         <ns3:GoodsTree level="0">
            <item id="010000000017337" level="0" name="COMPUTERS" is_open="N">
               <item id="015000000030431" level="1" name="ALTA" is_open="Y">
                  <item id="015000000030443" level="2" name="Zakaznoe Izdelie" is_open="N"/>
                  <item id="015002000031034" level="2" name="ATOM" is_open="N"/>
                  <item id="015005000030453" level="2" name="Celeron" is_open="N"/>
                  <item id="015010000030432" level="2" name="Dual Core" is_open="N"/>
                  <item id="015150000030778" level="2" name="i3" is_open="N"/>
                  <item id="015220000030775" level="2" name="i5" is_open="N"/>
                  <item id="015300000031827" level="2" name="i7" is_open="N"/>
               </item>
               <item id="010001005030300" level="1" name="Apple" is_open="N"/>
               <item id="010001001033496" level="1" name="Asus" is_open="N"/>
               <item id="010001001015793" level="1" name="Fujitsu" is_open="N"/>
               <item id="010001002015166" level="1" name="HP Compaq" is_open="N"/>
            </item>
          </ns3:GoodsTree>
      </ns2:GetGoodsTreeResponse>
   </S:Body>
</S:Envelope> 
```

请帮助我，我不知道该怎么做..对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:29:31.273

您可以使用`DOMDocument`解析该 XML 并获取所有项目`DOMXpath`，然后循环所有项目并根据位置（`id`= 0，`name`= 2）获取属性，然后创建一个新数组，该数组将包含所有项目 ID 及其名称：

```
$dom = new DOMDocument;
$dom->loadXML($xml);

$xpath = new DOMXPath($dom);
$xpath->registerNamespace('S', 'http://schemas.xmlsoap.org/soap/envelope/');

$items = array();

$el = $xpath->query('//item');
foreach($el as $item){
    $attributes = $item->attributes; 
    $items[$attributes->item(0)->value] = $attributes->item(2)->value;
}

var_dump($items); // $items will be an array with item id and it's value will be item name 
```

[键盘示例](http://codepad.org/V0HlCzbx)

# algorithm - 复杂性理论排序算法

> ID：12763524
> 
> 赞同：0
> 
> 时间：2012-10-06T20:21:59.733
> 
> 标签：algorithm, complexity-theory, time-complexity, calculus

我正在学习复杂性理论的课程，所以它需要一些我有问题的数学背景。所以当我试图做一些练习时，我陷入了下面的例子

```
1)  for (i = 1; i < n; i++) {
2)      SmallPos = i;
3)      Smallest = Array[SmallPos];
4)      for (j = i+1; j <= n; j++)   
5)          if (Array[j] < Smallest) {
6)              SmallPos = j;
7)              Smallest = Array[SmallPos]  
            }   
8)       Array[SmallPos] = Array[i];
9)       Array[i] = Smallest;
    } 
```

因此，总计算时间为：

```
T(n)    = (n) + 4(n-1) + n(n+1)/2 – 1 + 3[n(n-1) / 2]
        = n  + 4n - 4 + (n^2 + n)/2 – 1 + (3n^2 - 3n) / 2
        = 5n - 5 + (4n2 - 2n) / 2
        = 5n - 5 + 2n^2 - n
        = 2n^2 + 4n - 5 
        = O(n^2) 
```

**以及我对第 4 行分析到n(n+1)/2 – 1**和第 5 **3[n(n-1) / 2]**行的不理解或困惑 。我知道**正序列的总和是 =n(first+last)/2**，但是当我尝试按照我的理解计算它时，它给了我不同的结果。我计算第 4 行，所以它应该是**=n((n-1)+2)/2**根据**n(first+last)/2**，但这里是**n(n+1)/2 – 1**。和**3[n(n-1) / 2]**一样......我也不明白

这也是分析中写的内容，如果有人可以向我解释，它会有所帮助，

语句 1 执行 n 次 (n - 1 + 1)；语句 2、3、8 和 9（每个表示 O(1) 时间）分别执行 n - 1 次，每次通过外循环时执行一次。在 i = 1 的第一次循环中，语句 4 被执行 n 次；语句 5 执行 n - 1 次，假设最坏的情况是数组的元素按降序排列，语句 6 和 7（每个 O(1) 时间）执行 n - 1 次。

在 i = 2 的第二次通过外部循环时，语句 4 被执行 n - 1 次，语句 5、6 和 7 被执行 n - 2 次，依此类推。因此，语句 4 被执行 (n) + (n -1) +... + 2 次，语句 5、6 和 7 被执行 (n-1) + (n-2) + ... + 2 + 1 次。第一个和等于 n(n+1)/2 - 1，第二个和等于 n(n-1)/2。

因此，总计算时间为：

```
T(n)    = (n) + 4(n-1) + n(n+1)/2 – 1 + 3[n(n-1) / 2]
        = n  + 4n - 4 + (n^2 + n)/2 – 1 + (3n^2 - 3n) / 2
        = 5n - 5 + (4n2 - 2n) / 2
        = 5n - 5 + 2n^2 - n
        = 2n^2 + 4n - 5 
        = O(n^2) 
```

这是包含此示例的文件的链接： [http ://www.google.com.eg/url?sa=t&rct=j&q=Consider+the+sorting+algorithm+shown+below.++Find+the+number+ of+指令+执行+&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http%3A%2F%2Fgcu.googlecode.com%2Ffiles%2FAnalysis%2520of%2520Algorithms%2520I.doc&ei=3H5wUNiOINDLswaO3ICYBQ&usg=AFQjCNEBqgrtQldfp6eqdfSYEFKOeKOg](http://www.google.com.eg/url?sa=t&rct=j&q=Consider+the+sorting+algorithm+shown+below.++Find+the+number+of+instructions+executed+&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http%3A%2F%2Fgcu.googlecode.com%2Ffiles%2FAnalysis%2520of%2520Algorithms%2520I.doc&ei=3H5wUNiOINDLswaO3ICYBQ&usg=AFQjCNEBqgrtQldfp6eqdfSY_EFKOe76yg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:08:50.283

第 4 行：正如分析所说，它是执行`n+(n-1)+...+2`次数。这是`(n-1)`项的总和。在您使用的公式中，`n(first+last)/2`,`n`表示**项数**。如果您将公式应用于您的`n-1`术语序列，那么它应该是`(n-1)((n)+(2))/2=(n²+n-2)/2=n(n+1)/2-1`.

第 5 行：可以使用相同的公式。正如分析所说，您必须计算`(n-1)+...+1`. 这是`n-1`项的总和，第一个和最后一个是`n-1`and `1`。总和由 给出`(n-1)(n-1+1)/2`。因子 3 来自 3 行 (5,6,7)，每行都完成`(n-1)(n)/2`了

# sockets - 将数据分成多个 TCP 段

> ID：12763526
> 
> 赞同：0
> 
> 时间：2012-10-06T20:22:19.550
> 
> 标签：sockets, networking, tcp, network-programming

当我使用 send 或 write 系统调用将套接字上的数据发送到目标节点时，内核/tcp 是否被迫使用同一 TCP 段中的整个缓冲区？它可以分成多个 TCP 段吗？

其次，IP 是否在单个 IP 数据包上复用多个 TCP 段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:29:00.947

TCP 是一种*面向流*的协议。不能保证（实际上恰恰相反）单个`write`或`send`将导致单个 IP 数据包。类似地，`read`最终可能会接收到从多个 IP 数据包收集的数据。

多个 TCP 流永远*不会*合并到单个 IP 数据包中。

# ios - 执行由 UITableViewCell 调用的 Segue

> ID：12763529
> 
> 赞同：3
> 
> 时间：2012-10-06T20:22:50.053
> 
> 标签：ios, uitableview, uiviewcontroller, action, segue

我在自定义表格视图单元格中有一些 UIButtons，当按下时我希望它们在单元格所在的表格视图所在的视图控制器中调用 segues。我现在正在做的是声明这样的操作：-（无效）行动；

在表视图所在的类中。然后我从单元格中调用该操作，如下所示：

```
ViewController *viewController = [[ViewController alloc] init];
[viewController action]; 
```

但是，当调用该操作时，它表示视图控制器没有这样的 segue，我知道这是不正确的。从视图控制器本身调用“动作”可以完美地工作，而不是从单元格中调用。

此外，这是执行 segue 的代码：

```
-(void)action {
     [self performSegueWithIdentifier:@"action" sender:self];
} 
```

我怎样才能使这项工作？

任何建议表示赞赏。

**更新**：

我只是试图在单元格上设置一个代表，如下所示：

Cell的头文件：@class PostCellView；

```
@protocol PostCellViewDelegate
-(void)action;
@end

@interface PostCellView : UITableViewCell <UIAlertViewDelegate, UIGestureRecognizerDelegate>

@property (weak, nonatomic) id <PostCellViewDelegate> delegate; 
```

在单元格的主文件中，我将操作称为：[self.delegate action];

在承载表格视图的视图的标题中，我像这样导入单元格：#import "PostCellView.h"

```
@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, PostCellViewDelegate> 
```

然后在该视图的主文件中，我有单元格操作：

```
-(void)action {

    [self performSegueWithIdentifier:@"action" sender:self];

} 
```

但我检查过，该动作从未执行过。当我从单元格调用操作时我记录了，我在操作本身上放置了一个 NSLog，从单元格调用它的日志有效但不是操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:37:56.673

我认为您的问题在于`ViewController *viewController = [[ViewController alloc] init]; [viewController action];` 您正在启动一个新的 ViewController 并且没有获取单元所在的当前 ViewController。

也许您可以在单元格上设置一个委托，以便单元格具有对 viewController 的引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:45:30.420

创建按钮并以编程方式调用其处理程序的简单方法是

```
UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setFrame:CGRectMake(100, 100, 80, 40)];
[button addTarget:self action:@selector(buttonClick:) forControlEvents:UIControlEventTouchDown];
[self.view addSubview:button]; //self.view is the view on which you want to add button 
```

并且它的处理程序应该在你的实现文件中这样定义：

```
-(void)buttonClick:(id)sender{
    NSLog(@"button clicked");
    // your code on click of button 
} 
```

您可以查看[iOS 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)。

希望这将帮助您找出您的问题。:)

# jquery-mobile - 加载页面后更改页面，变量已发布

> ID：12763530
> 
> 赞同：1
> 
> 时间：2012-10-06T20:23:01.367
> 
> 标签：jquery-mobile

我想在加载页面之后触发一个更改页面。下面是我使用的代码。提交后，将在外部站点（使用 loadPage）触发数据库操作。这样可行。接下来，我想切换到另一个发布了 guid（唯一 ID）变量的页面。

我无法让这个工作。希望有人可以。提前致谢。

```
 $(document).on('pageinit', '#page1', function(){

    $('form').submit(function(){

        var guid = GUID();
        $.mobile.loadPage( "http://domain.com/dbaction.php?guid="+guid, {
        type: "post", 
        data: $("form#addtegel").serialize()

        });     
        return false; 
    $.mobile.changePage ($("#page2"),{ transition: "slideup"} );

     });

   });

$(document).on('pageinit', '#page2', function(){
DoSomething(guid);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:34:01.243

首先，您需要使 guid 成为全局变量。目前，它在您的表单提交中是本地的，因此无法在该表单提交操作之外访问它。

其次，不要使用- 这是顺便`loadPage()`调用的 jQuery Mobile 的内部函数-像这样使用：`changePage()``$.ajax()`

```
var guid;
$(document).on('pageinit', '#page1', function(){

    $('form').submit(function(){

        window.guid = GUID();
        $.ajax({
            url: "http://domain.com/dbaction.php?guid="+guid,
            type: "post", 
            data: $("form#addtegel").serialize(),
            success: function() {
                $.mobile.changePage ($("#page2"), { transition: "slideup"} );
            }
        });
        return false; 
     });

   });

$(document).on('pageinit', '#page2', function(){
    DoSomething(window.guid);
}); 
```

另外，请注意混合使用 GET 和 POST 数据是一个非常糟糕的习惯。我说的是这个网址：`"http://domain.com/dbaction.php?guid="+guid`

There should only be GET or POST data present in a single request, not both. Would it not be possible to pass `guid` to `dbaction.php` in the POST (using a hidden field in your form)?

# c# - 无法在 windows 窗体图表控件上绘制线条

> ID：12763536
> 
> 赞同：0
> 
> 时间：2012-10-06T20:24:17.090
> 
> 标签：c#, charts, windows-forms-designer

在 Visual Studio 2010 IDE 中使用 C# 中的 Windows 窗体上的图表控件。

我正在创建一个绘制随机点的图表。生成点后，我为图表中的每个点运行一个循环，查看所有其他点坐标。在那个循环中，我计算从父点到它的邻居的距离。如果距离 <= 我指定的某个距离，我希望绘制一条线来显示两者之间的连接。我遇到的问题实际上是画那条线。此外，我需要找到一种方法来走该图表中的最短路径。

所以这真的是两个问题： 1\. 我如何在图表上画线？（当前的困境） 2\. 如何走图找到最短路径？

这是我用来完成此操作的一些代码的片段，以及当前错误：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

    }

    public void createNodes(int x, int y, int Nodes, int dgNodes)
    {
        Random rdn = new Random();

        for (int i = 0; i < (Nodes - dgNodes); i++)
        {
            chtGraph.Series["Series1"].Points.AddXY
                        (rdn.Next(x), rdn.Next(y));
        }

        for (int i = 0; i <= dgNodes - 1; i++)
        {
            chtGraph.Series["Series2"].Points.AddXY
                        (rdn.Next(x), rdn.Next(y));
        }
    }

    public void buildGraph(int x, int y, int Nodes, int dgNodes)
    {
        //set the min/max axis on the chart
        chtGraph.ChartAreas["ChartArea1"].AxisX.Maximum = x;
        chtGraph.ChartAreas["ChartArea1"].AxisX.Minimum = 0;
        chtGraph.ChartAreas["ChartArea1"].AxisY.Maximum = y;
        chtGraph.ChartAreas["ChartArea1"].AxisY.Minimum = 0;
        chtGraph.ChartAreas["ChartArea1"].AxisX.Interval = x / 10;
        chtGraph.ChartAreas["ChartArea1"].AxisY.Interval = y / 10;

        chtGraph.ChartAreas["ChartArea1"].AxisX.MajorGrid.Enabled = false;
        chtGraph.ChartAreas["ChartArea1"].AxisY.MajorGrid.Enabled = false;

        //build all the nodes
        createNodes(x, y, Nodes, dgNodes);
    }

    public void drawEdges(int intNumNodes, int intTransPower)
    {

        Pen pen = new Pen(Color.Black, 1);
        Graphics g = chtGraph.CreateGraphics();

        Point[] pts = new Point[intNumNodes];
        int i = 0;

        //Gather all the data generator data points into a point array
        foreach (DataPoint p in chtGraph.Series[0].Points)
        {
            Point point = new Point((int)p.XValue, (int)p.YValues[0]);
            pts[i] = point;
            i++;
        }

        //Gather all the non data generator into the same point array
        foreach (DataPoint p in chtGraph.Series[1].Points)
        {
            Point point = new Point((int)p.XValue, (int)p.YValues[0]);
            pts[i] = point;
            i++;
        }

        //loop through all the data points
        foreach (Point p in pts)
        {
            //examine all the other data points for each data point visited
            for (int j = 0; j < pts.Length; j++)
            {

                //if the distance from the parent node (p) to the neighbor node is less than the transmit power, then draw a line
                if (Math.Sqrt(Math.Pow((p.X - pts[j].X), 2) + Math.Pow((p.Y - pts[j].Y), 2)) <= intTransPower)
                {
                    //gr.DrawLine(pen, p, pts[j]);
                    //gr.Graphics.DrawLine(pen, p.X, p.Y, pts[j].X, pts[j].Y);

                }
            }
        }
    }

    private void btnExecute_Click(object sender, EventArgs e)
    {
        if (txtDG.Text == "" || txtNodes.Text == "" || txtStorage.Text == "" || txtTransPower.Text == ""
            || txtXAxis.Text == "" || txtXAxis.Text == "")
        {
            lblError.Text = "Please enter in all inputs!";
            lblError.Visible = true;
            return;
        }
        //create variables for use through program

        int intTransPower = Convert.ToInt32(txtTransPower.Text);
        int intXAxis = Convert.ToInt32(txtXAxis.Text);
        int intYAxis = Convert.ToInt32(txtYAxis.Text);
        int intNum_DG = Convert.ToInt32(txtDG.Text);
        int intNumNodes = Convert.ToInt32(txtNodes.Text);
        int intStorage = Convert.ToInt32(txtStorage.Text);

        lblError.Visible = false;
        lblError.Text = "";

        if (txtDG.Text == "" || txtNodes.Text == "" || txtStorage.Text == "" || txtTransPower.Text == "" 
            || txtXAxis.Text == "" || txtXAxis.Text == "")
        {
        lblError.Text = "Please enter in all inputs!";
        lblError.Visible = true;}

        chtGraph.Series["Series1"].Points.Clear();
        chtGraph.Series["Series2"].Points.Clear();

        buildGraph(intXAxis, intYAxis, intNumNodes, intNum_DG);

        drawEdges(intNumNodes, intTransPower);
    }

} 
```

错误：错误 1 ​​类型“System.Windows.Forms.DataVisualization.Charting.ChartGraphics”没有定义构造函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:27:58.743

问题评论中描述的使用事件。

# android - Android中的HTTPComponents multipart/form-data

> ID：12763539
> 
> 赞同：0
> 
> 时间：2012-10-06T20:24:32.150
> 
> 标签：android, android-networking, apache-httpcomponents

如何使用 Apache HTTPComponents 在 POST 查询中发送文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:24:32.150

一种可能的解决方案是自己生成 HTTP 标头，如此处所述 - [http://en.wikipedia.org/wiki/MIME](http://en.wikipedia.org/wiki/MIME)（请参阅“多部分消息”）

我写了这样的功能。也许它写得不好，但效果很好。

```
private static final String REQUEST_BOUNDARY = "somethingUniqueForYourQuery";

private static String sendRequest(String url, String method, String params, File file, String fileField) {
    HttpURLConnection httpConn = null;
    StringBuilder httpContent = new StringBuilder();
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    byte[] fileContent = new byte[0];
    int fileSize = 0;

    // trying to read file
    if (file != null) {
        try {
            FileInputStream fileInputStream = new FileInputStream(file);

            httpContent.append(twoHyphens + REQUEST_BOUNDARY + lineEnd);
            httpContent.append("Content-Disposition: form-data; name=\"" + fileField + "\"; filename=\"" + file.getName() + "\"" + lineEnd);
            httpContent.append(lineEnd);

            fileSize = fileInputStream.available();
            fileContent = new byte[fileSize];
            fileInputStream.read(fileContent, 0, fileSize);
            fileInputStream.close();
        }
        catch (Exception e){
            Log.d(DEBUG_TAG, "Exception occured: " + e.toString());
        }
    }

    // trying to perform request
    try {
        httpConn = (HttpURLConnection) new URL(url).openConnection();

        if (httpConn != null) {
            httpConn.setDoInput(true);
            httpConn.setDoOutput(true);
            httpConn.setUseCaches(false);
            httpConn.setConnectTimeout(CONNECTION_TIMEOUT_STRING);
            httpConn.setRequestMethod(method);

            if (file != null && httpContent.length() > 0) {
                httpConn.setRequestProperty("Connection", "Keep-Alive");
                httpConn.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + REQUEST_BOUNDARY);

                DataOutputStream dos = new DataOutputStream(httpConn.getOutputStream());
                if (params != null) {
                    dos.writeBytes(params);
                }
                dos.writeBytes(httpContent.toString());
                dos.write(fileContent, 0, fileSize);
                dos.writeBytes(lineEnd);
                dos.writeBytes(twoHyphens + REQUEST_BOUNDARY + twoHyphens + lineEnd);
                dos.flush();
                dos.close();
            }
            else if (params != null) {
                PrintWriter out = new PrintWriter(httpConn.getOutputStream());
                out.print(params);
                out.close();
            }

            httpConn.connect();

            int response = httpConn.getResponseCode();
            BufferedReader rd;

            if (httpConn.getErrorStream() == null) {
                rd = new BufferedReader(new InputStreamReader(httpConn.getInputStream()));
            } else {
                rd = new BufferedReader(new InputStreamReader(httpConn.getErrorStream()));
            }

            StringBuffer sb = new StringBuffer();
            String line;
            while ((line = rd.readLine()) != null) {
                sb.append(line + "\n");
            }
            if (rd != null) {
                rd.close();
            }
            return sb.toString();
        } else {
            Log.d(DEBUG_TAG, "Connection Error");
        }
    }
    catch (Exception e){
        Log.d(DEBUG_TAG, "Exception occured: " + e.toString());
    }
    finally {
        if (httpConn != null) {
            httpConn.disconnect();
        }
    }
    return null;
} 
```

# python - Python regex - 为什么字符串结尾（$ 和 \Z）不适用于组表达式？

> ID：12763548
> 
> 赞同：15
> 
> 时间：2012-10-06T20:25:21.933
> 
> 标签：python, regex

在 Python 2.6 中。似乎字符串结尾的标记`$`与`\Z`组表达式不兼容。例子

```
import re
re.findall("\w+[\s$]", "green pears") 
```

返回

```
['green '] 
```

（所以`$`有效地不起作用）。并使用

```
re.findall("\w+[\s\Z]", "green pears") 
```

导致错误：

```
/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/re.pyc in findall(pattern, string, flags)
    175 
    176     Empty matches are included in the result."""
--> 177     return _compile(pattern, flags).findall(string)
    178 
    179 if sys.hexversion >= 0x02020000:

/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/re.pyc in _compile(*key)
    243         p = sre_compile.compile(pattern, flags)
    244     except error, v:
--> 245         raise error, v # invalid expression
    246     if len(_cache) >= _MAXCACHE:
    247         _cache.clear()

error: internal: unsupported set operator 
```

**为什么它会这样工作以及如何解决？**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-06T20:27:52.423

`[..]`表达式是一个字符*组*，这意味着它将匹配其中包含的任何一个字符。因此，您匹配的是文字`$`字符。字符组始终适用于一个输入字符，因此永远不能包含锚点。

如果您想匹配空白字符*或*字符串的结尾，请改用非捕获组，并结合`|`or 选择器：

```
r"\w+(?:\s|$)" 
```

或者，查看`\b`单词边界锚。它将匹配`\w`组开始或结束的任何位置（因此它锚定到文本中`\w`字符前面或后面有`\W`字符的点，或者位于字符串的开头或结尾）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T20:30:15.237

方括号不表示一个组，它们表示一个字符集，它匹配*一个*字符（括号中的任何一个字符）如[记录](http://docs.python.org/library/re.html#regular-expression-syntax)的那样，“特殊字符在集合内失去其特殊含义”（除非另有说明，如类`\s`）。

如果要匹配`\s`或结束字符串，请使用类似`\s|$`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-09T17:20:42.673

Martijn Pieters 的回答是正确的。详细说明一下，如果您使用捕获组

```
r"\w+(\s|$)" 
```

你得到：

```
>>> re.findall("\w+(\s|$)", "green pears")
[' ', ''] 
```

那是因为`re.findall()`返回捕获的组`(\s|$)`值。

[括号`()`用于两个目的](https://stackoverflow.com/a/35195624/1241108)：字符组和捕获组。要禁用捕获的组但仍充当字符组，请使用`(?:...)`语法：

```
>>> re.findall("\w+(?:\s|$)", "green pears")
['green ', 'pears'] 
```

# delphi - 如何将 RETRIEVAL_POINTERS_BUFFER 结构转换为 Delphi？

> ID：12763551
> 
> 赞同：2
> 
> 时间：2012-10-06T20:25:41.870
> 
> 标签：delphi, winapi, struct, delphi-xe2, code-conversion

我正在使用 Windows API，并且必须在 Delphi中重新创建[一个结构](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365521%28v=vs.85%29.aspx)`record`。我想我已经记下来了，但这有点令人困惑，我需要确保我做对了。

这是原始的 C++ 结构：

```
typedef struct RETRIEVAL_POINTERS_BUFFER {
  DWORD         ExtentCount;
  LARGE_INTEGER StartingVcn;
  struct {
    LARGE_INTEGER NextVcn;
    LARGE_INTEGER Lcn;
  } Extents[1];
} RETRIEVAL_POINTERS_BUFFER, *PRETRIEVAL_POINTERS_BUFFER; 
```

请注意，此结构中有一个数组结构。这就是我迷路的地方。如果我没记错的话，Delphi 版本应该是这样的：

```
 TExtent = record
    NextVcn: Integer;
    Lcn: Integer;
  end;

  TExtents = array of TExtent;

  PRETRIEVAL_POINTERS_BUFFER = ^TRETRIEVAL_POINTERS_BUFFER;
  TRETRIEVAL_POINTERS_BUFFER = record
    ExtentCount: DWORD;
    StartingVcn: Integer;
    Extents: TExtents;
  end; 
```

当我在 Windows API 中使用此结构时，它似乎确实有效。但是，由于结构内部的这个结构数组，我有点犹豫我是否正确地做到了这一点。这看起来对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T20:46:10.467

该`Extents`字段是内联在结构中的可变长度数组。实际的结构将包含`ExtentCount`元素。你不能在这里使用 Delphi 动态数组。事实上，你永远不能在互操作中使用 Delphi 动态数组。

因此，`array [0..0]`像 C 代码一样声明它。为了访问它，您需要禁用范围检查。此记录的实际实例将在 indices 中包含有效数据`0..ExtentCount-1`。

对于您的整数类型，将`DWORD`C 中的映射到`DWORD`Delphi 中。并`LARGE_INTEGER`在C到`LARGE_INTEGER`Delphi中。这些都与 Delphi 不同`Integer`。前者是无符号的，后者是 64 位宽。

```
PRetrievalPointersBuffer = ^TRetrievalPointersBuffer;
TRetrievalPointersBuffer = record
  ExtentCount: DWORD;
  StartingVcn: LARGE_INTEGER;
  Extents: array [0..0] of record
    NextVcn: LARGE_INTEGER;
    Lcn: LARGE_INTEGER;
  end;
end; 
```

这种`LARGE_INTEGER`类型很难使用。您可能更愿意将这些字段声明为`Int64`。

* * *

这种类型的结构总是堆分配的。堆分配代码必须计算出适合`ElementCount`可变长度数组中的项目所需的大小。如果您正在分配缓冲区，那么您将需要单独定义类型的内部记录，以便您可以方便地将其命名为传递给`SizeOf`. 如果 API 分配，那么你就可以如上所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:31:07.183

定义`TExtents`为`array of TExtent`错误。那就是将它声明为一个动态数组，一种托管引用类型。你需要的是一个有界数组，比如`array [x..y] of TExtent`.

不过，这个 C 声明相当奇怪，因为它被声明为*一个只有一个元素的数组。* 如果要准确复制它，则应将其声明为`array [0..0] of TExtent`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T20:46:13.103

StartingVcn、NextVcn 和 Lcn 定义为 LARGE_INTEGER，在 winnt.h 中定义如下：

```
typedef union _LARGE_INTEGER {
    struct {
        DWORD LowPart;
        LONG HighPart;
    } DUMMYSTRUCTNAME;
    struct {
        DWORD LowPart;
        LONG HighPart;
    } u;
    LONGLONG QuadPart;
} LARGE_INTEGER; 
```

根据您使用的 Delphi 版本，您定义的结构可能不起作用。LARGE_INTEGER 应声明如下：

```
LARGE_INTEGER = record
  case Integer of
    0: ( LowPart: DWORD;
      HighPart: Longint; );
    1: ( QuadPart: LONGLONG);
end; 
```

LONGLONG 实际上只是一个 Int64。您可以使用 LowPart 和 Highpart 或 QuadPart 访问此结构。

希望这可以帮助。

# python - 无法使用 BeautifulSoup 获取标签的值

> ID：12763555
> 
> 赞同：0
> 
> 时间：2012-10-06T20:26:24.763
> 
> 标签：python, web-scraping, beautifulsoup

我刚刚开始使用 BS4，但我似乎无法找到为什么我无法提取下表中的文本 -> [http://pastebin.com/MCQC7wLY](http://pastebin.com/MCQC7wLY)

这是我的代码：

```
 for team in soup.find_all('tr'):
    print team.a.string 
```

我收到以下错误

> AttributeError：“NoneType”对象没有属性“字符串”

我也尝试过其他的东西，比如

```
for team in soup.find_all('tr'):
    print team.find('a').string 
```

但我总是遇到同样的错误。

这就是 team.find('a') 返回的

```
<a href="/entry/688922/event-history/7/">FC Lasne</a> 
```

我想提取“FC Lasne”

这让我发疯，因为通常我只是做 find('a').string 并且它只是工作

我应该如何进行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:30:17.000

您的示例中的第一个`tr`没有任何`a`标签。

您可以忽略任何`tr`没有链接的 s ：

```
for team in soup.find_all('tr'):
    link = team.find('a')
    if link == null:
       continue
    print link.string 
```

虽然你可以这样做：

```
soup.find_all('a') 
```

# javascript - 一旦用户追加一行，文本输入就不会出现

> ID：12763557
> 
> 赞同：3
> 
> 时间：2012-10-06T20:26:40.823
> 
> 标签：javascript, jquery, jsfiddle

我在这里有一个小提琴：http: [//jsfiddle.net/ybZvv/11/](http://jsfiddle.net/ybZvv/11/)

我遇到的问题是，当您打开小提琴时，如果您单击按钮“AH”中的几个按钮，然后单击“添加问题”按钮将按钮附加到新的表格行中，则下方不会出现文本输入桌子。

但是在表格行中，如果您打开不同的按钮，则会显示该按钮的文本输入。

我的问题是，一旦用户单击“添加问题”按钮，如何让文本输入从顶部控件中打开的按钮中显示？

以下是应该发生的情况：

1.  在顶部控件上，打开按钮 A 和 D。
2.  单击“添加问题”按钮，这应该附加一行，但它还应该显示按钮“A”和“D”的文本输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:20:25.263

我将一些代码重构`btnclick`为一个新方法`updateAnswer`，该方法收集所有打开的按钮并将输入添加到答案容器。`btnclick`然后从和调用该方法`insertQuestion`。

我更新了[jsFiddle 示例](http://jsfiddle.net/ybZvv/20/)。

# c# - 为什么 C# Parallel.ForEach 会抛出 IndexOutOfBounds 而 foreach 不会？

> ID：12763564
> 
> 赞同：0
> 
> 时间：2012-10-06T20:27:27.147
> 
> 标签：c#, parallel-processing

我做了这个小程序来测试并行化。

当我多次点击 button1 时，它以 IndexOutOfBounds 异常结束。我想这是因为我的内存不足。为什么我通过并行化而不是常规的 foreach（button2 click）得到这个？

```
private void button1_Click(object sender, EventArgs e)
{
    var s = Stopwatch.StartNew();

    int[] nums = new int[10000];
    List<int> randoms = new List<int>();

    Parallel.ForEach(nums, i =>
    {
        randoms.Add(new Random().Next());
    });

    s.Stop();
    label1.Text = "Added " + randoms.Count() + " randoms in "
                  + s.Elapsed.Milliseconds.ToString() + " milliseconds";
}

private void button2_Click(object sender, EventArgs e)
{
    var s = Stopwatch.StartNew();

    int[] nums = new int[10000];
    List<int> randoms = new List<int>();
    foreach (var i in nums)
    {
        randoms.Add(new Random().Next());
    }

    s.Stop();
    label2.Text = "Added " + randoms.Count() + " randoms in "
                  + s.Elapsed.Milliseconds.ToString() + " milliseconds";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:30:07.737

在您的`Parallel.ForEach`代码中，您正在同时修改一个`List<int>`不是线程安全的。

当您尝试添加到`List`内部数组在不同线程中调整大小的末尾时，会发生异常。

相反，您应该使用并发集合，例如[`ConcurrentBag`](http://msdn.microsoft.com/en-us/library/dd381779.aspx)or[`ConcurrentQueue`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:30:53.860

您正在`randoms`并行修改。这是一个错误，因为该列表对于并发添加是不安全的。

此外，IndexOutOfBounds 与内存不足无关。您可以通过仔细查看异常来找出所有这些：该消息告诉您它不是 OOM。堆栈跟踪会告诉您错误发生在哪一行（它在`Add`-line 中，对吗？）。

# emacs - 如何在 emacs 中永久启用 hs-minor-mode

> ID：12763566
> 
> 赞同：12
> 
> 时间：2012-10-06T20:27:37.240
> 
> 标签：emacs, elisp

我在 .emacs 文件中使用 thhs 代码来永久启用 hs-minor-mode 并更改快捷方式：

```
(setq-default hs-minor-mode t)
(global-set-key (kbd "C-c C-h") (kbd "C-c @ C-h"))         ;;hiding block of code
(global-set-key (kbd "C-c C-r") (kbd "C-c @ C-s"))         ;;revealing block of code 
```

但该模式不会自动激活。我应该怎么办？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-06T21:03:44.573

您可以`hs-minor-mode`使用`c-mode-common-hook`.

```
(add-hook 'c-mode-common-hook #'hs-minor-mode) 
```

在 Emacs 24 或更高版本中，您可以使用`prog-mode-hook`.

```
(add-hook 'prog-mode-hook #'hs-minor-mode) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-08T09:17:56.827

If you want it to be truly global, this does the trick:

```
(define-globalized-minor-mode global-hs-minor-mode
  hs-minor-mode hs-minor-mode)

(global-hs-minor-mode 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T21:51:44.167

如果您想在任何地方启用它，并使用 hs-hide-all 折叠的代码启动缓冲区，请执行

```
(defun my-hide-all()
  (interactive)
  (hs-minor-mode)
  (hs-hide-all))
(add-hook 'prog-mode-hook 'my-hide-all) 
```

# if-statement - 通过提问猜谜游戏：效率

> ID：12763568
> 
> 赞同：1
> 
> 时间：2012-10-06T20:27:53.087
> 
> 标签：if-statement, binary-tree, performance

我正在解决 Stroustrup 书中的一个练习，我必须设计一个程序来猜测用户正在考虑的一个 1-100 之间的数字，例如“它是否小于 50？”。等等。我不能问超过 7 个问题才能得到答案。

到目前为止，我有这样的事情：

```
string answer;

cout << "Think of a number between 1 and 100.\n";

cout << "Is it even or odd? (E/O)\n";

cin >> answer;

if (answer == "E") 
{
    cout << "Is it less than 50? (Y/N)\n";
    cin >> answer; 
    if (answer == "Y")
    {
        cout << "Is it less than 25? (Y/N)\n";
        cin >> answer;
        if (answer == "Y")
        {
            cout << "Is it less than 15? (Y/N)\n";
            cin >> answer;
            if (answer == "Y")
            {
                cout << "Is it less than 9? (Y/N)\n";
                cin >> answer;
                if (answer == "Y")
                {
                    cout << "Is it less than 5? (Y/N)\n";
                    cin >> answer;
                    if (answer == "Y")
                    {
                        cout << "Is it less than 3? (Y/N)\n";
                        cin >> answer;
                        if (answer == "Y") 
                        {
                            cout << "Your number is 2.";
                        }
                    }
                }
            }
        }
}
} 
```

我觉得这真的很糟糕，因为我只有一个流程图的路径，而且这个程序已经很长了。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:30:38.733

基本上，您希望根据用户所说的内容，在您之前猜到的数字上减半或加半。如果您在循环中要求输入，您可以简单地每次添加或删除一半的数字，询问新的数字。

因此，基本上，您不必对每个问题进行硬编码，而是每次都问相同的问题，但在循环中使用最后一个数字 / 2 或 + (/2)。

我假设您并不真的希望我们为您编写代码，所以我不会。相信有了这个线索，你就可以猜到了！查看 for/while 循环，因为您需要这些循环来执行此操作。

# jquery - Jquery选项卡和css问题

> ID：12763569
> 
> 赞同：0
> 
> 时间：2012-10-06T20:28:02.540
> 
> 标签：jquery, asp.net, css, tabs, master-pages

一旦用户单击选项卡标题，我将在母版页中使用 jquery 选项卡打开 aspx 文件。但是，如果我使用我的页面作为链接，它将重复“标题”部分（类似于：[jquery tabs and asp.net master pages issue](https://stackoverflow.com/questions/9459991/jquery-tabs-and-asp-net-master-pages-issue)）。已经尝试过解决方案，但无法理解它。有人可以帮忙吗。这是我在母版页中的代码：

```
<form id="form1" runat="server">
<div class="mainWrapper">
    <div class="wrapper">
        <div class="header">
            <a href="" class="logo"></a>
            <div class="topToolbar">
                <span>Welcome <a href="/" class="logOut">Log Out</a></span>
            </div>
        </div>
        <div class="container">
            <div id="tabs">
                <div class="tabsCenter">
                    <ul>
                        <li><a href="Myfirstpage.aspx">First</a></li>
                        <li><a href="SecondPage.aspx">Second</a></li>
                    </ul>

                </div>

                <div class="tabsBottom">
                </div>
            </div>
           <asp:ContentPlaceHolder ID="BodyContent" runat="server">
            </asp:ContentPlaceHolder>

        </div>
    </div>
    <div class="push">
    </div>
</div>
</form> 
```

**编辑：**

这是我的第二个版本代码：

```
<body>
    <form id="form1" runat="server">
    <div class="mainWrapper">
        <div class="wrapper">
            <div class="header">
                <a href="" class="logo"></a>
                <div class="topToolbar">
                    <span>Welcome <a href="/" class="logOut">Log Out</a></span>
                </div>
            </div>
            <div class="container">
                <div id="tabs">
                    <div class="tabsCenter">
                        <ul>
                            <li><a href="Track.aspx" runat="server" id="Tab1">Track</a></li>
                            <li><a href="Downloads.aspx" runat="server" id="Tab2" >Downloads</a></li>
                            <%--<li><a href="~/ClaimsLogin/ClaimsLogin">My Claims</a></li>
                            <li><a href="~/FAQ/FAQs">FAQ's</a></li>
                            <li><a href="~/MyProfile/ViewDetail">My Profile</a></li>
                            <li><a href="~/MyMessage/Message">Contact</a></li>--%>
                        </ul>
                        <div id="TabContent">
                        <asp:ContentPlaceHolder ID="BodyContent" runat="server">
                        </asp:ContentPlaceHolder>
                        </div>
                        <div id="TabContent2">
                        <asp:ContentPlaceHolder ID="BodyContent2" runat="server">
                        </asp:ContentPlaceHolder>
                        </div>
                    </div>
                    <div class="tabsBottom">
                    </div>
                </div>
            </div>
        </div>
        <div class="push">
        </div>
    </div>
    </form>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.tabs').tabs({
                select: function (event, ui) {
                    var url = $.data(ui.tab, 'load.tabs');
                    location.href = url; // follow url
                    return false; // to disable default handling
                }
            });
        });
    </script>
</body>
</html> 
```

在页面中我这样做：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Track.aspx.cs" Inherits="CustomerPortalV2.Track" MasterPageFile="~/Site.Master" %>

<asp:Content ID="Trackcontent" ContentPlaceHolderID="BodyContent" runat="server">
<div class="sideTabsWrapper">
Track page
</div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:59:55.563

如[jquery tabs 和 asp.net master pages issue](https://stackoverflow.com/questions/9459991/jquery-tabs-and-asp-net-master-pages-issue)中所述，您有两种方法可以做到这一点：

1.  如果您希望通过 AJAX 加载页面内容，那么您需要确保内容页面（带有选项卡内容）本身不应有标题或选项卡。它应该是普通页面（不要使用母版页），只有需要在选项卡中显示的内容

2.  第二种方法（我想您正在尝试遵循）是在标签上单击，遵循实际的 URL（即浏览器地址栏现在将有新的 URL）。在这种方案中，您需要指示 jquery 选项卡，而不是使用 AJAX 加载选项卡内容。原始答案中提供的常见问题解答链接似乎已被 Jquery UI 删除 - 而是在引用原始常见问题解答时看到这个 SO 问题：[Follow the links of the tab in jquery ui tab](https://stackoverflow.com/questions/3046308/follow-the-links-of-the-tab-in-jquery-ui-tab)

# windows - 在 nasm/Windows 中打印 argv[0]？

> ID：12763576
> 
> 赞同：0
> 
> 时间：2012-10-06T20:29:08.550
> 
> 标签：windows, assembly, nasm, argv

借助在线帮助，我能够在 Mac OS X 中编写[nasm 代码](https://github.com/mcandre/scriptname/blob/master/nasm/freebsd/scriptname.asm)`argv[0]`，从而生成一个可执行文件，该可执行文件以等效的 C 代码打印其自己的文件名。当我在 Windows 中使用相同的代码时，我希望它打印程序名称：

```
C:\> nasm -f win32 -o scriptname.obj scriptname.asm
C:\> golink /fo scriptname.exe scriptname.obj /console kernel32.dll Msvcrt.dll

GoLink.Exe Version 0.27.0.0 - Copyright Jeremy Gordon 2002/12 - JG@JGnet.co.uk
Output file: scriptname.exe
Format: win32 size: 2,048 bytes
C:\> scriptname.exe
Program: scriptname.exe 
```

但它实际打印的是空虚：

```
C:\> scriptname.exe
Program: 
```

眼镜：

*   golink 0.27.0.0
*   NASM 2.10.05
*   Windows 7 专业版 x64
*   MacBook Pro 2009

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:36:34.167

和参数仅适用于基于 C`argc`的`argv`程序。基于汇编的程序必须使用C 库中`__getmainargs`的`__wgetmainargs`函数来生成这些变量，就像它们在基于 C 的程序内部使用一样。有关详细信息，请参阅下面的 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/ff770599.aspx](http://msdn.microsoft.com/en-us/library/ff770599.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T02:08:10.660

您调用 GetStdHandle 并将返回的值保存到 ecx，ecx 是一个易失性寄存器，除非您推送/弹出它，否则该值不会在调用之间保存。您对 WriteConsoleA 的第一次调用使用它并破坏它，因此下一次调用 ecx 不是您所期望的。

*** 编辑 *** 我很无聊所以这里是工作代码：

```
[bits 32]

section .data

program db "Program: ", 0
programlen equ $-program

nl db "", 13, 10, 0
nllen equ $-nl

section .bss

buf resd 1
argc resd 1
argv resb 255

section .text

global Start
extern GetStdHandle
extern __getmainargs
extern WriteConsoleA
extern ExitProcess

strlen:             ; eax: a string ending in 0
push eax            ; cache eax

.strloop:

mov bl, byte [eax]
cmp bl, 0
je .strret          ; return len if bl == 0
inc eax             ; else eax++
jmp .strloop

.strret:

pop ebx             ; ebx = cached eax
sub eax, ebx        ; eax -= ebx
ret                 ; eax = len

Start:

push 0
push buf
push argv
push argc
call __getmainargs
add esp, 16         ; clear stack (4 * 4 arguments)

push -11            ; get stdout
call GetStdHandle
mov esi, eax
add esp, 4          ; clear stack (4 * 1 argument)

push 0              ; null
push buf            ; [chars written]
push programlen
push program
push esi            ; stdout
call WriteConsoleA
add esp, 20         ; clear stack (4 * 5 arguments)

mov edx, [argv]
mov eax, [edx]   ; <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
call strlen
push 0              ; null
push buf            ; [chars written]
push eax            ; len argv[0]
push dword [edx]    ;<<<<<<<<<<<<<<<<<<<<<<<<<<<<       ; argv[0]
push esi            ; stdout
call WriteConsoleA
add esp, 20         ; clear stack (4 * 5 arguments)

push 0              ; null
push buf            ; [chars written]
push nllen
push nl
push esi            ; stdout
call WriteConsoleA
add esp, 20         ; clear stack (4 * 5 arguments)

push 0
call ExitProcess

D:\NASM Projects\ReadArgs>ReadArgs.exe
Program:  ReadArgs.exe

D:\NASM Projects\ReadArgs> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T18:20:27.760

嗯，是的，也不是。在 Linux 中，在`_start:`标签处，`argc`是 at`[esp]`和`argv[0]`is at `[esp + 4]`。如果您的代码有效，那么 Mac OSX 也必须如此。通过`-e main`在 ld 命令行上做，本质上`main`是在谎报它的名字。它不是真正的“C 风格的主要”。这个标签被跳转到，而不是被调用。如果`main`（或 _main，对于 'doze 和 Mac OSX）被“C 启动代码”（crt2.o）调用，那么堆栈上有一个返回地址，所以`argc`is at`[esp + 4]`和`argv[0]`is at `[esp + 8]`。此外，正如 Tim 在新闻中告诉你的那样：comp.lang.asm.x86`argv`是一个`**`- “指向指针的指针” - 所以你还需要`mov ebx, [ebx]`（“取消引用”）。我很确定在 Windows 中，无论我们如何命名入口点，都会调用我们的代码。你能让它这样工作吗？

编辑：好吧，这几乎被打死了，并且“解决了”（？），但我也很无聊。这适用于 Linux，并且“可能”是可移植的。

 ````
;  prints its own name (possibly portable?)
; nasm -f elf32 myprog.asm
; nasm -f macho myprog.asm --prefix _
; nasm -f win32 myprog.asm --prefix _
; gcc -o myprog myprog.o(bj) (-m32 for 64-bit  systems)

global main
extern printf

section .data
    prog db `Program: %s \n`, 0

section .text
main:
    mov eax, [esp + 8]
    mov eax, [eax]
    push eax
    push prog
    call printf
    add esp, 4 * 2
    ret
;---------------------- 
````

# javascript - 传递一个变量名并将其计算为该变量的值

> ID：12763577
> 
> 赞同：0
> 
> 时间：2012-10-06T20:29:08.973
> 
> 标签：javascript, html

我有一个带有许多按钮的表单，所有按钮都在相关的文本框中打印一个值。问题是该值是一个相当长的文本字符串，我想创建一个较短的变量，例如。'text' 并使该变量等于例如。“我只想打一次的长句”。知道如何编辑此代码以使其成为可能

```
 function setInput(button, setValue) {
var buttonVal = button.value,
    textbox = document.getElementById('input_' + buttonVal);
textbox.value = setValue;

<html> 
<input type='submit' name='submit_a' value="a" 
 onclick="setInput(this,'make_me_a_variable'); return false;">
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:39:24.217

```
var textLookup = {
    btnName1: "Long text",
    btnName2: "Longer text"
};

// inside your function
var buttonText = ...,
    inputText = textLookup[buttonText];

// do stuff with inputText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:40:17.443

除了在 HTML 代码中定义事件处理程序，您还可以使用 javascript 创建事件处理程序。您需要在 document.onload 的另一个事件处理程序中执行此操作。当您之前执行此操作时，输入 HTML 元素可能尚未被解析和创建，因此无法添加任何事件处理程序。

```
<script>
    // store your text in a variable
    var inputText = 'make_me_a_variable';
    // define some code which is executed when the page is loaded:
    document.addEventListener("load",function(event){
         // get the input by the id property I added to the HTML below.
          var input = document.getElementById('submit_a'); 
          // add an event handler for the click event (replaces the onclick HTML property)
          input.addEventListener("click",function(event) {
                setInput(this, inputText);
                return false;
          });
    });
</script>

[...]

 <input id="submit_a" type='submit' name='submit_a' value="a" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:41:18.880

您可以创建一个变量并将您的长文本分配给该变量并在您想要的任何地方使用它。

修改后的代码

```
 var longText = 'long text here'.
 function setInput(button) {
     var buttonVal = button.value,
     textbox = document.getElementById('input_' + buttonVal);
     textbox.value = longText ;
 } 
```

html:

```
<input type='submit' name='submit_a' value="a" 
 onclick="setInput(this); return false;"> 
```

# c++ - 包含指针的对象的 C++ 析构函数

> ID：12763582
> 
> 赞同：1
> 
> 时间：2012-10-06T20:29:36.547
> 
> 标签：c++, destructor

我可以对析构函数进行一些澄清。

我知道如果一个对象包含一个指向已分配内存的指针，那么该对象的析构函数应该调用`delete`该指针。但是，如果一个对象包含一个对象，该对象包含一个指向已分配内存的指针，例如`string`？：

```
class Foo
{
    string bar;
};

Foo* foo = new Foo;
delete foo; 
```

我必须做些什么来确保`char[]`字符串中的底层被释放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:31:22.103

类`string`析构函数负责任何清理工作。你不必担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:31:42.497

当你的类被破坏时，它的所有成员 - 包括`string`- 也被自动破坏。

清理由`string`（其中 char 数组是其他类不应依赖的实现细节）持有的任何内部资源是`string`对象的析构函数的责任。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T20:31:55.490

该`string`类型的析构函数负责清理它拥有的任何资源。您对象的析构函数将调用成员对象的析构函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T20:34:24.877

您可以查看以下规则。您使用 new 创建（并保留其所有权）的任何对象都必须通过调用析构函数来`delete`销毁。

# php - 如何通过jQuery传递选定的值

> ID：12763589
> 
> 赞同：0
> 
> 时间：2012-10-06T20:30:17.347
> 
> 标签：php, ajax, jquery

我想使用 jQuery 在 invoice.php 文件上传递选定的值。在 invoice.php 文件上发送值后。我想在 index.php 页面选择的输入框中显示 invoice.php 文件的回显结果。举个例子：如果有人选择项目然后在费率输入框中显示费率。这是我的代码和图像![在此处输入图像描述](../Images/8d34c8680ce8968ddcc5a77867c353dc.png)

index.php 文件代码：

```
<html>
    <head>
        <title>Invoice</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">

    $(document).ready(function(){
    $(".item").change(function(){
        calculate();
    });
});

function calculate() {

var item = [];
    $(".item").each(function() {
            var num=(this.value);
            item.push(num);
    });

    $('input[name=rate]').each(function(i){
        $.get(
            '/invoice_final_2.php',
            {'product':item[i]},
            function(data) {
                $(this).html(data);
            });
    });
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
</script>
<style type="text/css">
table
{
    border: 1px solid black;
    border-bottom: none;
    width: 300px;
}

td
{
    border-left: 1px solid black;
    border-bottom: 1px solid black;
    padding:5px 5px 5px 5px;
}
#first
{
    border-left: none;
    border-bottom: 1px solid black;
}
</style>
    </head>
    <body>
        <form method='post' name='form1' action='welcome.php'>
        <table cellpadding="0" cellspacing="0">
            <tr>
                <td id="first">Item</td>
                <td>Rate</td>
            </tr>
            <?php
            $num=4;
            for ($i=0; $i<$num; $i++)
            {
                echo "
                 <tr>
                 <td id='first'>
                 <select class='item' name='item'>
                 <option>Select one</option>
                 <option>Deluxe Plan</option>
                 <option>Premium Plan</option>
                 <option>Standard Plan</option>
                 <option>Economy Plan</option>
                 </select>
                </td>
                <td><input class='rate' type='text' name='rate'/></td>
               </tr>";
            }
            ?>
     </table>
</form>
</body>
</html> 
```

invoice.php 文件代码：

```
<?php
include "dbconnect.php";

$product=$_GET['product'];

$query="select * from item where item_name='$product'";
$result=mysql_query or die (mysql_error());
$row=mysql_fetch_assoc($result);
$rate=$row['rate'];

echo "$rate";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:36:26.363

我不确定您要实现什么，但是您不需要`each`使用索引一一使用和发送值，您可以发送*一次*数组。

```
function calculate() {
    var items = $(".item").map(function() {
          return this.value;
    }).get();

    $.get('/invoice_final_2.php',
        {'product': items },
        function(data) {
           //
        }
    );
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

# cakephp - 如果图像不存在，则 cakephp 占位符

> ID：12763590
> 
> 赞同：0
> 
> 时间：2012-10-06T20:30:23.970
> 
> 标签：cakephp, cakephp-2.2, not-exists

我有一个数据库，其中包含与每个条目相关联的图像。

无论如何，有些条目没有图像。

谷歌搜索我发现了一些在视图中应用的 js 和 php 方式，但我很确定有一个（更好的）MVC 方式来做到这一点，只是我不知道如何..

有没有一种很好的蛋糕方式来显示不存在的占位符图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:37:54.970

假设您从名为“post”的控制器设置的数据。而且您的 /app/webroot/img/ 中有“your_default_image”

```
<?php
if(empty($post['Post']['img'])) {
    echo $this->Html->image($post['Post']['img']);
} else {
    echo $this->Html->image('your_default_image');
} 
```

您可以将这些逻辑包装在您的助手中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T04:15:57.503

您可以在任何需要占位图像的地方使用 placehold.it。

只需使用[http://placehold.it/WxH 之](http://placehold.it/WxH)类的[http://placehold.it/250x250 即可](http://placehold.it/250x250)。

# java - ArrayList 的内存使用情况

> ID：12763592
> 
> 赞同：5
> 
> 时间：2012-10-06T20:30:33.460
> 
> 标签：java, memory-management, arraylist, integer

我`ArrayList<Integer>`在我的研究项目中使用。我需要在此列表中保留未知数量的整数。有时我需要更新列表：删除现有记录或添加新记录。作为`Integer`一个对象，它比 only 占用更多的内存`int`。是否有任何替代方法来维护将消耗更少内存的列表`Integer`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T20:36:28.717

尝试一种针对内存使用优化的整数列表实现，例如[Colt 库](http://acs.lbl.gov/software/colt/)中的一个：

[http://acs.lbl.gov/software/colt/api/cern/colt/list/IntArrayList.html](http://acs.lbl.gov/software/colt/api/cern/colt/list/IntArrayList.html)

[Java Integer 对象通常需要比 int 原语更多的开销](https://stackoverflow.com/a/4031302/235354)，因此您需要一个空间优化的实现。

从[柯尔特](http://acs.lbl.gov/software/colt/)：

> 例如，在 CERN 进行的科学和技术计算的特点是对问题规模的要求很高，并且需要在相当小的内存占用下获得高性能。[...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:22:51.757

您还应该考虑另一种存储系统`ArrayList`。至于链接机制，每个元素都有一个开销（有时）消耗更多的内存作为值本身。也许您不需要订购它们。如果适用或实现自己的数据结构，您是否考虑过`Map`一个简单的 oder ？`Set`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:35:00.730

这取决于您使用的语言，但我认为它是 Java。在 Java 中，您可能知道，不能在 ArrayList 中使用整数，因为它们是原始数据类型。要使用整数，您必须使用固定大小的常规数组。这意味着每次添加内容时都需要创建一个更大的新数组，假设元素数量大于数组。你用内存来换取复杂性，因为你必须编写更多的代码，并且来回移动整数。

减少的内存使用不太可能值得付出努力，并且在实施这种解决方案时存在额外的错误风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T20:33:12.163

您可以使用带有 int-s 的数组并使用与 ArrayList 相同的逻辑编写自己的方法。但是 IMO 这是一个坏主意 - 现代机器有足够的内存来使用 Integer 对象，相信我...... :)

# ruby - Thread#run 和 Thread#wakeup 的区别？

> ID：12763593
> 
> 赞同：10
> 
> 时间：2012-10-06T20:30:33.293
> 
> 标签：ruby, multithreading

在 Ruby 中，[Thread#run](http://www.ruby-doc.org/core-1.9.3/Thread.html#method-i-run)和[Thread#wakup 有](http://www.ruby-doc.org/core-1.9.3/Thread.html#method-i-wakeup)什么区别？

RDoc 指定不使用 Thread#wakeup 调用*调度程序*，但这意味着什么？*何时使用唤醒*与*运行*的示例？谢谢。

**编辑：**
我看到[Thread#wakup](http://www.ruby-doc.org/core-1.9.3/Thread.html#method-i-wakeup)导致线程变得可运行，但是如果在执行[Thread#run](http://www.ruby-doc.org/core-1.9.3/Thread.html#method-i-run)之前它不会执行（无论如何都会唤醒线程），那么它有什么用？

有人可以提供一个例子，*唤醒*做一些有意义的事情吗？出于好奇=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:03:50.983

这是一个示例来说明它的含义（来自[此处](http://www.java2s.com/Code/Ruby/Threads/Wakeupathread.htm)的代码示例）：

**线程唤醒**

```
thread = Thread.new do 
  Thread.stop
  puts "Inside the thread block"
end

$ thread
=> #<Thread:0x100394008 sleep> 
```

上面的输出表明新创建的线程因为停止命令而处于休眠状态。

```
$ thread.wakeup
=> #<Thread:0x100394008 run> 
```

此输出表明线程不再处于休眠状态，并且可以运行。

```
$ thread.run
Inside the thread block
=> #<Thread:0x1005d9930 sleep> 
```

现在线程继续执行并打印出字符串。

```
$ thread.run
ThreadError: killed thread 
```

**线程运行**

```
thread = Thread.new do 
  Thread.stop
  puts "Inside the thread block"
end

$ thread
=> #<Thread:0x100394008 sleep> 

$ thread.run
Inside the thread block
=> #<Thread:0x1005d9930 sleep> 
```

线程**不仅唤醒，而且继续执行**并打印出字符串。

```
$ thread.run
ThreadError: killed thread 
```

# c++ - 程序自己声明变量

> ID：12763598
> 
> 赞同：0
> 
> 时间：2012-10-06T20:30:59.950
> 
> 标签：c++, variables, variable-declaration

我仍然是一个......新手，在 C++ 中。我不知道我要找的东西的名称，但我一直在搜索，但似乎找不到以下问题的答案：我想编写一个程序来声明所需的变量数量。例子：

```
int a;
cin>>a; 
```

现在，如果“a”是 5（或任何其他数字），我希望程序再声明 5 个变量，名称无关紧要，但假设...n1、n2、n3、n4、n5。我已经尝试过数组和 for 循环，但无法让它工作。我在克罗地亚论坛（forum.hr）上得到了答案，但论坛目前处于离线状态，所以我没有时间尝试......这是关于提前使用堆而不是堆栈Thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:52:59.307

[C++ 有](http://en.cppreference.com/w/cpp/container)为此目的的容器类。特别是，你想要一个`vector`：

```
std::vector<int> a(size);
for (int i = 0; i < a.size(); ++i)
    std::cin >> a[i]; 
```

声明一个`a`具有一定大小的整数向量并一个一个地读取它的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:51:40.447

如果这是 C++，你能做的最好的就是使用`std::vector`它，因为它会为你管理内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:34:59.710

您可以将它们存储在一个数组中：

```
int a;
cin >> a;

int *number = new int[a];  // allocate an array of size a

for (int i = 0; i < a; i++) {
    number[i] = 5 + i;     // set your numbers to anything here
}

delete[] number;             // otherwise you have memory leak 
```

或更好地使用 a `vector`：

```
vector<int> number(a);

// iterate with a normal for loop
for (int i = 0; i < number.size(); i++) {
    number[i] = 5 + i;
}

..

// or use iterators
for (vector<int>::iterator it = number.begin(); it != number.end(); ++it) {
    cout << *it << endl;
} 
```

所以你不必管理内存。

# c++ - Boost：创建一个返回变体的函数

> ID：12763606
> 
> 赞同：1
> 
> 时间：2012-10-06T20:31:42.113
> 
> 标签：c++, boost, switch-statement, variant

我有一个任务是学习如何使用 boost::variant。我正在尝试创建一个要求用户创建形状类型的函数。然后创建请求的形状并将其分配给变体并返回它。我正在使用开关来完成此操作，但是我在使用默认语句时遇到了运行时错误。

我还收到来自编译器的警告：“警告 C4715：'ShapeVariant'：并非所有控制路径都返回值”

如果用户输入了无效的选择，我如何只打印一个字符串？

谢谢！

```
#include "boost/variant.hpp"

typedef boost::variant<Point,Line,Circle> ShapeType;

ShapeType ShapeVariant()
{
    cout << "Please select a Shape Type\n1: Point\n2: Line\n3: Circle\n\nSelection: ";

    int choice;

    cin >> choice;

    switch(choice)
    {
    case 1: return Point(); break;
    case 2: return Line(); break;
    case 3: return Circle(); break;
    default: cout << "Invalid selection." << endl; break;
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:37:03.867

您可以代替从函数中打印字符串，而是引发调用者捕获的异常并打印引发异常的原因。

```
switch(choice)
{
  case 1: return Point(); break;
  case 2: return Line(); break;
  case 3: return Circle(); break;
  default: throw std::runtime_error( "Invalid selection." );
} 
```

在调用者中：

```
try {
  auto result = ShapeVariant();
} catch( std::exception const& e ) {
  std::cout << e.what() << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:35:43.470

您不能在 C++ 中执行此操作，运行此类代码将导致无效情况下的未定义行为。如果选择确实无效，则抛出异常。您还可以查看`boost::optional`哪个是专为这种情况设计的。

# python - 基于主题的推荐系统的用户分析

> ID：12763608
> 
> 赞同：2
> 
> 时间：2012-10-06T20:31:45.100
> 
> 标签：python, machine-learning, recommendation-engine, latent-semantic-indexing, topic-modeling

我正在尝试提出一个基于主题的推荐系统来向用户推荐相关的文本文档。

我在维基百科语料库上使用 gensim 训练了一个潜在语义索引模型。这让我可以轻松地将文档转换为 LSI 主题分布。我现在的想法是以同样的方式代表用户。但是，当然，用户有查看文章的历史记录，以及文章的评分。

所以我的问题是：如何代表用户？

我的一个想法如下：将用户表示为所有查看过的文档的聚合。但是如何考虑评级？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:29:44.407

我认为这不适用于 lsa。

但是您也许可以进行某种 k-NN 分类，其中每个用户的坐标是查看的文档。每个物体（=用户）发出辐射（强度与距离的平方成反比）。强度是根据单个文档的评级计算的。

然后你可以在这个超维空间中放置一个对象（用户），看看其他用户给出的“光”最多。

但是：Apache Lucene 不能为你做所有的事情吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:08:48.700

“将用户表示为所有查看文档的聚合”：这可能确实有效，因为您处于线性空间中。您可以轻松地将所有文档向量添加到一个大向量中。

如果您想添加评级，您可以简单地在总和中添加一个系数。

假设您将所有评分为 2 的文档分组到向量 D2 中，在 D3 中评分为 3 等...然后您只需将用户向量定义为 U=c2*D2+c3*D3+... 您可以使用 c2、c3 的各种形式，但最简单的方法是简单地乘以评分，然后除以标准化原因的最大评分。

如果您的最高评分为 5，您可以定义例如 c2=2/5, c3=3/5 ...

# ruby-on-rails - 安装 ruby rvm 时出错

> ID：12763609
> 
> 赞同：3
> 
> 时间：2012-10-06T20:31:54.710
> 
> 标签：ruby-on-rails, ubuntu-12.04

在[使用 RVM 安装 Ruby1.9.3 时](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/) `rvm install 1.9.3`，它显示以下消息。

```
The program 'rvm' is currently not installed.  You can install it by typing:
sudo apt-get install ruby-rvm 
```

之后我尝试安装 ruby​​-rvm 但它最后显示以下消息。

```
...
Setting up libreadline-gplv2-dev (5.2-11) ...
Setting up ruby-rvm (1.6.9-0ubuntu2) ...
dpkg-statoverride: error: syntax error: unknown group 'admin' in statoverride file
dpkg: error processing ruby-rvm (--configure):
 subprocess installed post-installation script returned error exit status 2
Errors were encountered while processing:
 ruby-rvm
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

收到此消息后，我在[此处查看](https://rvm.io//rubies/installing/)，但无法弄清楚上述错误代码的含义。

```
virus@virus-pc:~$ source /usr/local/rvm/scripts/rvm

virus@virus-pc:~$ type rvm | head -1
rvm is a function

virus@virus-pc:~$ rvm use 1.9.3 --default
ruby-1.9.3-p194 is not installed.
To install do: 'rvm install ruby-1.9.3-p194'

virus@virus-pc:~$ rvm install ruby-1.9.3-p194
ruby-1.9.3-p194 - #configure
ruby-1.9.3-p194 - #download
Archive checksum did not match, downloading again.
rm: cannot remove `bin-ruby-1.9.3-p194.tar.bz2': Permission denied
curl: Can't open 'bin-ruby-1.9.3-p194.tar.bz2'!
curl: try 'curl --help' or 'curl --manual' for more information
There was an error(23), please check /usr/local/rvm/log//*.log. Next we'll try to fetch via http.
Trying ftp:// URL instead.
curl: Can't open 'bin-ruby-1.9.3-p194.tar.bz2'!
curl: try 'curl --help' or 'curl --manual' for more information
There was an error(23), please check /usr/local/rvm/log//*.log
Downloading https://rvm.io/binaries/ubuntu/12.04/x86_64/ruby-1.9.3-p194.tar.bz2 failed.
Mounting remote ruby failed, trying to compile.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
mkdir: cannot create directory `/usr/local/rvm/log/ruby-1.9.3-p194': Permission denied
tee: /usr/local/rvm/log/ruby-1.9.3-p194/fetch.log: No such file or directory
bash: /usr/local/rvm/log/ruby-1.9.3-p194/fetch.log: No such file or directory
Error running '/usr/local/rvm/scripts/fetch http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p194.tar.bz2', please read /usr/local/rvm/log/ruby-1.9.3-p194/fetch.log
There has been an error fetching the ruby interpreter. Halting the installation.
bash: /usr/local/rvm/user/installs.new: Permission denied
mv: cannot stat `/usr/local/rvm/user/installs.new': No such file or directory
bash: /usr/local/rvm/user/installs: Permission denied 
```

我曾尝试安装它并浪费了 3 天，但无法成功在 Rails 上安装 ruby​​ 并解决上述错误。由于我是 ruby​​ 新手，因此感谢任何帮助。

环境：Ubuntu-12.04 64位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:08:53.717

您正在尝试使用`apt-get`. 您可能安装了 ruby​​-rvm，但由于它已过时，因此安装已损坏。您可能必须使用突触或通过`sudo apt-get purge ruby-rvm`命令删除它。您不应该通过`apt-get`. 更仔细地阅读 Ryan 的帖子。安装 rvm 的正确命令是：

> curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T15:33:36.870

\curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定 --ruby

在 curl 之前注意反斜杠

# java - 编程任务出现问题 农场生产

> ID：12763611
> 
> 赞同：2
> 
> 时间：2012-10-06T20:32:02.083
> 
> 标签：java

开发一个自上而下的设计并编写一个程序，以逐个农场为合作农场组制作美味爆米花生产的条形图。

*   程序的输入是一系列数据集，每行一个，每个数据集代表一个农场的产量。
*   每个数据集都包含一个场的名称。后跟一个逗号和一个或多个空格，一个十进制数表示种植的英亩数，一个或多个空格，一个整数表示该农场生产的爆米花罐子的数量。
*   输出是一个条形图，用于识别每个农场并以每英亩的品脱玉米显示其产量。
*   每个农场的输出是一行，农场的名称从一行的第一列开始，条形图从第 30 列开始。条形图中的每个标记代表每英亩 25 品脱罐爆米花。
*   今年的生产目标是每英亩500罐。对于产量未达到此目标的农场，图表中应出现竖线，对于产量大于或等于每英亩 500 罐的农场，使用特殊标记。

**例如，给定输入文件**

```
Orville’s Acres, 114.8 43801
Hoffman’s Hills, 77.2 36229
Jiffy Quick Farm, 89.4 24812
Jolly Good Plantation, 183.2 104570
Organically Grown Inc., 45.5 14683 
```

输出将是：

```
Popcorn Co-op
Production in Hundreds
of Pint Jars per Acre
Farm Name 1 2 3 4 5 6
---|---|---|---|---|---|
Orville's Acres *************** |
Hoffman's Hills ****************** |
Jiffy Quick Farm *********** |
Jolly Good Plantation *******************#**
Organically Grown Inc. ************ | 
```

这是我已经运行并打印正确格式的代码，但它有一个异常错误。我试图将一个字符串分成农场名称，然后是双英亩，最后是一个 int jars。输入文件是

```
Orville’s Acres, 114.8  43801
Hoffman’s Hills, 77.2  36229
Jiffy Quick Farm,       89.4  24812
Jolly Good Plantation,  183.2  104570
Organically Grown Inc., 45.5        14683 
```

所有空格的原因是我希望它只是读取带有数据的行。

这是我的源代码

```
import java.util.Scanner;
import java.io.*;

public class Popcorn
{

public static void main(String args[])throws Exception
{

    printHeading(); 

    System.out.print("Input file name you want to read from: ");

    Scanner in = new Scanner(System.in);    

    String fileName = in.next();    //declares fileName a string that uses in as input

    Scanner input = new Scanner(new FileReader(fileName));  //Declares input as the fileName and reads the file in

    int jars;
    double acres;
    String amount;
    String farmName;
    System.out.println();
    System.out.println("\t\t\tPopcorn Co-op");
    System.out.println();
    System.out.println("\t\t\t\tProduction in Hundreds");
    System.out.println("\t\t\t\tof Pint Jars per Acre");
    System.out.println("Farm Name\t\t\t   1   2   3   4   5   6");
    System.out.println("\t\t\t\t---|---|---|---|---|---|");

    while (input.hasNextLine())
    {

        String inputLine = input.nextLine();    

        if (inputLine.isEmpty())
        {   

        }
        else 
        {
            farmName = inputLine.substring(0,inputLine.indexOf(','));
            String inputLine2 =  inputLine.substring(inputLine.indexOf(','),inputLine.length());
            Scanner line = new Scanner(inputLine2);
            acres = line.nextDouble();
            jars = line.nextInt();
            System.out.println(farmName + jars + acres);

        }

    }
}

private static void printHeading(){

    System.out.println("Name");  //this assigns what printHeading will print
    System.out.println("CSC 201-55468 Section 01PR");
    System.out.println("Fall 2012");
    System.out.println("Popcorn Project");
    System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:36:57.950

```
String inputLine2 =  inputLine.substring(inputLine.indexOf(',') + 1); 
```

这会跳过原行没有的逗号。

也许是：

```
line.skip("[ \t]+"); 
```

这是跳过前面的空间所必需的。

* * *

***尝试使用 indexOf+1 的代码后（不跳过）：***

```
...
Orville’s Acres43801114.8
Hoffman’s Hills3622977.2
Jiffy Quick Farm2481289.4
Jolly Good Plantation104570183.2
Organically Grown Inc.1468345.5 
```

考虑到：

```
 System.out.println(farmName + jars + acres); 
```

因为这似乎是家庭作业，所以我把它留在那里。

# java - 有效地检测断开连接的图组件？

> ID：12763612
> 
> 赞同：1
> 
> 时间：2012-10-06T20:32:02.353
> 
> 标签：java, graph-theory

我有以下搜索我的图表以查看是否可以从第一个顶点到达顶点，所有内容都应该连接到该顶点。我这样做是为了确保没有断开的部件。

不幸的是，它非常慢。

有什么我可以做或存储来优化它的吗？

我想了解图表和生成的城市，所以我没有使用真正的图表库。

```
private void removeDisconnectedSquares()
{
    for(int i = 0; i < getNumXNodes(); ++i)
    {
        for(int j = 0; j < getNumYNodes(); ++j)
        {
            //removeDisconnectedSquare(i, j);
            visitedNodes.clear();
            if(!isNodeReachableFrom(getNodeAt(i, j), getNodeAt(0, 0)))
            {
                removeVertex(i, j);
            }
        }
    }
}

private boolean isNodeReachableFrom(GraphNode node, GraphNode target)
{
    if(node == null)
    {
        return false;
    }

    if(visitedNodes.contains(node))
    {
        return false;
    }
    else
    {
        visitedNodes.add(node);
    }

    if(node == target)
    {
        return true;
    }

    if(node.contains(target))
    {
        return true;
    }

    for(int i = 0; i < node.getSize(); ++i)
    {
        if(isNodeReachableFrom(node.at(i), target))
        {
            return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:37:59.687

听起来您想要做的是检测断开的顶点。你应该做的事情是这样的：

```
private ArrayList<GraphNode> getDisconnectedSet(ArrayList<GraphNode> allNodes, GraphNode target)
{
    if(!allNodes.contains(target))
        return;

    allNodes.remove(target);

    for(Edge e : edges) // Need to edit to iterate through connected nodes
        getDisconnectedSet(allNodes, e.otherSide);
} 
```

然后，您使用所有节点的列表调用 getDisconnectedSet，并在它返回列表后仅包含断开连接的节点。

# javascript - Node.js Array.map() 是异步的吗？

> ID：12763613
> 
> 赞同：33
> 
> 时间：2012-10-06T20:32:16.097
> 
> 标签：javascript, node.js, asynchronous, callback, mapping

每次调用 doSomething() 时，我可以指望 nodeIDs 映射完成吗？

```
nodeIDs = $.map(nodeIDs, function(n){
    return n.match(/\d+$/);
});
doSomething(nodeIDs); 
```

我认为 node.js 中的所有回调都是异步的？我确实读过一篇关于一般编程的文章，回调可能是同步的，但我不确定 node.js？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-07T15:36:10.953

JavaScript 也是一种函数式编程语言。你这里有一个“高阶函数”，一个将函数作为参数的函数。高阶函数是同步的（但请参见下面的注释）。

资料来源：

*   [函数式编程](http://www.slideshare.net/tmont/introduction-to-functional-programming-in-javascript)
*   [JavaScript 中的高阶函数](http://web.archive.org/web/20120828191718/http://www.spheredev.org/wiki/Higher-order_programming_in_JavaScript)

`map()`是高阶函数的典型例子。它接受一个函数并将其应用于数组的所有元素。这个定义听起来很“实用”。Node 也不提供此功能。它由[MDN Array.prototype.map()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)记录并由[ECMAScript 5.1](http://es5.github.com/#x15.4.4.19)指定。

回答您的问题：是的，在应用所有元素**后**`doSomething(nodeIDs)`调用。

 *** * *

**注意：**高阶函数是函数式编程的概念。JavaScript 是功能性的，但也深深植根于在浏览器或服务器上执行代码的实用性。我会说，例如`setTimeout()`，即使它将函数作为参数，它也不是高阶函数，因为`setTimeout()`它不是真正纯粹的函数，因为它使用时间。纯粹的功能是永恒的。例如，结果`map()`不取决于时间。这就是这个问题的真正意义所在。如果某些事情不依赖于时间，您可以同步执行它。问题解决了。

感谢 Simon 挑战 JavaScript 中高阶函数的定义。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-06T20:33:48.917

是的，`.map`是同步的。“回调”并不意味着“异步”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-17T09:53:31.510

导入`async`模块以具有异步 ' `map`' 方法

```
var async = require('async');

var arr = ['1','2'];
async.map(arr, getInfo, function (e, r) {
  console.log(r);
});

function getInfo(name, callback) {
  setTimeout(function() {
    callback(null, name + 'new');
  }, 1000);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T20:33:30.193

这个函数是同步的——否则它不能返回映射操作的结果。

任何可能需要较长时间的回调（主要是由于 IO）在 nodejs 中都是异步的 - 除非该方法被明确标记为同步（例如`fs.readFileSync`- 但不使用回调）。您可能以某种方式混淆了这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-07T19:10:21.710

使用 forof （是同步的）：

```
let arr = ['fizz', 'buzz']
//example
    for (const item of arr) {
   //this Examp_func returns array
     console.log((await Examp_func(item )).length);
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-01-15T03:47:25.187

是的，[map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)函数是异步的，是[ECMAScript](https://tc39.es/ecma262/#sec-map-objects)的一部分。NodeJS 使用该定义中的 map。尝试运行此代码以查看它的实际效果。

```
const array = ['first','second']

function name(params) {
  setTimeout(
    () => console.log('name: ' + params),
    5000
  );
}

console.log('wait for 5 seconds')
array.map(v => {
  name(v)
})
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-17T12:52:15.707

有有用的库在[等待](https://github.com/hunterloftis/awaiting)。[地图](https://hunterloftis.github.io/awaiting/#map)会帮助你。**

# css - 设置div高度的css动画

> ID：12763619
> 
> 赞同：-1
> 
> 时间：2012-10-06T20:32:42.550
> 
> 标签：css

我想知道是否可以使用 CSS 动画设置 div 的高度。我有一个 div，当你将鼠标悬停在它上面时，它会打开，但我希望它保持那个高度而不是缩回到原来的高度。这可能吗？它需要在纯 css 而不是 javascript 中完成，因为它是一个大学网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:17:51.487

是的，仅使用 CSS3 即可，但仅适用于 Safari/Chrome 和最新版本的 Opera、Mozilla Firefox 和 IE10，因为您需要 CSS3 动画关键帧来保留过渡的最终状态。

[http://jsfiddle.net/rPc88/3/](http://jsfiddle.net/rPc88/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:49:39.413

你应该使用 jQuery。并非所有浏览器都支持 CSS3。但是，可以使用 CSS3 来实现这一点。

CSS：

```
#myDiv {
    height:20px;/* initial height */
    width:100px;
    background:#aaa;
    -webkit-transition: height .4s linear; /* you can replace 'height' with the attribute you are changing (eg: color, width...)*/
    -moz-transition: height .4s linear;
    -o-transition: height .4s linear;
    -ms-transition: height .4s linear;
    transition: height .4s linear;
}

#myDiv:hover {
    height:100px; /* desired height */
} 
```

HTML：

```
<div id="myDiv">
    Hello World!
</div> 
```

希望这可以帮助。

编辑：对不起，我没有看到你需要它来保持那个高度。为了做到这一点，您需要使用类似 onmouseout（或另一个事件监听器）之类的东西，最终还是会使用 Javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:50:02.730

你可以这样做： -

## HTML：

```
<div class="divAnimate" onmouseout="this.className='setHeight'">Div Height Animation</div>​ 
```

## CSS：

```
.divAnimate {
    border: 1px solid;
}
.divAnimate:hover {
    height: 200px;
}
.setHeight {
    height: 200px;
    border: 1px solid;
} 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/hj5Sq/)**

# v8 - v8 构造函数

> ID：12763630
> 
> 赞同：2
> 
> 时间：2012-10-06T20:34:00.633
> 
> 标签：v8

我正在研究 v8 源代码，但似乎无法找到所有基本构造函数（如 Array、Object 或 String）的定义位置。

有

```
InstallFunctions($Object.prototype, DONT_ENUM, $Array( 
```

在*v8natives.js*和

```
var $Object = global.Object; 
```

在*runtime.js*中，但从哪里来`global.Object`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:12:59.457

它们来自引导程序。例如[对象](https://github.com/v8/v8/blob/master/src/bootstrapper.cc#L1140)和[数组](https://github.com/v8/v8/blob/master/src/bootstrapper.cc#L1282)。

# javascript - 如何使用 javascript 强制嵌入式 Flash 电影播放器 退出全屏模式

> ID：12763632
> 
> 赞同：3
> 
> 时间：2012-10-06T20:34:11.403
> 
> 标签：javascript, flash, fullscreen

我有一个嵌入式 Flash 电影播放器​​。我还使用[超时对话框](http://rigoneri.github.com/timeout-dialog.js/)来设置一个计时器，该计时器有一个弹出窗口，会在人们自动注销之前警告他们。会话超时对话框不会显示在全屏模式 Flash 播放器的顶部，因此即使人们正在观看 Flash 播放器，他们也不会收到即将注销的警告。

使用 alert() 会让人们脱离全屏模式，但它不是很吸引人。还有其他黑客吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:41:32.077

在 Flash 中定义一个函数`exitFullScreen`以退出全屏模式并在 Flash 中执行此操作：

```
import flash.external.ExternalInterface;

if (ExternalInterface.available) ExternalInterface.addCallback("exitFullScreen", exitFullScreen); 
```

然后您可以`exitFullScreen`在 JavaScript 中调用 flash 对象。

请参阅：[外部接口参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:43:17.000

如果您正在开发 flash 对象，您可以使用 ExternalInterface ( [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html) ) 让 javascript 调用 flash 播放器，并且Flash 播放器可以将显示状态设置为正常 ( `Stage["displayState"] = "normal";`)。

如果您不开发播放器，则可以将`allowfullscreen`flash 元素设置为`false`.

# jmeter - JMeter - 您如何对与页面相关的所有请求进行分组以提供更清晰的结果？

> ID：12763636
> 
> 赞同：13
> 
> 时间：2012-10-06T20:34:31.177
> 
> 标签：jmeter

我是 JMeter 的新手，刚刚使用代理服务器创建了一个测试计划。

测试计划涵盖了在 Web 应用程序上相当长的用户旅程，其中请求了很多页面、图像、脚本和 css，因此当我运行测试计划并在侦听器中查看结果时，例如“查看结果树” ' 采样器列表很长，如果我尝试使用图表，结果会很多，很难找出单个值。

在 JMeter 中是否有一种方法可以将与该页面下的页面相关的所有请求分组，并且只需要在侦听器中显示页面名称，但仍然能够钻入单个页面并查看每个示例的详细信息？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T21:10:27.417

为此，您可以使用事务控制器：

*   [https://jmeter.apache.org/usermanual/component_reference.html#Transaction_Controller](https://jmeter.apache.org/usermanual/component_reference.html#Transaction_Controller)

保持未选中**在生成的样本中包含计时器和前置处理器的持续时间。**

如果你想正确地学习 jmeter，这[本书](https://leanpub.com/master-jmeter-from-load-test-to-devops)会对你有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T23:42:11.670

我同意 PMD，事务控制器正是您所需要的。
如果启用`jMeter proxy`'s option ，则可以自动实现（在保存测试时） `Put each group in a new transaction controller`。

更多细节（关于我经常使用的 jMeter 插件的侦听器）：
[Define a group of requests in order to gain a total time in Jmeter](https://stackoverflow.com/questions/12065147/define-a-group-of-requests-in-order-to-obtain-a-total-time-in-jmeter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T06:36:40.217

您可以使用工具**BADBOY**工具来记录您的测试，在那里您可以轻松地分叉/删除不需要的内容。从 BADBOY，您可以直接将录制的脚本导出到 JMeter，只需从

> 文件菜单>>导出到 JMeter

这是我们目前正在关注的，并且有点容易使用。

# backbone.js - 在backbone.js中循环collection.fetch一定次数

> ID：12763637
> 
> 赞同：1
> 
> 时间：2012-10-06T20:34:38.377
> 
> 标签：backbone.js, coffeescript

我正在尝试获取收集`x`时间，每次都增加一个计数器。我遇到的问题是，由于我需要在回调中呈现视图，并且由于`.fetch()`是异步的，因此我不能简单地执行 javascript 循环。我想以某种方式在`success`回调中告诉它再次调用自己，而不会陷入无限循环。

这是我所拥有的：

```
@collection.fetch
      data: {q: letters, i: i}
      success:
        @renderList() 
```

我怎样才能使这个运行`x`时间，每次递增`i`，同时等待`@renderList`完成，然后再运行它？

**更新**

所以，我正在取得进展——这似乎有效，但看起来很糟糕：

```
@collection.fetch
      data: {q: letters, i: 1}
      success:
        @collection.fetch
          data: {q:letters, i:2}
          success:
            @collection.fetch
              data: {q:letters, i:3} 
```

此外，成功回调在控制台中给了我这个警告：

```
Uncaught TypeError: object is not a function 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:29:25.530

也许尝试像这样的递归函数（这只是一个例子）：

```
recursiveFetch = (collection, successCallback, counter, data) ->
    if counter == 0
        successCallback()
        return
    data.i = counter
    collection.fetch
        data: data
        success: -> recursiveFetch(collection, successCallback, counter-1, data) 
```

并这样称呼它：

```
recursiveFetch(@collection, => @renderList(), i, {q:letters}) 
```

# php - PHP MySQL计算有多少行有相同的数据

> ID：12763639
> 
> 赞同：0
> 
> 时间：2012-10-06T20:34:41.940
> 
> 标签：php, mysql

好的，我知道我可以说 WHERE example='vrvrv' 但事实并非如此。好的，我有一个评级系统，每当对页面进行评级时，页面 ID 和评级日期都会发送到我数据库中的表中。现在在主页上，我想确定当天评分最高的日期，我可以轻松比较日期，但我不太确定如何计算 project_id 列中有多少行具有相同的值。如果有人可以帮助我，那就太棒了，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:36:47.743

您可以使用 GROUP 和 COUNT 来获取重复项：

```
SELECT count(`project_id`) AS `duplicates` FROM `table` GROUP BY `project_id` HAVING `duplicates` > 1 
```

# servlets - Servlet 到 JSF 的转换

> ID：12763646
> 
> 赞同：0
> 
> 时间：2012-10-06T20:35:52.147
> 
> 标签：servlets, jsf-2

我有一个当前基于 servlet（应用服务器 glassfish）运行的应用程序。外部应用程序对该 servlet 进行 HTTP 调用，并在成功实现其设计目标后获得响应。

我现在需要将整个应用程序转移到 JSF2.0，因为它需要一个前端并且坚持使用 servlet/jsp 不是一种选择。

我的问题是：

1.  在我的 JSF2.0 Web 应用程序中实现外部应用程序通过 http 调用完成任务的场景的推荐方法是什么（目前我正在使用 servlet 实现）
2.  我需要在应用程序范围内维护一些计数器；你会建议我在我的 jsf 应用程序中继续使用 servlet，并且应用程序范围的 bean 是否可以在 servlet 中调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:22:12.873

您描述旧应用程序的方式听起来很像**Web 服务**。

JSF 是基于组件的 MVC 框架，而不是 Web 服务框架。所以 JSF 基本上是不适合这项工作的工具。如果您想继续使用标准 Java EE 堆栈，请查看[JAX-WS](http://metro.java.net/guide/) (SOAP) 或[JAX-RS](http://jersey.java.net/use/getting-started.html) (RESTful)。后者是当今的“标准”Web 服务框架。

### 也可以看看：

*   [Servlet 与 RESTful](https://stackoverflow.com/questions/7874695/servlet-vs-restful/7875851#7875851)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T02:57:04.450

> 在我的 JSF2.0 Web 应用程序中实现外部应用程序通过 http 调用完成任务的场景的推荐方法是什么（目前我正在使用 servlet 实现）

就像 BalusC 所说，JSF 并不是您真正需要的，也不是为您打算使用它而设计的，Web 服务是。话虽如此，如果您**无法**开发有效的 Web 服务，您可以使用 JSF 实现您的目标，因为您的团队缺乏技术专长，或者时间因素或其他技术限制需要您为客户服务通过网络应用程序（老实说，我想不出任何东西，但嘿，你永远不知道）

话虽如此，我假设您已经了解 JSF2：[看看这个](https://stackoverflow.com/a/12756832/1530938)与您的问题有些相似的问题的答案。最后，由于您在 Java EE 5-6 堆栈中，我强烈建议您开始开发 Web 服务（对于基本要求，它们的开发相当简单）。您可以[在此处](http://www.javacoda.com/blog/?p=22)下载教程或使用 oracle 的[教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnayn.html)

> 我需要在应用程序范围内维护一些计数器；你会建议我在我的 jsf 应用程序中继续使用 servlet，并且应用程序范围的 bean 是否可以在 servlet 中调用？

除非您向我们提供您的特定用例，否则在 JSF 应用程序中维护 servlet 的原因很少且相差甚远。**是**的，应用程序、会话和请求范围的 bean 可以从 servlet 中访问。它们被简单地存储为它们命名的范围内的对象、applicationScope 中的应用程序范围 bean、会话中的会话范围 bean 和请求中的请求范围 bean。您可以使用您的 JSF webapp 来处理低级别的 http 请求，但它是圆孔中的方钉。

# vb.net - 如何返回列表框的选定行

> ID：12763647
> 
> 赞同：0
> 
> 时间：2012-10-06T20:35:53.270
> 
> 标签：vb.net

我构建了一个包含 5 行的列表框。在每个行上按 ENTER 键会生成一个新的列表框，并且 ESC 键返回到前一个。问题是：当我输入第一个列表框的第 3 行时，按 ESC 后它会返回但第一行处于活动状态。我如何才能激活最后选择的行？（在我的示例中，我希望在按 esc 后选择第 3 行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:39:36.557

您可以使用 listBox1.SelectedIndex 来获取和设置选定的行：

```
Dim index As Integer = listBox1.SelectedIndex
listBox1.SelectedIndex = index + 1 
```

# java - 测试用例：需要弄清楚如何制作两个测试用例来测试我的方法，使双精度

> ID：12763648
> 
> 赞同：0
> 
> 时间：2012-10-06T20:36:04.970
> 
> 标签：java, unit-testing

我正在尝试制作一个测试用例，使我能够检查我的方法是否有效。一种方法接受双精度数并将其转换为四舍五入到小数点后两位的字符串，另一种方法将双精度数四舍五入为整数。如果有人有任何建议或可以帮助我，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:44:36.343

我可以看到不止一个测试用例；

*   将整数四舍五入到两位，检查两位小数是否存在并且值为“00”。
*   将整数四舍五入到两位，检查十进制符号对于您正在测试的语言环境是否正确。
*   将整数 + 0.005 舍入到小数点后两位，检查它是否以正确的方式四舍五入（向上/向下/银行家/向偶数/...）
*   将整数 + 0.015 舍入到小数点后两位，检查它是否以正确的方式四舍五入（向上/向下/银行家/向/偶数/...）
*   将整数 + 0.5 舍入为整数，检查舍入方向。
*   ...

你明白了它的精神，如果你*真的*想测试，你不只是使用*一个*测试“只是为了完成它”。

考虑所有极端情况并**对其**进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:43:37.857

我认为除了你之外，没有人能帮助你。为什么？因为你已经写了这个方法并且你给这个方法加上了一些逻辑。问问自己为什么？什么？如何？在哪里 ？等等。所有这些问题都是针对您的方法的，如果您找到答案，您将用大百分比的测试覆盖您的方法。

# css - 当我添加一个文档类型时 CSS 消失了

> ID：12763649
> 
> 赞同：3
> 
> 时间：2012-10-06T20:36:09.307
> 
> 标签：css, nginx, doctype

当我向我的网站添加 doctype 时，我的 CSS 无法加载。当没有文档类型时它工作正常。

这是我的文档类型：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

我的 CSS 位置在这里：

```
www.site.com/static/css/main.css 
```

定义如下：

```
<link href="/static/css/main.css" rel="stylesheet" type="text/css" /> 
```

我做了一些谷歌搜索，但我的网站几乎可以验证，所以我不明白为什么整个 CSS 会拒绝完全显示！

这是一个网址：[LIVE SITE](http://shoutkey.com/impression)

我正在使用最新的谷歌浏览器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T20:51:43.950

> [21:51:53.698] 样式表 /static/css/main.css 未加载，因为它的 MIME 类型“text/plain”不是“text/css”。

您需要确保 mime 类型是`text/css`.

# jquery - changepage（）期间的jquery移动加载消息

> ID：12763657
> 
> 赞同：1
> 
> 时间：2012-10-06T20:37:08.150
> 
> 标签：jquery, jquery-mobile

当我尝试使用从一页导航到另一页（单页模板）时，如何使**JQM 加载消息**`changePage("$('#page-id')", { transition: "none" });`显示出来？

截至目前，我`$.mobile.loading("show");`在 changePage 发生之前打电话。

我已经尝试过[this](https://stackoverflow.com/questions/11098742/jquery-mobile-show-loading-breaks-during-changepage)和[this](https://stackoverflow.com/questions/7208609/show-page-loading-spinner-on-ajax-call-in-jquery-mobile?rq=1)中的方法，但它仍然不起作用。我在单击源页面中的按钮时使用 changePage 。上述链接中提供的方法仅适用于 FF。不适用于 Android、iOS 原生浏览器以及 Chrome 或 Safari。

哦，我正在使用 JQM v1.2.0 稳定版。

**编辑：** **继承人我使用的代码**

```
$(".listview").live("click", function () {
     $.mobile.loading('show', {
        text: 'Please wait... Loading...',
        textVisible: true,
        theme: 'a',
        textonly: true
    });
    var v1= $(this).attr("v1");
    //var CourseID = "";
    var v2= $(this).attr("v2");
    var v3= $.trim($(this).children("h3").text());
    var v4= $.trim($(this).find("span").children("span:first").text());
    var v5= $.trim($(this).children("p:last").text());
    $.ajax({
            async: false,
            type: "POST",
            url: "//url of the webmethod//",
            data: "{v1:" + v1+ ", p:" + id + "}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            success: function (msg) {
                ViewModel.variable1({ //binding data to ViewModel here//
                });
                $.mobile.changePage("#course-pg", { transition: "none" });
            },
            error: function (msg) {
                $("#errorpopup").popup('open');
            },
            complete: function () {
                $.mobile.loading('hide');
            }
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:39:01.660

我也一直在思考这个问题。

问题是，您可能正在做所有事情，调用微调器，调用 changePage，......问题是（在我看来），微调器只显示`while the page is loading`而不是`while the loaded page is rendering`. 假设您加载了一个 2k 的 gzipped 页面，该页面实际上加载速度太快，您甚至看不到微调器。根据正在加载的小部件，增强需要相当长的时间，因此您的微调器对于少数`ms`页面加载可见，但对于`2-3 seconds`页面呈现不可见。

我正在使用我自己的微调器调用（JQM 1.1）：

```
var spin = 
    function( what ){
        if ( what == "show"){
            console.log("SHOWIN");
            $.mobile.showPageLoadingMsg();
            } else {
            console.log("HIDING");
            $.mobile.hidePageLoadingMsg()
            }
        }; 
```

将其放入您的代码中，并在进行 changePage 调用之前手动触发它：

```
 spin("show"); 
```

并在回调中，或您之后使用的任何处理程序中，

```
 spin("hide"); 
```

这应该让您了解微调器何时显示以及何时离开。

如果您想知道，我希望微调器会在渲染期间显示。那会更有用，但我不确定这是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:43:15.687

我终于找到了解决这个问题的方法。它实际上是非正统的，我不知道为什么这是唯一的方法。不管怎样，就到这里吧。我创建了一个`href`设置为第二页的锚标记并使用 css 隐藏它。

```
<a href="#page-id" id="linktonext" style="display:none">Click here</a> 
```

我首先有`$.mobile.loading("show");`，在 ajax 调用获取数据之后，会触发单击此锚标记。在`pageinit`第二页上，我用来自 ajax 调用的数据填充页面。在此之后，我打电话给`$.mobile.loading("hide")`. 完美运行。

# database - 《数据库管理系统》一书中的 B+ 树解决方案

> ID：12763658
> 
> 赞同：2
> 
> 时间：2012-10-06T20:37:12.550
> 
> 标签：database, b-tree

有人可以看看练习 10.1 和第二 (2) 部分[[手册]](http://pages.cs.wisc.edu/~dbbook/openAccess/thirdEdition/solutions/ans3ed-oddonly.pdf)。

问题在第 88 页，解决方案在第 89 页图 10.3。

问题：

> ### 10.1
> 
> > **2.**显示将带有键 3 的数据条目插入原始树所产生的 B+ 树。插入需要多少页读取和页写入？

结果密钥是否正确？我相信不是。

原始树 ![在此处输入图像描述](../Images/fa8cf439edaaef35eb868f4d5f10aef6.png)

书的答案（添加元素 3 后）

> 带有键 3 的数据条目进入第一个叶页 F。由于 F 最多可以容纳四个数据条目（d = 2），因此 F 分裂。新叶子的最低数据条目被放弃给同样分裂的祖先。结果如图 10.3 所示。插入将需要 5 次页面写入、4 次页面读取和 2 个新页面的分配。

![在此处输入图像描述](../Images/8311ef2420e825933cc0daac9f454d78.png)

我的答案（添加元素 3 后）

> 带有键 3 的数据条目进入第一个叶页 F。由于 F 最多可以容纳四个数据条目（d = 2），因此 F 拆分并将中间数据条目移动到父页面。新叶子的最低数据条目[3](https://i.stack.imgur.com/Tu1xw.png)被交给同样分裂的祖先。

![在此处输入图像描述](../Images/58c26225147746d3e9229fff8b32b971.png)

**假设：**这本书是否将 5 作为关键，因为如果使用了 3，那么应该浪费一个地方？我们有 4 个地方，我们只能使用 3 个。第四个地方永远是免费的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:42:56.863

两个答案都会产生有效的树。为什么要关心中间记录（3）是落在第一个数据块还是第二个数据块？文本的答案具有非常小的实际优势，因为插入升序键序列（通常超过降序序列）将产生稍微密集的树，在这种情况下会导致 I/O 稍微减少。

# sql - Django 模型和自动创建的表

> ID：12763660
> 
> 赞同：0
> 
> 时间：2012-10-06T20:37:25.287
> 
> 标签：sql, django, models

我在我的项目中使用 django，除了它的表格处理之外一切都很好。

自动创建的表非常适合不想进行原始查询并且对添加和删除列不感兴趣的人。但对我来说，我想完全控制我的数据库。

```
class Partner(models.Model):
    software = models.ManyToManyField(Software) 
```

这将创建：

*   `partner_partner`
*   `partner_partner_software`

第二个表来处理多对多关系。这种行为使我观察和理解我的表结构变得复杂。我认为这允许我这样做：

```
partner = Partner.objects.get(pk=1)
software = partner.software 
```

如果我不使用许多类似关系而不是上面的用法，

```
partner = Partner.objects.get(pk=1)
software = Software.objects.get(name = partner.software) 
```

你认为在这种情况下使用这种技术是最好的选择吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T21:28:52.957

我使用 Django，我可以完全控制我的表。我只是以让 Django 处理 CMS 并让 CodeIgniter 处理站点的方式设置它。

# c# - 重新格式化 SQL 查询，可能的 Pivot

> ID：12763661
> 
> 赞同：0
> 
> 时间：2012-10-06T20:37:28.063
> 
> 标签：c#, sql, tsql, sql-server-ce

![询问](../Images/fd9fd803c54163b7aac1b38ec8ee2e32.png)

该图像显示了我的带有两个表和输出的查询。而不是输出是图像中的格式，我需要它如下。

```
Date Time   |   Load Cell 0   |   Load Cell 1
----------------------------------------------
03/06/2016         12                14
08/07/2016          4                7 
```

我相信我可能需要使用 Pivot ???? 但我只是坚持如何做到这一点。

我在 Visual Studio 中为 C# Windows 窗体应用程序执行此操作，数据将显示在数据网格中并用于图形/图表。使用的数据库是一个 MS SQL CE 文件。

如果有人可以帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:50:58.133

```
select cast(test.datetime as date) [date], 
sum(case when loads.loads_cell = 0 then loads.kN end) [Load Cell 0], 
sum(case when loads.loads_cell = 1 then loads.kN end) [Load Cell 1]
from loads 
join tests on loads.test_id = tests.tests_id
group by cast(test.datetime as date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:56:43.647

您认为这可以从 PIVOT 中受益是正确的。

```
SELECT TestDate, pvt.[0], pvt.[1]
FROM (
     SELECT t.DateTime as TestDate, l.Load_Cell_ID as LCID, l.kn
     FROM loads as l
     INNER JOIN Tests as t on l.Test_ID = t.Test_ID
     ) as inr
PIVOT (
     SUM(kn) FOR LCID in ([0], [1]) --specify additional load cell ids here
) as pvt 
```

话虽如此，我不确定 SQL CE 是否具有枢轴运算符。正如 t-clausen.dk 建议的那样，您可能必须使用嵌套查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:29:38.563

我认为如果您事先不知道列名 - 在您的情况下，SQL 中的 PIVOT 不是一个选项。

我建议您在 C# 中以编程方式旋转该数据（不要将 datagridview 与查询数据绑定，将其与空数据表对象绑定并以编程方式填充该数据表）。

后来补充：

您在评论中询问如何开始。

看看这个：[C# 数据透视表](http://www.codeproject.com/Articles/22008/C-Pivot-Table)

也许它看起来很复杂，但几乎“可以使用”。

# search-engine - Google 的搜索引擎中是否使用了 GET 变量？

> ID：12763666
> 
> 赞同：-1
> 
> 时间：2012-10-06T20:38:01.013
> 
> 标签：search-engine

假设我有一个包含电影的网站。现在每部电影都没有自己的页面，而是将电影的 id 或名称传递给一个特定页面，即 movies.php，数据库中的数据被加载到该页面中。
现在如果我在谷歌搜索我的网站会在结果中与该电影一起列出特定电影吗？
换句话说，如果我将那部电影存储在我的数据库中，但没有单独的页面，它是否会仅通过获取传入 movies.php 的 GET 变量（即 $movie_name）出现在搜索引擎中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:47:54.673

如果您的每部电影都有自己的页面，`movies.com/movies.php?movie=half_baked` 那么这将被视为一个唯一页面。

您需要为 Google 提供一种区分不同页面的方法。

您可以通过键入 google 搜索您的网站`site:yoursite.com`。这将向您显示 google 已编入索引的每个页面。

查看规范页面[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

# regex - 替换记事本++中的值

> ID：12763667
> 
> 赞同：1
> 
> 时间：2012-10-06T20:38:25.723
> 
> 标签：regex, notepad++, replace

我正在尝试更改以下内容：

(民 1:1)
(民 1:2)
(民 1:3)
(民 1:4)
(民 1:5)
(民 1:6)
(民 1:7)
(民 1:8)
(民1:9)
（民数记 1:10）

ETC

至

数字|1|1|
数字|1|2|
数字|1|3|
数字|1|4|
数字|1|5|
数字|1|6|
数字|1|7|
数字|1|8|
数字|1|9|
数字|1|10|
ETC

在 Notepad++ 中进行简单的搜索和替换，而不是尝试逐行替换每一行。由于这些是圣经经文参考，因此有超过 31000 行需要更改。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:58:21.860

转到查找/替换面板 (CTRL+F)，选中单选框*正则表达式*，然后在*查找*您写的内容`\(Núm ([0-9]*):([0-9]*)\)`和*替换为*写`NUM|\1|\2`

我添加了一些解释以使用正则表达式在 Notepad++ 中*查找和替换*，因此可能对其他类似的情况有用。

*查找字段*中的括号标识可以在*替换字段中引用的**正则表达式*，在这种特定情况下，第一组在替换中由 \1 引用，第二组 ([0-9]*) 由 \2 引用。在这种情况下，查找字符串中的外部括号用.*`([0-9]*)``\(`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:58:17.867

您可以分三步完成（替换工具的三种用途）：

`(Núm |` 至`NUM`

`:`至`|`

`)`至`|`

调用替换工具的最简单方法是点击`Ctrl+F`并转到第二个选项卡。*

# objective-c - 如何以编程方式将 NSTableColumn 绑定到 NSArrayController 安排对象？

> ID：12763669
> 
> 赞同：2
> 
> 时间：2012-10-06T20:38:57.033
> 
> 标签：objective-c, binding, nsarraycontroller, nstablecolumn

所以我有一个`NSTableView`动态的`NSTableColumns`。列应该从 NSArrayController 的排列对象中获取数据。

由于一切都是动态的，我不能真正使用界面生成器来绑定值。如何以编程方式执行此操作？

我试过这个：

```
NSTableColumn *newColumn = [[NSTableColumn alloc]initWithIdentifier:aKey];
[newColumn.value bind:@"value" toObject:arrayController.arrangedObjects withKeyPath:aKey options:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:14:32.850

好吧，我想通了。。

```
NSString *akey = @"somekey";
NSString *keypath = [NSString stringWithFormat:@"arrangedObjects.%@",akey];
[newColumn bind:@"value" toObject:arrayController withKeyPath:keypath options:nil]; 
```

# python - 我在我的程序中创建文件时遇到了一个小问题

> ID：12763670
> 
> 赞同：0
> 
> 时间：2012-10-06T20:38:57.400
> 
> 标签：python, python-3.x

我正在编写一个程序，它让用户输入一些名称，并使用这些名称创建一个文件。我正在使用 Python 3.2。

```
number = eval(input("How many names are there? "))
#Say the user enters 2
outfile = open('names.txt', 'w')

for i in range(number):
    name = input("Enter a name >> ")
#Say the user first enters Bob
#Then the user enters Joe

print (name, file=outfile)
outfile.close()
print ("Names have been written to file") 
```

它有效，但有一个问题。现在显示的文件只有一行：“Joe”。其他名字都没有出现，只有最后一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:40:45.427

你有这个代码： -

```
for i in range(number):
    name = input("Enter a name >> ")
#Say the user first enters Bob
#Then the user enters Joe

print (name, file=outfile) 
```

您打印的语句应该在循环内..

```
for i in range(number):
    name = input("Enter a name >> ")
    print (name, file=outfile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:42:20.067

缩进！由于您现在编写代码，因此该语句`print (name, file=outfile)`在循环之外执行一次。所以最后一次`name`被设置为任何东西就是剩下的那个。

要解决此问题，请确保在输入文件后立即调用写入文件的语句，为此，您应该将其缩进与输入语句一样深，调用次数与输入的次数一样多。

# sparql - 属性名称 sparql 中的斜线

> ID：12763671
> 
> 赞同：1
> 
> 时间：2012-10-06T20:39:16.570
> 
> 标签：sparql, dbpedia

我正在使用 sparql 和 dbpedia 开发一个项目。我目前遇到带有斜线的 textuel 属性的问题。这是一个带有“discharge”属性的工作查询，它​​表示一条河流的每次水量：

```
PREFIX dbp: <http://dbpedia.org/property/> 
SELECT ?discharge 
WHERE
{
   <http://dbpedia.org/resource/Nile> dbp:discharge ?discharge .
   FILTER(ISLITERAL(?discharge))
} 
LIMIT 200 
```

这个请求工作正常。仍然如果使用一个名为“discharge_m3/s”的类似属性，它不再工作了，我得到了这个错误，它增加了属性名称上的斜线：

> Virtuoso 37000 错误 SP030：SPARQL 编译器，第 3 行：在 's' 之前的 '/' 处出现语法错误

有什么想法可以通过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T05:53:04.817

您的意思是您正在尝试以前缀名称形式使用该属性，即`dbp:discharge_m3/s`？

如果是这种情况，则不能这样做，因为根据 SPARQL 语法，这不是有效的前缀名称，因此会出现编译器错误。

您必须包含完整的 URI 而不是前缀名称形式，例如

`<http://dbpedia.org/property/discharge_m3/s>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T18:55:32.007

在兼容的 SPARQL 1.1 系统中，您可以反斜杠转义斜杠：`dbp:discharge_m3\/s`. 我不确定 Virtuoso 是否支持该语法。与此同时，@RobV 的解决方案将起作用。

# java - 自动装配 Spring 3.1 独立应用程序返回“没有定义类型 [xxxx] 的唯一 bean”异常

> ID：12763678
> 
> 赞同：1
> 
> 时间：2012-10-06T20:40:01.940
> 
> 标签：java, eclipse, spring, jakarta-ee, applicationcontext

我正在编写一个独立的应用程序（不是基于 Web 的），它将使用以下命令从命令提示符运行：

```
java -jar myapplication.jar 
```

我在 Eclipse 上将应用程序开发为 Maven 项目，因此 Eclipse 检索所有依赖库。如果我右键单击主类并选择“运行方式”>“Java 应用程序”它工作正常。

现在我遇到的问题是我需要将应用程序部署为单个 jar 文件。为此，我使用 Eclipse 将应用程序导出为“Runnable Jar”（即通过“导出命令”）。这生成了 jar 文件。我查看了 jar 文件，所有的类和依赖的 jar 文件都在 jar 文件中。Spring 应用程序上下文文件也在顶级文件夹的 jar 文件中。jar 文件的“内部”如下所示：

```
- com
    - myapp
      - service
         - MyAppService.class
      - dao
         - MyAppDataDao.class   
      - MyMainClass.class

- META-INF
- org
- application-context-components.xml
- log4j.properties
- [several jar files for spring, log4j, velocity etc) 
```

我尝试使用以下命令运行 jar 文件，它给了我这个错误：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.myapp.MyMainClass] is defined: expected single bean but found 0:
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:257)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1012)
        at com.myapp.MyMainClass.init(MyMainClass.java:44)
        at com.myapp.MyMainClass.main(MyMainClass.java:65)
        ... 5 more 
```

com.myapp.MyMainClass 文件位于具有正确名称的 jar 文件中。包中的类是自动装配的。我认为我一定错过了注释中的某些内容，或者可能是应用程序上下文文件中的某些内容。类的结构和使用的注解如下所示：

```
MyMainClass

@Component
public class MyMainClass{

    @Autowired
    MyAppService myAppService;

    public static void main(String args[]){
        try{
            context = new     ClassPathXmlApplicationContext(properties.get("app.context"));

 MyMainClass mymainClass = context.getBean(MyMainClass.class);
 mymainClass.myAppService.getData()....
 ....
            }catch(Exception e){
                throw new CWAException(fname + ":" + e);
            }
        }
    } 
```

app.context 属性返回应用程序上下文文件的名称。

我的应用服务

```
@Service
public class MyAppService{

    @Autowired
    MyAppDataDao myAppDataDao;

    ---
    ---
    ---
} 
```

MyAppDataDao

```
@Repository("myAppDataDao;")
public class MyAppDataDao {

    getData(){
    }

    ---
    ---
    ---
} 
```

应用程序上下文文件如下所示

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Auto scan the components -->
    <context:component-scan base-package="com.myapp" />

    <bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean" 
          p:resourceLoaderPath="file://C:\template" 
          p:preferFileSystemAccess="true"/>  

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName"><value>oracle.jdbc.driver.OracleDriver</value></property>
        <property name="url"><value>jdbc:oracle:thin:@x.x.x.x:x</value></property>
        <property name="username"><value>xxx</value></property>
        <property name="password"><value>xxx</value></property>
    </bean>              
</beans> 
```

查看错误，我猜想自动装配没有启动，但我无法弄清楚我在哪里弄错了。该应用程序位于打包的 jar 文件中，我正在加载该文件，`ClassPathXmlApplicationContext`因此它应该可以找到它。我也不明白为什么它可以在 eclipse 上运行，但在导出之后却不行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T09:02:24.460

Spring3.0 中的 PathMatchingResourcePatternResolver 类至少不会在 jar 中搜索带有 autowiring 注解的类。

将 jar 所在的目录添加到类路径中。

它将检测类并作为 bean 加载。

# audio - 如何配置 JACK 音频服务器以自动使用特定卡？

> ID：12763680
> 
> 赞同：5
> 
> 时间：2012-10-06T20:40:29.327
> 
> 标签：audio, ubuntu, alsa

我在 HP Pavilion dm1 4200sg 上网本上运行 Ubuntu 12.04 studio。这几乎是一个全新的安装。我尝试通过运行启动jackd服务器

```
jackd -R -d alsa 
```

它失败并输出：

```
JACK server starting in realtime mode with priority 10
control device hw:0
control device hw:0
audio_reservation_init
Acquire audio card Audio0
creating alsa driver ... hw:0|hw:0|1024|2|48000|0|0|nomon|swmeter|-|32bit
control device hw:0
ALSA: Cannot open PCM device alsa_pcm for playback. Falling back to capture-only mode
Cannot initialize driver
JackServer::Open() failed with -1
Failed to open server 
```

运行 aplay -l 给出以下输出：

```
**** List of PLAYBACK Hardware Devices ****
card 0: Generic [HD-Audio Generic], device 3: HDMI 0 [HDMI 0]
Subdevices: 1/1
Subdevice #0: subdevice #0
card 1: SB [HDA ATI SB], device 0: STAC92xx Analog [STAC92xx Analog]
Subdevices: 1/1
Subdevice #0: subdevice #0 
```

我发现通过运行

```
jackd -R -d alsa -d hw:1 
```

jackd 启动成功。我想配置我的机器，使 hw:1 成为默认选项（即使原始的 'jackd -R -d alsa' 命令工作）。谁能帮我做到这一点？

我尝试将 ~/.asoundrc 编辑为

```
pcm.!default {
     type hw
     card 1
}

ctl.!default {
     type hw
     card 1
} 
```

但这似乎不起作用。我已经远离了我的舒适区，任何帮助都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:35:16.520

我找到了解决方法。它不会配置 JACK 服务器，但会更改声卡的列出顺序。

我第一次进入终端：

```
sudo lshw -c multimedia 
```

它显示了两张卡正在使用哪些模块。他们都使用'snd-hda-intel'。

然后我进入终端：

```
cat /proc/asound/card0/id
cat /proc/asound/card1/id 
```

分别为卡 0 和 1 提供了 ID 'Generic' 和 'SB'。

然后我将以下两行添加到文件'/etc/modprobe.d./alsa-base.conf'的末尾

```
options snd-hda-intel id=SB index=0
options snd-hda-intel id=Generic index=1 
```

重新启动机器后，卡“SB”被加载到位置 0 并且

```
jackd -R -d alsa 
```

正确启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-07T22:28:18.253

首先，在终端窗口中，运行以下命令： `cat /proc/asound/cards.` 您会看到类似这样的输出：

```
 0 [SB             ]: HDA-Intel - HDA ATI SB
                      HDA ATI SB at 0xfcef8000 irq 16
 1 [DSP            ]: H-DSP - Hammerfall DSP
                      RME Hammerfall DSP + Digiface at 0xfcff0000, irq 20
 2 [NVidia         ]: HDA-Intel - HDA NVidia
                      HDA NVidia at 0xfe57c000 irq 32 
```

每个声卡的“名称”都在方括号中。

有了这些信息，您现在可以将特定设备称为，例如 hw:DSP 现在您可以执行以下命令：

```
jackd -d alsa -d hw:DSP 
```

仅此而已，取自： [http ://www.jackaudio.org/faq/device_naming.html](http://www.jackaudio.org/faq/device_naming.html)

编辑：添加代码标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T19:05:17.513

*   首先，打开alsa-base.conf： sudo gedit /etc/modprobe.d/alsa-base.conf

*   找到以下行：“options snd-hda-intel index=-2”
    并将其更改为：“#options snd-hda-intel index=-2”

重新启动您的机器，然后重试。您可能必须为您的程序设置正确的声音设备 (alsa)。

# java - 单击列表视图中的按钮

> ID：12763681
> 
> 赞同：0
> 
> 时间：2012-10-06T20:40:30.617
> 
> 标签：java, android, xml, list, listview

我有从数据库中检索信息（学生 ID - 学生姓名）的功能，因此列表中的每个项目都将具有（学生 ID 和学生姓名的文本视图）和按钮（删除学生）我尝试测试按钮删除学生，所以如果用户按下它会显示一条带有学生 ID 的 toast 消息，但问题是它不起作用，控制台甚至日志猫都没有错误，那么你认为我该如何解决呢？

我也尝试在列表之外制作按钮代码，但它显示错误你认为我可以如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:45:00.153

这不是您在 ListView 中为 View 设置侦听器的方式。在您`Adapter`的`getView()`方法中，您需要设置`clickListener`. 请务必`setOnItemClickListener`从 ListView 中删除。

# android - 为什么我不能在 SurfaceView 画布上绘制任何东西？

> ID：12763682
> 
> 赞同：3
> 
> 时间：2012-10-06T20:40:33.340
> 
> 标签：android, surfaceview, android-canvas

我试图匹配 LunarLander 的 SurfaceView 绘图风格的实现。

我开始很简单，只是想在用户的触摸输入下画圆圈，但我似乎什么都画不了！**我的应用程序得到的只是一个绿屏（这是布局 xml 中视图的背景颜色）**。

为了绘制一些东西，我尝试在整个画布上绘制一个黑色矩形，在 0,0 处绘制一个圆圈和一个位图图像。这些平局都没有成功。它们都被调用，没有一个抛出异常，但屏幕永远不会从绿色变为绿色。

我很想弄清楚这一点，所以这是我的代码（减去游戏引擎，这在这一点上无关紧要）。

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <com.jknight.particletoy.view.GameEngineView
          android:id="@+id/gameengineview"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:background="#FF66FF33"/>
</FrameLayout> 
```

编辑：想通了：

您不能在表面视图的布局中具有背景颜色属性。它正在渲染。

# requirejs - 如何在 TypeScript 中通过 AMD 要求 jquery

> ID：12763684
> 
> 赞同：17
> 
> 时间：2012-10-06T20:40:41.327
> 
> 标签：requirejs, typescript

我的 TypeScript 模块如何需要 jquery AMD 模块。例如，假设脚本的目录结构如下所示：

```
    jquery-1.8.2.js
    jquery.d.ts
    模块.ts
    需要.js

```

我希望从 module.ts 生成的 js 文件要求通过 require.js 加载 jquery-1.8.2.js。

目前我有：

```
    导入 jquery = 模块（'jquery'）

```

这导致**当前范围内不存在名称“jquery”。**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-01T20:04:48.823

# 对于打字稿 1.7+

看起来标准再次发生变化，下面的 0.9+ 方法仍然有效，但是随着 ES6 的到来，可以使用以下模块加载。（参考：[https](https://github.com/TypeStrong/atom-typescript/issues/237#issuecomment-90372105) ://github.com/TypeStrong/atom-typescript/issues/237#issuecomment-90372105 ）

```
import * as $ from "jquery"; 
```

甚至是部分的

```
import {extend} from "jquery"; 
```

（这仍然需要 jquery.d.ts，如果安装了 tsd - `tsd install jquery`）

安装 tsd：`npm install tsd -g`

# 对于打字稿 0.9+

```
/// <reference path="../../typings/jquery/jquery.d.ts" />
import $ = require('jquery');

//Do your stuff 
```

此外，如果您的 jquery.d.ts 没有定义外部模块，请将以下内容添加到 jquery.d.ts：

```
declare module "jquery" {
    export = $;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T13:44:08.627

我认为这方面的很多困惑是由于 jQuery 并没有真正像外部模块一样，它禁止使用`import`语句。该解决方案非常干净、简单和优雅，足以让人感觉不像是一种变通方法。

我编写了一个[在 TypeScript 中使用 RequireJS 和 jQuery](http://www.stevefenton.co.uk/Content/Blog/Date/201302/Blog/Using-RequireJS-and-Jquery-In-TypeScript/)的简单示例，其工作原理如下...

您可以从为 RequireJS 和 jQuery[确定类型](https://github.com/borisyankov/DefinitelyTyped)中获取类型定义。

您现在可以在 TypeScript 文件中使用带有静态类型的原始 RequireJS。

*应用程序.ts*

```
///<reference path="require.d.ts" />
///<reference path="jquery.d.ts" />

require(['jquery'], function ($) {
    $(document).ready(() => {
        alert('Your code executes after jQuery has been loaded.');
    });
}); 
```

然后您只需将单个脚本标签添加到您的页面：

```
<script data-main="app" src="require.js"></script> 
```

与其他解决方案相比的优势？

1.  您可以独立更新 jQuery 和 RequireJS
2.  您不必依赖 shim 项目正在更新
3.  您不必手动加载 jQuery（或其他任何不是“像模块”的`.d.ts`文件）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-09T14:59:38.680

1.  [从 TS 源 ( TypeScriptFile](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#samples/jquery/jquery.d.ts) )获取基本的 jquery.d.ts
2.  将 JQueryStatic 中的 () 声明移动到这样的模块中：
3.  在您的代码模块中导入 jQuery：

* * *

```
import $ = module("jquery");

declare module "jquery" {
   export function (selector: string, context?: any): JQuery;
   export function (element: Element): JQuery;
   export function (object: { }): JQuery;
   export function (elementArray: Element[]): JQuery;
   export function (object: JQuery): JQuery;
   export function (func: Function): JQuery;
   export function (): JQuery;
} 
```

4.  将您的模块编译为 AMD (tsc --module amd my_code.ts)
5.  使用 requirejs 在客户端通过以下配置部分编写您的应用程序：

* * *

```
requirejs.config({
   paths: {
      'jquery': 'js/jquery-1.8.2.min'
   }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T21:40:13.870

首先从官方 github repo 中获取 ( [require-jquery )。](https://github.com/jrburke/require-jquery/blob/master/jquery-require-sample/webapp/scripts/require-jquery.js)在此之后，您的目录将如下所示：

```
require-jquery.js
jquery.d.ts
main.ts
main.js
test.html 
```

目前在 TypeScript 上使用 JQuery 和 AMD 模块的最简单方法是在 main.ts 上编写以下内容：

```
///<reference path="jquery.d.ts" />
declare var require;
require(["jquery"], function($:JQueryStatic) {
    $('body').append('<b>Hello JQuery AMD!</b>');
}); 
```

并从您的 test.html 中调用它：

```
<!DOCTYPE html>
<html>
    <head>
        <script data-main="main" src="require-jquery.js"></script>
    </head>
    <body>
        <h1>TypeScript JQuery AMD test</h1>
    </body>
</html> 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T00:37:04.280

您可以通过路径和文件名（减去 .js 扩展名）引用外部模块，如果它们是全局的，则仅通过文件名引用。在您的情况下，您应该在 module.ts 中执行此操作：

```
import jquery = module('./jquery-1.8.2'); 
```

记住要编译，`--module AMD`因为默认情况下你会得到使用 commonjs`require`函数的代码。

# maven - Maven 不工作？

> ID：12763687
> 
> 赞同：0
> 
> 时间：2012-10-06T20:40:57.490
> 
> 标签：maven, maven-2

最初我使用 maven 和代理，它工作正常。现在我不需要代理，所以我编辑了 settings.xml 以不使用代理。之后，Maven 不会连接到 Internet 来下载 repos。我尝试重新安装，但仍然遇到同样的问题。我什至尝试过 Eclipse 和 IDEA 之类的 IDE，但问题仍然存在。我该如何解决这个问题？

`mvn --version`

```
Apache Maven 2.2.1 (rdebian-8)
Java version: 1.6.0_24
Java home: /usr/lib/jvm/java-6-openjdk-i386/jre
Default locale: en_IN, platform encoding: UTF-8
OS name: "linux" version: "3.2.0-31-generic-pae" arch: "i386" Family: "unix" 
```

`mvn archetype:generate -DgroupId=org.sonatype.mavenbook.simple -DartifactId=simple -DpackageName=org.sonatype.mavenbook -Dversion=1.0-SNAPSHOT`

```
[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'archetype'.
[INFO] org.apache.maven.plugins: checking for updates from central 
```

在这之后什么都没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:47:21.010

考虑到所有因素，我最初的想法是这是一个连接问题，因为在删除代理设置后它无法工作。您是否能够 ping 或 curl 正在扫描的存储库？

# xcode - 在界面生成器中拖动画布

> ID：12763688
> 
> 赞同：11
> 
> 时间：2012-10-06T20:40:58.083
> 
> 标签：xcode, macos, interface-builder

有什么方法可以在界面生成器中拖动画布，例如 Adob​​e Reader 中的手动工具？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T20:56:20.967

没有像 Adob​​e Reader 那样的手动工具。如果您有触控板，则可以使用两指滚动。如果您有鼠标滚轮，您可以使用鼠标滚轮垂直滚动。否则，您只需要使用滚动条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-21T06:21:32.357

我认为触控板上的两指滚动是这里最好的建议。如果您不使用触控板，“缩放以适应”可能对您有用。除了缩放之外，它还将情节提要在窗口中居中，当我希望我有一个手动工具时，十有八九是我真正想做的事情。

它没有默认的快捷方式，所以没有定义自己的快捷方式，只需右键单击画布，然后从上下文菜单中选择“缩放以适合”。或者，单击文档大纲中的场景或视图以使该视图居中。如果视图无法容纳在可见工作区中，它将自动按比例缩小以适应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-28T12:01:04.083

您可以使用键盘滚动：

⌘ → 向右滚动

⌘ ← 向左滚动

⌘ ↓ 向下滚动

⌘ ↑ 向上滚动

这是非常痛苦的，但我能说什么，干得好苹果！:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-03T06:03:59.770

我首先使用键盘快捷键将画布缩放到 50% 或 25%，然后使用 cmd 箭头键。这样，每个箭头键都有更大的效果。

缩放到 25% 会使画布项目变得非常小，因此您可以通过几次 cmd 箭头键击来覆盖很多地方。

# vim - gvim 中实际 vim 窗口周围的填充

> ID：12763692
> 
> 赞同：4
> 
> 时间：2012-10-06T20:41:16.470
> 
> 标签：vim

在 gvim 中，窗口的右侧和底部会出现小填充。特别是当 gvim 窗口最大化时。例如，当我最大化 gvim 窗口时，gvim 的右下角如下所示：

[http://imgur.com/0lAYU](http://imgur.com/0lAYU)

那么我可以用这些填充物做些什么吗？例如，移动实际的编辑区域，使填充从 gvim 窗口的所有四个侧面均匀分布，而不是仅从两个侧面分布。手册的任何部分是否包含对它们的描述？这里没有真正的问题，我只是好奇。

**编辑：**我问的是 gvim 的 Linux 版本。我不知道 gvim 在 Windows 或 Mac 上的类似情况下如何表现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T20:55:21.013

一个常见的解决方法是“破解”GTK，以便 GVim 的窗口背景与您的配色方案的背景颜色相同。它显然不太理想（每次尝试新的配色方案时都必须更改它），但它工作可靠。

把这段代码：

```
style "vimfix" {
  bg[NORMAL] = "#202020" # this matches my gvim theme 'Normal' bg color.
}
widget "vim-main-window.*GtkForm" style "vimfix" 
```

在这个文件中：

```
~/.gtkrc-2.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-27T07:38:43.200

把它放在你的 .gvimrc 中：

```
set ghr=0 
```

:help guiheadroom

```
'guiheadroom' 'ghr'     number  (default 50)
                        global
                        {not in Vi} {only for GTK and X11 GUI}
    The number of pixels subtracted from the screen height when fitting
    the GUI window on the screen.  Set this before the GUI is started,
    e.g., in your gvimrc file.  When zero, the whole screen height will
    be used by the window.  When positive, the specified number of pixel
    lines will be left for window decorations and other items on the
    screen.  Set it to a negative value to allow windows taller than the
    screen. 
```

我[在 ArchWiki 上](https://wiki.archlinux.org/index.php/Vim#Empty_space_at_the_bottom_of_gVim_windows)得到了这个解决方案的提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:43:34.027

您可以调整`lines`和`columns`选项。例如：

```
:set lines=1000
:set columns=1000 
```

`:help lines`您可以使用和了解这些信息`:help columns`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T20:44:49.293

嗯，它存在的原因是因为 Windows 强制它的大小不是正常大小加上整数个字符大小。据我所知，编写 gvim 的人并没有费心添加居中选项。

# view - ember 我无法附加视图

> ID：12763695
> 
> 赞同：0
> 
> 时间：2012-10-06T20:41:28.257
> 
> 标签：view, ember.js

我试图插入一个简单的车把，像这样，但是支持太少了，官方页面中的指南很伤心，我无法做到这一点。

```
<head>
    <!--HANDLEBAR-->
    <script type="text/x-handlebars" data-template-name="say-hello">
        Hello, <b>{{name}}</b>
    </script>

    <!--VIEW-->
    <script>
        var view = Ember.View.create({
            templateName: 'say-hello',
            name: "Bob",
        }); 
        view.appendTo('#templateHere');   //here I try to append the view
   </script> 
```

在萤火虫中我得到错误：找不到模板“say-hello”............但我不知道为什么找不到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:08:56.330

最后我完成了，我在这里写了解决方案，因为我认为 ember 需要更多的文档，它是值得的，因为它非常有趣（而且功能强大）：问题是我在定义它之前创建了我的视图对象。正确的代码是这样的：

……

```
 <!--HANDLEBAR-->
    <script type="text/x-handlebars" data-template-name="say-hello">
            Hello, <b>{{name}}</b>
    </script>

    <!--VIEW-->
    <script>
            App = Ember.Application.create();

            //DEFINE VIEW
            App.Myview = Ember.View.extend({
            templateName: 'say-hello',
            name: "Bob",
            });

            //CREATE VIEW>  
            App.myview=App.Myview.create();
            console.log(App.myview.get('name'));//only for debug

            //APPEND VIEW
            $(function() {
                App.myview.append('#templateHere');
            });

    </script>     

</head>
<body>
  <div id="templateHere"></div>
</body>
</html> 
```

# java - JAVA：使用 While 循环打印出与读入数字一样多的字符

> ID：12763699
> 
> 赞同：1
> 
> 时间：2012-10-06T20:41:49.697
> 
> 标签：java

您好，我在介绍计算机科学实验室工作时遇到问题：

CharacterLine.java：编写一个打印一行字符的程序。提示用户输入一个字符，然后要求输入一个数字。如果数字大于 1 或大于 80，则告诉用户然后退出程序。使用 while 循环将字符打印出与读入的数字一样多的次数。示例：请输入字符：& 请输入数字：15 您的行：&&&&&&&&&&&&&&&

这是我的代码：

```
import java.util.Scanner;

public class CharacterLine

{
    public static void main(String[] args)
    {

        Scanner kb = new Scanner (System.in);
        int number;
        System.out.print("Please enter a character: ");
        String character = kb.next();
        int charact = character.length();

        System.out.print("Please enter a number: ");
        number = kb.nextInt();

        while ( number <= 80 && number >= 1 ){

            if ( number <= 80 && number >= 1 ) {
                int bills = (charact * number);
                System.out.println("Your line: " + charact++);
            }
            else {
                System.out.println("error.");
            }
            System.out.println();
            System.out.print("Please enter a number: ");
            number = kb.nextInt();
        }
        if ( number > 80 ){
            System.out.println("That number is too large");
        }
        else if ( number < 1 ){
            System.out.println("That number is too small");
        }
        else{
            System.out.println("error");
        }
    }
} 
```

我在知道如何将用户输入的数字相乘并使输出乘以用户输入的一个字母时遇到问题。

谢谢，威廉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:46:32.507

您可以使用循环迭代`given`多次..并打印字符..

```
if ( number <= 80 && number >= 1 ) {

   char myChar = '*';

   // This while loop will run 15 times if value of number is 15..
   while(number > 0) {
        System.out.println(myChar);
        number--;   // Decrement the value of `number` by 1.
   }
} 
```

**上面的while循环说：**

> 当 number 的值大于 0 时，执行循环，并打印其中的语句。打印后，将 number 的值减 1，并再次检查条件……继续这个过程 while`number > 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:48:36.880

```
while(number>0){
            System.out.print(character);
            number--;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:52:23.977

你误解了任务。你**不**应该成倍增加。您应该使用循环打印用户*多次*告诉您的某个字符。`while`因此输入“a”和“4”将导致输出“aaaa”。

# ruby-on-rails - 路由到个人资料主页时遇到问题，rails

> ID：12763701
> 
> 赞同：0
> 
> 时间：2012-10-06T20:42:32.523
> 
> 标签：ruby-on-rails, routes

我无法将根 url 路由到已登录用户的个人资料页面。

这是我的配置文件-

```
 get "profiles/show"

resources :players

devise_for :users

devise_scope :user do 
 get 'register', to: "devise/registrations#new", as: :register
 get 'login',    to: "devise/sessions#new", as: :login
 get 'logout',   to: "devise/sessions#destroy", as: :logout
end

resources :logistics

resources :notes

root :to => 'notes#index'

get '/:id', to: 'profiles#show' 
```

我希望“root to”显示“profiles#show”视图。就像 get '/:id' 路由就在它下面一样。

我已经尝试并研究了我认为无济于事的方法。感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:46:33.690

嘿尝试类似的东西

```
match "/:id" => "profiles#show" 
```

# perl - 使用 Perl 模块的 ROC 曲线？

> ID：12763704
> 
> 赞同：0
> 
> 时间：2012-10-06T20:43:16.610
> 
> 标签：perl, roc

请问有没有能够绘制 ROC 曲线的 Perl 模块？我知道[R 编程语言](http://rocr.bioinf.mpi-sb.mpg.de/)存在一个，但我找不到 Perl 的一个。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:19:51.000

[`Statistics::ROC`](https://metacpan.org/module/Statistics%3a%3aROC)计算曲线。您必须使用任意数量的图形工具来绘制它们。

# javascript - 在 facebook 中从 javascript 控制台发布多条评论

> ID：12763705
> 
> 赞同：1
> 
> 时间：2012-10-06T20:43:27.237
> 
> 标签：javascript, facebook

这是我在 facebook 上看到的一种游戏，可以对一个帖子连续发表 10 条评论。可以从javascript控制台完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:09:35.030

也许，我会建议您尝试一下 Firefox GreaseMonkey。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-19T22:47:35.473

我写了一个脚本来自动评论 FB 上的生日祝福，我在[这里](https://stackoverflow.com/questions/31078447/post-comments-on-facebook-page-via-console)发布了一个简化的工作解决方案。

# javascript - 引导导航栏后面的空间

> ID：12763707
> 
> 赞同：3
> 
> 时间：2012-10-06T20:43:32.087
> 
> 标签：javascript, html, twitter-bootstrap, scroll

使用引导程序`navbar`，我试图弄清楚如何使它不隐藏身体部分的顶部。

实际上，使用这里推荐的方法可以很好地解决：

[Twitter Bootstrap - 顶部导航栏阻止页面的顶部内容](https://stackoverflow.com/questions/10336194/twitter-bootstrap-top-nav-bar-blocking-top-content-of-the-page)

但是仍然有一些东西不起作用：当你有这样的链接时：

```
<li><a href="#section1">Go to Section 1</a></li>
<li><a href="#section2">Go to Section 2</a></li>
<li><a href="#section3">Go to Section 3</a></li>
<li><a href="#section4">Go to Section 4</a></li> 
```

和

```
<h4 id="Section 1">Section 1</h4>
<p>Content of Section 1</p>
<p><a href="#">Back to Top</a></p>

<h4 id="Section 2">Section 2</h4>
<p>Content of Section 2</p>
<p><a href="#">Back to Top</a></p>

<h4 id="Section 3">Section 3</h4>
<p>Content of Section 3</p>
<p><a href="#">Back to Top</a></p>

<h4 id="Section 4">Section 4</h4>
<p>Content of Section 4</p>
<p><a href="#">Back to Top</a></p> 
```

在这种情况下，例如，当您单击第 2 节直接链接（或快捷方式）时，页面会正确向下滚动到第 2 节，但它会将其开头隐藏在引导导航栏后面。

关于如何解决这个问题的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:28:04.020

通过将 :target 伪选择器添加到链接的 CSS，您可以将定义的填充应用到所选链接（只要它在浏览器中显示为：www.example.com#link1）。

我花了最后 2 个小时试图搜索网络试图找到 Jquery 或 JS 以将填充应用于目标 div 并在修改我的谷歌[搜索词后发现了这个](http://css-tricks.com/on-target/)

可能有一种方法可以用旧浏览器来证明这一点，但就目前而言，这让我成为一个快乐的露营者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:58:31.400

在你的 's上放置一些顶部填充物`<h4>`以说明你的`navbar`'s 高度。即把它放在你的 CSS 中：

```
h4 {
  padding-top: 30px;
} 
```

当然，更改`30px`为您的实际`navbar`身高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T07:18:58.150

I've had the same problem and haven't found a real solution, but just more workarounds (like the "padding-top" work-around itself, that seems very hackish to me). It looks like the topbar issue is still unsolved, people just hack around it somehow.

One non-invasive work-around that works for me (as good as it can) is to add the following JavaScript to the page (apart from the "padding-top" hack):

```
var shiftWindow = function() { scrollBy(0, -50) };
if (location.hash) shiftWindow();
window.addEventListener("hashchange", shiftWindow); 
```

I found this in a [comment to a bootstrap GitHub issue](https://github.com/twbs/bootstrap/issues/1768#issuecomment-6531466). However, the function isn't executed in all necessary occasions (e.g. when going to the same anchor again).

A more reliable work-around is moving the anchor positions using CSS relative positioning (found in [this StackOverflow answer](https://stackoverflow.com/a/13184714/4271479):

```
a.anchor{display: block; position: relative; top: -250px; visibility: hidden;} 
```

However, this is more invasive because you have to give your anchors a class (to distinguish it from links). So you have to update all your anchor HTML code (which might not always be possible, e.g. when you are dealing with a rigid CMS that generates your anchors):

```
<a class="anchor" id="top"></a> 
```

# iphone - UITextView 文本边框

> ID：12763710
> 
> 赞同：1
> 
> 时间：2012-10-06T20:43:52.387
> 
> 标签：iphone, text, sdk

> **可能重复：**
> [UITextView 周围的边框](https://stackoverflow.com/questions/2647164/border-around-uitextview)

我想在 UITextView 中的文本周围创建一个边框。我能够通过创建 8 个单独的 UITextView 并将它们偏移到中心文本周围的 8 个像素来实现这一点。这看起来很不错，但是输入文本的速度非常慢，因为每次用户输入内容时，视图都必须同时更新 9 个透明的 UITextView！

有没有更清洁/更快的方法来完成这个？我想要的效果类似于photoshops的'stroke'修饰符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:01:57.340

你能把你所说的文字边框的截图吗？

如果您想让 UITextView 的边框尝试以下，这应该可以

```
#import <QuartzCore/QuartzCore.h>

UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(10, 10, 300, 100)];
    textView.layer.borderColor = [[UIColor redColor] CGColor];
    textView.layer.borderWidth = 2; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T16:13:31.997

我不确定为什么我的答案被删除了，也许是因为我在几乎相同的问题上发布了相同的解决方案？你可以在那里找到它： [Bordered UITextView](https://stackoverflow.com/questions/2647164/border-around-uitextview)

# python - 将 textarea 输入转换为分段 HTML

> ID：12763711
> 
> 赞同：1
> 
> 时间：2012-10-06T20:44:22.700
> 
> 标签：python, html, regex, newline, paragraph

我想将用户输入到 html 页面上的 textarea 中的内容转换为`<p>`-tagged 输出，其中每个`<p>`都替换新行。

我正在尝试使用正则表达式，但我无法让它工作。有人会纠正我的表达吗？

```
String = "Hey, this is paragraph 1 \n and this is paragraph 2 \n and this will be paragraph 3"
Regex = r'(.+?)$' 
```

它只会导致`Hey, this is paragraph 1 \n and this is paragraph 2 \n<p>and this will be paragraph 3</p>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:50:30.513

我不会为此使用正则表达式，只是因为您不需要它。看一下这个：

```
text = "Hey, this is paragraph 1 \n and this is paragraph 2 \n and this will be paragraph 3"
html = ''
for line in text.split('\n'):
   html += '<p>' + line + '</p>'

print html 
```

让它成为一条线，因为越短越好，更清晰：

```
html = ''.join('<p>'+L+'</p>' for L in text.split('\n')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T10:25:21.150

以上依赖于识别 '\n' 的答案不能可靠地工作。你需要使用`.splitlines()`. 我没有足够的代表对所选答案发表评论，当我编辑 wiki 时，有人只是将其还原。所以有更多代表的人可以解决它。

来自 a 的文本`textarea`可以使用 '\r\n' 作为换行符。

```
>> "1\r\n2".split('\n') 
['1\r', '2'] 
```

'\r' 单独在网页内是无效的，因此使用上述任何解决方案都会产生格式错误的网页。

幸运的是，python 提供了一个函数来解决这个问题。可靠的答案是：

```
html = ''.join('<p>'+L+'</p>' for L in text.splitlines()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T20:49:40.660

我会这样做：

```
s = "Hey, this is paragraph 1 \n and this is paragraph 2 \n and this will be paragraph 3"
"".join("<p>{0}</p>".format(row) for row in s.split('\n')) 
```

您基本上将字符串拆分为行列表。然后用段落标签包裹每一行。最后加入你的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T22:43:46.800

你需要摆脱锚，`$`. 您的正则表达式正在尝试匹配*一个或多个非换行符，然后是字符串的结尾*。您*可以*使用 MULTILINE 模式使锚点在行边界处匹配，如下所示：

```
s1 = re.sub(r'(?m)^.+$', r'<p>\g<0></p>', s0) 
```

...但这同样有效：

```
s1 = re.sub(r'.+', r'<p>\g<0></p>', s0) 
```

不情愿的量词 ( `.+?`) 也没有做任何有用的事情，但它并没有像锚那样弄乱输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T00:16:58.650

很简单>>

```
html='<p>'+s.replace("\n",'</p><p>')+'</p>' 
```

# php - 从 URL (php) 中删除字符

> ID：12763717
> 
> 赞同：0
> 
> 时间：2012-10-06T20:45:02.023
> 
> 标签：php, url

我的网站 (rillist.com) 使用 php 来获取 facebook URL。我注意到许多用户不小心将多余的字符 (?fref=ts) 粘贴到 id，因为它们只是复制/粘贴。

有没有办法强制某些短语脱离 php 的回声？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:55:06.220

我为脚本中的类似问题构建了这两个函数。它们可能是您解决麻烦所需要的。

PS请尝试更具体并添加一些代码URL等示例，以帮助人们更好地理解您想要做什么。

```
 # Removing param from QUERY_STRING.
  function unkey_querystring($query_string, $key) { 
    $query_array = array();
    parse_str($query_string, $query_array);

    unset($query_array[$key]);

    $query_string = http_build_query($query_array);

    return $query_string;
  }

  # Remove param from URL.
  function unkey_address($url, $key) { 
    $query_string = substr(strstr($url, "?"), 1);
    $base_url = str_replace($query_string, "", $url);

    $query_string = unkey_querystring($query_string, $key);
    return $base_url.$query_string; 
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:17:22.827

您可以使用正则表达式来实现这一点：

```
$bad_url = "rillist.com/?id=el.tee?fref=ts";
$good_url = preg_replace('/(.+\?[^?]+)\?.*/sim', '$1', $bad_url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:04:02.380

据我了解，你想做这样的*事情*：

```
$url = 'http://facebook.com/page?test=yes&fref=ts'; // the facebook URL

$_MGET = parse_url($url); // split the URL into path, query and host

$_MGET = '?'.$_MGET['query']; // re-set $_MGET with a better query

if(strpos($_MGET, "fref=ts") > 0) { // find out if their is "fref=ts"
  $before_fref = $_MGET[strpos($_MGET, "fref=ts")-1]; // get character before "fref=ts"
  $_MGET = str_replace(($before_fref == "?" ? "fref=ts&" : "&fref=ts"), "", $_MGET); // replace "fref=ts" according to previous char
}

echo $_MGET; // echo new url

// unset
unset($_MGET);
unset($before_fref); 
```

（这按原样工作，抱歉变量名不好）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T21:38:02.413

有一种相当优雅的方法可以做到这一点，**但**它需要[pecl_http](http://pecl.php.net/package/pecl_http)扩展。

```
http_build_url($url, array(), HTTP_URL_STRIP_QUERY) 
```

`http_build_url`可以在[此处](http://plugins.svn.wordpress.org/wp-minify/trunk/http_build_url.php)找到PHP 端口，您应该可以将其放入任何代码库中而不会出现问题...我使用此代码来验证我的解决方案。

# android - 处理 GLThread.run() 中的错误

> ID：12763718
> 
> 赞同：2
> 
> 时间：2012-10-06T20:45:05.923
> 
> 标签：android, opengl-es-2.0

我刚刚向 Android 市场发布了我的应用程序的新版本，并且我的新版本在活动中具有 GLSurfaceView。尽管我没有做任何花哨的事情，但我拥有庞大的用户群，那里有很多不合标准的 Android 手机，而且我总是在 GLThread.run() 中遇到异常。

在不使整个应用程序崩溃的情况下捕获/处理这些异常的推荐方法是什么？理想情况下，我希望能够捕获错误，从活动中删除表面视图并关闭使用 OpenGL 的组件。我做了一些搜索，但主要是在 Android 上找到了 Firefox 的异常报告和类似的东西。:)

我正在考虑只使用未捕获的异常处理程序，将共享首选项标志切换为 false，然后让它崩溃；下次运行我不会尝试添加那个 GLSurfaceView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:12:39.010

我最终使用以下代码解决了这个问题：

```
final UncaughtExceptionHandler defaultHandler = Thread.getDefaultUncaughtExceptionHandler();

Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {
    @Override
    public void uncaughtException(Thread thread, Throwable ex) {
        if (thread.getName().startsWith("GLThread")) {
            disableOpenGLStuff();
        }

        // You could wrap this in an else, but I'm not sure how good of an idea it is to leave the application running when a thread has crashed.
        defaultHandler.uncaughtException(thread, ex);
    }); 
```

# php - 如何从此字符串返回多维数组？

> ID：12763719
> 
> 赞同：2
> 
> 时间：2012-10-06T20:45:20.120
> 
> 标签：php, minecraft

你好我有一个这样的字符串：

```
end: world: world_the_end x: 127.92422698364012 y: 49.0 z: 16.12629933731299 yaw: 181.38281 pitch: 14.804417 sand: world: world x: -1641.5 y: 71.0 z: -26.5 yaw: 90.90824 pitch: 18.818556 spider: world: world x: 31.300000011920922 y: 4.0 z: 1166.8782895110098 yaw: -0.19852135 pitch: 5.1715555 zombie: world: world x: 34.69999998807907 y: 5.0 z: 1199.704677717212 yaw: 99.74651 pitch: 8.739505 old: world: world x: -53.65626180992732 y: 73.0 z: 196.10301015333587 yaw: 116.57273 pitch: 9.224916 end3: world: world_the_end x: 286.3926594122887 y: 1.0 z: 13.586770822063027 yaw: 269.05328 pitch: 14.146775 chests: world: world x: -9.153748958043282 y: 224.0 z: 66.27320021448261 yaw: -106.30098 pitch: 39.299957 nether: world: world_nether x: -191.95650873528467 y: 49.0 z: -52.699999988079064 yaw: 22.797272 pitch: 6.7500987 endkill: world: world_the_end x: 323.4613136245915 y: 1.0 z: 5.489686192901858 yaw: 100.90347 pitch: 3.6467855 rails: world: world x: -1656.699999988079 y: 10.0 z: -283.69999998807907 yaw: 318.45834 pitch: 17.768522 blaze: world: world_nether x: -253.02856795676604 y: 53.0 z: -100.26892458131793 yaw: 91.04793 pitch: 6.150008 mine2: world: world x: -352.58729110805086 y: 72.0 z: 53.699999988079064 yaw: 27.53363 pitch: 22.949997 
```

我需要从中返回一个多维数组

等等对不起，我是 php 新手，所以我不是很好，请帮助我做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:14:24.927

另一种方式。使用预先存储的详细密钥：

```
<?php

// make a list of details
$details = array('world','x','y','z','yaw','pitch');
$detailkeys = array_flip( $details );
$str = "end: world: world_the_end x: 127.92422698364012 y: 49.0 z: 16.12629933731299 yaw: 181.38281 pitch: 14.804417 sand: world: world x: -1641.5 y: 71.0 z: -26.5 yaw: 90.90824 pitch: 18.818556 spider: world: world x: 31.300000011920922 y: 4.0 z: 1166.8782895110098 yaw: -0.19852135 pitch: 5.1715555 zombie: world: world x: 34.69999998807907 y: 5.0 z: 1199.704677717212 yaw: 99.74651 pitch: 8.739505 old: world: world x: -53.65626180992732 y: 73.0 z: 196.10301015333587 yaw: 116.57273 pitch: 9.224916 end3: world: world_the_end x: 286.3926594122887 y: 1.0 z: 13.586770822063027 yaw: 269.05328 pitch: 14.146775 chests: world: world x: -9.153748958043282 y: 224.0 z: 66.27320021448261 yaw: -106.30098 pitch: 39.299957 nether: world: world_nether x: -191.95650873528467 y: 49.0 z: -52.699999988079064 yaw: 22.797272 pitch: 6.7500987 endkill: world: world_the_end x: 323.4613136245915 y: 1.0 z: 5.489686192901858 yaw: 100.90347 pitch: 3.6467855 rails: world: world x: -1656.699999988079 y: 10.0 z: -283.69999998807907 yaw: 318.45834 pitch: 17.768522 blaze: world: world_nether x: -253.02856795676604 y: 53.0 z: -100.26892458131793 yaw: 91.04793 pitch: 6.150008 mine2: world: world x: -352.58729110805086 y: 72.0 z: 53.699999988079064 yaw: 27.53363 pitch: 22.949997";

$data = array();
// explode string by space
$fields = explode(' ', $str );

// go through parameters one by one
foreach( $fields as $field )
{
        // does it have colon ?
        if( preg_match('/:$/', $field ))
        {
                // yes. remove colon
                $field = substr( $field, 0, strlen($field)-1);
                // is it detailkey
                if( isset( $detailkeys[$field] ))
                        $key = $field;  // store as key
                else
                        $rootkey = $field;  // otherwise store as rootkey
                continue;
        } else

        // does not have colon. Let's store a value.
        $val = $field;
        $data[$rootkey][$key] = $val;
}

// all done, echo output

var_export( $data ); 
```

编辑：

这将给出这个输出：

```
array (
  'end' => 
  array (
    'world' => 'world_the_end',
    'x' => '127.92422698364012',
    'y' => '49.0',
    'z' => '16.12629933731299',
    'yaw' => '181.38281',
    'pitch' => '14.804417',
  ),
  'sand' => 
  array (
    'world' => 'world',
    'x' => '-1641.5',
    'y' => '71.0',
    'z' => '-26.5',
    'yaw' => '90.90824',
    'pitch' => '18.818556',
  ),
  'spider' => 
  array (
    'world' => 'world',
    'x' => '31.300000011920922',
    'y' => '4.0',
    'z' => '1166.8782895110098',
    'yaw' => '-0.19852135',
    'pitch' => '5.1715555',
  ),
  'zombie' => 
  array (
    'world' => 'world',
    'x' => '34.69999998807907',
    'y' => '5.0',
    'z' => '1199.704677717212',
    'yaw' => '99.74651',
    'pitch' => '8.739505',
  ),
  'old' => 
  array (
    'world' => 'world',
    'x' => '-53.65626180992732',
    'y' => '73.0',
    'z' => '196.10301015333587',
    'yaw' => '116.57273',
    'pitch' => '9.224916',
  ),
  'end3' => 
  array (
    'world' => 'world_the_end',
    'x' => '286.3926594122887',
    'y' => '1.0',
    'z' => '13.586770822063027',
    'yaw' => '269.05328',
    'pitch' => '14.146775',
  ),
  'chests' => 
  array (
    'world' => 'world',
    'x' => '-9.153748958043282',
    'y' => '224.0',
    'z' => '66.27320021448261',
    'yaw' => '-106.30098',
    'pitch' => '39.299957',
  ),
  'nether' => 
  array (
    'world' => 'world_nether',
    'x' => '-191.95650873528467',
    'y' => '49.0',
    'z' => '-52.699999988079064',
    'yaw' => '22.797272',
    'pitch' => '6.7500987',
  ),
  'endkill' => 
  array (
    'world' => 'world_the_end',
    'x' => '323.4613136245915',
    'y' => '1.0',
    'z' => '5.489686192901858',
    'yaw' => '100.90347',
    'pitch' => '3.6467855',
  ),
  'rails' => 
  array (
    'world' => 'world',
    'x' => '-1656.699999988079',
    'y' => '10.0',
    'z' => '-283.69999998807907',
    'yaw' => '318.45834',
    'pitch' => '17.768522',
  ),
  'blaze' => 
  array (
    'world' => 'world_nether',
    'x' => '-253.02856795676604',
    'y' => '53.0',
    'z' => '-100.26892458131793',
    'yaw' => '91.04793',
    'pitch' => '6.150008',
  ),
  'mine2' => 
  array (
    'world' => 'world',
    'x' => '-352.58729110805086',
    'y' => '72.0',
    'z' => '53.699999988079064',
    'yaw' => '27.53363',
    'pitch' => '22.949997',
  ),
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:07:09.923

有点笨拙但有效。

```
<?php

// make a list of upper keys
$upper = array('end', 'sand','spider','zombie','old','end3','chests','nether','endkill','rails','blaze','mine2');
$upperkeys = array_flip( $upper );
$str = "end: world: world_the_end x: 127.92422698364012 y: 49.0 z: 16.12629933731299 yaw: 181.38281 pitch: 14.804417 sand: world: world x: -1641.5 y: 71.0 z: -26.5 yaw: 90.90824 pitch: 18.818556 spider: world: world x: 31.300000011920922 y: 4.0 z: 1166.8782895110098 yaw: -0.19852135 pitch: 5.1715555 zombie: world: world x: 34.69999998807907 y: 5.0 z: 1199.704677717212 yaw: 99.74651 pitch: 8.739505 old: world: world x: -53.65626180992732 y: 73.0 z: 196.10301015333587 yaw: 116.57273 pitch: 9.224916 end3: world: world_the_end x: 286.3926594122887 y: 1.0 z: 13.586770822063027 yaw: 269.05328 pitch: 14.146775 chests: world: world x: -9.153748958043282 y: 224.0 z: 66.27320021448261 yaw: -106.30098 pitch: 39.299957 nether: world: world_nether x: -191.95650873528467 y: 49.0 z: -52.699999988079064 yaw: 22.797272 pitch: 6.7500987 endkill: world: world_the_end x: 323.4613136245915 y: 1.0 z: 5.489686192901858 yaw: 100.90347 pitch: 3.6467855 rails: world: world x: -1656.699999988079 y: 10.0 z: -283.69999998807907 yaw: 318.45834 pitch: 17.768522 blaze: world: world_nether x: -253.02856795676604 y: 53.0 z: -100.26892458131793 yaw: 91.04793 pitch: 6.150008 mine2: world: world x: -352.58729110805086 y: 72.0 z: 53.699999988079064 yaw: 27.53363 pitch: 22.949997";

$data = array();
// explode string by space
$fields = explode(' ', $str );

// go through parameters one by one
foreach( $fields as $field )
{
        // does it have colon ?
        if( preg_match('/:$/', $field ))
        {
                // yes. remove colon
                $field = substr( $field, 0, strlen($field)-1);
                // is it upperkey
                if( isset( $upperkeys[$field] ))
                        $rootkey = $field;  // store as rootkey
                else
                        $key = $field;  // otherwise store key
                continue;
        } else

        // dos not have colon. Let's store a vlue.
        $val = $field;
        $data[$rootkey][$key] = $val;
}

// all done, echo output

var_export( $data ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T00:14:55.460

您可以编写一个小循环来表示存储在字符串中的数据结构，然后从中创建数组：

```
$string = "end: world: world_the_end x: 127.92422698364012 y: 49.0 z: ...";
$array = null;
$stack = array_reverse(explode(' ', $string));
$stackSize = count($stack);
$section = 0;
while ($stack) {
    $name = substr(array_pop($stack), 0, -1); $stackSize--;
    while ($stack && substr($stack[$stackSize-2], -1) !== ':') {
        $key = substr(array_pop($stack), 0, -1);
        $array[$name][$key] = array_pop($stack);
        $stackSize -= 2;
    }
}
var_dump($array); 
```

将输出：

```
array(12) {
  'end' =>
  array(6) {
    'world' =>
    string(13) "world_the_end"
    'x' =>
    string(18) "127.92422698364012"
    'y' =>
    string(4) "49.0"
    'z' =>
    string(17) "16.12629933731299"
    'yaw' =>
    string(9) "181.38281"
    'pitch' =>
    string(9) "14.804417"
  }
  'sand' =>
  array(6) {
    'world' =>
    string(5) "world"
    'x' =>
    string(7) "-1641.5"
    'y' =>
    string(4) "71.0"
    'z' =>
    string(5) "-26.5"
    'yaw' =>
    string(8) "90.90824"
    'pitch' =>
    string(9) "18.818556"
  }
  'spider' =>
  array(6) {
    'world' =>
    string(5) "world"
    'x' =>
    string(18) "31.300000011920922"
    'y' =>
    string(3) "4.0"
    'z' =>
    string(18) "1166.8782895110098"
    'yaw' =>
    string(11) "-0.19852135"
    'pitch' =>
    string(9) "5.1715555"
  }
  'zombie' =>
  array(6) {
    'world' =>
    string(5) "world"
    'x' =>
    string(17) "34.69999998807907"
    'y' =>
    string(3) "5.0"
    'z' =>
    string(17) "1199.704677717212"
    'yaw' =>
    string(8) "99.74651"
    'pitch' =>
    string(8) "8.739505"
  }
  'old' =>
  array(6) {
    'world' =>
    string(5) "world"
    'x' =>
    string(18) "-53.65626180992732"
    'y' =>
    string(4) "73.0"
    'z' =>
    string(18) "196.10301015333587"
    'yaw' =>
    string(9) "116.57273"
    'pitch' =>
    string(8) "9.224916"
  }
  'end3' =>
  array(6) {
    'world' =>
    string(13) "world_the_end"
    'x' =>
    string(17) "286.3926594122887"
    'y' =>
    string(3) "1.0"
    'z' =>
    string(18) "13.586770822063027"
    'yaw' =>
    string(9) "269.05328"
    'pitch' =>
    string(9) "14.146775"
  }
  'chests' =>
  array(6) {
    'world' =>
    string(5) "world"
    'x' =>
    string(18) "-9.153748958043282"
    'y' =>
    string(5) "224.0"
    'z' =>
    string(17) "66.27320021448261"
    'yaw' =>
    string(10) "-106.30098"
    'pitch' =>
    string(9) "39.299957"
  }
  'nether' =>
  array(6) {
    'world' =>
    string(12) "world_nether"
    'x' =>
    string(19) "-191.95650873528467"
    'y' =>
    string(4) "49.0"
    'z' =>
    string(19) "-52.699999988079064"
    'yaw' =>
    string(9) "22.797272"
    'pitch' =>
    string(9) "6.7500987"
  }
  'endkill' =>
  array(6) {
    'world' =>
    string(13) "world_the_end"
    'x' =>
    string(17) "323.4613136245915"
    'y' =>
    string(3) "1.0"
    'z' =>
    string(17) "5.489686192901858"
    'yaw' =>
    string(9) "100.90347"
    'pitch' =>
    string(9) "3.6467855"
  }
  'rails' =>
  array(6) {
    'world' =>
    string(5) "world"
    'x' =>
    string(18) "-1656.699999988079"
    'y' =>
    string(4) "10.0"
    'z' =>
    string(19) "-283.69999998807907"
    'yaw' =>
    string(9) "318.45834"
    'pitch' =>
    string(9) "17.768522"
  }
  'blaze' =>
  array(6) {
    'world' =>
    string(12) "world_nether"
    'x' =>
    string(19) "-253.02856795676604"
    'y' =>
    string(4) "53.0"
    'z' =>
    string(19) "-100.26892458131793"
    'yaw' =>
    string(8) "91.04793"
    'pitch' =>
    string(8) "6.150008"
  }
  'mine2' =>
  array(6) {
    'world' =>
    string(5) "world"
    'x' =>
    string(19) "-352.58729110805086"
    'y' =>
    string(4) "72.0"
    'z' =>
    string(18) "53.699999988079064"
    'yaw' =>
    string(8) "27.53363"
    'pitch' =>
    string(9) "22.949997"
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T21:08:24.833

这是否足够，或者您是否需要额外增加所有参数（x、y、z、俯仰、偏航...）？

```
 $a = 'end: world: world_the_end x: 127.92422698364012 y: 49.0 z: 16.12629933731299 yaw: 181.38281 pitch: 14.804417 sand: world: world x: -1641.5 y: 71.0 z: -26.5 yaw: 90.90824 pitch: 18.818556 spider: world: world x: 31.300000011920922 y: 4.0 z: 1166.8782895110098 yaw: -0.19852135 pitch: 5.1715555 zombie: world: world x: 34.69999998807907 y: 5.0 z: 1199.704677717212 yaw: 99.74651 pitch: 8.739505 old: world: world x: -53.65626180992732 y: 73.0 z: 196.10301015333587 yaw: 116.57273 pitch: 9.224916 end3: world: world_the_end x: 286.3926594122887 y: 1.0 z: 13.586770822063027 yaw: 269.05328 pitch: 14.146775 chests: world: world x: -9.153748958043282 y: 224.0 z: 66.27320021448261 yaw: -106.30098 pitch: 39.299957 nether: world: world_nether x: -191.95650873528467 y: 49.0 z: -52.699999988079064 yaw: 22.797272 pitch: 6.7500987 endkill: world: world_the_end x: 323.4613136245915 y: 1.0 z: 5.489686192901858 yaw: 100.90347 pitch: 3.6467855 rails: world: world x: -1656.699999988079 y: 10.0 z: -283.69999998807907 yaw: 318.45834 pitch: 17.768522 blaze: world: world_nether x: -253.02856795676604 y: 53.0 z: -100.26892458131793 yaw: 91.04793 pitch: 6.150008 mine2: world: world x: -352.58729110805086 y: 72.0 z: 53.699999988079064 yaw: 27.53363 pitch: 22.949997';
    preg_match_all('/([^:]+: [^:]+: [^:]+: \d{0,}(.\d{0,})+? y: \d{0,}(.\d{0,})+? z: \d{0,}(.\d{0,})+? yaw: \d{0,}(.\d{0,})+? pitch: \d{0,}(.\d{0,})+? )/sim', $a, $result, PREG_PATTERN_ORDER);
    for ($i = 0; $i < count($result[0]); $i++) {
        # Matched text = $result[0][$i];
        $arr[] = $result[0][$i];
    }

    var_dump($arr); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-06T21:03:23.363

从那个输入是不可能的。您无法分辨哪个元素包含在哪个元素中。

# jquery-ui - 使用 JQuery UI 处理单选按钮组选择事件

> ID：12763721
> 
> 赞同：7
> 
> 时间：2012-10-06T20:45:48.780
> 
> 标签：jquery-ui, jquery-ui-button

为什么 JQuery UI 选项按钮（按钮集）没有任何事件 - 我想为它处理选择事件，想知道这样做的正确方法是什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T16:30:14.403

您应该只点击单选按钮本身的正常`change`事件。扩展 jQueryUI 网站上的示例：

**html:**

```
<div id="radio">
    <input type="radio" id="radio1" name="radio" value="1" /><label for="radio1">Choice 1</label>
    <input type="radio" id="radio2" name="radio" value="2" checked="checked" /><label for="radio2">Choice 2</label>
    <input type="radio" id="radio3" name="radio" value="3" /><label for="radio3">Choice 3</label>
</div> 
```

**JavaScript：**

```
$("#radio").buttonset();

$("input[name='radio']").on("change", function () {
    alert(this.value);
}); 
```

该`buttonset`小部件只是以某种方式设置单选按钮的样式。所有常规事件都将按预期触发。

**示例：http:** [//jsfiddle.net/andrewwhitaker/LcJGd/](http://jsfiddle.net/andrewwhitaker/LcJGd/)

# css - 包含浮动元素时在css中包含元素的边框

> ID：12763723
> 
> 赞同：1
> 
> 时间：2012-10-06T20:46:03.910
> 
> 标签：css, border

在这个 2 列布局中，我想在整个页面上放置一个边框。我想如果我把 'border:solid' 放在`<body>`标签内就可以了，但事实并非如此。它只是在标题上加了一个边框`<h1>`。有人可以帮忙吗？谢谢！

[http://jsfiddle.net/v5gSt/](http://jsfiddle.net/v5gSt/)

```
<!DOCTYPE html>
<html>
    <head>
        <title>Two Column Layout</title>
        <style type="text/css">
            body { 
                width: 960px;
                font-family: Arial, Verdana, sans-serif;
                color: #665544;
                border: solid;
                }
            .column1of2 {
                float: left;
                width: 620px;
                margin: 10px;}
            .column2of2 {
                float: left;
                width: 300px;
                margin: 10px;}
        </style>
    </head>
    <body>
        <h1>The Evolution of the Bicycle</h1>
        <div class="column1of2">
            <h3>The First Bicycle</h3>
            <p>In 1817 Baron von Drais invented a walking machine that would help him get around the royal gardens faster: two same-size in-line wheels, the front one steerable, mounted in a frame upon which you straddled. The device was propelled by pushing your feet against the ground, thus rolling yourself and the device forward in a sort of gliding walk.</p>
            <p>The machine became known as the Draisienne (or "hobby horse"). It was made entirely of wood. This enjoyed a short lived popularity as a fad, not being practical for transportation in any other place than a well maintained pathway such as in a park or garden.</p>
            <h3>Further Innovations</h3>
            <p>The next appearance of a two-wheeled riding machine was in 1865, when pedals were applied directly to the front wheel. This machine was known as the velocipede (meaning "fast foot") as well as the "bone shaker," since it's wooden structure combined with the cobblestone roads of the day made for an extremely uncomfortable ride. They also became a fad and indoor riding academies, similar to roller rinks, could be found in large cities.</p>
            <p>In 1870 the first all-metal machine appeared. (Prior to this, metallurgy was not advanced enough to provide metal which was strong enough to make small, light parts out of.) The pedals were attached directly to the front wheel with no freewheeling mechanism. Solid rubber tires and the long spokes of the large front wheel provided a much smoother ride than its predecessor.</p>
        </div>
        <div class="column2of2">
            <h3>Bicycle Timeline</h3>
            <ul>
                <li>1817: Draisienne</li>
                <li>1865: Velocipede</li>
                <li>1870: High-wheel bicycle</li>
                <li>1876: High-wheel safety</li>
                <li>1885: Hard-tired safety</li>
                <li>1888: Pneumatic safety</li>
            </ul>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:03:04.373

虽然没有语义，但在带有样式的结束 body 标记之前添加一个空 div 可以`clear:both`修复它。

**[jsFiddle 示例](http://jsfiddle.net/j08691/v5gSt/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:14:37.087

实际上你的`border: solid;`作品:) 但是两个 div 被设置为`float: left`所以有删除文档流，你必须`clear`在最后一个 div 之后的元素上使用 CSS 属性。

非常基本的例子，它远非完美但有效：

```
<style type="text/css">
clear
{
  clear: both;
}
</style>
<div class="column2of2">
...
</div>
<br class="clear"></span> 
```

有很多解决方案可以创建更清晰的内容，您可以在[Quirksmode上查看其中一些](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T21:39:52.253

将此行放在正文的结束标记之前

```
<div style="clear:both "></div>

<html>
<head>
    <title>Two Column Layout</title>
    <style type="text/css">
        body {      
        width: 970px;
        font-family: Arial, Verdana, sans-serif;
        color: #665544;
        border:medium black inset;
        }           
        .column1of2 {
        float: left;
        width: 620px;
        margin: 10px;
    }
        .column2of2 {
        float: left;
        width: 300px;
        margin: 10px;
    }
    </style>
</head>

<body>    
    <h1>The Evolution of the Bicycle</h1>
    <div class="column1of2">        
        <h3>The First Bicycle</h3>
        <p>In 1817 Baron von Drais invented a walking machine that would help him get around the royal gardens faster: two same-size in-line wheels, the front one steerable, mounted in a frame upon which you straddled. The device was propelled by pushing your feet against the ground, thus rolling yourself and the device forward in a sort of gliding walk.</p>
        <p>The machine became known as the Draisienne (or "hobby horse"). It was made entirely of wood. This enjoyed a short lived popularity as a fad, not being practical for transportation in any other place than a well maintained pathway such as in a park or garden.</p>
        <h3>Further Innovations</h3>
        <p>The next appearance of a two-wheeled riding machine was in 1865, when pedals were applied directly to the front wheel. This machine was known as the velocipede (meaning "fast foot") as well as the "bone shaker," since it's wooden structure combined with the cobblestone roads of the day made for an extremely uncomfortable ride. They also became a fad and indoor riding academies, similar to roller rinks, could be found in large cities.</p>
        <p>In 1870 the first all-metal machine appeared. (Prior to this, metallurgy was not advanced enough to provide metal which was strong enough to make small, light parts out of.) The pedals were attached directly to the front wheel with no freewheeling mechanism. Solid rubber tires and the long spokes of the large front wheel provided a much smoother ride than its predecessor.</p>
    </div>
    <div class="column2of2">
        <h3>Bicycle Timeline</h3>
        <ul>
            <li>1817: Draisienne</li>
            <li>1865: Velocipede</li>
            <li>1870: High-wheel bicycle</li>
            <li>1876: High-wheel safety</li>
            <li>1885: Hard-tired safety</li>
            <li>1888: Pneumatic safety</li>
        </ul>            
    </div>        
    <div style="clear:both "></div> 
</body> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T21:03:28.640

浮动元素从文档流中取出，因此它们的容器**不知道它们的宽度或高度，除非它们是浮动的。**

把它想象成它们是 2D 的，并且实际上是漂浮在容器的顶部。

你有**两个主要的选择**来解决这个问题：

*   漂浮身体。
*   将 div 包装在**页面容器 div 中并使其浮动**。

# c# - 实体部分类中的方法不会出现在新实例上

> ID：12763724
> 
> 赞同：-1
> 
> 时间：2012-10-06T20:46:05.020
> 
> 标签：c#, .net, entity-framework, entity-framework-4

我有一个实体类 Usuario，我想创建一个部分类来在 Usuario 中添加一些方法。我做了：

```
public partial class Usuario
{
    public static List<string> CarregarPreferencias(){
        // Do it!
        return null;
    }
} 
```

当我在上下文“Ctx.Usuario.CarregarPreferencias()”中调用 Usuario 时，它会出现，但是当我创建 Usuario 的实例时，它不会：

```
Usuario user = new Usuario();
user.CarregarPrefer..... // <<< my method don't appears 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:48:58.047

[静态方法不会出现在类的实例上。](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)如果要针对类的实例调用方法，请从方法声明中删除 static。

# mysql - MySQL - 使一对值唯一

> ID：12763726
> 
> 赞同：48
> 
> 时间：2012-10-06T20:46:10.273
> 
> 标签：mysql, composite-key, unique-key

我有一个表，其中包含两个作为 ID 的 int 值。这些 ID 单独可以在表格中出现任意次数，但它们一起只能出现一次。

**有没有办法使一对值唯一并且仍然允许单个值多次显示？**

作为后续，如果可能的话，这对值可以用作键吗？我目前有一个第三列用于我的键的唯一自动增量值。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-06T20:52:35.147

它被称为复合键。

如果要将实际 PK 更改为复合 PK，请使用

```
Alter table <your table> drop PRIMARY KEY;
Alter table <your table> drop COLUMN <your autoincremented column>;

Alter table <your table> add [constraint <constraint name>] PRIMARY KEY (<col1>, <col2>); 
```

您也可以只添加一个唯一约束（您的 PK 将是相同的，并且唯一对......必须是唯一的）。

```
alter table <your table> add [constraint <constraint name>] unique index(<col1>, <col2>); 
```

就个人而言，我会推荐第二种解决方案（简单的 PK + 唯一约束），但这只是个人观点。您可以在 Google 上搜索有关复合键的优缺点。

之间的部分`[]`是可选的。

**编辑**

如果您想在 create table 语句中执行此操作

对于复合 pk

```
CREATE TABLE Test(
    id1 int NOT NULL, 
    id2 int NOT NULL,
    id3 int NOT NULL,
    PRIMARY KEY (id1, id2)
); 
```

对于唯一索引

```
CREATE TABLE Test1(
    id1 int NOT NULL AUTO_INCREMENT, 
    id2 int NOT NULL,
    id3 int NOT NULL,
    PRIMARY KEY (id1),
    UNIQUE KEY (id2, id3)
); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T20:52:19.373

尝试这个：`ALTER TABLE table_name ADD CONSTRAINT uc_name UNIQUE (col1,col2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:48:13.210

添加`primary key (col1, col2)`到您的创建表定义

# iphone - 按钮上的 perfomSelector 和发送参数

> ID：12763733
> 
> 赞同：-1
> 
> 时间：2012-10-06T20:46:46.177
> 
> 标签：iphone, objective-c, selector

我有一个包含多个变量的方法：

```
-(void) showImg:(UIBarButtonItem *)sender string1:(NSString *) string2:(NSString *); 
```

我想发送`NSString`值（因为这`function`用于多个元素）。

这就是我`action`在不需要参数时添加的方式：

```
[myButton addTarget:self action:@selector(showImg) forControlEvents: UIControlEventTouchUpInside]; 
```

我尝试在`@selector`这样的范围内添加参数：

```
[myButton performSelector @selector(showImg:string1:string2::) withObject:@"-1" withObject:@"-1"]; 
```

但这不起作用。如何`function`直接在内部调用带有多个参数的my `@selector`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:17:04.807

您可以在两者之间进行`UIButton`调用`function`（如中间人），以控制下一个函数参数。

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[myButton addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];

-(void) buttonTapped:(id)sender{
    if(<some logical condition>){
        [self showImg:sender string1:@"-1" string2:@"-1"];
    }else {
        [self showImg:sender string1:@"otherVal1" string2:@"otherVal2"];
    }
}

-(void) showImg:(id)sender string1:(NSString *)string1 string2:(NSString*)string2 {
    //Other logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:13:22.197

以下行是错误的：

`[myButton performSelector @selector(showImg:string1:string2::) withObject:@"-1" withObject:@"-1"];`

您不能将这样的参数传递给选择器，这就是您出错的原因。我认为您不能将多个参数传递给选择器。也许您可以尝试使用 const 值为按钮设置标签（适用于整数）

例如 ：

```
//Init your button......
[myButton setTag:1];
[myButton addTarget:self action:@selector(showImg:) forControlEvents: UIControlEventTouchUpInside];

- (void)showImg:(id)sender {
  UIButton *btn = (UIButton *)sender;
  int value = btn.tag;
} 
```

只是一个建议.. :)

# python - 网络爬行期间的速度问题（Python）

> ID：12763735
> 
> 赞同：1
> 
> 时间：2012-10-06T20:46:53.960
> 
> 标签：python, performance, web-crawler

我很想让这个程序在速度上提高很多。它在 10 分钟内读取 +- 12000 页。我想知道是否有什么对速度有很大帮助的东西？我希望你们知道一些提示。我应该阅读 +- 数百万页......所以这会花费太长时间:(这是我的代码：

```
from eventlet.green import urllib2                          
import httplib                                              
import time                                                 
import eventlet   

# Create the URLS in groups of 400 (+- max for eventlet)                                    
def web_CreateURLS():
    print str(str(time.asctime( time.localtime(time.time()) )).split(" ")[3])
    for var_indexURLS in xrange(0, 2000000, 400):
        var_URLS = []
        for var_indexCRAWL in xrange(var_indexURLS, var_indexURLS+400):
            var_URLS.append("http://www.nu.nl")
        web_ScanURLS(var_URLS)    

# Return the HTML Source per URL
def web_ReturnHTML(url):
    try:
        return [urllib2.urlopen(url[0]).read(), url[1]]
    except urllib2.URLError:
        time.sleep(10)
        print "UrlError"
        web_ReturnHTML(url)

# Analyse the HTML Source
def web_ScanURLS(var_URLS):
    pool = eventlet.GreenPool()
    try:  
        for var_HTML in pool.imap(web_ReturnHTML, var_URLS):
               # do something etc..
    except TypeError: pass

web_CreateURLS() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:20:51.197

我喜欢使用 greenlets.. 但我经常受益于使用分布在许多系统上的多个进程.. 或者只有一个系统让操作系统负责运行多个进程的所有检查和平衡。

查看[http://zeromq.org/](http://zeromq.org/)上的 ZeroMQ 以获得一些很好的示例，了解如何使用大量的侦听器创建调度器，这些侦听器可以执行调度器所说的任何操作。或者查看 execnet，了解一种快速开始并行执行远程或本地任务的方法。

我也经常使用[http://spread.org/](http://spread.org/)并且有很多系统在监听一个通用的传播守护进程。它是一个非常有用的消息总线，结果可以很容易地汇集回单个线程并从单个线程分派。

然后当然总是有 redis pub/sub 或同步。:)

“分担负担”

# java - 试图删除用户定义的双向链表中特定位置的元素

> ID：12763736
> 
> 赞同：1
> 
> 时间：2012-10-06T20:47:01.590
> 
> 标签：java, linked-list, doubly-linked-list

这是来自一个旧的作业问题，我已经上交了，但我无法弄清楚。我正在尝试使用我的用户定义的类从特定索引处的 LinkedList 中删除一个元素。下面是我正在处理的伪代码，但它没有与我相同的参数，所以我尝试修改它，但有一个问题。我是一个编程菜鸟（大约 6 个月的经验），仅供参考。我理解 ArrayLists 很好，但 LinkedLists 一直给我带来麻烦。

```
/*
 * Remove the nth element in the list.  The first element is element 1.
 * Return the removed element to the caller.

    function remove(List list, Node node)
        if node.prev == null
            list.firstNode := node.next
        else
            node.prev.next := node.next
        if node.next == null
            list.lastNode := node.prev
        else
            node.next.prev := node.prev
        destroy node
 */ 
```

我的方法要求用户输入要删除的索引位置。因为 int 和 LinkEntry 是不同的类型，所以我自然会遇到问题。我不知道如何合并通过参数传递的 int 。

```
public void remove(int n)
{
    LinkEntry<E> remove_this = new LinkEntry<E>();
    remove_this.element = n;

    for (remove_this = head; remove_this != null; remove_this = remove_this.next)
    {
        //removes the head if list is only 1 item long
        if (head.next == null)
            head = remove_this.next;
        else
            //sets previous element to the next element
            remove_this.previous.next = remove_this.next;

        //if nothing comes after remove_this, then remove the tail element
        if (remove_this.next == null)
            tail = remove_this.previous;
        else
            //sets next previous element to current previous element
            remove_this.next.previous = remove_this.previous;  
    }
} 
```

如果您知道任何地方提供了另一个与我要解决的问题更相似的示例，我将不胜感激。我浏览了我的文字和在线，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:56:20.880

您应该将计数器设置为零，从第一个元素（显然名为“head”）浏览您的链表，然后递增计数器直到它等于 n（或者您到达列表的末尾）。

当 counter 等于 n 时，您必须将上一个条目连接到下一个，并且将下一个连接到上一个（因此它断开第 N 个）。您还必须注意特殊情况，当 n=1 时（您应该删除“head”条目，也就是说将 head 设置为 head.next），当 next 为空（n = 列表长度）时，以及当 n 为负数或大于列表长度时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:23:58.610

当我在遥远的银河系中了解到这一点时……它帮助我把它画在纸上。像这样的东西：

你有

```
 A       B       C
 next         *------>*------>*---->NULL
 prev NULL<---*<------*-------* 
```

你想要

```
 A       C       
 next         *------>*---->NULL
 prev NULL<---*<------* 
```

所以如果你找到B，你就知道该怎么做了。但是如何找到B？B 是我们上面示例中的第二个元素，因此我们将在从零开始的列表中给出“1”或在从一开始的列表中给出“2”。一个典型的场景是持有对列表第一个元素的引用。这通常被称为“头部”。现在你将从那个头开始并跟随它的`next`指针。你得到了什么？列表中的第二个元素。在我们的示例中，这已经是我们的“B”了。请注意，我们关注了`next`1 次……现在假设我们要删除 C。我们得到索引 2（或基于 1：3），我们从头开始，跟随`next`1 次并得到 B。1<2 所以遵循`next`再次。请注意，我们必须遵循 B 的 next 而不是“head”的所以如果使用循环，我们将不得不使用某种本地 var。现在我们有了第二个元素，即 C 并将其删除。请注意，C 的“下一个”是`null`. 所以我们在这个方向上已经完成了。

# c# - 使用 C# linq 进行坐标测量的问题

> ID：12763739
> 
> 赞同：0
> 
> 时间：2012-10-06T20:47:21.087
> 
> 标签：c#, gps, geocoding, distance

我目前正在开发应用程序的服务器端，在应用程序中，我在大区域（超过 1000 个点）有很多兴趣点，我想找到离用户设备最近的点。我尝试使用：

```
.GetDistanceTo(GeoCoordinate); 
```

从图书馆：

```
 System.Device.Location; 
```

示例查询：

```
 from point in db.Points
  where ((new GeoCoordinate(point.lat,point.lng)).GetDistanceTo(new GeoCoordinate(coordinates[0],coordinates[1]))<1000)) 
  select point 
```

但在 Linq Query 中它不受支持，如果我尝试在 List<> 或 Array 上使用它，它需要太长时间......

我怎样才能做得更好更快？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:14:03.903

我假设您经常执行此计算，否则迭代超过一千个点不应该花费大量时间 - 当然不到一秒。

考虑将内存中的点缓存为地理坐标，因为我猜测大部分时间可能用于分配内存和实例化对象，而不是计算距离。然后，您可以从现有的地理坐标列表中对已实例化的现有地理坐标进行计算。

例如：在应用程序加载时，将所有点存储到内存中，可能在后台线程上。

```
List<GeoCoordinate> points = from point in db.Points select new GeoCoordinate(point.lat, point.lng); 
```

然后，采取你的观点，你试图搜索并循环点

```
var gcSearch = new GeoCoordinate(coordinates[0], coordinates[1]);
var searchDistance = 1000;
var results = from pSearch in points 
              where pSearch.GetDistanceTo(gcSearch) < searchDistance
              select pSearch; 
```

如果这仍然不够快，请考虑缓存最后搜索的点并在新搜索在相同范围内时返回已知列表。

```
// in class definition
static GeoCoordinate lastSearchedPoint = null;
static List<GeoCoordinate> lastSearchedResults = null
const searchFudgeDistance = 100;

//in search method
var gcSearch = new GeoCoordinate(coordinates[0], coordinates[1]);
if (lastSearchedPoint != null && gcSearch.GetDistanceTo(lastSearchedPoint) < searchFudgeDistance)
    return lastSearchedResults;
lastSearchedPoint = gcSearch;

var searchDistance = 1000;
var results = from pSearch in points 
              where pSearch.GetDistanceTo(gcSearch) < searchDistance
              select pSearch;
//store the results for future searches
lastSearchedResults = results; 
```

# java - XSSFCell 带有句点的单元格

> ID：12763740
> 
> 赞同：0
> 
> 时间：2012-10-06T20:47:24.333
> 
> 标签：java, xssf

我正在将此库与 Java 一起使用并尝试解析 excel 文件。我的一些牢房里只有……。当解析器命中该单元格时，它不会检测到其中的任何内容并继续。这是一个测试单元，我正在使用 getStringValue。关于为什么会发生这种情况的任何想法？如果它看到它并且它不会触发，我已经输入了一个失败子句

```
if (curCell.getStringCellValue().equals("...")) {
    fail("Could be a trim issue");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:31:04.560

所以我发现了问题所在。似乎 excel 对包含 ... 的单元格做了一些有趣的事情。所以 ... 是 3 个字符。Excel 将其转换为 1 个字符。这是我的问题。一旦我复制并粘贴了那个 1 个字符......，我就可以用 3 个字符替换它......

# java - LinearLayout minHeight 不适用于 weight="1"

> ID：12763746
> 
> 赞同：15
> 
> 时间：2012-10-06T20:48:23.910
> 
> 标签：java, android, xml, layout

我整个下午都在尝试使该`minHeight`属性起作用。

我想要的是`linearMe`布局：

*   当 ListView 只有几个元素时，从屏幕底部拉伸到 ListView 底部。
*   例如，我需要能够用图片填充 linearMe 布局。

随着 ListView 变大，我希望`linearMe`布局：

*   具有固定高度（在屏幕底部时）和 ListView 以允许滚动。

我的问题是`linearMe`布局越来越小，因为 ListView 中有更多元素。当 listView 有足够的元素填满屏幕时，`linearMe`布局就消失了。在这种情况下，它看起来`minHeight`毫无用处。

```
<LinearLayout
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:layout_height="match_parent" >

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:id="@+id/linearMe"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="#FF0000"
    android:minHeight="200dp" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/a7a348dba1c75b220189fd7e87c5f85e.png)![在此处输入图像描述](../Images/10f8257513240ffd643b9f80e4069f8c.png)

我希望你能帮助我！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:52:32.273

也添加 `android:layout_weight="1"`到 ListView。将它们（list 和 linearMe） `android:layout_height`属性都更改为`"match_parent"` Remove `minHeight.

这样每个视图将占据屏幕的一半。`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:54:59.183

您可能想尝试使用“View”而不是“LinearLayout”来尝试间隔布局。ViewGroup 类有时处理布局略有不同。

# android - 如何在滑动 Android 片段时保留数据

> ID：12763751
> 
> 赞同：0
> 
> 时间：2012-10-06T20:49:23.050
> 
> 标签：android, android-fragments

我有 3 个片段：**第 1 页 - 第 2 页 - 第 3 页：** 当我滑动到第 3 页片段时，我丢失了我为第 1 页中的某些文本视图定义的内容。对于第 1 页，反之亦然，唯一不变的是第 2 页（它在中间）。

**我想知道滑动片段时如何保存数据。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:03:15.987

在您的方法中放入一些代码`onPause`以将您的数据保存到数据库、文件或 SharedPreferences，然后将代码放入`onResume`方法中以检索该数据。

# excel - 突出显示 Sheet1 中与 Sheet2 中的值匹配的行

> ID：12763755
> 
> 赞同：3
> 
> 时间：2012-10-06T20:49:56.207
> 
> 标签：excel, excel-formula, excel-2010, vba

自从我在 Excel 中完成任何高级操作以来已经有很长时间了。我有 Excel 2010。我观看了很多视频并尝试了一些教程，这些教程可以做我正在寻找的东西，但我只是错过了一些东西。

这就是我想要完成的事情......我在 Sheet2 中有一个大约 50 个 SKU 的列表。我在 Sheet1 中有 200 种产品的完整列表。

表 1：

```
ColA are SKUs
ColB is Desc
ColC is Price 
```

表 2：

```
ColA are SKUs 
```

我需要一个公式或宏来查看 Sheet2 中的所有 SKU，然后在 Sheet1 ColA 中找到任何匹配项，然后突出显示匹配的行。

我非常感谢您提供的任何帮助，即使它只是一个指向确切示例的链接。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:29:02.333

如果您只想标记匹配的行，您可以做一些简单的事情。这将返回匹配的 SKU，如果不匹配，则返回 #N/A：

`=VLOOKUP(A2,Sheet2!$A:$A,1,FALSE)`

如果您真的想要突出显示，可以使用上面的辅助公式并在该范围内设置条件格式 (CF)。CF 公式将类似于

`=NOT(ISNA($D2))`（假设您将`VLOOKUP`s 放在 D 列中）

还有另一种不使用辅助公式的 CF 方法。首先，您需要在`Sheet2 A:A`. 我将`SKUs`在此示例中调用它。

然后像这样的 CF 公式将标记匹配的行：

`=MATCH($A2,SKUs,0)>0`

编辑：我假设数据（如果你使用它，还有 CF 范围）从第 2 行开始，允许第 1 行中的标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T21:06:16.737

这可能有点晚了，但我想我还是会加我的 2 美分。我使用以下公式做类似的事情... =IFERROR(IF(VLOOKUP(B1,Sheet2!$A:$A,1,FALSE)>0,"Y","N"),"N")

基本上，如果该项目也在“Sheet2”上，我只有一列 Y 或 N，这是决定它是 Y 还是 N 的公式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T04:01:13.350

只需在条件格式公式中使用 VLOOKUP() 和 IFERROR() 即可。

选择您要应用条件格式的范围，然后执行 Home -> Conditional Formatting（2007 年），然后“应用公式”。

然后你会想应用一个或多或少像这样的公式：

`=IF(IFERROR(VLOOKUP($A2, Sheet2!$D$2:$D$4, 1, 0)), 0, 1)`

只需根据您的需要调整范围即可。我在 2007 年对此进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T07:37:25.487

您可以在 Excel 2010 中使用条件格式来实现您想要做的事情。

有两种方法可以做到这一点。第一个仅适用于一张工作表中的范围，而第二个允许您跨工作表工作。

1.  假设您可以在一个工作表中复制和粘贴两个范围，则可以使用 Control 键选择这两个范围。选择范围后，转到主页->条件格式->突出显示单元格规则->重复值。现在在对话框中选择 Duplicate，它应该突出显示 Range 1 中出现在 Range 2 中的名称（您的原始 SKU 列表）。

2.  如果您无法将第二个区域复制并粘贴到同一个工作表中，则必须使用具有条件格式的公式。在 sheet1 中选择 ColA 中使用的范围，转到 Home->Conditional Formatting->New Rule。现在选择规则类型“使用公式确定要格式化的单元格”。现在键入这样的公式（此公式假定您在应用调用对话框时光标位于 A1 中）

    =COUNTIF(Sheet2!$A$1:$A$3,Sheet1!A1)

这应该在 Sheet1 中突出显示在 Sheet2 中找到的所有项目。编辑上述公式以包含适合您情况的正确范围，如果您知道如何操作，请使用动态范围。

我已经无数次使用方法 1，我刚刚用一个样本测试了方法 2，它可以工作。如果它们不适合您，请告诉我，我可以进一步帮助您。

# python - Python中的分数

> ID：12763757
> 
> 赞同：8
> 
> 时间：2012-10-06T20:50:06.377
> 
> 标签：python, fractions

无论如何在Python中计算一个分数，例如2/3或1/2而不导入`math`模块？

代码片段很简单：

```
# What is the cube root of your number
n = float(raw_input('Enter a number: '))
print(n**(1/3)) 
```

非常简单的代码，但无论我在哪里看到它都在告诉我导入`math`模块。我只想将该片段添加到我正在处理的更大代码中。我一直得到 1 作为我的答案，因为 Python 感觉 1/3 是 0 而不是 .333333333。我可以放 .33333，但这只是一个临时修复，我想知道如何为未来的项目执行这个非常基本的计算。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T20:51:23.207

您可以`from __future__ import division`在必要时使用整数除法返回浮点数（这样 1/3 将导致 0.333333...）。

即使不这样做，您也可以通过 do`1.0/3`而不是`1/3`. （这`1.0`使第一个数字成为浮点数而不是整数，这使得除法工作正常。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T20:55:25.177

标准库中有一个分数模块，可以对分数执行各种任务。如果您对分数有很多计算，您可以在不将它们转换为浮点数的情况下进行计算。[http://docs.python.org/library/fractions.html](http://docs.python.org/library/fractions.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T22:02:28.093

只需添加小数部分和小数部分即可将操作转换为浮点数：

```
>>> n=float(raw_input('Enter a number: ')); print n**(1.0/3)
Enter a number: 2
1.25992104989 
```

或者，`float`明确使用：

```
>>> n=float(raw_input('Enter a number: ')); print n**(float(1)/3)
Enter a number: 2
1.25992104989 
```

或者，使用 Python 3 的划分风格：

```
>>> from __future__ import division
>>> n=float(raw_input('Enter a number: ')); print n**(1/3)
Enter a number: 2
1.25992104989 
```

这三种方法中的任何一种都有效。我更喜欢第一个。

# javascript - 名称的简单排序算法 - Javascript

> ID：12763760
> 
> 赞同：0
> 
> 时间：2012-10-06T20:50:27.547
> 
> 标签：javascript, sorting

如果我有一个对象**数组 Array 1:**`[Object 1, Object 2, Object 3]`并且每个对象如下所示：

```
object 1 has properties : creation date, name, class, size where name = Bear
object 2 has properties : creation date, name, class, size where name = Dog
object 3 has properties : creation date, name, class, size where name = Guerilla 
```

我想根据它们各自的名称按字母顺序对这些对象进行排序，因此**数组 2**如下所示`[Object 1 (Bear), Object 2 (Dog), Object 3 (Guerilla)]`

我将如何在 Javascript 中解决这个问题？有没有方便的方法来做到这一点？我对 JS 比较陌生。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:57:50.780

将[sort 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)与自定义比较器一起使用：

```
Array1.sort(function(x, y){
  var n1 = x.name;
  var n2 = y.name;
  return n1 == n2 ? 0
    : n1 < n2 ? -1
    : 1;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:01:40.057

```
arr.sort(function (a, b) {
  return a.localeCompare(b);
}); 
```

请注意，这`sort`是一个*就地*排序，因此您的原始数组将被排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T21:10:14.517

javascript sort 方法接受一个匿名比较函数，它为您提供了对任何属性的对象进行排序所需的所有灵活性。

一般模式是：

```
arr.sort(function(a,b){...}); 
```

提供给 sort 方法的“匿名”函数接受两个对象进行比较，并应返回一个值，指示哪个元素排序更高，如下所示：

如果 a 的排序高于 b，则返回 1
如果 a 的排序低于 b，则返回 -1
如果 a 等价于 b（用于排序目的），则返回 0

这是一个示例（省略号表示其他属性）：

```
var beasties = [
  {name:'Bear', created_at: ... },
  {name:'Dog', ... },
  {name:'Gorilla', ... }
];

beasties.sort(function(a,b){return a.name > b.name}); 
```

在这里，我依靠 js 比较 name 属性返回的字符串的能力。

我认为这应该对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T20:58:48.373

您可以将自定义比较函数传递给 Array.sort，然后排序算法将使用该函数来确定两个数组元素中的哪一个更大。当算法比较两个对象时，它将这些对象传递给比较函数。当函数返回 1 时，它认为第一个更大。当它返回 -1 时，它认为第二个更大。当它返回 0 时，它认为它们相等。

```
 function compare_function(obj1, obj2){
      if (obj1.name == obj2.name) return 0;
      if (obj1.name < obj2.name) return -1 else return 1;

  }
  my_array.sort(compare_function) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T21:00:24.493

您可以使用数组的排序方法，并传入一个函数：

```
Array1.sort(function(left,right) {
    if (left.name < right.name) return -1;
    if (left.name > right.name) return 1;
    return 0;
}); 
```

# php - CModel vs CFormModel vs CActiveRecord

> ID：12763763
> 
> 赞同：5
> 
> 时间：2012-10-06T20:50:37.983
> 
> 标签：php, yii, yii-cmodel, yii-cformmodel

我正在 yii 中构建一个数据库密集型应用程序。所以性能和安全自然是一个值得关注的问题。除此之外，表单验证也是一个主要标准。为了安全起见，我计划对所有 Sql Queries 使用参数绑定。对于验证，我想使用 Yii 提供的验证器，而不是推出我自己的 . 我知道性能会受到 CActiveRecord 的影响。所以我计划为我的所有表创建 Cmodel 类，在这些各自的模型中定义验证规则，并定义函数来执行用于检索和插入数据的 sql 查询。我在网站上收集的所有数据主要是通过表单（大约 95%），如果我使用 Cformmodel ，我真的不明白 Cmodel 和 Cformmodel 之间的区别，使用其中任何一个是否会影响性能。

另外，为了防止 XSS 攻击，我想使用 HTML purify 包装器作为验证规则，因为我几乎在所有地方都读到这个包装器的性能很差，即使我将它用作验证规则，它会不会很糟糕？即使我正在净化输入，我是否应该使用 Chtml::Encode 显示我的输出文本？

我处理数据的粗略计划是：

```
 $users= new Users() ; //Users is extending CModel , contains validation rules 
    $users=getdata(Yii->app->userid()) ; 
    if(isset('update'))
    {
        if($users->validate())
            {$users->updatedata() ; }
    }

$this->render('users','data'=>$users) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T22:07:36.197

CFormModel 继承自 CModel，CModel 只是一个通用的 Model 类，使用 CFormModel 没有性能差异，如果您不打算使用 CActiveRecord，这将更适合您的应用程序。

对于“执行 sql 查询的函数”，希望您指的是存储过程，否则不会有那么大的性能增益，即使那样，编写自己的 SQL 查询仅用于插入和检索单个模型也无济于事。我的建议是你以后关心性能。一旦你真的有需要改进的地方。

净化输入不同于编码，使用 HTML 净化可以消除有害的 html 以防止 XSS 或其他您不想允许的标签。但例如，字符串仍可能包含 ( ' )。CHtml::encode 做了什么，它只是生成 HTML 等价物，以便您获得 html 实体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T05:02:28.050

我已经发布了一个指向 yii 论坛的链接，您可以在其中找到最佳答案。

[Yii 论坛链接](http://www.yiiframework.com/forum/index.php/topic/23560-cform-and-cformmodel/)

`CModel`模型类是`CFormModel`&的基础`CActiveRecord`。

`CActiveRecord`当我们对数据库表执行 CRUD 操作并需要根据它们定义变量时使用。

`CFormModel`当我们不需要 CRUD 操作而是像登录表单这样的逻辑操作时使用。这里我们没有为模型使用任何表格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T15:58:10.103

这被称为过早优化综合症，因为您正在通过早期和不必要的优化来阻止您的开发。

首先使用最好的模型/模式开发您的应用程序，只有在寻找瓶颈和提高性能、加载时间等的方法之后。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-16T05:53:24.567

Yii 实现了两种模型：

1.  表格模型
2.  活动记录。

两者都从同一个基类 CModel 扩展而来。表单模型是 CFormModel 的一个实例。表单模型用于保存从用户输入收集的数据。这些数据经常被收集、使用然后丢弃。例如，在登录页面上，我们可以使用表单模型来表示最终用户提供的用户名和密码信息。有关详细信息，请参阅使用表单

Active Record (AR) 是一种设计模式，用于以面向对象的方式抽象数据库访问。每个 AR 对象都是 CActiveRecord 或其子类的一个实例，代表数据库表中的一行。行中的字段表示为 AR 对象的属性。有关 AR 的详细信息可以在 Active Record 中找到。

[来源](http://www.yiiframework.com/forum/index.php/topic/18467-what-is-the-purpose-of-cformmodel/)

# regex - 在 bash 脚本中使用 sed

> ID：12763768
> 
> 赞同：0
> 
> 时间：2012-10-06T20:50:58.647
> 
> 标签：regex, linux, bash, sed, grep

使用通过 grep 命令获取的行号数组，我试图增加行号并使用 sed 命令检索新行号上的内容，但我假设我的语法有问题（特别是sed 部分，因为其他一切都有效。）

脚本内容如下：

```
#!/bin/bash

#getting array of initial line numbers    

temp=(`egrep -o -n '\<a class\=\"feed\-video\-title title yt\-uix\-contextlink  yt\-uix\-sessionlink  secondary"' index.html |cut -f1 -d:`)

new=( )

#looping through array, increasing the line number, and attempting to add the
#sed result to a new array

for x in ${temp[@]}; do

((x=x+5))

z=sed '"${x}"q;d' index.html

new=( ${new[@]} $z ) 

done

#comparing the two arrays

echo ${temp[@]}
echo ${new[@]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:20:53.247

这可能对您有用：

```
#!/bin/bash

#getting array of initial line numbers    

temp=(`egrep -o -n '\<a class\=\"feed\-video\-title title yt\-uix\-contextlink  yt\-uix\-sessionlink  secondary"' index.html |cut -f1 -d:`)

new=( )

#looping through array, increasing the line number, and attempting to add the
#sed result to a new array

for x in ${temp[@]}; do

((x=x+5))

z=$(sed ${x}'q;d' index.html) # surrounded sed command by $(...)

new=( "${new[@]}" "$z" ) # quoted variables

done

#comparing the two arrays

echo "${temp[@]}" # quoted variables
echo "${new[@]}"  # quoted variables 
```

您的 sed 命令很好；它只需要被包围`$(...)`并删除和重新排列不必要的引号。

顺便提一句

要在模式后获得五行（GNU sed）：

```
sed '/pattern/,+5!d;//,+4d' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:00:39.330

您的 sed 行可能应该是：

```
z=$(sed - n "${x} { p; q }"  index.html) 
```

请注意，我们使用“-n”标志告诉 sed 只打印我们告诉它的行。当我们到达存储在“x”变量中的行号时，它将打印它（“p”）然后退出（“q”）。为了允许扩展 x 变量，我们发送给 sed 的 commabd 必须放在双引号之间，而不是单引号。

之后使用它时，您可能应该将 z 变量放在双引号之间。

希望这会有所帮助=)

# asp.net - 无法写入输出文件... pdb Visual Studio 2010

> ID：12763769
> 
> 赞同：9
> 
> 时间：2012-10-06T20:51:06.927
> 
> 标签：asp.net, visual-studio

从同一个问题的其他答案来看，这个错误似乎次要于真正的问题，即缺少源文件。我没有使用任何源代码管理。我浏览了整个项目，没有看到任何带有警告图标的文件，表明它丢失了。如果缺少文件，它缺少什么？

如何找到“丢失”的文件？没有办法重置这个吗？我的整个项目都停留在这个问题上。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-06T22:22:26.350

我也有这个。关闭VS并重新打开。不要编译。错误列表应该告诉您缺少哪个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:20:30.043

我也有这个问题。我的项目在发布模式下构建，但没有在调试模式下工作。我检查了我的解决方案中是否包含所有必需的文件，我发现我的项目文件夹中缺少一个文件 Settings.Designer.vb。我将这些文件包含在项目中，它也在调试模式下构建文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T20:27:47.000

确保所有 aspx 文件在您的解决方案中都可用，否则检查 WebSite.vbproj，确保您的代码中可能缺少文件，将此文件添加到解决方案中，或将其从 WebSite.vbproj 中删除。推荐你使用Notepad++打开和修改WebSite.vbproj

问候， 路艾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-02T17:10:38.157

另一种可能性是实际项目中存在损坏的编译 dll（即`bin/<project>.dll`）在我的情况下，我只是删除了 .dll 和 .pdb 并重新编译，错误就消失了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-29T12:36:11.937

从解决方案资源管理器中删除已删除的文件，然后重建，在我的计算机上解决了它。

# recursion - 方案：高阶过程和递归

> ID：12763783
> 
> 赞同：1
> 
> 时间：2012-10-06T20:52:44.053
> 
> 标签：recursion, map, scheme

我正在使用方案作为我正在学习的课程的一部分。我被告知在作业中使用高阶函数。然而，这个指令似乎有些不清楚。

我不完全理解高阶程序的想法。我可以使用递归来解决所有问题，但这是同一回事。任何人都可以用一个递归函数的例子来解释它，而不是用一个高阶过程编写的例子。

作为第二个问题：

示例：尝试抓取所有奇数

我可以使用`(flatten (map odd ((1 4 5) (4 5 1 4 9))))`，但是如果有嵌套列表，我可以在嵌套列表上使用 map 吗，例如：

`(flatten (map odd ((1 3 (9 5 7))))`; 是否有此功能或干净的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:53:08.557

高阶函数的目的是减少代码中的样板，并减少循环（技术上它是递归，但它的目的是循环，所以我将其称为循环）和实际逻辑之间的耦合。这是一个示例（重新抓取所有奇数）：手动循环如下所示：

```
(define (filter-odd lst)
  (cond ((null? lst) '())
        ((odd? (car lst)) (cons (car lst) (filter-odd (cdr lst))))
        (else (filter-odd (cdr lst))))) 
```

但是请注意，您已经在一个函数中获得了循环和过滤。这使得弄清楚函数在做什么变得更加困难，因为这两个不相关的操作是耦合在一起的。使用更高级别的函数，您可以做不同的事情：

```
(define (filter pred lst)
  (cond ((null? lst) '())
        ((pred (car lst)) (cons (car lst) (filter pred (cdr lst))))
        (else (filter pred (cdr lst)))))

(define (filter-odd lst)
  (filter odd? lst)) 
```

现在注意，如何`odd?`从循环逻辑中分离出来，现在已经分离成`filter`? `filter`现在接受一个函数对象，它决定是否保留该项目，并且调用者`filter`可以插入他们选择的任何函数。

**这就是高阶函数的含义：它是一个以函数对象为参数的函数，用于自定义其操作。**

正如您问题的原始编辑中提到的，`map`是另一个高阶函数，但它不是从列表中过滤项目，而是返回原始列表中每个项目的转换，其中特定转换由`map`调用者通过范围。

* * *

要回答您关于展平等的实际问题，`(map filter-odd '((1 3 (9 5 7))))`将返回一个包含单个项目的列表，即调用的结果`(filter-odd '(1 3 (9 5 7)))`。所以不，`map`不会为您递归到子列表中（也不会`filter`）。

但是您可以先展平输入（因为无论如何您都在展平输出），然后`filter-odd`直接调用它。我希望这会给您带来您期望的结果。

（我将你重命名`odd`为，因为它不太可能与（谓词）`filter-odd`混淆。）`odd?`

* * *

### 奖金材料

顺便说一句，两者`filter`和`map`都是更通用的高阶函数的特化，称为折叠（或更具体地说，右折叠）。`filter`折叠可以表达任何一个或都无法容纳的东西`map`，但它以某种方式涉及遍历列表中的所有项目。这是一个`length`函数的示例，表示为折叠：

```
(define (foldl func init lst)
  (if (null? lst) init
      (foldl func (func (car lst) init) (cdr lst))))

(define (length lst)
  (foldl (lambda (elem count)
           (+ count 1))
         0 lst)) 
```

这里的好处是该`length`函数不必担心遍历列表：这是由折叠处理的。它只需要担心每次迭代要做什么（这里只是简单地将 1 加到`count`0 开始）。

在这种情况下，无论我们从左侧遍历还是从右侧遍历，长度都是相同的，而在 Scheme 中，从左侧遍历更节省空间，因此我们更喜欢这样。但是为了实现`map`and `filter`，右折叠是必要的（否则元素会颠倒 - 尝试在下面的函数中替换`foldr`with `foldl`，你会看到）：

```
(define (foldr func init lst)
  (if (null? lst) init
      (func (car lst) (foldr func init (cdr lst)))))

(define (map func lst)
  (foldr (lambda (elem result)
           (cons (func elem) result))
         '() lst))

(define (filter pred lst)
  (foldr (lambda (elem result)
           (if (pred elem)
               (cons elem result)
               result))
         '() lst)) 
```

# git - 在 svn + SASL 上使用 git-svn 和加密

> ID：12763789
> 
> 赞同：3
> 
> 时间：2012-10-06T20:53:15.093
> 
> 标签：git, svn, git-svn, msysgit, sasl

是否可以通过 svn + SASL 启动 git-svn 并进行加密？

我有一个错误无法建立连接。

```
C:\a\trunk>git svn clone svn://url/trunk 
Initialized empty Git repository in c:/a/trunk/trunk/.git/ 
Authorization failed: Cannot negotiate authentication mechanism at C:\Program Files (x86)\Git/libexec/git-core\git-svn line 2167 
```

**更新**该问题仅在 Windows 下出现。

**更新 2**这个问题只出现在[msysgit 上](http://msysgit.github.com/)。如果你[通过普通的 cygwin 安装 git](http://www.celinio.net/techblog/?p=818)一切都会正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-26T06:04:09.263

正如您在评论中提到的，msysgit 不包括（直到今天）对与 SASL 的安全 svnserve 通信的支持，因此[在 Cygwin 上使用 git (+ git-svn)](http://www.celinio.net/techblog/?p=818)似乎是唯一可用的选择。

但是上一个教程没有提到的是使 SASL 在 cygwin 上与普通 git 一起工作的必要库。所以你还需要安装这个包（都可以从 cygwin 安装程序中获得）：

*   perl-Authen-SASL
*   perl-Term-ReadKey
*   libsasl2_3 (*)

(*) 不太确定这个是必需的，但也安装了这个，一切都很顺利。

为了使用 SASL 克隆一个安全的 svn 存储库。

# google-app-engine - 谷歌应用引擎和 JPA

> ID：12763790
> 
> 赞同：1
> 
> 时间：2012-10-06T20:53:16.360
> 
> 标签：google-app-engine, jpa

我尝试使用 JPA 和 GAE 持久化一个包含预定义实例（实体）的实例（实体），关系是 oneToOne，如下所示：

```
@Entity class Address{ ... @OneToOne(cascade = CascadeType.ALL)private City city;}

@Entity class City{...} 
```

我创建了城市实例（实体）并将其持久化，效果很好，当尝试创建包含创建的城市实例的地址实例时（因为从 UI 中，它从下拉框中选择），我得到以下异常：

```
javax.persistence.PersistenceException: Detected attempt to establish Address(no-id-yet) as the parent of City(20) but the entity identified by City(20) has already been persisted without a parent.  A parent cannot be established or changed once an object has been persisted. 
```

是否应该使用任何注释来实现这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:02:33.120

问题在于 DataStore 如何存储密钥。您的关系类型是父/子，因此对于 City，您将 Adress 作为父。这意味着您将拥有以父级作为地址的复合键。您的城市已经存在，因此您将无法更改密钥（密钥在创建后不能动态更改。它们是不可变的）。

我认为 OneToOne 参考不适合您。为什么需要一个单独的对象？如果您真的需要它 - 不要试图保持参考完整性。它在 NoSQL 中非常昂贵，并且可能导致很多问题。

# django - Instagram 是如何使用 django 的？

> ID：12763792
> 
> 赞同：11
> 
> 时间：2012-10-06T20:53:32.383
> 
> 标签：django, instagram

我不知道这是否是在这里问的正确问题。我读到 Instagram 使用 django，它是一个 python web 框架。但 Instagram 是一个 iOS 应用程序。iOS 应用程序不是用目标 c 编写的吗？Instagram 使用 django 是什么意思？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-06T21:07:50.667

IOS 是应用程序的“前端”。Django 是一个后端“服务器端”Web 框架。

例如，如果有一个 iPhone 应用程序向您展示有关烘焙的所有最新教程视频（假设您有一个网站 baketutorials.com），您可以在 Objective-c 中创建一个 iPhone 应用程序作为前端运行。在您的 Objective-c iPhone 代码中，您将与运行 Django/Python 的“服务器”进行通信。服务器端 (Django) 将视频和其他烘焙数据保存在数据库中。前端 iOS 应用程序从 Django 应用程序请求数据。客户端和服务器端通信。这通常是通过 RESTful API 完成的——从基本术语来说，这意味着 iPhone 应用程序使用人类可读的 URL 从 Django/服务器的数据库中获取数据。此数据从服务器发送到前端，由 Objective-c 解析并为应用程序格式化

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T21:07:39.627

Instagram 将其用于其网站，并可能用于 API。但没有关于这方面的官方信息。

是的，你是对的：iOS 应用是在 ObjectiveC 中完成的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:07:49.023

iOS 应用程序既可以用 Objective-c 原生编写，也可以是 webapps，在 WebKit 视图中显示托管在站点上的移动服务。

不管 Instagram 为他们的 iOS 应用程序使用什么格式，django 仍然是一个解决方案。作为本机应用程序，它们仍然可以通过 REST api 接口从移动设备与 django Web 服务器进行通信。

Django 不必专门用于提供 HTML。它可以提供您想要的任何类型的 HTTP 响应。这对于具有桌面浏览器界面的站点来说很常见，然后还会将一些 API url 暴露给相同的后端，从而允许移动应用程序发出相同的请求。

# uitableview - NSInternalInconsistencyException 错误 UITableViewController

> ID：12763793
> 
> 赞同：0
> 
> 时间：2012-10-06T20:53:37.197
> 
> 标签：uitableview

我在细节和主控中使用 TableViewController 做一个 SplitViewController。

当我尝试运行时，我在控制台中收到此消息：

```
2012-10-06 16:42:05.304 BaylorNotes7[3040:c07] *** Assertion failure in -[UITableView       _configureCellForDisplay:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:5471
2012-10-06 16:42:05.306 BaylorNotes7[3040:c07] *** Terminating app due to uncaught   exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a    cell from tableView:cellForRowAtIndexPath:' 
```

问题出在 DetailViewController.m 中：

```
#import "DetailViewController.h"
#import "NSString+HTML.h"

typedef enum { SectionHeader, SectionDetail } Sections;
typedef enum { SectionHeaderTitle, SectionHeaderDate, SectionHeaderURL } HeaderRows;
typedef enum { SectionDetailSummary } DetailRows;

@implementation DetailTableViewController

@synthesize item, dateString, summaryString;

#pragma mark -
#pragma mark Initialization

- (id)initWithStyle:(UITableViewStyle)style {
if ((self = [super initWithStyle:style])) {

}
return self;
}

#pragma mark -
#pragma mark View lifecycle

- (void)viewDidLoad {

// Super
[super viewDidLoad];

// Summary
if (item.summary) {
    self.summaryString = [item.summary stringByConvertingHTMLToPlainText];
} else {
    self.summaryString = @"[No Summary]";
}

}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView  {
// Return the number of sections.
return 2;
}

- (NSInteger)tableView:(UITableView *)tableView  numberOfRowsInSection:(NSInteger)section {
// Return the number of rows in the section.
switch (section) {
    case 0: return 1;
    default: return 1;
}
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:@"DetailCell"];

// Display
cell.textLabel.textColor = [UIColor blackColor];
cell.textLabel.font = [UIFont systemFontOfSize:15];
if (item) {

    // Item Info
    NSString *itemTitle = item.title ? [item.title stringByConvertingHTMLToPlainText] : @"[No Title]";

    // Display
    switch (indexPath.section) {
        case SectionHeader: {

            // Header
            switch (indexPath.row) {
                case SectionHeaderTitle:
                    cell.textLabel.font = [UIFont fontWithName:@"Times New Roman" size:20];
                    cell.textLabel.text = itemTitle;
                    break;
            }
            break;

        }
        case SectionDetail: {

            // Summary
            cell.textLabel.text = summaryString;
            cell.textLabel.numberOfLines = 100; // Multiline
            cell.textLabel.font = [UIFont fontWithName:@"Times New Roman" size:20];
            break;

        }
    }
}

return cell;

}

- (CGFloat)tableView:(UITableView *)tableView  heightForRowAtIndexPath:(NSIndexPath *)indexPath {
if (indexPath.section == SectionHeader) {

    // Regular
    return 60;

} else {

    // Get height of summary
    NSString *summary = @"[No Summary]";
    if (summaryString) summary = summaryString;

    CGSize s = [summary sizeWithFont:[UIFont systemFontOfSize:20]
                   constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding

                       lineBreakMode:UILineBreakModeWordWrap];

    return s.height; // Add padding

}
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

// Open URL
if (indexPath.section == SectionHeader && indexPath.row == SectionHeaderURL) {
    if (item.link) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:item.link]];
    }
}

// Deselect
[self.tableView deselectRowAtIndexPath:indexPath animated:YES];

}

@end 
```

我很确定问题出在 Table 声明中的某个地方。如果有人想知道，我按照 MWFeedParser 教程得到了这个。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:10:36.467

在情节提要中选择原型单元格，转到属性检查器，将其输入到标识符字段中。并设置正确的标识符。
信用： [http ://www.raywenderlich.com/forums/viewtopic.php?f=13&t=4217](http://www.raywenderlich.com/forums/viewtopic.php?f=13&t=4217)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:57:59.773

在本次通话中：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"DetailCell"]; 
```

您忘记测试单元格是否为零，而是像这样分配它：

```
if( cell == nil  {
   cell = [[[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault
                                  reuseIdentifier: cellIdentifier ] autorelease];
} 
```

# php - 多个域不同的静态页面

> ID：12763796
> 
> 赞同：-1
> 
> 时间：2012-10-06T20:54:38.213
> 
> 标签：php, wordpress, .htaccess, dns, seo

我的主域`domain.co.nz`有一个静态主页，`home`但我也有一个非常适合 SEO 目的的 url，我想做的是弄清楚如何将我的`seoDomain.co.nz`观点指向具有相关信息的特定静态页面，但其余部分该网站仍然存在`domain.co.nz`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:11:28.687

如果我很好理解这就是您应该做的，在您想要显示来自另一个页面的信息的网站部分中，使用 PHP 的内置`include()`或`require()`函数并将其值设置为 $_GET 变量（如果您希望用户添加书签它）包含域中的其他页面。但这对您的网站来说确实很危险且不安全，因此在此之前，我建议您`Remote File Inclusion/Local File Inclusion`在执行上述任何操作之前先进行谷歌预防。

# c# - 在 C# 中列出文件夹内的重复文件：利用 LINQ.AsParallel

> ID：12763797
> 
> 赞同：3
> 
> 时间：2012-10-06T20:54:55.043
> 
> 标签：c#

我在 C# 代码中编写了以下算法，以递归方式列出文件夹中的文件。

1.  开始遍历目录及其子目录中的文件列表。
2.  将文件名和路径存储在列表中。
3.  如果当前文件与列表中的任何其他文件匹配，则在将两个文件标记为重复时。
4.  从列表中获取所有标记为重复的文件。
5.  按名称分组并返回。

在包含 50,000 个文件和 12,000 个子目录的文件夹中，执行速度非常慢。由于磁盘读取操作基本上是耗时的任务。甚至**LINQ.Parallel()**也无济于事。

**实施：**

> ```
> class FileTuple
> {
>     public string FileName { set; get; }
>     public string ContainingFolder { set; get; }
>     public bool HasDuplicate { set; get; }
>     public override bool Equals(object obj)
>     {
>         if (this.FileName == (obj as FileTuple).FileName)
>             return true;
>         return false;
>     }
> } 
> ```

1.  FileTuple 类跟踪文件名和包含目录，标志跟踪重复状态。
2.  我已经覆盖了 equals 方法以仅比较 fileTuples 集合中的文件名。

以下方法查找重复文件并作为列表返回。

```
 private List<FileTuple> FindDuplicates()
    {
        List<FileTuple> fileTuples = new List<FileTuple>();
        //Read all files from the given path
        List<string> enumeratedFiles = Directory.EnumerateFiles(txtFolderPath.Text, "*.*", SearchOption.AllDirectories).Where(str => str.Contains(".exe") || str.Contains(".zip")).AsParallel().ToList();
        foreach (string filePath in enumeratedFiles)
        {
            var name = Path.GetFileName(filePath);
            var folder = Path.GetDirectoryName(filePath);
            var currentFile = new FileTuple { FileName = name, ContainingFolder = folder, HasDuplicate = false, };

            int foundIndex = fileTuples.IndexOf(currentFile);
            //mark both files as duplicate, if found in list
            //assuming only two duplicate file
            if (foundIndex != -1)
            {
                currentFile.HasDuplicate = true;                    
                fileTuples[foundIndex].HasDuplicate = true;
            }
            //keep of track of the file navigated
            fileTuples.Add(currentFile);
        }

        List<FileTuple> duplicateFiles = fileTuples.Where(fileTuple => fileTuple.HasDuplicate).Select(fileTuple => fileTuple).OrderBy(fileTuple => fileTuple.FileName).AsParallel().ToList();
        return duplicateFiles;
    } 
```

您能否提出一种提高性能的方法。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:03:44.020

> 您能否提出一种提高性能的方法。

一个明显的改进是使用 a`Dictionary<FileTuple, FileTuple>`和 a `List<FileTuple>`。这样您就不会`IndexOf`在每次检查时进行 O(N) 操作。请注意，您还需要覆盖`GetHashCode()`- 您应该已经对此有警告。

我怀疑它会产生很大的不同——我希望这主要是受 IO 限制的。

此外，我怀疑最后的过滤和排序是否会成为一个重要的瓶颈，所以`AsParallel`在最后一步中使用它不太可能做太多事情。当然，您应该*衡量*所有这些。

最后，整个方法可以变得相当简单，甚至不需要`HasDuplicate`标志或任何覆盖`Equals`/ `GetHashCode`：

```
private List<FileTuple> FindDuplicates()
{
    return Directory.EnumerateFiles(txtFolderPath.Text, "*.*", 
                                    SearchOption.AllDirectories)
                    .Where(str => str.Contains(".exe") || 
                           str.Contains(".zip")
                    .Select(str => new FileTuple { 
                               FileName = Path.GetFileName(str),
                               ContainingFolder = Path.GetDirectoryName(str))
                            })
                    .GroupBy(tuple => tuple.FileName)
                    .Where(g => g.Count() > 1) // Only keep duplicates
                    .OrderBy(g => g.Key)       // Order by filename
                    .SelectMany(g => g)        // Flatten groups
                    .ToList();                     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:18:20.770

[如果性能很关键，我可以建议使用来自http://www.voidtools.com/download.php](http://www.voidtools.com/download.php)的第三方库，尝试下载这个工具并运行一些查询，它会很快点亮，它通过建立一个索引来工作在第一次运行时整个文件系统上的文件和目录，索引在不到一分钟的时间内构建得非常快，并且在内存和磁盘上都需要一些时间，但是之后查询会非常快，你可以在他们的 C# 示例中查看如何在你的代码。

# java - Netty 客户端有时不会收到所有预期的消息

> ID：12763800
> 
> 赞同：0
> 
> 时间：2012-10-06T20:55:07.627
> 
> 标签：java, networking, netty

我有一个相当简单的测试 Netty 服务器/客户端项目。我正在测试通信稳定性的某些方面，方法是用消息淹没服务器并计算我返回的消息和字节以确保一切匹配。

当我从客户端运行洪水时，客户端会跟踪它发送的消息数量以及返回的消息数量，然后当数量相等时，它会打印出一些统计信息。

在本地运行时的某些情况下（我猜是因为拥塞？）客户端永远不会最终打印出最终消息。当 2 个组件在远程机器上时，我没有遇到这个问题。任何建议，将不胜感激：

Encoder 只是一个简单的 OneToOneEncoder ，它将 Envelope 类型编码为 ChannelBuffer ，而 Decoder 是一个简单的 ReplayDecoder ，它做相反的事情。

我尝试向我的客户端处理程序添加一个 ChannelInterestChanged 方法，以查看通道的兴趣是否已更改为不读取，但似乎并非如此。

相关代码如下：

谢谢！

**服务器**

```
 public class Server {

    // configuration --------------------------------------------------------------------------------------------------
    private final int port;
    private ServerChannelFactory serverFactory;
    // constructors ---------------------------------------------------------------------------------------------------

    public Server(int port) {
        this.port = port;
    }

    // public methods -------------------------------------------------------------------------------------------------
    public boolean start() {
        ExecutorService bossThreadPool = Executors.newCachedThreadPool();
        ExecutorService childThreadPool = Executors.newCachedThreadPool();

        this.serverFactory = new NioServerSocketChannelFactory(bossThreadPool, childThreadPool);
        this.channelGroup = new DeviceIdAwareChannelGroup(this + "-channelGroup");
        ChannelPipelineFactory pipelineFactory = new ChannelPipelineFactory() {
            @Override
            public ChannelPipeline getPipeline() throws Exception {
                ChannelPipeline pipeline = Channels.pipeline();
                pipeline.addLast("encoder", Encoder.getInstance());
                pipeline.addLast("decoder", new Decoder());
                pipeline.addLast("handler", new ServerHandler());
                return pipeline;
            }
        };

        ServerBootstrap bootstrap = new ServerBootstrap(this.serverFactory);
        bootstrap.setOption("reuseAddress", true);
        bootstrap.setOption("child.tcpNoDelay", true);
        bootstrap.setOption("child.keepAlive", true);
        bootstrap.setPipelineFactory(pipelineFactory);

        Channel channel = bootstrap.bind(new InetSocketAddress(this.port));
        if (!channel.isBound()) {
            this.stop();
            return false;
        }

        this.channelGroup.add(channel);
        return true;
    }

    public void stop() {
        if (this.channelGroup != null) {
            ChannelGroupFuture channelGroupCloseFuture = this.channelGroup.close();
            System.out.println("waiting for ChannelGroup shutdown...");
            channelGroupCloseFuture.awaitUninterruptibly();
        }
        if (this.serverFactory != null) {
            this.serverFactory.releaseExternalResources();
        }
    }

    // main -----------------------------------------------------------------------------------------------------------
    public static void main(String[] args) {
        int port;
        if (args.length != 3) {
            System.out.println("No arguments found using default values");
            port = 9999;
        } else {
            port = Integer.parseInt(args[1]);
        }

        final Server server = new Server( port);

        if (!server.start()) {
            System.exit(-1);
        }
        System.out.println("Server started on port 9999 ... ");
        Runtime.getRuntime().addShutdownHook(new Thread() {
            @Override
            public void run() {
                server.stop();
            }
        });
    }
} 
```

**服务器处理程序**

```
 public class ServerHandler extends SimpleChannelUpstreamHandler {

    // internal vars --------------------------------------------------------------------------------------------------

    private AtomicInteger numMessagesReceived=new AtomicInteger(0);

    // constructors ---------------------------------------------------------------------------------------------------
    public ServerHandler() {
    }

    // SimpleChannelUpstreamHandler -----------------------------------------------------------------------------------
    @Override
    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
        Channel c = e.getChannel();
        System.out.println("ChannelConnected: channel id: " + c.getId() + ", remote host: " + c.getRemoteAddress() + ", isChannelConnected(): " + c.isConnected());
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) throws Exception {
        System.out.println("*** EXCEPTION CAUGHT!!! ***");
        e.getChannel().close();
    }

    @Override
    public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
        super.channelDisconnected(ctx, e);
        System.out.println("*** CHANNEL DISCONNECTED ***");

    }

    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
        if(numMessagesReceived.incrementAndGet()%1000==0 ){
             System.out.println("["+numMessagesReceived+"-TH MSG]: Received message: " + e.getMessage());
        }

        if (e.getMessage() instanceof Envelope) {
                // echo it...
                if (e.getChannel().isWritable()) {
                    e.getChannel().write(e.getMessage());
                }
        } else {
            super.messageReceived(ctx, e);
        }
    }
} 
```

**客户**

```
public class Client implements ClientHandlerListener {

    // configuration --------------------------------------------------------------------------------------------------
    private final String host;
    private final int port;
    private final int messages;
    // internal vars --------------------------------------------------------------------------------------------------
    private ChannelFactory clientFactory;
    private ChannelGroup channelGroup;
    private ClientHandler handler;
    private final AtomicInteger received;
    private long startTime;
    private ExecutorService cachedThreadPool = Executors.newCachedThreadPool();

    // constructors ---------------------------------------------------------------------------------------------------
    public Client(String host, int port, int messages) {
        this.host = host;
        this.port = port;
        this.messages = messages;
        this.received = new AtomicInteger(0);
    }

    // ClientHandlerListener ------------------------------------------------------------------------------------------
    @Override
    public void messageReceived(Envelope message) {
        if (this.received.incrementAndGet() == this.messages) {
            long stopTime = System.currentTimeMillis();
            float timeInSeconds = (stopTime - this.startTime) / 1000f;
            System.err.println("Sent and received " + this.messages + " in " + timeInSeconds + "s");
            System.err.println("That's " + (this.messages / timeInSeconds) + " echoes per second!");
        }
    }

    // public methods -------------------------------------------------------------------------------------------------
    public boolean start() {

        // For production scenarios, use limited sized thread pools
        this.clientFactory = new NioClientSocketChannelFactory(cachedThreadPool, cachedThreadPool);
        this.channelGroup = new DefaultChannelGroup(this + "-channelGroup");
        this.handler = new ClientHandler(this, this.channelGroup);
        ChannelPipelineFactory pipelineFactory = new ChannelPipelineFactory() {
            @Override
            public ChannelPipeline getPipeline() throws Exception {
                ChannelPipeline pipeline = Channels.pipeline();
                pipeline.addLast("byteCounter", new ByteCounter("clientByteCounter"));
                pipeline.addLast("encoder", Encoder.getInstance());
                pipeline.addLast("decoder", new Decoder());
                pipeline.addLast("handler", handler);
                return pipeline;
            }
        };

        ClientBootstrap bootstrap = new ClientBootstrap(this.clientFactory);
        bootstrap.setOption("reuseAddress", true);
        bootstrap.setOption("tcpNoDelay", true);
        bootstrap.setOption("keepAlive", true);
        bootstrap.setPipelineFactory(pipelineFactory);

        boolean connected = bootstrap.connect(new InetSocketAddress(host, port)).awaitUninterruptibly().isSuccess();
        System.out.println("isConnected: " + connected);
        if (!connected) {
            this.stop();
        }

        return connected;
    }

    public void stop() {
        if (this.channelGroup != null) {
            this.channelGroup.close();
        }
        if (this.clientFactory != null) {
            this.clientFactory.releaseExternalResources();
        }
    }

    public ChannelFuture sendMessage(Envelope env) {
        Channel ch = this.channelGroup.iterator().next();
        ChannelFuture cf = ch.write(env);
        return cf;
    }

    private void flood() {
        if ((this.channelGroup == null) || (this.clientFactory == null)) {
            return;
        }

        System.out.println("sending " + this.messages + " messages");
        this.startTime = System.currentTimeMillis();
        for (int i = 0; i < this.messages; i++) {

            this.handler.sendMessage(new Envelope(Version.VERSION1, Type.REQUEST, 1, new byte[1]));
        }
    }
    // main -----------------------------------------------------------------------------------------------------------

    public static void main(String[] args) throws InterruptedException {
        final Client client = new Client("localhost", 9999, 10000);

        if (!client.start()) {
            System.exit(-1);
            return;
        }
        while (client.channelGroup.size() == 0) {
            Thread.sleep(200);
        }
        System.out.println("Client started...");

        client.flood();

        Runtime.getRuntime().addShutdownHook(new Thread() {
            @Override
            public void run() {
                System.out.println("shutting down client");
                client.stop();
            }
        });

    }
} 
```

**客户处理程序**

```
public class ClientHandler extends SimpleChannelUpstreamHandler {
    // internal vars --------------------------------------------------------------------------------------------------
    private final ClientHandlerListener listener;
    private final ChannelGroup channelGroup;
    private Channel channel;

    // constructors ---------------------------------------------------------------------------------------------------
    public ClientHandler(ClientHandlerListener listener, ChannelGroup channelGroup) {
        this.listener = listener;
        this.channelGroup = channelGroup;
    }

    // SimpleChannelUpstreamHandler -----------------------------------------------------------------------------------

    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
        if (e.getMessage() instanceof Envelope) {
            Envelope env = (Envelope) e.getMessage();
            this.listener.messageReceived(env);
        } else {
            System.out.println("NOT ENVELOPE!!");
            super.messageReceived(ctx, e);
        }
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) throws Exception {
        System.out.println("**** CAUGHT EXCEPTION CLOSING CHANNEL ***");
        e.getCause().printStackTrace();
        e.getChannel().close();
    }

    @Override
    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
        this.channel = e.getChannel();
        System.out.println("Server connected, channel id: " + this.channel.getId());
        this.channelGroup.add(e.getChannel());
    }

    // public methods -------------------------------------------------------------------------------------------------
    public void sendMessage(Envelope envelope) {
        if (this.channel != null) {
            this.channel.write(envelope);
        }
    }
} 
```

**客户端处理程序侦听器接口**

```
public interface ClientHandlerListener {

    void messageReceived(Envelope message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:50:03.270

在不知道网络上的信封有多大的情况下，我猜测您的问题是您的客户端写入 10,000 条消息而没有检查通道是否可写。

Netty 3.x 处理网络事件并以特定方式写入。有可能您的客户端写入的数据如此之快，以至于 Netty 没有机会处理接收事件。在服务器端，这将导致通道变得不可写并且您的处理程序丢弃回复。

您在 localhost 上看到问题的原因有几个，但可能是因为写入带宽远高于您的网络带宽。客户端不检查通道是否可写，因此通过网络，您的消息由 Netty 缓冲，直到网络可以赶上（如果您写入的消息明显超过 10,000 条，您可能会看到 OutOfMemoryError）。这是一个自然的中断，因为 Netty 将暂停写入，直到网络准备好，允许它处理传入的数据并防止服务器看到不可写的通道。

丢弃处理程序中的[DiscardClientHandler](http://static.netty.io/3.5/xref/org/jboss/netty/example/discard/DiscardClientHandler.html)显示了如何测试通道是否可写，以及当它再次变为可写时如何恢复。另一种选择是让 sendMessage 返回与写入关联的 ChannelFuture，如果在写入后通道不可写，则阻塞直到未来完成。

此外，您的服务器处理程序应该编写消息，然后检查通道是否可写。如果不是，您应该将通道可读设置为 false。当通道再次变为可写时，Netty 会通知 ChannelInterestChanged。然后您可以将 channel readable 设置为 true 以继续阅读消息。

# android - 如何以编程方式为线性布局设置背景颜色？

> ID：12763803
> 
> 赞同：5
> 
> 时间：2012-10-06T20:55:29.553
> 
> 标签：android, android-layout

如何以编程方式为线性布局设置背景颜色？我尝试了以下代码但无法正常工作：

```
LinearLayout footer = new LinearLayout(activity);
footer.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, 8));
footer.setBackgroundColor(Color.parseColor("##ffb5d6e1"));
((LinearLayout)v).addView(footer); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-14T07:01:13.317

我认为您的问题在您的行中：

```
footer.setBackgroundColor(Color.parseColor("##ffb5d6e1")); 
```

删除额外的“#”符号，使其成为：

```
footer.setBackgroundColor(Color.parseColor("#b5d6e1")); 
```

我还删除了“ff”，因为您实际上将不透明度设置为 100%，如果您只使用六个字符长的十六进制值，则默认情况下会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-21T06:16:20.553

你在正确的轨道上，但犯了一个非常**小**的错误。

您使用的颜色格式错误。来自Android的官方文档，

> 支持的格式有：#RRGGBB #AARRGGBB 或以下名称之一：'red'、'blue'、'green'、'black'、'white'、'gray'、'cyan'、'magenta'、'yellow' ，'lightgray'，'darkgray'，'grey'，'lightgrey'，'darkgrey'，'aqua'，'fuchsia'，'lime'，'maroon'，'navy'，'olive'，'purple'，'银'，'蓝绿色'。

所以，基本上你为该方法使用**了错误的颜色格式**`parseColor()`。只需删除一个额外的 # 即可。

```
footer.setBackgroundColor(Color.parseColor("#ffb5d6e1")); 
```

**奖金**

为简单起见，您还可以从颜色中删除不透明度组件。您正在使用“ff”将不透明度设置为 100%，但这也是默认行为。所以你可以删除这个组件并保持简单，就像这样，

```
footer.setBackgroundColor(Color.parseColor("#b5d6e1")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T06:30:45.447

基本上这是你需要设置背景颜色

```
please follow the following steps 
```

实例化线性布局的视图，如 LinearLayout m=(LinearLayout)findViewByid(R.id.line1); m.setBackground(R.color.back);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T09:48:43.617

简单代码

```
LinearLayout m=findViewById(R.id.l3);
l3.setBackgroundColor(Color.parseColor("#84C8A9")); 
```

# c# - 为一个 1:n 关系生成两个关系列

> ID：12763810
> 
> 赞同：0
> 
> 时间：2012-10-06T20:56:30.807
> 
> 标签：c#, sql-server, nhibernate, fluent-nhibernate

我正在尝试使用 Fluent NHibernate 建模一个简单的 1:n 关系：
有人和项目。一个人拥有零到无限的物品，而一件物品属于一个人。

我的数据类：

```
public class Person
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual IList<Item> Items { get; set; }
}
public class Item
{
    public virtual int Id { get; set; }
    public virtual Person Owner { get; set; }
} 
```

和映射：

```
public sealed class ItemMap : ClassMap<Item>
{
    public ItemMap()
    {
        Id(x => x.Id);
        References(x => x.Owner);
    }
}
public sealed class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        HasMany(x => x.Items).Inverse();
    }
} 
```

当我尝试使用 NHibernate 的`SchemaExport`类创建数据库模式时，出现了我的问题。

Item 表实际上有两列引用 Person 表：

```
create table [Item] (
    Id INT IDENTITY NOT NULL,
   Owner_id INT null,
   Person_id INT null,
   primary key (Id)
) 
```

这是为什么？
一列应该就足够了——据我所知，调用`Inverse`应该抑制第二列——但是，事实并非如此。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T12:58:25.173

您的假设是错误的 - 调用`Inverse`告诉 NH 关系是从另一端管理的（即您将通过设置添加项目`Owner`）；它不会改变有关模式生成的任何内容。

我不知道确切的 Fluent 语法，但基本上你需要告诉它 is 的键`HasMany`列`Owner_id`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:08:15.140

的映射`Person`应该是：

```
public sealed class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        HasMany(x => x.Items)
            .KeyColumn("Owner_id")
            .Inverse();
    }
} 
```

# css - 更改浏览器以显示视网膜或 webkit-min-device-pixel-ratio: 2

> ID：12763813
> 
> 赞同：0
> 
> 时间：2012-10-06T20:56:45.287
> 
> 标签：css, web-applications

> **可能重复：**
> [如何在非视网膜显示器上模拟 Mac OS X 10.8 Mountain Lion 中的视网膜显示器（HiDPI 模式）？](https://stackoverflow.com/questions/12124576/how-to-simulate-a-retina-display-hidpi-mode-in-mac-os-x-10-8-mountain-lion-on)

是否可以在浏览器中测试我的应用程序，并让浏览器伪装成视网膜？

我想测试一个网络应用程序，并检查它在具有视网膜显示屏的 iPad 上的外观。

# python - Web2Py - 使用 Crud 的自定义文件上传表单

> ID：12763814
> 
> 赞同：1
> 
> 时间：2012-10-06T20:56:51.680
> 
> 标签：python, web2py

我正在 Web2Py 中创建一个自定义文件上传表单，并希望一些更有经验的用户可以帮助我解决一些问题。基本上，数据库（“t_file”）在“db_wizard.py”中定义，在控制器中，我调用 crud.create(db.t_file, next=URL('upload')); 使用 {{form}} 在 html 文件中添加一个表单。

创建了大约十几个字段，其中两个是选择器，一个是文件上传/浏览字段，其余是输入框。我想进行以下更改：

- 目前，选择器默认为空选项。它们在 DB 文件中定义如下：

> Field('f_data_real_or_fabricated_bool', 'list:string', requires=IS_IN_SET(['T','F']), label=T('Real or Fabricated')),

然而。显示时，第一个选项为空，其他两个选项在空选项下方。有没有办法摆脱空选项？

- 常规文本输入框、选择框和文件名输入框的宽度不同。使它们具有相同宽度的最佳方法是什么？我一直在尝试使用 CSS 做各种各样的事情，但似乎无法得到它。

- 有没有办法为某些文本输入区域使用可扩展的文本框？

-我希望前几个输入字段是必需的，其余的是可选的。默认情况下，必填字段应出现在上传页面上，其余可选字段仅应在选中“高级字段”（类似这些内容）复选框时出现。做这个的最好方式是什么？

是否可以通过坚持使用 crud.create 或 crud.* 方法进行上述更改，而无需设计自定义表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T14:52:30.247

我认为您应该一次攻击一件事，并且对于每件事，尝试粘贴一些很有帮助的代码。我尝试回答最后一个问题：我认为如果不更改内部代码，您将无法使用 crud 界面执行此操作（不要这样做！）。使用 SQLFORM，您可以更改字段上的 CSS。但是，最好的和更可控的，虽然更辛苦的工作，是创建自定义表单。

# ruby-on-rails - 如何在模型行中设置唯一属性

> ID：12763815
> 
> 赞同：0
> 
> 时间：2012-10-06T20:56:53.453
> 
> 标签：ruby-on-rails, model, activeadmin

我有一个像这样的模型竞争对手

```
class Competitor < ActiveRecord::Base
  belongs_to :admin_user
  has_many :companies
  attr_accessible :admin_user_id, :c1, :c2, :c3, :c4, :c5
  validates :admin_user_id, :presence => true
  validates_uniqueness_of :admin_user_id, :message => "This user has yet a competitors list"

end 
```

C1, c2,.. 是公司的 id。从下拉列表中选择。如何验证行的唯一性？（即管理员用户不可能有两个或多个相等的公司，但它们可以是空的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:47:11.153

您可以编写自己的验证方法来强制执行此操作。

```
class Competitor < ActiveRecord::Base
  belongs_to :admin_user
  has_many :companies
  attr_accessible :admin_user_id, :c1, :c2, :c3, :c4, :c5
  validates :admin_user_id, :presence => true
  validates_uniqueness_of :admin_user_id, :message => "This user has yet a competitors list"

  validate :check_companies

  def check_companies
    #[do your checks]
  end

end 
```

# css - CSS 在 Chrome 开发工具上恢复默认

> ID：12763816
> 
> 赞同：4
> 
> 时间：2012-10-06T20:57:33.640
> 
> 标签：css, google-chrome

我在 OSx 山狮上使用 MAMP。

在突然在 localhost 中托管的网站上工作时，当我尝试在 chrome 开发人员工具中编辑 CSS 时，它会恢复为默认值。

例子：

如果我将**border: 0px**更改为**border: 1px**它会回到**0px**。

这只发生在本地主机上的站点中。

任何帮助，将不胜感激...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:25:23.407

[使用CSSLint 之](http://csslint.net)类的工具检查您的 CSS 。似乎最新版本的 Chrome 不允许您在 CSS 中出现语法错误后出现的开发人员工具中编辑 CSS。

# jquery - jquery 手风琴 - 滚动到 li 标题

> ID：12763817
> 
> 赞同：2
> 
> 时间：2012-10-06T20:57:35.817
> 
> 标签：jquery, header, html-lists, accordion, scrollto

手风琴是使用列表 ul 和 li 而不是 div 构建的。像大多数遇到这个问题的人一样，手风琴的某些部分中的内容很长，当我触发其中一个大标题时，用户然后向下滚动以查看所有内容；在其下方是另一个要单击的 li 标题，手风琴关闭并打开最后一个标题。由于该部分中的内容也很大，用户只能盯着最后一个标题部分的底部，并且必须再次向上滚动。

在研究这个问题时，许多人建议使用 animate() 函数将注意力重新集中在手风琴的顶部。我的问题是因为我使用了开源代码，所以我不愿意对其进行过多的编辑，我已经尝试过，但到目前为止还没有成功。

任何人都可以帮忙吗？[这里是jquery]

* * *

```
 (function(jQuery){
     jQuery.fn.extend({  
         accordion: function() {       
            return this.each(function() {

                var $ul = $(this);

                if($ul.data('accordiated'))
                    return false;

                $.each($ul.find('ul, li>div'), function(){
                    $(this).data('accordiated', true);
                    $(this).hide();
                });

                $.each($ul.find('a'), function(){
                    $(this).click(function(e){
                        activate(this);
                        return void(0);
                    });
                });

                var active = (location.hash)?$(this).find('a[href=' + location.hash + ']')[0]:'';

                if(active){
                    activate(active, 'toggle');
                    $(active).parents().show();
                }

                function activate(el,effect){
                    $(el).parent('li').toggleClass('active').siblings().removeClass('active').children('ul, div').slideUp('slow');
                    $(el).siblings('ul, div')[(effect || 'slideToggle')]((!effect)?'fast':null);
                }

            });
        } 
    });  
})(jQuery); 
```

* * *

谢谢 ：）

[编辑]

我意识到您可能需要从我的 html 触发手风琴的代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('ul').accordion();

    });
</script> 
```

随着更多的研究，有些人建议使用 scrollTo() ，所以我也尝试了这个::

```
 <script type="text/javascript">
        $(document).ready(function () {
            $('ul').accordion({
    change: function() {
        document.scrollTo(0, 0);
    }
});
        });
    </script> 
```

但这也不起作用。“叹息” .. 有谁知道我是否走在正确的轨道上？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:24:20.200

我解决了这个问题：

这有点作弊，但这就是我所做的。

为我要单击的每个 href 链接添加了一个滚动类`class="scroll"`

将此脚本添加到页面（我将我的脚本放在名为#acc 的 div 下）

```
<script>$(document).ready(function($) {

    $(".scroll").click(function(event){     
        event.preventDefault();
        $('html,body').animate({scrollTop:$("#acc").offset().top}, 500);
    });
});</script> 
```

我与原来的唯一不同的是#acc。那是我围绕手风琴 ul 类的 div 的名称。

这是我获得滚动代码的地方[http://www.sycha.com/jquery-smooth-scrolling-internal-anchor-links](http://www.sycha.com/jquery-smooth-scrolling-internal-anchor-links)

我希望这可以帮助其他寻找这个问题的人。^.^

# pdo - 在本地工作，无法在 Laravel 中连接到远程数据库

> ID：12763823
> 
> 赞同：0
> 
> 时间：2012-10-06T20:58:18.030
> 
> 标签：pdo, laravel, laravel-3

我正在尝试在 Laravel 本地工作，但无法连接到远程数据库。我使用我的域名 (domain.org) 作为我的主机，然后像往常一样使用密码、用户名和数据库名称。但我得到这个错误：

```
PDO::__construct(): Premature end of data (mysqlnd_wireprotocol.c:553) 
```

如果我查看发生错误的文件，它在我的 MySQL 驱动程序中的 PDO 连接中。我向我的 ISP 询问设置，他说使用 domain.org 或 IP。我都试过了，我仍然得到错误。我尝试将端口设置为标准 3306，但仍然出现错误。我不能使用 localhost 作为我的主机，因为它会引用我的本地计算机。有人可以帮忙吗？我需要做什么才能连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:55:50.840

要使用“远程 Mysql”，您需要将您的 IP 添加到服务器上的白名单中，并将 Mysql 配置为接受远程连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:00:13.380

我认为这是您的 Web 主机上 MySQL 版本中使用的加密与您的 PHP 版本使用的加密之间的区别。

看看这个问题的公认答案：

[远程 mySQL 连接从 XAMPP 引发“无法使用旧的不安全身份验证连接到 MySQL 4.1+”错误](https://stackoverflow.com/questions/8481620/remote-mysql-connection-throws-cannot-connect-to-mysql-4-1-using-the-old-insec)

至于解决方案，您的网络主机可能愿意也可能不愿意更改您的 MySQL 设置——但我猜如果他们运行的是旧的 MySQL，他们也会运行旧版本的 PHP。Laravel 需要 5.3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-18T12:39:10.600

老问题，但是，很多人可能需要这个，所以添加对我有用的

在 5.6+ 中，也将在出租版本上工作

```
DB_CONNECTION_REMOTE=mysql
DB_HOST_REMOTE=remotehost
DB_PORT_REMOTE=3306
DB_DATABASE_REMOTE=database_name
DB_USERNAME_REMOTE=database_user
DB_PASSWORD_REMOTE=database_password 
```

并在 config/database.php

```
 'connections' => [
  'mysqlRemote' => [
            'driver' => 'mysql',
            'host' => env('DB_HOST_REMOTE', '127.0.0.1'),
            'port' => env('DB_PORT_REMOTE', '3306'),
            'database' => env('DB_DATABASE_REMOTE', 'forge'),
            'username' => env('DB_USERNAME_REMOTE', 'forge'),
            'password' => env('DB_PASSWORD_REMOTE', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => 'utf8mb4',
            'collation' => 'utf8mb4_unicode_ci',
            'prefix' => '',
            'strict' => false,
            'engine' => null,
        ], 
```

然后在你的控制器中

```
$records = DB::connection('mysqlRemote')->select( DB::raw('SELECT `col1`, `col2` FROM `table`') ); 
```

如果你的 IP 被列入白名单，它应该可以正常工作，在 Laravel 5.6 中测试

# c# - 从 ComboBox 事件中获取 DataGrid 行

> ID：12763828
> 
> 赞同：0
> 
> 时间：2012-10-06T20:59:33.973
> 
> 标签：c#, wpf

我有一个在 XAML 中定义为 2 列的 DataGrid

```
<DataGrid x:Name="marketInfodg" Grid.Row="1"
ItemsSource = "{Binding ElementName=This, Path=dataTableTest}"
CanUserAddRows="False">
<DataGrid.Columns>
    <DataGridComboBoxColumn Header="Department Id" x:Name="comboboxColumn1"
         SelectedValueBinding="{Binding Department Id}" />
        <DataGridTemplateColumn x:Name="DataGridTempCol" Header="Selection">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox
x:                  Name = "combo"
                    SelectedValue = "{Binding Selection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    ItemsSource = "{Binding comboBoxSelections, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"
                    DropDownOpened = "combo_DropDownOpened"
                    DisplayMemberPath = "Key"
                    IsEditable="True">
                    </ComboBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

构造函数代码是

```
_dataTableTest = new DataTable();
DataColumn dc = new DataColumn();
dc.ReadOnly = false;
dc.DataType = typeof(String);
dc.ColumnName = "Department Id";
_dataTableTest.Columns.Add(dc);

DataColumn dc1 = new DataColumn();
dc1.ReadOnly = false;
dc1.DataType = typeof(KeyValuePair<string, double>);
dc1.ColumnName = "Selection";
_dataTableTest.Columns.Add(dc1);

marketInfodg.ItemsSource = _dataTableTest.DefaultView;
var row = _dataTableTest.NewRow();
row = _dataTableTest.NewRow();
_dataTableTest.Rows.Add(row);
row["Department Id"] = "X567";
row["Selection"] = (KeyValuePair<string, double>)comboBoxSelections[0]; 
```

它有效地将单行设置为列“Department Id”=“X567”，第二列是设置为 comboBoxSelections[0] 中第一项的组合框

`combo_DropDownOpened`当打开任何 Combobox 下拉菜单（显然）时会触发该事件，我可以`cb`使用基于发件人设置变量

```
private void combo_DropDownOpened(object sender, EventArgs e)
{
  var cb = ((System.Windows.Controls.ComboBox)sender);
} 
```

如何在`combo_DropDownOpened`事件中获取关联的行（行中的所有列）和触发组合框的行索引/编号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:12:39.157

ComboBox 位于`visual tree of the DataGrid`. 如果您沿着 Visual Tree 向上移动，您会在通往 DataGrid 顶部的路上找到 DataGridRow。

您可以使用`VisualTreeHelper`该类走到可视化树。通常，您可以使用此方法在控件的 Visual 树中查找任何父级。将此方法放在某个实用程序类中，并在您想走到可视化树以供您的控件查找任何父级时使用 -

```
public static Parent FindParent<Parent>(DependencyObject child)
            where Parent : DependencyObject
{
   DependencyObject parentObject = child;

   //We are not dealing with Visual, so either we need to fnd parent or
   //get Visual to get parent from Parent Heirarchy.
   while (!((parentObject is System.Windows.Media.Visual)
           || (parentObject is System.Windows.Media.Media3D.Visual3D)))
   {
       if (parentObject is Parent || parentObject == null)
       {
           return parentObject as Parent;
       }
       else
       {
          parentObject = (parentObject as FrameworkContentElement).Parent;
       }
    }

    //We have not found parent yet , and we have now visual to work with.
    parentObject = VisualTreeHelper.GetParent(parentObject);

    //check if the parent matches the type we're looking for
    if (parentObject is Parent || parentObject == null)
    {
       return parentObject as Parent;
    }
    else
    {
        //use recursion to proceed with next level
        return FindParent<Parent>(parentObject);
    }
} 
```

现在，在您的 dropDown 事件处理程序中，您可以使用上述函数来查找 DataGridRow，如下所示 -

```
private void combo_DropDownOpened(object sender, EventArgs e)
{
   var cb = ((System.Windows.Controls.ComboBox)sender);
   DataGridRow dataGridRow = FindParent<DataGridRow>(cb);
   int index = dataGridRow.GetIndex();
} 
```

# matlab - 多类的朴素贝斯分类器：获得相同的错误率

> ID：12763829
> 
> 赞同：0
> 
> 时间：2012-10-06T20:59:54.970
> 
> 标签：matlab, machine-learning

我已经为多类实现了 Naive Bayse 分类器，但问题是我的错误率是相同的，而我增加了训练数据集。我一直在调试它，但无法弄清楚它为什么会发生。所以我想我会把它贴在这里，看看我是否做错了什么。

```
%Naive Bayse Classifier
%This function split data to 80:20 as data and test, then from 80
%We use incremental 5,10,15,20,30 as the test data to understand the error
%rate. 
%Goal is to compare the plots in stanford paper
%http://ai.stanford.edu/~ang/papers/nips01-discriminativegenerative.pdf

function[tPercent] = naivebayes(file, iter, percent)
dm = load(file);
    for i=1:iter

        %Getting the index common to test and train data
        idx = randperm(size(dm.data,1))

        %Using same idx for data and labels
        shuffledMatrix_data = dm.data(idx,:);
        shuffledMatrix_label = dm.labels(idx,:);

        percent_data_80 = round((0.8) * length(shuffledMatrix_data));

        %Doing 80-20 split
        train = shuffledMatrix_data(1:percent_data_80,:);

        test = shuffledMatrix_data(percent_data_80+1:length(shuffledMatrix_data),:);

        %Getting the label data from the 80:20 split
        train_labels = shuffledMatrix_label(1:percent_data_80,:);

        test_labels = shuffledMatrix_label(percent_data_80+1:length(shuffledMatrix_data),:);

        %Getting the array of percents [5 10 15..]
        percent_tracker = zeros(length(percent), 2);

        for pRows = 1:length(percent)

            percentOfRows = round((percent(pRows)/100) * length(train));
            new_train = train(1:percentOfRows,:);
            new_train_label = train_labels(1:percentOfRows);

            %get unique labels in training
            numClasses = size(unique(new_train_label),1);
            classMean = zeros(numClasses,size(new_train,2));
            classStd = zeros(numClasses, size(new_train,2));
            priorClass = zeros(numClasses, size(2,1));

            % Doing the K class mean and std with prior
            for kclass=1:numClasses
                classMean(kclass,:) = mean(new_train(new_train_label == kclass,:));
                classStd(kclass, :) = std(new_train(new_train_label == kclass,:));
                priorClass(kclass, :) = length(new_train(new_train_label == kclass))/length(new_train);
            end

            error = 0;

            p = zeros(numClasses,1);

            % Calculating the posterior for each test row for each k class
            for testRow=1:length(test)
                c=0; k=0;
                for class=1:numClasses
                    temp_p = normpdf(test(testRow,:),classMean(class,:), classStd(class,:));
                    p(class, 1) = sum(log(temp_p)) + (log(priorClass(class)));
                end
                %Take the max of posterior 
                [c,k] = max(p(1,:));
                if test_labels(testRow) ~= k
                    error = error +  1;
                end
            end
            avgError = error/length(test);
            percent_tracker(pRows,:) = [avgError percent(pRows)];
            tPercent = percent_tracker;
            plot(percent_tracker)
        end
    end
end 
```

这是我的数据的维度

```
x = 

      data: [768x8 double]
    labels: [768x1 double] 
```

我正在使用来自 UCI 的 Pima 数据集

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:45:47.137

您实施训练数据本身的结果是什么？它完全适合吗？

很难确定，但我注意到了几件事：

1.  每个班级都有训练数据很重要。如果没有训练数据，你就不能真正训练分类器来识别一个类。
2.  如果可能的话，不应将训练示例的数量偏向某些类。例如，如果在 2 类分类中，第 1 类的训练和交叉验证示例的数量仅占数据的 5%，则始终返回第 2 类的函数将有 5% 的误差。您是否尝试过分别检查精度和召回率？
3.  您正在尝试将正态分布拟合到类中的每个特征，然后将其用于后验概率。我不确定它在平滑方面的表现如何。你能尝试用简单的计数重新实现它，看看它是否会给出不同的结果吗？
4.  也可能是特征高度冗余，贝叶斯方法高估了概率。

# android - 在滚动期间将下载的图像保留在列表视图中

> ID：12763830
> 
> 赞同：2
> 
> 时间：2012-10-06T20:59:57.683
> 
> 标签：android, scroll, android-arrayadapter

我正在开发我的第一个应用程序，并且在这里阅读了很多内容。

一个多星期以来，我一直试图为以下问题找到解决方案，但没有成功。我有一个`Adapter`扩展`ArrayAdapter`以在每行中显示图像和 3 行文本。在里面`getView`我为 s 分配相关信息`TextView`并使用`ImageLoader`类下载图像并将其分配给`ImageView`.

一切都很好！我的屏幕上有 4.5 行可见（总共 20 行）。当我第一次向下滚动时，图像会继续下载并以正确的顺序分配到列表中。

但是当我向后滚动列表时，会丢失所有图像并开始以正确的顺序重新绘制它们（每张图像 0.5-1 秒）。从我一直在阅读的内容来看，它是标准列表性能，但我想更改它。

我想要的是，一旦下载了图像，它将被“粘贴”到当前窗口的整个会话的列表中。就像在联系人列表或市场中一样。它只有 20 张图片（每张 6-9kb）。

希望我设法解释自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:22:36.707

您需要在下载后缓存每个图像，并且每次适配器需要它时检查它是否已经下载从缓存（磁盘或内存）中获取它，否则下载它。

起初，我建议您从 android 开发网站[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html阅读本教程](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

或使用像这样的外部库[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:23:28.790

这里的问题是 ArrayAdapter 在您滚动时重用列表视图行，因此当您向下滚动时，顶行将被重用并插入到列表底部（出于性能原因）。

您最好的选择是尝试在您的设备上本地缓存图像，以避免每次都调用 ImageLoader。

一个很好的解决这个问题的库是点火。它是开源的，可在此处获得：[https ://github.com/kaeppler/ignition](https://github.com/kaeppler/ignition)

看一下`RemoteImageView`缓存机制的一个很好的例子。

# mysql - MySQL VIEW 列作为其他 3 个 VIEW 列的组合排名

> ID：12763832
> 
> 赞同：0
> 
> 时间：2012-10-06T21:00:06.717
> 
> 标签：mysql, view, percentile

忍受我，我是 SQL.stupid。我终于了解到应该尽可能使用视图而不是 crons。现在，我在视图问题中有一个视图。

我的堆栈朋友让我走到了这一步：

```
CREATE VIEW tbl.sums as SELECT 

table2.id, 

SUM( table1.column1 * 2 ) as column1Sum,

SUM( table1.column2 * 2 ) as column2Sum,

SUM( table1.column3 * 2 ) as column3Sum

FROM table1, table2
WHERE table1.table2_id = table2.id GROUP BY table2.id 
```

我想将第 5 列放入与其他 3 列同等加权的视图中。

因此，方程类似于 (1/3)*percentile(column1Sum) + (1/3)*percentile(column2Sum) + (1/3)*percentile(column3Sum) 其中“percentile()”是百分位数列与列的其余部分。

请原谅缺乏清晰度。这真的不是我的专长。将根据需要进行编辑。

非常感谢您提前！

**百分位清晰度**

就我而言，百分位数是针对重复调整的给定列的从最高到最低的百分比排名。因此，对于具有 100 个值的列，具有最大值的列将是 100%，具有最低值的列将是 0%（或者是 1%？）。如果有 100 个但 50 个重复项，则底部的两个将分享 2%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:28:20.990

```
CREATE VIEW tbl.sums as SELECT 
    tmp.*,
    (1/3)*(tmp.column1Sum+tmp.column2Sum+tmp.column3Sum)
FROM (
    SELECT 
        table2.id, 
        SUM( table1.column1 * 2 ) as column1Sum,
        SUM( table1.column2 * 2 ) as column2Sum,
        SUM( table1.column3 * 2 ) as column3Sum
    FROM table1, table2
    WHERE table1.table2_id = table2.id GROUP BY table2.id
) AS tmp 
```

这个等式对我来说没有多大意义，我认为一定有什么问题，或者我没有真正得到百分位数应该是什么......所以我随便放了，只要它取决于子查询。

如果您没有使用子查询，而是`column1Sum`直接使用子查询，您将收到关于未知列的错误。

否则，您可以只重写用于计算总和的公式，而不是使用其名称。但我想这对您的用例不实用。

# mysql - 按一年中的周查找 ActiveRecord 对象

> ID：12763835
> 
> 赞同：0
> 
> 时间：2012-10-06T21:01:02.130
> 
> 标签：mysql, ruby-on-rails, ruby, sqlite, activerecord

我的报告中有日期。现在我想查找一年中某一周的所有报告。我所拥有的是：

```
class Model < ActiveRecord::Base
  attr_accessible :date

  def self.find_by_week(week, year)
    Model.all.find_all do |model|
      model.date.year == year and model.date.s­trftime("%­W").to_i == week
    end
  end  
end 
```

但是当软件已经积累了成千上万的预期报告时，我担心这个解决方案的性能可能不是很好。有更好的解决方案吗？

如果重要的话，我在开发中使用 SQLite3，但生产数据库将是 MySQL。虽然我想要一个独立于数据库的解决方案，但如果可能的话......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:13:04.813

您可以传入一个日期范围：

```
dates = Date.commercial(2012,40)..Date.commercial(2012,41)
Model.where(:date => dates) 
```

还有更多可用的参数`Date.commercial`- 以上将为您提供周一至周一。要设置更具体的日期/时间，[请查看文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-commercial)。

# c - 如何在 C 中检查 EOF？

> ID：12763836
> 
> 赞同：1
> 
> 时间：2012-10-06T21:01:04.760
> 
> 标签：c, file-io, eof

例如，我有一个带有数字行的文本文件

```
 5  6  3 2 10  4 6 
18 49 40 9 17 40 0 
```

当我读入文件时，它不会在文件末尾停止。我的循环读取代码如下 -

```
while ((fscanf(spFile, "%d", &scores[i][j])) == 1 && spFile != EOF) {
        printf("%d ", scores[i][j]);

        if(j == 8) {
            i++;
            j = 0;
            printf("\n");
        } else {
            j++;
        }
        numOfStudents++;
    } 
```

最大行数是 50（所以一个 50 的数组（必须将它作为数组而不是指针））并且我有 numOfStudents 来计算行数，当它完成时它说 50，而实际上它只有 2 个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:05:03.857

fscanf() 将返回 0 或 EOF。

您还可以使用“feof()”函数。

文件指针变量 spFile*永远不会*等于 EOF。“EOF”是由 C 运行时管理的状态，它不是文件指针本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:04:00.450

循环的条件应该是这样的：

```
while (fscanf(spFile, "%d", &scores[i][j]) > 0){
   /* Do Stuff */
} 
```

或者，为了避免无法解析输入的情况：

```
while (!feof(spFile) && fscanf(spFile, "%d", &scores[i][j]) > 0){
   /* Do Stuff */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:12:33.860

尝试检查返回的字节数`fscanf()`是否大于`0`：

```
while(fscanf(...) > 0) {
/* do something */
} 
```

错误检查是这样的：

```
while(1) {
  fscanf( .. );

  if(feof(fp)) {
    if(ferror(fp)) {
        /* stoped because an error check out errno */
    }

   break;
  } 
```

# httpie - 如何将响应标头打印到控制台并将内容保存到文件？

> ID：12763837
> 
> 赞同：6
> 
> 时间：2012-10-06T21:01:13.677
> 
> 标签：httpie

如何将响应标头打印到控制台并将响应内容保存到文件中？

* * *

我试过了

```
http GET http://download.sysinternals.com/files/SysinternalsSuite.zip --output sis.zip 
```

但这会将文件的标题和内容都打印到文件中，这很荒谬。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-17T14:40:48.647

在更新的版本中，该`--output`选项可能会将输出打印到文件中，并且该`--download`选项将确保将标题打印到控制台，并且仅将内容打印到输出文件。

这是一个例子：

```
http GET "https://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&exintro=&explaintext=&titles=Stack%20Overflow" --download --output bla.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T00:49:50.060

这是 HTTPie*默认做的*：

*   [当输出未重定向](https://github.com/jkbr/httpie#terminal-output)时，**整个消息**将打印到终端（标题和正文）。但是，**二进制数据不会打印**到终端。
*   [当输出重定向到文件](https://github.com/jkbr/httpie#redirected-output)时，**只**打印正文（标题和正文）。身体是否是二元的并不重要。

因此，输出取决于打印到的位置。[您可以使用输出选项](https://github.com/jkbr/httpie#output-options)之一覆盖默认的上下文相关行为。例如，以下将标题和正文保存到文件中：

```
http --output sis.zip --print=hb download.sysinternals.com/files/SysinternalsSuite.zip 
```

HTTPie 当前不允许向终端输出二进制数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T15:16:50.733

这是不可能的。报告的问题[https://github.com/jkbr/httpie/issues/97](https://github.com/jkbr/httpie/issues/97)

**2013 年更新**：已修复。尝试

```
http -h --download http://download.sysinternals.com/files/SysinternalsSuite.zip 
```

# c++ - 如何以尽可能低的时间复杂度检测网格中的循环？

> ID：12763838
> 
> 赞同：0
> 
> 时间：2012-10-06T21:01:20.360
> 
> 标签：c++, algorithm, graph, cycle

我有一个最多 35 个字符的网格，它可能是 (1x35..5x7) 或其他任何东西。网格上每个单元格的值只能是二进制的。在模拟具有某些动作的游戏时，这意味着在经过移动。如果我必须检测这个游戏的周期/周期，我可以在尽可能低的时间复杂度内使用什么算法/数据结构？我尝试了一种基于 log n 树的方法来存储网格的状态，但是当周期大于 2^17 时，它对于我的目的来说不够快。有没有一种技术可以在不占用太多内存的情况下对网格状态执行散列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:02:57.263

网格是一个 35 位数字，因此您可以将网格存储为整数（在 64 位机器上）或 2 个字在较小的数字上。你可以将你已经看到的状态保存在一个巨大的直接地址数组或哈希表中。

# asp.net-mvc - jQuery 自动完成和 WebApi 排序

> ID：12763842
> 
> 赞同：1
> 
> 时间：2012-10-06T21:02:01.653
> 
> 标签：asp.net-mvc, asp.net-web-api, jquery-autocomplete

我正在使用 WebApi 控制器将 IDictionary 返回给 jQuery 自动完成功能，如下所示：

```
public IDictionary<int, string> GetClientAuto(string term)
    {
        var clients = db.Clients.Where(n => n.Name.Contains(term)).OrderBy(n => n.Name);
        return clients.ToDictionary(n => n.ClientID, n => n.Name);
    } 
```

问题是虽然我添加了一个断点并检查变量 clients 是否按 Name 排序变为 true，但自动完成框中显示的顺序不同，可能我希望通过 ID。我尝试将此添加到自动完成：sortResults：false，但没有效果。

我在我的 succes 函数中有这个，这里是否有一些东西可能我需要更改才能在标签上工作的顺序，即名称：

```
success: function (json) {
                        // call autocomplete callback method with results
                        response($.map(json, function (name, val) {
                            return {
                                label: name,
                                value: val
                            }
                        }));
                    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:45:23.703

它由 ToDictionary 调用排序，实际上并没有定义字典的顺序（http://msdn.microsoft.com/en-us/library/yt2fy5zk.aspx），因为它不重要，但我相信它是通常是键的值，而不是值。

您可以在 javascript 中按名称使用它，或者您可以从您的 api 返回字典以外的内容。IEnumerable> 或 IEnumerable 都可以解决问题。

或者查看字典上的 OrderBy 方法，但它们似乎都返回 KeyValuePairs 列表。

最终结果应该类似于

```
public IEnumerable<KeyValuePair<int, string>> GetClientAuto(string term)
{
  return db.Clients.Where(n => n.Name.Contains(term)).OrderBy(n => n.Name).Select(n => new KeyValuePair<int, string>(n.ClientID, n.Name ));
}

success: function (json) 
{
   response($.map(json, function (item) {
      return {
        label: item.Value,
        value: item.Key
      }
   }));
}, 
```

# python - 有没有更好的方法来处理 DoesNotExist 查询集

> ID：12763846
> 
> 赞同：0
> 
> 时间：2012-10-06T21:02:14.517
> 
> 标签：python, django

处理不存在的查询集可能有更好的方法......！我对这段代码的问题是，如果正常情况为真，它会引发异常！即：如果数据库中不存在同名的工作空间名称。

但是我不想有一个例外，我想去一个不返回 DoesNotExist 但真或假的查询

我不优雅的代码：

```
 try:
            is_workspace_name = Workspace.objects.get(workspace_name=workspace_name,user=self.user.id )
 except:
        return workspace_name
 if is_workspace_name:
            raise forms.ValidationError(u'%s already exists as a workspace name! Please choose a different one!' %workspace_name  ) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:14:12.593

您可以使用[exists()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#exists)方法。引用文档：

> 如果 QuerySet 包含任何结果，则返回 True，否则返回 False。这试图以最简单和最快的方式执行查询，但它确实执行与普通 QuerySet 查询几乎相同的查询。

备注： ***最简单最快的方法。***使用`exists`( 比`count`) 更便宜，因为`exists`数据库在第一次出现时停止计数。

```
if Workspace.objects.filter(workspace_name=workspace_name, 
                            user=self.user.id).exists()
    raise forms.ValidationError(u'%s already exists ...!' % workspace_name)
else:
    return workspace_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:09:46.423

## 检查记录是否存在。

如果要测试数据库中是否存在记录，可以使用`Workspace.objects.filter(workspace_name = workspace_name,user = self.user.id).count()`.

这将返回符合您条件的记录数。如果没有，此数字将为 0，这将很容易与`if`子句一起使用。我相信这对我来说是在这里做你需要的最标准和最简单的方法。

**## 编辑 ## 实际上这是错误的，您可能需要检查 danihp 的答案以获得更好的解决方案，使用`Queryset.exists`!**

## 一句警告：插入前检查存在的情况

但是，在使用这种结构时要小心，特别是如果您打算在尝试插入记录之前检查是否有重复项。在这种情况下，最好的解决方案是尝试创建记录并查看它是否引发异常。

实际上，您可能处于以下情况：

1.  请求 1 到达服务器
2.  请求 2 到达服务器
3.  检查请求 1，不存在对象。
4.  检查请求 2，不存在对象。
5.  继续请求 1 中的创建。
6.  继续请求 2 中的创建。

而且......你有一个重复 - 这被称为[竞争条件](http://en.wikipedia.org/wiki/Race_condition#Example)，并且是处理并行代码时的常见问题。

**长话短说**，您应该在处理插入时使用`try`,`expect`和约束。`unique`

按照 init3 的建议，使用`get_or_create`也有帮助。确实，[`get_or_create`知道这一点](https://github.com/django/django/blob/master/django/db/models/query.py#L469)，只要不需要的重复会引发`IntegrityError`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:04:13.667

```
obj, created = Workspace.objects.get_or_create(workspace_name=workspace_name, user=self.user.id)

if created:
    # everything ok
    # do something
    pass
else:
    # not ok
    # respond he should choose anything else
    pass 
```

[在文档中阅读更多内容](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)

# android - GC_FOR_ALLOC 导致 Android 游戏卡顿

> ID：12763870
> 
> 赞同：0
> 
> 时间：2012-10-06T21:05:24.447
> 
> 标签：android, garbage-collection, cocos2d-iphone

我正在开发一款适用于 Android 的大炮游戏，它需要程序生成关卡。当玩家在空中飞行时，新的部分会被添加到关卡的末尾，以使其无限期地进行下去。随着这些部分的添加，玩家已经通过的部分被删除。问题是创建一个部分通常会导致 GC_FOR_ALLOC，它会暂停游戏大约 30 毫秒并导致明显的延迟。

可用内存保持相当一致，因为对象被删除而其他对象被添加，因此似乎没有内存泄漏。我使用的引擎是来自 iOS 的 cocos2D-android-1 端口。

我看到了许多类似“在游戏运行时不要初始化事物”的解决方案，但关卡生成的本质要求这样做，因为无法在游戏开始时就创建无限长度的关卡。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:44:17.623

你不是很具体。如果滞后太大，你必须设法减少它。

一种方法可能是更频繁地收集 - 导致更短但更频繁发生的暂停。

例如，您可能会创建较小的或仅部分的部分，然后尝试推动垃圾收集器运行。你会用`System.gc()`这个。但请注意，`System.gc()`不能保证会导致它实际开始运行。

一个更好的解决方案是重用对象。在关卡启动之前创建的对象。这样，即使是无穷无尽的关卡也不会导致任何垃圾收集，因为没有垃圾积累。但请确保不要创建任何非池化对象！

# symfony - 在 Symfony 2 中使用 Doctrine 时防止生成某些方法

> ID：12763874
> 
> 赞同：2
> 
> 时间：2012-10-06T21:05:44.290
> 
> 标签：symfony, doctrine-orm

使用 Symfony 2 命令时是否可以防止生成某些方法（对于实体类）：

```
php ./app/console doctrine:generate:entities ... 
```

我希望一些参数完全不受外界影响。

我知道我可以为这个参数创建空的 setter 和 getter，但我最好不要——为了代码的整洁。

# javascript - 由于多行数据，Salesforce 中出现未终止的字符串文字错误

> ID：12763876
> 
> 赞同：0
> 
> 时间：2012-10-06T21:06:05.460
> 
> 标签：javascript, salesforce

我正在使用一个标准页面，其中有一个编写 JavaScript 代码的按钮。它正在调用控制器（类）。

当我使用单击按钮时，它给了我错误：

```
A problem with the OnClick JavaScript for this button or link was encountered:
unterminated string literal. 
```

Javascript：

```
try
{
  alert('hi1');
}
catch(Err)
{
  alert('Error  in creation'+Err);
} 
```

在搜索并进行了一些尝试后，使用了上面的简单警报代码。

我找到。每当我使用它们之间有新行空间的数据时，即多次使用数据。无论您是否在 JavaScript 代码和类中使用该特定字段，都会遇到此错误。

我在这里发现了类似的问题：[salesforce 中未终止的字符串文字错误，](https://stackoverflow.com/questions/5794593/unterminated-string-literal-error-in-salesforce) 但上述链接中未指定解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:44:45.020

尝试将 SUBSTITUTE() 甚至 URLENCODE() 包装在长文本字段的值周围，然后从 JS 解码？

回到 S-Control 时代，我一直在欺骗，将长文本值放入`<p id="myId" style="visibility:hidden">{!mergefield}</p>`其中，然后使用 getElementById 引用它们......

如果您真的从 JS 调用您的控制器，那么您可能可以控制换行符（用某些东西替换它们？）或者您不需要显示整个错误消息。也许 err.details？另外 - 将有助于使用正确的 JS 调试工具......

# php - php循环通过分数

> ID：12763877
> 
> 赞同：0
> 
> 时间：2012-10-06T21:06:18.120
> 
> 标签：php, math

我还没有写任何代码，因为我不知道从哪里开始。

我有一张医生填写的 RX 处方表，用于创建“新处方”。我需要写一张支票，以确保他们填写的内容实际上是可能的。他们填写了 4 个变量：数量、每剂量 MG、每天剂量、规定日期。

例如，我需要确保如果医生填写 RX：总共 10 粒药丸、每剂 1MG 和每天 3 剂，它将返回错误。它会出错，因为 3 天后患者只剩下 1 颗药丸（每天 3 颗 * 3 天 = 9 次总剂量）。

我需要确保处方是有道理的，并且无论他们填写什么在数学上都是可能的。我的猜测是写一个 PHP 循环，但遗憾的是数学对我来说非常模糊。任何帮助是极大的赞赏。这是我的项目“上线”之前的最终功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:14:26.000

你基本上是说你想知道药丸的总数是否能被天数整除？你知道处方的天数吗？如果是这样的话：

 `````
if($totalNumberOfPills % $numberOfDays == 0) {
   // Sound.
} 
````  `也许我误解了你在问什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:17:32.080

从你的例子：

> 医生填写 RX：总共 10 粒药丸，每剂 1MG 和每天 3 剂，它会返回错误。它会出错，因为 3 天后患者只剩下 1 颗药丸（每天 3 颗 * 3 天 = 9 次总剂量）。

我了解您需要确保`The Total number of pills`是 的倍数`Dosages per day`。

您可以通过操作员轻松检查`%`：

```
if($totalNumberOfPills % $pillsPerDay == 0)
{
    //Ok
}
else
{
    //Not Ok
} 
```

您还可以计算这些药丸将持续多少天：

```
$numberOfDays = $totalNumberOfPills/$pillsPerDay; 
```

如果这个数字不是整数，那么你知道这些值是不正确的。

```
if(is_int($numberOfDays))
{
    //Ok
}
else
{
    //Not Ok
} 
`````

# objective-c - NSSearchPathForDirectoriesInDomains 根据环境返回不同的结果

> ID：12763883
> 
> 赞同：2
> 
> 时间：2012-10-06T21:07:14.777
> 
> 标签：objective-c, ios, cocoa-touch, filesystems

我使用下面的代码来获取应用程序支持目录：

```
NSString * supportDir = [NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES) lastObject]; 
```

如果它在 iphone 或模拟器上执行，我会得到正确的路径（使用应用程序 guid）：
a）iphone：
`/var/mobile/Applications/APP_GUID/Library/Application Support/`
b）模拟器：
`/Users/realuser/Library/Application Support/iPhone Simulator/6.0/Applications/APP_GUID/Library/Application Support/`

其中：
- realuser - 我的用户名
- APP_GUID - 应用程序的 GUID

但是当它在 CI 服务器上执行时 - Hudson（自动构建，但使用 iOS 5.1 simualtor）我得到了

`/Users/realuser/Library/Application Support/`

所以路径中没有 guid 应用程序字符串。

在这两种情况下，函数数组：
`NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES)`
只包含一个对象，因此它是数组中的最后一个对象还是第一个对象没有区别。

我做了一些谷歌研究，但没有解决方案。Hudson env 变量中是否缺少某些想法？我该如何解决？

也许使用接口 URLsForDirectory:inDomains: 更好？
——
问候
亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:36:38.917

这与执行应用程序的方式有关。在 iPhone 和模拟器应用程序是沙盒的，所以路径包含应用程序的 GUID，在 CI 服务器应用程序没有沙盒，所以没有应用程序的 GUID。

# jquery - jQuery在固定网格中使用占位符拖放

> ID：12763886
> 
> 赞同：2
> 
> 时间：2012-10-06T21:07:34.300
> 
> 标签：jquery, drag-and-drop, grid, placeholder

我搜索了很多脚本，但没有找到我要找的东西。
我需要一个带有固定放置区域的拖放脚本，例如 5x5 字段。
在这个网格中，可拖动项（例如 10 项）应该是可移动的，但不能排序和浮动。这样一个占位符就留在了我从中取出可拖动项目的位置。

有没有办法实现这一点？

# r - 在 R 中排除空白和 NA

> ID：12763890
> 
> 赞同：20
> 
> 时间：2012-10-06T21:08:00.080
> 
> 标签：r, na

> **可能重复：**
> [R - 删除 data.frame 中带有 NA 的行](https://stackoverflow.com/questions/4862178/r-remove-rows-with-nas-in-data-frame)

我有一个名为 sub.new 的数据框，其中包含多个列。我试图排除任何包含`NA`或`blank space`“ `”的单元格。
我尝试使用`subset()`，但它针对特定列有条件。无论如何要扫描整个数据框并创建一个没有单元格的子集`NA`或`blank space`？`

 `在下面的示例中，只应保留第一行：

```
# ID               SNP             ILMN_Strand   Customer_Strand
ID1234              [A/G]          TOP           BOT
Non-Specific        NSB (Bgnd)     Green
Non-Polymorphic     NP (A)         Red
Non-Polymorphic     NP (T)         Purple
Non-Polymorphic     NP (C)         Green
Non-Polymorphic     NP (G)         Blue
Restoration         Restore        Green 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-06T21:29:36.087

一个好主意是在任何进一步分析之前将所有“”（空白单元格）设置为 NA。

如果您正在从文件中读取输入，则将所有 "" 转换为 NA 是一个不错的选择：

```
foo <- read.table(file="Your_file.txt", na.strings=c("", "NA"), sep="\t") # if your file is tab delimited 
```

如果您已经加载了表格，则可以执行以下操作：

```
foo[foo==""] <- NA 
```

然后只保留没有 NA 的行，您可以使用`na.omit()`：

```
foo <- na.omit(foo) 
```

或者保留没有 NA 的列：

```
foo <- foo[, colSums(is.na(foo)) == 0] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-06T21:18:47.647

不确切知道您拥有什么样的数据集，所以我提供一般性答案。

```
x <- c(1,2,NA,3,4,5)
y <- c(1,2,3,NA,6,8)
my.data <- data.frame(x, y)
> my.data
   x  y
1  1  1
2  2  2
3 NA  3
4  3 NA
5  4  6
6  5  8
# Exclude rows with NA values
my.data[complete.cases(my.data),]
  x y
1 1 1
2 2 2
5 4 6
6 5 8 
````

# ios - NSInternalInconsistencyException'，原因：'无法在包中加载 NIB - 但它在那里，有点

> ID：12763891
> 
> 赞同：0
> 
> 时间：2012-10-06T21:08:03.847
> 
> 标签：ios, xib, runtime-error

看起来，出乎意料的是，我现在收到了这条消息：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/CC7C18ED-8A1D-4548-86F1-B868B50D2535/YesTheApp.app> (loaded)' with name 'ECLNameAndattributeCell'' 
```

当我在 Build Phases 中查看 Copy Bundle Resources 时（如其他类似问题所建议的那样），我看到以下内容。我所有的其他 nib 文件都显示它们在我的应用程序中，但 ECLNameAndAttributeCell.xib 是唯一一个后面没有文本的文件。

![请注意，ECLNameAndAttributeCell 没有说 ...inYes ...](../Images/d1cee380d97871a71457f7658d37c92d.png)

它也没有列在我可以添加的文件列表中。

我还在 Finder 中查看了它的种类，它说它是一个 Interface Builder XIB 文档。如何在 Xcode 中检查文件类型？我阅读以右键单击 Xcode 中的文件。是控制点击吗？我没有看到任何通过在出现的菜单中单击控制来检查文件类型的选项。

顺便说一句，在我在模拟器上删除并重新安装应用程序后，该应用程序似乎在模拟器上运行良好。但它总是在 iPhone 上崩溃，即使在 iPhone 上删除并重新运行该应用程序之后也是如此。

有人可以解释发生了什么以及我应该做什么吗？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:26:29.010

您拼写错误，它是`ECLNameAndAttributeCell`，在 Attributed 上带有大写 A。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:26:33.440

是的，右键单击是控制单击。

您需要显示文件检查器，然后在项目导航器中选择文件，文件类型应该是检查器中的第二行。这也将允许您查看检查文件本地化和目标成员资格。如果目标成员资格不正确，则文件可能不会更新。

# java - java基本加密程序

> ID：12763894
> 
> 赞同：3
> 
> 时间：2012-10-06T21:08:08.613
> 
> 标签：java

我正在尝试制作一个基本的加密程序，该程序使用随机数来加密整个字母表，加密用户提交的短语，然后将其解密回原始短语，但我发现它很难。谁能帮忙指出我的错误！它不应该将两个字母编码为同一个字母，即a 和b 不应该都与c 匹配。

```
public class MainClass {
public static final int ALPHASIZE = 26;
public static final char[] Lalpha =
    { 'a','b','c','d','e','f','g','h','i','j','k','l',
    'm','n','o','p','q','r','s','t','u','v','w','x','y','z'
    };
public static final char[] Ualpha =
    {'A','B','C','D','E','F','G','H','I','J','K','L',
    'M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
    };
protected static char[] encryptU = new char[ALPHASIZE];
protected static int[] decrypt = new int[ALPHASIZE];
protected static char[] encryptL = new char[ALPHASIZE];

Random rgenerator = new Random();

public MainClass(){
    int randNum = rgenerator.nextInt(ALPHASIZE);

    for(int i=0; i<ALPHASIZE ; i++)
    {
        //makes sure that it won't assign a letter to itself or to one that has already been assigned

        do {
            randNum = rgenerator.nextInt(26);

         } while (randNum%26==0 &&Arrays.asList(encryptU).contains(Ualpha[randNum]));       

        encryptU[i] = Ualpha[randNum]; 
        encryptL[i] = Lalpha[randNum];
        decrypt[i] = randNum;

    }
}

public String encrypt(String secret)
{
    System.out.println(Arrays.toString(encryptU));
        int position = 0;
    char[] mess = secret.toCharArray();
    for(int i = 0 ; i<mess.length;i++)
    {
        if(Character.isUpperCase(mess[i]))
        {
    for(int j = 0; j < encryptU.length; j++) {
        if(mess[i]==Ualpha[j]) {
            position = j;
    }
    mess[i] = encryptU[position];

        }

        }

        if(Character.isLowerCase(mess[i]))
        {
    for(int j = 0; j < encryptU.length; j++) {
        if(mess[i]==Lalpha[j]) {
            position = j;
    }
    mess[i] = encryptL[position];

        }

        }

    }
    return new String(mess);
}

public String decrypt(String secret)
{
    char[] mess = secret.toCharArray();
    for(int i = 0 ; i<mess.length;i++)
    {
        if(Character.isUpperCase(mess[i]))
                {
                for(int j = 0; j<ALPHASIZE; j++){
                    if(mess[i]==encryptU[j]){
                        mess[i] = Ualpha[j];

                        }
                    }
                }           

        if(Character.isLowerCase(mess[i]))
        {                   
            for(int j = 0; j<ALPHASIZE; j++){
                if(mess[i]==encryptL[j]){
                    mess[i] = Lalpha[j];

                    }
                }
            }
    }

    return new String(mess);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:18:39.313

您应该真正考虑使用 a[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)来存储字符/编码对。哦，要创建这些随机对，您可以将角色添加到 a`List`并使用，[`Collections.shuffle`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)而不是自己重新发明轮子。

* * *

让我演示仅使用`Lalpha`（仅小写字母）。你想要一些类似的东西：

```
List<Character> l = new ArrayList<Character>(Lalpha.length); 

for (char c : Lalpha)
    l.add(c);

Collections.shuffle(l);

Map<Character, Character> encoding = new HashMap<Character, Character>(Lalpha.length);
Map<Character, Character> decoding = new HashMap<Character, Character>(Lalpha.length);

for (int i = 0 ; i < Lalpha.length ; i++) {
    encoding.put(Lalpha[i], l.get(i));
    decoding.put(l.get(i), Lalpha[i]);
} 
```

现在假设我们想要对字符串进行编码/解码`helloworld`，我们会这样做：

```
String s = "helloworld";    

// Encode:
String enc = "";
for (char c : s.toCharArray())
    enc += encoding.get(c);

System.out.println(enc);

// Decode:
String dec = "";
for (char c : enc.toCharArray())
    dec += decoding.get(c);

System.out.println(dec); 
```

输出（许多可能之一）：

> vjwwmtmcwz
> helloworld

当然，您可以使用相同的想法合并大写字母和what-not。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:12:43.960

听起来您需要生成允许字母的排列。这就是我对小写字母的处理方式：

```
public char[] permutation =
{ 'a','b','c','d','e','f','g','h','i','j','k','l',
'm','n','o','p','q','r','s','t','u','v','w','x','y','z'
};

public generatePermutation()
{
    Random r = new Random();
    char tmp;
    int rand;

    for(int i = 0; i < permutation.length; ++i)
    {
        rand = r.nextInt(permutation.length - i);
        tmp = permutation[i];
        permutation[i] = permutation[rand];
        permutation[rand] = tmp;
    }
} 
```

最后，您可以通过执行访问此数组进行加密`permutation[inputChar-'a']`（假设您已经确定 inputChar 是小写字母）。对于解密，您会找到与您的输入字符匹配的字母并将“a”添加到索引中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:18:16.490

如果您在创建字母集和“加密”集之间的随机映射时遇到问题，您可以从以下开始：

```
List<Character> alphabet = new LinkedList<Character>(
        new String[] {'a', 'b', ..., 'Y', 'Z'});

List<Character> shuffledAlphabet = new LinkedList<Character>(alphabet);
Collections.shuffle(shuffledAlphabet);

Map<Character, Character> encryptionMap = new HashMap<Character, Character>();
Map<Character, Character> decryptionMap = new HashMap<Character, Character>();
for (int i=0; i < alphabet.size(); i++) {
    encryptionMap.put(alphabet.get(i), shuffledAlphabet.get(i));
    decryptionMap.put(shuffledAlphabet.get(i), alphabet.get(i));
} 
```

现在，您通过获取键入的 String 的每个字符、在 encryptionMap 上执行 get 并替换为该 get 的结果来进行加密。要解密，对decryptionMap 执行相同的操作。

# c - 在 C 中使用 fts_children() 的意外结果

> ID：12763906
> 
> 赞同：4
> 
> 时间：2012-10-06T21:09:59.337
> 
> 标签：c, linux, filesystems, system-calls, traversal

对于这个 fts_children() 问题，我一直在敲我的头。在手册页[http://www.kernel.org/doc/man-pages/online/pages/man3/fts.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/fts.3.html)中，它清楚地说明`As a special case, if fts_read() has not yet been called for a hierarchy, fts_children() will return a pointer to the files in the logical directory specified to fts_open(), that is, the arguments specified to fts_open().` 了我认为其中所有文件的链接列表返回当前目录。好吧，我发现情况并非如此，我非常感谢在这件事上提供一些帮助。我希望返回一个链接列表，然后我会遍历它以找到具有匹配文件名的文件（最终目标）。但是，现在，我只是想遍历链表（小步骤）。现在，它将返回一个文件，然后退出循环。这对我来说没有意义。任何帮助将不胜感激！！！

文件系统的打开：

```
char* const path[PATH_MAX] = {directory_name(argv[argc-index]), NULL}; 
            char* name = file_name(argv[argc-index]);

            if ((file_system = fts_open(path, FTS_COMFOLLOW, NULL)) == NULL){
                fprintf(stderr,"%s:%s\n", strerror(errno), getprogname());
                        exit(EXIT_FAILURE);
                 }/*Ends the files system check if statement*/

            /*Displays the information about the specified file.*/
            file_ls(file_system,name, flags); 
```

为澄清起见，directory_name 解析用户输入的路径并返回类似 /home/tpar44 的内容。然后打开该目录。

在文件系统中搜索：

```
void
file_ls(FTS* file_system, char* file_name,  int* flags){
    FTSENT* parent = NULL;
    //dint stop = 0;

    parent = fts_children(file_system, 0);

    while( parent != NULL ){
        printf("parent = %s\n", parent->fts_name);
        parent = parent->fts_link;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:48:13.650

我认为这完全是设计使然。

> ...也就是说，指定给 fts_open() 的参数...

它说的是它会在`path_argv`参数中列出根元素以方便您。它将`path_argv`数组本身视为一个*逻辑目录*。

换句话说：

```
int main(int argc, char* const argv[])
{
    char* const path[] = { ".", "/home", "more/root/paths", NULL }; 

    FTS* file_system = fts_open(path, FTS_COMFOLLOW | FTS_NOCHDIR, &compare);

    if (file_system)
    {
        file_ls(file_system, "", 0);
        fts_close(file_system);
    }
    return 0;
} 
```

将输出

```
parent = .
parent = /home
parent = more/root/paths 
```

事实上，确实如此（参见[http://liveworkspace.org/code/c2d794117eae2d8af1166ccd620d29eb](http://liveworkspace.org/code/c2d794117eae2d8af1166ccd620d29eb)）。

这是一个更完整的示例，显示了完整的目录遍历：

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fts.h>
#include<string.h>
#include<errno.h>

int compare (const FTSENT**, const FTSENT**);

void file_ls(FTS* file_system, const char* file_name, int* flags)
{
    FTSENT* node = fts_children(file_system, 0);

    if (errno != 0)
        perror("fts_children");

    while (node != NULL)
    {
        // TODO use file_name and flags
        printf("found: %s%s\n", node->fts_path, node->fts_name);
        node = node->fts_link;
    }
}

int main(int argc, char* const argv[])
{
    FTS* file_system = NULL;
    FTSENT* node = NULL;

    if (argc<2)
    {
        printf("Usage: %s <path-spec>\n", argv[0]);
        exit(255);
    }

    char* const path[] = { argv[1], NULL }; 
    const char* name = "some_name";

    file_system = fts_open(path, FTS_COMFOLLOW | FTS_NOCHDIR, &compare);

    if (file_system)
    {
        file_ls(file_system, name, 0); // shows roots

        while( (node = fts_read(file_system)) != NULL)
            file_ls(file_system, name, 0); // shows child elements

        fts_close(file_system);
    }
    return 0;
}

int compare(const FTSENT** one, const FTSENT** two)
{
    return (strcmp((*one)->fts_name, (*two)->fts_name));
} 
```

# sapi - 在 TTS 支持软件中包含 TTS 语音

> ID：12763907
> 
> 赞同：0
> 
> 时间：2012-10-06T21:10:06.180
> 
> 标签：sapi, text-to-speech

假设我想为我的项目添加 TTS 支持，并且我讨厌 Microsoft Sam、Microsoft Mike 和 Microsoft Mary 的声音。
我是否可以将我购买的新 TTS 语音包含到我的软件中，以便 TTS 支持仅限于我包含的语音，而不是软件从运行它的计算机中挑选语音？

如果是这样，我应该为此使用什么引擎/ SDK？
我一直在谷歌上寻找答案，但我只能找到将 SAPI 与来自计算机的声音一起使用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:42:37.483

付费的 SAPI 语音通常授权给计算机所有者。您也许可以包含来自 Festival Engine 的免费 TTS 语音。

# windows-8 - 设置中的复杂对象。序列化问题

> ID：12763908
> 
> 赞同：1
> 
> 时间：2012-10-06T21:10:13.683
> 
> 标签：windows-8, microsoft-metro

默认设置序列化程序仅支持简单类型。我应该如何保存复杂的类。例如：

```
public class User
{
     public string Name {get;set;}
     public int Age {get;set;}
} 
```

现在我必须将复杂对象的每个字段保存为单独的设置以使其工作。请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:39:29.850

最简单的方法是序列化您的设置对象并将其存储为字符串。我会推荐 JSON.Net 来做这件事。

```
string json = Newtonsoft.Json.JsonConvert.SerializeObject(mySettings);
// do something with this string 
```

然后，您可以从 json 创建一个新对象

```
MySettingsObject mySettings = Newtonsoft.Json.JsonConvert.DeserializeObject<MySettingsObject>(json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:40:03.647

您还可以查看用于 WinRT 的通用对象存储帮助程序，可在[http://winrtstoragehelper.codeplex.com](http://winrtstoragehelper.codeplex.com)获得。

该库使用 XML 格式序列化您的对象。

# php - 不显示来自私有字段的值

> ID：12763912
> 
> 赞同：0
> 
> 时间：2012-10-06T21:10:48.573
> 
> 标签：php, forms, checkbox, private-members

我在表单中使用私有字段作为名称属性，而不是对值进行硬编码。但是，由于某种原因，这些值没有从私有字段中获取并放入名称属性中，我就是不知道为什么。

```
<?php

namespace View;

class UserView {

    private $checkBox = "check[]";
    private $submitRemove = "submitRemove";

    public function ShowUsers() {

        $userNameArray = array("foo", "bar", "hallo", "world");

        $userIdArray = array(1, 2, 3);

        $users = "";
        $nrOfUsers = count($userNameArray);

        // Name attribute of input fields created is left blank
        for ($i = 0; $i < $nrOfUsers; $i++) {
            $users .= "<label for='$userIdArray[$i]'>
                        $userNameArray[$i]
                        <input type='checkbox' name='$this->checkBox' value='$userIdArray[$i]' /><br/>
                        </label>";
        }

        $userList = "<div class='userList'>
                    <form id='form3' method='post' action=''>
                        <fieldset>
                            <p>Existing users</p>
                            $users
                            <input type='submit' id='$this->submitRemove' name='$this->submitRemove' Value='Ta bort' />    // name attribute is left blank
                        </fieldset>
                    </form>
                    </div>";

        return $userList;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:21:07.527

对于“复杂元素”，例如对象的数组或属性，您不能将它们称为双引号字符串中的变量。

你必须用大括号来逃避它们：

```
<?php echo "This is a complex attribute: {$this->checkBox}"; ?> 
```

或者您可以从引用的字符串中删除它们：

```
<?php echo "This is a complex attribute: " . $this->checkBox; ?> 
```

顺便说一句，由于性能问题，不推荐使用双引号字符串。使用简单的带引号的字符串更好，它可以避免 PHP “读取”字符串来验证是否有要显示的变量。

顺便说一句，为了使您的代码更具可读性，PHP 中的一个约定说私有属性必须以下划线开头。您应该将`$checkBox`and重命名`$submitRemove`为`$_checkBox`and `$_submitrRemove`。

BTW3，如果这两个变量不打算改变，你应该考虑将它们声明为静态变量。它将防止在每个实例化对象中拥有这些变量的多个副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:43:02.573

发布的代码没有任何问题。我认为您正在用`$submitRemove`另一种方法覆盖某处。

# javascript - 通过 html 和 javascript 在远程服务器上上传文件

> ID：12763913
> 
> 赞同：7
> 
> 时间：2012-10-06T21:11:02.250
> 
> 标签：javascript, html, file-upload

我正在尝试通过我们基于 unix 的服务器中的 html 页面上传文件，但我不知道如何在远程服务器上获取文件并在那里保存文件。

我写了以下代码，请帮我连接它。

```
<html>
<head>
<script type="text/javascript">

function Upload()
{

var filename = document.getElementById("filename").value;

var storepath = "HOSTURL/Foldername";

}
</script>
</head>
<body>
<form action="" method="post" enctype="multipart/form-data" >
    <input type="file" name="filename" />
    <input type="submit" value="Upload" onclick="Upload" />
</form
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:17:30.743

为什么使用 JavaScript？您可以简单地使用 html 表单将文件发布到服务器：

```
<html>
  <body>
    <form action="/foo/bar.ext" method="post" enctype="multipart/form-data">
        <input type="file" name="filename" />
        <input type="submit" value="Upload" />
    </form>
  </body>
</html> 
```

将表单更改为`action`您要将文件发布到的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:23:46.030

PHP 将是一个更好的选择。

```
<?php
if( isset( $_POST["Upload"] ) )
{
    $target_path = "uploads/";

    $target_path = $target_path . basename( $_FILES['filename']['name']); 

    if(move_uploaded_file($_FILES['filename']['tmp_name'], $target_path)) {
        echo "The file ".  basename( $_FILES['filename']['name']). " has been uploaded";
    } else{
        echo "There was an error uploading the file, please try again!";
    }
}
?>
<form method="post" enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']; ?>" >
    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
    <input type="file" name="filename" />
    <input type="submit" value="Upload" name="Upload" />
</form> 
```

# jquery - 如何遍历表并获取每个复选框值

> ID：12763915
> 
> 赞同：0
> 
> 时间：2012-10-06T21:11:27.217
> 
> 标签：jquery, loops

我有这张桌子：

```
<table ="myTable">
<tr>
<td id="username_57">lillie</td>
<td id="text_57"/>
<td>1969-12-31</td>
<td>24.xx.84.xx</td>
<td>
<button id="edit_text_57" name="id_57">Edit</button>
<input type="checkbox" id="delit_57"/>
</td>
</tr>
<tr>
<td id="username_39">test</td>
<td id="text_39">asdasdasdsdasdasd</td>
<td>2012-06-04</td>
<td>217.xx.237.6</td>
<td>
<button id="edit_text_39" name="id_39">Edit</button>
<input type="checkbox" id="delit_39"/>
</td>
</tr>
<tr>
<td id="username_45">admin</td>
<td id="text_45">sadasdasdad</td>
<td>2012-09-04</td>
<td>217.xx.237.6</td>
<td>
<button id="edit_text_45" name="id_45">Edit</button>
<input type="checkbox" id="delit_45"/>
</td>
</tr>
</table> 
```

我喜欢遍历所有带有 id delit_* 的复选框并检查其值是否被选中？我怎样才能以 jquery 风格做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T21:14:52.000

选择器实际上可以返回被检查的那些。不需要迭代。

```
$('input[type="checkbox"][id^="delit_"]:checked').each(function()
{
// Do something.
}); 
```

如果要选中和不选中，只需删除`:checked`选择器的部分，然后`if (this.checked) { }`在`.each`循环中进行比较。

jsFiddle：http: [//jsfiddle.net/jimp/rKjtr/](http://jsfiddle.net/jimp/rKjtr/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:16:29.917

```
$("input[type=checkbox][id^='delit']").each(function(){
   if  (this.checked)
   {
     // do your stuff here
   }
}) 
```

# pointers - gcc：/home/jamie/aws/btree_int.c|28|错误：在不是结构或联合的东西中请求成员“btree_start”|

> ID：12763919
> 
> 赞同：1
> 
> 时间：2012-10-06T21:12:03.400
> 
> 标签：pointers, gcc, struct, malloc

这段代码：

```
#include <stdlib.h>
#include <stdio.h>

int j_btree_create (int fn_initial_nodes);

typedef struct {
    int depth;
    int value;
    void *item;
    void *left_pointer;
    void *right_pointer;
} j_btree_node_int;

typedef struct {
    int nodes;
    int available_nodes;
    int btree_extension;
} j_btree_descriptor_int;

int j_btree_create (int fn_initial_nodes) {
    int *free_btree_node;
    int loop_counter;
    j_btree_descriptor_int *btree_start;

    btree_start = (j_btree_descriptor_int *) malloc (((sizeof(j_btree_node_int) + sizeof(free_btree_node)) * fn_initial_nodes) + sizeof(j_btree_descriptor_int));
    printf ("btree_start: " . btree_start);
    /* *btree_start.nodes = fn_initial_nodes;
    *btree_start.available_nodes = fn_initial_nodes;
    *btree_start.extension = NULL; */
    for (loop_counter = 0; loop_counter < fn_initial_nodes; loop_counter++) {
        printf ("loop_test:" . loop_counter);
    }
} 
```

产生此错误：

/home/jamie/aws/btree_int.c||在函数“j_btree_create”中：| /home/jamie/aws/btree_int.c|28|错误：在不是结构或联合的东西中请求成员“btree_start”| /home/jamie/aws/btree_int.c|33|错误：在不是结构或联合的东西中请求成员“loop_counter”| ||=== 构建完成：2 个错误，0 个警告 ===|

使用 CodeBlocks 编译时。我还没有设法找到我的问题的确切答案（我看过），有人知道我做错了什么吗？鉴于我对 C 相当陌生，可能不止一件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:16:47.427

```
printf ("btree_start: " . btree_start); 
```

这不是事情是如何完成的`c`。没有`.`连接运算符，也没有连接字符串（指向字符的指针）和指向结构的指针。如果你想打印出指针，它是

```
printf("btree_start: %p\n",btree_start); 
```

对于循环计数器，它是

```
printf("loop_test: %d",loop_counter); 
```

# vb.net - 将 R 与 VB.NET 集成

> ID：12763928
> 
> 赞同：-4
> 
> 时间：2012-10-06T21:13:42.723
> 
> 标签：vb.net, r, random, statistics

> **可能重复：**
> [如何通过 VBnet（或 C#）与 R 通信](https://stackoverflow.com/questions/10763516/how-to-communicate-with-r-through-vbnet-or-c)

我想从 VB.NET 中的对数正态分布和三角分布中生成一个随机数。

为此，我想到了将 R 与 VB.NET 集成。我添加了对 R 的以下引用，

```
STATCONNECTORCLNTLib;
StatConnectorCommonLib;
STATCONNECTORSRVLib; 
```

我的问题：

1.  要在 VB.NET 中使用 R，我还需要做些什么吗？
2.  如何在 VB.NET 中使用 R 命令？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:28:16.200

## 使用 .NET 中的 R

您可以在此处找到有关如何从 .NET 使用 R 的示例：

[http://www.codeproject.com/Articles/25819/The-R-Statistical-Language-and-C-NET-Foundations](http://www.codeproject.com/Articles/25819/The-R-Statistical-Language-and-C-NET-Foundations)

它是为 C# 编写的，但我认为它很容易转换为 VB.NET。

最重要的事情似乎是初始化，这是通过以下方式完成的：

```
Dim sc1 As New StatConnectorSRVLib.StatConnectorClass()
sc1.Init("R") 
```

在此之后，您可以使用该`sc1`对象来评估符号等。

## 替代方案：.NET 的随机数生成器库

但是，如果我可以提出建议。为什么不像这样为.NET 使用随机数库呢？

[http://www.codeproject.com/Articles/15102/NET-random-number-generators-and-distributions](http://www.codeproject.com/Articles/15102/NET-random-number-generators-and-distributions)

它包含对数正态分布和三角分布，因此它应该满足您的需要，并且您不需要安装 R。它也可能会更快，因为它是一个原生的 .NET 库。

# java - GridBagLayout Java GUI 基本定位

> ID：12763930
> 
> 赞同：2
> 
> 时间：2012-10-06T21:13:50.520
> 
> 标签：java, swing, user-interface, layout, gridbaglayout

我正在尝试创建一个使用 Java 与 mySQL 数据库交互的客户端-服务器应用程序。截至目前，我并不担心应用程序的任何功能。我目前只关心布局。几个小时以来，我一直在尝试构建 GUI 的外观，但结果好坏参半。我知道 GridBagLayout 是非常灵活且常用的 GUI，这是我一直在使用的。我什至尝试创建多个垂直框来表示列，并创建多个水平框来表示行，效果非常好，但最终未能给我所需的结果。

更具体地说，我的主要问题是，在下面的代码中，当我尝试将“输入 SQL 命令”列与左侧的文本字段框列对齐时，它不会像我需要的那样“浮动”到右侧相反，它会移动它下面的所有组件，从而弄乱定位。

如果有人能帮助指导我做错了什么，以及如何完成如下所示的 GUI，我将不胜感激。

到目前为止我的 Java 代码：

```
public class Methods extends JFrame{
    private final JTextField item1 = new JTextField(40); 
    private final JTextField item2 = new JTextField(40); 
    private final JTextField item3 = new JTextField(40); 
    private final JTextField item4 = new JTextField(40);
    private final JTextArea item5 = new JTextArea(6,30);
    private JLabel label = new JLabel("Enter Database Information"); 
    private JLabel label1 = new JLabel("JDBC Driver"); 
    private JLabel label2 = new JLabel("Database URL"); 
    private JLabel label3 = new JLabel("Username"); 
    private JLabel label4 = new JLabel("Password");
    private JLabel label5 = new JLabel("Enter a SQL Command"); 
    private JLabel label6 = new JLabel("No Connection Now");
    private JLabel label7 = new JLabel("SQL Execution Result");
    private final JButton button1 = new JButton("Connect"); 
    private final JButton button2 = new JButton("Execute SQL Command"); 
    private final JButton button3 = new JButton("Clear Command");
    private final JButton button4 = new JButton("Clear Results"); 
    private final JPanel jp;

    public Methods(){
        super("SQL Client GUI - MHZ");

        item1.setText("JDBC Driver");
        item2.setText("Datbase URL");
        item3.setText("Username");
        item4.setText("Password");

        //GUI Gridlayout Layout
        jp = new JPanel();
        jp.setLayout(new GridBagLayout()); 
        GridBagConstraints grid = new GridBagConstraints(); 
        grid.anchor = GridBagConstraints.BASELINE_TRAILING;

        grid.gridx=0;
        grid.gridy=0;

        //column1
        jp.add(label1, grid);
        grid.gridy++;
        jp.add(label2, grid);
        grid.gridy++;
        jp.add(label3, grid);
        grid.gridy++;
        jp.add(label4, grid);

        grid.gridy=0;
        grid.gridx++;

        //col2
        jp.add(item1, grid);
        grid.gridy++;
        jp.add(item2, grid);
        grid.gridy++;
        jp.add(item3, grid);
        grid.gridy++;
        jp.add(item4, grid);

        grid.gridy=0;
        grid.gridx++;

        //col3
        jp.add(label5, grid);
        grid.gridy++;
        jp.add(item5, grid);
        grid.gridy++;

        grid.gridx=0;
        grid.gridy=4;
        jp.add(button1,grid);
        grid.gridx++;
        jp.add(button2, grid);
        grid.gridx++;
        jp.add(button3, grid);
        grid.gridx++;
        jp.add(button4, grid);

        add(jp);
    }
} 
```

下图是它的外观。

[![](../Images/6a411e09cb3cb05e79fa44b1763d84ca.png)](https://i.stack.imgur.com/nWR0C.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:48:42.850

您必须在这里使用一些东西：使用`gridWidth`and `gridHeight`，例如：

```
 grid.gridx = 0;
     grid.gridy = 0;
     add (button1, grid);

     grid.gridx = 1;
     grid.gridy = 0;
     add (button2, grid);

     grid.gridwidth = 2;

     grid.gridx = 0;
     grid.gridy = 1;
     add (button3, grid); 
```

在这种情况下，第三个按钮将位于前两个按钮下方，并且适合两者的大小。在这种情况下，数字 2 表示它应该适合的按钮 请注意，如果稍后要添加另一个组件，则必须将宽度更改回 1。对于`gridHeight`.

如果您将在您的代码中使用它，您首先要使 textArea 与四个 textField 的高度相同。

另一件事是您没有添加第一个标签，因此它使 textFields 的 1 行太高。

# asp.net - 由于 asp.net 中对象的当前状态，操作无效

> ID：12763932
> 
> 赞同：0
> 
> 时间：2012-10-06T21:14:07.413
> 
> 标签：asp.net, c#-4.0, error-handling, runtime-error

> **可能重复：**
> [回发期间出现“由于对象的当前状态导致操作无效”错误](https://stackoverflow.com/questions/8832470/operation-is-not-valid-due-to-the-current-state-of-the-object-error-during-pos)

```
[InvalidOperationException: Operation is not valid due to the current state of the object.]
   System.Web.HttpValueCollection.ThrowIfMaxHttpCollectionKeysExceeded() +2420862
   System.Web.HttpValueCollection.FillFromEncodedBytes(Byte[] bytes, Encoding encoding) +58
   System.Web.HttpRequest.FillInFormCollection() +159

[HttpException (0x80004005): The URL-encoded form data is not valid.]
   System.Web.HttpRequest.FillInFormCollection() +217
   System.Web.HttpRequest.get_Form() +104
   System.Web.HttpRequest.get_HasForm() +9038959
   System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) +97
   System.Web.UI.Page.DeterminePostBackMode() +69
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +135 
```

一次又一次地得到这个错误

我的代码在后面！！**取消按钮位于 DATAGRID 内**

```
if (((System.Web.UI.WebControls.Button)e.CommandSource).CommandName == "Cancel")
    {
        string value = (e.Item.FindControl("txtStatDesc") as System.Web.UI.WebControls.Label).Text;

        if (value.Equals("Sent", StringComparison.CurrentCultureIgnoreCase))
        {
            Page.ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('You can not cancel the dta because it is in sent mode. Cancellation refused');", true);

        }

       else if (value.Equals("Prepared", StringComparison.CurrentCultureIgnoreCase))
            Page.ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('DEF');", true);

       else
            Page.ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('xyz');", true);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:22:06.670

我猜是您的数据网格造成了麻烦，因为只有当您的表单中有超过 1000 个数据元素时才会发生该错误。微软于 2011 年添加了该限制，以解决拒绝服务漏洞。

[可以在此处找到](http://support.microsoft.com/kb/2661403)有关限制以及如何在需要时提高限制的更多信息。

# google-app-engine - 为什么调用 put() 时 appengine 不自动将日期时间转换为 UTC

> ID：12763938
> 
> 赞同：7
> 
> 时间：2012-10-06T21:14:32.610
> 
> 标签：google-app-engine, app-engine-ndb

这是我正在尝试做的事情：用户提交太平洋时间，一旦提交，我使用 .replace 将时区设置为太平洋。

```
Pacific = time.USTimeZone(-8, "Pacific",  "PST", "PDT")
addEvent.date = addEvent.date.replace(tzinfo=Pacific) 
```

一旦我设置了 tzinfo，我正在做一个 put。根据 google appengine 的 python 文档，它说：

> “如果 datetime 值具有 tzinfo 属性，它将被转换为 UTC 时区进行存储。值从数据存储返回为 UTC，tzinfo 为 None。需要日期和时间值的应用程序在特定time zone 必须在更新 value 时正确设置 tzinfo，并在访问 value 时将 value 转换为 timezone。"

但是，当我执行 put() 时，出现以下错误：

> 警告 2012-10-06 21:10:14,579 tasklets.py:399] 初始生成器 _put_tasklet(context.py:264) 引发 NotImplementedError（DatetimeProperty 日期只能支持 UTC。请派生一个新属性以支持替代时区。）警告 2012 -10-06 21:10:14,579 tasklets.py:399] 暂停生成器 put(context.py:703) 引发 NotImplementedError（DatetimeProperty 日期只能支持 UTC。请派生一个新属性以支持替代时区。）

**请注意我正在使用 NDB**

好的，所以在这样做之后，我假设 NDB 可能不会自动将其转换为 UTC。因此，我尝试使用以下代码将其转换为 UTC：

```
class UTC(tzinfo):
  def utcoffset(self, dt):
    return timedelta(0)
  def tzname(self, dt):
    return str("UTC")
  def dst(self, dt):
    return timedelta(0) 
```

现在，即使将太平洋时间转换为 UTC 并将 tzinfo 名称设置为“UTC”，我仍然会遇到同样的错误。

真的可以在这里使用大量帮助...谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T00:25:33.367

`tzinfo`解决方案是从转换为 UTC 后的时间中完全删除。

```
timestamp = timestamp.replace(tzinfo=None) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T11:14:57.343

这是我的工作示例：

```
if my_date.utcoffset():
    my_date = (my_date - my_date.utcoffset()).replace(tzinfo=None) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T15:42:29.040

[我使用http://hnrss.org/](http://hnrss.org/)遇到了这个问题。这是我的解决方案。

```
 import datetime
    from dateutil import parser

    your_date_string = 'Mon, 24 Oct 2016 16:49:47 +0000'

    your_date = parser.parse(your_date_string)
    # your_date is now a datetime.datetime object

    your_date_minus_tz = your_date.replace(tzinfo=None) 
```

现在尝试您的 put()，您应该会在 Cloud 数据存储中看到 2016-10-24 16:49:47。

# android - 我为我的应用程序制作了背景，但现在它无法运行

> ID：12763943
> 
> 赞同：0
> 
> 时间：2012-10-06T21:16:00.347
> 
> 标签：android, xml, android-layout, background

我刚刚为我正在制作的这个应用程序设置了一个背景，但现在它不会运行。在我分配背景之前它正在工作。我想知道是否有人可以帮助我解决这个问题。也许我也应该有一些java代码？

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/backgroundhdpi" >

        <EditText
            android:id="@+id/bill"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="100dp"
            android:ems="10"
            android:inputType="phone"
            android:text="Enter Your Bill"
            android:textSize="18dip" />

        <Button
            android:id="@+id/calculateTip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/bill"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="40dp"
            android:layout_marginLeft="15dp"
            android:text="Calculate" />

        <TextView
            android:id="@+id/tipOwed"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/bill"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="123dp"
            android:scrollHorizontally="false"
            android:text="Time to Tip"
            android:textColor="#2c6f37"
            android:textSize="35dip"
            android:textStyle="bold" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:17:48.527

只要背景处于 res/drawable 中，它就不会导致任何崩溃问题。没有需要与以这种方式设置背景相关联的 Java。logcat中是否有错误？

（我会将此作为评论，但我没有足够的代表这样做）

# grep - 外壳删除制表符/空格

> ID：12763944
> 
> 赞同：10
> 
> 时间：2012-10-06T21:16:05.417
> 
> 标签：grep

我使用了一个带有 sed 和 cut 过滤器的 grep 命令，基本上把我的输出变成了类似于这个的东西

```
 this line 1

    this line 2

    another line 3

    another line 4 
```

我试图得到一个没有行之间和行前空格的输出，所以它看起来像

```
 this line 1
    this line 2
    another line 3
    another line 4 
```

我想添加另一个 | 筛选

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T21:20:20.950

添加此过滤器以从行首删除空格并删除空白行，注意它使用两个`sed`命令，一个用于删除前导空格，另一个用于删除没有内容的行

```
| sed -e 's/^\s*//' -e '/^$/d' 
```

[在sed 的 Wikipedia 文章中](http://en.wikipedia.org/wiki/Sed)有一个示例，它使用 d 命令删除空白行或仅包含空格的行，我的解决方案使用转义序列`\s`来匹配任何空白字符（空格、制表符等），这里是维基百科的例子：

```
sed -e '/^ *$/d' inputFileName 
```

*   插入符号 (^) 匹配行的开头。
*   美元符号 ($) 与行尾匹配。
*   星号 (*) 匹配前一个字符的零次或多次出现。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T21:21:47.753

这也可以通过`tr`命令来完成。像这样

`| tr -s [:space:]`

或者

`| tr -s \\n`

如果您只想删除换行符，而不是每行开头的空格字符。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-02T11:40:30.783

我会这样做，简短而简单：

```
sed 's: ::g' 
```

在你的命令末尾添加这个，所有的空格都会消失。例如试试这个命令：

```
cat /proc/meminfo | sed 's: ::g' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-07T00:49:50.737

您还可以使用 grep：

```
... | grep -o '[^$(printf '\t') ].*' 
```

在这里，我们打印至少有一个非空白字符的行。通过使用“-o”标志，我们只打印匹配，并且我们强制匹配从非空白字符开始。

编辑：更改命令，以便它可以删除前导空格字符。

希望这会有所帮助=)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-27T04:03:05.127

用于`grep "^." filename`在打印时删除空白行。此处，匹配以任何字符开头的行，以便忽略空白行。 `^`表示行的开始。 `.`检查任何字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T21:21:01.653

```
(whateverproducesthisoutput)|sed -E 's/^[[:space:]]+//'|grep -v '^$' 
```

（取决于您的`sed`，您可以替换`[[:space:]]`为`\s`）。

# jsf - mojarra jsf api / impl 2.1.12 打印出 css 注释

> ID：12763945
> 
> 赞同：1
> 
> 时间：2012-10-06T21:16:06.370
> 
> 标签：jsf, mojarra

我将实现从 2.1.3 切换到 2.1.12 mojarry。但现在我可以在任何 IE Explorer 中看到 CSS 开关注释：

```
 <!--[if lt IE 7]> <div style=' clear: both; text-align:center; padding:0 0 0 0px; position:         relative;'> <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode"><img  src="http://storage.ie6countdown.com/assets/100/../resources/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today. /></a> </div> <![endif]--> <!--[if lt IE 9]> <script type="text/javascript" src="js/html5.js"></script> <![endif]--> 
```

现在可见，而不是渲染它。意味着，在我的源代码中，字符用 lt 和 gt 进行转义。这来自 api 更改。有人有同样的经历吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:59:00.197

您可以使用`<h:outputText escape="false">`它以您想要的方式呈现它：

```
<h:outputText value="&lt;!--[if lt IE 7]&gt;&lt;div&gt;...&lt;/div&gt;&lt;![endif]--&gt;" escape="false" /> 
```

或者你可以使用[OmniFaces](http://omnifaces.org) [`<o:conditionalComment>`](http://showcase.omnifaces.org/components/conditionalComment)来让它不那么可怕：

```
<o:conditionalComment if="lt IE 7">
    <div>...</div>
</o:conditionalComment> 
```

# xcode - 在视图控制器中添加了一个表格视图。如何加载表格视图单元格

> ID：12763955
> 
> 赞同：0
> 
> 时间：2012-10-06T21:17:08.523
> 
> 标签：xcode, ios5.1

我有一个视图控制器

*   在`storyboard`，添加`tableview`到视图控制器。
*   为查看控制器的头文件创建了一个`IBOutlet`for 。`tableview`
*   视图控制器的头文件包含一个结果数组
*   将 @interface 更改为包含 delegates `UITableViewDelegate`，`UITableViewDataSource`
*   视图控制器实现文件具有强制性`tableview`协议

    *   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

    *   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

    *   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

视图控制器在视图控制器头文件中`storyboard`有搜索按钮。`IBAction`点击搜索按钮，即可获得结果。如何加载数组并`tableview`在搜索方法中重新显示结果。在将结果加载到数组中后，我尝试`[self viewdidload];`了，希望单元格会被加载。但没有。我想调用 `[self.detailView cellForRowAtIndexPath:?indexpath]`，但不知道索引路径的值是什么。感谢大师的帮助以加载`UItableviewcell`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:24:33.197

您应该使用`reloadData`or`reloadSections`方法`tableView`从数据源重新加载您的 tableView。

```
// you fill your array with results here...
// and then call
[tableView reloadData]; 
```

这将调用`cellForRowAtIndexPath:`每个单元格的方法来更新其数据。

[这](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)是参考。

# playframework - Playframework Setter 封装

> ID：12763959
> 
> 赞同：0
> 
> 时间：2012-10-06T21:17:40.587
> 
> 标签：playframework, playframework-2.0

我正在为 web 应用程序使用 Play 2.0。了解Play的属性模拟：http://www.playframework.org/documentation/1.2.3/model#properties

当我在示例应用程序上尝试相同的操作时，setter 的验证没有被调用。

我在调试模式下重新运行应用程序并将断点放在 Product 类的 Setter 方法上，但它没有被执行。

这是代码片段：

```
public class Product {

public String name;
public Integer price;

  public void setPrice(Integer price) {
     if (price < 0) {
         throw new IllegalArgumentException("Price can’t be negative!");
     }
     this.price = price;
   }
}    

public class Application extends Controller {

  public static Result index() {
   Product p=new Product();
   p.name="Test";
   p.price=-1; //I am expecting that code will throw IllegalArgumentException but its not

      return ok(index.render(p.name));
  }

} 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:17:47.417

播放 2 的行为与播放 1 不同。

它不会重写那些表达式：

```
anInstance.field = newValue; 
```

所以你必须直接调用 setter 来验证参数。

来源：[https ://groups.google.com/forum/#!topic/play-framework/S8DHAcYHh-A](https://groups.google.com/forum/#!topic/play-framework/S8DHAcYHh-A)

# javascript - 确保加载了 requireJS 条件模块

> ID：12763967
> 
> 赞同：2
> 
> 时间：2012-10-06T21:18:51.827
> 
> 标签：javascript, requirejs

我正在尝试在现有项目中使用 requireJS。我有一个 App 模块，其中包含有关当前语言环境、url 的信息……如果当前语言环境很特殊，我想加载另一个模块：

```
// App.js
define([], function() {
    return {
        setEnv: function(obj) { //obj: {locale:'en'}
            this.env = obj;
            that = this;
            if( this.env.locale == 'fa' )
                require(['locale/fa'], function(fa) {
                    that.number = fa.number
                };
            else
                this.number = function( n ) { return n+'' }
        }
    }
}); 
```

语言环境文件如下：

```
// locale/fa.js
define([], function() {
    var enToFaDigit(n) { // a function converts a number to persian representation };
    // more stuff
    return {
        number: enToFaDigit
    };
}); 
```

现在的问题是我不知道 App 模块何时加载`number`方法。如果我确定`locale/fa`模块*应该*在某个时候加载，我可以使用`require(['locale/fa']`或使用 shim 来包装它。目前我正在使用旧的阻塞方式来加载适当的`locale/*.js`和 PHP 来选择正确的文件，没有问题。但我想知道 requireJS 程序员如何编写类似的代码。可能有比这段代码更好的方法：

```
require(['app'], function(App) {
    if(App.env.locale == 'fa') {
        require(['locale/fa'], function(fa) {
            // 8-S
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:24:28.730

This sounds like a case for the [i18n plugin](http://requirejs.org/docs/api.html#i18n)! I believe you are allowed to define functions as well as strings. I would define a bundle like so:

```
//nls/formatters.js
define({
    root: {
        currency: function(num) {
            // implementation for default currency format (en-US often)
        }
    },
    "fa": true
}) 
```

And here's your Persian override:

```
//nls/fa/formatters.js
define({
    currency: function(num) {
        // implementation for farsi currency format
    }
}) 
```

In your app.js file:

```
require(['app','i18n!nls/formatters'], function(App, Formatters) {
    Formatters.currency(5.00); // works!
}); 
```

# typescript - 带有可选参数的 TypeScript lambda 函数

> ID：12763971
> 
> 赞同：4
> 
> 时间：2012-10-06T21:19:47.107
> 
> 标签：typescript

定义接受可选参数的 lambda 函数时遇到问题。奇怪的是，如果我使用完整的“函数”语法，匿名函数可以工作，但 lambda 速记/箭头语法会产生如下错误：

*   当前范围内不存在名称“a”
*   提供的参数与调用目标的任何签名都不匹配
*   预期的 '）'

例子：

```
(function (a, b?) => { console.log(a, b); })("a"); // OK
((a, b?) => { console.log(a, b); })("a", "b");     // Errors
((a, b) => { console.log(a, b); })("a", "b");      // OK 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T21:26:40.600

这是编译器中的一个错误，现在正在修复 [v0.8]。Lambda 目前提供带有可选参数和剩余参数的错误消息。如果这是一个阻塞问题，请使用长函数语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T21:25:07.510

目前在胖箭头 lambda 表达式中存在可选参数注释的错误。

# php - 试图在 html 页面中实现 jquery/ajax

> ID：12763973
> 
> 赞同：0
> 
> 时间：2012-10-06T21:19:53.120
> 
> 标签：php, jquery, html, mysql, ajax

```
 echo "<form method='post' action='regprocess.php' id='registerform'>";
        echo '<fieldset class="register">';
        echo"<h2>Register</h2>";
            echo "<ul>";
                    echo '<li><label for="FirstName">First Name: </label> <input type="text" name="FirstName" id="FirstName"></li>';
                    echo '<li><label for="LastName">Last Name: </label> <input type="text" name="LastName" id="LastName"></li>';
                    echo '<li><label for="Email">Email: </label><input type="email" name="Email" id="Email"></li>';
                    echo '<li><label for="Username">Username: </label><input type="text" name="Username" id="Username"></li>';
                    echo '<li><input type="button" id="check_username_availability" value="Check Availability"></li>';  
                    echo '<div id="username_availability_result"></div>'; 
                    echo '<li><label for="Password">Password: </label><input type="password" name="Password" id="Password"></li>';
                    echo '<li><input type="submit" value="Register"></li>';
                    echo "</ul>";
        echo "</fieldset>";
        echo "</form>";
        }
        $username = mysql_real_escape_string($_POST['Username']);  

//mysql query to select field username if it's equal to the username that we check '  
$usernameresult = 'Select Username from User where Username = "'. $username .'"'; 
$uresult = $conn->query($usernameresult); 

//if number of rows fields is bigger them 0 that means it's NOT available '  
if($uresult->num_rows==1) {  
    //and we send 0 to the ajax request  
    echo 0;  
}else{  
    //else if it's not bigger then 0, then it's available '  
    //and we send 1 to the ajax request  
    echo 1;  
}  
?>
<script src="jquery-1.8.1.min.js" type="text/javascript"></script>
<SCRIPT LANGUAGE="JAVASCRIPT" TYPE="TEXT/JAVASCRIPT">
$(document).ready(function() {  

        var checking_html = 'Checking...';  

        //when button is clicked  
        $('#check_username_availability').click(function(){  
            //run the character number check  
            if($('#username').val().length < min_chars){   
                $('#username_availability_result').html(checking_html);  
                check_availability();  
            }  
        });  

  });  

//function to check username availability  
function check_availability(){  

        //get the username  
        var username = $('#username').val();  

        //use ajax to run the check  
        $.post("check_username.php", { username: username },  
            function(result){  
                //if the result is 1  
                if(result == 1){  
                    //show that the username is available  
                    $('#username_availability_result').html(username + ' is Available');  
                }else{  
                    //show that the username is NOT available  
                    $('#username_availability_result').html(username + ' is not Available');  
                }  
        });  

}
</script> 
```

大家好，所以我正在尝试制作一个表单来验证我的数据库中是否有可用的用户名。我以前有点用过 javascript，但我对 Ajax 和 JQuery 做的不多。我在控制台中不断收到这条错误消息，上面写着 ReferenceError: Can't find variable: $ which responds to this line of script $(document).ready(function() {
我不太清楚为什么，我只是想知道是否有人可以给我一些关于如何解决它的见解？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:31:44.160

代码似乎没问题。唯一的问题我认为您对 jquery 库的引用不正确。查看源代码并单击包含行的 jquery 库以测试路径是否正常。将这些 php 文件保存`jquery-1.8.1.min.js`在同一文件夹中，或使用任何 CDN 库，如

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

希望能帮助到你 ！！

# javascript - 使用 Jquery 检查大写/小写/数字

> ID：12763974
> 
> 赞同：6
> 
> 时间：2012-10-06T21:19:59.777
> 
> 标签：javascript, jquery, html, css

要么我在这里真的很弱智，要么只是缺乏睡眠，但为什么这不起作用？如果我使用“或”运算符，它适用于每个单独的测试，但一旦将其更改为“和”运算符，它就会停止工作。

我正在尝试测试表单的密码输入，以查看其是否包含小写、大写和至少 1 个符号。我在这方面遇到了很多麻烦，所以帮助会很可爱，这是我的代码。

```
var upperCase= new RegExp('[^A-Z]');
var lowerCase= new RegExp('[^a-z]');
var numbers = new RegExp('[^0-9]');

if(!$(this).val().match(upperCase) && !$(this).val().match(lowerCase) && !$(this).val().match(numbers))    
{
    $("#passwordErrorMsg").html("Your password must be between 6 and 20 characters. It must contain a mixture of upper and lower case letters, and at least one number or symbol.");
}
else
{
    $("#passwordErrorMsg").html("OK")
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T21:28:50.397

您所有的正则表达式都在搜索*除*您提供的范围之外的任何内容。因此，[^AZ] 查找除 AZ 之外的任何内容。

你也在否定每一场比赛。

您可以尝试通过删除 ^ 来修改正则表达式定义，然后反转您的逻辑。所以，

```
var upperCase= new RegExp('[A-Z]');
var lowerCase= new RegExp('[a-z]');
var numbers = new RegExp('[0-9]');

if($(this).val().match(upperCase) && $(this).val().match(lowerCase) &&   $(this).val().match(numbers))  
{
    $("#passwordErrorMsg").html("OK")

}
else
{
    $("#passwordErrorMsg").html("Your password must be between 6 and 20 characters.     It must contain a mixture of upper and lower case letters, and at least one number or symbol.");
} 
```

这甚至可能更直观地阅读？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:17:32.717

```
var upperCase= new RegExp('[A-Z]');
var lowerCase= new RegExp('[a-z]');
var numbers = new RegExp('[0-9]');

if($(this).val().match(upperCase) && $(this).val().match(lowerCase) &&   $(this).val().match(numbers) && $(this).val().lenght>=6 && $(this).val()<=20)  
{
    $("#passwordErrorMsg").html("OK")

}
else
{
    $("#passwordErrorMsg").html("Your password must be between 6 and 20 characters.     It must contain a mixture of upper and lower case letters, and at least one number or symbol.");
} 
```

# c# - 在 LINQ to Entities 中使用未建模的对象集合

> ID：12763976
> 
> 赞同：2
> 
> 时间：2012-10-06T21:20:45.287
> 
> 标签：c#, .net, entity-framework, linq-to-entities

我正在使用 Linq to Entities 和 Entity Framework 编写查询。我的应用程序使用两个数据库。由于客户需求，跨数据库不是一个选项。

假设`MyEntity`驻留在第一个数据库中（所以它在一个 EF 模型上）并且它引用了第二个数据库中的一个实体`SecondDBEntity`（所以它在另一个 EF 模型上），它有一个复合键。现在，假设我想检索所有`MyEntity`引用一组`SecondDBEntity`（在我们的示例中，具有键 [1, 1]、[1, 2] 和 [1, 3] 的实体）的所有引用。

我要生成的 SQL 是这样的：

```
SELECT *
  FROM MyEntity
 WHERE (MyEntity.ForeignKeyOne = 1 AND MyEntity.ForeignKeyTwo = 1)
    OR (MyEntity.ForeignKeyOne = 1 AND MyEntity.ForeignKeyTwo = 2)
    OR (MyEntity.ForeignKeyOne = 1 AND MyEntity.ForeignKeyTwo = 3) 
```

然后我尝试了以下代码：

```
var setOfEntitiesToSearch = LetsAssumeThisIsAnIEnumerableOfSecondDBEntity;
return (from myEntity in DataContext.MyEntityList
       where setOfEntitiesToSearch.Any(entityToSearch => entityToSearch.KeyOne == myEntity.ForeignKeyOne && entityToSearch.KeyTwo == myEntity.ForeignKeyTwo)
      select myEntity).ToList(); 
```

这段代码编译得很好，但是当我执行时，它给了我错误：

```
"Unable to create a constant value of type 'SecondDBEntity'. Only primitive types or enumeration types are supported in this context." 
```

我的主要问题是因为实体位于不同的数据库中。我可能在做一些愚蠢的事情，因为这是我正在尝试构建的一个非常常见的查询。所以，我相信我缺少 EF 中的一些功能，这将允许我创建这个查询。也许是一些 CompositeKey 结构？或者以某种方式混合这些 EF 模型？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:19:03.963

首先创建两个列表

```
var listKeyOne = setOfEntitiesToSearch.Select(e => e.KeyOne);
var listKeyTwo = setOfEntitiesToSearch.Select(e => e.KeyTwo); 
```

然后使用这些列表，例如

```
return (from myEntity in DataContext.MyEntityList
       where listKeyOne.Any(keyOne => myEntity.ForeignKeyOne == keyOne) &&
             listKeyTwo.Any(keyTwo => myEntity.ForeignKeyTwo == keyTwo)
      select myEntity).ToList(); 
```

这使问题变得更加微不足道。请让我知道它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:27:58.090

Linq 无法将 setOfEntitiesToSearch 转换为 sql 查询。它只能使用原始类型。请注意，IEnumerable 与枚举不同。Linq 可以使用枚举，因为它可以转换为整数类型的值，但它不能将 IEnumerable 转换为原始类型。

据我所知，您可以采用两种不同的方式。（注意，我在没有编译的情况下输入了这段代码，所以它可能需要调试。）

1）循环通过 setOfEntitiesToSearch 并建立一个这样的列表：

```
List<MyEntity> results = new List<MyEntity>();
foreach (item in setOfEntitiesToSearch) {
    results.AddRange(
        from myEntity in DataContext.MyEntityList           
        where myEntity.ForeignKeyOne == item.KeyOne && myEntity.ForeignKeyTwo == item.KeyTwo
        select myEntity).ToList()
    );
}
return results; 
```

2) 将所有 DataContext.MyEntityList 放入内存列表并查询。

```
var entityList = DataContext.MyEntityList.ToList()
return entityList.Where(myEntity => setOfEntitiesToSearch.Any(entityToSearch => entityToSearch.KeyOne == myEntity.ForeignKeyOne && entityToSearch.KeyTwo == myEntity.ForeignKeyTwo)).ToList() 
```

缺点 #1 - 在循环中调用数据库。

缺点 #2 - entityList 可能非常大，具体取决于 DataContext.MyEntityList 返回的项目数。

# java - 循环我的列表，以便贯穿并组合整个列表

> ID：12763977
> 
> 赞同：2
> 
> 时间：2012-10-06T21:20:46.940
> 
> 标签：java, list, loops, while-loop

我正在上编程的初级课程，并尝试将 2 个列表组合成一个列表，并将新列表按数字顺序排列。我遇到问题的部分是，允许代码循环，重复这些步骤，以便它运行整个原始循环以完成最终列表，该列表是原始列表中所有数字的组合。任何有关循环的指导将不胜感激。谢谢你。

```
import inClass.list.EmptyListException;
import inClass.list.List;

public class InitialLists {

    public static void main(String[] args) {

    List<Integer> intObject1 = new List<Integer>();{

        intObject1.insertAtFront(25);

        intObject1.insertAtFront(19);

        intObject1.insertAtFront(3);

        intObject1.print();}

    List<Integer> intObject2 = new List<Integer>();{

        intObject2.insertAtFront(120);

        intObject2.insertAtFront(1);

        intObject2.print();}

    List<Integer> combinedList = new List<Integer>();

    int object1 = intObject1.removeFromBack();
    int object2 = intObject2.removeFromBack();

        while(intObject1.removeFromBack() != null && intObject2.removeFromBack() != null){

    try {

        {
            if (intObject1.removeFromBack() > intObject2.removeFromBack()) {
                combinedList.insertAtFront(object2);
                intObject1.insertAtBack(object1);
            }           
            else if (intObject2.removeFromBack() < intObject1.removeFromBack()) {
                combinedList.insertAtFront(object1);
                intObject2.insertAtBack(object2);
            }   
            else if (intObject1.removeFromBack() == intObject2.removeFromBack()) {
                combinedList.insertAtFront(object1);
            }
        }   
            combinedList.print();

            object1 = intObject1.removeFromBack();
            object2 = intObject2.removeFromBack();

        } // end try

        catch (EmptyListException emptyListException) {
            emptyListException.printStackTrace();
        } // end catch
        } //end while
    } // end main

}// end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:45:08.523

关于什么：

```
List<Integer> combinedList = new ArrayList<Integer>();
combinedList.addAll(intObject1);
combinedList.addAll(intObject2);
Collections.sort(combinedList); 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:04:09.700

我猜你的问题是因为两个列表的大小可能不均匀。尝试将`while`条件如下：

```
Integer object1 = intObject1.removeFromBack();
Integer object2 = intObject2.removeFromBack();
while(object1 != null || object2!= null){
   if(object1 ==null){
       //safe to assume object2 is not null as both not null together (that is the termination condition)
       combinedList.insertAtFront(object2);
   }else if(object2 ==null){
       //safe to assume object1 is not null as both not null together (that is the termination condition)
       combinedList.insertAtFront(object1);
   }else{
       //put you normal condition of handling object1 and object2 being not null
        if (object1.intValue() > object2.removeFromBack()) {
            combinedList.insertAtFront(object2);
            intObject1.insertAtBack(object1);
        }           
        else if (object2.intValue() < object1.intValue()) {
            combinedList.insertAtFront(object1);
            intObject2.insertAtBack(object2);
        }   
        else if (object1.intValue() == object2.intValue()) {
            combinedList.insertAtFront(object1);
        }
   }
   object1 = null;
   object2 = null;
   try{
        object1 = intObject1.removeFromBack();
   }catch (EmptyListException emptyListException) {
       //do nothing
    } // end catch
   try{
        object2 = intObject2.removeFromBack();
   }catch (EmptyListException emptyListException) {
       //do nothing
    } // end catch
} 
```

另请注意：有更好的方法来`merge`处理两个排序列表元素。**鉴于您鲜为人知的自定义`List`类，建议使用此方法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:53:44.413

要合并两个文件/列表/流，您需要一个看起来有点像这样的循环

```
WHILE NOT FINISHED
    GET SMALLEST VALUE FROM INPUTS
    APPEND SMALLEST VALUE TO OUTPUT 
```

那么你怎么知道你已经完成了？

您将如何获得每个列表中下一项中最小的一项？

我上面写的代码叫做伪代码；它是描述算法步骤的一种方式。继续扩展每个步骤，直到您拥有可以用您选择的语言（在本例中为 Java）实现的伪代码。

希望有帮助...

# scheme - 就 SICP 的评估环境模型而言，词法与动态范围

> ID：12763979
> 
> 赞同：11
> 
> 时间：2012-10-06T21:21:01.663
> 
> 标签：scheme, sicp, lexical-scope, dynamic-scope

在SICP 的[第 3.2.2 节中，执行以下代码](http://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-21.html#%_sec_3.2.2)

```
(define (square x)
  (* x x))
(define (sum-of-squares x y)
  (+ (square x) (square y)))
(define (f a)
  (sum-of-squares (+ a 1) (* a 2)))

(f 5) 
```

[用这张图](http://mitpress.mit.edu/sites/default/files/sicp/full-text/book/ch3-Z-G-6.gif)来解释。

每次应用函数时，都会创建一个新框架（由`E1`through标记`E4`），它表示符号和值之间的一组绑定。当符号未绑定在框架中时，将查询该框架的封闭环境以获取该特定符号的绑定。

该图的有趣之处在于，所有标记为 的帧`E`都包含在全局环境中。文中解释说这是因为函数是在全局环境中定义的，但没有详细说明这个问题：

> 请注意，由 所创建的每个帧都`square`指向全局环境，因为这是`square`过程对象所指示的环境。

相反，如果框架包含在调用函数的环境中，比如`E3`包含在`E2`其中，又包含在 中`E1`，那么这是否是动态范围语言如何工作的有效模型？此外，图中的框架是否具有相同的“父”环境，因为 Scheme 是词法范围的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T11:08:20.817

这两个问题的答案都是**肯定**的。SICP 的那一章是在解释词法范围而没有实际使用该术语。按照您的描述更改评估机制将创建一个动态范围的模型。

# java - NullPointerException 通过 Java 三元运算符的自动装箱行为

> ID：12763983
> 
> 赞同：15
> 
> 时间：2012-10-06T21:21:44.587
> 
> 标签：java, nullpointerexception, autoboxing, ternary

`NullPointerException`前几天，由于三元运算符中的意外类型转换，我遇到了一个非常奇怪的问题。鉴于此（无用的示例）功能：

```
Integer getNumber() {
    return null;
} 
```

我期望以下两个代码段在编译后完全相同：

```
Integer number;
if (condition) {
    number = getNumber();
} else {
    number = 0;
} 
```

对比

```
Integer number = (condition) ? getNumber() : 0; 
```

.

事实证明， if `condition`is `true`，`if`- 语句工作正常，而第二个代码段中的三元运算抛出`NullPointerException`. 似乎三元运算已决定在`int`将结果自动装箱回`Integer`!?! 事实上，如果我明确地将`0`to强制转换`Integer`，异常就会消失。换句话说：

```
Integer number = (condition) ? getNumber() : 0; 
```

不一样：

```
Integer number = (condition) ? getNumber() : (Integer) 0; 
```

.

因此，三元运算符和等效语句之间似乎存在字节码差异`if-else`（这是我没想到的）。这提出了三个问题：为什么会有差异？这是三元实现中的错误还是类型转换的原因？鉴于存在差异，三元运算的性能是否比等效的语句更高或更低`if`（我知道，差异不会很大，但仍然如此）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T21:31:50.850

根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)：-

> 条件表达式的类型确定如下：
> 
> *   如果第二个和第三个操作数的类型相同（可能是 null 类型），那么这就是条件表达式的类型。
> *   如果第二个和第三个操作数之一是原始类型 T，而另一个的类型是对
>     T 应用装箱转换（第 5.1.7 节）的结果，则条件表达式的类型是 T。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-06T21:24:27.213

问题是：

```
Integer number = (condition) ? getNumber() : 0; 
```

强制对 getNumber() 的结果进行拆箱和重新装箱。这是因为三进制 (0) 的 false 部分是整数，因此它会尝试将 getNumber() 的结果转换为 int。而以下没有：

```
Integer number = (condition) ? getNumber() : (Integer) 0; 
```

这不是错误，只是 Java 选择做事的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T21:24:36.200

这就是它应该如何工作的方式。三元运算符*并不*等同于常规`if`语句。`if`和的主体`else`是*语句*，而和之后的部分`?`是`:`表达式*，*它们需要评估为相同的类型。

换句话说：`a = b ? c : d`不应该等同于`if (b) a = c; else a = d;`. 相反，`b ? c : d`它本身就是一个表达式，其结果的分配`a`不会影响结果。

# jquery - 如何从 jQuery ajax 调用中获取响应时间？

> ID：12763987
> 
> 赞同：21
> 
> 时间：2012-10-06T21:21:58.407
> 
> 标签：jquery, ajax, time, request, response

所以我正在研究可以显示对页面的请求很长的工具。

我通过使用 jQuery Ajax (http://api.jquery.com/jQuery.ajax/) 来做到这一点，我想找出获得响应时间的最佳方法。

我找到了一个线程（http://forum.jquery.com/topic/jquery-get-time-of-ajax-post），它描述了在 JavaScript 中使用“日期”，但是这种方法真的可靠吗？

我的代码示例如下

```
$.ajax({
    type: "POST",
    url: "some.php",
}).done(function () {
    // Here I want to get the how long it took to load some.php and use it further
}); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-06T21:26:44.537

最简单的方法是`var ajaxTime= new Date().getTime();`在 Ajax 调用之前添加并在`done`获取当前时间以计算 Ajax 调用花费了多长时间。

```
var ajaxTime= new Date().getTime();
$.ajax({
    type: "POST",
    url: "some.php",
}).done(function () {
    var totalTime = new Date().getTime()-ajaxTime;
    // Here I want to get the how long it took to load some.php and use it further
}); 
```

或者如果您想知道这在服务器端需要多长时间。执行相同的操作并在 some.php 的返回值中打印时间。

# graph - CUDA 中的 Dijkstra 算法

> ID：12763991
> 
> 赞同：3
> 
> 时间：2012-10-06T21:22:26.503
> 
> 标签：graph, parallel-processing, cuda, dijkstra

我在编写这段 CUDA 代码时遇到了麻烦。这应该是[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)的 CUDA 实现。代码如下：

```
 __global__ void cuda_dijkstra_kernel_1(float* Va, int* Ea, int* Sa, float* Ca, float* Ua, char* Ma, unsigned int* lock){

        int tid = blockIdx.x;
        if(Ma[tid]=='1'){
            Ma[tid] = '0';
            int ind_Ea = Sa[tid * 2];
            int num_edges = Sa[(tid * 2) + 1];
            int v;
            float wt = 0;
            unsigned int leaveloop;
            leaveloop = 0u;
            while(leaveloop==0u){
                if(atomicExch(lock, 1u) == 0u){
                    for(v = 0; v < num_edges; v++){
                        wt = (Va[tid * 3] - Va[Ea[ind_Ea + v] * 3]) * (Va[tid * 3] - Va[Ea[ind_Ea + v] * 3]) +
                                (Va[(tid * 3) + 1] - Va[(Ea[ind_Ea + v] * 3) + 1]) * (Va[(tid * 3) + 1] - Va[(Ea[ind_Ea + v] * 3) + 1]) + 
                                (Va[(tid * 3) + 2] - Va[(Ea[ind_Ea + v] * 3) + 2]) * (Va[(tid * 3) + 2] - Va[(Ea[ind_Ea + v] * 3) + 2]) ;
                        wt = sqrt(wt);

                        if(Ca[Ea[ind_Ea + v]] > (Ca[tid] + wt)){
                            Ca[Ea[ind_Ea + v]] = Ca[tid]  + wt;
                            Ma[Ea[ind_Ea + v]] = '1';
                        }
                        __threadfence();
                        leaveloop = 1u;
                        atomicExch(lock, 0u);
                    }
                }
            }
        }
    } 
```

问题在于Dijkstra 算法的*松弛阶段。*我已经实现了这样一个阶段作为*关键部分*。如果有一个顶点（比方说`a`）是多个顶点的邻居（即，通过边连接到其他顶点），那么这些顶点的所有线程将尝试写入`a`成本数组中顶点的位置`Ca`. 现在我的目标是在该位置写入较小的值。为此，我正在尝试序列化进程并同时应用`__threadfence()`，以便一个线程写入的值对其他人可见，然后最终将较小的值保留在 vertex 的位置`a`。但问题是，这种逻辑是行不通的。顶点位置`a`没有得到试图写入该位置的所有线程的最小值，我不明白为什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-31T12:20:48.970

论文中包含在 GPU 上 Dijkstra 的单源最短路径 (SSSP) 算法的“经典”（至少，大部分被引用）实现

> *Parwan Harish 和 PJ Narayanan*使用 CUDA 在 GPU 上加速大型图算法**

 *但是，该论文中的实现已被确认存在错误，请参阅

> *Pedro J. Martín、Roberto Torres 和 Antonio Gavilanes*的 SSSP 问题的 CUDA 解决方案**

 *我报告的是根据第二篇的评论修复的第一篇论文中建议的实现。该代码还包含 C++ 版本。

```
#include <sstream>
#include <vector>
#include <iostream>
#include <stdio.h>
#include <float.h>

#include "Utilities.cuh"

#define NUM_ASYNCHRONOUS_ITERATIONS 20  // Number of async loop iterations before attempting to read results back

#define BLOCK_SIZE 16

/***********************/
/* GRAPHDATA STRUCTURE */
/***********************/
// --- The graph data structure is an adjacency list.
typedef struct {

    // --- Contains the integer offset to point to the edge list for each vertex
    int *vertexArray;

    // --- Overall number of vertices
    int numVertices;

    // --- Contains the "destination" vertices each edge is attached to
    int *edgeArray;

    // --- Overall number of edges
    int numEdges;

    // --- Contains the weight of each edge
    float *weightArray;

} GraphData;

/**********************************/
/* GENERATE RANDOM GRAPH FUNCTION */
/**********************************/
void generateRandomGraph(GraphData *graph, int numVertices, int neighborsPerVertex) {

    graph -> numVertices    = numVertices;
    graph -> vertexArray    = (int *)malloc(graph -> numVertices * sizeof(int));
    graph -> numEdges       = numVertices * neighborsPerVertex;
    graph -> edgeArray      = (int *)malloc(graph -> numEdges    * sizeof(int));
    graph -> weightArray    = (float *)malloc(graph -> numEdges  * sizeof(float));

    for (int i = 0; i < graph -> numVertices; i++) graph -> vertexArray[i] = i * neighborsPerVertex;

    int *tempArray = (int *)malloc(neighborsPerVertex * sizeof(int));
    for (int k = 0; k < numVertices; k++) {
        for (int l = 0; l < neighborsPerVertex; l++) tempArray[l] = INT_MAX;
        for (int l = 0; l < neighborsPerVertex; l++) {
            bool goOn = false;
            int temp;
            while (goOn == false) {
                goOn = true;
                temp = (rand() % graph->numVertices);
                for (int t = 0; t < neighborsPerVertex; t++)
                    if (temp == tempArray[t]) goOn = false;
                if (temp == k) goOn = false;
                if (goOn == true) tempArray[l] = temp;
            }
            graph -> edgeArray  [k * neighborsPerVertex + l] = temp;
            graph -> weightArray[k * neighborsPerVertex + l] = (float)(rand() % 1000) / 1000.0f;
        }
    }
}

/************************/
/* minDistance FUNCTION */
/************************/
// --- Finds the vertex with minimum distance value, from the set of vertices not yet included in shortest path tree
int minDistance(float *shortestDistances, bool *finalizedVertices, const int sourceVertex, const int N) {

    // --- Initialize minimum value
    int minIndex = sourceVertex;
    float min = FLT_MAX;

    for (int v = 0; v < N; v++)
        if (finalizedVertices[v] == false && shortestDistances[v] <= min) min = shortestDistances[v], minIndex = v;

    return minIndex;
}

/************************/
/* dijkstraCPU FUNCTION */
/************************/
void dijkstraCPU(float *graph, float *h_shortestDistances, int sourceVertex, const int N) {

    // --- h_finalizedVertices[i] is true if vertex i is included in the shortest path tree
    //     or the shortest distance from the source node to i is finalized
    bool *h_finalizedVertices = (bool *)malloc(N * sizeof(bool));

    // --- Initialize h_shortestDistancesances as infinite and h_shortestDistances as false
    for (int i = 0; i < N; i++) h_shortestDistances[i] = FLT_MAX, h_finalizedVertices[i] = false;

    // --- h_shortestDistancesance of the source vertex from itself is always 0
    h_shortestDistances[sourceVertex] = 0.f;

    // --- Dijkstra iterations
    for (int iterCount = 0; iterCount < N - 1; iterCount++) {

        // --- Selecting the minimum distance vertex from the set of vertices not yet
        //     processed. currentVertex is always equal to sourceVertex in the first iteration.
        int currentVertex = minDistance(h_shortestDistances, h_finalizedVertices, sourceVertex, N);

        // --- Mark the current vertex as processed
        h_finalizedVertices[currentVertex] = true;

        // --- Relaxation loop
        for (int v = 0; v < N; v++) {

            // --- Update dist[v] only if it is not in h_finalizedVertices, there is an edge
            //     from u to v, and the cost of the path from the source vertex to v through
            //     currentVertex is smaller than the current value of h_shortestDistances[v]
            if (!h_finalizedVertices[v] &&
                graph[currentVertex * N + v] &&
                h_shortestDistances[currentVertex] != FLT_MAX &&
                h_shortestDistances[currentVertex] + graph[currentVertex * N + v] < h_shortestDistances[v])

                h_shortestDistances[v] = h_shortestDistances[currentVertex] + graph[currentVertex * N + v];
        }
    }
}

/***************************/
/* MASKARRAYEMPTY FUNCTION */
/***************************/
// --- Check whether all the vertices have been finalized. This tells the algorithm whether it needs to continue running or not.
bool allFinalizedVertices(bool *finalizedVertices, int numVertices) {

    for (int i = 0; i < numVertices; i++)  if (finalizedVertices[i] == true) { return false; }

    return true;
}

/*************************/
/* ARRAY INITIALIZATIONS */
/*************************/
__global__ void initializeArrays(bool * __restrict__ d_finalizedVertices, float* __restrict__ d_shortestDistances, float* __restrict__ d_updatingShortestDistances,
                                 const int sourceVertex, const int numVertices) {

    int tid = blockIdx.x * blockDim.x + threadIdx.x;

    if (tid < numVertices) {

        if (sourceVertex == tid) {

            d_finalizedVertices[tid]            = true;
            d_shortestDistances[tid]            = 0.f;
            d_updatingShortestDistances[tid]    = 0.f; }

        else {

            d_finalizedVertices[tid]            = false;
            d_shortestDistances[tid]            = FLT_MAX;
            d_updatingShortestDistances[tid]    = FLT_MAX;
        }
    }
}

/**************************/
/* DIJKSTRA GPU KERNEL #1 */
/**************************/
__global__  void Kernel1(const int * __restrict__ vertexArray, const int* __restrict__ edgeArray,
                         const float * __restrict__ weightArray, bool * __restrict__ finalizedVertices, float* __restrict__ shortestDistances,
                         float * __restrict__ updatingShortestDistances, const int numVertices, const int numEdges) {

    int tid = blockIdx.x*blockDim.x + threadIdx.x;

    if (tid < numVertices) {

        if (finalizedVertices[tid] == true) {

            finalizedVertices[tid] = false;

            int edgeStart = vertexArray[tid], edgeEnd;

            if (tid + 1 < (numVertices)) edgeEnd = vertexArray[tid + 1];
            else                         edgeEnd = numEdges;

            for (int edge = edgeStart; edge < edgeEnd; edge++) {
                int nid = edgeArray[edge];
                atomicMin(&updatingShortestDistances[nid], shortestDistances[tid] + weightArray[edge]);
            }
        }
    }
}

/**************************/
/* DIJKSTRA GPU KERNEL #1 */
/**************************/
__global__  void Kernel2(const int * __restrict__ vertexArray, const int * __restrict__ edgeArray, const float* __restrict__ weightArray,
                         bool * __restrict__ finalizedVertices, float* __restrict__ shortestDistances, float* __restrict__ updatingShortestDistances,
                         const int numVertices) {

    int tid = blockIdx.x * blockDim.x + threadIdx.x;

    if (tid < numVertices) {

        if (shortestDistances[tid] > updatingShortestDistances[tid]) {
            shortestDistances[tid] = updatingShortestDistances[tid];
            finalizedVertices[tid] = true; }

        updatingShortestDistances[tid] = shortestDistances[tid];
    }
}

/************************/
/* dijkstraGPU FUNCTION */
/************************/
void dijkstraGPU(GraphData *graph, const int sourceVertex, float * __restrict__ h_shortestDistances) {

    // --- Create device-side adjacency-list, namely, vertex array Va, edge array Ea and weight array Wa from G(V,E,W)
    int     *d_vertexArray;         gpuErrchk(cudaMalloc(&d_vertexArray,    sizeof(int)   * graph -> numVertices));
    int     *d_edgeArray;           gpuErrchk(cudaMalloc(&d_edgeArray,  sizeof(int)   * graph -> numEdges));
    float   *d_weightArray;         gpuErrchk(cudaMalloc(&d_weightArray,    sizeof(float) * graph -> numEdges));

    // --- Copy adjacency-list to the device
    gpuErrchk(cudaMemcpy(d_vertexArray, graph -> vertexArray, sizeof(int)   * graph -> numVertices, cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_edgeArray,   graph -> edgeArray,   sizeof(int)   * graph -> numEdges,    cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_weightArray, graph -> weightArray, sizeof(float) * graph -> numEdges,    cudaMemcpyHostToDevice));

    // --- Create mask array Ma, cost array Ca and updating cost array Ua of size V
    bool    *d_finalizedVertices;           gpuErrchk(cudaMalloc(&d_finalizedVertices,       sizeof(bool)   * graph->numVertices));
    float   *d_shortestDistances;           gpuErrchk(cudaMalloc(&d_shortestDistances,       sizeof(float) * graph->numVertices));
    float   *d_updatingShortestDistances;   gpuErrchk(cudaMalloc(&d_updatingShortestDistances, sizeof(float) * graph->numVertices));

    bool *h_finalizedVertices = (bool *)malloc(sizeof(bool) * graph->numVertices);

    // --- Initialize mask Ma to false, cost array Ca and Updating cost array Ua to \u221e
    initializeArrays <<<iDivUp(graph->numVertices, BLOCK_SIZE), BLOCK_SIZE >>>(d_finalizedVertices, d_shortestDistances,
                                                            d_updatingShortestDistances, sourceVertex, graph -> numVertices);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    // --- Read mask array from device -> host
    gpuErrchk(cudaMemcpy(h_finalizedVertices, d_finalizedVertices, sizeof(bool) * graph->numVertices, cudaMemcpyDeviceToHost));

    while (!allFinalizedVertices(h_finalizedVertices, graph->numVertices)) {

        // --- In order to improve performance, we run some number of iterations without reading the results.  This might result
        //     in running more iterations than necessary at times, but it will in most cases be faster because we are doing less
        //     stalling of the GPU waiting for results.
        for (int asyncIter = 0; asyncIter < NUM_ASYNCHRONOUS_ITERATIONS; asyncIter++) {

            Kernel1 <<<iDivUp(graph->numVertices, BLOCK_SIZE), BLOCK_SIZE >>>(d_vertexArray, d_edgeArray, d_weightArray, d_finalizedVertices, d_shortestDistances,
                                                            d_updatingShortestDistances, graph->numVertices, graph->numEdges);
            gpuErrchk(cudaPeekAtLastError());
            gpuErrchk(cudaDeviceSynchronize());
            Kernel2 <<<iDivUp(graph->numVertices, BLOCK_SIZE), BLOCK_SIZE >>>(d_vertexArray, d_edgeArray, d_weightArray, d_finalizedVertices, d_shortestDistances, d_updatingShortestDistances,
                                                            graph->numVertices);
            gpuErrchk(cudaPeekAtLastError());
            gpuErrchk(cudaDeviceSynchronize());
        }

        gpuErrchk(cudaMemcpy(h_finalizedVertices, d_finalizedVertices, sizeof(bool) * graph->numVertices, cudaMemcpyDeviceToHost));
    }

    // --- Copy the result to host
    gpuErrchk(cudaMemcpy(h_shortestDistances, d_shortestDistances, sizeof(float) * graph->numVertices, cudaMemcpyDeviceToHost));

    free(h_finalizedVertices);

    gpuErrchk(cudaFree(d_vertexArray));
    gpuErrchk(cudaFree(d_edgeArray));
    gpuErrchk(cudaFree(d_weightArray));
    gpuErrchk(cudaFree(d_finalizedVertices));
    gpuErrchk(cudaFree(d_shortestDistances));
    gpuErrchk(cudaFree(d_updatingShortestDistances));
}

/****************/
/* MAIN PROGRAM */
/****************/
int main() {

    // --- Number of graph vertices
    int numVertices = 8;

    // --- Number of edges per graph vertex
    int neighborsPerVertex = 6;

    // --- Source vertex
    int sourceVertex = 0;

    // --- Allocate memory for arrays
    GraphData graph;
    generateRandomGraph(&graph, numVertices, neighborsPerVertex);

    // --- From adjacency list to adjacency matrix.
    //     Initializing the adjacency matrix
    float *weightMatrix = (float *)malloc(numVertices * numVertices * sizeof(float));
    for (int k = 0; k < numVertices * numVertices; k++) weightMatrix[k] = FLT_MAX;

    // --- Displaying the adjacency list and constructing the adjacency matrix
    printf("Adjacency list\n");
    for (int k = 0; k < numVertices; k++) weightMatrix[k * numVertices + k] = 0.f;
    for (int k = 0; k < numVertices; k++)
        for (int l = 0; l < neighborsPerVertex; l++) {
            weightMatrix[k * numVertices + graph.edgeArray[graph.vertexArray[k] + l]] = graph.weightArray[graph.vertexArray[k] + l];
            printf("Vertex nr. %i; Edge nr. %i; Weight = %f\n", k, graph.edgeArray[graph.vertexArray[k] + l],
                                                                   graph.weightArray[graph.vertexArray[k] + l]);
        }

    for (int k = 0; k < numVertices * neighborsPerVertex; k++)
        printf("%i %i %f\n", k, graph.edgeArray[k], graph.weightArray[k]);

    // --- Displaying the adjacency matrix
    printf("\nAdjacency matrix\n");
    for (int k = 0; k < numVertices; k++) {
        for (int l = 0; l < numVertices; l++)
            if (weightMatrix[k * numVertices + l] < FLT_MAX)
                printf("%1.3f\t", weightMatrix[k * numVertices + l]);
            else
                printf("--\t");
            printf("\n");
        }

    // --- Running Dijkstra on the CPU
    float *h_shortestDistancesCPU = (float *)malloc(numVertices * sizeof(float));
    dijkstraCPU(weightMatrix, h_shortestDistancesCPU, sourceVertex, numVertices);

    printf("\nCPU results\n");
    for (int k = 0; k < numVertices; k++) printf("From vertex %i to vertex %i = %f\n", sourceVertex, k, h_shortestDistancesCPU[k]);

    // --- Allocate space for the h_shortestDistancesGPU
    float *h_shortestDistancesGPU = (float*)malloc(sizeof(float) * graph.numVertices);
    dijkstraGPU(&graph, sourceVertex, h_shortestDistancesGPU);

    printf("\nGPU results\n");
    for (int k = 0; k < numVertices; k++) printf("From vertex %i to vertex %i = %f\n", sourceVertex, k, h_shortestDistancesGPU[k]);

    free(h_shortestDistancesCPU);
    free(h_shortestDistancesGPU);

    return 0;
} 
```**

# python - 指定在 doctest 套件中运行 testsetup 块的顺序

> ID：12763992
> 
> 赞同：3
> 
> 时间：2012-10-06T21:22:28.173
> 
> 标签：python, python-sphinx, docutils

在一个包含许多 Python doctest 的大型 ReStructured Text 文件中，我有一个我想在每个 doctest 之前运行的 testsetup 块，还有一些我只想在一些 doctest 之前运行的 testsetup 块。我知道如何对组执行此操作，但是有没有办法指定testsetup 块的运行*顺序？*

这是一个文件 foo.rst：

```
.. testsetup:: *

  import sys
  sys.stderr.write('testsetup *' + chr(10))

.. testsetup:: my-group

  import sys
  sys.stderr.write('testsetup my-group' + chr(10))

.. doctest:: my-group

  >>> print 'test 1'
  test 1 
```

当它运行时，我看到：

```
testsetup my-group
testsetup * 
```

有没有办法强制相反的顺序，所以最广泛适用的设置在特定于组的设置*之前*运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:48:11.483

查看[最新的 sphinx 源代码](https://bitbucket.org/birkenfeld/sphinx/src/dfccd80bd247b13c0aac55df134007c186d9c76b/sphinx/ext/doctest.py?at=default)（请参阅参考资料`DocTestBuilder.test_doc`），答案是否定的，它不可能。目前，所有测试块都按顺序收集并分配给一个组或一个特殊的`add_to_all_groups`. 在此之后，代码`add_to_all_groups`将附加到每个组的代码列表中，结果是它将始终在特定于组的代码之后运行。看起来很容易编写一个补丁来改变这种行为，或者更好地提供它作为一个选项。

# bash - IF 语句无法识别 OR 表达式

> ID：12763998
> 
> 赞同：0
> 
> 时间：2012-10-06T21:23:34.837
> 
> 标签：bash, shell, unix, scripting, osx-lion

我要打破我的头，这个。我不明白为什么下面的 IF 语句不起作用

```
renameOption="-rs"
if [[ $# -eq 4 ]]; then
if [[ $renameOption != "-rs" ]] || [[ $renameOption != "-rb" ]]; then
    echo -e "\tArgument three needs to be '-rs' or '-rb'"
    echo -e "\tNow exiting script"
    exit
fi
flag=1
echo "Good to go"
fi 
```

我知道语法是正确的，但我注意到系统无法识别`||`第二个 IF 中的 OR 表达式。使用单个表达式时，它工作正常，但我需要与两个表达式进行比较，因此 OR `||`。

我正在运行 OSX Lion 10.7.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:25:19.810

它甚至有意义吗？`$renameOption`总是不等于这两者中的任何一个。你可能想要`&&`.

# html - 什么标签应该使用新闻标题？

> ID：12763999
> 
> 赞同：4
> 
> 时间：2012-10-06T21:23:41.493
> 
> 标签：html, wordpress

我使用 WordPress 发布新闻。我应该为标题使用什么标签？`h1`还是`h2`？我应该在主页中使用什么标签，在新闻页面上应该使用什么标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T21:29:49.433

`<h1>`标签应该用来标记页面**最重要的标题**。

新闻文章的标题最重要吗？依靠。

*   如果页面是**关于**新闻文章的，它的标题**可能是最重要的**。
*   如果您在一个**列出**新闻文章的页面上，它可能***不是*最重要的**。

在这种情况下，在您列出这些文章的主页上，您可能应该使用`<h2>`、 或`<h3>`。在单篇文章页面上，它应该是顶部标题。

不，我认为网站的徽标/口号不应该`<h1>`在每个页面上都有标签。也许只在主页上。**这绝对不是每一**页上最重要的标题。我的意思是，当您来阅读一篇文章时，您阅读的是该死的文章，而不是查看该网站的徽标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:38:16.217

马达拉的建议很好。使用 h1 作为单个帖子的标题。在正文中为重要部分使用两个或三个 h2 标签。

但不要忘记 URL 的重要性，您也需要其中的关键字。

在列出所有新闻项目的新闻页面上，将您的 h1 设置为“关键字新闻”。

因此，一个关于自由主义政治的网站，这意味着你在新闻列表页面上的 h1 是“来自 sitename.tld 的自由主义新闻”或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T21:41:28.890

抱歉有点离题，但您可能对那篇文章感兴趣：

[一致的标题格式（在 blog.editage.com）](http://blog.editage.com/consistent-formatting-of-headings)

它与纸质出版物有关，但有关排版的知识在专业网页设计中非常重要。

关于标题级别我没有什么要补充的，宇智波斑写了一切。