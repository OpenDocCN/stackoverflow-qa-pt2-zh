# StackOverflow 问答 15693000-15693999

# c++ - 访问冲突写入位置 c++

> ID：15693000
> 
> 赞同：-3
> 
> 时间：2013-03-28T22:05:59.790
> 
> 标签：c++, cplex

我是 c++ 和 cplex 的新手，因此将不胜感激任何帮助。问题：我正在运行列生成代码。我的代码如下所示：

```
CPXENVptr *env = NULL;
CPXLPptr *lp= null;

  //---------COLUMN GENERATION BEGINS--------------------------------------------

   printf("\nStarting column generation.\n");
   num_iterations = 0;
   total_cols_generated = 0;

   while(1)
   {
   // we are about to do another pricing iteration
   num_iterations++;

   // get dual prices

   status=CPXgetpi(env,lp,dual_value,0,num_customers-1);
   if (status)
   {
      fprintf(stderr,"CPXgetpi Failed.\n");
      goto TERMINATE;
   }

   // call pricing routine

   printf ("\nPricing iteration %u.\n", num_iterations);

   cols_generated = generate_column(env, lp, num_nodes, num_customers, TT, service_time, start_of_window, end_of_window, out_degree, neighbour, arc_cost, arc_time, dual_value);
   total_cols_generated += cols_generated;

   if (cols_generated == 0)
         break;

   // re-optimize the master problem

   printf("Re-optimising master LP.\n");

    status =  CPXdualopt (env, lp);

   if ( status  ) {
      printf ("Failed to re-optimize master LP.\n");
      getchar();
      goto TERMINATE;
   }

   // get objective value

   status  = CPXgetobjval (env, lp, &lower_bound);
   if ( status ) {
      fprintf (stderr,"Failed to obtain objective value.\n");
      goto TERMINATE;
   }

   // print stuff to screen

    printf ("Current cost of RMP solution is %.3f\n", lower_bound);
    printf ("\nPress a key\n");
    getchar();

} // end while 
```

在第二次优化中（第二次进入 while ），它在 status = CPXdualopt (env, lp); 处提供访问冲突写入位置。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:39:52.487

根据以下[文档`CPXgetpi`](http://pic.dhe.ibm.com/infocenter/cosinfoc/v12r4/index.jsp?topic=%2Filog.odms.cplex.help%2Frefcallablelibrary%2Fhtml%2Ffunctions%2FCPXgetpi.html)：

> `CPXCENVptr`环境
> 
> 指向 CPLEX 环境的指针，由`CPXopenCPLEX()`.
> 
> `CPXCLPptr`LP
> 
> 指向 CPLEX 问题对象的指针，由`CPXcreateprob()`.

您没有将指针传递给这些对象。你正在`NULL`为他们两个通过。

的[文档`CPXdualopt`](http://pic.dhe.ibm.com/infocenter/cosinfoc/v12r4/index.jsp?topic=%2Filog.odms.cplex.help%2Frefcallablelibrary%2Fhtml%2Ffunctions%2FCPXdualopt.html)显示了同样的问题。

# php - 使用 Codeigniter CLI 在 Rackspace Cloud 上进行 Cron

> ID：15693001
> 
> 赞同：1
> 
> 时间：2013-03-28T22:06:00.683
> 
> 标签：php, codeigniter, cron, rackspace-cloud

我正在尝试使用 codeigniter CLI 运行 cron ... Rackspace 云有一种访问脚本的方法，您需要选择脚本语言，它们有 4 个选项，perl、php 等。

要访问命令行，您需要使用 perl。现在我创建了一个文件“test.sh”，它看起来像

```
#!/bin/sh
$ php /mnt/target03/12345/www.domain.com/web/content/index.php cron1 cron_test 
```

当我运行 cron 时，我得到了这个

```
/mnt/target03/12345/www.domain.com/web/content/crons/test.sh:
line 2: command not found
/mnt/target03/361169/www.domain.com/web/content/crons/test.sh:
line 3: $: command not found 
```

你们中有人有使用 rackspace cloud 运行 crons 的经验吗？

# python - 如何在 Django 1.5 中覆盖用户模型的 __unicode__ 方法

> ID：15693006
> 
> 赞同：1
> 
> 时间：2013-03-28T22:06:18.593
> 
> 标签：python, django

在 Django 1.5 中执行此操作的最佳方法是什么？

```
def __unicode__(self):
    return self.username 
```

我想覆盖它，所以它：

```
def __unicode__(self):
    return u'%s, %s' % (self.last_name, self.first_name) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T22:56:19.293

一种方法是使用代理模型。

```
class CustomUser(User):
    class Meta:
        proxy = True

    def __unicode__(self):
        return u'%s, %s' % (self.last_name, self.first_name) 
```

然后将您设置为您`AUTH_USER_MODEL`的那个`settings.py`（有关信息，请参见[此处](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#substituting-a-custom-user-model)）

# facebook - (null)：“_ACFacebookAppIdKey”，引用自：ERROR

> ID：15693008
> 
> 赞同：0
> 
> 时间：2013-03-28T22:06:23.387
> 
> 标签：facebook, ios6, sdk

我正在尝试按照 [https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)文档获取访问令牌以代表用户访问 facebook 服务。

在我添加后 - (void)sessionStateChanged:(FBSession *)session state:(FBSessionState) state error:(NSError *)error

和

```
 - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    return [FBSession openActiveSessionWithReadPermissions:nil
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
    } 
```

我得到**（空）：“_ACFacebookAppIdKey”，引用自：ERROR**，它们是其中的 24 个。我不确定到底发生了什么。

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T22:45:28.927

嗯，我想通了。它主要是缺少框架。根据

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)文档，

我们需要添加 3 个框架（AdSupport、Accounts、Social）。但是，我们应该在列表**libsqllite3.dylib**中再添加一个，连同上面的 3 个到 framework 文件夹中。

# android - 更改 OpenGL ES 2.0 中的不透明度级别

> ID：15693014
> 
> 赞同：1
> 
> 时间：2013-03-28T22:06:55.870
> 
> 标签：android, opengl-es-2.0, opacity, sprite

**编辑 1**：包含的着色器

**编辑 2**：包括屏幕截图

**编辑 3**：包括原始纹理的屏幕截图

**编辑 4**：

**编辑5**：我认为问题是因为我的位图一开始就有部分透明的像素，所以我会问一个新问题，因为这里给出的答案对于这个问题是正确的。

仔细检查，问题似乎并没有完全解决，颜色看起来不正确。

```
String strFShader =
        "precision mediump float;" +
        "uniform float Opacity;" +
        "varying vec2 v_texCoords;" +
        "uniform sampler2D u_baseMap;" +
        "void main()" +
        "{" +
        "gl_FragColor = texture2D(u_baseMap, v_texCoords);" +
        "gl_FragColor.a *= Opacity;"+            
        "}"; 
```

然后在我的渲染方法中：

```
 //Enable and set mode
    GLES20.glEnable(GLES20.GL_BLEND); 
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA);

//Draw
GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);

//Disable
GLES20.glDisable(GLES20.GL_BLEND); 
```

因此，在最大透明度 (0.0) 时，一切都很好，即没有绘制任何内容。但是在任何其他级别都不太正确，例如，在零透明度（不透明度设置为 1.0）时，这就是我得到的：

![在此处输入图像描述][1]

但它实际上应该是这样的：

![在此处输入图像描述][2]

颜色看起来有点太暗了，（在原始图像上），曾经如此微暗的边缘真的很明显。

我假设这与混合模式有关？基本上我只是在改变一层的不透明度时可能会在Photoshop中获得效果。任何其他建议都会非常有帮助。

我也尝试了这里找到的解决方案：

[https://gamedev.stackexchange.com/questions/7260/opengl-es-basic-fragment-shader-help-with-transparency](https://gamedev.stackexchange.com/questions/7260/opengl-es-basic-fragment-shader-help-with-transparency)

但我得到相同的结果？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:23:10.920

首先，将您的更改`glBlendFunc`为`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`

不透明度渲染由着色器程序处理，该程序在调用`glBlendFunc`. 更具体地说，这是由绑定程序的片段着色器的 gl_FragColor 输出的 alpha 分量指定的。下面的片段着色器显示了一个非常简单的示例，说明如何利用着色器程序来完成淡入淡出效果。

```
precision mediump float;
uniform float Opacity; // range 0.0 to 1.0
varying vec2 v_texCoords;
uniform sampler2D u_baseMap;

void main(void)
{
    gl_FragColor = texture2D(u_baseMap, v_texCoords) ;
    gl_FragColor.a *= Opacity;
} 
```

您将前景层的当前不透明度绑定到着色器程序 uniform 的位置`Opacity`。在您的情况下，由于您希望前景层淡入，您只需在操作之间选择时间步长多次执行完整的绘制操作（背景层然后前景层）以实现平滑淡入淡出。

**另外**：请记住在绘制前景对象后每次都禁用混合状态。在 OpenGL 中，一旦操作完成，将值重置为之前的状态始终是一种很好的做法。忘记这样做会导致一些严重的头痛。

# lucene - Lucene 中的搜索结果属性计数

> ID：15693016
> 
> 赞同：0
> 
> 时间：2013-03-28T22:07:07.450
> 
> 标签：lucene, search-engine

我在我的网站中使用 Lucene.Net 来搜索联系人。每个联系人都包含性别、年龄和城市等属性。我每次都使用分页并接收 10 个结果。

我需要添加一个工具栏来按属性缩小结果范围，例如：

```
Gender: Male (154), Female (103)

Age: 0-16 (34), 17-24 (86), 25-34 (117) 
```

有没有一种简单的方法可以在搜索过程中获取这些信息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:30:42.917

来自维基百科：

[分面搜索](http://en.wikipedia.org/wiki/Faceted_search)，也称为分面导航或分面浏览，是一种访问**根据分面分类系统组织的**信息的技术，**允许用户通过应用多个过滤器来探索信息集合。**

分面搜索的一个标准示例是 LinkedIn。当你搜索“软件开发者”的时候，除了搜索结果之外，还有IBM（2002人）、亚马逊（1500人）等类型的浏览能力，和你的需求很相似。

幸运的是，Lucene 提供了这个功能。以下是使用 Lucene 进行分面搜索的教程。

[分面搜索 lucene.net](https://cwiki.apache.org/LUCENENET/simple-faceted-search.html)

[官方 Apache Lucene 分面搜索](http://lucene.apache.org/core/3_6_2/api/all/org/apache/lucene/facet/doc-files/userguide.html)

[另一个 Lucene 分面搜索教程](http://shaierera.blogspot.com/2012/11/lucene-facets-part-1.html)

# c# - 如何从 Deployment.Current.Dispatcher.BeginInvoke 获取结果？

> ID：15693018
> 
> 赞同：1
> 
> 时间：2013-03-28T22:07:18.200
> 
> 标签：c#, silverlight

我正在 Windows Phone 8 上开发应用程序，我想问一下，当 MessageBox 包装在 Deployment.Current.Dispatcher.BeginInvoke 中时，有什么方法可以从 MessageBox.Show 中获取结果？例如：

```
 Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show(message, title, MessageBoxButton.OKCancel);
            }); 
```

我想得到用户的选择，我该怎么做？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:09:31.483

最好的方法是使用传递结果的回调

```
Deployment.Current.Dispatcher.BeginInvoke(() => {
  var result = MessageBox.Show(message, title, MessageBoxButton.OKCancel);
  OnMessageBoxComplete(result);
});

void OnMessageBoxComplete(MessageBoxResult result) { 
  ...
} 
```

# internet-explorer-10 - 如何清除IE10中的应用程序缓存？

> ID：15693031
> 
> 赞同：6
> 
> 时间：2013-03-28T22:07:57.063
> 
> 标签：internet-explorer-10, html5-appcache

在 Internet Explorer 10 中，如何手动清除网页的[应用程序缓存？](https://developer.mozilla.org/en/docs/HTML/Using_the_application_cache)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-20T21:31:04.007

我猜你想通了，但你可以像这样清除 IE10 中的缓存：

工具-> Internet 选项-> 设置（在浏览历史记录部分）-> 缓存和数据库选项卡

您应该会看到所有当前具有缓存的站点，并且可以根据需要从此处清除它们。这是窗口的样子：

![在此处输入图像描述](../Images/2aabf7e34b35a03c36f0842f4d4fd533.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T19:27:03.497

我不能发表评论，但我想指出浏览器缓存和应用程序缓存是两个不同的东西。[虽然，即使在查看Microsoft 的网站](http://msdn.microsoft.com/)后，我似乎也无法弄清楚如何在 IE 中清除 appcache 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T15:35:02.593

如果您只想清除应用程序缓存而不清除 localstorage 和 indexeddb（如果您只是在调试 javascript 并且拥有大量 indexeddb 数据存储，则建议这样做），我发现您可以：

1.  清除“正常”缓存，因此您不会冒险让浏览器在页面重新加载后从那里挑选资源，而不是从服务器下载它们

2.  `delete applicationCache`开发工具控制台中的问题

# c# - Farseer Physics 中碰撞对象之间的偏移

> ID：15693033
> 
> 赞同：1
> 
> 时间：2013-03-28T22:07:59.477
> 
> 标签：c#, wpf, collision-detection, offset, farseer

我正在使用[Farseer Physics 引擎](http://farseerphysics.codeplex.com)和 WPF。

现在，我设法使用以下代码创建了一个带有落球的窗口：

**XAML**：

```
<Window x:Class="test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" MouseDown="Window_MouseDown_1">
    <Canvas
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            x:Name="root"
            RenderTransform="1 0 0 -1 0 0">
    </Canvas>
</Window> 
```

**后面的代码**：

```
using FarseerPhysics;
using FarseerPhysics.Common;
using FarseerPhysics.Dynamics;
using FarseerPhysics.Factories;
using Microsoft.Xna.Framework;
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Shapes;

namespace test
{
    public partial class MainWindow : Window
    {
        World world;

        public MainWindow()
        {
            InitializeComponent();

            world = new World(new Vector2(0, -9.81f));

            var polygon = new Polygon() { Fill = Brushes.Gray };
            foreach (var pt in border)
                polygon.Points.Add(pt);
            root.Children.Add(polygon);

            var vertices = new Vertices();
            foreach (var pt in border)
                vertices.Add(ConvertUnits.ToSimUnits(pt.X, pt.Y));
            var body = BodyFactory.CreateChainShape(world, vertices);
            body.BodyType = BodyType.Static;

            body.CollisionCategories = Category.All;
            body.CollidesWith = Category.All;

            CompositionTarget.Rendering += CompositionTarget_Rendering;
        }

        Point[] border = new[] 
            { 
                new Point(200, -200), 
                new Point(200, 200),
                new Point(-200, 200),
                new Point(-200, -200),
                new Point(200, -200)
            };

        Dictionary<Body, UIElement> balls = new Dictionary<Body, UIElement>();

        void CompositionTarget_Rendering(object sender, EventArgs e)
        {
            world.Step(1/60f);
            foreach (var ball in balls.Keys)
                display(ball);
        }

        void display(Body ball)
        {
            var element = balls[ball];
            Canvas.SetLeft(element, ConvertUnits.ToDisplayUnits(ball.Position.X));
            Canvas.SetTop(element, ConvertUnits.ToDisplayUnits(ball.Position.Y));
        }

        private void Window_MouseDown_1(object sender, MouseButtonEventArgs e)
        {
            var w = 20f;
            var point = e.GetPosition(root);

            var ball = BodyFactory.CreateCircle(world, ConvertUnits.ToSimUnits(w), 1);
            ball.BodyType = BodyType.Dynamic;
            ball.Position = ConvertUnits.ToSimUnits(new Vector2((float)point.X, (float)point.Y));
            ball.CollisionCategories = Category.All;
            ball.CollidesWith = Category.All;
            ball.Restitution = .5f;

            var c = new Canvas();
            var ellipse = new Ellipse() { Width = w, Height = w, Fill = Brushes.Yellow };
            c.Children.Add(ellipse);

            Canvas.SetLeft(ellipse, -w / 2);
            Canvas.SetTop(ellipse, -w / 2);
            Canvas.SetZIndex(c, 10);

            root.Children.Add(c);
            balls.Add(ball, c);

            display(ball);
        }
    }
} 
```

如下图所示，结果不是我所期望的：**所有球加在一起和世界边界之间有一个偏移量**。

![测试](../Images/85e641e5b042a3054a4440091ebd1480.png)

*   我尽力使用`ConvertUnits`助手正确处理 Farseer 世界单位和显示单位。
*   我还读过一些关于包围所有身体以避免连续碰撞的“皮肤”，但我没想到它会那么大。
*   我注意到 UIElement 的 X/Y 值是 UIElement 的上/左角这一事实。

有什么特别的我忘记了吗？

*我知道我可以通过玩椭圆的显示半径来作弊，但我更愿意了解我在处理世界单位和显示单位的方式上做错了什么。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:05:20.950

好的，我找到了。问题很简单：

*   Ellipse WPF 元素使用*Width*和*Height*来定义对象大小，即*Diameter*
*   CreateCircle 使用*半径*

所以球体的正确分配是：

```
var ball = BodyFactory.CreateCircle(world, ConvertUnits.ToSimUnits(w / 2), 1); 
```

# html - 防止 Twitter Bootstrap .span2 在响应式布局中调整大小

> ID：15693035
> 
> 赞同：0
> 
> 时间：2013-03-28T22:08:16.767
> 
> 标签：html, css, twitter-bootstrap

我想防止 a`.span2`调整大小，同时保持响应式布局。

我的代码看起来像这样

```
<div class="container-fluid">
<div class="row-fluid">

<!-- Toolbar -->
<section id="toolbar" class="span2">
   Toolbar
</section>

<!-- Code input -->
   Code input
</section>

<!-- Code preview -->
<section class="span5">
   Code preview
</section>

</div><!-- /.row-fluid -->
</div><!-- /.container-fluid --> 
```

基本上我想要的是在调整其他元素（`.span5`）的大小时，我想要`#toobar`一个固定的宽度。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:11:59.543

你为什么不给 分配一个固定的宽度`#toolbar`？

```
#toolbar {
  width: 200px;
} 
```

# javascript - Javascript Blob保存到变量

> ID：15693036
> 
> 赞同：2
> 
> 时间：2013-03-28T22:08:19.663
> 
> 标签：javascript, file-upload, blob

我正在使用[https://github.com/cwilso/AudioRecorder](https://github.com/cwilso/AudioRecorder)，除了获取 blob 并将其发送到服务器之外，一切正常。我有以下将表单数据发送到服务器。基本上，在客户端生成一个 wav 文件，然后将其存储在一个 blob 中，我想找出一种获取该 blob 内容的方法。

```
$('#submit').click(function(){
var formData = new FormData($('#add_slide').get(0));
var jContent = $( "#main_container" );
//console.log(formData);

if($('#audio_file').val().length==0)
{

   var blob_url = $('#blob_url').val();
    if($('#blob_url').val().length==0)
   {
       alert('Recording Could not be found. Please try again');
       return false;
   }else{
       console.log(formData);
   }
   //return false;
}else{
    var ext = $('#audio_file').val().split('.').pop().toLowerCase();
    if(ext!== 'wav') {
        alert('Invalid File. Please use a file with extension WAV!');
        return false;
    }
}

$.ajax({
    url: 'lec_add_slide.php',  //server script to process data
    type: 'POST',
    xhr: function() {  // custom xhr
        myXhr = $.ajaxSettings.xhr();
        if(myXhr.upload){ // check if upload property exists
            myXhr.upload.addEventListener('progress',progressHandlingFunction, false);     // for handling the progress of the upload
            //console.log('OK');
        }else{
            //console.log('NOT');
        }
        return myXhr;
    },
    //Ajax events
    beforeSend: function (){
        $('#loadingModal').modal('show');
    },
    success: function (data) {
        jContent.html( data );
        $('#loadingModal').modal('hide');
    },
    error: function (){
        console.log('error');
    },
    // Form data
    data: formData,
    //Options to tell JQuery not to process data or worry about content-type
    cache: false,
    contentType: false,
    processData: false
});
});
function progressHandlingFunction(e){
    if(e.lengthComputable){
    $('#bar-progress-mp3').css('width',((e.loaded/e.total)*100)+'%');
}
} 
```

如果我使用常规文件输入发送常规文件，则一切正常。我已将 blob url 放在隐藏的输入字段中，并且我也尝试了 blob.slice() 但到达服务器的只是对象 Blob。有谁知道如何获取 blob URL 的内容并将其发送到服务器？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:30:48.043

您可以将 blob 添加到`FormData`，例如`formData.append('thename', theblob);`

# jpeg - JPEG 基线标准 VS 渐进式：压缩成本

> ID：15693040
> 
> 赞同：2
> 
> 时间：2013-03-28T22:08:29.487
> 
> 标签：jpeg, image-compression

我们正在动态地对大量图像进行 JPEG 压缩。

这是一个服务器端进程，以交互方式准备要发送到客户端浏览器的图像。

使用渐进式压缩将改善用户体验。

我知道这种压缩需要更多的解压计算，但这不是问题。

**我想知道渐进式压缩是否也更昂贵以及多少**（无需运行我自己的一系列测试和基准测试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T18:21:02.897

如果您正在动态压缩，那么基线将允许您在完成下载和转换图像的其余部分之前将压缩数据*流式传输到客户端。*这将使您减少延迟。OTOH 要压缩渐进式 JPEG，您需要先下载整个源图像。

对于像缩略图或头像这样的小图像，这两种方式都无关紧要。

对于大图像……它取决于压缩器、逐行扫描的数量和图像大小。与优化的基线相比，成本可以忽略不计，或者与一次性流编码器相比，成本可以翻倍。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-10T17:20:39.973

运行基准测试后，我注意到**生成 JPEG 所需的 CPU 时间大致与逐行扫描的数量成正比**

我在我的问题中所说的......

> 使用渐进式压缩将改善用户体验

实际上是错误的，因为大多数浏览器仅在客户端完全加载时才显示图像。

# ios - 无法为 JSONkit 关闭 ARC

> ID：15693043
> 
> 赞同：6
> 
> 时间：2013-03-28T22:08:38.643
> 
> 标签：ios, objective-c, automatic-ref-counting, jsonkit

将[JSONkit](https://github.com/johnezang/JSONKit)用于启用 ARC 的项目，但存在问题。我将文件适当地标记为`-fno-objc-arc`并尝试构建，但它**仍然抛出错误，如 ARC is enabled**。有什么想法我可能会错过吗？

为了清楚起见，我在 Build Phases->Compile Sources->JSONkit.m 中标记了该文件

编辑：错误的屏幕截图。这些是我在添加要被 ARC 忽略的文件的标志之前遇到的相同错误 ![在此处输入图像描述](../Images/9ba612c1d78c3d2b151052f1174694d3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T07:11:33.793

正如您提到的，您已经按照这些步骤进行操作，请同时为 JSONkit.m 文件设置编译器标志 -fno-objc-arc

还

如果它不起作用然后尝试： -![这些步骤](../Images/a7ec67e0ddf38338a47f2ce88a55e1be.png)

1.你可以删除~/Library/Application Support/iPhone Simulator/6.0/Applications和~/Library/Developer/Xcode/DerivedData下的App目录

2.然后就可以启动Xcode了；在菜单栏中，您可以找到 Project -> Clean！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:16:58.303

尝试清理您的派生数据。X-Code 有时不会清理构建警告/错误。打开管理器，项目，选择你的项目，点击派生数据后面的删除。然后做一个干净的构建。

# java - 使用具有跨平台目录的程序

> ID：15693049
> 
> 赞同：1
> 
> 时间：2013-03-28T22:08:58.277
> 
> 标签：java, linux, ubuntu, directory, cross-platform

一些背景知识：我最近开始使用 Ubuntu，听说它是用来编程的。我也在制作一个使用目录的游戏`C:\Program Files\Folder\properties.properties`，如你所见，它是为 Windows 设计的，因为我刚刚转移。我想做的是继续为 Windows 编码，因为那是我目前指定的受众，但在 ubuntu 上进行。

所以这是我的问题：

1.  我可以使目录路径（即`C:\program files\folder\properties.properties`）跨平台吗？因此，如果操作系统是 Ubuntu，它会运行`/FolderName/properties.properties`或其他什么，如果它是 Windows，它会按照我上面显示的方式运行，如果是 mac，它会执行 mac 所做的任何事情。
2.  如果没有，有没有办法在`C:\program files\folder\properties.properties`不实际更改路径的情况下将 java 定向到。因为现在，C: 没有被识别，因为这不是 linux 的工作方式。

任何帮助都会很棒！提前致谢！

**编辑：**根据@Ron Dahlgren 的第一个答案，请回答：我正在运行的 .jar 的目录是`C:\Program Files\Folder\Files\bin\main.jar`，我的 .properties 的路径是`C:\Program Files\Folder\Files\User\properties.properties`. 所以我了解 / 的工作原理，但我将如何使它进入文件夹并访问属性。它如何访问属性文件？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:10:36.463

根据[此处](https://stackoverflow.com/questions/2417485/file-separator-vs-slash-in-paths)接受的答案，您可以在整个过程中使用正斜杠，JVM 将处理转换。

为了响应您的编辑，您可以使用每个项目的相对路径，或者将它们部署到同一位置以有效地避开问题。

# objective-c - 两个视图控制器可以共享同一个 uiwebview 吗？

> ID：15693050
> 
> 赞同：0
> 
> 时间：2013-03-28T22:09:00.490
> 
> 标签：objective-c, webview

我有两个视图控制器。我想知道是否可以共享相同的 UIWebView，以便在一个视图控制器中单击链接时，结果会显示在另一个视图控制器中？如果是这样，我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:20:55.503

这当然是可能的，但不一定是一个好主意。如果您在错误的时间更改了 Web 视图的父视图，您在视图控制器之间的转换可能看起来很有趣。你想在你的第一个视图控制器的 viewDidDisappear 和你的第二个 viewWillAppear 之间的某个地方改变它，我想。但这可能很棘手。

也就是说，如果您真的想将 Web 视图移动到新的视图控制器，则可以使用以下方法：

```
[theViewControllerThatShouldHaveTheWebViewNow.view addSubview:theWebView]; 
```

或者您甚至可以将`theViewControllerThatShouldHaveTheWebViewNow`的`view`属性分配给`theWebView`，但是动态更改视图控制器的根视图可能会导致一些加重行为。

# c# - Kinect 中的 MapFromSkeletonPoint 已过时

> ID：15693056
> 
> 赞同：2
> 
> 时间：2013-03-28T22:09:32.870
> 
> 标签：c#, visual-studio-2010, kinect, msdn, kinect-sdk

我遇到了 Kinect SDK 的问题，因为我想使用的一些代码使用了过时的类。我在 Windows7 的 VS2010 中将其构建为 x86 程序。当前的 Kinect SDK 版本为 1.7。

**我正在使用的文件可以在这里找到：** [链接](https://github.com/fatihboy/Robosapien/blob/master/RobosapienKinect/Viewers/KinectSkeletonViewer.xaml.cs)

**这是我专门用来修复错误的代码：**

```
 private Point GetPosition2DLocation(DepthImageFrame depthFrame, SkeletonPoint skeletonPoint)
    {
        DepthImagePoint depthPoint = depthFrame.MapFromSkeletonPoint(skeletonPoint);

        switch (ImageType)
        {
            case ImageType.Color:
                ColorImagePoint colorPoint = depthFrame.MapToColorImagePoint(depthPoint.X, depthPoint.Y, this.Kinect.ColorStream.Format);

                // map back to skeleton.Width & skeleton.Height
                return new Point(
                    (int)(this.RenderSize.Width * colorPoint.X / this.Kinect.ColorStream.FrameWidth),
                    (int)(this.RenderSize.Height * colorPoint.Y / this.Kinect.ColorStream.FrameHeight));
            case ImageType.Depth:
                return new Point(
                    (int)(this.RenderSize.Width * depthPoint.X / depthFrame.Width),
                    (int)(this.RenderSize.Height * depthPoint.Y / depthFrame.Height));
            default:
                throw new ArgumentOutOfRangeException("ImageType was a not expected value: " + ImageType.ToString());
        }
    } 
```

**它使用的过时类是：** Microsoft.Kinect.DepthImageFrame.MapFromSkeletonPoint(Microsoft.Kinect.SkeletonPoint) & Microsoft.Kinect.DepthImageFrame.MapToColorImagePoint(int, int, Microsoft.Kinect.ColorImageFormat)

**这些是我应该在修复中使用的类方法，我只是还不知道该怎么做：**

```
public DepthImagePoint MapSkeletonPointToDepthPoint (
     SkeletonPoint skeletonPoint,
     DepthImageFormat depthImageFormat
)

public ColorImagePoint MapDepthPointToColorPoint (
     DepthImageFormat depthImageFormat,
     DepthImagePoint depthPoint,
     ColorImageFormat colorImageFormat
) 
```

**这是我在构建 RobosapianKinect 文件夹时收到的错误报告：**

警告 1 已分配字段“Com.Enterprisecoding.RobosapienKinect.MainWindow.kinectStream”，但从未使用其值 C:\Robosapien\Robosapien-master\RobosapienKinect\MainWindow.xaml.cs 50 24 RobosapienKinect

警告 2 'Microsoft.Kinect.DepthImageFrame.MapFromSkeletonPoint(Microsoft.Kinect.SkeletonPoint)' 已过时：'此方法已替换为 Microsoft.Kinect.CoordinateMapper.MapSkeletonPointToDepthPoint' C:\Robosapien\Robosapien-master\RobosapienKinect\Viewers\KinectSkeletonViewer。 xaml.cs 172 42 RobosapienKinect

警告 3 'Microsoft.Kinect.DepthImageFrame.MapToColorImagePoint(int, int, Microsoft.Kinect.ColorImageFormat)' 已过时：'此方法已替换为 Microsoft.Kinect.CoordinateMapper.MapDepthPointToColorPoint' C:\Robosapien-master\RobosapienKinect\Viewers\ KinectSkeletonViewer.xaml.cs 177 50 RobosapienKinect

警告 4 'Microsoft.Kinect.DepthImageFrame.MapFromSkeletonPoint(Microsoft.Kinect.SkeletonPoint)' 已过时：'此方法已替换为 Microsoft.Kinect.CoordinateMapper.MapSkeletonPointToDepthPoint' C:\Robosapien-master\RobosapienKinect\Viewers\KinectSkeletonViewer.xaml。 cs 172 42 RobosapienKinect

警告 5 'Microsoft.Kinect.DepthImageFrame.MapToColorImagePoint(int, int, Microsoft.Kinect.ColorImageFormat)' 已过时：'此方法已替换为 Microsoft.Kinect.CoordinateMapper.MapDepthPointToColorPoint' C:\Robosapien\Robosapien-master\RobosapienKinect\查看器\KinectSkeletonViewer.xaml.cs 177 50 RobosapienKinect

警告 6 分配了“Com.Enterprisecoding.RobosapienKinect.MainWindow.kinectStream”字段，但从未使用其值 C:\Robosapien\Robosapien-master\RobosapienKinect\MainWindow.xaml.cs 50 24 RobosapienKinect

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:11:30.533

`MapToColorImagePoint`并且`MapFromSkeletonPoint`方法已经过时。过时的方法已经过时，不再使用。相反，它们被另一种几乎做同样事情的方法所取代。

在这种情况下`MapToColorImagePoint`被替换为`MapDepthPointToColorPoint`并且`MapFromSkeletonPoint`被替换为`MapSkeletonPointToDepthPoint`。您应该使用这些方法而不是旧方法。

对于将骨架点映射到深度点：

```
DepthImagePoint depthPoint = this.Kinect.CoordinateMapper.MapSkeletonPointToDepthPoint(skeletonPoint, this.Kinect.DepthStream.Format); 
```

对于将深度点映射到色点：

```
ColorImagePoint colorPoint = this.Kinect.CoordinateMapper.MapDepthPointToColorPoint (this.Kinect.DepthStream.Format, depthPoint, this.Kinect.ColorStream.Format); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:45:05.583

已替换过时的方法。代码清理和重新格式化。您可以从[https://github.com/fatihboy/Robosapien获取最新版本](https://github.com/fatihboy/Robosapien)

# ruby-on-rails - ActiveAdmin / Formtastic 有很多领域

> ID：15693060
> 
> 赞同：0
> 
> 时间：2013-03-28T22:10:01.957
> 
> 标签：ruby-on-rails, ruby, activeadmin, has-many-through, formtastic

我有用户和组。

`Users has_many :groups, :through => Membership`
`Groups has_many :users, :through => Membership`

目前很好。成员资格现在有一个布尔字段，`manager`.

用户可以是组的管理员，组可以有多个管理员。在站点的任何地方，这都可以正常工作并且不会导致任何问题。现在他们需要以某种方式管理它。我正在使用 Active Admin (Formtastic) 并显示字段`:as => :check_boxes`。

用户喜欢这些复选框。他们希望我在切换用户是否在组中的复选框旁边放置第二个复选框，以确定用户是否是该组的经理。

我怎么可能去做这件事？我曾尝试使用该`f.has_many`系统，但它会为每个现有成员创建一个条目，无法删除成员，这也不是用户想要的。我想显示每个用户，显示一个复选框以确定该配对是否存在成员资格，并在其旁边显示另一个复选框以获取经理字段的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:27:45.157

您想要的是在单击复选框时进行 AJAX 调用。假设您正在为您的 javacript 文件和 jQuery 使用咖啡脚本，以提供一般指南（未经测试），请在您的复选框上使用一个属性，如下所示：

```
<checkbox data-group=<%=group.id%> data-user=<%=user.id%> data-something="true"> 
```

然后，创建一个 javascript 函数来获取此数据，并在其上放置一个调用页面的函数：

```
$document.ready ->
  $(["data-something]").click ->
    user = this.attr("data-user")
    group = this.attr("data-group")
    $.post("/some/url", {value: this.value, user: user, group: group}) 
```

将路由添加到这个控制器，然后从这个 url 开始操作，简单处理逻辑

```
Class SomeController
  def url
    user = User.find(params[:user])
    ....
  end
end 
```

如果您有更多问题，请稍后提出更具体的问题。

# asp.net-mvc - ASP MVC 给 EditorFor 元素 id/name

> ID：15693061
> 
> 赞同：2
> 
> 时间：2013-03-28T22:10:07.407
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我需要`@Html.EditorFor`在我正在使用的一些 jQuery 代码中指定一个视图元素（`datepicker`）。是否可以为特定`EditorFor`元素指定名称或 ID？

```
 <div class="editor-field">
        @Html.EditorFor(model => model.DateTaken)
        @Html.ValidationMessageFor(model => model.DateTaken)
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:19:45.147

我假设您的日期选择器正在文本字段中使用？还假设通过“EditorMessageFor”，您的意思是`EditorFor`。

如果我的两个假设都是正确的，您可以`TextBoxFor`改用，如下所示：

```
@Html.TextBoxFor(m => m.DateTaken, new { id = "MyCssId" }) 
```

如果做不到这一点，您将不得不创建一个自定义编辑器模板。[这里](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)有一个全面的指南。

# redis - 有没有办法对 redis 排序集设置成员限制？

> ID：15693064
> 
> 赞同：12
> 
> 时间：2013-03-28T22:10:27.103
> 
> 标签：redis

假设我想将最近添加的 10 个存储到 redis 排序集中，其中第 11 个添加将第一个从列表中推开。直到它达到 10 个项目，它才会正常增长。

我是否必须自己检查每个添加的长度并删除第一个元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T00:11:12.863

我认为您不需要检查长度，但必须自己设置上限：

`ZREMRANGEBYRANK [KEY] 0 -10`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T14:57:50.547

如果您只需要将第一个成员删除到 ZSet 中，您可以使用以下命令：

```
ZREMRANGEBYRANK key 0 0 
```

您还可以使用分数为 1 的 ZADD 将第 11 个元素排序为 ZSet 中的第一个成员：

```
ZADD key 1 member 
```

前任：

> redis 127.0.0.1:6379> ZADD myzset 1 one
> (integer) 1
> redis 127.0.0.1:6379> ZADD myzset 1 two
> (integer) 1
> redis 127.0.0.1:6379> ZRANGE myzset 0 -1 withscores
> 1) "one"
> 2) “1”
> 3）“二”
> 4）“1”
> redis 127.0.0.1:6379> ZREMRANGEBYRANK myzset 0 0
> （整数）1
> redis 127.0.0.1:6379> ZADD myzset 1 三
> （整数）1
> redis 127.0.0.1:6379> ZRANGE myzset 0 -1 withscores
> 1) “三”
> 2) “1”
> 3) “二”
> 4) “1”

# node.js - nodejs 0.10.2 + express 3.x + socket.io 0.9.11 我有一个错误

> ID：15693067
> 
> 赞同：1
> 
> 时间：2013-03-28T22:10:40.150
> 
> 标签：node.js, express, socket.io

nodejs：v0.10.2 和 express 3.x 和 socket.io 0.9.11

我只是在 socket.io 上尝试示例代码，如下所示。

http.js708 抛出新错误（发送后无法设置标头）

[http://socket.io/#how-to-use](http://socket.io/#how-to-use)

**服务器端**

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(80);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

**客户端 -`index.html`**

```
var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
}); 
```

然后我有一个像图片上的错误消息。

![在此处输入图像描述](../Images/b3e0c1a3d770639b49dce4995d3d4de3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T07:30:24.880

首先你必须检查连接是否建立，然后你继续你的代码

这里有一些示例代码

```
var app = require('express')()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server)

server.listen(3000)    

io.on('connection',function(socket){
  console.log('connection..')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:02:07.823

我已将 socket.io 0.9.11 更改为 0.9.13 而不是它的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-22T05:08:03.803

检查服务器端代码中的处理函数。您正在多次发送响应，这就是为什么它在已经发送标头时给出错误，因为响应已经发送并且您正在再次发送它。更正如下代码。

```
function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    } else {
      res.writeHead(200);
      res.end(data);
    }
  });
} 
```

# c++ - 从 C++ 绘制简单的 png 图像

> ID：15693075
> 
> 赞同：4
> 
> 时间：2013-03-28T22:11:07.200
> 
> 标签：c++, png

我想从我的 C++ 程序创建一个 png 图像（并将其保存到磁盘）。我只需要非常基本的操作，如画线、画圆、填充矩形、填充圆等。我想使用一个非常小的（最好是 1 个标题和 1 个源文件）和开发人员友好的库什么是开源和交叉平台（需要 Windows 和 Unix）。

我找到了 PNGwriter，但它没有在 Ubuntu 12.04 下使用 g++ 4.6.3（链接问题）为我编译，并且需要安装许多其他库。

满足这个基本要求的最小库是哪个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:41:33.187

我想说：CImg 库 ( [http://cimg.sourceforge.net](http://cimg.sourceforge.net) ) 看起来对您来说是完美的库。它只是一个头文件，并且是基于模板的（但不是*很重*）。非常易于使用，它具有“draw_line()”、“draw_circle()”等方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:19:53.360

也许你想使用这个库：

```
http://www.antigrain.com/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T15:53:41.347

OpenCV [http://docs.opencv.org/index.html](http://docs.opencv.org/index.html)也提供了一些基本的绘图。也许不是最小的库，但广泛用于图像处理并在 windows 和 linux 上得到很好的支持。

# nsjsonserialization - JSONKit 不反序列化不带引号的属性

> ID：15693076
> 
> 赞同：1
> 
> 时间：2013-03-28T22:11:16.717
> 
> 标签：nsjsonserialization, jsonkit

我正在尝试使用 JSONKit 和 Apple 内置的 json serlializer 将以下内容反序列化为 NSDictionary

```
{route:"/tasks/4f9218a27e5c8f0000000000"} 
```

为什么会失败

```
NSDictionary *jsonDictionary = [[JSON valueForKeyPath:@"data"] objectFromJSONString]; 
```

但是，如果我在“路线”周围加上引号，它似乎确实有效，为什么？我只会在属性名称周围加上引号，但是当我发布原始字符串时，facebook 会将其去掉，所以这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:58:29.943

原因是因为 {"key":"value"} 是编码 JSON 字符串的正确方法。您在应用程序中看到的 { key: "value" } 编码字符串通常是定义字符串的一个方便因素，因为在通过 HTTP 推送这种结构化字符串之前，它被翻译（在幕后）到 {"key ":"值"} 格式。

将来，如果您遇到 JSON 字符串问题并担心可能是因为 JSON 字符串格式不正确，请尝试将 JSON 字符串粘贴到 JSONlint ( [http://jsonlint.com/](http://jsonlint.com/) )。

如果你去那里尝试这个字符串，你会看到它失败：{ key：“value”}如果你尝试这个，它会通过：{“key”：“value”}

希望这可以帮助....

**编辑** 哇......如果我真的阅读我正在写的东西，我猜它会有所帮助。重点就在上面，但我一定是脑子里放了个屁，因为它很难破译。所以，这是第二次尝试这个哈哈..

您的第一个示例失败的原因是因为它的结构根据 JSON 标准无效：

```
{route:"/tasks/4f9218a27e5c8f0000000000"}  // This is invalid... 
```

正确的有效键/值对具有用双引号括起来的键*和值：*

```
{ "route" : "/tasks/4f9218a27e5c8f0000000000" }  // This IS valid. 
```

定义 JSON 字符串的标准可以在这里看到：http: [//www.json.org/](http://www.json.org/)

JSONLint 站点 ( [http://jsonlint.com](http://jsonlint.com) ) 是一个非常好的资源，可用于在实际使用 JSON 字符串之前快速测试它的有效性，同时也是调试可能失败的 JSON 字符串的好方法解析器验证测试。

我希望*这*会有所帮助嘿..

# javascript - 用于编辑谷歌地图折线的事件处理程序？

> ID：15693077
> 
> 赞同：15
> 
> 时间：2013-03-28T22:11:27.467
> 
> 标签：javascript, google-maps, event-handling, google-maps-markers, google-polyline

我正在寻找一个在您在 Google 地图中编辑折线时触发的事件，类似于标记上的“拖动”事件。我找到了 'capturing_changed' 事件，但它似乎在 dragstart 和 dragend 上触发，而不是在 drag 上触发。因为我不得不重新发明轮子，允许拖动标记并根据标记的位置更新折线，基本上是重新发明可编辑的折线。我希望能够添加标记，可编辑的折线可以顺利完成，但我必须能够在拖动时检测到。我在 API 文档或谷歌搜索中找不到任何东西，所以我想我会在这里问。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-29T04:29:12.910

修改文档中的[简单折线示例](https://developers.google.com/maps/documentation/javascript/examples/polyline-simple)以添加更改事件（insert_at、remove_at、set_at、dragend）。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Polyline Simple</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
var flightPath = null;

      function initialize() {
        var myLatLng = new google.maps.LatLng(0, -180);
        var mapOptions = {
          zoom: 3,
          center: myLatLng,
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };

        var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        var flightPlanCoordinates = [
            new google.maps.LatLng(37.772323, -122.214897),
            new google.maps.LatLng(21.291982, -157.821856),
            new google.maps.LatLng(-18.142599, 178.431),
            new google.maps.LatLng(-27.46758, 153.027892)
        ];
        flightPath = new google.maps.Polyline({
          path: flightPlanCoordinates,
          strokeColor: '#FF0000',
          strokeOpacity: 1.0,
          strokeWeight: 2,
          editable: true,
          draggable: true
        });
        google.maps.event.addListener(flightPath, "dragend", getPath);
        google.maps.event.addListener(flightPath.getPath(), "insert_at", getPath);
        google.maps.event.addListener(flightPath.getPath(), "remove_at", getPath);
        google.maps.event.addListener(flightPath.getPath(), "set_at", getPath);
        flightPath.setMap(map);
      }

function getPath() {
   var path = flightPath.getPath();
   var len = path.getLength();
   var coordStr = "";
   for (var i=0; i<len; i++) {
     coordStr += path.getAt(i).toUrlValue(6)+"<br>";
   }
   document.getElementById('path').innerHTML = coordStr;
}

    </script>
  </head>
  <body onload="initialize()">
    <div id="map-canvas" style="height:500px; width:600px;"></div>
    <div id="path"></div>
  </body>
</html> 
```

[工作示例](http://www.geocodezip.com/v3_GoogleEx_polyline-simple_editingEvents.html)

**代码片段：**

```
var flightPath = null;

function initialize() {
  var myLatLng = new google.maps.LatLng(0, -180);
  var mapOptions = {
    zoom: 3,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  var flightPlanCoordinates = [
    new google.maps.LatLng(37.772323, -122.214897),
    new google.maps.LatLng(21.291982, -157.821856),
    new google.maps.LatLng(-18.142599, 178.431),
    new google.maps.LatLng(-27.46758, 153.027892)
  ];
  flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: '#FF0000',
    strokeOpacity: 1.0,
    strokeWeight: 2,
    editable: true,
    draggable: true
  });
  google.maps.event.addListener(flightPath, "dragend", getPath);
  google.maps.event.addListener(flightPath.getPath(), "insert_at", getPath);
  google.maps.event.addListener(flightPath.getPath(), "remove_at", getPath);
  google.maps.event.addListener(flightPath.getPath(), "set_at", getPath);
  flightPath.setMap(map);
}

function getPath() {
  var path = flightPath.getPath();
  var len = path.getLength();
  var coordStr = "";
  for (var i = 0; i < len; i++) {
    coordStr += path.getAt(i).toUrlValue(6) + "<br>";
  }
  document.getElementById('path').innerHTML = coordStr;
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="path"></div>
<div id="map-canvas" style="height:500px; width:600px;"></div>
```

# homebrew - 冲泡更新错误

> ID：15693078
> 
> 赞同：16
> 
> 时间：2013-03-28T22:11:33.077
> 
> 标签：homebrew

我正在使用 macbook 并在我的机器上安装了 ruby​​。我想安装一个 ruby​​ gem，但想先更新 HomeBrew。我在我的主文件夹中运行*“brew update”*并收到此错误：

```
 error: The following untracked working tree files would be overwritten by merge:
Library/Formula/vcprompt.rb
 Please move or remove them before you can merge.
 Aborting
 Error: Failure while executing: git pull -q origin refs/heads/master:refs/remotes/origin/master 
```

我尝试进入 library/formula 文件夹，但它在我的机器上不存在。我不知道从这里做什么。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-29T16:21:38.637

cd /usr/local && git reset --hard FETCH_HEAD

或者如果它失败了

cd /usr/local && sudo git reset --hard FETCH_HEAD

# javascript - 跨多行突出显示文本区域中的文本

> ID：15693079
> 
> 赞同：0
> 
> 时间：2013-03-28T22:11:37.427
> 
> 标签：javascript

参考[https://stackoverflow.com/a/7599199](https://stackoverflow.com/a/7599199) - 在文本区域中突出显示文本。我需要突出显示标记之间的文本。以下适用于单行，但我需要跨越多行。我似乎无法弄清楚要添加的正确代码。有任何想法吗？

例子：

```
$(document).ready(function() {
  $("#body_cfm").highlightTextarea({
       words: ["<\!---((.|\)*)--->"],

  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:25:01.540

`.`不考虑换行符。创建一个包含换行符的字符类。

```
<\!---(([.\n]|\)*)---> 
```

# .net - log4net 如何设置特定程序集的日志级别？

> ID：15693081
> 
> 赞同：1
> 
> 时间：2013-03-28T22:11:39.953
> 
> 标签：.net, log4net, log4net-configuration

我正在使用使用 log4net 的第三方程序集。有问题的程序集过于频繁地记录到“信息”日志级别。这会给我的应用程序带来很多我不想要的噪音。

有没有办法可以为特定程序集配置不同的日志级别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T22:31:31.483

是的，有点。有一种方法可以根据配置文件中的记录器名称设置值。为方便起见，我省略了文件的其余部分，但在您的文件中，您应该有一个如下所示的根部分。

现在我只为另一个记录器添加额外的部分。

例如：

```
<root>        
    <level value="ERROR" />    
    <appender-ref ref="RollingFile" />
</root>    
<logger name="ServiceLib">
    <level value="DEBUG"/>  
</logger> 
```

如果您通过传递类型来创建记录器，则此方法有效。然后，该名称基于类的命名空间。像这样：

```
private static readonly ILog log = LogManager.GetLogger(typeof(ServiceLib.MyWebService)); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T22:34:18.043

从手册：

[http://logging.apache.org/log4net/release/manual/configuration.html](http://logging.apache.org/log4net/release/manual/configuration.html)

您不能为程序集执行此操作，但可以为该程序集中的包执行此操作。因此，如果该程序集包都以 Com.Foo 开头，那么接下来的配置将执行您想要的操作并将日志记录限制为 WARN 级别及更高级别，因此不会出现 INFO 日志记录。

```
<log4net>
    <!-- A1 is set to be a ConsoleAppender -->
    <appender name="A1" type="log4net.Appender.ConsoleAppender">

        <!-- A1 uses PatternLayout -->
        <layout type="log4net.Layout.PatternLayout">
            <!-- Print the date in ISO 8601 format -->
            <conversionPattern value="%date [%thread] %-5level %logger %ndc - %message%newline" />
        </layout>
    </appender>

    <!-- Set root logger level to DEBUG and its only appender to A1 -->
    <root>
        <level value="DEBUG" />
        <appender-ref ref="A1" />
    </root>

    <!-- Print only messages of level WARN or above in the package Com.Foo -->
    <logger name="Com.Foo">
        <level value="WARN" />
    </logger>
</log4net> 
```

如果您使用的 Lib 不遵循此约定（基于类型名称进行记录），则必须在日志文件中检查 Lib 用于记录的字符串是什么，并更改该字符串的“Com.Foo”。

# android - SeekBar 上的 RotateAnimation 不会旋转拇指的触摸点

> ID：15693084
> 
> 赞同：0
> 
> 时间：2013-03-28T22:11:49.640
> 
> 标签：android, android-animation

我正在使用 a `RotateAnimation`（`SeekBar`设置`fillAfter`为 true），这在视觉上似乎工作正常。问题是拇指上的触摸点`SeekBar`仍处于原来的位置。因此，如果我将`SeekBar`90 度旋转，我仍然需要垂直拖动拇指而不是水平拖动。从视觉上看，当我拖动`SeekBar`已旋转的 a 时，即使我垂直于它的显示方式拖动，拇指也会以正确的方式移动。这也会导致拇指出现图形故障。

如何让接触点`SeekBar`坚持旋转？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:32:27.277

动画不会改变视图的位置，只会改变视觉外观。因此，即使您旋转了`SeekBar`，它的方向本质上并没有改变。唯一的出路是在动画结束后自己移动视图。这并不简单。您是否支持 Honeycomb 之前的 Android 版本？如果没有，你会想要使用`ObjectAnimator`which 几乎可以处理所有事情。

*其他参考资料*

*   [http://android-developers.blogspot.com/2011/02/animation-in-honeycomb.html](http://android-developers.blogspot.com/2011/02/animation-in-honeycomb.html)
*   [http://android-developers.blogspot.com/2011/05/introducing-viewpropertyanimator.html](http://android-developers.blogspot.com/2011/05/introducing-viewpropertyanimator.html)
*   [http://nineoldandroids.com/（Jake](http://nineoldandroids.com/) Wharton 的库，可让您在之前的 Android 版本上使用 Honeycomb 动画）

# ruby-on-rails - 如何防止 Internet Explorer 中的安全警告？

> ID：15693085
> 
> 赞同：0
> 
> 时间：2013-03-28T22:11:57.863
> 
> 标签：ruby-on-rails, internet-explorer, ssl, cross-browser

我有一个安装了 SSL 安全证书的 ruby​​ on rails 网站。我在其他浏览器（例如 Chrome 或 Firefox）中没有收到任何类型的安全警告，但我在 IE 中得到了这个

这是一个屏幕截图： ![在此处输入图像描述](../Images/b16e49444a2359cf2caec704e011c0d2.png)

如果我选择“否”，一切都会正常显示，并且可以正确访问 CSS 文件。但是我怎样才能防止这种情况完全弹出呢？我使用 StartSSL 作为证书，如果有帮助，CSS 文件是不安全的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:29:41.760

在页面的某处，您正在指定一个 URL 以 开头的文件`http://`，其中主页的 URL 以`https://`.

`https`旨在用于安全站点，但`https`在同一页面上包含任何非内容会损害该安全性。这就是 IE 警告你的地方。

您需要确保页面中的所有元素都是通过`https://`URL 下载的。

如果您不确定使用错误协议下载了哪些文件，您可以使用 IE 的开发工具窗口查看页面流量。按 F12 打开开发工具，然后加载页面（对安全问题回答“是”，以确保所有内容都已下载）。您应该能够看到为打开页面而加载的所有文件，并且应该能够从中看到哪些文件是通过`http://`而不是`https://`. 这些是你需要修复的。

希望有帮助

# android - android - 从自定义适配器类调用的 AsyncTask 更新 ListView

> ID：15693086
> 
> 赞同：1
> 
> 时间：2013-03-28T22:11:58.187
> 
> 标签：android, android-asynctask, adapter

我正在尝试从 AsyncTask 更新 ListView。我有这种情况：

*   活动类从自定义适配器类创建列表适配器。
*   Adapter 类在列表项的元素上设置 onClickListener，并调用位于不同 Utilities 类中的 AsyncTask。

如何从 Utilities AsyncTask 中的 onPostExecute() 方法调用 notifyDataSetChanged？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T22:38:05.933

包括一个*委托*作为回调，以从原始类中激活刷新。

比如添加这个接口：

```
public interface AsyncDelegate {

    public void asyncComplete(boolean success);

} 
```

然后，在您的调用类中，实现接口并将其传递给您的任务

```
public class MyClass implements AsyncDelegate  {

// Class stuff
MyAsyncTask newTask = new MyAsyncTask(this);
newTask.execute();

public void asyncComplete(boolean success){
    myAdapter.notifyDataSetChanged();

} 
```

在 AsyncTask 中，返回结果：

```
private class MyAsyncTask extends AsyncTask<Object, Object, Object> {

   private AsyncDelegate delegate;

   public MyAsyncTask (AsyncDelegate delegate){
     this.delegate = delegate;
   }

   @Override
   protected void onPostExecute(String result) {
      delegate.asyncComplete(true);
   }

} 
```

当任务完成时，它会调用委托，这将触发刷新！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:28:49.713

这是一个例子：

新闻列表是一个 ArrayList。nAdapter 是一个通用适配器。

所以首先你清除你的列表，然后添加你所有的新内容。之后，您对您的适配器说您的内容已更改。

```
@Override
        protected void onPostExecute(ArrayList<HashMap<String, String>> list) {

        newsList.clear();
            newsList.addAll(list);
            nAdapter.notifyDataSetChanged();

        } 
```

# jquery-animate - Edge Animate - 从不同的符号访问符号时间轴上的变量？

> ID：15693089
> 
> 赞同：0
> 
> 时间：2013-03-28T22:12:11.087
> 
> 标签：jquery-animate, adobe-edge

我有一个需要相互交互的几个符号的阶段。每个符号都有自己的时间线，在激活时写入一个变量，然后在特定条件下重新写入该变量。那部分很好。

但是，我需要访问此变量的值以在条件语句中使用，但我似乎无法“指向”它的位置。到目前为止，我已经尝试了各种迭代：

```
var CrateData = sym.getComposition().getStage().getSymbol("_bl_3x1crate_h").getSymbolElement("_3x1crate").getVariable("Crate1"); 
```

如果我不使用“getSymbolElement”，它会返回一个未定义的值。

```
var CrateData = sym.getComposition().getStage().getSymbol("_bl_3x1crate_h").$("_3x1crate"); 
```

给我一个 Object 的值（我怀疑这最接近我需要它做的事情）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:51:38.640

解决了（某种）。必须将变量放在不同的位置并告诉它导航到该位置以更改它。

```
var myCrateCheck = sym.getComposition().getStage().getSymbol("_b_2x1crate_h").getVariable("Crate2");

sym.getComposition().getStage().getSymbol("_b_2x1crate_h").setVariable("Crate2", "Moved"); 
```

# javascript - 在 document.location.href 之后创建一个脚本

> ID：15693095
> 
> 赞同：0
> 
> 时间：2013-03-28T22:12:38.810
> 
> 标签：javascript, location-href

我想在或某种相关代码`alert("some text")`之后添加一条消息。`document.location.href`

前任：

```
document.location.href = "http://www.msn.com";
windows.alert("You are now at msn.com"); 
```

到我使用的那一刻，`document.location.href`我会自动切换站点，因此其余代码没有完成。所以我想知道是否有其他方法可以在同一页面上/不在同一页面上切换站点，然后放置我的自定义代码并相应地执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:14:19.547

使用`haschange`事件：

```
$(window).on('hashchange', function() {
  // your code here
}); 
```

看到[这个帖子](http://benalman.com/news/2010/03/jquery-special-events/)

# php - 需要遍历一个数组来确定输出

> ID：15693096
> 
> 赞同：1
> 
> 时间：2013-03-28T22:12:41.050
> 
> 标签：php, arrays, loops, for-loop

我想输出这样的地址 123 Street, address, city, County, postcode

数据存储在数据库中，我需要检查该字段是否有任何内容，所以我知道在地址中输出逗号

```
$address = array($club['clubAdd1'], $club['clubAdd2'], $clubCity, $club['clubCounty'], $club['clubPostcode']); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:14:50.557

```
$parts = array(

  $club['clubAdd1'],
  $club['clubAdd2'],
  $clubCity,
  $club['clubCounty'],
  $club['clubPostcode'],

);

$address = array();

foreach ($parts as $part)
{

  if ('' != $part)
  {
    $address[] = $part;
  }

}

echo implode(', ', $address); 
```

**编辑：一个班轮**

```
 echo implode(', ', array_filter($array)); 
```

**编辑 2：更准确的一条线**

上述问题是`0`并且`'0'`也将被删除，这可能不是理想的行为。这将解决：

```
array_filter($array, function ($value)
{
  return strlen(trim($value));
}
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:17:31.147

在没有第二个参数的情况下通过函数运行数组[`array_filter()`](http://php.net/manual/en/function.array-filter.php)将返回一个没有空元素的数组。

例如：

```
$address_line = implode(', ',array_filter($address_array)); 
```

正如迈克尔所指出的，这也会删除`0`数值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:19:19.240

单线

```
echo implode(', ', array_filter(array($club['clubAdd1'], $club['clubAdd2'], $clubCity, $club['clubCounty'], $club['clubPostcode']))) 
```

# wpf - 将控件绑定到域对象提供的 xaml

> ID：15693100
> 
> 赞同：0
> 
> 时间：2013-03-28T22:12:58.630
> 
> 标签：wpf

我们有一个希望由用户控制的 UI 区域。基本上，它们为我们提供了一段 xaml，它定义了特定区域的外观。

```
public class Project
{
  public string DisplaySpecificationXml { get; set; }
} 
```

是否有一种简单的方法可以从碰巧知道 xaml 的域对象中绑定属性，以便我们可以在运行时看到它；

PS - 请注意，查看的项目将在运行时更改，然后我需要更新 UI 的这些区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:38:39.447

```
<Window x:Class="MiscSamples.RuntimeXAML"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MiscSamples"
        Title="RuntimeXAML" Height="300" Width="300">
    <Window.Resources>
        <local:stringToUIConverter x:Key="Converter"/>
    </Window.Resources>
    <UniformGrid Rows="1" Columns="2">
        <ListBox ItemsSource="{Binding Projects}" x:Name="Lst"/>
        <ContentPresenter Content="{Binding SelectedItem.DisplaySpecificationXml, ElementName=Lst, Converter={StaticResource Converter}}"/>
    </UniformGrid>
</Window> 
```

代码背后：

```
 public partial class RuntimeXAML : Window
    {
        public List<Project> Projects { get; set; } 

        public RuntimeXAML()
        {
            InitializeComponent();
            Projects = new List<Project>
                           {
                               new Project()
                                   {
                                       DisplaySpecificationXml = 
                                        "<StackPanel>" + 
                                        "<TextBlock FontWeight='Bold' Text='This is UserControl1'/>" + 
                                        "<ComboBox Text='ComboBox'/>" + 
                                        "</StackPanel>"
                                   },
                               new Project()
                                   {

                                   }
                           };
            DataContext = this;
        }
    } 
```

转换器：

```
 public class stringToUIConverter: IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value == null || (!(value is string)))
                return null;

            var header = "<Grid xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' " + 
                         "xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'>";

            var footer = "</Grid>";

            var xaml = header + (string) value + footer;

            var UI = System.Windows.Markup.XamlReader.Parse(xaml) as UIElement;
            return UI;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

结果：

![在此处输入图像描述](../Images/65a35ef7fe3c0f8fa142afff0029c3bf.png)

# java - 为 Java Boggle 游戏设置时间限制

> ID：15693103
> 
> 赞同：0
> 
> 时间：2013-03-28T22:13:04.367
> 
> 标签：java, timer, limit, boggle

我已经编写了解决boggle board的代码，现在我想将它转换成我自己的游戏。我有我需要的一切，除了我不知道如何设置时间限制，所以这个人只能在 2 分钟内输入单词。这是我到目前为止所拥有的，但它并没有做我想做的事情，即在 2 分钟后停止。

```
 long startTime = System.nanoTime();
            long endTime1=0;
            long maxDurationInMilliseconds = 2 * 60 * 1000;
            while (2 * 60 * 1000> endTime1-startTime) {
                System.out.println(System.currentTimeMillis());
                System.out.print("Guess a word on the board! ");
                if(test.CheckGame(scan.next())==true){
                    System.out.print("Good job! ");
                }
                else    
                    System.out.print("Guess again! ");
                endTime1 = System.nanoTime();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:15:26.090

您正在将毫秒与纳秒进行比较。这似乎是这里的问题。

您可能应该使用[`System.currentTimeMillis`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29)来计算`startTime`和`endTime1`。

或者，如果您需要纳秒级分辨率（尽管*不能*保证[`System.nanoTime`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)），您应该以纳秒为单位表示*最大持续时间*。

# php - 使用单个 Wikipedia (MediaWiki) API 调用从搜索中获取多个结果

> ID：15693110
> 
> 赞同：0
> 
> 时间：2013-03-28T22:13:25.563
> 
> 标签：php, mediawiki, wikipedia

我一直在搜索 Wikipedia (:Mediawiki) api 寻找下一个选项，但找不到它是否存在；我想搜索“Sydney NSW Australia”（例如，搜索查询更改为用户的搜索查询）。“悉尼新南威尔士州澳大利亚”没有特定的维基百科页面，但悉尼有一个页面，新南威尔士州和澳大利亚也有一个页面。

如果原始搜索查询没有特定页面，我想获取悉尼或新南威尔士州或澳大利亚页面的内容（不发送多个查询）。

有可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:32:08.470

搜索`intitle:Sydney OR intitle:NSW OR intitle:Australia`。你会遇到新南威尔士州的一些问题，因为该页面重定向到新南威尔士州。

# java - 使用 Spring 的 Oracle 本机连接池上的连接重置错误

> ID：15693114
> 
> 赞同：2
> 
> 时间：2013-03-28T22:14:01.760
> 
> 标签：java, oracle, spring, connection-pooling, ojdbc

我正在使用带有薄 jdbc 驱动程序的 Spring 使用 Oracle Native 连接池，并注意到以下错误

```
Exception in thread "main" org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is java.sql.SQLRecoverableException: IO Error: Connection reset
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:382)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:519)
Caused by: java.sql.SQLRecoverableException: IO Error: Connection reset
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:428)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:536)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:228)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
    at oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:280)
    at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:207)
    at oracle.jdbc.pool.OracleConnectionPoolDataSource.getPhysicalConnection(OracleConnectionPoolDataSource.java:139)
    at oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:88)
    at oracle.jdbc.pool.OracleImplicitConnectionCache.makeCacheConnection(OracleImplicitConnectionCache.java:1583)
    at oracle.jdbc.pool.OracleImplicitConnectionCache.makeOneConnection(OracleImplicitConnectionCache.java:515)
    at oracle.jdbc.pool.OracleImplicitConnectionCache.defaultUserPrePopulateCache(OracleImplicitConnectionCache.java:222)
    at oracle.jdbc.pool.OracleImplicitConnectionCache.<init>(OracleImplicitConnectionCache.java:198)
    at oracle.jdbc.pool.OracleConnectionCacheManager.createCache(OracleConnectionCacheManager.java:306)
    at oracle.jdbc.pool.OracleConnectionCacheManager.createCache(OracleConnectionCacheManager.java:192)
    at oracle.jdbc.pool.OracleDataSource.cacheInitialize(OracleDataSource.java:414)
    at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:393)
    at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:179)
    at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:157)
    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    ... 5 more
    Caused by: java.net.SocketException: Connection reset
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:113)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at oracle.net.ns.DataPacket.send(DataPacket.java:199)
    at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)
    at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)
    at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)
    at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)
    at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)
    at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:123)
    at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:79)
    at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1122)
    at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1099)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:288)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)
    at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:366)
    at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:752)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:366)
    ... 25 more 
```

下面是spring配置文件中数据源的配置方式

```
<bean id="datasourceone" class="oracle.jdbc.pool.OracleDataSource" destroy-method="close">
    <property name="connectionCachingEnabled" value="true" />
    <property name="URL">
        <value>jdbc:oracle:thin:@(DESCRIPTION=(LOAD_BALANCE=on)(ADDRESS=(PROTOCOL=TCP)(HOST=xyz-01) (PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=xyz-02) (PORT=1521))(CONNECT_DATA=(SERVICE_NAME=ABCD)))</value>
    </property>
    <property name="user">
        <value>XYZ</value>
    </property>
    <property name="password">
        <value>XXXX</value>
    </property>
    <property name="connectionCacheProperties">
        <value>
            MinLimit:1
            MaxLimit:5
            InitialLimit:1
            ConnectionWaitTimeout:120
            InactivityTimeout:180
            ValidateConnection:true
        </value>
    </property>
</bean> 
```

如果有人可以提供任何相同的建议，强烈推荐吗？调整连接池有帮助吗？如果是，是否有任何具体需要调整的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:25:18.997

尝试使用不同的连接池实现并检查是否看到相同的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:23:30.737

试试这个作为连接字符串：

```
jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=xyz-01)(PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=xyz-02)(PORT=1521))(LOAD_BALANCE=on))(CONNECT_DATA=(SERVICE_NAME=ABCD))) 
```

并再次测试。

# macos - 尝试在 OSX 上提交时 Git 挂起

> ID：15693124
> 
> 赞同：1
> 
> 时间：2013-03-28T22:15:05.853
> 
> 标签：macos, git

我正在尝试通过发出以下命令来运行提交：

```
 git commit -m "commit message" 
```

终端窗口有时会挂起，我无法找出问题的根源。重新启动计算机后挂起消失，但最终又回来了。

我正在使用 OSX 10.6.8。我在使用其他命令（例如添加、推送）时没有遇到此问题

这种挂起的原因可能是什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:39:36.653

使用 -a 不是一个好主意，因为即使您没有明确添加它们，它也会添加所有文件。

要问的一个问题是，repo 有很多文件吗？

建议只添加您想要的文件。然后就做

```
git commit -m "Hello commit" 
```

# javascript - jQuery 和 JavaScript 数学对象

> ID：15693133
> 
> 赞同：0
> 
> 时间：2013-03-28T22:15:54.733
> 
> 标签：javascript, jquery

我可以将 jQuery 与 JavaScript 的数学库混合以访问详细的函数吗？既然 jQuery 是有效的 JS，那应该没问题吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:23:28.153

jQuery 不会杀死 JavaScript，它是建立在它之上的，你在 JS 中所做的任何事情都可以在 jQuery 框架内工作。

这就是说，`Math`要从 jQuery 中引用对象，您必须使用复杂而晦涩的名称`Math`：P

```
$(function () {

    alert(Math.round(0.5));

}); 
```

# c# - 如何在另一个窗体中创建窗口窗体？

> ID：15693134
> 
> 赞同：3
> 
> 时间：2013-03-28T22:16:14.570
> 
> 标签：c#, c#-4.0, windows-forms-designer

我需要将窗口窗体嵌入到另一个这样的窗体中 ![在此处输入图像描述](../Images/bef06f8b030998e4866fc83279523c7e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:20:36.300

我相信您想查找MDI（多文档界面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T22:25:06.450

以下可能会做你想要的。`ChildForm`是您要放置在其中的表单`ParentForm`。

```
ChildForm.TopLevel = false;
ParentForm.Controls.Add(ChildForm);
ChildForm.Show(); 
```

请注意，您可能必须使用`Location`子窗体的 。

# php - 警告：mysqli_stmt::bind_result()：绑定变量的数量与准备好的语句错误中的字段数量不匹配

> ID：15693135
> 
> 赞同：1
> 
> 时间：2013-03-28T22:16:19.243
> 
> 标签：php, mysqli

我有一个 mysql 查询，我正在将其转换为 mysqli（准备好的语句），但我遇到了一个引发以下错误的问题，

> 警告：mysqli_stmt::bind_result()：绑定变量的数量与准备好的语句中的字段数量不匹配

mysql代码

```
$random_name_generated = vpb_generate_random_name().'.jpg'; //Generated name for uploaded files or images

if (move_uploaded_file($_FILES['file_to_upload']['tmp_name'], $final_uploads_location)) {
    $check_empty_field = mysql_query("select * from `vpb_uploads` where `username` = '".mysql_real_escape_string(strip_tags($username))."'  and `firstname` = '".mysql_real_escape_string("")."' and `lastname` = '".mysql_real_escape_string("")."'");
    if (mysql_num_rows($check_empty_field) < 1) {
        mysql_query("insert into `vpb_uploads` values('', '".mysql_real_escape_string($username)."', '', '', '".mysql_real_escape_string($random_name_generated)."', '', '', '', '', '".mysql_real_escape_string(date("d-m-Y"))."')");

        $identity = "image_one";
    } else {
        $get_empty_field = mysql_fetch_array($check_empty_field);
        $image_one = strip_tags($get_empty_field["image_one"]);
        $image_two = strip_tags($get_empty_field["image_two"]);
        $image_three = strip_tags($get_empty_field["image_three"]);
        $image_four = strip_tags($get_empty_field["image_four"]);
        $image_five = strip_tags($get_empty_field["image_five"]);
        global $identity; 
```

以下是我尝试过的，即使它不起作用。我已经知道它不会起作用，但我想在问问题之前自己尝试一下。错误来自`$get_empty_field = $stmt->bind_result($stmt);`

```
if (move_uploaded_file($_FILES['file_to_upload']['tmp_name'], $final_uploads_location)) {
    $firstname = '""';
    $lastname = '""';
    $stmt = $mysqli->prepare("select * from `vpb_uploads` where `username` = ?  and `firstname` = ? and `lastname` = ?");
    $stmt->bind_param('sss', $username, $firstname, $lastname);
    $stmt->execute();
    $stmt->store_result();
    if ($stmt->num_rows < 1) {
        $date = 'date("d-m-Y")';
        $image_2 = "''";
        $image_3 = "''";
        $image_4 = "''";
        $image_5 = "''";
        $stmt = $mysqli->prepare("insert into `vpb_uploads` (`username`, `firstname`, `lastname`, `image_one`, `image_two`, `image_three`, `image_four`, `image_five`, `date`) values(?,?,?,?,?,?,?,?,?)");
        $stmt->bind_param('sssssssss', $username, $firstname, $lastname, $random_name_generated, $image_2, $image_3, $image_4, $image_5, $date);
        $stmt->execute();
        $stmt->close();

        $identity = "image_one";
    } else {
        $get_empty_field = $stmt->bind_result($stmt);
        $image_one = strip_tags($get_empty_field["image_one"]);
        $image_two = strip_tags($get_empty_field["image_two"]);
        $image_three = strip_tags($get_empty_field["image_three"]);
        $image_four = strip_tags($get_empty_field["image_four"]);
        $image_five = strip_tags($get_empty_field["image_five"]);
        global $identity; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T22:19:14.817

你需要改变

```
$get_empty_field = $stmt->bind_result($stmt); 
```

至

```
$get_empty_field = $stmt->bind_result($field1, $field2, $field3); 
```

变量的数量`$fieldx`等于所选字段的数量。如果你不知道有多少，使用这个：

```
 // Throw an exception if the result metadata cannot be retrieved
  if (!$meta = $stmt->result_metadata())
  {
    throw new Exception($stmt->error);
  }

  // The data array
  $data = array();

  // The references array
  $refs = array();

  // Iterate over the fields and set a reference
  while ($name = $meta->fetch_field())
  {
    $refs[] =& $data[$name->name];
  }

  // Free the metadata result
  $meta->free_result();

  // Throw an exception if the result cannot be bound
  if (!call_user_func_array(array($stmt, 'bind_result'), $refs))
  {
    throw new Exception($stmt->error);
  } 
```

然后您在获取后使用`$data['field']`;访问结果

# iphone - iPhone - iPhone 设备上的 GLKit 绘制方法太慢

> ID：15693138
> 
> 赞同：0
> 
> 时间：2013-03-28T22:16:27.170
> 
> 标签：iphone, objective-c, xcode, glkit

**解决方案：**我之前设置了所有纹理一次，而不是每一帧，我为 GLKBaseEffect 做了同样的事情并修复了它！:D

* * *

好的，我非常需要解决这个问题的帮助，因为它会导致很多问题。

我正在创建一个游戏引擎，所以基本上是它的物理渲染和游戏循环等。每当我在模拟器上运行这个应用程序时，它运行平稳快速，基本上没问题。但是，当我在我的 iPhone 3GS 上部署该应用程序（越狱以将其用于开发）时，它运行非常缓慢。该实体移动得非常慢，而且它的动作非常不平稳，不平滑。它有点向前跳跃。

我正在使用 GLKViewController 来绘制和更新游戏。

我发现如果我减少屏幕上的实体并且不为其图像设置动画，平滑度会提高，但是移动实体仍然非常缓慢，这不是解决方案，因为我不能只玩一个游戏里面的对象……</p>

有谁知道我怎样才能让它在我的 iPhone 上以相同的速度平稳运行？请帮助，过去两天我一直在尝试解决这个问题（字面上是 48 小时的最佳部分）

vvv 所有代码 vvv

这是自定义的 GLKViewController 类：

```
#import "RWViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface RWViewController()
@property (strong, nonatomic) EAGLContext *context;
@end

@implementation RWViewController
@synthesize context = _context;
@synthesize rwEngine;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if(!self.context)
        NSLog(@"Failed To Create ES Context");

    GLKView *view = (GLKView *) self.view;
    self.preferredFramesPerSecond = 60;
    view.enableSetNeedsDisplay = true;
    view.context = self.context;
    [EAGLContext setCurrentContext:self.context];
    rwEngine = [[RWEngine alloc] ignition];
}

#pragma mark - GLKViewDelegate

-(void) glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(104.0/255.0, 0, 0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);    
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);

    [rwEngine draw];
}

- (void)update {
    [rwEngine update];
}

@end 
```

这是 rwEngine 类代码：

```
#import "RWEngine.h"

@implementation RWEngine

TestWorld *  world;

-(RWEngine *) ignition
{
    //Game Loop Tick Set to ~60 fps

    world = [[TestWorld alloc] load];
    return self;
}

-(void)update
{
    [[self getActiveWorld] update];
}

-(void)draw
{
    [[self getActiveWorld] draw];
}

-(NSMutableArray *) getWorlds
{

}

-(World *) getActiveWorld
{
    return world;
}

@end 
```

绘图路径为 ViewController>Engine>World>Room>Entity

这是实体绘制方法：

```
-(void) draw
{
    CGPoint drawPoint = (self.room == nil) ? self.location : CGPointMake(self.location.x - self.room.viewPoint.x, self.location.y - self.room.viewPoint.y);
    if(isAnimated)
    {
        SpriteInfo * frame = [[self getAnimation] getCurrentFrame];
        [RWImageRenderer renderSprite:frame.imageName position:drawPoint spritePosition:frame.spritePosition spriteDimensions:frame.spriteSize];
    }

    else if(!isAnimated)
    {

        SpriteInfo * spriteInfo = [self getSprite];
        NSString * imageName = spriteInfo.imageName;
        CGSize spriteSize = spriteInfo.spriteSize;
        CGPoint spritePosition = spriteInfo.spritePosition;

        [RWImageRenderer renderSprite:imageName position:drawPoint spritePosition:spritePosition spriteDimensions:spriteSize];
    }
} 
```

这是 RWImageRenderer 代码：

```
+(void)renderSprite:(NSString *)filePath position:(CGPoint) position spritePosition:(CGPoint)spriteP spriteDimensions:(CGSize)spriteD
{
    [self renderSpriteWithRotation:filePath position:position spritePosition: spriteP spriteDimensions:spriteD rotationOrigin:CGPointMake(0, 0) rotationDegrees:0];
}

+(void)renderSpriteWithRotation:(NSString *)filePath position:(CGPoint) position spritePosition:(CGPoint)spriteP spriteDimensions:(CGSize)spriteD rotationOrigin:(CGPoint) origin rotationDegrees:(int) degrees
{
    NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithBool: YES], GLKTextureLoaderOriginBottomLeft, nil];

    NSError * error;
    NSString * path = [[NSBundle mainBundle] pathForResource:filePath ofType:nil];

    GLKTextureInfo * textureInfo = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];

    NSInteger spriteWidth, spriteHeight;
    spriteWidth = (spriteD.width == -1 && spriteD.height == -1) ? textureInfo.width : spriteD.width;
    spriteHeight = (spriteD.width == -1 && spriteD.height == -1) ? textureInfo.height : spriteD.height;

    GLKBaseEffect* effect = [[GLKBaseEffect alloc] init];    
    effect.transform.projectionMatrix = GLKMatrix4MakeOrtho(0, 480, 320, 0, -1024, 1024);

    if(textureInfo == nil)
    {
        NSLog(@"Error Loading image: %@", [error localizedDescription]);
        return;
    }

    float spriteX = spriteP.x / textureInfo.width;
    float spriteY = spriteP.y / textureInfo.height;
    float textureWidth = ((float)spriteWidth) / textureInfo.width;
    float textureHeight = ((float)spriteHeight) / textureInfo.height;

    VertexQuad quad;

    if(degrees != 0)
    {
        quad.tl.positionVertex = [self rotatePoint:CGPointMake(position.x, position.y) origin:origin angleofRotation:degrees];
        quad.tr.positionVertex = [self rotatePoint:CGPointMake(position.x+spriteWidth, position.y) origin:origin angleofRotation:degrees];
        quad.bl.positionVertex = [self rotatePoint:CGPointMake(position.x, position.y + spriteHeight) origin:origin angleofRotation:degrees];
        quad.br.positionVertex = [self rotatePoint:CGPointMake(position.x+spriteWidth, position.y + spriteHeight) origin:origin angleofRotation:degrees];

        //quad.tr.positionVertex = CGPointMake(position.x+spriteWidth, position.y);
        //quad.bl.positionVertex = CGPointMake(position.x, position.y + spriteHeight);
        //quad.br.positionVertex = CGPointMake(position.x+spriteWidth, position.y + spriteHeight);
    }
    else if(degrees == 0)
    {
        quad.tl.positionVertex = CGPointMake(position.x, position.y);
        quad.tr.positionVertex = CGPointMake(position.x+spriteWidth, position.y);
        quad.bl.positionVertex = CGPointMake(position.x, position.y + spriteHeight);
        quad.br.positionVertex = CGPointMake(position.x+spriteWidth, position.y + spriteHeight);
    }
    quad.tl.textureVertex = CGPointMake(spriteX, 1 - spriteY);
    quad.tr.textureVertex = CGPointMake(spriteX + textureWidth, 1 - spriteY);
    quad.bl.textureVertex = CGPointMake(spriteX, 1 - spriteY - textureHeight);
    quad.br.textureVertex = CGPointMake(spriteX + textureWidth, 1 - spriteY - textureHeight);

    effect.texture2d0.name = textureInfo.name;
    effect.texture2d0.enabled = YES;

    [effect prepareToDraw];

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    long offset = (long)&quad;
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(ImageVertex), (void *) (offset + offsetof(ImageVertex, positionVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(ImageVertex), (void *) (offset + offsetof(ImageVertex, textureVertex)));

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:35:16.837

您应该只加载一次纹理，然后在绘制时使用对 GLKTextureInfo 的引用。为每次平局调用这条线一定会扼杀你的表现：

```
GLKTextureInfo * textureInfo = [GLKTextureLoader textureWithContentsOfFile:path         options:options error:&error]; 
```

# android - Android get 请求返回不完整的数据

> ID：15693140
> 
> 赞同：0
> 
> 时间：2013-03-28T22:16:38.330
> 
> 标签：android, http-get

正如标题所述，我在 android 中使用 httpget，它的工作原理。但是，它返回的数据不完整。该调用返回大约 99kb 的 json 数据。但是，我的函数只产生 38kb 并且 json 字符串不完整。

我根本没有收到任何错误，所以很难看出它为什么会发生。

尺寸测量只是我在浏览器中进行调用并将输出保存到文件，并对函数的输出执行相同操作。

这是获取网址的代码：

```
public String getpage2(){
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(this.request);
    HttpResponse response = null;
    try {
        response = client.execute(request);
    } catch (ClientProtocolException e2) {
        // TODO Auto-generated catch block
        Log.e("getpage",e2.toString());
        e2.printStackTrace();
    } catch (IOException e2) {
        // TODO Auto-generated catch block
        Log.e("getpage",e2.toString());
        e2.printStackTrace();
    }

    String html = "";
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        StringBuilder builder = new StringBuilder();
        for (String line = null; (line = reader.readLine()) != null ; ) {
            builder.append(line).append("\n");
        }
        html = builder.toString();
        Log.d("nr",builder.capacity() + "/" + builder.length());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.e("getpage",e.toString());
        e.printStackTrace();
    }finally{

    }
    return html;
} 
```

任何帮助，将不胜感激。我很茫然...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:10:06.370

您可以尝试使用此方法逐字复制数据，而不必担心缺少 EOL：

```
StringBuilder sb = new StringBuilder();
int len;
char[] buf = new char[20];
while((len = reader.read(buf)) != -1) {
    sb.append(buf, 0, len);
} 
```

# express - express.js：是否支持请求和响应对象的“app”属性？

> ID：15693143
> 
> 赞同：1
> 
> 时间：2013-03-28T22:16:45.607
> 
> 标签：express

我发现 express 中的请求和响应对象具有`app`引用它们所属的 express 应用程序的属性。

该属性是否被视为 API 的稳定部分，或者它可能会在未来的某个版本中消失？[API 文档](http://expressjs.com/api.html)根本没有提到该属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:22:31.973

不知道你在这里找什么。它没有正式记录。需要使用它是一个很好的迹象，表明您的设计是紧密耦合的。它可能会在未来的版本中消失吗？是的，你知道，一切（尤其是节点库）都是如此。如果您正在等待 TJ 出现并祝福它成为 X 年内不会改变的官方 API，那么您可能会等待很长时间。如果您需要它，请使用它。如果它在未来消失，请相应地调整。如果您计划在`req.app`应用程序的数百个地方使用，那么重新设计很有可能会消除这种需求。

# java - 为 Java 应用程序创建许可证文件？

> ID：15693144
> 
> 赞同：2
> 
> 时间：2013-03-28T22:16:46.830
> 
> 标签：java, security, authentication, cryptography, licensing

我有兴趣创建一个许可文件来验证 Java 应用程序的使用。如果未找到许可证或许可证无效，应用程序将打开并显示一个窗口。我还想创建一个许可证生成器程序，我可以使用它（可能很明显）来创建许可证文件。我不知道该怎么做，有人对我应该去哪里或我应该看的 API 有指导吗？提前致谢。

PS 我不感兴趣将其用于产品的正式发布，我通常对它们的创建方式感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T22:35:40.597

在搜索几乎相同的“问题”时，我发现了这个开源项目：

[NWTS 许可证管理器](http://java.nicholaswilliams.net/LicenseManager/)

使用这个库，我创建了自己的许可证生成器并在我的应用程序中实现了许可证检查。作品！

还有很好的文档和示例，可以清楚地说明它是如何工作的。

# jquery - JavaScript 确认正在自动发布表单

> ID：15693149
> 
> 赞同：4
> 
> 时间：2013-03-28T22:17:01.370
> 
> 标签：jquery, asp.net-mvc

我有一个部分视图，其中包含用于上传文件的文件输入。此视图上的用户将从他们的工作站中选择一个文件并单击上传按钮。上传点击将表单提交给一个动作方法，文件被解析并返回相同的视图以自动填充视图上的一些字段。

一切照原样，运行良好。我正在向现有视图添加一个新要求，如下所示：

**要求**

用户选择一个文件并单击上传按钮。单击上传按钮后，将向用户显示一个 JavaScript 确认对话框，其中包含两个按钮选项，然后将表单提交给控制器操作方法。这些按钮是“Buffer Run Parsing”和“Normal Parsing”。单击这些按钮中的任何一个都将发布到控制器操作方法。

在发布后的控制器操作方法中，我的目标是捕获他们按下的按钮，并根据按下的按钮相应地选择文件解析逻辑。

**问题**

我创建了一个 JavaScript 函数，它确实显示了两个按钮，但对话框自动消失并且表单发布到控制器。我希望它不会发布，直到我单击任一按钮进行确认。

这是我正在做的事情：

**主视图：**

```
@using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data"}))
{
    <div id="main">
        @Html.Partial("_RunLogEntryPartialView", Model)
    </div>
} 
```

**局部视图：**

```
<button name="submit" class="art-button" type="submit" value="Upload" onclick="initUploadDailog();return false;"
    style="width: 100px">
    Upload</button>

<div id="uploadConfirmation" style="font-size: 10px; font-weight: normal; overflow: scroll;
    width: 800px; height: 450px; display: none;">
</div> 
```

**JS功能：**

```
 function initUploadDailog(e) {
        currentForm = $(this).closest('form');
        UploadDialog = $("#uploadConfirmation").dialog({
            modal: true,
            width: 400,
            autoOpen: true,
            title: 'Please select parsing type for Test Completed Computation',
            buttons: {
                "Normal Parsing": function () {
                    $("#hiddenInput").val("Normal");
                    alert(currentForm.innerHtml());
                    currentForm.submit();
                },
                "Buffer Parsing": function () {
                    $("#hiddenInput").val("Buffer Run");
                    currentForm.submit();
                }
            }
        });
    } 
```

**控制器：**

```
 [HttpPost]
        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Create(RunLogEntry runLogEntry, String ServiceRequest, string Hour, string Minute, string AMPM,
                                     string submit, IEnumerable<HttpPostedFileBase> file, String AssayPerformanceIssues1, List<string> Replicates)
        {
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T03:01:27.520

**恭喜！您遇到了一个非常晦涩难懂的错误并且很难排除故障！**

问题在于您的标记；你的按钮有属性`name="submit"`。删除它，如图所示：

```
<button class="art-button" type="submit" value="Upload" onclick="initUploadDailog();return false;" style="width: 100px">Upload</button> 
```

当您调用 时`currentForm.submit()`，它**不是**调用本机`form.submit()`函数；它正在**尝试将按钮元素用作功能**！

这是您的代码的[有效jsFiddle](http://jsfiddle.net/zarDj/)。

* * *

一点点历史：由于万能的 Internet Explorer，具有`name`属性集的元素会自动转换为可通过 JavaScript 直接访问的对象（或子对象）。这最初是 IE 团队几年前想到的（虽然没有遵循 JavaScript/EMC 标准），并且由于大量的遗留网站，WebKit（Chrome、Safari）和 Gecko（Firefox）已经实现了相同的*破坏*行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:24:48.700

您需要做几件事。

首先，设置`Modal`为真。False 表示它不会阻止用户点击页面上除框外的其他内容。

其次，您需要将`onclick`提交按钮上的更改为包含`;return false;` 它应该为`onclick=initUploadDailog();return false;"` 这将防止表单在单击提交按钮后简单地提交。

第三，一旦选择了适当的按钮，对话框本身就需要提交表单。请参见此处：[jquery 对话框：确认单击提交按钮](https://stackoverflow.com/questions/2881706/jquery-dialog-confirm-the-click-on-a-submit-button)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T00:44:47.500

我看到了 2 个解决方案。首先，如果您只想按原样使用所有内容，请尝试将您的更改`onclick="initUploadDailog();return false;"`为`onclick="return initUploadDailog();"`. 然后我认为您的浏览器会在发布表单之前等待返回 true 或 false。

但是，如果您想按照预期的方式使用 jQuery，您将需要查看 jQuery 的[event.preventDefault()](http://api.jquery.com/event.preventDefault/)。首先，给你的按钮一个 ID，比如`id="art-button"`. 接下来，将您的函数更改为绑定到按钮单击（我喜欢使用 .bind 与 .click 以实现浏览器兼容性）。

改变这个：

```
function initUploadDailog(e) {
    // Your code
} 
```

对此：

```
$("#art-button").bind('click', function(e) {
    e.preventDefault();
    // Your code
    $("#form-id").submit();
}); 
```

您还可以绑定到实际的表单提交，防止默认，并使用 AJAX 发布您的数据。

# ios - iOS：自定义 UIViewController 包含中的按钮事件不起作用

> ID：15693150
> 
> 赞同：1
> 
> 时间：2013-03-28T22:17:05.160
> 
> 标签：ios, button, uiviewcontroller, containment

我正在实现一个自定义 UIViewController 包含。

我还在层次结构中向子视图控制器的视图添加按钮。

问题是当按钮位于层次结构中的子视图控制器中时，按钮事件永远不会触发。它们仅在放置在根级别以下一级 - parentTopVc 时才有效。

架构是这样的：

根在：self.window.rootViewController = rootVc

等级制度：

0-----rootVc

1-----------parentTopVc <--- 按钮事件触发

2----------------------firstTopVc <--- 按钮事件不会触发

2---------------------secondTopVc <--- 按钮事件不会触发

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions (NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UIViewController *rootVc;
UIViewController *parentTopVc;
UIViewController *firstTopVc;
UIViewController *secondTopVc;

rootVc = [UIViewController new];
self.window.rootViewController = rootVc;

parentTopVc = [UIViewController new];
[rootVc addChildViewController:parentTopVc]; 

[parentTopVc didMoveToParentViewController:rootVc];
//
parentTopVc.view.translatesAutoresizingMaskIntoConstraints = NO;
[rootVc.view addConstraint:
[NSLayoutConstraint
constraintWithItem:parentTopVc.view attribute:NSLayoutAttributeCenterX
relatedBy:0
toItem:rootVc.view attribute:NSLayoutAttributeCenterX
multiplier:1 constant:0]];

[rootVc.view  addConstraint:
[NSLayoutConstraint
constraintWithItem:parentTopVc.view attribute:NSLayoutAttributeTop
relatedBy:0
toItem:rootVc.view  attribute:NSLayoutAttributeTop
multiplier:1 constant:50]];

[rootVc.view  addConstraint:
[NSLayoutConstraint
constraintWithItem:parentTopVc.view attribute:NSLayoutAttributeLeft
relatedBy:0
toItem:rootVc.view  attribute:NSLayoutAttributeLeft
multiplier:1 constant:0]];
[rootVc.view  addConstraint:
[NSLayoutConstraint
constraintWithItem:parentTopVc.view attribute:NSLayoutAttributeRight
relatedBy:0
toItem:rootVc.view  attribute:NSLayoutAttributeRight
multiplier:1 constant:0]];

[parentTopVc.view addConstraint:
[NSLayoutConstraint
constraintWithItem:parentTopVc.view attribute:NSLayoutAttributeHeight
relatedBy:0
toItem:nil attribute:0
multiplier:1 constant:200]];

[rootVc.view addSubview: parentTopVc.view];
parentTopVc.view.backgroundColor = [UIColor clearColor];

firstTopVc = [UIViewController new];
secondTopVc = [UIViewController new];

[parentTopVc addChildViewController:childVc];
UIView* childVcInnerFrame = [[UIView alloc] initWithFrame:CGRectMake(xc,
                                                                   yc,
                                                                   wc,
                                                                   hc)]; //x, y, w, h
[childVc.view addSubview: childVcInnerFrame];

firstTopVc.view.translatesAutoresizingMaskIntoConstraints = NO;

[parentTopVc.view  addConstraint:
[NSLayoutConstraint
constraintWithItem:firstTopVc.view attribute:NSLayoutAttributeCenterX
relatedBy:0
toItem:parentTopVc.view  attribute:NSLayoutAttributeCenterX
multiplier:1 constant:0]];

[parentTopVc.view  addConstraint:
[NSLayoutConstraint
constraintWithItem:firstTopVc.view attribute:NSLayoutAttributeTop
relatedBy:0
toItem:parentTopVc.view  attribute:NSLayoutAttributeTop
multiplier:1 constant:0]];

// activate
[parentTopVc.view addSubview: firstTopVc.view];
[firstTopVc didMoveToParentViewController:parentTopVc];         

UIView *parentTopVcBtnViewsLevel1frame = [UIView new];

// add view to root
[parentTopVcInnerframeLevel1 addSubview: parentTopVcBtnViewsLevel1frame];

UIView *vtemp1;
vtemp1 = [UIView new];

[parentTopVcBtnViewsLevel1frame addSubview: vtemp1];

vtemp1.translatesAutoresizingMaskIntoConstraints = NO;

[parentTopVcBtnViewsLevel1frame addConstraint:
[NSLayoutConstraint
constraintWithItem:vtemp1 attribute:NSLayoutAttributeLeft
relatedBy:0
toItem:parentTopVcBtnViewsLevel1frame attribute:NSLayoutAttributeLeft
multiplier:1 constant:10]];

[parentTopVcBtnViewsLevel1frame addConstraint:
[NSLayoutConstraint
constraintWithItem:vtemp1 attribute:NSLayoutAttributeTop
relatedBy:0
toItem:parentTopVcBtnViewsLevel1frame attribute:NSLayoutAttributeTop
multiplier:1 constant:10]];

//v1: W
[vtemp1 addConstraint:
[NSLayoutConstraint
constraintWithItem:vtemp1 attribute:NSLayoutAttributeWidth
relatedBy:0
toItem:nil attribute:0
multiplier:1 constant:w]];

//v1: H
[vtemp1 addConstraint:
[NSLayoutConstraint
constraintWithItem:vtemp1 attribute:NSLayoutAttributeHeight
relatedBy:0
toItem:nil attribute:0
multiplier:1 constant:h]];

// button
btnInView = [UIButton buttonWithType:UIButtonTypeCustom]; //
[btnInView setBackgroundColor:[UIColor clearColor]];
btnInView.showsTouchWhenHighlighted=YES;

[btnInView setFrame: CGRectMake(0,0,w,h)]; // set up frame
[vtemp1 addSubview:btnInView]; // place button in view

[btnInView addTarget:self action:@selector(doShowNextTopVc:)
forControlEvents:UIControlEventTouchUpInside];

}

//
-(void) doShowNextTopVc:(UIButton *)paramSender{
NSLog(@"doShowNextTopVc: %@", @"START <==");
} 
```

doShowNextTopVc 从不触发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:01:37.833

我有一种预感，您的触摸事件不会通过您的子根级别视图控制器，因为您没有在自定义容器中正确使用它们。您的 ViewController 指针也可能在`didFinishLaunchingWithOptions:`完成后未保留。如果不提供更多代码，就无法知道。

**[编辑]**我正在根据我通过评论找到的内容来澄清我的答案。

1.  如果没有更多代码和对应用程序如何编写、编译和运行的更深入了解，我/我们无法帮助原始海报。下面的评论概述了一些已经提出的问题。
2.  目前尚不清楚 AppDelegate 代码是如何生成的，因为原始发帖人提到他/她不能完整地发布它，并且它是自动生成的。
3.  提供的代码中存在未提供指针声明的变量。它们是：`childVC`、`parentTopVCInnerframeLevel1`和`btnInView`。`btnInView`完成后可能不会保留`didFinishLaunchingWithOptions:`，这可能是问题的一部分。
4.  提供的源代码似乎不必要地调用`didMoveToParentViewController:`. 这里没有 UIViewController 子类，因此不需要调用它。尝试删除它。同样，尚不清楚 AppDelegate 代码是如何创建或编写的，或者原始发布者是否真的可以做到这一点。

最后 ....

如果您想要一个自定义视图控制器容器类，我会考虑阅读 Apple 的 View Controller Programming Guide：

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

我肯定会阅读左侧标题为“**创建自定义容器视图控制器”的部分以及标题为“****实现自定义容器视图控制器**”的子部分

# vim - X 括号之间的 VIM 删除

> ID：15693152
> 
> 赞同：2
> 
> 时间：2013-03-28T22:17:09.910
> 
> 标签：vim

我正在尝试在 VIM 中映射 Ctrl-y 以删除它在从光标下开始匹配的括号之间找到的任何内容。它有效，但它也删除了括号。这是我目前正在使用的：

```
imap <c-y> <Esc><Right>d%<Insert> 
```

这很好用，除了我说它也删除了光标下的内容（即匹配的括号）。我确实找到了这个：

```
diX 
```

`X`成为您正在寻找的支架；`[`, `(`,`'`等

该`i`命令的问题是我不想为我定期执行此操作的每个括号映射一个新键，我喜欢`%`它匹配光标下的任何内容，`s`甚至是一个字母。

有什么办法可以保留括号吗？

**编辑：**对不起，一个例子。我有以下文本示例，（* 代表光标）：

```
(*text to be erased between brackets)
"*text to be erased between brackets"
'*text to be erased between brackets'
[*text to be erased between brackets]
{*text to be erased between brackets} 
```

基本上在每个示例中，我希望我的光标位于相关括号的顶部，然后当我点击`Ctrl-y`它时，它会从插入模式移动到普通模式，删除**所有**文本或光标下括号之间的任何内容（在那个点下因为我移动到正常模式然后`<Right>`）到同一个括号的下一个。

所以上面所有的都会变成：

```
()
""
''
[]
{} 
```

无需卸下周围的支架。随着`d%`括号被删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T06:48:34.987

不，`%`仅匹配一对的另一半，并且字母字符（例如`s`不要成对出现）：您只能使用`(){}[]''""<>`.

此外，编辑是在*正常*模式下完成的，而不是*插入*模式。

在正常模式下，一种可能的顺序是`v%holc`：

```
" []: normal mode cursor, |: insert mode cursor

[(]foo bar baz)
[(foo bar baz)]
[(foo bar baz])
([foo bar baz])
(|) 
```

因此，以下映射应满足您的需求：

```
nnoremap <C-y> v%holc 
```

扩展此映射以使其适用于*任何*字符将不那么简单。

我应该补充一点`ci(`，朋友并不像你想象的那样繁重。

***编辑***

以下功能（以及相关的正常模式映射）不是很聪明，但完全符合您的要求；随意修改它。它是这样工作的：

*   如果您点击`<C-y>`a `({[<`，当前字符与其兄弟 ( `>]})`) 之间的文本将被删除，您将进入插入模式。

*   如果您点击`<C-y>`任何其他字符，则当前字符与其在该行中的下一个出现之间的文本将被删除，您将进入插入模式。

功能：

```
function! InPair()

  let l:this_char = getline('.')[col('.')-1]

  if this_char == '{' || this_char == '(' || this_char == '[' || this_char == '<'
    execute "normal! di" . this_char
  else
    execute "normal! ldt" . this_char
  endif

  startinsert

endfunction 
```

映射：

```
nnoremap <C-y> :call InPair()<CR> 
```

它绝不是完美的，但它应该提供一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-11T19:23:08.093

请参阅**:help visual-operators**。即，**v_iB**选择括号 {} 之间的所有文本。所以**viBd**会删除 2 {} 之间的所有文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:42:30.030

让我们举个例子，我没有很清楚地告诉你...... :(

你有这个（* 是光标），你当前的映射将改变：

```
(foo*bar)

into         

*ar) 
```

但你希望它是：

```
(*ar) (back to INSERT mode) 
```

那么你可以这样做：

```
imap <c-y> <Esc>lv%ls 
```

它将首先视觉选择到左括号，然后向右移动，这样括号以后不会被删除，然后`s`将删除视觉选择并返回插入模式。

**哦**，我又看了你的问题，看来你想要：

```
*bar) ( INSERT mode) 
```

那么就更容易了：（仍然基于您当前的映射）

```
 imap <c-y> <Esc>c% 
```

顺便说一句，如果你想拥有`(*bar) (INSERT mode)`：（你真的应该在你的问题中举一个例子...... ^_^）

```
imap <c-y> <Esc>v%lc 
```

# dotcloud - 在 Docker 中将目录从主机安装到容器

> ID：15693153
> 
> 赞同：56
> 
> 时间：2013-03-28T22:17:12.170
> 
> 标签：dotcloud, docker

如何将目录从主机挂载到 Docker 中的容器？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-09-27T19:47:31.740

就像最后一次更新一样，这个功能现在在 Docker 中发布（尽管 API 在@imiric 链接的拉取请求之后发生了变化）。

只需使用类似的命令

```
docker run -v /tmp:/root myImage 
```

为了像在映像中`/tmp`那样从主机安装。`/root`

来源：[https ://docs.docker.com/engine/userguide/dockervolumes/](https://docs.docker.com/engine/userguide/dockervolumes/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-28T22:42:46.153

***更新 - 请参阅下面的答案。这不再是正确答案 ***

您无法按设计安装它们，因为 Docker 不再保证可重复的执行环境。

但是，您可以：

1.  导入主机的根文件系统并从中创建一个新映像：

    ```
    tar -C / -c . | docker import - entend/custombase 
    ```

2.  导入引导根文件系统，例如运行“debootstrap”的结果。（请注意，这是官方“基础”映像的创建方式，因此您最好只运行“docker pull base”）

    ```
    debootstrap precise ./bootstrap
    tar -C ./bootstrap -c . | docker import - entend/ubuntubase 
    ```

3.  运行时将本地目录的内容注入到容器中。

    ```
    IMAGE=base; SRC=./stuff; DST=/tmp/stuff; CMD="echo hello world"; tar -C $src -c . | docker run $IMAGE -i /bin/sh -c "tar -C $DST -x; $CMD" 
    ```

    这将从 $IMAGE 运行一个容器，将主机目录 $SRC 复制到容器目录 $DST 中，然后运行命令 $CMD。

    最后一个示例通常用于在容器内运行构建命令之前插入源代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-24T20:34:53.257

只是为了更新这个问题，这将很快在 Docker 中成为可能。

[这个pull request](https://github.com/dotcloud/docker/pull/602)其实已经实现了这个特性，很快会合并到master。

[如果你安装了这个 fork](https://github.com/gabrtv/docker/tree/111-bind-mounts)，你现在就可以使用它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-26T22:04:11.673

这在**Docker**中是可能的：

将数据挂载到应用程序容器中：

```
docker run -t -i -rm -volumes-from DATA -name client1 ubuntu bash 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-06T09:14:12.687

### 适用于 OS X 和 Windows 的技巧

两个连续的安装：我猜这里的很多帖子可能使用了两个 boot2docker。您看不到任何内容的原因是您正在从 boot2docker 挂载一个目录，而不是从您的主机挂载。您基本上需要两个连续的挂载：第一个将目录从主机挂载到系统，第二个将新目录从 boot2docker 挂载到容器，如下所示：

1.  在 boot2docker 上挂载本地系统：

    ```
     sudo mount -t vboxsf hostfolder /boot2dockerfolder 
    ```

2.  在 Linux 容器上挂载 boot2docker 文件

    ```
     docker run -v /boot2dockerfolder:/root/containerfolder -i -t imagename 
    ```

然后，当您`ls`在 containerfolder 中执行操作时，您将看到主机文件夹的内容

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-30T23:12:56.180

## 2021 年 7 月更新

**Dockerfile 解决方案**

添加以下行，`Dockerfile`将数据从主机复制到创建的映像（容器）。

```
# Other lines of Dockerfile
COPY <relative-or-absolute-path-of-the-directory-in-host-machine> <relative-or-absolute-path-of-the-directory-in-container>
# Example:
# COPY ./redis/data/:/db_data 
```

**PS**：容器是一个正在运行的图像。

**Docker-compose 解决方案**

卷可以在 docker-compose 文件中以各种方式定义。其中之一是将主机的目录地址挂载到容器中。（就像我们在 dockerfile 解决方案中所拥有的一样）作为您服务的一部分：

```
volumes:
    - <relative-or-absolute-path-of-the-directory-in-host-machine>:<relative-or-absolute-path-of-the-directory-in-container> 
```

# arrays - as3如何从重置数组中删除/移动图形的位置

> ID：15693154
> 
> 赞同：0
> 
> 时间：2013-03-28T22:17:13.253
> 
> 标签：arrays, actionscript-3, graphics, for-loop

我正在尝试重置场景并将所有东西移动到其原始位置重置功能重置阵列将颈背体添加回舞台并附加图形但原始图形仍然在舞台上重置时的任何位置被称为

```
private var brickGraphic:MovieClip = new Brick();
private var brick:Body;
private var brickArray:Array;

private function setUp():void
{
    brickArray = new Array  ;

    for (var i:int = 0; i < 10; i++)
    {
        var brick:Body = new Body(BodyType.DYNAMIC);
        var brickShape:Polygon = new Polygon(Polygon.box(10,25));
        var brickGraphic = new Brick();
        brickGraphic.width = 10;
        brickGraphic.height = 25;
        addChild(brickGraphic);
        brickGraphic.cacheAsBitmap = true;
        brick.shapes.add(brickShape);
        brick.position.setxy(450, ((ag ) - 30 * (i + 0.5)));
        brick.angularVel = 0;
        brick.shapes.at(0).material.elasticity = .5;
        brick.shapes.at(0).material.density = 150;
        brick.cbTypes.add(brickType);
        brick.space = space;
        brickGraphic.stop();
        brick.userData.sprite = brickGraphic;
        brick.userData.sprite.x = brick.position.x;
        this.brickArray.push(brick);
    }

    private function reset():void
    {
        if (contains(brickGraphic)) removeChild(brickGraphic);
        space.clear();
        setUp();
    }
} 
```

这是我在这个应用程序上遇到的最后一个问题，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:39:22.327

那是因为你没有用`removeChild`.

您需要为添加到舞台`removeChild`的每个对象调用。`brickGraphic`

就像是 ：

```
private function setUp():void
{
    brickArray = [];

    for (var i:int = 0; i < 10; i++)
    {
        var brick:Body = new Body(BodyType.DYNAMIC);
        var brickShape:Polygon = new Polygon(Polygon.box(10,25));
        var brickGraphic = new Brick();
        brickGraphic.width = 10;
        brickGraphic.height = 25;
        addChild(brickGraphic);
        brickGraphic.cacheAsBitmap = true;
        brick.shapes.add(brickShape);
        brick.position.setxy(450, ((ag ) - 30 * (i + 0.5)));
        brick.angularVel = 0;
        brick.shapes.at(0).material.elasticity = .5;
        brick.shapes.at(0).material.density = 150;
        brick.cbTypes.add(brickType);
        brick.space = space;
        brickGraphic.stop();
        brick.userData.sprite = brickGraphic;
        brick.userData.sprite.x = brick.position.x;
        this.brickArray.push(brick);
    }

}

private function removeAllBricks():void
{
    for(var i:int=0; i<brickArray.length; i++)
    {
       var dp:DisplayObject = brickArray[i].userData.sprite as DisplayObject;
       if(dp && dp.parent)
           dp.parent.removeChild(dp);
    }
}

private function reset():void
{
    removeAllBricks();
    space.clear();
    setUp();
} 
```

# java - 使用Netty搭建http代理服务器的简单方法？

> ID：15693158
> 
> 赞同：5
> 
> 时间：2013-03-28T22:17:24.190
> 
> 标签：java, netty

我是 Netty 的新手，正在考虑使用它来制作一个简单的 http 代理服务器，该服务器接收来自客户端的请求，将请求转发到另一台服务器，然后将响应复制回原始请求的响应。一个额外的要求是我能够支持超时，因此如果代理服务器响应时间过长，代理将自行响应并关闭与代理服务器的连接。

我已经使用 Jetty 实现了这样的应用程序，但是对于 Jetty，我需要使用太多线程来防止入站请求被阻塞（这是一个轻量级应用程序，使用很少的内存或 cpu，但代理服务器的延迟是足够高的流量突发导致代理服务器中的排队或需要太多线程）。

根据我的理解，我可以使用 Netty 构建一个管道，其中每个阶段执行少量计算，然后释放它的线程并等待直到数据准备好等待管道中的下一个阶段执行。

我的问题是，是否有此类应用程序的简单示例？到目前为止，我对基本 Netty 教程的服务器代码进行了简单的修改，但它缺乏对客户端的所有支持。我看到了 netty 客户端教程，但不知道如何混合两者的代码来创建一个简单的代理应用程序。

```
public static void main(String[] args) throws Exception {
    ChannelFactory factory =
            new NioServerSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool());

    ServerBootstrap bootstrap = new ServerBootstrap(factory);

    bootstrap.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() {
            return Channels.pipeline(
                    new HttpRequestDecoder(),
                    new HttpResponseEncoder(),
                    /* 
                     * Is there something I can put here to make a
                     * request to another server asynchronously and
                     * copy the result to the response inside
                     * MySimpleChannelHandler?
                     */
                    new MySimpleChannelHandler()
                    );
        }
    });

    bootstrap.setOption("child.tcpNoDelay", true);
    bootstrap.setOption("child.keepAlive", true);

    bootstrap.bind(new InetSocketAddress(8080));
}

private static class MySimpleChannelHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
        HttpRequest request = (HttpRequest) e.getMessage();
        HttpResponse response = new DefaultHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK);
        response.setContent(request.getContent());

        Channel ch = e.getChannel();
        ChannelFuture f = ch.write(response);
        f.addListener(new ChannelFutureListener() {
            public void operationComplete(ChannelFuture future) {
                Channel ch = future.getChannel();
                ch.close();
            }
        });
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
        e.getCause().printStackTrace();

        Channel ch = e.getChannel();
        ch.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:27:39.747

您将不得不查看 [LittleProxy](https://github.com/adamfisk/LittleProxy)以了解他们是如何做到的，因为它是在 Netty 之上编写的。

# signalr - 使用 signalR 广播计时器作业的结果？

> ID：15693162
> 
> 赞同：0
> 
> 时间：2013-03-28T22:17:36.240
> 
> 标签：signalr

我刚刚开始使用 SignalR，我想知道它是否是我正在处理的任务的好工具。

简而言之，我的对象具有随时间变化的属性。计时器作业每隔一段时间就会运行一次以更新这些属性。为了解释起见，假设我有一个带有属性“isExpired”的 MilkJugs，一旦某个 DateTime 被击中，该属性就会发生变化。

当我的 timerjob 碰到 MilkJug 并将其翻转为 isExpired = true 时，我希望所有客户端都能立即收到通知。如果客户在 Chrome 中查看七个 MilkJug，我希望他们看到所有七个 MilkJug 都变黄（或类似的东西）。

我可以使用 signalR 从 timerJob 向客户端“广播”这些通知吗？我刚刚浏览了他们提供的聊天示例，开始工作似乎超级简单......我想我可以做这样的服务器端：

```
public class ChatHub : Hub
{
    public void Send(List<MilkJugUpdate> updates)
    {
        // Call the broadcastMessage method to update milkJugs.
        Clients.All.broadcastMessage(updates);
    }
} 
```

然后客户端只需遍历序列化数组，更新我的 JS viewModels 中的相应字段。

这听起来对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:25:38.380

当然，[ShootR](http://shootr.signalr.net)已经做到了（HTML5 多人游戏）。这也在nuget的[股票代码示例中完成。](https://nuget.org/packages/Microsoft.AspNet.SignalR.Sample/)

最终，您可以在集线器之外获取集线器上下文并使用它来发送消息：

```
public void MyTimerFunction(object state)
{
    GlobalHost.ConnectionManager.GetHubContext<ChatHub>().Clients.All.broadcastMessage(updates);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T22:28:01.500

你已经有了基本的想法。但是，您可能可以进行一些改进。

在这里，我假设您每次运行计时器作业时都会发送消息。这是没有必要的。如果发生变化，您只需要向客户发送消息。

首先，您可以处理 onconnected 事件，并发送牛奶罐的当前状态。

现在，当您运行计时器作业时，您只需在发生更改时调用 send。然后你将消息发送给客户，告诉他们发生了什么变化。在客户端，该函数处理如下更改

服务器

```
public class ChatHub : Hub
{
    public override Task OnConnected()
    {
        //some code here to fetch current state of jugs.
        return base.OnConnected();
    }        

    public void JugExpired(MilkJugUpdate update)
    {
        // Call the broadcastMessage method to update milkJugs.
        Clients.All.updateJug(update);
    }
} 
```

客户

```
ChatHub.client.updateJug = function(update) {
    // code to update jug here
} 
```

如果没有任何变化，这可以节省您向客户端发送消息的时间。

与另一个答案中指出的类似，您可以直接从计时器作业中调用客户端方法，但同样，我只建议发送更新，而不是每次都发送整个状态。

# android - 事件驱动的网络服务

> ID：15693163
> 
> 赞同：0
> 
> 时间：2013-03-28T22:17:36.803
> 
> 标签：android, web-services

我已经实现了一个带有一些运动检测器和温度传感器的家庭监控系统，它连接到作为服务器的迷你 PC。在这台 PC 上，我有一个 .NET ASMX Web 服务，它有一些方法，返回探测器的情况和环境温度。

为了实现设备情况，我正在尝试构建一个可以通过 Wifi 连接到 Web 服务并显示温度的 Android 应用程序。当温度超过临界范围或运动检测器检测到运动时，此应用程序必须显示相关通知。

这里的问题是：每次需要系统情况，我都要查询web服务。但这样我必须每隔一秒查询一次网络服务，以了解温度是否超过临界范围，以及探测器是否检测到运动。问题：有没有更好的解决方案来实现这一目标？或者有什么方法可以让 Web 服务在事件发生时通知客户端？

请注意，我在我的 android 应用程序中使用 KSOAP2 库。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:38:41.940

您需要考虑使用推送通知模式而不是轮询服务器来检查新数据。

这里有几个选项。最简单和最标准的方法是查看 Google 的推送通知系统，称为 Google Cloud Messaging (GCM) 请注意，这仅适用于具有 Google 服务的设备（因此，例如，如果您使用的是 Kindle Fire，您可以不要使用它）

或者您可以考虑基于 MQTT 协议的更定制版本的推送通知。您需要设置自己的 MQTT 服务器，并拥有与 MQTT 服务器对话的 android 代码和服务器代码。

每当数据发生变化时，您都会向订阅客户端发送推送通知，这样他们就不必一直检查数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:38:37.547

推送服务，即[http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html) 但是推送有一定的限制，我想每秒钟的调用都会杀死这个限制。也许只是每 5 秒或 10 秒发送一次请求？即使以这样的速度，房间里的温度也不会改变:)

# c++ - 使用 boost::lexical_cast （细绳）

> ID：15693165
> 
> 赞同：0
> 
> 时间：2013-03-28T22:17:43.403
> 
> 标签：c++, boost, lexical-cast

我是初学者，需要解释为什么这不起作用：

```
string myArray[620223];
//myArray is then populated with a while loop using ifstream and getline
string myString = myArray[9];
double myValue;

try {
    myValue = boost::lexical_cast<double>(myString);
} 
catch(boost::bad_lexical_cast const&) {
    myValue = 0;
} 
```

myArray[9] 不为零，但结果双精度始终为零。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:19:14.690

由于代码看起来不错，这里有一个有根据的猜测。`myArray[9]`是*第十个*数组元素。`myArray[0]`是第一个。你实际上想要第九个元素，`myArray[8]`.

# php - 如果我不希望我的输出完全混乱，我真的需要在我在脚本中编写的每个 PHP 语句中添加“\n”吗？

> ID：15693166
> 
> 赞同：0
> 
> 时间：2013-03-28T22:17:52.303
> 
> 标签：php

我正在学习PHP并编写它并在浏览器中执行很麻烦。所以我把它写成脚本，在终端上执行，比如

```
me@machine $ php script.php 
```

但是，在我看来，所有语句都打印到同一行，如果没有明确地打印换行符。

```
<?php
echo "Hello World.\n";
?> 
```

如果我省略`\n`，我最终会得到

```
me@machine $ php hello_world.php
Hello World. > me@machine $ 
```

哪种是蹩脚的。

我真的，真的像真的一样（如“完全真的”），需要为`\n`我想测试的每条语句输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:24:30.273

你有一个选择：

*   在末尾加上a `\n`，并有一个换行符。
*   省略`\n`并且没有换行符。

由你决定。不，你*不需要*在那里，但如果你想将文本输出到命令行，你可能确实想要它。

我想还有另一种选择。由于 PHP 将标签之外的内容输出`<?php .. ?>`为纯文本，因此您可以在代码末尾的 final 之后放置一个空行`?>`。这将导致 PHP 在末尾输出一个新行，而无需编写`\n`.

但老实说，将`\n`in 放入您的字符串中是更好的编码实践。（坦率地说，`\n`在你的代码中出现并不是世界上最糟糕的事情。如果你无法应对`\n`在代码中看到的恐怖，那么无论如何你都将很难阅读大多数程序代码...等你学习正则表达式！！！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:25:49.703

不，您可以编写自己的 writeLn() 函数，也可以使用`PHP_EOL`代替`\n`，具体取决于脚本的用途。（换行字符串因系统而异，并且`PHP_EOL`是您的*服务器的*换行版本，因此它使您的脚本至少在运行环境方面具有可移植性。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:19:44.957

是的，您需要使用`\n`来打印新行。

PHP 只会打印您告诉它打印的内容。所以，如果你想要一个新行，那么你需要打印一个新行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T22:20:42.093

根据您的要求。

`\n`代表一个新的换行符。

因此，如果您正在使用单个回显测试单个命令，则从命令行您可能可以在没有换行符的情况下进行。

如果你有多个回声，所有的输出将被混杂成一个长文本。

```
function NewLine ($Text)
{
  $Text = $Text."\n";
  return $Text;
}

echo NewLine('This Text Will Have A New Line Appended To The End'); 
```

# gwt - GWT 中的 Java 8 支持

> ID：15693169
> 
> 赞同：49
> 
> 时间：2013-03-28T22:18:26.703
> 
> 标签：gwt, java-8

这似乎是一个非常基本的问题，但我搜索了高低，发现几乎没有任何地方提到它。所以，我会在这里问它。

**在 GWT 中支持 Java 8 的新语言结构的当前计划是什么？**

此外，提议的 Java 8 库的哪个子集计划用于客户端仿真？流 API？新的日期/时间 API？

最后，关于这个重要话题的讨论在哪里进行？我敢肯定，我们当中有很多人愿意参与并可能为这项工作做出贡献。

Java 8 beta 已经存在了一段时间，并且有很多文章讨论了提议的 API。它应该会在今年晚些时候推出，因此至少应该讨论一下非常需要的语言功能如何以及何时进入 GWT 似乎已经过去了。

如果这个问题在其他地方得到回答，或者我错过了一些与之相关的重要信息，我深表歉意。这将是一个链接到此类信息的好地方，即使它已被回答。谢谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-28T22:49:26.057

**EDIT** GWT 2.8.0 于 2016 年 10 月 20 日发布，支持 Java 8 语言构造（lambdas、方法引用）和一些 Java 8 API 的仿真（主要是流）

**编辑**截至 2014 年 4 月，GWT 2.6 支持 Java 7，并且正在努力在 GWT 2.7 中支持 Java 8，将于 2014 年夏季发布。GWT 2.7 可能只支持 Java 8 语言结构，而不模拟任何新的语言结构API（流、javax.time 等）

* * *

计划首先支持 Java 7：[https ://github.com/gwtproject/gwt/labels/java7](https://github.com/gwtproject/gwt/labels/java7)

这涉及更新 JDT，并且正在[处理中](https://gwt-review.googlesource.com/2361)（或者，完全切换到其他东西；[JetBrains 建议](https://groups.google.com/d/msg/gwt-steering/RnYDFmZk-60/TulG46xrITkJ)使用他们已经支持 Java 8 的解析器，但 GWT 还需要一个编译器，我不知道它们究竟提供了什么）。接下来的步骤是将新的语言结构映射到 JavaScript（想到转换中的字符串，因为它们可以直接映射到 JavaScript，而无需`hashCode`Java 编译器会做的基于 - 的脱糖）。

只要 GWT 使用 JDT 进行 Java 解析/编译/编译，Java 8 就只能在 JDT 支持它的情况下得到支持（在可接受的水平上，AFAICT 还不是这种情况）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-09-10T19:48:01.263

是时候更新答案了。

**更新（2020 年 5 月 13 日）**

**GWT 2.9.0** [终于来了](https://storage.googleapis.com/gwt-releases/gwt-2.9.0.zip)。[发行说明](http://www.gwtproject.org/release-notes.html#Release_Notes_2_9_0)

*   能够使用 jsinterop-base 1.0.0、elemental2 1.0.0 和 jsinterop-annotations 2.0.0 编译项目。除了@JsAsync 和@JsEnum 之外，这使GWT2 在这些工具中与J2CL 兼容。
*   添加了对 Java 语言级别 9、10 和 11 的支持。
*   正式地，不再支持在 Java 7 上运行 GWT 编译器或服务器端工具。GWT 发行版仍然编译为在此版本的 Java 7 上运行，但不保证这是否会起作用。未来的版本将为 Java 8+ 编译字节码。该版本经过测试，发现在使用 Java 8、11 和 14 运行时可以跨平台工作。

**更新（2017 年 10 月）**

**GWT 2.8.2** [可在此处获得](http://www.gwtproject.org/download.html)。[发行说明](http://www.gwtproject.org/release-notes.html#Release_Notes_2_8_2)。

**更新（2017 年 6 月）**

官方**GWT 2.8.1** [下载](http://www.gwtproject.org/download.html)位置。

[2.8.1 发行说明](http://www.gwtproject.org/release-notes.html#Release_Notes_2_8_1)

**更新（2016 年 10 月）**

**GWT 2.8.0 终于来了！**

GWT 团队在[Github](https://github.com/gwtproject/gwt/releases/tag/2.8.0)上发布了 2.8.0 标签。GWT 官方网站尚未更新，但 GWT 网站上更改的拉取请求已[准备好并正在审核过程中](https://github.com/gwtproject/gwt-site/pull/203)。~~所以很快编译后的版本就可以下载了！~~

[**可供下载**](http://www.gwtproject.org/download.html)

**更新（2016 年 9 月）**

同时，GWT 团队在 GitHub 镜像上标记了[GWT 2.8.0 RC3 。](https://github.com/gwtproject/gwt/releases/tag/2.8.0-rc3)

GWT 团队 (Daniel Kurka) 在[此处](https://groups.google.com/forum/#!topic/google-web-toolkit/udNQeQ6cK8A)发布了 GWT 2.8.0 (RC2) 版本。

发行说明适用于 2.8.0 (RC2)：

**Bug修复**

*   修复不正确的 unusable-by-js 警告。
*   修复了有关 DevMode 服务器（码头）重启的问题。
*   修复了超级开发模式下更改编译器选项不会触发完全重新编译的问题。
*   向 DevMode 入口点添加了缺少的命令行参数
*   修复了字符串中的性能回归。

RC1 的发行说明可在[官方网站](http://www.gwtproject.org/release-notes.html#Release_Notes_2_8_0_RC1)上找到。以下是即将推出的 GWT 2.8.0 中有关 Java 8 支持的最重要更改：

**强调**

*   部分支持 Java 8 标准库 API（完整列表见下文）。
*   使用 Java 8 编译修复内存泄漏。
*   源级别设置为 Java 8。
*   接口中的静态和默认方法对生成器不可见。如果您想利用这些 Java-8isms，我们鼓励您切换到注解处理器。如果更改接口以将非默认方法转换为默认方法，这可能会破坏现有构建。

**JDK 8 仿真支持**

*   模拟 java.io.UncheckedIOException。
*   模拟 Optional 及其 int、long、double 变体。
*   使用消息供应商模拟 Objects.requireNonNull()。
*   修复 Math.min/max(float/double) 仿真行为。
*   模拟 Character.isBmpCodePoint()。
*   模拟 CharSequence.chars()。
*   模拟 java.lang.SecurityException。
*   模拟 Java 8 API
    *   java.util.Arrays，
    *   java.util.ArrayDeque，
    *   java.math.BigInteger,
    *   java.util.BitSet,
    *   java.util.Comparator,
    *   java.util.function,
    *   java.util.Iterator,
    *   java.lang.Iterable,
    *   java.util.IntSummaryStatistics/LongSummaryStatistics/DoubleSummaryStatistics
    *   java.util.Collection/Lists/Queues，
    *   java.util.Map,
    *   java.util.logging.Logger，
    *   java.util.PrimitiveIterator,
    *   java.util.Spliterator，
    *   java.util.stream,
    *   java.util.StringJoiner

GWT 2.8.0 RC2 仍然存在一些问题，预计 GWT 团队将很快解决这些问题。最终版本应该很快就会发布（“一旦准备好”）。

# freebase - 通过新的 Freebase UI 添加图像不起作用

> ID：15693171
> 
> 赞同：2
> 
> 时间：2013-03-28T22:18:38.867
> 
> 标签：freebase

对于某些 Freebase 主题，没有可用的图像（例如[https://www.freebase.com/m/0399p](https://www.freebase.com/m/0399p)），在某些情况下，我有可用的图像，我想将它们添加到 Freebase，因为它们正在用于我们的网站。

由于 Freebase 本月更新了它的 UI，尝试通过 Freebase UI（上面提到的链接）向 /common/topic/image 添加值会返回错误“*添加图像尚未实现*”。

是否有关于何时将图像添加到主题的更新将再次得到支持？或者有没有其他方法可以将它们上传到 Freebase？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:25:19.450

Freebase 加载新图像的唯一方法是现在来自 Wikipedia。如果该功能被添加，它不会有一段时间，所以我建议您现在托管自己的图像。很抱歉给您带来不便，但图像许可和合理使用存在很多复杂的问题。

# html - 线在 IE10 中移动时 SVG 线标记不更新？

> ID：15693178
> 
> 赞同：20
> 
> 时间：2013-03-28T22:19:21.810
> 
> 标签：html, svg, internet-explorer-10

我有一些带有线条标记的 SVG 线条，并且我有一个可以移动这些线条的脚本。这适用于所有浏览器，包括 IE9。

但是，我只是在 IE10 上尝试过，当线条移动时，线条标记会落在后面。

可以在这里看到一个例子：http: [//jsfiddle.net/swYRK/8/](http://jsfiddle.net/swYRK/8/)

我在 Windows 7 和 8 上都试过了。

有谁知道发生了什么？这是 IE10 错误，还是有其他方法可以移动线条和标记？

（请注意，实际的应用程序对性能非常敏感，所以我非常希望避免在移动它们时每帧重新创建线条之类的事情。）

```
- 
```

编辑：这似乎是一个真正的 IE 10 错误。我[在 IE 错误跟踪器中发现了一个未解决的问题](https://connect.microsoft.com/IE/feedback/details/781964/)（它甚至需要一个 Microsoft 帐户才能看到，这使得它对 Google 不可见。你好？），我已经添加了信息。IE还没有接受这个问题。

如果还有其他人们可以想到的解决方法，那将是很高兴听到的。完全删除结束标记，渲染，然后重新添加它们正常工作（显示可见闪烁），但不幸的是，在[我的应用程序中是不可接受的。](http://lab.dev.concord.org/examples/interactives/embeddable.html#interactives/sam/gas-laws/2-what-is-pressure.json)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-02T08:38:22.490

这是一种快速的方法，效果很好。我没有注意到任何闪烁或性能相关的问题。

只需在原始位置重新添加 svg 节点：

```
if (navigator.appVersion.indexOf("MSIE 10") != -1) {
    svgNode.parentNode.insertBefore(svgNode, svgNode);
} 
```

当然，您可以使用任何选择的浏览器嗅探..

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-08-27T20:33:25.397

我想详细说明@ChristianLund 给出的惊人答案以及我如何在我的代码中成功使用它

在我的力动画中，我有一个`tick`如下所示的函数：

```
force.on("tick", function() {
  ...
}); 
```

我还将所有图表链接保存在`link`变量中，定义如下：

```
var link = svg.selectAll(".link").data(links).enter() ... 
```

现在，为了实现 Christian 建议的魔法，我在`tick`函数的开头添加了这一行：

```
force.on("tick", function() {
  link.each(function() {this.parentNode.insertBefore(this, this); });
  ...
}); 
```

这似乎修复了 IE 10 问题...当然建议仅在 IE 10 上添加此补丁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-19T10:27:31.183

在 ie10/11 中，我发现当它带有标记开始/标记结束属性时，该行不会移动，我试图在您的示例中删除这些属性，并且它可以工作。所以想法是在设置 x/y 之前删除属性，然后在所有工作完成后重置属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:57:52.113

你可以试试这个技巧：

```
$("#button4").click(function () {
$("#line1")[0].setAttributeNS(null, "x1", 50);
$("#line1")[0].setAttributeNS(null, "y1", 50);
$("#line1")[0].setAttributeNS(null, "x2", 150);
$("#line1")[0].setAttributeNS(null, "y2", 50);
var oldAttValueDisplay = $("#line1")[0].getAttributeNS(null, "display");
$("#line1")[0].setAttributeNS(null, "display", "none");
setTimeout(function() {$("#line1")[0].setAttributeNS(null, "display", oldAttValueDisplay);}, 0);
// static: setTimeout(function() {$("#line1")[0].setAttributeNS(null, "display", "block");}, 0); 
```

});

# wso2 - 在 Synapse 中向 XML 消息添加标头

> ID：15693179
> 
> 赞同：1
> 
> 时间：2013-03-28T22:19:23.960
> 
> 标签：wso2, synapse

使用 Synapse 2.1，我正在尝试将没有标头的 XML 消息转换为带有包含凭据的标头的 SOAP 消息，以使用 Web 服务。像这样的东西：

突触传入消息：

```
<SOAP-ENV:Envelope>
<SOAP-ENV:Body>
   ...TAGS...
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

突触传出消息：

```
<SOAP-ENV:Envelope>
<SOAP-ENV:Header>
   <yta:Authentication>
      <yta:UserName>srnm</yta:UserName>
      <yta:Password>psswrd</yta:Password>
   </yta:Authentication>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
   ...TAGS...
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我如何配置 Synapse 来做到这一点？我成功地使用转换文件来更新消息的正文，但没有在输出中添加标题。

我尝试在配置文件中使用标头和属性中介，但我不确定该怎么做。阅读有关标头调解器的信息，它说“目前设置标头仅支持简单的值标头”。会是这样吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:00:57.417

作为记录，我最终使用 addHeader 方法在配置文件中使用了带有内联 JavaScript 脚本的脚本中介。见下文：

```
<script language="js">
   <![CDATA[
     var user = mc.getPayloadXML()..*::UserName.toString();
     var psswd = mc.getPayloadXML()..*::Password.toString();
     mc.addHeader(false, <yta:Authentication xmlns:yta="yta:namespace url"><yta:UserName>{user}</yta:UserName><yta:Password>{psswd}</yta:Password></yta:Authentication>);
   ]]>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:45:44.697

您可以使用 XSLT 中介来操作它。所以添加一个带有所需标头的 XSLT 转换，它会添加所需的标头。或者使用脚本调解器/类调解器，您可以在其中操作消息。

请参考以下内容，这将是有用的。

[http://wso2.org/forum/thread/10794](http://wso2.org/forum/thread/10794)

[http://wso2.org/forum/thread/10843](http://wso2.org/forum/thread/10843)

如果不需要这个 xml 结构。您可以使用 Http Headers 您可以使用如下属性。 [http://blog.thilinamb.com/2011/04/how-to-access-web-service-using-http.html](http://blog.thilinamb.com/2011/04/how-to-access-web-service-using-http.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:42:03.900

看起来你想保护服务。最简单的方法是使用用户名令牌安全性。转到 WSO2 ESB 中的服务仪表板以获取您的代理服务并使用 UT 保护它。另请参阅[http://docs.wso2.org/wiki/display/ESB460/Sample+200%3A+Using+WS-Security+with+policy+attachments+for+proxy+services](http://docs.wso2.org/wiki/display/ESB460/Sample+200%3A+Using+WS-Security+with+policy+attachments+for+proxy+services)以获取安全示例

# r - 如何检查上次选举的投票率并将其复制到特定（以后）年份（面板数据）

> ID：15693181
> 
> 赞同：0
> 
> 时间：2013-03-28T22:19:40.780
> 
> 标签：r, panel

我正在使用一个数据集，其中包括下面介绍的变量和值。我如何才能将 2004 年之前的最新选举投票率（存储在选举人 1 中）“复制”到每个国家的 2004 年。对于某些国家/地区，上次选举可以追溯到 2 年前，对于其他国家而言，可以追溯到 3、4、5... 我很感激任何提示。非常感谢，罗兰

```
Year    Nation  electoral1 (=turnout)
1994    Albania 
1995    Albania 
1996    Albania 
1997    Albania 730 
1998    Albania 
1999    Albania 
2000    Albania 
2001    Albania 600 => this should go to 2004
2002    Albania 
2003    Albania 
2004    Albania 
2005    Albania 
2006    Albania 
1994    Algeria 
1995    Algeria 
1996    Algeria 
1997    Algeria 656
1998    Algeria 
1999    Algeria 
2000    Algeria 
2001    Algeria 
2002    Algeria 462 => this should go to 2004
2003    Algeria 
2004    Algeria 
2005    Algeria 
2006    Algeria 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:03:19.247

我假设丢失的数据由`NA`

首先，获取您的数据框：

```
df = myDataFrame 
```

然后，编写一个获取特定国家最新选举数据的函数

```
getLatestElecdata = function(Nation,df){
NationIndexes = which(df$Nation == Nation)
elec_by_year = data.frame(Year = df$Year[NationIndexes],electoral1= df$electoral1[NationIndexes])
elec_by_year = elec_by_year[ order(-elec_by_year[,1]), ]
getLatestElec = elec_by_year[which(!is.na(elec_by_year[,2]))[1],2]
return(getLatestElec)
} 
```

现在，对于每个 2004 年的条目，获取最新数据

```
2004indexes = which(df[,1]==2004)

for(i in 2004indexes){
df[i,3] <- getLatestElecdata(df[i,2],df)
} 
```

这应该可以解决您的问题。

# c# - Rx 扩展继续生成事件 N 秒？

> ID：15693188
> 
> 赞同：0
> 
> 时间：2013-03-28T22:20:05.440
> 
> 标签：c#, .net, system.reactive

什么是正确的 Rx 扩展方法（在 .NET 中）以持续生成事件 N 秒？

通过“继续生成事件 N 秒”，我的意思是它将继续在循环中生成事件，从 DateTime.Now 到 DateTime.Now + TimeSpan.FromSeconds(N)

我正在研究遗传算法，它将产生许多假设并将最成功的假设传播给下一代。需要以某种优雅的方式约束这个家伙。

**后来补充：**

我实际上已经意识到我需要做拉而不是推，并想出了这样的事情：

```
public static class IEnumerableExtensions
{
    public static IEnumerable<T> Pull<T>(this IEnumerable<T> enumerable, int? times = null)
    {
        if (times == null) 
            return enumerable.ToArray();
        else
            return enumerable.Take(times.Value).ToArray();
    }

    public static IEnumerable<T> Pull<T>(this IEnumerable<T> enumerable, TimeSpan timeout, int? times = null)
    {
        var start = DateTime.Now;

        if (times != null) enumerable = enumerable.Take(times.Value);

        using (var iterator = enumerable.GetEnumerator())
        {
            while (DateTime.Now < start + timeout && iterator.MoveNext())
                yield return iterator.Current;
        }
    }
} 
```

用法是：

```
var results = lazySource.SelectMany(item =>
{
    //processing goes here
}).Pull(timeout: TimeSpan.FromSeconds(5), times: numberOfIterations); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:23:47.740

可能有一种更清洁的方法，但您可以使用：

```
// This will generate events repeatedly
var interval = Observable.Interval(...);

// This will generate one event in N seconds
var timer = Observable.Timer(TimeSpan.FromSeconds(N));

// This will combine the two, so that the interval stops when the timer
// fires
var joined = interval.TakeUntil(timer); 
```

我已经很久没有做过任何 Rx 了，所以如果这不正确，我深表歉意 - 但值得一试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:58:12.280

Jon 的帖子很贴切，但是我注意到您的编辑，您建议您创建自己的扩展方法来执行此操作。我认为如果您只使用内置运算符会更好*。

```
//LinqPad sample
void Main()
{
    var interval = Observable.Interval(TimeSpan.FromMilliseconds(250));  
    var maxTime = Observable.Timer(TimeSpan.FromSeconds(10));
    IEnumerable<int> lazySource = Enumerable.Range(0, 100);

    lazySource.ToObservable()
            .Zip(interval, (val, tick)=>val)
            .TakeUntil(maxTime)
            .Dump();
} 
```

*IE。其他开发人员易于维护和理解

# node.js - Heroku + node.js 错误（Web 进程在启动后 60 秒内无法绑定到 $PORT）

> ID：15693192
> 
> 赞同：596
> 
> 时间：2013-03-28T22:20:39.763
> 
> 标签：node.js, heroku

我有我的第一个 node.js 应用程序（在本地运行良好）-但我无法通过 heroku 部署它（也是第一次使用 heroku）。代码如下。所以不允许我写这么多代码，所以我只想说在本地以及在我的网络中运行代码没有问题。

```
 var http = require('http');
 var fs = require('fs');
 var path = require('path');

 http.createServer(function (request, response) {

    console.log('request starting for ');
    console.log(request);

    var filePath = '.' + request.url;
    if (filePath == './')
        filePath = './index.html';

    console.log(filePath);
    var extname = path.extname(filePath);
    var contentType = 'text/html';
    switch (extname) {
        case '.js':
            contentType = 'text/javascript';
            break;
        case '.css':
            contentType = 'text/css';
            break;
    }

    path.exists(filePath, function(exists) {

        if (exists) {
            fs.readFile(filePath, function(error, content) {
                if (error) {
                    response.writeHead(500);
                    response.end();
                }
                else {
                    response.writeHead(200, { 'Content-Type': contentType });
                    response.end(content, 'utf-8');
                }
            });
        }
        else {
            response.writeHead(404);
            response.end();
        }
    });

 }).listen(5000);

 console.log('Server running at http://127.0.0.1:5000/'); 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：1276
> 
> 时间：2013-03-28T22:36:48.270

Heroku 动态地为您的应用程序分配一个端口，因此您不能将端口设置为固定数字。Heroku 将端口添加到环境中，因此您可以从那里拉出它。切换你的听这个：

```
.listen(process.env.PORT || 5000) 
```

这样，当您在本地测试时，它仍然会监听端口 5000，但它也可以在 Heroku 上运行。

[您可以在此处](https://devcenter.heroku.com/articles/nodejs)查看有关 Node.js 的 Heroku 文档。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2017-05-22T21:12:31.727

值得一提的是，如果您的代码没有指定端口，那么它*不应该是一个`web`进程*，而可能应该是一个`worker`进程。

因此，将您`Procfile`的阅读更改为（填写您的特定命令）：

```
worker: YOUR_COMMAND 
```

然后也在 CLI 上运行：

```
heroku scale worker=1 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2014-08-21T05:35:27.783

当 Heroku**无法将端口或主机名绑定**到`server.listen(port, [host], [backlog], [callback])`.

Heroku 需要的是`.listen(process.env.PORT)`或`.listen(process.env.PORT, '0.0.0.0')`

所以更一般地说，为了支持其他环境，使用这个：

```
var server_port = process.env.YOUR_PORT || process.env.PORT || 80;
var server_host = process.env.YOUR_HOST || '0.0.0.0';
server.listen(server_port, server_host, function() {
    console.log('Listening on port %d', server_port);
}); 
```

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2017-11-21T18:56:02.873

对于同时传递端口和主机的用户，请记住 Heroku**不会绑定到** `localhost`.

***你必须通过*** `0.0.0.0`主机。

即使您使用正确的端口。我们不得不做出这样的调整：

```
# port (as described above) and host are both wrong
const host = 'localhost';
const port = 3000;

# use alternate localhost and the port Heroku assigns to $PORT
const host = '0.0.0.0';
const port = process.env.PORT || 3000; 
```

然后你可以像往常一样启动服务器：

```
app.listen(port, host, function() {
  console.log("Server started.......");
}); 
```

您可以在此处查看更多详细信息：[https ://help.heroku.com/P1AVPANS/why-is-my-node-js-app-crashing-with-an-r10-error](https://help.heroku.com/P1AVPANS/why-is-my-node-js-app-crashing-with-an-r10-error)

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2015-08-02T20:06:06.073

在使用 yeoman 的 angular-fullstack 生成的项目并删除对我有用的 IP 参数时，我遇到了同样的问题。

我替换了这段代码

```
server.listen(config.port, config.ip, function () {
  console.log('Express server listening on %d, in %s mode', config.port, app.get('env'));
}); 
```

和

```
server.listen(config.port, function () {
  console.log('Express server listening on %d, in %s mode', config.port, app.get('env'));
}); 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-01-19T05:55:32.157

就我而言，我使用的是[https://hapijs.com/中的示例](https://hapijs.com/)

解决我更换的问题

```
server.connection({ 
    host: 'localhost', 
    port: 8000 
}); 
```

和

```
server.connection({
    port: process.env.PORT || 3000 
}); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-09-14T07:43:48.207

更改此行

```
app.listen(port); 
```

到

```
app.listen(process.env.PORT, '0.0.0.0'); 
```

它会起作用的

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2021-01-03T16:26:04.530

虽然这里的大多数答案都是有效的，但对我来说，问题是我运行了很长的进程，`npm run start`这是导致超时的一部分。

我在[这里](https://help.heroku.com/P1AVPANS/why-is-my-node-js-app-crashing-with-an-r10-error)找到了解决方案并进行了总结，我只需要`npm run build`完成一项`postinstall`任务。

换句话说，我改变了这个：

```
"start": "npm run build && node server.js" 
```

对此：

```
"postinstall": "npm run build",
"start": "node server.js" 
```

想一想，这完全有道理，因为随着我的应用程序不断增长，这个错误（过去偶尔出现）变得越来越普遍。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-09-26T13:22:54.980

将我的监听端口从 3000 更改为`(process.env.PORT || 5000)`解决问题。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-02-23T10:39:00.117

重新启动heroku中的所有测功机对我有用

[![在此处输入图像描述](../Images/0070a3561d1dd6a64d36c0a3bd1e66ba.png)](https://i.stack.imgur.com/uztr1.png)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-11-24T05:34:32.733

就我而言，我将 Babel 与**babel-plugin-transform-inline-environment-variables**插件一起使用。显然，Heroku 在进行部署时没有设置 PORT 环境变量，因此`process.env.PORT`将被替换为`undefined`，并且您的代码将回退到 Heroku 不知道的开发端口。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-10-07T17:56:37.363

我意识到我不需要请求端点中的端口号，所以端点是`herokuapp.com`而不是`herokuapp.com:5000`.

`listen()`调用可以没有主机和回调：

```
server.listen(5000); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-12-14T11:54:33.667

编辑`package.json`：

```
...
"engines": {
"node": "5.0.0",
"npm": "4.6.1"
},
... 
```

和`Server.js`：

```
...
var port = process.env.PORT || 3000;
app.listen(port, "0.0.0.0", function() {
console.log("Listening on Port 3000");
});
... 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-10-18T17:02:27.947

我有同样的问题，因为我没有定义`Procfile`. 将一个文本文件提交到应用程序的根目录，该文件的名称`Procfile`不带文件扩展名。该文件告诉 Heroku 运行哪些命令来启动您的应用程序。

```
web: node app.js 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-06-24T11:05:13.770

我使用 ReactJs，如果你想上传到 heroku，在你的 webpack.config.js 中添加这个

因为如果不添加你会有错误

> 错误 R10（启动超时）-> Web 进程未能在启动后 60 秒内绑定到 $PORT

```
//webpack.config.js add code like that

const HtmlWebPackPlugin = require("html-webpack-plugin");
const MiniCssExtractPlugin = require("mini-css-extract-plugin");
var server_port = process.env.YOUR_PORT || process.env.PORT || 5000;
var server_host = process.env.YOUR_HOST || "0.0.0.0";

module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
          loader: "babel-loader"
        }
      },
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, "css-loader"]
      }
    ]
  },
  devServer: {
    disableHostCheck: true,
    contentBase: "./ dist",
    compress: true,
    inline: true,
    port: server_port,
    host: server_host

  },
  plugins: [
    new HtmlWebPackPlugin({
      template: "./src/index.html",
      filename: "index.html"
    }),
    new MiniCssExtractPlugin({
      filename: "[name].css",
      chunkFilename: "[id].css"
    })
  ]
}; 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-05-26T16:27:02.727

用于`process.env.PORT || 3000`您的端口。

这将在可用时使用 Heroku 的端口，如果不可用则使用端口 3000（例如，本地测试）

您可以将 3000 更改为您想要的任何值，例如 8080

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-07-16T18:55:27.767

我有同样的问题我可以解决问题用 IP 替换 'localhost' 是 '0.0.0.0'

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-02-14T11:05:52.337

我花了很多时间来寻找根本原因，最终我发现这个超时（60s）是可以调整的。[在这里](https://devcenter.heroku.com/changelog-items/364)，您可以将 60 秒更改为 120 甚至更多。它对我有用，希望对其他人有帮助！

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-02-19T21:17:52.253

在开发应用程序时，我们需要通过以下方式定义 PORT：

```
const port = process.env.PORT || 4000; // PORT must be in caps 
```

在将应用程序部署到服务器时，添加以下方法：

```
app.listen(port, () => {
 console.info("Server started listening.");
}); 
```

我们可以在本地运行时将主机名作为第二个参数传递。但是在将其部署到服务器时，应该删除主机名参数。

```
app.listen(port, hostName, () => {
  console.info(`Server listening at http://${hostName}:${port}`);
}); 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-05-02T09:52:49.003

要解决此问题，请遵循以下四个简单步骤： 在 package.json 文件中：

1-将主字段设置为服务器文件：

```
"main": "server.js" // <-- here set you server file 
```

2-将主机参数添加到 app.listen 函数

```
const port = process.env.PORT || 3000;
const host = '0.0.0.0'
app.listen(port, host, ()=> connsole.log(`server is running on port ${port}`) 
```

3-将安装后脚本添加到 package.json 文件

```
"scripts": {
     "postinstall": "npm run build", // <-- add this line
     "start": "node server.js" // <-- change server.js to you main file
} 
```

4- 在 package.json 文件中添加引擎字段

```
"engines": {
   "node": ">=14.0.O", // <-- change it to your node version. you can "node -v" in you command line
   "npm": ">=7.7.0" // <-- change this to your npm version. you can use "npm -v" in the command line to get your npm version
} 
```

如果您对此有任何成功，请告诉我！

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-10-08T13:47:09.783

在您的`package.json`文件中`scripts`，确保您的`start`脚本包含`-p $PORT`.

示例`package.json`（在这种情况下，对于 NextJS 应用程序）：

```
{
  "private": true,
  "scripts": {
    "dev": "next dev -p 3001",
    "build": "next build",
    "start": "next start -p $PORT" // make sure to have $PORT in here
  },
  "dependencies": {
    "typescript": "^4.3.2"
  },
  "devDependencies": {
    "@next/eslint-plugin-next": "^11.1.2",
    "@types/mongoose": "^5.11.97"
    "typescript": "^4.3.2"
  }
  "license": "MIT"
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-11-07T06:48:31.873

无法为端口设置固定数字，heroku 使用`process.env.PORT`. 但是你可以同时添加它们，就像这样`process.env.PORT || 5000`。Heroku 将使用第一个，而您的 localhost 将使用第二个。

你甚至可以添加你的回调函数。看看下面的代码

```
app.listen(process.env.PORT || 5000, function() {
    console.log("Server started.......");
}); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-02-09T11:45:06.540

在所有解决方案中，我没有按预期尝试任何工作，我默认研究 heroku，.env 文件应保持约定 PORT，process.env.PORT，heroku 默认情况下将查找关键字 PORT。

取消任何重命名，例如 APP_PORT=，而是在您的 env 文件中使用 PORT=。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-03-01T05:05:17.790

从 heroku bash 进程中，使用 yargs 之类的选项解析器将 $PORT 的值传递给您的节点应用程序。

这是您如何做到这一点的示例。在脚本对象的 package.json 中，添加一个启动方法“node server --port $PORT”。

在您的服务器文件中，使用 yargs 从 start 方法的端口选项 (--port $PORT) 中获取值：

```
const argv = require('yargs').argv;
const app = require('express')();

const port = argv.port || 8081;

app.listen(argv.port, ()=>{
    console.log('Probably listening to heroku $PORT now ', argv.port); // unless $PORT is undefined, in which case you're listening to 8081.
}); 
```

现在，当您的应用程序启动时，它将绑定到 $PORT 的动态设置值。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-05-13T16:49:12.683

如果像我一样，您将 Heroku 配置为`package.json`在部署时从您的文件运行脚本，请确保您没有硬编码该`PORT`脚本中的值！如果你这样做了，你最终会像我一样花一个小时试图弄清楚为什么会出现这个错误。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-10-02T18:33:50.807

我有同样的问题，但快递和阿波罗服务器。来自[这里](https://www.apollographql.com/docs/apollo-server/deployment/heroku.html)的解决方案：

> 唯一需要特别考虑的是允许 heroku 选择服务器部署到的端口。否则，可能会出现错误，例如请求超时。
> 
> 要配置 apollo-server 在运行时使用 Heroku 定义的端口，可以使用 PORT 环境变量定义的端口调用设置文件中的监听函数：

```
> server.listen({ port: process.env.PORT || 4000 }).then(({ url }) => { 
> console.log(`Server ready at ${url}`); }); 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-05-31T19:42:43.807

就我而言，我有两个问题......

1) 由于从另一个入口文件运行应用程序，根本没有侦听器，并且此运行脚本已从 package.json "scripts" 中删除

[![在此处输入图像描述](../Images/644f1c5fa82e687cca21547f2d3a600f.png)](https://i.stack.imgur.com/y5p3C.png)

2) 使用“Sequelize”而不是“sequelize”的区分大小写的问题

[![在此处输入图像描述](../Images/6939ccb2078d60937a835a9b9e3561f4.png)](https://i.stack.imgur.com/iCrGS.png)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-10-22T11:46:56.090

就我而言，端口和主机都不是问题。`index.js`分为2个文件。`server.js`：

```
//server.js
const express = require('express')
const path = require('path')

const app = express()

app.use(express.static(path.resolve(__dirname, 'public')));
// and all the other stuff
module.exports = app

//app.js
const app = require('./server');
const port = process.env.PORT || 3000;
app.listen(port, '0.0.0.0', () => {
    console.log('Server is running s on port: ' + port)
}); 
```

从`package.json`我们跑`node app.js`。

显然这就是问题所在。一旦我将两者合并到一个文件中，Heroku 应用程序就会按预期部署。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-02-09T01:30:09.063

我的问题是，在部署到 heroku 时出现错误：

> Web 进程在启动后 60 秒内未能绑定到 $PORT

`heroku logs --tail`在终端中运行时。但是当我在本地运行服务器时，应用程序会按预期运行。

我的`index.js`文件中有这个（服务器文件）

```
const PORT = process.env.port || 4000

app.listen(PORT, () => {
  console.log(`Server listening on port ${PORT}`)
}) 
```

但是应该有这个

```
const PORT = process.env.PORT || 4000

app.listen(PORT, () => {
  console.log(`Server listening on port ${PORT}`)
}) 
```

使用`process.env.PORT`, not `process.env.port`，因为显然`port`不一样`PORT`。

[归功于](https://stackoverflow.com/questions/15693192/heroku-node-js-error-web-process-failed-to-bind-to-port-within-60-seconds-of#comment33372763_15693371)gprasant 。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-10-21T20:51:45.677

我有同样的问题，但是我的环境变量设置得很好，并且在 package.json 中指定了 npm 和 node 的版本。我发现这是因为，就我而言，Heroku 需要在**package.json**中指定**“开始”**：

 **```
 "scripts": {
    "start": "node index.js"
  } 
```

将此添加到我的 package.json 后，我的节点应用程序已成功部署在 Heroku 上。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-07-08T18:14:05.447

我建议您仔细阅读日志，以便轻松排除故障。如果您将 PORT 作为环境变量 (env) 引用，请确保它`PORT`不是`port`因为 heroku`PORT`在您部署应用程序时自动为您的应用程序分配一个数字。`process.env.PORT`不是`process.env.port`

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-08-02T13:20:11.070

我的情况是我在启动时运行数据库脚本并且需要很长时间。我通过`npm start`在部署完成后手动运行解决了这个问题。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-09-08T13:35:08.303

这也是解决错误的好方法

```
 const PORT = process.env.PORT || 3000                                                   
   app.listen(                                                                                 
    PORT,                                                                                                    
    '0.0.0.0',                                                                                
    function () {                                                                                                             
    console.log("Server started.......");                                                              
    }                                                                                                                   
  ); 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-09-26T21:43:24.553

如果您收到此错误并且上述方法不起作用，则该错误不是来自 R10 本身。错误是由 R14（超出内存配额）引起的，这是因为您的部分代码使用了 multer（multer.diskStorage()方法）或其他一些库，用于使用某种形式的本地存储来存储图像或其他文件。由错误 R14 引起的延迟会导致 R10（引导超时）错误。

解决方案：

在您的 package.json 文件中，将您的开始更改为“start”：“node --max-old-space-size=4096 server/index.js”。这会增加存储大小。

还

设置这个 heroku 变量 heroku canfig:set NODE_ENV=dev

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2022-01-19T22:13:15.947

我浪费了一整天的时间认为后端有问题。在浏览了这里的所有解决方案并进行了彻底的日志检查后，意识到问题出在前端 react App.js 上。

我改变了每一个

```
Axios.post(`${process.env.REACT_APP_BASE_URL}/createOrder`, {

}) 
```

到

```
Axios.post(`/createOrder`, {

}) 
```

它奏效了！

显然反应文件与heroku部署无关！

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2021-10-14T12:53:38.740

对我来说，问题是大写。你知道，经过几个小时的编码，你的眼睛会错过一些小细节。

在我的代码中，我使用的`process.env.port`不是`process.env.PORT`，所以请注意，`PORT`环境变量必须大写。

请参见下面的示例：

```
const PORT = process.env.PORT || 3000;
const HOST = process.env.HOST || '0.0.0.0';

const express = require('express');
const app = express();

app.listen(PORT, HOST, () => {
      console.log('Server started on ' + HOST + ':' + PORT);
}) 
```**

# php - SQL Server datepart - 仅按年份匹配

> ID：15693200
> 
> 赞同：0
> 
> 时间：2013-03-28T22:21:14.823
> 
> 标签：php, sql, sql-server

在我的数据库中，我有一个格式为 yyyy-mm-dd 的日期，在我的 php 文件中，一年存储为一个字符串（例如 2013 年）。我想从我的表中选择数据库中的日期与存储日期匹配的行。

我曾尝试使用 DATEPART()，但它返回 bool false。

如何查询数据库并将 php 字符串与日期对象匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:23:26.973

使用 SQL Server，您可以使用

```
SELECT *
FROM mytable
WHERE year(date) = $yearfromphp 
```

如果您的日期未存储为日期时间字段，但`yyyy-mm-dd`您可以使用

```
SELECT *
FROM mytable
WHERE left(date,4) = $yearfromphp 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T22:29:50.710

```
SELECT * FROM `table` WHERE `date_column` LIKE '$year%'; 
```

# bash - 使用 cURL 复制浏览器请求

> ID：15693201
> 
> 赞同：1
> 
> 时间：2013-03-28T22:21:28.730
> 
> 标签：bash, cookies, curl

我正在尝试使用 cURL 以 URL 形式获取数据：

```
http://example.com/site-explorer/get_overview_text_data.php?data_type=refdomains_stats&hash=19a53c6b9aab3917d8bed5554000c7cb 
```

这需要一个cookie，所以我首先将它存储在一个文件中：

```
curl -c cookie-jar http://example.com/site-explorer/overview/subdomains/example.com 
```

尝试使用以下值 curl ：

```
curl -b cookie-jar -A "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" --referer "http://example.com/site-explorer/overview/subdomains/example.com" http://example.com/site-explorer/get_overview_text_data.php?data_type=refdomains_stats&hash=19a53c6b9aab3917d8bed5554000c7cb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:39:35.210

我突然想到了一个问题：您没有引用 URL，这意味着诸如`&`and之类的字符`?`将由 shell 解释，而不是传递给`curl`. 如果您使用的是完全静态的 URL，请将其括在单引号中，如`'http://blah.com/blah/blah...'`.

# sharepoint - SP2013 应用程序图标未呈现，仅显示应用程序链接 + 我们如何在应用程序图标上设置滑动透明悬停文本？

> ID：15693202
> 
> 赞同：1
> 
> 时间：2013-03-28T22:21:39.777
> 
> 标签：sharepoint, sharepoint-2013, sharepoint-clientobject

我正面临与 App Icon 相关的问题。我正在创建要部署到 SP 2013 开发人员网站的 SharePoint 托管应用程序。

默认情况下，任何应用程序都会在 Images 文件夹下设置 AppIcon。它也在 AppManifest.xml 中被引用。

我能够成功部署我的应用程序并且工作正常，**但我没有看到该应用程序的图标/图像。我看到的只是应用程序名称的链接。**

我尝试了另一个图像/另一个应用程序，但每次我只看到链接。

有人对此有任何想法吗？

也很想知道**我们如何在 App 图标上设置滑动透明悬停文本？**

# javascript - 基于 AJAX 的网站上的新“通用”谷歌分析脚本

> ID：15693209
> 
> 赞同：6
> 
> 时间：2013-03-28T22:22:36.403
> 
> 标签：javascript, google-analytics

谷歌分析现在有两个选项：“经典”和具有更多功能的新“通用”。（实际上，付费客户可以使用“通用”分析一段时间，但现在可以免费使用！）

使用“经典”分析，如下所示：

```
<script type="text/javascript">
   var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']);
  _gaq.push(['_trackPageview']);

  (function() { SOME MORE CODE
 })(); 
</script> 
```

我从很多谷歌搜索中发现要跟踪基于 Ajax 的网站（即页面由 AJAX 加载但导航菜单保持静态且从不刷新），您可以将上述代码添加到包含导航菜单的主 index.html 和然后将javascript事件添加到菜单中的页面链接，以便...

```
<ul>
 <li><a href="contact.html">Contact</a></li> 
```

变成

```
<ul>
 <li><a onclick="_gaq.push(['_trackPageview', '/contactpage']);" href="contact.html">Contact</a></li> 
```

（其中 '/contactpage' 是在 Analytics 中调用的页面 - 我们可以选择任何标题）。现在分析也将开始跟踪这些页面。

但是我找不到关于如何为“通用”分析做同样事情的明确指南，如下所示：

```
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyt...SOME MORE CODE...
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-XXXXX-Y', 'mydomain.com');
  ga('send', 'pageview');
</script> 
```

我是否让我的链接看起来像这样？：

```
<ul>
 <li><a onclick="ga('send', 'pageview', '/contact');" href="contact.html">Contact</a></li> 
```

或者这样会更好吗？

```
<ul>
 <li><a onclick="ga('send', 'pageview', {'page': '/contact','title': '/contactpage'});" href="#">Home</a></li> 
```

有人可以建议吗？我是谷歌分析的新手，因此仍在学习绳索！

提前谢谢了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-30T12:21:08.367

您的最后一个代码块看起来不错，除了“标题”更适合页面友好标签。在这种情况下，我会建议类似

```
ga('send', 'pageview', {'page': '/contact','title': 'Contact Page'}); 
```

或者如果您想将联系人页面点击与普通的旧标准页面加载区分开来

```
ga('send', 'pageview', {'page': '/contact','title': 'Contact Page -- Ajax Load'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T21:56:23.663

区分虚拟 url 和真实 url：

```
ga('send', 'pageview', {'page': '/virtual-pages/contact', 'title': 'Contact Page--Ajax
Load'}); 
```

# java - GetModuleFileName 用于焦点窗口 JNA Windows 操作系统

> ID：15693210
> 
> 赞同：1
> 
> 时间：2013-03-28T22:22:38.670
> 
> 标签：java, windows, jna

我创建了这个方法，它应该返回完整的路径和文件名，以便我可以唯一地标识一个程序。但是，它只返回`C:\Program Files (x86)\Java\jre6\bin\javaw.exe`一个空字符串，而不是焦点中特定程序的路径。我做错了什么？

```
private void getFocusWindow() {
    HWND focusedWindow = User32.INSTANCE.GetForegroundWindow();

    char[] nameName = new char[512];
    User32.INSTANCE.GetWindowModuleFileName(focusedWindow, nameName, 512);

    System.out.println(nameName);
} 
```

使用 psapi：

**解决方案：**

提供完整路径和模块文件名，只有在 eclipse 中打印出“�”时例外。有关 GetModuleFileNameEx 方法的更多详细信息，请参阅@technomage 的答案。

```
private void getFocusWindow() {
    PsApi psapi = (PsApi) Native.loadLibrary("psapi", PsApi.class);

        HWND focusedWindow = User32.INSTANCE.GetForegroundWindow();
        byte[] name = new byte[1024];

        IntByReference pid = new IntByReference();
        User32.INSTANCE.GetWindowThreadProcessId(focusedWindow, pid);

        HANDLE process = Kernel32.INSTANCE.OpenProcess(0x0400 | 0x0010, false, pid.getValue());
        psapi.GetModuleFileNameExA(process, null, name, 1024);
        String nameString= Native.toString(name);

        System.out.println(nameString);
} 
```

psapi类：

```
public interface PsApi extends StdCallLibrary {

    int GetModuleFileNameExA(HANDLE process, HANDLE module ,
        byte[] name, int i);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:31:22.153

GetWindowModuleFileName 和 GetModuleFileName 仅适用于 Windows NT 4 及更高版本中的当前进程（即，您只会获得当前进程窗口的有用信息）。

[http://support.microsoft.com/?id=228469](http://support.microsoft.com/?id=228469)

本文建议改用 PSAPI 函数[GetModuleFileNameEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198%28v=vs.85%29.aspx)。

**编辑**

您需要[将窗口句柄转换为模块句柄](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683200%28v=vs.85%29.aspx)（这可能比将窗口句柄转换为 PID 到模块句柄要短）。请记住，窗口句柄只是一个地址（因此您需要`GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS`标志）。

# css - CSS水平下拉菜单定位

> ID：15693213
> 
> 赞同：0
> 
> 时间：2013-03-28T22:22:49.080
> 
> 标签：css, drop-down-menu

我使用 css 创建了一个下拉菜单，其中下拉菜单显示为水平行而不是垂直列表。我唯一的问题是下拉菜单与菜单的其余部分不一致。我希望它与导航栏的左侧齐平。

该页面位于以下地址：[http ://concept82.com/CBHweb/index2.html](http://concept82.com/CBHweb/index2.html)

我的下拉菜单的代码是：

```
#navholder{
background-color: #594361;
margin: 0 auto;
width: 868px;
height: 25px;
font-family: P22, Helvetica, Arial, sans-serif;
 }
#nav {
    margin: 1px;
    padding: 0px;
}
#nav li {
   list-style: none;
   float: left;
}
#nav li a {
    display: block;
    color: #FFFFFF;
    font-size: 14px;
    text-align: center;
    margin-top: 5px;
    text-transform: uppercase;
    text-decoration: none; 
    letter-spacing: 3px;
    width: 140px;
}
#nav li a:hover {
   color: #201E30;
}
#nav li ul {
   display: none;
}
#nav li ul a{
    width: auto;
    font-size: 11px;
}
#nav li:hover ul, #nav li.hover ul {
   position: absolute;
   left: 0;
   display: inline;
   padding-top: 5px;
}
#nav li:hover li, #nav li.hover li {
    float: left;
    display: block;
    text-decoration: none;
    color: #594361;
    font-size: 11px;
    border-right: 1px solid #594361;
    padding: 0px 15px 0px 15px;
    margin-top: 3px;
    margin-bottom: 3px;
    white-space: nowrap;
 }
 #nav li.first, #nav li.hover li.first {
    float: left;
    display: block;
    text-decoration: none;
    color: #594361;
    font-size: 11px;
    border-left: 1px solid #594361;
    padding: 2px 15px 2px 5px;
    margin-top: 3px;
    white-space: nowrap;

}
#nav li:hover li a, #nav li.hover li a {
   color: #201E30;
   background-color: #FFFFFF;
   }
#nav li li a:hover {
   color: #201E30;
   } 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:30:09.023

当您将 ul 悬停在您指定 left 为 0 px 的列表上时定义 ul 时，将其对齐到页面的左侧，将其更改为您的边距宽度，然后它将在正确的位置

```
#nav li:hover ul, #nav li.hover ul {
    position: absolute;
    left: 0;
    display: inline;
    padding-top: 5px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:30:30.460

您应该将**#navholder**的位置更改为相对位置。

```
#navholder{
position: relative;
background-color: #594361;
margin: 0 auto;
width: 868px;
height: 25px;
font-family: P22, Helvetica, Arial, sans-serif;
 } 
```

# azure - 从我自己的 WPF 应用程序部署 Azure 包

> ID：15693216
> 
> 赞同：0
> 
> 时间：2013-03-28T22:23:04.667
> 
> 标签：azure

我正在为我的一些 Azure 工作创建一个小实用程序应用程序，我希望能够从我的工具中部署一个 azure 包。

我有一个从 Visual Studio 创建的包，我可以手动部署它或从 VS 2012 中部署它。

任何知道指南或可以告诉我如何从我自己的应用程序部署它的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:03:26.170

据我所知，目前还没有 API 包装器/SDK 可以涵盖管理存储帐户、部署等方面的全部功能。不过，您可以使用[Windows Azure 管理 REST API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)。

要使用此 API，您需要在要管理的订阅中拥有有效的管理证书，并使用它签署对管理 API 的所有 REST 调用。上面的链接中应该有足够的信息来说明如何做到这一点。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:22:39.423

是的，你可以这么做。就部署而言，您在 VS 中看到的所有内容都由 REST API 支持。因此，您基本上可以编写一个 WPF 应用程序，它是这些 REST API 的包装器。您需要做两件事：

1.  **将包文件上传到 blob 存储**：这是您需要做的第一件事。您可以使用存储客户端库或实施 REST API 将包文件上传到 Blob 存储。
2.  **实现“创建部署”服务管理 API 功能**：看看这里的功能：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee460813.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460813.aspx)。在 Blob 存储中上传包文件（并获得 Blob URI）后，您可以调用此功能。

# html - 奇怪的 覆盖在铬上

> ID：15693226
> 
> 赞同：0
> 
> 时间：2013-03-28T22:23:49.873
> 
> 标签：html, css

我有一个文本输入，认为它上面还有另一个 div 元素。当您将鼠标悬停在上方时，光标保持不变。只能点击文本输入的一小部分。

当您检查元素时，它表明它“认为”您将鼠标悬停在`header-resize`.

在这里看到它：

[http://jsfiddle.net/HxHDK/2/](http://jsfiddle.net/HxHDK/2/)（对不起，我知道很多资源丢失了，但问题仍然存在）

被窃听的文本输入是 To: 字段。这只发生在谷歌浏览器上。

我尝试添加 z-index 属性但没有奏效。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:27:03.277

奇怪的行为，但可以通过添加`overflow: hidden;`到`.header`规则声明来修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:28:21.560

删除负上边距`.content`解决了这个确实很奇怪的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:28:55.253

删除`height`属性，`header`问题就消失了。

# graphics - 标准化设备坐标

> ID：15693231
> 
> 赞同：5
> 
> 时间：2013-03-28T22:24:51.360
> 
> 标签：graphics, 2d, coordinates, coordinate-systems

我正在编写一个处理 2D 图形形状的库。

我只是想知道为什么我的坐标系范围应为 x 和 y 轴的 **[-1, 1]**![在此处输入图像描述](../Images/d990e5b16c0f4a292bf2b7ed13670a03.png)

而不是 x 的[ **0, width]和 y 的****[0, height]**？ ![在此处输入图像描述](../Images/b34cfe3b7b4058009d466f53f662c7af.png)

我选择了后一种系统，因为我觉得它很容易实施。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T18:29:19.770

来自 Jim Blinn 的*图形管道之旅*，p。138.

> 让我们从最初看起来最简单的转换开始：将设备坐标标准化到像素空间。变换是

```
s_x * X_NDC + d_x = X_pixel
s_y * Y_NDC + d_y = Y_pixel 
```

> 用户/程序员在 NDC 中进行所有屏幕设计。NDC 向我们隐藏了三个令人讨厌的硬件现实：
> 
> 1.  *x*和*y*中的实际像素数。
>     
>     
> 2.  *x*和*y*中的像素间距不均匀。
>     
>     
> 3.  *Y*坐标的向上与向下。NDC 到像素的转换将在必要时反转*Y ，以便 NDC 中的**Y*指向上方。
>     
>     
> 
> ...

```
s_x = ( N_x - epsilon ) / 2
d_x = ( N_x - epsilon ) / 2

s_y = ( N_y - epsilon ) / (-2*a)
d_y = ( N_y - epsilon ) / 2

epsilon = .001
a = N_y/N_x  (physical screen aspect ratio) 
```

# scala - 如何让我的 scala 程序退出并返回到 REPL？

> ID：15693232
> 
> 赞同：4
> 
> 时间：2013-03-28T22:24:52.417
> 
> 标签：scala, case, read-eval-print-loop, quit

所以我制作了这个 scala 文件，当我将它加载到 REPL 中时效果很好。我想做的是当用户输入“Q”时，它会退出程序并返回到 REPL。我已经用一个 case match 设置了 readLine，上面写着：

```
case "Q" => 
```

我只是不知道在它之后放什么来让程序退出。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T23:17:18.693

`System.exit(0)` *只要*你分叉一个新的控制台/REPL，你就可以使用。如果您通过 SBT 运行，那么`fork in console := true`将完成此操作。如果您从代码中启动 REPL 并使用`run`in 而不是`console`，那么您需要`fork in run`.

如果你想运行一个独立的 REPL，然后启动你的程序并最终让它退出到 REPL，那么你需要简单地停止你的读取循环并退出你调用的入口点方法来启动它向上。

鉴于您包含的代码很少，很难说比这更多。

# ruby-on-rails - Ruby on Rails：在参考上进行查找

> ID：15693234
> 
> 赞同：0
> 
> 时间：2013-03-28T22:25:18.187
> 
> 标签：ruby-on-rails, ruby, reference

我有两个表（节点和代理）。`nodes`是属于的`agents`。我有一个将Rails 项目拉入其中的脚本，我正在尝试从ActiveRecord 中提取值。我假设我要问的内容无论是在控制器中还是在视图中 - 或者 - 在 cli 脚本中都应该有效。所以，我的脚本看起来是这样的：

```
#!/usr/bin/env ruby

require '/Users/hseritt/devel/rails_projects/monitor_app/config/environment'

banner = "Banner running..."
script_dir = '/devel/rails_projects/monitor_app/monitor/bin'

class Runner

attr_accessor :banner, :agents, :agent_module, :nodes

def initialize(banner, script_dir)
    @banner = banner
    @agents = Agent.all
    @nodes = Node.all
    @script_dir = script_dir
end

def run
    puts @banner
    @agents.each do |agent|
        if agent.active?
            agent_module = '%s/%s' % [@script_dir, agent.name]
            require agent_module

            @nodes.each do |node|
                if node.agent == agent
                    puts node.name
                end
            end
                            #
            # HERE IS THE ISSUE:
            # ns = Node.find_by_agent_id(agent.id)
            # ns.each do |node|
            #   puts node.name
            # end
            # 
            # yields this error:
            #`method_missing': undefined method `each' for #<Node:0x007fe4dc4beba0> (NoMethodError)
            # I would think `ns` here would be itterable but it doesn't seem that way.
        end
    end
end
end

if $0 == __FILE__
    runner = Runner.new(banner, script_dir)
    runner.run  
end 
```

所以，这是在 run 方法中。未注释掉的块当然不是一个好的解决方案，因为每次迭代代理时，每次都必须迭代节点。被注释掉的块对我来说似乎是合乎逻辑的，但会引发错误。我在谷歌上搜索我认为正确的东西时遇到了麻烦。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:28:52.880

```
Node.find_all_by_agent_id 
```

如果你不使用“all”，它只需要第一个元素

# git - 无法使用 SSH 连接到远程存储库：连接超时

> ID：15693239
> 
> 赞同：4
> 
> 时间：2013-03-28T22:25:42.733
> 
> 标签：git, ssh, git-extensions

我正在尝试使用 Git，在 Windows 上使用 Git-Extensions，并且创建了本地存储库，没有任何问题。我希望能够在各种机器上处理我的项目，所以我试图通过我的网络主机的机器访问它们。
按照 Pro Git 书中的说明，我创建了一个裸存储库，并将其上传到我的在线文件空间。我已经可以使用 SSH 访问，将公钥添加到 .ssh/authorized_keys，并且可以使用 PuTTY 登录 OK。到目前为止，一切都很好。

但是，我一直试图通过 GitExtensions 建立与存储库的 SSH 连接。在 Manage Remote Repositories 窗口中，我输入了 ssh: URL，因为我的 web 主机使用 15554 而不是默认的 SSH 端口号。我添加的 URL 如下所示：

```
ssh://myusername@mydomainname.co.uk:15554/git/myproject.git 
```

私钥文件与我使用 PuTTY 成功连接的文件相同。当我点击“测试连接”按钮时，会出现一个命令提示符窗口，大约 10 秒后显示消息：“致命错误：网络错误：连接超时”。

我猜我在配置中做错了什么，因为我可以使用与 PuTTY 相同的 SSH 密钥连接 OK。
谁能建议我缺少什么？

# html - 调整图像大小，并在容器内水平和垂直居中

> ID：15693242
> 
> 赞同：0
> 
> 时间：2013-03-28T22:25:56.740
> 
> 标签：html, css, image

我正在实现一个带有图像的轮播。轮播宽 960 像素，包含 5 张图像，容器的宽度为 960 像素/5 = 192 像素（高度为 119 像素）。

我希望图像在其容器内尽可能大，而不改变图像的纵横比。我还希望图像在其容器内水平和垂直居中。

通过研究几个小时并使用`center`标签，我设法构建了我上面描述的内容。请看[这里](http://jsfiddle.net/hfX2h/)的小提琴。

问题出在第二张图片的容器上（如黑色边框所示）。当第二个图像*水平*居中时，容器向下移动了一点。

我正在尝试在图像上实现叠加，并且需要容器都处于相同的高度。我怎样才能让容器都处于相同的高度？有没有更好/更清洁的方法不使用`center`标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:29:13.123

你可以添加`vertical-align:top;`到你的`#carousel-images .image{}`CSS

或者`middle`或者`bottom`...

呃？为什么我在这件事上被否决了？

[http://jsfiddle.net/y2KV7/](http://jsfiddle.net/y2KV7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:41:07.443

我通过执行以下操作使其工作：

**HTML：**

```
<div id="wrapper">
 <div id="carousel-images">
  <img src="http://eurosensus.org/img/initiatives-300/30kmh.png" />
  <img src="http://eurosensus.org/img/initiatives-300/affordableEnergy.png"/>
  <img src="http://eurosensus.org/img/initiatives-300/basicIncome.jpg"/>
  <img src="http://eurosensus.org/img/initiatives-300/ecocide.jpg"/>
  <img src="http://eurosensus.org/img/initiatives-300/educationTrust.jpg"/>
 </div>
</div> 
```

**CSS：**

```
#wrapper 
{ 
 width: 100%; 
 text-align: center; 
 background: blue; 
}

#carousel-images 
{
 width: 960px;
 white-space: nowrap;
 font-size: 0;
 margin: 0 auto;
}

#carousel-images img 
{
 display: inline;
 max-width: 192px;
 max-height: 119px;
 border: 1px solid black;
 vertical-align: middle;
} 
```

***[单击此处查看工作中的 jsFiddle 演示](http://jsfiddle.net/2KZtz/)***

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T22:34:54.933

首先，不要让世界回到10年前。不要使用标签进行格式化。我还建议您阅读一些有关 div 和 span 以及显示属性之间的差异的信息。[您可以在http://www.w3schools.com](http://www.w3schools.com)上轻松找到信息。

如果你想要一个中心容器。你可以使用 CSS 边距自动技巧。

像margin:5px auto; 将容器水平居中。

# c# - Streamreader 在关闭时冻结

> ID：15693247
> 
> 赞同：1
> 
> 时间：2013-03-28T22:26:14.867
> 
> 标签：c#

我有一个应用程序可以根据关键字从 Twitter 上读取推文。这些关键字可以定期更改，当它们发生变化时，我需要关闭并重新打开流。我能够打开流没有问题，但是当我尝试关闭该流时遇到问题。这是一些示例代码：

```
 try
        {
            response = (HttpWebResponse)request.GetResponse();
            using (Stream stream = response.GetResponseStream())
            {
                using (StreamReader reader = new StreamReader(stream))
                {
                    WriteLogMessage("Stream open - entering loop");
                    while (true)
                    {
                        if (count == 10) break;
                        count++;

                        string tweet = reader.ReadLine();
                        Console.Write(tweet);
                    }

                    WriteLogMessage("Exited loop");
                }
                /**** Program seems to freeze and never gets past this point ****/
                WriteLogMessage("Reader disposed");
            }
            WriteLogMessage("Stream disposed");
        }
        catch (Exception ex)
        {
            WriteLogMessage(ex.Message);
        }
        finally
        {
            if (response != null)
                response.Dispose();
            WriteLogMessage("Response closed");
        } 
```

此代码在我的 win7 (x64) 机器上运行良好。但是，当我将其部署到服务器 2008 或服务器 2012（均为 x64）时，我看到了这种冻结行为。除了 twitter 需要的标头之外，我没有在 HttpWebRequest 上设置任何参数。有人对发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:51:37.413

我不时遇到这种情况。由于我不完全理解的原因，流希望保持打开状态，直到它收到所有内容。这对我来说成了一个问题，我会`request.Abort`在关闭流之前打电话。例如，在您的代码中，我会写：

```
 WriteLogMessage("Exited loop");
    request.Abort();
} 
```

前段时间我在博客上写过：http: [//www.informit.com/blogs/blog.aspx? uk=The-hanging-web-request](http://www.informit.com/blogs/blog.aspx?uk=The-hanging-web-request)

# c# - Timer Job 是这项工作的正确工具吗？

> ID：15693251
> 
> 赞同：5
> 
> 时间：2013-03-28T22:26:33.390
> 
> 标签：c#, asp.net, web-applications, timer, signalr

假设您有一个应用程序可以让用户监控他们所有的牛奶罐。所有的牛奶罐都会在某个时候过期。

我想监控所有的牛奶罐，看看它们的“isExpired”属性是真还是假。

我是否应该每隔一段时间使用诸如 timerjob 之类的东西来迭代所有的水罐来更新属性？如果我想在水壶过期后*立即获得反馈怎么办？*在 .NET/C# 世界中，我可以使用哪些工具来降低成本/提高效率？

一旦水罐过期，我最终会使用诸如 signalR 之类的东西向 Web 客户端推送通知——我只是不知道如何确定水罐何时过期，而不需要不断地迭代所有内容。

==

请原谅我在其中塞入两个问题，但显然只有在用户观看水壶时发送通知才重要。因此，也许仅在用户会话处于活动状态时运行的 timerjob 会起作用？任何提示/推荐阅读这里都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:38:16.703

如果您想在水壶过期时*立即收到*通知，您可以执行以下操作：

```
Scan the list of jugs and find the one with the earliest expiration date
Set a timer to expire at that date/time.
When the timer expires, remove that jug from the list.
Scan the list of jugs to find any other jugs that expire at this time.
Send notifications for all the expired jugs.
Go to step 1. 
```

这个算法有几个问题：

*   如果你添加一个水壶，你必须检查它的过期时间是否在当前最早的过期时间之前。如果是这样，您必须为当前水壶的到期时间重置计时器。
*   同样，如果您从列表中删除一个水壶，您必须检查它是否是您等待到期的那个。如果是这样，您必须找到新的最早的水壶并重置计时器。
*   扫描一个非常大的水壶列表可能会很昂贵，尽管你只需要在一个水壶过期时才这样做。

您可以通过对列表进行排序来免除自己扫描列表的麻烦。然后你知道最早的到期日期总是在列表的顶部。添加新水壶时，只需按过期时间插入即可。您可以使用二进制搜索来确定插入的位置。

或者，您可以使用优先级队列（二进制堆或跳过列表）按到期日期存储罐子。您使用哪种数据结构取决于您拥有多少项目以及更新它的频率。罐子越多，访问它们的频率越高，您就越应该关注有效的数据结构。

这种方法的美妙之处在于，您的计时器仅在您需要使水壶过期时才会滴答作响。你*从不*投票。

在 .NET 中创建这样的一次性计时器很简单：

```
TimeSpan expirationDelay = jug.ExpirationDateTime - DateTime.Now;

System.Threading.Timer jugTimer = new System.Threading.Timer(
    JugExpirationCallback, null, expirationDelay, TimeSpan.FromMilliseconds(-1)); 
```

构造函数的最后一个参数告诉它不是周期性计时器，而是触发一次并退出。然后，您可以通过调用计时器的`Change`方法来更新下一个水壶的计时器。

请注意，计算`expirationDelay`不考虑夏令时。如果您想这样做，您需要`DateTime`在进行计算之前将这些值转换为 UTC。或者，您可以使用[WaitableTimer](http://www.devsource.com/c/a/Languages/Waitable-Timers-in-NET-CSharp/)来执行此操作。文末有 WaitableTimer 源的链接。

## 评论后的附加信息

我怀疑，在您发表评论后，您想通知登录用户有关过期的水壶。我可能会使用一个集合（列表或优先级队列），其中包含每个登录用户的一个水罐：最早过期的一个。当用户的项目过期时，您可以执行数据库查询以获取该用户下一个将过期的项目，并将其添加到列表中。当然，这取决于您希望拥有多少用户、每个用户拥有多少罐子以及物品多久到期一次。

您可以尝试将它们全部保存在内存中，但是您必须管理更新。也就是说，如果数据库得到更新，您也必须更新内存中的表示。如果每个用户只保留一个，这个问题就大大简化了。而且它还需要更少的内存。

无论您决定如何填充列表，基本思想都保持不变：创建一个计时器，该计时器配置为在最早的项目到期时触发。当每个项目到期时，重置下一个项目的计时器。

您如何决定将项目添加到列表中“只是一个细节”。我无法提出更具体的建议，因为我对您的申请了解不够。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:16:02.500

最简单的解决方案是使用计时器 ( [http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx) )，然后在计时器到期时引发事件。计时器可以根据用户是否正在观看来设置/重置。在服务器上引发事件后，您可以使用 SignalR 在客户端调用相关方法/通知用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:34:16.343

使用[排序列表](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)来保存你的牛奶罐，然后你只需要检查一个（或者更确切地说检查直到失败，但通常是 1）。然后您可以在刻度上取剩余的时间差，如果它低于默认值（30 秒？），请缩短时间间隔。

另外一个忠告不要更新属性，但有一个 timedate 属性 expireDate，要求“剩余秒数”或任何你必须更新的东西都是在自找麻烦。（抱歉，您对更新属性的评论让我担心），至于实际是过期的属性，只需让 get 操作检查过期日期，不要担心设置它。

好吧，它可以检查活动会话是的。

# asp.net - 用于 ASP.NET 网络表单的引导程序

> ID：15693253
> 
> 赞同：8
> 
> 时间：2013-03-28T22:26:45.437
> 
> 标签：asp.net, twitter-bootstrap, webforms

我正在尝试在 ASP 网络表单上学习 twitter 引导程序，谁能告诉我如何在从站点地图数据源加载的菜单控件上应用引导程序。如果有任何专门用于网络表单的教程链接，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T22:30:14.723

这个教程很好：

[http://geekswithblogs.net/JeremyMorgan/archive/2012/09/18/how-to-use-twitter-bootstrap-on-an-asp.net-website.aspx](http://geekswithblogs.net/JeremyMorgan/archive/2012/09/18/how-to-use-twitter-bootstrap-on-an-asp.net-website.aspx)

这是一个非常普遍的问题，但基本上你想为你的 web 控件分配一个 DOM ID，并且 javascript 看起来与你在 Twitter Bootstrap 示例中看到的几乎相同。

# iphone - NSString 比较特殊字符独立

> ID：15693254
> 
> 赞同：0
> 
> 时间：2013-03-28T22:26:45.733
> 
> 标签：iphone, objective-c, macos, cocoa, nsstring

如何比较两个独立于字符的 NSString？

`NSPredicate`提供`==[d]`比较器。
但是我没有找到`NSString`直接比较两个 s 的方法。

* * *

例如，这两个字符串应该被认为是相同的：

> Šämplé Štrïñg
> 
> 示例字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:30:59.010

```
NSString *s1 = @"Šämplé Štrïñg";
NSString *s2 = @"Sample String";
NSComparisonResult cmp = [s1 compare:s2 options:NSDiacriticInsensitiveSearch];
// --> cmp = NSOrderedSame 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T22:31:10.300

使用`compare:options:`：

```
NSString *str1 = ...;
NSString *str2 = ...;
NSComparisonResult result = [str1 compare:str2 options:NSDiacriticInsensitiveSearch | NSCaseInsensitiveSearch | NSWidthInsensitiveSearch]; 
```

如果要对字符串执行其他操作，可以将两个字符串折叠成更简单的形式：

```
NSString *fold1 = [str1 stringByFoldingWithOptions:NSDiacriticInsensitiveSearch | NSCaseInsensitiveSearch | NSWidthInsensitiveSearch locale:[NSLocale currentLocale]];
NSString *fold2 = [str2 stringByFoldingWithOptions:NSDiacriticInsensitiveSearch | NSCaseInsensitiveSearch | NSWidthInsensitiveSearch locale:[NSLocale currentLocale]];
NSRange range = [fold1 rangeOfString:fold2]; // or other string comparisons 
```

# javascript - Chrome 扩展程序 - 防止页面重新加载

> ID：15693257
> 
> 赞同：5
> 
> 时间：2013-03-28T22:26:56.783
> 
> 标签：javascript, html, google-chrome-extension

我有一个 Chrome 扩展程序，当单击图标时会加载 popup.html。我在该页面中有一个 iFrame。但是，每次有人打开弹出窗口时，页面（连同 iFrame）都会刷新。有什么方法可以防止每次有人打开弹出窗口时重新加载页面？（有没有办法缓存它？）

# ios - iOS RSS 解析器问题

> ID：15693261
> 
> 赞同：0
> 
> 时间：2013-03-28T22:27:03.677
> 
> 标签：ios, rss

我在 iOS 上使用[这个](http://www.touch-code-magazine.com/tutorial-building-advanced-rss-reader-with-ios6/)RSS 解析器。我试图解析[这个](http://www.fifa.com/worldcup/news/rss.xml)新闻提要。我得到了结果，但一些 HTML 标签也显示在我的视图中，比如“strong”和一些 p 标签。

我试图研究“GTMNSString+HTML”类，但不知道如何解决这个问题。

有没有人使用这个解析器并且有同样的问题？如果您有任何解决方案，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T15:39:57.267

问题不在于您的解析器。提要包含 HTML。如果你不想要它，你需要去掉它。

# serialization - .NET 4.5 中的序列化异常

> ID：15693262
> 
> 赞同：4
> 
> 时间：2013-03-28T22:27:07.757
> 
> 标签：serialization, xml-serialization, .net-4.5

当我调用时，我得到了这个堆栈跟踪：

```
XslCompiledTransform.Transform(XmlDocument.DocumentElement.CreateNavigator(), null, StringWriter)

System.Configuration.ConfigurationErrorsException: Configuration system failed to initialize ---> System.Runtime.Serialization.SerializationException: Type is not resolved for member --MyProject stuff
   at System.AppDomain.GetHostEvidence(Type type)
   at System.Security.Policy.AppDomainEvidenceFactory.GenerateEvidence(Type evidenceType)
   at System.Security.Policy.Evidence.GenerateHostEvidence(Type type, Boolean hostCanGenerate)
   at System.Security.Policy.Evidence.GetHostEvidenceNoLock(Type type)
   at System.Security.Policy.Evidence.RawEvidenceEnumerator.MoveNext()
   at System.Security.Policy.Evidence.EvidenceEnumerator.MoveNext()
   at System.Configuration.ClientConfigPaths.GetEvidenceInfo(AppDomain appDomain, String exePath, String& typeName)
   at System.Configuration.ClientConfigPaths.GetTypeAndHashSuffix(AppDomain appDomain, String exePath)
   at System.Configuration.ClientConfigPaths..ctor(String exePath, Boolean includeUserConfig)
   at System.Configuration.ClientConfigPaths.GetPaths(String exePath, Boolean includeUserConfig)
   at System.Configuration.ClientConfigurationHost.get_HasRoamingConfig()
   at System.Configuration.ClientConfigurationHost.IsConfigRecordRequired(String configPath)
   at System.Configuration.BaseConfigurationRecord.hlNeedsChildFor(String configName)
   at System.Configuration.Internal.InternalConfigRoot.GetConfigRecord(String configPath)
   at System.Configuration.ClientConfigurationSystem.OnConfigRemoved(Object sender, InternalConfigEventArgs e)
   --- End of inner exception stack trace ---
   at System.Configuration.ConfigurationManager.PrepareConfigSystem()
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at System.Xml.XmlConfiguration.XmlReaderSection.get_ProhibitDefaultUrlResolver()
   at System.Xml.XmlTextReaderImpl.get_IsResolverNull()
   at System.Xml.Xsl.QueryReaderSettings..ctor(XmlReader reader)
   at System.Xml.Xsl.Xslt.XsltLoader.Load(Compiler compiler, Object stylesheet, XmlResolver xmlResolver)
   at System.Xml.Xsl.Xslt.Compiler.Compile(Object stylesheet, XmlResolver xmlResolver, QilExpression& qil)
   at System.Xml.Xsl.XslCompiledTransform.LoadInternal(Object stylesheet, XsltSettings settings, XmlResolver stylesheetResolver)
   at System.Xml.Xsl.XslCompiledTransform.Load(XmlReader stylesheet, XsltSettings settings, XmlResolver stylesheetResolver)
   at MyProject 
```

XslCompiledTransform 对象将使用 GetManifestResourceStream 的 XmlReader 加载到嵌入的 .xslt 文件中，但我已经确认它可以正确获取该信息。

我已经看了很多，并将其缩小到这个电话，但我不知道从这里去哪里。有没有其他人经历过这个？

这是在 Windows 8 机器上，但我在 server2008r2 操作系统上体验过

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T08:07:53.220

我在使用 .NET 4.5 时遇到了同样的错误。我只在使用 nunit 2.6+ 时看到错误。当您在子 AppDomain 中使用存储在 CallContext 中的对象初始化 XmlSerializer 时，似乎会发生这种情况。如果在子 AppDomain 中将 ApplicationBase（bin-path）设置为不同的值，则无法解析 CallContext 中的对象类型。您可以在 Fusion Log Viewer 中看到程序集绑定错误：http: [//msdn.microsoft.com/en-us/library/e74a18c4.aspx](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)

在我的情况下，如果我将带有类型的程序集复制到 nunits bin-path，错误就会消失。这当然不是一个可行的解决方案。

您找到错误的根本原因了吗？

编辑：我通过让类型继承 MarshalByRefObject 来修复它：[将项目从 vs2005 迁移到 vs2010 (MSTest) 后，类型不能在 UnitTest 中解析](https://stackoverflow.com/questions/7539557/type-cant-be-resolve-in-unittest-after-migrating-project-from-vs2005-to-vs2010)

编辑 2：替代解决方法是在代码失败之前调用 System.Configuration.ConfigurationManager.GetSection("dummy") 。

# objective-c - 插入 UINavigationController 堆栈的 UIViewController 丢失 UIAppearance 设置

> ID：15693265
> 
> 赞同：3
> 
> 时间：2013-03-28T22:27:14.043
> 
> 标签：objective-c, uinavigationcontroller, uiappearance

我为导航栏设置了 UIAppearance。

```
[[UINavigationBar appearance] setTitleTextAttributes: [self navigationBarTitleTextAttributes]];

-(NSDictionary *)navigationBarTitleTextAttributes
{
    // UINavigationBar title
    NSNumber *navBarTitleShadowOpacity = [self.personalityDictionary objectForKey:kNavBarTitleShadowOpacity];
    UIColor *navBarTitleColor = [UIColor colorWithHexString: [self.personalityDictionary objectForKey:kNavBarTitleColor] alpha:1.0f];
    UIColor *navBarTitleShadowColor = [UIColor colorWithHexString:[self.personalityDictionary objectForKey:kNavBarTitleShadowColor] alpha: [navBarTitleShadowOpacity floatValue]];

    return [NSDictionary dictionaryWithObjectsAndKeys:
     navBarTitleColor, UITextAttributeTextColor,
     navBarTitleShadowColor, UITextAttributeTextShadowColor,
     [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
     nil];
} 
```

一切都完美无缺。在我的应用程序中，我需要将一个视图控制器插入堆栈并弹出它。

```
ChatsViewController* chatsViewController = [[ChatsViewController alloc] init];

NSMutableArray *mutableViewControllers = [self.navigationController.viewControllers mutableCopy];

[mutableViewControllers insertObject: chatsViewController atIndex: [mutableViewControllers count] - 1];

[self.navigationController setViewControllers: mutableViewControllers animated: NO];

[self.navigationController popToViewController: chatsViewController animated: YES]; 
```

此时，标题栏失去了外观设置，回到了默认的白色。任何推入堆栈的新视图控制器也会失去其外观。

有什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T07:33:33.660

如果您在 appDelegate 类中自定义它，那么这个问题将永远不会出现。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions
  {
   // Code.........

   [[UINavigationBar appearance] setTitleTextAttributes: [self navigationBarTitleTextAttributes]]
  }

-(NSDictionary *)navigationBarTitleTextAttributes
 {

// NSNumber *navBarTitleShadowOpacity = [self.personalityDictionary objectForKey:kNavBarTitleShadowOpacity];
 UIColor *navBarTitleColor = [UIColor redColor];//: [self.personalityDictionary objectForKey:kNavBarTitleColor] alpha:1.0f];
 UIColor *navBarTitleShadowColor = [UIColor  greenColor];//colorWithHexString:[self.personalityDictionary objectForKey:kNavBarTitleShadowColor] alpha: [navBarTitleShadowOpacity floatValue]];

return [NSDictionary dictionaryWithObjectsAndKeys:
        navBarTitleColor, UITextAttributeTextColor,
        navBarTitleShadowColor, UITextAttributeTextShadowColor,
        [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
        nil];
  } 
```

希望它会帮助你。

# android - Eclipse 和 Android NDK 在 JNI 以外的另一个文件夹中编译 C++ 代码

> ID：15693268
> 
> 赞同：1
> 
> 时间：2013-03-28T22:27:32.457
> 
> 标签：android, eclipse, directory

我有一个带有以下结构的文件夹：

```
/-
 |-CPPCore-
          |-C++ Code
 |-Android-
          |-Eclipse Root Project and standarts folders, "src", "lib", "res"..
          |-jni folder << here the c code to android use
 |-Iphone--
          |-IOS code using CPPCore too managed by xcode 
```

在 cpp core 文件夹中，我有 android 和 ios 的共享代码，在 ios 中，xcode 很容易导入 cppcore 文件夹。现在在eclipse中我不知道如何在同一个文件夹中使用相同的代码，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:53:42.227

我解决我的问题如下：

首先在eclipse上，我点击jni文件夹上的右键>>新文件夹>>高级>>链接到替代位置（链接文件夹）>>浏览器>>选择>>确定

其次，我编辑了我的 Android.mk 文件，如下所示：

```
LOCAL_PATH := $(call my-dir)
CPP_CORE := $(abspath $(call my-dir)/../../CPPCore)
include $(CLEAR_VARS)
LOCAL_MODULE := mymodule
LOCAL_SRC_FILES := codeOnJniFolder.cpp
LOCAL_SRC_FILES += ../../CPPCore/codeOnCppCoreFolder.cpp
LOCAL_C_INCLUDES := codeOnJniFolder.h
LOCAL_C_INCLUDES += $(CPP_CORE) 
include $(BUILD_SHARED_LIBRARY) 
```

就是这样，对我来说很好！

# php - 如何通过 Ajax 将文件从 JavaScript 传输到 PHP

> ID：15693273
> 
> 赞同：2
> 
> 时间：2013-03-28T22:28:05.743
> 
> 标签：php, javascript, jquery, html, ajax

我有一个表单，用户输入他的名字并选择个人资料图片。这些信息和头像应该通过ajax和php添加到mysql db中。

**HTML**：

```
<form id="addWorkerForm" action="addWorker.php" method="post">
  Prename:<input type="text" name="prename" id="prename">
  Lastname:<input type="text" name="lastname" id="lastname">
  Image:<input type="file" id="file_input" name="file_input" >
</form> 
```

**Javascript：**

```
var prename = $('#prename').val();    
var lastname = $('#lastname').val();    
var workerAvatar = $('#file_input').val();

var url = 'xyz/addWorker.php?prename=' + prename + '&lastname=' + lastname + '&avatar=' + workerAvatar;

$.ajax({
    url: url,
    dataType: 'json',
    async: false,
    success: function(data) {

    }
}); 
```

这是访问文件以便在 javascript 中获取其内容的正确方法吗？此外，如何访问 php 文件中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:33:11.510

不，不幸的是，您不能通过将文件的值传递给 php 来上传文件。您必须自己上传文件，或者如果您想继续使用 AJAX 方法，请使用[Plupload](http://plupload.com)

您希望获得的是对上传文件名称的引用，然后将其存储在 a 中`<input type="hidden" value="XXXXXXXX.jpg"/>`并将其作为您的`workerAvatar`. 然后，当您加载页面时，只需在`<img src="XXXXX.jpg"/>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:14:04.317

我最近遇到了一个非常相似的问题，我的问题得到了解答（[JQuery1.8.0: Sending files from forms via AJAX](https://stackoverflow.com/questions/15506855/jquery1-8-0-sending-files-from-forms-via-ajax/15693645#15693645)）。

长话短说，您*可以*通过 AJAX 发送文件，但您需要使用 FormData() 来执行此操作，因为文件需要编码为 XmlHttpRequest 最近才能够执行的“multipart/form-data”（[https：/ /developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)）。

应该是这样的：

```
<button id="ajaxUploadSubmit"> Submit </button>
<script>
var data    = new FormData(document.forms.namedItem("workerAddForm"));

$( "#ajaxUploadSubmit" ).click(function() {
    var oReq    = new XMLHttpRequest();
    oReq.open("POST", "xyz/addwrker.php", true);
    oReq.setRequestHeader("X-Requested-With", "XMLHttpRequest"); //necessary for my application, might not be for you, I'm using CakePHP

    oReq.onload = function(oEvent) {   
        //whatever you want with oReq.responseText
        }
    oReq.send(data);
    };
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T23:26:44.953

你可以试试这个[AjaxFileUpload](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)插件

# emacs - 当我打开 AUCtex 的 Tex-source-correlate-mode 时，Emacs 挂起

> ID：15693276
> 
> 赞同：0
> 
> 时间：2013-03-28T22:28:22.447
> 
> 标签：emacs, auctex

在我启用 Tex-source-correlate-mode 后，Emacs 会问我“启动 Emacs 服务器以在查看器中进行反向搜索？” 当我尝试打开查看器时。但无论我说“是”还是“否”，Emacs 都不再响应。关于这里发生了什么的任何线索？

# unit-testing - Mockito 内部结构

> ID：15693283
> 
> 赞同：6
> 
> 时间：2013-03-28T22:28:52.593
> 
> 标签：unit-testing, testing, mocking, mockito, internals

我试图了解 Mockito 的内部结构如何运作。到目前为止，代码对我来说很难理解，我正在寻找对 Mockito 基本工作原理的高级调查。

[模拟@GrepCode](http://grepcode.com/project/repo1.maven.org/maven2/org.mockito/mockito-all/)

我编写了一些示例代码来展示我目前的理解：

```
class C {
    String s;
    public void getS() { return s; }
    // ...
}

C cm = mock( C.class);
when( cm.method() ).thenReturn( "string value"); 
```

据我所知，“模拟”方法只看到 cm.getS() 的返回值。它如何知道方法的名称是什么（以便存根）？此外，它如何知道传递给该方法的参数？

mockito API 方法调用内部对象的方法：

```
// org.mockito.Mockito
public static <T> OngoingStubbing<T> when(T methodCall) {
    return MOCKITO_CORE.when(methodCall);
} 
```

我已经将方法调用跟踪到了几个不同的抽象以及类和对象中，但是代码是如此解耦，以至于很难理解这种方式。

```
//  org.mockito.internal.MockitoCore
public <T> OngoingStubbing<T> when(T methodCall) {
    mockingProgress.stubbingStarted();
    return (OngoingStubbing) stub();
} 
```

因此，如果有人了解内部结构或有讨论/博客文章的链接，请分享:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-29T06:31:20.930

（对不起，这很长。TL；DR：Mockito 记录了幕后的方法调用。）

```
C cm = mock(C.class); 
```

在这一点上，你可能会认为这`cm`是`C`……的一个例子，你就错了。相反，`cm`它是一个[代理对象](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html) `Mockito`的实例，它实现`C`（因此可以分配给 C 类型的字段/变量）但记录您要求的所有内容并按照您存根的方式运行。

让我们手动编写一个模拟类......并再给它一个方法，比如说，它在实际类`int add(int a, int b)`中添加`a`and 。`b`

```
class MockC extends C {
  int returnValue;

  @Override int add(int a, int b) {
    return returnValue;
  }
} 
```

那里！现在，无论何时调用`add`，它都不会添加两个数字，而是只返回单个返回值。说得通。但是，如果您想稍后验证调用怎么办？

```
class MockC extends C {
  List<Object[]> parameterValues = new ArrayList<>();
  int returnValue;

  @Override int add(int a, int b) {
    parameterValues.add(new Object[] { a, b });
    return returnValue;
  }
} 
```

所以现在您可以检查`parameterValues`列表并确保它按预期调用。

事情是这样的： Mockito*使用**[CGLIB](https://github.com/cglib/cglib)**生成一个[代理](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)，它自动像 MockC 一样工作，将所有交互和返回值保存在一个大的静态列表中。*该列表被称为[`RegisteredInvocations`](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/internal/verification/RegisteredInvocations.java#RegisteredInvocations)，而不是`Object[]`每个模拟的每个方法调用都是一个[`Invocation`](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/internal/invocation/InvocationImpl.java)，但想法是相同的。

要了解更多关于它所公开`RegisteredInvocations`的方法以及为什么`removeLast`如此重要的信息，请阅读[`InvocationContainer`](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/internal/stubbing/InvocationContainerImpl.java). 因为 Mockito 记录了每一个调用，它自然会记录其中包含的交互`when`。一旦 Mockito 看到`when`，它就会*删除最后记录的交互*（[InvocationContainerImpl.java](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/internal/stubbing/InvocationContainerImpl.java)第 45 行）并将其用作存根的模板——从 Invocation 对象本身读取参数值。

这可以解决大部分问题，除了参数匹配器`eq`和`any`: 结果这些只是[保存在一个](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/internal/invocation/MatchersBinder.java#31)名为[`ArgumentMatcherStorage`](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/internal/progress/ArgumentMatcherStorageImpl.java). 该`when`调用[检查堆栈上有多少匹配器](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/internal/invocation/MatchersBinder.java#31)：`add`例如，零匹配器告诉 Mockito 推断与每个记录的参数相等，两个匹配器告诉 Mockito 将它们从堆栈中弹出并使用它们。只有一个匹配器意味着 Mockito 无法判断您要匹配哪个整数并抛出经常令人困惑的[`InvalidUseOfMatchersException`](http://grepcode.com/file/repo1.maven.org/maven2/org.mockito/mockito-all/1.9.5/org/mockito/exceptions/misusing/InvalidUseOfMatchersException.java)，这就是为什么在使用匹配器时，如果您匹配任何参数，则需要匹配每个参数。

希望有帮助！

**编辑：** [这个答案](https://stackoverflow.com/questions/14440270/how-does-mockito-when-invocation-work)描述了该`when`方法如何在更多技术细节上工作。

# javascript - JavaScript 循环中闭包的区别

> ID：15693286
> 
> 赞同：1
> 
> 时间：2013-03-28T22:29:01.770
> 
> 标签：javascript, closures

这些功能有什么区别？为什么第一个工作，第二个没有按预期工作？

[http://jsfiddle.net/GKDev/x6pyg/](http://jsfiddle.net/GKDev/x6pyg/) （这个工作）

[http://jsfiddle.net/GKDev/bv4em/](http://jsfiddle.net/GKDev/bv4em/)（这不是）

我正在尝试遍历输入元素并在它们上添加 onfocus 事件：

```
for (var i = 0; i < helpText.length; i++) {
    var item = helpText[i];

    document.getElementById(item.id).onfocus = function() {
        showHelp(item.help);
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:33:41.990

在您的非工作示例中，当调用匿名函数时，它具有循环完成执行`item`时它保存的最后一个值。`for`那是因为这个变量属于包含`for`循环的父函数。

在您的工作示例中，您创建一个新函数，`item`像这样传递当前值：

```
function (help) {
            return function () {
                showHelp(help); // <-- This will be the value enclosed in this anonymous function
            };
        }(item.help); // <-- Calls an anonymous function passing in the current value 
```

这会围绕该值创建一个新的闭包，因为它在该迭代期间存在。当调用匿名函数时，它使用该本地值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T22:33:56.917

它被视为：

```
var item;

for (var i = 0; i < helpText.length; i++) {
    item = helpText[i];

    document.getElementById(item.id).onfocus = function() {
        showHelp(item.help);
    };
} 
```

循环在任何焦点回调触发之前完成，此时`item`是分配的最后一项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:36:46.287

事实上这很容易。

在第一种情况下，您在闭包内传递 item.help，它充当本地副本。它就像是其范围的囚徒。外面发生了什么，没人关心。

```
for (var i = 0; i < helpText.length; i++) {
        var item = helpText[i];
        document.getElementById(item.id).onfocus = function (help) {
            return function () {
                showHelp(help);
            };
        }(item.help);
    } 
```

在第二个中，没有保存 item 值的闭包，这意味着当 item 被计算时，它计算为它的实际值，即：数组的最后一个元素，因为 for 的最后一个循环将它的值设置为数组的最后一个值。

```
for (var i = 0; i < helpText.length; i++) {
    var item = helpText[i];
    document.getElementById(item.id).onfocus = function() {
      showHelp(item.help);
    }
  } 
```

# html - 网站在 Firefox 中快，在 Internet Explorer 中平庸，在 Google Chrome 中慢

> ID：15693288
> 
> 赞同：0
> 
> 时间：2013-03-28T22:29:04.567
> 
> 标签：html, css, internet-explorer, google-chrome, firefox

正如标题所示，我的网站按照我希望它在 Firefox 中的工作方式运行：当我使用向下箭头时，它不会闪烁。但是这个功能在 IE 和 Chrome 中是没有的。有解决办法吗？该网站如下：[Contrabang](http://contrabang.com)。提前感谢您的帮助。

HTML如下：

```
 <section class="main">

             <div class="icons">
              <a class="twitter" target="_blank" href="http://www.twitter.com/kadeemlaurie"></a>
              <a class="facebook" target="_blank" href="http://www.facebook.com/pages/Contrabang/127379984089682"></a>
              <a class="googleplus" target="_blank" href="http://googleplus.com/pages"></a>
             </div>

            <div id="wrap">
              <div id="featured">
                <div class="wrap">
                  <div class="textwidget">
                    <div class="cup">
                      <img src="../Contrabang/img/red-cup.png" height="200" alt="red-cup">
                    </div>
                  </div>
                </div>
              </div>

              <div id="theFixed"><h1>CONTRABANG</a></h1></div>

            <div class="bg1">

              <hgroup class="billboard second">
                <h2 style="font-size: 33px; opacity: 1; font-family: 'dosis'">
             We are an events management agency based in London. We create memorable experiences. Check out our upcoming event.</h2>

            </hgroup>

            <br>
            <br>
            <br>

            <div class="pad">
             <a href="events"> <img src="../Contrabang/img/Contrabang.jpg"  width="300" height="400" alt="contrabang"></a>
            </div>
                <h2 style="font-size: 33px; opacity: 1; font-family: 'dosis'">
             Buy Tickets: 07949747971</h2>
            </div>

            </div>

            </section> 
```

& 主要的 CSS

```
 .main{text-align:center;}

                  #featured {
                    background: #E94F78 url(http://www.contrabang.com/Contrabang/img/bubbles.png) no-repeat top;

                    background-size: 385px 465px;
                    color: #fff;
                    height: 535px;
                    overflow: hidden;
                    position: relative;
                    z-index: -2;
                  }

                  #featured .wrap {
                    overflow: hidden;
                    clear: both;
                    padding: 70px 0 30px;
                    position: fixed;
                    z-index: -1;
                    width: 100%;
                  }

                  #featured .wrap .widget {
                    width: 80%;
                    max-width: 1040px;
                    margin: 0 auto;
                  }

                  .textwidget{
                    padding: 0;
                  }

                  #wrap {
                    margin: 0 auto;
                    padding: 0;
                  }

                  .cup{

                    margin-top:210px;
                  }

                  body, h1, h2, h3, p {
                    margin: 0; 
                    padding: 0;
                  }

                  a { 
                    text-decoration: none;

                  }

                  a img { border: 0; }

                  #theFixed{
                    position:fixed;
                    background-image:url(http://www.contrabang.com/Contrabang/img/leopard-print.jpg);
                    width:100%;
                    text-align:center;
                    overflow: hidden;
                    background-position: center;

                  }

                  h1{
                    font: 800 1.313em "proxima-nova", sans-serif;
                    font-size:3.125em;
                    text-align:center;
                    padding:10px 10px;
                    margin:20px 20px;
                    background-color:#E94F78;
                    padding-left: 0.15em;
                    text-decoration:none;
                    display:inline-block;
                    letter-spacing: 6px;
                    padding-left: 0.15em;
                    color:yellow;

                  }

                  h1 a{
                    text-decoration: none;
                    letter-spacing: 8px;
                    padding-left: 0.15em;
                    color:yellow;

                  }

                  .bg1{
                  background-image:url(http://www.contrabang.com/Contrabang/img/grey-background.jpg);
                    width: 100%;
                    height:900px;

                    background-color: #e94f78;}

                  h2{

                  font-family: georgia;
                  font-size:3em;
                    color:black;
                  }

                  .billboard {
                    overflow: hidden;
                    width: 960px;
                    margin-left: auto;
                    margin-right: auto;
                      text-align: center;
                  }

                  .pad{
                    padding:20px;
                  }

                  .billboard a {
                    color: #000000;   
                  }

                  .billboard {
                    padding-top:230px;
                  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:44:33.530

那个 Rita Ora 图像的大小几乎是 4mb。我敢猜测那是你的罪魁祸首。

我建议做一些关于优化图像以在网络上使用的阅读。

该图像最多应约为 30/40k。

# jquery - ajax 调用仅在页面刷新时获取最新数据

> ID：15693296
> 
> 赞同：0
> 
> 时间：2013-03-28T22:29:47.483
> 
> 标签：jquery, ajax, json

我遇到一个问题，json jquery 调用仅在页面加载后刷新页面时起作用。即在页面加载时不刷新数据，在刷新页面时刷新数据。它提供一个选择列表。我有以下 jquery ajax 设置：

```
$(document).ready(function() { 
    $.ajaxSetup({'async': false, 'cache':false}); 
```

以下是我的 json 声明：

```
 $.getJSON('ajax.cfm?action=refresh_bsu&site='+site+'&BaseLineYear='+BaselineYear+'&item=EnergyData', function(EnergyData) {
        SiteEnergyData = EnergyData; //Make it a global variable        
    }); 
```

这是完整的功能：

```
function GetEnergyData(){
    var site = $("#busUnitSubGroup").val();
    var BaselineYear = $("#BaselineYear").val();

    SiteEnergyData = "";

    $.getJSON('ajax.cfm?action=refresh_bsu&site='+site+'&BaseLineYear='+BaselineYear+'&item=EnergyData', function(EnergyData) {
        SiteEnergyData = EnergyData; //Make it a global variable        
    }); 
} 
```

任何人都可以帮我解决这个问题吗？

谢谢JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:20:22.290

I believe you might need define the function outside of doc ready, so that it is defined by the time the doc.ready event fires:

```
$(document).ready(function(){   

    GetEnergyData();          

    ...

});

function GetEnergyData(){
  ....
} 
```

However, it seems like you should be getting some javascript errors if that is the problem. You should check the F12->console to see if there are any errors and what line it is saying the error is on.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:03:49.167

(a)`SiteEnergyData`在函数外部定义`GetEnergyData()`（因为您已经注意到它是一个全局变量）。如果没有，它将仅在该函数中可见。

(b) 你`GetEnergyData()`准备好在文档中的某个地方打电话了吗？我假设是这样，因为（出于某种原因）它适用于重新加载但不适用于初始加载。

```
$(document).ready(function(){

    var SiteEnergyData = "";  // (a) global variable... well, within doc ready
    GetEnergyData();          // (b) calls function once page is loaded

    ...

    function GetEnergyData(){
        ....
    }
}); 
```

# javascript - 用jquery改变文本

> ID：15693298
> 
> 赞同：0
> 
> 时间：2013-03-28T22:29:51.483
> 
> 标签：javascript, jquery, json, object, dynamic

我试图用 html css 和 jquery 进行动态测验，当我尝试`<p id=question></P>`使用 jquery 更改时没有任何反应，我给你留下了我的 html 和 jquery 代码。

```
<!DOCTYPE html>
<html lang='es'>
<head>
<meta charset='UTF-8'>
<title>Dynamic Quiz</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css">
<link rel="stylesheet" type="text/css" href="css/estilos.css">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/prefixfree.js"></script>
<script type="text/javascript" src="js/codigo.js"></script>
</head>
<body>
<header>
    <hgroup>
        <h1>This is my Dynamic Quiz</h1>
        <h2>Using html5 / css / javascript</h2>
    </hgruop>
</header>

<section id='description'>
    <p>This quiz is compossed by 10 questions, you have to answer at least 7
       from 10 to pass the exam.</p>
    <h2>Lets start!</h2>
</section>

<div id='questions-number'>
    <p>Question <span id='current-question'>1</span> of <span>10</span> </p>
</div>

<section id='questions'>
    <p id='question'></p>

    <ul>
        <li><input type='checkbox' /><label>answer0</label></li>
        <li><input type='checkbox' /><label>answer1</label></li>
        <li><input type='checkbox' /><label>answer2</label></li>
        <li><input type='checkbox' /><label>answer3</label></li>
    </ul>
</section>

<div id='next'>
    next
</div>
</body>
</html> 
```

这是我的jQuery代码....

```
$(document).on('ready', ready);
function ready(){
var allQuestions =
[
    {
        question1: "Whats my real name?",
        choices1: ["Jhonnatan", "Alberto", "Tatan","Jaime"],
        answer1: 0
    },

    {
        question2: "Who is Colombia's president?",
        choices2: ["Alvaro Uribe", "Andres Pastrana", "Juan Manuel Santos","Tatan"],
        answer2: 2
    },

    {
        question3: "My favorite super heroe?",
        choices3: ["Batman", "Flash", "Tatan","Javascript"],
        answer3: 3
    },

    {
        question4: "Wich sports do i practice?",
        choices4: ["Climbing", "Swimming", "Programming","Running"],
        answer4: 0
    },

    {
        question5: "Whats my dad's name?",
        choices5: ["Alberto", "Jorge", "Javier","Jose"],
        answer5: 1
    },

    {
        question6: "Whats my favorite color?",
        choices6: ["Red", "Purple", "Blue","All"],
        answer6: 2
    },

    {
        question7: "My favorite alcoholic drink",
        choices7: ["Vodka", "Aguardiente", "Rum","Tekila"],
        answer7: 3
    },

    {
        question8: "Whats my favorite kind of music?",
        choices8: ["Hardcore", "Reggaeton", "Salsa","Programming"],
        answer8: 0
    },

    {
        question9: "How many qestions has this quiz??",
        choices9: ["20", "8", "10","12"],
        answer9: 2
    },

    {
        question10: "My favorite programming lenguage?",
        choices10: ["Ruby", "Arduino", "Python","Javascript"],
        answer10: 3
    }
];
$('question').text('hola mundo!');
console.log($('question')); 
```

}

我有一个里面有对象的数组，每个对象都包含问题、可能的答案和正确的答案，我喜欢用 jquery 将所有这些动态添加到我的 html 中，当按下下一个按钮更改问题时，如果有人可以帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:31:52.337

`question`不是一个元素，它是一个 ID。要选择 ID，您将使用`#`.

要解决此问题，只需更改`$('question')`为`$('#question')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:32:03.767

您缺少 id 选择器。尝试：

```
$("#question").text("hola mundo!"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:33:51.110

您需要使用`$('#question')`通过 ID 引用元素。只是`$('question')`用于类似的元素`<question></question>`，并且 `$('.question')`用于类。

# javascript - 基于xml父属性设置字体的indesign脚本

> ID：15693299
> 
> 赞同：0
> 
> 时间：2013-03-28T22:29:52.677
> 
> 标签：javascript, xml, adobe-indesign, extendscript

我正在尝试找到一个可以根据导入 XML 父属性设置字体和样式的 Indesign javascript，

```
<product>
    <language value="EN"><feature_1>1000w</feature><feature_2>10 max</feature_2></language>
    <language value="TCN"><feature_1>500w</feature><feature_2>2 max</feature_2></language>
</product>
<product>
    <language value="EN"><feature_1>2000w</feature></language>
    <language value="TCN"><feature_1>2500w</feature><feature_2>2 max</feature_2><color>red</color></language>
</product> 
```

每个功能标签都将位于其自己的标签框架中。

language value="EN" 下的所有子集都将具有类似 Arial 字体，

并且语言值=“TCN”下的所有子集都将具有MingLiU字体

脚本可以做这些吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:10:24.567

您可以将样式映射到特定元素。看看这里 [http://jongware.mit.edu/idcs4js/pc_XMLImportMap.html](http://jongware.mit.edu/idcs4js/pc_XMLImportMap.html)

在使用中它会是这样的：

```
myDoc.xmlImportMaps.add(myDoc.xmlTags.item("someElement"),myDoc.paragraphStyles.item("someparagraphStyle")) ; 
```

# ruby-on-rails - Ruby/Mongoid 用新属性装饰记录

> ID：15693308
> 
> 赞同：1
> 
> 时间：2013-03-28T22:30:32.657
> 
> 标签：ruby-on-rails, ruby, mongoid

我试图弄清楚如何用一个属性装饰一个特定的 Mongoid 记录，以便`to_json`返回包含该属性（请不要告诉我将特定参数传递给`to_json`- 这是双重嵌套的，在这里不起作用）。有没有办法做到这一点？我能想到的只有

```
my_record[:my_special_attribute]='foo' 
```

这当然行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:12:42.780

以下是两个可能适合您的版本：

**覆盖`to_json`：**

```
require 'mongoid'
Mongoid.load!("mongoid.yml", :development)

class MyClass
  include Mongoid::Document

  def to_json(options = {})
    json = JSON.parse(super)
    json['my_special_attribute'] = 'whatever you want'
    json.to_json
  end
end

p MyClass.new.to_json # => "{\"_id\":\"5155899ee44f7ba6e7000001\",\"my_special_attribute\":\"whatever you want\"}" 
```

**将参数传递给`to_json`（对不起 - 为了完整起见）：**

```
require 'mongoid'
Mongoid.load!("mongoid.yml", :development)

class MyClass
  include Mongoid::Document

  def not_a_field
    "whatever you want"
  end
end

p MyClass.new.to_json(methods: :not_a_field) # => "{\"_id\":\"51558b67e44f7bddb7000001\",\"my_special_attribute\":\"whatever you want\"}" 
```

您甚至可以将此选项传递给嵌套记录（我猜这就是您所说的双重嵌套）：

```
my_record.to_json(include: {other_class: {methods: :special_field}}) 
```

您还可以将此方法添加到一个特定记录（= 实例）：

```
my_object = MyClass.new

def my_object.not_a_field
  "whatever you want"
end 
p my_object.to_json(methods: :not_a_field) # => "{\"_id\":\"51558cc8e44f7bd1f6000001\",\"not_a_field\":\"whatever you want\"}" 
```

# css - 使用 jquery mobile 和 google maps 时的样式问题——需要刷新以适应

> ID：15693310
> 
> 赞同：0
> 
> 时间：2013-03-28T22:30:45.063
> 
> 标签：css, google-maps, jquery-mobile, google-maps-api-3

我开始写我的移动网站，我遇到了以下问题：

当我第一次加载索引页面时，点击地图页面，然后![我只看到一小部分](../Images/3d8bd3e9458d2dec4385711850834ac8.png)（左上角）被谷歌地图占据。但是如果我加载地图页面`directly`，它会正确加载：

再说一遍：如果我直接进入带有地图的页面，效果很好！

这是小提琴：http: [//jsfiddle.net/ggrEH/7/](http://jsfiddle.net/ggrEH/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:09:47.307

在 jQuery Mobile 中，默认情况下页面是通过 AJAX 加载的。这就是直接打开页面和通过导航打开页面的区别。建议使用 jQuery Mobile 事件来初始化地图。

我修改了你的例子：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Map Example Multiple Pages</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>jQuery mobile with Google maps</title>
        <meta content="en" http-equiv="content-language">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <style>
            #map_canvas{
                padding-top:0px;
                padding-bottom:-1px;
                padding-left:0px;
                height:auto;
                position:absolute;
                width:100%;
                height:95%;
                max-height:1600px;
                max-width:1600px;
                overflow:hidden;
                display:block;
            }
        </style>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script>
            function initialize() {
                var mapCenter = new google.maps.LatLng(59.3426606750, 18.0736160278),
                myOptions = {
                    zoom:10,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: mapCenter
                },
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            }

            $(document).on("pageshow", "#map-page", function() {
                if ($("#map_canvas").html() === '') {
                    initialize();
                }
            });
        </script>
    </head>

    <body>
        <div data-role="page" id="home-page">
            <!-- /header -->
            <div data-role="header">
                <h1>Maps</h1>
            </div>
            <!-- /content -->
            <div data-role="content">
                <a href="#map-page" data-role="button" data-transition="fade">Click to see the Map</a>
            </div>
        </div>

        <!-- /page -->
        <div data-role="page" id="map-page">
            <!-- /header -->
            <div data-role="header">
                <h1>Map</h1>
                <a href="#home-page" data-icon="home">Home</a>
            </div>
            <!-- /content -->
            <div data-role="content" style="width:100%; height:100%; padding:0; max-height:1600px;">
                <div id="map_canvas"></div>
            </div>
        </div>
    </body>
</html> 
```

**更新：**

基于提供的 jsfiddle 的示例

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Map Example Multiple Pages</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>jQuery mobile with Google maps</title>
        <meta content="en" http-equiv="content-language">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <style>
            .map_canvas{
                padding-top:0px;
                padding-bottom:-1px;
                padding-left:0px;
                height:auto;
                position:absolute;
                width:100%;
                height:95%;
                max-height:1600px;
                max-width:1600px;
                overflow:hidden;
                display:block;
            }
        </style>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script>
            var map, geocoder, initCenter;
            function initialize() {
                geocoder = new google.maps.Geocoder();
                initCenter = new google.maps.LatLng(37, -97);
                var mapCenter = new google.maps.LatLng(59.3426606750, 18.0736160278),
                myOptions = {
                    zoom:10,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: mapCenter
                },
                map = new google.maps.Map(document.getElementById("googlemaps1"), myOptions);
            }

            $(document).on("pageshow", "#maps", function() {
                if ($("#googlemaps1").html() === '') {
                    initialize();
                }
            });
        </script>
    </head>
    <body>
        <div id="home" data-role="page" data-title="Home">
            <div data-role="header" data-position="fixed" data-id="vs_header">
                 <h1>Home</h1>
                <a href="#maps" data-icon="info">maps</a> 
            </div>
            <div data-role="content" id="index-page">
                <div>
                    <p>dsfgsjdg dskfjgskdfsdbf</p>
                </div>
            </div>
        </div>

        <!-- Page: maps -->
        <div id="maps" data-role="page" data-title="Fleet">
            <div data-role="header" data-position="fixed" data-id="vs_header" data-dom-cache="false">
                 <h1>Fleet</h1>
                <a href="#home" data-icon="info" data-iconpos="notext">Home</a>
            </div>
            <!-- header -->
            <div data-role="content" id="map" style="width:100%; height:100%; padding:0; max-height:1600px;">
                <div id="googlemaps1" class="map_canvas"></div>
            </div>
        </div>
    </body>
</html> 
```

我希望这有帮助。

# quickbooks-online - 当从 QBO 查询客户时，我得到了重复的客户

> ID：15693311
> 
> 赞同：0
> 
> 时间：2013-03-28T22:30:45.423
> 
> 标签：quickbooks-online

当我通过客户查询在线查询快速手册时，我似乎不断收到重复。下面是我的代码，我想知道为什么我会多次获得同一个客户。我正在使用分页功能来避免超时。

```
 Dim tCust As New List(Of Intuit.Ipp.Data.Qbo.Customer)

        Dim qcust As New CustomerQuery
        qcust.IncludeJobs = False
        qcust.LastUpdatedTime = FromDate
        qcust.PageNumber = 1
        qcust.ResultsPerPage = 10

        Dim customers As IEnumerable(Of Intuit.Ipp.Data.Qbo.Customer) = qcust.ExecuteQuery(Of Customer)(GetServiceContext)
        While customers.Count > 0
            tCust.AddRange(customers)
            customers = qcust.ExecuteQuery(Of Customer)(GetServiceContext)
            qcust.PageNumber += 1
        End While 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:21:36.147

您没有在正确的位置增加页码，因此您正在执行 PageNum=1 和 ResultsPerPage=10 的两个请求。

页码应在循环中递增，如下所示：

```
Dim tCust As New List(Of Intuit.Ipp.Data.Qbo.Customer)()

Dim qcust As New CustomerQuery()
qcust.IncludeJobs = False
qcust.LastUpdatedTime = New DateTime(2013, 1, 1)
qcust.PageNumber = 1
qcust.ResultsPerPage = 10

Dim customers As IEnumerable(Of Intuit.Ipp.Data.Qbo.Customer) = qcust.ExecuteQuery(Of Customer)(context)
While customers.Any()
    tCust.AddRange(customers)
    If customers.Count() < qcust.ResultsPerPage Then Exit While
    qcust.PageNumber += 1
    customers = qcust.ExecuteQuery(Of Customer)(context)
End While 
```

# jquery - 如何在点击时为一系列动画制作动画？

> ID：15693314
> 
> 赞同：1
> 
> 时间：2013-03-28T22:31:08.230
> 
> 标签：jquery

我有一系列元素，我想在点击时一个一个地制作动画。第一个动画，但下一个不会。我在这里想念什么？

[**演示**](http://jsfiddle.net/andrewtamala/xC95V/16/)

```
$(document).ready(function() {
    $('.button').click(function() {  
        $('.slide').next().animate({"top" : "5000"}, 500);
    })   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:44:29.207

你可以试试这个 - [**DEMO**](http://jsfiddle.net/xC95V/22/)

```
$(document).ready(function(){
    var i = $(".slide").length;

    $('.button').click(function() {  
        i--;
        $('.slide').eq(i).animate({"top" : "5000"}, 500);
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:40:18.097

你的选择器没有按照你的想法做。

```
$('.slide').next().animate({"top" : "5000"}, 500); 
```

`$('.slide')` 这是从类幻灯片中选择所有元素。这意味着它正在选择“幻灯片蓝色”、“幻灯片红色”、“幻灯片黄色”和“幻灯片黑色”。

`$('.slide').next()` 这将采用您选择的所有幻灯片的下一个兄弟（如果有），即“幻灯片蓝色”、“幻灯片红色”和“幻灯片黄色”。

您的动画作用于蓝色、红色和黄色，顶部只留下黑色。

随后的按钮按下什么也不做，因为黑色没有兄弟姐妹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:43:08.983

做这个：

为所有元素添加一个 up 类（只是为了将它们标记为 up），然后使用以下代码：

```
$(document).ready(function(){

    $('.button').click(function(){  
        var slide = $('.slide.up').last();
        slide.toggleClass('up');
        slide.animate({"top" : "5000"}, 500);
    })

}); 
```

经过测试，它可以按预期在您的 jsFiddle 上运行

# sql - 比较 SQL 中的逗号分隔字符串

> ID：15693316
> 
> 赞同：6
> 
> 时间：2013-03-28T22:31:21.467
> 
> 标签：sql, database, sql-server-2008, tsql, varchar

我有来自 CDL 的搜索请求`("1,2,3,4")`，`("1,5")`. 我需要将其与另一个 CDL 进行比较并返回所有匹配的记录。踢球者是每个数字的位置并不总是相同的。

除了我试图匹配`("2,5")`到`("2,4,5")`. 显然字符串不相等，但我需要返回该匹配项，因为它具有第一个 CDL 中的所有值。

[我的 SQL Fiddle 应该说得很清楚......](http://www.sqlfiddle.com/#!3/2cf8b/5/0)

任何帮助将非常感激。

哦，我看到这个[是](https://stackoverflow.com/questions/4215902/search-a-varchar-field-that-contains-all-words-from-another-string)相似的，但这似乎有点激烈，而且我头晕目眩，但我会看看我是否可以尝试理解它。

**编辑**
所以我只是做了一个替换更改`("2,5")`为`("%2%5%")`并更改了要使用的`LIKE`. 从我最初可以看出它似乎正在工作.. [SQL Fiddle](http://www.sqlfiddle.com/#!3/909f2/1/0)我不应该这样做的任何原因，或者我可能很疯狂并且它根本不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:57:10.303

更进一步，离你的答案更近一步。
**[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/2cf8b/9)**

```
 SELECT P.* 
FROM Product P
CROSS APPLY(
  SELECT *
  FROM ShelfSearch SS
  WHERE Patindex(char(37)+replace(ss.shelflist, ',',char(37))+char(37),p.shelflist) > 0
)Shelfs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:55:39.417

您可以使用以下函数将列表转换为表格：

```
CREATE FUNCTION DelimitedStringToTable (@cdl varchar(8000), @delimiter varchar(1))
RETURNS @list table (
    Token varchar(1000)
)
AS
BEGIN

DECLARE @token varchar(1000)
DECLARE @position int

SET @cdl = @cdl + @delimiter -- tack on delimiter to end 
SET @position = CHARINDEX(@delimiter, @cdl, 1)
    WHILE @position > 0
        BEGIN
            SET @token = LEFT(@cdl, @position - 1)
            INSERT INTO @list (Token) VALUES (@token)
            SET @cdl = RIGHT(@cdl, DATALENGTH(@cdl) - @position)        
            SET @position = CHARINDEX(@delimiter, @cdl, 1)      
        END 
    RETURN
END 
```

然后你可以使用这样的东西来查找所有匹配项：

```
SELECT list1.* 
FROM DelimitedStringToTable('1,2,3', ',') list1
INNER JOIN DelimitedStringToTable('2', ',') list2 ON list1.Token = list2.Token 
```

# ruby-on-rails - 控制器默认包装模型

> ID：15693318
> 
> 赞同：2
> 
> 时间：2013-03-28T22:31:30.027
> 
> 标签：ruby-on-rails

```
/app
  /controllers
    /users
      profiles_controller.rb
      users_controller.rb
  /models
    /user
      /profile.rb
    user.rb

#/app/models/user.rb
class User < ActiveRecord::Base
  has_one :profile, class_name: "User::Profile"
end

#/app/models/user/profile.rb
class User::Profile < ActiveRecord::Base
  belongs_to :user
end

#/app/controllers/users/profiles_controller.rb
class Users::ProfilesController < ApplicationController
  layout "layouts/profile"
end

#/app/controllers/users/users_controller.rb
class Users::UsersController < Users::ProfilesController
  def show
    @user = User.find(params[:id])
  end
end 
```

在控制台中访问 Profile 模型时，我没有错误：

```
vagrant@lucid32:/vagrant$ rails c
加载开发环境（Rails 3.2.11）
irb(main):001:0> u = User.new
=> <#User id: nil, created_at: nil, updated_at: nil, username: nil, crypted_pa​​ssword: nil, password_salt: nil, persistence_token: nil, perishable_token: nil, activate_token: nil, login_count: 0, failed_login_count: 0, 已激活: false, 禁止: false, last_request_at: nil, last_login_at: nil, current_login_at: nil, last_login_ip: nil, current_login_ip: nil>
irb(main):002:0> u.build_profile
   (0.5ms) 开始
   (0.4ms) 提交
=> <#User::Profile id: nil, user_id: nil, person: nil, company: nil, company_position: nil, info: nil,birthday: nil, created_at: nil, updated_at: nil>

```

尝试访问用户/用户#show 时出现以下错误。

```
用户中的 LoadError::UsersController#show

预期 /vagrant/app/models/user/profile.rb 来定义 Profile

activesupport (3.2.11) lib/active_support/dependencies.rb:503:in `load_missing_constant'
activesupport (3.2.11) lib/active_support/dependencies.rb:192:in `block in const_missing'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `each'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `const_missing'
activesupport (3.2.11) lib/active_support/dependencies.rb:514:in `load_missing_constant'
activesupport (3.2.11) lib/active_support/dependencies.rb:192:in `block in const_missing'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `each'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `const_missing'
activesupport (3.2.11) lib/active_support/inflector/methods.rb:230:in `block in constantize'
activesupport (3.2.11) lib/active_support/inflector/methods.rb:229:in `each'
activesupport (3.2.11) lib/active_support/inflector/methods.rb:229:in `constantize'
activesupport (3.2.11) lib/active_support/inflector/methods.rb:260:in `safe_constantize'
activesupport (3.2.11) lib/active_support/core_ext/string/inflections.rb:66:in `safe_constantize'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:152:in `_default_wrap_model'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:169:in `_set_wrapper_defaults'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:133:in `inherited'
actionpack (3.2.11) lib/abstract_controller/railties/routes_helpers.rb:7:in `block (2 levels) in with'
actionpack (3.2.11) lib/action_controller/railties/paths.rb:7:in `block (2 levels) in with'
app/controllers/users/profiles_controller.rb:1:in `'
activesupport (3.2.11) lib/active_support/dependencies.rb:469:in `load'
activesupport (3.2.11) lib/active_support/dependencies.rb:469:in `block in load_file'
activesupport (3.2.11) lib/active_support/dependencies.rb:639:in `new_constants_in'
activesupport (3.2.11) lib/active_support/dependencies.rb:468:in `load_file'
activesupport (3.2.11) lib/active_support/dependencies.rb:353:in `require_or_load'
activesupport (3.2.11) lib/active_support/dependencies.rb:502:in `load_missing_constant'
activesupport (3.2.11) lib/active_support/dependencies.rb:192:in `block in const_missing'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `each'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `const_missing'
app/controllers/users/users_controller.rb:1:in `'
activesupport (3.2.11) lib/active_support/dependencies.rb:469:in `load'
activesupport (3.2.11) lib/active_support/dependencies.rb:469:in `block in load_file'
activesupport (3.2.11) lib/active_support/dependencies.rb:639:in `new_constants_in'
activesupport (3.2.11) lib/active_support/dependencies.rb:468:in `load_file'
activesupport (3.2.11) lib/active_support/dependencies.rb:353:in `require_or_load'
activesupport (3.2.11) lib/active_support/dependencies.rb:502:in `load_missing_constant'
activesupport (3.2.11) lib/active_support/dependencies.rb:192:in `block in const_missing'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `each'
activesupport (3.2.11) lib/active_support/dependencies.rb:190:in `const_missing'
activesupport (3.2.11) lib/active_support/inflector/methods.rb:230:in `block in constantize'
activesupport (3.2.11) lib/active_support/inflector/methods.rb:229:in `each'
activesupport (3.2.11) lib/active_support/inflector/methods.rb:229:in `constantize'
activesupport (3.2.11) lib/active_support/dependencies.rb:554:in `get'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:54:in `controller'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:32:in `call'
旅程 (1.0.4) lib/journey/router.rb:68:in `block in call'
旅程 (1.0.4) lib/journey/router.rb:56:in `each'
旅程 (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
机架 (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__1047939203__call__223494719__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
railties (3.2.11) lib/rails/railtie/configurable.rb:30:in `method_missing'
机架 (1.4.5) lib/rack/lint.rb:48:in `_call'
rack (1.4.5) lib/rack/lint.rb:36:in `call'
机架 (1.4.5) lib/rack/showexceptions.rb:24:in `call'
机架 (1.4.5) lib/rack/commonlogger.rb:33:in `call'
rack (1.4.5) lib/rack/chunked.rb:43:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
独角兽 (4.6.2) lib/unicorn/http_server.rb:552:in `process_client'
独角兽 (4.6.2) lib/unicorn/http_server.rb:632:in `worker_loop'
独角兽 (4.6.2) lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
独角兽 (4.6.2) lib/unicorn/http_server.rb:142:in `start'
独角兽 (4.6.2) bin/unicorn:126:in `'
/usr/local/rbenv/versions/1.9.3-p194/bin/unicorn:23:in `load'
/usr/local/rbenv/versions/1.9.3-p194/bin/unicorn:23:in `'

```

我不知道具体是什么原因，但我的看法是：

方法中的 UsersController`_default_wrap_model`尝试访问 Profile 模型（没有命名空间）并引发错误。因为当我重命名配置文件模型时（例如：信息）我没有错误，一切都很好。

所以我的问题是：如何避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:46:57.237

问题是因为我将带有命名空间模型的目录添加到 autoload_paths：

```
#/config/application.rb
config.autoload_paths += %W(#{Rails.root}/app/models/user) 
```

当我删除它时，一切都很好。

# java - JAVA Swing MVC - 主控制器？

> ID：15693321
> 
> 赞同：5
> 
> 时间：2013-03-28T22:31:45.110
> 
> 标签：java, swing, model-view-controller, controller

我在设计我正在尝试开发的应用程序的架构时遇到了一些麻烦。我正在研究 JAVA，我开始研究这个应用程序是因为我想加深我对 JAVA、体系结构和模式的整体了解。我想按照指南制作一个可重用、低耦合的应用程序，就像它应该的那样。应用程序只有一个 JFrame，但在其中有几个 JPanel，每个 JPanel 代表应用程序的一个模块。

问题是：在JAVA Swing中，如何实现一个合适的MVC模式？我挣扎于如何理解它应该做的方式。

我应该有一个主控制器类，它包含对所有其他控制器的引用吗？（我有一张图片来证明这一点：[https](https://docs.google.com/file/d/0B7tBdn5slIFeY2FoSmxESTREQ1k/edit?usp=sharing) ://docs.google.com/file/d/0B7tBdn5slIFeY2FoSmxESTREQ1k/edit?usp=sharing ）

在这种情况下，是否所有需要更改正在呈现的模块的事件都重定向到主控制器？

还是我应该将 JFrame 与应用程序的控制器耦合，并直接与它们通信？

基本上，我想知道我是否需要一个“管理”所有其他人的课程。我已经阅读了一些解释和不同的意见，但我相信这更具体一点。

希望我已经把自己说清楚了（也希望我的解释比我的画更好:)）。

**编辑：** 应用程序使用示例：

*   一个（唯一一个）JFrame，贯穿应用程序的整个生命周期；
*   菜单将在左侧，如 BorderLayout.WEST；
*   应用程序的当前模块将位于中心，如 BorderLayout.CENTER；
*   当用户按下菜单的一个按钮时，相应的模块被加载到BorderLayout.CENTER中；

菜单（视图）是否应该有它自己的控制器，并且这个控制器与 JFrame 通信？JFrame 将新模块加载到它的布局中吗？或者 JFrame 应该有自己的控制器（或模型，如 Gilbert Le Blanc 所说）？

我知道这可能看起来很具体，或者很容易理解，但是每次我想到桌面应用程序时，我都很难理解这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:45:50.320

当您有一个带有 GUI 的应用程序时，GUI 模型就变成了应用程序视图。应用程序通过 GUI 模型与 GUI 交互。

> 还是我应该将 JFrame 与应用程序的控制器耦合，并直接与它们通信？

这就是我所做的。我已经将控制器类打包在一起，但我从未创建过一个主控制器类。

我将 GUI 控制器类与任何其他应用程序控制器类（如数据访问对象）放在一个单独的包中。

我通常将每个 JPanel 放在它自己的类中，但我不会称之为要求。JFrame 有自己的类，尽管 JFrame 的实例和 GUI 模型的实例被传递给几乎所有的 GUI 组件。这使得菜单操作成为可能。

这篇[交通信号 GUI](http://java-articles.info/articles/?p=38)文章介绍了如何编写一个非常简单的 GUI 的基础知识。

**编辑以回应问题的变化。**

GUI 控制器与 GUI 模型是分开的。GUI 模型包含构成 GUI 的所有数据元素。JTextFields 的字符串，JTables 的 DefaultTableModels。

根据您的应用程序设计，我建议您为要置于应用程序中心的每个 JPanel 创建一个 Java 类。您的 JFrame 将根据菜单控制显示哪个 JPanel。我还建议您查看[JTabbedPane](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)，它使用不同的用户界面来完成选择使用哪个面板的任务。

假设您使用左侧的菜单，每个菜单选项（切换 JButton？）将有它自己的控制器方法或类。这些控制器必须具有 JFrame 的实例，以便控制器可以调用 JFrame 类中的方法，将适当的面板置于显示的中心。控制器决定调用哪个方法，但方法本身是 JFrame 类的一部分。

我一直在谈论 JFrame 和 JPanel 类。使用**组合而不是继承**来构建这些类很重要。JFrame 类包含一个 JFrame。它不扩展 JFrame。唯一一次扩展 Swing 组件是在您想要覆盖组件方法时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:48:38.950

[正如这里](https://stackoverflow.com/a/3072979/230513)所讨论的，Swing 组件使用[可分离的模型架构，模型和视图使用](http://www.oracle.com/technetwork/java/architecture-142923.html)[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)松散耦合。并非每个 GUI 控件都必须是应用程序控制器的一部分。使用`ActionListener`，例如[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，对于封装应用程序功能特别方便。

附录：我会使用`CardLayout`,[此处](https://stackoverflow.com/a/5655843/230513)说明来切换面板。请注意`Action`处理程序如何与按钮、菜单、组合、工具栏等一起使用。每张卡片的内容都可以有自己的 MVC 模式实现，与其他卡片分开。使用 a `PropertyChangeEvent`，在[这里](https://stackoverflow.com/a/10523401/230513)看到，用于组件之间的通信。

通常，Swing 组件（例如按钮和表格）已经监听了它们各自的模型，让您专注于应用程序的数据模型*及其*监听视图。方便地，一个 Swing 模型，例如`ComboBoxModel`或`Table`Model`，可以有多个听众。

# jsf-2 - 获取 javax.faces.FacesException：java.lang.NullPointerException

> ID：15693329
> 
> 赞同：1
> 
> 时间：2013-03-28T22:32:34.660
> 
> 标签：jsf-2, glassfish, eclipselink

我正在开发一个具有以下内容的 Web 应用程序：

1.  Glassfish v3.1.2
2.  日食朱诺 SR2
3.  JPA EclipseLink2.0
4.  JSF 2.0

对于普通用户和管理员用户，我有不同的页面集。在登录期间尝试设置页面过滤器时，我在登录 bean 中收到此错误：javax.faces.FacesException: #{loginBean.login}: java.lang.NullPointerException

**没有这部分，我的整个登录代码都可以工作**

```
if (uGDB.validateGroup(username, adminGroup)) {
                return "home.jsf?faces-redirect=true&amp;includeViewParams=true";
            }
            return "normalHome.jsf?faces-redirect=true&amp;includeViewParams=true" 
```

;

我在这里要做的是获取正在登录的用户的组 ID 并检查它是否是管理员。因此，我想将用户引导到相应的页面。这是因为我为管理员用户和普通用户设置了不同的页面。我不想使用 Glassfish 领域，因为最终用户不需要它。

有人可以帮我确定我在哪里出错了。（请原谅我的愚蠢错误，我刚刚开始进行这样的开发）。提前非常感谢！

**下面是我的 loginBean 的代码**

```
 package beans;

import java.io.Serializable;

import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;

import ejb.UserDaoBean;
import ejb.UserGroupDaoBean;

import model.User;

@ManagedBean(name = "loginBean")
@RequestScoped
public class LoginBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @EJB
    private UserDaoBean uDB;
    private UserGroupDaoBean uGDB;
    private User userId;

    private int adminGroup = 1;

    private String username;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String login() {
        FacesContext context = FacesContext.getCurrentInstance();

        if (uDB.validateUser(username)) {
            userId = uDB.findUser(username);

            context.getExternalContext().getSessionMap().put("userId", userId);
            if (uGDB.validateGroup(username, adminGroup)) {
                return "home.jsf?faces-redirect=true&amp;includeViewParams=true";
            }
            return "normalHome.jsf?faces-redirect=true&amp;includeViewParams=true";

        } else {
            FacesMessage message = new FacesMessage();
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            message.setSummary("Username doesn't exists! OR User is trying to login from someone else's account");
            context.addMessage("", message);
            return null;
        }
    }

    public String logout() {
        FacesContext.getCurrentInstance().getExternalContext()
                .invalidateSession();
        return "logout.jsf?faces-redirect=true";
    }

} 
```

**这是 Glassfish 日志中的完整错误堆栈**

```
WARNING: #{loginBean.login}: java.lang.NullPointerException
javax.faces.FacesException: #{loginBean.login}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 31 more
Caused by: java.lang.NullPointerException
    at beans.LoginBean.login(LoginBean.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 32 more 
```

**这是我的控制器类**

```
package ejb;

import java.util.List;

import javax.ejb.LocalBean;
import javax.ejb.Stateful;
import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.Query;

import javax.persistence.PersistenceContext;

import model.Group;
import model.User;
import model.UserGroup;

@Stateful
@LocalBean
public class UserGroupDaoBean {
    @PersistenceContext(unitName = "myPU")
    private EntityManager entityManager;

    public UserGroupDaoBean() {

    }

    public UserGroup createNewUserGroup(int groupId, String username) {

        UserGroup newUserGrp = new UserGroup();

        User myUsr;
        myUsr = entityManager.find(User.class, username);
        newUserGrp.setUser(myUsr);

        Group myGrp;
        myGrp = entityManager.find(Group.class, groupId);
        newUserGrp.setGroup(myGrp);

        saveNewUsrGrp(newUserGrp);
        return newUserGrp;
    }

    private void saveNewUsrGrp(UserGroup usrGrp) {
        entityManager.persist(usrGrp);
        entityManager.flush();
    }

    public boolean checkUsertoGroup(String username, int groupId) {

        Group chkGrp;
        chkGrp = entityManager.find(Group.class, groupId);

        User chkUsr;
        chkUsr = entityManager.find(User.class, username);

        if (chkGrp != null) {

            if (chkUsr != null) {

                try {
                    entityManager.createNamedQuery("findGroupsbyUser")
                            .setParameter("username", chkUsr)
                            .setParameter("groupId", chkGrp).getSingleResult();
                    System.out.println("UserGroup already exists");
                    return false;
                } catch (NoResultException e) {
                    return true;
                }

            }
            System.out.println("User doesn't exist");
            return false;
        }
        System.out.println("Group doesn't exist");

        return false;

    }

    public void deleteUserGroup(UserGroup userGroup) {
        userGroup = entityManager.merge(userGroup);
        entityManager.remove(userGroup);
    }

    public UserGroup update(UserGroup myUserGroup) {
        return entityManager.merge(myUserGroup);
    }

    @SuppressWarnings("unchecked")
    public List<UserGroup> getAllUserGroups() {

        try {
            Query query = entityManager.createNamedQuery("findAllUserGroup");
            List<UserGroup> result = (List<UserGroup>) query.getResultList();
            return result;

        } catch (NoResultException e) {
            System.out.println("No Result found");
            return null;
        }
    }

    public boolean validateGroup(String username, int groupId) {

        try {
            UserGroup myGroupId = (UserGroup) entityManager
                    .createNamedQuery("findGroup")
                    .setParameter("username", username)
                    .setParameter("groupId", groupId).getSingleResult();

            if (myGroupId != null) {
                System.out.println("This user is admin!!!");
                return true;
            }

        } catch (NoResultException e) {
            return false;
        }

        System.out.println("This user is not admin");
        return false;
    }
} 
```

**下面是我的实体用户组**

```
package model;

import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the UserGroup database table.
 * 
 */
@NamedQueries({

    @NamedQuery(name = "findGroupsbyUser", query = "Select ug.group from UserGroup ug where ug.user=:username AND ug.group=:groupId"),

    @NamedQuery(name = "findAllUserGroup", query="Select ug from UserGroup ug"),

    @NamedQuery(name = "findAdminGroupId", query = "Select ug from UserGroup ug where ug.user=:username AND ug.group=:groupId"),

})
@Entity
@Table(name="usergroup")
public class UserGroup implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name="RowId" )
    private int rowId;

    //bi-directional many-to-one association to Group
    @ManyToOne
    @JoinColumn(name="groupId")
    private Group group;

    //bi-directional many-to-one association to User
    @ManyToOne
    @JoinColumn(name="username")
    private User user;

    public UserGroup() {
    }

    public int getRowId() {
        return this.rowId;
    }

    public void setRowId(int rowId) {
        this.rowId = rowId;
    }

    public Group getGroup() {
        return this.group;
    }

    public void setGroup(Group group) {
        this.group = group;
    }

    public User getUser() {
        return this.user;
    }

    public void setUser(User user) {
        this.user = user;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:32:01.050

阅读堆栈跟踪：在 LoginBean.java 的第 49 行抛出 NPE。

很有可能，`uGBD`为空，因为缺少 EJB 注释。*您需要在要注入的每个*EJB前面使用 @EJB 注释：

```
@EJB
private UserDaoBean uDB;
@EJB
private UserGroupDaoBean uGDB;
... 
```

# javascript - (Javascript) 来自嵌入代码的 YouTube 视频 ID - 正则表达式？

> ID：15693332
> 
> 赞同：0
> 
> 时间：2013-03-28T22:32:46.660
> 
> 标签：javascript, jquery, regex, youtube

我有一个遍历页面并返回所有选定元素的脚本 - 在这种情况下，`<embed...>`

例如，当在博客中找到 YouTube 视频时，它会返回一个 iframe。我可以获取 iframe src，通过函数传递它，然后正则表达式视频 ID。但是，当 YouTube 视频位于 YouTube 页面中时，其嵌入方式不同，并且视频 ID 位于“flashvars”属性中。

这是一个示例视频嵌入： http: [//pastie.org/7155840](http://pastie.org/7155840)

你们会推荐什么将src确认为YouTube并从中获取视频ID的最佳方法`qlo5XHZ8-zI`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:42:20.937

这是一个不使用正则表达式的解决方案。

首先确认它是youtube：

```
if (e.src.substr(0, 19) != "http://s.ytimg.com/") return false 
```

然后提取视频id：

```
// get the flashvars
var flashvars = e.getAttribute("flashvars")
// convert flashvars string to key-value pairs
flashvars = flashvars.split("&").map(function(entry) {
  return entry.split("=", 2)
})
// look up the value of the "video_id" key
var video_id = flashvars.filter(function(entry) {
  return entry[0] == "video_id"
})[0] 
```

`video_id`现在应该是视频的 ID。

# events - 在不停止执行的情况下读取用户输入

> ID：15693339
> 
> 赞同：0
> 
> 时间：2013-03-28T22:33:33.567
> 
> 标签：events, event-handling, lua, minecraft

我正在尝试在 Lua 应用程序的控制台界面中读取用户输入。但是，我不想像标题所暗示的那样停止程序执行。使用 read() 会在用户打字时干扰正在进行的事件和界面更新的正常处理。

我能想出的最佳解决方案是维护一个临时变量，我将任何用户输入应用到它不是功能键。但是，我的事件处理程序返回扫描码，我不知道没有办法将这些映射到 ASCII 码，除非为每个键维护一个表，这是我真正想要避免的。

有任何想法吗？

编辑举例说明我的意思：

```
function read_input()
 local input = read()
 do_something_with(input)
end
while true do
 e,param1,param2,param3 = os.pullEvent()
 if (e=='key' and param1=='201') then
  read_input()
 elseif (e=='something_else') then
  do_something_else()
 end
end 
```

如您所见，用户可以在某些时候进入需要用户输入的功能。在采用此输入时，我不能让程序的任何其他（基于事件的）功能受到此阻碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T15:53:48.170

您需要从 os.pullEvent() 连续读取密钥

```
local input
while true do
  e,param1,param2,param3 = os.pullEvent()
  if (e=='key') then
    -- do some fancy stuff for checking which key has pressed and append it to input
    -- additionally if it's enter do something other fancy
  else
    -- blah blah
  end
end 
```

我不确定，但我认为按下哪个键的字符在 pullEvent 的参数之一中，我可能弄错了。

此外，如果您想每隔一秒左右执行一次操作，请启动一个同时触发 pullEvent 的计时器。

# r - 用行名替换 R 中的矩阵值另一个矩阵

> ID：15693340
> 
> 赞同：3
> 
> 时间：2013-03-28T22:33:38.870
> 
> 标签：r, matrix, match

我有一个关于匹配 R 中的两个矩阵以执行非常简单的计算的问题。我有工作代码（如下），但我觉得必须有一种更有效且“类似 R”的方式来做到这一点。任何线索都非常受欢迎。

**问题**

我有两个包含相关信息的矩阵。m1 包含一堆引用。m2 包含有关这些引用（零或一）的数据。当您从 m2 中查找数据时，我想知道 m1 的哪些行在第一列中具有“0”，在第二列中具有“1”。这是一个玩具示例：

```
> m1 <- matrix(data = c(51,52,53,51,54,55,56,57), nrow = 4, ncol = 2)
> m1
     [,1] [,2]
[1,]   51   54
[2,]   52   55
[3,]   53   56
[4,]   51   57

> m2 <- matrix(data = c(0,0,1,0,0,1,1), nrow = 7, ncol = 1)
> rownames(m2) <- c(51,52,53,54,55,56,57)
> m2
   [,1]
51    0
52    0
53    1
54    0
55    0
56    1
57    1 
```

一般属性是我已经可以保证 m1 中的每个条目在 m2 中都有对应的行名，并且我需要在更大的矩阵上执行数百万次，因此速度很有用。

我想要做的是使用 m2 来确定 m1 的哪些行在第一列中为零，在第二列中为 1。在这种情况下，只有 m1 的最后一行具有该属性。

**我的解决方案**

我对此有一个相对不错的解决方案，它使用 apply() 并且还不错：

```
> is.zero.one <- function(line, m2){
+    start = m2[as.character(line[1]),]
+    end   = m2[as.character(line[2]),]
+    if(start==0 && end==1){return(TRUE)}   
+    else{return(FALSE)}
+} 
> apply(m1, 1, is.zero.one, m2)
[1] FALSE FALSE FALSE  TRUE 
```

这工作正常。但感觉很笨拙。

**我的问题**

有谁知道更智能/更快/更自然的方法来做到这一点？我查看了 match() 和相关函数，但无法提出解决方案。同上在这里搜索相关问题。我的问题的部分原因是我不是一个非常好的 R 程序员，所以即使这证明是一个不错的解决方案，我也很想看看其他人会如何解决它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T22:40:53.830

```
 matrix( m2[ match(m1, rownames(m2) )], ncol=2)
     [,1] [,2]
[1,]    0    0
[2,]    0    0
[3,]    1    1
[4,]    0    1

m3 <- matrix(m2[match(m1, rownames(m2) )], ncol=2)

 which( m3[,1]==0 & m3[,2]==1 )
#[1] 4

  m3[,1]==0 & m3[,2]==1 
# [1] FALSE FALSE FALSE  TRUE 
```

# iphone - 游戏过程中屏幕上的高分和当前分数

> ID：15693353
> 
> 赞同：-1
> 
> 时间：2013-03-28T22:34:29.967
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone, 2d-games

我想在屏幕上显示游戏的当前得分和历史最好得分。这是工作，但每次我重新启动游戏时，即使当前分数低于最佳分数，最佳分数也会改变。

```
CCLabelTTF *punteggio;
    NSString *stringa;
    NSString *stringa2;
    CCLabelTTF *punteggioMAX;

    int score;
    int scoreMAX; 
```

有保存分数、添加分数和在游戏结束时重置分数的方法。

```
-(void)aum{
    score++;
    stringa = [NSString stringWithFormat:@"Punteggio: %d",score];
    [punteggio setString:stringa];
}

-(void)res{
    score=0;
    stringa = [NSString stringWithFormat:@"Punteggio: %d",score];
    [punteggio setString:stringa];
}

-(void)sal{
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
    [ud setInteger:score forKey:@"Punteggio"];
    [ud synchronize];
}

-(void)sal2{
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
    [ud setInteger:scoreMAX forKey:@"Punteggio"];
    [ud synchronize];
} 
```

在init方法中：

```
NSString *fontName = @"score.fnt";
        stringa = [NSString stringWithFormat:@"Punteggio: %d",score];
        punteggio = [CCLabelBMFont labelWithString:stringa fntFile:fontName];
        punteggio.scale = 0.4;
        punteggio.position=ccp(40,altezzaSchermo - 15);
        [self addChild:punteggio];
        NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
        score=[ud integerForKey:@"Punteggio"];

        stringa2 = [NSString stringWithFormat:@"Best Score: %d",score];
        punteggioMAX = [CCLabelBMFont labelWithString:stringa2 fntFile:fontName];
        punteggioMAX.scale = 0.4;
        punteggioMAX.position=ccp(40,altezzaSchermo - 35);
        [self addChild:punteggioMAX];
        scoreMAX=[ud integerForKey:@"punteggioMAX"];

 if(score>scoreMAX) scoreMAX = score;

        [self res]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:52:38.247

您正在使用错误的键保存最高分数。尝试 ：

```
-(void)sal2{
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
    [ud setInteger:scoreMAX forKey:@"punteggioMAX"];
    [ud synchronize];
} 
```

# database - 在数据库中保存谷歌地图多边形并找到包含位置的多边形

> ID：15693354
> 
> 赞同：0
> 
> 时间：2013-03-28T22:34:36.747
> 
> 标签：database, maps, polygon, point

我正在做一个项目，我需要在数据库中存储一些谷歌地图多边形。到目前为止，我得到了多边形的顶点并将其保存在一个数组中。然后我将数组格式化为 JSON 并将其作为字符串存储在数据库中。

接下来我要做的是找到包含某个位置的多边形。谷歌地图 javascript API 有一个函数，如果某个点包含在多边形中，则返回，但我必须在服务器端 (PHP) 执行此操作。

¿有关如何将数据存储在数据库中以及如何检查哪个多边形包含服务器端的点（纬度，经度）的任何建议？

谢谢，对我的英语感到抱歉。

# sql-server-2008-r2 - TVF 输出在它引用的视图中缺少计算列

> ID：15693359
> 
> 赞同：1
> 
> 时间：2013-03-28T22:35:22.517
> 
> 标签：sql-server-2008-r2, user-defined-functions, calculated-columns

我有一个带有计算列的视图，上面有一个 TV 功能，（简化）如下：

```
create view     dbo.vwEvent_A   as
select  ea.idEvent, ea.dtEvent, ea.cSys, ..
    ,   sd.sSGJR + '-' + right('0' + cast(ea.tiBtn as varchar), 2) [sSGJRB] 
    from    tbEvent_A ea
    inner join  ..
    left outer join vwDevice sd on  sd.cSys = ea.cSys   ..

create function     dbo.fnEventA_GetTopByRoom
(
    @cSys       char( 1 )
,   @tiGID      tinyint
)
returns table
as
return
    select  top 1   *
        from    vwEvent_A
        where   bActive > 0 and cSys = @cSys
    order   by  siIdx desc, tElapsed 
```

执行该函数时，我不仅减少了 1 列数据，而且列标题也向下滑动（跳过计算列）。 **然而，最神奇的是，所有列的数据都保持不变！**

![从源数据中执行'select *'，直接查看和从函数中查看](../Images/92a0e69c513ef50e5bac215bb7f563a1.png) ![展开（和包装）部分，显示移动的列标题和数据](../Images/9aac1aebfbe838942e6b2a377df9f659.png)

我可以接受计算列被“区分”并从结果集中推出的事实，但它只推出列标题，使用此函数搞乱一切，因为现在返回的列具有错误的数据类型。我找不到任何文档提及任何相关内容。

**有谁知道怎么回事？？**

以及如何解决它的任何想法？我将用显式替换函数调用`select * from vwEvent_A`（添加必要条件），但这个函数存在的主要原因是代码重用.. [见下文]

编辑：打点是（对于稍后阅读此内容的人），
- View 确实被其他对象重用（至少到目前为止没有表现出任何类似的问题）。最近的修订版添加了作为罪魁祸首的计算列。
- 存在 func 以提供单个最高优先级行，然后`OUTER APPLY`在另一个存储过程中 -ed。我没有找到更好/更简单的方法来做到这一点。
- 刷新 func (by `ALTER FUNC`) 甚至重新创建它 (by `DROP FUNC / CREATE FUNC`) 没有任何效果（输出差异）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:09:01.770

我怀疑自从创建函数以来，计算列已添加到视图中。

两部分解决方案：

1.  运行`sp_refreshsqlmodule`以更新视图和函数的元数据，从视图开始：

    ```
     EXEC sp_refreshsqlmodule N'dbo.vwEvent_A';
     EXEC sp_refreshsqlmodule N'dbo.fnEventA_GetTopByRoom'; 
    ```

2.  [停止`SELECT *`在您的视图和功能中](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)使用。这正是我们不这样做的原因之一。还建议创建这两个对象`WITH SCHEMABINDING`，以便架构更难不同步（您希望它很难与其他对象所依赖的对象的输出混淆）。

# android - 失败：无法启动Android库项目

> ID：15693361
> 
> 赞同：0
> 
> 时间：2013-03-28T22:35:24.437
> 
> 标签：android, eclipse

我正在尝试在我从教程中下载的 Android 手机上构建和运行（使用 eclipse）应用程序，但我收到以下消息：

“无法启动 Android 库项目”。以前从未见过。

关于导致此问题的原因以及如何解决的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T22:39:40.637

在项目属性中，在“Android”下，有一个复选框“Is Library”。现在应该检查过了。这意味着该项目是一个库。

有时，库项目可以用作独立的应用程序——它们有清单、可启动的活动和一切。有时他们不是。无论如何，取消选中并尝试一下。

# c# - 我应该在空文档上返回什么？

> ID：15693362
> 
> 赞同：0
> 
> 时间：2013-03-28T22:35:40.043
> 
> 标签：c#, html-agility-pack

有时变量 doc 或 type 为空。所以我尝试先添加`if (type == null){....} else {....}`

但如果它是 null 我应该返回什么？现在我尝试使用 try 和 catch 但由于它为空，所以我在另一个使用此类的类中得到空异常。

```
public static HtmlAgilityPack.HtmlDocument getHtmlDocumentWebClient(string url, bool useProxy, string proxyIp, int proxyPort, string usename, string password)
{
    HtmlAgilityPack.HtmlDocument doc = null;
    using (MyClient clients = new MyClient())
    {
        clients.HeadOnly = true;
        byte[] body = clients.DownloadData(url);
        // note should be 0-length
        string type = clients.ResponseHeaders["content-type"];
        clients.HeadOnly = false;
        // check 'tis not binary... we'll use text/, but could
        // check for text/html
        try
        {
            if (type.StartsWith(@"text/html"))
            {
                string text = clients.DownloadString(url);
                doc = new HtmlAgilityPack.HtmlDocument();
                WebClient client = new WebClient();
                //client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
                client.Credentials = CredentialCache.DefaultCredentials;
                client.Proxy = WebRequest.DefaultWebProxy;
                if (useProxy)
                {
                    //Proxy                
                    if (!string.IsNullOrEmpty(proxyIp))
                    {
                        WebProxy p = new WebProxy(proxyIp, proxyPort);
                        if (!string.IsNullOrEmpty(usename))
                        {
                            if (password == null)
                                password = string.Empty;
                            NetworkCredential nc = new NetworkCredential(usename, password);
                            p.Credentials = nc;
                        }
                    }
                }
                doc.Load(client.OpenRead(url));
            }
        }
        catch
        {
        }
    }
    if (doc == null)
    {
        //MessageBox.Show("Doc is null   " + doc + " The link that did it was    " + url);
    }
    return doc;
} 
```

该函数每次都获取 url，并且在某些特定的 url 上，变量类型为空。网站需要密码什么的原因。

我应该如何处理 null ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:42:40.667

如果`type`是`null`，显然响应中没有`Content-Type`标头。

```
string type = clients.ResponseHeaders["content-type"]; 
```

然后`doc`也将是`null`因为该行将`type.StartsWith`抛出一个`NullReferenceException`被您的一般捕获子句吞下的a（a very Bad Thing™）。

If `type`is not `null`but `doc`is `null`，显然内容类型不以 开头`text/html`：

```
 if (type.StartsWith(@"text/html"))
     doc = new HtmlAgilityPack.HtmlDocument(); 
```

由于您的函数名为`getHtmlDocumentWebClient`，因此我假设它用于获取 HTML 文档。如果没有这样的文档（因为您无法确定内容类型，或者内容类型不是`text/html`），那么**是**的，您的方法应该返回`null`（*或*抛出异常）。您只会在意外时抛出异常，但在 Web 开发中，当您获得 HTML 文档以外的内容时，这并不是真正的意外。

然后，您处理每次调用时获取`null`值的可能性。`getHtmlDocumentWebClient`当没有 HTML 文档时，这取决于您的情况。

请注意`Content-Type`，如果存在，可能会撒谎。例如，它`application/octet-stream`几乎可以返回任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:39:52.007

如果结果为空，那么您的调用者应该处理它。如果您可以合理地期望返回 null 参数，则由调用者进行 null 测试，或者如果 null 结果是错误条件，您可能会考虑抛出异常。在任何情况下，调用者都应该捕获任何潜在的异常并优雅地处理。

# php - Laravel 雄辩 - 一对多关系（试图获取非对象的属性）

> ID：15693363
> 
> 赞同：1
> 
> 时间：2013-03-28T22:35:42.300
> 
> 标签：php, laravel, eloquent

我有与“类别”表具有多对一关系的“帖子”表。目标是显示所有帖子及其类别。

表：
**帖子**：id、content、category_id 等
**类别**：id、名称

这是我的代码

楷模：

```
class Posts extends Eloquent
{
    public static $table = 'posts';

    public function categories()
    {
        return $this->belongs_to('Categories');
    }
}

class Categories extends Eloquent
{
    public static $table = 'categories';

    public function posts()
    {
        return $this->has_many('posts');
    }
} 
```

我的控制器

```
public function get_posts()
{
    $posts = Posts::with('categories')->all();

    return View::make('admin.posts')
        ->with('title', 'Posts')
        ->with('posts', $posts);

} 
```

我的观点

```
@foreach($posts as $post)
        <tr>
            <td>{{ $post->title }}</td>
            <td>{{ $post->categories->name }}</td>
            <td><small> {{$post->updated_at}} </small></td>
            <td>
                <button>
                    {{HTML::link_to_route('edit_post','Edit',array($post->id))}}
                </button>
                {{Form::open('admin/delete','Delete')}}
                {{Form::hidden('id', $post->id)}}
                <input type="submit" name="edit_post" value="Delete"/>
                {{Form::close()}}
            </td>
        </tr>
@endforeach 
```

错误：

```
Error rendering view: [admin.posts]
Trying to get property of non-object 
```

我是新手，请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:13:56.837

{{ $post->categories->name }} 测试之前的类别存在

例子：

```
@if( ! empty($post->categories))
    <td>{{ $post->categories->name }}</td> 
@else

@end if 
```

埃西斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:41:51.600

只需使用`::all()`而不是`::with(..)->all()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T04:28:35.037

你在使用 Laravel 4 吗？首先声明关系的语法是hasMany和belongsTo，在骆驼的情况下。在[Laravel 文档中查看](http://laravel.com/docs/4.2/eloquent#relationships)

在视图中，检查类别是否为空集合，即帖子是否有其类别：

```
@if($post->categories->count())
    <td>{{ $post->categories->name }}</td>
    ...
@endif 
```

顺便说一句，我会使用单数形式作为模型类名称，例如 Post 和 Category 而不是复数形式。在 Post 类中，我将使用单数形式定义反向一对多关系，以显示该给定 Post 的类别表中只有一个条目。

```
public function category()
    {
        return $this->belongsTo('Category');
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T21:39:01.613

类别是一个数组，因为您正在使用 has_many 关系。有很多类别，因此返回一个数组，因此要访问它，您必须像数组一样对其进行索引

正确的解决方案是

$post->类别[0]->名称

# ruby-on-rails - Torquebox - 项目未更新

> ID：15693364
> 
> 赞同：0
> 
> 时间：2013-03-28T22:35:48.300
> 
> 标签：ruby-on-rails, ruby, jrubyonrails, ubuntu-12.10, torquebox

我已经安装了：

*   Ubuntu 12.10
*   jruby 1.7.3
*   红宝石 2
*   导轨 3.2.13
*   红宝石矿 5
*   DB2 C-Express

我创建了一个示例应用程序并将其正确连接到数据库 - 我知道这一点，因为我已成功执行脚手架和迁移命令并检查表是否已创建。

然后我运行了以下命令，以便使用 torquebox 2.0 部署我的应用程序：

```
torquebox deploy
torquebox run 
```

我已经在我的项目文件夹中运行了这些命令，结果在 localhost:8080 上我看到了 rails 起始页。我有以下问题：

1.  单击“关于您的应用程序的环境”选项卡，我收到以下错误：

> javax.servlet.ServletException: org.jruby.exceptions.RaiseException: (NameError) 无法链接 Java 类 com.ibm.db2.jcc.DB2Driver，可能缺少依赖项：无法初始化类 com.ibm.db2.jcc.DB2Driver org。 Torquebox.web.servlet.RackFilter.doRack(RackFilter.java:117) org.torquebox.web.servlet.RackFilter.doFilter(RackFilter.java:101) org.torquebox.web.servlet.RackFilter.doFilter(RackFilter.java: 72) org.torquebox.web.servlet.SendfileFilter.doFilter(SendfileFilter.java:49) org.torquebox.web.servlet.SendfileFilter.doFilter(SendfileFilter.java:33)

我相信这是因为扭矩箱无法找到驱动程序。但是为什么它在我的 rails 应用程序中是可见的，并且我使用终端成功地从它创建/迁移表？我也应该把驱动程序放在其他地方吗？

1.  然后我在扭矩箱[文档](http://torquebox.org/builds/getting-started/first-steps.html#first-steps-rvm)中说：

> 正如预期的那样，对 Rails 应用程序的更改会立即显示在浏览器中。完成后，在终端中按 CTRL+C 以停止 TorqueBox，然后继续下一步。

但这正是我为了刷新页面内容而必须做的。我已经更改了我的 gem 文件和 database.yml 文件，但刷新页面并没有反映这一点。在我停止服务器并重新启动它之后，它显示了一些不同的东西。

你能建议或告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T11:05:03.793

无需重新启动 Torquebox 服务器，您`touch`只需运行即可重新部署旋钮

```
touch $TORQUEBOX_HOME/jboss/standalone/deployments/your_apps-knob.yml.deployed 
```

这样您就不必重新启动整个 JBOSS 服务器。[通过描述符部署](http://torquebox.org/documentation/3.0.1/deployment.html#deployment-via-descriptor)

对于生产设置，您可以使用 Capistrano [Torquebox Capistrano 支持](http://torquebox.org/documentation/3.0.1/capistrano-support.html)

# ruby - 意外的 .pc 文件设置 Home brew

> ID：15693367
> 
> 赞同：0
> 
> 时间：2013-03-28T22:36:30.647
> 
> 标签：ruby, xcode, homebrew, installation

我对编程完全陌生，正在尝试将我的计算机设置为编写 ruby​​ 代码。当我下载了 xCode 并安装了命令行工具后，我就去终端安装了 Homebrew。当我在一切之后运行 brew doctor 时，我得到了这个：

意外的 .pc 文件：/usr/local/lib/pkgconfig/fuse.pc guest-wireless-207-151-229-215:~trev$ brew doctor 警告：“config”脚本存在于您的系统或 Homebrew 目录之外。 `./configure`脚本经常查找 *-config 脚本以确定是否安装了软件包，以及在编译和链接时要使用哪些附加标志。

如果配置脚本覆盖系统或 Homebrew 提供的同名脚本，则在路径中包含其他脚本可能会混淆通过 Homebrew 安装的软件。我们发现了以下“配置”脚本：

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/python-config
/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config 
```

警告：在 /usr/local/lib/pkgconfig 中找到未编译的 .pc 文件。如果您不是故意将它们放在那里，它们可能会在构建 Homebrew 公式时引起问题，并且可能需要删除。

意外的 .pc 文件：/usr/local/lib/pkgconfig/fuse.pc

我不知道这是什么，甚至不知道从哪里开始修复它，也无法在谷歌或这里的任何地方找到它。请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:53:34.570

尝试运行：

```
mv /Library/Frameworks/Python.framework/Versions/2.7/bin/python-config /Library/Frameworks/Python.framework/Versions/2.7/bin/python-config.old 
mv /Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config /Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config.old 
```

如果这不起作用或您想撤消运行：

```
mv /Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config.old /Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config
mv /Library/Frameworks/Python.framework/Versions/2.7/bin/python-config.old /Library/Frameworks/Python.framework/Versions/2.7/bin/python-config 
```

# sql - SQL视图聚合函数不按行拉

> ID：15693369
> 
> 赞同：1
> 
> 时间：2013-03-28T22:36:42.327
> 
> 标签：sql, sql-server, view

我正在使用 SQL Server Management Studio 并尝试使用聚合函数创建一个视图，然后我将对其进行查询，以便我可以将所需的所有数据点放在一起。

我正在查看包含以下内容的表：联系人表：

```
联系方式 123
姓氏溢出
名字堆栈

```

调用表：

```
contactid 123 开始时间 2013 年 3 月 4 日
contactid 123 开始时间 2/2/2013
contactid 123 开始时间 2013 年 1 月 3 日

```

我正在尝试创建一个视图，以便我可以获得最大日期（2013 年 3 月 4 日）以及联系人 ID 和姓名。但是，由于某种原因，我的查询正在拉多个开始时间。

这就是我创建视图的方式：

```
Create VIEW LastIntakeView
AS SELECT c.contactid, c.lastname, c.firstname, ca.starttime
FROM sfcd.dbo.Contacts c, sfcd.dbo.Calls ca
WHERE ca.starttime=(select MAX(cl.starttime)
from sfcd.dbo.Calls cl where
ContactTypeID=29 group by cl.contactid); 
```

我收到此错误消息：消息 512，级别 16，状态 1，第 2 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

我尝试了各种方法来获得最大日期。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:09:56.757

您的子查询向 ca.StartTime 返回超过 1 行，这对于 operator =、!=、<、<=、>、>= 是不可接受的，它可以被 operator IN 等接受。

但在您的情况下，请尝试**加入您的子查询 return**。

```
 Create VIEW LastIntakeView
AS 
SELECT c.contactid, 
       c.lastname, 
       c.firstname, 
       cl.Maxstarttime
FROM sfcd.dbo.Contacts c
left join (
        select Contactid, MAX(starttime) as MaxStartTime
        from sfcd.dbo.Calls 
        where ContactTypeID=29 
        group by contactid
        ) cl
on c.contactid = cl.contactid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:42:33.817

在子查询中，您将获得所有带有contactType 29 的表调用行。我猜这不是您想要的。

那应该这样做：

```
Create VIEW LastIntakeView AS 
SELECT c.contactid, c.lastname, c.firstname, MAX(ca.starttime) X
FROM sfcd.dbo.Contacts c left join sfcd.dbo.Calls ca on c.contactid = ca.contactid
where ca.ContactTypeID=29
group by c.contactid, c.lastname, c.firstname 
```

# php - PHP Simple HTML DOM Parser 添加脚本标签

> ID：15693373
> 
> 赞同：4
> 
> 时间：2013-03-28T22:37:25.190
> 
> 标签：php, domdocument, simple-html-dom

是否可以使用 PHP Simple HTML DOM Parser 在 simple_html_dom 对象的头部添加一个新的脚本标记，该对象具有来自主页的完整 html？

我需要在该模板中添加一些节点，其中一个节点是带有 jquery 的脚本标记，另一个是带有一些我从数据库中提取的文本的 div。

我以前做过这样的事情：（使用 DOMDocument ）

```
$dom = new DOMDocument('1.0', 'UTF-8');
$dom->loadHTML($remote);
$head = $dom->getElementsByTagName('head')->item(0);
$jquery = '$(document).ready(function(){ $("#feed_home").hide()});
  if (window.location.hash) {
    Destino = window.location.hash.replace(\'#!\', \'?\');

         window.location.href = window.location.href.split(\'#\')[0] + Destino;
}
';

$script = $dom->createElement('script', $jquery);
$script_type = $dom->createAttribute('type');

$script_type->value = 'application/javascript';
$script->appendChild($script_type);
$head->appendChild($script); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-12T12:33:09.217

PHP Simple HTML DOM 允许操作：

```
$html = str_get_html($rawhtml);
$inject  = '<script type="text/javascript">alert("Hello")</script>';
$html->find('head', 0)->innertext = $inject.$html->find('head', 0)->innertext;
echo $html; 
```

[http://simplehtmldom.sourceforge.net/manual.htm#frag_access_tips](http://simplehtmldom.sourceforge.net/manual.htm#frag_access_tips)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:31:44.147

不，简单的 html dom 不会进行 dom 操作。使用 phpquery 虽然你可以这样做：

```
$doc->find('head')->append('<script src="foo"></script>'); 
```

# bash - 使用 Shell 脚本确定连接时间

> ID：15693374
> 
> 赞同：0
> 
> 时间：2013-03-28T22:37:25.897
> 
> 标签：bash, shell, date

我环顾了包括 StackOverflow 在内的互联网，只找到了我所问的同一个问题的一个答案（一定要喜欢家庭作业）。但是，提问者没有提供任何代码示例，所以回答他的问题对我没有帮助。

话虽如此，我有一个脚本要求我使用 date 和 who 命令来确定用户连接到其终端的时间长度（以小时和分钟为单位）。

这就是我所拥有的——它在数学上不能正常工作。

```
loginHour=$(echo $(who am i) | cut -d' ' -f5 | cut -d: -f1)
loginMin=$(echo $(who am i)  | cut -d' ' -f5 | cut -d: -f2)

currentHour=$(echo $(date) | cut -d' ' -f4 | cut -d: -f1)
currentMinute=$(echo $(date) | cut -d' ' -f4 | cut -d: -f2)

echo -n $(expr $currentHour - $loginHour) hour\(s\);echo $(expr $currentMinute - $loginMin) minute\(s\) 
```

要回答以下一些问题：我正在尝试确定用户已连接多长时间（使用谁或使用我是谁）和日期（当前时间）。场景是这不会超过 24 小时。因此，假设我在下午 5:00 (17:00) 登录并在晚上 7:30 (19:30) 注销 - 我需要编写一个脚本来计算我登录的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:48:20.617

您需要的部分内容是 GNU date 命令

```
a="19:30"
$ date -d "$a"  +%s
1364520600 
```

该数字是纪元秒（自 1970 年 1 月 1 日以来经过的秒数）。在 UNIX 和 Linux 中，日期算术通常使用纪元秒完成

所以现在是 19:30；登录时间为 17:00。

```
a="19:30"
b="17:00"
elapsed= $(( `date -d $a +%s` - `date -d $b +%s`)) 
```

因此，经过的时间是 9000 秒。如何将 9000 秒转换为小时？除以 3600（一小时的秒数）。

```
hr=$(( $elapsed / 3600 ))
min=$(( ($elapsed % 3600) /60  )) 
```

这可能是您分配的原因 - 日期/时间算术。

# api - 我应该信任使用 GET 方法进行用户身份验证的 API 吗？

> ID：15693375
> 
> 赞同：2
> 
> 时间：2013-03-28T22:37:35.167
> 
> 标签：api, rest, authentication, twitter-oauth, pastebin

我一直在研究 PASTEBIN 类型的 API，它可以为我正在处理的项目存储代码片段。问题是，如果我发现的大多数 API 不支持现有粘贴的编辑/更新。

我发现 Snipt.org API 确实支持片段更新。但是，snipt.org API 的身份验证是使用您的 Twitter 帐户完成的。snipt.org API 文档（[https://code.google.com/p/snipt-org/wiki/REST_API_Docs?tm=6#Authorization](https://code.google.com/p/snipt-org/wiki/REST_API_Docs?tm=6#Authorization)）建议使用 GET '/auth' 调用（在URL) 以获取 API 令牌以访问 API。只是我，还是这似乎是破坏您的 Twitter 凭据的好方法？

我使用了通过 Twitter 进行身份验证的其他网站，但我首先在 Twitter 网站上进行了身份验证，然后将令牌发送到授权的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:47:25.193

好吧，显然这个 API 有一些严重的缺陷。

但是如果你使用 https，GET 请求的 URL 将一路加密。（但仍会登录浏览器的缓存。请清除它。）

因此，如果你真的喜欢 snipt，你可以使用一个新的 twitter 帐户来验证 snipt。

感觉不会特别好。我对他们基于这部分 API 的其余安全代码有一些严重的怀疑。但是，除了已经可以访问您的 snipt 的 snipt 维护人员之外，我看不出您的凭据是如何被其他人使用这部分内容窃取的。因此，如果您仅使用凭据保护片段，而不保护推文，那么您应该没问题。

# matlab - 如何在 Matlab 中对这个 for 循环进行矢量化？

> ID：15693379
> 
> 赞同：2
> 
> 时间：2013-03-28T22:38:05.233
> 
> 标签：matlab, matrix, vectorization

我编写了一个代码，该代码生成一个长度增加的向量，然后将其逐行堆叠在矩阵中。这是代码如何工作的示例

```
 PPR=[0     2     3     5     6     8];
    AI=[ 0    0.7854    0.5236    0.3142    0.2618    0.1963];

    for ii=1:numel(PPR);
        qp=0:PPR(ii);
        xp(ii,1:PPR(ii)+1)=sin(AI(ii)*qp)+1    
    end 
```

如何矢量化这个循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:47:15.037

这是构造矩阵的完全矢量化方式 - 没有循环，没有`arrayfun`：

```
PPR=[0     2     3     5     6     8];
AI=[ 0    0.7854    0.5236    0.3142    0.2618    0.1963];

M = ones(length(PPR),PPR(end)+1); #% allocate proper sized matrix of ones
r=1:length(PPR)-1; #% row indices for 1 element past the end of each row vector
c=PPR(1:end-1)+2; #% corresponding column indices
linear_index = sub2ind(size(M),r,c); #% create linear index from r,c
M(linear_index)=nan; #% set those elements to NaN
M2 = cumsum(M,2)-1; #% use cumsum to propagate the NaN values
M3 = bsxfun(@times,M2,AI'); #%'#multiply each row by the appropriate AI value
xp = sin(M3)+1 #% take the sine of the matrix 
```

为了清楚起见，我使用了一堆临时变量。如果您想避免弄乱您的工作空间，您可以避免使用它们，因为它们通常不会被多次使用。

另请注意：这会在您未指定任何其他值的情况下使用 NaN 填充矩阵。如果您希望将这些替换为其他一些默认值（例如，零或一），这在最后很容易做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T00:33:56.357

这是矢量化代码。我仍然不得不使用 ARRAYFUN 的。因此，如果它比您的循环快，请使用 tic/toc 进行测试。

```
n = numel(PPR); % number of rows
m = max(PPR)+1; % number of columns
qp = arrayfun(@(x)[0:PPR(x) nan(1,m-PPR(x)-1)],1:n,'UniformOutput',0);
qp = vertcat(qp{:});
a = ~isnan(qp); % to add ones later
qp(~a) = 0;
xp = sin(bsxfun(@times,AI',qp)) + a; 
```

# php - 无法访问 Dojo JsonRest 存储中的数据，目标是 PHP

> ID：15693383
> 
> 赞同：1
> 
> 时间：2013-03-28T22:38:27.750
> 
> 标签：php, json, dojo

我正在尝试从 dojo/Store/jsonRest (v1.8) 的 dojotoolkit.org 参考指南[从此处](http://dojotoolkit.org/reference-guide/1.8/dojo/store/JsonRest.html)复制 results.total 示例。

我的 jsonRest 存储目标是一个 php 页面[，正如我在此处了解](https://stackoverflow.com/questions/14803818/loading-encoded-json-into-dojo-grid)的那样，我在 firebug 中添加 `console.debug(data);` 了显示数据以我认为应该的方式从 php 返回的内容：（抱歉试图在这里显示图片，但我不能）

问题是我不知道如何访问数据？ `results.total.then`什么都不返回，我认为该函数甚至不会运行。

我试过`store.get`了，这给了我 php url 的 404 错误。我尝试像这样转换商店：`newStore = ObjectStore({objectStore: store});`然后在 newStore 上运行查询，这没有错误，但也没有结果。

如果我尝试使用“foo=bar”语法查询商店，我也会收到 404 错误，在我的情况下`store.query ("ADDNUM='200'")` ，但如果我使用该`store.query ({ADDNUM:"200"})`语法则没有错误。

我的最终目标是让结果显示在 dojo 过滤选择中，但现在我将满足于能够得到它们，即使只是 console.log(result)。
非常感谢任何人可以提供的任何帮助！

```
require([
  "dojo/store/JsonRest", 
  "dojo/data/ObjectStore", 
  "dojo/store/Memory"
  ], function(JsonRest, Memory, ObjectStore){
    var store = new JsonRest({
    target: "scripts/AddressNumTest.php"
    });

var self = this;
var results = store.query({ADDNUM:"200"}).then(function(data){
  console.debug(data);  //results from this look okay to me
  results.total.then(function(total){
     console.log("Never gets here??");
     console.log("total results: ", total);
     console.log("go on and use data ", data, " with this ", self);
     });
  });

//store.query("ADDNUM='200'")  //this returns 404 error

//below gives 404 error           
//var results2 = store.get({ADDNUM:"200"}).then(function(newdata){
//console.log("from get: " + newdata);            
//});

}); 
```

`Result when no Error but also no success in accessing data in store: GET ../scripts/AddressNumTest.php?ADDNUM=200 200 OK -- RESPONSE: {identifier: 'OBJECTID', label: 'ADDNUM', 'items':[{"ADDNUM":"136","OBJECTID":"307"},{"ADDNUM":"150","OBJECTID":"308"},{"ADDNUM":"200","OBJECTID":"8494"},{"ADDNUM":"210","OBJECTID":"8495"},{"ADDNUM":"220","OBJECTID":"2950"}]}`

`404 Error when using store.get: GET .../scripts/AddressNumTest.php%5Bobject%20Object%5D 404 Not Found RequestError: Unable to load scripts/AddressNumTest.php[object Object] status: 404`

`404 Error when I use "ADDNUM='200'" syntax: GET .../scripts/AddressNumTest.phpADDNUM=%27200%27 404 Not Found RequestError: Unable to load scripts/AddressNumTest.phpADDNUM='200' status: 404`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:15:01.650

我不知道结果是否在关闭中可用，但我认为您不需要它。回调正在传入`data`，这在您的 中看起来是正确的`console.debug(data)`，所以让我建议这段代码。

```
var results = store.query({ADDNUM:"200"}).then(function(data){
  console.debug(data);  //results from this look okay to me
  console.log("You will get here!  :)");
  // I do not know what data looks like so this may or may not work.
  console.log("total results: ", data.total);
  console.log("go on and use data ", data, " with this ", self);
}); 
```

# linux - 搜索具有特定结尾的文件

> ID：15693386
> 
> 赞同：0
> 
> 时间：2013-03-28T22:38:40.157
> 
> 标签：linux, terminal

我的 Ubuntu 机器上有一个文件夹，里面有大量图像。

我如何找到所有具有特定结尾的文件，例如`_some_ending.tif`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:40:05.787

仅在当前目录中：

```
ls *_some_ending.tif 
```

递归目录：

```
find . -name "*_some_ending.tif" 
```

# vb.net - 使用另一个 Sub 将代码提供给 Button/ToolStripMenuItem

> ID：15693390
> 
> 赞同：0
> 
> 时间：2013-03-28T22:38:55.280
> 
> 标签：vb.net

所以，我想让我的应用程序播放视频文件。您可以通过 ToolStripMenuItem 选择一个。我使代码几乎成为所有 500 个 ToolStripMenuItems 的多面手。我要遵守的准则：

```
Dim Inst As String = My.Computer.FileSystem.SpecialDirectorys.ProgramFiles + "\folder\"

Private Sub PlayVid(Name)
    AxWindowsMediaPlayer1.URL = Inst + IO.File.ReadAllLines(Inst + "directorys.txt")(Name.Txt.Substring(0, 3))
End Sub

Private Sub ToolStripMenuItem1_Click(sender As System.Objekt) ToolStripMenuItem1.Click
    Call PlayVid(Ctype(sender, ToolStripMenuItem))
End Sub 
```

所以现在我需要分配给每个 ToolStripMenuItem 的代码很短，但我仍然需要为其中超过 500 个执行此操作。所以我的问题是，如果有办法（可能在 Form.Load 中）将这个（*Call PlayVid(Ctype(sender, ToolStripMenuItem)* ) 代码分配给每个人。就像是：

```
Private Sub Form_Load() Handles MyBase.Load
    Dim T As Control
    For Each T in Controls
        If TypeOf C is ToolStripMenuItem Then
            C.Code = Call PlayVid(Ctype(sender, ToolStripMenuItem))
        End If
    Next
End Sub 
```

这样的事情可能吗？如果是这样，它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:40:40.620

500 个菜单项？哇。

无论如何，当您创建菜单项时，其中一个参数是用于单击处理程序的：

```
Dim tsm As New ToolStripMenuItem("YourFile", Nothing, AddressOf PlayVid) 
```

你的 PlayVid 方法应该有适当的参数来匹配点击事件：

```
Private Sub PlayVid(sender As Object, e As EventArgs)

End Sub 
```

ToolStripMenuItems 不是传统意义上的控件。参考您的父菜单项：

```
For Each menuItem As ToolStripMenuItem In ToolStripDropDownButton1.DropDownItems

Next 
```

# android - Android模拟器中包含中文应用程序？

> ID：15693391
> 
> 赞同：1
> 
> 时间：2013-03-28T22:39:01.753
> 
> 标签：android, android-emulator

我正在查看我的 android 4.2.2 模拟器上的应用程序（通过 Eclipse 插件正常下载），我看到了一个中文（或某些亚洲语言）应用程序 - 列表的最后一个 - 显然是模拟器附带的：

[http://imageshack.us/a/img543/9378/androidchinese.png](http://imageshack.us/a/img543/9378/androidchinese.png)

[http://imageshack.us/a/img132/7469/androidchinese2.png](http://imageshack.us/a/img132/7469/androidchinese2.png) [http://imageshack.us/a/img46/3195/androidchinese3.png](http://imageshack.us/a/img46/3195/androidchinese3.png)

有谁知道它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:46:40.137

那是一种拼音输入法，因为中文没有字母，所以用拉丁键盘输入中文字符的一种快速方法是使用“拼音”，这是中国官方将汉字音译成拉丁字母的标准。

应用程序的名称应为“suge pinyin shurufa”，其中“suge”是名称。我不知道这是不是“巧合”，但是，afaik，最流行的中文输入程序叫做“sougou”。

在 google play 你可以找到所有关于它的信息，包括权限原因，只需搜索 Google Pinyin IME。

# javascript - 使用 Javascript 设置复选框值

> ID：15693392
> 
> 赞同：0
> 
> 时间：2013-03-28T22:39:10.580
> 
> 标签：javascript, html, jsp

我有一个复选框标签，可以说 checkbox1：

```
<TL:FWCheckBoxTag bean="<%=abc %>"  tabindex="23"/> 
```

我想根据复选框是否选中为复选框发送两个不同的值（值属性）。

例如，如果人们选中复选框，我想发送“aa”，如果没有选中，我想发送“bb”。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:01:36.617

您可以添加`value="aa"`到您的复选框，如果选中该框，这将是发送的值。本机复选框无法发送“未选中”值。如果检查的值丢失，您要么必须检查服务器端，要么实施 javascript 解决方法。

在 javascript 中解决此问题的一种方法是使用具有实际值的隐藏字段，并将事件连接到复选框以切换隐藏字段的值。

这是一个使用 jQuery 连接解决方​​法的原生 HTML 示例：

```
<input type="hidden" name="myrealtextboxvalue" id="myrealtextboxvalue" value="bb"/>
<input type="checkbox" name="toggle" id="toggle"/> Check me

<script>
$(document).ready(function() {
   $("#toggle").change(function() {
      if($(this).is(":checked")) $("#myrealtextboxvalue").val("aa");
      else $("#myrealtextboxvalue").val("bb");
   });
});
</script> 
```

然后，您将查找“myrealtextboxvalue”服务器端以找到您的 'aa' 或 'bb' 值。

工作示例：http: [//jsbin.com/agucer/1/edit](http://jsbin.com/agucer/1/edit)

（我使输入可见，因此您可以看到发生的更改，您可以像上面那样更改 type="hidden" ）

# java - 如何区分java计算器中的第一个int和第二个int？

> ID：15693395
> 
> 赞同：0
> 
> 时间：2013-03-28T22:39:24.970
> 
> 标签：java, swing, model-view-controller, user-interface, calculator

我正在使用 MVC 风格制作一个 java 计算器。我只是无法区分他们输入的第一个数字和第二个数字。我输入了一个布尔值，当输入加号或减号时变为真，这会将数字字符串更改回“”，一个空白字符串。但是当我在这个布尔值为真时去获取它时，字符串已经是空白的，所以为时已晚。关于如何获得第一个数字然后是第二个数字的任何建议？这个计算器只是使用加号和减号。带有一个等于和清除按钮。谢谢

计算类

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class Calc extends JFrame implements ActionListener {

    private JTextField numDisplay = new JTextField(10);
    private JButton plusButton = new JButton("+");
    private JButton minusButton = new JButton("-");
    private JButton clearButton = new JButton("Clear");
    private JButton equalsButton = new JButton("=");
    private JButton zeroButton = new JButton("0");
    private JButton oneButton = new JButton("1");
    private JButton twoButton = new JButton("2");
    private JButton threeButton = new JButton("3");
    private JButton fourButton = new JButton("4");
    private JButton fiveButton = new JButton("5");
    private JButton sixButton = new JButton("6");
    private JButton sevenButton = new JButton("7");
    private JButton eightButton = new JButton("8");
    private JButton nineButton = new JButton("9");
    private String number = "";
    private boolean trueFalse;   //plus or minus
    private boolean onOff = false;   //false = 1st int, true = 2nd int
    private int total;
    private boolean isEquals = false;   // false = haven't clicked equals button yet,     true they have
    //private String numberText;

    Calc(){
        JPanel calcPanel = new JPanel();

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(400, 600);
        calcPanel.add(numDisplay);
        calcPanel.add(plusButton);
        calcPanel.add(minusButton);
        calcPanel.add(clearButton);
        calcPanel.add(equalsButton);
        calcPanel.add(zeroButton);
        calcPanel.add(oneButton);
        calcPanel.add(twoButton);
        calcPanel.add(threeButton);
        calcPanel.add(fourButton);
        calcPanel.add(fiveButton);
        calcPanel.add(sixButton);
        calcPanel.add(sevenButton);
        calcPanel.add(eightButton);
        calcPanel.add(nineButton);

        this.add(calcPanel);

        plusButton.addActionListener(this);
        minusButton.addActionListener(this);
        clearButton.addActionListener(this);
        equalsButton.addActionListener(this);
        zeroButton.addActionListener(this);
        oneButton.addActionListener(this);
        twoButton.addActionListener(this);
        threeButton.addActionListener(this);
        fourButton.addActionListener(this);
        fiveButton.addActionListener(this);
        sixButton.addActionListener(this);
        sevenButton.addActionListener(this);
        eightButton.addActionListener(this);
        nineButton.addActionListener(this);

    }
    public void actionPerformed(ActionEvent event){
        if (event.getSource() instanceof JButton){
            JButton clickedButton = (JButton) event.getSource();
            String buttonText = clickedButton.getText();
            if (clickedButton == zeroButton || clickedButton == oneButton || clickedButton == twoButton || clickedButton == threeButton || clickedButton == fourButton || clickedButton == fiveButton || clickedButton == sixButton || clickedButton == sevenButton || clickedButton == eightButton || clickedButton == nineButton)
            {
                number = number + buttonText;
            }
            if (clickedButton == clearButton){
                number = "";
                onOff = false;
            }
            if (clickedButton == plusButton){
                trueFalse = true;
                onOff = true;
            }
            if (clickedButton == minusButton){
                trueFalse = false;
                onOff = true;
                number = "";
            }
            if (clickedButton == equalsButton){
                isEquals = true;
            }
        }
    }
    public int getNumber(){
        return Integer.parseInt(number);
    }
    public boolean trueFalse(){
        return trueFalse;
    }
    public boolean onOff(){
        return onOff;
    }
    public int total(){
        return total;
    }
    public boolean isEquals(){
        return isEquals;
    }
    public String getNumberString(){
        return number;
    }
} 
```

计算类

```
public class Calculations
{
    private Calc theView;
    private CalculationModel theModel;
    private boolean onOff = theView.onOff();
    private boolean trueFalse = theView.trueFalse();
    private int number1;

    public Calculations(Calc theView, CalculationModel theModel)
    {
        this.theView = theView;
        this.theModel = theModel;
    }

    public void doesometing() {
        if(trueFalse)     
        {
            number1 = theView.getNumber();
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:45:56.807

处理用户输入的一种方法是将用户输入的值压入堆栈。这样他最近的值是最后的。

要进行计算，您从堆栈中弹出两个值，运行计算并将结果压入堆栈。输入的下一个值 thn 在最后一个结果之后进入堆栈。

编辑：收集数字以制作数字可以通过将数字附加到字符串的末尾并在按下非数字时将字符串转换为数字来完成。请注意，连续两个点不是有效数字，因此您需要处理它。

# xml - 在 Groovy 中使用 OpenNLP

> ID：15693398
> 
> 赞同：0
> 
> 时间：2013-03-28T22:39:37.407
> 
> 标签：xml, groovy, opennlp

我正在尝试编写一个（希望如此）简单的脚本来解析一个简短的段落。我需要它在两个单独的步骤中进行句子检测和标记化，以便用户可以在继续下一步之前编辑句子检测的输出。这是为了手动捕捉任何可以分解成更小的完整句子的句子。我将使用的散文将非常短，因此句子检测和编辑应该是微不足道的。一旦用户对句子输出文件感到满意，分词器应该进一步分解每一行。然后，结果将进入一个 XML 文件。最终结果应该是这样的：

原始输入：“约翰喜欢玛丽，玛丽喜欢约翰。”

编辑后的句子输出：

```
John likes Mary and Mary likes John.
John likes Mary
and
Mary likes John. 
```

最终输出：

```
<fullText>
<snippet value="John likes Mary and Mary likes John.">
<snippet value="John likes Mary">
<snippet value="John"/>
<snippet value="likes"/>
<snippet value="Mary"/>
</snippet>
<snippet value="and"/>
<snippet value="Mary likes John.">
<snippet value="Mary"/>
<snippet value="likes"/>
<snippet value="John"/>
<snippet value="."/>
</snippet>
</snippet>
</fullText> 
```

我遇到过[OpenNLP](http://opennlp.apache.org/)，它似乎同时具有我需要的句子检测器和标记器，但我是 Groovy 的新手，我无法弄清楚如何在我的脚本中使用这些工具。我尝试使用[此处](https://gist.github.com/nagaimasato/1178725)找到的代码，但无法使其正常工作。我的脚本中有以下代码，但我收到一个错误，即找不到 TokenizerModel。

```
@Grapes(
  @Grab(
    group='org.apache.opennlp', 
    module='opennlp', 
    version='1.5.1-incubating'
  )
)
import opennlp.tools.tokenize.*

static TokenizerModel tokenizerModel 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:47:15.853

您可以将其包含在您的*BuildConfig.groovy 中*。
确保您`mavenCentral()`在您的存储库块中有，并在依赖项中添加 OpenNLP 的依赖项，您可以在[此处](http://opennlp.apache.org/maven-dependency.html)找到。

应该看起来像这样：

```
repositories {
    grailsPlugins()
    grailsHome()
    mavenCentral()
} 
dependencies {
    compile 'org.apache.opennlp:opennlp-tools:1.5.2-incubating'
} 
```

# dotcloud - docker中容器的防火墙

> ID：15693403
> 
> 赞同：1
> 
> 时间：2013-03-28T22:39:55.770
> 
> 标签：dotcloud, docker

运行 docker 后如何知道容器的网络接口？

请求在 docker 中为容器设置防火墙的简单示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:43:20.217

好的，我在 IRC 上问了这个问题。如果您需要拒绝/允许从所有容器访问某些内容，您可以使用 lxcbr0 接口。

每个容器的ip地址都是在容器启动后动态变化的。iptables 规则应该在每个容器启动后动态运行。在解决该问题[https://github.com/dotcloud/docker/issues/252](https://github.com/dotcloud/docker/issues/252)之后，您可以在钩子中运行检查命令以了解 IP 地址，例如：

```
$ sudo ./docker inspect 7c0154dbf88c2498dda9d42e58b6d6f0896368fa986cb2559f08a424cf1107ac
2013/03/29 12:34:02 docker inspect 7c0154dbf88c2498dda9d42e58b6d6f0896368fa986cb2559f08a424cf1107ac
{
     //...
    "NetworkSettings": {
       "IpAddress": "10.0.3.2",
       "IpPrefixLen": 24,
       "Gateway": "10.0.3.1",
       "PortMapping": {}
    },
    //...
} 
```

# google-maps-api-3 - 谷歌地图（javascript v3 API）中只显示一个标记？

> ID：15693411
> 
> 赞同：1
> 
> 时间：2013-03-28T22:40:34.387
> 
> 标签：google-maps-api-3

我正在使用 jinja 通过一些烧瓶数据进行模板化；生成的模板信息是具有 lat & lng 属性的 db 对象列表。

生成的（生成的）html 如下所示：

```
<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(30.245395,-97.800273),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);

      var seismic = new google.maps.Marker({
        position: new google.maps.LatLng(35.362736, -118.5664773),
        map: map,
        title: seismic
      });

      var reimers = new google.maps.Marker({
        position: new google.maps.LatLng(30.3337, -98.1222),
        map: map,
        title: reimers
      });

  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

然而，两者中只有一个标记显示（后者）。

有任何想法吗？

编辑：值得一提的是，我在控制台中收到此错误：文件“/Users/ianseyer/Documents/programming/geology/templates/map.html”，第 24 行，位于顶级模板代码位置：新 google.maps .LatLng({{ result.lat|float }}, {{ result.lng|float }}), UndefinedError: 'None' 没有属性 'lat'

但生成的html是完全准确的

# c# - 数据集中的 HTML 字符串文本和格式，报告

> ID：15693412
> 
> 赞同：1
> 
> 时间：2013-03-28T22:40:35.097
> 
> 标签：c#

我有一个html字符串..

```
<div id="P1">
    <table id="P1Table">
        <tr>
            <td width="50%">
                ABCD: <span style="font-weight:bold;>First</span>
            </td>
            <td width="50%">
                ABCD: <span style="font-weight:bold;>First</span>
            </td>
    </table>
    <table id="Table Two">
        <tr>
            <td class="one">
                First:
            </td>
            <td class="two">
                None
            </td>
        </tr>
        <tr>
            <td class="one">
                First:
            </td>
            <td class="two">
                None
            </td>
        </tr>
        <tr>
            <td class="one">
                First:
            </td>
            <td class="two">
                None
            </td>
        </tr>
        <tr>
    </table>
</div> 
```

这是字符串的文本可视化工具。这是使用 asp 文字显示在网页上的。

现在这是我需要一些帮助的地方。我正在尝试在 pdf 报告中获取文本和格式（html 可视化工具）。所以关于如何做到这一点的任何想法。如果将此信息获取到数据集然后使用 reprtviewer 生成报告会更容易，我将如何将 html 文本和格式获取到数据集。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:49:07.597

[Pechkin](https://github.com/gmanny/Pechkin/blob/master/README.md)是对相当受好评的独立[HtmlToPdf](https://code.google.com/p/wkhtmltopdf/)的 .NET 包装器。这可以用来做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:47:13.893

您可以使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)将 html 转换为 pdf。看看[这个](https://stackoverflow.com/a/2835265/663036)答案。

# sql - SQL (Oracle) 中的插入/约束

> ID：15693416
> 
> 赞同：0
> 
> 时间：2013-03-28T22:40:58.757
> 
> 标签：sql, oracle11g

我在 SQL (Oracle DB) 中遇到 INSERTING 或 CONSTRAINT 问题。

我创建表 BOOKS（ID PK，TITLE，YEAR，PRICE，ID_AUTHOR FK，ID_PUBLISHER FK，ID_KIND FK），然后我尝试在该表中插入 18 行。正确添加了 9 行，但在第十行是此错误：

```
INSERT INTO KSIAZKA 
VALUES 
(10, 'Visual Basic .NET i platforma .NET', 2000, 70.00, 7, 3, 9) 
```

```
错误报告：
SQL 错误：ORA-02291：违反完整性约束 (SYSTEM.ID_AUTOR) - 未找到父键
02291\. 00000 - “违反完整性约束 (%s.%s) - 未找到父键”
*原因：外键值没有匹配的主键值。
*行动：删除外键或添加匹配的主键。

```

我尝试插入 10 个相同的行并正确添加了 9 个，但最后一个发生了错误。

我的问题是 - 为什么我只能插入 9 行？我能解决这个问题吗？

顺便提一句。我可以编写查询，让我知道表中的约束是正确的。

我正在使用 Oracle 11g Express Edition 和 SQL Developer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:32:36.297

尝试使用显式 sintax（带有列名）：

```
INSERT INTO KSIAZKA (column_name1,column_name2,column_name3...)
VALUES 
(10, 'Visual Basic .NET i platforma .NET', 2000, 70.00, 7, 3, 9) 
```

我认为列顺序不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:33:24.343

这是问题所在：

```
 ADD CONSTRAINT ID_AUTOR FOREIGN KEY(ID) REFERENCES AUTOR (ID) 
```

您的外键应该是 id_auto。像那样：

```
 ADD CONSTRAINT ID_AUTOR FOREIGN KEY(ID_AUTOR) REFERENCES AUTOR (ID) 
```

问候！

# php - PHP: json_encode - 使用 foreach() 并为 json 编码 html 元素

> ID：15693418
> 
> 赞同：1
> 
> 时间：2013-03-28T22:41:02.930
> 
> 标签：php, api, json

我正在尝试从 mysql 解析文章并使用 php 将 json 中的数据编码。

目前发表的文章我使用：

```
<?php if ($success): ?>
    <?php foreach($article->get_items() as $item): ?>

    <?php echo $item->get_content(); ?>

    <?php endforeach; ?>
<?php endif; ?> 
```

我正在尝试将其**编码为 json**。

我试过这个：

```
<?php if ($success): ?>
    <?php foreach($feed->get_items() as $item): ?>

    <?php
    $data = array(
        'id'    =>    "1",
        'result'       =>    array(
                            'title'    =>   'This is the title',
                            'publish'   =>  'John Doe',
                            'content'    =>  $item->get_content()
                     )
    );

    echo json_encode($data);
?>
<?php endforeach; ?>
<?php endif; ?> 
```

另外，**我不确定如何使用 foreach()**来解析和编码所有内容。

更新：

**从$item->get_content()**解析的内容具有 HTML 元素，例如**,**等等，所以它们应该被编码成 json 或字符串？****

 ******更新 2：**

问题是目前我最终得到了这个：

```
[
{"id":"1","result":{"title":"This is the title","publish":"John Doe","content":"content 1"}},
{"id":"1","result":{"title":"This is the title","publish":"John Doe","content":"content 1"}},
{"id":"1","result":{"title":"This is the title","publish":"John Doe","content":"content 1"}},
{"id":"1","result":{"title":"This is the title","publish":"John Doe","content":"content 1"}},
{"id":"1","result":{"title":"This is the title","publish":"John Doe","content":"content 1"}}
] 
```

因为**我没有正确使用 foreach()**并且我想以这个结束：

```
[
{"id":"1","result": {"title":"This is the title","publish":"John Doe","content":"content 1"},
            {"title":"This is the title","publish":"John Doe","content":"content 1"},
            {"title":"This is the title","publish":"John Doe","content":"content 1"},
            {"title":"This is the title","publish":"John Doe","content":"content 1"},
            {"title":"This is the title","publish":"John Doe","content":"content 1"}
] 
```

而且**内容有时包含**破坏json编码的html元素，所以我想我必须将它编码为json或字符串？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T22:48:39.910

创建一个包含所有数据的数组，然后将其编码为`json`

```
if ($success){
    $result = array();
    foreach($feed->get_items() as $item){
        $data = array(
             'id'    =>    "1",
             'result'       =>    array(
                   'title'    =>   'This is the title',
                   'publish'  =>  'John Doe',
                   'content'  =>  $item->get_content()
             )
         );
         array_push($result,$data);
    }                
    echo json_encode($result);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T22:47:38.513

```
<?php
foreach($article->get_items() as $item){
    $result[] = array(
            'title'   => 'This is the title',
            'publish' => 'John Doe',
            'content' => $item->get_content()
        );
    );
}

echo json_encode(array('id'=>'1', 'result'=>$result));
?> 
```

实际上，我不确定我是否了解您的需求，因此可能无济于事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T23:04:40.050

输出包含`HTML`代码的字符串时，您需要使用[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)：

```
echo htmlspecialchars(json_encode($data)); 
```

例如：

```
$data = array('id' => '<hello>');

echo htmlspecialchars(json_encode($data));

// Outputs: {"id":"<hello>"} 
```****

# ios - 在 init 方法中使用 arc 导致内存泄漏

> ID：15693420
> 
> 赞同：2
> 
> 时间：2013-03-28T22:41:10.513
> 
> 标签：ios, automatic-ref-counting, memory-leaks

为什么泄漏仪器告诉我这是泄漏？我正在使用 ARC。我应该怎么做才能不泄漏？顺便说一句，我尝试将“强”更改为“弱”，但随后收到警告`"Assigning retained object to weak property; object will be released after assignment"`

```
@property (nonatomic, strong) NSMutableArray *myArray;

-(id)init{
    self = [super init];
    if (self){
        _myArray = [[NSMutableArray alloc] init]; //<== leak here
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:43:39.267

您确定ARC实际上已打开吗？尝试添加类似 [self release] 的内容，看看它是否可以编译。如果是这样，则 ARC 未打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:50:09.807

您不应该`properties`通过它们的`getter`内部`init`或`dealloc`方法访问。相反，您应该直接设置支持 ivar，如下所示：

```
-(id)init
{  
  self = [super init]; 

  if (self)
  {  
    _myArray = [[NSMutableArray alloc] init]; //<== leak here
  } 

  return self;  
} 
```

注意：如果您`auto-synthesize`在最新版本的 Xcode 中使用该功能 - 也就是说，您没有手动编写`@synthesize`一行 - 支持 ivar 将与您的属性命名相同，并在其前面加上下划线。

试试上面的这个，看看泄漏是否消失。

祝你好运。

# ruby-on-rails - 来自 hartl 第 9.2 章的 rspec/factory 问题 - 应用程序功能正常，但测试失败

> ID：15693425
> 
> 赞同：0
> 
> 时间：2013-03-28T22:41:42.083
> 
> 标签：ruby-on-rails, factory-bot, rspec-rails, railstutorial.org

在我对 Hartl 教程的[第 9.2 节](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec-requiring_signed_in_users)中的rspec 测试进行最后一次更改之前，所有测试都运行良好。那时我的 user_pages_spec.rb 和 application_pages_spec.rb 中的所有相关测试都失败了。

不过，我已经检查了该站点，并且故障并没有出现在现实生活中——所以我认为这是测试套件试图模拟用户的方式的问题——这是有道理的，因为这就是我所做的改变。

需要注意的一件事 - 我已经对 Hartl 教程进行了一些调整，但大多数都是装饰性的或次要的 - 这里唯一可能重要的是我使用用户名而不是电子邮件进行登录和查找。

完整文件如下 - 非常感谢任何帮助，因为我已经把头撞在墙上几个小时了，而且它变得非常令人沮丧。

规范/支持/实用程序.rb：

```
def full_title(page_title)
  base_title = "nsent"
  if page_title.empty?
    base_title
  else
    "#{base_title} | #{page_title}"
  end
end

def sign_in(user)
  visit signin_path
  fill_in "Name",    with: user.name
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end 
```

规格/支持/factories.rb：

```
FactoryGirl.define do
  factory :user do
    name     "Example User"
    email    "user@example.com"
    password "foobar"
    password_confirmation "foobar"
  end
end 
```

user_pages_spec.rb：

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "signup" do

    before { visit signup_path }

    describe "should have the right title and heading" do
            it { should have_selector('h1',    text: "Sign up") }
        it { should have_selector('title', text: full_title("Sign up")) }
    end

    let(:submit) { "Sign up" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
      describe "after submission" do
        before {click_button submit }

        it { should have_selector('title', text: "Sign up") }
        it { should have_content('field') }
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Password confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'welcome') }
        it { should have_link('Sign out') }
      end
        end
  end

    describe "profile page" do
      let(:user) { FactoryGirl.create(:user) }
      before { visit user_path(user) }

      it { should have_selector('h1',    text: user.name) }
      it { should have_selector('title', text: user.name) }
    end

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('Change Profile Picture', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('Whoops') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }
      before do
        fill_in "Name",             with: new_name
        fill_in "Password",         with: user.password
        fill_in "Password confirmation", with: user.password
        fill_in "Email",            with: new_email
        click_button "Save changes"
      end

      it { should have_selector('title', text: new_name) }
      it { should have_selector('div.alert.alert-success') }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should  == new_name }
      specify { user.reload.email.should == new_email }
    end
  end
end 
```

user_pages_spec.rb 失败（终端输出）：

```
 Failures:

  1) User pages edit with invalid information
     Failure/Error: before { click_button "Save changes" }
     Capybara::ElementNotFound:
       no button with value or id or text 'Save changes' found
     # (eval):2:in `click_button'
     # ./spec/requests/user_pages_spec.rb:75:in `block (4 levels) in <top (required)>'

  2) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  3) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  4) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  5) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  6) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  7) User pages edit page
     Failure/Error: it { should have_selector('title', text: "Edit user") }
       expected css "title" with text "Edit user" to return something
     # ./spec/requests/user_pages_spec.rb:70:in `block (4 levels) in <top (required)>'

  8) User pages edit page
     Failure/Error: it { should have_link('Change Profile Picture', href: 'http://gravatar.com/emails') }
       expected link "Change Profile Picture" to return something
     # ./spec/requests/user_pages_spec.rb:71:in `block (4 levels) in <top (required)>'

  9) User pages edit page
     Failure/Error: it { should have_selector('h1',    text: "Update your profile") }
       expected css "h1" with text "Update your profile" to return something
     # ./spec/requests/user_pages_spec.rb:69:in `block (4 levels) in <top (required)>'

Finished in 1.06 seconds
20 examples, 9 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:77 # User pages edit with invalid information
rspec ./spec/requests/user_pages_spec.rb:91 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:93 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:92 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:95 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:94 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:70 # User pages edit page
rspec ./spec/requests/user_pages_spec.rb:71 # User pages edit page
rspec ./spec/requests/user_pages_spec.rb:69 # User pages edit page 
```

application_pages_spec.rb：

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "nsent"}
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile',  href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in', href: signin_path) }
        it { should_not have_link('Profile',  href: user_path(user)) }
        it { should_not have_link('Settings', href: edit_user_path(user)) }
        it { should_not have_link('Sign out', href: signout_path) }
      end
    end
  end

    describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end
      end
    end
  end
end 
```

applications_pages_spec.rb 失败（终端输出）：

```
Failures:

  1) Authentication signin with valid information
     Failure/Error: it { should have_selector('title', text: user.name) }
       expected css "title" with text "Example User" to return something
     # ./spec/requests/authentication_pages_spec.rb:33:in `block (4 levels) in <top (required)>'

  2) Authentication signin with valid information
     Failure/Error: it { should have_link('Settings', href: edit_user_path(user)) }
       expected link "Settings" to return something
     # ./spec/requests/authentication_pages_spec.rb:35:in `block (4 levels) in <top (required)>'

  3) Authentication signin with valid information
     Failure/Error: it { should have_link('Profile',  href: user_path(user)) }
       expected link "Profile" to return something
     # ./spec/requests/authentication_pages_spec.rb:34:in `block (4 levels) in <top (required)>'

  4) Authentication signin with valid information
     Failure/Error: it { should_not have_link('Sign in', href: signin_path) }
       expected link "Sign in" not to return anything
     # ./spec/requests/authentication_pages_spec.rb:37:in `block (4 levels) in <top (required)>'

  5) Authentication signin with valid information
     Failure/Error: it { should have_link('Sign out', href: signout_path) }
       expected link "Sign out" to return something
     # ./spec/requests/authentication_pages_spec.rb:36:in `block (4 levels) in <top (required)>'

  6) Authentication signin with valid information followed by signout
     Failure/Error: before { click_link "Sign out" }
     Capybara::ElementNotFound:
       no link with title, id or text 'Sign out' found
     # (eval):2:in `click_link'
     # ./spec/requests/authentication_pages_spec.rb:40:in `block (5 levels) in <top (required)>'

  7) Authentication signin with valid information followed by signout
     Failure/Error: before { click_link "Sign out" }
     Capybara::ElementNotFound:
       no link with title, id or text 'Sign out' found
     # (eval):2:in `click_link'
     # ./spec/requests/authentication_pages_spec.rb:40:in `block (5 levels) in <top (required)>'

  8) Authentication signin with valid information followed by signout
     Failure/Error: before { click_link "Sign out" }
     Capybara::ElementNotFound:
       no link with title, id or text 'Sign out' found
     # (eval):2:in `click_link'
     # ./spec/requests/authentication_pages_spec.rb:40:in `block (5 levels) in <top (required)>'

  9) Authentication signin with valid information followed by signout
     Failure/Error: before { click_link "Sign out" }
     Capybara::ElementNotFound:
       no link with title, id or text 'Sign out' found
     # (eval):2:in `click_link'
     # ./spec/requests/authentication_pages_spec.rb:40:in `block (5 levels) in <top (required)>'

  10) User pages edit with invalid information
     Failure/Error: before { click_button "Save changes" }
     Capybara::ElementNotFound:
       no button with value or id or text 'Save changes' found
     # (eval):2:in `click_button'
     # ./spec/requests/user_pages_spec.rb:75:in `block (4 levels) in <top (required)>'

  11) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  12) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  13) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  14) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  15) User pages edit with valid information
     Failure/Error: fill_in "Password confirmation", with: user.password
     Capybara::ElementNotFound:
       cannot fill in, no text field, text area or password field with id, name, or label 'Password confirmation' found
     # (eval):2:in `fill_in'
     # ./spec/requests/user_pages_spec.rb:86:in `block (4 levels) in <top (required)>'

  16) User pages edit page
     Failure/Error: it { should have_selector('title', text: "Edit user") }
       expected css "title" with text "Edit user" to return something
     # ./spec/requests/user_pages_spec.rb:70:in `block (4 levels) in <top (required)>'

  17) User pages edit page
     Failure/Error: it { should have_link('Change Profile Picture', href: 'http://gravatar.com/emails') }
       expected link "Change Profile Picture" to return something
     # ./spec/requests/user_pages_spec.rb:71:in `block (4 levels) in <top (required)>'

  18) User pages edit page
     Failure/Error: it { should have_selector('h1',    text: "Update your profile") }
       expected css "h1" with text "Update your profile" to return something
     # ./spec/requests/user_pages_spec.rb:69:in `block (4 levels) in <top (required)>'

Finished in 1.53 seconds
36 examples, 18 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:33 # Authentication signin with valid information
rspec ./spec/requests/authentication_pages_spec.rb:35 # Authentication signin with valid information
rspec ./spec/requests/authentication_pages_spec.rb:34 # Authentication signin with valid information
rspec ./spec/requests/authentication_pages_spec.rb:37 # Authentication signin with valid information
rspec ./spec/requests/authentication_pages_spec.rb:36 # Authentication signin with valid information
rspec ./spec/requests/authentication_pages_spec.rb:42 # Authentication signin with valid information followed by signout
rspec ./spec/requests/authentication_pages_spec.rb:44 # Authentication signin with valid information followed by signout
rspec ./spec/requests/authentication_pages_spec.rb:41 # Authentication signin with valid information followed by signout
rspec ./spec/requests/authentication_pages_spec.rb:43 # Authentication signin with valid information followed by signout
rspec ./spec/requests/user_pages_spec.rb:77 # User pages edit with invalid information
rspec ./spec/requests/user_pages_spec.rb:91 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:93 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:92 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:95 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:94 # User pages edit with valid information
rspec ./spec/requests/user_pages_spec.rb:70 # User pages edit page
rspec ./spec/requests/user_pages_spec.rb:71 # User pages edit page
rspec ./spec/requests/user_pages_spec.rb:69 # User pages edit page 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:26:19.053

When you define a block using describe, you need to put the page visit step in. `describe` kind of resets the context in which the subsequent steps are called.

```
 describe "with invalid information" do
      before do
      visit edit_user_path(user)
      click_button "Save changes"
      end

      it { should have_content('Whoops') }
 end 
```

When you are defining sub step in RSpec, use `it`, instead.

# c++ - 是否有可以将 Visual Studio 目标文件转换为 GCC 格式的工具？

> ID：15693427
> 
> 赞同：3
> 
> 时间：2013-03-28T22:41:43.150
> 
> 标签：c++, visual-studio, gcc, cross-compiling, interix

我正在使用 Interix 在 Windows 上构建 C++ 应用程序，需要链接三个目标文件以提供第三方许可模块的功能。第三方提供了由 Visual Studio 构建的目标文件。无论如何转换文件以供 GCC 使用？例如，如果我将名称修改从 Visual Studio 样式更改为 GCC 样式就足够了，或者这两种目标文件格式之间是否存在其他差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T06:40:37.743

Windows 没有标准化的 C++ ABI（应用程序*二进制*接口）。不过，它确实有一个 C ABI。这是例如 使用的 ABI `Kernel32.DLL`，因此所有 Windows 编程环境都可以理解它。许多人还可以生成这样的 DLL。

在这种情况下，C++ .obj 文件必须由 Visual Studio 链接器链接。该链接器绝对能够创建 DLL 文件。您必须编写`extern "C"`函数来包装许可功能。添加`__declspec(dllexport)`表示这些函数是从 DLL 导出的（在 Windows 上，函数默认情况下是 DLL 私有的）。

在标头中，声明与`__declspec(dllimport)`. GCC 也明白这一点。然后链接到新生成的 DLL，它将解析`dllimport`'ed 符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-29T05:58:31.860

除了 VC++ 和 GCC/G++ 之间可能存在的符号差异之外，由于 Windows API 问题，您尝试做的事情可能是不可能的。

从 Interix GCC 构建的程序只能与 Interix 一起使用，并且由于 Interix 是与 Windows 子系统（或说 Win32 子系统）并行的独立子系统，因此您不能从 Interix 调用任何 Windows API（例如来自 kernel32.dll）程式。

如果该许可对象文件包含任何 Windows API 调用，则无法进行链接。

# c# - 在 ToolStripSplitButton 中循环通过 DropDownItems

> ID：15693431
> 
> 赞同：0
> 
> 时间：2013-03-28T22:42:09.903
> 
> 标签：c#, winforms

我有一个 WinForm 应用程序，上面有一个`ToolStripSplitButton`包含三个项目（第 1 项、第 2 项、第 3 项）的应用程序。

现在我想做的是允许用户单击`ToolStripSplit`按钮，然后将下一个值分配给`ToolStripSplit`按钮的 Text 属性。我想出了以下解决方案，它工作正常，但我想知道是否有更好的方法来做到这一点：

```
private void toolStripSplitButton_ButtonClick(object sender, EventArgs e)
{
    ToolStripSplitButton tsb = (ToolStripSplitButton)sender;

    for (int i = 0; i < tsb.DropDownItems.Count; i++)
    {
        int ii = i + 1;
        if (ii >= tsb.DropDownItems.Count)
        {
            ii = 0;
        }

        if (tsb.Text == tsb.DropDownItems[i].Text)
        {
            tsb.Text = tsb.DropDownItems[ii].Text;
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:04:15.560

更好的是在旁观者的眼中。我的版本：

```
private void toolStripSplitButton1_ButtonClick(object sender, EventArgs e) {
  ToolStripSplitButton tsb = (ToolStripSplitButton)sender;
  string text = tsb.DropDownItems[0].Text;
  bool found = false;
  for (int i = 0; i < tsb.DropDownItems.Count; i++) {
    if (found) text = tsb.DropDownItems[i].Text;
    found = (tsb.Text == tsb.DropDownItems[i].Text);
  }
  tsb.Text = text;
} 
```

# linux - 如何仅还原特定文件中的特定行？

> ID：15693433
> 
> 赞同：4
> 
> 时间：2013-03-28T22:42:18.933
> 
> 标签：linux, git, revert

假设在几次提交之前我删除了一堆代码，现在我想要*一些*代码回来。

一段时间以来，我一直在使用[SourceTree](http://www.sourcetreeapp.com/)，它允许您简单地从之前的提交中选择您想要返回的行，然后选择“Revert selected lines”（或类似的东西）。现在我在 Linux 中工作，找不到具有任何此类功能的 GUI；所以我想知道如何从命令行实现这一点。

想到的第一个选项是还原整个提交，然后将其修改为仅包含我想要返回的代码。有没有更简单/更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:58:13.597

一个想法就像你已经说过的：

撤消提交，重置它，然后重新添加文件，但使用选项 -p 以便您可以选择所需的行。

一个例子：

```
git reset --soft HEAD^
git reset HEAD fileA
git add -p fileA
...
commit here 
```

# mysql - 在MySQL中，如何在字符串值为'true'时插入1，在false时插入0，同时保留空值

> ID：15693442
> 
> 赞同：4
> 
> 时间：2013-03-28T22:42:50.467
> 
> 标签：mysql, boolean, insert-into, string-conversion

我正在使用从纯文本数据库到对`INSERT`查询`SELECT`更友好的数据库的查询。为了避免与不必要的信息混淆，以下内容进行了很多简化，如果为了清楚起见我简化得太多了，请告诉我，我会修改。

源数据如下所示：

```
 |    id (integer)    |    SomeCol (varchar)    |    BooleanCol (varchar)   |    
    ----------------------------------------------------------------------------
    |    1               |    'String Data'        |    'true'                 |
    |    2               |    'Other Data'         |    'false'                | 
```

`INSERT`在我的查询之后，目标表需要如下所示：

```
 |    id (integer)    |    SomeCol (varchar)    |    BooleanCol (tinyint(1))   |    
    -------------------------------------------------------------------------------
    |    1               |    'String Data'        |    1                         |
    |    2               |    'Other Data'         |    0                         | 
```

我正在寻找或多或少像这样工作的东西，从java语法中借用一点：

```
 INSERT INTO target(SomeCol, BooleanCol) 
    SELECT SomeCol, (BooleanCol IS NOT NULL ? (BooleanCol == 'true' ? 1 : 0) : null) 
    FROM source 
```

请注意，作为我想要的示例提供的 java 语法旨在`null`根据需要保留 s 。

另外，当我在这里时，如果您碰巧知道`SELECT`MySQL 的当前时间戳，那也会很有帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T22:47:19.580

Mysql 有一个 IF 运算符，它类似于大多数语言中的 ?: 运算符。`IF(cond, val_if_true, val_if_false)`

```
INSERT INTO target(SomeCol, BooleanCol) 
SELECT SomeCol, IF(BooleanCol IS NOT NULL , IF(BooleanCol = 'true' , 1 , 0) , null) 
FROM source 
```

# grep - 在 Bourne Shell 中编辑文件

> ID：15693444
> 
> 赞同：1
> 
> 时间：2013-03-28T22:43:03.687
> 
> 标签：grep, sh

我正在使用 Bourne Shell Script 构建学生数据库。我需要能够更新之前输入到文件中的一行数据，但我无法弄清楚如何做到这一点。这是我尝试过的：

```
 echo "please enter the name: \c"
   read updateInput

   updateNumber=$(grep -cwi $updateInput database.txt)

   if [ "$updateNumber" -gt "1" ]
   then
          echo "ambiguous input"
   elif [ ! grep -iq "$updateInput" database.txt ]
   then
           echo "record not found"
   else
           lineNumber=$(grep -ni $updateInput database.txt)

           grep -i $updateInput database.txt > tmp
           read first last age course1 course2 < tmp

           echo "record found, enter new value now:"
           echo "name ($first $last): \c" 
           read first last
           echo "age ($age): \c"
           read age
           echo "course-1 ($course1): \c"
           read course1
           while ! fgrep -iwq "$course1" $FILE 
           do
                   echo "course does not exist"
                   echo "course-1: \c"
                   read course1  
           done
           echo "course-2 ($course2): \c"
           read course2
           while ! fgrep -iwq "$course2" $FILE 
           do
                   echo "course does not exist"
                   echo "course-2: \c"
                   read course2  
           done
   fi 
```

但这显然根本没有更新文件。我只是不确定如何采用特定的行并更改它的数据。

另外，我的 elif 语句不起作用，我想知道我做错了什么-.- 只是应该说，如果找不到输入的名称，则打印出找不到记录。

感谢大家。我是 Bourne Shell Script 的新手，我在尝试让它工作时遇到了一些真正的麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:44:18.500

如果您想更新文件中的一行，您的示例不是很清楚。您可以使用命令“sed”，它对文件执行查找/替换。请查看其 unix man 的用法。

IE：

```
sed -i 's/day/night/g' file.txt 
```

将 file.txt 中的“day”替换为“night”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T07:29:25.860

您可以使用`sed`带有 inplace 标志的命令`-i`——它比`ed`. 例如，如果您想更改文件的第 5 行，`$first|$last|$course`那么请执行

```
sed -i '' -e s "5s/.*/$first|$last|$course/" database.txt 
```

附带说明一下，您可以使用`awk`它轻松地从数据库中提取数据和构建报告。

# python - 在 Flask 中，如何使用安全会话通过 curl 对用户进行身份验证？

> ID：15693448
> 
> 赞同：2
> 
> 时间：2013-03-28T22:43:30.087
> 
> 标签：python, rest, curl, flask

我正在使用 Flask 构建一个 RESTful 应用程序，它将使用会话来跟踪登录的用户。这是我改编自这个[Flask 教程的登录代码](https://github.com/mitsuhiko/flask/wiki/Large-app-how-to#first-view)

```
@mod.route('/login/', methods=['GET', 'POST'])
def login():
  user = User.query.filter_by(email=request.json['email']).first()
  # we use werkzeug to validate user's password
  if user and check_password_hash(user.password, request.json['password']):
    # the session can't be modified as it's signed, 
    # it's a safe place to store the user id
    session['user_id'] = user.id
    resp = jsonify({'status':'authenticated'})
  else:
    resp = jsonify({'status':'Invalid usernam/password'})
    resp.status_code = 401
  return resp 
```

当用户第一次登录时，我将他们的用户 ID 存储在会话中，这样当同一个用户请求资源时，数据会为他们量身定制：

```
@mod.route('/address/')
@requires_login
def user_data():
  user = User.query.filter_by(id=session['usr_id']).first
  resp = jsonify(user.address)
  return resp 
```

如果我在登录后发出此命令：

```
curl http://localhost:5000/address/ 
```

我收到：

```
{"status": 401, "message": "Unauthorized"} 
```

而不是我登录用户的地址信息。谁能告诉我如何在随后的 curl 调用中使用会话来返回特定于存储在 cookie 中的用户 ID 的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:54:22.000

对您的登录请求的响应将包含`Set-Cookie`如下所示的标头：

```
Set-Cookie:session=<encoded session>; Path=/; HttpOnly 
```

您需要将该 cookie 与您的 curl 请求一起发送，以便会话数据可用于处理，您可以使用 向 curl 请求添加其他标头`-H`，或显式指定 cookie：

```
curl --cookie "session=<encoded session>" http://localhost:5000/address/ 
```

浏览器当然会为你处理这个问题，但 curl 是完全无状态的，默认情况下不会为你解析和存储`Set-Cookie`标头，但如果你使用 curl 执行登录，你可以告诉它将 cookie 存储在一个 cookie jar 中`-c <file>`，然后您可以在下一个请求中读取它`-b file`

[HTTP Cookie 维基页面](http://en.wikipedia.org/wiki/HTTP_cookie#Session_cookie)

[卷曲饼干文档](http://curl.haxx.se/docs/http-cookies.html)

[卷曲手册页](http://curl.haxx.se/docs/manpage.html)

# c++ - 在 C/C++ 中读取 OpenOffice 文件

> ID：15693450
> 
> 赞同：3
> 
> 时间：2013-03-28T22:43:33.767
> 
> 标签：c++, c, openoffice.org, dev-c++

我很好奇如何使用我的编译器打开 OpenOffice 文档。我知道我可能可以将其转换为文本文件或 rtf，但我想知道是否可以直接从 .odt 读取。我想要做的只是像 .txt 文件那样逐行读取。任何想法都会很好，如果有帮助，我正在使用 DevC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T06:35:13.330

[根据 Wikipedia](http://en.wikipedia.org/wiki/OpenDocument_technical_specification#Format_internals)，*.odt*文件只是一个标准的 ZIP 存档，包含以下内容：

*   **XML 文件：**
    *   内容.xml
    *   元.xml
    *   设置.xml
    *   样式.xml
*   **其他文件**：
    *   模仿类型
    *   目录
    *   **元信息/**：
        *   清单.xml
    *   **缩略图/**：
        *   缩略图.png

Content.xml 将包含文件的内容（有关其他文件的信息，请参阅上面的[Wikipedia 链接](http://en.wikipedia.org/wiki/OpenDocument_technical_specification#Format_internals)）。您可以使用任何 XML 库来解析该 XML 文件（和其他文件）以读取数据。您的程序需要做的就是解压缩*.odt*文件，然后将要解析的任何 XML 文件传递​​给 XML 库。

[这个 StackOverflow 答案](https://stackoverflow.com/a/399705/1383051)中提到了您可以使用的 XML 库示例。

对于解压缩*.odt*文件，您有一些不错的选择：

*   [这个 StackOverflow answer](https://stackoverflow.com/a/10440251/1383051)建议的 libzip 。
*   [7zip](http://www.7-zip.org/download.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T01:44:49.583

它必须是C/C++吗？Linux Journal 写了一篇关于用 Python 解析 ODT 文件的文章。

[http://www.linuxjournal.com/article/9347](http://www.linuxjournal.com/article/9347)

这个想法将是相同的，只是不同的库来完成繁重的工作。

# sql - 为什么 DROP TABLE 然后重新创建 TABLE？

> ID：15693452
> 
> 赞同：2
> 
> 时间：2013-03-28T22:43:43.390
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在上 T-SQL (SQL Server 2008) 的入门课程。我在我的课件和其他在线资源中注意到以下模式：

我知道创建一个已经存在的表会导致错误，并且首先删除该表然后重新创建它可以解决这个问题（即在重新运行脚本的情况下）。删除一个表然后重新创建它的原因是什么 [示例 1]，而不是先测试它是否存在，然后如果它确实存在则跳过创建过程 [示例 2]？

样品 1：

```
IF OBJECT_ID('myTable') IS NOT NULL
    DROP TABLE myTable
GO
CREATE TABLE myTable (number INT PRIMARY KEY)
GO 
```

样本 2：

```
IF OBJECT_ID('myTable') IS NULL
    CREATE TABLE myTable (number INT PRIMARY KEY)
GO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T22:46:21.963

已存在的表可能与您想要的字段不同。所以，在你的第二个例子中，你认为桌子已经在那里，而且它是……但这不是你想要的。

如果您总是删除并重新创建，您就会知道该表具有您指定的所有字段。

# android - ffmpeg 音频同步问题 - 分数帧率

> ID：15693458
> 
> 赞同：2
> 
> 时间：2013-03-28T22:44:06.580
> 
> 标签：android, c, ffmpeg, frame-rate

我们正在开发一个 Android 应用程序，它通过 JNI 使用 ffmpeg 库来编辑视频的帧，同时保持大小、编解码器等相同。

我们遇到了输出视频的音频与视频不同步的问题。我们认为这是因为某些输入视频的帧速率不是整数，例如 25.66 fps，而我们的输出将为 25fps。我们试图更改输出编解码器的 time_base 字段以保持精度，即通过乘以分子和分母，但这会使输出帧速率高得离谱。

有谁知道如何强制 ffmpeg 使用与其读取的完全相同的输出帧速率？我们还没有找到以分数帧速率输出视频的方法。

设置输出编解码器的示例：

```
 c =                 st->codec;
    c->codec_id =       codec_id;
    c->codec_type =     AVMEDIA_TYPE_VIDEO;
    c->bit_rate =       inputCodecCtx->bit_rate;
    c->width =          inputCodecCtx->width;
    c->height =         inputCodecCtx->height;

    c->time_base.num =   1000;
    c->time_base.den =  (int)(fps*1000);//fps of the input video *1000 to keep precision

    c->gop_size =       inputCodecCtx->gop_size;
    c->pix_fmt =        inputCodecCtx->pix_fmt;

    static int write_video_frame(AVFormatContext *oc, AVStream *st, AVFrame *newpict, double fps)
    {
        int             ret = 0;
        AVCodecContext* c = st->codec;

        AVPacket pkt;
        av_init_packet(&pkt);

        if (pkt.pts != AV_NOPTS_VALUE)
        {
            pkt.pts =  av_rescale_q(c->coded_frame->pts, c->time_base, st->time_base);

        }
        if (pkt.dts != AV_NOPTS_VALUE)

        {
            pkt.dts = av_rescale_q(c->coded_frame->pts, c->time_base, st->time_base);
        }

.....
} 
```

# excel - 使用 vba 更改 odbc 连接的 commandText 时遇到问题

> ID：15693461
> 
> 赞同：4
> 
> 时间：2013-03-28T22:44:30.460
> 
> 标签：excel, odbc, excel-2010, vba

我花了两天时间寻找解决方案，这让我发疯...

首先让我解释一下我在做什么。我们引入了 50 万条记录，这些记录驱动了十几个数据透视表。为了保持工作簿可管理的文件大小，我直接从外部数据连接构建了数据透视表。这是我手动配置的 odbc 连接。

一切正常，我可以在工作簿中点击“全部刷新”，所有数据透视表都会自动更新，太棒了。

但是现在我需要能够通过手动开始和结束日期来限制整个记录集......更改数据透视表上的日期过滤器并不理想，因为它不仅仅是受结束日期影响的单个字段，还有字段需要在透视之前计算，其值取决于涉及结束日期的公式。

经过一整个下午反复崩溃 Excel 后，我发现了如果您的连接直接连接到数据透视表，则不能使用的限制？和指向单元格引用的参数对话框，一旦你关闭这本书，单元格引用就会丢失。

所以我的下一个方法是这样做：

```
Dim ReportStartDate, ReportEndDate

' Get parameters from Intro sheet
ReportStartDate = "'" & ActiveWorkbook.Worksheets("Intro").Range("$B$1").Value & "'"
ReportEndDate = "'" & ActiveWorkbook.Worksheets("Intro").Range("$B$2").Value & "'"

' There are 3 directpivot odbc connections/caches that need to be modified.
' In each query, the default report-end-date is specified by CURDATE().
' The default report-start-date is specified as '2010-01-01'
' Replace these defaults with the values retrieved above.

Dim cn As WorkbookConnection
Dim odbcCn As ODBCConnection
Dim originalsqltext, newsqltext

For Each cn In ThisWorkbook.Connections     ' loop through the connections
    If cn.Type = xlConnectionTypeODBC Then
        Set odbcCn = cn.ODBCConnection
        originalsqltext = odbcCn.CommandText
        If odbcCn.Parent = "Calls" Then
            newsqltext = Replace(originalsqltext, "CURDATE()", ReportEndDate)
            newsqltext = Replace(newsqltext, "'2010-01-01'", ReportStartDate)
        ElseIf odbcCn.Parent = "Suboutcomes" Then
            newsqltext = Replace(originalsqltext, "CURDATE()", ReportEndDate)
            newsqltext = Replace(newsqltext, "'2010-01-01'", ReportStartDate)
        ElseIf odbcCn.Parent = "QtyCallsPerDay1" Then
            newsqltext = Replace(originalsqltext, "CURDATE()", ReportEndDate)
        Else
            newsqltext = originalsqltext
        End If
        odbcCn.CommandText = newsqltext
        odbcCn.Refresh
        odbcCn.CommandText = originalsqltext
    End If
    cn.Refresh ' refresh the other connection without modification
Next
Set cn = Nothing
Set odbcCn = Nothing 
```

但是当它到达 odbcCn.CommandText = newsqltext 运行时错误'1004：应用程序定义或对象定义错误时，它给我一个错误。这太没有帮助了......

我验证了 newsqltext 包含我想要的内容，它只是不会分配回 CommandText。

经过一天的谷歌搜索和一些简单的宏录制实验，看起来改变 CommandText 需要像这样的语法

```
.CommandText = Array( _
"SELECT C1.CALLID, C1.TAKENON, C1A.TAKENAT, CAST(CONCAT(DATE_FORMAT(TAKENON,'%c/%e/%y'),' ',TIME_FORMAT(TAKENAT,'%H:" _
    , _
    "%i:%s')) AS CHAR) AS CallDateTime, YEAR(C1.TAKENON) AS Year, CEILING(MONTH(C1.TAKENON)/3) AS Quarter, MONTH(C1.TAKE" _
    , _ 
```

（因为它很大，所以我放弃了其余部分）......起初我认为这是我的问题，因为当我最初尝试录制宏时，我收到“太多行延续”错误，所以我缩短了查询尽可能在替换之前将其减少到 1428 个字符。替换后，它以 1448 个字符结束......但是我如何将它解析为代码想要的数组格式？还是有更好的方法来做到这一点？

我真的不想像这样破坏我的查询，只是为了能够用vba编辑它们，我觉得我只是错过了如何改变CommandText的东西......

我的搜索出现了一些令人不安的事情，例如无法更改 odbc 连接上的 CommandText 的问题，除非您先将其更改为 oledb，然后您可以更改 CommandText，然后将连接更改回odbc ...但那是在 Excel 2010 之前，不再使用这些... [http://p2p.wrox.com/excel-vba/29037-cant-set-commandtext-property-if-cache-has- 1-rpt.html](http://p2p.wrox.com/excel-vba/29037-cant-set-commandtext-property-if-cache-has-1-rpt.html)

链接到那里的知识库文章[http://support.microsoft.com/kb/816562](http://support.microsoft.com/kb/816562)更加令人震惊......当我看到 StringToArray 函数时，我以为我找到了解决方案，但后来我进一步阅读并看到

> 注意如果您使用共享数据透视表、基于 OLAP 的数据透视表或基于多个合并范围的数据透视表连接到数据库，则前面的代码可能无法按预期工作。

接着

> 如果工作表上的多个数据透视表派生自同一个数据透视表，则子例程在处理第一个数据透视表后将不起作用。截至 2003 年 3 月，没有针对此问题的已知解决方法。

尽管它指出该文章仅适用于 Excel 2000 到 2003。

我尝试过的另一件事，我想也许我可以使用？参数，只需使用 vba 设置它们...但是当我使用参数创建一个简单的查询，然后在将参数指向新的单元格引用时录制了一个宏，该宏仅包含以下内容： Sub PARAMEDIT5() ' ' PARAMEDIT5 Macro '

```
'
    With ActiveWorkbook.Connections("PARAMEDIT").ODBCConnection
        .BackgroundQuery = False
        .CommandText = Array("SELECT * FROM Calls1 where TAKENON > ?" _
        )
        .CommandType = xlCmdSql
        .Connection = _
        "ODBC;DRIVER={MySQL ODBC 5.1 Driver};UID=xxxxxxx;PWD=xxxxxxxx;SERVER=xxxxxx;PORT=3306;BIG_PACKETS=1;"
        .RefreshOnFileOpen = False
        .SavePassword = True
        .SourceConnectionFile = ""
        .SourceDataFile = ""
        .ServerCredentialsMethod = xlCredentialsMethodIntegrated
        .AlwaysUseConnectionFile = False
    End With
    With ActiveWorkbook.Connections("PARAMEDIT")
        .Name = "PARAMEDIT"
        .Description = ""
    End With
    ActiveWorkbook.Connections("PARAMEDIT").Refresh
End Sub 
```

我尝试使用直接进入枢轴类型的连接以及连接到外部数据源的常规表，我知道它支持参数。

那么......有谁知道参数化共享数据透视缓存 odbc 连接的查询的正确方法是什么？

更新：我试过这个：

```
Dim cn, originalCn, newCn As WorkbookConnection
Dim odbcCn As ODBCConnection
Dim originalsqltext, newsqltext
Dim connStr As String

For Each cn In ThisWorkbook.Connections     ' loop through the connections
    If cn.Type = xlConnectionTypeODBC Then
        Set odbcCn = cn.ODBCConnection
        originalsqltext = odbcCn.CommandText
        Set originalCn = cn
        connStr = odbcCn.Connection
        Select Case odbcCn.Parent
            Case "Calls", "Suboutcomes"
                newsqltext = Replace(originalsqltext, "CURDATE()", ReportEndDate)
                newsqltext = Replace(newsqltext, "'2010-01-01'", ReportStartDate)
            Case "QtyCallsPerDay1"
                newsqltext = Replace(originalsqltext, "CURDATE()", ReportEndDate)
            Case Else
                newsqltext = originalsqltext
        End Select
        Set newCn = ActiveWorkbook.Connections.Add(odbcCn.Parent & "New", "WhoCares", connStr, newsqltext)
        Set cn = newCn
        cn.Refresh
        Set cn = originalCn
        newCn.Delete
    Else
        cn.Refresh ' refresh any other connections without modification
    End If
Next

Set cn = Nothing
Set odbcCn = Nothing
Set newCn = Nothing
Set originalCn = Nothing 
```

虽然它似乎在让命令文本达到我想要的效果方面做了我想做的事，但当我逐步完成时，cn.Refresh 什么也没做。如果它正在刷新，但我的枢轴没有更新，我可以看到他们在哪里寻找 Calls1，并且在刷新发生的那一刻，它被命名为 Calls1New，但连接没有做任何事情（查询通常需要几分钟即可完成）。或者也许我不能将它分配给具有相同名称的现有连接？在我设置 cn = newCn 之后，它们看起来完全一样，具有相同的名称。

我会再四处寻找，但如果其他人做过类似的事情，我会很感激更多的帮助。非常感谢您到目前为止所提供的！

**编辑**：所以我回到原来的

```
odbcCn.CommandText = newsqltext
cn.Refresh
odbcCn.CommandText = originalsqltext 
```

我还尝试了在[http://support.microsoft.com/kb/816562](http://support.microsoft.com/kb/816562)找到的 odbcCn.CommandText = StringToArray(newsqltext) cn.Refresh odbcCn.CommandText = StringToArray(originalsqltext) 。没有一个工作。

我将发布 originalsqltext 和 newsql 文本，因为它们就在错误之前。请注意，如果我手动将原始sqltext 粘贴到查询对话框中，**则原始sqltext 工作正常，newsqltext 也是如此**

**由于新信息，删除了之前的编辑**

注意 - 我发现一个线程[Excel VBA: Update Pivot Sourcedata](https://stackoverflow.com/questions/1867459/excel-vba-update-pivot-sourcedata)似乎是一个类似的问题 - 因为我已经测试过尝试分配 odbcCn.CommandText = originalsqltext （它没有以任何方式改变）并且它也失败了。但是，这个线程是从2009年开始的，所以很可能没有使用excel 2010，因为我试图写

```
For Each pvtC In ThisWorkbook.PivotCaches
    name = pvtC.WorkbookConnection.name
    originalsqltext = pvtC.CommandText
    pvtC.CommandText = originalsqltext
Next 
```

它也在 pvtC.CommandText = originalsqltext 失败了

**更新：** 我现在确定这与查询本身无关，而是让多个数据透视表指向同一个数据透视缓存的条件。我用简单的查询创建了一个新的外部数据源

```
SELECT * FROM clientdashboard1.Calls1 WHERE TAKENON BETWEEN '2010-01-01' AND CURDATE() 
```

作为它的查询。我将连接命名为 AlphaTest，并从中创建了一个数据透视表，然后将该数据透视表复制到另一个工作表并使用不同的字段。我修改了我的代码以首先运行：

```
For Each pvtC In ThisWorkbook.PivotCaches
    name = pvtC.WorkbookConnection.name
    If name = "AlphaTest" Then
        originalsqltext = pvtC.CommandText
        pvtC.CommandText = originalsqltext
    End If
Next 
```

它在完全相同的时间点失败，pvtC.CommandText = originalsqltext

然后我删除了第二个数据透视表，然后再次通过，它工作了。

然后只是为了好玩，我把我原来的巨大查询放进去，然后又走了过去。有效。但是，它发现了另一个问题……通过代码更改 CommandText 会导致它刷新。所以我最初的计划，进行替换，进行刷新，然后设置回原来的，是行不通的，因为表格将在第二次分配时再次刷新（如果它有效，那就是）。

**更新**这只会越来越好。我想制作我的数据透视缓存的虚拟副本，也许只有 1 条记录，将每个数据透视表指向它自己的缓存，然后让 vba 更改“真实”缓存的查询，然后循环遍历并将每个数据透视表指向那个一。执行报告任务（复制工作表、断开链接、另存为、关闭是我们通常的做法）。然后回到原来的书中，将所有数据透视表指向它们各自的虚拟缓存。好吧，你知道我拥有的 AlphaTest 数据源吗？我以为 pvtC.CommandText = originalsqltext 实际上改变了查询并导致 AlphaTest 刷新......哦不，我的朋友。它创建了一个名为 Connection 的新连接，它是 AlphaTest 的副本。好的。我该如何使用它？.....我有一些想法要尝试，但如果其他人已经处理过这个问题，请，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-24T16:33:19.637

在网上做了很多研究之后......我发现这是更新`CommandText`ODBC 连接属性时的错误。如果您暂时切换到 OLEDB 连接，请更新您的`CommandText`属性，然后切换回 ODBC，它不会创建新连接。不要问我为什么……这对我有用。

创建一个新模块并插入以下代码：

```
Option Explicit

Sub UpdateWorkbookConnection(WorkbookConnectionObject As WorkbookConnection, Optional ByVal CommandText As String = "", Optional ByVal ConnectionString As String = "")

With WorkbookConnectionObject
    If .Type = xlConnectionTypeODBC Then
        If CommandText = "" Then CommandText = .ODBCConnection.CommandText
        If ConnectionString = "" Then ConnectionString = .ODBCConnection.Connection
        .ODBCConnection.Connection = Replace(.ODBCConnection.Connection, "ODBC;", "OLEDB;", 1, 1, vbTextCompare)
    ElseIf .Type = xlConnectionTypeOLEDB Then
        If CommandText = "" Then CommandText = .OLEDBConnection.CommandText
        If ConnectionString = "" Then ConnectionString = .OLEDBConnection.Connection
    Else
        MsgBox "Invalid connection object sent to UpdateWorkbookConnection function!", vbCritical, "Update Error"
        Exit Sub
    End If
    If StrComp(.OLEDBConnection.CommandText, CommandText, vbTextCompare) <> 0 Then
        .OLEDBConnection.CommandText = CommandText
    End If
    If StrComp(.OLEDBConnection.Connection, ConnectionString, vbTextCompare) <> 0 Then
        .OLEDBConnection.Connection = ConnectionString
    End If
    .Refresh
End With

End Sub 
```

此`UpdateWorkbookConnection`子例程仅适用于更新 OLEDB 或 ODBC 连接。连接不一定必须链接到数据透视表。它还解决了另一个问题，并允许您更新连接，即使有多个基于同一连接的数据透视表。

要启动更新，只需使用连接对象和命令文本参数调用函数，如下所示：

```
UpdateWorkbookConnection ActiveWorkbook.Connections("Connection"), "exec sp_MyAwesomeProcedure" 
```

您也可以选择更新连接字符串。

我从不使用`?`参数，所以我无法确定这是否会解决您的问题，但我怀疑它会。我总是只使用字符串连接将参数直接插入到 CommandText 字符串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T13:24:11.123

我一直使用 ODBC 连接。我首先在工作表上手动建立连接。我确保“启用后台刷新”已关闭。我整天都在做这些事情。这是一些刷新连接的简单代码（根据需要调暗变量）：

```
ActiveWorkbook.Connections("ExampleConnection").Refresh 
```

要更改命令文本：

```
ActiveWorkbook.Connections("ExampleConnection").ODBCConnection.CommandText = _
"SELECT FILE1.FIELD1 AS ""Name1"", FILE1.FIELD2 as ""Name2""" & chr(13) & "" & chr(10) & chr(13) & "" & chr(10) & _
"FROM SERVER.LIBRARY.FILE1 FILE1" & chr(13) & "" & chr(10) & chr(13) & "" & chr(10) & _
"WHERE FILE1.FIELD1 = 'FILTER'"
ActiveWorkbook.Connections("ExampleConnection").Refresh 
```

要使用运行时变量更改命令文本：

```
DIM str AS STRING

str = "VARIABLE"

ActiveWorkbook.Connections("ExampleConnection").ODBCConnection.CommandText = _
"SELECT FILE1.FIELD1 AS ""Name1"", FILE1.FIELD2 as ""Name2""" & chr(13) & "" & chr(10) & chr(13) & "" & chr(10) & _
"FROM SERVER.LIBRARY.FILE1 FILE1" & chr(13) & "" & chr(10) & chr(13) & "" & chr(10) & _
"WHERE FILE1.FIELD1 = '" & str & "'"
ActiveWorkbook.Connections("ExampleConnection").Refresh 
```

并且要刷新多个枢轴，如上所述，请确保您的 ODBC 连接“启用后台刷新”复选框未选中，并且您可以全天刷新枢轴：

```
ActiveWorkbook.Connections("ExampleConnection").Refresh
Sheet1.PivotTables("PivotTable1").PivotCache.Refresh
Sheet1.PivotTables("PivotTable2").PivotCache.Refresh
Sheet2.PivotTables("PivotTable1").PivotCache.Refresh
Sheet2.PivotTables("PivotTable2").PivotCache.Refresh 
```

一个选项，用于动态 WHERE 子句或绕过“太多行”错误：

```
DIM s AS STRING
DIM f AS STRING
DIM w AS STRING
DIM r AS RANGE
Dim str AS STRING

set r = Sheet1.Range("A1")
str = r.Value
s = "SELECT FILE1.FIELD1 as ""Name1"", FILE1.FIELD2 as ""Name2"""
f = "FROM SERVER.LIBRARY.FILE1 FILE1"

If r.Value = "" Then
   w = ""
Else
   w = "WHERE FILE1.FIELD1 = '" & str & "'"
End If

ActiveWorkbook.Connections("ExampleConnection").ODBCConnection.CommandText = _
s & chr(13) & "" & chr(10) & chr(13) & "" & chr(10) & _
f & chr(13) & "" & chr(10) & chr(13) & "" & chr(10) & _
w
ActiveWorkbook.Connections("ExampleConnection").Refresh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:56:06.870

这不是您问题的真正答案，但无论如何我想提出这些建议。

```
For Each cn In ThisWorkbook.Connections     ' loop through the connections
    If cn.Type = xlConnectionTypeODBC Then
        Set odbcCn = cn.ODBCConnection
        originalsqltext = odbcCn.CommandText
        Select Case odbcCn.Parent
            Case "Calls", "Suboutcomes"
                newsqltext = Replace(originalsqltext, "CURDATE()", ReportEndDate)
                newsqltext = Replace(newsqltext, "'2010-01-01'", ReportStartDate)
            Case "QtyCallsPerDay1"
                newsqltext = Replace(originalsqltext, "CURDATE()", ReportEndDate)
            Case Else
                newsqltext = originalsqltext
        End Select
        odbcCn.CommandText = newsqltext
        odbcCn.Refresh
        odbcCn.CommandText = originalsqltext
    Else ''' this used to be End If
        cn.Refresh ' refresh the other connection without modification
    End If
Next 
```

注意两件事：我使用了 Select Case（但我认为这只是为了更好的代码，它不会改变任何功能）。第二，你确定 cn.Refresh 不应该在 Else 块中吗？也许我误解了代码，但看起来连接会在您重新分配原始 SQL 后刷新。

至于`too many line continuations`，您可以像这样欺骗 VBA：

```
somevar = "line 1" & _
          "line 2" & _
          .....
          "line 55"
somevar = somevar & _
          "line 56" & _
          "line 57" 
```

这样，您在技术上就不会局限于固定数量的`& _`.

现在，对于你真正的问题：`1004: Application-defined or object-defined error`意味着 SQL 字符串中有一些东西不能被提供者正确解释。你说它看起来很好 - 可以发布内容`newsqltext`吗？因为确实，看起来您并没有出现编码错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T11:18:30.063

100% 有效

```
WorkbookConnection wc = book.Connections.Add("SQL-STRING", "", response.ConnectionString, response.SqlString, XlCmdType.xlCmdSql);
pivot = worksheet.PivotTables(1);
pivot.ChangeConnection(wc); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-23T10:49:19.493

再会，

当多个数据透视表访问连接时，显然会出现问题。

以下解决方法可以解决问题：

手动（只需一次）

1.) 手动将合适的 ODBC 连接作为文件导出到任何位置。（双击连接并在“定义”处找到底部的按钮）

在 VBA 中：

2.) 将连接添加到您在步骤 1 中导出的工作簿：

myWorkbook.Connections.AddFromFile "\myPath\myODBCConnection.odc"

3.) 编辑添加连接的命令文本

myWorkbook.Connections("nameOfAddedConnectionName").ODBCConnection.CommandText = "SELECT * FROM 不管什么"

4.) 删除数据透视表访问的连接。

myWorkbook.Connections("oldPivotConnectionName").Delete

5.) 将添加的连接重命名为旧连接的名称

myWorkbook.Connections("nameOfAddedConnectionName").Name = "oldPivotConnectionName"

6.) 刷新连接

myWorkbook.Connections("oldPivotConnectionName").Refresh

而已！:-)

# java - 手动添加注释？

> ID：15693463
> 
> 赞同：1
> 
> 时间：2013-03-28T22:44:37.927
> 
> 标签：java, android, junit, annotations, junit4

不要问为什么（我保证我需要这样做），我需要创建一个注释，它只是将 @Test 注释应用于方法的传递。例如：

```
@MyTestAnnotation
public void testMyStuff() {
    ....
} 
```

然后我只需要编写一个 MyTestAnnotation 类来将 @Test 应用于该方法。我觉得有一种方法可以做到这一点，但我对 Java 注释如何编写这段代码知之甚少。例如，在 Python 中有很简单的方法可以做这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:46:49.733

> 不要问为什么（我保证我需要这样做）

[对于您的实际问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)，很有可能有更好的解决方案。例如，如果您试图让 JUnit 运行一组未注释的方法，那么您可以创建一个子类并使用[自定义 runner](http://junit.sourceforge.net/javadoc/org/junit/runner/RunWith.html)，或者[在运行时](https://stackoverflow.com/a/11932146/733345)[生成一个`TestSuite`](https://stackoverflow.com/a/11932146/733345)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:48:19.707

与此相关：

[在运行时添加 Java 注释](https://stackoverflow.com/questions/1635108/adding-java-annotations-at-runtime)

正如他们所说，不可能直截了当。

# iphone - UIActionSheet 出现两次

> ID：15693466
> 
> 赞同：1
> 
> 时间：2013-03-28T22:44:45.197
> 
> 标签：iphone, ios, uiactionsheet, ipad

我正在函数 quizEnded 中创建 UIActionSheet。其中一个按钮将用户发送到 Game Center。当他们从游戏中心返回时，在 viewdidappear 中再次调用 quizended。这是在旧的操作表之上创建第二个操作表。

[https://www.youtube.com/watch?v=QrY1Awt3RX0](https://www.youtube.com/watch?v=QrY1Awt3RX0)

我不认为再次调用 quizEnded 会导致问题，而是我没有正确关闭第一个 UIActionSheet。

```
-(void)viewDidAppear {
// some code ...
if(self.quizDidEnd > 0){
        [BT_debugger showIt:self theMessage:@"@@@Calling quiz ended###"];

        [self quizEnded];
    }
}// end viewDidAppear 
```

* * *

```
// initialize button array
-(void)quizEnded {
// some code ...
    _finishedButtons =  [[NSMutableArray alloc] init];

     // show either the reward screen or the finished screen or quit to menu

    if(earnedReward == TRUE && haveRewardScreen==TRUE) {
         [_finishedButtons addObject:NSLocalizedString(@"quizShowReward", @"Show Reward")];
        //[self showQuizRewardScreen];

    }else {
        if(haveFinishScreen==TRUE){

            [_finishedButtons addObject:NSLocalizedString(@"continue", @"Continue")];
            //[self showFinishScreen];

        }else {
            // if no finish screen then send back to rootviewcontroller
            [_finishedButtons addObject:NSLocalizedString(@"quit", @"Quit")];             }
    }

    if(_enableGameCenter) {
        [_finishedButtons addObject:NSLocalizedString(@"Game Center", @"Game Center")];
    }

    // initialize UIAction sheet
    UIActionSheet *actionSheet = [[UIActionSheet alloc]
                                  initWithTitle:quizResultMessage
                                  delegate:self
                                  cancelButtonTitle:nil
                                  destructiveButtonTitle:nil
                                  otherButtonTitles: nil];

    //add the buttons to the action sheet
    for (int i = 0; i < [_finishedButtons count]; i++) {
        [actionSheet addButtonWithTitle:[_finishedButtons objectAtIndex:i]];
    }

    actionSheet.destructiveButtonIndex = [_finishedButtons count];

    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackOpaque];

    //is this a tabbed app?
    if([appDelegate.rootApp.tabs count] > 0){
        [actionSheet showFromTabBar:[appDelegate.rootApp.rootTabBarController tabBar]];
    }else{
        [actionSheet showInView:self.view];
    }

    [actionSheet release];

}//self.quizDidEnd == 0

}// end quizEnded 
```

* * *

```
-(void)actionSheet:(UIActionSheet *)actionSheet  clickedButtonAtIndex:(NSInteger)buttonIndex {

[BT_debugger showIt:self theMessage:@"!!!action sheet called!!!"];

NSString *buttonTitle = [actionSheet buttonTitleAtIndex:buttonIndex];

//quit only used if no finished or reward screen present
if([buttonTitle isEqual:NSLocalizedString(@"quit", @"Quit")]){

    // if no finish screen then send back to rootviewcontroller
    [self.navigationController popToRootViewControllerAnimated:YES];
    [BT_debugger showIt:self theMessage:@"Quit tapped"];
}

//show reward
if([buttonTitle isEqual:NSLocalizedString(@"quizShowReward", @"Show Reward")]){
    [self showQuizRewardScreen];
    [BT_debugger showIt:self theMessage:@"Show Reward Tapped"];
}

//show continue
if([buttonTitle isEqual:NSLocalizedString(@"continue", @"Continue")]){
    [self showFinishScreen];
    [BT_debugger showIt:self theMessage:@"Continue Tapped"];
}

//show game center
if([buttonTitle isEqual:NSLocalizedString(@"Game Center", @"Game Center")]){  
    [BT_debugger showIt:self theMessage:@"game center tapped"];
    [self showGameCenter];
    _altend = 0;

}

}// end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-19T08:10:46.550

如果是打开菜单的手势，请确保将所有代码放入其中：

```
 if(gestureRecognizer.state == UIGestureRecognizerStateBegan) { } 
```

否则，可能会有手势发生变化的第二部分 (UIGestureRecognizerStateChanged) 导致操作表双发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T00:05:45.883

您并没有从我所看到的内容中解散操作表...您必须调用`- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated`您的操作表以将其解散。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-19T03:01:17.827

添加这个：

```
if(recognizer.state == UIGestureRecognizerStateBegan){
        UIActionSheet *as = [[UIActionSheet alloc] initWithTitle:@""
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T08:20:33.450

```
if(gesture.state == UIGestureRecognizerStateBegan){
    UIActionSheet *sheet;

    sheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"" destructiveButtonTitle:nil otherButtonTitles:@"", nil];
    [sheet showInView:self.view];
} 
```

# javascript - buster.js / sinon 有类似 `jasmine.any()` 的东西吗？

> ID：15693467
> 
> 赞同：4
> 
> 时间：2013-03-28T22:44:59.040
> 
> 标签：javascript, sinon, buster.js

开发一个回调驱动的 API，我想用一组特定的参数和“任何”函数（回调）来表达某个函数。

Jasmine 可以执行以下操作：

```
var serviceFunction = jasmine.createSpy();
var functionUnderTest = create(serviceFunction);
var thing = 'arbitrary/thing'

functionUnderTest(thing);
expect(serviceFunction).toHaveBeenCalledWith(thing, jasmine.any(Function)); 
```

有 sinon/buster.js 类似的能力吗？到目前为止，我只测试了第一个参数，但我真的很想表达在测试中需要回调。

这是我到目前为止所拥有的：

```
var serviceFunction = this.spy(); // or `sinon.spy()`
var functionUnderTest = create(serviceFunction);
var thing = 'arbitrary/thing'

functionUnderTest(thing);
assert.calledWith(serviceFunction, thing); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-23T19:34:44.283

您应该查看 sinon.match api ( [http://sinonjs.org/docs/#sinon-match-api](http://sinonjs.org/docs/#sinon-match-api) )

使用 sinon.match.func 您上面的示例将变为：

```
var serviceFunction = this.spy(); // or `sinon.spy()`
var functionUnderTest = create(serviceFunction);
var thing = 'arbitrary/thing'

functionUnderTest(thing);
assert.calledWith(thing, sinon.match.func); 
```

# gwt - GWT SimplePager 中基于百分比的快进按钮

> ID：15693472
> 
> 赞同：0
> 
> 时间：2013-03-28T22:45:23.090
> 
> 标签：gwt, simplepager

我有一个附加了 SimplePager 的工作 CellTable，并且由于行数过多而启用了快进按钮。

行数可能会有很大差异，并且与总表大小成比例地向前推进更有意义 - 例如，每次点击 10% 而不是 100 条记录。

*   有没有办法直接设置基于 %age 的快进按钮？
*   我们可以在寻呼机初始化后随时设置快进增量吗？以便它可以根据记录数而变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T04:39:29.010

您必须手动完成。如果您一次获取所有数据，您将知道记录的总数。如果您不进行查询以获取记录总数。`Override`单击快进按钮的方法。根据记录总数和要跳过的给定百分比，计算要获取的记录数并进行查询或在已有数据时显示。

**编辑：**快进按钮是一个私人成员，没有getter和setter。有 2 个选项。创建您自己的寻呼机类或复制寻呼机类并将其放在项目中的 pacakage“com.google.gwt.user.cellview.client”中。并使快进按钮受保护或公开。这将覆盖默认类。

# android - 如何使用 Smartgit 查看/区分 android 源代码

> ID：15693473
> 
> 赞同：0
> 
> 时间：2013-03-28T22:45:23.927
> 
> 标签：android, git, android-source, smartgit

我在 UBUntu 盒子上有 android 源代码仓库。我想知道使用 SmartGIT（一个 GUI git 客户端）在 android 源代码树下打开各种 git 存储库的最简单方法是什么。

一种选择是从 smartgit File->Open repo 菜单选项手动打开每个具有 .git 的文件夹。

难道没有更好的方法来一次性打开所有的回购吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:22:15.737

从 SmartGit/Hg 版本 4 开始，除了使用 Project|Open Repository 之外别无他法。

# javascript - 如何在不添加浏览器的情况下打印 html

> ID：15693477
> 
> 赞同：1
> 
> 时间：2013-03-28T22:45:30.990
> 
> 标签：javascript, html, css

当我想打印一个 html 页面时，每个浏览器都会在页面的最顶部或最底部添加网站的 url 和标题。我怎样才能只打印我看到的html页面。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:49:37.703

例如，在 Firefox 中，当您尝试预览它时，您可以单击“页面设置”-> 第二个选项卡是页眉/页脚，您可以在此处选择要在打印页面的最顶部或最底部显示的内容，如果您在所有字段中选择空白页脚和页眉将清除所有数据，您只能打印您看到的内容:)

您还可以尝试以下主题中的建议解决方案：

[打印 HTML 时删除默认浏览器页眉和页脚](https://stackoverflow.com/questions/255534/remove-the-default-browser-header-and-footer-when-printing-html)

[我可以从我的打印 css 中删除 URL，以便不打印网址吗？](https://stackoverflow.com/questions/2192806/can-i-remove-the-url-from-my-print-css-so-the-web-address-doesnt-print)

[打印 HTML 时删除默认浏览器页眉和页脚](https://stackoverflow.com/questions/255534/remove-the-default-browser-header-and-footer-when-printing-html)

[从页面禁用浏览器打印选项（页眉、页脚、边距）？](https://stackoverflow.com/questions/1960939/disabling-browser-print-options-headers-footers-margins-from-page)

[删除html中的页眉和页脚以打印页面](https://stackoverflow.com/questions/2849926/remove-header-and-footer-in-html-to-print-page)

我希望它们有用:)

# ruby-on-rails - 找不到 id= 的用户 (ActiveRecord::RecordNotFound)

> ID：15693479
> 
> 赞同：3
> 
> 时间：2013-03-28T22:45:45.553
> 
> 标签：ruby-on-rails

使用我的 Rails 应用程序，我可以成功创建一个对象（称为工作；将它们视为博客文章）作为 current_user。用户 has_many 工作。我可以通过使用我的 postgresql 浏览器检查数据库来验证对象是否已成功创建。该表还包含创建工作的正确 user_id，因此我知道我的 create 函数在我的控制器中工作。

但是，问题是当我尝试查看作品时，我收到以下错误：

WorksController#show 中的 ActiveRecord::RecordNotFound

找不到 id=23 的用户

app/controllers/works_controller.rb:43:in `show'

奇怪的是，我仍然可以查看我几周前创作的作品。该错误仅出现在我最近创作的作品中。

这是 Works 控制器：

```
class WorksController < ApplicationController
   #before_filter :current_user,   only: [:edit, :update]

  def index
    @works = Work.all

respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @works }
end
end
def create
    @work = current_user.works.create(params[:work])
    redirect_to current_user
  end

def edit
    @work = current_user.works.find(params[:id])
end

def new
  @work = current_user.works.new
end

def destroy
  @work = current_user.works.find(params[:id]).destroy
  flash[:success] = "Work deleted"
  redirect_to current_user
end

 def update
    @work = current_user.works.find(params[:id])
    if @work.update_attributes(params[:work])
      flash[:success] = "updated"
      redirect_to @work
    else
      render 'edit'
    end
  end

  def show
    @user = User.find(params[:id])
    @work = @user.works.find(params[:id])
    @activities = PublicActivity::Activity.order("created_at DESC").where(trackable_type: "Work", trackable_id: @work).all

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @work }
    end
  end
end 
```

我假设错误在 Works 控制器中。为了修复“显示”错误，我需要在控制器中编辑什么？

编辑：如果我使用上面的当前代码，我只能查看其他人的作品（查看我自己的会引发错误）。但是，如果我将 current_user 添加到查询中（例如 @works= current_user.works），我就只能看到我自己的作品。查看其他人的作品会引发错误。我该如何解决这个问题，以便我可以查看自己的作品和他人创作的作品？

编辑2：

@work = Work.find(params[:id]) 如果我从控制器中删除 @user 并且作品 show.html 视图文件中的“@user”引用有效。但是，我需要控制器中的“@user”引用，因为我想显示创建作品的用户的名称。我该怎么做呢？

编辑 3：

**固定的！再次感谢所有贡献答案的人！这是我为修复它所做的：**

1.  我从控制器中删除了@user 引用（“显示”操作）。正如 Fred 在下面提到的，不需要 @user 引用并且需要将其删除，因为我使用 :id 两次来引用两个单独的对象。

2.  将“@work”变量编辑为`@work = Work.find(params[:id])`. 这将根据 id 查找正确的工作项，无论是哪个用户创建的。

3.  当我需要在工作页面上显示用户数据时，只需`<%= @work.user.name %>`在 show.html.erb 视图页面上使用即可。不需要“@user = User.find(params[:id])”，因为我已经使用“belongs_to :user”在工作模型上定义了外键关系。

再次感谢所有的帮助！-j

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:51:28.840

在你的表演动作中，一起摆脱 @user 并使用：

```
@work = Work.find(params[:id]) 
```

这将允许任何人查看任何作品。

您的其他操作也是如此。通过说：

```
@work = current_user.works.find(params[:id]) 
```

您正在所有 current_user 的作品中搜索与`id == params[:id]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:59:27.183

我怀疑您在查找用户时使用的是`work_id`而不是，因此它有时可以工作，但 ID 错误。`user_id`

您在工作控制器中。params[:id] 是工作。

所以这：

```
@user = User.find(params[:id])
@work = @user.works.find(params[:id]) 
```

应该是这样的：

```
@user = User.find(current_user)
@work = @user.works.find(params[:id]) 
```

如果您只想使用所有作品

```
@works = Work.all 
```

因为您可以使用与 te id 相同的 params[:id] 来查找用户和工作。如果他们是同一个ID，那只是巧合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-05T21:25:49.313

我发现使用 current_user.works.find_by(id: params[:id]) 可以在找不到任何东西时返回 nil 。

我认为这会更好一些，因为您现在可以在查找中使用 current_user 会更安全一些，因为您不必依赖视图来显示它不应该显示的数据，因为它永远不会得到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T22:53:48.050

看起来您正在删除一个用户，并留下悬空引用`works`

通过查询作品

`@work = @user.works.find(params[:id])`

您正在寻找属于@user 的所有@user 作品（冗余）

如果您改为使用`@work = @user.works`那些悬空的作品，则不会触及参考，因为 @user.works 将返回一个空响应。

不过，这确实不是最好的解决方案，您需要在删除用户时更好地处理依赖关系的破坏。

编辑：对不起，我在应该使用@user 的地方使用了 current_user，上面的评论有同样的错误。

# css - 使用 box-sizing:border-box 计算百分比填充的奇怪行为；

> ID：15693480
> 
> 赞同：1
> 
> 时间：2013-03-28T22:45:49.740
> 
> 标签：css, padding, border-box

使用小提琴设置测试用例：http: [//jsfiddle.net/5M7X7/2/](http://jsfiddle.net/5M7X7/2/)

`border-box`我有一个可以调整一些布局的宠物项目。我看到分层块元素的奇怪（但跨浏览器一致）行为。

根据示例，有 3 个 div：第一个具有固定的高度和宽度，其子级具有 100% 的高度和宽度，加上两侧的 % 填充，其子级具有 100% 的高度和宽度。

使用宽度计算垂直填充。这是故意的怪癖`border-box`吗？是否有使用 css 的布局技巧使其行为“如我所料”，使用高度来计算垂直填充？

我不需要 JS 解决方法，也不需要其他方法来调整我最小的盒子的大小。我对这个特殊的布局怪癖感兴趣，它为什么会发生，以及是否有一种纯粹、简单的 css 方式让它“表现”。

**编辑** 显然，填充百分比计算为宽度的百分比，无论您使用哪种框大小。作为一名前端开发人员，多年来我从未遇到过这种情况。如果有人知道一个好的解决方法，我会全神贯注。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:16:47.323

[这实际上是 CSS 规范的一部分](http://www.w3.org/TR/CSS2/box.html#padding-properties)，因此这种行为是正确的，应该与您的期望一致。

如果您想解释*为什么*，他们实际上并没有提供，但推测这是因为父身高取决于子身高，而子身高会受到百分比填充的影响。

编辑：稍微扩展一下，宽度计算*不*依赖于孩子的盒子模型；如果两者都没有指定，孩子的宽度可以超出父母的宽度。

```
span, div {
    display: inline-block;
    border: 1px solid black;
}
span span {
    padding: 50%;
}
<span><span>foon</span></span>
<div><div>foon</div></div> 
```

[http://jsfiddle.net/XHDEL/](http://jsfiddle.net/XHDEL/)

# angularjs - 将 socket.io 集成到 angular-seed web-server.js

> ID：15693482
> 
> 赞同：1
> 
> 时间：2013-03-28T22:45:54.600
> 
> 标签：angularjs, socket.io

我下载了 Angular 项目[angular-seed](https://github.com/angular/angular-seed)，并使用他们提供的节点 web-server.js 文件来运行我的代码。

我已经构建了足够多的功能，因此切换到另一个项目并重新执行已经在 web-server.js 中管理的 URL 处理将是非常重要的。

我想将 socket.io 添加到我的堆栈中。但是，socket.io（默认情况下）添加到客户端堆栈的方式如下所示：

```
<script src="/socket.io/socket.io.js"></script> 
```

由于 web-server.js URL 重写，这不起作用。我该怎么办？

我已经安装了 node.js、npm 和 socket.io

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:45:54.600

客户端代码上的 socket.io.js 由节点动态提供（它不是资源）。但是，这个网络服务器会重写 url，所以你不能正常使用它：

```
<script src="/socket.io/socket.io.js"></script> 
```

但是您需要像这样提供它：

```
<script src="http://nodeJS_server:port/socket.io/socket.io.js"></script> 
```

在哪里，为了测试，`nodeJS_server`可能是`localhost`

并且`port`是您为 socket.io 定义的，而不是节点本身。例如，在 web-server.js 顶部的依赖项中，如果添加

```
io = require('socket.io').listen(8080), 
```

那是在端口 8080 上创建一个新服务器来处理您的套接字通信。因此，您可以将 index.html 中的 socket.io.js 文件定义为：

```
<script src="http://localhost:8080/socket.io/socket.io.js"></script> 
```

希望这可以节省其他人一些时间。

# c++ - C++ - 如何将颜色值转换为 RGB

> ID：15693496
> 
> 赞同：-2
> 
> 时间：2013-03-28T22:47:12.660
> 
> 标签：c++, colors, rgb

我有以下颜色值 - 0xFFFF40、0xFFFF20、0xff5099。

我想将这些 C++ 代码转换为 RGB 值，我需要怎么做呢？

谢谢

编辑：我基本上想将这些值存储在 3 个不同的无符号短裤中：

```
unsigned short red;
unsigned short green;
unsigned short blue; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T22:48:38.367

您可以通过单独屏蔽它们来获取每个通道：

```
// Original color
std::size_t color = 0xFFFF40;
std::size_t red   = (color & 0xff0000) >> 16;
std::size_t green = (color & 0x00ff00) >> 8;
std::size_t blue  = (color & 0x0000ff); 
```

# java - 之前更改背景颜色后禁用时，JTextField 的背景颜色不会变为“灰色”

> ID：15693497
> 
> 赞同：4
> 
> 时间：2013-03-28T22:47:13.470
> 
> 标签：java, swing, background, jtextfield

通常，当您使用`setEditable(false)`or时`setEnabled(false)`，JTextField 的背景/前景色变为“灰色”。但是，如果以前使用`setBackground(color)`（例如 to `white`）设置了背景颜色，则调用`setEnabled`or`setEditable`将不再影响背景颜色。相反，它会被先前设置的颜色覆盖。

在 WinForms (.NET) 中，这是通过将背景颜色“重置”为非覆盖默认值来解决的，即`Color.Empty`. 这将导致文本框重新获得标准行为。但是，我还没有为 JTextField 找到类似的“默认值”。如何恢复 JTextField 以使用默认颜色并在禁用或设置为只读时自动切换颜色？前景色也有类似的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T00:37:17.610

您需要将字段的背景颜色重置为其默认值。

默认 UI 委托正在寻找一个`UIResource`，以确定用于给定字段的正确阴影（基于已安装的外观）。

您可以使用以下方法重置背景颜色：

`JTextField#setBackground(UIManager.getColor("TextField.background"))`

`UIResource`或者，您可以为您的自定义背景构建一个自定义。

看看[`ColorUIResource`](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/ColorUIResource.html)更多细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T00:36:22.197

> 如何恢复 JTextField 以使用默认颜色

```
textField.setBackground( null ); 
```

> 禁用或设置为只读时自动切换颜色？

使用 PropertyChangeListener：

```
import java.awt.*;
import java.awt.event.*;
import java.beans.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.text.*;

public class SSCCE extends JPanel implements PropertyChangeListener
{
    public SSCCE()
    {
        JTextField textField = new JTextField("Some Text");
        // Uncomment and run again to see the difference
        //textField.addPropertyChangeListener( this );
        textField.setBackground(Color.RED);
        textField.setEditable(false);
        add(textField);
    }

    public void propertyChange(PropertyChangeEvent e)
    {
        System.out.println(e.getPropertyName());
        JTextField textField = (JTextField)e.getSource();

        if ("editable".equals(e.getPropertyName()))
            textField.setBackground( null );
    }

    private static void createAndShowUI()
    {
        JFrame frame = new JFrame("SSCCE");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add( new SSCCE() );
        frame.pack();
        frame.setLocationByPlatform( true );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

# jquery - 用 jQuery 动画单词

> ID：15693500
> 
> 赞同：0
> 
> 时间：2013-03-28T22:47:24.637
> 
> 标签：jquery, animation

我不知道我在用 jQuery 做什么。我正在尝试一个接一个地为单词设置动画。

例如：

左侧的单词（看不见）会在滑入时淡入，而另一个单词会从右侧淡入。然后两个词都会淡出，一组新的词也会这样做。到目前为止，这是我遇到的热点问题：

```
$(function() {
    $('.fadel').animate({
        left: '250px'
    }, 3575, function() {
        $(this).fadeOut();
    });

    $('.fader').animate({
        right: '250px'
    }, 3575, function() {
        $(this).fadeIn();
        $(this).fadeOut();
    });

}); 
```

任何帮助将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:47:18.693

[http://jsfiddle.net/xPXqV/1/](http://jsfiddle.net/xPXqV/1/)

```
$(function()
{
  var num = 0;
  var words =
  [
    {left: "foo", right: "bar"},
    {left: "holy", right: "crap"},
    {left: "train", right: "spotting"}
  ];    

  var fadel = $('#fadeL');
  var fader = $('#fadeR');

  animate();

  function animate()
  {
    var leftword = words[num].left;
    var rightword = words[num].right;

    fadel
        .stop()
        .css('left', '0px')
        .css('opacity', 0)
        .text(leftword).show();

    fader
        .stop()
        .css('left', '500px')
        .css('opacity', 0)
        .text(rightword).show();
    fadel.animate({
        opacity: 1,
        left: (250 - fadel.width()) + 'px'
    }, 3575, function() {
        fadel.fadeOut("slow", function()
        {
            queueNext();
        });
    });

    fader.animate({
        opacity: 1,
        left: '250px'
    }, 3575, function() {  
        fader.fadeOut("slow");
    });
}

function queueNext()
{
    if (++num == words.length)
        num = 0;

    animate();
} 
```

});

# haskell - 在 Haskell 中通过索引号到达元组的元素

> ID：15693505
> 
> 赞同：0
> 
> 时间：2013-03-28T22:47:46.630
> 
> 标签：haskell, tuples

如何通过给出索引号到达元组的元素？或者还有其他类似的方法吗？例如，我有一个包含八个元素的元组，我想达到它的第 6 个元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T03:29:12.210

一种方法是使用 [镜头](http://hackage.haskell.org/package/lens)包。

```
> import Control.Lens
> Prelude Control.Lens> view _1 (1,2)
1
> Prelude Control.Lens> view _2 (1,2,3)
2
> Prelude Control.Lens> view _3 (1,2,3,4)
3
> Prelude Control.Lens> view _4 (1,2,3,4,5)
4 
```

`_?`运算符仅定义为，`_9`但如果需要，定义更多是相当容易的。

# google-bigquery - 加载包含数千列的表

> ID：15693506
> 
> 赞同：0
> 
> 时间：2013-03-28T22:48:01.313
> 
> 标签：google-bigquery

我有一个包含 5000 多个变量（列）的 CSV 数据文件。这可以加载到 BigQuery 表中吗？如果是这样，最好的选择是 Web UI 导入向导对话框“指定架构”步骤截断架构规范字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:04:03.647

只要您的行不太大，5000 列就不会有问题。什么太大了？BigQuery[文档](https://developers.google.com/bigquery/preparing-data-for-bigquery)说，使用 JSON 时每行的最大大小为 20MB，而使用 CSV 时为 1 MB。

如果您有那么多列，我建议使用 bq.py 命令行[客户端](https://developers.google.com/bigquery/docs/hello_bigquery)来进行加载。

# image - R2012a及以下版本worldToIntrinsic函数的替换

> ID：15693510
> 
> 赞同：0
> 
> 时间：2013-03-28T22:48:19.867
> 
> 标签：image, matlab, image-processing

MATLAB： R2012a及以下[版本worldToIntrinsic函数的替换](http://www.mathworks.com/help/images/ref/imref2d.worldtointrinsic.html?searchHighlight=imref)

众所周知，讨论中的功能仅在 R2013a 或更高版本中可用，因此

任何可替换的内置功能或自制方法都是好的。

编辑：我没有 imref2d 类，但函数 imtransform 引入了[世界坐标问题](http://www.mathworks.com/help/images/image-coordinate-systems.html#brcu_cr)

我们拥有的是下面的 xdata 和 ydata：

```
[ output, xdata, ydata ] = imtransform( imgDouble{1}, tform ); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:49:15.183

调用 imtransform 后出现的世界坐标问题是什么？XData/YData 输出和 UData/VData/Size 名称/值输入在功能上等同于使用 imref2d 将图像网格引用到世界坐标系。

如果您感兴趣的是几何变换所隐含的正向/反向点变换，那么您可以使用函数 tformfwd/tforminv。在不知道您要解决的问题的情况下，很难知道如何回答这个问题。

*   亚历克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T00:29:47.913

在我看来，如果你有`imtransform`可用的函数，你应该简单地计算逆变换（即 的倒数`tform`），以便能够计算“在另一个方向”的变换。如果您开始阅读有关该`imtransform`功能以及相关功能`maketform`和`tformfwd`and的信息`tforminv`，我认为您将能够弄清楚。我现在无法访问 Matlab 环境，否则我会为您运行一些测试 - 但我 90% 确信这些功能将帮助您自己找到解决方案。

# ms-access - 访问表单在机器之间显示的分辨率不同

> ID：15693512
> 
> 赞同：1
> 
> 时间：2013-03-28T22:48:26.877
> 
> 标签：ms-access

我的工作机器已经有一段时间了，我正在为公司内的用户开发一个小型 Access db。问题是表单似乎以不同的放大倍数（或其他）显示给其他用户，导致屏幕只显示表单的一部分。

在我的机器上看起来不错。但是，当我与具有完全相同分辨率设置和相同尺寸显示器的同事进行测试时，屏幕底部的 1/3 不显示。文字看起来特别大。访问表单和数据库都最大化，我们的显示器是完全相同的模型。

有任何想法吗？有可能在过去的几年里，我以某种小方式定制了我的机器，然后很快就忘记了它。我还应该补充一点，我之前在其他 Access 数据库中也看到过同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:42:12.917

我自己也遇到过几次。这似乎源于这样一个事实，即在 Windows 中有两种方法可以控制屏幕上的文本大小：

1.  为 Windows 选择“小/常规/大字体”配色方案，该方案会调整特定 UI 元素的字体大小，但不会影响显示器的 DPI 设置。

2.  使用 Windows 控制面板的“调整字体大小 (DPI)”设置：“默认”= 96 DPI，“较大的文本”= 120 DPI。不幸的是，这种方法似乎也会影响其他事物的维度，而不仅仅是文本。

一些开发环境 [尝试] 提供了针对不同 DPI 设置进行调整的方法，但它可能会变得复杂，如前面的问题中[所述](https://stackoverflow.com/questions/4075802/creating-a-dpi-aware-application)。只要有可能我就

*   尽量不要在单一表格上打包太多，

*   为我所针对的标称桌面尺寸在这些表格周围留下一些健康的边距，然后

*   希望最好的。:)

# javascript - 每 500 毫秒闪烁不同颜色的文本 javascript

> ID：15693513
> 
> 赞同：2
> 
> 时间：2013-03-28T22:48:29.583
> 
> 标签：javascript, html, web

我正在尝试创建一个简单的 javascript 脚本，该脚本会以每 500 毫秒闪烁不同颜色的文本。我想到了这样的东西，但它不起作用，它只是以一种颜色（绿色、黑色或红色三种颜色之一）打印出文本。谢谢你的帮助

```
<html>
<body >
<script>

var f = function() { 
var str = "Hello World";;
var d = new Date();
var n = d.getTime();
switch(n%3)
  {
  case 1:
  fontcolor="green"
  break;
  case 2:
  fontcolor="black"
  break;
  default:
  fontcolor="red"
  }
document.write(str.fontcolor(fontcolor));   
 }
setInterval(f, 500);     
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:18:34.403

尝试这样的事情（请参阅评论以了解发生了什么）：

```
// Wait until the document is ready

window.onload = function()
{
    // Create the element

    var txt = document.createElement('span');

    txt.innerHTML = 'Hello World!';

    // Insert the element to the document

    document.body.appendChild(txt);

    // Alternate the colors

    var colors  = [ 'red', 'green', 'blue', 'black', 'yellow', 'pink' ];
    var current = 0;

    setInterval(function()
    {
        // Update element's style with the new color

        txt.style.color = colors[current];

        // Go to the next color

        current = (current + 1) % colors.length;

    }, 500);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:57:21.753

我刚刚在[小提琴](http://jsfiddle.net/q5Fw7/)中运行它，它似乎工作。看起来每 500 毫秒发生一次，因此计算机上每次调用之间的时间可能实际上是 501 毫秒（或其他 3 的除数），或其他 3 的除数。你为什么不尝试聚合计数器，最初为 0，然后每次添加 d.getTime() % 1000，然后具有该值 % 3。

```
var a = 0;
var f = function() { 
    var str = "Hello World";;
    var d = new Date();
    var n = d.getTime();
    a = a + (n % 1000);
    switch(a % 3) {
        case 1:
            fontcolor="green"
            break;
        case 2:
            fontcolor="black"
            break;
        default:
            fontcolor="red"
    }
    document.write(str.fontcolor(fontcolor));
}
setInterval(f, 500); 
```

# c# - 在代码中使用 svn diff 命令

> ID：15693519
> 
> 赞同：3
> 
> 时间：2013-03-28T22:48:46.400
> 
> 标签：c#, svn

嗨，我在后面的代码中使用 svn 命令时遇到问题：

```
public void SvnDiff(int rev1, int rev2)
        {
            try
            {
                var p = new Process();
                p.StartInfo.UseShellExecute = false;
                p.StartInfo.RedirectStandardOutput = true;
                p.StartInfo.FileName = "svn";
                string arg = string.Format("diff -r {0}:{1} --summarize --xml > SvnDiff.xml", rev1, rev2);
                Console.WriteLine(arg);
                p.StartInfo.Arguments = arg;
                p.Start();
                p.WaitForExit();
            }
            catch (Exception e)
            {
                Console.WriteLine(e);
            }
        } 
```

当我在 cmd 中使用此命令时，它工作正常。svn diff -r 2882:2888 --summarize --xml > SvnDiff.xml

但是当我运行我的方法时，我收到了这条消息：svn: E020024: Error resolve case of '>'

我现在能做些什么来解决这个问题？感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:04:37.970

您可以阅读所有文本，然后按照@Scott 的建议写入文件，但如果输出太大，可能会出现问题。

您可以改为在生成输出时写入。为文件创建一个本地`StreamWriter`文件，以及一个在新输出数据可用时写入的方法：

```
StreamWriter redirectStream = new StreamWriter("SvnDiff.xml")

void Redirect(object Sender, DataReceivedEventArgs e)
{
  if ((e.Data != null)&&(redirectStream != null))
    redirectStream.WriteLine(e.Data);
} 
```

当你开始这个过程时：

```
p.OutputDataReceived += new DataReceivedEventHandler(Redirect); // handler here to redirect
p.Start();
p.BeginOutputReadLine();
p.WaitForExit();

redirectStream.Flush();
redirectStream.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:56:06.173

您的`> SvnDiff.xml`命令行部分不是传递给 SVN 的参数。他们正在重定向标准输出。为此，请查看[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)：

由于您已经正确设置了 RedirectStandardOutput，因此您只需要利用它。简单的说

```
string output = p.StandardOutput.ReadToEnd(); 
```

在你的`p.WaitForExit();`行前。

然后，只需使用`File.WriteAllText("SvnDiff.xml", output);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:56:52.437

试试这个......

```
var p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "cmd.exe";
string arg = string.Format("/K svn diff -r {0}:{1} --summarize --xml > SvnDiff.xml", rev1, rev2);
Console.WriteLine(arg);
p.StartInfo.Arguments = arg;
p.Start();
p.WaitForExit(); 
```

如果可行，则将 /K 更改为 /C

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T23:23:29.377

感谢您的回答，我使用 StandardOutput 并且它可以工作:)

```
var p = new Process();
                p.StartInfo.UseShellExecute = false;
                p.StartInfo.RedirectStandardOutput = true;
                p.StartInfo.FileName = "svn";
                p.StartInfo.Arguments = string.Format("diff -r {0}:{1} --summarize --xml", rev1, rev2);
                p.Start();
                string output = p.StandardOutput.ReadToEnd();
                p.WaitForExit();
                File.WriteAllText("SvnDiff.xml", output); 
```

谢谢大家。

# html - 如何使用 wkhtmltopdf 将简单的 html 转换为 pdf？

> ID：15693520
> 
> 赞同：7
> 
> 时间：2013-03-28T22:48:47.823
> 
> 标签：html, pdf, wkhtmltopdf, html-to-pdf

这是我所做的：

1.  在亚马逊云中创建了一个 linux 虚拟机。
2.  [按照https://code.google.com/p/wkhtmltopdf/wiki/compilation](https://code.google.com/p/wkhtmltopdf/wiki/compilation)中的说明下载和编译 wkhtmltopdf-qt 和 wkhtmltopdf 的源代码。最后我有一个 wkhtmltopdf 的静态构建。
3.  拿了这个 html ( [http://jsfiddle.net/mark69_fnd/8CtjB/](http://jsfiddle.net/mark69_fnd/8CtjB/) ):

    <html> <head> <style type="text/css">p{font-family: sans-serif;};</style> </head> <body> <p>让我们测试一下</p> </正文> </html>

4.  冉`wkhtmltopdf test.html test.pdf`

5.  将 test.pdf 复制到我的 Windows 桌面，打开它并得到这个（[https://docs.google.com/file/d/0B2pbsdBJxJI3MV8zby14cGk5VWs/edit?usp=sharing](https://docs.google.com/file/d/0B2pbsdBJxJI3MV8zby14cGk5VWs/edit?usp=sharing)）： ![在此处输入图像描述](../Images/fb4c0beb123829ad374e05f23da1696a.png)

`../wkhtmltopdf/static_qt_conf_base`我密切关注指南，qt 配置选项取自 `../wkhtmltopdf/static_qt_conf_linux`指南建议。

不用说，我对结果有点失望。谁能解释我做错了什么？

附言

实际上，我需要转换一个更复杂的 HTML，但是当我无法转换一个微不足道的 HTML 时，谈论它是没有意义的。

**编辑**

我想强调一下，我不在 Linux 上工作，我只打开一个终端到亚马逊托管的 Linux 盒子。意思是，我没有 X11 环境。

这是我尝试使用预定义的 wkhtmltopdf 包时得到的结果：

```
ubuntu@ip-10-245-78-162:~$ which wkhtmltopdf
ubuntu@ip-10-245-78-162:~$ /usr/bin/wkhtmltopdf
-bash: /usr/bin/wkhtmltopdf: No such file or directory
ubuntu@ip-10-245-78-162:~$ sudo apt-get install wkhtmltopdf
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  wkhtmltopdf
0 upgraded, 1 newly installed, 0 to remove and 120 not upgraded.
Need to get 0 B/104 kB of archives.
After this operation, 303 kB of additional disk space will be used.
Selecting previously unselected package wkhtmltopdf.
(Reading database ... 36679 files and directories currently installed.)
Unpacking wkhtmltopdf (from .../wkhtmltopdf_0.9.9-3_amd64.deb) ...
Processing triggers for man-db ...
Setting up wkhtmltopdf (0.9.9-3) ...
ubuntu@ip-10-245-78-162:~$ l test.*
-rw-r--r-- 1 ubuntu ubuntu 123 Mar 30 12:46 test.html
ubuntu@ip-10-245-78-162:~$ cat test.html
<html> <head> <style type="text/css">p{font-family: sans-serif;};</style> </head> <body> <p>Let's Test</p> </body> </html>
ubuntu@ip-10-245-78-162:~$ /usr/bin/wkhtmltopdf test.html test.pdf
wkhtmltopdf: cannot connect to X server
ubuntu@ip-10-245-78-162:~$ 
```

**编辑2**

1.  我已经下载[了 ftp://rpmfind.net/linux/fedora/linux/development/rawhide/x86_64/os/Packages/u/urw-fonts-2.4-14.fc19.noarch.rpm](ftp://rpmfind.net/linux/fedora/linux/development/rawhide/x86_64/os/Packages/u/urw-fonts-2.4-14.fc19.noarch.rpm)
2.  按照[http://www.howtogeek.com/howto/ubuntu/install-an-rpm-package-on-ubuntu-linux/](http://www.howtogeek.com/howto/ubuntu/install-an-rpm-package-on-ubuntu-linux/)的说明将 rpm 转换为 deb 格式。
3.  安装了deb
4.  生成pdf，但仍然只看到正方形。

这是成绩单：

```
ubuntu@ip-10-245-78-162:~$ sudo alien urw-fonts-2.4-14.fc19.noarch.rpm --scripts
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
warning: urw-fonts-2.4-14.fc19.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID fb4b18e6: NOKEY
urw-fonts_2.4-15_all.deb generated
ubuntu@ip-10-245-78-162:~$ sudo dpkg -i urw-fonts_2.4-15_all.deb
Selecting previously unselected package urw-fonts.
(Reading database ... 38529 files and directories currently installed.)
Unpacking urw-fonts (from urw-fonts_2.4-15_all.deb) ...
Setting up urw-fonts (2.4-15) ...
Processing triggers for fontconfig ...
ubuntu@ip-10-245-78-162:~$  ./wkhtmltopdf/bin/wkhtmltopdf test.html test.pdf
Loading pages (1/6)
Counting pages (2/6)
Resolving links (4/6)
Loading headers and footers (5/6)
Printing pages (6/6)
Done
ubuntu@ip-10-245-78-162:~$ 
```

**编辑3**

我已经安装了 xvfb-run 包，现在可以通过它运行默认版本（/usr/bin/wkhtmltopdf）。实际上，它能够将简单的 test.html 转换为 pdf，但是，对于带有 Javascript 代码的复杂 html 页面，它却无法做到这一点。似乎 /usr/bin/wkhtmltopdf 无法在正在转换的页面上运行任何 Javascript 代码。

我仍然很困惑为什么编译后的版本不起作用。

**编辑4**

我对默认的 wkhtmltopdf 版本不公平。它能够理解页面中的Javascript，它成功转换了以下html：

```
<html>
  <head>
    <style type="text/css">
      body {
        font-family: sans-serif;
      }
    </style>
  </head>
  <body id='body'>
    <script>
      document.getElementById('body').innerHTML = 'Hello world!';
    </script>
  </body>
</html> 
```

我将尝试理解为什么它会在真实页面上失败，但我不知道如何解决它，除非通过丢弃原始页面的碎片来尝试获得最小的失败页面。

**编辑5**

好的，这是不适用于默认 wkhtmltopdf 版本的最小示例：

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
        html, body {
                height: 100%;
                overflow: hidden;
        }
    </style>
  </head>
  <body>
    Hello World!
  </body>
</html> 
```

创建的pdf是空的。这是成绩单：

```
ubuntu@ip-10-245-78-162:~$ cat test2.html
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
        html, body {
                height: 100%;
                overflow: hidden;
        }
    </style>
  </head>
  <body>
    Hello World!
  </body>
</html>
ubuntu@ip-10-245-78-162:~$ xvfb-run /usr/bin/wkhtmltopdf test2.html test2.pdf ; l test2.pdf
Loading page (1/2)
Printing pages (2/2)
Done
-rw-r--r-- 1 ubuntu ubuntu 1266 Mar 31 11:16 test2.pdf
ubuntu@ip-10-245-78-162:~$ cat test2.html |sed 6d | xvfb-run /usr/bin/wkhtmltopdf - test2.pdf ; l test2.pdf
Loading page (1/2)
Printing pages (2/2)
Done
-rw-r--r-- 1 ubuntu ubuntu 4284 Mar 31 11:16 test2.pdf
ubuntu@ip-10-245-78-162:~$ 
```

请注意删除第 6 行（高度：100%；）如何更改创建的 pdf 文件的大小。

**编辑6**

自定义版本是静态链接的，而默认版本依赖于相当多的 WebKit 共享库：

自定义版本：

```
ubuntu@ip-10-245-78-162:~/wkhtmltopdf/bin$ l wkhtmltopdf
-rwxr-xr-x 1 ubuntu ubuntu 35020224 Mar 31 22:26 wkhtmltopdf
ubuntu@ip-10-245-78-162:~/wkhtmltopdf/bin$ ldd !$
ldd wkhtmltopdf
        linux-vdso.so.1 =>  (0x00007fff195ff000)
        libXrender.so.1 => /usr/lib/x86_64-linux-gnu/libXrender.so.1 (0x00007fefc06db000)
        libX11.so.6 => /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007fefc03a7000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fefc01a2000)
        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fefbff9a000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fefbfd7d000)
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fefbfa7c000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fefbf780000)
        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fefbf56a000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fefbf1aa000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fefc08ef000)
        libxcb.so.1 => /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007fefbef8c000)
        libXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007fefbed88000)
        libXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007fefbeb82000)
ubuntu@ip-10-245-78-162:~/wkhtmltopdf/bin$ 
```

现在默认版本：

```
ubuntu@ip-10-245-78-162:/usr/bin$ l wkhtmltopdf
-rwxr-xr-x 1 root root 233512 May  7  2011 wkhtmltopdf
ubuntu@ip-10-245-78-162:/usr/bin$ ldd wkhtmltopdf
        linux-vdso.so.1 =>  (0x00007fff031ff000)
        libQtWebKit.so.4 => /usr/lib/x86_64-linux-gnu/libQtWebKit.so.4 (0x00007f28a33bc000)
        libQtGui.so.4 => /usr/lib/x86_64-linux-gnu/libQtGui.so.4 (0x00007f28a26ee000)
        libQtNetwork.so.4 => /usr/lib/x86_64-linux-gnu/libQtNetwork.so.4 (0x00007f28a23a1000)
        libQtCore.so.4 => /usr/lib/x86_64-linux-gnu/libQtCore.so.4 (0x00007f28a1ecf000)
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f28a1bcf000)
        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f28a19b8000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f28a15f9000)
        libsqlite3.so.0 => /usr/lib/x86_64-linux-gnu/libsqlite3.so.0 (0x00007f28a1356000)
        libXrender.so.1 => /usr/lib/x86_64-linux-gnu/libXrender.so.1 (0x00007f28a114b000)
        libgstapp-0.10.so.0 => /usr/lib/x86_64-linux-gnu/libgstapp-0.10.so.0 (0x00007f28a0f3f000)
        libgstinterfaces-0.10.so.0 => /usr/lib/x86_64-linux-gnu/libgstinterfaces-0.10.so.0 (0x00007f28a0d2d000)
        libgstpbutils-0.10.so.0 => /usr/lib/x86_64-linux-gnu/libgstpbutils-0.10.so.0 (0x00007f28a0b09000)
        libgstvideo-0.10.so.0 => /usr/lib/x86_64-linux-gnu/libgstvideo-0.10.so.0 (0x00007f28a08ed000)
        libgstbase-0.10.so.0 => /usr/lib/x86_64-linux-gnu/libgstbase-0.10.so.0 (0x00007f28a069a000)
        libgstreamer-0.10.so.0 => /usr/lib/x86_64-linux-gnu/libgstreamer-0.10.so.0 (0x00007f28a03b2000)
        libgobject-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0 (0x00007f28a0163000)
        libglib-2.0.so.0 => /lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007f289fe6e000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f289fc50000)
        libX11.so.6 => /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f289f91c000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f289f620000)
        libfontconfig.so.1 => /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007f289f3e9000)
        libaudio.so.2 => /usr/lib/x86_64-linux-gnu/libaudio.so.2 (0x00007f289f1d1000)
        libpng12.so.0 => /lib/x86_64-linux-gnu/libpng12.so.0 (0x00007f289efa9000)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f289ed91000)
        libfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 (0x00007f289eaf5000)
        libSM.so.6 => /usr/lib/x86_64-linux-gnu/libSM.so.6 (0x00007f289e8ed000)
        libICE.so.6 => /usr/lib/x86_64-linux-gnu/libICE.so.6 (0x00007f289e6d2000)
        libXi.so.6 => /usr/lib/x86_64-linux-gnu/libXi.so.6 (0x00007f289e4c3000)
        libXext.so.6 => /usr/lib/x86_64-linux-gnu/libXext.so.6 (0x00007f289e2b2000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f289e0ad000)
        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f289dea5000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f28a517e000)
        liborc-0.4.so.0 => /usr/lib/x86_64-linux-gnu/liborc-0.4.so.0 (0x00007f289dc29000)
        libgmodule-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgmodule-2.0.so.0 (0x00007f289da25000)
        libxml2.so.2 => /usr/lib/x86_64-linux-gnu/libxml2.so.2 (0x00007f289d6ca000)
        libffi.so.6 => /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007f289d4c1000)
        libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f289d284000)
        libxcb.so.1 => /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f289d065000)
        libexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f289ce3b000)
        libXt.so.6 => /usr/lib/x86_64-linux-gnu/libXt.so.6 (0x00007f289cbd5000)
        libXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f289c9d1000)
        libuuid.so.1 => /lib/x86_64-linux-gnu/libuuid.so.1 (0x00007f289c7cc000)
        libXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f289c5c5000)
ubuntu@ip-10-245-78-162:/usr/bin$ 
```

**编辑7**

伙计们，我不明白 wkhtmltopdf 如何为您工作。我从头开始，完全：

1.  创建了一个全新的 Ubuntu Amazon 微型实例（免费套餐）
2.  sudo apt-get 更新
3.  sudo apt-get 升级
4.  sudo apt-get install libx11-dev
5.  sudo apt-get install libfontconfig1-dev
6.  wget [https://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.11.0_rc1-static-amd64.tar.bz2](https://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.11.0_rc1-static-amd64.tar.bz2)
7.  tar xjf wkhtmltopdf-0.11.0_rc1-static-amd64.tar.bz2
8.  **使用来自EDIT5**的内容创建了 test2.html （参见**EDIT5**成绩单）
9.  在 test2.html 上运行 wkhtmltopdf-amd64。**生成的pdf是空的！**
10.  从 test2.html 中删除第 6 行或第 7 行（CSS 属性宽度或溢出），它突然就起作用了！

任何人都可以追溯我的步骤并确认吗？

**编辑8**

在我的笔记本电脑上的 VMWare 虚拟机中安装了 CentOS 6.4。结果相同。wkhtmltopdf 不适用于上述琐碎的 html 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T11:28:39.127

尝试在您的 html 头标签中设置字符集声明，如下所示：

```
<head>
  <meta charset="utf-8">
  ...
</head> 
```

# java - 集群中机器之间的 Java 和 string.hashCode() 稳定性

> ID：15693526
> 
> 赞同：6
> 
> 时间：2013-03-28T22:49:18.573
> 
> 标签：java, cluster-computing, hashcode

我已经为.NET中的方法提出了[类似的问题。](https://stackoverflow.com/questions/8838053/can-object-gethashcode-produce-different-results-for-the-same-objects-strings)`string.GetHashCode()`从那时起，我了解到，如果我们要在不同的机器上使用哈希码，我们不能依赖于内置类型的哈希码的隐式实现。因此，我假设 Java 的实现`String.hashCode()`在不同的硬件配置中也是不稳定的，并且可能在不同的虚拟机中表现不同（不要忘记不同的虚拟机实现）

目前我们正在讨论一种在 Java 中通过哈希将字符串安全地转换为数字的方法，但是哈希算法必须在集群的不同节点之间保持稳定，并且评估速度快，因为使用频率很高。我的队友坚持使用原生`hashCode`方法，我需要一些合理的论据来让他们重新考虑另一种方法。目前，我只能想到机器配置（x86 和 x64）之间的差异，可能是某些机器上 JVM 的不同供应商（在我们的案例中几乎不适用）和字节顺序差异，具体取决于算法所使用的机器跑。当然，可能还要考虑字符编码。

虽然所有这些事情都出现在我的脑海中，但我不能 100% 确定其中任何一个都是足够有力的理由，我会感谢您在这方面的专业知识和经验。这将帮助我建立更有力的论据来支持编写自定义散列算法。另外，我很感激关于在实施时**不应该做什么的**建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T22:55:24.477

的实现在文档`String.hashCode()`中[指定](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#hashCode%28%29)，因此保证一致：

> String 对象的哈希码计算为
> 
> ```
>  s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] 
> ```
> 
> 使用 int 算术，其中 s[i] 是字符串的第 i 个字符，n 是字符串的长度，^ 表示求幂。（空字符串的哈希值为零。）

对于 Java，所有这些操作都是独立于平台实现的——例如，平台字节顺序是无关紧要的。

也就是说，如果您是从文件或其他字节源获取它，那么获取它的方法可能会很*棘手*。`String`在这种情况下，只要您明确指定一个`Charset`. （请记住，`String`s 本身没有不同的编码；编码是a和 a之间*转换*的规范。）`byte[]``String`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T22:57:05.390

您可以查看[源代码，如下所示](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.hashCode%28%29)。据我所见（经过 10 秒的分析），这应该在机器和架构之间保持稳定。路易斯通过引用规范来证实这一点，如果你相信规范，那就更好了。:-)

但是，如果不同的 JRE 选择以不同的方式实现它并违反规范，这可能会有所不同。

```
public int hashCode() {
    int h = hash;
    if (h == 0) {
        int off = offset;
        char val[] = value;
        int len = count;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }

        hash = h;
    }

    return h;
} 
```

# python - 如何在 YAML 中指定始终使用 dictConfig 在项目文件夹中创建日志文件？

> ID：15693529
> 
> 赞同：11
> 
> 时间：2013-03-28T22:49:26.980
> 
> 标签：python, logging, python-3.x, yaml, configuration-files

在我的 Python 程序中，我有以下代码：

```
def main():
    # The file's path
    path = os.path.dirname(os.path.realpath(__file__))
    ...
    # Config file relative to this file
    loggingConf = open('{0}/configs/logging.yml'.format(path), 'r')
    logging.config.dictConfig(yaml.load(loggingConf))
    loggingConf.close()
    logger = logging.getLogger(LOGGER)
    ... 
```

这是我的 logging.yml 配置文件：

```
version: 1
formatters:
  default:
    format: '%(asctime)s %(levelname)s %(name)s %(message)s'
handlers:
  console:
    class: logging.StreamHandler
    level: DEBUG
    formatter: default
    stream: ext://sys.stdout
  file:
    class : logging.FileHandler
    formatter: default
    filename: bot.log
loggers:
  cloaked_chatter:
    level: DEBUG
    handlers: [console, file]
    propagate: no 
```

问题是 bot.log 文件是在程序启动的地方创建的。我希望它始终在项目的文件夹中创建，即在与我的 Python 程序相同的文件夹中。

例如，启动程序`./bot.py`会在同一文件夹中创建日志文件。但是启动它`python3 path/bot.py`会在文件层次结构中创建比 Python 程序高一级的日志文件。

我应该如何在配置文件中写入文件名来解决这个问题？还是我需要编写一个自定义处理程序？如果是这样，怎么做？或者这不能使用 dictConfig 解决吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T10:15:00.003

有很多方法可以实现你想要的。例如，一种方法是为您的处理程序制作自定义初始化程序：

```
import os
import yaml

def logmaker():
    path = os.path.dirname(os.path.realpath(__file__))
    path = os.path.join(path, 'bot.log')
    return logging.FileHandler(path)

def main():
    # The file's path
    path = os.path.dirname(os.path.realpath(__file__))

    # Config file relative to this file
    loggingConf = open('{0}/logging.yml'.format(path), 'r')
    logging.config.dictConfig(yaml.load(loggingConf))
    loggingConf.close()
    logger = logging.getLogger('cloaked_chatter')
    logger.debug('Hello, world!')

if __name__ == '__main__':
    main() 
```

请注意，我将 移动`logging.yml`到与脚本相邻的位置。是自`logmaker`定义初始化程序。在 YAML 中指定如下：

```
version: 1
formatters:
  default:
    format: '%(asctime)s %(levelname)s %(name)s %(message)s'
handlers:
  console:
    class: logging.StreamHandler
    level: DEBUG
    formatter: default
    stream: ext://sys.stdout
  file:
    () : __main__.logmaker
    formatter: default
loggers:
  cloaked_chatter:
    level: DEBUG
    handlers: [console, file]
    propagate: no 
```

如果您运行 Python 脚本，您应该会发现它`bot.log`是在脚本和 YAML 文件旁边创建的。相同的消息被打印到控制台并且`bot.log`：

```
2013-04-16 11:08:11,178 DEBUG cloaked_chatter Hello, world! 
```

NB 脚本可能会更整洁一些，但它说明了我的观点。

**更新：**根据[文档](http://docs.python.org/2/library/logging.config.html#user-defined-objects)，`()`用作字典中的键表示该值是可调用的，它本质上是处理程序的自定义构造函数。

# javascript - 在闭包中访问 ajax 数据

> ID：15693535
> 
> 赞同：0
> 
> 时间：2013-03-28T22:49:49.663
> 
> 标签：javascript, jquery

我想用ajax加载的一些数据在我的函数中填充一个“私有”变量，以便可以在函数中访问它。我目前拥有的：

```
var foo = (function(){

    var ajaxData;

    var useAjaxData = function(data){

    };

})(); 
```

我想我需要做类似的事情，因为它是一个异步调用？有没有更漂亮的解决方案？

```
var foo = (function(){

    $.ajax({
       url: 'something',
       success: function(data){

           var ajaxData = data;

           var useAjaxData = function(data){

           };
      }
    });

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:03:49.397

请记住，因为 ajax 是异步的，所以您不能依赖 ajax 请求何时完成（甚至根本不完成），因此也不能依赖于触发 ajax 回调的时间。所以这永远不能依赖：

```
var ajaxData;
$.ajax().done(function (data) { ajaxData = data; });
useAjaxData(ajaxData); 
```

也就是说，你***所有***依赖于ajax数据的代码都必须在ajax回调中完成。

至于您关于是否可以使其*更漂亮*的具体问题，这确实是一个见仁见智的问题，但`success:`您可能更喜欢使用 Deferred 方法而不是使用。

```
var jqxhr = $.ajax();
/* millions of lines of code */
jqxhr.done(function (data) {
    // work with the ajax data
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T23:00:07.103

只需将数据变量放在顶部闭包中：

```
var foo = (function() {
  var ajaxData; // accessible in the anonymous function and any nested function

  function useAjaxData() {
    // `ajaxData` is accessible from here, 
    // but will be undefined until the server response has been handled
    doSomethingWith(ajaxData);
  }

  $.ajax({
    // ...
    success: function(data) {
      // note: no `var` here, the outer `ajaxData` variable will be used
      ajaxData = data; 
    }
  });
}()); 
```

这是可行的，因为该`ajaxData`变量未`var`在成功处理程序的范围内声明（使用 ）。因此它将在周围的范围内查找（并设置）。只有根本没有声明它，才会创建一个隐式全局变量。

# c# - 循环遍历 DataSet 表

> ID：15693536
> 
> 赞同：1
> 
> 时间：2013-03-28T22:49:50.673
> 
> 标签：c#, wpf, datagrid, visual-studio-2012, wpfdatagrid

在使用 VS 2010 多年后，我已经安装了 VS 2012，我什至无法再循环遍历表行（这在以前是轻而易举的事），这对我的项目来说绝对是至关重要的。

我尝试了多种呼叫方式，`DataGrid.Rows`但用户根本无法使用，因此我正在尝试寻找解决方法。

这是我想出的，但第二部分对我不起作用。

```
foreach (TableRow row in MyDatabaseDataSet.Tables["Table1"].Rows)
{
//Pesky lengthy non-working code supposed to generate 
//controls dependent on row cell value
} 
```

只是为了让事情更简单（代码不工作太长了，在这里发布它会是反建设性的。相反，让我们尝试获取一个消息框来显示所查看行的第二列中单元格的值。

但什么都没有。

我尝试了很多我能想到的方法，包括：

```
MessageBox.Show(row.Cells[2].Value);
MessageBox.Show(row.Cells[2].Text); 
```

但这对我根本不起作用！

甚至根本不想运行该项目。

如何遍历 a`DataTable`甚至 a中的所有行`Datagrid`？

PS：我忘了提，但我还在上面写的 foreach 语句之前的代码中添加了 Load Data 段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T22:54:31.780

也许我忽略了一些简单的东西，但[`DataTable.Rows`](http://msdn.microsoft.com/en-us/library/system.data.datatable.rows.aspx)返回了一个不[`DataRowCollection`](http://msdn.microsoft.com/en-us/library/system.data.datarowcollection%28v=vs.110%29.aspx)包含的内容。[`DataRows`](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)[`TableRows`](http://msdn.microsoft.com/en-us/library/system.windows.documents.tablerow.aspx)

所以而不是

```
foreach (TableRow row in MyDatabaseDataSet.Tables["Table1"].Rows)
{
    // ...
} 
```

这：

```
foreach (DataRow row in MyDatabaseDataSet.Tables["Table1"].Rows)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:55:03.583

`DataTable.Rows`返回 的实例`DataRowCollection`，其中包含`DataRow`对象，而不是`TableRow`

```
foreach( DataRow row in MyDatabaseDataSet.Tables["Table1"].Rows)
{
   // code here
} 
```

# javascript - 在 highcharts 中没有正确设置条形颜色？

> ID：15693539
> 
> 赞同：2
> 
> 时间：2013-03-28T22:50:11.377
> 
> 标签：javascript, jquery, highcharts

使用 HighCharts 将类型设置为 column ：

```
type: 'column' 
```

但条形图未显示条形颜色：

![在此处输入图像描述](../Images/4fd42c6c3214ad71bd8936be7691aba8.png)

我需要配置另一个参数吗？图表右侧的最后一个条显示正确。

这是小提琴及其代码：

[http://jsfiddle.net/cvS3P/](http://jsfiddle.net/cvS3P/)

```
$(function () {
        $('#container').highcharts({
            chart: {
                zoomType: 'x',
                spacingRight: 20
            },
            title: {
                text: 'USD to EUR exchange rate from 2006 through 2008'
            },
            subtitle: {
                text: document.ontouchstart === undefined ?
                    'Click and drag in the plot area to zoom in' :
                    'Drag your finger over the plot to zoom in'
            },
            xAxis: {
                type: 'datetime',
                maxZoom: 14 * 24 * 3600000, // fourteen days
                title: {
                    text: null
                }
            },
            yAxis: {
                title: {
                    text: 'Exchange rate'
                }
            },
            tooltip: {
                shared: true
            },
            legend: {
                enabled: false
            },
            plotOptions: {
                area: {
                    fillColor: {
                        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
                        stops: [
                            [0, Highcharts.getOptions().colors[0]],
                            [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                        ]
                    },
                    lineWidth: 1,
                    marker: {
                        enabled: false
                    },
                    shadow: false,
                    states: {
                        hover: {
                            lineWidth: 1
                        }
                    },
                    threshold: null
                }
            },

            series: [{
                type: 'column',
                name: 'USD to EUR',
                pointInterval: 24 * 3600 * 1000,
                pointStart: Date.UTC(2006, 0, 01),
                data: [
                    0.8446, 0.8445, 0.8444, 0.8451,    0.8418, 0.8264,    0.8258, 0.8232,    0.8233, 0.8258,
                    0.8283, 0.8278, 0.8256, 0.8292,    0.8239, 0.8239,    0.8245, 0.8265,    0.8261, 0.8269,
                    0.8273, 0.8244, 0.8244, 0.8172,    0.8139, 0.8146,    0.8164, 0.82,    0.8269, 0.8269,
                    0.8269, 0.8258, 0.8247, 0.8286,    0.8289, 0.8316,    0.832, 0.8333,    0.8352, 0.8357,
                    0.8355, 0.8354, 0.8403, 0.8403,    0.8406, 0.8403,    0.8396, 0.8418,    0.8409, 0.8384,
                    0.8386, 0.8372, 0.839, 0.84, 0.8389, 0.84, 0.8423, 0.8423, 0.8435, 0.8422,
                    0.838, 0.8373, 0.8316, 0.8303,    0.8303, 0.8302,    0.8369, 0.84, 0.8385, 0.84,
                    0.8401, 0.8402, 0.8381, 0.8351,    0.8314, 0.8273,    0.8213, 0.8207,    0.8207, 0.8215,
                    0.8242, 0.8273, 0.8301, 0.8346,    0.8312, 0.8312,    0.8312, 0.8306,    0.8327, 0.8282,
                    0.824, 0.8255, 0.8256, 0.8273, 0.8209, 0.8151, 0.8149, 0.8213, 0.8273, 0.8273,
                    0.8261, 0.8252, 0.824, 0.8262, 0.8258, 0.8261, 0.826, 0.8199, 0.8153, 0.8097,
                    0.8101, 0.8119, 0.8107, 0.8105,    0.8084, 0.8069,    0.8047, 0.8023,    0.7965, 0.7919,
                    0.7921, 0.7922, 0.7934, 0.7918,    0.7915, 0.787, 0.7861, 0.7861, 0.7853, 0.7867,
                    0.7827, 0.7834, 0.7766, 0.7751, 0.7739, 0.7767, 0.7802, 0.7788, 0.7828, 0.7816,
                    0.7829, 0.783, 0.7829, 0.7781, 0.7811, 0.7831, 0.7826, 0.7855, 0.7855, 0.7845,
                    0.7798, 0.7777, 0.7822, 0.7785, 0.7744, 0.7743, 0.7726, 0.7766, 0.7806, 0.785,
                    0.7907, 0.7912, 0.7913, 0.7931, 0.7952, 0.7951, 0.7928, 0.791, 0.7913, 0.7912,
                    0.7941, 0.7953, 0.7921, 0.7919, 0.7968, 0.7999, 0.7999, 0.7974, 0.7942, 0.796,
                    0.7969, 0.7862, 0.7821, 0.7821, 0.7821, 0.7811, 0.7833, 0.7849, 0.7819, 0.7809,
                    0.7809, 0.7827, 0.7848, 0.785, 0.7873, 0.7894, 0.7907, 0.7909, 0.7947, 0.7987,
                    0.799, 0.7927, 0.79, 0.7878, 0.7878, 0.7907, 0.7922, 0.7937, 0.786, 0.787,
                    0.7838, 0.7838, 0.7837, 0.7836, 0.7806, 0.7825, 0.7798, 0.777, 0.777, 0.7772,
                    0.7793, 0.7788, 0.7785, 0.7832, 0.7865, 0.7865, 0.7853, 0.7847, 0.7809, 0.778,
                    0.7799, 0.78, 0.7801, 0.7765, 0.7785, 0.7811, 0.782, 0.7835, 0.7845, 0.7844,
                    0.782, 0.7811, 0.7795, 0.7794, 0.7806, 0.7794, 0.7794, 0.7778, 0.7793, 0.7808,
                    0.7824, 0.787, 0.7894, 0.7893, 0.7882, 0.7871, 0.7882, 0.7871, 0.7878, 0.79,
                    0.7901, 0.7898, 0.7879, 0.7886, 0.7858, 0.7814, 0.7825, 0.7826, 0.7826, 0.786,
                    0.7878, 0.7868, 0.7883, 0.7893, 0.7892, 0.7876, 0.785, 0.787, 0.7873, 0.7901,
                    0.7936, 0.7939, 0.7938, 0.7956, 0.7975, 0.7978, 0.7972, 0.7995, 0.7995, 0.7994,
                    0.7976, 0.7977, 0.796, 0.7922, 0.7928, 0.7929, 0.7948, 0.797, 0.7953, 0.7907,
                    0.7872, 0.7852, 0.7852, 0.786, 0.7862, 0.7836, 0.7837, 0.784, 0.7867, 0.7867,
                    0.7869, 0.7837, 0.7827, 0.7825, 0.7779, 0.7791, 0.779, 0.7787, 0.78, 0.7807,
                    0.7803, 0.7817, 0.7799, 0.7799, 0.7795, 0.7801, 0.7765, 0.7725, 0.7683, 0.7641,
                    0.7639, 0.7616, 0.7608, 0.759, 0.7582, 0.7539, 0.75, 0.75, 0.7507, 0.7505,
                    0.7516, 0.7522, 0.7531, 0.7577, 0.7577, 0.7582, 0.755, 0.7542, 0.7576, 0.7616,
                    0.7648, 0.7648, 0.7641, 0.7614, 0.757, 0.7587, 0.7588, 0.762, 0.762, 0.7617,
                    0.7618, 0.7615, 0.7612, 0.7596, 0.758, 0.758, 0.758, 0.7547, 0.7549, 0.7613,
                    0.7655, 0.7693, 0.7694, 0.7688, 0.7678, 0.7708, 0.7727, 0.7749, 0.7741, 0.7741,
                    0.7732, 0.7727, 0.7737, 0.7724, 0.7712, 0.772, 0.7721, 0.7717, 0.7704, 0.769,
                    0.7711, 0.774, 0.7745, 0.7745, 0.774, 0.7716, 0.7713, 0.7678, 0.7688, 0.7718,
                    0.7718, 0.7728, 0.7729, 0.7698, 0.7685, 0.7681, 0.769, 0.769, 0.7698, 0.7699,
                    0.7651, 0.7613, 0.7616, 0.7614, 0.7614, 0.7607, 0.7602, 0.7611, 0.7622, 0.7615,
                    0.7598, 0.7598, 0.7592, 0.7573, 0.7566, 0.7567, 0.7591, 0.7582, 0.7585, 0.7613,
                    0.7631, 0.7615, 0.76, 0.7613, 0.7627, 0.7627, 0.7608, 0.7583, 0.7575, 0.7562,
                    0.752, 0.7512, 0.7512, 0.7517, 0.752, 0.7511, 0.748, 0.7509, 0.7531, 0.7531,
                    0.7527, 0.7498, 0.7493, 0.7504, 0.75, 0.7491, 0.7491, 0.7485, 0.7484, 0.7492,
                    0.7471, 0.7459, 0.7477, 0.7477, 0.7483, 0.7458, 0.7448, 0.743, 0.7399, 0.7395,
                    0.7395, 0.7378, 0.7382, 0.7362, 0.7355, 0.7348, 0.7361, 0.7361, 0.7365, 0.7362,
                    0.7331, 0.7339, 0.7344, 0.7327, 0.7327, 0.7336, 0.7333, 0.7359, 0.7359, 0.7372,
                    0.736, 0.736, 0.735, 0.7365, 0.7384, 0.7395, 0.7413, 0.7397, 0.7396, 0.7385,
                    0.7378, 0.7366, 0.74, 0.7411, 0.7406, 0.7405, 0.7414, 0.7431, 0.7431, 0.7438,
                    0.7443, 0.7443, 0.7443, 0.7434, 0.7429, 0.7442, 0.744, 0.7439, 0.7437, 0.7437,
                    0.7429, 0.7403, 0.7399, 0.7418, 0.7468, 0.748, 0.748, 0.749, 0.7494, 0.7522,
                    0.7515, 0.7502, 0.7472, 0.7472, 0.7462, 0.7455, 0.7449, 0.7467, 0.7458, 0.7427,
                    0.7427, 0.743, 0.7429, 0.744, 0.743, 0.7422, 0.7388, 0.7388, 0.7369, 0.7345,
                    0.7345, 0.7345, 0.7352, 0.7341, 0.7341, 0.734, 0.7324, 0.7272, 0.7264, 0.7255,
                    0.7258, 0.7258, 0.7256, 0.7257, 0.7247, 0.7243, 0.7244, 0.7235, 0.7235, 0.7235,
                    0.7235, 0.7262, 0.7288, 0.7301, 0.7337, 0.7337, 0.7324, 0.7297, 0.7317, 0.7315,
                    0.7288, 0.7263, 0.7263, 0.7242, 0.7253, 0.7264, 0.727, 0.7312, 0.7305, 0.7305,
                    0.7318, 0.7358, 0.7409, 0.7454, 0.7437, 0.7424, 0.7424, 0.7415, 0.7419, 0.7414,
                    0.7377, 0.7355, 0.7315, 0.7315, 0.732, 0.7332, 0.7346, 0.7328, 0.7323, 0.734,
                    0.734, 0.7336, 0.7351, 0.7346, 0.7321, 0.7294, 0.7266, 0.7266, 0.7254, 0.7242,
                    0.7213, 0.7197, 0.7209, 0.721, 0.721, 0.721, 0.7209, 0.7159, 0.7133, 0.7105,
                    0.7099, 0.7099, 0.7093, 0.7093, 0.7076, 0.707, 0.7049, 0.7012, 0.7011, 0.7019,
                    0.7046, 0.7063, 0.7089, 0.7077, 0.7077, 0.7077, 0.7091, 0.7118, 0.7079, 0.7053,
                    0.705, 0.7055, 0.7055, 0.7045, 0.7051, 0.7051, 0.7017, 0.7, 0.6995, 0.6994,
                    0.7014, 0.7036, 0.7021, 0.7002, 0.6967, 0.695, 0.695, 0.6939, 0.694, 0.6922,
                    0.6919, 0.6914, 0.6894, 0.6891, 0.6904, 0.689, 0.6834, 0.6823, 0.6807, 0.6815,
                    0.6815, 0.6847, 0.6859, 0.6822, 0.6827, 0.6837, 0.6823, 0.6822, 0.6822, 0.6792,
                    0.6746, 0.6735, 0.6731, 0.6742, 0.6744, 0.6739, 0.6731, 0.6761, 0.6761, 0.6785,
                    0.6818, 0.6836, 0.6823, 0.6805, 0.6793, 0.6849, 0.6833, 0.6825, 0.6825, 0.6816,
                    0.6799, 0.6813, 0.6809, 0.6868, 0.6933, 0.6933, 0.6945, 0.6944, 0.6946, 0.6964,
                    0.6965, 0.6956, 0.6956, 0.695, 0.6948, 0.6928, 0.6887, 0.6824, 0.6794, 0.6794,
                    0.6803, 0.6855, 0.6824, 0.6791, 0.6783, 0.6785, 0.6785, 0.6797, 0.68, 0.6803,
                    0.6805, 0.676, 0.677, 0.677, 0.6736, 0.6726, 0.6764, 0.6821, 0.6831, 0.6842,
                    0.6842, 0.6887, 0.6903, 0.6848, 0.6824, 0.6788, 0.6814, 0.6814, 0.6797, 0.6769,
                    0.6765, 0.6733, 0.6729, 0.6758, 0.6758, 0.675, 0.678, 0.6833, 0.6856, 0.6903,
                    0.6896, 0.6896, 0.6882, 0.6879, 0.6862, 0.6852, 0.6823, 0.6813, 0.6813, 0.6822,
                    0.6802, 0.6802, 0.6784, 0.6748, 0.6747, 0.6747, 0.6748, 0.6733, 0.665, 0.6611,
                    0.6583, 0.659, 0.659, 0.6581, 0.6578, 0.6574, 0.6532, 0.6502, 0.6514, 0.6514,
                    0.6507, 0.651, 0.6489, 0.6424, 0.6406, 0.6382, 0.6382, 0.6341, 0.6344, 0.6378,
                    0.6439, 0.6478, 0.6481, 0.6481, 0.6494, 0.6438, 0.6377, 0.6329, 0.6336, 0.6333,
                    0.6333, 0.633, 0.6371, 0.6403, 0.6396, 0.6364, 0.6356, 0.6356, 0.6368, 0.6357,
                    0.6354, 0.632, 0.6332, 0.6328, 0.6331, 0.6342, 0.6321, 0.6302, 0.6278, 0.6308,
                    0.6324, 0.6324, 0.6307, 0.6277, 0.6269, 0.6335, 0.6392, 0.64, 0.6401, 0.6396,
                    0.6407, 0.6423, 0.6429, 0.6472, 0.6485, 0.6486, 0.6467, 0.6444, 0.6467, 0.6509,
                    0.6478, 0.6461, 0.6461, 0.6468, 0.6449, 0.647, 0.6461, 0.6452, 0.6422, 0.6422,
                    0.6425, 0.6414, 0.6366, 0.6346, 0.635, 0.6346, 0.6346, 0.6343, 0.6346, 0.6379,
                    0.6416, 0.6442, 0.6431, 0.6431, 0.6435, 0.644, 0.6473, 0.6469, 0.6386, 0.6356,
                    0.634, 0.6346, 0.643, 0.6452, 0.6467, 0.6506, 0.6504, 0.6503, 0.6481, 0.6451,
                    0.645, 0.6441, 0.6414, 0.6409, 0.6409, 0.6428, 0.6431, 0.6418, 0.6371, 0.6349,
                    0.6333, 0.6334, 0.6338, 0.6342, 0.632, 0.6318, 0.637, 0.6368, 0.6368, 0.6383,
                    0.6371, 0.6371, 0.6355, 0.632, 0.6277, 0.6276, 0.6291, 0.6274, 0.6293, 0.6311,
                    0.631, 0.6312, 0.6312, 0.6304, 0.6294, 0.6348, 0.6378, 0.6368, 0.6368, 0.6368,
                    0.636, 0.637, 0.6418, 0.6411, 0.6435, 0.6427, 0.6427, 0.6419, 0.6446, 0.6468,
                    0.6487, 0.6594, 0.6666, 0.6666, 0.6678, 0.6712, 0.6705, 0.6718, 0.6784, 0.6811,
                    0.6811, 0.6794, 0.6804, 0.6781, 0.6756, 0.6735, 0.6763, 0.6762, 0.6777, 0.6815,
                    0.6802, 0.678, 0.6796, 0.6817, 0.6817, 0.6832, 0.6877, 0.6912, 0.6914, 0.7009,
                    0.7012, 0.701, 0.7005, 0.7076, 0.7087, 0.717, 0.7105, 0.7031, 0.7029, 0.7006,
                    0.7035, 0.7045, 0.6956, 0.6988, 0.6915, 0.6914, 0.6859, 0.6778, 0.6815, 0.6815,
                    0.6843, 0.6846, 0.6846, 0.6923, 0.6997, 0.7098, 0.7188, 0.7232, 0.7262, 0.7266,
                    0.7359, 0.7368, 0.7337, 0.7317, 0.7387, 0.7467, 0.7461, 0.7366, 0.7319, 0.7361,
                    0.7437, 0.7432, 0.7461, 0.7461, 0.7454, 0.7549, 0.7742, 0.7801, 0.7903, 0.7876,
                    0.7928, 0.7991, 0.8007, 0.7823, 0.7661, 0.785, 0.7863, 0.7862, 0.7821, 0.7858,
                    0.7731, 0.7779, 0.7844, 0.7866, 0.7864, 0.7788, 0.7875, 0.7971, 0.8004, 0.7857,
                    0.7932, 0.7938, 0.7927, 0.7918, 0.7919, 0.7989, 0.7988, 0.7949, 0.7948, 0.7882,
                    0.7745, 0.771, 0.775, 0.7791, 0.7882, 0.7882, 0.7899, 0.7905, 0.7889, 0.7879,
                    0.7855, 0.7866, 0.7865, 0.7795, 0.7758, 0.7717, 0.761, 0.7497, 0.7471, 0.7473,
                    0.7407, 0.7288, 0.7074, 0.6927, 0.7083, 0.7191, 0.719, 0.7153, 0.7156, 0.7158,
                    0.714, 0.7119, 0.7129, 0.7129, 0.7049, 0.7095
                ]
            }]
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:54:56.103

您似乎混淆了一些设置。您正在指定列，但为面积图定义选项。

如果您想要渐变填充，则指定图表类型为“区域”。如果您想要柱形图，请使用柱形图设置，如 pointPadding、borderWidth 和 groupPadding。

但是，您的示例的主要问题是点数。您需要指定大约 2000 像素的 div 宽度，然后才能开始查看具有那么多点的各个列的详细信息。

我建议将较少的数据显示为列，或使用面积图。

# c++ - 相邻查找未检测到最后两个元素

> ID：15693540
> 
> 赞同：0
> 
> 时间：2013-03-28T22:50:12.870
> 
> 标签：c++

假设我有一个包含元素 1、2、3、4、5、5 的向量，并且我有这样的代码。

它 = std::adjacent_find (myvector.begin(), myvector.end());

这不会检测到最后匹配的元素。这是预期的行为吗？

[编辑]添加代码

```
int main () {
  int myints[] = {1,2,3,4,5,5};
  std::vector<int>::iterator it;
  std::vector<int> myvector (myints,myints+5);

  // using default comparison:
  it = std::adjacent_find (myvector.begin(), myvector.end());

  if (it!=myvector.end())
    std::cout << "the first pair of repeated elements are: " << *it << '\n';

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:54:52.133

```
std::vector<int> myvector (myints,myints+5); 
```

你错过了你的元素之一。这应该是：

```
std::vector<int> myvector (myints,myints+6); 
```

这是因为构造函数的第二个参数应该指向要复制的序列末尾之后的一个。

请注意，使用 C++11，您可以`std::vector`直接使用以下命令进行初始化：

```
std::vector<int> myvector = {1,2,3,4,5,5}; 
```

# android - Android：Imagebutton不显示为实际图像的大小

> ID：15693541
> 
> 赞同：0
> 
> 时间：2013-03-28T22:50:17.447
> 
> 标签：android, imagebutton

我有一个带有小图像的图像按钮，但是我似乎无法让图像以其实际大小出现在屏幕上。它不断被放大以适应按钮的大小。

我发现一些看起来应该可以解决这个问题的代码，但现在它只是导致图像根本不出现。

我正在以编程方式进行操作，所以这就是我到目前为止所拥有的。

```
 moreInfo.setImageResource(R.drawable.info);
            moreInfo.setBackgroundDrawable(null);
          //had thought that these lines would have fixed it but just cause nothing to display
                moreInfo.setMaxHeight(20);
                moreInfo.setMaxWidth(20);
                moreInfo.setAdjustViewBounds(true);
         //end of
            moreInfoLP.setMargins(2,2,5,0);
            moreInfo.setLayoutParams(moreInfoLP); 
```

# javascript - 更新 iframe 内的 href

> ID：15693543
> 
> 赞同：0
> 
> 时间：2013-03-28T22:50:37.560
> 
> 标签：javascript, html, iframe

单击以下链接时会弹出一个模式。

```
<a href="">Link</a> 
```

模态的内容来自 iframe。现在，当用户单击我想将用户重定向到 URL 的链接时，我在 iframe 中有一个锚链接。我试过 window.top.location.href='www.google.com' 但没有用。

我有关闭模式的代码，但如果我做类似的事情

```
 <a href="www.google.com" onclick="parent.closemodal();">iFrame
 Link</a> 
```

它不起作用。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:53:32.700

```
<a id="tagID" href="www.google.com" onclick="parent.closemodal();">iFrame Link</a> 
```

用于`document.location`更改您当前所在页面的 URL

```
$("#tagID").on("click", function(){
 document.location = "somepage.html";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:53:59.773

www.google.com 阻止在 iframe 中查看其主页。小提琴：http: [//jsfiddle.net/JAPkJ/](http://jsfiddle.net/JAPkJ/)。( `<iframe src="http://www.google.com"></iframe>`) 根据控制台，

```
Refused to display 'https://www.google.com/' in a frame because it set 'X-Frame-Options' to 'SAMEORIGIN'. 
```

要更改从 iframe 内的页面加载的页面的 URL，请使用以下命令：

```
document.location="http://www.example.com" 
```

# neural-network - 训练具有大线性输出的神经网络

> ID：15693545
> 
> 赞同：1
> 
> 时间：2013-03-28T22:50:47.957
> 
> 标签：neural-network, backpropagation, reinforcement-learning

我正在编写一个前馈神经网络，我想将它与强化学习结合使用。我有一个以 tanh 作为激活函数的隐藏层和一个线性输出层。

我有三个归一化为 [0,1] 的输入。还有三个输出节点，它给出了从环境中获得的奖励。回报总是负面的。At the beginning, when the chosen actions lead to bad decisions, it can be like -50000, with good decisions it can be -5.

我正在努力实现反向传播。由于奖励如此之大，因此误差值很大，从而产生了巨大的权重。经过几轮训练，隐藏层的权重如此之大，我在隐藏层中的节点只创建了值 -1 或 1。

这是我的代码：

```
public void trainState(double[] observation, double[] hiddenEnergy, double oldVal, int chosenAction, double target, double lambda)
{
    double deltaK = (target - oldVal) * lambda;
    double deltaJ;

    for (int j = 0; j < _hiddenSize; j++)
    {
        deltaJ = (1- hiddenEnergy[j] * hiddenEnergy[j]) * deltaK * _toOutputWeights[j][chosenAction];

        for (int i = 0; i < _inputSize; i++)
        {
            _toHiddenWeights[i][j] += deltaJ * observation[i];
        }
    }

    for (int i = 0; i < _hiddenSize; i++)
    {
        _toOutputWeights[i][chosenAction] += deltaK * hiddenEnergy[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:59:11.097

你说：“既然奖励这么*大*，那么误差值就*很大*，这就产生了巨大的权重。”

强调我的

我建议使用奖励日志。这是控制巨大值的数学标准技巧。这样，您的错误和权重将更易于管理。

```
log_of_rewards = log(rewards);
// use this value in calculations 
```

# opengl-es - OpenGL ES 2.0 对象的旋转变换

> ID：15693546
> 
> 赞同：1
> 
> 时间：2013-03-28T22:51:09.903
> 
> 标签：opengl-es, opengl-es-2.0

为了应用旋转变换矩阵，我是否只需将旋转矩阵乘以单位矩阵并将该矩阵传递回着色器？我希望能够将我的对象沿 X 轴旋转 90 度。我知道 PVR 工具已经有一个可以做到这一点的功能，但我只是想确认我是否将我的旋转矩阵乘以下面的 mMVP 矩阵。谢谢

```
 bool OGLESIntroducingPVRTools::RenderScene()
{
    // Clears the color and depth buffer
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Binds the loaded texture
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, m_uiTexture[0]);

    glActiveTexture(GL_TEXTURE1);
    glBindTexture(GL_TEXTURE_2D, m_uiTexture[1]);

    // Use the loaded shader program
    glUseProgram(m_ShaderProgram.uiId);

    /*
        Creates the Model View Projection (MVP) matrix using the PVRTMat4 class from the tools.
        The tools contain a complete set of functions to operate on 4x4 matrices.
    */
    PVRTMat4 mMVP = PVRTMat4::Identity();

    if(PVRShellGet(prefIsRotated) && PVRShellGet(prefFullScreen)) // If the screen is rotated
        mMVP = PVRTMat4::RotationZ(-1.57f);

    /*
        Pass this matrix to the shader.
        The .m field of a PVRTMat4 contains the array of float used to
        communicate with OpenGL ES.
    */
    glUniformMatrix4fv(m_ShaderProgram.auiLoc[eMVPMatrix], 1, GL_FALSE, mMVP.ptr());

    /*
        Draw a triangle.
        Please refer to the training course IntroducingPVRShell for a detailed explanation.
    */

    // Bind the VBO
    glBindBuffer(GL_ARRAY_BUFFER, m_ui32Vbo);

    // Pass the vertex data
    glEnableVertexAttribArray(VERTEX_ARRAY);
    glVertexAttribPointer(VERTEX_ARRAY, 3, GL_FLOAT, GL_FALSE, m_ui32VertexStride, 0);

    // Pass the texture coordinates data
    glEnableVertexAttribArray(TEXCOORD_ARRAY);
    glVertexAttribPointer(TEXCOORD_ARRAY, 2, GL_FLOAT, GL_FALSE, m_ui32VertexStride, (void*) (sizeof(GLfloat) * 3) /* Uvs start after the position */);

    // Draws a non-indexed triangle array
    glDrawArrays(GL_TRIANGLES, 0, 6);

    return true;
} 
```

# xslt - 如何使用 xslt 选择第一次出现的节点

> ID：15693547
> 
> 赞同：5
> 
> 时间：2013-03-28T22:51:29.170
> 
> 标签：xslt, xpath

我有一个像这样的xml：

```
<bookstores>
    <bookstore>
        <book id="1">
            <author>ABC</author> 
        </book>
        <book id="2">
            <title>YYY</title> 
        </book>
    </bookstore>
    <bookstore>
        <book id="3">
            <author>ABC</author> 
        </book>
        <book id="4">
            <author>DEF</author> 
        </book>
    </bookstore>
    <bookstore>
        <book id="5">
            <price>50</price>
        </book>
        <book id="6">
            <title>ZZZ</title> 
        </book>
    </bookstore>
</bookstores> 
```

我想选择“书”节点的子节点的第一次出现，或者换句话说，“书”节点的所有唯一子节点。

所以输出应该是这样的：

```
author
title
price 
```

我写了一个xslt：

```
<xsl:for-each select="bookstores/bookstore/book"> 
    <xsl:if test="count(preceding-sibling::*[1]) = 0">
        <xsl:value-of select="local-name(*[1])"/>
    </xsl:if>
</xsl：for-each> 
```

它没有给我任何回报......有人可以帮我解决这个问题吗？谢谢！！

**更新：**

如果我的 xml 中有几个“书店”元素，我只想限制每个“书店”上下文中的唯一性，以便即使“作者”出现在一个“书店”中，如果它仍然可以显示出现在另一个“书店”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:17:18.973

如果您使用的是 XSLT1.0，那么获取不同元素的方法是使用一种称为 Muenchian Grouping 的技术。在您的情况下，您想按书籍子元素“分组”，所以首先，您定义一个键来按元素名称查找书籍的子元素

```
 <xsl:key name="child" match="book/*" use="local-name()" /> 
```

要获得不同的名称，您可以查看所有 book 子元素，但只输出在组中最先出现的为其给定名称的元素。你可以使用这个可怕的语句来做到这一点：

```
<xsl:apply-templates 
   select="//book/*[generate-id() = generate-id(key('child', local-name())[1])]" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>
   <xsl:key name="child" match="book/*" use="local-name()" />

   <xsl:template match="/">
      <xsl:apply-templates select="//book/*[generate-id() = generate-id(key('child', local-name())[1])]" />
   </xsl:template>

   <xsl:template match="//book/*">
      <xsl:value-of select="concat(local-name(), '&#10;')" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
author
title
price 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T02:08:54.867

**更短/更简单——完全采用“推式”：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:key name="kBChildrenByName" match="book/*" use="name()"/>

 <xsl:template match=
  "book/*[generate-id()=generate-id(key('kBChildrenByName', name())[1])]">
     <xsl:value-of select="concat(name(), '&#xA;')"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<bookstores>
    <bookstore>
        <book id="1">
            <author>ABC</author>
        </book>
        <book id="2">
            <title>YYY</title>
        </book>
    </bookstore>
    <bookstore>
        <book id="3">
            <author>ABC</author>
        </book>
        <book id="4">
            <author>DEF</author>
        </book>
    </bookstore>
    <bookstore>
        <book id="5">
            <price>50</price>
        </book>
        <book id="6">
            <title>ZZZ</title>
        </book>
    </bookstore>
</bookstores> 
```

**产生了想要的正确结果：**

```
author
title
price 
```

**说明**：

适当使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T23:01:40.130

您可以使用 `<xsl:for-each select="//book">`来选择事件

# sqlite - 如何计算 SQLite 格式 3 数据库文件长度？

> ID：15693548
> 
> 赞同：0
> 
> 时间：2013-03-28T22:51:33.890
> 
> 标签：sqlite

我有一个 SQLite 格式 3 数据库文件，末尾附加了很多垃圾字节。它不会与那里的垃圾一起加载到我的 SQLite 数据库浏览器中。

我刚刚阅读了此文件类型的规范。这里：[http ://www.sqlite.org/fileformat.html](http://www.sqlite.org/fileformat.html)

我尝试将页面大小乘以页数，但正如我所料，即使我尝试计算已知文件长度的数据库的大小，这也没有给我想要的结果。

有没有办法从文件头或任何其他方法计算实际数据库的文件大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:04:47.780

当数据库文件有效时，偏移量 28 处的值指定页面大小。

当数据库文件损坏时，文件内容不能被信任。如果标头仍然有效，则文件大小值可能显示文件损坏之前的大小。

请注意，仅*附加*垃圾不会使数据库文件不可读；您文件中的实际数据可能会丢失。

# php - 从查询返回的 MySQL 数据是否缓冲？

> ID：15693552
> 
> 赞同：0
> 
> 时间：2013-03-28T22:51:40.860
> 
> 标签：php, mysql, sql

如果我使用 SELECT 语句运行 mysql_query()，那么当我处理所有记录时，另一个进程会修改结果集中的一些数据，这些数据尚未处理。使用 mysql_fetch_row() 获取旧数据还是更新数据？

例如：
表：

```
id data
1  a
2  b
3  c
4  d 
```

我已经处理了第 1 行和第 2 行，然后是*id*为3的行并将*数据*更改为**e**
调用 mysql_fetch_row() 会给我一个*数据*等于**c**或**e**的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:54:27.997

使用[`mysql_query`](http://www.php.net/manual/en/function.mysql-query.php)结果将被缓冲。如果您希望它不受缓冲，那么您将使用[`mysql_unbuffered_query`](http://www.php.net/manual/en/function.mysql-unbuffered-query.php)，但请记住以下几点：

> **mysql_unbuffered_query()**的好处是有代价的：在获取所有行之前，您不能对从**mysql_unbuffered_query()返回的结果集使用**[mysql_num_rows()](http://www.php.net/manual/en/function.mysql-num-rows.php)和 mysql_data_seek() 。您还必须从无缓冲的 SQL 查询中获取所有结果行，然后才能使用相同的 *link_identifier* 向 MySQL 发送新的 SQL 查询。

 **虽然，你不应该再使用`mysql`函数了，无论如何......**

# ios - 如何在 iOS 应用程序中获取蜂窝 IP 地址

> ID：15693556
> 
> 赞同：3
> 
> 时间：2013-03-28T22:51:58.463
> 
> 标签：ios, objective-c, ip-address

我喜欢在我的应用程序中显示 IP 地址，我已经知道如何显示 WiFi IP 地址，但是当我在 callular 时它会显示错误，那么有没有一种方法可以在 iPhone 上显示蜂窝 IP 地址？

这是我用于 WiFi IP 地址的代码：

```
NSString *address = @"error";
    struct ifaddrs *interfaces = NULL;
    struct ifaddrs *temp_addr = NULL;
    int success = 0;

    // retrieve the current interfaces - returns 0 on success
    success = getifaddrs(&interfaces);
    if (success == 0) {
        // Loop through linked list of interfaces
        temp_addr = interfaces;
        while (temp_addr != NULL) {
            if( temp_addr->ifa_addr->sa_family == AF_INET) {
                // Check if interface is en0 which is the wifi connection on the iPhone
                if ([[NSString stringWithUTF8String:temp_addr->ifa_name] isEqualToString:@"en0"]) {
                    // Get NSString from C String
                    address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)];
                }
            }

            temp_addr = temp_addr->ifa_next;
        }
    }

    // Free memory
    freeifaddrs(interfaces);

    NSLog(address); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-29T09:44:28.870

我终于成功了，我正在使用以下代码：

```
struct ifaddrs *interfaces = NULL;
    struct ifaddrs *temp_addr = NULL;
    NSString *wifiAddress = nil;
    NSString *cellAddress = nil;

    // retrieve the current interfaces - returns 0 on success
    if(!getifaddrs(&interfaces)) {
        // Loop through linked list of interfaces
        temp_addr = interfaces;
        while(temp_addr != NULL) {
            sa_family_t sa_type = temp_addr->ifa_addr->sa_family;
            if(sa_type == AF_INET || sa_type == AF_INET6) {
                NSString *name = [NSString stringWithUTF8String:temp_addr->ifa_name];
                NSString *addr = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)]; // pdp_ip0
                //NSLog(@"NAME: \"%@\" addr: %@", name, addr); // see for yourself

                if([name isEqualToString:@"en0"]) {
                    // Interface is the wifi connection on the iPhone
                    wifiAddress = addr;
                } else
                    if([name isEqualToString:@"pdp_ip0"]) {
                        // Interface is the cell connection on the iPhone
                        cellAddress = addr;
                    }
            }
            temp_addr = temp_addr->ifa_next;
        }
        // Free memory
        freeifaddrs(interfaces);
    }
    NSString *addr = wifiAddress ? wifiAddress : cellAddress;

    NSLog(addr); 
```

# mysql - MySQL：加入 HABTM 表，然后使用结果计数更新列

> ID：15693558
> 
> 赞同：0
> 
> 时间：2013-03-28T22:52:04.157
> 
> 标签：mysql, join, iteration, has-and-belongs-to-many

我想做的事情必须广泛适用，但很难描述，所以我将给出我的情况的虚拟版本（假装帖子有时是合着的）：

```
Table A: Users

id  |  name  |...demographics....|  post_count | draft_count 
```

和

```
Table B: Posts

id  |  title  |...bunch of columns...| is_draft 
```

同时

```
Table C: Users_Posts

id  | user_id  | post_id 
```

现在让我们假设刚刚添加了`post_count`and`draft_count`列——有数千个`posts`and `users`。我想填充那些列！我可以做到这一点：

```
SELECT count(*) FROM `people` 
    JOIN `users_posts` ON `users`.`id`=`users_posts`.`users_id`
    JOIN `posts` ON `users_posts`.`post_id`=`posts`.`id`
    WHERE `posts`.`is_draft` = 1 AND `users`.`id`= N 
```

这给了我希望更新`user` *N*`draft_count`字段的数字。但我不确定如何将整个事情作为语句中的一个子句`UPDATE`。我已经阅读了如何在 MySQL 中进行迭代，我想我明白了，所以如果我能让它工作，我想我可以为每个`user`. 此外，虽然我可以在 PHP 中轻松实现这一点，但我需要定期运行它，因为可能只会对这些表进行批量添加（显然，IRL 应用程序不是博客）。再一次，我已经阅读了如何创建自定义 MySQL 函数，我想我可以做到这一点，如果我能让这个该死的更新业务工作哈哈。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:04:18.870

```
UPDATE users
JOIN (
    SELECT COUNT(posts.id) as draft_count, users_posts.users_id
    FROM posts 
    JOIN users_posts ON users_posts.post_id = posts.id
    WHERE posts.is_draft = 1
    GROUP BY users_posts.users_id
) as draft_counts ON users.id = draft_counts.users_id
SET users.draft_count = draft_counts.draft_count 
```

如果您有很多行，使用临时表可能会更快。

# android - Android 月球着陆器双同步

> ID：15693559
> 
> 赞同：0
> 
> 时间：2013-03-28T22:52:25.050
> 
> 标签：android, thread-safety

我正在研究`LunarView`Java Lunar Lander 示例（API-8 版本）的一些代码。我注意到了这个奇怪的地方：

```
public synchronized void restoreState(Bundle savedState) {
            synchronized (mSurfaceHolder) {
                        // ...
            }
} 
```

为什么要双同步？第一次同步不是已经保证一次只有一个线程可以进入这个方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:13:09.570

不。

内部同步块锁定到 mSurfaceHolder 对象，而在方法上使用同步关键字锁定到类实例本身。

synchronized 关键字基本上就像在实例对象上使用锁..

```
public synchronized void doSomething()
{
    // Do some stuff
} 
```

和...完全一样

```
public void doSomething()
{
    synchronized (this)
    {
        // Do some stuff
    }
} 
```

锁定到一个对象意味着如果一段同步代码正在执行，并且锁定了一个特定的对象，那么任何其他同步的代码（使用相同的对象作为锁定）将不得不等到第一个完成。

# jquery - 展开 div，固定在右中心点

> ID：15693561
> 
> 赞同：0
> 
> 时间：2013-03-28T22:52:44.577
> 
> 标签：jquery, css, jquery-animate, position

这是我的例子：http: [//jsfiddle.net/lcssanches/qtaUA/](http://jsfiddle.net/lcssanches/qtaUA/)

```
$(" .inner_left, .inner_right ").hover(function() {
        $(this).css("z-index", "99999");
        $(this).stop(true,false).animate({ width: "240px",height: "180px" }, 250);
        $(this).css("background-color", "#D0D0D0");
    },function() {
        $(this).css("z-index", "");
        $(this).stop(true,false).animate({ width: "125px",height: "130px"   }, 250);
        $(this).css("background-color", "#ffffff");
}); 
```

我有 3 个 div，就像一列有 3 行。

当悬停在第**一个**div 时，它从上到下和从右到左增长

悬停在**第三个**div时，从下到上，从右到左增长

问题是第二行中的 div 。它需要部分向上生长，部分向下生长。但固定在中心。现在，在示例中它只从上到下增长。

我已经尝试将“top：-25px”放入 jQuery 动画中，但它会进入包装器的顶部。

谢谢

对不起，如果我选择了错误的词来解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:19:35.153

试试`top-=25px;`。如果您这样做`top:-25px`，则将其设置为超出页面顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T00:12:24.350

您的代码中的以下修改将解决您的问题。

请注意，此解决方案特定于您提供的绝对数字和您提供的代码。

您可以轻松地对其进行调整以使其更短，并使其在您的解决方案中动态工作。

我的目的是向您展示如何解决这个问题。

HTML部分：

```
<div class="wrapper">

    <div class="menu_right">
        <div class="item_right"><div class="inner_right"  style="top: 0px; right:0px;"><a href="#">1</a></div></div>
        <div class="item_right"><div class="inner_right" id="middleRow" style="top: 130px;  right:0px;"><a href="#">2</a></div></div>
        <div class="item_right" ><div class="inner_right"  style="bottom: 0px; right:0px;"><a href="#">3</a></div></div>
    </div>
</div> 
```

JavaScript 部分：

```
$(" .inner_left, .inner_right ").hover(function() {
    var currentId = $(this).attr('id');
    if (currentId == "middleRow")  {
        var topPos = $(this).position().top - 25;
        var topPosPx = topPos + "px"; //or you could simply put 105px here specific to your code
        $(this).css("z-index", "99999");
        $(this).stop(true,false).animate({ width: "240px",height: "180px", top: topPosPx }, 250);
        $(this).css("background-color", "#D0D0D0");
    }
    else {
        $(this).css("z-index", "99999");
        $(this).stop(true,false).animate({ width: "240px",height: "180px" }, 250);
        $(this).css("background-color", "#D0D0D0");
    }
},function() {
        var currentId = $(this).attr('id');
    if (currentId == "middleRow")  {
        $(this).css("z-index", "");
        $(this).stop(true,false).animate({ width: "125px",height: "130px", top: "130px"   }, 250);
        $(this).css("background-color", "#ffffff");
    }
    else  {
        $(this).css("z-index", "");
        $(this).stop(true,false).animate({ width: "125px",height: "130px"   }, 250);
        $(this).css("background-color", "#ffffff");
    }
}); 
```

对于 CSS，不需要对 jsfiddle.net 代码中提供的 css 进行任何更改。

# sql - 将电话号码格式转换为“XXX-XXX-XXXX”

> ID：15693562
> 
> 赞同：0
> 
> 时间：2013-03-28T22:52:44.950
> 
> 标签：sql, syntax, teradata

我有一些我在 Teradata 中编写的代码，它们连接了 2 个单独的表：

```
SELECT
A.*,
B.MTN_1

FROM
TABLE_1 AS A

JOIN
TABLE_2 AS B
ON A.ACCT_NUM=B.ACCT_NUM

WHERE A.MTN=B.MTN_1 
```

唯一的问题是，MTN_1 是`999-999-9999 (VARCHAR)`格式。MTN 是`9999999999 (Character Fixed)`格式的。如何更改字符固定格式以匹配 999-999-9999 格式，以便可以在连接条件中使用列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:55:14.977

使用替换功能：

```
SELECT A.*, B.MTN_1
FROM TABLE_1 AS A
JOIN TABLE_2 AS B ON A.ACCT_NUM=B.ACCT_NUM
WHERE A.MTN=REPLACE(B.MTN_1,"-","") 
```

使用没有替换功能的 Teradata 时，可以使用 substr 和连接运算符：

```
SELECT A.*, B.MTN_1
FROM TABLE_1 AS A
JOIN TABLE_2 AS B ON A.ACCT_NUM=B.ACCT_NUM
WHERE A.MTN=SUBSTR(B.MTN_1,1,3) || SUBSTR(B.MTN_1,5,3) || SUBSTR(B.MTN_1,9,4) 
```

# android - AndEngine - 从场景类中销毁身体？

> ID：15693564
> 
> 赞同：0
> 
> 时间：2013-03-28T22:52:51.297
> 
> 标签：android, box2d, andengine

我有一个扩展场景的类，它控制游戏。在我的 ContactListener 中，我有：

```
if (x1.getBody().getUserData().equals("wall")
                        && x2.getBody().getUserData().equals("arrow")) {
                    System.out.println("arrow is x2");
                } 
```

当箭头 x2 与墙 x1 碰撞时，我希望箭体被破坏。它们发生碰撞，但我当然不能从 ContactListener 中破坏它。由于这个类扩展了场景，我怎么能在其中获得更新或运行方法（我在此看到的所有其他帖子都有扩展 BaseGameActivity 的类），或者以其他方式破坏 x2 主体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:59:20.417

我有一个解决方案给你。

创建场景时，将 BaseGameActivity 引用传递给它。像下面这样

```
new GameScene(MainActivity mainAcivity); 
```

然后在删除 box2d 对象后，您必须使用此参考。

```
mainActivity.runOnUpdateThread(){  
    public void run(){
          mPhysicsWorld.destroyBody(arrowBody);
    }
} 
```

# python - Shell 脚本在 Jenkins 启动时具有不同的行为

> ID：15693565
> 
> 赞同：1
> 
> 时间：2013-03-28T22:53:18.933
> 
> 标签：python, testing, jenkins, distributed

我需要执行大量脚本，每个脚本都在单独的机器上。我正在尝试使用 Jenkins 来做到这一点。我有一个 Python 脚本，它可以执行单个测试并处理时间限制和测试结果的收集，还有一些 Jenkins 作业使用不同的参数运行这个 Python 脚本。当我从命令行运行此脚本时，它工作正常。但是当我通过 Jenkins（使用完全相同的参数）运行脚本时，测试超时。该脚本处理终止测试，因此控制权一直返回给 Jenkins，一切都被清理干净。我该如何调试呢？Python 脚本使用 subprocess.popen 来启动测试。

作为旁注，我愿意接受有关如何更好地做到这一点的建议，无论有没有 Jenkins 和我的 Python 脚本。我只需要在不同的机器上运行一堆脚本并收集它们的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:10:17.397

我解决了自己的问题，即使它有点极端，我仍然会在这里回答。Jenkins 启动的脚本本身启动了一个使用 ThreadedTCPServer 的线程 Python 服务器，或多或少地从[这里](http://docs.python.org/2/library/socketserver.html)实现。那个线程服务器没有正确退出，所以它留下了一些管道打开。尽管服务器进程死亡，但泄漏的管道使 Jenkins 无法正确确定该进程已结束（Jenkins 等待来自子进程的 EOF 以确定该进程是否完成）。解决方案是重新实现正确退出的套接字服务器。希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:06:16.600

要调试这个：

*   添加`set -x`到 shell 脚本的顶部。
*   设置一个 PS4，它在调用时打印每行的行号：`PS4='+ $BASH_SOURCE:$FUNCNAME:$LINENO:'`
*   尤其要查找您的脚本假定环境变量在 Hudson 运行时未设置的任何地方。

如果您的 Python 脚本重定向 stderr（其中的日志`set -x`被定向）并且不将其传递给 Hudson（因此不记录它），您可以将其重定向到脚本中的文件：`exec 2>>logfile`

顺便说一句，除了 Jenkins 之外，还有许多工具可以在多台机器上启动工作；[MCollective](https://puppetlabs.com/mcollective/)（如果你已经使用了 Puppet，效果很好），[knife ssh](http://docs.opscode.com/knife.html)（如果你使用 Chef，你已经拥有了 - 在我不那么谦虚的意见中，你应该这样做！），[Rundeck](http://rundeck.org/)（有一个时髦的网络UI，但在修复[此安全错误](https://github.com/dtolabs/rundeck/issues/298)之前不应被任何人使用）、[Fabric](http://fabfile.org/)（如果您还没有 mcollective 或刀，这是一个非常好的选择）等等。

# ios - 如何使用 Monotouch 和 XCode 4.5+ 编译 armv6

> ID：15693577
> 
> 赞同：1
> 
> 时间：2013-03-28T22:54:12.747
> 
> 标签：ios, xcode, xamarin.ios, armv6

通过将先前的 SDK 安装到 XCode 中，可以在较新版本的 XCode（4.5+）中为 armv6 编译。见[http://blog.chpwn.com/post/31824877081](http://blog.chpwn.com/post/31824877081)

当想要开发具有不同平台目标和功能集的不同应用程序时，这很有用。

如何使用较新版本的 XCode（但较旧的 SDK）将 Monotouch 应用程序编译为 armv6？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:44:38.920

Xamarin.iOS (MonoTouch) 并不真正依赖于特定的 Xcode，但有些东西会随着安装的版本自行调整。

您不需要破解您当前安装的 Xcode（太多事情可能出错），但您可以并排安装多个版本的 Xcode，例如，我在同一台 Lion 笔记本电脑上安装了 4.2、4.3、4.4 和 4.5。在安装新的之前，只需重命名安装在默认位置的那个。

当您选择旧的 Xcode（来自 Xamarin Studio，或更旧的 MonoDevelop 版本，首选项）时，它应该调整为*正确*的功能。IOW 一旦安装了 4.4（并设置为默认值），那么 ARMv6 应该可用。

# c# - C# ping 我的世界

> ID：15693583
> 
> 赞同：8
> 
> 时间：2013-03-28T22:54:55.527
> 
> 标签：c#, php, ping, minecraft

所以找到了这个小代码片段，它可以让你在 PHP 中 ping Minecraft 服务器，但现在我想在 C# 中执行此操作。

我尝试自己做这个，但由于某种原因它只是不工作

```
 UdpClient client = new UdpClient();
        IPEndPoint ep;
        try
        {
            ep = new IPEndPoint(IPAddress.Parse("-snip-"), -snip-);
            client.Connect(ep);
        }
        catch { Console.WriteLine("Error"); Console.ReadLine(); return; }
        byte[] bytes = new byte[1];
        bytes[0] = (byte)0xFE;
        client.Send(bytes, bytes.Length);
        IPEndPoint rep = new IPEndPoint(IPAddress.Any, 0);
        byte[] recv = client.Receive(ref rep);
        Console.WriteLine(ASCIIEncoding.ASCII.GetString(recv));
        Console.ReadLine(); 
```

服务器似乎完全忽略了数据包。这是我找到的代码片段：

```
 $fp = fsockopen($host, $port, $errno, $errstr, $timeout);
    if (!$fp) return false;

    //Send 0xFE: Server list ping

    fwrite($fp, "\xFE");

    //Read as much data as we can (max packet size: 241 bytes)
    $d = fread($fp, 256);

    //Check we've got a 0xFF Disconnect
    if ($d[0] != "\xFF") return false; 
```

谁能指出我犯了什么错误？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T22:58:32.800

[如此处](http://wiki.vg/Server_List_Ping)所述

> 客户端在标准端口上启动与 minecraft 服务器的**TCP**连接。它没有进行身份验证和登录（如协议加密中详述），而是发送两个字节序列 FE 01。这是一个 0xFE 服务器列表 ping 数据包。如果第二个字节（0x01）丢失，服务器会等待大约 1000 毫秒，然后使用 1.3 和更早版本中使用的服务器 -> 客户端格式进行回复。

您需要在发送 UDP 数据包时发送 TCP 请求...

# c++ - 快速稀疏矩阵乘法

> ID：15693584
> 
> 赞同：21
> 
> 时间：2013-03-28T22:55:00.507
> 
> 标签：c++, matrix, linear-algebra, sparse-matrix, matrix-multiplication

对于课程，我必须为稀疏矩阵编写自己的线性方程求解器。对于稀疏矩阵，我可以自由使用任何类型的数据结构，并且我必须实现几个解决方案，包括共轭梯度。

我想知道是否有一种著名的方法来存储稀疏矩阵，使得与向量的乘法相对较快。

现在我的稀疏矩阵基本上实现了一个包装`std::map< std::pair<int, int>, double>`来存储数据，如果有的话。这将矩阵的乘法从向量转换为 O(n²) 复杂度到 O(n²log(n))，因为我必须对每个矩阵元素执行查找。我研究了耶鲁稀疏矩阵格式，似乎元素的检索也在 O(log(n)) 中，所以我不确定它是否会更快。

作为参考，我有一个 800x800 矩阵，其中填充了 5000 个条目。用共轭梯度法求解这样一个系统大约需要 450 秒。

您认为使用另一种数据结构可以更快地做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T22:57:17.033

最常见的选择是[CSC 或 CSR 存储](http://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_.28CSR_or_CRS.29)。这些对于矩阵向量乘法都很有效。如果您必须自己编写这些乘法例程，也很容易编写代码。

也就是说，耶鲁存储也产生了非常有效的矩阵向量乘法。如果您正在执行矩阵元素查找，那么您误解了如何使用该格式。我建议你研究一些标准的稀疏库来了解矩阵向量乘法是如何实现的。

即使使用您当前的存储，您也可以以 O(n) 复杂度执行矩阵乘法。我见过的所有稀疏矩阵向量乘法算法都归结为相同的步骤。例如，考虑 y = Ax。

1.  将结果向量 y 归零。
2.  为矩阵 A 的非零元素初始化一个迭代器。
3.  获取矩阵的下一个非零元素 A[i,j] 说。请注意， i,j 的模式不遵循常规模式。它只是反映了 A 的非零元素的存储顺序。
4.  y[i] += A[i,j]*x[j]
5.  如果 A 的元素更多，则转到 3。

我怀疑您正在编写经典的 double for 循环密集乘法代码：

```
for (i=0; i<N; i++)
    for (j=0; j<N; j++)
        y[i] += A[i,j]*x[j] 
```

这就是导致您执行查找的原因。

但我并不是建议您坚持使用`std::map`存储空间。这不会是超级有效的。我推荐 CSC 主要是因为它使用最广泛。

# pointers - 如何在 Go 中将动态创建的结构作为非指针对象传递

> ID：15693590
> 
> 赞同：3
> 
> 时间：2013-03-28T22:55:31.763
> 
> 标签：pointers, reflection, go

我正在尝试将参数动态传递给 URL 路由处理程序函数。我认为可以使用反射包将值映射从 URL 转换为具有一个参数的函数，该参数恰好是匿名结构。我已经创建了要传递给处理函数的结构，但它最终成为了一个指向该结构的指针。我认为，如果我更改处理函数的签名以期望指针，则创建的结构最终会成为指向指针的指针。无论如何，这是代码（恐慌如下）：

链接：[http ://play.golang.org/p/vt_wNY1f08](http://play.golang.org/p/vt_wNY1f08)

```
package main

import (
    "errors"
    "fmt"
    "net/http"
    "reflect"
    "strconv"
    "github.com/gorilla/mux"
)

func mapToStruct(obj interface{}, mapping map[string]string) error {
    dataStruct := reflect.Indirect(reflect.ValueOf(obj))

    if dataStruct.Kind() != reflect.Struct {
        return errors.New("expected a pointer to a struct")
    }

    for key, data := range mapping {
        structField := dataStruct.FieldByName(key)

        if !structField.CanSet() {
            fmt.Println("Can't set")
            continue
        }

        var v interface{}

        switch structField.Type().Kind() {
        case reflect.Slice:
            v = data
        case reflect.String:
            v = string(data)
        case reflect.Bool:
            v = string(data) == "1"
        case reflect.Int, reflect.Int8, reflect.Int16, reflect.Int32:
            x, err := strconv.Atoi(string(data))
            if err != nil {
                return errors.New("arg " + key + " as int: " + err.Error())
            }
            v = x
        case reflect.Int64:
            x, err := strconv.ParseInt(string(data), 10, 64)
            if err != nil {
                return errors.New("arg " + key + " as int: " + err.Error())
            }
            v = x
        case reflect.Float32, reflect.Float64:
            x, err := strconv.ParseFloat(string(data), 64)
            if err != nil {
                return errors.New("arg " + key + " as float64: " + err.Error())
            }
            v = x
        case reflect.Uint8, reflect.Uint16, reflect.Uint32, reflect.Uint64:
            x, err := strconv.ParseUint(string(data), 10, 64)
            if err != nil {
                return errors.New("arg " + key + " as int: " + err.Error())
            }
            v = x
        default:
            return errors.New("unsupported type in Scan: " + reflect.TypeOf(v).String())
        }

        structField.Set(reflect.ValueOf(v))
    }
    return nil
}

type RouteHandler struct {
    Handler interface{}
}

func (h RouteHandler) ServeHTTP(w http.ResponseWriter, req *http.Request) {
    t := reflect.TypeOf(h.Handler)

    handlerArgs := reflect.New(t.In(0)).Interface()

    if err := mapToStruct(handlerArgs, mux.Vars(req)); err != nil {
        panic(fmt.Sprintf("Error converting params"))
    }

    f := reflect.ValueOf(h.Handler)

    args := []reflect.Value{reflect.ValueOf(handlerArgs)}
    f.Call(args)

    fmt.Fprint(w, "Hello World")
}

type App struct {
    Router mux.Router
}

func (app *App) Run(bind string, port int) {
    bind_to := fmt.Sprintf("%s:%d", bind, port)
    http.Handle("/", &app.Router)
    http.ListenAndServe(bind_to, &app.Router)
}

func (app *App) Route(pat string, h interface{}) {
    app.Router.Handle(pat, RouteHandler{Handler:h})
}

func home(args struct{Category string}) {
    fmt.Println("home", args.Category)  
}

func main() {
    app := &App{}
    app.Route("/products/{Category}", home)
    app.Run("0.0.0.0", 8080)
} 
```

恐慌：

```
2013/03/28 18:48:43 http: panic serving 127.0.0.1:51204: reflect: Call using *struct { Category string } as type struct { Category string }
/usr/local/Cellar/go/1.0.3/src/pkg/net/http/server.go:589 (0x3fb66)
    _func_004: buf.Write(debug.Stack())
/usr/local/Cellar/go/1.0.3/src/pkg/runtime/proc.c:1443 (0x11cdb)
    panic: reflect·call(d->fn, d->args, d->siz);
/usr/local/Cellar/go/1.0.3/src/pkg/reflect/value.go:428 (0x484ba)
    Value.call: panic("reflect: " + method + " using " + xt.String() + " as type " + targ.String())
/usr/local/Cellar/go/1.0.3/src/pkg/reflect/value.go:334 (0x47c3a)
    Value.Call: return v.call("Call", in)
/Users/matt/Workspaces/Go/src/pants/pants.go:86 (0x2f36)
    RouteHandler.ServeHTTP: f.Call(args)
/Users/matt/Workspaces/Go/src/pants/pants.go:1 (0x347c)
    (*RouteHandler).ServeHTTP: package main
/Users/matt/Workspaces/Go/src/github.com/gorilla/mux/mux.go:86 (0x5a699)
    com/gorilla/mux.(*Router).ServeHTTP: handler.ServeHTTP(w, req)
/usr/local/Cellar/go/1.0.3/src/pkg/net/http/server.go:669 (0x337b6)
    (*conn).serve: handler.ServeHTTP(w, w.req)
/usr/local/Cellar/go/1.0.3/src/pkg/runtime/proc.c:271 (0xfde1)
    goexit: runtime·goexit(void) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:14:45.143

在您的 reflect.Value 对象上调用 Elem()。

引用[反射法则](http://blog.golang.org/2011/09/laws-of-reflection.html)文章：

> 为了得到 p 指向的内容，我们调用 Value 的 Elem 方法，它通过指针间接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:32:29.753

请注意，这`reflect.New()`会创建一个指向您传递给它的类型的值的指针。所以在下面一行：

```
handlerArgs := reflect.New(t.In(0)).Interface() 
```

`handlerArgs`将是指向类型结构的指针`t.In(0)`。您将需要取消引用该指针以具有适合传递给函数的值。

我建议如下：

1.  为实际的结构值做`hanlerArgs`一个：`*reflect.Value`

    ```
    handlerArgs := reflect.New(t.In(0)).Elem() 
    ```

2.  `mapToStruct`使用这样的 a而`*reflect.Value`不是`interface{}`持有指向结构的指针（毕竟它是反射代码的助手）。

3.  直接`handlerArgs`用作 `Call() 调用的函数参数之一。

# objective-c - 返回数组中*Fraction对象之和的函数不起作用

> ID：15693592
> 
> 赞同：0
> 
> 时间：2013-03-28T22:55:39.920
> 
> 标签：objective-c, c, arrays, function, pointers

对于下面的代码...
1)当我在主程序中`*sumFrac`调用时，位于函数内的 是否被释放？ 2) 当我尝试使用 释放 Fraction 数组对象时，为什么会收到编译器错误？ 3) 最后，该函数实际上并没有返回一个总和，而是. 为什么会这样？ 如果这很明显，我很抱歉，这对我来说是新的......谢谢`[result release]`
`[fractionArray release]`
`0/0`

```
#import <Foundation/Foundation.h>
#import <Fraction.h>

Fraction * arraySum (Fraction *fracArray[], int arrayLength)
{
    Fraction *sumFrac = [[Fraction alloc] init];
    Fraction **fractsPtr;

    for ( fractsPtr = fracArray; fractsPtr < arrayLength; ++fractsPtr )
        sumFrac = [*fractsPtr add: *(fractsPtr + 1)];

    return sumFrac;
}

//Test function
int main (int argc, char *argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    Fraction *result;

    Fraction *a = [[Fraction alloc] initWith: 3 over: 5];
    Fraction *b = [[Fraction alloc] initWith: 2 over: 7];
    Fraction *c = [[Fraction alloc] initWith: 6 over: 3];

    Fraction *fractionArray[] = { a, b, c };

    result = arraySum ( fractionArray, 2 );

    [result print];

    [result release];
    [a release];
    [b release];
    [c release];
    [fractionArray release];

    [pool drain];
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:11:38.517

> 1) 当我在主程序中调用 [result release] 时，位于函数内的 *sumFrac 是否被释放？

这是一个棘手的问题。

`sumFrac`它本身只是一个指向对象的指针。当你复制一个指针时——无论是通过直接赋值`=`、作为参数传递、从函数返回等——这只是复制一个指针。因此，`result`是指向与 相同的对象的指针`sumFrac`。所以，当你发送它时`release`，它就像发送一个发布到`sumFrac`.

（如果您使用 ARC，这实际上会变得更加复杂，因为有时仅复制指针会自动执行 refcount 的工作。但它也成为编译器的问题，而不是您的问题，只要您使用正确的名称或属性。）

但是，您反复为 分配一个新值`sumFrac`。每次执行此操作时，它都会停止指向旧值。没有什么`release`是旧值，也不`retain`是新值。因此，您返回的值`sumFrac` *确实*被释放了——但是，除非`arrayLength`是 0，否则这与您在第一行中分配的值不同。我什至不确定你为什么要分配一个`Fraction`对象，而你只是要忽略它以支持另一个对象，但如果你想让这个工作，你可以：

```
for ( fractsPtr = fracArray; fractsPtr < arrayLength; ++fractsPtr )
    [sumFrac release];
    sumFrac = [[*fractsPtr add: *(fractsPtr + 1)] retain]; 
```

现在，每次你 reassign`sumFrac`时，你首先释放旧对象并保留新对象，所以每个对象都`Fraction`以相同数量的引用结束（包括无用的新对象有 0 个引用），除了你返回的那个有一个额外的 ref，稍后`release`将在 main 函数中使用。（我在这里假设它`-[add:]`返回一个新的 autoreleased `Fraction`。如果它改为修改对象，或者返回一个新的 +1`Fraction`或其他东西，那就是另一回事了。）

如果您很难保持引用计数正常，您可能需要考虑遵循标准命名约定和/或使用自动释放池和/或 ARC。（值得注意的是，您已经*有*一个自动释放池。）或者，或者，使用 Leaks 和 Xcode 附带的其他工具来观察事物，或者添加转储引用计数的代码，以便以后查看它们。

> 2) 当我尝试使用 [fractionArray release] 释放 Fraction 数组对象时，为什么会收到编译器错误？

因为`fractionArray`是一个`Fraction*[]`——也就是说，一个 C 风格的`Fraction`对象数组，而不是一个`Fraction`对象。您不能将消息发送到 C 样式数组，只能发送到对象。

事实上，您在这里看到的错误或警告（取决于您的编译器设置）已经解释了这一点：

```
frac.m:61:6: warning: receiver type 'Fraction **' is not 'id' or interface pointer,
      consider casting it to 'id'
    [fractionArray release]; 
```

为了理解这一点，您必须知道 an`id`是一种表示“指向任何 ObjC 对象的指针”的类型，并且指向对象指针的指针与指向对象的指针不同，因此可能不是对你来说已经足够了。但是，如果您发布了错误消息而不是仅仅说“我遇到了编译器错误”，您就会立即得到答案。

如果你想以这种方式做事，你必须发送`release`到数组中的每个`Fraction`对象。您已经在使用`[a release]`等。您根本不需要对数组做任何事情，因为它是在堆栈上分配的（如果您已经分配了它，例如，`malloc`您会想要`free`它，不是`release`。）所以，你完成了。

但是更好的方法是创建一个 ObjC 数组，它*是*一个对象：

```
NSArray *fractionArray = [NSArray arrayWithObjects: a, b, c, nil];
// ...
[fractionArray release]; 
```

（除非在那种情况下，你实际上并不想要`release`它，因为`arrayWithObjects:`返回一个自动释放的数组，并且你有一个自动释放池，所以不要妨碍池。）

> 3) 最后，该函数实际上并没有返回一个和，而是 0/0。为什么会这样？

让我们看看你的循环：

```
for ( fractsPtr = fracArray; fractsPtr < arrayLength; ++fractsPtr ) 
```

如果你打算做 C 风格的事情，你会开始遇到 C 错误而不是 ObjC 错误……你正在比较`fractsPtr < arrayLength`. 这会将两者转换为可比较的类型，然后比较它们。`fractsPtr`是指向堆栈上的数组的指针，因此显然不小于 2。您需要执行以下操作之一：

```
for ( fractsPtr = fracArray; fractsPtr < fracArray+arrayLength; ++fractsPtr ) 
```

… 或者

```
for (i = 0; i < arrayLength; ++i) {
    fractsPtr = fracArray[i]; 
```

如果编译时没有警告，我会感到非常惊讶。我自己试了一下，我明白了：

```
frac.m:34:44: warning: ordered comparison between pointer and integer
      ('Fraction **' and 'int')
    for ( fractsPtr = fracArray; fractsPtr < arrayLength; ++fractsPtr ) 
```

警告是有原因的。如果我看到这个，我会立即找到答案，而不是浪费时间试图猜测`add:`可能在做什么等。即使警告没有向*你*解释问题，至少在你的问题中提到它。

如果你解决这个问题，会发生什么？好吧，每次通过循环，它都会分配`sumFracs`给`[*fractsPtr add: *(fractsPtr+1)];`只有最后一个分配很重要。因此，它仍然不会对所有分数求和，而只是对最后两个分数求和——换句话说，它将与`[fracArray[arrayLength-1] add:fracArray[arrayLength]]`.

此外，使用命名参数`arrayLength`实际上意味着比数组长度小 1 是灾难的邀请。你知道打电话`arraySum(fractionArray, 2)`是因为你刚刚写了代码，但是当你在几周后回到它时，你会写`arraySum(fractionArray, 3)`（或`arraySum(fractionArray, sizeof(fractionArray)/sizeof(*fractionArray))`），它看起来很明显正确，你不知道为什么您正在读取垃圾值或段错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T23:05:08.213

该代码非常奇怪。

你根本没有数组对象；你有一些相当奇怪的管理语言数组。

我建议重构`NSMutableArray`用于包含分数的代码，因为您几乎永远不会看到像您在真正的 ObjC 应用程序中编写的那样的代码。

# sql - 从 powershell 调用 SQLCommand.ExecuteReader() 的奇怪错误

> ID：15693593
> 
> 赞同：0
> 
> 时间：2013-03-28T22:55:41.150
> 
> 标签：sql, powershell, ado.net, sqlcommand

当您打电话时，下面的 Powershell 错误是什么意思`SqlCommand.ExecuteReader()`？

> System.Management.Automation.ValidationMetadataException：参数“+”不属于 ValidateSet 属性指定的集合“unicode,utf7,utf8,utf32,ascii,bigendianunicode,default,oem”。提供集合中的参数，然后再次尝试该命令。在 System.Management.Automation.ValidateSetAttribute.ValidateElement(Object element) 在 System.Management.Automation.ValidateEnumeratedArgumentsAttribute.Validate(Object arguments, EngineIntrinsics engineIntrinsics) 在 System.Management.Automation.ParameterBinderBase.BindParameter(CommandParameterInternal parameter, CompiledCommandParameter parameterMetadata, ParameterBindingFlags flags )

（答案立即跟进；我只是想分享我的调试经验，因为我找不到它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:55:41.150

查询文本包括“GO”语句。正在进行某种安全过滤，这被认为是编码问题。

如果这种事情再次发生，对我或宇宙来说只是一个仅供参考。在我生命中的四个小时里，我希望我能用谷歌离开。

# ms-access - 按该标识符将给定标识符的每个条目导出到 Excel 工作簿

> ID：15693595
> 
> 赞同：-1
> 
> 时间：2013-03-28T22:55:46.977
> 
> 标签：ms-access, vba, export, excel-2010, unique

我有一个数据库，其中包含超过 4,000,000 个术中温度读数 (4354499 x 8)。因此，数据库太大而无法复制和粘贴。

变量：

**caseID** - 手术病例的唯一标识符。如果一名患者在不同的日子进行多次手术，则每次手术都会有不同的 caseID

**温度**- 温度值

**time** - 记录温度的时间

在整个手术过程中，每 15 秒测量一次温度读数，因此温度读数超过 500 个的病例是常态。每个手术病例都有自己的唯一标识符 (caseID)，但所有 500 个读数的 caseID 都是相同的。

我需要的是一种自动提取每种情况下的温度读数的方法。它可以是以下任何一种格式：

*   1 个包含多个工作表的 Excel 工作簿，每个工作表包含与一个 caseID 相关的所有温度读数。如果 Excel 限制工作簿中的工作表数量，这可能不起作用。
*   许多 Excel 工作簿，每个都包含一个 caseID 的温度读数（可能是首选，因为我不介意拥有大量文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:18:02.423

在其最基本的形式中，您正在寻找的是一些像这样的 VBA 代码：

```
Public Function DumpTempsByCaseToExcel() As Boolean
Dim cdb As DAO.Database, rst As DAO.Recordset, qdf As DAO.QueryDef

Const OutPath = "C:\Users\Gord\Desktop\"
Const DataTableName = "Temperatures"
Const TempQueryDefName = "zzzTempQuery"

Set cdb = CurrentDb
Set rst = cdb.OpenRecordset("SELECT DISTINCT caseID FROM [" & DataTableName & "]", dbOpenSnapshot)
Do While Not rst.EOF
    On Error Resume Next
    cdb.QueryDefs.Delete TempQueryDefName
    On Error GoTo DumpTempsByCaseToExcel_Error
    Set qdf = cdb.CreateQueryDef(TempQueryDefName, "SELECT * FROM [" & DataTableName & "] WHERE caseID=""" & rst!caseID & """")
    Set qdf = Nothing
    DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, TempQueryDefName, OutPath & rst!caseID & ".xlsx"
    rst.MoveNext
Loop
rst.Close
Set rst = Nothing
Set cdb = Nothing
DumpTempsByCaseToExcel = True
Exit Function

DumpTempsByCaseToExcel_Error:
MsgBox Err.Description, vbCritical, "Runtime error " & Err.Number
DumpTempsByCaseToExcel = False
End Function 
```

假设：

*   您的 [caseID] 值是字母数字。如果它们是数字，那么您将不得不摆弄构建 WHERE 子句的代码中的引号。

*   您的 [caseID] 值可用作有效的 Windows 文件名。如果它们包含在 Windows 文件名中无效的字符，那么您必须使用类似`Replace()`函数的东西来删除它们或将它们映射到其他东西。

*   您的目标文件夹是空的，或者至少不包含与您将创建的文件同名的文件。编写的示例代码*可能会*覆盖现有文件。

# python - 列表的乘积，不一定同时是所有列表

> ID：15693597
> 
> 赞同：0
> 
> 时间：2013-03-28T22:55:59.447
> 
> 标签：python

我有三个列表（L1、L2、L3），例如：

```
L1 = [1,2]
L2 = ['a','b']
L3 = ['A','B'] 
```

我想计算 L1*L2*L3 的乘积，id est，

```
itertools.product(L1,L2,L3) = [ [1,'a','A'], [1,'a','B'], ... ] 
```

但我想考虑或不考虑一些清单；因此，[1,], [ 1, 'a' ] 将是结果的一部分，如 ['a',], ['a', 'B'] 等等。

有什么想法可以帮助我吗？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:14:17.270

使用[itertools 示例](http://docs.python.org/3/library/itertools.html#itertools-recipes)`powerset`中给出的函数。将为您提供 3 个列表的所有子集。对于每个子集，您可以获取笛卡尔积，然后将它们链接在一起。`powerset([L1,L2,L3])`

```
>>> from itertools import chain, product
>>> result = chain.from_iterable(product(*lists) for lists in powerset([L1,L2,L3]))        
>>> list(result)

[(), (1,), (2,), ('a',), ('b',), ('A',), ('B',), (1, 'a'), (1, 'b'), (2, 'a'), 
(2, 'b'), (1, 'A'), (1, 'B'), (2, 'A'), (2, 'B'), ('a', 'A'), ('a', 'B'), 
('b', 'A'), ('b', 'B'), (1, 'a', 'A'), (1, 'a', 'B'), (1, 'b', 'A'), 
(1, 'b', 'B'), (2, 'a', 'A'), (2, 'a', 'B'), (2, 'b', 'A'), (2, 'b', 'B')] 
```

# php - 编写 apache2 htaccess 文件

> ID：15693600
> 
> 赞同：0
> 
> 时间：2013-03-28T22:56:12.000
> 
> 标签：php, .htaccess, apache2

我觉得我的问题不够清楚，我会重写它。

我想从我的 index.php 中回显我的 url，它对我不起作用，所以我包含了 php 代码。如果它有帮助我包含 .htaccess 文件。谢谢

```
Notice: Undefined index: url in /var/www/mvc/index.php on line 3

<?php

$url = isset($_GET['url']);

echo $url;

?>

<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

    RewriteRule ^(.*)$ index.php?url=$1 [PT,L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:00:21.077

这与您的 htaccess 文件无关，它只是说明 get 参数没有具有该名称的索引。

尝试转储您的 $_GET 以查看其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:03:38.220

isset 返回一个布尔值。因此，您需要将其包装在 if 语句中以防万一。

```
$url = (isset($_GET['url'])) ? $_GET['url'] : 'index';
echo $url; 
```

这样做会抑制通知。

# android - 搜索文本文件的不确定性

> ID：15693604
> 
> 赞同：1
> 
> 时间：2013-03-28T22:56:36.493
> 
> 标签：android, search, text

朋友我有一段代码可以读取文本文件并搜索匹配的单词，但是在搜索文本文件时存在不确定性。有时它能够匹配单词，有时它不能匹配，尽管该单词存在于文本文件中。

这是代码：

```
EditText et = (EditText) findViewById(R.id.editText1);
    String display = null;
    String search = "dadas";
    //String current = "woot";

    try {
        InputStream is = getAssets().open("file.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(is));

        while(br.readLine() != null){

            if(search.equalsIgnoreCase(br.readLine())){
                display = "found";
                break;
            }

        }

        br.close();
        is.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    et.setText(display); 
```

这是我的文本文件内容：

```
dadaist
dadaists
dadas
daddies
daddle
daddled
daddles
daddling 
```

谁能弄清楚为什么会这样？假设我在我的文本文件中添加一个单词“finish”然后搜索它，它总会找到它。但是如果我的搜索词是“dadas”或“dadist”，它在 et 中产生 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:01:06.880

看起来你通过调用`br.readLine()`两次来跳过每隔一行

我会做这样的事情

```
 search = search.toLowerCase();
    String line = null;
    while((line = reader.readLine()) != null){

        if(line.toLowerCase().contains(search)){
            display = "found";
            break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:02:23.227

你打`br.readLine()`了两次电话，这意味着你将跳过每隔一行。在您的情况下，“dadas”在第 3 行，这意味着它被跳过了。

尝试：

```
 String line = br.readLine();
    while(line != null){

        if(line.equalsIgnoreCase(search)){
            display = "found";
            break;
        }
        line = br.readLine();
    } 
```

# collections - python从字典中检索关键对象

> ID：15693605
> 
> 赞同：2
> 
> 时间：2013-03-28T22:56:44.263
> 
> 标签：collections, python-2.7

我创建了一个类，它允许我使用任意字典键存储元数据，并且仍然通过`in`原始对象类型的测试：

```
class DictKey:

    def __init__(self, key):
        self.hashkey = hash(key)
        self.member = key

    def __hash__(self):
        return self.hashkey

    def __repr__(self):
        return 'DictKey(' + self.strkey + ')'

    def __cmp__(self, o):
        return cmp(self.member, o)

d = {}
key = DictKey('hello')
d[key] = 'world'

print key.hashkey
print hash('hello')
print key in d
print 'hello' in d
print DictKey('hello') in d 
```

产生输出：

```
840651671246116861
840651671246116861
True
True
True 
```

现在，给定字符串“hello”，我需要在恒定时间内获取从所述字符串创建的 DictKey 实例：

```
if 'hello' in d:
    #need some way to return the instance of DictKey so I can get at it's member
    tmp = d.getkey('hello') 
    tmp.member 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:57:50.607

将“元”数据与 dict 一起存储的更传统方法是：

1.  维护两个`dict`具有相同键集的 s，一个用于实际数据，一个用于“元”
2.  有一个`dict`with ("raw") 键，值是 2 元组：( value, item-meta-data )

两者都很简单，不需要特殊的魔法。您还将避免像您在问题中描述的问题（以及其他问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:48:35.793

我对您的基本代码做了一些修改：

```
def __repr__(self):
    return 'DictKey(' + self.member + ')' 
```

然后，如果您想在一组键中检索 DictKey 的实例，您可以执行以下操作：

```
index_of_instance = d.keys().index('hello')
my_instance_of_dict_key = d.keys()[index_of_instance] 
```

希望能帮助到你。

# c# - 为什么c#找不到属性？网

> ID：15693608
> 
> 赞同：1
> 
> 时间：2013-03-28T22:56:56.267
> 
> 标签：c#, asp.net

我有 4 个复选框，每个复选框下方是一个 div。每个复选框负责显示或隐藏其下方的复选框。例如：

```
 <asp:CheckBox ID="CheckBox1" myDiv="divRegisteration" myText=" הרשמה - " runat="server" AutoPostBack="true" Font-Size="18px" Font-Bold="true" Text=" הרשמה - הצג" OnCheckedChanged="CheckBox_CheckedChanged"/>
    <div id="divRegisteration" runat="server" visible="false"> 
```

复选框“CheckBox1”负责显示或隐藏 div“divRegisteration”，它在自定义属性“myDiv”中得到解决。

问题是，在后面的代码中，它没有找到属性“myDiv”：

```
if (((CheckBox)(sender)).Checked==true)
{
  CheckBox chk = (CheckBox)(sender);
  object div = FindControl(chk.Attributes["myDiv"]); //// it does not find myDiv, and therefore doesn't find the control so the program crashes.
  HtmlGenericControl addressDiv = (HtmlGenericControl)(div);
  addressDiv.Visible = true;     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:13:49.363

因为 Attributes 集合不能那样工作：

> 获取与控件上的属性**不对应**的任意属性（仅用于呈现）的集合。

如果你想拥有这样的属性，你需要创建你自己的自定义控件来拥有你想要的属性。或者，作为替代方案，创建一个承载单个 CheckBox 和关联 div 或诸如此类的 UserControl - 然后您可以在代码隐藏中通过 ID 引用一个相关的 div。实例化该控件的多个实例，您就可以开始了。

编辑：我的 WebForms-fu 有点生锈，但这里什么也没有。

控制类：

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
namespace UserControlExample {
    [ParseChildren(false)]
    public class TogglePanel : UserControl {
        private CheckBox cbToggleContent = new CheckBox();
        private Panel pnlContentPlaceholder = new Panel();

        public TogglePanel() {
            Load += OnLoad;
        }
        public bool Checked { get; set; }

        private void OnLoad(object sender, EventArgs eventArgs) {
            Controls.Add(cbToggleContent);
            Controls.Add(pnlContentPlaceholder);

            if (!IsPostBack) {
                cbToggleContent.Checked = Checked;
                pnlContentPlaceholder.Visible = Checked;
            }

            cbToggleContent.AutoPostBack = true;
            cbToggleContent.CheckedChanged += (s, args) => {
                pnlContentPlaceholder.Visible = cbToggleContent.Checked;
            };
        }

        protected override void AddParsedSubObject(object obj) {
            pnlContentPlaceholder.Controls.Add((Control) obj);
        }
    }
} 
```

及其用法：

```
<%@ Register TagPrefix="a" Namespace="UserControlExample" Assembly="UserControlExample" %>

<a:TogglePanel Checked="True" runat="server">
    This stuff here will be shown or hidden based on the checkbox
</a:TogglePanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:12:37.250

`FindControl`只搜索当前命名上下文，不遍历层次结构。通过以您的方式称呼`FindControl`他们，它正在使用`this.FindControl`. 尝试类似的东西，`chk.Parent.FindControl(...)`如果它`div`是`CheckBox`

编辑：

啊，好吧，Attributes 集合是“仅用于渲染目的”。它似乎没有填充 ASPX HTML 声明中指定的属性。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.attributes.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.attributes.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:05:56.353

在我的脑海中 - 复选框没有[InputAttributes 集合](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.inputattributes.aspx)吗？

诚然，未经测试的刺伤：

```
CheckBox chk = (CheckBox)(sender);
object div = FindControl(chk.InputAttributes["myDiv"]); 
```

类似的东西有用吗？

# java - Java等效objective-c UITableView 或 UICollectionView

> ID：15693611
> 
> 赞同：2
> 
> 时间：2013-03-28T22:57:18.593
> 
> 标签：java, ios

Java 使用什么来显示 UITable 之类的数据？我正在构建一个 Java 程序，并希望将 GUI 自定义为看起来像方形单元格。到目前为止，我已经找到了一个 JTable，但我不确定 JTable 是否能够模拟这个 GUI：

（我想这更像是一个 UICollectionView，但你明白了）

我可以在 Java 中使用什么？

谢谢

![在此处输入图像描述](../Images/44991969bfd381aabd25860826ec963d.png)

# c++ - Qt GraphicsScene 背景不变

> ID：15693615
> 
> 赞同：1
> 
> 时间：2013-03-28T22:57:38.520
> 
> 标签：c++, linux, qt, qtembedded

我是 Qt 的新手。我正在通过 QGraphicsScene 类处理画布小部件。但我无法更改小部件的默认白色背景。这是代码。我尝试使用 QBrush 设置背景。但它不起作用.它仍然是白色的。下面的代码有什么问题？

```
int main(int argc, char **argv){

    QApplication a(argc, argv);

    QGraphicsScene canvas;
    canvas.addText("Hello World");
    QColor *color=new QColor(0x70,0x80,0x50,255);
    QBrush *brush=new QBrush();
    brush->setColor(*color);
    canvas.setBackgroundBrush(*brush);

    QGraphicsView view(&canvas);
    view.show();

    return a.exec();

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T23:16:02.577

尝试将颜色传递给画笔构造函数而不是之后

```
QBrush brush(QColor(0x70, 0x80, 0x50, 255));
canvas.setBackgroundBrush(brush); 
```

这会将画笔样式设置为`Qt::SolidPattern`. 默认画笔构造函数将样式设置为`Qt::NoBrush`. 见[http://qt-project.org/doc/qt-4.8/qbrush.html#QBrush](http://qt-project.org/doc/qt-4.8/qbrush.html#QBrush)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T05:14:17.863

```
view.setStyleSheet("background-color: black;"); 
```

# matlab - MATLAB同步代码

> ID：15693617
> 
> 赞同：3
> 
> 时间：2013-03-28T22:57:46.410
> 
> 标签：matlab, synchronized

MATLAB中Java的“同步”等价于什么？

假设我有两个计时器，它们都可以修改一个变量（即矩阵）M。如果它们同时触发，它们会同时尝试更改 M（这可能会导致错误）吗？MATLAB 会自动同步这些操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:07:42.690

Matlab 99% 是单线程的（另外 1% 与这个问题并不真正相关）。所以没有`synchronized`可用的关键字。

但是，某些操作是可中断的，这意味着 GUI 回调或计时器可以在意外时间暂停操作。这可能会导致在多头系统中可以观察到的一些相同问题。

为防止中断，`interruptible`请在可用时使用该属性（通常在 GUI 对象上）。这应该处理在处理 GUI 回调时防止重入行为的需要。例如

```
set(gcf,'Interruptible','off') 
```

但是，这不处理与计时器相关的中断。

* * *

看起来两个定时器不能互相中断，所以不需要同步。但是，计时器可以中断主要活动。

经过一些测试后，这可能发生在文档中隐含的`pause`、`drawnow`、`figure`或call 附近。`getframe`它也可能发生在其他调用附近，包括一些 tic/toc 调用和对 Java 的调用。

我不知道与`Interruptible`计时器或函数的属性平行，即使可能需要它。根对象`0`有一个`Interruptible`属性，但它没有效果（根据文档，并已确认）。

注意：这与我提供的先前答案（参见历史）相比有很大变化，代表最近的学习。我之前的示例使用了两个计时器，它们似乎相互消除了冲突。本例使用一个定时器加主函数操作。

* * *

下面包含一个示例，演示了一种不可中断的情况，以及两种功能`some_work`被中断的情况。

```
function minimum_synchronization_example

%Defune functions to test for interruptability
%(these are all defined at the bottom of the file)
fnList = {
    @fn_expectedNoInterruption
    @fn_expectedInterruption
    @fn_unexpectedInterruption
    };
for ix = 1:length(fnList)
    disp(['---Examples using ' func2str(fnList{ix}) '--------'])
    test_subfunction_for_interrupt_allowed(fnList{ix});
end
end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
function test_subfunction_for_interrupt_allowed(fn)
%Setup and start a timer to execute "some_work"
t1 = timer();
set(t1,...
    'Name','PerformSomeWorkTimer1', ...
    'TimerFcn', @(~,~) some_work('Timer-1', fn), ...
    'ExecutionMode','fixedSpacing', ...
    'Period', 0.4, ...
    'TasksToExecute', 6, ...
    'BusyMode', 'drop')
start(t1);

%Then immediately execute "some_work" from the main function
for ix = 1:6
    some_work('MainFun', fn);
    pause(0.2);
end

%The timer and the loop take about the same amount of time, stop and delete
%the timer before moving on
stop(t1);
delete(t1);
end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
function some_work(displayString, subFunctionWhichMayAllowInterrupts)
%Initialize persistent, if needed.
%This records then umber of active calls to this function.
persistent entryCount
if isempty(entryCount)
    entryCount = 0;
end

%Record entry
entryCount = entryCount+1;
tic;

%Perform some work  (Inverting a 3000-by-3000 matrix takes about 1 sec on my computer)
[~] = inv(randn(3000));

%Run subfunction to see if it will be interrupted
subFunctionWhichMayAllowInterrupts();

%Display results. How many instances of this function are currently active?
if entryCount>1;
    strWarning = 'XXX ';
else
    strWarning = '    ';
end
disp([strWarning ' <' sprintf('%d',entryCount) '> [' displayString '] ; Duration: ' sprintf('%7.3f',toc)]);

%Record exit
entryCount = entryCount-1;
end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
function fn_expectedNoInterruption
x = 1+1;
end

function fn_expectedInterruption
drawnow;
end

function fn_unexpectedInterruption
m = java.util.HashMap();
end 
```

# pdf - 使用 pdf.js 减少 PDF 加载时间

> ID：15693620
> 
> 赞同：2
> 
> 时间：2013-03-28T22:57:52.770
> 
> 标签：pdf, pdf.js

打开 PDF 时有没有办法减少 pdf.js ( [http://mozilla.github.com/pdf.js/](http://mozilla.github.com/pdf.js/) ) 的加载时间？我正在处理大型 PDF 文件 (50MB+)，而我的用户通常网络速度较慢。有时他们甚至需要 2 分钟以上才能到达第一页。这是 PDF 格式的限制吗？是不是为了解析 PDF 文件，您需要阅读整个文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:56:53.270

我联系了从事 mozilla pdf.js 项目的小组，看起来他们正在努力增加对此的支持。欲了解更多信息：[https ://github.com/mozilla/pdf.js/pull/2719](https://github.com/mozilla/pdf.js/pull/2719)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-30T16:13:13.060

当我正在编写一个允许客户上传自己的 PDF 然后显示它们的应用程序时，我已经对这个问题进行了很多研究。显然，这几乎不能控制 PDF 的大小或内容（有些比其他的更复杂）。

PDFJS 提供了两种渲染方式——画布和 svg，我尝试了这两种方法。Canvas 真的需要我专注于一次加载几页。如果我尝试除此之外的任何东西，我经常会在 iPad 应用程序上耗尽画布内存。无论您做什么，画布都会占用大量内存，而占用大量内存只会减慢一切，增加加载时间并减慢查看器中的交互。SVG 模式一开始效果更好，但由于需要创建的 SVG 元素的数量，它的滚动速度很慢，这意味着您经常会看到滚动的明显滞后。

根据 Thomas 的建议，我考虑将每个页面加载到画布中，将画布保存为 jpeg，然后显示 jpeg。这意味着我只需要一张画布。由于我的应用程序需要一种放大和缩小的方法，我还必须处理重新加载页面（只是在放大时，因为在缩小时使用高清 jpeg 并不是什么大问题）。它创建了一个不仅加载速度非常快的方法 - 每次都重复使用画布并且循环加载每个页面，而且它还可以非常快速地滚动和交互。挑战在于让注释（例如链接）发挥作用。

我所做的是将我所做的工作打包到一个开源包中，以便为其他人节省一份我希望的工作。它确实会加载所有页面，但一次加载一个，并为显示的每个页面创建一个 jpeg。通常它会计算出当前页面是什么，并在需要时从那里重新渲染。希望它对将来有这个问题的人有用。

[https://www.npmjs.com/package/react-fast-scroll-pdf](https://www.npmjs.com/package/react-fast-scroll-pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T20:01:23.207

在服务器端预渲染 PDF 页面并将它们作为静态图像提供，让您以加载单个图像的速度急切地拉入当前查看的页面。这可以在客户端加载 PDF.js javascript 之前和请求 PDF 之前完成。您可以在加载和处理 PDF 时将文本和更丰富的内容生成委托给 PDF.js。

您可能需要实现自己的 Web 查看器，PDF.js 在此处提供示例：[https ://mozilla.github.io/pdf.js/examples/](https://mozilla.github.io/pdf.js/examples/)

# plugins - PPAPI 插件不会在 windows 8 中的 Metro 模式 Chrome 中加载

> ID：15693621
> 
> 赞同：1
> 
> 时间：2013-03-28T22:57:57.003
> 
> 标签：plugins, google-nativeclient, ppapi

我开发了一个 chrome PPAPI 插件。该插件在 windows XP、windows 7 上的 Chrome 中运行良好。它也适用于 windows 8 中的桌面模式 Chrome。但是，它不会在 Metro 模式 Chrome 中作为插件加载。当我输入“chrome://plugins/”时，它没有显示在插件列表中。我想知道出了什么问题以及将其加载为 Metro 模式 Chrome 插件需要什么。任何人都可以帮忙吗？

我使用以下命令启动 chrome 并注册插件

"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --no-sandbox --register-pepper-plugins="C:\ChromePlugin.dll";application/x-nacl localhost:5103 /index.html

# vb.net - 处理非 url 错误

> ID：15693622
> 
> 赞同：0
> 
> 时间：2013-03-28T22:58:03.850
> 
> 标签：vb.net, httprequest, httpresponse

我正在尝试运行以下内容：

```
Dim a As Boolean = False
        Try
            Dim myHTTPWebRequest As HttpWebRequest = CType(WebRequest.Create(txtToShorten.Text), HttpWebRequest)
            Dim myHTTPwebResponse As HttpWebResponse = CType(myHTTPWebRequest.GetResponse(), HttpWebResponse)
            If myHTTPwebResponse.StatusCode = HttpStatusCode.OK Then
                a = True
            End If
        Catch e As WebException
        Catch e As Exception
        End Try
        Return a 
```

当我执行正确的 url 时，它可以正常工作并返回 true，但是如果输入的 url 无效，则它不会返回值。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:12:13.513

实际上，这对我来说很好：

```
Imports System.Net 
```

公开课形式1

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    Dim x As Boolean = bb()
    x = x

End Sub

Private Function bb() As Boolean

    Dim a As Boolean = False
    Try
        Dim myHTTPWebRequest As HttpWebRequest = CType(WebRequest.Create("http:\\www.fokikkkkkrd.com"), HttpWebRequest)
        Dim myHTTPwebResponse As HttpWebResponse = CType(myHTTPWebRequest.GetResponse(), HttpWebResponse)
        If myHTTPwebResponse.StatusCode = HttpStatusCode.OK Then
            a = True
        End If
    Catch ex As WebException
    Catch ex As Exception
    End Try
    Return a

End Function 
```

结束类

你把这段代码放在一个函数里了吗？

# java - Java KeyListener：KeyTyped 中是否按下了“Backspace”键

> ID：15693623
> 
> 赞同：0
> 
> 时间：2013-03-28T22:58:08.333
> 
> 标签：java, keylistener, backspace

如何判断用户是否从 KeyTyped 方法内部按下了“Backspace”键？它们的值来自`arg0.getKeyChar()`is not `KeyEvent.CHAR_UNDEFINED`，并且`arg0.getKeyCode()`始终`KeyEvent.VK_UNDEFINED`位于 KeyTyped 方法内部。我是否必须使用 KeyReleased/KeyPressed 方法并标记一个布尔值？哪个方法先触发？KeyReleased 还是 KeyTyped？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:08:31.753

看起来 KeyTyped 无法检测到没有视觉表示的键。我认为这包括退格。

[KeyListener、keyPressed 与 keyTyped](https://stackoverflow.com/questions/7071757/keylistener-keypressed-versus-keytyped)

# ruby-on-rails - 使用 Regexp 在 Rails 生成器中的文件中的最后一个关联之后插入新关联

> ID：15693625
> 
> 赞同：1
> 
> 时间：2013-03-28T22:58:14.850
> 
> 标签：ruby-on-rails, regex, thor, rubular

`insert_into_file`我一直在尝试使用自定义生成器中的方法将一些新关联插入到现有模型中。出于美学原因，并避免硬编码任何东西，我想在找到的最后一个之后插入它们。我尝试使用在 Rubular 中工作的正则表达式来实现这一点，但在我运行生成器时却没有：

```
def add_associations_to_other_things
  content = <<-CONTENT
has_many :things
  CONTENT
  inject_into_file "app/models/other_things.rb", \
  content, \
  :after => /(?:(has_and_belongs_to_many|has_many|has_one|belongs_to)[^\n]*$)(?!.*has_and_belongs_to_many|has_many|has_one|belongs_to.*\z)/m
end 
```

换句话说，这应该找到最后一个关联到一个没有更多关联的换行符。该`m`选项意味着负前瞻中的点应被视为换行符，因此应注意文件末尾。在 Rubular 中，选择了最终的关联，但是当运行生成器时，内容会插入到每个关联之后。

我的正则表达式有什么问题？

# jquery - 尝试在不支持 svg 时切换 src

> ID：15693632
> 
> 赞同：0
> 
> 时间：2013-03-28T22:58:45.897
> 
> 标签：jquery

我正在使用 modernizr 来检测何时不支持 svg 并且工作正常，但由于某种原因，这个 jQuery 无法正常工作。

我正在尝试用 svg 的 id 替换特定的 src，以便其值指向 .png 文件。这将在检查 svg 是否不受支持的 if 语句中发生。

但是，当我在其中放置警报并触发时，if 语句正在工作，但是这个 jQuery 似乎没有工作。

有谁知道为什么？

```
$("#svg").attr("src","img/logo.png"); 
```

我正在使用 jQuery 1.9.0。

这是我在这个网站上的所有 JS：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
<script type="text/javascript" src="js/modernizr.js"></script>
<script type="text/javascript">
if(!(Modernizr.svg)){
    $("#svg").attr("src","img/logo.png");
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:10:47.440

将您的代码移到之前`</body>`或将其包装在`$(function () {})`：

```
$(function () {
    if (!Modernizr.svg) {
        $("#svg").attr('src', 'img/logo.png');
    }
}); 
```

这将确保`#svg`首先加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:14:49.773

由于 Jquery 不适合您，这可能是问题所在

像这样正确包含jquery（缺少`http:`）

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

正如爆破丸所说

把它包起来`$(function () {}):`

# python-2.7 - sqlite3.OperationalError：没有这样的表

> ID：15693633
> 
> 赞同：1
> 
> 时间：2013-03-28T22:58:54.463
> 
> 标签：python-2.7, sqlite

我正在尝试使用 python 创建一个 sqlite3 表。我的代码如下：

```
def initDb():
    database = 'index.db'
    conn = sqlite3.connect(database)

    cur = conn.cursor()

    # Initialize database
    cur.execute('PRAGMA foreign_keys = ON')

    cur.execute('DROP TABLE IF EXISTS modules')
    cur.execute('DROP TABLE IF EXISTS files')
    cur.execute('DROP TABLE IF EXISTS modulesfiles')

    cur.execute(
        '''CREATE TABLE modules (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            label TEXT UNIQUE NOT NULL
        )'''
    )
    cur.execute(
        '''CREATE TABLE files (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            filename TEXT UNIQUE NOT NULL
        )'''
    )
    cur.execute(
        '''CREATE TABLE modulesfiles (
        module INTEGER UNIQUE NOT NULL,
        file INTEGER UNIQUE NOT NULL,
        PRIMARY KEY (module,file),
        FOREIGN KEY (module) REFERENCES modules(id) ON UPDATE CASCADE ON DELETE CASCADE,
        FOREIGN KEY (file) REFERENCES files(id) ON UPDATE CASCADE ON DELETE CASCADE
        )'''
    )

    cur.close()

    return conn

if __name__ == '__main__':
    conn = initDb()
    conn.commit()
    conn.close() 
```

此代码在我第一次运行时运行良好，并且我的数据库已创建。但是，如果我第二次运行它，我会收到以下错误：

```
 cur.execute('DROP TABLE IF EXISTS files')
sqlite3.OperationalError: no such table: main.modules 
```

我不知道出了什么问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:12:44.150

首先删除`modules`会使外键约束`modulesfiles`无效。

首先删除子表。

# google-apps-script - caja 在使用 GAS createHtmlOutput() 方法时是否修复了格式错误的 HTML？

> ID：15693636
> 
> 赞同：1
> 
> 时间：2013-03-28T22:59:03.583
> 
> 标签：google-apps-script, google-caja

在以下示例中，内容“Here is some more text”显然位于结束 HTML 标记之外。但是当我[将脚本作为 Web 应用程序运行并查看页面源](https://plus.google.com/u/0/photos/114078821751650466152/albums/5860530893747714449/5860530895439758946)时，它位于结束标记内。这是因为 caja 正在清理格式错误的 HTML 吗？为什么以这种方式清理而不是通知我错误？

气体代码：

```
function doGet() {
    var ParagraphContent ='So much to do in so little time... '
    var HTMLToOutput = '<html><h1>A header</h1><p>' + ParagraphContent + '</p></html>';
    var HtmlAndMore = HTMLToOutput + 'Here is some more text';
    var it = HtmlService.createHtmlOutput(HtmlAndMore);
    Logger.log(HtmlAndMore)
    return it 
} 
```

GAS 脚本编辑器日志输出：

```
<html><h1>A header</h1><p>So much to do in so little time... </p></html>Here is some more text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:55:55.847

Caja 被设计为根据 HTML5 解析算法进行操作（该算法旨在将浏览器供应商关于必须如何解析 HTML-in-the-wild 的共识编码，并定义一个正确的解析-错误-恢复策略）。该算法[有效地指定](http://www.w3.org/html/wg/drafts/html/master/syntax.html#the-after-after-body-insertion-mode)`</html>`应将后面的内容插入到 中`<body>`，因此您看到的结果就是指定的结果。

但是，它还指定该输入是一个解析错误（这只是意味着它*可能会*被报告或*可能*中止处理）。遗憾的是，我们的最新技术（“ES5 模式”）尚未尝试报告解析错误。我已经[做了一个注释](https://code.google.com/p/google-caja/issues/detail?id=1685)来解决这个问题。

# php - htaccess mod_rewrite 不适用于 1&1

> ID：15693638
> 
> 赞同：1
> 
> 时间：2013-03-28T22:59:18.497
> 
> 标签：php, .htaccess, mod-rewrite, apache2

我的 webservers /marssolover/protected 文件夹中有一个 .htaccess 文件，它允许我从受保护的文件夹中获取一个文件，并通过位于同一文件夹中的 filestreamer.php 文件对其进行流式传输。mod_rewrite 在 localhost 上工作正常，但在 1&1 上不行。

我已经用谷歌搜索并尝试了一些以这个 .htaccess 文件结尾的建议：

```
AddHandler x-mapp-php6 .php

RewriteEngine On
Options -MultiViews
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteBase /MARS/MARSSecure
RewriteRule ^(.*)$ filestreamer.php?file=$1 [L]

<Files .htaccess>
order allow,deny
deny from all
</Files> 
```

但是，它仍然无法正常工作。我读过它可能与多视图有关，但我认为它被禁用了`Options -MultiViews`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T05:20:24.297

你可以试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteCond %{REQUEST_URI} !filestreamer\.php              [NC]
RewriteCond %{REQUEST_URI} ^/MARS/MARSSecure/(.*)/?        [NC]
RewriteRule .*   /MARS/MARSSecure/filestreamer.php?file=%1 [L,NC] 
```

静默地图

`http://example.com/MARS/MARSSecure/anything`

到：

`http://example.com/MARS/MARSSecure/filestreamer.php?file=anything`

尝试在测试期间使用标志 [R,L,NC]，以便您可以看到替换 URL。

# c# - 如何使用 C# 确定 SQL Server CE 表中是否存在列？

> ID：15693639
> 
> 赞同：4
> 
> 时间：2013-03-28T22:59:21.823
> 
> 标签：c#, sql, compact-framework, sql-server-ce, windows-ce

遗留代码是这样做的：

```
public bool isValidField(string tableName, string fieldName)
{
    bool retVal;
    string tblQuery = string.Format("SELECT {0} FROM {1}", fieldName, tableName);
    checkConnection();
    try
    {
        SqlCeCommand cmd = objCon.CreateCommand();
        cmd.CommandText = tblQuery;
        object objvalid = cmd.ExecuteScalar();
        retVal = (null != objvalid);
    }
    catch
    {
        retVal = false; 
    }
    return retVal;
} 
```

...但我发现它并不总是有效。在调用该方法并获取之后`false`，一些代码会更改表以添加一些列，但我得到：

> 列 ID 在规范中出现多次。

我在 StackOverflow 上发现了几个很有前途的 SQL 语句：

```
if exists(select * from sys.columns 
        where Name = N'columnName' and Object_ID = Object_ID(N'tableName')) 
```

和

```
IF COL_LENGTH('table_name','column_name') IS NULL 
```

...但我不确定如何在 C#/.NET 1.1 中实现它

我是否需要使用 ExecuteScalar 并将返回的值转换为布尔值？或者是其他东西？

## 更新

将其更改为此并不能解决问题：

```
public bool isValidField(string tableName, string columnName)
{
    bool retVal;
    string tblQuery = string.Format(
        "COL_LENGTH({0},{1}) IS NULL",
        tableName,
        columnName);

    checkConnection();
    try
    {
        SqlCeCommand cmd = objCon.CreateCommand();
        cmd.CommandText = tblQuery;
        object objvalid = cmd.ExecuteScalar();
        retVal = Convert.ToBoolean(objvalid);
    }
    catch
    {
        retVal = false; 
    }
    return retVal;
} 
```

## 更新 2

奇怪的是，我在新代码中看到了更多错误消息。

## 更新 3

当我以这种方式更改代码时，它没有任何区别：

```
string tblQuery = "SELECT COUNT(*) FROM INFORMATION_SCHEMA.COLUMNS"
                  + " WHERE TABLE_NAME = @tableName AND COLUMN_NAME"
                  + " = @columnName";

checkConnection();
try
{
    SqlCeCommand cmd = objCon.CreateCommand();
    cmd.CommandText = tblQuery;
    SqlCeParameter tblNameParam = new SqlCeParameter(
        "@tableName",
        SqlDbType.NVarChar,
        128);

    tblNameParam.Value = tableName;
    cmd.Parameters.Add(tblNameParam);
    SqlCeParameter colNameParam = new SqlCeParameter(
        "@columnName",
        SqlDbType.NVarChar,
        128);

    colNameParam.Value = tableName;
    cmd.Parameters.Add(colNameParam);
    int i = (int)cmd.ExecuteScalar();
    retVal = i > 0;
} 
```

...所以我不知道哪种方式更可取；这对我来说似乎更直接......任何想法，有人吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T23:28:27.787

您只需查询[信息架构](http://technet.microsoft.com/en-us/library/ms174156.aspx)表即可获得所需的信息：

```
public bool isValidField(string tableName, string columnName)
{
    var tblQuery = "SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS"
                   + " WHERE TABLE_NAME = @tableName AND"
                   + " COLUMN_NAME = @columnName";

    SqlCeCommand cmd = objCon.CreateCommand();
    cmd.CommandText = tblQuery;
    var tblNameParam = new SqlCeParameter(
        "@tableName",
        SqlDbType.NVarChar,
        128);

    tblNameParam.Value = tableName
    cmd.Parameters.Add(tblNameParam);
    var colNameParam = new SqlCeParameter(
        "@columnName",
        SqlDbType.NVarChar,
        128);

    colNameParam.Value = columnName
    cmd.Parameters.Add(colNameParam);
    object objvalid = cmd.ExecuteScalar(); // will return 1 or null
    return objvalid != null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T09:33:22.707

```
 public bool IsValidField(SqlCeConnection objCon, string tableName, string columnName)
    {
        const string query = "SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS"
                                + " WHERE TABLE_NAME = @TABLENAME AND"
                                + " COLUMN_NAME = @COLUMNNAME";

        using (var cmd = new SqlCeCommand(query, objCon))
        {
            cmd.Parameters.Add("@TABLENAME", SqlDbType.NVarChar, 128).Value = tableName;
            cmd.Parameters.Add("@COLUMNNAME", SqlDbType.NVarChar, 128).Value = columnName;
            var objvalid = cmd.ExecuteScalar(); // will return 1 or null
            return objvalid != null;
        }
    } 
```

# wordpress - 如何从 wordpress 管理员实时刷新所有查看器。

> ID：15693644
> 
> 赞同：0
> 
> 时间：2013-03-28T22:59:59.920
> 
> 标签：wordpress, live-streaming, page-refresh

我正在创建一个实时流媒体网站，并且通过浏览器刷新解决了 10 个用户问题中的 9 个。

所以...我正在尝试找到一种方法来通过单击按钮强制刷新所有查看器。

但是，我希望我的管理员是唯一可以访问此功能的人，因此我想将此按钮放在主题管理部分中。

我已经摆弄并阅读了许多指向“location.window”选项的线程。但是，我仍然不确定如何让所有观众立即直播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:52:29.823

您可以通过设置一个计时器并通过 AJAX 每 xx 秒轮询一次服务器来实现类似的效果。每当管理员按下“强制刷新”按钮时，浏览器将在下一次“投票”时重新加载页面。

例如;

在服务器上，“令牌”存储在 JSON 文件中；

`token.json`：

```
{currentToken:1039593029484930294820} 
```

在每个页面上，都包含一个 JavaScript，每 xx 秒轮询一次服务器以检查令牌。如果token已经修改，刷新页面；

如果管理员想要强制刷新，则令牌无效，并生成一个新令牌并将其保存在`token.json`. 所有仍在使用旧令牌的用户都应刷新页面。

示例（假设 jQuery）

```
<script type="text/javascript">

    $(document).ready(function() {

        var currentToken;

        var checkToken = function() {
            $.getJSON('/token.json', function(data) {
                if (!currentToken) {
                    // first poll
                    currentToken = data.currentToken;
                    return;
                }

                if (currentToken !== data.currentToken) {
                    // a new token is set by the admin. Reload the page
                    window.location.reload();
                }
           });
        };

        // check if the token is still valid every 2 seconds
        window.setTimeout(checkToken, 2000);

    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T15:38:12.690

根据 thaJeztah 所说的，进行一些修改......

创建一个名为 token.json 的文件，其中包含以下内容：

```
{"currentToken":"1039593029484930294820"} 
```

使用以下脚本，假设 jQuery（1.10.2 为我工作）

```
<script>
$(document).ready(function() {
    var currentToken_js;
    var checkToken = function() {
        $.getJSON( '/token.json', {
            tags: "currentToken",
            tagmode: "any",
            format: "json"
        }).done(function( data ) {
            if (!currentToken_js) {
                // first poll
                currentToken_js = data.currentToken;
                return;
            }
            if (currentToken_js != data.currentToken) {
                currentToken_js = data.currentToken;
                window.location.reload();
            }
        });
        window.setTimeout(checkToken, 2000);
    };
    window.setTimeout(checkToken, 2000);
});
</script> 
```

您所要做的就是修改 token.json 文件中 currentToken 的值，所有实例都应该刷新。

# string - 在excel中查找特定字符串，复制特定字符串并复制到同一行的新单元格

> ID：15693648
> 
> 赞同：-1
> 
> 时间：2013-03-28T23:00:07.620
> 
> 标签：string, excel, vba, extract

虽然学习，但我在 VBA 或 python 编程方面没有经验。我有一个 excel 文件，其中包含一个`ab/c/defg/0123/456`可变长度（文本和数字）字符串中的一个非常具体的字符串。变量字符串始终位于电子邮件的主题标题中。出于目的，我已将其提取为 excel。

我想要完成的是`ab/c/defg/0123/456`在 excel 文件中查找字符串并将该特定字符串复制到同一 excel 中同一行中的空单元格中。如果未找到该字符串，则单元格将留空。为了使其更复杂，字符串也可能显示为`ab/c/defg/**123**/456`反斜杠或正斜杠。

在 excel 中，函数 split、MID、left、right 没有帮助，因为字符串可能随机出现在字符串中：类似于以下内容：

第 1 行：ab/c/defg/0123/456 blablabla 03/10/2012 - 05/11/2012 - blablabla。
第 2 行：blablabla 04/10/2012 - 01/11/2012 - blablabla blablabla，blablabla blablabla ab/c/defg/0123/456。
第 3 行：blablabla ab/c/defg/0123/456 blablabla
第 4 行：blablalbla 13/10/2012 - blablabla
第 5 行：blablalbla；blablabla blablablablablabla blablabla ab/c/defg/0123/456 - blablabla 1234456

结果将是： cd
row1: ab/c/defg/0123/456 blablabla 03/10/2012 - 05/11/2012 - blablabla。ab/c/defg/0123/456
等......
第 4 行第 d 列将比没有值/空

该文件包含大约。9000 行，但在分析不同的邮箱/excel 文件时可能会更大。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:09:27.193

首先，可能最好的想法是使用`Range.Find`方法。如果找到字符串，它会为您提供信息，并返回找到字符串的范围/单元格（如果是的话）。我警告你的 - 小心额外的参数，这些`.Find`方法可能不需要，但似乎你最终必须使用它们。

这是[方法描述的链接](http://msdn.microsoft.com/en-us/library/ff839746%28v=office.14%29.aspx)。您会发现其中的示例非常有用。另外还要检查`.Range.FindNext`属性。

您可以对宏记录器进行一些体验，因为它完全支持`.Find`功能。

如果您最终知道工作表中的查找结果在哪个单元格中，那么您可以很容易地找到该行中的任何单元格，例如。从右边看时，第一个空单元格是这样得到的：

```
Dim rngFound as Range 
'if rngFound represent cell where is your string
'then first free cell from the right:
Dim rngFreeThisRow as Range
Set rngFreeThisRow = Cells(rngFound.Row, Columns.Count).End(xlToLeft).Offset(0,1) 
```

对斜杠和反斜杠的备注。您可能需要多次搜索，并且每次都必须更改“要搜索的数据”，例如：

1.  在第一步你可以搜索`ab/c/defg/123/456`（精确匹配）
2.  如果在下一步找不到，您可以搜索`Replace("ab/c/defg/123/456". "/", "\")`
3.  `*`但是，如果您的字符串中有任何类型的模式，使用替换标记（如and ）可能会更好，`?`例如。`ab?c?defg?123?456`或者 `ab?c?defg?*123?456`
4.  等等...

# java - 在 if 语句中使用“%”运算符

> ID：15693649
> 
> 赞同：-3
> 
> 时间：2013-03-28T23:00:07.767
> 
> 标签：java, if-statement, operator-keyword

```
int i = 100;

do
{
    if (i % 5 = 0)
    {
        i++;
    } 
```

当我尝试在我的程序中编译上述代码时，出现错误：

```
"error: unexpected type
required: variable
found: value" 
```

插入键位于 % 运算符本身之下。我正在尝试编写一个程序来测试从 100 到 200 的所有数字，看看它们是否可以被 5 或 6 整除，而我已经被困在这里了。任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T23:00:52.597

您需要使用`==`运算符来比较 和 的`i % 5`结果`0`。`=`运算符是赋值运算符。错误消息来自您无法分配`0`给的事实`i % 5`，这不是变量。

# objective-c - 在调用 drawRect 后更改路径的填充颜色

> ID：15693652
> 
> 赞同：0
> 
> 时间：2013-03-28T23:00:21.797
> 
> 标签：objective-c

我正在为 iPhone/iPad 编写一个简单的游戏，但在处理我想要的触摸时遇到了麻烦。

我有一个 class 的主视图，`Board`其中包含 class 的几个视图`Piece`。当用户触摸一块时，我想让它改变颜色。我在保存对象颜色`UIColor`的`Piece`类中有一个类型的属性，我可以在触摸时成功更改它。

我的问题是：如何更改我的作品的填充颜色以反映属性所说的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:12:09.050

如果您已`drawRect`在 Piece 类上实现，则需要执行适当的核心图形调用来设置填充颜色或描边颜色以匹配您的颜色属性。如果您已经这样做了，那么您可能需要`[thePiece setNeedsDisplay]`在更改颜色属性后调用。

如果您还没有并且不打算为您的 Piece 类实现 drawRect，那么您最好使用现有的 UIView 属性`backgroundColor`而不是您自己的 color 属性。

如果您发布一些代码，我可能会给您更具体的建议。

# c++ - 如何存储字符串，同时保留提取格式化字符串的能力（如 cout）？

> ID：15693653
> 
> 赞同：0
> 
> 时间：2013-03-28T23:00:25.933
> 
> 标签：c++, winapi, fstream

我目前正在开发一个适用于 Windows8 和 Win32 的静态库，并且遇到了我想加载文本文件的问题。收集原始数据是一个简单的步骤，唯一的问题是我还想保留一些 fstreams 功能，更准确地说是提取运算符 (>>)，因为有很多解析代码使用该运算符。是否有一种简单的方法可以使用一些标准库代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:01:48.973

你可以[`std::stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)用你的`std::string`：

```
std::string str = "string I want to parse";
std::stringstream ss(str); 
```

此类型派生自`std::basic_iostream`，因此您可以随意使用相同的提取和插入运算符。例如：

```
std::string word;
ss >> word; // Extracts the word "string" 
```

如果您只想从中提取，请尝试使用[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream).

# java - phpMyAdmin 对 MySQL 有什么特殊的访问权限吗？

> ID：15693655
> 
> 赞同：-2
> 
> 时间：2013-03-28T23:00:36.560
> 
> 标签：java, php, mysql, phpmyadmin

我正在用 JAVA 开发一个跨平台的 MySQL 管理软件，类似于 phpMyAdmin，但更人性化，更易于使用。到目前为止，一切正常。该软件使用标准方法访问 MySQL 服务器，例如每个网站：主机名、用户名、密码、端口。

除了用户身份验证之外，我是否需要对 MySQL 服务器进行任何特殊访问，才能使其成为一个全功能的类似 phpMyAdmin 的管理工具？phpMyAdmin 有什么特别之处吗，或者它只是一个与 MySQL 通信的“网站”，就像任何其他网站一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:08:06.263

phpMyAdmin 没有什么特别之处，它只是一个客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:06:09.963

phpmyadmin 也像任何其他程序一样连接到 mysql 数据库。

但是，您可以添加一些需要直接访问硬盘上文件的功能——例如，能够实时观看服务器日志文件可能会很好。有了类似的东西，您可以让您的 Web 界面的用户查看应用程序执行的数据库查询。

# java - 在使用补间动画缩小尺寸后，imageview单击侦听器仍然有效

> ID：15693658
> 
> 赞同：1
> 
> 时间：2013-03-28T23:00:51.357
> 
> 标签：java, android, android-animation

根据这个补间动画指令，我将 imageview 大小更改为 0，然后它消失了：

```
<scale xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="400"
android:fromXScale="1"
android:fromYScale="1"
android:interpolator="@android:anim/accelerate_interpolator"
android:pivotX="50%"
android:pivotY="50%"
android:toXScale="0"
android:toYScale="0" /> 
```

但我的问题是，在消失后，我的图像视图仍然可以点击并且 clicklistener 有效！我想缩小图像视图并使其消失并单击不起作用。为什么会这样？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:02:00.947

您可以在 animationEnd 处将 imageView 的可见性设置为 GONE。

# c++ - 我的 .h 文件有问题

> ID：15693663
> 
> 赞同：1
> 
> 时间：2013-03-28T23:01:24.233
> 
> 标签：c++, header, include

这是我的两个类，Node 和 DobleNode，它们都在不同的 .h 文件中，并且它们都有自己的 .cpp 文件。

```
//"Node.h" 

class Node
{
public:

    Node(string pName, string pID);
    void setReferencia(DobleNode *pReferencia);
    DobleNode* getReferencia(void);

private:

    string Name;
    string ID;
    DobleNode *referencia;
};

//"DobleNode.h"

class DobleNode
{
public:

    DobleNode(string pBank_code, string pCard_type);
    void setReferencia(Node *pReferencia);
    Node* getReferencia(void);

private:

    string bank_code;
    string card_type;
    Node *referencia;
}; 
```

问题是我需要参考。在 Node 类中，必须有一个 DobleNode 类型的属性，在 DobleNode 类中，必须有一个 Node 类型的属性。看起来很简单，我只需要在“Node.h”之前包含“DobleNode.h”，一切都会奏效......

但是，如果我这样做，稍后，当我尝试编译我的小程序时，它会说标识符 Node 不存在。如果我换一种方式，它会说同样的事情，但这次标识符 DobleNode 是不存在的。

我该如何解决这个问题，我认为解决方案可能是将两个类放在同一个文件中，但我真的认为有更好的方法来解决这个问题。有没有办法“告诉”编译器同时检查“Node.h”和“DobleNode.h”，或者什么？

感谢您的回答。

顺便说一句，我正在使用 Visual Studio 2010 Proffesional，C++（显然）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T23:04:33.063

您可以前向声明一个类，因为您使用的是指针。

```
//"DobleNode.h"

class Node;   // DECLARED!  "Node.h" doesn't need to be included.

class DobleNode
{
    ... 
```

和

```
//"Node.h" 

class DobleNode;   // DECLARED!  "DobleNode.h" doesn't need to be included.

class Node
{
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T23:04:07.720

放“类节点；” 和“类 DobleNode；” 在一个/两个标题的顶部。

例如（带结构）

```
struct node1;
struct node2;

struct node1 { struct node2 *p; };
struct node2 { struct node1 *p; }; 
```

它与类相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T23:10:48.087

您遇到了问题，因为如果两个文件相互包含，则会导致无限循环包含。为避免这种情况，您的代码中可能包含预编译器标头，告诉它不要包含已包含的代码。但是，这会导致您的一个类没有定义另一个类

有两种解决方案。您可以按照 Drew Dormann 的描述进行前向声明。

但是，我猜测您的目的是使用 Node 和 DoubleNode 都继承自的虚拟类可能更合适，因为您似乎在每个中都有类似的方法。这将使您免于为常用方法复制代码并使编辑更容易。

例如

```
//"Node.h" 

class Node : public NodeBase
{
public:

private:

    string Name;
    string ID;
};

//"DobleNode.h"

class DobleNode : public NodeBase
{
public:

private:

    string bank_code;
    string card_type;
};

//"NodeBase.h" 

class NodeBase
{
public:

    Node(string pName, string pID);
    void setReferencia(NodeBase *pReferencia);
    NodeBase* getReferencia(void);

protected:
    NodeBase *referencia;
}; 
```

# javascript - 如何以编程方式滚动 HTML 元素？

> ID：15693665
> 
> 赞同：9
> 
> 时间：2013-03-28T23:01:37.117
> 
> 标签：javascript, css, html, iframe

我正在尝试创建一个网页，其中包含用户可以从中选择的元素表。元素的数量可以小到单个元素，但也可以增长到大约 120 个。我不希望表格向下延伸页面，所以我将其填充到`<div>`具有定义高度和垂直滚动条。一个简单的例子：

```
<div style="width:100px; height:100px; overflow-y:scroll; overflow-x:hidden;">
  <table>
    <tr><td>item 1</td></tr>
    <tr><td>item 2</td></tr>
    <tr><td>item 3</td></tr>
    <tr><td>item 4</td></tr>
    <tr><td>item 5</td></tr>
    <tr><td>item 6</td></tr>
    <tr><td>item 7</td></tr>
    <tr><td>item 8</td></tr>
    <tr style="color:#00aa00"><td>item 9</td></tr>
  </table>
</div> 
```

在此示例中，表格位于垂直滚动区域中，活动项是表格中的最后一项。到现在为止还挺好。

**我的问题是：**更新此表时，如何设置它以使其自动滚动到末尾？例如，创建页面时，应该自动选择元素#9；UI 应该已经在列表中突出显示该项目，这意味着自动将滚动条设置到末尾。

我看不到使用`<div>`标签的方法（尽管我可能遗漏了一些东西）。我需要以`<iframe>`某种方式使用标签吗？我想如果表格的每一行都有一个锚标签，那么滚动位置可以这样设置。不过，我不完全确定该怎么做，所以我想我会问。

我知道可能有我可以使用的数据表插件来执行此操作（我之前使用过[YUI](http://yuilibrary.com/)，但我从未想过它是否可以解决这个特定问题）。但这似乎很简单，我觉得我不需要导入任何可以轻松用作整个浏览器内电子表格的插件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T23:23:38.923

尝试这样的事情：http: [//jsfiddle.net/2yMWC/1/](http://jsfiddle.net/2yMWC/1/)（没有jQuery）

The idea is that when an element is selected, you take note of that element's `offsetTop`property in JavaScript, and then update the `<div>`element's `scrollTop`to match. 我添加了一些 CSS 使行的高度不一致，只是为了检查该技术的稳健性。

这是一个更通用的示例，用户可以选择任何行并在那里跳转/滚动：http: [//jsfiddle.net/2yMWC/](http://jsfiddle.net/2yMWC/)

# JavaScript

```
var divEl = document.getElementById("scroll-pane");
var selectedTrEl = undefined;

function select(index) {
    var trEl = divEl.getElementsByTagName("tr")[index];
    if(selectedTrEl) {
        selectedTrEl.className = "";
    }
    selectedTrEl = trEl;
    selectedTrEl.className = "selected";
    var scrollTo = selectedTrEl.offsetTop;
    divEl.scrollTop = scrollTo;
}

select(76);

(function forever() {
    var trEls = divEl.getElementsByTagName("tr");
    var itemNumber = trEls.length;
    var tdEl = document.createElement("td");
    tdEl.appendChild(document.createTextNode("item "+itemNumber));
    var trEl = document.createElement("tr");
    trEl.appendChild(tdEl);
    trEls[0].parentNode.appendChild(trEl);
    select(itemNumber);
    setTimeout(forever, 1000);
}()); 
```

# 的HTML

```
<div id="scroll-pane" style="width:250px; height:100px; overflow-y:scroll; overflow-x:hidden;">
  <table>
    <tr><td>item 0</td></tr>
    <tr><td>item 1</td></tr>
    <tr><td>item 2</td></tr>
    <tr><td>item 3</td></tr>
    <tr><td>item 4</td></tr>
    <tr><td>item 5</td></tr>
    <tr><td>item 6</td></tr>
    <tr><td>item 7</td></tr>
    <tr><td>item 8</td></tr>
    <tr><td>item 9</td></tr>
    <tr><td>item 10</td></tr>
    <tr><td>item 11</td></tr>
    <tr><td>item 12</td></tr>
    <tr><td>item 13</td></tr>
    <tr><td>item 14</td></tr>
    <tr><td>item 15</td></tr>
    <tr><td>item 16</td></tr>
    <tr><td>item 17</td></tr>
    <tr><td>item 18</td></tr>
    <tr><td>item 19</td></tr>
    <tr><td>item 20</td></tr>
    <tr><td>item 21</td></tr>
    <tr><td>item 22</td></tr>
    <tr><td>item 23</td></tr>
    <tr><td>item 24</td></tr>
    <tr><td>item 25</td></tr>
    <tr><td>item 26</td></tr>
    <tr><td>item 27</td></tr>
    <tr><td>item 28</td></tr>
    <tr><td>item 29</td></tr>
    <tr><td>item 30</td></tr>
    <tr><td>item 31</td></tr>
    <tr><td>item 32</td></tr>
    <tr><td>item 33</td></tr>
    <tr><td>item 34</td></tr>
    <tr><td>item 35</td></tr>
    <tr><td>item 36</td></tr>
    <tr><td>item 37</td></tr>
    <tr><td>item 38</td></tr>
    <tr><td>item 39</td></tr>
    <tr><td>item 40</td></tr>
    <tr><td>item 41</td></tr>
    <tr><td>item 42</td></tr>
    <tr><td>item 43</td></tr>
    <tr><td>item 44</td></tr>
    <tr><td>item 45</td></tr>
    <tr><td>item 46</td></tr>
    <tr><td>item 47</td></tr>
    <tr><td>item 48</td></tr>
    <tr><td>item 49</td></tr>
    <tr><td>item 50</td></tr>
    <tr><td>item 51</td></tr>
    <tr><td>item 52</td></tr>
    <tr><td>item 53</td></tr>
    <tr><td>item 54</td></tr>
    <tr><td>item 55</td></tr>
    <tr><td>item 56</td></tr>
    <tr><td>item 57</td></tr>
    <tr><td>item 58</td></tr>
    <tr><td>item 59</td></tr>
    <tr><td>item 60</td></tr>
    <tr><td>item 61</td></tr>
    <tr><td>item 62</td></tr>
    <tr><td>item 63</td></tr>
    <tr><td>item 64</td></tr>
    <tr><td>item 65</td></tr>
    <tr><td>item 66</td></tr>
    <tr><td>item 67</td></tr>
    <tr><td>item 68</td></tr>
    <tr><td>item 69</td></tr>
    <tr><td>item 70</td></tr>
    <tr><td>item 71</td></tr>
    <tr><td>item 72</td></tr>
    <tr><td>item 73</td></tr>
    <tr><td>item 74</td></tr>
    <tr><td>item 75</td></tr>
    <tr><td>item 76</td></tr>
    <tr><td>item 77</td></tr>
    <tr><td>item 78</td></tr>
    <tr><td>item 79</td></tr>
    <tr><td>item 80</td></tr>
    <tr><td>item 81</td></tr>
    <tr><td>item 82</td></tr>
    <tr><td>item 83</td></tr>
    <tr><td>item 84</td></tr>
    <tr><td>item 85</td></tr>
    <tr><td>item 86</td></tr>
    <tr><td>item 87</td></tr>
    <tr><td>item 88</td></tr>
    <tr><td>item 89</td></tr>
    <tr><td>item 90</td></tr>
    <tr><td>item 91</td></tr>
    <tr><td>item 92</td></tr>
    <tr><td>item 93</td></tr>
    <tr><td>item 94</td></tr>
    <tr><td>item 95</td></tr>
    <tr><td>item 96</td></tr>
    <tr><td>item 97</td></tr>
    <tr><td>item 98</td></tr>
    <tr><td>item 99</td></tr>
  </table>
</div> 
```

# 一些 CSS

```
.selected {
    color:#00aa00
}
table tr:nth-child(2n) {
    font-size:200%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:03:54.237

您只需将容器元素的`scrollTop`属性设置为其`scrollHeight`属性即可使其滚动到底部。

或者，您可以将其设置为目标元素的`offsetTop`（甚至从中减去一些以使其更接近视图的中间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:14:56.113

您可以使用原版 HTML 做到这一点。给元素一个 ID 属性并将 ID 附加到 url。它将充当目的地锚点：

```
<div style="width:100px; height:100px; overflow-y:scroll; overflow-x:hidden;">
  <table>
    <tr><td>item 1</td></tr>
    <tr><td>item 2</td></tr>
    <tr><td>item 3</td></tr>
    <tr><td>item 4</td></tr>
    <tr><td>item 5</td></tr>
    <tr><td>item 6</td></tr>
    <tr><td>item 7</td></tr>
    <tr><td>item 8</td></tr>
    <tr style="color:#00aa00" id="new"><td>item 9</td></tr>
  </table>
</div> 
```

Going to`http://yourwebsite.com/some-page#new`将跳转到第 9 项。

w3.org 上的更多信息（注意 URL 中的锚点）：[http ://www.w3.org/TR/html4/struct/links.html#h-12.1.3](http://www.w3.org/TR/html4/struct/links.html#h-12.1.3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-25T14:28:40.613

有这个`element.scrollIntoView()`功能做得很好。
检查[https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)

在您的情况下，这`element`将是您想要显示的 LI。
该函数可以选择将其设置在容器的顶部或底部，或者使用更新的参数设置在其他位置。

# iphone - Settings.bundle ... 为什么我的代码不能通过 [NSUserDefaults standardUserDefaults] 访问这些值？

> ID：15693671
> 
> 赞同：1
> 
> 时间：2013-03-28T23:01:57.663
> 
> 标签：iphone, ios, nsuserdefaults, settings.bundle

我不明白逻辑：

当我创建一个设置包时，从代码访问时值为零

```
[[NSUserDefaults standardUserDefaults] stringForKey:@"mykey1"] 
```

但是只要我通过 Settings.app 触摸这个键，我的代码就可以读取这个键。

我发现的解决方案需要读取文件“Root.plist”，从中构建字典、`register`值和`synchronize`它们。

我多次阅读 Apple 文档 - 我仍然不理解交付具有一组标准设置的应用程序的想法和标准模式。

对我的学习有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:19:09.010

Settings.bundle 的存在对`NSUserDefaults`. 直到值从其默认值更改后，该值才会反映在`NSUserDefaults`.

正确的解决方案是使用`NSUserDefaults registerDefaults:`. 在许多情况下，您会使用`Root.plist`. 你不需要为此打电话`synchronize`。每次您的应用程序运行时都会注册默认值。这些值并未实际存储。当您从 请求一个值时`NSUserDefaults`，如果不存在显式值，则查看注册的默认值以获取值。

您应该在应用程序启动时尽快注册默认值。

# jquery - 如何从表单选择元素发送数据？

> ID：15693672
> 
> 赞同：0
> 
> 时间：2013-03-28T23:02:04.837
> 
> 标签：jquery

如何从`<select>`元素中选择一个选项，然后将该值发送到 MySQL？之后，我希望以编程方式单击“保存”按钮。

**HTML：**

```
<body>
<form>
<select name="ABCD">
<option value="A">A</option>
<option value="B">B</option>
<option value="D">C</option>
<option value="c">D</option>
</select>
<input type="submit" value="save" />
</form>
</body> 
```

**jQuery :**

```
<script>
$.ajax({
  url: "ABC.php",
  data:{ABCD:'B'},
  datatype: "html",
  success: function(data){

   $(data).find("form").find("input[type=submit]").click();
  }
});
</script> 
```

我试过这个：

```
data:{ABCD:'B'} //json 
```

它确实按下了保存按钮，但没有将数据发送到 MySQL。

我怎样才能既发送选定的值并单击保存按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:14:06.117

我认为您想在选择时发送数据。

```
<body>
<form>
<select name="ABCD" onchange="yourFunction(this.value)">
<option value="A">A</option>
<option value="B">B</option>
<option value="D">C</option>
<option value="c">D</option>
</select>
</form>
</body>

<script>
function yourFunction(val){
    $.ajax({
      url: "ABC.php",
      data:{ABCD:val},
      datatype: "html",
      success: function(data){
        $(data).find("form input[type=submit]").trigger('click');
      }
    });
}
</script> 
```

**或者**

```
<form>
<select id="ABCD" name="ABCD">
<option value="A">A</option>
<option value="B">B</option>
<option value="D">C</option>
<option value="c">D</option>
</select>
</form>
</body>

<script>
$('#ABCD').change(function(){
    var val = $(this).val();
    $.ajax({
      url: "ABC.php",
      data:{ABCD:val},
      datatype: "html",
      success: function(data){
       $(data).find("form input[type=submit]").trigger('click');
      }
    });
});
</script> 
```

# mysql - 失败需要'mysql2'

> ID：15693673
> 
> 赞同：0
> 
> 时间：2013-03-28T23:02:06.690
> 
> 标签：mysql, ruby, mysql2

我在需要 mysql2 gem 时遇到问题。在我的本地副本上它工作得很好，但在我试图运行我的脚本的虚拟机上，要求失败。这是VM的信息。

```
Windows 7 64bit
Ruby 1.9.3
MySQL 5.6
mysql2 gem 0.3.11 x86-ming32 
```

这是我需要 mysql2 时得到的错误

```
LoadError: 126 The specified module could not be found.  - c:/Ruby193/.../mysql2.so 
```

当我去查看这个目录时，文件 mysql2.so 就在那里。
这可以归因于在 64 位版本的 Windows 上运行它吗？

好的，所以我刚刚报废了旧虚拟机并获得了一个新实例，但这次是 32 位 Windows 7。当我需要 mysql2 时，我仍然遇到同样的错误！帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:50:28.117

这可能是由于 ruby​​ 是 32 位而 mysql 是 62 位造成的。

阅读：[http ://blog.mmediasys.com/2011/07/07/installing-mysql-on-windows-7-x64-and-using-ruby-with-it/](http://blog.mmediasys.com/2011/07/07/installing-mysql-on-windows-7-x64-and-using-ruby-with-it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:14:11.143

好的，所以我重新安装了 MySQL 连接器/C 以确保我运行的是 6.0.2。[然后我从http://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip](http://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip)添加了 libmysql.dll并将其放入我的 c:\Ruby\bin

现在它需要正确！

# c - C 宏上的 ACSL 注释

> ID：15693674
> 
> 赞同：1
> 
> 时间：2013-03-28T23:02:14.930
> 
> 标签：c, static-analysis, c-preprocessor, design-by-contract, frama-c

是否可以使用 ACSL 注释 C 宏？

例如：

```
/*@
    assigns \nothing;

    behavior xmin:
        assumes x < y;
        ensures \result == x;

    behavior ymin:
        assumes y <= x;
        ensures \result == y;

    disjoint behaviors;
    complete behaviors; 
@*/
#define min(x,y) (x < y ? x : y) 
```

甚至函数调用，例如

```
#define min(x,y) __min(x,y) 
```

我已经尝试过了，但没有成功。我做错了什么还是根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:00:54.490

在 frama-c 中存在一个允许对宏进行预处理的标志：`-pp-annot`. 自动展开所有宏调用，因此您不需要注释宏，这是在使用这些宏的函数中需要的地方完成的。

简单的例子：

```
#define min(x,y) (x < y ? x : y)

/*@
    requires 0 <= x <= 100000 && 0 <= y <= 100000; // for overflow...
    assigns \nothing;

    behavior xmin:
        assumes x < y;
        ensures \result == 2*x;

    behavior ymin:
        assumes y <= x;
        ensures \result == 2*y;

    disjoint behaviors;
    complete behaviors; 
@*/
int double_of_min(int x, int y){
    int a = min(x,y);   
    return 2*a;
} 
```

# r - SVM 交叉验证始终相同

> ID：15693675
> 
> 赞同：1
> 
> 时间：2013-03-28T23:02:23.007
> 
> 标签：r, svm

使用以下代码，我正在尝试执行留一法交叉验证。

```
library(e1071)
library(plyr)

trainingdata<-read.table('data.txt', sep=",", header=TRUE)
f0 <- function(x) any(x!=1) & any(x!=0) & is.numeric(x)
trainingdata<-cbind(colwise(identity, f0)(trainingdata))

C <- 0
M <- 0
count <- nrow(trainingdata)
for(i in 1:count)
{
   actual <- trainingdata[i,]$label
   trainingtemp <- trainingdata[-c(i), ]

   model <- svm(factor(label)~., data=trainingtemp, method="C-classification",     
   kernel="sigmoid", C=0.1, gamma=0.01, cross=10)

   testdata <- trainingdata[i, ]
   prediction <- predict(model, testdata)
   prediction <- paste(prediction)

   if(actual==prediction)
      C <- C+1
   else
      M <- M+1
}

write.csv(data.frame(C,M)) 
```

我不明白的问题是我总是得到相同的 C（正确分类）和 M（错误分类）值。在以下条件下结果相同：

1 - 我尝试了不同的 Cost 和 gamma 值（也尝试了 best.svm() 函数）

2 - 也尝试了不同的分类方法+不同的内核。

3 - 数据集中共有大约 50 个特征。即使在构建模型时使用了任何一个特征，即 (svm(label~x1...) 或 svm(label~x2...)，结果也没有影响。

代码有问题吗？数据非常大，可以在这里发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:41:19.183

*   为您的 svm 调用使用`iris`数据和不同的 gamma，我确实得到了不同的预测。

*   我建议您将所有预测放入一个向量中，并在 cv 完成后比较预测和正确的标签。这样，您可以更轻松地检查预测是否确实发生了变化。

*   如果没有您的数据以及 C 和 gamma 的选择，我们将无法为您提供任何进一步的帮助。

*   *（顺便说一句，不*建议使用留一法验证，因为您无法对其进行迭代。您可能希望浏览例如[有关 crossvalidated 上的验证方案的内容](https://stats.stackexchange.com/questions/tagged/cross-validation)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:13:34.147

您正在创建“trainingtemp”作为保留数据，但始终将完整数据“trainingdata”传递给模型。尝试修改您的模型，例如：

```
model <- svm(factor(label)~., data=trainingtemp, method="C-classification",     
   kernel="sigmoid", C=0.1, gamma=0.01, cross=10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-17T21:57:06.603

这可以特定于您的数据，因为对于不同的数据，我也会得到不同的值（正如 cbeleites 指出的那样）。

因此，如果您可以将数据放在某个可共享的地方。

另外作为一个小评论，我没有得到在构建模型时使用“cross=10”的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T03:22:32.077

我真的不太了解 R 或您的不同调用在做什么。我知道您正在尝试使用留一法 (LOO)。以下是一些需要检查的事项：

*   您是否正在标准化您的数据？使所有值都位于 0 和 1 之间（或 -1 和 1 之间），无论是线性还是使用均值和标准偏差？这对于 SVM 非常重要，对于 RBF 内核更是如此，如果你不这样做，你很容易遇到数值困难。
*   您是否在系统地参数搜索 C 的良好值（或在 RBF 内核的情况下为 C 和 gamma）？进行交叉验证或保留集？根据我对您的 R 代码的理解，您似乎并没有这样做。为什么不在代码之外尝试两个 fors，一个测试 2^[-10...0] 的 gamma 和 2^[-5...5] 的 C？这就是真正所谓的交叉验证，我认为您只是在进行内部迭代并且缺少几个 for 循环。

# javascript - Parse.com 的 Cloud Code 中应该如何处理异步？

> ID：15693677
> 
> 赞同：3
> 
> 时间：2013-03-28T23:02:29.770
> 
> 标签：javascript, asynchronous, parse-platform

我拼命地寻找这个问题的答案，并以艰难的方式得出了这个答案。希望其他人能够挽救我所遭受的失去的时间。也许有人会用改进或更好的模式来回答。

**编辑：** *我在这里输入的一组较早的代码已被替换。*

在此方法中，您可以看到如何在没有回调嵌套的情况下对异步操作进行多次调用。它还展示了如何将异步代码放入较小的可调用函数中。该方法还可以调用多个级别的异步函数。在每个级别，可以将多个异步操作串在一起以满足其意图。错误可以向上传递，并且可以通过.thens 序列冒泡。

日志输出应该有助于理解真正发生了什么。

作为解析和 JS 初学者，有两件事对我有帮助：1) 解析 JS 操作在返回 Promise 时似乎是异步的，否则，一个例外是 query.get()。2) 非常小心 .then 调用的语法。3) .then 错误函数不会捕获抛出的错误。要导致错误，请使用“return Parse.Promise.error()”。4) 要理解承诺，请观看 Mike Taulty 的截屏视频，很容易用谷歌搜索，谢谢 Mike。

此代码已在 Parse.com 上进行了测试。

```
function test0()
{
    console.log("test0.entry");
    var promise0 = test1("T", "col", "test1call1");

    var promise1 = promise0.then(function(ex) {
        console.log("test0.0.success - " + ex);
        return test1("T", "emailAddress", "test1call2");
    });
    var promise2 = promise1.then(function(ex) {
        console.log("test0.1.success - " + ex);
        return test2(1);
    });
    promise2.then(function(msg) {
        console.log("test0.2.success - " + msg);
        return;
    }, function(error) {
        console.log("test0.2.error " + error.message);
        return;
    });
    console.log("test0.exit");
}

function test1(clss, col, val) 
// use as a method on a save request
// returns true if the column value already exists
{
    console.log("[" + val + "]" + "test1.entry");
    var c = Parse.Object.extend(clss);
    var query = new Parse.Query(c);

    query.equalTo(col, val);
    var promise1 = query.count();
    var promise2 = promise1.then(function(count) {
        console.log("[" + val + "]" + "test1.sub.success - " + count);
        if (col == "reject") {    
            var err = new Parse.Error(10001, "new test error");
            console.log("[" + val + "]" + "test1.sub.success - return test error");
            return Parse.Promise.error(new Parse.Error(10001, "test error (10001)"));
        } 
        return(count>0);
    }, function(error) {
        console.log("[" + val + "]" + "test1.sub.error " + error.get("message"));
        return(false);
    });
    console.log("[" + val + "]" + "test1.return");
    return promise2;
};

function test2(n) 
// use as a method on a save request
// returns true if the column value already exists
{
    console.log("test2.entry");
    var c = Parse.Object.extend("T");
    var query = new Parse.Query(c);

    query.equalTo("col", "val");
    var promise1 = query.count();
    var promise2 = promise1.then(function(count) {
        console.log("test2.promise1.success - " + count);
        if (n==1) {
            return test1("T", "reject", "test2call1e");
        } else {
            return test1("T", "col", "test2call1");
        }
    });

    var promise3 = promise2.then(function(count) {
        console.log("test2.promise1.success - " + count);
        if (n==2) {
            return test1("T", "reject", "test2call2e");
        } else {
            return test1("T", "col", "test2call2");
        }
    });

    var promise4 = promise3.then(function() {
        console.log("test2.promise3.success - " + count);
        return "test2 completed";
    }, function(error) {
        // Catch some errors here and repair them
        console.log("test2.promise3.error - " + error.message);
        return Parse.Promise.as("test2 completed - error repaired");
    });

    console.log("test2.exit");
    return promise4;
}; 
```

它产生了这个输出。

```
I2013-03-30T01:58:19.983Z] test0.entry
I2013-03-30T01:58:19.983Z] [test1call1]test1.entry
I2013-03-30T01:58:19.984Z] [test1call1]test1.return
I2013-03-30T01:58:19.984Z] test0.exit
I2013-03-30T01:58:20.085Z] [test1call1]test1.sub.success - 0
I2013-03-30T01:58:20.085Z] test0.0.success - false
I2013-03-30T01:58:20.085Z] [test1call2]test1.entry
I2013-03-30T01:58:20.085Z] [test1call2]test1.return
I2013-03-30T01:58:20.186Z] [test1call2]test1.sub.success - 0
I2013-03-30T01:58:20.186Z] test0.1.success - false
I2013-03-30T01:58:20.186Z] test2.entry
I2013-03-30T01:58:20.187Z] test2.exit
I2013-03-30T01:58:20.338Z] test2.promise1.success - 0
I2013-03-30T01:58:20.338Z] [test2call1e]test1.entry
I2013-03-30T01:58:20.338Z] [test2call1e]test1.return
I2013-03-30T01:58:20.439Z] [test2call1e]test1.sub.success - 0
I2013-03-30T01:58:20.439Z] [test2call1e]test1.sub.success - return test error
I2013-03-30T01:58:20.439Z] test2.promise3.error - test error (10001)
I2013-03-30T01:58:20.439Z] test0.2.success - test2 completed - error repaired 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T07:14:04.343

如果将许多内联函数链接在一起，在 Parse 上使用 Promises 会变得更加困难。相反，我所做的是将每个动作定义为一个函数，然后将它们链接在一起，并用最后一个块用 and 完成`handleSuccess`它们`handleError`。这样，每个函数都是独立的并且易于理解，而链式序列是有组织的并且易于更新。

`fetchThing`和函数都`updateThing`返回一个包含`thing`实例的 Promise。获取的值被传递给更新函数，然后被传递给链式序列中的下一个函数。

```
var fetchThing = function(objectId) {
    // set up a query with objectId
    return query.find();
};

var updateThing = function(thing) {
    // set properties on thing
    return thing.save();
}

var handleSuccess = function(result) {
    response.success(result);
};

var handleError = function(error) {
    response.error(error);
};

var objectId = 'asdfad';

fetchThing(objectId).then(function(thing) {
    return updateThing(thing);
}).then(handleSuccess, handleError); 
```

我创建了一个完整的示例，我在 GitHub 上分享了该示例，它使用这种编程风格与 Cloud Code 和 Promises。

[https://github.com/brennanMKE/PostThings/blob/master/Parse/PostThings/cloud/main.js](https://github.com/brennanMKE/PostThings/blob/master/Parse/PostThings/cloud/main.js)

# c++ - Opengl 索引数组更改另一个对象索引数组

> ID：15693679
> 
> 赞同：0
> 
> 时间：2013-03-28T23:02:48.467
> 
> 标签：c++, opengl

我有 2 个不同的对象，我想在一个场景中渲染它们。

当我初始化第一个对象时，我称之为代码：

```
float f[] = {
              -0.1f, 0.1f, 0.1f,  
               0.1f, 0.1f, 0.1f,
               0.1f,-0.1f, 0.1f,
              -0.1f,-0.1f, 0.1f,
              -0.1f, 0.1f,-0.1f,
               0.1f, 0.1f,-0.1f,
               0.1f,-0.1f,-0.1f,
              -0.1f,-0.1f,-0.1f

              }; 

  float c[] = {
              1.0f, 0.0f, 0.0f,  
              0.0f, 1.0f, 0.0f,
              0.0f, 0.0f, 1.0f,
              1.0f, 0.0f, 0.0f,  
              0.0f, 1.0f, 0.0f,
              0.0f, 0.0f, 1.0f,
              1.0f, 0.0f, 0.0f,  
              1.0f, 0.0f, 0.0f,  
  };

  unsigned int indarr[] = {2,3,6,7,4,3,0,2,1,6,5,4,1,0};

  glGenBuffers(2, vbo); 
  pos = vbo[0]; // Der Buffer für die Position
  col = vbo[1]; // Der BUffer für die Farbe

  glBindBuffer(GL_ARRAY_BUFFER, pos);
  glBufferData(GL_ARRAY_BUFFER, sizeof(f),f,GL_STATIC_DRAW); // Befüllen

  glBindBuffer(GL_ARRAY_BUFFER, col);
  glBufferData(GL_ARRAY_BUFFER, sizeof(c),c,GL_STATIC_DRAW); // Befüllen

  glGenVertexArrays(1, &vao);
  glBindVertexArray(vao);

  glEnableVertexAttribArray(0);
  glEnableVertexAttribArray(1);

  glBindBuffer(GL_ARRAY_BUFFER, pos);
  glVertexAttribPointer(0, 3, GL_FLOAT,GL_FALSE, 3*sizeof(float),0);
  glBindBuffer(GL_ARRAY_BUFFER, col);
  glVertexAttribPointer(1, 3, GL_FLOAT,GL_FALSE, 3*sizeof(float),0);

  glGenBuffers(1, &ind);
  glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ind);
  glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indarr),indarr,GL_STATIC_DRAW); 
```

这是渲染函数内部的代码：

```
 glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ind);
  glBindVertexArray( vao );
  glDrawElements(GL_TRIANGLE_STRIP, 14, GL_UNSIGNED_INT, 0);
  glBindBuffer(GL_ARRAY_BUFFER, 0);
  glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); 
```

当我在场景中渲染这个对象时，一切正常。当我尝试创建另一个对象时，问题就开始了。代码看起来像上面的示例，唯一的区别是，我更改了 f、c 和 intarr 数组。因为对象应该看起来不同。在第二个对象中我不需要这么多顶点，所以我改变了 indarr[]（我把它缩短了）。问题是，第一个对象似乎受到了这种变化的影响。

场景看起来像

```
obj1->render();
obj2->render(); 
```

有人可以帮我看看会发生什么吗？尤其是为什么它们会相互影响？

编辑：

嗯，我终于修复了错误，

旧的渲染函数如下所示：

```
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ind);
glBindVertexArray( vao );
glDrawElements(GL_TRIANGLE_STRIP, 14, GL_UNSIGNED_INT, 0);
glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); 
```

我把它改成这样：

```
glBindVertexArray( vao );
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ind);
glDrawElements(GL_TRIANGLE_STRIP, 14, GL_UNSIGNED_INT, 0);
glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); 
```

现在它可以工作了。我仍然不明白为什么会发生错误。也许有人现在可以解释一下吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T23:54:17.970

你在哪里声明vbo？我看到您将 pos 和 col 设置为 vbo[0] 和 vbo[1] 所以链接这些是您的成员变量，但我没有看到 vbo 的声明。

实际上，我需要查看更多代码才能在这里做出决定，因为它没有任何直接“错误”。

试着把

```
glFlush();
glBindVertexArray(0); 
```

在对象初始化代码的末尾。

自从

```
unsigned int indarr[] 
```

编辑和 f[] 和 c[] 以及

是本地的，当系统超出范围时，系统会释放其内存。然而，那时 OpenGL 可能还没有完全缓冲数据。您的下一个对象可能会在 openGL 读取之前覆盖该内存。

```
glFlush(); 
```

将使代码等到opengl完成。值得一试。

# .htaccess - RewriteRule htaccess 更改 URL

> ID：15693685
> 
> 赞同：1
> 
> 时间：2013-03-28T23:03:12.713
> 
> 标签：.htaccess

我想用 htaccess 制作一些“友好”的网址。在 localhost 上一切正常，但是当我在主机中上传相同的文件时，url 与 htaccess 中的写法不同。

代码：

```
RewriteEngine On
RewriteBase /

RewriteRule ^(.*)/$ /c.php?c=$1 [L]
RewriteRule ^(.*)/page/([0-9]+)$ /c.php?c=$1&p=$2 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/(.*)$ /a.php?a=$2 [L] 
```

在 localhost 上，链接已更正，它们类似于“localhost/word/page/2”，但在我的站点中它们是“mysite.com/c.php?c=word&p=2”。我尝试使用 R=302，R=301，但没有。Options +FollowSymlinks 不起作用，给我一个“500 错误”。

**编辑：通过选项 +SymLinksIfOwnerMatch 解决！**

# jquery - jQuery：根据进出时间计算小时数

> ID：15693690
> 
> 赞同：2
> 
> 时间：2013-03-28T23:03:41.223
> 
> 标签：jquery

我有两个文本框（时间进入和超时）。时间以这种格式输入，hh:mm AM 或 PM，我想计算时间和超时之间的小时数。我怎样才能做到这一点？

时间在上午 09:00

超时 05:00 PM

小时数应为 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:14:57.310

尝试这个

```
var start= new Date("2013-1-1 " + end_time);
var end=new Date("2013-1-1 " + start_time);

var finaltime=(start-end) / 1000 / 60 / 60; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:12:25.193

```
hours = parseInt(timeOut.substr(0,2)) + parseInt(timeOut.substr(3,2))/60;
hours += timeOut.substr(6,2)=="PM"?12:0;
hours -= parseInt(timeIn.substr(0,2)) - parseInt(timeIn.substr(3,2))/60;
hours -= timeIn.substr(6,2)=="PM"?12:0; 
```

前提是您检查到文本框中的数据与您在问题中指定的格式完全匹配。

您还可以获得小数小时的十进制值（例如 8 小时 30 分钟 ---> 8.5）

# javascript - javascript假instanceof

> ID：15693694
> 
> 赞同：1
> 
> 时间：2013-03-28T23:03:58.333
> 
> 标签：javascript, oop, constructor

我正在尝试使用这种模式创建一个“构造函数”：

```
function mything() {
    var a, b, c;
    ...
    return {
        publicFunc: function() {
            //access private vars here
        }
    };
}

//usage

mything1 = mything();
mything2 = mything(); 
```

问题是，我还想让它通过`instanceof`测试：

```
assert(mything1 instanceof mything === true); 
```

有没有办法做到这一点？使用常规构造函数将不起作用，因为原型函数无法访问私有变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:07:28.027

您需要使用稍微不同的设计模式来拥有私有变量并将其设置为 instanceof `mything`：

```
function mything() {
    var a, b, c;
    ...
    this.publicFunc = function() {
            //access private vars here
        }
    };
}

//usage

var mything1 = new mything();
mything1.publicFunc();
var mything2 = new mything(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:25:55.137

这在技术上是可行的，但您可以更优雅地解决您的问题（解释如下）：

```
function mything() {
  var a, b, c;

  function PrivateConstructor() {
    this.publicFunc = function() {}
  }

  // this is the magic that makes it happen:
  PrivateConstructor.prototype = mything.prototype; 

  return new PrivateConstructor();

}

mything1 = mything();
assert(mything1 instanceof mything); // passes 
```

或者，使用 EcmaScript 5 功能：

```
function mything() {
  var a, b, c;

  var object = Object.create(mything.prototype);
  object.publicFunc = function() {}

  return object;
}

mything1 = mything();
assert(mything1 instanceof mything); // passes 
```

# 解释

`instanceof`如果右侧操作数是一个函数，并且存储在该函数属性中的对象包含在左侧操作数的原型链中，则运算符将返回true `prototype`。

第一个示例`mything.prototype`将另一个临时函数作为“原型”属性重用，该函数仅用于生成一个对象（`mything.prototype`在其原型链中）。第二个示例通过`mything.prototype`直接从 with继承来创建这样的对象[`Object.create()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)。

两个对象都继承自`mything.prototype`并因此将通过`object instanceof mything`测试。

话虽如此，jfriend00 提出的模式开销更少，并且更易于阅读，同时提供了您想要的功能。

# drupal-7 - Drupal 7 自定义模块加载特定主题模板的 css

> ID：15693700
> 
> 赞同：1
> 
> 时间：2013-03-28T23:04:29.200
> 
> 标签：drupal-7, drupal-theming

我有一个自定义模块，我已经创建了这样的主题模板：

```
/**
 * Implemtnation of hook_theme()
 */
function custom_slider_theme($existing, $type, $theme, $path) {
    return array(
        'custom_slider' => array(
            'variables' => array('nodes' => NULL),
            'template' => 'custom_slider',
        ),
    );
} 
```

这一切都很好。

我找不到的是如何为该模板加载 css 文件，以便在加载时`custom_slider.tpl.php`加载相关的 css 文件。我不需要在每个页面上都加载 css。我宁愿`drupal_add_css()`只在需要时打电话。

非常感谢您对此的任何帮助。

C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:38:46.493

您可以将其添加到预处理函数中，例如

```
function custom_slider_preprocess_custom_slider(&$vars) {
  drupal_add_css(drupal_get_path('module', 'custom_slider') . '/file.css');
} 
```

# python - 杀死子进程而不杀死父进程

> ID：15693703
> 
> 赞同：1
> 
> 时间：2013-03-28T23:04:39.620
> 
> 标签：python, windows

我正在使用 os.system() 运行 python 程序并尝试将其输出记录到文件中。这工作正常。

```
os.system("myprogram.py -arg1 -arg2 > outputfile.txt")
#something here to kill/cleanup whatever is left from os.system()
#read outputfile1.txt- this output file got all the data I needed from os.system() 
```

问题是 myprogram.py 调用了另一个 python 程序，它给了我需要但没有完成的输出——我什至可以看到提示变得不同，如下图所示

![在此处输入图像描述](../Images/de7d2687964d6093231de76338549dd2.png)

当我尝试使用 os.system("quit()") 和 subprocess.popen("quit()", shell=False) 进入程序的下一行时，有没有办法杀死子进程什么都不做。

我不能真正使用exit()，因为那只会一起杀死python。

顺便说一句，这个摊位

```
f=subprocess.Popen("myprogram.py -arg1 > outputfile.txt") and then 
f.communicate() #this just stalls because the child program does not end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:40:41.403

正在调用的程序使`myprogram.py`您进入 python 提示符。为什么会发生这种情况，除非您向我们展示代码，否则我们无法告诉您。

使用`subprocess`模块（更通用）优于使用`os.system`.

但是您没有正确使用子流程。试试这样：

```
with open('outputfile.txt', 'w+') as outf:
    rc = subprocess.call(['python', 'myprogram.py', '-arg1'], stdout=outf) 
```

该`with`语句将在`subprocess.call`完成后关闭文件。程序及其参数应作为字符串列表给出。重定向是通过使用`std...`参数来实现的。

完成后`myprogram.py`，`rc`包含其返回码。

如果要捕获程序的输出，请`subprocess.check_output()`改用。

# django - 列出只有产品的类别

> ID：15693705
> 
> 赞同：0
> 
> 时间：2013-03-28T23:04:53.593
> 
> 标签：django, django-views

我只需要列出有产品的类别。如果某个类别没有关联的产品，则不会列出该类别。

这是我的模型：

```
class Category(models.Model):
    title = models.CharField()

class Product(models.Model):
    title = models.CharField()
    category = models.ManyToManyField(Category) 
```

一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:14:36.053

```
catgories = Category.objects.filter(product__isnull=False)
# will return all those categories which have products 
```

# xml - 调用 .txt 文件以填充 Flash 测验中的文本框

> ID：15693709
> 
> 赞同：0
> 
> 时间：2013-03-28T23:05:11.353
> 
> 标签：xml, flash

我正在创建一个供工程专业学生使用的健康和安全测验。

我收到了一个 .txt 文件，其中包含 16 类问题。

我自己搜索了有关如何执行此操作的教程，但我就是无法理解指南的格式。

有人能在这个问题上启发我吗？我正在使用 Actionscript 3.0

以下是文件的前几行供参考：

```
Ref || Question || AnswerA || AnswerB || AnswerC || AnswerD || AnswerE || Correct || Answer || Type || File
1.1 || Who has responsibility for health and safety on site ? || The client and main contractor only || Self - employed contractors only and employees || Employers, employees and sub - contractors || Everyone on site no matter who employs them || || D || Everyone at work has a legal duty to look after their own health and safety. || o_4 || _
1.2 || Which of the following is correct for risk assessment ? || It is a good idea to do, but not essential || Only do it if it is a big job || It is a legal requirement and must always be done || Only needs to be done for hazardous work || || C || Risk assessments are always necessary because they show how people are likely to be harmed. || o_4 || _
1.3 || Why should regular inspections of the workplace take place ? || To check whether the working environment is safe || To check that everyone is doing their job || To prepare for a visit from an HSE Inspector || To check that all staff are present || || A || If regular inspections are not carried out, the workplace could become an unsafe place. || o_4 || _
1.4 || The letters CDM stand for : || Control of Demolition(and Management) Regulations || Construction(Demolition Management) Regulations || Construction(Design and Management) Regulations || Control of Dangerous Materials Regulations || || C || The CDM Regulations aim to ensure that health and safety is addressed in a structured and organised manner during the design, construction, maintenance and demolition phases of all projects to which the regulations apply. || o_4 || _ 
```

抱歉，如果这令人困惑，如果有人回复并且难以理解，我很乐意向您展示您可能需要进一步理解的任何内容。

谢谢你。

::EDIT:: 我遇到的问题是我什至不明白如何开始通过 Actionscript 3.0 将此文件调用到我的场景中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:32:12.973

首先，您可以使用加载器来读取数据。

创建一个数组来存储问题：

```
var questions:Array = [ ]; 
```

实例化一个加载器并在加载完成时添加一个事件监听器：

```
var request:URLRequest = new URLRequest("questions.txt");
var loader:URLLoader = new URLLoader(request);

loader.addEventListener(Event.COMPLETE, completeHandler); 
```

完成后，解析分隔符的数据文件`||`并将问题存储在数组中：

```
function completeHandler(event:Event):void
{
    // loader data - the questions.txt file
    var data:String = event.target.data;

    // split data by newline for each question
    var lines:Array = data.split("\n");

    // for every line
    for each (var line:String in lines)
    {
        // split line by "||" delimiter
        var question:Array = line.split("||");

        // add the question to the questions array:
        questions.push({ref: question[0],
                        question: question[1],
                        answerA: question[2],
                        answerB: question[3],
                        answerC: question[4],
                        answerD: question[5],
                        answerE: question[6],
                        correct: question[7],
                        answer: question[8],
                        type: question[9],
                        file: question[10]});
    }
} 
```

现在，每个问题都是您的问题数组的一个元素。

例如，要遍历问题：

```
for each (var question:Object in questions)
{
    trace("question: " + question.question);
    trace("answer:   " + question.answer);
    trace("type:     " + question.type);
    trace("file:     " + question.file);
} 
```

或者，随机选择一个问题：

```
var question:Object = questions[Math.floor(Math.random() * questions.length)];

trace("question: " + question.question);
trace("answer:   " + question.answer);
trace("type:     " + question.type);
trace("file:     " + question.file); 
```

# wpf - 程序更改值时触发验证？

> ID：15693710
> 
> 赞同：0
> 
> 时间：2013-03-28T23:05:32.957
> 
> 标签：wpf, validation, c#-4.0, datagrid, triggers

程序更改值时触发验证？

我有一个数据网格，它有一列“状态”。当用户单击一个按钮时，它会启动一个后台工作程序，根据 datagrid 行中的数据进行长时间处理：为行循环，这是一个 ObservableCollection 。对于一行，它将报告处理状态并将其显示在“状态”列中（作为字符串）。有时，“状态”将包含如下文本：

错误：....警告：...

我想根据状态文本更改状态单元格背景，即红色表示错误，灰色表示警告...

我可以通过使用验证来做到这一点吗？我在下面编码。如果我手动更改状态文本，它就像我想要的那样工作。local:StatusValidationRule 检查它是否有错误。但是，这不起作用，因为状态文本由程序更改，这不会触发验证。

有什么建议么？谢谢。

```
<DataGridTextColumn Header="Status" Width="200" CanUserResize="True"> 

    <DataGridTextColumn.Binding>
        <Binding Path="Status" ValidatesOnExceptions="True" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:StatusValidationRule  ValidationStep="UpdatedValue"/>
            </Binding.ValidationRules>
        </Binding>
    </DataGridTextColumn.Binding>

    <DataGridTextColumn.ElementStyle>
        <Style TargetType="TextBlock">
            <Setter Property="TextWrapping" Value="Wrap">
            </Setter>

            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="Background"
Value="Red"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </DataGridTextColumn.ElementStyle>

</DataGridTextColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:11:01.310

`ValidatesOnTargetUpdated`您可以设置`ValidationRule`this 将导致它在目标属性更新时验证。

例子：

```
<local:StatusValidationRule ValidatesOnTargetUpdated="True" /> 
```

# knockout.js - Knockout.js 无法选中动态添加的复选框

> ID：15693711
> 
> 赞同：0
> 
> 时间：2013-03-28T23:05:36.737
> 
> 标签：knockout.js

我正在处理我的第一个淘汰项目，我发现当它们被动态添加到页面时我无法选中复选框。我已经尝试过来自淘汰网站的演示代码，它本身可以正常工作，但我的实现没有。结果对“已检查”没有约束力，我的警报也没有触发。当我单击它们并且没有javascript错误时，框的状态不会改变..

```
<div class="report">
<label>start date</label>
<input type="text" id="date-from" data-bind="value: startDate" />
<span>to </span>
<input type="text" id="date-to" data-bind="value: endDate" />
<label>product code</label>
<input type="text" id="product-code" data-bind="value: productCode" />
<label>lead type</label>
<select id="lead-type" data-bind="value: leadType">
    <option value="0" selected="selected">all</option>
    <option value="B">sales</option>
    <option value="Q">enquiries</option>
    <option value="F">failed purchases</option>
    <option value="C">cancelled purchases</option>
</select>
<input type="submit" id="submit-query" class="button" data-bind="click: load" value="Go"/> 
```

日期前缀 名字 姓氏 国家 出生日期 电话 电子邮件 全球 完整

```
$(document).ready(function () {
    var reportsViewModel = function() {
        var self = this;
        self.startDate = ko.observable();
        self.endDate = ko.observable();
        self.productCode = ko.observable();
        self.leadType = ko.observable();
        self.wantsSpam = ko.observable(true);
        self.alert = function () {
            alert(self.isActioned());
        };

        var queryData = {
            startDate: self.startDate,
            endDate: self.endDate,
            productCode: self.productCode,
            isActioned: false,
            leadType: self.leadType
        };

        function orderModel(item) {
            this.OrderDate = ko.observable(item.OrderDate),
            this.Prefix = ko.observable(item.Prefix),
            this.FirstName = ko.observable(item.FirstName),
            this.LastName = ko.observable(item.LastName),
            this.Country = ko.observable(item.Country),
            this.DateofBirth = ko.observable(item.DateofBirth),
            this.Telephone = ko.observable(item.Telephone),
            this.CustEmail = ko.observable(item.CustEmail),
            this.gbac = ko.observable(item.gbac),
            this.isActioned = ko.observable(true)
        };

        self.reportItems = ko.observableArray([]);

        self.load = function () {
            $.ajax({
                url: sf.getServiceRoot('CC_Reporting') + "Report/getLeads",
                type: "POST",
                data: queryData,
                beforeSend: sf.setModuleHeader
            }).done(function (data, status) {
                if (data == "There are no records which match your search.") {
                    alert(data);
                    return;
                } else {
                    self.reportItems.removeAll();
                    $.each(data, function (i, item) {
                        console.log(item);
                        self.reportItems.push(new orderModel(item));
                    });
                }
            }).fail(function (data) {
                alert(data);

            });
        }

    };

    ko.applyBindings(new reportsViewModel()); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:25:18.330

您的代码中有几个错误。

`id`首先，正如我所提到的，在循环中的 DOM 节点上具有属性是非法的。

其次，您的`click`绑定在绑定内部`foreach`，因此它的上下文是`orderModel`，但函数在父级上。用于`click: $parent.alert`调用正确的函数。

第三，当该属性在项目上时，您的`alert`功能正在寻找`self`该属性。`isActioned`在函数上使用参数来捕获调用上下文，如下所示：

```
self.alert = function (item) {
        alert(item.isActioned());
        return true;
    }; 
```

第四，注意`return true`. 没有它，`click`事件会吃掉点击，阻止它取消选中您不希望发生的复选框。返回 true 会导致 Knockout 让事件冒泡。

最后，没有任何东西在调用`self.load()`，所以你的 ajax 永远不会触发。这是[工作小提琴](http://jsfiddle.net/dKFMG/)，减少了一点。

# linux - 如何从linux上的文件夹中查找函数

> ID：15693714
> 
> 赞同：10
> 
> 时间：2013-03-28T23:05:47.973
> 
> 标签：linux, shell, grep

我下载了一些程序的源代码并将其放在一个文件夹中我想从终端上的文件夹中找到一个函数声明，如何使用shell命令来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T23:08:54.470

## 尝试这样做

使用[grep](/questions/tagged/grep "显示标记为“grep”的问题")：

```
grep -Hri function_name . 
```

如果你只想要路径：

```
grep -ril function_name . 
```

## 解释

*   尾随`.`代表*当前目录*
*   `-i`:*不区分大小写*
*   `-r`:*递归*
*   `-H`：*打印每个匹配的文件名*
*   `-l`：*抑制正常输出；而是打印通常会从中打印输出的每个输入文件的名称。*

看[`man grep`](http://betterthangrep.com/)

## 最后但并非最不重要的

一个有趣的工具是[ack](http://betterthangrep.com/)，它可以避免在`.svn`, `.cvs`, `.git`dirs 等中搜索......它旨在搜索代码。

例子 ：

```
$ cd /usr/share/perl5
$ ack -r 'Larry\s+Wall'
site_perl/Inline/C.pm
370:# bindings to. This code is mostly hacked out of Larry Wall's xsubpp program.

core_perl/overload/numbers.pm
5:#    Copyright (C) 2008 by Larry Wall and others

core_perl/CPAN.pm
876:#       From: Larry Wall <larry@wall.org> 
```

或只是文件路径：

```
$ ack -rl 'Larry\s+Wall'
vendor_perl/LWP.pm
site_perl/Inline/C.pm
core_perl/overload/numbers.pm
core_perl/CPAN.pm
core_perl/SelfLoader.pm
core_perl/AutoLoader.pm
core_perl/AutoSplit.pm
core_perl/Test/Harness.pm
core_perl/XSLoader.pm
core_perl/DB.pm 
```

不需要`.`以`ack`（相比`grep`）结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:13:01.393

这将遍历您打开的目录和任何子目录中的所有文件（尽管如果文件或目录名称中有空格，它会搞砸），将在所有文件中搜索您放置的 FUNCTION，并将路径输出到文件并显示匹配的行。通过 ing 到您打开的目录来运行它`cd`（并将 FUNCTION 替换为您要查找的函数）。

```
find . -type f | xargs grep FUNCTION 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T18:16:03.267

尝试使用[CScope](http://cscope.sourceforge.net/)。您还需要安装 vi/vim。

安装后，只需在要查找该功能的文件夹中运行以下命令：

```
cscope -R 
```

之后，将出现一个菜单，显示许多选项以查找所有符号、函数定义、调用函数的函数等。

# java - 如何为两种布局中的两组按钮实现两个onlicklisteners？

> ID：15693716
> 
> 赞同：0
> 
> 时间：2013-03-28T23:05:54.570
> 
> 标签：java, android

有没有办法为两个不同的按钮列设置两个按钮 onclicklisteners（设置为两种布局，A 布局和 B 布局，按钮来自 A1-A8 和 B1-B8），以便下一个脚本工作：我想要按钮从他们自己的布局中，他们之间没有任何动作（例如，当我单击 A2 然后 A7 没有发生任何事情，并且在 A7 之后如果我再次单击 A3 没有发生任何事情，并且仍然如果我单击 A8 .... 等等 ON ) 但是当我之后单击例如 A1 和 B7 时，我有一些代码可以比较按钮的文本，并且该部分工作正常。但我正在努力处理第一部分，即来自同一布局的按钮在单击时应该不采取任何行动的部分。有人建议我使用两个 onlicklisteners（现在我只对所有按钮使用一个），但我没有找到完成它的方法。我从导入的预填充 sqlite 数据库中随机将文本设置为按钮。到目前为止，这是我的代码：

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.spojnice);

        a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        a3 = (Button) findViewById(R.id.bA3);
        b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);
        b3 = (Button) findViewById(R.id.bB3);

        nextQuestion();

        }

public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{ 

            mDbHelper.open();

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1"));
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            question.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            a1.getBackground().clearColorFilter();
            a1.setEnabled(true);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            b1.getBackground().clearColorFilter();
            b1.setEnabled(true);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            a2.getBackground().clearColorFilter();
            a2.setEnabled(true);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            b2.getBackground().clearColorFilter();
            b2.setEnabled(true);
            a3.setText(labelsA.get(2).label);
            a3.setTag(labelsA.get(2).tag);
            a3.setOnClickListener(clickListener);
            a3.getBackground().clearColorFilter();
            a3.setEnabled(true);
            b3.setText(labelsB.get(2).label);
            b3.setTag(labelsB.get(2).tag);
            b3.setOnClickListener(clickListener);
            b3.getBackground().clearColorFilter();
            b3.setEnabled(true);

        } 
```

我将这行代码放在我的每个按钮的 xml 中，为左右布局标记它，也许它会有所帮助。我没有找到如何使它有用：

```
android:tag="L"
android:tag="R" 
```

出于比较目的，此代码可以正常工作，但它也比较来自相同布局的按钮，而我不能这样做。如何实现两个 onclicklisteners 来管理我的这个问题？

编辑：

我尝试了一个数组，但它没有用。

```
private static final int[] idArrayA = {R.id.bA1, R.id.bA2, R.id.bA3, R.id.bA4, R.id.bA5, R.id.bA6, R.id.bA7, R.id.bA8};
        private static final int[] idArrayB = {R.id.bB1, R.id.bB2, R.id.bB3, R.id.bB4, R.id.bB5, R.id.bB6, R.id.bB7, R.id.bB8};

final OnClickListener clickListenerA = new OnClickListener(){

        public void onClick(View v) {
               if (Arrays.asList(idArrayA).contains(v.getId())) {
                    return;   
               }else{
//do some code here if pressed buttons are not from the same array

}

        }

       }; 
```

* * *

这是我到目前为止所做的，我没有得到任何地方。有人可以用一些实际代码帮助我，来包装这个东西，因为这让我保持原位。我尝试了两个 onclicklisteners，但它根本不起作用，它实际上比我开始使用的第一个代码效果差。

我把它放在我的活动范围内：

```
private Button buttonClicked; 
```

还有两个 onClickListener：

```
final OnClickListener clickListenerA = new OnClickListener(){

        public void onClick(View v) {

            Button button = (Button) v;
            button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

            if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
                } else {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {

                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                        counter = counter + 5;
                        score.setText("Poeni: " + counter);
                    }
                }

        }
       };

       final OnClickListener clickListenerB = new OnClickListener(){

        public void onClick(View v) {
            Button button = (Button) v;
            button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

            if (buttonClicked == null) {
                // first button is clicked
                buttonClicked = button;
            } else {
                // second button is clicked
                if (buttonClicked.getTag().equals(button.getTag())) {

                    buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                    button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                    buttonClicked.setEnabled(false);
                    button.setEnabled(false);
                    counter = counter + 5;
                    score.setText("Poeni: " + counter);
                    }
            }

        }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:34:20.223

使用四个按钮 、、`a1`和，您可以创建两个 OnClickListener：一个用于s，一个用于s。如果 OnClickListener 是第一个单击的按钮，则应设置一个标志。然后另一个 OnClickListener 可以检查是否设置了标志（意味着它是单击的第二个按钮）并检查它是否与单击的第一个按钮属于不同的类别。`b1``a2``b2``a``b`

一旦完成了这么多工作，您就可`List`以为每个类别创建一个按钮数组（或者更好的是一个），以使最终检查更加容易。事实上，只要稍加巧妙，您就可以将所有这些简化为一个 OnClickListener，因为唯一的区别是*数据*（即哪些按钮属于哪个类别），而不是*操作*。

# linux - linux cp mtime 更改

> ID：15693720
> 
> 赞同：1
> 
> 时间：2013-03-28T23:06:15.873
> 
> 标签：linux, file, copy, cp

我有一段代码监视文件夹。如果一个文件在那里停留 3 分钟，我的代码将处理它。从现在开始是否已经过了 3 分钟，这取决于 mtime。

但是，我发现当我 cp 一个巨大的文件时，比如说 10GB，它无法在 3 分钟内完成，代码会中断，因为**cp 在复制时似乎不会不时更新 mtime**。

我观察到 cp 的正确行为了吗？

有什么解决办法吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T00:23:17.103

据我所知，当上述修改完成时，mtime 会更新。我认为这样做是正确的。为什么在将文件复制到时需要知道文件是否已更新？如果你碰巧复制了那个文件，你最终会得到一个不完整的文件，可能没用。

但是，如果您确定要这样做，请确保您的复制智能，不仅取决于 mtime，还取决于上面答案中建议的文件大小。如果您看到文件大小以任何一种方式发生变化，无论 mtime 说什么，您都可以确定该文件已被修改，相对于上次处理它的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T23:27:27.053

有很多解决方法

*   复制到点文件中，然后在复制完成后将其移动到位 - 这将由创建过程完成，并且仅处理文件夹中的非点文件。
*   使用信号指示客户端已完成复制（可能仅适用于非网络文件系统）
*   使用文件的大小`mtime`和如果在 3 分钟内都没有增加，则继续处理。

# django - Django-CMS 测试 - 注册应用程序

> ID：15693723
> 
> 赞同：0
> 
> 时间：2013-03-28T23:06:22.710
> 
> 标签：django, django-cms, django-testing

我有一个功能可以在我的测试中构建一些 CMS 骨架：

```
def create_base_cms_structure():
    from cms.api import create_page
    from cms.utils.conf import get_cms_setting
    superuser = User.objects.create_superuser('cmsadmin', 'admin@admin.com', 'cmsadmin')
    create_page('account-page', get_cms_setting('TEMPLATES')[0][0], 'pl',
                created_by=superuser, published=True, apphook="AccountApp")
    create_page('job-page', get_cms_setting('TEMPLATES')[0][0], 'pl',
                created_by=superuser, published=True, apphook="JobApp")
    create_page('article-page', get_cms_setting('TEMPLATES')[0][0], 'pl',
                created_by=superuser, published=True, apphook="ArticleApp") 
```

可以吗？当我尝试使用 Client() 运行我的测试时，我收到错误，即我的反向 1 不存在（来自帐户应用程序的那个）。该 URL 正在主模板中呈现。

我错过了什么吗？

**Django 1.4.5**

**Django-CMS 2.4b**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T19:30:59.117

来自 Django-cms 文档：

> 您的应用需要测试，但在您的实时站点中，它们不在 urls.py 中，因为它们附加到 CMS 页面。因此，如果您希望能够在测试中使用 reverse()，或者测试使用 url 模板标签的模板，您需要将您的应用程序连接到 urls.py 的特殊测试版本并告诉您的测试使用它。

接着

```
@override_settings(ROOT_URLCONF='myapp.tests.urls') 
```

在你的方法之前。

[http://django-cms.readthedocs.org/en/latest/extending_cms/testing.html](http://django-cms.readthedocs.org/en/latest/extending_cms/testing.html)

你试过这个吗？

# c# - 如何在c#中连接字符串

> ID：15693725
> 
> 赞同：-1
> 
> 时间：2013-03-28T23:06:37.743
> 
> 标签：c#, string, concatenation

我有一个名为 people 的字符串列表。我想将它们组合起来并用逗号分隔它们并将它们存储在一个名为 totalPeopleNames 的变量中。这就是我所拥有的，但它不起作用：

```
string totalPeopleNames = null;

foreach(var person in people)
{
    Enumerable.Concat(totalPeopleNames, ", " + person.Person.FullName);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T23:08:31.050

```
var totalPeopleNames = String.Join(", ",people.Select(p=>p.Person.FullName)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:10:52.893

最简单的方法是使用[`String.Join`](http://msdn.microsoft.com/en-us/library/dd992421.aspx)

```
var names = String.Join(", ", people.Select(p => p.Person.FullName)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:09:20.067

一种可能的解决方案：

```
string totalPeopleNames = "";

foreach(var person in people)
{
    totalPeopleNames += totalPeopleNames + ", " + person.Person.FullName;
} 
```

更好的：

看看 C#“Text.StringBuilder”：

*   [http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)

*   [http://www.dotnetperls.com/stringbuilder](http://www.dotnetperls.com/stringbuilder)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T23:10:49.003

您还可以使用聚合扩展方法：

```
var result = people.Aggregate((p1, p2) => p1.Person.FullName+ ", " + p2.Person.FullName); 
```

# python - HTML中字符串的路径

> ID：15693735
> 
> 赞同：1
> 
> 时间：2013-03-28T23:08:22.987
> 
> 标签：python, beautifulsoup

如何生成 HTML 文档中文本字符串的所有路径，最好使用 BeautifulSoup？我有这个代码：

```
<DIV class="art-info"><SPAN class="time"><SPAN class="time-date" content="2012-02-28T14:46CET" itemprop="datePublished">
             28\. february 2012
            </SPAN>
            14:46
           </SPAN></DIV><DIV>
           Something,<P>something else</P>continuing.
          </DIV> 
```

我想将 HTML 代码划分为文本字符串的路径，例如

```
str1 >>>  <DIV class="art-info"><SPAN class="time"><SPAN class="time-date" content="2012-02-28T14:46CET" itemprop="datePublished">28\. february 2012</SPAN></SPAN></DIV>
str2 >>>  <DIV class="art-info"><SPAN class="time">14:46</SPAN></DIV>
str3 >>>  <DIV>Something,continuing.</DIV>
str4 >>>  <DIV><P>something else</P></DIV> 
```

或者

```
str1 >>>  <DIV><SPAN><SPAN>28\. february 2012</SPAN></SPAN></DIV>
str2 >>>  <DIV><SPAN>14:46</SPAN></DIV>
str3 >>>  <DIV>Something,continuing.</DIV>
str4 >>>  <DIV><P>something else</P></DIV> 
```

或者

```
str1 >>>  //div/span/span/28\. february
str2 >>>  //div/span/14:46
str3 >>>  //div/Something,continuing.
str4 >>>  //div/p/something else 
```

我研究了 BeautifulSoup 文档，但我不知道该怎么做。你有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T00:27:47.160

```
from bs4 import BeautifulSoup
import re
file=open("input")
soup = BeautifulSoup(file)
for t in soup(text=re.compile(".")):
  path = '/'.join(reversed([p.name for p in t.parentGenerator() if p]))
  print path+"/"+ t.strip() 
```

**输出**

```
[document]/html/body/div/span/span/28\. february 2012
[document]/html/body/div/span/14:46
[document]/html/body/div/Something,
[document]/html/body/div/p/something else
[document]/html/body/div/continuing. 
```

# c# - 在 Visual Studio 源视图中显示图像或控件

> ID：15693738
> 
> 赞同：2
> 
> 时间：2013-03-28T23:08:34.940
> 
> 标签：c#, visual-studio, vs-extensibility

我正在开发一个数字运算应用程序，其中包含一些相当（来自我的 POV）复杂的数学。我的第一个想法是，

> 哎呀，能够在 Mathematica 中截取屏幕截图并将其作为注释包含在我的 C# 源代码中真是太好了。

在输入摘要、备注和其他选项时，我看到了一个`cdata`值。`///`似乎也支持自定义标签（因为似乎没有发生任何验证）。

按照优先顺序，我想：

1.  将 Mathematica 代码链接到我的 C# 源代码，并且已经说过代码以其所有希腊式的荣耀出现，作为调用它的方法（或生成它的方法）上方的注释。在 VS 中实际嵌入 Mathematica 编辑器的奖励积分！

2.  链接到包含上述截图的图像文件，通过 Paint 和[snip tool](http://windows.microsoft.com/en-US/windows7/products/features/snipping-tool)手动生成，并让 VS 显示它。

3.  将图像嵌入 CDATA 部分，并在查看代码时自动在 VS 内部呈现，与所述代码内联。生成图像的 base-85（或其他）编码版本是微不足道的。此时的问题是让它显示。

可行的方法：

1.  编写一个在屏幕上覆盖图像的应用程序，并通过魔术使其与 VS 中的源视图保持一致。（这很荒谬，但是，嘿，一种语言也是如此，它要求你用 a 来表示变量名`$`，但任何可以谷歌的人都可以使用完整的 BNF 语法。哦，多么美好的世界……）

2.  我什么都没有。

建议？是否可以扩展 VS 以便图像或控件（可以托管 Mathematica）可以出现在源视图中？

*（注意：我最喜欢的一句话是“它是软件。一切皆有可能。给我一个 9 伏电池、一个回形针、小刀和一只猴子，我们会实现它。”在这个案例，我的意思是在实用性范围内。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T04:35:32.100

看起来这个 Visual Studio 插件应该可以解决您的大部分需求：

[http://visualstudiogallery.msdn.microsoft.com/793d16d0-235a-439a-91df-4ce7c721df12](http://visualstudiogallery.msdn.microsoft.com/793d16d0-235a-439a-91df-4ce7c721df12)

# matlab - 如何在matlab的子函数中定义符号变量？获取：“尝试将“栏”添加到静态工作区。”

> ID：15693741
> 
> 赞同：1
> 
> 时间：2013-03-28T23:08:54.560
> 
> 标签：matlab

我正在尝试在子函数 foo 中定义一个符号变量（见下文）

```
function [ ] = test2( )

foo();

     function [] = foo ()
         syms bar;
     end

end 
```

我收到以下错误，不确定如何解决此问题：

```
EDU>> test2
Error using assignin
Attempt to add "bar" to a static workspace.
 See MATLAB Programming, Restrictions on Assigning to Variables for
 details.

Error in syms (line 66)
        assignin('caller',x,sym(x));

Error in test2/foo (line 6)
        syms bar;

Error in test2 (line 3)
foo(); 
```

将不胜感激任何帮助整理上述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:40:26.817

跳过这个`syms`功能。它用于`assignin`在运行时输出嵌套函数不允许的参数。尝试：

```
function [ ] = test2( )

foo();

     function [] = foo ()
         bar = sym('bar');
         disp(bar+bar);
     end

end 
```

输出：

```
2*bar 
```

# googlemock - 不确定这个 gMock 示例中的“A”代表什么

> ID：15693748
> 
> 赞同：2
> 
> 时间：2013-03-28T23:09:49.093
> 
> 标签：googlemock

```
EXPECT_CALL(foo, Describe(A<const char*>()))
    .InSequence(s2)
    .WillOnce(Return("dummy")); 
```

在上面的示例文本中，Describe 方法的参数我不明白。它看起来像一个类名，然后是一个模板，但想要确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:57:17.337

在这种情况下，它是一个[通配符匹配器](http://code.google.com/p/googlemock/wiki/CheatSheet#Wildcard)`string Foo::Describe(const char* name);`，这意味着如果使用任何值调用模拟函数，就会满足期望`name`。

# xml - VB.NET 使用数据集为不同的表单生成数据表

> ID：15693749
> 
> 赞同：0
> 
> 时间：2013-03-28T23:09:52.600
> 
> 标签：xml, vb.net, forms, datatable, dataset

好的，这是我无法弄清楚的挑战。我有多个表单（对话框窗口）可以获取用户输入的信息。我开始了一个包含一个类的类。`public property dsData as DataSet = New DataSet("ProjectData")`在每个表单中，我创建了一个 Project 类的实例，`Dim cData As New Project`并从 dsData 数据集创建了一个数据表。我能够将数据输入到这些对话框表单中，关闭它们并重新打开它们，并且数据保持良好状态，直到应用程序正常关闭。

不过，我的问题是当我将 dsData 导出到 xml 时`cData.dsData.WriteXml(xmlSW, XmlWriteMode.WriteSchema)`，它只是在具有保存按钮的表单上导出数据表中的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:20:55.807

尝试使用 .Clone 方法

```
public property dsData as DataSet = New DataSet("ProjectData")

Dim ds2 = dsData.Clone()
cData.dsData.WriteXml(xmlSW, XmlWriteMode.WriteSchema)
cData.ds2.WriteXml(xmlSW, XmlWriteMode.WriteSchema) 
```

# windows-8 - 如何在 PowerPoint 2013 中为线框图创建动态磁贴？

> ID：15693751
> 
> 赞同：1
> 
> 时间：2013-03-28T23:10:10.697
> 
> 标签：windows-8, powerpoint, user-experience, wireframe, powerpoint-2013

我正在尝试为 Windows 8 商店应用程序创建线框以进行初始原型设计。

我读过我们可以在 PowerPoint 中创建动态磁贴，并且在[主题演讲](http://www.winrumors.com/microsoft-flaunts-metro-style-powerpoint-live-tiles-video/)中演示过一次。

有人知道如何在 PPT 中实现动态磁贴吗？

# string - 将字符串批量拆分为 2 部分

> ID：15693754
> 
> 赞同：1
> 
> 时间：2013-03-28T23:10:23.853
> 
> 标签：string, loops, for-loop, batch-file, split

我想将每个文件夹的名称（在一个`for`循环中）分成两部分：左侧部分（在分隔符“ - ”之前）和右侧部分（在分隔符之后）。

示例：“Bonjour - Cher ami” => 左=Bonjour，右=Cher Ami

但它不起作用：

```
for /d %%a in (*) do (
  set "fname=%%a" 
  set "right=%fname:* - =%" 
  call set "left=%%fname: - %right%=%%" 
  echo [%left%] * [%right%]
) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:24:22.967

在代码块中，您需要其他语法：

```
@echo off &setlocal
for /d %%a in (*) do (
    set "fname=%%~a"
    call set "right=%%fname:* - =%%" 
    call call set "left=%%%%fname: - %%right%%=%%%%"
    call echo [%%left%%] * [%%right%%]
) 
```

如果文件夹名称中没有“ `-`”，则%left%==%right%。

# oracle11gr2 - 错误代码 2 启动 OracleDbConsole 服务

> ID：15693755
> 
> 赞同：5
> 
> 时间：2013-03-28T23:10:32.227
> 
> 标签：oracle11gr2

我安装了 Oracle DB 11g，一切正常，但突然进程 `OracleDbConsoleorcl`不再启动，我手动尝试但它总是显示此消息：

```
Windows could not start OracleDbConsoleorcl on
Local Computer. If this is a non-Microsoft service,
contact the service vendor, and refer the service
specific error code 2 
```

我应该怎么办？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-02T12:35:27.493

您可以使用以下命令检查 OracleDBConsoleorcle 的问题/配置状态：

```
emctl status dbconsole 
```

然后您可以进行相应的配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-19T05:36:12.483

Oracle 11g：Windows 无法在本地计算机上启动 OracleDBConsoleorcl

我在 Windows 7 Professional 系统中使用 Oracle 11g 几天。突然，我无法使用 sql developer 连接架构/用户。

我发现 Oracle... 服务在 Windows 服务窗口中关闭。

a) Oracle ORCL VSS 编写器服务 - 运行 b) OracleDBConsoleorcle - 未运行 c) OracleJobSchedulerORCL - 未运行 d) OracleServiceORCL - 未运行

当我启动 OracleDBConsoleoracle 时，它​​抛出了一个错误“Windows 无法在本地计算机上启动 OracleDBConsoleorcl”。

（以下解决方案适用于我，基于各种论坛主题）......

*   一个。转到 C:.......\product\11.1.0\db_1\oc4j\j2ee
*   湾。复制粘贴文件夹：OC4J_DBConsole_192.168.x.y_orcl，两次
*   C。将两个新文件夹之一重命名为 OC4J_DBConsole_ **localhost** _orcl
*   d。将另一个重命名为 OC4J_DBConsole__orcl

进行这些更改并重新启动后，它开始运行......

# python - 扩展的 ASCII 字符转换

> ID：15693756
> 
> 赞同：5
> 
> 时间：2013-03-28T23:10:38.243
> 
> 标签：python, type-conversion, ascii, extended-ascii

如何使用 python 将扩展 ASCII 字符**（例如**：“æ、ö 或 ç”）转换为非扩展 ASCII 字符（a、o、c）？它的工作方式应该是，如果它以 "A, Æ ,Ä" 作为输入，它会为所有这些返回 A。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T23:15:01.947

[Unidecode](https://pypi.python.org/pypi/Unidecode/)可能对您有用。

```
Python 3.2.3 (default, Jun  8 2012, 05:36:09) 
[GCC 4.7.0 20120507 (Red Hat 4.7.0-5)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from unidecode import unidecode
>>> unidecode("æ, ö or ç")
'ae, o or c' 
```

# xamarin.ios - 绑定问题：在绑定类调用覆盖方法时调用基方法。导致无限递归

> ID：15693762
> 
> 赞同：0
> 
> 时间：2013-03-28T23:11:12.163
> 
> 标签：xamarin.ios, cordova, xamarin, cordova-2.0.0

我正在开发一个使用 Cordova 的 MonoTouch 项目。我为 Cordova 创建了一个绑定（[基于 Scott Blomquist 创建的绑定](https://github.com/sblom/monotouch-bindings/tree/master/Cordova/Binding)）。

我已经能够很好地实例化这些类而不会失败。但是，当我尝试扩展它们时，我遇到了问题。例如，如果我只是尝试扩展 CDVViewController，甚至不覆盖任何东西，当我们到达实例化这个扩展类的代码时，系统会安静地退出，没有错误消息，并且下面的退出行。

```
The program 'Mono' has exited with code 0 (0x0).
The program '[5600] ***.vshost.exe: Managed (v4.0.30319)' has exited with code -1 (0xffffffff). 
```

这是我要实例化的类

```
public class WebViewController : CDVViewController
{
} 
```

这是它背后的绑定

```
[BaseType (typeof (UIViewController))]
interface CDVViewController {
    [Export ("webView")]
    UIWebView WebView { get; set; }

    [Export ("pluginObjects")]
    NSMutableDictionary PluginObjects { get; }

    [Export ("pluginsMap")]
    NSDictionary PluginsMap { get; }

    [Export ("settings")]
    NSDictionary Settings { get; }

    [Export ("whitelist")]
    CDVWhitelist Whitelist { get; }

    [Export ("loadFromString")]
    bool LoadFromString { get; }

    [Export ("useSplashScreen")]
    bool UseSplashScreen { get; set; }

    [Export ("activityView")]
    UIActivityIndicatorView ActivityView { get; }

    [Export ("imageView")]
    UIImageView ImageView { get; }

    [Export ("wwwFolderName")]
    string WwwFolderName { get; set; }

    [Export ("startPage")]
    string StartPage { get; set; }

    [Export ("commandQueue")]
    NSObject CommandQueue { get; set; }

    [Export ("commandDelegate")]
    NSObject CommandDelegate { get; set; }

    [Export ("userAgent")]
    string UserAgent { get; }

    [Export ("printMultitaskingInfo")]
    void PrintMultitaskingInfo ();

    [Export ("createGapView")]
    void CreateGapView ();

    [Export ("newCordovaViewWithFrame:")]
    UIWebView NewCordovaView(RectangleF bounds);

    [Export ("javascriptAlert:")]
    void JavascriptAlert (string text);

    [Export ("appURLScheme")]
    string AppUrlScheme ();

    [Export ("parseInterfaceOrientations:")]
    NSArray ParseInterfaceOrientations (NSArray orientations);

    [Export ("supportsOrientation:")]
    bool SupportsOrientation (UIInterfaceOrientation orientations);

    [Export ("getCommandInstance:")]
    NSObject GetCommandInstance (string pluginName);

    [Export ("registerPlugin:withClassName:")]
    void RegisterPluginWithClassName (CDVPlugin plugin, string className);

    [Export ("URLisAllowed:")]
    bool UrlIsAllowed (NSUrl url);

    [Static] [Export ("getBundlePlist:")]
    NSDictionary GetBundlePlist (string plistName);

    [Static] [Export ("applicationDocumentsDirectory")]
    string ApplicationDocumentsDirectory ();

    // The following methods and properties come from UIWebViewDelegate, but we can't do multiple inheritance
    [Export ("webView:shouldStartLoadWithRequest:navigationType:")]
    bool ShouldStartLoad (UIWebView webView, NSUrlRequest request, UIWebViewNavigationType navigationType);
} 
```

我为其构建绑定的[CDVViewController.h](https://github.com/apache/cordova-ios/blob/2.4.0/CordovaLib/Classes/CDVViewController.h)可[在此处获得](https://github.com/apache/cordova-ios/blob/2.4.0/CordovaLib/Classes/CDVViewController.h)

任何人都可以提供的任何帮助将不胜感激。

**更新 #1** 这似乎是由分段错误引起的。对于遇到这种情况的其他人，如果您进入 Mac 并检查日志，您可能会发现相同的情况。您可以通过打开终端并输入来执行此操作，`tail -f /var/log/system.log`因为这显然是模拟器日志所在的位置。

在我的日志中，我发现了以下内容。`***`用于编辑应用程序名称。

```
Mar 28 16:51:16 macmini1 com.apple.launchd.peruser.55385368[409] (UIKitApplication:com.***.***[0x5ef3][14219]): Job appears to have crashed: Segmentation fault: 11
Mar 28 16:51:16 macmini1 SpringBoard[516]: Application '***' exited abnormally with signal 11: Segmentation fault: 11
Mar 28 16:51:16 macmini1 ReportCrash[14132]: Saved crash report for ***[14219] version ??? (???) to /Users/jstarke/Library/Logs/DiagnosticReports/***_2013-03-28-165116_macmini1.crash
Mar 28 16:51:16 macmini1 ReportCrash[14132]: Removing excessive log: file://localhost/Users/jstarke/Library/Logs/DiagnosticReports/***_2013-03-28-135722_macmini1.crash 
```

**更新 #2** 我发现了上面提到的崩溃报告。这是最新的崩溃报告信息，包括崩溃的线程

```
Process:         *** [29880]
Path:            /Users/*/Library/Application Support/iPhone Simulator/*/***.app/***
Identifier:      ***
Version:         ??? (???)
Code Type:       X86 (Native)
Parent Process:  launchd [409]

Date/Time:       2013-03-29 11:44:48.882 -0700
OS Version:      Mac OS X Server 10.7.5 (11G63)
Report Version:  9

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00000000bf7fff7c

VM Regions Near 0xbf7fff7c:
    Stack                  00000000b050b000-00000000b052c000 [  132K] rw-/rwx SM=COW  
--> Stack                  00000000bc000000-00000000bf800000 [ 56.0M] ---/rwx SM=NUL  
    Stack                  00000000bf800000-00000000c0000000 [ 8192K] rw-/rwx SM=COW  

Application Specific Information:
iPhone Simulator 358.4, iPhone OS 6.0 (iPhone/10A403)

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_c.dylib             
0x954d458c szone_malloc_should_clear + 12
1   libsystem_c.dylib             
0x954d566b szone_malloc + 24
2   libsystem_c.dylib             
0x9550b962 malloc_zone_malloc + 77
3   libsystem_c.dylib             
0x9550c882 malloc + 50
4   libobjc.A.dylib               
0x041985c9 class_copyProtocolList + 157
5   CoreFoundation                
0x03f72962 __methodDescriptionForSelector + 178
6   CoreFoundation                
0x03fe65a3 -[NSObject(NSObject) methodSignatureForSelector:] + 51
7   ***                  
0x00254352 monotouch_trampoline + 82
8   ???                           
0x16c4ab0b 0 + 381987595
9   ???                           
0x16c7428c 0 + 382157452
10  ???                           
0x16c743dc 0 + 382157788
11  ***                  
0x0004cf22 mono_jit_runtime_invoke + 722
12  ***                  
0x001b03fe mono_runtime_invoke + 126
13  ***                  
0x00255166 monotouch_trampoline + 3686

Lines 8 - 13 repeat a large number of times (no additional information)

506 ???                           
0x16c4ab0b 0 + 381987595
507 ???                           
0x16c7428c 0 + 382157452
508 ???                           
0x16c743dc 0 + 382157788
509 ***
0x0004cf22 mono_jit_runtime_invoke + 722
510 ***                  
0x001b03fe mono_runtime_invoke + 126
511 ***                  
0x00255166 monotouch_trampoline + 3686 
```

**更新#3** 为了获得更多信息，我决定在本地 WebViewController 中覆盖 CDVViewController 中的所有方法，然后从每个方法的基本等效项返回值，并在方法上设置断点，然后放一个 Console.WriteLine 说我们进入和退出了每个方法。

**令我惊讶的是， Update #2**中许多重复的原因与这样一个事实有关，即当`WebViewController.ShouldAutoRotateToInterfaceOrientation`被调用时，我们调用了基类`CDVViewController.ShouldAutoRotateToInterfaceOrientation`，而基类显然又调用了`WebViewController.ShouldAutoRotateToInterfaceOrientation`，等等。

查看我正在使用的 Cordova 版本的源代码（[此处](https://github.com/apache/cordova-ios/blob/2.4.0/CordovaLib/Classes/CDVViewController.m)），`shouldAutorotateToInterfaceOrientation:`会调用`supportsOrientation:`，它会从`NSArray`.

我看不出有什么理由`CDVViewController.ShouldAutoRotateToInterfaceOrientation`应该打电话`WebViewController.ShouldAutoRotateToInterfaceOrientation`。Xamarin 或 Cordova 社区中的任何人有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:00:35.523

如果其他人遇到与 Bindings 相关的类似问题，由于 Rolf Bjarne Kvinge 的建议，我设法得到了这个工作（[绑定问题：扩展类导致方法调用自身？](https://stackoverflow.com/questions/15750073/binding-issues-extending-a-class-leads-method-calling-itself?lq=1#comment22387292_15750073)）

事实证明，我正在使用的一个标志（没有真正理解它做了什么）应该为此负责。使用标志生成 DLL`btouch`时。`-e``Generates smaller classes that can not be subclassed`

删除它可能会解决您的问题，就像对我一样。

# postgresql - 从 postgresql 中删除外部文件

> ID：15693764
> 
> 赞同：1
> 
> 时间：2013-03-28T23:11:13.480
> 
> 标签：postgresql

我使用添加了一个文件到 postgres，`\i /path/to/some/file.sql`但文件中有错字。

这是我在文件中的内容：

```
CREATE VIEW holidays AS
  SELECT event_id AS holiday_id, title AS name, starts AS date
  FROM events
  WHERE title LIKE '%Day%' AND venue_id IS NULL; 
```

在我原来的版本中`%DAY%`。再次运行`\i /path/to/some/file.sql`时，我收到此错误：

```
ERROR:  relation "holidays" already exists 
```

如何撤消这种关系以使代码再次运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:14:25.617

\i 命令不会“添加以后可以删除的文件”。它只是在文件中运行 SQL，就像您在 psql 命令提示符下键入它一样。如果你想撤销你所做的，这将取决于 SQL 到底是什么。

# arrays - 比较两个数组散列之间的值

> ID：15693767
> 
> 赞同：0
> 
> 时间：2013-03-28T23:11:57.800
> 
> 标签：arrays, perl, hash

我有两个数组哈希。我想比较两个数组哈希中的键是否包含相同的值。

```
#!/usr/bin/perl
use warnings; use strict;
my %h1 = (
      w => ['3','1','2'],
      e => ['6','2','4'],
      r => ['8', '1'],
     );

my %h2 = (
      w => ['1','2','3'],
      e => ['4','2','6'],
      r => ['4','1'],
     );

foreach ( sort {$a <=> $b} (keys %h2) ){
    if (join(",", sort @{$h1{$_}})
        eq join(",", sort @{$h1{$_}})) {    

        print join(",", sort @{$h1{$_}})."\n";
        print join(",", sort @{$h2{$_}})."\n\n";
    } else{
    print "no match\n"
    }
    }

if ("1,8" eq "1,4"){
    print "true\n";
} else{
    print "false\n";
} 
```

输出应该是：

```
2,4,6
2,4,6

1,2,3
1,2,3

no match
false 
```

但由于某种原因我`if-statement`的不工作。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:24:43.770

智能匹配是一个有趣的解决方案；从 5.010 开始提供：

```
if ([sort @{$h1{$_}}] ~~ [sort @{$h2{$_}}]) { ... } 
```

当每个数组的对应元素智能匹配自身时，数组引用上的智能匹配返回 true。对于字符串，智能匹配测试字符串是否相等。

这可能比`join`ing 数组的成员更好，因为智能匹配适用于任意数据*。另一方面，智能匹配相当复杂并且有[隐藏的陷阱](https://stackoverflow.com/questions/12579160/will-there-be-any-difference-between-42-42-0-42-0-42/12579404#12579404/questions/12579160/will-there-be-any-difference-between-42-42-0-42-0-42/12579404#12579404)

* * *

*关于任意数据：如果你能保证你所有的字符串只包含数字，那么一切都很好。但是，那么您可以只使用数字：

```
%h1 = (w => [3, 1, 2], ...);
# sort defaults to alphabetic sorting. This is undesirable here
if ([sort {$a <=> $b} @{$h1{$_}}] ~~ [sort {$a <=> $b} @{$h2{$_}}]) { ... } 
```

如果您的数据可能包含任意字符串，尤其是包含逗号的字符串，那么您的比较是不安全的——考虑数组

```
["1foo,2bar", "3baz"], ["1foo", "2bar,3baz"] # would compare equal per your method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:18:35.090

```
if (join(",", sort @{$h1{$_}})
    eq join(",", sort @{$h1{$_}})) { 
```

应该 ：

```
if (join(",", sort @{$h1{$_}})
    eq join(",", sort @{$h2{$_}})) { 
```

注意`$h2`. 您正在将一个哈希与其自身进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:19:06.577

试试这个：它精确地逐行比较两个哈希值。

```
if (  join(",", sort @{ $h1{$_}})
      eq join(",", sort @{ $h2{$_}}) ) #Compares two lines exactly 
```

# java - JSP页面格式错误

> ID：15693770
> 
> 赞同：-4
> 
> 时间：2013-03-28T23:12:08.860
> 
> 标签：java, jsp

我在尝试格式化对象时不断出错：

```
Object x= itr3.next();
       x=String.format("%02d",x); 
```

这是错误：

```
java.util.IllegalFormatConversionException: d != java.lang.String
    at java.util.Formatter$FormatSpecifier.failConversion(Formatter.java:3999) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:18:35.407

`String.format("%02d",x)`期望第二个参数是一个`int`（或一个`Integer`），而不是一个`Object`。此外，Java 不是一种动态更改类型的脚本语言，例如 x 的行为为`int`，然后为`String`。

看起来您有一个`String`带有数字内容的内容，并且您想将其更改`String`为左侧填充 0。您可以这样做：

```
String x = ... //get your content as String
int theNumber = Integer.parseInt(x); //this will work if your x contains numeric value
x = String.format("%02d", theNumber); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T23:30:46.030

简单的问题，简单的答案：.format() 不适用于 Object 或 String 类型，只能用于整数。

# android - Android 可搜索字典示例代码错误？

> ID：15693773
> 
> 赞同：0
> 
> 时间：2013-03-28T23:12:29.717
> 
> 标签：android, dictionary, searchable, search-suggestion

**我在Android 可搜索字典示例应用程序**中发现了有趣的错误。

请按照以下步骤重现它：

*   在搜索框中输入“bo”
*   点击去
*   从结果中点击“虚假”
*   当您看到结果和定义时，再次调用搜索
*   输入“coa”，它应该给你“联盟”
*   取而代之的是，什么也没有发生……

但这神奇地起作用：

*   在搜索框中输入“bo”
*   从自定义建议列表中选择虚假
*   当您看到结果和定义时，再次调用搜索
*   输入“coa”，它应该给你“联盟”
*   “联盟”真的找到了。

我想问你，为什么会出现这种情况以及如何修复它，所以它会正常运行。

这是一些有关主题的代码，我宁愿发布更多...

```
public class SearchableDictionary extends Activity {

private TextView mTextView;
private ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mTextView = (TextView) findViewById(R.id.text);
    mListView = (ListView) findViewById(R.id.list);

    handleIntent(getIntent());
}

@Override
protected void onNewIntent(Intent intent) {
    // Because this activity has set launchMode="singleTop", the system calls this method
    // to deliver the intent if this activity is currently the foreground activity when
    // invoked again (when the user executes a search from this activity, we don't create
    // a new instance of this activity, so the system delivers the search intent here)
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        // handles a click on a search suggestion; launches activity to show word
        Intent wordIntent = new Intent(this, WordActivity.class);
        wordIntent.setData(intent.getData());
        startActivity(wordIntent);
    } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        // handles a search query
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }
}

/**
 * Searches the dictionary and displays results for the given query.
 * @param query The search query
 */
private void showResults(String query) {

    Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
                            new String[] {query}, null);

    if (cursor == null) {
        // There are no results
        mTextView.setText(getString(R.string.no_results, new Object[] {query}));
    } else {
        // Display the number of results
        int count = cursor.getCount();
        String countString = getResources().getQuantityString(R.plurals.search_results,
                                count, new Object[] {count, query});
        mTextView.setText(countString);

        // Specify the columns we want to display in the result
        String[] from = new String[] { DictionaryDatabase.KEY_WORD,
                                       DictionaryDatabase.KEY_DEFINITION };

        // Specify the corresponding layout elements where we want the columns to go
        int[] to = new int[] { R.id.word,
                               R.id.definition };

        // Create a simple cursor adapter for the definitions and apply them to the ListView
        SimpleCursorAdapter words = new SimpleCursorAdapter(this,
                                      R.layout.result, cursor, from, to);
        mListView.setAdapter(words);

        // Define the on-click listener for the list items
        mListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                // Build the Intent used to open WordActivity with a specific word Uri
                Intent wordIntent = new Intent(getApplicationContext(), WordActivity.class);
                Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                                String.valueOf(id));
                wordIntent.setData(data);
                startActivity(wordIntent);
            }
        });
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
    }

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        default:
            return false;
    }
}
} 
```

这个活动展示了结果：

```
public class WordActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.word);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    Uri uri = getIntent().getData();
    Cursor cursor = managedQuery(uri, null, null, null, null);

    if (cursor == null) {
        finish();
    } else {
        cursor.moveToFirst();

        TextView word = (TextView) findViewById(R.id.word);
        TextView definition = (TextView) findViewById(R.id.definition);

        int wIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_WORD);
        int dIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DEFINITION);

        word.setText(cursor.getString(wIndex));
        definition.setText(cursor.getString(dIndex));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
    }

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        case android.R.id.home:
            Intent intent = new Intent(this, SearchableDictionary.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T16:05:05.397

我想我已经弄清楚了错误。好吧，这不一定是错误，而只是实现它的不同方式。此实现使您只能`ACTION_SEARCH`在 SearchableActivity 中执行（非建议）。我也花了很多天才弄清楚这一点，因为它很难复制。它与 SearchableActivity 的 singleTop 启动模式有关。问题是，当您`ACTION_SEARCH`在 WordActivity 中使用（非建议）进行搜索时，它并没有按照它发送到 SearchableActivity onHandleIntent`FLAG_ACTIVITY_CLEAR_TOP`的意图进行设置。`ACTION_SEARCH`这会使您得到类似`ActivityManager START SearchableActivity`但从未出现的错误`ActivityManager DISPLAY SearchableActivity`。它永远不会进入`onCreate()`当发生此错误时，很难弄清楚如何解决它。为了解决这个问题，我认为您要么必须删除 singleTop 以使其在每次 ACTION_SEARCH 完成时创建另一个活动（并将`handleIntent(Intent)`方法调用放入`onCreate()`），要么覆盖`onSearchRequested()`的`startSearch(..., ..., ..., ...)`方法以获取意图并设置意图标志。当然，如果您在使用 CLEAR_TOP 时点击了返回按钮，您将无法返回活动。我还没有弄清楚如何做后者，因为我不知道如何覆盖 startSearch 并获得意图：X

# ios - 裁剪 CMSampleBufferRef

> ID：15693784
> 
> 赞同：5
> 
> 时间：2013-03-28T23:13:47.840
> 
> 标签：ios, ciimage, cmsamplebufferref

我正在尝试将图像裁剪`CMSampleBufferRef`为特定大小。我正在做 5 个步骤 - 1.`PixelBuffer`从`SampleBuffer`2\. 转换`PixelBuffer`为`CIImage`3\. 裁剪`CIImage`4\. 渲染`CIImage`回`PixelBuffer`5\. 附加`PixelBuffer`到`SampleBuffer`. 到目前为止，我在第 4 步遇到问题 - 将图像渲染回`PixelBuffer`（无法检查超出这一点）没有渲染到缓冲区（我使用相同的方法检查它`CIImage imageWithCVPixelBuffer`并获得 NULL 作为返回）。非常感谢任何提示或帮助。

```
CGRect cropRect = CGRectMake(0, 0, 640, 480);

CIImage *ciImage = [CIImage imageWithCVPixelBuffer:(CVPixelBufferRef)CMSampleBufferGetImageBuffer(sampleBuffer)]; //options: [NSDictionary dictionaryWithObjectsAndKeys:[NSNull null], kCIImageColorSpace, nil]];
ciImage = [ciImage imageByCroppingToRect:cropRect];    

CVPixelBufferRef pixelBuffer;
CVPixelBufferCreate(kCFAllocatorSystemDefault, 640, 480, kCVPixelFormatType_32BGRA, NULL, &pixelBuffer);

CVPixelBufferLockBaseAddress( pixelBuffer, 0 );

CIContext * ciContext = [CIContext contextWithOptions: nil];
[ciContext render:ciImage toCVPixelBuffer:pixelBuffer];
CVPixelBufferUnlockBaseAddress( pixelBuffer, 0 );

CMSampleTimingInfo sampleTime = {
    .duration = CMSampleBufferGetDuration(sampleBuffer),
    .presentationTimeStamp = CMSampleBufferGetPresentationTimeStamp(sampleBuffer),
    .decodeTimeStamp = CMSampleBufferGetDecodeTimeStamp(sampleBuffer)
};

CMVideoFormatDescriptionRef videoInfo = NULL;
CMVideoFormatDescriptionCreateForImageBuffer(kCFAllocatorDefault, pixelBuffer, &videoInfo);

CMSampleBufferRef oBuf;
CMSampleBufferCreateForImageBuffer(kCFAllocatorDefault, pixelBuffer, true, NULL, NULL, videoInfo, &sampleTime, &oBuf); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T22:35:32.883

所以我找到了我遇到问题的原因。显然，我必须在初始化像素缓冲区时添加 kCVPixelBufferIOSurfacePropertiesKey 键，方法是创建字典并将其传递给初始化程序。如果有人偶然发现此问题，这是一个代码：

```
CFDictionaryRef empty; // empty value for attr value.
CFMutableDictionaryRef attrs;
empty = CFDictionaryCreate(kCFAllocatorDefault, // our empty IOSurface properties dictionary
                           NULL,
                           NULL,
                           0,
                           &kCFTypeDictionaryKeyCallBacks,
                           &kCFTypeDictionaryValueCallBacks);
attrs = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                  1,
                                  &kCFTypeDictionaryKeyCallBacks,
                                  &kCFTypeDictionaryValueCallBacks);

CFDictionarySetValue(attrs,
                     kCVPixelBufferIOSurfacePropertiesKey,
                     empty); 
```

然后您只需将此字典作为参数传递给 CVPixelBufferCreate

我在这里找到了这个解决方案：http: [//allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/](http://allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/)

# css - bootstrap 字体不反映 - 用于 bootswatch 主题

> ID：15693793
> 
> 赞同：1
> 
> 时间：2013-03-28T23:14:31.413
> 
> 标签：css, twitter-bootstrap, fonts, themes, google-font-api

我在引导程序中很菜鸟。我尝试了我的第一个引导页面，然后从 bootswatch.com 下载了一个主题，并将 bootstrap.css 替换为 Cerulean 主题。当我更改 bootstrap.css 中的字体时，它会保留旧主题

```
@import url(//fonts.googleapis.com/css?family=Caesar+Dressing); 
```

但是当我刷新我的页面时它没有反映。

```
 <!DOCTYPE html>
<head>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
<link href="css/bootstrap.css" rel="stylesheet">

<title>Twitter Bootstrap Tutorial - A responsive layout tutorial</title>
<style type='text/css'>

</style>
<script>
$(function() {
  // Setup drop down menu
  $('.dropdown-toggle').dropdown();

  // Fix input element click problem
  $('.dropdown input, .dropdown label').click(function(e) {
    e.stopPropagation();
  });
});
</script>
</head>
<body>
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container"><!-- Collapsable nav bar -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <!-- Your site name for the upper left corner of the site -->
      <a class="brand">GUVI</a>

      <!-- Start of the nav bar content -->
      <div class="nav-collapse"><!-- Other nav bar content -->

        <!-- The drop down menu -->
        <ul class="nav pull-right">
          <li><a href="/users/sign_up">Sign Up</a></li>
          <li class="divider-vertical"></li>
          <li class="dropdown">
            <a class="dropdown-toggle" href="#" data-toggle="dropdown">Sign In <strong class="caret"></strong></a>
            <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
              <form action="[YOUR ACTION]" method="post" accept-charset="UTF-8">
  <input id="user_username" style="margin-bottom: 15px;" type="text" name="user[username]" size="30" />
  <input id="user_password" style="margin-bottom: 15px;" type="password" name="user[password]" size="30" />
  <input id="user_remember_me" style="float: left; margin-right: 10px;" type="checkbox" name="user[remember_me]" value="1" />
  <label class="string optional" for="user_remember_me"> Remember me</label>

  <input class="btn btn-primary" style="clear: left; width: 100%; height: 32px; font-size: 13px;" type="submit" name="commit" value="Sign In" />
</form>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:45:17.993

您正在链接到正确的字体，是的；也就是说，这是我对此的看法：

1.  在大多数情况下，您应该使用标签来导入 Google 网络字体。我通常尽可能避免使用@import，因为它会延迟文件的加载。
2.  替换字体所需要做的就是在 body {} 样式块中将新的字体系列指定为“Caesar Dressing”。假设您已经在 bootstrap.css 的本地副本中完成了该操作，如果仍然无法正常工作，请尝试在 HTML 中的标记内指定它。不过，您应该尽可能避免这样做；当您有多个页面要维护时，它会让人很烦。

另一件事：我注意到您的某些输入有一些内联样式。你真的应该尽可能避免使用那些——尝试尽可能多地分离表示和内容标记是一种很好的形式。

# ios - 如何在完成前中断 UIView 动画？

> ID：15693795
> 
> 赞同：2
> 
> 时间：2013-03-28T23:14:37.607
> 
> 标签：ios, animation, uiview

我正在使用 [UIView animateWithDuration... ] 来为我的应用程序的每个页面显示文本。每个页面都有自己的文本。我正在滑动以在页面之间导航。我正在使用 1 秒溶解效果让文本在页面显示后淡入。

这是问题所在：如果我在那 1 秒内滑动（在此期间文本淡入），动画将在下一页出现时完成，并且 2 个文本将重叠（前一个和当前）。

我想实施的解决方案是，如果我在动画发生期间碰巧滑动，则中断动画。我就是不能让它发生。[self.view.layer removeAllAnimations]; 对我不起作用。

这是我的动画代码：

```
 - (void) replaceContent: (UITextView *) theCurrentContent withContent: (UITextView *) theReplacementContent {

    theReplacementContent.alpha = 0.0;
    [self.view addSubview: theReplacementContent];

    theReplacementContent.alpha = 0.0;

    [UITextView animateWithDuration: 1.0
                              delay: 0.0
                            options: UIViewAnimationOptionTransitionCrossDissolve
                         animations: ^{
                             theCurrentContent.alpha = 0.0;
                             theReplacementContent.alpha = 1.0;
                         }
                         completion: ^(BOOL finished){
                             [theCurrentContent removeFromSuperview];
                             self.currentContent = theReplacementContent;
                             [self.view bringSubviewToFront:theReplacementContent];
                         }];

   } 
```

你们知道如何进行这项工作吗？你知道解决这个问题的其他方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T00:12:00.787

您不能直接取消通过`+animateWithDuration...`. 你想要做的是用一个即时的新动画**替换正在运行的动画。**

您可以编写以下方法，当您想要显示下一页时调用该方法：

```
- (void)showNextPage
{
    //skip the running animation, if the animation is already finished, it does nothing
    [UIView animateWithDuration: 0.0
                          delay: 0.0
                        options: UIViewAnimationOptionTransitionCrossDissolve | UIViewAnimationOptionBeginFromCurrentState
                     animations: ^{
                         theCurrentContent.alpha = 1.0;
                         theReplacementContent.alpha = 0.0;
                     }
                     completion: ^(BOOL finished){
                         theReplacementContent = ... // set the view for you next page
                         [self replaceContent:theCurrentContent withContent:theReplacementContent];
                     }];
} 
```

注意`UIViewAnimationOptionBeginFromCurrentState`传递给的附加信息`options:`。它的作用是，它基本上告诉框架拦截受影响属性的任何正在运行的动画，并用这个替换它们。通过将 设置`duration:`为**0.0**，新值会立即设置。

然后，您可以在`completion:`块中创建和设置新内容并调用您的`replaceContent:withContent:`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T23:20:55.630

因此，另一种可能的解决方案是在动画期间禁用交互。

```
[[UIApplication sharedApplication] beginIgnoringInteractionEvents];

[[UIApplication sharedApplication] endIgnoringInteractionEvents]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:26:31.267

我会声明一个像`shouldAllowContentToBeReplaced`. 动画开始时将其设置为 false，动画完成时将其设置为 true。然后`if (shouldAllowContentToBeReplaced) {`在开始动画之前说。

# php - WordPress 数据库错误 MySQL 服务器已消失以进行查询

> ID：15693796
> 
> 赞同：5
> 
> 时间：2013-03-28T23:14:41.087
> 
> 标签：php, mysql, database

我经常收到此错误，以至于 php_error 日志文件每 2 秒增加 1MB。而且网站速度很慢。

我试图将此行添加到 wp-db.php

```
$this->query("set session wait_timeout=600" ); 
```

但它没有帮助。

Web 服务器是 IIS 7，最新版本的 mysql 和 wordpress

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-02T05:26:40.337

这个技巧适用于所有 WordPress 版本。打开您的 Wordpress 目录。该目录将包含文件夹：

```
wp-admin
wp-content
wp-includes 
```

打开 wp-includes。搜索 wp-db.php 文件。如果找到该文件，请使用文本编辑器打开它。使用文本编辑器的搜索工具，搜索：

```
$this->ready = true; 
```

找到该行后，在找到的行之后添加以下行：

```
//WP Query Gone Away Error Fix
$this->query("set session wait_timeout=600"); 
```

您还可以按照[https://subinsb.com/fix-wordpress-error-mysql-server-has-gone-away](https://subinsb.com/fix-wordpress-error-mysql-server-has-gone-away)链接查看更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T23:48:40.173

运行`SHOW STATUS WHERE Variable_name LIKE '%onn%'`以查看您有多少打开的连接。我的看起来像这样：

```
Variable_name        Value
Aborted_connects         1
Connections            629
Max_used_connections     3
Ssl_client_connects      0
Ssl_connect_renegotiates 0
Ssl_finished_connects    0
Threads_connected        2 
```

运行`SHOW PROCESSLIST`以查看哪些进程处于活动状态。

问题可能是您打开了太多连接而不是关闭它们。运行这些命令至少可以深入了解可能存在的问题。

# javascript - 从不同页面上的链接加载 AJAX 内容

> ID：15693803
> 
> 赞同：0
> 
> 时间：2013-03-28T23:15:03.577
> 
> 标签：javascript, ajax

我想创建一个链接，我们称之为“星期一的日程”。当您单击该链接时，它会加载“Schedule”页面，并且“ajaxoutput”div 会预先填充“view_games_monday.php”，如下面的函数所示。

目前，与以下功能相关的链接位于“Schedule”页面上，该页面是具有“ajaxoutput”div 的相同页面。

```
document.getElementById('games_monday').onclick = function()
{
    callPage('view_games_monday.php',document.getElementById("ajaxoutput"));
}

<a href="#" id="games_monday">monday</a>

<div id="ajaxoutput">
</div> 
```

那么如何设置“星期一的日程安排”链接以加载“日程安排”页面，并在“ajaxoutput”div 中预先填充“view_games_monday.php”？我的问题是“星期一的日程”链接不在“日程”页面上。

对不起所有的报价只是想清楚。

感谢您的帮助。

我已经尝试了以下方法，并且可以加载计划页面，但不能使用正确的 ajax 输出：

```
document.getElementById('schedule_monday').onclick = function()
    {
        location = "http://mydomain.com/schedule";
        this.document.location.href = location;
        window.onload = callPage('http://mydomain.com/view_games_monday.php',document.getElementById("ajaxoutput"));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:55:05.840

根据我们的评论讨论，根据我对您想要的内容的理解，这是我的建议。

您只需要一个页面，`index.php`. 这是非常基本的，但传达了这一点：

```
<?php

$scheduleDay = (isset($_GET['day']) ? $_GET['day'] : 'monday');

if( $scheduleDay == "monday" ){
   print 'stuff for monday goes here';
}
else if( $scheduleDay == "tuesday" ){
   print 'stuff for tuesday goes here';
} 
```

然后，在您的导航菜单中，只需使用：`index.php?day=tuesday`等。

当php文件检测到日期时，会打印相应的信息。甚至不需要 javascript。

您可以像我提到的那样让它更漂亮，并将所有时间表打印到页面上并使用 javascript 仅显示一天，但我认为这个示例是您正在寻找的。

# vbulletin - 同一个 vBulletin 论坛上的两个域

> ID：15693804
> 
> 赞同：1
> 
> 时间：2013-03-28T23:15:09.760
> 
> 标签：vbulletin

是否可以让两个域指向同一个 vBulletin 论坛并共享登录信息？

例如，我的论坛位于 some.subXXXdomain.com，但我也想将 YYYdomain.com 停放在同一个论坛上。

我知道该怎么做，但问题是当我通过 YYYdomain.com 登录时，它只是要求我再次登录。

我认为问题是特定于域的cookie。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T15:16:32.400

> 我认为问题是特定于域的cookie。

没错，vBulletin 不允许您使用多个域。

我认为，使用多域的唯一方法是破解代码，以[这个 mod @vborg](http://www.vbulletin.org/forum/showthread.php?t=254197)为例（vb4）

（但我不会向你推荐这个模组，只要它是一个非常古老的模组并且目前“不支持”和“处于测试阶段”）

或者，对于“多域 + 单板”，您可以使用 url 重写，如果您使用的是 apache2，请检查：[rewrite guide](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

这只是为您的用户提供了一种重定向，而不是真正的“多域”访问。

此外，请注意常规 vBuletin 许可证仅允许您使用一个域。所以基本上：2个域=> 2个许可证。

# python - 如何使用 pip 下载和安装 pcapy 包？

> ID：15693808
> 
> 赞同：4
> 
> 时间：2013-03-28T23:15:30.027
> 
> 标签：python, pypi

我知道为了安装一个包，我需要执行：

```
sudo pip install package_name 
```

但是我怎么知道包的名称是什么——我应该作为参数给出。我在pypi中找到了一个我想安装的包——pcapy：

[https://pypi.python.org/pypi/pcapy/0.10.3](https://pypi.python.org/pypi/pcapy/0.10.3)

我试过：

```
sudo pip install pcapy 
```

它没有用......安装这个软件包的正确方法是什么？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:20:16.937

该软件包不在 PyPI 中。有一个页面，但由于某种原因源代码托管在其他地方（这是我第一次看到它）：

Ubuntu 有一个（可能是旧的）软件包：

```
$ sudo apt-get install python-pcapy 
```

您也可以从源代码构建它：

```
$ sudo pip install "http://corelabs.coresecurity.com/index.php?module=Wiki&action=attachment&type=tool&page=Pcapy&file=pcapy-0.10.8.tar.gz" 
```

# cocoa - 强制调用委托方法

> ID：15693814
> 
> 赞同：0
> 
> 时间：2013-03-28T23:16:08.053
> 
> 标签：cocoa, delegates, nsnotificationcenter, nssplitview

我有一个`NSSplitView`这样的委托方法：

```
- (void)splitViewWillResizeSubviews:(NSNotification *)aNotification
{
    NSLog(@"RESIZE!");
} 
```

每当我拖动分隔线时都会调用此方法，因此它已正确注册。我想从另一个对象调用它，并正在考虑使用它：

```
[[NSNotificationCenter defaultCenter] postNotificationName:NSSplitViewWillResizeSubviewsNotification object:self]; 
```

根据 Apple 文档，这是应该发送以调用委托方法的通知。但是，它不起作用。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:25:13.743

您可以手动调用该方法

```
NSSplitView * yourSplitView; //Get reference to your splitview
id yourSplitViewDelegate = [yourSplitView delegate];
[yourSplitViewDelegate splitViewWillResizeSubviews:nil];//Optionally create the NSNotification with relevant data 
```

如果您真的想通过通知中心，请确保`self`您的问题是 NSSplitView。

```
NSSplitView * yourSplitView; //Get reference to your splitview
[[NSNotificationCenter defaultCenter] postNotificationName:NSSplitViewWillResizeSubviewsNotification object:yourSplitView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T06:39:55.227

原来我需要手动注册`NSSplitViewWillResizeSubviewsNotification`通知的委托类！

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(splitViewWillResizeSubviews:)
                                                 name:NSSplitViewWillResizeSubviewsNotification
                                               object:vc]; 
```

其中 vc 是应该发送通知的视图控制器。

这是出乎意料的行为（对我来说），因为`<NSSplitViewDelegate>`预计会自动注册`NSSplitView...`通知。

# c++ - 编译错误：未解决的重载函数类型

> ID：15693815
> 
> 赞同：5
> 
> 时间：2013-03-28T23:16:16.573
> 
> 标签：c++, templates, compilation, member-pointers

我尝试使用 g++ 4.7.2 编译以下内容：

```
template <typename T>
struct A {
    struct B {
        T t;

        template<T B::*M>
        T get() {
            return this->*M;
        }
    };

    B b;

    T get() {
        return b.get<&B::t>();
    }
};

int main() {
    A<int> a;
    a.get();
} 
```

它给了我

```
test.cpp: In member function ‘T A<T>::get()’:
test.cpp:15:23: error: expected primary-expression before ‘)’ token
test.cpp: In instantiation of ‘T A<T>::get() [with T = int]’:
test.cpp:22:8:   required from here
test.cpp:15:23: error: invalid operands of types ‘&lt;unresolved overloaded function type>’ and ‘int A<int>::B::*’ to binary ‘operator<’ 
```

为什么？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T23:17:14.607

您需要使用`template`消歧器：

```
return b.template get<&B::t>(); 
```

没有它，解析表达式时：

```
b.get<&B::t>(); 
```

编译器无法判断它是否应该解释`get`为成员变量的名称后跟一个`<`符号（小于），或者解释为名为`get`.

尽管*我们*知道我们的表达式的预期含义是什么，但编译器不能，至少在实例化发生之前不能 - 并且即使您的函数从未实例化，也会执行句法解析。

# html - CSS 3 col 模板 100% 相同高度

> ID：15693817
> 
> 赞同：1
> 
> 时间：2013-03-28T23:16:21.100
> 
> 标签：html, css

我正在尝试做下一个：

`html > body > div-wrapper > div-left, div-separator, div-content`

1.  三个 div 将具有相同的高度
2.  如果它们是空的（或没有溢出），高度将是页面的 100%（没有滚动条）。
3.  如果其中一些溢出，我将只有 1 个滚动条同时向下/向上滚动三个 div（我认为滚动包装器）。

这可能吗？我花了 7 个小时思考这个问题，但我不能只用 HTML + CSS（不使用 flexbox）来解决。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:28:25.777

这是一个很好的问题！我花了*很*长时间为您创建一个优雅的解决方案。

您需要的是带有额外列容器的[动态粘性页脚技术。](http://pixelsvsbytes.com/blog/2011/09/sticky-css-footers-the-flexible-way/)

## HTML

```
<div id="container">
    <header class="section">
      foo
    </header>

    <div class="section expand">
        <div class="columns-container">
            <div class="column" id="a">
                <p>Contents A</p>
            </div><div class="column" id="b">
                <p>Contents B</p>
            </div><div class="column" id="c">
                <p>Contents C</p>
            </div>
        </div>
    </div>

    <footer class="section">
        bar
    </footer>
</div> 
```

## CSS

```
/*************************
 * Sticky footer hack
 * Source: http://pixelsvsbytes.com/blog/2011/09/sticky-css-footers-the-flexible-way/
 ************************/

/* Stretching all container's parents to full height */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

/* Setting the container to be a table with maximum width and height */
#container {
    display: table;
    height: 100%;
    width: 100%;
}

/* All sections (container's children) should be table rows with minimal height */
.section {
    display: table-row;
    height: 1px;
}

/* The last-but-one section should be stretched to automatic height */
.section.expand {
    height: auto;
}

/*************************
 * Full height columns
 ************************/

/* We need one extra container, setting it to full width */
.columns-container {
    display: table-cell;
    height: 100%;
}

/* Creating columns */
.column {
    /* The float:left won't work for Chrome for some reason, so inline-block */
    display: inline-block; /* for this to work, the .column elements should have NO SPACE BETWEEN THEM */
    vertical-align: top;
    height: 100%;
    width: 33.3333%;
}

/****************************************************************
 * Just some coloring so that we're able to see height of columns
 ****************************************************************/
header { background-color: yellow; }
#a { background-color: pink; }
#b { background-color: lightgreen; }
#c { background-color: lightblue; }
footer { background-color: purple; } 
```

## 演示

*   紧凑的列内容：http: [//jsfiddle.net/hsX5q/19/](http://jsfiddle.net/hsX5q/19/)
*   栏目内容之一溢出窗口高度：http: [//jsfiddle.net/hsX5q/20/](http://jsfiddle.net/hsX5q/20/)

## 附言

您的问题中有一个错误的 CSS 选择器。正确的是：

```
html > body > div-wrapper > div-left, 
html > body > div-wrapper > div-separator,
html > body > div-wrapper > div-content { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:34:16.277

```
<style type="text/css">
.wrap {
    border: 1px solid #f00;
    height: 100%;
    width: 100%;
}
.wrap div {
    border: 1px solid #00f;
    overflow: auto;
    height: 100%;
    width: 33%;
    float: left;
    margin: 0px;
}
</style>
<div class="wrap">
    <div>Contents A</div>
    <div>Contents B</div>
    <div>Contents C</div>
</div> 
```

或者

```
<frameset cols="33%,*,33%">
   <frame src="frame_a.htm">
   <frame src="frame_b.htm">
   <frame src="frame_c.htm">
 </frameset> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T11:52:06.693

这样做：

```
.col{
   display:block;
   height:100%;
} 
```

它很简单，它很快，它是 css。

# php - 将社交帐户关联到 ZfcUser

> ID：15693818
> 
> 赞同：0
> 
> 时间：2013-03-28T23:16:29.847
> 
> 标签：php, zend-framework2, social, zfcuser

我正在使用 Zend Framework 2。我需要**每个用户能够关联他们的社交帐户**（Facebook、Twitter、...）。每个用户在我的网站上都有一个使用*ZfcUser*模块的帐户，我想关联他们的社交帐户。

你知道一些库或包来集成该功能吗？或者有什么建议？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:48:06.827

谢谢我找到了解决方案（使用您的链接@Ocramius）！只需使用此代码创建一个链接：

```
<?php echo $this->url("scn-social-auth-user/add-provider/provider",array('provider'=>'twitter')); ?> 
```

有用 ！

# curl - 您是否需要将 $ch 变量与 cURL 一起使用？

> ID：15693822
> 
> 赞同：2
> 
> 时间：2013-03-28T23:17:15.510
> 
> 标签：curl

在继续之前，我为我对这个主题的无知道歉，我是新手。

使用 cURL 函数时，是否需要使用 $ch、$output、$f、$url 等变量，或者您可以随意命名变量（同时仍以相同方式定义它们）？

我的第一直觉是我可以随便命名它们，但我看到的所有 cURL 示例都使用标准变量名。提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:19:48.863

您始终可以以任何您喜欢的方式命名变量（受限于您使用的特定语言中的有效变量名称）。

使用标准变量名称，以便读者可以从名称中猜出该变量的预期用途。

当你编写一个函数时，它看起来像这样：

```
function printSum($firstArg, $arg2) {
  print $firstArg + $arg2;
} 
```

传递给函数的变量的命名方式无关紧要。您甚至可以考虑，根本不传递变量，而是传递文字：

```
printSum(5, 3); 
```

在函数内部，参数列表`($firstArg, $arg2)`确定函数如何访问传递给函数的值。函数不应该知道函数外发生的事情（例如如何命名变量等）。

# ios - 确定 NSString 中的 ascii 字符

> ID：15693825
> 
> 赞同：0
> 
> 时间：2013-03-28T23:17:20.320
> 
> 标签：ios, cocoa-touch, nsstring, uikeyinput

在我的一个`UIView`课程中，我`UIKeyInput`附加了协议以从`UIKeyboard`. 我试图弄清楚按下空格按钮时正在使用什么 ascii 字符（它不仅仅是 ' ' 它是它出现的其他东西）。有谁知道这个 asci 字符是什么，或者我怎么知道正在使用什么 ascii 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:26:07.740

要查看每个字符的值，您可以执行以下操作：

```
NSString *text = ... // the text to examine
for (NSUInteger c = 0; c < text.length; c++) {
    unichar char = [text characterAtIndex:c];
    NSLog(@"char = %x", (int)char); // Log the hex value of the Unicode character
} 
```

请注意，此代码不能正确处理 \U10000 及以上范围内的任何 Unicode 字符。这包括许多（全部？）表情符号字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T04:55:36.713

如果您*真的*需要知道它实际上是什么字符（或代码点），请使用 使您能够使用转换参数来获取人类可读的 Unicode 名称或获取转义的 Unicode 代码点的`CFMutableString`函数。`CFStringTransform()``kCFStringTransformToUnicodeName``Hex-Any`

否则，您可以`unichar`采用简单获取代码点的方法。

# winapi - Win32_Printer 类 PrinterStatus "6 (0x6) Stopped printing" 是什么意思？

> ID：15693828
> 
> 赞同：0
> 
> 时间：2013-03-28T23:17:32.350
> 
> 标签：winapi, printing

请参阅此页面：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394363%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394363%28v=vs.85%29.aspx)

搜索“打印机状态”

“停止打印”是什么意思？打印作业完成了吗？或者这是一个“错误”状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:50:23.400

它的意思正是它所说的：打印机由于某种原因停止打印。最可能的原因是卡纸、缺纸或类似问题。

# matlab - Matlab：将一个向量与许多其他向量进行卷积或相关

> ID：15693831
> 
> 赞同：3
> 
> 时间：2013-03-28T23:18:06.037
> 
> 标签：matlab, correlation, convolution

我有向量 y 和向量 x1,x2,...,x50。我需要将 y 与每个 x 向量相关或卷积。我目前正在 FOR 循环中执行此操作，但速度很慢，我正在尝试找到一种方法来立即执行这些操作。[这个帮助页面](http://www.mathworks.com/help/signal/ug/correlation-and-covariance.html#f12-6580)有一个关于与多个通道相关的部分（这似乎是我需要做的），但只讨论自相关。我曾尝试将 xcorr 函数与向量和矩阵一起使用（矩阵是并排的 x 向量），但这不起作用。有什么提示吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:44:44.130

**不要使用，慢！**

如果您的向量存储在元胞数组中，您可以使用`cellfun`：

```
y = [ ... ];
xs = { [ ... ], [ ... ], [ ... ] };

res = cellfun(@(x) xcorr(x,y), xs, 'UniformOutput', false); 
```

`res`现在是具有相关性的元胞数组。

~~这应该比 for 循环（未经测试）更快，因为不必解释循环。~~

您可以使用 将矩阵转换为向量元胞数组`mat2cell`。

**更新**

经测试：

```
xm = rand(n);
xc = mat2cell(xm, ones(n,1), n);
y  = rand([n 1]);

tic
for i = 1:n
   xcorr(y,xm(i,:)); 
end
toc

tic
cellfun(@(x) xcorr(x,y), xc, 'UniformOutput', false);
toc 
```

为了`n = 5000`

```
Elapsed time is 5.713080 seconds.
Elapsed time is 7.003739 seconds. 
```

为了`n = 10000`

```
Elapsed time is 15.283524 seconds.
Elapsed time is 18.009520 seconds. 
```

所以它确实更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T10:57:20.810

考虑一个大小为 [1000, 50] 的矩阵 X，我们希望与一个大小为 [50] 的向量 v 进行卷积。现在代替缓慢的：

```
 Y=zeros(size(X))
 for i=1:1000
      Y(i,:)=conv(X,v,'same')
 end 
```

一个人可以这样做：

```
 V=convmtx(v, 50);
 Y=X*V
 Y=Y(:,1:50) 
```

如果您对“完整”卷积而不是“相同”感兴趣，请删除最后一行。

# c++ - GTKMM 错误：不应忽略无效值

> ID：15693836
> 
> 赞同：0
> 
> 时间：2013-03-28T23:18:26.947
> 
> 标签：c++, gtk, gtkmm

我正在尝试在 GTKMM 中创建一个包含一个框的简单窗口。我已经让窗口部分工作了，但我无法让我的盒子代码工作。我正在关注[本教程](https://developer.gnome.org/gnome-devel-demos/unstable/image-viewer.cpp.html.en)

我认为本教程有点过时了，因为 Anjuta（我正在使用的 IDE）生成了一些不同的代码。这是我应该添加一个框的代码：

```
 #include <gtkmm.h>
#include <iostream>
#include "config.h"
 using namespace Gtk;

  int main (int argc, char *argv[])
  {
Gtk::Main kit(argc, argv);

Gtk::Window *main_win = new Gtk::Window (Gtk::WINDOW_TOPLEVEL);
main_win->set_title ("Image-Viewer");

Gtk::Box *box = Gtk::manage (new Gtk::Box());
box ->set_orientation (ORIENTATION_VERTICAL);
box->set_spacing(6);
*main_win -> add(*box);

if (main_win)
{
    kit.run(*main_win);
}
return 0;
 } 
```

在本教程的代码中，窗口的创建方式不同。正如您在下面看到的，我的代码中的窗口正在创建，因此它位于堆中，而不是堆栈中。（或者至少我认为[我是 C++ 新手]）。我知道堆中的项目应该像指针一样使用，所以对于 add 函数，我这样做了（而不是使用教程中描述的点符号）。当我运行此代码时，我收到一条错误消息，说明如下：

```
error:void value not ignored as it out to be 
```

该错误与在窗口上调用的 add 方法有关。有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:29:44.347

该指令：

```
Gtk::Window *main_win = new Gtk::Window (Gtk::WINDOW_TOPLEVEL); 
```

声明指向 的指针`Gtk::Window`。稍后，您执行以下操作：

```
*main_win -> add(*box); 
```

`operator ->`这是不正确的，因为您基本上是在取消引用指针之后尝试应用`main_win`- 这种取消引用的结果*不是*指针本身，而是对 type 对象的引用`Gtk::Window`。

要解决此问题，请删除额外的取消引用：

```
main_win -> add(*box); 
```

**笔记：**

我不知道`Gtk::Window`它的成员函数`add()`，但如果是`add()`接受*指针*作为其参数的情况，那么你也不应该取消引用`box`。

# java - 如何创建一个包含 jedit 源代码的 netbeans 7.3 项目？

> ID：15693837
> 
> 赞同：0
> 
> 时间：2013-03-28T23:18:27.743
> 
> 标签：java, netbeans, java-6, jedit

[我认为这是一个简单的问题，因为这里](http://wiki.netbeans.org/NetbeansedJEdit#Appendix)已经有一个关于此的 wiki 主题，尤其是[本节。](http://wiki.netbeans.org/NetbeansedJEdit#CreatingTheJEditNetBeansProject)但是 wiki 已经过时了。Stackoverflow 上存在一个先前的问题，该问题仅引用了这些现已过时的 wiki 主题。netbeans wiki 必须适用于某些较旧版本的 NetBeans UI，而我使用的是 NetBeans 7.3。

如果我尝试使用 7.3 中的现有源选项，它假定您已经无法拥有 build.xml，因此它告诉您无法继续：

![在此处输入图像描述](../Images/fa1e631ca84d7a0a319a013f2efa71b9.png)

出于说明目的，它可能有助于显示 jedit 源代码文件夹的某些结构。我有最新的 jEdit 源代码和 5.0 稳定的源代码。项目布局大致是这样的：

```
 + jedit
        |
        +- org
        |
        +- net
        |
        +- test
        |
        +- de
        |
        .... 
```

我找到了根 build.xml 所在的文件夹，但我无法按照 wiki 说明进行操作，因为似乎不再有这样的 project-with-existing-ant-build-script 选项。

**现在我们尝试自由形式选项......它也不起作用......**

到目前为止，自由格式项目的工作原理是它允许您创建一个 netbeans 项目，但是对目录的扫描会导致 netbeans 内部一团糟。一系列带有路径“。”的文件夹。添加了 5 个重复的“。” 文件夹，以及项目树视图中的 5 个重复的“源包”条目。这可能与自由格式的第二个问题有关，即它不会构建和运行 jEdit，但会因我尝试在 netbeans 外部构建时不会发生的奇怪错误消息而死：

项目窗格中的混乱使我无法导航或查看源结构：

![在此处输入图像描述](../Images/81584c8a31bf0dcd0532cb2eda9ffca2.png)

它没有建立：

```
Processing /Users/admin/NetBeansProjects/jedit/trunk/build/test/merged-reports/TESTS-TestSuites.xml to /var/folders/59/mc8gzxfn1b98j389rkz4zjsc0000gs/T/null666107982
Loading stylesheet jar:file:/Applications/NetBeans/NetBeans%207.3.app/Contents/Resources/NetBeans/java/ant/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl
: Error! The first argument to the non-static Java function 'replace' is not a valid object reference.
: Error! Cannot convert data-type 'void' to 'reference'.
: Fatal Error! Could not compile stylesheet
Failed to process /Users/admin/NetBeansProjects/jedit/trunk/build/test/merged-reports/TESTS-TestSuites.xml
/Users/admin/NetBeansProjects/jedit/trunk/build.xml:442: Errors while applying transformations: Fatal error during transformation
BUILD FAILED (total time: 35 seconds) 
```

所以我放弃了自由形式的项目，因为它无法构建。

**现在在删除 build 文件夹和 build.xml 后打开一个具有现有源的项目，这也不起作用......**

如果我想导入项目源代码（只是 java，没有 build.xml，因为我删除了它），我会卡在这里：

![在此处输入图像描述](../Images/d666c3416466452c987f0fc7f3f19a8b.png)

我试图做什么？我尝试将源文件夹添加为`org`,`de`和下的目录`net`（请参阅我在上面的问题中放置的源代码树）。但是 netbeans 会自动向上遍历到我的源代码的 ROOT 文件夹。

**我无法选择除根目录以外的任何文件夹，因为选择它下面的文件夹会导致 Netbeans 无济于事地总是向上移动文件夹层次结构，直到它到达它想要的位置。不会说有什么不同。**

这反过来又导致 netbeans 抱怨它决定对我做的事情，即它不能包含`jedit/test`，因为它`jedit`用作根源文件夹。我选择的任何内容（但是 jedit/ 下面的许多文件夹）都不会导致 netbeans 做任何不同的事情。它坚持遍历子目录以提供帮助。我开始认为 java 的真实世界用户可能会以 netbeans 无法处理的方式组织他们的源代码。

**其他信息**

*   只要您拥有现代版本的 ant，从 shell 构建并使用`ant`jedit的源代码就可以正常运行。`build.xml`重新安装 ant 修复了我的命令行构建能力。

*   我发现我必须`ant`先从 apache 网站安装最新版本，然后我的 Mac OS X 机器才能在命令行中构建 jEdit 5.0。我的 netbeans 应用程序包中的`ant`版本可能不同。

*   我正在使用 OS X 10.8 并安装了 Java 1.5、1.6 和 1.7，目前针对 Java 1.6 构建。

*   在我看来，Netbeans 以沉着和优雅的方式打开 Maven 项目，这反过来又是由于 Maven 项目通常遵循标准的 java 目录布局。基于 Ant 的构建似乎也可以很好地导入，以至于 Netbeans 可以理解命名和布局标准，但 jEdit 似乎是 Netbeans 无法以当前形式干净处理的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:59:00.420

下面的 URL 包含在 NetBeans 7.3 中设置和编译 jEdit 5.0.0 源代码的说明。

[http://www.areaofthoughts.com/2013/01/compiling-running-jedit-5-in-netbeans-73.html](http://www.areaofthoughts.com/2013/01/compiling-running-jedit-5-in-netbeans-73.html)

概括：

*   `jsr305-2.0.1.jar`必须下载依赖项并将其手动添加到 netbeans 库选项卡，否则`javax.annotation.Nonnull`将`javax.annotation.Nullable`无法解析。

*   将 jedit 源代码解压缩到将成为 netbeans 项目的文件夹下的 1 级子目录是**必不可少**的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:48:47.477

屏幕截图表明`/Users/admin/NetBeansProject/jedit/trunk`已经包含一个`build.xml`文件。您应该尝试在 NetBeans 中创建“自由格式项目”，而不是“使用现有源的新 Java 项目”。

如果您不想重复使用现有`build.xml`文件，可以将源文件复制到新目录。特别是，您应该将它们放在`src`NetBeans 项目的其他空目录的子目录中。然后，您可以创建一个“具有现有源的新 Java 项目”。您不需要创建自己的 Ant 构建文件，除非您需要添加自定义任务或自定义 NetBeans 生成的默认任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:23:26.807

我无法评论使用 Netbeans for Java，因为我只用它编写 PHP。但是当使用现有 PHP 源加载项目时，我可以将项目配置文件保存在项目中或其他位置（有时我会将项目配置保存到我的 windows 配置文件中，因为源位于我的 linux web 上的 samba 共享中服务器）

# types - OCaml 中的依赖类型

> ID：15693838
> 
> 赞同：13
> 
> 时间：2013-03-28T23:18:27.953
> 
> 标签：types, ocaml

在 Haskell 和 Scala 中有很多关于依赖类型的信息。对于 OCaml，没有那么多。是否有足够熟练的人提供有关如何在 OCaml 中实现此目标的编码示例（如果可能的话）？当然有（被放弃的）[Dependent ML](http://www.cs.bu.edu/~hwxi/DML/DML.html)，但似乎不可能将这些东西合并到“常规”OCaml 代码中。

基本上，我想做的是删除类似的代码`assert(n > 0)`并在编译时检查它。

**编辑**

作为旁注，值得一提的是 OCaml[混合合同检查](http://gallium.inria.fr/~naxu/research/hcc.html)分支，它可以满足依赖类型系统的一些需求。`assert(n > 0)`然后你会写一份合同，而不是你：

```
contract f = {x : x > 0} -> int
let f x = x + 1
let dummy_variable = f (-1) (* Won't compile *) 
```

**编辑 2**：对于阅读本文的任何人，我认为 F* 是一种有趣的类似 ML 的语言，具有依赖类型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T05:50:45.323

参考链接是 Oleg 的[轻量级静态保证](https://okmij.org/ftp/Computation/lightweight-static-guarantees.html)页面，其中包含 ML 语言中使用的类依赖技术的示例（在 OCaml 中或您可以翻译为 OCaml）。他在 2007 年与 Chung- [jieh Shan 合作的关于轻量级静态能力 (PDF)的论文尤其具有相关性。](https://homes.luddy.indiana.edu/ccshan/capability/lightweight-static-capabilities.pdf)

编辑：自 4.00 版（在编写上述文档后发布）以来，OCaml 具有 GADT，它允许简化一些技术以优化静态信息（以前依赖于幻像类型技术），特别是[Omega](http://code.google.com/p/omega/)中演示的“单例类型”模式. 已经表明，它们对于获得强大的类型化编程并不是必不可少的，但它们仍可能被广泛使用的各种示例所使用。

# database - 在 PostgreSQL 中选择所有超过 24 小时的行

> ID：15693842
> 
> 赞同：0
> 
> 时间：2013-03-28T23:18:35.327
> 
> 标签：database, postgresql, date, subquery

我正在开发一个原型数据库来存储航班预订，我需要能够选择预订日期早于 24 小时且状态为“H”的所有行。到目前为止，我有这个：

```
SELECT * FROM FlightBooking WHERE ((extract (epoch from (NOW() - (SELECT BookingTime FROM FlightBooking))))/3600) > 24 AND Status = 'H'; 
```

但是当有不止一行满足条件时，这会失败并出现错误“子查询返回的不止一行用作表达式”。

我知道它*为什么*会失败，但我想不出解决方法？

另外，是的，我知道大多数 DBMS 具有使这种比较更容易的功能，但据我所知，postgres 没有。

# c - 有人可以向我解释给定代码中发生了什么吗？

> ID：15693844
> 
> 赞同：3
> 
> 时间：2013-03-28T23:18:46.593
> 
> 标签：c, io, printf

```
 #include<stdio.h>
    int main()
    {
        char s[]="chomsky the great";
        printf("try0 %s\n",s+s[3]-s[9]);    
        printf("try1 %s\n",s+s[3]-s[1]);
        return 0;
    } 
```

gcc 编译器中的 o/p 是

> ```
>  try0 ky the great
>         try1 ky the great 
> ```

我无法跟踪程序在这里实际在做什么，或者更确切地说是编译器是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:23:42.250

```
s+s[3]-s[9] = s + *(s+3) - *(s+9) = s + 'm'- 'h' = s + 109 - 104 =  s + 5 = s[5] 
```

所以 printf 从 s[5] 开始打印

printf 打印的示例：

```
printf("%s",s) = chomsky the great

printf("%s",s[0]) = chomsky the great

printf("%s",s[2]) = omsky the great

printf("%s",s[5]) = ky the great 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T23:23:05.237

`s[3]`是`m`。 `s[9]`并且`s[1]`都是`h`。 `m`-`h`是 5\. `s[5]`是`k`在`chomsky`. `s + s[3] - s[9]`是从in`s + 5`开始的字符串。 `k``chmosky`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T23:32:02.460

C 中的`char`类型也可以视为整数类型。

`s`是指向字符串中第一个字符的指针。 `s[3]-s[9]`减去第 3 位字符和第 9 位字符的[ASCII](http://en.wikipedia.org/wiki/ASCII)码并返回一些数字。

稍后，该数字被添加到指向字符串 ( `s+s[3]-s[9]`) 中第一个字符的指针，并导致地址位于字符串开头之后的 5 个位置上。

当您将该地址传递给`printf()`函数时，它会从该地址打印字符串到字符串的末尾。

# ruby - 如何在 Rails 应用程序中以随机顺序显示来自两个循环的数据？

> ID：15693847
> 
> 赞同：1
> 
> 时间：2013-03-28T23:18:59.917
> 
> 标签：ruby, ruby-on-rails-3, twitter-bootstrap

这是我的代码：

```
 <!-- Start of type 1 -->
<%@results.map do |p| %> 
    <li>
        <%= data1.p.url%>

    </li>
<%end%>
<!-- End of type 1 -->

<!-- Start of type 2 -->

<%@results.map do |p| %> 
    <li>
        <%= data2.p.url%>

    </li>
<%end%>
<!-- End of type 2 --> 
```

现在，它的显示方式是`data1 url`先到后`data2 url`。我想要做的是交替或随机显示`data1 url`，`data2 url`反之亦然。

* * *

更新：

我希望在单个页面请求上随机显示`<%= data1.p.url%>`顺序。`<%= data2.p.url%>`话虽如此，如果用户加载页面，则两个数据的顺序都是随机显示的，无需多次引用即可一次查看一个数据（1 或 2）。

* * *

更新2：

如果两个循环不同，您将如何订购？

```
<!-- Start of type 1 -->
<%@resultsOne.map do |p| %> 
    <li>
        <%= data1.p.url%>

    </li>
<%end%>
<!-- End of type 1 -->

<!-- Start of type 2 -->
<%@resultsTwo.map do |p| %> 
    <li>
        <%= data2.p.url%>

    </li>
<%end%>
<!-- End of type 2 --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T00:25:24.997

你需要这样的东西吗？

```
<%@results.map do |p| %> 
    <li>
        <%= rand(2) == 0 ? data1.p.url : data2.p.url %>
    </li>
<%end%> 
```

# algorithm - 数独游戏中不产生唯一解的最大线索数

> ID：15693852
> 
> 赞同：3
> 
> 时间：2013-03-28T23:19:11.733
> 
> 标签：algorithm, language-agnostic, logic, sudoku

您可能听说过，去年证明了保证唯一解的数独游戏的最小起始线索数是 17。
示例如下所示。

![](../Images/b8701ae819b56e2e414fabdd9f2c0470.png)

我对相反的问题感兴趣：
对于*不*保证唯一解的数独游戏，*最大*的起始线索数是多少？

 *我的下限是 63。这是如果您采用已解决的数独并删除两个数字的每个实例（即删除所有 1 和 2）。或者，您可以删除前两行，再次为 63 个起始线索产生两种不同的解决方案。
你能比63做得更好，还是63是最高的？*

# c# - 在不使用 Visual Studio 的情况下创建 Wix Bootstrapper

> ID：15693855
> 
> 赞同：2
> 
> 时间：2013-03-28T23:19:44.593
> 
> 标签：c#, wix, sharpdevelop, burn

我正在开发一个 C# 应用程序，该应用程序当前有一个简单的 WiX 安装程序来生成 MSI 文件。此应用程序需要必备软件（例如 .NET Framework 4），我想构建一个 WiX Bootstrapper，它将在安装我的 MSI 文件之前安装 prereqs。我知道 Visual Studio 有一个 Bootstrapper 项目模板，它能够创建一个 WiX 引导程序可执行文件，但是我正在使用 SharpDevelop 4.3 进行开发。

我想知道是否有一种方法可以在不使用 Visual Studio 的情况下创建刻录包并将其编译为引导程序可执行文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:43:57.153

要创建基于 Burn 的引导程序/链接程序包，您只需要 WiX v3.6+。`Bundle`.wxs 文件中的元素是开始的地方。就像`Product`.wxs 文件中的元素是启动 .msi 文件的地方一样。

Visual Studio 有一个引导程序系统，但它与`Burn`.

# python - 为什么使用 Python 子进程调用 ssh 会破坏外部 bash 循环

> ID：15693859
> 
> 赞同：1
> 
> 时间：2013-03-28T23:20:26.987
> 
> 标签：python, bash, ssh, subprocess

我有一个 bash 脚本`myscript.sh`：

```
#!/bin/bash
while read line; do
    myprog.py
done 
```

调用python程序`myprog.py`

```
#!/usr/bin/env python
import subprocess
output = subprocess.check_output(['ssh', 'user@host', 'cmd']) 
```

子进程调用的ssh命令执行无误，输出正确。但是当像这样调用时，循环`myscript.sh`只运行输入的第一行，然后以状态 0 退出。如果我`subprocess.check_output(...)`用 a 替换调用`subprocess.Popen(...)`并且*不*随后调用`Popen.wait()`，那么外部循环按预期工作，`ssh`命令的输出是在 bash 脚本的任何输出之后的一段时间内转储到标准输出。with 的`Popen.wait()`行为与 with 相同`check_output`：bash 循环在退出之前只经过一次迭代而不会出错。

如果不是调用`ssh`另一个命令，例如`ls`，`check_output`则 bash 循环按预期工作。

谁能帮我理解为什么显示的代码没有按预期工作？

注意：这是我正在尝试做的简化版本，尽管我确实遇到了与此代码相同的行为。实际上，我在 bash 脚本中使用“$line”做一些事情，并且子进程调用包含在`try`/`except`块中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:30:20.317

正如@larsmans 猜测的那样，该`ssh`调用正在消耗标准输入，从而打破了外部 bash 循环。将`-n`选项添加到`ssh`命令解决了该问题：

```
output = subprocess.check_output(['ssh', '-n', 'user@host', 'cmd']) 
```

# ios - Segue中的继承

> ID：15693862
> 
> 赞同：0
> 
> 时间：2013-03-28T23:20:31.707
> 
> 标签：ios, xcode, class, inheritance, segue

我有 4 个视图控制器。A、B、C、D，它们之间有 Segues A- 显示可供选择的级别 (1-4) B- 级别 1 问题 1（视图控制器循环，直到 Plist 中的所有问题都已显示） C- 如果用户得到问题 1 错误执行不正确的 Segue 使用

```
[performSegueWithIdentifier:@"wrongAnswer"sender:nil]; 
```

D-如果关卡完成（所有问题都已显示并正确回答）执行segue

```
[performSegueWithIdentifier:@"wrongAnswer"sender:nil]; 
```

VC 有自己的类-级别 B-有自己的类-Level1Addition 类 C-Level1Addition 类的子类，因为 B 正在将数据传递给 C。当所有问题都已显示时执行 D。当所有问题都显示出来后，我想回到 View Controller A 并选择下一个级别。我似乎在继承方面遇到了问题。D 应该从哪个类派生，或者我应该为 D 创建一个全新的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:15:32.107

在执行 segue 检查条件时使用以下方法

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"identifierName"]) {
        //data to pass to next VC or other before performing segue
        secondVC = [segue destinationViewController];

    }
} 
```

# oracle - 获取 ORA-00979: 不是 GROUP BY 表达式错误

> ID：15693863
> 
> 赞同：-2
> 
> 时间：2013-03-28T23:20:34.743
> 
> 标签：oracle, ora-00979

当我尝试在 Oracle 上执行此代码时，我不断收到错误

```
SELECT id,
       Max(id),
       artist AS"Artist"
FROM   d_songs
WHERE  duration IN( '3 min', '6 min', '10 min' )
HAVING id < 50
GROUP  BY id; 
```

我究竟做错了什么？这是说这不是按表达式分组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:23:57.347

**编辑：**

编辑后，请从文档中查看：

> 您试图执行包含 GROUP BY 函数（例如 MIN、MAX、SUM 或 COUNT）的 SELECT 语句。您试图在 SELECT 列表中执行一个不在 GROUP BY 子句中的表达式。

放在`Group By`前面`Having`，并且还包括 Group By 子句中的所有字段（不是最大值）

```
SELECT id, max(id), artist as "Artist"
From d_songs
Where duration in('3 min', '6 min', '10 min')
where id < 50
Group by id, artist 
```

您可以查看[文档](http://psoug.org/reference/group_by.html)以获取更多信息

# image - 点击播放动画 gif，然后执行 Symfony 操作

> ID：15693865
> 
> 赞同：0
> 
> 时间：2013-03-28T23:20:46.317
> 
> 标签：image, symfony-1.4, animated-gif

我有一个显示人们图片的页面。我在每张图片上都有一个动画 gif，这样当人们点击它时，它会播放一个透明的短动画，这样看起来就好像这个人被打了耳光。这是我的代码行：

```
 <img class="slap_animation" src="/images/slap-in-the-face-still.gif" alt="" onclick='this.src="/images/slap-in-the-face.gif"' /> 
```

它工作得很好，但我想用它做更多的事情。我想这样当人们点击它时，动画就会播放，并且在最后一帧上，它会执行一个 symfony 操作来将 +1 添加到“slapcount”字段。最简单的方法是什么？动画只有大约 2 秒长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T22:12:27.357

您可以制作一个计时器，每 2 秒为您的“slapcount”增加 +1。当动画运行时启用计时器，当它不禁用时。

# xml - 为给定的 XML 编写 XSL 文档，不知道如何处理属性

> ID：15693866
> 
> 赞同：0
> 
> 时间：2013-03-28T23:20:46.803
> 
> 标签：xml, xslt

我是 XML 和 XSLT 的新手。我一直在尝试编写 XSL。但无法弄清楚如何在我的 xsl 中处理 xml 文档中的属性。

这是我的示例 xml。

```
 <Books>
  <Book Cover="Paper back">
<Isbn>AS-1-4652-05128-2</Isbn>
<Title>Advanced Computing Theory</Title>
<Author>
  <Name>
    <First>John</First>
    <Last>Grisham</Last>
  </Name>
  <Contact Office="str1234">
    <Phone>782-999-1212</Phone>
  </Contact>
</Author>
<Publisher>Kendall Hunt</Publisher>
<Year Edition="2">
  <Year>1980</Year>
</Year> 
```

这是我的 XSL 文档：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    version="1.0">
    <xsl:template match="/">
        <html> <body>
            <h1>Books</h1>
            <table border="1">
                <tr bgcolor="yellow">
                        <td><b>ISBN </b></td>
                        <td><b>Title</b></td>
                        <td><b>Author</b></td>
                        <td><b>Publisher</b></td>
                        <td><b>Year and Edition</b></td>
                </tr>
    <xsl:for-each select="Books/Book">
            <xsl:sort select="Title" />
            <tr style="font-size: 10pt; font-family: verdana">
                <td><xsl:value-of select="Isbn"/></td>
                <td><xsl:value-of select="Title"/></td>
                <xsl:for-each select="Author">
                <td><xsl:value-of select="First"/>&nbsp;<xsl:value-of select="Last"/> &nbsp;<xsl:value-of select="Phone"/> &nbsp; <xsl:value-of select="@Office"/> </td><!-- Problem here-->
                </xsl:for-each>
                <td><xsl:value-of select="Publisher"/></td>
                <td><xsl:value-of select="Year"/>&nbsp;<xsl:value-of select="@Edition"/> </td>!-- Problem here-->
            </tr>
    </xsl:for-each>
                </table>
    </body> </html>
    </xsl:template>
</xsl:stylesheet> 
```

渲染的（相关）HTML如下：

```
 <tr style="font-size: 10pt; font-family: verdana">
            <td>AS-1-4652-05128-2</td>
            <td>Advanced Computing Theory</td>
            <td></td><!--Empty-->
            <td>Kendall Hunt</td>
            <td>
               1980
               <!--Empty, No edition!-->
            </td>
         </tr> 
```

我知道我错过了一个小细节，但不能完全弄清楚它是什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:29:26.167

```
<td><xsl:value-of select="First"/>&nbsp;<xsl:value-of select="Last"/> &nbsp;<xsl:value-of select="Phone"/> &nbsp; <xsl:value-of select="@Office"/> </td> 
```

`First`和`Last`在`Name`元素下，所以这些需要分别是`Name/First`和`Name/Last`。同样，`Phone`and`@Office`都在`Contact`so 应该是`Contact/Phone`and之下`Contact/@Office`。或者，如果同一作者可能有多个，`Contact`那么您可能需要考虑另一个`for-each`或模板。

你有一个类似的问题

```
<td><xsl:value-of select="Year"/>&nbsp;<xsl:value-of select="@Edition"/> </td> 
```

where`Edition`是 的一个属性`Year`，所以你需要`Year/@Edition`.

# php - 将 codeigniter 数据库结果对象转换为自定义对象

> ID：15693867
> 
> 赞同：0
> 
> 时间：2013-03-28T23:20:51.430
> 
> 标签：php, oop, codeigniter

Codeigniter 可以将数据库查询作为通用“对象”返回，例如：

```
$q = $this->db->get("some_table");
$obj = $this->q->row();
$var = $obj->some_property 
```

在我的例子中，我想创建一个 PHP 类，它的公共变量是 1 对 1 的数据库列，以及一些公共方法。是否有一种快速的一次性方法将通用“行”对象转换或转换为我的自定义类对象？我读过的帖子暗示这当然是可能的，但大多数都涉及一个非常老套的序列化/反序列化解决方案。过去我刚刚做过：

```
public function __construct($row) {
  $this->prop = $row->prop;
  $this->id = $row->id;
  $this->value = $row->value;
} 
```

而且我发现这很乏味，而且代码很丑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:31:24.843

请参阅下面的第三部分`result()`：

[CodeIgniter 用户指南：生成查询结果](http://ellislab.com/codeigniter/user-guide/database/results.html)

> 您还可以将字符串传递给 result() ，它表示要为每个结果对象实例化的类（注意：必须加载此类）

```
$query = $this->db->query("SELECT * FROM users;");

foreach ($query->result('User') as $row)
{
    echo $row->name; // call attributes
    echo $row->reverse_name(); // or methods defined on the 'User' class
} 
```

# unicode - 上标在 pdf 上由 itext 创建的图像上无法正确显示

> ID：15693870
> 
> 赞同：0
> 
> 时间：2013-03-28T23:21:10.207
> 
> 标签：unicode, awt, itext, jfreechart, graphics2d

我在我的 pdf 中生成的饼图中有一个关于 unicode 支持的非常令人困惑的问题。这是我所拥有的：我正在生成饼图（使用 jfreechart 库），需要在饼图的标题上添加上标。我测试了，我知道 jfreechart 正在生成正确的标题（上标很好），我还测试了 itext unicode 支持。中间有一个 Graphics2D（来自 java awt），将 jfreechart 转换为模板，然后我可以将此模板打印到我的 pdf 中。根据我的测试，我猜问题应该在 graphics2d 和 itext 模板之间。

`PdfContentByte canvas = writer.getDirectContent();`

`PdfTemplate template = canvas.createTemplate(width, height);`

`FontMapper mapper = new DefaultFontMapper();`

`template.setFontAndSize(mapper.awtToPdf(new java.awt.Font("Arial Unicode MS", java.awt.Font.PLAIN, 7)) , 7);`

`Graphics2D graphics2d = template.createGraphics(width, height);`

`graphics2d.setFont(new java.awt.Font("Arial Unicode MS", java.awt.Font.PLAIN, 7));`

`JFreeChart chart = getPieChart("", title, value);`

* * *

我发现了问题。问题是模板（PdfTemplate）不显示 unicode 字符。虽然我嵌入了 unicode 字体并将其设置为模板，但仍然无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:42:25.513

实际上最后我通过从饼图中删除上标并将其直接打印到模板中来解决问题。这也消除了 unicode 字体的使用（这需要额外的钱）：

`template.beginText();`

`template.setFontAndSize(arial, 8);`

`// the fixed position of the xy coordinate that I want to print superscript` `template.moveText(97, 142);`

`template.showText(superscript);`

`template.setTextRise(5f);`

`template.endText();`

# html - Rails 中的路由错误没有路由匹配 {:action=>"ticket_action", :controller=>"tickets"}

> ID：15693876
> 
> 赞同：0
> 
> 时间：2013-03-28T23:22:33.457
> 
> 标签：html, ruby, ruby-on-rails-3.2

这是一个错误，我似乎无法弄清楚我相信我已将其路由。这是错误

没有路线匹配 {:action=>"ticket_action", :controller=>"tickets"}

在这段代码之后我得到了这个错误

```
<h4>New Action</h4>
<% form_tag :action => 'ticket_action' do %>
<p><b>Description</b><br/>
    <%= text_area 'description', 'description', 'rows' => 5 %><br/>
    User: <%= select("actUser", "user_id", User.find(:all).collect{|u| [u.name, u.id] } )%>
    <% end %> 
```

我在我的 ticket_controller.rb 上有这个是正确的放置

```
#action
def ticket_action
  @act = Action.new(
        "ticket_id" => flash[:ticket_id],
        "description" => params[:description]['description'],
        "user_id" => params[:actUser]['user_id']
    )

routes
    actions GET    /actions(.:format)          actions#index
            POST   /actions(.:format)          actions#create
 new_action GET    /actions/new(.:format)      actions#new
edit_action GET    /actions/:id/edit(.:format) actions#edit
     action GET    /actions/:id(.:format)      actions#show
            PUT    /actions/:id(.:format)      actions#update
            DELETE /actions/:id(.:format)      actions#destroy
    tickets GET    /tickets(.:format)          tickets#index
            POST   /tickets(.:format)          tickets#create
 new_ticket GET    /tickets/new(.:format)      tickets#new
edit_ticket GET    /tickets/:id/edit(.:format) tickets#edit
     ticket GET    /tickets/:id(.:format)      tickets#show
            PUT    /tickets/:id(.:format)      tickets#update
            DELETE /tickets/:id(.:format)      tickets#destroy
      users GET    /users(.:format)            users#index
            POST   /users(.:format)            users#create
   new_user GET    /users/new(.:format)        users#new
  edit_user GET    /users/:id/edit(.:format)   users#edit
       user GET    /users/:id(.:format)        users#show
            PUT    /users/:id(.:format)        users#update
            DELETE /users/:id(.:format)        users#destroy
    clients GET    /clients(.:format)          clients#index
            POST   /clients(.:format)          clients#create
 new_client GET    /clients/new(.:format)      clients#new
edit_client GET    /clients/:id/edit(.:format) clients#edit
     client GET    /clients/:id(.:format)      clients#show
            PUT    /clients/:id(.:format)      clients#update
            DELETE /clients/:id(.:format)      clients#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:32:30.403

发布路线以调试此问题会很有帮助，您的路线可能指的是门票，但您的课程是门票。您应该研究宁静的路线，特别是考虑到您的用例。看来你真的应该有一个动作控制器（ActionsController，命名为 controllers/actions_controller.rb），然后发布到创建动作并提供一个安静的路线（资源：动作）我的建议是首先阅读休息和轨道。

此外，flash 不是您应该存储ticket_id 的地方，理想情况下，您应该通过发布到 /action/ticket_action/1 并通过访问控制器中的 params[:id] 来检索 id 在您的操作控制器的创建操作中检索它。如果你真的必须，将它存储在会话中 (session[:ticket_id] = "1") 但“休息”是你应该去的地方。闪光灯将被移除，只能在控制器中设置，然后显示在下一页，之后将被删除。

更新：好的，感谢您发布您的路线。

如果需要，您可以像这样添加缺少的路线：

```
resources :tickets do
  member do
    post 'ticket_action'
  end
end 
```

但最好遵循这种模式：

在动作控制器中：

```
def new
  @action = Action.new
end 
```

你的表单应该有点像这样，Rails 会知道要发布到 actions#create 因为 @action 是一个新记录（如果你愿意，你可以检查 @action.new_record?）

```
<%= form_for @action do |f| %>
  <%= f.text_area :description, :rows => 5 %>
  <%= f.hidden_field :ticket_id, flash[:ticket_id] %>
  <%= f.select :user_id, User.find(:all).collect{|u| [u.name, u.id] } %>
  <%= f.submit "Create" %>
<% end %> 
```

然后在你的动作控制器中：

```
def create
  @action = Action.new(params[:action])
end 
```

或者用更少的魔法：

```
def create
  @action = Action.new(:user_id => params[:action][:user_id],
                    :description => params[:action][:description],
                    :ticket_id => params[:action][:ticket_id])
  if @action.save
    redirect_to actions_path(@action, :notice => "Created action")
  else
   render :new # any errors will be in @action.errors
  end
end 
```

不过，您确实应该在操作控制器的新方法中设置 ticket_id。

```
def new
  @action = Action.new(:ticket_id => params[:ticket_id])
end 
```

然后以您的形式：

```
<%= f.hidden_field :ticket_id %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T00:50:59.407

你的文件名应该是“tickets_controller.rb”，复数。

# android - 为什么我在尝试使用 bouncycastle 加密时在 android 中得到 NoSuchAlgorithmException？

> ID：15693879
> 
> 赞同：1
> 
> 时间：2013-03-28T23:22:57.877
> 
> 标签：android, rsa, bouncycastle

*首先请注意，所有代码都已经在我的 linux 机器上测试过了。有相关的单元测试来确认。但是该代码不适用于android。*

我在我的项目中包含了我自己的**bouncycastle v1.48**库。我不确定**android是否****已经嵌入**了这个库，我希望这不会带来任何**冲突**（？）

我将其用作**公钥算法标签**，`RSA_GENERAL`这在创建这样的密钥时很有用：

```
new PGPSecretKey(
  PGPSignature.DEFAULT_CERTIFICATION,
  publicKeyAlgorithmTag,
  publicKey,
  privateKey,
  new Date,
  identity.toString,
  symmetricKeyAlgorithmTag,
  passPhrase,
  null,
  null,
  new SecureRandom(),
  BC_PROVIDER_NAME
); 
```

但是在创建密钥对时我没有使用这个标签，因为创建是从 java.security 发生的，而不是从 bouncycastle 发生的。这是相关代码的一部分（在 Scala 中）：

```
val generator = KeyPairGenerator.getInstance(PUBLIC_KEY_ALGORITHM_STRING, BC_PROVIDER_NAME);
generator.initialize(KEY_SIZE_IN_BITS, new SecureRandom());
generator.generateKeyPair(); 
```

您在上面看到的**公钥算法字符串**就是字符串**“RSA”**

*注意：我已经使用对称密钥算法遇到了 NoSuchAlgorithmException，但我通过从 CAST5 切换到 BLOWFISH 轻松克服了它。*

您对我可以从哪里开始寻找解决方案或问题是什么有什么建议？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:51:55.007

> 我在我的项目中包含了我自己的 bouncycastle v1.48 库。

这是行不通的。Android 有自己的精简版 Bouncy Castle（主要支持`javax.crypto`），Android 将使用它的库，而不是您的库。尝试改用[海绵城堡](http://rtyley.github.com/spongycastle/)。[这是图书馆作者写的关于海绵城堡的 StackOverflow 答案](https://stackoverflow.com/a/7112272/115145)。

如 spongycastle 文档中所述，您必须将所有导入从 更改`org.bouncycastle.*`为`org.spongycastle.*`。此外，任何需要提供提供者名称的地方，都需要将其从 更改`"BC"`为`"SC"`.

# python-3.3 - 什么是在 Python 3.3.0 中将文本转换为字符串的方法

> ID：15693880
> 
> 赞同：0
> 
> 时间：2013-03-28T23:22:59.737
> 
> 标签：python-3.3

嗨，所以我很难从 Python 上的程序中获取文本以转换为字符串，这样我就可以将其写入文件，而无需在文件中写入数字。我把这段代码：

```
from tkinter import *

a = Tk()
a.title("i need help")
a.geometry("600x600")

entryText = StringVar(None)

codeEdit = Text(a)
codeEdit.insert(END, "")
codeEdit.pack(side='top')

text = str(codeEdit)

def setLoc():
    saveFile = open("DATA\Test.txt", "w")
    saveFile.write(text)
    saveFile.close()

    return 

writeButton = Button(text="Write",command=setLoc)
writeButton.pack(side='bottom') 
```

所以这就是将 obj locFile 写入文件 Test.txt 的代码，但是当我在程序的文本框中键入内容并点击 writButton 时，它会写入文件，而不是我在其中输入的内容 .50132192 所以我想要知道如何将其转换为字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:24:23.417

您需要使用`Text`小部件的`get`方法将所有文本从`'1.0'`(line 1, character 0) 获取到`END`.

这是在`write_text`函数中执行此操作的代码的修改版本。我还添加了滚动条并切换到使用`grid`而不是包。

```
from tkinter import *
from tkinter import ttk

def write_text():
    text = edit.get('1.0', END)
    with open("DATA/Test.txt", "w") as f:
        f.write(text)

root = Tk()
root.title("This May Help")
root.geometry("600x600")

edit = Text(root, width=80, height=25, wrap=NONE)
edit.insert('1.0', '[enter text]')
edit.grid(column=0, row=0, sticky=(N,W,E,S))

yscroll = ttk.Scrollbar(root, orient=VERTICAL, command=edit.yview)
yscroll.grid(column=1, row=0, sticky=(N,S))
edit['yscrollcommand'] = yscroll.set

xscroll = ttk.Scrollbar(root, orient=HORIZONTAL, command=edit.xview)
xscroll.grid(column=0, row=1, sticky=(W,E))
edit['xscrollcommand'] = xscroll.set

write_button = Button(text="Write", command=write_text)
write_button.grid(column=0, row=2) 
```

# java - 如何访问正在运行的 jar 上方的文件夹

> ID：15693883
> 
> 赞同：0
> 
> 时间：2013-03-28T23:23:05.437
> 
> 标签：java, image, file, cross-platform, relative-path

背景：我在 Windows 上`main.jar`的位置调用了一个正在运行的 .jar。`C:\Program Files\folder\files\bin\main.jar`我在同一位置也有一个名为`p.properties`. 同时，我在 .png 文件中有一个 .png 文件`C:\Program Files\folder\files\graphic\img.png`。

我的问题：与访问 img.png 文件相比，我如何从 .jar 访问 p.properties 文件。我相信我可以`new File("p.properties");`从 .jar 中使用，但我将如何访问 img 文件？它在不同的文件夹中，我已经尝试过`new File("graphic/img.png");`，但没有奏效。我该怎么做？我访问属性文件是否正确？提前致谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:30:55.970

在相对路径中，`..` 指的是父目录。例如，

```
new File("../graphic/img.png"); 
```

顺便说一句，这些路径是相对于程序当前工作目录的，它可能不是你的 .jar 文件所在的路径。要查找 jar 所在的路径，您可以使用：

```
File jarFilePath = getClass().getProtectionDomain()
                             .getCodeSource().getLocation().getPath() 
```

# pointers - CUDA 是否支持指针混叠？

> ID：15693884
> 
> 赞同：1
> 
> 时间：2013-03-28T23:23:11.783
> 
> 标签：pointers, cuda, nvidia, pointer-aliasing

我问这个的原因是因为我的代码中有一些奇怪的错误，我怀疑这可能是一些别名问题：

```
__shared__ float x[32];
__shared__ unsigned int xsum[32];

int idx=threadIdx.x;
unsigned char * xchar=(unsigned char *)x;
//...do something
 if (threadIdx.x<32)
 {
    xchar[4*idx]&=somestring[0];
    xchar[4*idx+1]&=somestring[1];
    xchar[4*idx+2]&=somestring[2];
    xchar[4*idx+3]&=somestring[3];

    xsum[idx]+=*((unsigned int *)(x+idx));//<-Looks like the compiler sometimes fail to recongize this as the aliasing of xchar;
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:18:23.700

The compiler only needs to honour aliasing between compatible types. Since `char` and `float` are not compatible, the compiler is free to assume the pointers never alias.

If you want to do bitwise operations on float, firstly convert (via `__float_as_int()`) to unsigned integer, then operate on that, and finally convert back to float (using `__int_as_float()`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T00:56:51.523

我认为您在这里有比赛条件。但我不知道是什么`somestring`。如果所有线程都相同，则可以这样做：

```
__shared__ float x[32];

unsigned char * xchar=(unsigned char *)x;

//...do something

if(threadIdx.x<4) {
     xchar[threadIdx.x]&=somestring[threadIdx.x];
}

__syncthreads();

unsigned int xsum+=*((unsigned int *)x); 
```

这意味着每个线程共享相同的数组，因此所有线程之间的 xsum 相同。如果您希望每个线程都有自己的数组，则必须分配一个数组`32*number_of_threads_in_block`并使用偏移量。

PS：上面的代码只适用于一维块。在 2D 或 3D 中，您必须计算自己的线程 ID，并确保只有 4 个线程执行代码。

# functional-programming - 如果我在 OCaml 中使用列表创建图形数据结构/算法会有效吗？

> ID：15693888
> 
> 赞同：3
> 
> 时间：2013-03-28T23:23:35.707
> 
> 标签：functional-programming, ocaml

我现在开始写`graph`相关`data structure`的`algorithms`。`OCaml`

我愿意尝试在 OCaml 中以函数式的方式编写它们，即避免使用`array`、可变类型等。

但是，如果我使用 编写所有这些`list`，它会有效还是有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:35:04.997

您不需要对所有内容都使用列表。库中还有许多其他不可变的数据结构，或者您可以定义自己的。您可以将图视为从节点到后继列表的映射。我已经使用这种表示在 OCaml 中编写了大量的图形处理代码，而且我总是对结果非常满意。

**更新**

这是我正在谈论的表示的草图。它假设您使用 uniqe 字符串标记您的节点。请注意（正如 monniaux 评论的那样）使用后继列表可能更适合稀疏图而不是密集图。

```
type label = string
module GMap = Map.Make(struct type t = label let compare = compare end)
type 'a node = label * 'a * label list
type 'a graph = 'a node GMap.t

let empty = GMap.empty

let add (label: label) (contents: 'a) successors (graph: 'a graph) : 'a graph =
    GMap.add label (label, contents, successors) graph 
```

制作一个只包含长度为 2 的循环的图：

```
# let g = add "a" () ["b"] (add "b" () ["a"] empty);;
val g : unit graph = <abstr> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T06:14:14.117

这一切都取决于您希望实现的算法类型以及您是否希望考虑稀疏图或密集图。密集图通常由矩阵表示（顺便说一句，矩阵可以保持不变并在功能上使用）。

如果您需要具有 O(1) 更新的数组（例如用于标记节点），您仍然可以通过使用将数组呈现为可更新结构的包装库以功能方式使用它们，每次都提供一个新数组。诀窍是通过将可变数组保持为“头”版本并将过去的版本保持为“头”的增量来实现这些更新。这将所有必要的问题都包含在一个模块中，至少在语义上，一个功能接口。

如果您有稀疏图，通常会谈论“邻接表”。我认为使用它们是一个坏主意，除非图形非常稀疏（绝对意义上的小度节点），因为它们具有 O(n) 访问权限。我认为二叉树`Set`更合适，因为它们允许在 O(log n) 中进行测试。

# php - HTML 列表框和 PHP

> ID：15693891
> 
> 赞同：1
> 
> 时间：2013-03-28T23:23:42.333
> 
> 标签：php, html

一般来说，我是 PHP、HTML 和 Web 开发的新手。

我试图让一个列表框从关联数组中读取条目，我设法做到了。The problem is that, I can't seem to access the correct value, when an option is selected. 无论选择哪个选项，它似乎总是产生相同的响应（“伦敦”）。我尝试用 ["listBox"] 替换 $city，但输出是 'selected="selected"'，$city 似乎更接近我想要的，所以我将其改回。

我花了很多时间试图找出原因，如果有人可以帮助我，我将不胜感激，在此先感谢您。

代码如下：

```
<!DOCTYPE html lang="en"/>`    
<html>
    <head>
        <title>Array Section: ex5.php</title>
    <charset = "utf-8">
    </head>
    <body>
        <?php
        // Create an associate array 
        $countriesWithCities = array(
            "Japan" => "Tokyo",
            "Mexico" => "Mexico City",
            "USA" => "New York City",
            "India" => "Mumbai",
            "South Korea" => "Seoul",
            "China" => "Shanghai",
            "Nigeria" => "Lagos",
            "Brazil" => "Sao Paulo",
            "Egypt" => "Cairo",
            "England" => "London"
        );
        ?>
        <form action="ex5b.php" method="POST" />
        <h1>Ex5b.php </h1>
        <h3>"listBox">Please choose a country from the list box. </h3>
        <select name="listBox" id="listBox" size="9" >
            <?php foreach ($countriesWithCities as $individualCountry => $city) { ?>
                <option value= <?php $city; ?> selected="selected">
                    <?php echo $individualCountry;
                    >
                } ?></option>
        </select>

        <input type="submit" name="submitButton" id="submitButton" value="Submit form" />
        <form>
            <?php
            if (isset($_POST["submitButton"])) {
                echo "You chose " . $city;
            }
            ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:31:35.787

您在 $city 之前缺少一个回声，在 $individualCountry 之后缺少一个额外的结束 >。同样，您`</option>`在 foreach 循环中的右大括号 (}) 之后也有结束标记。

```
<select name="listBox" id="listBox" size="9" > 
<?php 
    foreach($countriesWithCities as $individualCountry=>$city)
    {
?>
    <option value="<?php echo $city; ?>" selected="selected"> <?php echo $individualCountry; ?>
    </option> 
<?php } ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:37:32.077

正确的代码

```
<!DOCTYPE html lang="en">
<?php
$countriesWithCities = array(
   "Japan" => "Tokyo",
   "Mexico" => "Mexico City",
   "USA" => "New York City",
   "India" => "Mumbai",
   "South Korea" => "Seoul",
   "China" => "Shanghai",
   "Nigeria" => "Lagos",
   "Brazil" => "Sao Paulo",
   "Egypt" => "Cairo",
   "England" => "London"
);
?>
<form action="ex5b.php" method="POST">
<h1>Ex5b.php </h1>
<h3>Please choose a country from the list box. </h3>
<select name="city" id="listBox">
   <?php foreach($countriesWithCities as $individualCountry=>$city){?>
   <option value=<?php echo $city; ?>> <?php echo $individualCountry; ?></option>
   <?php } ?>
</select>
   <input type="submit" name="submitButton" id="submitButton" value="Submit form" />
</form>

<?php if(isset($_POST["submitButton"]))
{
   echo "You chose " . $_POST['city'];
}
?>
</body>
</html> 
```

**作出的更正**

1.  您可能从一本书（PDF？）中复制了这段代码，因此在 doctype 之后开始 PHP 标记以及数组名称丢失。
2.  表单缺少结束标记
3.  `<select>`缺少`name`属性
4.  您在 PHP 代码中寻找`$city`而不是`$_POST['city']`

在我从你的问题中复制代码或者我只是复制了不完整的代码之后发生了很多事情：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:38:39.183

```
<option value= <?php $city; ?> selected="selected"> 
```

改成

```
<option value= <?php echo $city; ?> selected="selected"> 
```

# entity-framework - 实体框架分离的 POCO 对象遇到困难

> ID：15693892
> 
> 赞同：3
> 
> 时间：2013-03-28T23:23:45.177
> 
> 标签：entity-framework

我想以分离的方式使用 EF DbContext/POCO 实体，即从我的业务层检索实体的层次结构，进行一些更改，然后将整个层次结构发送回业务层以持久化回数据库。每个 BLL 调用使用不同的 DbContext 实例。为了测试这一点，我编写了一些代码来模拟这样的环境。

首先我检索一个`Customer`加号相关的`Orders`和`OrderLines`：-

```
Customer customer;
using (var context = new TestContext())
{
    customer = context.Customers.Include("Orders.OrderLines").SingleOrDefault(o => o.Id == 1);
} 
```

接下来我添加一个新`Order`的两个`OrderLines`：-

```
var newOrder = new Order { OrderDate = DateTime.Now, OrderDescription = "Test" };
newOrder.OrderLines.Add(new OrderLine { ProductName = "foo", Order = newOrder, OrderId = newOrder.Id });
newOrder.OrderLines.Add(new OrderLine { ProductName = "bar", Order = newOrder, OrderId = newOrder.Id });
customer.Orders.Add(newOrder);
newOrder.Customer = customer;
newOrder.CustomerId = customer.Id; 
```

最后，我坚持更改（使用新上下文）：-

```
using (var context = new TestContext())
{
    context.Customers.Attach(customer);

    context.SaveChanges();
} 
```

我意识到最后一部分是不完整的，因为毫无疑问我需要在调用 SaveChanges() 之前更改新实体的状态。我要添加还是附加客户？我必须更改哪些实体状态？

在我进入这个阶段之前，运行上面的代码会抛出一个异常：

> ObjectStateManager 中已存在具有相同键的对象。

这似乎源于没有明确设置两个`OrderLine`实体的 ID，因此两者都默认为 0。我认为这样做很好，因为 EF 会自动处理事情。难道我做错了什么？

此外，以这种“分离”的方式工作，设置关系似乎需要做很多工作——我必须将新订单实体添加到`customer.Orders`集合中，设置新订单的`Customer`属性及其`CustomerId`属性。这是正确的方法还是有更简单的方法？

看看自我跟踪实体会更好吗？我在某处读到过它们已被弃用，或者至少不鼓励使用 POCO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T00:11:36.947

你基本上有2个选择：

A) 乐观。

您可以非常接近您现在的方式进行，只需将所有内容附加为已修改和希望。您正在寻找的代码而不是 .Attach() 是：

```
context.Entry(customer).State = EntityState.Modified; 
```

绝对不直观。这个看起来很奇怪的调用附加了已分离的（或您新构建的）对象，如已修改。资料来源：http: [//blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states。 aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)

如果您不确定对象是否已添加或修改，您可以使用最后一段的示例：

```
context.Entry(customer).State = customer.Id == 0 ?
                               EntityState.Added :
                               EntityState.Modified; 
```

您需要对所有正在添加/修改的对象执行这些操作，因此如果此对象很复杂并且有其他需要通过 FK 关系在 DB 中更新的对象，您还需要设置它们的 EntityState。

根据您的情况，您可以通过使用不同的 Context 变体使这些类型的无关写入更便宜：

```
public class MyDb : DbContext
{
    . . .
    public static MyDb CheapWrites()
    {
        var db = new MyDb();
        db.Configuration.AutoDetectChangesEnabled = false;
        db.Configuration.ValidateOnSaveEnabled = false;
        return db;
    }
}

using(var db = MyDb.CheapWrites())
{
    db.Entry(customer).State = customer.Id == 0 ?
        EntityState.Added :
        EntityState.Modified;
    db.SaveChanges();
} 
```

您基本上只是禁用了 EF 代表您进行的一些额外调用，而您无论如何都忽略了结果。

B) 悲观的。您实际上可以查询数据库以验证自上次获取数据以来数据没有更改/添加，然后在安全的情况下对其进行更新。

```
var existing = db.Customers.Find(customer.Id);
// Some logic here to decide whether updating is a good idea, like
// verifying selected values haven't changed, then

db.Entry(existing).CurrentValues.SetValues(customer); 
```

# c++ - 如何确定感兴趣区域，然后使用 OpenCV 裁剪图像

> ID：15693900
> 
> 赞同：1
> 
> 时间：2013-03-28T23:24:35.567
> 
> 标签：c++, python, opencv, image-processing, numpy

[我在这里](https://stackoverflow.com/questions/15690770/extracting-text-from-an-image-with-tesseract)问了一个类似的问题，但更多地集中在 tesseract 上。

我有一个示例图像，如下所示。我想将白色正方形设为我的感兴趣区域，然后裁剪掉该部分（正方形）并用它创建一个新图像。我将使用不同的图像，因此正方形不会在所有图像中始终位于同一位置。所以我需要以某种方式检测正方形的边缘。

![在此处输入图像描述](../Images/fb415081013a38338c8cb3308870f93c.png)

我可以执行哪些预处理方法来获得结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T07:30:56.040

使用您的测试图像，我能够**通过简单的[腐蚀](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=erode#erode)**操作消除所有噪音。

![](../Images/ece58a357b617da1a5b5b6bc5218dc42.png)

之后，**寻找角像素****的简单迭代是微不足道的，我在`Mat`**[这个答案](https://stackoverflow.com/a/10317919/176769)中谈到了这一点。出于测试目的，我们可以在这些点之间绘制*绿*线以显示原始图像中我们感兴趣的区域：

![](../Images/a7ad18d2e7b2b377fa03a119aa2ffb63.png)

最后，我**在原始图像中设置了 ROI 并裁剪**了该部分。

最终结果如下图所示：

![](../Images/d514912ae5db176e7520d929756d4b18.png)

我编写了一个示例代码，使用OpenCV的**C++ 接口**执行此任务。我对您将这段代码翻译成 Python 的技能充满信心。如果您做不到，请忘记代码并坚持我在此答案中分享的[路线图。](http://en.wikipedia.org/wiki/Technology_roadmap)

```
#include <cv.h>
#include <highgui.h>

int main(int argc, char* argv[])
{
    cv::Mat img = cv::imread(argv[1]);
    std::cout << "Original image size: " << img.size() << std::endl;

    // Convert RGB Mat to GRAY
    cv::Mat gray;
    cv::cvtColor(img, gray, CV_BGR2GRAY);
    std::cout << "Gray image size: " << gray.size() << std::endl;

    // Erode image to remove unwanted noises
    int erosion_size = 5;
    cv::Mat element = cv::getStructuringElement(cv::MORPH_CROSS,
                                       cv::Size(2 * erosion_size + 1, 2 * erosion_size + 1),
                                       cv::Point(erosion_size, erosion_size) );
    cv::erode(gray, gray, element);

    // Scan the image searching for points and store them in a vector
    std::vector<cv::Point> points;
    cv::Mat_<uchar>::iterator it = gray.begin<uchar>();
    cv::Mat_<uchar>::iterator end = gray.end<uchar>();
    for (; it != end; it++)
    {
        if (*it) 
            points.push_back(it.pos()); 
    }

    // From the points, figure out the size of the ROI
    int left, right, top, bottom;
    for (int i = 0; i < points.size(); i++)
    {
        if (i == 0) // initialize corner values
        {
            left = right = points[i].x;
            top = bottom = points[i].y;
        }

        if (points[i].x < left)
            left = points[i].x;

        if (points[i].x > right)
            right = points[i].x;

        if (points[i].y < top)
            top = points[i].y;

        if (points[i].y > bottom)
            bottom = points[i].y;
    }
    std::vector<cv::Point> box_points;
    box_points.push_back(cv::Point(left, top));
    box_points.push_back(cv::Point(left, bottom));
    box_points.push_back(cv::Point(right, bottom));
    box_points.push_back(cv::Point(right, top));

    // Compute minimal bounding box for the ROI
    // Note: for some unknown reason, width/height of the box are switched.
    cv::RotatedRect box = cv::minAreaRect(cv::Mat(box_points));
    std::cout << "box w:" << box.size.width << " h:" << box.size.height << std::endl;

    // Draw bounding box in the original image (debugging purposes)
    //cv::Point2f vertices[4];
    //box.points(vertices);
    //for (int i = 0; i < 4; ++i)
    //{
    //    cv::line(img, vertices[i], vertices[(i + 1) % 4], cv::Scalar(0, 255, 0), 1, CV_AA);
    //}
    //cv::imshow("Original", img);
    //cv::waitKey(0);

    // Set the ROI to the area defined by the box
    // Note: because the width/height of the box are switched, 
    // they were switched manually in the code below:
    cv::Rect roi;
    roi.x = box.center.x - (box.size.height / 2);
    roi.y = box.center.y - (box.size.width / 2);
    roi.width = box.size.height;
    roi.height = box.size.width;
    std::cout << "roi @ " << roi.x << "," << roi.y << " " << roi.width << "x" << roi.height << std::endl;

    // Crop the original image to the defined ROI
    cv::Mat crop = img(roi);

    // Display cropped ROI
    cv::imshow("Cropped ROI", crop);
    cv::waitKey(0);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T23:37:36.983

看到文本是唯一的大斑点，其他一切都只比像素大一点，一个简单的形态开口就足够了

您可以[在 opencv](http://docs.opencv.org/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html#opening) 或[imagemagic中执行此操作](http://www.imagemagick.org/Usage/morphology/#open)

之后，白色矩形应该是图像中唯一剩下的东西。您可以使用 opencvs findcontours、用于 opencv 的 CvBlobs 库或使用 imagemagick -crop 函数找到它

这是您的图像，其中应用了 2 个腐蚀步骤，然后应用了 2 个膨胀步骤： ![在此处输入图像描述](../Images/8fb4f0d61985ea4110a6066940e08df4.png) 您可以简单地将这个图像插入到 opencv findContours 函数中，如[Squares 教程示例](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/squares.cpp?rev=4244)中所示以获取位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-09T07:14:08.537

[输入](https://i.stack.imgur.com/m350D.jpg)

```
#objective:
#1)compress large images to less than 1000x1000
#2)identify region of interests
#3)save rois in top to bottom order
import cv2
import os

def get_contour_precedence(contour, cols):
    tolerance_factor = 10
    origin = cv2.boundingRect(contour)
    return ((origin[1] // tolerance_factor) * tolerance_factor) * cols + origin[0]

# Load image, grayscale, Gaussian blur, adaptive threshold
image = cv2.imread('./images/sample_0.jpg')

#compress the image if image size is >than 1000x1000
height, width, color = image.shape #unpacking tuple (height, width, colour) returned by image.shape
while(width > 1000):
    height = height/2
    width = width/2
print(int(height), int(width))
height = int(height)
width = int(width)
image = cv2.resize(image, (width, height))

gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
blur = cv2.GaussianBlur(gray, (9,9), 0)
thresh = cv2.adaptiveThreshold(gray,255,cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY_INV,11,30)
# Dilate to combine adjacent text contours
kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (9,9))
ret,thresh3 = cv2.threshold(image,127,255,cv2.THRESH_BINARY_INV)
dilate = cv2.dilate(thresh, kernel, iterations=4)

# Find contours, highlight text areas, and extract ROIs
cnts = cv2.findContours(dilate, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
#cnts = cv2.findContours(thresh3, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)

cnts = cnts[0] if len(cnts) == 2 else cnts[1]

#ORDER CONTOURS top to bottom
cnts.sort(key=lambda x:get_contour_precedence(x, image.shape[1]))

#delete previous roi images in folder roi to avoid
dir = './roi/'
for f in os.listdir(dir):
    os.remove(os.path.join(dir, f))

ROI_number = 0
for c in cnts:
    area = cv2.contourArea(c)
    if area > 10000:
        x,y,w,h = cv2.boundingRect(c)
        #cv2.rectangle(image, (x, y), (x + w, y + h), (36,255,12), 3)
        cv2.rectangle(image, (x, y), (x + w, y + h), (100,100,100), 1)
        #use below code to write roi when results are good
        ROI = image[y:y+h, x:x+w]
        cv2.imwrite('roi/ROI_{}.jpg'.format(ROI_number), ROI)
        ROI_number += 1

cv2.imshow('thresh', thresh)
cv2.imshow('dilate', dilate)
cv2.imshow('image', image)
cv2.waitKey() 
```

[投资回报率检测](https://i.stack.imgur.com/cbaFI.jpg) [输出](https://i.stack.imgur.com/2ZXTr.jpg)

# facebook - 防止 Facebook 关注/丢弃短 url 以重定向页面

> ID：15693902
> 
> 赞同：1
> 
> 时间：2013-03-28T23:24:41.583
> 
> 标签：facebook

我们正在尝试为推荐链接（本质上是短网址的链接 - abcom/uniqueCode，它重定向到客户网站但通过我们的服务并让我们跟踪它们）构建一个共享小部件 - 基本上有人需要分享他们自己的附属公司Facebook 上的网址。

问题是 Facebook 似乎总是将 url 解析到最终目的地，并且不显示我们传入的 url。我找不到任何关于是否有办法防止这种情况的文档。我们已经尝试了 301 和 302 重定向，没有任何变化。我尝试了不同的 url 以确保我们没有看到它们的 url 缓存的结果。

有没有办法指示 Facebook（和 Google Plus、Linkedin）保留我们提供的推荐链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:28:25.527

您可以尝试使用 Javascript 进行重定向。

此外，您可以通过根据用户代理或 IP 等向社交网络的爬虫显示不同的页面来做到这一点——查看您的网络服务器日志，并在发布链接后立即检查那里发生的情况。

# java - Java KeyListener：KeyTyped Backspace，Esc 作为输入

> ID：15693904
> 
> 赞同：13
> 
> 时间：2013-03-28T23:24:45.823
> 
> 标签：java, keylistener, backspace

在`KeyTyped`方法内部，我如何判断是否`Backspace`或`Esc`正在被按下？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T04:55:31.010

假设您已正确附加 KeyListener 并已实现该 KeyListener 所需的方法，要检测特定按键，只需添加以下代码：

```
public void keyReleased(KeyEvent ke) 
{
    if(ke.getKeyCode() == KeyEvent.VK_BACK_SPACE)
    {  
        //code to execute if backspace is pressed
    }

    if(ke.getKeyCode() == KeyEvent.VK_ESCAPE)
    {
        //code to execute if escape is pressed
    }
} 
```

KeyEvent 类 javadocs 可以在以下链接中找到：[KeyEvent javadocs](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html)。
在那里，您可以找到在实现 Java KeyListeners 和 KeyEvents 时用于检测键盘输入的所有 Java 虚拟键码的列表。关于 KeyListeners 的更多信息可以在这里找到：[How to Write a Key Listener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)。要按要求使用 keyTyped 方法，请参阅[gangqinlaohu 的回答](https://stackoverflow.com/a/15693905/1518042)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T23:24:45.823

[http://www.fileformat.info/info/unicode/char/8/index.htm](http://www.fileformat.info/info/unicode/char/8/index.htm)

当`arg0.getKeyChar()`转换为 int:`(int)arg0.getKeyChar()`时，退格键的值为 8，而 Esc 键的值为 27。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-06T21:46:48.370

**仅适用于 java 7 / jdk1.7 及更高版本：**如果您正在检查`event.getKeyCode()`，请尝试该`event.getExtendedKeyCode()`方法。在退格的情况下，它将返回正确的代码（在本例中为 8）而不是纯 0。这样就无需检查`\b`：

```
if (e.getExtendedKeyCode() == KeyEvent.VK_BACK_SPACE) {
    System.out.println("Backspace pressed");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-22T23:18:51.253

我知道这是一个非常古老的主题，但我想添加一个我发现在同一问题上对我有很大帮助的答案。

我正在为 Java 程序进行聊天输入，最好使用 KeyTyped 而不是按下和释放（因为它不需要过滤大多数字符）。无论如何，我想让退格删除字符，但是 .getKeyCode() 根据文档总是返回 0 。但是，您可以使用 .getKeyChar() 返回字符（可能会显示为方形框），并使用转义字符 '\b' 进行比较。

```
if(tmp.getKeyChar().equals('\b')) { ... } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-09T15:15:08.397

您也可以使用`e.getExtendedKeyCode()`in `keyTyped`，它会返回看起来正确的非零值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-25T21:53:04.217

就个人而言，我更喜欢将 KeyPressed 事件用于字母/数字以外的键，因为当您键入 Backspace 或 Enter 键时，实际上没有任何内容被输入。这就是我所做的工作（确保从 javafx.scene.input 导入 KeyCode 和 KeyEvent）！

```
MyTextArea.addEventHandler(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>(){
    @Override
    public void handle(KeyEvent event) {
        if (event.getCode().equals(KeyCode.BACK_SPACE)){
            System.out.println("Success");
        }
    }
}); 
```

让我知道这是否对您有用:)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-01-20T21:15:05.230

检查下面的代码，我希望它对你有用。

```
@FXML
public void keyPresses(KeyEvent ke) 
{
    if (ke.getCode().equals(KeyCode.BACK_SPACE)) {
        System.out.println("It Works Backspace pressed..!");
    }
} 
```

# php - PHP 检查指定输入的电子邮件和 ID 是否与数据库中的匹配

> ID：15693918
> 
> 赞同：2
> 
> 时间：2013-03-28T23:26:26.573
> 
> 标签：php, mysql, pdo

我最近从 Mysql_* 切换到 PDO，听说它是连接和使用 MySQL 数据库的新的、更安全的方式。

我已经学习了它的许多基础知识，例如查询、准备等。

**我想做什么**

我目前有两个文本字段，名为“电子邮件”和“ID”。当用户注册时，他输入他的电子邮件，在他注册后他会收到他自己的 ID，这是独一无二的。我希望他能够检查他的帐户状态，而无需任何密码。

只需输入他的电子邮件和 id 并单击“提交”即可。点击提交后，系统会检查是否有相同邮箱和ID的栏目。如果有一列具有这些完全相同的电子邮件和 ID，那么我可以创建一个 while 循环来从他的帐户列中获取信息，例如创建日期等。

**我的问题**

*我该怎么做？*

这是我到目前为止所做的：

```
if (isset($email) && isset($id) && isset($submit)) {

    $fetch = $connect->prepare("SELECT * FROM users WHERE email = :email LIMIT 1");
    $fetch->bindValue(':email', $email);
    $fetch->execute();

    $validate = $fetch->fetchColumn();
    if ($validate == 0) {
        echo 'failed';
    } else {
        echo 'not failed';
    }

    while($row = $fetch->fetch( PDO::FETCH_ASSOC )) {
    //We can fetch here...
    }

} 
```

我的朋友建议我使用 fetchColumn() 来替换 mysql_num_columns 函数，但它似乎不起作用。

我输入了正确的电子邮件地址，但它仍在回显“失败”而不是“未失败”。

## 为什么这种方法不起作用？我做错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:29:46.597

我不认为你想获取*columns*，而是*rows*。您实际上也不会检查 ID，但您可以在`AND`必要时向查询添加条件。

```
$fetch->execute();
if ($fetch->rowCount()) {
    echo "Row was returned; match found";
}
else {
    echo "No match found";
    exit;
}
$row = $fetch->fetch(PDO::FETCH_ASSOC); 
```

您可能也只能获取一行，但如果没有，您可以`while`像上面那样使用循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:32:46.543

`$validate`是一个包含电子邮件地址的字符串。执行此操作时，`if ($validate == 0)`您将类型转换`$validate`为整数，并且任何非数字字符串都变为`(int) 0`，因此比较始终为真。

更改为`if ($validate === FALSE)`。

# sql - 在 Rails ActiveRecord 中，如何忽略选择仅在其中一列中有差异的“重复”记录？

> ID：15693922
> 
> 赞同：1
> 
> 时间：2013-03-28T23:26:33.873
> 
> 标签：sql, ruby-on-rails, ruby, database, activerecord

我的 SQL 经验很少，而且我对 Rails 还是很陌生。在 Rails 3 中，在我的“报告”模型中，我目前正在使用如下行查询数据库：

```
MyRecord.where('org_id=?', self.org_id).order('vehicle_id') 
```

这样的查询会产生这样的记录（显然我稍微改变了数据）：

```
151 Accord 214  115,386 Mule    n/a SammyExample
152 Accord 214  115,386 Mule    n/a SammyExample
140 Camry       55,555  Foghorn n/a SammyExample 
```

我们称第一列为“MyRecord_ID”。

现在，我希望能够执行一个省略重复但不考虑 MyRecord_ID 列的查询。换句话说，上面的前两条记录将被视为重复，其中一条将被遗漏。我该怎么做？

另外，作为旁注，我不明白为什么 MyRecord 有 ID（可通过 MyRecord.id 访问），但 schema.rb 文件中没有 MyRecord_ID 列。

谢谢你。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:44:30.043

如果您不需要结果集中的 id，请使用 select()

```
MyRecord.select("distinct [cols you want]").where('org_id=?', self.org_id).order('vehicle_id') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:35:01.953

也许是这样的：

```
MyRecord.where('org_id=?', self.org_id).order('vehicle_id').group(:vehicle_id) 
```

如果您选择车辆，您可能需要翻转它。

```
Vehicle.include(:my_record).where(...). 
```

# php - codeigniter 将 pdf 文件作为电子邮件附件发送

> ID：15693924
> 
> 赞同：2
> 
> 时间：2013-03-28T23:26:45.837
> 
> 标签：php, codeigniter, email, tcpdf

我正在使用`TCPDF`. 通过使用 TCPDF，我得到了 base64 编码的原始文件，现在我想使用`codeigniter`电子邮件助手功能将此原始数据作为电子邮件附件发送。

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-15T14:33:27.653

花了我一段时间才找到答案，希望它对将来的任何人有所帮助：

```
 // Get email address and base64 via ajax
    $email = $this->input->post('email');
    $base64 = $this->input->post('base64');

    $base64 = str_replace('data:application/pdf;base64,', '', $base64);
    $base64 = str_replace(' ', '+', $base64);

    $data = base64_decode($base64);

    // Locally emails do now work, so I use this to connect through my gmail account to send emails
    $config = Array(
        'protocol' => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => 465,
        'smtp_user' => 'MyEmailAddress@gmail.com',
        'smtp_pass' => 'MyEmailPassword',
        'mailtype'  => 'html', 
        'charset'   => 'iso-8859-1'
    );

    $this->load->library('email', $config);

    $this->email->set_newline("\r\n");
    $this->email->to($email);
    $this->email->from('noreply@whatever.ca', 'base64');
    $this->email->subject('base64');
    // Using the string_attach($str_file, $filename, $mime, $disposition = 'attachment')
    // function located in CodeIgniter\application\libraries\Email.php
    $this->email->string_attach($data, 'base64.pdf', 'application/pdf');

    $this->email->send(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T08:02:16.967

```
 /*its batter to make function*/ 

 /*-------COPY THIS CODE---- */

  $newFile  = 'Path/to/save/filename.pdf';
  $obj = new $this->pdf;
  $obj->SetSubject('BLAH BLAH'); // set document information
  $obj->SetKeywords('Blah, Blah, Blah'); 
  $obj->AddPage(); // add a page
  $obj->SetFont('helvetica', '', 6);
  $obj->writeHTML("Your text goes here", true, false, false, false, '');
  $obj->Output($newFile, 'F'); //Close and output PDF document

 /*-------SENDING EMAIL---- */

 $this->load->library('email');
 $this->email->from('noreply@example.com', 'Example');
 $this->email->to('to@example.com');
 $this->email->subject('Subject Goes Here');
 $this->email->message('Message goes here');
 $this->email->attach($newFile);
 $this->email->send(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:14:02.867

您必须先保存文件，然后才能将其与电子邮件一起附加

```
 $obj = new $this->pdf;
      $obj->SetSubject('BLAH BLAH'); // set document information
      $obj->SetKeywords('Blah, Blah, Blah'); 
      $obj->AddPage(); // add a page
      $obj->SetFont('helvetica', '', 6);
      $obj->writeHTML("Your text goes here", true, false, false, false, '');
      $obj->Output('Path/to/save/filename.pdf', 'F'); //Close and output PDF document 
```

而不是像这样发送电子邮件

```
 $this->load->library('email');
     $this->email->from('noreply@example.com', 'Example');
     $this->email->to('to@example.com');
     $this->email->subject('Subject Goes Here');
     $this->email->message('Message goes here');
     $this->email->attach('Path/to/saved/filename.pdf');
     $this->email->send(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-05-17T04:21:45.093

```
 $newFile  = 'Path/to/save/filename.pdf';
  $obj = new $this->pdf;
  $obj->SetSubject('BLAH BLAH'); // set document information
  $obj->SetKeywords('Blah, Blah, Blah'); 
  $obj->AddPage(); // add a page
  $obj->SetFont('helvetica', '', 6);
  $obj->writeHTML("Your text goes here", true, false, false, false, '');
  $obj->Output($newFile, 'F'); //Close and output PDF document 
```

# javascript - chrome 扩展中不存在 chrome.runtime.onConnect

> ID：15693925
> 
> 赞同：6
> 
> 时间：2013-03-28T23:26:46.467
> 
> 标签：javascript, google-chrome, google-chrome-extension

我在持久后台脚本（background.js）中有以下代码：

```
chrome.runtime.onConnect.addListener(function(port) {
    console.assert(port.name == "knockknock");
    port.onMessage.addListener(function(msg) {
        if (msg.joke == "Knock knock")
            port.postMessage({question: "Who's there?"});
        else if (msg.answer == "Madame")
            port.postMessage({question: "Madame who?"});
        else if (msg.answer == "Madame... Bovary")
            port.postMessage({question: "I don't get it."});
    });
}); 
```

当我在 Chrome 中加载/重新加载扩展程序时，我收到错误消息

```
Uncaught TypeError: Cannot call method 'addListener' of undefined 
```

该代码取自 Chrome 扩展的文档站点，因此它可能是工作代码，只是缺少一些设置。

清单看起来像：

```
{
    "manifest_version": 2,
    "name": "TestMessaging",
    "version": "1",
    "background" : {
        "scripts": ["background.js"],
        "persistent": false
    },
    "browser_action": {
        "default_icon" : "icon.png"
    },
    "content_scripts": [
        {
            "matches": ["http://*/*", "https://*/*"],
            "js": [
                "contentscript.js"
            ]
        }
    ],
    "permissions" : [
        "tabs",
        "https://*/*",
        "http://*/*"
    ]

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-30T17:36:45.363

改为使用`chrome.extension.onConnect`（可以用 触发`chrome.extension.connect`）。

# ruby-on-rails - 获取 HTTPS 连接以使用本地 Rails 应用程序和 nginx？

> ID：15693926
> 
> 赞同：2
> 
> 时间：2013-03-28T23:27:20.587
> 
> 标签：ruby-on-rails, ssl, https, nginx

我有一个在本地运行的 Ruby on Rails 应用程序。然后我也在本地运行一个 nginx 服务器。现在，通过 HTTP 连接工作正常，但是当我尝试通过 HTTPS 连接时，我从 nginx 收到“502 Bad Gateway”错误。我很确定证书工作正常，因为当它们没有正常工作时，我遇到了不同的错误，但现在我的 nginx 配置有问题？这是配置：

```
http {
  access_log off;
  #include mime.types;
  default_type application/octet-stream;

  upstream mydomain.com {
    server 127.0.0.1:8080;
  }

  server {
    listen 80;
    server_name local www.local;
    location / {
      proxy_pass http://mydomain.com;
    }
    add_header Pragma "no-cache";
  }

  server {
    listen 443;
    server_name local www.local;
    ssl on;
    ssl_certificate /Users/daise/projects/mydomain/run/ssl/server.crt;
    ssl_certificate_key /Users/daise/projects/mydomain/run/ssl/server.key;
    location / {
      proxy_set_header X-FORWARDED_PROTO https;

      #proxy_pass https://mydomain.herokuapp.com;
      proxy_pass https://mydomain.com;
    }
    add_header Pragma "no-cache";
  }
} 
```

我还应该补充一点，我欺骗了我的 /etc/hosts 文件以解析为 127.0.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:47:23.563

改变

```
 proxy_pass https://mydomain.com; 
```

到

```
 proxy_pass http://mydomain.com; 
```

您的 ssl 在 nginx 中终止。所以不需要使用https来连接上游服务器。

[**更多**]

还要注意配置文件中的错字：

```
proxy_set_header X-FORWARDED_PROTO https 
```

到

```
proxy_set_header X-FORWARDED-PROTO https; 
```

# java - 我无法按特定顺序将 JButton 添加到 JList

> ID：15693929
> 
> 赞同：3
> 
> 时间：2013-03-28T23:27:36.943
> 
> 标签：java, swing, user-interface

我尝试在 JList 中添加 JButtons，使其类似于棋盘游戏。

这是我的代码：

```
public class Board {

public Board() {
    JList list = new JList();
    list.setLayout(new GridLayout(10, 10));
    list.setDragEnabled(true);

    Container container = new Container();
    JFrame frame = new JFrame();
    JPanel panel1 = new JPanel();
    JPanel panel2 = new JPanel();
    frame.add(container);
    container.add(panel1);

    for (int j = 0; j < 99; j++) {
        list.add(createButton());
    }

    panel2.add(list);
    container.add(panel2);
    panel2.setLayout(new GridLayout());
    panel1.setBounds(50, 150, 150, 150);
    panel1.setBackground(Color.YELLOW);
    panel2.setBounds(650, 150, 500, 500);
    panel2.setBackground(Color.RED);

    frame.setSize(1366, 768);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}

public JButton createButton() {
    JButton button = new JButton();
    button.setBackground(Color.BLUE);
    return button;
}
} 
```

如果我重复 100 次，我会得到：![在此处输入图像描述](../Images/0bede2a44c1d95ff2abb6c975b28ef87.png)

如果我重复 99 次，我会得到：

![在此处输入图像描述](../Images/34ff7f541cdf7a841a956188c9692fc0.png)

**所以我的问题是如何填写上面的板？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:54:02.110

发生这种情况的原因是因为您将所有按钮添加到 JList，这并不是您真正打算使用 JList 的方式（通常您修改支持列表的*模型*以便从列表中添加/删除项目）。该列表在内部做一些占用第一个插槽的事情。

如果您更改此行：

```
JList list = new JList(); 
```

到：

```
JPanel list = new JPanel(); 
```

您的布局将起作用（您还必须删除该`setDragEnabled`行，并将 99 更改为 100）。我不确定您是否需要 JList 的某些功能，但这就是您的布局无法正常工作的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T00:15:33.413

您应该创建您的 JList ：

```
DefaultListModel dataModel = new DefaultListModel();
JList list = new JList(dataModel);
list.setLayoutOrientation(JList.HORIZONTAL_WRAP); 
```

如下设置 ListCellRenderer：

```
 final JButton button = createButton();
    list.setCellRenderer(new ListCellRenderer() {
             @Override
             public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                  return button;
             }
    }); 
```

按如下方式添加您的项目：//无论您添加什么值，您将决定在渲染项目时需要哪些信息

```
 for (int j = 0; j < 99; j++) {
        dataModel.add(j, j); 
    } 
```

还有一个使用这个的例子：[如何创建自定义 JList](http://www.java2s.com/Code/Java/Swing-JFC/UseJListcomponenttodisplaycustomobjectswithListCellRenderer.htm)

**编辑**：其他一些有用的参考资料： [拖放](http://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html) [在 JList 中拖放](http://www.java2s.com/Code/Java/Swing-JFC/DragandDropJListandList.htm)

# python - 如何使用 JES 编程更改图像颜色？

> ID：15693938
> 
> 赞同：2
> 
> 时间：2013-03-28T23:28:47.180
> 
> 标签：python, for-loop, jython, jes

我的目标是将图片大小加倍，然后将左半部分更改为灰度，然后更改右上半部分的绿色值和右下半部分的蓝色值。我在教科书中找到了灰度值，但我不确定这是否是我实际使用的值。而且我也不确定我是否使用 for 循环或只是使用不同的东西对这些不同的值进行编程

到目前为止，我的代码是：

```
 def crazyPic(newGreen,newBlue,pic,file):
      show(pic)
      newPic = makeEmptyPicture(getWidth(pic)*2,getHeight((pic)*2
           for x in range(width):
              for y in range(height):
                  for px in getPixel(pic,0,100):
                  nRed = getRed(px) * 0.299
                  nGreen = getGreen(px) * 0.587
                  nBlue = getBlue(px) * 0.114
                  luminance = nRed + nGreen + nBlue
                  setColor(px,makeColor(luminance,luminance,luminance) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T08:01:53.113

*我不应该给出完整的答案，因为 JES 是为学生设计的应用程序，但我认为三个月后可以给出一个完整的工作示例，可以作为其他人的参考......*

这应该接近您尝试做的事情：

*注意：您对 x 和 y 进行简单双循环的方法是正确的。*

```
def crazyPic(pic, newRed, newGreen, newBlue):

    w = getWidth(pic)
    h = getHeight(pic)
    new_w = w * 2
    new_h = h * 2
    newPic = makeEmptyPicture(w * 2, h * 2)

    for x in range(new_w):
      for y in range(new_h):
          new_px = getPixel(newPic, x, y)

          # Top-left: B&W
          if (x < w) and (y < h):
            px = getPixel(pic, x, y)
            nRed = getRed(px) * newRed #0.299
            nGreen = getGreen(px) * newGreen #0.587
            nBlue = getBlue(px) * newBlue #0.114
            luminance = nRed + nGreen + nBlue
            new_col = makeColor(luminance, luminance, luminance)

          # Top-right
          elif (y < h):
            px = getPixel(pic, x - w, y)
            nRed = getRed(px) * newRed
            new_col = makeColor(nRed, getGreen(px), getBlue(px))

          # Bottom-left
          elif (x < w):
            px = getPixel(pic, x, y - h)
            nGreen = getGreen(px) * newGreen
            new_col = makeColor(getGreen(px), nGreen, getBlue(px))

          # Bottom-right
          else:
            px = getPixel(pic, x - w, y - h)
            nBlue = getBlue(px) * newBlue
            new_col = makeColor(getGreen(px), getBlue(px), nBlue)

          setColor(new_px, new_col)

    return newPic

file = pickAFile()
picture = makePicture(file)
#picture = crazyPic(picture, 0.299, 0.587, 0.114)
# Here, with my favorite r, g, b weights
picture = crazyPic(picture, 0.21, 0.71, 0.07)

writePictureTo(picture, "/home/quartered.jpg")

show(picture) 
```

输出（***Antoni Tapies****绘画***）：**

 *** * *

![在此处输入图像描述](../Images/e2d8d2533e2f44aa795d0e00f7e336ee.png)......从......![在此处输入图像描述](../Images/c3a52034876d52f248d2c00b5aeaff3d.png)

* * *

这是关于***grayscale***的更**[详细的线程](https://stackoverflow.com/a/17309765/1715716)**。

 ** * ****

# internet-explorer - 在 IE 中调整大小问题

> ID：15693939
> 
> 赞同：0
> 
> 时间：2013-03-28T23:28:53.363
> 
> 标签：internet-explorer, twitter-bootstrap, resize

在我的一个项目中，我在 IE（所有版本）下遇到了一个奇怪的调整大小问题。我是新手，所以很可能是一个完全基本的错误。使用 IE查看网站 ( [http://www.sydneyharbourradio.com.au )。](http://www.sydneyharbourradio.com.au)一旦您开始使用鼠标移动，该网站就会陷入混乱并开始不断调整布局大小......

Safari、Chrome 或 Firefox 一切正常。

我不知道是什么导致了这种奇怪的行为......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T16:21:05.363

我将首先使用 IE 开发工具来诊断网站的问题。转到“工具”，然后转到“F12 开发人员工具”，然后单击“控制台”选项卡以查看站点上出现的问题。

前五个是：

```
HTML1512: Unmatched end tag. 
www.sydneyharbourradio.com.au, line 109 character 354

HTML1509: Unmatched end tag. 
www.sydneyharbourradio.com.au, line 119 character 33

HTML1509: Unmatched end tag. 
www.sydneyharbourradio.com.au, line 194 character 2377

HTML1423: Malformed start tag. Attributes should be separated by whitespace. 
www.sydneyharbourradio.com.au, line 204 character 33

HTML1409: Invalid attribute name character. Attribute names should not contain ("),('),(<), or (=). 
www.sydneyharbourradio.com.au, line 204 character 33 
```

这是该站点发生的许多许多问题中的 5 个。通过清理您的代码并修复您的代码......只有这样您才能开始诊断布局问题。

# android - Android滚动视图不滚动

> ID：15693941
> 
> 赞同：1
> 
> 时间：2013-03-28T23:29:11.170
> 
> 标签：android, scrollview

我有这个布局，里面有一个滚动视图：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/tools"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" 
     android:background="#eeeeee">

     <!-- HEADER -->

     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical" >

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="1dp"
             android:background="#ffffff"
             android:orientation="vertical" >        
         </LinearLayout>

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="1dp"
             android:background="#868686"
             android:orientation="vertical" >        
         </LinearLayout>

         <RelativeLayout
             android:id="@+id/parent_linear"
             android:layout_width="fill_parent"
             android:layout_height="50dp"
             android:background="@drawable/gradient_header" >

             <TextView
                 android:id="@+id/textView1"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:layout_centerHorizontal="true"
                 android:layout_centerInParent="true"
                 android:layout_centerVertical="true"
                 android:layout_marginBottom="@dimen/margin_normal"
                 android:layout_marginTop="@dimen/margin_small"
                 android:gravity="center_horizontal"
                 android:text="@string/proposed_plan_prompt"
                 android:textColor="#797A77"
                 android:textSize="15sp"
                 android:textStyle="bold" />

         </RelativeLayout>

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="2dp"
             android:background="#C7C7C7"
             android:orientation="vertical" >        
         </LinearLayout>

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="3dp"
             android:background="@drawable/gradient_header_separator" 
             android:orientation="vertical" >        
         </LinearLayout>

     </LinearLayout>

     <!-- BODY -->

     <!-- Proposed plan (summary) -->
     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="@dimen/margin_normal"
         android:layout_marginLeft="@dimen/margin_normal"
         android:layout_marginRight="@dimen/margin_normal"
         android:background="@drawable/border"
         android:orientation="horizontal" >

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:layout_weight="1"
             android:layout_marginLeft="@dimen/margin_small"
             android:layout_marginRight="@dimen/margin_small"
             android:orientation="vertical" >

             <TextView
                android:id="@+id/providerNameView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="2dp"
                android:text="ABCD"
                android:textSize="25sp"
                android:textStyle="bold" />         

             <TextView
                android:id="@+id/planView"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="2dp"
                android:text="1234"
                android:textSize="12sp"
                android:textColor="#737373"/>

         </LinearLayout>

         <View
            android:id="@+id/separator" 
            android:layout_width="1dip"
            android:layout_height="50dp"
            android:layout_marginTop="@dimen/margin_small"
            android:background="@drawable/gradient_vertical" />

         <LinearLayout
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:layout_weight="1"
             android:layout_alignParentRight="true"
             android:layout_marginLeft="@dimen/margin_small"
             android:layout_marginRight="@dimen/margin_small"
             android:orientation="vertical" >

             <LinearLayout
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_alignParentRight="true"
                 android:layout_gravity="right"
                 android:layout_marginLeft="@dimen/margin_small"
                 android:layout_marginRight="@dimen/margin_small"
                 android:gravity="top"
                 android:orientation="horizontal" >

                 <TextView
                    android:id="@+id/priceView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" 
                    android:text="XY"
                    android:textSize="32sp"
                    android:textStyle="bold" />

                 <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent" 
                    android:text="+123"
                    android:textColor="#565756"
                    android:textSize="12sp" />

             </LinearLayout>

             <TextView
                 android:id="@+id/totPriceView"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_gravity="right"
                 android:text="(information)"
                 android:textColor="#737373"
                 android:textSize="12sp" />

         </LinearLayout>
     </LinearLayout>

     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginBottom="@dimen/margin_normal"
         android:layout_marginLeft="@dimen/margin_normal"
         android:layout_marginRight="@dimen/margin_small"
         android:layout_marginTop="@dimen/margin_normal"
         android:orientation="vertical" >

         <TextView
             android:id="@+id/detailsTextView"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:text="Choose:"
             android:textSize="12sp"
             android:textStyle="bold" />

         <SeekBar
             android:id="@+id/seekBar1"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:layout_weight="1" />

         <TextView
             android:id="@+id/detailsTextView"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:layout_marginLeft="@dimen/margin_small"
             android:text="Best"
             android:textColor="#737373"
             android:textSize="12sp" />
     </LinearLayout>

     <TextView
         android:id="@+id/detailsTextView"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginLeft="@dimen/margin_normal"
         android:text="Details:"
         android:textSize="12sp"
         android:textStyle="bold" />

     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginBottom="@dimen/margin_normal"
         android:layout_marginLeft="@dimen/margin_normal"
         android:layout_marginRight="@dimen/margin_small"
         android:layout_marginTop="@dimen/margin_small"
         android:background="@drawable/border"
         android:orientation="vertical" >

         <FrameLayout
             android:layout_width="match_parent"
             android:layout_height="wrap_content" >

             <ScrollView
                 android:id="@+id/scrollView1"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content" >

                 <LinearLayout
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:layout_gravity="right"
                     android:layout_marginLeft="90dp"
                     android:layout_marginRight="@dimen/margin_small"
                     android:background="@drawable/border"
                     android:orientation="vertical" >

                     <RelativeLayout
                         android:id="@+id/line1Layout"
                         android:layout_width="match_parent"
                         android:layout_height="30sp"
                         android:background="#ffffff"
                         android:gravity="center_vertical"
                         android:orientation="horizontal" >

                         <TextView
                             android:id="@+id/line1Title"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:textSize="@dimen/font_normal" />

                         <TextView
                             android:id="@+id/line1Text"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentRight="true"
                             android:background="@drawable/border_attribute"
                             android:textSize="@dimen/font_normal"
                             android:visibility="invisible" />
                     </RelativeLayout>

                     <RelativeLayout
                         android:id="@+id/line2Layout"
                         android:layout_width="match_parent"
                         android:layout_height="30sp"
                         android:background="#EAEAEA"
                         android:gravity="center_vertical"
                         android:orientation="horizontal" >

                         <TextView
                             android:id="@+id/line2Title"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:textSize="@dimen/font_normal" />

                         <TextView
                             android:id="@+id/line2Text"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentRight="true"
                             android:background="@drawable/border_attribute"
                             android:textSize="@dimen/font_normal"
                             android:visibility="invisible" />
                     </RelativeLayout>

                     <RelativeLayout
                         android:id="@+id/line3Layout"
                         android:layout_width="match_parent"
                         android:layout_height="30sp"
                         android:background="#ffffff"
                         android:gravity="center_vertical"
                         android:orientation="horizontal" >

                         <TextView
                             android:id="@+id/line3Title"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:textSize="@dimen/font_normal" />

                         <TextView
                             android:id="@+id/line3Text"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentRight="true"
                             android:background="@drawable/border_attribute"
                             android:textSize="@dimen/font_normal"
                             android:visibility="invisible" />
                     </RelativeLayout>

                     <RelativeLayout
                         android:id="@+id/line4Layout"
                         android:layout_width="match_parent"
                         android:layout_height="30sp"
                         android:background="#EAEAEA"
                         android:gravity="center_vertical"
                         android:orientation="horizontal" >

                         <TextView
                             android:id="@+id/line4Title"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:textSize="@dimen/font_normal" />

                         <TextView
                             android:id="@+id/line4Text"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentRight="true"
                             android:background="@drawable/border_attribute"
                             android:textSize="@dimen/font_normal"
                             android:visibility="invisible" />
                     </RelativeLayout>

                     <RelativeLayout
                         android:id="@+id/line5Layout"
                         android:layout_width="match_parent"
                         android:layout_height="30sp"
                         android:background="#ffffff"
                         android:gravity="center_vertical"
                         android:orientation="horizontal" >

                         <TextView
                             android:id="@+id/line5Title"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:textSize="@dimen/font_normal" />

                         <TextView
                             android:id="@+id/line5Text"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentRight="true"
                             android:background="@drawable/border_attribute"
                             android:textSize="@dimen/font_normal"
                             android:visibility="invisible" />
                     </RelativeLayout>

                     <RelativeLayout
                         android:id="@+id/line6Layout"
                         android:layout_width="match_parent"
                         android:layout_height="30sp"
                         android:background="#EAEAEA"
                         android:gravity="center_vertical"
                         android:orientation="horizontal" >

                         <TextView
                             android:id="@+id/line6Title"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:textSize="@dimen/font_normal" />

                         <TextView
                             android:id="@+id/line6Text"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             android:layout_alignParentRight="true"
                             android:background="@drawable/border_attribute"
                             android:textSize="@dimen/font_normal"
                             android:visibility="invisible" />
                     </RelativeLayout>
                 </LinearLayout>
             </ScrollView>

             <ImageView
                 android:id="@+id/imageView1"
                 android:layout_width="100dp"
                 android:layout_height="140dp"
                 android:layout_gravity="left|center_vertical"
                 android:src="@drawable/robin4" />
         </FrameLayout>

         <Button
             android:id="@+id/button_proposed_extras"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:layout_marginBottom="@dimen/margin_small"
             android:layout_marginLeft="20dp"
             android:layout_marginRight="20dp"
             android:layout_marginTop="@dimen/margin_normal"
             android:background="@drawable/button_transparent"
             android:text="@string/extras_title"
             android:textColor="#298A17"
             android:textStyle="bold|italic"
             android:visibility="invisible" />
     </LinearLayout>

      <Button
         android:id="@+id/button_proposed_change"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="@dimen/margin_normal"
         android:layout_marginLeft="20dp"
         android:layout_marginRight="20dp"
         android:background="@drawable/button"
         android:text="@string/proposition_change_title"
         android:textColor="#ffffff"
         android:textStyle="bold" />

     <Button
         android:id="@+id/button_proposed_no_change"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="@dimen/margin_normal"
         android:layout_marginLeft="20dp"
         android:layout_marginRight="20dp"
         android:background="@drawable/button_silver"
         android:text="@string/proposition_no_change_title"
         android:textColor="#298A17"
         android:textStyle="bold" /> 

 </LinearLayout> 
```

*   带有滚动视图的部分以最大尺寸显示并且不滚动。

*   最后的两个按钮没有显示，它们显然不适合屏幕。

我想让滚动工作以显示按钮。

为什么滚动布局以最大尺寸显示而不是滚动？

解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:04:58.690

为了使按钮出现在屏幕上，您也应该在滚动中拥有按钮。大多数情况下，如果屏幕包含许多组件，您设计的屏幕应该将滚动视图作为父级。Main ScrollView -> LinearLayout / RelativeLayout -> 根据需要添加组件。通过这样做，您应该也能够看到按钮。通过这种方式，即使您的布局更改为横向，组件也不会隐藏并显示在滚动中。希望你明白我的意思，它可以帮助你解决你的问题。

就上面的代码而言，您将无法看到按钮，因为按钮不在滚动视图中，因此下面的视图被隐藏了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:58:09.180

如果不滚动，因为它的高度是 wrap_content。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T15:24:37.743

正如 ChristopheCVB 所说，您的 ScrollView 不必是`wrap_content`. 仅当 ScrollView 包含的内容比 ScrollView 本身更大时（垂直 ScrollView读得*更高，水平 ScrollView 读得**更宽*），ScrollView 才会滚动。如果它较小，则无需滚动。

# javascript - 如果变量为真，不要显示警报？Javascript

> ID：15693944
> 
> 赞同：0
> 
> 时间：2013-03-28T23:29:26.307
> 
> 标签：javascript, boolean, alert

所以基本上，我想要找出的是，是否有任何方法可以将变量设置为 false，并且如果所述变量更改为 true，则不显示警报消息。

例子：

```
function pausePop() {
    $("#signatures").hover(function() {
        var shown = false;
        alert('If you hover over the signatures or the cleared sides, it will pause the scroll');
        var shown = true;

        if (shown = true) {

        }
    });
} 
```

有没有办法做到这一点？如果是这样，是否有一种简单的方法可以做到这一点？我只是一个初学者，想立即做一些很酷的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:40:02.987

我不确定上下文，但如果您只想触发一次警报然后将其标记为所示，请尝试：

```
var shown = false;

function pausePop() {
    if (!shown) {
        alert('If you hover over the signatures or the cleared sides, it will pause the scroll');
        shown = true;
    }
}

$("#signatures").hover(pausePop); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:43:57.487

这是一个 jsFiddle，它向您展示了与您的问题相关的一些不同的基本概念：

*   [演示小提琴](http://jsfiddle.net/jahroy/VN7sy/)

随意修改它，但你喜欢。

这是代码的预览：

```
var showAlert = true;

$('#hoverDiv').hover(function () {
    if (showAlert) {
        alert("Make sure you read this... You will only see it once.");
    }
    showAlert = false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T23:46:01.970

我认为您正在将 Javascript 作为您的第一种编程语言，或者您只是在玩一些代码。

问题不在于 Javascript，而在于条件 if/else 语句和执行流程。

如果在该行显示警报，则您也不需要 if/else。客户端单击确定按钮后，将评估下一条语句。

# winsock - 如何使用 getaddrinfo()？

> ID：15693945
> 
> 赞同：5
> 
> 时间：2013-03-28T23:29:27.420
> 
> 标签：winsock, winsock2, getaddrinfo

我正在尝试制作一个简单的程序，它接受像 www.google.com 这样的字符串并返回 IP 地址......

到目前为止我所拥有的：

```
char* hostname = new char[www.size()+1];
std::copy(www.begin(), www.end(), hostname);
hostname[www.size()] = '\0';

struct addrinfo new_addr, *res;

getaddrinfo(www.c_str(), SERVICE.c_str(), &new_addr, &res);

cout << new_addr.ai_addr; 
```

第 4 个参数中的第 3 个应该做什么？getaddrinfo 函数是修改 new_addr 结构还是什么？我不太了解 msdn 文档。解析主机名后，我想将套接字连接到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:58:58.213

如果我让第三个参数无效怎么办？

这是我到目前为止开发的代码。

```
 char* hostname = new char[www.size()+1];
copy(www.begin(), www.end(), hostname);
hostname[www.size()] = '\0';

struct addrinfo *res;
struct in_addr addr;

getaddrinfo(hostname, NULL, 0, &res);

addr.S_un = ((struct sockaddr_in *)(res->ai_addr))->sin_addr.S_un;

server.sin_addr.s_addr = inet_addr(inet_ntoa(addr));
server.sin_port = htons(portno);

freeaddrinfo(res);
delete []hostname; 
```

server.sin 在其他地方声明，我用它来填充我的套接字类的另一种方法中的套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T00:44:12.210

MSDN 文档非常详细，并准确解释了各种参数的用途。第三个参数允许您指定将与查找结果一起使用的套接字类型。这将根据需要优化结果。第四个参数返回实际结果。该文档还包含有关如何使用该功能的完整示例。那么有什么例子不清楚文档所说的内容？

尝试这个：

```
struct addrinfo hints = {0};
hints.ai_flags = 0;
hints.ai_family = AF_UNSPEC; // IPv4 and IPv6 allowed
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;

struct addrinfo *res = NULL;

if (getaddrinfo(www.c_str(), SERVICE.c_str(), &hints, &res) == 0)
{
    TCHAR szIPAddr[64];
    DWORD szIPAddrLen;
    SOCKET skt;

    struct addrinfo *addr = res;
    do
    {
        skt = socket(addr->ai_family, addr->ai_socktype, addr->ai_protocol);
        if (skt == INVALID_SOCKET)
            cout << "Unable to create socket, error " << WSAGetLastError() << endl;
        else
        {
            szIPAddrLen = 64;
            WSAAddressToString(addr->ai_addr, addr->ai_addrlen, NULL, szIPAddr, &szIPAddrLen);

            cout << "Connecting to " << szIPAddr << " ..." << endl;

            if (connect(skt, addr->ai_addr, addr->ai_addrlen) == 0)
            {
                cout << "Connected!" << endl;
                break;
            }

            cout << "Unable to connect, error " << WSAGetLastError() << endl;
            closesocket(skt);
            skt = INVALID_SOCKET;
        }

        addr = addr->ai_next;
    }
    while (addr);

    freeaddrinfo(res);

    if (skt != INVALID_SOCKET)
    {
        // use skt as needed...
        closesocket(skt);
    }
} 
```

# activeadmin - 您可以在自定义页面的内容中使用 ActiveAdmin 中的 Form() 命令吗？

> ID：15693947
> 
> 赞同：1
> 
> 时间：2013-03-28T23:29:32.077
> 
> 标签：activeadmin

我在 ActiveAdmin 中定义了一个自定义页面，就像这样

```
ActiveAdmin.register_page "Configure Account" do

page_action ....

content do
  panel "Your Account" do
    #render :partial => 'customer_edit'
    form(:autocomplete => "off", :url => admin_configure_account_path ) do |f|
      f.semantic_errors *f.object.errors.keys

      f.inputs "Customer Details" do
        f.input :name
      end
      f.actions
    end 
```

注意注释掉的“渲染部分”。

如果我使用它，我会得到一个在页面上看起来正确的表单，并且基本上可以按照我的预期运行，但是我必须在视图文件夹中有部分表单文件。

但是，如果我尝试使用

```
 form() do |f| 
```

语法，我得到的错误表明 f.actions 是一个未定义的方法， f.object.errors 是未定义的， f.inputs 是未定义的。

知道在这样的自定义页面的内容块中是否支持使用 form() 函数吗？可能不是，但我发现周围有一些提及似乎暗示它是。

# c# - BindingSource.Position 没有效果

> ID：15693948
> 
> 赞同：2
> 
> 时间：2013-03-28T23:29:37.983
> 
> 标签：c#, winforms, bindingsource

我在使用有关 Windows 窗体应用程序的代码时遇到了一些问题。我有一个表格，要求用户为数据库中的新记录输入一些数据。我可以在我的数据库中成功创建一个新的“订单”。完成此操作后，我想打开一个表单，向用户显示订单的所有详细信息。因此，我采用一个已经存在的窗口并希望 bindingSource 跳转到某个位置。我的代码如下：

“新订单”

```
//do stuff for the creation
//open a customerDetails window with the new entry
//resolve index of the new item
int newIndex = ordersBindingSource.Find("OrderID", newOrderID);
//create a new window and pass the index in the constructor
Order orderDetailsView = new Order(newIndex);
//show the new window and dispose the old one
orderDetailsView.Show();
this.Close();
this.Dispose(); 
```

我正在调用的“订单”构造函数：

```
public Order(int newIndex)
{
    //initialize
    InitializeComponent();
    //set index and repaint
    this.ordersBindingSource.Position = newIndex;
    this.ordersBindingSource.ResetCurrentItem();
} 
```

这根本行不通，我得到了数据集的第一个条目。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:12:20.950

你在哪里从“订单”初始化你的 BindingSource？确保你的 newIndex <= ordersBindingSource.Count()。

尝试这个：

```
 //Form Order
    int currentOrder = 0;

    //constructor
    public Order(int newIndex)
    {
        //initialize your variable here
        currentOrder = newIndex;

        //initialize
        InitializeComponent();
    }

    //Create a void method that sets the BindingSource position
    void SetupForm()
    {
         ordersBindingSource.Position = currentOrder;
    }

    // Override the OnLoad event and call the SetupForm() method here
    protected override OnLoad(EventArgs e)
    {
         SetupForm();
    } 
```

# php - PHP XML 编码正则表达式

> ID：15693949
> 
> 赞同：2
> 
> 时间：2013-03-28T23:29:40.043
> 
> 标签：php, xml, regex, urlencode

我需要找到一种方法来对 xml 标签中的值进行 urlencode，但使用 PHP 保持标签完整。也许可以使用正则表达式检查元素中没有标签的开始标签和结束标签。或者，最好在数据中查找介于两者之间`>`和之间`</`的数据。

```
<?xml version="1.0"?>
<catalog>
   <book>
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications with XML.</description>
   </book>
   <book>
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-12-16</publish_date>
      <description>A former architect battles corporate zombies, an evil sorceress, and her own childhood to become queen of the world.</description>
   </book>
</catalog> 
```

应该变成：

```
<?xml version="1.0"?>
    <catalog>
       <book>
          <author>Gambardella%2C+Matthew</author>
          <title>XML+Developer%27s+Guide</title>
          <genre>Computer</genre>
          <price>44.95</price>
          <publish_date>2000-10-01</publish_date>
          <description>An+in-depth+look+at+creating+applications+with+XML.</description>
       </book>
       <book>
          <author>Ralls%2C+Kim</author>
          <title>Midnight+Rain</title>
          <genre>Fantasy</genre>
          <price>5.95</price>
          <publish_date>2000-12-16</publish_date>
          <description>A+former+architect+battles+corporate+zombies%2C+an+evil+sorceress%2C+and+her+own+childhood+to+become+queen+of+the+world.</description>
       </book>
    </catalog> 
```

**编辑** 最后我改变了过程，消除了这个问题。

接受了答案，因为我可能会为其他人做这个把戏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:35:38.153

使用 DOMDocument / DOMXPath 非常简单。您可以只查询所有非空文本节点并使用 urlencoded 文本更新它们。

```
$dom = new DOMDocument;
$dom->loadXML($xml);
$xpath = new DOMXPath($dom);
foreach ($xpath->query('//text()[normalize-space()]') as $textNode) {
    $textNode->parentNode->replaceChild($dom->createTextNode(
        urlencode($textNode->nodeValue)), $textNode);
}
echo $dom->saveXML(); 
```

# powershell - 函数返回数据类型

> ID：15693952
> 
> 赞同：1
> 
> 时间：2013-03-28T23:30:04.373
> 
> 标签：powershell

我编写了一个函数，它将根据提供的参数创建一个 Active Directory 用户。用户创造精品；但是我遇到的问题是函数返回的数据。我只是想根据用户是否创建返回一个布尔响应。相反，它传回了一个数组。

函数示例：

```
 Function CreateUser () {
      param([string]$ParentDN, 
            [string]$FirstName,
            [string]$LastName,
            [string]$Username,
            [string]$EmailAddress,
            [string]$Password);

      Try {
        $UserOU = [ADSI] "LDAP://$LDAPServer/$ParentDN";
        $NewUser = $UserOU.Create("user","cn=$Username");
        $NewUser.Put("sAMAccountName","$Username");
        $NewUser.Put("givenName","$FirstName");
        $NewUser.Put("sn","$LastName");
        $NewUser.Put("UserPrincipalName","$Username@$NetworkFQDN");
        $NewUser.Put("mail","$EmailAddress");
        $NewUser.SetInfo();

        $NewUser.SetPassword("$Password");
        $NewUser.SetInfo();

        $flag = $NewUser.userAccountControl.Value -bxor 65536; #Password Never Expires flag
        $NewUser.userAccountControl = $flag;
        $NewUser.InvokeSet("AccountDisabled","False")  #Enables Account
        $NewUser.SetInfo();

        return $true;
      }
      Catch {
        return $false;
      }
    } 
```

我使用以下语法调用它：

```
 $CreateUserResults = CreateUser -FirstName $User_FirstName -LastName $User_LastName -EmailAddress $User_EmailAddress -ParentDN $User_ParentOU -Password $User_Password -Username $User_SamAccountName 
```

任何建议或方向将不胜感激。

谢谢，瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T00:34:21.140

我不在我可以测试的地方，但我怀疑这些`setinfo()`方法正在返回需要重定向的数据，`$null`以防止它被函数返回。

# firefox - Firefox 二进制扩展：nsISupports 到 JS::Value

> ID：15693955
> 
> 赞同：0
> 
> 时间：2013-03-28T23:30:22.800
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk, xpcom

我正在尝试实现 nsIDOMGlobalPropertyInitializer::Init()。

我有一个现有对象（基于 Google Gears），我正在尝试扩展它以支持 JAVASCRIPT_GLOBAL_PROPERTY_CATEGORY（因为 JAVASCRIPT_DOM_CLASS 似乎不再在 FF17 中工作）。

正在调用我的 nsIDOMGlobalPropertyInitializer::Init() 实现，但是如何将我的 C++ 对象（它实现 nsISupports 并公开适当的 IDL）转换为 JS:Value 以使我的对象在 Java Script 中可用？

如果我返回 NS_ERROR_NOT_IMPLEMENTED 或不实现 nsIDOMGlobalPropertyInitializer 接口，FF（正确地）抱怨对象没有公开任何方法或属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:20:58.717

您不必将对象转换为 JS:Value。如果你实现了像 nsISupports 这样的 XPCOM 接口，它们将在 JavaScript 中可用。从您的描述中不清楚您的对象究竟做了什么，但您可能必须在 IDL 中编写一个自定义接口并在您的对象中实现它。然后你可以通过这个接口在 JS 中操作它。您可能也应该实施[`nsISecurityCheckedComponent`](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISecurityCheckedComponent)and [`nsIClassInfo`](https://developer.mozilla.org/en-US/docs/nsIClassInfo)。

# php - 带有 range() 和 foreach 循环的 PHP 数字数组

> ID：15693956
> 
> 赞同：2
> 
> 时间：2013-03-28T23:30:26.850
> 
> 标签：php, arrays, foreach, range

我对 range() 有一个非常奇怪的问题；根据文档：

```
Create an array containing a range of elements 
```

但是当我这样做时：

```
foreach (range(900,950,1) as $art_id){
    //ob_start();
    //do stuff
    //do a lot more stuff
    echo $art_id;
    //ob_get_clean(); } 
```

甚至

```
$arts_id = range (900, 920);
 foreach ($arts_id as $art_id){
        //ob_start();
        //do stuff
        //do a lot more stuff
        echo $art_id;
        //ob_get_clean(); } 
```

输出奇怪地重复自己在一系列像

`"900,900,901,900,901,902,900,901,9002,903,900..."`

这意味着它在每个循环之后返回到第一个 ID。

```
(1st iteration -> 900
2nd iteration -> 900,901
3rd iteration -> 900,901,902
...) 
```

当我只是放置一个手动数组时，它可以完美地按顺序工作并且没有重复：

```
$arts_id = array(900,901,902,903,904,905,906,907,908,909,910...); 
```

我做错了什么（再次？？）

**编辑我**

这是整个脚本：

[http://pastebin.com/ZHm3ub6n](http://pastebin.com/ZHm3ub6n)

它实际上是[simplehtmldom](http://simplehtmldom.sourceforge.net)脚本中包含的 slashdot 抓取示例的略微修改版本。没什么特别的。

它在 WP 内部但在循环之外执行..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:36:30.673

它必须在您的代码的其余部分中，因为它可以正常工作。请分享更多脚本。

看起来 foreach 嵌套在类似的 foreach 中，

```
 $arts_id = range (900, 920);
 foreach ($arts_id as $art_id){
    foreach (range (900,$art_id) as $art_id2){
        echo $art_id2."<br/>";
    }
 } 
```

这会产生您描述的输出

**编辑**

我个人会添加函数 scraping_slashdot 重置变量 $ret 以防万一。

例如：$ret = 数组（）；

目前 $output 的回声在循环内，它会创建如下输出：

```
Article 1
Article 1, Article 2
Article 1, Article 2, Article 3
etc. 
```

将 echo $output 放在循环之外，或者 $ouptut = ''; 循环内。

# gnu-make - make 没有意识到相对路径名依赖与绝对路径名目标相同

> ID：15693957
> 
> 赞同：3
> 
> 时间：2013-03-28T23:30:35.117
> 
> 标签：gnu-make

以下是我遇到的问题的简化生成文件：

```
all: /tmp/makey/../filey
    @echo All done
/tmp/filey:
    @echo Filey 
```

当我运行 make 它说：

make-3.79.1-p7: ***没有将目标设为`/tmp/makey/../filey', needed by`全部的规则。停止。

显然它没有意识到 /tmp/makey/../filey 与 /tmp/filey 相同。有什么想法可以让我完成这项工作吗？

谢谢

Ciao——穆拉利

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T12:58:00.390

较新版本的 GNU make 具有`$(abspath ...)`和`$(realpath ...)`功能，您可以将其应用于先决条件和目标，以解析相同字符串的路径。如果您自己构建了这些名称（例如，`$(PREFIX)/../filey`），那么您可以`$(dir $(PREFIX))filey`改用。

除此之外，没有办法解决这个问题。Make 在目标上使用字符串匹配，如果字符串不相同，它们不匹配（有一种特殊情况可以忽略简单前缀`./`）即使 make 理解这种区别（可能通过将 abspath 本身应用于每个目标名称）它也会例如，面对符号链接仍然无济于事。

唯一“真正”的答案是让 make 了解有关底层文件系统（例如设备 ID 和 inode）的一些信息，让您在不提及文件路径名的情况下谈论文件。但是，在像 make 这样的可移植程序中，这样做是有问题的。

# c# - 浏览器未读取响应 cookie

> ID：15693958
> 
> 赞同：0
> 
> 时间：2013-03-28T23:30:39.723
> 
> 标签：c#, asp.net-mvc-3, browser

我正在创建一个带有值（如 Id）的 cookie，并将其添加到浏览器的响应上下文中。因此，当通过单击从我的应用程序中调用 www.abc.com 时，它会自动登录到 abc.com 网站。当我在不关闭窗口（www.abc.com）的情况下退出 abc.com 并尝试再次单击我的应用程序中的链接时，它正在创建一个具有新值的新 cookie，但它不会自动登录到 www.abc .com

但是当我从 www.abc.com 注销并关闭窗口（www.abc.com）并从我的应用程序中重新单击时，它让我自动登录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:23:32.040

@Alexis：感谢您指出。但我确实找到了答案。该会话已从以前的网站打开。由于没有关闭，当我再次单击链接时打开的新网站无法建立全新的会话。所以浏览器无法读取会话cookie。这就是为什么你总是必须关闭第一个。

但是谢谢你帮助我亚历克西斯。但我会记得从下一次开始在我的问题中添加更多数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T00:35:30.050

心灵感应能力：您正在从错误的域中删除 cookie（在 abc.com 上设置 cookie，但仅从 www.abc.com 中删除）。

确保设置和过期 cookie 调用的域相同（对 abc.com 域或域上的页面进行的两个调用都正确设置）。

# ajax - 跨域 Ajax 调用 EasyXDM

> ID：15693960
> 
> 赞同：1
> 
> 时间：2013-03-28T23:30:42.120
> 
> 标签：ajax, cross-domain, easyxdm

我正在尝试使用 EasyXDM 进行跨域 Ajax 调用，因为这显然支持 IE。

我有以下代码，它在文档中说您需要在另一个域上调用 cors 文件，但它提到您可以跳过该部分，我想跳过它，因为我无法在那里上传 cors 文件，他们无论如何都允许我的域出现在标题中。如何在不声明 cors 文件的情况下编写代码？

```
var xhr = new easyXDM.Rpc();

   var response;
            function getState(){
                xhr.request({
                    url: "http://somedomain.com/misc/promo_getstate.php",
                    method: "POST",
                    data: {
                        email: 'sofia@hotmail.com',
                      source: '1304_Spring_dly',
                      country: 'DE',
                    }
                }, function(response){
                    alert(response.status);
                   alert(response.data);
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T23:36:26.300

我知道这有点晚了，但您可能会发现此链接很有帮助（这是一篇专门关于使用 easyxdm 进行跨域 AJAX 的博客文章）：

```
http://easyxdm.net/wp/2010/03/17/cross-domain-ajax/ 
```

# sql - 复杂的 Postgres SQL 到 RoR ORM

> ID：15693961
> 
> 赞同：1
> 
> 时间：2013-03-28T23:30:42.953
> 
> 标签：sql, ruby-on-rails, postgresql, orm

环境：RoR 3.2 + Postgres

我创建了一个`services`具有 2 个文本属性的表：`title`和`description`

我要操作以下全文搜索：

```
SELECT * FROM (
        SELECT DISTINCT ON (s.id) s.*, 
            ts_rank_cd(s.service_tsv, query) AS rank 
        FROM to_tsquery('red | drawing | fun') AS query, 
            services AS s
        WHERE (s.service_tsv @@ query)
        ORDER BY s.id DESC
) AS sub ORDER BY rank DESC; 
```

SQL 语句就像一个魅力，但我如何将其转换为 Rails ORM：

```
Service.joins(???).where(???).uniq 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:13:38.537

```
Service.find_by_sql(%q{SELECT * FROM (
        SELECT DISTINCT ON (s.id) s.*, 
            ts_rank_cd(s.service_tsv, query) AS rank 
        FROM to_tsquery('red | drawing | fun') AS query, 
            services AS s
        WHERE (s.service_tsv @@ query)
        ORDER BY s.id DESC
) AS sub ORDER BY rank DESC}) 
```

此处指南[http://guides.rubyonrails.org/active_record_querying.html#finding-by-sql](http://guides.rubyonrails.org/active_record_querying.html#finding-by-sql)

# php - JSON 响应不解析，使用 Wordpress 和 AJAX

> ID：15693963
> 
> 赞同：0
> 
> 时间：2013-03-28T23:30:47.957
> 
> 标签：php, jquery, ajax, json, wordpress

我有一个使用 AJAX 设置的前端编辑器来编辑 Wordpress 中的帖子。一切顺利，我的表单提交到一个 php 文件，该文件成功更新数据库，然后使用以下函数创建响应：

```
 function generate_response($action, $message = '', $details = '' ){
    $response = array(
        "action"  => $action,
        "message" => $message,
        "details" => $details
        );

    echo json_encode($response, JSON_FORCE_OBJECT);
} 
```

但是，响应似乎没有正确编码，当我`jsonResponse`在 JS 中记录我的返回时，我得到了这个：

```
Object {action: "updated", message: "Succes (no changes detected).", details: ""} 
```

我很确定这是 malforemd JSON，因为`action`,`message`和`details`不是双引号，对吧？

我尝试解析响应，我得到的只是`null`：

```
 response = jQuery.parseJSON(jsonResponse);
  console.log(response); //returns null 
```

我在这里做错了什么？我是否正确并且响应没有正确格式化，如果是，我将如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:40:43.897

当您从 ajax 记录结果时，您会得到：

```
Object {action: "updated", message: "Succes (no changes detected).", details: ""} 
```

这已经是一个对象，而不是 JSON 字符串，这意味着您可能`dataType: 'JSON'`在 ajax 调用中设置，并且 JSON 由 jQuery 自动解析，再次解析它只会导致错误。

您需要做的就是使用响应，无需解析：

```
var action = response.action; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:55:10.710

@adeneo因此，当我运行查询以加载前5个帖子然后得到什么结果时，它们将被编码为json。我得到的输出将是一个对象而不是JSON字符串，对吗？

昨天花了几个小时进行 stringify - 只是为了将其转换为 json 假设 myoutput 是一个 json 字符串。

# cocoa-touch - UIImage 到原始 NSData / 避免压缩

> ID：15693965
> 
> 赞同：3
> 
> 时间：2013-03-28T23:30:56.033
> 
> 标签：cocoa-touch, uiimage, compression, core-graphics, nsdata

我有自己的图像下载器类，它包含一个队列并一次下载一个（或一定数量）图像，将它们写入缓存文件夹并在必要时从缓存文件夹中检索它们。我还有一个 UIImageView 子类，我可以将 URL 传递给它，通过图像下载器类，它会查看图像是否已经存在于设备上，如果存在则显示它，或者在完成后下载并显示它。

图像下载完成后，我执行以下操作。我从下载的 NSData 创建一个 UIImage，将下载的 NSData 保存到磁盘并返回 UIImage。

```
// This is executed in a background thread
downloadedImage = [UIImage imageWithData:downloadedData];
BOOL saved = [fileManager createFileAtPath:filePath contents:downloadedData attributes:attributes];
// Send downloadedImage to the main thread and do something with it 
```

要检索现有图像，我会这样做。

```
// This is executed in a background thread
if ([fileManager fileExistsAtPath:filePath])
{
    NSData* imageData = [fileManager contentsAtPath:filePath];
    retrievedImage = [UIImage imageWithData:imageData];
    // Send retrievedImage to the main thread and do something with it
} 
```

如您所见，我总是直接从下载的 NSData 创建 UIImage，我从不使用 UIImagePNGRepresentation 创建 NSData，因此图像永远不会被压缩。当您从压缩的 NSData 创建 UIImage 时，UIImage 将在主线程上渲染之前对其进行解压缩，从而阻塞 UI。由于我现在有一个 UITableView，其中包含大量必须从磁盘下载或检索的小图像，因此这是不可接受的，因为它会极大地减慢我的滚动速度。

现在我的问题。用户还可以从相机胶卷中选择一张照片，保存它，它也必须出现在我的 UITableView 中。但我似乎无法找到一种方法将 UIImage 从相机胶卷转换为 NSData 而不使用 UIImagePNGRepresentation。所以这是我的问题。

如何将 UIImage 转换为未压缩的 NSData，以便稍后使用 imageWithData 将其转换回 UIImage，以便在渲染前不必解压缩？

或者

有什么方法可以在将 UIImage 发送到主线程并将其缓存之前进行解压缩，因此只需解压缩一次？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T00:34:15.063

> 如何将 UIImage 转换为未压缩的 NSData，以便稍后使用 imageWithData 将其转换回 UIImage，以便在渲染前不必解压缩？

我认为您在这里真正要问的是如何将 UIImage 存储*在磁盘上*，以便您以后可以尽快*从磁盘读取 UIImage。*您并不关心它是否存储为 NSData；您只是希望能够快速阅读它。我建议你使用 ImageIO 框架。通过图像目标保存并稍后通过图像源获取。

[http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/ImageIOGuide/ikpg_dest/ikpg_dest.html](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/ImageIOGuide/ikpg_dest/ikpg_dest.html)

> 有什么方法可以在将 UIImage 发送到主线程并将其缓存之前进行解压缩，因此只需解压缩一次？

是的，好问题。那将是我的第二个建议：使用线程。这就是人们一直对桌子所做的事情。当桌子要求提供图像时，您要么已经拥有图像，要么没有。如果不这样做，则提供填充图像，并在后台获取真实图像。当真实图像准备好时，您已安排收到通知。回到主线程，您告诉表视图再次请求该行的数据；这次你得到了图像并提供了它。因此，用户将在图像出现之前看到轻微的延迟。我敢肯定，您已经看到很多这样的应用程序（《纽约时报》就是一个很好的例子）。

我还有一个建议，它可能是最好的。你说从磁盘解压缩图像需要时间。但是，如果图像很小，这根本不需要时间。但是图像*应该*很小，因为它会进入一个小地方 - 一个表格单元格。换句话说，您应该在第一次收到图像时*预先*缩小图像，以便在被问到时准备好每个图像的*小*版本。将要进入小空间的大图像提供给时间和内存是巨大的浪费。

稍后添加：当然，您确实明白，如果您不将图像保存到磁盘，那么很多这种担心都是不必要的。我完全不清楚你为什么需要这样做。我希望你有充分的理由；但显然，如果您只是将图像保存在内存中，那么它的速度要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T10:43:41.753

我找到了解决方案：

```
CGImageRef downloadedImageRef = downloadedImage.CGImage;
CGDataProviderRef provider = CGImageGetDataProvider(downloadedImageRef);
NSData *data = CFBridgingRelease(CGDataProviderCopyData(provider));
// Then you can save the data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T23:57:58.527

如果您下载数据并将其保存到磁盘，则数据将以 PNG、JPEG 或 GIF 格式压缩。您不会下载未压缩的图像数据。因此，在将文件保存到磁盘之前，需要先解决有关首先进行解压缩的问题的根源。在保存之前解压会使文件变大很多，但这意味着在将数据读回CGImageRef或UIImage之前不需要解压。加载然后解压缩一堆图像会减慢 CPU 的速度并使滚动变慢。但是，简单地将所有内容保存在已经解压缩的内存中并不是一个解决方案，因为这将耗尽您所有的应用程序内存并很快使您的手机崩溃。您也许可以通过少量图像摆脱它，但这是第一次编写代码时需要解决的基本设计缺陷。如果你喜欢，你可以看看我关于这个主题的博客文章[video-and-memory-usage-on-ios-devices](http://iosgraphicsanimation.wordpress.com/2013/06/11/video-and-memory-usage-on-ios-devices/)，该帖子处理视频，但是在处理许多不同的图像时您会遇到完全相同的问题。我建议您以 TIFF 或 BMP 等未压缩格式将小图像写入磁盘，这样只要 ImageIO 支持该特定格式，就可以轻松读取它们。

# c++ - 左移/右移添加零/一并删除第一位

> ID：15693966
> 
> 赞同：1
> 
> 时间：2013-03-28T23:30:59.063
> 
> 标签：c++, binary, shift

我必须编写一个接收的函数

*   一个二进制数，如`10001`, 和
*   一个十进制数，表示我应该执行多少班次。

问题是，如果我使用 C++ operator `<<`，零会从后面推，但第一个数字不会被丢弃......例如

> shiftLeftAddingZeroes(10001,1)

返回`100010`而不是`00010`那是我想要的。

我希望我已经说清楚了=P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:52:53.960

您想要的是移位，然后限制可以激活的输出位数（保持值为 1）。一种方法是为您想要的位数创建一个掩码，然后将移位值与该掩码相加。下面是一个代码示例，只需将 int_type 替换为您使用的值类型 - 或使其成为模板类型。

```
int_type shiftLeftLimitingBitSize(int_type value, int numshift, int_type numbits=some_default) {
    int_type mask = 0;
    for (unsigned int bit=0; bit < numbits; bit++) {
        mask += 1 << bit;
    }
    return (value << numshift) & mask;
} 
```

您`10001,1`现在的输出将是`shiftLeftLimitingBitSize(0b10001, 1, 5) == 0b00010`.

意识到除非你的 numbits 正好是你的整数类型的长度，否则你的数字的“前面”总是会有多余的 0 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:35:27.240

我假设您将该信息存储在 int 中。考虑到这个数字实际上比你看到的有更多的前导零，所以你的数字很可能是 16 位，意思是`00000000 00000001`. 也许尝试与具有与移位后想要的数字一样多的 1 的数字进行与运算？（假设您想坚持按位运算）。

# java - 新手：使用变量作为点运算符的 rhs 参数？

> ID：15693967
> 
> 赞同：0
> 
> 时间：2013-03-28T23:31:02.577
> 
> 标签：java

我有一个对象列表，我需要根据与 id 对应的随机用户输入来访问特定的对象。在这一点上，我有限的知识使我想到了类似的东西：

```
String id; 
if(id.equals("apple")){ //fixed silly error, thanks
    return objectList.id.memberName; 
} //etc... 
```

这是可能的，还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:33:11.603

听起来你想要一个[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)。

它就像电话簿一样工作——您输入键和值，然后使用键来查找值（就像您使用某人的名字在电话簿中查找他们的号码一样。）

您的示例也根本不起作用，因为您在 if 语句中使用 = ，这是一个赋值语句而不是相等性检查。== 是您可能想要得到的，但在这种情况下，您也不应该使用它 - 而是使用`.equals()`在涉及字符串时应该始终使用的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:40:03.440

```
HashMap<String, SomeValueObject> myMap = new HashMap<String, SomeValueObject>();
myMap.put("apple", value);
String id;
if (id.equals("apple")) {
    return myMap.get("apple");
} 
```

本质上，您实例化了一个包含两个部分的 HashMap；一个键和一个值（分别。当我这样做时`myMap.get("apple")`，它会搜索键“苹果”。我这样做`myMap.put("apple", value)`了，这使得键“苹果”被映射到您想要的某个值。

您还需要使用`id.equals("apple")`，因为 String 是一个对象，如果您尝试过`id == "apple"`（我认为您的意思是），它将无法工作，因为它不会比较 String 的值，而是比较它的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:35:17.893

@berry120 提供了一个实用的答案。一般来说，听起来您想根据某个键查找值。查看[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)接口以及 JDK 为具体实现提供了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T23:35:52.310

变量的*值*仅在运行时可用。另一方面，必须在编译时知道*变量名。*所以不，你不能完全按照你要求的方式做到这一点。使用 a`Map`可能是解决您的问题的最佳方法。

# regex - 正则表达式提取子字符串

> ID：15693968
> 
> 赞同：0
> 
> 时间：2013-03-28T23:31:07.200
> 
> 标签：regex, perl

您好我有一些 SQL 代码，我正在尝试解析和提取一些文本。

```
CREATE OR REPLACE VIEW the_view_name as 
```

`REPLACE VIEW`我想要和之间的文本`AS`不包括前导或尾随空格。

目前我得到了全部`/REPLACE\s*VIEW(.*?)\s*AS/gi`。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:36:16.710

尝试这样做：

```
 echo 'CREATE OR REPLACE VIEW the_view_name as' |
     perl -lne '/replace\s+view\s+(.*?)\s+as\b/i && print "[$1]"'
[the_view_name] 
```

您也可以在您的情况下使用此正则表达式：

```
/replace\s+view\s+(\S+)\s+as\b/i 
```

看[`perldoc perlrebackslash`](http://perldoc.perl.org/perlrebackslash.html)

```
\S : Character class for non whitespace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:36:16.337

您目前在 VIEW 之后缺少一个空格，如果您想要除空格之外的所有内容，那么您的捕获组应该是`([^\s]*)`，它将收集所有内容直到一个空格。

# java - lucene中的getTermFrequencyVector

> ID：15693970
> 
> 赞同：0
> 
> 时间：2013-03-28T23:31:23.410
> 
> 标签：java, indexing, lucene, cosine-similarity

我开始了解 lucene 函数 getTermFreqVector() 在计算两个文档之间的余弦 theta 相似性距离时是如何工作的。谁能阐明 getTermFreqVector(doc number, field-name) 中“字段名称”的含义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:42:27.673

像 lucene 这样的倒排索引以允许您按术语执行非常高效的搜索的方式对数据进行索引。您索引文档，它们是字段的集合。字段只是一个键值对：字段名，字段值。

您可以轻松检索包含特定单词的文档，但检索特定文档的所有索引术语变得更加困难，因为术语枚举是按字段存储的，而不是按文档存储的。术语向量克服了这个问题，允许存储每个文档的信息，以便您可以以高性能的方式检索它，付出拥有更大索引的代价。

回到您的问题：术语向量存储在每个文档、每个字段中，这就是为什么您必须同时提供文档 ID 和字段名称才能检索它的原因。

# ruby-on-rails - Aptana 项目类型不可用

> ID：15693972
> 
> 赞同：0
> 
> 时间：2013-03-28T23:31:27.510
> 
> 标签：ruby-on-rails, ruby, eclipse, eclipse-plugin, aptana

我最近为 Eclipse 安装了 Aptana 插件，因为我想学习 Ruby 和 Ruby on Rails，它似乎并没有改变任何东西。通常当我安装这种插件时，“新建项目”菜单下会有新的项目类型，但没有出现。我查看了在线教程，他们建议应该有新的项目类型，如下图所示，取自教程。 ![在此处输入图像描述](../Images/d772eadd47f2bf053bedefe44c1e44b9.png)

相反，我看到了与以前相同的选项。 ![在此处输入图像描述](../Images/be2e11c66488c1ffb6d308a47aa9e849.png)

我想知道是不是插件没有安装，但是当我再次尝试安装它时，它说它已经安装了。我正在使用带有 64 位 Windows 7 操作系统的 Eclipse Juno Service Release 2 以及来自 Aptana 网站 ( [http://download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install) ) 上给出的 URL 的插件版本。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:59:18.653

我不知道为什么会这样。这里有一个关于如何绕过它的建议。

您最好安装和运行独立的 Aptana Studio 产品。这将是您桌面上的单独安装，因此不会具有与您已经拥有的任何 Eclipse 安装相同的设置，并且会在您的硬盘驱动器上占用更多空间。但可能在 Ruby/Rails 开发和其他开发之间没有太多可以分享的东西，而且空间也不大。

我已经完成了这两种方式 - 将 Aptana 安装到我已经拥有的 Eclipse 中，并安装了独立版本 - 现在我只会做独立的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T00:21:18.490

我一开始不知道出了什么问题，但是在我安装了 Aptana 插件之后，我安装了 PyDev 插件。我认为这删除了 ​​Aptana 插件，因为存在冲突的依赖项（不过我不知道为什么它不会告诉我）。我尝试再次安装 Aptana 插件，它告诉我与 PyDev 插件存在冲突的依赖关系，所以我卸载了它并重新安装了 Aptana 插件。现在可以了。

# android - 禁用 Toast 的异步显示

> ID：15693973
> 
> 赞同：3
> 
> 时间：2013-03-28T23:31:31.210
> 
> 标签：android

假设你有一个`Button`，每当你点击它时，它就会显示一个`Toast`带有“ **Hello** ”的消息。如果您决定重复单击该`Button`20 次，则`Toast`s 将异步显示，等待每个轮到它。然而，这并不是我真正想要的。

我想要的是以下内容：每当我按下 时`Button`，我希望它取消先前显示`Toast`的并显示实际的。因此，当我关闭应用程序时，如果用户决定在很短`Toast`的时间内通过单击 100 次来弄乱应用程序，则不会显示任何 s 。`Button`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T23:33:51.403

您需要在类级别声明您的 Toast，然后在构造新的 Toast 对象并显示它之前调用 toast.cancel()。

```
public class XYZ extends Activity {

    Toast mToast;

    public void onCreate(Bundle b) {
    .....
    button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(mToast != null) 
                    mToast.cancel();
                mToast = Toast.makeText.....;
            }

        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T00:04:16.677

这是另一个解决方案。如果您只想防止显示多个 toast 以进行快速点击，那么 AlarmManager 和 PendingIntent 的组合也应该可以工作。现在请记住，我没有对此进行测试，也没有检查它是否可以编译。

```
AlarmManager mAlarm;
PendingIntent mPendingIntent;
//toast delay for a second
int toastDelay = 1000;

@Override
public void onCreate (Bundle savedInstanceState) {
   Intent i = new Intent(context, MySimpleBroadcastReceiver.class);

   //optionally set an action
   i.setAction("show:toast");

   mPendingIntent = PendingIntent.getBroadcast(context, 0, i, PendingIntent.FLAG_CANCEL_CURRENT);

   mAlarm = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
}

public void onClick(View v) {
   //set the alarm to trigger 1 second from current time
   mAlarm.set(AlarmManager.RTC_WAKEUP, (System.currentTimeMillis() + toastDelay), mPendingIntent);
}

@Override
protected void onDestroy () {
   if (mAlarm != null) {
      mAlarm.cancel(mPendingIntent);
   }
   mAlarm = null;
   mPendingIntent = null;
} 
```

创建广播接收器并记住将其添加到您的 AndroidManifest.xml 中：

```
public class MySimpleBroadcastReceiver extends BroadcastReceiver {
   @Override
   public void onReceive (Context context, Intent intent) {
      //optionally check the action that triggered the broadcast..useful if you want to use this broadcast for other actions
      if (intent.getAction().equals("show:toast")) {
         Toast.makeText(context, "Hello", Toast.LENGTH_SHORT).show();
      }
   }
} 
```

您可以阅读有关[**PendingIntent.FLAG_CANCEL_CURRENT**](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_CANCEL_CURRENT)的信息。

# android - SupportMapFragment 代替 MapFragment

> ID：15693975
> 
> 赞同：3
> 
> 时间：2013-03-28T23:31:37.117
> 
> 标签：android, google-maps-android-api-2, supportmapfragment

我想制作一个使用 Google Maps for Android v2 的 android 应用程序。

我可以显示地图。我什至可以导航和缩放。但是，当我想搜索更多操作时，我找不到任何操作。

我希望这个应用程序能够在 API 级别 8 及更高级别上运行。所以，我用了`SupportMapFragment`. 我听说，如果我想让我的应用程序在 API 8 级或更高级别上运行，我必须使用`SupporMapFragment`.

我找到了关于 s 的例子`MapFragment`，但不幸的是，没有关于`SupportMapFragment`.

我想让这些操作在我的应用程序中工作，但是，它们正在使用`MapFragment`：

[一](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

[二](http://www.androidhive.info/2012/01/android-working-with-google-maps/)

有没有办法做诸如“添加标记”、“显示我的当前位置”和“获取我点击的点的位置”之类的事情？（`SupportMapFragment`当然使用 。）

已经非常感谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T23:49:48.733

> 有没有办法做诸如“添加标记”、“显示我的当前位置”和“获取我点击的点的位置”之类的事情？（当然是使用 SupportMapFragment。）

是的。

第 1 步：将 Android 支持包添加到您的应用。

第 2 步：让您的活动`FragmentActivity`从 Android 支持包继承。

步骤 #3：将所有`MapFragment`引用（Java 代码和布局 XML 资源）更改为`SupportMapFragment`.

你完成了。

我的所有[Maps V2 示例](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2)都使用`SupportMapFragment`, 与 ActionBarSherlock 结合使用（这就是为什么您会看到`SherlockFragmentActivity`与`FragmentActivity`.

# floating-point - awk 打印整数而不是浮点数

> ID：15693976
> 
> 赞同：0
> 
> 时间：2013-03-28T23:31:37.250
> 
> 标签：floating-point, awk

我希望以下 awk 脚本将 gpa 打印为浮点数。所以文件 my_course.txt 中的文本看起来像

```
CSC3320,SYSTEM LEVEL PROGRAMMING,3,1,A
CSC3210,ASSEMBLY LEVEL PROGRAMMING,3,1,B 
```

它应该检查字段 4 中的数字是否为 1，如果是，则根据字段 3 时间字段 5 是否为 A、B 或 C 乘以 4、3 或 2。然后将此值添加到分子。对于分母，它只会将字段 3 的值添加到变量分母中。然后在 END 中，它将这两个数字相除并给出输出。但是，使用上面的文本，它将为上面的文本输出 3 而不是 3.5。我假设 awk 中的所有数字都是浮点数，所以这是怎么回事。

```
calculate(){  
  awk -F, '  
  BEGIN{printf "Your GPA is : "}  
  numerator = 0.0;  
  denominator = 0.0;  
  /^CSC/{  
    if($4=1) {  
         if($5=="A"){  
            numerator+=(4.0*$3);  
            denominator+=$3;  
         } else if ($5 == "B"){  
            numerator+=(3.0*$3);  
            denominator+=$3;  
         } else if ($5 == "C"){  
            numerator+=(2.0*$3);  
                denominator+=$3;  
         } else {  
           ;   
        }  
     }  
   }  
   END{print(numerator/denominator)}  
  ' my_course.txt  
} 
```

使用

```
END{printf "%g", (numerator/denominator)} 
```

打印 3

```
END{printg "%f", (numerator/denominator)} 
```

打印 3.000000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:40:54.490

您的脚本每次都会初始化`numerator`和值。`denominator`所以第二次的结果将是`numerator=3*B`, `denominator+=3`。所以结果是 3。我假设你想对这些值求和，所以结果是`numerator=3*A+3*B`, `denominator=6`，即 (12+9)/6。另一方面，在`if`条件您分配一个值`$4`而不是检查（！）它的值。所以它永远都是真的。无论如何，`if`使用散列进行字母到值的转换可以大大减少。所以一个可行的解决方案可以是：

```
awk -F, 'BEGIN{printf "Your GPA is : ";V["A"]=4;V["B"]=3;V["C"]=2}
  /^CSC/ && $4==1 && $5~/^[A-C]$/ {numerator+=V[$5]*$3;denominator+=$3}
  END{print numerator/denominator}' <<EOT
CSC3320,SYSTEM LEVEL PROGRAMMING,3,1,A
CSC3210,ASSEMBLY LEVEL PROGRAMMING,3,1,B
EOT 
```

输出：

```
Your GPA is : 3.5 
```

# ios - IB 实例化 UIScrollView 不滚动

> ID：15693978
> 
> 赞同：0
> 
> 时间：2013-03-28T23:31:41.633
> 
> 标签：ios, uiscrollview

是的，我已经设置了内容大小。当我执行 contentsize 的 NSLog 时，我得到的高度为 0，宽度为 0，这有点令人困惑。好像我的滚动视图实际上并不存在。

我想我设置滚动视图错误。

在 IB 中，我有一个具有滚动视图的视图控制器子类，滚动视图内部是其他标签/视图/等。

滚动视图是否需要有一个管理“实际”子视图之类的子视图？

当我在滚动视图上运行 NSLog 时，它会出现：

```
Scrollview: <UIScrollView: 0x81b2960; frame = (0 0; 0 0); clipsToBounds = YES; autoresize = TM+BM; gestureRecognizers = <NSArray: 0x81b2dc0>; layer = <CALayer: 0x81b7390>; contentOffset: {0, 0}> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:43:20.330

滚动视图*不需要*有一个主子视图。我会向你忘记连接应该指向 xib 文件中的 UIScrollView 的 IBOutlet 的甜甜圈打赌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:49:55.650

好的，我想通了，我需要在 viewDidAppear 方法中而不是在 viewDidLoad 方法中包含 contentsize 代码。这很奇怪，因为正在进行其他更改，而不是这个。去搞清楚

# ruby-on-rails - 如何使用 Paperclip 裁剪临时图像并将其存储在 Rails 3 中的 Amazon S3 中

> ID：15693979
> 
> 赞同：1
> 
> 时间：2013-03-28T23:31:44.063
> 
> 标签：ruby-on-rails, paperclip, crop, temporary-files, jcrop

我在尝试用回形针做一些不寻常的把戏时遇到了很大的麻烦。这是我的情况：我的应用程序用户有一个头像图像，我的想法是让他们通过 Jcrop 裁剪他们的头像。我的应用程序托管在 Heroku 中，因此我必须将图像上传到 Amazon S3。我使用这个流行的[railscast](http://railscasts.com/episodes/182-cropping-images?view=asciicast)来实现裁剪功能，但它需要处理两次图像。这是问题开始的地方。

我认为一个可行的解决方案可能不是第一次处理图像（当用户选择图像时），而是第二次处理。我已经在我的控制器中实现了这段代码：

```
 def change_avatar
      @user = current_user
      paperclip_parameters = params[:user][:avatar] #first time call

      if @temp_image_object.present? || params[:avatar].present?
        if check_crop_params  #second controller call
          @user.avatar = File.new(@user.tmp_avatar_path) #overrides the 
          redirect_to @user, notice: t("messages.update.user.avatar") if @user.save
        else    #first controller call
          @temp_path = @user.generate_temp_image(paperclip_parameters)
          @user.tmp_avatar_path = @new_path #store the custom path to retrieve it in the second call
          render :action => 'avatar_crop' if @user.save
        end
      end
    end

    def check_crop_params
      !params[:user][:crop_x].blank? && !params[:user][:crop_y].blank? && !params[:user][:crop_w].blank? && !params[:user][:crop_h ].blank?
    end 
```

在我的用户模型中：

```
 #this method copies the original image tempfile when user upload the image to a custom path and returns the custom path
  def generate_temp_image(paperclip_parameters)
    uploaded_img_path = uploaded_img.tempfile.path

    temp_dir = Rails.root.join('public/tmp')
    Dir.mkdir(temp_dir) unless Dir.exists?(temp_dir)

    FileUtils.cp(uploaded_img.tempfile, temp_dir)

    new_path = uploaded_img_path
  end 
```

我还有 jcrop 的自定义处理器，它在处理图像时采用裁剪变量。当我上传图像（第一个控制器调用）时，change_avatar 方法运行良好，但是当我裁剪图像（第二个控制器调用）时，图像没有被裁剪，回形针创建图像样式文件，但忽略了我所做的裁剪。

有任何想法吗？我该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:11:30.857

我忘记了一个小细节..查看服务器日志我意识到回形针过程没有裁剪图像，所以我查看了我的自定义处理器，我发现它取决于裁剪参数：crop_x、crop_y、crop_w、作物_h。由于某种原因，这个参数没有到达处理器，所以图像永远不会被裁剪。我所要做的就是手动将此参数分配给用户变量，它可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T16:50:27.100

最好的策略是直接上传原始上传到 s3。[本教程](http://odysseyonrails.com/articles/11)有一个示例，讲述上传到 S3 后如何运行回形针后处理方法。它还讨论了如何避免 Heroku H12 错误，以防 S3 上的后处理时间过长。

你也可以看看[这篇文章](http://odysseyonrails.com/articles/10)。它有一个使用回形针和 jcrop 的演示代码。

# html - 如何摆脱额外的行 element

When display the same content in textarea element and pre element, the results will be different. textarea has one more line than pre.

```
<textarea>H</h1>
<blockquote>
        <p>ID：15693980</p>
        <p>赞同：1</p>
        <p>时间：2013-03-28T23:31:44.483</p>
        <p>标签：html, textarea</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：1</p>
            <p>时间：2013-03-28T23:35:05.840</p>
            </blockquote>

<p>添加<code>rows</code>属性如</p>

<pre><code><textarea rows="1">Hello</textarea>
</code></pre>

<p>将指示浏览器仅呈现 1 行。</p>

</body>
</html></textarea>
```

# authentication - 作为 Azure ACS 身份提供者的 Live Connect

> ID：15693988
> 
> 赞同：0
> 
> 时间：2013-03-28T23:32:58.507
> 
> 标签：authentication, acs, liveconnect

我使用 Azure ACS 作为我的应用程序的联合网关，我允许用户使用 Google、Yahoo 和 Windows Live ID 进行身份验证。我需要用户的电子邮件地址。Google 和 Yahoo 提供电子邮件，但 Windows Live ID 不提供。

如果用户使用 Live Connect 进行身份验证，但 Azure ACS 中没有可用的 Live Connect 身份提供程序，我可以获得用户的电子邮件地址。有什么方法可以将 Live Connect 配置为 ACS 中的身份提供者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:05:39.120

不，ACS 目前不支持 Live Connect。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T18:07:12.047

似乎有一种方法，有点复杂，但是通过成为代理并使用实时连接 API，您可以实现此功能。

请参阅：[http ://code.msdn.microsoft.com/windowsazure/Get-Azure-ACS-work-40d588cc#content](http://code.msdn.microsoft.com/windowsazure/Get-Azure-ACS-work-40d588cc#content)

# concurrency - 在 Clojure 中处理同时发生的重复事件

> ID：15693989
> 
> 赞同：3
> 
> 时间：2013-03-28T23:32:58.953
> 
> 标签：concurrency, clojure, event-handling

我正在尝试处理重复的事件（MIDI 音符开和音符关信号一式三份）。似乎使用代理和锁定工作，除非事件（几乎）同时发生。

这是一个例子：

```
(def test-val (agent 0))
(def allow-update (agent true))

(defn increase-val []
  (locking allow-update
    (when @allow-update 
      (send allow-update (fn [_ x] x) false)
      (send test-val + 1)))
  (print @test-val))

(defn run-futures [delay-time]
  (send allow-update  (fn [_ x] x) true)
  (send test-val * 0)
  (dotimes [_ 20] 
    (Thread/sleep delay-time)
    (future (increase-val)))) 
```

如果我在对 increase-val 的调用之间稍有延迟对其进行测试：

```
(run-futures 2)
;outputs 0111111111111111111 every time, as expected 
```

但是，如果我让所有对 increase-val 的调用同时发生：

```
(run-futures 0)
;001222222222222222
(run-futures 0)
;000000145555555555
(run-futures 0)
;000000013677777777 
```

似乎锁没有时间打开，因此代理增加了多个期货。

我希望我在这里遗漏了一些东西，可以让我确保我不会对重复的同时发生的事件采取行动。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T00:05:14.480

由于**代理是异步且不协调**的，因此在您向它们发送消息和实际运行所发送的操作之间可能会有延迟。在此延迟期间，大多数或所有调用都可能`(send test-val + 1)`在第一个实际运行并将@allow-update 设置为false 之前通过锁定部分。在 test-val 的状态发生变化之前，您可以在前导 0 中看到这一点。

atom 可能更适合与锁交互，尽管 refs 可能是协调访问多个身份的正确工具。

# audio - 用手机测量分贝

> ID：15693990
> 
> 赞同：6
> 
> 时间：2013-03-28T23:33:03.263
> 
> 标签：audio, meter

大家晚上好！

我有以下麻烦：我正在尝试使用手机的麦克风测量（声音的）分贝，但不知道为什么它不起作用！！！有什么建议吗？谢谢你的帮助！！

程序是这样的：

```
`package com.dani;

import java.io.IOException;

import android.media.MediaRecorder;
import android.os.Bundle;
import android.app.Activity;

import android.widget.TextView;

public class Pruebita2 extends Activity {

TextView TextView;
StringBuilder builder=new StringBuilder();
MediaRecorder  mRecorder;
double powerDb;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.pruebita2);
TextView=new TextView(this);
setContentView(TextView);

mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mRecorder.setOutputFile("/dev/null"); 
try {
    mRecorder.prepare();
} catch (IllegalStateException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
mRecorder.start();

}
public double getAmplitude() {
if (mRecorder != null)
        return  (mRecorder.getMaxAmplitude());
else
        return 0;

}
 powerDb = 20 * log10(getAmplitude() / referenceAmp);//obtain the DECIBELS
}` 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T12:14:50.773

这段代码对我有用：

```
import android.app.Activity;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.widget.TextView;

public class Noise extends Activity {

TextView mStatusView;
MediaRecorder mRecorder;
Thread runner;
private static double mEMA = 0.0;
static final private double EMA_FILTER = 0.6;

final Runnable updater = new Runnable(){

    public void run(){          
        updateTv();
    };
};
final Handler mHandler = new Handler();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.noiselevel);
    mStatusView = (TextView) findViewById(R.id.status);

    if (runner == null)
    { 
        runner = new Thread(){
            public void run()
            {
                while (runner != null)
                {
                    try
                    {
                        Thread.sleep(1000);
                        Log.i("Noise", "Tock");
                    } catch (InterruptedException e) { };
                    mHandler.post(updater);
                }
            }
        };
        runner.start();
        Log.d("Noise", "start runner()");
    }
}

public void onResume()
{
    super.onResume();
    startRecorder();
}

public void onPause()
{
    super.onPause();
    stopRecorder();
}

public void startRecorder(){
    if (mRecorder == null)
    {
        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mRecorder.setOutputFile("/dev/null"); 
        try
        {           
            mRecorder.prepare();
        }catch (java.io.IOException ioe) {
            android.util.Log.e("[Monkey]", "IOException: " + 
android.util.Log.getStackTraceString(ioe));

        }catch (java.lang.SecurityException e) {
            android.util.Log.e("[Monkey]", "SecurityException: " +   
android.util.Log.getStackTraceString(e));
        }
        try
        {           
            mRecorder.start();
        }catch (java.lang.SecurityException e) {
            android.util.Log.e("[Monkey]", "SecurityException: " +    
android.util.Log.getStackTraceString(e));
        }

        //mEMA = 0.0;
    }

}
public void stopRecorder() {
    if (mRecorder != null) {
        mRecorder.stop();       
        mRecorder.release();
        mRecorder = null;
    }
}

public void updateTv(){
    mStatusView.setText(Double.toString((getAmplitudeEMA())) + " dB");
}
public double soundDb(double ampl){
    return  20 * Math.log10(getAmplitudeEMA() / ampl);
}
public double getAmplitude() {
    if (mRecorder != null)
        return  (mRecorder.getMaxAmplitude());
    else
        return 0;

}
public double getAmplitudeEMA() {
    double amp =  getAmplitude();
    mEMA = EMA_FILTER * amp + (1.0 - EMA_FILTER) * mEMA;
    return mEMA;
}

} 
```

# php - 奇怪的行为 ob_start。小花

> ID：15693994
> 
> 赞同：0
> 
> 时间：2013-03-28T23:33:37.327
> 
> 标签：php, kohana, ob-start

首先我很抱歉我的英语不好。所以在 localhost 上一切都很好，但在 Web 服务器上显示带有符号的难以理解的数字，例如`326e`.

好像找到了问题点..只有什么问题我看不懂..问题出在方法上，在->`init`里面调用，这个方法在文件里`bootstrap.php``Kohana::init``\system\classes\Kohana\Core.php`

我所有的错线

```
// Start an output buffer
ob_start(); 
```

如果你`echo ' ';` 在这一行之前写，这些奇怪的字符将不会显示如果你写`echo 'test'`只会在屏幕上显示单词`test` If echo 'test' write buffer start then you will see a "strange_symbols test" .. 任何人都有想法那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:19:57.160

此错误报告 dev.kohanaframework.org/issues/4661 解决了问题