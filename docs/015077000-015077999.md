# StackOverflow 问答 15077000-15077999

# ruby - Sinatra 中的子路由

> ID：15077000
> 
> 赞同：0
> 
> 时间：2013-02-25T21:39:34.620
> 
> 标签：ruby, routing, sinatra

有没有一种方法可以将不同的控制器映射到彼此相关的 url，特别是当一个是另一个的子资源时？

更具体地说，这里有一个例子：

1.  我有 2 种类型的资源：`jobs`和`articles`. A`job`包含多个`articles`. 尽管他们有关系，但我想在单独的文件中处理与每个相关的实际代码。因此，我有：

`helpers/job_api.rb`和

`helpers/article_api.rb`

它们每个都像这样扩展 SinatraBase：

```
class ArticleAPI < Sinatra::Base
  register Sinatra::Async

  get '/list' do
  #...
  end
end 
```

我现在想要的是将所有属于作业的 url 请求映射到只`JobAPI`属于文章的那些（但仍然始终与单个作业相关联到`ArticleAPI`.

我的`config.ru`样子是这样的：

$LOAD_PATH << '.' 需要“服务器”

```
map "/" do
  run Sinatra::Application
end

map "/job" do
  run JobAPI
end

map "/job/:job_id/article" do
  run ArticleAPI
end 
```

但是当我尝试转到 url 时，这不起作用`/job/12/article/list`。

任何人都知道是否有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:06:55.973

在您的`config.ru`文件中执行的代码是针对[Rack](https://github.com/rack/rack)的，它**没有与**[Sinatra](http://www.sinatrarb.com/intro.html#Routes)相同的路由语法。意思是这段代码：

```
map "/job/:job_id/article" do
  run ArticleAPI
end 
```

可能无法在内部工作，`config.ru`因为 Rack 不像 Sinatra 那样处理路径中的参数。

# javascript - ExtJS 仅编辑网格单元，它是新的

> ID：15077009
> 
> 赞同：4
> 
> 时间：2013-02-25T21:39:55.087
> 
> 标签：javascript, extjs

我有一个网格：

```
Ext.create('Ext.grid.Panel', {
    id: 'grid',
    store: this.store,
    columns: [{
        dataIndex: 'a'
    },{
        dataIndex: 'b'
    },{
        dataIndex: 'c'
    }],
    selModel: {
        selType: 'cellmodel'
    },
    plugins: [cellEditing]
}) 
```

其中使用 cellEditting：

```
var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
    clicksToEdit: 1,
    listeners: {
        beforeedit: function(obj) {
                // Something goes here?
        }   
    }
}); 
```

现在，有“添加行”到网格的按钮，因此记录可能是新的或旧的。

*   如果将**新**行添加到商店/面板中，我需要列`b`并且`c`可以编辑。
*   如果用户试图编辑在创建面板时简单地从数据库加载的**现有**行，我只需要`c`可编辑列。

我怀疑我需要向`beforeedit`侦听器添加一些东西，但是我对 ExtJS 和 javascript 一般是新手，所以我不知道如何描述这些条件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:36:54.317

你肯定在正确的轨道上。'beforeedit' 事件允许您通过返回 false 来阻止编辑操作。如果您查看它的文档，您会看到您收到一个对象，该对象提供有关单元格的所有所需信息：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid .plugin.CellEditing-event-beforeedit](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing-event-beforeedit)

```
var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
    clicksToEdit: 1,
    listeners: {
        beforeedit: function(editor, event, opts) {
            if (!event.record.phantom && event.column.dataIndex == 'columnC') {
                return false;
            }
        }   
    }
}); 
```

phantom 是一个记录属性，用于了解记录是新创建的（尚未同步到服务器）还是最初与存储中的所有其他记录一起加载。

# c# - 如何知道行值sql server asp.net？

> ID：15077015
> 
> 赞同：0
> 
> 时间：2013-02-25T21:40:28.070
> 
> 标签：c#, asp.net, sql-server

我几天前发布了这个[如何在插入gridview之前知道一行的值？](https://stackoverflow.com/questions/15041973/how-to-know-a-rows-value-before-its-inserted-in-gridview) 我得到了这个答案

```
SqlCommand cmdEvent = new SqlCommand("SELECT COUNT(date) FROM patients WHERE date= '2012/02/23'", yourSqlConnection);
object myCount;
if (yourSqlConnection.State == ConnectionState.Closed){ yourSqlConnection.Open(); }
myCount = cmdEvent.ExecuteScalar();
if (yourSqlConnection.State == ConnectionState.Open){ yourSqlConnection.Close(); }

if (myCount != null)
{
  if ((int)myCount >= 10)
  {
    // Logic here e.g myLabel.Text = "You have reached your maximum of 10 visits!";
    return;
  }
} 
```

但是现在我在插入之前不需要一行的值，相反，我需要知道 2 行的值，我不知道该怎么做。我正在尝试登录，我需要用户的 id 来使会话唯一，但我还需要验证该查询是否返回 true，并且我按照以下方式进行操作：

```
comando = new SqlCommand("SELECT user_name FROM login WHERE user_name=@user AND pass=@pass", conexion);
comando.Parameters.AddWithValue("@pass", Upass);
comando.Parameters.AddWithValue("@user", user);
object check_coincidence = comando.ExecuteScalar();

if ((string)check_coincidence == user)
{
     Session["USER"] = check_coincidence;
     Response.Redirect("someURL")
} 
```

但我不知道如何获取用户 ID 以使会话唯一，我的意思是，将该值作为新会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:56:29.120

要从查询中获得更多结果，您必须使用 SqlReader。

```
comando = new SqlCommand("SELECT user_name, user_id FROM login WHERE user_name=@user AND pass=@pass", conexion);
comando.Parameters.AddWithValue("@pass", Upass);
comando.Parameters.AddWithValue("@user", user);

 SqlDataReader reader = commando.ExecuteReader();
        while (reader.Read())
        {
            var userName = Convert.ToString(reader["user_name"]);
            var userId = Convert.ToInt32(reader["user_id"]); 
        } 
```

我建议遵循一些关于此的教程，这将有助于理解 Sql 类。例如检查这个： http: [//csharp-station.com/Tutorials/AdoDotNet/Lesson03.aspx](http://csharp-station.com/Tutorials/AdoDotNet/Lesson03.aspx)

# python - 在 Python 中创建带有子目录的目录的嵌套 While 循环

> ID：15077024
> 
> 赞同：0
> 
> 时间：2013-02-25T21:41:03.220
> 
> 标签：python, directory

我正在尝试编写一个嵌套的 while 循环，它将创建 n 个带有 n 个子目录的文件夹。我当前代码的问题是创建的第一个文件夹不包含子目录。只有第二个目录包含子目录。我的目标是编写一个使用地下水建模软件运行参数扫描的程序，我需要这些目录来保存结果。

```
import subprocess, os

i = 1
j = 1
while i <= 2:
    path = r'C:/Users/TEvans/Desktop/Testing/slope%d' % i 
    if not os.path.exists(path): os.makedirs(path)
    os.chdir(path)
    i = i+1
    while j <= 3:
        path1 = r'C:/Users/TEvans/Desktop/Testing/slope%d/r%d' % (i, j)
        if not os.path.exists(path1): os.makedirs(path1)
        j = j+1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:06:02.660

您的某些代码是多余的，并且（正如其他人所提到的）这会使`while`您的数学感到困惑。

这是一个更简单，几乎等效的版本：

```
import os
for i in (1,2):
  for j in (1,2,3):
    path1 = r'C:/Users/TEvans/Desktop/Testing/slope%d/r%d' % (i, j)
    if not os.path.exists(path1): os.makedirs(path1) 
```

*   我删除了`os.makedirs()`对外部循环的调用，因为这些目录将由内部循环的`os.makedirs()`.

*   我修正了两者的数学`i`并`j`反映了我相信你的意图。

*   我删除了对的调用，`os.chdir()`因为您使用的是绝对路径，并且调用似乎是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:44:59.847

第一次`os.makedirs(path1)`调用的时间`i`已经增加。如果你使用了一个 for 循环，那么代码不仅会更干净而且更正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:48:14.887

您的问题是`i`在进入内部 while 循环之前已经递增，您可以通过移动该`i = i+1`行来解决此问题，使其成为`while i <= 2`循环中完成的最后一件事。

然而，更好的解决方案是只使用一个 for 循环：

```
for i in range(1, 3):
    path = r'C:/Users/TEvans/Desktop/Testing/slope%d' % i 
    if not os.path.exists(path): os.makedirs(path)
    os.chdir(path)
    for j in range(1, 4):
        path1 = r'C:/Users/TEvans/Desktop/Testing/slope%d/r%d' % (i, j)
        if not os.path.exists(path1): os.makedirs(path1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T21:50:02.600

问题在于循环结构。这应该可以解决问题：

```
import subprocess, os

for i in range(0,2):
    path = r'C:/Users/TEvans/Desktop/Testing/slope%d' % i 
    if not os.path.exists(path): os.makedirs(path)
    os.chdir(path)
    for j in range(0,3):
        path1 = r'C:/Users/TEvans/Desktop/Testing/slope%d/r%d' % (i, j)
        if not os.path.exists(path1): os.makedirs(path1) 
```

'for' 构造确保变量仅在整个代码块执行后才递增，而不是介于两者之间，就像代码片段中的情况一样。

# java - 如何使用 launch4j 创建 Windows 服务？

> ID：15077025
> 
> 赞同：4
> 
> 时间：2013-02-25T21:41:10.370
> 
> 标签：java, launch4j

我正在使用 launch4j 创建和执行 java 应用程序。如何将其配置为作为 Windows 服务加载？

使用[Jsmooth](http://jsmooth.sourceforge.net/)我可以设置包装器，但我不知道这是否可以在 launch4j 中完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T14:53:31.197

在此比较中，launch4j 似乎无法完成“作为 Windows 服务运行”：http: [//yajsw.sourceforge.net/#mozTocId284533](http://yajsw.sourceforge.net/#mozTocId284533)

您可以使用其他程序来执行此操作，例如：Java Service Wrapper、Apache Commons Daemon...

# ios - UISwitch 在离开视图控制器时不保持其值

> ID：15077038
> 
> 赞同：0
> 
> 时间：2013-02-25T21:41:48.910
> 
> 标签：ios, objective-c, uiviewcontroller, uiswitch

如果我将`UISwitch`控制器切换到“关闭”并离开视图控制器并返回到视图控制器，它将显示`UISwitch`“打开”（默认值）而不是“关闭”。从视图控制器切换到视图控制器时，如何保存 UISwitch 控制器的值？

```
- (void)controlsEnabled:(BOOL)enabled
{
    self.onandoffSwitch.enabled = enabled;   
    if (enabled)
    {
        NSLog(@"ON");    
    }
    else
    {
        NSLog(@"OFF");     
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T21:52:58.637

您需要以某种方式保持设置。这是一个使用示例`NSUserDefaults`：

```
[[NSUserDefaults standardUserDefaults] setBool:yourSwitch.on forKey:@"switchValue"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

并在再次加载视图层次结构时阅读它：

```
NSUserDefaults *preferences = [NSUserDefaults standardUserDefaults];
BOOL state = [[NSUserDefaults standardUserDefaults] boolForKey:@"switchValue"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:45:22.083

开关状态不持久的最可能原因是您正在创建控制器的新实例（具有默认开关状态），而不是回到您最初来自的那个实例。如果您使用转场，它们总是在您执行时实例化新控制器（展开转场除外）。当您解除它们时，模态呈现的控制器也会被释放，除非您在某处保持对它们的强烈引用。因此，如何使交换机保持其状态取决于您是否要返回到同一个实例，以及您如何去做。

# google-app-engine - 在 Ubuntu 上安装 google-app-engine-launcher 时 wx-python 版本不正确

> ID：15077039
> 
> 赞同：0
> 
> 时间：2013-02-25T21:41:50.720
> 
> 标签：google-app-engine, wxpython, ubuntu-12.04, launcher

我正在尝试在 Ubuntu 12.04 上安装 google-app-engine-launcher

按照手册，我将启动器安装在 google-appengine-wx-launcher-read-only 目录中。

命令 python GoogleAppEngineLauncher.py 给出以下结果： wxPython 版本不正确；是 2.6，必须是 2.8

我按照教程（[http://wiki.wxpython.org/InstallingOnUbuntuOrDebian](http://wiki.wxpython.org/InstallingOnUbuntuOrDebian)）安装并设置了 wxPython 2.8，但我仍然收到相同的消息：wxPython 版本不正确；是 2.6，必须是 2.8

我检查了突触，仍然安装了 2.6 模块，我怀疑但不知道它是否用于某些用途。如果它已过时，我不知道如何将其删除。有没有办法让它工作？

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:41:51.403

您应该可以使用 Ubuntu 的包管理器将其删除。或者，您可以使用 wxversion 选择要使用的 wx 版本：[http ://wiki.wxpython.org/MultiVersionInstalls](http://wiki.wxpython.org/MultiVersionInstalls)

如果你知道 Python 的安装位置，你可以进去并从 site-packages 中删除 wx 文件夹。您可能还需要编辑 PATH。这篇文章可能相关：[http](http://forums.wxwidgets.org/viewtopic.php?f=27&t=3948) ://forums.wxwidgets.org/viewtopic.php?f=27&t=3948 （是关于wxWidgets的，不过流程应该差不多）。

如果这些都不起作用，请在 wxPython 列表中询问。他们可以提供帮助！

# apache - .htaccess：对静态客户端不太具体，但对 API 更具体，mod_rewrite

> ID：15077040
> 
> 赞同：0
> 
> 时间：2013-02-25T21:41:58.427
> 
> 标签：apache, .htaccess, mod-rewrite

我想要的是这样的情况：

`http://example.com/api/whatever`将指向处理 JSON 的 PHP API。

`http://example/whatever`将指向单个静态 HTML 文件，该文件使用前端路由来决定显示什么。

这可能吗？我不确定如何让不太具体的规则指向单个文件并仍然允许它`/api/`工作。这是我目前的 .htaccess 文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule .* client/index.html [L]

RewriteCond %{REQUEST_URI} !^/api/
RewriteRule api/.* index.php [QSA] 
```

任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:00:09.470

您可以在根目录的 .htaccess 文件中尝试这样的操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI}  !api\.php    [NC]
RewriteCond %{REQUEST_URI}  ^/api        [NC]    
RewriteRule ^(.*)     api.php/$1         [L,QSA]

RewriteCond %{REQUEST_URI} !static\.html [NC]
RewriteCond %{REQUEST_URI} !api          [NC]    
RewriteRule ^(.*)     static.html/$1     [L,QSA] 
```

对于永久重定向，替换`[L,QSA]`为`[R=301,L,QSA]`

这是关于如何完成 OP 描述的总体思路。无法更具体地了解可用信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:43:47.483

为什么不简单地使用 2 个 .htaccess 文件，一个在根目录中具有所需条件，另一个在 /api 文件夹中具有这些特定规则？

# objective-c - 多条件下的最佳实践objective-c

> ID：15077042
> 
> 赞同：-3
> 
> 时间：2013-02-25T21:42:05.403
> 
> 标签：objective-c, conditional

我将如何在 Objective-c 中处理以下内容？

我想构建一个测试多个条件的方法。下面是一些伪代码来表达我想要实现的目标：

```
if
   condition1 fulfilled, return 1
   condition2 fulfilled, return 2
   condition3 fulfilled, return 1
   condition4 fulfilled, return 1
   condition5 fulfilled, return 2
   no condition fulfilled, return 3 
end if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:49:27.920

取决于条件是否相互排斥，可能需要考虑几个因素。

如果条件互斥，最简单的解决方案是按返回值对它们进行分组：

```
if (condition1 || condition3 || condition4) return 1;
if (condition2 || condition5) return 2;
return 3; 
```

如果条件不是互斥的，您可以仅将测试顺序中彼此相邻的条件组合在一起：

```
if (condition1) return 1;
if (condition2) return 2;
if (condition3 || condition4) return 1;
if (condition5) return 2;
return 3; 
```

请注意，虽然您在退货后不需要`else`a，但在某些商店中通常会包含 an `else`。这是编码标准化的问题，应该由您的编码团队共同决定。

如果你想真正花哨，你可以创建一个[*blocks*](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)数组，按顺序测试条件，并返回 block 返回的值。这是迄今为止最棘手的方法。除非条件以相同的方式构造，并且代码对读者有意义，否则它将严重损害可读性。s链对`if`读者来说总是有意义的，因此很难与它们在可读性上竞争。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:44:02.253

```
if ( condition1 ) return 1;
else if ( condition 2 ) return 2;
else if ( condition 3 ) return 1;
..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:44:30.627

您可以使用与任何类 C 语言完全相同的方式来处理此问题：

```
if (condition1) {
    return 1;
} else if (condition2) {
    return 2;
} else if ...

} else {
    return 3;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T21:52:51.900

你得到了很好的答案，但如果你只想比较两个单个值：

```
int variableToCompare = ...;
switch (variableToCompare) {
     case 1: NSLog(@"1"); break;
     case 2: NSLog(@"2"); break;
     case 3: NSLog(@"3"); break;
     default: NSLog(@"This will be executed if any of the conditions above are YES");
}; 
```

# ios - 提高 OpenGL ES 2.0 和 GPUImage 的精度

> ID：15077043
> 
> 赞同：1
> 
> 时间：2013-02-25T21:42:05.867
> 
> 标签：ios, opengl-es, opengl-es-2.0, gpuimage

是否可以提高 GPUImage 或 OpenGL ES 中片段或顶点着色器的精度？

我希望使用 GPU 进行图像处理，并希望尽可能多地保留原始数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:54:57.760

您可以使用以下语句请求着色器使用硬件中实现的最高精度：

```
precision highp float;
precision highp int; 
```

或通过在特定声明上使用 highp 限定符。我相信着色器在任何情况下都会默认为最高可用精度。

确切的精度将取决于特定的硬件实现。此外，片段着色器中的 highp 限定符的实现是可选的。您可以使用 glGetShaderPrecisionFormat() API 调用查询格式的精度。在 Power VR SGX530 芯片上，我得到了 highp float 和 int 的这些值：

```
float range = 126/126, precision = 23/0
int range = 24/24, precision = 0/0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:29:08.250

如果不增加原始纹理数据，就不可能提高精度。

插值像素的方法有很多，但这并不意味着精度会提高。

在您的情况下，您可以在 IOS API 中增加您的相机预设，例如 AVCaptureSessionPresetXXXXXX

GPUImage 由 OpenGL ES 制作，因此 GPUImage 中的着色器代码和任何 opengl es 2.0 程序中的着色器代码完全相同。

另外我想让你知道顶点和碎片（像素）着色器在管道中做什么。这些只是 Redering 处理的一部分。

如果您不知道这一点，请记住 Vertex shader 正在执行 trasformation 而 Fragment Shader 正在执行 Texturing 。

总之，如果要对像素进行插值，就必须在 Fragment shader 中。

# hive - 在 Hive 中使用多级分区

> ID：15077046
> 
> 赞同：1
> 
> 时间：2013-02-25T21:42:27.897
> 
> 标签：hive, partitioning

我想知道以下是否可能。我在 Hive 中有按日期和记录器分区的数据，但我也有不属于特定记录器的数据。

例如

```
date=2012-01-01/logger=1/part000
date=2012-01-01/logger=1/part001
date=2012-01-01/logger=2/part000
date=2012-01-01/logger=2/part001
date=2012-01-01/part000 
```

我创建了我的表：

```
create table mytable (
    ...
)
partitioned by (date string, logger int)
....
; 
```

并添加了分区：

```
alter table mytable add partition (date='2012-01-01', logger=1) location '/user/me/date=2012-01-01/logger=1/';
... 
```

我可以查询分区中的数据，但无法查询文件中的数据`date=2012-01-01/part000`。是否可以在不符合分区的情况下包含此文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:28:04.237

Aaron，你是如何获得这样的结构的？通常，如果缺少分区键，HIVE 会创建名为 **__HIVE_DEFAULT_PARTITION__**的分区。

# cordova - PhoneGap/Cordova、波纹仿真器、CORS 和 JSONP

> ID：15077048
> 
> 赞同：6
> 
> 时间：2013-02-25T21:42:29.190
> 
> 标签：cordova, jsonp, cors, ripple

尝试使用 Ripple Emulator 测试 PhoneGap 应用程序。我们正在向服务器发出请求并接收：

错误：

> cordova :: XMLHttpRequest :: setRequestHeader 不适用于 JSONP。

*   a) 在服务器和客户端上启用 CORS
*   b) 请求在浏览器中工作
*   c) 请求在移动设备上运行
*   d) 我在 Ripple Chrome 扩展的设置中启用了“允许访问文件 URL”。
*   e）我启动了带有标志的chrome：

> --disable-web-security --allow-file-access-from-files

Ripple Emulator 支持 CORS httprequest 还是仅支持 jsonp？

如果它支持的不仅仅是来自 JSONP 的调用，那么我可以在实现上使用一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T23:38:25.533

Ripple Emulator 确实支持 CORS httprequest，但您需要将 html 页面作为网站托管在您的机器上并使用`http://localhost/yourvirtualdir/yourfile.html`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T03:47:22.253

无需设置虚拟目录或 IIS 条目，而是使用 PHP 的内置开发 Web 服务器。这适用于 Windows 和 Linux 环境。

[http://php.net/manual/en/features.commandline.webserver.php](http://php.net/manual/en/features.commandline.webserver.php)

```
$ cd ~/public_html
$ php -S localhost:8000 
```

现在您可以打开浏览器并导航到`http://localhost:8000`您的站点\应用程序将被提供。然后，您可以在该 URL 上启用 Ripple。

# jquery - DIV 类未显示在网格视图中

> ID：15077052
> 
> 赞同：0
> 
> 时间：2013-02-25T21:42:51.820
> 
> 标签：jquery, html, css, json

我不确定为什么会这样，但是

> 类`DIV`元素以单个垂直视图而不是水平视图输出到浏览器。

**因此：i.imgur.com/olChE92.png**

我确实知道 CSS 是正确的，并且显示了水平视图，但是我正在创建一个新站点，为此我选择将位置“固定”左侧边栏，背景滚动到最底部，仅将位置“固定”上部菜单离开实际的文件管理器字段以滚动内容。

**因此：i.imgur.com/DKqZp2s.jpg**

此外，内容通过 jQuery AJAX JSON 和 JSON 数据注入到 DIV ID 中，jQuery 将文件数据构建到 DIV 类中，并将它们全部输出到页面中。

这里还有带有完整 HTML + CSS + JQUERY 的 JSFiddle：jsfiddle.net/HgsVh/2/

无论如何，这里是**File.css**的代码，它负责将文件输出到预定义的 DIV ID 的实际方式

```
.product {
    width: 200px;
    float: left;
    margin: 10px;
    border: 1px #dedede solid;
    padding: 5px;
    background-image: url(images/corner.jpg);
    background-position: bottom right;
    background-repeat: no-repeat;
    border-radius: 6px;
    box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.5);
}

.product:hover {
    background-color: #87c6f1;
    /* #fae7af */
    background-image: none;
    border: 1px #cdcdcd solid;
    box-shadow: 0px 0px 12px #87c6f1, 0px 1px 1px rgba(0, 0, 0, 0.5);
    cursor: pointer;
}

.product .title {
    margin-bottom: 12px;
    margin-top: 12px;
    height: 22px;
    width: 200px;
    word-wrap: break-word;
    text-align: center;
    font-size: 14px;
    font-weight: 700;
    text-shadow: 0px 1px 0px #fff;
    overflow: hidden;
    border-bottom: 1px dotted #cdcdcd;
}

.product img {
    margin-right: 10px;
    border: 1px solid #dedede;
    border-radius: 5px;
}

.setting {
    width: 48px;
    height: 48px;
    background-image: url(http://cdn1.iconfinder.com/data/icons/onebit/PNG/preferences.png);
    display: block;
    position: absolute;
    z-index: 2;
    float: right;
    margin-left: 250px;
}

.like {
    width: 48px;
    height: 48px;
    background-image: url(http://cdn2.iconfinder.com/data/icons/onebit/PNG/onebit_46.png);
    display: block;
    position: absolute;
    z-index: 2;
    float: right;
    margin-left: 250px;
}

.like:hover {
    background-image: url(http://cdn2.iconfinder.com/data/icons/onebit/PNG/onebit_44.png);
}

.product .description {
    font-weight: 400;
    font-size: 14px;
    font-family: Geneva, Arial, Helvetica, sans-serif;
} 
```

现在这是输出主页的**Style.css**

```
body {
    background: #ffffff;
    overflow-y: scroll;
    overflow-x: hidden;
}

#content {
    width: 100%;
}

#content>#menu {
    padding: 2px 10px;
    display: block;
    background: #ffffff;
    box-shadow: 0px 12px 12px rgba(255, 255, 255, 0.6), 0px 0px 1px rgba(0, 0, 0, 0.2);
    position: fixed;
    top: 0px;
    left: 200px;
    right: 0px;
    z-index: 3;
}

#filemanager {
    background-attachment: scroll;
    background-clip: border-box;
    background-color: rgb(255, 255, 255);
    background-image: none;
    background-origin: padding-box;
    background-position: 0% 0%;
    background-repeat: repeat;
    background-size: auto;
    margin-bottom: 0px;
    margin-right: 0px;
    margin-left: 200px;
    margin-top: 60px;
    padding: 0;
    box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.2) inset;
}

#sidemenu {
    background: #191818;
    bottom: 0px;
    left: 0px;
    position: fixed;
    border-right: 10px solid #eee;
    text-shadow: 0px 1px 0px rgba(0, 0, 0, 0.4);
    top: 0px;
    width: 190px;
    z-index: 3;
    display: block;
} 
```

这是 index.php 中的 jQuery 片段代码的最后一部分，它负责将从 JSON 回调获得的数据注入位于 #filemanager DIV 内的 #filemanager-ajax DIV

```
 $(document).ready(function() {
 $.getJSON('file.php?path=<?php echo $_GET['path']; ?>&callback=?', function (data) {
    $("#filemanager-ajax").html('');
    $.each(data, function (i, item) {

        $("#filemanager-ajax").fadeIn(4000);

        $("#filemanager-ajax").append('<a class="link" href="' + item.id + '"><div class="product" data="' + item.path + '"><img src="' + item.thumb + '" title="' + item.thumb + '" class="thumbnail"/><div class="title">' + item.name + '</div><div class="description"></div>&nbsp;&nbsp;&nbsp;<strong>Filesize:</strong> ' + item.size + '<div style="clear:both;height:8px;"></div>&nbsp;&nbsp;&nbsp;about ' + item.date + ' ago<div style="clear:both;height:8px;"></div></div><div class="clear"></div></div></a>');

     });
 });
     }); 
```

这真的是全部，如果将 File.css 输出到单个完整页面元素中，它可以正常工作，但是当侧面的元素很少时，它就不起作用。这是解释 DIV 的线框图，如果您不确定我的意思，以及如何输出 .product 类的元素的图像

**线框图： http:** [//i.imgur.com/DKqZp2s.jpg](https://i.imgur.com/DKqZp2s.jpg) **.产品输出：http:** [//i.imgur.com/olChE92.png](https://i.imgur.com/olChE92.png)

请提前感谢，并为这么多代码感到抱歉。

# sql - 在应用左连接之前过滤表

> ID：15077053
> 
> 赞同：94
> 
> 时间：2013-02-25T21:43:01.167
> 
> 标签：sql, join, filter, where-clause

我有 2 个表，我想在 2 个表连接在一起**之前过滤 1 个表。**

客户表：

```
 ╔══════════╦═══════╗
   ║ Customer ║ State ║
   ╠══════════╬═══════╣
   ║ A        ║ S     ║
   ║ B        ║ V     ║
   ║ C        ║ L     ║
   ╚══════════╩═══════╝ 
```

条目表：

```
 ╔══════════╦═══════╦══════════╗
   ║ Customer ║ Entry ║ Category ║
   ╠══════════╬═══════╬══════════╣
   ║ A        ║  5575 ║ D        ║
   ║ A        ║  6532 ║ C        ║
   ║ A        ║  3215 ║ D        ║
   ║ A        ║  5645 ║ M        ║
   ║ B        ║  3331 ║ A        ║
   ║ B        ║  4445 ║ D        ║
   ╚══════════╩═══════╩══════════╝ 
```

我想 Left Join 所以我从 Customer 表中获取所有记录，无论 Entry 表中是否有相关记录。但是，我想在**join 之前**过滤条目表中的类别 D 。

期望的结果：

```
 ╔══════════╦═══════╦═══════╗
   ║ Customer ║ State ║ Entry ║
   ╠══════════╬═══════╬═══════╣
   ║ A        ║ S     ║  5575 ║
   ║ A        ║ S     ║  3215 ║
   ║ B        ║ V     ║  4445 ║
   ║ C        ║ L     ║  NULL ║
   ╚══════════╩═══════╩═══════╝ 
```

如果我要执行以下查询：

```
 SELECT Customer.Customer, Customer.State, Entry.Entry
   FROM Customer
   LEFT JOIN Entry
   ON Customer.Customer=Entry.Customer
   WHERE Entry.Category='D' 
```

这将过滤掉最后一条记录。

所以我想要左表中的所有行并将其加入到类别 D 过滤的条目表中。

提前感谢任何帮助！

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-02-25T21:45:27.117

您需要将`WHERE`过滤器移动到`JOIN`条件：

```
SELECT c.Customer, c.State, e.Entry
FROM Customer c
LEFT JOIN Entry e
   ON c.Customer=e.Customer
   AND e.Category='D' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/882bb8/2)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-25T21:49:47.753

你也可以这样做：

```
SELECT c.Customer, c.State, e.Entry
FROM Customer AS c
LEFT JOIN (SELECT * FROM Entry WHERE Category='D') AS e
ON c.Customer=e.Customer 
```

SQL小提琴[在这里](http://sqlfiddle.com/#!3/882bb8/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-13T16:45:31.063

或者...

```
SELECT c.Customer, c.State, e.Entry
FROM Customer c
LEFT JOIN Entry e
   ON c.Customer=e.Customer
WHERE e.Category IS NULL or e.Category='D' 
```

# angularjs - AngularJS - Web API - HttpResponseMessage - 传递自定义错误

> ID：15077060
> 
> 赞同：1
> 
> 时间：2013-02-25T21:43:34.890
> 
> 标签：angularjs

非常简单的表格，只有一个输入 - “名称”。但是，我不希望表中有重复项。

在服务器端，我可以检查这一点，并将自定义消息传递给响应标头“名称已存在”。

如何在我的角度控制器中获取 save() 方法以查看此消息并传递 alert('Name already exists') ？

谢谢大家。

**要显示什么？？**

您在 Chrome 中打开表单，选择开发者工具，然后选择网络。将您已经知道的名称放在数据库中，单击提交，然后单击 API，然后单击我的服务器传递消息“名称已存在”的响应选项卡。

我只需要知道如何在保存方法中获取 Angular 来获取该消息。Angular 知道数据没有保存；它保留在表单上，​​但用户不知道为什么他/她在提交后没有离开表单。我需要他们看到该名称已经在数据库中。

**大地**

感谢您的回复，我认为您正在做某事。我明天试试，然后回复你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:39:46.830

您可以在资源方法上使用回调来判断成功和失败。

```
resource.save(function(data){
    console.log('saved with response:', data);
}, function(err){
    console.log('failed with response:', data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:46:32.750

我无法通过我的 API 资源找到解决方案，因此我决定使用 $http ，以下确实有效：

$scope.save = 函数 () {

```
$http.post('/api/TruckMfgs/', $scope.truckMfg)  
    .success(function () {
    })
    .error(function (data) {
        alert(data);
    }); 
```

}

# javascript - 仅在单击特定按钮时提交

> ID：15077061
> 
> 赞同：1
> 
> 时间：2013-02-25T21:43:42.283
> 
> 标签：javascript, html, validation

我有一个像这样的表格：

```
<form id='Contact' action="<?php echo $_SERVER['PHP_SELF']; ?>" method='post' enctype="multipart/form-data" accept-charset='UTF-8' style='background-color:#7FFF00; width: 781px'> 
```

在那种形式中，我有 15 个字段。前三个“FirstName”、“Title”、“LastName”是表单提交所需的仅有的三个。

该表单具有三个按钮。一种用于删除、创建和修改。

单击创建时，它必须验证三个字段，然后提交表单。单击删除时，只需验证一个特定字段，然后提交。

Javascript：

```
<script type="text/javascript">
<!--
function validateForm(Form, FieldName)
{
    var Form = document.getElementById(Form);
    var Elements = Form.elements;
    var Field = Elements[FieldName].value;

    if (Field == null || Field == "")
    {
        alert(FieldName + " must be filled out!");
        return false;
    }
    return true;
}

function SubmitForm(Form, DoSubmit)
{
    if (DoSubmit)
    {
        document.getElementById(Form).submit();
    }
}
-->
</script> 
```

我的创建按钮：

```
<input type='button' name='ContactInfo' value='Create' onClick="SubmitForm('Contact', validateForm('Contact', 'Title') && validateForm('Contact', 'FirstName') && validateForm('Contact', 'LastName'));" /> 
```

我的删除按钮：

```
<input type='submit' name='ContactInfo' value='Delete' /> 
```

为什么创建按钮不起作用？它验证必填字段，但不提交/发布：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:51:53.957

```
try the following.

<input type='submit' name='ContactInfo' value='Create' onClick="SubmitForm('Contact', validateForm('Contact', 'Title') && validateForm('Contact', 'FirstName') && validateForm('Contact', 'LastName'));return false;" /> 
```

更改要提交的类型并在最后放置一个 return false 。

或将其添加到您的表单元素中：

```
onsubmit="return validateForm(this);" 
```

并对 Delete 等进行测试。如果 this.value === "Delete" 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:53:50.900

`document.getElementById(Form)`当您的表单 ID 为“联系人”时，您就有了。所以把它改成`document.getElementById("Contact")`.

# c# - 使用 C#、Ajax、Jquery 的 Web 服务不使用 ASP.Net

> ID：15077063
> 
> 赞同：1
> 
> 时间：2013-02-25T21:43:43.093
> 
> 标签：c#, javascript, jquery, web-services

我`WebService`在 C# 中创建了一个。在其中我有一个方法：
我在每个页面上使用相同的方法创建了 a`AndroidWebservices.asmx`和 a`Default.aspx`

```
[System.Web.Services.WebMethod]
public bool CheckLogin(string email, string password)
{
    //Get the User Information
    DB.User cur_user = DB.User.ByEmail(email.Trim());

    if (cur_user.CheckPassword(password)) {
       return true;
    } else {
       return false;
    }
} 
```

对于我放入的 Default.asxp 页面
`<asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" EnablePartialRendering="true" runat="server"></asp:ScriptManager>`

对于 AndroidWebService.asmx 我没有注释
`[System.Web.Script.Services.ScriptService]`

这项服务正在运行，`http://localhost:49524/`我公司的 .com 域也是如此

我在 tomcat 服务器上创建了一个新目录：

```
http://  localhost:8080/ 
```

代码是一个简单的表格

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="user-scalable=no, width=device-width" />
    <link rel="stylesheet" type="text/css" href="css/iphone.css">
    <link rel="stylesheet" 
        href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script src="js/iphone.js"></script>
    <title></title>
</head>
<body>
    <div id="container">
        <div id="header">
            <h1><a></a></h1>
            <div class="loginContainer">
                <table cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td valign="top" style="width:100px">
                            <div class="rounded-end">email</div>
                        </td>
                        <td valign="top">
                            <input type="text" id="email" class="login" />
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" style="width:100px">
                            <div class="rounded-end">password</div>
                        </td>
                        <td valign="top">
                            <input type="password" id="password" 
                                class="login" />
                        </td>
                    </tr>
                </table>
                <input type="button" class="loginButton" value="login" 
                    onclick="loginCheck(); return false;"/>
            </div>      
        </div>
    </div>
</body>
</html> 
```

和 Javascript：

```
function loginCheck() {

    var u = $('#email').val();
    var p = $('#password').val();

    $.ajax({
        type: "POST",
        url: "http://localhost:49524/mobile/Android/Default.aspx/CheckLogin",
        data: JSON.stringify({email: u, password: p}),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            alert(msg);
        }
    });
} 
```

我尝试过的事情：

```
dataType: "json" 
```

什么都不返回。

```
dataType: "jsonp" 
```

返回页面..即

```
"<!doctype><html> ...... " 
```

每当我`Default.aspx`作为我的 url 运行时，该函数都会返回页面的 html/文本，我可以将代码加上 + 查询字符串放在 URL 中，然后我会返回页面.. 但没有数据它似乎没有调用方法，而只是返回页面..如上所述..我所追求的是返回真或假以确保用户登录以继续到下一页。

我非常感谢人们发表评论，我不得不回到办公室，然后再继续工作。一旦我得到一个有效的答案，我会立即标记一个接受的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:05:18.140

我认为那是因为您将您的方法标记为受保护。将其标记为公开，然后重试。

所以

```
protected bool CheckLogin(string email, string password) 
```

变成

```
public bool CheckLogin(string email, string password) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:06:43.567

我使用了一个`$.jsonp plugin`节省了一天的它，它使 ajax 调用更容易..
我还必须把它放在我的 webconfig 中：

```
<webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
</webServices> 
```

# eclipse - m2e 不适用于多模块

> ID：15077066
> 
> 赞同：1
> 
> 时间：2013-02-25T21:43:54.967
> 
> 标签：eclipse, maven, module, m2e

我安装了 m2e 并使用“使用 SCM 检出项目”检出了一个多模块项目。我可以看到所有模块都作为单独的项目打开，并且工作正常。当我尝试使用相同的方法检出项目的不同分支时（我在“名称模板”文本框中提供了不同的名称），它成功检出，但所有其他模块都只是文件夹。

我尝试了许多不同的方法，但没有奏效。

我可以在 Maven 控制台中看到以下错误：“项目 <> 已存在”，即使工作区中没有具有此名称的项目。

当我创建一个新工作区时，我可以成功签出该分支并且一切正常。

目前，我为不同的 Maven 项目创建了不同的工作区。以前我在一个工作区中处理多个 maven 项目，但它不再工作。还有其他人面临同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:54:13.143

您应该在最后一页更改“名称模板”并选择项目，然后可以选择模块作为项目导入。

![在此处输入图像描述](../Images/c29155957121efee865c710fdcfc221f.png)

# servicestack - 身份验证失败时无法在 ServiceStack 中禁用重定向

> ID：15077069
> 
> 赞同：2
> 
> 时间：2013-02-25T21:44:06.223
> 
> 标签：servicestack

我在 Mono 上运行 ServiceStack 3.9.37。我只将它用作网络服务（没有视图等）。

我有一个自定义身份验证提供程序。

当身份验证因凭据无效而失败时，ServiceStack 会将响应重定向到 login.aspx。

身份验证配置如下

```
this.Plugins.Add(
  new AuthFeature(
    () => new AuthUserSession(),
    new IAuthProvider[] {
      new UserProfileCredentialsAuthProvider(),
      new AdminUserCredentialsAuthProvider()
    }
  )
  {
    ServiceRoutes = new Dictionary<Type, string[]> {
      { typeof(AuthService), new[]{"/auth", "/auth/{provider}"} }
    },
    HtmlRedirect = null
  }
); 
```

[这和ServiceStack身份验证失败时，不重定向](https://stackoverflow.com/q/13065289/1256751)的问题基本相同？但我在 Mono 上运行，根本没有任何会员资格。

编辑：

忘了提到我正在使用 Chrome 扩展程序“简单 REST 客户端”调用我的服务，并且我使用 application/json 作为 Accept 和 text/json 作为 Content-Type。

# php - PHP - 如何使用 SimpleXMLElement

> ID：15077073
> 
> 赞同：0
> 
> 时间：2013-02-25T21:44:19.287
> 
> 标签：php, rss, simplexml

尝试使用 获取 RSS 提要`SimpleXMLElement`，但我不完全了解如何执行此操作。我的代码如下：

```
function getFeed($feed_url) {

    $content = file_get_contents($feed_url);
    $x = new SimpleXmlElement($content);
    var_dump($x);

}

getFeed("http://feedproxy.google.com/themeforest"); 
```

它输出以下内容：

> object(SimpleXMLElement)#1 (2) { ["HEAD"]=> object(SimpleXMLElement)#2 (1) { ["TITLE"]=> string(17) "Moved Permanently" } ["BODY"]=> object(SimpleXMLElement)#3 (3) { ["@attributes"]=> 数组(2) { ["BGCOLOR"]=> 字符串(7) "#FFFFFF" ["TEXT"]=> 字符串(7) " #000000" } ["H1"]=> string(17) "永久移动" ["A"]=> string(4) "这里" } }

我已经尝试将上面的代码更改为此，但它没有输出任何内容并且我得到一个 foreach 错误：

```
function getFeed($feed_url) {

    $content = file_get_contents($feed_url);

    $x = new SimpleXmlElement($content);
    echo '
        <ul>';

    foreach($x->channel->item as $entry) {
        echo '
        <li>
          <a href="' . $entry->link . '" title="' . $entry->title . '">' . $entry->title . '</a>
        </li>';
    }

    echo '
        </ul>';

}

getFeed("http://feedproxy.google.com/themeforest"); 
```

有人可以告诉我我到底在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:47:40.120

它不能像对象一样被访问。请在此处阅读第一个示例： [http ://www.php.net/manual/en/simplexmlelement.children.php](http://www.php.net/manual/en/simplexmlelement.children.php)

# php - Zend Framework 2 子正则表达式路由

> ID：15077075
> 
> 赞同：1
> 
> 时间：2013-02-25T21:44:30.183
> 
> 标签：php, regex, routing, tree, zend-framework2

我一直在拼命地与 ZF2 作战，我正在尝试创建一个路由树，以便：

*   /manual - 转到手动控制器，索引操作
*   /manual/[something] - 转到手动控制器，制造商操作
*   /manual/[something]/[else] - 转到手动控制器，类别操作
*   /manual/[something]/[else]/[foo] - 转到手动控制器，模型动作

我使用了官方文档和其他几个网站，但我所能做的就是触发：

*   /manual - 转到手动控制器，索引操作
*   /manual/[something] - 转到手动控制器构造函数，但不是动作...

另外两个根本没有到达控制器....

```
 'manual' => array(
            'type' => 'literal',
            'options' => array(
                'route' => '/manual',
                'defaults' => array(
                    'controller' => 'Applicaton\Controller\Manual',
                    'action' => 'index'
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                // Segment route for viewing one blog post
                'manufacturer' => array(
                    'type' => 'segment',
                    'options' => array(
                        'route' => '/[:manufacturer]',
                        'constraints' => array(
                            'manufacturer' => '[a-zA-Z0-9_-]+'
                        ),
                        'defaults' => array(
                            'action' => 'manufacturer'
                        )
                    ),
                    'may_terminate' => true,
                    'child_routes' => array(
                        'category' => array(
                            'type' => 'segment',
                            'options' => array(
                                'route' => '/[:category]',
                                'constraints' => array(
                                    'category' => '[a-zA-Z0-9_-]+'
                                ),
                                'defaults' => array(
                                    'action' => 'category'
                                )
                            ),
                            'may_terminate' => true,
                            'child_routes' => array(
                                'model' => array(
                                    'type' => 'segment',
                                    'options' => array(
                                        'route' => '/[:model]',
                                        'constraints' => array(
                                            'model' => '[a-zA-Z0-9_-]+'
                                        ),
                                        'defaults' => array(
                                            'action' => 'model'
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        ), 
```

提前感谢您的帮助，任何帮助将不胜感激！

# 更新：

这是我的控制器操作：

```
public function manufacturerAction() {
    echo 'I am in the manufacturer action!';
    return new ViewModel();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:09:16.967

可以使用正则表达式来完成。**在module.config.php**中修改你的路由如下

```
'manual' => array(
    'type' => 'Literal',
    'options' => array(
        'route' => '/manual',
        'defaults' => array(
            'controller' => 'Application\Controller\Manual',
            'action' => 'index',
        ),
    ),
),
'manufacturer' => array(
    'type' => 'Zend\Mvc\Router\Http\Regex',
    'options' => array(
        'regex' => '/manual/(?<manufacturer>[a-zA-Z0-9_-]+)',
        'defaults' => array(
            'controller' => 'Application\Controller\Manual',
            'action' => 'manufacturer',
        ),
        'spec' => '/manual/%manufacturer%',
    ),
),
'category' => array(
    'type' => 'Zend\Mvc\Router\Http\Regex',
    'options' => array(
        'regex' => '/manual/(?<manufacturer>[a-zA-Z0-9_-]+)/(?<category>[a-zA-Z0-9_-]+)',
        'defaults' => array(
            'controller' => 'Application\Controller\Manual',
            'action' => 'category',
        ),
        'spec' => '/manual/%manufacturer%/%category%',
    ),
),
'model' => array(
    'type' => 'Zend\Mvc\Router\Http\Regex',
    'options' => array(
        'regex' => '/manual/(?<manufacturer>[a-zA-Z0-9_-]+)/(?<category>[a-zA-Z0-9_-]+)/(?<model>[a-zA-Z0-9_-]+)',
        'defaults' => array(
            'controller' => 'Application\Controller\Manual',
            'action' => 'model',
        ),
        'spec' => '/manual/%manufacturer%/%category%/%model%',
    ),
), 
```

# winapi - 循环，100% CPU 使用，使用睡眠不起作用？

> ID：15077086
> 
> 赞同：1
> 
> 时间：2013-02-25T21:44:52.770
> 
> 标签：winapi, assembly, x86, masm, masm32

我有一个用 MASM 编写的小应用程序，它不断检查活动的 Internet 连接并在有连接时发送哔声，现在我的问题是循环使用 99% 的 CPU，我尝试在循环内放置一个睡眠，但不知何故那行不通？

这是代码：

```
;build as a WINDOWS app

        .XCREF
        .NOLIST
        INCLUDE    \masm32\include\masm32rt.inc
        INCLUDE    \masm32\include\wininet.inc
        INCLUDELIB \masm32\lib\wininet.lib
        .LIST

;-------------------------------------------------------------------------

IsOnline PROTO   :LPSTR
Sleep PROTO STDCALL :DWORD

;-------------------------------------------------------------------------

IFNDEF FLAG_ICC_FORCE_CONNECTION
FLAG_ICC_FORCE_CONNECTION EQU 1
ENDIF

;-------------------------------------------------------------------------

        .CODE

IsOnline PROC    lpszURL:LPSTR

;Test Internet Connection
;
;lpszURL points to a zero-terminated test URL string (must start with "http://")
;
;Returns EAX = FALSE if not connected
;            = TRUE if connected
;        EDX = connection description (see InternetGetConnectedState documentation)

        push    eax
        mov     edx,esp
        INVOKE  InternetGetConnectedState,edx,0
        or      eax,eax
        jz      IsOnl0

        INVOKE  InternetCheckConnection,lpszURL,FLAG_ICC_FORCE_CONNECTION,0

IsOnl0: pop     edx
        ret

IsOnline ENDP

;-------------------------------------------------------------------------

szURL   db 'http://www.google.com',0

;-------------------------------------------------------------------------

_main   PROC

loop00: INVOKE  IsOnline,offset szURL
        Invoke Sleep,5000
        or      eax,eax
        jz      loop00

        INVOKE  Beep,750,1000
        exit

_main   ENDP

;-------------------------------------------------------------------------

        END     _main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:17:59.130

`Sleep()`可能会破坏寄存器，因此`IsOnline()`可能会丢失返回值。

# string - 在 MATLAB 中将数字转换为元胞数组中的字符串

> ID：15077089
> 
> 赞同：4
> 
> 时间：2013-02-25T21:45:02.343
> 
> 标签：string, matlab, type-conversion, cell-array

我有一个包含数字和字符串数据的单元格数组。我需要将数字转换为字符串，以便我可以使用该`unique()`函数。

```
a = {1; 4; 'lf'}
result --> {'1', '4', 'lf'}; % Now unique() function can be used 
```

有在线解决方案来处理列是数字的情况。但是这些不能在这里使用，因为至少有 1 行有字符串作为数据。应赞赏矢量化解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T21:50:40.260

用于`cellfun()`应用于`num2str()`每个单元格元素：

```
result = cellfun(@num2str, a, 'UniformOutput', false) 
```

这（`UniformOutput`设置为`false`）将自动处理数组的非标量字符元素。

# r - 如何在列表的循环中排除给出错误的元素？（在 R 中）

> ID：15077093
> 
> 赞同：1
> 
> 时间：2013-02-25T21:45:13.417
> 
> 标签：r, loops

这是我的问题：

我正在使用循环在对象列表上运行函数。大多数对象工作正常并产生所需的输出。但是，其他一些会产生错误，当这种情况发生时，循环会停止运行。

我试图找到一种方法，每次循环找到一个给出错误的对象时，循环都会忽略有问题的对象并转到下一个对象。所以循环可以运行到整个列表的末尾，只产生运行良好的对象的输出。

我正在实现这样的循环：

```
for(i in n:m){
   myfunction
} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:59:20.233

只需将可能失败的内容包装起来`try()`

```
for(i in n:m){
out[[i]] = try( myfunction )

}  
  out 
```

可能更好的是把`try()`inside `myfunction()`。但我不知道该功能需要什么。有时一个好的策略是将输出预先分配给 NA，然后在 for 循环开始时询问：

```
 if("conditionwherefunctionfails") i = i+1 
```

那将跳过该迭代并继续您的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:58:33.287

几乎没有什么可以继续的，但是您只需要一个 if 语句来识别麻烦的对象，并且什么都不做，否则执行您的函数：

```
for(i in n:m){
    if ( i != ... ) { //replace ... with NaN or null, or whatever is causing the error
        myfunction(i)
    }
} 
```

由于信息有限，我无法告诉您应该用什么代替`...`

# eclipse - 来自 SR1 的 Eclipse Juno 更新破坏了一切

> ID：15077094
> 
> 赞同：3
> 
> 时间：2013-02-25T21:45:16.603
> 
> 标签：eclipse, eclipse-juno

我运行 Eclipse Juno SR1 已经有一段时间了。我的 Eclipse IDE 在 Ubuntu 12.10 VM 中，在 Windows 7 下的 VirtualBox 中作为来宾运行。它一直很稳定，但速度极慢。性能问题使我无法工作，因此我尝试按照[http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation中的说明进行更新](http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation)

现在，Eclipse 已经死了——完全无法使用。在项目文件导航器中，我看到诸如“无法创建视图：org.eclipse.ant.ui.views.AntView”、“无法创建视图：org.eclipse.php.ui.explorer”、“无法创建视图：org.eclipse.jdt.ui.PackageExplorer”和“无法创建视图：org.eclipse.wst.jsdt.ui.PackageExplo”。错误日志包含许多引用图像的条目，例如“！MESSAGE 无法解析插件“平台：/plugin/com.aptana.terminal/icons/terminal.png”。” 和“！MESSAGE 无法解析插件“平台：/plugin/com.aptana.scripting.ui/icons/snippet.png”。”。

我进去检查了 eclipse.ini 文件，发现只有一个名为“eclipse.ini.ignored”的文件，其中包含：

```
-product
org.eclipse.epp.package.cpp.product 
--launcher.defaultAction
openFile
-configuration
../../home/myuser/.eclipse/org.eclipse.platform_4.2.0_1473617060/configuration
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m 
```

如果这是最好的恢复方法，我大约一周前对我的整个 VM 进行了备份。

您可以提供的任何帮助将不胜感激。如果有帮助，我可以发布日志和配置文件。

# c# - 通过 WCF 发送大型 Xml 字符串的最有效解决方案？

> ID：15077095
> 
> 赞同：2
> 
> 时间：2013-02-25T21:45:20.533
> 
> 标签：c#, .net, performance, wcf, serialization

我需要通过 WCF 发送和接收包含一些小字段以及一个大 Xml 字符串的对象，如下所示：

```
[DataContract]
public class ServiceResponse
{
    [DataMember]
    public int Id { get; set;}

    [DataMember]
    public string Xml {get; set;}
} 
```

我必须使用基于 Http 的绑定，但服务是内部的，因此将共享合同 dll。Xml 字符串可能达到几 MB。该服务允许通过客户端机器在服务器之间传输数据，因此第一个客户端调用检索一大块 Xml，将其保存到本地磁盘，然后第二个调用将数据从磁盘传输到其他地方某个其他盒子上的另一个服务实例. 所以客户端从字面上保存数据并转发它，根本没有逻辑或处理。

我需要最有效的机制——即有效载荷小、速度快——来发送这些对象。

一些问题：

*   在有效负载中发送大量 Xml 的最有效方法是什么？
*   `MemoryStream`在使用 a 通过线路发送之前将对象序列化为 a 有什么好处，`BinaryFormatter`然后使用`Stream`类型作为服务操作中的参数？
*   对于几 MB 的消息，使用`Streamed`传输模式有什么不同吗？

我不能使用像 Protobuf-net 这样的第三方库（很遗憾）。

感谢任何建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:18:20.450

首先，我将它作为一个`XmlNode`而不是一个字符串发送：

```
[DataMember]
public XmlNode Xml {get; set;} 
```

这避免了 XML 标记的所有编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:28:15.230

数据传输=服务器准备时间+传输时间+客户端处理时间。

我猜转移时间是相当可观的。我之前通过序列化为 XML、zip 压缩生成的字符串、然后发送字节数组或将 zip 压缩的字符串序列化到 base64 来解决这个问题。

它增加了处理时间，但远不及未压缩版本的传输时间。

有问题的应用程序在启动时缓存的常设/启动数据是几兆字节未压缩，在世界各地使用，因此在质量较低的连接区域，压缩是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:49:13.907

你的陈述

> 在使用 BinaryFormatter 通过线路发送然后使用 Stream 类型作为服务操作中的参数之前，将对象序列化到 MemoryStream 有什么好处？

意味着您实际上并不需要发送`Xml`，而是当前序列化为的对象`Xml`。

[如果是这样，您将使用Protocol Buffers](https://code.google.com/p/protobuf-net/)而不是 BinaryFormatter获得最快的序列化和最佳压缩。

有关更多信息和比较，请参阅

[https://stackoverflow.com/a/11550778/141172](https://stackoverflow.com/a/11550778/141172)

**更新**

如果您指的是`ServiceResponse`使用 BinaryFormatter 进行序列化，Protocol Buffers 仍将提供卓越的性能。

# html - 是否可以在标题属性中嵌套标签？

> ID：15077096
> 
> 赞同：2
> 
> 时间：2013-02-25T21:45:21.437
> 
> 标签：html, section508, abbr

此问题与可访问性 (508) 合规性有关。

我有一个带有标题属性的链接，该链接显示在工具提示中。在该工具提示中是缩写“Dr.”。为了让屏幕阅读器说“医生”而不是“dur”，我必须在第二`<abbr>`行中将缩写包装在一个标签中：

```
<a class="fancybox" href="#brenda-jones-harden" 
title="View <abbr title='Doctor'>Dr.</abbr> Brenda Jones Harden's bio">
<img src="https://content.cleverex.com/hslc/tta-system/ehsnrc/btt/images/no-photo.jpg" 
alt="No Photo Available" height="96" width="80"><span class="two_liner">
<abbr title='Doctor'>Dr.</abbr> Brenda Jones Harden</span></a> 
```

但是，当我在标题标签内使用 abbr 标签时，弹出工具提示会显示：

```
"View <abbr title='Doctor'>Dr.</abbr> Brenda Jones Harden's bio" 
```

我相信这意味着我不能将 abbr 标签嵌套在 alt 或 title 属性中。这样做将始终使标签显示为常规文本。你同意吗？有解决方法吗？我在任何地方都找不到答案，所以我将我的第一个问题提交给 Stack Overflow。如果我的口才不如你其他大多数帖子，请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:50:18.247

简短回答：不，您不能在属性中嵌套标签。[http://www.w3.org/TR/html5/dom.html#attr-title](http://www.w3.org/TR/html5/dom.html#attr-title)

我建议只写医生，正如评论中已经提到的那样：）

# c++ - 基于 btIDebugDraw 的 CGAL 渲染器（没有 QT）？

> ID：15077097
> 
> 赞同：1
> 
> 时间：2013-02-25T21:45:23.713
> 
> 标签：c++, rendering, bullet, cgal

是否有一组复杂的结构/渲染器（如 Nef Polyhedra 和 Polyhedron - 都适合我）和一个简单的渲染器（引擎），可以像[子弹一样工作`btIDebugDraw`- 虚拟类](http://www.continuousphysics.com/Bullet/BulletFull/classbtIDebugDraw.html)- 你实现 fiew 渲染函数，提供该渲染的实例构造渲染器的引擎对象（在子弹情况下[World like`btDiscreteDynamicsWorld`](http://www.continuousphysics.com/Bullet/BulletFull/classbtDiscreteDynamicsWorld.html#ae28ddad438d95e1da0fe25d1df41dade)）在这里它将是 Nef Polyhedra 或 Polyhedron 渲染器。CGAL中有这样的课程吗？或者如何使用`btIDebugDraw`渲染多面体（`CGAL::Polyhedron_3<Kernel>`）和Nef多面体（`CGAL::Nef_polyhedron_3<Kernel>`）的现成实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:19:44.597

API 没有直接的部分，但 CGAL 附带了演示来展示功能，并且通常用于开发或调试。它们或多或少是使用[qglViewer](http://www.libqglviewer.com/)使用 OpenGL 渲染结构的临时代码。`Scene_nef_polyhedron_item.{h,cpp}`对你来说，Polyhedron 附带的演示应该包含显示如何渲染特定结构的代码，特别是`Scene_polyhedron_item.{h,cpp}`应该有你正在寻找的东西。

我无法评论它与您提到的其他 API 相比如何，因为我不熟悉它们。

一般来说，使用固定函数管道绘制多面体并不太难，但使用顶点缓冲区对象会变得更加棘手。

# android - 将 runnable() 从 Java 转换为 Android

> ID：15077098
> 
> 赞同：0
> 
> 时间：2013-02-25T21:45:26.827
> 
> 标签：android

我做了一个基于 Java 的聊天应用程序。更新聊天窗口基于此方法：

```
//change/update chatWindow
private void showMessage(final String m){
    SwingUtilities.invokeLater(
        new Runnable(){
            public void run(){
                chatWindow.append("/n" + m);
            }
        }   
    );
} 
```

如何在 Android 上实现此方法？`SwingUtilities`不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:49:00.193

使用任一处理程序（android.os.Handler）：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

或任何[`View`](http://developer.android.com/reference/android/view/View.html)通过使用[`post`](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)或[`postDelayed`](http://developer.android.com/reference/android/view/View.html#postDelayed%28java.lang.Runnable,%20long%29)方法

或从任何其他线程调用时的[Activity](http://developer.android.com/reference/android/app/Activity.html)方法。[`runOnUiThread`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

# ruby-on-rails-3 - Mongoid 数据库架构

> ID：15077102
> 
> 赞同：0
> 
> 时间：2013-02-25T21:45:44.600
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我们正在使用 Ruby on Rails 和 Mongoid 制作一个应用程序。

我一直在阅读 mongoDB 和 Mongoid gem 的文档，了解如何在使用基于文档的数据库时设计数据库模式。我已经在脑海中思考了一段时间，并且非常感谢比我更有经验的人的一些意见，以知道我是否完全迷失了：p

任何人，这是我们正在制作的应用程序的概述（我试图使其尽可能简单以保持问题的真实性）：

该应用程序由以下实体组成：

```
Users, Subjects, Skills, Tasks, Hints and Tutorials. 
```

它们按以下方式组织：

```
Subjects consists of a set of 1..n Skills.

Skills consists of a set of Tasks, (sub-)Skills or both (i.e. skills can be a tree
structure, where one main skill (say, Geometry) is the root and other skills are 
child nodes (for instance, the Pythagorean Rule might be a sub-skill)). However, 
all skills, regardless of whether they have sub-skills or not, should consist of 
0..n tasks.

Tasks have a set of 1..n Hints associated with them.

Hints are each associated with a particular task.

Tutorials are associated with 1..n Skills (this skill can be either a root
node or a leaf node in a skill tree). 

Users can complete 0..n Tasks in order to complete 0..n Skills. 
```

现在，我们想象将主要有**读取**查询调用数据库以收集某些用户完成的技能/任务，并**读取**查询以显示与主题相关的各种技能树。主要的**写**查询可能会与各种用户和任务之间的关系有关，形式如下

```
User A completes Task B 
```

等等。此外，我们假设实体数量的大小如下：用户 > 提示 > 任务 > 技能 > 教程 > 主题

目前，这是我们想到的解决方案：

```
Subject.rb
has_and_belongs_to_many :skills

Skill.rb (uses Mongoid::Tree)
has_and_belongs_to_many :subjects
embeds_many :tasks

Task.rb
embedded_in :skill, :inverse_of => :tasks
embeds_many :hints

Hint.rb
embedded_in :task, :inverse_of => :hints 
```

我们还没有真正开始实施教程以及用户和技能/任务之间的联系，但我们认为用户和技能/任务之间的关系必须是 N:N（我猜这效率很低）。

为这种应用程序使用基于文档的数据库是个坏主意吗？如果没有，我们如何改进我们的模式以使其尽可能高效？

干杯，对不起文字墙:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:57:04.770

老实说，除非您的数据的某些部分完全是非结构化的，否则我认为没有必要为您的问题使用 NoSQL 解决方案。我的观点是你确实有数据库知识，所以你熟悉 MySQL/PostgreSQL/etc。我真诚地相信 PostgreSQL（或 Mysql）会更容易让您设置、编写代码、维护并可能最终扩大规模。我对 NoSQL 的看法是，当您拥有非结构化数据集并且需要动态添加字段的灵活性时使用它，使用 MongoDB 存在缺陷。这不是银弹。

一些陷阱是，例如，`in()`s 很慢，如果你向 mongo 写了一些东西然后想立即阅读它，你不得不期望你不会得到它（在 mongo 中分片），map reduce 有点麻烦（我没有尝试过聚合框架，`Moped`但它看起来很有希望，有时索引可能会出现分片集合的问题）。

# git - Git 添加多个上游服务器并跟踪它们各自的分支

> ID：15077110
> 
> 赞同：2
> 
> 时间：2013-02-25T21:46:11.003
> 
> 标签：git, github, git-branch

我有一个其他人从我那里分叉的 git repo。我想将这些存储库之一的主分支跟踪到`feature/foo`本地存储库中命名的分支中。这是我到目前为止所做的：

`git remote add johnny git@github.com:made_up_johnny/johnny.git`

然后，我尝试在添加上游服务器后创建一个本地分支`johnny` ：

`git branch --set-upstream feature/foo johnny/master`

在一天结束时，我得到这个：

`fatal: Not a valid object name: 'johnny/master'.`

所以我不确定我在这里做错了什么，我只想拥有多个远程服务器，我可以从中提取功能以供审查。在这种情况下，我尝试向`johnny`github 存储库添加一个别名为的远程上游服务器，该服务器具有完整的 URL。然后我尝试设置一个远程跟踪分支并得到了致命错误。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:48:42.263

您不仅需要添加遥控器，还需要获取它：

```
git fetch johnny 
```

# windows-phone-8 - 数据绑定 UI 未更新

> ID：15077117
> 
> 赞同：0
> 
> 时间：2013-02-25T21:46:59.040
> 
> 标签：windows-phone-8

我在页面上实现了“联系人”对象的 ObserveableCollection，并将其设置为 longlistselector 的 itemsource。“联系人”对象的所有属性都实现了 INotifyPropertyChanged。将列表和属性添加到 ObserveableCollection 后，它们会正常显示。但是，每当我更改代码中的一个属性时，更改不会反映在 UI 中，直到我离开页面并返回。因此，数据绑定属性不会实时更新。

从 XAML 页面：

```
public ObservableCollection<Contact> contacts = new ObservableCollection<Contact>();

Contact[] data = ContactHandler.Singleton().GetContacts().Values.OrderBy(x => x.DisplayName.ToLower()[0]).ToArray();
        int dataCount = data.Length;

        this.LayoutRoot.Dispatcher.BeginInvoke(() =>
        {
            for (int x = 0; x < data.Length; x++)
            {
                contacts.Add(data[x]);
            }
}); 
```

这是我更新“联系人”的“突出显示”属性的地方：

```
private void contactList_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Contact contact = contactList.SelectedItem as Contact;

        if (contact != null)
        {
            Debug.WriteLine(contact.DisplayName + " is: " + contact.Highlight);

            string uid = contact.UserID;
            if (uids.Contains(uid))
            {
                uids.Remove(uid);
                Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    contact.Highlight = Visibility.Collapsed;
                });
            }
            else
            {
                uids.Add(uid);
                Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    contact.Highlight = Visibility.Visible;
                });
            } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:06:11.247

好吧，所以我是个白痴。

吸取教训。永远不要忘记让集合中的对象（在我的情况下为联系人）继承自 INotifyPropertyChanged。我正在实施它，但没有继承。

# javascript - 仅在 Heroku 上运行应用程序时无法解析绑定

> ID：15077118
> 
> 赞同：0
> 
> 时间：2013-02-25T21:47:00.120
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

问题是，当我在我的开发环境（Windows 7 64 位）中运行 Web 应用程序时，淘汰绑定按设计工作，但是当应用程序在 Heroku 上运行时，具有相同确切数据的相同页面给了我一个

未捕获的错误：无法解析绑定消息：ReferenceError：未定义 searchLink；绑定值：attr:{href:searchLink}

我正在使用淘汰映射器将 json 解析为所需的对象，ViewModel 是

```
var CoachesViewModel = function(data){  
    var self = this;
    ko.mapping.fromJS(data, mapping, this);                
}
var PendingCoachModel = function(data){
    var self = this;
    ko.mapping.fromJS(data, mapping, this),
}
var mapping = {
 'coaches': {
     create: function(options) {
        return new CoachesViewModel(options.data);
        }
    },
'pendingCoaches':{
    create:function(options){
        return new PendingCoachModel(options.data);
        }
     }
}   
var viewModel = function(coaches,pendingCoaches){
    var self = this;
    ko.mapping.fromJS(coaches, mapping, this);
    ko.mapping.fromJS(pendingCoaches, mapping, this);
}                           
var vm = new viewModel(${team.serializedCoaches()},${team.serializedPendingCoaches()});
            ko.applyBindings(vm);

The json is 
{'coaches':[{'email':'noemail502e6c13e4b0831b62e6896e@...','name':'Jim    Smith','searchImgLink':'http://localhost:9000/...','searchLink':'http://localhost:9000...','userId':'502e6c4b...96e'}]}
'pendingCoaches':[{'notifyId':'512bd9b874062909605d1','user':{'email':'hdog_lbf50f9698ae4ol.com','name':'Bob Johnson(Obf.)','pendingUser':false,'searchImgLink':'http://localhost:9000..','searchLink':'http://localhost:9000...','userId':'502e6c41e4e691e2'}}]

<!-- ko foreach: coaches -->    
    <div class = 'tCoach'>
       //this is where it breaks
        <a data-bind="attr:{href:searchLink}"><img data-bind = "attr:{src:searchImgLink}" class = 'coachImage'/></a>
        <div class = 'coachInfo'>
            <p><a data-bind="attr:{href:searchLink},text:name" class = 'coachName'></a></p> 
            <p data-bind = "text:reducedEmail"></p> 
            <p data-bind="if:isHeadCoach">Head Coach</p>    
        </div>          
        <img data-bind="bindCoachDropdown:self,attr:{manId:userId}" class = 'hd_drop managers'  src = '/public/images/dropdown_orange.png' />
    </div>      
<!-- /ko --> 
```

我删除了与问题无关的函数和变量..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:55:09.197

解决了这个问题。意识到我们的 HTML 缩小模块删除了 html 标签，因此打破了淘汰赛

# c++ - Boost Lambda/Phoenix - 如何执行返回另一个 lambda 的 lambda？

> ID：15077121
> 
> 赞同：6
> 
> 时间：2013-02-25T21:47:14.550
> 
> 标签：c++, boost, lambda, functional-programming, currying

Boost Lambda/Phoenix 是否支持开箱即用的东西，比如返回另一个 lambda 的 lambda？

例如，它可以用来做某种柯里化：

```
std::cout << [](int x){return [=](int y){return x+y;};}(1)(2); 
```

如何使用 Boost Lambda/Phoenix 实现类似的目的（+ 作为奖励 - 我们将获得多态行为）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:20:31.803

[Boost Phoenix 作用域：let/lambda](http://www.boost.org/doc/libs/1_53_0/libs/phoenix/doc/html/phoenix/modules/scope.html)

[现场演示：](http://coliru.stacked-crooked.com/a/3095834f635c3b5c)

```
#include <boost/phoenix.hpp>
#include <iostream>
#include <ostream>

using namespace std;
using namespace boost;
using namespace phoenix;
using namespace arg_names;
using namespace local_names;

int main()
{
   // capture by reference:
   cout <<
      (lambda(_a=_1)[_1 + _a ])(1)(2)
   << endl;
   cout <<
      (lambda(_b=_1)[lambda(_a=_1)[_1 + _a + _b ]])(1)(2)(3)
   << endl;
   // capture by value:
   cout <<
      (lambda(_a=val(_1))[_1 + _a ])(1)(2)
   << endl;
   cout <<
      (lambda(_b=val(_1))[lambda(_a=val(_1))[_1 + _a + _b ]])(1)(2)(3)
   << endl;
} 
```

输出是：

```
3
6
3
6 
```

# uitableview - mapView 和 UITable 详细信息

> ID：15077129
> 
> 赞同：0
> 
> 时间：2013-02-25T21:47:40.917
> 
> 标签：uitableview, mkmapview, mkannotation, cllocation, mkmapitem

试图将我的注释数据（姓名、地址、电话号码、网址、描述等）传递给带有表格的 DetailViewController。卡住----请阅读代码。数据未通过 calloutAccessoryTapped 传递。帮助？

```
 - (IBAction)gasButton:(id)sender {

    [self.mapView removeAnnotations:self.mapView.annotations];
    self.localSearchRequest = [[MKLocalSearchRequest alloc] init];
    self.localSearchRequest.region = self.mapView.region;
    self.localSearchRequest.naturalLanguageQuery = @"gas station";

    self.localSearch = [[MKLocalSearch alloc] initWithRequest:self.localSearchRequest];
    [self.localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {

        if(error){

            NSLog(@"localSearch startWithCompletionHandlerFailed!  Error: %@", error);
            return;

        } else {

            for(mapItem in response.mapItems){
                MKPointAnnotation *zip = [[MKPointAnnotation alloc] init ];
                zip.coordinate = mapItem.placemark.location.coordinate;
                zip.title = mapItem.name;

                 self.mapView.delegate = self;
                [self.mapView addAnnotation: zip];
                [self.mapView selectAnnotation:zip animated:YES];
                [self.mapView setUserTrackingMode:MKUserTrackingModeFollow];

                NSLog(@"%@ - 1", mapItem.name);

                CLLocation *loc1 = [[CLLocation alloc] initWithLatitude:zip.coordinate.latitude longitude:zip.coordinate.longitude];
                CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:self.mapView.userLocation.coordinate.latitude longitude:self.mapView.userLocation.coordinate.longitude];

                CLLocationDistance distance = [loc1 distanceFromLocation:loc2]; 
                NSString *dist =  [[NSString alloc] initWithFormat:@"%.2f miles", distance * 0.000621371192];
                zip.subtitle = dist;

                           }

                  }

    }];
}

    - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{

    MKPinAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"MYVC"];

       if ([annotation isKindOfClass:[MKUserLocation class]])
       {

        return nil;

       }

       else if ([annotation isKindOfClass: [MKPointAnnotation class] ])
       {

           annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
           annotationView.enabled = YES;
           annotationView.animatesDrop = YES;
           annotationView.pinColor = MKPinAnnotationColorGreen;
           annotationView.canShowCallout = YES;

           NSLog(@"%@ - 2", mapItem.name);

           return annotationView;
       }

    return nil;

    }

    - (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
    {

  NSLog(@"%@ - tapped", mapItem.name);

     //STUCK HERE - mapItem.name is (null)

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:12:51.007

`mapItem`存在于`gasButton`函数的 for 循环中，据我所知，没有其他地方。您已创建注释 ( `zip`) 并将其添加到地图中。在`viewForAnnotation`您获得该注释作为参数并要求从中创建annotationView。在`calloutAccessoryControlTapped`你得到一个 annotationView 并告诉它已被点击。您需要按照链条返回您的数据。从 annotationView 获取注释并从注释获取您的名字。

```
MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    NSLog(@"%@ - tapped", view.annotation.title);
} 
```

# c# - “大”数据集在滚动时使 Gridview 崩溃。Win32 错误

> ID：15077134
> 
> 赞同：3
> 
> 时间：2013-02-25T21:47:48.177
> 
> 标签：c#, windows-8, windows-store-apps, winrt-xaml

我一直遇到一个开始激怒我的错误，我不知道如何解决它。我有一个分组的网格视图，大约 30 个组中可能包含 500 - 1000 个详细信息项。（全部在 C# 中完成）当用鼠标抓住滚动条并快速浏览我（迟早）得到的列表时，a

> myapp.exe 中 0x0fda84de 处的未处理异常：0xC0000005：访问冲突读取位置 0x006d006f。

调试器会将我扔进一个对我来说是象形文字的程序集页面。我正在从 api 调用填充 gridview 到另一台服务器，这确实对我提供列表的可观察集合进行了相当大的更改，但是这一切都是在我得到异常之前加载的

我不知道这是否只是某种内存不足或错误等。我知道这一点：

[博文](http://mikaelkoskinen.net/winrt-xaml-gridview-performance-problems-on-windows-rt-tablets/)

但这似乎不符合要求。我没有使用缓存，也不会在导航时发生。我也不喜欢内联组标题。大量应用程序（音乐、Netflix 等）。使用分组的gridview，不要遇到这个问题。我在这件长袍的尽头。

如果我知道错误是什么，我可以更好地追踪源头！

感谢大家，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T18:48:08.063

我不确定您使用的是哪种 gridview，但如果您仅在行数很大而不是行数较少时遇到这种情况，您应该考虑不使用 .net gridviews，因为它们的性能很慢。

快速的谷歌搜索将为您提供所需的每种技术的大量网格。

如果您正在使用 .net “datagridview”，请尝试在您的项目中使用此 dll，我知道它对我有很大帮助，并且我努力寻找它...

[http://speedy.sh/dHhX4/SpeedUpDGV.rar](http://speedy.sh/dHhX4/SpeedUpDGV.rar)

将 dll 添加到引用后，只需像这样使用它：

```
YourGridviewName.SpeedUpThisGridView(true); 
```

您还应该考虑以某种异步方式分页或发送信息，然后重新加载它......

但这只是在案件处理大量信息的情况下

希望我有所帮助。

# javascript - 用作参数时，参数引用什么？

> ID：15077135
> 
> 赞同：1
> 
> 时间：2013-02-25T21:47:50.480
> 
> 标签：javascript

这是[下划线](http://underscorejs.org/)的 _.extend 。

```
 // Extend a given object with all the properties in passed-in object(s).
  _.extend = function(obj) {
    each(slice.call(arguments, 1), function(source) {
      if (source) {
        for (var prop in source) {
          obj[prop] = source[prop];
        }
      }
    });
    return obj;
  }; 
```

该函数`call`需要一个 this 值，后跟一个参数列表。

如果传递的唯一参数是 '1'，则 slice 将返回一个省略第一项的数组。

但是，如何将参数用作我的 MDN 定义的 this 值。

MDN

[称呼](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

[片](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

[论据](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:59:44.823

它总是引用相同的东西，传递给包含函数的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:03:14.640

Using arguments as the this value applies the function to arguments. It would be like doing arguments.slice(1), except you can't because arguments is technically not an array.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:00:06.680

我相信“这个”是隐含的。有时你必须“强制”一个虚假的列表来应用到一些 Array 原型上，否则它将无法工作。

如果是这样，我可能会误解您的问题-我深表歉意。

# javascript - 单词边界处元音的正则表达式

> ID：15077140
> 
> 赞同：3
> 
> 时间：2013-02-25T21:48:07.960
> 
> 标签：javascript, regex, match

我正在尝试匹配所有满足在单词开头和结尾出现元音的条件的单词。

我尝试了什么（在 JS 中，所以我可以[摆弄](http://jsfiddle.net/bcajw/1/)它）：

```
var t = 'are ice apple cat dog'
var u =  t.match(/(\b[aeiou]\w+[aeiou]\b)+/); 
alert (u);  // should match 'are,ice,apple' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:52:38.247

给它一个[`g`全局标志](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)，这样它就会匹配所有的。您也可以放弃 outer `( )+`，因为它不会为您带来任何好处。

```
var u =  t.match(/\b[aeiou]\w+[aeiou]\b/g); 
                                        ^ 
```

[http://jsfiddle.net/XTAtc/](http://jsfiddle.net/XTAtc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:58:06.547

如果你想匹配所有满足条件的单词，你需要在 'g' 修饰符到你的正则表达式

[http://www.w3schools.com/jsref/jsref_regexp_g.asp](http://www.w3schools.com/jsref/jsref_regexp_g.asp)

```
var t = 'are ice apple cat dog'
var u =  t.match(/(\b[aeiou]\w+[aeiou]\b)+/g); 
alert (u);  // it now matches 'are,ice,apple' 
```

# algorithm - 在最近对算法的时间复杂度中，O(n) 来自哪里？

> ID：15077143
> 
> 赞同：0
> 
> 时间：2013-02-25T21:48:20.100
> 
> 标签：algorithm, closest-points

最近对问题的时间复杂度为 T(n) = 2T(n/2) + O(n)。我知道 2T(n/2) 来自这样一个事实，即该算法应用于 2 组原始大小的一半，但为什么其余的结果为 O(n)？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:15:01.953

查看[http://en.wikipedia.org/wiki/Closest_pair_of_points_problem](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem)，它清楚地提到了 O(n) 的来源（平面案例）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T22:26:57.140

任何分而治之的算法都将包含一个递归的“除法”组件和一个将递归结果放在一起的“合并”组件。壁橱对中的线性 O(n) 分量来自将“除”步骤的结果合并为合并的答案。

# perl - Perl - 将 PC UTF-8 转换为 PC ANSI

> ID：15077145
> 
> 赞同：4
> 
> 时间：2013-02-25T21:48:22.290
> 
> 标签：perl, unicode, ansi

我有一个编码为 PC UTF-8 的文件。我想将文件转换为 PC ANSI。

我已经尝试过以下方法，但我总是将输出文件设为 PC UTF-8。

```
use Encode;

$infile = $ARGV[0];
open(INFILE, $infile);

my $outfile = "temp.txt";

open(OUTFILE, ">$outfile");

while(<INFILE>) {
  my $row = $_;
  chomp $row;

  $row = Encode::encode("Windows-1252", $row);
  print OUTFILE $row."\n";

}

close INFILE;
close OUTFILE; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T23:24:14.673

问题是您永远不会解码您编码的数据。

```
use strict;
use warnings;
use Encode qw( encode decode );

open(my $INFILE,  '<', $ARGV[0]) or die $!;
open(my $OUTFILE, '>', $ARGV[1]) or die $!;

while (my $utf8 = <$INFILE>) {
   my $code_points = decode('UTF-8', $utf8);    # <-- This was missing.
   my $cp1252 = encode('cp1252', $code_points);
   print $OUTFILE $cp1252;
} 
```

但是你可以更容易地做到这一点：

```
use strict;
use warnings;

open(my $INFILE,  '<:encoding(UTF-8)',  $ARGV[0]) or die $!;
open(my $OUTFILE, '>:encoding(cp1252)', $ARGV[1]) or die $!;

while (<$INFILE>) {
   print $OUTFILE $_;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:02:32.947

您应该使用 PerlIO-Layers，而不是手动进行解码和编码。`binmode`您可以使用该函数或在三个参数的模式参数中指定一个层`open`：

```
use strict; use warnings;
use autodie;

open my $INFILE,  '<:utf8',                 $ARGV[0];
open my $OUTFILE, '>:encoding(iso-8859-1)', "temp.txt";
#                   ^-- the layers

while (my $line = <$INFILE>) {
  print $OUTFILE $line;
} 
```

请注意，Perl 默认情况下不会以 UTF8 格式打开文件，您还必须指定解码层。层`:encoding(utf8)`太普通了，可以`:utf8`直接说。

您可以列出所有可用的编码

```
use Encode;
print "$_\n" for Encode->encodings(); 
```

# ajax - 异步 AJAX 调用相互覆盖

> ID：15077146
> 
> 赞同：0
> 
> 时间：2013-02-25T21:48:23.777
> 
> 标签：ajax, jquery

我有一个仪表板页面，并且正在使用 jQuery 通过一个 ajax 调用来更新每个图形。

如果它使用 async:false 运行 AJAX，那么一切正常，但显然很慢，因为调用是一个接一个地进行的。

当我运行 async:true 时，查询会执行，但它们都输出到同一个元素并相互覆盖。

如何确保成功和错误函数中的 jQuery 选择器仍然指向它们的原始目标，而不是全部指向最终框？

我的代码：

```
//update sparklines on dashboard page
        $(".convobox7").each(function() {
            id = $(this).attr('id');
            $("#convobox-7-"+id).prepend("<img src='img/ajax_loader.gif'/>");
            $.ajaxQueue({
                url: '_ajax/getFunnelReport',
                type: "POST",
                dataType: "json",
                async: true,
                data: {funnel:$(this).attr('id'), dimension:'date'},
                timeout: 50000,
                success: function(json) { 
                    var data = json;
                    if (data.success=='true') {
                        $("#convobox-7-"+id).html(data.htmlconv+"<br/><small>Past week</small>");
                        gebo_peity.init();
                    }

                },
                error: function(x, t, m) {
                    $("#convobox-7-"+id).html("");
                }
            })
        }); 
```

注意我在这里使用了 ajaxQueue 插件，但是没有它也会发生同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:01:11.327

您需要本地化`id`：

```
var id = $(this).attr('id'); 
```

可能还有其他问题需要解决，但这是肯定的。

## 编辑

试试这个 ：

```
$(".convobox7").each(function() {
    var id = $(this).attr('id');
    var $el = $("#convobox-7-"+id).prepend("<img src='img/ajax_loader.gif'/>");
    $.ajaxQueue({
        url: '_ajax/getFunnelReport',
        type: "POST",
        dataType: "json",
        data: {funnel:id, dimension:'date'},
        timeout: 50000,
        success: function(data) {
            if (data.success == 'true') {
                $el.html(data.htmlconv+"<br/><small>Past week</small>");
                gebo_peity.init();
            }
        },
        error: function(x, t, m) {
            $el.html("");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:52:28.950

这与函数闭包有关，因为您在成功/错误函数之外声明了变量。更好的方法是在错误/成功函数中使用 $(this) 引用，而不是在处理程序之外分配它。

编辑：在 ajaxQueue 的错误/成功处理程序的上下文中，我不确定 $(this) 指的是什么，您可能需要导航到父元素。我没有立即看到任何明确的文档。这是我对 javascript 文档最大的不满之一，$(this) 有时不是你想的那样，也没有记录：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:50:51.177

愚蠢的问题，但是由于您已经将元素 ID 发送到服务，它是否有理由无法将其发送回？那么您可以简单地将其用作选择器，确保您拥有所需的项目。

# vb.net - FillPolygon 带孔

> ID：15077148
> 
> 赞同：1
> 
> 时间：2013-02-25T21:48:34.870
> 
> 标签：vb.net, graphics, drawing, polygon

我想创建一个填充多边形内部的“填充”，使用点列表创建，但能够删除它的孔。

我的旧代码：

```
Private Sub DrawSomething(ByVal points as List(of Point), _
ByVal myBrush As System.Drawing.Brush, _
ByVal myGraphics As System.Drawing.Graphics)
  myGraphics.FillPolygon(myBrush, points)
End Sub 
```

它只是填充由列表中点的轮廓创建的多边形。

如何填充多边形，但排除其中的孔（我知道在里面，我已经测试过）：

```
Private Sub DrawSomething(ByVal points as List(of Point), _
ByVal holes as List(of List(of Point)), _ 
ByVal myBrush As System.Drawing.Brush, _
ByVal myGraphics As System.Drawing.Graphics)

' fill the contour created by points, excluding the contours created by holes
End Sub 
```

有什么我可以使用的，已经创建的吗？我可以以某种方式绘制原始多边形并移除孔吗？最好的方法是什么？

我尝试了什么 - 示例：我做了以下事情：

```
Private Sub DrawSomething(ByVal points as List(of Point), _
ByVal holes as List(of List(of Point)), _ 
ByVal myBrush As System.Drawing.Brush, _
ByVal myGraphics As System.Drawing.Graphics)

  Dim myGraphicsPath As Drawing2D.GraphicsPath = New Drawing2D.GraphicsPath(Drawing2D.FillMode.Winding)
  myGraphicsPath.AddLines(points)
  Dim myRegion As System.Drawing.Region = New System.Drawing.Region(myGraphicsPath)
  Dim otherGraphicsPath As Drawing2D.GraphicsPath = New Drawing2D.GraphicsPath(Drawing2D.FillMode.Winding)  
  ForEach otherPoints as List(of Point) in holes
    otherGraphicsPath.AddLines(otherPoints)
  Next
  myRegion.Exclude(otherGraphicsPath)
  myGraphics.FillRegion(myBrush, myRegion)

End Sub 
```

这还不错......它确实排除了内部多边形，但它也在轮廓之间绘制了一片“空”。所以，我想这行不通。

谢谢你。

编辑：添加图片：![在此处输入图像描述](../Images/d95e45f742bd31ffd537c2400e7b05e8.png)

轮廓作为点列表（“points”）给出，孔作为列表列表（“holes”）给出。右边的图片有我得到的线条的粗略图（即使孔和轮廓没有共同点） - 当我移动图像时线条会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:34:19.227

尝试在 GraphicPath 对象上使用 StartFigure 和 CloseFigure：

```
For Each otherPoints as List(of Point) in holes
  otherGraphicsPath.StartFigure()
  otherGraphicsPath.AddLines(otherPoints)
  otherGraphicsPath.CloseFigure()
Next 
```

没有它，我认为你所有的对象都相互连接。

# python - Python：使用 Flask 构建主题可写站点

> ID：15077149
> 
> 赞同：0
> 
> 时间：2013-02-25T21:48:39.487
> 
> 标签：python, flask, jinja2

我正在使用 python-flask 编写一个网站，但遇到了一些问题。我的目的是每个用户都可以编写一个主题。我已经解决了主题引擎部分。我的问题从目录开始。

我们所知道的烧瓶中有两个名为`templates`和的目录`static`。当用户上传他/她的主题时，我应该将它放入`templates`还是`static`？

在用户上传的主题中，有`assets(js etc.)`和文件。`html`如果我将它们放入`templates`目录中，我将无法访问这些`css,js etc.`文件。

否则，如果我将它们放入`static`文件夹，jinja2 找不到`html`文件，有些人说不要将`html`文件放入静态文件夹。

现在我该怎么办？我应该添加另一个名为 的文件夹`userthemes etc.`吗？

现在，我的目录是这样的：

```
/python
   /static
   /templates
     login.html
     admin_page.html
   app.py 
```

当`index.html`用户上传他/她的主题时会出现。如果你能提供帮助，我会很高兴。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T13:37:03.247

我承认这个问题是在一年前提出的，但问题仍然存在。Flask-Themes 到目前为止还不起作用..因此我必须自己找到一种方法来完成它。

其实这是一个微不足道的过程。

一个干净的结构是以后维护的必要条件（即使它是一个作者的项目）。

因此，尝试调整 Özcan 的结构，以获得多模板配置，我们可以有这样的结构：

```
/python
_ _ _ _app.py
_ _ _ _config.py
______/templates
________________/default
_ _ _ _ _ _ _ _ _ _ _ _index.html
________________/custom
_ _ _ _ _ _ _ _ _ _ _ _index.html 
```

我不知道他的应用程序文件上有什么代码，但我想在**app.py**中有这样的东西：

```
from flask import Flask, render_template

import config
app = Flask(__name__, template_folder='/templates/' + config.Config.ACTIVE_THEME)

@app.route('/')
def main():
  return render_template('index.html')

if '__name__' == '__main__':
  app.run() 
```

config.py 是这样的：

```
class Config(object):
    ACTIVE_THEME='default' 
```

**模板**文件夹中的**默认**主题 index.html可能如下所示：

 **```
<head>
  # We have the ability to include the css from the current path instead of having a separate static folder
  <style type='text/css'> {% include 'style.css' %} </style>
</head>
<body>
    <h1> This is the "default" theme </h1>
</body> 
```

而**自定义**主题 index.html 如下所示：

```
<head>
  <style type='text/css'> {% include 'style.css' %} </style>
</head>
<body>
    <h1> This is the "custom" theme </h1>
</body> 
```

现在，访问`127.0.0.1:5000`将显示“这是“默认”主题”，因为实际上已加载默认主题。

要更改此设置，您必须按以下方式编辑配置文件：

```
class Config(object):
    # Set ACTIVE_THEME from default to custom
    ACTIVE_THEME='custom' 
```

保存更改，重新加载页面，您应该会看到“这是“自定义”主题”。

这是一个非常基本的“hack”，但如果您对您的应用程序很认真，我建议您使用蓝图，除此之外，还有必须维护 2 个配置文件而不是一个配置文件的不便。

为了避免这些问题，我使用了蓝图和应用程序的良好结构。

例如，我在应用程序初始化后定义配置，所以不是这样：

```
import config
app = Flask(__name__, template_folder=/templates/' + config.Config.ACTIVE_THEME) 
```

它是这样的：

```
app = Flask(__name__)
app.config.from_object('config.Config') 
```

在包含所有视图的单独文件中，顶部的以下行：

```
# doing an "import app" would raise an error because of it being a circular import
import config
active_theme = config.Config.ACTIVE_THEME

# Watch out for the second argument as it seems to add a prefix to successive defined arguments. In fact you could swap the "themes" part to it and remove it from the third argument, but I prefer to leave it like this to avoid future headaches.
posts = Blueprint('posts', '', template_folder='templates/' + active_theme + '/post') 
```

它还可以通过其他方式进行扩展，例如用户会话、数据库配置等。

希望这可以帮助某人。**

# ruby-on-rails - 安装 mongoid 后如何创建 ActiveRecord 脚手架？

> ID：15077150
> 
> 赞同：2
> 
> 时间：2013-02-25T21:48:41.997
> 
> 标签：ruby-on-rails

每次我运行`rails g scaffold ModelName`一个 mongoid 模型迁移时都会创建。不过，我想创建一个 ActiveRecord 脚手架。我该怎么做呢？

```
rails g active_record:scaffold ModelName 
```

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-19T07:14:45.473

ActiveRecord 生成器仍然可用，您只需要在使用它们时指定使用“active_record”版本。

例如，此时“rails g model user email”生成一个 Mongoid 模型，但“rails g active_record:model user email”生成一个 ActiveRecord 模型并创建所需的迁移。

如果您选择将其设为 Mongoid 模型，则无需担心迁移。如果您选择将此作为 ActiveRecord 模型，请使用“rails db:migrate”运行迁移。（Rails 5 将 rake 功能移到 rails 命令中）

# javascript - 将数据从表单发送到电子邮件地址

> ID：15077152
> 
> 赞同：-1
> 
> 时间：2013-02-25T21:48:47.613
> 
> 标签：javascript, jquery

我有一个非常简单的表格。我要做的就是将数据通过电子邮件发送到电子邮件地址。有没有办法只使用 JQuery 或 javascript 来做到这一点？我可以在没有 php 或任何其他服务器端语言的情况下做到这一点吗？这是可行的还是我只是在大声思考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:51:00.540

> 有没有办法只使用 JQuery 或 javascriopt 来做到这一点？

不。

> 我可以在没有 php 或任何其他服务器端语言的情况下做到这一点吗？

不够[可靠，无法在 WWW 上使用](http://isolani.co.uk/articles/mailto.html)。

您需要一个服务器端进程。那里有一些第三方托管的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T21:53:10.010

我认为您只是在大声思考...出于以下几个原因：

1.  如果你能做到这一点，你就不想这样做；您将在客户端 javascript/jQuery 代码中公开您的 SMTP 中继、用户名/密码和收件人电子邮件地址（任何有权访问您页面的人都可以查看）

2.  如果没有一些知道如何与 SMTP 交互的服务器端代码，您将无法做到这一点。

那里可能有服务（这将构成您的服务器端部分）......虽然我不知道任何手头。

# sql - 如何仅选择此 dbml 查询的第一行？

> ID：15077161
> 
> 赞同：0
> 
> 时间：2013-02-25T21:49:23.883
> 
> 标签：sql, linq-to-sql

这是我原来的查询

```
public UserChallenge GetUserChallenge(int userId, int challengeId)
    {
                   var result = from userChallenge in DataContext.UserChallenges
                   where userChallenge.UserId == userId && userChallenge.ChallengeId == challengeId
                   select userChallenge; 
```

这是修改后的查询

```
 var result = from userChallenge in DataContext.UserChallenges
                       where userChallenge.ChallengeId == challengeId
                       select userChallenge; 
```

有超过 1 个 userChallenge 持有该 ChallengeId。我怎样才能只选择第一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:54:23.580

查看 FirstOrDefault。

```
var result = (from userChallenge in DataContext.UserChallenges
               where userChallenge.UserId == userId && userChallenge.ChallengeId == challengeId
               select userChallenge).FirstOrDefault(); 
```

但从长远来看，确定一种唯一标识您的记录的方法可能会更有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:55:31.863

您可以使用`First`或`FirstOrDefault`来获取列表中的第一项。`FirstOrDefault`如果未找到任何项目，则返回`null`，而`First`失败并显示“序列不包含元素”错误。

```
var result = (from userChallenge in DataContext.UserChallenges
  where userChallenge.ChallengeId == challengeId
  select userChallenge).FirstOrDefault(); 
```

# git - 带有 subgit 和 apache 的 GIT SVN

> ID：15077164
> 
> 赞同：2
> 
> 时间：2013-02-25T21:49:37.537
> 
> 标签：git, apache, svn, subgit

我已经开始评估一款名为[subgit](http://subgit.com/)的软件，它可以让你无缝地将一个 repo 与 SVN 或 GIT 连接起来。

在我们的整个组织中，我们使用 apache 连接我们的 repos，并且尝试将其与 GIT 结合起来变得有些麻烦。

总的来说，我们希望允许在没有身份验证的情况下进行读取访问，并且应该对写入进行身份验证，这在 SVN 中可以正常工作，但在 GIT 中似乎没有那么简单。

除此之外，让 apache 识别它是否是 GIT/SVN 请求并找出指向客户端的位置，这样无论您使用什么回购系统，您都可以使用相同的 url。

下面是配置，现在我们对 svn 具有正确的读取访问权限，没有身份验证，并且使用身份验证进行写入访问，但对于 GIT，它是没有身份验证的 r/w。

```
ServerName android.subgit.domain.tld
DocumentRoot /home/subgit/public_html
CustomLog /home/subgit/logs/access_log combined
SetEnv GIT_PROJECT_ROOT /home/subgit/repos/subgit-repo
SetEnv GIT_HTTP_EXPORT_ALL
SetEnv REMOTE_USER $REDIRECT_REMOTE_USER
ScriptAlias /git/ /usr/local/libexec/git-core/git-http-backend/
   <LocationMatch "/svn">
      DAV svn
      SVNPath /home/subgit/repos/subgit-repo
      Include /etc/apache2/conf.d/auth-mysql
      AuthzSVNAccessFile /home/subgit/etc/subgit-repo
      <LimitExcept GET PROPFIND OPTIONS REPORT>
          Require valid-user
      </LimitExcept>
   </LocationMatch>
   <LocationMatch "/git">
      Options +ExecCGI
   </LocationMatch>
   <Directory "/usr/local/libexec/git-core/git-receive-pack">
     Include /etc/apache2/conf.d/auth-mysql
     Require valid-user
   </Directory>
</VirtualHost> 
```

任何输入将不胜感激！

# ios - 将 UIView 布局同步到 OpenGL 帧

> ID：15077165
> 
> 赞同：10
> 
> 时间：2013-02-25T21:49:42.330
> 
> 标签：ios, layout, opengl-es, uiview

我们正在开发一款在 OpenGL ES 视图上显示 2d 元素的游戏`UIViews`（具体来说，我们使用的是 GLKit `GLKView`），并且在保持位置完全同步时遇到了问题。

在父视图中`layoutSubviews`，我们将世界中的 3d 位置投影到屏幕上，并将其用作`UIView`游戏中多个“标记”的位置。整个游戏只响应用户移动相机而更新，相机`setNeedsLayout`每次移动时都会告诉视图。

一切正常，除了标记似乎与 3d 渲染不同步大约 1 帧。我说粗略是因为（1）这是一个估计！(2) 我想知道是否存在潜在的多线程问题：不`GLKView`同步到特殊的屏幕刷新回调或其他什么？

有没有办法挂钩视图的 layoutSubviews 以便它同步到 3d 视图更新？

**更新**`layoutIfNeeded`：奇怪的是，之后立即打电话`setNeedsLayout`会使问题*变得更糟*！可能会输出 2 帧或更多帧。真是搞不懂啊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:36:08.467

是什么触发了您对 LayoutSubviews 的调用？

这完全取决于在 RunLoop 中触发调用的位置与触发 GLK 更新调用的位置。

一般来说，对于您正在做的事情，我的目标是将您的布局作为 GLK 更新的副作用 - 即不要等待 layoutSubviews 更改您的位置。

（如果您使用的是 OpenGL，那么整个“布局”系统对您来说并没有多大用处：GLK 在其自己的可变帧速率小世界中运行，您希望将其作为您的参考点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T08:57:36.387

如果不使用 OpenGL 绘制视频帧（在相同的上下文中绘制，以便您始终确定一帧包含相同时间的视频和动画），这是不可能正确完成的。你所做的一切，帧率补偿，延迟预测，只取决于机会，并且总是有点不同步。

我不熟悉，`UIView`但如果有任何方法可以让它播放音频并将帧复制到纹理，那就这样做。与视频相比，音频中的延迟更容易补偿，并且人类不太明显。

# netty - 如何在 Netty 4.0.0.Beta1 中记录 HTTP 请求/响应？

> ID：15077167
> 
> 赞同：1
> 
> 时间：2013-02-25T21:49:49.757
> 
> 标签：netty

使用 Netty 4.0.0.Beta1，我将传入/传出 HTTP 流量记录到基于 netty 的服务器的最佳方式是什么？我的管道目前是：

```
p.addLast("decoder", new HttpRequestDecoder());
p.addLast("aggregator", new HttpObjectAggregator(1048576));

p.addLast("encoder", new HttpResponseEncoder());
p.addLast("handler", new MyBusinessLogicHandler()); 
```

我尝试编写一个实现的处理程序，`ChannelInboundMessageHandler<FullHttpRequest>`然后在该`inboundBufferUpdated(ChannelHandlerContext ctx)`方法中进行日志记录，这对于传入的请求似乎工作正常，但这是推荐的方式吗？

当我尝试实现`ChannelOutboundMessageHandler<FullHttpResponse>`时，我没有成功地看到`flush(ChannelHandlerContext ctx, ChannelPromise promise)`方法中的实际 FullHttpResponse 对象。

建议？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:49:52.343

注意：Netty API 自测试版以来发生了很大变化。现在您可以`LoggingHandler`在管道中添加一个。 `MessageLoggingHandler`并且`ByteLoggingHandler`消失了。

您可以`MessageLoggingHandler`在管道中的编解码器处理程序之后（即之前`MyBusinessLogicHandler`）。默认情况下，它会在`DEBUG`级别记录所有消息和事件，因此您可能需要对其进行调整。如果您对低级流量转储比较感兴趣，请使用`ByteLoggingHandler`并将其放在编解码器处理程序之前。

# c++ - 为什么我必须把这个函数静态

> ID：15077168
> 
> 赞同：3
> 
> 时间：2013-02-25T21:49:51.487
> 
> 标签：c++, static

我试图理解`Named Constructor Idiom`我的例子中的

点.h

```
class Point
{
    public:
        static Point rectangular(float x, float y);
    private:
        Point(float x, float y);
        float x_, y_;
};
inline Point::Point(float x, float y) : x_(x), y_(y) {}
inline Point Point::rectangular(float x, float y) {return Point(x,y);} 
```

主文件

```
#include <iostream>
#include "include\Point.h"
using namespace std;

int main()
{
    Point p1 = Point::rectangular(2,3.1);
    return 0;
} 
```

它不编译如果`Point::rectangular`不是`static`，我不明白为什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T21:59:31.867

在这种情况下，`static`函数前面的关键字意味着该函数不属于该类的任何特定*实例*。普通类方法有一个隐式`this`参数，允许您访问该特定对象的成员。但是`static`成员函数没有隐式`this`参数。本质上，静态函数与自由函数相同，只是它可以访问声明它的类的受保护和私有成员。

这意味着您可以在没有该类的实例的情况下调用静态函数。而不是需要类似的东西

```
Point p1;
p1.foo(); 
```

你只需这样做：

```
Point::foo(); 
```

如果您尝试像这样调用非静态函数，编译器会抱怨，因为非静态函数需要一些值来分配给隐式`this`参数，并且`Point::foo()`不提供这样的值。

现在你想要`rectangular(int, int)`静态的原因是因为它用于`Point`从头开始构造一个新对象。您不需要现有`Point`对象来构造新点，因此声明函数是有意义的`static`。

# java - 如何在java中使用特定时间的循环？

> ID：15077170
> 
> 赞同：-1
> 
> 时间：2013-02-25T21:50:10.417
> 
> 标签：java, applet

我想要做的是在特定的时间（如 10 秒）内执行循环，在此期间我想计算在小程序窗口中单击鼠标的次数。

像这样的东西

```
for(10 seconds)
{
    a=getClickCount()
}

texfield.setText(+a); 
```

我面临的问题是当我停止点击时计数的值开始增加，然后它开始逐秒增加，直到现在我一直在使用 nanoTime 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:54:47.280

如果我是你，我会实现一个[MouseListener](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)。

设置一个标志来象征计数的开始并存储当前时间戳，然后定期检查当前时间并将当前时间的秒数与您保存的时间戳进行比较。在规定时间内每次成功点击都会增加一个整数值。然后，您只需从 MouseListener 对象调用 getClickCount()。

一旦当前时间比存储时间晚 10 秒，则将该标志设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:03:53.710

我认为实现这一点的最佳方法是使用[Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)和 MouseListener（正如 Chris Cooney 所提到的）。

当您想开始计数 10 秒时 - 设置计时器并将侦听器注册到它的事件。
打开`boolean`表示您应该计算点击次数的选项。
只要`boolean`标志设置为，并且在您的 MouseListener 中开始计数`true`。

一旦 Timer 的事件激活您的侦听器 - 您可以关闭`boolean`标志并获取实际的点击次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:59:35.853

你可以使用线程吗？像这样：

```
static final int SLEEP_MILLIS = 1000;//1 sec

Thread counter = new Thread("count click thread") {

    public void run() {
        int nbMillis = 10000; //10sec
        do {
            a = getClickCount();
            refreshView();
            Thread.sleep(SLEEP_MILLIS);
            nbMillis -= SLEEP_MILLIS;
        } while(nbSec>0);
    }
};

counter.start(); 
```

refreshView() 包含编辑文本的代码。SLEEP_MILLIS 包含刷新时间间隔。

# javascript - XHR 流媒体设计关闭连接？

> ID：15077171
> 
> 赞同：8
> 
> 时间：2013-02-25T21:50:10.743
> 
> 标签：javascript, xmlhttprequest, protocols, http-streaming

我正在阅读这篇文章：[http](http://blog.pusher.com/what-came-before-websockets/) ://blog.pusher.com/what-c​​ame-before-websockets /，下面的文字引起了我的注意：

> XHR Streaming 在所有浏览器中都有效，XMLHttpRequest 对象的 responseText 将继续增长，直到连接关闭，这意味着最终必须强制重新连接以清除此缓冲区。

如果我理解正确，这是否意味着每当缓冲区达到一定大小时（顺便说一下，这里的实际大小是多少？），连接将自行重置以清除此缓冲区？换句话说，XHR 流与这个缓冲区的大小一样长？

有人可以确认这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T00:22:51.033

XMLHttpRequest 不是为以流方式使用而设计的。只要服务器发送更多数据，*浏览器就会继续将其附加*到`responseText`XHR 对象中的字段。

因此，我很确定他们的意思是*使用 XHR 进行流式传输的 JS 代码*必须定期断开连接并打开一个新连接——否则由于保留所有接收到的数据而导致内存泄漏，以及浪费时间重新分配一个永远增长的字符串。

也就是说，限制是您必须实施才能获得可接受的长期性能的限制，而不是浏览器强加的限制。（很可能还有浏览器对响应大小施加的上限，但我不知道是否存在。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:43:59.170

实际上，连接会更早关闭，因为 Web 服务器、前端负载平衡器和 ISP 代理对于任何连接都将具有最长的生命周期。如果你想在移动浏览器上使用它，你必须使用 SSL，否则移动运营商代理将缓冲数据，当连接终止时，你将不会获得流式传输，而是整个响应。

浏览器对累积的正文文本有内部最大大小，但这很高，所以你不太可能点击它。在这种情况下，xhr 请求会引发错误并终止。

使用强大的重试逻辑实现您的代码。我建议使用 HTML5 EventSource 而不是使用普通的 XHR。您还可以搜索一些用于 EventSource 的 SHIM api 包装器，例如如何使用 XHR 进行流式传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:54:40.103

Streaming 是 XHR 的扩展，它允许您在数据进入时检索数据片段。否则您必须等到收到整个消息。无论如何，它仍然有一个缓冲区要填充。实际上，它仅适用于少数浏览器。无论如何，Web 套接字通常是更好的选择。

使用常规 XHR，您可以有一个长轮询请求，其中服务器不发送任何东西，直到它有东西要发送。收到东西后，您可以让客户端重新发起请求。在最佳条件下，您可以让该请求永远持续下去，但您不能保证中间的某些东西不会终止连接。因此，对于长轮询，您通常希望服务器在一定时间后发送心跳以强制客户端更新连接（如 5 分钟）。

# c++ - 提升指向 valarray 的原始指针

> ID：15077173
> 
> 赞同：2
> 
> 时间：2013-02-25T21:50:19.823
> 
> 标签：c++, valarray, raw-pointer

我正在开发一个具有 C 接口以实现兼容性的库

```
void interface(double* context, size_t num_elements); 
```

while`context`指向存储`num_elements` `double`s 的原始内存。在代码的其余部分中，是否有任何策略来构造一个`std::valarray`临时管理的`context`而不在库调用结束后释放它的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:10:40.533

你不能创建一个简单的容器来满足你的需要吗？这是一个我没有测试的小例子：

```
template <class T>
class custom_valarray
{
public:

    // Ctor/dtor
    custom_valarray() { clear(); }
    ~custom_valarray() { clear(); }
    custom_valarray( T *ptr, const unsigned &s ) { set(ptr,s); }

    // Clear container
    void clear() { data = nullptr; size = 0; }

    // Set data
    void set( T *ptr, const unsigned &s ) { data = ptr; size = s; }

    // Test if container is set
    operator bool() const { return data; }
    bool empty() const { return data; }

    // Accessors
    T* data() { return data; }
    T& operator[] ( const unsigned &i ) 
    { 
        static T garbage;
        return i < size ? data[i] : garbage; 
    }

    // Iterators
    T* begin() { return data; }
    T* end() { return data+size; }

private:

    T *data;
    unsigned size;
}; 
```

# open-source - 我可以看到像 weka 这样的项目的签到吗

> ID：15077194
> 
> 赞同：0
> 
> 时间：2013-02-25T21:51:29.247
> 
> 标签：open-source, weka

[我想知道像 weka https://svn.cms.waikato.ac.nz/svn/weka/](https://svn.cms.waikato.ac.nz/svn/weka/)这样的开源项目发生的更新过程，所以如何按日期查看签入，以及如何为weka 的包已经存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:25:19.800

您需要学习如何使用 SVN：[https ://www.google.com/search?q=svn+introduction](https://www.google.com/search?q=svn+introduction)

如果您有 mac 或 linux，那么您应该能够从终端签出 repo，例如：

```
dethstaw:src gardner$ svn co https://svn.cms.waikato.ac.nz/svn/weka/trunk weka 
```

要开始为开源项目做贡献，最简单的事情就是寻找错误跟踪器并开始修复已知问题。（他们喜欢那个）我使用 Google [https://www.google.com/search?q=weka+bug+tracker找到了错误跟踪器](https://www.google.com/search?q=weka+bug+tracker)

祝你在新的冒险中好运。

# c# - 泛型类的扩展方法

> ID：15077195
> 
> 赞同：2
> 
> 时间：2013-02-25T21:51:32.157
> 
> 标签：c#, generics, extension-methods, fluent

我正在尝试创建一些流畅的 API；一种DSL。我一直遇到一个特定的问题，我还没有找到解决它的方法，在这里或其他地方，可以解决我所看到的确切问题。此外，我看到很多人问这个问题的许多变化。

这是我*想做*的一个明显做作的示例...

```
Run<Car>.Off<Road>();
Run<Car>.Off<Cliff>();
Run<Person>.Off<Road>();

Person pete = new Person();
pete.Run().Off<Road>();
pete.Run().Off<Cliff>(); 
```

最后两行将无法编译，给出未知方法的错误。我想我需要使用扩展方法来完成它，如果它甚至可能的话，但我一直无法想出一个可行的解决方案。这是我到目前为止...

```
public class Run<TActor, TTarget>
{
    public Run() { }
    public Run(TActor actor) { }
    public Run(TActor actor, TTarget target) { }

    public TActor Actor { get; set; }
    public TTarget Target { get; set; }
}

public static class Run<TActor>
{
    public static Run<TActor, TTarget> Off<TTarget>()
    {
        return new Run<TActor, TTarget>();
    }
} 
```

我尝试在 Run 上制作扩展方法，如下所示，但后来我遇到了问题，现在知道什么是 TActor 或 TTArget 类型。

```
public static class RunExtensions
{
    public static TRun Run<TRun>(this TRun run) where TRun : Run<TActor, TTarget>
    {
        // doesn't compile
    }

    public static Run<TActor, TTarget> Run<TActor>(this TActor actor)
    {
        // obviously this doesn't work either
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:58:29.380

您的两种扩展方法都只是缺少所需的其他通用参数：

```
public static class RunExtensions
{
    public static TRun Run<TRun, TActor, TTarget>(this TRun map) 
        where TRun : Run<TActor, TTarget>
    {
        return map;
    }

    public static Run<TActor, TTarget> Run<TActor, TTarget>(this TActor actor)
    {
        return new Run<TActor, TTarget>(actor);
    }
} 
```

# c# - 检查列表中的值是否匹配

> ID：15077196
> 
> 赞同：0
> 
> 时间：2013-02-25T21:51:36.010
> 
> 标签：c#, list

我有 2 个列表，如下所述

我如何验证 lstOldItems 中存在的所有**sitempath**值也存在于**lstNewItems****中**

**C# 代码**

```
List<ItemsUnderControlObject> lstNewItems
List<ItemsUnderControlObject> lstOldItems

public class ItemsUnderControlObject
{
 public ItemsUnderControlObject();

 public bool bButtonEnabled { get; set; }
 public short iChkInterval { get; set; }
 public int iItemUnderCtrlUniqueID { get; set; }
 public DateTime? ItemCreationDateTime { get; set; }
 public DateTime? ItemLastAccessDateTime { get; set; }
 public DateTime? ItemLastModifiedDateTime { get; set; }
 public long lngItemSize { get; set; }
 public string sItemBackupLocation { get; set; }
 public string sItemcategory { get; set; }
 public string sItemCurrentStatus { get; set; }
 public DateTime sItemDatabaseCreationDateTime { get; set; }
 public string sItemName { get; set; }
 public string sItemPath { get; set; }
 public string sItemRequestStatus { get; set; }
 public string sItemTask { get; set; }
 public string sItemValue { get; set; }
 public string sItemValueSHA256 { get; set; }
 public string sSystemID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:54:48.527

为什么不使用[这里看到](http://msdn.microsoft.com/en-us/library/bb300779.aspx)`Except`的 LINQ 的扩展方法：

```
var oldItemPaths = lstOldItems.Select(l => l.sItemPath).Distinct();
var newItemPaths = lstNewItems.Select(l => l.sItemPath).Distinct();
bool isSame = !oldItemPaths.Except(newItemPaths).Any(); 
```

或者，使用@Magnus 的方式和上面的代码（减去`Except`）：

```
bool isSame = oldItemPaths.All(x => newItemPaths.Contains(x)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T21:59:30.480

为了快速查找，首先将项目添加`lstNewItems`到 a`HashSet`中，而不是使用[`All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)：

```
var set = new HashSet<string>(lstNewItems.Select(x => x.sItemPath));
var res = lstOldItems.All(x => set.Contains(x.sItemPath)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T22:01:36.553

一个班轮，以防您不想将路径提取到不同的列表：

```
stOldItems.All(x => lstNewItems.Any(y=> x.sItemPath == y.sItemPath)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T21:57:07.223

试试linq，

类似的东西

```
List<string> sitempaths = lstNewItems.Select(i => i.sitempath).ToList();

bool hasSitempaths = lstOldItems
    .Where(x => sitempaths.contains(x.sitempath)).ToList()
    .Count == lstOldItems.Count; 
```

请注意，这实际上并未经过测试，您可能需要调整

# security - 在 DocumentRoot 之外存储文件与“拒绝所有”htaccess 指令之间是否存在安全差异？

> ID：15077197
> 
> 赞同：2
> 
> 时间：2013-02-25T21:51:35.830
> 
> 标签：security, .htaccess, document-root

知道`deny from all`指令将遍历其下的所有子目录和文件，并忽略“如果您忘记”复制`.htaccess`文件或创建`.htaccess`文件时输入错误的明显警告......

在 DocumentRoot 之外存储非公共文件与在 DocumentRoot*的*每个非公共目录*中*放置带有指令的文件之间是否存在**安全**风险？*`.htaccess``deny from all`*

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:34:35.590

这里有几点需要考虑：

1.  .htaccess 只会保护您的文件不被网络访问。例如，假设您有一个典型的 FTP 服务器设置，其中的虚拟用户仅限于文档根目录。如果攻击者获得了对您的 FTP 服务器的访问权（考虑到大多数 FTP 配置的不安全性，这并不是那么牵强），他们将可以访问 .htaccess 文件和文档根目录中的任何受保护文件。

    这只是一个可能不适用于您的环境的示例，但我真正想要理解的想法是 .htaccess 文件不会为您提供那么深的安全性。它们在一种情况下（通过 Internet 访问）保护您，但在其他情况下不保护您。

2.  您的服务器管理员可以禁用特定的 .htaccess 指令，禁用某些 Apache 模块（您的 .htaccess 文件可能会使用），甚至可以禁用 .htaccess 文件期间的使用。如果您无法控制 Apache 配置（我假设是这种情况，因为您选择使用 .htaccess 文件覆盖它），您也无法真正控制 .htaccess 文件是否为会受到尊重。这实际上取决于您与主机/服务器管理员的关系以及他们决定允许的内容。

3.  最后，如果 .htaccess 文件可由运行 Apache 服务器的用户写入，则有决心的黑客可以修改该文件。前任。如果您使用的是 Wordpress，许多流行的主题将要求对 .htaccess 文件具有写入权限，以便它们可以控制 URL 重写。我想其他一些内容管理系统也会这样做。

尽管如此，使用 .htaccess 文件（或直接更改您的 Apache 配置文件）对您来说仍然是一种完全有效的安全措施。这取决于您的整个环境是什么样的——您的服务器是如何配置的，您要保护什么，等等。希望我至少给了您一些思考的东西。**

# sql - SQL Server - 返回重复字段的完整记录

> ID：15077199
> 
> 赞同：0
> 
> 时间：2013-02-25T21:51:44.520
> 
> 标签：sql, sql-server

假设我有一个 SQL Server 表，其中包含许多列，类似于：

```
Col1:    Col2:    Col3:   ...   Coln:
Val1_1   Val1_2   Val1_3        Val1_n
Val2_1   Val2_2   Val2_3        Val2_n
Val3_1   Val3_2   Val3_3        Val3_n
Val3_1   Val4_2   Val4_3        Val4_n
Val3_1   Val5_2   Val5_3        Val5_n 
```

在这种情况下，对最后 3 条记录`Val3_1`重复`Col1`，而其余值不重复。

如何编写查询以返回`Col1`重复值以返回的完整列集：

```
Col1:    Col2:    Col3:   ...   Coln:
Val3_1   Val3_2   Val3_3        Val3_n
Val3_1   Val4_2   Val4_3        Val4_n
Val3_1   Val5_2   Val5_3        Val5_n 
```

我尝试使用该`Group By`函数，但我不得不写出每一列的名称（这非常令人沮丧），我希望得到以下内容：

```
SELECT MyTable.* FROM MyTable WHERE count(MyTable.Col1) OVER() > 1 
```

显然，这不起作用，但我怎么能按照这些思路做点什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T21:55:47.213

您可以使用子查询：

```
select *
from mytable t1
inner join
(
  select count(col1) Total, col1
  from mytable
  group by col1
  having count(col1) > 1
) t2
  on t1.col1 = t2.col1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/87fc3/2)

或者您可以使用`count(*) over()`：

```
select *
from
(
  select *,
    count(*) over(partition by col1) tot
  from mytable
) src
where tot > 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/87fc3/5)

# r - 如何从 R 中的 HDFS 读取压缩文件？

> ID：15077200
> 
> 赞同：1
> 
> 时间：2013-02-25T21:51:51.180
> 
> 标签：r, gzip, hdfs

Uinsg rhdfs 可以从 R 中的 HDFS 读取文件。但是，我在 HDFS 上的文件是 gzip 压缩的。如何将 HDFS 上 gzip 文件的纯文本内容读入 R？

到目前为止我尝试过的事情：

`gzcon(hdfs.file(path))`->`Error in gzcon(...) : 'con' is not a connection`

`memDecompress(hdfs.read(hdfs.file(path)), type="g")`->`Error in memDecompress(..., type = "g") : internal error -3 in memDecompress(2)`

也试过`memDecompress`了`type="u"`。

# java - 如何知道你正在下载什么

> ID：15077203
> 
> 赞同：0
> 
> 时间：2013-02-25T21:52:19.683
> 
> 标签：java, android

在我的应用程序中，我希望用户能够提交特定于我的应用程序的存档文件的直接 URL。目前，我的应用程序在接收链接、修复任何小 URL 问题、下载、取消存档和读取数据方面没有问题。问题在于下载的文件/页面类型不正确。

由于任何东西都可能具有我的存档类型的扩展名或找不到网页/页面（根据错误的 URL），并且我的应用程序并不明智。

在尝试取消归档错误类型的文件之前，如何确保应用程序正在下载正确的文件？我考虑过 MIME-Type，但似乎这与档案不一致。

# string - 如何根据行标题替换单元格的内容？

> ID：15077207
> 
> 赞同：2
> 
> 时间：2013-02-25T21:52:38.320
> 
> 标签：string, excel, vba, search, concatenation

我需要在第 1 行（a1 到 dv1）中的每个单元格中搜索“doc1”在该行的后续单元格中后跟“doc2”的实例。然后我需要将包含“doc1”的单元格下方的单元格中的内容与包含“doc2”的单元格下方的单元格中的内容连接起来，用逗号分隔，并替换单元格中的文本在包含“doc1”的单元格下方。

因此，例如，如果 a1 有“doc1”，b1 有“doc2”，a2 有“7”，b2 有“8”，那么我需要将 a2 替换为“7, 8”。

任何帮助将不胜感激。

谢谢，艾米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:22:59.300

这是 VBA 中的一个解决方案 - 您可以将其复制并粘贴到 VBA 的新模块中（首先备份您的电子表格），然后运行它（使用 F5）。要快速进入 VBA，请使用 alt-F11。我在代码中留下了我的 MSGBOX 语句被注释掉了。此外，代码一直运行到 DW1，因此它可以完成 DV1。

```
Option Explicit

Sub Doc1_Doc2_Merge()

    Dim CurrCol As Integer
    Dim CurrRow As Integer
    Dim NewValue As String
    Dim EndCol As String

    For CurrRow = 1 To 50 Step 2 '(assume 50 rows - skip 2 lines each time)
       CurrCol = 1

       EndCol = "$DW$" & Trim(Str(CurrRow))
       While Cells(CurrRow, CurrCol).Address <> EndCol

           'MsgBox Cells(CurrRow, CurrCol).Address & " " & Cells(CurrRow, CurrCol).Value

           If InStr(Cells(CurrRow, CurrCol).Value, "doc1") > 0 Then
               ' look at next cell
               If InStr(Cells(CurrRow, CurrCol + 1).Value, "doc2") > 0 Then
                   If Trim(Cells(CurrRow + 1, CurrCol + 1).Value) <> "" Then
                       NewValue = Cells(CurrRow + 1, CurrCol).Value & "," & Cells(CurrRow + 1, CurrCol + 1)
                       'MsgBox "New Value is " & NewValue
                       Cells(CurrRow + 1, CurrCol).Value = NewValue
                   End If
               End If

           End If

           CurrCol = CurrCol + 1
       Wend
    Next CurrRow

End Sub 
```

以下是测试结果： ![在此处输入图像描述](../Images/a056e36bb027d36e1846c4b04510f20a.png)

# java - 将 System.out.print 转换为 JOption 窗格？

> ID：15077209
> 
> 赞同：0
> 
> 时间：2013-02-25T21:52:42.797
> 
> 标签：java, swing, joptionpane, anagram

想要输出这个程序，它告诉两个单词是否是字谜。我想知道如何将所有 System.out.print 命令更改为 JOption 窗格命令！我很想得到任何帮助，因为我是一名一年级程序员并且有这个任务到期。

```
import java.util.Arrays;

public class NewAnagram
{
public static void main(String[] args)
{
    if (args.length != 2)
    {
        System.out.println("2 words have not been entered!");        
    }
    else
    {
        printPhrases(args[0], args[1]);                              
    }
}

public static boolean anagramSearch(String phrase1, String phrase2) 
{

    String ltrsOnlyOne = lettersOnly(phrase1);
    String ltrsOnlyTwo = lettersOnly(phrase2);      
    char[] first = ltrsOnlyOne.toLowerCase().toCharArray();
    char[] second = ltrsOnlyTwo.toLowerCase().toCharArray();

    Arrays.sort(first);
    Arrays.sort(second);

    if (Arrays.equals(first, second))
    {
        return true;
    }
    else
    {
        return false;
    }   
}

public static String lettersOnly(String word) 
{
    int length = word.length();
    StringBuilder end = new StringBuilder(length);
    char j;

    for (int i = (length - 1); i >= 0; i--) 
    {
        j = word.charAt(i);
        if (Character.isLetter(j)) 
        {
            end.append(j);
        }
    }
    return end.toString();
}

public static void printPhrases(String phrase1, String phrase2)
{
    boolean isFound = anagramSearch(phrase1, phrase2);
    if (isFound == true) 
    {
        System.out.println(phrase1 + " is an anagram of "+ phrase2);
    }

    if (isFound == false) 
    {
        System.out.println(phrase1 + " is not an anagram of "+ phrase2);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:58:00.240

像一条线

```
System.out.println(phrase1 + " is not an anagram of "+ phrase2); 
```

将在 JOptionPane 版本中：

```
JOptionPane.showMessageDialog(null, phrase1 + " is not an anagram of " + phrase2); 
```

其中第一个参数是对话框的*父级。*由于您的应用程序中没有任何其他窗口，因此只需通过`null`.

# javascript - 使用文本框计算数字

> ID：15077210
> 
> 赞同：1
> 
> 时间：2013-02-25T21:52:44.550
> 
> 标签：javascript, html, variables

我一直在尝试使用用户在文本框中给出的数字来计算数字。我一直在尝试使用以下代码。但是当我尝试测试它时，什么也没有发生。有什么我想念的吗？有没有一种方法可以使 imprint 变量成为全局变量？

```
 <form>
        <p>How many products do you want
            ingraved?<input id="imprint_amount" name="imprint_amount" type="text"/>
        </p>
        <p>Names to be Imprinted(one per
            line)<TEXTAREA COLS=25 NAME="imprint_text" ROWS=5 WRAP=HARD style="resize:none;"></textarea>
        </p>
         <input onclick="imprint_price" type="button" value="Finish"/>
        <p id="total_cost"></p>
    </form>
    <script type="text/javascript">

        function imprint_price() {
            var imprint_cost,
                imprint_quality,
                imprint_total;
            imprint_cost = 10.99;
            imprint_quantity = document.getElementById('imprint_amount');
            imprint_total = $imprint_cost * parseInt(imprint_quantity, 10);
            document.getElementById('total_cost') = "$" + imprint_total;

        } 
```

谢谢，特蕾西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:56:10.057

您将希望使用您在变量中引用的[输入元素](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)`value`的属性：

```
… parseInt(imprint_quantity.value, 10); 
```

对于任意 HTML 元素，您需要使用[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)（或`innerText`支持旧 IE）：

```
document.getElementById('total_cost').textContent = …; 
```

像您所做的那样分配给表达式应该会引发一个非常准确的异常，请检查浏览器的错误控制台以查找它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:56:11.057

在这一行中，您需要设置`innerHTML`元素的 。

```
document.getElementById('total_cost').innerHTML = "$" + imprint_total; 
```

这基本上将内部的文本设置`<p></p>`为`<p>$x.xx</p>`。

而且这条线应该是

```
imprint_quantity = document.getElementById('imprint_amount').value; 
```

它从文本框中检索值。

此外，在定义变量时，您写了“质量”。它应该是

```
imprint_quantity, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T22:06:10.087

将您的 javascript 更改为：

```
<script type="text/javascript">

    function imprint_price() {
        var imprint_cost,
            imprint_quantity,
            imprint_total;
        imprint_cost = 10.99;
        imprint_quantity = document.getElementById('imprint_amount').value;
        imprint_total = imprint_cost * parseInt(imprint_quantity, 10);
        document.getElementById('total_cost').innerHTML = imprint_total;
    }
</script> 
```

在这里工作 jsFiddle [http://jsfiddle.net/Zt38S/2/](http://jsfiddle.net/Zt38S/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T21:56:22.893

imprint_quantity = document.getElementById('imprint_amount');

=

imprint_quantity = document.getElementById('imprint_amount').value();

让我知道是否可以解决它，这是一个常见的错误。

# excel - 只计算带有文本/数据的字段，而不是公式

> ID：15077217
> 
> 赞同：13
> 
> 时间：2013-02-25T21:53:10.043
> 
> 标签：excel, count

我有一个给定月份内的员工人数列表，我将其与预算员工人数进行比较。我使用 vlookup 将预算与实际情况相匹配。然后： =IF(ISNA(M66),K66," ") 返回不在预算中但在实际值（HR 文件）中的名称，否则为空白。

现在我想计算列中返回的名称，但是即使它们是空白的，计数函数也无法识别单元格中的公式。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T22:01:15.550

[编辑 - 没有注意到“”中的空格 - 按照 Scott 的建议将其删除，然后在下面尝试]

如果数据范围是 A2:A100 尝试这个公式来计算文本值而不是 ""

`=COUNTIF(A2:A100,"?*")`

或者如果您也想包含数值

`=SUMPRODUCT((A2:A100<>"")+0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T00:28:43.903

```
COUNTA(A2:A100,"")-COUNTA(A2:A100) 
```

# c# - 我的重构不正确和清晰吗？

> ID：15077220
> 
> 赞同：0
> 
> 时间：2013-02-25T21:53:36.977
> 
> 标签：c#, refactoring, resharper

这是原始源代码，其中包含一个非常常见的代码模式，我认为它是一种反模式，或者充其量是不必要的冗长：

```
private bool SymbolDevice;
. . .
    if((oemInfo.IndexOf("SYMBOL") > -1) || (oemInfo.IndexOf("MOTOROLA") > -1))
                            SymbolDevice = true;
                        else
                        {
                            SymbolDevice = false;
                        } 
```

我会这样重构它：

```
SymbolDevice = ((oemInfo.IndexOf("SYMBOL") > -1) || (oemInfo.IndexOf("MOTOROLA") > -1)); 
```

Resharper（版本 2.0，可用于 Visual Studio 2003 / .NET 1.1 的最后一个版本，该项目是）以这种方式重构它：

```
SymbolDevice = (oemInfo.IndexOf("SYMBOL") > -1) || (oemInfo.IndexOf("MOTOROLA") > -1) ? true : false; 
```

我同意 Resharper 的重构改进了遗留代码，但是我有什么理由选择它而不是我的版本吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T22:03:35.150

我肯定会选择你的版本。`x ? true : false`相当于`x`。

# asp.net-mvc - 如何在登录后存储用户数据而无需查询数据库以显示此数据？

> ID：15077221
> 
> 赞同：0
> 
> 时间：2013-02-25T21:53:40.027
> 
> 标签：asp.net-mvc

我需要存储用户 ID、他的公司 ID 和姓名，这样我就不必在每次回发时查询数据库。

我知道我有以下选项：ViewData、TempData 或 auth cookie，但是，有没有更好的解决方案？

最好的祝福，

朱利亚诺·努内斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:54:43.200

这听起来像是[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)的经典用法。

> ASP.NET 会话状态使您能够在用户浏览 Web 应用程序中的 ASP.NET 页面时为用户存储和检索值。HTTP 是一种无状态协议。这意味着 Web 服务器将页面的每个 HTTP 请求视为一个独立的请求。服务器不保留先前请求期间使用的变量值的知识。ASP.NET 会话状态将在有限时间窗口内来自同一浏览器的请求标识为会话，并提供一种在该会话期间保持变量值的方法。默认情况下，为所有 ASP.NET 应用程序启用 ASP.NET 会话状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:56:14.443

[ASP.NET Profile Providers](http://msdn.microsoft.com/en-us/library/014bec1k%28v=vs.100%29.aspx)机制看起来像是您正在寻找的东西 - 特别是如果您已经在使用 Membership/Role 提供程序。

更多关于配置文件属性的通用文章：[MSDN](http://msdn.microsoft.com/en-us/library/2y3fs9xs%28v=vs.100%29.aspx)

# java - 带有 PlayN 的本机输入文本

> ID：15077224
> 
> 赞同：1
> 
> 时间：2013-02-25T21:53:45.630
> 
> 标签：java, playn, tripleplay

无论如何创建一个输入文本来打开设备目标的本机键盘？（来自 iOS 和 Android 设备的底部屏幕）。

我试过

```
tripleplay.ui.Field field = new Field(); 
```

但它只显示一个带有本机文本字段的弹出窗口。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:15:01.903

我害怕没有办法使用`Field`类来做到这一点。有关更多详细信息，请参阅此 [答案](https://stackoverflow.com/a/9468790/1594980)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:11:45.187

TriplePlay 中有一个名为的实验性新 API `NativeTextField`，可用于覆盖具有正确位置和尺寸的平台原生文本字段，使其看起来是 TriplePlay UI 的一部分。当用户点击它以使其获得焦点时，会显示操作系统键盘，并且文本输入会像在本机应用程序中一样正常工作。

目前只有 iOS 的实现，但最终会添加 Android 实现。

在您的喜欢中包含tripleplay-ios.jar `ios/pom.xml`：

```
<dependency>
  <groupId>com.threerings</groupId>
  <artifactId>tripleplay-ios</artifactId>
  <version>${playn.version}</version>
</dependency> 
```

然后向您的`Main.cs`文件添加调用：

```
 IOSTPPlatform.register(platform); 
```

返回的`platform`在哪里。`IOSPlatform``IOSPlatform.register`

将所有这些连接起来，然后`Field`将自动使用 iOS 上的本机文本字段实现。

需要注意的另一件事：本机文本字段仅在编辑文本时显示本机文本字段。文本编辑完成后，本机字段被删除，标准 TriplePlay 字段用于显示文本的当前值。

如果由于渲染略有不同而导致文本发生奇怪的移动，您可以将本机文本字段始终保留在该`Field.FULLTIME_NATIVE_FIELD`样式中。

# .htaccess - 如何使某些文件免于 .htaccess 重定向？

> ID：15077225
> 
> 赞同：0
> 
> 时间：2013-02-25T21:53:50.063
> 
> 标签：.htaccess, redirect, http-status-code-403

我有一个网站 (www.mysite.com)，我有一个临时重定向到另一个文件夹 (www.mysite.com/tempfolder/index.php)。我还在 www.mysite.com 的根文件夹中托管另一个名为 www.subsite.com 的站点。它有自己的 URL，但我不知道如何使整个子文件夹免于重定向！有任何想法吗？这是我的 .htaccess 文件现在的样子（完美地将所有内容重定向到临时登录页面）。

```
<Limit GET POST PUT>
 order deny,allow
 deny from all
 allow from ***
 allow from ****
 allow from *****
</LIMIT>
ErrorDocument 403 http://www.mysite.com.com/tempfolder/index.php
<filesMatch ".(htm|html|php|css|js|php|gif|jpg|db|png)$">
 order allow,deny
 allow from all
</FilesMatch> 
```

有任何想法吗？谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:55:37.833

尝试将 .htaccess 文件放在不包含重定向规则的子文件夹中。这应该可以正常工作——它甚至可以是一个空白文件。

# jquery - 从 ul 列表中获取下一个 ID 属性

> ID：15077228
> 
> 赞同：1
> 
> 时间：2013-02-25T21:53:54.813
> 
> 标签：jquery, html, list

我有一个列表，其中包含用于测试目的的值，它只有 1-4 ..现在，当我单击按钮时，我想获得该列表中的下一个。现在我假设我必须将我当前所在的变量存储在一个变量中？

```
var current = 1;
function getnext(){
alert($('#list li').next().attr('id'));
    //update current with next value from list
}

<input type="button" onclick="getnext();" value="next" />
<ul id="list">
<li id="1"></li>
    <li id="2"></li>
    <li id="3"></li>
    <li id="4"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:07:50.807

像这样？

```
var current = 0;
var listItems = $('#list li');
function getnext(){
    //check if you haven't reached the end of the list yet...
    if(current < listItems.length()) {
      alert(listItems[current]);
      current++;
    }
    //update current with next value from list
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:06:21.510

你可以这样做：

```
var current = 1;
function getnext(){
   current++;
   if (current > MAX_COUNT_HERE) {
     current = 1;
   }
   var el = document.getElementById(current);
   alert(el.innerHTML);
} 
```

# php - json_decode 丢失大约 22 个字符后

> ID：15077230
> 
> 赞同：1
> 
> 时间：2013-02-25T21:54:00.523
> 
> 标签：php, json

我试图在 php 中解码一个 json 文件。

```
function ReturnJson(){
    $json_data =  json_decode(file_get_contents('data.json'), true);
    for ($i = 0, $len = count($json_data); $i< $len; ++$i){

        $json_data[$i]['num'] = (string) ($i +1);
    }
    print_r($json_data);
    return $json_data;   
   } 
```

但是在这里我注意到我在原始文件中缺少的数组中缺少大约 20 个字符。

想法？

好的，这是 json 文档的一小段，它很大，但开头本身与原始文件不同

小原始文件：

```
 {"events":[{"control":null,"submitter":{"deviceId":"1","sessionId":"1"},"variables":[{"scope":"SESSION","value":"iPhone OS","name":"osName"},{"scope":"SESSION","value":"x86_64","name":"hardwareType"},{"scope":"SESSION","value":"6.0","name":"osVersion"},{"scope":"EVENT","value":"51115abd1e0422c533000002","name":"variant"}],"label":null,"category":null,"location":"ADSettingsViewController","timestamp":"2012-11-16T19:23:57Z","action":null,"type":"PAGEVIEW","versionNumber":"1.0","value":0,"submitted":0,"appId":"50fdc396b9efd172b8000065","controlEvent":null},{"control":null,"submitter":{"deviceId":"1","sessionId":"1"},"variables":[{"scope":"SESSION","value":"iPhone OS","name":"osName"},{"scope":"SESSION","value":"x86_64","name":"hardwareType"},{"scope":"SESSION","value":"6.0","name":"osVersion"},{"scope":"EVENT","value":"51115abd1e0422c533000002","name":"variant"}],"label":null,"category":null,"location":"ADProductViewController","timestamp":"2012-11-16T19:23:59Z","action":null,"type":"PAGEVIEW","versionNumber":"1.0","value":0,"submitted":0,"appId":"50fdc396b9efd172b8000065","controlEvent":null} 
```

结果是什么：

```
 {"control":null,"submitter":{"deviceId":"1","sessionId":"1"},"variables":[{"scope":"SESSION","value":"iPhone OS","name":"osName"},{"scope":"SESSION","value":"x86_64","name":"hardwareType"},{"scope":"SESSION","value":"6.0","name":"osVersion"},{"scope":"EVENT","value":"51115abd1e0422c533000002","name":"variant"}],"label":null,"category":null,"location":"ADSettingsViewController","timestamp":"2013-02-25T16:22:57Z","action":null,"type":"PAGEVIEW","versionNumber":"1.0","value":0,"submitted":0,"appId":"50fdc396b9efd172b8000065","controlEvent":null}{"control":null,"submitter":{"deviceId":"1","sessionId":"1"},"variables":[{"scope":"SESSION","value":"iPhone OS","name":"osName"},{"scope":"SESSION","value":"x86_64","name":"hardwareType"},{"scope":"SESSION","value":"6.0","name":"osVersion"},{"scope":"EVENT","value":"51115abd1e0422c533000002","name":"variant"}],"label":null,"category":null,"location":"ADProductViewController","timestamp":"2013-02-25T16:22:57Z","action":null,"type":"PAGEVIEW","versionNumber":"1.0","value":0,"submitted":0,"appId":"50fdc396b9efd172b8000065","controlEvent":null}{"control":"UIRoundedRectButton","submitter":{"deviceId":"1","sessionId":"1"},"variables":[{"scope":"SESSION","value":"iPhone OS","name":"osName"},{"scope":"SESSION","value":"x86_64","name":"hardwareType"},{"scope":"SESSION","value":"6.0","name":"osVersion"},{"scope":"EVENT","value":"51115abd1e0422c533000002","name":"variant"}],"label":"Checkout Now","category":"ADProductViewController","location":null,"timestamp":"2013-02-25T16:22:57Z","action":"checkoutNowTapped:","type":"EVENT","versionNumber":"1.0","value":0,"submitted":0,"appId":"50fdc396b9efd172b8000065","controlEvent":"UIControlEventTouchUpInside"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:57:47.127

如果没有看到您的数据，很难判断，但可能的原因是索引不是连续的（`0, 2, 5, 6`而不是`0, 1, 2, 3`）。

如果您不确定数据包含什么，最好使用`foreach`循环遍历您的数组：

```
foreach ($json_data as $key => $value) 
{
  ...
} 
```

# ruby-on-rails - 在 Holidays gem 中包含自定义假期定义列表

> ID：15077231
> 
> 赞同：1
> 
> 时间：2013-02-25T21:54:00.383
> 
> 标签：ruby-on-rails

任何人都可以帮助我将自定义假期定义列表包含到 Ruby 假期 gem 中吗？

我无法弄清楚任何事情。

我没有示例代码，因为我只能推荐查看 Gem。

**编辑**：

我希望使用此 gem 在应用程序中创建 UI，以允许用户定义假期。YAML 最有可能存储在数据库中。我需要能够利用 gem 中的 rake 任务并动态运行它。我并不完全了解如何从我的 rails 应用程序中进入 gems rake 任务。

# r - data.table 没有按两列正确汇总

> ID：15077232
> 
> 赞同：7
> 
> 时间：2013-02-25T21:54:13.100
> 
> 标签：r, data.table

我有这个问题，`data.table`最近让我发疯。它看起来像一个错误，但可能是我在这里遗漏了一些明显的东西。

我有以下数据框：

```
# First some data
data <- data.table(structure(list(
  month = structure(c(1356998400, 1356998400, 1356998400, 
                      1359676800, 1354320000, 1359676800, 1359676800, 1356998400, 1356998400, 
                      1354320000, 1354320000, 1354320000, 1359676800, 1359676800, 1359676800, 
                      1356998400, 1359676800, 1359676800, 1356998400, 1359676800, 1359676800, 
                      1359676800, 1359676800, 1354320000, 1354320000), class = c("POSIXct", 
                                                                                 "POSIXt"), tzone = "UTC"), 
  portal = c(TRUE, TRUE, FALSE, TRUE, 
             TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, FALSE, TRUE, FALSE, 
             TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE
  ), 
  satisfaction = c(10L, 10L, 10L, 9L, 10L, 10L, 9L, 10L, 10L, 
                   9L, 2L, 8L, 10L, 9L, 10L, 10L, 9L, 10L, 10L, 10L, 9L, 10L, 9L, 
                   10L, 10L)), 
                  .Names = c("month", "portal", "satisfaction"), 
                  row.names = c(NA, -25L), class = "data.frame")) 
```

我想用`portal`和来总结一下`month`。按预期总结好的旧`tapply`作品 - 我得到 3x2 矩阵，其中包含 2012 年 12 月和 2013 年 1 月至 2 月的结果：

```
> tapply(data$satisfaction, list(data$month, data$portal), mean)
           FALSE      TRUE
2012-12-01   8.5  8.000000
2013-01-01  10.0 10.000000
2013-02-01   9.0  9.545455 
```

总结与`by`论点`data.table`不：

```
> data[, mean(satisfaction), by = 'month,portal']
   month      portal        V1
1: 2013-01-01  FALSE 10.000000
2: 2013-02-01   TRUE  9.000000
3: 2013-01-01   TRUE 10.000000
4: 2012-12-01  FALSE  8.500000
5: 2012-12-01   TRUE  7.333333
6: 2013-02-01   TRUE  9.666667
7: 2013-02-01  FALSE  9.000000
8: 2012-12-01   TRUE 10.000000 
```

如您所见，它返回一个包含*8*个值的数据表，而不是预期的*6 个；*例如，重复`portal == TRUE`和的值。`month == 2012-02-01`

有趣的是，如果我将其限制为 2013 年的数据，一切都会按预期进行：

```
> data[month >= ymd(20130101), mean(satisfaction), by = 'month,portal']
        month portal        V1
1: 2013-01-01   TRUE 10.000000
2: 2013-01-01  FALSE 10.000000
3: 2013-02-01   TRUE  9.545455
4: 2013-02-01  FALSE  9.000000 
```

我很困惑，难以置信:)。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T22:42:50.587

这是一个在 data.table 1.8.7 中解决的已知问题（在撰写本文时还没有在 CRAN 中）。

来自 data.table[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)：

> ```
> BUG FIXES
> 
>     <...>
> 
> o   setkey could sort 'double' columns (such as POSIXct) incorrectly when not the
>     last column of the key, #2484\. In data.table's C code :
>         x[a] > x[b]-tol
>     should have been :
>         x[a]-x[b] > -tol  [or  x[b]-x[a] < tol ]
>     The difference may have been machine/compiler dependent. Many thanks to statquant
>     for the short reproducible example. Test added. 
> ```

使用 更新到 1.8.7 后`install.packages("data.table", repos="http://R-Forge.R-project.org")`，一切正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T22:09:00.020

问题似乎与排序有关。当我加载`data`并执行以下操作时`setkey`：

```
setkey(data, "month", "portal")

# > data
#          month portal satisfaction
#  1: 2012-12-01   TRUE           10
#  2: 2012-12-01  FALSE            9
#  3: 2012-12-01  FALSE            8
#  4: 2012-12-01   TRUE            2
#  5: 2012-12-01   TRUE           10
#  6: 2012-12-01   TRUE           10
#  7: 2013-01-01   TRUE           10
#  8: 2013-01-01   TRUE           10
#  9: 2013-01-01   TRUE           10
# 10: 2013-01-01   TRUE           10
# 11: 2013-01-01   TRUE           10
# 12: 2013-01-01   TRUE           10
# 13: 2013-01-01  FALSE           10
# 14: 2013-02-01   TRUE            9
# 15: 2013-02-01   TRUE            9
# 16: 2013-02-01  FALSE            9
# 17: 2013-02-01   TRUE           10
# 18: 2013-02-01   TRUE           10
# 19: 2013-02-01   TRUE           10
# 20: 2013-02-01   TRUE           10
# 21: 2013-02-01   TRUE           10
# 22: 2013-02-01   TRUE            9
# 23: 2013-02-01   TRUE           10
# 24: 2013-02-01   TRUE            9
# 25: 2013-02-01   TRUE            9
#          month portal satisfaction 
```

您会看到该`portal`列未正确排序。当我`setkey`再次这样做时，

```
setkey(data, "month", "portal")

# I get this warning message:
Warning message:
In setkeyv(x, cols, verbose = verbose) :
  Already keyed by this key but had invalid row order, key rebuilt. 
  If you didn't go under the hood please let datatable-help know so 
  the root cause can be fixed. 
```

现在，这些`data`列似乎按关键列正确排序：

```
# > data
#          month portal satisfaction
#  1: 2012-12-01  FALSE            9
#  2: 2012-12-01  FALSE            8
#  3: 2012-12-01   TRUE           10
#  4: 2012-12-01   TRUE            2
#  5: 2012-12-01   TRUE           10
#  6: 2012-12-01   TRUE           10
#  7: 2013-01-01  FALSE           10
#  8: 2013-01-01   TRUE           10
#  9: 2013-01-01   TRUE           10
# 10: 2013-01-01   TRUE           10
# 11: 2013-01-01   TRUE           10
# 12: 2013-01-01   TRUE           10
# 13: 2013-01-01   TRUE           10
# 14: 2013-02-01  FALSE            9
# 15: 2013-02-01   TRUE            9
# 16: 2013-02-01   TRUE            9
# 17: 2013-02-01   TRUE           10
# 18: 2013-02-01   TRUE           10
# 19: 2013-02-01   TRUE           10
# 20: 2013-02-01   TRUE           10
# 21: 2013-02-01   TRUE           10
# 22: 2013-02-01   TRUE            9
# 23: 2013-02-01   TRUE           10
# 24: 2013-02-01   TRUE            9
# 25: 2013-02-01   TRUE            9
#          month portal satisfaction 
```

那么，排序类型似乎是一个问题`POSIXct + logical`？

```
data[, mean(satisfaction), by=list(month, portal)]

#         month portal        V1
# 1: 2012-12-01  FALSE  8.500000
# 2: 2012-12-01   TRUE  8.000000
# 3: 2013-01-01  FALSE 10.000000
# 4: 2013-01-01   TRUE 10.000000
# 5: 2013-02-01  FALSE  9.000000
# 6: 2013-02-01   TRUE  9.545455 
```

因此，我认为有一个错误。

# jquery - 对格式化的 contenteditable div 的更改

> ID：15077237
> 
> 赞同：0
> 
> 时间：2013-02-25T21:54:25.543
> 
> 标签：jquery

我有以下步骤 1。一个可编辑的 div，可以在其中键入一些文本。第 2 步。我单击 colorize words 并且可编辑 div 中的所有单词都包含在 span 中，每个都有唯一的 id。第 3 步。我可以选择 5 种不同的颜色并单击每个跨度以使其成为该颜色（向跨度添加一个类）。

现在我可以选择保存颜色格式的文本。

但是我也有一个名为“编辑文本”的按钮。单击此按钮，我可以再次编辑文本。

但我的问题是我如何让 jquery 记住我着色的单词？

我写的一个例子：

我是一个快乐的人。

我单击“着色”，可编辑的 div 变为不可编辑，并显示 5 种颜色。我选择绿色并点击“快乐”。我单击红色，然后单击“人”。我现在在 div 中有以下 html：

```
 <span id=1>I</span>
 <span id=2>am</span>
 <span id=3>a</span>
 <span id=4 class=green>happy</span>
 <span id=5 class=red>man</span> 
```

所以现在我想编辑文本（点击“编辑文本”按钮）

所以我将文本更改为：

我是一个非常幸福的人

然后我单击“着色”并期望：

```
 <span id=1>I</span>
 <span id=2>am</span>
 <span id=3>a</span>
 <span id=6>very</span>
 <span id=4 class=green>happy</span>
 <span id=5 class=red>man</span> 
```

我怎样才能做到这一点？或者，如果我删除了我希望跨度标签消失的单词之一？

我已经在这个问题上苦苦挣扎了一段时间，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:00:53.787

恐怕这会很复杂。您可以根据对象中的单词记住，但这意味着该单词的每个实例都会具有这种颜色。也许是这样的......

```
var wordColors = {};
var colorWord = function (word, color) {
  span.css('color', color);
  wordColors[word] = color;
}
var onEditEnd = function () {
  // process spans etc
  var c;
  for (var i = 0; i < spans.length; ++i) {
    if (c = wordColors[span.innerHTML])
      span.css('color', c);
  }
} 
```

# php - Ajax 表单提交表单问题。我无法获得正确的值

> ID：15077239
> 
> 赞同：0
> 
> 时间：2013-02-25T21:54:27.787
> 
> 标签：php, jquery, ajax

在下面的代码中，当我`alert`在调用 ajax 之前，它按预期执行并回显出正确的信息；但是，当我尝试通过 php 传递信息时，数据似乎是空的。我在我的 php 中做错了什么？

**Javascript**：

```
$('#submit_fourth').click(function(){
    //send information to server   
    var email = $('input#email').val();
    var hash = $('input#username').val();
    var type = $('input#type').val();
    var finish = "email=" + email + "hash=" + hash + "type=" + type;

    alert(finish);
    $.ajax({
        cache: false,
        type: 'POST',
        url: 'process.php',
        data: finish,
        success: function(response) {
            alert('it worked!');
        }
    }); 
}); 
```

**PHP**：

```
<?php
     $to      = 'blanet910@yahoo.com';
     $subject = 'Hash testing requested';
     $message = $_POST['finish'];
     $headers = 'From: webmaster@hashtester.com' . "\r\n" .
         'Reply-To: webmaster@hashtester.com' . "\r\n" .
         'X-Mailer: PHP/' . phpversion();

    mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:01:38.373

这是错误的：

```
var finish = "email=" + email + "hash=" + hash + "type=" + type; 
```

至少应该是：

```
var finish = "email=" + email + "&hash=" + hash + "&type=" + type; 
```

但是为了避免数据转义的问题（你没有这样做......），最好使用：

```
var finish = $("form").serialize(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:04:09.780

您应该在普通对象中传递数据：

```
var email = $('input#email').val();
var hash = $('input#username').val();
var type = $('input#type').val();

$.ajax({
  cache: false,
  type: 'POST',
  url: 'process.php',
  data: {email: email, hash: hash, type: type},
  success: function(response) { alert('it worked!'); }
}); 
```

# asp.net - 已启用 ASP.NET 详细错误消息

> ID：15077246
> 
> 赞同：2
> 
> 时间：2013-02-25T21:54:52.417
> 
> 标签：asp.net, .net, iis-7.5

我在这里需要一个帮助。我们的网站在 windows server 2008\IIS7.5 上运行。我们今天对我们的站点进行了 PCI 扫描，我们得到了以下漏洞消息。

> 漏洞： - 启用 ASP.NET 详细错误消息 此主机上运行的 Web 服务器配置为显示 ASP.NET 应用程序的详细错误消息。这可能会为攻击者提供有关服务器上 ASP.NET 应用程序的信息，以及有关主机本身的信息。但是，如果您查看页面的源代码，则隐藏在文档底部的是相当多的调试信息，其中包括 Web 服务器的路径。服务：Microsoft-IIS/7.5
> 
> 补救措施： - 建议对生产系统禁用任何类型的调试信息。显示自定义错误消息会阻止向用户提供调试信息。在 web.config 中，将 customErrors 模式设置为“On”或“RemoteOnly”（向从本地主机访问站点的浏览器显示调试信息）。

我检查了我们的 web.config，我们可以在那里看到以下设置

```
<customErrors mode="On" defaultRedirect="/ProcessError.aspx" redirectMode="ResponseRewrite">
    <error statusCode="404" redirect="/PageNotFound.aspx" />
    <error statusCode="500" redirect="/ProcessError.aspx"/>
</customErrors> 
```

根据补救措施，我们已将 CustomErrors 模式设置为 "On" 或 "RemoteOnly" 。从上面的 web.config 文件中可以看出，它已经设置为 on。不确定还需要做哪些其他更改。

你有什么建议吗？

# java - 导入库时出现 HoloEverywhere 错误 - Android

> ID：15077247
> 
> 赞同：3
> 
> 时间：2013-02-25T21:54:53.463
> 
> 标签：java, android, eclipse

当我尝试通过 Eclipse 将 HoloEverywhere 的库文件夹导入我的工作区时，我收到以下错误：

```
Build path contains duplicate entry: 'src' in project 'library' 
```

做了一些研究，我发现了这个线程：[HoloEverywhere 错误：构建路径包含重复的条目 src](https://stackoverflow.com/questions/14278884/holoeverywhere-error-build-path-contains-duplicate-entry-src) 建议之一是编辑位于库文件夹中的 .classpath 文件，然后继续导入同一个文件夹。但是，现在导入时出现以下错误：

```
Project has no project.properties file! Edit the project properties to set one.
AndroidManifest.xml file missing! 
```

我已经在 Stackoverflow 和 Google 上进行了搜索，但找不到解决方案。我试图通过 Eclipse 修复项目属性无济于事。

对此的任何想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:46:31.700

有同样的问题，

尝试这个：

只需使用重复的 src 错误导入它，然后右键单击 HoloeEverywhere 库项目并选择属性。在属性中选择 Android（在左侧）并在 Project Build Target 下检查是否选中了 Target Name Android 4.2（或您的任何名称）。我的不是。如果您检查它，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:16:12.047

我遇到过同样的问题。结果我在 HoloEverywhere 库（它引用了 ActionbarSherlock 库）和 ActionBarSherlock 库中进行了引用。

所以基本上 HoloEverywhere 已经使用了 ABS，所以你从你自己的项目中删除了 ABS。还要检查以确保 HoloEverywhere 正确引用 ABS。

# drupal - 如何使只返回翻译节点的标题而不是原始节点？

> ID：15077249
> 
> 赞同：0
> 
> 时间：2013-02-25T21:55:05.290
> 
> 标签：drupal, drupal-views

我在 drupal 中有一个多语言网站。我做了一个视图，它返回一些节点的标题。这些节点被翻译成不同的语言。如何使只返回翻译节点的标题而不是原始节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:54:18.983

在视图中设置过滤器*节点翻译：语言 = 当前用户的语言*

这会成功的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:48:35.207

我找到了。我使用了 hook_views_pre_render 我用当前语言的对应对象（如果存在）替换了原始节点

# c# - 结构化按钮单击方法以避免代码重复

> ID：15077251
> 
> 赞同：5
> 
> 时间：2013-02-25T21:55:19.223
> 
> 标签：c#, asp.net

我有以下两个按钮单击方法，它们从三个文本框创建一个数组，对值进行排序，将它们插入数据库，然后以相同的顺序选择值。两个按钮之间的唯一区别是一个按升序排列值，另一个按降序排列。

我不习惯使用 C#。任何人都可以建议构造我的代码的最佳方法，这样我就不会为每个按钮重复它吗？通常我会编写一个函数并让每个按钮传递它的参数。这是去这里的正确方式吗？

提前致谢。

**按钮1**

```
protected void Button1_Click(object sender, EventArgs e)
{
    var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
    var orderedlist = list.OrderBy(x => (x)).ToArray(); 
```

...

```
 SqlCommand cmd = new SqlCommand("Select * from lists order by values asc", conn); 
```

**按钮2**

```
protected void Button2_Click(object sender, EventArgs e)
{
    var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
    var orderedlist = list.OrderByDescending(x => (x)).ToArray(); 
```

...

```
 SqlCommand cmd = new SqlCommand("Select * from lists order by values desc", conn); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:03:03.053

您可以将两个`Button`点击事件分配给同一个处理程序并使用`sender`选择您想要的排序。

```
protected void Button_Click(object sender, EventArgs e)
{
    var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
    var orderedlist = (sender as Button).AccessKey  == "Button1" // or whatever name it is
                      ? list.OrderByDescending(x => (x)).ToArray()
                      : list.OrderBy(x => (x)).ToArray();

    .............
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:02:41.430

选项将是创建一个函数，排序：

```
public list sort(String order)
{
     var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
     var orderedlist = list.OrderByDescending(x => (x)).ToArray();
     ...

     SqlCommand cmd = new SqlCommand("Select * from lists order by values " + order, conn)
     ...
     return SortedList;
} 
```

调用 sort("asc") 以升序创建排序列表，调用 sort("desc") 以降序排序。并且没有代码重复:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:11:03.550

你基本上可以在这里使用函数式编程。将代码中更改为函数的部分抽象化。

```
protected void Button1_Click(object sender, EventArgs e)
{
    HelperFunction(list => list.OrderBy(x => x));
}

protected void Button2_Click(object sender, EventArgs e)
{
    HelperFunction(list => list.OrderByDescending(x => x));
}

private void HelperFunction(Func<IEnumerable<string>, <IEnumerable<string>> listOrderer)
{
    var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };

    var orderedList = listOrderer(list).ToArray();

    // rest of code
} 
```

# c#-4.0 - Windows Phone 8 (HTC 8X) 手电筒不亮（不使用相机）

> ID：15077257
> 
> 赞同：1
> 
> 时间：2013-02-25T21:55:41.070
> 
> 标签：c#-4.0, reflection, windows-phone-8, flashlight

作为一个新手程序员，我要问一个愚蠢的问题。我想在不闪烁的情况下打开 windows phone 8 的手电筒（像其他手电筒应用程序一样连续）。[现在我尝试访问 Microsoft.Phone.Media.Extended 时尝试](https://stackoverflow.com/questions/13454422/wp8-reflection-api-issue-please-check/13473773#13473773)使用反射失败的示例

但它没有用。我创建了一个名为“flash”的按钮并粘贴代码。它编译得很好，但我的设备 HTC 8X 甚至一秒钟都没有打开手电筒。我该做什么 ？

我使用的库和代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Navigation;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Shell;
using Flashlight_V_0._1.Resources;
using Microsoft.Phone.Media;
using Windows.Phone.Media.Capture; 
using Microsoft.Xna.Framework.Media;
using System.IO;                     

namespace Flashlight_V_0._1
{

    public partial class MainPage : PhoneApplicationPage
    {

        // Constructor
        public MainPage()
        {
            InitializeComponent();

            // Sample code to localize the ApplicationBar
            //BuildLocalizedApplicationBar();
        }

        private async void Button_Click_1(object sender, RoutedEventArgs e)
        {
            var sensorLocation = CameraSensorLocation.Back;

            try
            {
                // get the AudioViceoCaptureDevice
                var avDevice = await AudioVideoCaptureDevice.OpenAsync(sensorLocation,
                    AudioVideoCaptureDevice.GetAvailableCaptureResolutions(sensorLocation).First());

                // turn flashlight on
                var supportedCameraModes = AudioVideoCaptureDevice
                    .GetSupportedPropertyValues(sensorLocation, KnownCameraAudioVideoProperties.VideoTorchMode);
                if (supportedCameraModes.ToList().Contains((UInt32)VideoTorchMode.On))
                {
                    avDevice.SetProperty(KnownCameraAudioVideoProperties.VideoTorchMode, VideoTorchMode.On);

                    // set flash power to maxinum
                    avDevice.SetProperty(KnownCameraAudioVideoProperties.VideoTorchPower,
                        AudioVideoCaptureDevice.GetSupportedPropertyRange(sensorLocation, KnownCameraAudioVideoProperties.VideoTorchPower).Max);
                }
                else
                {
                    //ShowWhiteScreenInsteadOfCameraTorch();
                }

            }
            catch (Exception ex)
            {
                // Flashlight isn't supported on this device, instead show a White Screen as the flash light
                //ShowWhiteScreenInsteadOfCameraTorch();
            }

        }

    }
} 
```

我也试过这个：

```
 try
        {

            var _device = await AudioVideoCaptureDevice.OpenAsync(CameraSensorLocation.Back, AudioVideoCaptureDevice.GetAvailableCaptureResolutions(CameraSensorLocation.Back).First());

            _device.SetProperty(KnownCameraAudioVideoProperties.VideoTorchMode, VideoTorchMode.On);
        }
        catch (Exception ex)
        {
            //
        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:09:34.090

很抱歉回复晚了，之前收到但无法发布。对此感到抱歉。WP7/WP7.5 默认访问所有传感器。但在 WP8 中，您必须手动启用传感器功能。

1.  转到解决方案资源管理器。
2.  选择项目。
3.  选择属性 -> WMAppManifest.xml
4.  双击“WMAppManifest.xml”
5.  选择“能力”
6.  为应用启用适当的功能

为了解决我的问题，我必须启用两个功能。

1.  ID_CAP_ISV_CAMERA
2.  ID_CAP_MICROPHONE

谢谢你

# timer - 时间栏从 cocos2d v1 迁移到 v2 (kCCProgressTimerTypeBar) 消失

> ID：15077260
> 
> 赞同：0
> 
> 时间：2013-02-25T21:55:46.927
> 
> 标签：timer, cocos2d-iphone

我的时间栏有问题。直到我使用 cocos2d v1 一切正常。当我更新到 v2 时，我的栏消失了！这是 CCProgressTimer 的一个问题，因为如果我显示没有时间依赖性的精灵，一切都会正常工作。所以这不是定位或z的问题。时间不多了，因为在代码中实现了一段时间后，游戏进入了游戏结束。问题只是该栏未显示在视图中。

这是 init 函数中的代码：

```
 remainingTime = MaxTime;
    bar = [CCSprite spriteWithFile:@"barra.png"];
    bar = [CCProgressTimer progressWithSprite:barra];
    bar.type = kCCProgressTimerTypeBar;
    [bar setPosition:ccp(50 , size.height - 18)];
    [bar setPercentage:100];
    [self addChild:bar];
    NSLog(@"bar added! Here: %f %f", bar.position.x, bar.position.y); 
```

我试过放`z:10000`，但什么都没有……计时器继续，但酒吧被隐藏了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:10:26.000

试试这个：

```
 mBarProgress = [CCProgressTimer progressWithSprite:[CCSprite spriteWithFile:@"barra.png"]];
    mBarProgress.position = ccp(50.0f*(mS.width/480.0f), 706.0f*(mS.height/768.0f)); 
    mBarProgress.midpoint = ccp(0.0f,1.0f);
    mBarProgress.barChangeRate = ccp(1,0);
    mBarProgress.type = kCCProgressTimerTypeBar;

    [self addChild:mBarProgress z:4];

    [mBarProgress runAction:[CCProgressTo actionWithDuration:1.0f percent:99.0f]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:31:41.440

已解决：问题是精灵命名错误：

正确的代码是：

```
barra = [CCSprite spriteWithFile:@"barra.png"]; 
```

# c# - 为什么我需要将 NUnit 与 Selenium WebDriver 一起使用？

> ID：15077274
> 
> 赞同：4
> 
> 时间：2013-02-25T21:56:44.773
> 
> 标签：c#, nunit, selenium-webdriver

我刚刚开始使用 Selenium，使用 VS2012 和 C#。我不确定是否需要使用单独的测试框架，例如 NUnit 或 HtmlUnit。我在没有使用 NUnit 的情况下试用了 C# 中在线可用的 google 搜索示例，它运行良好。

所以我现在的问题是，为什么我需要将 NUnit 与 Selenium 一起使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T22:14:29.047

如果您不想，则不需要将 NUnit（或任何其他单元测试框架）与 Selenium 一起使用。但是，在某些情况下，您可能希望使用 NUnit（或其他）来利用其他事物的好处。例如：

*   如果您有现有的单元测试，它会将所有内容保存在一个地方。（如果这是您想要组织事物的方式）
*   如果您已经使用 NUnit（或您喜欢的单元测试框架）进行单元测试，那么您可以重复使用您用于 NUnit 的相同测试运行程序（例如 NUnit 控制台、NUnit GUI、ReSharper 等），这意味着您可以运行所有测试（NUnit 和 Selenium）一键按下/键盘快捷键。
*   如果您使用持续集成，它可以通过现有的 NUnit（或您喜欢的任何一个）测试运行器运行您的 selenium 测试，这意味着您不必单独为 selenium 测试配置持续集成服务器。

以上假设您已经进行了单元测试。如果您还没有单元测试，或者您只对 Selenium 测试感兴趣（例如，我们有一个开发团队和一个测试人员，我们编写单元测试，测试人员编写 Selenium 测试并且它们彼此独立运行) 那么就不需要添加那个额外的层了。

针对不同事物的单元测试框架和硒测试。单元测试通常一次只查看一个代码单元（尽管在实践中，我发现它经常溢出到相邻的单元中，尤其是在它们很小且具有确定性的情况下）。Selenium 将网页（或一系列页面）视为单个测试。Selenium 的测试需要一个系统来将它的许多组件集成在一起来运行测试。因此，它在更高级别进行测试，因为它同时检查了许多事情。（例如，系统可以处理请求、响应返回、响应包含预期数据、按下页面上的按钮执行正确的操作、转到正确的页面等）

归根结底，仅仅因为你可以做某事并不意味着你应该这样做。如果您必须同时处理这两种情况，那么通过单元测试框架运行 Selenium 测试会很方便。它可能对你有用，它可能不会。

# python - python：从 v2.7 向后移植到 v2.4 时的线程问题

> ID：15077275
> 
> 赞同：0
> 
> 时间：2013-02-25T21:56:45.617
> 
> 标签：python, multithreading

我的以下代码适用于 python 2.7+

```
class Worker(threading.Thread):
    def __init__(self, group=None, target=None, name=None,
                 args=(), kwargs=None, verbose=None, onCompleteCb=None):
        self.__onCompleteCb = onCompleteCb
        self.__name = name
        super(Worker, self).__init__(group, target, name, args, kwargs, verbose)

    def getName(self):
        return self.__name

    def run(self):
        try:
            super(Worker, self).run()
            if self.__onCompleteCb is not None: self.__onCompleteCb(self.__name)
        except Exception, e:
            if self.__onCompleteCb is not None: self.__onCompleteCb(self.__name, failed=True, exception=e) 
```

但我最近发现我的代码应该支持从 2.4 开始的版本：在上面的代码中，run 被调用但是当它调用时`super(Worker, self).run()`，我看到以下错误

```
 TypeError: threadTargMethod() argument after ** must be a dictionary 
```

我应该`super`在 python 2.4 中以不同的方式调用吗？

**解决方案** 我必须通过以下方式启动线程：

```
Worker(target=threadTargMethod, name="thread1", args=(), kwargs={}).start() 
```

在 v2.7 中，我开始以下方式并且它有效

```
Worker(target=threadTargMethod, name="thread1").start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:02:00.060

我建议将您的代码更改为：

```
class Worker(threading.Thread):
    def __init__(self, group=None, target=None, name=None,
             args=(), kwargs={}, verbose=None, onCompleteCb=None):
        ...
        super(Worker, self).__init__(group=group, target=target, name=name, 
                                     args=args, kwargs=kwargs) 
```

换句话说：

*   `kwargs`为空 dict设置默认值（与文档匹配 - 您似乎对 2.7 很幸运）

*   不要包含`verbose`参数（2.4 或 2.7 不支持 - 不知道那里发生了什么）

*   明确命名

有了这个改变，你可以继续开始

```
Worker(target=threadTargMethod, name="thread1").start() 
```

因为`kwargs`默认情况下会正确设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:47:55.753

我必须在 v2.4 中以以下方式启动线程：

```
Worker(target=threadTargMethod, name="thread1", args=(), kwargs={}).start() 
```

在 v2.7 中，我开始以下方式并且它有效

```
Worker(target=threadTargMethod, name="thread1").start() 
```

# java - Android：手机休眠时 Wi-Fi 强度没有变化

> ID：15077278
> 
> 赞同：1
> 
> 时间：2013-02-25T21:57:03.593
> 
> 标签：java, android, networking, wifi

经过一些测试，我注意到当手机进入睡眠模式或锁定模式时，Wi-Fi 信号强度（RSSI）和 Wi-Fi 链接速度不再变化（我正在运行 aa 服务并记录强度和后台链接速度）另一方面，即使手机进入睡眠模式，GPS 位置也会发生变化。

对于 Wi-Fi 强度为什么会发生这种情况，有什么解释吗？如果是这样，是否有解决方法？

这是我用来获取 Wi-Fi 信息的函数：

```
private int getStrengthFromWifi() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo Info = cm.getActiveNetworkInfo();
    if (Info == null || !Info.isConnectedOrConnecting()) {
        Log.i("MyAppLog - no data (Wifi or Cellular)",
                "No data (Wifi or Cellular)");
        return 0;
    } else {
        int netType = Info.getType();

        if (netType == ConnectivityManager.TYPE_WIFI) {
            WifiManager wifiManager = (WifiManager) getApplicationContext()
                    .getSystemService(Context.WIFI_SERVICE);
            int linkSpeed = wifiManager.getConnectionInfo().getLinkSpeed();
            int wifiStrength = wifiManager.getConnectionInfo().getRssi();
            Log.i("MyAppLog - Link Speed + Wifi Strength",
                    "Wifi Connection : linkSpeed " + linkSpeed
                            + " and Wifi Strength " + wifiStrength);

            return wifiStrength;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:10:07.710

您需要从系统获取 WIFI_MODE_FULL_HIGH_PERF WifiLock 以便在系统进入低功耗状态时继续接收对 wifi 事件的响应。

请查看 wifi 锁的 Android SDK 文档：[https ://developer.android.com/reference/android/net/wifi/WifiManager.WifiLock.html](https://developer.android.com/reference/android/net/wifi/WifiManager.WifiLock.html)

请务必查看此堆栈溢出问题的答案，以调整设置以确保 wifi 不会休眠： [如何在手机休眠时保持 Wifi 不断开连接？](https://stackoverflow.com/questions/3871824/how-do-i-keep-wifi-from-disconnecting-when-phone-is-asleep)

XDA 在这里为您提供了一些有用的信息：http: [//forum.xda-developers.com/showthread.php?t=1625705](http://forum.xda-developers.com/showthread.php?t=1625705)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:04:55.953

解释是，当设备进入睡眠状态时，它会尝试通过关闭非必要功能来节省电量。您可能可以获取[WakeLock](https://developer.android.com/reference/android/os/PowerManager.WakeLock.html)以继续跟踪信号强度和速度，但您会耗尽电池电量......所以请谨慎使用。

# ruby-on-rails-3 - 基于现有模型的 Rails Scaffold 不起作用

> ID：15077280
> 
> 赞同：2
> 
> 时间：2013-02-25T21:57:05.060
> 
> 标签：ruby-on-rails-3, scaffolding

我想使用scaffold_controller 基于现有模型生成脚手架。

```
rails generate scaffold_controller NAME 
```

我只得到空视图，没有得到迁移中定义的字段。不知道到底发生了什么，因为我曾经这样做过，而且它在以前的项目中一直都在工作。

我正在使用 Rails 3.2.12，这个功能不再可用吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-11T03:44:00.887

如果你想在你的视图中有属性，你已经将它们传递给`generate scaffold_controller`命令，如下所示：

```
generate scaffold_controller <YOUR_MODEL_NAME> attribute1 attribute2 attribute3 
```

然后它将创建仅包含这些属性的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:42:22.903

经过进一步调查，我认为这个问题是特定于我的 Rails 安装的，不确定是什么，但如果你遇到这个问题，这是我找到的解决方法，但需要 twitter 引导程序：

```
rails generate scaffold_controller <YOUR_MODEL_NAME>
rails g bootstrap:themed <YOUR_MODEL_NAME> -f 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:01:51.153

您的示例使用了**scaffold_controller**，就好像您希望在视图中创建和显示模型一样，您应该只使用scaffold。对于您的代码示例：

```
rails generate scaffold_controller NAME 
```

这应该变成：

```
rails generate scaffold NAME 
```

您将需要指定您的属性，然后运行

```
rake db:migrate 
```

# attachment - get_permalink 到附件不起作用

> ID：15077289
> 
> 赞同：0
> 
> 时间：2013-02-25T21:57:33.343
> 
> 标签：attachment, permalinks

我有以下代码：

```
 <?php

      $args = array(
   'post_type' => 'attachment',
   'numberposts' => 12,
   'post_status' => null
  );

  $attachments = get_posts( $args );
     if ( $attachments ) {
        foreach ( $attachments as $attachment ) {
           echo '<li><a href="'.get_permalink( $attachment->ID ).'">';
           echo wp_get_attachment_image( $attachment->ID, array('100', '100') );
          echo '</a></li>';
          }
     }

?> 
```

这个脚本的重点是显示最后添加的 12 张照片（它的拇指）。这很完美。但我想添加第二个功能 - 链接到它来自的页面（通常是本地图库嵌入到帖子/页面中）

问题是在这种情况下链接已损坏。它总是链接到第一个帖子。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:01:08.363

试试[`get_attachment_link($attachment->ID)`](http://codex.wordpress.org/Function_Reference/get_attachment_link)。

或者[`the_attachment_link($attachment->ID`)](http://codex.wordpress.org/Function_Reference/the_attachment_link)​​直接打印带有 URL 的锚标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:00:29.340

这是最终版本：）

```
 <?php

      $args = array(
   'post_type' => 'attachment',
   'numberposts' => 12,
   'post_status' => null
  );

  $attachments = get_posts( $args );
     if ( $attachments ) {
        foreach ( $attachments as $attachment ) {
           $url = get_permalink( $attachment->ID );
          echo '<li><a href="'.strstr($url, '/attachment', true).'">';
           echo wp_get_attachment_image( $attachment->ID, array('100', '100') );
          echo '</a></li>';       
          }
     }

?> 
```

/attachment 是我们要从 url 中删除所有内容的起点。

# spring-mvc - ivy - spring-web 有未解决的依赖关系

> ID：15077293
> 
> 赞同：3
> 
> 时间：2013-02-25T21:57:52.630
> 
> 标签：spring-mvc, ivy

当我将此行添加到我的 ivy.xml 文件时：

```
 <ivy-module version="2.0">
     <info organisation="Marouane" module="example"/>
     <dependencies>
         <dependency org="com.sun.faces" name="jsf-impl" rev="2.1.19" />
         <dependency org="com.sun.faces" name="jsf-api" rev="2.1.19" />
         <dependency org="org.springframework" name="spring-context" rev="3.2.1.RELEASE" />
         <!-- this line -->
         <dependency org="org.springframework" name="spring-web" rev="3.2.1.RELEASE" />
     </dependencies>
 </ivy-module> 
```

我有一个关于未解决依赖项的警告，并且没有下载任何内容。

```
::::::::::::::::::::::::::::::::::::::::::::::
::          UNRESOLVED DEPENDENCIES         ::
::::::::::::::::::::::::::::::::::::::::::::::
:: com.caucho#hessian;3.2.1: not found
:::::::::::::::::::::::::::::::::::::::::::::: 
```

编辑：这是问题摘要：

```
 module not found: com.caucho#hessian;3.2.1
==== local: tried
  $HOME/.ivy2/local/com.caucho/hessian/3.2.1/ivys/ivy.xml
  -- artifact com.caucho#hessian;3.2.1!hessian.jar:
  $HOME/.ivy2/local/com.caucho/hessian/3.2.1/jars/hessian.jar
==== shared: tried
  $HOME/.ivy2/shared/com.caucho/hessian/3.2.1/ivys/ivy.xml
  -- artifact com.caucho#hessian;3.2.1!hessian.jar:
  $HOME/.ivy2/shared/com.caucho/hessian/3.2.1/jars/hessian.jar
==== public: tried
  http://repo1.maven.org/maven2/com/caucho/hessian/3.2.1/hessian-3.2.1.pom
  -- artifact com.caucho#hessian;3.2.1!hessian.jar:
  http://repo1.maven.org/maven2/com/caucho/hessian/3.2.1/hessian-3.2.1.jar 
```

我访问了maven仓库网站，[Spring web 3.2.1的页面](http://mvnrepository.com/artifact/org.springframework/spring-web/3.2.1.RELEASE)，hessian 3.2.1被列为依赖，但是在[hessian的页面中](http://mvnrepository.com/artifact/com.caucho/hessian)没有3.2.1版本的hessian包，是这个问题吗？我该如何进行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:16:31.497

问题是 Maven Central 中不存在 3.2.1 版本：

*   [Maven 中心](http://search.maven.org/#search%7Cgav%7C1%7Cg:%22com.caucho%22%20AND%20a:%22hessian%22)

根本原因是Spring-web POM，它有以下依赖：

```
<dependency>
  <groupId>com.caucho</groupId>
  <artifactId>hessian</artifactId>
  <version>3.2.1</version>
  <scope>compile</scope>
  <optional>true</optional>
</dependency> 
```

这是一个可选的依赖项，因此有几个解决方法。

# 声明更新的版本

如果您的功能需要此 jar，请使用此选项（作者将其设为可选是有原因的）。

```
<dependency org="org.springframework" name="spring-web" rev="3.2.1.RELEASE" />
<dependency org="com.caucho" name="hessian" rev="4.0.7" /> 
```

如果您生成一个 ivy[报告](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)，您会看到 ivy “驱逐”旧（缺失）版本，转而支持 4.0.7

# 使用配置映射

此“默认”配置映射将仅包括编译范围依赖项（这是 Maven 默认值）并排除任何标记为可选的内容：

```
<dependency org="org.springframework" name="spring-web" rev="3.2.1.RELEASE" conf="default"/> 
```

有关 ivy 中配置映射的更多信息，请阅读：

*   [Maven 范围如何通过 ivy 映射到 ivy 配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)

# file - 程序集：卡住 - 读取文本文件

> ID：15077300
> 
> 赞同：-1
> 
> 时间：2013-02-25T21:58:41.060
> 
> 标签：file, assembly, file-io, x86, nasm

下面是我希望我的 NASM 程序中的相关代码。一旦调用了 int 080h，调试器就会显示 eax 的 -9。我的 test.txt 中的文本是 321314145。我已经盯着这个看了好几个小时了，我在这里遇到了死胡同。为什么会这样？

```
%define BUFLEN 128
%define READLEN 3
%define SYSCALL_READ  3

    SECTION .bss                    ; uninitialized data section
buf:    resb READLEN                     ; buffer for read
rlen:   resb 4
newstr: resb BUFLEN

; read file name from arg

    ;
    pop     ebx         ;not using

    pop     ebx         ;not using

    pop     ebx         ;pop filename

; open file
;
    mov     eax, SYSCALL_OPEN
    mov     ecx, STDIN
    int     080h

    mov     eax, SYSCALL_READ ; read function
    mov     ebx, eax      ; Arg: file descriptor
    mov     ecx, buf      ; Arg: address of buffer
    mov     edx, READLEN      ; Arg: buffer length
    int     080h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:06:54.387

```
mov     eax, SYSCALL_READ ; read function
mov     ebx, eax      ; Arg: file descriptor 
```

你开玩笑的对吧？

这`-9`是“错误的文件号”（每个 errno.h）。确保您的 sys_open 成功，然后放入`eax`....`ebx`更改之前`eax`！

# sharepoint-api - 将大文件上传到 Sharepoint 365

> ID：15077305
> 
> 赞同：1
> 
> 时间：2013-02-25T21:59:13.570
> 
> 标签：sharepoint-api, office365

我正在使用 CSOM 将文件上传到 Sharepoint 365 站点。

我已经使用此处找到的方法使用基于声明的身份验证成功登录“ [http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx) "

但是在 ClientContext 上使用 SaveBinaryDirect 失败并出现 405，因为 cookie 附加到请求太晚了。

使用 CSOM 上传文件的另一种方法与以下类似。但是对于 SP 365，这将文件大小限制为大约 3 兆。

```
 var newFileFromComputer = new FileCreationInformation
                {
                    Content = fileContents,
                    Url = Path.GetFileName(sourceUrl)
                };

 Microsoft.SharePoint.Client.File uploadedFile = customerFolder.Files.Add(newFileFromComputer);
                    context.Load(uploadedFile);
                    context.ExecuteQuery(); 
```

有什么方法可以使用 CSOM、SP 365 和最大 100 兆的文件大小来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:36:49.340

好吧，我还没有找到使用 CSOM 的方法，这真是令人愤怒。

SEvans 在[http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)的评论中发布了一个解决方法。

基本上只需做一个 http put 并附加来自基于声明的身份验证的 cookie 集合。SEvans 发布的解决方法如下

* * *

很棒的代码 Wichtor。正如其他人所指出的，SaveBinaryDirect 无法正常工作，因为 FedAuth cookie 永远不会附加到该方法生成的 HTTP PUT 请求。

这是我的解决方法：

```
// "url" is the full destination path (including filename, i.e. https://mysite.sharepoint.com/Documents/Test.txt) 

// "cookie" is the CookieContainer generated from Wichtor's code 
// "data" is the byte array containing the files contents (used a FileStream to load) 

System.Net.ServicePointManager.Expect100Continue = false; 
HttpWebRequest request = HttpWebRequest.Create(url) as HttpWebRequest; 
request.Method = "PUT"; 
request.Accept = "*/*"; 
request.ContentType = "multipart/form-data; charset=utf-8"; 
request.CookieContainer = cookie; request.AllowAutoRedirect = false; 
request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)"; 
request.Headers.Add("Accept-Language", "en-us"); 
request.Headers.Add("Translate", "F"); request.Headers.Add("Cache-Control", "no-cache"); request.ContentLength = data.Length; 

using (Stream req = request.GetRequestStream()) 
{ req.Write(data, 0, data.Length); } 

HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
Stream res = response.GetResponseStream(); 
StreamReader rdr = new StreamReader(res); 
string rawResponse = rdr.ReadToEnd(); 
response.Close();
rdr.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-10T08:32:44.167

实际上，在尝试在 SharePoint Online 中上传大小超过`250MB`文件限制的文件时，会发生以下异常：

> 收到的响应为 -1，Microsoft.SharePoint.Client.InvalidClientQueryException 请求消息太大。服务器不允许大于 262144000 字节的消息。

为了规避这个错误，我们引入了[分块文件上传方法](https://docs.microsoft.com/en-us/previous-versions/office/sharepoint-server/dn760924(v=office.15))，支持上传大于 250 MB 的文件。在提供的链接中，有一个示例演示了如何通过 SharePoint CSOM API 使用它。

> 支持的版本：
> 
> *   SharePoint Online
> *   SharePoint On-Premise **2016**或更高版本

以下示例演示了如何在 SharePoint REST API 中使用分块文件上传方法：

```
class FileUploader
{
    public static void ChunkedFileUpload(string webUrl, ICredentials credentials, string sourcePath, string targetFolderUrl, int chunkSizeBytes, Action<long, long> chunkUploaded)
    {
        using (var client = new WebClient())
        {
            client.BaseAddress = webUrl;
            client.Credentials = credentials;
            client.Headers.Add("X-FORMS_BASED_AUTH_ACCEPTED", "f");
            var formDigest = RequestFormDigest(webUrl, credentials);
            client.Headers.Add("X-RequestDigest", formDigest);

            //create an empty file first
            var fileName = System.IO.Path.GetFileName(sourcePath);
            var createFileRequestUrl = string.Format("/_api/web/getfolderbyserverrelativeurl('{0}')/files/add(url='{1}',overwrite=true)", targetFolderUrl, fileName);
            client.UploadString(createFileRequestUrl, "POST");

            var targetUrl = System.IO.Path.Combine(targetFolderUrl, fileName);
            var firstChunk = true;
            var uploadId = Guid.NewGuid();
            var offset = 0L;

            using (var inputStream = System.IO.File.OpenRead(sourcePath))
            {
                var buffer = new byte[chunkSizeBytes];
                int bytesRead;
                while ((bytesRead = inputStream.Read(buffer, 0, buffer.Length)) > 0)
                {
                    if (firstChunk)
                    {
                        var endpointUrl = string.Format("/_api/web/getfilebyserverrelativeurl('{0}')/startupload(uploadId=guid'{1}')", targetUrl, uploadId);
                        client.UploadData(endpointUrl, buffer);
                        firstChunk = false;
                    }
                    else if (inputStream.Position == inputStream.Length)
                    {
                        var endpointUrl = string.Format("/_api/web/getfilebyserverrelativeurl('{0}')/finishupload(uploadId=guid'{1}',fileOffset={2})", targetUrl, uploadId, offset);
                        var finalBuffer = new byte[bytesRead];
                        Array.Copy(buffer, finalBuffer, finalBuffer.Length);
                        client.UploadData(endpointUrl, finalBuffer);
                    }
                    else
                    {
                        var endpointUrl = string.Format("/_api/web/getfilebyserverrelativeurl('{0}')/continueupload(uploadId=guid'{1}',fileOffset={2})", targetUrl, uploadId, offset);
                        client.UploadData(endpointUrl, buffer);
                    }
                    offset += bytesRead;
                    chunkUploaded(offset, inputStream.Length);
                }
            }
        }
    }

    public static string RequestFormDigest(string webUrl, ICredentials credentials)
    {
        using (var client = new WebClient())
        {
            client.BaseAddress = webUrl;
            client.Credentials = credentials;
            client.Headers.Add("X-FORMS_BASED_AUTH_ACCEPTED", "f");
            client.Headers.Add("Accept", "application/json; odata=verbose");
            var endpointUrl = "/_api/contextinfo";
            var content = client.UploadString(endpointUrl, "POST");
            var data = JObject.Parse(content);
            return data["d"]["GetContextWebInformation"]["FormDigestValue"].ToString();
        }
    }
} 
```

源代码：[`FileUploader.cs`](https://gist.github.com/vgrem/d313805b9b4401c9ccefff2c2782f866)

**用法**

```
var userCredentials = GetCredentials(userName, password);
var sourcePath = @"C:\temp\jellyfish-25-mbps-hd-hevc.mkv"; //local file path
var targetFolderUrl = "/Shared Documents"; //library reltive url
FileUploader.ChunkedFileUpload(webUrl,
       userCredentials,
       sourcePath, 
       targetFolderUrl, 
       1024 * 1024 * 5, //5MB
       (offset, size) =>
       {
            Console.WriteLine("{0:P} completed", (offset / (float)size));
       }); 
```

**参考**

[始终使用文件分块将 > 250 MB 的文件上传到 SharePoint Online](https://blogs.technet.microsoft.com/sharepointdevelopersupport/2016/11/23/always-use-file-chunking-to-upload-files-250-mb-to-sharepoint-online/)

# javascript - 如何在封闭的 Dojo Titlepane 中垂直居中内容？

> ID：15077309
> 
> 赞同：0
> 
> 时间：2013-02-25T21:59:25.883
> 
> 标签：javascript, html, css, dojo

我有一个道场标题窗格，其中包含左侧的按钮和右侧的一段文本。我希望能够使按钮相对于文本段落垂直居中对齐，并希望避免使用表格。我需要一个适用于 IE7+ 的解决方案。不管它值多少钱，我都在使用 Dojo 1.3.2（是的……我知道它已经过时了）。标题窗格最初是关闭的，直到用户决定打开它。

这是标题窗格内容的示例：

```
<div>
    <div style="float: left; margin-bottom: 5px; margin-right: 5px;">
        <input type="submit" name="access" id="access" value="Access" STYLE="font-size:8pt" />
    </div>
    <div style="float: right; margin-right: 5px;">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla placerat vulputate tortor, sit amet malesuada quam vulputate vel. In hac habitasse platea dictumst. Vivamus ut rutrum nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Praesent rhoncus nisi vitae augue tincidunt elementum. Phasellus a lorem dolor. Aliquam erat felis, ultrices eget lacinia non, rutrum a massa. Mauris et est dui, ut rutrum orci. Curabitur pulvinar porta risus, ac lobortis lorem volutpat ut. Etiam fringilla hendrerit diam at faucibus. Donec condimentum lacinia sem, quis aliquet mauris tincidunt nec. Ut sit amet urna lectus, vel volutpat ipsum. Aliquam erat volutpat. Proin id orci sit amet turpis sagittis adipiscing nec nec enim. Maecenas vulputate, velit a commodo ultricies, nisl nisl tristique lorem, ut lacinia mauris felis eget velit. Vestibulum sit amet dictum tellus.</p>
    </div>
</div> 
```

还值得一提的是，我不知道容器的高度，因为我知道有一些解决方案，容器高度在 css 中是硬编码的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:48:20.803

我的解决方案有效，但仅适用于 IE8+（可能我的 ieTester 错误，所以您应该检查一下）。您将不得不稍微修改您的 HTML：

```
<div>
    <div style="margin-bottom: 5px; margin-right: 5px; display: table; ">
    <p style="display: table-cell; vertical-align: middle; width: 50px;">
            <input type="submit" name="access" id="access" value="Access" STYLE="font-size:8pt ;" />
        </p>

        <div style="float: right; margin-right: 5px; width: 300px;">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla placerat vulputate tortor, sit amet malesuada quam vulputate vel. In hac habitasse platea dictumst. Vivamus ut rutrum nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Praesent rhoncus nisi vitae augue tincidunt elementum. Phasellus a lorem dolor. Aliquam erat felis, ultrices eget lacinia non, rutrum a massa. Mauris et est dui, ut rutrum orci. Curabitur pulvinar porta risus, ac lobortis lorem volutpat ut. Etiam fringilla hendrerit diam at faucibus. Donec condimentum lacinia sem, quis aliquet mauris tincidunt nec. Ut sit amet urna lectus, vel volutpat ipsum. Aliquam erat volutpat. Proin id orci sit amet turpis sagittis adipiscing nec nec enim. Maecenas vulputate, velit a commodo ultricies, nisl nisl tristique lorem, ut lacinia mauris felis eget velit. Vestibulum sit amet dictum tellus.</p>
        </div>
    </div><!-- display: table; end -->
</div> 
```

所以首先：

1.  你必须`div`用`p`inteo包装`div`，`input`这样它就知道它有多高。

2.  添加此包装`display: table`样式。

3.  放一个额外的元素来包装`input`，这个元素必须有那些`CSS` `float: left; width: somepx`和`display:table-ceill`。

4.  记得给with （你`width: somepx`的文字）。`div``p`

5.  尝试使用`CSS`类而不是内联样式。

PS总是记得放jsfiddle：http: [//jsfiddle.net/jnCU4/](http://jsfiddle.net/jnCU4/)

# java - 围绕 Sytem.in 和 System.out 进行 JUnit 测试

> ID：15077312
> 
> 赞同：2
> 
> 时间：2013-02-25T21:59:32.997
> 
> 标签：java, junit

我被要求在从命令行运行和操作的遗留 Java 应用程序中引入单元测试。基本上，主循环打印出一个菜单，用户输入一些内容并显示更多数据。

这个 Main 类说明了应用程序是如何工作的。

```
public class Main{

    static BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));

    public static void main(String argv[]) throws IOException{
        while (true) {
            char input = (char) reader.read();

            if(input == 'x'){
                return;
            }

            System.out.println(input);
        }
    }
} 
```

我希望我的测试方法看起来像这样

```
public void testCaseOne(){
    Main.main();
    String result = "";

    result = sendInput("1");
    assertEqual(result, "1");

    result = sendInput("x");
    assertEqual(result,"");
} 
```

我知道`System.setOut()`and`System.setIn()`方法，但我无法找到使该`System.setIn()`方法在这种情况下工作的方法，因为该`reader.read()`方法阻塞了我的线程。

我的测试设计错了吗？有没有办法设计`sendInput()`通过阻塞 reader.read() 调用工作的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:02:43.383

我建议重构代码以允许注入输入/输出流，然后您可以模拟它们。如果你能把它改成类似

```
public class Main{

    static BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));

    public static void main(String argv[]) throws IOException{
        new YourClass(reader,System.out).run();
    }
}

public class YourClass { // I don't know what your class is actually doing, but name it something appropriate
  private final InputReader reader;
  private final PrintStream output;

  public YourClass(InputReader reader, PrintStream output) {
       this.reader = reader;
       this.output = ouptut;
  }

  public void run() {

        while (true) {
        char input = (char) reader.read();

        if(input == 'x')
            return;

        output.println(input);
  }
} 
```

这个设计做了几件事：

1.  它将逻辑从您的主类中取出。通常 main 方法实际上只是用于启动应用程序。

2.  它使`YourClass`单元测试更容易。在您的测试中，您可以简单地模拟输入/输出。

编辑：更新此重构如何帮助解决阻塞 IO 问题

通过使阅读器/输出可注入如上所示，您实际上不需要使用真正的 System.in 和 System.out - 您可以使用模拟来代替。这消除了实际阻塞读取的需要。

```
public void testCaseOne(){
    // pseudocode for the mock - this will vary depending on your mock framework
    InputReader reader = createMock(InputReader);
    // the first time you read it will be a "1", the next time it will be an "x"
    expect(reader.read()).andReturn("1");
    expect(reader.read()).andReturn("x");

    PrintStream stream = createMock(PrintStream);
    // only expect the "1" to get written. the "x" is the exit signal
    expect(stream.println("1"));

    new YourClass(reader,stream).run();
    verifyMocks();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:06:13.470

我会重构 Main 以便更容易测试.. 像这样：

```
public class Main{

    private boolean quit = false;

    public static void main(String[] argv) throws IOException {
        Main main = new Main();
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        char input = main.readInput(reader);
        while (!main.quit()) {
            System.out.println(input);
            input = main.readInput(reader);
        }
    }

    public char readInput(Reader reader) throws IOException{
        char input = (char) reader.read();

        if(input == 'x'){
            quit = true;
            return '\0';
        }

        return input;
    }

    public boolean quit(){
        return quit;
   }
} 
```

就个人而言，我尽量远离静态变量。如果你需要一个，你总是可以在上面的 main 方法中声明它。

测试 while(true) 几乎是不可能的，因为测试 while 循环是否永远不会退出将花费无限的时间。那么问题来了，你是否应该在这种`main.quit() == true`情况下测试循环的退出。就个人而言，我只会测试核心逻辑，其余的不测试：

```
public class MainTest {

    private Main main;

    @Before
    public void setup(){
        main = new Main();
    }

    @Test
    public void testCaseOne() throws IOException{

        char result1 = main.readInput(new StringReader("1"));
        assertEquals(result1, '1');
        assertFalse(main.quit());

        char result2 = main.readInput(new StringReader("x"));
        assertEquals(result2, '\0');
        assertTrue(main.quit());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:57:10.563

这是我采用的不需要重构遗留代码的解决方案。

简而言之，我创建了一个抽象测试类，它在一个单独的线程上的进程中编译和执行应用程序。我将自己附加到进程的输入/输出并对其进行读/写。

```
public abstract class AbstractTest extends TestCase{

    private Process process;
    private BufferedReader input;
    private BufferedWriter output;

    public AbstractTest() {
        //Makes a text file with all of my .java files for the Java Compiler process
        Process pDir = new ProcessBuilder("cmd.exe", "/C", "dir /s /B *.java > sources.txt").start();
        pDir.waitFor();

        //Compiles the application
        Process p = new ProcessBuilder("cmd.exe", "/C", "javac @sources.txt").start();
        p.waitFor();
    }

    protected void start(){
        Thread thread = new Thread() {
            public void run() {
                //Execute the application
                String command = "java -cp src/main packagename.Main ";
                AbstractTest.this.process = = new ProcessBuilder("cmd.exe", "/C", command).start();
                AbstractTest.this.input = new BufferedReader(new InputStreamReader(AbstractTest.this.process.getInputStream()));
                AbstractTest.this.output = new BufferedWriter(new OutputStreamWriter(AbstractTest.this.process.getOutputStream()));
            }
        }
    }

    protected String write(String data) {
         output.write(data + "\n");
         output.flush();
         return read();
    }

    protected String read(){
         //use input.read() and read until it makes senses
    }

    protected void tearDown() {
        this.process.destroy();
        this.process.waitFor();
        this.input.close();
        this.output.close();
    }

} 
```

之后，制作实际的测试类和实现真正的测试方法就很容易了。

```
public void testOption3A(){
    start();
    String response = write("3");
    response = write("733");
    assertEquals("*** Cactus ID 733 not found ***",response);
} 
```

**优点**

*   无需重构
*   实际测试实现（无模拟/注入）
*   不需要任何外部库

**缺点**

*   当事情不能正常工作时很难调试（可修复）
*   严重依赖操作系统行为（此类中的 Windows，但可修复）
*   为每个测试类编译应用程序（我认为是可修复的？）
*   出现错误且进程未被终止时的“内存泄漏”（我认为可修复？）

这可能是一个边缘的“黑客”，但它满足了我的需要和要求。

# ruby-on-rails - Windows 7 上的 Ruby on Rails 问题

> ID：15077316
> 
> 赞同：0
> 
> 时间：2013-02-25T21:59:40.293
> 
> 标签：ruby-on-rails, windows-7, gem

我已经尝试了几个小时让 Ruby on Rails 在我的 Windows 7 计算机上运行。我已经安装了 Ruby、Rails 和 mySQL。我正在学习 Lynda.com 的教程，但每次我尝试创建一个新项目时，都会遇到一大堆错误……下面是我尝试创建一个新项目的结果。任何帮助将不胜感激。

```
 C:\Users\Zack\Rails>rails new sample
          create  
          create  README.rdoc
          create  Rakefile
          create  config.ru
          create  .gitignore
          create  Gemfile
          create  app
          create  app/assets/images/rails.png
          create  app/assets/javascripts/application.js
          create  app/assets/stylesheets/application.css
          create  app/controllers/application_controller.rb
          create  app/helpers/application_helper.rb
          create  app/views/layouts/application.html.erb
          create  app/mailers/.gitkeep
          create  app/models/.gitkeep
          create  config
          create  config/routes.rb
          create  config/application.rb
          create  config/environment.rb
          create  config/environments
          create  config/environments/development.rb
          create  config/environments/production.rb
          create  config/environments/test.rb
          create  config/initializers
          create  config/initializers/backtrace_silencers.rb
          create  config/initializers/inflections.rb
          create  config/initializers/mime_types.rb
          create  config/initializers/secret_token.rb
          create  config/initializers/session_store.rb
          create  config/initializers/wrap_parameters.rb
          create  config/locales
          create  config/locales/en.yml
          create  config/boot.rb
          create  config/database.yml
          create  db
          create  db/seeds.rb
          create  doc
          create  doc/README_FOR_APP
          create  lib
          create  lib/tasks
          create  lib/tasks/.gitkeep
          create  lib/assets
          create  lib/assets/.gitkeep
          create  log
          create  log/.gitkeep
          create  public
          create  public/404.html
          create  public/422.html
          create  public/500.html
          create  public/favicon.ico
          create  public/index.html
          create  public/robots.txt
          create  script
          create  script/rails
          create  test/fixtures
          create  test/fixtures/.gitkeep
          create  test/functional
          create  test/functional/.gitkeep
          create  test/integration
          create  test/integration/.gitkeep
          create  test/unit
          create  test/unit/.gitkeep
          create  test/performance/browsing_test.rb
          create  test/test_helper.rb
          create  tmp/cache
          create  tmp/cache/assets
          create  vendor/assets/javascripts
          create  vendor/assets/javascripts/.gitkeep
          create  vendor/assets/stylesheets
          create  vendor/assets/stylesheets/.gitkeep
          create  vendor/plugins
          create  vendor/plugins/.gitkeep
             run  bundle install
            Unfortunately, a fatal error has occurred. Please see the Bundler
            troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!

C:/Ruby200-x64/lib/ruby/2.0.0/rubygems/config_file.rb:305:in `read': Is a directory - C:/ProgramData/gemrc (Errno::EISDIR)
        from C:/Ruby200-x64/lib/ruby/2.0.0/rubygems/config_file.rb:305:in `load_file'
        from C:/Ruby200-x64/lib/ruby/2.0.0/rubygems/config_file.rb:200:in `initialize'
        from C:/Ruby200-x64/lib/ruby/2.0.0/rubygems.rb:319:in `new'
        from C:/Ruby200-x64/lib/ruby/2.0.0/rubygems.rb:319:in `configuration'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler rubygems_integration.rb:34:in`configuration'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundlerrubygems_integration.rb:53:in'sources='
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/source rubygems.rb:249:in `ensure in remote_specs'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:249:in `remote_specs'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:162:in `fetch_specs'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/source/rubygems.rb:66:in `specs'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/definition.rb:192:in`block (2 levels) in index'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/definition.rb:189:in`each'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/definition.rb:189:in`block in index'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/index.rb:9:in `build'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/definition.rb:185:in`index'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/definition.rb:179:in`resolve'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/definition.rb:114:in`specs'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/definition.rb:109:in`resolve_remotely!'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/installer.rb:83:in `run'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/installer.rb:14:in `install'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/cli.rb:247:in `install'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendor/thor/task.rb:2
7:in `run'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendor/thor/invocatio
n.rb:120:in `invoke_task'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendor/thor.rb:344:in
 `dispatch'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/vendor/thor/base.rb:4
34:in `start'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/bin/bundle:20:in `block in <main>
'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/lib/bundler/friendly_errors.rb:4:
in `with_friendly_errors'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.0/bin/bundle:20:in `<main>'

C:\Users\Zack\Rails> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:44:00.243

试试 Rails 安装程序。我的导轨没有问题。轻松一键安装。[www.railsinstaller.org](http://railsinstaller.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:19:38.533

这可能不是一个这样的答案，我不希望它给人一种刻薄的印象或任何东西，但您可以通过查看[VirtualBox（免费）](https://www.virtualbox.org/)并安装[Ubuntu](http://www.ubuntu.com/download)实例或其他 *nix 操作来帮自己一个忙系统。无论您是为了好玩还是为了盈利，如果您使用 Windows 以外的其他工具与 Ruby 和 Rails 一起工作，您将花费更少的时间来尝试找出错误的原因，并花费更多的时间进行编码。它只是工作得更好。

3 年前，我从头开始使用 Rails，这可能是我成为更好的开发人员所采取的最佳步骤之一。

# java - 以特定顺序在休眠中获取属性

> ID：15077323
> 
> 赞同：0
> 
> 时间：2013-02-25T22:00:25.790
> 
> 标签：java, hibernate

我有以下情况：

```
class GraphUser {

    @Column(name="first_name")
    private String firstName = "";

    @Column(name="middle_name")
    private String middleName = "";

    @Column(name="last_name")
    private String lastName = "";

    @Column(name="start_point")
    private String startPointId = "";

    @ManyToMany(fetch = FetchType.EAGER, mappedBy = "points")

    private HashMap<Point> points= new HashMap<Point>();

    private Point startPoint = points.get(startPointId);

} 
```

有什么方法可以强制休眠在创建 startPoint 属性之前获取 startPointId 点以获得正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:02:34.397

**您不需要 property**，只需使用瞬态 getter 即可。每次需要获取起点时都调用它。

```
@Transient
public Point getStartPoint() {
   return points.get(startPointId);
} 
```

这将毫不费力地工作（前提`FetchType`是`points`is `EAGER`），并且 Hibernate 将安全地忽略它。实际上，每次
查询可能会有轻微的性能损失，但我不会为此烦恼。`HashMap`

此外，我建议您`HashMap`在声明中替换`points`with `Map`，即：

```
@ManyToMany(fetch = FetchType.EAGER, mappedBy = "points")
private Map<Point> points = new HashMap<Point>(); 
```

（相应地更新 getter 和 setter）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:01:56.100

在`startPoint`setter for 中进行赋值`startPointId`，或者在 getter for 中进行赋值`startPoint`。并且`startPoint`可能应该是这样[`transient`，`@Transient`Hibernate 不会对此感到厌烦](https://stackoverflow.com/a/4662599/139010)。

```
public void setStartPointId(String startPointId) {
    this.startPointId = startPointId;
    this.startPoint = points.get(startPointId);
}

// or

public Point getStartPoint() {
    if (this.startPoint == null) {
        this.startPoint = points.get(startPointId);
    }
    return this.startPoint;
}

public void setStartPointId(String startPointId) {
    this.startPointId = startPointId;
    this.startPoint = null;
} 
```

# wpf - 扩展自定义 TreeView 项目容器样式？

> ID：15077324
> 
> 赞同：0
> 
> 时间：2013-02-25T22:00:29.093
> 
> 标签：wpf, styles, itemcontainerstyle, basedon

如何扩展我在 CustomTreeView 中声明的样式？所以我有一个浅灰色的前景和一个绿色的背景？

CustomTreeView.xaml

```
<TreeView x:Class="WpfApplication17.CustomTreeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <TreeView.ItemContainerStyle>
        <Style TargetType="{x:Type TreeViewItem}">
            <Setter Property="Foreground" Value="LightGray"/>
        </Style>
    </TreeView.ItemContainerStyle>
</TreeView> 
```

窗口.xaml

```
<Window x:Class="WpfApplication17.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication17">
    <local:CustomTreeView ItemsSource="{Binding Data}">
        <local:CustomTreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}" BasedOn="{StaticResource {x:Type TreeViewItem}}">
                <Setter Property="Background" Value="Green"/>
            </Style>
        </local:CustomTreeView.ItemContainerStyle>
    </local:CustomTreeView>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:56:43.353

不确定这是否是正确的方法，但我最终使用了它。

```
<TreeView x:Class="WpfApplication17.CustomTreeView"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
        <TreeView.Resources>
            <Style x:Key="m_itemContainerStyle" TargetType="{x:Type TreeViewItem}">
                <Setter Property="Foreground" Value="LightGray"/>
            </Style>
        </TreeView.Resources>

        <TreeView.ItemContainerStyle>
            <Style BasedOn="{StaticResource m_itemContainerStyle}" TargetType="{x:Type TreeViewItem}">

            </Style>
        </TreeView.ItemContainerStyle>
    </TreeView>

    <Window x:Class="WpfApplication17.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:WpfApplication17">
        <local:CustomTreeView ItemsSource="{Binding Data}">
            <local:CustomTreeView.ItemContainerStyle>
                <Style BasedOn="{StaticResource m_itemContainerStyle}"  TargetType="{x:Type TreeViewItem}">
                    <Setter Property="Background" Value="Green"/>
                </Style>
            </local:CustomTreeView.ItemContainerStyle>
        </local:CustomTreeView>
    </Window> 
```

# wso2 - WSO2 数据服务 (DSS) 和 REST 资源概念

> ID：15077327
> 
> 赞同：2
> 
> 时间：2013-02-25T22:00:37.120
> 
> 标签：wso2, wso2dss

嗨，我可能缺少 WSO2 DSS REST 资源的一些概念。

1.  如何创建支持 CRUD 操作的资源（资源名称相同但动词不同）？例如，如果我有 DSS 资源“/services/samples/RDBMSSample/employees”，我希望能够对“员工”资源进行 GET、POST、PUT、DELETE，但 DSS 不允许我这样做 -它用最后一个定义的资源替换资源。

2.  当使用 JSON 发布到资源时，它需要使用操作名称将数据包装在元素中， `'{"employeesbynumber":{"employeenumber":{"$":"1002"}}}'` 我怀疑这是因为您在 DSS 中进行到 SOAP 的内部映射。有办法解决吗？

3.  使用端点的正确方法是什么？在 TryIt 工具中，有几个可用的端点用于 SOAP1.1、SOAP1.2。Http端点。以及没有后缀的端点。从客户那里引用它们的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T12:25:41.477

您可以参考[http://docs.wso2.org/display/DSS310/Exposing+Data+as+REST-Style+Resources](http://docs.wso2.org/display/DSS310/Exposing+Data+as+REST-Style+Resources)来实现对数据的 REST CRUD 操作。

您还可以在 tryit 工具中的任何可用端点中试用您的端点。

谢谢玛尼莎

# ember.js - 创建路径助手，将哈希传递给车把助手或连接字符串

> ID：15077328
> 
> 赞同：3
> 
> 时间：2013-02-25T22:00:38.643
> 
> 标签：ember.js, handlebars.js, helper

我正在寻找一种在车把中创建路径助手的方法，该路径助手会生成指向特定页面的 url。我需要能够传递路线名称和生成路线所需的参数。所以首先我希望将哈希传递给助手......但这不可能，因为您无法在处理程序模板中创建它。现在语法是这样的：

```
{{{path 'some_path_name' 'foo=bar' }}} 
```

这似乎可行，但现在我有一个问题，我无法在模板内连接字符串。知道什么是最好的方法吗？我现在看到的唯一选择是我在我的 javascript 代码中创建参数......但我真的不喜欢这个，我不能在模板中指定它。

我在某处有一个映射，它将 some_path_name 映射到 /path-name/:foo ...所以我希望路径助手创建 /path-name/bar。

亲切的问候，

大安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T08:53:41.037

此代码应该可以工作，但您必须添加一些额外的验证。

```
var routes = {
    'some_path_name': '/path-name/:foo'
};

Handlebars.registerHelper('path', function (routeName, options) {
    var route,
        params;

    if (!routes.hasOwnProperty(routeName)) return;

    route = routes[routeName];
    params = options.hash;

    for (var param in params) {
        var value = params[param];
        route = route.replace(':'+ param, value);
    }

    return route;
}); 
```

# erlang - 从 erlang 模块创建 mnesia

> ID：15077330
> 
> 赞同：0
> 
> 时间：2013-02-25T22:00:49.740
> 
> 标签：erlang, mnesia

这应该很简单，虽然我还没有找到方法或例子......

Mnesia 文档展示了如何从 erlang shell 初始化/创建 Mnesia 数据库，这需要使用 -mnesia 参数启动 erl shell：

```
erl -mnesia dir '"/tmp/funky"' 
```

一旦进入外壳，您就可以创建架构/等...

```
>mnesia:create_schema([node()]).
ok.
>mnesia:start().
ok. 
```

嗯，这很简单。如果我想从另一个 erlang 模块创建模式/等，但我没有使用 -mnesia parateter/flag 启动该过程怎么办？我认为这基本上意味着，如何动态地，而不是运行脚本，而是使用纯 erlang 代码方法。例如，我想做这样的事情：

```
-module(something).
-export([test/0]).

test() ->
    erlang:setParameter("mnesia","/tmp/funcky"),
    mnesia:create_schema([node()]),
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:08:26.467

好吧，我想我找到了解决方案。set_env 是我需要的：

```
application:set_env(mnesia, dir, "/tmp/funcky"),
mnesia:create_schema([node()]),
etc... 
```

# android - 设备方向更改时可用的共享意图列表菜单 (shareActionProvider)

> ID：15077334
> 
> 赞同：1
> 
> 时间：2013-02-25T22:01:03.210
> 
> 标签：android, android-intent, shareactionprovider

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T16:20:37.430

如果您使用的是 SDK 11 或更高版本，您可以注册以在（或任何）操作项的菜单显示时接收回调，包括您的 ShareActionProvider：

```
getActionBar().addOnMenuVisibilityListener(new ActionBar.OnMenuVisibilityListener() {

    @Override
    public void onMenuVisibilityChanged(boolean isVisible) {
        ...
    }

}); 
```

ActionBarSherlock 也支持此方法，但由于某种原因，实际上从未调用过侦听器。

# arrays - 如何将数组相乘并将结果打印为 perl 中的矩阵？

> ID：15077335
> 
> 赞同：1
> 
> 时间：2013-02-25T22:01:07.517
> 
> 标签：arrays, perl

我是 Perl 新手，想将两个数组相乘：

```
my @array1 = (1,2,3);
my @array2 = (2,4,6); 
```

并打印出来：

```
 # output ==
      #          2  4  6
      #          4  8 12
      #          6 12 18 
```

编辑：

知道了

```
my @array1 = (1,2,3);
my @array2 = (2,4,6);

multiply_array(\@array1, \@array2);

sub multiply_array{
     my ($a1, $a2)=@_;
     for(my $i=0; $i<3; $i++){
         for(my $j=0; $j<3; $j++){
             my $x = @$a1[$i]*@$a2[$j];
             print $x."\t";
        }
         print "\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:06:05.303

您尝试对数组执行的操作称为笛卡尔积。

使用笛卡尔积创建数组数组：

```
my @product = map { my $a = $_; [map { $_ * $a } @array2] } @array1; 
```

以非常详细的格式打印它：

```
use Data::Dumper;
Dumper(@product); 
```

只需打印产品而不将其存储到数组中：

```
for my $x (@array1) {
    for my $y (@array2) {
        print $x * $y . "\t";
    }
    print "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:32:26.580

您已将数组的引用传递给函数。

因此，您需要使用`->`来访问数组元素。

以下是您可以执行的操作：

```
use strict;
use warnings;

my @array1 = (1,2,3);
my @array2 = (2,4,6);

multiply_array(\@array1, \@array2);

sub multiply_array{
    my ($a1, $a2)=@_;
    for(my $i=0; $i<3; $i++){
        for(my $j=0; $j<3; $j++){
            my $x = $a1->[$i]*$a2->[$j];
            print $x."\t";
        }
        print "\n";
    }
} 
```

# scala - 什么是 Scala 的不破坏 mimetype 的 shebang 行？

> ID：15077341
> 
> 赞同：6
> 
> 时间：2013-02-25T22:01:13.817
> 
> 标签：scala, shebang

我一直在使用它，但是它将 mimetype 更改为`text/x-shellscript`，这使得 Emacs 之类的编辑器将我的代码视为 Shell 脚本。

```
#!/bin/sh
exec scala "$0" "$@"
!# 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T23:34:08.940

**bangshe (!#) 可能是问题所在**

*我在我的环境中注释掉了 !# 和以下作品：*

文件：你好.sh

```
#!/usr/bin/env scala

val name = readLine("What is your name? ")
println("Hello " + name + "!") 
```

更改为可执行权限，然后运行：

```
chmod a+x hello.scala
./hello.scala 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:09:31.117

正如我可以测试的那样

```
#!/usr/bin/env scala
!#

println("Args: " + args.toList) 
```

工作正常：

```
➜ ./test.scala 1 hi
Args: List(1, hi) 
```

或者您可以不使用`/usr/bin/env`, 来编写固定`scala`路径

# google-maps-api-3 - 在地图上标记位置 v3

> ID：15077343
> 
> 赞同：0
> 
> 时间：2013-02-25T22:01:25.520
> 
> 标签：google-maps-api-3

我正在使用简单的代码在我的网站上创建地图：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
var map;
function initialize() {
    var mapOptions = {
    zoom: 12,
    scrollwheel: false,
        center: new google.maps.LatLng(38.80962, -77.13143),
        mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);
    var customMarker = new google.maps.Marker({
        position: latlng,
        map: map,
        shadow: shadow,
        title:"Carlos Gallupa HQ",
        icon: image
    });
}
google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

现在我在使用标记精确定位我的位置时遇到问题。知道如何简单而正确地做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:36:24.990

It looks as if your marker position is not defined anywhere. Try this:

```
var customMarker = new google.maps.Marker({
    // Here is the change:
    position: map.getCenter(),
    map: map,
    shadow: shadow,
    title:"Carlos Gallupa HQ",
    icon: image
}); 
```

# c# - 只包含接口的 WinRT 组件 DLL？

> ID：15077344
> 
> 赞同：0
> 
> 时间：2013-02-25T22:01:32.847
> 
> 标签：c#, c++, dll, windows-runtime, windows-phone

是否可以编写仅包含类接口的 WinRT 组件 DLL？没有代码，只有接口的声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:49:15.510

从实验来看，似乎没有一种方法可以创建只包含在 .h 文件中声明的接口的 DLL。但是，我找到了一种解决方法，如果 WinRT 组件 DLL 项目包含一个“虚拟”cpp 文件，该文件仅包含接口 .h 文件，则 DLL（和 winmd 文件）会正确导出接口。

# java - 如何在 JAVA 中使用 PrintWriter 从顶部回写？

> ID：15077345
> 
> 赞同：1
> 
> 时间：2013-02-25T22:01:34.567
> 
> 标签：java, printwriter

使用 PrintWriter 写入 txt 文件。但是现在我有一个问题：我写了几行之后可以从顶行写吗？例如，我写过：

```
PrintWriter out = new PrintWriter("result.txt");
out.print("first line");
out.print("second line"); 
```

那么，我可以从第一行写回来吗？所以我可以在第一行之前写 String top = "top line"，如下所示：

```
top line
first line
second line 
```

问题是，我只有在写了“顶行”和“第二行”之后才能得到String top的内容。如何写入文件的开头？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:16:40.097

实现这一点的一种简单方法是将整个文件作为字符串读取，将您的前缀行附加到它的开头，然后使用 PrintWriter 对象用字符串的内容覆盖文件的内容。这不完全是你想要的，但它具有完全相同的效果。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:06:04.990

使用[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)类及其[seek](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#seek%28long%29)方法，但 write on top 不会插入行而是覆盖它们。这不是你想要的。我同意[JB Nizet](https://stackoverflow.com/users/571407/jb-nizet)的评论，最好是先计算，然后再写。

如果你知道第一行的大小，你必须写 'XXXXXXXXXXXXXXX' 来填充它，在写完其他行之后，回到顶部并用相同数量的字符替换它。可能但不推荐。

# c++ - 来自不同命名空间的模板模板参数可以成为朋友吗？

> ID：15077356
> 
> 赞同：5
> 
> 时间：2013-02-25T22:02:41.447
> 
> 标签：c++, templates, template-templates

如果这个问题的标题没有帮助，我深表歉意；如果不给出以下示例，我不知道如何简洁地提出这个问题：

```
template <template <class> class Arg>
class C {
    typedef C<Arg> type;
    friend class Arg<type>;
  public:
    C() {
        a_.set(this);
    }
  private:
    int i_;
    Arg<type> a_;
};

template <class Type>
class Arg1 {
  public:
    void set(Type* t) {
        t_ = t;
        t_->i_ = 1;
    }
  private:
    Type* t_;
};

namespace NS {

    template <class Type>
    class Arg2 {
      public:
        void set(Type* t) {
            t_ = t;
            t_->i_ = 2;
        }
      private:
        Type* t_;
    };

} 
```

如您所见，`Arg2`是`Arg1`. 但是，VS 2008 只允许`Arg1`用作模板参数：

```
int main() {
    C<Arg1> c1; // compiles ok
    C<NS::Arg2> c2; // error C2248

    return 0;
} 
```

错误是`'C<Arg>::i_' : cannot access private member declared in class 'C<Arg>'`。`i_`如果公开，一切正常，所以这似乎是一个友谊问题。

当模板模板参数位于不同的命名空间时，导致友谊声明失败的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:57:09.000

命名空间成员资格不影响友谊的资格。这是一个编译器错误。

`friend` and `namespace` are language features that interact, though, so it's not particularly surprising as bugs go. Perhaps it's actually friending a nonsense forward declaration in the enclosing namespace, `::Arg2<type>`.

# php - SimpleModal 表单提交

> ID：15077359
> 
> 赞同：0
> 
> 时间：2013-02-25T22:03:02.143
> 
> 标签：php, jquery, forms, submit, simplemodal

我有一个 php 页面“formpage.php”，其中有一个像这样的表单：

```
<div id='hiddenform' style='display:hidden'>
<form name="testform" action="formpage.php" method="post">
Username: <input type="text" name="user">
<input type="submit" value="Submit">
</form> 
</div> 
```

此表单使用 jquery 和简单模式显示（示例）：

```
$(".show_hide").click(function(){
$('#hiddenform').modal({overlayClose:true});
}); 
```

一切正常，使用 SimpleModal 打开框并显示表单，但我无法提交表单，当我按下提交按钮时没有任何反应。我应该怎么办？没有 SimpleModal，表单和提交工作正常。

我想将表单（使用 SimpleModal 打开）提交给 formpage.phhp（self），然后我在脚本中进一步使用发布的变量。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:37:32.253

这行得通吗？如果它在你的 js 中做了什么阻止了表单的默认行为（可能是 simplemodal 可能是别的东西）：

```
$(".show_hide").click(function(){
   $('#hiddenform').modal({
        overlayClose:true,
        onShow: function() {
           $('.simplemodal-data input[type=submit]').click(function() {
               $.post('the_url_where_you_want_to_send_your_data_to', $(this).closest('form').serialize(), function(data) { alert('we have a response and form has been sent!'); })
           }
        }
   });
}); 
```

# c++ - 双精度的二进制表示

> ID：15077361
> 
> 赞同：1
> 
> 时间：2013-02-25T22:03:03.270
> 
> 标签：c++

我很无聊，想看看 double 的二进制表示是什么样的。但是，我注意到窗户上有一些奇怪的东西。以下代码行演示

```
double number = 1;
unsigned long num = *(unsigned long *) &number;
cout << num << endl; 
```

在我的 Macbook 上，这给了我一个非零数字。在我的 Windows 机器上，它给了我 0。

我期待它会给我一个非零数，因为 1.0 作为双精度数的二进制表示不应该全为零。但是，我不确定我想要做的是否是明确定义的行为。

我的问题是，上面的代码是愚蠢和错误的吗？而且，有没有办法可以打印出双精度的二进制表示？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:07:33.437

1 双是[`3ff0 0000 0000 0000`](http://en.wikipedia.org/wiki/Double-precision_floating-point_format). `long`是一个[4 字节的 int](http://msdn.microsoft.com/en-us/library/cc953fe1%28v=vs.80%29.aspx)。在[小端](http://en.wikipedia.org/wiki/Endianness)硬件上，您正在阅读该`0000 0000`部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:17:00.703

如果您的编译器支持它（GCC 支持），则使用联合。根据 C++ 标准（严格的别名规则），这是未定义的行为：

```
#include <iostream>
int main() {
    union {
        unsigned long long num;
        double fp;
    } pun;

    pun.fp = 1.0;
    std::cout << std::hex << pun.num << std::endl;
} 
```

输出是

```
3ff0000000000000 
```

# python - matplotlib.pyplot.imshow：使用属性“sharex”和“sharey”时删除图中的空白

> ID：15077364
> 
> 赞同：13
> 
> 时间：2013-02-25T22:03:21.920
> 
> 标签：python, matplotlib, whitespace

我有一个与[此处](https://stackoverflow.com/questions/9120749/matplotlib-limits-when-using-plot-and-imshow-in-same-axes)发布的问题类似的问题。`sharex`不同之处在于，当我绘制两个通过和`sharey`属性共享轴的子图时，我在绘图区域内得到了不需要的空白。即使在设置后空格仍然存在`autoscale(False)`。例如，使用与上述帖子的答案类似的代码：

```
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(2, 1, 1)
ax.imshow(np.random.random((10,10)))
ax.autoscale(False)
ax2 = fig.add_subplot(2, 1, 2, sharex=ax, sharey=ax)   # adding sharex and sharey
ax2.imshow(np.random.random((10,10)))
ax2.autoscale(False)
plt.show() 
```

导致[此](https://i.stack.imgur.com/ZBoWo.png)图像。

我也尝试过`ax.set_xlim(0, 10)`，并`ax.set_xbound(0, 10)`按照[这里](https://stackoverflow.com/questions/13851410/editing-bounds-to-get-rid-of-white-space-within-a-plot-in-matplotlib)的建议，但无济于事。我怎样才能摆脱多余的空白？任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T22:38:49.457

正如[这里](https://github.com/matplotlib/matplotlib/issues/1789#issuecomment-14203547)所建议的，添加：

```
ax.set_adjustable('box-forced')
ax2.set_adjustable('box-forced') 
```

解决问题。

（[文档](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_aspect)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:18:07.303

用作`plt.subplots`：

```
fig, ax = plt.subplots(nrows=2, ncols=1, sharex=True, sharey=False)
ax[0].imshow(np.random.random((10,10)))
ax[0].autoscale(False)
ax[1].imshow(np.random.random((10,10)))
ax[1].autoscale(False) 
```

我![这个图](../Images/f5907857b2ceb7976847b37272469add.png)在轴内没有空格。使用`figsize`inside`plt.subplots`或`fig.subplots_adjust`您可以获得更好的轴比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T22:59:18.110

问题是使用`add_subplot`. 请注意，如果您调整图形大小，空白的数量会发生变化。

以下似乎有效（直到您重新调整图形大小）

```
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure(figsize=(5, 5))
ax = fig.add_axes([.3, .55, .35, .35]) 
ax.imshow(np.random.random((10,10)))
ax.autoscale(False)
ax2 = fig.add_axes([.3,  .05, .35, .35], sharex=ax, sharey=ax ) 
ax2.imshow(np.random.random((10,10)))
ax2.autoscale(False)

plt.show() 
```

这看起来像是`axes`对象的大小/位置、共享轴和来自`imshow`.

如果你能在没有蜱虫的情况下生活，你可以做到

```
ax.set_axis_off()
ax2.set_axis_off() 
```

我认为值得为此在 matplotlib github 上打开一个问题。

# html - Span 或 Javascript 中的 ZK setText 或 setValue 缺少 ID

> ID：15077369
> 
> 赞同：0
> 
> 时间：2013-02-25T22:03:38.263
> 
> 标签：html, zk

大家好，我是 ZK 框架的新手，我有一些来自数据库中的计算的动态文本，只有一个数字我在我的 zul 中创建了一个跨度元素，到目前为止一切都很好，但是当我尝试通过更改跨度元素上的文本时Javascript ZK引擎每次无法使用javascript设置值时都会为span生成一个ID，并且span对象既没有setValue也没有setText或setContent请帮忙。如何在跨度上设置值？非常感谢上帝保佑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:31:48.563

目前尚不清楚您要在这里做什么。

首先，您应该知道 ZK 是为开发人员设计的，以便更多地在 Java 中工作而不是在 JavaScript 中工作。除非它是真正应该只保留在客户端上的简单而动态的东西，否则您最好*在*框架内工作，而不是*反对*它，并在服务器端处理此类事情。

具体而言，关于`span`组件，它在 ZK 中的实现旨在作为包装器。当然，在 ZUL 中，您可以像这样自由地换行：

```
<span>
    Hello World!
</span> 
```

然而，更标准的 ZK 看起来像：

```
<label value="Hello World!" /> 
```

使用`label`组件时，您会发现用于设置值的[Java API](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zul/Label.html#setValue%28java.lang.String%29)和[JavaScript API 。](http://www.zkoss.org/javadoc/latest/jsdoc/zul/wgt/Label.html#setValue%28_global_.String%29)

最后，关于获取对组件的 JavaScript 引用，推荐的方法[记录在这里](http://books.zkoss.org/wiki/Small_Talks/2010/April/Client_Side_Programming#How_to_Get_Widget_Reference_in_JavaScript)。ZK 为 DOM 生成 id，是的，但是使用它们的 JavaScript API，您可以通过您在 Java 或 ZUL 中为小部件提供的 id 访问小部件：

```
zk.Widget.$(jq('$mylabel')[0]).setValue('Hello World!');" 
```

但是，在尝试在客户端解决此问题之前，请再次考虑在服务器端解决此问题。不太了解您需要做什么，如果您要访问数据库，无论如何从服务器设置此标签的文本可能会更加干净和高效。

# javascript - 我可以在高度安全的网站上使用什么类型的标签来跟踪数据（cookie）？

> ID：15077372
> 
> 赞同：1
> 
> 时间：2013-02-25T22:03:52.627
> 
> 标签：javascript, security, iframe, tags

在从事网络营销工作时，我的 IT 人员告诉我，iframe 标签在安全问题上越来越敏感。我也不允许使用 javascript 标签，但是图像标签太简单了，不能让我搭载第三方标签。（因为它们不允许执行脚本）关于我可以使用或修改什么类型的标签或代码类型的任何想法满足技术和商业条件，好吗？（javascript和flash网站的混合）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:07:16.560

您可以使用一些服务器端脚本语言（例如 PHP）作为您的图像文件源。这样，您可以在服务器端执行任何您需要的操作，同时提供“简单图像”。和例子：

```
 <img src="/images/image.php?img=asdf" /> 
```

在服务器端，您可以拥有一个 PHP 会话，以及与请求相关的任何数据。根据您想要收集的数据类型，没有任何 Javascript 可能会很困难/不可能。

# git - 奇怪的 git 工件是如何进入我提交的源代码的？

> ID：15077374
> 
> 赞同：0
> 
> 时间：2013-02-25T22:04:03.163
> 
> 标签：git, github, github-for-windows

我最近提交了对我的 gitHub 存储库的软件更改。我在计算机 A 上有一个本地存储库，然后在计算机 B 上的存储库中做一些工作。我无法将在存储库 B 中所做的更改推送到我的 gitHub 存储库（互联网问题），所以我只是复制了修改后的源文件和用它们覆盖了计算机 A 上的相关源文件。在计算机上，AI 试图将我的更改推送到 gitHub 存储库并奇怪地遇到了一个分离的头部问题。我不知道为什么会发生这种情况，因为我是 repo 的唯一贡献者，但无论如何我添加了所有本地文件并继续 rebase 以解决问题。一切都很好，但今天我查看了我的源文件，发现奇怪的 git artfacts 散布在我的源代码周围：#include "TIM3.h"

```
<<<<<<< HEAD
#define PRESCALAR 1000

void TIM3_Init(uint32_t freq)
{
    uint32_t periodValue;
    TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;
=======
#define PRESCALAR 42000

/*Timer initializer*/
void TIM3_Init(uint32_t freq)
{   
    uint32_t periodValue;   //Holds the period value
    TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure; //Creating the timer initializing strucure
>>>>>>> lab3 complete and some report

    NVIC_InitTypeDef NVIC_InitStructure;    //Creating the NVIC initializing structure 
```

“<<<<<<< HEAD”、“=========”和“>>>>>>>> lab3 complete and some report”最初不在我的源代码中。“lab3 complete and some report”是我为最近一次提交所做的提交评论。

这是如何/为什么发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:09:43.280

我在我们的提交中看到了这一点。这就是发生在我们身上的事情（我假设:)

1.  你合并了一个分支，你遇到了一个冲突，它进入了 MERGING 状态（在你的分支名称后面的 git bash 中可见）
2.  你打开 git gui
3.  您单击右上角列表中文件前面的图标（实际上在 MERGING 分支上存在冲突）以暂存文件
4.  在您提交的 git gui 中，或在关闭 git-gui 后从 git-bash 中提交。

--> 这个提交被推送到原点，你有问题！由于构建问题，我们发现了所有问题，所以我们很幸运；）

# objective-c - 函数（非方法）声明中的未知类型名称 CGRect

> ID：15077376
> 
> 赞同：1
> 
> 时间：2013-02-25T22:04:10.667
> 
> 标签：objective-c, compiler-errors, cgrect

我正在尝试在`NSObject`类型类中声明一个函数，以便为某些核心图形绘图调用。您如何在目标 c 中正确声明函数？
我没有做任何复杂的事情，比如......

在**.h**

```
void drawShape(CGRect rect); 
```

但是这会引发 `unknown type name 'CGRect'`错误。我不知道为什么它在`applicationservices.h`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T22:20:19.740

`CGRect`是 CoreGraphics 框架的一部分；因此，您必须确保将其包含在您的应用中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T22:21:05.350

我猜你忘了导入 CoreGraphics 标头。

我可以在没有错误的情况下在*命令行*上编译此代码：`clang`

```
#include <CoreGraphics/CGGeometry.h>

void drawShape(CGRect rect);

int main()
{
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:22:58.210

我认为您没有将其`CoreGraphics.framework`与您的项目联系起来。 `CGRect`在`CoreGraphics`框架中定义。

# java - 如何从 Java 控制台运行控制台应用程序？

> ID：15077378
> 
> 赞同：1
> 
> 时间：2013-02-25T22:04:19.607
> 
> 标签：java, console, runtime, exec, runtime.exec

我在搞乱 Runtime.getRuntime()，但我不认为这真的是我想要的。

我想要既有用户输入又有输出到标准输出的东西。基本上，我希望启动一个完整的单独程序。

格雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:07:48.277

您可以使用使用[ProcessBuilder.start()](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#start%28%29)方法创建的[Process](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)并使用其输入和输出流。

这是一个简单的例子：

```
public static void main(String[] args) throws Exception {
    String[] processArgs = new String[]{"ping","google.com"};
    Process process = new ProcessBuilder(processArgs).start();

    BufferedReader in = new BufferedReader(new InputStreamReader(
            //I'am using Win7 with PL encoding in console -> "CP852"
            process.getInputStream(), "CP852"));

    String line;
    while ((line = in.readLine()) != null)
        System.out.println(line);

    in.close();
    System.out.println("process ended");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:06:29.087

这样做：

```
Process process = Runtime.exec( "somecommand.exeorwhatever" ); 
```

将运行一个完全独立的进程。然后你可以使用：

```
InputStream in = process.getInputStream();
InputStream err = process.getErrorStream();
OutputStream out= process.getOutputStream(); 
```

# c# - Form 的 ClientSize 给出了奇怪的结果

> ID：15077380
> 
> 赞同：1
> 
> 时间：2013-02-25T22:04:31.240
> 
> 标签：c#, winforms, size

我遇到了一个烦人的问题：当我将表单的`ClientSize`属性设置为 match`300*300`时，大小确实发生了变化，但完全没有`300*300`。实际上，它不是 even`x*x`而是`x*y`，因为它的宽度大于它的高度。

这是设置我的表单`ClientSize = new Size(300, 300);`并在其中创建一个黑色`Panel`大小后的程序图片`250*250`。

![Form.ClientSize 不是正方形？](../Images/99ea72a9beaeba8d6f29211c1a1f61af.png)

我用 Photoshop 测量了它们，黑色`Panel`确实是`250*250`，而表单的客户端大小更像`280*260`左右。

为什么会发生这种情况，我是否理解该`ClientSize`属性的含义错误？如果是这样，我怎样才能让我的表单的实际“绘图区域”准确匹配我想要的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:09:52.153

检查您是否`min`设置`max`了`form`.

# css - 需要 div 布局足够灵活，以便在需要时进行扩展

> ID：15077393
> 
> 赞同：0
> 
> 时间：2013-02-25T22:05:06.723
> 
> 标签：css, html

我正在将我的应用程序从 WPF 移植到 HTML/Javascript，并且在我的应用程序所需的布局方面遇到了问题。

此布局应占据整个可用屏幕。它实际上将被放入一个 jquery ui 选项卡中，因此从技术上讲，它不会是整个屏幕。我已经让这部分工作，但不是全部一起工作。

左侧将有一个自定义的滑动地图，我希望它在水平和垂直方向上占用尽可能多的空间。

右侧将在顶部和底部有一些过滤器，中间显示过滤器的结果。结果可能会很长，因此如果从 Web 服务器中提取了太多内容，则需要垂直滚动。

我需要帮助的是支持这一点的基本布局。任何帮助，将不胜感激。你可以在下面看到我的布局图。提前致谢！

![需要布局](../Images/fcb59361e2e7217f4a76d1d538feee7e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:08:45.157

在那个 div 中，添加`style="max-width: 350px; overflow-y: scroll;"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:10:40.767

首先，你需要这样的东西（它被称为流体 - 固定布局），这是一个你可以从动态驱动器[http://www.dynamicdrive.com/style/layouts/item/css-liquid-layout-21-fixed -流体/](http://www.dynamicdrive.com/style/layouts/item/css-liquid-layout-21-fixed-fluid/)。除了您需要“反转”边距和宽度（从左到右替换），因为该示例与您的布局相反。

其次，您需要将第二个 div (350x50) 放在页面底部。您可以做的一些事情是设置该 div 使其具有以下内容：

```
#small_box
{
    position: absolute;
    right: 0;
    bottom: 0;
    ...
} 
```

上面的链接即使在 IE6+ 上也能正常工作

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:48:00.260

我刚刚决定使用相对定位和一点 javascript。花了几个小时寻找一个没有结果的优雅解决方案，一旦我决定使用 javascript，我只花了几分钟。像这样的事情在 WPF 中很容易做到，所以令人惊讶。我基本上只是附加到 window.onresize 事件并手动设置右侧垂直扩展滚动条的高度。无论如何感谢您的建议。

# hibernate - 休眠、JAXB、Eclipse 插件

> ID：15077396
> 
> 赞同：2
> 
> 时间：2013-02-25T22:05:14.847
> 
> 标签：hibernate, eclipse-plugin, jaxb, eclipse-rcp

我正在尝试结合 JAXB（Hibernate 在 dom4j 中提供）、Hibernate（4.1.3）和 Eclipse（4.2）插件。

我的“核心”插件包含一个 XMLUserType，它接受一个给定的 pojo（用 @XmlRootElement 和其余的注释；来自另一个插件）并将其转换为 XML，反之亦然。这段代码可以很好地进行解组（ cls 是由参数给定的每个字符串的类：

```
public Object fromXMLString(final String xml) {
    if (null != xml) {
        final ClassLoader cl = Thread.currentThread().getContextClassLoader();
        try {
            Thread.currentThread().setContextClassLoader(cls.getClassLoader());

            final JAXBContext jc = JAXBContext.newInstance(cls);
            final Unmarshaller unmarshaller = jc.createUnmarshaller();

            final StreamSource sr = new StreamSource(new StringReader(xml));
            final JAXBElement<?> element = unmarshaller.unmarshal(sr, cls);
            return cls.cast(element.getValue());
        } catch (final JAXBException e) {
            e.printStackTrace();
        } finally {
            Thread.currentThread().setContextClassLoader(cl);
        }
    }
    return null;
}

/** {@inheritDoc} */
@Override
public void setParameterValues(final Properties parameters) {
    final String clsName = (String) parameters.get("ClassType");
    try {
        this.cls = Thread.currentThread().getContextClassLoader().loadClass(clsName);
    } catch (final ClassNotFoundException e) {
        e.printStackTrace();
    }
} 
```

不幸的是，编组失败了，我不知道为什么。

```
public static Document convertToXML(final Object pojo, final Class<?> type) throws SystemException {
    Document ret = null;
    final ClassLoader cl = Thread.currentThread().getContextClassLoader();
    try {
        Thread.currentThread().setContextClassLoader(type.getClassLoader());
        final JAXBContext jc = JAXBContext.newInstance(type);
        final Marshaller marshaller = jc.createMarshaller();
        final DocumentResult dr = new DocumentResult();

        marshaller.marshal(pojo, dr);

        final Document document = dr.getDocument();
        ret = document;
    } catch (final JAXBException e) {
        e.printStackTrace();
    } finally {
        Thread.currentThread().setContextClassLoader(cl);
    }
    return ret;
} 
```

是否设置了 ClassLoader 无关紧要。它总是失败并出现以下异常：

```
Caused by: com.sun.istack.internal.SAXException2: unable to marshal type 
"packagingdetails.PackagingDetails" as an element because it is missing an 
@XmlRootElement annotation 
```

我相信原因是以下原因之一： 1\. 注释由代理表示，因此无法解析 2\. ClassLoader 制造麻烦......

关于 1.：我注意到（我试图用它来获取 XmlRootElement 的名称来创建 JAXBElement，但这似乎不可行......；我的 JAXBType 应该保持通用）

```
final Annotation[] annotations = type.getAnnotations();
XmlRootElement xmlRootElement = null;
for (final Annotation a : annotations) {
    if (XmlRootElement.class.isAssignableFrom(a.annotationType())) {
        xmlRootElement = (XmlRootElement) a;
        break;
    }
} 
```

总是失败...

有没有人有任何想法？？？

谢谢马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:09:36.040

您需要确保`javax.xml.bind`在文件中导入包或 JAXB 公共 API 包`META-INF/MANIFEST.MF`。

**OSGi 示例（MOXy 用作 JAXB (JSR-222) 提供程序）**

*   [Karaf 的 Moxy 错误](https://stackoverflow.com/questions/12942750/moxy-error-with-karaf/12943115#12943115)

# clojure - 在 clojure 或 jython 中将日期转换为纪元时间

> ID：15077401
> 
> 赞同：2
> 
> 时间：2013-02-25T22:05:45.597
> 
> 标签：clojure, jython, epoch, openrefine

我正在寻找在 OpenRefine 中将日期转换为纪元时间的公式。我知道 GREL 语言不支持这一点，但我想知道 clojure 或 jython 是否支持，如果支持如何？

我根本不熟悉这些语言。

现在我正在使用 API 调用[这个服务](http://www.convert-unix-time.com/)，但这是一个包含大量数据集的漫长过程。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:11:14.487

为您想要的时间创建一个日期对象（默认为现在），然后在其上调用 .getTime：

```
user> (.getTime (java.util.Date.))                                         
1361830209902 
```

或者如果您想要特定日期的纪元时间：

```
user> (import java.text.SimpleDateFormat) 
user> (.getTime (.parse (SimpleDateFormat. "yyyy MM dd HH mm ss") "2013 02 25 04 06 59"))
1361794019000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:19:45.003

[clj-time](http://seancorfield.github.com/clj-time/doc/clj-time.coerce.html#var-to-long) (JodaTime) 更适合日期时间操作：

```
(require '[clj-time.core :as cljt])
(require '[clj-time.coerce :as cljc])

(cljc/to-long (cljt/now)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:23:05.440

对于 Python（包括 Jython 实现），您可以使用`time`模块：

```
import time
print(time.mktime(time.strptime('2012-02-12 12:34:56', '%Y-%m-%d %H:%M:%S'))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T20:39:04.277

所以我从[OpenRefine 邮件列表中](https://groups.google.com/forum/#!msg/openrefine/p5gfbsvJzBo/JY8hAY_KkscJ)找到了解决方案。我一直在将字符串转换为日期并使用

```
value.toDate('dd-MM-yy','dd-MMM-yy').toString('dd-MM-yyyy') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-17T18:49:18.070

通过对日期列执行转换，将语言设置为 Clojure 并使用以下命令，我在 OpenRefine 中得到了这个工作：

```
(.getTime value) 
```

与@arthur-ulfeldt 的答案非常相似，但想澄清一下专门针对 OpenRefine 的事情。

# asp.net - Thinktecture IdentityServer 注销后如何重定向？

> ID：15077402
> 
> 赞同：3
> 
> 时间：2013-02-25T22:05:51.147
> 
> 标签：asp.net, asp.net-membership, wif

在我的依赖方应用程序 (ASP.NET MVC4) 中，我有一个注销链接，可以让我退出 IdentityServer。我登陆它的“成功注销”页面，并带有返回我的应用程序的链接。我想要做的是单击 IdentityServer 的链接“注销”，然后只登陆我的本地视图“LoggedOut”。我怎样才能做到这一点？我确定这很常见，但我找不到任何编码示例。非常感谢您的帮助。这是我的注销代码...

```
public class LogoutHandler
{
    public string Signout()
    {
        FederationConfiguration cfg = FederatedAuthentication.FederationConfiguration;
        var fam = FederatedAuthentication.WSFederationAuthenticationModule;
        fam.SignOut(false);
        var signOutRequestMessage = new SignOutRequestMessage(new Uri(fam.Issuer), fam.Realm);

        return signOutRequestMessage.WriteQueryString();
    }
} 
```

然后在控制器动作中，

```
public ActionResult Logout()
{
string signoutUrl = new LogoutHandler().Signout();
return new RedirectResult(signoutUrl);
} 
```

这只是让我退出，但我登陆 IdentityServer 成功退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:39:48.170

AFAIK 您只需要在 thinktecture 管理区域中指定重定向 URL。此外，您必须确保您的注销页面不安全。如果没有这最后一部分，您将返回注销页面，但会立即重定向回 STS。

# jquery - 如何为 ASP.net MVC 4 Ajax 请求生成 JSon 对象？

> ID：15077407
> 
> 赞同：0
> 
> 时间：2013-02-25T22:06:08.743
> 
> 标签：jquery, ajax, json, asp.net-mvc-4, myprettycms

当我发现 vsdocs 文件时，我想到了一种在我的 JQuery 文件中使用智能感知的方法来操作我将发送到我的 ASP.net MVC 后端的对象。

类似于 MVC 模型，但仅适用于 JQuery Ajax 回调。

[以下 JQuery 方法在此处可用，](http://myprettycms.codeplex.com/SourceControl/changeset/view/19222#458805)用于将单击的元素 html 自定义标记传输到旨在提供 ajax 回调的对象：来自 html 对象的参数在显示确认对话框时被传输到内存中保存的对象。

```
$.fn.MenuItemConfirmRemove = function (evt) {
    savedEvt = evt;
    RemoveLayoutMenu_JSonModel.DirectURL = $(this).attr("data-DirectURL"),
    RemoveLayoutMenu_JSonModel.LayoutMenu_Translation_Id = $(this).attr("data-id"),
    RemoveLayoutMenu_JSonModel.LayoutMenuTranslationLayoutMenuParent = $(this).attr("data-LayoutMenuTranslationLayoutMenuParent")
    MenuItemAction = RemoveLayoutMenu_JSonModel;
    $.fn.jqDialogConfirm(cap_RemoveMenuItemConfirmTitle, cap_RemoveMenuItemConfirmMessage, cap_RemoveMenuItemConfirmOkButtonTitle, cap_RemoveMenuItemConfirmCancelButtonTitle, "$.fn.MenuItemRemove");
    evt.preventDefault();
} 
```

$.fn.MenuItemRemove 是用户单击确定按钮时通用对话框调用的方法。 [通用对话框可在此处获得](http://myprettycms.codeplex.com/SourceControl/changeset/view/19222#458798)

```
$.fn.MenuItemRemove = function () {
    $('#dialogMessage').dialog('close');
    ajaxData = JSON.stringify(MenuItemAction);
    $.ajax(
    {
        type: "POST",
        url: "/DynaStructure/LayoutMenuItemRemoveItem/" + $("#hidLanguage").val(),
        data: ajaxData,
        contentType: "application/json",
        async: false,
        success: $.fn.MenuUpdated,
        error: function (xhr, ajaxOptions, thrownError) {
            $.fn.jqDialogAlert(DialogErrorTitle, (xhr.responseText));
        }
    }); 
```

}

如您所见，在加载并打开确认对话框之前，已填充 MenuItemAction。

MenuItemAction（全局声明）填充了 RemoveLayoutMenu_JSonModel

然后，在控制器中，我必须使用 C# 对象来接收这个 JQuery 对象，如下所示：

```
 /// <summary>
    /// Remove a menu
    /// Warning, Removing a Menu remove also its translations
    /// </summary>
    /// <param name="layoutMenu"></param>
    /// <returns></returns>
    [HttpPost, Authorize(Roles = "Admin")]
    public JsonResult LayoutMenuItemRemoveItem(string language, RemoveLayoutMenu_JSonModel ajaxModel)
    {
        JsonResult toReturn = new JsonResult { JsonRequestBehavior = JsonRequestBehavior.AllowGet };
        string eMethod = eMethodBase + "LayoutMenuItemRemoveItem[POST]";
        object eParameters = new { ajaxModel = ajaxModel };
        string defaultLanguage = ConfigurationManager.AppSettings["DefaultLanguage"];
        MembershipUser currentUser = Membership.GetUser();
        LayoutMenu_Translation dbLayoutMenu_Translation;
        using (DataRepositories _dataContext = new DataRepositories())
        {
            Language dbLanguage = _dataContext.Language_Rep.Query(x => x.Description == language).FirstOrDefault();
            if (dbLanguage == null)
            {
                throw new INNOVACALL.Framework.Common.InnovacallExceptions.DataIntegrityException(eMethod, eParameters, string.Format(Resources.ErrMsg_LayoutMenuItemRemove_UnknownLanguage, language));
            }
            using (TransactionScope TS = new TransactionScope())
            {
                try
                {
                    if (ajaxModel.LayoutMenuTranslationLayoutMenuParent == null)
                    {
                        dbLayoutMenu_Translation = _dataContext.LayoutMenu_Translation_Rep.Query(x => x.Id == ajaxModel.LayoutMenu_Translation_Id && x.LayoutMenu.FK_LayoutMenu == null).FirstOrDefault();
                    }
                    else
                    {
                        dbLayoutMenu_Translation = _dataContext.LayoutMenu_Translation_Rep.Query(x => x.Id == ajaxModel.LayoutMenu_Translation_Id && x.LayoutMenu.FK_LayoutMenu == ajaxModel.LayoutMenuTranslationLayoutMenuParent).FirstOrDefault();
                    }
                    if (dbLayoutMenu_Translation == null)
                    {
                        INNOVACALL.Framework.Common.InnovacallExceptions.DataIntegrityException iex = new INNOVACALL.Framework.Common.InnovacallExceptions.DataIntegrityException(eMethod, eParameters, Resources.DynaStructure_MenuAction_MenuNotFound);
                        iex.LogIt();
                        throw iex;
                    }
                    LayoutMenu dbLayoutMenu = dbLayoutMenu_Translation.LayoutMenu;
                    //We check if parent LayoutMenu has child
                    if (dbLayoutMenu_Translation.LayoutMenu.LayoutMenu1.Count > 0)
                    {
                        toReturn.Data = new { @success = false, @divToUpdate = "", @html = "", @scriptToExecute = "$.fn.jqDialogAlert('My Pretty CMS',a.message,'');", @message = Resources.DynaStructure_RemoveMenu_MenuHasChildren };
                    }
                    else
                    {
                        string[] tLanguages = ConfigurationManager.AppSettings["Languages"].Split(',');
                        foreach (string currentLanguage in tLanguages)
                        {
                            Language dbCurrentLanguage = _dataContext.Language_Rep.Query(x => x.Description == currentLanguage).FirstOrDefault();
                            if (dbCurrentLanguage == null) throw new INNOVACALL.Framework.Common.InnovacallExceptions.DataIntegrityException(eMethod, eParameters, Resources.Err_LanguageNotFound);
                            dbLayoutMenu_Translation = dbLayoutMenu.LayoutMenu_Translation.Where(x => x.FK_Language == dbCurrentLanguage.Id).FirstOrDefault();
                            if (dbLayoutMenu_Translation != null)
                            {
                                List<int> Structure_PagesIdsToKill = _dataContext.Structure_Page_Rep.Query(x => x.FK_LayoutMenu_Translation == dbLayoutMenu_Translation.Id).Select(x => x.Id).ToList();
                                foreach (int Structure_PagesIdToKill in Structure_PagesIdsToKill)
                                {
                                    Structure_Page dbStructure_PageToKill = _dataContext.Structure_Page_Rep.GetById(Structure_PagesIdToKill);
                                    ManagedContent toRemove = dbStructure_PageToKill.ManagedContent.SingleOrDefault();
                                    if (toRemove != null)
                                    {
                                        _dataContext.ManagedContent_Rep.Remove(toRemove);
                                        _dataContext.Save();
                                        _dataContext.Structure_Page_Rep.Remove(dbStructure_PageToKill);
                                        _dataContext.Save();
                                    }
                                }
                                _dataContext.LayoutMenu_Translation_Rep.Remove(dbLayoutMenu_Translation);
                                _dataContext.Save();
                            }
                        }
                        string layoutMenuNameToRemove = dbLayoutMenu.Name;
                        _dataContext.LayoutMenu_Rep.Remove(dbLayoutMenu);
                        _dataContext.Save();
                        Logger.Info(enLog.Business, string.Format("User [{0}] removed layout menu [{1}]", (currentUser == null ? "#Anonymous#" : currentUser.UserName), layoutMenuNameToRemove));
                    }
                    TS.Complete();
                }
                catch (INNOVACALL.Framework.Common.InnovacallExceptions.DataIntegrityException iex)
                {
                    TS.Dispose();
                    toReturn.Data = new { @success = false, @scriptToExecute = "$.fn.jqDialogAlert('My Pretty CMS',a.message,'');", @message = iex.Message };
                    return toReturn;
                }
                catch (Exception ex)
                {
                    TS.Dispose();
                    INNOVACALL.Framework.Common.InnovacallExceptions.CommonException iex = new INNOVACALL.Framework.Common.InnovacallExceptions.CommonException(eMethod, eParameters, ex.Message);
                    iex.LogIt();
                    toReturn.Data = new { @success = false, @scriptToExecute = "$.fn.jqDialogAlert('My Pretty CMS',a.message,'');", @message = ex.Message };
                    return toReturn;
                }
            }
            string newMenuBar = RenderMenuBar(_dataContext, dbLanguage, defaultLanguage);
            toReturn.Data = new { @success = true, @divToUpdate = "#divMenuBar", @html = newMenuBar, @scriptToExecute = "$.fn.DocReady();", @message = "" };
        }
        return toReturn;
    } 
```

[ASP.net MVC 4 控制器的源代码在这里](http://myprettycms.codeplex.com/SourceControl/changeset/view/19222#457572)

我再说一遍，这个问题...

您是否尝试过基于 C# 类生成 JSon 对象并在使用时使用它来查看您的 javascript 代码中的智能感知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:29:48.407

[我创建了这个类（它当然可以改进）](http://myprettycms.codeplex.com/SourceControl/changeset/view/19222#457080)：

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Reflection; 
using System.Web.Script.Serialization;

namespace INNOVACALL.Framework.Common.POCOT4.MVCViewJSObjects {
public class JQClass
{
    private string arg;
    private string sAssemblyName;
    private Assembly assem;
    private Type[] types;

    public Type[] GetTypes()
    {
        return types;
    }

    public JQClass(string sAssemblyName)
    {
        assem = Assembly.LoadFrom(sAssemblyName);
        types = assem.GetTypes();
    }

    public Object CreateInstance(Type type)
    {
        Object myObject = Activator.CreateInstance(type);
        return myObject;
    }

    public List<Type> ObtientListTypesMeta(List<string> ListNom)
    {
        List<Type> listMetaTypes = new List<Type>();
        foreach (string nom in ListNom)
        {
            listMetaTypes.Add(types.ToList().Find(p => p.Name == nom));
        }
        return listMetaTypes;
    }

    public List<string> ObtientListChaineJS(List<string> lstName)
    {
        List<Type> lstTypes = new List<Type>();
        lstTypes = this.ObtientListTypesMeta(lstName);

        List<string> lstObjetJS = new List<string>();
        foreach(Type typeCourant in lstTypes)
        {
            string jqclassMetaData = typeCourant.Name;
            object metaData = this.CreateInstance(typeCourant);

            JavaScriptSerializer serializer = new JavaScriptSerializer();
            serializer.MaxJsonLength = Int32.MaxValue;

            string objetjson = serializer.Serialize(metaData).ToString();

            string chaineJS = "var " + jqclassMetaData + " = " + objetjson;
            lstObjetJS.Add(chaineJS);
        }
        return lstObjetJS;
    }
}
} 
```

该类是一种基于 C# 类生成 JSon 字符串的助手。

[然后我像这样创建了一个简单的 POCO T4](http://myprettycms.codeplex.com/SourceControl/changeset/view/19222#465912)

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension=".js" #>
<#@ Assembly Name="System.Core.dll" #>
<#@ Assembly Name="System.Windows.Forms.dll" #>
<#@ assembly name="System.Web.Extensions.dll" #>
<#@ Assembly Name="$(SolutionDir)\..\Framework\bin\Debug\INNOVACALL.Framework.Common.dll" #>
<#@ Assembly Name="$(SolutionDir)\..\Portals\MVC4Portal\bin\MyPrettyCMS.dll" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="System.Web.Script.Serialization" #>
<#@ import namespace="INNOVACALL.Framework.Common.POCOT4.MVCViewJSObjects" #>
<#
List<string> lstName = new List<string>();
string myDll = string.Empty;
myDll = Assembly.GetAssembly(typeof(InnovaApp.Portals.MVC4Portal.Models.JSonModels.LayoutMenuItemFeed_JSonModel)).CodeBase;
lstName.Add( "LayoutMenuItemFeed_JSonModel");
myDll = Assembly.GetAssembly(typeof(InnovaApp.Portals.MVC4Portal.Models.JSonModels.MoveMenuElement_JSonModel)).CodeBase;
lstName.Add( "MoveMenuElement_JSonModel");
myDll = Assembly.GetAssembly(typeof(InnovaApp.Portals.MVC4Portal.Models.JSonModels.RemoveLayoutMenu_JSonModel)).CodeBase;
lstName.Add( "RemoveLayoutMenu_JSonModel");    
myDll = Assembly.GetAssembly(typeof(InnovaApp.Portals.MVC4Portal.Models.JSonModels.ToggleActivation_JSonModel)).CodeBase;
lstName.Add( "ToggleActivation_JSonModel");
JQClass jQClass = new JQClass(myDll);
List<string> lstObjetJS = jQClass.ObtientListChaineJS(lstName);
foreach(string objetJS in lstObjetJS)
{
#>
<#= objetJS #>
<# }
#> 
```

如您所见，我使用输出扩展名=“.js”来生成一个js文件。

这个 poco 生成这个简单的文件（查看 RemoveLayoutMenu_JSonMode）：

```
var LayoutMenuItemFeed_JSonModel = {"HtmlElementTUpdate":null,"DirectURL":null,"LayoutMenu_Translation_Id":0,"LayoutMenuTranslationLayoutMenuParent":null}
    var MoveMenuElement_JSonModel = {"DirectURL":null,"LayoutMenu_Translation_Id":0,"LayoutMenuTranslationLayoutMenuParent":null,"Direction":0}
    var RemoveLayoutMenu_JSonModel = {"DirectURL":null,"LayoutMenu_Translation_Id":0,"LayoutMenuTranslationLayoutMenuParent":null}
    var ToggleActivation_JSonModel = {"DirectURL":null,"LayoutMenu_Translation_Id":0,"LayoutMenuTranslationLayoutMenuParent":null} 
```

在我的控制器中，我指示 _layoutpage 使用我的 _controller_base 加载脚本，其中 T : _model_base

[像这样 ：](http://myprettycms.codeplex.com/SourceControl/changeset/view/19222#457568)

```
 if (this.AdminMode)
        {
            lstSpecificJqueryJSCollection.Add("JSonModels/JSonModelsMenuEdition1.js");
            lstSpecificJqueryJSCollection.Add("InnovacallJS/DynaContent/DynaContentAdmin.js");
            lstSpecificJqueryJSCollection.Add("ClientComponents/tiny_mce/tiny_mce.js");
        } 
```

**AND TO OBTAIN THE INTELLISENSE :**

[Just reference the generated script as if it was a standard vsdoc like this](http://myprettycms.codeplex.com/SourceControl/changeset/view/19222#458805) :

```
///<reference path="/Scripts/ClientComponents/jquery/jquery-1.7.2-vsdoc.js" />
///<reference path="/Scripts/InnovacallJS/_Layout/_Layout.js" />
///<reference path="/ScriptsG/inoDynaContentDynamic.js" />
///<reference path="/Scripts/ClientComponents/KendoUI/kendo.web-vsdoc.js" />
///<reference path="/Scripts/JSonModels/JSonModelsMenuEdition1.js" /> 
```

The HUGE advantage of this technique is that it garantee all your C# class properties will be transfered to the JSon object.

So if you need to add a property, you just have to add it to the C# class. Save it and Save the POCO T4 to regenerate the updated JSon object.

# database - Rails 存储第三方凭据..有人知道最佳实践吗？

> ID：15077409
> 
> 赞同：1
> 
> 时间：2013-02-25T22:06:10.827
> 
> 标签：database, ruby-on-rails-3, encryption, passwords

我已经阅读了一堆其他相关的问题......似乎没有什么能真正回答我的问题。

我的应用程序将与几个不同的第三方站点集成。（ebay、paypal、google、amazon...）它是一个产品管理系统，它将产品推送到各个地方...

当然，由于它与所有这些站点交互，它需要用户名、密码、令牌……等等……现在我认为将这些东西原始存储并不是一个好主意，但我仍然需要能够将它们原始存储，所以我可以将它们嵌入到我发送的 XML 或 HTTP 标头中。

有人对如何存储信息有建议吗？有轨道 GEM 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:15:47.727

[根据Twelve-Factor App](http://www.12factor.net/)方法，[存储在服务器环境变量](http://www.12factor.net/config)中是将凭据存储到数据库、第三方凭据等的最佳实践。如何存储它们取决于您使用的内容以及您的设置方式。这有助于使凭据不受源代码控制、数据库和服务器环境本地的影响。要访问环境变量，您可以使用`ENV`，例如：

```
ENV['something'] 
```

*关于限制和安全性的担忧：*

对于那些在 env vars 中存储数千个或更多密码/凭据的人，从可行性和安全性的角度来看，这里有一些事情可以帮助您决定是否使用它们：

1.  如果运行 Web 应用程序或服务的操作系统用户仅对 Rails 应用程序根目录和子目录具有只读访问权限，因此对凭据/机密文件的众所周知（相对或绝对）路径具有读取访问权限，并且开发人员不小心编写了一项服务，该服务使用请求参数作为路径名的一部分，将文件读取到返回给客户端的变量中，然后该应用程序的用户可能会远程转储您的所有凭据。如果您将这些凭据放在运行应用程序的操作系统用户不太容易访问的位置，该路径名不容易猜到，您将降低该漏洞被成功用于转储这些凭据的风险。

2.  您还应该尽您所能，使在服务器环境之外使用这些凭据变得更加困难。这样，如果他们通过应用程序/服务漏洞转储所有凭据，但不能在该环境之外使用这些凭据，那么它们的价值就会大大降低。

3.  环境变量中可以存储多少的限制可能比您想象的要高。例如，在加载了 RVM 的 macOS 中，使用 bash 函数等浪费了大量的环境空间，我能够获得 4278 个 53 字符长度的凭据（例如 bcrypt-ed）：

**测试.sh**

```
#!/bin/bash
set -ev
for i in `seq 1 4278`;
do
    export CRED$i='...........................................'
done
ruby -e 'puts "#{ENV.size} env vars in Ruby. First cred=#{ENV["CRED1"]}"' 
```

输出：

```
$ time ./test.sh
for i in `seq 1 4278`;
do
    export CRED$i='...........................................'
done
seq 1 4278
ruby -e 'puts "#{ENV.size} env vars in Ruby. First cred=#{ENV["CRED1"]}"'
4319 env vars in Ruby. First cred=...........................................

real    0m0.342s
user    0m0.297s
sys 0m0.019s 
```

当我超过那个时，我得到了`ruby: Argument list too long`。

4.  如果您的应用程序中有一个可以吐出任何环境变量值的服务，那么您显然不想将凭据存储在 env vars 中，因为它会不太安全，但根据我的经验，我从未遇到过开发故意暴露 ENV 的情况，*除了*可能吐出所有系统属性和环境变量的 Java 管理控制台之类的东西。

5.  如果您将凭据存储在数据库中，您将面临更大的风险，因为 SQL 注入攻击通常更为常见。这是通常只有密码哈希值存储在数据库中而不是加密其他服务的凭据的原因之一。

6.  如果攻击者登录到服务器本身并可以访问运行 Web 应用程序/服务的用户的环境，或者可以找到并读取包含凭据的文件，那么你就不走运了。

# ruby-on-rails-3 - 尝试将 Backbone 模型保存到 rails db 时出现 401 未授权

> ID：15077423
> 
> 赞同：1
> 
> 时间：2013-02-25T22:06:55.310
> 
> 标签：ruby-on-rails-3, backbone.js

我正在尝试通过 Rails 将一首歌曲（在 BBone 世界中）匹配到数据库。`POST http://localhost:3000/songs 401 (Unauthorized)`尝试在 BBone 视图中保存时，我不断收到错误提示。rails 控制台错误如下。似乎发送到 Rails 的参数在字段中重复（删除的数据低于 Rails 错误，因此要查看嵌套），但这会阻止数据保存，而是会产生此错误，而不是更多沿着“太多领域”的路线。

就未经授权而言，这是没有意义的，因为用户 ID 正在被填充。有什么想法吗？

使用`gem 'rails-backbone'`

骨干模型：

```
//filename: song.js
define([
  'underscore',
  'backbone',
  'backbone/collections/components'
], function(_, Backbone, componentCollection) {
  var songModel = Backbone.Model.extend({
    paramRoot: 'song',
    defaults: {
      title: '',
      content: '',
      user: '',
      components: componentCollection
    },
    initialize: function(){
    }
  });

  return songModel;
}); 
```

骨干视图：

```
// Filename: views/songs/new_view
define([
  'jquery',
  'underscore',
  'backbone',
  // Pull in the Collection module from above
  'backbone/collections/songsCollection',
  // 'backbone/views/songs/a_song_view',
  'text!backbone/templates/songs/new.html',
  'app/dispatch',
  'app/state'
], function($, _, Backbone, SongsCollection, songsTemplate, dispatch, state){
  return Backbone.View.extend({
el: $('#songs'),

initialize: function(options){
  //......
},

save: function(e){
  e.preventDefault();
  e.stopPropagation();
  var JSONSong = JSON.stringify(this.model.toJSON());
  this.model.unset("errors");
  this.model.set({
    title: $('#title').val(),
    content: JSONSong,
    user: $('#user').val()
  });
  return this.collection.create(this.model.toJSON(), {
    success: function(song) {
      console.log('saved!');
      this.model = song;
      return window.location.hash = "/" + this.model.id;
    },
    error: function(song, jqXHR) {
      return this.model.set({
        errors: $.parseJSON(jqXHR.responseText)
      });
    }
  });
},

render: function(){
  $(this.el).html('');
  var compiledTemplate = _.template ( songsTemplate, this.model.toJSON());
  $(this.el).html(compiledTemplate);
  return this;
},
});
}); 
```

导轨架构：

```
ActiveRecord::Schema.define(:version => 20130222200403) do

  create_table "songs", :force => true do |t|
    t.string   "title"
    t.string   "content"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "user_id"
  end

  create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true
  add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true

end 
```

Rails 控制台错误：

```
Started POST "/songs" for 127.0.0.1 at 2013-02-25 16:45:56 -0500
Processing by SongsController#create as JSON
  Parameters: {"title"=>"1234", "content"=>"{\"title\":\"1234\",\"content\":\"{\\\"title\\\":\\\"\\\",\\\"content\\\":\\\"\\\",\\\"user\\\":\\\"\\\",\\\"components\\\":[{\\\"label\\\":\\\"Snare\\\",\\\"img\\\":\\\"snare.png\\\",\\\"mute\\\":false,\\\"sample\\\":\\\"808_sd.m4a\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":true,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"},{\\\"label\\\":\\\"Hi Hat\\\",\\\"img\\\":\\\"hihat.png\\\",\\\"mute\\\":true,\\\"sample\\\":\\\"808_chh.m4a\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":true,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"},{\\\"label\\\":\\\"Kick Drum\\\",\\\"img\\\":\\\"kick.png\\\",\\\"mute\\\":true,\\\"sample\\\":\\\"808_bd.m4a\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":false,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"},{\\\"label\\\":\\\"Synth\\\",\\\"img\\\":\\\"synth.png\\\",\\\"mute\\\":true,\\\"sample\\\":\\\"ambass.mp3\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":true,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"}]}\",\"user\":\"1\",\"components\":[{\"label\":\"Snare\",\"img\":\"snare.png\",\"mute\":false,\"sample\":\"808_sd.m4a\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":true,\"signature\":4,\"representation\":\"fraction\"},{\"label\":\"Hi Hat\",\"img\":\"hihat.png\",\"mute\":true,\"sample\":\"808_chh.m4a\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":true,\"signature\":4,\"representation\":\"fraction\"},{\"label\":\"Kick Drum\",\"img\":\"kick.png\",\"mute\":true,\"sample\":\"808_bd.m4a\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":false,\"signature\":4,\"representation\":\"fraction\"},{\"label\":\"Synth\",\"img\":\"synth.png\",\"mute\":true,\"sample\":\"ambass.mp3\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":true,\"signature\":4,\"representation\":\"fraction\"}]}", "user"=>"1", "components"=>[{"label"=>"Snare", "img"=>"snare.png", "mute"=>false, "sample"=>"808_sd.m4a", "measures"=>[{"label"=>"0/4", "beats"=>[{"selected"=>false}, {"selected"=>false}, {"selected"=>false}, {"selected"=>false}], "numberOfBeats"=>0, "divisions"=>8}], "active"=>true, "signature"=>4, "representation"=>"fraction"}, {"label"=>"Hi Hat", "img"=>"hihat.png", "mute"=>true, "sample"=>"808_chh.m4a", "measures"=>[{"label"=>"0/4", "beats"=>[{"selected"=>false}, {"selected"=>false}, {"selected"=>false}, {"selected"=>false}], "numberOfBeats"=>0, "divisions"=>8}], "active"=>true, "signature"=>4, "representation"=>"fraction"}, {"label"=>"Kick Drum", "img"=>"kick.png", "mute"=>true, "sample"=>"808_bd.m4a", "measures"=>[{"label"=>"0/4", "beats"=>[{"selected"=>false}, {"selected"=>false}, {"selected"=>false}, {"selected"=>false}], "numberOfBeats"=>0, "divisions"=>8}], "active"=>false, "signature"=>4, "representation"=>"fraction"}, {"label"=>"Synth", "img"=>"synth.png", "mute"=>true, "sample"=>"ambass.mp3", "measures"=>[{"label"=>"0/4", "beats"=>[{"selected"=>false}, {"selected"=>false}, {"selected"=>false}, {"selected"=>false}], "numberOfBeats"=>0, "divisions"=>8}], "active"=>true, "signature"=>4, "representation"=>"fraction"}], "song"=>{"title"=>"1234", "content"=>"{\"title\":\"1234\",\"content\":\"{\\\"title\\\":\\\"\\\",\\\"content\\\":\\\"\\\",\\\"user\\\":\\\"\\\",\\\"components\\\":[{\\\"label\\\":\\\"Snare\\\",\\\"img\\\":\\\"snare.png\\\",\\\"mute\\\":false,\\\"sample\\\":\\\"808_sd.m4a\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":true,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"},{\\\"label\\\":\\\"Hi Hat\\\",\\\"img\\\":\\\"hihat.png\\\",\\\"mute\\\":true,\\\"sample\\\":\\\"808_chh.m4a\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":true,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"},{\\\"label\\\":\\\"Kick Drum\\\",\\\"img\\\":\\\"kick.png\\\",\\\"mute\\\":true,\\\"sample\\\":\\\"808_bd.m4a\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":false,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"},{\\\"label\\\":\\\"Synth\\\",\\\"img\\\":\\\"synth.png\\\",\\\"mute\\\":true,\\\"sample\\\":\\\"ambass.mp3\\\",\\\"measures\\\":[{\\\"label\\\":\\\"0/4\\\",\\\"beats\\\":[{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false},{\\\"selected\\\":false}],\\\"numberOfBeats\\\":0,\\\"divisions\\\":8}],\\\"active\\\":true,\\\"signature\\\":4,\\\"representation\\\":\\\"fraction\\\"}]}\",\"user\":\"1\",\"components\":[{\"label\":\"Snare\",\"img\":\"snare.png\",\"mute\":false,\"sample\":\"808_sd.m4a\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":true,\"signature\":4,\"representation\":\"fraction\"},{\"label\":\"Hi Hat\",\"img\":\"hihat.png\",\"mute\":true,\"sample\":\"808_chh.m4a\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":true,\"signature\":4,\"representation\":\"fraction\"},{\"label\":\"Kick Drum\",\"img\":\"kick.png\",\"mute\":true,\"sample\":\"808_bd.m4a\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":false,\"signature\":4,\"representation\":\"fraction\"},{\"label\":\"Synth\",\"img\":\"synth.png\",\"mute\":true,\"sample\":\"ambass.mp3\",\"measures\":[{\"label\":\"0/4\",\"beats\":[{\"selected\":false},{\"selected\":false},{\"selected\":false},{\"selected\":false}],\"numberOfBeats\":0,\"divisions\":8}],\"active\":true,\"signature\":4,\"representation\":\"fraction\"}]}"}}
WARNING: Can't verify CSRF token authenticity
Completed 401 Unauthorized in 1ms 
```

删除所有内容的参数：

```
Parameters: {"title"=>"1234", "content"=>"{\"title\":\"1234\",\"content\":\"{}", "user"=>"1", "components"=>[], "song"=>{"title"=>"1234", "content"=>"{}"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:06:03.623

我将 CSRF 参数和令牌附加到模型以发送到数据库。

```
 //To pass the variable safely in from BBone to Rails 3.2, you have to include the csrf param and token
  toBeSavedSong.set($("meta[name=csrf-param]").attr('content'), $("meta[name=csrf-token]").attr('content')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:59:31.947

CSRF 令牌应该包含在 ajax 请求中才能成功。

为您解决方案：

确保您的页面在“”部分中有 CSRF 令牌。如果没有，可能是因为您错过了 application.html.erb 布局文件中的标签。布局中应该有“<%= csrf_meta_tags %>”

```
<!DOCTYPE html>
<html>
<head>
  <title>Site name</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

检查您的 jQuery（或主干使用的其他库）。确保它已更新。我相信 jQuery 应该在 Ajax 请求中包含 CSRF 令牌

如果两者都不适合你，你可以禁用 CSRF 令牌检查（如果你在做一个公共网站，这有 CSRF 安全问题）。通过删除 apps/controller/application_controller.rb 中的这一行来禁用它

```
protect_from_forgery 
```

# python - os.path.exists 与 os.path.isdir 之间的优缺点

> ID：15077424
> 
> 赞同：81
> 
> 时间：2013-02-25T22:06:56.283
> 
> 标签：python, directory, os.path

我正在检查目录是否存在，但我注意到我使用`os.path.exists`的是`os.path.isdir`. 两者都工作得很好，但我很好奇使用`isdir`而不是`exists`.

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-02-25T22:07:59.230

[`os.path.exists`](https://docs.python.org/3.8/library/os.path.html#os.path.exists)`True`如果有一个具有该名称的常规文件，也会返回。

[`os.path.isdir`](https://docs.python.org/3.8/library/os.path.html#os.path.isdir)`True`仅当该路径存在并且是目录或目录的符号链接时才会返回。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T22:08:01.720

就像听起来一样：如果路径存在，但是是文件而不是目录，`isdir`将返回`False`. 同时，在这两种情况下`exists`都会返回`True`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-22T16:55:17.323

**os.path.isdir()**检查路径是否存在并且是一个目录，并针对这种情况返回 TRUE。

类似地，**os.path.isfile()**检查路径是否存在并且是文件，并针对这种情况返回 TRUE。

并且，**os.path.exists()** 检查路径是否存在并且不关心路径是否指向文件或目录并在任何一种情况下都返回 TRUE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:14:17.977

大多数时候，它是一样的。

但是，路径可以物理存在而`path.exists()`返回 False。如果 os.stat() 对此文件返回 False，就会出现这种情况。

如果路径物理存在，`path.isdir()`则将始终返回 True。这不依赖于平台。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-16T20:24:38.883

> os.path.exists(path) 如果 path 引用现有路径，则返回 True。现有路径可以是常规文件（[http://en.wikipedia.org/wiki/Unix_file_types#Regular_file](http://en.wikipedia.org/wiki/Unix_file_types#Regular_file)），也可以是特殊文件（例如目录）。因此，本质上，如果提供的路径以任何形式存在于文件系统中，则此函数返回 true（尽管有一些例外，例如损坏的符号链接）。
> 
> os.path.isdir(path) 反过来只会在路径指向目录时返回 true

# php - 使用 CURL 和 PHP 的 POST 请求无法正常工作

> ID：15077433
> 
> 赞同：4
> 
> 时间：2013-02-25T22:07:38.840
> 
> 标签：php, post, curl

我正在尝试使用[http://nlp.stanford.edu:8080/corenlp/process](http://nlp.stanford.edu:8080/corenlp/process)上的表格以编程方式处理我的陈述。我在 PHP/CURL 中有以下代码片段。但是，它不是处理语句，而是返回表单的 HTML - 就好像没有发送 post 参数一样。我检查了我是否发送了所需的参数。有人可以指导我做错什么吗？

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://nlp.stanford.edu:8080/corenlp/process");
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_USERAGENT,"Mozilla/14.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_POST, true);

$data  = array(
    'outputFormat' => 'xml',
    'input' => 'Here is a statement to process',
    'Process' => 'Submit Query'
     );

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

$result = curl_exec($ch);
echo $result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:24:11.110

您必须将`$data`数组转换为字符串...此外，请务必`urlencode()`使用各个值。

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://nlp.stanford.edu:8080/corenlp/process");
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_USERAGENT,"Mozilla/14.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_POST, true);

$data  = array(
"outputFormat" => "xml",
"input" => "Here is a statement to process",
"Process" => "Submit Query"
 );

$data_string = "";

foreach($data as $key=>$value){ /// YOU HAVE TO DO THIS
$data_string .= $key.'='.urlencode($value).'&';  /// AND THIS
}

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
$result = curl_exec($ch);
echo $result; 
```

# php - php pdostatement::execute 永远

> ID：15077434
> 
> 赞同：0
> 
> 时间：2013-02-25T22:07:42.150
> 
> 标签：php, mysql, pdo, prepared-statement

我正在设计一个 Web 应用程序，它有一个相当复杂的查询来搜索用户当前位置附近的点......以及很多其他信息。主 POI 表中大约有 150 万行，与其他四个表连接（其他较小的表用于与主要兴趣点相关的其他数据）。

在 mysql 控制台中运行查询时，它会在 0.5 秒或更短的时间内返回我要查找的数据（达到这一点就足够了 PITA，但我终于弄清楚了我需要在主 POI 表上的哪些索引让它发生）...但是当我将查询放入我的应用程序并通过网络运行（通过 jquery、ajax 和 php pdo 准备语句）时，返回任何数据需要 6-7 秒以上.. .有时长达18-25秒。

我可能做错了什么会导致执行需要这么长时间？有什么我需要确保我正在做的事情我可能会以某种方式忘记吗？

这是我的 php 代码的相关片段（非常简单），其中实际发生了减速：

```
$qry = "...";
$data = array(xxx); // user's lat/lon and other data we need

$sth = $this -> ci -> prepare($qry);
$sth -> execute($data); 
```

作为记录，将其作为非准备好的语句运行并没有更好。事实上，它实际上有点慢......

请帮帮我，我整天都在扯头发。我以为一旦我最终优化了查询，它就会解决问题，但事实证明显然不是这样......

```
mysql> select
    t.treasureID, t.buriedByUserID, t.lockLevel, t.currentGoldValue, t.initialSilverValue,
    t.burySeen, t.initialGoldValue, t.prize1, t.buryPerkID, t.decoyOf,
    t.unlockAttempts, t.unlockedByKeypad, t.unlockedByUserID, t.prizeID,
    p.prizeDesc, p.validFrom, p.validUntil, p.sponsor, p.prizeName,
    userB.displayName as bDisplayName, s.sponsorID, s.sponsorName, pb.perkName,
    (DEGREES( ACOS( SIN( RADIANS( 40.6846 ) ) * SIN( RADIANS( t.latitude ) ) + COS( RADIANS( 40.6846 ) ) * COS( RADIANS( t.latitude ) ) * COS( RADIANS( -76.19613 - t.longitude ) ) ) ) * 60 * 1.1515 ) AS distance
    from treasures t
    left join prizes p on t.prizeID=p.prizeID
    left join userInfo userB on userB.userID=t.buriedByUserID
    left join sponsors s on p.sponsorID=s.sponsorID
    left join perksB pb on t.buryPerkID=pb.perkID
    where
        t.unlockedByUserID=-1 and
        t.buriedByUserID<>1011 and
        t.isGlobal=0 and
        t.latitude between 40.467351088803 and 40.901848911197 and
        t.longitude between -76.483560028513 and -75.908699971487 and
        ((1361820374 > p.validFrom and 1361820374 < p.validUntil) or p.validUntil is null)
        having distance < 15
        order by distance asc
        limit 0, 50;
+------------+----------------+-----------+------------------+--------------------+----------+------------------+--------+------------+---------+----------------+------------------+------------------+---------+---------------------------------------------------------------------------------------------------------------------------+------------+------------+---------------+-----------------+--------------+-----------+--------------+----------+---------------------+
| treasureID | buriedByUserID | lockLevel | currentGoldValue | initialSilverValue | burySeen | initialGoldValue | prize1 | buryPerkID | decoyOf | unlockAttempts | unlockedByKeypad | unlockedByUserID | prizeID | prizeDesc                                                                                                                 | validFrom  | validUntil | sponsor       | prizeName       | bDisplayName | sponsorID | sponsorName  | perkName | distance            |
+------------+----------------+-----------+------------------+--------------------+----------+------------------+--------+------------+---------+----------------+------------------+------------------+---------+---------------------------------------------------------------------------------------------------------------------------+------------+------------+---------------+-----------------+--------------+-----------+--------------+----------+---------------------+
+------------+----------------+-----------+------------------+--------------------+----------+------------------+--------+------------+---------+----------------+------------------+------------------+---------+---------------------------------------------------------------------------------------------------------------------------+------------+------------+---------------+-----------------+--------------+-----------+--------------+----------+---------------------+
50 rows in set (0.78 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T05:36:11.883

在控制台中，尝试以这种方式运行它

```
SELECT SQL_NO_CACHE t.treasureID... 
```

和这个

```
EXPLAIN SELECT t.treasureID... 
```

如果它运行缓慢并且解释显示很多行 - 问题在于查询本身。
如果即使没有缓存它也运行得很快 - 尝试使用[准备好的语句](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)
的控制台版本 如果差异仍然存在（没有准备好的控制台，准备慢的控制台） - 分析两个查询并查看你可以从分析结果中得到什么：

```
set profiling=1;
...run your queries
show profiles;
show profile for query 1;
show profile for query 2; 
```

也尝试与 ATTR_EMULATE_PREPARES 一起玩，但我觉得它不会有太大帮助。
还要确保 PHP 端没有其他需要时间的代码

# php - 选择过滤器后上传图片

> ID：15077436
> 
> 赞同：0
> 
> 时间：2013-02-25T22:07:50.077
> 
> 标签：php, javascript, jquery, filter

他我这里有一个脚本，用户可以在其中选择一个文件，但是当他们完成选择一个文件后，我怎样才能使脚本将图片发送到一个 php 脚本，以便我可以上传到服务器上？

```
$(function() {

    /*
        In this code, we are going to do the following:

        1\. Accept an image on drag and drop
        2\. Create a new canvas element (original), with a max size
           of 500x500px (customizable) and keep it in memory
        3\. Listen for clicks on the filters. When one is selected:
                3.1 Create a clone of the original canvas
                3.2 Remove any canvas elements currently on the page
                3.3 Append the clone to the #photo div
                3.4 If the selected filter is different from the "Normal"
                    one, call the Caman library. Otherwise do nothing.
                3.5 Mark the selected filter with the "active" class
        4\. Trigger the "Normal" filter

    */

    var maxWidth = 500,
        maxHeight = 500,
        photo = $('#photo'),
        originalCanvas = null,
        filters = $('#filters li a'),
        filterContainer = $('#filterContainer');

    // Use the fileReader plugin to listen for
    // file drag and drop on the photo div:

    photo.fileReaderJS({
        on:{
            load: function(e, file){

                // An image has been dropped.

                var img = $('<img>').appendTo(photo),
                    imgWidth, newWidth,
                    imgHeight, newHeight,
                    ratio;

                // Remove canvas elements left on the page
                // from previous image drag/drops.

                photo.find('canvas').remove();
                filters.removeClass('active');

                // When the image is loaded successfully,
                // we can find out its width/height:

                img.load(function() {

                    imgWidth  = this.width;
                    imgHeight = this.height;

                    // Calculate the new image dimensions, so they fit
                    // inside the maxWidth x maxHeight bounding box

                    if (imgWidth >= maxWidth || imgHeight >= maxHeight) {

                        // The image is too large,
                        // resize it to fit a 500x500 square!

                        if (imgWidth > imgHeight) {

                            // Wide
                            ratio = imgWidth / maxWidth;
                            newWidth = maxWidth;
                            newHeight = imgHeight / ratio;

                        } else {

                            // Tall or square
                            ratio = imgHeight / maxHeight;
                            newHeight = maxHeight;
                            newWidth = imgWidth / ratio;

                        }

                    } else {
                        newHeight = imgHeight;
                        newWidth = imgWidth;
                    }

                    // Create the original canvas.

                    originalCanvas = $('<canvas>');
                    var originalContext = originalCanvas[0].getContext('2d');

                    // Set the attributes for centering the canvas

                    originalCanvas.attr({
                        width: newWidth,
                        height: newHeight
                    }).css({
                        marginTop: -newHeight/2,
                        marginLeft: -newWidth/2
                    });

                    // Draw the dropped image to the canvas
                    // with the new dimensions
                    originalContext.drawImage(this, 0, 0, newWidth, newHeight);

                    // We don't need this any more
                    img.remove();

                    filterContainer.fadeIn();

                    // Trigger the default "normal" filter
                    filters.first().click();
                });

                // Set the src of the img, which will
                // trigger the load event when done:

                img.attr('src', e.target.result);
            },

            beforestart: function(file){

                // Accept only images.
                // Returning false will reject the file.

                return /^image/.test(file.type);
            }
        }
    });

    // Listen for clicks on the filters

    filters.click(function(e){

        e.preventDefault();

        var f = $(this);

        if(f.is('.active')){
            // Apply filters only once
            return false;
        }

        filters.removeClass('active');
        f.addClass('active');

        // Clone the canvas
        var clone = originalCanvas.clone();

        // Clone the image stored in the canvas as well
        clone[0].getContext('2d').drawImage(originalCanvas[0],0,0);

        // Add the clone to the page and trigger
        // the Caman library on it

        photo.find('canvas').remove().end().append(clone);

        var effect = $.trim(f[0].id);

        Caman(clone[0], function () {

            // If such an effect exists, use it:

            if( effect in this){
                this[effect]();
                this.render();

                // Show the download button
                showDownload(clone[0]);
            }
            else{
                hideDownload();
            }
        });

    });

    // Use the mousewheel plugin to scroll
    // scroll the div more intuitively

    filterContainer.find('ul').on('mousewheel',function(e, delta){

        this.scrollLeft -= (delta * 50);
        e.preventDefault();

    });

    var downloadImage = $('a.downloadImage');

    function showDownload(canvas){

        downloadImage.off('click').click(function(){

            // When the download link is clicked, get the
            // DataURL of the image and set it as href:

            var url = canvas.toDataURL("image/png;base64;");
            downloadImage.attr('href', url);

        }).fadeIn();

    }

    function hideDownload(){
        downloadImage.fadeOut();
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:24:50.657

尝试这个...

[HTML5 拖放上传器 - http://demo.tutorialzine.com/2011/09/html5-file-upload-jquery-php/](http://demo.tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

# vb.net - e.keychar 不是 system.eventargs 的成员 - Visual Basic 2010

> ID：15077443
> 
> 赞同：0
> 
> 时间：2013-02-25T22:08:03.220
> 
> 标签：vb.net, visual-studio-2010

我试图阻止我的文本框，以便它们只能接受数字。我在网上找了这个代码

```
Private Sub TextBox1_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) HandlesTextBox1.TextChanged
  If Not Char.IsNumber(e.KeyChar) And Not Char.IsControl(e.KeyChar) Then
    e.Handled = True
  End If
End Sub 
```

问题是显示了一条错误消息：

> e.keychar 不是 system.eventargs 的成员

我已经导入了`Imports System.EventArgs`. 知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T22:14:11.763

我相信问题在于您正在处理的事件。应该不是`TextChanged`。`e.KeyChar`通常在`EventArgs`for`KeyPress`处理程序中。尝试使用类似`TextBox1_KeyPress`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:26:36.750

这应该有效：

```
Public Class Form1
    Private Sub TextBox1_KeyDown(sender As Object, e As KeyEventArgs)
        If e.KeyValue < 48 OrElse e.KeyValue > 57 Then _
            e.SuppressKeyPress = True
    End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-13T22:37:39.717

它需要 (sender As Object, e As **KeyPressEventArgs** ) e.KeyChar 是其中的成员

# javascript - 开发没有重定向 URI 的 Chrome 扩展

> ID：15077444
> 
> 赞同：5
> 
> 时间：2013-02-25T22:08:05.217
> 
> 标签：javascript, google-chrome-extension, oauth-2.0, google-drive-api, google-oauth

我正在开发一个 Chrome 扩展程序，它是 Github.com 上的一个分叉开源程序。该扩展需要 Google Drive API，它需要 OAuth 2.0 客户端 ID。但是，在创建客户端 ID 期间，它要求我提供重定向 URI，但我没有任何重定向域。这是否意味着我无法使用 Google Drive API 或有解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:15:11.573

您可以使用：`http://localhost`应该没问题。

最重要的是获取您的指纹，然后是 API 密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:39:51.350

是的，您可以使用 Drive API，但您必须使用 Google JS 客户端，只需提供范围、客户端 ID、客户端密码并加载 js 客户端并进行 API 调用。但是在 JavaScript 源中必须有您的 chrome 扩展 ID (chrome-extension://abcdefghijklmnopqrstuvwxyx)

以下功能可以为您提供方便

```
// on client load call this function
var handleClientLoadAuto = function () {

    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuthAuto, 1);
} 
```

和

```
var checkAuthAuto = function () {
    gapi.auth.authorize({
        client_id: clientId,
        scope: 'scope here',
        immediate: true
    }, handleAuthResultAuto);
} 
```

如果一切正常：

```
var handleAuthResultAuto = function (authResult) {

    if (authResult && !authResult.error) {
        //do call to drive api using 
        gapi.client.load('drive', 'v2', function () {

                var request = gapi.client.drive.files.list(params);
                request.execute(function (resp) {
                    if (resp && resp.error) {
                        //call to error callback function
                        //handleError(resp);
                    } else {
                        //ok response
                    }

                });
            }
        } else {}
    } 
```

但是要使用它，您必须登录，否则它不会检测到授权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-15T08:42:06.603

您可以注册一个特殊的 URI：

`https://<extension-id>.chromiumapp.org/<anything-here>`

浏览器会捕获重定向并触发您的代码，而不是真正转到 URL。

请在此处查看更多详细信息：

[https://developer.chrome.com/apps/app_identity#register_provider](https://developer.chrome.com/apps/app_identity#register_provider)

请注意，在这种情况下，您的扩展 ID 必须是固定的。

# javascript - 如何通过 Javascript/AJAX 逐行显示文本文件？

> ID：15077445
> 
> 赞同：0
> 
> 时间：2013-02-25T22:08:05.347
> 
> 标签：javascript, html, ajax

我正在尝试从服务器读取文本文件并显示在我网页上的 div 中。这是我的 AJAX/Javascript：

```
 <body onload="loadXMLDoc()">
    <script>
        function loadXMLDoc()
        {
            var xmlhttp;
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("myDiv").innerHTML=xmlhttp.responseText.replace("\n", "<br />");
                }
            }
            xmlhttp.open("GET","ajax_info_test.txt?t=" + Math.random(),true);
            xmlhttp.send();
            setInterval (loadXMLDoc, 1000);
        }
    </script>
    <div id="myDiv"></div>
</body> 
```

它只在自己的行上显示文本文件中的第一行。我怎样才能为每条线单独执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:14:43.727

由于 Brad M 似乎没有完全回答，您的问题是您只替换了一行。使用以下内容删除所有 \n 并改为使用 br 标签加入。

```
xmlhttp.responseText.split('\n').join('<br/>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:10:51.767

.replace 仅替换 \n 的第一个实例

```
document.getElementById("myDiv").innerHTML=xmlhttp.responseText.replace("\n", "<br />"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:20:32.923

全局替换 \r、\n 或 \r\n：

```
var str = xmlhttp.responseText;
var replacedStr = str.replace(/\r\n|\r|\n/g,"<br />");
document.getElementById("myDiv").innerHTML = replacedStr; 
```

# arduino - 数据 Tx/Rx 状态 LED 功能

> ID：15077446
> 
> 赞同：2
> 
> 时间：2013-02-25T22:08:05.683
> 
> 标签：arduino, embedded, led, transmission

很多硬件都带有 Tx/Rx 状态 LED，但是如果您的硬件没有并且您想查看数据是否正在传输怎么办？如果您只是将 LED 设置为线的值，它可能会在您看到它之前打开和关闭（<1/100 秒）。

我的问题是，如何编写中断驱动函数来驱动 LED 状态？我在互联网上搜索过，一无所获，我可以使用带模数的计数器，但这似乎很笨重。还有其他想法吗？

PS - 我想在 Arduino 或 Mbed 中使用它，但我怀疑它对哪个问题有影响......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:30:39.260

```
void receive_or_transmit_interrupt()
{
     g_traffic = true;
     /* other stuff. */
}

void timer_that_fires_every_100_milliseconds()
{
     if ( led == ON)
     {
          led = OFF;
          g_traffic = false;
     }
     else if ( g_traffic )
     {
          led = ON;
     }
} 
```

如果您不希望计时器在没有流量的情况下始终触发，您可以更改`receive_or_transmit_interrupt`启用计时器，并且计时器可以在关闭 LED 时自行禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:13:19.970

一种简单的方法是在 Tx/Rx 中断中打开 LED 并启动一个 200 毫秒的计时器（足够长以感知）。然后在定时器 ISR 中关闭 LED。

这样，指示器在*最后一次*tx/rx 活动后 200 毫秒熄灭。如果活动持续，指示灯将保持亮起。

如果 tx/rx 突发是间歇性的，间隔大于 200 毫秒，则指示灯将闪烁。因此，关闭、开启和闪烁的状态提供了数据活动的广泛指示。

# java - 在构造函数上使用带有规范的泛型类型

> ID：15077451
> 
> 赞同：4
> 
> 时间：2013-02-25T22:08:29.140
> 
> 标签：java, android, interface

如何在 Java 中正确执行以下操作？我想要一个可以创建对象列表的通用例程。在这个例程中，我希望这些对象的类的构造函数支持特定的参数。

澄清一下：我希望这个例程`List<T>`从 JSON 字符串创建一个。这是更大的反序列化代码的一部分。如果我能以某种方式指定每个支持`T`的实现一个构造函数，该构造函数创建`T`给定的 a `JSONObject`，那么我可以编写如下例程：

```
interface CreatableFromJSONObject<T> {
    T(JSONObject object);     // Complains about missing return type.
} 

static <T> List<T extends CreatableFromJSONObject> jsonArrayToList(JSONArray array) {
    List<T> result = new ArrayList<T>();
    for (int i = 0; i < array.length; ++i) {
         JSONObject jsonObject = array.getJSONObject(i);
         result.add(T(jsonObject));    // If T has one constructor with 1 one argument JSONObject
    }
    return result;
} 
```

然后用一个实现这个接口的示例类

```
class SomeClass implements CreatableFromJSONObject {
    SomeClass(JSONObject object) throws JSONException {
        // implementation here
    }
} 
```

我可以使用所需的方法：

```
List<SomeClass> list = jsonArrayToList<SomeClass>(someJSONArray); 
```

现在，在 StackOverflow 上对此有相当多的点击，所以我了解到我上面概述的内容是不可能的，因为 Java[不支持在接口中指定特定的构造函数，也不支持](https://stackoverflow.com/questions/2804041/constructor-in-a-interface)静态[方法](https://stackoverflow.com/questions/129267/why-no-static-methods-in-interfaces-but-static-fields-and-inner-classes-ok/135722#135722)（这将是一个替代路线同一件事，但由于同样的原因不可能）。

那么，实现这一目标的最佳方法是什么？

我目前的最佳尝试如下：

```
public static <T> List<T> jsonArrayToList(final JSONArray jsonArray, Constructor<T> fromJSONObjectConstructor) {
    List<T> result = new ArrayList<T>();
    try {
        for (int i = 0; i < jsonArray.length(); i++) {
            result.add(fromJSONObjectConstructor.newInstance(jsonArray.getJSONObject(i)));
        }
    } catch (InvocationTargetException e) {
        throw new RuntimeException(e);
    } catch (InstantiationException e) {
        throw new RuntimeException(e);
    } catch (IllegalAccessException e) {
        throw new RuntimeException(e);
    } catch (JSONException e) {
        throw new RuntimeException(e);
    }
    return result;
} 
```

然后添加到此方法应支持的每个类：

```
public class SomeClass {
    public static final Constructor<SomeClass> jsonObjectConstructor;
    static {
        try {
            jsonObjectConstructor = CafellowEntity.class.getConstructor(JSONObject.class);
        } catch (NoSuchMethodException e) {
            throw new RuntimeException(e);
        }
    }

    SomeClass(JSONObject object) throws JSONException {
        // Implementation here
    }
} 
```

我用作

```
List<SomeClass> list = jsonArrayToList(myJSONArray, SomeClass.jsonObjectConstructor); 
```

这是我能想到的最漂亮的解决方案，除了根本不使用通用实现之外，只需将（在这种情况下）实际上正在执行工作的几行代码放在我需要它们用于特定的地方班级。

有什么建议么？与替代解决方案相比，此解决方案的性能如何？通过不支持它就像这样 Java 可能告诉我我不应该想要这样做，但这并不能阻止我想知道它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:28:51.390

除非您正在进行某种不寻常的反序列化，否则这种设计过于复杂且容易出错。Android 捆绑了一个出色的 JSON 解析器，它已经可以做到这一点，而且做得很好。您当前为其定义自定义构造函数的每种类型都可以使用一行代码进行反序列化：

```
final CustomObj obj = new Gson().fromJson(jsonObj.toString(), CustomObj.class); 
```

将其合并到您现有的方法中，您最终会得到：

```
public static <T> List<T> jsonArrayToList(final JSONArray jsonArray,
        Class<T> clazz) {
    if (jsonArray == null || clazz == null)
        return null;

    final Gson gson = new Gson();
    List<T> result = new ArrayList<T>(jsonArray.length());
    for (int i = 0; i < jsonArray.length(); i++) {
        try {
            result.add(gson.fromJson(jsonArray.getJSONObject(i).toString(),
                    clazz));
        } catch (final JSONException je) {
            je.printStackTrace();
            return null;
        }
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:28:19.943

您可以通过省略构造函数实例并改用 clazz 实例来简化您的解决方案。所以签名`jsonArrayToList()`将是：

```
public static <T> List<T> jsonArrayToList(final JSONArray jsonArray, Class<T> clazz); 
```

然后调用构造函数`clazz.newInstance();`

如果您事先知道类的类型，这将起作用。

# java - 在java中将JXDatePicker的日期格式转换为mysql的日期类型以将其存储在数据库中

> ID：15077455
> 
> 赞同：0
> 
> 时间：2013-02-25T22:08:51.867
> 
> 标签：java, jdbc

我在我的 java 应用程序中使用了 JXDatePicker，我想将它的值存储在 MySQL 数据库中。要存储的数据库值是日期类型。

这是我的代码：

```
final JXDatePicker dodc = new JXDatePicker(System.currentTimeMillis());
final SimpleDateFormat formater = new SimpleDateFormat("yyyy/MM/dd");
Date datedodc;

dodc.setBounds(250, 260, 150, 20);
    content.add(dodc);
    dodc.setForeground(BLACK);
    dodc.setBackground(WHITE);
    dodc.setFont(new Font("Arial", Font.BOLD, 12));
    dodc.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
             datedodc = dodc.getDate();
            System.out.println(formater.format(dodc.getDate()));
        }
    }); 
```

如果我打印这个值，它会给出以下输出：

```
Feb 05 00:00:00 IST 2013 
```

我想用以下格式将日期类型值存储在 mysql 中：`yyyy-mm-dd` 我该怎么做？

当我尝试存储值时，Eclipse 给了我以下错误：

```
com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Feb 05 00:00:00 IST 2013,Mon Feb 18 00:00:00 IST 2013,'Gujju Enterprise',4,'faaf' at line 1

        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2934)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1616)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1708)
        at com.mysql.jdbc.Connection.execSQL(Connection.java:3249)
        at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1350)
        at com.mysql.jdbc.Statement.executeUpdate(Statement.java:1266)
        at inwardRecord.save(inwardRecord.java:379)
        at inwardRecord.actionPerformed(inwardRecord.java:304)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)

com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Feb 05 00:00:00 IST 2013,Mon Feb 18 00:00:00 IST 2013,'Gujju Enterprise',4,'faaf' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T05:14:56.000

尝试：

```
DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
jXDatePicker1.setFormats(dateFormat);
DateFormat sysDate = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
String date_to_store = sysDate.format(jXDatePicker1.getDate()).toString(); 
```

这将为您提供`jXDatePicker1`（此处不包括声明和初始化）输入作为格式正确的字符串`date_to_store`输出以存储在 mySQL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T13:33:04.123

试试这种方法：

```
int selectedYear =  (int)  datePicker.getModel().getYear();
int selectedMonth = (int)  datePicker.getModel().getMonth();
int selectedDay = (int)  datePicker.getModel().getDay();

String selectedDate = selectedYear +"-"+selectedMonth+"-"+selectedDay; 
```

您现在可以将其存储`selectedDate`在您的数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T16:09:16.347

尝试这个：

```
DateFormat format = new SimpleDateFormat("yyyy-MM-dd");
dateString = format.format(date.getDate()); 
```

# android - 从 URL 获取图像到 ImageView

> ID：15077458
> 
> 赞同：0
> 
> 时间：2013-02-25T22:09:00.837
> 
> 标签：android, xml-parsing, android-asynctask, android-imageview

我正在继续努力为我的校报制作应用程序。我最新的挑战是让每个俱乐部和组织的标志出现在一个 ImageView 中，该 ImageView 与俱乐部的其他详细信息一起出现在 Activity 中。

出于显而易见的原因，我不想在应用程序中存储所有这些图像，我宁愿从 URL 中获取它们。我认为这样做的一种方法是以下代码段：

```
Intent intent = getIntent();
 Bitmap bm = null;
try {
    bm = BitmapFactory.decodeStream((InputStream)new URL(intent.getStringExtra("keyLogo")).getContent());
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
 detailsLogo.setImageBitmap(bm); 
```

我从我创建的 XML 文件中获取一个 URL，该文件包含校园内的所有俱乐部及其信息。这样，当我想在应用程序中更改某些内容时，我只需要更改 XML。

这里的问题是它抛出了 NetworkOnMainThread 异常。这可以放入我的活动中的 AsyncTask 并以这种方式运行吗？任何意见，将不胜感激。

编辑：链接的问题不能满足我的需求。其中一个答案很接近，但我的问题特别需要一个异步任务，该问题接受的答案不包括在内。

这是使用接受的答案和其他部分完成的活动：

```
public class OrgDetails extends Activity {

/*******************************************************************
 * Async Task
 ******************************************************************/
private class GetImageFromServer extends AsyncTask<String, Void, Bitmap> {

    String url;
    Context context;
    private Bitmap image;
    ImageView detailsLogo = (ImageView)findViewById(R.id.detailsLogo);

    public GetImageFromServer(String url, Context context){
        this.url = url;
        this.context = context;
    }

    @Override
    protected Bitmap doInBackground(String... params){
        try{
            URL urli = new URL(this.url);
            URLConnection ucon = urli.openConnection();
            image = BitmapFactory.decodeStream(ucon.getInputStream());
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return image;  //<<< return Bitmap
    }
    @Override
    protected void onPostExecute(Bitmap result){ 
        detailsLogo.setImageBitmap(result);
    }

}
/*******************************************************************
 * End Async Task
 ******************************************************************/

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.orgdetails);

     TextView detailsSname = (TextView)findViewById(R.id.detailsSname);
     TextView detailsLname = (TextView)findViewById(R.id.detailsLname);
     TextView detailsDescription = (TextView)findViewById(R.id.detailsDescription);

     Intent intent = getIntent();

     detailsLname.setText(intent.getStringExtra("keyLname"));
     detailsSname.setText(intent.getStringExtra("keySname"));
     detailsDescription.setText(intent.getStringExtra("keyDescription"));

     String str_url = intent.getStringExtra("keyLogo");
     GetImageFromServer asyObj = new GetImageFromServer(str_url,OrgDetails.this);
     asyObj.execute("");
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:23:36.787

使用 AsyncTask 更改代码以从服务器获取图像，而不是在主 UI 线程上执行网络操作。通过将 AsyncTask 扩展为 Activity 的内部类：

```
private class GetImageFromServer extends AsyncTask<String, Void, Bitmap> {

     String url;
     Context context;
     public GetImageFromServer(URL url,Context context){
       this.url=url;
       this.context=context;
        }
      @Override
      protected Bitmap doInBackground(String... params) {
        bm = BitmapFactory.decodeStream((InputStream)new URL(url).getContent());
        return bm;  //<<< return Bitmap
      }      

      @Override
      protected void onPostExecute(Bitmap result) { 
            detailsLogo.setImageBitmap(result);  
      }

} 
```

并`AsyncTask`从 Activity 执行：

```
String str_url=intent.getStringExtra("keyLogo");
GetImageFromServer asyObj=new GetImageFromServer(str_url,Your_Activity.this);
asyObj.execute(""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:40:03.057

当您尝试在 UI 线程中执行网络操作时，您会收到 NetworkOnMainThread 异常。

您应该按照您的建议将其放入 AsyncTask 中，并且您的下载代码应该检索 InputStream 而不是像这样转换内容：

```
URL url = new URL(path);
URLConnection ucon = url.openConnection();
Bitmap image = BitmapFactory.decodeStream(ucon.getInputStream()); 
```

如果您还想更灵活地控制您的图像，请考虑为您的位图对象使用图像适配器。这些是扩展 BaseAdapter 的容器，可以为您提供额外的控件来操作图像，例如缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:23:48.770

是的，您肯定希望在单独的线程上通过网络抓取图像。您可以设置 doInBackground 以获取图像，然后在 onpostexecute 中将位图设置为图像视图。

# java - InnerList 类型中的参数不适用于参数（整数）

> ID：15077459
> 
> 赞同：0
> 
> 时间：2013-02-25T22:09:08.990
> 
> 标签：java, linked-list

我一直在用我的 setInner 方法遇到这个问题，如果我一直告诉我“InnerList 类型中的方法 setInner(GList) 不适用于参数（整数）”。这对我来说似乎很奇怪，因为整数似乎适用于 GList。有人可以帮我弄清楚我做错了什么吗？

我的内部类将存储整数列表“内部”。

```
public class InnerList {
private String name;
private GList<Integer> inner = new GList<Integer>();
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public GList<Integer> getInner() {
    return inner;
}
public void setInner(GList<Integer> inner) {
    this.inner = inner;
}
} 
```

在我的主要方法中，导致我出现问题的公共课程部分：

```
GList<InnerList> list = new GList<InnerList>(); 
    InnerList iList = new InnerList ();
    Scanner sc = new Scanner(System.in);
    String answer;
while (true) {
            System.out.println("Do you want to enter a number (y/n)?");
            answer = sc.nextLine();
            if (answer.equals("y")) {
                System.out.println("Enter Number: ");
                answer = sc.nextLine();
                try {
                    Integer num1 = Integer.valueOf(answer);                            
                    if (list.isEmpty() == true) {                           
                        iList.setInner(num1);  //ERROR IS HERE
                        list.insertFirstItem(iList);
                    } else {
                        iList = new InnerList();
                        iList.setInner(num1); //AND HERE
                        list.insertNext(iList);
                    }
                } catch (NumberFormatException e) {
                    System.out.println("You must enter an number! " + e);
                }
                continue;
            } else {
                break first;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:12:13.547

错误信息非常清楚。您正在使用

```
iList.setInner(num1); 
```

当你应该做

```
iList.setInner(myIntegerGlist); 
```

匹配方法的预期参数类型。

# jquery - jQuery Validate 插件问题

> ID：15077460
> 
> 赞同：1
> 
> 时间：2013-02-25T22:09:25.027
> 
> 标签：jquery, jquery-validate

我对 Jquery 验证器插件不是很熟悉，我试图弄清楚是否可以验证单个文本字段，即在文本字段中输入密码以及它是否等于“密码”（或其他密码可能是）然后出现下载链接。
这是一个 jsfiddle： http: [//jsfiddle.net/aSRRr/](http://jsfiddle.net/aSRRr/)
这里也是 jQuery：

```
$.validator.setDefaults({
submitHandler: function(form){
$("#myform").hide();
$("#download-file").fadeIn("slow");
},
}); 

  $(document).ready(function(){
    $("#myform").validate({
  rules: {
    password: { required: true, equalTo: "#password"},
  }

});

  });

$(document).ready(function(){
$("#myform").hide();
$("#download-file").hide();

$("#download-button").click(function(){
$("#myform").fadeToggle(300);
});
}); 
```

是否可以根据单词验证文本字段，在这种情况下为“密码”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:26:34.413

使用`addMethod`函数[http://docs.jquery.com/Plugins/Validation/Validator/addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)：

> 添加自定义验证方法。它必须由名称（必须是合法的 javascript 标识符）、基于 javascript 的函数和默认字符串消息组成。回调的参数是： - 已验证元素的当前值
> 
> *   要验证的元素
> *   为方法指定的参数，例如对于 min: 5 参数为 5，对于 range: [1, 5] 它的 [1, 5]
> 
> 请注意：虽然很容易添加一个正则表达式方法来检查它的参数值，但将这些正则表达式封装在他们自己的方法中要干净得多。如果您需要大量略有不同的表达式，请尝试提取一个公共参数。

标记：

```
<div id="download-button" style="cursor: pointer;">Download File</div>

<form id="myform">
  <label for="password">Password</label>
  <input id="password" name="password" class="isPassword" />
  <br/>

  <input class="submit" type="submit" value="SUBMIT" />
</form>

<div id="download-file" style="cursor: pointer;">Click to Download</div> 
```

jQuery：

```
$.validator.setDefaults({
    submitHandler: function(form){
        $("#myform").hide();
        $("#download-file").fadeIn("slow");
    },
}); 
$(document).ready(function(){
    jQuery.validator.addMethod("isPassword", function(value) {
        if(value == 'password')
              return true;
          }, "Invalid password");
    $("#myform").validate();
    $("#myform").hide();
    $("#download-file").hide();
    $("#download-button").click(function(){
        $("#myform").fadeToggle(300);
    });
}); 
```

确保您的输入使用类 isPassword。还要确保`.ready`从您的代码中删除额外的功能。

jsFiddle：http: [//jsfiddle.net/aSRRr/2/](http://jsfiddle.net/aSRRr/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:51:15.887

**重要提示：这并不安全。** 任何人都可以轻松查看您的任何 JavaScript 代码并查看您的密码值。

以下回答了您的问题，尽管我不建议将其作为保护任何东西的可靠方法。

* * *

使用[jQuery Validate 插件的内置`addMethod`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)创建一个自定义规则，调用`pw_check`如下：

```
jQuery.validator.addMethod("pw_check", function (value) {
    return (value == 'password');
}, "Invalid password"); 
```

然后将新规则与其他规则一起应用...

```
rules: {
    password: {
        required: true,
        pw_check: true // <-- apply your custom rule
    }
}, 
```

**完全更新的 jQuery 代码：**

```
$(document).ready(function () {

    jQuery.validator.addMethod("pw_check", function (value) {
        return (value == 'password');
    }, "Invalid password");

    $("#myform").validate({
        rules: {
            password: {
                required: true,
                pw_check: true
            }
        },
        submitHandler: function (form) {
            $("#myform").hide();
            $("#download-file").fadeIn("slow");
        }
    });

    $("#myform").hide();
    $("#download-file").hide();

    $("#download-button").click(function () {
        $("#myform").fadeToggle(300);
    });

}); 
```

您的 HTML 没有任何变化。

**工作演示：http: [//jsfiddle.net/5WMNK/](http://jsfiddle.net/5WMNK/)**

# java - 创建并写入一个文本文件，打印到 REPL

> ID：15077461
> 
> 赞同：3
> 
> 时间：2013-02-25T22:09:27.200
> 
> 标签：java, clojure, functional-programming

如何从 clj 文件中获取函数“print”输出到 REPL 的内容并将其全部放入文本文件中？有没有办法创建一个新的空文本文件并将其与其他 clj 文件一起放在项目目录中并进行处理？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:18:27.887

您可以通过重新绑定来完成此操作`*out*`

```
(binding [*out* (clojure.java.io/writer "foo.txt")]
  (print "Hello World"))

(print "This does NOT go to the file") ;; outside the binding macro 
```

运行后，应该有一个名为`foo.txt`“Hello World”的文件。

唯一需要注意的是，这种重新绑定只会影响在`binding`宏中评估的表单。

* * *

这将重新绑定`*out*`到文件编写器，并且不需要使用`binding`宏。

```
(set! *out* (clojure.java.io/writer "foo.txt"))

(print "foo") ;; written to foo.txt
(print "bar") ;; written to foo.txt 
```

我不确定重新设置这个变量是否会有任何负面影响。**谨慎使用！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:23:07.800

我知道这并不完全是您正在寻找的东西，而只是为了记录您可以使用[with-out-str](http://clojuredocs.org/clojure_core/clojure.core/with-out-str)宏。

这会将输出评估为`string`可以存储在文件中的输出。

# .net - XPath 选择具有指定名称的所有元素

> ID：15077462
> 
> 赞同：33
> 
> 时间：2013-02-25T22:09:30.927
> 
> 标签：.net, xml, xpath

我相信这应该能够在不参考实现的情况下仅使用标准 XPath 来回答，但仅供参考，我正在使用 .Net（System.Xml 命名空间）中的 XML DOM 对象。

我有一个节点从 XML 文档的深处传递给我的函数，并且我想选择该节点的所有具有特定名称的后代元素，而不管这些节点的中间路径如何。我正在拨打的电话如下所示：

```
node.SelectNodes("some XPath here"); 
```

我正在使用的节点看起来像这样：

```
...
<food>
  <tart>
    <apple color="yellow"/>
  </tart>
  <pie>
    <crust quality="flaky"/>
    <filling>
      <apple color="red"/>
    </filling>
  </pie>
  <apple color="green"/>
</food>
... 
```

我想要的是所有“苹果”节点的列表，即 3 个结果。我尝试了几种不同的方法，但没有一个能得到我想要的。

```
node.SelectNodes("apple"); 
```

这给了我一个结果，青苹果。

```
node.SelectNodes("*/apple"); 
```

这给了我一个结果，黄色苹果。

```
node.SelectNodes("//apple"); 
```

这给了我数百个结果，看起来像文档中的每个苹果节点，或者至少可能是文档根目录的直接子节点的每个苹果节点。

如何创建一个 XPath，它将为我提供当前节点下的所有苹果节点，而不管它们在当前节点下的深度如何？具体来说，根据我上面的例子，我应该得到三个结果——红色、绿色和黄色的苹果。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-25T22:21:51.717

试试`.//apple`。这列出了`apple`作为当前节点的后代的所有节点。为了更好地理解本主题，您应该了解 XPath 轴的工作原理。例如，你也可以写`descendant::apple`。

# css - 移动设备的媒体查询不起作用

> ID：15077465
> 
> 赞同：1
> 
> 时间：2013-02-25T22:09:33.657
> 
> 标签：css, media-queries

我第一次尝试在我的 CSS 中使用媒体查询，但我似乎没有太多运气让它工作。

为了测试，我希望我的#page-wrap 在 iPhone 之类的东西正在查看页面时调整为 440 像素，但没有任何变化。这是我用过的。

`@media only screen and (max-device-width: 480px) { #page-wrap {width:440px;} }`

我也把它放在我的标题中。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:19:58.800

您使用有特定原因`max-device-width`吗？与 不同`max-width`的是，它不会帮助人们旋转他们的设备或进行其他类型的调整。

相反，坚持使用`max-width`，如下所示：

```
@media only screen and (max-width: 300px) { 
    #page-wrap {
        width:100px;
    } 
} 
```

查看说明它的这个[jsFiddle 。](http://jsfiddle.net/vVjtA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:16:49.450

试试这个你的媒体查询：

```
@media only screen and (max-width: 480px) {} 
```

# c++ - 什么是 C++ 中的转换构造函数？它是干什么用的？

> ID：15077466
> 
> 赞同：59
> 
> 时间：2013-02-25T22:09:36.250
> 
> 标签：c++, constructor, copy-constructor

我听说 C++ 有一种叫做“转换构造函数”或“转换构造函数”的东西。这些是什么，它们是做什么用的？我看到它提到了这段代码：

```
class MyClass
{
  public:
     int a, b;
     MyClass( int i ) {}
}

 int main()
{
    MyClass M = 1 ;
} 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-25T22:31:43.570

*C++03 和 C++11 对转换构造函数*的定义是不同的。在这两种情况下，它都必须是非`explicit`构造函数（否则它不会参与隐式转换），但对于 C++03，它也必须可以用单个参数调用。那是：

```
struct foo
{
  foo(int x);              // 1
  foo(char* s, int x = 0); // 2
  foo(float f, int x);     // 3
  explicit foo(char x);    // 4
}; 
```

构造函数 1 和 2 都是 C++03 和 C++11 中的转换构造函数。构造函数 3 必须接受两个参数，它只是 C++11 中的转换构造函数。最后一个构造函数 4 不是转换构造函数，因为它是`explicit`.

*   **C++03** : §12.3.1

    > 一个可以用单个参数调用的没有*函数说明符* 的构造函数指定了从其第一个参数的类型到其类的类型的转换。`explicit`这样的构造函数称为转换构造函数。

*   **C++11**：§12.3.1

    > 没有函数说明符声明的构造*函数指定* `explicit`从其参数的类型到其类的类型的转换。这样的构造函数称为转换构造函数。

为什么具有多个参数的构造函数被认为是 C++11 中的转换构造函数？这是因为新标准为我们提供了一些方便的语法，用于使用*花括号初始化列表*传递参数和返回值。考虑以下示例：

```
foo bar(foo f)
{
  return {1.0f, 5};
} 
```

将返回值指定为*花括号初始化列表*的能力被认为是一种转换。这使用了转换构造函数，`foo`它需要 a`float`和 a `int`。另外，我们可以通过doing调用这个函数`bar({2.5f, 10})`。这也是一种转换。*由于它们是转换，因此它们用来转换构造函数*的构造函数是有意义的。

因此，重要的是要注意，使`foo`接受 a`float`和 an的构造函数`int`具有`explicit`函数说明符会阻止上述代码编译。上述新语法只有在有可用于完成这项工作的转换构造函数时才能使用。

*   **C++11**：§6.6.3：

    > *带有花括号初始化列表*的`return`语句通过指定初始化列表中的复制列表初始化 (8.5.4) 初始化要从函数返回的对象或引用。

     *§8.5：

    > 在参数传递 [...] 中发生的初始化 [...] 称为复制初始化。

    §12.3.1：

    > 显式构造函数像非显式构造函数一样构造对象，但仅在显式使用直接初始化语法 (8.5) 或强制转换 (5.2.9, 5.4) 的情况下这样做。* 

 ** * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-25T22:09:36.250

**使用转换构造函数隐式转换**

让我们让问题中的示例更复杂

```
class MyClass
{
  public:
     int a, b;
     MyClass( int i ) {}
     MyClass( const char* n, int k = 0 ) {}
     MyClass( MyClass& obj ) {}
} 
```

前两个构造函数是转换构造函数。第三个是复制构造函数，因此它是另一个转换构造函数。

转换构造函数支持从参数类型到构造函数类型的隐式转换。在这里，第一个构造函数允许从 an 转换`int`为 class 的对象`MyClass`。第二个构造函数可以将字符串转换为 class 的对象`MyClass`。第三……从类`MyClass`对象到类对象`MyClass`！

要成为转换构造函数，构造函数必须有一个参数（在第二个参数中，第二个参数有一个默认值）并且在没有关键字的情况下声明`explicit`。

然后，main 中的初始化可以如下所示：

```
int main()
{
    MyClass M = 1 ;
    // which is an alternative to
    MyClass M = MyClass(1) ;

    MyClass M = "super" ;
    // which is an alternative to
    MyClass M = MyClass("super", 0) ;
    // or
    MyClass M = MyClass("super") ;
} 
```

**显式关键字和构造函数**

现在，如果我们使用`explicit`关键字会怎样？

```
class MyClass
{
  public:
     int a, b;
     explicit MyClass( int i ) {}
} 
```

然后，编译器不会接受

```
 int main()
    {
        MyClass M = 1 ;
    } 
```

因为这是隐式转换。相反，必须写

```
 int main()
    {
        MyClass M(1) ;
        MyClass M = MyClass(1) ;
        MyClass* M = new MyClass(1) ;
        MyClass M = (MyClass)1;
        MyClass M = static_cast<MyClass>(1);
    } 
```

`explicit`关键字始终用于防止构造函数的隐式转换，它适用于类声明中的构造函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-12T07:23:35.170

转换构造函数是一个单参数构造函数，在声明时不使用函数说明符 explicit 。编译器使用转换构造函数将对象从第一个参数的类型转换为转换构造函数的类的类型。*

# objective-c - 在不激活的情况下显示窗口（保持其下方的应用程序处于活动状态）

> ID：15077471
> 
> 赞同：9
> 
> 时间：2013-02-25T22:09:58.057
> 
> 标签：objective-c, cocoa, nsview, nswindow, nswindowcontroller

我需要在第三方应用程序上方显示一个窗口（没有标题栏），而我的窗口没有获得焦点。

我试过使用`NSPanel`和设置启用非激活，但这没有帮助。

我试过`orderFront:self`了，但这也没有帮助。

我总是需要添加`[NSApp activateIgnoringOtherApps:YES];`，因为否则窗口不会显示。

我在这里有一个用于此功能的示例项目：http:
[//users.telenet.be/prullen/TopW2.zip](http://users.telenet.be/prullen/TopW2.zip)

`UIElement`在应用程序的 plist 文件中设置为`true`，因此没有停靠。您可以通过同时按下来激活窗口`ALT + SPACE`。你会看到它下面的应用失去了焦点。关于如何解决这个问题的任何想法？我见过其他应用程序这样做，所以我知道这是可能的。

编辑：这是到目前为止的代码。请记住，该窗口是一个非激活的 NSPanel。我仍然需要最后`NSApp activateIgnoringOtherApps`一行，否则它不会显示。但这当然会使窗口成为活动窗口。

```
 _windowController = [[MyWindowController alloc] initWithWindowNibName:@"MyWindowController"];

    [[_windowController window] setLevel:NSNormalWindowLevel+1];
    [[_windowController window] orderFrontRegardless];

    [_windowController showWindow:self];

   [NSApp activateIgnoringOtherApps:YES]; 
```

我还继承了 NSPanel 并添加了两种方法：

```
- (BOOL)canBecomeKeyWindow
{
    return YES;
}

- (BOOL)canBecomeMainWindow
{
    return YES;
} 
```

编辑：好的，取消选中 setHidesOnDeactivate 可以解决此问题，但现在窗口将永远不会隐藏。当用户按下它下面的应用程序或切换到另一个应用程序时，我需要它隐藏。

编辑2：好的，这似乎解决了上述问题：

```
- (void)awakeFromNib
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(hideWindow) name:NSWindowDidResignKeyNotification object:nil];
}
- (void)hideWindow {
    [self setHidesOnDeactivate:YES];
} 
```

不知道有没有更好的办法。

对于那些想知道如何显示窗口的人：

```
 [[_windowController window] setLevel:NSPopUpMenuWindowLevel];
    [[_windowController window] orderFrontRegardless];
    [[_windowController window] makeKeyWindow];

    [_windowController showWindow:self]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T00:45:23.610

其中任何一个都可以解决问题：

*   用于`-[NSWindow orderFrontRegardless]`在不激活相应应用程序的情况下将正常级别的窗口置于前面，或
*   用于`-[NSWindow setLevel:]`将窗口级别增加到高于`NSNormalWindowLevel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:29:07.097

不要从@puzzle 的有用答案中删除，但听起来您的问题与使用 an`NSPanel`而不是`NSWindow`.

“面板如何工作”文档说：

> *   屏幕面板（警报对话框除外）在应用程序未处于活动状态时从屏幕上移除，并在应用程序再次变为活动状态时恢复。这减少了屏幕混乱。
> *   具体来说， hidesOnDeactivate 方法的 NSWindow 实现返回 NO，但同一方法的 NSPanel 实现返回 YES。

因此，也许您可​​以覆盖`hidesOnDeactivate`以返回 NO，或更改为`NSWindow`

# c# - 无法将 XXXXXX 类型的对象转换为 IXXXXX 类型（.NET 4.0）

> ID：15077473
> 
> 赞同：0
> 
> 时间：2013-02-25T22:10:03.490
> 
> 标签：c#, .net, visual-studio-2010, reflection

有人可以解释发生在我身上的事情吗？我有一个测试项目来测试我的服务的虚拟实例。在测试项目中，我只是简单地引用了 dummyService.exe 和 System.SystemProcess dll。

然而，在我的 dummyService 项目中，我引用了类库，它本身使用来自其他组件的其他 dll 以及我的解决方案中的其他项目。

问题是，当我运行测试时，会抛出异常（在 dummyService 中加载和工作的 dll 的第一次机会异常），此外还有 invalidcast 异常（下面的错误消息）。

**无法将“Export.CaseOutputGenerator”类型的对象转换为“Export.ICaseOutputGenerator”类型。捕获 System.InvalidCastException 消息=无法将类型为“Export.CaseOutputProcess.CustomCaseOutputGenerator”的对象转换为类型“Export.CaseOutputProcess.ICaseOutputGenerator”。Source=Export.CaseOutputProcess StackTrace: 在 Export.CaseOutputProcess.CaseOutputGeneratorFactory.GetCaseOutputGeneratorObject(String assemblyName, String className) 在 C:\Monitor\Export.CaseOutputProcess\CaseOutputGeneratoryFactory.cs: 第 56 行在 Monitor.BOMock.GenerateCaseOutput(String OutputFolder, String iFile , Int32 seqNum, DataTable CaseSettings, String SettingFileName) in C:\Monitor\BOMock\BOMock.cs: C:\Monitor\BOMock\BOMock.cs 中 Monitor.BOMock.Handling() 中的第 1069 行：第 492 行 InnerException：**

```
 public static ICaseOutputGenerator GetCaseOutputGeneratorObject(string assemblyName, string className)
            {
                ICaseOutputGenerator customeOutputGen = null;

                var obj = GetObject(assemblyName, className);
                if (obj != null)
                    caseOutputGen = (ICaseOutputGenerator)obj; // FAILS HERE
                return caseOutputGen;
            }

   private static object GetObject(string fullName, string className)
        {
            try
            {
                Type caseOutputGen = null;
                var localAssembly = Assembly.LoadFrom(fullName);
                foreach (var testType in localAssembly.GetTypes())
                {
                    if (!testType.FullName.EndsWith(className, StringComparison.InvariantCultureIgnoreCase)) continue;
                    caseOutputGen = testType;
                    break;
                }
                if (caseOutputGen == null) return null;

                var obj = Activator.CreateInstance(caseOutputGen);
                return obj;
            }
            catch (FileNotFoundException ex)
            {
                throw new Exception("Failed to load assembly: " + Environment.NewLine + fullName, ex);
            }
            catch (Exception ex)
            {
                throw new Exception("Failed to load assembly: " + Environment.NewLine + fullName, ex);
            }
        } 
```

其中 assemblyName 是要加载的 dll 文件的路径，而 className 恰好是要创建实例的类的名称。

如您所见，在代码中，我使用反射在提供的 assemblyName PATH 加载程序集（String assemblyName）[http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfrom.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfrom.aspx)，并且然后再次使用反射，然后创建一个包含在加载程序集中的类名（字符串类名）的实例。[http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)

请问我该如何解决这个问题？我不想在测试项目中引用我所有的 dll。请问我该如何解决或解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:46:19.227

根据该堆栈跟踪，似乎找不到该类型所在的程序集。如果您只是添加对已编译 exe 的引用，您可能不会获得其他库。我想你有几个选择：

1.  继续咬紧牙关：在您的测试项目中添加对其他库的引用。它们通常不具有传递性：仅仅因为您的服务知道它们并不一定意味着您的测试程序集也知道它们。
2.  向您的测试项目添加一个编译后步骤，该步骤复制其他程序集，以便运行您的测试的应用程序域可以找到它们。
3.  使用依赖注入和控制容器的反转。那里有很多，但会想到 Castle Windsor、StructureMap 和 Unity。Scott Hanselman 在他的博客上有一个很棒的列表：[http ://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)

# python - 如何在Python中多个列表的每个对象

> ID：15077474
> 
> 赞同：0
> 
> 时间：2013-02-25T22:10:04.470
> 
> 标签：python, list

我有三个列表，我想按照它们在列表中出现的顺序将它们的对象相乘，然后在新列表中返回结果：

```
a = [1,5,4,3]
b = [20, 44, 40, 100]
c = [222, 432, 670, 190] 
```

新列表应具有以下计算结果：

```
new_list = [(1*20*222),(5*44*432), (4*40*670), (3*100*190)] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T22:11:55.407

```
new_list = [x * y * z for x, y, z in zip(a, b, c)] 
```

或者，如果您有三个以上的列表，则特别有用：

```
import operator
new_list = [reduce(operator.mul, lst, 1) for lst in zip(a, b, c)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:12:09.540

```
[x * y * z for x, y, z in zip(a, b, c)] 
```

遍历“压缩”列表并乘以它们的组件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T22:12:26.830

```
In [1]: a = [1,5,4,3]

In [2]: b = [20, 44, 40, 100]

In [3]: c = [222, 432, 670, 190]

In [5]: [(x*y*z) for x,y,z in zip(a,b,c)]
Out[5]: [4440, 95040, 107200, 57000] 
```

# bash - 简单的 Bash 脚本文件复制

> ID：15077483
> 
> 赞同：2
> 
> 时间：2013-02-25T22:10:54.530
> 
> 标签：bash

我正在编写一个简单的评分脚本时遇到问题。我有一个名为 HW5 的目录，其中包含班级中每个学生的文件夹。从包含 HW5 文件夹的当前目录中，我想将所有以单词 mondial 开头的文件复制到每个学生的文件夹中。我的脚本运行但不会复制任何文件。有什么建议么？

```
#!/bin/bash                                                                                                         

for file in ./HW5; do
    if [ -d $file ]; then
        cp ./mondial.* ./$file;
    fi
done 
```

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T22:13:11.340

第一个循环只执行一次，`file`等于`./HW5`。添加星号以实际选择其中的文件或目录。

```
#!/bin/bash                                                                                                         

for file in ./HW5/*; do
  if [ -d "$file" ]; then
    cp ./mondial.* ./"$file"
  fi
done 
```

正如 Mark Reed 所建议的，这可以简化：

```
for file in ./HW5/*/; do 
  cp ./mondial.* ./"$file"
done 
```

# android - 使用 ContentProvider 预填充用户界面

> ID：15077485
> 
> 赞同：0
> 
> 时间：2013-02-25T22:11:06.397
> 
> 标签：android, android-contentprovider

我玩过 Google 示例的 Database Dictionary 示例。

它做这样的事情：

```
private void handleIntent(Intent intent) {
    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        // handles a click on a search suggestion; launches activity to show word
        Intent wordIntent = new Intent(this, WordActivity.class);
        wordIntent.setData(intent.getData());
        startActivity(wordIntent);
    } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        // handles a search query
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    } 
```

我想用数据预先填充 UI（Google 示例有一个空列表）。查询应该是“*”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:01:11.233

好的，我发现我必须添加这行代码

int count = cursor.getCount(); String countString = getResources().getQuantityString(R.plurals.search_results, count, new Object[] { count, query });

# .net - 如何向 Windows Phone 7 控件中的现有事件处理程序添加功能

> ID：15077486
> 
> 赞同：1
> 
> 时间：2013-02-25T22:11:11.347
> 
> 标签：.net, windows-phone-7, event-handling, windows-phone

我制作了一个自定义的 windows phone 7 控件，我称之为从 Textbox 继承的 GhostBox。当控件获得焦点（即 GotFocus）时，我想从 Ghostbox 类内部自动运行一个方法（名为 Update）。

我怎样才能与那个预先存在的事件（GotFocus）联系起来？我必须创建一个新的事件处理程序/代表吗？

目前，我必须为我创建的每个 GhostBox 访问 GotFocus 方法并手动调用 Update 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:21:36.087

您无需订阅任何事件。只需覆盖后代类中的 void OnGotFocus(RoutedEventArgs e) 方法：

```
protected override void OnGotFocus(RoutedEventArgs e)
{
    base.OnGotFocus(e);

    // do your stuff - call your Update method 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:16:13.873

创建方法和事件。

```
 protected virtual void GotFocus()
 {
      //Your code
 }  

  public delegate void GotFocusEventHandler(object sender, ValueChangedEventArgs e);
  public event ValueChangedEventHandler ValueChanged; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:16:25.387

您可以订阅`GetFocus`事件：

```
base.GetFocus += (s,e) => Update(); 
```

# java - java.lang.UnsatisfiedLinkError：java.library.path 中没有 lwjgl

> ID：15077488
> 
> 赞同：3
> 
> 时间：2013-02-25T22:11:15.183
> 
> 标签：java, runtime-error, lwjgl

每当我尝试使用 LWJGL 运行 Java 程序时，我都会遇到这个错误或它的一些排列：

> `Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860) at java.lang.Runtime.loadLibrary0(Runtime.java:845) at java.lang.System.loadLibrary(System.java:1084) at org.lwjgl.Sys$1.run(Sys.java:73) at java.security.AccessController.doPrivileged(Native Method) at org.lwjgl.Sys.doLoadLibrary(Sys.java:66) at org.lwjgl.Sys.loadLibrary(Sys.java:95) at org.lwjgl.Sys.<clinit>(Sys.java:112) at org.lwjgl.opengl.Display.<clinit>(Display.java:135) at org.newdawn.slick.AppGameContainer$1.run(AppGameContainer.java:37) at java.security.AccessController.doPrivileged(Native Method) at org.newdawn.slick.AppGameContainer.<clinit>(AppGameContainer.java:34) at com.mojang.mojam.giraffe.Game.main(Game.java:220)`

从命令行运行时，我尝试输入 -Djava.library.path="/Users/marcus888/Downloads/Giraffemacka/natives/" ，但它仍然不起作用。帮助？

顺便说一句，这与相关程序的代码没有任何关系；即使是完整的 Java 游戏（如 Minecraft）也会发生此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-29T03:14:15.093

要修复 LWJGL 中的 java.lang.UnsatisfiedLinkError：
使用这段代码：
`System.setProperty("org.lwjgl.librarypath", "\lib_folder");`
将“\lib_folder”替换为您的 natives/library 的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:13:02.043

我不相信你的路径应该在那里被引用。尝试使用：

```
-Djava.library.path=/Users/marcus888/Downloads/Giraffemacka/natives/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T23:42:41.567

由于没有提及您在哪个平台上，我意识到这是一篇旧帖子，但我遇到了同样的问题并解决了它，所以我想添加。我正在使用 Windows，我必须复制并粘贴 DLL 文件实际所在的文件路径并修复它。它必须准确，包括驱动器号才能让它工作。所以就我而言，它是（不在我的主用户路径下）“e:\LWJGL\lwjgl-2.9.3\natives\windows”（不包括引号，除非你有空格）。现在它工作正常。

# python - 弹性豆茎上的烧瓶不显示静态资产

> ID：15077489
> 
> 赞同：13
> 
> 时间：2013-02-25T22:11:19.520
> 
> 标签：python, amazon-web-services, flask, amazon-elastic-beanstalk

您如何让 aws elastic beanstalk 识别您的烧瓶应用程序中的静态资产？我做了标准的 /.ebextensions/python.config 几行 YAML 行：

```
option_settings:
  "aws:elasticbeanstalk:container:python:staticfiles":
    "/static/": "static/" 
```

我对模板中资产的所有调用都包含在“{{url_for('static', filename='img/office.jpg')}}”类型的东西中。

但是页面加载时没有图像、样式或 javascript 显示。这是一个示例日志文件 404。 IP - - [25/Feb/2013:21:48:13 +0000] "GET /static/css/bootstrap.css HTTP/1.1" 404 328 " [http://xyz.elasticbeanstalk .com/](http://xyz.elasticbeanstalk.com/) "

我错过了一些明显的东西吗？一切都在我的本地运行良好，只是静态资产一旦我 git aws.push 就不会加载

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-11-15T09:28:42.297

也可以通过 Elastic Beanstalk 面板完成：

**配置 -> 软件配置 -> 静态文件**

接着

[![在此处输入图像描述](../Images/e7c71fcead062f98a543a6fb5862af18.png)](https://i.stack.imgur.com/ANflB.jpg)

只是作为替代选择

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-02T21:19:16.997

在撰写本文时，在与 AWS EB 的配置进行了数小时的斗争之后，我放弃了尝试让静态文件按照我们所期望的方式工作，并将我的 Flask 应用程序创建更新为：

```
app = Flask(__name__, static_url_path='/s') 
```

这会呈现 url `/s/scripts/my-script.js`，因为我总是`url_for('static', ...)`在我的代码和模板中使用，所以一切都在 AWS 之外继续工作。

**2013 年 9 月 30 日更新**：我几乎可以保证这些`staticFiles`设置在 AWS EB 的 Python 容器中被完全忽略。

我上面建议的更改具有通过 Flask 路由所有静态文件请求的不利缺点（更准确地说，可能是 WSGI。）不过，这并不难修复。

在项目根目录创建一个 Apache conig 文件，名为**app-httpd.conf**：

```
Alias /s /opt/python/current/app/static
<Directory /opt/python/current/app/static>
Order allow,deny
Allow from all
</Directory> 
```

此配置告诉 Apache 接管以 开头的 URL 的任何请求`/s`，与我们为静态文件选择的前缀相同，并从我们的应用程序的*静态*文件夹中提供文件。

**在.ebextensions/custom-apache.config**创建此文件：

```
container_commands:
  add_apache_conf:
    command: "cp app-httpd.conf /etc/httpd/conf.d" 
```

此文件将在应用程序部署期间使用，并将新的 .config 文件复制到配置 Apache 以加载它看到的所有 .config 文件的目录。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-13T18:55:13.337

4 年多后，我可以使用以下方法使静态文件正常工作：

（文件`.ebextensions/WHATEVER_NAME.config`：）

```
option_settings:
  - namespace: aws:elasticbeanstalk:container:python
    option_name: StaticFiles
    value: /static/=PATH/FROM/MY/APP/BASE/DIR/TO/STATIC/DIR/ 
```

...就我而言，这是

```
 value: /static/=distrib/static/ 
```

我发现改变我的

```
app = Flask(__name__) 
```

至

```
app = Flask(__name__, static_url_path='/static') 
```

既不必要也不充分。当我只设置 static_url_path 而不是 StaticFiles 时，它不起作用；当我设置 StaticFiles 而不是 static_url_path 时，它工作正常。

<sarcasm>Elastic Beanstalk 非常简单明了，并且有据可查！</sarcasm>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-24T04:15:46.237

我花了很多时间试图弄清楚这一点并整理这些建议。我已经对 2020 年仍然相关的答案发表了评论。这是我遇到的解决方案的 TL；DR：

*   Elastic Beanstalk UI 左侧导航窗格下方的屏幕`static files`部分设置属性。此配置不会映射到Flask 需要查找静态资产的位置。`Modify Software``Configuration``aws:elasticbeanstalk:container:python:staticfiles``static_url_path`
*   要设置的正确属性是`StaticFiles`，可以通过将`.config`文件添加到`.ebextensions`目录来设置。

[在这里阅读更多。](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-container.html#python-namespaces)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-03T18:24:06.250

我尝试了 Myles Baker 的解决方案，但没有工作，因为在部署时我收到了错误 -

```
ERROR   Invalid option specification (Namespace: 'aws:elasticbeanstalk:container:python', OptionName: 'StaticFiles') 
```

我最终在 .ebextensions/WHATEVER_NAME.config 中使用了以下代码 -

```
option_settings:
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /html: statichtml
    /images: staticimages 
```

这是从这里直接复制/粘贴 - [https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environment-cfg-staticfiles.html](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environment-cfg-staticfiles.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-28T00:27:56.410

我发现解决这个问题的一个奇怪的事情是编辑我的 .gitignore 文件。它包括删除 /dist 文件夹，其中包括我的 CSS 生成到的 dist 文件夹。因此，当我部署时，css 文件实际上丢失了。

希望这可以帮助任何可能在同一条船上的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-31T02:48:34.057

这个问题让我有点困惑，因为它在本地工作。无需更改配置。我在我的 html 文件中将第 1 行更改为第 2 行，它工作正常。将静态文件夹保存在根目录中，并将配置保存在 /static/:/static/。

```
 1 <link rel="stylesheet" href={{url_for('static',filename='style.css')}}/>

2 <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='style.css') }}"> 
```

可能是href 周围的引号。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-03T05:16:39.983

我有一个类似的问题，奇怪的是，所有文件`static/img/`都在被提供，但是任何东西`static/css/`都`static/js/`没有被提供。

为了解决这个问题，我`.elasticbeanstalk/optionsettings.app-env`从 Flask 源的根目录打开并将这段代码编辑为

```
[aws:elasticbeanstalk:container:python]
NumProcesses=1
NumThreads=15
StaticFiles=/static/.*=
WSGIPath=application.py

[aws:elasticbeanstalk:container:python:staticfiles] 
```

请注意，`StaticFiles`实际上需要一个正则表达式，因此在`/static/.*`允许`.*`之后的任何路径`/static/`

# javascript - Java 脚本未捕获 TypeError

> ID：15077505
> 
> 赞同：0
> 
> 时间：2013-02-25T22:12:48.910
> 
> 标签：javascript, facebook

我有一个使用 Facebook 登录的 Wordpress 网站。它除了在一页上效果很好：

[http://www.wheretotravelblog.com/add-post/](http://www.wheretotravelblog.com/add-post/)

在该页面上，我看到一个 Java 错误：

```
Uncaught TypeError: Cannot read property 'currentStyle' of null plupload.js:2
g.getStyle plupload.js:2
(anonymous function) plupload.html5.js:1
g.extend.trigger plupload.js:2
(anonymous function) plupload.js:2
j.runtimes.Html5.j.addRuntime.init plupload.html5.js:1
v plupload.js:2
g.extend.init plupload.js:2
WPUF_Obj.featImgUploader wpuf.js:108
WPUF_Obj.init wpuf.js:14
(anonymous function) wpuf.js:213
l jquery.js:2
c.fireWith jquery.js:2
v.extend.ready jquery.js:2
A 
```

而且 Facebook 登录按钮无法正常工作 - 它没有让我登录，它什么也没做。

我在 .js 文件中查看了在第 108 行调用以下代码的代码

```
WPUF_Obj.featImgUloader 
```

这就是我发现的：

```
featImgUploader: function() {
        if(typeof plupload === 'undefined') {
            return;
        }

        if(wpuf.featEnabled !== '1') {
            return;
        }

        var uploader = new plupload.Uploader(wpuf.plupload);

        uploader.bind('Init', function(up, params) {
            //$('#cpm-upload-filelist').html("<div>Current runtime: " + params.runtime + "</div>");
            });

        $('#wpuf-ft-upload-pickfiles').click(function(e) {
            uploader.start();
            e.preventDefault();
        });

        uploader.init(); 
```

任何人都对导致此问题的原因以及它是否会影响我的 Facebook 登录有任何想法？我认为 Facebook 也调用了 .init() ，所以我想知道是否存在冲突？

在此先感谢，罗布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:13:53.420

这是一个 JavaScript 错误，而不是 Java 错误。而且您的插件似乎有问题。

# python - 初始化变量时收到“UnboundLocalError: local variable 'e' referenced before assignment”

> ID：15077506
> 
> 赞同：4
> 
> 时间：2013-02-25T22:12:51.050
> 
> 标签：python, exception, exception-handling, python-3.x, while-loop

**[社区编辑给出可重现的例子：]**

```
def main():
    e = None
    print(locals())
    while not e:
        try:
            raise Exception
        except Exception as e:
            pass            

main() 
```

生产

```
~/coding$ python3.3 quiz2.py
{'e': None}
Traceback (most recent call last):
  File "quiz2.py", line 11, in <module>
    main()
  File "quiz2.py", line 5, in main
    while not e:
UnboundLocalError: local variable 'e' referenced before assignment 
```

* * *

[已编辑] 包含可重现的代码

我正在尝试运行一个 while 循环，我使用的条件是当变量`e==None`. 相关代码如下：

```
 print("\nThe current score list contains the following people's scores: ")
    score_list = open("score_list.dat", "rb")
    score_name = []
    e = None
    while not e:
        try:
            score = pickle.load(score_list)
            name = pickle.load(score_list)
            score_name.append([score, name])
        except EOFError as e:
            pass            
    score_list_sorted=sorted(score_list)
    sort_list.close()
    for item in score_list_sorted:
        print("Score: ", item[0], "\t", item[1]) 
```

完整的代码在这里：`https://www.dropbox.com/s/llj5xwexzfsoppv/stats_quiz_feb24_2013.py`

它需要的数据文件（运行测验）在这个链接中：`https://www.dropbox.com/s/70pbcb80kss2k9e/stats_quiz.dat`

`main()`需要编辑以使用正确的数据文件地址：

我收到的完整错误消息如下。这很奇怪，因为我`e`在 while 循环之前进行了初始化。我希望有人能帮我解决这个问题。谢谢！

```
Traceback (most recent call last):
  File "<pyshell#217>", line 1, in <module>
    main()
  File "/Users/Dropbox/folder/stats_quiz_feb24_2013.py", line 83, in main
    while not e:
UnboundLocalError: local variable 'e' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T23:08:39.517

此错误是由新`try...except...`范围引起的，这是 Python 3 的一项功能。
见[PEP-3110](http://www.python.org/dev/peps/pep-3110/)

在 Python 3 中，以下块

```
try:
    try_body
except E as N:
    except_body
... 
```

被翻译成（在 Python 2.5 术语中）

```
try:
    try_body
except E, N:
    try:
        except_body
    finally:
        N = None
        del N
... 
```

因此，Python 3 中的这个函数

```
def main():
    e = None
    print(locals())
    while not e:
        try:
            raise Exception
        except Exception as e:
            pass 
```

相当于

```
def main():
    e = None
    print(locals())
    if not e:
        try:
            raise Exception
        except Exception as e:
            pass
        del e
    if not e:
        try:
            raise Exception
        except Exception as e:
            pass
        del e
    ... 
```

`e`已初始化，但在第一个`try except`块之后已被删除。
因此，`UnboundLocalError`是必然的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T22:49:51.283

好吧，我不知道是什么导致了实际问题，但是为什么不在`break`发生异常时使用呢？你的循环变成：

```
while True:
    try:
        score = pickle.load(score_list)
        name = pickle.load(score_list)
        score_name.append([score, name])
    except EOFError as e:
        break 
```

据我所知，这是实现“运行循环，无一例外”的惯用方式

**编辑：为什么会这样**

似乎在 python3 中，一旦退出异常处理程序的范围，异常绑定到的变量就会从命名空间中删除。我将代码修改为以下内容：

```
def main():
    e = None
    print(locals())
    while not e:
        try:
            raise Exception
        except Exception as e:
            pass
        print(locals())

main() 
```

输出：

```
{'e': None}
{}
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in main
UnboundLocalError: local variable 'e' referenced before assignment 
```

这不是python2中的情况。考虑到如何将异常分配给变量的语法发生了变化，我对它的语义也发生了变化并不感到惊讶。尽管我确实认为这是“令人惊讶的”行为（从某种意义上说，这不是您所期望的）。

无论如何，在发生异常时退出循环的正确方法是在上面的代码中。如果您想将异常保留在异常处理程序的范围之外，我想您仍然可以执行以下操作：

```
def main():
   e = None
   print(locals())
   while not e:
      try:
         raise Exception
      except Exception as ex:
         e = ex
      print(locals())

main() 
```

产生以下输出：

```
{'e': None}
{'e': Exception()} 
```

但是你真的不应该为你的特定用例这样做。

# ruby-on-rails - before_filter ：除了设计操作不起作用

> ID：15077514
> 
> 赞同：1
> 
> 时间：2013-02-25T22:13:18.167
> 
> 标签：ruby-on-rails, devise, before-filter

每个新用户都必须接受 EULA 才能使用我的 RoR 应用程序提供的服务，所以当用户第一次登录我的网站时，她/他必须接受 EULA，如果她/他不想接受，他/她可以退出，所以：

我有`before_filter`一个`ApplicationController`动作`:except`：

```
before_filter :check_eula, :except => [:destroy] 
```

我的 EULA 页面上有链接：

```
<%= link_to('Logout', destroy_user_session_path, :method => :delete, :class => link_class) %> 
```

我正在使用设计： [https ://github.com/plataformatec/devise/blob/master/lib/devise/rails/routes.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/rails/routes.rb)

```
destroy_user_session DELETE /users/sign_out                   {:controller=>"devise/sessions", :action=>"destroy"} 
```

问题是，当用户在不接受 EULA 的情况下单击“注销”链接时，似乎`:check_eula`仍然会调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:53:27.740

我不知道为什么以下工作有效，但这是解决方案：

在`config/application.rb`：

```
config.to_prepare do
  # ...

  Devise::SessionsController.skip_before_filter :check_eula, :only => [:destroy]
end 
```

参考：

[如何跳过设计的 SessionsController 的 before_filter？](https://stackoverflow.com/questions/6209663/how-to-skip-a-before-filter-for-devises-sessionscontroller)

# r - 为每一行生成随机数

> ID：15077515
> 
> 赞同：4
> 
> 时间：2013-02-25T22:13:21.357
> 
> 标签：r

来自 SAS 的 R 新手...

我想使用该函数为每行创建一个包含 1,000 个随机数的向量

```
runif(1,000, min = 0, max = 1) 
```

并将其添加到我的`data.frame`.

尝试这个给我每行相同的数字：

```
EL$randoms <- runif(1, min = 0, max = 1) 
```

我该如何解决这个简单的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T22:15:45.410

这边走 ？

```
EL$randoms <- runif(1000, min=0, max=1) 
```

`El$randoms`是数据框的一整列。因此，您必须为其分配与行数一样多的值。根据您的尝试，只生成了一个随机数，并且 R 根据其回收规则，根据需要“重复”它多次以匹配`EL$randoms`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-05T14:53:40.583

这次聚会迟到了，但它出现在谷歌搜索中。这是一种为数据集中的每一行分配一个随机数的方法，而无需指定确切的行数。

```
EL$randoms <- runif(nrow(EL), min = 0, max = 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-05T23:16:48.233

`tidyverse`这是使用流行的较新语法的强制性答案：

```
mtcars %>% 
    add_column(runif = runif(nrow(.))) 
```

# python - 谁能告诉我 python pyodbc 中的 connection.commit() 有什么意义？

> ID：15077516
> 
> 赞同：3
> 
> 时间：2013-02-25T22:13:23.853
> 
> 标签：python, odbc

我曾经能够使用简单的执行语句来运行和执行 python。这将相应地将值 1,2 插入 a,b 中。但是从上周开始，我没有收到任何错误，但我的数据库中什么也没发生。没有标志 - 没有... 1,2 没有插入或替换到我的表中。

```
connect.execute("REPLACE INTO TABLE(A,B) VALUES(1,2)") 
```

如果我失去了与服务器的连接，我终于找到了我需要 commit() 的文章。所以我添加了

```
connect.execute("REPLACE INTO TABLE(A,B) VALUES(1,2)")
connect.commit() 
```

现在它可以工作了，但我只是想稍微了解一下，如果我知道我的连接没有丢失，我为什么需要这个？

*   python新手-谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:21:38.307

这不是 Python 或 ODBC 问题，而是关系数据库问题。

关系数据库通常以事务的形式工作：每当您更改某些内容时，事务就会启动，并且直到您使用`commit`或`rollback`. 这允许您进行多个同时出现在数据库中的串行更改（当`commit`发布时）。如果出现问题（通过 ），它还允许您将整个事务作为一个单元中止`rollback`，而不必显式撤消所做的每个更改。

您可以通过打开自动提交来使此功能透明，在这种情况下，`commit`将在每个语句之后发出 a，但这通常被认为是一种不好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:20:34.560

当查询彼此相关时，不提交会将您的所有查询放入一个更安全（并且可能在性能方面更好）的事务中。如果权力在两个独立没有意义的查询之间进行 - 例如使用两个更新查询将资金从一个账户转移到另一个账户。

`autocommit`如果您不想要它，您可以设置为 true，但没有太多理由这样做。

# tsql - TSQL Join 以从表 A 中获取表 B 中的每条记录的所有记录？

> ID：15077518
> 
> 赞同：1
> 
> 时间：2013-02-25T22:13:32.310
> 
> 标签：tsql, join

我有两张桌子：

```
 PeriodId  Period   (Periods Table)
 --------  -------
 1         Week 1
 2         Week 2
 3         Week 3

 EmpId  PeriodId  ApprovedDate  (Worked Table)
 -----  --------  ------------
 1      1         Null
 1      2         2/28/2013
 2      2         2/28/2013 
```

我正在尝试编写一个导致以下结果的查询：

```
 EmpId  Period    Worked     ApprovedDate
 -----  --------  ---------  ------------
 1      Week 1    Yes        Null
 1      Week 2    Yes        2/28/2013
 1      Week 3    No         Null
 2      Week 1    No         Null
 2      Week 2    Yes        2/28/2013
 2      Week 3    No         Null 
```

这个想法是我需要每个 Emp 的 Periods 表中的每个 Period。如果 Worked 表中没有记录，则将“No”值放置在 Worked 字段中。

得到这个结果的 TSQL 是什么样子的？

*（注意：如果有帮助，我还可以访问每个员工都有 EmpId 和 LastName 的 Employee 表。出于性能原因，我希望不需要这个，但如果我这样做了，那就这样吧。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:24:17.897

您应该能够使用以下内容：

```
select p.empid,
  p.period,
  case 
    when w.PeriodId is not null 
    then 'Yes' 
    else 'No' End Worked,
  w.ApprovedDate
from
(
  select p.periodid, p.period, e.empid
  from periods p
  cross join (select distinct EmpId from worked) e
) p
left join worked w
  on p.periodid = w.periodid
  and p.empid = w.empid
order by p.empid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8b9ee/16)

# sql-server-2008 - SQL Server 连接查询结果并将其插入到另一个表中

> ID：15077520
> 
> 赞同：1
> 
> 时间：2013-02-25T22:13:41.013
> 
> 标签：sql-server-2008

我有一张桌子`A`和一张桌子`B`。表`A`包含产品数据，表`B`包含每个产品的图像。每张图片一行。

我需要创建一条 SQL 语句来遍历 table `A`，获取产品 ID，然后连接结果集并将其插入 table 的一个字段中`A`。

`Table A`：

```
P-ID, Value1, Value2, Value3,    ImageLocation
35    Name    Price   description 
```

表`B`：

```
P-ID, ImageLocation
35    /upload/directory/imagename.jpg
35    /upload/directory/imagename2.jpg
35    /upload/directory/imagename3.jpg 
```

最终结果：

```
TableA:
P-ID, Value1, Value2, Value3,       ImageLocation
35    Name    Price   description   /up/dir/image.jpg,/up/dir/image2.jpg,/up/dir/image3.jpg 
```

我到底如何对它进行 SQL 化？

感谢新人！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:34:05.653

多值列不受欢迎......并且在 Sql Server 中没有一种优雅的方式来执行此操作 - 但是，您可以使用`FOR XML PATH`：

```
SELECT PID, Value1, Value2, Value3, STUFF((
  SELECT ',' + ImageLocation
  FROM TableB b
  WHERE b.PID = a.PID
  FOR XML PATH('')
), 1, 1, '') AS ImageLocation
FROM TableA a 
```

## [Sql 小提琴](http://sqlfiddle.com/#!3/50c61/1)

但同样，您真的需要在 Sql 查询中执行此操作，还是您可以在应用程序/演示文稿中处理？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T22:17:55.143

您可以尝试以下方法：

```
Select p.id, location || '/' ||......
From
(
Select * from tableA a, tableB b
Where a.id = b.id
) 
```

我不知道您使用的是哪个 DBMS，所以请查看哪个字符串 con。是适当的

# javascript - Javascript onchange 选择绑定问题

> ID：15077523
> 
> 赞同：1
> 
> 时间：2013-02-25T22:13:54.180
> 
> 标签：javascript, javascript-events

我似乎无法在谷歌中选择正确的关键字来找到这个答案，所以......

我在一个类中创建了一系列函数来处理选择框的变化。这是一个非常简单的 javascript 布局示例

```
function example(n) {
  this.name = n;
}

example.prototype.setChange(i) {
  var c = document.getElementById('test' + i );
  for ( var x = 0; x < 10; x++
    c.options[0] = new Option(x, x);
  c.change = this.doChange;
}

example.prototype.doChange() {
  alert(this.name);
} 
```

在我尝试访问“this”之前，一切正常。当调用 doChange 时，这是实际的 select html 对象而不是类。因为这是一个事件，所以我不能使用 .call(this) 来强制执行正确的绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:17:30.253

你`this`通过做失去你的`this.doChange`。使用类似的东西

```
function example(n) {
 this.name = n;

  var self = this;
  this.doChange = function () {
    alert(self.name);
 }
} 
```

# c# - 是否可以在不处于调试模式的情况下向变量添加监视？

> ID：15077524
> 
> 赞同：0
> 
> 时间：2013-02-25T22:13:59.267
> 
> 标签：c#, visual-studio-2010, debugging

在开始调试之前，我只是想在我的一个类字段中添加一个手表，但在任何地方都找不到菜单项。我知道一旦开始调试就可以添加它们，但是在开始调试之前菜单项不可用是有原因的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:26:55.503

[http://msdn.microsoft.com/en-us/library/0taedcee%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/0taedcee%28v=vs.100%29.aspx)解释说`Watch`和`Quick Watch`windows / 视图仅在调试会话期间可用。

然而，我做的一件事是快速评估/检查 中的变量`Ctrl+D, Q`，这是`Quick Watch`窗口的快捷方式。这使我可以输入`C#`表达式并查看它们的解析结果。

# http - HTTP 连接池

> ID：15077526
> 
> 赞同：4
> 
> 时间：2013-02-25T22:14:12.417
> 
> 标签：http, networking, tcp, connection

服务 A 通过 HTTP 调用服务 B。这种情况经常发生，并且传输的数据量不是很大。我发现重新使用相同的 TCP 连接将多个请求从 A 发送到 B 似乎可以改善延迟。自然地，想到了连接池的想法：

1.  打开到服务 B 的多个连接并保持它们处于活动状态
2.  当 A 需要调用 B 时，为它提供池中的一个连接

实现这一点涉及解决一些超出我试图做的范围的问题，所以我正在寻找一种廉价的方法来实现这一点（也许在 A 和 B 之间有一些专门配置的代理服务器？）。

我可以直接跳进去开始编码，但这个问题似乎很常见，我很确定以前有人已经解决了它。

# batch-file - 通过 Jenkins 使用 psexec 运行远程批处理文件失败

> ID：15077529
> 
> 赞同：13
> 
> 时间：2013-02-25T22:14:23.727
> 
> 标签：batch-file, automation, continuous-integration, psexec, continuous-deployment

通过 Jenkins运行远程批处理文件`psexec`失败。`psexec`使用从奴隶直接运行相同的批处理文件没有魅力。

让我提供更多信息。Jenkins 和它的从机与我们的目标机器位于不同的域中。

当我像这样运行批处理文件时：

```
"D:\Temp\PsTools\PsExec.exe" \\<targetmachine> -u <targetdomain\targetdomainuser> -p <pwd> -accepteula  "d:\temp\remotescript.bat" arg1 arg2 
```

直接从从属设备（远程桌面接管机器并打开命令提示符）完美运行。

当在 Jenkins 的 Windows 批处理构建步骤中输入它时，没有可见的输出，我只看到一个微调器，但没有任何反应，并且构建挂起排队任何其他构建，从而产生大量积压。显然，我在我的 Jenkins 用户尝试登录目标机器时收到了失败审核，但是我在目标机器上指定了一个具有管理员权限的域用户（目标机器域的域用户）。

有谁知道为什么用户尝试使用提供的凭据以外的任何其他凭据登录，以及为什么这可以直接从 Jenkins-slave 运行它？

或者任何其他实现这一点的方式（在远程机器上运行批处理文件）都非常受欢迎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-10T19:22:24.523

PAExec 是 PSExec 的功能克隆，**让我们通过 Jenkins 等查看输出**。

**[http://www.poweradmin.com/paexec/](http://www.poweradmin.com/paexec/)**

XCmd 是我们在惠普使用的，但由于某种原因，它不适用于我目前的工作。

我不知道 PAExec 何时出现，但这似乎是一个理想的解决方案。在发现它后不久（今天），我用一个非常长/涉及的 Jenkins 部署管道解决了一个间歇性问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T23:29:48.357

这是 psexec 的一个臭名昭著的问题：

[http://forum.sysinternals.com/psexec-always-hangs-when-run-from-java_topic5013.html](http://forum.sysinternals.com/psexec-always-hangs-when-run-from-java_topic5013.html)

[通过 PsExec 时程序输出丢失](https://stackoverflow.com/questions/1279809/program-output-lost-when-passed-through-psexec)

您可以尝试使用 xCmd： [http](http://feldkir.ch/xcmd.htm) ://feldkir.ch/xcmd.htm （它不适用于 localhost）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-09T10:22:23.677

试试这个，这会奏效

```
"D:\Temp\PsTools\PsExec.exe" \\\\remoteMachine -u username -p password /accepteula -h cmd /c "C:\remotescript.bat" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-16T05:04:47.263

尝试几件事...

1.  在您的命令中的 accepteula 之后添加参数选项 0 应该杀死任何已挂起的现有 psexec 进程并开始处理您的 psexec

2.  验证机器是 32 位还是 64 位..

    对于 64 位，在 C:\Windows\system32
    中搜索 psexec 对于 32 位，在 C:\Windows\SysWOW64 中搜索 psexec

在 jenkins 工作中，您可以相应地将 msbuild 版本设置为 64 位或 32 位，它应该可以按预期工作。

# html - 如何将网页另存为 html 代码？

> ID：15077530
> 
> 赞同：-2
> 
> 时间：2013-02-25T22:14:27.727
> 
> 标签：html

我正在尝试保存网页并将其转换为 html 代码。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:15:53.760

根据您的浏览器，执行 Ctrl/Cmd-s

或者

查看页面源（右键单击，另存为），将其全部复制并保存。

无需翻译。呈现的网页始终是 HTML，尽管它们也可能包含 JavaScript。

# matlab - Matlab中的矩阵索引和除法

> ID：15077535
> 
> 赞同：0
> 
> 时间：2013-02-25T22:14:45.397
> 
> 标签：matlab, gaussian

我正在尝试编写高斯消除代码，这是我正在使用的一段代码。矩阵已经是三角形的，但是这个表达式有一个错误：

```
x(n) = b(n) / A(n, n); 
```

这是完整的代码：

```
function [x] = gauss(A, b)
  n = size(A);
  for k=1 : n-1
      for i=k+1 : n
          m = A(i, k) / A(k, k);
          for j=1 : n
              A(i, j) = A(i, j) - m * A(k, j);
          end
          b(i) = b(i) - m * b(k);
      end
  end
  x(n) = b(n) / A(n, n);
  disp(double(b(n)));
  for k=n-1 : -1 : 1
      s=0;
      for i=k+1 : n
          s = s + A(k, i) * x(i);
      end
      x(k) = (b(k) - s) / A(k, k);
  end
  disp(x);
end 
```

谢谢你的帮助。顺便说一句，我是 Matlab 的新手...

**编辑：添加更多信息**

我这样调用这个函数： A = [6 3 2 ; 9 -1 4 ; 10 5 3] b = [12 37 21]

```
sol = gauss(A, b); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:28:29.227

这条线

```
 n = size(A); 
```

将有一个向量结果作为`A`一个矩阵。看来您正在期待这条线

```
x(n) = b(n) / A(n, n); 
```

表现得像标量除法，但是使用`n`向量实际上是在尝试划分不同维度的矩阵。根据您的示例代码检查这些语句的输出

```
n = size(A);
A(n,n)
b(n) 
```

并看到你不是在处理标量。如果你想`n`成为一个标量等于`A`尝试替换的行数

```
n = size(A); 
```

和

```
[n n1] = size(A); 
```

现在`n`应该真正代表`A`

# asp.net-mvc - MVC 将视图模型映射到域模型（没有自动映射器）以进行编辑操作

> ID：15077536
> 
> 赞同：1
> 
> 时间：2013-02-25T22:14:46.053
> 
> 标签：asp.net-mvc, linq, entity-framework

我不反对自动映射器，但想先了解手动方法。

我要更新的表是 area_list

我的视图模型：

```
 public class AreaView
{
    public int area_id { get; set; }
    public string area_name { get; set; }
    public string facility_name { get; set; }
    public int facility_id { get; set; }
} 
```

编辑视图有两个字段，area_id（隐藏）和area_name

我的编辑控制器（帖子），这是我的问题所在：

```
 [HttpPost]
    public ActionResult Edit(AreaView e_area)
    {
        if (ModelState.IsValid)
        {
            areaDB.Entry(e_area).State = EntityState.Modified;
            areaDB.SaveChanges();
            return RedirectToAction("List", new { id = e_area.facility_id });
        }
        return View(e_area);
    } 
```

有人可以提供一个如何手动将视图模型映射到 area_list（模型，由实体框架创建）的示例吗？我是否正确绑定了 AreaView 视图模型？

这现在将在控制器中，但如果它应该驻留在其他地方，所有的耳朵。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:05:08.290

好吧，更多的试验和错误来到了答案，如果它对其他人有用，则在下面发布。

```
[HttpPost]
    public ActionResult Edit(AreaView e_area)
    {
        if (ModelState.IsValid)
        {
            // Map the model 

            var area = areaDB.area_list.Where(x => x.area_id == e_area.area_id).FirstOrDefault();
            area.area_name = e_area.area_name;

            areaDB.Entry(area).State = EntityState.Modified;
                areaDB.SaveChanges();

            return RedirectToAction("List", new { id = e_area.facility_id });
        }
        return View(e_area);
    } 
```

# python - 管道命令行

> ID：15077537
> 
> 赞同：0
> 
> 时间：2013-02-25T22:14:46.353
> 
> 标签：python

我正在使用 in2csv 使用 python 子进程模块将 .xls 文件夹转换为 .txt 文件。

```
 for filename in os.listdir(raw_data_folder):

    full_filename = raw_data_folder + '\\' + filename
    new_name = filename.split('.')
    new_name = new_name[0] + str('.txt')
    new_name = raw_data_folder + new_name
    process_call = 'in2csv "' + full_filename + '" > "' + new_name + '"'
    subprocess.call(process_call) 
```

我不断得到非零退出状态 2，而它说无法识别的参数：>（新名称）。您如何将该输入通过管道传输到输出文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:30:03.133

重定向运算符 '>' 由 shell 处理，因此您必须告诉`call`它您希望它使用 shell：

```
subprocess.call(process_call, shell=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:32:19.470

问题解决了。我的代码编辑器中的制表符和空格问题。谢谢你们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:23:14.807

我建议[`envoy`](https://github.com/kennethreitz/envoy)试一试。它只是一个小的包装器，`subprocess`它公开了一个更好的 API，使管道变得非常简单和直观。

但如果这就是你所做的一切，那么你应该打印出来`process_call`并尝试从那里调试。我看不出您的代码不起作用的明显原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:28:39.183

正如 Hiroto 建议的那样，使用该[`shlex.split`](http://docs.python.org/2.7/library/subprocess.html#popen-constructor)功能

```
>>> import shlex, subprocess
>>> command_line = raw_input()
/bin/vikings -input eggs.txt -output "spam spam.txt" -cmd "echo '$MONEY'"
>>> args = shlex.split(command_line)
>>> print args
['/bin/vikings', '-input', 'eggs.txt', '-output', 'spam spam.txt', '-cmd', "echo '$MONEY'"]
>>> p = subprocess.Popen(args) # Success! 
```

# python - 如何使用在多台机器上运行的芹菜工人并行处理一组对象？

> ID：15077539
> 
> 赞同：1
> 
> 时间：2013-02-25T22:14:55.090
> 
> 标签：python, django, mongodb, celery, mongoengine

我在一个可访问的 mongoDB 集合中有几十万个文档，这些文档遵循名为 MyDoc 的 MongoEngine Schema。有一些东西（我们称之为 my_operation）要在这些文档中的每一个上运行。my_operation 还需要（只是读取，不改变）一个名为 data_dict 的 OrderedDict，它是通过 create_data_dict 函数构造的。我希望能够通过 celery workers 并行运行 my_operation 。

设置包括 django、mongo、mongoengine 和 celery。

选项1：

```
@celery.task()
def my_operation(my_doc_list):
   data_dict = create_data_dict()
   for doc in my_doc_list:
       do_something_to_doc(data_dict, doc)
       doc.save()

def create_data_dict():
   #blah blah blah
   return data_dict

#So I run everything like this:
batch_size = len(MyDoc.objects)/no_of_celery_workers
for b in xrange(0, len(MyDoc.objects), batch_size):
    my_operation.delay(MyDoc.objects[b:b+batch_size]) 
```

选项 2： my_operation 采用 data_dict 和 MyDoc 实例

```
@celery.task()
def my_operation(data_dict, my_doc):
   do_something_to_doc(data_dict, my_doc)
   my_doc.save()

def create_data_dict():
   #blah blah blah
   return data_dict

#So I run everything like this:
data_dict = create_data_dict()
celery.group([my_operation.s(data_dict, my_doc) for my_doc in MyDoc.objects]).apply_async() 
```

选项 3：

```
@celery.task()
def my_operation(my_doc):
   data_dict = create_data_dict()
   do_something_to_doc(data_dict, my_doc)
   my_doc.save()

def create_data_dict():
   #blah blah blah
   return data_dict

#So I run everything like this:
celery.group([my_operation.s(my_doc) for my_doc in MyDoc.objects]).apply_async() 
```

选项 4：

```
@celery.task()
def my_operation(my_doc):
   data_dict = get_data_dict()
   do_something_to_doc(data_dict, my_doc)
   my_doc.save()

def create_data_dict():
   #blah blah blah
   return data_dict

def get_data_dict():
   data_dict = cache.get("data_dict")
   if data_dict is None:
        data_dict = create_data_dict()
        cache.set("data_dict", data_dict)
   return data_dict

#So I run everything like this:
celery.group([my_operation.s(my_doc) for my_doc in MyDoc.objects]).apply_async() 
```

如果 Option1 有效，我可能不会问这个问题，但可惜我不能将查询集响应切片或查询集本身传递给 celery 工人，因为它们不可腌制。回溯似乎主要是这样说的。

使用 Option2，我最终会在每项任务中传递 data_dict，这听起来不太吸引人。如果我在多台机器上运行 celery 工作程序（我确实打算这样做）data_dict，它本质上只需要传递一次就会毫无价值地消耗大量网络。

在 Option3 的情况下，data_dict 会为每个文档重新创建，现在这似乎是对处理能力的巨大浪费。

选项 4：我使用缓存来备份 data_dict 而不是重新计算它或与每个文档一起重新传输它。这听起来像是最好的主意，但有一个问题。下次我想对所有 MyDocs 执行 my_operation 时，我希望重新计算 data_dict，无论它是否在缓存中。有没有办法做到这一点？

问题：最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:16:34.143

从表面上看，选项 2 听起来就像选项 1 - 因为您正在传递对象或其数据。

这里有很多未知数，但鉴于您在选项 4 中提到可能存在一些缓存争用/竞争条件，我可能会选择每次生成数据并仅传递对象 ID，或者如果这过于昂贵，我会实施作为任务的一部分，用于存储缓存数据然后清理缓存（findAndModify 以停止竞争条件）的集合。

# html - 带有文本阴影的css中的渐变文本

> ID：15077547
> 
> 赞同：12
> 
> 时间：2013-02-25T22:15:35.630
> 
> 标签：html, css

无论如何使用这种文本渐变方法并且在文本上也有阴影。 [http://css-tricks.com/snippets/css/gradient-text/](http://css-tricks.com/snippets/css/gradient-text/)

当我设置我的阴影时

```
text-shadow: 1px 1px 2px #000; 
```

然后它弄乱了我的文本渐变，因为背景设置为透明。有谁知道针对 webkit 浏览器的解决方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-04-07T10:49:22.683

您可以结合`filter: drop-shadow`CSS 属性来实现这一点。

```
h1 {
  font-size: 72px;
  background: -webkit-linear-gradient(#eee, #333);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(2px 2px #333);
}
```

```
<h1>Example</h1>
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-25T22:38:35.647

**更新**

为您找到了解决方案，唯一的问题是它要求 html 具有属性。

[http://jsfiddle.net/2GgqR/2/](http://jsfiddle.net/2GgqR/2/)

```
h1 {
  font-size: 72px;
  background-image: -webkit-linear-gradient(#eee, #333);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  position:relative;  
}

h1:after {
  background: none;
  content: attr(data-text);
  left: 0;
  top: 0;
  z-index: -1;
  position: absolute;
  text-shadow: 1px 1px 2px #000;
} 
```

原文在这里 :) [http://viget.com/inspire/background-clip-text-shadow-gradients](http://viget.com/inspire/background-clip-text-shadow-gradients)

***来自评论的* **更新链接**[http://jsfiddle.net/2GgqR/5/](http://jsfiddle.net/2GgqR/5/)**

 ***这里我将背景的背景颜色添加到 :after*

```
h1:after {
  background: #f3f3ee;
}

.background{
    background-color: #f3f3ee;
    position: relative;
    z-index: 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T22:21:02.760

我可能真的对此表示反对，但我相信这样做的唯一方法是在后面放置一个重复的元素。这只是一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T01:40:44.620

由于某些浏览器没有获得“剪辑”规则，我需要找到一种仅使用文本阴影创建渐变的方法。所以我设法重复这个词并使用 color transparent 。在这里检查结果

HTML

```
<h2 class="points">
  <p><span class="text">REPEAT THIS WORD</span><span class="gradient">REPEAT THIS WORD</span><span class="gradient">REPEAT THIS WORD</span></p>
</h2> 
```

CSS

```
html, body {
  background: black;
  font-size: 16px;
  height: 100%;
  width: 100%;
}

.points {
  font-size: 2.8em;
  padding: 0 0.2em 0 1em;
  display: flex;
  justify-content: center;
  align-content: center;
  width: 100%;
}
.points p {
  position: relative;
}
.points span {
  width: 100%;
}
.points span.text {
  color: white;
  position: relative;
  text-shadow: -2px 2px 0 #882b06, 2px 2px 0 #882b06, 2px -2px 0 #882b06, -2px -2px 0 #882b06;
}
.points span.gradient {
  color: transparent;
  position: absolute;
}
.points span:nth-child(2), .points span:last-child {
  color: transparent;
  left: 0;
  overflow: hidden;
  right: 0;
  width: 100%;
  white-space: nowrap;
}
.points span:nth-child(2) {
  bottom: 0;
  text-shadow: 0 -0.33em 2px #fbe8a1;
  height: 0.8em;
}
.points span:last-child {
  bottom: 0.2em;
  text-shadow: 0 -0.55em 3px #ecb752;
  height: 0.4em;
} 
```

[https://codepen.io/kengreg/pen/JjrwLyL](https://codepen.io/kengreg/pen/JjrwLyL)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-22T07:53:41.340

我想出了一个不使用`filter`and的解决方案`z-index`。如果您有背景或前景，则可以使用它：

```
h1 {
    position: relative;
}

h1::after {
    background-image: linear-gradient(#f00, #fcc);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    content: attr(data-content);
    position: absolute;
    top: 0;
    left: 0;
}

h1::before {
    text-shadow: #000 1px 1px 2px;
    content: attr(data-content);
    position: absolute;
    top: 0;
    left: 0;
} 
```

效果：[https ://jsfiddle.net/m9dtf6po/2/](https://jsfiddle.net/m9dtf6po/2/)

当然，由于我使用的是`::before`and `::after`，所以需要一个属性，但是可以共享该属性。使用的问题`z-index`是：

*   如果图层后面有任何元素，阴影会消失（见[https://jsfiddle.net/m9dtf6po/3/](https://jsfiddle.net/m9dtf6po/3/)）；或者
*   如果图层前面有任何元素，则文本将显示在这些元素的前面（请参阅[https://jsfiddle.net/m9dtf6po/4/](https://jsfiddle.net/m9dtf6po/4/)）。

当我确实有一个背景和一个前景夹在我的文本中时，这就是我遇到的问题，如下图所示： [![在此处输入图像描述](../Images/d39ca4d0eb1942bc37d524597e28c561.png)](https://i.stack.imgur.com/xbMvq.png)

文本`S+`需要位于条形图的顶部，但最重要的是可以有一个框。我实际上找到了这篇文章并尝试了 Karl 的解决方案，但阴影消失在酒吧后面。**

# eclipse - 在远程项目上使用 pydev 时的索引文件搜索？

> ID：15077554
> 
> 赞同：1
> 
> 时间：2013-02-25T22:16:07.937
> 
> 标签：eclipse, pydev

搜索了一个令人作呕的明确答案，但没有找到一个，所以......

我在工作中的正常设置是 pydev 通过 X11 在 Eclipse 上运行。生活是美好的，我可以在大约 5 秒内在我的 4000 个 python 源文件中搜索字符串。我认为必须进行某种索引/缓存。

现在，尝试在我的 OSX 机器上使用 Eclipse 3.7.2 远程工作，我已经安装了 RSE，并且已经完成了“创建远程项目”的技巧。基本功能就在那里。

但是，当我进行搜索 | PyDev 搜索，它以大约 2/秒的速度痛苦地处理文件。这显然是无法使用的。我想也许在第一次通过之后的搜索会更快，但没有快乐。

难道我做错了什么？这似乎是一个非常基本的场景。我该怎么做才能使它可用？

谢谢，

马特

# r - 使用 R 中的 if 语句在双 for 循环中出错

> ID：15077559
> 
> 赞同：1
> 
> 时间：2013-02-25T22:16:40.907
> 
> 标签：r, if-statement, for-loop

我正在逐个单元格地循环遍历矩阵，并且我想将所有小于 1 的值更改为它们的负倒数。这是我目前拥有的循环

```
x <- 1:rowlength
y <- 1:colLength
for (i in x) {
    for (j in y) {
        Cell <- Nmatrix[i,j]
        if (Cell<=1) {Cell = -1/Cell}
    }
} 
```

当我尝试运行代码时，我不断收到以下错误：

```
Error in if (Cell <= 1) { : missing value where TRUE/FALSE needed 
```

我不确定我做错了什么。任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:25:52.297

由于这是 R，因此您不需要循环：

```
set.seed(42)
Nmatrix <- matrix(runif(20, 0, 2), nrow=4)
Nmatrix
          [,1]      [,2]      [,3]      [,4]      [,5]
[1,] 1.8296121 1.2834910 1.3139846 1.8693445 1.9564529
[2,] 1.8741508 1.0381919 1.4101296 0.5108576 0.2349747
[3,] 0.5722791 1.4731766 0.9154836 0.9245856 0.9499942
[4,] 1.6608953 0.2693332 1.4382245 1.8800290 1.1206655 
```

现在来点魔法：

```
Nmatrix[Nmatrix < 1] <- (-1/Nmatrix)[Nmatrix < 1]
Nmatrix
          [,1]      [,2]      [,3]      [,4]      [,5]
[1,]  1.829612  1.283491  1.313985  1.869344  1.956453
[2,]  1.874151  1.038192  1.410130 -1.957492 -4.255777
[3,] -1.747399  1.473177 -1.092319 -1.081566 -1.052638
[4,]  1.660895 -3.712873  1.438225  1.880029  1.120665 
```

# python - 信用卡债务最低还款额的二等分搜索：答案总是遥遥无期

> ID：15077562
> 
> 赞同：-1
> 
> 时间：2013-02-25T22:16:50.247
> 
> 标签：python, bisection

我的代码：

```
balance = 320000
annualInterestRate = 0.2

originalBalance = balance
month = 1
monthly_interest = annualInterestRate / 12
low = originalBalance/12
high = (originalBalance*(1 + monthly_interest)**12)/12
epsilon = 0.01
min_payment = (high + low)/2.0

while min_payment*12 - originalBalance > epsilon:
    while month < 13:
        balance = (originalBalance - min_payment)/10 * (1+ monthly_interest)
        if balance <= 0.00:
            low = min_payment
            min_payment = (high + low)/2.0
        elif balance > 0.00:
            high = min_payment
            min_payment = (high + low)/2.0
        month += 1
print "Lowest payment: " + str(round(min_payment, 2)) 
```

但是，我得到 26666.0，而我实际上应该得到 29157.09。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:20:07.557

你忘记了重置`month`——它只有一次到`13`，然后内部循环再也不会运行了。

```
balance = 320000
annualInterestRate = 0.2

originalBalance = balance
month = 1
monthly_interest = annualInterestRate / 12
low = originalBalance/12
high = (originalBalance*(1 + monthly_interest)**12)/12
epsilon = 0.01
min_payment = (high + low)/2.0

while min_payment*12 - originalBalance > epsilon:
    month = 1          # < -- do this
    while month < 13:
        balance = (originalBalance - min_payment)/10 * (1+ monthly_interest)
        if balance < 0.00:
            low = min_payment
            min_payment = (high + low)/2.0
        elif balance > 0.00:
            high = min_payment
            min_payment = (high + low)/2.0
        month += 1
print "Lowest payment: " + str(round(min_payment, 2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:24:28.473

我想我看到的一个错误是你说`high = (originalBalance*(1 + monthly_interest)**12)/12`的。这样做是将`high`余额乘以一和利息之和。这可以。但是，您将这个数字取为 12 的幂，然后将其除以 12。在您的代码中，`balance = 3000`. 加上百分之二等于 3060。这个数字的 12 次方超过 6.74 e + 41，我不明白这个数字。这个除以 12 仍然是 5.61 e + 40。这个数字太长了，程序会崩溃（或者非常慢）。这必须在其他任何事情可能起作用之前进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T23:42:10.710

我正在做同样的练习，这就是我注意到你的代码的地方：你写道：

```
if balance <= 0.00:
  low = min_payment
  min_payment = (high + low)/2.0 
```

但是，我认为您应该将高值设置为等于 min_payment。如果余额小于零，那么您已经支付了太多费用，因此您的新二分搜索需要找到一个低于您上次 min_payment 猜测的数字。

# asp.net-mvc - 具有多个 MVC 区域的表单身份验证

> ID：15077564
> 
> 赞同：2
> 
> 时间：2013-02-25T22:17:03.310
> 
> 标签：asp.net-mvc, forms-authentication, asp.net-mvc-areas

我有一个简单的任务要完成，我正在创建一个具有两种类型用户的应用程序，`Admins`并且`Users`.

我看了这个：[ASP.NET MVC 3 Areas and multiple authentication in web.config](https://stackoverflow.com/questions/8176703/asp-net-mvc-3-areas-and-multiple-authentication-in-web-config)

它非常接近我需要做的事情。

所以简单的问题是如何在 MVC 站点的不同区域使用 Forms Authentication 有不同的登录方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:43:42.057

正如帖子中解释的那样，在 web.config 中放置安全属性很多并不是最好的[方法我们如何在 ASP.NET MVC 中为整个区域设置授权？](https://stackoverflow.com/questions/2319157/how-can-we-set-authorization-for-a-whole-area-in-asp-net-mvc). 请考虑在控制器级别应用属性，例如

```
[Authorize(Roles = "User, Administrator")] 
```

或者

```
[Authorize(Roles = "User")] 
```

或者

```
[Authorize(Roles = "User, Administrator")] 
```

快乐编码

# c++ - OpenCV C++ 错误 (cvCaptureFromCAM())

> ID：15077567
> 
> 赞同：1
> 
> 时间：2013-02-25T22:17:14.183
> 
> 标签：c++, opencv

我在网上关注 OpenCV 库的教程，实际上在早期阶段就遇到了问题。在“cvCaptureFromCAM(0)”函数的帮助下声明了从网络摄像头捕获图片所需的变量之后。编译后它给了我：错误：'p_capWebcam'没有在这个范围内声明

我已经看到很多“未在此范围内声明”错误的问题，但没有找到解决方案。

谢谢

```
#include <opencv/highgui.h>
#include <opencv/cxcore.h>
#include <opencv/cvaux.h>

#include <stdio.h>
#include <stdlib.h>

int main(int argc, char* argv[]) {

CvSize size640x480 = cvSize(640, 480); 

CvCapture* p_camWebcam;  

IplImage* p_imgOriginal; 
IplImage* p_imgProcessed;

CvMemStorage* p_strStorage; 

CvSeq* p_seqCircles;     

float* p_fltXYReadius;    

int i;                    
char charCheckForEscKey;   

p_camWebcam = cvCaptureFromCAM(0); 

if(p_capWebcam == NULL) {   
printf("error: capture is NULL \n");
getchar();  
return(-1); 
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:18:37.047

> p_ca* **m** *网络摄像头 = cvCaptureFromCAM(0);
> 
> if(p_ca* **p** *网络摄像头 == NULL) {

严重地？

# android - Android MultiSelectListPreference 取消选中不会触发 SharedPreferenceChanged

> ID：15077568
> 
> 赞同：5
> 
> 时间：2013-02-25T22:17:23.873
> 
> 标签：android, events, listener, multiselectlistpreference

我正在使用具有以下属性的[MultiSelectListPreference ..](http://developer.android.com/reference/android/preference/MultiSelectListPreference.html)

```
<MultiSelectListPreference        
 android:key="shop_list"               
 android:entries="@array/shop_titles"
 android:entryValues="@array/shop_values"
     android:title="@string/pref_title_shops"   
     android:dialogTitle="@string/pref_title_shops" 
 android:defaultValue="@array/shop_values"
 android:summary="Choose where you hunt"
 /> 
```

偏好在一个静态的`PreferenceFragment`内部，在一个共同的内部`Activity`。我正在为和上的`SharedPreferenceChanged`事件注册和注销监听器。`onPause``onResume``PreferenceFragment`

代码摘录：

```
public class AgentSettingsActivity extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        getFragmentManager().beginTransaction().replace(android.R.id.content, new SettingsFragment()).commit();
    }

    public static class SettingsFragment extends PreferenceFragment implements OnSharedPreferenceChangeListener
    {
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            Utils.Log("onCreate");

            // Load the preferences from an XML resource
            addPreferencesFromResource(R.xml.pref_general);

        }

        @Override
        public void onResume()
        {
            Utils.Log("onResume");
                    super.onResume();
            try
            {
                Utils.Log("Add pref listeners and try set summary");
               getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);

            }
            catch (Exception e)
            {
                Utils.Log("Pref not found");
            }

        }

        @Override
        public void onPause()
        {
            super.onPause();
            Utils.Log("onPause");

            // Unregister the listener whenever a key changes
            getPreferenceScreen().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);

        }

        @Override
        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key)
        {
            Utils.Log("onPreferenceChange, key : " + key);    
        }
    }

} 
```

当我检查一个选项时，事件每次都会触发，**直到**我开始取消选中它们。然后监听器停止被调用。有什么想法我在这里想念的吗？这对我使用 Fragment / Activity 的方式有影响吗？

注意：我还应该补充一点，我有一个 ListPreference，即使在 MultiSelectListPref 停止正确响应后它仍然可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T12:16:19.227

我正在处理同样的问题。从 SDK 18 开始，一切似乎都可以正常工作，但在休息时，我遇到了和你一样的问题。

我找到了一个似乎对我有用的解决方案：

```
 MultiSelectListPreference multiSelectListPref = (MultiSelectListPreference) findPreference("pref_name");
    if (multiSelectListPref != null) {
        multiSelectListPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
            @Override
            public boolean onPreferenceChange(Preference preference, Object newValue) {
                MultiSelectListPreference mpreference = (MultiSelectListPreference) preference;
                mpreference.setSummary(newValue.toString());
                mpreference.setValues((Set<String>) newValue);
                return true;
            }
        });
    } 
```

也许它对您的情况也有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T11:27:34.093

从 SDK 级别 18 开始，它开始按预期工作。显然，它是（或曾经是）此版本之前的 sdks 中的一个错误。值得注意。

# git - git pull subtree 删除所有内容

> ID：15077570
> 
> 赞同：4
> 
> 时间：2013-02-25T22:17:36.787
> 
> 标签：git, git-subtree

我正在尝试利用 git 中的子树功能，我可以在其中拥有一个引用另一个 repo 的 repo，因此似乎拥有两个 repos 的所有文件。我在[**这里**](http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html)和[**这里**](http://git-scm.com/book/en/Git-Tools-Subtree-Merging)阅读了一些介绍，并尝试关注它们。

所以我在 git hub 中有两个仓库。我这样做

```
git checkout testBranchA
git pull origin testBranchA
git remote add external git@github.com:reharik/repoB
git fetch external
git checkout -b external external/testBranchB
git read-tree --prefix=src/ -u external
git commit -m "added subtree" 
```

所以现在我查看我的文件系统，我看到了来自两个 repos 的所有文件，一切都很好。然后我做

```
git pull -s subtree external testBranchB 
```

似乎两个本地存储库中的所有内容都被删除了。事实上首先它确实

```
removing src/... 
```

在所有文件上，然后它似乎进行了合并，您可以在其中看到所有带有红色和绿色 + 和 - 的文件，然后它确实

```
delete mode 100644 src/... 
```

对于所有文件

所以我不确定我做错了什么，但很明显这是有问题的。

任何帮助，将不胜感激

=== 编辑抱歉，我一直在更改命令，此时我有点担心，但我认为这是我正在使用的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:37:33.607

最后一个`git pull -s subtree ...`命令似乎不正确，因为它没有考虑子树的位置。因为它会尝试在根级别将两棵树粉碎在一起，这可能是文件被删除的原因。

请尝试：

```
git pull -s recursive -X subtree=src/ external testBranchB 
```

# javascript - 带有社交插件和 API 调用的 HTML5 页面的内容安全策略

> ID：15077572
> 
> 赞同：2
> 
> 时间：2013-02-25T22:17:51.900
> 
> 标签：javascript, google-chrome, cross-domain-policy, content-security-policy

建议对具有以下内容的 HTML5 页面使用什么[内容安全策略：](http://www.html5rocks.com/en/tutorials/security/content-security-policy/)

1) Facebook 插件

2) 推特插件

3) 谷歌加一

4) 谷歌翻译

6) 来自 cdn.mywebsite.com

7) 优酷

我收到很多错误，如下所示：

```
The frame requesting access set 'document.domain' to 'facebook.com', but the frame being accessed did not. Both must set 'document.domain' to the same value to allow access. 
```

我正在使用 YouTube 视频 iframe 和许多社交小部件，包括 Pinterest API 等。需要你的帮助。

# c++ - 多种容器和数据类型的模板函数

> ID：15077575
> 
> 赞同：2
> 
> 时间：2013-02-25T22:18:00.830
> 
> 标签：c++, templates, stl, c++11

我想创建一个模板函数，我可以使用不同的容器类型，如向量、双端队列或列表，并且可以使用不同的数据类型（整数、双精度或字符串）调用它，我已经搜索但找不到一个答案，我试过这样做，但我得到了错误：

```
#include <iostream>
#include <vector>
#include <list>
#include <deque>
#include <iterator>
#include <string>

using namespace std;
template <typename C>
void printvec(const C& numbers1)
//void printvec(container C<typename C::valuetype T>)
{
    //C &numbers1;
    for(auto i=0; i < numbers1.size(); ++i)
        cout<<&numbers1<<endl;
    //typename C<A>::iterator itr;
    //for ( itr=numbers1.begin();itr != numbers1.end(); ++itr)
      //  cout<<*itr<<endl;
}

int main()
{
    vector<int> vint{2,4,6,8,9,3};
    vector<double> vdouble{5.8, 6.7, 7.3};
    vector<string> vstring {"alex", "bbb", "cccc"};
    list<int> ls{1,2,3,4,5};
    printvec(vint );
    printvec(vdouble);
    printvec(vstring);
    printvec(ls);
        return 0;
} 
```

那么，请问正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:20:45.390

没有必要为此创建一个函数，标准库已经拥有了你需要的所有工具：

```
 std::copy(vec.begin(),vec.end(),
     std::ostream_iterator(cout,"\n")); 
```

如果您可以使用 C++11，请使用`std::begin(vec)`代替`vec.begin()`和相同的`end`- 正如@AndyProwl 正确指出的那样，它更通用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:34:52.860

其他人指出了为什么应该使用库函数以及为什么要重新发明轮子。如果您想这样做，这就是您应该如何编写它。

容器不是根据抽象基类指定的，而是一个通用接口，它指定语法结构的所需语法和预期语义（这些东西称为概念）。最通用的是[Container](http://en.cppreference.com/w/cpp/concept/Container)，更专业的是[SequenceContainer](http://en.cppreference.com/w/cpp/concept/SequenceContainer)。如果您接受 a`SequenceContainer`作为模板参数，则必须将使用模板参数的代码约束到这些要求。在你的情况下：

```
template<typename SequenceContainer>
void print(const SequenceContainer& seq)
{
  // being able to use range-for loops 
  // is a consequence of being a SequenceContainer
  for(auto& i : seq) {
    std::cout << i << " ";
  }
  std::cout << std::endl;

  // alternatively
  using std::begin; // enable ADL fallback for arrays
  using std::end;
  for(auto it = begin(seq); it != end(seq); ++it) {
    std::cout << *it << " ";
  }
  std::cout << std::endl;
} 
```

编写好的模板代码并不适合胆小的人，因此您可能需要考虑先更好地了解基本的 C++。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T22:27:48.600

如果您*确实*需要编写自己的函数来迭代通用容器，那么这可能是适用于任何标准容器的最简单方法：

```
template <typename C>
void print(const C& c)
{
    for (auto const& e : c) 
    { 
        cout << e << endl; 
    }
} 
```

但是，正如[us2012](https://stackoverflow.com/users/1865077/us2012)正确指出的那样，没有必要重新发明轮子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:23:47.630

这正是标准库具有[for_each](http://en.cppreference.com/w/cpp/algorithm/for_each)等算法的原因。您传递一个开始和结束迭代器而不是容器本身。作为第三个参数传递的模板化函数负责这项工作。

# java - 返回日期或日历字段

> ID：15077577
> 
> 赞同：3
> 
> 时间：2013-02-25T22:18:07.207
> 
> 标签：java, date, gwt

Netbeans 抱怨此代码出现在[IDEA 代码检查列表](http://www.jetbrains.com/idea/documentation/inspections.jsp)中。

```
 public Date getStartDate()
 {
    return theStartDate;
 } 
```

IDEA 网站 说：

> 此检查报告任何从方法返回 java.lang.Date 或 java.lang.Calendar 字段的尝试。由于 Date 或 Calendar 通常被视为不可变值，但实际上是可变的，因此此构造可能会导致对象的状态被意外修改。虽然出于性能原因偶尔有用，但这种构造本质上容易出错。

否则我将如何返回一个`Date`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T22:21:38.923

您很可能应该返回有问题的值的副本，而不是您当前的对象，以避免意外修改

最简单的可能是
`return new Date(theStartDate.getTime());`

这是因为 java.util.Date 是一个可变对象，您希望避免调用者错误地或恶意地执行以下操作出现问题：

```
yourObject.getStartDate().setTime(0); 
```

如果您进行上述更改，则上述声明将变得无害。

为什么是复制构造函数而不是克隆方法？请参阅此处： [java.util.Date 克隆或复制以不公开内部引用](https://stackoverflow.com/questions/7082553/java-util-date-clone-or-copy-to-not-expose-internal-reference)

请注意，这将对每次调用该方法时创建一个新对象造成性能损失，因此请谨慎使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:22:26.630

`return new Date(theStartDate.getTime());`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T22:22:44.227

IDEA 只是说 Date 对象通常用作不可变对象。合理的解决方案是返回一个新的 Date 对象，在它的构造函数中包含 theStartDate.getTime() 。这保持了原始 Date 对象的不变性:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T22:21:59.393

您可以将日期作为不可变的 long ( `Date.getTime()`) 返回。这确保了调用者不会更改日期。

另一种选择是将日期作为 long 并返回一个新日期`return new Date(dateAsLong)`。这将保护原始日期，同时仍返回 Date 对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T22:22:47.743

也许您可以返回 代表的`long`毫秒值`Date`：

```
public long getStartDateMilliseconds()
{
    return theStartDate.getTime();
} 
```

返回`long`值仍然允许您返回`Date`信息，并防止调用者修改返回的`Date`. 然后调用者可以重新构造`Date`：

```
Date theDate = new Date(myObject.getStartDateMilliseconds()); 
```

那应该通过 IntelliJ 检查。

# objective-c - 在 NSDate 上更改月份中的日期

> ID：15077578
> 
> 赞同：1
> 
> 时间：2013-02-25T22:18:10.763
> 
> 标签：objective-c, cocoa-touch, nsdate

下面的代码从日期中添加或减去一个月。在该操作之后，我想明确地将月份中的日期设置为 15。我该如何实现呢？

```
NSDateComponents* offsetComponents = [[NSDateComponents alloc]init];
int magnitude = isLeft ? 1 : -1;
[offsetComponents setMonth:magnitude];
NSCalendar* calendar1 = [NSCalendar currentCalendar];
updatedDate = [calendar1 dateByAddingComponents:offsetComponents toDate:dateRef options:0]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T22:37:04.790

月份的设置无关紧要，单独操作。获取日期的组成部分，更改日期，然后重新组合日期。您可以在更改月份之前或之后执行此操作。

```
NSDate * today = [NSDate date];
NSCalendar * cal = [NSCalendar currentCalendar];

NSDateComponents * offsetComponents = [NSDateComponents new];
[offsetComponents setMonth:-1];

// Either

NSDate * sameDayLastMonth = [cal dateByAddingComponents:offsetComponents
                                                 toDate:today
                                                options:0];

NSDateComponents * lastMonthComps = [cal components:NSUIntegerMax
                                           fromDate:sameDayLastMonth];
[lastMonthComps setDay:15];

NSDate * fifteenthOfLastMonth = [cal dateFromComponents:lastMonthComps];

// or

NSDateComponents * todayComps = [cal components:NSUIntegerMax
                                       fromDate:today];
[todayComps setDay:15];

NSDate * fifteenth = [cal dateFromComponents:todayComps];

NSDate * fifteenthOfLastMonth = [cal dateByAddingComponents:offsetComponents
                                                     toDate:fifteenth
                                                    options:0]; 
```

* * *

或者，更容易（呃，我应该首先这样做）：

```
NSDate * today = [NSDate date];
NSCalendar * cal = [NSCalendar currentCalendar];

NSInteger offset = arc4random_uniform(2) ? -1 : 1;

NSDateComponents * comps = [cal components:NSUIntegerMax
                                  fromDate:today];
[comps setDay:15];
[comps setMonth:[comps month] + offset];

NSDate * newDate = [cal dateFromComponents:comps]; 
```

# file-upload - 如何向 Blueimp 文件上传添加额外信息

> ID：15077583
> 
> 赞同：0
> 
> 时间：2013-02-25T22:18:30.010
> 
> 标签：file-upload, callback, blueimp

我正在使用此代码从目录加载现有图像，然后还希望添加上传者的用户名：

```
// Load existing files:
$.ajax({
    url: $('#fileupload').fileupload('option', 'url'),
    dataType: 'json',
    context: $('#fileupload')[0]
}).done(function (result) {
    $.each(result.files, function (index, file) {
        $.ajax({
            url: "include/fileinfo.php?mode=getname",
            success: function(data) {
                file.user = data;
            }   
        });
    });
    $(this).fileupload('option', 'done').call(this, null, {result: result});
}); 
```

这样做是转到我的数据库并从数据库中加载上传者的用户名并将其添加到结果对象中。如果我 console.log(result.files) 我得到这个：

```
Array[5]
0: Object
delete_type: "DELETE"
delete_url: "/fileupload.php?file=Desert.jpg"
name: "Desert.jpg"
size: 845941
url: "http://mydomain.com/files/963/Desert.jpg"
user: "Demo.User"
... 
```

其他文件依此类推-看起来正确。（注意添加了“用户”元素。）

所以我想在我的模板表中显示 file.user 信息。我添加了一个如下所示的新行：

```
<td class="uname"><span>{%=file.user%}</span></td> 
```

没有任何显示。我的逻辑有什么问题？某处的代码是否也需要更改？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:08:54.060

我发现这种方法行不通。相反，我在此构造之前执行 ajax 调用以从数据库中加载 id。然后我只使用数组值。

# shell - 打开vim并在打开时运行脚本

> ID：15077585
> 
> 赞同：1
> 
> 时间：2013-02-25T22:18:35.477
> 
> 标签：shell, vim

我想让一个脚本用 vim 打开一个新文件，并在文件打开时（并在加载所有 .vimrc 配置和插件等之后）运行一个简单的 vimscript 命令。实际上，只有一个命令。

我不需要维护客户端-服务器连接或任何东西......打开时只需一个一次性脚本。

我试过使用自定义 vimrc `-u`，但是我不确定如何加载默认插件。

谢谢！

编辑：任何类型的命令都可以工作...vim 脚本或正常模式命令，因为我很乐意将我的脚本组合在一起以与它们中的任何一个一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:33:22.983

您可以通过在命令行中添加以下前缀来执行 vim 命令`+`：

```
vim '+echo "hello"' file.txt 
```

如果您需要做一些更复杂的事情，您可能希望在`vimrc`文件或其他配置中定义一个函数，并使用`:call`命令来运行该函数：

```
vim '+call MyFunction()' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:34:34.397

您没有清楚地说明要对文件执行哪种“命令”。您可以查看一些选项。

```
+{command}   //e.g vim "+1,5d" file will auto-remove first 5 lines
-c {command} //e.g vim -c "1,5d" file will auto-remove first 5 lines
-s {script} // same as you typed those characters in file, the file could be generatd by -w
-S {file}   //same as source, then you don't have to mess up with your .vimrc 
```

# apache-flex - 从 updateDisplayList 访问数据提供者

> ID：15077588
> 
> 赞同：0
> 
> 时间：2013-02-25T22:18:45.310
> 
> 标签：apache-flex, dataprovider

如何在 itemRenderer 的 updateDisplayList 方法中访问 datagrid 的 dataProvider？

我尝试了以下代码。我收到空引用错误，这似乎也很合乎逻辑。由于我们只是将所有者作为 Datagrid 变量而没有与“this”对象的任何连接，因此它的 dataProvider 属性将仅为 null。以下是我在 updateDisplayList 方法中与 dataProvider 访问相关的代码

```
var owner:DataGrid;
var duration:Number=owner.dataProvider.getItemAt(owner.selectedIndex).duration;
for(var i:int=1;i<duration;i++)
{
    graphics.moveTo(i*w/duration, h);
    graphics.lineTo(i*w/duration, 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:31:07.330

我认为您可以尝试（所有者为 DataGrid）.dataProvider

只需将其类型转换为您需要的内容。

# xcode - 如何创建一个基于约束的视图，在 iPhone 5 和 iPhone 4 之间调整大小，与锚操作相当？

> ID：15077590
> 
> 赞同：22
> 
> 时间：2013-02-25T22:19:05.260
> 
> 标签：xcode, interface-builder, nslayoutconstraint

那种经典的 Springs 和 Struts，又名“Anchor and Align”或“Autosizing Masks”是我理解的唯一一种调整大小管理。然而，在 XCode 4.6 中，使用 iOS 6 中引入的约束的“自动布局”是默认设置，它使某些简单的事情变得更难，同时让整个世界的新安排成为可能，一旦你学会了如何。 *（需要明确的是，一些用户可能只关心在不与自动布局战斗的情况下获得一个简单的视图，因此马特早期提出了一种解决方法，即关闭自动布局，如下所示）*

iOS 6 Layout Constraints，Interface Builder系统的编辑约束，我不懂。

![在此处输入图像描述](../Images/801a2aaa3c09bff7298a3d9786505800.png)

XCode Interface Builder 会自动创建约束（例如在视图的边缘），它似乎以我理解的方式运行。

我不明白为什么在此处显示的 .xib 中以及在此处可用[，](https://docs.google.com/file/d/0B07SrKpE8ErmYWM2dGFtOU9DVms/edit?usp=sharing)为什么我不能让绿色和洋红色区域保持不变的边界（它们之间的白色区域）不会变厚也不会变薄，无论视图大小发生什么变化。

这意味着我需要绿色区域不要垂直调整大小而只调整水平大小，但它坚持将自己锚定到表单的底部，虽然再次从新的空白笔尖开始，但会恢复界面构建器，因此它会注意到相邻的再次绿色和洋红色视图，一旦界面构建器变得“愚蠢”，它坚持只根据其与父视图底部边缘的距离定义绿色视图的底部边缘，并且不会（对于任何数量的摆弄）否则使用仅仅是拖放操作。我还尝试了 Pin 命令，但没有找到有效的 pin 命令。

与界面构建器菜单或拖放进行任何斗争似乎都不足以让它摆脱其中一个限制。我不知道我应该做什么。删除约束？如何？据我所知，无论是从 IB Objects 窗格还是从 Utilities -> Size 检查器，都无法删除约束。有一个删除选项，但是当您单击约束区域中的“齿轮”图标按钮时，它在出现的下拉菜单中显示为灰色。

理想情况下，如果绿色区域随着视图变宽而调整大小，而不是随着它变高或变短，我会喜欢它。我认为这在其他所有工具中都很明显，但在 XCode+Autolayout 中，它要么根本不调整大小，要么在所有四个方向上调整大小。我无法删除或移除正在做我不想做的事情的约束。您是否必须对另一个视图内的每个视图有四个约束？

（更新 1：您不能删除任何会导致不明确或未指定布局的约束。）

（更新 2：有时如果 uiview 窗格不会对齐到同级，删除该 uiview 并再次尝试将允许它自然地“对齐”到同级，并且约束将相对于同级视图对象而不是父母。）

（更新 3：Matt 删除了他的解决方法，我在下面复制了它。）

对于那些一开始就不想使用 Autolayout 而只想要旧弹簧和支柱的人的解决方法：

## 第 1 步：关闭自动布局：

![在此处输入图像描述](../Images/1bff7bb12539cdda2971134831b16b4d.png)

## 第 2 步：选择正确的自动调整大小蒙版：

![在此处输入图像描述](../Images/c6f765dcfbabd1fad79941df78ef646c.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T20:46:44.380

在界面构建器中编辑约束的关键是一旦将任何内容添加到视图中，就永远不要拖放任何内容。通过编辑约束来移动和排列事物。使用固定菜单创建新的约束。一旦添加了足够的新约束以明确替换自动添加的系统约束，您就可以删除不需要的约束。

在您的情况下，我创建了以下约束：

![在此处输入图像描述](../Images/c767fc33ab9e837f90ab5ab4301c779f.png)

我将您的视图重命名为“绿色”和“洋红色”，以使文档导航器中的内容更清晰。我所做的是：

*   固定视图之间的垂直间距
*   将每个视图固定到左侧和右侧
*   将顶视图固定到设定的高度和距父视图顶部的设定距离
*   将底部视图的底部固定到超级视图的底部。

我认为这为您提供了您想要的布局。如果您想阅读更多内容，我已经在[这里](http://commandshift.co.uk/blog/2013/01/18/autolayout-in-interface-builder/)写了非常详细的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:38:25.357

如果您不想关闭新的 iOS6 自动布局模式，这就是答案。

如果顶层视图和所有子级视图的视图模式是 Scale to Fill，则在这种情况下使用锚模式“小于或等于”，因为您无法删除此约束。这两个彩色视图没有存储在笔尖中，因为它们具有大小（宽度、高度）或位置（左上角），而是存储有表示其布局的约束。布局“小于或等于”而不是“等于”可以通过单击上面的方块来访问，然后出现四个约束线，选择从您选择的控件的下边缘到底部的底部的约束线视图，并将类型从等于更改为小于或等于。

![在此处输入图像描述](../Images/a8225c5381e0a32a1da47ffaffa5cdff.png)

如果视图模式不是 Scale to fill，则需要进行其他约束更改。这种多面设计比旧的“弹簧和支柱”更灵活，但学习起来并不那么简单。

您可以使用的更明显的模式是在两个对象之间获得约束。为什么这如此困难（有时我可以做到，有时我不能）我仍然不知道。

这是一个示例，当我能够让约束出现在两个对象之间而不是从该对象到其父视图时，但是在这种情况下，我是否能够始终让 Interface Builder 进行合作将是一种更直观的方式创建顶部正方形未锚定到整个视图高度的情况：

![在此处输入图像描述](../Images/bbd7e049a1390188929524622efb1272.png)

如果上面的颜色视图有一个锚点到它下面的视图，这绝对意味着反向约束不能针对同一个视图，否则就会存在歧义或“循环推理”的情况。因此，我们可以让 A 依赖于 B，但不能让 B 同时依赖于 A。所以在这种情况下，约束被切换为依赖于视图的绝对高度或宽度。在我发现的这种特殊情况下，似乎需要大量的试验和错误来重新创建以前可以非常直观地完成的事情，然后再进行改进。

最后，我发现当您最终遇到额外的约束时，上面的说明似乎不起作用，而当您最不期望它们时，它们会神奇地添加。非常巧妙地，您应该看到两行而不是一行，如下所示：

![在此处输入图像描述](../Images/7bb2d7f53e6371bfb040446adc8e0b6c.png)

只需将约束从等于更改为小于或等于，我就可以让 Interface Builder 继续添加越来越多的重复约束。我相信这是 XCode 4.6 中界面构建器中的一个错误，并且由于布局约束是 CococaTouch 中相对较新的部分，我并不惊讶界面构建器支持在您拖动和移动项目时自动创建约束，这是错误的。

# xml - 使用 groovy 遍历每个 xml 节点，打印每个节点

> ID：15077592
> 
> 赞同：8
> 
> 时间：2013-02-25T22:19:13.123
> 
> 标签：xml, map, groovy

我有一个非常简单（我认为）这样的 xml 文件......

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>

<Things>
<thing indexNum='1'>
  <a>123</a>
  <b>456</b>
  <c>789</c>
</thing>
<thing indexNum='2'>
  <a>123</a>
  <b>456</b>
  <c>789</c>
</thing>
</Things> 
```

我面临的问题是，我不能简单地用这段代码分别访问每个节点......它正在打印所有的东西，而我真正想做的是将每个节点收集到一个地图中，然后询问/transform 地图中的一些键/值对并替换它们（我知道，在路上，我知道..）

这是我可怕的代码......有人可以让我朝着正确的方向前进吗？

```
def counter = 0

Things.thing.each { tag ->
  counter++
  println "\n--------------------------------  $counter  ------------------------------------"

  Things.thing.children().each { tags ->
    println "$counter${tags.name()}: $tags"
    return counter
  }
  println "\n$counter things processed...\n"
} 
```

在地图内部操作它会更容易吗？（我首先用地图生成了这个 xml，认为会有一些简单的方法来处理 XML ......在闲逛了几天并且基本上无处可去之后，我开始怀疑）

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T22:56:55.147

您不断获取内部节点的原因是因为您错误地迭代了外部列表两次。内部循环应该只迭代`tag`：

```
doc = new XmlSlurper().parse("things.xml")
doc.thing.each { thing ->
  println "thing index: ${thing.@indexNum}"
  thing.children().each { tag ->
    println "  ${tag.name()}: ${tag.text()}"
  }
} 
```

输出：

```
thing index: 1
  a: 123
  b: 456
  c: 789
thing index: 2
  a: 123
  b: 456
  c: 789 
```

# c# - 使用随机数填充动态创建的控件

> ID：15077593
> 
> 赞同：1
> 
> 时间：2013-02-25T22:19:13.590
> 
> 标签：c#, asp.net

好的。几天前，我问了一个问题，如何在不使用数组的情况下生成 100、1000、10.000 等随机数，我的问题被删除了，因为答案可能并不那么明显。我通过简单的解决方案得到了这个，但现在我遇到了另一个问题。我在这里尝试的是用不同的随机数填充每个动态创建的标签。我不知道为什么每 10 行总是得到相同的数字。这是我正在尝试工作的代码：

```
protected void btnExample1Random_Click(object sender, EventArgs e)
{
    //Making the controls visible
    this.Master.FindControl("Div1").Visible = true;        

    //Generating the random numbers
    for (int i = 0; i < 10; i++)
    {
        Label randomTask = new Label();
        Label emptyTask = new Label();
        TextBox userInputTextBox = new TextBox();
        Random rnd = new Random();

        int caseInt = rnd.Next(1, 4), myNum = 0;
        switch (caseInt)
        {
            case 1:
                caseInt = 100;
                myNum = rnd.Next(1, 100);
                break;
            case 2:
                caseInt = 1000;
                myNum = rnd.Next(1, 1000);
                break;
            case 3:
                caseInt = 10000;
                myNum = rnd.Next(1, 10000);
                break;
        }

        //Forming the controls
        randomTask.ID = "lbl" + i.ToString();
        randomTask.Text = caseInt.ToString() + " - " + myNum.ToString() + " ";
        userInputTextBox.ID = "box" + i.ToString();
        emptyTask.ID = "check" + i.ToString();

        //Adding the controls into the placeholder
        phTutorijal1.Controls.Add(randomTask);
        phTutorijal1.Controls.Add(userInputTextBox);
        phTutorijal1.Controls.Add(emptyTask);
        phTutorijal1.Controls.Add(new LiteralControl("<br />"));
    }

    //Separating the next created controls into new line
    phTutorijal1.Controls.Add(new LiteralControl("<br />"));
} 
```

这段代码中有一个错误，我找不到它。生成到占位符中的每 10 行具有相同的数字。我在这里错过了什么？

**更新：** Michael Liu 发现了我的错误：我需要将`Random rnd = new Random();`for 循环放在外面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:28:24.273

您得到相同的数字，因为您正在循环中创建随机实例。因此，它将使用从时间派生的相同种子进行初始化。您只需要在循环之外声明它：

```
Random rnd = new Random();
for (int i = 0; i < 10; i++)
{
    int caseInt = rnd.Next(1, 4), myNum = 0; 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/system.random.aspx)：

> 随机数生成从种子值开始。如果重复使用相同的种子，则会生成相同的数字序列。...

# node.js - Node.js：从 CLI 执行文件

> ID：15077595
> 
> 赞同：1
> 
> 时间：2013-02-25T22:19:32.630
> 
> 标签：node.js, command-line-interface

使用 Linux，我可以运行带有`node file.js`. 是否可以`file.js`在使用 进入 Node CLI 后运行`node`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:38:58.187

**编辑：**这实际上可以通过 REPL 函数实现，特别是`.load`. 这会将脚本加载到当前终端，允许终端输入进行调试而不是恢复标准输入。

REPL 命令可以使用`.help`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:25:58.927

你真的不能这样做。

您可以做的是使用`require`，并且您可以使您的文件的行为不同，无论它是独立运行还是由 使用`require`，这几乎可以满足您的需求。

从 CLI：

```
mod = require("my_module);
mod.my_function(); 
```

要确定您是否在独立运行，请使用如下测试：`require.main === module`

所以 file.js 变成：

```
function my_function() {
  ...
}

exports.my_function = my_function;

if (require.main === module) {
  // I'm running standalone
  my_function();
} 
```

# javascript - jquery作为facebook的日期之间的比较

> ID：15077600
> 
> 赞同：0
> 
> 时间：2013-02-25T22:19:53.707
> 
> 标签：javascript, jquery

如何像 facebook 那样比较日期之间的时间/日期？请参阅附图以了解我的要求。有没有使用jquery的解决方案？

![在此处输入图像描述](../Images/a0905ab16566eea6d2be22de4a597d8b.png)

我尝试了以下 js 代码，但我的代码中没有输出。我该怎么办？

**演示：http:** [//jsfiddle.net/U9NV8/](http://jsfiddle.net/U9NV8/)

```
function mydiff(date1,date2,interval) {
    var second=1000, minute=second*60, hour=minute*60, day=hour*24, week=day*7;
    date1 = new Date(date1);
    date2 = new Date(date2);
    var timediff = date2 - date1;
    if (isNaN(timediff)) return NaN;
    switch (interval) {
        case "years": return date2.getFullYear() - date1.getFullYear();
        case "months": return (
            ( date2.getFullYear() * 12 + date2.getMonth() )
            -
            ( date1.getFullYear() * 12 + date1.getMonth() )
        );
        case "weeks"  : return Math.floor(timediff / week);
        case "days"   : return Math.floor(timediff / day); 
        case "hours"  : return Math.floor(timediff / hour); 
        case "minutes": return Math.floor(timediff / minute);
        case "seconds": return Math.floor(timediff / second);
        default: return undefined;
    }
}
alert(mydiff('2010-01-25','2010-02-20',1)) 
```

# google-apps-script - 谷歌应用脚 本永久删除旧文件并保留最后 100 个文件

> ID：15077601
> 
> 赞同：0
> 
> 时间：2013-02-25T22:19:56.887
> 
> 标签：google-apps-script, google-drive-api

我在我的根 google Drive 中创建了一个包含视频文件 (.avi) 的文件夹。当文件总数超过100个文件时，我需要编写一个谷歌应用程序脚本来永久删除旧视频文件吗？即删除除最后（较新）100 个文件之外的所有视频文件。

每个文件的名称都与创建此文件的时间有关，例如：2013-02-25__20-29-45-01.avi

2013-02-25__20-24-49-09.avi

2013-02-25__18-26-24-08.avi

……

所以我认为脚本应该首先按字母顺序列出这些文件，以新文件开头并以旧文件结尾，然后保留前 100 个文件并永久删除所有其他文件。我知道如何在 bash 脚本中执行此操作，但在我认为他们使用 javascript (.gs) 的谷歌驱动器中不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:29:50.380

正如我在评论中所说，你提到的脚本与你想要的相差不远......但我承认你的情况有点复杂所以让我们说这将是政治的另一个例外;-)

也就是说，我没有彻底测试这段代码，所以它可能需要一些调整。我在整个脚本中留下了一些注释日志来测试中间结果，不要犹豫使用它们。另外，考虑更新邮件地址，不要忘记`setTrashed`可以手动反转;-)（在尝试新代码时更好）

**编辑：**我今天早上花了一些时间来测试脚本，它有几个“近似值”；-) 这是一个运行良好的“干净”版本

```
function DeleteMyOldAvi() {
    var pageSize = 200;
    var files = null;
    var token = null;
    var i = null;
    var totalFiles = []
    var toDelete = []
    Logger.clear()

    do {
    var result = DocsList.getAllFilesForPaging(pageSize, token);
    var files = result.getFiles()
    var token = result.getToken();
        for(n=0;n<files.length;++n){
            if(files[n].getName().toLowerCase().match('.avi')=='.avi'){
              totalFiles.push([files[n].getName(),files[n].getDateCreated().getTime(),files[n].getId()]);// store name, Date created in mSec, ID in a subarray
//            Logger.log(files[n].getName()+' created on '+Utilities.formatDate(files[n].getDateCreated(), 'GMT','MMM-dd-yyyy'))
            }
          }    
     } while (files.length == pageSize);// continue until job is done

     totalFiles.sort(function(x,y){ // sort array on milliseconds date created (numeric/descending)
                var xp = x[1];
                var yp = y[1];
                return yp-xp ;
                 });
//     Logger.log(totalFiles.length)

       if(totalFiles.length>100){

        for(nn=totalFiles.length-1;nn>=100;nn--){
          toDelete.push(totalFiles[nn]) ;// store the files to delete
           }
//       Logger.log(toDelete)

        for(n=0;n<toDelete.length;++n){
          var file = toDelete[n]
          DocsList.getFileById(file[2]).setTrashed(true);// move to trash each file that is in the toDelete array
          Logger.log(file[0]+' was deleted');// log the file name to create mail message
          }
          MailApp.sendEmail('myMail@gmail.com', 'Script AUTODELETE report', Logger.getLog());// send yourself a mail
       }else{
          MailApp.sendEmail('myMail@gmail.com', 'Script AUTODELETE report', 'No file deleted');// send yourself a mail
       }
 } 
```

# tortoisesvn - 如何在 Tortoise svn 中检查工作副本

> ID：15077604
> 
> 赞同：0
> 
> 时间：2013-02-25T22:20:08.447
> 
> 标签：tortoisesvn

我在从主干切换到分支时感到困惑。如何在切换期间在 svn 中检查我当前的工作副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:00:51.880

使用 TortoiseSVN，您可以在文件属性中查看您在存储库中的下落。如果您右键单击该文件，选择属性然后查看 Subversion 选项卡，第一个条目将是 URL。这将显示如下：

```
path_to_repository/trunk/filename 
```

或者

```
path_to_repository/branches/branch_name/filename 
```

如果您要提交该文件，URL 将被更新。在第一个示例中，您将在主干中工作，在第二个示例中，您将在分支中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:52:52.523

如果您的问题可以解密为

“我想知道，当时我的 WC 链接到了存储库的哪个部分”

你必须使用`svn info`命令，URL参数

```
>svn info
...
URL: http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk
... 
```

# php - 使用 mysql 数据源流式传输无限视频队列的架构

> ID：15077608
> 
> 赞同：0
> 
> 时间：2013-02-25T22:20:17.047
> 
> 标签：php, web-services, video, streaming, video-streaming

现在我正在构建一个网络界面。它应该类似于媒体控制系统。在这个界面中，用户可以从coverflow'ish 风格中选择一些视频并将视频放入队列中。队列像时间线一样可视化。这个界面是基于网络的，使用 TYPO3 FLOW 制作的。所以我得到了我的数据库数据来播放/流式传输。

我试图弄清楚如何流式传输我选择的数据。我更喜欢基于网络的解决方案，但我对一切都持开放态度。

谁能给我一个提示，哪种技术最适合？这就是我需要的：

*   播放列表/队列存储在数据库中（不是视频本身，而是元数据和文件 URL）
*   人们可以通过网络界面将项目添加到队列中（已经实现）
*   如果队列/播放列表为空，我想播放一些随机视频
*   如果有人将视频添加到播放列表/队列中，则该视频需要在给定时间播放（如果队列为空，则通常为 now()+60sec，endtime last clip +x 如果不​​是）
*   如果我在队列中开始播放视频时打开流，则视频应该在那个时候开始

所以我需要在一个无限循环中动态地流式传输视频。我很想有一个基于网络的解决方案。就像 node.js 和 vidStreamer.js 一样，但我还不熟悉它。是否可以根据 mysql 输入动态播放内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T09:09:12.937

我会用 Javascript 做大部分客户端。导出元数据并预加载隐藏在视图中的视频，然后根据需要启动。使用 HTML5 视频，您可以轻松访问视频和播放器属性，从而获得正确的时间。

# java - Java 资源，返回空指针

> ID：15077618
> 
> 赞同：3
> 
> 时间：2013-02-25T22:20:53.373
> 
> 标签：java, resources

我在我使用的 Eclipse 中的资源文件夹中有一个图像，问题是我不知道如何包含它，绝对路径很长并且 getResource 返回一个空指针。我搜索了谷歌和 SO，并尝试了通常的解决方案，但无济于事。资源文件夹在我的构建路径中，我从中运行代码的类在构建路径中，但以下两个都返回 null。

```
System.out.println(getClass().getResource("data.txt"));
System.out.println(getClass().getResource("/resources/data.txt")); 
```

现在尝试：

```
System.out.println(getClass().getResource("001.txt")); 
```

仍然返回 null。

```
System.out.println(getClass().getResource("/001.txt")); 
```

也为空。

右键单击文件并找到其相对于工作区的路径（右键单击文件、属性、路径）

```
System.out.println(getClass().getResource("/ovinger/resources/sokoban_levels/001.txt")); 
```

也为空

这是工作区和资源文件夹的图像。代码是从“TestSokoban.java”运行的， ![构建路径](../Images/b1bf8395419fdc31fbf729f15983966d.png) ![工作区](../Images/a3947d9d824a01abac35378cb66006ba.png) 我什至担心eclipse没有权限搜索我的桌面，以管理员身份运行，仍然是同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:33:56.823

没有什么比通过运行找到相对路径的根目录更容易的了`System.out.println(getClass().getResource("."));`。然后修改路径以正确适应相对路径。顺便说一句，它应该是类所在的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:28:14.033

`getClass().getResource()`从类路径读取，而不是文件系统路径。因此，您应该使用类路径根目录中的包/资源表示法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:35:50.450

请记住，如果您用于项目，eclipse 将执行`bin`默认情况下位于文件夹或文件夹中的编译代码。这意味着您必须构建项目。`target``maven`

执行构建后，查看`bin`文件夹并查找文件。那是您必须加载的路径。

假设您这样做了，并且资源以标准方式结束，`classpath root`那么标准方式是：

```
ClassLoader.getSystemResourceAsStream("file.txt"); 
```

但是，如果您仍然遇到问题，请尝试：

```
Thread.currentThread().getContextClassLoader().getResourceAsStream("file.txt"); 
```

如果您`java class`在生成中执行，后一种形式将对您有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T22:24:56.023

您不会使用 BufferedReader 并将文件读入字符串吗？

# ios - 使用安全框架编写安全传输级别

> ID：15077621
> 
> 赞同：1
> 
> 时间：2013-02-25T22:21:04.357
> 
> 标签：ios, cryptography, transport-security, security-framework

我开发了安全敏感的应用程序。我必须使用基于[TEA](http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm)的算法来加密/解密数据以与服务器通信并遵循服务器协议。我使用[AsyncSocket](http://cocoadev.com/wiki/AsyncSocket)进行使用`CFNetwork`API 的传输级通信。我注意到`TEA`算法不是很安全，很容易被黑客入侵。此外，`AsyncSocket`图书馆没有使用 Apple 的[安全框架](http://developer.apple.com/library/mac/#documentation/security/Reference/SecurityFrameworkReference/_index.html)任何地方。我计划重写传输层并重新定义客户端-服务器安全协议。我一直在研究应该使用什么样的安全算法来保护数据，这种算法对性能没有影响或影响最小并且难以破解。此外，我正在浏览安全框架，但找不到任何使用该框架实现传输层的示例。有人可以帮助我吗？我应该遵循哪些内容来编写安全传输层？*我可以针对我的应用程序检查哪些安全措施？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:13:46.473

正如@CodesInChaos 所指出的，您应该为此使用 TLS。您绝对不应该设计或实现新的传输协议。

CFNetwork 支持 TLS 的事实并不意味着您正在使用它。你需要积极地使用它。您的服务器需要客户端信任的证书，并且需要协商 TLS 会话。一般来说，如果您只使用 HTTPS 和标准`NSURLConnection`例程，那么您将免费获得所需的大部分内容。但是，如果您开始手动构建它，则`CFNetwork`需要确保正确配置它。我的建议是尽可能使用 HTTPS。它很简单，可以解决各种各样的问题。

也就是说，仅仅因为传输是安全的并不意味着您的应用程序“足够安全”。特别是，您的服务器仍然需要能够处理通过安全传输进行通信的恶意客户端。您需要正确验证用户身份，并且需要优雅地处理恶意数据。当数据到达您的服务器时，您需要安全地存储。您可能需要加密客户端上的数据。除了运输之外，保护系统还有很多方面。

# 64-bit - Installshield LE 和 Express 未检测到 Office 2010 64 位

> ID：15077626
> 
> 赞同：-1
> 
> 时间：2013-02-25T22:21:39.347
> 
> 标签：64-bit, ms-office, installshield-le

微软在 VS 2012 中令人烦恼的 vdproj 安装项目倾销导致人们尝试使用 VS2012 中内置的 Installshield LE。可悲的是，它创建的安装程序不能以任何方式使用 64 位形状或形式。

因此，例如单击已安装 Office 2010 复选框仅是 32 位 Office 的先决条件。它无法检测到 64 位。

在对 Installshield 进行了大量无脑探索之后，底线是：1）您需要 Professional 或 Premiere 版本才能处理 64 位。2）您需要编辑他们提供的条件，以制作一个复合条件，将您感兴趣的所有 Office 指南合并在一起，因为它只检查开箱即用的众多指南之一。这详细说明了 GUIDS 的结构：http: [//support.microsoft.com/kb/2186281](http://support.microsoft.com/kb/2186281?wa=wsignin1.0) ?wa=wsignin1.0 。我发现在 VM 中安装各种版本然后使用 regedit 查看 GUID 最终是什么很有帮助。

这篇文章是为了让人们可以通过 Google 搜索实际发现这一点，而不是隐藏在付费专区/私人支持网站后面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T12:14:06.783

更新 13 年 10 月的 AlBear

有一个用于 VS2012/13 的 installshield LE 测试版 要构建 x64 安装包，请查看帮助文件查找“64 位”。

InstallShiel LE 识别 x64 目标的方式是将 [INSTALLDIR] 属性定义为 64 位文件夹之一，或者将至少一个设置组件定义为 64 位。这适用于我构建了一个 Excel 2013 Add，它在启动时加载并且工作正常。

要使 VSTO 工作的先决条件：您需要更改文件大小和散列 看起来 Microsoft 文章“部署 Office 解决方案 vsto 2013”​​中的建议已过时，并且推荐的 XML 代码具有错误的文件大小和散列。修起来也不是太难。然而，我认为微软不幸正在经历一段危机时期，而未能提供合理的支持是未知领域.......干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:30:46.490

InstallShield 和 WiX 就像使用 VB.NET 的 Visual Studio 和使用 C# 的 SharpDevelop。就像这些工具都使用 IL 代码创建 EXE 和 DLL，但使用不同的语言提供程序一样，

InstallShield 和 WiX 都使用不同的语言创建 Windows Installer 数据库。就像 VB EXE 可以使用 C# DLL 一样，InstallShield MSI 可以使用 WiX Merge Modules。这为您提供了两全其美的体验。

要了解的是 VSTO 插件安装程序不是 64 位 MSI，它是 32 位 MSI，它部署了带有 32 位或 64 位 Office 注册表项的 AnyCPU DLL。最终，Office 的位数决定了 AddIn 的位数。

我有一个用于十几个客户的模板。它使用 InstallShield Limited Edition 和 Preq Bootstrapper 来放置所有依赖项并使用由 WiX 和 IsWiX (CodePlex) 编写的合并模块。否则 ISLE 只是 UI 的容器，它是一个功能。

合并模块负责所有的依赖检测、门控逻辑、放置文件、安装证书、设置注册表值等等。

可以在以下位置找到更多详细信息：

[VSTO 4 (2010) 经验教训](http://blog.deploymentengineering.com/2010/10/vsto-4-2010-lessons-learned.html)

[Office 2010 位痛](http://blog.deploymentengineering.com/2010/09/office-2010-bitness-pain.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:21:39.347

显然这里引用的小字应该是一个线索：[InstallShield Limited Edition Support 64 bit Installer？](https://stackoverflow.com/questions/10428985/does-installshield-limited-edition-support-64-bit-installer)

Installshield 中当前的 Office 先决条件也具有误导性。它应该是“Office 2010 Home & Professional 32 位”。

也许他们打算随着时间的推移对其进行升级以使其更加全面，或者每个人都必须经历同样的麻烦来解决他们关心的一些案例。支持人员声称对于所有版本、位数、版本等组合的 GUIDS 太多。

家庭和学生、家庭和专业、专业、Office 2010 Professional Plus 许可证 32 位、64 位、其中的语言、Service Pack 等。根据您关心的 GUIDS 数量的不同，GUIDS 的数量相当大。

# python - Python locals() 用于包含范围

> ID：15077627
> 
> 赞同：9
> 
> 时间：2013-02-25T22:21:40.910
> 
> 标签：python, python-3.x, scope, environment, locals

TL;DR：我想要一个在包含范围内查找的 locals()。

大家好。

我正在向一些化学家朋友教授 Python 编程课程，我想确定我真的了解范围。

考虑：

```
def a():
    x = 1
    def b():
        print(locals())
        print(globals())
    b() 
```

Locals 打印一个空的环境，而 globals 打印通常的全局变量。如何访问存储 x 的环境？很明显，解释器知道它，因为我可以参考它。

相关：范围界定何时发生？仅当包含 x=3 时，a = x+2 上的以下名称错误：

```
def a():
    x = 1
    def b():
        a = x+2
        x = 3
    b() 
```

如果您注释掉 x=3，则代码有效。这是否意味着 python 在解释代码之前对代码进行了词法范围传递？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T22:36:15.330

您的代码中发生的情况是，当 python see 是`x=3`您的方法中的行时`b()`，它在函数内使用`x`范围重新创建，`b`而不是在函数中使用`x`它的范围`a`。

因为你的代码然后去：

```
 a = x+2
    x = 3 
```

它是说你需要`x`在引用它之前定义内部范围。

但是，当您没有`x`在`b`函数中分配 时，python 不会尝试创建较低的范围`x`，也不会引发任何错误。

下面的代码将说明这一点：

```
def a():
    x = 1
    def b():
        x = 3
        print (x)

    def c():
        print (x)

    b()
    c()
    print (x)

a() 
```

但是，如果您要声明`x`为`global`可以在函数中使用它，如下所示：

```
def a():
    global x
    x = 1

    def d():
        global x
        x += 2

    print (x)
    d()
    print (x)

a() 
```

Python 3 还添加了一个`nonlocal`关键字，可让您从封闭范围访问变量，用法如下：

```
def a():
    x = 1

    def d():
        nonlocal x
        x += 2

    print (x)
    d()
    print (x)

a() 
```

将打印与示例相同的结果`global`。

* * *

万一我错过了这个问题：

根据[Get locals from calling namespace in Python](https://stackoverflow.com/questions/6618795/get-locals-from-calling-namespace-in-python)的回答：

您可以使用：

```
import inspect

def a():
    x = 1

    def d():
        frame = inspect.currentframe()
        try:
            print (frame.f_back.f_locals)
        finally:
            del frame
    d()

a() 
```

获取函数调用者的本地范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:27:17.903

该语句`print(locals())`指的是最近的封闭范围，即`def b():`函数。调用 时`b()`，您将打印此 b 函数的局部变量，并且 x 的定义超出范围。

```
def a():
    x = 1
    def b():
        print(locals())
        print(globals())
    b()
    print(locals()) 
```

将 x 作为局部变量打印。

对于你的第二个问题：

```
def a():
    x = 1
    def b():
        #a = x+2
        x = 3
    b()

>>> a() 
```

没有错误。

```
def a():
    x = 1
    def b():
        a = x+2
        #x = 3
    b()

>>> a() 
```

没有错误。

和

```
def a():
    x = 1
    def b():
        a = x+2
        x = 3
    b()

>>> a() 
```

给出以下错误：`UnboundLocalError: local variable 'x' referenced before assignment`

IMO（请检查），在这第三种情况下，正文中的第一条语句在*最封闭的范围内*`b()`查找 x 的值。在这个范围内，x 被分配在下一行。如果您只有 statement ，则 x 在大多数封闭范围中找不到，而是在“下一个”封闭范围中找到，带有.*`a = x+2``x = 1`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-28T19:09:28.057

`python3 -c "help(locals)"`说这个`locals`功能：

```
locals()
    Return a dictionary containing the current scope's local variables. 
```

这意味着调用只会显示哪些变量是本地`locals()`的。这并不意味着不能看到其范围之外的变量——而是只返回本地变量的信息。`b()``b()``b()``locals()``b()`

您可能想要的是`b()`显示有关调用函数的变量的信息。为此，请使用以下代码（显示的`b()`局部变量）：

```
def a():
    x = 1
    def b():
        print(locals())
    b() 
```

并用这个替换它（它使用`inspect`模块来获取调用框架的本地信息）：

```
def a():    
    x = 1
    def b():
        import inspect
        print(inspect.currentframe().f_back.f_locals)
    b() 
```

* * *

至于你的其他问题：

```
def a():
    x = 1
    def b():
        a = x+2
        x = 3
    b() 
```

您得到的错误是因为 Python 3 允许您在外部范围内设置/分配全局变量和局部变量，前提是您使用`global`and`nonlocal`关键字声明它们。（我不会在这里解释它们；我只会说你自己查找它们不会有任何问题。）

如果您删除该`x = 3`行（保留该`a = x+2`行），您的代码将运行，因为`x`' 的值正在被使用，但未设置。相反，如果您删除该`a = x+2`行（保留该`x = 3`行），您的代码将运行，因为它将创建一个新的`x`inside`b()`范围。

如果您保留这两行，Python 不知道是否`x`应该引用`x`当前范围之外的内容（`a = x+2`似乎暗示）或者它是否应该引用`x`本地 to`b()`的范围（正如`x = 3`暗示的那样）。

如果你想`x`成为本地的`b()`，那么你不应该在`a = x+2`那里有那条线，至少在之前`x`没有设置`x = 3`。但是如果你想`x`成为`a()`'s `x`，那么你应该声明`x`为`nonlocal`，`b()`像这样：

```
def a():
    x = 1
    def b():
        nonlocal x  # use a()'s x
        a = x+2
        x = 3
    b() 
```

如果您感到困惑，请记住 Python 将允许您*使用*全局变量和在当前范围之外创建的变量，但前提是您不*分配*给它们。（读取全局变量通常是可以接受的，但设置它们是不受欢迎的。）

如果要设置全局变量或非局部变量，则必须使用`global`(for global variables) 或`nonlocal`(for non-local variables) 声明这些变量，如上面的代码所示。

我希望这有帮助。*

# javascript - 在 javascript/jquery 中访问 URL？

> ID：15077629
> 
> 赞同：0
> 
> 时间：2013-02-25T22:21:43.500
> 
> 标签：javascript, jquery

我想为 url 位置创建一个变量，并根据输入更改文本。例如，对于 bill.google.com，变量的值为 bill。例如.google.com，变量的值就是例子。我不知道如何访问 url 中的文本。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:27:01.647

```
location.hostname.split('.')[0] 
```

将为您提供您正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:24:06.087

如何访问 URL 中的文本

```
window.location.href 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:25:46.600

你需要玩这个：

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

```
window.location 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:25:57.240

你看过window.location吗？

*   **location.hostname**返回 web 主机的域名
*   **location.pathname**返回当前页面的路径和文件名
*   **location.port**返回 Web 主机的端口（80 或 443）
*   **location.protocol**返回使用的网络协议（http:// 或 https://）

[在http://www.w3schools.com/js/js_window_location.asp](http://www.w3schools.com/js/js_window_location.asp)上查看更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T22:39:28.393

这样的事情会让你接近。*注意*：没有经过太多测试。

```
 var _url = location.hostname;
 var _reg = /(?:http[s]*\:\/\/)*(?:www\.)*(.*?)\.(?=[^\/]*\..{2,5})/i;
 var result = _url.match(_reg);
 console.log(result); 
```

# java - 编译时检查或 java.util.ConcurrentModificationException

> ID：15077633
> 
> 赞同：2
> 
> 时间：2013-02-25T22:22:12.277
> 
> 标签：java, loops, concurrency, concurrentmodification

下面的循环抛出`ConcurrentModificationException`. 它是否应该给出编译器错误。运行时异常的原因是什么？

```
final List<String> list = new ArrayList<String>();
list.add("AAAAAAAAAAAAA");
for (final String it : list) {
    System.out.println(it);
    list.add("SSSSSSSSSS");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T22:30:04.173

的一些实现`List`可能允许在`add`通过`Iterator`. 例如，`CopyOnWriteArrayList`不会`ConcurrentModificationException`根据[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)抛出 a 。

为什么一个`RuntimeException`？因为程序员的工作是知道`List`所使用的特定实现是否允许这种行为。值得一提的是，有像 FindBugs 这样的静态代码分析器，它可以警告您注意这样的危险模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:36:08.290

抛出异常是因为您在迭代列表时尝试修改列表。它可以避免用正常的迭代器迭代它的迭代器或一段时间。

# python - TypeError：不支持解码 Unicode

> ID：15077634
> 
> 赞同：6
> 
> 时间：2013-02-25T22:22:15.697
> 
> 标签：python, unicode

python新手....试图让解析器正确解码到sqlite数据库中，但它不起作用:(

```
# coding: utf8
from pysqlite2 import dbapi2 as sqlite3
import urllib2
from bs4 import BeautifulSoup
from string import *

conn = sqlite3.connect(':memory:')
cursor = conn.cursor()

# # create a table
def createTable():
    cursor.execute("""CREATE TABLE characters
                      (rank INTEGER PRIMARY KEY, word TEXT, definition TEXT) 
                   """)

def insertChar(rank,word,definition):
    cursor.execute("""INSERT INTO characters (rank,word,definition)
                        VALUES (?,?,?)""",(rank,word,definition))

def main():
    createTable()

    # u = unicode("辣", "utf-8")

    # insertChar(1,u,"123123123")

    soup = BeautifulSoup(urllib2.urlopen('http://www.zein.se/patrick/3000char.html').read())
    # print (html_doc.prettify())   

    tables = soup.blockquote.table

    # print tables

    rows = tables.find_all('tr')
    result=[]
    for tr in rows:
        cols = tr.find_all('td')
        character = []
        x = cols[0].string 
        y = cols[1].string 
        z = cols[2].string 
        xx = unicode(x, "utf-8")
        yy = unicode(y , "utf-8")
        zz = unicode(z , "utf-8")
        insertChar(xx,yy,zz)

    conn.commit() 

main() 
```

我不断收到以下错误： `TypeError: decoding Unicode is not supported`

```
WARNING:root:Some characters could not be decoded, and were replaced with REPLACEMENT CHARACTER.
Traceback (most recent call last):
  File "sqlitetestbed.py", line 64, in <module>
    main()
  File "sqlitetestbed.py", line 48, in main
    xx = unicode(x, "utf-8")

Traceback (most recent call last):
File "sqlitetestbed.py", line 52, in <module>
main()
File "sqlitetestbed.py", line 48, in main
insertChar(x,y,z)
File "sqlitetestbed.py", line 20, in insertChar
VALUES (?,?,?)""",(rank,word,definition))
pysqlite2.dbapi2.IntegrityError: datatype mismatch 
```

我可能正在做一些非常愚蠢的事情...... :(请告诉我我做错了什么......谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T22:25:31.590

`x`已经是`unicode`，因为该`cols[0].string`字段包含`unicode`（正如[记录](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#string)的那样）。

# c++ - 转换 Boost C++ Phoenix 表达式树

> ID：15077637
> 
> 赞同：5
> 
> 时间：2013-02-25T22:22:26.050
> 
> 标签：c++, boost, boost-phoenix, boost-proto

在 Boost Phoenix 文章“转换表达式树”中，[这里](http://www.boost.org/doc/libs/1_52_0/libs/phoenix/doc/html/phoenix/examples/transforming_the_expression_tree.html)使用了一组自定义`invert_actions`类的特化，用于反转二进制算术表达式。例如`a+b`变成`a-b`; `a*b`变成`a/b`; 反之亦然。

这涉及表达式树的递归遍历 - 但是，当遇到涉及未显式处理的运算符的表达式时，此遍历​​停止。例如，`_1+_2-_3`将变为`_1-_2+_3`，但`_1+_1&_2`将保持原样（没有处理程序`&`）。`let(_a = 1, _b = 2) [ _a+_b ]`也将保持不变。

我原以为这与文章的意图一致，但看看最后列出的测试，我发现这种`if_(_1 * _4)[_2 - _3]`情况预计会发生变化；使用提供的代码（[此处](http://www.boost.org/doc/libs/1_52_0/libs/phoenix/example/invert.cpp)），我发现它没有。

那么如何定义一个通用的 Boost Phoenix 表达式树变换，它适用于*所有*一组显式列出的（n 元）运算符；保持其他不变？

一些代码可能有用。我希望输出以下 C++11 代码（自动）`0`，而不是`2`；*没有*明确处理`&`, 或任何其他运算符/语句。

```
#include <iostream>
#include <boost/phoenix.hpp>
#include <boost/proto/proto.hpp>

using namespace boost;
using namespace proto;
using namespace phoenix;
using namespace arg_names;

struct invrt {
  template <typename Rule> struct when : proto::_ {};
};

template <>
struct invrt::when<rule::plus>
  : proto::call<
    proto::functional::make_expr<proto::tag::minus>(
        evaluator(_left, _context), evaluator(_right, _context)
    )
  >
{};

int main(int argc, char *argv[])
{
  auto f = phoenix::eval( _1+_1&_2 , make_context(make_env(), invrt()) );
  std::cout << f(1,2) << std::endl; // Alas 2 instead of 0
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:30:26.447

这就是你使用直接 Proto 的方式：

```
#include <iostream>
#include <boost/phoenix.hpp>
#include <boost/proto/proto.hpp>
namespace proto = boost::proto;
using namespace boost::phoenix;
using namespace arg_names;

struct invrt:
  proto::or_<
    proto::when<
      // Turn plus nodes into minus
      proto::plus<proto::_, proto::_>,
      proto::functional::make_expr<proto::tag::minus>(
        invrt(proto::_left), invrt(proto::_right)
      )
    >,
    proto::otherwise<
      // This recurses on children, transforming them with invrt
      proto::nary_expr<proto::_, proto::vararg<invrt> >
    >
  >
{};

int main(int argc, char *argv[])
{
  auto f = invrt()(_1+_1&_2);
  proto::display_expr(f);
  std::cout << f(1,2) << std::endl;
  return 0;
} 
```

Phoenix 在 Proto 之上分层了一堆东西。我不知道`pheonix::eval`您尝试的方法的语义或为什么不起作用。也许了解凤凰的人会插话。

**==== 编辑 ====**

我发现了 Phoenix 示例的问题。对于非加号情况，它不会递归。您的代码应如下所示：

```
#include <iostream>
#include <boost/phoenix.hpp>
#include <boost/proto/proto.hpp>

using namespace boost;
using namespace proto;
using namespace phoenix;
using namespace arg_names;

struct invrt {
  template <typename Rule>
  struct when :
    // NOTE!!! recursively transform children and reassemble
    nary_expr<_, vararg<proto::when<_, evaluator(_, _context)> > >
  {};
};

template <>
struct invrt::when<rule::plus> :
  proto::call<
    proto::functional::make_expr<proto::tag::minus>(
      evaluator(_left, _context), evaluator(_right, _context)
    )
  >
{};

int main()
{
  auto f = phoenix::eval( _1+_1&_2 , make_context(make_env(), invrt()) );
  display_expr(f);
  std::cout << f(1,2) << std::endl; // Prints 0\. Huzzah!
} 
```

您是否认为比直接的 Proto 解决方案更简单或更复杂由您决定。

# caching - Doctrine - 修改实体时中断查询缓存（二级缓存）

> ID：15077640
> 
> 赞同：2
> 
> 时间：2013-02-25T22:22:37.363
> 
> 标签：caching, doctrine-orm, symfony-2.1, second-level-cache

我正在使用学说 2，目前没有缓存任何内容。我想在 Doctrine 中启用一些缓存系统，但看起来你必须在任何地方手动管理它：

```
$memcache = new Memcache();
$memcache->connect('memcache_host', 11211);

$cacheDriver = new \Doctrine\Common\Cache\MemcacheCache();
$cacheDriver->setMemcache($memcache);
$cacheDriver->save('cache_id', 'my_data');
...
$cacheDriver->delete('cache_id'); 
```

我想知道 Doctrine 是否可以自动管理这个。例如：

1.  缓存已启用，我通过 id 请求`User`实体，Doctrine 在其缓存中搜索，找不到用户，获取它，将其设置到缓存中，返回它。

2.  我第二次获取，Doctrine 将缓存的`User`.

3.  我更新`User`（或其任何关系）Doctrine 检测它并打破该对象的缓存
4.  我通过 id 请求相同`User`，Doctrine 不再有它在缓存中，获取它并使用更新的用户设置缓存，然后返回它

那可能吗？

干杯，马克西姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:35:52.893

您要查找的内容（在 Doctrine ORM 中）仅在[结果集缓存](http://docs.doctrine-project.org/en/latest/reference/caching.html#result-cache)中受支持，并且仅适用于 DQL 查询产生的 SQL 查询的结果。

您正在寻找的功能的确切名称是[“二级缓存”](http://www.javalobby.org/java/forums/t48846.html)，Doctrine ORM 尚不支持该功能，但目前正在[https://github.com/doctrine](https://github.com/doctrine/doctrine2/pull/580)`2.5`开发（希望在版本中可用）[/doctrine2/pull/580](https://github.com/doctrine/doctrine2/pull/580)

目前，如果确实需要，您将不得不在自己的服务层中处理这种缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T16:18:37.213

如果您通过它的主键拉实体，缓存将由学说的“身份映射”完成，如此处所述[http://doctrine-orm.readthedocs.org/en/latest/reference/unitofwork.html](http://doctrine-orm.readthedocs.org/en/latest/reference/unitofwork.html)

# java - 无法解析符号“StringUtils”

> ID：15077647
> 
> 赞同：4
> 
> 时间：2013-02-25T22:22:53.637
> 
> 标签：java, apache-stringutils

我已下载“commons-lang-2.6.jar”并添加到我的 java 项目中，但我无法使用`StringUtils`. 我应该下载另一个 jar 文件还是我必须更改项目结构中的某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:23:42.697

您[需要](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)导入`org.apache.commons.lang`包。

# nuget - 通过 nuget 安装 abcpdf gecko 后，如何将 XULRunner 文件夹部署到输出目录？

> ID：15077650
> 
> 赞同：4
> 
> 时间：2013-02-25T22:23:05.380
> 
> 标签：nuget, xulrunner, abcpdf

我通过 nuget 安装了 ABCpdf.ABCGecko 包，它给了我这个对话框：

> 完成的！请手动将 XULRunner 文件夹部署到您的输出目录。

我真的不知道这意味着......我有一个想法，但不知道在哪里或如何修改我的构建配置以允许这种情况发生。有没有人这样做过，如果有，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:45:10.607

我最初尝试的答案适用于我的开发设置，但不适用于我们的分阶段部署设置，因为出于某种原因，它没有在使用 MSDeploy 创建的 Web 包中包含 XULRunner 文件。我发现下面的设置似乎更简单：

```
<ItemGroup>
  <Content Include="XULRunner\**\*.*">
    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
  </Content>
</ItemGroup> 
```

我不能 100% 确定这是否普遍适用，但它似乎在我迄今为止遇到的每个开发和部署方案中都能更好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:35:19.437

我找到了如何通过[这个 SO answer](https://stackoverflow.com/a/11772578/437456)来实现这一点。项目文件的相关更改`.csproj`如下：

```
<Target Name="AfterBuild">
  <CallTarget Targets="CopyXULRunnerToDeployFolder" />
</Target>
<Target Name="CopyXULRunnerToDeployFolder">
    <ItemGroup>
        <MyFiles Include="XULRunner\**\*.*" />
    </ItemGroup>
    <Microsoft.Build.Tasks.Copy SourceFiles="@(MyFiles)"  DestinationFiles="@(MyFiles->'$(OutputPath)\XULRunner\%(RecursiveDir)%(Filename)%(Extension)')"/>
</Target> 
```

# html - 浮动在正常内容之后出现的元素

> ID：15077654
> 
> 赞同：0
> 
> 时间：2013-02-25T22:23:16.100
> 
> 标签：html, css

我有问题。在下面的标记中，有一个 side-element，其中包含我想要显示的用户附加信息，如附图所示（右浮动）。

```
<section>
    <h2>site title</h2>
    <p>that's the site's main content</p>
    <aside>
        <h3>other stuff</h3>
        <div>cloud tag</div>
    </aside>
</section> 
```

但是，我不想将 side-element 放在 h2-element 之前，然后将其浮动。我知道这会奏效，但不知何故，这对我来说似乎是错误的。可以说，搜索引擎知道它是不太重要的内容，因为它包含在一个备用元素中。

但我也希望 side-element 表现得当页面宽度变小（例如较小的设备）时，aside 元素保持在主要内容之下。

所以我的问题是：有没有可能如图所示浮动边元素，而不操纵标记顺序（添加帮助 div 是可以的，我猜）。

已经谢谢了，期待。

![在此处输入图像描述](../Images/ace8acfc54844c958be276d16c460c99.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:28:19.687

您需要将主要内容包装在一个 div 中，然后添加`float: left`到主要 div 和您的 side 元素。然后，只需使用该`margin`属性将它们适当地隔开。

**HTML**

```
<section>
    <div class="main">
        <h2>site title</h2>
        <p>that's the site's main content</p>
    </div>
    <aside>
        <h3>other stuff</h3>
        <div>cloud tag</div>
    </aside>
</section> 
```

**CSS**

```
.main {
    float: left;
}
aside {
    float: left;
} 
```

见[演示](http://jsfiddle.net/ZFEYY/)。

# iphone - 刷新 Tableview 控制器时 UIRefreshControl 崩溃

> ID：15077655
> 
> 赞同：2
> 
> 时间：2013-02-25T22:23:32.340
> 
> 标签：iphone, ios, asynchronous, uirefreshcontrol

我无法刷新我的**TVC。当我向下拖动刷新时它崩溃了。**图标在那里，但随后退出。我敢肯定它很简单。有类似的问题尚未考虑。

取自我的 viewDidLoad 方法体：

```
refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self
                   action:@selector(refreshInvoked:forState:)
         forControlEvents:UIControlEventValueChanged];
[self.tableView addSubview:refreshControl];

refreshControl.attributedTitle = [[NSAttributedString alloc] initWithString:title
                                                            attributes:@{NSFontAttributeName:[UIFont fontWithName:@"Helvetica" size:13.0]}];
[self refreshFeed]; 
```

其中指的是：

```
-(void)refreshFeed 
{
   RSSLoader* rss = [[RSSLoader alloc] init];    
   [rss fetchRssWithURL:feedURL
            complete:^(NSString *title, NSArray *results) {
                dispatch_queue_t downloadQueue = dispatch_queue_create("downloader",NULL);
                dispatch_async(downloadQueue, ^{
                _objects = results;
                    [self.tableView reloadData];
                //completed fetching the RSS
                dispatch_async(dispatch_get_main_queue(), ^{
     //               [(HeaderView*)self.tableView.tableHeaderView setText:title];
                    // [(ArticleItem*)self.tableView.]
                });
                });
    }];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T16:29:17.550

**UIRefreshControl 并不是要添加为子视图**...这样做会给您带来一些麻烦，您需要在 VC dealloc 上取消注册其目标...否则，当 UIRefreshControl 调用您死掉的 VC 时，您可能会遇到一些问题（因为它没有不要对你的 VC 保持弱或强的引用）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:32:51.047

将您的操作方法更改为：

```
[refreshControl addTarget:self
                   action:@selector(refreshFeed)
         forControlEvents:UIControlEventValueChanged]; 
```

看起来你指的`refreshInvoked:forState:`是自我中不存在的东西。

# c# - IndexOf 函数返回第一个索引还是随机的？

> ID：15077660
> 
> 赞同：3
> 
> 时间：2013-02-25T22:23:49.927
> 
> 标签：c#, .net, vb.net

假设我定义了以下`List<String>`(C#) `List(Of String)`(VB)：

```
MyList:
MyList(0) = "a"
MyList(1) = "b"
MyList(2) = "c"
MyList(3) = "b"
MyList(4) = "b"
MyList(5) = "b" 
```

而且，在我的代码中我有`MyList.IndexOf("b")`- 假设它返回第一个索引（在这种情况下）是否安全，`1`或者它可以返回`1`、或？`3``4``5`

换句话说，`IndexOf`函数是否按顺序遍历列表对象？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:24:57.080

是的，它返回第[一个 index](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)，除非您提供[第二个参数](http://msdn.microsoft.com/en-us/library/s8t42k5w.aspx)（索引）来确定搜索的开始位置。甚至还有[第三个参数](http://msdn.microsoft.com/en-us/library/dy8zse0c.aspx)可用于搜索范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:25:17.587

正如我们从[文档](http://msdn.microsoft.com/en-gb/library/e4w08k17.aspx)中看到的，它返回给定模式第一次出现的索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T22:26:55.820

List.IndexOf(string) 返回列表中字符串的第一个实例的索引。

方法见[MSDN 文档](http://msdn.microsoft.com/en-us/library/8bd0tetb.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T22:25:55.697

它返回第一个

> 返回值 类型：System.Int32 如果找到，则整个 List 中第一次出现的项的从零开始的索引；否则，–1。实现 IList.IndexOf(T)

[http://msdn.microsoft.com/en-us/library/e4w08k17.aspx](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)

# sql - 将 SQL 部署脚本构建到应用程序中？

> ID：15077662
> 
> 赞同：1
> 
> 时间：2013-02-25T22:24:08.810
> 
> 标签：sql, database, deployment

当我们更新客户的软件安装时，我们目前有一种相当手动、繁琐、混乱且容易出错的方式来运行 SQL 部署脚本。我们正在考虑寻找一个第三方 SQL 部署工具来自动化这个过程。

但是，我正在将构建我们自己的 SQL 部署工具的想法推广到应用程序本身。这很简单——在应用程序启动时，它会：

1）检查现有的数据库架构版本（例如“35”）

2）检查“最新”数据库模式版本（例如“38”）

3）从资源文件中检索相关的SQL部署脚本（如“36”、“37”、“38”）

4) 锁定数据库并运行每个所需的 SQL 部署脚本

请注意，如果发生任何错误，这仍将由 IT 技术人员运行，而不是由最终用户运行。

这似乎很不正统，但我真的没有看到任何问题。你的意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:32:45.663

我看不出这有什么遗传上的错误。在我工作过的一家公司，他们构建了一个自定义 SQL 脚本安装程序，允许他们自动将更改应用到数据库，在必要时回滚更改，并密切关注已应用的版本。

无论应用程序的预期结果如何，您都需要设置约定（即数据库版本应具有此文件夹结构等）并确定将在运行该工具时使用的需求和流程（即您的自动化程度如何）会成功的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:19:46.387

不要建立自己的。对于定制解决方案来说，这个问题太常见了。

您正在寻找数据库迁移工具，我的建议是[liquibase](http://www.liquibase.org/)。它可以从命令行运行或集成到构建过程中。对我来说特别有价值的独特功能是生成 SQL 升级（和降级）脚本，我们在支持生产安装时经常需要这些脚本。

有关替代迁移工具的更详细列表，请参阅以下答案：

*   [Java 迁移](https://stackoverflow.com/questions/131020/migrations-for-java/3867045#3867045)

# php - PHP - 计算特定的帖子变量

> ID：15077663
> 
> 赞同：0
> 
> 时间：2013-02-25T22:24:09.020
> 
> 标签：php

我有几个具有相同名称的输入字段（还有其他几个输入字段，但这些很重要）：

```
<input type=text name=title1 id=title1/>
<input type=text name=title2 id=title2/>
<input type=text name=title3 id=title3/>... 
```

我如何计算它们（只需输入名称 titlex）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:26:12.693

如果您无法更改 HTML，则可以迭代，只要设置了 $_POST。例子：

```
$i = 1;
while (isset($_POST["title".$i])) {
  //handle input
  $i++;
} 
```

# matlab - 有没有办法让函数对 MATLAB 中的变量列表执行相同的操作？

> ID：15077666
> 
> 赞同：2
> 
> 时间：2013-02-25T22:24:22.890
> 
> 标签：matlab

例如，我想`blitzer(blitzer(:,4)<0.5,5)`在 MATLAB 中对变量列表（或工作区中的所有变量）执行命令。

所以我想在彗星，dasher等上执行它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:59:20.503

使用`who`功能：

```
s = who;
for i = 1:length(s)
    temp = eval(s{i});
    answer{i} = temp(temp(:,4)<0.5,5);
end 
```

# android - Android - 使用片段和简单的光标适配器填充列表视图

> ID：15077669
> 
> 赞同：1
> 
> 时间：2013-02-25T22:24:29.393
> 
> 标签：android, android-listview, android-fragments, android-cursoradapter

我知道这个问题到目前为止可能被问了一百次，但我仍然没有设法解决我的问题。我有一项由 2 个片段组成的活动。一个片段是一种向数据库添加信息的表单：

```
**R.layout.fragment_add_server:**
<?xml version="1.0" encoding="utf-8"?>
...
<LinearLayout
    android:id="@+id/nameLinear"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="5dp" >

    <TextView
        android:id="@+id/nameText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="70"
        android:text="@string/strName"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="30"
        android:hint="@string/editName" />
</LinearLayout>
... 
```

另一个片段只是一个列表视图。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/georgeback" 
android:orientation="vertical" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="60" >
</ListView>

<Button
    android:id="@+id/connect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="@string/connectBTN" />

</LinearLayout> 
```

该片段，列表视图，我想用数据库中的任何内容填充它，并在添加新内容时自动刷新（还没有到那个阶段）。当我使用下面的代码时，我设法用整个片段填充列表视图（即，我看到列表框、按钮等，我什至可以与它们交互。Inception。）而不仅仅是数据。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_select_server,
            container, false);
    Cursor mNotesCursor = mDbHelper.fetchAllNotes();
    String[] from = new String[]{mDbHelper.KEY_TITLE};
    int[] to = new int[]{R.id.editName};
    mCurAdapter = new SimpleCursorAdapter(view.getContext(),R.layout.fragment_add_server,mNotesCursor,from,to,0);

    mMyListView=(ListView)view.findViewById(R.id.listView1);
    mMyListView.setAdapter(mCurAdapter);

    return view;
} 
```

我相信我在构造函数的 from 和 to 字段上做错了。知道为什么我将整个片段视图作为输出而不只是数据库中的数据吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:42:13.220

您的问题是当您传递片段布局而不是列表视图项布局时。从我可以看到您的列表视图项包含在您的`fragment_add_server.xml`布局中（因为您`...`在 xml 片段之前和之后放置了）。将代码段移动到它自己的文件中，就像`my_list_view_item.xml`在创建`SimpleCursorAdapter`.

```
mCurAdapter = new SimpleCursorAdapter(view.getContext(),R.layout.my_list_view_item,mNotesCursor,from,to,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:59:55.330

我通过更改 simplecursoradapter 中的布局解决了我遇到的问题。代替

```
mCurAdapter = new SimpleCursorAdapter(view.getContext(),R.layout.fragment_add_server,mNotesCursor,from,to,0); 
```

我做了：

```
mCurAdapter = new SimpleCursorAdapter(view.getContext(),android.R.layout.simple_list_item_1,mNotesCursor,from,to,0); 
```

基本上将布局更改为通用的 android 列表布局就可以了！:)

# node.js - Heroku 上节点太忙的 maxLag 的合适值是多少？

> ID：15077671
> 
> 赞同：3
> 
> 时间：2013-02-25T22:24:35.737
> 
> 标签：node.js, heroku

我们正在评估在 Heroku 上托管的应用程序上使用 toobusy 模块[https://github.com/lloyd/node-toobusy 。](https://github.com/lloyd/node-toobusy)我不确定对于 Heroku 环境来说 maxLag 的合适值是多少。似乎它需要大量的玩耍和调整来调整它？任何人都在生产中使用这个模块，使用什么样的设置（即dynos）和使用什么参数？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-24T11:54:52.270

我最近开始在 heroku 上运行一个小型的自动完成 RESTful 服务。它为每个用户提供大量请求（请求在用户键入的每个字符上发送）。该服务在两个 x1 测功机上运行。

我需要它在负载下保持快速响应，所以我也在使用[toobusy](https://github.com/lloyd/node-toobusy)。起初我将它设置为 10 毫秒的最大延迟，但这是一个雄心勃勃的目标 - 当我运行负载测试时它拒绝了许多请求。

经过一些调整 - 我最终得到了**40 毫秒的最大延迟**。它使我在负载（服务需要处理的请求数量）和所需的响应时间（拒绝请求之前）之间取得了很好的平衡。我正在监视我的应用程序是否因负载而被拒绝请求，因此我可以在需要时添加更多测功机。

我相信你必须使用这个值并运行负载测试才能得到正确的数字，因为它非常特定于硬件（在你的情况下是 Heroku）以及你的应用程序对每个请求所做的事情。

# php - 从 php 表单中获取价值

> ID：15077672
> 
> 赞同：2
> 
> 时间：2013-02-25T22:24:38.003
> 
> 标签：php, database

我正在尝试将发布的表单值插入到数据库中，这些值是从通过 php 生成的 html 表单中检索的。但是它没有插入值，但是当我打印发布的变量时我确实看到了这些值。这是代码。

这是用php编写的输出html的表格

```
<?php 
$find = mysql_query("SELECT file_name FROM chemlab_files WHERE student_id = '$student_id'") or die  ("Could not search!");
while($row = mysql_fetch_array($find)){
    $file_name = $row['file_name'];
    $_SESSION['file_name'] = $file_name;
    echo "<label class='checkbox'><input type='checkbox' name='file_name[]' value='{$file_name}'>$file_name</label><br><input type='text' name='description[]' value='' placeholder='description'>";
    }
?> 
```

这是表单处理程序

```
//description
            if(isset($_POST['description'])){
            foreach($_POST['description'] as $description){ 
                $file_name_description = mysql_real_escape_string($description);
            //print_r($file_name_description);
              }
             }

            $result = mysql_query("SELECT * FROM chemlab_files WHERE student_id='$student_id'") or die (mysql_error());              

           //if the student_id does exist, proceed
                if($result==1){
                    //insert into chemlab_files update description
                    $insert_file_name_description = mysql_query("UPDATE chemlab_files SET description='$file_name_description'  WHERE file_name='$file_name'");                     
                }else{
                    echo 'something went wrong during sharing!';
                    exit(); 
```

我可以打印变量 $file_name_description 但无法插入数据库。

更清楚地说，表单有多个字段，因为文件名（值为“$file_name”的复选框）有一个描述字段。当我为 $file_name 和 $description 执行 print_r 时，我得到了所有字段的值。但是，当我将描述插入数据库时​​，什么也没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:29:24.453

如果您正在尝试创建新的数据库记录，您的 sql 不应该是 INSERT 语句，如

```
INSTERT INTO chemlab_files SET (description, name) VALUES ('$file_name_description','$file_name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:32:28.053

我看到两个问题：

1.  我不明白为什么您的 HTML 中的文本输入是一个数组（描述 []）
2.  我不明白为什么你一开始就迭代它，而且你总是将它设置`$file_name_description`为最后一个值。您是否尝试将所有发布`description`的输入附加到`$file_name_description`变量？如果是，那么你应该写`.=`而不是`=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:11:15.600

```
INSERT INTO table_name 
VALUES (value1, value2, value3,...) 
```

你需要这个。

# html - 如何在 CSS 中旋转背景？

> ID：15077673
> 
> 赞同：0
> 
> 时间：2013-02-25T22:24:43.810
> 
> 标签：html, css, background, geometry

我想用纯色实现倾斜/旋转的背景 div。

像这样：

![http://img59.imageshack.us/img59/367/szabloni.gif](../Images/50393fb0e9c6a9d7a4cd98a1122fd809.png)

我知道旋转背景以创建倒角有一个技巧，但它会在这里奏效吗？还是 jQuery 会做得更好？

我可能遇到的第二个问题是覆盖两个背景`div`的内容层（标记为红色）。

你能帮我吗？

提前致谢，对任何语言错误深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:56:00.190

您可以使用伪元素来做到这一点。

[http://jsfiddle.net/JDcF3/](http://jsfiddle.net/JDcF3/)

我更改了颜色以使其可见

```
<div class="foo"></div>

.foo {
    position: relative;
    width: 200px;
    height: 100px;
    background: blue;
}

.foo:after {
    content: '';
    display:block;
    height:100px;
    width: 100px;
   -webkit-transform: skew(30deg, 0deg);
    background: red;
    left: 150px;
    position:absolute;
    z-index: -1;
} 
```

# javascript - 加载 Pinterest pinit.js 文件时 Chrome 中的警告

> ID：15077678
> 
> 赞同：3
> 
> 时间：2013-02-25T22:24:52.497
> 
> 标签：javascript, google-chrome, pinterest

尝试加载 Pinterest API JS 代码时收到以下警告：

```
Resource interpreted as Script but transferred with MIME type text/plain: "http://widgets.pinterest.com/v3/pidgets/log/?via=http%3A%2F%2Fsamplesite…are%2F&type=pidget&callback=PIDGET_1361830898800.f.devNull&t=1361830898802". 
```

访问脚本：

```
 <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

还有这个代码：

```
$(".div5").append('<div class="pin-it"><a id="pinterest_a" data-pin-config="above" href="//pinterest.com/pin/create/button/?url=' + source_url + '&media=' + source_image + '&description=' + image_description + '" data-pin-do="buttonPin" ><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" /></a></div>');

    var element = document.getElementById('pinterest_a');

    try{
        (function (x) {
            for (var n in x)
                if (n.indexOf('PIN_') == 0)
                    return x[n];

            return null;
        })(window).f.render.buttonPin(element);
    }
    catch (e) {
        //catch and just suppress error
    } 
```

使用谷歌浏览器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:31:43.780

这是 Pinterest 设置 Web 服务的方式的一个小问题。您可以放心地忽略它。

# php - 应用程序主题和作曲家？

> ID：15077679
> 
> 赞同：0
> 
> 时间：2013-02-25T22:24:55.523
> 
> 标签：php, themes, package, laravel, composer-php

我正在使用 Laravel 4 (beta) 框架我的新应用程序，它被设计为开源下载并运行此安装脚本（例如博客、时间跟踪器等）类型的应用程序。

我想让界面成为主题，我可以通过几种方式来实现，但我不确定该选择哪一种。因为我正在使用作曲家，我应该将主题引擎设置为期望主题是包，还是应该只在内部管理主题？（又名让他们坐在*主题*目录中）。

```
/---------------------------------------------------- ------------------------------\
| 内部管理主题 | 打包主题 |
|----------------------------------------|--------- ------------------------------|
| 易于管理 | 易于主题开发者管理 |
|----------------------------------------|--------- ------------------------------|
| 手动更新，或需要外部 | 通过作曲家更新自动更新|
| 构建主题repo | |
|----------------------------------------|--------- ------------------------------|
| 可以一键做外接主题 | 用户需要更新和管理 |
| 主题的安装和删除| composer.json 用于所有主题安装 |
| | 和搬迁|
|----------------------------------------|--------- ------------------------------|
| 资产必须是静态的——尽管这 | 主题开发者可以免费使用pre |
| 不应该是资产不能 | 编译器和资产管理器允许 |
| 使用它时真的很动态| 用于基于 a | 的动态 css 等
| 方法 | 配置或类似的。|
|----------------------------------------|--------- ------------------------------|
| 需要写代码发布全部 | 资产公开|
| 资产到公共目录 | 通过工匠的资产目录：发布 |
| 复制已经存在的东西| 命令或通过所选资产 |
| laravel 框架 | 预编译器 |
|----------------------------------------|--------- ------------------------------|
| 易于在 | 中安装主题 想不出简单的管理方法 |
| 自定义主题存储库，只需压缩 | 不会注册的主题|
| 归档主题 | 作曲家存储库|
\-------------------------------------------------- ------------------------------/

```

所以，从上面的列表来看，这是一个相当平衡的折衷，真正的问题是，我是否让我（和脚本的最终用户）管理起来更复杂，但主题开发人员更容易做更多事情。或者我是否限制了主题开发人员可以做的事情，让我和最终用户更容易管理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:32:05.157

Wordpress 和类似产品允许技术技能很少的用户安装主题。如果您的市场同样是非技术性的，那么您将希望使用“内部”主题。使用 Composer 几乎将您限制在非常技术性的受众中。

（除非你做了一些超级聪明的事情，比如让你的应用程序更新 composer.json 文件。那会吓到我的，但这是同时拥有这两个系统的一种方法。）

# python - 如何在 Mac 上更新 Mercurial 以使用 CAC 身份验证

> ID：15077682
> 
> 赞同：1
> 
> 时间：2013-02-25T22:25:04.960
> 
> 标签：python, mercurial

任何人都知道如何在 Mac 上更新 Mecurial 以使用 CAC 身份验证？

我的工作 PC 上有一个提供的版本，但我想将 Mac 用于我的所有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:30:09.467

[您可以使用来自例如macports](http://www.macports.org/)或[homebrew](http://mxcl.github.com/homebrew/)的第三方软件包在 MacOS 上安装其他软件包或更新版本。我更喜欢macports。两者都提供了有关如何开始的良好文档

编辑：你检查过这个[页面](http://mercurial.berkwood.com/)吗？

第二次编辑：可能是反复无常的需要[python 2.7](http://www.python.org/getit/)

所以在这种情况下不需要 macports 或 homebrew

# jquery-ui - JQueryUI datepicker 的 setDate 方法不适用于某些日期格式

> ID：15077689
> 
> 赞同：1
> 
> 时间：2013-02-25T22:25:44.043
> 
> 标签：jquery-ui, datepicker, date-format

我正在使用 JqueryUI 日期选择器，如果我使用这样的格式：'mm yy'，我无法在日期选择器上调用'setDate' 方法。

在这里查看我的片段：

```
$(function(){
    $('#datepicker').datepicker(
        {dateFormat: 'mm yy'}
    );

    $('#datepicker').datepicker('setDate', new Date(2010, 10, 1));
    var d = $("#datepicker" ).datepicker('getDate');
    alert(d); //this should alert 2010,10,1, but it is not! it alerts the current time instead
}); 
```

[http://jsfiddle.net/wintlu/DmmQU/](http://jsfiddle.net/wintlu/DmmQU/)

我的观察是：如果我使用包含日期部分的格式，例如“dd mm yy”，那么我可以使用 setDate，但如果我使用不带日期部分的格式，例如“mm yy”，那么我不能使用 setDate。

我的问题是：这是日期选择器的错误吗？如果是这样，什么是四处走走？

提前致谢

# firefox - 火狐的 MIMEType 关联不正确？

> ID：15077691
> 
> 赞同：0
> 
> 时间：2013-02-25T22:25:47.257
> 
> 标签：firefox, npapi, browser-plugin

我正在使用一个现有的 ActiveX 控件，我们有一个 NPAPI，它在 FireFox 中的大部分工作都很好。

它支持查看图像类型，一种类型，TIFF 可以很好地工作，但由于某种原因 JPG 不能。

所以我将 .rc 文件中的 MIMEType 简化为简单的“image/tiff”。效果很好，我可以将 *.tif 文件拖入 FireFox 并加载插件。

但是，当我的 MIMEType 被简单地定义为“image/jpeg”时，它不适用于 *.jpg 文件，而 FF 只是本机显示 JPG 而不是让我的插件来做。我尝试了“image/jpe”，它适用于 *.jpe 文件。我也试过“image/jpg”，但没有运气。JPG 是 NPAPI 的特例吗？

此外，当我指定“image/jp2”时，我可以让我的插件加载 *.jp2 文件。我似乎没有安装任何其他可以加载 JPG 的插件。事实上，当 FireFox 显示 JPG 时，plugin-container.exe 甚至不会加载，这让我认为它与 FF 的本机显示覆盖我的插件有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:45:27.297

对于支持的（内置）图像类型，不考虑插件（我认为任何浏览器都不会这样做）。
TIFF 不是 Firefox 支持的图像类型，因此如果它们处理该 mimetype/扩展，则使用插件。

*注意*：在处理图像 mimetype 时，您很容易与其他插件（特别是 Quicktime）发生冲突 - 如果多个插件支持特定的 mimetype 或扩展，则无法真正保证将使用哪个插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:36:40.617

如果 Firefox 覆盖了您的插件，我一点也不感到惊讶。他们想要的最后一件事是让插件能够接管查看基本文件类型。老实说，我对压倒一切的 tiff 工作感到有点惊讶。

# css - 溢出：隐藏在 Safari 中不起作用

> ID：15077696
> 
> 赞同：2
> 
> 时间：2013-02-25T22:25:58.267
> 
> 标签：css, safari

我遇到了一个问题，我不明白：我制作 YouTube 图片的方法是将它们放在一个容器中

```
border-radius: 50%; 
overflow: hidden; 
```

这适用于 Chrome 和 FF，但 Safari 将图像“放在”圆形容器上。

请检查小提琴：http: [//jsfiddle.net/nikita_turing/2QyY3/](http://jsfiddle.net/nikita_turing/2QyY3/)

如何在 Safari 上制作圆形图像？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T22:40:05.110

在 Safari 5.1.7 (PC) 中`position:relative`，图像上的 似乎阻止`border-radius`应用

在您的jQuery中删除`position:relative`并设置`margin-left`（而不是）然后它可以工作`left`

[jsfiddle 演示](http://jsfiddle.net/2QyY3/2/)

# combobox - Knockout optionValues 建模问题

> ID：15077698
> 
> 赞同：0
> 
> 时间：2013-02-25T22:25:59.073
> 
> 标签：combobox, knockout.js, options

我正在使用不同类型的控件 ( [http://jsfiddle.net/gZC5k/993/](http://jsfiddle.net/gZC5k/993/) ) 的嵌套表单，该表单在添加下拉控件时出现问题。

我的 HTML 中有这个

```
 <tr class='person'>
                        <td>Gender</td>
                        <td>
                            <select data-bind="options: optionGender, value: gender"></select>
                        </td>
                    </tr> 
```

这在模型中

```
 self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function (contact) {
    return {
        firstName: ko.observable(contact.firstName),
        lastName: ko.observable(contact.lastName),
        isKey: ko.observable(contact.isKey),
        gender: ko.observable(contact.gender),
        phones: ko.observableArray(ko.utils.arrayMap(contact.phones, function (phone) {
            return {
                type: ko.observable(phone.type),
                number: ko.observable(phone.number),
                calls: ko.observableArray(phone.calls)
            };
        })),
        addresses: ko.observableArray(contact.addresses),
        optionGender: ["Male", "Female"]
    };
}));

self.addContact = function () {
    self.contacts.push({
        firstName: "",
        lastName: "",
        isKey: "false",
        gender: "Female",
        phones: ko.observableArray(),
        addresses: ko.observableArray()
    });
}; 
```

当我最初加载数据时，我可以编辑所有值并且相应的 JSON 是好的当添加一个新的人时，事情出错了。

当所有与 Gender 字段相关的东西都被删除时，表单就可以正常工作（参见[http://jsfiddle.net/gZC5k/995/](http://jsfiddle.net/gZC5k/995/)）。我认为我是把

```
 optionGender: ["Male", "Female"], 
```

在错误的地方，但无法弄清楚它应该在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:33:42.313

以为我通过在 addContact 函数中重复 optionGender 找到它（在[http://jsfiddle.net/gZC5k/997/](http://jsfiddle.net/gZC5k/997/)）

```
var optionGender = [
"Male",
"Female"];

var ContactsModel = function (contacts) {
var self = this;
self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function (contact) {
    return {
        firstName: ko.observable(contact.firstName),
        lastName: ko.observable(contact.lastName),
        isKey: ko.observable(contact.isKey),
        gender: ko.observable(contact.gender),
        phones: ko.observableArray(ko.utils.arrayMap(contact.phones, function (phone) {
            return {
                type: ko.observable(phone.type),
                number: ko.observable(phone.number),
                calls: ko.observableArray(phone.calls)
            };
        })),
        addresses: ko.observableArray(contact.addresses),
        optionGender: optionGender,
    };
}));

self.addContact = function () {
    self.contacts.push({
        firstName: ko.observable(""),
        lastName: ko.observable(""),
        isKey: ko.observable("true"),
        gender: ko.observable("Female"),
        optionGender: optionGender,
        phones: ko.observableArray(),
        addresses: ko.observableArray()
    });
}; 
```

但这会导致在结果 JSON 中有选项列表，就像这样

```
[
{
"firstName": "",
"lastName": "",
"isKey": "true",
"gender": "Male",
"optionGender": [
  "Male",
  "Female"
],
"phones": [],
"addresses": []
},
{
"firstName": "",
"lastName": "",
"isKey": "true",
"gender": "Female",
"optionGender": [
  "Male",
  "Female"
],
"phones": [],
"addresses": []
}
] 
```

所以我还在寻找解决方案..

# mysql - 在 nodejs 中使用现有的 mysql 模式

> ID：15077700
> 
> 赞同：2
> 
> 时间：2013-02-25T22:26:00.463
> 
> 标签：mysql, node.js, express, node-mysql

我也尝试使用 sequelize 和 node-orm - 但是有没有办法重用现有的 mysql 模式？我有一个用 mysql 中的表定义的 db 模式，并希望将它与我的 node.js 应用程序一起使用（使用 express）。这样，我就不用再写所有定义表的define方法了。任何帮助表示赞赏...我已经解决了一堆 stackoverflow 问题，例如：[我应该为 Node.js 和 MySQL 使用哪个 ORM？](https://stackoverflow.com/questions/6007353/which-orm-should-i-use-for-node-js-and-mysql)

谢谢，JP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T00:10:02.193

结帐[bookshelf.js](http://bookshelfjs.org)，它不需要您在模型层中定义模式。

# delphi - TShellChangeThread 中的内存泄漏

> ID：15077702
> 
> 赞同：1
> 
> 时间：2013-02-25T22:26:11.163
> 
> 标签：delphi, memory-leaks, delphi-2010, delphi-xe

我遇到了一个问题，在 TShellListView 中将 AutoRefresh 设置为 True 会导致内存泄漏。这是一个已知问题，我在这里找到了解决方法：http: [//www.delphigroups.info/2/bf/292629.html](http://www.delphigroups.info/2/bf/292629.html)。

我的问题是我的应用程序当前是使用 Delphi 2010 (Rad Studio 7) 编译的，并且该版本不包括 source `ShellCtrls.pas`，必须对其进行修改以实现上述修复。

我的开发机器上还有一份 Rad Studio 9 (Delphi XE)。此版本*确实*包含`ShellCtrls.pas`. 抱有希望，2010年的XE源能用吗？如果没有，有没有办法获得 ShellCtrls for Delphi 2010 的源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T00:28:33.200

所有专业版和更高版本的 SKU 都包含源代码（尽管包含的 VCL 源代码因 SKU 而异，但演示通常不这样做，因为它们希望您需要该功能并因此升级您的 SKU）。如果您没有 D2010 中的源代码，那么您要么在寻找错误的位置（它在`Samples`or`Demo`文件夹中，而不是 VCL 源文件夹中），要么您没有安装演示。

演示默认安装在`Users\Public\Documents\`树中；您可以使用您正在使用的 Delphi/RAD Studio 版本的开始菜单找到它们。

例如，对于 Delphi 2007，它们位于`C:\Users\Public\Documents\RAD Studio\5.0\Demos`Win7 上，该`ShellControls`文件夹专门位于`C:\Users\Public\Documents\RAD Studio\5.0\Demos\DelphiWin32\VCLWin32\ShellControls`.

在`XE2`中，变化很小；他们在`C:\Users\Public\Documents\RAD Studio\9.0\Samples\Delphi\VCL\ShellControls`。

（仅供参考：在 WinXP 下的 Delphi 7 上，它们位于`C:\Program Files\Borland\Delphi7\Demos\ShellControls`.

# caching - Symfony2 动态路由 - 缓存问题

> ID：15077705
> 
> 赞同：18
> 
> 时间：2013-02-25T22:26:30.693
> 
> 标签：caching, dynamic, symfony, routing, routes

我正在尝试创建动态路由，因为我创建了一个 CMS，其中创建的每个页面都可以关联到一个路由。我正在使用此链接中的示例 - [http://php-and-symfony.matthiasnoback.nl/2012/01/symfony2-dynamically-add-routes/](http://php-and-symfony.matthiasnoback.nl/2012/01/symfony2-dynamically-add-routes/)一切正常，但是路由被缓存，因此只有一条路线会工作，但除非我清除缓存，否则下一个不会。是否可以在此阶段仅删除路由缓存，还是有其他选择？我不想在每个页面加载时删除整个缓存目录，因为那没有意义。这是示例代码：

```
namespace Acme\RoutingBundle\Routing;

use Symfony\Component\Config\Loader\LoaderInterface;
use Symfony\Component\Config\Loader\LoaderResolver;
use Symfony\Component\Routing\Route;
use Symfony\Component\Routing\RouteCollection;

class ExtraLoader implements LoaderInterface
{
private $loaded = false;

public function load($resource, $type = null)
{
    if (true === $this->loaded) {
        throw new \RuntimeException('Do not add this loader twice');
    }

    $routes = new RouteCollection();

    $pattern = '/extra';
    $defaults = array(
        '_controller' => 'AcmeRoutingBundle:Demo:extraRoute',
    );

    $route = new Route($pattern, $defaults);
    $routes->add('extraRoute', $route);

    return $routes;
}

public function supports($resource, $type = null)
{
    return 'extra' === $type;
}

public function getResolver()
{
}

public function setResolver(LoaderResolver $resolver)
{
    // irrelevant to us, since we don't need a resolver
}
} 
```

然后我为 ExtraLoader 做了一个服务：

```
<!-- in /src/Acme/RoutingBundle/Resources/config/services.xml -->
<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services       http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service id="acme.routing_loader" class="Acme\RoutingBundle\Routing\ExtraLoader">
            <tag name="routing.loader"></tag>
        </service>
    </services>
</container> 
```

我们需要的最后一件事是在 /app/config/routing.yml 中增加几行：

```
AcmeRoutingBundle:
    resource: .
    type: extra 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-11T21:37:22.660

你看过[`DynamicRouter`](http://symfony.com/doc/master/cmf/components/routing/dynamic.html)这个`symfony-cmf`项目吗？我认为这符合您的需求，并且正是为您的用例创建的。

您当前的实现有一些您应该知道的真正问题。首先，您必须为您创建/编辑/删除的每个路由清除路由缓存。这会无缘无故地导致竞争条件和内存峰值。

symfony 的默认实现是处理静态路由，而不是动态路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T11:49:44.513

这是非常低效的，因为每条新路由都必须清除缓存，因此您将被 hdd/ssd 绑定到无用的清除缓存。另一种方法是在控制器中创建一个新方法，该方法接受 GET 上的动态页面并在 twig 中显示动态内容。

您可以创建一个服务来呈现动态页面，这将简化事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T16:23:21.227

我研究并尝试了一下，我发现您可以删除以下文件：

对于开发：

```
/app/cache/dev/appDevUrlGenerator.php
/app/cache/dev/appDevUrlGenerator.php.meta
/app/cache/dev/appDevUrlMatcher.php
/app/cache/dev/appDevUrlMatcher.php.meta 
```

产品：

```
/app/cache/prod/appProdUrlGenerator.php
/app/cache/prod/appProdUrlMatcher.php 
```

这只有一个小缺点。我正在使用当前路线来确定菜单项是否处于活动状态：

```
{% set currentPath = path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) %}

...

<li{% if currentPath == path('mybundle_default_index') %} class="active"{% endif %}> 
```

在这种情况下`app.request.attributes.get('_route')`，仍然缓存为可能不再存在的路由。我还不知道这是否也只涉及树枝缓存或其他部分。

另外我不明白为什么你必须在每次页面加载时删除整个缓存？您只需在添加新路由时清除缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-24T21:45:44.627

我已经在我自己的 CMS 中解决了这个问题。

起初我覆盖了基`Router`类：

```
parameters:
    router.class: Name\Of\Your\Router 
```

并扩展它：

```
use Symfony\Bundle\FrameworkBundle\Routing\Router as BaseRouter;

class Router extends BaseRouter
{
    public function clearCache($cache_dir, $environment, $warm_up)
    {
        $cache_dir  .= '/'. $environment;
        $environment = ucfirst($environment);

        @unlink($cache_dir .'/app'. $environment .'UrlMatcher.php');
        @unlink($cache_dir .'/app'. $environment .'UrlGenerator.php');

        if ($warm_up) {
            $this->matcher   = null;
            $this->generator = null;

            $this->warmUp($cache_dir);
        }
    }
} 
```

其次，我创建了一个服务`CacheService`：

```
cache_service:
    class: Name\Of\Your\CacheService
    arguments:
        - @router
        - %kernel.environment%
        - %kernel.root_dir%/cache 
```

并添加了以下方法：

```
public function clearCache($environment = null)
{
    if (null === $environment) {
        $environment = $this->environment;
    }

    $this->router->clearCache($this->cache_dir, $environment, $this->environment == $environment);
} 
```

所以现在我可以在需要清除当前或特定环境的缓存时调用此方法。

# css - 仅使用 CSS 将 IMG 元素移动到文档开头

> ID：15077706
> 
> 赞同：1
> 
> 时间：2013-02-25T22:26:33.130
> 
> 标签：css

我有很多这样的邮寄文件：

```
<p>...</p>
<img/>
<p>...</p>
<p>...</p>
<img/>
<img/>
<p>...</p>
<p>...</p>
<img/>
<p>...</p>
<p>...</p>
<img/> 
```

我试图通过 CSS收集**看起来像这样的 IMG 元素：**

```
<img/>
<img/>
<img/>
<img/>
<img/>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p> 
```

"Float:left" 仅将 IMG 移动到前一个 P 元素的开头。如果没有 JS，有没有办法像 CSS 那样以编程方式收集 IMG 元素？*或者以另一种方式将 P 元素移动到文档末尾？*

Position:absolute 将是一个解决方案，但随后我松散了图像高度，使图像链看起来像一个系列..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:15:34.517

**对的，这是可能的 ：）**

对于位于下方的段落，我们必须为容器提供所有元素的边距顶部高度，这里我使用了父**正文**

再次，这有效。但对性能不利

[http://jsfiddle.net/TJU2w/](http://jsfiddle.net/TJU2w/)

```
img {
    position:absolute;

    height: 100px;
    width: 100px;
    background: blue;
}
p { background: grey; }

img:nth-of-type(1){
    top: 0;
    left: 0;
}
img:nth-of-type(2){
    top: 110px;
    left: 0;
}
img:nth-of-type(3){
    top: 220px;
    left: 0;
}
img:nth-of-type(4){
    top: 330px;
    left: 0;
}
img:nth-of-type(5){
    top: 440px;
    left: 0;
}

body {
    margin-top: 550px;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:46:50.553

只要您的图像是段落的兄弟，您就可以使用 Flexbox 来执行此操作。

[http://codepen.io/cimmanon/pen/htJqA](http://codepen.io/cimmanon/pen/htJqA)

```
.container {
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -moz-box-orient: vertical;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-flex-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}

.container p {
  -moz-box-ordinal-group: 2;
  -webkit-flex-order: 1;
  -ms-flex-order: 1;
  -webkit-order: 1;
  order: 1;
} 
```

但是，这在任何早于 IE10 的 IE 中都不起作用。 [http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:40:10.780

如果没有 javascript，就不可能更改文档的层次结构。

您可以做的是用 更改所有位置`position:relative;`，但这需要做很多工作，而且不能通用。

# bonsaijs - Orbit中的盆景js

> ID：15077707
> 
> 赞同：0
> 
> 时间：2013-02-25T22:26:34.247
> 
> 标签：bonsaijs

我可以将我的形状添加到舞台上并让它们进行淡入淡出等，但我不能让它们变形——我是否需要以某种方式分离成线条和曲线？

```
var shape = new Path('M 321.051,510.078 c 0,0-10.126-23.854-19.438-45.792 c -7.927-18.675-15.265-35.961-15.265-35.961 s -17.977-41.111-19.036-77.643 c -1.05-36.243,14.817-67.908,14.817-67.908 s -36.176,73.71-49.086,137.219 c -9.327,45.879,3.426,87.39,3.426,87.39 L 321.051,510.078 z').attr({fillColor: 'red'});

stage.addChild(shape);

var targetPath = new Path('M 321.75,515.816 c 0,0,8.678-42.28,0.604-77.096 c -8.102-34.936-32.956-62.408-32.956-62.408 l -76.102-96.41c0,0-39.866-41.142-45.55-84.785 c -4.992-38.332,24.108-79.856,24.108-79.856 s -55.379,72.451-63.818,141.683 c -6.186,50.745,33.857,104.106,33.857,104.106 s 36.746,38.732,51.061,75.346 c 13.283,33.975,4.212,66.029,4.212,66.029L326.75,515.816 z').attr({fillColor: 'blue'});

shape.addTo(stage);

shape.morphTo(targetPath, '3s'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:03:24.670

Bonsai [0.4.1](https://github.com/downloads/uxebu/bonsai/bonsai-0.4.1.min.js)不支持平滑曲线 (s, S) SVG 命令。查看相关票证：[https ://github.com/uxebu/bonsai/issues/191](https://github.com/uxebu/bonsai/issues/191)

我猜你可以通过删除这些命令来让它工作。

# php - PHP、MySQL 和 Google Maps API 按城市和州名生成 POI？

> ID：15077724
> 
> 赞同：3
> 
> 时间：2013-02-25T22:27:37.570
> 
> 标签：php, javascript, mysql, google-maps, google-maps-api-3

我正在构建一个将利用 Google Maps JavaScript API v3 的应用程序。我有一个由 City 和 State 存储的 MySQL 数据库中的位置列表（我的应用程序不需要比这更高的精度），我想使用 API 在地图上绘制这些点。

如果您有想要绘制的经度和纬度点，[本教程将展示如何做到这一点。](https://developers.google.com/maps/articles/phpsqlajax_v3)

我的问题是，在我花很多时间看看这是否可行之前，有没有人知道谷歌地图是否能够绘制点`<City>, <State>`，因为我没有经度和纬度点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:30:40.077

您将需要使用地理编码 API 来获取纬度和经度以显示一个点。

我为我建立的一个房地产网站做了这个。

有关 API 文档，请参阅[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:30:50.673

是的，您甚至可以使用[Geocoding API](https://developers.google.com/maps/documentation/geocoding/)来获取纬度和经度，然后以这种方式进行绘制。

# tsql - 更新大量存储过程的文本

> ID：15077727
> 
> 赞同：2
> 
> 时间：2013-02-25T22:27:45.577
> 
> 标签：tsql

这个问题几乎概括了它。我必须为存储过程替换大量文本。手动操作是不可能的，但足以让我问这个问题。我也更喜欢自动化，因为当我们在生产中进行更改时，它可以减少用户错误的变化。

我可以像这样识别它们：

```
select OBJECT_DEFINITION(object_id), *
from sys.procedures
where OBJECT_DEFINITION(object_id) like '%''MyExampleLiteral''%'
order by name 
```

有没有办法批量更新它们以将“MyExampleLiteral”更改为“MyOtherExampleLiteral”？

我什至会找到一种打开所有存储过程的方法。只是在更大的列表中找到这些存储过程将需要一些时间。

我考虑过使用上面的 select 语句生成 alter 语句，但后来我丢失了换行符。

提前致谢，

这是 Microsoft SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:03:14.623

您可以使用动态 sql 执行此操作。查询系统表以获取包含“MyExampleLiteral”的所有 SP：

```
SELECT [object_id] FROM sys.objects o
WHERE type_desc = 'SQL_STORED_PROCEDURE'
    AND is_ms_shipped = 0 
    AND OBJECT_DEFINITION(o.[object_id]) LIKE '%<search string>%' 
```

然后，编写一个 while 循环来遍历这些 object_id。在 while 循环中，将`OBJECT_DEFINITION()`放入字符串并替换“MyExampleLiteral”，然后替换`CREATE PROCEDURE`为`ALTER PROCEDURE`并使用`sp_executesql`.

做这种疯狂的事情，请确保先备份数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:34:30.550

根据所讨论的数据库，可以使用不同的工具。例如，Microsoft SQL Server Data Tools 与 Visual Studio 集成，并允许您相当轻松地执行这些类型的操作。该数据库作为脚本存储在您的解决方案中，然后您可以搜索和替换您想要的任何关键字。我假设其他平台也会有类似的工具。

# php - 将 Django 评论系统整合到使用 javascript 和 PHP 构建的博客中

> ID：15077729
> 
> 赞同：0
> 
> 时间：2013-02-25T22:27:49.967
> 
> 标签：php, javascript, django

我有一个几年前基于 JavaScript 和 PHP 构建的当前站点，现在我想在其中合并一个 Django 评论模块（[https://github.com/HonzaKral/django-threadedcomments](https://github.com/HonzaKral/django-threadedcomments)）。但是，我对 Django 非常非常陌生，并且不太确定如何将 Django 合并到预先存在的 JavaScript 和 PHP 站点中。查看我要使用的模块，它们每个都需要附加到 Django 中的对象。我将如何将它连接到 PHP 中的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:33:45.907

不要将 PHP 和 Python 之类的语言混在一起，而是抽象出来。他们可以共享一个数据库，为什么不从那里开始，或者一个 API？

从阅读 Django 文档开始，我发现它们非常有帮助，还有一本免费的在线[Django 书籍](http://www.djangobook.com/en/2.0/index.html)阅读了有关模型的内容。

作为最后的手段，有这样的选择> [http://www.scottgorlin.com/2009/07/embedding-django-in-php/](http://www.scottgorlin.com/2009/07/embedding-django-in-php/) [http://komunitasweb.com/2009/03/using-django-template-在-php/](http://komunitasweb.com/2009/03/using-django-template-in-php/)

# ios - 将 UITextField 适合 UITableView 单元格的最佳路线

> ID：15077730
> 
> 赞同：1
> 
> 时间：2013-02-25T22:27:56.357
> 
> 标签：ios, ios5, uitableview, uitextfield

我想知道使 UITextField 适合 UITableView 单元格的最佳方法是什么。

我以前使用过这种方法：

```
@implementation UITextField (custom)
- (CGRect)textRectForBounds:(CGRect)bounds {
    return CGRectMake(bounds.origin.x + 0, bounds.origin.y + 10,
                      bounds.size.width - 30, bounds.size.height - 16);
}
- (CGRect)editingRectForBounds:(CGRect)bounds {
    return [self textRectForBounds:bounds];
}
@end 
```

但这会导致一个问题：

```
Category is implementing a method which will also be implemented by its primary class 
```

尽管我已经看到了隐藏这些警告的方法，但感觉这更像是一种 hack 而不是正确的方法。

将 UItextField 适合单元格的最佳方法是什么。这是我的领域：

```
// Username field
usernameField = [[UITextField alloc] initWithFrame:(CGRectMake(10, 0, 300, 43))];
usernameField.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

它像这样输入到单元格中：

```
if (indexPath.row == 0) {
        [cell.contentView addSubview:usernameField];
    } 
```

图片： ![在此处输入图像描述](../Images/eec7bcecced50f9d943721b9b4665123.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:37:33.730

我建议通过覆盖您的自定义 UITableViewCell 的 layoutSubviews 方法来做到这一点。imo 那里简单得多。就像是：

```
 - (void)layoutSubviews
    {
        [super layoutSubviews];
        float  w, h;

        w = (int)(self.frame.size.width - 30);          
            h = (int)(self.frame.size.height - 16);

        [self.detailTextLabel setFrame:CGRectMake(0, 10, w, h)];
    } 
```

这是自定义单元格初始化的片段

```
 @interface MyCustomCell: UITableViewCell {

    }
    @end

    @implementation MyCustomCell

    - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
    {
        if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) {
            }
            return self;
    } 
```

这是创建自定义单元格的片段：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"Cell";

        MyCustomCell *cell = (MyCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[[MyCustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
        } 
```

# android - Activity 接收广播时如何更改 Activity 中的按钮文本？

> ID：15077732
> 
> 赞同：1
> 
> 时间：2013-02-25T22:28:08.997
> 
> 标签：android, broadcast

我在活动中有一个按钮，现在我希望在文件完成解压缩后更改按钮文本。我已经完成了如下操作，并在活动中注册了广播。我的问题是如何在`onReceive()`方法中获取活动实例。

```
BroadcastReceiver receiveDecompressionNotification = new BroadcastReceiver(){

    @Override
    public void onReceive(Context c, Intent in) {
        // TODO Auto-generated method stub

    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T23:13:40.737

如果您现在还没有找到解决方案，这可能会对您有所帮助，因为它几乎是同一件事：在我的情况下，当我`service`停止播放声音时，我想更改按钮的文本。因此，播放后将执行以下操作：

```
mediaPlayer.setOnCompletionListener(new OnCompletionListener() {
    @Override
    public void onCompletion(MediaPlayer mp)
    {
        Intent i = new Intent("CHANGE_BUTTONSTATE");
        i.putExtra("state", "play");
        sendBroadcast(i);
    }}); 
```

像您一样，我`BroadcastReceiver`在执行请求的活动中注册了我的。对应的`onReceive()`看起来像这样：

```
@Override
public void onReceive(Context context, Intent intent)
{
    String state = intent.getExtras().getString("state");
    playButton.setText(state);
}}; 
```

在`playButton`活动中声明的位置`onCreate()`：

```
Button playButton = (Button) findViewById(R.id.playButton); 
```

这种方法可能不是最好的，因为我是初学者 - 所以任何改进和建议都值得赞赏。

# php - 从 PHP 中删除最后一个逗号，该逗号将进入 javascript 图像预加载脚本

> ID：15077743
> 
> 赞同：0
> 
> 时间：2013-02-25T22:28:50.450
> 
> 标签：php, javascript, image, preload

您好我有一个 javascript 预加载脚本，其中包含一个 php 命令来预加载上传的图像以供将来的 onClick 操作。无论如何，我无法从预加载脚本从中提取的最后一个图像中删除最后一个逗号。

这是脚本：

```
<div style="display:hidden">
<script type="text/javascript">
    <!--//--><![CDATA[//><!--
        var images = new Array()
        function preload() {
            for (i = 0; i < preload.arguments.length; i++) {
                images[i] = new Image()
                images[i].src = preload.arguments[i]
            }
        }
        preload(

        <?php
            for ($i = 0; $i < 6; $i++) {
                if (!empty($imgs[$i])) {
                    echo "'http://www.samplegallery.com/upload/image.php?img_source_url=" . $imgs[$i] . "&img_resize_to=500',";
                }
            }
        ?>

        )
    //--><!]]>
</script>
</div> 
```

无论如何，我需要找出如何从上传的最后一张图片中删除最后一个逗号。不知道该怎么做。请帮我！顺便说一句...图像没有扩展名，因为它们链接到一个 php 图像脚本，该脚本可以调整它们的大小并将它们放入水印中。希望大家能帮我解惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:32:43.143

换个角度想！逗号可能在开头，然后从第一个逗号中删除:)

```
if (!empty($imgs[$i])) {
  $comma = $i == 0? '' : ',';
  echo $comma."'http://www.samplegallery.com/upload/image.php?img_source_url=" . $imgs[$i] . "&img_resize_to=500'";
} 
```

如果`$i`等于 5、8 或 139871，这种方式无关紧要！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:35:12.287

最简单的方法是使用 php 内置`implode()`函数

```
<?php echo implode(',', $imgs); ?> 
```

如果你只想要前 6 张图片，你可以像这样制作一个数组

```
$imgs = array_slice($imgs, 0, 6); 
```

所以整个事情必须是这样的：

```
preload(
<?php
    $imgs = array_slice($imgs, 0, 6);
    echo implode(',', $imgs);
?>
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:35:25.700

要从字符串中删除最后一个逗号，只需使用以下命令：

```
$string = rtrim($string, ","); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:50:38.187

我可以为您的问题提出一种稍微不同的方法吗？每当您想将数据传递给 JavaScript 时，JSON 可能就是您想要生成的东西。[`json_encode()`](http://php.net/json_encode)帮助你。您的脚本可能如下所示：

```
var urls = <?php echo json_encode(array_values($imgs)); ?>;

var images = [];
function preload(urls) {
    for (var i = 0; i < urls.length; i++) {
        var url = 'http://www.samplegallery.com/upload/image.php?img_source_url='
            + encodeURIComponent(urls[i])
            + '&img_resize_to=500';

        images[i] = new Image();
        images[i].src = url;
    }
}

preload(urls); 
```

请注意，我冒昧地添加了缺少的分号和`var`声明，以使您的变量保持本地化。我添加了`array_values()`调用以确保您传递的是数字索引数组，而不是会导致对象文字`{ ... }`而不是数组 literl的关联数组`[ ... ]`。

我还将 URL 构建移至 JavaScript，因为我没有看到将其保留在 PHP 中的理由。如果您需要它在 PHP 中并且想要避免“手动”循环，请查看[`array_map()`](http://php.net/array_map).

另请注意，我正在运行您的 URL 片段[`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)以正确转义您传入的任何内容。

关于安全性的说明：如果您的脚本`/upload/image.php`接受任意 URL（和/或“本地文件资源”），请考虑将允许的域和路径列入白名单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T23:00:36.200

你可以用foreach...

```
<?PHP 
    if ($count = count($imgs)) {
        foreach ($imgs as $key=>$img) {
            echo "http://www.samplegallery.com/upload/image.php?img_source_url="
            . $img . "&img_resize_to=500";
            if ($key < $count-1) echo ",";
        }
    }

?> 
```

# asynchronous - 在启动时通过 WebRequst 加载数据

> ID：15077745
> 
> 赞同：1
> 
> 时间：2013-02-25T22:28:54.070
> 
> 标签：asynchronous, windows-phone, webrequest

我想在我的应用程序启动时从网络加载数据，并实际等待数据，因为数据会影响应用程序的外观。

我正在使用 WindowsPhone 和 c#。

我遇到的问题是，所有 WebRequest.BeginGetResponse 类型的方法都是异步的，但是当我阻止我的主线程等待结果时，“异步”方法似乎被阻止了。

有没有简单的方法可以等待结果？也许一个 API 可以更好地控制从网络下载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:03:43.250

根据您在上述评论中的回复，我建议以下内容：

*   如果您有启动画面，则显示您的启动画面，然后显示加载屏幕。
*   *不要阻塞 UI 线程*，原因有以下三个：

    *   你不需要
    *   您需要 UI 线程继续运行，以便显示不确定的进度或其他类型的加载动画
    *   如果 UI 线程被锁定一段时间，Windows Phone 将终止您的应用程序
*   加载加载屏幕后，启动**BeginGetResponse**。

*   **EndGetResponse**完成后，执行您需要的操作，然后导航到应用程序的主页。

祝你好运！

# c# - 这种双重实例化是有害的，还是根本没有必要的？

> ID：15077748
> 
> 赞同：3
> 
> 时间：2013-02-25T22:29:13.780
> 
> 标签：c#, garbage-collection, refactoring, resharper

在仔细阅读遗留源时，我发现了这一点：

```
DataSet myUPC = new DataSet();
myUPC = dbconn.getDataSet(dynSQL); 
```

Resharper 正确地将其中的“new Dataset()”部分“变灰”，并建议“删除冗余初始化程序”，但它就这么无害吗？编译器是否只是在第二次分配之前处理第一个实例？IOW，第一个任务是完全没有必要的，还是可能有害的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T22:31:21.930

> 编译器是否只是在第二次分配之前处理第一个实例？

不，这里没有自动处置。

> IOW，第一个任务是完全没有必要的，还是可能有害的？

它在两个小方面有害：

*   它为初始化代码和垃圾收集器做了更多的工作。它不太可能很重要，但它就在那里。如果构造函数获得了一些可能更严重的本机资源。
*   它使您的代码*看起来*像是想做一些实际上并不想做的事情。你不想创建一个新的 empty `DataSet`，那为什么要这样做呢？

只需使用您真正想要的值初始化变量：

```
DataSet myUPC = dbconn.getDataSet(dynSQL); 
```

现在您的代码准确地显示了您想要做什么。（请注意，我会修复方法名称，使其遵循 .NET 命名约定。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T22:31:09.300

这通常是不必要的。

如果`DataSet`构造函数启动了一些长时间运行的后台线程或分配了大量内存，这些内存将一直存在，直到冗余对象被垃圾收集，这将是积极有害的，这不是瞬时的。

但是，有礼貌的构造函数不应该做这些事情，所以你可能是安全的。但是，每当我看到这一点时，我都会记下并修复代码，正如 Jon Skeet 指出的那样，它会使您的代码做不必要的工作，创建和处置您无意使用的对象，并且看起来您缺少一些代码.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T22:30:53.437

> IOW，第一个任务是完全没有必要的，还是可能有害的？

第一次分配是不必要的，但也可能有害，具体取决于类型。第一个实例将有资格进行 GC，但仍会被初始化（无缘无故）并且从未使用过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T22:31:21.830

它会一直徘徊，直到它被垃圾收集，因为没有其他引用它。但是，如果构造函数有副作用（大概`DataSet`' 构造函数没有），它也可能是有害的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T22:31:29.127

myUPC 被 dbconn.getDataSet() 的输出覆盖。这是因为 getDataSet() 是一个工厂方法，它返回一个 Dataset 类型的对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T01:03:16.803

是的，正如其他答案所示，它实际上有点*有害*，主要是因为它分配了一个从未使用过的对象，并且最终必须被垃圾收集。但让我更详细一点。

## 一审可以处理吗？

> ```
>  DataSet myUPC = new DataSet();
>   myUPC = dbconn.getDataSet(dynSQL); 
> ```
> 
> 编译器是否只是在第二次分配之前处理第一个实例？

假设您的意思是通过*处置*收集新的未使用实例的 GC（垃圾收集器），那么答案是：*否*。让我详细说明：

GC 可以在它喜欢的任何时候运行，例如当堆即将满时，或者当试图分配一个不适合堆剩余空间的对象时。因此，GC 也可能（只是偶然）恰好在您的第一条语句和第二条语句之间运行。但是，这不会收集您的`new DataSet()`对象，因为在局部变量中有对它的引用`myUPC`。只有在没有对它的引用时才考虑收集对象¹。

¹ ) 实际上，只有在没有从所谓的*根*到对象的引用链时才考虑收集对象。根包括静态字段、方法参数、局部变量和评估堆栈。

## 可以优化构造函数调用吗？

```
DataSet myUPC; /* Optimized away? */
myUPC = dbconn.getDataSet(dynSQL); 
```

此外，Just-In-Time 编译器不能简单地优化构造函数调用，因为它可能会影响被初始化对象以外的其他事物（即具有副作用）。例如，如果编译器优化了构造函数调用，那么构造函数将不会在控制台上打印任何内容。这是不希望或不期望的，因此构造函数调用必须保留在那里并产生一个新实例。

```
class MyClass
{
    public MyClass()
    {
        Console.WriteLine("Constructor called!");
    }
}

abstract class X
{
    void Do()
    {
        MyClass my = new MyClass();  // Should always print "Constructor called!"
        my = GetMyClass();
        // ...
    }

    protected abstract MyClass GetMyClass();
} 
```

# sockets - windows 7 将数据发送到套接字时出错

> ID：15077753
> 
> 赞同：1
> 
> 时间：2013-02-25T22:29:41.970
> 
> 标签：sockets, windows-7

我有一个不再受支持的旧 tcp/ip telnet 客户端。它在 Windows XP 上一直运行良好。我已“升级”到 Windows 7，它不再进行文件传输。当我尝试时，它超时并给我发送数据到套接字时出错 - 套接字 1202 - 机器 xx.xx.xx.xx 状态 = -2107。当我在两台机器上使用标准的 windows vpn 连接为每台机器执行此操作时，我是 vpn，但我只在 Windows 7 机器上收到此错误。关于如何解决这个问题的任何建议？提前感谢您的帮助。

# javascript - 如何使 1 个 html id 等于另一个 HTML id？

> ID：15077754
> 
> 赞同：1
> 
> 时间：2013-02-25T22:29:47.423
> 
> 标签：javascript, html

所以我有一个计算器，我希望它显示 2 组总数。所以说计算是 2 + 2 = 4 我希望它显示 4（总数）两次。但是，我的 javascript 通过 html id 将其吐出。那么我该如何计算另一个总数呢？基本上，我如何使一个 id 等于另一个 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:38:05.367

ID 必须是唯一的。您将不得不使用`removeAttribute()`和`setAttribute()`或以另一种方式进行。

```
document.getElementById(_id).removeAttribute("id");
document.getElementById(_id).setAttribute("id", _newId); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:34:07.990

您将需要使用一个类并使用 getElementsByClassName

或与 jquery 一起使用`$('.className').val(value)`

或者...

你可以简单地说`$('#thisID').val($('#thatID').val());`

# sql - SQL Server 2008：将 STORED PROCEDURE（动态列）的结果与 SELECT 语句的结果连接起来

> ID：15077755
> 
> 赞同：9
> 
> 时间：2013-02-25T22:29:47.953
> 
> 标签：sql, sql-server, stored-procedures, join

我有[这个存储过程](https://stackoverflow.com/questions/15076215/sql-server-2008-multiple-joined-columns-to-rows)生成的结果。

我想将这些结果与另一个表中的数据连接起来。我已经看到了创建**临时表**并将其插入其中的各种示例，但是，这并不理想，因为存储过程会返回许多可能会更改的**动态列。**有没有办法动态加入它们？

示例场景：

## 存储过程返回：

```
EXEC uspGetProductCategories

products_id | products_model | Leather Seats | Heated Seats | Tapedeck | Heater | Hybrid | Sunroof | Cruise Control
===================================================================================================================
100         | Saturn Vue     | N             | N            | Y        | N      | N      | N       | N
200         | Toyota Pruis   | Y             | N            | N        | Y      | Y      | N       | N
300         | Ford Focus     | N             | N            | N        | Y      | N      | N       | Y 
```

## 我想用一个 SQL 查询加入它，该查询会生成如下内容：

```
SELECT * FROM Products_Detail

products_id | manufacturer | purchaser | pay_type
=================================================
100         | GM           | GREG      | P
200         | TOYT         | SAM       | P
300         | FORD         | GREG      | L 
```

## 换句话说...

有没有一种无痛的方法可以做到这一点？这是我想要实现的一些伪代码（尽管我知道这不起作用）：

```
SELECT pd.*, sp.* FROM Products_Detail pd
    LEFT JOIN uspGetProductCategories sp ON pd.product_id = sp.product_id 
```

同样，我知道你不能这样做，但希望它描述了我正在寻找的逻辑。

## 示例所需的输出

```
products_id | manufacturer | purchaser | pay_type | products_model | Leather Seats | Heated Seats | Tapedeck | Heater | Hybrid | Sunroof | Cruise Control
=========================================================================================================================================================
100         | GM           | GREG      | P        | Saturn Vue     | N             | N            | Y        | N      | N      | N       | N
200         | TOYT         | SAM       | P        | Toyota Pruis   | Y             | N            | N        | Y      | Y      | N       | N
300         | FORD         | GREG      | L        | Ford Focus     | N             | N            | N        | Y      | N      | N       | Y 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:03:01.757

如果您无法使用来自动态存储过程的数据创建临时表，为什么不直接加入该表：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(categories_name) 
                    from Categories
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT ',IsNull(' + QUOTENAME(categories_name)+', ''N'')'+' as '+QUOTENAME(categories_name) 
                    from Categories
                    group by categories_name, categories_id
                    order by categories_id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = '
            select *
            from Products_Detail pd
            left join
            (
              SELECT products_id,
                    products_model,' + @colsNull + ' from 
               (
                  select p.products_id,
                    p.products_model,
                    c.categories_name,
                    ''Y'' flag
                  from products p
                  left join Products_Categories pc
                    on p.products_id = pc.products_id
                  left join Categories c
                    on pc.categories_id = c.categories_id
              ) x
              pivot 
              (
                  max(flag)
                  for categories_name in (' + @cols + ')
              ) p 
            ) p 
              on pd.products_id = p.products_id'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/035ff6/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:48:02.990

如果无法重新组织代码，请尝试使用这个丑陋的解决方案。

```
SELECT * INTO #tmp
FROM OPENROWSET('SQLNCLI', 'server=INSTANCENAME;database=DBNAME;trusted_connection=yes', 'uspGetProductCategories') A 
```

您必须`Ad Hoc Distributed Queries`在您的服务器中允许。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T22:37:15.680

你可以这样做：

```
 INSERT aTemptable 
        EXEC yourstoredproc 
```

如果 #t 已定义，但您不能选择进入 #t 并动态创建它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-04T09:59:33.973

```
create proc sp_emp18
(
@cust_id int,@name varchar(20),@order_id int,@order_date date
)
as 
begin
select e.cust_id,e.name,d.order_id,d.order_date 
from 
customer e inner join orders d on e.cust_id=d.cust_id
end

exec sp_emp18 101,'ram',99,'2016-07-21' 
```

# python - 可以使用 python 应用程序引擎找出 URL 中是否 #

> ID：15077757
> 
> 赞同：1
> 
> 时间：2013-02-25T22:29:52.267
> 
> 标签：python, google-app-engine, http, webapp2

有没有办法找出 webhandler 的当前 URL 是否包含 # ？当我使用 # 时，我无法写出 URL。 `self.request.url`当带有 # 的 URL 在服务器上是 GET 时，仅返回基本 URL。

我还尝试将 URL 的其余部分作为参数发送并打印出来。

```
('/(.*)', MainHandler),
class MainHandler(webapp2.RequestHandler):
    def get(self, args):
        self.response.out.write(args) 
```

当 URL 是带有 # 的 URL 时，这不会在 args 参数上发布任何内容。对于其他所有内容，它成功地在基础之后写入 URL 的其余部分。我要显示哪种 URL 的示例：http: [//instahashtag.appspot.com/#/14212311](http://instahashtag.appspot.com/#/14212311)

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:36:01.977

URL 片段由浏览器处理，不会传递给服务器。如果您需要处理它，您需要编写客户端代码（最有可能在 JavaScript 中）。

# three.js - Three.js Shader-纹理闪烁

> ID：15077762
> 
> 赞同：5
> 
> 时间：2013-02-25T22:30:16.357
> 
> 标签：three.js, shader, gpu

我是three.js 的新手，我认为它很棒。我试图更好地控制将纹理数据移动到着色器，这样我就可以主要使用 GPU。我的程序基于 Doob 先生的魔法尘埃示例，但我没有使用粒子，而是使用存储在纹理中的加载模型。我目前遇到了闪烁的问题。下面的代码是闪烁的粗略示例，并且与我正在做的事情有些接近。如果有人可以帮助我了解我做错了什么或闪烁的来源......我很确定一切都是最新的，如纹理映射和three.js修订版。非常感谢

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Sample Three.js</title>
    </head>

    <div id="container">
    </div>

    <body>
        <script type="text/javascript" src="./Scripts/three.js"></script>

        <script type="text/javascript">

        //
        // as name suggests - utilty functions mostly from Mr.doob from THREE.FBOUtils
        //
        UtilityFuncs = function() {
            this.textureWidth = 0;
            this.textureHeight = 0;
            this.scene = null;
            this.camera = null;
            this.renderer = null;
            this.material = null;
            this.jsonLoader = null;
            this.jsonModel = null;
            this.loadCount = 0;
        }

        UtilityFuncs.prototype.createScene = function( textureWidth, textureHeight, renderer ) {
            var gl = renderer.getContext();

            if( !gl.getExtension( "OES_texture_float" )) {
                    alert( "No OES_texture_float support for float textures!" );
                    return;
            }

            if( gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS) == 0) {
                    alert( "No support for vertex shader textures!" );
                    return;
            }

            var camera = new THREE.OrthographicCamera(-textureWidth/2, textureHeight/2,
                                                      textureWidth/2, -textureHeight/2,
                                                      -1000, 1000);
            camera.position.z = 100;

            // Shader Stuff
            var vertex_shader = [
                "varying vec2 vUv;",
                "void main() {",
                "    vUv = vec2(uv.x, 1.0 - uv.y);",
                "    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
                "} "
            ].join("\n");

            var fragment_shader = [
                "varying vec2 vUv;",
                "uniform sampler2D tPositions;",
                "void main() {",
                "    vec4 pos = texture2D( tPositions, vUv );",
                "    gl_FragColor = pos;",
                "}"
            ].join("\n");

            var material = new THREE.ShaderMaterial({
                    uniforms: {
                        tPositions: { type: "t", value: null }
                    },
                    vertexShader: vertex_shader,
                    fragmentShader: fragment_shader,
                    blending: THREE.NoBlending,
                    depthTest: false,
                    depthWrite: false,
                    side: THREE.DoubleSide
            });

            var plane = new THREE.PlaneGeometry(textureWidth, textureHeight);
            var quad = new THREE.Mesh(plane, material);
            quad.position.z = 0;
            var scene = new THREE.Scene();
            scene.add(camera);
            scene.add(quad);

            this.textureWidth = textureWidth;
            this.textureHeight = textureHeight;
            this.scene = scene;
            this.camera = camera;
            this.renderer = renderer;
            this.material = material;
        }

        UtilityFuncs.prototype.createRenderTarget = function(width, height) {
            var rtTexture = new THREE.WebGLRenderTarget(width, height,
                                            {
                                                wrapS:THREE.RepeatWrapping,
                                                wrapT:THREE.RepeatWrapping,
                                                minFilter: THREE.NearestFilter,
                                                magFilter: THREE.NearestFilter,
                                                format: THREE.RGBAFormat,
                                                type:THREE.FloatType,
                                                // renderbuffer defaults to RGB4
                                                // if stencil & depth false! 
                                                // three.js, setupRenderBuffer::24848 
                                                stencilBuffer: false,
                                                depthBuffer: true
                                            });
            rtTexture.generateMipmaps = false;
            return rtTexture;
        }

        UtilityFuncs.prototype.createFloatTextureFromData = function(width, height, data) {
            var texture = new THREE.DataTexture(
                data,
                width,
                height,
                THREE.RGBAFormat,
                THREE.FloatType,
                null,
                THREE.RepeatWrapping,
                THREE.RepeatWrapping,
                THREE.NearestFilter,
                THREE.NearestFilter
            );

            texture.generateMipmaps = false;
            texture.needsUpdate = true;

            return texture;
        };

        UtilityFuncs.prototype.readFramebuffer = function(renderer, framebuffer, width, height) {
                var gl = renderer.getContext();
                gl.flush();
                if (framebuffer != null)
                    gl.bindFramebuffer( gl.FRAMEBUFFER, framebuffer );
                var rdData = new Uint8Array(width*height*4);
                gl.readPixels( 0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, rdData );
                return rdData;
        }

        UtilityFuncs.prototype.readFloatFramebuffer = function(renderer, framebuffer, width, height) {
                var gl = renderer.getContext();
                gl.flush();
                if (framebuffer != null)
                    gl.bindFramebuffer( gl.FRAMEBUFFER, framebuffer );
                var rdData = new Float32Array(width*height*4);
                gl.readPixels( 0, 0, width, height, gl.RGBA, gl.FLOAT, rdData );
                return rdData;
        }

        UtilityFuncs.prototype.renderToTexture = function(texture, renderToTexture) {
            this.material.uniforms.tPositions.value = texture;
            this.renderer.render(this.scene, this.camera, renderToTexture, false);
        };

        UtilityFuncs.prototype.render = function(texture) {
            this.material.uniforms.tPositions.value = texture;
            this.renderer.render(this.scene, this.camera);
        };

        //
        // start of main routines
        //
        var WIDTH = window.innerWidth,
            HEIGHT = window.innerHeight;
        var texWidth = 4,
            texHeight = 4;
        var container, renderer;
        var start = Date.now();
        var rtTexture, rtTexture2;
        var utilities;
        var rdData, rdData2, ardData, ardData2;

        function launch() {

            container = document.getElementById("container");
            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(WIDTH, HEIGHT);
            container.appendChild(renderer.domElement);

            utilities = new UtilityFuncs();

            utilities.createScene( texWidth, texHeight, renderer );

            rtTexture = utilities.createRenderTarget(texWidth, texHeight);
            rtTexture2 = utilities.createRenderTarget(texWidth, texHeight);

            // Create constant color test textures
            var mData = new Float32Array(texWidth*texHeight*4);
            for (var i = 0; i < 8; i++) {
                    mData[4*i] = 1.0; mData[4*i+1] = 0.0; mData[4*i+2] = 1.0; mData[4*i+3] = 1.0;
            }
            magentaTexture = utilities.createFloatTextureFromData(texWidth, texHeight, mData)

            // Create constant color test textures
            var cData = new Float32Array(texWidth*texHeight*4);
            for (var i = 0; i < 8; i++) {
                    cData[4*i] = 0.0; cData[4*i+1] = 1.0; cData[4*i+2] = 1.0; cData[4*i+3] = 1.0;
            }
            cyanTexture = utilities.createFloatTextureFromData(texWidth, texHeight, cData)

            utilities.renderToTexture(cyanTexture, rtTexture);
            rdData = utilities.readFramebuffer(renderer, rtTexture.__webglFramebuffer,
                                               texWidth, texHeight);

            utilities.renderToTexture(magentaTexture, rtTexture2);
            rdData2 = utilities.readFramebuffer(renderer, rtTexture2.__webglFramebuffer,
                                                texWidth, texHeight);

            if (rdData[0] != 0 || rdData[1] != 255 || rdData[2] != 255 || rdData[3] != 255)
                console.log("rtTexture load fail\n");

            if (rdData2[0] != 255 || rdData2[1] != 0 || rdData2[2] != 255 || rdData2[3] != 255)
                console.log("rtTexture2 load fail\n");

            animate();
        }

        var timer = 0;

        function animate() {
            requestAnimationFrame( animate );
            render();
        }

        function render() {
            //
            // copy rtTexture and rtTexture2 between each other
            //

            utilities.renderToTexture(rtTexture, rtTexture2);
            ardData2 = utilities.readFramebuffer(renderer, rtTexture2.__webglFramebuffer,
                                                 texWidth, texHeight);

            utilities.renderToTexture(rtTexture2, rtTexture);
            ardData = utilities.readFramebuffer(renderer, rtTexture.__webglFramebuffer,
                                                   texWidth, texHeight);

            if (timer & 1)
                utilities.render(rtTexture2);
            else
                utilities.render(rtTexture);

            if (ardData[0] != 0 || ardData[1] != 255 || ardData[2] != 255 || ardData[3] != 255)
                console.log("rtTexture fail\n");
            if (ardData2[0] != 0 || ardData2[1] != 255 || ardData2[2] != 255 || ardData2[3] != 255)
                console.log("rtTexture2 fail\n");
            timer++;
        }

        //launch();

        </script>
        <button id="renderButton" onClick="launch()">Render</button>
        <br/>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:20:16.537

如果您更改填充纹理的 for 循环，闪烁将停止：

```
for (var i = 0; i < 8; i++) ==>> for (var i = 0; i < texWidth*texHeight*4; i++) 
```

但我在 chrome 和 firefox 上都收到“rtTexture2 fail”。

我发现了另一个错误。线;

```
if (ardData2[0] != 0 || ardData2[1] != 255 || ardData2[2] != 255 || ardData2[3] != 255) 
```

应该：

```
if (ardData2[0] != 255 || ardData2[1] != 0 || ardData2[2] != 255 || ardData2[3] != 255) 
```

但我仍然无法摆脱上述错误。

# core-data - 核心数据迁移多遍？

> ID：15077764
> 
> 赞同：1
> 
> 时间：2013-02-25T22:30:21.970
> 
> 标签：core-data, core-data-migration

我正在为我的一个 ipad 应用程序实施核心数据数据版本更改。显然，我的应用程序的某些用户拥有超过 1GB 的大型数据库。结果，使用“轻量级”进行数据迁移会炸毁内存。因此，我试图通过多次传递（Apple 建议）进行自定义数据迁移。但是，我不确定如何将一个映射模型划分为几个小的映射模型（理想情况下每个实体一个），因为在生成的映射模型上，实体映射都是相关的。

我将无法发布图像，因为我是堆栈溢出的新手

在映射模型中，我添加了另外两个映射。对于一个 DataMedia，我需要创建两个 ASData 来将媒体二进制数据存储在一个单独的表中。大数据最初存储在“DataMedia”表中（在最坏的情况下，该表几乎有 800MB 大）。

所以这是我的问题： 1\. 在不耗尽内存的情况下进行这种迁移的最佳方法是什么？2\. 多遍迁移是一种解决方案吗？如果是这样，我如何将具有相互关系的实体映射划分为单独的映射模型？这是否意味着我需要手动实现“关系映射”？

# php - JS：更改此功能以处理链接点击

> ID：15077766
> 
> 赞同：3
> 
> 时间：2013-02-25T22:30:27.587
> 
> 标签：php, javascript, ajax

按照这里的示例[非常简单的 jQuery 和 PHP Ajax 请求 - 准备使用代码](http://blog.theonlytutorials.com/very-simple-jquery-and-php-ajax-request-ready-to-use-code/)

我已经成功地创建了一个下拉列表，该列表将值传递给外部 PHP 脚本并将 HTML 输出返回到同一页面上的“div”，效果很好。

我现在要做的是在单击链接而不是构建下拉列表时发布值。所以......如果我创建了这个链接：

```
<a href="foo.php?route_number=2">Route Number 2</a> 
```

我希望将“2”传递给该外部 PHP 脚本，并在“div”上更改内容，因为它当前与下拉列表一起使用。我不知道如何更改 javascript 来处理这个或“foo.php”真正需要的是什么。

这是该示例中的当前 javascript：

```
 <script type="text/javascript">
    $(document).ready(function() {
        $('#route_number').click(function() {
            routenumber = $('#route_number').val();
            $.post('api.php', { route_number : routenumber }, function(res) {
                $("#mainlayer").html(res);
            });
         });
    });
    </script> 
```

下面是 HTML 的下拉部分的样子：

```
 <select name="route_number" id="route_number">
    <option value="notchosen">Please Choose A Route</option>
    <option value="2">Riverfront</option>
    <option value="11">Magazine</option>
    <option value="16">Claiborne</option>
    </select>
    <div id="mainlayer">

    </div> 
```

因此，需要明确的是，我想创建实现相同结果的链接，而不是传递值的下拉列表。

提前致谢，

*   丹——

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:34:00.513

创建一个类，捕获其（即您单击的任何链接）的值，然后发布。

```
<a class="RouteNumber" href="foo.php?route_number=2">Route Number 2</a>

$(function(){
    $('a.RouteNumber').on('click',function(event){
        // prevent the browser's default action for clicking on a link
        event.preventDefault();

        // break href attribute into array, then parse desired value as int
        var routenumber = $(this).attr('href').split('='),
            rtnum = parseInt(routenumber[1]);

        $.post('api.php',{route_number:rtnum},function(res){
            $("#mainlayer").html(res);
        });
    });
}); 
```

如果您不需要从中解析出整数（如果字符串足够好），则不需要第二个变量。您可以`routenumber[1]`在发布数据中使用。

请注意，我修改了 jQuery 以使用[.on()](http://api.jquery.com/on/)语法。.click() 是它的简写，但我喜欢使用 .on() 只是因为如果您想做更多事情（例如 mouseenter/mouseleave），它可以减少潜在的代码编写，因为您可以将它们组合成一个代码集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:14:56.683

我曾希望简单地修复@LifeInTheGrey 的示例就足够了，但有些事情我会做不同的事情，可能需要一些解释。

您的 HTML 可能如下所示：

```
<a class="route" href="foo.php?route_number=2" data-route="2">Route Number 2</a> 
```

JavaScript 看起来像这样：

```
$(function() {
    var fill_div_with_response = function(res) {
        $("#mainlayer").html(res);
    };

    var handle_error = function(res) {
        alert('something went wrong!');
    };

    $(document.body).on('click', '.route', function(event) {
        // prevent the browser's default action for clicking on a link
        event.preventDefault();
        // grab route number from data attribute
        var route = $(this).data('route');
        // make that post request
        $.post('api.php', {route_number: route})
            // handle the response
            .done(fill_div_with_response)
            // handle errors
            .fail(handle_error);
    });
}); 
```

1.  该示例使用[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)。它们初始化和消耗最少的内存很便宜。
2.  该示例处理错误。大多数此类问题的答案都忽略了这一点。发生错误。总是。让人们意识到这一点。当然，抛出 an`alert()`不是您想要*做*的事情，但它仍然比简单地完全忽略错误要好。
3.  该示例使用[Deferreds（Promises）](http://api.jquery.com/category/deferred-object/)而不是回调，因为这通常会使代码更简洁。
4.  我们正在定义回调`fill_div_with_response()`和`handle_error()`根闭包，以防止在下次单击时重新定义它们。没有必要喂垃圾收集器。
5.  data 属性提供了最佳替代方案`<option value="123">`，它可以防止您必须解析`href`属性以从字符串中提取该数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:24:32.630

既然你想制作一个菜单，我会修改你的标记

```
<ul name="route_number" id="route_number">
    <li value="2">Riverfront</li>
    <li value="11">Magazine</li>
    <li value="16">Claiborne</li>
</ul> 
```

然后只需处理该列表：

```
$('#route_number').find('li').click(function () {
    var routenumber = $(this).attr('value');
    $.post('api.php', {
        route_number: routenumber
    }, function (res) {
        $("#mainlayer").html(res);
    });
}); 
```

EDIT1：作为一种改进（因为您似乎对这些东西很陌生），您可以使用带有更改标记的数据，如下所示：

```
<ul name="route_number" id="route_number">
    <li data-routenumber="2">Riverfront</li>
    <li data-routenumber="11">Magazine</li>
    <li data-routenumber="16">Claiborne</li>
</ul> 
```

那么代码将是：

```
$('#route_number').find('li').click(function () {// add click event manager to each li
    var routenumber = $(this).data('routenumber');// get routenumber of clicked
    $.post('api.php', {
        route_number: routenumber
    }, function (res) {
        $("#mainlayer").html(res);
    });
}); 
```

使用 .on() 形式的替代代码

```
$('#route_number').on('click, 'li', function () {//click event manager for ul/li
    var routenumber = $(this).data('routenumber');// get routenumber of clicked
    $.post('api.php', {
        route_number: routenumber
    }, function (res) {
        $("#mainlayer").html(res);
    });
}); 
```

请注意，最后一个表单绑定到 #route_number 元素，因此您可以在处理过程中添加更多菜单选项，它们仍然可以工作。这也比附加到文档要好，因为它是事件附件的一种更集中的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:49:22.253

我对您的问题的理解是您拥有的功能很好，您只需要将外观更改为下拉列表中的一段文本。如果是这样，好消息！您可以保持（几乎）相同的 JavaScript。

现在，您的 JavaScript 正在获取您的选择框的值，通过 AJAX 发送它，并使用返回的值。您需要的唯一更改是获取单击文本的“值”。

您不想使用链接，因为它旨在将用户带到某个地方。相反，您可以使用跨度并将其格式化为看起来像一个链接，或者如果您想要那种外观，甚至可以是一个按钮。

您还需要更改`$('#route_number').val();`，可能是单击事件传递的内容。例如：

```
<span id="route1" class="routeSpan" onclick="sendVal(1)">Route 1 Name</span>
<span id="route2" class="routeSpan" onclick="sendVal(2)">Route 2 Name</span> 
```

还有你的 JavaScript：

```
function sendVal(routeVal) {
    $.post('api.php',{route_number:routeVal},function(res){
    $("#mainlayer").html(res);
    });
} 
```

# python - 错误：从 geocode_url 提取 lat、long 时 Geopy 中的“无法解码 JSON 对象”

> ID：15077767
> 
> 赞同：0
> 
> 时间：2013-02-25T22:30:33.223
> 
> 标签：python, json, geocoding, geopy

我正在使用以下代码：

```
from geopy import geocoders   

def main():
    gn = geocoders.GeoNames()
    city = 'roman'
    place, (lat, lng) = gn.geocode_url('http://www.geonames.org/advanced-search.html?q='+city+'&country=FR&featureClass=A&continentCode=&fuzzy=0.6')
    location, (lat, lon) = geocodes[0]
    print lat, lon 
```

我想打印从 Geopy 网站返回的第一个结果，给定特定的 URL 配置（在法国，特征 = A，模糊 = .6）

但是，我从上面的代码中不断收到“无法解码 JSON 对象”错误。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:43:30.840

您应该使用 JSON 网络服务：

```
url = 'http://ws.geonames.org/searchJSON?q=%s&country=FR&featureClass=A&continentCode=&fuzzy=0.6'
gn.geocode_url(url % city) 
```

添加更多参数的正确方法是使用`urlencode`和 url`geocode`使用：

```
from urllib import urlencode
params = {
    'q': 'roman',
    'featureClass': 'A',
    'fuzzy': '0.6',
    'country': 'FR'
}
gn.geocode_url(gn.url % urlencode(params)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:42:31.650

我不直接熟悉 geopy 或 GeoNames 数据库，但您的意思是从[他们的网络服务](http://www.geonames.org/export/geonames-search.html)请求某些东西吗？您提供的 URL 似乎返回的是普通网页，而不是 JSON 响应，除非发生了一些棘手的事情。

API 似乎有类似的论点，尽管它确实需要用户名/帐户。也许你的意思是：

```
http://api.geonames.org/searchJSON?q=paris&country=FR&featureClass=A&continentCode=&fuzzy=0.6&maxRows=10&username=demo 
```

# android - 是否可以从 Android 的库项目中访问 App 的版本？

> ID：15077768
> 
> 赞同：1
> 
> 时间：2013-02-25T22:30:34.200
> 
> 标签：android, versioning, android-library

我有一个从应用程序调用的 android 库。我想从库项目中访问 App 的版本。有可能吗？

编辑：我不控制呼叫应用程序。我需要一些方法来从库中获取调用应用程序的版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:56:55.087

如果您传递上下文信息，您应该可以使用

```
PacketManager yourPacket = context.getPackageManager(); 
```

这[给了你大量的信息](http://developer.android.com/reference/android/content/pm/PackageManager.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:39:26.863

您必须选择的一个选项是从您自己的应用程序本身获取应用程序版本，然后通过将其存储在某种共享存储（如 WORLD_READABLE 文件或 SD 卡或其他东西）中来“手动”将其提供给库。

或者可能取决于库，以及您可以修改多少，您还可以使用某种静态对象为您保存数据。

# vb.net - 在 UI 被阻止时通知用户进度

> ID：15077769
> 
> 赞同：1
> 
> 时间：2013-02-25T22:30:37.377
> 
> 标签：vb.net, multithreading, user-interface

主题听起来是相互排斥的，这可能是一个可怕的黑客，但我还是会问。

我有一个单线程 VB.NET 应用程序，它将状态栏标签设置为“正在加载...”，然后从数据库同步加载数据，在某些情况下可能需要 1-2 分钟。有没有办法在加载数据时向用户显示 AJAX 类型的动画？当然，正确的方法是使用单独的线程/BackgroundWorker 进行数据访问和单独管理 UI，但我目前无法更改数据访问模型并被要求“临时修复”。

以下是我目前的一些想法：

1.  从另一个线程更新标签（并且只有那个标签），强制重绘，以某种方式绕过 windows 窗体消息泵（可能不可能）

2.  在后台保持另一个进程并从主应用程序向它发送“显示”消息。它显示在应用程序前面，显示动画，直到收到来自主应用程序的“隐藏”消息。（用户从主应用程序切换但“动画”表单仍然可见的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:44:37.203

我可能会因为建议而被否决（坦率地说，我不怪别人），但这听起来像是[DoEvents](http://msdn.microsoft.com/en-us//library/system.windows.forms.application.doevents.aspx)的工作。

我通常不会建议它，但你正在寻找一个黑客。

# modx - 在 modx 中通过 id 获取文档

> ID：15077775
> 
> 赞同：1
> 
> 时间：2013-02-25T22:30:50.693
> 
> 标签：modx, modx-revolution, modx-templates

很简单，我想在一个页面上有多个内容区域。请注意，这是我的第一个 Modx 站点。

到目前为止，我有主页并为主页上的子区域创建了子文档。我只想在模板中调用它们。

例如有一个 id 为 2 的文档，我想要主页上的长标题（id 为 1）。

就像是 ：

```
[[~2*longtitle]] 
```

不幸的是，上面只是返回该子文档的 URL，而不是该文档本身的长标题。

到目前为止，我还没有找到有关这样做的文档。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:51:11.647

您有 2 个选项，艰难的方式 ~ 您选择的路线 ;) 和简单的方式......我也会概述。

对于您要尝试做的事情，您将要使用 getResources [http://rtfm.modx.com/display/ADDON/getResources](http://rtfm.modx.com/display/ADDON/getResources)这将允许您遍历资源集合并提取您需要的字段 [in这种情况下 'content'] 或 getresourceField [http://rtfm.modx.com/display/ADDON/getResourceField](http://rtfm.modx.com/display/ADDON/getResourceField)这将允许您指定单个资源和要提取的字段，只需在模板中多次调用它。

你可以试试：

```
[[getResources? &parents='[[*id]]' &tpl='myTpl' &includeContent='1']] 
```

应该获取当前资源的所有子资源 [最多默认 ~ 10]，然后您将创建一个模板来循环获取资源：

```
<h1>[[+longtitle]]</h1>
<p>[[+content]]</p> 
```

注意资源字段使用 + 而不是 *

或者

简单的方法是为您的额外内容区域创建模板变量，您也可以将它们设置为富文本区域。这样，任何给定页面的所有内容都在一个资源中〜您无需创建子资源来保存页眉/页脚/侧边栏/等的内容

无论哪种方式都可以，但 TV 方法可能会使用更少的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T09:56:11.657

你可以使用快场

```
[[#12.pagetitle]] 
```

或在通话中

```
[[#[[+id]].pagetitle]] 
```

您还可以获取该资源的所有电视，例如

```
[[#12.myTv]] 
```

另见：[http ://rtfm.modx.com/extras/revo/fastfield](http://rtfm.modx.com/extras/revo/fastfield)

# javascript - 从 Flash 发布到 HTML 后，如何为非 Flash 设备提供替代内容？

> ID：15077782
> 
> 赞同：0
> 
> 时间：2013-02-25T22:31:16.393
> 
> 标签：javascript, html, flash-cs3

我正在使用 Flash CS3 Pro'，我已经发布了一个 HTML 页面，以便在所有浏览器和版本等上正确打开。是否可以在文件 AC_RunActiveContent.js 中的 Flash 生成的 Javascript 中为非 Flash 设备提供替代内容? 如果是这样，你怎么做？

或者他们是更好的方法吗？

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:36:34.920

我认为这个线程可能会帮助您回答您的问题：

[http://www.dgrin.com/showthread.php?p=1370078](http://www.dgrin.com/showthread.php?p=1370078)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:43:41.367

您可以使用如下所示的 javascript Flash Detector 脚本：

[https://github.com/browserstack/flashblock-detector](https://github.com/browserstack/flashblock-detector)

然后，您可以将用户重定向到更静态的页面。

```
var flash = flashBlockDetect();
if (flash > 1) {
  window.location = "static-page.html";
} 
```

# xml - 如何从重复节点中提取 XML 节点值和属性

> ID：15077791
> 
> 赞同：1
> 
> 时间：2013-02-25T22:31:51.383
> 
> 标签：xml, xpath, pentaho, kettle

我正在使用 Kettle 和 Get Data From XML 转换从 XML 文件中提取某些信息。我将 Loop Xpath 设置为引入`/*[name()='feed']/*[name()='entry']`所有相关字段。

我想`<region>`从区域节点中提取每个节点作为自己的字段，以便以后可以使用“/”分隔符将它们连接起来。

接下来，我需要为每个节点创建类似`weekly_rate_from`and的字段。我不能完全弄清楚 Xpath 来区分像 periodType 这样的属性，然后还提取 from 和 to 信息。换句话说，当 periodType=weekly 时，我只需要提取“to”和“from”速率属性`weekly_rate_to``<rate>`

希望这不会太令人困惑，我可能解释得不好

```
<feed>
<entry>
  <content>
    <listing>    
      <regions>
        <region>World</region>
        <region>USA</region>
        <region>California</region>
        <region>Inland Empire California</region>
        <region>Temecula Valley</region>
        <region>Temecula</region>
      </regions>
      <rates rentalBasis="property">
        <rate from="3395" to="4175" currencyUnit="USD" periodType="weekly"/>
        <rate from="599" to="749" currencyUnit="USD" periodType="nightly-weekday"/>
        <rate from="799" to="1019" currencyUnit="USD" periodType="nightly-weekend"/>
      </rates>
    </listing>
  </content>
</entry>
<entry>
...
</entry>
... for a total of 20 "entry" nodes
</feed> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:19:19.200

计算所有区域元素：

```
count(/feed/entry/content/listing/regions/region) 
```

每周检索`from`and`to`仅用于 periodType：

```
/feed/entry/content/listing/rates/rate[@periodType = 'weekly']/@from
/feed/entry/content/listing/rates/rate[@periodType = 'weekly']/@to 
```

# jenkins - 詹金斯是代码检查员吗？

> ID：15077795
> 
> 赞同：1
> 
> 时间：2013-02-25T22:32:37.047
> 
> 标签：jenkins, jenkins-plugins

嗨，我正在使用 jenkins，但我需要问一下它是否是代码检查器？或者它是否有更多我可以使用的功能，因为我找不到它们并且它很重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:37:31.180

Jenkins 本身不是代码检查员。它更像是一个提供插件 API 的[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)服务器，以便可以扩展它来做不同的事情。有很多可用的插件，所以它真的取决于你的语言和你想让你的检查员做什么（静态分析，代码覆盖率等）

快速搜索提供了此页面[Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/Plugins)

我安装了 Jenkins（我目前无法通过网络访问它）并且它有一个插件页面，你可以去查看可用的插件。那可能是最新的列表。

我们目前使用 Jenkins 和许多插件来对每次提交进行构建和分析。如果您只想运行分析，您可能需要一个独立的分析工具。

# c# - 反序列化不同数据的问题

> ID：15077799
> 
> 赞同：4
> 
> 时间：2013-02-25T22:32:45.987
> 
> 标签：c#, json.net

我正在使用 Json.net JsonConvert 从其他 API 反序列化一些 JSON，以这种方式：

```
WebRequest request = WebRequest.Create(url);
        WebResponse ws = request.GetResponse();
          using (StreamReader sr = new StreamReader(ws.GetResponseStream()))
    {
        jsonString = sr.ReadToEnd();
    }

    RootObject root = JsonConvert.DeserializeObject<RootObject>(jsonString); 
```

这很好用，期望在尝试获取特定数据集时，在序列化时会生成此错误：

```
Error reading string. Unexpected token: StartObject. Path 
```

我已将问题缩小到 API 以不正确的格式返回某些条目的数据。所以大部分返回的数据看起来像这样：

```
 Income: {
    currency: {
        GBP: "48",
        USD: "32",
        EUR: "40"
    }
}, 
```

但是，在某些情况下，它会返回：

```
income: {
    currency: {
        GBP: {
        GBP: "0",
        USD: "0",
        EUR: "0"
    },
    USD: {
        GBP: "0",
        USD: "0",
        EUR: "0"
    },
    EUR: {
        GBP: "0",
        USD: "0",
    EUR: "0"
    }
} 
```

在短期内，我无法修复 API，所以我需要以某种方式处理这个问题，但我对使用 Json.net 比较陌生，所以我不确定最好的方法. 任何建议表示赞赏。

我试图反序列化的类结构非常简单：

```
 public class RootObject
    {
        public List<Income> Income_list { get; set; }

    }

 public class Income
    {
        public Currency currency { get; set; }

    }

    public class Currency
    {
        public string GBP { get; set; }
        public string USD { get; set; }
        public string EUR { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:42:19.620

鉴于无效 JSON 的货​​币值无论如何都为零，因此简单地捕获 JSON 反序列化异常并返回一个新`Income`对象，并将其`Currency`对象初始化为全零可能要容易得多。

# java - 如何提取 HTML 标签以仅获取某些信息？

> ID：15077801
> 
> 赞同：0
> 
> 时间：2013-02-25T22:32:46.913
> 
> 标签：java, html, string, extraction

我需要从`<title> </title>`标签之间提取网页的标题。

还需要显示位于`<body...>`and`</body>`标记之间的所有文本，但在正文之外不显示任何内容。

我不希望返回任何尖括号或任何 html 数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T22:47:37.327

你可以使用类似的东西：

```
String html = "<html>My page</html>";
String title = html.substring(html.indexOf("<html>") + 6, html.indexOf("</html"));
System.out.println(title); 
```

[String.indexOf(string)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)方法返回给定字符串（变量 html）中字符串（在示例中为`"<html>"`和）的起始索引。`"</html>"`

[String.substring(int, int)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)方法返回两个索引之间的字符串。

有了这个，你可以启动你的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:44:58.370

> 为了简化我的问题，我如何搜索一个巨大的字符串来找到另一个字符串并记录它的位置？

[`String#indexOf(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)例如：

```
int index = bigString.indexOf("<body"); 
```

...找到 in 的第一次`<body`出现`bigString`并返回其索引（您可以与 一起使用`substring`）。但是，如果您不确定如何执行此操作，那么这项任务就是疯了。本课程应该已经为您做好了完成这项任务的准备，但似乎还没有。

解析 HTML 很*复杂*。`indexOf`您可以使用and完成一个半完整的不正确的工作`substring`，但它会是......半完整的和不正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T22:50:41.427

有很多方法可以解决这个问题，但是使用您提出的约束让我们采用低级别的方法。首先假设您已将整个 HTML 文档接收到一个名为`html`. 第一个任务是搜索''。有很多错误检查这个答案不会涵盖，但是我们不能为你做所有的功课：P，所以我们假设`title`元素是小写的并且格式正确：

首先，我们需要确定 HTML 中的哪个位置是 title 元素（我在这里使用[`indexOf()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28java.lang.String,%20int%29)）

```
int start = html.indexOf("<title>")+"<title>".length();
int end = html.indexOf("</title>", start); 
```

然后将其提取到字符串中（使用[`substring()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int,%20int%29)）：

```
String title = html.substring(start, end); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:38:26.683

根据您的描述，您不需要解析完整的 HTML 文档，而只需从中提取一些信息。基于[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)的方法将起作用。

扫描直到找到一个`<title>`元素。从那时起，任何东西都是数据，直到你找到一个结束`</title>`。然后扫描，直到找到一个开口`<body>`。从那时起，您将需要阅读“内容”，跳过`<`和之间的任何内容`>`，可以按如下方式完成：

```
//input stream in is just after <body>
String body=""; 
String element="";
boolean ignore=false
while (true) {
  char c = in.read();
  if (c<0) break; //end of stream
  if (ignore) {
    if (c=='>') {
      if (element.equals("/body")) break; //closing </body>
      ignore=false;
    }
    else element+=c;
  }  else {
    //not in ignore mode
    if (c=='<') {element=""; ignore=true;}
    else body+=c;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T22:40:30.547

程序员使用两个开发阶段来解决这类问题：

**1.自己解析数据：**

在 HTML（良好的 HTML）中，大多数标签后面都有结束标签。`<title>`标签就是其中之一。如果您要查找它们之间的内容，请查找 的索引`<title>`。您可能想要最后一个索引`>`只是为了方便。

然后当当前字符不是`<`时，将该字符添加到字符串中。

当你击中 a`<`时，你应该检查它是否是`</title>`。如果没有，请继续阅读。基本上你一直在循环。每次您点击`<`检查它是否是结束标题标签。

当您意识到这非常困难并重新发明轮子时，请前进到第 2 步：

**2\. 使用 DOM 解析器库。**

在您尝试执行第 1 步时伤害了自己。您会发现为什么程序员强烈建议您永远不要解析 HTML 或在 HTML 上使用正则表达式。意识到使用久经考验的 HTML 解析器已经打赢了这场战斗：[领先的 Java HTML 解析器的优缺点是什么？](https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers)

# c# - Linq 表达式插入转换函数

> ID：15077803
> 
> 赞同：3
> 
> 时间：2013-02-25T22:32:53.017
> 
> 标签：c#, asp.net-mvc, c#-4.0

在我的某些属性项目中，表单 (x=>x.property) 的表达式在运行时显示为 (x=>Convert(x.property))，如下所示：

![在此处输入图像描述](../Images/9fcc59732c675742be5c714b05e651e2.png)

这取决于属性类型，double 和 DateTime 似乎是罪魁祸首。适用于字符串属性（例如 Speed 和 ForeColour 都是字符串）

为什么会这样出来？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T22:33:49.417

`double`并且`DateTime`是值类型。编译器`Expression.Convert`基本上用来表示装箱操作。

`string`已经是引用类型，所以不需要转换。

您可以在普通代码中看到相同的内容：

```
double d = 0.5;
string s = "hello";

object o1 = d;
object o2 = s; 
```

...编译为：

```
// d = 0.5
IL_0001:  ldc.r8     0.5
IL_000a:  stloc.0

// s = "hello"
IL_000b:  ldstr      "hello"
IL_0010:  stloc.1

// o1 = d - boxing!
IL_0011:  ldloc.0
IL_0012:  box        [mscorlib]System.Double
IL_0017:  stloc.2

// o2 = s - no boxing required!
IL_0018:  ldloc.1
IL_0019:  stloc.3 
```

# java - 将格式化文本从pdf提取到html

> ID：15077804
> 
> 赞同：0
> 
> 时间：2013-02-25T22:32:55.620
> 
> 标签：java, html, pdf

我需要将 PDF 文档转换为 HTML。我可以在下面实现。

1-从PDF中提取文本。

2-提取图像

3-在新转换的HTML页面中保留与PDF页面相同的格式。

4-将图像嵌入到新转换的HTML页面中的适当位置，如PDF。

5- 将配色方案应用于 HTML 页面。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:43:31.957

从 PDF [图像提取](http://itextpdf.com/examples/iia.php?id=284)中提取图像 从 PDF [文本提取中提取文本](http://itextpdf.com/themes/keyword.php?id=482)

您正在寻找答案的所有其他事情都可以使用任何网络应用程序设置。

# jquery - 无需刷新页面的 Wordpress 登录

> ID：15077815
> 
> 赞同：0
> 
> 时间：2013-02-25T22:34:04.210
> 
> 标签：jquery, wordpress, login

我正在使用自定义 Wordpress 主题，在其中使用 jQuery 创建了一个幻灯片效果，单击该效果时会显示登录和注册表单。我正在尝试创建一种用户在登录或注册时不会离开此页面的体验，而是最初向下滑动的 div，向上滑动并且按钮文本更改为登录用户的名称。

在我点击 LOGIN 的那一刻，div 向上滑动，但系统似乎没有识别登录用户。

```
 <script type="text/javascript">
    $(document).ready(function(){

    $(".btn-slide").click(function(){
    $("#slide-panel").slideToggle("slow");

   });

 });
 </script>
 <script type="text/javascript">    
    $('.error').hide();  
        $(".button").click(function() {
      // validate and process form here
        var name = $("input#log").val();  
            if (name == "") {  
              $("label#error").show();  
              $("input#log").focus();  
              return false;  
            }

        var dataString = $("#wp_login_form").serialize();
        //alert (dataString);return false;  

        $.ajax({
            type: "POST",
            url: "<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>",  
            data: dataString,
            success: function() {
                $("#slide-panel").slideToggle("slow");
                $(".slide").html("Hello");
            }
        });
        return false;
    });
 </script>

 <?php wp_head(); ?>

 </head>

 <body <?php body_class(); ?>>

 <div id="slide-panel"><!--SLIDE PANEL STARTS-->
    <div class="loginform">
        <div class="loginformdetails equalheight"><h2>Member Login</h2>
            <div class="formrow">
                <label class="error" id="error">Please complete the entire form.</label>
            </div>
            <?php 
            global $user_ID;

            if($_POST){
            //We shall SQL escape all inputs
            $username = $wpdb->escape($_REQUEST['log']);
            $password = $wpdb->escape($_REQUEST['pwd']);
            $remember = $wpdb->escape($_REQUEST['rememberme']);

            if($remember) $remember = "true";
            else $remember = "false";
            $login_data = array();
            $login_data['user_login'] = $username;
            $login_data['user_password'] = $password;
            $login_data['remember'] = $remember;
            $user_verify = wp_signon( $login_data, false ); 

            if ( is_wp_error($user_verify) ) {
                echo $user_verify->get_error_message();  
                exit();
                } else {    
                            echo "<script type='text/javascript'>window.location='". get_bloginfo('url') ."'</script>";
                            $user_info = get_userdata($user_ID);
                            ?>
                            <div class="loginform">
                                <h2>Control Panel</h2><ul>
                                <li><a href="<?php echo get_option('home'); ?>/wp-admin/">Dashboard</a></li> |
                                <li><a href="<?php echo wp_logout_url( get_bloginfo('url') ); ?>" title="Logout">Logout</a></li></ul>
                            </div><!--loginform ends-->
                            <?php exit();
                        }
                } else {
                ?> 
                    <form id="wp_login_form" action="" method="post">
                    <div class="formrow">
                        <div class="formLabel"><label for="log">Email  </label></div>
                        <div class="forminput"><input type="text" name="log" id="log" value="<?php echo wp_specialchars(stripslashes($user_login), 1) ?>" size="25" /></div>
                    </div>
                    <div class="formrow">
                        <div class="formLabel"><label for="pwd">Password  </label></div>
                        <div class="forminput"><input type="password" name="pwd" id="pwd" size="25" /></div>
                    </div>
                    <div class="formrow lowercase">
                        <label for="rememberme">
                        <input name="rememberme" id="rememberme" type="checkbox" checked="checked" value="forever" /> Remember me</label>
                    </div>
                    <div class="formrow">
                        <div class="formLabel"><input type="submit" name="submit" value="Login" class="button" /></div>
                    </div>
                    <div class="formrow">
                        <div class="forminput lowercase"><a href="<?php echo get_option('home'); ?>/wp-login.php?action=lostpassword">Forgot password?</a></div>
                    </div>    
                    </form>
                    <?php } ?>
        </div>
    </div><!--loginform ends--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:04:31.833

我建议你简单地使用这个插件：[http ://wordpress.org/extend/plugins/simplemodal-login/](http://wordpress.org/extend/plugins/simplemodal-login/)

它将解决您的问题，并且有两种样式，您可以查看一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T01:01:45.940

这是另一个不使用插件的解决方案：

```
jQuery.ajax({
  url: 'https://example.com/test-page/',
  method: 'POST',
  data: {email: 'test@example.com', password: 'PASSWORD'}
  success: function(data) {
    console.log(data);
  }
}); 
```

页面测试page.php

```
<?php
$email    = $_POST['email'];
$password = $_POST['password'];

if('' != $password && '' != $email) {
  $user = get_user_by('email', $email);
  $user_id = $user->ID;
  if ($user && wp_check_password($password, $user->data->user_pass, $user_id)) {
    clean_user_cache($user_id);
    wp_clear_auth_cookie();
    wp_set_current_user($user_id);
    wp_set_auth_cookie($user_id, true, false);
    update_user_caches($user);
    $current_user = wp_get_current_user();
    $user_info = array('email'     => $current_user->user_email,
                       'firstname' => $current_user->user_firstname,
                       'lastname'  => $current_user->user_lastname,
                      );
    echo json_encode($user_info);
  }
} 
```

# javascript - 获取带有 json 的 URI 查询，用于 Flask-Restless

> ID：15077818
> 
> 赞同：1
> 
> 时间：2013-02-25T22:34:12.687
> 
> 标签：javascript, jquery, flask

在 Flask-Restless 文档中，（“进行搜索查询”）我们可以发现，以特殊的 uri 格式查询框架 que 可以查询数据库。

[Flask-不安分](https://flask-restless.readthedocs.org/en/latest/searchformat.html)

```
http://localhost:5000/api/person?q={"filters":[{"name": "age", "op": "ge", "val": 10}]}
http://localhost:5000/api/person?q={"filters":[{"name": "age", "op": "ge", "val": 10},{"name": "age", "op": "le", "val": 20}]}
... 
```

如何以简单的方式使用 jQuery.ajax 或 XMLHttpRequest 进行 GET 查询？

我尝试过使用 jQuery.param()、encondeURI + JSON.stringify() 进行编码...

抱歉，这一定很明显，但我无法让它工作。

```
 var url = "http://localhost:5000/api/person?";
 var obj = {"filters":[{"name": "age", "op": "ge", "val": 10}]};
 var jsn = JSON.stringify(obj);
 var encuri = encodeURI(url + "q=" + jsn); //NOPE
 var par = jQuery.param(jsn); //NOPE
 var raw = XMLHttpRequest();raw.open("GET", url + "q=" + encuri);raw.send() //NOPE
 ... 
```

**解决方案**

```
$.ajax({
    url: 'http://localhost:5000/api/user',
    data: "q=" + JSON.stringify({"single":true,"filters":[{"name": "id", "op": "eq", "val": 1}]}),
    dataType: 'json',
    contentType: 'application/json; charset=utf-8'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:01:04.850

```
$.ajax({
    url: 'blah',
    data: JSON.stringify(data),
    dataType: 'json',
    contentType: 'application/json; charset=utf-8'
}); 
```

您需要页面中包含 json2.js（和 jquery）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:44:58.103

首先，我相当肯定这些查询需要转义。

假设 URI 的编码正确（参见 encodeURI 和 encodeURIComponent），您应该能够执行 jQuery.parseJSON。

# sql - SQL Access 2010 计算股票每日差距

> ID：15077819
> 
> 赞同：-1
> 
> 时间：2013-02-25T22:34:20.973
> 
> 标签：sql, time-series

我有一张像这样的桌子：

代码、日期、Open_Price、Close_Price

其中包含 100 个代码。我想添加另一个名为 Gap 的计算列，即 Open_price - 昨天的收盘价。对于每一行（即每个股票，每天）

任何人都可以帮我处理 SQL 吗？

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:46:21.070

这是一种适用于许多 SQL 方言的方法：

```
select t.*, open_price - lastclose as gap
from (select t.ticker, t.date, t.open_price, t.close_price,
             (select t.close_price from t t2 where t2.ticker = t.ticker and t2.date < t.date order by DATE desc limit 1
             ) as lastclose
      from t
     ) t 
```

根据 SQL 的风格，`limit 1`也可以是`select top 1`or`where rownum = 1`或 。. . 甚至一些其他的可能性。

这使用相关子查询来模拟该`lag()`功能，这是您真正需要的。如果你有这个，你可以写：

```
select t.*, open_price - lastclose as gap
from (select t.ticker, t.date, t.open_price, t.close_price,
             lag(close_price) over (partition by ticker order by date) as lastclose
      from t
     ) t 
```

# java - Couchbase 2.0 Java SDK 1.1 - 同步添加和视图

> ID：15077820
> 
> 赞同：1
> 
> 时间：2013-02-25T22:34:27.930
> 
> 标签：java, sdk, couchbase

**我正在尝试创建一个junit测试。设想：**

*   设置：我正在向数据库添加两个 json 文档
*   测试：我正在使用视图获取这些文档
*   tearDown：我正在删除两个对象

**我的观点：**

```
function (doc, meta) {
  if (doc.type && doc.type == "UserConnection") {
    emit([doc.providerId, doc.providerUserId], doc.userId);
  } 
} 
```

**这就是我将这些文档添加到数据库并确保“添加”是同步的方式：**

```
public boolean add(String key, Object element) {
    String json = gson.toJson(element);
    OperationFuture<Boolean> result = couchbaseClient.add(key, 0, json);
    return result.get();
} 
```

**我添加的 JSON 文档是：** {"userId":"1","providerId":"test_pId","providerUserId":"test_pUId","type":"UserConnection"} {"userId":"2" ,"providerId":"test_pId","providerUserId":"test_pUId","type":"UserConnection"}

**这就是我所说的视图：**

```
View view = couchbaseClient.getView(DESIGN_DOCUMENT_NAME, VIEW_NAME);
Query query = new Query();
query.setKey(ComplexKey.of("test_pId", "test_pUId"));
ViewResponse viewResponse = couchbaseClient.query(view, query); 
```

**问题：**

*   由于从视图中提取的元素数量无效，测试失败。

**我的观察：**

*   有时测试通过
*   从视图中获取的元素数量不一致（从 0 到 2）
*   当我将这些文档添加到数据库而不是调用 setUp 时，测试每次都通过
*   根据这个[http://www.couchbase.com/docs/couchbase-sdk-java-1.1/create-update-docs.html](http://www.couchbase.com/docs/couchbase-sdk-java-1.1/create-update-docs.html)文档，我通过在返回的 Future 对象上调用 get() 来同步添加这些 json 文档。

**我的问题：**

*   在将数据插入数据库之后，我如何从视图中获取数据有什么问题吗？有没有解决这个问题的好习惯？有人可以向我解释一下我做错了什么吗？

谢谢，
大流士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:01:36.160

在 Couchbase 2.0 中，文档需要先写入磁盘，然后才能显示在视图中。您可以通过三种方式使用 Java SDK 进行操作。第一个是异步的，这意味着您只需发送数据，然后再检查以确保正确接收到数据。如果您执行异步操作，然后像上面那样立即调用 .get() ，那么您已经创建了一个同步操作。当操作在上述两种情况下返回成功时，您只能保证该项目已写入内存。您的测试通过有时只是因为您很幸运，这两个项目在您的查询之前都已写入磁盘。

第三种执行操作的方法是具有耐久性要求，这是您要为测试执行的方法。持久性要求允许您说您希望在成功返回客户端之前将项目写入磁盘或复制。看看下面的函数。

[https://github.com/couchbase/couchbase-java-client/blob/1.1.0/src/main/java/com/couchbase/client/CouchbaseClient.java#L1293](https://github.com/couchbase/couchbase-java-client/blob/1.1.0/src/main/java/com/couchbase/client/CouchbaseClient.java#L1293)

您将需要使用此函数并将 PersistedTo 参数设置为 MASTER。

# iis - IIS 共享配置用户名

> ID：15077825
> 
> 赞同：2
> 
> 时间：2013-02-25T22:34:38.230
> 
> 标签：iis

我正在尝试使用来自 IIS 的队友的共享配置，但是，我不知道要为凭据输入什么用户名/密码。我尝试输入他导出设置时使用的加密密码。但我总是得到一个错误。我应该使用什么用户名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:34:38.230

观看此视频后：[http ://www.youtube.com/watch?v=e3Je0a2v_5U](http://www.youtube.com/watch?v=e3Je0a2v_5U)

我发现只要您的配置目录在您的本地计算机上（而不是在网络驱动器上），您就不会在共享配置页面中输入用户名或密码。在“操作”侧边栏中点击“应用”后，会弹出一个窗口询问您加密密码是什么。输入与导出设置的人相同的内容，您就可以了。

希望这可以帮助！

# android - Skiller 如何在多人游戏中发送信息 [Android]

> ID：15077828
> 
> 赞同：3
> 
> 时间：2013-02-25T22:34:44.877
> 
> 标签：android

我正在考虑使用 Skiller 来管理我的多人游戏并且有一些问题。我希望找到一些关于如何使用它的教程，但我必须查看代码和示例才能弄清楚。据我了解，在回合制游戏（有效负载）中来回发送的数据将是一个字符串。这意味着我的所有信息都需要压缩成一个字符串，然后在另一端提取出来？

例如，皮卡丘想在 Pidgey 上使用 Thundershock。要发送的信息：MoveName("Thundershock"), movePower("40"), specialAttack("55") （我可以在开头放一个键来帮助我弄清楚要发送的内容。）

```
String payload = "Move;Thundershock; 40; 55"; 
```

然后其他玩家的游戏会获取该信息并计算出造成的损害并将该信息发回

```
payload = "Damage; Super Effective; 23" 
```

这听起来如何？

```
SKApplication.getInstance().getGameManager().getTurnBasedTools().makeMove(gameId, event, payload, chatline,
new SKListenerInterface<SKGameMoveResponse>(){

@Override
public void onResponse(SKGameMoveResponse response){
    String gameId = response.getGameId();
    eTBGameState state = response.getGameState();
    String payload = response.getPayload();
    String chatline = response.getChatline();
    // handle opponent's move – explained in the next section
}

@Override
public void onError(SKStatusResponse response) {
    // failed to send the move
} 
```

});

这是[文档站点](http://wiki.skiller-games.com/Playing-finishing-and-rematching-tb-games.ashx)

# ruby - 如何在 Ruby 中获取多维哈希中的键？

> ID：15077837
> 
> 赞同：5
> 
> 时间：2013-02-25T22:35:24.497
> 
> 标签：ruby, hash

因此，使用普通哈希，您可以使用它来获取密钥：

```
hash.keys 
```

如何获得如下所示的多维散列的第二维的键：

```
{"<id>"=>{"first_name"=>"test", "last_name"=>"test_l", "username"=>"test_user", 
"title"=>"Sales Manager", "office"=>"test", "email"=>"test@test.com"}} 
```

`<id>`每个项目都是唯一的。

所以我从上面想要的键是：`first_name, last_name, username, title, office and email`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:38:24.620

你会做这样的事情：

```
hash["<id>"].keys 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:40:03.843

以下将为您提供二级哈希中使用的所有键。我已经使用过`uniq`，所以你不会得到重复。

```
hash.collect { |k, v| v.keys }.flatten.uniq 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T22:58:01.697

假设您有一个散列，其中包含一个未知键和一个值：散列。

```
h = {"<id>"=>{"first_name"=>"test", "last_name"=>"test_l", "username"=>"test_user", 
"title"=>"Sales Manager", "office"=>"test", "email"=>"test@test.com"}}

p h[h.keys.first].keys
#=> ["first_name", "last_name", "username", "title", "office", "email"] 
```

（但每次我看到这样的结构时，我都想知道为什么它不是结构）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T07:12:23.160

我假设您的意思是在基本哈希中会有几个唯一的“id”键指向嵌套的哈希，每个嵌套的哈希都包含“first_name”、“last_name”等键。如果是这样的话：

```
hash.values.map(&:keys) 
```

将返回一个数组数组，其中包含每个嵌套哈希的键。

另一方面，如果您只有一个键值对（如您的示例所示），您可以这样做

```
hash.values.first.keys 
```

这将返回与孤立嵌套哈希中的键相对应的扁平键数组。

# java - 使用 executeclass 的 IzPack ProcessPanel 未提供所需的 onSuccess/onFail 行为

> ID：15077839
> 
> 赞同：0
> 
> 时间：2013-02-25T22:35:27.403
> 
> 标签：java, izpack

我正在关注 IzPack 文档用例[Executing a Java Class with ProcessPanel](http://docs.codehaus.org/display/IZPACK/Executing+a+Java+Class+with+ProcessPanel)并且在实现 onSuccess 和 onFail 元素所需的行为时遇到了一些困难，并且可以使用更熟悉 IzPack 4.3.5 的人的一些说明。

我已经定义了一个 java 条件 process.panel.condition，在调用 Java 类中的 run 方法后，我想用它来控制进程面板上下一个和上一个按钮的可用性。此运行方法将 true 或 false 分配给 process.panel.condition 条件下的静态字段 ConditionBoolean。

我的期望是当 process.panel.condition 为真时，我希望上一个按钮被禁用并启用下一个按钮。当 process.panel.condition 为 false 时，我希望补码发生-previous 变为启用，next 变为禁用。

相反，似乎正在发生的是上一个按钮分配正在工作，但下一个按钮始终处于启用状态。

谁能指出我为什么会看到这种行为以及我应该如何改变我的方法以实现我想要的行为？

下面是在 executeclass 元素中引用的 xml 定义和关联的 Java 类。

```
<conditions>
    <condition type="java" id="process.panel.condition">
        <java>
            <class>MyClass</class>
            <field>ConditionBoolean</field>
        </java>
        <returnvalue type="boolean">True</returnvalue>
    </condition>
</conditions> 
```

处理规范xml如下：

```
<processing>
    <job name="Step 1">
        <executeclass name="MyClass">
            <arg>...</arg>
        </executeclass>
    </job>
    <onFail previous="false" next="false" />
    <onSuccess condition="!process.panel.condition" previous="true" next="false" />
    <onSuccess condition="process.panel.condition" previous="false" next="true" />
</processing> 
```

和 MyClass 实现：

```
import com.izforge.izpack.util.AbstractUIProcessHandler;

public class MyClasss {
    public static boolean ConditionBoolean;

    public void run(AbstractUIProcessHandler handler, String[] args) {      
        ConditionBoolean = false;

        try {
            ...

            ConditionBoolean = true;
        } catch (Throwable e) {
            handler.logOutput(e.getMessage(), false);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:05:20.777

我从未见过带有点的非内置条件 id。所以它可能是 izpack 的一个错误，考虑到它仍然有各种奇怪的错误。考虑将 id 更改为“processPanelCondition”之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:12:02.537

在深入研究 IzPack 问题后，我发现[IzPack-238](http://jira.codehaus.org/browse/IZPACK-238)，*即使 ProcessPanel 中的进程返回布尔值 false*，安装也会被视为成功，这指出 IzPack 在调用 run 方法后会报告成功一个 void 返回类型。

此问题随后在 4.2.1 版本中进行了修补，以允许 run 方法具有一个布尔返回值，该值指示 run 方法是否成功完成。尽管该问题已在 2009-02 年得到解决，但问题中提到的文档并未更新。

在将 run 方法的返回值从 void 切换为 boolean 并返回结果后，我能够解决我的问题。

# performance - 大流量负载下的 LAMP 堆栈性能

> ID：15077843
> 
> 赞同：0
> 
> 时间：2013-02-25T22:35:52.640
> 
> 标签：performance, optimization, lamp, traffic, server-load

我知道我的问题的标题相当模糊，所以我会尽量澄清。请随时调整这个问题，使其对社区更有用。

给定具有或多或少默认设置的标准 LAMP 堆栈（允许进行一些调整，打开客户端和服务器端缓存），在现代硬件（16Gb RAM、8 核 CPU、无限磁盘空间等）上运行, 部署一个相当复杂的 CMS 服务（一个 Drupal 或 Wordpress 项目以供争论） - 在我必须开始考虑性能之前，我可以合理地期望容纳多少流量、SQL 查询、用户请求？

注意：我知道细节很大程度上取决于项目的细节，即优化 MySQL 查询、索引内容、最小化文件系统命中 - 假设 web 开发人员做了专业的工作 - 我真的在寻找一个**非常粗略**的访问数字每天，高峰访问时间的流量，（事务）MySQL 之前有多少记录，等等。

*我知道真正回答我的问题的唯一方法是在一个真实的项目上运行负载测试*，我担心我的问题可能会被视为部分离题。

我想从有第一手经验的人那里得到一组数据，例如“我们运行了这样那样的设置，它至少处理了这么多负载[在这样那样之后问题开始浮出水面]”。我也对我可以做的任何有**说服力**的（我的时间很短）阅读非常感兴趣，以更好地理解这件事。

PS 我明天要见一位客户讨论他的项目，如果他的项目结果类似于 FourSquare，我想准备好推理性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:30:00.613

正如您所指出的，如果没有具体细节，很难回答。如果我的任务是你必须做的事情，我会依次处理每个组件（网络接口、CPU/内存、物理 IO 负载、SMP 锁定等）并获得最大可用容量，除以每个请求的粗略估计使用量。

比如网络io。您可能有 1 个 1Gb 卡，可能达到 100Mbytes/sec。（我倾向于使用理论最大值的 80%）。典型的“打击”有多大？对于 HTML、图像等，可能平均 3kbytes，这意味着您可以在物理级别出现瓶颈之前每秒实现 33k 请求。这些数字是绝对最大值，具体取决于您可能无法接近它们的工具和技能，但没有人能超过这些最大值。

对每个组件重复上述操作，也许稍微改变你的数字，你将快速了解可能存在的问题。然后，考虑一下如何在每个组件中快速获得更多容量，您是否可以只使用 $$ 并获得更多性能（例如，使用 SSD 驱动器而不是 HD）？或者你会达到一个不重新架构就无法移动的限制吗？还要考虑您有哪些可用资源，您是否有大量熟练的程序员时间、DBA 或大量现金？如果您拥有大量资源，您可以在沿着经验曲线移动时更轻松、更快地减少这些限制。

也不要忘记外部组件，防火墙对于持续流量的限制可能低于预期。

对不起，我不能给你真实的数字，我们的工作负载使用自定义服务器、高内存缓存和其他技巧，而不是使用你列出的所有产品。但是，我将主要关注 IO/SQL 查询和可能的网络 IO，因为这些往往是比 CPU/内存更硬的限制，尽管我相信其他人会有不同的看法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:04:08.397

显然，这个问题没有“正确”的答案，但我想关闭它并提供一些反馈。客户会议已经举行，性能确实很重要，他们的托管平台竟然在亚马逊云上:)

根据我独立完成的研究：

*   Memcache 是必须的；
*   MySQL（或您正在运行的任何持久存储实例）通常是第一个使用的。解决方案包括运行多个虚拟实例并在它们之间复制数据，分配负载；
*   [http://highscalability.com/](http://highscalability.com/)是一个很好的阅读:)

# jquery - Jquery - 显示和隐藏多个 div

> ID：15077845
> 
> 赞同：1
> 
> 时间：2013-02-25T22:35:55.493
> 
> 标签：jquery

我正在尝试学习一些 javascript/jquery，但我没有取得太大进展..

我有多个这样的 div：

```
 <div class="article1" style="display:none;">content</div>
 <div class="article2" style="display:none;">content</div>
 <div class="article3" style="display:none;">content</div> 
```

在每个类下我都有一个文本链接，一旦单击它，我希望它显示特定的 div。

像这样 ：

```
<a href="javascript:toggle(1);" class="showarticle">View Article</a> 
```

所以我想我会做一个我可以给出一个ID的函数，并在点击时显示div，这就是我试过的：

```
<script>  

            function toggle( id ) {
            $(".showarticle").click(function()){
               $(".article" + id).show();
                }    
            } 

</script> 
```

但是什么也没发生，但我看不出有什么问题。。

有人能告诉我我在这里没有做什么吗？

谢谢

编辑：我已经包含了 jquery 库；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:41:27.393

这不是您使用事件处理程序的方式。

事件处理程序加载一次，然后静静地坐在后台，等待触发它们的东西。在您的情况下，您想要`click`加载等待点击链接的处理程序（在加载 DOM 之后）。

像这样的东西。HTML：

```
<a href="#" id="1" class="showarticle">View Article</a> 
```

JS：

```
$(document).ready(function() {            // wait for DOM to load
    $(".showarticle").click(function(e) { // click handler for all .showarticles
        e.preventDefault();               // cancel normal click behavior
        $(".article" + this.id).show();   // if id="1", shows '.article1'
    });
}); 
```

* * *

那是“最小更改”版本。最佳实践是`data-`在链接上使用属性而不是 ID，在 div 上使用 ID 而不是类，并在开始时使用样式表将它们全部隐藏。

CSS：

```
.togglediv {
    display:none;
} 
```

HTML：

```
<div id="article1" class="togglediv">content</div>
<a href="#" data-togglediv="article1" class="showarticle">View Article</a> 
```

JS：

```
$(document).ready(function() {            // wait for DOM to load
    $(".showarticle").click(function(e) { // click handler for all .showarticles
        e.preventDefault();               // cancel normal click behavior
        $div = $('#'+$(this).data('togglediv')); // http://api.jquery.com/data
        $div.show();                      // or $div.toggle() to show and hide
    });
}); 
```

[http://jsfiddle.net/mblase75/sT6gw/](http://jsfiddle.net/mblase75/sT6gw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:39:37.067

每次单击其中一个`a`标签时，都会将`click`事件绑定到，`.showarticle`但不执行操作，一种方法是：

```
function toggle( id ) {
  $(".article" + id).show();
} 
```

您应该为此使用 id 而不是类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:45:03.673

将标记修复为如下所示：（从类中删除了数字，删除了标记 javascript 函数）

```
<div class="article" style="display:none;">content</div>
<a href="#" class="showarticle">View Article</a>
<div class="article" style="display:none;">content</div>
<a href="#" class="showarticle">View Article</a>
<div class="article" style="display:none;">content</div>
<a href="#" class="showarticle">View Article</a> 
```

然后这样做：固定语法，删除每次点击添加点击处理程序，更简单的代码。

```
$(".showarticle").click(function () {
     $(this).prev(".article").show();
 }); 
```

编辑：现在，你想隐藏以前显示的，只显示最近点击的：

```
$(".showarticle").click(function () {
    $('.article').hide();
    $(this).prev(".article").show();
}); 
```

编辑：另一种切换方式：假设这些是页面上唯一的“文章”和“展示文章”类

```
$(".showarticle").click(function () {
    $('.article').hide().eq($('.showarticle').index(this)).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:38:50.910

Javascript 版本可能如下所示，需要为每个 div 分配唯一的 id：

```
function toggle_visibility(id) {
    var e = document.getElementById(id);
    if(e.style.display == "inline") {
        e.style.display = 'none';
    }
    else if(e.style.display == "none") {
        e.style.display = "inline";
    }
} 
```

# android - Facebook Android SDK - 使用 UiLifecycleHelper 时，我应该使用 Activity 还是 Application 作为上下文？

> ID：15077849
> 
> 赞同：1
> 
> 时间：2013-02-25T22:36:13.660
> 
> 标签：android, facebook, session

您好我目前正在使用适用于 Android 的 Facebook SDK 3.0。这里首先是一些事实。

*   我没有将 app_id 放在 AndroidManifest.xml 中，而是以编程方式在我的 java 代码中设置了该值。因此，在处理会话时，我使用了类似以下辅助方法的方法。

    ```
    if (session == null || session.isClosed()) {
        String applicationId = Persistent.getString(null, SocialUtil.FACEBOOK_APP_ID);
        session = new Session.Builder(Utils.ctx).setApplicationId(applicationId).build();
        Session.setActiveSession(session);
    } 
    ```

*   一旦用户使用 facebook 登录，会话就会在许多活动中使用，这就是我为会话提供应用程序上下文的原因。

正如您在会话上下文中看到的，我提供了 Utils.ctx，它是一个应用程序对象。由于 Facebook SDK 的原生 UiLifecycleHelper 在会话不存在时使用 Activity 创建会话，因此我通过处理原始 UiLifeCycleHelper 并只是切换来创建自己的 FBIUiLifecycleHelper

```
 session = new Session(activity); 
```

至

```
 String applicationId = Persistent.getString(null, SocialUtil.FACEBOOK_APP_ID);
    session = new Session.Builder(Utils.ctx).setApplicationId(applicationId).build(); 
```

.

但是，似乎每当我的活动中的会话状态发生变化时，根本不会调用回调函数。我认为这是因为我在处理会话时使用了应用程序上下文而不是活动上下文。

我的问题是，1\. 当您为会话的上下文提供应用程序上下文或活动上下文时，它有什么不同？2\. 什么时候推荐的做法是？为什么？3\. 假设用户登录创建了一个带有活动上下文的会话。一旦这个会话被setActiveSession()设置为，这个会话可以通过调用getActiveSession()在其他活动中使用吗？也许我真的不必为会话上下文使用应用程序上下文？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:07:30.560

对于 1\. 和 2.，您创建 Session 所使用的 Context 无关紧要，可以是任何 Context（应用程序、服务或活动）。但是当你调用任何 open* 方法时，你必须通过 OpenRequest 传入一个 Activity 或一个 Fragment。如果您的会话没有在状态之间转换，那么这就是一个问题（请在您实际打开会话时发布更多代码，并确保您在 Activity 或 Fragment 中覆盖 onActivityResult 方法）。

对于 3.，是的，您可以从任何地方（Activity、Fragment 或应用程序中的任何其他代码）调用 getActiveSession。

# twitter-bootstrap - Bootstrap 表单标签和文本框排列

> ID：15077851
> 
> 赞同：1
> 
> 时间：2013-02-25T22:36:23.237
> 
> 标签：twitter-bootstrap

我有以下代码：

```
<fieldset>
 <legend> Personal Details </legend> 
 <form class =" form-inline well span9" > 

  <label> Last Name </label> 

  <input type="text" class = "span2" placeholder = "Type Last Name"/> 

  <label> Middle Name </label> 

  <input type="text" class = "span2"/>  

  <label> First Name </label> 

  <input type="text" class = "span2"/><br/>

  <label> NickName</label> 

  <input type="text" class = "span2"/>

   <label>Gender</label>
          <span class="controls span2">  
     <select id="select01" style="width:100%;">
        <option>Male</option>
        <option>Female</option>
     </select>
   </span> 

 </form> 
```

发生的情况是性别标签出现在别名标签和文本字段之后。有人可以解释如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T01:12:36.240

您可以通过以下方式创建有问题的表单：这是[http://jsfiddle.net/shail/sGgKE/](http://jsfiddle.net/shail/sGgKE/)
的 jsfiddle

具有 3 列形式的 Jsfiddle [http://jsfiddle.net/shail/ykpr5/show](http://jsfiddle.net/shail/ykpr5/show)

编辑：根据评论中的要求：带引导程序的三列表格

```
<form class="well span9">
<div class="row">
    <div class="span3">
        <label>First Name</label>
        <input type="text" class="span3" placeholder="Your First Name">
        <label>Last Name</label>
        <input type="text" class="span3" placeholder="Your Last Name">
    </div>
    <div class="span3">
         <label>Nickname</label>
        <input type="text" placeholder="Nickname" class="span3">
        <label>Email Address</label>
        <input type="text" class="span3" placeholder="Your email address">
    </div>
    <div class="span3">
        <label>Gender</label>
        <select name="Gender" id="DropdownGender" class="span3">
            <option value="">Male</option>
            <option value="">Female</option>
        </select>
    </div>
 </form> 
```

正则表格对齐

```
<div class="well span9">
<form id="form-inline">
    <fieldset>
        <legend>Personal Details</legend>
        <label>Last name</label>
        <input type="text" placeholder="Smith" class="input-xlarge">
        <label>Middle Name</label>
        <input type="text" placeholder="K" class="input-xlarge">
        <label>First Name</label>
        <input type="text" placeholder="John" class="input-xlarge">
        <label>Nickname</label>
        <input type="text" placeholder="Nickname" class="input-xlarge">
        <label>Gender</label>
        <select name="Gender" id="DropdownGender" class="input-xlarge">
            <option value="">Male</option>
            <option value="">Female</option>
        </select>
    </fieldset>
</form>
</div> 
```

# ruby-on-rails - 乘客生成服务器消耗大量 CPU

> ID：15077855
> 
> 赞同：2
> 
> 时间：2013-02-25T22:36:47.187
> 
> 标签：ruby-on-rails, passenger, cpu

我正在使用 VPS 进行测试（2Ghz，512Mo RAM）。它运行 Ubuntu 12.10 服务器、Apache2、Ruby 1.9.3、Rails 3.2.12、Passenger 3.0.19。

问题是“Passenger spawn server”进程一直以 50% 的 CPU 运行。（我是我的应用程序的唯一用户。）这正常吗？我能做点什么吗？

更多细节 ：

乘客身份

```
----------- General information -----------
max      = 6
count    = 1
active   = 0
inactive = 1
Waiting on global queue: 0

----------- Application groups -----------
/home/foscam/www/ledu:
  App root: /home/foscam/www/ledu
  * PID: 31401   Sessions: 0    Processed: 10      Uptime: 3h 25m 24s 
```

乘客记忆统计

```
----- Passenger processes -----
PID    VMSize    Private  Name
-------------------------------
16207  215.7 MB  0.3 MB   PassengerWatchdog
16210  547.1 MB  0.8 MB   PassengerHelperAgent
16212  108.9 MB  6.2 MB   Passenger spawn server
16215  165.3 MB  1.0 MB   PassengerLoggingAgent
31401  246.4 MB  83.7 MB  Rack: /home/foscam/www/ledu
### Processes: 5
### Total private dirty RSS: 92.04 MB 
```

# c# - 将 ucma 3.0 连接到 Office 365

> ID：15077858
> 
> 赞同：0
> 
> 时间：2013-02-25T22:37:06.447
> 
> 标签：c#, lync, office365

是否可以让 ucma3.0 与我的 office365 通话？我想构建一个查询机器人来创建和保持连接，并响应我域中其他用户的问题。我从 publishpresence 示例开始。使用 sipdir.online.lync.com 作为我的 FQDN。无论我为用户名 URI 等设置了什么，它总是说端点主动拒绝了我的连接尝试。据我所知，office365 正在运行 lync 2010 服务器，所以看起来这应该可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:01:36.877

无法将 UCMA 连接到 Office365。但是，您可以使用[Lync 2010 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=18898)，这是可用于控制本地 Lync 客户端的客户端 SDK。

根据您的要求，您可以在所谓的“UI-Suppression”模式下运行客户端，以便在不显示 Lync 界面的情况下为您提供到 Lync 服务器的活动连接。请参阅[了解 Lync SDK 中的 UI 抑制](http://msdn.microsoft.com/en-us/library/lync/hh345230%28v=office.14%29.aspx)。

# sql - SQl - ORA993 命令未正确结束

> ID：15077861
> 
> 赞同：-2
> 
> 时间：2013-02-25T22:37:12.987
> 
> 标签：sql, oracle, join, sql-update

编码：

```
UPDATE
        bid
SET
        bid.salesman_id = s.salesman_id
FROM
        bid
INNER JOIN
        salesman
ON
        bid.salesman = s.display_name
WHERE 
        bid.salesman is not null 
```

当我运行它时，它会产生一个 ora 993 错误 - 说明 sql 语句没有正确结束。

bid 和 salesman 是表名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:47:52.503

不幸的是，这在 Oracle 中无效。

我认为你必须尝试这样的事情：

```
UPDATE bid SET bid.salesman_id = (SELECT salesman.salesman_id
                                  FROM salesman
                                  WHERE bid.salesman = salesman.display_name)
WHERE bid.salesman is not null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:45:20.437

一方面，我看不到您在哪里为 salesman 创建别名。你也可以这样做：

```
Update bid
set bid.salesman_id = 
   (select s.salesman_id 
      from salesman s 
      where bid.salesman = s.display_name) 
```

# c# - 轻量级实时文件阅读器？

> ID：15077862
> 
> 赞同：-1
> 
> 时间：2013-02-25T22:37:12.670
> 
> 标签：c#, multithreading, file-io

这是我的问题（C#，.net3.5）：

1.  我基本上需要一个文件阅读器来读取文件，这些文件还没有，但会立即从文件夹中生成。
2.  我确切地知道这些文件的名称是什么。
3.  我想读取一个文件，处理该文件（一些统计数据计算），然后在当前处理完成后移至下一个文件
4.  最重要的是，我希望我的文件阅读器是轻量级版本，这意味着尽可能少地消耗 CPU 资源。

我不会考虑使用 FileSystemWatcher，因为：

1.  当一个事件进来（比如，文件准备好）时，我落后于处理另一个文件。因此，如果我依赖 FileSystemWatcher，我会错过事件。
2.  因为无论如何文件都会在那里，而且我确切地知道我的文件名，我想如果它们在那里，我可以继续阅读它们。

有人有什么建议吗？现在我已经尝试过 FileSystemWatcher，它跳过了很多文件。我还使用了一段时间（true），例如查看文件，直到所有文件都得到处理，但它消耗 90% 的 CPU。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:43:42.070

一个建议：在多个线程上使用文件系统观察程序，这些线程将队列中的文件泵送以在其他线程上处理。如果您仍然继续删除文件，那么您可以增加 FileSystemWatcher 缓冲区的大小，但这种方法应该有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T05:03:17.997

我的问题是，您必须立即解析文件有什么急事？

我会每隔 x 分钟或秒检查一次目录中的所有文件，将它们放入队列并处理它们。如果您出于某种原因想要保留它们，请删除这些文件或将它们重命名为不同的扩展名。

在捕获最后一个文件后的 x 次计时器上检查是否有新文件。是的，你会根据你的负载得到一些备份，但是我构建了一个解析器系统，每分钟输入数百条记录，使用这种方法工作得很好而且很花哨。

当在该 x 时间内没有要解析的记录时，程序会中断，直到它检查下一个间隔。这很好，因为您可以使用此方法以特定顺序检查多个目录以及不同进程。

# asp.net-mvc-3 - 当我通过分页单击 GridView 上的页面时没有任何反应

> ID：15077864
> 
> 赞同：0
> 
> 时间：2013-02-25T22:37:27.700
> 
> 标签：asp.net-mvc-3, gridview, paging, sqldatasource

我是 C# 和 .NET 的新手，但现在坚持了几天，我正在使用 MVC 3 (.NET 4.0) Web 应用程序。

我浏览了教程以使用以下代码制作基于 SqlDataSource 的 GridView：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
            OnPageIndexChanging = "GridView1_PageIndexChanging"
            AutoGenerateColumns="False" DataKeyNames="LastName,FirstName"
            EnablePersistedSelection="True" SelectedRowStyle-BackColor="Yellow" 
            DataSourceID="SqlDataSource1" AllowSorting="True" >
            <Columns>
                <asp:BoundField DataField="LastName" HeaderText="Last Name" ReadOnly="True" SortExpression="LastName" />
                <asp:BoundField DataField="FirstName" HeaderText="First Name" ReadOnly="True" SortExpression="FirstName" />
                ...
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ApplicationServices %>" 
            SelectCommand="SELECT * FROM User WHERE [IsDeleted]=0"></asp:SqlDataSource> 
```

但是，当我点击不同的页面时，什么也没有发生（看起来它重新加载了相同的页面），但是当我在 Chrome 的新标签中打开时，当我将鼠标悬停在链接“2”上时，它只会打开一个空白页面转到第 2 页，显示如下：

```
javascript:__doPostBack('ctl00$MainContent$GridView1','Page$2') 
```

当我单击标题进行排序时，没有任何事情发生，就像页面一样，链接说：

```
javascript:__doPostBack('ctl00$MainContent$GridView1','Sort$WindowsUsername') 
```

我也试过把这个 aspx 文件放在上面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.master" Inherits="..." %>
<script runat="server">

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        GridView1.DataBind();
    }
</script> 
```

和同样的问题。当我点击其他页面时，甚至没有调用这个函数

我在某处遗漏了什么吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:44:11.613

`OnPageIndexChanging`您必须在您没有的 .aspx 中指定事件。它应该是：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        OnPageIndexChanging = "GridView1_PageIndexChanging" 
        AutoGenerateColumns="False" DataKeyNames="LastName,FirstName"
        EnablePersistedSelection="True" SelectedRowStyle-BackColor="Yellow" 
        DataSourceID="SqlDataSource1" AllowSorting="True"> 
```

# compiler-construction - 在 Windows 上运行时执行 LLVM IR

> ID：15077869
> 
> 赞同：2
> 
> 时间：2013-02-25T22:37:46.107
> 
> 标签：compiler-construction, runtime, llvm, interpreter

在互联网和 Stackoverflow 的一些研究中，关于如何在运行时执行 IR 代码的唯一示例是SO上的[这个示例。](https://stackoverflow.com/questions/1838304/call-the-llvm-jit-from-c-program)我现在已经用 Visual Studio 2012 编译了 llvm 和 clang，我能够编译一些我想用于“脚本”扩展的源文件，`clang File.cpp -S -emit-llvm -O3`这样输出就是通常的 IR 代码，比如

```
; ModuleID = '.\Test.cpp'
target datalayout = "/* ... */"
target triple = "i686-pc-win32"
define i32 @test() #0 {
  ret i32 43
}
attributes #0 = { nounwind /* ... */ } 
```

我提到的帖子**真的很**老，我想知道两件事：

1.  如何在运行时使用 llvm 3.2 初始化引擎并执行此类代码（使用 C++）？仍然使用相同的调用吗？
2.  在编译期间创建了[大量的库](https://i.imgur.com/BA5OEGs.png)。我怎么知道哪些必须链接？

* * *

**我的代码有效，可能需要一些优化**

```
#include <iostream>
#include <llvm/IR/LLVMContext.h>
#include <llvm/ADT/Triple.h>
#include <llvm/Bitcode/ReaderWriter.h>
#include <llvm/CodeGen/LinkAllCodegenComponents.h>
#include <llvm/ExecutionEngine/GenericValue.h>
#include <llvm/ExecutionEngine/Interpreter.h>
#include <llvm/ExecutionEngine/JIT.h>
#include <llvm/ExecutionEngine/JITEventListener.h>
#include <llvm/ExecutionEngine/JITMemoryManager.h>
#include <llvm/ExecutionEngine/MCJIT.h>
#include <llvm/ExecutionEngine/SectionMemoryManager.h>
#include <llvm/IR/Module.h>
#include <llvm/IR/Type.h>
#include <llvm/Support/CommandLine.h>
#include <llvm/Support/Debug.h>
#include <llvm/Support/DynamicLibrary.h>
#include <llvm/Support/Format.h>
#include <llvm/Support/IRReader.h>
#include <llvm/Support/ManagedStatic.h>
#include <llvm/Support/MathExtras.h>
#include <llvm/Support/Memory.h>
#include <llvm/Support/MemoryBuffer.h>
#include <llvm/Support/PluginLoader.h>
#include <llvm/Support/PrettyStackTrace.h>
#include <llvm/Support/Process.h>
#include <llvm/Support/Signals.h>
#include <llvm/Support/TargetSelect.h>
#include <llvm/Support/raw_ostream.h>

#pragma comment(lib, "LLVMMCJIT.lib")
#pragma comment(lib, "LLVMInterpreter.lib")
#pragma comment(lib, "LLVMBitReader.lib")
#pragma comment(lib, "LLVMAsmParser.lib")
#pragma comment(lib, "LLVMX86CodeGen.lib")
#pragma comment(lib, "LLVMX86AsmParser.lib")
#pragma comment(lib, "LLVMX86Disassembler.lib")
#pragma comment(lib, "LLVMJIT.lib")
#pragma comment(lib, "LLVMAsmPrinter.lib")
#pragma comment(lib, "LLVMSelectionDAG.lib")
#pragma comment(lib, "LLVMX86Desc.lib")
#pragma comment(lib, "LLVMExecutionEngine.lib")
#pragma comment(lib, "LLVMRuntimeDyld.lib")
#pragma comment(lib, "LLVMMCParser.lib")
#pragma comment(lib, "LLVMCodeGen.lib")
#pragma comment(lib, "LLVMX86AsmPrinter.lib")
#pragma comment(lib, "LLVMX86Info.lib")
#pragma comment(lib, "LLVMObjCARCOpts.lib")
#pragma comment(lib, "LLVMScalarOpts.lib")
#pragma comment(lib, "LLVMX86Utils.lib")
#pragma comment(lib, "LLVMInstCombine.lib")
#pragma comment(lib, "LLVMTransformUtils.lib")
#pragma comment(lib, "LLVMipa.lib")
#pragma comment(lib, "LLVMAnalysis.lib")
#pragma comment(lib, "LLVMTarget.lib")
#pragma comment(lib, "LLVMCore.lib")
#pragma comment(lib, "LLVMMC.lib")
#pragma comment(lib, "LLVMObject.lib")
#pragma comment(lib, "LLVMSupport.lib")

using namespace llvm;

int main(int argc, char **argv) {
    InitializeNativeTarget();
    LLVMContext &context = getGlobalContext();
    ExecutionEngine *ee;
    SMDiagnostic diag;
    Module *m = ParseIRFile("Script.s", diag, context);
    if(!m) {
        diag.print("LLVMSandbox", errs());
        return 1;
    }
    m->MaterializeAllPermanently();
    ee = EngineBuilder(m).create();
    Function *func = ee->FindFunctionNamed("main");
    typedef int (*PFN)();
    PFN pfn = reinterpret_cast<PFN>(ee->getPointerToFunction(func));
    int i = pfn();
    std::cout << i;
    std::cin.get();
    delete ee;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:44:56.423

LLVM 正在以惊人的速度发展，并且难以跟上。因此，找到在 LLVM 不断向前发展的同时继续工作的代码的最佳方法是查看使用 LLVM 构建和测试的代码。

在这种情况下，您需要该`lli`工具（`tools/lli`在代码中）。它是 LLVM IR 的通用“执行器”，使用解释器或 JIT 引擎之一。它也应该在 Windows 上工作。您可以将它用作实例化所有必需的 LLVM 机器（就 C++ 代码而言）和构建新的独立工具（您可以模仿它的 makefile 或`CMakeLists.txt`）的示例

# php - 由于内存限制，串行 json_decode

> ID：15077870
> 
> 赞同：5
> 
> 时间：2013-02-25T22:37:53.683
> 
> 标签：php, json

我有一个大型 json 文件（7.3MB），我尝试对其进行 json_decode，但由于内存限制而失败（致命错误：允许的内存大小为 134217728 字节已用尽）。有没有办法串行解码 json 文件，一次只有一个对象/节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:43:05.567

我想理论上你可以编写一些逻辑来解析字符串开头和结尾的字符，在构建对象/数组表示的同时迭代地减少内存中的字符串大小，但这将是一个严重的痛苦。

为什么不只是增加你的内存限制，或者如果这是一些需要频繁解码的 JSON（即对 Web 应用程序的每个请求），你应该考虑将它分解成更多的使用组件。

# ruby - RubyMine - 如何调试 Cucumber Step 文件？

> ID：15077874
> 
> 赞同：3
> 
> 时间：2013-02-25T22:38:13.837
> 
> 标签：ruby, cucumber, rubymine

RubyMine - 如何调试 Cucumber Step 文件？我已经用谷歌搜索了一下，我发现的任何信息都对我不起作用。有没有人在使用 RubyMine 时需要调试步骤文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:36:15.883

将“撬”添加到您的 Gemfile

需要“撬”（靠近顶部，或在您的启动/挂钩中）

在您要调试的步骤中，遇到问题：binding.pry

这会将您转储到 REPL 中，您可以在其中检查所有局部变量等。如果您正在使用 selenium 与浏览器交互，您还可以查看浏览器，使用“检查元素”，然后查看是否可以找到带有硒调用。

你也可以做一个步骤（我的叫做“我调试”），除了调用 binding.pry 之外什么都不做；如果您只想暂时停止 selenium 自动化，这很有用。要退出 REPL，请使用 'exit' 或 ^D。

你必须从命令行运行你的cukes才能有效地使用它；不知道 ruby​​mine 有什么功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:07:31.710

网上有很多很多失败的解决方案，这是一个可怕的常见问题。您不需要任何新宝石，也无需更改设置。

很可能，您的所有功能文件都在根文件夹中。

这听起来很荒谬，但是创建一个新文件夹，将功能文件放在那里（称之为“测试”之类的通用名称）。

设置断点，然后重试。这应该补救它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T00:23:02.010

就我而言，我在 Gemfile 的正确组中没有“调试器”gem

确保：

```
group :development, :test do
  gem 'debugger'
end 
```

**不再推荐使用 debugger gem，请改用[debugger2](https://github.com/ko1/debugger2)。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-16T22:52:38.350

添加以下内容作为 features/support/debugging.rb 的内容有助于调试失败的步骤：

```
# `LAUNCHY=1 cucumber` to open page on failure
After do |scenario|
  save_and_open_page if scenario.failed? && ENV['LAUNCHY']
end

# `FAST=1 cucumber` to stop on first failure
After do |scenario|
  Cucumber.wants_to_quit = ENV['FAST'] && scenario.failed?
end

# `DEBUG=1 cucumber` to drop into debugger on failure
After do |scenario|
  next unless ENV['DEBUG'] && scenario.failed?
  puts "Debugging scenario: #{scenario.title}"
  if respond_to? :debugger
    debugger
  elsif binding.respond_to? :pry
    binding.pry
  else
    puts "Can't find debugger or pry to debug"
  end 
end

# `STEP=1 cucumber` to pause after each step
AfterStep do |scenario|
  next unless ENV['STEP']
  unless defined?(@counter)
    puts "Stepping through #{scenario.title}"
    @counter = 0
  end
  @counter += 1
  print "At step ##{@counter} of #{scenario.steps.count}. Press Return to"\
        ' execute...'
  STDIN.getc
end 
```

通过设置一个环境变量，可以让Cucumber使用各种调试工具，也可以通过设置多个环境变量来组合它们。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T14:31:41.487

不是 RubyMine，但如果您对 CLI 感到满意，那么**调试器**gem会很有帮助

`[sudo] gem install debugger`

然后将关键字**调试器**放在有问题的 LOC 之前并正常运行 cucumber。**调试器**将在您遇到问题的 LOC 之前停止。

我一直用它来逐步解决 Cucumber/WATIR 的问题。

[https://github.com/cldwalker/debugger](https://github.com/cldwalker/debugger)

# oracle-xe - Oracle Express Edition 11gR2：“表或视图不存在”，但它显示在“dba_tables”中！

> ID：15077876
> 
> 赞同：3
> 
> 时间：2013-02-25T22:38:21.427
> 
> 标签：oracle-xe

对，这是我的问题。

我在玩一些 ETL 工具，它在我的 Oracle XE 中创建了一些表。然后我注意到我既不能访问这些表也不能删除它们。

正如您在屏幕截图中看到的（好吧，我无法发布图像，所以我不得不复制/粘贴文本）。查询“dba_tables”会显示该表，但在删除它时，Oracle 会说“不存在”。

```
SQL> select table_name from dba_tables where owner='HR';

TABLE_NAME
------------------------------
REGIONS
LOCATIONS
DEPARTMENTS
JOBS
EMPLOYEES
JOB_HISTORY
DetailedOrders
COUNTRIES

8 rows selected.

SQL> drop table HR.DetailedOrders cascade constraints;
drop table HR.DetailedOrders cascade constraints
              *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> 
```

我也试过：创建一个同名的空表——成功！然后放下它——成功！查询 dba_tables 或 user_tables，它还在！

这是一个已知问题吗？我该如何解决？

谢谢，

杰里米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:05:53.353

执行这些命令时，您以什么用户身份登录？

假设您以其他用户身份登录`HR`（听起来您可能是），您可以通过查询发现表存在`DBA_TABLES`但您没有任何权限对该表执行任何操作是有道理的. 这意味着您的帐户已被授予`SELECT ANY DICTIONARY`特权或`SELECT_CATALOG_ROLE`角色之类的权限，但尚未明确被授予以下权限`hr.DetailedOrders`. 当您尝试对您没有权限的表执行某些操作时遇到的错误是 ORA-00942，并且错误消息的设计是为了不会无意中向攻击者提供有关数据库中可能存在的表的信息通过告诉您问题是该表确实不存在还是确实存在并且您没有特权。这可能会使错误有点混乱，特别是如果您碰巧使用的帐户已被授予访问`DBA_TABLES`.

“创建一个同名的空表”是什么意思？您是在谈论`DetailedOrders`在当前架构中创建表吗？如果是这样，那也将起作用（就像丢表一样）。每个模式都是一个单独的命名空间。`DetailedOrders`因此，如果您愿意，您可以在数据库的每个模式中拥有一个对象。其中一些可能是表，一些可能是视图，一些甚至可能是存储过程——当然，这没有多大意义，但肯定可以做到。

此外，该`DetailedOrders`表似乎是作为区分大小写的标识符创建的。这是一个可怕的想法。Oracle 默认使用不区分大小写的标识符，但如果您用双引号将标识符括起来，则可能会强制使用区分大小写的标识符。这是一个[StackOverflow 线程，它更详细地讨论了区分大小写与不区分大小写的标识符](https://stackoverflow.com/questions/563090/oracle-what-exactly-do-quotation-marks-around-the-table-name-do/563126#563126)。不过，简短的回答是，如果你确实有能力放下桌子，你需要做类似的事情

```
DROP TABLE HR."DetailedOrders" 
```

其中表的名称用双引号括起来，并且大小写与您在数据字典中看到的大小写匹配。每次查询表时，您也必须这样做。许多工具不能很好地处理区分大小写的标识符，如果你在他们的数据库中创建区分大小写的标识符，未来的开发人员会诅咒你的名字。但你可以做到。

# javascript - MathJax 渲染 Android

> ID：15077884
> 
> 赞同：1
> 
> 时间：2013-02-25T22:39:08.680
> 
> 标签：javascript, android, webview, mathjax

现在我为Android编写程序。此应用程序必须使用*MathJax 库*将公式呈现给**WebView**。但我有问题......有时它不起作用（不时形成）......现在来源：

 *```
// This function calls everytime before output

public static void clearWebView()
{
    w.loadDataWithBaseURL("http://bar", "<!DOCTYPE html><html><head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no\"> <script type='text/x-mathjax-config'>"
            +"MathJax.Hub.Config({ " 
                +"showMathMenu: false, "
                +"jax: ['input/TeX','output/HTML-CSS'], "
                +"extensions: ['tex2jax.js'], " 
                +"TeX: { extensions: ['AMSmath.js','AMSsymbols.js',"
                  +"'noErrors.js','noUndefined.js', 'MathZoom.js'" +
                "] } "
              +"});</script>"
            +"<script type='text/javascript' "
              +"src=\"file:///android_asset/MathJax/MathJax.js\""
              +"></script></head><body><span id='solve'></span></body></html>" ,"text/html","utf-8", "");
    } 
```

还有两个渲染函数：

```
public static void RenderHTML(String html)
{       
        w.loadUrl("javascript:document.getElementById('solve').innerHTML += '" + html + "';");

}

public static void RenderMath(String tex)
{
    RenderHTML("\\\\[" + doubleEscapeTeX(tex) + "\\\\]");

    w.loadUrl("javascript:MathJax.Hub.Queue(['Typeset',MathJax.Hub]);");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-15T19:57:15.077

这是 4.4 的完美解决方案：

```
 wq.getSettings().setJavaScriptEnabled(true);
            wq.getSettings().setBuiltInZoomControls(true);
            wq.getSettings().setLoadWithOverviewMode(true);
            wq.loadDataWithBaseURL("http://bar/", "<script type='text/x-mathjax-config'>"
                    +"MathJax.Hub.Config({ "
                    +"showMathMenu: false, "
                    +"jax: ['input/MathML','output/HTML-CSS'], " // output/SVG
                    +"extensions: ['mml2jax.js'], "
                    +"TeX: { extensions: ['noErrors.js','noUndefined.js'] }, "
                    //+"'SVG' : { blacker: 30, "
                    // +"styles: { path: { 'shape-rendering': 'crispEdges' } } } "
                    +"});</script>"
                    +"<script type='text/javascript' "
                    +"src='file:///android_asset/MathJax/MathJax.js'"
                    +"></script><span id='text'> </span> <span id='math'></span>", "text/html", "utf-8", "");

    if (android.os.Build.VERSION.SDK_INT < 19)
            {
                wq.loadUrl("javascript:document.getElementById('math').innerHTML='"
                    + "<math xmlns=\"http://www.w3.org/1998/Math/MathML\">"
                    + "<mstyle displaystyle=\"true\">"
                    + doubleEscapeTeX(questn+ans)
                    + "</mstyle></math>';");
                wq.loadUrl("javascript:MathJax.Hub.Queue(['Typeset',MathJax.Hub]);");
            }
            else
            {
                wq.evaluateJavascript("javascript:document.getElementById('math').innerHTML='<font color=\"#000000\">`"+doubleEscapeTeX(questn+ans)+"`</font>';",null);
                wq.loadUrl("javascript:MathJax.Hub.Queue(['Typeset',MathJax.Hub]);");
            } 
```*

# pandas - 更改熊猫中的整数数据系列时出现类型错误

> ID：15077885
> 
> 赞同：1
> 
> 时间：2013-02-25T22:39:13.160
> 
> 标签：pandas

我在更改 DataFrame 中的整数系列时遇到问题。当我尝试将整数系列的一部分更改为另一个整数系列的等长部分时，就会出现问题。

这是重现我的问题的简单代码：

```
import pandas as pd
import numpy as np
a = np.arange(10,dtype=np.int)
b = a**2 - 10*a + 12
df = pd.DataFrame({'a':a,'b':b,'a_float':a.astype(np.float),
                   'b_float':b.astype(np.float)})
print df.dtypes

a         int64
a_float   float64
b         int64
b_float   float64

cond = df.b<0
df.b[cond] = 7  #works, as expected
df.b_float[cond] = df.a_float[cond] #works
df.b[cond] = df.a[cond] #gives a TypeError

--------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-25-518b5957d002> in <module>()
----> 1 df.b[cond] = df.a[cond]

Users/kmt/Envs/scilab/lib/python2.7/site-packages/pandas-0.11.0.dev_eb3134f-py2.7-macosx-     10.7-x86_64.egg/pandas/core/series.pyc in __setitem__(self, key, value)
    740         if _is_bool_indexer(key):
    741             key = _check_bool_indexer(self.index, key)
--> 742             self.where(~key,value,inplace=True)
    743         else:
    744             self._set_with(key, value)

/Users/kmt/Envs/scilab/lib/python2.7/site-packages/pandas-0.11.0.dev_eb3134f-py2.7-macosx-    10.7-x86_64.egg/pandas/core/series.pyc in where(self, cond, other, inplace)
    681             raise ValueError('Length of replacements must equal series length')
    682 
--> 683         np.putmask(ser, ~cond, other)
    684 
    685         return None if inplace else ser

TypeError: Cannot cast array data from dtype('float64') to dtype('int64') according to the rule  'safe' 
```

注意

```
b[cond] = a[cond]
df.b = b 
```

作品。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:20:52.600

您遇到了我们最近发现的这个错误。见这里：[https](https://github.com/pydata/pandas/issues/2746) ://github.com/pydata/pandas/issues/2746 。不幸的是，这有点棘手。您想使用布尔 int 进行就地设置（不需要填充）。我将链接到此示例并查看。

# knockout.js - 使用 knockout.js 在同一页面上的多个“喜欢”计数器

> ID：15077886
> 
> 赞同：0
> 
> 时间：2013-02-25T22:39:26.550
> 
> 标签：knockout.js

我是淘汰新手，在同一页面上创建多个“喜欢”按钮计数器时遇到问题。

这是我的代码。

```
 <ul>
            <li>
              <h4>Item 1</h4>
              <div><span data-bind='text: numberOfClicks1'>&nbsp;</span> likes</div>
              <button data-bind='click: registerClick'>Like?</button>
            </li>
            <li>
              <h4>Item 2</h4>
              <div><span data-bind='text: numberOfClicks2'>&nbsp;</span> likes</div>
              <button data-bind='click: registerClick'>Like?</button>
            </li>
        </ul>

<script type='text/javascript' src='js/knockout-2.2.1.js'></script>

<script type="text/javascript">
    var item1 = function() {
      this.numberOfClicks1 = ko.observable(0);
      this.registerClick = function() {
          this.numberOfClicks1(this.numberOfClicks1() + 1);
      };
    };

    ko.applyBindings(new item1());

    var item2 = function() {
      this.numberOfClicks2 = ko.observable(0);
      this.registerClick = function() {
          this.numberOfClicks2(this.numberOfClicks2() + 1);
      };
    };

    ko.applyBindings(new item2());
</script> 
```

不确定我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:41:47.257

您的第一个问题是`ko.applyBindings`将给定的视图模型应用于整个页面。如果要控制 ViewModel 的应用位置，请将 DOM 节点作为第二个参数传入。[您可以在 this fiddle](http://jsfiddle.net/tyrsius/AXu9t/)中使用您的代码看到这一点。

`ko.applyBindings(new item1(), document.getElementById("firstNode"));`

但是，这假设您希望拥有多个绑定上下文和单独的视图模型。这给我们带来了第二个问题：代码重复。你可以通过为它创建一个 Viewmodel 来使你喜欢的东西的代码可重用。

```
var Likeable = function(name) {
    var self = this;
    self.name = ko.observable(name);
    self.likes = ko.observable(0);
    self.like = function() {
        self.likes(self.likes() + 1);
    };
}; 
```

使用这个可重用的模型，您可以创建一个可爱对象的集合，并将单个上下文绑定到它。[你可以在这个小提琴](http://jsfiddle.net/tyrsius/Kfgj5/)中看到这个

# php - [php]仅在客户端输出计算器的结果

> ID：15077890
> 
> 赞同：0
> 
> 时间：2013-02-25T22:39:31.033
> 
> 标签：php, html, mysql, xhtml

客户端代码名称类似于 calc.php

```
<html>
<head>
</head>
</body>

<form action="TESTC.php" method="POST">

<input type="text" name="num1">

<select name="operator">
<option value="+">+</option>
<option value="-">-</option>
<option value="*">*</option>
<option value="/">/</option>
</select>

<input type="text" name="num2">
<input type="submit">
</form>

</body>
</html> 
```

运行 php 代码的服务器端是 TESTC.php

```
<?php

if(isset($_POST['num1']) && isset($_POST['num2']) && isset($_POST['operator'])) {

    $num1 = $_POST['num1'];
    $num2 = $_POST['num2'];
    $operator = $_POST['operator'];

    if (!empty($num1) && !empty ($num2) && !empty($operator)) {
    echo 'ok';
} else {
    echo 'Fill in all fields. ';

    }
}

 if ($operator=='+'){
        echo $num1."+".$num2."=<b>".($num1+$num2)."</b>";
    }
     if ($operator=='-'){
        echo $num1."-".$num2."=<b>".($num1-$num2)."</b>";
    }
     if ($operator=='/'){
        echo $num1."/".$num2."=<b>".($num1/$num2)."</b>";
    }
     if ($operator=='*'){
        echo $num1."*".$num2."=<b>".($num1*$num2)."</b>";
    }   
?> 
```

我有这个工作，但我只能让这个代码在服务器端输出我不正确理解如何让 num1 和 num2 中的两个表单的输出在客户端页面“newCalc.php”上输出。有人可以解释一下我如何在提交表单后将其输出到一页上而不是拍摄到 TESTC.php 吗？我可以使用 html 代码和 php 在一个页面上获取 html 表单和 php 计算器代码。有人可以帮忙谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:41:24.313

对不起，但这正是你必须这样做的。

php 不是客户端服务。如果您想更新 html 而不发布到服务器并呈现新页面，您将需要 javascript。

例子：

```
// form_template.php
<html><!-- show your form on this page -->
    <form action="calc.php">
    <?php if ($result) echo $result; ?>

// calc.php
<?php // get your POST stuff
    $result = $whatever;
    require_once('form_template.php');

// form.php
<?php // Do defaults here
    $result = false;
    require_once('form_template.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:15:23.597

抱歉告诉你，但这不是它的工作方式，你应该做的是向你的 php 脚本发送一个 ajax 请求，更新将返回你查询和回显的答案。一开始可能看起来很困难，但 ajax 可能是我学过的最有用的“语言”。尽管我讨厌`w3schools.com`他们确实有一个非常好的关于 ajax 及其与 PHP 的关系的教程，[你可以在这里找到它](http://www.w3schools.com/php/php_ajax_database.asp)

# c# - 如何使用来自父项的项目 ID 在子 ListView 中呈现相关项目

> ID：15077897
> 
> 赞同：1
> 
> 时间：2013-02-25T22:40:03.463
> 
> 标签：c#, asp.net, linq, entity-framework

我有一个嵌套列表视图，目标是从外部列表视图中提取 ID 并将其传递给下面的方法，因为`CurrentCategoryId`这将允许我的第二个列表视图正确填充。从我读到的应该用事件处理程序来完成，`OnItemDataBound`但我无法理解它是如何工作的？

请让我知道，如果你有任何问题

```
<asp:ListView ID="ListView1"
    ItemType="E_Store_Template.Models.Category"
    runat="server"
    SelectMethod="GetCategories"
    OnItemDataBound="brandList_ItemDataBound">
    <ItemTemplate>
        <ul>
            <li style="list-style-type: none; text-align: left;">
                <b style="font-size: large; font-style: normal">
                    <a href="<%#: GetRouteUrl("ProductsByCategoryRoute", new {categoryName = Item.CategoryName}) %>">
                        <%#: Item.CategoryName %>
                    </a>
                    <asp:ListView ID="brandList" runat="server" ItemType="E_Store_Template.Models.Brand">
                        <ItemTemplate>
                            <ul style="list-style-type: none; text-align: left;">
                                <li>
                                    <a href="<%#: GetRouteUrl("ProductsByCatBrandRoute", new {brandName = Item.BrandName}) %>">
                                        <%#: Item.BrandName %>
                                    </a>
                                </li>
                            </ul>
                        </ItemTemplate>
                    </asp:ListView>
                </b>
            </li>
        </ul>
    </ItemTemplate>
</asp:ListView> 
```

我认为事件处理程序需要看起来像这样

```
protected List<Brand> brandList_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    ListViewDataItem dataItem = (ListViewDataItem)e.Item;

    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Category mydata = (Category)dataItem.DataItem;
        int CurrentCategoryId = mydata.CategoryID;
        var query = _db.Products.Where(p => p.Category.CategoryID == CurrentCategoryId).Select(p => p.Brand).Distinct();
        return query.ToList<Brand>();
    }
    else
    {
        return null;
    }
} 
```

但给了我错误：

```
'System.Collections.Generic.List<E_Store_Template.Models.Brand> E_Store_Template.SiteMaster.brandList_ItemDataBound(object, System.Web.UI.WebControls.ListViewItemEventArgs)' has the wrong return type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:04:22.843

ItemDataBound 并非旨在返回数据，而是旨在处理事件。在这种情况下，事件正在呈现一个类别以及需要作为子事件发生的任何事情。正确的做法是从父项获取子 ListView 并将您的数据绑定到它。标记：

```
<asp:ListView ID="categoryList" runat="server"
    OnItemDataBound="brandList_ItemDataBound" ItemType="E_Store_Template.Models.Category" SelectMethod="GetCategories">
        <LayoutTemplate>
            <ul style="list-style-type: none;">
                <asp:PlaceHolder runat="server" ID="itemPlaceholder" />
            </ul>
        </LayoutTemplate>
        <ItemTemplate>
            <li style="text-align: left;">
                <b style="font-size: large; font-style: normal">
                    <a href="<%#: GetRouteUrl("ProductsByCategoryRoute", new {categoryName = Item.CategoryName}) %>">
                        <%#: Item.CategoryName %>
                    </a>
                </b>
                <asp:ListView ID="brandList" runat="server">
                    <LayoutTemplate>
                        <ul style="list-style-type: none; text-align: left;">
                            <asp:PlaceHolder runat="server" ID="itemPlaceholder" />
                        </ul>
                    </LayoutTemplate>
                    <ItemTemplate>
                        <li>
                            <a href="<%#: GetRouteUrl("ProductsByCatBrandRoute", new {brandName = Item.BrandName}) %>">
                                <%#: Item.BrandName %>
                            </a>
                        </li>
                    </ItemTemplate>
                </asp:ListView>
            </li>
        </ItemTemplate>
    </asp:ListView> 
```

后面的代码：

```
protected void brandList_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    ListViewDataItem dataItem = (ListViewDataItem)e.Item;

    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Category mydata = (Category)dataItem.DataItem;

        int CurrentCategoryId = mydata.CategoryID;
        var query = _db.Products.Where(p => p.Category.CategoryID == CurrentCategoryId).Select(p => p.Brand).Distinct();

        ListView brandList = (ListView)e.Item.FindControl("brandList");
        brandList.DataSource = query.ToList<Brand>();
        brandList.DataBind();
    }
} 
```

我添加了带有 PlaceHolders 的 LayoutTemplates，这样您的 ListView 就不会为每条记录重复您的标签。我还移动了您的结束标签，因为您不应该将块元素（无序列表）作为粗体标签集的子元素。

我会考虑在 1 个（或 2 个）SQL 查询中获取所有类别和品牌，然后通过适当的 CategoryID 过滤品牌数据列表。您可以将 Brands 数据列表存储为页面级变量，但不要将其加载到 Session 或 ViewState 中，您只需要在页面呈现期间使用它。

# ember.js - Ember.js RC1 - 注册和注入

> ID：15077903
> 
> 赞同：1
> 
> 时间：2013-02-25T22:40:11.673
> 
> 标签：ember.js

我正在尝试将 Logger 对象注入到所有 Ember 控制器、视图和模型中。

我在这里尝试了这个例子： http: [//emberjs.com/blog/2013/02/15/ember-1-0-rc/](http://emberjs.com/blog/2013/02/15/ember-1-0-rc/)在“注册和注入”部分，它似乎不起作用。

```
var App = window.App = Em.Application.create({
    ...
    Logger: Em.Object.extend(),
    ...
});

App.register('logger:main', Em.Object.extend());
App.inject('model', 'logger', 'logger:main');
App.inject('view', 'logger', 'logger:main');
App.inject('controller', 'logger', 'logger:main'); 
```

在我看来，当我尝试获取记录器时，它是未定义的：

```
this.get('logger'); 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:03:50.613

[JSBin 示例](http://jsbin.com/ixupad/98/edit)

我不确定为什么视图没有`logger`注入，但一种解决方法是`logger`从视图的控制器中获取：

```
App = Ember.Application.create({});

App.Logger = Ember.Object.extend({
  log: function(message) {
    console.log(message);
  }
});

App.register('logger:main', App.Logger);
App.inject('model', 'logger', 'logger:main');
App.inject('view', 'logger', 'logger:main');
App.inject('controller', 'logger', 'logger:main');

App.TestView = Ember.View.extend({
  didInsertElement: function() {
    this.get("controller.logger").log("log through controller");
  }
}); 
```

# javascript - 颜色选择器更新输入值

> ID：15077904
> 
> 赞同：1
> 
> 时间：2013-02-25T22:40:16.513
> 
> 标签：javascript, jquery, html, forms, color-picker

好的，我花了一整天的时间在这上面，我错过了一些东西，只是想不通。我正在使用这个简单的颜色选择器[http://www.dynamicdrive.com/dynamicindex11/colorjack/index.htm](http://www.dynamicdrive.com/dynamicindex11/colorjack/index.htm)

我要做的是更新背景颜色，然后是字体颜色，让用户看到实时结果，并在文本输入框中自动更新十六进制颜色代码。下面是我的代码。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
             <title>Color Picker</title>
             <link href="plugin.css" rel="stylesheet" type="text/css" />
             <script src="plugin.js" type="text/JavaScript"></script>
            </head>
            <body>
            <div id="plugin" onmousedown="HSVslide('drag','plugin',event)" style="TOP: 140px; LEFT: 430px; Z-INDEX: 20;">
             <div id="plugHEX" onmousedown="stop=0; setTimeout('stop=1',100);">F1FFCC</div><div id="plugCLOSE" onmousedown="toggle('plugin')">X</div><br>
             <div id="SV" onmousedown="HSVslide('SVslide','plugin',event)" title="Saturation + Value">
              <div id="SVslide" style="TOP: -4px; LEFT: -4px;"><br /></div>
             </div>
             <form id="H" onmousedown="HSVslide('Hslide','plugin',event)" title="Hue">
              <div id="Hslide" style="TOP: -7px; LEFT: -8px;"><br /></div>
              <div id="Hmodel"></div>
             </form>
            </div>

            <table>
              <tr>
                <td class="formlabel" align="right" valign="top">

                  <!-- color box to show background color and font color -->

                  <div id="currentcolor" style="margin-top:2px;padding:4px 10px 4px 10px;background-color:F1FFCC"><span id="showfontcolor" style="color:">Current Text Color</span></div>

                  <!-- End color box --></td>
                <td valign="top"><table>
                    <tbody>
                      <tr>
                        <td><div class="small">Background Color</div>
                          <input name="colorcode" id="colorcode" value="" maxlength="199" class="textbox" style="width:80px" type="text">
                          <a href="javascript:toggle('plugin','colorcode');">Color Picker</a></td>
                        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                        <td><div class="small">Text Color</div>
                          <input name="fontcolor" id="fontcolor" value="" maxlength="199" class="textbox" style="width:80px" type="text">
                          <a href="javascript:toggle('plugin','fontcolor');">Color Picker</a></td>
                      </tr>
                    </tbody>
                  </table></td>
              </tr>
            </table>

            <script type="text/javascript">

            //*** CUSTOMIZE mkcolor() function below to perform the desired action when the color picker is being dragged/ used
            //*** Parameter "v" contains the latest color being selected
            function mkColor(v){
            //** In this case, just update DIV with ID="colorbox" so its background color reflects the chosen color

            $S('currentcolor').background='#'+v;
            $('colorcode').value='#'+v;
            }

            loadSV(); updateH('F1FFCC');
            toggle('plugin');

            </script>

            </body>
            </html> 
```

`colorcode`问题是它不会`fontcolor`实时更新输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:59:25.630

所以你的javascript有几个问题。下面我修复了你的代码：

```
function mkColor(v){
                var field2update = $('#divUpdateID')[0].innerHTML;
                if (field2update=='colorcode') {
                    $('#currentcolor').background='#'+v;
                    $('#colorcode').value='#'+v;
                } else if (field2update=='fontcolor') {
                    $('#showfontcolor').color='#'+v;
                    $('#fontcolor').value='#'+v;
                }
            } 
```

你所有的 jquery 选择器都坏了。也是`innerHTML`dom 函数而不是 jquery 函数，因此它需要用于 dom 对象而不是 jquery 对象数组。

以下是如何更新这些内容。您必须弄清楚将其放置在代码中的哪个位置，因为我不太清楚它们应该放在哪里：

```
$("#currentcolor").html("The value it needs to be updated with!");
$("#colorcode").value = "Same as above!"; 
```

上面更新了背景，下面将更新你的`fontcolor`：

```
$("#fontcolor").value = "The value you want!";
$("#currentcolor").css("color", "your text color value here!"); //this line updates the color of the text in the `currentcolor` div; 
```

**编辑：**

这是对上述代码的重写，也是对您使用的插件的更改：

更改为插件：

```
var type_to_update = ''; //this goes in the global namespace,
...
function toggle(v, type){ //changed to accept which input should be updated
    $S(v).display=($S(v).display=='none'?'block':'none'); 
    type_to_update = type; //updating the global variable 
} 
```

更改您的代码：

```
function mkColor(v){
    if(type_to_update == 'colorcode' || type_to_update == ''){ //default to changing background color if one of the pickers has not been clicked on.
        $S('currentcolor').background = "#"+v;
        $('colorcode').value = '#'+v;
    }else if(type_to_update == 'fontcolor'){
        $S('currentcolor').css("color", '#'+v);
        $('fontcolor').value = '#'+v;
    }

    loadSV();
    updateH('F1FFCC');
    toggle('plugin');
} 
```

# cordova - jquery移动应用程序中的动态页面

> ID：15077906
> 
> 赞同：0
> 
> 时间：2013-02-25T22:40:29.297
> 
> 标签：cordova, jquery-mobile

我有一个使用 PhoneGap 运行的 jquery 移动应用程序。整个应用程序大约有 10 页，它们都写在一个 index.html 中。前三页是设置向导，这意味着在用户完成向导后，他们应该从应用程序中删除（我不想让用户在完成后返回向导）。
在我的 main.js 中，我正在检查用户是否已注册并在使用 changePage() 加载应用程序后直接跳转到第 4 页问题是在向导之后或应用程序加载后，用户可以返回到向导页面，或第一个向导页面，因为这是应用程序的第一页。

我想从第 1 页或第 4 页开始，在这些情况下不允许返回。

我应该重新加载应用程序，还是删除页面？实现此功能的最佳方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:32:46.073

看看这个

```
$( window ).on( "navigate", function( event, data ){
    if( data.state.direction == "back" ) {
       // Make use of the directional information
    }
} 
```

您必须绑定导航事件，如果您在第 4 页，只需使用`preventDefault`并执行您想要的操作。

# java - java中带有volatile的单例

> ID：15077910
> 
> 赞同：15
> 
> 时间：2013-02-25T22:40:42.090
> 
> 标签：java, concurrency

```
class MyClass
{
      private static volatile Resource resource;

      public static Resource getInstance()
      {
            if(resource == null)
                  resource = new Resource();
            return resource;
      }
 } 
```

如果您使用易失性，安全发布发生（即，一旦引用对另一个线程可见，数据也可用），我的怀疑是根据实践中的java并发性。那么我可以在这里使用它吗？但如果它是正确的，那么假设 thread1 现在检查“资源”并且它为空，因此它开始创建对象。当 thread1 创建对象时，另一个线程，即 thread2 来并开始检查“resource”的值，thread2 发现它为 null（假设创建“resource”对象需要相当长的时间，并且由于 thread1 尚未完成创建，所以安全发布没有发生，因此 thread2 不可用）那么它也会开始创建对象吗？如果是，则类不变量中断。我对么？请帮助我理解这里对 volatile 的特殊使用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T22:42:58.663

你是对的，多个线程可以尝试创建一个 Resource 对象。Volatile 只是保证如果一个线程更新了引用，所有其他线程都会看到新的引用，而不是一些缓存的引用。这更慢，但更安全。

如果您只需要一个延迟加载的资源，则需要执行以下操作：

```
class MyClass
{
      private static volatile Resource resource;
      private static final Object LOCK = new Object();

      public static Resource getInstance()
      {
            if(resource == null) { 
                synchronized(LOCK) { // Add a synch block
                    if(resource == null) { // verify some other synch block didn't
                                           // write a resource yet...
                        resource = new Resource();
                    }
                }
            }
            return resource;
      }
 } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-30T06:50:24.833

volatile 解决了一个问题，**即可见性问题**。如果您正在写入一个**声明为 volatile 的变量，**那么该值将立即对其他线程可见。众所周知，我们在 os L1、L2、L3 中有不同级别的缓存，如果我们在一个线程中写入变量，则不能保证对其他线程可见，因此如果我们使用 volatile，它会写入直接内存并且是可见的给别人。但是 volatile 并没有解决**原子性**问题，即`int a; a++;`不安全。因为有三个与之关联的机器指令。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-25T22:59:01.357

我知道您不是在询问更好的解决方案，但如果您正在寻找一个惰性单例解决方案，这绝对值得。

使用私有静态类来加载单例。在调用之前不会加载该类，因此在该类加载之前不会加载引用。通过实现加载类是线程安全的，并且您也产生很少的开销（如果您正在执行重复的易失性加载[这可能仍然很便宜]，此解决方案在初始构造后总是正常加载）。

```
class MyClass {
    public static Resource getInstance() {
        return ResourceLoader.RESOURCE;
    }

    private static final class ResourceLoader {
        private static final Resource RESOURCE = new Resource();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T22:44:53.643

我认为，您应该在定义`syncronized`之前使用关键字。`getInstance`

为了获得更好的性能，您可以使用双重检查锁定模式：

*   [IBM 上的双重检查锁定和单例模式](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)
*   [Wiki 上的双重检查锁定](http://en.wikipedia.org/wiki/Double_checked_locking_pattern)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T22:44:37.440

`volatile`关键字保证对该变量的读写是原子的。

根据[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)

```
Reads and writes are atomic for all variables declared volatile 
```

> 使用 volatile 变量可以降低内存一致性错误的风险，因为对 volatile 变量的任何写入都会与后续读取该相同变量建立起之前发生的关系。这意味着对 volatile 变量的更改始终对其他线程可见。更重要的是，这还意味着当一个线程读取一个 volatile 变量时，它不仅会看到对 volatile 的最新更改，还会看到导致更改的代码的副作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T22:45:08.213

当应用于字段时，Java volatile 保证：

> 1.  （在所有 Java 版本中）对 volatile 变量的读取和写入都有全局顺序。这意味着访问 volatile 字段的每个线程都将在继续之前读取其当前值，而不是（可能）使用缓存值。（但是，不能保证 volatile 读写与常规读写的相对顺序，这意味着它通常不是有用的线程构造。）
>     
>     
> 2.  （在 Java 5 或更高版本中）易失性读取和写入建立了先发生关系，就像获取和释放互斥锁一样。

更多[信息](http://en.wikipedia.org/wiki/Volatile_variable)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T22:53:25.723

你是对的，在这种情况下，由于你描述的种族，资源可能会被构造两次。如果您想在 Java 5+ 中实现单例（没有显式锁定），请使用枚举单例，如[在 Java 中实现单例模式的有效方法是什么？](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java).

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T23:43:00.333

首先，以这种方式拥有一个单例，您实际上是在创建一个全局对象，这是一种不好的做法。我认为您使用 Enums 代替。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-20T18:23:36.187

这是我将 volatile 和同步添加在一起的建议。

注意：我们仍然需要仔细检查。

```
public class MySingleton {
    private static volatile MySingleton instance;
    private MySingleton() {}

    synchronized private static void newInstance() {
        if(instance == null) {
            instance = new MySingleton();
        }
    }

    public static MySingleton get() {
        if(instance == null) {
            newInstance();
        }
        return instance;
    }
} 
```

# jsf-1.2 - 弹出问题 - JSF1.2

> ID：15077918
> 
> 赞同：0
> 
> 时间：2013-02-25T22:41:27.907
> 
> 标签：jsf-1.2, trinidad

我有一个带有弹出链接的父屏幕，所以当我打开和关闭弹出窗口 10 次并尝试将数据保存在父屏幕上时，我看到父屏幕的视图丢失了。

我在 web.xml 中配置了可以在会话中存储为 10 的最大 JSF 视图，并且 state_saving_method 是服务器（由于拱形决定，我无法将其更改为客户端）

那么有没有办法从会话中删除视图或防止父屏幕的视图丢失？

提前致谢

# iscroll4 - iScroll 带有可拖动的桌面浏览器滚动条

> ID：15077920
> 
> 赞同：2
> 
> 时间：2013-02-25T22:41:31.767
> 
> 标签：iscroll4, iscroll

我想让我的网页使用 iScroll4，对于桌面（linux、mac 或 pc）浏览器用户来说更好一些。我想将可拖动滚动条添加到 iScroll 组件并隐藏默认指示器。或者，如果可以以某种方式更改默认指示器以接受点击和拖动 - 那也很棒。

到目前为止，我已经以这种方式更改了 iScroll 事件处理程序：

从：

```
case MOVE_EV: that._move(e); break;
case END_EV: 
```

至：

```
case MOVE_EV: that.disable(); break;
case END_EV: that.enable(); break; 
```

完成此更改是因为否则 iScroll 元素内的向下拖动会将页面滚动到错误的方向。

* * *

现在我在 iScroll 元素中显示实际滚动条时遇到了一些严重问题。添加：

```
overflow:scroll; 
```

到包含 iScroll 的 div，使滚动条仅在几分钟内可见，并且仅在鼠标滚动后可见。然后滚动条消失。

如果有人有任何好主意，如何更改 iScroll.js 文件以使 iScroll 可以实际更改自身以具有可拖动的滚动条，那就太好了。

我还想指出，我想保留以默认方式为支持触摸的设备使用 iScroll 的选项，并仅更改桌面浏览器的默认行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:07:14.717

我在 github 上找到了 ZoranJambor 提出的解决方案：

[https://github.com/ZoranJambor/iscroll](https://github.com/ZoranJambor/iscroll)

他的 iScroll 有一个额外的参数 draggableScrollbars 如果你想有可拖动的滚动条可以设置为 true。

另请参阅以下示例：

[https://github.com/ZoranJambor/iscroll/tree/master/examples/draggable-scrollbars](https://github.com/ZoranJambor/iscroll/tree/master/examples/draggable-scrollbars)

谢谢你，希望这对其他人也有帮助 - 我花了整整两天时间寻找解决方案。

BR！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T13:52:57.817

在 iScroll 5 中，有一个名为“*可拖动且用户可以与之交互*`interactiveScrollbars`的滚动条”的选项：http : [//iscrolljs.com/#scrollbars](http://iscrolljs.com/#scrollbars)

 *请注意，此选项默认设置为`false`，因此要启用它，您需要将其显式设置为`true`，例如：

```
var someElementWrapper = document.getElementById('some-element-wrapper');
new IScroll(someElementWrapper, {scrollbars: true, interactiveScrollbars: true}); 
```

* * *

^(这件事也被报告为iScroll Github 存储库中的[issue #342](https://github.com/cubiq/iscroll/issues/342) （现已关闭）。)*

# jquery-ui - jQueryUI draggable() 和 resizable() 在 IE9 中不能一起工作

> ID：15077922
> 
> 赞同：0
> 
> 时间：2013-02-25T22:41:39.850
> 
> 标签：jquery-ui, internet-explorer-9, jquery-ui-draggable, jquery-ui-resizable

我试图让 .draggable() 和 .resizable() 都在 IE9 中工作，但它似乎不想同时做这两个。因此，我制作了一个带有“按钮”类的 div 的测试页面，以找出可能导致问题的原因。我觉得它应该可以工作，但 IE9 似乎仍然只想启用可拖动。演示的测试页面是 [http://tanagerproductions.com/test/blank.html](http://tanagerproductions.com/test/blank.html) 我已经尝试清除缓存并刷新，对象仍然只能拖动，不能调整大小。IE 也没有在页面上给我任何 js 错误。有人可以向我解释我做错了什么吗？

编辑：可以从该测试页面查看源代码，但这里是 js 代码。$(document).ready(function(){ $('.button').draggable().resizable(); });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:14:07.797

我想到了。我没有链接 CSS 文件。因此，对其他人来说，请确保您的头脑中有 .js 文件和 .css 文件，以便 jQueryUI 正常工作。

# javascript - JS 函数包装

> ID：15077931
> 
> 赞同：0
> 
> 时间：2013-02-25T22:42:09.383
> 
> 标签：javascript, jquery

考虑以下两个代码示例：

```
// Example 1
$('#myButton').click(function() {
    alert('I was clicked');
});

// Example 2
$('#myButton').click(
    alert('I was clicked');
); 
```

为什么具体示例 2 不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:44:23.457

您的第二个代码片段不起作用，因为它调用对象的[alert()](https://developer.mozilla.org/en-US/docs/DOM/window.alert)方法`window`（返回`undefined`），并将*它返回的值*（因此，`undefined`）作为处理程序传递给 jQuery 对象的[click()](http://api.jquery.com/click/)方法。

`undefined`不是一个有效的事件处理程序，所以`click()`忽略它并且什么都不做（除了可能在控制台中记录错误，具体取决于您的浏览器）。

您的第一个代码片段传递了一个真正的函数，该函数反过来调用`alert()`. 由于它是一个函数，因此可以将其注册为事件处理程序。

# c++ - 用字符串打印出 Vector

> ID：15077932
> 
> 赞同：1
> 
> 时间：2013-02-25T22:42:09.717
> 
> 标签：c++, vector

我有下面的代码。代码后跟一个示例输入文件。当我去 cout 数组时，它会这样做：

输出：

```
Joe
Browns
93
Samantha
Roberts
45 
```

为什么字符串只读取到空白然后继续？我认为字符串接受空格？谢谢。

代码：

```
 ifstream in_stream;

    in_stream.open("in.dat");
    if(in_stream.fail())
    {
        cout<< "Input file opening failed.  \n";
        exit(1);
    }
    vector <string> a;
    int i = 0;
    string dummy;
    while(in_stream>>dummy)
    {
       a.push_back(dummy);
       cout<<a[i]<<endl;
        i++;
    }
    in_stream.close( ); 
```

示例输入文件：

```
Joe Browns
93
Samantha Roberts
45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:43:30.510

`operator>>`将任何类型的空格解释为分隔符。`getline()`如果您需要阅读整行，请使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:46:38.653

更改 while 循环，以便阅读整行。

```
while (getline(in_stream, dummy))
{
    a.push_back(dummy);
    cout << a[i] << endl;
    i++;
} 
```

# c# - 通过 javascript 从移动应用程序向服务器传递正确的日期

> ID：15077937
> 
> 赞同：0
> 
> 时间：2013-02-25T22:42:22.527
> 
> 标签：c#, javascript, asp.net-mvc, cordova, offlineapps

我正在尝试使用 PhoneGap 创建一个移动应用程序。我需要应用程序在断开连接模式下工作。所以我在本地存储数据，当连接变为在线时，我将其与远程数据同步。要执行远程同步，我需要将 lastmodified 日期传递给服务器，以便它知道将哪些更新推送到客户端。问题是服务器时间和客户端时间不同。事实是服务器日期，所以我需要能够以某种方式在服务器上解释客户端日期以与服务器日期一致或从客户端传递服务器数学日期。关于如何做的任何建议？我正在考虑使用

```
(new Date()).getTimezoneOffset() 
```

来自javascript并基于此调整客户端日期。但这在日光节约方面存在问题。有什么建议么？服务器是一个 ASP.NET MVC 4 站点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:15:12.037

如果有多个客户端在多个时区运行，您可以做的一个技巧是计算服务器和客户端之间的时间差，并在查询服务器时应用它。以下是步骤

1.  客户端在上午 10 点从服务器下载数据（与客户端一样）
2.  客户端存储**上次下载**时间
3.  客户端下线
4.  客户在下午 1.30 上线，并决定现在是与服务器同步的好时机
5.  客户端向服务器询问当前时间，服务器回复其 2.45pm
6.  现在客户端知道它和服务器之间的时间差是1小时15分钟
7.  客户端将此 1 小时和 15 分钟的增量应用于**上次下载时间**（步骤 2），并要求服务器发送自服务器时间上午 11.15 起的任何更新

请记住，您必须为每个事务（同步操作）计算应用增量，因为客户端可能在两次同步操作期间跨越时区

可能还有其他很酷的解决方案，但这是一个简单的解决方案。

干杯

# c# - 如何使用约定来指定外键和主键应该是连接子类表上的同一列？

> ID：15077939
> 
> 赞同：0
> 
> 时间：2013-02-25T22:42:29.373
> 
> 标签：c#, fluent-nhibernate, automapper, fluent-nhibernate-mapping

标题几乎说明了一切。如果我有 2 节课：

```
public class Account
{
    public virtual Guid AccountId { get; set; }
    public virtual string Name { get; set; }
}

public class VendorAccount : Account
{
    public virtual string TaxId { get; set; }
} 
```

我将如何使用约定来创建这样的 VendorAccount 表（或一些近似值）：

```
create table VendorAccount
(
    AccountId uuid not null primary key references Account (AccountId),
    TaxId varchar
); 
```

这几天我一直在纠结这个。 `IJoinedSubclassConvention`并且`ISubclassConvention`不允许您指定 Id，并且所有其他约定似乎也无法达到这种情况。

我得到的最接近的会做一个专栏`account_id`，这不是我想要的。

# iphone - 提供来自 NSUrlConnection didReceiveAuthenticationChallenge 的有意义的错误

> ID：15077945
> 
> 赞同：5
> 
> 时间：2013-02-25T22:43:13.067
> 
> 标签：iphone, ios, cocoa-touch, cocoa

我正在使用[Certificate and Public Key Pinning](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning)的 OWASP 示例。该示例使用[random.org](http://www.random.org)，并且[random.org](http://www.random.org)最近获得了新证书。这意味着`connection:didReceiveAuthenticationChallenge:`失败。这是意料之中的，很好:)

但是，失败显示为“NSURLErrorDomain”，代码为-1012。这不是很有帮助，用户将无法用它做任何有意义的事情：

[![在此处输入图像描述](../Images/d4ad6fd00d23fe6c1dfcc33e26b27f9e.png)](https://i.stack.imgur.com/KElKO.png)

最好提供一条带有类似于“警告：标识网站的公钥已更改...”的文本的消息。

另一个小问题：在`connection:didFailWithError:`，我无法判断 -1012 是由于固定失败还是其他网络错误。所以我只想为证书失败提供消息，而不是其他 -1012 错误。

如何为调用提供“丰富的错误信息” `[[challenge sender] cancelAuthenticationChallenge: challenge]`（`connection:didReceiveAuthenticationChallenge:`失败时调用）。[NSURLConnectionDelegate 协议参考](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)和[NSURLAuthenticationChallengeSender 协议参考](http://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/Protocols/NSURLAuthenticationChallengeSender_Protocol/Reference/Reference.html)没有提到如何这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T13:04:14.587

尝试使用

```
NSString * alertMessage = [challenge.error localizedFailureReason]; 
```

获取人类可读的错误信息。

请参阅[NSError](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/occ/instm/NSError/localizedFailureReason)和[NSURLAuthenticationChallenge](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLAuthenticationChallenge_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLAuthenticationChallenge/error)的文档。

# html - 如何使 div 定位在多个表格行上并覆盖其中的所有超链接？

> ID：15077946
> 
> 赞同：1
> 
> 时间：2013-02-25T22:43:17.713
> 
> 标签：html, hyperlink, overlap, absolute

我在桌子顶部有一个绝对定位的 div 有一个奇怪的问题。div 从单元格内的超链接悬停时切换，在此单元格内，所有其他超链接都被 div 隐藏，在下一行但是超链接没有被覆盖？所有常规文本都被隐藏，但超链接不被隐藏。![在此处输入图像描述](../Images/02e2afe92a780d5f9560fd7112dd004d.png)

我真的很喜欢一个没有发生这种情况的小代码示例=）

添加了编辑代码

```
<script src="jquery.js" type="text/javascript"></script>

<style>
    .box {
        display:none;
        position: absolute;
        top: 30px; 
        left: 10px;
        background: orange;
        padding: 5px;
        border: 1px solid black;
    }
</style>

<table id="sessionsTable" style="border-collapse: collapse; border: 1px solid black;">
    <tr>
        <td style="border: 1px solid black;">
            <div style="position: relative;">
                <a id="companyLink1" href="">Hoverlink</a><br>
                <a href="">link</a><br>
                <a href="">link</a>
                <div id="companyDiv1" style="height: 300px;" class="box" >
                    Stuff shown on hover
                </div>
                <script>
                    $('#companyLink1').mouseover(function() { $('#companyDiv1').show(); });
                    $('#companyLink1').mouseover(function() { $('#companyDiv1').show(); });
                    $('#companyLink1').mouseout(function() { $('#companyDiv1').hide(); });
                </script>
            </div>
        </td>
    </tr>
    <tr>
        <td style="border: 1px solid black;">
            <div style="position: relative;">
                <a id="companyLink2" href="">Hoverlink</a><br>
                <a href="">link</a><br>
                <a href="">link</a>
                <div id="companyDiv2" style="height: 300px;" class="box" >
                    Stuff shown on hover
                </div>
                <script>
                    $('#companyLink2').mouseover(function() { $('#companyDiv2').show(); });
                    $('#companyLink2').mouseover(function() { $('#companyDiv2').show(); });
                    $('#companyLink2').mouseout(function() { $('#companyDiv2').hide(); });
                </script>
            </div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:20:19.363

我要在这里捅一刀。表格中的链接通常不会这样做，但您将单元格内容包含在另一个`div`. 这些 div 按顺序绘制到屏幕上，并根据此顺序计算 z-index（以后没有其他 z-index/定位考虑的 div 绘制在前面的上面）。因此，表格中“稍后”（下方和右侧）的单元格将在您的 div 上方绘制 div。它只是看起来像链接，因为您的 div 没有背景颜色。

要解决此问题，请为悬停 div 设置正的 z-index。

**注意**：如果可能，我始终主张不要使用内联样式或脚本。它使调试变得困难，产生丑陋的代码，并增加了另一个毛茸茸的样式先例规则。

CSS：

```
td .box {
    z-index: 1;
} 
```

这是一个快速修复示例：http: [//jsfiddle.net/b9pCC/](http://jsfiddle.net/b9pCC/)

请注意，您可以清理很多，但这就是您所看到的问题。

**编辑：**这是一个清理后的版本：http: [//jsfiddle.net/XXafA/](http://jsfiddle.net/XXafA/)

# javascript - Jquery tablesorter 不工作

> ID：15077948
> 
> 赞同：0
> 
> 时间：2013-02-25T22:43:28.090
> 
> 标签：javascript, jquery, html, tablesorter

一般来说，我是`Jquery`网络编程的新手。我正在尝试使用该`tablesorter` `jquery`插件，但我的一个程序却发现它不起作用。经过一些调整，我无法使其工作。于是求助于 Stack Overflow。

你能解释一下我的错误是什么吗？提前致谢 ：）

现在，我的`html`文件（以下代码）与我的“jquery.tablesorter.js”在同一个文件夹中。我正在尝试使用下面引用的 W3 学校的 google Jquery CDN：

[http://www.w3schools.com/jquery/jquery_install.asp](http://www.w3schools.com/jquery/jquery_install.asp)

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="jquery.tablesorter.js"></script> 
<script type="text/javascript">
$(document).ready(function() 
    { 
         $("#myTable").tablesorter( {sortList: [[0,0], [1,0]]} ); 
    } 
); 
</script>
</head>
<body>  
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>Last Name</th> 
    <th>First Name</th> 
    <th>Email</th> 
    <th>Due</th> 
    <th>Web Site</th> 
</tr> 
</thead> 
<tbody> 
<tr> 
    <td>Smith</td> 
    <td>John</td> 
    <td>jsmith@gmail.com</td> 
    <td>$50.00</td> 
    <td>http://www.jsmith.com</td> 
</tr> 
<tr> 
    <td>Bach</td> 
    <td>Frank</td> 
    <td>fbach@yahoo.com</td> 
    <td>$50.00</td> 
    <td>http://www.frank.com</td> 
</tr> 
<tr> 
    <td>Doe</td> 
    <td>Jason</td> 
    <td>jdoe@hotmail.com</td> 
    <td>$100.00</td> 
    <td>http://www.jdoe.com</td> 
</tr> 
<tr> 
    <td>Conway</td> 
    <td>Tim</td> 
    <td>tconway@earthlink.net</td> 
    <td>$50.00</td> 
    <td>http://www.timconway.com</td> 
</tr> 
</tbody> 
</table> 
</body>
</html>

for filename in os.listdir (input_dir) :
  f = open(file_name, 'rb')
  file_content = f.readlines()
  f.close()
  len_file = len(file_content)
  while( i < len_file ):
    line = file_content[i].split(delimiter)
    i +=1 
```

**Update1：**​​我能够修复此错误。似乎从 Google 添加内容分发导致将其更改为内部目录的错误似乎可以解决问题。

其实我变了

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

到这条线。

```
<script src="jquery-1.9.1.js" type="text/javascript" ></script> 
```

它奏效了:)

任何想法为什么 Google CDN 不起作用？谢谢！:)

**更新2：**

本地测试代码时，尝试在google CDN调用前加***http :。即，***

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

享受插件:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:23:38.130

我敢打赌它正在工作，你只是没有看到任何表格样式，因为`tablesorter.css`文件没有加载。尝试单击表头，看看它是否排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T11:35:36.557

你可以试试 - 它对我有用..

```
$(document).ready(function() 
    { 

         $("#myTable").tablesorter({sortList:[[0,0],[2,1]], widgets:'zebra']});
    } 
); 
```

# android - 如何在没有活动的类中使用 getContentResolver？

> ID：15077955
> 
> 赞同：12
> 
> 时间：2013-02-25T22:43:37.140
> 
> 标签：android

我的课看起来像这样：

```
public class sendInformation{

  public void test() throws Exception {
    Uri uri = SuspiciousActivityTable.CONTENT_URI;
    getContentResolver().update(uri, values2, where,new String[]{"Null"});
    }
  }
} 
```

但它说不 `getContentResolver()`存在，我知道我需要一个上下文或活动来完成这项工作，但我如何在这里获得正确的上下文？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-25T22:47:34.220

您将需要传递一个上下文，即使[`ContentResolver`](http://developer.android.com/reference/android/content/ContentResolver.html)该类也需要一个有效的上下文才能被实例化。

最简单的方法是作为方法的参数：

```
public void test(Context context) throws Exception {
    Uri uri = SuspiciousActivityTable.CONTENT_URI;
    context.getContentResolver().update(uri, values2, where,new String[]{"Null"});
  } 
```

并调用：（假设包含的类`test`已实例化*并且*您的 Activity 的名称是`MyActivity`<- 替换为`Activity`您调用`test()` *的*名称）

```
try{
    sendInformationInstanceVariable.test (MyActivity.this);
}
catch (Exception e)
{
 e.printStackTrace();
} 
```

`MyActivity.this`可以缩短为仅`this` **当**您不是`test()`从匿名内部类内部调用时。

此外，如果您的类确实没有充分的理由实例化，请考虑创建`test()`一个`static`方法，如下所示：

```
public static void test(Context context) throws Exception {
        Uri uri = SuspiciousActivityTable.CONTENT_URI;
        context.getContentResolver().update(uri, values2, where,new String[]{"Null"});
      } 
```

然后从您的`Activity`，您无需实例即可调用此方法：

```
try{
    sendInformation.test (MyActivity.this);
}
catch (Exception e)
{
 e.printStackTrace();
} 
```

最后，投掷`Exception`是不好的做法，不要没有充分的理由这样做，如果你有充分的理由，请尽可能具体。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T22:48:22.203

在您的应用程序开始（并且您可以访问`getApplicationContext()`）和您调用的点之间的某个地方`test()`，您需要将 a 传递`Context`给您的`sendInformation`班级。我会查看您的 sendInformation 类的生命周期，并将其与各种 Android 组件（应用程序、活动、片段）进行比较，并从那里使用适当的上下文：

*   应用：`getApplicationContext()`

*   活动：this（作为活动扩展上下文）

*   分段：`getActivity()`

# c++ - C++ 编译器在 Steinberg VST SDK 文件中找不到没有绝对路径的文件

> ID：15077960
> 
> 赞同：0
> 
> 时间：2013-02-25T22:43:54.737
> 
> 标签：c++, netbeans, sdk, vst

我正在尝试编译一个已经包含在 Steinberg VST SDK 中的简单程序。

我遇到的问题是我的编译器无法找到该文件，除非它具有绝对路径。出于某种原因，代码的编写方式使我的编译器无法找到文件需要它的位置。

例如：

在文件 vstcomponentbase.h 中，位于 C:\Users\180945\Documents\Programs\vstsdk352_25_09_2012_build_16\VST3 SDK\public.sdk\source\vst\

有这一行：

```
#include "pluginterfaces/base/ipluginbase.h" 
```

ipluginbase.h 位于 C:\Users\180945\Documents\Programs\vstsdk352_25_09_2012_build_16\VST3 SDK\plugininterfaces\base

除非我将线路更改为

```
#include "C:\Users\180945\Documents\Programs\vstsdk352_25_09_2012_build_16\VST3 SDK\pluginterfaces\base\ipluginbase.h" 
```

它行不通。

我使用 NetBeans 作为我的 IDE。我想让文件自动找到文件应该在哪里。它应该可以工作，因为我使用的是 Steinberg 的 VST SDK，它有演示和其他应该按给定工作的代码位。在本来应该可以工作的东西中编辑的东西太多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:46:32.753

编译器如何知道您将这些包含文件隐藏在哪里:)？您需要`"C:\Users\180945\Documents\Programs\vstsdk352_25_09_2012_build_16\VST3 SDK"`在编译器选项中添加包含文件的搜索路径。对于 gcc，相关选项是`-I`，但许多 IDE 都有在项目设置中设置包含路径的方法。请查阅您的 IDE 手册。

# ios - presentViewController 重新加载 UITableview

> ID：15077962
> 
> 赞同：1
> 
> 时间：2013-02-25T22:43:57.527
> 
> 标签：ios, objective-c, cocoa-touch, uitableview, uiviewcontroller

我有一个包含 UITableView 的 UIViewController。UIViewController 中有一个按钮用于启动模式窗口（presentViewController）。

出于某种原因，每当我启动模式窗口时，UITableView 总是向上滚动到顶部。它可能正在调用 reloadData。

我一直在搞乱 ViewDidLoad、ViewWillLoad、ViewDidDisappear 和 ViewWillDisappear，以便在我们离开或回来时滚动到正确的位置。这些似乎都不起作用。

有没有人经历过这个？

感谢您的时间。

# openlaszlo - 如何在 OpenLaszlo 平台中向数据集节点添加新属性？

> ID：15077963
> 
> 赞同：1
> 
> 时间：2013-02-25T22:43:57.930
> 
> 标签：openlaszlo, lzx

如何将全新的属性添加到 OpenLaszlo XML 数据集中的节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:43:57.930

这样做的方法是使用 lz.datapointer.setNodeAttribute() 函数。如果使用 setNodeAttribute() 函数的属性名称尚未出现在节点上，则会创建一个新属性名称。

在下面的示例 OpenLaszlo 应用程序中，如果您在编译程序后按下标题为 [displayXML] 的按钮，您将看到在进行任何更改之前的 XML 数据集不包含任何“fav_saying”属性。

单击 [updateAttribute] 按钮通过 setNodeAttribute() 方法为 Homer 添加最喜欢的谚语后，您可以再次单击 [displayXML] 按钮，您将看到一个名为 'fav_saying' 的属性已添加到 XML 数据集中.

```
<canvas height="665" width="1000" layout="axis: x" debug="true"> 
```

<dataset name="myData">
  <myXML>
      <person firstname="Homer" lastname="Simpson" />
      <person firstname="Marge" lastname="Simpson" />
      <person firstname="Montgomery" lastname="Burns " />
  </myXML>
</dataset>

<button text="displayXML">

```
<handler name="onclick">
  Debug.write(canvas.myData.serialize());
</handler> 
```

</按钮>

<button text="updateAttribute">

```
<handler name="onclick">  

  var dp = canvas.myData.getPointer(); // get datapointer to XML data
  dp.setXPath('myXML/person[@firstname="Homer"]'); // set xpath to Homer Simpson

  dp.setNodeAttribute('fav_saying', 'DOH!');

</handler> 
```

</按钮>

</canvas>

您还将看到多次调用 setNodeAttribute() 不会添加额外的 'fav_saying' 属性。如果程序每次都使用不同的值作为说法，那么 'fav_saying' 属性中的值会改变，但仍然只有一个 'fav_saying' 属性。

# c# - 带有按时间戳字段过滤的 NHibernate 查询

> ID：15077966
> 
> 赞同：0
> 
> 时间：2013-02-25T22:44:06.280
> 
> 标签：c#, .net, sql, nhibernate

我有带有 Timestmap 类型的版本控制字段的表。现在我正在尝试通过此字段搜索进行查询，但是当我以下一种方式传递参数时：

```
query.SetParameter("TimeStamp", lastTick, NHibernateUtil.Timestamp); 
```

它将它作为 DateTime 传递给 sql 查询。还尝试了 NHibernateUtil.Binary，但 nhibernate 将其作为 varbinary 传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:48:15.077

NHibernate TimestampType 指定：

> 这几乎与 DateTime 的类型完全相同，只是它可以在版本列中使用，以数据库支持的精度存储它，并且如果值为 null，则默认为 DateTime.Now 的值。

此类型根本不适用于 MS SQL 类型 TIMESTAMP。事实上，该列类型已被弃用：

> 时间戳语法已弃用。此功能将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。
> 
> [行版本 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.100%29.aspx)

您应该使用`NHibernateUtil.Binary`或`NHibernateUtil.BinaryBlob`。

# c# - 手动打开上下文菜单时如何删除声音？

> ID：15077967
> 
> 赞同：1
> 
> 时间：2013-02-25T22:44:10.337
> 
> 标签：c#, winforms, contextmenu

当我手动显示上下文菜单（下面的代码）时 - 系统会播放“叮”的声音。但是，如果我单击键盘上的“上下文菜单”键 - 菜单弹出窗口没有任何声音。手动打开时如何消除声音？

```
void GridKeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.C && e.Control && e.Shift && !e.Alt)
    {
        e.Handled = true;
        popupMenu.Show(grid, new Point(grid.Width / 2, grid.Height / 2));
    }
} 
```

PS 我已经在安装了 .NET 4.5（使用 4.0）的 Win8 上对其进行了测试。

* * *

好的，看起来打开的弹出菜单接收到以下`KeyUp`事件，并播放错误快速访问键的声音。这可以通过在调用`Application.DoEvents()`之前调用来静音`popupMenu.Show()`。但我想知道是否有更好的方法。

# python - 如何使用元组访问深度嵌套的字典？

> ID：15077973
> 
> 赞同：5
> 
> 时间：2013-02-25T22:44:26.820
> 
> 标签：python, slice, autovivification

我想扩展[nosklo](https://stackoverflow.com/questions/651794/whats-the-best-way-to-initialize-a-dict-of-dicts-in-python) 先前答案中给出的[自动](https://stackoverflow.com/users/17160/nosklo)生存示例，以允许通过元组访问字典。

nosklo 的解决方案如下所示：

* * *

```
class AutoVivification(dict):
    """Implementation of perl's autovivification feature."""
    def __getitem__(self, item):
        try:
            return dict.__getitem__(self, item)
        except KeyError:
            value = self[item] = type(self)()
            return value 
```

测试：

```
a = AutoVivification()

a[1][2][3] = 4
a[1][3][3] = 5
a[1][2]['test'] = 6

print a 
```

输出：

```
{1: {2: {'test': 6, 3: 4}, 3: {3: 5}}} 
```

* * *

我有一个案例，我想在给定一些任意下标元组的情况下设置一个节点。如果我不知道元组有多少层，我该如何设计一种方法来设置适当的节点？

我在想也许我可以使用如下语法：

```
mytuple = (1,2,3)
a[mytuple] = 4 
```

但是我在想出一个可行的实现时遇到了麻烦。

* * *

# 更新

我有一个基于@JCash 回答的完整示例：

```
class NestedDict(dict):
    """                                                                       
    Nested dictionary of arbitrary depth with autovivification.               

    Allows data access via extended slice notation.                           
    """
    def __getitem__(self, keys):
        # Let's assume *keys* is a list or tuple.                             
        if not isinstance(keys, basestring):
            try:
                node = self
                for key in keys:
                    node = dict.__getitem__(node, key)
                return node
            except TypeError:
            # *keys* is not a list or tuple.                              
                pass
        try:
            return dict.__getitem__(self, keys)
        except KeyError:
            raise KeyError(keys)
    def __setitem__(self, keys, value):
        # Let's assume *keys* is a list or tuple.                             
        if not isinstance(keys, basestring):
            try:
                node = self
                for key in keys[:-1]:
                    try:
                        node = dict.__getitem__(node, key)
                    except KeyError:
                        node[key] = type(self)()
                        node = node[key]
                return dict.__setitem__(node, keys[-1], value)
            except TypeError:
                # *keys* is not a list or tuple.                              
                pass
        dict.__setitem__(self, keys, value) 
```

使用扩展切片表示法可以实现与上述相同的输出：

```
d = NestedDict()
d[1,2,3] = 4
d[1,3,3] = 5
d[1,2,'test'] = 6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:09:34.447

这似乎有效

```
def __setitem__(self, key, value):
    if isinstance(key, tuple):
        node = self
        for i in key[:-1]:
            try:
                node = dict.__getitem__(node, i)
            except KeyError:
                node = node[i] = type(self)()
        return dict.__setitem__(node, i, value)
    return dict.__setitem__(self, key, value) 
```

# unicode - 如何在 Rebol 3 字符串中使用高于 U+FFFF 的 Unicode 代码点，如 Rebol 2？

> ID：15077974
> 
> 赞同：5
> 
> 时间：2013-02-25T22:44:30.477
> 
> 标签：unicode, rebol, rebol3, astral-plane, rebol2

我知道在 Rebol 2 中，对于大于 ^(FF) 的代码点，您不能在字符串中使用插入符号样式转义，因为它对 Unicode 一无所知。所以这不会产生任何好处，它看起来很乱：

```
print {Q: What does a Zen master's {Cow} Say?  A: "^(03BC)"!} 
```

然而代码在 Rebol 3 中工作并打印出来：

```
Q: What does a Zen master's {Cow} Say?  A: "μ"! 
```

这很好，但是 R3 显然在 U+FFFF 处最大限度地发挥了它在字符串中保存字符的能力：

```
>> type? "^(FFFF)"
== string!

>> type? "^(010000)"
** Syntax error: invalid "string" -- {"^^(010000)"}
** Near: (line 1) type? "^(010000)" 
```

这种情况比 Rebol 2 在遇到它不知道的代码点时的随机行为要好得多。但是，如果您知道如何进行自己的 UTF-8 编码（或者通过从磁盘加载源代码来获取字符串），那么在 Rebol 中曾经有一种用于存储字符串的解决方法。您可以将它们从单个字符组装起来。

所以 U+010000 的 UTF-8 编码是#F0908080，你之前可以说：

```
workaround: rejoin [#"^(F0)" #"^(90)" #"^(80)" #"^(80)"] 
```

您会得到一个使用 UTF-8 编码的单个代码点的字符串，您可以将其以代码块的形式保存到磁盘并再次读回。R3中是否有类似的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T01:08:41.337

有一个使用字符串的解决方法！数据类型也是如此。在这种情况下，您不能使用 UTF-8，但可以使用 UTF-16 解决方法，如下所示：

```
utf-16: "^(d800)^(dc00)" 
```

，它使用 UTF-16 代理对对 ^(10000) 代码点进行编码。一般来说，以下函数可以进行编码：

```
utf-16: func [
    code [integer!]
    /local low high
] [
    case [
        code < 0 [do make error! "invalid code"]
        code < 65536 [append copy "" to char! code]
        code < 1114112 [
            code: code - 65536
            low: code and 1023
            high: code - low / 1024
            append append copy "" to char! high + 55296 to char! low + 56320
        ]
        'else [do make error! "invalid code"]
    ]
] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:44:30.477

是的，有一个技巧……这也是您应该在 R2 中使用的技巧。 *不要使用字符串！使用二进制！如果你必须做这种事情：*

> 好的解决方法：#{F0908080}

它可以在 Rebol2 中工作，在 Rebol3 中也可以工作。您可以保存并加载它而无需任何有趣的事情。

事实上，如果你完全关心 Unicode，永远......**如果你被困在 Rebol 2 而不是 3 中，请停止使用高于 ^(7F) 的代码点进行字符串处理**。我们将通过查看那个可怕的解决方法来了解原因：

> 糟糕的解决方法：重新加入 [#"^(F0)" #"^(90)" #"^(80)" #"^(80)"]

... *“你会得到一个带有单个 UTF-8 代码点的字符串”* ...

*您唯一*应该得到的是一个带有四个单独字符代码点的字符串，并且带有`4 = length? terrible-workaround`. Rebol2 坏了，因为字符串！基本上和二进制没什么区别！在引擎盖下。事实上，在 Rebol2 中，您可以在不复制的情况下来回为这两种类型命名，查找 AS-BINARY 和 AS-STRING。（这在 Rebol3 中是不可能的，因为它们本质上是不同的，所以不要附在这个特性上！）

看到这些字符串报告长度为 4 有点欺骗性，如果您转换它们，每个字符都会产生相同的值，这是一种错误的安慰`to integer!`。因为如果您曾经将它们写到某个文件或端口中，并且需要对其进行编码，那么您就会被咬。在 Rebol2 中注意这一点：

```
>> to integer! #"^(80)"
== 128

>> to binary! #"^(80)"
== #{80} 
```

但在 R3 中，当需要二进制转换时，您有一个 UTF-8 编码：

```
>> to integer! #"^(80)"
== 128

>> to binary! #"^(80)"
== #{C280} 
```

因此，当您看似正常工作的代码稍后执行不同的操作并最终以不同的方式序列化时，您会感到惊讶。实际上，如果您想知道 R2 在这方面有多“混乱”，请查看为什么您的“mu”有一个奇怪的符号。在 R2 中：

```
>> to binary! #"^(03BC)"
== #{BC} 
```

它只是把“03”扔掉了。：-/

因此，如果您出于某种原因需要使用 Unicode 字符串并且无法切换到 R3，请在牛示例中尝试这样的操作：

```
mu-utf8: #{03BC}
utf8: rejoin [#{} {Q: What does a Zen master's {Cow} Say?  A: "} mu-utf8 {"!}] 
```

这会给你一个二进制文件。仅将其转换为字符串以进行调试输出，并准备好看到乱码。但是，如果您被困在 Rebol2 中，这是正确的做法。

并重申答案：如果由于某种奇怪的原因需要在 Rebol3 中使用那些更高的代码点，这也是该怎么做：

```
utf8: rejoin [#{} {Q: What did the Mycenaean's {Cow} Say?  A: "} #{010000} {"!}] 
```

如果我知道[LINEAR B SYLLABLE B008 A](http://en.wikipedia.org/wiki/Linear_B)是什么，我相信这将是一个非常有趣的笑话。这让我很可能会说，如果您正在做*如此深奥*的事情，您可能只有几个代码点被引用作为示例。您可以将大部分数据保存为字符串，直到您需要方便地将它们插入，并将结果保存在二进制系列中。

* * *

**更新：**如果遇到这个问题，这里有一个实用程序函数，可用于临时解决它：

```
safe-r2-char: charset [#"^(00)" - #"^(7F)"]
unsafe-r2-char: charset [#"^(80)" - #"^(FF)"]
hex-digit: charset [#"0" - #"9" #"A" - #"F" #"a" - #"f"]

r2-string-to-binary: func [
    str [string!] /string /unescape /unsafe
    /local result s e escape-rule unsafe-rule safe-rule rule
] [
    result: copy either string [{}] [#{}]
    escape-rule: [
        "^^(" s: 2 hex-digit e: ")" (
            append result debase/base copy/part s e 16
        )
    ]
    unsafe-rule: [
        s: unsafe-r2-char (
            append result to integer! first s
        )
    ]
    safe-rule: [
        s: safe-r2-char (append result first s)
    ]
    rule: compose/deep [
        any [
            (either unescape [[escape-rule |]] [])
            safe-rule
            (either unsafe [[| unsafe-rule]] [])
        ]
    ]
    unless parse/all str rule [
        print "Unsafe codepoints found in string! by r2-string-to-binary"
        print "See http://stackoverflow.com/questions/15077974/"
        print mold str
        throw "Bad codepoint found by r2-string-to-binary"
    ]
    result
] 
```

如果您使用它而不是`to binary!`转换，您将在 Rebol2 和 Rebol3 中获得一致的行为。（它有效地实现了`terrible-workaround`样式字符串的解决方案。）

# centos - 在centos 6中创建子域

> ID：15077975
> 
> 赞同：2
> 
> 时间：2013-02-25T22:44:31.147
> 
> 标签：centos, virtualhost, subdomain, centos6

我正在尝试在我的虚拟服务器中创建一个子域（它是一个 centOS）。我已经像这样编辑了 httpd.conf 文件：

名称虚拟主机 *:80

```
<VirtualHost *:80>
  DocumentRoot /var/www/html/zend/
  <Directory "/var/www/html/zend"> 
    Options Indexes FollowSymLinks 
    AllowOverride All 
    Order allow,deny 
    Allow from all 
  </Directory> 
  ServerName zend.mydomain.es
</VirtualHost> 
```

当我尝试 www.mydomain.es 时，它工作正常，但是当我尝试 zend.mydomain.es 时，我得到 Server Not Found 错误。我必须配置其他文件才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T03:26:29.013

您还应该为您的子域设置 dns 并确保子域指向正确的 ip

如果它正在回复，还要检查 ping：

> ping zend.mydomain.es

如果 IP 正确，请检查两个 Apache 日志（error.log 和 access.log）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T19:18:28.103

1.  我建议您验证子域的 DNS 设置。例如，如果您使用 GoDaddy 进行托管，我建议您确保那里有您的子域的条目，并且 IP 指向同一个框。
2.  接下来，如果您还没有，在对 httpd.conf 进行更改后，您需要重新启动 httpd 服务以使更改生效。所以试试`service httpd restart`

希望其中之一有助于解决您的问题。

# android - Android 应用程序崩溃，因为片段变为空

> ID：15077978
> 
> 赞同：0
> 
> 时间：2013-02-25T22:44:40.113
> 
> 标签：android, crash

我正在制作一个应用程序，每当我等待很长时间才能使用该应用程序，因为它一直在后台运行，或者使用任务杀手（我实际上并没有使用任务杀手，它们只是方便地提出错误否则很难复制）然后当我按下我的应用程序上的按钮时，它崩溃了，我通过 logcat 发现这是因为 tempmainfrag 在以下代码中返回为 null 在 saveButtonClicked 和 deleteButtonClicked 方法中使用时：

```
public class MainActivity extends FragmentActivity 
        implements MainListFragment.OnListSelectedListener {

    MainListFragment tempmainfrag;
    InfoFragment infofrag;
    int mainPosition = -1;
    MenuItem menuItemAdd;   //plus button in ActionBar/options menu
    boolean menucreated = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainlayout);

        // Check whether the activity is using the layout version with
        // the fragment_container FrameLayout. If so, we must add the first fragment
        if (findViewById(R.id.fragment_container) != null) { //meaning, if using phone version

            // However, if we're being restored from a previous state,
            // then we don't need to do anything and should return or else
            // we could end up with overlapping fragments.
            if (savedInstanceState != null) {
                return;
            }

            // Create an instance of MainListFragment
            tempmainfrag = new MainListFragment();  //made a context parameter to pass the context

            // In case this activity was started with special instructions from an Intent,
            // pass the Intent's extras to the fragment as arguments
            tempmainfrag.setArguments(getIntent().getExtras());

            // Add the fragment to the 'fragment_container' FrameLayout
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.fragment_container, tempmainfrag).commit();

            Log.i("mydebug","TEMPMAINFRAG: " + tempmainfrag);
        }
    }

    @Override
    public void onResume()
    {       
        super.onResume();
    }

    @Override
    public void onStart()
    {

        Log.i("mydebug","1");
        if(menuItemAdd != null)     
            menuItemAdd.setVisible(true);   //turns on menu item 'add'

        super.onStart();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        menuItemAdd = menu.findItem(R.id.menu_add);
        menucreated = true;

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_add:     //NEED TO IMPLEMENT: MAKES ICON PRESS FOR BACK GO BACK
                // Create fragment
                infofrag = new InfoFragment(menuItemAdd);
                Bundle args = new Bundle();
                args.putBoolean(infofrag.ARG_NEW, true);

                infofrag.setArguments(args);

                FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

                // Replace whatever is in the fragment_container view with this fragment,
                // and add the transaction to the back stack so the user can navigate back
                transaction.replace(R.id.fragment_container, infofrag);
                transaction.addToBackStack(null);

                // Commit the transaction
                transaction.commit();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    public void onItemSelected(int position, String schedulename, String[] ampm, boolean[] days, int[] times, boolean vibrate) {
        // The user selected a list item

        //////////////////////////////TWO PANE LAYOUT STUFF///////////////////////////////////
        // Capture the article fragment from the activity layout
//        InfoFragment articleFrag = (InfoFragment)
//                getSupportFragmentManager().findFragmentById(R.id.article_fragment);  //article_fragment exists in layout-large
//
//        if (articleFrag != null) {
//            // If article frag is available, we're in two-pane layout...
//
//            // Call a method in the ArticleFragment to update its content
//            articleFrag.updateArticleView(position);
//
//        } else {
            // phone layout - swap frags

            mainPosition = position;

            // Create fragment and give it an argument for the selected article
            infofrag = new InfoFragment(menuItemAdd);
            Bundle args = new Bundle();
            args.putInt(infofrag.ARG_POSITION, position);

            //new stuff to add info
            args.putString(infofrag.ARG_NAME, schedulename);    
            args.putBooleanArray(infofrag.ARG_DAYS, days);
            args.putIntArray(infofrag.ARG_TIMES, times);
            args.putBoolean(infofrag.ARG_VIBRATE, vibrate); 
            args.putStringArray(infofrag.ARG_AMPM, ampm);
            args.putBoolean(infofrag.ARG_NEW, false);

            infofrag.setArguments(args);
            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

            // Replace whatever is in the fragment_container view with this fragment,
            // and add the transaction to the back stack so the user can navigate back
            transaction.replace(R.id.fragment_container, infofrag);
            transaction.addToBackStack(null);

            // Commit the transaction
            transaction.commit();

    }

    public void saveButtonClicked(View view) {  //pass the click to the mainlistfragment
//      MainListFragment tempmainfrag2 = (MainListFragment)getSupportFragmentManager().
//                findFragmentById(R.id.fragment_container);

        Log.i("mydebug","TEMPMAINFRAG: " + tempmainfrag);
        if(!infofrag.newsched)  //if existing schedule, so save
        {
            Log.i("mydebug","Saving schedule...");
            boolean redo = false;       //is set true every time info isnt correct when trying to save schedule
            //create toast
            Toast toast;

            //get title
            EditText titletext = (EditText)this.findViewById(R.id.titletext);

            //get checkboxes
            CheckBox check1 = (CheckBox)this.findViewById(R.id.monbox); //recreate checkboxes from view in activity (doesnt extend Activity 
            CheckBox check2 = (CheckBox)this.findViewById(R.id.tuebox); //so use getActivity())
            CheckBox check3 = (CheckBox)this.findViewById(R.id.wedbox);
            CheckBox check4 = (CheckBox)this.findViewById(R.id.thubox);
            CheckBox check5 = (CheckBox)this.findViewById(R.id.fribox);
            CheckBox check6 = (CheckBox)this.findViewById(R.id.satbox);
            CheckBox check7 = (CheckBox)this.findViewById(R.id.sunbox);
            CheckBox vibratebox = (CheckBox)this.findViewById(R.id.vibratecheckbox);

            //get times
            TimePicker startpicker = (TimePicker)this.findViewById(R.id.starttimepicker);
            TimePicker stoppicker = (TimePicker)this.findViewById(R.id.stoptimepicker);

            //check for input errors
            if(titletext.getText().toString().length() == 0) //if title is empty
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "Enter an event name", 4);
                toast.show();

                //some sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_big);
                this.findViewById(R.id.titletext).startAnimation(shake);
            }
            else if((!check1.isChecked()) && (!check2.isChecked()) && (!check3.isChecked()) && 
                    (!check4.isChecked()) && (!check5.isChecked()) && (!check6.isChecked()) && 
                    (!check7.isChecked()))  //if all checkboxes arent checked
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "At least one day of week must be checked", 4);
                toast.show();

                //more sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_small);
                this.findViewById(R.id.checkboxes).startAnimation(shake);
                this.findViewById(R.id.daysofweek).startAnimation(shake);
                this.findViewById(R.id.frequencytext).startAnimation(shake);
            }

            if(!redo)   //if all info is fine
            {
                //check to see if time goes into next day
                if((startpicker.getCurrentHour() > stoppicker.getCurrentHour())||
                        ((startpicker.getCurrentHour() == stoppicker.getCurrentHour())
                                && (startpicker.getCurrentMinute() >= stoppicker.getCurrentMinute())))
                {
                    toast = Toast.makeText(view.getContext(), "Note: Stop time is earlier than start time, so this schedule stops at next day", Toast.LENGTH_LONG);
                    toast.show();
                }

                toast = Toast.makeText(view.getContext(), "Schedule saved", Toast.LENGTH_LONG);
                toast.show();

                //changing old schedule to new one
                boolean[] tempdays = {check1.isChecked(), check2.isChecked(), check3.isChecked(), check4.isChecked(), 
                        check5.isChecked(), check6.isChecked(), check7.isChecked()};

                Log.i("mydebug","Time info read from counters: Start hour: " + startpicker.getCurrentHour() + "\nStop hour: " + stoppicker.getCurrentHour());

                tempmainfrag.mainObjectList.changeSchedule(mainPosition, titletext.getText().toString(), tempdays, vibratebox.isChecked(), 
                        startpicker.getCurrentHour(), startpicker.getCurrentMinute(), stoppicker.getCurrentHour(), stoppicker.getCurrentMinute());

                //used to hide keyboard in case its still open when displaying list
                InputMethodManager imm = (InputMethodManager)this.getSystemService(
                          Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(titletext.getWindowToken(), 0);

                this.onBackPressed();   //replicates backpress to go back to list
            }
        }
        else        //if new schedule needs to be created
        {
            Log.i("mydebug","Creating new schedule...");
            boolean redo = false;
            //create toast
            Toast toast;

            //get title
            EditText titletext = (EditText)this.findViewById(R.id.titletext);

            //get checkboxes
            CheckBox check1 = (CheckBox)this.findViewById(R.id.monbox); //recreate checkboxes from view in activity (doesnt extend Activity 
            CheckBox check2 = (CheckBox)this.findViewById(R.id.tuebox); //so use getActivity())
            CheckBox check3 = (CheckBox)this.findViewById(R.id.wedbox);
            CheckBox check4 = (CheckBox)this.findViewById(R.id.thubox);
            CheckBox check5 = (CheckBox)this.findViewById(R.id.fribox);
            CheckBox check6 = (CheckBox)this.findViewById(R.id.satbox);
            CheckBox check7 = (CheckBox)this.findViewById(R.id.sunbox);
            CheckBox vibratebox = (CheckBox)this.findViewById(R.id.vibratecheckbox);

            //get times
            TimePicker startpicker = (TimePicker)this.findViewById(R.id.starttimepicker);
            TimePicker stoppicker = (TimePicker)this.findViewById(R.id.stoptimepicker);

            EditText temppp = titletext;
            //check for input errors
            if(titletext.getText().toString().length() == 0) //if title is empty
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "Enter an event name", 4);
                toast.show();

                //some sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_big);
                this.findViewById(R.id.titletext).startAnimation(shake);
            }
            else if((!check1.isChecked()) && (!check2.isChecked()) && (!check3.isChecked()) && 
                    (!check4.isChecked()) && (!check5.isChecked()) && (!check6.isChecked()) && 
                    (!check7.isChecked()))  //if all checkboxes arent checked
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "At least one day of week must be checked", 4);
                toast.show();

                //more sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_small);
                this.findViewById(R.id.checkboxes).startAnimation(shake);
                this.findViewById(R.id.daysofweek).startAnimation(shake);
                this.findViewById(R.id.frequencytext).startAnimation(shake);
            }

            if(!redo)   //if all info is fine
            {
                //check to see if time goes into next day
                if((startpicker.getCurrentHour() > stoppicker.getCurrentHour())||
                        ((startpicker.getCurrentHour() == stoppicker.getCurrentHour())
                                && (startpicker.getCurrentMinute() >= stoppicker.getCurrentMinute())))
                {
                    toast = Toast.makeText(view.getContext(), "Note: Stop time is earlier than start time, so this schedule stops at next day", Toast.LENGTH_LONG);
                    toast.show();
                }

                toast = Toast.makeText(view.getContext(), "Schedule created", Toast.LENGTH_LONG);
                toast.show();

                //changing old schedule to new one
                boolean[] tempdays = {check1.isChecked(), check2.isChecked(), check3.isChecked(), check4.isChecked(), 
                        check5.isChecked(), check6.isChecked(), check7.isChecked()};

                Log.i("mydebug","Time info read from counters: Start hour: " + startpicker.getCurrentHour() + "\nStop hour: " + stoppicker.getCurrentHour());

                tempmainfrag.mainObjectList.addSchedule(titletext.getText().toString(), tempdays, vibratebox.isChecked(), 
                        startpicker.getCurrentHour(), startpicker.getCurrentMinute(), stoppicker.getCurrentHour(), stoppicker.getCurrentMinute());

                //used to hide keyboard in case its still open when displaying list
                InputMethodManager imm = (InputMethodManager)this.getSystemService(
                          Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(titletext.getWindowToken(), 0);

                this.onBackPressed();   //replicates backpress to go back to list
            }
        }
    }

    public void deleteButtonClicked(View view)
    {
        //tempmainfrag = (MainListFragment)getSupportFragmentManager().
                //findFragmentById(R.id.fragment_container);

        if(!infofrag.newsched)  //if existing schedule, so ask to delete
        {
            //make a notification

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Delete?");
            builder.setIcon(R.drawable.trash_icon);
            builder.setMessage("Are you sure you wish to delete this schedule?")
               .setCancelable(false)
               .setPositiveButton("Delete", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       tempmainfrag.mainObjectList.removeSchedule(mainPosition);

                       Toast toast;
                       toast = Toast.makeText(tempmainfrag.getActivity(), "Schedule deleted", 4);
                        toast.show();

                       tempmainfrag.exit();
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        dialog.dismiss();
                   }
               });
            AlertDialog alert = builder.create();
            alert.show();
        }
        else    //if new schedule, so just cancel
            tempmainfrag.exit();
    }

    public void hideKeyboard()  //hides keyboard, called whenever reverting back to list
    {
        InputMethodManager imm = (InputMethodManager)getSystemService(
                  Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), 0);
    }
} 
```

我意识到这是因为在 onCreate 中，saveinstancestate 不为空，所以没有创建新片段，那么有什么更好的方法来做到这一点呢？我尝试使用

```
MainListFrag tempmainfrag = (MainListFragment)getSupportFragmentManager().
                findFragmentById(R.id.fragment_container); 
```

但这也给了我错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:03:56.737

将片段事务方法更改为替换而不是添加。这样就不会创建多个重叠片段，只会替换现有片段。

```
 // Add the fragment to the 'fragment_container' FrameLayout
        getSupportFragmentManager().beginTransaction()
                .**replace**(R.id.fragment_container, tempmainfrag).commit(); 
```

# javascript - jquery删除'select option'元素值，第二个选项值除外

> ID：15077979
> 
> 赞同：7
> 
> 时间：2013-02-25T22:44:43.590
> 
> 标签：javascript, jquery

如何删除`select option`除第二个值之外的每个元素的`option`值：

```
<select name="_users_id_requester" onchange="submit()">
  <option value="0">-----</option>
  <option selected="" value="774">Asmaa El Habib,Yassine</option>//except this one 
  <option value="779" title="Ahlam Edouiri - U8K8O">Ahlam Edouiri</option>
  <option value="746" title="Ainane Mohamed - MohamedAinane">Ainane Mohamed</option>
</select> 
```

我尝试过这样的事情，但我不知道如何结束它：

```
$("select[name='_users_id_requester']").each(function(){
  if ( $(this).index() > ..... )
    $(this).attr("value", " ");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:47:58.880

你可以去喜欢

```
$("select[name='_users_id_requester'] option").not(":eq(1)").val(''); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:48:09.153

```
$("select[name='_users_id_requester'] option").not(":eq(1)").prop('value', ''); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T22:48:18.417

您可以使用一些选择器来精确选择做您想做[`:nth-child`](http://api.jquery.com/nth-child-selector/)的[`:not`](http://api.jquery.com/not-selector/)事情。

```
$("select[name='_users_id_requester']").find('option:not(:nth-child(2))').each(function(){
    $(this).attr("value", "");
}); 
```

`:nth-child`选择一个精确的孩子并做`:not`一个排序数组减法。它减去与整个数组不匹配的所有匹配项。

这是一个有效的[JsFiddle](http://jsfiddle.net/XGCxf/)。只需使用 Chrome 或 Firebug 查看 HTML

# c# - 依赖于模拟属性的属性

> ID：15077980
> 
> 赞同：1
> 
> 时间：2013-02-25T22:44:44.533
> 
> 标签：c#, unit-testing, moq

我如何模拟和设置一个属性，就像基于该属性的任何其他成员不需要设置一样。

```
public interface IFoo{
    public Foo  { get; set; }
    public Foo2 { get; }
}

public class Foo :IFoo{
    public Foo  { get; set; }
    public Foo2 { get {return this.Foo +" second";} }
}

public void FooTest(){
    var f = Mock<IFoo>();
    f.SetupGet(x=> x.Foo).Returns("Foo");

    // Should print 'Foo second' although there's no setup for Foo2
    Console.Write(f.Object.Foo2); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:56:24.987

在您的示例中，您正在创建 IFoo 接口的模拟，因此没有 Foo2 属性的实现。在这种情况下，Foo 对象的实现是无关紧要的，因为您永远不会实例化 Foo 对象。f 是 IFoo 的模拟，因此与对象 Foo 没有任何关系，只是它们都实现了相同的接口。你有没有尝试过这样的事情？

```
var f = Mock<IFoo>();
f.SetupGet(x => x.Foo).Returns("Foo");
f.SetupGet(x => x.Foo2).Returns(f.Foo + "Second"); 
```

但是，我不确定您要完成什么，所以我猜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:33:49.623

`Foo`在您的问题中，类内部的属性与其所属的类`Foo`具有相同的名称，这令人困惑（并且在 C# 中是非法的） 。此外，您还缺少属性的类型（大概是`string`）。所以请拿出一些可以编译的代码。

完成此操作后，我认为您`Mock<>`仅指的是 interface `IFoo`。可能有许多类和结构实现`IFoo`. Moq 怎么会知道你在考虑两个属性的 getter 之间存在联系的*类？* `Foo`

`IFoo`不能指定两个属性之间的任何必需关系；它是一个界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T22:50:55.027

不完全确定你为什么要这样做，但我的第一个想法是使用反射循环遍历类的成员并设置每个成员，但不确定为什么有人会这样做。我猜你是想节省时间？

虽然不完全适用，但您可以根据自己的需要进行调整，因为它是相关的：

[为测试用例生成模拟对象](http://msmvps.com/blogs/shahed/archive/2008/08/06/reflection-tips-generate-mock-objects-for-test-cases.aspx)

# ios - 使用 AFIncrementalStore 和 NSFetchedResultsController 的死锁

> ID：15077982
> 
> 赞同：2
> 
> 时间：2013-02-25T22:44:51.553
> 
> 标签：ios, multithreading, core-data, deadlock, afincrementalstore

几天来，我一直在为此苦苦挣扎，我一生都无法弄清楚发生了什么。我对 Core Data 很熟悉，但我知道它足以避免死锁情况。然而，对于这个项目，我决定尝试合并 AFIncrementalStore。我构建了一个示例项目来测试 APIClient 以便适当地映射键/值而不会弄乱我的实际项目。它完美无缺。

现在我在我的实际项目中使用它并且事情很挑剔。NSFetchedResultsController 用于被推离屏幕的 UITableViewController（类似于 Facebook 应用程序的滑动菜单）。大约 50% 的时间我不会陷入僵局。我已确保 NSFetchedResultsController managedObjectContext 与我的 AppDelegate 相同。几乎所有的设置都与 AFIncrementalStore 示例相同。甚至我用来测试用法的示例项目也能完美运行。

这是我在死锁期间暂停时调试导航器的图像。看起来问题出在 AFIncrementalStore 的背景上下文和主线程的上下文之间。但是我不确定该怎么做，因为我没有编写 AFIncrementalStore 并且我只是离开了现有的文档/示例。

![调试导航器](../Images/97ffe57bed72fdb84b2843b218e6ff1e.png)

编辑：添加第二个线程的回溯

```
thread #2: tid = 0x2103, 0x925d180e libsystem_kernel.dylib`semaphore_wait_trap + 10
frame #0: 0x925d180e libsystem_kernel.dylib`semaphore_wait_trap + 10
frame #1: 0x0258cf08 libdispatch.dylib`_dispatch_thread_semaphore_wait + 16
frame #2: 0x0258ab3a libdispatch.dylib`_dispatch_barrier_sync_f_slow + 149
frame #3: 0x0258aa5c libdispatch.dylib`dispatch_barrier_sync_f + 37
frame #4: 0x00b64c8b CoreData`_perform + 187
frame #5: 0x00b67659 CoreData`-[NSManagedObjectContext(_NestedContextSupport) managedObjectContextDidUnregisterObjectsWithIDs:] + 73
frame #6: 0x00bdf2db CoreData`__97-[NSManagedObjectContext(_NestedContextSupport) managedObjectContextDidUnregisterObjectsWithIDs:]_block_invoke_0 + 75
frame #7: 0x00b64cc1 CoreData`internalBlockToNSManagedObjectContextPerform + 17
frame #8: 0x0259b014 libdispatch.dylib`_dispatch_client_callout + 14
frame #9: 0x0258ad5f libdispatch.dylib`_dispatch_barrier_sync_f_invoke + 58
frame #10: 0x0258aaa3 libdispatch.dylib`dispatch_barrier_sync_f + 108
frame #11: 0x00b64c8b CoreData`_perform + 187
frame #12: 0x00b67659 CoreData`-[NSManagedObjectContext(_NestedContextSupport) managedObjectContextDidUnregisterObjectsWithIDs:] + 73
frame #13: 0x00b71c8c CoreData`-[NSManagedObjectContext(_NSInternalAdditions) _disposeObjects:count:notifyParent:] + 444
frame #14: 0x00b71305 CoreData`-[NSManagedObjectContext(_NSInternalAdditions) _dispose:] + 597
frame #15: 0x00b70e15 CoreData`-[NSManagedObjectContext _dealloc__] + 325
frame #16: 0x00bd872f CoreData`internalBlockToDeallocNSManagedObjectContext + 79
frame #17: 0x0259b014 libdispatch.dylib`_dispatch_client_callout + 14
frame #18: 0x0258b418 libdispatch.dylib`_dispatch_queue_drain + 239
frame #19: 0x0258b2a6 libdispatch.dylib`_dispatch_queue_invoke + 59
frame #20: 0x0258c280 libdispatch.dylib`_dispatch_root_queue_drain + 231
frame #21: 0x0258c450 libdispatch.dylib`_dispatch_worker_thread2 + 39
frame #22: 0x971cde12 libsystem_c.dylib`_pthread_wqthread + 441 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:55:58.087

此问题并非特定于使用 AFIncrementalStore。我们在使用嵌套上下文和 NSFetched 结果控制器时遇到了同样的事情。

Child 和 Sibling 上下文不需要使用相同的并发类型，也不需要使用相同的线程。但是，您获取的结果控制器必须在其托管对象上下文使用的同一线程上使用，调试导航器中的线程 2 NSManagedObjectContext Queue 让我认为这可能是一个线程问题。

如果这是您的主要上下文，有时这就像像这样包装您的 fetth 一样简单

```
dispatch_async(dispatch_get_main_queue(), ^{ [resultsController performFetch:nil]; }); 
```

或者对于真正的偏执狂

```
[_resultsController.managedObjectContext performBlock:^{
    [_resultsController performFetch:nil];
}]; 
```

这些死锁有很多东西，[在这里](https://stackoverflow.com/questions/10908592/configure-nsfetchedresultscontroller-in-background-when-launching-core-data-app)和[这里](https://stackoverflow.com/questions/11786436/core-data-nested-managed-object-contexts-and-frequent-deadlocks-freezes)尝试堆栈溢出帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:30:12.477

无论如何，我都不是 CoreData 专家，所以对此持保留态度。

看起来，您可能正在使用 NSPrivateQueueConcurrencyType。似乎 AFIncrementalStore 正在使用主队列进行同步。这在你的控制之下吗？

您可以尝试将 NSManagedObjectContext 切换到 NSMainQueueConcurrencyType 看看是否有帮助？

现在，如果我是对的并且您使用的是 NSPrivateQueueConcurrencyType，那么您可能是出于性能原因而这样做的。所以，这可能不是一个很好的长期解决方案......

# python - Mayavi“字体大小”文本属性是否有效？

> ID：15077984
> 
> 赞同：6
> 
> 时间：2013-02-25T22:44:56.487
> 
> 标签：python, text, fonts, mayavi, mayavi.mlab

Mayavi 字体渲染中是否存在阻止更改字体大小的错误？我正在使用 Mayavi2 GUI 来更改体积图上轴标签的字体大小。

到那里我去：场景->标量场->颜色和图例->轴->标签文本（标签）->字体大小

更改此数字不会影响图像中字体的大小。这是一个已知的错误？我在谷歌上没有看到它的引用。你如何改变你的 mayavi 人物的文字大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T15:25:05.443

我刚刚下载并安装了它，我似乎遇到了同样的问题。现在在 Windows 8 上。这可能是一个错误。

# entity-framework - 将 Code First 和 Database First 实体框架与 Devart 一起使用

> ID：15077985
> 
> 赞同：0
> 
> 时间：2013-02-25T22:44:56.983
> 
> 标签：entity-framework, ef-code-first, devart, ef-database-first

我有一个使用 EF 4.4（EF 5.0 的 .NET 4.0 版本）的网站，它针对现有数据库使用 Code First。我使用 Devart oracle 数据提供程序，由于模型类型的大小写问题，它需要一种解决方法。

它使 Devart 提供程序识别小写数据类型来解释架构。（或类似的规定）

这可以正常工作，直到该网站内的控件（基于 EF 4.1 Database First（也针对现有数据库）构建）尝试加载。Devart 提供程序似乎在网站上共享，它导致提供程序无法（正确）识别所有大写的数据类型的错误，因为以前的解决方法使其在 Code First 中工作。

是否有解决方法，或者我必须将 Database First 方法转换为 Code First？

编辑：这是相关的解决方法代码。我似乎丢失了从中获得它的论坛帖子。我相信它在 Devart 论坛上：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        var config = Devart.Data.Oracle.Entity.Configuration.OracleEntityProviderConfig.Instance;
        config.Workarounds.ColumnTypeCasingConventionCompatibility = true;

        ... initialization code here ...

        base.OnModelCreating(modelBuilder);
    } 
```

相关的错误是这样的：

```
System.Data.MetadataException: Schema specified is not valid. Errors:
Model.ssdl(205,6) : error 0040: The Type CHAR is not qualified with a namespace or alias. Only primitive types can be used without qualification. 
Model.ssdl(206,6) : error 0040: The Type VARCHAR2 is not qualified with a namespace or alias. Only primitive types can be used without qualification. 
```

还有很多，但它们都是相同的错误，具有不同的行和数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:55:21.287

> Devart 提供程序似乎在网站之间共享

[设置ColumnTypeCasingConventionCompatibility](http://www.devart.com/dotconnect/oracle/docs/?CodeFirstOptions.html)选项后，它决定了当前应用程序域（网站）的行为。进程（Web 服务器）可以运行多个具有不同 ColumnTypeCasingConventionCompatibility 值的应用程序域。

[特定应用程序域的ColumnTypeCasingConventionCompatibility](http://www.devart.com/dotconnect/oracle/docs/?CodeFirstOptions.html)的值取决于用于网站模型的 DbContext 模板的 Fluent Mapping 属性。Fluent Mapping=true 必须与 ColumnTypeCasingConventionCompatibility=true 一起使用，反之亦然：Fluent Mapping=false 必须与 ColumnTypeCasingConventionCompatibility=false 一起使用。

您可以通过以下替代方式为网站设置 ColumnTypeCasingConventionCompatibility：

a) 在第一次使用上下文之前的代码中（例如，在上下文的静态构造函数中或在程序的 Main 方法中等）

b) 在 *.config 中。例如：

```
<configuration>
  <configSections>
    <section name="Devart.Data.Oracle.Entity"
    type="Devart.Data.Oracle.Entity.Configuration.OracleEntityProviderConfigurationSection, 
  Devart.Data.Oracle.Entity, Version=7.5.179.0, Culture=neutral, 
  PublicKeyToken=09af7300eec23701" />
   </configSections>
  <Devart.Data.Oracle.Entity xmlns="http://devart.com/schemas/Devart.Data.Oracle.Entity/1.0">
    <CodeFirstOptions ColumnTypeCasingConventionCompatibility="true"/>
  </Devart.Data.Oracle.Entity> 
</configuration> 
```

# javascript - 在 JavaScript 中动态添加 EventListener

> ID：15077988
> 
> 赞同：1
> 
> 时间：2013-02-25T22:44:59.387
> 
> 标签：javascript, html, dom-events, addeventlistener, event-listener

我正在使用 XML 文件填充表，我有一列链接到更多详细信息。由于我运行网页的方式（Chrome 扩展），我需要在填充表格时动态添加事件处理程序。

我有这个工作...

```
document.addEventListener('DOMContentLoaded', function () {
document.getElementById("detailLink").addEventListener('click',
    clickHandlerDetailLink); });

function clickHandlerDetailLink(e) {   detailLinkPress('SHOW'); }

function detailLinkPress(str) {
alert("Message that will show more detail");
} 
```

但是我该如何动态添加事件处理程序呢？我已为该列中的所有字段分配了 detailLink 的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:50:53.760

您可能需要侦听表的突变事件，然后每次检查触发事件的目标元素。以前它曾经是这些事件“DOMNodeInserted”或“DOMSubtreeModified”，但它们非常慢，因此根据新规范，侦听器称为**MutationObserver**（比以前的要快得多）。这是为我的测试编辑的一些 Mozilla 网页的示例：

```
var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    alert(mutation.target.id + ", " + mutation.type + 
    (mutation.addedNodes ? ", added nodes(" + mutation.addedNodes.length + "): " + printNodeList(mutation.addedNodes) : "") + 
    (mutation.removedNodes ? ", removed nodes(" + mutation.removedNodes.length + "): " + printNodeList(mutation.removedNodes) : ""));
  });   
});

// configuration of the observer:
var config = { attributes: false, childList: true, characterData: false };

var element = document.getElementById('TestID');

// pass in the target node, as well as the observer options
observer.observe(element, config); 

function printNodeList(nodelist)
{
    if(!nodelist)
        return "";
    var i = 0;
    var str = "";
    for(; i < nodelist.length; ++i)
        str += nodelist[i].textContent + ",";

    return str;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:39:34.493

如果要将事件分配给尚不存在的元素或一系列元素（无需为每个元素创建一个），则需要委托。委托只是一个父元素，它将侦听事件而不是所有子元素。当它处理事件时，您检查引发事件的元素是否是您要查找的元素。

如果父级`<table>`总是退出，那将是添加侦听器的好地方。您也可以将其添加到`body`. 此外，您不应将`detailLink`其`id`用作多个元素。改为使用`class`。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/g66CR/)]]]

### 脚本：

```
document.body.addEventListener( 'click', function ( event ) {
    if( event.srcElement.className == 'detailLink' ) {
        detailLinkPress( 'SHOW' );
    };
} );

function detailLinkPress( str ) {
    alert("Message that will show more detail");
}; 
```

### HTML：

```
<div class="detailLink">click me</div> 
```

# php - Codeigniter 从数组中选择

> ID：15077995
> 
> 赞同：0
> 
> 时间：2013-02-25T22:45:32.120
> 
> 标签：php, arrays, codeigniter

这对某人来说很简单，我已经查过了，但不明白为什么我的语法返回空白。

```
$this ->adminship_model->get_admininfo(); 
```

返回一个数组；

```
'username' => $this->adminship_model->get_admininfo(), 
```

放入会话存储一个数组，当我 print_r 时，我可以看到数据数组。

```
[UserName] => SomeUserName 
```

是否在数组中

```
$variable = $this ->adminship_model->get_admininfo(); 
```

将数组设置为该变量

```
'username' => $this->$varaible->UserName, 
```

返回空白

```
'username' => $this->$variable['UserName'], 
```

返回空白

```
'username' => $variable['UserName'], 
```

返回空白

请问我做错了什么。对不起，如果它很简单，我只需要告诉一次。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:56:25.413

我对你的语法有点困惑，但看起来你应该有

```
$variable = $this->adminship_model->get_admininfo(); // space removed
$user_name = $variable['UserName'];
echo $user_name; 
```

那应该回响`SomeUserName`

# xcode4 - 无法在界面生成器中拖动滚动视图对象

> ID：15077998
> 
> 赞同：0
> 
> 时间：2013-02-25T22:45:52.117
> 
> 标签：xcode4, uiviewcontroller, uiscrollview, interface-builder

我正在使用 XCode 4.6 和界面生成器。我在界面生成器中有一个 UIViewController，在 UIViewController 的顶部有一个 UIScrollView。滚动视图完全跨越视图控制器（实际上，它比视图控制器高，它的高度低于视图控制器的底部）。这已经工作了一段时间，但我遇到了一个问题。不知何故，我不能再抓住滚动视图来拖动它并重新定位它。我在 IB 中或大纲内单击滚动视图，但不会出现“手”图标以启用滚动视图的移动和重新定位。想法？

我真的不想在滚动视图中重新创建所有详细视图。也许这就是为什么有些人对IB持消极态度的原因？因为愚蠢的问题而失去工作，这些问题会让你死去。

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:16:39.820

我想我现在已经解决了这个问题。我相信应该有三层：（从上到下；从上到下）滚动视图、视图（*）和视图控制器。不知何故，我失去了中间 (* ) 的视图，这并没有让我调整滚动视图的大小。

# matlab - 在matlab中沿第三轴多次复制二维矩阵

> ID：15077999
> 
> 赞同：2
> 
> 时间：2013-02-25T22:45:52.113
> 
> 标签：matlab

我希望在 matlab 中沿第三轴复制一个 784x784 矩阵。以下代码似乎有效：

```
mat = reshape(repmat(mat, 1,10000),784,784,10000); 
```

不幸的是，它需要很长时间才能运行它毫无价值（将 10,000 更改为 1000 会花费几分钟，而使用 10,000 会使我的整个机器几乎冻结）。有没有更快的方法来做到这一点？

作为参考，我希望在每个长度为 784 的 10,000 个向量上使用 mvnpdf，每个向量使用相同的协方差矩阵。所以我最后的电话看起来像

```
mvnpdf(X,mu,mat)  

%size(X) = (10000,784), size(mu) = (10000,784), size(mat) = 784,784,10000 
```

如果有一种方法可以不重复协方差矩阵 10,000 次，那也很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T22:47:23.970

对于超过 2 维的复制，您需要将复制计数作为数组提供：

```
out = repmat(mat,[1,1,10000]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T23:30:25.027

创建 784x784 矩阵 10,000 次不会利用 MATLAB 中的矢量化，这对于小型数组将更有用。鉴于以下情况，避免 for 循环也无济于事：

您可以在这里获得的主要加速是通过计算一次协方差矩阵的逆矩阵，然后自己计算 pdf。sigma 的倒数需要 O(n^3)，而你不必要地这样做了 10,000 次。（此外，可以预先计算平方根行列式。）作为参考，多元正态分布的 PDF 计算如下：

[http://en.wikipedia.org/wiki/Multivariate_normal_distribution#Properties](http://en.wikipedia.org/wiki/Multivariate_normal_distribution#Properties)

最好只计算一次逆，然后计算`z = x - mu`每个值，然后`z'Sz`对每个 pdf 值进行计算，并应用一个简单的函数和一个常数。可是等等！您也可以对其进行矢量化。

我面前没有 MATLAB，但这基本上是你需要做的，它会立即运行。

```
s = inv(sigma);
c = -0.5*log(det(s)) - (k/2)*log(2*pi);
z = x - mu;                   % 10000 x 784 matrix
ans = exp( c - 0.5 .* dot(z*s, z, 2) ); % 10000 x 1 vector 
```