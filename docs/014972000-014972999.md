# StackOverflow 问答 14972000-14972999

# javascript - 此 javascript 获取 iFrame 以加载到页面上。它不会在IE中加载...

> ID：14972000
> 
> 赞同：0
> 
> 时间：2013-02-20T03:52:10.190
> 
> 标签：javascript, internet-explorer, iframe, internet-explorer-8, internet-explorer-9

这是我们用来调用 iframe 的 js。在 IE 中，它会超时或收到“Internet Explorer 无法加载页面”消息。它在 Chrome 和 Firefox 中运行良好。 **任何见解都将不胜感激......**

```
(function () {
    function f(i) {
        if (i.origin !== e + "" + n) {
            return
        }
        if (i.data === "destroy_bookmarklet") {
            var s = document.getElementById(g);
            if (s) {
                document.body.removeChild(s);
                s = null
            }
        }
    }
    var e = "http://",
        n = "URL GOES HERE",
        g = "ID_div",
        r = "ID_content_iframe",
        i = document.getElementById(r);
    if (i) {
        return
    }
    var d = document.createElement("div"),
        s = e + "" + n + "/post/create?response_type=embed",
        o = document.createElement("iframe");
    d.id = g;
    d.style.position = "absolute";
    d.style.top = "0";
    d.style.left = "0";
    d.style.height = "100%";
    d.style.width = "100%";
    d.style.zIndex = "16777270";
    o.id = r;
    o.src = s + "&link=" + encodeURIComponent(window.location.href) + "&title=" + encodeURIComponent(document.title) + "&description=" + encodeURIComponent("" + (window.getSelection ? window.getSelection() : document.getSelection ? document.getSelection() : document.selection.createRange().text));
    o.style.height = "600px";
    o.style.width = "650px";
    o.style.border = "10px solid #333333";
    o.style.marginTop = "100px";
    o.style.marginLeft = "auto";
    o.style.marginRight = "auto";
    o.style.display = "block";
    o.style.background = "#ffffff";
    o.style.overflowY = 'scroll';
    o.style.overflowX = 'hidden';
    document.body.appendChild(d);
    d.appendChild(o);
    var u = window.addEventListener ? "addEventListener" : "attachEvent";
    var a = u == "attachEvent" ? "onmessage" : "message";
    window[u](a, f, false)
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:18:22.813

```
if (el.addEventListener){
  el.addEventListener('your function', yourtext, false); //this is for IE 9 to above
} else if (el.attachEvent){
  el.attachEvent('your function', yourtext);//this is for IE 9 to lower
} 
```

# php - 文件上传PHP不成功

> ID：14972004
> 
> 赞同：-2
> 
> 时间：2013-02-20T03:52:43.533
> 
> 标签：php, xml, http, file-upload

```
<?php

$target_path = "./" . 'data.xml';

if (move_uploaded_file('data.xml', $target_path)) {
    echo "The file  has been uploaded";
} else {
    echo "There was an error uploading the file, please try again!";

}
?> 
```

上面的 PHP 脚本似乎不起作用。我尝试向此链接发送 HTTP POST 请求。我最终得到一个布尔否，是的[`move_uploaded_file`](http://php.net/move_uploaded_file)，说有一个错误。

我想知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:58:18.960

```
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path))
{
echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
" has been uploaded";
} 
else
{
echo "There was an error uploading the file, please try again!";
} 
```

# html - svg 代码 HTML 5 路径 金色螺旋

> ID：14972005
> 
> 赞同：0
> 
> 时间：2013-02-20T03:52:58.787
> 
> 标签：html, svg, kineticjs

[我希望在此http://www.html5canvastutorials.com/labs/html5-canvas-spiral-text/](http://www.html5canvastutorials.com/labs/html5-canvas-spiral-text/)上沿螺旋路径创建文本动画

我的尝试是使路径成为黄金螺旋，而不是上述代码中的路径。下面给出了黄金螺旋的 svg 代码...我尝试替换路径数据，但只有第一条曲线加载...

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 15.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="1024px" height="768px" viewBox="0 0 1024 768" enable-background="new 0 0 1024 768" xml:space="preserve">
<g id="ARC">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M32,87.344c0,327.678,265.635,593.313,593.313,593.313"/>
</g>
<g id="ARC_1_">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M625.313,680.656C827.829,680.656,992,516.485,992,313.969"/>
</g>
<g id="ARC_2_">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M992,313.969c0-125.162-101.464-226.625-226.625-226.625"/>
</g>
<g id="ARC_3_">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M765.375,87.344c-77.354,0-140.063,62.708-140.063,140.062"/>
</g>
<g id="ARC_4_">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M625.313,227.406c0,47.808,38.756,86.563,86.563,86.563"/>
</g>
<g id="ARC_5_">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M711.876,313.969c29.546,0,53.499-23.953,53.499-53.5"/>
</g>
<g id="ARC_6_">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M765.375,260.47c0-18.261-14.804-33.064-33.064-33.064"/>
</g>
<g id="ARC_7_">

    <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M732.311,227.406c-11.286,0-20.435,9.149-20.435,20.435"/>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:48:44.143

只需附加路径的`d`属性并删除其余的弧：

```
 <path fill="none" stroke="#000000" stroke-width="0.7087" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
    M32,87.344c0,327.678,265.635,593.313,593.313,593.313           
    M625.313,680.656C827.829,680.656,992,516.485,992,313.969 
    M992,313.969c0-125.162-101.464-226.625-226.625-226.625
    M765.375,87.344c-77.354,0-140.063,62.708-140.063,140.062
    M625.313,227.406c0,47.808,38.756,86.563,86.563,86.563
    M711.876,313.969c29.546,0,53.499-23.953,53.499-53.5
    M765.375,260.47c0-18.261-14.804-33.064-33.064-33.064
    M732.311,227.406c-11.286,0-20.435,9.149-20.435,20.435
"/> 
```

# wordpress - Jplayer 抓取 mp3 文件但不播放

> ID：14972008
> 
> 赞同：1
> 
> 时间：2013-02-20T03:53:14.583
> 
> 标签：wordpress, jplayer

我正在尝试使用 jplayer 播放在自定义字段中添加的 mp3 文件。因此，当我在帖子 jplayer 中单击 mp3 文件时，会抓取 mp3 文件，但到目前为止它只显示文件名和艺术家，但我无法让它真正播放文件。

我在 single.php 上使用此代码：

```
<div class="mp3jplayer-track">
<a class="playprogram" href='javascript:initMp3("<?php echo $mp3_url; ?>", "<?php echo $mp3_name; ?> - <?php /*if there is an artist specified for each mp3, we get it, otherwise we get the taxonomie Artists*/ if ($mp3_artists != ''){ echo 'Artist(s): '.$mp3_artists;}  else { echo 'Artist(s): '.$artists_names; } ?>")'>Play <br><span class="mp3_name"><i class="icon-music icon-white"></i><span class="mp3_name_text"><?php echo $mp3_name ?></span></span></a>   </div> 
```

jplayer 在我的页脚中看起来像这样：

```
<div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
        <div class="jp-gui jp-interface">
            <ul class="jp-controls">
                <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
            </ul>

            <!--
            <ul class="jp-toggles">
                <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
            </ul>
            -->

            <div class="jp-progress-group">
                <div class="jp-current-time"></div>
                <div class="jp-progress">
                    <div class="jp-seek-bar">
                        <div class="jp-play-bar"></div>
                    </div>
                </div>
                <div class="jp-duration"></div>
            </div>

            <div class="jp-volume-group">
                <a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a>
                <a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a>
                <div class="jp-volume-bar">
                    <div class="jp-volume-bar-value"></div>
                </div>
                <a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a>
            </div>

            <div class="jp-time-holder">

            </div>

        </div>
        <div class="jp-title">
            <ul>
                <li></li>
            </ul>
        </div>

        <div class="jp-no-solution">
            <span>Update Required</span>
            To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
        </div>

    </div>
</div> 
```

以及加载 mp3 的 javascript：

```
function initMp3(mp3file, mp3info){
jQuery.noConflict()(function($){
/* DEBUG
window.alert(mp3file);
window.alert(mp3info);
*/

$("#jp_container_1").css("display","block");

$("#jquery_jplayer_1").jPlayer( "clearMedia" );
$("#jquery_jplayer_1").jPlayer( "setMedia" , {
    mp3:mp3file
});

$("#jquery_jplayer_1").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            mp3:mp3file
        }).jPlayer("play");
    },

    swfPath: "js",
    supplied: "mp3",
    wmode: "window"
})

$(".jp-title ul li").text(mp3info);
$("#jquery_jplayer_1").jPlayer("play");

});
}; 
```

我真的搜索过，但我找不到为什么它不起作用，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:39:52.087

好的，我解决了这个问题，我的 swf 路径被破坏了，由于某种原因，firefox 无法使用 html 播放器......

# php - 如何使用钩子将内容添加到 Wordpress 中的 the_content()

> ID：14972010
> 
> 赞同：1
> 
> 时间：2013-02-20T03:53:20.343
> 
> 标签：php, wordpress, wordpress-theming, hook, customizing

快速提问：

假设这是我的内容 div：

```
<div id="content">
    <ul id="featured-controllers" class="clearfix">
       <li class="first" style="min-height: 182.167px;">
          <div class="et_slide_hover" style="opacity: 0; display: block;"></div>
          <div class="controller">
             <h2>Volunteers have more fun</h2>
          </div>
          <div class="et_animated_bar" style="display: block; width: 238.055px; left: 0.488656px; overflow: hidden;"></div>
      </li>
      <li style="min-height: 182.167px;" class="">
          <div class="et_slide_hover" style="display: block; opacity: 0;"></div>
          <div class="controller">
              <h2>Mark your calendar</h2>
              Check out our schedule of upcoming events...</p>
          </div>
         <div class="et_animated_bar" style="display: none; width: 239px; left: 0px;"> </div>
     </li>
  </ul>
  <div id="services" class="clearfix">
       <div class="service">
           <h3>Sample Page</h3>
             <p>
             <a href="http://collaborativecommunityprogram.org/wp-content/uploads/sample.png">
            <img class="alignnone size-medium wp-image-12" width="300" height="84" src="http://collaborativecommunityprogram.org/wp-content/uploads/sample-300x84.png" alt="sample">
            </a>
            </p>
      </div>
  </div>
  <div id="footer">
       <div id="footer-widgets" class="clearfix">
           <div class="footer-widget" style="min-height: 58px;">
               <div id="text-2" class="f_widget widget_text">
                   <h4 class="widgettitle"> </h4>
                <div class="textwidget">
           <img src="http://collaborativecommunityprogram.org/wp-content/uploads/footer-social.png">
               </div>
         </div>
     </div>
</div> 
```

格式有点混乱，但我正在尝试将内容添加到 ul 列表中，其 ID 为“featured-controllers”，位于上述内容 div 元素的顶部。我正在尝试将内容附加到它。

这是网站：[http ://collaborativecommunityprogram.org/](http://collaborativecommunityprogram.org/)

现在，我试过这样做：

```
function pc_custom_content($content) {
  return $content."<div><p>This is a test</p></div>";
}
add_filter( 'the_content', 'pc_custom_content'); 
```

但它会将此 div 附加到 div 的末尾，其 id 为“services”，而不是顶部的“featured-controllers”的 ul id。

有什么办法可以粘贴一些自定义内容，最好是另一个 li 到“功能控制器”列表的 ul id 中？我发现无法通过管理面板执行此操作。

任何帮助是极大的赞赏。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:05:04.913

您可以从管理面板向您的内容添加简码。然后从您的functions.php 或插件中调用您的php 代码。

从[Wordpress Codex修改](http://codex.wordpress.org/Shortcode_API)

```
//you can pass arguments to shortcodes and they are stored in the $atts array
function function_name( $atts ){  
    return "dynamic content to replace shortcode with";
}
add_shortcode( 'shortcode_name', 'function_name' ); 
```

然后将此添加到您希望动态内容出现在 WP Admin 中的主页内容中：

```
[shortcode_name] 
```

# msmq - 可能是一个非常愚蠢的大众运输误解

> ID：14972015
> 
> 赞同：0
> 
> 时间：2013-02-20T03:53:49.423
> 
> 标签：msmq, masstransit

我是 MassTransit 的新手，我不明白的一件事是：

如何在多个 .net ServiceBuse 之间创建总线？

拿这个代码：

```
class Program
{
    static void Main(string[] args)
    {

        var container = new WindsorContainer();
        container.Register(AllTypes.FromThisAssembly().BasedOn<IConsumer>());

        Console.WriteLine("Starting Buses!");

        var bus1 = ServiceBusFactory.New(sbc =>
        {
            sbc.UseMsmq();
            sbc.UseMulticastSubscriptionClient();
            sbc.ReceiveFrom("msmq://localhost/bus1");
            sbc.Subscribe(s => s.LoadFrom(container));

        });

        var bus2 = ServiceBusFactory.New(sbc =>
        {
            sbc.UseMsmq();
            sbc.UseMulticastSubscriptionClient();
            sbc.ReceiveFrom("msmq://localhost/bus2");

            sbc.Subscribe(s => s.LoadFrom(container));
        });

        bus1.Publish(new TestMsg() { Name = "Hello Matt!" });

        Console.WriteLine("Sent Message");

        Console.ReadLine();

    }
}
public class TestMsg
{
    public string Name { get; set; }
}

public class TestMsgConsumer : Consumes<TestMsg>.All, IBusService
{
    private IServiceBus bus;

    public void Consume(TestMsg message)
    {
        Console.WriteLine("Got message on " + this.Context().Endpoint.Address);
    }

    public void Dispose()
    {
        if (bus != null)
            bus.Dispose();
    }

    public void Start(IServiceBus bus)
    {
        this.bus = bus;
    }

    public void Stop()
    {

    }

} 
```

我希望“收到消息...”会出现两次，因为我有两辆公共汽车。然而，我只得到一个。显然，有一些步骤将这两个 Bus 实例与同一个逻辑总线联系起来，我不明白那是什么。我不能将它们指向相同的队列名称，因为同样只有一个人会收到消息。

谢谢！

**编辑/解决方案**：

我从 MT Google Groups 获得了一些帮助，他们让我很快就理顺了……这没有按预期工作，因为我没有安装 MSMQ 的多播位。安装了这些，它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:17:52.047

请参阅原始帖子以获取答案，但基本上归结为没有安装 MSMQ 的多播位。将它们放入并按预期工作。

# jquery - CSS无法检索元素的属性

> ID：14972018
> 
> 赞同：0
> 
> 时间：2013-02-20T03:54:02.423
> 
> 标签：jquery, css

我正在使用如下 CSS，当我尝试获取边框颜色的值时，它返回 null/blank 值？

css

```
INPUT {
    FONT: 100% verdana, Geneva, Arial, Helvetica, sans-serif;
    COLOR: #000000;
    BACKGROUND-COLOR:#FFECEC;
    BORDER-COLOR:#993333;
    BORDER-STYLE:solid;
    BORDER-WIDTH:1px;
}

$(window).load(function() {
  alert( $('#Bclose').css('background-color'));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:03:16.523

您可以将类名应用于您的输入作为替代方法...

css

```
.inputStyle{background-color:#afa;} 
```

html

```
<input class="inputStyle" type="text" value="hello" /> 
```

js

```
$(document).ready(function(){

alert($('.inputStyle').css('background-color'));

}); 
```

检查它在行动：http: [//jsfiddle.net/RkWLG/](http://jsfiddle.net/RkWLG/)

仅使用输入选择器也可以，[http://jsfiddle.net/RkWLG/1/](http://jsfiddle.net/RkWLG/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:24:32.247

尝试这个;

```
input {
    font: 100% verdana, Geneva, Arial, Helvetica, sans-serif;
    color: #000000;
    background-color:#FFECEC;
    border-color:#993333;
    border-style:solid;
    border-width:1px;
}

$('#clickme').click(function() {
    var bgcolor = $('#Bclose').css('background-color');
alert(bgcolor);
});

<input type="text" id="Bclose">
    <a id="clickme">click</a> 
```

当您单击文本时，这将返回颜色。也可以设置无点击功能。只需使用

```
var bgcolor = $('#Bclose').css('background-color'); alert(bgcolor); 
```

这是一个**[现场工作演示](http://jsfiddle.net/rqpGF/)**

*注意：始终尝试与 document.ready.function 一起使用*

# wix - 使用 msiexec 的 /a 开关时，ProgramFilesFolder 设置为 C:\

> ID：14972020
> 
> 赞同：1
> 
> 时间：2013-02-20T03:54:55.307
> 
> 标签：wix, group-policy, windows-installer

我有一个使用 WIX 创建的 .MSI 安装程序，在从 Windows 资源管理器打开文件或使用 msiexec /i 从命令窗口安装时工作正常。问题是我需要在计算机开机时使用 /a 使用组策略安装它。

使用 /i 选项时，ProgramFilesFolder 值正确设置为“C:\Program Files (x86)\”。

使用 /a 选项时，ProgramFilesFolder 的值设置为“C:\”，然后我收到一条错误消息（在日志上）：

`The installer has encountered an unexpected error installing this package. This may indicate a problem with this package. The error code is 2203\. The arguments are: C:\Referrals.msi, -2147287035,`

注意：我**没有**从“C:\”运行 .MSI 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:24:12.150

尝试

```
msiexec /a TARGETDIR="c:\temp\location" /passive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T22:59:51.783

我认为您可能混淆了[**msiexec.exe 命令行**](http://technet.microsoft.com/en-us/library/cc759262(v=ws.10).aspx)**： /a** is **[admin install](https://stackoverflow.com/questions/5564619/what-is-the-purpose-of-administrative-installation-initiated-using-msiexec-a)**。这本质上是一个使用**提取文件创建****网络安装点**的命令，用于在许多计算机上进行安装。这确保源文件可用于修补、自我修复、修复、重新安装等...

 **要处理**广告和组策略**，您需要使用[**这些命令行选项**](http://technet.microsoft.com/en-us/library/cc759262(v=ws.10).aspx#BKMK_Advertise)。所以一个非常基本的操作是默默地向所有用户宣传产品并写入一个日志文件：

```
msiexec.exe /JM "Installer.msi" /QN /L* "C:\msilog.log" 
```**

# javascript - jQuery动态列表生成

> ID：14972022
> 
> 赞同：1
> 
> 时间：2013-02-20T03:55:06.743
> 
> 标签：javascript, jquery-mobile

```
for(var i=0; i< vendors.length;i++)
    {
     var $ul = $("<ul>").attr("data-role", "listview")
                .attr("data-divider-theme","a")
                .attr("data-inset","true")
                .appendTo("#vendorLists");
         $("<li>").attr("data-role", "list-divider")
                .attr("role","heading")
                .text(vendors[i])
                .appendTo($ul);
       for(var j=0; j<coupons[i].length; j++)
        {
            var x = coupons[i][j].split(":");           
            var $li = $("<li>").attr("data-theme", "a")     
                       .appendTo($ul);
            $("<a>").text(x[0] + ":" + x[1])
                       .appendTo($li);
            }
    } 
```

我正在使用此代码通过从数组中获取来动态创建列表。vendorList 是一个 div 标签

Jquery 没有出现在这些..只有文本被显示请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:21:55.317

每次向**`jQuery Mobile`**页面添加动态内容时，您都需要触发旨在增强页面标记的特定功能。

在你的情况下，它是这个功能：

```
$('[data-role="listview"]').trigger('refresh'); 
```

如果您想了解更多相关信息（带有实时**`jsFiddle`**示例），请查看我关于此主题的其他**[文章。](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**或者可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:17:49.610

你提到`vendorList`的是一个 div 标签。但是，您`appendTo("#vendorLists")`在定义中使用`$ul`. 除非您的意思`vendorLists`是 div 标签，否则您想使用它`appendTo("#vendorList")`。

# ios - 一种方法永远调用另一种方法，这会导致任何问题吗？

> ID：14972024
> 
> 赞同：0
> 
> 时间：2013-02-20T03:55:15.863
> 
> 标签：ios, uiview, uiimage, uiviewanimation

我写了一个小客户调查应用程序，在顶部我有一张汽车和一辆货车的图像，我假装它们正在放大。但是我编写它的方式将它变成了一个无限循环，其中一种方法调用另一种方法，反之亦然。这就是动画永远播放的原因。

这是我的代码

```
-(void)doAnimate {

    // animate van
    [UIView animateWithDuration:1.0
                          delay:7.f
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{

                         vanView.frame = CGRectMake(770, 175, vanView.frame.size.width, vanView.frame.size.height);

                     } completion:^(BOOL finished) {
                         if (finished) {
                             [self doAnimateLoop];
                         }
                     }];

    // animate car
    [UIView animateWithDuration:1.0
                          delay:3.f
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{

                         carView.frame = CGRectMake(-600, 250, carView.frame.size.width, carView.frame.size.height);

                     } completion:^(BOOL finished) {
                         if (finished) {

                         }
                     }];
}

-(void)doAnimateLoop {

    vanView.frame = CGRectMake(-600, 175, vanView.frame.size.width, vanView.frame.size.height);
    carView.frame = CGRectMake(770, 250, carView.frame.size.width, carView.frame.size.height);

    // second animation van
    // animate van
    [UIView animateWithDuration:1.0
                          delay:2.f
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{

                         vanView.frame = CGRectMake(111, 175, vanView.frame.size.width, vanView.frame.size.height);

                     } completion:^(BOOL finished) {
                         if (finished) {

                         }
                     }];

    // animate car
    [UIView animateWithDuration:1.0
                          delay:5.f
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{

                         carView.frame = CGRectMake(104, 250, carView.frame.size.width, carView.frame.size.height);

                     } completion:^(BOOL finished) {
                         if (finished) {
                             [self doAnimate];
                         }
                     }];

} 
```

我想知道这是否会在将来导致应用程序出现任何问题？像内存泄漏或可能导致它崩溃的东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T11:53:27.697

如果你小心的话，无限循环不一定是坏事。

您需要确保在不需要动画时停止动画，因为它会占用宝贵的 CPU 时间。这会使您的应用程序响应缓慢，因为它在不需要时花费 CPU 时间进行动画处理。

当视图不再附加到活动窗口时，您可以停止动画（参见下面的代码），当您离开视图控制器时就是这种情况。

```
/**
 * doAnimate
 * Animates view with a call back to its self for infinite animation, stops on view unload.
 */
-(void)doAnimate
{
    //view is active, animate. else stop
    //this will stop the animation when the view is unloaded
    if (self.view.window)
    {
        //Animate your views
    }
} 
```

根据内存泄漏，如果您有良好的编码标准和实践，内存泄漏很少见。如果您担心或怀疑内存泄漏，那么您可以使用通常的工具（即[Instruments](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)）来检查内存使用情况。

根据您的代码，基本实现看起来不错。祝你好运。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-20T06:13:23.030

如果它在单独的线程中运行，则进入无限循环不是问题。问题是你能处理内存。由于循环是无限的，即使是最小的泄漏也会导致崩溃。如果您怀疑自己的手很脏，我建议您使用一些有效执行此操作的 api 并将其留在手中

# php - 实现类似 goMongoDB 的查询表达式对象评估

> ID：14972025
> 
> 赞同：14
> 
> 时间：2013-02-20T03:55:16.527
> 
> 标签：php, mongodb, if-statement, multidimensional-array, query-expressions

我一直在寻找**类似 MongoDb 的**（[http://docs.mongodb.org/manual/applications/read/#find、docs.mongodb.org/manual/reference/operators/](http://docs.mongodb.org/manual/applications/read/#find)）***查询表达式对象评估函数***实现或一类。它可能不会涵盖所有高级功能，并且应该具有可扩展的架构。

类似 MongoDB 的查询表达式对象*易于理解和使用*，提供编写干净、自解释代码的能力，因为查询和要搜索的对象都是关联数组。

*基本上*说它是从 php 数组中提取信息的便捷功能。知道数组结构（arrayPath），它将允许对多维数组数据执行操作，而无需多个嵌套循环。

如果您不熟悉 MongoDb，请查看要搜索的给定表达式对象和数组。

*为简单起见，我将其写为 JSON 字符串。对象内容没有意义，只是显示了 MongoDb 查询语法。*

### 类似 MongoDb 的查询表达式对象

```
{
    "name": "Mongo",
    "type": "db",
    "arch": {
        "$in": [
            "x86",
            "x64"
        ]
    },
    "version": {
        "$gte": 22
    },
    "released": {
        "$or": {
            "$lt": 2013,
            "$gt": 2012
        }
    }
} 
```

### 要搜索的数组

```
[
    {
        "name": "Mongo",
        "type": "db",
        "release": {
            "arch": "x86",
            "version": 22,
            "year": 2012
        }
    },
    {
        "name": "Mongo",
        "type": "db",
        "release": {
            "arch": "x64",
            "version": 21,
            "year": 2012
        }
    },
    {
        "name": "Mongo",
        "type": "db",
        "release": {
            "arch": "x86",
            "version": 23,
            "year": 2013
        }
    }
] 
```

## 使用类似 Mongo 的查询表达式进行查找

因此，借助该函数，我们应该能够向目标数组发出以下查询。

```
$found=findLikeMongo($array, $queryExpr); //resulting in a $array[0] value;
//@return found array 
```

## 使用类似 Mongo 的查询表达式获取数组路径

```
$arrayPath=getPathFromMongo($array, $queryExpr);// resulting in array("0")
//@return array path, represented as an array where entries are consecutive keys. 
```

# 家庭作业

*   我发现 gosner.net/articles/JsonPath/ 可能满足我的需求（不是完全匹配，因为它使用类似 Xpath 的表达式），需要注意的是，它严重依赖正则表达式和字符串解析，这肯定会慢与仅数组（类似 JSON）的实现相比，它下降了。

*   我也在这里找到了一个类似的问题，@stackoverflow [Evaluating MongoDB-like JSON Queries in PHP](https://stackoverflow.com/questions/14070460/evaluating-mongodb-like-json-queries-in-php)。得到的答案是使用一些 SPL 函数，我习惯于在大多数情况下避免使用这些函数。
    不知道作者是否提出了功能，他一直在努力开发。

*   在 thereisamoduleforthat.com/content/dealing-deep-arrays-php 上找到了可能的 arrayPath 实现，因此缺少此实现是因为它依赖于指针。

**我知道这不是一个简单的问题，这就是为什么我在开始我自己的课程的实际开发之前问它的原因。**

我很欣赏架构技巧、相关或类似的代码，这可能是动态构建 php“if..else”表达式的一个很好的实践示例。*强调文本*

# 如何编写非 SPL 版本？

@Baba 提供了一个优秀的类，它是使用 SPL 编写的。我想知道如何在没有 SPL 的情况下重写此代码。

## 有两个原因

*   多次调用该类会产生***函数开销***，这可以避免在原始 PHP 中重写它。
*   它可以很容易地*移植*到 SPL 不可用的原始 Javascript，从而更容易在两个平台上进行***代码维护。***

# 结果

创建的[ArrayQuery 类发布](https://github.com/olekukonko/ArrayQuery)在 Github 上，请考虑签出存储库以获取更新。

## SPL、原始 PHP 版本和 Chequer2 FORP[分析器](http://anthonyterrien.com/forp/)输出

简单来说-

1.  原始 PHP 版本的执行速度比 SPL 版本快 10 倍，消耗的内存减少了 20%。
2.  Chequer2 类的执行速度比 PHP SPL 类慢 40%，比原始 PHP 版本慢近 20 倍。
3.  MongoDb 是最快的（比原始 PHP 实现快 10 倍，消耗的内存少 5 倍），除非您确定要避免与 MongoDb 交互，否则不要使用这些类。

### MongoDb 版本

![MongoDb 参考分析结果](../Images/318eae51e10d02f149b68cdf0fa8f16c.png)

### 声压级版本

![带有 SPL 类分析结果的 PHP](../Images/73a8c9b576b9f8e8eede2d45968cb589.png)

### 原始 PHP（最新的 ArrayQuery 类）版本

![原始 PHP ArrayQuery 类分析结果](../Images/c38088aa1e9f0ae45cbf523ff02cb1a2.png)

### Checker2 版本

![Chequer2 PHP 类分析结果](../Images/c5f000088e7e06582b0e23822e1d196f.png)

### MongoDb 参考测试分析代码

```
$m = new MongoClient(); // connect
$db = $m->testmongo; // select a database
$collection = $db->data;
$loops=100;
for ($i=0; $i<$loops; $i++) {
    $d = $collection->find(array("release.year" => 2013));
}
print_r( iterator_to_array($d) ); 
```

### 带有 SPL 类分析代码的 PHP

```
include('data.php');
include('phpmongo-spl.php');
$s = new ArrayCollection($array, array("release.year" => 2013),false);
$loops=100;
for ($i=0; $i<$loops; $i++) {
    $d = $s->parse();
}
print_r( $d ); 
```

***SPL 类*** 的*parse()*函数已稍作修改以在执行后返回值，也可以对其进行修改以接受表达式，但它对于分析目的并不是必需的，因为每次都会重新评估表达式。

### 原始 PHP（最新的 ArrayQuery 类）分析代码

```
include('data.php');
include('phpmongo-raw.php');
$s = new ArrayStandard($array);
$loops=100;
for ($i=0; $i<$loops; $i++) {
    $d = $s->find(array("release.year" => 2013));
}
print_r( $d ); 
```

### checker2 PHP 分析代码

```
<?php
include('data.php');
include('../chequer2/Chequer.php');
$query=array("release.year" => 2013);

$loops=100;
for ($i=0; $i<$loops; $i++) {
    $result=Chequer::shorthand('(.release.year > 2012) ? (.) : NULL')
        ->walk($array);

}
print_r($result);
?> 
```

### 使用的数据（与他的回答中提供的@baba 相同）

```
$json = '[{
    "name":"Mongo",
    "type":"db",
    "release":{
        "arch":"x86",
        "version":22,
        "year":2012
    }
},
{
    "name":"Mongo",
    "type":"db",
    "release":{
        "arch":"x64",
        "version":21,
        "year":2012
    }
},
{
    "name":"Mongo",
    "type":"db",
    "release":{
        "arch":"x86",
        "version":23,
        "year":2013
    }
},      
{
    "key":"Diffrent",
    "value":"cool",
    "children":{
        "tech":"json",
        "lang":"php",
        "year":2013
    }
}
]';

$array = json_decode($json, true); 
```

### [forp-ui](https://github.com/aterrien/forp-ui)稍作修改的示例 ui 加载器（使用 ?profile=FILE_TO_PROFILE 调用）

```
<!doctype html>
<html>
    <head>
        <style>
            body {margin : 0px}
        </style>
    </head>
    <body>
        <div class="forp"></div>
<?php
register_shutdown_function(
    function() {
        // next code can be append to PHP scripts in dev mode
        ?>
        <script src="../forp-ui/js/forp.min.js"></script>
        <script>
        (function(f) {
            f.find(".forp")
             .each(
                function(el) {
                    el.css('margin:50px;height:300px;border:1px solid #333');
                }
             )
             .forp({
                stack : <?php echo json_encode(forp_dump()); ?>,
                //mode : "fixed"
             })
        })(forp);
        </script>
        <?php
    }
);

// start forp
forp_start();

// our PHP script to profile
include($_GET['profile']);

// stop forp
forp_end();
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T20:34:09.760

## 介绍

我认为[Evaluating MongoDB-like JSON Queries in PHP](https://stackoverflow.com/questions/14070460/evaluating-mongodb-like-json-queries-in-php)已经提供了您需要的所有信息。您所需要的只是对解决方案具有创造性并实现您想要的

**阵列**

假设我们将以下内容`json`转换为数组

```
$json = '[{
    "name":"Mongo",
    "type":"db",
    "release":{
        "arch":"x86",
        "version":22,
        "year":2012
    }
},
{
    "name":"Mongo",
    "type":"db",
    "release":{
        "arch":"x64",
        "version":21,
        "year":2012
    }
},
{
    "name":"Mongo",
    "type":"db",
    "release":{
        "arch":"x86",
        "version":23,
        "year":2013
    }
},      
{
    "key":"Diffrent",
    "value":"cool",
    "children":{
        "tech":"json",
        "lang":"php",
        "year":2013
    }
}
]';

$array = json_decode($json, true); 
```

**示例 1**

检查`key`-`Different`是否会像

```
echo new ArrayCollection($array, array("key" => "Diffrent")); 
```

输出

```
{"3":{"key":"Diffrent","value":"cool","children":{"tech":"json","lang":"php","year":2013}}} 
```

**示例 2** 检查是否`release year`为`2013`

```
echo new ArrayCollection($array, array("release.year" => 2013)); 
```

输出

```
{"2":{"name":"Mongo","type":"db","release":{"arch":"x86","version":23,"year":2013}}} 
```

**示例 3**

`Year`数一数在哪里`2012`

```
$c = new ArrayCollection($array, array("release.year" => 2012));
echo count($c); // output 2 
```

**示例 4**

让我们从您要检查的示例中`version`获取`grater than 22`

```
$c = new ArrayCollection($array, array("release.version" => array('$gt'=>22)));
echo $c; 
```

输出

```
{"2":{"name":"Mongo","type":"db","release":{"arch":"x86","version":23,"year":2013}}} 
```

**示例 5**

检查`release.arch`值是否是`IN`一个集合，例如`[x86,x100]`（示例）

```
$c = new ArrayCollection($array, array("release.arch" => array('$in'=>array("x86","x100"))));
foreach($c as $var)
{
    print_r($var);
} 
```

输出

```
Array
(
    [name] => Mongo
    [type] => db
    [release] => Array
        (
            [arch] => x86
            [version] => 22
            [year] => 2012
        )

)
Array
(
    [name] => Mongo
    [type] => db
    [release] => Array
        (
            [arch] => x86
            [version] => 23
            [year] => 2013
        )

) 
```

**例 6**

使用可调用

```
$year = 2013;
$expression = array("release.year" => array('$func' => function ($value) use($year) {
    return $value === 2013;
}));

$c = new ArrayCollection($array, $expression);

foreach ( $c as $var ) {
    print_r($var);
} 
```

输出

```
Array
(
    [name] => Mongo
    [type] => db
    [release] => Array
        (
            [arch] => x86
            [version] => 23
            [year] => 2013
        )

) 
```

**例 7**

注册自己的表情名称

```
$c = new ArrayCollection($array, array("release.year" => array('$baba' => 3)), false);
$c->register('$baba', function ($a, $b) {
    return substr($a, - 1) == $b;
});
$c->parse();
echo $c; 
```

输出

```
{"2":{"name":"Mongo","type":"db","release":{"arch":"x86","version":23,"year":2013}}} 
```

**使用的类**

```
class ArrayCollection implements IteratorAggregate, Countable, JsonSerializable {
    private $array;
    private $found = array();
    private $log;
    private $expression;
    private $register;

    function __construct(array $array, array $expression, $parse = true) {
        $this->array = $array;
        $this->expression = $expression;
        $this->registerDefault();
        $parse === true and $this->parse();
    }

    public function __toString() {
        return $this->jsonSerialize();
    }

    public function jsonSerialize() {
        return json_encode($this->found);
    }

    public function getIterator() {
        return new ArrayIterator($this->found);
    }

    public function count() {
        return count($this->found);
    }

    public function getLog() {
        return $this->log;
    }

    public function register($offset, $value) {
        if (strpos($offset, '$') !== 0)
            throw new InvalidArgumentException('Expresiion name must always start with "$" sign');

        if (isset($this->register[$offset]))
            throw new InvalidArgumentException(sprintf('Expression %s already registred .. Please unregister It first'));

        if (! is_callable($value)) {
            throw new InvalidArgumentException(sprintf('Only callable value can be registred'));
        }

        $this->register[$offset] = $value;
    }

    public function unRegister($offset) {
        unset($this->register[$offset]);
    }

    public function parse() {
        $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($this->array));
        foreach ( $it as $k => $items ) {
            if ($this->evaluate($this->getPath($it), $items)) {
                $this->found[$it->getSubIterator(0)->key()] = $this->array[$it->getSubIterator(0)->key()];
            }
        }
    }

    private function registerDefault() {
        $this->register['$eq'] = array($this,"evaluateEqal");
        $this->register['$not'] = array($this,"evaluateNotEqual");

        $this->register['$gte'] = array($this,"evaluateGreater");
        $this->register['$gt'] = array($this,"evaluateGreater");

        $this->register['$lte'] = array($this,"evaluateLess");
        $this->register['$lt'] = array($this,"evaluateLess");

        $this->register['$in'] = array($this,"evalueateInset");

        $this->register['$func'] = array($this,"evalueateFunction");
        $this->register['$fn'] = array($this,"evalueateFunction");
        $this->register['$f'] = array($this,"evalueateFunction");
    }

    private function log($log) {
        $this->log[] = $log;
    }

    private function getPath(RecursiveIteratorIterator $it) {
        $keyPath = array();
        foreach ( range(1, $it->getDepth()) as $depth ) {
            $keyPath[] = $it->getSubIterator($depth)->key();
        }
        return implode(".", $keyPath);
    }

    private function checkType($a, $b) {
        if (gettype($a) != gettype($b)) {
            $this->log(sprintf("%s - %s  is not same type of %s - %s", json_encode($a), gettype($a), json_encode($b), gettype($b)));
            return false;
        }
        return true;
    }

    private function evaluate($key, $value) {
        $o = $r = 0; // Obigation & Requirement
        foreach ( $this->expression as $k => $options ) {
            if ($k !== $key)
                continue;

            if (is_array($options)) {
                foreach ( $options as $eK => $eValue ) {
                    if (strpos($eK, '$') === 0) {
                        $r ++;
                        $callable = $this->register[$eK];
                        $callable($value, $eValue) and $o ++;
                    } else {
                        throw new InvalidArgumentException('Missing "$" in expession key');
                    }
                }
            } else {

                $r ++;
                $this->evaluateEqal($value, $options) and $o ++;
            }
        }
        return $r > 0 && $o === $r;
    }

    private function evaluateEqal($a, $b) {
        return $a == $b;
    }

    private function evaluateNotEqual($a, $b) {
        return $a != $b;
    }

    private function evaluateLess($a, $b) {
        return $this->checkType($a, $b) and $a < $b;
    }

    private function evaluateGreater($a, $b) {
        return $this->checkType($a, $b) and $a > $b;
    }

    private function evalueateInset($a, array $b) {
        return in_array($a, $b);
    }

    private function evalueateFunction($a, callable $b) {
        return $b($a);
    }
} 
```

## 概括

> 它可能不会涵盖所有高级功能，并且应该具有可扩展的架构

上面 的 类 展示 了 你 想要 的 一个 典型 例子 .. 你 可以 轻松`decouple`, 扩展 它 以 支持 复合 表达式 , 如`$and`和`$or`

> 类似 MongoDB 的查询表达式对象易于理解和使用，提供编写干净、自解释代码的能力，因为查询和要搜索的对象都是关联数组。

为什么不直接将数组写入`MongoDB`数据库而不是使用数组？它更高效，它会为你省去很多麻烦

我还必须提到，使用最好的工具做最好的工作......你想要的基本上是一个数据库的功能

> 基本上说它是从 php 数组中提取信息的便捷功能。知道数组结构（arrayPath），它将允许对多维数组数据执行操作，而无需多个嵌套循环。

该示例显示了如何使用路径来搜索值，但您仍然依赖于将数组加载到内存以及您的类执行多个递归 ans 循环，这不如数据库高效。

> 我很欣赏架构技巧、相关或类似的代码，这可能是动态构建 php“if..else”表达式的一个很好的实践示例。

**你真的是说你想要所有的人都在这里？？？**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T20:28:44.470

### 最近更新

> @baba 提供了一个很棒的原始 PHP 版本的类，它实现了类似 MongoDB 的查询表达式对象评估，但是输出结构有点不同，我的意思是嵌套数组输出中的点表示法（ [release.arch] => x86 ），而不是常规数组（ [release] => Array([arch] => x86) ）。我将不胜感激您提示如何按此顺序使该类与 mongoDB 完全兼容，因为它似乎与原始 PHP 类实现严格相关。

==================================================== ======================

**回答：**

你想要的很简单，你只需要`2 corrections`在当前的代码输入和输出循环中，你就会得到你的新格式。

***我是什么意思？***

**A.**改变

```
 foreach ( $array as $part ) {
        $this->flatten[] = $this->convert($part);
    } 
```

至

```
 foreach ( $array as $k => $part ) {
        $this->flatten[$k] = $this->convert($part);
    } 
```

**B.**改变

```
 foreach ( $this->flatten as $data ) {
        $this->check($find, $data, $type) and $f[] = $data;
    } 
```

至：

```
 foreach ( $this->flatten as $k => $data ) {
        $this->check($find, $data, $type) and $f[] = $this->array[$k];
    } 
```

**用于休息的新阵列** 

```
$json = '[
  {
    "name": "Mongo",
    "release": {
      "arch": "x86",
      "version": 22,
      "year": 2012
    },
    "type": "db"
  },
  {
    "name": "Mongo",
    "release": {
      "arch": "x64",
      "version": 21,
      "year": 2012
    },
    "type": "db"
  },
  {
    "name": "Mongo",
    "release": {
      "arch": "x86",
      "version": 23,
      "year": 2013
    },
    "type": "db"
  },
  {
    "name": "MongoBuster",
    "release": {
      "arch": [
        "x86",
        "x64"
      ],
      "version": 23,
      "year": 2013
    },
    "type": "db"
  },
  {
    "children": {
      "dance": [
        "one",
        "two",
        {
          "three": {
            "a": "apple",
            "b": 700000,
            "c": 8.8
          }
        }
      ],
      "lang": "php",
      "tech": "json",
      "year": 2013
    },
    "key": "Diffrent",
    "value": "cool"
  }
]';

$array = json_decode($json, true); 
```

**简单测试**

```
$s = new ArrayStandard($array);
print_r($s->find(array("release.arch"=>"x86"))); 
```

输出

```
Array
(
    [0] => Array
        (
            [name] => Mongo
            [type] => db
            [release] => Array
                (
                    [arch] => x86
                    [version] => 22
                    [year] => 2012
                )

        )

    [1] => Array
        (
            [name] => Mongo
            [type] => db
            [release] => Array
                (
                    [arch] => x86
                    [version] => 23
                    [year] => 2013
                )

        )

) 
```

如果您还想保留原件`array key position`，您可以拥有

```
 foreach ( $this->flatten as $k => $data ) {
        $this->check($find, $data, $type) and $f[$k] = $this->array[$k];
    } 
```

**只是为了好玩**

**A.**支持`regex`

只是为了好玩，我添加了对`$regex`别名的支持，`$preg`或者`$match`这意味着你可以拥有

```
print_r($s->find(array("release.arch" => array('$regex' => "/4$/")))); 
```

或者

```
print_r($s->find(array("release.arch" => array('$regex' => "/4$/")))); 
```

输出

```
Array
(
    [1] => Array
        (
            [name] => Mongo
            [type] => db
            [release] => Array
                (
                    [arch] => x64
                    [version] => 21
                    [year] => 2012
                )

        )

) 
```

**B.**使用简单数组，如`queries`

```
$queryArray = array(
        "release" => array(
                "arch" => "x86"
        )
);
$d = $s->find($s->convert($queryArray)); 
```

`$s->convert($queryArray)`已转换

```
Array
(
    [release] => Array
        (
            [arch] => x86
        )

) 
```

至

```
Array
(
    [release.arch] => x86
) 
```

**C.**模数`$mod`

```
print_r($s->find(array(
        "release.version" => array(
                '$mod' => array(
                        23 => 0
                )
        )
)));

 //Checks release.version % 23 == 0 ; 
```

**D.**计算元素`$size`

```
print_r($s->find(array(
        "release.arch" => array(
                '$size' => 2
        )
)));

// returns count(release.arch) == 2; 
```

**E.**检查它是否匹配数组中的所有元素`$all`

```
print_r($s->find(array(
        "release.arch" => array(
                '$all' => array(
                        "x86",
                        "x64"
                )
        )
))); 
```

输出

```
Array
(
    [3] => Array
        (
            [name] => MongoBuster
            [release] => Array
                (
                    [arch] => Array
                        (
                            [0] => x86
                            [1] => x64
                        )

                    [version] => 23
                    [year] => 2013
                )

            [type] => db
        )

) 
```

**F.**如果您不确定元素键名，那么您可以使用`$has`类似`opposite`的`$in`

```
print_r($s->find(array(
        "release" => array(
                '$has' => "x86"
        )
))); 
```

==================================================== ======================

### 旧更新

> @Baba 提供了一个优秀的类，它是使用 SPL 编写的。我想知道如何在没有 SPL 的情况下重写此代码。原因是多次调用这个类会产生函数开销，这可以避免在原始 PHP 中重写它，并且可能在最终版本中使用 goto 语句来避免递归函数调用。

==================================================== ======================

由于您不想要`SPL`和功能..花了一段时间，但我能够想出替代类，它也灵活且易于使用

为避免多次加载数组，您声明一次：

```
$array = json_decode($json, true);
$s = new ArrayStandard($array); 
```

**A.**找到在`release.year`哪里`2013`

```
$d = $s->find(array(
        "release.year" => "2013"
));
print_r($d); 
```

输出

```
Array
(
    [0] => Array
        (
            [name] => Mongo
            [type] => db
            [release.arch] => x86
            [release.version] => 23
            [release.year] => 2013
        )

) 
```

**B.**你第一次可以运行复杂的`$and`语句`$or`，比如 find where `release.arch`=`x86`和`release.year`=`2012`

```
$d = $s->find(array(
        "release.arch" => "x86",
        "release.year" => "2012"
), ArrayStandard::COMPLEX_AND);

print_r($d); 
```

输出

```
Array
(
    [0] => Array
        (
            [name] => Mongo
            [type] => db
            [release.arch] => x86
            [release.version] => 22
            [release.year] => 2012
        )

) 
```

**C.**想象一个更复杂的查询

```
$d = $s->find(array(
        "release.year" => array(
                '$in' => array(
                        "2012",
                        "2013"
                )
        ),
        "release.version" => array(
                '$gt' => 22
        ),
        "release.arch" => array(
                '$func' => function ($a) {
                    return $a == "x86";
                }
        )
), ArrayStandard::COMPLEX_AND);

print_r($d); 
```

输出

```
Array
(
    [0] => Array
        (
            [name] => Mongo
            [type] => db
            [release.arch] => x86
            [release.version] => 23
            [release.year] => 2013
        )

) 
```

**新的修改类**

```
class ArrayStandard {
    const COMPLEX_OR = 1;
    const COMPLEX_AND = 2;
    private $array;
    private $tokens;
    private $found;

    function __construct(array $array) {
        $this->array = $array;
        foreach ( $array as $k => $item ) {
            $this->tokens[$k] = $this->tokenize($item);
        }   
    }

    public function getTokens() {
        return $this->tokens;
    }

    public function convert($part) {
        return $this->tokenize($part, null, false);
    }

    public function find(array $find, $type = 1) {
        $f = array();
        foreach ( $this->tokens as $k => $data ) {
            $this->check($find, $data, $type) and $f[$k] = $this->array[$k];
        }
        return $f;
    }

    private function check($find, $data, $type) {
        $o = $r = 0; // Obigation & Requirement
        foreach ( $data as $key => $value ) {
            if (isset($find[$key])) {
                $r ++;
                $options = $find[$key];
                if (is_array($options)) {
                    reset($options);
                    $eK = key($options);
                    $eValue = current($options);
                    if (strpos($eK, '$') === 0) {
                        $this->evaluate($eK, $value, $eValue) and $o ++;
                    } else {
                        throw new InvalidArgumentException('Missing "$" in expession key');
                    }
                } else {
                    $this->evaluate('$eq', $value, $options) and $o ++;
                }
            }
        }

        if ($o === 0)
            return false;

        if ($type == self::COMPLEX_AND and $o !== $r)
            return false;

        return true;
    }

    private function getValue(array $path) {
        return count($path) > 1 ? $this->getValue(array_slice($path, 1), $this->array[$path[0]]) : $this->array[$path[0]];
    }

    private function tokenize($array, $prefix = '', $addParent = true) {
        $paths = array();
        $px = empty($prefix) ? null : $prefix . ".";
        foreach ( $array as $key => $items ) {
            if (is_array($items)) {
                $addParent && $paths[$px . $key] = json_encode($items);
                foreach ( $this->tokenize($items, $px . $key) as $k => $path ) {
                    $paths[$k] = $path;
                }
            } else {
                $paths[$px . $key] = $items;
            }
        }
        return $paths;
    }

    private function evaluate($func, $a, $b) {
        $r = false;

        switch ($func) {
            case '$eq' :
                $r = $a == $b;
                break;
            case '$not' :
                $r = $a != $b;
                break;
            case '$gte' :
            case '$gt' :
                if ($this->checkType($a, $b)) {
                    $r = $a > $b;
                }
                break;

            case '$lte' :
            case '$lt' :
                if ($this->checkType($a, $b)) {
                    $r = $a < $b;
                }
                break;
            case '$in' :
                if (! is_array($b))
                    throw new InvalidArgumentException('Invalid argument for $in option must be array');
                $r = in_array($a, $b);
                break;

            case '$has' :
                if (is_array($b))
                    throw new InvalidArgumentException('Invalid argument for $has array not supported');
                $a = @json_decode($a, true) ?  : array();
                $r = in_array($b, $a);
                break;

            case '$all' :
                $a = @json_decode($a, true) ?  : array();
                if (! is_array($b))
                    throw new InvalidArgumentException('Invalid argument for $all option must be array');
                $r = count(array_intersect_key($a, $b)) == count($b);
                break;

            case '$regex' :
            case '$preg' :
            case '$match' :

                $r = (boolean) preg_match($b, $a, $match);
                break;

            case '$size' :
                $a = @json_decode($a, true) ?  : array();
                $r = (int) $b == count($a);
                break;

            case '$mod' :
                if (! is_array($b))
                    throw new InvalidArgumentException('Invalid argument for $mod option must be array');
                list($x, $y) = each($b);
                $r = $a % $x == 0;
                break;

            case '$func' :
            case '$fn' :
            case '$f' :
                if (! is_callable($b))
                    throw new InvalidArgumentException('Function should be callable');
                $r = $b($a);
                break;

            default :
                throw new ErrorException("Condition not valid ... Use \$fn for custom operations");
                break;
        }

        return $r;
    }

    private function checkType($a, $b) {
        if (is_numeric($a) && is_numeric($b)) {
            $a = filter_var($a, FILTER_SANITIZE_NUMBER_FLOAT);
            $b = filter_var($b, FILTER_SANITIZE_NUMBER_FLOAT);
        }

        if (gettype($a) != gettype($b)) {
            return false;
        }
        return true;
    }
} 
```

# wpf - 如何在 WPf 2010 中以编程方式定位 TextBox

> ID：14972026
> 
> 赞同：-2
> 
> 时间：2013-02-20T03:55:26.557
> 
> 标签：wpf, location

我以编程方式在 WPF 2010 中创建了一个 TextBox：

```
TextBox tb= new TextBox();
tb.MaximumSize=new System.Drawing.Size(100, 25); 
```

如何在窗体上以编程方式定义此 TextBox 的位置？

```
tb.Margin = System....Drawing(0, 0, 0, 0); -  does not work. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:10:44.633

WPF 示例

```
TextBox textBox=new TextBox();
textBox.Width = 100;
textBox.Height = 100;
textBox.Margin=new Thickness(20,200,100,100);

Content.Children.Add(textBox); 
```

`Content`在哪里`StackPanel`

Winform 示例

```
TextBox textBox=new TextBox();
textBox.Location=new Point(100,100);
this.Controls.Add(textBox); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:13:19.780

您将文本框放入哪个容器中？如果您将其放入 DockPanel 中，则需要执行类似的操作

```
<DockPanel HorizontalAlignment="Left" >
</DockPanel 
```

以便 WPF 知道边距适用于何处。

# tfsbuild - TFS CI Build 运行每个单元测试两次

> ID：14972031
> 
> 赞同：3
> 
> 时间：2013-02-20T03:55:59.113
> 
> 标签：tfsbuild

我们有一个带有 CI 设置的 TFS 服务器。出于某种原因，CI 将每个单元测试运行两次。请问有人知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-14T10:40:45.977

在以下组合中可能会出现此行为：

*   测试项目被解决方案中的另一个项目引用，并且
*   指示MsBuild为每个项目生成文件夹，即`/p:GenerateProjectSpecificOutputFolder=true`使用MsBuild开关

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:56:20.173

检查您的构建定义。在此过程详细信息中检查您的测试源。我敢打赌，您的两个过滤器正在解析导致此问题的同一个 .dll。

# java - 如何将小写字母转换为大写字母和大写字母转换为小写字母

> ID：14972032
> 
> 赞同：9
> 
> 时间：2013-02-20T03:55:59.843
> 
> 标签：java, string, uppercase, lowercase

交替显示在文本框中键入的任何文本

```
//     in either Capital or lowercase depending on the original
//     letter changed.  For example:  CoMpUtEr will convert to
//     cOmPuTeR and vice versa.
    Switch.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e )

            String characters = (SecondTextField.getText()); //String to read the user input
            int length = characters.length();  //change the string characters to length

         for(int i = 0; i < length; i++)  //to check the characters of string..
         {             
            char character = characters.charAt(i);          

            if(Character.isUpperCase(character)) 
            {
                SecondTextField.setText("" + characters.toLowerCase());

            }
            else  if(Character.isLowerCase(character))
            {
                 SecondTextField.setText("" + characters.toUpperCase()); //problem is here, how can i track the character which i already change above, means lowerCase**
                }               
         }}     
    }); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T04:01:35.450

`setText`正在将文本内容更改为您提供的内容，而不是附加它。

`String`先从字段转换，然后直接应用...

```
String value = "This Is A Test";
StringBuilder sb = new StringBuilder(value);
for (int index = 0; index < sb.length(); index++) {
    char c = sb.charAt(index);
    if (Character.isLowerCase(c)) {
        sb.setCharAt(index, Character.toUpperCase(c));
    } else {
        sb.setCharAt(index, Character.toLowerCase(c));
    }
}

SecondTextField.setText(sb.toString()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T03:59:50.553

您不必跟踪是否已经将字符从上更改为下。您的代码已经这样做了，因为它基本上是：

```
1   for each character x:
2       if x is uppercase:
3           convert x to lowercase
4       else:
5           if x is lowercase:
6                convert x to uppercase. 
```

事实上，你`else`在那里（在第 4 行）意味着一个最初是大写的字符将永远不会在第二个`if`语句（在第 5 行）中检查。

例如，从`A`. 因为它是大写的，所以它会在第 3 行被转换为小写，然后你会回到第 1 行输入*下一个*字符。

如果您以 开头`z`，则`if`第 2 行将直接将您发送到第 5 行，在那里它将被转换为大写。任何既不是大写也不是小写的东西都会使*两个* `if`语句都失败，因此保持不变。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T04:04:33.907

你可以使用`StringUtils.swapCase()`从`org.apache.commons`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-02T18:46:30.193

这是一个更好的方法：-

```
void main()throws IOException
{
    System.out.println("Enter sentence");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String str = br.readLine();
    String sentence = "";
    for(int i=0;i<str.length();i++)
    {
        if(Character.isUpperCase(str.charAt(i))==true)
        {
            char ch2= (char)(str.charAt(i)+32);
            sentence = sentence + ch2;
        }
        else if(Character.isLowerCase(str.charAt(i))==true)
        {
            char ch2= (char)(str.charAt(i)-32);
            sentence = sentence + ch2;
        }
        else
        sentence= sentence + str.charAt(i);

    }
    System.out.println(sentence);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-20T04:02:40.800

问题是您试图`SecondTextField`在检查原始字符串中的每个字符后设置值。您应该“在一边”进行转换，一次一个字符，然后才将结果设置为`SecondTextField`.

当您浏览原始字符串时，开始从一个空字符串组合输出。继续在相反的情况下附加字符，直到用完字符。输出准备好后，将其设置为`SecondTextField`.

您可以输出 a `String`，将其设置为空 string `""`，并随时向其附加字符。这会奏效，但这是一种低效的方法。更好的方法是使用一个[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)类，它可以让您更改字符串而不会丢弃整个内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-29T05:31:03.803

```
String name = "Vikash";
String upperCase = name.toUpperCase();
String lowerCase = name.toLowerCase(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-13T17:24:19.400

这是不使用任何 String 函数的更好方法。

```
public static String ReverseCases(String str) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < str.length(); i++) {
      char temp;
      if (str.charAt(i) >= 'a' && str.charAt(i) <= 'z') {
        temp = (char)(str.charAt(i) - 32);
      }
      else if (str.charAt(i) >= 'A' && str.charAt(i) <= 'Z'){
        temp = (char)(str.charAt(i) + 32);
      }
      else {
        temp = str.charAt(i);
      }

      sb.append(temp);
    }
    return sb.toString();
  } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-14T14:53:46.017

这是其他版本：

公共类回文{

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    System.out.println("Enter a word to check: ");
    String checkWord = sc.nextLine();
    System.out.println(isPalindrome(checkWord));
    sc.close();

}

public static boolean isPalindrome(String str) {        
    StringBuilder secondSB = new StringBuilder();
    StringBuilder sb = new StringBuilder();
    sb.append(str);
    for(int i = 0; i<sb.length();i++){
        char c = sb.charAt(i);
        if(Character.isUpperCase(c)){
            sb.setCharAt(i, Character.toLowerCase(c));
        }
    }
    secondSB.append(sb);
    return sb.toString().equals(secondSB.reverse().toString());
} 
```

}

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-28T10:41:58.713

```
StringBuilder b = new StringBuilder();

Scanner s = new Scanner(System.in);
String n = s.nextLine();

for(int i = 0; i < n.length(); i++) {
    char c = n.charAt(i);

    if(Character.isLowerCase(c) == true) {
        b.append(String.valueOf(c).toUpperCase());
    }
    else {
        b.append(String.valueOf(c).toLowerCase());
    }
}

System.out.println(b); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-03T04:58:20.113

方法说明：

```
*toLowerCase()* Returns a new string with all characters converted to lowercase.

*toUpperCase()* Returns a new string with all characters converted to uppercase. 
```

例如：

`"Welcome".toLowerCase()`返回一个新字符串，**欢迎**

`"Welcome".toUpperCase()`返回一个新字符串，**欢迎**

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-23T16:24:44.120

如果您查看 characters `a-z`，您会发现它们都将第 6 位设置为 1。其中`A-Z`第 6 位未设置。

```
A = 1000001    a = 1100001
B = 1000010    b = 1100010
C = 1000011    c = 1100011
D = 1000100    d = 1100100     
...
Z = 1011010    z = 1111010 
```

所以我们需要做的就是遍历给定字符串中的每个字符，然后`XOR(^)`用`32`. 这样，第 6 位就可以交换了。

查看下面的代码以简单地更改字符串大小写而不使用任何`if-else`条件。

```
public final class ChangeStringCase {
    public static void main(String[] args) {
        String str = "Hello World";
        for (int i = 0; i < str.length(); i++) {
            char ans = (char)(str.charAt(i) ^ 32);
            System.out.print(ans); // Final Output: hELLO wORLD
        }
    }
} 
```

时间复杂度：`O(N)`其中`N`= 字符串的长度。

空间复杂度：`O(1)`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-19T06:22:19.687

```
public static void main(String[] args) {
    Scanner scanner = new Scanner(System.in);
    String satr=scanner.nextLine();
    String newString = "";
    for (int i = 0; i < satr.length(); i++) {
        if (Character.isUpperCase(satr.charAt(i))) {
            newString+=Character.toLowerCase(satr.charAt(i));
        }else newString += Character.toUpperCase(satr.charAt(i));
    }
    System.out.println(newString);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-10T10:29:13.737

```
public class Toggle {
public static String toggle(String s) {
    char[] ch = s.toCharArray();

    for (int i = 0; i < s.length(); i++) {
        char charat = ch[i];
        if (Character.isUpperCase(charat)) {
            charat = Character.toLowerCase(charat);
        } else
            charat = Character.toUpperCase(charat);
        System.out.print(charat);
    }
    return s;
  }

public static void main(String[] args) {
    toggle("DivYa");
   }
  } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-06-02T22:15:58.547

```
import java.util.Scanner;
class TestClass {
    public static void main(String args[]) throws Exception {
        Scanner s = new Scanner(System.in);
        String str = s.nextLine();
        char[] ch = str.toCharArray();
        for (int i = 0; i < ch.length; i++) {
            if (Character.isUpperCase(ch[i])) {
                ch[i] = Character.toLowerCase(ch[i]);
            } else {
                ch[i] = Character.toUpperCase(ch[i]);
            }
        }
        System.out.println(ch);
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-25T15:11:59.300

```
//This is to convert a letter from upper case to lower case
import java.util.Scanner;
    public class ChangeCase {
        public static void main(String[]args) {

            String input;
            Scanner sc= new Scanner(System.in);
                System.out.println("Enter Letter from upper case");
                input=sc.next();

            String result;
            result= input.toLowerCase();
            System.out.println(result);
        }
    } 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-06-08T09:43:23.873

```
 String str1,str2;
    Scanner S=new Scanner(System.in);
    str1=S.nextLine();
    System.out.println(str1);
    str2=S.nextLine();
    str1=str1.concat(str2);
    System.out.println(str1.toLowerCase()); 
```

# forms - 在 CakePHP 2.0 表单中仅保存更改的字段

> ID：14972043
> 
> 赞同：1
> 
> 时间：2013-02-20T03:57:17.743
> 
> 标签：forms, cakephp, save, field

我正在创建一个可以让多个用户同时编辑相同信息的 CakePHP 应用程序。为了防止用户覆盖彼此的更改，我想让它在用户保存表单时只保存用户更改的一两个字段。

我不能只将这些字段与数据库值进行比较，因为这些数据库值实际上可能是来自其他用户的较新值。

CakePHP 是否提供任何方式仅通过 POST 发送更新的字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:28:16.460

我不相信有一个内置的解决方案。我想出了一些有效的代码，但您肯定希望将其放入自己的函数中，以便多个控制器操作可以使用它。此外，它并不完美。例如，它会在日期字段上失败，因为 CakePHP 的日期字段`select`在表单中呈现为 s。

这是用于编辑操作。原始代码：

```
public function edit($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    } else {
        $this->request->data = $this->User->read(null, $id);
    }
} 
```

修改后的代码：

```
public function edit($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        $originalData = unserialize(base64_decode($this->request->data['Extra']['original_data']));
        $save = $this->request->data;
        unset($save['Extra']);

        foreach ($save as $model => $modelFields) {
            if (!array_key_exists($model, $originalData)) {
                continue;
            }

            foreach ($modelFields as $field => $value) {
                if (!array_key_exists($field, $originalData[$model])) {
                    continue;
                }

                if ($save[$model][$field] === $originalData[$model][$field]) {
                    unset($save[$model][$field]);
                }
            }
        }

        $this->User->set($save);

        if ($this->User->validates() && $this->User->save($save, false)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    } else {
        $this->request->data = $this->User->read(null, $id);
        $this->request->data['Extra']['original_data'] = base64_encode(serialize($this->request->data));
    }
} 
```

另外，在表格中的某处添加`edit.ctp`：

```
echo $this->Form->hidden('Extra.original_data'); 
```

# c# - 以系统用户身份启动进程

> ID：14972045
> 
> 赞同：2
> 
> 时间：2013-02-20T03:57:27.990
> 
> 标签：c#, windows, permissions, administrator

我试图在 Windows 上使用代码（c#）从一些注册表项中读取一些值，但我发现我无法读取这些值的原因是因为管理员用户没有权限：

所以我手动导航到给我带来麻烦的注册表项，这就是权限选项卡的样子：

![在此处输入图像描述](../Images/af5802050462f4b7f784af76542fa401.png)

所以这让我想到了如何以用户“系统”的身份运行进程？这听起来很奇怪，但显然有系统用户对吗？我知道如何以管理员身份运行，但也许也可以以系统身份运行。

## 编辑

这是我的代码。基本上我想遍历所有的注册表项：

```
class Program
{
    // class to store reg key.
    [Serializable]
    [DebuggerDisplay("Name = {Name}, Val = {value}, type={type}")]
    class MyRegKey
    {
        public string Name;
        public object value;
        public RegistryValueKind type;
        public List<MyRegKey> SubKeys = new List<MyRegKey>();
        public List<MyRegKey> Values = new List<MyRegKey>();
    }

    static MyRegKey root = new MyRegKey();

    static void TraverseTree(RegistryKey key, MyRegKey temp)
    {
        foreach (var v in key.GetValueNames())
        {            
            var kind = key.GetValueKind(v);
            var value = key.GetValue(v, null);
            var name = v;

            temp.Values.Add(new MyRegKey { Name = name, value = value, type = kind });
        }

        var x = key.GetSubKeyNames();
        for (var i = 0; i < x.Length; i++)
        {
            RegistryKey productKey;
            productKey = key.OpenSubKey(x[i], false); // <--------- Code crashes here

            if (productKey != null)
            {
                var y = new MyRegKey() { Name = productKey.Name };
                temp.SubKeys.Add(y);
                Foo(productKey, y);
            }
        }        
    }

    public static void Main()
    {

        var key = Registry.LocalMachine;

        root.Name = key.Name;
        TraverseTree(key, root);
    }
} 
```

我以管理员身份运行该代码...

这是我的程序如何崩溃的图像，说明我没有权限： ![在此处输入图像描述](../Images/15aaae89302d4cc97be0be33b04d789b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:57:50.297

[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553) `-s`在系统帐户中运行远程进程

```
C:\Windows\system32>psexec -i -d -s cmd

PsExec v1.98 - Execute processes remotely
Copyright (C) 2001-2010 Mark Russinovich
Sysinternals - www.sysinternals.com

cmd started on SERGMATCOMP with process ID 5356. 
```

带有 PID5356 的 cmd 输出

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Windows\system32>whoami
nt authority\system 
```

# ios - 适用于 IOS 的 Google Analytics 2.0 beta 4

> ID：14972053
> 
> 赞同：0
> 
> 时间：2013-02-20T03:58:07.423
> 
> 标签：ios

我正在尝试在我的 iOS 应用程序中使用 Google Analytics 自定义变量，但我找不到采用自定义变量的方法。有没有办法使用 Google Analytics 2.0 beta 4 发送自定义变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T21:22:52.623

自定义变量现在称为**自定义维度**。

请参阅：[https](https://developers.google.com/analytics/devguides/collection/ios/v2/migration) ://developers.google.com/analytics/devguides/collection/ios/v2/migration和[https://developers.google.com/analytics/devguides/collection/ios/v2/customdimsmets](https://developers.google.com/analytics/devguides/collection/ios/v2/customdimsmets)

它们与综合浏览量一起发送。（现在叫`sendView:`）

实质上，您将执行以下操作：

```
[[GAI sharedInstance].defaultTracker setCustom:1 dimension:@"Some Custom Variable"];
[[GAI sharedInstance].defaultTracker sendView:@"Some View Controller Name"]; 
```

# java - 将 GUI 连接到 postgresql-8.4.15 中的用户创建函数

> ID：14972058
> 
> 赞同：1
> 
> 时间：2013-02-20T03:58:30.460
> 
> 标签：java, database, user-interface, jdbc

我的任务是为应用程序创建配置文件。我们使用的数据库是 Postgresql。我已经定义了一些函数来提供这些配置文件，并将它们添加到 Postgresql 源代码中。现在我不知道如何用 GUI 调用这些函数。我的意思是如何将我的图形用户界面连接到我创建的那些功能。例如，我的 GUI 中有一个按钮是“开始创建配置文件”，它应该在 postgresql 源代码代码中调用这些函数等等......

关于如何从我的 GUI 调用这些函数的任何想法？

我非常感谢您提前提供的帮助！

根据回复，为了使用 JDBC 将我的 GUI 连接到 postgreSQL，我编写了这段代码，但是“URL”有问题

我知道Java中的这些命令可以连接到数据库（PostgreSQL）：

```
Connection con = null;
Statement s = null;

String url = "jdbc:postgresql://localhost/mydb";
String user = "user";
String password = null;

try {
con = DriverManager.getConnection(url, user, password);
 } catch (SQLException ex) {
           Logger lgr = Logger.getLogger(Home.class.getName());
           lgr.log(Level.SEVERE, ex.getMessage(), ex);
           out.println(ex.getMessage());
} 

String query = " select * from my_function()";
try {
       s =con.createStatement();
       r = s.executeQuery(query);
}catch (Exception e){
}finally {
 try {
 if (con != null) 
con.close();
  } catch (SQLException ex) {
              Logger lgr = Logger.getLogger(HomeServlet.class.getName());
              lgr.log(Level.WARNING, ex.getMessage(), ex);
} 
```

但我不确定我必须在“URL”中插入什么，请您帮帮我！

# php - 由于对 PHP 脚本的多次 ajax 调用，Web 服务器 CPU/内存资源受限

> ID：14972059
> 
> 赞同：1
> 
> 时间：2013-02-20T03:58:33.067
> 
> 标签：php, ajax, memory, cpu, file-get-contents

我正在使用 Webhostingpad 托管一个网站，但遇到了问题。当我的主页加载时，我目前正在对返回用于主页的内容的 php 脚本进行 8 次并发 ajax 调用。8 个 ajax 调用正在调用一个名为 run.php 的文件。该文件的工作只是从名为 amazon 的类中调用一个函数，该类在另一个名为 amazon.php 的文件中定义。

这是通过 ajax 调用 8 次的 URL。8 个调用之间的唯一区别是查询字符串：

[http://my-domain.com/run.php?f=getItemsById&arg=id:B0043OYFKU,B001JKTTVQ,B004Y9D90Q,B003S516XO,B002XQ1YTK,B003V265QW,B00121UVU0,B004EDYQUE,B000P22TIY,B000E7WHLY](http://my-domain.com/run.php?f=getItemsById&arg=id:B0043OYFKU,B001JKTTVQ,B004Y9D90Q,B003S516XO,B002XQ1YTK,B003V265QW,B00121UVU0,B004EDYQUE,B000P22TIY,B000E7WHLY)

如您所见，我在 url 的“f”参数中传递函数名称。

run.php 文件如下所示：

```
require_once('amazon.php');

$function_name = $_REQUEST['f'];
$arg_parameter = $_REQUEST['arg'];

$arg_tmp = explode(";", $arg_parameter);
$arg_array = array();
foreach($arg_tmp as $key_value_pair){
    $exploded = explode(':', $key_value_pair);
    $key = $exploded[0];
    $value = $exploded[1];
    $arg_array[$key] = $value;
}

$amazon = new amazon();
echo $amazon->$function_name($arg_array); 
```

如您所见，该文件只是从 amazon.php 调用一个函数并回显结果，因此我可以在 ajax 函数的回调中使用它。

以下是 amazon.php 中有关该`getItemsById()`功能的相关代码：

```
class amazon {

    private $url;
    private $accessKey = 'AKIAISJ2OHTBA888311SD';
    private $secretAccessKey = 'RM8EG61w3dLwjymtAEVdfsdiesd883711lskdf';

    function __construct(){
        $this->url = 'http://webservices.amazon.com/onca/xml?Service=AWSECommerceService&AWSAccessKeyId=' . $this->accessKey . '&AssociateTag=global-18&Version=2011-08-01';
    }

    public function getItemsById($args = array()){

        $itemIds = $args['id'];

        $url = $this->url;
        $url .= '&Operation=ItemLookup';
        $url .= '&ItemId=' . $itemIds;
        $url .= '&ResponseGroup=Images,Small,Offers,VariationSummary,EditorialReview';

        $signedUrl = $this->amazonSign($url, $this->secretAccessKey);
        $returned_xml = file_get_contents($signedUrl);
        return $returned_xml;

    }
} 
```

正如您在上面看到的，此函数正在调用 amazon.com 的 API 的 URL，并使用 PHP 的`file_get_contents()`函数返回 XML。我的问题是对 run.php 进行的一些 ajax 调用已成功执行，而另一些则得到 HTTP 500 内部服务器错误。当我在本地服务器上运行它时，它工作正常。当我在办公室的开发服务器上运行它时，它运行良好。但是，我一直在我的 Webhostingpad 服务器上看到这个问题。一些 ajax 调用返回 HTTP 500 错误。

我已经与 Webhostingpad 支持人员交谈过，他们提供给我的唯一见解是我超出了我的 CPU/内存资源限制。服务器的错误日志似乎证实了这一点：

> [2013 年 2 月 19 日星期二 21:36:39] [错误] [客户端 68.174.126.115] (12) 无法分配内存：无法为 /home/my-server/ 创建子进程：/opt/suphp/sbin/suphp public_html/my-domain.com/run.php，引用者：http: [//my-domain.com/](http://my-domain.com/)

我对社区的问题是，这里是否有明显的记忆密集型？我觉得我正在做的事情并没有那么出格，所以我试图弄清楚我是否应该专注于优化我的脚本，或者我是否应该只是寻找另一个托管服务提供商。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:39:33.123

如果不能选择同步执行 AJAX 请求，您仍然可以对 PHP 脚本的内存消耗做一些事情。目前，PHP 脚本在将亚马逊返回的整个 XML 回显到客户端之前，会将其存储在内存中。如果 XML 很大并且您同时执行 8 次，那么内存不足并不奇怪。

一种解决方案是使用 cURL 向亚马逊发出请求，并使用 cURL 选项 CURLOPT_WRITEFUNCTION 将结果回显给客户端。这样，您可以使 amazon.php 脚本将结果 XML 流式传输到客户端，并且它不会使用太多内存。

示例 amazon.php 代码：

```
<?
function writeCallback($handle, $data)
{
    echo $data;    
    ob_flush();
    flush();
    return strlen($data);
}

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'http://webservices.amazon.com/onca/xml');
curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'writeCallback');

ob_start(); // start output buffer
curl_exec($ch); // commence streaming 
```

# android - Android facebook 请求未显示为通知

> ID：14972065
> 
> 赞同：3
> 
> 时间：2013-02-20T03:59:25.107
> 
> 标签：android, facebook-requests

我已将 FacebookSDK 集成到我的 Android 应用程序中，我想在我的 Android 应用程序上执行邀请操作。

我尝试按照以下两个链接让我的应用程序通过 facebook 成功登录，并将应用程序请求发送给我的朋友，并在发送前提供预览：

[https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/) [https://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/)

但是，对于 facebook 移动和桌面网站等其他平台，不会显示通知。通知仅在 Android 版 Facebook 上显示。

在Desktop网站上查看应用请求，看不到以下代码传递的消息：

```
params.putString("message", "Let us watch \""+node.getString("movieName")+"\" together"); 
```

仅显示“某人”邀请您尝试“myApp”。

除了文档上的代码之外，是否应添加任何代码以启用在所有平台上显示的消息和通知。

非常感谢。

# window - 将应用程序中所有窗口的 F lowDirection 设置为 RightToLeft

> ID：14972074
> 
> 赞同：2
> 
> 时间：2013-02-20T04:00:34.770
> 
> 标签：window, flow

我正在尝试将`FlowDirection`应用程序将生成的所有窗口中的`RightToLeft`. 我尝试了以下

```
Window.FlowDirectionProperty.OverrideMetadata(
                typeof(Window),
                new FrameworkPropertyMetadata(CultureInfo.CurrentUICulture.TextInfo.IsRightToLeft
                                              ? FlowDirection.RightToLeft : FlowDirection.LeftToRight)); 
```

在初始化任何 Window 类之前，我正在这样做。

但是有了这个，`TypeInitializerException`每当我初始化一个 Window 类时，我都会得到。

> System.TypeInitializationException：“System.Windows.Window”的类型初始化程序引发了异常。---> System.ArgumentException：PropertyMetadata 已为“Window”类型注册。

关于我做错了什么或如何更改代码以使其正常工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T12:58:11.703

尝试`static FlowDirection`为您的应用设置属性

```
static property Windows::UI::Xaml::FlowDirection FlowDirection{ 
Windows::UI::Xaml::FlowDirection get() ; }; 
```

然后在应用程序页面的构造函数中调用下一行：

```
this->FlowDirection = App::FlowDirection; 
```

# spring-batch - 如何在 Itemreader 类中添加 sql 查询

> ID：14972081
> 
> 赞同：1
> 
> 时间：2013-02-20T04:01:10.667
> 
> 标签：spring-batch

我想在我的阅读器类中使用 sql 静态查询。但是查询很大，因此不会添加到 xml 文件中。那么如何在阅读器类中编写多个查询？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:56:31.537

又快又脏；只需扩展 JdbcCursorItemReader 并从那里设置 sql：

```
public class StaticSqlJdbcCursorItemReader extends JdbcCursorItemReader {
    //extend your reader
  public static final STATIC_SQL = "select * from ..." 

  public StaticSqlJdbcCursorItemReader() {
        setSql(STATIC_SQL);
    }

} 
```

# c - 编程时记笔记？

> ID：14972082
> 
> 赞同：0
> 
> 时间：2013-02-20T04:01:10.940
> 
> 标签：c

我刚拿到我的第一本编程书，我刚刚开始编程。我有一个小问题。我应该边看书边记笔记，还是应该只记住，如果我忘记了什么再回来参考？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T04:22:34.370

1.  永远不要只阅读一本书，阅读有关该主题的多本书以获得更好的画面。

    *   对于 C 阅读 The C Programming Language, How To Program - C, C: A complete reference 然后 C 参考手册（Harbison 和 Steele 撰写）至少涉及 C99
2.  做笔记，随时随身携带一本书——尽管在你着墨之前要三思。

3.  始终坐在计算机 + 文本编辑器 + 编译器旁（是的，不要使用 IDE - 通过手动编译来学习）

4.  学习良好的调试技术，`gdb`一开始就很好（尽管有很长的学习曲线）

5.  注意书中所说的 - 也不要忘记一直进行实验。最好通过做/实践来学习编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:16:47.437

最好的办法是理解这本书对你说的内容，我以前试过记住..它不起作用我建议两者都用，但主要是这样理解，你就会知道你在做什么正在编码也练习你编码的信心水平会增加，你会继续想要编码更多。

# c# - 函数定义，C 到 .NET

> ID：14972084
> 
> 赞同：0
> 
> 时间：2013-02-20T04:01:14.420
> 
> 标签：c#, .net, c, dll

我有一些已转换为 DLL 的 C 代码。我需要从 C# 程序调用 DLL。我收到错误*“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”*

所以，我相信我没有正确转换我的函数原型，这会导致内存泄漏。

C中的函数原型是

```
int __stdcall karacell_bridge( int argumentCount, char **argContent) 
```

这是 C# DLL 调用中函数原型的正确转换吗？

```
[DllImport("KaracellLib.dll", EntryPoint = "karacell_bridge@8", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi, ExactSpelling = true)]
public static extern int karacell_bridge(int argumentCount, [In, Out]string[] argContent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:53:13.983

不，您需要整理第二个参数。我不确定是否有一种安全的 PInvoke 方法来编组可修改的字符串数组；这里似乎会有很多失败模式。也许您可以尝试将字符串数组转换为`char *`.

# javascript - 可以存储id的标签编辑器

> ID：14972089
> 
> 赞同：0
> 
> 时间：2013-02-20T04:02:19.800
> 
> 标签：javascript, jquery, jquery-plugins

寻找可以在隐藏字段中存储标签 ID 的标签编辑器自动完成插件。

所需功能：

*   显示标签、商店 ID
*   多个标签
*   通过 ajax 实现远程数据源
*   在标签点击事件上

尝试[标记它，](http://aehlke.github.com/tag-it/)但无法使其存储 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:52:03.460

试试这个。它有你需要的一切：

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

特征

*   用于从大列表中选择多个项目的直观 UI
*   易于皮肤/样式纯粹在 css 中，不需要图像
*   支持任何可以生成 JSON 的后端，包括 PHP、Rails、Django、ASP.net
*   加载结果时的平滑动画
*   使用鼠标或键盘选择、删除和导航项目
*   客户端结果缓存以减少服务器负载
*   通过 JSONP 支持跨域
*   在列表中添加或删除项目时的回调
*   使用 onResult 回调预处理来自服务器的结果
*   以编程方式添加、删除、清除和获取令牌
*   自定义结果和标记的输出格式

# java - 使用无状态会话 Bean 和不使用无状态会话 Bean 实现 Web 服务的区别

> ID：14972092
> 
> 赞同：2
> 
> 时间：2013-02-20T04:02:50.690
> 
> 标签：java, web-services

我正在尝试学习如何使用 Web 服务。我一直在阅读[这个链接](http://netbeans.org/kb/docs/websvc/jax-ws.html)，但我不明白实现和不实现 Web 服务作为无状态会话 Bean 之间的区别

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T04:13:23.353

[`@Stateless`](http://docs.oracle.com/javaee/6/api/javax/ejb/Stateless.html)注释将 POJO 转换为EJB [，](http://www.oracle.com/technetwork/java/javaee/ejb/index.html)并提供所有[EJB 功能](http://docs.oracle.com/javaee/6/tutorial/doc/bnblr.html)。

最大的区别在于 EJB 运行在诸如 GlassFish 或 JBoss 之类的全功能 Java EE 5+ Web 应用程序服务器中，使其无法在 Tomcat 或 Jetty 之类的 Servlet 容器中使用。

更多信息：

*   [应用程序服务器和 servlet 容器之间的区别？](https://stackoverflow.com/q/5039354/1065197)
*   [Web 服务器与 Servlet 容器与应用程序服务器](http://www.ecomputercoach.com/index.php/component/content/article/68-servers/72-web-server-vs-servlet-container-vs-application-server.html)

# c - argv[1] 的分段错误

> ID：14972095
> 
> 赞同：-1
> 
> 时间：2013-02-20T04:03:06.967
> 
> 标签：c, segmentation-fault

所以我有一个程序，它接受用户的命令行参数并使用 atoi 将其转换为数字。一切正常，直到从命令行传递的数字超过 2048。

这是一个简单的程序：

```
 int no_of_elements_per_thread = 0; 

 int main(int argc, char* argv[])
 {  
   int status;
   void* thread_arg;    
   void* res;   
   int i = 0;

//initialize
   no_of_elements_per_thread = atoi(argv[1]);
 return 0;
} 
```

当我为不同的值运行程序时，输出如下：

```
 [adeb1][open-19][~/pre2] ./pre2 2098
   Segmentation fault 
```

具有较小的值：

```
[adeb1][open-19][~/pre2] ./pre2 210

[adeb1][open-19][~/pre2] 
```

有趣的是，如果我尝试使用 %s 而不使用 atoi 来执行 printf，我仍然会遇到 argv[1] 的分段错误。因此，似乎 argv[1] 的值高于 2048 时出现问题。

如果这很重要，我在 linux 中使用 gcc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:08:17.683

你的声明在哪里`atoi`？没有`#include <stdlib.h>`，我会假设没有。

您可能还需要确保`argc > 1`在使用 argv[1] 之前。

# scala - 如何跳过 specs2 中的“应该”块/片段？

> ID：14972101
> 
> 赞同：7
> 
> 时间：2013-02-20T04:03:47.787
> 
> 标签：scala, specs2

假设我有一个以“单元”样式定义的 specs2 规范，如下所示：

```
import org.specs2.mutable

class MyClassSpec extends mutable.Specification {
  "myMethod" should {
    "return positive values" in {
      MyClass.myMethod must beGreaterThan(0)
    }

    "return values less than 100" in {
      MyClass.myMethod must beLessThan(100)
    }
  }
} 
```

是否有一种简单的方法可以跳过/禁用/标记等待中的所有示例 should block/fragment for `myMethod`？

显然，我可以从块中的每个单独的示例调用`pendingUntilFixed`或返回`pending`，但是对于具有许多规范的块来说，这将是相当乏味的。

`MyClass.myMethod`如果难以实施并受到打击，这似乎是一种常见的情况。在specs2中是否有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:56:24.443

您可以混合`Tags`特征并定义任何`section`您想要的：

```
import org.specs2.mutable._

class MyClassSpec extends Specification with Tags {

  section("pending")
  "myMethod" should {
    "return positive values" in {
      MyClass.myMethod must beGreaterThan(0)
    }

    "return values less than 100" in {
      MyClass.myMethod must beLessThan(100)
    }
  }
  section("pending")
} 
```

然后你运行你的规范`exclude pending`

```
>test-only *MyClassSpec* -- exclude pending 
```

这[在此处](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#In+a+unit+specification)记录。

您还可以使用隐式上下文来确保`should`块中的所有示例都是`PendingUntilFixed`：

```
import org.specs2._
import execute._

class MyClassSpec extends mutable.Specification { 
  "this doesn't work for now" >> {
    implicit val puf = pendingContext("FIXME")
    "ex1" in ko
    "ex2" in ok
  }
  "but this works ok" >> {
    "ex3" in ko // maybe not here ;-)
    "ex4" in ok
  }

  def pendingContext(reason: String) = new mutable.Around {
    def around[T <% Result](t: =>T) = 
      t.pendingUntilFixed(reason)
  }
} 
```

***specs2 3.x 的更新***

```
import org.specs2._
import execute._

class TestMutableSpec extends mutable.Specification {
  "this doesn't work for now" >> {
    implicit def context[T] = pendingContext[T]("FIXME")

    "ex1" in ko
    "ex2" in ok
  }
  "but this works ok" >> {
    "ex3" in ko // maybe not here ;-)
    "ex4" in ok
  }

   def pendingContext[T](reason: String): AsResult[MatchResult[T]] =     
     new AsResult[MatchResult[T]] {
      def asResult(t: =>MatchResult[T]): Result =
        AsResult(t).pendingUntilFixed(reason)
     }
} 
```

# php - 使用 php 突出显示非常大的文件之间的差异

> ID：14972103
> 
> 赞同：0
> 
> 时间：2013-02-20T04:04:05.250
> 
> 标签：php, javascript, html, plugins, winmerge

我想编写一个 Web 界面来显示两个非常大的文件之间的差异。我通常使用 winmerge，但这意味着我需要登录到服务器复制文件然后比较它们。我喜欢的步骤太多了。我想编写一个基本上做同样事情的网络界面。有谁知道那里有一个很好的可靠的 php 库来做这样的事情？请记住，此文件有 20k 行长，因此它需要可靠，而不需要超快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:06:06.897

使用系统命令`diff`，然后解析结果。格式是规则的，很容易弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:19:08.040

添加到 Amadan 的想法：

创建一个带有两个`file`输入字段的 HTML 表单并使用以下内容：

```
echo exec('diff ' . $_FILES['file1']['tmp_name'] . ' ' . $_FILES['file2']['tmp_name']); 
```

# deployment - 部署后更改 web.xml

> ID：14972104
> 
> 赞同：4
> 
> 时间：2013-02-20T04:04:14.900
> 
> 标签：deployment, war, web.xml, rebuild, redeploy

部署后是否建议在应用服务器中更改 web.xml（或者实际上是任何其他文件）？是否所有应用服务器都公开了它们的部署/目录结构？

我宁愿在本地进行更改，重新构建战争（或 .ear 等），然后重新部署应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:24:08.143

关于您的第一个问题，这取决于资源的类型。对于类路径资源，您可以覆盖在应用程序服务器的类加载机制中具有更高优先级的任何目录中的文件（例如，如果您使用的是 Tomcat，则为 $CATALINA_HOME/lib）。对于 xml 文件，如 web.xml，您可以在打包文件中声明一个具有绝对路径的外部实体，但您必须确保该文件将出现在目标服务器上。例如，您打包的 web.xml 可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document [
<!ENTITY webEntity SYSTEM 'C:\Temp\web.xml'>
]>
&webEntity; 
```

因此，web.xml 的实际内容将是文件 C:\Temp\web.xml 的内容。

简而言之，没有官方的方法可以做到这一点，但有技巧。我想，人们所做的就是为每个生产站点制作一个定制包。有多种方法可以使用 Maven 自动执行此操作，例如战争覆盖或分类器。这是[一个有趣的链接](http://www.jayway.com/2010/01/21/one-artifact-with-multiple-configurations-in-maven/)。

关于你的第二个问题，我不会依赖这个假设。在 Tomcat 服务器上修改爆炸的资源非常简单，但在 JBoss AS 上却不是那么简单。

# node.js - 如何处理 Node.js 中的“读取 ETIMEDOUT”？

> ID：14972106
> 
> 赞同：2
> 
> 时间：2013-02-20T04:04:17.573
> 
> 标签：node.js, networking, proxy, real-time, publish-subscribe

我有一个使用 Node.js 将数据从一个客户端传输到另一个客户端的发布/订阅模型。此外，服务器还记录接收到的所有内容并将其发送给新客户端。

但是，某些数据在传输时损坏，并且出现如下错误：

```
Error with socket!
{ [Error: write EPIPE] code: 'EPIPE', errno: 'EPIPE', syscall: 'write' }
Error with socket!
{ [Error: read ETIMEDOUT] code: 'ETIMEDOUT', errno: 'ETIMEDOUT', syscall: 'read' } 
```

我不知道如何正确处理这些错误。客户端好像挂了。

由于服务器只是像服务器一样的代理，它并不真正知道数据是什么意思。在遇到这些错误之前，我不知道如何验证每个数据包。

这是我的代码：

```
// server is an object inheriting from net.Server
server.on('listening', function() {
    var port = server.address().port;
}).on('connection', function(cli) {
    cli.socketBuf = new Buffers();
    cli.commandStarted = false;
    cli.dataSize = 0;
    cli.setKeepAlive(true, 10*1000);
    cli.setNoDelay(true);
    cli.on('connect', function() {
        server.clients.push(cli);
    }).on('close', function() {
        var index = server.clients.indexOf(cli);
        server.clients.splice(index, 1);
    }).on('data', function (buf) {
        server.emit('data', cli, buf);
        if(op.autoBroadcast) {
            _.each(server.clients, function(c) {
                if(c != cli) c.write(buf);
            });
        }
    }).on('error', function(err) {
        console.log('Error with socket!');
        console.log(err);
    });
}).on('error', function(err) {
    console.log('Error with server!');
    console.log(err);
});

// ...

// room.dataSocket is an instance of server beyond
room.dataSocket.on('data', function(cli, d) {
    // bf is a buffered file
    bf.append(d);
    room.dataFileSize += d.length;

}).on('connection', function(con){
    bf.readAll(function(da) {
        con.write(da);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:36:51.863

如果您在写入时收到 EPIPE 或任何错误，则表明对等方已关闭或连接已断开。所以你必须在那个时候关闭连接。

如果您收到读取超时，则推断是您设置了不切实际的短超时，或者对等方未能及时交付：在第二种情况下，您应该再次假设连接已关闭，然后关闭它。

# binary - 计算机如何存储小数点值？

> ID：14972107
> 
> 赞同：3
> 
> 时间：2013-02-20T04:04:25.303
> 
> 标签：binary, hex, computer-science, computer-architecture

我有几个问题：

1.  计算机只使用 1 和 0 来表示数字。那么它如何表示5.512这样的小数点。

2.  计算机不知道我们输入的是 ASCII 值还是只是一个随机二进制文件来处理。在早期，人们习惯于使用十六进制和二进制进行编程。他们将如何在屏幕上输出一个字符。除此之外，计算机如何理解 65（十进制）不是数字而是大写 A？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T04:07:49.360

对于您的第一点，请参阅[IEEE754-1985 Wikipedia 页面](http://en.wikipedia.org/wiki/IEEE_754-1985)了解一种方法（可能是最常见的）。

对于第二点，您需要意识到值与该值的表示之间存在脱节。一个值可以以一种方式存储并以多种不同的方式进行解释。

例如，八位字节`0x30, 0x31`可以表示为`0x3031`big-endian 16 位值、`0x3130`little-endian 或`'0', '1'`ASCII 字符序列中的值。如果将其视为 EBCDIC 或定点值，那将是另一回事。

这一切都取决于您如何*解释*数据。

# c++ - 初学者的错误

> ID：14972114
> 
> 赞同：0
> 
> 时间：2013-02-20T04:05:32.707
> 
> 标签：c++

我知道这可能是一个愚蠢的问题，但我是初学者，我今天才开始学习。我正在使用 Dev C++，并编写了我的第一个代码：

```
#include <iostream>
using namespace std;
int main()
{
    cout << "Hello World" ;
    return 0;
} 
```

我点击编译运行。什么都没有出现。然后我点击“运行”，它说它还没有编译。

我认为可能存在错误，我很乐意自己修复它们，但我不知道在哪里可以看到 Dev C++ 中的错误。

这可能是编译器错误还是我在代码中弄乱了一些东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:07:34.603

您的程序很可能在将所有内容写入控制台之前就退出了。尝试在输出中添加新行，如下所示：

```
cout << "Hello World" << endl; 
```

当您写入时`cout`，出于效率考虑，数据不会立即传输到屏幕。写入屏幕相对较慢，因此程序更喜欢“突发”。文本被累积在*缓冲区*中，直到给出一个特殊的命令来*刷新*缓冲区，或者缓冲区被填满。写出会`endl`强制刷新，因此输出将在程序退出之前出现在屏幕上。

# python - 计算列表中的因素？

> ID：14972117
> 
> 赞同：0
> 
> 时间：2013-02-20T04:05:53.560
> 
> 标签：python, list, count

好的，所以我创建了一个名为 numbersList 的列表，变量 number = 20，count = 0，spot = 0。

```
numbersList = range(1, 11)
number = 20
count = 0
spot = 0. 
```

我想计算列表中进入 20 的数字。我试过这个：

```
while spot <= len(numbersList):
    if(number % int(numbersList[spot]) == 0):
        count = count + 1
    spot = spot + 1
print count 
```

但它一直说列表索引超出范围。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:08:44.967

您的索引在循环的最后一次迭代中走得太远`while`。更改`<=`为`<`，它应该可以工作：

```
while spot < len(numbersList): 
```

或者只是使用一个`for`循环：

```
for i in numbersList:
    if number % i == 0:
        count += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:08:39.720

您不能使用浮点数索引到列表中，并且 spot = 0\. 是浮点数。尝试删除那个虚假的时期！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T04:09:42.187

第一行是一个 SyntaxError

```
>>> when spot <= len(numbersList):
  File "<stdin>", line 1
    when spot <= len(numbersList): 
```

我怀疑你的意思是使用`while`

但是使用 for 循环更容易

```
for spot in numbersList:
    if number % spot == 0:
        count += 1
print count 
```

这也可以通过将生成器表达式传递给 sum 来更简单地编写

```
count = sum(number % spot == 0 for spot in numbersList) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T04:24:03.880

我更喜欢经典的*map-reduce*

```
 reduce( lambda x,y: x+y, [ number%spot for spot in numbersList ] ) 
```

# android - 如何在 Linphone Android 中启用 G729

> ID：14972124
> 
> 赞同：4
> 
> 时间：2013-02-20T04:06:19.423
> 
> 标签：android, linphone

我按照链接中的指南进行操作： [G729 codec for Linphone Android](https://stackoverflow.com/questions/13005067/g729-codec-for-linphone-android)

并将 .SO 文件添加到 libs 目录。

我们可以在实际设备上构建 Android 应用程序，并在设置屏幕中看到 G729 设置。

但是当我们禁用除 G729 之外的所有音频编解码器时，我们就无法再拨打电话了。

您能帮我构建 G729 并将其集成到 Linphone Android 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-09T11:01:03.027

[首先从这里](https://github.com/BelledonneCommunications/linphone-android)下载 Linphone 的最新源代码。

之后转到项目顶级目录并执行以下命令：

```
./prepare.py -DENABLE_NON_FREE_CODECS=ON -DENABLE_G729=ON 
```

默认情况下，所有非免费编解码器都被禁用。

使用上述命令，您可以启用非免费编解码器。`-DENABLE_NON_FREE_CODECS=ON`参数启用非免费编解码器和`-DENABLE_G729=ON`参数启用 G729 编解码器。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:30:21.040

在 linphone 中，我们已经阅读了我的文件，并且在我们构建项目时他们提供了选项。您需要将 g729 的选项设为 1 并构建项目。

希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T08:01:56.290

这里有两点需要了解：首先，SIP 服务器应该启用 G729，其次，您需要在两端（接收方和呼叫方）的应用程序中启用 G729。

要使用 G729 构建 linphone，请执行以下命令：

`make BUILD_G729=1`

# c# - 从 wp7 中的 Webbrowser 控件中删除 Cookie

> ID：14972125
> 
> 赞同：1
> 
> 时间：2013-02-20T04:06:20.230
> 
> 标签：c#, windows-phone-7, c#-4.0, c#-3.0, webbrowser-control

我在使用 facebook 和 google 注销时遇到问题。我的场景是当用户第一次使用 facebook 或 google 登录特定站点时。（使用 clint api，它将重定向到他们自己的网络浏览器）。然后它将显示登录页面。成功注销后，如果再次使用 facebook 或 google 登录，我尝试它没有显示登录页面，它直接显示登录成功消息。（因为 webbrowser 历史记录已经存在，我无法删除历史记录）所以在这种情况下，多个用户无法使用 facebook 或 google 登录。

有人知道吗？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:30:51.570

尝试找出是否有用于注销用户的 OAuth 或 API url，例如

```
m.facebook.com/logout.php?confirm=1&next=(url encoded login page) 
```

将用户导航到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:22:44.290

在 WP7 上，您必须使用`InvokeScript`javascript 来注销和/或摆脱 FB 和 Google 等不同服务所需的 cookie。Fiddler 就派上用场了。

如果我没记错的话，对于谷歌，你必须注意特定的 URL 并取消导航，运行`InvokeScript`并继续导航。

我参与了一个访问不同提供商的项目，这是我们能够开始工作的解决方案。

在 WP8 上有一种清除 cookie 的方法。

# matlab - 没有统计工具箱的引导计算

> ID：14972127
> 
> 赞同：-1
> 
> 时间：2013-02-20T04:06:26.337
> 
> 标签：matlab, statistics

我正在尝试在 MATLAB 中使用引导技术而不使用统计工具箱。

我的数据集是一个 2 x 50 矩阵，第 1 列是月份，第 2 列是沉淀。价值观。我使用这个脚本计算了平均值、标准偏差和偏度系数：

```
yr = x(:,1);
p = x(:,2);
x_hat = mean(p);
sd = p-x_hat;
s = sqrt((1/(n-1)) .* (sum((sd).^2)));
skew = ((1/(n-1)) .* (sum((sd).^3))/(s.^3)); 
```

我需要b）循环我想要的引导计算数量（10000），并使用那个循环k，

c) 从原始数据中随机选择 N 个值的子集（建议使用随机数生成器乘以 N，然后四舍五入得到一个整数）。

一旦我有 N, d) 我将为每个 k 计算（并存储）所需的统计数据，

e) 将存储的向量从低到高排序，

f) 然后找到截断最低 0.025 和最高 0.025 的值。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:53:39.367

这归结为从中抽取随机样本`[1, N]`，其中 N 是每次试验所需的样本数。然后，您可以使用 k 个不同的排列直接索引数据矩阵的列。示例（样本 = 50，试验 = 1000，子集 = 40）：

```
x = randn(2, 50); % example data matrix
N = 50; nTrials = 1000; nSamples = 40; 
```

要生成不重复的样本或*不替换的采样*，您可以使用调用[randperm](http://www.mathworks.com/help/matlab/ref/randperm.html)`rand`。

```
for k = 1:nTrials
  indexSample(:,k) = randperm(N, nSamples);      
end 
```

如果您想要*带替换的采样*（即引导程序），请将调用替换为`randperm`：

```
indexSample(:,k) = round(N*rand(nSamples, 1)) 
```

并相应地增加 nSamples。

每个试验的数据样本集（例如 k = 1），然后是：

```
xk = x(:, indexSample(:,k)) % sample data for trial k 
```

# box2d - 通过窗口调整大小改变世界边界

> ID：14972131
> 
> 赞同：0
> 
> 时间：2013-02-20T04:07:12.860
> 
> 标签：box2d, easeljs, box2dweb

我是 Box2D 的新手，正在使用 EaselJS 和 Box2DWeb 进行第一个项目。我希望拥有标准的静态形状，包括世界的墙壁和地板，以便在调整大小时与浏览器窗口一起移动/更新。我正在使用 SetPosition 来完成它，每次执行 Easel 的 tick 方法都会调用它——它几乎可以工作了。当浏览器变大时，一切都按预期工作 - 地板降低，动态对象相应下降。

然而，当浏览器变小时，场景中的物体似乎经常会穿过静态地板体并消失。似乎只有在调整大小足以导致相关动态主体短暂下降到窗口视图之外（例如，在降低高度时完全低于浏览器窗格）时才会发生。但是，如果我相当缓慢地调整浏览器的大小......奇怪的是它可以工作。

我想不出任何好的解决方案来解决我的问题，而且我没有任何运气在网络上找到该行为的示例。可以做到吗？非常感谢任何帮助。

**李：**

绝对 - 非常感谢您的回复。这是一个backbone.js 项目。这个例子可以在这里看到：

[http://kensonger.com/b2dweb/](http://kensonger.com/b2dweb/)

基本的窗口调整大小监听器位于文件底部：

/b2dweb/js/routers/Main.js

...它引用了 app.box2d。这是这里的主干视图：

/b2dweb/js/views/Box2DView.js

'onStageResize' 方法是定位世界边界。此类底部的更新方法通过 /b2dweb/js/routers/Main.js 中的 tick 方法调用 45/sec。

整个工作的一个拉链被压缩在这里：

[http://kensonger.com/b2dweb/box2d_experiment.zip](http://kensonger.com/b2dweb/box2d_experiment.zip)

如果您快速向上调整浏览器窗格的大小，然后再快速向下调整，您可以看到 box2d/画架对象穿过地板。如果您不向下调整大小，则对象只会掉下来并消失。但是，如果您这样做，地板会再次穿过并接住掉落的物体。

再次感谢一百万的任何见解 - 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:37:04.473

好吧，嘿，看起来我现在才刚刚开始工作 - 我让每个世界边界都相当于 1000 像素厚，并且对于每个元素，我在实例化时调用 SetActive(true)。我还没有确定是哪一个改变起到了作用，但我认为是那个 SetActive 调用。

[http://kensonger.com/b2dweb/](http://kensonger.com/b2dweb/)

如果有人知道更好的解决方案，请随时发布，我会尝试...

# vb.net - 图书馆未注册

> ID：14972136
> 
> 赞同：2
> 
> 时间：2013-02-20T04:07:53.017
> 
> 标签：vb.net

我收到了这个错误：

> ```
>  Warning  1   Cannot get the file path for type library
>  "a5ededf4-2bbc-45f3-822b-e60c278a1a79" version 12.0\. Library not
>  registered. (Exception from HRESULT: 0x8002801D
>  (TYPE_E_LIBNOTREGISTERED))   OCRMongo 
> ```

在 vb.net

[我按照http://www.techrepublic.com/forum/questions/101-345154/how-do-i-install-microsoft-modi-110](http://www.techrepublic.com/forum/questions/101-345154/how-do-i-install-microsoft-modi-110)的指示

我仍然得到那个警告。有什么问题？

# build-automation - TFS 2012 CI 不运行预定的构建

> ID：14972145
> 
> 赞同：2
> 
> 时间：2013-02-20T04:08:54.637
> 
> 标签：build-automation

我已经设置了构建定义以按计划触发构建。此构建在手动运行时运行，但不是在计划时运行。

我检查了 TFS 服务器上的日期时间等，也没有构建服务器。谁能帮我理解：

1.  TFS 计划的构建如何获取？SQL 代理或服务。

2.  如果计划不运行，它会在哪里记录错误？

3.  运行计划的构建需要注意哪些事项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:23:19.423

您是否选中了“即使没有任何变化也构建...”复选框？

> TFS 计划的构建如何获取？SQL 代理或服务。

构建将由构建控制器拾取。连接到您的 tfs 帐户并前往 Web 访问 UI 中的构建节点。在这里你应该看到你的构建定义。您可以在此处查看所有触发的构建。

> 如果计划不运行，它会在哪里记录错误？

日志与上面的构建相关联

> 运行计划的构建需要注意哪些事项？

这就像任何其他构建定义一样，只是带有时间触发器。

# php - PHP / MYSQL 中的 MySQL 连接和 ORDER BY

> ID：14972146
> 
> 赞同：0
> 
> 时间：2013-02-20T04:08:54.913
> 
> 标签：php, mysql

我有一个看起来像这样的数据库，有两个表

```
项目
编号 | 标题
-----------------------------------------
1 路公交车
2 平面
3 喷气机
4 鞋
5 椅子

```

```
排序
编号 | 猫号 | 物品编号 | 排序
-------------------------------------------------- -----------------------------------------
1 3 3 3                 
2 3 2 1
3 3 4 2
4 3 1 0
5 4 5 4

```

我不知道如何根据排序表的“排序**顺序**”列列出**项目**表的标题。

 **这是我到目前为止所尝试的：

```
 SELECT * 
     FROM Items
LEFT JOIN Sorting ON Items.id = Sorting.ItemID 
    WHERE Sorting.CatID = 3 
 ORDER BY Sorting.SortOrder 
```

我不确定我做错了什么

**编辑**

看起来 MySQL 查询是正确的，问题正在发生，因为当我输出 Items Table 的 $row['id'] 时它不正确。我有一个 Ajax PHP 更新，它根据 li 标签的 id 更新数据库。

任何想法为什么 $row['id'] 输出不正确？我认为这与**Items.id = Sorting.ItemID有关**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:22:25.917

这按预期工作 - [SQLFiddle DEMO](http://www.sqlfiddle.com/#!2/41f00/1)：

```
SELECT i.*, s.SortOrder
FROM items i, sorting s
WHERE i.id = s.ItemID 
  AND s.CatID = 3 
ORDER BY s.SortOrder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:13:28.670

尝试

```
SELECT * 
     FROM Items
LEFT JOIN Sorting ON Items.id = Sorting.ItemID 
    WHERE Sorting.CatID = 3 
 ORDER BY Sorting.SortOrder ASC
```

添加`DESC`或`ASC`在`ORDER BY`子句中。

如果您使用`ASC`，则排序结果`0 1 2 3 4`将为`SortOrder`.

**获取标题的示例 php 代码**

```
<?php
    $query  = mysqli_query(above_query)or die(mysqli_error());
    while($result = mysqli_fetch_assoc($query))
    {
           echo $result['title']. '<br/>';
    } 
```**

# matlab - 数字大于 7 位的 CSVwrite

> ID：14972147
> 
> 赞同：6
> 
> 时间：2013-02-20T04:08:57.870
> 
> 标签：matlab, csv, export-to-csv

因此，我有一个文件旨在解析一个相当大的 csv 文件以清除少数数据点。下面列出了文件中的三个值（超过 400,000 个）：

```
Vehicle_ID  Frame_ID    Tot_Frames  Epoch_ms    Local_X
2           29          1707        1163033200  8.695
2           30          1707        1163033300  7.957
2           31          1707        1163033400  7.335 
```

我在这里要做的是获取以前过滤过的数据点，并使用 csvwrite 将其插入另一个 csv 文件。但是，csvread 只会接受双精度的 Epoch_ms，将值存储为 1.1630e+09，这足以读取，因为它确实保留了用于 MATLAB 操作的数字的原始值。

但是，在 csvwrite 期间，该精度会丢失，并且每个数据点都写入为 1.1630e9。

如何让 csvwrite 更精确地处理数字？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T04:19:16.853

使用带有精度参数的[dlmwrite](http://www.mathworks.com/help/matlab/ref/dlmwrite.html)，例如`%i`. 默认分隔符是逗号，就像 CSV 文件一样。

```
dlmwrite(filename, data, 'precision', '%i') 
```

# php - 清理目录路径名 php

> ID：14972151
> 
> 赞同：1
> 
> 时间：2013-02-20T04:09:47.770
> 
> 标签：php, file, path

基本上我想做的是：

```
include($_SERVER['REQUEST_URI']); 
```

问题是，这是不安全的。
如果它指向`"/allowed/directory/"`或它的子目录，那将是安全的。
所以我用startsWith（“/allowed/directory/”）测试它。

但是我仍然害怕这样的事情：

```
"allowed/directory/../../bad/directory" 
```

有没有办法检查一个字符串是否指向一个特定的目录或它
在 php 中的一个子目录？

（基本上应用所有 /../ - 还是我错过了另一个安全漏洞？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:32:00.430

PHP 函数`realpath()`应该从路径中删除 ../ ///。

虽然你是对的，但这可能是一个相当危险的操作。IMO 路径应限制为一组已知的字符（如“a-zA-Z_”和 / ）。此外，路径字符串应限制为已知大小（如 256 个字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:22:36.070

一旦你确定前缀是正确的，你可以像这样使用 preg_match ：

```
if(preg_match("#^[A-Za-z0-9/]+#", $string) {
    // correct
}
else {
    // incorrect
} 
```

您正在检查的可变部分（非静态部分）通常希望只是字母数字。

只要您使用`include`包含本地 PHP 文件并正确验证您的输入（保持输入简单），您*应该*没问题。只是要非常小心并彻底测试。您通常希望避免将用户输入传递给敏感函数，例如`include`. 但是对于框架，有时很难避免这种情况。

您可以做的另一件事是拥有一个有效输入列表来进行精确比较。[您可以将它放在一个 ini 文件中并使用parse_ini_file](http://php.net/manual/en/function.parse-ini-file.php)加载它。这通常是最安全的做法，只需多做一点工作。您还可以使用带有数组的 PHP 文件，这与[APC](http://php.net/manual/en/book.apc.php)配合得更好。

# visual-studio - 选择并粘贴代码作为片段

> ID：14972154
> 
> 赞同：0
> 
> 时间：2013-02-20T04:10:09.437
> 
> 标签：visual-studio, visual-studio-2012

假设我有一段代码，例如：

```
 [StringLength(15, ErrorMessage = "Length must be less than or equal to 15")]
public string UserDefinedName0 { get; set; }

[StringLength(63, ErrorMessage = "Length must be less than or equal to 63")]
public string UserDefinedValue0 { get; set; } 

```

是否有任何插件或 Visual Studio 功能或第三方 Windows 工具允许我复制和粘贴它，以便我在粘贴时获得一个“0”的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:17:01.350

我认为这就是您要查找的内容： [Visual Studio 提示：使用可变参数设置代码片段](http://visualstudiomagazine.com/articles/2012/11/16/vscodesnippets.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:17:16.253

我不知道有什么插件可以做到这一点，但可以想到两种可能有用的解决方案：

1.  自己写一个简短的宏。这比你想象的要容易。
2.  使用正则表达式替换。不确定这是否完全符合您的目的，但我已经多次使用它来进行一些巧妙的代码复制。

# azure - Azure 媒体服务共享访问策略限制

> ID：14972156
> 
> 赞同：3
> 
> 时间：2013-02-20T04:10:18.223
> 
> 标签：azure, smooth-streaming, azure-media-services

我正在尝试为 Azure 媒体服务中存储的媒体的流畅流创建限时 URL。

我正在处理此处提供的代码。 [Windows Azure 平滑流示例](http://www.windowsazure.com/en-us/develop/media-services/how-to-guides/media-services-dotnet/#header-12)

我将视频文件上传到新资产。我使用带有预设“H264 Adaptive Bitrate MP4 Set 720p”的 Azure 媒体服务编码对该视频文件进行编码。使用生成的编码资产，然后我尝试通过创建访问策略和定位器来创建流式 URL，我使用它来生成用于流式传输的 URL。

这是代码：

```
string urlForClientStreaming = "";

IAssetFile manifestFile = (from f in Asset.AssetFiles
                   where f.Name.EndsWith(".ism")
                   select f).FirstOrDefault();

if (manifestFile != null)
{ 
    // Create a 1 hour readonly access policy. 
    IAccessPolicy policy = _mediaContext.AccessPolicies.Create("Streaming policy",   TimeSpan.FromHours(1), AccessPermissions.Read);

    // Create a locator to the streaming content on an origin. 
    ILocator originLocator =     _mediaContext.Locators.CreateLocator(LocatorType.OnDemandOrigin, Asset,    policy, DateTime.UtcNow.AddMinutes(-5));

    urlForClientStreaming = originLocator.Path + manifestFile.Name + "/manifest";

    if (contentType == MediaContentType.HLS)
    urlForClientStreaming = String.Format("{0}{1}", urlForClientStreaming, "(format=m3u8-aapl)");
}

return urlForClientStreaming; 
```

这很好用。直到第 6 次针对同一资产执行该代码。然后你会收到这个错误：

“服务器不支持在单个容器上设置超过 5 个共享访问策略标识符。”

所以，没关系。我不需要每次都创建一个新的 AccessPolicy，我可以重用我之前创建的那个，使用相同的策略构建一个定位器。但是，即便如此，我仍然收到有关单个容器上的 5 个共享访问策略的错误。

以下是使用之前使用的相同 AccessPolicy 创建定位器的新代码：

```
string urlForClientStreaming = "";

IAssetFile manifestFile = (from f in Asset.AssetFiles
                   where f.Name.EndsWith(".ism")
                   select f).FirstOrDefault();

if (manifestFile != null)
{ 
    // Create a 1 hour readonly access policy
    IAccessPolicy accessPolicy = null;
    accessPolicy =
      (from p in _mediaContext.AccessPolicies where p.Name == "myaccesspolicy" select p).FirstOrDefault();

     if (accessPolicy == null)
     {
         accessPolicy = _mediaContext.AccessPolicies.Create("myaccesspolicy", TimeSpan.FromHours(1), AccessPermissions.Read);
     }

    // Create a locator to the streaming content on an origin. 
    ILocator originLocator =     _mediaContext.Locators.CreateLocator(LocatorType.OnDemandOrigin, Asset,    policy, DateTime.UtcNow.AddMinutes(-5));

    urlForClientStreaming = originLocator.Path + manifestFile.Name + "/manifest";

    if (contentType == MediaContentType.HLS)
    urlForClientStreaming = String.Format("{0}{1}", urlForClientStreaming, "(format=m3u8-aapl)");
}

return urlForClientStreaming; 
```

我不明白为什么说我创建了 5 个共享访问策略。在第二个代码块的情况下，我只创建了一个访问策略。我可以通过查看的内容来验证只有一个 AccessPolicy，`_mediaContext.AccessPolicies`该列表中总是只有一个访问策略。

在某些时候，这可能会有许多用户请求访问同一资产。根据我们客户的要求，提供给这些客户的 URL 需要有时间限制。

这不是为资产流畅流创建 URL 的适当方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:18:33.433

迟到的回复我知道...

鉴于您需要创建一个可供任何人无限期使用的 URL，我建议您：

1.  创建资产时创建一个长寿命定位器，例如一年 - 您可以每次使用相同的访问策略，就像在第二个示例中一样
2.  当您为流式传输构建 URL 时，从资产中获取该定位器
3.  检查资产上剩余的时间长度 - 如果少于一定时间（例如一个月），则使用 ILocator.Update 延长定位器，例如再延长一年。更新定位器的到期日期*不会*影响您用于创建定位器的原始访问策略。
4.  利润。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:53:02.177

定位器的设计目的不是针对每个用户进行访问控制。为此使用数字版权管理系统。他们有查看窗口、持久和非持久许可等概念。具体来说，我说的是在 WAMS 和 PlayReady 服务器中使用 PlayReady 加密来配置和提供许可证（Azure 门户中有 EzDRM，还有 BuyDRM 等）。

定位器提供流媒体服务的基本开关。您最多可以创建 5 个，因为它们使用每个容器 5 个的基础 SAS 限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-13T18:09:28.340

现在借助 Azure 媒体服务内容保护功能，您可以使用 AES 或 PlayReady 加密您的媒体文件，生成一个长期存在的定位器。同时，您为内容密钥设置了 Token-Authorization 策略，令牌持续时间可以设置为较短的时间（足以让播放器检索内容密钥）。这样您就可以控制您的内容访问。更多信息可以参考我的博客：[http ://azure.microsoft.com/blog/2014/09/10/announcing-public-availability-of-azure-media-services-content-protection-services/](http://azure.microsoft.com/blog/2014/09/10/announcing-public-availability-of-azure-media-services-content-protection-services/)

# javafx-2 - 如何在 JFXTRAS 2 的议程组件中获取选定的约会？

> ID：14972162
> 
> 赞同：1
> 
> 时间：2013-02-20T04:11:27.193
> 
> 标签：javafx-2, jfxtras

我在如何在[JFXTRAS 2的](http://jfxtras.org/)**议程组件**中获取选定的约会时遇到问题，关于如何在议程组件中获取选定的约会有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:46:31.947

JFXTRAS 2的[议程](https://github.com/JFXtras/jfxtras-labs/blob/master/src/main/java/jfxtras/labs/scene/control/Agenda.java)组件提供了一个`selectedAppointments`属性。

所以你可以得到选定的约会，

```
Collection<Appointment> selectedAppointments = agenda.selectedAppointments(); 
```

听属性修改，

```
agenda.selectedAppointments().addListener(new ListChangeListener<Appointment>() {
    @Override
    public void onChanged(Change<? extends Appointment> c) {
    }
}); 
```

将该属性绑定到另一个属性，

```
ObservableList<Appointment> observableList = FXCollections.observableArrayList();
Bindings.bindContent(observableList, agenda.selectedAppointments()); 
```

在 a 中显示选定的约会`ListView`，

```
ListView<Appointment> listView = new ListView<Appointment>(agenda.selectedAppointments()); 
```

# c# - 有没有办法制作一个可滚动的gridview而不将它放在一个div中？

> ID：14972164
> 
> 赞同：1
> 
> 时间：2013-02-20T04:11:44.477
> 
> 标签：c#, asp.net, css, gridview, styles

我知道可以通过将gridview包含在div中并将溢出设置为自动来使其可滚动。但是我正在使用表格来对齐我的页面，并发现将 div 放在 td 内不一定是一个好主意，那么还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:17:35.063

你可以使用这个库。它跨浏览器并无缝工作。[滚动网格](http://www.codeproject.com/Articles/11636/ScrollingGrid-A-cross-browser-freeze-header-two-wa)

```
<yourNameSpace:ScrollingGrid runat="server" ID=sg1 
       Width=450 Height=240 CssClass=sgTbl>

    <asp:DataGrid runat="server" ID=Grid2 CellPadding=5 CellSpacing=1
      AutoGenerateColumns=True AllowSorting=True 
      AllowPaging=True PageSize=35>
        <HeaderStyle BackColor=red ForeColor=white Font-Bold=True />
        <ItemStyle BackColor=#fefefe />
        <AlternatingItemStyle BackColor=#eeeeee />
        <PagerStyle BackColor=silver ForeColor=White 
                    Mode=NumericPages />
    </asp:DataGrid>

  </yourNameSpace:ScrollingGrid> 
```

这将自动使您的 gridview 可以使用固定标题滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:34:42.820

就像`gridview`读者一样`table`。

尝试使用`overflow`CSS 属性。还有单独的属性来定义水平溢出 ( `overflow-x`) 和垂直溢出 ( `overflow-y`) 的行为。

由于您只想要垂直滚动，请尝试以下操作：

```
table {
  height: 500px;
  overflow-y: scroll;
} 
```

**编辑：**

显然`<table>`元素不尊重该`overflow`属性。这似乎是因为默认情况下`<table>`不呈现元素`display: block`（它们实际上有自己的显示类型）。您可以通过将元素设置为块类型来强制`overflow`属性工作：`<table>`

```
table {
  display: block;
  height: 500px;
  overflow-y: scroll;
} 
```

请注意，这将导致元素具有 100% 的宽度，因此如果您不希望它占据页面的整个水平宽度，您还需要为元素指定一个显式宽度。

# session - 可以使用其他站点的注销按钮清空删除站点的会话值吗？

> ID：14972169
> 
> 赞同：2
> 
> 时间：2013-02-20T04:12:24.340
> 
> 标签：session, button, browser, logout, json-rpc

我有两个站点（站点 1、站点 2）。我想要做的是，当我单击 Site1 的注销按钮时，如果用户在同一浏览器上登录该站点，Site2 也会注销。

解决方案是删除会话。这对于 Site1 是可能的，但它不适用于 Site2。

那么，是否可以使用 Site1 的注销按钮删除 Site2 的会话值？或者可能是，是否可以删除在浏览器中找到的所有会话？

# graph - 如何查看除 master 以外的分支的 GitHub Contributors Graph？

> ID：14972170
> 
> 赞同：91
> 
> 时间：2013-02-20T04:12:35.670
> 
> 标签：graph, github

在[https://github.com/yourusername/yourreponame/graphs](https://github.com/yourusername/yourreponame/graphs)，你可以找到一些很好的图表，显示随着时间的推移提交。但是，该信息仅适用于主分支。

我如何查看除 master 以外的分支的相同信息，或查看考虑所有分支提交的图表？

如果这是不可能的，我怎样才能通过 GitHub Web GUI 至少看到在特定分支下提交了多少行代码？

这有可能吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-09-25T11:57:01.183

我也偶然发现了这一点。您实际上可以看到除 Master 分支之外的其他分支的图表。

*   在您的仓库中的 Github 上 - 选择设置。
*   在设置中 - 将您的默认分支更改为您希望查看图表的任何分支。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-03T02:12:45.967

Github 的帮助： [查看贡献](https://help.github.com/articles/viewing-contributions)：

> 每当您提交项目`default branch`（或`gh-pages`分支）`open an issue`，或提出一个`Pull Request`，我们将其视为贡献。

所以：

*   默认分支
*   gh-pages 分支
*   打开一个问题
*   拉取请求

只有这些会被计算在内。

As @[Mikael](https://stackoverflow.com/a/19004274/1276501) 's answer, you can change the `default branch` in repo's settings.

Another help of Github: [Which contributions are counted?](https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile#which-contributions-are-counted)

For commit:

> Your commit contributions are only counted when they are created on or merged into the default branch or gh-pages branch of a non-fork repository.

* * *

I also want github to count all the commits, not specified branch :(

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T07:38:39.677

据我所知，这些图表仅用于`master`：我[最近仅在分支 gitlist](https://github.com/VonC/compileEverything/branches)上提交，而我的[提交活动](https://github.com/VonC/compileEverything/graphs/commit-activity)仅显示`master`.

除非您在专门为这种检查创建的新 repo 之上重新设置分支，否则所述分支活动将不可见，直到它重新合并到`master`.

# android - 显示即将到来的 Facebook 好友生日

> ID：14972171
> 
> 赞同：4
> 
> 时间：2013-02-20T04:12:38.187
> 
> 标签：android, facebook

我仍然*按升序获得 1 月至 12 月*形式的**Facebook 好友**列表，请参见下图：

 *但现在我想以*即将到来的生日*的形式显示 Facebook 好友列表，例如：

**最近在顶部**

我正在使用以下查询来获取好友列表：

```
 Log.d(LOG_TAG, "requestFriends(" + ")");
    Date date = new Date();
    String current_date = null;
    SimpleDateFormat dateFormatter = new SimpleDateFormat("MM-dd-yyyy");
    current_date = dateFormatter.format(date);
    System.out.println("Current Date is:- " + current_date);
    String query = "select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) and birthday_date>= "
    + current_date + " order by birthday_date"; 
```

请告诉我应该使用什么查询来获取即将到来的 B'days 形式的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:47:29.733

此查询将获取登录用户帐户中所有朋友的列表：

```
SELECT uid, name, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) ORDER BY birthday_date ASC 
```

这样做的缺陷是，您需要检查用户是否在他们的 Facebook 帐户中输入了他/她的生日。

更好的查询是（至少我认为更好）：

```
SELECT uid, name, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND birthday_date >= '02/01' AND birthday_date <= '07/01' ORDER BY birthday_date ASC 
```

这个仅获取在其 Facebook 帐户中填写了生日的用户列表。并且使用`ORDER BY birthday_date`，他们将始终将即将到来的生日放在顶部，一直到结果集中的最后一个。

这样做的缺陷是，*请随意测试它*，我从来没有使用第二个查询得到整年的生日。所以在我的应用程序中，我一次调用 6 个月的数据。这一直很精确，而且非常棒。

我怀疑，考虑到您需要在列表顶部显示即将到来的生日，第二个查询将适合您的目的。为确保您始终获得当前日期和月份以获得精确结果，请使用此示例（简单的 Google 搜索或 SO 搜索将为您提供更多信息）来获取当前日期和月份：

[http://www.asbhtechsolutions.com/android-tutorials/android-get-current-date-and-time](http://www.asbhtechsolutions.com/android-tutorials/android-get-current-date-and-time)

然后，连接 a`String`并将该实例作为查询传递。

**注意：**查询中使用的月份和日期必须始终为**两位数**。*

# java - Oracle/Mysql 编辑大量记录，建议？

> ID：14972172
> 
> 赞同：3
> 
> 时间：2013-02-20T04:12:40.637
> 
> 标签：java, php, mysql, oracle

首先，我要感谢您在页面上提供的所有帮助，这真的很有帮助。现在我遇到了一个我想不通的情况，希望你能帮助我，就是这样：

在我的工作场所，我可以访问一个包含用户（姓名、姓氏、生日和其他内容）的表的 Oracle 数据库。它有 1700 万条记录，对于每条记录，我需要生成一个唯一的键（假设它是名字的 2 个首字母加上出生日期，实际上更复杂，但它是一个例子），所以对于这个键我需要检索记录，计算键，然后用键更新记录。现在超过 1700 万条记录正在杀死服务器！

所以工作的数据库是Oracle，我把数据复制到我的机器到一个MYSQL数据库中进行测试。我打算在本地测试用php进行计算，然后创建一个java应用程序来在服务器上创建密钥，但这是一个巨大的工作量！我不知道该走哪条路。简单的选择在 php 上需要 10 分钟（在 mysql 上通过命令行需要 1.49 分钟来 COUNT() 记录）

我知道最好在记录进入时计算密钥。它们以 50 万包的形式到达，但由于我刚到这里，数据已经合并，我必须处理这些记录。

那么你会建议这个可怜的灵魂做什么来完成这样的任务。我在考虑触发器或 pl/sql，但我真的不知道在性能方面什么会更好。

非常感谢你！！！

-----------作为食人魔的请求，希望你能帮助我，这是我需要为每一行做的计算的php代码

```
$vn=0;//holds the value calculated for name
$sql="select * from roots";//table holding triplets for character|number (ex: 1|A|13), field names (consecutive|character|code)
$resultados=mysql_query($sql,$idcon);
while($dato=mysql_fetch_array($resultados))//i put all of the pairs in an associative array for quicker acces
{
    $consulta[$dato['v_propio']]=array($dato['caracter'],$dato['v_primo']);
}
//coding the name, for every char in the name i add to $vn, the consecutive times the position of the character in the string, plus the code for the character, if null, i add some values
$pos=1;
for ($i=0;$i<strlen($nombre);$i++)
{
    $char=substr($nombre,$i,1);
    $char=charnum($char);
    if($char!=NULL)
    {
    $vn=$vn+($char*$pos)+$consulta[$char][1];
    }
    else
    $vn=$vn + 28 + 107;
    $pos++;
}
//end of name coding
// i format the code for the name to 4 digits
if ( $vn < 1000 and $vn > 99 )
    $vn = '0'.$vn ;
else if ( $vn < 100 and $vn > 9 ) 
    $vn = '00'.$vn; 
else if ( $vn < 10 ) 
    $vn = '000'.$vn; 
 else
    $vn=$vn; 
```

//最后，我将名称中的前两个字符与计算的代码和生日 EX：JH235408071984 将来自 JHON 出生于 1984/08/07，名称代码计算为 2354

```
$CODE=trim(substr($nombre,0,2)).trim($vn).formatFecha($fnac); 
```

希望它有帮助，你可以给我一些指示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:19:11.557

您不必使用php进行计算，首先，为您的表添加一个unique_key列，然后在该列上创建索引/唯一约束，之后您可以使用sql更新整个表一次，生成的值是一行的唯一键，计算在 SQL 中不是通过 php

```
update table set unique_key = generated_value 
```

, 之后如果你想找人, 你会计算它的 unique_key 然后使用查询

```
select * from table where unique_key = generated_value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:28:13.743

当面对像这样的庞大数据集时，我通常会做的，首先是放在某个地方来跟踪我在哪里（只需一张表就可以完成这项工作），然后一次运行 1000 个左右的结果。假设您不需要最大程度的准确度来确定将有多少记录（假设没有巨大的空洞），并且还要将数据用于我们的循环，我们可以使用像这样的查询：

```
SELECT MIN(ID) AS MinID, MAX(ID) AS MaxID FROM Users 
```

假设您有一个名为 ID 的 PK 身份。与完整的 COUNT(*) 或 COUNT(1) 相比，这个查询应该非常快。然后，您可以测试我上面提到的表，以查看数据是否存在，如果不存在，则从头开始，如果存在，则从您离开的地方开始处理这些 ID。这可能需要在有这么多记录的情况下运行很长时间，但是可以这样做以使其能够根据需要重新运行，或者永远运行直到完成。

它最终会看起来像（很多伪函数，因为我不知道你将使用什么平台）：

```
define("NUM_PER_ITERATION", 1000);

// Get our ID range
$query = "SELECT MIN(ID) AS MinID, MAX(ID) AS MaxID FROM Users";
$array = $MyDB->GetSingleRow($query);
$minid = (int) $array["MinID"];
$maxid = (int) $array["MaxID"];

// Get our last starting point
$startingpoint = LoadLastWorkPosition();
if (!$startingpoint || $startingpoint < $minid) {
  $startingpoint = $minid;
} else if ($startingpoint > $maxid) {
  echo("Already done!");
  exit;
}

// Run through the values
$curstart = $startingpoint;
while ($curstart <= $maxid) {
  $curend = $curstart + NUM_PER_ITERATION - 1;

  // Set a time out so it will keep running, you'll know way better
  // than I how long this should be for each loop
  set_time_limit(300);

  // Handle a number of results
  HandleResults($curstart, $curend);

  // Set the start of the next entry
  $curstart = $curend + 1;

  // Save our current progress
  SaveLastWorkPosition($curstart);
}

echo("All done!"); 
```

您必须设计 LoadLastWorkPosition （它尝试加载最后一个位置并返回 0 或 false 或其他任何位置，如果没有）， SaveLastWorkPosition （这样您就可以跟踪您离开的位置......允许一个单独的脚本检查值以及查看进度条或跟踪的位置）和 HandleResults（加载特定范围内的 ID 并为它们创建唯一值）。

无论如何，如果没有别的，希望能帮助你开始！

# javascript - 当指定选择器时，为什么 jQuery .index() 方法仅适用于集合中的第一个元素？

> ID：14972173
> 
> 赞同：3
> 
> 时间：2013-02-20T04:13:00.057
> 
> 标签：javascript, jquery, indexing

我正在尝试通过从`tfoot`同一个表的文本框字段中添加值来构建一个表。最终目标是能够内联编辑先前添加的行，同时仍然保留添加更多行的能力。

我有以下标记：

```
<table>
    <thead>
        <tr>
            <th>Service</th>
            <th>Protocol</th>
            <th>Source Port</th>
            <th>Destination Port</th>
            <th>Action</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td>
                <input type="text" data-function="service" value="foo" />
            </td>
            <td>
                <input type="text" data-function="protocol" value="bar" />
            </td>
            <td>
                <input type="text" data-function="sourcePort" value="baz" />
            </td>
            <td>
                <input type="text" data-function="destPort" value="fob" />
            </td>
            <td>
                <button id="addBtn" type="button">Add</button>
            </td>
        </tr>
    </tfoot>
</table> 
```

以下脚本将所有`input[type=text]`元素存储`tfoot`在输入变量中。从那里我试图用来`.index()`识别然后检索每个文本框的值：

```
$(document).ready(function () {
    $('#addBtn').click(function (e) {
        var inputs = $(this).closest('tfoot').find('input[type=text]');
        console.log(inputs);

        var serviceIndex = inputs.index('[data-function="service"]');
        console.log(serviceIndex);
        console.log(inputs[serviceIndex].value);

        // the remaining indexes all return -1

        var protocolIndex = inputs.index('[data-function="protocol"]');
        console.log(protocolIndex);
        console.log(inputs[protocolIndex].value);

        var sourcePortIndex = inputs.index('[data-function="sourcePort"]');
        console.log(sourcePortIndex);
        console.log(inputs[sourcePortIndex].value);

        var destPortIndex = inputs.index('[data-function="destPort"]');
        console.log(destPortIndex);
        console.log(inputs[destPortIndex].value);
    });
}); 
```

不幸的是，选择器选择`data-function="X"`器仅适用于服务。所有其他选择器返回`-1`指示未找到值。上面的代码来自这个[jsFiddle，它说明了这个问题](http://jsfiddle.net/ahsteele/Dfxy9/)。我不喜欢使用索引，但不能使用元素`id`，因为我需要一个更通用的解决方案。

当指定选择器时，为什么[jQuery .index()方法仅适用于集合中的第一个元素？](http://api.jquery.com/index/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:24:08.750

从文档：

> 如果在元素集合上调用 .index() 并传入**DOM 元素**或 **jQuery 对象**，则 .index() 返回一个整数，指示传递的元素相对于原​​始集合的位置。

所以这应该工作：

```
inputs.index($('[data-function="protocol"]'));
... 
```

演示：http: [//jsfiddle.net/Dfxy9/2/](http://jsfiddle.net/Dfxy9/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:25:33.257

在您使用的上下文中，它`.index`仅在 jQuery 集合中的*第一个元素上调用。*jQuery 对任何非迭代方法（例如`.html`、`.attr`、`.text`）都这样做——`.index`也不例外。

而不是使用集合，而是使用选择器：http: [//jsfiddle.net/4kLqb/](http://jsfiddle.net/4kLqb/)

# python - “使用指定的分隔符拆分空字符串返回 ['']”——但我更喜欢 []

> ID：14972174
> 
> 赞同：0
> 
> 时间：2013-02-20T04:13:03.937
> 
> 标签：python

我正在使用以下方法拆分字符串：

```
my_string.split(',') 
```

有时字符串为空，返回`['']`.

我的用例是接收一个空列表会更方便。在我的应用程序中，空字符串相当于没有项目。`['']`但是，是一个包含一个项目的列表，`''`。

有没有办法在没有条件或额外逻辑的情况下解决这个问题？我有一个字典键分配，就像：

```
d = {
    'key': map(lambda x: x.strip(), my_string.split(',')),
} 
```

保持这种方式会很酷，所有这些都直接在键分配中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:15:49.837

列表理解比使用 map 更快更简洁

```
d = {
    'key': [x.strip() for x in my_string.split(',') if x],
} 
```

`map`此外，您的代码将在不再返回列表的 Python3 中工作

以下是评论中提到的马特案例的几个选项。选择最适合您目的的

```
>>> my_string = 'foo,,,bar'
>>> [x.strip() for x in my_string.split(',') if x]
['foo', 'bar']
>>> [x.strip() for x in my_string.split(',') if my_string]
['foo', '', '', 'bar'] 
```

编写第二种选择的更明确的方法是

```
>>> [x.strip() for x in my_string.split(',')] if my_string else []
['foo', '', '', 'bar'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:20:31.453

> 有没有办法在没有条件或额外逻辑的情况下解决这个问题？

不。否则你会如何编写代码来表达你想要这样的行为？也就是说，要获得完全相同的行为，除了`''`变成`[]`：

```
d = {
    'key': [x.strip() for x in my_string.split(',')] if my_string else []
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:15:48.107

我建议使用 filter()

```
filter( lambda x: len(x) > 0 , map(lambda x: x.strip(), my_string.split(',')) ) 
```

# android - 安卓设备中的Airplay

> ID：14972183
> 
> 赞同：3
> 
> 时间：2013-02-20T04:14:06.860
> 
> 标签：android, iphone, ios, airplay

我想构建一个 android 应用程序，其中 android 设备作为播放服务器（接收器）和 iOS 设备作为客户端（发送器）。我已经关注[了这个](http://redragger.wordpress.com/2011/02/09/using-java-to-mimic-an-airplay-server/)链接。但是在这里，您必须先注册到端口，才能从命令行使用以下命令在 iOS 设备上显示为 airplay 选项：

```
mDNS -R MyAirplayService _airplay._tcp local 22555 
```

当我运行这个 java 代码时，我可以在我的 iOS 设备上看到 airplay 图标。但是如何在 android 设备中穿上它呢？是否有任何开源代码或库可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-19T01:31:59.780

该代码基本上是在本地网络中注册一个 airplay tcp 服务，以便同一本地网络上的任何其他 iOS 设备都可以发现这个 airplay 服务，因此显示 airplay 图标作为选项。

*   在 iOS 中，这可以使用***Bonjour/NSNetService***来完成。请参考苹果官方教程。

    ```
    NSNetService *service;
    service = [[NSNetService alloc] initWithDomain:@""// 1
                                type:@"_airplay._tcp"
                                //this will show up as the airplay name
                                name:@"myiOSAirplayServer" 
                                port:port];
    if(service)
    {
        [service setDelegate:delegateObject];// 2
        [service publish];// 3
    }
    else
    {
        NSLog(@"An error occurred initializing the NSNetService object.");
    } 
    ```

*   在 Android 中，这可以使用***Network Service Discovery***来完成，官方示例在这里：

    ```
    public void registerService(int port) {
      NsdServiceInfo serviceInfo  = new NsdServiceInfo();
      //this will show up as the airplay name
      serviceInfo.setServiceName("myAndroidAirplayServer");
      serviceInfo.setServiceType("_airplay._tcp.");
      serviceInfo.setPort(port);

      mNsdManager = Context.getSystemService(Context.NSD_SERVICE);

      mNsdManager.registerService(
            serviceInfo, NsdManager.PROTOCOL_DNS_SD, mRegistrationListener);
    } 
    ```

但是，这样做只是在本地网络中注册服务，并在 iOS 设备中为您提供一个图标。要做真正的播放服务器/镜像服务，你需要做的还有很多。如果您想知道这一点，请查看我的 iOS 应用程序，它用作 Airplay 镜像服务器，[https://www.youtube.com/watch?v=0d6ggJMypIk](https://www.youtube.com/watch?v=0d6ggJMypIk)。还有一个用 python 编写的开源项目，称为 PyOpenAirMirror。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:15:57.257

如果我没记错的话，Airplay 是 Apple 独有的 API。我试图让它在 android 上被识别，但我基本上没有成功。您可能需要考虑流式音频的另一种传输模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:11:50.340

我会看看 Erica Sadun 的实用程序。我可能弄错了，但我认为它们是开源的。她为 AirPlay 编写了服务器、播放器/发射器等。

[http://ericasadun.com/category/airplayer/](http://ericasadun.com/category/airplayer/)

# wordpress - WooCommerce 扩展 WC_Shipping_Method 错误：找不到类 'WC_Shipping_Method'

> ID：14972184
> 
> 赞同：1
> 
> 时间：2013-02-20T04:14:16.063
> 
> 标签：wordpress, woocommerce, extending-classes

标题很好地解释了它。我正在尝试通过扩展类来添加新的运输方式（基于成本的运输）。这是插件主体（其余在评论中并包含插件信息）：

```
class WC_Cost_Based extends WC_Shipping_Method {
    function __construct() {
        $this->id = 'cost-based';
        $this->method_title = __('Cost-Based', 'woocommerce');
    }

    function calculate_shipping() {
        $rate = array(
            'id' => $this->id,
            'label' => $this->title,
            'cost' => '10.99',
            'calc_tax' => 'per_item'
            );
    // Register the rate
        $this->add_rate( $rate );
    }

}

function add_cost_based_method( $methods ) {
    $methods[] = 'WC_Cost_Based';
    return $methods;
}

add_filter('woocommerce_shipping_methods', 'add_cost_based_method'); 
```

该文件保存在 .../wp-content/cost-based

知道为什么会弹出此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:25:22.323

我在尝试遵循 woocommerce 说明/教程时遇到了同样的问题。似乎他们遗漏了一些事情。

首先，为了解决您的问题，我发现我需要在插件类的顶部包含 woocommerce.php。这将使新的运输类可以访问它需要扩展的 WC_Shipping_Method。可能有一种更优雅的方式只包含依赖类。对我来说，包括看起来像这样：

```
 include ('/woocommerce/woocommerce.php'); 
```

其次，我发现我还必须在 __construct() 方法中至少再设置两个属性。他们是：

```
 $this->title = "YOUR TITLE";  // Displays on the main shipping page
 $this->enabled = true; 
```

第三，我还需要（至少）：

```
function is_available( $package ) {
    if ( $this->enabled == "no" ) return false;
    return apply_filters( 'woocommerce_shipping_' . $this->id . '_is_available', true );
} 
```

希望能帮助到你！

西蒙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-06T07:24:14.347

导航到 - [https://github.com/woocommerce/woocommerce/blob/master/includes/abstracts/abstract-wc-shipping-method.php](https://github.com/woocommerce/woocommerce/blob/master/includes/abstracts/abstract-wc-shipping-method.php)

复制 php 文件中的所有内容并替换在 wp-content/plugins/woocommerce/includes/abstracts/ 中找到的文件 -abstract-wc-shipping-method.php

# php - 将文件扩展名添加到 PHP 变量

> ID：14972186
> 
> 赞同：-2
> 
> 时间：2013-02-20T04:14:35.040
> 
> 标签：php, sql

我需要将文件扩展名 .zip 添加到以下字符串：

```
$zipfilename  = $row_rsParentGal['gallery_name']; 
```

似乎无法正确处理，我得到的最接近的是：

```
$zipfilename  = $row_rsParentGal['gallery_name'].zip; 
```

但这只是将 zip 添加到 gallery_name 而不是点。

非常感谢托尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T04:16:46.580

我想你只是想要

```
$row_rsParentGal['gallery_name'] . ".zip"; 
```

这应该将字符串“.zip”连接到画廊名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:23:09.510

我有一个功能可以为您提供帮助

```
function replace_extension($filename, $new_extension) {
    $info = pathinfo($filename);
    return $info['filename'] . '.' . $new_extension;
} 
```

或者你也可以使用

```
function replace_extension($filename, $new_extension) {
    return preg_replace('/\..+$/', '.' . $new_extension, $filename);
} 
```

# vb.net-2010 - 无法加载application.Designer.vb 怎么办？

> ID：14972188
> 
> 赞同：9
> 
> 时间：2013-02-20T04:14:42.617
> 
> 标签：vb.net-2010

我收到了这个错误：

```
Error   1   Unable to open module file 'D:\business\shared\Dropbox\badgers\vb\vb.net\My Project\Application.Designer.vb': The system cannot find the path specified.    D:\business\shared\Dropbox\badgers\vb\vb.net\My Project\Application.Designer.vb 1   1   traverseweb4 
```

Application.designer.vb 是一个生成的文件。我只是删除了那个。我如何获得再生？

如果我直接用记事本++打开 .vbproj 文件，我看到：

```
<Compile Include="My Project\Application.Designer.vb">
  <AutoGen>True</AutoGen>
  <DependentUpon>Application.myapp</DependentUpon>
</Compile> 
```

所以它显然是自动生成的，那么为什么 vb.net 怪我没有那个愚蠢的文件呢？

顺便说一句，在记事本++中删除那些愚蠢的行是可行的。现在一切正常。但这让我很生气。

任何人都可以首先解释为什么会发生这种情况？为什么必须侵入 .vbproj 文件才能解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:09:03.567

当我过去遇到这样的问题时，我通常会清理项目（右键单击解决方案 - 清理），然后从同一个菜单重建 - 这通常会修复这样的错误。

# graphics - 实现法线映射 HLSL

> ID：14972189
> 
> 赞同：2
> 
> 时间：2013-02-20T04:14:57.487
> 
> 标签：graphics, 3d, hlsl, directx-11

那么好吧。我正在尝试在我的小型游戏引擎中实现法线映射，但我无法让它工作。

当我仅使用每个顶点法线进行照明时，一切都很好，但是如果我尝试使用法线贴图进行照明，那么一切都会崩溃。

我知道我有正确的 UV，因为纹理看起来不错，但我不知道在法线贴图纹理方面我做错了什么。

这是我的像素着色器（HLSL）中的一些代码......

```
 float3 NormalSample(float3 normalMapSample, float3 unitNormalW, float3 tangentW)
{
    //Uncompress each component from [0,1] to [-1,1]
    float3 normalT = 2.0f*normalMapSample - 1.0f;
    // Build orthonormal basis.
    float3 N = unitNormalW;
    float3 T = normalize(tangentW - dot(tangentW, N)*N);
    float3 B = cross(N, T);

    float3x3 TBN = float3x3(T, B, N);

    // Transform from tangent space to world space.
    float3 bumpedNormalW = mul(normalT, TBN);

    return bumpedNormalW;
} 
```

关于我可能做错什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:30:04.130

好的，我修好了。我只是在错误的坐标空间中进行正常计算。为了更容易，我决定在模型空间中做所有事情。看起来不错。太糟糕了，我不允许发布屏幕截图。

再次感谢 Miloszmaki....

# java - Java：如何在字符串中搜索 char 变量？

> ID：14972190
> 
> 赞同：2
> 
> 时间：2013-02-20T04:15:07.033
> 
> 标签：java, char, indexof

我需要找到从用户输入派生的 char 值的位置。但是当我不提供要查找的确切字符时， indexOf 方法似乎不起作用。但是由于 char 值是从用户的输入中得出的，所以我无法输入确切的值。有什么方法可以按我需要的方式使用 indexOf 吗？

```
public class pg2a {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        String host;
        System.out
                .println("Please enter your sequence (any length, any characters):");
        host = keyboard.nextLine();
        System.out.println("Now enter a 3 character sequence:");
        String candidate;
        candidate = keyboard.nextLine();

        int length = candidate.length();
        char a = candidate.charAt(0);
        char b = candidate.charAt(1);
        char c = candidate.charAt(2);
        int i = candidate.indexOf(a);
        int j = candidate.indexOf(b);
        int k = candidate.indexOf(c);

        if (length == 3) {
            if (i == -1)
                System.out
                        .println("The 3 character sequence you entered is not a subsequence of your sequence.");
            else
                System.out.println("Let's go!");
        } else {
            System.out
                    .println("The sequence you entered is not a 3 character sequence.");
        }
    }
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:22:09.653

您拥有的代码应该将 i 设置为 0，将 j 设置为 1，将 c 设置为 2（假设它们都是不同的字符）。你说“给我第一个字符的索引”，然后是第二个和第三个。我相信你打算这样做`host.indexOf(a)`，等等。

但是，有一种更简单的方法来做你想做的事，那就是使用`host.indexOf(candidate)`，如果候选人在主机中，它应该返回 > -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:22:45.067

如果我正确理解了您的问题，则以下几行：

```
int i = candidate.indexOf(a);
int j = candidate.indexOf(b);
int k = candidate.indexOf(c); 
```

应该

```
int i = host.indexOf(a);
int j = host.indexOf(b);
int k = host.indexOf(c); 
```

您想查找 a 是否在主机中。a 将永远是候选人。此外，您只检查 a 是否在序列中，而不是 b 和 c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:33:11.320

如果您的目标只是检查是否`host`包含`candidate`，那么您可以考虑使用`contains`方法。

```
boolean isSubstring = host.contains(candidate); 
```

如果您需要一个从哪里`candidate`开始的索引，那么下面应该服务于目的。

```
int startIndex = host.indexOf(candidate); 
```

# web-services - 将自定义 Web 服务（从自定义 Web 服务器）添加到 Visual Studio 项目（Outlook 插件）

> ID：14972194
> 
> 赞同：1
> 
> 时间：2013-02-20T04:15:30.523
> 
> 标签：web-services, visual-studio-2012, outlook

我正在开发 VS 2012 Ultimate 中的 Outlook 插件（带按钮的功能区）。

在功能区按钮上单击我想与 Web 服务交谈并显示一条消息，显示来自 Web 服务的任何已解析信息。

自定义 Web 服务不是 .net 或任何微软。这是一个简单的 Web 服务，可以返回几乎任何类型的信息，但可以说是 XML。

如何将自定义 xml Web 服务（例如 localhost/mywebservice.xml）添加到 Visual Studio 项目中，以便在单击按钮时使用，其中在 localhost 上运行的 Web 服务器不是 IIS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:55:14.210

有许多 VS 客户端库可以回答这个问题。

我选择的是 RestSharp ( [http://restsharp.org/](http://restsharp.org/) )。

# c# - System.Drawing.Color 类是什么样的？

> ID：14972196
> 
> 赞同：0
> 
> 时间：2013-02-20T04:15:36.263
> 
> 标签：c#, class

我有一个关于处理 Gender 课程的问题，看起来其他人已经问过这个问题并得到了答案。 [在多语言应用程序中使用的类库中表示性别的最佳方式](https://stackoverflow.com/questions/2722236/best-way-to-represent-gender-in-a-class-library-used-in-multilingual-application)

答案是模仿 System.Drawing.Color 类。我在哪里可以看到这门课的结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:20:20.940

您可以使用[VS Reflector 插件](http://www.red-gate.com/products/dotnet-development/reflector/)浏览框架源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:29:29.093

Microsoft 已经提供了大部分 .NET 框架 BCL 的源代码一段时间，因此您可以自己查看。它可以[在这里找到](http://referencesource.microsoft.com/netframework.aspx)。

# java - 如何在 JavaFX 中创建具有透明背景的启动画面

> ID：14972199
> 
> 赞同：23
> 
> 时间：2013-02-20T04:15:49.340
> 
> 标签：java, transparency, javafx-2, javafx, splash-screen

我正在尝试创建一个启动画面，就像我提供的示例一样。似乎 AnchorPane 不允许透明背景，我尝试将 css 设置为`AnchorPane`to`-fx-background-color: rgba(255,0,255,0.1) ;`但白色背景仍然显示。

我的 fxml 文件中只有一个带有 ImageView 的 AnchorPane，其中包含 png 图像

![例子](../Images/7cee43eb31bba79c2381472e4b411bfb.png)

我到处寻找，但找不到任何解决方案，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-20T06:41:06.620

试试这个为 Stackoverflow 问题创建的[JavaFX 启动示例：](https://gist.github.com/jewelsea/1588531) [Designing a splash screen (java)](https://stackoverflow.com/questions/9997509/designing-a-splash-screen-java)。还有一个[后续示例](https://gist.github.com/jewelsea/2305098)，它还提供应用程序初始化进度反馈。

JavaFX 确实提供了[Preloader](http://docs.oracle.com/javafx/2/deployment/preloaders.htm)接口，用于从启动到应用程序的平滑传输，但上面的示例没有使用它。

上面的飞溅示例也没有做透明效果，但是这个[对话框示例](https://gist.github.com/jewelsea/1887631)向您展示了如何做到这一点，您可以将它与之前的飞溅示例结合以获得您想要的效果。

透明效果由以下方式创建：

1.  `stage.initStyle(StageStyle.TRANSPARENT)`.
2.  `scene.setFill(Color.TRANSPARENT)`.
3.  确保您的根节点不是不透明的方形矩形。

这一切都在 Sergey 的样本中得到了证明。

相关问题：

*   [如何在 Eclipse 中将 javaFX Preloader 与独立应用程序一起使用？](https://stackoverflow.com/questions/15126210/how-to-use-javafx-preloader-with-stand-alone-application-in-eclipse)

*根据其他问题更新 2016 年 4 月*

> 预加载器图像不在前台。我试过 stage.toFront()，但没有帮助。

在 Java 8u20 [stage.setAlwaysOnTop(true)](https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Stage.html#setAlwaysOnTop-boolean-)中创建了一个新的 API 。我更新了[链接示例](https://gist.github.com/jewelsea/2305098)以在初始启动屏幕上使用它，这有助于更平滑地过渡到主屏幕。

*对于 Java8+*

对于 modena.css（Java 8 中的默认 JavaFX 外观定义），为所有控件引入了轻微的阴影背景（如果加载了控件，还为窗格引入了阴影）。

您可以通过指定默认背景是透明的来删除它。这可以通过将以下行添加到应用程序的 CSS 文件中来完成：

```
.root { -fx-background-color: transparent; } 
```

如果您愿意，您可以使用 CSS 样式类和规则或 setStyle 调用（如 Sergey 的回答中所示）来确保该设置仅适用于您的初始屏幕的根而不是您的所有应用程序屏幕。

见相关：

*   [如何在javafx中制作透明的场景和舞台？](https://stackoverflow.com/questions/34033119/how-to-make-transparent-scene-and-stage-in-javafx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-20T04:57:13.410

你需要有透明的`Stage`，`Scene`为此。`Pane`本身没有颜色。

```
public void start(Stage primaryStage) {
    Button btn = new Button("Say 'Hello World'");

    AnchorPane root = new AnchorPane();
    root.getChildren().add(btn);

    // Java 8: requires setting the layout pane background style to transparent
    // https://bugs.openjdk.java.net/browse/JDK-8092764
    // "Modena uses a non-transparent background by default"
    root.setStyle("-fx-background-color: transparent;"); 

    Scene scene = new Scene(root, 300, 250, Color.TRANSPARENT);
    primaryStage.initStyle(StageStyle.TRANSPARENT);
    primaryStage.setScene(scene);
    primaryStage.show();
} 
```

# javascript - Access-Control-Allow-Origin 不允许来源？

> ID：14972200
> 
> 赞同：3
> 
> 时间：2013-02-20T04:15:49.610
> 
> 标签：javascript, google-chrome, google-chrome-extension, xmlhttprequest

我正在尝试在 Chrome 扩展中使用 XHR 从 Yahoo 获取天气信息：

```
$.ajax({
    url: "https://weather.yahooapis.com/forecastrss?w=" + 250226 + "&u=c",
    dataType: 'xml',
    success: function(data) {
        console.log(data);
    }
}); 
```

并且我已请求使用此脚本跨域的权限：

```
$("button").click(function(){
    chrome.permissions.request({
        origins: ['*://weather.yahooapis.com/*']
    }, function(granted) {
        if (granted) {
            console.log("Success creating permission.");   //successful
    } else {
            console.log("Not successful.");
    }
}); 
```

但是，它仍然给我一个错误说：

> `XMLHttpRequest cannot load http://weather.yahooapis.com/forecastrss?w=2502265&u=c. Origin chrome-extension://randomid is not allowed by Access-Control-Allow-Origin.`

![在此处输入图像描述](../Images/379744a015e677454b84c69823d1eef5.png)

我想不出为什么会发生这种情况。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:51:03.410

您的 Chrome 扩展程序有清单文件吗？看来这是问题所在，您还应该在那里设置跨域权限。

似乎 randomId 提及与未分配适当扩展 ID 的扩展有关。

# passwords - 如何以编程方式为 micro SD 卡设置密码？

> ID：14972202
> 
> 赞同：1
> 
> 时间：2013-02-20T04:15:49.403
> 
> 标签：passwords, password-protection, copy-protection, password-encryption, data-protection

有没有办法通过编程（Java/C）用密码写保护micro sd卡？

主要是我想为 micro sd 卡设置密码，并且只有我们提供密码才能访问 sd 卡。

我知道诺基亚手机以前是这样做的，希望有一些方法可以做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:41:10.620

手机使用 SD 或 microSD 卡的 CID 号（写在 ROM 中的卡 ID 号）来加密数据并充当密钥。所以 Lonnez 是对的，你需要加密数据，而不是写保护。另一部分是拥有一个可以读取 CID 号码并将其吐出的设备。Nexcopy.com 有一个供批量使用（制造），但我怀疑您想要一个单一的读卡器解决方案，而不是批量。

您还应该联系 SDCard 协会，因为他们可以为您提供更具体的答案，以帮助您了解 wp SD 媒体的能力。sdcard.org

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:43:20.553

我很确定手机只是加密数据（从技术上讲不是锁定它），只有他们知道如何解密它。最接近保护 micro sd 卡的方法是加密你想在上面写的任何内容。希望这至少让你知道如何去做。

# vim - 是否可以不使用vim的小删除寄存器？

> ID：14972203
> 
> 赞同：17
> 
> 时间：2013-02-20T04:15:55.613
> 
> 标签：vim

我希望任何已删除的文本*始终*进入编号寄存器，但我经常会在编号寄存器中找到我最近删除的内容，但它不存在，因为它不到一行。

> 编号寄存器 1 包含最近删除或更改命令删除的文本，除非命令指定另一个寄存器或文本少于一行（然后使用小删除寄存器）。每次连续删除或更改时，Vim 将寄存器 1 的先前内容移入寄存器 2，将 2 移入寄存器 3，依此类推，丢失寄存器 9 的先前内容。

这是一件相当罕见的事情，但是当它发生时，真的很烦人，因为我必须撤消回到我删除文本的位置，然后删除到一个命名寄存器或在它超出寄存器 0 之前立即使用已删除的文本，因为我在粘贴我刚刚删除的小文本的过程中删除其他内容（杂散的空格、不好的评论等）。

我希望小删除条件对于输入编号寄存器 1-9 的文本无关紧要。任何人都知道实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T08:33:08.083

在[Reddit 上的另一个这样的功能请求中](http://www.reddit.com/r/vim/comments/yyq4a/is_there_anyway_to_configure_vim_to_use_the/)，发现 Vim 中存在一个错误，当

```
:set clipboard^=unnamed 
```

该错误[已](http://groups.google.com/group/vim_dev/browse_thread/thread/a5b378ac0c3c2e62/790351a16a7b88a4)在 Vim 7.3.649 中修复。因此，如果您使用旧版本，您仍然可以从该错误中受益 :-)

[如果你真的认为这是有用的行为，你可以在vim_dev 邮件列表中](http://www.vim.org/community.php)提出这个增强请求，但一般来说，额外的选项是不受欢迎的。如果您可以提出令人信服的论点并提供包含文档和测试的完整补丁，您的机会就会更高。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-25T08:04:46.453

**在neovim**编辑器中查看 Pull Request ：

[[RFC] 添加一个选项以使用编号寄存器进行较小的删除 #8169](https://github.com/neovim/neovim/pull/8169)

我尝试添加该`smalldel`选项，该选项允许您配置要推送到编号寄存器“1..”9 中的已删除字符的最小数量

此 PR 合并后的下一个 neovim 版本将包含此选项。

# css - css垂直对齐特定的div

> ID：14972208
> 
> 赞同：3
> 
> 时间：2013-02-20T04:16:42.993
> 
> 标签：css, css-float

我目前有以下html：

```
<div>objA</div>
<div class="tower">objB</div>
<div class="tower">objC</div>
<div class="tower">objD</div>
<div>objE</div>
<div>objF</div>
<div>objG</div>
<div>objH</div>
<div>objI</div>
<div>objJ</div> 
```

我想塔（垂直对齐）“塔”类中的 div，以便可以复制以下图像：

![](../Images/a62257fa9c1bcfd3dc4b4b67e39eacaa.png)

相反，我目前拥有的是以下内容：

[http://jsfiddle.net/kAMB5/](http://jsfiddle.net/kAMB5/)

有什么方法可以让我纯粹通过 css 来实现我想要的结果？（最好不改变html内容）

**更新**：您可以假设这些是固定宽度的 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:22:29.633

您需要将 objC 和 objD div 放入 objB div 中，如下所示：[**DEMO**](http://jsfiddle.net/kAMB5/3)以获得所需的结果：

**HTML：**

```
<div>objA</div>
<div>
    objB
    <div class="tower">objC</div>
    <div class="tower">objD</div>
</div>
<div>objE</div>
<div>objF</div>
<div>objG</div>
<div>objH</div>
<div>objI</div>
<div>objJ</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:24:40.090

你需要一个额外的`div`包装你`.tower`的：http: [//jsfiddle.net/kAMB5/4/](http://jsfiddle.net/kAMB5/4/)

除此之外，CSS Grid Layout (IE10) 或`.tower`CSS3 flexbox（我猜仍然需要一个容器）可以达到相同的结果，但兼容性较差

# r - 需要展平列表以在 R 中使用相交

> ID：14972213
> 
> 赞同：0
> 
> 时间：2013-02-20T04:17:09.200
> 
> 标签：r, list, set-intersection

我有全名数据，我使用 strsplit() 来获取名称的每个元素。

```
# Dataframe with a `names` column (complete names)
df <- data.frame(
    names =
          c("Adam, R, Goldberg, MALS, MBA", 
          "Adam, R, Goldberg, MEd", 
          "Adam, S, Metsch, MBA", 
          "Alan, Haas, MSW", 
          "Alexandra, Dumas, Rhodes, MA", 
          "Alexandra, Ruttenberg, PhD, MBA"),
    stringsAsFactors=FALSE)

# Add a column with the split names (it is actually a list)
df$splitnames <- strsplit(df$names, ', ') 
```

我也有以下学位列表

```
degrees<-c("EdS","DEd","MEd","JD","MS","MA","PhD","MSPH","MSW","MSSA","MBA",
           "MALS","Esq","MSEd","MFA","MPA","EdM","BSEd") 
```

我想得到每个名字和各自学位的交集。

我不确定如何展平名称列表，以便可以使用 intersect 比较两个向量。当我尝试`unlist(df$splitname,recursive=F)`时，它分别返回每个元素。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:31:52.533

尝试

```
df$intersect <- lapply(X=df$splitname, FUN=intersect, y=degrees) 
```

`df$splitname`这将为您提供（*例如* `intersect(df$splitname[[1]], degrees)`）中每个元素的交集列表。如果你想要它作为一个向量：

```
sapply(X=df$intersect, FUN=paste, collapse=', ') 
```

我假设您需要它作为向量，因为可能完整的名称来自一个（例如，来自数据框），但 strsplit 输出一个列表。

那样有用吗？如果不是，请尝试澄清您的意图。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:42:07.707

为了连续性，您可以使用`unlist`：

```
hh <- unlist(df$splitname)
intersect(hh,degrees) 
```

例如 ：

```
ll <- list(c("Adam" ,    "R"    ,    "Goldberg" ,"MALS"  , "MBA "),
           c("Adam" ,    "R"    ,    "Goldberg", "MEd" ))

 intersect(hh,degrees)
[1] "MEd" 
```

或相当于：

```
hh[hh %in% degrees]
[1] "MEd" 
```

要获得差异，您可以使用

```
setdiff(hh,degrees)
[1] "Adam"     "R"        "Goldberg" "MALS"     "MBA " 
```

...

# php - 使用当前 URL 更新 Facebook Like 按钮

> ID：14972215
> 
> 赞同：0
> 
> 时间：2013-02-20T04:17:15.827
> 
> 标签：php, facebook

我有一个漫画网站，我想将 Facebook 点赞按钮添加到其中[。](http://hittingtreeswithsticks.com)

如您所见，主页上有您可以单击的缩略图...缩略图将根据漫画的 ID 在 vi​​ewcomic.php 上加载全尺寸漫画。[我认为按照他们的教程](http://developers.facebook.com/docs/reference/plugins/like/)添加 xfbml 很容易。我尝试添加 xfbml 和 html5 版本。

然后我将以下类似按钮代码添加到我的 viewimage.php 页面，其中唯一的 $imgid 将是：

```
<div class="fb-like" id="fb" data-href="http://www.hittingtreeswithsticks.com/?action=viewimage&site=<?php echo $site; ?>&id=<?php echo $imgid; ?>" data-send="false" data-layout="button_count" data-width="60" data-show-faces="true"></div> 
```

当我最初单击漫画以查看完整尺寸时，它为我提供了该 $imgid 和 URL（应为 0）的正确点赞数：[http ://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=62](http://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=62)

![在此处输入图像描述](../Images/f0856f12bb671c7d47f2a379d3e167ac.png)

但是，出于某种原因，即使我转到下一个漫画 id，并强制 URL 和页面重新加载（我必须以这种方式重新加载，因为我使用 javascript 来允许用户按键浏览图像并需要它来重新加载页面和 ID）...

```
 window.history.pushState(null, null, '.?action=viewimage&site=<?php echo $site; ?>&id=<?php echo $imgid ?>);
            window.location.reload(); 
```

它会给我整个网站的总点赞数，而不是那个 URL 的唯一 $imgid：[http ://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=61](http://www.hittingtreeswithsticks.com/?action=viewimage&site=comics&id=61)

![在此处输入图像描述](../Images/b1b0ca042c469aeda5a05ab3a1737ad0.png)

[我什至尝试按照Elure 的教程](http://elure.co/43_facebook-like-button-dynamic-url-javascript.htm)强制使用以下 javascript 更新 href 属性：

```
 <script type="text/javascript">
        var sUrl = window.location;
        document.getElementById('fb').setAttribute('href', sUrl);
    </script> 
```

任何想法为什么？

谢谢！

* * *

像这样？

```
<div class="fb-like" data-href="http://www.hittingtreeswithsticks.com/?action=viewimage&site=<?php echo $site ?>&id=<?php echo $imgid; ?>" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true" data-font="trebuchet ms"></div>
<script type="text/javascript">
    document.getElementById('fb').setAttribute('data-href', sUrl);
    FB.XFBML.parse();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:43:40.020

您需要更新 data-href 属性，因为您使用的是类似按钮的 html5 样式

```
document.getElementById('fb').setAttribute('data-href', sUrl);
FB.XFBML.parse(); 
```

# asp.net-mvc-3 - 如何访问控制器中视图下拉列表的值？

> ID：14972219
> 
> 赞同：0
> 
> 时间：2013-02-20T04:17:43.040
> 
> 标签：asp.net-mvc-3, html-select

如何访问控制器中视图下拉列表的值？

```
var typeList = from e in db.Rubrics where e.DepartmentID == 2 select e;
var selectedRubrics = typeList.Select(r => r.Category);
IList <String> rubricsList = selectedRubrics.ToList();
IList<SelectListItem> iliSLI = new List<SelectListItem>(); 
SelectListItem selectedrubrics = new SelectListItem();
selectedrubrics.Text = "Choose a category";
selectedrubrics.Value = "1";
selectedrubrics.Selected = true;
iliSLI.Add(selectedrubrics);
for(int i = 0;i<rubricsList.Count();++i)
{
    iliSLI.Add(new SelectListItem() {
        Text = rubricsList[i], Value = i.ToString(), Selected = false });
}
ViewData["categories"] = iliSLI; 
```

在我看来，这可以很好地显示下拉值：

```
@Html.DropDownList("categories") 
```

然后在我的控制器中我这样使用`FormCollection`：

```
String[] AllGradeCategories = frmcol["categories"].Split(','); 
```

当我在这里设置断点时，我会在 *AllGradeCategories*中得到一个 1 数组。我究竟做错了什么？

更多：这是我的开始表格：

```
@using (Html.BeginForm("History", "Attendance",
    new {courseID = HttpContext.Current.Session ["sCourseID"] },
    FormMethod.Post, new { @id = "formName", @name = "formName" }))
    {
        <td>
        @Html.TextBoxFor(modelItem => item.HomeworkGrade, new { Value = "7" }) 
        @Html.ValidationMessageFor(modelItem => item.HomeworkGrade)
        </td>
        <td>
        @Html.TextBoxFor(modelItem => item.attendanceCode, new { Value = "1" })
        @Html.ValidationMessageFor(model => model.Enrollments.FirstOrDefault().attendanceCode)
        </td>  
        <td>  
        @Html.EditorFor(modelItem => item.classDays)
        </td>
        <td>
        @Html.DropDownList("categories")
        </td>
    } 
```

我的控制器签名：

```
 public ActionResult ClassAttendance(InstructorIndexData viewModel, int id, FormCollection frmcol, int rows, String sTeacher, DateTime? date = null) 
```

EDITED 2 试过这个，但虽然它似乎已发布，但我仍然没有得到隐藏字段或类别参数中列表的值。

```
 @Html.Hidden("dropdownselected1");
   @Html.DropDownList("categories",ViewBag.categories as SelectList, new { onchange = "changed" })

                 </td>

  $(function () {

    $("#dropdownselected1").val($("#categories").val());

  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:45:58.257

如果您要访问下拉列表中的选定值，请使用隐藏字段并在下拉列表的 onChange() javascript 事件上重新填充该字段。

```
but you can use normal 
@Html.Hidden("dropdownselected1");

@Html.DropDownList("categories",new { onchange ="changed();"}

function changed()
{
   $("#hiddenfieldid").val($("#dropdownlistid").val());

} 
```

应该做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:04:39.690

我最终创建了一个 ViewModel 来处理带有关联局部视图的下拉列表。然后在控制器中，我使用 FormCollection() 访问了列表的值。

# ruby-on-rails - 挡在铁轨 3

> ID：14972223
> 
> 赞同：0
> 
> 时间：2013-02-20T04:18:24.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的观点：

```
<%= form_tag(rate_url) do %>
  <%= hidden_field_tag :prod_id, params[:product_id] %>
  <%= hidden_field_tag :rating_set_id, params[:rating_set_id] %>
  <span class = "heading"> Recommendations </span>
  <div><%= submit_tag 'Submit Ratings', :class => " btn right" %></div>
  <span id = "rate_more_link">
    <%= link_to "Rate More Products", products_path(:rating_set_id => params[:rating_set_id])%>
  </span>
  <br/>
  <div id ="prods_container">
  <% @recommendations.each do |rec| %>
    <% url_raw = URI.parse("url_to_parse") %>
    <% url = Net::HTTP.get_response(url_raw).body %>
    <% if url.empty? %>
      <% @title          = "Product Unavailable via API" %>
      <% @url            = "#{rec.wmt_id}" %>
      <% @cover_img      = "_180X180.jpg" %>
      <% @price          = "Product Unavailable via API" %>
    <% else %>
      <% begin %>
        <% @response1  = JSON.parse(url) %>
        <% @title          = @response1["ProductName"]%>
        <% @url            = "{@response1["ProductUrl"]}"%>
        <% @cover_img      = @response1["ImagePath"]%>
        <% @price          = @response1["currentItemPrice"]%>
      <% rescue %>
      <% end %>
    <% end %>
    <div id ="prod">
      <span class = "radio_button">
        <%= hidden_field_tag "recommendation_ratings[#{rec.id}][recommendation_id]", rec.id %>
        <%= radio_button_tag "recommendation_ratings[#{rec.id}][rating]", '3'%> Good
        <%= radio_button_tag "recommendation_ratings[#{rec.id}][rating]", '2'%> Fair
        <%= radio_button_tag "recommendation_ratings[#{rec.id}][rating]", '1'%> Bad
        <%= radio_button_tag "recommendation_ratings[#{rec.id}][rating]", '0'%> N/A
      </span>
    <div>
      <a href='<%= @url %>' target="_blank">
        <img src='<%= @cover_img  %>' class='product_image_rec_table'></img>
      </a>
    </div>
    <div class = "rec-desc">
      <div class = "small"><b>Wmt ID: </b><%= rec.wmt_id  %></div>  
      <div class = "small"><b>Title: </b><%= @title  %></div>
      <div class = "small"><b>Price: </b>$<%= @price  %></div>
      <div class = "em">
        <b>Current Rating: </b>
        <% rec.ratings.each do |rating_phin| %>
          <%= rating_phin.label %>
        <% end %></div>
        <br/>
      </div>
      <div id="rec_note_text">
        <%= text_field_tag "recommendation_ratings[#{rec.id}][notes]", "#{rec.notes}" ,:id => "rec_note_text", :placeholder => 'Enter Notes..'%>
      </div>
    </div>
    <% end %>
  <% end %>
</div> 
```

我试图将块`<% end %>`从`Current Rating`块移动到末尾，以便我可以`rating_phin`在我的变量中调用变量`text_field_tag`，但是当我将块移动`<% end %>`到视图的末尾时，`Current Rating`块之后的所有内容都不会被渲染。我究竟做错了什么？如何在视图结束时更新`rating_phin.notes`而不是`rec.notes`在我的视图中？`text_field_tag`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:43:14.713

该`rating_phin`变量仅存在于该`each`循环的范围内。

如果您稍后需要它，您将不得不再次循环：

```
<div id="rec_note_text">
  <% rec.ratings.each do |rating_phin| %>
    <%= text_field_tag "recommendation_ratings[#{rec.id}][notes]", "#{rec.notes}" ,:id => "rec_note_text", :placeholder => 'Enter Notes..'%>
  <% end %>
</div> 
```

我不确定为什么您会期望移动`<% end %>`标签是正确的做法。

如果您迷失在 ERB 中，考虑到 HTML 会变得多么繁琐和复杂，这并不是特别困难，尤其是当其中包含实时 Ruby 时，您可能想尝试[HAML](http://haml.info/)。它将减少到大约一半的行数，并删除许多`<% %>`往往使 ERB 难以阅读的结束标签碎片。

# matlab - 在 Matlab 中为 KNN 选择 k

> ID：14972237
> 
> 赞同：2
> 
> 时间：2013-02-20T04:21:02.227
> 
> 标签：matlab, classification, knn

我目前正在使用 Matlab 的 k 最近邻分类器（knnclassify）来训练和测试二进制属性。如果没有提供 k，则 k 的默认值参数是 1，并且可以选择其他 k 值。我已经在网上和 stackoverflow 上进行了研究，但没有任何相关内容可以解决我的问题，即 k 的最佳用途。是否有一个内置函数可以告诉我，对于我的特定数据，还是只是猜测并等待查看导出的准确性？任何帮助将不胜感激。

这是 matlab 的 knnclassify 文档的链接：[knnclassify](http://www.mathworks.com/help/bioinfo/ref/knnclassify.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T04:36:02.393

你这里有一个典型的模型选择问题。您想要的是选择`k`能够为您的数据提供最低总体错误的方法。k 值越大泛化效果越好，而较小的值可能会过度拟合。

因此，交叉验证是选择此参数的好方法，我找到了[这篇文章](http://publib.boulder.ibm.com/infocenter/spssstat/v20r0m0/index.jsp?topic=/com.ibm.spss.statistics.help/alg_knn_training_crossvalidation.htm)，这似乎是一种合理的方法。

# colors - Lua，获取 x 和 y 坐标和颜色

> ID：14972240
> 
> 赞同：0
> 
> 时间：2013-02-20T04:21:17.063
> 
> 标签：colors, lua, coordinates

我不确定这是一个多么先进的主题，但我想知道是否有可以执行以下操作的代码：

1.  扫描图像中的每个像素。
2.  获取每个像素的红色、绿色和蓝色值。
3.  将 x 和 y 位置和颜色分配给表格/变量，这是最有效的（并且可能）。
4.  在单独的脚本/函数中使用此数据，以根据 RGB 值发生某些事情。

那么，这可以在 Lua 中完成吗？如果没有，是否有一种语言可以像 C++ 一样附加到 Lua 上？还是我根本无法拥有 Lua？我已经进行了一些搜索，但找不到答案。甚至不确定这是否可能，似乎没有出现在任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:49:42.020

图书馆绝对有可能。请参阅[此页面](http://lua-users.org/wiki/LibrariesAndBindings)以获取列表。如果您不知道该选择哪一个，请从[imlib2](http://asbradbury.org/projects/lua-imlib2/doc/)开始。

# google-apps-script - Google Apps 脚本：不可靠的时间触发器

> ID：14972241
> 
> 赞同：0
> 
> 时间：2013-02-20T04:21:24.330
> 
> 标签：google-apps-script, google-api, google-apps

是否允许像这样在 Google App 脚本中链接时间触发器：

```
 function doGet(e){   //first invocation by user, HTTP GET 
    if (e == null || e.parameters == null) {
      return ContentService.createTextOutput("EMPTY");
    }

    saveGetParametersForUser(Session.getUser().getEmail(), e);

    //trigger 10 seconds
    var timeTrigger = ScriptApp.newTrigger("timeDrivenEvent").timeBased().after(10 * 1000).create();

 }

function timeDrivenEvent() { //runs until there are some data in ScriptDB
  Logger.log("INVOKED AT " + new Date());

  removeAllPreviousTriggers(); //removes old time triggers

  var somedata = loadTaskData({email: "" + Session.getUser().getEmail()});
  var remainingData = processTaskData(somedata);

    if(remainingData == null){
       return; //we are finished here
    } 

  removePreviousAndSaveRemainingTaskData(remainingData);

  var timeTrigger = ScriptApp.newTrigger("timeDrivenEvent").timeBased().after(10 * 1000).create();

} 
```

*   用户第一次调用 doGet()
*   在处理完所有数据之前，脚本会以 10 秒的间隔调用自身（例如 2 分钟的处理，10 秒没有任何反应，然后再进行 2 分钟的处理......）
*   处理数据的大小约为几千字节，处理时间通常需要 1-2 分钟。

**有时**脚本被中断并且数据未完全处理，我会发生什么！我没有收到任何电子邮件警报，并且日志或执行记录中没有任何内容 - 一切看起来都很好。

我开始认为启动脚本方法可能很快 10 秒，但毕竟它在 API 中......

有任何想法吗 ？这是唯一可能的解决方案，如何将大任务分成更小的部分，因为 Google App Script 的运行时间不能超过 5-6 分钟（请参阅配额）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:15:56.837

正如评论中所推荐的那样，有一个周期性的时间触发器效果很好。

我只是想知道为什么时间触发链接不起作用！我做了什么原则打破了 Google App Script 不喜欢那样。

文档：[https ://developers.google.com/apps-script/class_clocktriggerbuilder](https://developers.google.com/apps-script/class_clocktriggerbuilder)

方法 everyMinutes 将要创建的触发器设置为在传递的分钟数间隔内触发，该间隔必须是 1、5、10、15 或 30 之一。

# haskell - 访问返回值的幻像类型

> ID：14972243
> 
> 赞同：2
> 
> 时间：2013-02-20T04:21:36.657
> 
> 标签：haskell, typeclass, phantom-types

下面是一个模算数 Num 实例的实现，它以`Data.Fixed`.

我想编写一个替代实现，`fromRational`它看起来像：

```
fromRational r = case invertMod (denominator r) theModulus of
                   Just inv -> normalize $ (numerator r) * inv
                   Nothing -> error "..." 
```

但我不知道我会用什么`theModulus`。与其他类型类函数不同，我没有`Modular a`可以调用的类型值`modulus`。

```
{-# LANGUAGE NoMonomorphismRestriction #-}

import Math.NumberTheory.Moduli (invertMod)
import Data.Ratio (numerator, denominator)

class HasModulus a where
  modulus :: p a -> Integer

withType :: (p a -> f a) -> f a
withType foo = foo undefined

withModulus :: (HasModulus a) => (Integer -> f a) -> f a
withModulus foo = withType (foo . modulus)

newtype Modular a = M Integer

normalize :: HasModulus a => Integer -> Modular a
normalize x = withModulus $ \m -> M (x `mod` m)

instance (HasModulus a) => Num (Modular a) where
  (M a) + (M b) = normalize (a+b)
  (M a) - (M b) = normalize (a-b)
  (M a) * (M b) = normalize (a*b)
  negate (M a)  = normalize (-a)
  abs           = id
  signum _      = fromInteger 1
  fromInteger   = normalize

instance (HasModulus a) => Fractional (Modular a) where
  recip ma@(M a) = case invertMod a (modulus ma) of
                     Just inv -> normalize $ inv
                     Nothing  -> error "divide by zero error"
  ma / mb        = ma * (recip mb)
  fromRational r = (fromInteger $ numerator r) / (fromInteger $ denominator r)

instance (HasModulus a) => Show (Modular a) where
  show mx@(M x) = (show x) ++ " mod " ++ (show $ modulus mx)

data M5 = M5
data M7 = M7

instance HasModulus M5 where modulus _ = 5
instance HasModulus M7 where modulus _ = 7

bar = 1 / 3

main = do print $ (bar :: Modular M5)
          print $ (bar :: Modular M7) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:12:15.983

一种`fromRational`更接近您的初始 Ansatz 的方法是

```
fromRational r = let x = case invertMod (denominator r) (modulus x) of
                           Just inv -> normalize $ (numerator r) * inv
                           Nothing -> error "..."
                 in x 
```

由于结果是 类型`Modular a`，我们可以从中获得模数（无需检查）。所以我们只需要给它命名，这样我们就可以在需要的地方引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:35:30.150

我想通了...关键是使用该`withModulus`功能：

```
mdivide :: HasModulus a => Integer -> Integer -> Modular a
mdivide x y = withModulus $ M . mdiv' x y
                where mdiv' x y m =
                        case invertMod y m of
                          Just inv -> (x * inv) `mod` m
                          Nothing  -> error "..." 
```

进而...

```
fromRational r = mdivide (numerator r) (denominator r) 
```

# android - MediaRecorder 不录制音频

> ID：14972245
> 
> 赞同：1
> 
> 时间：2013-02-20T04:21:55.017
> 
> 标签：android, audio-recording, android-mediarecorder

我尝试使用 MediaRecorder 录制音频：

```
MediaRecorder recorder= new MediaRecorder();
recorder.reset();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);//
recorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setOutputFile(path);
recorder.setMaxDuration(30*60*1000);
recorder.prepare();
recorder.start(); 
```

代码工作正常，运行时没有异常发生，有时如果文件将创建，则文件未在 SDCard 上创建，则文件大小为 0KB。

我还在 return what=802 和 extra=6 中注册了 Error 和 Info 侦听`OnInfoListener` `OnErrorListener`器 `OnInfoListener public void onInfo(MediaRecorder mr, int what, int extra)`我已经在真实设备上尝试过此代码但不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:49:47.827

你可以试试这个：

```
 mRecorder = new MediaRecorder();
                mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                mRecorder.setOutputFile(mFileName);
                mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

                try {
                    mRecorder.prepare();
                } catch (IOException e) {
                    Log.e("start", "prepare() failed");
                }

                mRecorder.start(); 
```

如果您收到任何错误，请粘贴 logcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:36:45.847

试试这对我有用：

```
MediaRecorder recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setOutputFile(path);
recorder.prepare();
recorder.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T09:33:38.847

这是 MediaRecorder 捕获媒体的绝佳参考。 [http://developer.android.com/guide/topics/media/audio-capture.html](http://developer.android.com/guide/topics/media/audio-capture.html)

本教程中使用的示例代码无需任何更改即可工作。（只需确保您在清单文件中添加了必要的权限）

# c++ - 在数组中搜索和删除函数

> ID：14972247
> 
> 赞同：-1
> 
> 时间：2013-02-20T04:22:21.000
> 
> 标签：c++, arrays, function

我有一个用于管理名为“client_DB”的记录数据库的程序。数组“client_DB”由客户手机通话记录组成。每个客户通话记录包含八个字段，如下所示：1）十位手机号码（字符串，无破折号），2）拨打电话时使用的中继站数量（整数），3）电话长度通话分钟数（整数），4）通话净成本（双），5）税率（双），6）通话税（双），7）通话总成本（双）和8 ) 名为“discount_aval”的字符串字段，值为“yes”或“no”。数组 client_DB 的容量 (SIZE) 为 20 条记录。

它从一个名为“client_data.txt”的输入文件中读取，该文件由以下值组成：

```
9546321555  0   0   yes
5612971340  5   50  no
3051234567  8   25  no
7542346622  24  17  no
3054432762  15  30  yes
9544321011  50  100 yes
8776219988  87  82  yes
9042224556  4   5   yes
7877176590  11  1   no
5617278899  20  45  no
9546321555  4   3   yes
5612971340  79  86  no
3051234567  8   25  no
7542346622  24  118 no
3054432762  115 25  yes
9544321011  43  10  yes
8776219988  265 22  yes
9042224556  2   5   yes
7877176590  89  67  no
5617278899  40  56  no 
```

我的删除函数只删除第一个值，如果我输入删除任何其他值，它根本不会！我的搜索功能只是给了我 2 个数字。这是关闭的，它不是我想要的。帮助？我希望能够向用户询问单元格编号，然后让它搜索整个数组并找到它并删除它。我希望我的搜索也抓住一个输入，找到它并给我它的位置。我试过了，但我不知道我做错了什么。在我的主要功能中，当用户从功能菜单中选择它时，我调用了这两个功能。这是我的代码：

```
#include <iostream>
#include <string>
#include <fstream>

//************************************************************************
//Name:  Kevin          Due Date: 022113
//Instructor: Dr. Bullard               Total Points:  100 pts
//Assignment2: client_call.cpp          UsIDFAU: 
//:

using namespace std;

const int CAPACITY = 20;

 class client_db
  {
  public:
    string cellnum;
    int numofrelay;
    int call_length;
    double net_cost;
    double tax_rate;
    double call_tax;
    double total_cost;
    string discount_aval;
   };

bool IsFull(int); //returns true if the array is full; otherwise false.
bool IsEmpty(int count);// returns ture if the array is empty; otherwise false.

void Add(client_db A[], int & count, client_db & db);
void Remove(client_db A[], int *count, string name);// removes an item from the array if it is there
void Print_DB(client_db A[], int count);//prints to output file
void Call_stats(client_db A[], int count);// prints all the items in the array
int Search_DB(client_db A[], int count, string name); //if the name is in the array, its location is returned
//                                        //otherwise return -1;
//
bool IsFull(int count)
////Description: Determines if the array is full
{
    return (count == CAPACITY);
}

bool IsEmpty(int count)
////Description: Determines if the array is empty
{
    return (count == 0);
}

void Process (client_db A[], int count)
{

    for(int i=0; i<count; i++)
    {
    if (A[i].numofrelay >=1 && A[i].numofrelay<=5)
    {
        A[i].tax_rate=0.01;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    else if (A[i].numofrelay >=6 && A[i].numofrelay<=11)
    {
        A[i].tax_rate=0.03;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    else if (A[i].numofrelay>=12 && A[i].numofrelay<=20)
    { 
        A[i].tax_rate=0.05;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].numofrelay);

    }
    else if (A[i].numofrelay >=21 && A[i].numofrelay<=50)
    {
       A[i].tax_rate =0.08;
       A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    else if (A[i].numofrelay >50)
    {
        A[i].tax_rate =0.12;
        A[i].net_cost = ((A[i].numofrelay / 50.0)*0.40*A[i].call_length);

    }
    A[i].call_tax = ((A[i].tax_rate)/(100))*(A[i].net_cost);
    A[i].total_cost = A[i].net_cost + A[i].call_tax;
    }
}

void Print_DB(client_db A[], int count)

//Description: Prints the items stored in A to the standard i/o device
{

    string filename;
    cout<<"Enter output filename: "; //geting filename
    cin>>filename;

    ofstream output; //declaring an output file stream

    output.open(filename.c_str()); // c_str() converts a C++ string into a 
                                  // c-style string (char array) &
                                  //open binds an ofstream to a file
    for(int i=0; i<count; i++)
    {

        output<<A[i].cellnum<<"\t"
              <<A[i].numofrelay<<"\t"
              <<A[i].call_length<<"\t"
              <<A[i].net_cost<<"\t"
              <<A[i].tax_rate<<"\t"
              <<A[i].call_tax<<"\t"
              <<A[i].total_cost<<"\t"
              <<A[i].discount_aval<<endl;

    }

    output.close();
}

int Search(client_db A[], int count, string cellnum)
////Description: Locates cellnumbers in A's fields
{
    cout<<"Please enter a phone number:   "<<endl;
    cin>>cellnum;

    for(int i=0; i<count; i++)
    {
        if (cellnum == A[i].cellnum)
        {
            cout<<i<<endl;
        }

    }
   return -1;
}

void Add(client_db A[], int &count)
////Description: Adds key to the array
{
    if (!IsFull(count))
    {
        cout<<"Enter a cellphone number, number of relay stations and the call lenght and if a discount is available: ";
        cin>>A[count].cellnum>>A[count].numofrelay>>A[count].call_length>>A[count].discount_aval;
        count++;

    }
    else
    {
        cout<<"The list is full\n";
    }

}

void Add(client_db A[], int &count, client_db &db)
////Description: Adds key to the array
{
    if (!IsFull(count))
    {
        A[count] = db; 
        count++;

    }
    else
    {
        cout<<"The list is FULL! \n";
    }

}
void Remove(client_db A[], int *count, string cellnum )

////Description: Removes the number from the array is it is there
{

    int loc = Search(A,*count,cellnum);

    if (IsEmpty(*count))
    {
        cout<<"There is nothing to remove\n";
        return;
    }
    else if (loc == -1)
    {
        cout<<"Number is not in data\n";
    }
    else
    {
        for(int j=loc; j<(*count)-1; j++)
        {
            A[j] = A[j+1];
        }
        (*count)--;

    }
}

void Call_stats(client_db A[],int count) // prints to screen
{

    for(int i=0; i<count; i++)
    {
        cout<<A[i].cellnum<<"\t"
            <<A[i].numofrelay<<"\t"
            <<A[i].call_length<<"\t"
            <<A[i].discount_aval<<endl;

    }
}
void Menu ()
{
    cout<<"The values of the filename you entered have been recognized"<<endl;
    cout<<"Please enter the letter of your application of choice"<<endl;
    cout<<"       "<<endl;
    cout<<"************  WELCOME TO THE MAIN MENU  ************"<<endl;
    cout<<" Add an item...........................A"<<endl;
    cout<<" Remove an item........................R"<<endl;
    cout<<" Search for an item....................S"<<endl;
    cout<<" Print current data....................P"<<endl;
    cout<<" Print to output file..................O"<<endl;
    cout<<"****************************************************"<<endl;
}

int main()
{

    char answer;
    char answer2;
    client_db CLIENT[CAPACITY]; //declaring database
    int count = 0;   //initializing count
    string cellnum;

    string filename;
    cout<<"Hello!, this program holds clients call data records."<<endl;
    cout<<"Enter input filename: "; //geting filename
    cin>>filename;

    ifstream input; //declaring an input file stream

    input.open(filename.c_str()); // c_str() converts a C++ string into
        while(count<CAPACITY && !input.eof()) //reading until the end of the file (eof=end-of-file)
    {

        input>>CLIENT[count].cellnum
        >>CLIENT[count].numofrelay
        >>CLIENT[count].call_length
        >>CLIENT[count].discount_aval;

        count++;

    }

    do
{

  Menu();
  cout<<"Please enter a command letter:  "<<endl;
    cin>>answer;
    client_db db;

    switch (answer)
{

case 'A' : 
    cout<<"Enter a cellphone number, number of relay stations and the call lenght and if a discount is available: "<<endl;
    cin>>db.cellnum>>db.numofrelay>>db.call_length>>db.discount_aval;
    Add(CLIENT, count, db);
break;
case 'R' : Remove(CLIENT,&count,cellnum);
break;
case 'S' : 
    Search(CLIENT,count,cellnum);

break;
case 'P' : Call_stats(CLIENT,count);
break;
case 'O' :
    Process(CLIENT,count); //how do i set the precision for this?
    Print_DB(CLIENT,count);
break;
    }
     cout<<"Would you like to make another command?(y/n):   "<<endl;
   cin>>answer2;
} while (answer2 == 'Y' || answer2 == 'y');
 cout<<"Goodbye"<<endl;
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:03:38.717

这似乎正是您希望函数返回的内容。请注意，索引 2 和 12 处的电话号码是相同的。事实上，列表中似乎只有 10 个唯一的电话号码。因此，在搜索这 10 个数字中的每一个时，您将得到 2 个数字作为输出，因为它们都有一个重复项。

如果您只想打印第一个匹配项，只需添加`break;`如下：

```
for(int i=0; i<count; i++)
{
    if (!(A[i].cellnum.compare(cellnum)))
    {
        cout<<i<<endl;
        break;
    }

} 
```

在搜索功能中。如果不需要相同的电话号码，您可以考虑在允许用户搜索电话号码之前进行检查。

编辑：我看到您的删除功能也无法正常工作。您尝试使用 Search 函数获取电话号码的索引，但 search 函数始终返回 -1。我会添加`break`上面提到的，然后返回`i`而不是 -1。`i`在 for 循环之外声明它才能工作。

由于您希望在选择“删除”时删除所有事件，我会执行以下操作：

在您的主要功能中：

```
case 'R' : 
cout<<"Please enter a phone number:   "<<endl;
cin>>cellnum;
Remove(CLIENT,&count,cellnum); break; 
```

和

```
case 'S' : 
cout<<"Please enter a phone number:   "<<endl;
cin>>cellnum;
Search(CLIENT,count,cellnum); break; 
```

搜索：

```
int Search(client_db A[], int count, string cellnum){
   int index = -1;

   for(int i=0; i<count; i++)
   {
       if (!(A[i].cellnum.compare(cellnum)))
       {
           cout<<i<<endl;
           index = i;
           break;
       }
   }
   return index;
} 
```

并删除：

```
void Remove(client_db A[], int *count, string cellnum ){
int loc;
while((loc=Search(A,*count,cellnum)) != -1){
      if (IsEmpty(*count)){
          cout<<"There is nothing to remove\n";
          return;
      }
      else if (loc == -1){
          cout<<"Number is not in data\n";
      }
      else{
          for(int j=loc; j<(*count)-1; j++)
          {
              A[j] = A[j+1];
          }
          (*count)--;

      }
}
} 
```

# ruby-on-rails-3 - SimpleForm 默认输入类

> ID：14972253
> 
> 赞同：5
> 
> 时间：2013-02-20T04:22:46.553
> 
> 标签：ruby-on-rails-3, simple-form

我正在使用 SimpleForm + Bootstrap。如何`type="text"`使用 class = 向所有输入添加属性`span12`？

输出类似这样的东西：

```
<div class="controls"><input autofocus="autofocus" class="string required span12" id="user_first_name" name="user[first_name]" required="required" size="50" type="text" value=""></div> 
```

我试过玩`config.wrappers`但是这个

```
ba.use :input,  :wrap_with => { :class => 'span12' } 
```

不起作用。它添加到包装器而不是修改输入标签。有什么想法吗？

```
SimpleForm.setup do |config|
  config.wrappers :bootstrap, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|
    b.use :html5
    b.use :placeholder
    b.use :label
    b.wrapper :tag => 'div', :class => 'controls' do |ba|
      ba.use :input
      ba.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
      ba.use :hint,  :wrap_with => { :tag => 'p', :class => 'help-block' }
    end
  end
  config.default_wrapper = :bootstrap
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T20:44:29.943

您可以通过将 string_input.rb 类文件添加到您的 Rails 加载路径（即 app/inputs/string_input.rb）来简单地覆盖字符串输入的 simple_form 默认值，并包括以下内容：

```
class StringInput < SimpleForm::Inputs::StringInput
  def input_html_classes
    super.push('span12')
  end
end 
```

如果您需要为其他类型的输入添加更多默认类，您可以查看提供的各种输入类型：

[https://github.com/plataformatec/simple_form/tree/master/lib/simple_form/inputs](https://github.com/plataformatec/simple_form/tree/master/lib/simple_form/inputs)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T11:11:50.723

我有一个类似的问题，经过一些研究，我发现使用 wrapper api 不支持这个问题。

> 您可以做的最好的事情是在每个表单中使用 :defaults 选项，而不是为每个输入添加。

[https://github.com/plataformatec/simple_form/issues/754](https://github.com/plataformatec/simple_form/issues/754)

你可以这样实现：`simple_form_for(@my_instance, defaults: { input_html: { class: 'span12' }})`

您还可以选择使用自定义表单生成器。 [https://github.com/plataformatec/simple_form#custom-form-b​​uilder](https://github.com/plataformatec/simple_form#custom-form-builder)

# django - Django 用户配置文件表单空

> ID：14972254
> 
> 赞同：1
> 
> 时间：2013-02-20T04:22:52.337
> 
> 标签：django, django-forms, django-users

我知道他们已经有很多关于此的帖子，但我尝试了很多解决方案，但我无法显示我的表格！

我想做一些非常简单的事情（我是 Django 初学者），我创建了一个特定的 UserProfile 来扩展基本的，我想让用户编辑它：

这是我的模型：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    cc = models.CharField(max_length=400, blank=True)
    lang = models.CharField(max_length=5, blank=True, )
    def __unicode__(self):
        return unicode(self.user.email)

class UserProfileForm(forms.ModelForm):
    class meta:
        model = UserProfile
    def __init__(self,*args,**kwargs):
        super(UserProfileForm, self).__init__(*args, **kwargs)
        self.user = kwargs['instance']

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

这是我的视图方法：

```
@login_required
def accountform(request):
    data = {}
    data.update(csrf(request))
    user_profile = request.user.get_profile()
    data['form'] = UserProfileForm(instance=user_profile)
    print user_profile
    return render(request, 'accountform.html', data) 
```

这是我的模板：

```
<form action="/contact/" method="post">
    {{ form.as_p }}
    <input type="submit" value="Submit" />
</form> 
```

当我显示来自我只看到提交按钮...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T04:48:40.857

内部`meta`类应该大写 -`Meta`

```
class UserProfileForm(forms.ModelForm):
    class Meta:  # not meta
        model = UserProfile 
```

# jquery - 添加元素后 position().top 不会改变

> ID：14972256
> 
> 赞同：0
> 
> 时间：2013-02-20T04:23:13.417
> 
> 标签：jquery, html, css

所以我在这样的 div 中有一个 div

```
<div id="container"> 
<div id="bottom"> </div>
</div> 
```

容器是绝对定位的。

我正在使用 .before() 添加元素

```
$("#bottom").before('<p>Some Paragraph</p>'); 
```

然后我试图向下滚动到容器的底部

```
$("#container").scrollTop($('#bottom').position().top); 
```

它工作了一段时间，然后停止工作。

如果我打印“$('#bottom').position().top”，我看到它会增加到某个点然后停止。

我这样做的原因是因为我在滚动之前也有一个动画，它与动画配合得很好，但正如我所说的那样。

我想出的唯一临时解决方案是这个（基本上放了一些大数字）。

```
 $("#container").scrollTop(10000000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:23:36.323

使用`offset()`代替`position()`：

```
$("#container").scrollTop($('#bottom').offset().top); 
```

见：[http ://api.jquery.com/offset/](http://api.jquery.com/offset/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:25:26.843

使用插件进行滚动怎么样？

[Jquery ScrollTo 做得很好！](http://demos.flesler.com/jquery/scrollTo/)

```
$(...).scrollTo( $('#container'), timeInMs ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T19:58:04.047

在我的案例中，我注意到在页面上添加元素后，浏览器需要一点延迟才能完成元素的新高度的渲染。

解决方案是：

```
setTimeout(function(){
    $("#container").scrollTop($('#bottom').position().top);
}, 50); 
```

PS.：50 是一个特别随意的数字，在我的情况下它只适用于 0。

# python - 在python中创建对象实例的问题

> ID：14972257
> 
> 赞同：1
> 
> 时间：2013-02-20T04:23:17.310
> 
> 标签：python, class, object

我想定义一个类并创建一个对象实例。但总是出错。代码如下：

```
class complex:
    def _init_(self,realpart,imagpart):
        self.r=realpart
        self.i=imagpart

x=complex(3,4) 
```

错误信息是：

```
Traceback (most recent call last):<br>
  File "pyshell#5", line 1, in "module" <br>
  x=complex(3,4) <br>
  TypeError: object.__new__() takes no parameters 
```

那么问题是什么？

感谢您的阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:25:02.883

`_init_`每边应该有两个下划线：

```
>>> class complex:
...     def __init__(self,realpart,imagpart):
...         self.r=realpart
...         self.i=imagpart
... 
>>> x=complex(3,4) 
```

另外，如您所知，Python 已经有一个`complex`类型：

```
>>> 2+3j
(2+3j)
>>> complex(2, 3)
(2+3j) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:25:11.193

`__init__`应该有2个下划线而不是1个

所以

```
def _init_(self,realpart,imagpart): 
```

应该

```
def __init__(self,realpart,imagpart): 
```

*   另一个建议是，元组解包不是多个分配，而是更具可读性和边际效率

*   更喜欢新的类型类构造，它派生自`object`

*   [PEP8 建议](http://www.python.org/dev/peps/pep-0008/#class-names)使用 CamelCase 作为类名

*   如果可用，请始终使用电池，而不是自己滚动。Python 默认已经支持复杂类型

所以就这样

```
class complex(object):
    def __init__(self,realpart,imagpart):
        self.r, self.i=realpart, imagpart 
```

# jquery-easyui - easyui treegrid“加载”方法

> ID：14972260
> 
> 赞同：1
> 
> 时间：2013-02-20T04:23:48.410
> 
> 标签：jquery-easyui

你好我想问一下easyui treegrid的加载方法

我从这个URL [http://jeasyui.com/documentation/treegrid.php](http://jeasyui.com/documentation/treegrid.php)

阅读了easyui treegrid文档我没有找到treegrid加载方法，但是因为我知道来自datagrid的treegrid依赖，所以我去这个网址[http://jeasyui.com/documentation/datagrid.php](http://jeasyui.com/documentation/datagrid.php)

在easyui datagrid中，加载方法代码格式，看起来像这样让我稍微解释一下上面的代码，上面的代码加载datagrid有一些条件，代码='01' 和 name='name01'，来自数据网格 URL。代码和名称在 datagrid URL php 文件中被视为 HTTP_POST_VAR，进一步用于 SQL 条件值但是，当我尝试在我的 treegrid 中实现 datagrid 加载方法时，如下所示的代码它不能发送 HTTP_POST_VAR
*`$('#dg').datagrid('load',{code: '01',name: 'name01'});`*

*`$('#dg').treegrid('load',{code: '01',name: 'name01'});`*

是真的，easyui treegrid没有像datagrid这样的加载方法吗？有没有其他解决方案可以在某些条件下加载easyui treegrid？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:45:32.807

您可以使用如下所示的“loadData”动态加载 treegrid 数据，

```
$.ajax({
    type: "POST",
    async : false,
    url:'someURL.action?code=01&name=name01',       
    success: function(obj) {
        $('#treegridId').treegrid('loadData', obj);
     }
}); 
```

或简单地通过

```
$('#treegridId').treegrid({  
    url:'someURL.action?code=01&name=name01'}); 
```

# android - 线性布局内的两个 ListView

> ID：14972264
> 
> 赞同：4
> 
> 时间：2013-02-20T04:24:19.983
> 
> 标签：android, android-listview

请帮助我在线性布局中垂直放置两个列表视图的布局。问题是如果 list1 的数据多于 list2 不可见且不可滚动，则使用 scollview 不是解决方案。

```
 <?xml version="1.0" encoding="utf-8"?>
     <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backrepeat"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/shape_calendar_top"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/prevMonth"
            android:layout_width="50dp"
            android:layout_height="55dp"
            android:src="@drawable/button_events_previous" >
        </ImageView>

        <TextView
            android:id="@+id/currentMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.6"
            android:gravity="center_vertical|center_horizontal"
            android:text="Janauary"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#d458b1"
            android:textStyle="bold" >
        </TextView>

        <ImageView
            android:id="@+id/nextMonth"
            android:layout_width="50dp"
            android:layout_height="55dp"
            android:src="@drawable/button_events_next" />
    </LinearLayout>

        <TextView
            android:id="@+id/direction_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_marginTop="10dp"
            android:background="#DA81F5"
            android:paddingLeft="5dp"
            android:paddingTop="5dp"
            android:text="PRESS RELEASES"
            android:textColor="#FFFFFF"
            android:textSize="13dip" />

        <ListView
            android:id="@+id/eventsList"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/direction_label"
            android:background="#ffffff" >
        </ListView>

        <TextView
            android:id="@+id/direction_label1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:background="#DA81F5"
            android:paddingLeft="5dp"
            android:paddingTop="5dp"
            android:text="SPEECHES"
            android:textColor="#FFFFFF"
            android:textSize="13dip" />

        <ListView
            android:id="@+id/eventsList1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/direction_label1"
            android:background="#ffffff" >
        </ListView>

    <TextView
        android:id="@+id/empty_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

如果我使用滚动视图，那么它只会为第一行包装列表视图。

请提出一些建议。

编辑 ：

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backrepeat"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/shape_calendar_top"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/prevMonth"
            android:layout_width="50dp"
            android:layout_height="55dp"
            android:src="@drawable/button_events_previous" >
        </ImageView>

        <TextView
            android:id="@+id/currentMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.6"
            android:gravity="center_vertical|center_horizontal"
            android:text="Janauary"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#d458b1"
            android:textStyle="bold" >
        </TextView>

        <ImageView
            android:id="@+id/nextMonth"
            android:layout_width="50dp"
            android:layout_height="55dp"
            android:src="@drawable/button_events_next" />
    </LinearLayout>

        <TextView
            android:id="@+id/direction_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_marginTop="10dp"
            android:background="#DA81F5"
            android:paddingLeft="5dp"
            android:paddingTop="5dp"
            android:text="PRESS RELEASES"
            android:textColor="#FFFFFF"
            android:textSize="13dip" />

        <ListView
            android:id="@+id/eventsList"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:layout_below="@+id/direction_label"
            android:background="#ffffff" >
        </ListView>

        <TextView
            android:id="@+id/direction_label1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:background="#DA81F5"
            android:paddingLeft="5dp"
            android:paddingTop="5dp"
            android:text="SPEECHES"
            android:textColor="#FFFFFF"
            android:textSize="13dip" />

        <ListView
            android:id="@+id/eventsList1"
            android:layout_width="fill_parent"
                 android:layout_height="0dp"
            android:layout_weight="1"
            android:layout_below="@+id/direction_label1"
            android:background="#ffffff" >
        </ListView>

    <TextView
        android:id="@+id/empty_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

如果我使用它，则不会显示任何内容:(

阿斯米

编辑：两个列表视图的代码：

```
 {
                arrayofWebData.add(cn);
                listAdapter = new SelectArralAdapter(getActivity(),
                        arrayofWebData);
                List_events.setAdapter(listAdapter);
            } 
```

对于第二个 ListView，如下所示：

```
 if ((year == event_year) && (event_month == month))

            {
            arrayofWebDataPress.add(cn);
            listAdapter_press = new   SelectArralAdapter_Press(getActivity(),arrayofWebDataPress);
                List_events_press.setAdapter(listAdapter_press);
                i++;

            } 
```

两个 ListViews 的数组适配器：

```
 class SelectArralAdapter_Press extends ArrayAdapter<PressDB> {

    private LayoutInflater inflater;

    public SelectArralAdapter_Press(Context context,
            ArrayList<PressDB> arrayofWebDataPress) {

        super(context, R.layout.speech_list_item, R.id.event_title,
                arrayofWebDataPress);
        inflater = LayoutInflater.from(context);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder_Press holder;
        if (convertView == null) {

            convertView = inflater.inflate(R.layout.speech_list_item, null);

            holder = new ViewHolder_Press(convertView);
            convertView.setTag(holder);

        } else {

            holder = (ViewHolder_Press) convertView.getTag();
        }
        holder.populateFrom(arrayofWebDataPress.get(position));

        return (convertView);
    }

}

  class ViewHolder_Press{
    public TextView event_name = null;
    public TextView event_date = null;

    public ViewHolder_Press(View row) {
        event_name = (TextView) row.findViewById(R.id.event_title);
        event_date = (TextView) row.findViewById(R.id.event_date_time);

    }

    void populateFrom(PressDB eventsMainDB) {
        event_name.setText(eventsMainDB.press_name);
        event_date.setText(eventsMainDB.press_date + " ");
    }
} 
```

对于第二个 Adaper ：

```
 class SelectArralAdapter extends ArrayAdapter<SpeechDB> {

    private LayoutInflater inflater;

    public SelectArralAdapter(Context context,
            ArrayList<SpeechDB> arrayofWebData) {

        super(context, R.layout.speech_list_item, R.id.event_title,
                arrayofWebData);
        inflater = LayoutInflater.from(context);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        if (convertView == null) {

            convertView = inflater.inflate(R.layout.speech_list_item, null);

            holder = new ViewHolder(convertView);
            convertView.setTag(holder);

        } else {

            holder = (ViewHolder) convertView.getTag();
        }
        holder.populateFrom(arrayofWebData.get(position));

        return (convertView);
    }

}

class ViewHolder {
    public TextView event_name = null;
    public TextView event_date = null;

    public ViewHolder(View row) {

        event_name = (TextView) row.findViewById(R.id.event_title);

        event_date = (TextView) row.findViewById(R.id.event_date_time);

    }

    void populateFrom(SpeechDB eventsMainDB) {
        event_name.setText(eventsMainDB.speech_name);

        event_date.setText(eventsMainDB.speech_date + " ");

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:05:30.880

尝试这个。

如果您想使用 xml 设计，那么您必须通过使用**权重（这是最可取的）**或通过在**dp**中提供固定大小来给出修复大小。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backrepeat"
    android:weightSum="1"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/shape_calendar_top"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/prevMonth"
            android:layout_width="50dp"
            android:layout_height="55dp"
            android:src="@drawable/button_events_previous" >
        </ImageView>

        <TextView
            android:id="@+id/currentMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.6"
            android:gravity="center_vertical|center_horizontal"
            android:text="Janauary"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#d458b1"
            android:textStyle="bold" >
        </TextView>

        <ImageView
            android:id="@+id/nextMonth"
            android:layout_width="50dp"
            android:layout_height="55dp"
            android:src="@drawable/button_events_next" />
    </LinearLayout>

    <TextView
        android:id="@+id/direction_label"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_marginTop="10dp"
        android:background="#DA81F5"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="PRESS RELEASES"
        android:textColor="#FFFFFF"
        android:textSize="13dip" />

    <ListView
        android:id="@+id/eventsList"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.5"
        android:layout_below="@+id/direction_label"
        android:background="#ffffff" >
    </ListView>

    <TextView
        android:id="@+id/direction_label1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:background="#DA81F5"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="SPEECHES"
        android:textColor="#FFFFFF"
        android:textSize="13dip" />

    <ListView
        android:id="@+id/eventsList1"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.5"
        android:layout_below="@+id/direction_label1"
        android:background="#ffffff" >
    </ListView>

    <TextView
        android:id="@+id/empty_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

我在设计时得到这个屏幕。

![在此处输入图像描述](../Images/cc3842ba9ad0ecbeb469ce0529dda178.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:56:48.507

我用过：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFF">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center">

// first linearlayout which is holding one textview and a listview
<LinearLayout
    ">      
    <TextView 
        />        
    <ListView
        android:id="@+id/failed_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"/>
 </LinearLayout>

// second linearlayout which is holding one textview and a listview
<LinearLayout
    ">      
    <TextView 
        />        
    <ListView
        android:id="@+id/failed_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"/>
 </LinearLayout>

// third linearlayout which is holding one textview and a listview
<LinearLayout
    ">      
    <TextView 
        />        
    <ListView
        android:id="@+id/failed_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"/>
 </LinearLayout>

// and finally i have added a button in the parent linearlayout
<Button
     />

</LinearLayout>
</ScrollView> 
```

你可以试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:12:53.847

尝试如下：

这是同一布局文件中多个 ListView 的解决方案。您可以将布局文件设置为以下布局，方法是为`LinearLayout`.

```
<LinearLayout android:layout_weight="1" 
                    android:layout_height="fill_parent" 
                    android:layout_width="fill_parent">

                <ListView   android:id="@+id/list1" 
                            android:layout_height="fill_parent" 
                            android:layout_width="fill_parent">

                </ListView>
    </LinearLayout>

<LinearLayout android:layout_weight="1" 
                android:layout_height="fill_parent" 
                android:layout_width="fill_parent">

            <ListView   android:id="@+id/list2" 
                        android:layout_height="fill_parent" 
                        android:layout_width="fill_parent">

            </ListView>
</LinearLayout> 
```

**Java 代码**

```
public class MainActivity extends Activity {
private ListView lv1 = null;
private ListView lv2 = null;
private String s1[] = {"a", "b", "c", "d", "e", "f"};
private String s2[] = {"r", "s", "t", "u", "v", "w", "x"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    lv1 = (ListView) findViewById (R.id.list1);
    lv2 = (ListView) findViewById (R.id.list2);

    lv1.setAdapter(new ArrayAdapter<String> (this, android.R.layout.simple_list_item_1, s1));
    lv2.setAdapter(new ArrayAdapter<String> (this, android.R.layout.simple_list_item_1, s2));

} 
} 
```

有关更多详细信息，您可以参考给出相同解决方案的[链接。](https://stackoverflow.com/questions/3968171/android-split-the-screen-in-2-equals-parts-with-2-listviews)

我希望它会帮助你。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T04:38:33.860

你可以拿这样的东西。

```
<LinearLayout>
   <ScrollView>
     <LinearLayout>
       {Your All code of controls}
     </LinearLayout>
   </ScrollView>
</LinearLayout> 
```

或者 uo 可以`<ScrollView>`作为父标签。
你可以做这样的事情。根据我的知识...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T04:57:23.777

我通过使用节标题并将两个列表视图组合成一个列表视图并通过节标题对它们进行分类来解决了这个问题。

# javascript - jquery自动打印行号

> ID：14972270
> 
> 赞同：0
> 
> 时间：2013-02-20T04:24:57.003
> 
> 标签：javascript, jquery

我有一个 10 行的表，是否可以根据大小将行号（从 1 到 9，第一行是 NO&title，第二行应该是 1）打印到 td 类“sno”桌子？这是html：

```
<table width="100%" border="1">
  <tr>
    <td width="23%">No.</td>
    <td width="77%">Title</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">&nbsp;</td>
    <td>&nbsp;</td>
  </tr> 
```

结果应该是

```
<table width="100%" border="1">
  <tr>
    <td width="23%">No.</td>
    <td width="77%">Title</td>
  </tr>
  <tr>
    <td class="sno">1</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">2</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">3</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">4</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">5</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">6</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">7</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">8</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td class="sno">9</td>
    <td>&nbsp;</td>
  </tr> 
```

问题不是生成表格，而是打印正确的数字来定位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:33:14.633

尝试简单的

```
$('table tbody tr').not(":first").each(function(idx){
     $(this).children(":eq(0)").html(idx + 1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:38:42.687

试试这个：

```
$(document).ready(function(){
    $cells=$("table td.sno");
    for(var i=0;i<$cells.length;i++)
    {
        //  alert(i);
        $cells.eq(i).text(i);
    }
}); 
```

检查小提琴[http://jsfiddle.net/qcWec/1/](http://jsfiddle.net/qcWec/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:42:19.253

表行元素具有 rowIndex 属性，该属性是表的从零开始的序列号

它们所在的部分。因此，如果您有对单元格的引用，则可以使用：

```
var rowIndex = cell.parentNode.rowIndex; 
```

如果您在表格中有标题行，您可能应该将它们放在 thead 表格部分中，然后

您可以轻松地对 tbody 部分中的行进行编号，例如

```
<table>
  <thead>
    <tr>
        <td>head<td>head
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="sno"></td>
      <td>...</td>
    </tr>
    <tr>
      <td class="sno"></td>
      <td>...</td>
    </tr>
  </tbody>
</table> 
```

因此，现在您可以执行以下操作：

```
window.onload = function() {
  var table = document.getElementsByTagName('table')[0];
  var rows = table.tBodies[0].rows;

  for (var i=0, iLen=rows.length; i<iLen; i++) {
    rows[i].cells[0].innerHTML = i + 1;
  }
}; 
```

当然，您可以通过其他方式（例如类）获取行，但上述内容与此无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T04:48:55.237

这是 jsfiddle 示例：http: [//jsfiddle.net/3BBEN/](http://jsfiddle.net/3BBEN/)

```
$(document).ready(function(){
    //use a special class name or id for the table
    //using find I'm getting all tr elements in the table
    //using not(':eq(0)') I'm ignoring the first tr element
    //using each I'm iterating through the selected elements
    $('table').find('tr').not(':eq(0)').each(function(i){
        //using children('td:eq(0)') I'm getting the first td element inside the tr
        $(this).children('td:eq(0)').addClass('sno').text(i+1);
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T07:16:44.637

试试这个：：

```
$(document).ready(function(){
    var i=1;

    $('.sno').each(function(){
        $(this).text(i);
        i++;
    });
}); 
```

# asp.net-mvc - SQL Server Express 问题将 MVC4 应用程序部署到 IIS

> ID：14972279
> 
> 赞同：0
> 
> 时间：2013-02-20T04:25:22.400
> 
> 标签：asp.net-mvc, iis-7, visual-studio-2012, sql-server-express

在过去的两天里，我在谷歌（和这里）浏览了我的部署服务器上连接字符串的不同变体......如果我还有头发，我现在已经把它拔掉了......;）

我有一个可以在我的开发 Win7 机器上完美运行的应用程序，并且正在将其部署到测试服务器，然后再将其投入测试版。

测试服务器是带有 IIS 7 的 Windows 2008 R2。

我能够将应用程序部署到 IIS 并且该站点出现。

但是当我到达一个连接到本地主机上运行的 SQL Server Express 的页面时，它就死了。我还应该提到，该数据库已经存在于 SQL Server Express 实例上，并且我的 Winforms 和服务应用程序在连接到该数据库时运行良好。

My`web.config`包含以下连接字符串：

```
<add name="OIDEntities" 
     connectionString="metadata=res://*/Models.OID.csdl|res://*/Models.OID.ssdl|res://*/Models.OID.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;Initial Catalog=OID;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFramework&quot;" 
     providerName="System.Data.EntityClient" /> 
```

我得到的错误是：

> *基础提供程序在打开时失败。*

我尝试将 SQL Server 中的服务重置为`nt authority\network service`（以匹配应用程序池）。我还尝试创建 SQL Server 用户并使用以下连接字符串：

```
<add name="OIDEntities" 
     connectionString="metadata=res://*/Models.OID.csdl|res://*/Models.OID.ssdl|res://*/Models.OID.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;Initial Catalog=OID;User ID=OID_User;Password=MyPrivatePAss;MultipleActiveResultSets=True;Application Name=EntityFramework&quot;" 
     providerName="System.Data.EntityClient" /> 
```

我已经进入 SQL Server 配置管理器并配置/启用命名管道然后 TCP/IP 并使用主机 IP 通过连接字符串中的 server= 进行连接。

我可以使用用户名/密码登录 SQL Server Management Studio，还可以使用 IP 与`.\SQLExpress`.

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:03:26.037

好的，只花了 3 天时间就搞定了……我在 error.cshtml 中添加了以下代码：`@Html.DisplayFor(model => model.ActionName)

@Html.DisplayFor(model => model.ControllerName)

@Html.DisplayFor(model => model.Exception.Source)

@Html.DisplayFor(model => model.Exception.InnerException)

@Html.DisplayFor(model => model.Exception)`

这向我表明 IIS APPPOOL\[PoolName] 没有访问权限。我使用以下说明将此添加到我的 SQL 配置中：[将 IIS 7 AppPool 身份添加为 SQL Server 登录](https://stackoverflow.com/questions/1933134/add-iis-7-apppool-identities-as-sql-server-logons)

# xamarin.android - 动态解析没有文件名的程序集

> ID：14972281
> 
> 赞同：1
> 
> 时间：2013-02-20T04:25:27.230
> 
> 标签：xamarin.android

是的，我已经阅读了警告标签，并且我知道动态加载程序集有点不鼓励。也就是说，我有一个加载程序集的应用程序——它就是这样工作的。它在 Windows 上运行良好。在 Windows CE 上运行良好。我需要它在 Android 上“正常工作”，即使它需要一些按摩。

基本上，该应用程序是一个引擎，用于加载在运行时满足特定接口的插件 DLL（我们将其称为适配器）。在 Windows 下，它甚至可以在任何时候检测到 DLL 的出现并加载它——如果这在 Android 下不起作用，我很好。

我在工作时遇到的问题是让引擎加载它在设计/编译时知道的适配器，但*没有*将该适配器的名称硬编码到引擎代码中。我可以添加对适配器的引用以使其不被链接，但我真的，真的不想每次都添加 DLL 名称，因为 DLL 会随着不同的部署而变化，而且会导致巨大的头痛。

所以我想如果它被引用，它会进入 APK，我可以使用反射来加载它，如下所示：

```
var asm = Assembly.Load("TheAdapterName.dll"); 
```

初步测试表明，如果我只是在名称中硬编码，这适用于适配器，但我真的非常想避免这种情况。

所以我想也许我可以通过引用进行反思并提取名称，但奇怪的是，当我这样做时，并不是所有的引用都会真正出现。所以我这样做：

```
var refs = asm.GetReferencedAssemblies().Select(a => a.Name).ToArray(); 
```

我得到了一个包含 14 个程序集名称的数组。但是程序集（asm）有**16个**引用，其中一个是我需要加载的Adapter插件。适配器肯定在那里 - 哎呀我用`Assembly.Load`上面两行的全名并解决了。

我想，好吧，也许我可以找出我正在运行的文件夹的“路径”，然后在那里查找 DLL 并以这种方式加载。哈。经过几个小时试图找出一种方法来获得在 Debug 和 Release 下工作的路径后，我想出了更多的白发。

Sooooo......关于如何获得我知道在我的 APK 中的 DLL 名称的任何想法，但我不“知道”在构建时的名称（我正在加载它们并查看用于通过反射检测其“适应性”的接口）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:18:26.913

如果这些方法对您不起作用，那么我能想到的唯一建议是添加一个预构建步骤，该步骤更新 C# 或资产文件以提供您需要的列表。

显然这是额外的工作，但应该是完全自动化的，并且无论平台发生什么变化都可以保证工作。

* * *

顺便说一句，我还使用反射器查看了我的一个 mvx 项目 - 它显示与`asm.GetReferencedAssemblies()`您的调查报告相同的列表 - 未列出运行时加载的插件。我猜该`GetReferencedAssemblies`方法仅报告实际用于在 IL 级别导入类型引用的程序集 - 因此，如果您在 csproj 中引用程序集但不导入任何类型，那么它不会将它们列为已编译代码中的引用.

# c# - 属性不存在时获取 XML 元素的 LINQ 查询

> ID：14972283
> 
> 赞同：0
> 
> 时间：2013-02-20T04:25:37.420
> 
> 标签：c#, linq, linq-to-xml

我有这个 XML：

```
<Config>
  <EmpFieldsMap>
    <Employee>
      <Field>
        <Name update = "false">EmpNumber</Name>
      </Field>
      <Field>
        <Name insert = "true">EmpName</Name>
      </Field>
      <Field>
        <Name insert = "true">EmpDesignation</Name>
      </Field>
    </Employee>
  </EmpFieldsMap>
</Config> 
```

我的应用程序将执行插入或更新，其字段将来自此 xml。每个标签都将具有插入或更新属性，如上面的代码片段所示。

对于插入所有具有该属性的标签

```
insert = "true" 
```

并且必须考虑没有此属性的标签，在本例中为“EmpNumber”。

这同样适用于更新。

这段代码为我提供了所有插入属性设置为 true 的标签：

```
insertTags = from p in xml.Element("Config").Element("EmpFieldsMap").Elements("Field")
             where p.Element("Name").Attribute("insert") != null 
             && p.Element("Name").Attribute("insert").Value == "true"
             select p.Element("Name").Value; 
```

删除对 null 的检查

```
insertTags = from p in xml.Element("Config").Element("EmpFieldsMap").Elements("Field")
             where p.Element("Name").Attribute("insert").Value == "true"
             select p.Element("Name").Value; 
```

给

> *对象引用未设置为实例*

错误。

我在编写一个查询时遇到问题，该查询还将包含属性不存在的标签。

有人可以帮我吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:43:55.363

```
insertTags = from p in xml.Element("Config").Element("EmpFieldsMap").Elements("Field")
    where (p.Element("Name").Attribute("insert") ?? "true") == "true"
    select p.Element("Name").Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T22:24:54.947

使用 XPath 和 Linq 更简单：

```
XPathSelectElements(@"Config/EmpFieldsMap/Employee/Field/Name[@insert='true']") 
```

同样对于这个特定的 xml，您可以使用全局搜索名称元素：

```
var insertTags = xdoc.XPathSelectElements(@"//Name[@insert='true']")
                     .Select(n => (string)n); 
```

或者使用 Linq 查询语法：

```
var insertTags = from n in xdoc.Descendants("Name")
                 where (string)n.Attribute("insert") == "true"
                 select (string)n; 
```

当您将节点值转换为字符串时，如果节点丢失，它不会抛出异常。简单地`null`会被退回。因此，您不需要所有这些东西（顺便说一句，甚至**不可编译**）：

```
(p.Element("Name").Attribute("insert") ?? "true") == "true" 
```

* * *

**再编辑一次**。如果您正在处理布尔值，则使用布尔值而不是字符串：

```
var insertTags = from n in xdoc.Descendants("Name")
                 where (bool?)n.Attribute("insert") == true
                 select (string)n; 
```

这个怎么运作？可为空的布尔值将具有`null`缺失属性的值。`bool?`将没有值的值与任何布尔值进行比较会产生`false`. 因此，您将只获得那些具有必需属性且具有`true`该属性的元素。

# objective-c - 在 ViewController 之间减去浮点值

> ID：14972285
> 
> 赞同：0
> 
> 时间：2013-02-20T04:25:58.340
> 
> 标签：objective-c, calculator, subtraction

这是 ViewControllerOne：

```
- (IBAction)total {

float a = ([textfield1.text floatValue]);
float b = ([textfield2.text floatValue]);
float c = ([textfield3.text floatValue]);
float d = ([textfield4.text floatValue]);
float e = ([textfield5.text floatValue]);
float f = a+b+c+d+e+([textfield6.text floatValue]);

total.text = [[NSString alloc] initWithFormat:@"$%.2f", f]; 
```

这是视图控制器二：

```
float g = ([textfield1.text floatValue]);
float h = ([textfield2.text floatValue]);
float i = ([textfield3.text floatValue]);
float j = ([textfield4.text floatValue]);
float k = ([textfield5.text floatValue]);
float l = a+b+c+d+e+([textfield6.text floatValue]);
totalTwo.text = [[NSString alloc] initWithFormat:@"$%.2f", l]; 
```

在 ViewControllerThree 中，我想用 ViewControllerTwo 的总和减去 ViewControllerOne 的总和，并在标签中显示答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:35:15.673

存储 sum `total.text`& `totalTwo.text`in `appDelegate`like

在 AppDelegate.h 文件中

```
float totalOne, totalTwo;
@propery(nonatomic)float totalOne, totalTwo; 
```

在 AppDelgate.m 文件中，

```
@synthesize totalOne, totalTwo;

- (IBAction)total 
{
   //Create the instance of appDelegate as
   AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
   float a = ([textfield1.text floatValue]);
   float b = ([textfield2.text floatValue]);
   float c = ([textfield3.text floatValue]);
   float d = ([textfield4.text floatValue]);
   float e = ([textfield5.text floatValue]);
   float f = a+b+c+d+e+([textfield6.text floatValue]);
   app.totalOne = f;
   total.text = [[NSString alloc] initWithFormat:@"$%.2f", f];
}

//Create the instance of appDelegate as
AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
float g = ([textfield1.text floatValue]);
float h = ([textfield2.text floatValue]);
float i = ([textfield3.text floatValue]);
float j = ([textfield4.text floatValue]);
float k = ([textfield5.text floatValue]);
float l = a+b+c+d+e+([textfield6.text floatValue]);
app.totalTwo = l;
totalTwo.text = [[NSString alloc] initWithFormat:@"$%.2f", l];

-(IBAction)btnCalculate
{
    //Create the instance of appDelegate as
    AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    totalthree = app.totalOne - app.totalTwo;
    lbl.text = [NSString StringWithFormat:@"$%.2f", totalThree];
} 
```

# java - jfreeChart中的甘特图？

> ID：14972288
> 
> 赞同：1
> 
> 时间：2013-02-20T04:26:37.453
> 
> 标签：java, jfreechart

我有一个包含 TaskId 和 TaskStartTimerValue 的 .csv 文件。我想制作一个甘特图，在 x 轴上显示 TaskId，在 y 轴上显示 TaskStartTimervalue。我正在使用来自[sanjaal.com 的这个链接的](http://sanjaal.com/java/343/charts-in-java/creating-gantt-chart-in-java-using-jfreechart-api-exampletutorial/)演示。

该演示使用*SimpleTimePeriod*方法获取时序范围。有没有其他方法可以用来传递我的计时器值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:30:58.103

作为 的替代方法`TimePeriod`，您可以使用[`Task`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/gantt/Task.html#Task%28java.lang.String,%20java.util.Date,%20java.util.Date%29)接受两个`Date`实例的构造函数：

```
public Task(java.lang.String description,
    java.util.Date start,
    java.util.Date end) 
```

使用 的实例`Calendar`来创建您的日期。在此[示例](https://stackoverflow.com/a/8949913/230513)中，有两个主要任务：

```
Task t1 = new Task("Design", date(1, MAY), date(31, MAY));
Task t2 = new Task("Proposal", date(1, JUNE), date(31, JUNE)); 
```

这个简单的辅助方法，类似于示例中的`makeDate()`，生成固定年份的日期：

```
private static Date date(final int day, final int month) {
    final Calendar calendar = Calendar.getInstance();
    calendar.set(2012, month, day);
    final Date result = calendar.getTime();
    return result;
} 
```

# jquery - 无法解析 jQuery 脚本行

> ID：14972289
> 
> 赞同：0
> 
> 时间：2013-02-20T04:26:50.110
> 
> 标签：jquery, xml, parsing, blogger

我遇到了几行 jQuery 共存的问题。我相信它们的格式不正确，因为 Blogger 不会让我保存我的代码。目前我有：

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' type='text/javascript'/>
<script type='text/javascript'>

<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' type='text/javascript'/>
<script>
var $jq = jQuery.noConflict();
</script>

<script src='http://blogger-related-posts.googlecode.com/files/jquery.related-posts-widget-2.0.min.js' type='text/javascript'/> 
```

我正在尝试添加[此](http://www.textfixer.com/html/create-jquery-popups.php)脚本，但无法保存我的模板。[这](http://www.xeasycorex.net/)是我的网站。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:30:41.677

关闭脚本标签

```
 <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' type='text/javascript'/></script>

<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' type='text/javascript'/></script>
<script>
var $jq = jQuery.noConflict();
</script>

<script src='http://blogger-related-posts.googlecode.com/files/jquery.related-posts-widget-2.0.min.js' type='text/javascript'/></script> 
```

# hash - 如果有人可以访问加盐密钥，加盐密码是否毫无意义？关闭服务器盐渍？

> ID：14972290
> 
> 赞同：2
> 
> 时间：2013-02-20T04:27:00.477
> 
> 标签：hash, passwords, salt

听说大型科技公司最近发生的所有黑客行为，我都想知道他们使用密码存储的方式。

我知道加盐+散列通常被认为是安全的，但是我见过的加盐示例将盐密钥硬编码到通常存储在同一台服务器上的密码脚本中。

那么，最初对用户密码进行哈希处理，将该哈希传递给“加盐服务器”或存储在场外的某个函数，然后将加盐哈希传回，这是一个合乎逻辑的解决方案吗？

我正在查看的方式是，如果入侵者可以访问包含存储密码的服务器或数据库，他们将无法立即访问 salt 密钥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T04:40:06.027

不——即使攻击者知道，盐仍然有效。

盐的想法是它使对大量用户的字典攻击变得更加困难。如果没有盐，攻击者会对字典中的所有单词进行哈希处理，并查看哪些与您用户的哈希密码匹配。使用 salt，他必须对字典中的每个单词进行多次散列（每个可能的散列值一次），以确保有一个适合每个用户的单词。

这种乘以几千（或可能几百万，取决于您使用的盐的大小）增加了散列所有值的时间，并且存储需要存储结果 - 这一点（您希望）它是不切实际的。

但是，我应该补充一点，在许多（大多数？）情况下，非常大的盐并不能真正增加很多安全性。问题是，如果您使用 24 位盐（约 1600 万个可能值）但只有几百个用户，攻击者可以提前收集您实际使用的盐值，然后执行他的字典攻击只针对那些值，而不是完整的约 1600 万个潜在值。简而言之，您的 24 位盐只增加了 8 位盐所能提供的一点点难度。

OTOH，对于大型服务器（谷歌、Facebook 等）来说，情况完全不同——大盐变得非常有益。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T04:41:10.453

即使入侵者知道盐，加盐也是有用的。

如果密码未加盐，则可以使用广泛可用的预计算[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)来快速攻击您的密码。

如果您的密码表是加盐的，那么预先计算彩虹表就变得非常困难 - 为每种可能的盐创建彩虹表是不切实际的。

如果您对每个密码条目使用不同的随机盐，并将其以明文形式放在它旁边，那么入侵者就很难攻击您的密码，除非是暴力攻击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T04:43:40.350

加盐密码保护密码免受攻击者拥有散列密码列表的攻击。有一些常见的散列算法，黑客有表格可以让他们查找散列并检索密码。为此，黑客必须侵入密码存储并窃取哈希值。

如果密码被加盐，那么攻击者必须使用散列算法和加盐重新生成他们的散列表。根据散列算法，这可能需要一些时间。为了加快速度，黑客还使用最常见的密码和字典单词列表。盐的想法是减慢攻击者的速度。

为每个密码使用不同盐的最佳方法，使其长且随机，并且可以将盐存储在每个密码旁边。这确实减慢了攻击者的速度，因为他们必须为每个单独的密码、常见密码和字典单词的每种组合运行哈希表生成。这将使攻击者无法推断出强密码。

我读过一篇关于这方面的好文章，现在找不到了。但是谷歌搜索“密码盐”给出了一些很好的结果。看看[这篇文章](http://crackstation.net/hashing-security.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:16:05.113

我想指出，您使用硬编码 salt 描述的方案实际上**不是 salt**，而是像钥匙或胡椒一样工作。盐和胡椒解决了不同的问题。

应该为每个密码随机生成一个**盐，并且可以与散列密码一起存储在数据库中。**它可以存储纯文本，即使攻击者知道它也可以实现其目的。

**辣椒**是一个密钥，将用于所有密码。它不会存储在数据库中，而是应存放在安全的地方。如果攻击者知道辣椒，它就会变得毫无用处。

我试图在一个小[教程](http://www.martinstoeckli.ch/hash/en/index.php)中解释这些差异，也许你想看看那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T05:35:52.747

> 说得通。对于攻击者来说，似乎付出的努力多于价值（除非它是一个具有重要价值或重要性的网站）。

所有大小站点，重要与否，都应将密码哈希视为高度重要

只要每个散列都有自己的大随机盐，那么是的，它确实变得几乎不切实际，如果每个散列使用静态盐，您可以使用 Rainbow 表来清除使用密码 1 的用户散列

使用良好的散列算法也很重要（使用 MD5 或 SHA1 几乎就像使用明文和 mutli gpu 设置现在一样）使用 scrypt，如果不是，则使用 bcrypt，或者如果你必须使用 PBKDF2（你需要轮数非常高的）

# c#-4.0 - 如何将结构参数添加到列表中

> ID：14972293
> 
> 赞同：0
> 
> 时间：2013-02-20T04:27:30.670
> 
> 标签：c#-4.0

我有一个界面，我有一个列表

```
 public interface IDisplayListQueue 
     {
     void BindQueueData();
    List<HomePage.QueueListItem> QueueDataSource { get; set; }
    } 
```

在 HomePage.cs 中，我有结构

```
 public struct QueueListItem
        {
        public int QueueID { get; set; }
        public int LinkText { get; set; }
        public int Uid { get; set; }

      } 
```

在页面加载中，我正在使用一个开关来添加列表值。所以我试图绑定 QueueListItem ，但它显示错误。我的代码是

```
 switch (queue.QueueTypeID)
           {
           case (int)QueryType.DataEntry:
            dataEntry.QueueDataSource.Add(queue.QueueID, queueName, sentinel );
            break;
           case (int)QueryType.Sort:
             Sort.QueueDataSource.Add(queue.QueueID, queueName, sentinel );
            break;
           } 
```

我得到的错误是没有重载“添加”需要 3 个参数。那么如何向接口中的 QueueListItem 添加值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:38:21.363

那么你需要创建的实例`struct`并将其添加到列表中，你可以这样做：

```
dataEntry.QueueDataSource.Add(new QueueListItem()
                                { 
                                 QueueID= queue.QueueID, 
                                 LinkText= queueName, 
                                 Uid = sentinel
                                 }); 
```

`Add`您的 List的方法需要一个 struct 对象，`QueueListItem`并且您正在传递三个参数。您应该看到：[对象和集合初始化器（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)

# c# - 如何使用 C# 证明一系列数字或字符中存在循环模式？

> ID：14972294
> 
> 赞同：-2
> 
> 时间：2013-02-20T04:27:32.073
> 
> 标签：c#

这就是我要解决的问题。我有一系列数字，例如

```
 1 -> 2
    2 -> 3
    3 -> 4
    4 -> 2
    2 -> 1 
```

我需要编写一个程序来证明这些数字是否是图上的点，它们形成某种循环。在上面的例子中 1 -> 2 -> 3 -> 4 -> 2 形成一个循环。

在以下示例中，没有循环。

```
 1 -> 2
    2 -> 3
    3 -> 4
    3 -> 5 
```

不明白这是如何复制的。对不起，如果我的问题不清楚。我正在尽力描述它的水平。我有一组点/数字/节点。他们是成对的，他们也有方向。例如一对数字是 1 -> 2 2 -> 3 1 -> 2 3 -> 4 4 -> 2 2 -> 1 3 -> 4

当这些单独的节点从上到下连接时，我将得到如下链接列表 1 -> 2 -> 3 -> 1 -> 2 -> 3 -> 4 -> 2 -> 1 -> 3 -> 4

我不是在这组数字中寻找重复的模式。试图找到像 1 -> 2 -> 3 -> 1 这样的闭环是一个循环。2 -> 3 -> 1 -> 2 是一个循环。3 -> 1 -> 2 -> 3, 2 -> 3 -> 4 -> 2, 3 -> 4 -> 2 -> 1 -> 3 等等。在这个 wiki 链接中有一个循环是 1 _。6 -> 3 -> 1 [http://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Functional_graph.svg/240px-Functional_graph.svg.png](http://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Functional_graph.svg/240px-Functional_graph.svg.png)

希望这能说明问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:32:48.107

一种非常简单的方法是将两个数字作为键值对添加到哈希表中：

一旦你处于 key already exists 错误被抛出或 ContainsValue 条件为 true 的情况下，你就找到了一个循环。

# c# - 而不是循环需要一种在 xml 中设置节点列表值的便捷方法

> ID：14972296
> 
> 赞同：-1
> 
> 时间：2013-02-20T04:27:37.100
> 
> 标签：c#, xml, xml-parsing

我有以下 xml，我的需要是在每个 ROW 中设置 WF_PROCESSID，而无需在 c# 中循环和设置。你能请任何人提出解决方案吗？

```
<RESP_WF_MAP>
 <ROW>
  <PLAN_FOR_RESP>Mombasa</PLAN_FOR_RESP> 
  <WF_PROCESSID>-9999</WF_PROCESSID> 
  <WF_PROCESSNAME /> 
  <DIRECT_MAP_YN>N</DIRECT_MAP_YN> 
  </ROW>
  <ROW>
  <PLAN_FOR_RESP>Mombasa-Changamwe Branch</PLAN_FOR_RESP> 
  <WF_PROCESSID>-9999</WF_PROCESSID> 
  <WF_PROCESSNAME /> 
  <DIRECT_MAP_YN>N</DIRECT_MAP_YN> 
  </ROW>
  <ROW>
  <PLAN_FOR_RESP>Mombasa-Mombasa Branch</PLAN_FOR_RESP> 
  <WF_PROCESSID /> 
  <WF_PROCESSNAME /> 
  <DIRECT_MAP_YN>N</DIRECT_MAP_YN> 
  </ROW>
</RESP_WF_MAP> 
```

我想消除这个循环，需要一个方便的 xml 处理方法

```
for ( intIndex = 0 ; intIndex < intLength ; intIndex++ )
{
    xmlRowElement           = (XmlElement)xmlRowNodeList.Item(intIndex);
    strWorkFlowId           = DwXMLUtilBO.getElementTagValue(xmlRowElement,"WF_PROCESSID");  // Customized static method to acquire the element value

    if(strWorkFlowId.Trim().Equals(""))
    {
       DwXMLUtilBO.setElementTagValue(xmlRowElement,"WF_PROCESSID" ,strWfId); // Customized static method to set the element value
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:52:25.890

LINQ 到 XML：

```
foreach (var rowElement in XDocument.Load("yourXml").Descendants("ROW"))
{
    var idElement = rowElement.Element("WF_PROCESSID");
    if (string.IsNullOrWhiteSpace(idElement.Value))
    {
        idElement.Value = strWfId;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:03:33.227

尝试使用`XmlDocument`类而不是您的自定义类，如下所示：

```
 var xml = @"
<RESP_WF_MAP>
<ROW>
<PLAN_FOR_RESP>Mombasa</PLAN_FOR_RESP> 
<WF_PROCESSID>-9999</WF_PROCESSID> 
<WF_PROCESSNAME /> 
<DIRECT_MAP_YN>N</DIRECT_MAP_YN> 
</ROW>
<ROW>
<PLAN_FOR_RESP>Mombasa-Changamwe Branch</PLAN_FOR_RESP> 
<WF_PROCESSID>-9999</WF_PROCESSID> 
<WF_PROCESSNAME /> 
<DIRECT_MAP_YN>N</DIRECT_MAP_YN> 
</ROW>
<ROW>
<PLAN_FOR_RESP>Mombasa-Mombasa Branch</PLAN_FOR_RESP> 
<WF_PROCESSID /> 
<WF_PROCESSNAME /> 
<DIRECT_MAP_YN>N</DIRECT_MAP_YN> 
</ROW>
</RESP_WF_MAP>";

        var doc = new XmlDocument();
        doc.LoadXml(xml);
        var list = doc.GetElementsByTagName("WF_PROCESSID");

        foreach (XmlNode node in list) 
        {
            node.InnerText = "your new value";
        }

        Console.Write(doc.InnerXml);
        Console.ReadKey(); 
```

# web-services - 通过 CXF 使用 http 绑定

> ID：14972298
> 
> 赞同：0
> 
> 时间：2013-02-20T04:27:49.047
> 
> 标签：web-services, cxf

使用 CXF 使用 Web 服务时出现以下错误。异常消息是：

```
No binding factory for namespace http://schemas.xmlsoap.org/wsdl/http/ registered. 
```

我尝试使用的 WSDL 服务是：

```
<wsdl:service name="MyService">
<wsdl:port name="MyServiceHttpport" binding="impl:MyServiceHttpBinding">
    <http:address location="http://localhost:80/ip/services/MyService"/>
</wsdl:port>
</wsdl:service 
```

如上所示，我们使用 http:address 而不是 soap:address

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:55:17.753

CXF 不支持 WSDL http 绑定。cxf-rt-bindings-http 模块已从最近的 CXF 版本中删除，因为它是相对专有的，现在被 JAX-RS 前端的所有 REST 优点所取代。

# java - 如何在字符串中使用 contains 和 equalsIgnoreCase

> ID：14972299
> 
> 赞同：14
> 
> 时间：2013-02-20T04:27:49.987
> 
> 标签：java

有没有办法在不区分大小写的情况下检查字符串是否包含某些内容？

例如：（此代码无效，只是为了让您对我的问题有一个基本的了解）

```
String text = "I love ponies";

if(text.contains().equalsIgnoreCase("love") {
    // do something
} 
```

编辑：--------仍然无法正常工作

哦，原来它不起作用。这是我正在使用的。（这是一个游戏的诅咒过滤器）

```
public void onChat(PlayerChatEvent event) {
    Player player = event.getPlayer(); 
    if (event.getMessage().contains("douche".toLowerCase()) || /* More words ... */) {
        event.setCancelled(true);
        player.sendMessage(ChatColor.GOLD + "[Midnight Blue] " + ChatColor.RED + "Please Don't Swear.");
    }
} 
```

它适用于小写，但不适用于大写。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T04:32:28.303

```
return text.toLowerCase().contains(s2.toLowerCase()); 
```

或者另一种方式是

```
Pattern.compile(Pattern.quote(s2), Pattern.CASE_INSENSITIVE).matcher(text).find(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T04:41:43.370

[`StringUtils#containsIgnoreCase`](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringUtils.html#containsIgnoreCase%28java.lang.CharSequence,%20java.lang.CharSequence%29)如果您从[Apache Commons](http://commons.apache.org/lang/)库中使用它会更容易

如果你不能添加第三方库，你仍然可以使用代码，因为它是免费使用的。检查[在线源代码](http://www.docjar.com/html/api/org/apache/commons/lang/StringUtils.java.html)。

测试：

```
public class QuestionABCD {
    public static boolean containsIgnoreCase(String str, String searchStr) {
        if (str == null || searchStr == null) {
            return false;
        }
        int len = searchStr.length();
        int max = str.length() - len;
        for (int i = 0; i <= max; i++) {
            if (str.regionMatches(true, i, searchStr, 0, len)) {
                return true;
            }
        }
        return false;
    }

    public static void main(String[] args) {
        System.out.println(containsIgnoreCase("abc", "A"));
        System.out.println(containsIgnoreCase("abc", "a"));
        System.out.println(containsIgnoreCase("abc", "B"));
        System.out.println(containsIgnoreCase("abc", "b"));
        System.out.println(containsIgnoreCase("abc", "z"));
        System.out.println(containsIgnoreCase("abc", "Z"));
    }
} 
```

输出：

```
true
true
true
true
false
false 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-20T04:31:35.110

如果区分大小写是您唯一的问题，请将所有内容都转换为小写

```
String text = "I love ponies";
String test = "LOVE";
if(text.toLowerCase().contains(test.toLowerCase()))
{
//your code
} 
```

更新：供您使用：

```
event.getMessage().toLowerCase().contains("douche".toLowerCase()) 
```

在所有条件下

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2013-02-20T04:29:59.820

你可以像这样检查两次

```
text.contains(s);
text.contains(s.toLowerCase()); 
```

# android - Listview 在前几个项目后没有响应 OnItemClickListener

> ID：14972300
> 
> 赞同：0
> 
> 时间：2013-02-20T04:27:53.900
> 
> 标签：android, listview, onitemclicklistener

我的 android 应用程序中有一个列表视图，它显示来自下载和解析 json 的数据。在这个列表视图中，OnItemClickListener 在前五个或六个项目后没有响应。谁能告诉我我的问题是什么？

这是我的 listview 代码：

```
mListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            try {                   
                String s = BookJsonParser.ids[arg2];
                String bookDetailUrl =  url + s;
                DownloadBookDetail downloadTaskbookDetail = new DownloadBookDetail();
                downloadTaskbookDetail.execute(bookDetailUrl);

            } catch (Exception e) {
                System.out.println(e.printStackTrace(););
            }
        }

    }); 
```

DownloadBookDetail 是一个 asyncTask，其中 Json String 在它的 doInBackGround 方法中下载，并且它在它的 onPostExecute 方法中打开另一个 asyncTask。在第二个 asyncTask 中，我在 doInBackground 方法中解析 json 并在 onPostExecute 方法中使用适配器加载列表视图。第二个 asyncTask 的代码：

```
 /** AsyncTask to parse json data and load ListView */
private class ListViewLoaderTask extends
        AsyncTask<String, Void, SimpleAdapter> {

    JSONObject jObject;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(BookActivity.this);
        pDialog.setMessage("Listing New Books...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    // Doing the parsing of xml data in a non-ui thread
    @Override
    protected SimpleAdapter doInBackground(String... strJson) {
        try {
            jObject = new JSONObject(strJson[0]);
            BookJsonParser countryJsonParser = new BookJsonParser();
            countryJsonParser.parse(jObject);
        } catch (Exception e) {
            Log.d("JSON Exception1", e.toString());
        }

        // Instantiating json parser class
        BookJsonParser countryJsonParser = new BookJsonParser();

        // A list object to store the parsed countries list
        List<HashMap<String, Object>> countries = null;

        try {
            // Getting the parsed data as a List construct
            countries = countryJsonParser.parse(jObject);
            System.out.println(countries.toString());
        } catch (Exception e) {
            Log.d("Exception", e.toString());
        }

        // Keys used in Hashmap
        String[] from = { "country", "flag", "author" };

        // Ids of views in listview_layout
        int[] to = { R.id.tv_bookName, R.id.list_image, R.id.tv_bookAuthor };

        // /////////
        /*
         * for (int i = 0; i < BookJsonParser.ids.length; i++) {
         * System.out.println(BookJsonParser.ids[i]); }
         */

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item
        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(),
                countries, R.layout.item_lv_layout, from, to);

        return adapter;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:09:28.473

似乎您的视图没有在列表视图中获得焦点。这是您单击列表行时的视图问题，它始终是捕获其他视图事件。将以下属性应用于行文件中的主布局，让我知道它是否有效？

`android:descendantFocusability="blocksDescendants"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T08:24:22.977

RobinHood，谢谢你的回答，它对我有帮助。

就我而言，我使用带有按钮的 ContactsCursorAdapter 的自定义视图。如果按钮不可见或消失 - 一切正常，但如果我将其设置为可见，则 ListView 上的 setOnItemClickListener 不起作用。

# mysql - 二级索引上的 MySQL Innodb 键长度

> ID：14972302
> 
> 赞同：3
> 
> 时间：2013-02-20T04:28:02.743
> 
> 标签：mysql, innodb

MySQL：Ver 14.12 Distrib 5.0.51b，用于 redhat-linux-gnu (x86_64) 使用 EditLine 包装器

sql_1：

```
SELECT SQL_NO_CACHE COUNT(*) FROM `ting_song_info`; 
```

结果 ：

```
+----------+
| COUNT(*) |
+----------+
|  2637447 | 
+----------+
1 row in set (0.42 sec) 
```

解释 ：

```
+----+-------------+----------------+-------+---------------+-------------------+---------+------+---------+-------------+
| id | select_type | table          | type  | possible_keys | key               | key_len | ref  | rows    | Extra       |
+----+-------------+----------------+-------+---------------+-------------------+---------+------+---------+-------------+
|  1 | SIMPLE      | ting_song_info | index | NULL          | total_listen_nums | 4       | NULL | 2769410 | Using index | 
+----+-------------+----------------+-------+---------------+-------------------+---------+------+---------+-------------+ 
```

sql_1 使用密钥`total_listen_nums`。

然后指定密钥。

sql_2：

```
SELECT SQL_NO_CACHE COUNT(*) FROM `ting_song_info` USE KEY(`album_id`); 
```

结果 ：

```
+----------+
| COUNT(*) |
+----------+
|  2637447 | 
+----------+
1 row in set (5.21 sec) 
```

解释：

```
+----+-------------+----------------+-------+---------------+----------+---------+------+---------+-------------+
| id | select_type | table          | type  | possible_keys | key      | key_len | ref  | rows    | Extra       |
+----+-------------+----------------+-------+---------------+----------+---------+------+---------+-------------+
|  1 | SIMPLE      | ting_song_info | index | NULL          | album_id | 8       | NULL | 2769410 | Using index | 
+----+-------------+----------------+-------+---------------+----------+---------+------+---------+-------------+ 
```

total_listen_nums 的 key_len 比album_id 更小。

这就是sql_1使用total_listen_nums的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:36:35.867

在这种情况下，我相信“密钥长度”是指密钥的大小（以字节为单位）。列上的主键`INT`需要 4 个字节。由于主键始终包含在任何二级索引中，因此您最终会得到一个`INT`+的键`INT`，或者 4 + 4 个字节产生 8。

我不完全确定为什么这个数字会引起您的关注。索引结构本身的开销比表示键所需的无关紧要的字节数要多得多。

我不确定您为什么要在简单的计数上使用强制索引操作。据我所知，MySQL 并没有过多地使用这些索引来计数，这与 Postgres 的新版本不同。我相信这与InnoDB的[MVCC是如何实现的有关。](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)

请记住，事务数据库中表中的行数并不总是很容易量化。

# javascript - 将类添加到 UL 元素的所有子项

> ID：14972303
> 
> 赞同：0
> 
> 时间：2013-02-20T04:28:05.433
> 
> 标签：javascript, jquery, css, class

好吧，我想为我 ul 的所有 li 添加类，但我不知道为什么它不起作用。

我的**CSS 代码**：

```
.vnav-menu li.selected {
    background:#fff;
} 
```

这是我的**html代码**。

```
<ul class="vnav-menu">  <!-- Initiates Showing/Hiding Dashboard Containers -->
    <li onclick="vnav_function('current_offer');"   id="current_offer_li"   class="selected">   <a> CURRENT OFFERS  </a></li>
    <li onclick="vnav_function('draft_offer');"     id="draft_offer_li">                        <a> DRAFT OFFERS    </a></li>
    <li onclick="vnav_function('expired_offer');"   id="expired_offer_li">                      <a> EXPIRED OFFERS  </a></li>
    <li onclick="vnav_function('offer_code');"      id="offer_code_li">                         <a> OFFER CODE      </a></li>
    <li onclick="vnav_function('title');"           id="title_li">                              <a> TITLE           </a></li>
    <li onclick="vnav_function('schedule');"        id="schedule_li">                           <a> SCHEDULE        </a></li>
    <li onclick="vnav_function('offer_type');"      id="offer_type_li">                         <a> OFFER TYPE      </a></li>
</ul> 
```

这是我的函数**vnav_function()的代码**

```
function vnav_function(data) {  //Showing/Hiding Dashboard Containers
    $('.vnav-menu li').each(function(i)
    {
       $(this).attr('id').addClass("selected");
    });
} 
```

好吧，由于某种原因，它不会工作。对这些东西有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:34:07.050

`.attr('id')`返回一个字符串。我认为您想使用 ID 进行比较：

```
if ($(this).attr('id') == $(data.target).attr('id') {
    $(this).addClass('selected');
} 
```

但是，这样做会容易得多

```
function vnav_function(data) {
    $(this).addClass('selected');
} 
```

...而且这样做会*更*容易

```
<ul class="vnav-menu">  <!-- Initiates Showing/Hiding Dashboard Containers -->
    <li id="current_offer_li"   class="selected">   <a> CURRENT OFFERS  </a></li>
    <li id="draft_offer_li">                        <a> DRAFT OFFERS    </a></li>
    <li id="expired_offer_li">                      <a> EXPIRED OFFERS  </a></li>
    <li id="offer_code_li">                         <a> OFFER CODE      </a></li>
    <li id="title_li">                              <a> TITLE           </a></li>
    <li id="schedule_li">                           <a> SCHEDULE        </a></li>
    <li id="offer_type_li">                         <a> OFFER TYPE      </a></li>
</ul>

$(".vnav-menu li").on('click', function () {
    $(this).addClass('selected');
}); 
```

你甚至可能想做：

```
$(".vnav-menu li").on('click', function () {
    $(".vnav-menu").removeClass('selected');
    $(this).addClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:31:33.877

您正在尝试对`addClass`返回的字符串调用该方法`$(this).attr('id')`。尝试对返回的 jQuery 集合使用 addClass 方法`$(this)`：

```
$(this).addClass("selected"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T04:42:21.200

没有 jQuery：

```
function getElementsByCSSSelector(s) {
    return Array.prototype.slice.call(document.querySelectorAll(s));
}

getElementsByCSSSelector('.vnav-menu li').forEach(function(li) {
    li.classList.add("selected");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T04:32:21.497

```
function vnav_function(data) {  //Showing/Hiding Dashboard Containers
  $('.vnav-menu li').each(function()
  {
     $(this).addClass("selected");
  });
 } 
```

要不就：

```
function vnav_function(data) {  //Showing/Hiding Dashboard Containers
   $('.vnav-menu li').addClass('extra');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T04:35:33.627

好吧，无需使用`.each`，`$('.vnav-menu li').addClass('extra');`这可以添加`class`到每个`li`内部`ul.vnav-menu`

# java - 解析整数字符串（大于 Integer.MAX_VALUE）

> ID：14972304
> 
> 赞同：2
> 
> 时间：2013-02-20T04:28:06.253
> 
> 标签：java, integer

假设我有这个字符串`0xdadacafe`（显然大于 Integer.MAX_VALUE: `0x7fffffff`）。如果我过去`Integer.parseInt(String, int)`解析它，我会得到一个`NumberFormatException`. 有没有办法解析这个字符串并得到一个“静默”溢出？

换句话说，有没有办法解析这个字符串并 get `-623195394`，如果你这样做，这是你得到的值`System.out.println(0xdadacafe);`

（而且我可能不想做类似的事情`(int)Long.parseLong(String, int)`）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T04:48:05.513

您可以将其作为[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)读入，然后返回正确的 int 值。

```
BigInteger value = new BigInteger("dadacafe", 16); // 3671771902
value.intValue(); // -623195394 
```

**编辑：**

回复：评论说这很慢..

我的意思是，[总是有这样的权利](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.parseInt%28java.lang.String,int%29)：

```
public static int parseInt(String s, int radix)
    throws NumberFormatException
{
    if (s == null) {
      throw new NumberFormatException("null");
    }

    if (radix < Character.MIN_RADIX) {
      throw new NumberFormatException("radix " + radix +
          " less than Character.MIN_RADIX");
    }

    if (radix > Character.MAX_RADIX) {
      throw new NumberFormatException("radix " + radix +
          " greater than Character.MAX_RADIX");
    }

    int result = 0;
    boolean negative = false;
    int i = 0, len = s.length();
    int digit;

    if (len > 0) {
      char firstChar = s.charAt(0);
      if (firstChar < '0') { // Possible leading "-"
        if (firstChar == '-') {
          negative = true;
        } else
          throw new NumberFormatException(s);

        if (len == 1) // Cannot have lone "-"
          throw new NumberFormatException(s);
        i++;
      }
      while (i < len) {
        // Accumulating negatively avoids surprises near MAX_VALUE
        digit = Character.digit(s.charAt(i++),radix);
        if (digit < 0) {
          throw new NumberFormatException(s);
        }
        result *= radix;
        result -= digit;
      }
    } else {
      throw new NumberFormatException(s);
    }
    return negative ? result : -result;
} 
```

但是在这一点上，我会开始认为这可能没有正确解决问题。我不确定你是否在反对现有的软件，或者情况可能是什么，但如果'fast-as-light' int 溢出实际上是你真正需要的东西 - 它可能不会比这更好.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T04:49:12.893

尝试

```
int i = (int)Long.parseLong("0xdadacafe".substring(2), 16); 
```

# python - 计时函数输出的最简单方法

> ID：14972306
> 
> 赞同：0
> 
> 时间：2013-02-20T04:28:20.693
> 
> 标签：python, multithreading, logging

我正在访问一个似乎每隔一段时间就会神秘挂起的 Web API。现在我正在使用 print 来做一些简单的日志记录。我不熟悉线程或类似的东西，我希望有一种简单的方法可以检查自从返回新的打印语句以来已经过了多长时间，如果最大时间间隔已经过，则优雅地退出我的函数到达。感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:34:52.153

使用 time.time() 模块以秒为单位获取时间；来自文档

> 'time() -> 浮点数\n\n返回自 Epoch 以来的当前时间（以秒为单位）。\n如果系统时钟提供，则可能存在几分之一秒。'

在代码中使用它，

```
import time
tic = time.time() #start
while True:
   do_big_job()
   toc = time.time();
   if ( toc - tic > timeout ):
      break 
```

# apache-flex - Flex 4 的 SuperPanel（拖动、调整大小、关闭、最大化、最小化）

> ID：14972307
> 
> 赞同：2
> 
> 时间：2013-02-20T04:28:32.673
> 
> 标签：apache-flex, flex4, flex4.5, custom-component

我在互联网上找到了这个组件（[http://www.wietseveenstra.nl/files/flex/SuperPanel/v1_5/MainView.html](http://www.wietseveenstra.nl/files/flex/SuperPanel/v1_5/MainView.html)），这些面板很棒。不幸的是，该源代码在 Flex 4 上不太适合。Spark 组件在更改其结构时的工作方式不同（向填充顶部添加按钮等），并且使用 MX 组件无法正常工作 Drag 功能，它看起来丑陋的。我想知道是否有人拥有已经在 Flex 4 中完成的类似组件的链接，或者我可以采取任何能够自己构建它的路径。我在 ActionScript 方面有丰富的经验，但在 Flex 或 Flex 4 上几乎没有 CSS/样式。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:51:06.000

你看过[flexlib](https://github.com/flex-users/flexlib)的 MDI 组件吗？

# c++ - 矢量排序和更改数据

> ID：14972309
> 
> 赞同：-2
> 
> 时间：2013-02-20T04:29:03.523
> 
> 标签：c++, c, sorting, vector

我在做这个操作时很挣扎，我有一个向量，它的大小可能是`200000`，它包含像`(156,256,789,1,2,1,1,1,63,89,7,8,45,1,1,2,5,8,9,6,47,8,96,5,465,6,etc)`.

我的问题是我喜欢将数据作为
`( 0,1,2,3,4,3,3,3,5,6,7,8,9,3,3,4,10,8,11,etc)`.

我需要以快速有效的方式进行此操作..给出一些建议。

> 我的代码是

```
vector<int>* VectorReader::SortID(vector<int>* tempID)
{
std::vector<int>::iterator new_sortit;
vector<int> newit_ID;
newit_ID.resize(tempID->size());
copy( tempID->begin(), tempID->end(), newit_ID.begin());
int i = 0;
for( new_sortit =tempID->begin(); new_sortit != tempID->end(), i < tempID->size(); new_sortit++ )
{
    int min_ID = *min_element( tempID->begin(), tempID->end());
    int max_ID = *max_element( tempID->begin(), tempID->end());
    int search_NodeID =  std::find ( tempID->begin(), tempID->end(), min_ID) - tempID->begin();
    replace( newit_ID.begin()+search_NodeID, newit_ID.end(), min_ID, i );
    max_ID++;
    replace( tempID->begin(), tempID->end(), min_ID, max_ID );
    i++;
}
copy( newit_ID.begin(), newit_ID.end(), tempID->begin( ));
return tempID;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:39:50.297

如果您的问题是`tempID`按升序排序，我会这样做：

```
vector<int> VectorReader::SortID(vector<int> tempID)
{
  std::sort(tempID.begin(), tempID.end());
  return tempID;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:17:25.693

看起来您想要做的是返回一个与输入相对应的向量，但每个元素都替换为一个数字，该数字是该元素在输入中出现的相对顺序。
也就是说，如果我们从输入中删除所有重复项，则每个元素的输出就是该元素在无重复向量中的索引。

这可能会奏效：

```
#include <vector>
#include <map>

typedef std::vector<int> Ints;
typedef std::map<int, size_t> IndexTable;

Ints findIndices(const Ints& input)
{
   size_t size = input.size();
   IndexTable indices;
   size_t index = 0;
   for (size_t i = 0; i != size; ++i)
   {
      if (indices.find(input[i]) == indices.end())
      {
         indices[input[i]] = index;
         ++index;
      }
   }
   Ints output(size);
   for (size_t i = 0; i != size; ++i)
   {
      output[i] = indices[input[i]];
   }
   return output;
} 
```

# operating-system - 在c中实现多个管道

> ID：14972310
> 
> 赞同：1
> 
> 时间：2013-02-20T04:29:05.363
> 
> 标签：operating-system, pipe

我正在尝试在 C++ 中实现多个管道。即，我想编写一个程序来模拟执行，例如 ls -l | 头-n 10 | 厕所-l。

代码一切正常。但是在所有命令都正确执行之后，我需要按*回车*键返回命令行。我想我必须在某个地方“等待（）”

这是我现在拥有的代码。

```
using namespace std; 
#include <stdio.h>
#include <iostream>
#include <unistd.h>
#include <fcntl.h>
#include <string.h>
int main(){

int pid;
int fd[4];

pipe(fd + 0); // pipe between the 1st and 2nd command
pipe(fd + 2); // pipe between the 2nd and 3rd command

for( int i = 0; i < 3; i++){ // 3 commands

    pid = fork();

    if(pid == 0){// child process

        if( i == 0 ){// first command

            char *arg[10];
            arg[0] = "ls";
            arg[1] = NULL;

            close(fd[0]);
            dup2(fd[1], 1);
            execvp(arg[0], arg);
        }
        else if( i == 1){// second command

            char *arg[10];
            arg[0] = "head";
            arg[1] = "-n1";
            arg[2] = NULL;

            dup2(fd[0], 0);
            dup2(fd[3], 1);
            execvp(arg[0], arg);
        }
        else if( i== 2){// third command

            char *arg[10];
            arg[0] = "wc";
            arg[1] = "-l";
            arg[2] = NULL;

            close(fd[3]);
            dup2(fd[2], 0);
            execvp(arg[0], arg);

        }

    }

    else{// parent
    }

}

} 
```

我想我已经浏览了所有与我类似的帖子，但仍然无法弄清楚。

任何人都可以帮忙吗？

# xcode - Xcode 中的代码感知是什么？

> ID：14972313
> 
> 赞同：1
> 
> 时间：2013-02-20T04:29:50.233
> 
> 标签：xcode, xcode4.5

我是 Xcode 的新手并且有以下查询：Xcode 中的 Code Sense 是什么以及如何在 Xcode 4.5 中启用/禁用它？

如果我错了，请纠正我，但是项目导航器中显示的 M 和 A 框是否与代码意义有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:45:01.000

M 和 A 不是为了代码意义，这些是您文件的状态，因为 XCode 还为您的项目维护一个本地 GIT 存储库。M 代表修改，A 代表添加。

您可以在创建项目时使用 XCode 创建本地 GIT 存储库 -

![在此处输入图像描述](../Images/38c115e9187c197ce94a065d16972793.png)

# java - 在 Android 中使用 KeyStore 存储密钥

> ID：14972316
> 
> 赞同：5
> 
> 时间：2013-02-20T04:30:12.200
> 
> 标签：java, android, exception, keystore, fileoutputstream

我正在使用 KeyStore 来保护我的私钥，但是当线路：

```
FileOutputStream fos = ctx.openFileOutput("bs.keystore", Context.MODE_PRIVATE); 
```

执行我有这个例外：

```
'java.lang.NullPointerException'. 
```

我不明白问题出在哪里。

代码：

```
 private Context ctx;

    public DataSec(Context ctx) 
    {
    ctx = this.ctx;
    }

    public void genKey() throws Exception
    {
    SecretKey key = KeyGenerator.getInstance("AES").generateKey();

    KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
    ks.load(null, "clavedekey".toCharArray());

    PasswordProtection pass = new PasswordProtection("fedsgjk".toCharArray());
    KeyStore.SecretKeyEntry skEntry = new KeyStore.SecretKeyEntry(key);
    ks.setEntry("secretKeyAlias", skEntry, pass);

    FileOutputStream fos = ctx.openFileOutput("bs.keystore", Context.MODE_PRIVATE);
    ks.store(fos, "clavedekey".toCharArray());
    fos.close();        
    } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:28:47.550

改变：

```
public DataSec(Context ctx) 
{
ctx = this.ctx;
} 
```

至

```
public DataSec(Context ctx) 
{
    this.ctx = ctx;
} 
```

现在，您将方法中的上下文参数分配给与全局参数相同的值，即 null。因此，您的上下文实际上并没有被存储。

# sql - SQL Server INSERT 触发器不起作用

> ID：14972318
> 
> 赞同：0
> 
> 时间：2013-02-20T04:30:22.023
> 
> 标签：sql, sql-server, database, triggers

当表 A 更改时，我有一个触发器将数据从表 A 复制到表 B

触发器是这样的：

```
ALTER TRIGGER ATrigger 
ON A AFTER INSERT, DELETE, UPDATE
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM B WHERE id IN (SELECT id FROM deleted)

    INSERT INTO B(Id, col1,col2) (SELECT i.Id, i.col1, i.col2 FROM inserted i)
END 
```

但是我看到并不是所有插入A的数据都复制到B，复制的数据似乎很随机我四处寻找，发现可能是多插入引起的，有人建议使用cusor，但我认为应该是可以使用这两个 sql 从已插入、已删除的表中插入或删除。

请指教，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:45:20.253

我不确定这是你的问题，但你的触发器有 2 个“陷阱”。首先在插入时，删除的表中没有行，因此不会进行删除。其次是相反的，可能是你的问题。在删除时，插入的表没有行。因此，所有 ID 都将从表 B 中删除，但不会重新插入。除此之外，如果 ID 不是表 A 的唯一键，那么当您插入它的第二个副本时，您将删除表 B 中的所有历史记录，并且只添加“新”历史记录。

如果您可以提供有关 2 个表的结构和触发器用途的更多信息，更不用说插入或未插入的行的任何模式（视情况而定），我们可以提供更多帮助。

# c# - jQuery ajax 命令后重新加载部分页面

> ID：14972324
> 
> 赞同：1
> 
> 时间：2013-02-20T04:31:17.493
> 
> 标签：c#, jquery, asp.net-mvc, razor

我对 JQuery 和 Asp.net MVC 3 (C#) 都很陌生，所以如果这是微不足道的，我深表歉意。我有一个包含任务列表的 MVC 部分视图 (Index.cshtml)。这些任务包含在我在列表样式布局中的单个 div 中。我有一个名为“添加任务”的按钮，可以打开一个对话框。此对话框将通过对控制器的 AJAX Json 调用将添加的任务保存到数据库中。

这就是我遇到问题的地方 - 对话框关闭后，我希望任务列表与我刚刚添加的任务一起重新加载。我找到了重新加载整个页面的示例，并且我找到了控制器应该返回渲染视图的示例。我的问题是对话框是从我要重新加载的部分打开的。有没有办法完成我想做的事情。

索引.cshtml

```
@model IEnumerable<TaskManagementApplication.Models.Project>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<div id="ProjectAccordionWrapper">
    @foreach (var item in Model)
    {
        <div class="ProjectWrapper">
            <h3>@item.Name</h3>
            <div class="column">
                <button class="createTaskButton" id="@item.ProjectID">Create New Task</button>
                    @foreach(var task in item.Tasks) {
                        var buttonClass = "taskID" + task.TaskID;
                          <div class="portlet">
                            <div class="portlet-header">@task.TaskName</div>
                            <div class="portlet-content">@task.TaskDescription</div>
                            <button class="editTaskButton" id="@task.TaskID">Edit Task</button>
                          </div>   
                    }
            </div>
        </div>
    }
</div>

<div id="dialog-form" title="Create new user">
  <p class="validateTips">All form fields are required.</p>

  <form>
  <fieldset>
    <label for="TaskName">Task Name</label>
    <input type="text" name="TaskName" id="name" class="text ui-widget-content ui-corner-all" />
    <label for="TaskDescription">Task Description</label>
    <input type="text" name="TaskDescription" id="description" value="" class="text ui-widget-content ui-corner-all" />
    <input type="hidden" name="TaskID" id="ID" />
    <input type="hidden" name="ProjectID" id="ProjectID" />
  </fieldset>
  </form>
</div> 
```

部分 Javascript

```
function GetTask(id) {
    if (id.length > 0) {
        $.ajax({
            url: '/Project/GetTaskFromID',
            type: "POST",
            data: { "id": id },
            success: PopulateDialogFields,
            error: HandleError
        });
    }
}

function PopulateDialogFields(data) {
    $("#name").val(data.TaskName);
    $("#description").val(data.TaskDescription);
    $("#ID").val(data.TaskID);
}

function HandleError(data) {
    alert(data.error);
    var foo = data;
}

function SaveTask() {
    var taskName = $("#name").val();
    var taskDescription = $("#description").val();
    var id = $("#ID").val();
    var projectID = $("#ProjectID").val();
    if (id.length > 0) {
        $.ajax({
            url: '/Project/SaveTask',
            type: "POST",
            data: { "taskName": taskName, "taskDescription": taskDescription, "taskID": id }
        });
    }
    else {
        $.ajax({
            url: '/Project/SaveTask',
            type: "POST",
            data: { "taskName": taskName, "taskDescription": taskDescription, "projectID": projectID }
        });

    }
}

$("#dialog-form").dialog({
    autoOpen: false,
    height: 300,
    width: 350,
    modal: true,
    buttons: {
        "OK": function () {
                SaveTask();
                $(this).dialog("close");
        },
        Cancel: function () {
            $(this).dialog("close");
        }
    },
    close: function () {
        allFields.val("").removeClass("ui-state-error");
        window.location.reload(true);
    },
    open: function () {
        var id = $(this).data("id");
        var projectID = $(this).data("projectID");
        $("#ProjectID").val(projectID);
        var button = $("#" + id);
        GetTask(id);
    }
});

$(".editTaskButton")
  .button()
  .click(function () {
      $("#dialog-form").data('id', this.id).dialog("open");
  });

$(".createTaskButton")
  .button()
  .click(function () {
      $("#dialog-form").data('projectID', this.id).dialog("open");
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:40:56.333

将列表重构为另一个动作+视图可能是最简单的。然后，您可以在原始`Index.cshtml`视图中调用它，也可以通过`.load()`jQuery 中的方法调用它。所以，假设这样：

**项目控制器**

```
[HttpGet]
[ChildActionOnly]
public ActionResult Tasks(int id)
{
    // create the appropriate model object as an IEnumerable of your Task type

    return View(model);
} 
```

**任务.cshtml**

```
@foreach(var task in Model) {
    var buttonClass = "taskID" + task.TaskID;
      <div class="portlet">
        <div class="portlet-header">@task.TaskName</div>
        <div class="portlet-content">@task.TaskDescription</div>
        <button class="editTaskButton" id="@task.TaskID">Edit Task</button>
      </div>   
} 
```

您可以像这样调整**Index.cshtml**：

```
@model IEnumerable<TaskManagementApplication.Models.Project>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>   
<div id="ProjectAccordionWrapper">
    @foreach (var item in Model)
    {
        <div class="ProjectWrapper">
            <h3>@item.Name</h3>
            <div class="column">
                <button class="createTaskButton" id="@item.ProjectID">Create New Task</button>
                <div id="tasks-@item.ProjectID">
                   @Html.Action("Tasks", "Project", new { id = item.ProjectID })
                </div>
            </div>
        </div>
    }
</div>

    //... the rest of the view 
```

最后，

```
// this should happen inside the callback of your .ajax() method
$('#tasks-'+projectID).load('/project/tasks/'+ projectID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:27:35.813

我对 jQuery 和 ASP.NET MVC 也比较陌生，但是，这是我首先想到的。

为了维护页面的 AJAX-y 方面，我建议您创建一个方法来处理返回 JSON 格式的`TaskManagementApplication.Models.Project`. 此方法可以选择返回过滤结果。

标记看起来像这样，

```
<div id="ProjectAccordionWrapper">
    <div id="ProjectWrapperTemplate" class="ProjectWrapper" style="display: none;">
        <h3 id="itemName"></h3>
        <div class="column">
            <button class="createTaskButton" id="itemProjectID">Create New Task</button>
            <div id="portletTemplate" class="portlet">
                <div class="portlet-header" id="taskName"></div>
                <div class="portlet-content" id="taskDescription"></div>
                <button class="editTaskButton" id="taskID">Edit Task</button>
            </div>   
        </div>
    </div>
</div> 
```

接下来，您将让 jQuery 克隆该`ProjectWrapperTemplate`元素，并设置所有相应的字段。

```
$(function () {
    $.ajax({
        url: '/Project/GetTasks',
        type: "POST",
        data: { }
    }).done(function (data) {
        data.forEach(function (element) {
            AppendProjectWrapper(element);
        });
    });

    function AppendProjectWrapper(data) {
        var projectAccordionWrapper = $('#ProjectAccordionWrapper');

        var projectWrapper = $('#ProjectWrapperTemplate').clone(true, true);
        projectWrapper.id = nothing; // remove the id, so as to not have duplicates
        projectWrapper.style.display = nothing; // remove the style "display: none"

        var itemName = projectWrapper.children('#itemName'); // h3
        itemName.id = nothing;
        itemName.text(data.ItemName);

        var itemProjectID = projectWrapper.children('#itemProjectID'); // button Create New Task
        itemProjectID.id = data.ItemProjectID;

        var portletTemplate = projectWrapper.children('#portletTemplate'); // div
        data.Tasks.forEach(function (element) {
            var portlet = portletTemplate.clone();
            portlet.id = nothing;

            var taskName = portlet.children('#taskName');
            taskName.id = nothing;
            taskName.text(element.TaskName);

            var taskDescription = portlet.children('#taskDescription');
            taskDescription.id = nothing;
            taskDescription.text(element.TaskDescription);

            var editTaskButton = portlet.children('#taskID');
            editTaskButton.id = element.TaskID;

            portlet.appendTo(projectWrapper);
        });
        portletTemplate.remove(); // remove the portlet template element

        projectWrapper.appendTo(projectAccordionWrapper);
    }
} 
```

最后，`'/Project/SaveTask'`返回当前保存任务的 JSON 格式`TaskManagementApplication.Models.Project`。

```
$.ajax({
    url: '/Project/SaveTask',
    type: "POST",
    data: { "taskName": taskName, "taskDescription": taskDescription, "taskID": id }
}).done(function (data) {
    AppendProjectWrapper(data);
}); 
```

的返回数据`'/Project/GetTasks'`应如下所示：

```
[
    {
        ItemName: '@item.Name',
        ItemProjectID: '@item.ProjectID',
        Tasks: [
            TaskName: '@task.TaskName',
            TaskDescription: '@task.TaskDescription',
            TaskID: '@task.TaskID'
        ]
    }
] 
```

来自的返回数据`'/Project/SaveTask'`应该遵循相同的格式，除了最外层的数组。

*请注意，此代码中有很多未经测试。*

# regex - 正则表达式：是否可以成对获取文本中的所有单词？

> ID：14972331
> 
> 赞同：0
> 
> 时间：2013-02-20T04:32:01.097
> 
> 标签：regex, pcre

我正在使用 PCRE 查找短语中的所有单词对，例如。短语“敏捷的棕色狐狸跳过了懒惰的狗”。应该产生

```
The quick
quick brown
brown fox
fox jumped
jumped over
...
...
lazy dog 
```

我正在使用函数 FindAndConsume() 消耗这两个词，我只得到一半的结果！

```
The quick
brown fox
jumped over
...
...
the lazy 
```

所以我试图找出是否有办法检索所有成对的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:42:10.907

正则表达式不会找到重叠的匹配项。要做你想做的事，我建议你先把你的文本分成单词，然后使用正常的循环来提取项目及其邻居。

或者，您可以将正则表达式中的第二个单词放在前瞻中，然后捕获它：[`(\w+)(?=\W+(\w+)\b)`](http://rubular.com/r/AiVWY7ZeVp)- 但请确保您获得捕获，而不是匹配项（因为匹配项仍将仅包含第一个单词）。

# python - Python：基于模式创建动态循环

> ID：14972332
> 
> 赞同：0
> 
> 时间：2013-02-20T04:32:03.243
> 
> 标签：python

我还在学习用 Python 编写代码

我想根据模式生成一个字符串，我知道的唯一方法是使用 for 循环。

在下面的示例代码中，我为“vcvcv”模式创建了一个循环。c=辅音，v=元音

如何根据我提供给脚本的模式创建动态循环？

例如。如果模式是“cvcvc”，则应构建循环以生成字符串

有帮助。

谢谢。

```
#!/bin/env python

vowel="aeiou"
consonant="bcdfghjklmnpqrstvwxyz"

lvowel=list(vowel)
lconsonant=list(consonant)

# pattern for "vcvcv" = ababa
for a in lvowel:
  for b in lconsonant:
    for c in lvowel:
      for d in lconsonant:
            for e in lvowel:
                  myname=a+b+c+d+e
                  print myname

# pattern for "cvcvc" = babab
# how to make the loop dynamic based on pattern ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T04:36:58.720

像这样的东西应该工作：

```
import itertools

mapping = {
    'v': 'aeiou',
    'c': 'bcdfghjklmnpqrstvwxyz'
}

pattern = 'vcvcv'

for thing in itertools.product(*map(mapping.get, pattern)):
    print ''.join(thing) 
```

以下是它的大致工作原理：

*   `map(mapping.get, pattern)`只是转换`'vcv'`为`['aeiou', 'bcdfghjklmnpqrstvwxyz', 'aeiou']`. 它用相应的字符列表替换每个字母。
*   `*map(...)`解包参数列表。
*   `itertools.product()`就像一堆嵌套的 for 循环。
*   `''.join(thing)`将字符列表连接成单个字符串。

如果您想在没有 的情况下执行此操作`itertools`，则必须创建一个递归函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:44:45.113

如果您刚刚开始编程并希望看到比上面列出的 itertools 更通用的解决方案，那么递归是您最好的选择，它允许您任意嵌套循环。

这里有一点复杂，您可以使用[Python 生成器](http://wiki.python.org/moin/Generators)，或者使用更简单（但更混乱）的构造。后者的示例如下所示。

就像是

```
def continuePattern(pat, strSoFar):
  if pat == '':
    print strSoFar
  elif pat[0] == 'v':
    for c in lvowel:
       continuePattern(pat[1:], strSoFar + c)
  elif pat[0] == 'c':
    for c in lconsonant:
       continuePattern(pat[1:], strSoFar + c) 
```

这是几种可能的实现之一，也是我能想象的两个最天真的实现之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:50:17.350

下面给出了前 n 个排列的更精细但易于定制的版本，

```
def gen_pattern( seq, op = "" ):
      vowel="aeiou"
      consonant="bcdfghjklmnpqrstvwxyz"

      lvowel=list(vowel)
      lconsonant=list(consonant)
      if ( not seq ):
            print op
            return

      if ( seq[0] == 'v' ):
            for v in lvowel:
                  gen_pattern( seq[1:], op+v )
      elif ( seq[0] == 'c' ):
            for c in lconsonant:
                  gen_pattern( seq[1:],op+c )

if __name__ == "__main__":
      gen_pattern("vcvcv") 
```

我同意这是更多的工作！

# java - Java 连接到 ipAddress

> ID：14972334
> 
> 赞同：2
> 
> 时间：2013-02-20T04:32:09.123
> 
> 标签：java, mysql, connection

我正在尝试将我的程序连接到我们的主服务器，但它不起作用。当我登录时，这是发生的错误，

```
Connection error:
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException:
Cannot load connection class because of underlying exception:
'java.lang.NumberFormatException:For input string:"192.168.10.105"'. 
```

这是我的代码，在我的课堂上，我将它连接到服务器的数据库：

```
package login;
import java.sql.*;
import javax.swing.JOptionPane;

public class DatabaseCls {

public Connection con;
private void conData() {
    try {

         String host = "jdbc:mysql://ipAddress:192.168.10.105/eqod-log";
        String uName = "localhost";
        String uPass= "eq0d.c0m";

        con = DriverManager.getConnection(host, uName, uPass);
    }
    catch (Exception e) {
        JOptionPane.showMessageDialog(null, e, "Connection Error", JOptionPane.ERROR_MESSAGE);
    }
}

public ResultSet rsFetch(String query) {
    ResultSet rs = null;
    try {
        conData();
        rs = con.createStatement().executeQuery(query);
        return rs;
    }
    catch(Exception e) {
        JOptionPane.showMessageDialog(null, e, "ResultSet Query Error", JOptionPane.ERROR_MESSAGE);
        return rs;
    }
}

public boolean exSQL(String query) {
    boolean done;
    try {
        done = true;
        conData();
        con.createStatement().execute(query);
        con.close();
        return done;
    }
    catch(Exception e) {
        done = false;
        JOptionPane.showMessageDialog(null, e, "Query Error", JOptionPane.ERROR_MESSAGE);
        return done;
    }
}
} 
```

你能帮我解决这个问题吗，我刚开始使用java

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:50:54.613

```
 String host = "jdbc:mysql://192.168.10.105:3306/eqod-log"; //3306 is port 
```

使用此字符串作为连接 url。更多详细信息[JDBC URL 格式](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:39:38.600

IP地址表示=192.168.10.105

在`:`您必须提及服务器所在的端口号之后，默认情况下它在 3306 上，使用您的实际端口号更新端口号，然后尝试

更改此行

```
String host = "jdbc:mysql://192.168.10.105:3306/eqod-log"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:42:12.873

在这个字符串中：

```
"jdbc:mysql://ipAddress:192.168.10.105/eqod-log" 
```

在 URL 中，冒号之前的部分 (ipAddress) 应该是 IP 地址或主机名。这里解析器的东西是主机名“ipAddress”。冒号后面的部分应该是端口，因此是一个整数。因此解析器尝试将“192.168.10.105”解析为整数，但它失败了。

我认为您想改用此 URL：

```
"jdbc:mysql://192.168.10.105:1234/eqod-log" 
```

1234 是端口（通常是 3306）。

# java - 在一个 JTextField 中添加字符串和 int 值

> ID：14972337
> 
> 赞同：1
> 
> 时间：2013-02-20T04:32:24.273
> 
> 标签：java, swing, jtextfield

将用户输入的米转换为英尺和英寸

```
//     following format  (16ft. 4in.).  Disable the button so that
//     the user is forced to clear the form. 
```

问题是我不知道如何将字符串和 int 值放在一个文本字段中，而不是如何在 if else 语句中设置它们

```
 private void ConversionActionPerformed(ActionEvent e )
   {
         String s =(FourthTextField.getText());
         int val = Integer.parseInt(FifthTextField.getText()); 

         double INCHES = 0.0254001;
         double FEET = 0.3048;
         double meters;

         if(s.equals("in" ) )
         {
             FourthTextField.setText(" " + val*INCHES + "inch");
         }
         else if(s.equals("ft"))
         {
             FourthTextField.setText(" " +val*FEET + "feet");
         }
   } 
```

是否可以同时添加字符串和 int 值`JTextField`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:35:37.013

你可以做...

```
FourthTextField.setText(" " + (val*INCHES) + "inch"); 
```

或者

```
FourthTextField.setText(" " + Double.toString(val*INCHES) + "inch"); 
```

或者

```
FourthTextField.setText(" " + NumberFormat.getNumberInstance().format(val*INCHES) + "inch"); 
```

**更新**

如果您只关心提取文本的数字部分，则可以执行以下操作...

```
String value = "1.9m";
Pattern pattern = Pattern.compile("\\d+([.]\\d+)?");

Matcher matcher = pattern.matcher(value);
String match = null;

while (matcher.find()) {

    int startIndex = matcher.start();
    int endIndex = matcher.end();

    match = matcher.group();
    break;

}

System.out.println(match); 
```

这将输出`1.9`，剥离后的每一个`m`。这将允许您提取 的数字元素`String`并转换为数字进行转换。

这将处理整数和小数。

# python-2.7 - 使用 pyopenssl 创建自签名证书

> ID：14972345
> 
> 赞同：8
> 
> 时间：2013-02-20T04:33:24.477
> 
> 标签：python-2.7, openssl, x509certificate, self-signed, pyopenssl

我正在尝试使用 pyopenssl 生成 ac 自签名 X509v3 CA 证书。我想使用包含主题密钥标识符 (SKID) 的 keyid 添加扩展授权密钥标识符 (AKID)。

但是我下面的代码块不会将 SKID 复制到 AKID 而是引发异常。

代码如下

```
import OpenSSL

key = OpenSSL.crypto.PKey()
key.generate_key(OpenSSL.crypto.TYPE_RSA, 2048)

ca = OpenSSL.crypto.X509()
ca.set_version(2)
ca.set_serial_number(1)
ca.get_subject().CN = "ca.example.com"
ca.gmtime_adj_notBefore(0)
ca.gmtime_adj_notAfter(24 * 60 * 60)
ca.set_issuer(ca.get_subject())
ca.set_pubkey(key)
ca.add_extensions([
  OpenSSL.crypto.X509Extension("basicConstraints", True,
                               "CA:TRUE, pathlen:0"),
  OpenSSL.crypto.X509Extension("keyUsage", True,
                               "keyCertSign, cRLSign"),
  OpenSSL.crypto.X509Extension("subjectKeyIdentifier", False, "hash",
                               subject=ca),
  OpenSSL.crypto.X509Extension("authorityKeyIdentifier", False, "keyid:always",issuer=ca)
  ])
ca.sign(key, "sha1")
open("MyCertificate.crt.bin", "wb").write(
            OpenSSL.crypto.dump_certificate(OpenSSL.crypto.FILETYPE_ASN1, ca)) 
```

抛出的异常如下

```
Traceback (most recent call last):
  File "C:\Documents and Settings\Administrator\Desktop\Certificate\certi.py", line 21, in <module>
    OpenSSL.crypto.X509Extension("authorityKeyIdentifier", False, "keyid:always",issuer=ca)
Error: [('X509 V3 routines', 'V2I_AUTHORITY_KEYID', 'unable to get issuer keyid'), ('X509 V3 routines', 'X509V3_EXT_nconf', 'error in extension')] 
```

现在，如果我从以下代码行中的 line keyid 参数中删除“ **always ”**

> OpenSSL.crypto.X509Extension("authorityKeyIdentifier", False, "keyid",issuer=ca)

我将 AKID keyid 字段为空，并且它不包含 SKID，如下所示

```
 00:84:13:70:73:fe:29:61:5f:33:7d:b3:74:97:3b:
            3a:f3:11:01:7c:b8:37:a8:8c:72:81:ee:92:fd:91:
            8a:11:b3:b3:02:b4:97:d5:f8:1b:91:54:7e:15:49:
            26:6d
        Exponent: 65537 (0x10001)
X509v3 extensions:
    X509v3 Basic Constraints: critical
        CA:TRUE, pathlen:0
    X509v3 Key Usage: critical
        Certificate Sign, CRL Sign
    X509v3 Subject Key Identifier: 
        CE:D1:31:DE:CF:E3:E2:BC:6C:73:3D:55:F0:88:53:0A:F1:DC:31:14
    X509v3 Authority Key Identifier: 
        0.
Signature Algorithm: sha1WithRSAEncryption
     0b:7b:28:f6:b9:1e:6e:ec:53:6a:c5:77:db:c5:3f:5e:1d:ab:
     e5:43:73:eb:52:24:af:39:2b:aa:a3:f6:34:e1:92:4b:3b:5e:
     b6:1 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T23:25:09.643

这意味着您使用的 CA 密钥没有设置 subjectKeyIdentifier。

在您的示例中，您正在使用对尚未设置 subjectKeyIdentifier 的 ca 的引用创建 authorityKeyIdentifier。

如果您将代码 a 更改为：

```
ca.add_extensions([
  OpenSSL.crypto.X509Extension("basicConstraints", True,
                               "CA:TRUE, pathlen:0"),
  OpenSSL.crypto.X509Extension("keyUsage", True,
                               "keyCertSign, cRLSign"),
  OpenSSL.crypto.X509Extension("subjectKeyIdentifier", False, "hash",
                               subject=ca),
  ])
ca.add_extensions([
  OpenSSL.crypto.X509Extension("authorityKeyIdentifier", False, "keyid:always",issuer=ca)
  ]) 
```

然后它工作。

# ruby-on-rails - Rails 3 - 这个 SQL 安全吗？

> ID：14972346
> 
> 赞同：1
> 
> 时间：2013-02-20T04:33:35.863
> 
> 标签：ruby-on-rails, ruby

我是 Rails 新手，我烘焙了这个小登录控制器。

```
 def create
    username = params[:user].downcase
    user = User.where("username = ? OR email = ?", username, username)[0]
    if user and user.check_password(params[:password], user.password, user.salt)
        cookies[:auth] = user.auth
        redirect_to root_url
    else
        flash.now.notice = 'Login failed'
        render 'new'
    end
  end 
```

我想知道这是否安全，还是我需要在用户名之上添加一些清理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T04:50:36.743

如果您正在使用提供的转义工具（即占位符的用途），那么**只要**您使用的是最新版本的 Rails 和其他关键组件`?`，您应该可以避免 SQL 注入错误。

 **安全代码示例：

```
User.where(:username => arg)
User.where('username=?', arg) 
```

**不安全**代码示例：

```
User.where('username="#{arg}"') 
```

请注意，您必须使用字符串插值来创建 SQL 注入错误。这些在审计代码时应该很明显，而且很少有这样做的借口。如果您必须，无论出于何种原因，请绝对确定您注入的任何值都已正确转义或来自已知良好值的白名单。

旧版本的 Rails 和一些流行的分页和身份验证工具都有可以利用的 SQL 注入错误。确保您拥有这些的最新版本。如有必要，删除`Gemfile.lock`并清理`bundle install`.**

# sql - system.data.oledb.oledbexception：INSERT INTO 语句中的语法错误

> ID：14972347
> 
> 赞同：2
> 
> 时间：2013-02-20T04:33:48.913
> 
> 标签：sql, vb.net, ms-access

我在 VB.NET 中有一个项目，如下所示

```
Public Class MCARegis
    Dim con As New OleDb.OleDbConnection()

    Private Sub MCARegis_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Dim da As OleDb.OleDbDataAdapter
        Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
        Me.con = New OleDb.OleDbConnection()
        con.ConnectionString = dbprovider
        con.Open()
        MsgBox("opened")
    End Sub

    Private Sub btnadd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnadd.Click

        Try
            Dim da As OleDb.OleDbDataAdapter
            Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
            Me.con = New OleDb.OleDbConnection()
            con.ConnectionString = dbprovider
            con.Open()

            Dim sqlquery As String = "INSERT INTO MCA (URno,SName,Fname,CAddress,)" + "VALUES (" & CInt(txtUrn.Text) & ",'" & txtName.Text & "','" & txtFname.Text & "','" & txtCAdd.Text & "');"
            Dim sqlcommand As New OleDb.OleDbCommand(sqlquery)

            With sqlcommand
                .CommandText = sqlquery
                .Connection = con
                .ExecuteNonQuery()
            End With
            MsgBox("Record Added")
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try

    End Sub

End Class 
```

当我尝试在 Insert into 语句中添加值时出现错误，对此有何建议？system.data.oledb.oledbexception：system.data.oledb.command.exceutecommandtexterrorhandling（oledbhresult hr）处的 INSERT INTO 语句中的语法错误 system.data.oledb.oledbcommand.executecommandtext（object&executeresult）......

在 system.data.oledb.oledbcomamand.executenonquery()

在第 29 行。

提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:36:34.433

替换`"INSERT INTO MCA (URno,SName,Fname,CAddress,)"`为`"INSERT INTO MCA (URno,SName,Fname,CAddress)"`。您指定了一个多余的逗号

# android - Android OnItemClickListener long id 参数未提供字段 id

> ID：14972359
> 
> 赞同：0
> 
> 时间：2013-02-20T04:34:53.943
> 
> 标签：android, sqlite, listview

我已经生成了一个客户列表。单击此按钮应打开编辑视图以编辑客户。这里的参数应该根据存储在数据库中传递行的_id。但每次传递它在列表中的位置。所以编辑视图打开了错误的数据。请帮忙。

```
 lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> l, View v, int position, long id) {
            Uri customerEditUri = Uri.parse(CustomerBean.CONTENT_URI + "/" + id);
            customerEdit(customerEditUri);
        }
    }); 
```

答：谢谢大家。您的评论帮助我解决了这个问题。我在 CustomerObject 类中创建了以下函数：

```
@Override
    public String toString() {
        return this.name;
    } 
```

之后在活动中创建了一个 CustomerObject 数组，如下所示：

```
List<CustomerObject> customers = new ArrayList<CustomerObject>(); 
```

通过以下方式创建 ArrayAdapter：

```
adapter = new ArrayAdapter<CustomerObject>(this, R.layout.list, R.id.customer_name, customers); 
```

最后像这样调用 setOnItemClickListener() ：

```
 lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> l, View v, int position, long id) {
            CustomerObject custObj = adapter.getItem(position);
            Uri customerEditUri = Uri.parse(CustomerBean.CONTENT_URI + "/" + custObj.pkid);
            customerEdit(customerEditUri);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:44:37.280

您必须设置您希望它在适配器中返回的 ID，即用于将数据绑定到 ListView 的 List View Adapter。

如果我没记错的话，该方法在适配器类中，方法名如下：

```
public long getItemId(int position) {
  return myitem[position].getId();
} 
```

返回适当的 ID 将为您提供所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:44:09.607

我相信“长ID”不是记录ID，而是内部生成的视图ID。

如果您想返回数据源 ID，那么您需要使用 position 和类似的东西：

```
// Assuming datasource is an ArrayAdapter<Customer>
Customer customer = customerAdapter.getItemAtPosition(position);

// then you can do
Uri customerEditUri = Uri.parse(CustomerBean.CONTENT_URI + "/" + customer.getId());
customerEdit(customerEditUri); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:56:46.090

替换`id`为`position`。

采用

```
 lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> l, View v, int position, long id) {
            Uri customerEditUri = Uri.parse(CustomerBean.CONTENT_URI + "/" + position);
            customerEdit(customerEditUri);
        }
    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T02:46:46.007

在我看来，通过位置，您可以使用适配器的getItem（位置）获取行项。因此，位置表示适配器中的数据位置。

对于 id 参数，我认为它是一种帮助方法，如您所知，适配器中的数据始终是一个记录器。一般来说，记录器应该有一个 id 列（类似于数据库 id）。编码时，可以通过位置获取item，然后获取item的id（如果item有id）。但是您可以使用“id”参数直接获取这样的“id”。

顺便说一句，如果要使用 id 参数，则必须在适配器中实现 getItemId() 方法。ArrayAdapter 中的默认实现只是返回位置。

# ios - 如何以横向模式上传和保存视频

> ID：14972366
> 
> 赞同：1
> 
> 时间：2013-02-20T04:36:17.477
> 
> 标签：ios, cocoa-touch, browser, orientation

我正在尝试以横向模式上传/保存拍摄的视频（如果以纵向模式拍摄）。使用 UIImagePickerController，根据这些问题：

[视频方向 UIImagePickerController](https://stackoverflow.com/questions/7879633/video-orientation-uiimagepickercontroller/)

[如何设置视频的 UIImagePickerController 方向？](https://stackoverflow.com/questions/9193451/how-can-i-set-the-uiimagepickercontroller-orientation-for-video)

这些问题（以及许多其他问题）解释了如何确定视频是否以纵向拍摄，但我无法找到有关如何以在媒体设备上播放时的方向实际上传和保存（到服务器）视频的答案视频不是水平的，看起来很奇怪。我们可以在这里为所有研究过这个问题的人得出结论，看看是否/如何做到这一点？

# python - Python 端口扫描器

> ID：14972367
> 
> 赞同：0
> 
> 时间：2013-02-20T04:36:27.123
> 
> 标签：python, sockets, port

我是 python 的新手并且卡在了一个点上。我想只使用 python 3 内置库创建端口扫描器（意味着避免 scapy 等）我有以下代码：

```
import socket
for i in range(1,26):  
  s = socket.socket()  
  s.settimeout(0.5)
  ip = "74.207.244.221" #scanme.nmap.org
  response = s.connect_ex((ip, i)) 
  if response:
      print ("%d\tclose" %i)
  else:
      print ("%d\topen" %i)
  s.close() 
```

现在我想为此添加 2 个功能：即

1.  区分关闭端口和过滤端口。在这两种情况下，我都会收到相同的 errno 作为回报，那么我如何检查我是否收到了第一个数据包或什么也没有？据我尝试 s.recv() 不适用于此。
2.  我想控制尝试（尝试）的次数，即我只想发送一两个同步数据包。我不希望这个程序发送超过 2 个用于探测的同步数据包。这东西怎么可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:53:18.483

> 区分关闭端口和过滤端口。在这两种情况下，我都会收到相同的 errno 作为回报，所以我如何检查我是否收到了第一个数据包或什么也没有

您可能只检查过发回 RST 的服务器。这是我尝试过的：

*   第一种情况，正常配置：

    ```
    >>> os.strerror(s.connect_ex((ip, 81)))
    'Connection refused' 
    ```

*   二、用手动iptables：

    ```
    iptables -A OUTPUT -p tcp --dport 81 -j DROP

    >>> os.strerror(s.connect_ex((ip, 81)))
    'Resource temporarily unavailable' 
    ```

> 我想控制尝试（尝试）的次数，即我只想发送一两个同步数据包。

我认为没有`setsockopt`暴露 TCP 选项，但在 linux 上有：

```
net.ipv4.tcp_syn_retries 
```

但是，由于您限制了套接字的超时，所有未在 0.5 秒内完成的操作都将超时。所以很可能只有 1 或 2 个 SYN 会离开站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T18:11:59.240

```
#!/usr/bin/python

import socket

s = socket.socket(socket.AF_INET, socekt.SOCK_STREAM)
host = 74.207.244.221

def portscan(port):
    try:
        s.connect((host,port))
        return True
    else:
        return False
for x in range(1,255):
    if portscan(x):
        print('Port',x,'Is Open') 
```

# android - 通过 android 应用在 Twitter 上分享视频

> ID：14972368
> 
> 赞同：3
> 
> 时间：2013-02-20T04:36:33.520
> 
> 标签：android, twitter, twitter-oauth, android-twitter

我用我的 android 应用程序成功地在 Twitter 上分享了 text/img，但现在我需要通过我的应用程序在 Twitter 上分享 VIDEO。是否有任何可能的库来实现这一目标？欢迎任何关于如何通过我的应用程序在 Twitter 上分享视频的建议。

PS：一些教程的链接会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-11T06:53:49.067

即兴[发挥 Android 热情的](https://stackoverflow.com/users/758710/androidenthusiastic)回答，下面是通过 android 应用在 twitter 上分享视频的工作代码

```
File f=new File(filepath);
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.setType("video/*");
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(f));
final PackageManager pm = getActivity().getApplicationContext().getPackageManager();
final List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);

for (final ResolveInfo app : activityList) {

   if("com.twitter.android.composer.ComposerActivity".equals(app.activityInfo.name))        
    {

        final ActivityInfo activity = app.activityInfo;
        final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);
        shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
        shareIntent.setComponent(name);
        getActivity().getApplicationContext().startActivity(shareIntent);
        break;
    }

 } 
```

`filepath`存储在设备存储中的视频路径在哪里，例如“ `/storage/emulated/0/Videos/VID_20151011_115238.mp4`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:53:35.260

这是工作代码。请通过它。

```
 Button b;
    String path="video path";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button button=(Button)findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
        Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
        shareIntent.setType("image/*");
        shareIntent.putExtra(android.content.Intent.EXTRA_TEXT,path);
        final PackageManager pm = v.getContext().getPackageManager();
        final List<ResolveInfo> activityList = pm.queryIntentActivities(shareIntent, 0);
        for (final ResolveInfo app : activityList) {
          if ("com.twitter.android.PostActivity".equals(app.activityInfo.name)) {
            final ActivityInfo activity = app.activityInfo;
            final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name);
            shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);
            shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
            shareIntent.setComponent(name);
            v.getContext().startActivity(shareIntent);
            break;
          }
        }
      }
    }); 
```

**安卓清单**

```
 <intent-filter>
             <action android:name="android.intent.action.MAIN" />
            <data android:mimeType="image/*" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

# c++ - 如何取消引用存储在智能指针向量中的派生类对象？

> ID：14972373
> 
> 赞同：0
> 
> 时间：2013-02-20T04:36:53.960
> 
> 标签：c++, inheritance, vector

我正在构建一个国际象棋游戏。我有一个基类 gamePiece 和一个名为 rook 的派生类。

我最初想将所有不同类型的片段放在一个向量中，并用迭代器遍历它。但是，我之前发现我无法在 gamePiece 对象的向量中插入 rook 对象。

许多人建议我改用指针来完成我需要的工作——建议使用智能指针，特别是 unique_ptr 和 shared_ptr。要查看我上一个问题中的讨论，请参阅以下链接：

[如何在指向基类对象的指针向量中引用派生对象？](https://stackoverflow.com/questions/14945787/how-to-reference-derived-objects-in-a-vector-of-pointers-to-base-class-objects)

为 unique_ptr 建议的具体技术在这里：

```
vector<std::unique_ptr<gamePiece>> vectorOfPointersToGamePieces;
std::unique_ptr<gamePiece> rk( new rook(1, "Rook", 'A', 1, "White", "Up") );
vectorOfPointersToGamePieces.push_back(std::move(rk)); 
```

shared_ptr 的具体技术在这里：

```
vector<std::shared_ptr<gamePiece>> vectorOfPointersToGamePieces;
vectorOfPointersToGamePieces.push_back(std::make_shared<rook>(1, "Rook", 'A', 1, "White", "Up") ); 
```

但是，这些技术似乎都不适合我。实际上，我应该再澄清一点——它部分有效。当与“rook”（派生）对象一起使用时，显示函数报告我的字符串是空的并且变量看起来是未初始化的，即使构造函数中的所有内容似乎都工作正常。

然而，当这些技术与“gamePiece”（基础）对象一起使用时，显示功能完美地显示了所有内容......因此，必须有一个原因为什么它可以完美地与基类对象一起使用，但不能与派生对象一起使用。

我是否缺少某种步骤（例如，在将“车”放入矢量之前，我是否需要将“车”放入“游戏块”中……）？我还在某处的另一篇文章中读到某些类型的智能指针不能进入 STL 容器。这是其中一种情况吗？或者它可能没有认识到 rook 是 gamePiece 的派生对象。那堂课在下面。

```
class rook: public gamePiece
{

public:
rook(int player, string type, char file, int rank, string color, string facing)
{
    gamePiece(player, type, file, rank, color, facing);
}

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:52:19.267

```
rook(int player, string type, char file, int rank, string color, string facing)
 : gamePiece(player, type, file, rank, color, facing) {} 
```

.. 是从派生类调用父构造函数的正确方法。您在内部所做的不是初始化对象本身，而是直接调用构造函数。我很惊讶您的编译器允许您这样做。rook 对象可能会调用 gamePiece 的默认构造函数（我假设您`gamePiece() {}`在 gamepiece 类中定义了类似的东西）。

# php - CodeIgniter 的布局错误

> ID：14972377
> 
> 赞同：0
> 
> 时间：2013-02-20T04:37:14.633
> 
> 标签：php, codeigniter

用户登录到我的系统后，我很难让页面正确显示。我编写的大部分代码都取自教程，并根据我的需要进行了调整，这就是我遇到问题的原因！我想`dishes_management()`在`index()`. 但是，如果我这样做，页面的样式就会完全扭曲。

如果我只是正常加载`index()`，然后单击我`example.php`视图中的链接之一，它将打开并完美显示！为什么是这样？

```
class Examples extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->database();
    $this->load->helper('url');
    $this->load->library('grocery_CRUD');   
}

function _example_output($output = null)
{
    $this->load->view('example.php',$output);

}

function index()
{
    $this->_example_output((object)array('output' => '' , 'js_files' => array() , 'css_files' => array()));
}   

function dishes_management()
{
    try{
        $crud = new grocery_CRUD();

        $crud->set_theme('datatables');
        $crud->set_table('dishes');
        $crud->set_subject('Dish');
        $crud->required_fields('dish_name');
        $crud->columns('dish_name','dish_desc','dish_price', 'dish_cat');

        $output = $crud->render();

        $this->_example_output($output);

    }catch(Exception $e){
        show_error($e->getMessage().' --- '.$e->getTraceAsString());
    }
} 
```

例子.php

```
<a href='<?php echo site_url('examples/dishes_management')?>'>Dishes</a> |
    <a href='<?php echo site_url('examples/orders_management')?>'>Orders</a> | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:09:15.493

我不知道如何对原始问题发表评论，所以我暂时将其作为答案。如果这违反了任何 Stack Overflow 政策，请继续删除它。

如果一个页面的样式被破坏了，很可能是css链接标签的路径是相对路径，而不是生成的绝对路径`site_url(<some_path>)`。检查是否是这种情况。

# css - 中心 div 显示在页面顶部

> ID：14972381
> 
> 赞同：1
> 
> 时间：2013-02-20T04:38:07.490
> 
> 标签：css

我有一个 div 以模态方式显示在页面顶部。我不确定的是如何将它从左到右居中。

这是我拥有的CSS。我知道剩下的0；需要更改，但不确定如何更改。

```
.adminBack {
    position: fixed;
    top: 0;
    left: 50%;
    z-index: 999;
    width: 1298px;
    margin-left: 649px;
    margin-top: 100px;
    padding: 5px 0px;   
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T04:50:56.960

一些新的 CSS 可以尝试：

```
.adminBack {
    position: fixed;
    top: 50%;
    left: 50%;
    z-index: 999;
    width: 1298px;
    height: 590px;
    margin-left: -649px; /*   Minus half of element width*    */
    margin-top: -300px;  /*   Minus half of element height*   */
    padding: 5px 0px;
}

/*
     *includes padding and borders.
*/ 
```

## [演示](http://jsbin.com/oyawog/1/edit)| [全屏](http://jsbin.com/oyawog/1/quiet)

# ruby-on-rails - 用于托管 RoR 应用程序的 linode 实例大小

> ID：14972383
> 
> 赞同：2
> 
> 时间：2013-02-20T04:38:22.003
> 
> 标签：ruby-on-rails, performance, ruby-on-rails-3.1

我们正在最小的 linode 实例 (512MB) 上开发一个 RoR 应用程序，并且遇到了一些资源问题。它是 nginx / mod_passenger。当我运行顶部时，它看起来像这样：

![在此处输入图像描述](../Images/5ba4f99308cb1aeb33ac95a1d8fc5e1e.png)

我显然担心内存消耗，但这是否会引起问题。将其设置为 1GB、2GB 或 4GB 是否有意义，看看是否让它更好地工作？是否有理想基线的位置？

谢谢

编辑 - 难以阅读顶部，只需复制 url 并在新的浏览器窗口中发布以使其更清晰。提前谢谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:29:15.150

我有一个使用 nginx/unicorn 在 512MB 共享主机上运行的小型应用程序，我看到了类似的图片。它或多或少都可以，但是如果您打算使用 CarrierWave 调整图像大小之类的事情，您可能不会有太多的时间。

我的主要应用程序每周有大约 1.5-200 万次页面浏览量，并且使用了大约 3GB 的空间来运行延迟作业、faye pub/sub、memcached、监控等。

所以我建议，除非您想花费数小时优化您的应用程序，否则 512MB 确实是绝对最小值。

# ext4 - Ext 4.1 表单面板 loadRecord

> ID：14972384
> 
> 赞同：0
> 
> 时间：2013-02-20T04:38:26.870
> 
> 标签：ext4

我有一个带有 actioncolumn 的网格。单击 actioncolun 时，它会显示一个包含编辑和删除项目的菜单。当我单击编辑时，它应该显示一个带有表单面板的模式弹出窗口。行数据应显示在字段中。我可以通过使用 loadRecord 方法来实现上述目标。

我正在使用的代码是

```
actioncolumn.on('click', function (grid, td, rowIndex, eve, e) {
                            var rec = grid.getStore().getAt(rowIndex);
                            if (!this.menu) {
                                this.menu = Ext.create('Ext.menu.Menu', {
                                    width: 100,
                                    height: 70,
                                    plain: true,
                                    floating: true,
                                    items: [{
                                        text: 'Edit',
                                        icon: 'images/Edit.png',
                                        handler: function (a, b, c, d) {
                                            var view = Ext.widget('userwindow');
                                            view.down('baseform').loadRecord(rec);
                                        }
                                    } 
```

}

但问题是当我第二次点击编辑时，表单面板显示的是第一次加载的数据。

谁能帮忙

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:18:17.430

我通过将记录设置为一个单独的变量来实现上述目的

```
actioncolumn.on('click', function (grid, td, rowIndex, eve, e) {
                           actioncolumn.rec = grid.getStore().getAt(rowIndex);
                            if (!this.menu) {
                                this.menu = Ext.create('Ext.menu.Menu', {
                                    width: 100,
                                    height: 70,
                                    plain: true,
                                    floating: true,
                                    items: [{
                                        text: 'Edit',
                                        icon: 'images/Edit.png',
                                        handler: function (a, b, c, d) {
                                            var view = Ext.widget('userwindow');
                                            view.down('baseform').loadRecord(actioncolumn.rec);
                                        }
                                    } 
```

问候网址

# bash - 如何在 bash 脚本中对多个文件进行排序和使用？

> ID：14972385
> 
> 赞同：0
> 
> 时间：2013-02-20T04:38:27.893
> 
> 标签：bash, pattern-matching, filenames

我有多对仅在一个数字上不同的文件：

121_S11_L001_R1_001

121_S11_L001_R2_001

另一对相对于其他文件，在多个数字上不同，但相对于它的对，同样只有一个数字：

120_S10_L001_R1_001

120_S10_L001_R2_001

我有一个 bash 脚本来单独处理这些文件：

如果 [ -s $infile ] && [ ！-s $infile.bwa ]; 然后

```
echo "Creating BWA file..."
time bwa aln $path"Genomeidx" $infile > $infile.bwa
time bwa aln $path"Genomeidx" $infile2 > $infile2.bwa 
```

其中 'infile' 和 'infile2' 是在命令行上指定的文件

我如何递归地选择和处理每对的每个文件，而不是手动输入每一对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:53:34.410

您可以使用 bash 通配符来挑选所有`_R1_`样式文件，然后找到它的对。

像这样的东西可以适应你的处理：

```
#!/bin/bash

for file in *_R1_*; do
    pair=${file/_R1_/_R2_}
    if [ -f "$pair" ]; then
        echo "processing $file and its pair $pair"
    fi
done 
```

# javascript - jquery：单击更改图像并发布到外部页面

> ID：14972393
> 
> 赞同：0
> 
> 时间：2013-02-20T04:39:40.700
> 
> 标签：javascript, jquery

我有一个小图标，单击时我想更改为另一个小图标并将数字发布到另一个页面（但忽略新页面的 HTML）。目的是让用户“喜欢”产品。我无法让它工作，但什么也没有发生。

我在头脑中使用的代码是：

```
<script type="text/javascript">
$(function() {
    $('.addlib').live("click",function() {
        var pibn = $(this).attr("id");
        $.ajax({
            type: "POST",
            url: "/addlibrary.php",
            data: "pibn="+pibn, 
            beforeSend: function() {
                $('a.addlib').html('<img src="/images/icons/tick.png" width="18" height="18" class="iconbutton" />');
            },
            success: function(html) {
                return false;
            }
        });
        return false;
    });
});
</script> 
```

在体内：

```
<span id="1000915326" class="addlib"><a href="#"><img src="/images/icons/info.png" width="18" height="18" class="iconbutton" /></a></span> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:44:03.650

```
beforeSend: function() {
   $('a.addlib').html('<img src="/images/icons/tick.png" width="18" height="18" class="iconbutton" />');
} 
```

将其替换为

```
beforeSend: function() {
   $('span.addlib a').html('<img src="/images/icons/tick.png" width="18" height="18" class="iconbutton" />');
} 
```

因为`a.addLib`不存在。

**完整的测试代码。**

```
$(function() 
{
    $('.addlib').live("click",function()
    {
        var pibn       = $(this).attr("id");
        var clickedDom = $(this);
        $.ajax(
        {
            type: "POST",
            url: "/addlibrary.php",
            data: "pibn="+pibn, 
            beforeSend: function()
            {
                clickedDom.find('a').html('<img src="/images/icons/tick.png" width="18" height="18" class="iconbutton" />');
            },
            success: function(html)
            {
                return false;
            }
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:50:45.177

一个更简单的解决方案

```
$(document).on('click', '.addlib', function() {
    var span = $(this),
        img = span.find('img');
    $.post('/addlibrary.php', {
        pibn: span.attr('id')
    }, function() {
        img.attr('src', img.attr('src').replace('info', 'tick'))
            .parent('a').unwrap();
    });
}); 
```

# c# - 在 c# 中统一 3d 成为对象的子对象

> ID：14972395
> 
> 赞同：1
> 
> 时间：2013-02-20T04:39:58.070
> 
> 标签：c#, object, unity3d, transform, parent-child

我的代码在这里

```
GameObject mainpumkinclone = (GameObject)Instantiate(pumkin, 
floorPosition + new Vector3(x, y, z), Quaternion.identity);
mainpumkinclone.transform.parent = transform.Find("prickle" + i); 
```

但是 mainpumkinclone 并没有成为特定刺痛的孩子。

请帮助解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:31:43.403

GameObject“prickle”在编辑器中是这样命名的吗？ia 编号是否与该游戏对象匹配？例如，“prickle1”是编辑器场景中的一个游戏对象。如果这两个答案都是肯定的，那么试试这个。

```
mainpumpkinclone.transform.parent = GameObject.Find("prickle" + i).transform; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T08:10:38.433

正如您从[Unity 脚本参考页上`Transform`](http://docs.unity3d.com/Documentation/ScriptReference/Transform.html)看到的那样，该类没有任何功能`Find`。要按名称查找对象，就像您尝试做的那样，您需要使用 class 的类函数，如此[处](http://docs.unity3d.com/Documentation/ScriptReference/GameObject.Find.html)`Find`所述。然后将该游戏对象的变换（使用其[属性](http://docs.unity3d.com/Documentation/ScriptReference/GameObject-transform.html)）指定为其他游戏对象的父对象。具体来说，这样做：`GameObject`[`transform`](http://docs.unity3d.com/Documentation/ScriptReference/GameObject-transform.html)

```
mainpumpkinclone.transform.parent = GameObject.Find("prickle" + i).transform 
```

# android - 浮动在活动顶部的对话框

> ID：14972398
> 
> 赞同：1
> 
> 时间：2013-02-20T04:40:10.050
> 
> 标签：android, dialog, widget

![屏幕截图](../Images/97614e911957971ab15ac5a65d1c51b3.png)

我有一个非常简单的小部件，它允许用户重新配置小部件并选择一个新笔记。如果我之前打开了我的活动并点击了主页按钮，然后单击配置按钮，它将重新打开我的应用程序，对话框浮动在顶部。我试图清除顶部标志，但它似乎不起作用。有没有其他人以前看过这个或者知道我错过了什么？

setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:26:38.013

我终于找到了一个类似的帖子。抱歉重复了。如果其他人遇到此问题，请访问此链接：

[重新启动我的小部件配置活动在后台启动我的应用程序](https://stackoverflow.com/questions/4802928/relaunching-my-widget-configuration-activity-launches-my-app-in-background)

```
android:allowTaskReparenting="false"
android:taskAffinity="" 
```

# html - 悬停时更改的网站页面

> ID：14972400
> 
> 赞同：0
> 
> 时间：2013-02-20T04:40:14.430
> 
> 标签：html

我觉得这是一个愚蠢的问题，但在这里。菜单按钮悬停时是否可以更改页面？例如，如果我将鼠标指向关于我们的菜单按钮，它会自动更改页面而无需单击？wordpress, html等...

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:42:48.333

虽然就用户体验而言这并不自然，但您可以使用 Javascript 轻松完成。例如 -

```
document.getElementById('myButton').onmouseover = function() {
    window.location.href = 'http://www.google.com/';
}; 
```

**[JSFiddle 示例](http://jsfiddle.net/WtG7P/)**

# html - 带有 -x:hidden 的溢出属性；和 -y: 可见

> ID：14972404
> 
> 赞同：3
> 
> 时间：2013-02-20T04:40:46.147
> 
> 标签：html, css, overflow

元素的左侧和右侧不能为`overflow:hidden`，顶部和底部为`overflow-visible`吗？

一旦我添加`hidden`到任一溢出属性，它们都会从外部容器中被切断。

我正在尝试但没有运气：http: **[//jsfiddle.net/dmGXY/](http://jsfiddle.net/dmGXY/)**

```
<div id="outer" style="overflow-x:hidden;overflow-y:visible;">
    <div id="left"></div>
    <div id="top"></div>
</div>
<style>
#left,#top {
    position:absolute;
    border:solid black 2px;
    width:100px;
    height:100px;
}
#left {
    margin-left:-30px;
}
#top {
    margin-left:100px;
    margin-top:-30px;
}
#outer {
    position:absolute;
    top:70px;
    left:100px;
    width:300px;
    height:200px;
    border:solid 2px red;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:29:51.737

您不能隐藏一个并显示另一个，但是您可以使用另一个容器作为“蒙版”来达到相同的效果

```
<div id="outer">
    <div id="inner">
        <div id="left"></div>
        <div id="top"></div>
    </div>
</div>

#left,#top {
    position:absolute;
    border:solid black 2px;
    width:100px;
    height:100px;
}
#left {
    margin-left:-30px;
}
#top {
    margin-left:100px;
    margin-top:-30px;
}
#inner {
    position:absolute;
    top:70px;
    left:0;
    width:300px;
    height:200px;
    border:solid 2px red;
}
#outer {
    position:absolute;
    top:0;
    left:100px;
    width:304px;
    height:100%;
    border:solid 2px green;
    overflow: hidden;
} 
```

你可以在这里看到输出：http: [//jsfiddle.net/LB2bg/](http://jsfiddle.net/LB2bg/)

# jquery - jQuery Malsup 提交复选框

> ID：14972405
> 
> 赞同：0
> 
> 时间：2013-02-20T04:40:48.470
> 
> 标签：jquery, checkbox

我正在尝试通过复选框提交带有 malsup 表单插件的表单，但我无法这样做，我发现类似的东西说要执行以下操作，但我无法通过该选项。有没有人做过类似的事情？

```
 //Check SMS Credits
    var checksmscredits = { 
    target:     '#responsecredits', 
    beforeSubmit:  showRequest, 
    url:        'exec.php?action=checksmscredits',
    success:    function() { 
       jQuery('.loaders').hide();
       } 
   }; 

   jQuery('#checksmscredits').ajaxForm(checksmscredits);

<form id="checksmscredits" method="post" action=""><p><span class="pagedesc"><input type="checkbox" name="sms" onclick="submit()" value="1" /> Text Your Message<br /></span></p></form><div id="responsecredits"></div> 
```

这是我在以下链接中在线找到的， [在复选框单击时使用 ajaxform 提交表单](https://stackoverflow.com/questions/12964678/submit-form-using-ajaxform-on-checkbox-click)

```
$('form.date-response input[type=checkbox]').live('click', function(){
    $(this).parent('form').ajaxForm().submit();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T06:29:58.920

使用提供的代码片段，这里有一个建议：

```
<script type="text/javascript">
    $(document).ready(function()
        {
            var options = { 
                data: $('#checksmscredits').serialize(),
                success: function(data) 
                {
                    showSuccess();
                },
                error: function()
                {
                    showError();
                }
            }; 
            $('#checksmscredits').ajaxForm(options); 
    });

    function showSuccess(){
        alert('Success!');
    }

    function showError(){
        alert('Error!');
    }
</script>

<form id="checksmscredits" method="post" action="">
    <p><span class="pagedesc">
        <input type="checkbox" name="sms" onclick="document.getElementById('checksmscredits').submit();" value="1" /> 
        Text Your Message<br />
    </span></p>
</form>
<div id="responsecredits"></div> 
```

# html - 固定正文布局内的全宽 Div

> ID：14972406
> 
> 赞同：0
> 
> 时间：2013-02-20T04:40:58.263
> 
> 标签：html, css, layout

我正在为我的 web 模板创建一个修复布局（960px 宽）。但我希望我的菜单栏的宽度作为浏览器的宽度（这意味着尽可能宽，没有边距）。

正文的 CSS：

```
body{
    width:960px;
    min-width:960px;
    margin:auto auto;
} 
```

我怎样才能做到这一点 ？

像这样的布局：[http](http://www.google.com/analytics/index.html) ://www.google.com/analytics/index.html （注意body的固定宽度和菜单栏比这更宽）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:45:34.527

你可以这样做：**[DEMO](http://jsfiddle.net/KTgrS/98/)**

```
#header{    
float:left;
padding:15px 0;
width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:48:29.267

我认为你想要的是让你的内容在 960px 区域居中，但能够拥有可以是页面完整大小的其他内容（在这种情况下是你的菜单）。为了能够做到这一点，你不能像你一样设置身体本身的宽度。相反，您应该有一些 HTML，例如：

```
<html>
<head>
  :
</head>
<body>
  <div id="ContentBox">
    : put your content here
  </div>
  <div id="Menu">
    : Menu content here
  </div>
</body>
</html> 
```

然后在你的 CSS 中：

```
#ContentBox {
  margin: 0 auto;
  width: 960px;
}
#Menu {
  /* Whatever is applicable */
} 
```

至于谷歌分析网站，他们有页面的全宽单独部分，定义了颜色、边框等，然后是一个区域，就像我在上面每个部分中描述的#ContentBox。您甚至可以将其设为通用类并重用它，例如：

```
<body>
  <div id="HeaderBar">
    <div class="ContentBox">
      :
    </div>
  </div>
  <div id="GreyBGRegion">
    <div class="ContentBox">
      :
    </div>
  </div>
</body> 
```

CSS：

```
#HeaderBar {
  border-bottom: #CCCCCC 1px solid;
  background-color: #000000;
  color: #FFFFFF;
}
#GreyBGRegion {
  border-bottom: #CCCCCC 1px solid;
  background-color: #F0F0F0;
  color: #000000;
}
.ContentBox {
  margin: 0 auto;
  width: 960px;
} 
```

# spring - Flyway / Spring和H2嵌入式数据库的架构相关问题

> ID：14972408
> 
> 赞同：10
> 
> 时间：2013-02-20T04:41:09.393
> 
> 标签：spring, h2, flyway

我正在构建一个使用 MySQL 数据库的 Spring 3 MVC 应用程序，并且最近将 Flyway 集成到解决方案中以管理数据库迁移。我已经根据[Flyway 文档](http://flywaydb.org/documentation/api.html)成功配置了我的 applicationContext.xml，这样，在应用程序启动时，Flyway 将迁移到最新版本。

我无法让 Flyway 与我的单元/功能测试很好地配合。我正在为我的数据访问层使用 Spring Data JPA，并构建了一些 JUnit 测试来测试一些自定义查询。

我用于这些测试的应用程序配置是：

```
<jdbc:embedded-database id="dataSource" type="H2" />

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >
  <property name="driverClassName" value="org.h2.Driver"/>
  <property name="url" value="jdbc:h2:mem:medical_claims_tracker;DB_CLOSE_ON_EXIT=FALSE;DB_CLOSE_DELAY=-1;MODE=MySQL;INIT=CREATE SCHEMA IF NOT EXISTS medical_claims_tracker" />
</bean>

<bean id="flyway" class="com.googlecode.flyway.core.Flyway" init-method="migrate">
    <property name="dataSource" ref="dataSource"/>
    <property name="schemas" value="medical_claims_tracker"/>
    <property name="sqlMigrationPrefix" value="Migration_"/>
</bean> 
```

当我运行单元测试（通过 Eclipse 或使用 Maven）时，出现以下异常：

```
ERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@4cd4544] to prepare test instance [name.hines.steven.medical_claims_tracker.repositories.ExpenseRepositoryTest@1664a9b]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:103)
    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:73)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:313)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flyway' defined in class path resource [tests_persistence-applicationContext.xml]: Invocation of init method failed; nested exception is com.googlecode.flyway.core.api.FlywayException: Error setting current schema to medical_claims_tracker
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:741)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:106)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:57)
    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:248)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flyway' defined in class path resource [tests_persistence-applicationContext.xml]: Invocation of init method failed; nested exception is com.googlecode.flyway.core.api.FlywayException: Error setting current schema to medical_claims_tracker
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:285)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:439)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:277)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:71)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:85)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1506)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1474)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    ... 37 more
Caused by: com.googlecode.flyway.core.api.FlywayException: Error setting current schema to medical_claims_tracker
    at com.googlecode.flyway.core.Flyway.execute(Flyway.java:1250)
    at com.googlecode.flyway.core.Flyway.migrate(Flyway.java:820)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1612)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1553)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 54 more
Caused by: org.h2.jdbc.JdbcSQLException: Schema "medical_claims_tracker" not found; SQL statement:
SET SCHEMA "medical_claims_tracker" [90079-160]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.engine.Database.getSchema(Database.java:1501)
    at org.h2.command.dml.Set.update(Set.java:290)
    at org.h2.command.CommandContainer.update(CommandContainer.java:73)
    at org.h2.command.Command.executeUpdate(Command.java:219)
    at org.h2.jdbc.JdbcPreparedStatement.execute(JdbcPreparedStatement.java:181)
    at com.googlecode.flyway.core.dbsupport.JdbcTemplate.execute(JdbcTemplate.java:280)
    at com.googlecode.flyway.core.dbsupport.h2.H2DbSupport.setCurrentSchema(H2DbSupport.java:79)
    at com.googlecode.flyway.core.Flyway.execute(Flyway.java:1247)
    ... 62 more 
```

我不知道如何让 H2 数据库识别我想使用名为 medical_claims_tracker 的模式这一事实。我使用[此答案](https://stackoverflow.com/questions/5225700/can-i-have-h2-autocreate-a-schema-in-an-in-memory-database)来帮助我尝试不同的连接 URL，并使用[此答案](https://stackoverflow.com/questions/6734410/is-there-a-way-to-run-mysql-in-memory-for-junit-test-cases)来帮助我确定 applicationContext 覆盖以在测试期间使用。

我怀疑这与 H2 在初始创建后但在测试可以运行之前删除模式有关，但我认为这`DB_CLOSE_ON_EXIT=FALSE;DB_CLOSE_DELAY=-1;`会为我解决这个问题。有趣的是，如果我在 flyway bean 配置中删除模式的规范：

```
<bean id="flyway" class="com.googlecode.flyway.core.Flyway" init-method="migrate">
    <property name="dataSource" ref="dataSource"/>
    <property name="sqlMigrationPrefix" value="Migration_"/>
</bean> 
```

我得到一个不同的例外：

```
INFO : com.googlecode.flyway.core.metadatatable.MetaDataTableImpl - Creating Metadata table: "public"."schema_version"
ERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@4bd27069] to prepare test instance [name.hines.steven.medical_claims_tracker.repositories.ExpenseRepositoryTest@64d22462]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:103)
    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:73)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:313)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flyway' defined in class path resource [tests_persistence-applicationContext.xml]: Invocation of init method failed; nested exception is com.googlecode.flyway.core.api.FlywayException: Error executing statement at line 17: CREATE TABLE "public"."schema_version" (
    "version_rank" INT NOT NULL,
    "installed_rank" INT NOT NULL,
    "version" VARCHAR(50) NOT NULL,
    "description" VARCHAR(200) NOT NULL,
    "type" VARCHAR(20) NOT NULL,
    "script" VARCHAR(1000) NOT NULL,
    "checksum" INT,
    "installed_by" VARCHAR(30) NOT NULL,
    "installed_on" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "execution_time" INT NOT NULL,
    "success" BOOLEAN NOT NULL
)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:741)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:106)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:57)
    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:248)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flyway' defined in class path resource [tests_persistence-applicationContext.xml]: Invocation of init method failed; nested exception is com.googlecode.flyway.core.api.FlywayException: Error executing statement at line 17: CREATE TABLE "public"."schema_version" (
    "version_rank" INT NOT NULL,
    "installed_rank" INT NOT NULL,
    "version" VARCHAR(50) NOT NULL,
    "description" VARCHAR(200) NOT NULL,
    "type" VARCHAR(20) NOT NULL,
    "script" VARCHAR(1000) NOT NULL,
    "checksum" INT,
    "installed_by" VARCHAR(30) NOT NULL,
    "installed_on" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "execution_time" INT NOT NULL,
    "success" BOOLEAN NOT NULL
)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:285)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:439)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:277)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:71)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:85)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1506)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1474)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    ... 37 more
Caused by: com.googlecode.flyway.core.api.FlywayException: Error executing statement at line 17: CREATE TABLE "public"."schema_version" (
    "version_rank" INT NOT NULL,
    "installed_rank" INT NOT NULL,
    "version" VARCHAR(50) NOT NULL,
    "description" VARCHAR(200) NOT NULL,
    "type" VARCHAR(20) NOT NULL,
    "script" VARCHAR(1000) NOT NULL,
    "checksum" INT,
    "installed_by" VARCHAR(30) NOT NULL,
    "installed_on" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "execution_time" INT NOT NULL,
    "success" BOOLEAN NOT NULL
)
    at com.googlecode.flyway.core.dbsupport.SqlStatement.execute(SqlStatement.java:78)
    at com.googlecode.flyway.core.dbsupport.SqlScript.execute(SqlScript.java:94)
    at com.googlecode.flyway.core.metadatatable.MetaDataTableImpl$1.doInTransaction(MetaDataTableImpl.java:124)
    at com.googlecode.flyway.core.metadatatable.MetaDataTableImpl$1.doInTransaction(MetaDataTableImpl.java:121)
    at com.googlecode.flyway.core.util.jdbc.TransactionTemplate.execute(TransactionTemplate.java:54)
    at com.googlecode.flyway.core.metadatatable.MetaDataTableImpl.create(MetaDataTableImpl.java:121)
    at com.googlecode.flyway.core.metadatatable.MetaDataTableImpl.createIfNotExists(MetaDataTableImpl.java:134)
    at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:834)
    at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:820)
    at com.googlecode.flyway.core.Flyway.execute(Flyway.java:1259)
    at com.googlecode.flyway.core.Flyway.migrate(Flyway.java:820)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1612)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1553)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 54 more
Caused by: org.h2.jdbc.JdbcSQLException: Schema "public" not found; SQL statement:
CREATE TABLE "public"."schema_version" (
    "version_rank" INT NOT NULL,
    "installed_rank" INT NOT NULL,
    "version" VARCHAR(50) NOT NULL,
    "description" VARCHAR(200) NOT NULL,
    "type" VARCHAR(20) NOT NULL,
    "script" VARCHAR(1000) NOT NULL,
    "checksum" INT,
    "installed_by" VARCHAR(30) NOT NULL,
    "installed_on" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "execution_time" INT NOT NULL,
    "success" BOOLEAN NOT NULL
) [90079-160]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.command.Parser.getSchema(Parser.java:613)
    at org.h2.command.Parser.getSchema(Parser.java:620)
    at org.h2.command.Parser.parseCreateTable(Parser.java:5147)
    at org.h2.command.Parser.parseCreate(Parser.java:3800)
    at org.h2.command.Parser.parsePrepared(Parser.java:324)
    at org.h2.command.Parser.parse(Parser.java:279)
    at org.h2.command.Parser.parse(Parser.java:251)
    at org.h2.command.Parser.prepareCommand(Parser.java:217)
    at org.h2.engine.Session.prepareLocal(Session.java:415)
    at org.h2.engine.Session.prepareCommand(Session.java:364)
    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1119)
    at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:164)
    at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:152)
    at com.googlecode.flyway.core.dbsupport.JdbcTemplate.executeStatement(JdbcTemplate.java:296)
    at com.googlecode.flyway.core.dbsupport.SqlStatement.execute(SqlStatement.java:76)
    ... 71 more 
```

因此，似乎在第一个配置中，Flyway 能够在 medical_claims_tracker 模式中创建 schema_version 表，但无法找到该模式来运行测试，而在第二个版本中，它甚至找不到“默认" 在其中创建 schema_version 表的架构。这是正确的，还是我弄错了？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-01-14T05:08:05.597

来自[http://www.h2database.com/javadoc/org/h2/engine/DbSettings.html](http://www.h2database.com/javadoc/org/h2/engine/DbSettings.html)：

> databaseToUpper：数据库设置 DATABASE_TO_UPPER（默认值：true）。
> 
> **对于 DATABASE() 函数， **数据库短名称被转换为大写...****将此设置为“false”是实验性的。当设置为 false 时，所有标识符名称（表名、列名）都区分大小写**...**

 **问题是默认模式名称是大写的。

## 解决方案：

添加`;DATABASE_TO_UPPER=false`到数据库 url

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-01T11:49:52.807

根据我的测试，整个问题仅在将flyway和H2与MySql兼容模式混合时发生（如果MySql模式是，则不会发生）。它是由区分大小写不一致引起的：

1.  h2 在初始化期间创建默认模式“PUBLIC”（大写！）
2.  当 flyway 尝试获取默认模式名称时，它会变为“public”（小写！）
3.  当 flyway 尝试将当前架构更改为“公共”（小写！）时会抛出错误。即使将 flyway 模式设置为“MYSCHEMA”，在迁移过程的某个时刻，它总是会尝试更改为“public”。

在我目前开发的应用程序中，我们使用 MySql 作为主数据库并使用 H2 进行测试。我的解决方法涉及在 h2 初始化期间创建“公共”（小写！）模式：

弹簧数据源配置：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >
 <property name="driverClassName" value="org.h2.Driver"/>
 <property name="url" value="jdbc:h2:mem:MY_APP;MODE=MySQL;DB_CLOSE_ON_EXIT=FALSE;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:db/migration/test/init_tests.sql';"/>
 <property name="username" value="sa"/>
 <property name="password" value=""/>
</bean> 
```

init_tests.sql：

```
CREATE SCHEMA IF NOT EXISTS "public"; 
```

不是很漂亮但很有效 - 希望有帮助！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-20T11:33:09.410

初始化脚本中的模式名称应该用引号引起来，或者传递给 Flyway 的模式名称以大写形式出现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-04T20:30:44.797

我有一个类似的问题，虽然我没有使用 Spring。我正在使用 jOOQ + Flyway + PostgreSQL 在现有设置之上添加 H2 内存数据库以进行测试。

对我来说，解决方案是改变的组合：

1.  从上面@Omid 的回答中，添加`;DATABASE_TO_UPPER=false` 到启​​动 URL
2.  从@Tom 的回答中，将架构创建添加到初始化 SQL 脚本中：（`CREATE SCHEMA IF NOT EXISTS public;`我不需要使用反引号）。
3.  最后在同一个脚本中，添加第二行`SET SCHEMA public;`after schema creation。

请注意，我无法添加`;SCHEMA=public`到初始化 URL，因为在创建架构之前会引发错误。或者：

1.  添加`;DATABASE_TO_UPPER=false;INIT=CREATE SCHEMA IF NOT EXISTS public;`到启动 URL。
2.  然后添加`SET SCHEMA public;`到您的 init SQL 脚本中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T05:13:05.077

问题是语句中的标识符`public`是小写的*并被*引用：

```
CREATE TABLE "public"...(...) 
```

它应该是不带引号的：

```
CREATE TABLE public...(...) 
```

或大写：

```
CREATE TABLE "PUBLIC"...(...) 
```

H2之所以在数据库元数据中返回小写的“public”，是因为数据库URL( `;MODE=MySQL`)中使用了MySQL模式。所以*不*使用 MySQL 模式可能会解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-21T11:19:17.730

**以防万一您想尝试[liquibase](http://www.liquibase.org/)。**

我使用 MySQL 作为我的 prod 环境，使用 h2 作为我的测试环境。

使用以下命令生成 jooq 代码：`gradle + liquibase + h2`

发现这样可以解决问题：

```
DefaultConfiguration jooqConfiguration = new DefaultConfiguration();
jooqConfiguration.set(new Settings()
        // make everything to uppercase 
        .withRenderNameStyle(RenderNameStyle.UPPER)
        // mapping oldSchemaName to newSchemaName
        .withRenderMapping(new RenderMapping().withSchemata(
                new MappedSchema()
                        .withInput("input_schema")
                        .withOutput("OUTPUT_SCHEMA"))
        )); 
```

编写配置文件以在春季将其应用于 h2。所以mysql配置仍然没问题。

最新文档在这里[jooq-3.9: settings-name-style](https://www.jooq.org/doc/3.9/manual/sql-building/dsl-context/custom-settings/settings-name-style/)。**

# ruby-on-rails - Rails 选择查询在视图中显示所有具有奇怪格式的列

> ID：14972410
> 
> 赞同：0
> 
> 时间：2013-02-20T04:41:22.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我是 Rails 的新手，我遇到了我的第一堵墙。到目前为止，我已经能够使用谷歌来寻找答案。老实说，我认为部分问题在于我无法正确解释问题。

show.html.erb 文件中的我的 Rails Select 查询是 (1) 显示重复记录和 (2) 以奇怪的格式而不是纯文本显示数据。我将粘贴下面的所有代码以充分说明。

我有一个用户模型 has_many :works

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :first_name, :last_name, :works_attributes
  # attr_accessible :title, :body

  validates_presence_of :first_name, :last_name
  validates_uniqueness_of :first_name, :last_name, :email, :case_sensitive => false

  has_many :works
  accepts_nested_attributes_for :works 
```

这是我的工作模型，它属于用户

```
class Work < ActiveRecord::Base
  attr_accessible :description, :work_name, :users_id

  belongs_to :user
end 
```

这是用户控制器：

```
class UsersController < ApplicationController
  def index
    @users = User.all

respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @users }
end

end
  def show
    @user = User.find(params[:id])
    @works = @user.works.all
    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @user }
    end
  end
end 
```

在我的用户 show.html.erb 视图中，我想循环浏览属于特定用户的作品。我使用 user_id 字段设置外键关系以遵循 Rails 约定。当循环找到属于用户的作品时，我想显示 work_name 字段。

```
<% if @user.works.any? %>
                    <% @user.works.each do |user| %>
                   <%= @user.works(:select => 'work_name') %>
                  <% end %>
                <% end %> 
```

但是，这是我在查看 /users/1/ 时在网站上看到的输出：

```
[#<Work id: 1, work_name: "WorkTest1", description: "I am the co-founder and CEO of WorkTest1, a website t...", created_at: "2013-02-12 00:33:19", updated_at: "2013-02-12 00:33:19", user_id: 1>, #<Work id: 2, work_name: "WorkTest2", description: "test", created_at: "2013-02-12 00:33:19", updated_at: "2013-02-12 00:33:19", user_id: 1>] [#<Work id: 1, work_name: "WorkTest1", description: "I am the co-founder and CEO of WorkTest1, a website t...", created_at: "2013-02-12 00:33:19", updated_at: "2013-02-12 00:33:19", user_id: 1>, #<Work id: 2, work_name: "WorkTest2", description: "test", created_at: "2013-02-12 00:33:19", updated_at: "2013-02-12 00:33:19", user_id: 1>] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:02:56.790

您的 .each 循环不是循环用户而是工作对象。

你应该能够做到：

```
<% @user.works.each do |work| %>
  <%= work.work_name %>
<% end %> 
```

此外，由于您在控制器操作中定义 @work，您可以将其简化为：

```
<% @works.each do |work| %>
  <%= work.work_name %>
<% end %> 
```

您已经拥有可供使用的工作对象。我认为没有任何理由尝试选择其他任何东西。

# jquery - Jquery Mobile $.mobile.silentScroll

> ID：14972411
> 
> 赞同：4
> 
> 时间：2013-02-20T04:41:25.677
> 
> 标签：jquery, jquery-mobile

如何使用 jquery mobile 的静默滚动来强制 div 滚动到底部？我知道如何在 jquery 中使用 ScrollTop 来做到这一点，但这似乎不适用于 jquery mobile。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T08:21:56.207

使用静默滚动方法，您可以滚动页面，而不是元素。

```
 //scroll to Y 100px          
    $.mobile.silentScroll(100); 
```

因此，如果您想相对于 DIV 滚动页面，您应该获取 div 的位置，例如：

```
 $.mobile.silentScroll($('DIV').offset().top); 
```

# r - ggplot 可以同时显示 y 在 x 上的回归和 x 在 y 上的回归吗？

> ID：14972417
> 
> 赞同：1
> 
> 时间：2013-02-20T04:41:57.303
> 
> 标签：r, ggplot2, linear-regression

我有一个双变量数据集：

```
set.seed(45)
require(mvtnorm)
sigma <- matrix(c(3,2,2,3), ncol=2) 
df <- as.data.frame(rmvnorm(100, sigma=sigma))
names(df) <- c("u", "v") 
```

设置`v`为因变量，我可以轻松地显示on`ggplot`的“通常”最小二乘回归：`v``u`

```
require(ggplot2)
qplot(u, v, data=df) + geom_smooth(aes(u, v), method="lm", se=FALSE) 
```

`u`...但我也想展示on的最小二乘回归`v`（同时）。

这就是我天真地尝试这样做的方式，方法是传递一个不同`aes`的 to `geom_smooth`：

```
last_plot() + geom_smooth(aes(v, u), method="lm", color="red", se=FALSE) 
```

当然，这并不完全奏效。第二个`geom_smooth`显示正确线的*倒数*（我认为）。我希望它的坡度比第一条线更陡。

此外，置信区间的形状错误。我并不特别关心这些，但我确实认为它们可能是一个线索。

我在要求一些不容易做到的事情`ggplot2`吗？

编辑：这里还有一点，显示了我期望的行：

```
# (1) Least-squares regression of v on u
mod <- lm(v ~ u, data=df)
v_intercept <- coef(mod)[1]
v_slope <- coef(mod)[2]
last_plot() + geom_abline(
    intercept = v_intercept, 
    slope = v_slope, 
    color = "blue", 
    linetype = 2
)

# (2) Least-squares regression of u on v
mod2 <- lm(u ~ v, data=df)
u_intercept <- coef(mod2)[1]
u_slope <- coef(mod2)[2]
# NOTE: we have to solve for the v-intercept and invert the slope
# because we're still in the original (u, v) coordinate frame
last_plot() + geom_abline(
    intercept = - u_intercept / u_slope, 
    slope = 1 / u_slope, 
    color = "red", 
    linetype = 2
) 
```

![在此处输入图像描述](../Images/973b2edda4352469541390e22fb84d95.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:45:40.743

```
ggplot(df) + 
  geom_smooth(aes(u,v), method='lm') + 
  geom_smooth(aes(v,u), method='lm', colour="red") 
```

# css - Twitter Bootsctrap 同时加载 bootstrap.css 和 bootstrap-responsive.css？

> ID：14972418
> 
> 赞同：2
> 
> 时间：2013-02-20T04:41:58.030
> 
> 标签：css, twitter-bootstrap

我正在查看[http://twitter.github.com/bootstrap/getting-started.html#examples](http://twitter.github.com/bootstrap/getting-started.html#examples)上的示例。

如果我想使用响应式，它们似乎同时加载了 bootstrap.css 和 bootstrap-responsive.css 我可以只加载 bootstrap-responsive.css 还是两者都需要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:46:31.417

加载两者。bootstrap-responsive.css 仅包含较小尺寸所需的 CSS 更改（媒体查询），而 bootstrap.css 包含适用于所有尺寸的 CSS。

对于生产使用 *-min.css 对应物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:44:40.917

如果您希望它具有响应性，它需要两者。

# iphone - 将我的应用程序迁移到 iphone5 分辨率的问题

> ID：14972419
> 
> 赞同：0
> 
> 时间：2013-02-20T04:42:04.303
> 
> 标签：iphone, ios

我正在尝试为 iphone 5 迁移我的应用程序。我已经在 stackoverflow 中看到了其他问题，但在正确显示它时仍然面临一些问题。

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568) {
        // code for 4-inch screen
        _backgroundimageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,500)];
        [_backgroundimageView setImage:[UIImage imageNamed:@"image1-568h@2x.png"]];
    } else {
        // code for 3.5-inch screen
        [_backgroundimageView setImage:[UIImage imageNamed:@"image1.png"]];
    } 
```

我在尺寸检查器中为 backgroundimageView 设置的尺寸为 320 x370，image1-568h@2x.png 的尺寸为 640x 1136，image1.png 的尺寸为 640x733。因此，对于 3.5 英寸的屏幕，它应该显示通常，对于 4 英寸的屏幕，它应该相应地调整大小。

但问题是，对于 4 英寸屏幕，它不会调整大小，最终显示与 3 英寸屏幕相同，并带有一些白色边框以覆盖剩余区域。

需要一些指导来解决它。谢谢..可以指出我正在做的错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:46:25.647

为什么您再次分配`backgroundimageView`iPhone 5 分辨率。只需使用相同的 IBOutlet`backgroundimageView`并修改它的框架和图像。

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568) {
        // code for 4-inch screen
        _backgroundimageView.frame = CGRectMake(0,0,320,460);
        [_backgroundimageView setImage:[UIImage imageNamed:@"image1-568h@2x.png"]];
    } else {
        // code for 3.5-inch screen
         _backgroundimageView.frame =CGRectMake(0,0,320,370);
        [_backgroundimageView setImage:[UIImage imageNamed:@"image1.png"]];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:56:22.097

默认图像名称必须是“Default-568h@2x.png”（不是 image1-568h@2x.png）尝试重命名默认图像名称并再次检查，您将获得正确的屏幕尺寸。

您也可以通过宏检查 iphone5。

```
#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
#define IS_IPHONE_5 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 568.0f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:57:37.187

我认为你的 imageview 的内容模式是中心，所以试试这个为你的 imageview

```
[_backgroundimageView setContentMode:UIViewContentModeScaleAspectFill] 
```

# linux - 我应该使用 libc++ 还是 libstdc++？

> ID：14972425
> 
> 赞同：105
> 
> 时间：2013-02-20T04:42:32.450
> 
> 标签：linux, macos, opencv, libstdc++, libc++

我正在使用 c/c++ 为 osx 和 linux 开发命令行界面可执行文件。该项目将链接到opencv。我应该使用 libc++ 还是 libstdc++？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-05-28T09:21:49.177

我会为每个操作系统使用本机库，即 GNU/Linux 上的 libstdc++ 和 Mac OS X 上的 libc++。

libc++ 在 GNU/Linux 上不是 100% 完整的，当 libstdc++ 更完整时使用它并没有真正的优势。此外，如果你想链接到任何其他用 C++ 编写的库，它们几乎肯定是用 libstdc++ 构建的，所以你也需要链接到它才能使用它们。

更多关于 libc++ 在各种平台上的完整性的[信息。](https://libcxx.llvm.org)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-05T18:38:07.753

主要的 Linux 发行版不提供 LLVM libc++，因为：

1.  与 Apple 和 FreeBSD 不同，GPL+3 不是问题，因此无需在这里实现另一个堆栈。
2.  Linux 组件已经围绕 GNU libstd++ 开发了很长时间。其中一些不建立在其他任何东西上。
3.  虽然 libc++ 在新功能方面很强大，但它在遗留代码方面存在一些问题。

如果最终 libc++ 成为发行版的一部分，它将作为可选组件。链接它可能需要额外的选项。

就像乔纳森说的，你应该使用默认包含的任何工具。Clang 在 Linux 中使用是安全的，因为它被配置为 GCC 替代品，所以在这方面你不必担心 2 个编译器。此外，由于您针对两个平台，您应该看看 cmake。

# sqlite - NodeJS 上下文问题

> ID：14972429
> 
> 赞同：1
> 
> 时间：2013-02-20T04:43:02.713
> 
> 标签：sqlite, node.js, http

我在从 Node.JS 中的 sqlite (sqlite3) 库写入套接字（使用 http）时遇到问题

[https://gist.github.com/RyanCopley/6004c3ce372e060bbf18](https://gist.github.com/RyanCopley/6004c3ce372e060bbf18)

第 68 到 75 行，我有 4 次尝试写。在 db.each 之外，一切都可以在任何情况下工作。在其中，它惨遭崩溃。我不完全确定为什么，但我觉得这两个库之间存在冲突

顺便说一句，我已经知道连接 SQL 语句是不好的：3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:53:23.673

这是因为里面的回调函数`db.each`是*异步*调用的。这意味着第 79 行：`res.end()`将在之前调用`res.write("Found row!");`，触发错误。

我认为你想要做的是这样的：

```
db.serialize(function() {
    that.res.write("["); // works
    db.each("SELECT * FROM messages WHERE channel = '"+q.chan+"' AND id > "+q.since+" ORDER BY id", function(err, row) {
        res.write("Found row!"); //does not work
        that.res.write("Found row!"); //does not work
        console.log("Found row!");
    });

    res.write("]");//works
}); 
```

# javascript - 将可自定义的文本添加到 Magento 页面

> ID：14972430
> 
> 赞同：0
> 
> 时间：2013-02-20T04:43:05.647
> 
> 标签：javascript, magento

我的任务是尝试向产品比较页面添加一条消息，如果客户在没有要比较的产品时能够访问该页面，那么该页面就会出现

现在我知道那里`<script type="text/javascript">window.close();</script>`已经有一个但是如果你打开一个新窗口并输入 URL 似乎它不起作用（相当于给页面添加书签，我怎么想如果我把这个消息放在`<script type="text/javascript">window.close();</script>`行上方，如果窗口没有关闭，客户将收到消息。

现在这部分很简单，困难的部分是我的任务的第二部分，这允许此文本可以更改，尽管变黑了，就像您可以在系统 > 配置 > 设计 > 标题中更改徽标图像 Alt 一样。

由于一些自定义模块，我们已经在系统 > 配置中有一些新部分，但是我不想创建一个完整的模块，这样我们就不能信任一个部门来编辑页面并且不会在过程中填充它改变一行文字

那么有没有办法将可自定义的文本添加到 Magento 页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:49:36.457

您可以将 javascript 更改为`window.location = '/sorry-page';`或类似的内容，并将“sorry-page”创建为 CMS 页面。否则您将需要一个自定义模块。

# sql - 是否保证在加入 1:many 表时将任何行组合在一起？

> ID：14972437
> 
> 赞同：2
> 
> 时间：2013-02-20T04:44:01.863
> 
> 标签：sql, oracle, join, oracle10g, inner-join

以选择为例，

```
select user_id, email_address
from users
     join email on users.id = email.user_id 
```

这会产生结果

```
ANDY   |  andy_one@foo-bar.com
ANDY   |  andy_two@foo-bar.com
JOE    |  joe_one@foo-bar.com
JOE    |  joe_two@foo-bar.com 
```

如果未提供排序依据，Andy 和 Joes 的电子邮件是否保证在结果中组合在一起？我正在构建一个应用程序，将这些连接在一起并流式传输结果。我需要知道我是否需要明确提供 order by 子句并对其性能造成影响。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T04:46:21.153

不，保证结果顺序的唯一方法是明确指定一个`ORDER BY`子句。

但是，添加 an`ORDER BY`并不一定会影响性能。如果查询计划将返回有序的结果（例如，因为您正在取消索引），Oracle 知道它不需要进行额外的排序。

# uiimagepickercontroller - 是否可以在 IOS 6 中创建自定义相册

> ID：14972440
> 
> 赞同：0
> 
> 时间：2013-02-20T04:44:15.463
> 
> 标签：uiimagepickercontroller, alassetslibrary

谁能告诉我..我现在想使用相机应用程序，所以我必须知道是否可以在 IOS 6 中创建自定义相册。我知道在 IOS5 中可以，然后我搜索了 IOS6 我没有搞清楚信息..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:27:22.340

是的，有可能。您想要的`ALAssetsLibrary`方法`addAssetsGroupAlbumWithName:resultBlock:failureBlock:`是此处文档中详细介绍的方法：http: [//developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/occ/ cl/ALAssets 库](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/occ/cl/ALAssetsLibrary)

它是在 iOS 5 中引入的，此后一直没有被弃用，所以如果它不适合您，我不太确定问题是什么。如果您遇到问题，您可能需要更新或重新发布问题。

# safari - css3animation + box-shadow 在 Safari 和 Opera 中不起作用

> ID：14972441
> 
> 赞同：1
> 
> 时间：2013-02-20T04:44:36.110
> 
> 标签：safari, css, css-animations

我已经使用 CSS3 动画在 div 中实现了 box-shadow 效果...代码在 firefox 和 chrome 中运行良好，但我不知道为什么我的代码在 Safari 和 Opera 中不起作用...

我正在使用 5.1.7 的 Safari 版本...

和 Opera 版本 12.12...

[JsFiddle 链接](http://jsfiddle.net/hbATU/)

我的代码：

```
@-moz-keyframes glowz {
 0%     {  -moz-box-shadow:0px 0px 10px 10px rgba(64,142,0,1);  }
 33%    {  -moz-box-shadow:0px 0px 7px 7px rgba(64,142,0,1);  }
 66%    {  -moz-box-shadow:0px 0px 2px 2px rgba(64,142,0,1);  }
 100%   {  -moz-box-shadow:0px 0px 9px 9px rgba(64,142,0,1);  }
}
@-webkit-keyframes glowz {
 0%     {  -webkit-box-shadow:0px 0px 10px 10px rgba(64,142,0,1);  }
 33%    {  -webkit-box-shadow:0px 0px 7px 7px rgba(64,142,0,1);  }
 66%    {  -webkit-box-shadow:0px 0px 2px 2px rgba(64,142,0,1);  }
 100%   {  -webkit-box-shadow:0px 0px 9px 9px rgba(64,142,0,1);  }
}
@-o-keyframes glowz {
 0%     {  -o-box-shadow:0px 0px 10px 10px rgba(64,142,0,1);  }
 33%    {  -o-box-shadow:0px 0px 7px 7px rgba(64,142,0,1);  }
 66%    {  -o-box-shadow:0px 0px 2px 2px rgba(64,142,0,1);  }
 100%   {  -o-box-shadow:0px 0px 9px 9px rgba(64,142,0,1);  }
}
@keyframes glowz {
 0%     {  box-shadow:0px 0px 10px 10px rgba(64,142,0,1);  }
 33%    {  box-shadow:0px 0px 7px 7px rgba(64,142,0,1);  }
 66%    {  box-shadow:0px 0px 2px 2px rgba(64,142,0,1);  }
 100%   {  box-shadow:0px 0px 9px 9px rgba(64,142,0,1);  }
}

.blinker {
    background-color: #FF0000;
    display: block;
    height: 27px;
    position: absolute;
    width: 27px;
    left:50%; top:50%;
    border-radius: 5em; -webkit-border-radius: 5em; -moz-border-radius: 5em; -o-border-radius: 5em;

    -ms-animation: 5s ease-in-out 0s alternate none infinite glowz;
    -webkit-animation: 5s ease-in-out 0s alternate none infinite glowz;
    -moz-animation: 5s ease-in-out 0s alternate none infinite glowz;
    -o-animation: 5s ease-in-out 0s alternate none infinite glowz;
    animation: 5s ease-in-out 0s alternate none infinite glowz;

} 
```

safari 和 opera 中的 css3 动画有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:11:05.323

稍微调整一下你的 CSS，它就会起作用。

**替换以下代码：**

```
 -ms-animation: 5s ease-in-out 0s alternate none infinite glowz;
    -webkit-animation: 5s ease-in-out 0s alternate none infinite glowz;
    -moz-animation: 5s ease-in-out 0s alternate none infinite glowz;
    -o-animation: 5s ease-in-out 0s alternate none infinite glowz;
    animation: 5s ease-in-out 0s alternate none infinite glowz; 
```

**使用以下代码：**

```
 -webkit-animation-name: glowz;
    -webkit-animation-duration: 5s;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: alternate;
    -webkit-animation-delay: 0;
    -webkit-animation-fill-mode: none;

    -moz-animation-name: glowz;
    -moz-animation-duration: 5s;
    -moz-animation-timing-function: ease-in-out;
    -moz-animation-iteration-count: infinite;
    -moz-animation-direction: alternate;
    -moz-animation-delay: 0;
    -moz-animation-fill-mode: none;

    -o-animation-name: glowz;
    -o-animation-duration: 5s;
    -o-animation-timing-function: ease-in-out;
    -o-animation-iteration-count: infinite;
    -o-animation-direction: alternate;
    -o-animation-delay: 0;
    -o-animation-fill-mode: none;

    animation-name: glowz;
    animation-duration: 5s;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
    animation-direction: alternate;
    animation-delay: 0;
    animation-fill-mode: none; 
```

[**演示**](http://jsfiddle.net/mQ8tU/)

# ajax - 用于 twitter 引导的带有 ajax 微调器的弹出窗口

> ID：14972451
> 
> 赞同：3
> 
> 时间：2013-02-20T04:45:10.127
> 
> 标签：ajax, twitter-bootstrap

twitter bootstap 中是否有带有 ajax 微调器的标准弹出窗口？虽然应该是，但我还没有找到任何关于它的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-02T20:21:56.220

这就是我在使用 Font Awesome 的 Ajax 调用（如已接受的答案中所建议的那样）并稍微调整模态样式的方法：

```
<!-- CSS -->
<style>
    #spinner-modal .modal-dialog,
    #spinner-modal .modal-content,
    #spinner-modal .modal-body {
        background: transparent;
        color: rgba(255,255,255,1);
        box-shadow: none;
        border: none;
    }
</style>

<!--[ SPINNER MODAL ]-->
<div class="modal fade" id="spinner-modal">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body text-center">
                <h3><i class="fa fa-cog fa-spin"></i> Working...</h3>
            </div>
        </div>
    </div>
</div>

<!--[ JS ]-->
<script>
        $('#search-form-input').autocomplete({
            source: '/search.php',
            minLength: 2,
            select: function(event, ui) {
                $('#spinner-modal').modal('show');
                var url = '/a/results/index.php?i=' + ui.item.item_id;
                window.location.href = url;
            }
        });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T08:37:51.810

您可以使用引导模式插件[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)在弹出窗口中加载 ajax 内容。

没有一种引导方式来拥有微调器，但您可以在显示模态弹出窗口之前自行完成。

# c++ - C++/Winforms 线程：我收到 _beginthread 的构建错误

> ID：14972461
> 
> 赞同：0
> 
> 时间：2013-02-20T04:46:01.237
> 
> 标签：c++, multithreading, winforms, beginthread

我是线程和 Winforms/C++ 的新手。当我按下一个按钮时，我想在一个新线程中启动一个函数。我一直在关注这个作为线程[教程](http://www.codeproject.com/Articles/14746/Multithreading-Tutorial)。当我在一个单独的 VC++ 项目中构建该站点上给出的示例代码时，**构建成功**。

但是，如果我在 C++/Winforms 中执行以下操作，构建将无法完成，**我会收到构建错误**。

我在这里想念什么？

帮助！

代码：

```
void  Test( void *arg );
private: System::Void button2_Click(System::Object^  sender, System::EventArgs^  e)
         {
                    _beginthread(Test, 0, (void*)12);
         }
void  Test( void *arg )
{
    // Do something
} 
```

构建错误：

```
Error   1   error C2664: '_beginthread' : cannot convert parameter 1 from 'void (__clrcall *)(void *)' to 'void (__cdecl *)(void *)'    c:\users\documents\visual studio 2010\projects\statsv2.0\statsv2.0\Form1.h  659 1   StatsV2.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:53:48.450

您正在使用托管 C++ (C++/CLR)。这与本机 C++（编写本教程的目的）非常不同。

`_beginthread`在托管 C++ 中，默认调用约定与本机函数所期望的函数指针的调用约定不兼容。幸运的是，托管 C++ 与本机 C++ 具有非常好的互操作性，将函数声明更改为以下内容应该可以工作：

```
void __cdecl Test( void *arg ) 
```

由于您使用的是托管 C++，因此您拥有 .NET 的全部功能，并且可以创建托管线程（例如，使用[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)对象）。

另请注意，在主线程上创建的任何 win32 UI 对象*只能*在该线程上访问——所以要小心！:-)

# python - NK模型使用python

> ID：14972462
> 
> 赞同：1
> 
> 时间：2013-02-20T04:46:01.880
> 
> 标签：python

我是 python 新手，并试图让 Kauffman 的 NK 模型在其中工作......我在网上找到了代码，并希望我可以随着时间的推移进行一些更改，但我无法运行代码......它给出了错误第 31 行 ...'f = open(options.in_filenames)'....我确定我遗漏了一些非常小的东西....任何帮助将不胜感激...

```
import csv
from numpy import *
import Gnuplot
import time
from optparse import OptionParser
from pylab import *

# set up and read command line options

parser = OptionParser()
parser.add_option("-f", "--file", dest="in_filenames",
                  help="read data from FILE - enclose comma-separated file list in quotes e.g. \"FILE1, FILE2\"", metavar="FILE")

(options, args) = parser.parse_args()

# set up constants

# column titles
columnvar_titles = (["A", "N", "K"])
series_titles = (["Average Fitness", "Maximum Fitness","Minimum Fitness",
        "Average Wait Before Move","Maximum Wait Before Move",
        "Minimum Wait Before Move","Average Number of Fitter Neighbours",
        "Maximum Number of Fitter Neighbours",
        "Minimum Number of Fitter Neighbours"])

f = open(options.in_filenames)
reader = csv.reader(f)
floats = []
options_dict={}

# start from the first line in the file
# read lines until we hit a blank
# lines will be in form "Key: Value"
# so split them and build a dictionary
while (1):
    readstring = reader.next()
    if len(readstring)==0:
        break
    dict_entry = readstring[0].split(': ', 1)
    options_dict[dict_entry[0]] = dict_entry[1]
    #print readstring
    #print reader.line_num

#print options_dict
#print len(options_dict)

#print options_dict['Fitness_method']

# after the model parameters, we have blank line(s) before the data headers
# keep skipping blanks, then grab the first non-blank line
# then read the first line into a list of strings.
while (1):
    readstring = reader.next()
    if len(readstring) > 0:
        column_headers = readstring;
        break

#print column_headers

# need to check if we have a 'run' column
# single run gui output doesn't produce one, so need to add to column headers
# First six cols are "run, tick, A_size_of, RNGseed, [N & K]_size_of"
# "tick is already contained in the data, but is overwritten with K_size_of
# as it needs to be moved
# set add_run_data -  flag to insert corresponding columns into the numeric data
add_run_data = 0
if column_headers[0]!="run":
    column_headers[0] = "K_size_of"
    column_headers = ["run", "tick", "A_size_of", "RngSeed", "N_size_of"] + column_headers
    add_run_data = 1
    print "Processing one run GUI output format..."
else:
    print "Processing batch mode output..."

#print column_headers

# read lines from the data until we hit a blank.
# if data is numeric, put it into out 2d list of floats
countlines=0
while (1):
    try:
        readstring=reader.next()
        countlines = countlines + 1
        if len(readstring)==0:
            print "Stopped reading"
            break
        try:
            floats.append(map(float, readstring))
        except:
            print "Bad data - not adding"
    except StopIteration:
        #print "Read:", countlines
        break

print "Read", countlines, "lines of data from file"     

#print floats       
xdata=array(floats)
#print xdata
# if we needed to add column headers before, we are dealing with single run
# output. If so, we need to add columns at the left of the data. 
# First six cols are "run, tick, A_size_of, RNGseed, [N & K]_size_of"
# We add five (not six) cols, since "tick" is currently in the data already
# Other values are run = 1 (by def), RNGSeed (doesn't matter)
# A, N, K values are taken from the dictionary made from the header data in the file

if add_run_data == 1:
    newcol = ones((xdata.shape[0],5), dtype="float")
    xdata = concatenate((newcol, xdata), axis=1)
    A_val = float(options_dict['A_size_of'])
    N_val = float(options_dict['N_size_of'])
    K_val = float(options_dict['K_size_of'])
    #print A_val, N_val, K_val
    xdata[:,1] = xdata[:,5] # ticks - already there but needs to move
    xdata[:,2] = A_val
    xdata[:,3] = 0 #RNG seed doesn't matter
    xdata[:,4] = N_val
    xdata[:,5] = K_val #overwrites original tick column
    #print column_headers
    #print xdata[1]

A_uniques = unique(xdata[:,2])
N_uniques = unique(xdata[:,4])
K_uniques = unique(xdata[:,5])

series_total = len(A_uniques) * len(N_uniques) * len(K_uniques) 

# set up an array to hold averages (no columns for run number or rng seed)
# needs to move to handle multiple variables
maxticks = xdata[:,1].max()
#print series_total
#print maxticks
#print xdata.shape[1]-2
averages = zeros((series_total, maxticks, xdata.shape[1]-2), float)

# three loop setup for varying A / N / K values

series_counter = 0
Aseries_name=""
Nseries_name=""
Kseries_name=""
series_keys=[]

for A_value in A_uniques:
    if len(A_uniques)>1:
        Aseries_name = "A=" + str(A_value) + ", "
    dataA = compress(xdata[:,2]==A_value, xdata, axis=0)

    for N_value in N_uniques:
        #if len(N_uniques)>1:
        Nseries_name = "N=" + str(N_value) 
        dataAN = compress(dataA[:,4]==N_value, dataA, axis = 0)

        for K_value in K_uniques:
            #if len(K_uniques)>1:
            Kseries_name = ", " + "K=" + str(K_value)

            dataANK = compress(dataAN[:,5]==K_value, dataAN, axis = 0)

            series_keys.append(Aseries_name + Nseries_name + Kseries_name)

            # when multiple variables are used, run values continue to count from the
            # previous variable value (e.g. A=2 (runs 1-100) A=3 (runs 101-200))
            # we need to number the runs in ascending order from 1.
            firstrun=dataANK[:,0].min()
            lastrun=dataANK[:,0].max()
            totalruns = 1 + lastrun - firstrun

            #print firstrun, lastrun, totalruns

            # for each run, find the last actual tick data
            last_tick_array = zeros((totalruns, dataANK.shape[1]), float)
            #print last_tick_array.shape

            for k in arange(totalruns): # for each run get the data for the last tick
                this_run=compress(dataANK[:,0]==k+firstrun, dataANK, axis=0)
                last_tick_array[k]=this_run[-1]

            #print "Last tick array"

            #print last_tick_array[-1]

            print "Processing simulation " + str(series_counter+1) + "/" + str(series_total)
            for i in arange(maxticks):  # for each tick value up to the maximum
                # array to hold one tick from each run for averaging
                # will contain either actual or extrapolated data
                selected_ticks = zeros((totalruns, dataANK.shape[1]), float)
                #print selected_ticks
                # get dataANK for this tick from all runs. May be empty.
                this_tick = compress(dataANK[:,1]==i+1, dataANK, axis=0)
                #print "this tick"
                #print this_tick
                for j in arange(totalruns): # for each run
                    if (i+1) < last_tick_array[j,1]:# do we have actual data?
                        #print "Using real data"
                        # if so, get it
                        selected_ticks[j] = compress(this_tick[:,0]==j+firstrun, this_tick, axis=0)
                        #print selected_ticks
                    else:
                        # if not, use the last tick we do have
                        #print "Using last tick"
                        selected_ticks[j] = last_tick_array[j]
                #print "selected_ticks"
                #print selected_ticks[0]
                averages[series_counter][i][0]=i+1  # tick number
                averages[series_counter][i][1]=selected_ticks[:,2].max() #A_size_of
                averages[series_counter][i][2]=selected_ticks[:,4].min() #N_size_of
                averages[series_counter][i][3]=selected_ticks[:,5].min() #K_size_of
                for m in xrange(6,16):
                    #print m
                    averages[series_counter][i][m-2]=selected_ticks[:,m].mean()

            # increment to fill next index
            series_counter = series_counter + 1

# matplotlib plots

print "Plotting graphs..."

matplotlib.use('Agg')

for graph_num in (4,5,6,7,8,9,10,11,12,13):
    ylabel(column_headers[graph_num+2])

    for ser in range(series_total):
        plot(averages[ser][:,0], averages[ser][:,graph_num], label=series_keys[ser])

    legend(loc='center right').draw_frame(0)
    show()
    savefig('nk' + column_headers[graph_num+2] + '.png')
    clf()

print "Writing CSV files"

f1 = open("nk_allticks.csv","wt")
csv1 = csv.writer(f1)

f2 = open("nk_finaltick.csv","wt")
csv2 = csv.writer(f2)

column_headers.remove('RngSeed')

# replace spaces for underscores in column headers for better file compatability
for i in range(len(column_headers)):
    column_headers[i]=column_headers[i].replace(' ','_')

try:
    csv1.writerow(column_headers[1:])
    csv2.writerow(column_headers[1:])
    for series in range(series_total):
        csv1.writerows(averages[series])
        csv2.writerow(averages[series][-1])
finally:
    f1.close
    f2.close

f3 = open("nk_allticks_crosstab.csv","wt")
csv3 = csv.writer(f3)

out_array = zeros((averages[0].shape[0], 1 +(series_total * 10)), float)
out_array[:,0] = averages[0][:,0]

headers=[1000]#[8 * series_total]
headers[0]="tick"

datacol = 1
for column_num in (3, 4,5,6,7,8,9,10,11,12):
    for ser in range (series_total):
        headers.append((column_headers[column_num+2] + " " + series_keys[ser]).replace(' ','_'))
        out_array[:,datacol] = averages[ser][:,column_num+1]
        #print averages[ser][0]

        datacol  = datacol + 1

#print headers
#print out_array.shape

try:
    csv3.writerow(headers)
    csv3.writerows(out_array)
finally:
    f3.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:05:03.957

您需要告诉它要打开哪个文件。当您运行脚本时，您需要执行以下操作 -

```
python myscript.py -f myfile 
```

否则，你还没有给它一个文件。使用解释器，它非常适合捕捉这些东西。

```
>>> from optparse import OptionParser
>>> parser = OptionParser()
>>> parser.add_option("-f", "--file", dest="in_filenames",
...                   help="read data from FILE - enclose comma-separated file list in quotes e.g. \"FILE1, FILE2\"", metavar="FILE")
<Option at 0x29f47c8: -f/--file>
>>> (options, args) = parser.parse_args()
>>> options # Notice that in_filenames is None here
<Values at 0x29f6648: {'in_filenames': None}>
>>> import sys
>>> sys.argv
['']
>>> sys.argv = ['','-f','myfile'] # Let's explicitly set the argument
>>> (options, args) = parser.parse_args()
>>> options # Now it works...
<Values at 0x29fd848: {'in_filenames': 'myfile'}> 
```

# asp.net-mvc - IEnumerable 的显示模板

> ID：14972467
> 
> 赞同：2
> 
> 时间：2013-02-20T04:46:59.400
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, ienumerable, mvc-editor-templates

我正在尝试将显示模板用于接口的 IEnumerable 集合，但由于某种原因，我无法为接口显示显示模板。

这里有一些简短的代码来告诉你我的意思。

我有`~/Views/Shared/DisplayTemplates/IUserMessage.vbhtml`一些琐碎的视图代码。

我也有`~/Views/Shared/DisplayTemplates/UserMessages.vbhtml`：

```
@Imports WebUI.UserMessages
@ModelType IEnumerable(Of IUserMessage)
<div id="UserMessages">
    '@Html.DisplayForModel("IUserMessage") 'This doesn't work either
     @Html.DisplayForModel()
</div> 
```

在`~/Views/Shared/_Layout.vbhtml`我有

```
@Html.DisplayFor(Function(m) m.UserMessages) 'm.UserMessages is List(Of IUserMessage) with a UIHint of "UserMessages" 
```

我单步执行代码，它可以很好地进入`UserMessages`显示模板。但是，代码永远不会到达`IUserMessage`显示模板。

# asp.net - c#MVC3 ajax.beginform 上传文件不起作用

> ID：14972470
> 
> 赞同：2
> 
> 时间：2013-02-20T04:47:10.730
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

点击提交按钮后。我在实体中得到空值。 **有人有解决方案吗？**

看法

```
 @using (Ajax.BeginForm("CreateRoom", "Room", new AjaxOptions { HttpMethod = "POST", OnComplete = "window.location.href='Index'" }, new { enctype = "multipart/form-data", id = "ajaxUploadForm" }))
    {
        <input type="file" name="Room" />
        <input type="submit" value="OK" />
    } 
```

控制器

```
 [HttpPost]
    public ActionResult CreateRoom(RoomFileView entity)
    {
        //code
    } 
```

模型

```
 public class RoomFileView
    {
        public RoomFileView();

        public int BuildingId { get; set; }
        public int CityId { get; set; }
        public int CountryId { get; set; }
        public int FloorId { get; set; }
        public int LocationId { get; set; }
        public HttpPostedFileWrapper Room { get; set; }

        public string Content();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-03T21:40:31.470

我写了一个小技巧。它在大多数浏览器中都能正常工作，但 IE 不支持 FormData 对象。您可以将此代码添加到您的自定义 js 文件或 html 页面。

```
window.addEventListener("submit", function (e) {
    var form = e.target;
    if (form.getAttribute("enctype") === "multipart/form-data") {
        if (form.dataset.ajax) {
            e.preventDefault();
            e.stopImmediatePropagation();
            var xhr = new XMLHttpRequest();
            xhr.open(form.method, form.action);
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    if (form.dataset.ajaxUpdate) {
                        var updateTarget = document.querySelector(form.dataset.ajaxUpdate);
                        if (updateTarget) {
                            updateTarget.innerHTML = xhr.responseText;
                        } 
                    }
                }
            };
            xhr.send(new FormData(form));
        }
    }
}, true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T06:40:55.567

您不能使用 AJAX 上传文件。使用正常的 Html.BeginForm。请查看此链接[单击此处](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)，因为这将对您有所帮助。

如果您想使用异步上传，您可以尝试一些可用的上传组件，例如 Ajax Upload 和 Uploadify。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:54:59.690

您不能使用 AJAX.Beginform 上传文件。
有许多第三方 js 控件可用。
但我觉得它们没有多大用处。
您必须使用`<iframe>`或使用 Html.Beginform

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T22:08:10.850

不幸的是，您不能使用 Ajax.BeginForm() 来上传文件。我通过在提交事件上运行 onclick() 事件来解决这个问题。我发现这个 SO 答案非常有用：[Ajax.BeginForm 没有按预期工作](https://stackoverflow.com/questions/32082708/ajax-beginform-is-not-working-as-expected)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-25T13:32:57.933

```
window.addEventListener("submit", function (e) {
var form = e.target;
if (form.getAttribute("enctype") === "multipart/form-data") {
    if (form.dataset.ajax) {
        e.preventDefault();
        e.stopImmediatePropagation();
        var xhr = new XMLHttpRequest();
        xhr.open(form.method, form.action);
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                if (form.dataset.ajaxUpdate) {
                    var updateTarget = document.querySelector(form.dataset.ajaxUpdate);
                    if (updateTarget) {
                        updateTarget.innerHTML = xhr.responseText;
                    } 
                }
            }
        };
        xhr.send(new FormData(form));
    }
}}, true); 
```

# jquery - jQuery 使用 on 代替 live 在回调中给出错误的“this”

> ID：14972476
> 
> 赞同：0
> 
> 时间：2013-02-20T04:48:12.403
> 
> 标签：jquery, live

我一直在尝试调试它一段时间，但我不确定哪里出了问题或可能会影响它。代码太大了，无法复制，但我会尽力解释我遇到的情况（我也不想使用 live，因为它已被弃用）。

```
$(document).on('click', someSelector, function(evt) {
     evt.preventDefault();

     // Do something

     console.log(this);
}); 
```

在 console.log 中，我收到了 #document，但我不知道为什么。我想知道它是否可能与我拥有的其他一些代码冲突，尽管我无法真正显示其余代码，因为它太大而无法复制和粘贴在这里所以我猜关于这个问题，可能是什么导致这样的行为？就个人而言，我认为这有点奇怪，但谁能告诉我可能发生了什么导致这种行为以及为什么 jQuery 可能会处理它在这里的处理方式？任何帮助将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:51:03.037

您在 上指定了事件处理程序`$(document)`。这使`this`您的`document`. `evt.target`如果您对触发事件的元素感兴趣，则希望查看。

# javascript - 想要将 AJAX 通讯注册作为 Google Analytics 事件进行跟踪

> ID：14972477
> 
> 赞同：0
> 
> 时间：2013-02-20T04:48:25.203
> 
> 标签：javascript, ajax, events, google-analytics, newsletter

我需要将简报注册作为 Google Analytics 中的事件进行跟踪。我在哪里放置事件跟踪代码？我知道我必须将它放在“成功注册”验证所在的位置，但我不知道下面代码的哪一部分进行验证。

这是我的 GA 事件跟踪代码：

```
_gaq.push(['_trackEvent', 'Newsletter', 'Suscribe to Newsletter', 'Newsletter Form', 0, false]); 
```

这是时事通讯注册表单：

```
<form action="http://www.somesite.com/index.php/newsletter/subscriber/new/"  method="post" id="newsletter-validate-detail">
<div class="block-content">
<div class="input-box">
<input type="text" name="email" id="newsletter" title="Subscribe to Newsletter" class="input-text required-entry validate-email" />
</div>
<div class="actions">
<button type="submit" title="Subscribe" class="button"><span><span>Send</span></span></button>
</div>
</div>
</form> 
```

这是时事通讯的 javascript：

```
<script type="text/javascript">
//<![CDATA[
var newsletterSubscriberFormDetail = new VarienForm('newsletter-validate-detail');
Varien.newsletterForm = Class.create();
Varien.newsletterForm.prototype = {
initialize : function(form, field, emptyText){
this.form = $(form);
this.field = $(field);
this.emptyText = emptyText;
Event.observe(this.form, 'submit', this.submit.bind(this));
Event.observe(this.field, 'focus', this.focus.bind(this));
Event.observe(this.field, 'blur', this.blur.bind(this));
this.blur();
},
submit : function(event){
if (this.field.value == this.emptyText || this.field.value == ''){
Event.stop(event);
return false;
}
return true;
},
focus : function(event){
if(this.field.value==this.emptyText){
this.field.value='';
}
},
blur : function(event){
if(this.field.value==''){
this.field.value=this.emptyText;
}
}
}
var newsletterForm = new Varien.newsletterForm('newsletter-validate-detail',
'newsletter', 'Get the latest news');                                    
//]]>
</script> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:58:56.470

这应该进入进行验证的提交功能（它有什么）：

```
submit : function(event){
if (this.field.value == this.emptyText || this.field.value == ''){
    // does not validate so submit event is aborted
    Event.stop(event);
    return false; 
}
    //validates so it's reasonably safe to sent the event
    gaq.push(['_trackEvent', 'Newsletter', 'Suscribe to Newsletter', 'Newsletter Form', 0, false]); 
    return true;
} 
```

# c# - 使用linq链接asp dot net？

> ID：14972479
> 
> 赞同：-6
> 
> 时间：2013-02-20T04:48:30.250
> 
> 标签：c#, asp.net, linq, hyperlink

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class First : System.Web.UI.Page
{ MyDataClassesDataContext mdc;

protected void Page_Load(object sender, EventArgs e)
{
    mdc = new MyDataClassesDataContext();
    if (!IsPostBack)
    {
        LoadData();
    }
}

private void LoadData()
{
    mdc = new MyDataClassesDataContext();
    var empls = from em in mdc.Emps select em;

    GVEmp.DataSource = empls;
    GVEmp.DataBind();

    var ddlempls = from em in mdc.Emps
            select new
            {
                em.EmpID,
                em.Ename
            };

    DDLEmp.DataSource = ddlempls;
    DDLEmp.DataTextField = "Ename";
    DDLEmp.DataValueField = "EmpID";
    DDLEmp.DataBind();
    DDLEmp.Items.Insert(0, "Select");
}
protected void LinkButton1_Click(object sender, EventArgs e)
{
    Emp em = new Emp();
    em.Ename = TxtName.Text;
    em.Sal = Int32.Parse(TxtSal.Text);

    mdc.Emps.InsertOnSubmit(em);
    mdc.SubmitChanges();
    LoadData();
    LabDisp.Text = "Record Added";
}
protected void DDLEmp_SelectedIndexChanged(object sender, EventArgs e)
{ Emp empl = mdc.Emps.Single(em => em.EmpID ==Int32.Parse(DDLEmp.SelectedItem.Value));

    if (empl != null)
    {
        TxtName0.Text = empl.Ename;
        TxtSal0.Text = empl.Sal.ToString();
    }
    else
    {
        LabDisp.Text = "Data not found";
    }
}
protected void LBUpd_Click(object sender, EventArgs e)
{
 Emp empl = mdc.Emps.Single(em => em.EmpID ==Int32.Parse(DDLEmp.SelectedItem.Value));

    if (empl != null)
    {
        empl.Ename = TxtName0.Text;
        empl.Sal=Int32.Parse(TxtSal0.Text);
        mdc.SubmitChanges();
        LoadData();
        LabDisp.Text = "record updated";
    }
    else
    {
        LabDisp.Text = "Data not found";
    }
}
protected void LBDel_Click(object sender, EventArgs e)
{
 Emp empl = mdc.Emps.Single(em => em.EmpID == Int32.Parse(DDLEmp.SelectedItem.Value));

    if (empl != null)
    {
        mdc.Emps.DeleteOnSubmit(empl);
        mdc.SubmitChanges();
        LoadData();
        LabDisp.Text = "record deleted";
    }
    else
    {
        LabDisp.Text = "Data not found";
    }
}
} 
```

谁能帮忙解释一下这段代码……我的一个朋友把这个和一个配置文件发给我，把一个asp页面和数据库链接起来……有些东西`MyDataClassesDataContext,GVEmp.DataSource`对我来说很新，我不明白其中任何一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:04:29.980

看起来代码正在使用 EntityFrameWork 或 Linq2SQL 左右......这些链接可能会有所帮助

*   [实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)
*   [ADO.NET 实体框架概述](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)
*   [Linq 到 SQL - Linq2SQL](http://msdn.microsoft.com/en-us/library/bb425822.aspx)

阅读这些工具

# cloud - 从 Google App Engine for Java 连接到 Google Cloud Endpoints

> ID：14972484
> 
> 赞同：0
> 
> 时间：2013-02-20T04:49:05.180
> 
> 标签：cloud, google-cloud-endpoints

我已经测试 Cloud Endpoints 几天了，并且能够在本地访问云端点。但是，当我部署到应用引擎时，我似乎无法导航到端点 URL。尝试访问[http://myappname.mydomainname.appspot.com/_ah/api/contact/v1/contact/myname](http://myappname.mydomainname.appspot.com/_ah/api/contact/v1/contact/myname)时出现 404 错误。如果我尝试在本地访问，我可以查看响应。当我查看应用引擎管理日志时，我看到状态“已成功更新 API 配置”。我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:10:00.183

您必须在 war/WEB-INF 中更新您的**APINAME-v1.api文件吗？**

```
{
  "extends" : "thirdParty.api",
  "root" : "https://myapp.appspot.com/_ah/api",
  "name" : "bbwjob",
  "version" : "v1",
  "adapter" : {
    "bns" : "http://myapp.appspot.com/_ah/spi",
    "deadline" : 10.0,
    "type" : "lily"
  },
 ...
} 
```

请更新根和 BNS 值并放入真正的 APPID。我遇到了您的问题，并且由于更新更新了该文件并重新上传。这让我跳了起来。

希望它也适合你。

# php - PHP中的多级JSON数组

> ID：14972485
> 
> 赞同：2
> 
> 时间：2013-02-20T04:49:08.287
> 
> 标签：php, android, json, pdo

在我与农业相关的 Android 应用程序中，用户将作物的名称发送到 PHP 网络服务，该网络服务应返回有关该作物的详细信息。

这是数据库的示例结构。

```
Crop_Master:Crop_Id , Crop_Name , Seed_Rate , Fertilizer
Pest: Crop_id , Pest_Name 
```

现在我知道了 PDO 的 fetchAll() 函数，如果数据来自单个表，则将其转换为 JSON 数组。

像这样：这里的数据来自 Crop_Master 表并且工作正常。

```
$query1="select seed_rate,fertilizer_dosage from crop_master where crop_id='$crop_id'";

$res=$db->query($query1);

$output=$res->fetchAll(PDO::FETCH_ASSOC);

print(json_encode($output)); 
```

但是当数据来自多个表时，我不知道如何创建单个“输出”数组。

假设我想创建一个这样的 JSON 数组：

```
[
   {
      "seed_rate":"value_from_db"
      "fertilizer":"value_from_db"
      "pests":
              [{"pest_name:"value_from_db"}
               {"pest_name:"value_from_db"}
                .
                .
                .
               ]
    }
] 
```

那么如何运行多个查询并创建一个输出数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:59:39.580

您需要将数组元素“害虫”添加到数组 $output 并填充它......如何，将取决于数据库结构，但可能类似于

```
$query1="select seed_rate,fertilizer_dosage from crop_master where crop_id='$crop_id'";    
$res=$db->query($query1);    
$output=$db->fetchAll(PDO::FETCH_ASSOC);

$query2="select pest_name from pests, crop_pests where pests.pest_id = crop_pests.pest_id and crop_pests.crop_id='$crop_id'";    
$res=$db->query($query2);    
$output["pests"]=$db->fetchAll(PDO::FETCH_ASSOC);

print(json_encode($output)); 
```

所以，重点是，您需要将害虫数组作为 $output 数组的元素。我的 $query2 当然只是一个示例，需要针对您的数据库进行调整

# c - C 共享内存段错误

> ID：14972486
> 
> 赞同：0
> 
> 时间：2013-02-20T04:49:11.213
> 
> 标签：c, shared-memory, mmap

我现在正在使用共享内存进行一个项目，并且遇到了令人难以置信的段错误。由于某种原因，并非我分配给 *node 的所有内存都可以访问。在某个索引处（程序的每次运行都相同），无法写入内存。下面是我的代码和一些输出。

```
int shf = shm_open("/queue", O_RDWR|O_CREAT, 0666);
int success = ftruncate(shf, sizeof(QNode)*numVertices*numVertices);
QNode *node = (QNode*) mmap(NULL, sizeof(QNode)*numVertices*numVertices, PROT_READ|PROT_WRITE, MAP_SHARED, shf, 0); 

int a, b;
for (a=0; a<numVertices; a++) {
    for (b=0; b<numVertices; b++) {
        (node[sizeof(QNode)*a*numVertices + sizeof(QNode)*b]).k = a;                
        (node[sizeof(QNode)*a*numVertices + sizeof(QNode)*b]).i = b;
        printf("Mapping to offset %d\ti:%d\tk:%d\n", sizeof(QNode)*a*numVertices + sizeof(QNode)*b, (node[sizeof(QNode)*a*numVertices + sizeof(QNode)*b]).i,(node[sizeof(QNode)*a*numVertices + sizeof(QNode)*b]).k);
    }
} 
```

小图上的输出：

```
// Bunch of output
Offset: 472 i:5 k:6
Offset: 480 i:6 k:6
Offset: 488 i:7 k:6
Offset: 496 i:8 k:6
Offset: 504 i:0 k:7
Offset: 512 i:1 k:1
Offset: 520 i:1 k:1
Offset: 528 i:1 k:0
Offset: 536 i:1 k:1
Offset: 544 i:1 k:1
Offset: 552 i:1 k:0
Offset: 560 i:0 k:0
// More incorrect output down here 
```

在下面较大的图形输出中，我无法在此处发布一些更令人费解的结果——在偏移 7168 处，它开始打印出不可打印的字符。例如，在偏移量 7168 的行上，我看到 Ma[NUL][NUL][NUL][NUL][SI][NUL][NUL][NUL] 偏移量 7168...这是我实际上可以向您展示的输出较大的图表 - 在最后一行之后，它会出现故障。

在更大的图表上输出：

```
// Bunch of output
Mapping to offset 9136  i:54    k:17
Mapping to offset 9144  i:55    k:17
Mapping to offset 9152  i:56    k:17
Mapping to offset // This is where it seg faults... 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:51:21.803

嗯...真的是要索引`node[sizeof(QNode)*a*numVertices + sizeof(QNode)*b]`吗？C 会自动将您的索引乘以所指向的结构的大小，所以我觉得`node[a*numVertices + b]`看起来更理智。

# php - php中的图片上传问题

> ID：14972488
> 
> 赞同：0
> 
> 时间：2013-02-20T04:49:15.627
> 
> 标签：php, joomla, image-upload

我正在上传带有`#included`名称的图像，但图像不显示。

例如，如果我创建了一个文件名，`5677PlayadelRey,#4_LR.jpg` Joomla 的文件系统无法加载它，但如果我命名`5677PlayadelRey,Unit4_LR. jpg`它工作正常。

感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:51:39.323

那是因为`#`字符在页面上指定了一个哈希/ID。它是在 url 中使用的非法字符。

逗号`,`也不应该在 url 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:53:41.230

您可以使用`urlencode`它来确保您的文件名对于 URL 来说是安全的。

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

仅当您需要在 URL 中使用文件名时才可以使用它。您可以保留您想要的任何文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:41:09.537

在您处理图像的方法中：

```
jimport('joomla.filesystem.file');
$input = JFactory::getApplication()->input; 
```

然后，使用

```
$your_photo_name = JFile::makeSafe($input->get('your_photo_name'); 
```

这将使 Joomla 可以安全使用文件名！系统

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:14:08.653

试试这个

```
<?php
    // define a constant for the maximum upload size
    define ('MAX_FILE_SIZE', 1024 * 50);

    if (array_key_exists('upload', $_POST)) {
      // define constant for upload folder
      define('UPLOAD_DIR', '/path/to/images/');
      // replace any spaces in original filename with underscores
      $file = str_replace('#', '_', $_FILES['image']['name']);
      // create an array of permitted MIME types
      $permitted = array('image/gif', 'image/jpeg', 'image/pjpeg',
    'image/png');

      // upload if file is OK
      if (in_array($_FILES['image']['type'], $permitted)
          && $_FILES['image']['size'] > 0 
          && $_FILES['image']['size'] <= MAX_FILE_SIZE) {
        switch($_FILES['image']['error']) {
          case 0:
            // check if a file of the same name has been uploaded
            if (!file_exists(UPLOAD_DIR . $file)) {
              // move the file to the upload folder and rename it
              $success =
    move_uploaded_file($_FILES['image']['tmp_name'], UPLOAD_DIR .
    $file);
            } else {
              $result = 'A file of the same name already exists.';
            }
            if ($success) {
              $result = "$file uploaded successfully.";
            } else {
              $result = "Error uploading $file. Please try again.";
            }
            break;
          case 3:
          case 6:
          case 7:
          case 8:
            $result = "Error uploading $file. Please try again.";
            break;
          case 4:
            $result = "You didn't select a file to be uploaded.";
        }
      } else {
        $result = "$file is either too big or not an image.";
      }
    }
    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T05:14:52.117

如果您使用的是 Joomla，则要求所有文件名都是字母数字 + 下划线。您安装的许多插件都可能基于此假设。否则事情可能会破裂。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T04:53:57.150

`#`没有在 URL 中传递，所以使用任何替换为`#`

# c - C中的光线追踪器，光线平面相交

> ID：14972490
> 
> 赞同：2
> 
> 时间：2013-02-20T04:49:42.337
> 
> 标签：c, vector, intersection

我正在使用 C 语言进行光线追踪器工作。我正在尝试找出光线平面交叉点的数学运算。我有

d = ((Po-Lo) (点) N) / (L (点) N)

现在如果我是对的...

```
n - the planes normal ray
Po = single point on the plane
L = the vector that represents the ray I am shooting
Lo = a point on the line 
```

我很困惑这是如何工作的。如果我逐个像素地进行，线（Lo）上的点是否需要降落在平面上？如果这是真的，我不能只用我投射的光线 (L) 的方向向量来表示那个点吗？

我觉得我完全把这个复杂化了，但是我完全不知道如何在我的代码中让它工作。

编辑：

```
d = a scalar in the real world domain. 
```

所以 d 需要等于零才能使平面和射线（在我正在看的点）相交？我可以用方向向量坐标来表示线上的那个点吗>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:04:01.083

对于平面上的任何一点`p`，这个等式都是正确的：

```
dot(Po-p,N) = 0 
```

`p`对于线上的任何一点，这个等式都是正确的：

```
p = Lo+L*d 
```

如果该点既在平面上又在线上（交点），那么它们都必须为真。因此我们可以替换：

```
dot(Po-(Lo+L*d),N) = 0 
```

通过做一些代数，我们可以解出 d：

```
dot((Po-Lo)-L*d),N) = 0
dot(Po-Lo,N) - dot(L*d,N) = 0
dot(Po-Lo,N) - d*dot(L,N) = 0
dot(Po-Lo,N) = d*dot(L,N)
d = dot(Po-Lo,N)/dot(L,N) 
```

# java - 如何手动将war文件部署到tomcat？

> ID：14972494
> 
> 赞同：9
> 
> 时间：2013-02-20T04:50:09.320
> 
> 标签：java, tomcat, deployment, tomcat6

我有一场战争`"C:\Documents and Settings\myProj.war".`

该网络项目也可在`"C:\Documents and Settings\myProj".`

我想将它部署到一个 tomcat。

Tomcat的位置是`"C:\Documents and Settings\tomcat6x".`

请告诉我如何手动或通过命令提示符执行此操作。

一个应用程序已经在 Tomcat 中运行。这是一个 Maven 项目。我想在同一个不是 Maven 应用程序的 tomcat 上部署另一个应用程序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T04:55:54.750

这些是我必须在本地主机上手动部署 Tomcat 中的战争时遵循的步骤：

1.  如果 Tomcat 正在运行，请停止/杀死它。

2.  进入 tomcat 安装文件夹（这对你来说必须是*C:\Documents and Settings\tomcat6x*），我们称之为`<tomcat>`.

3.  在`<tomcat>`中，删除*temp*和*work*文件夹。它们只包含临时文件。

4.  如果它是一个*jar*文件，可能是用于配置，所以将它放在`<tomcat>`/lib 文件夹中。如果它是一个*战争*文件，请将其放在`<tomcat>`/deploy 或`<tomcat>`/webapps 文件夹中。

5.  启动你的tomcat。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T04:55:36.777

将它放在已部署的 webapp 的 /WEB-INF/lib 文件夹中应该可以工作。例如：如果您有名为 myapp 的 webapp，则将您的 jar 放入 webapps/myapp/WEB-INF/lib

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T04:53:08.090

**部署 web 应用程序**：将您的 war 文件复制到 tomcat 内的 webapps 目录。

（确保你的war文件被解压以创建相应的目录；如果你的tomcat正在运行，那么你不需要做任何其他事情。Tomcat会自动处理它。）

部署 jar 文件可以通过将 jar 放在已部署应用程序的 lib 目录中的类似方式完成；但要反映更改，您可能必须重新启动 Tomcat。

# javascript - 使用弹出框选择日期时间？

> ID：14972496
> 
> 赞同：1
> 
> 时间：2013-02-20T04:50:17.233
> 
> 标签：javascript, prompt

有没有办法生成一个弹出框，它有一个下拉菜单来选择日期时间，在选择日期时间后点击确定按钮，选定的值会存储在某个变量中。

我知道**提示**弹出窗口，但它只有一个**文本框**来取值。如何在该文本框的 onfocus 事件上设置任何日历，或者如何设置下拉菜单以选择日期时间而不是文本框。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:43:04.710

![日期选择器](../Images/f98d5bd1fb633257c3ab3025cd3ad0ef.png)

我希望这是你想要的。你可以使用**Pikaday**插件。

它是**轻量级的，并且没有依赖项**。

**查看演示**： [http ://dbushell.github.com/Pikaday/](http://dbushell.github.com/Pikaday/)

**继承人完整文档：** [https ://github.com/dbushell/Pikaday](https://github.com/dbushell/Pikaday)

# android - wifi可以连接但不是活动网络吗？

> ID：14972502
> 
> 赞同：2
> 
> 时间：2013-02-20T04:50:50.930
> 
> 标签：android

我正在使用 android.net.wifi.WIFI_STATE_CHANGED 来监控 wifi 是否已连接，但我想知道是否可以连接 wifi 并且 ConnectivityManager.getActiveNetworkInfo() 是否可以为不是 wifi 的网络返回 NetworkInfo？

什么决定了默认的活动网络？

# sql - SQL选择具有相同字段值的行

> ID：14972514
> 
> 赞同：0
> 
> 时间：2013-02-20T04:51:52.120
> 
> 标签：sql, sql-server-2012

初始表是这样的

```
id  name        count
1   chocolate   5 
1   cheeze      3 
2   pepperoni   2
2   potatoes    1
2   cheese      7
3   dirty sock  2 
```

我想要的是选择具有不同 id 但具有相同名称的行。换句话说，将在更多食谱中使用的成分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:10:22.723

如果我理解正确，您想按名称选择重复项。在您的示例中，`cheese`如果您使用相同的拼写应该是这样的（但您没有 - 这是错误的吗？）。

假设我做对了，这应该可以工作（[SQLFiddle DEMO](http://www.sqlfiddle.com/#!3/506d8/1)）：

```
SELECT * FROM mytable
WHERE [name] IN (
    SELECT [name]
    FROM mytable
    GROUP BY [name]
    HAVING count(*) > 1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:56:36.213

首先获取您的唯一 id，名称对作为子查询，然后按名称聚合结果。

```
select name, COUNT(*) as count
from (
    select distinct id, name
    from mytable) as sq
group by name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:00:15.783

试图在上面的评论中发帖，格式不太好；这也有效：

```
SELECT t1.id FROM myTable t1, myTable t2
    WHERE t1.name LIKE t2.name AND t1.id != t2.id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:23:52.743

按名称从成分组中选择名称、计数（id）作为 used_in_recipes；

我们真的需要检查不同的 id 吗？为什么我需要在食谱中重复相同的成分？

让我们按名称对它们进行分组。

# java - Heapify 函数：如何找到最后一个内部节点？

> ID：14972521
> 
> 赞同：1
> 
> 时间：2013-02-20T04:52:40.483
> 
> 标签：java, heap, priority-queue

我正在尝试为优先队列实现自下而上的二进制堆构造。到目前为止，我已将所有值按任意顺序放入 ArrayList 中，现在我想找到最后一个内部节点的 element#，然后在其上运行 BubbleDown() 函数，然后遍历堆中的每个内部节点。

如何找到最后一个内部节点的元素#？这是表格的外观，（N = 堆中的元素数，LIN# = 最后内部节点的元素数）：

```
 N   LIN#
    2   1
    3   1
    4   3
    5   3
    6   3
    7   3
    8   7
    9   7
    10  7
    11  7
    12  7
    13  7
    14  7
    15  7
    16  15
    etc etc 
```

# javascript - 后台流 Windows 8？

> ID：14972522
> 
> 赞同：0
> 
> 时间：2013-02-20T04:52:39.777
> 
> 标签：javascript, audio, background, microsoft-metro, runtime

今天晚上我一直在努力让背景音频正常工作！音频标签的 HTML5 属性“msAudioCategory”似乎是无效的。这很奇怪，我在任何地方都找不到这个问题的帮助。

如果我不明白你的答案，请先原谅我。我的 default.js （从随机点开始以使其更短）：

```
 app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {

            } else {
                // TODO: This application has been reactivated from suspension.
                // Restore application state here.
            }
            args.setPromise(WinJS.UI.processAll());
        }
    };

    app.oncheckpoint = function (args) {
        // TODO: This application is about to be suspended. Save any state
        // that needs to persist across suspensions here. You might use the
        // WinJS.Application.sessionState object, which is automatically
        // saved and restored across suspension. If you need to complete an
        // asynchronous operation before your application is suspended, call
        // args.setPromise().
        // Declare a variable that you will use as an instance of an object
        var mediaControls;

        // Assign the button object to mediaControls
        mediaControls = Windows.Media.MediaControl;

        // Add an event listener for the Play, Pause Play/Pause toggle button
        mediaControls.addEventListener("playpausetogglepressed", playpausetoggle, false);
        mediaControls.addEventListener("playpressed", playbutton, false);
        mediaControls.addEventListener("pausepressed", pausebutton, false);
        mediaControls.addEventListener("stoppressed", stop, false);

        // The event handler for the play/pause button
        function playpausetoggle() {
            if (mediaControls.isPlaying === true) {
                document.getElementById("playback").pause();
            } else {
                document.getElementById("playback").play();
            }
        }

        // The event handler for the pause button
        function pausebutton() {
            document.getElementById("playback").pause();
        }

        // The event handler for the play button
        function playbutton() {
            document.getElementById("playback").play();
        }
        // The event handler for the stop button
        function stop() {
            document.getElementById("playback").pause();
            document.getElementById("playback").currentTime = 0;
        }
    };

    app.start();

}
()

); 
```

元素标签：

```
 <audio id="audtag" autoplay="autoplay" msAudioCategory="BackgroundCapableMedia" src="http://-Hidden-:8000/;">

 </audio> 
```

我很确定我已经正确配置了所有内容。我确保我已经设置了后台功能或其他东西。但是，它仍然说音频元素属性“msAudioCategory”不是有效的 HTML5。我在哪里将 JavaScript 放在 default.js 中以定义该属性？在 app.start() 之后？文件中的文档让我感到困惑。

第一次制作应用程序总是应该很容易！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:33:12.737

您是否在应用清单中设置了正确的声明？您需要添加后台任务并将任务类型设置为音频和控制通道。

我昨天刚刚在 C# 示例上工作

# php - Codeigniter - 加载一个视图并在另一个视图中动态更新它

> ID：14972523
> 
> 赞同：1
> 
> 时间：2013-02-20T04:52:46.647
> 
> 标签：php, codeigniter, jquery

我正在从单个控制器加载两个视图

```
student controller     student_edit view  ---> on submit inserts data 
edit()             --->
loads 2 views           comments view      ---> should dynamically insert data and reload it 
```

所以基本上我需要在我的**student_edit**页面上添加一个评论框。这是一个快照： ![Student_edit 视图执行默认操作。 仅应动态添加评论](../Images/05de9c0e24dd9aecbdb3dfcf3b5a4989.png)

我已经尝试了以下代码，但似乎没有工作

```
$(document).ready(function(){
                var baseurl = $('#baseurl').val();
                $('.submitComment').submit(function(e){
                    e.preventdefault()
                    $.ajax({
                        url : baseurl + 'index.php/comment/insert',
                        data : $('form').serialize(),
                        type: "POST",
                        success : function(comment){
                            $(comment).hide().insertBefore('#insertbeforMe').slideDown('slow');
                        }
                    })
                    return false;
                })
            }) 
```

**问题：**上面的代码重新加载了整个视图，**student_edit 表单**也被提交了。

谁能帮助我如何动态添加和重新加载评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:45:40.257

创建一些仅加载视图的ajax控制器，

```
 class Ajax_Controller extend CI_Controller(){
    function __construct(){
     parent::__construct();
    //here you can check if request is ajax, if not ajax make some redirect to not show the url browsing
     }
    function ajaxview(){
    $this->load->view('myajax-view');
    }

    } 
```

然后，每次您需要加载该视图时，您都可以为您的正确视图模块执行 jquery 简单加载：

```
$('#right-div').load('site.com/ajax_controller/ajaxview'); 
```

# android - 如何在android中使用Jsoup根据输入名称选择td？

> ID：14972531
> 
> 赞同：0
> 
> 时间：2013-02-20T04:53:46.810
> 
> 标签：android, html-parsing, jsoup

我在 android 中使用 Jsoup 进行 Html 解析。这是我要解析的 html 表：

```
<TR><TD><INPUT TYPE="RADIO" NAME="lccp_trndtl" VALUE="12708NZM KCG YNNYNYNYA"ONCLICK="return farefill('12708NZM KCG YNNYNYNYA','12708','NZM ',0,0,1,0,1,0,1,0,0,0,0)" CHECKED>12708</TD> 
```

`I need the value of <td> here i.e 12708`.我正在使用以下代码来实现我的目的：

```
 Document doc = Jsoup.parse(htmlPage.trim());

        Elements links = doc.select("table tr td input");

        if(links != null && links.size() != 0)
            Log.v("",String.valueOf(links.size()));
        else
            Log.v("","Size of links is 0");

        for (Element link : links) 
        {
            String linkHref = link.attr("href");
            Log.v("",linkHref);

            String linkText = link.text();
            Log.v("",linkText);
        } 
```

我搜索了很多，但没有找到我的问题的解决方案。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:09:23.143

试试这种方式，它会打印你需要的输出

```
 String s="<TR><TD><INPUT TYPE=\"RADIO\" NAME=\"lccp_trndtl\" VALUE=\"12708NZM KCG YNNYNYNYA\" ONCLICK=\"return farefill('12708NZM KCG YNNYNYNYA','12708','NZM ',0,0,1,0,1,0,1,0,0,0,0)\" CHECKED>12708</TD>";
     Document doc = Jsoup.parse(s.trim());

     Elements links = doc.getAllElements();

     if(links != null && links.size() != 0)

         Log.v("output",String.valueOf(links.size())+" "+ links.get(0).text());
     else
         Log.v("output","Size of links is 0"); 
```

# android - 插件类在 Phonegap 中已弃用

> ID：14972534
> 
> 赞同：2
> 
> 时间：2013-02-20T04:53:54.550
> 
> 标签：android, cordova

我观察到 Phonegap 中的插件类已弃用，那么现在插件的替换是什么，我如何在不使用 JavaScript 接口类和插件类的情况下在 java 和 JavaScript 之间进行通信

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:46:24.617

插件在最近的版本中发生了一些变化，而不是扩展 PluginClass，它现在扩展了 CordovaPlugin。您可以在官方文档中找到如何创建插件。

[链接到 android 插件开发指南](http://docs.phonegap.com/en/2.4.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

```
public class Echo extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals("echo")) {
            String message = args.getString(0); 
            this.echo(message, callbackContext);
            return true;
        }
        return false;
    }

    private void echo(String message, CallbackContext callbackContext) {
        if (message != null && message.length() > 0) { 
            callbackContext.success(message);
        } else {
            callbackContext.error("Expected one non-empty string argument.");
        }
    }
} 
```

# jquery - 带有自定义句柄的 jQuery UI 滑块不适用于 Twitter Bootstrap 2.3.0

> ID：14972537
> 
> 赞同：1
> 
> 时间：2013-02-20T04:54:04.813
> 
> 标签：jquery, jquery-plugins, jquery-ui-slider, ipad-2, twitter-bootstrap-2

我有一个自定义句柄，用于我的 jquery UI 滑块，它在我的笔记本电脑以及我的 iPad（使用 ui touch punch 插件）上针对 jquery UI 1.9.2 + jquery 1.9.0 + twitter bootstrap 2.2.1 运行良好。

但是，自从我将 twitter bootstrap 升级到 2.3.0 后，自定义手柄不再响应我 iPad 上的触摸。它仍然可以在我的笔记本电脑上运行，所以我怀疑它与 ui touch punch 插件不兼容 + Twitter Bootstrap 2.3.0 发生了什么。

任何见解都会非常有帮助。提前致谢！

卡罗琳

# java - 如何制作一个字符串数组

> ID：14972539
> 
> 赞同：-5
> 
> 时间：2013-02-20T04:54:15.277
> 
> 标签：java, arrays, string, case-insensitive

当我制作一个`equalsIgnorecase`无法识别的字符串数组时，在eclipse中它建议我将数组更改为其他内容，反之亦然。

```
 public void onChat(PlayerChatEvent event) {
      Player player = event.getPlayer();
      String[] curse = new String[] {"rude1", "rude2", "rudeN"};
      if (event.getMessage().equalsIgnoreCase(curse)) {
        event.setCancelled(true);
        player.sendMessage("Don't Swear");
     }
 }
} 
```

这是我的视频游戏的诅咒过滤器。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:56:37.840

你需要循环遍历诅咒来检查每一个。

```
for (String c : curse) {
  ... do check ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:04:16.503

继续 user2089674 的建议。

我猜你想过滤掉包含诅咒词的消息，所以不要使用 equalsIgnoreCase，而是使用 contains？

那是

```
for (String c : curse) {

  if(event.getMessage().contains(c)){
       ......punish bad players..
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:09:59.143

之前已经说过，但想法是[方法签名`String.equalsIgnoreCase()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)不接受 a`String[]`作为参数。

仔细看一下 - 你可能有一个`String[]`，但这与`String`. 把它想象成你需要一张 1 美元的钞票才能使用自动售货机，但你只有 20 美元——这行不通。

因此，您需要遍历该数组的所有元素并将它们提供给`equalsIgnoreCase`.

以下是三种方法：

1.  一个简单的for循环

    ```
    for(int i = 0; i < curse.length(); i++) {
        if(curse[i].equalsIgnoreCase(event.getMessage()) {
            // logic
        }
    } 
    ```

2.  [增强的](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)for循环

    ```
    for(String badWord : curse) {
        if(badWord.equalsIgnoreCase(event.getMessage()) {
          // logic
        }
    } 
    ```

3.  将数组转换为 List 集合[`Arrays.asList(T... a)`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/ArrayList.html)并使用 an`Iterator<String>`对其进行迭代

    ```
    List<String> badWords = Arrays.asList(curse);
    Iterator<String> badWordIterator = badWords.iterator();
    while(badWordIterator.hasNext()) {
        if(badWordIterator.next().equalsIgnoreCase(event.getMessage())) {
            // logic
        }
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T04:57:55.610

而不是这个`if (event.getMessage().equalsIgnoreCase(curse))` ，你可以使用简单的`for loop`

```
 for(int i=0;i<curse.length;i++){
    if (event.getMessage().equalsIgnoreCase(curse[i])){
        event.setCancelled(true);
    player.sendMessage("Don't Swear");
    }
 } 
```

或者您可以使用`enhanced for loop`来检查值

```
for(String s:curse){
  if (event.getMessage().equalsIgnoreCase(s)) {
    event.setCancelled(true);
    player.sendMessage("Don't Swear");
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-05T10:38:22.697

你不能用 String[] 来做到这一点。像这样迭代它（最好使用增强的 for 循环）：

```
 for (String curse : curses) {
    } 
```

并在循环内放置您的支票：

```
 for (String c : curse) {
        if (event.getMessage().equalsIgnoreCase(c)) {
            event.setCancelled(true);
            player.sendMessage("Don't Swear");
        }
    } 
```

所以你遍历字符串数组（因此你得到数组中每个项目的结果），然后检查迭代的项目是否等于发送的消息。顺便说一句，我建议在 spigotmc.org 上提出这些问题，因为新人不欢迎 stackoverflow。

# ravendb - 限制对 ravendb 面板管理的访问

> ID：14972540
> 
> 赞同：0
> 
> 时间：2013-02-20T04:54:25.373
> 
> 标签：ravendb, ravendb-studio

我已尝试向面板添加 Windows 身份验证，删除将匿名访问设置为无，但我仍然能够在浏览器中使用 IP:RavendbPort 浏览站点，如何设置面板以请求 Windows授权。

我已经读过，该面板实际上就像 IIS 中的另一个站点，但我在哪里可以配置它？

我正在使用 IIS 8，这是 Raven.Server.exe.config 的以下 xml 我将 ravendb 作为服务运行

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="Raven/Port" value="2211"/>
    <add key="Raven/DataDir" value="~\Database\System"/>
    <add key="Raven/AnonymousAccess" value="None"/>  <!-- Settings are Get, All, None -->
        <add key="Raven/Authorization/Windows/RequiredUsers" value=myservername/username"/>
  </appSettings>
    <runtime>
        <loadFromRemoteSources enabled="true"/>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <probing privatePath="Analyzers;Plugins"/>
        </assemblyBinding>
    </runtime>
</configuration> 
```

我已阅读以下问题以[限制对 ravendb](https://stackoverflow.com/questions/10034780/how-to-restrict-access-to-admin-panel-in-ravendb)的访问，但没有运气！

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:40:29.447

这个值：

```
 <add key="Raven/Authorization/Windows/RequiredUsers" value=myservername/username"/> 
```

仅值 1.0

在 2.0 中，您已经遇到了这种行为。可能会欺骗您的是浏览器有时会缓存凭据，并自动为您进行身份验证。

# android - 适用于 Android 的 Google Analytics SDK Air 使用 AS3 和 Flash

> ID：14972547
> 
> 赞同：0
> 
> 时间：2013-02-20T04:55:41.270
> 
> 标签：android, actionscript-3, flash, sdk, google-analytics

如何使用 Flash 和 AS3 安装适用于 Android 的 Google SDK？

我在文档中看到了这个，但它看起来不像 AS3？我把这段代码放在哪里？有什么好的教程可以教一个人如何做到这一点？

将 send 方法添加到每个活动的 onStart() 和 onStop() 方法中，如下例所示：

```
/**
 * An example Activity in your app with Analytics
 * implemented.
 */
public class myTrackedActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  }

  @Override
  public void onStart() {
    super.onStart();
    ... // The rest of your onStart() code.
    EasyTracker.getInstance().activityStart(this); // Add this method.
  }

  @Override
  public void onStop() {
    super.onStop();
    ... // The rest of your onStop() code.
    EasyTracker.getInstance().activityStop(this); // Add this method.
  }
} 
```

请注意，EasyTracker 需要 Context 才能调用其方法。在上面的例子中，这一行：

```
EasyTracker.getInstance.activityStart(this); 
```

负责设置上下文。但是，如果您需要在其他类或方法中调用 EasyTracker，则需要先调用 EasyTracker 的 setContext(Context ctx) 方法：

```
// Set Context before using EasyTracker. Note that the SDK will
// use the application context.
EasyTracker.getInstance().setContext(this);

// EasyTracker is now ready for use. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:08:18.670

Google SDK 用于创建原生 Android 应用程序 - 在 Flash 上下文中，您可以使用它来构建适用于 Android 的 AIR [Adob​​e Native Extension](http://www.adobe.com/devnet/air/native-extensions-for-air.html)。

该链接提供了构建 ANE 的起点。顺便说一句，代码在我看来像 Java（默认的 Android 开发语言）。

# curl - 使用 curl 进行测试时 HTTP OPTIONS 请求的 CORS 来源不一致

> ID：14972551
> 
> 赞同：1
> 
> 时间：2013-02-20T04:55:57.107
> 
> 标签：curl, cross-domain, cors

在测试 CORS 功能的端点时，我很好奇是否有人可以在使用 curl 时解释以下结果差异：

首先，我尝试了以下方法：

```
$ curl -i https://api.github.com -H "Origin: http://github.com" -X OPTIONS 
```

这导致了成功的响应，这给了我对 Access-Control-Allow-Origin 标头等的期望。

其次，我试过这个：

```
$ curl -i https://api.github.com -H "Origin: http://jamesdh.github.com" -X OPTIONS 
```

这导致了 500 错误。唯一改变的是初始请求中传递的 Origin 标头。

请原谅我对 CORS 的无知，但大多数服务器不只是在 Access-Control-Allow-Origin 响应标头中反映 Origin 路径吗？为什么 GitHub 会与一个正常工作，然后在另一个上炸毁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:10:31.293

显然对于 CORS 请求，域必须首先在 GitHub 上注册为 OAuth 应用程序。从他们在[http://developer.github.com/v3/#cross-origin-resource-sharing](http://developer.github.com/v3/#cross-origin-resource-sharing)的文档中，我发现了以下内容：

> 任何注册为 OAuth 应用程序的域都被接受。这是一个样本...

如果他们再强调一点，那肯定会很好！创建使用所需 GitHub 页面 URL 作为域/回调 URL 的 OAuth 应用程序后，现在可以按预期工作！

# java - 使用 getBean 检索范围原型的 bean

> ID：14972552
> 
> 赞同：2
> 
> 时间：2013-02-20T04:56:02.813
> 
> 标签：java, spring, dependency-injection, inversion-of-control

我在[这里](https://stackoverflow.com/questions/812415/why-is-springs-applicationcontext-getbean-considered-bad)读到使用被认为是 applicationContext.getBean("somebeananmehere") 是不好的。

如果是这样，我将如何以编程方式获取豆子（取决于用户他想要什么样的豆子，假设他可以选择不同的杂货项目，例如苹果、肥皂、洗涤剂）？

比方说

```
switch(num){
  case 1 : myGrocery  = (GroceryItem) applicationContext.getBean("SOAP");break;
  case 2: myGrocery = (GroceryItem) applicationContext.getBean("APPLE");break;
  default:
   //more code here
} 
```

这就是我在用户选择他或她的杂货的应用程序中所做的。（这是一个控制台应用程序）

如果 applicationContext.getBean 被认为是不好的，那么还有什么替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:40:51.620

您正在寻找**查找方法注入**。

见[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-method-injection](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-method-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:08:44.183

检查这个

```
class Example {

  private SOAP soap;

  @Autowired
  public void setSoap(SOAP soap) {
    this.soap= soap;
  }

  private APPLE apple;

  @Autowired
  public void setApple(APPLE apple) {
    this.apple= apple;
  }

  public void yourMethod(int num) {
   switch(num){
    case 1 : myGrocery  = (GroceryItem) soap;break;
    case 2: myGrocery = (GroceryItem) apple;break;
    default:
     //more code here
    }
 }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:19:55.783

您可以使用弹簧的`factory-method`选项。只需编写您的工厂方法以返回正确的类并在您的 xml bean 中：

```
<bean factory-method="your factory method name" class="your class" /> 
```

# jquery - 无法禁用 jquery 多选中的选项

> ID：14972554
> 
> 赞同：1
> 
> 时间：2013-02-20T04:56:10.427
> 
> 标签：jquery, html

如果选中第一个选项，我想禁用其他选项，否则我需要允许用户选择多个选项。

我尝试了不同的方法来禁用多个下拉列表中的选项，但没有任何效果。

> ```
> <html>
> <head>
> <script type="text/javascript" src="jquery-1.6.1.min.js"></script>
> <script type="text/javascript" src="jquery-ui-1.8.13.custom.min.js"></script>
> <script type="text/javascript" src="ui.dropdownchecklist-1.4-min.js"></script>
> <!-- Apply dropdown check list to the selected items  -->
> <script type="text/javascript">
>     $(document).ready(function() {
>         $("#s8").dropdownchecklist( {emptyText: "Please Select...", width: 150 
>         //, onItemClick: function(checkbox, selector){
> //var justChecked = checkbox.prop("checked");
> //var checkCount = (justChecked) ? 1 : -1;
> //for( i = 0; i < selector.options.length; i++ ){
>     //if ( selector.options[i].selected ) checkCount += 1;
>     //selector.options[i].checked=false;
>     //selector.options[i].disabled = true;
> //}
> //}           
>         });
>     });
> </script>
>  <script type="text/javascript">
>  function optionAlert(val)
>  {
>    var x = document.getElementById(val);
>    var y = x.selectedIndex;
>    var len = x.options.length;
>    if(y!=-1){
>     for(i=0; i<len; i++)
>     {
>       if(y != i)
>       {
>         x.options[i].disabled=true;
>         //alert(x.options[i].disabled);
>         var txt = x[i].text;
>         //alert(txt);       
>         //document.getElementById(txt).disable = true;      
>         $("#s8 option[value="+txt+"]").attr("disabled","disabled");
>         //var option = $("option[value='" + txt + "']", this);
>         //alert(option);
>         //option.attr("disabled","disabled");
>         //var curInnerHTML = document.body.innerHTML;
>         //alert(curInnerHTML);
>         //curInnerHTML = curInnerHTML.replace("disable", "disabled");
>         //document.body.innerHTML = curInnerHTML;
>         //$('optgroup option').prop('disabled', true);
>         //$("#s8").attr("disabled", true);
>         //$("select option[value="+txt+"]").attr(state ? 'disable' : 'enable'));
>         //$(this).find("option[value="+txt+"]").prop("disabled", true);
>         //$(this).find("option:eq("+i+")").attr("disabled", true);
>         //$('#s8 option[value='+txt+']').attr('selected', 'selected');
>         //$("#s8 option:selected").attr('disabled','disabled');
>         //jQuery(':text:not(:hidden)').attr("disabled",true);
>         //jQuery("input[type='text']").prop("disabled", true);
>         //document.getElementById(txt).disabled=true;
>       }
>     }
>    }
>  }
>  </script>
> </head>
>   <body>
>    <table>
>    <tr>
>     <td>
>          <select name="drlOrderItem" id="s8" multiple="multiple" onChange="optionAlert('s8')">
>           <option id="Low"  value="Low" style='color:green' >Low</option>
>           <option id="Normal"  value="Normal" style='color:grey' >Normal</option>
>           <option id="Medium" value="Medium" style='color:orange'>Medium</option>
>           <option id="High" value="High" style='color:red' >High</option>
>          </select>
>       </td>
>     </tr>    
>   </table>
>    </body>
>   </html> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:19:37.063

试试这个： - [http://jsfiddle.net/aiioo7/5d5XZ/1/](http://jsfiddle.net/adiioo7/5d5XZ/1/)

```
$(function(){
$("#s8").on("click",function(){
    if ($("#s8 option:eq(0)")[0].selected && $('#s8 option:selected').size()>1)
    {
        $("#s8").find("option").each(function(){
            $(this).prop('selected', false);
        });
        $("#s8 option:eq(0)")[0].selected = true;
    }
    else if ($("#s8 option:eq(0)")[0].selected==false && $('#s8 option:selected').size()==1)
        $("#s8 option:eq(0)")[0].selected = false;
}); 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:12:02.457

试试这个：

```
$('#s8 option').click(function () {
   var selVal = $(':selected').val();
   if (selVal == 'Low') {
      $('option').prop('disabled', true);
   } else {
      $('option').prop('disabled', false);
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:13:21.997

```
 <select name="drlOrderItem" id="s8" multiple="multiple" onChange="optionAlert('s8')">
      <option id="Low"  value="Low" style='color:green' >Low</option>

      <optgroup>
      <option id="Normal"  value="Normal" style='color:grey' >Normal</option>
      <option id="Medium" value="Medium" style='color:orange'>Medium</option>
      <option id="High" value="High" style='color:red' >High</option>
      </optgroup> 
     </select> 

1)  $('#selectId>option:selected').val();

   if (this.value == 'Low') {
      $('optgroup option').prop('disabled', true);
   } else {
      $('optgroup option').prop('disabled', false);
   }

2)    if($('#selectId>option:selected'))
      //your code 
```

我没试过，但我发现了这个逻辑..也许它会帮助你..

# java - 在这个哈希表推送方法中不断获取 NullPointerExecption

> ID：14972565
> 
> 赞同：1
> 
> 时间：2013-02-20T04:57:15.013
> 
> 标签：java, nullpointerexception, hashtable

`NullPointerException`尝试将条目放入我的`HashTable`. 我不认为这是我的私人调整大小方法，而是与我的哈希方法有关。三种方法如下。此外，当数组被实例化时，所有值都设置为 null，并且它们的布尔可用性设置为 true。布尔可用性是查看在何处添加下一个条目（如果它们具有匹配的哈希），因为我们正在执行线性探测实现。

```
public V put(K key , V value) {
    V v = null;
    int hashVal = hash(key);
    size++;
    if (size >= maxSize) {
        resize();
    } else {
        while (!table[hashVal].isAvailable()) {
            hashVal++;
        }
        table[hashVal]=newtable[hashVal] Entry<K= new Entry < K,V> V > (key, value);
        table[hashVal].setAvailable(false);
        return value;
    }
    return v;
}

private void resize() {
    int _length = 2*length;2 * length;
    maxSize = (int) MAX_LOAD_FACTOR * _length;
    Entry<KEntry < K,V>[] V > [] old = table;
    table=table = new Entry[_length];
    size=0;size = 0;
    for (int i=0;i<oldi = 0; i < old.length; i++) {
        if (!old[i].isAvailable()) {
            put(old[i].getKey(), old[i].getValue());
        }
    } 
}

private int hash(Object o) {
    return (o.hashCode() % length);
} 
```

这是我的入口类： public static class Entry { private K key; 私人V值；可用的私有布尔值；

```
 public Entry(K key, V value) {
        this.setKey(key);
        this.setValue(value);
        this.setAvailable(true);
    }

    public void setKey(K key) {
        this.key = key;
    }

    public K getKey() {
        return this.key;
    }

    public void setValue(V value) {
        this.value = value;
    }

    public V getValue() {
        return this.value;
    }

    public boolean isAvailable() {
        return available;
    }

    public void setAvailable(boolean available) {
        this.available = available;
    }
} 
```

我在我的 put 方法中的 while 循环中获得了 NPE。

这是我的构造函数，用于初始化我的哈希表以及一些本地变量

```
private int length, size;
private int maxSize;

/**
 * The underlying array for this hashtable
 */
private Entry<K,V>[] table;

public HashTable() {this(11);}

@SuppressWarnings("unchecked")
public HashTable(int length) {
    this.length=length;
    table=new Entry[length];
    for(int i=0;i<table.length;i++) {
        table[i]=null;
    }
    maxSize=(int)(MAX_LOAD_FACTOR * length);
    size=0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:20:22.907

如果

> 所有值都设置为 null

意味着所有的元素`table`都`null`在初始化之后，`!table[hashVal].isAvailable()`第一次怎么会通过？

在java中，对象的变量是引用。因此`table`是 的参考`Entry[]`。你可以把它想象成一个容器。每个元素 ,`table[i]`也是一个参考。要使其工作，您必须将其指向类型对象的[实例](http://en.wikipedia.org/wiki/Instance_%28computer_science%29)`Entry`。在您的代码`table[i]=null`中意味着这些引用没有指向任何内容。它们被称为空指针。空指针的调用方法是非法的。这就是为什么您的代码`NullPointerException`在我上面提到的地方报告的原因。

因此，您所要做的就是替换`table[i]=null`为`table[i]=new Entry<K,V>()`. 该`new`命令执行**实例化**，它分配物理内存来制作对象的副本。请注意，这只是`Entry`执行初始化 an 的代码的时间。实例化后，对该实例的以下函数调用变得合法。虽然从逻辑上讲，该实例表示的*哈希槽*仍未被占用。

我认为您混合了`Entry`对象的逻辑角色和机器表示。an 的逻辑作用`Entry`是表示一个哈希槽。但是它所做的所有花哨的工作都会失败，除非机器通过实例化来生出它。

# visual-c++ - C++ MFC滚动条不能滚动

> ID：14972566
> 
> 赞同：0
> 
> 时间：2013-02-20T04:57:19.100
> 
> 标签：visual-c++, mfc

我正在尝试为我的应用程序实现放大功能。这个想法是当我选择放大时，图形应该水平扩展 2 倍大，这样只有一半的图形会显示在窗口中，而不管窗口大小，都需要滚动才能看到另一半。

我有一个缩放因子的缩放变量。然后在 onDraw(CDC &pDC) 中：

```
//...set pen and others...
CRect rect;
GetClientRect(rect);
for (int x=0; x < zoomFactor*rect.Width(); x++)
    //....draw the graph 
```

然后在 onToolsZoomin() 中：

```
void CMyGraphView::OnToolsZoomin()
{
    zoom *= 2;
    CRect rect;
    GetClientRect(rect);
    CSize sizeTotal;
    sizeTotal.cx = zoom*rect.Width();
    sizeTotal.cy = 0;
    SetScrollSizes(MM_TEXT, sizeTotal);
    this->RedrawWindow();
} 
```

当我运行它时，我可以让窗口正确绘制图形的一半，并显示一个滚动条，指示仅显示图形的一半。但是当我尝试滚动它时，它会回到原始位置（左下角），并且图表的另一半不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:27:20.187

两个函数中的参数不相同。这可能是问题的第一个原因。你能把假设调用 OnToolsZoomin 的代码放进去吗？它是通过 WM_VSCROLL 还是 WM_HSCROLL 消息处理的？您的函数 OnToolsZoomin 是否被调用？你的滚动条是否正确初始化（滚动范围）？

# windows - 使用 CodeBlock 编译 GWEN

> ID：14972567
> 
> 赞同：0
> 
> 时间：2013-02-20T04:57:30.230
> 
> 标签：windows, user-interface, gcc, mingw, codeblocks

所以，我正在尝试在 Windows 中编译 Gwen，以用于我即将推出的项目。我从 Garry 的 GitHub 下载了源代码，并按照他的说明构建编译，然后将其导入 Code::Blocks 进行编译。我导入 .cbp 文件，开始编译，几分钟后我得到：

错误：未在此范围内声明“_asm”。

该错误来自包含#ifdef _WIN32 的行之后的一些代码。

确切文件：gwen.cpp，第 49 行。

更多信息：操作系统：Windows 7 64 位。编译器：来自 MinGW 的最新 gcc，4.7.2 (MinGW32)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:54:20.317

我认为这是因为 MinGW 不理解汇编程序，它应该是`asm`针对那个编译器的。我认为这是使用`_WIN32`而不是`WIN32`. 前者是平台，后者是API。

尝试将其更改为：

```
 void AssertCheck(bool b, const char* strMsg)
    {
        if (!b)
        {
            Msg("Assert: %s\n", strMsg);
#ifdef WIN32
            MessageBoxA(NULL, strMsg, "Assert", MB_ICONEXCLAMATION|MB_OK);
            _asm { int 3 }
#endif
        }
    } 
```

编辑：或者，您可以尝试[Gwork](https://github.com/billyquith/GWork)，这是 GWEN 的整理版本。

# xpath - XPATH 更好的方式来解析 xml

> ID：14972569
> 
> 赞同：3
> 
> 时间：2013-02-20T04:57:52.780
> 
> 标签：xpath, xml-parsing

解析此类 xml 的更好方法是什么：

```
<FindLicensesResponse xmlns="http://abc.com">
<FindLicensesResult>
    <Licensies>
        <ActivityLicense>
            <id>1</id>
            <DateIssue>2011-12-29T00:00:00</DateIssue>
            <ActivityType xmlns:s01="http://www.w3.org/2001/XMLSchema-instance" s01:type="ActivityType">
                <code>somecode1</code>
            </ActivityType>
            <ActivityTerritory xmlns:s02="http://www.w3.org/2001/XMLSchema-instance" s02:type="Territory">
                <code>somecode2</code>
            </ActivityTerritory>
            <ActivityLicenseAttachments />
        </ActivityLicense>
        <ActivityLicense>
            <id>2</id>
            <DateIssue>2011-12-21T00:00:00</DateIssue>
            <ActivityType xmlns:s01="http://www.w3.org/2001/XMLSchema-instance" s01:type="ActivityType">
                <code>somecode3</code>
            </ActivityType>
            <ActivityTerritory xmlns:s02="http://www.w3.org/2001/XMLSchema-instance" s02:type="Territory">
                <code>somecode4</code>
            </ActivityTerritory>
            <ActivityLicenseAttachments />
        </ActivityLicense>
    </Licensies>
</FindLicensesResult> 
```

我需要从每个 ActivityLicense 获取值：id、DateIssue 和内部 ActivityType：代码和内部 ActivityTerritory：代码。

现在我这样做：

```
CachedXPathAPI xpathAPI = new CachedXPathAPI();
Element nsctx = result.getSOAPPart().createElementNS(null, "nsctx");
nsctx.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:el","http://abc.com");
NodeList activityLicenses = xpathAPI.selectNodeList(result.getSOAPPart(),"//el:ActivityLicense", nsctx);

for (int i = 0; i < activityLicenses.getLength(); i++) {
    Node id = xpathAPI.selectSingleNode(activityLicenses.item(i), "//el:id", nsctx);
    Node dateIssue = xpathAPI.selectSingleNode(activityLicenses.item(i), "//el:DateIssue",nsctx);

    System.out.println("id: " + id.getTextContent());
    System.out.println("dateIssue: " + dateIssue.getTextContent());
} 
```

但我无法从 ActivityType/code 和 ActivityTerritory/code 获取值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:12:06.497

看看这个解决方案

```
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.InputStream;

import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathFactory;

public class StringTest {

public static void main(String[] args) throws Exception {
    String xml = "";
    java.util.Scanner sc = new java.util.Scanner(new File("xml.xml"));
    while(sc.hasNextLine()){
        xml+=sc.nextLine();
    }
    javax.xml.parsers.DocumentBuilderFactory dbFactory = javax.xml.parsers.DocumentBuilderFactory.newInstance();
    javax.xml.parsers.DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    InputStream is = new ByteArrayInputStream(xml.getBytes());
    org.w3c.dom.Document doc = dBuilder.parse(is);
    doc.getDocumentElement().normalize();
    XPath xpath = XPathFactory.newInstance().newXPath();

    org.w3c.dom.NodeList nodeList = doc.getElementsByTagName("ActivityLicense");
    for(int i=0;i<nodeList.getLength();i++){
        org.w3c.dom.Node node = nodeList.item(i);
        System.out.println(xpath.evaluate("ActivityTerritory/code/text()", node, XPathConstants.STRING));
    }
}
} 
```

# java - Eclipse 检查样式和格式化程序

> ID：14972571
> 
> 赞同：0
> 
> 时间：2013-02-20T04:57:56.047
> 
> 标签：java, eclipse, eclipse-plugin

有混乱。

对于我的项目，我创建了自己的`Formatter`和`checkstyle`.

**示例：-格式化程序**

Formatter 中有一个`Brace`标签，所以我做了两个更改。

支撑位置：-

*类/接口 ..NextLine*

*构造函数声明..下一行*

写了一些代码后，我没有遵循格式化规则。

那为什么我`checkstyle`没有显示任何类似的消息`"Brace should be next line"`。

目前我正在使用我自己的风格和以前使用`Sun Checks(eclipse)-global`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:21:35.887

Checkstyle 和 formatter 是两个不同的东西。您的格式化程序可以帮助遵守您在 checkstyle 配置中定义的规则，但您的 checkstyle 配置不使用格式化程序来定义其规则。

我不记得“Sun Checks(eclipse)-global”规则集在左大括号周围的空格方面定义了什么，但无论如何您可能想要定义自己的规则。

*   右键单击您的项目，选择“属性”
*   转到“Checkstyle”，然后打开“Local Check Configurations”选项卡
*   点击“New...”，将组合留在“Internal Configuration”上并输入一个名称（比如“Sample”），点击“OK”
*   返回“主”选项卡，在组合中选择“示例 - （本地）”，点击“配置...”

您可以在此处配置自己的自定义检查样式规则集。例如，如果“左花括号”与其块的签名在同一行而不是在新行上，则为了制定一个规则，将在编辑器中标记错误：

*   展开“块”
*   双击“左花括号放置”
*   选择“eol”强制大括号位于行尾并点击“OK”
*   再次点击“确定”返回项目属性的主窗口
*   确保勾选了“checkstyle active for this project”复选框

您可以为您的项目配置很多自定义规则，请参阅[checkstyle 的文档](http://checkstyle.sourceforge.net/config.html)以获取帮助。

**[编辑**：我写完这篇文章后的一个想法......也许你没有看到带有“Sun checks(eclipse)”基本配置的警告的事实来自我上面概述的最后一点：确保“checkstyle active for此项目”复选框在您的项目属性中打勾**]**

# asp.net-mvc - 如何将 img 标签和 div 标签并排放置？

> ID：14972572
> 
> 赞同：0
> 
> 时间：2013-02-20T04:57:59.570
> 
> 标签：asp.net-mvc, html, tags, image

我正在尝试`div`在我的旁边放置一个`img tag`，但`div`正在显示在下方`img tag`，但我想要它在旁边，我们怎么能`img and div tag`放在彼此旁边

```
 <img usemap="#ChartImageMap" src="@Url.Action("GetChart", "Home")" alt="Asp.Net Char" style="width:450px;height:300px;border-width:0px;" />
 <div id="map" style="height:300px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:00:10.120

您希望 div 内联显示：

```
<div id="map" style="display:inline; height:300px;"></div> 
```

你也可以只使用一个跨度：

```
<span id="map" style="height:300px;"></span> 
```

# c++ - C++ 静态转换

> ID：14972576
> 
> 赞同：4
> 
> 时间：2013-02-20T04:58:23.443
> 
> 标签：c++, static-cast

有人可以为我解释这个小代码片段吗？

鉴于：

```
int a[3] = {2,3,4}; 
```

为什么以下评估为真？

```
static_cast<void *>(a) == static_cast<void *>(&a); // Why is this true? 
```

这就是说`address of a`的一样`a`吗？如果是这样，为什么这是真的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:00:15.077

这是因为变量`a`的地址与数组的第一个元素的地址一致`a`。当我们说“数组的第一个元素的地址”时，您也可以想到哪个`a`更清楚）。`&a[0]`

另一个例子，

```
struct X
{
    int i;
};

X x; 
```

这里变量`x`的地址也与`x.i`（聚合的第一个元素）的地址一致，所以会打印`1`：

```
std::cout << (&x == &(x.i)) << std::endl; //1 
```

所以在你的情况下，`&a`就像`&x`，和`a`（或`&a[0]`）就像`&(x.i)`。

请注意，在 C++中`a`，`x`两者都称为聚合（请参阅我的回答：[什么是聚合？](https://stackoverflow.com/questions/5666321/what-is-assignment-via-curly-braces-called-and-can-it-be-controlled)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:26:32.523

在几乎所有情况下，数组的名称都会衰减为指向数组第一个元素的指针。所以在 中`static_cast<void*>(a)`，`a`衰变为`&a[0]`; 它的类型是“指向 int 的指针”。该表达式的计算结果为数组第一个元素的地址。然而`static_cast<void*>(&a)`，`&a`在 中是数组本身的地址；它的类型是“指向 3 个 int 数组的指针”。这就是这里需要强制转换的原因：没有强制转换的两个表达式将具有不同的类型，并且无法进行比较。两者都可以转换`void*`和比较。所以这段代码说明的是数组的第一个元素的地址与数组的地址相同，*即*前面没有填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:10:59.253

数组的名称通常计算为数组第一个元素的地址，因此数组和 &array 具有完全相同的值。

但是，它们是不同的类型。对于以下数组：

```
int a[8]; 
```

a+1 是数组 a + sizeof(int) 的地址，但 &a+1 将是数组 a + 8 * sizeof(int) 的地址。

# google-maps - 谷歌地球还是谷歌地图？

> ID：14972577
> 
> 赞同：1
> 
> 时间：2013-02-20T04:58:24.830
> 
> 标签：google-maps, web-applications, google-earth

我有 3 周的时间来开发原型。基本上是一个车队管理系统，基于浏览器。它将在野外跟踪拖拉机，使用低数据速率卫星调制解调器定期报告车辆位置。

我正在努力掌握是否要使用 Google 地球或 Google 地图：

*   易于实施（PHP/HTML 5，从 MySql 数据库中提取数据）
*   跟踪每辆车，画一条线，切换显示每个位置的时间和/或距离
*   对用户的视觉吸引力（鉴于它是开放的国家，没有真正的地标）
*   可用的叠加层（降雨、温度数据、海拔等）
*   还有什么？

我对映射部分完全不知所措（我能做的事）。**谷歌地球/地图之一对我来说**是“最好的”吗？（不想发动宗教战争）

是否可以同时使用两者并在它们之间切换？

还有什么建议吗？我像疯了一样在谷歌上搜索，通常可能不会在进行更多研究之前发布这个问题，但dealine是可笑的。我每天工作 16 小时，需要我能得到的所有帮助和建议。我将不得不接受我现在做出的决定，我不想在缺乏知识的情况下做出仓促的决定。

提前致谢...

* * *

[更新] oic。Google 地球是 PC 应用程序，而 Gogole 地图是基于浏览器的。好吧，我想这可以回答这个问题。

* * *

[更新] 叹息！这是公司负责人使用 I-pad 但最终用户拥有 Windows 桌面的另一种情况。因此，他希望它基于浏览器“以防万一”，他想查看它（他可能会在第一周做两次，然后再也不做）。为什么它似乎总是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:48:01.873

要确定正确的解决方案，您首先需要确定应用的目标受众。

*   基于网络的应用程序的用户是否会使用支持 Google 地球的台式机、iPad 或移动设备？
*   有意向的用户会使用位于数据中心的大屏幕（谷歌地球或谷歌地图可以使用）还是现场的远程用户（谷歌地图可能更适合）？
*   并非所有移动设备都支持 Google 地球应用程序，并且移动设备的功能集有限。
*   另一方面，Google Maps API 将在几乎所有网络浏览器上运行，适用于多种设备。

查看详细信息：

1.  移动版 Google 地球 [http://www.google.com/earth/explore/products/mobile.html](http://www.google.com/earth/explore/products/mobile.html)

2.  谷歌手机地图 [http://www.google.com/mobile/maps/](http://www.google.com/mobile/maps/)

另请注意，如果您使用[Google Earth API](https://developers.google.com/earth/)，您可以轻松地将 Earth 和 Maps 混搭在单个 Web 应用程序中，但这同样需要那些支持 Google Earth 客户端的平台。

这是一个示例演示，供您试用： ![Google 地球 API 演示缩略图](../Images/7a553d2d56a6a96ee3706881d16994b6.png)

[http://earth-api-samples.googlecode.com/svn/trunk/demos/drive-simulator/index.html](http://earth-api-samples.googlecode.com/svn/trunk/demos/drive-simulator/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T10:08:21.720

未来证明您的应用程序。我的印象是 Google 地球即将淘汰。它几乎没有维护，并且浏览器制造商积极阻止使用这些插件，这只是时间问题。

如果您选择使用 Google 地图工具，请仔细查看 Google Maps。虽然谷歌目前提供 3D 版本的谷歌地图，但应用程序开发人员还不能使用它。我们仍然坚持使用 2D 地图。

但是，我预计一旦允许 3D 应用程序，地图 API 将不会发生巨大变化。

我是使用 Google Earth API (planetinaction.com) 的专家，我已尽可能从 Google Earth 转移到 Google Maps。

作为中间解决方案，您可以构建基于地图的应用程序，但通过弹出 Google 地球插件允许 3D 视图选项。这样可以将 Google 地球的依赖性降至最低。

# jquery - 如何使用 jquery 锁定黑莓中的触控板？

> ID：14972578
> 
> 赞同：1
> 
> 时间：2013-02-20T04:58:30.413
> 
> 标签：jquery, jquery-plugins, blackberry, ide

有没有办法通过锁定触控板一段时间来阻止我的用户在黑莓中使用触控板？

我需要使用 Jquery 来完成...

我已经使用 jquery 暗示了插件[JqueryblockUI](http://www.malsup.com/jquery/block/)，但我只是显示加载消息，但从不阻止用户操作，尤其是“触控板”..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:53:17.553

通过阻止鼠标移动事件尝试[JqueryblockUI](http://malsup.com/jquery/block/)插件。

或者插件本身会锁定用户的 UI。用户可以使用触控板滚动，但点击事件将被阻止..！

# java - 数字后跟z^3的Java正则表达式？

> ID：14972581
> 
> 赞同：0
> 
> 时间：2013-02-20T04:58:57.840
> 
> 标签：java, regex

我想检查一个字符串是否与 az^3 形式匹配，其中 a 是任何整数。我尝试了以下方法：

```
str.matches("\\d* z^3")

str.matches("\\d* z\^3")

str.matches("^(\\d* z^3)$")

str.matches("^(\\d* z\^3)$")

str.matches("\\d* (z^3)")

str.matches("\\d* (z\^3)") 
```

这真让我抓狂。:-( 我已经尝试了所有可能的正则表达式教程并搜索了示例，但我仍然无法提出解决方案。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T05:00:14.093

您需要在 Java 中转义反斜杠

```
str.matches("\\d+z\\^3"); 
```

# php - 如何从 PHP 中跳过致命错误

> ID：14972582
> 
> 赞同：0
> 
> 时间：2013-02-20T04:58:58.540
> 
> 标签：php

这是一个演示代码，其中`line 6`有一个函数`find()`实际上这个函数不存在，当我运行这个文件时出现错误
`Fatal error: Call to undefined function find() in C:\xampp18\htdocs\demo\exp.php on line 6`
我的问题是这是否可能`PHP`处理这种类型的错误，即想要打印`Line 2: 5`在第一个 if 之后堵塞。提前致谢。

```
<?php 
$a=10;
if(true)
{
    echo "Line 1: ".$a/find();
}

if (true)
{
    $b=2;
    echo "<br>Line 2: ".$a/$b;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:04:40.463

这不是个好主意。使用.检查是否`find()`存在呢？`function_exists`例子：

```
<?php 
$a=10;
if(true) {
    echo "Line 1: " . (function_exists('find') ? $a/find() : $a);
}

if (true) {
    $b=2;
    echo "<br>Line 2: ".$a/$b;
}
?> 
```

# linux-kernel - '/dev' 中的文件如何匹配 Linux 的设备型号？

> ID：14972584
> 
> 赞同：3
> 
> 时间：2013-02-20T04:59:31.553
> 
> 标签：linux-kernel, linux-device-driver, embedded-linux

这是我对打开文件进行读/写的理解。

在应用层，我可以调用该`fopen()`函数。

该`fwrite()`函数将调用系统调用`open()`。

操作系统收到`open()`调用后，会将命令传递给VFS（虚拟文件系统）。

VFS 查找文件名，包括所需的任何目录并进行必要的访问检查。

如果这是在 RAM 缓存中，则不需要磁盘访问。如果没有，VFS 会向可能是 EXT4 的特定文件系统发送读取请求。

然后 EXT4 文件系统驱动程序将确定该目录位于哪个磁盘块中。然后它将向磁盘设备驱动程序发送读取命令。

* * *

所以现在假设我想读取连接到板上的*i2c 设备 A。*并且文件目录是*/dev/i2c/A*

*   是否有所有设备的主要编号？例如，Linux 操作系统将 180 设置为 USB 的主编号。那么在设备方​​面，每个 USB 设备中是否有一个主编号 180？

*   如果第一个问题的答案是否定的，那么Linux操作系统如何确定*设备A*是哪种类型，只是根据文件目录吗？

*   我认为第二个问题的答案可能是：在引导初始化阶段，某些代码已经使用 export() 之类的方法将该端口挂载到文件系统？所以事实上，在启动阶段之后，文件目录*/dev/i2c/A*就存在在那里，并且它与 i2c 设备的主设备号绑定。所以当我想打开 dev/i2c/A 时，操作系统会为我找到正确的 i2c 驱动程序，而不是 SPI 或 USB 驱动程序。我不确定这部分，我需要更多信息。

*   当设备在启动阶段后立即安装到文件系统时，会发生上述情况。那么如果我有一个 USB 会发生什么，这个 USB 插入后如何以正确的主编号 180 安装到文件系统？我猜在安装阶段开始之前插入USB时会有一个中断？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T23:28:27.830

请参阅：[热插拔文档](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/driver-api/usb/hotplug.rst?id=HEAD)。如果您运行示例代码，您可以看到`netlink`在添加/删除设备时发送了一个事件`USB`。这是[驱动模型](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/driver-api/driver-model?id=HEAD)的一部分。每个驱动程序都应附加到一个`BUS`; 这可以是`platform`, `USB`, `I2C`, `SPI`,`PCI`等。同样，在 中`sysfs`，将有用于识别特定设备的条目。通常[`I2C`](http://en.wikipedia.org/wiki/I%C2%B2C)可以使用地址来识别特定的客户端/从属芯片。**驱动模型**还便于挂起、恢复、有序关闭等。

中的文件`/dev/`由用户空间程序`udev`或`mdev`用户空间程序创建。它们将名称与设备节点（主要、次要、字符/块）相关联。您可以使用`sysfs`和/或您的`udev`脚本根据`netlink`信息创建您想要的设备名称；其中大部分可用于`udev`脚本。

**编辑：**对于`i2c`总线主驱动程序，通过运行`probe`^(Note 1)来发现设备的地址。设备与具有表的特定驱动程序相关联。例如，[stargate 机器文件](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/mach-pxa/stargate2.c;hb=HEAD)将地址与驱动程序`imote2_i2c_board_info`相关联。`i2c`设备也有类似的表`SPI`。`Platform`^(注 2)设备以`platform_add_devices()`. `USB`和`PCI`设备由设备的类似`BUS`特定 ID 标识。通常一个机器文件（或最近`device tree`的）将两者关联起来。
另请参阅：[Linux 日志 - I2C 驱动程序 pt1](http://www.linuxjournal.com/article/7136)，[Linux 日志 - I2C 驱动程序 pt2](http://www.linuxjournal.com/article/7252)

我认为混淆的根源是**所有**驱动程序/设备都是您在`/dev/`目录中看到的那些。这不是真的。用户只能看到**顶级驱动程序。**许多 Linux 驱动程序/设备由*主*设备使用。它们可以形成设备的层次结构。通常只有**顶层**设备暴露给用户。有一些功能，例如`spi_write()`，更高级别的驱动程序可以用来通过`SPI`，`SPI`设备不接触`user space`。声音和媒体/电视采集卡经常使用`SPI`设备，但用户永远不知道这一点`BUS`存在并被使用。通常，多个卡供应商会在下面使用相同的芯片组。不是为每张卡编写驱动程序，而是只为卡编写一些**胶水**。然后一个通用的`chip`驱动程序集合与**胶水**一起使用，在层次结构的顶部将它们捆绑在一起；这是暴露于`user space`. 这也允许**智能^(TM)**芯片供应商创建系统集成商可以使用的良好驱动程序。

*注 1：*通过`i2c`探测，我的意思是`I2C`一条请求总线上所有注册地址的消息。我不确定**探针**是否是正确的`i2c`命名法。

*Note 2* `Platform` devices are [SOC](http://en.wikipedia.org/wiki/System_on_chip) devices. They have no associated BUS, so platform is a catch-all. Typically, `platform` devices are integrated with the CPU (SOC stands for system on chip).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:14:30.403

每个设备都有一个主要和次要编号。您可以通过执行来查看它们 `ls -n /dev` 对于某些驱动程序，例如磁盘，主要数字是硬编码的。对于其他人来说，它是动态的。次要编号可以在运行时发现设备时动态分配，而不仅仅是在启动时。内核维护一个内部设备切换表，将开发号映射到正确的驱动程序。

# javascript - 从 iframe 访问父窗口元素

> ID：14972587
> 
> 赞同：5
> 
> 时间：2013-02-20T04:59:45.727
> 
> 标签：javascript, iframe

*   我有一个`customer.jsp`带有`iframe`.
*   `iframe`有一个按钮。单击按钮时，我需要访问页面内的对话框`customer.jsp`。
*   我尝试过`window.parent.document.getElementById('formDialog');`，但正在获得`null`价值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T05:14:16.667

```
window.parent.document.getElementById('target'); 
```

两个资源都应该在同一个来源

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T05:06:23.490

跨域资源无法在 iframe 和父文档之间进行通信。只有当 iframe 和包含页面来自相同的主机、端口和协议时，它才会起作用 - 例如[http://example.com:80/1.html](http://example.com:80/1.html)和[http://example.com:80/2.html](http://example.com:80/2.html)

```
 Assuming both resources are from the same origin 
```

在 iframe 中，window.parent 指的是父文档的全局对象，而不是文档对象本身。我相信你需要使用`parent.document.getElementById('formDialog')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:04:43.637

您可以通过以下方式访问父窗口元素`parent.document.getElementById('formDialog');`

如果你得到 null 你是否能够在该 iframe 父级的上下文中获取该元素？您是否引用了正确的 ID 和正确的父级？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:26:02.560

尝试这个。希望这可以帮助。假设我通过点击 iframe 中的按钮获得 CallParentFunction。

```
function CallParentFunction(){
     if (top && top.opener && top.opener.top) {
        top.opener.document.getElementById('formDialog'); 
     }
      else {
        top.document.getElementById('formDialog'); 

     }
} 
```

# php - .htaccess 被忽略？不像它应该的那样重定向

> ID：14972588
> 
> 赞同：0
> 
> 时间：2013-02-20T04:59:45.903
> 
> 标签：php, .htaccess, url, url-rewriting

好的，我正在尝试使用 Lando (landocms.com)，并且正在尝试使用漂亮的 urls 选项。

基本上默认情况下，Lando 会创建如下链接：domain.com/index.php/page。据说，有一种方法可以删除 index.php，使链接变为：domain.com/page。我按照指示创建了一个 .htaccess，但是它不起作用。

这是我正在使用的 .htaccess：

```
<IfModule mod_rewrite.c>
  RewriteCond   %{REQUEST_FILENAME}   !-f 
  RewriteCond   %{REQUEST_FILENAME}   !-d 
  RewriteRule   ^(.*)$                index.php/$1  [L]
</IfModule> 
```

我尝试了很多变体，/index.php/，index.php？还有更多，但没有工作。根据 HostGator 的说法，一切都应该没问题。有什么想法吗？我觉得我快疯了哈哈。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:09:39.383

为 CMS 重写是一种两层方法。首先，你需要设置你的`.htaccess`（我在这里为你放了一个更安全的）：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .+ index.php [QSA,L] 
```

然后，LandoCMS 允许您`index.php`通过在管理面板中打开适当的设置来从生成的地址中删除。有关更多信息，请参阅[此链接](http://landocms.com/docs/pretty-urls/)。

如果`.htaccess`我给你的内容不起作用，那么只需使用 CMS 给你的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:59:15.277

您想`index.php`从任何 URL 中删除该部分，但`index.php`仍然通过处理传入的友好 URL

```
RewriteEngine On

# remove index.php and redirect client
RewriteCond %{ENV:REDIRECT_SEO} ^$
RewriteRule ^/?index.php/(.*) /$1 [R,L]

# process friendly URL
RewriteCond %{REQUEST_URI} !^/index.php/
RewriteRule .+ /index.php/$0 [E=SEO:1,L] 
```

环境设置`E=SEO:1`可防止无限循环。

# hibernate - 休眠未找到会话中附加的实体

> ID：14972591
> 
> 赞同：-1
> 
> 时间：2013-02-20T04:59:51.920
> 
> 标签：hibernate, jpa

我正在使用 Spring MVC、Hibernate 和 MySQL。

我有一个基本上可以做到这一点的代码

```
@Transactional("transactionName")
public Product find(List<String> allProductNames){
     for(String product: allProductNames){
         //find product with productName
         Product product = em.createQuery(hql).getSingleResult());
         if(product == null){
            //create product object
             em.persist(newProduct)
         }
     }
} 
```

由于保存和搜索是同一事务的一部分，并且在退出该方法之前不会提交任何内容。对数据库的查询以查找具有 productName 的产品始终返回 null。如何强制休眠也搜索会话中的附加对象？

我试过了

```
SessionImpl session = (SessionImpl) em.getDelegate();
Query query = session.createQuery("searchproductnamequery")
                     .setParameter("PRODUCT_NAME","iPhone");
boolean found = session.contains(query); 
```

但以上似乎也返回错误。处理此类情况的正确方法是什么？默认情况下不应该休眠搜索附加的会话对象和数据库吗？

我不想提交的原因是因为我想在提交之前更新产品的计数属性。

我可以创建一个产品地图，然后在最后提交，但是在 100,000 个产品名称列表中循环两次非常昂贵。

如果我知道我可以使用 session.get(id) 的 id 但我如何通过属性名称进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:21:47.447

保存后的 em.flush() 成功了。

# python - 在 python django 查询集中排除周末

> ID：14972601
> 
> 赞同：0
> 
> 时间：2013-02-20T05:00:55.577
> 
> 标签：python, django

我想过滤一些不包括周末的日期。我已经有周末天数的列表

我想创建一个过滤这些天的查询。我在模型中有一个日期字段

```
Class Sample(models.Model)
    date=models.DateField()

weekends = [2, 3, 9, 10, 16, 17, 23, 24]
Sample.objects.filter(date__month=month).exclude(date__day=weekends) 
```

我可以使用 for 循环来做到这一点，但代码会很糟糕。我想知道是否有任何可用的单行过滤技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:16:39.807

您可以使用*in*运算符：

```
Sample.objects.filter(Q(date__month=month)).exclude(Q(date__day__in=weekends)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T05:17:58.547

您可以使用 IN 子句。

```
Sample.objects.filter(date__month=month).exclude(date__day__in = weekends) 
```

来自 DateField 的 django 源代码：

```
def get_prep_lookup(self, lookup_type, value):
    # For "__month", "__day", and "__week_day" lookups, convert the value
    # to an int so the database backend always sees a consistent type.
    if lookup_type in ('month', 'day', 'week_day'):
        return int(value) 
```

所以理想情况下`__day`应该工作。您还可以尝试将字段名称从更改`date`为类似`created_date`避免命名空间冲突的名称吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:44:25.853

最后，我想通了。`exclude(date__day__in=weekends)`不起作用。我不知道使用 in 查询时复杂的查找是否会出错。

所以我所做的是使用那些日子创建一些日期。并做了类似的事情

```
Sample.objects.filter(Q(date__month=month)).exclude(Q(date__in=weekends)) 
```

# c# - 使用并发字典 - 线程安全集合修改

> ID：14972612
> 
> 赞同：7
> 
> 时间：2013-02-20T05:02:08.627
> 
> 标签：c#, concurrency

最近我在使用通用字典时遇到了以下异常

> 发生了 InvalidOperationException。集合已修改

我意识到这个错误主要是因为我使用的静态字典的线程安全问题。

一点背景：我目前有一个应用程序，它有 3 种与此问题相关的不同方法。

1.  `foreach`方法 A 使用并返回一个值遍历字典。
2.  方法 B 将数据添加到字典中。
3.  方法 C 更改字典中键的值。

有时在遍历字典时，还会添加数据，这就是导致此问题的原因。`foreach`我在迭代字典内容的代码部分中不断收到此异常。为了解决这个问题，我用 替换了通用字典，`ConcurrentDictionary`这里是我所做的详细信息。

目标：我的主要目标是完全消除异常

**对于方法 B**（向字典添加新键），我替换`.Add`为`TryAdd`

**对于方法 C**（更新字典的值），我没有做任何更改。代码的粗略草图如下：

```
 static public int ChangeContent(int para)
  {
      foreach (KeyValuePair<string, CustObject> pair in static_container)
      {
             if (pair.Value.propA != para ) //Pending cancel 
             {
                pair.Value.data_id = prim_id;    //I am updating the content
                return 0;

             }
      }
     return -2;
  } 
```

**对于方法 A** - 我只是在字典上进行迭代，这是运行代码停止的地方（在调试模式下），Visual Studio 告诉我这是发生错误的地方。我使用的代码类似于以下

```
 static public CustObject RetrieveOrderDetails(int para)
    {
            foreach (KeyValuePair<string, CustObject> pair in static_container)
            {                   
                if (pair.Value.cust_id.Equals(symbol))
                {
                    if (pair.Value.OrderStatus != para) 
                    {
                       return pair.Value; //Found
                    }
                }
            }
            return null; //Not found
    } 
```

这些更改是否会解决我遇到的异常。

**编辑：**

它在[此页面上](http://arbel.net/2013/02/03/best-practices-for-using-concurrentdictionary/)声明该方法`GetEnumerator`允许您在写入的同时遍历元素（尽管它可能已过时）。这和使用 foreach 不一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:08:31.563

对于元素的修改，一种选择是使用 for 循环手动迭代字典，例如：

```
Dictionary<string, string> test = new Dictionary<string, string>();
int dictionaryLength = test.Count();

for (int i = 0; i < dictionaryLength; i++)
{
    test[test.ElementAt(i).Key] = "Some new content";
} 
```

但请注意，如果您还添加到 Dictionary 中，则必须适当地增加 dictionaryLength（或者如果您移动元素则减少它）。

根据您正在做什么，如果顺序很重要，您可能希望使用 SortedDictionary 代替。

您可以通过在每次迭代中调用 test.Count() 显式更新 dictionaryLength 来扩展它，并且还可以使用包含您已经修改的键列表的附加列表等等，如果有丢失任何键的危险，它真的取决于你在做什么以及你的需求是什么。

您可以使用 test.Keys.ToList() 进一步获取密钥列表，该选项的工作方式如下：

```
Dictionary<string, string> test = new Dictionary<string, string>();
List<string> keys = test.Keys.ToList();
foreach (string key in keys)
{
    test[key] = "Some new content";
}

IEnumerable<string> newKeys = test.Keys.ToList().Except(keys);

if(newKeys.Count() > 0)
    // Do it again or whatever. 
```

请注意，我还展示了一个示例，说明如何确定在获取初始键列表和完成迭代之间是否添加了任何新键，以便您可以循环并处理新键。

希望这些选项中的一个适合（或者您甚至可能想要混合和匹配键上的循环，例如在您进行时更新它而不是长度） - 正如我所说，这与您正在尝试的确切内容一样多尽可能多地做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:35:13.463

在`foreach()`尝试将容器复制到新实例之前

```
var unboundContainer = static_container.ToList();
foreach (KeyValuePair<string, CustObject> pair in unboundContainer) 
```

另外我认为`Value`从线程安全的角度来看更新属性是不正确的，请重构您的代码以`TryUpdate()`代替使用。

# javascript - 为什么这个正则表达式执行缓慢？

> ID：14972613
> 
> 赞同：1
> 
> 时间：2013-02-20T05:02:10.170
> 
> 标签：javascript, regex

所以我有一个识别 URL 的正则表达式：

```
/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/ 
```

但是，当我使用它来识别用户输入的 url 时，简单地使用`.test`会大大降低页面速度，即使根据[MDN](http://developer.mozilla.org)，它[应该比 exec 更快](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec#Description)。我是否使用过时的正则表达式测试方法？有没有我不知道的更快的方法？还是我的正则表达式真的很长很复杂？

这是一个[JSFiddle](http://jsfiddle.net/4sVX9/)。

编辑：在 Chrome 中需要 20.7 秒，在 Internet Explorer 9 中 v24 1:48.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:29:38.430

因此，似乎正则表达式仅在处理已发布信息的 url 时才会滞后，例如在 jsfiddle url`Product.aspx?Item=N82E16811139009`中。当 url 的那部分被删除时，正则表达式会正确、快速地执行。

但是，删除最后一个星号`([\/\w \.-]*)*`会使正则表达式预执行不正确，因此`([\/\w \.-]*)`不能选择使用。

相反，为了使正则表达式能够处理带有发布信息的 url，需要删除最后一部分：

```
/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/ 
```

至

```
/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*/ 
```

这是因为正则表达式旨在检测 url 末尾的文件类型或反斜杠，而不是问号和发布的信息。删除最后一部分可以解决问题，并且正则表达式可以正确**快速**地运行。

# iphone - 将字符串复制到动态 ui 标签中

> ID：14972614
> 
> 赞同：-3
> 
> 时间：2013-02-20T05:02:21.717
> 
> 标签：iphone, ios, cocoa-touch

```
 NSString *city2=[[NSString alloc]init];
  city2=[NSString stringWithFormat:@"the city orlando"];
  NSString *trimmedString = [city2 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
  NSLog(@"%@", trimmedString)

   trimmedString=[NSString stringWithFormat:@"%@, ",trimmedString];

   CGSize constraint4 = CGSizeMake(650, 2000.0f);

  CGSize size4 = [city2 sizeWithFont: [UIFont fontWithName:@"Helvetica" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
   city = (UILabel *)[cell viewWithTag:115];

   [city setNumberOfLines:0];
   city.frame = CGRectMake(150,codetype.frame.size.height+codetype.frame.origin.y, size4.width, size4.height);          
   [city setText: [NSString stringWithFormat:@"%@",trimmedString]]; 
```

我只得到城市而不是奥兰多城市*，这是我项目的一小部分*。

实际上我正在将字符串分配给标签。但我没有得到标签中的总字符串。这里 line3 是`UILabel`高于城市标签的另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:18:04.417

你得到这个 ->**城市......**而不是这个 ->**城市奥兰多，**？只需增加`size4.width`你的`UILabel`in the `city.frame`line，就像这样`size4.width + 100.0f`。这是我的代码版本。

```
NSString *city2 = @"the city orlando";
NSString *trimmedString = [city2 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];                                                                                                 
NSLog(@"%@", trimmedString);

trimmedString=[NSString stringWithFormat:@"%@,",trimmedString];

CGSize constraint4 = CGSizeMake(650, 2000.0f);

CGSize size4 = [city2 sizeWithFont: [UIFont fontWithName:@"Helvetica" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
city = [[UILabel alloc] init]; //(UILabel *)[cell viewWithTag:115];

[city setNumberOfLines:0];
city.frame = CGRectMake(150, 150, size4.width + 100.0f, size4.height + 10.0f);

[city setText: [NSString stringWithFormat:@"%@",trimmedString]];  

[self.view addSubview:city]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:21:18.683

整个字符串在标签中不可见，因为 的宽度`UILabel`小于字符串的宽度。所以增加`UILabel`代码的宽度就可以了。

替换此代码

```
city.frame = CGRectMake(150,codetype.frame.size.height+codetype.frame.origin.y, size4.width, size4.height); 
```

经过

```
city.frame = CGRectMake(150,codetype.frame.size.height+codetype.frame.origin.y, size4.width+100, size4.height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:21:27.300

看起来`city`标签太小以适合文本。可能会有不同的问题，但是当您使用它进行计算时，`city`标签可能没有设置**Helvetica 12**`size4`。另请注意，您获得的是 city2 的大小，但将文本设置为 trimmedString。

```
CGSize size4 = [city2 sizeWithFont: [UIFont fontWithName:@"Helvetica" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap]; 
```

您可以通过以下方式查看

```
[city setColor:[UIColor redColor]]; 
```

看看会发生什么。

或者，检查它快速更换

```
CGSize size4 = [city2 sizeWithFont: [UIFont fontWithName:@"Helvetica" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
city = (UILabel *)[cell viewWithTag:115]; 
```

和

```
city = (UILabel *)[cell viewWithTag:115];
CGSize size4 = [trimmedString sizeWithFont: city.font constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:27:56.503

这段代码有很多问题，但主要问题似乎在于您计算字符串的大小。你得到的大小，`city2`但随后将标签的文本设置为`trimmingString`. 此外，用于计算的字体可能与标签的字体不同。使它们相同。

这是您的代码，其中包含大量清理和修复：

```
NSString *city2 = @"the city orlando";
NSString *trimmedString = [city2 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSLog(@"%@", trimmedString)

trimmedString = [NSString stringWithFormat:@"%@, ", trimmedString];

CGSize constraint4 = CGSizeMake(650, 2000.0f);

UIFont *font = [UIFont fontWithName:@"Helvetica" size:12];
CGSize size4 = [trimmedString sizeWithFont:font constrainedToSize:constraint4 lineBreakMode:NSLineBreakByWordWrapping];
city = (UILabel *)[cell viewWithTag:115];

city.font = font;
[city setNumberOfLines:0];
city.frame = CGRectMake(150, codetype.frame.size.height + codetype.frame.origin.y,  size4.width, size4.height);

[city setText:trimmedString]; 
```

请避免对 的所有额外调用`stringWithFormat:`。

# ios - 在另一个 NSManagedObject 中使用自定义 NSManagedObject 数组

> ID：14972617
> 
> 赞同：0
> 
> 时间：2013-02-20T05:02:34.290
> 
> 标签：ios, nsmanagedobject

我有一个“记录”`NSManagedObject`类和“标题” `NSManagedObject`，

记录对象有 2 个属性，标题，`laTitle`两者都是“标题”ManagedObject 类型。

并且还需要这个“标题”对象作为其他`NSManagedObjects`与“记录”对象无关的对象，所以我不能使用关系，因为“标题”独立于“记录”对象。

除了将标题对象保存为记录对象和其他对象中的“二进制数据”之外，我还有其他方法吗？就像没有反向关系的多对多关系一样。

# c# - 使用 VSTest 代替 MSTest 运行单元测试用例

> ID：14972618
> 
> 赞同：13
> 
> 时间：2013-02-20T05:02:35.217
> 
> 标签：c#, xaml, tfs, visual-studio-2012, build-process

我在 TFS2010 服务器上有一个 x64 平台 C# 解决方案（VS2012）。我已将一个单元测试项目（也是 x64）附加到此解决方案并创建了一个构建定义。当我排队构建时，它会成功，但不会执行单元测试用例。这是因为 MSTest 是 32 位应用程序。因此，我决定自定义默认构建过程模板 (DefaultTemplate.xaml) 以调用 VSTest(VSTest.console.exe) 而不是 MSTest。这非常复杂，我无法将构建活动添加到 VSTest 的工具箱中。

有人做过这种定制吗？我还考虑了其​​他方法，例如配置 .runsettings 文件。我们是否有可以在 .runsettings 文件中添加的 VSTest 适配器接口？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-20T05:13:16.753

Executing unit tests through VSTest and publishing the test results through MSTest gave me a successful outcome. Given below is the Powershell script:

```
#  Get the UnitTest Binaries
$files = Get-ChildItem $TestAssembliesDir\*est*.dll

#  VSTest.console.exe path
$VSTestPath = 'C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe'

#  MSTest path
$MSTestpath = "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\mstest.exe"
#  Loop through the test assemblies and add them to the VSTestFiles

$VSTestFiles = ''  
foreach($file in $files)  
{   
    $VSTestFiles += "`"$file`"" 
    $VSTestFiles += " "
} 

#  Run the UnitTests using VSTest 
&$VSTestPath  $vstestplatform "/Framework:Framework45" "/InIsolation" $VSTestFiles "/logger:trx"

#  Get TRX files
$TrxFilesList = Get-ChildItem $TestResDir\*.trx
$TrxFiles = ''  
$loop = 1
foreach($file in $TrxFilesList)  
{   
    $TrxFiles = "$file" 
    # copy the trx file into a space-less named trx
    $newTrxFileName = "$BuildUri" + "_" + "$loop" + ".trx"

    copy-item $TrxFiles -destination $TestResDir\$newTrxFileName

    $loop = $loop + 1
    $newTrxFile += "$TestResDir\$newTrxFileName"
    $newTrxFile += " "
} 

#  specify MSTest arguments 
$mspubl = "/publish:"+$TeamProjColUri
$msteampr = "/teamproject:" + $TeamProj
$mspublbuild = "/publishbuild:" +$BuildUri
$mspubresfile = "/publishresultsfile:" +"`"$newTrxFile`""
#Publish test results through MSTest
&$MSTestpath  $mstestplatform $flavor $mspubl $msteampr $mspublbuild $mspubresfile 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T01:55:10.457

我也同样需要使用 VSTest.Console.exe 而不是 MSTest.exe 来编译 VS2012/.NET 4.5 x64 应用程序的 TFS2010 构建过程，同时等待升级到 TFS2012 开始。

我采用的方法是编辑构建脚本 XAML，删除现有的单元测试工作流，并将其替换为自定义工作流，该工作流构建 VSTest.Console.exe 参数，然后通过 InvokeProcess 执行 VSTest.Console.exe。然后，我确保在 finally 块中，无论测试结果如何，我们都使用构建服务器上的 VS2012 安装中的 MSTest.exe 将测试结果和代码覆盖率发布到 TFS。

不幸的是，我无法在答案中发布 XAML，因为它超过了字符长度，但我确实有一个文本文件，其中包含要在 DefaultTemplate.xaml 中替换的片段以及替换它的内容。该文件可以在[这里](http://users.tpg.com.au/kostat//BuildScriptSnippet.txt)找到。请注意，尽管这种方法有效，但它是一种 hack。

另一种选择是使用 NUnit 代替 MSTest 或 VSTest.Console，因为它支持 64 位二进制文​​件。本文解释了如何将 NUnit 集成到 TFS2010 构建脚本中，并提供了实现这一目标所需的工具和资源的链接[。](http://blog.ianbattersby.com/2012/01/04/tfsbuild-2010-nunit-integration/)NUnit 的唯一问题是代码覆盖率（需要另一个工具以及如何将这些结果发布到 TFS）和 MSTest 样式的集成测试，使用诸如 DeploymentItem 和诸如 TestContext 之类的属性，这就是为什么我选择使用的原因VSTest.Console.exe 方法。

从我读过的内容来看，TFS2012 提供了从构建脚本轻松集成到 VSTest.Console.exe 的功能，因此如果您升级到 TFS2012，可能不需要我记录的 VSTest.Console.exe hack。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:36:59.843

这不会直接回答您的问题，但可能会有所帮助。我为 TeamCity 做了类似的事情。我使用命令行调用 vstest.console.exe 并创建了一个 .runsettings 文件。

我将此[Microsoft 模板](http://msdn.microsoft.com/en-us/library/jj635153.aspx)用于运行设置文件。但是请注意，在我的机器上，第 5 行注释中提到的路径是相对于 .runsettings 位置的，而不是相对于 .sln 的。

如果您使用 vstest.console.exe 的 /logger:trx 选项，它将生成与 MSTest 相同格式的输出（有利于结果可视化）。

# javascript - 面向对象的 JavaScript 示例

> ID：14972622
> 
> 赞同：5
> 
> 时间：2013-02-20T05:02:57.063
> 
> 标签：javascript, html, css

我知道一般的面向对象编程原则，如封装、继承、多态、抽象等

但是现在想从 JavaScript 的角度来理解这些概念。有人可以举一个非常基本的示例并运行这些在 JS 上下文中的工作原理（封装、继承、多态性、抽象）

我在网上阅读了很多关于这些的内容，但这些文章让我更加困惑。

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T07:35:24.563

我将描述 Douglas Crockford 模式以模仿面向对象编程语言中使用的风格。它不使用原型继承。结果，它的效率略低，因为每个对象都必须存储对每个方法的引用。但它对于说明目的非常有用。

封装：

```
function MyClass (a, b)
{
    this.publicProperty = 1;
    var _privateProperty = 2;
    function _privateMethod () {
        // only private methods and privileged methods can call this
    };
    this.publicMethod = function () {
        // can access _privateProperty and call _privateMethod
    };
}
MyClass.classMethod = function () {
    // not tied to any instances
}; 
```

只需创建对象`var instance = new MyClass(a, b);`

遗产：

```
function DerivedClass(a, b, c) 
{
    // must explicitly call superclass constructor, like in Java
    MyClass.apply(this, arguments);

    this.anotherProperty = 3;
    function _anotherPrivateMethod() { };

    this.publicMethod = function () {
        // can access _privateProperty and call _privateMethod
    };
}
DerivedClass.classMethodMethod = function ()
{
    // not tied to any instances
}; 
```

JavaScript 中的多态性主要被 Duck Typing ( [http://en.wikipedia.org/wiki/Duck_typing](http://en.wikipedia.org/wiki/Duck_typing) ) 所取代。开发人员通常将方法/属性分组在对象下，您只需测试这些对象是否存在。例如，这就是检测新奇浏览器功能的方式。

抽象与多态性密切相关——只要有东西支持接口，你通常不会关心它在下面是如何工作的。因此，您可以下载一个 Javascript 库并根据其文档直接使用它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T05:51:36.463

我认为最有趣的是封装，因为很多人没有正确使用它。

让我们以一个简单的对象为例

```
var Person = function( firstName, lastName, isMr ) {
    var prefix = isMr ? "Mr." : "Mrs." ; 
    this.getFullName = function() { return prefix + " " 
                                       + firstName + " " + lastName }

}

 var p = new Person ("guy","mograbi", true);
 p.getFullName(); // => "Mr. guy mograbi"
// p.prefix ==> causes an error. 
```

**继承**- 只是扩展原型

```
 var Superhero = function(){
            Person.call(this);

  } 
```

然而，正确的继承本身就是一个问题。查看[https://stackoverflow.com/a/4985616/1068746](https://stackoverflow.com/a/4985616/1068746)

**多态性**- 非常简单，给定一个实现“getFullName”的新原型

```
var Child = function(){
    this.getFullName = function(){ return "not allowed to talk with strangers" }
} 
```

如果 a 是 Person，您将获得`function(a){ a.getFullName() }` 全名，如果 a 是 Child，您将获得“不允许..”。

**抽象**- 更像是一种类型安全的语言。 [https://stackoverflow.com/a/4082496/1068746](https://stackoverflow.com/a/4082496/1068746)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T05:08:16.907

您可以使用函数来定义单例对象

```
var apple = new function() {
    this.type = "macintosh";
    this.color = "red";
    this.getInfo = function () {
        return this.color + ' ' + this.type + ' apple';
    };
} 
```

如下所示使用它

```
apple.color = "reddish";
alert(apple.getInfo()); 
```

`new function(){...}`同时做两件事：定义一个函数（一个匿名构造函数）并用 new 调用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T05:08:23.800

查看以下链接：

1.  [Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)
2.  [面向对象的javascript基本概念](http://www.georgepaterson.com/2011/06/12/object-oriented-javascript-fundamental-concepts/)

# c# - 我是否应该通过将其设置为 null 来处理 Hashtable 或字符串之类的对象？

> ID：14972623
> 
> 赞同：1
> 
> 时间：2013-02-20T05:02:58.247
> 
> 标签：c#

我有一个带有字符串的哈希表。处理它们的最佳方法是什么？使用哈希表后，我应该调用 clear 然后将对象设置为 null 吗？或者只是将哈希表对象设置为 null 就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:19:01.447

其他人建议什么都不做，这大部分是真的。在经典的 C# 术语中，您无法处理它，并且将其设置为 null 也应该证明是不必要的。如果您允许，垃圾收集器将完成其工作。

*所以让它吧。*

我必须提供的一条建议将帮助您让垃圾收集器完成其工作，即将对象的生命周期限制为不超过您需要的时间。如果对象只需要为方法调用而存在，则将变量的范围和底层对象的生命周期限制为该方法，不要将其提升到可能存在更长时间的类成员。如果该类在任意长的时间内存在，则该会员国将与它一起生活。

声明变量并在您需要它的地方实例化对象，并且只在您需要它的地方实例化，并相信垃圾收集器会在您完成后的某个时候回收该内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:02:09.153

将变量设置为 null 并不能保证它会被垃圾回收。如果其他变量引用同一对象，则在引用计数变为零之前不会收集相关对象。

限制对象的范围会有所帮助，因为在对象超出范围后更有可能收集该对象。对于文件句柄等垃圾收集未处理的项目，实现 idisposable 确实更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:05:28.017

`HashTable`没有实现`IDisposable`所以你不能调用`Dispose`它，你可以分配对象`null`并**让垃圾收集器处理它**。您无法预测垃圾收集器何时收集它，尽管您可以强制垃圾收集器`GC.Collect`但不推荐。

您可能会看到：[垃圾收集的基础知识](http://msdn.microsoft.com/en-us/library/ee787088.aspx)

除此之外，您可以查看[`Dictionary<TKey, TValue> Class`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)哪个是`HashTable`.

# php - Doctrine2 findAll() 方法没有获取关联数据？

> ID：14972624
> 
> 赞同：0
> 
> 时间：2013-02-20T05:03:01.963
> 
> 标签：php, orm, doctrine, mapping, associations

我有一个非常简单的问题。目前我在`findAll()`方法之后使用 Doctrine2 的方法，`getRepository`并且我有一个简单的`OneToOne`关系设置（`Manufacturers`有一个`address_id`链接到`Addresses`基本内容的字段）。`Manufacturer`我正在尝试使用来自关联的数据的一个字段和其余字段填充一个表`Address`。

我在我的视图代码中这样做：

```
<?php foreach($instances as $instance) { ?>
<?php $address = $instance->address; ?>
  <tr>
    <td><?php echo $instance->name; ?></td>
    <td><?php echo $address->street; ?></td>
    <td><?php echo $address->city; ?></td>
    <td><?php echo $address->state; ?></td>
    <td><?php echo $address->zip; ?></td>
  </tr>
<?php } ?> 
```

`$instances`表中的每个条目在哪里`Manufacturers`。每个属性都是公开的，但出于某种原因，Doctrine2 不会将相关`Address`数据与对`findAll()` `Manufacturers`. 我究竟做错了什么？

这就是我用来获取数据的方法：

```
$instances = $this->doctrine->em->getRepository('Entities\Manufacturer')->findAll(); 
```

我是否需要以某种方式向 Doctrine 指定我也想获取相关数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:40:23.923

默认情况下，所有学说关联都是延迟加载的。Doctrine 使用代理对象使关联数据的延迟加载成为可能。对于每个字段，getter 都在代理类中创建。您只需要调用 getter 而不是直接访问公共属性。建议在实体中声明所有字段为私有并为它们定义 getter 和 setter。

# javascript - 带有 d3js 的简单多线图

> ID：14972627
> 
> 赞同：0
> 
> 时间：2013-02-20T05:03:14.933
> 
> 标签：javascript, graph, d3.js, multiline

我有以下数组

```
var data = [ 
             [{"time": 1, "value": 2.1}, {"time": 2, "value": 1.1}],{"time": 3, "value": 3.1}],
             [{"time": 1, "value": 5.3}, {"time": 2, "value": 0.1}, {"time": 3, "value": 6.1}]
           ]; 
```

我需要从整个数组中找出最大的时间和价值。不太工作的代码是

```
var x = d3.scale.linear()
    .domain([1, d3.max(data, function(d,i){ return d[i].time;})])
    .range([0, width]); 
```

出于某种原因，我得到的最大时间是 2，而不是 3。即使我使用更大的数据集和更多的点，我仍然没有得到实际的最大值。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:13:34.010

您的数据是一个或多个数组。如果您想要“最大值中的最大值”，则需要考虑嵌套。一种方法：

```
.domain([1, d3.max(data, function(arrayOfDs, i) {
  return d3.max(arrayOfDs, function(d, i) { return d.time; });      
})]) 
```

# python - Python 抽象类 - 如何阻止实例化？

> ID：14972631
> 
> 赞同：20
> 
> 时间：2013-02-20T05:03:30.643
> 
> 标签：python, naming-conventions, abstract-class

我来自 C# 背景，该语言具有一些内置的“保护开发人员”功能。我了解 Python 采用“我们都是成年人”的方法，并让开发人员负责认真仔细地编写代码。

也就是说，Python 建议私有实例变量使用前导下划线等约定。我的问题是，**除了在文档字符串中指定它之外，是否有将类标记为抽象的特定约定？** 我在 python 样式指南中没有看到任何特别提到抽象类命名约定的内容。

到目前为止，我可以想到 3 个选项，但我不确定它们是否是好主意：

1.  在类上方的文档字符串中指定它（可能会被忽略）
2.  在类名中使用前导下划线（不确定这是否被普遍理解）
3.  **在引发错误**`def __init__(self):`的抽象类上创建一个方法（不确定这是否会对继承产生负面影响，例如如果您想调用基本构造函数）

 **其中一个是不错的选择还是有更好的选择？我只是想确保其他开发人员知道它是抽象的，因此如果他们尝试实例化它，他们应该为任何奇怪的行为承担责任。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T06:49:15.803

如果您使用的是 Python 2.6 或更高版本，则可以使用标准库中的[抽象基类](http://docs.python.org/2/library/abc.html)模块来强制执行抽象性。这是一个例子：

```
from abc import ABCMeta, abstractmethod

class SomeAbstractClass(object):
    __metaclass__ = ABCMeta

    @abstractmethod
    def this_method_must_be_overridden(self):
        return "But it can have an implementation (callable via super)."

class ConcreteSubclass(SomeAbstractClass):
    def this_method_must_be_overridden(self):
        s = super(ConcreteSubclass, self).this_method_must_be_overridden()
        return s.replace("can", "does").replace(" (callable via super)", "") 
```

输出：

```
>>> a = SomeAbstractClass()
Traceback (most recent call last):
  File "<pyshell#13>", line 1, in <module>
    a = SomeAbstractClass()
TypeError: Can't instantiate abstract class SomeAbstractClass with abstract
methods this_method_must_be_overridden
>>> c = ConcreteSubclass()
>>> c.this_method_must_be_overridden()
'But it does have an implementation.' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T05:14:09.263

根据你的最后一句话，我会回答“只是记录它”。任何以文档规定的方式使用类的人都必须为任何奇怪的行为承担责任。

Python 中有一个[抽象基类](http://docs.python.org/2/library/abc.html)机制，但如果您的唯一目标是阻止实例化，我认为没有任何理由使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T06:03:52.967

创建您的“抽象”类和`raise NotImplementedError()`抽象方法。

它不会阻止人们使用该类，并且以真正的鸭式打字方式，它会让您知道您是否忽略了实现抽象方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T06:25:18.987

我只是用前缀“抽象”来命名我的抽象类。例如 AbstractDevice、AbstractPacket 等。

它就像它来的一样简单和重要。如果其他人选择继续实例化和/或使用以“抽象”一词开头的类，那么他们要么知道自己在做什么，要么无论如何都没有希望。

如此命名它也提醒我自己不要对深度抽象层次结构发疯，因为将“抽象”放在很多类的前面也感觉很愚蠢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T07:01:52.390

强制执行是可能的，但相当不合情理。当我在多年的 C++ 编程之后来到 Python 时，我也尝试过这样做，我想，如果他们有更经典的语言经验，大多数人都会尝试这样做。元类可以完成这项工作，但无论如何 Python 在编译时检查的东西很少。您的检查仍将在运行时执行。那么，如果仅在运行时发现无法创建某个类真的那么有用吗？在 C++（以及 C#）中，您甚至无法编译创建抽象类的代码，这就是重点——尽早发现问题。如果你有抽象方法，提出一个`NotImplementedError`例外似乎已经足够了。注意：提高，不返回错误代码！在 Python 中，错误通常不应该是沉默的，除非它们被明确地沉默。记录。以一种抽象的方式命名一个类。就这样。

Python 代码的质量主要通过与具有高级编译时类型检查的语言中使用的方法完全不同的方法来确保。就我个人而言，我认为动态类型的 lngauges 和其他之间最严重的区别。单元测试、覆盖分析等。因此，代码的设计完全不同：所做的一切都不是为了强制执行，而是为了让测试尽可能容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-13T12:44:16.563

在 Python 3.x 中，您的类可以继承自[`abc.ABC`](https://docs.python.org/3/library/abc.html). 这将使您的类不可实例化，如果您尝试这样做，您的 IDE 会警告您。

```
import abc

class SomeAbstractClass(abc.ABC):
    @abc.abstractmethod
    def some_abstract_method(self):
        raise NotImplementedError()

    @property
    @abc.abstractmethod
    def some_abstract_property(self):
        raise NotImplementedError() 
```

这首先在[PEP 3119](https://www.python.org/dev/peps/pep-3119/)中提出。**

# c# - WCF服务重启后如何恢复WCF客户端？

> ID：14972634
> 
> 赞同：1
> 
> 时间：2013-02-20T05:03:42.393
> 
> 标签：c#, .net, wcf

我有静态 WCF 客户端，但我仍然不明白如何重置/恢复它？

我的尝试之一：

```
if (Core.shed.State == CommunicationState.Faulted) {
    Core.shed.Close();
    Core.shed = new wcfClient();
    } 
```

没用，我还在

```
Cannot access a disposed object. Object name: 'System.ServiceModel.Channels.ServiceChannel'. 
```

当我的 wcf 服务再次激活时，我应该如何重置它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:14:44.910

您无法关闭出现故障的 WCF 通道 - 您必须中止它并创建一个新通道。没有办法恢复该通道。

如果您将这行代码更改为：

```
Core.shed.Close(); 
```

到：

```
Core.shed.Abort(); 
```

那么你的其余代码应该可以工作。

# android - 带有 Android 64 Bundle 的 Ubuntu 64 找不到 adb 可执行文件

> ID：14972641
> 
> 赞同：13
> 
> 时间：2013-02-20T05:04:19.403
> 
> 标签：android, ubuntu

尝试`adb`在 Ubuntu 12.10、x86_64 上运行时遇到以下问题：

```
[2013-02-19 20:56:04 - adb] Unexpected exception 'Cannot run program 
"/home/user/adt-bundle-linux-x86_64/sdk/platform-tools/adb": error=2, 
No such file or directory' while attempting to get adb version from 
'/home/user/adt-bundle-linux-x86_64/sdk/platform-tools/adb' 
```

我找到了 adb，试过`chmod +x adb`了，但它不起作用。我也试过 *和*。之后我尝试了`chmod +x platform-tools/`**`chmod +x tools/`*`./adb`*

 *我已经用谷歌搜索了这个问题。他们在谈论 ia32 包。Ubuntu 找不到那个包，也找不到 ia32 多架构。

系统是 Ubuntu 12.10 64，我下载了 adt-bundle-linux-x86_64.zip 包并解压。

我究竟做错了什么 ？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-07T15:25:35.480

在 Debian 7 上，我遇到了同样的问题。

诊断：

```
edb@lapelidb:~/today$ ldd /opt/adt-bundle-linux-x86_64-20130729/sdk/platform-tools/adb
    not a dynamic executable
edb@lapelidb:~/today$ file  /opt/adt-bundle-linux-x86_64-20130729/sdk/platform-tools/adb
/opt/adt-bundle-linux-x86_64-20130729/sdk/platform-tools/adb: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.8, not stripped 
```

解决方案：添加对 32 位支持和所需 32 位库的支持：

```
edb@lapelidb:~/today$ sudo dpkg --add-architecture i386
edb@lapelidb:~/today$ sudo apt-get update 
edb@lapelidb:~/today$ sudo apt-get install libc6:i386 libstdc++6:i386 
```

瞧：

```
edb@lapelidb:~/today$ ldd /opt/adt-bundle-linux-x86_64-20130729/sdk/platform-tools/adb
    linux-gate.so.1 =>  (0xf772a000)
    librt.so.1 => /lib/i386-linux-gnu/i686/cmov/librt.so.1 (0xf770a000)
    libdl.so.2 => /lib/i386-linux-gnu/i686/cmov/libdl.so.2 (0xf7706000)
    libpthread.so.0 => /lib/i386-linux-gnu/i686/cmov/libpthread.so.0 (0xf76ec000)
    libstdc++.so.6 => /usr/lib/i386-linux-gnu/libstdc++.so.6 (0xf7600000)
    libm.so.6 => /lib/i386-linux-gnu/i686/cmov/libm.so.6 (0xf75da000)
    libgcc_s.so.1 => /lib/i386-linux-gnu/libgcc_s.so.1 (0xf75bd000)
    libc.so.6 => /lib/i386-linux-gnu/i686/cmov/libc.so.6 (0xf745a000)
    /lib/ld-linux.so.2 (0xf772b000) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-30T19:21:17.180

我使用的是 Ubuntu 12.04 LTS 版本。我已经尝试了“amo-ej1”建议的步骤，但我的“dpkg”没有“添加”或“架构”选项。

但是，以下内容对我有用：

1) 安装以下第三方 PPA 提供的“adb”和“fastboot”。

```
sudo add-apt-repository ppa:nilarimogard/webupd8
sudo apt-get update
sudo apt-get install android-tools-adb android-tools-fastboot 
```

2）将官方Android SDK提供的'adb'和'fastboot'的副本替换为从上述步骤安装的那些：

```
cp /usr/bin/adb <path-to-your-adt-sdk-package>/sdk/platform-tools/adb
cp /usr/bin/fastboot <path-to-your-adt-sdk-package>/sdk/platform-tools/fastboot 
```

3）重新启动（重新执行）你的eclipse二进制文件。

完整学分： [http ://www.webupd8.org/2012/08/install-adb-and-fastboot-android-tools.html](http://www.webupd8.org/2012/08/install-adb-and-fastboot-android-tools.html)

**重要编辑（替代解决方案）：**

虽然上面可以解决您的错误（并且您可以继续使用 Android App 教程），但正如我发现的那样，ADT 还需要位于以下位置的“aapt”（另一个 32 位二进制文​​件）：

```
 <path-to-your-adt-sdk-package>/sdk/build-tools/android-x.x/ 
```

不幸的是，我上面提供的链接没有提供这个二进制文件。

所以，这是我的另一个解决方案：

1) 更新您的系统

```
Open 'Update Manager' => 'Settings' => 'Updates
Check "Recommended Updates (precise updates)"
Update the updates that are being shown 
```

2) 安装 ia32-libs

```
sudo apt-get install ia32-libs 
```

我终于能够安装'ia32-libs'。要知道为什么'ia32-libs'不会首先安装，请在此处阅读'slangasek'发布的答案： [https ://askubuntu.com/questions/136394/cannot-install-ia32-libs](https://askubuntu.com/questions/136394/cannot-install-ia32-libs)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T16:39:07.047

在**Ubuntu 12.10 x86_64** *上，运行 32 位的包*是[ia32-libs](http://packages.ubuntu.com/quantal/ia32-libs)和 ia32-libs-multiarch。

如果你输入

```
file adb 
```

您会看到 adb 是 64 位系统上的 32 位文件。您需要 ia32 包来模拟和运行此文件。但你不能！

现在的问题是您无法下载这些软件包，他们正试图将其转换为我猜 x86_64 的东西。在这里，您可以在包 NEWS 中阅读有关转换的信息：

转换摘要：

> “ia32-libs (20090808ubuntu27) 精确；紧迫性=低
> 
> *   ia32-libs 现在是一个依赖于 ia32-libs-multiarch 的过渡包，这是一个仅 i386 的包，它依赖于以前包含在 ia32-libs 本身中的所有 32 位库包。因此，ia32-libs 将在精确周期内的一段时间内卸载，而依赖库更新为可使用 multiarch 共同安装。鼓励开发人员帮助完成这些库的转换过程，如下所述：
>     
>     
>     
>     [http://wiki.debian.org/Multiarch/Implementation](http://wiki.debian.org/Multiarch/Implementation)
>     
>     
>     
>     ——史蒂夫·朗加塞克“

因此，如果您尝试编辑 source.list 文件以从较旧的 repo 中获取它，您将破坏包。所以 ubuntu 12.10 的人必须等待或 adb 被编译或任何 64 位。

编辑：

Debian 7.0 将支持 x64 版本可以运行 x32 二进制文件的多架构。来源： http: [//www.debian.org/News/2013/20130504](http://www.debian.org/News/2013/20130504)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T01:26:11.207

我使用 debian_x64

添加 i386 库

dpkg --add-architecture i386 sudo apt-get update sudo apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386

ldd /home/yourname/adt-bundle-linux-x86_64-20130729/sdk/platform-tools/adb

当你发现“android-sdks/build-tools/17.0.0/aapt: error while loading shared libraries: libz.so.1: cannot open shared object file: No such file or directory”</p>

你可以试试 sudo apt-get install ia32-libs sudou apt-get install zlib.i686

重新启动计算机并重试

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T06:26:56.917

用这个解压缩该文件：

```
sudo tar xvfz adt-bundle-linux-x86.zip -C /opt/android 
```

比运行该代码：

```
sudo chown -R your_user_name /opt/android 
```

我认为它会起作用*

# mysql - MySQL SELECT 查询 - 减去一个 SUM() 值与两个其他 SUM() 值的总和

> ID：14972650
> 
> 赞同：1
> 
> 时间：2013-02-20T05:05:24.670
> 
> 标签：mysql, sql, select

我有两个 SELECT 语句给出值“TotalSales”和“VendorPay_Com”。我希望能够在一个 MySQL 语句中从 TotalSales 中减去 VendorPay_Com 以获得值“Outstanding_Funds”，但我还没有找到一种可靠的方法来做到这一点。

这是我的两个陈述：

查询一：

```
SELECT SUM(Price) AS TotalSales
FROM PROPERTY
WHERE Status = 'Sold'; 
```

查询 2：

```
SELECT SUM(AC.Amount) AS VendorPay_Comm
FROM (
SELECT Amount FROM lawyer_pays_vendor
UNION ALL
SELECT CommissionEarned AS `Amount` FROM COMMISSION AS C WHERE C.`status` = 'Paid') AS AC 
```

对此事的任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T05:16:53.327

你可以这样做：

```
select (select ...) - (select ...) 
```

在您的示例中，只需：

```
select 

(
SELECT SUM(Price) AS TotalSales
FROM PROPERTY
WHERE Status = 'Sold'
)
-
(
SELECT SUM(AC.Amount) AS VendorPay_Comm
FROM (
SELECT Amount FROM lawyer_pays_vendor
UNION ALL
SELECT CommissionEarned AS `Amount` FROM COMMISSION AS C WHERE C.`status` = 'Paid') AS AC
) AS Outstanding_Funds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:15:41.703

尝试

```
SELECT TotalSales-VendorPay_Comm AS Outstanding_Funds
  FROM
(SELECT SUM(Price) AS TotalSales
   FROM PROPERTY
  WHERE Status = 'Sold') t1, 
(SELECT SUM(Amount) AS VendorPay_Comm
   FROM (SELECT Amount FROM lawyer_pays_vendor
          UNION ALL
         SELECT CommissionEarned AS Amount 
           FROM COMMISSION
          WHERE Status = 'Paid') t0) t2 
```

这是**[sqlfiddle](http://sqlfiddle.com/#!2/7028d/4)**

# php - 密码加密登录问题

> ID：14972654
> 
> 赞同：0
> 
> 时间：2013-02-20T05:05:41.237
> 
> 标签：php, mysql, encryption, login

我在我的 sql 数据库中查找和验证用户的加密密码时遇到问题。注册过程很好，它使用他们的 md5 加密密码创建他们的行，但是当尝试登录时，它不会识别他们的密码。这是我使用的东西：

```
// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername = $_POST['myusername']; 
$mypassword = $_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='md5($mypassword)'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_start();
$_SESSION['login'] = "$myusername"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:14:23.220

尝试

```
mysql_connect($host, $username, $password)or die("cannot connect"); 
mysql_select_db($db_name)or die("cannot select DB");

// username and password sent from form 
$myusername = $_POST['myusername']; 
$mypassword = $_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM '".$tbl_name.". WHERE username='".$myusername."' and password='".md5($mypassword)."'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_start();
$_SESSION['login'] = $myusername;
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:18:08.977

将您的 $sql 替换为以下内容。我假设您在 $tbl_name -variable 中有正确的表名。

```
$sql="SELECT * FROM ".$tbl_name." WHERE username='".$myusername."' and password='".md5($mypassword)."'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-01T16:36:21.403

大声笑你的代码太复杂了，我提供了我制作的脚本！

使用 STMT 意味着没有 SQL 注入

如何加密您的密码（正确的方法！！！）

```
function Encrypt($text) {
  $cost = 12;
  $salt = strtr(base64_encode(mcrypt_create_iv(16, MCRYPT_DEV_URANDOM)), '+', '.');
  $salt = sprintf("$2a$%02d$", $cost) . $salt;
  $altered_text = crypt($text, $salt);
  return $altered_text;
}

// Then use the code below to use the function

$password = Encrypt($password); 
```

在您的登录中，请使用蛮力保护

这是蛮力保护代码

```
function BruteForce($user_id, $link) {
    $now = time();
    $timespan = $now - (2 * 60 * 60);
    if ($stmt = $link->prepare("SELECT time FROM login_attempts WHERE user_id = ? AND time > '$timespan'")) {
        $stmt->bind_param('i', $user_id);
        $stmt->execute();
        $stmt->store_result(); 
        if ($stmt->num_rows > 5) {
            return true;
        } else {
            return false;
        }
        $stmt->close();
    }
} 
```

然后使用下面的sql语句

```
CREATE TABLE `login_attempts` (
    `user_id` INT(11) NOT NULL,
    `time` VARCHAR(30) NOT NULL
) ENGINE=InnoDB 
```

然后存储尝试

```
function StoreAttempt($user_id, $link) {
    $now = time();
    $stmt = $link->prepare("INSERT INTO login_attempts (user_id, time) VALUES (?, ?)");
    $stmt->bind_param("ss", $a, $b);
    $a = $user_id;
    $b = $now;
    $stmt->execute();
    $stmt->close();
} 
```

然后在行动中使用它

```
// user_id = the users id after you get the users id
// link = the database connection

if (BruteForce($user_id, $link) === true) {
    // Too many login attempts
} else {
    // Store Attempt
    StoreAttempt($user_id, $link);
} 
```

我建议您使用安全会话而不是普通会话

使用下面的代码

```
function SecureSession() {
    $session_name = 'SecureSession';
    $secure = true;
    $httponly = true;
    if (ini_set('session.use_only_cookies', 1) === FALSE) {
        die("Could not initiate a safe session (ini_set)");
    }
    $cookieParams = session_get_cookie_params();
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly);
    session_name($session_name);
    session_start(); 
    session_regenerate_id(true);
} 
```

现在开始会议

```
SessionSecure(); 
```

如果您打算使用 PHP SELF

在下面使用此代码

```
function SanitizeUrl($url) {
    if ('' == $url) {
        return $url;
    }
    $url = preg_replace('|[^a-z0-9-~+_.?#=!&;,/:%@$\|*\'()\\x80-\\xff]|i', '', $url); 
    $strip = array('%0d', '%0a', '%0D', '%0A');
    $url = (string) $url;
    $count = 1;
    while ($count) {
        $url = str_replace($strip, '', $url, $count);
    }
    $url = str_replace(';//', '://', $url);
    $url = htmlentities($url);
    $url = str_replace('&amp;', '&#038;', $url);
    $url = str_replace("'", '&#039;', $url);
    if ($url[0] !== '/') {
        return '';
    } else {
        return $url;
    }
} 
```

上面的功能是针对 PHP SELF ex 的保护

然后使用它

```
SanitizeUrl($_SERVER['PHP_SELF']); 
```

现在为实际的登录功能

我建议在您的登录名中使用电子邮件然后使用用户名，主要是因为您的电子邮件不是唯一的！

```
function Login($email, $password, $link) {
    if (empty($username) || empty($password)) {
        // A field is empty
        return false;
    } else {
        $sql = "SELECT `id`,`username`,`password` FROM `users` WHERE `email` = ?";
        if ($stmt = $link->prepare($sql)) {
            $stmt->bind_param('s', $email);
            $stmt->execute();
            $stmt->store_result();
            if ($stmt->num_rows == 1) {
                $stmt->bind_result($db_id, $db_username, $db_password);
                $stmt->fetch();
                if (BruteForce($db_id, $link) === false) {
                    $password = Encrypt($password);
                    if ($password == $db_password) {
                        // LOGGED IN, SET SESSION VARS
                        return true;
                    } else {
                        // Store Attempt
                        StoreAttempt($user_id, $link);
                        return false;
                    }
                } else {
                    return false
                }
            } else {
                return false;
            }
        } else {
            return false;
        }
    }
} 
```

然后在行动中使用它

```
SessionSecure();

if (isset($_POST['DoLogin'])) {
   $email = $_POST['login-email'];
   $password = $_POST['login-password'];
   if (Login($email, $password, $link) === true) {
       // Logged in Redirect now!
   } else {
       // Login failed
   }
} 
```

随意使用此代码！！！:)

# android - 9 补丁可绘制尺寸 Android。不同的密度如何处理非拉伸区域？

> ID：14972657
> 
> 赞同：14
> 
> 时间：2013-02-20T05:06:09.933
> 
> 标签：android, drawable, nine-patch

![在此处输入图像描述](../Images/4c38eb57e535c736eb7ca4d452c17429.png)

考虑上图。- 虚线划分了 9-Patch png，我将从 Photoshop 文件中切出。我需要它来创建一个弹出框。- 盒子包含一个 dropShadow，如这张照片中的测量工具所示。- 粉色线条显示我将如何使用 draw9Patch 工具创建 9-Patch。

**我的问题是**：如果我有一个带有 9-Patch 的视图“容器”作为背景，我需要确保它的子视图始终位于白框内。我打算为此使用填充。我打算将填充设置为等于测量工具。因此，如果它在 Photoshop 中为 30px，我将为`layout_paddingLeft"=30dp"`容器设置。（设计采用 MDPI，所以我认为这种转换是可以的）。然而，不同密度的屏幕如何处理 9path。例如，测量区域是**30px**还是**30dip**？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T14:40:34.617

通过该`draw9patch`工具，您可以定义：

![在此处输入图像描述](../Images/2adcf3eb35e0bfdc92372d0bd7a65770.png)

*   **垂直拉伸**：左侧的黑色像素
*   **水平拉伸**：顶部的黑色像素
*   **垂直内容**：右侧的黑色像素
*   **水平内容**：底部的黑色像素

请注意，拉伸像素不必是连续的，因此您可以从拉伸中排除某些特定切片（查看上面的弹出箭头）。同时，您可以合理地了解内容的放置位置，只需查看右侧的预览，其中包含紫色区域。您可以假设，这样您就不必指定任何填充在您的布局中：**视图将使用您设置为 background 的 9patch 考虑这些值**。

非拉伸区域随像素密度缩放。因此，如果您将上面的 9patch 设置为`mdpi`资产，则最左上角的切片将在 50x40 像素区域@mdpi 和 100x80 像素区域@xhdpi 中呈现。最左边的拉伸区域改为根据 dpi 排列宽度，而高度根据内容排列。其他拉伸切片以类似的方式工作。

在这两种情况下，处理“低分辨率”9patch 都会导致丑陋的像素化伪影。一种可能的解决方案是为每个支持的 dpi 提供不同的 9patch，或者只定义较高的 dpi (xhdpi) 并让 Android 相应地缩小它们。

内容边界也被处理`dp`，因此它们根据像素密度进行缩放。例如：在原始 9patch 中定义为 40px@mdpi 的左填充，将被转换为 80px@xhdpi，因此内容永远不会流出给定的边界。**请注意，您甚至可以通过`padding*`布局中的属性覆盖 9patch 中指定的内容边界。**

# php - Magento - CatalogSearch 模块覆盖不起作用

> ID：14972658
> 
> 赞同：4
> 
> 时间：2013-02-20T05:06:12.690
> 
> 标签：php, magento

我想覆盖核心 CatalogSearch 模块中图层的“prepareProductCollection”功能。这是我写的：

文件路径：`Company/Module/Model/CatalogSearch/Layer.php`

```
class Company_Module_Model_CatalogSearch_Layer extends Mage_CatalogSearch_Model_Layer
{
public function prepareProductCollection($collection)
{
    parent::prepareProductCollection($collection);

    Mage::getModel('cataloginventory/stock_item')->addCatalogInventoryToProductCollection($collection);

    $collection->getSelect()->order('is_in_stock desc');
    return $this;
}
} 
```

在配置文件中：

```
<config>
    <modules>
        <Company_Module>
            <version>0.0.0.1</version>
        <Company_Module>
    </modules>
    <global>
        <models>
            <module>
               <class>Company_Module_Model</class>
            </module>
            <catalogsearch>
                <rewrite>
                   <layer>Company_Module_Model_CatalogSearch_Layer</layer>
                </rewrite>
            </catalogsearch>
        </models>
    </global>
</config> 
```

我想我可能错过了什么？谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:40:49.430

`catalogsearch`您错过了在 config.xml 中结束标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T09:40:11.017

我试图做同样的事情。
我遵循了多个教程并尝试了几件事。最后，我总是遇到 503 错误（没有任何 maintanance.flag 文件 - 其他商店网站运行良好）。
但我设法解决了这个问题。我将向您展示我现在拥有的东西以及 503 的原因是什么，以防有人偶然发现这个问题：

我将模块命名为 Company/CatalogSearch，它由三个文件组成：

app/code/local/Company/CatalogSearch/Model/Layer.php：

```
<?php
class Company_CatalogSearch_Model_Layer extends Mage_CatalogSearch_Model_Layer {

    public function prepareProductCollection($collection) {

        parent::prepareProductCollection($collection);

        // YOUR CODE HERE

        return $this;
    }
} 
```

应用程序/代码/本地/公司/目录搜索/etc/config.xml：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_CatalogSearch>
            <version>0.1</version>
        </Company_CatalogSearch>
    </modules>
    <global>
        <models>
            <catalogsearch>
                <rewrite>
                    <layer>Company_CatalogSearch_Model_Layer</layer>
                </rewrite>
            </catalogsearch>
        </models>
    </global>
</config> 
```

应用程序/etc/modules/Company_CatalogSearch.xml：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_CatalogSearch>
            <active>true</active>
            <codePool>local</codePool>
        </Company_CatalogSearch>
    </modules>
</config> 
```

就这样。

对于 503 问题：在文件 app/code/local/Company/CatalogSearch/etc/config.xml 我有

```
<rewrite>
    <layer>
        Company_CatalogSearch_Model_Layer
    </layer>
</rewrite> 
```

代替

```
<rewrite>
    <layer>Company_CatalogSearch_Model_Layer</layer>
</rewrite> 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T11:24:49.037

在顶部添加 require_once(app/Mage/CatalogSearch/Model/Layer)

# c# - 表单没有响应，但计时器仍在运行

> ID：14972660
> 
> 赞同：1
> 
> 时间：2013-02-20T05:06:25.130
> 
> 标签：c#, winforms, audio, windows-7

我创建[了一个视频](http://youtu.be/_zTLy_xY_uw)来解释我的问题。以文本形式 - 我的主窗体在计时器运行时崩溃，我不知道为什么，应用程序继续运行，即使主窗体似乎已经崩溃。

```
namespace ItunesGamesEqualiser
{
    public partial class GUI : Form
    {
        private void refreshBar_Scroll(object sender, EventArgs e)
        {
            timer1.Interval = prbLevel.Value;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Start();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            AudioSessionControl session;
            AudioSessionControl itunesSession;
            MMDeviceEnumerator DevEnum = new MMDeviceEnumerator();
            MMDevice device = DevEnum.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);
            // Note the AudioSession manager did not have a method to enumerate all sessions in windows Vista
            // this will only work on Win7 and newer.
            for (int i = 0; i < device.AudioSessionManager.Sessions.Count; i++)
            {
                itunesSession = device.AudioSessionManager.Sessions[i];

                if (itunesSession.SessionIdentifier.Contains("iTunes") == true) //find itunes audio service
                {
                    for (int j = 0; j < device.AudioSessionManager.Sessions.Count; j++)
                    {
                        session = device.AudioSessionManager.Sessions[j];
                        if (session.SessionIdentifier.Contains("iTunes") == false) //find game audio service
                        {

                            if (session.State == AudioSessionState.AudioSessionStateActive)
                            {
                                Process p = Process.GetProcessById((int)session.ProcessID);
                                Console.WriteLine("ProcessName: {0}", p.ProcessName);
                                AudioMeterInformation mi = session.AudioMeterInformation;
                                AudioMeterInformation imi = itunesSession.AudioMeterInformation;
                                SimpleAudioVolume vol = session.SimpleAudioVolume;
                                SimpleAudioVolume ivol = itunesSession.SimpleAudioVolume;
                                //int start = Console.CursorTop;
                                ivol.MasterVolume = 1;
                                float origVol = ivol.MasterVolume;
                                while (true)
                                {
                                    //Draw a VU meter
                                    int len = (int)(mi.MasterPeakValue * 79);
                                    int ilen = (int)(imi.MasterPeakValue * 79);
                                    //Console.SetCursorPosition(0, start);
                                    //Game Meter
                                    if (len > 30)
                                    {
                                        float curvol = origVol - (0.1f * (len - 10) / 10);
                                        if (curvol < 0) curvol = 0;
                                        ivol.MasterVolume = curvol;
                                        prbLevel.Value = len;
                                    }
                                    else
                                    {
                                        ivol.MasterVolume = origVol;
                                        //Console.WriteLine("null");
                                    }
                                }
                            }
                        }
                    }
                }
            }
            //If we end up here there where no open audio sessions to monitor.
            lblName.Text = "No game found, please start game and iTunes";
        }

        private void btnStop_Click(object sender, EventArgs e)
        {
            timer1.Stop();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:47:17.840

由于您的代码在计时器滴答事件中，应用程序崩溃。应用程序即使在崩溃后仍会继续运行，因为计时器未被禁用或处置。当您设置 timer.Enabled = true 时，Timer 类使用 - GCHandle.Alloc 请求 GC 不收集。因此，即使在计时器对象引用不可访问之后，它也不会被垃圾收集。修复计时器滴答事件中的问题并正确处理计时器。

# java - Java GetFile 在使用 SetFile 后返回不正确的文件名

> ID：14972664
> 
> 赞同：3
> 
> 时间：2013-02-20T05:06:45.407
> 
> 标签：java, awt, filenames, filedialog

我有一些Java代码：

```
public static String getSaveFilePath(String title2)
  {
  FileDialog fd = new FileDialog(new Frame(), "Save As...", 1);
    fd.setFilenameFilter(new FilenameFilter() {
      public boolean accept(File dir, String name) {
        return name.endsWith(".mp3");
      }
    });
    fd.setFile(title2 + ".mp3");
    fd.setVisible(true);
    String str3 = fd.getFile();
    String str4 = fd.getDirectory();
    if (str4 == null) return null;
    str3 = str3.replace(".mp3", "");
    str3 = str3 + ".mp3";
    String str5 = str3;
    File localFile = new File(str4, str5);
    return localFile.getPath();
} 
```

问题是当我使用`setFile()`将文件名设置为

```
NBA - In the Zone P.L. (Video by JESSExAKAxViCiOUS) 
```

在显示对话框之前，当显示对话框时，我将文件另存为`abc.mp3` 并`getFile()`再次使用，我得到`SExAKAxViCiOUS).mp3`- 因为它应该返回我选择保存到的文件的名称，`abc.mp3`.

有人可以告诉我我在这里做错了什么吗？此外，如果您有更好的跨平台解决方案来显示保存文件对话框，请与我分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T15:31:28.480

我在使用 Java 1.7.0_21 时遇到了同样的问题。似乎每当您选择的文件名或路径短于您之前使用 setFile() 设置的文件名或路径时，getDirectory() 将作为目录（！）返回新文件，而 getFile() 将返回之前的其余文件文件名。使用 Java 1.6 时，它按预期工作，所以我猜这是 1.7 中的一个错误。

**编辑：**
固定在：

*   [Java 7u60b01](http://download.java.net/jdk7u60/changes/jdk7u60-b01.html)
    （[JDK-8024349：FileDialog getFile 在之前的 setFile 之后返回损坏的字符串](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8024349)）
    [**--> 早期访问版本下载**](https://jdk7.java.net/download.html)
*   Java 8 ( [JDK-8021943](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8021943) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-13T09:17:58.220

这是错误[JDK-8021943：FileDialog getFile 在之前的 setFile 之后返回损坏的字符串](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8021943)。

受影响的JVM版本：7u5、7u15、7u21、7u25、7u40

**已为 Java 8 修复**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:05:08.747

功能`getSaveFilePath`很好，按我的预期工作。问题可能在于您如何使用它。您能否发布一段调用此函数的代码？

我是这样称呼它的：

```
public class FileDialogTest
{
    public static String getSaveFilePath(String title2)
    {
        FileDialog fd = new FileDialog (new Frame (), "Save As...", 1);
        fd.setFilenameFilter (new FilenameFilter ()
        {
            public boolean accept (File dir, String name)
            {
                return name.endsWith (".mp3");
            }
        });
        fd.setFile (title2 + ".mp3");
        fd.setVisible (true);
        String str3 = fd.getFile ();
        String str4 = fd.getDirectory ();
        if (str4 == null)
            return null;
        str3 = str3.replace (".mp3", "");
        str3 = str3 + ".mp3";
        String str5 = str3;
        File localFile = new File (str4, str5);
        return localFile.getPath ();
    }

    public static void main (String [] args) throws Exception
    {
        String title = "NBA - In the Zone P.L. (Video by JESSExAKAxViCiOUS)";
        title = getSaveFilePath (title);
        System.out.println (title);
    }
} 
```

# php - 使用 PHP 标头重定向到同一页面不会从 URL 中删除 GET 请求

> ID：14972665
> 
> 赞同：0
> 
> 时间：2013-02-20T05:06:45.817
> 
> 标签：php

我有一个刽子手游戏。我的问题是，当他们进入胜利屏幕时，他们可以无限刷新它，每次刷新都会增加他们的胜利数量（如果他们输了，就会增加损失），因为它会检查单词是否完整，是否完整，并提高他们的分数.

我现在制作了一个 SESSION 变量来判断他们是否赢了。如果有，它会重置游戏。

我的问题是，当他们使用 URL 中的 GET 请求刷新时（我如何猜测），例如`...index.php?guess=G`游戏将刷新 G 被猜测。我认为 Location 设置为 index.php 的标头会摆脱 GET 请求。

这是我的检测代码：

```
 if (isset($_SESSION["won"]) && $_SESSION["won"]) {
        reset_game();
    }
    else if (isset($_SESSION["lost"]) && $_SESSION["lost"]) {
        reset_game();
    } 
```

和`reset_game()`功能：

```
 function reset_game() {
        $_SESSION["word"] = generate_word("dictionary.txt");
        $_SESSION["word-progress"] = turn_to_underscores($_SESSION["word"]);
        $_SESSION["chances-left"] = 9;
        $_SESSION["guesses"] = array();
        $_SESSION["incorrect-guesses"] = array();

        header('Location: index.php');
    } 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:50:00.067

我相信 header("Location: index.php"); 将从 URL 中删除所有 get 参数。

我认为您需要检查您的应用程序是否确实调用了该函数

# css - 使中心 div 占据剩余屏幕，底部 div 占据所需空间

> ID：14972668
> 
> 赞同：0
> 
> 时间：2013-02-20T05:07:17.620
> 
> 标签：css, html

[这与这个问题](https://stackoverflow.com/questions/2198116/xhtml-css-how-to-make-inner-div-get-100-width-minus-another-div-width)有些相关，但我试图在 div 垂直对齐时实现这一点。

或多或少，这就是我想要实现的目标：

## Main Div：占据屏幕的其余部分

* * *

## 页脚 div：根据需要占用尽可能多的空间

float:bottom 的 css 不可用，所以我想听听一些替代方案。

这是我目前所拥有的：

```
<div id="main_div" style="height:100%;overflow:scroll">
...Contents
</div>

<div id="footer_div" style="height:50px">
...Contents
</div> 
```

页脚显示在 main_div 下方，用户必须向下滚动才能看到它，而不是 main_div 调整自身以获取足够的屏幕高度以防止滚动条出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:56:55.977

你可以检查这个小提琴 [http://jsfiddle.net/sarfarazdesigner/3fLca/](http://jsfiddle.net/sarfarazdesigner/3fLca/)

让我知道我的理解是对还是错？因为我所做的就是我对你的问题的理解。

```
#main_div{
    position:absolute;
    left:0;
    right:0;
    top:0;
    bottom:50px;
    overflow:auto;
    background:#eee;
}
#footer_div{
    position:absolute;
    left:0;
    right:0;
    bottom:0;
    background:#ddd;
    height:50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:12:18.360

您可以将页脚设置在页面底部的固定位置。任何重叠的内容都会在其后面滚动。

```
<html>
    <head>
    </head>
    <body>
        <div class="wrapper" style="width: 100%; border:1px solid blue;"> 
            <p>Your website content here.</p>
            <p>Your website content here.</p>
            <p>Your website content here.</p>
            <div class="push"></div>
        </div>
        <div class="footer" style="width: 100%; position:fixed; left:0; bottom: 0; border:1px solid red;">
            <p>FOOTER CONTENT HERE</p>
        </div>
    </body>
</html> 
```

# c# - Datagrid 数据绑定失败

> ID：14972671
> 
> 赞同：0
> 
> 时间：2013-02-20T05:07:55.940
> 
> 标签：c#, winforms, for-loop, datagridview

我正在尝试使用循环来获取一些数据并绑定到现有的`Gridview`

```
for (int i =0; i<datasetResult.Rows.Count; i++){
 //some code to retrieve data from DB
 //after retrieved i am trying to bound it into my datagrid but i failed

DataRow dr = datasetResult.Tables[0].Rows[i];

if(RetVal ==0){

dataGridView.DataSource = datasetResult.Table[0];
}

} 
```

我的结果无法追加，最终结果是我检索到的数据的最后一个数据行，这是因为每次有新输入时它只会绑定一次但永远不会追加，第二个结果将替换第一个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:29:36.230

您正在尝试检索其中的数据`for loop`，这不是正确的方法。假设您已经有数据**并且**`DataTable`这行代码将为您工作。

`dataGridView.DataSource = datasetResult.Table[0];`

# r - 希望让R代码更高效

> ID：14972674
> 
> 赞同：-1
> 
> 时间：2013-02-20T05:08:07.970
> 
> 标签：r

我有以下 R 代码：

```
pp = function(N,J,K){
    for(i in 1:100){
        pai=runif(J)
        alpha=matrix(rbinom(N*K,1,0.5),nrow=N)
        Q=matrix(rbinom(J*K,1,0.5),nrow=J)
        r=matrix(runif(J*K),nrow=J)
        ta=r^Q
        arrayalpha=array(rep((1-alpha), J),c(N,K,J))
        arrayta=array(rep(ta, N),c(J,K,N))
        arraytap=aperm(arrayta, c(3,2,1))
        tare=arraytap^arrayalpha #ta^re
        arrayprod=apply(tare,c(1,3),prod)
        repai=t(matrix(rep(pai,N),nrow=J))
        predarray=t(arrayprod*repai)
   }
   predarray             
}

> system.time(pp(500,20,5))
   user  system elapsed 
  5.381   0.008  12.468 
```

我怎样才能使它更有效率？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:34:50.040

考虑到`predarray`每个循环都被完全替换，您将获得相同的结果而无需迭代（但速度更快）。

不过，说真的，你不想积累 predarray 吗？，比如：

```
pp = function(N,J,K){
    predarray <- array(numeric(100*J*N), c(100, J, N))
    for(i in 1:100){
        ...
        predarray[i, , ] <- t(arrayprod*repai)}
    predarray             
} 
```

这将返回 100 个 predarray(JxN) 矩阵（每个矩阵作为 (100xJxN) 数组的一个 dim:1 切片）。此外，它应该*减少*您的时间，因为数组是预先分配的（而不是分配它 100 次，如在您的代码中）。

* * *

为了提高效率，您的目标应该是避免显式的 R 循环。最好的方法是显式并行化，因为这个问题看起来“令人尴尬地并行”（*即*每次迭代都应该完全独立于其他迭代）。

* * *

另一种选择是，由于显式 R 循环比隐式 C 循环（用于向量化操作，`apply`函数族）和包`plyr`. 你应该继续这样：

*   Set `num <- 100`（*即*“迭代”的次数，在pp的定义内）
*   将每个生`(pai, alpha)`成为具有附加长度维度的数组`num`（*即*每个元素或切片将等效于这些变量的原始迭代）。
*   `ta`其余的矩阵运算是瓶颈，因为您每次都在两个矩阵上进行运算`(ta, arrayta, tare, predarray)`。
*   瓶颈可以通过在同一数组的附加维度中生成（或连接）每对矩阵操作数（或每个 pari 作为列表中的一个元素，当维度不同时），然后在代表“迭代”。

Q 和 r 的示例：

```
# Q and r in one array of dimensions (J x K x iterations x 2)
# 100 Qs are stored in [,,,1] and 100 rs in [,,,2]
Qr <- array(c(Q=rbinom(J*K*100,1,0.5),
              r=runif(J*K*100)),
            dim=c(J=J, K=K, iter=100, var=2))

# Third dimension is equivalent to each iteration
Qr[,,1,]

# And you operate each Q^r using apply, over each iteration
library(package=plyr)  # plyr is needed for this
ta <- alply(.data=Qr, .margins=3, .fun=function(x) x[,,2]^x[,,1]) 
```

# java - 公共页面中复选框的 Java 编辑器 HTML 工具包类侦听器

> ID：14972684
> 
> 赞同：0
> 
> 时间：2013-02-20T05:08:44.957
> 
> 标签：java, swing, listener, jeditorpane, htmleditorkit

我正在使用 java 编辑器 HTML 工具包类来显示一个包含复选框的公共 html 页面。我想为面板中显示的公共页面中出现的这些复选框构建一个侦听器。有谁知道我应该寻找什么东西？我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:16:44.183

这是一些非常古老的代码，可能有助于您入门。

请注意此代码如何检查 DefaultComboBoxModel？好吧，我猜对于复选框，ButtonModel 也会在您的一个元素中找到。一旦您可以访问该模型，您应该能够向它添加一个侦听器。

不保证这会奏效。我建议你创建一些简单的测试 HTML 来看看你得到什么样的输出。

```
import java.io.*;
import java.net.*;
import java.util.*;
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.text.html.*;

class GetHTML
{
    public static void main(String[] args)
    {
        EditorKit kit = new HTMLEditorKit();
        Document doc = kit.createDefaultDocument();

        // The Document class does not yet handle charset's properly.
        doc.putProperty("IgnoreCharsetDirective", Boolean.TRUE);

        try
        {
            // Create a reader on the HTML content.
            Reader rd = getReader(args[0]);

            // Parse the HTML.
            kit.read(rd, doc, 0);
            System.out.println( doc.getText(0, doc.getLength()) );
            System.out.println("----");

            // Iterate through the elements of the HTML document.

            ElementIterator it = new ElementIterator(doc);
            Element elem = null;

            while ( (elem = it.next()) != null )
            {
                AttributeSet as = elem.getAttributes();
                System.out.println( "\n" + elem.getName() + " : " + as.getAttributeCount() );
/*
                if ( elem.getName().equals( HTML.Tag.IMG.toString() ) )
                {
                    Object o = elem.getAttributes().getAttribute( HTML.Attribute.SRC );
                    System.out.println( o );
                }
*/

                Enumeration enum1 = as.getAttributeNames();
                while( enum1.hasMoreElements() )
                {
                    Object name = enum1.nextElement();
                    Object value = as.getAttribute( name );
                    System.out.println( "\t" + name + " : " + value );

                    if (value instanceof DefaultComboBoxModel)
                    {
                        DefaultComboBoxModel model = (DefaultComboBoxModel)value;

                        for (int j = 0; j < model.getSize(); j++)
                        {
                            Object o = model.getElementAt(j);
                            Object selected = model.getSelectedItem();

                            if ( o.equals( selected ) )
                                System.out.println( o + " : selected" );
                            else
                                System.out.println( o );
                        }
                    }
                }

                //

                if ( elem.getName().equals( HTML.Tag.SELECT.toString() ) )
                {
                    Object o = as.getAttribute( HTML.Attribute.ID );
                    System.out.println( o );
                }

                //  Wierd, the text for each tag is stored in a 'content' element
                if (elem.getElementCount() == 0)
                {
                    int start = elem.getStartOffset();
                    int end = elem.getEndOffset();
                    System.out.println( "\t" + doc.getText(start, end - start) );
                }

            }

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

        System.exit(1);
    }

    // Returns a reader on the HTML data. If 'uri' begins
    // with "http:", it's treated as a URL; otherwise,
    // it's assumed to be a local filename.
    static Reader getReader(String uri)
        throws IOException
    {
        // Retrieve from Internet.
        if (uri.startsWith("http:"))
        {
            URLConnection conn = new URL(uri).openConnection();
            return new InputStreamReader(conn.getInputStream());
        }
        // Retrieve from file.
        else
        {
            return new FileReader(uri);
        }
    }
} 
```

# python - 我在哪里存储 Python 的文本文件

> ID：14972686
> 
> 赞同：-2
> 
> 时间：2013-02-20T05:09:04.303
> 
> 标签：python, file

我将文本文件存储在计算机上的哪个文件夹位置以供 python 访问？我正在尝试使用命令 fin = open('words.txt') 打开一个名为 word.txt 的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:14:47.970

您需要使用文件的完整路径。

```
with open('/path/to/words.txt', 'r') as handle:
    print handle.read() 
```

否则，它将使用您的当前目录。

```
import os
# Print your current directory
print os.path.abspath(os.curdir) 
```

# php - $.post 数据命名问题

> ID：14972692
> 
> 赞同：0
> 
> 时间：2013-02-20T05:09:46.800
> 
> 标签：php, javascript, jquery, ajax

你好，我做了一个 jquery ajax 帖子，它根据密钥调用 php 表单：密钥是通过`data-app`这里得到的代码：

```
$(document).ready(function(){
    $('.form1').keyup(function(){
        var value = $(this).val();
        var key = $(this).data('app');
        $.post('page2.php', { key : value }, function(data){
            $("div[ data-show='" + key + "' ]").text(data); 
        });
    });
}); 
```

问题是我在哪里指定数据值`key`而不是给我`data`我想要它命名为键的值，有没有一种方法可以使变量工作？所以`key`等于`data`值，而不是`key`_ _ _`$_POST['key'];``data-app="username"``key``username``$_POST['username'];`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:14:17.187

尝试：

```
$(document).ready(function(){
    $('.form1').keyup(function(){
        var value = $(this).val();
        var key = $(this).data('app');
        var obj = {};
        obj[key] = value;
        $.post('page2.php', obj, function(data){
            $("div[ data-show='" + key + "' ]").text(data); 
        });
    });
}); 
```

# dynamics-crm - Dynamics CRM - 创建产品的动态列表，每个产品都有一个成本字段

> ID：14972694
> 
> 赞同：0
> 
> 时间：2013-02-20T05:09:53.797
> 
> 标签：dynamics-crm

我是自定义动态 CRM 的新手，我需要实现一个带有列表的自定义表单，让您可以为水果店添加和删除“水果”。为了更好地说明我需要什么，我附上了一张照片![表单中的自定义字段控件](../Images/5ddb612b3b5409ad0a30b89cd097ebeb.png)

我在水果店有“x”种水果。水果列表可以通过店主进行管理和更改。我希望能够单击添加，从水果列表中选择一种水果，然后指定数量，并让它更新总数。

我希望这种形式适用于像 Opportunity 这样的实体。我从哪里开始进行这种级别的定制？

它是否涉及创建自定义银色灯光控制？或者有什么开箱即用的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:15:47.750

默认情况下，您没有任何事情可以完成。要扩展您经常使用 WebResource 的 CRM 用户界面，您可以浏览 html 或 Silverlight 两种类型的 WebResources。对我来说，最好的选择是 Silverlight。

您在这里有一些通用示例：

*   [http://blogs.msdn.com/b/crminthefield/archive/2011/06/23/how-to-create-a-silverlight-web-resource-that-interacts-with-crm-2011-forms.aspx](http://blogs.msdn.com/b/crminthefield/archive/2011/06/23/how-to-create-a-silverlight-web-resource-that-interacts-with-crm-2011-forms.aspx)
*   [http://msdn.microsoft.com/en-us/library/gg328358.aspx](http://msdn.microsoft.com/en-us/library/gg328358.aspx)

您有一些网格示例：

*   [http://ankit.inkeysolutions.com/2013/01/crm-2011-lookup-functionality-in.html](http://ankit.inkeysolutions.com/2013/01/crm-2011-lookup-functionality-in.html)

如果您需要与 CRM 数据库交互：

*   [http://msdn.microsoft.com/en-us/library/gg309558.aspx](http://msdn.microsoft.com/en-us/library/gg309558.aspx)
*   [http://community.dynamics.com/product/crm/crmtechnical/b/crminogic/archive/2011/07/27/json-and-silverlight-with-odataservice-in-crm-2011.aspx](http://community.dynamics.com/product/crm/crmtechnical/b/crminogic/archive/2011/07/27/json-and-silverlight-with-odataservice-in-crm-2011.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T05:24:56.797

现在使用的技术是可编辑的网格，javascript。银光死了。

# sql - sqlite3 echo 和 '<' 管道命令未按预期工作

> ID：14972697
> 
> 赞同：0
> 
> 时间：2013-02-20T05:10:07.460
> 
> 标签：sql, bash, ubuntu, sqlite

我正在阅读一[本 SQL 书籍](http://sql.learncodethehardway.org/ "艰难地学习 SQL")，作者正在使用 Sqlite3，这很棒，因为没有服务器可以搞乱。

在书中作者说要键入：

`sqlite3 -echo something.db < some.sql`

问题是没有任何东西回显到终端，甚至没有从“<”重定向命令创建的数据库。

有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:38:24.653

`something.db`是一个现有的数据库。`< some.sql`意味着它从该文件中选择数据并将其写入 sqlite 控制台。所以这两个文件都必须存在。

`something.db`必须是有效的 l sqlite3 数据库文件（或空文件或不存在的文件）；`some.sql`必须是包含您的命令的文本文件。

`-echo`参数指定它必须在执行之前打印命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:56:26.213

实际上，您显示的命令是从 sql 转储创建新数据库的正确方法。

您能否显示您的 sql 文件内容（`cat some.sql`）？我可以重现所描述行为的唯一方法是为 sqlite 提供一个空的 sql 文件。

试试这个命令，看看能不能得到同样的结果：

```
$ cat <<EOF > test.sql
> create table test1 (f1, f2, f3);
> insert into test1(f1, f2, f3) values ("foo", "bar", "baz");
> EOF
$ sqlite3 -echo test.db < test.sql
create table test1 (f1, f2, f3);
insert into test1(f1, f2, f3) values ("foo", "bar", "baz");
$ file test.db
test.db: SQLite 3.x database 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T17:09:45.480

根据您的评论和终端屏幕截图，我的印象是您的“some.sql”文件可能编码错误和/或以混淆 sqlite的[BOM开头。](http://en.wikipedia.org/wiki/Byte_order_mark)

您可以使用该`file`命令找出问题，如果这是问题，请使用`iconv`，`recode`或您最喜欢的文本编辑器将文件转换为您的终端期望的编码，以及正确的行尾（`\n`在 Linux 中又称为“LF”，`\r\n`又称为“CRLF”在 Windows 中）。

# html - 选定的选项卡失去其背景颜色

> ID：14972698
> 
> 赞同：0
> 
> 时间：2013-02-20T05:10:09.030
> 
> 标签：html, css, nav

我正在使用购买的主题开发 WP。

我已将导航栏移至底部，问题开始了。主题提供了一些在创建新页面时使用的默认主题。

现在的问题是，当我打开一个选择某些模板的页面（模板的名称是：关于、博客、图库或服务）时，当我从导航中选择页面时，它会丢失背景颜色（用于选定的选项卡）。主页或为页面选择“联系”模板时没有此问题。

我无法弄清楚是什么造成了问题。

这是我的 HTML：

```
<div id="footer">
  <!--MENU-->
  <nav>
    <a href="#" class="menu-toggle">&nbsp;</a>
    <div class="tmenu">

    </div>
  </nav>    
  <div class="smenu clearfix"><select id="mselect"></select></div>  

    <!--SOCIAL-->       
    <div class="social">
      <ul>

        <li><a href="#" id="play_pause" title="Music">&nbsp;</a></li>

        <li>
          <a href="http://facebook.com/<?php echo get_option('source_facebook'); ?>" title="<?php echo get_option('source_facebook_tip'); ?>">
            <img src="<?php echo get_template_directory_uri(); ?>/img/icons/mfacebook.png" alt="" title="" />
          </a>
        </li>

        <li>
          <a href="http://twitter.com/<?php echo get_option('source_twitter'); ?>" title="<?php echo get_option('source_twitter_tip'); ?>">
            <img src="<?php echo get_template_directory_uri(); ?>/img/icons/mtwitter.png" alt="" title="" />
          </a>
        </li>

      </ul>
    </div>

  </div>
</div> <!--FOOTER_INNER-->
</div>  <!--FOOTER-->

</body>
</html> 
```

这是CSS：

```
#footer {
  display: block;
  position: fixed;
  bottom: 0;
  right: 0;
  left: 0;
  z-index: 10;
}

nav {
  display:block;
  background: rgba(0, 0, 0, 0.52);
  margin:0;
  padding:0;
  border:0;
  outline:0;
  font-size:100%;
  vertical-align:baseline;
}

.tmenu {
  padding: 0;
}

a.menu-toggle:link, a.menu-toggle:visited {
  display:none;
}

.sf-vertical, .sf-vertical li {
  width: auto;
}

.menu ul li.current_page_item a {
  color: #fff !important;
  background: #ac0003 !important;
  border-left: 0;
  padding-left: 0;
}

.menu ul li a:link, .menu ul li a:visited {
  color: #fff;
  display: block;
  font-family: arial;
  font-size: 16px;
  text-transform: none;
  padding: 10px 20px;
}

.menu ul li a:hover {
  background:#ac0003;
} 
```

另外这里是该网站的[链接](http://topgreekgyms.gr)。您可以使用“admin123”进入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:17:30.393

当您单击联系列表项时，获取类“当前页面项”。

```
.menu ul li.current_page_item a {
color: #fff !important;
background: #ac0003 !important;
border-left: 0;
padding-left: 0;
} 
```

其他列表项没有此类。您是手动创建菜单还是使用 WP 创建自定义菜单？

如果您手动完成，列表项可能不会具有相同的事件处理程序。希望有帮助。

# objective-c - 触摸时删除 UIImageView

> ID：14972701
> 
> 赞同：0
> 
> 时间：2013-02-20T05:10:39.903
> 
> 标签：objective-c, cocoa-touch

我正在开发一个生成图像的项目，您基本上触摸它们并将它们删除。我将如何移除我触摸的对象？我曾想过制作一个可变数组来保存所有对象，但我似乎无法弄清楚任何事情。

```
GameViewController.m

#import "GameViewController.h"
#import "Cig.h"

@interface GameViewController ()

@end

@implementation GameViewController
@synthesize scoreLbl, timeLbl;

//CLASS ONLY VARS
BOOL isGameOver;
int timeInt;
int scoreInt;
int cigsOnScreen;
NSMutableArray *spawnedCigs;
//CLASS ONLY VARS

//TIMER
-(void)count {
    timeInt--;
    timeLbl.text = [NSString stringWithFormat:@"Time: %i", timeInt];

    if(timeInt == 0){
        isGameOver = YES;
        NSLog(@"Your Score For This Round: %i", scoreInt);
    }

    if(isGameOver == NO){
        [self performSelector:@selector(count) withObject:nil afterDelay:1];
    }
}
//TIMER

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)spawnCigs {
    for(int i =0 ; i < 5; i++){
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(arc4random()%760, arc4random()%430, 100, 23)];
        UIImage *image = [UIImage imageNamed:@"Cig.png"];
        [imageView setImage:image];
        Cig *cig = [[Cig alloc] init];
        [cig setTag:arc4random()%666];
        [cig setImage:imageView];
        [spawnedCigs addObject:cig];
        [self.view addSubview:imageView];
    }
    [self performSelector:@selector(spawnCigs) withObject:nil afterDelay:5];
}

-(void)reset {
    scoreLbl.text = @"Score:";
    timeLbl.text = @"Time:";
    isGameOver = NO;
    timeInt = 60;
    scoreInt = 0;
    cigsOnScreen = 0;
    spawnedCigs = [NSMutableArray arrayWithObjects:nil, nil];

    [self performSelector:@selector(count) withObject:nil afterDelay:1];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self reset];
    [self spawnCigs];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

代码非常混乱，所以请不要以此评判我。

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:40:52.150

采用

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
 for (UIImageView *view in [self.view subviews]) 
    {
        if (view.tag==1)
        {
            [view removeFromSuperview];
        }
        if (view.tag==2)
        {
            [view removeFromSuperview];
        }
    }

} 
```

试试这个你的问题将得到解决。不要忘记将选项卡传递给您的图像视图...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:43:51.597

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
  UITouch *touch=[[event allTouches]anyObject];
  CGPoint touchPoint = [touch locationInView:touch.view];;
  for (UIView *view in [self.view subviews]) 
  {
    if([view isMemberOfClass:[UIImageView class]])
    {
       if (CGRectContainsPoint(view.frame,touchPoint))
       {
         [view removeFromSuperview];
       }
    }
  }
} 
```

这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:37:51.060

通过使用

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

方法您将获得所选图像的图像视图。只需从超级视图中删除对象。

# c++ - 返回自己类型的结构的结构属性

> ID：14972703
> 
> 赞同：3
> 
> 时间：2013-02-20T05:10:55.510
> 
> 标签：c++, class, struct

我正在尝试在 C++ 中定义一个结构，该结构具有返回其自身类型的预定义值的属性。

就像许多用于矢量和颜色的 API 一样：

```
Vector.Zero; // Returns a vector with values 0, 0, 0
Color.White; // Returns a Color with values 1, 1, 1, 1 (on scale from 0 to 1)
Vector.Up; // Returns a vector with values 0, 1 , 0 (Y up) 
```

来源： http: [//msdn.microsoft.com/en-us/library/system.drawing.color.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.color.aspx) （MSDN 的颜色类型页面）

我一直在努力寻找几个小时，但我的内心甚至无法弄清楚它叫什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:17:09.843

```
//in h file
struct Vector {
 int x,y,z;

 static const Vector Zero; 
};

// in cpp file
const Vector Vector::Zero = {0,0,0}; 
```

像这样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T05:15:07.453

这是一个静态属性。不幸的是，C++ 没有任何类型的属性。要实现这一点，您可能需要静态方法或静态变量。我会推荐前者。

例如`Vector`，你会想要这样的东西：

```
struct Vector {
  int _x;
  int _y;
  int _z;

  Vector(int x, int y, int z) {
    _x = x;
    _y = y;
    _z = z;
  }

  static Vector Zero() {
    return Vector(0,0,0);
  }
} 
```

然后你会写`Vector::Zero()`得到零向量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T05:31:31.377

您可以使用静态成员来模仿它：

```
struct Color {
    float r, g, b;
    Foo(float v_r, float v_g, float v_b):
        r(v_r), g(v_g), b(v_b){};
    static const Color White;
};

const Color Color::White(1.0f, 1.0f, 1.0f);

// In your own code
Color theColor = Color::White; 
```

# jakarta-ee - 我的 Java Web 应用程序中的可嵌入国际化框架

> ID：14972704
> 
> 赞同：2
> 
> 时间：2013-02-20T05:10:57.033
> 
> 标签：jakarta-ee, localization, internationalization

你能给我推荐任何可以嵌入到我的 java web 应用程序中的开源本地化和国际化框架吗？因为我不想重新发明轮子。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:49:02.757

你可以试试 Cosmopolitan (c10n)：[http ://rodionmoiseev.github.com/c10n/](http://rodionmoiseev.github.com/c10n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-28T19:31:27.330

它对你有用[http://l10n.ws](http://l10n.ws)它对我有用

# javascript - 如何使用Javascript获取所有选定的选项文本表单多选

> ID：14972708
> 
> 赞同：27
> 
> 时间：2013-02-20T05:11:18.367
> 
> 标签：javascript, jquery, select

我在多选中获取所有选定选项时遇到问题

```
<select multiple="" title="" class="" id="fm_delivery_or_collection" name="fm_fields[fm_delivery_or_collection][]">
  <option value="90">Delivery or Collection1</option>
  <option value="91">Delivery or Collection2</option>
  <option value="92">Delivery or Collection3</option>
</select> 
```

贝娄是我的代码，它只返回我第一个选择的选项

```
var select = form.find('select')

for (var i = 0; i < select.length; i++) 
        {
            var s_id = jQuery(select[i]).attr('id');
            var str="",i;

            var e = document.getElementById(s_id);
            var strUser = e.options[e.selectedIndex].text;

            var name = jQuery(select[i]).attr('name')
            var str1 = jQuery(select[i]).attr('id').replace("fm_"," ")
            requestString += "<b>"+str1.replace(/_/g," ")+"</b>" + ':' +strUser+"<br>";
        } 
```

所以请建议我如何获取所有选定的选项文本以及我在哪里出错？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-20T06:00:12.963

你的评论*`please suggest me how can i get all selected option text`*，[**所以你可以试试这个**](http://jsfiddle.net/r4zq2/1/)：

```
$("#fm_delivery_or_collection option:selected").each(function () {
   var $this = $(this);
   if ($this.length) {
    var selText = $this.text();
    console.log(selText);
   }
}); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-08-17T13:50:54.903

立即完成所有操作

```
var text = $('#selector option:selected').toArray().map(item => item.text).join(); 
```

它像这样返回：

```
text1,text2,text3,text4 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-20T05:28:07.637

```
// Return an array of the selected opion values
// select is an HTML select element
function GetSelectValues(select) {
  var result = [];
  var options = select && select.options;
  var opt;

  for (var i=0, iLen=options.length; i<iLen; i++) {
    opt = options[i];

    if (opt.selected) {
      result.push(opt.value || opt.text);
    }
  }
  return result;
} 
```

将此功能传递给您的选择框，就像..

```
var selectBox = document.getElementsById('fm_delivery_or_collection');
alert(GetSelectValues(selectBox )); 
```

它将返回所选值的数组

**通过使用 Jquery**

```
$('select#fm_delivery_or_collection').val() 
```

如果它是一个倍数，则从 调用的`val`函数`select`将返回一个数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T05:16:03.677

试试这个

```
$("#fm_delivery_or_collection option").each(function(){
    if($(this).attr('selected') == 'selected')
    {
        var name = $("#fm_delivery_or_collection").attr('name')
        var str1 = $("#fm_delivery_or_collection").attr('id').replace("fm_"," ")
        requestString += "<b>"+str1.replace(/_/g," ")+"</b>" + ':' +strUser+"<br>";
     }
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-20T08:18:32.433

```
 $("#id :selected").each(function (i,sel) {
   alert($(sel).text());
 }); 
```

希望能帮助到你..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-11T06:47:00.500

只需添加这行代码：-

```
var reciever= jQuery('#to_select option:selected').toArray().map(item => item.text).join();
/* alert(reciever); */ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-22T08:00:04.730

[**试试这个链接**](https://jsfiddle.net/pasuvan/qrqv06su/5/)：

```
$("#selection option:selected").each(function () {
   var $this = $(this);
   if ($this.length) {
    var selText = $this.text();
    console.log(selText);
    $('#selected').append(selText+', ');
  }
}); 
```

# sql - 将笛卡尔坐标转换为地理数据中的纬度/经度

> ID：14972713
> 
> 赞同：1
> 
> 时间：2013-02-20T05:11:31.777
> 
> 标签：sql, c#-4.0, gis, sql-server-2012

我有一个数据库，它使用**GGRS87**参考系统，并包含对象的 xy 坐标。我需要将它们转换为纬度/经度，以便我可以使用地理数据类型将它们存储在 SQL Server 2012 中。

或者有没有办法可以直接使用这些 xy 坐标来创建地理数据？请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:46:28.373

你可以直接使用xy值来创建几何对象，只要你知道GGRS87坐标系的SRID代码（我认为是4121）。

然后使用[STGeomFromText](http://msdn.microsoft.com/en-us/library/bb933823.aspx)方法创建您的要素。例如

```
INSERT INTO SpatialTable (GeogCol1)
VALUES (geography::STGeomFromText('POINT(122 47)', 4121)); 
```

# php - 将变量传递给新的弹出窗口

> ID：14972720
> 
> 赞同：0
> 
> 时间：2013-02-20T05:12:25.193
> 
> 标签：php, forms, popup, href

我有一个表，其中在每一行中分配了小的 href 链接，我使用下面的代码设置了这些链接，工作正常：

```
<a href="popup.php" onclick="javascript:void window.open('popup.php','1361166642895','width=700,height=500,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=0,left=0,top=0');return false;"><h10>(check status)</h10></a> 
```

现在我不想将上面相同的 href 链接显示为静态，但想将我的变量值发送到弹出窗口，并且需要为每一行单独显示数据。简而言之，我想`$name`在弹出窗口中传递我的变量。我正在尝试下面的代码，但没有发生。即使我`<FORM>`试过 `GET`

```
<?php echo "<a href=popup.php?id=",$name,"><h10>(check status)</h10></a>";?> 
```

在 popup.php 页面上：

```
<?php echo $id = $_GET["id"]; ?> 
```

我想要的是使用任何方法（GET 或 HREF）传递变量，它应该在新的弹出窗口中打开，而不是在下一个选项卡或转发窗口中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:19:57.253

改变这个

```
 <?php echo "<a href=popup.php?id=",$name,"><h10>(check status)</h10></a>";?> 
```

到

```
<?php echo "<a target='_blank' href='popup.php?id=".$name."' onclick=\"window.open(this.href, 'popupwindow', width=400,height=300,scrollbars,resizable');return false;\"><h10>(check status)</h10></a>";?>
                                    ^              ^     ^ ^// here was the mistake 
```

您没有正确连接字符串，并且您错过`'`了`herf`属性。

用于`target="_blank"`在新选项卡或新浏览器中打开链接。

# ajax - 使用ajax发送多个数据

> ID：14972722
> 
> 赞同：1
> 
> 时间：2013-02-20T05:12:36.480
> 
> 标签：ajax, jsp

我想使用 ajax 在数据库中添加数据，我在 net 中找到了以下代码，它工作正常。

```
<script language='javascript'>
reqObj=null;
function saveCust(){
    document.getElementById('res').innerHTML='processing';
    if(window.XMLHttpRequest){
        reqObj=new XMLHttpRequest();
    }else {
        reqObj=new ActiveXObject('Microsoft.XMLHTTP');
    }
    reqObj.onreadystatechange=processSave;
    reqObj.open('POST','./custSave?reqObj.open('POST','./cName?id='+document.getElementById('CustCode').value,true);,true);
    reqObj.send(null);
}
function processSave(){
    if(reqObj.readyState==4){
        document.getElementById('res').innerHTML=reqObj.responseText;
    }
}
</script> 
```

上面的代码只发送一个字符串，但是我的表单中有 5 个字符串。

请任何人更改发送多个数据的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:31:36.523

问题是您在`reqObj.open`函数中发送了一个参数：

```
reqObj.open('POST','./custSave?reqObj.open('POST','./cName?id='+document.getElementById('CustCode').value,true);,true); 
```

请注意，您发送的唯一参数是`id`.

您可以在 QueryString 的风格中添加更多参数：

```
id=something&otherParameter=else //and more parameters 
```

* * *

IMO 处理 ajax 请求的最简单方法是使用 jQuery，如 BalusC 在[How to use Servlets and Ajax?](https://stackoverflow.com/q/4112686/1065197) .

根据那里的[示例和带有 PHP 的 jQuery Ajax POST 示例](https://stackoverflow.com/q/5004233/1065197)，您可以使用以下代码：

*   假设 5 个字符串的形式为

    ```
    function saveCust(){
        $('#res').html('processing');
        var $form = $(this);
        var serializedData = $form.serialize();
        $.post('./custSave', serializedData, function(responseText) {
            $('#res').html(responseText);
        });
    } 
    ```

*   假设表格外有数据

    ```
    function saveCust(){
        $('#res').html('processing');
        var $form = $(this);
        var serializedData = $form.serialize() + "&id=" + $('#CustCode').val();
        $.post('./custSave', serializedData, function(responseText) {
            $('#res').html(responseText);
        });
    } 
    ```

你甚至可以使用更多的 jQuery 函数来增强它，但这超出了这个答案的范围。

# javascript - Jquery 鼠标悬停值

> ID：14972726
> 
> 赞同：0
> 
> 时间：2013-02-20T05:13:18.557
> 
> 标签：javascript, jquery, html

我有以下 html 用于评估价格范围：

```
<li class='voteable-attribute off clearfix' id='attributes_price_range'>
            <label class='primary formField'>Price Range:
            </label>
                    <fieldset id='price_choices'>
        <legend class='offscreen'>Price Range:</legend>
            <p class='offscreen'>Price per person:</p>
        <ul class='clearfix price-0'>
            <li>
                <input type='radio' id='price-1' name='RestaurantsPriceRange2' value='1'>               <label for='price-1' class='offscreen'>
                    Cheap, Under $10
                </label>
            </li>
            <li>
                <input type='radio' id='price-2' name='RestaurantsPriceRange2' value='2'>               <label for='price-2' class='offscreen'>
                    Moderate, $11 - $30
                </label>
            </li>
            <li>
                <input type='radio' id='price-3' name='RestaurantsPriceRange2' value='3'>               <label for='price-3' class='offscreen'>
                    Spendy, $31 - $60
                </label>
            </li>
            <li>
                <input type='radio' id='price-4' name='RestaurantsPriceRange2' value='4'>               <label for='price-4' class='offscreen'>
                    Splurge, Over $61
                </label>
            </li>
        </ul>
    </fieldset>
            <span class='no-js-hidden pseudoLink' id='price_tip' title='' style='cursor: auto;'>Price per person:</span>
        <span class='no-js-hidden' id='price_range'>Roll over price, then click to vote </span>
</li> 
```

这些是我的 js 代码，我们将鼠标悬停在 ul 类中的任何 li 上，默认情况下 price-0 将替换为当前选定 li 的 id。

这是我的javascript。我希望 的类`price-0`更改`ul`为`li`您悬停在的 id 。

```
$('#price_choices ul').mouseover(function(){
        var val = $(this).find('li input').attr('value');

        $(this).removeClass(/price-[a-zA-Z0-9_]*/g, '');
        $(this).addClass('price-'+val+'');

    }); 
```

如何用指定的 id 替换类名？我当前的代码只是添加了类，我最终得到了一个看起来像这样的类列表`price-0 price-1 price-2..`等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:19:16.470

尝试：

```
$('#price_choices ul > li').mouseover(function(){
   var $li = $(this),
   val = $li.find('input').val();
    //alert(val);
   var preClass=  $li.parents("ul").attr("class"); 
   $li.parents("ul").removeClass(preClass);
   $li.parents("ul").addClass('price-'+val);
}); 
```

演示:: [jsFiddle](http://jsfiddle.net/a7WdF/)

# ruby-on-rails - 将复数 rails “resources” url 变成单数

> ID：14972727
> 
> 赞同：0
> 
> 时间：2013-02-20T05:13:21.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我的 routes.rb 文件中有

```
resources :shops 
```

我想要的，因为我想分隔索引并显示路线，但这会导致 /shops/ url

我真的很想把它做成 /shop - 最简单的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:15:20.363

如果您希望它们全部成为`/shop` `shop/1`等，那么请执行以下操作：

```
resources :shops, path: "shop" 
```

否则也许你可以做

```
resources :shops, except: :show
# then
resources :shops, only: :show, path: "shop"
# or
get "shop/:id", to: "shops#show", as: :shop 
```

# html - 加载链接后 已被选中但未提交

> ID：14972735
> 
> 赞同：0
> 
> 时间：2013-02-20T05:13:42.190
> 
> 标签：html, forms, submit, html-select

我有一个带有两个选项的表单，每当用户选择该选项时，我希望它转到一个 URL。这可以在不提交表格的情况下完成吗？如果没有，你能帮我提交部分吗？

这是我的代码：

```
<select>
    <option value="Webclient" name="">Web Client</a></option>
    <option value="DownloadClient" name="">Download Client</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:36:51.913

```
<select id="options" onchange="optionCheck()">
<option></option>
<option value="Webclient" name="">Web Client</a></option>
<option value="DownloadClient" name="">Download Client</option>
</select>
<script type="text/javascript">
function optionCheck(){
    var option = document.getElementById("options").value;
    if(option == "Webclient"){

        window.location = "http://yahoo.com";
    }
    if(option == "DownloadClient"){
        window.location = "http://google.com";
    }
 }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:19:48.237

```
<select name="forma" ONCHANGE="location = this.options[this.selectedIndex].value;">
 <option value="Home.php">Home</option>
 <option value="Contact.php">Contact</option>
 <option value="Sitemap.php">Sitemap</option>
</select> 
```

# android - 通过对话框返回值

> ID：14972736
> 
> 赞同：0
> 
> 时间：2013-02-20T05:13:46.137
> 
> 标签：android

我目前有一个应该返回对话框结果的方法。我正在使用的代码是

```
 private int ShowDialog(String FileName)
 {
      AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
      // set title
      alertDialogBuilder.setTitle("Play File");

            // set dialog message
            alertDialogBuilder
                .setMessage("Would you like .... file")
                .setCancelable(false)
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) 
                    {
                        dialog.cancel();
                        return 1;
                    }
                  })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        dialog.cancel();
                        return 0;
                    }
                });

             AlertDialog alert11 = alertDialogBuilder.create();
             alert11.show();

 } 
```

但似乎 onClick 方法应该是无效的。无论如何我可以让这个方法返回一个值，并反过来导致 ShowDialog 方法返回那个值。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:27:46.853

尝试这样的事情

```
private int ShowDialog(String FileName)
{
     AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
     // set title
     alertDialogBuilder.setTitle("Play File");

           // set dialog message
           alertDialogBuilder
               .setMessage("Would you like .... file")
               .setCancelable(false)
               .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog,int id) 
                   {
                       returnVal = 1;  // Instead of directly returning - set it here
                       dialog.dismiss();

                   }
                 })
               .setNegativeButton("No",new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog,int id) {
                       returnVal = 0;  // Instead of directly returning - set it here
                       dialog.dismiss();
                   }
               });

            AlertDialog alert11 = alertDialogBuilder.create();
            alert11.show();

     return returnVal; // return it here.
} 
```

这`returnVal`是您的活动中的成员变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:24:37.190

你不能。对话框是异步的，这意味着您的方法只能显示它，但只有在用户按下按钮之前才能知道对话框的实际值。您需要更改代码以适应此情况。单击按钮后，您可以调用容器类中的另一个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:25:40.857

`onClick()`按钮上的方法由`AlertDialog`系统在单独的线程上调用。正如您所看到的方法的返回类型是`void`，您不能返回任何值。

您可以做的是`Handler`在您的类上使用并调用一个方法并传递您可能需要的任何值。

# android - NullPointerException onLocationChanged GPS

> ID：14972746
> 
> 赞同：0
> 
> 时间：2013-02-20T05:14:45.237
> 
> 标签：android, commonsware

我已经尝试使用 commonsware 示例

这是活动

```
public class ConstantsBrowser extends ListActivity {
  private LocationManager lm;
  private LocationListener locListener;
  private TextView latTxt, lonTxt;
  private double dLat=0;
  private double dLon=0;
  Intent intent = null;
  private static final int ADD_ID = Menu.FIRST+1;
  private static final int DELETE_ID = Menu.FIRST+3;
  private static final int UPDATE_ID = Menu.FIRST+4;
  public static final int SHOW_SUB_ACTIVITY_VIEW=3;
  private DatabaseHelper db=null;
  private Cursor constantsCursor=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.banner);

    latTxt = (TextView) findViewById(R.id.latitudeTxt);
    lonTxt = (TextView) findViewById(R.id.longitudeTxt);

    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locListener = new MyLocationListener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, 10,locListener);

    db=new DatabaseHelper(this);
    constantsCursor=db
                      .getReadableDatabase()
                      .rawQuery("SELECT _ID, title, value "+
                                "FROM constants ORDER BY _ID",
                                null);

    ListAdapter adapter=new SimpleCursorAdapter(this,
                          R.layout.row, constantsCursor,
                          new String[] {
                                        DatabaseHelper.ID,
                                        DatabaseHelper.TITLE,
                                        DatabaseHelper.VALUE},
                          new int[] {R.id.id, R.id.alamat, R.id.value});

    setListAdapter(adapter);
    registerForContextMenu(getListView());
  }

  @Override
  public void onDestroy() {
    super.onDestroy();

    constantsCursor.close();
    db.close();
  }

  private class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location loc) {
            // TODO Auto-generated method stub
            if (loc != null) {
                latTxt.setText(String.valueOf(loc.getLatitude()));
                lonTxt.setText(String.valueOf(loc.getLongitude()));
            }
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, ADD_ID, Menu.NONE, "Data Baru")
        .setIcon(R.drawable.add)
        .setAlphabeticShortcut('a');

    return(super.onCreateOptionsMenu(menu));
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case ADD_ID:
        add();
        return(true);
    }

    return(super.onOptionsItemSelected(item));
  }

  @Override
  public void onCreateContextMenu(ContextMenu menu, View v,
                                    ContextMenu.ContextMenuInfo menuInfo) {
    menu.add(Menu.NONE, DELETE_ID, Menu.NONE, "Delete");
    menu.add(Menu.NONE, UPDATE_ID, Menu.NONE, "Update")
        .setAlphabeticShortcut('d');
  }

  @Override
  public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case DELETE_ID:
        AdapterView.AdapterContextMenuInfo info=
          (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

        delete(info.id);
        return(true);

      case UPDATE_ID:
          intent = new Intent(ConstantsBrowser.this, MainActivity.class);
            startActivityForResult(intent, SHOW_SUB_ACTIVITY_VIEW);
          return(true);
    }

    return(super.onOptionsItemSelected(item));
  }

  private void add() {
    LayoutInflater inflater=LayoutInflater.from(this);
    View addView=inflater.inflate(R.layout.add_edit, null);
    final DialogWrapper wrapper=new DialogWrapper(addView);

    new AlertDialog.Builder(this)
      .setTitle(R.string.add_title)
      .setView(addView)
      .setPositiveButton(R.string.ok,
                          new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,
                              int whichButton) {
          processAdd(wrapper);
        }
      })
      .setNegativeButton(R.string.cancel,
                          new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,
                              int whichButton) {
          // ignore, just dismiss
        }
      })
      .show();
  }

  private void delete(final long rowId) {
    if (rowId>0) {
      new AlertDialog.Builder(this)
        .setTitle(R.string.delete_title)
        .setPositiveButton(R.string.ok,
                            new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog,
                                int whichButton) {
            processDelete(rowId);
          }
        })
        .setNegativeButton(R.string.cancel,
                            new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog,
                                int whichButton) {
          // ignore, just dismiss
          }
        })
        .show();
    }
  }

  private void processAdd(DialogWrapper wrapper) {
    ContentValues values=new ContentValues(2);

    values.put(DatabaseHelper.TITLE, wrapper.getTitle());
    values.put(DatabaseHelper.VALUE, wrapper.getValue());

    db.getWritableDatabase().insert("constants", DatabaseHelper.TITLE, values);
    constantsCursor.requery();
  }

  private void processDelete(long rowId) {
    String[] args={String.valueOf(rowId)};

    db.getWritableDatabase().delete("constants", "_ID=?", args);
    constantsCursor.requery();
  }

  class DialogWrapper {
    EditText titleField=null;
    EditText valueField=null;
    View base=null;

    DialogWrapper(View base) {
      this.base=base;
      valueField=(EditText)base.findViewById(R.id.value);
    }

    String getTitle() {
      return(getTitleField().getText().toString());
    }

    String getValue() {
      return(getValueField().getText().toString());
    }

    private EditText getTitleField() {
      if (titleField==null) {
        titleField=(EditText)base.findViewById(R.id.title);
      }

      return(titleField);
    }

    private EditText getValueField() {
      if (valueField==null) {
        valueField=(EditText)base.findViewById(R.id.value);
      }

      return(valueField);
    }
  }
} 
```

我在这个活动中添加了 gps，但是当我尝试应用程序时强制关闭

这是清单

我添加一个权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
    </uses-permission>
    <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.CAMERA" > 
```

这是 logcat 空指针异常

```
02-20 12:07:32.203: ERROR/AndroidRuntime(8904): FATAL EXCEPTION: main
02-20 12:07:32.203: ERROR/AndroidRuntime(8904): java.lang.NullPointerException
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at com.commonsware.android.constants.ConstantsBrowser$MyLocationListener.onLocationChanged(ConstantsBrowser.java:98)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:227)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:160)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:176)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at android.os.Looper.loop(Looper.java:130)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at java.lang.reflect.Method.invoke(Method.java:507)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-20 12:07:32.203: ERROR/AndroidRuntime(8904):     at dalvik.system.NativeStart.main(Native Method)
02-20 12:07:32.226: WARN/ActivityManager(1308):   Force finishing activity com.commonsware.android.constants/.ConstantsBrowser 
```

空值在行`latTxt.setText(String.valueOf(loc.getLatitude()));`

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:03:13.950

`latTxt`一片空白。确保您的布局 XML 文件中有一个`<TextView>`带有 id的。`@+id/latitudeTxt`

# asp.net - 单选按钮未在转发器中触发 itemcommand 事件

> ID：14972749
> 
> 赞同：3
> 
> 时间：2013-02-20T05:14:54.583
> 
> 标签：asp.net, gridview, radio-button, custom-controls

我正在研究`asp.net` `custom control`我`repeater control`用来展示的地方`radio buttons`。点击时

我需要触发中继器。 我面临的问题不是射击能力，它没有, 和属性。 为了完成 I created ， drive i from和 add ，以及其中的属性。 我还在其中添加了一个，以便我可以以编程方式调用它的 click 事件来触发 repeaters 。 现在我面临的问题是我已经触发了事件，但仍然没有触发事件。 知道如何完成这个想法吗？`ItemCommand event``RadioButton`
`RadioButton``ItemCommend event``CommendArgument``CommandName`

`asp.net server control``RadioButton``CommendArgument``CommandName`
`Button``button``ItemCommand event`
`Button's click``ItemCommand`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:45:31.090

您可以在触发单选按钮时调用转发器`ItemCommand`事件。`OnCheckedChanged`

我认为主要问题是您不确定如何创建预期的参数`ItemCommand`，这是一个我相信会有所帮助的示例：

**ASPX：**

```
<asp:Repeater ID="rptColors" runat="server" onitemcommand="rptColors_ItemCommand">
    <ItemTemplate>
        <asp:RadioButton ID="rdbColour" Text='<%# Eval("Color") %>' AutoPostBack="true" runat="server" OnCheckedChanged="Checked" /> <br />
    </ItemTemplate>
</asp:Repeater> 
```

**后面的代码：**

```
public class Colours
{
    public string Color { get; set; }
}

public partial class Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            rptColors.DataSource = new List<Colours> { new Colours { Color = "Red" }, new Colours { Color = "Black" } };
            rptColors.DataBind();
        }
    }

    protected void Checked(object sender, EventArgs e)
    {
        foreach (RepeaterItem item in rptColors.Items)
        {
            RadioButton rdbColour = item.FindControl("rdbColour") as RadioButton;
            if (rdbColour.Text.Equals((sender as RadioButton).Text))
            {
                CommandEventArgs commandArgs = new CommandEventArgs("SomeCommand", rdbColour.Text);
                RepeaterCommandEventArgs repeaterArgs = new RepeaterCommandEventArgs(item, rdbColour, commandArgs);
                rptColors_ItemCommand(rdbColour, repeaterArgs);
            }
        }
    }

    protected void rptColors_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        //Runs when you select the radio button in the repeater
        System.Diagnostics.Debugger.Break();
    }
} 
```

# c# - 链接多个控件以共享一个事件

> ID：14972751
> 
> 赞同：1
> 
> 时间：2013-02-20T05:15:04.040
> 
> 标签：c#, .net, combobox, textbox, gps

![emt](../Images/84c2aebec6aefc6ab51cff785840eba8.png) 文字消息右侧的文本框必须通过文本更改事件进行更新。事件更改的文本框是当前具有 1234 Main St 地址的文本框。当其他组合框、文本框和收音机时出现问题使用按钮而不是街道地址来更新消息文本框。数据仅显示我是否返回地址文本框并触发事件更改。我能否以某种方式将紧急位置组框中的所有文本框链接在一起，以便在将数据输入其中任何一个时，它们会触发更改事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:01:48.593

不确定我是否理解你的问题，你想确保文本框不是“空的”吗？

```
private void textBoxAddress_TextChanged(object sender, EventArgs e)
{
    if (streetRadioButton.Checked && String.IsNullOrWhiteSpace(textBoxAddress.Text) == false)
    {
         // do stuff...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:31:13.560

这是一个想法！

步骤 1 添加所有事件

**为“紧急类型”**组框添加所有单选按钮选择更改的事件。

**为“紧急位置”**组框添加所有单选按钮选择更改的事件。

添加所有组合框和文本框 textchanged 事件。

Step2 编写函数

编写一个带有 case 语句的函数。我认为您需要两个案例声明，一个用于紧急类型，另一个用于紧急位置案例声明，假设从单选按钮获取价值。在案例声明中，您可以填充**“消息”**

步骤 3 对每个事件调用此函数。我希望它会有所帮助

# python - 如何在python中使用正则表达式

> ID：14972752
> 
> 赞同：0
> 
> 时间：2013-02-20T05:15:05.273
> 
> 标签：python, regex

我想使用数字变量正则表达式部分。

如果我想在这部分使用变量，我应该怎么做`(?P<hh>\d)`

我想输出包含输入数字的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:34:58.843

使用[字符串插值](http://docs.python.org/2/library/stdtypes.html#string-formatting)：

```
m = re.compile(r'\d{%d}:\d{%d}' % (var1, var2)) 
```

如果变量不是整数，您可能需要像这样转换类型：

```
m = re.compile(r'\d{%d}:\d{%d}' % (int(var1), int(var2))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:18:34.260

你的问题不清楚。

如果要捕获**regex 的某些特定部分，则**必须创建组（使用 pharentesis）：

```
hh = sys.argv[1]
m = re.compile(r'(?P<hh>\d):(\d{2})')
match = m.match(hh)

print match.group(1)
print match.group(2) 
```

例如，如果`hh = '1:23'`，上面的代码将打印：

> 1
> 23

* * *

现在，如果您需要**用某个变量****替换`\d{2}`**，您可以执行以下操作：

```
variable = r'\d{2}'
m = re.compile(r'(?P<hh>\d):%s' % variable) 
```

或者**，如果您只想替换`2`**，您可以执行以下操作：

```
variable = '2'
m = re.compile(r'(?P<hh>\d):\d{%s}' % variable) 
```

* * *

另一种选择可能是使用：

```
r'(?P<hh>\d):{0}'.format(variable) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:19:02.930

您可以将其作为字符串传递（我会先将其转义）：

```
m = re.compile(re.escape(hh) + r':\d{2}') 
```

# winforms - DevExpress 控件的编码 UI 测试不起作用

> ID：14972755
> 
> 赞同：1
> 
> 时间：2013-02-20T05:15:17.070
> 
> 标签：winforms, devexpress, coded-ui-tests, devexpress-windows-ui

我将开始新项目的工作，在该项目中我将 DevExpress 控件与 winform 应用程序一起使用。

我想**对 winforms 应用程序和 DevExpress 控件进行编码 UI 测试。**
我有 VS 2010 Ultimate 和 DevExpress Controls 12.2 版本（最新版本）。

在我的一个示例中，我使用 DevExpress.XtraGrid 的 GridControl 创建了 winform。当我为此网格控件创建编码 UI 测试时，它不起作用。
我的意思是它不支持它。

谁能给我解决方案/示例/教程来为 Winforms 中的 DevExpress 控件编写编码 UI。
谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:32:02.460

参考：[DevExpress 发布带有编码 UI 支持的 DXperience 12.1](http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/08/devexpress-releases-dxperience-12-1-with-coded-ui-support.aspx)和[这个](http://www.devexpress.com/products/net/controls/winforms/coded-ui/).

在这里，您将获得一些有助于您了解网格控制和其他方面的视频。

> 您还可以通过[3rd 方控件的编码 UI 测试扩展 - MSDN 的基本解释](http://blogs.msdn.com/b/visualstudioalm/archive/2011/10/28/coded-ui-test-extension-for-3rd-party-controls-the-basics-explained.aspx)文章和[使用编码用户界面测试验证代码的](http://msdn.microsoft.com/en-us/library/dd286726%28v=vs.110%29)文档。

更多参考：
[DevExpress 2012 GridControl Coded-ui-tests issue](https://stackoverflow.com/questions/12032879/devexpress-2012-gridcontrol-coded-ui-tests-issue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T18:09:27.133

好的，对于初学者来说，放弃 VS2010 并升级到 VS2013（包括最新更新）。如果你不这样做 - 停止阅读。

接下来是**版本控制**

为了获得可靠的记录和回放，您需要在您的 VS2013 Premium 开发盒上安装与您正在测试的应用程序使用的完全相同版本的 DevExpess。

例如，如果您正在测试的应用程序使用 DevExpress 14.1.8 - 在您编码的 ui 开发环境中安装该版本。如果您没有完全正确地进行版本控制 - 那么它根本就行不通。

完成该设置后，创建一个新的编码 ui 测试项目，您应该会自动添加一个 DevExpress 编码的 ui 扩展 dll。

现在启动您正在测试的应用程序。在 Visual Studio 中，您很可能会在创建项目后获得示例测试方法。在测试方法中的某处设置焦点，然后启动编码的 ui 记录器。现在您应该能够识别控件并使用记录器与它们进行交互。使用记录器中的生成代码将您的操作/控件标识保存到 UI 地图。

这应该给你一个很好的起点。如果你真的需要我的帮助，那么你可以给我发私信，我可以分享很多超出此范围的信息。我也在使用 Skype，并且在专门测试基于 DevExpress 的 WinForms 的时间里取得了很大的进步。

我还可以与您分享一些有用的包装控件，它们包装了 DXGrid 之类的东西，让您的生活更轻松。

# html - 在图像和 div 之间没有空间

> ID：14972759
> 
> 赞同：1
> 
> 时间：2013-02-20T05:15:51.337
> 
> 标签：html, css, space

我只是想通过使用 CSS 来创建一个新闻框，而没有那么多 IMG 或 TABLE 废话。它工作得很好，但我的图像和图片下方的彩色条之间总会出现一个空间，它应该直接在图片下方，而不是之间有一些空间。这是我的代码：

```
<div id="mainbody">
  <div class="news_box">
    <div class="news_box_inside">
      <img src="img/newsbox1.jpg" width="270" height="140" border="0" />
      <div class="news_box_bar"></div>
    </div>
  </div>
</div>

#mainbody {
  margin: 0 auto;
  width: 900px;
  padding-top:30px;
  padding-bottom:30px;
}

.news_box {
  float:left;
  width:288px;
  height:348px;
  background-color:#DDDDDD;
  margin-right:5px;
  margin-left:5px;
  border:1px;
  border-style:solid;
  border-color:#BBBBBB;
}

.news_box_inside {
  float:left;
  margin:9px;
  width:270px;
  height:330px;
  background-color:#FCFCFC;
}

.news_box_bar {
  background-color:#540000;
  height:43px;
  border:1px solid #892d2d;
} 
```

我试图将图像的边距和填充设置为零或尝试位置：或顶部：但不知何故我无法摆脱空间。有人有好的解决方案吗？

最好的祝福，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:21:01.690

将此添加到您的 CSS 中：

```
.news_box_inside > img {
    display: block;
} 
```

示例：http: [//jsfiddle.net/grc4/TV4zT/](http://jsfiddle.net/grc4/TV4zT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:23:06.470

克里斯，

如果您`<img>`默认检查元素，它的`css`属性`display`设置为`inline-block`，所以我建议在`<img>`元素上应用样式并制作它`display:block`

```
<img src="img/newsbox1.jpg" width="270" height="140" border="0" style="display:block" /> 
```

[**演示**](http://jsfiddle.net/kgcRL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:20:27.853

只需将边距添加到您的新闻栏，如 showm：[**DEMO**](http://jsfiddle.net/d2aDF/)

```
.news_box_bar {
  background-color:#540000;
  height:43px;
  border:1px solid #892d2d;
  margin-top:-5px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:20:31.830

```
.news_box_bar {
  background-color:#540000;
  margin-top:-5px;
 height:43px;
  border:1px solid #892d2d;
} 
```

在你的 CSS 类中设置它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T13:07:38.260

使用下面的链接查看您的问题的有效解决方案

[http://jsfiddle.net/v7NwR/](http://jsfiddle.net/v7NwR/)

```
<div id="mainbody">
  <div class="news_box">
   <div class="news_box_inside">
    <figure><img src="http://static.adzerk.net/Advertisers/a04d6b3e25c747f48ef794d13e765425.jpg"  border="0" /></figure>
      <div class="news_box_bar">sdfgsdfgsdfg</div>
    </div>
  </div>
</div> 
```

css

```
.news_box{ float:left; border:5px #444 solid;}
figure{  font-size:0%;}

#mainbody{ color:#000;}
.news_box_bar{ background:red;} 
```

# symfony-2.1 - 如何根据接受语言标题在 Symfony 2.1 中翻译语言？

> ID：14972765
> 
> 赞同：0
> 
> 时间：2013-02-20T05:16:45.747
> 
> 标签：symfony-2.1

如果浏览器接受语言是 de_DE 或 de（德语），我们如何自动转到德语，否则转到英语（所有其他浏览器接受语言）？

我的听众

```
namespace xxxx
use Symfony\Component\DependencyInjection\ContainerInterface;

use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class LocaleListener
{
    private $container;
    private $defaultLocale;

    public function __construct(ContainerInterface $container, $defaultLocale)
    {
        $this->container = $container;
        $this->defaultLocale = $defaultLocale;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        if (HttpKernelInterface::MASTER_REQUEST !== $event->getRequestType()) {
            return;
        }

        if (!$this->container->has('request')) {
            return;
        }

        $request = $this->container->get('request');
        $request->setLocale($request->getPreferredLanguage($this->defaultLocale));
    }
} 
```

服务.yml

```
 my_locale_listener:
    class: Wishbot\WebBundle\Listener\LocaleListener
    tags: [{ name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 100 }]
    arguments: [ @service_container, ['de','en' ] ] 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T07:34:34.773

我建议你阅读 Symfony 2 文档中的翻译章节。

[http://symfony.com/doc/2.0/book/translation.html](http://symfony.com/doc/2.0/book/translation.html)

它将向您解释如何以不同的语言维护您的网站。

# jquery - 滑动切换不起作用

> ID：14972769
> 
> 赞同：1
> 
> 时间：2013-02-20T05:17:13.300
> 
> 标签：jquery, slidetoggle

SlideToggle 在我的网站上由于某种原因无法正常工作。主要问题它没有向下滑动，当我单击“显示”按钮时，它只是立即显示内容。但它完美地向上滑动以通过按“隐藏”按钮隐藏内容。这是我的 JavaScript。谁知道这里可能是什么问题？

```
$(document).ready(function(e) {
$('.newsFull').hide();
$('.switch').click(function(e) {
    $(this).parent().children('.switch').toggle();
    var text = $(this).parent().children('.newsFull');
    text.slideToggle();

}); 
```

});

这是一个链接[http://jsfiddle.net/ZxF9j/](http://jsfiddle.net/ZxF9j/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:35:26.323

只需添加

```
.newsFull {display:inline-block;} 
```

到你的 CSS

[检查这个小提琴](http://jsfiddle.net/ZxF9j/6/)

# jquery - 单击链接时，jquery 在两个 UL 之间切换

> ID：14972772
> 
> 赞同：0
> 
> 时间：2013-02-20T05:17:46.207
> 
> 标签：jquery, css, twitter-bootstrap

我试图抓住我的头来隐藏和展示两个 UL。我正在尝试创建一个产品规格表。如果我能得到一些帮助来完成这个，那就太晚了，我在过去一两个小时里一直在努力解决这个问题..

你可以在这里看到一个活生生的例子：http: [//saeledlights.com/products/led-light-bars/high-performance-single-row/](http://saeledlights.com/products/led-light-bars/high-performance-single-row/)

## 产品规格表的外观：

![在此处输入图像描述](../Images/797d56fca4d9c3274a9d4bbd36d37ce0.png)

## 设想：

当用户访问产品页面时，第一次切换将始终可见。当他们单击第二/第三/第四切换时，它将更改`<ul>`并隐藏所有其他切换。和`<ul>`切换按钮具有匹配的类名，但按钮末尾有一个 -toggle。

**这是html：**

```
<div class="single-product row">
  <div class="grid_3 alpha">
    <img src="http://example.com/wp-content/uploads/2012/12/SW12231_thumbnail.png" alt="SW12231_thumbnail" width="200" height="200" class="alignnone product-image size-full wp-image-151" />
  </div>
  <div class="grid_9 product-specs-container omega">
    <ul class="product-specs first">
      <li><strong>MODEL:</strong>SW12231-6F</li>
      <li><strong>WATTS:</strong>24W</li>
      <li><strong>TYPE:</strong>FLOOD</li>
      <li><strong>LED's:</strong>6 x 5W Cree</li>
      <li><strong>AMP DRAW 12V/24V:</strong>1.65/0.93</li>
      <li><strong>RAW LUMENS:</strong>2250</li>
      <li><strong>IP RATING:</strong>68</li>
      <li><strong>BEAM DISTANCE:</strong>1083'</li>
      <li><strong>PEAK BEAM INTENSITY (cd):</strong>22400</li>
      <li><strong>SIZE:</strong>7.38 x 1.6 x 3.3</li>
      <li><strong>VOLTAGE:</strong>9V-30V</li>
    </ul>
    <ul class="product-specs second">
      <li><strong>MODEL:</strong>1234124412231-6F</li>
      <li><strong>WATTS:</strong>12341244W</li>
      <li><strong>TYPE:</strong>12341244OOD</li>
      <li><strong>LED's:</strong>12341244x 5W Cree</li>
      <li><strong>AMP DRAW 12V/24V:</strong>1234124465/0.93</li>
      <li><strong>RAW LUMENS:</strong>1234124450</li>
      <li><strong>IP RATING:</strong>12341244</li>
      <li><strong>BEAM DISTANCE:</strong>1234124483'</li>
      <li><strong>PEAK BEAM INTENSITY (cd):</strong>12341244400</li>
      <li><strong>SIZE:</strong>1234124438 x 1.6 x 3.3</li>
      <li><strong>VOLTAGE:</strong>12341244-30V</li>
    </ul>
    <div class="grid_9 alpha omega">
      <div class="product-thumbnail"><a href="#" class="first-toggle">SPOT</a></div><div class="product-thumbnail"><a href="#" class="second-toggle">FLOOD</a></div>
    </div>
  </div>
</div> 
```

## 到目前为止，我拥有的 Jquery。

```
$('.first-toggle').toggle(function(){
    var first   = $(this).closest('.single-product').children('.product-specs-container').children('.first');
    var second  = $(this).closest('.single-product').children('.product-specs-container').children('.second');
    second.removeClass('hidden current').addClass('hidden');
    first.removeClass('hidden current').addClass('current');
}, function(){
    second.removeClass('hidden current').addClass('hidden');
    first.removeClass('hidden current').addClass('current');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:09:11.470

看到这个：http: [//jsfiddle.net/czSU8/2/](http://jsfiddle.net/czSU8/2/)

```
$(" ul.second").addClass('hidden');

  $('.first-toggle').click(function(){
  var first   = $(this).closest('.single-product').children('.product-specs-container').children('.first');
  var second  = $(this).closest('.single-product').children('.product-specs-container').children('.second');
  second.removeClass('hidden current').addClass('hidden');
  first.removeClass('hidden current').addClass('current');
  event.preventDefault();
});

$('.second-toggle').click(function(){
   var first   = $(this).closest('.single-product').children('.product-specs-container').children('.first');
  var second  = $(this).closest('.single-product').children('.product-specs-container').children('.second');
  first.removeClass('hidden current').addClass('hidden');
  second.removeClass('hidden current').addClass('current');
  event.preventDefault();
}); 
```

**注意：toggle() 自 jQuery 1.9 及更高版本起已弃用**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:33:37.060

```
$(" ul.second").addClass('hidden');
$('a.first-toggle').click(function(){
      $('ul.second').toggle();
      $('ul.first').toggle();         
};

$('a.second-toggle').click(function(){
      $('ul.second').toggle();
      $('ul.first').toggle();         
}; 
```

参考[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:02:06.157

你做错了..

你不能在切换函数中有两个回调......注意：从jquery 1.9开始不推荐使用切换（据我所知）......

所以根据我的理解..我创造了这个[小提琴](http://jsfiddle.net/zJCnz/)，这样你就可以看看

我使用`hide()`并`slideDown()`给它一个切换效果......

这是代码..

**html**

```
<div class="product-thumbnail"><a href="#" class="first">SPOT</a></div> // removed -toggle
<div class="product-thumbnail"><a href="#" class="second">FLOOD</a></div> // removed -toggle 
```

**jQuery**

```
 $('ul').not('.first').hide();  <-- hide all ul expect first here
 $('div.product-thumbnail a').click(function(){  //call click function in buttons
    var classname=$(this).attr('class'); // get the clicked button class..i removed `-toggle` here so that i can handle this with one function
   $('ul').hide(); // hide all ui first 
   $('ul.'+classname).slideDown(); //slidedown the one you clicked 
}); 
```

**注意：这将适用于多个，只是应该创建按钮并且按钮类应该与's 类`<ui>`完全相同`<ui>`**

# python - Notepad++ 中的 Python 语法高亮显示

> ID：14972773
> 
> 赞同：4
> 
> 时间：2013-02-20T05:17:47.130
> 
> 标签：python, notepad++

我知道 Notepad++ 支持 Python，但在语言菜单下我找不到它！在“P”处，它只列出了 Pascal、Perl、PHP、Postscript、PowerShell，奇怪的是，还列出了属性。我正在编写一些 Python 脚本，我希望突出显示语法。如何激活 Python 突出显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T08:30:00.863

也许它被禁用了。签入偏好 | 语言菜单/选项卡设置（如果不在禁用项目中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T05:41:04.010

诡异的。我在这台 PC 上有 Notepad++ v6.3，它在那里：

![在此处输入图像描述](../Images/c3940971b59a502bfb0d83413b93d36a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T05:45:13.943

尝试卸载并重新安装 Notepad++。请务必从 SourceForge 获取最新版本 -

[http://sourceforge.net/projects/notepad-plus/](http://sourceforge.net/projects/notepad-plus/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-24T16:08:26.413

是的，python 位于语言列表的底部（不在 P 项下 - 我相信在我玩过设置后它已从 P 中移出）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-11T00:56:10.973

在我的 notepad++ v7.5.8 中，Python*不在*P 部分，但*在*语言菜单的底部。

[![看看照片。](../Images/18b6d4c13d10cc08aa61c350caeb2fe1.png)](https://i.stack.imgur.com/ti2rt.png)

这是我的notepad++版本的默认安排，所以如果你在设置下更改它，所有的赌注都会被取消。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T10:00:27.723

尝试卸载并安装新版本的[记事本++](https://notepad-plus-plus.org/download/v6.9.1.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-26T17:46:11.027

请确保它没有被禁用。我也发生在我身上。

要检查转到首选项，请单击左侧的语言项目并确保 python 不是禁用的语言。应用更改后重新启动记事本++。

# c++ - 用于 MS VC++ 的 gcc-xml 等效/源解析工具

> ID：14972774
> 
> 赞同：0
> 
> 时间：2013-02-20T05:17:47.403
> 
> 标签：c++, parsing, visual-c++, compiler-construction, code-generation

是否有用于 Visual C++ 编译器的**[gcc-xml](http://www.gccxml.org/)**等效或类似工具，可以反映 C++ 源代码的内部结构？

我的目标是通过使用 C++（本机 C++）源或头文件作为输入来生成输出，这样：

1.  处理所有预处理器指令。（这已经可以通过 /P、/E 或 /EP 编译器开关来实现。）
2.  所有`typedef`s 都扩展为它们的基本类型。
3.  获得所有变量/函数/类/成员名称及其签名的列表。
4.  可选地，可以获得所有实例化模板类的列表。

例如`typedef`，这段代码：

```
typedef string my_type;
my_type s1; 
```

扩展为：

```
std::basic_string<char, std::char_traits<char>, std::allocator<char> > s1; 
```

或者可以让我做到这一点的东西。

我知道这可以通过使用**gcc-xml**（使用**gcc**作为中间编译器）或[一些非 MSVC 选项来实现](https://stackoverflow.com/questions/1742171/is-there-a-c-header-parser-tool-for-wrapper-generation-like-gccxml)。但是重要的要求是“编译全部由VC++完成”。

任何可以解决至少一个后续功能或指导我完成目标的解决方案或解决方法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:19:15.060

Semantic Designs（我的公司）提供了 DMS Software Reengineering Toolkit，带有用于各种 C++ 方言的 C++ 解析器，包括 MS Visual Studio。

DMS 并不是专门为生成您想要的数据而设计的，但它会很容易地生成它。DMS by design 是一种可定制的实用工具，需要进行一些配置才能获得定制的答案。在您的情况下，您想要的几乎所有东西都可以在 DMS 的 C++ 符号表中找到，因此自定义将是“遍历符号表，格式化并提取您想要的东西”。有一套完整的 API 可以支持这样做（以及许多其他有用的程序分析/操作任务）。

# r - 如何使用现有的时间序列预测时间序列，然后使用 R 比较残差

> ID：14972779
> 
> 赞同：0
> 
> 时间：2013-02-20T05:18:11.013
> 
> 标签：r, time-series

我对 R 很陌生。我有一个时间序列数据，我只是通过

```
plot(ts(data)) 
```

可以在此处找到该图的快照：[https ://docs.google.com/file/d/0B6GUNg-8d30vclo2WWg4TTJaMGs/edit?usp=sharing](https://docs.google.com/file/d/0B6GUNg-8d30vclo2WWg4TTJaMGs/edit?usp=sharing)

我已经阅读了一些有关预测时间序列的文章，但是这些解释的维度太多，我不确定该遵循哪一个！是否有任何分步程序从原始数据生成预测的时间序列，然后根据残差进行比较？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:55:30.413

尝试这个：

```
library(forecast)
fit <- auto.arima(data)
fcast <- forecast(fit)
accuracy(fcast) 
```

详细解释可以在[http://otexts.com/fpp/找到](http://otexts.com/fpp/)

# mysql - MySQL 将所有内容选择为一个大字符串（列和行）

> ID：14972780
> 
> 赞同：6
> 
> 时间：2013-02-20T05:18:16.133
> 
> 标签：mysql, sql

我有一个大的 MySQL SELECT 查询，我只需要转换成一个字符串，所以我可以用它进行更新，而不必使用两个单独的查询。为简单起见，假设我们有一个返回此结果的 SELECT 查询：

![在此处输入图像描述](../Images/7c707eb2d361147f8540119ca53a28ab.png)

我如何将所有这些转换成这样的东西：

```
1,Bob,20;2,Adam,30;3,Steve,40; 
```

我可以用它来更新其他表吗？

知道列数和行数都可以改变并且不是静态的。（非常重要！**尤其是列**！）。我怎样才能做到这一点？我认为`CONCAT()`在这种情况下无济于事。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T05:28:31.543

你能试试这个吗？

```
SELECT group_concat(concat(id, ',', name, ',', age) separator ';')
FROM test 
```

[http://www.sqlfiddle.com/#!2/915557/9](http://www.sqlfiddle.com/#!2/915557/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T09:19:09.783

如果您不是在寻找单独的查询来执行此任务，则可以通过查询本身来实现。您可以根据查询选择结果插入另一个表并更新表。

假设您的原始表是 table_from 并且您需要将其复制到 table_to （进一步假设 table_from 包含上述原始数据），

要将内容从 table_from 插入 table_to，

```
insert into table_to(id, name, age)
  select tf.id, tf.name, tf.age
  from table_from tf
  where tf.id != 3; 
```

如果您传递表的确切列数，则可以省略列名，只传递对您的情况有用的值。

```
insert into table_to
  select tf.id, tf.name, tf.age
  from table_from tf
  where tf.id != 3; 
```

要从 table_from 更新 table_to 的内容，

```
update table_to tt, table_from tf
  set tt.name = "Chandi"
  where tt.id = tf.id and tf.id = 1; 
```

[http://www.sqlfiddle.com/#!2/af43a/1](http://www.sqlfiddle.com/#!2/af43a/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T06:06:32.883

尝试这个

```
SET @colnames := (SELECT GROUP_CONCAT(COLUMN_NAME, '\', \'') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'test' AND TABLE_SCHEMA = 'db');
SET @query := CONCAT('SELECT GROUP_CONCAT(', @colnames, 'SEPARATOR \';\') FROM test');
PREPARE STMT FROM @query;
EXECUTE STMT; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-25T17:07:28.493

您也可以使用 .csv 文件。Micheal McLaughlin 有一些关于如何做到这一点的非常好的演练。 [http://michaelmclaughlin.info/db1/lesson-7-aggregation/mysql-csv-upload/](http://michaelmclaughlin.info/db1/lesson-7-aggregation/mysql-csv-upload/)

# svn - 在没有主干的 SVN 存储库中创建分支

> ID：14972783
> 
> 赞同：-1
> 
> 时间：2013-02-20T05:18:41.493
> 
> 标签：svn

是否可以在没有主干的 SVN 存储库中创建分支文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:20:57.503

你可以随心所欲地安排东西。树干/分支/任何东西只是一个常见的设置，所以人们会知道在哪里寻找东西。但是您可以随心所欲地调用文件夹，或者将它们放在您想要的任何位置，或者根本没有它们。

唯一的问题是，如果您的分支文件夹位于其他文件所在的位置，则检出 repo 也会下载所有分支。您可以将包含深度设置为“排除”以避免这种情况，但在 repo 浏览器中需要一些摆弄。这就是“主干”拥有自己的目录的全部原因。

# com - ATL COM 服务器生命周期

> ID：14972791
> 
> 赞同：4
> 
> 时间：2013-02-20T05:19:11.957
> 
> 标签：com, atl

我有一个在 ATL 的帮助下编写的进程外 COM 服务器。在正常情况下，可以方便地为您处理该服务器的生命周期，但是如果客户端进程在释放其接口之前死亡，则服务器似乎会永远徘徊。

有没有办法（或我不知道的超时）允许服务器在没有客户端连接时进入其关闭过程。或者我想另一种说法是 ATL/COM 如何处理崩溃客户端的引用计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T08:44:37.110

在您的 COM 服务器中取消引用存根会在几分钟内超时，因此它不会永远持续下去。但是，您可能遇到的另一个问题是，作为操作的一部分，您的服务器中的 COM 对象具有交叉引用，这些交叉引用未随着连接客户端的突然死亡而正确释放。在这种情况下，您的 COM 对象将保持对服务器进程的锁定，并防止它发生您希望发生的自动终止。

# ubuntu - nginx - nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)

> ID：14972792
> 
> 赞同：312
> 
> 时间：2013-02-20T05:19:13.903
> 
> 标签：ubuntu, nginx

突然间我收到以下 nginx 错误

```
 * Restarting nginx
 * Stopping nginx nginx
   ...done.
 * Starting nginx nginx
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] still could not bind()
   ...done.
   ...done. 
```

如果我跑

```
lsof -i :80 or sudo fuser -k 80/tcp 
```

我什么都得不到。80端口什么都没有

然后我运行以下命令：

```
sudo netstat -pan | grep ":80"
tcp        0      0 127.0.0.1:8070          0.0.0.0:*               LISTEN      15056/uwsgi     
tcp        0      0 10.170.35.97:39567      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39564      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39584      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39566      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39571      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39580      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39562      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39582      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39586      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39575      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39579      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39560      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39587      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39591      10.158.58.13:8080       TIME_WAIT   -               
tcp        0      0 10.170.35.97:39589      10.158.58.13:8080       TIME_WAIT   - 
```

我难住了。我该如何调试？

我在端口 8070 上使用带有代理传递的 uwsgi。uwsgi 正在运行。Nginx 不是。我正在使用 ubuntu 12.4

以下是我的 nginx 配置文件的相关部分

```
upstream uwsgi_frontend {
          server 127.0.0.1:8070;
        }
server {
listen 80;
        server_name 127.0.0.1;
        location = /favicon.ico {
                  log_not_found off;
                }

                location / {
                       include uwsgi_params;
                       uwsgi_buffering off;

                       uwsgi_pass 127.0.0.1:8070;
                 }
        } 
```

这是我在 ubuntu 12.04 上安装 nginx 的方法

```
nginx=stable;add-apt-repository ppa:nginx/$nginx;
apt-get update
apt get install nginx-full 
```

* * *

## 回答 #1

> 赞同：340
> 
> 时间：2013-05-28T17:27:13.493

我通过运行解决了这个问题`sudo apachectl stop`- 结果发现 apache 正在后台运行并阻止 nginx 在所需的端口上启动。

在 ubuntu 上运行`sudo /etc/init.d/apache2 stop`

* * *

## 回答 #2

> 赞同：222
> 
> 时间：2013-02-26T23:52:47.663

`[::]:80`是一个ipv6地址。

如果您的 nginx 配置正在侦听端口 80 和端口，则可能会导致此错误`[::]:80`。

我的默认站点可用文件中有以下内容：

```
listen 80;
listen [::]:80 default_server; 
```

您可以通过添加以下内容`ipv6only=on`来解决此`[::]:80`问题：

```
listen 80;
listen [::]:80 ipv6only=on default_server; 
```

有关更多信息，请参阅：

[http://forum.linode.com/viewtopic.php?t=8580](http://forum.linode.com/viewtopic.php?t=8580)

[http://wiki.nginx.org/HttpCoreModule#listen](http://wiki.nginx.org/HttpCoreModule#listen)

* * *

## 回答 #3

> 赞同：208
> 
> 时间：2018-08-03T03:22:56.863

我的情况不同，我不得不杀死正在运行的 Nginx 来重新启动它。

代替

```
sudo systemctl restart nginx 
```

我不得不使用：

```
sudo pkill -f nginx & wait $!
sudo systemctl start nginx 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2013-02-24T12:47:22.490

我发现了我以前从未遇到过的问题。

我只需要删除`/etc/nginx/sites-available/default`. 然后它起作用了。

此删除将仅删除符号链接，作为备份，您可以在 `/etc/nginx/sites-enabled/default`

我的会议在`/etc/nginx/default`.

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2013-05-29T05:37:04.920

我也遇到了同样的错误。

> nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)

当我在浏览器中输入 localhost 时，我得到了

> 有用！

这是此服务器的默认网页。

Web 服务器软件正在运行，但尚未添加任何内容。而不是 nginx 欢迎页面，apache2 在同一个端口上运行，

1.  找到 apache2 **ports.conf**文件

    ```
    sudo /etc/apache2/ports.conf 
    ```

2.  然后更改端口`80`，我将其设置为`70`

3.  保存文件

4.  重新启动系统

它也适用于您，如果您在浏览器中键入 localhost，您将获得 nginx 欢迎页面

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2018-03-29T04:49:23.957

尝试执行此命令

```
sudo fuser -k 443/tcp
service nginx restart 
```

*fuser*命令将找到进程 id(PID) 并且*-k*标志将终止启用 nginx 重新启动的进程。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-01-16T17:54:43.217

我的问题是我有重叠的监听指令。我设法通过运行找出重叠的指令

```
grep -r listen /etc/nginx/* 
```

两个文件在同一个端口监听：

```
/etc/nginx/conf.d/default.conf:           listen 80;  
/etc/nginx/sites-enabled/default.conf:    listen 80; 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2021-03-19T11:06:38.383

我通过运行解决了

```
sudo killall apache2

sudo fuser -k 443/tcp 
```

最后

```
sudo service nginx start 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-06-11T15:12:19.733

我在letsencrypt（certbot）和nginx中遇到了同样的问题，

参考：[https ://github.com/certbot/certbot/issues/5486](https://github.com/certbot/certbot/issues/5486)

这个错误还没有解决办法

因此，更改了 cron 以进行更新~~（在更新后重新加载）~~（使用来自 certbot 的建议）

```
-- in /etc/cron.d/certbot
from
0 */12 * * * root test -x /usr/bin/certbot -a \! -d /run/systemd/system && perl -e 'sleep int(rand(3600))' && certbot -q renew 
to
0 */12 * * * root test -x /usr/bin/certbot -a \! -d /run/systemd/system && perl -e 'sleep int(rand(3600))' && certbot -q renew --pre-hook "service nginx stop" --post-hook "service nginx start" 
```

日志（短）：

```
-- in /var/log/syslog
Jun 10 00:14:25 localhost systemd[1]: Starting Certbot...
Jun 10 00:14:38 localhost certbot[22222]: nginx: [error] open() "/run/nginx.pid$
Jun 10 00:14:41 localhost certbot[22222]: Hook command "nginx" returned error c$
Jun 10 00:14:41 localhost certbot[22222]: Error output from nginx:
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:443 $
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:80 f$
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:443 $
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:80 f$
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:443 $
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:80 f$
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:443 $
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:80 f$
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:443 $
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] bind() to 0.0.0.0:80 f$
Jun 10 00:14:41 localhost certbot[22222]: nginx: [emerg] still could not bind()
Jun 10 00:14:41 localhost systemd[1]: Started Certbot.

-- in /var/log/nginx/error.log
2018/06/10 00:14:27 [notice] 22233#22233: signal process started
2018/06/10 00:14:31 [notice] 22237#22237: signal process started
2018/06/10 00:14:33 [notice] 22240#22240: signal process started
2018/06/10 00:14:34 [notice] 22245#22245: signal process started
2018/06/10 00:14:38 [notice] 22255#22255: signal process started
2018/06/10 00:14:38 [error] 22255#22255: open() "/run/nginx.pid" failed (2: No $
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:443 failed (98: Addr$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:80 failed (98: Addre$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:443 failed (98: Addr$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:80 failed (98: Addre$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:443 failed (98: Addr$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:80 failed (98: Addre$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:443 failed (98: Addr$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:80 failed (98: Addre$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:443 failed (98: Addr$
2018/06/10 00:14:39 [emerg] 22261#22261: bind() to 0.0.0.0:80 failed (98: Addre$
2018/06/10 00:14:39 [emerg] 22261#22261: still could not bind() 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-07-24T10:44:42.030

我使用 supervisor 在 Docker 容器上并排运行 Nginx 和 Gunicorn。

这是用于 supervisor 的配置：

```
[supervisord]
nodaemon=true

[program:gunicorn]
command = /project/start.sh
user = www-data

[program:nginx]
command=/usr/sbin/nginx 
```

问题是我如何默认启动 Ngnix，它在前台运行。这使得**主管重试**运行另一个 Nginx 实例。

您可以通过添加`-g 'daemon off;'`到命令行或`daemon off;`配置文件顶部来解决问题，Nginx 停留在前台，主管停止尝试运行另一个实例。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-06-01T12:15:27.763

首先在 /etc/apache2/ports.conf 中将 apache 监听端口 80 更改为 8080 apache 包括

```
Listen 1.2.3.4:80 to 1.2.3.4:8080
sudo service apache2 restart 
```

或者

```
sudo service httpd restart    // in case of centos 
```

然后将 nginx 添加为将监听 apache 端口的反向代理服务器

```
server {
 listen   1.2.3.4:80;
 server_name  some.com;

 access_log  /var/log/nginx/something-access.log;

 location / {
  proxy_pass http://localhost:8080;
  proxy_redirect off;
  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 }

location ~* ^.+\.(jpg|js|jpeg|png)$ {
   root /usr/share/nginx/html/;
}

location /404.html {
  root /usr/share/nginx/html/40x.html;
}

error_page 404 /404.html;
    location = /40x.html {
}

error_page 500 502 503 504 /50x.html;
    location = /50x.html {
}

# put code for static content like js/css/images/fonts
} 
```

修改后重启 nginx 服务器

```
sudo service nginx restart 
```

现在所有流量都将由 nginx 服务器处理，并将所有动态请求发送到 apache，静态内容由 nginx 服务器提供服务。

对于像缓存这样的高级配置：

[https://www.linode.com/docs/web-servers/nginx/slightly-more-advanced-configurations-for-nginx/#basic-nginx-caching](https://www.linode.com/docs/web-servers/nginx/slightly-more-advanced-configurations-for-nginx/#basic-nginx-caching)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-12-31T17:34:36.437

我知道这是旧的，但还要确保你的 docker 容器都没有在端口 80 上。这是我的问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-10-31T23:34:09.953

我遇到了类似的问题。日志如下

```
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:443 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to [::]:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:443 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to [::]:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:443 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to [::]:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:443 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to [::]:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to 0.0.0.0:443 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: bind() to [::]:80 failed (98: Address already in use)
2018/10/31 12:54:20 [emerg] 128005#128005: still could not bind()
2018/10/31 12:54:23 [alert] 127997#127997: unlink() "/run/nginx.pid" failed (2: No such file or directory)
2018/10/31 22:40:48 [info] 36948#36948: Using 32768KiB of shared memory for push module in /etc/nginx/nginx.conf:68
2018/10/31 22:50:40 [emerg] 37638#37638: duplicate listen options for [::]:80 in /etc/nginx/sites-enabled/default:18
2018/10/31 22:51:33 [info] 37787#37787: Using 32768KiB of shared memory for push module in /etc/nginx/nginx.conf:68 
```

最后一个`[emerg]`显示，`duplicate listen options for [::]:80`这意味着有多个 nginx 块文件包含`[::]:80`.

我的解决方案是删除其中一项`[::]:80`设置

PS你可能有默认的块文件。我的建议是将此文件保留为端口 80 的默认服务器。并`[::]:80`从其他块文件中删除

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-12-22T09:31:25.303

就我而言，Apache、Apache2 或 Nginx 中的一项服务已经在运行，因此我无法启动另一项服务。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-06-29T11:05:33.607

就我而言，罪魁祸首原来是一个服务器块，其中包含：

```
 listen  127.0.0.1:80;
        listen  [::1]:80 ipv6only=on;
        server_name  localhost; 
```

在Linux 上，侦听特定IP（例如`[::1]:80`）的套接字与侦听同一端口但任何IP（例如）的套接字冲突`[::]:80`。通常情况下，nginx 会在后台使用单个套接字透明地处理这个问题。但是，在 listen 指令上显式指定`ipv6only`（或某些其他选项）会强制 nginx（尝试）为其创建单独的套接字，从而导致`Address already in use`错误。

因为`ipv6only=on`无论如何都是默认的（从 1.3.4 开始），修复只是从该指令中删除该选项，并确保`ipv6only`在我的配置中的其他任何地方都没有使用。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-10-01T19:53:52.417

我在 AWS Lightsail 上遇到了这个错误，使用了上面的最佳答案

从

```
listen [::]:80; 
```

到

```
listen [::]:80 ipv6only=on default_server; 
```

然后单击我的 AWS 帐户中的“重启”按钮，我有主服务器 Apache 和 Nginx 作为代理。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-08-06T05:34:39.230

多个服务可以在同一个端口上侦听。这个问题通常来自于在同一台机器上混合 Apache 和 NGINX。

**去检查：**

`sudo netstat -plant | grep 80`

**停止 Apache 并重启 NGINX：**

`sudo systemctl stop apache2 && sudo systemctl restart nginx && sudo systemctl status nginx`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-14T21:21:36.667

我的站点可用目录中有几个来自不同 NGINX 配置文件的 *.save 文件（来自 nano 的紧急转储）。删除这些 .save 文件后，NGINX 重新启动正常。我认为这些是无害的，因为没有相应的符号链接，但我想我错了。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-12-03T18:58:30.050

继续@lfender6445 和@SAURABH 的回答——

我的问题还在于，在升级到 Vagrant 2.2.2 之后，来宾启动时 Apache2 作为 Web 服务器运行。过去我只有 nginx 作为 Web 服务器。

vagrant ssh 进入盒子并运行以下命令以禁用 Apache2 在访客盒子启动时启动：

```
sudo update-rc.d -f apache2 remove 
```

退出 ssh，vagrant 停止，vagrant up。问题解决了。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-12-04T22:45:16.313

如果尝试上述任何解决方案后问题仍然存在，请重新启动服务器一次。它对我有用:)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-05-19T21:25:47.177

我有同样的问题，但我看到 Nginx 监听了端口 80：

```
tcp        0      0 0.0.0.0:80                  0.0.0.0:*                   LISTEN      9730/nginx 
```

但是当我尝试重新启动它时，我遇到了错误：

```
 service nginx restart
Stopping nginx:                                            [FAILED]
Starting nginx: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use)
nginx: [emerg] still could not bind() 
```

我的问题在配置文件中，我设置了 PID 文件，并且似乎系统无法正确捕获它：

```
user nginx;
worker_processes 1;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid; 
```

当我删除它时，它起作用了。

# javascript - 在 Ext.form.ComboBox 上禁用自动完成

> ID：14972796
> 
> 赞同：0
> 
> 时间：2013-02-20T05:19:37.643
> 
> 标签：javascript, extjs, extjs4, extjs4.1

如何禁用 Ext.form.ComboBox 上的自动完成功能？当用户键入时，我希望组合框像普通文本框一样执行。

我尝试了这些设置，但自动完成仍然弹出。

```
 this.searchFieldBox = new Ext.form.ComboBox({
        triggerAction: 'all',
        disableKeyFilter: true,
        store: this.searchStore,
        displayField: 'Value',
        autoSelect: false,
        fieldLabel: htmlHelpObject(me.id, this.Name),
        labelSeparator: '',
        labelCls: 'sectionLabel2',
        emptyText: 'Enter a search term',
        width: 500,
        labelWidth: 160,
        margin: "0 2 0 0",
        validateOnBlur: false,
        validateOnChange: false, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:57:25.373

这并不难。`typeAhead`需要关闭。

```
typeAhead: false 
```

请参阅此**[JSFiddle](http://jsfiddle.net/hKSGG/)**示例以了解开/关

# multithreading - 使用 WINAPI 同步线程

> ID：14972799
> 
> 赞同：0
> 
> 时间：2013-02-20T05:19:54.997
> 
> 标签：multithreading, winapi, thread-synchronization

我只想将线程与 WINAPI 调用同步，但没有成功。情况是在我的 WNDPROC 收到消息后立即记录带有时间和日期的活动。问题是我的 WNDPROC 需要写入日志，因为写入文件需要时间，所以它会失控。我试图在 WNDPROC 启动后立即进入临界区，并在写入日志完成后立即离开临界区，但没有运气。怎么能让他们互相等待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:05:02.297

不要等待 - 排队。

Windows 消息是如此之小，（在其自身内部:)，将整个消息复制到生产者-消费者队列中是一种合理的方法。您可以提出自己的队列类，或者您可以使用 PostThreadMessage() API 将接收到的消息复制并排队到记录器线程：

[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644946%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644946%28v=vs.85%29.aspx)

PTM() 的问题是只有消息数据被复制和排队 - 没有时间/日期。当获取消息副本时，必须在记录器线程中添加时间/日期。检查您的要求，看看这是否可以接受。如果没有，您将不得不使用具有 Windows 消息和日期/时间成员的不同“消息”结构。

排队使 UI 线程与可能很长的磁盘日志写入操作隔离开来，并允许额外的灵活性来结合惰性写入和其他此类优化（如果需要）。

# python - 确定当天的开始和结束时间（UTC -> EST -> UTC）；Python

> ID：14972802
> 
> 赞同：37
> 
> 时间：2013-02-20T05:20:10.047
> 
> 标签：python, datetime, timezone

我将所有时间都存储在 UTC 中，并且我的系统设置为 UTC（尽管我在 EST）。

我将日期存储为：

```
Wed, 20 Feb 2013 03:51:39 +0000 
```

但是，我想根据今天的 EST 选择信息，所以我试图：

*   获取当前时间为 UTC 并更改为 EST

    ```
    datetime.utcnow().replace(tzinfo=tz.tzutc()).astimezone(tz.gettz('America/New_York'))
    2013-02-19 23:17:20.560898-05:00 
    ```

*   接下来我想获取 EST 日的开始时间 (2013-02-19 00:00:00.000000-05:00) 和结束时间 (2013-02-19 23:59:59.99999-05:00)

*   一旦我有了这些值，我想转换回 UTC，所以我有一个高低值，我可以通过正确的 EST（我的时区）来钳制它。

如果这不是最好的方法，或者我遗漏了一些东西（对我来说似乎过于复杂），请帮助我看到光明！

TIA

**每个答案更新：**

```
d1 = datetime.utcnow().replace(tzinfo=tz.tzutc()).astimezone(tz.gettz('America/New_York'))
print d1.strftime("%m %d %Y") ; d2 = d1.replace(day=d1.day + 1) ; print d2.strftime("%m %d %Y") 
```

那会给我

```
02 20 2013
02 21 2013 
```

哪个是对的。我现在需要从中生成完整的 EST 时间，然后转换为 UTC。这个我想不通。实际上，我可能想在完成时转换为 UTC 纪元时间戳，因为这将使我的数据库操作非常容易（<、>、== 等）。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-20T05:26:29.657

获取当前时间为 UTC 并将其转换为 EST 的第一步似乎有点毫无意义。你把这段时间用在什么事情上吗？

除此之外，它似乎相当直截了当。您想以 UTC 获取一天 EST 的开始和结束，因此您创建它们并将它们转换为 UTC。那没那么复杂。:-)

你可能想看看你的匹配例程，这样你就可以使用今天的开始作为较低的值，明天的开始作为较高的值，所以你不必处理那个 23:59:59.9999 时间.

**更新：**

根据我对您问题的最初理解，这就是您想要做的：

首先，您想要获取 UTC 中的当前日期（因此，在 12 日东部标准时间晚上 11 点，您想要 22 日，因为它是 UTC 中的 22 日。

```
>>> from datetime import datetime
>>> today = datetime.utcnow().date()
>>> today
datetime.date(2013, 2, 21) 
```

其次，您希望 UTC 当天的 00:00:00 作为搜索的开始。

```
>>> from dateutil import tz
>>> start = datetime(today.year, today.month, today.day, tzinfo=tz.tzutc())
datetime.datetime(2013, 2, 21, 0, 0, tzinfo=tzutc()) 
```

除了你想知道纽约的时间是什么：

```
>>> from dateutil import tz
>>> est = tz.gettz('America/New_York')
>>> start = start.astimezone(est)
>>> start
datetime.datetime(2013, 2, 20, 19, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/New_York')) 
```

而且你还希望明天作为结束：

```
>>> from datetime import timedelta
>>> end = start + timedelta(1)
>>> end
datetime.datetime(2013, 2, 21, 19, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/New_York')) 
```

概括：

```
today = datetime.utcnow().date()
start = datetime(today.year, today.month, today.day, tzinfo=tz.tzutc()).astimezone(est)
end = start + timedelta(1) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-10-16T07:49:47.890

使用`datetime` `pytz`将解决您的问题。

```
def get_start_and_end():
    tz = pytz.timezone('Asia/Shanghai')
    today = datetime.now(tz=tz)
    start = today.replace(hour=0, minute=0, second=0, microsecond=0)
    end = start + timedelta(1)

    return start, end 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-21T05:47:04.107

我肯定会给[Delorean](http://delorean.readthedocs.org/en/latest/quickstart.html#usage)看看，解决您的问题将遵循几个步骤。

您首先需要解析您的字符串。出色地使用 Delorean[解析](http://delorean.readthedocs.org/en/latest/quickstart.html#strings-and-parsing)方法。

```
>>> from delorean import parse
>>> d = parse("Wed, 20 Feb 2013 03:51:39 +0000")
>>> d
Delorean(datetime=2013-02-20 03:51:39+00:00, timezone=UTC) 
```

一旦有了在 Delorean 对象中解析的日期时间，您只需将其转换为 EST

```
>>> d = d.shift('US/Eastern')
>>> d
Delorean(datetime=2013-02-19 22:51:39-05:00, timezone=US/Eastern) 
```

尽管毫无意义。你永远不会在你的问题中使用它，但使用 Delorean 非常容易。

然后你现在在 EST 得到时间

从德洛伦进口德洛伦

```
>>> d1 = Delorean(timezone="US/Eastern")
>>> d1
Delorean(datetime=2013-02-21 00:35:56.405256-05:00, timezone=US/Eastern) 
```

现在进行[截断](http://delorean.readthedocs.org/en/latest/quickstart.html#truncation)步骤。

```
>>> d.truncate('day')
Delorean(datetime=2013-02-21 00:00:00-05:00, timezone=US/Eastern) 
```

将上述简单转换为 UTC。

现在结束一天。

```
d = d.next_day(1) # move to the next day 
```

然后向后移动一秒钟。图书馆需要的东西我会更新这个。只需通过使用属性来获取`Delorean`示例中的日期时间。`datetime`

```
d.datetime - timedelta(seconds=1)
datetime.datetime(2013, 2, 21, 23, 59, 59, tzinfo=<DstTzInfo 'US/Eastern' EST-1 day, 19:00:00 STD>) 
```

祝你好运，但这个库应该只是你处理日期时间操作:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-07-28T19:45:48.420

这只是部分答案，因为其余部分已经很好地涵盖了。我为此苦苦挣扎了一段时间，因为某些技术具有包容性搜索，而且我不想包含第二天第一微秒的任何数据。

我快速正确地找到一天结束时间的解决方案是：

```
reference_time.replace(hour=0, minute=0, second=0, microsecond=0) + timedelta(days=1,microseconds=-1) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-04-08T09:49:20.977

这个问题很老，但也许这有帮助：

```
import datetime
end_of_today = datetime.datetime.combine(datetime.datetime.today(), datetime.time(23, 59, 59, 999999)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-30T18:49:31.197

刚刚遇到这个，这是我找到的最简单的选项：

```
from delorean import Delorean
today_d = Delorean()
sod_dt = today_d.start_of_day
eod_dt = today_d.end_of_day
sod_d = Delorean(sod_dt)
eod_d = Delorean(eod_dt)
sod_e = sod_d.epoch
eod_e = eod_d.epoch 
```

确认：

```
In [69]: eod_e - sod_e
Out[69]: 86399.99999904633 
```

对大多数人来说足够接近

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-15T21:48:32.353

如果您已经使用[Arrow](https://arrow.readthedocs.io/en/stable/#) ，这是一个[很好的解决方案](https://repl.it/@chadsaunders/FrequentWhichChapter)。

```
import arrow

now = arrow.now('US/Eastern')
start = now.floor('day')
end = now.ceil('day')

# Use the "datetime" property to access the actual datetime
print(start.datetime) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-30T10:37:33.560

开始一天的最简单解决方案，尽管在不幸的浮点不精确情况下它可能会产生幻微秒：

```
import datetime as dt
d = dt.datetime.now()
d = d - dt.timedelta(seconds=d.timestamp() % dt.timedelta(days=1).total_seconds()) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-06T18:57:41.387

类似于检查和第一篇文章，但如果你想今天而不是昨天使用本地时区而不是硬编码，请执行以下操作：

```
today = datetime.utcnow().date()
start = datetime(today.year, today.month, today.day).astimezone()
end = start + timedelta(1) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-22T02:15:01.647

这个怎么样

```
import datetime
datetime.datetime.combine(datetime.date.today(), datetime.time(00, 00, 00))
datetime.datetime.combine(datetime.date.today(), datetime.time(23, 59, 59)) 
```

# php - php echo 语句 div 类

> ID：14972804
> 
> 赞同：1
> 
> 时间：2013-02-20T05:20:17.087
> 
> 标签：php, css, class, html, echo

```
<?php $lname = $_POST['lname'];
   if ( isset($_POST['lname'] )&& !empty( $_POST['lname'] ) ) {
      echo '<div class="result"My blank is under</div> <div class="green"> $lname </div> ';
   } else {
      echo '<div class="result">Please tell them your</div> <div class="green">last name!</div> ';
   }
?> 
```

语法应该是正确的，但是当我在表单中输入数据时，echo 语句会在绿色类中显示变量名称 $lname 而不是输入的数据。

我是在某处忘记引号还是在某处逃跑？

```
<style>
    .result {
        color: #FFF;
        display: block;
        font-size: 36px;
        margin-top: 1px;
        margin-before: 5px;
        margin-bottom: 0px;
        margin-start: 0; 
        margin-end: 0;
        text-align:center;
        font-weight: bold; }
    .green {
        color: #C9FF1F;
        display: block;
        font-size: 40px;
        margin-top: 1px;
        margin-before: 5px;
        margin-bottom: 0px;
        margin-start: 0;
        margin-end: 0;
        text-align: center;
        font-weight: bold;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:23:11.343

在 PHP 中，变量不使用单引号字符串进行插值；如果您想要该功能，则需要执行以下操作：

`echo "Hello $name";`

代替

`echo 'Hello $name';`

如果您想使用单引号，请连接您的字符串，如下所示：

`echo 'Hello ' . $name;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T06:00:59.953

```
User below code, it will solve your problem.

   <?php 
   $lname = $_POST['lname'];
   if ( isset($_POST['lname'] ) && !empty( $_POST['lname'] ) ) {
      echo '<div class="result">My blank is under </div> <div class="green"> '.$lname.'   </div> ';
   } else {
      echo '<div class="result">Please tell them your</div> <div class="green">last name!</div> ';
   }
   ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:23:40.450

用这个

```
echo '<div class="result"My blank is under</div> <div class="green">' . $lname . '</div> ';} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:25:34.350

尝试这个............

```
<?php $lname = $_POST['lname'];
    if ( isset($_POST['lname']) && !empty($_POST['lname'])) { ?>
    <div class="result">My blank is under</div> <div class="green"><?php echo $lname ?></div> ';
 <?php } else { ?>
    <div class="result">Please tell them your</div> <div class="green">last name!</div> ';
<?php }  ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-09T12:57:28.390

```
<div id="do-info">
      <div class=WINER">+ ,0<span id="regalo">0</span> DOMM</div>
  </div>

  <div id="do-info2">
      <div class="WINER2">Mañana  DOOM</div>
  </div> 
```

OLA BUEN DIA quisiera saber como le puedo hacer para que el 获胜者 uno me pase mas de un resultado a la vez o si se puede repetir infinidad de veces

# dynamics-crm-2011 - CrmSvcUtil.exe 出现错误

> ID：14972808
> 
> 赞同：1
> 
> 时间：2013-02-20T05:20:27.957
> 
> 标签：dynamics-crm-2011

我是 Dynamics CRM 的新手。iam 尝试使用 CrmSvcUtil.exe 生成数据上下文类

这是我的命令

```
CrmSvcUtil.exe /out:E:\OrgXrm.cs

/url:https://mdtestuser.api.crm5.dynamics.com/XRMServices/2011/Organization.svc

/username:MDTest@MDTestUser.onmicrosoft.com /password:Password

/deviceid:11bdver2vrqok88p7ek8r5umk0 /devicepassword:.devicepassword 
```

但它给出了一个错误；

```
 Exiting program with exception: An error occurred when verifying security for th
e message.
Enable tracing and view the trace files for more information.
CrmSvcUtil.exe Error: 0 : Exiting program with exit code 2 due to exception : Sy
stem.ServiceModel.FaultException: An error occurred when verifying security for
the message. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:29:57.147

您是否尝试在 URL 末尾指定端口？

还要验证服务器和客户端计算机上的时间和日期设置（包括时区）是否正确设置。似乎如果两台机器不同步超过一两分钟就会导致这个问题。

请参考以下链接：

[http://msdn.microsoft.com/en-in/library/gg327844.aspx](http://msdn.microsoft.com/en-in/library/gg327844.aspx)

要完全理解您的错误，您应该使用启用跟踪的配置文件，这是配置文件的示例：

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add key="servicecontextname" value="XrmServiceContext"/>
    <add key="codecustomization" value="Microsoft.Xrm.Client.CodeGeneration.CodeCustomization, Microsoft.Xrm.Client.CodeGeneration"/>
    <add key="username" value="domain\user"/>
    <add key="password" value="password"/>
    <add key="out" value="XrmEntitiesReference.cs" />
  </appSettings>
  <system.diagnostics>
    <trace autoflush="false" indentsize="4">
      <listeners>
        <add name="configConsoleListener" type="System.Diagnostics.ConsoleTraceListener">
          <filter type="System.Diagnostics.EventTypeFilter" initializeData="Error" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
</configuration> 
```

从这里查看示例：

[http://www.resultondemand.nl/support/sdk/06abab26-40fc-4b85-9a2a-5e68903ea138.htm](http://www.resultondemand.nl/support/sdk/06abab26-40fc-4b85-9a2a-5e68903ea138.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:57:14.207

不试一下：

```
/deviceid /devicepassword 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:31:19.240

嗨，如果您在执行命令时遇到问题，请尝试通过 Visual Studio 执行，下面的链接显示了如何使用 CrmSvcUtil 的出色分步指南：

[http://mscrmshop.blogspot.co.uk/2012/03/how-to-use-crmsvcutil-improved-version.html](http://mscrmshop.blogspot.co.uk/2012/03/how-to-use-crmsvcutil-improved-version.html)

# sql - SQL 用于定义“表”约束的语法不正确

> ID：14972809
> 
> 赞同：0
> 
> 时间：2013-02-20T05:20:29.363
> 
> 标签：sql

每次尝试执行查询时，我都会收到此错误。我多次检查任何语法错误，但我找不到任何语法错误。

```
Msg 142, Level 15, State 2, Line 0
Incorrect syntax for definition of the 'TABLE' constraint. 

CREATE TABLE "hold" (
    timePutOnHold TIME(7),
    customer_id VARCHAR(13),REFERENCES "Customer",
    isbn VARCHAR(13) REFERENCES "Item_Details",
    PRIMARY KEY (customer_id, isbn, timePutOnHold)
) 
```

解决了！我必须在 customer_id VARCHAR(13) 之后删除逗号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:32:04.003

> customer_id VARCHAR(13),REFERENCES "客户",

数据类型和 REFERENCES 关键字之间的逗号可能会导致语法错误。

一般来说，为约束赋予有意义的名称是一种很好的做法，以便以后可以轻松地删除它们。

```
CREATE TABLE hold 
( 
   timeputonhold TIME(7), 
   customer_id   VARCHAR(13), 
   isbn          VARCHAR(13), 
   CONSTRAINT pk_hold PRIMARY KEY (customer_id, isbn, timeputonhold), 
   CONSTRAINT fk_hold_customer FOREIGN KEY (customer_id) REFERENCES customer(customer_id), 
   CONSTRAINT fk_hold_isbn FOREIGN KEY (isbn) REFERENCES item_details(isbn) 
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-02T16:24:25.560

请注意，在 CREATE TABLE 语句中的语法方面，DEFAULT 约束是不同的。

如果没有逗号分隔符，则 CONSTRAINT 引用前一列。

```
-- correct syntax for adding a default constraint to a CREATE TABLE statement    
IsAvailable BIT NOT NULL CONSTRAINT d_IsAvailable DEFAULT(1) 
```

但是，使用逗号分隔和关键字 DEFAULT FOR 将产生相同的错误消息。

```
-- incorrect syntax for adding a default constraint to a CREATE TABLE statement
IsAvailable BIT NOT NULL
, CONSTRAINT d_IsAvailable DEFAULT(1) FOR IsAvailable 
```

这种细微差别可能很棘手，因为`CONSTRAINT constraint_name DEFAULT(constraint) FOR column_name`对于 ALTER TABLE 语句是正确的。

进一步阅读：
[在创建表时声明默认约束](https://stackoverflow.com/questions/1782714/declaring-a-default-constraint-when-creating-a-table)
[为列指定默认值](https://msdn.microsoft.com/en-us/library/ms187872.aspx)

# c++ - 如何在 c++11 中定义负 UDL（它们是否被禁止？）？

> ID：14972812
> 
> 赞同：10
> 
> 时间：2013-02-20T05:20:39.267
> 
> 标签：c++, c++11, user-defined-literals

我什至不确定是否允许使用负用户定义文字。如果不是，为什么他们被排除在外？

例如，我想使用：

```
auto money_i_owe_jack = -52_jpy; 
```

这是我尝试使用 gcc 4.7.2 的方法：

```
constexpr int64_t operator "" _jpy(long long l)
{
  return static_cast<int64_t>(l);
} 
```

**错误**

```
Test_udl.cpp:60:47: error: ‘constexpr int64_t operator"" _jpy(long long int)’ has invalid argument list 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T05:40:18.647

无论是用户定义还是其他方式，整数和浮点字面量始终为正数。

原因很简单：如果你允许否定字面量，词法分析变得依赖于上下文。也就是说，当面对类似的东西时`- 10`，词法分析器不能仅仅孤立地查看该文本并知道它应该被视为两个单独的标记（`-`和`10`）还是一个（`-10`）。如果您总是将其视为单个标记，那么类似的东西`a - 10`会导致`<a>`and `<-10>`(ie, `<identifier><literal>`，这不是 C++（或大多数其他编程语言）中的合法序列。

为了解决这个问题，解析器*可以*向词法分析器提供一些上下文，在任何给定时刻告诉是否期望（例如）一个运算符或一个操作数，所以它会知道如果要生成一个运算符，`-`应该处理作为自己的标记，但如果需要操作数，`-10`则将是单个标记。

但是，通常更容易拥有始终遵循的单个规则，并且有效的规则是 the`-`始终是运算符，而文字根本不能包含 a `-`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T05:33:30.483

整数文字需要被接受为`unsigned long long`. 负号不是文字的一部分，它在事后应用于返回值。

```
constexpr int64_t operator "" _jpy(unsigned long long l)
{
  return static_cast<int64_t>(l);
} 
```

# sql-server - 如何禁用所有表的约束并启用它？

> ID：14972816
> 
> 赞同：32
> 
> 时间：2013-02-20T05:21:09.577
> 
> 标签：sql-server, sql-server-2008, foreign-keys, constraints, foreign-key-relationship

我有 60 张桌子。我想删除 10 个表，其中这 10 个表是约束（PK，FK）到其他 20 个表。在删除这 10 个表时，我需要从其他 20 个表中截断或删除数据。最后，我想禁用所有 60 个表约束（FK，PK），然后在完成添加/删除表的工作后启用所有 60 个表约束。这可能吗？

当我放下一张桌子时，它要求 FK。当我截断那些 FK 依赖项时，它仍然显示相同。我不想惹所有那些FK，PK。

我想知道更聪明的方法。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-20T05:27:49.817

```
EXEC sp_MSforeachtable @command1="ALTER TABLE ? NOCHECK CONSTRAINT ALL"
GO 
```

您可能还想这样做：

```
EXEC sp_MSforeachtable @command1="ALTER TABLE ? DISABLE TRIGGER ALL"
GO 
```

之后启用它们

```
EXEC sp_MSforeachtable @command1="ALTER TABLE ? ENABLE TRIGGER ALL"
GO

-- SQL enable all constraints - enable all constraints sql server
-- sp_MSforeachtable is an undocumented system stored procedure
EXEC sp_MSforeachtable @command1="ALTER TABLE ? CHECK CONSTRAINT ALL"
GO 
```

**编辑：**
如果禁用约束还不够，你将不得不放弃约束。

如果您要删除并重新创建表，则必须在之后重新创建外键约束。

如果您只需要删除约束，您可能会发现这很有用：
[SQL DROP TABLE foreign key constraint](https://stackoverflow.com/questions/1776079/sql-drop-table-foreign-key-constraint)

如果您需要编写脚本来删除和创建约束，您可能会发现我的帖子更有用：
[SQL Server：如何从 information_schema 获取外键引用？](https://stackoverflow.com/questions/3907879/sql-server-howto-get-foreign-key-reference-from-information-schema/3907999#3907999)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-11-27T17:29:30.043

要禁用，您可以应用此：

```
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all" 
```

启用：

```
EXEC sp_msforeachtable "ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-20T05:47:59.913

```
declare @tname varchar(128), @tschema varchar(128);

declare tables cursor for
select TABLE_SCHEMA, TABLE_NAME
from INFORMATION_SCHEMA.TABLES;

open tables;

fetch next from tables
    into @tschema, @tname;

while @@FETCH_STATUS = 0
begin
    execute ('alter table [' + @tschema + '].[' + @tname + '] nocheck constraint all');
    fetch next from tables
        into @tschema, @tname;
end;

close tables;

deallocate tables; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-20T05:45:25.407

尝试使用此命令

```
ALTER TABLE table_Name NOCHECK CONSTRAINT all 
```

禁用表的所有约束，并为所有 10 个表执行此操作，但在此之前检查您是否没有在表上放置任何 Delete_Cascade，因为显示的错误也可能是由于 sub_tables 依赖关系。如果它不起作用，请尝试通过此命令禁用特定约束，它可能是两个或三个额外的依赖项。

```
ALTER TABLE tableName NOCHECK CONSTRAINT constraintName 
```

# html - IE 9 及更高版本的行为与 html 表格元素不同

> ID：14972818
> 
> 赞同：0
> 
> 时间：2013-02-20T05:21:26.660
> 
> 标签：html, css, internet-explorer, html-table

我正面临 html Table 元素单元格宽度的问题。IE8 和 IE9 中表格单元格的宽度不一样。请找到下面的代码片段，其中我使用表格 colgroup 将表格单元格的宽度设置为 100%。

[HTML]

```
 <table  id="Grid1_Table" class="Table">
   <colgroup>
    <col style="width:20px">
    <col style="width:20px">
    <col style="width:180px">
    <col style="width:200px">
  </colgroup>
 <tbody>
   <tr>
    <td class="RowHeader"><div>&nbsp;</div></td>
    <td class="RecordPlusCollapse" ><div>&nbsp;</div></td>
    <td colspan="2" class="GroupCaption">Order ID: 0 - 1 Items</td>
  </tr>
 </tbody> 
```

[CSS]

```
.RowHeader
 { 
    background-color : black;
 }

 .GroupCaption
 {    
    background-color : #868981;
 }
 .RecordPlusCollapse
 {  
    background-color : red;
 }
 .Table
 {
    width:100%;
 } 
```

请参考下面的提琴手文件来检查 IE8 和 IE9 的问题。

[http://jsfiddle.net/KgfsM/21/](http://jsfiddle.net/KgfsM/21/)

你能检查一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:35:30.157

首先，标记违反了HTML表格模型；如果您尝试使用 HTML5 doctype 验证代码片段（并`</table>`添加了缺失的），验证器将报告错误“由元素 col 建立的表列 4 中没有以开头的单元格。”

其次，您将列宽（以像素为单位）*和*总表格宽度设置为 100%。这构成了一个无法满足的请求，除非在非常特殊的情况下可用宽度恰好与像素宽度加上边框、边框间距和单元格间距的总和一致。难怪浏览器对此的反应不同。

因此，您需要一致地指定宽度。删除 100% 宽度的设置，或删除至少一项列宽设置。您可能仍然有问题（浏览器可能对此做出不同的反应），并且`table-layout: fixed`可能无济于事（或可能会引入新问题），但随后会出现一个新的、相对明确定义的问题。

# javascript - 如何在客户端填充下拉框数据的情况下获取下拉框选择值

> ID：14972822
> 
> 赞同：1
> 
> 时间：2013-02-20T05:22:01.513
> 
> 标签：javascript, asp.net

我有一个有 2 个投递箱的页面。第二个下拉框中的数据将根据第一个下拉框中的所选数据而变化。第一个下拉框的更改数据在客户端脚本中。现在我尝试在服务器的第二个下拉框中获取所选值一边，但没有。如何解决这个问题？

以下是代码：

```
<div class="field">
    <input type="hidden" id="ddlFormatOriginalData" name="ddlFormatOriginalData" runat="server" />
    <asp:DropDownList ID="d1" runat="server">
    </asp:DropDownList>
</div>

<div class="field">
    <input type="hidden" id="ddlFormatOriginalData" name="ddlFormatOriginalData" runat="server" />
    <asp:DropDownList ID="d2" runat="server">
    </asp:DropDownList>
</div> 
```

Javascript 端

```
$addHandler(ddlFormat, 'change', upDateD2);

function upDateD2(sender) {

    var PaperList = $get(ddlPaperStockID); // gets the list for a certain selected value in d1

    for (j = 0; j < PaperList.options.length; j++) {
        // added List here to d2
    }
} 
```

服务器端

```
string val = d2.selected.value; 
```

但是我没有得到任何 val 虽然在萤火虫中显示了 d2 投递箱的不同列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:57:21.740

尝试使用 JQuery 数据 - 例如：

```
<div id="test" data-cool="demo"></div> 
```

在 JS 中：

```
$("#test").data("cool"); // outputs: 'demo' 
```

您还可以使用它来设置更新变量：

```
$("#test").data("cool", "really cool!"); // updates the data-cool field to: 'really cool!' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:44:08.690

您可以使用如下

```
protected override void OnInit(EventArgs e)
{
     var postedOptionValue = Request.Form[d2.UniqueID];
     d2.Items.Add(new ListItem(postedOptionValue));
     base.OnInit(e);
} 
```

但是您应该注意以下异常

```
Invalid postback or callback argument. 
```

使用启用事件验证

```
 <pages enableEventValidation="true"/> 
```

在配置或

```
 <%@ Page EnableEventValidation="true" %> 
```

在一个页面中。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。
如果数据有效且符合预期，请使用 ClientScriptManager。
RegisterForEventValidation 方法，以便注册回发或回调数据以进行验证。

## 编辑 1

更多阅读 -
[无效的回发或回调参数。当使用 jquery 填充下拉列表并且有回发时](https://stackoverflow.com/questions/12490236/invalid-postback-or-callback-argument-when-dropdown-list-populated-with-jquery)

# java - Spring MVC + JQuery + Ajax 问题

> ID：14972823
> 
> 赞同：0
> 
> 时间：2013-02-20T05:22:02.993
> 
> 标签：java, ajax, spring, jquery, spring-mvc

我正在尝试使用 Jquery Ajax 对我的 Spring MVC 应用程序进行 Ajax 调用。应用程序控制器工作正常，但我无法让这个 Ajax 测试控制器工作。警报被触发，但从未调用控制器。我也尝试过使用加载、获取、发布。他们都没有调用服务器。这让我觉得我在做一些明显错误的事情。如果我将 URL 直接放在浏览器地址栏上，就会调用控制器。

如果有人可以指导我正确的方向或告诉我我做错了什么，我将不胜感激。

**JavaScript**

```
<html>
<head>
<script type="text/javascript" src="jquery-1.8.1.min.js"> </script>
<script type="text/javascript">
    function doAjax() {
        alert("did it even get here?");
        $.ajax({
            url : "simpleRequestTest.do",
            method: "GET",          
            success : function(response) {
                $('#show').html(response);
            }
        });
    }
</script>
</head>
<body>
    <h1>Simple Test </h1>
    <a href="javascript:doAjax();"> Simple Test </a>
    <br />
    <div id="show">...</div>
</body>
</html> 
```

**控制器**

```
@RequestMapping("/simpleRequestTest")
public @ResponseBody String performSimple()  {
    return "Very Simple Test";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:41:51.873

你能检查一下你是否使用正确的路径来包含 jquery-1.8.1.min.js。

我为我检查了它的工作文件的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:29:28.090

我想你`dataType`在`ajax`通话中失踪了

尝试这个

```
function doAjax() {
        alert("did it even get here?");
        $.ajax({
            url : "simpleRequestTest.do",
            method: "GET",          
            success : function(response) {
                $('#show').html(response);
            },
            dataType: 'text'
        });
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:42:54.413

只需 更改`url : "simpleRequestTest.do",`为`url : "simpleRequestTest",` 和`method: "GET",``type: "GET",`

我认为该方法已在 jquery 1.5 版和最新版本中删除

# android - 使用文本文件向服务器发送位置信息

> ID：14972824
> 
> 赞同：0
> 
> 时间：2013-02-20T05:22:05.180
> 
> 标签：android

此代码应该将数据从文本文件发送到服务器。但它只发送第一行。如何在android中移动到文本文件的下一行。发送后我想删除该行。基本上我想根据它们存储的顺序发送记录。

```
 File file = new    File(Environment.getExternalStorageDirectory(),"/BPCLTracker1/gpsdata.txt");
    File f1=new  File(Environment.getExternalStorageDirectory(),"/BPCLTracker1/gpsdata.txt");
    RandomAccessFile in = null;
    RandomAccessFile in1 = null;
    try
    {
      in = new RandomAccessFile(file, "rw");
      in1= new RandomAccessFile(f1, "rw");}
      catch (FileNotFoundException e) 
      {// TODO Auto-generated catch bloc e.printStackTrace();}
      String line ="0";
      while (true)
      {
         try 
         {
            if (isInternetOn())
            {
               while ((line = in.readLine()) != null)
               {
                     HttpEntity entity;
                     HttpClient client = new DefaultHttpClient();
                     String url = "some url is here";
                     HttpPost request = new HttpPost(url);
                     StringEntity se = new StringEntity(line);
                     se.setContentEncoding("UTF-8");
                     se.setContentEncoding(new BasicHeader(
                     HTTP.CONTENT_TYPE, "application/json"));
                     entity = se;
                     request.setEntity(entity);
                     HttpResponse response = client.execute(request);
                     entity = response.getEntity();
                     if (entity != null) {}
               }
           }
       }
    } 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:28:52.753

像这样上传你的文件

httpClient 客户端 = 新 DefaultHttpClient(); HttpPost 帖子 = 新的 HttpPost(url);

MultipartEntity 实体 = 新的 MultipartEntity(); entity.addPart("file", new FileBody(file)); post.setEntity(实体);

HttpResponse 响应 = httpclient.execute(post);

# php - CURL 使用 GET 方法而不是 POST

> ID：14972825
> 
> 赞同：-1
> 
> 时间：2013-02-20T05:22:11.057
> 
> 标签：php, curl

我有一个数据提交系统，它通过 curl 将值发布到这样的 url：

```
 $URL="http://some_url/"; 
           $ch = curl_init(); 
           curl_setopt($ch, CURLOPT_URL,$URL); 
       curl_setopt($ch, CURLOPT_POST, 1); 
       curl_setopt ($ch, CURLOPT_HTTPHEADER, array ('Content-Type:application/x-www-form-urlencoded;application/xml'));
       curl_setopt($ch, CURLOPT_POSTFIELDS, "First Name=".$firstname."&Last Name=".$lastname."&Daytime Phone=".$dayphone."&Evening Phone=".$evephone."&DeliveryCode=".$deliveryCode."&username=".$username."&password=".$password);
    echo curl_exec ($ch); 
    curl_close ($ch); 
```

当我检查网络控制台时，它显示执行了 GET 请求而不是 POST 请求。可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:36:14.533

我不知道为什么您的代码不起作用，但我给您一个起作用的代码；它可能不是解决方案，但它会帮助你理解 cUrl；

根据需要调整代码；

```
<?php

class CurlTool {

    public static $userAgents = array(
        'FireFox3' => 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9) Gecko/2008052906 Firefox/3.0',
        'GoogleBot' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
        'IE7' => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
        'Netscape' => 'Mozilla/4.8 [en] (Windows NT 6.0; U)',
        'Opera' => 'Opera/9.25 (Windows NT 6.0; U; en)'
    );
    public static $options = array(
        CURLOPT_USERAGENT => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
        CURLOPT_AUTOREFERER => true,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_FRESH_CONNECT => true,
        CURLOPT_COOKIEJAR => "cookies.txt",
        CURLOPT_COOKIEFILE => "cookies.txt",
        CURLOPT_SSL_VERIFYPEER => false,
            //CURLOPT_COOKIESESSION => false,
    );
    private static $proxyServers = array();
    private static $proxyCount = 0;
    private static $currentProxyIndex = 0;
    public static $getinfo;

    public static function addProxyServer($url) {
        self::$proxyServers[] = $url;
        ++self::$proxyCount;
    }

    public function curl_redirect_exec($ch, &$redirects, $curlopt_header = false) {
/*
        curl_setopt($ch, CURLOPT_USERAGENT ,'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)');
        curl_setopt($ch, CURLOPT_AUTOREFERER ,true);
        curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt");
        curl_setopt($ch, CURLOPT_COOKIEFILE,"cookies.txt");
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER ,false);
        */
        curl_setopt($ch, CURLOPT_HEADER, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
echo $redirects."     ";
if ($redirects>0) {
    echo "rr: ".$url;
    exit;
}       
$data = curl_exec($ch);
$http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);

if ($http_code == 301 || $http_code == 302) {

    list($header) = explode("\r\n\r\n", $data, 2);
    $matches = array();
    //this part has been changes from the original
    preg_match("/(Location:|URI:)[^(\n)]*/", $header, $matches);
    $url = trim(str_replace($matches[1],"",$matches[0]));
    //end changes
    $url_parsed = parse_url($url);

    if (isset($url_parsed)) {

        $ok=curl_setopt($ch, CURLOPT_URL, $url);
        if (!$ok) {
           echo "doesn't work";
           exit;
        }
        print_r($url_parsed);
    exit;
        $redirects++;
        if($redirects>10)die('live is hard');

        return curl_redirect_exec($ch, $redirects,$curlopt_header);
    }
}
if ($curlopt_header)
    return $data;
else {
    list(,$body) = explode("\r\n\r\n", $data, 2);
    return $body;
}
}

    public static function fetchContent($url, $fields = null, $verbose = false) {
        //print '*'.$fields.'*';
        //
        if (($curl = curl_init($url)) == false) {
            throw new Exception("curl_init error for url $url.");
        }
        if (self::$proxyCount > 0) {
            $proxy = self::$proxyServers[self::$currentProxyIndex++ % self::$proxyCount];
            curl_setopt($curl, CURLOPT_PROXY, $proxy);
            if ($verbose === true) {
                echo "Reading $url [Proxy: $proxy] ... ";
            }
        } else if ($verbose === true) {
            echo "Reading $url ... ";
        }
        //$verbose=TRUE;
        //print_r($fields);
//        debug_print_backtrace();
//url-ify the data for the POST
        $fields_string = '';
        if (is_array($fields))
            foreach ($fields as $key => $value) {
                if (empty($key))
                    continue;
                $fields_string .= $key . '=' . urlencode($value) . '&';
                if ($verbose === true) {
                    echo $key . ": " . $value;
                }
            }
        rtrim($fields_string, '&');

        if (count($fields) > 0) {
            curl_setopt($curl, CURLOPT_POST, count($fields));
            curl_setopt($curl, CURLOPT_POSTFIELDS, $fields_string);
        }

        if ($verbose === true) {
            echo "Fields string $fields_string ... ";
        }
//print_r(self::$options);
//echo phpinfo();
        curl_setopt_array($curl, self::$options);

//curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);

/*foreach (self::$options as $option => $value) {
           if (!curl_setopt($curl, $option, $value)) {
           //die('cannot set'.$option.':'.$value);
               //return false;
           } 
       }
    */   
        $html = curl_exec($curl);
        $redirects = 0 ;
        //echo $html;
        //exit;
        //$html = self::curl_redirect_exec($curl, &$redirects);
        //die(2);
        self::$getinfo = curl_getinfo($curl);
        if ($html === false) {
            throw new Exception("curl_exec error for url $url " . curl_error($curl));
        }

        curl_close($curl);
        if ($verbose === true) {
            echo "Done.\n";
        }
        $html = preg_replace('#\n+#', ' ', $html);
        $html = preg_replace('#\s+#', ' ', $html);

        return $html;
    }

    public static function downloadFile($url, $fileName, $fields = null, $verbose = false) {
        if (($curl = curl_init($url)) == false) {
            throw new Exception("curl_init error for url $url.");
        }

        if (self::$proxyCount > 0) {
            $proxy = self::$proxyServers[self::$currentProxyIndex++ % self::$proxyCount];
            curl_setopt($curl, CURLOPT_PROXY, $proxy);
            if ($verbose === true) {
                echo "Downloading $url [Proxy: $proxy] ... ";
            }
        } else if ($verbose === true) {
            echo "Downloading $url ... ";
        }

        //url-ify the data for the POST
        $fields_string = '';
        if (is_array($fields))
            foreach ($fields as $key => $value) {
                if (empty($key))
                    continue;
                $fields_string .= $key . '=' . urlencode($value) . '&';
            }
        rtrim($fields_string, '&');

        curl_setopt($curl, CURLOPT_POST, count($fields));
        curl_setopt($curl, CURLOPT_POSTFIELDS, $fields_string);

        curl_setopt_array($curl, self::$options);

        if (is_file($fileName)) {
            $contents = file_get_contents($fileName, false, null, -1, 3 * 1024);
            $pattern = "__VIEWSTATE";
            if (strpos($contents, $pattern) === false) {
                return $fileName;
            }
        }

//        if (is_file($fileName)) {
//            // make a HEAD request and try to get the file size HEAD
//            // if they differ then redownload the file, otherwise no need
//            curl_setopt($curl, CURLOPT_NOBODY, true);
//            curl_setopt($curl, CURLOPT_HEADER, true);
//            $ret = curl_exec($curl);
//            //echo $fileName;
//            $size = curl_getinfo($curl, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
//            if ($size == filesize($fileName)) {
//                return $fileName;
//            } else {
//                unlink($fileName);
//                return self::downloadFile($url, $fileName, $fields, $verbose);
//            }
//        }

        //echo getcwd();

        if (substr($fileName, -1) == '/') {
            $targetDir = $fileName;
            $fileName = tempnam(sys_get_temp_dir(), 'c_');
        }
        if (($fp = fopen('../files/'.$fileName, "w")) === false) {
            throw new Exception("fopen error for filename $fileName");
        }

        curl_setopt($curl, CURLOPT_FILE, $fp);

        curl_setopt($curl, CURLOPT_BINARYTRANSFER, true);

        $ret = curl_exec($curl);
        self::$getinfo = curl_getinfo($curl);

        if ($ret === false) {
            fclose($fp);
            unlink('../files/'.$fileName);
            echo curl_error($curl).'<br/>';
            echo curl_errno($curl).'<br/>';
            if(curl_errno($curl)!=6)
            {
                throw new Exception("curl_exec error for url $url.");
            }
        } elseif (isset($targetDir)) {
            $eurl = curl_getinfo($curl, CURLINFO_EFFECTIVE_URL);
            preg_match('#^.*/(.+)$#', $eurl, $match);
            fclose($fp);
            rename($fileName, "$targetDir{$match[1]}");
            $fileName = "$targetDir{$match[1]}";
        } else {
            fclose($fp);
        }

        curl_close($curl);
        if ($verbose === true) {
            echo "Done.\n";
        }
        return $fileName;
    }

} 
```

# three.js - Threejs r55 精灵不显示

> ID：14972826
> 
> 赞同：0
> 
> 时间：2013-02-20T05:22:16.747
> 
> 标签：three.js, sprite

我尝试使用三个 js 版本的 r55 显示精灵，但屏幕上没有任何内容。有人可以帮我找出错误吗？我没有在本地加载东西以防止出现一些错误。我不明白为什么所有 3d 对象都可以正常工作，而不是纹理或精灵。谢谢大家

```
var startTime   = Date.now();
var container = document.getElementById('container');
var camera, scene, renderer;
var ambientlight,directionallight;
var texturenuage, obj1;

init();         
animate();

function init() {

if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
scene = new THREE.Scene();

camera = new THREE.PerspectiveCamera( 30, 901 / 727, 1, 1000 );
camera.position.x = 0;
camera.position.y = 0;
camera.position.z = 1000;

ambientlight = new THREE.AmbientLight(0x220066);
scene.add( ambientlight );

directionallight = new THREE.DirectionalLight( 0xff88aa );
directionallight.position.set( 40, 50, 100 ).normalize();
scene.add( directionallight );

texturenuage = new THREE.ImageUtils.loadTexture('nuage1.png');
obj1 = new THREE.Sprite( new THREE.SpriteMaterial( { color: 0xff0000, map: texturenuage, alphaTest: 0.5 } ) )
sprite.scale.set( 381, 84, 1.0 )
sprite.position.set( 100, 100, 0 );
sprite.position.normalize();
scene.add( obj1 );

renderer = new THREE.WebGLRenderer();

renderer.sortObjects = false;
renderer.setSize( 901, 727 );       
container.appendChild( renderer.domElement );   
}

function animate() {
render();
requestAnimationFrame( animate );
}

function render() {
renderer.render(scene, camera);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:24:55.103

您可能看不到任何东西，因为如果在本地运行，则无法加载纹理。

使用三个关于运行本地服务器的 wiki 页面中的一些建议，您可能会开始在屏幕上看到纹理；-)

[https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)

# ios - 当标题在屏幕上时，IOS UICollectionView insertItemsAtIndexPaths 崩溃

> ID：14972827
> 
> 赞同：4
> 
> 时间：2013-02-20T05:22:30.077
> 
> 标签：ios, crash, uicollectionview

我有一个`UICollectionView`大小非零的标题。似乎无论何时`insertItemsAtIndexPaths`调用，如果标题在屏幕上，程序就会崩溃并显示以下消息：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: object cannot be nil (key: <_UICollectionViewItemKey: 0xa38c910> Type = SV Kind = UICollectionElementKindSectionHeader IndexPath = <NSIndexPath 0xa38c7c0> 2 indexes [0, 0])' 
```

当标题大小为零或标题不在屏幕上时，调用`insertItemsAtIndexPaths`工作正常。有谁知道如何解决这一问题？谢谢！

该类是 UICollectionViewController 的子类。下面是与 UICollectionView 相关的代码：

```
- (id)init {
  // Collection view layout
  UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc] init];
  layout.itemSize = CGSizeMake(100, 100);
  layout.headerReferenceSize = CGSizeMake(320, 50); // Left for the switch
  layout.minimumInteritemSpacing = 5;
  layout.minimumLineSpacing = 5;
  layout.scrollDirection = UICollectionViewScrollDirectionVertical;
  layout.sectionInset = UIEdgeInsetsMake(5, 5, 5, 5);

  if (self = [super initWithCollectionViewLayout:layout]) {
    // Collection view setup
    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"ID"];
    self.collectionView.frame = CGRectMake(0, -20, 320, 480-20-44-49);
    self.collectionView.backgroundView = nil;
    self.collectionView.backgroundColor = [UIColor clearColor];
    ...
  }
  return self;
} 
```

然后我实现了两个委托方法：

```
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
  return [blogs count];
} 
```

和

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionViewArg cellForItemAtIndexPath:(NSIndexPath *)indexPath {
  UICollectionViewCell *cell = [collectionViewArg dequeueReusableCellWithReuseIdentifier:@"ID" forIndexPath:indexPath];
  /* Some code to get blogView */
  [cell.contentView addSubview:blogView];
  return cell;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T05:44:44.917

问题是在日志中说标题不能为零。所以在那里提供一些有效的输入，你可以避免崩溃。

就像标题部分不需要输入一样，给它一个带有 clearclolor 的视图

为了实现标题部分，您必须实现以下数据源方法

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath; 
```

# objective-c - iPhone-JSON解析中的\字符问题

> ID：14972833
> 
> 赞同：3
> 
> 时间：2013-02-20T05:23:19.093
> 
> 标签：objective-c, cocoa-touch

我正在使用目标 C JSON 解析库。我的 Web 服务返回 JSON 响应。我的解析器失败，因为响应字符串中有一个“\”字符。响应字符串就像`":\/\/68.491.5.780\/iphoneapplication"`，但我想像`"://68.491.5.780/"`.

我的代码在这里：

```
NSURL *url=[NSURL URLWithString:
  @"http:// url address/Accountservice/Security/ValidateAccess?accesscode=abcd&type=0"];

NSData *postData = 
  [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData]; 
```

那么如何删除从 Web 服务接收的响应中的所有反斜杠“\”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:27:24.283

您可以将 \ 替换为空格，例如：-

```
NSString *str =[NSString stringWithFormat:@"%@",@" hi \ hoowoer"];

str = [str stringByReplacingOccurrencesOfString:@"\""
                                     withString:@""];
NSLog(@"==%@",str); 
```

**输出**

嗨 hoowoer

# python - django-ckeditor 上传图片以外的文件

> ID：14972834
> 
> 赞同：0
> 
> 时间：2013-02-20T05:23:19.207
> 
> 标签：python, django, ckeditor

我正在使用 django-ckeditor。

我正在以图像和 Flash 上传图标上传图像文件和 .swf 文件。但是当我上传除这些文件之外的文件时，我收到错误为“无法识别图像文件”。对于 swf 文件，不会创建缩略图，并且会显示没有任何 url 的虚拟图像。

我在 ckeditor 中的观点为：@csrf_exempt

```
def upload(request):
    upload = request.FILES['upload']
    upload_ext = os.path.splitext(upload.name)[1]
    upload_filename = get_upload_filename(upload.name, request.user)
    out = open(upload_filename, 'wb+')
    for chunk in upload.chunks():
        out.write(chunk)
    out.close()
    if upload_ext != ".swf": 
        create_thumbnail(upload_filename)
    url = get_media_url(upload_filename)
    url = url.replace("\\", "/")
    return HttpResponse("""
    <script type='text/javascript'>
        window.parent.CKEDITOR.tools.callFunction(%s, '%s');
    </script>""" % (request.GET['CKEditorFuncNum'], url)) 
```

缩略图，

```
def create_thumbnail(filename):
    image = Image.open(filename)
    if image.mode not in ('L', 'RGB'):
        image = image.convert('RGB')
   imagefit = ImageOps.fit(image, THUMBNAIL_SIZE, Image.ANTIALIAS)
    imagefit.save(get_thumb_filename(filename)) 
```

任何人都可以帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:36:40.630

从技术上讲，只有图像文件可以有缩略图。所有其他类型应具有基于其类型的默认缩略图（可能是图标图像）。在您的代码中，逻辑应该

```
if upload_ext in [".jpg", ".png",]:
    create_thumbnail(filename)
else:
    create_default_thumbnail(upload_ext) // for .swf, .doc etc 
```

# python - 包含自动更改的对象的 Python 堆栈

> ID：14972836
> 
> 赞同：1
> 
> 时间：2013-02-20T05:23:41.343
> 
> 标签：python, stack

我在 Python 中使用了以下堆栈类来存储另一个类的对象。

```
class Stack :
 def __init__(self) :
   self.items = []

 def push(self, item) :
   self.items.append(item)

 def pop(self) :
   return self.items.pop()

 def isEmpty(self) :
   return (self.items == []) 
scopeStack=Stack();
object1=AnotherClass();
object1.value=2;
scopeStack.push(object1); 
```

在更改堆栈外对象 object1 的内容时，堆栈对象的内容也发生了变化。

```
 object1.value=3;
 obj=scopeStack.pop();
 print obj.value; #gives output 3 
```

我应该怎么做才能在局部变量和堆栈的内部变量之间没有这种动态绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:31:12.613

查看在[此处](http://docs.python.org/2/library/copy.html)`copy`找到的模块。您要查找的内容称为.`copy.deepcopy()`

例子：

```
class Obj:
    def __init__(self, value):
        self.value = value

x = Obj(5)
y = copy.deepcopy(x)

print 'x:', x.value
print 'y:', y.value

x.value = 3

print 'x:', x.value
print 'y:', y.value 
```

输出：

```
x: 5
y: 5
x: 3
y: 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T05:27:53.180

它不是动态绑定，它只是对同一个对象的多个引用。当您这样做时`scopeStack.push(object1)`，您将该对象压入堆栈——不是对象的名称或对象的内容，而是对象本身。如果您稍后修改该对象，其修改将显示在任何引用它的地方。

如果你希望栈上的版本是独立的，那么你需要制作一个副本并推送副本。您可以尝试为此使用该`copy`模块，但如果您的对象是自定义类的实例，您可能需要为该类编写自己的复制机制。Python 无法自动知道如何复制您创建的任何自定义类的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:28:33.320

如果您想要对象的副本，则需要复制或深度复制对象。看[`copy`](http://docs.python.org/2/library/copy.html)模块。

# ms-word - 如何使用 java 程序访问和修改 msword 中的快速部分？

> ID：14972841
> 
> 赞同：1
> 
> 时间：2013-02-20T05:24:03.433
> 
> 标签：ms-word

我正在尝试使用 java 程序访问和修改 .doc 文件中的快速部件值。我为此使用 Apache POI 库。所有快速部件都在表格中，但是当我尝试读取表格内容时，会显示除快速部件之外的所有文本值。快速部分单元格几乎被跳过。任何人都可以建议我这样做的想法吗？

谢谢，乌代

# dock - 关闭 DockContent 文档后的 DisposedObjectException

> ID：14972843
> 
> 赞同：0
> 
> 时间：2013-02-20T05:24:14.210
> 
> 标签：dock, docking, dockpanel, dockpanel-suite

`DockPanelSuite`当我关闭文档时，我看到了如此奇怪的行为。当我单击`'X'`文档右上角的关闭时，顶部文档按预期关闭，`(calls FormClosing event and Dispose() method of my derived DockContent class)`但文档中仍保留一个小标签。这就像`DockContent`意识到应该丢弃内容并放弃所有内部控件，并且 Form.Text 从选项卡中消失了，剩下的是一个没有任何文本的小选项卡。

进一步尝试再次关闭选项卡或单击选项卡会导致`'ObjectDisposedException'.`

这是我的环境规格：

```
Visual Studio 2008
DockPanelSuite AssemblyVersion("2.5.0.*")
Windows 7 x64 
```

下面是一个堆栈跟踪。进入代码我可以看到它在尝试获取`IDragSource.DragControl`我已经处理的控件的实例时爆炸了

```
(control being a derived DockContent class):

at System.Windows.Forms.Control.CreateHandle()
at System.Windows.Forms.Form.CreateHandle()
at System.Windows.Forms.Control.get_Handle()
at WeifenLuo.WinFormsUI.Docking.DockPanel.DragHandlerBase.BeginDrag() in C:\Users\nick\Documents\Visual Studio 2008\Projects\DockPanel\WinFormsUI\Docking\DockPanel.DragHandler.cs:line 48
at WeifenLuo.WinFormsUI.Docking.DockPanel.DockDragHandler.BeginDrag(IDockDragSource dragSource) in C:\Users\nick\Documents\Visual Studio 2008\Projects\DockPanel\WinFormsUI\Docking\DockPanel.DockDragHandler.cs:line 699
at WeifenLuo.WinFormsUI.Docking.DockPanel.BeginDrag(IDockDragSource dragSource) in C:\Users\nick\Documents\Visual Studio 2008\Projects\DockPanel\WinFormsUI\Docking\DockPanel.DockDragHandler.cs:line 811
at WeifenLuo.WinFormsUI.Docking.DockPaneStripBase.OnMouseDown(MouseEventArgs e) in C:\Users\nick\Documents\Visual Studio 2008\Projects\DockPanel\WinFormsUI\Docking\DockPaneStripBase.cs:line 195
at System.Windows.Forms.Control.WmMouseDown(Message& m, MouseButtons button, Int32 clicks)
at System.Windows.Forms.Control.WndProc(Message& m)
at WeifenLuo.WinFormsUI.Docking.DockPaneStripBase.WndProc(Message& m) in C:\Users\nick\Documents\Visual Studio 2008\Projects\DockPanel\WinFormsUI\Docking\DockPaneStripBase.cs:line 246
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
at System.Windows.Forms.Application.Run(Form mainForm)
at MosaicMaker.Program.Main() in C:\Users\nick\Documents\Visual Studio 2008\Projects\MosaicMaker\MosaicMaker\Program.cs:line 18
at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

提前感谢您的帮助。

除了这个小问题，我对图书馆非常满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:57:55.250

好吧，我发现我的代码是问题的根源。当 DockContent 表单上的控件在其 Dispose() 方法中引发异常时，就会出现此问题。该控件未正确处理，并且由于某种原因 DockContent 控件未正确关闭。

# android - Android 无法连接到 WCF 服务器

> ID：14972844
> 
> 赞同：0
> 
> 时间：2013-02-20T05:24:15.933
> 
> 标签：android, wcf, ksoap2

尝试在 Android 中调用 WCF 方法，它在 androidHttpTransport.call(...) 处停止，一段时间后，由于无法连接到服务器而超时。以下是代码：

我的安卓代码：

```
 public class MainActivity extends Activity {
private static final String NAMESPACE = "http://try1.com/";
private static final String METHOD_NAME = "ObtainAnswerToQuestion";
private static final String SOAP_ACTION = "http://bcaa.com/IEightBall/ObtainAnswerToQuestion";
private static final String URL = "http://10.0.2.2:8080/MagicEightBallService";
Button submit;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    submit = (Button)this.findViewById(R.id.submit);
    submit.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);                      
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);                   
            envelope.dotNet = true;
            PropertyInfo info = new PropertyInfo();
            info.setName("Question");
            info.setType("Bylawme".getClass());
            info.setValue("BB2233asdsa");
            request.addProperty(info);
            envelope.setOutputSoapObject(request); 
            new LongProcess().execute(envelope);
        }  
    }); 
}
 private class LongProcess extends AsyncTask<Object, Void, Boolean> {

        @Override
        protected Boolean doInBackground(Object... param) {
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL,30000);
            SoapSerializationEnvelope envelope = (SoapSerializationEnvelope) param[0];
            try {
                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapPrimitive result = (SoapPrimitive) envelope.getResponse();
                // to get the data
                String resultData = result.toString();
                submit.setText(resultData);
            } catch (Exception ex) {
                submit.setText(ex.getMessage());
            }
            return true;
        }      
        @Override
        protected void onPostExecute(Boolean result) {  
        }
        @Override
        protected void onPreExecute() {
        }
        @Override
        protected void onProgressUpdate(Void... values) {
        }
    }
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
    } 
```

服务器wsdl：

```
 <?xml version="1.0" encoding="UTF-8"?>
      -<wsdl:definitions name="MagicEightBallService"                 xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:i0="http://try1.com" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:tns="http://tempuri.org/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://tempuri.org/">
    <wsdl:import location="http://localhost:8080/MagicEightBallService?wsdl=wsdl0" namespace="http://try1.com"/>
    <wsdl:types/>
    -<wsdl:binding type="i0:IEightBall" name="BasicHttpBinding_IEightBall">
      <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
       -<wsdl:operation name="ObtainAnswerToQuestion">
          <soap:operation style="document" soapAction="http://try1.com/IEightBall/ObtainAnswerToQuestion"/>
           -<wsdl:input>
              <soap:body use="literal"/>
            </wsdl:input>
           -<wsdl:output>
               <soap:body use="literal"/>
            </wsdl:output>
         </wsdl:operation>
       </wsdl:binding>
     -<wsdl:service name="MagicEightBallService">
       -<wsdl:port name="BasicHttpBinding_IEightBall" binding="tns:BasicHttpBinding_IEightBall">
          <soap:address location="http://localhost:8080/MagicEightBallService"/>
        </wsdl:port>
      </wsdl:service>
    </wsdl:definitions> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:28:52.177

已解决问题。这是因为2个问题：

（1）从这个论坛的另一个问题中找到了这个解决方案（现在找不到......）：

```
require to kill a connection when not in use, by adding in the following code

    System.setProperty("http.keepAlive", "false"); 
```

并通过在

```
androidHttpTransport.call(...):
        androidHttpTransport.getServiceConnection().setRequestProperty("Connection","Keep-Alive"); 
```

(2) 不应该`answer.setText(...)`在`LoopProcess`线程中调用。所以只需要将值返回给主线程来设置值。

和中提琴它的作品，终于！

# c# - 从 WFC 服务返回 Json 结果并在 $.ajax 中使用结果

> ID：14972847
> 
> 赞同：0
> 
> 时间：2013-02-20T05:24:29.797
> 
> 标签：c#, asp.net, wcf, web-services, jquery

我有一个使用 jquery ajax 的 asp.net 页面。我需要创建一个可以在 $.ajax 中用作 url 的方法。我在网上搜索，发现我需要创建 WCF 服务。我的解决方案在 asp.net 3.5 中。我在这样的 IJsonDataService.cs 接口中创建了两个方法

```
 [ServiceContract]
    public interface IJsonDataService
    {
        [OperationContract]
        Person DoWork();

        [OperationContract]
        string GetData();
    }

and then in class file I have implemented them like this:

   [WebGet(RequestFormat= WebMessageFormat.Json, ResponseFormat=WebMessageFormat.Json,UriTemplate="data/{id}")]
 public Person DoWork(){
 return new Person(); 
```

}

```
 [WebGet(RequestFormat= WebMessageFormat.Json, ResponseFormat=WebMessageFormat.Json,UriTemplate="data/{id}")]
    public string GetData(string parameter)
    {
        return "this is" + abc;
    } 
```

我的 web.config 看起来像这样：

```
<system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="JsonDataServiceBehavior">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service behaviorConfiguration="JsonDataServiceBehavior" name="JsonDataService">
                <endpoint address="" binding="wsHttpBinding" contract="IJsonDataService">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
            </service>
        </services>
    </system.serviceModel> 
```

我想将 Id 传递给这些方法，然后查询数据库并返回结果，然后将结果格式化为 json 并将该 json 返回到 $.ajax 方法。我需要在上述方法中进行哪些更改以及如何将数据作为 json 返回，然后在 $.ajax 中使用它？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:08:07.410

你可以检查这个。这种方法类似于您想要完成的。

[MVC 应用程序中的 Web 服务](https://stackoverflow.com/questions/14870187/web-service-in-mvc-app/14870436#14870436)

如果您想要一个示例 JSONP，请参阅[我的 javascript 无法正常工作](https://stackoverflow.com/questions/14318816/my-javascript-wont-work-as-it-should/14319318#14319318)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:50:03.460

这是我发现有用的几篇文章教程

[http://geekswithblogs.net/Nettuce/archive/2009/10/18/wcf-jquery-rest-json-service.aspx](http://geekswithblogs.net/Nettuce/archive/2009/10/18/wcf-jquery-rest-json-service.aspx)

这个最有用

[http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:20:46.820

您的配置需要如下所示：

```
<system.serviceModel>
<endpointBehaviors>
        <behavior name="web">
          <webHttp />
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
        <behavior name="json">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
        <behaviors>
            <serviceBehaviors>
                <behavior name="JsonDataServiceBehavior">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service behaviorConfiguration="JsonDataServiceBehavior" name="JsonDataService">
                <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding" contract="namespace.IJsonDataService">                       
                </endpoint>                    
            </service>
        </services>
    </system.serviceModel> 
```

# .net - 如何在 Web 网格的列中写入 IF 条件

> ID：14972848
> 
> 赞同：2
> 
> 时间：2013-02-20T05:24:34.990
> 
> 标签：.net, asp.net-mvc, webgrid

我在 WEB GRID 的列中创建 if 条件时遇到错误，所以......请帮助改进我的代码并解决我的问题......

```
grid.Column("Status", format: item => 
@<text>
@if (item.Is_active = true)
{ 
    @<a href="Url.Action("UserStatus", "Admin")"><img src="../../images/Active.png"/></a> 
} else
{ 
    @<a href="Url.Action("UserStatus", "Admin")"><img src="../../images/Deactive.png"/></a> 
}
</text>), 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T07:25:59.987

以下应该有效：

```
grid.Column(
    "Status", 
    format: 
        @<a href="@Url.Action("UserStatus", "Admin")">
            <img src="@Url.Content(string.Format("~/images/{0}.png", item.Is_active ? "Active" : "Deactive"))" alt="" />
        </a>
) 
```

请注意我是如何修复`src`您的图像的，因为您已经对其进行了硬编码，而不是使用您永远不应该使用的 url 帮助程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:13:57.113

试试这样：

```
grid.Column("Status", format: item => 
        (bool)item.Is_active ?
        <a href="Url.Action("UserStatus", "Admin")"><img src="../../images/Active.png"/></a> :
        <a href="Url.Action("UserStatus", "Admin")"><img src="../../images/Deactive.png"/></a>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:28:05.450

```
@{ WebGrid grid = new WebGrid(Model.LstContactUsers, selectionFieldName: "SelectedRow", canPage: false); @grid.GetHtml(tableStyle: "grid_rt", headerStyle: "background:none;height:0px;display:none", displayHeader: false, alternatingRowStyle: "grid-row-style", rowStyle: "grid-row-style", columns: grid.Columns( grid.Column(" ", header: null, style: "grid-row-style", format: @ @item.FName  @item.LName 
***@if( @item.Email.Contains("Group")) { @item.Email } else { 
@item.Email }*** )))
} 
```

# javascript - 如何将jqplot yaxis格式化为整数

> ID：14972850
> 
> 赞同：3
> 
> 时间：2013-02-20T05:24:38.257
> 
> 标签：javascript, label, jqplot

如何将 y 轴刻度字符串格式化为整数而不是十进制。目前，门票显示为 076165412.654666666666 等数字，我希望它们显示为 76165412。

```
 var data = [['2013/02/11',20130211],['2013/02/10',20130210],['2013/02/12',20130212],['2013/02/15',20130215],['2013/02/16',71],['2013/02/17',81],['2013/02/18',71],['2013/02/06',735],['2013/02/19',90]];

  var options = {
    title: 'Monthly statistics for EnrAll',
    autoscale:true,
    axes: {
      xaxis: {
        renderer: $.jqplot.DateAxisRenderer,
        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
        min:'Feb 01, 2013',
        max:'Feb 20, 2013',
        numberTicks: 15,
        tickOptions: {
          formatString:'%b %#d',
          angle: 15
        }
      },
      yaxis: {
        label: 'Count',    
        min:'0'         
      }
    },
    highlighter: {
      show: true,
      tooltipFadeSpeed: 'fast'
    }
  }; 
```

![示例图](../Images/9efc2c0854a31317449268678d001491.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:22:54.753

为了解决这个问题，我所做的只是更改指定最小 y 轴值的方式。

目前你有`min:'0'`，把它改成`min:0`（即一个数字而不是一个字符串）。为了进一步保险，您可以设置`tickOptions`并强制使用整数表示，尽管我自己不需要这个：

```
tickOptions: {
    formatString: '%d'
} 
```

# javascript - 在 js 中以编程方式展开可折叠集

> ID：14972852
> 
> 赞同：2
> 
> 时间：2013-02-20T05:24:54.570
> 
> 标签：javascript, jquery-mobile

我有 4 个可折叠套装：一年中每个季度都有 1 个可折叠。根据当前月份，相应的可折叠应在文档准备好时展开。但是，这不起作用。

```
<script type="text/javascript">

    $(document).ready
    (
        function()
        {

            var today=new Date();
            var month=today.getMonth()+1;
            alert(month);

            if(month>9)
            {
                $('#qFourCollapsible').trigger("expand");
            }
            else if(month>6)
            {
                $('#qThreeCollapsible').trigger("expand");
            }
            else if(month>3)
            {
                $('#qTwoCollapsible').trigger("expand");
            }
            else
            {
               alert("in else");
               $('#qOneCollapsible').bind("expand", function () {
                       alert('Expanded');
                       });
            }

        }

    );
    </script>

<html>
<div data-role="collapsible-set" data-theme="b" data-content-theme="c" data-collapsed="false" id="qOneCollapsible">
                <div data-role="collapsible">
                    <h2>January-March</h2>

                    <table id="quarterOneTable">
                    </table>
                </div>
            </div>
            <div data-role="collapsible-set" data-theme="b" data-content-theme="d" id="qTwoCollapsible">
                <div data-role="collapsible">
                    <h2>April-June</h2>

                    <table id="quarterTwoTable">
                    </table>
                </div>
            </div>
            <div data-role="collapsible-set" data-theme="b" data-content-theme="c" id="qThreeCollapsible">
                <div data-role="collapsible">
                    <h2>July-September</h2>

                    <table id="quarterThreeTable">
                    </table>
                </div>
            </div>
            <div data-role="collapsible-set" data-theme="b" data-content-theme="d" id="qFourCollapsible">
                <div data-role="collapsible">
                    <h2>October-December</h2>

                    <table id="quarterFourTable">
                    </table>

                </div>
            </div>  
</html> 
```

因此，如您所见，我尝试以两种方式扩展可折叠设备。`1: $('#qFourCollapsible').trigger("expand");` `2: $('#qOneCollapsible').bind("expand", function () { alert('Expanded');`他们两个都不工作。第二种方法正在工作，并且仅在单击可折叠时才显示警报扩展。但是，我希望它根据当前月份自行扩展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-02T00:21:19.443

当前的 api 文档提供了新信息

```
$("#resCollapsable").collapsible("expand"); 
```

这有效，该线程中的先前代码似乎不再有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:15:39.283

答案很简单，您正在尝试扩展错误的元素，您需要扩展**`data-role="collapsible"`**并且您正在尝试在**`data-role="collapsible-set"`**.

这是一个工作示例：http: [//jsfiddle.net/Gajotres/vSjtA/](http://jsfiddle.net/Gajotres/vSjtA/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $( "#qOneCollapsible-inner" ).trigger( "expand" );
    $( "#qThreeCollapsible-inner" ).trigger( "expand" );    
}); 
```

也不要使用 jQuery Mobile 准备好的文档，它会在一些基本情况下工作。看看我关于该主题的另一篇**[文章。](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。看看第一章叫做：**$(document).on('pageinit') vs $(document).ready()**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:51:45.573

您需要添加

```
.collapsible("refresh"); 
```

毕竟

```
.trigger("expand"); 
```

来电。因此，您的代码中的一个示例是：

```
$('#qTwoCollapsible').trigger("expand").collapsible("refresh"); 
```

# php - 拉取与推送部署

> ID：14972853
> 
> 赞同：1
> 
> 时间：2013-02-20T05:24:57.787
> 
> 标签：php, deployment

显然，有两种策略用于部署 Web 应用程序。如果我错了，请纠正我。

## 拉取部署

我有自己的构建、部署脚本。我使用 git 作为 vcs。部署脚本将从 git 存储库中提取代码，构建脚本将配置应用程序。

**优点**

*   简易安装。
*   更好的可扩展性（因为我的 ssh 密钥驻留在服务器中，它可以联系我们的 vcs 服务器）。因此，即使我们的应用程序服务器增长，我们也不必费心。

## 缺点

*   每个应用程序服务器中作为 ssh 密钥的安全问题。

## 推送部署

我在我的旧项目中使用了这种方法，在那里我使用 rsync 来推送代码。我从本地机器推送了一份副本，但我们仍然使用了 vcs。

**优点**

*   完全控制，灵活性，因为我不必将代码推送到 vcs。

**缺点**

*   没有更好的可扩展性。

我检查了一些提供两种策略的工具。( [http://capifony.org/](http://capifony.org/) )

## 问题

*   对于大型项目，你们如何处理这个问题？（用php构建）。
*   有没有更好的策略？
*   这两者之间哪个更好？
*   如果负载均衡器下有很多应用服务器怎么办？push 在这里有意义吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:34:07.573

> 完全控制，灵活性，因为我不必将代码推送到 vcs

这对我来说不是一件好事。与不使用 VCS 相比，您将拥有*更多的控制权。*我通常在开发和功能分支旁边创建一个生产分支，这样生产服务器只会拉下我故意放入生产分支的代码。

此外，如果您遇到生产代码突然中断的问题，如果您使用的是 VCS，您应该能够回滚到工作版本，同时找出代码有什么问题。对我来说，这是使用拉式部署最有益的方面之一。

如果您使用像 Jenkins 这样的持续集成工具，您可以定期检查 VCS 中特定分支的更改，并让 Jenkins 自动为您拉取和构建您的项目，而无需任何人自己登录到生产服务器。这使得部署就像更新存储库中的代码一样简单。

> 每个应用程序服务器中作为 ssh 密钥的安全问题

根据您的代码托管位置，您可能能够设置仅部署密钥。这就是 Bitbucket 的设置方式，因此我们的生产服务器只能*拉取*代码，不能推送。此外，如果其中一台服务器遭到入侵，我们可以轻松地撤销对我们存储库的对该特定密钥的访问。

# php - 对标签属性中的特定字符进行编码

> ID：14972855
> 
> 赞同：0
> 
> 时间：2013-02-20T05:25:09.470
> 
> 标签：php, regex

使用 PHP，我想在*任何*标签的属性值中对特定字符（`>`和字符）进行编码。`<`

 *例如，`<input type="text" data-name="Oliver<>Nassar">`将成为`<input type="text" data-name="Oliver&lt;&gt;Nassar">`.

我对属性名称（例如`data-name`或`value`属性名称）并不挑剔。虽然我很高兴`\s`在属性值（例如）之前假定一个空格字符（），`<input data-name="...">`但如果这不是一个条件，那就太好了，这样我就可以遇到诸如`<input type="text"data-name="Oliver<>Nassar">`

我想 PHP`preg_replace_callback`会被使用，但就实际表达而言，我可以在那里使用一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:45:58.907

这是我想出的表达方式：

```
'/' .
    '(' .
        '\s{1}' .
        '[a-z\-]+' .
        '\s?' .
        '=' .
        '\s?' .
        '(' .
            '[\'|"]{1}' .
        ')' .
    ')' .
    '([^\2]*)' .
    '\2' .
'/iU', 
```

希望这对其他人有帮助。*

# javascript - Android：如何从 WebView 中选择文本，并在单击时突出显示它

> ID：14972857
> 
> 赞同：0
> 
> 时间：2013-02-20T05:25:28.503
> 
> 标签：javascript, android

大家好，在我的网络应用程序中，我想打印选定的文本（在这里说段落标签中的内容）。如何在 Android WebView 中做到这一点，如何使用 JavaScript 选择文本？

在此先感谢..

这是我的 JavaScript 代码

```
<script type="text/JavaScript">

function SelectText()
{
    var txt = '';
     if (window.getSelection)

    {
        txt = window.getSelection();
             }
    else if (document.getSelection)
    {
        txt = document.getSelection();
            }
    else if (document.selection)
    {
        txt = document.selection.createRange().text;
            }
    else return;
document.getElementById("demo").innerHTML=  txt;
}

</script></head>

 <body>
   <p>Hi man how are you?? Hope your doing good..</p>
   <p> id="demo"></p>

  <button> onclick="SelectText()">Selected text</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T10:19:33.093

你写了

```
<p> id="demo"></p> 
```

它应该是

```
<p id="demo"></p> 
```

这能解决问题还是拼写错误？

# android - 阵列适配器出错

> ID：14972858
> 
> 赞同：0
> 
> 时间：2013-02-20T05:25:33.993
> 
> 标签：android

请朋友们帮帮我。这个程序有什么问题。我不能在这里使用 LayoutInflater。如何解决这个问题呢。

```
public class MyListAdapter extends ArrayAdapter<MyData> implements
        OnClickListener {

    private ArrayList<MyData> items;
    Context context;

    public MyListAdapter(Context context, int textViewResourceId,
            ArrayList<MyData> items) {
        super(context, textViewResourceId, items);
        this.items = items;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row, null);
        }

        MyData myData = items.get(position);
        if (myData != null) {
            TextView textViewTwo = (TextView) v
                    .findViewById(R.id.text_view_two);
            if (textViewTwo != null) {
                textViewTwo.setText(myData.getText());
                // put the id to identify the item clicked
                textViewTwo.setTag(myData.getId());
                textViewTwo.setOnClickListener(this);
            }
        }
        return v;
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Log.d("Sample", "Clicked on tag: " + v.getTag());
        Toast.makeText(context, "", Toast.LENGTH_SHORT).show();

    }

} 
```

错误是：未为 MyListAdapter 类型定义方法 getSystemService(String)。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:26:50.953

采用

```
LayoutInflater vi = (LayoutInflater)
                      context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

代替

```
LayoutInflater vi = (LayoutInflater) 
                  getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

因为 for`getSystemService`是 Context 类的方法而不是`ArrayAdapter`. 你需要使用上下文实例来访问`getSystemService`方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:27:32.043

`context.getStystemService()`像这样试试

```
 LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:39:38.573

使用Activity的上下文获取系统服务

这是调用充气机的正确方法。

LayoutInflater vi = (LayoutInflater) 上下文。获取系统服务（上下文。LAYOUT_INFLATER_SERVICE）；

# azure - Azure 上的 VM 迁移

> ID：14972861
> 
> 赞同：1
> 
> 时间：2013-02-20T05:25:41.110
> 
> 标签：azure, virtual-machine, azure-virtual-machine

我希望在 Azure 上运行 Web 服务器。我担心的是 Azure 是否出于性能优化的目的在物理服务器之间迁移虚拟实例 (VM)，如果是这样，它是否为迁移带来的性能损失提供了某种保证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-17T15:09:58.083

对于 VM 性能和可用性，您可以使用 99.95% SLA 涵盖的可用性集。由于跨服务器机架分布的物理机使用故障域和升级/更新域，此保证有效。

*   更多信息：[https ://azure.microsoft.com/en-us/documentation/articles/virtual-machines-manage-availability/](https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-manage-availability/)

如果您只想运行 Web 应用程序而不必担心 VM，您还可以使用 Azure 的 PaaS 产品（仅端点访问）而不是 IaaS（完整的 VM 访问）。

*   更多信息在这里：[http ://azure.microsoft.com/services/app-service/web/](http://azure.microsoft.com/services/app-service/web/)

希望有帮助！

# c - 我的 C 程序出现几个错误。请帮助我解决我做错的任何事情

> ID：14972862
> 
> 赞同：0
> 
> 时间：2013-02-20T05:25:40.407
> 
> 标签：c

我知道这对我来说可能是一个非常愚蠢的错误，但我刚刚开始学习 C。我想制作一个基本的计算器，但我不断收到关于程序的错误，该程序需要一个 const char * 但我有一个浮点数。它还说最后一个 printf 命令（我相信第 50 行）没有正确的语法或正确的形式。再次，我真的很新，很抱歉给你带来不便。谢谢大家的帮助！我的代码如下。

```
#include <stdio.h>

#include <math.h>

int main()
{
    char firstnum, secondnum, answer;
    char function;

    printf("Hello and welcome to my calculator!");

    printf("Please input the function you would like to use");

    scanf("%c", &function);

    printf("Now please input the two variables.");

    scanf("%f", &firstnum);

    scanf("%f", &secondnum);

    if (function == '+')
    {
        answer = firstnum+secondnum;
    }
    else if (function == '-')
    {
        answer = firstnum-secondnum;
    }
    else if (function == '*')
    {
        answer = firstnum*secondnum;
    }
    else if (function == '/')
    {
        answer = firstnum/secondnum;
    }
    else
    {
        printf("Sorry that was an incorrect function.  The correct inputs are +, -, *, /.");
    }

    printf(answer);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:29:00.900

几件事：

1）换行，因为你想使用浮点数

```
char firstnum, secondnum, answer; 
```

应该

```
float firstnum, secondnum, answer; 
```

2)换线

```
printf(answer); 
```

至

```
printf("Answer %f \n", answer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:28:38.667

你的决赛`printf`应该是

```
printf("%f", answer); 
```

或者更好

```
printf("Answer : %f \n", answer); 
```

这是因为 的声明`printf`如下

```
int printf ( const char * format, ... ); 
```

预期的第一个参数是输出的格式，其余的是要插入的变量。

除此之外，您应该像其他人指出的那样修复您的数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:29:30.147

```
char firstnum, secondnum, answer;
:
scanf("%f", &firstnum); 
```

这根本*不会*有好的结局。您必须将您的数据类型`scanf`与格式说明符匹配。

这些变量应该是类型`float`，但老实说，现在没有真正的理由不使用双精度数来获得额外的范围和精度。在这种情况下，请确保使用`%lf`格式说明符。

此外，您的 final`printf`完全缺少格式说明符，这意味着它将尝试使用该`answer`变量作为说明符。一旦您按照上述方式修复了数据类型，应将其更改为：

```
printf ("%f\n", answer);  // %lf for double. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:27:29.810

像这样声明你的变量 -

```
float firstnum, secondnum, answer; 
```

最后更改`printf`为 -

```
printf("Answer is: %f", answer); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T05:31:40.133

将您的声明更改为 `printf("%f",answer);`.

此外，您已将变量声明为`char`s ，将它们声明为`float`s。

**推荐的：**

由于您似乎是初学者，因此我有一个建议给您。尝试减少您的程序执行时间并尝试使程序高效。`if---else`因此，您可能已经使用了`switch`案例，而不是这么多块。

# android - 如何让日历应用程序进入 2.3.3 模拟器？（我正在使用 Google API 级别 10）

> ID：14972868
> 
> 赞同：0
> 
> 时间：2013-02-20T05:27:04.340
> 
> 标签：android, android-emulator, android-calendar

我使用插件“Google APIs, Android API 10, revision 2”创建了一个虚拟设备，但是当我启动模拟器时，没有日历应用程序。我如何在那里获得日历应用程序？它在某个地方的另一个插件中吗？我是否必须从某个地方（在哪里？）下载它并通过 adb 安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:38:38.587

不，Android 模拟器中默认没有日历。不过，您可以通过`adb`. 但是，建议您在手机上进行更好的测试。

不过，请查看此[问题](http://code.google.com/p/android/issues/detail?id=1389)以获得进一步的帮助。

# salesforce - 如何在 apex.execute 中加载图像

> ID：14972870
> 
> 赞同：0
> 
> 时间：2013-02-20T05:27:12.137
> 
> 标签：salesforce, visualforce, callout

在我的过程发生时想要一些关于图像加载的信息。

实际上我正在调用 Button click 上的标注，因为我已经使用过

```
{!REQUIRESCRIPT("/soap/ajax/10.0/connection.js")}
{!REQUIRESCRIPT("/soap/ajax/10.0/apex.js")}
var url = parent.location.href;
sforce.apex.execute("ConsumeCallout","ConsumeData",{ObjName:"Contact",ConName:"{!Contact.Id}",MobileNumber:"{!Contact.MobilePhone}",PhoneNumber:"{!Contact.Phone}"}); 
```

但结果会在 4-5 秒后出现。所以我想同时显示一个加载图像。有人可以建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:23:41.457

在调用 sforce.apex.execute 之前，请使用 javascript 显示图像。我建议使用像 jQuery 这样的 javascript 库。然后你可以做这样的事情：

```
{!REQUIRESCRIPT("/soap/ajax/10.0/connection.js")}
{!REQUIRESCRIPT("/soap/ajax/10.0/apex.js")}
var url = parent.location.href;
$('the id of the element you want to change').html('<img src="image_url_here" />');
sforce.apex.execute("ConsumeCallout","ConsumeData",{ObjName:"Contact",ConName:"!Contact.Id}",MobileNumber:"{!Contact.MobilePhone}",PhoneNumber:"{!Contact.Phone}"}); 
```

如果您使用将由 sforce.apex.execute 更新的元素，它会在更新时消失。但是要获得完整的答案，您必须发布更多代码（尤其是 html）

# python - 在 Django 中更改日期格式

> ID：14972871
> 
> 赞同：0
> 
> 时间：2013-02-20T05:27:14.773
> 
> 标签：python, django, datetime, format

嗨，我正在使用以下内容从**数据库中获取日期值**

> {{request.user.date_joined}}

采用以下格式` **2011 年 1 月 14 日上午 6:40** ，我需要像这样更改格式 **2012-08-24 00:26:44** 请告诉我如何实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:29:49.140

您可以使用日期过滤器

```
{{ request.user.date_joined|date:"Y-m-d H:i:s" }} 
```

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T05:30:24.937

您可以使用`date`过滤器

```
{{ request.user.date_joined |date:"D d M Y" }} 
```

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)

# c++ - 使用新关键字扩展 c++

> ID：14972881
> 
> 赞同：2
> 
> 时间：2013-02-20T05:27:51.713
> 
> 标签：c++

我想使用一些关键字来扩展 c++，例如“property”，以向类/对象添加属性（如 Visual Studio 在“托管”版本中扩展 C++）。对于代码示例：

```
 class Example {
     public:
       [...]
       property int size {
             get: {
                   return __size;
                  }
             set: {
                   if( value > 0 )
                      __size = value;
                   else
                      throw new Exception("Invalid Size");
                   }
       };
}; 
```

利用：

```
 [...]
    int totalSize = example1.size + example2.size + example3.size;
    example1.size = 2 * example1.size; 
```

我想要的是使用一种翻译器将 C++“扩展”源代码翻译成“普通”源代码，就像 QT MOC 一样，它解析一个 C++ 源代码并生成另一个 C++ 源代码，带有 QT“东西" 翻译成纯 C++。当然，我需要扩展翻译器（向它编写代码，以便它可以理解如何处理“属性关键字”）。你知道我可以用来做我想做的事的“翻译器”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:17:20.840

可以使用[pyparsing](http://pyparsing.wikispaces.com/)简单地处理标头。它是一个 Python-lib，是一个强大但简单的解决方案。我自己在工作中使用它来解析受 C 启发的定义文件并从中生成有效的 C 代码。例如，您可以简单地复制头文件但重新编写属性定义，例如使用如下内容：

```
property  := Literal('property') id id Literal('{') [getter] [setter] 
             Literal('}') Literal(';')
getter    := Literal('get:') Literal('{') cpp_block Literal('}')
setter    := Literal('set:') Literal('{') cpp_block Literal('}')
id        := Word(alphas + '_', alphanums + '_')
cpp_block := ... don't know probably just match everything a la .*? ... 
```

然后，您可以将操作附加到方法`setter`并将`getter`其重新写入`cpp_block`方法。

困难始于重新编写 C++ 代码。一个简单的解析器将不知道是否`example1.size`是对`struct`字段的访问（不应更改）、属性获取或属性集调用。所以你需要知道的类型，`example1`但如果你访问左值或右值，因为`example1.size = 1`必须转换为`example1.set_size(1)`但`int a = example1.size`必须成为`int a = example1.get_size()`。

所以本质上，对于代码翻译，您需要 AST 和符号表来查找变量的类型。[ANTLR](http://www.antlr.org/)有一个 C++ 解析器（请参见[此处](http://www.antlr3.org/grammar/cpp/CPP_parser.g)），但我不确定它是否也为您生成符号表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:11:58.460

我认为您应该看看[boost::wave](http://www.boost.org/doc/libs/1_53_0/libs/wave/)和[LLVM](http://llvm.org/devmtg/2011-11/)。前者更容易，也更有限，但也许它正是你所需要的。

# objective-c - 比较日期时间

> ID：14972884
> 
> 赞同：0
> 
> 时间：2013-02-20T05:28:02.620
> 
> 标签：objective-c, xcode

为什么`if`比较两个日期时间的条件不起作用？如果需要`NSDate`，我该如何转换它们？

代码：

```
if ([[NSDate date] dateStringFromFormat:@"dd/MM/yyyy HH:mm"] > [self.tfDatetime dateStringFromFormat:@"dd/MM/yyyy HH:mm"]) {
    // Do ...something
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:32:58.153

为此定义了一种方法。试试下面的代码来比较两个日期:)

```
switch ([[[NSDate date] dateStringFromFormat:@"dd/MM/yyyy HH:mm"] compare [self.tfDatetime dateStringFromFormat:@"dd/MM/yyyy HH:mm"]]){
    case NSOrderedAscending:
         NSLog(@"NSOrderedAscending");
    break;
    case NSOrderedSame:
         NSLog(@"NSOrderedSame");
    break;
    case NSOrderedDescending:
         NSLog(@"NSOrderedDescending");
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T05:29:03.457

要比较两个 NSDates（例如 dateOne 和 dateTwo），请使用此

```
switch ([dateOne compare:dateTwo]){
     case NSOrderedAscending:
          NSLog(@"NSOrderedAscending");
    break;
    case NSOrderedSame:
          NSLog(@"NSOrderedSame");
    break;
    case NSOrderedDescending:
         NSLog(@"NSOrderedDescending");
    break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:36:01.187

另一种比较日期的方法是检查这两个日期之间的间隔，`if ([date1 timeIntervalSinceDate:date2] > 0)`. `date1`是最新日期。

**编辑：**

否决票将无效，因为我正在`NSDate`像这样比较 2 。

```
if ([[NSDate date] timeIntervalSinceDate:[NSDate date]])
{
    // Do something
} 
```

我没有收到任何错误。您正在比较 2 `NSString`s，这将是一个问题，因为`NSString`.

# python-2.7 - 学习python hello world脚本不执行

> ID：14972885
> 
> 赞同：0
> 
> 时间：2013-02-20T05:28:06.013
> 
> 标签：python-2.7

我是 Python 新手，正在学习用它编程。我写了一个基本脚本

### 我的.py

```
#! /bin/python
print "hello world!" 
```

但这不会执行。我做了

> chmod +x 我的.py

和

> ./my.py

我试过删除程序中的空格

```
#!/bin/python 
```

但即使这给了我错误

> bash：./my.py：/bin/python：错误的解释器：没有这样的文件或目录

我使用的是 Ubuntu 12.04，系统上存在 Python。我已经通过在终端上输入来检查程序

那么这里可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:35:42.987

该错误意味着路径中没有文件`/bin/python`

尝试`which python`查看解释器的位置

但为什么不`python my.py`呢？

# flash - Citrus 引擎中的 Box2DPhysicsObject 异常

> ID：14972889
> 
> 赞同：0
> 
> 时间：2013-02-20T05:28:12.687
> 
> 标签：flash, null, listener, box2d, citrus-engine

如果我只是创建一个新的 Box2DPhysicsObject，它会完美运行。

如果我像这样覆盖它的功能：

```
public class CarObject extends Box2DPhysicsObject
    {
        private const degreesToRadians:Number=0.0174532925;
        private var worldScale:int=30;

        private var leftAxleContainerShape:b2PolygonShape;
        private var leftAxleContainerFixture:b2FixtureDef;

        private var rightAxleContainerShape:b2PolygonShape;
        private var rightAxleContainerFixture:b2FixtureDef;

        private var carPosX:Number=500;
        private var carPosY:Number=300;
        private var carWidth:Number=45;
        private var carHeight:Number=10;
        private var axleContainerDistance:Number=30;
        private var axleContainerWidth:Number=5;
        private var axleContainerHeight:Number=20;
        private var axleContainerDepth:Number=10;

        private var axleAngle:Number=20;
        private var wheelRadius:Number=25;

        public function CarObject(name:String, params:Object=null)
        {
            super(name, params);
        }

        override protected function defineBody():void{      
            //super.defineBody();   

            _bodyDef = new b2BodyDef();
            _bodyDef.position.Set(carPosX/worldScale,carPosY/worldScale);
            _bodyDef.type = b2Body.b2_dynamicBody;
        }

        override protected function createBody():void{
            //super.createBody();   

            _body = _box2D.world.CreateBody(_bodyDef);
        }

        override protected function createShape():void{
            //super.createShape();

            _shape = new b2PolygonShape();
            b2PolygonShape(_shape).SetAsBox(carWidth/worldScale,carHeight/worldScale);

        }

        override protected function defineFixture():void{
            //super.defineFixture();

            _fixtureDef = new b2FixtureDef();
            _fixtureDef.density=5;
            _fixtureDef.friction=3;
            _fixtureDef.restitution=0.3;
            _fixtureDef.filter.groupIndex=-1;
            _fixtureDef.shape = _shape;

        }

        override protected function createFixture():void{
            //super.createFixture();        

            _body.CreateFixture(_fixtureDef);
        }

        override public function handleBeginContact(contact:b2Contact):void{
            super.handleBeginContact(contact);
            trace("1");
        }

        override public function handleEndContact(contact:b2Contact):void{
            super.handleEndContact(contact);
            trace("3");
        }

        override public function handlePostSolve(contact:b2Contact, impulse:b2ContactImpulse):void{
            super.handlePostSolve(contact, impulse);
            trace("2");
        }

        override public function handlePreSolve(contact:b2Contact,         oldManifold:b2Manifold):void{
            super.handlePreSolve(contact, oldManifold);
            trace("3");
        }
    } 
```

它总是告诉我这个错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at citrus.physics.box2d::Box2DContactListener/PreSolve()[C:\Users\Aymeric\Workspace\Flash\Librairies\Citrus-Engine\src\citrus\physics\box2d\Box2DContactListener.as:29]
    at Box2D.Dynamics.Contacts::b2Contact/http://www.box2d.org/ns/b2internal::Update()[C:\Users\Aymeric\Workspace\Flash\Librairies\Citrus-Engine\srclib\Box2D\Dynamics\Contacts\b2Contact.as:330]
    at Box2D.Dynamics::b2ContactManager/Collide()[C:\Users\Aymeric\Workspace\Flash\Librairies\Citrus-Engine\srclib\Box2D\Dynamics\b2ContactManager.as:265]
    at Box2D.Dynamics::b2World/Step()[C:\Users\Aymeric\Workspace\Flash\Librairies\Citrus-Engine\srclib\Box2D\Dynamics\b2World.as:575]
    at citrus.physics.box2d::Box2D/update()[C:\Users\Aymeric\Workspace\Flash\Librairies\Citrus-Engine\src\citrus\physics\box2d\Box2D.as:112]
    at citrus.core::State/update()[C:\Users\Aymeric\Workspace\Flash\Librairies\Citrus-Engine\src\citrus\core\State.as:109]
    at citrus.core::CitrusEngine/handleEnterFrame()[C:\Users\Aymeric\Workspace\Flash\Librairies\Citrus-Engine\src\citrus\core\CitrusEngine.as:256] 
```

如果我向内部世界添加一个新的 ContactListener：

```
public function CarObject(name:String, params:Object=null)
{
    super(name, params);
    _box2D.world.SetContactListener(new MyContactListener());
} 
```

它运行没有任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T09:53:04.140

每次我初始化对象（英雄、平台等）时，我都会遇到与 Citrus 3.1.6 相同的问题。

我怀疑这是正确的解决方案，因为它正在修改柑橘核心代码，但这似乎有帮助。

如果你下载了citrus的源码版本并添加到src/（而不是使用swc），你可以修改citrus.physics.box2d.Box2DContactListener.如下：

分别更改BeginContact()、EndContact()、PreSolve()、PostSolve()，如：

```
if( a && b ) { //make sure they exist...
    if (a.beginContactCallEnabled)
        a.handleBeginContact(contact);

    if (b.beginContactCallEnabled)
        b.handleBeginContact(contact);
} 
```

这将阻止类抛出错误。我很想知道为什么会这样！

# android - 如何获取用户单击的位置的纬度和经度

> ID：14972891
> 
> 赞同：0
> 
> 时间：2013-02-20T05:28:13.230
> 
> 标签：android

我将获取用户单击的地图上某个位置的纬度和经度，并对它们进行一些计算。顺便说一句，我会说我正在使用模拟器，我无法使用手机，我必须在模拟器中运行它。请帮我做什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:36:06.663

请详细说明您的需求，因为这个问题非常令人困惑。您可以在谷歌地图上显示经纬度值，我猜您是从网络服务或当前位置获取的。要在您的模拟器上使用谷歌地图，您将需要谷歌地图密钥。让我知道你到底想要什么类型的帮助。

[http://blogspot.fluidnewmedia.com/2009/04/displaying-google-maps-in-the-android-emulator/](http://blogspot.fluidnewmedia.com/2009/04/displaying-google-maps-in-the-android-emulator/) 上面的链接 id 很好开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:46:46.827

您应该澄清您正在使用什么（Google API 或地图图像），如果您使用图像，我假设您正在使用 Java for Android，您可以使用
`onTouchEvent`找到您的坐标然后返回它们只要您自己知道地图上的经度和纬度，屏幕上的经度和纬度就可以...请在您的问题中更具描述性。

```
public boolean onTouchEvent(MotionEvent event){
    int action = event.getAction();
    int x = event.getX()  
    int y = event.getY();
    return yourBoolean;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:01:36.663

```
We can not get the current lat and long values in the emulator up to my knowledge. You have to put them your self.Correct me if I am wrong but this is true for that you have to use the real device.

I think this code will help you.Give try on device and let me know.

public class Google_maps extends MapActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_google_maps);

        MapView mapview=(MapView)findViewById(R.id.mapView);
        mapview.setBuiltInZoomControls(true);
        MapOverlay mapOverlay = new MapOverlay();
        List<Overlay> listOfOverlays = mapview.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);        

        mapview.invalidate();

    }

    class MapOverlay extends Overlay
    {

        @Override
        public boolean onTouchEvent(MotionEvent event, MapView mapView) 
        {   
            //---when user lifts his finger---
            if (event.getAction() == 1) {                
                GeoPoint p = mapView.getProjection().fromPixels(
                    (int) event.getX(),
                    (int) event.getY());
                    Toast.makeText(getBaseContext(), 
                        p.getLatitudeE6() / 1E6 + "," + 
                        p.getLongitudeE6() /1E6 , 
                        Toast.LENGTH_SHORT).show();

            }                            
            return false;
        }        
    }
    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }} 
```

# ruby-on-rails - 以简单形式添加多个 HABTM 关联实例

> ID：14972902
> 
> 赞同：0
> 
> 时间：2013-02-20T05:28:46.130
> 
> 标签：ruby-on-rails, simple-form, has-and-belongs-to-many

我有一个带有 HABTM 关系的产品和订单的 rails 项目。在订单表单中，我希望用户能够单击一个按钮并让它预先选择一些产品（其中一些产品的数量超过一个）。我试过使用复选框，但这不允许用户选择两个数量的相同产品。

我知道在控制器端，如果有相同product_id 的多个实例，它不会有问题，它只会将这些id 与该订单关联多次。但是，如果我只能使用复选框，我想不出在视图/表单方面执行此操作的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:43:38.703

**嘿，您的代码与表单页面**中的代码相同

 **```
<div>
  <%= check_box_tag "product[order_ids][]", order.id , @product.orders.include?(order) %>
  <%= order .name %>
</div> 
```**

# c# - 解析系统日志优先级值（PRIVAL）的算法

> ID：14972917
> 
> 赞同：1
> 
> 时间：2013-02-20T05:29:49.337
> 
> 标签：c#, .net, bit-manipulation, syslog

我想`PRIVAL`从 syslog 条目中解析信息，但我无法理解所需的算法。

[RFC5424](https://www.rfc-editor.org/rfc/rfc5424#section-6.2)说：

> 优先级值的计算方法是先将设施编号乘以 8，然后加上严重性的数值。

有了这个，这就是我所理解的。

```
(X * 8) + y = [known number] 
```

所以

```
If (X * 8) + Y = 134    
// I happen to know that X = 16 and Y = 6 
```

或者

```
If (X * 8) + Y = 78
// What are the values of X and Y? 
```

那么解析这些信息的合适算法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T06:37:37.853

根据 RFC 5424，优先级值由 0..23 范围内的 Facility 值和 0..7 范围内的 Severity 值组成。给定优先级值，您可以按如下方式提取设施和严重性：

```
int priorityValue = 134; // using your example
int facility = priorityValue >> 3;
int severity = priorityValue & 7; 
```

`priorityValue = facility * 8 + severity`这是用于生成您在 SYSLOG 数据中看到的值的组合操作的简单反转。您还可以使用：

```
int facility = priorityValue / 8; 
```

因为我们使用的是整数，所以这应该会给你与上面的位移操作相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T22:45:45.990

Corey 的回答要彻底得多，不过我更喜欢 div 和 mods（C/C++）：

```
const int priority = 134; // using your example
const int facility = priority / 8;
const int severity = priority % 8; 
```

反过来说：

```
const int priority = (facility * 8) + severity; 
```

# jquery - ASP.NET UserControl 的多个实例与同一页面上的查询自动完成

> ID：14972918
> 
> 赞同：1
> 
> 时间：2013-02-20T05:29:52.603
> 
> 标签：jquery, asp.net, autocomplete, webusercontrol

一般来说，我对 jquery 和 javascript 编程很陌生，所以请耐心等待。

我有一个包含 jquery 自动完成插件实例的 ASP.NET Web 用户控件 (region.ascx)。jquery 代码（为简洁起见，我截断了代码）是这样的：

```
$(function () {
    initializerRegion();
});

var prmInstance = Sys.WebForms.PageRequestManager.getInstance();

prmInstance.add_endRequest(function () {
    //you need to re-bind your jquery events here 
    initializerRegion();
});

function initializerRegion() {

    $($get('<%= autoRegion.ClientID %>')).autocomplete({
        source: function (request, response) {.......................... 
```

当 asp.net 页面上只有一个控件实例时，该控件可以正常工作。我有一个情况，我有两个单独的用户控件（Org.ascx 和 Place.ascx），每个控件都有一个 region.ascx 实例，它们位于单个 asp.net 页面上，因此我最终得到了上述代码的 2 个实例. 在这种情况下，只有最后一个实例（对于 place.ascx）被正确初始化并工作。另一个实例（org.ascx）不做任何事情。

我想我可以通过将上面的 Initializer 代码放入每个需要它的控件中来解决这个问题，基本上摆脱了我的 region.ascx 控件。我有一种感觉，如果我这样做并使初始化函数的名称独一无二，它可能会起作用。

我的问题是：我这样做正确吗？有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:56:18.193

您的代码中的问题是在全局执行上下文中声明的`prmInstance`变量和`initializerRegion`函数。所以最后一个控件覆盖了`initializerRegion`函数定义。要解决此问题，您可以将所有代码包装在自调用函数中，如下所示：

```
(function () {
    var prmInstance = Sys.WebForms.PageRequestManager.getInstance();
    prmInstance.add_endRequest(function () {
        //you need to re-bind your jquery events here 
        initializerRegion();
    });

    var initializerRegion = function () {
        $('#<%= autoRegion.ClientID %>').autocomplete({
            source: function (request, response) {
                //......
            },
            //......
        });

        $(function () {
            initializerRegion();
        });
    })(); 
```

这段代码对我很有效：

ascx:

```
<script type="text/javascript">
    (function () {
        var prmInstance = Sys.WebForms.PageRequestManager.getInstance();
        prmInstance.add_endRequest(function () {
            initialize();
        });

        var initialize = function () {
            $("#<%= TextBox1.ClientID %>").on("keyup", function () {
                alert(this.value);
            });
        };

        $(function () {
            initialize();
        });
    })();
</script>
<asp:TextBox runat="server" ID="TextBox1" /> 
```

aspx：

```
<asp:ScriptManager runat="server" />

<asp:UpdatePanel runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <uc:WebUserControl2 runat="server" ID="ucWebUserControl2" />
        <asp:Button Text="Click Me" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel>
<hr />
<asp:UpdatePanel runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <uc:WebUserControl2 runat="server" ID="WebUserControl1" />
        <asp:Button Text="Click Me" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:54:28.643

编码

```
$(function () {
    initializerRegion();
}); 
```

是你问题的根源。这转化为 $document.Ready() 只能处理一次。因此，不要让这个区域在您的用户控制级别，而应该**始终**在页面级别。在上述场景中，您有两个相同用户控件的实例，但如果您有两个具有类似初始化的单独用户控件，您的代码仍然会失败。

将上面的代码放在添加了用户控件的页面中，您的代码应该可以正常工作。

让我知道这是否适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:02:51.150

您可以使用 jquery 而不是 asp.nettoolkit 自动完成，它允许您使用任意数量的自动完成

```
<script type="text/javascript">
    $(function () {
        $("#txtBoxWord").autocomplete({
            source: function (request, response) {

                $.ajax({
                    url: "AutoComplete.asmx/GetCompletionList",
                    data: "{ 'prefixText': '" + request.term + "','count':'10',contextKey:" + comboboxLang.GetSelectedIndex() + " }",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        $(".ui-autocomplete").css("width", "340px");
                        if (comboboxLang.GetSelectedIndex() == 0) {
                            $(".ui-autocomplete").css("direction", "ltr");
                        }
                        if (comboboxLang.GetSelectedIndex() == 1) {
                            $(".ui-autocomplete").css("direction", "rtl");
                        }
                        response($.map(data.d, function (item) {
                            return {
                                value: item
                            };
                        }));
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            minLength: 1

        });
    });
</script> 
```

这是一个很好的例子
[使用 jquery 自动完成和 asp.net 的三种不同方式](http://www.codeproject.com/Articles/78704/3-Different-Approaches-for-Implementing-the-JQuery)

# php - 如何在一个查询中组合三个表并且我需要所有行？

> ID：14972925
> 
> 赞同：0
> 
> 时间：2013-02-20T05:30:38.920
> 
> 标签：php, mysql

```
//( ! ) Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given 
```

不知道遇到这个问题。请大家帮帮我。这是我的代码：

```
$query = "SELECT t1.employeecode, t1.employeename, t2.v, t2.w, t3.total, t3.totals
                FROM invoice t1,salaries t2,table1 t3
                WHERE t1.employeecode = salaries.employeecode AND
                t1.employeecode = t3.employeecode
                ORDER BY t1.employeecode ASC";

    $result = mysql_query($query,$con);

    if(mysql_num_rows($result)>0){

        echo '<table><tr><th>Article title</th>&nbsp;</tr>';
        while($row=mysql_fetch_array($result)){
            //$postedon = strftime("%A %e %b %Y",strtotime($row['postedon']));
            echo '<h1><tr><td><a href="3.php?employeecode='.$row["employeecode"].'">'.$row["deparment"].'</a></td></tr></h1>';
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:34:45.650

$result 是布尔值（假），因为您的查询一定有问题。通过在查询中使用错误来帮助自己`mysql_error()`，

```
$result = mysql_query($query,$con) or die(mysql_error()); 
```

**注意**：[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。

所以要么使用要么[`PDO`](https://stackoverflow.com/a/14110189/1723893)（`MySQLi`IMO PDO 是可行的方法）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T05:34:53.753

由于您将`salaries`表别名为您必须在 where 子句`t2`中引用它：`t2`

```
$query = "SELECT t1.employeecode, t1.employeename, t2.v, t2.w, t3.total,
            t3.totals
            FROM invoice t1,salaries t2,table1 t3
            WHERE t1.employeecode = t2.employeecode AND
            t2.employeecode = t3.employeecode
            ORDER BY t1.employeecode ASC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:38:02.110

看来您的查询不起作用并且无法返回 FALSE bool 值。要检查在运行时动态构建后需要检查查询的原因，请执行以下步骤

$result = mysql_query($query) 或 die($query."

".mysql_error());

检查错误消息。似乎必须包含一些错误的列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:41:57.160

尝试将您的工资更改为 t2..

```
WHERE t1.employeecode = salaries.employeecode AND 
```

喜欢

```
WHERE t1.employeecode = t2.employeecode AND 
```

我不知道，但我知道，当我们为表提供一些别名时，我们的 dbms 会读取该别名，而不是该本地表名。

# r - R编程 - 向现有矩阵添加额外的列

> ID：14972926
> 
> 赞同：26
> 
> 时间：2013-02-20T05:30:44.003
> 
> 标签：r, statistics

我是 R 编程的初学者，正在尝试向具有 50 列的矩阵添加一列。这个新列将是该行中前 10 个值的平均值。

```
randomMatrix <- generateMatrix(1,5000,100,50)
randomMatrix51 <- matrix(nrow=100, ncol=1)

for(ctr in 1:ncol(randomMatrix)){  
randomMatrix51.mat[1,ctr]  <- sum(randomMatrix [ctr, 1:10])/10
} 
```

这给出了以下错误

```
Error in randomMatrix51.mat[1, ctr] <- sum(randomMatrix[ctr, 1:10])/10 :incorrect
number of subscripts on matrix 
```

我试过这个

```
cbind(randomMatrix,sum(randomMatrix [ctr, 1:10])/10) 
```

但它只适用于一行，如果我在循环中使用这个 cbind，所有旧值都会被覆盖。

如何在新列中添加前 10 个值的平均值。除了循环遍历行之外，还有更好的方法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-20T06:10:00.410

砰！

```
a <- matrix(1:5000, nrow=100)
a <- cbind(a,apply(a[,1:10],1,mean)) 
```

然而，在大型数据集上，它使用起来更快（并且可以说更简单）：

```
cbind(a, rowMeans(a[,1:10]) ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T06:04:43.753

我觉得你想多了。

```
a <- matrix(1:5000, nrow=100)
a <- transform(a,  first10ave = colMeans(a[1:10,])) 
```

# java - 我可以在 XYPlot 中更改 DomainCrosshair 的默认颜色吗：jFreeChart

> ID：14972930
> 
> 赞同：0
> 
> 时间：2013-02-20T05:31:18.183
> 
> 标签：java

我指的是：

[改变散点图中点的形状](https://stackoverflow.com/questions/6665354/changing-the-shapes-of-points-in-scatter-plot)

但我无法看到我的 x,y 数据点的形状：

```
public void plotHysteresis()
       {

        s1= new double[6];
        s2= new double[6];
        s3= new double[6];
        s4= new double[6];

        int i=0;
        for(i=0;i<6;i++)
           {
               s1[i]=hyst[i];
               System.out.println("s1[" +i +"] : " +s1[i] +"\n");
               }
        for(i=0;i<6;i++)
           {
               s2[i]=hyst[10-i];
               System.out.println("s2[" +i +"] : " +s2[i] +"\n");
               }
        for(i=0;i<6;i++)
               {
                   s3[i]=hyst[11+i];
                   System.out.println("s3[" +i +"] : " +s3[i] +"\n");
               }
        for(i=0;i<6;i++)
                       {
                           s4[i]=hyst[21-i];
                           System.out.println("s4[" +i +"] : " +s4[i] +"\n");
               }

       // DefaultCategoryDataset dataset = new DefaultCategoryDataset();
        XYSeries series3 = new XYSeries("III");
        int x=-25;
        System.out.println(x +"***\n");
        for(i=5;i>=0;i--)
        {

            series3.add(x,s3[i]);
            x=x+5;

        }
        System.out.println(x +"***\n");
        XYSeries series4 = new XYSeries("IV");
        for(i=0;i<6;i++)
        {
            x=x-5;
            series4.add(x,s4[i] );

        }
         System.out.println(x +"###\n");
         XYSeries series1 = new XYSeries("I");
         x=0;
        for(i=0;i<6;i++)
        {
            series1.add(x,s1[i] );
            x=x+5;
        }
       // x=x-5;
        System.out.println(x +"***\n");
        XYSeries series2 = new XYSeries("II");
        for(i=5;i>=0;i--)
        {
            x=x-5;
            series2.add(x,s2[i] );

        }
        System.out.println(x +"***\n");

        XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(series3);
        dataset.addSeries(series4);
        dataset.addSeries(series1);
        dataset.addSeries(series2);

        JFreeChart chart = ChartFactory.createXYLineChart(
    "Hysteresis Plot", // chart title
    "Pounds(lb)", // domain axis label
    "Movement(inch)", // range axis label
    dataset, // data
    PlotOrientation.VERTICAL, // orientation
    false, // include legend
    true, // tooltips
    false // urls
    );

        chart.setBackgroundPaint(Color.white);

        //chart.setBackgroundPaint(new Color(249, 231, 236));
        /*CategoryPlot plot = (CategoryPlot) chart.getPlot();
        plot.setBackgroundPaint(Color.lightGray);
        plot.setRangeGridlinePaint(Color.white);
        plot.getRenderer().setSeriesPaint(0, Color.BLUE);
        plot.getRenderer().setSeriesPaint(1, Color.BLUE);
        plot.getRenderer().setSeriesPaint(2, Color.BLUE);
        plot.getRenderer().setSeriesPaint(3, Color.BLUE);*/
        Shape cross = ShapeUtilities.createRegularCross(4, 3);

        XYPlot plot = (XYPlot) chart.getPlot();
        XYItemRenderer renderer = plot.getRenderer();
        renderer.setSeriesPaint(0, Color.RED);
        renderer.setSeriesPaint(1, Color.RED);
        renderer.setSeriesPaint(2, Color.RED);
        renderer.setSeriesPaint(3, Color.RED);

        renderer.setSeriesShape(0, cross);
        renderer.setSeriesShape(1, cross);
        renderer.setSeriesShape(2, cross);
        renderer.setSeriesShape(3, cross);
        renderer.setSeriesVisible(0,true);
        renderer.setSeriesVisible(1,true);
        renderer.setSeriesVisible(2,true);
        renderer.setSeriesVisible(3,true);

        plot.setDomainCrosshairVisible(true);//Sets Y axis visible blue
        plot.setRangeCrosshairVisible(true);//Sets X axis visible blue

        /*LineAndShapeRenderer rend
    = (LineAndShapeRenderer) plot.getRenderer();
    rend.setShapesVisible(true);*/
    //renderer.setDrawOutlines(true);
    //renderer.setUseFillPaint(true);
    //renderer.setFillPaint(Color.white);

        ChartPanel frame = new ChartPanel(chart);
        frame.setVisible(true);
        frame.setSize(plotPanel.getWidth(),plotPanel.getHeight());
        plotPanel.add(frame);
        plotPanel.repaint();
       } 
```

上面的代码给了我输出：

![在此处输入图像描述](../Images/28087195087255d655bf8b5d7bd71f69.png)

早些时候，我能够看到带有 CategoryPlot 和 LineChart 的形状，如代码的注释部分所示，但它不适用于 XYLineChart。

请帮忙谢谢

**得到了解决方案： [How to get diamond shape for points in JFreechart](https://stackoverflow.com/questions/14822218/how-to-get-diamond-shape-for-points-in-jfreechart) Can I change the color of plot.setDomainCrosshairVisible(true);//设置Y轴可见蓝色 plot.setRangeCrosshairVisible(true);//设置X轴可见蓝色想要使它变黑而不是显示为蓝色。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:46:06.147

好的得到了答案：

[如何在 JFreechart 中获得点的菱形](https://stackoverflow.com/questions/14822218/how-to-get-diamond-shape-for-points-in-jfreechart)

```
XYLineAndShapeRenderer r = (XYLineAndShapeRenderer) plot.getRenderer();
r.setSeriesShape(0, ShapeUtilities.createDiamond(5));
r.setSeriesShapesVisible(0, true); 
```

没有在我的代码中添加 XYLineAndShapeRenderer

# actionscript-3 - 如何在 AS3 中正确设置语言环境

> ID：14972943
> 
> 赞同：1
> 
> 时间：2013-02-20T05:32:40.087
> 
> 标签：actionscript-3, flash, localization, internationalization

在 ActionScript 中设置区域设置的正确方法是什么，以便功能与预期一样`String.toLocaleUpperCase()`并按`String.toLocaleLowerCase()`预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:52:36.977

这是[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#toLocaleUpperCase%28%29)中有趣的一行：

> 虽然此方法旨在以特定于语言环境的方式处理转换，但 ActionScript 3.0 实现不会产生与该`toUpperCase()`方法不同的结果。

根据此信息，以下是文档`.toUpperCase()`必须说的内容：

> *此方法转换存在 Unicode 大写等效*项的所有字符（不仅仅是 az）。
> 这些大小写映射在[Unicode 字符数据库规范](http://www.unicode.org/ucd/)中定义。

总之，我认为实际上没有办法设置语言环境。

# java - Java kthSmallestElement 使用快速排序无限循环错误

> ID：14972949
> 
> 赞同：0
> 
> 时间：2013-02-20T05:33:00.877
> 
> 标签：java, algorithm, sorting, quicksort

所以我使用修改后的快速排序算法实现了“查找数组中第 k 个最小的元素”。但是，现在它是无限循环。我不太确定错误在哪里。**更新：调试器说错误在第 14 行：“return kthSmallestError(arr, start, j-1, k); 根据打印语句，(start, j-1, k) 值为 (3, 3, 0 ）”**感谢您的帮助！

```
class kthSmallestElement {
    public static void main(String[] args) {
        int[] input = {3, 1, 5, 2, 6, 4, 7};
        int result = kthSmallestElement(input, 0, input.length-1, 3);
        System.out.println(result);
    }
    public static int kthSmallestElement(int[] arr, int start, int end, int k) {
        int j = partition(arr, start, end);
        if (j == k) return arr[j];
        if (j < k) {
            return kthSmallestElement(arr, j+1, end, k-j-1);
        }
        else {
            return kthSmallestElement(arr, start, j-1, k);
        }
    }

    public static int partition(int[] arr, int left, int right) {
        int pivot = arr[left+(right-left)/2];

        while (left <= right) {
            while (arr[left] < pivot) {
                left++;
            }
            while (arr[right] > pivot) {
                right--;
            }
            if (left <= right) {
                int temp = arr[left];
                arr[left] = arr[right];
                arr[right] = temp;
                left++;
                right--;
            }
        }
        return left;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T21:41:31.457

请试试这个。

谢谢，

- 约翰

```
 public static int kthSmallestElement(int[] arr, int start, int end, int k) {
    //int j = partition(arr, start, end);
    int j = partition2(arr, start, end);
    if (j == k)
        return arr[j];
    if (j < k) {
        // without -1 as original code.
        return kthSmallestElement(arr, j + 1, end, k - j );
    } else {
        return kthSmallestElement(arr, start, j - 1, k);
    }
}

public static int partition2(int[] arr, int lo, int hi) {
    int left = lo;
    int right = hi+1;
    int p = arr[lo];

    while (true) {
        while (arr[++left] < p) {
            if (left == hi)
                break;
        }

        while (p < arr[--right]) {
            if (right == lo) {
                break;
            }
        }

        if (left >= right) {
            break;
        }

        exchange(arr, left, right);
    }

    exchange(arr, lo, right);
    return right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:55:58.357

一个明显的错误：`left, right, j`绝对索引`k`是相对的。和 之间的所有比较和算术运算`j`都应`k`由 校准`start`。

# html - 哪个编解码器将与 mjpeg 文件一起使用？

> ID：14972950
> 
> 赞同：0
> 
> 时间：2013-02-20T05:33:03.977
> 
> 标签：html, video

我需要使用 html 文件嵌入和播放 mjpeg 视频。我可以使用标签。容器是 .mp4 或 .avi。我应该使用哪些编解码器来播放视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:34:42.240

h264（.mp4 通常使用的编解码器）正在成为 HTML5 中播放视频的标准。甚至 Firefox 也终于开始支持它了。

# c++ - 动态二维数组非连续内存 C++

> ID：14972951
> 
> 赞同：3
> 
> 时间：2013-02-20T05:33:14.960
> 
> 标签：c++, arrays, memory, 2d, contiguous

假设我将二维数组的地址连同二维数组的行和列一起传递给函数。

该函数会将二维数组的地址视为一维数组。（例如 int 矩阵 [] ）

如果我执行以下代码：

```
 int** arr;

    arr = new int*[row];

    for ( int i = 0; i < row; i++ )
    {

        arr[i] = new int[column];
    } 
```

1.  假设，我认为在多线程系统中，这可能不会为二维数组分配连续的内存。我对么？

2.  但是，我认为在单线程系统中，这将为二维数组分配连续的内存。我对吗？如果是这样，它“总是”是真的吗？还是取决于编译器和操作系统？

3.  如果代码现在是这样的：

    ```
    int** arr;
    int** arr2;

    arr = new int*[row];
    arr2 = new int*[row];

    for ( int i = 0; i < row; i++ )
    {

        arr[i] = new int[column];
        arr2[i] = new int[column];
    } 
    ```

    我没有连续的内存二维数组。即使每一行中的元素是连续的，行本身也不会与下一行连续。我对么？

4.  如果以上所有内容都是正确的，那么在 C++ 中，并非每个二维数组都是连续内存，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:38:24.423

1.  真的
2.  在很多时候实际上可能是正确的，尽管可能取决于实现，但不同的内存分配策略可能会以不同的方式进行，不太可能是标准定义的。还依赖于内存碎片。
3.  又是真的。
4.  错误，因为最典型的二维数组如下所示，它将具有连续的堆栈内存

    ```
    int my2DArr[5][5]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:40:06.260

在您提到的所有情况下，永远无法保证您将获得相邻两行的连续内存位置。想一想：如果在为第一行分配了 N 个存储单元之后，接下来的 N 个单元被占用了怎么办？然后第二行不会与第一行连续。但是，如果您的 2D 阵列很小，这种情况将很少见。

# php - PHP：如何使用 while 循环打印关联数组？

> ID：14972952
> 
> 赞同：8
> 
> 时间：2013-02-20T05:33:24.783
> 
> 标签：php, arrays

我有一个简单的关联数组。

```
<?php
$assocArray = array('a' => 1, 'b' => 2, 'c' => 3);
?> 
```

仅使用 while 循环，如何在此结果中打印它？

```
$a = 1 
$b = 2 
$c = 3 
```

这是我目前的解决方案，但我认为这不是最有效/最好的方法吗？

```
<?php
$assocArray = array('a' => 1, 'b' => 2, 'c' => 3);
$keys = array_keys($assocArray);
rsort($keys);

while (!empty($keys)) {
    $key = array_pop($keys);
    echo $key . ' = ' . $assocArray[$key] . '<br />';
};
?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T05:39:29.207

试试这个语法，这是完成工作的最有效方法............

```
while (list($key, $value) = each($array_expression)) {
       statement
}

<?php

$data = array('a' => 1, 'b' => 2, 'c' => 3);

print_r($data);

while (list($key, $value) = each($data)) {
       echo '$'.$key .'='.$value;
}

?> 
```

如需[参考](http://www.mydigitallife.info/how-to-access-php-array-and-multidimensional-nested-arrays-code-syntax/)，请查看此链接............

小[示例](http://eval.in/10791)链接在这里...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T05:36:18.633

遍历数组的最好和最简单的方法是使用 foreach

```
 foreach ($assocArray as $key => $value)
        echo $key . ' = ' . $value . '<br />'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:39:10.813

试试这个;

```
$assocarray = array('a' => 1, 'b' => 2, 'c' => 3);
$keys = array_keys($assocarray);
rsort($keys);
while (!empty($keys)) {
    $key = array_pop($keys);
    echo $key . ' = ' . $assocarray[$key] . '<br />';
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-15T08:02:08.853

我对此有一个简单的解决方案，它将完成工作..

```
$x = array(0=>10,1=>11,2=>"sadsd");

end($x);    
$ekey = key($x);        
reset($x );

while(true){

    echo "<br/>".key($x)." = ".$x[key($x)];

    if($ekey == key($x) )break;
    next($x);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-15T08:06:44.690

试试下面的代码：

```
$assocArray = array('a' => 1, 'b' => 2, 'c' => 3);

$obj = new ArrayObject($assocArray);

foreach ( $obj as $key => $value ) {
    echo '$' . $key .'='. $value . "<br/>";
} 
```

# c++ - “手动”签名过载解决方案

> ID：14972954
> 
> 赞同：8
> 
> 时间：2013-02-20T05:33:33.917
> 
> 标签：c++, templates, c++11, overload-resolution

我想制作一个`std::function`可以处理存储多个重载的类似对象。

语法有点像这样：`my_function< int(double, int), double(double, double), char(int, int) >`.

或者，更明确地说：

```
template<typename... Ts>
struct type_list {};

template<typename... Signatures >
struct my_function {
  std::tuple< std::function<Signatures>... > m_functions;
  typedef type_list< Signatures... > sig_list;
  template<typename... Args>
  typename pick_overload_signature< sig_list, type_list<Args...> >::return_value
    operator()( Args&&... args )
  {
    return get<pick_overload_signature< sig_list, type_list<Args...> >::index>(m_functions)(std::forward<Args>(args)...);
  }
}; 
```

我的问题：我应该怎么写`pick_overload_signatures`？

这是我所做的工作：

我的倾向是针对给定的一组参数编写函数签名的偏序，然后对函数签名的类型列表进行排序，然后获取最好的（可能在编译时断言最好的一个是唯一的）。为了实现这一点，我必须在函数签名上有一个可靠的偏序（相对于传入的一组参数）......

13.3.3.1 告诉我如何确定是否存在有效转换。我可以通过使用编译器为我进行转换来作弊，并使用 SFINAE 来检测它是否发生在传入的给定参数和“重载”之一的签名中。

13.3.3.2 告诉我如何订购这些转换。在这里，我必须检测转换序列是用户定义的还是标准序列。我不确定如何区分两者。

也许我可以使用特征类来检测用户定义的转换序列的存在。检查是否存在`&S::operator D()`and`&D::D(S const&)`和`&D::D(S)`and`&D::D(S&&)`或类似的东西。

`has_user_defined_conversion<S,D>::value`, `has_standard_conversion<S,D>::value`, 等等?

这种方法会奏效吗？有人已经这样做了，还是有人已经完成了其中的一部分？

**[答案结果](http://liveworkspace.org/code/4fbNlO%2464)**

```
#include <type_traits>
#include <cstddef>
#include <utility>
#include <functional>
#include <tuple>
#include <string>

// Packaged list of types:
template<typename... Ts>
struct type_list {
   template<template<typename...>class target>
   struct apply {
      typedef target<Ts...> type;
   };
   template<typename T>
   struct append {
      typedef type_list< Ts..., T > type;
   };
   template<typename T>
   struct prepend {
      typedef type_list< T, Ts... > type;
   };
};
template<template<typename>class mapper, typename list>
struct map_types {
   typedef type_list<> type;
};
template<template<typename>class mapper, typename T0, typename... Ts>
struct map_types<mapper, type_list<T0, Ts...>> {
   typedef typename map_types<mapper, type_list<Ts...>>::type tail;
   typedef typename tail::template prepend< typename mapper<T0>::type >::type type;
};
template<template<typename>class mapper, typename list>
using MapTypes = typename map_types<mapper, list>::type;
template<template<typename>class temp>
struct apply_template_to {
   template<typename T>
   struct action {
      typedef temp<T> type;
   };
};
template<template<typename> class temp, typename list>
struct apply_to_each:map_types< apply_template_to<temp>::template action, list > {};
template<template<typename> class temp, typename list>
using ApplyToEach = typename apply_to_each<temp, list>::type;

template<std::size_t n, typename list>
struct nth_type {};
template<std::size_t n, typename first, typename... elements>
struct nth_type<n, type_list<first, elements...>>:nth_type<n-1, type_list<elements...>>
{};
template<typename first, typename... elements>
struct nth_type<0, type_list<first, elements...>>
{
   typedef first type;
};
template<std::size_t n, typename list>
using NthType = typename nth_type<n, list>::type;

// func data
template<typename R, typename... Args>
struct unpacked_func {
   typedef R result_type;
   typedef type_list<Args...> args_type;
   typedef unpacked_func< R, Args... > unpacked_type;
   template<template<typename>class target>
   struct apply {
      typedef target<R(Args...)> type;
   };
};

namespace unpack_details {
   // Extracting basic function properties:
   template<typename Func>
   struct unpack_func {};
   template<typename R, typename... Args>
   struct unpack_func< R(Args...) > {
      typedef unpacked_func< R, Args... > type;
   };
   template<typename R, typename... Args>
   struct unpack_func< unpacked_func<R, Args...> >:
      unpack_func< R(Args...) >
   {};
}

template<typename Func>
using FuncUnpack = typename unpack_details::unpack_func<Func>::type;

template<typename Func>
struct func_props:func_props<FuncUnpack<Func>> {};
template<typename R, typename... Args>
struct func_props<unpacked_func<R, Args...>>:
   unpacked_func<R, Args...>
{};

template<typename Func>
using FuncResult = typename func_props<Func>::result_type;
template<typename Func>
using FuncArgs = typename func_props<Func>::args_type;

template<typename Func>
struct make_func_ptr:make_func_ptr<FuncUnpack<Func>> {};

template<typename R, typename... Args>
struct make_func_ptr< unpacked_func< R, Args... > > {
   typedef R(*type)(Args...);
};
template<typename Func>
using MakeFuncPtr = typename make_func_ptr<Func>::type;

// Marking a type up with an index:
template<typename R, std::size_t i>
struct indexed_type {
   typedef R type;
   enum { value = i };
};

// Sequences of size_t:
template<std::size_t... s>
struct seq {};
template<std::size_t min, std::size_t max, std::size_t... s>
struct make_seq: make_seq< min, max-1, max-1, s...> {};
template<std::size_t min, std::size_t... s>
struct make_seq< min, min, s...> {
     typedef seq<s...> type; 
};
template<std::size_t max, std::size_t min=0>
using MakeSeq = typename make_seq<max, min>::type;

namespace overload_details {
   template<std::size_t n, typename... Overloads>
   struct indexed_linear_signatures {};

   template<typename Overload>
   struct signature_generator {};
   template<typename R, typename... Args>
   struct signature_generator<unpacked_func<R, Args...>> {
      R operator()(Args...); // no impl
   };

   template<typename Func, std::size_t i>
   struct indexed_retval {};

   template<typename R, typename... Args, std::size_t i>
   struct indexed_retval< unpacked_func<R, Args...>, i > {
      typedef unpacked_func<indexed_type<R,i>, Args...> type;
   };

   template<typename Func, std::size_t i>
   using IndexRetval = typename indexed_retval<Func,i>::type;

   void test1() {
      typedef overload_details::IndexRetval< FuncUnpack<void()>, 0 > indexed;
      indexed::apply<std::function>::type test = []()->indexed_type<void,0> {return indexed_type<void,0>();};
   }

   template<std::size_t n, typename Overload, typename... Overloads>
   struct indexed_linear_signatures<n, Overload, Overloads...>:
      signature_generator<IndexRetval<FuncUnpack<Overload>,n>>,
      indexed_linear_signatures<n+1, Overloads...>
   {};

   template<typename T>
   struct extract_index {};
   template<typename T, std::size_t i>
   struct extract_index<indexed_type<T,i>> {
      enum {value = i};
   };

   template<typename T>
   using Decay = typename std::decay<T>::type;

   template<typename indexed_overloads, typename... Args>
   struct get_overload_index {
      enum{ value = extract_index< Decay<decltype( std::declval<indexed_overloads>()(std::declval<Args>()...) )> >::value };
   };

   template<typename Overloads, typename Args>
   struct get_overload {};
   template<typename... Overloads, typename... Args>
   struct get_overload<type_list<Overloads...>, type_list<Args...>> {
      typedef indexed_linear_signatures<0, Overloads...> sig_index;
      enum { index = get_overload_index< sig_index, Args... >::value };
      typedef FuncUnpack< NthType<index, type_list<Overloads...> > > unpacked_sig;
   };

   template<typename Overloads, typename Args>
   using GetOverloadSig = typename get_overload< Overloads, Args >::unpacked_sig;
}

template<typename Overloads, typename Arguments>
struct pick_overload_signature {
   enum{ index = overload_details::get_overload<Overloads, Arguments>::index };
   typedef overload_details::GetOverloadSig<Overloads, Arguments> unpacked_sig;
};
#include <iostream>
void test1() {
   typedef type_list< void(int), void(double) > overloads;
   typedef type_list< int > args;
   typedef pick_overload_signature< overloads, args > result;
   std::cout << result::index << " should be 0\n";
   typedef type_list< double > args2;
   typedef pick_overload_signature< overloads, args2 > result2;
   std::cout << result2::index << " should be 1\n";

//    ;
   typedef ApplyToEach< std::function, overloads >::apply< std::tuple >::type functions;
   typedef std::tuple< std::function<void(int)>, std::function<void(double)> > functions0;
   std::cout << std::is_same<functions, functions0>() << " should be true\n";

   functions funcs{
      [](int) { std::cout << "int!" << "\n"; },
      [](double) { std::cout << "double!" << "\n"; }
   };
   std::get<result::index>(funcs)(0);
}

template< typename... Signatures >
struct my_function {
   typedef type_list<Signatures...> signatures;
   typedef std::tuple< std::function<Signatures>... > func_tuple;
   func_tuple functions;
   template<typename... Funcs>
   explicit my_function(Funcs&&... funcs):
      functions( std::forward<Funcs>(funcs)... )
   {}

   template<typename... Args>
   auto
   operator()(Args&&... args) const ->
      typename overload_details::GetOverloadSig< signatures, type_list<Args...> >::result_type
   {
      return std::get<
         pick_overload_signature< signatures, type_list<Args...> >::index
      >(functions)(std::forward<Args>(args)...);
   }
   // copy/assign boilerplate
   template<typename... OtherSignatures>
   my_function( my_function<OtherSignatures...> const& o ):
      functions( o.functions )
   {}
   template<typename... OtherSignatures>
   my_function( my_function<OtherSignatures...> && o ):
      functions( std::move(o.functions) )
   {}
   template<typename... OtherSignatures>
   my_function& operator=( my_function<OtherSignatures...> const& o )
   {
      functions = o.functions;
      return *this;
   }
   template<typename... OtherSignatures>
   my_function& operator=( my_function<OtherSignatures...> && o ) {
      functions = std::move(o.functions);
      return *this;
   }
};

struct printer {
   template<typename T>
   void operator()( T const& t ) {
      std::cout << t << "\n";
   }
};

void print(int x) {
   std::cout << "int is " << x << "\n";
}
void print(std::string s) {
   std::cout << "string is " << s << "\n";
}
void test2() {
   my_function< void(int), void(std::string) > funcs{
      [](int x){ std::cout << "int is " << x << "\n";},
      [](std::string s){ std::cout << "string is " << s << "\n";}
   };
   std::cout << "test2\n";
   funcs("hello");
   funcs(0);
   my_function< void(int), void(std::string) > funcs2{
      printer(), printer()
   };
   funcs2("hello");
   funcs2(12.7);
   // doesn't work:
   /*
   my_function< void(int), void(std::string) > funcs3{
      print,
      print
   };
   */
}
void test3() {

}
int main() {
   test1();
   test2();
   test3();
} 
```

未完成，但可以使用。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:31:21.473

我相信这是可行的，但可能你会对这个感到满意[https://gist.github.com/dabrahams/3779345](https://gist.github.com/dabrahams/3779345)

```
template<class...Fs> struct overloaded;

template<class F1, class...Fs>
struct overloaded<F1, Fs...> : F1, overloaded<Fs...>::type
{
typedef overloaded type;

overloaded(F1 head, Fs...tail)
: F1(head),
overloaded<Fs...>::type(tail...)
{}
using F1::operator();
using overloaded<Fs...>::type::operator();
};

template<class F>
struct overloaded<F> : F
{
typedef F type;
using F::operator();
};

template<class...Fs>
typename overloaded<Fs...>::type overload(Fs...x)
{ return overloaded<Fs...>(x...); }

auto f = overload(
[](int x) { return x+1; },
[](char const* y) { return y + 1; },
[](int* y) { return y; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T08:26:45.790

我认为您可以使用类似这些特征的东西...但是如果您想完全按照标准进行重载解决方案 - 您需要更多代码[http://en.cppreference.com/w/cpp/language/implicit_cast](http://en.cppreference.com/w/cpp/language/implicit_cast)

```
#include <type_traits>

template<typename T, typename D>
struct is_constructible
{
   template<typename C, typename F>
   static auto test(C*) -> decltype(C(std::declval<F>()), std::true_type());
   template<typename, typename>
   static std::false_type test(...);
   static const bool value = std::is_class<T>::value && 
      std::is_same<std::true_type, decltype(test<T, D>(0))>::value;
};

template<typename T, typename D>
struct has_conversion_operator
{
   static std::true_type test(D d);
   template<typename C, typename F>
   static auto test(C* c) -> decltype(test(*c));
   template<typename, typename>
   static std::false_type test(...);

   static const bool value = std::is_class<T>::value && 
      !is_constructible<T, D>::value && 
      std::is_same<std::true_type, decltype(test<T, D>(0))>::value;
};

template<typename T, typename D>
struct is_standard_convertible : 
   std::integral_constant<bool, !has_conversion_operator<T, D>::value && 
   !is_constructible<T, D>::value &&
   std::is_convertible<T, D>::value>
{
};

template<typename T, typename D>
struct is_user_convertible :
   std::integral_constant<bool, has_conversion_operator<T, D>::value || 
   is_constructible<T, D>::value>
{
}; 
```

并实现你想要的：首先检查签名是standard_convertible，如果不检查签名是user_convertible。

# c# - 使用 Visual Studio 2010 将 .dmp 文件调试到特定的源代码行

> ID：14972958
> 
> 赞同：1
> 
> 时间：2013-02-20T05:34:00.610
> 
> 标签：c#, asp.net, iis-7, windbg, visual-studio-debugging

我有一个来自 mvc4 web api 的转储文件，它几乎使 w3wp.exe 进程崩溃（这些位基于调试版本）。我开始 diag debug diag 以获取 .dmp 并且 .dmp 文件的崩溃报告的 .net 堆栈 .html 摘要的某些部分引用了我的一些可能怀疑的方法，包括缓存对象和 db由于系统对象处置而以某种方式崩溃的上下文（当我引用某些内容时，某些内容超出了范围......缓存或数据库上下文或两者兼而有之）。这些项目包含在 .html .dmp 报告的列表摘要中是有道理的，但它们实际上并没有告诉我代码在哪里抛出。

当我尝试在 Visual Studio 中将其加载到 Debug 并链接回源代码时，手头的 .dmp 文件出现以下错误：

> 1) w3wp.exe 的调试信息找不到或不匹配。已加载符号（已删除源信息）。是否要继续调试？

继续选择...

> 2) w3wp_MyApp_PID_ 36504 _Date__02_14_2013__Time_04_32_57PM_276 _First chance exception 0XE0434352.dmp: 0xE0434352: 0xe0434352 中的 0x000007fefdc3cacd ( KERNELBASE.dll *)**处*未处理*的*异常

我检查了调试/常规“微软符号服务器”，以推测可能关闭任何必要的符号和链接。但是，当我在最后一个错误之后继续并中断时，调用堆栈或 Debug/Windows/Paralell 堆栈中没有对我的代码的引用，但我没有看到我的任何类或对象被调用或拼写出来。所看到的只是偏移量和在某些“mov”操作中以carret 作为断点的反汇编。

我已经按照这个故障排除/调试链接到书，但仍然无法获得任何符号来解析为本地人或看到我的任何方法名称被调用。 [http://blogs.msdn.com/b/tess/archive/2009/06/16/first-look-at-debugging-net-4-0-dumps-in-visual-studio-2010.aspx](http://blogs.msdn.com/b/tess/archive/2009/06/16/first-look-at-debugging-net-4-0-dumps-in-visual-studio-2010.aspx)

问：如何将此 .dmp 链接到正在抛出的确切代码行？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T22:02:42.083

*   在windbg中加载它。
*   加载 sos（在 .NET 4`.loadby sos clr`或以前的版本中`.loadby sos mscorwks`）
*   `!Threads`

此时，您应该在相关线程中看到异常。`!DumpHeap -type Exception`如果没有，您可能需要使用或类似的东西去搜索它。

*   用于`!pe <address>`检查异常。

如果你迷路了，我很乐意提供帮助。Windbg并不容易。

# memory-management - 如何将特定处理器内核绑定到特定 RAM DIMM

> ID：14972961
> 
> 赞同：2
> 
> 时间：2013-02-20T05:34:38.510
> 
> 标签：memory-management, binding

我想将特定的处理器内核绑定到特定的 RAM DIMM。

例子：

CPU-> Intel i7 2600K（四核），其中每个内核被列为 0,1,2,3 RAM-> 2 * 2GB DDR3（没有必要）列为 0,1

我想执行一个在 CPU core 2 上运行的程序，并且只使用 RAM DIMM 0。

最接近使用的工具是 numactl，但 numactl（据我所知）控制整个节点的内存，而不是每个 DIMM。

您的帮助将不胜感激...

# c++ - 如何编译仅在头文件中的 C++ 接口

> ID：14972964
> 
> 赞同：0
> 
> 时间：2013-02-20T05:34:49.250
> 
> 标签：c++, compilation, makefile, header-files

我有一个 Event 类和一个子类 ServerEvent，但是 Event 类只是 ServerEvent 扩展/继承的接口。当我运行 make 时，没有生成 Event.o 并且我收到一个错误，指出它不存在。

编译这个接口的正确方法是什么以及在makefile中添加什么？另外，我有一个受保护的构造函数的原因是 Event 不能被实例化。我不能使用虚拟构造函数——继承的正常方法是什么？

编辑：现在包括makefile、ServerEvent.cpp和编译错误

事件.h

```
#ifndef EVENT_H
#define EVENT_H

#include <string>

#define EVENT_STOP 0
#define EVENT_START 1

class Event {
private:

protected:
    double time;
    std::string label;
    int type; // EVENT_START OR EVENT_STOP
    Event();

public:

};

#endif 
```

服务器事件.h

```
#ifndef SERVEREVENT_H
#define SERVEREVENT_H

#include "Event.h"
#include <vector>
class ServerEvent: public Event {
private:

public: 
    ServerEvent(std::vector<std::string> tokens);

};

#endif 
```

服务器事件.cpp

```
#include "Event.h"
#include "ServerEvent.h"
#include <cstdlib>
#include <sstream>

ServerEvent::ServerEvent(std::vector<std::string> tokens) {
    std::stringstream stream(tokens[0]);
    stream >> time;

} 
```

生成文件

```
OBJ = correngine.o CSVManager.o CorrelationEngineManager.o ServerEvent.o
CC = g++
CFLAGS = -c -Wall -pedantic
LFLAGS = -Wall -pedantic
EXE =   correngine 

correngine : $(OBJ) 
    $(CC) $(LFLAGS) $(OBJ) -o $(EXE)

correngine.o : correngine.cpp correngine.h CSVManager.h
    $(CC) $(CFLAGS) correngine.cpp

CSVManager.o : CSVManager.cpp CSVManager.h
    $(CC) $(CFLAGS) CSVManager.cpp

CorrelationEngineManager.o : CorrelationEngineManager.cpp CorrelationEngineManager.h Event.o
    $(CC) $(CFLAGS) CorrelationEngineManager.cpp

Event.o : Event.h
    $(CC) $(CFLAGS) Event.h

ServerEvent.o: ServerEvent.cpp ServerEvent.h Event.h
    $(CC) $(CFLAGS) ServerEvent.cpp 

clean : 
    \rm *.o $(EXE) 
```

编译错误

```
ServerEvent.o: In function `ServerEvent::ServerEvent(std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >)':
ServerEvent.cpp:(.text+0x11): undefined reference to `Event::Event()'
ServerEvent.o: In function `ServerEvent::ServerEvent(std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >)':
ServerEvent.cpp:(.text+0xe1): undefined reference to `Event::Event()'
collect2: ld returned 1 exit status
make: *** [correngine] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:44:04.250

1.  这是一个具体的基类，它有数据成员，所以它不是一个“接口”。“接口”类是指没有数据成员的类，并且所有成员函数在某种意义上都是纯虚拟的。
2.  您在 .cpp 文件中#include .h 并编译该 .cpp 文件（但我不明白您为什么要这样做，您必须在 ServerEvent .cpp 中#include“Event.h”，对吗？）
3.  通常，要使接口类可继承但不可实例化是使用纯虚拟 dtor，例如 virtual ~Event() = 0; 但是，由于我的第 0 点，这不适用于您的案例。受保护的 ctor 可能是您的案例的正确方法，但我不得不说它看起来不像一个优雅（或正确）的设计......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:41:23.653

**只有**一个`protected`或`private`构造函数的类不能被实例化。

 **当然，*如果您编写实现*，则可以编译它（**编辑：**如果您只有头文件，则没有*编译*头文件之类的东西），您只是无法获得实例，`Event`因为它在某种意义上是*抽象*的只得到`protected`或`private`构造函数。

要实例化一个实例，请编写一个派生自`Event`该实例的类，该类具有公共构造函数并且*没有任何纯虚函数*。

（到底为什么你要实例化一个*抽象*类？如果你需要实例化它，不要将它定义为*abstract*。）

构造函数不能是虚函数，因为虚函数是根据与类（包括派生类）关联的指针表调用的。调用构造函数时，*该*实例尚未构造，并且不能调用任何虚函数。**但是派生类的构造函数会隐式调用其基类的构造函数**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:39:29.073

据我所知，您不需要构造函数。你需要一个virtual析构函数，任何你需要实现的方法都需要等于0和virtual。

看这里：[如何在 C++ 中声明接口？](https://stackoverflow.com/questions/318064/how-do-you-declare-an-interface-in-c "如何在 C++ 中声明接口")**

# asp.net-mvc-3 - 具有 Oracle 数据访问的 x64 mvc3 项目

> ID：14972970
> 
> 赞同：1
> 
> 时间：2013-02-20T05:35:22.283
> 
> 标签：asp.net-mvc-3, 64-bit, odp.net

我在 mvc3 项目中使用 Oracle 数据访问（ODP.NET）。odp.net 分别有 x64 和 x86 版本，我想使用 x64 版本。

我将“平台目标”设置为 x64 并添加对 x64 版本的 odp.net 的引用，在 iis 服务器上发布没有问题，但我无法运行项目进行开发和测试，但是 Razor 视图在 c# 上显示错误陈述。

我如何在 x64 平台上开发项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:03:14.037

我想说直接的问题是强制您的平台目标为 x64。asp.net 开发服务器是 32 位的。将其保留为“任何 CPU”或运行 64 位开发服务器（本地 IIS 服务器或[将 cassinidev](http://cassinidev.codeplex.com/)编译为 64 位）。如果您确实将其保留为任何 cpu，以便您可以继续使用开箱即用的开发服务器，那么您将出于完全相同的原因在 64 位版本的 oracle.dataaccess.dll 中遇到相同的错误。

我在我的机器上安装了 32 位版本（我也安装了 64 位版本，但我提到这一点只是为了注意它们并排运行良好）。对 Oracle.DataAccess.dll 的引用不包括位，仅包括版本。因此，只要您在服务器上拥有相同版本（或具有发布者策略的更高版本）的 64 位版本，部署后一切都会正常运行。

# java - Deque 在前面插入并从后面移除

> ID：14972974
> 
> 赞同：2
> 
> 时间：2013-02-20T05:35:51.427
> 
> 标签：java, arrays, queue, deque

我正在编写 Deque 以便能够从 Front 和 Rear 添加和删除......我认为我的逻辑是错误的，但我想不通！因为当我从前面插入时，它必须从后面移除，但也从前面移除。你会检查我的代码并帮助我吗？

```
 public void insertLeft(long j)   
   {//have to make sure it is not full before inserting
   if (!isFull())
       if(left == maxSize-1)         
      left = -1;
   queArray[++left] = j;         
   nItems++;                     
   }

public long removeRight()         
{
 //make sure it is not empty first  
    if(!isEmpty())
if(right == maxSize)           
   right = 0;
nItems--;   
long temp = queArray[right++];
    // need to increment front after you remove an item
return temp;
}

public void insertRight(long i) {
       if (!isFull())
   if(right == maxSize-1)      
      right = 0;
   queArray[++right] = i;         
   nItems++;                     
   }

public long removeLeft(){  
if (!isEmpty())
        temp = queArray[++left];
       if (left == maxSize-1)
       left = -1;

       nItems--;

       return temp;
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:44:35.240

从逻辑上讲，您应该`--left`in`insertLeft()`和`right--`in `removeRight()`。这段代码中还有一些其他的小问题。以下代码工作正常。

```
public class Deque {
    private long[] queArray;
    private int maxSize;
    private int nItems;
    private int left;
    private int right;

    private boolean isEmpty() { return nItems == 0; }
    private boolean isFull() { return nItems == maxSize; }

    public Deque(int maxSize) {
        this.maxSize = maxSize;
        queArray = new long [maxSize];
        nItems = 0;
        left = 0;
        right = maxSize - 1;
    }

    public void insertLeft(long j) {
        if (isFull()) 
            throw new RuntimeException("It is full");

        if (left == 0)         
            left = maxSize;
        queArray[--left] = j;         
        nItems++;                     
    }

    public void insertRight(long i) {
        if (isFull())
            throw new RuntimeException("It is full");

        if (right == maxSize - 1)      
            right = -1;
        queArray[++right] = i;         
        nItems++;                     
    }

    public long removeLeft() {  
        if (isEmpty())
            throw new RuntimeException("It is empty");

        long temp = queArray[left];
        left++;
        if (left == maxSize - 1)
            left = -1;
        nItems--;
        return temp;
    }

    public long removeRight() {
        if (isEmpty())
            throw new RuntimeException("It is empty");

        long temp = queArray[right];
        right--;
        if (right < 0)
            right = maxSize - 1;
        nItems--;   
        return temp;
    }

} 
```

# ios - 如何设置 CALayer 委托以用于核心图形绘图？

> ID：14972975
> 
> 赞同：1
> 
> 时间：2013-02-20T05:35:56.113
> 
> 标签：ios, cocoa-touch, delegates, core-graphics, calayer

我试图了解如何使用 Core Graphics 在我的 CALayer 上绘图。到目前为止，我想我知道我应该设置一个控制器对象作为图层的委托，然后在控制器中调用我的 CG 命令。

我的问题是我真的不知道如何用我当前的代码做到这一点。

理想情况下，我需要有许多不同的图层，所有图层上都有不同的 CG 绘图，所以我可以使用 CAAnimation 为它们制作动画。截至目前，我有一些带有动画的工作层，但没有 CG 内容。我一直在尝试将所有这些层设置为同一个委托，然后使用 if 语句调用每个层并绘制它们。这甚至可能吗？或者我想有没有更简单的方法可以做到这一点？我对这些概念还是很陌生，所以任何帮助都将不胜感激。

这是我的相关代码：

在我的 TapView.h

```
@interface TapView : UIView
{
    CALayer *circleGlowLayer;

}
-(void)glowCircleTap;
@property (nonatomic) float opacity;
@end 
```

在我的 TapView.m

```
@implementation TapView

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self glowCircleTap];
}
-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

   if(self)
    {
        circleGlowLayer = [[CALayer alloc]init];
        [circleGlowLayer setBounds:CGRectMake(0.0,0.0,470.0,470.0)];
        [circleGlowLayer setPosition:self.center];

        UIColor *transparent = [UIColor colorWithRed:0.53 green:0.85 blue:0.89 alpha:1.0];
        CGColorRef cgTransparent = [transparent CGColor];
        [circleGlowLayer setBackgroundColor:cgTransparent];

        [[self layer] addSublayer:circleGlowLayer];
        [circleGlowLayer setOpacity:0.0];
    }
    return self;
}
-(void)glowCircleTap
{

    CAKeyframeAnimation *glowCircleFader = [CAKeyframeAnimation     animationWithKeyPath:@"opacity"];
    [glowCircleFader setValues:[NSArray arrayWithObjects:
                            [NSNumber numberWithFloat:1.0],
                            [NSNumber numberWithFloat:0.0], nil]];

    [glowCircleFader setDuration:0.5];
    [circleGlowLayer addAnimation:glowCircleFader forKey:@"fadeAnimation"];
}
@end 
```

到目前为止，当我点击屏幕时，此代码会绘制一个正方形，然后在半秒内将其淡出。我希望能够在这一层上绘图。

为了尝试制作委托，我制作了一个 TapViewDelegate 类，然后在我的 TapView 中的 -init 中我会`[circleGlowLayer setDelegate:TapViewDelegate];`然后这就是我有点迷失的地方。此外，如果这很接近，我是否可以将我的所有层设置为这个委托？我认为问题在于代表的想法仍然在我脑海中挥之不去。提前感谢您的帮助！

# java - 在多行文本文件上使用分隔符的问题

> ID：14972982
> 
> 赞同：0
> 
> 时间：2013-02-20T05:36:37.100
> 
> 标签：java, java.util.scanner, delimiter

假设我们有一个包含动物及其颜色的文本文件：

```
dog=brown
cat=yellow
bird=red 
```

我需要得到动物的颜色，所以我写了这个方法。我用参数中我想要颜色的动物调用该方法。

```
public String getAnimal(String animal) throws IOException{
        Scanner sc = new Scanner(TEXT_FILE).useDelimiter("=");
        for (int i = 0; i < 3; i++){
            if(sc.nextLine().startsWith(animal)){
                sc.next();
                return sc.next();
            }
            sc.nextLine();
        }
         return null;
    } 
```

它只是半有效的。例如调用`System.out.println(getAnimal("cat"));`，打印：

```
yellow
cat 
```

就像扫描仪忽略了有任何行并在分隔符之间打印任何内容的事实。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:00:52.927

如果这是您期望的输入格式，请使用 Properties 类 (docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

或者

您可以使用[Apache FileUtils.readLines](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readLines%28java.io.File%29)读取所有行。[然后使用String.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)和character拆分字符串`=`以分隔键值对。

# ember.js - ember数据模型中的json子文档

> ID：14972985
> 
> 赞同：0
> 
> 时间：2013-02-20T05:36:55.653
> 
> 标签：ember.js, ember-data

我有一个返回类似这样的 Web 服务，其中有一个固定的信封，然后是一个 json 的主体，其架构取决于“body_schema”。我希望能够使用 ember-data 来管理这些，固定信封的第一类字段和正文字段的对象。这可能吗？我似乎在文档中看不到这样的东西，但我无法想象我是第一个遇到这个问题的人。

```
{"messages":
[
  {"id":"5",
   "from": "someone",
   "to": "somebody",
   "body_schema": "atype", 
   "body": {
     {"url":"http://localhost:3030/blobs/511d63ddd0a6b5e863000001"}
   }
  }
]} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-11T10:33:25.510

使用 ember-data 1.0beta：

```
App.RawTransform = DS.Transform.extend({
  deserialize: function(serialized) {
    return serialized;
  },
  serialize: function(deserialized) {
    return deserialized;
  }
}); 
```

前任。

```
App.Foo = DS.Model.extend({
    bar: attr('raw'),
}) 
```

见[https://github.com/emberjs/data/blob/master/TRANSITION.md](https://github.com/emberjs/data/blob/master/TRANSITION.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:53:19.743

我解决了这个问题 - 您需要做的是将您自己的属性转换添加到现有的 JSONTransforms 集中。我在 app.js 中定义了一个像这样的对象转换：

```
DS.JSONTransforms.object = {
    deserialize: function(serialized) {
      return Em.isNone(serialized) ? {} : serialized;
    },
    serialize: function(deserialized) {
      return Em.isNone(deserialized) ? {} : deserialized;
    }
}; 
```

有了这个，我可以定义一个这样的消息模型：

```
App.Message = DS.Model.extend({
  timestamp: DS.attr('date'),
  body: DS.attr('object'),
  ...
}); 
```

# java - 在宽范围的整数数组中查找第一个重复元素？

> ID：14972986
> 
> 赞同：0
> 
> 时间：2013-02-20T05:37:15.527
> 
> 标签：java, c, arrays, algorithm, data-structures

这个问题与[Find the first unrepeated character in a string](https://stackoverflow.com/questions/2285533/find-the-first-un-repeated-character-in-a-string) in 其中输入是字符数组有关，我们可以采用大小为 256 的哈希。

但如果，

*   数组中的元素是范围广泛的整数，散列可能非常昂贵。

*   数组包含异构元素、整数或字符，那么哈希如何解决这个问题。

我们可以使用蛮力方法扫描每个元素的整个数组，但在最坏的情况下它需要 O(n²)。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:52:39.517

离线版本：像这样对向量进行排序：

```
vector<std::pair<int,int> > data;
for (int i=0;i<orignalVec.size();++i)
    data.push_back( make_pair(originalVec[i] , i ) ); 
```

然后扫描向量，寻找第一个值相同且位置值最小的一对。这给出了一个`O(NlogN)`

一个在线版本。使用`std::map`( `O(NlogN)`) `std::unordered_map`( `O(N)`)。

> 如果数组中的元素是范围很广的整数，散列可能会非常昂贵。

为什么？哈希旨在解决这个问题，不是吗？

> 如果数组包含异构元素、整数或字符，那么哈希如何解决这个问题。

为这些中的每一个编写不同的哈希函数。对于 , 之类的类型，`int`我认为 STL 具有内置哈希。`float``std::string`

对于元素不支持*比较操作*的异构容器，hash是我唯一能想到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-08T10:21:21.763

首先按升序或降序对数组进行排序。然后从第二个元素开始循环遍历排序数组，并将每个元素与前一个元素进行比较，看看它们是否匹配。

```
int[] numbers = {1, 5, 23, 2, 1, 6, 3, 1, 8, 12, 3};
Arrays.sort(numbers);

for (int i = 1; i < numbers.length; i++) {
    if (numbers[i - 1] == numbers[i]) {
        System.out.println("Repeated numbers are : " + numbers[i]);
    }
} 
```

# jquery - addClass 不工作

> ID：14972987
> 
> 赞同：1
> 
> 时间：2013-02-20T05:37:17.337
> 
> 标签：jquery, ajax, twitter-bootstrap, addclass

我有这个代码：

```
<div class="tableperso input-append">
<form id="perso" action="form/perso.php" method="post">
<table class="table2 table-bordered">
  <tr>
    <td>
      <input class="input-medium" type="text" placeholder="CMS" name="cmsperso" id="cmsperso" pattern="[-.,_ a-zA-ZáàâäãéèêëíìîïóòôöõúùûüýÿÁÀÂÄÃÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝ]+" />
      <input class="separ2 input-medium" type="text" placeholder="Chef de Quart" name="chefdequart" id="chefdequart" pattern="[-.,_ a-zA-ZáàâäãéèêëíìîïóòôöõúùûüýÿÁÀÂÄÃÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝ]+" />
      <input class="separ2 input-medium" type="text" placeholder="Adjoint" name="adjoint" id="adjoint" pattern="[-.,_ a-zA-ZáàâäãéèêëíìîïóòôöõúùûüýÿÁÀÂÄÃÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝ]+" />
    </td>
    <td class="button">
      <button id="persobtn" type="submit" name="persobtn" class="btn"><i class="icon-ok"></i></button>
    </td>
  </tr>
</table>
</form>
</div>

<script type="text/javascript">
 $(function () {
$('#perso').submit(function () {
  $.ajax({
    url: this.action,
    type: this.method,
    data: $(this).serialize(),
    success: function(data){
      data = $.parseJSON(data);
        if(data.status == "ok") {
          var now = new Date();
          var hours = now.getHours();
            if (now.getHours() <= 9) {
              var hours = '0'+now.getHours();
            }
            else {
              var hours = now.getHours();
            }
          var minutes = now.getMinutes();
            if (now.getMinutes() <= 9) {
              var minutes = '0'+now.getMinutes();
            }
            else {
              var minutes = now.getMinutes();
            }
          var cmsperso = $("#cmsperso").val();
          var chefdequart = $("#chefdequart").val();
          var adjoint = $("#adjoint").val();
          var emptycmsperso = $("#cmsperso").val().length == 0;
          var emptychefdequart = $("#chefdequart").val().length == 0;
          var emptyadjoint = $("#adjoint").val().length == 0;

          if (emptycmsperso && emptychefdequart && emptyadjoint) {
            $('#persobtn').addClass('btn-danger')
              .delay(1000)
              .queue(function() {
                 $(this).removeClass('btn-danger');
                 $(this).dequeue();
              });
          }
          else if (emptycmsperso && emptychefdequart) {
            $('#persobtn').addClass('btn-success')
                  .delay(1000)
                  .queue(function() {
                     $(this).removeClass('btn-success');
                     $(this).dequeue();
                  });
            var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Prise de fonction de <b class="textepersoadj">'+adjoint+'</b> en tant qu\'adjoint.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          }
          else if (emptychefdequart && emptyadjoint) {
            $('#persobtn').addClass('btn-success')
                  .delay(1000)
                  .queue(function() {
                     $(this).removeClass('btn-success');
                     $(this).dequeue();
                  });
            var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Prise de fonction de <b class="textepersocms">'+cmsperso+'</b> en tant que CMS.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          }
          else if (emptycmsperso && emptyadjoint) {
            $('#persobtn').addClass('btn-success')
                  .delay(1000)
                  .queue(function() {
                     $(this).removeClass('btn-success');
                     $(this).dequeue();
                  });
            var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Prise de fonction de <b class="textepersocdq">'+chefdequart+'</b> en tant que Chef de Quart.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          }
          else if (emptycmsperso) {
            $('#persobtn').addClass('btn-success')
                  .delay(1000)
                  .queue(function() {
                     $(this).removeClass('btn-success');
                     $(this).dequeue();
                  });
            var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Modification de l\'équipe de Quart : <b class="textepersocdq">'+chefdequart+'</b> prend la fonction de Chef de Quart et <b class="textepersoadj">'+adjoint+'</b> prend celle d\'adjoint.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          }
          else if (emptychefdequart) {
            $('#persobtn').addClass('btn-success')
                  .delay(1000)
                  .queue(function() {
                     $(this).removeClass('btn-success');
                     $(this).dequeue();
                  });
            var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Modification de l\'équipe de Quart : <b class="textepersocms">'+cmsperso+'</b> prend la fonction de CMS et <b class="textepersoadj">'+adjoint+'</b> prend celle d\'adjoint.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          }
          else if (emptyadjoint) {
            $('#persobtn').addClass('btn-success')
                  .delay(1000)
                  .queue(function() {
                     $(this).removeClass('btn-success');
                     $(this).dequeue();
                  });
            var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Modification de l\'équipe de Quart : <b class="textepersocms">'+cmsperso+'</b> prend la fonction de CMS et <b class="textepersocdq">'+chefdequart+'</b> prend celle de Chef de Quart.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          }
          else {
            $('#persobtn').addClass('btn-success')
                  .delay(1000)
                  .queue(function() {
                     $(this).removeClass('btn-success');
                     $(this).dequeue();
                  });
            var nouvelle_ligne = $('<tr><td class="thtime">'+hours+'h'+minutes+'</td><td>Modification de l\'équipe de Quart : <b class="textepersocms">'+cmsperso+'</b> prend la fonction de CMS, <b class="textepersocdq">'+chefdequart+'</b> prend celle de Chef de Quart et <b class="textepersoadj">'+adjoint+'</b> prend celle d\'adjoint.</td><td class="button"><button class="editperso"><i class="icon-pencil"></i></button></td><td class="button"><button class="trashperso"><i class="icon-trash"></i></button></td></tr>').fadeIn('fast');
          }
          $('#tablemc').append(nouvelle_ligne);
        }
        else {
          alert(data.error);
        }
    }
  });
return false;
});
$(document).on("click", ".trashperso", function(e){
  e.preventDefault();
    var $ligneParent = $(this).parent().parent();
    trashperso($ligneParent);
});

function trashperso(aLigneToTrash) {
if (confirm("Vous allez supprimer définitivement cette ligne !")) {
  var cmsperso = aLigneToTrash.children().children('.textepersocms').html();
  var chefdequart = aLigneToTrash.children().children('.textepersocdq').html();
  var adjoint = aLigneToTrash.children().children('.textepersoadj').html();

  $.ajax({
    type: "POST",
    url: "form/delete/deleteperso.php",
    data: { cmsperso: cmsperso, chefdequart: chefdequart, adjoint: adjoint },
    cache: false,
    success: function() {
      aLigneToTrash.fadeOut('slow', function() {
        aLigneToTrash.remove();
      });
    }
  });
  return false;      
 }
}

$(document).on("click", ".editperso", function(f){
  f.stopPropagation();
    var $CellParent = $(this).closest('td').prev().prev();
    editperso1($CellParent);
});

function editperso1(aCellToEdit) {
  aCellToEdit.editable({
    mode: 'inline',
    inputclass: 'input-mini'
  });
}

$(document).on("click", ".editperso", function(g){
  g.stopPropagation();
    var $CellParent = $(this).closest('td').prev().children('b');
    editperso2($CellParent);
});

function editperso2(bCellToEdit) {
  bCellToEdit.editable({
    mode: 'inline',
    inputclass: 'input-medium texteperso',
    type: 'text',
    success: function() {
      var cmsperso = $('.textepersocms').next('span').children('div').children('form').children('div').children('div').children('div').children('input.texteperso').val();
    var chefdequart = $('.textepersocdq').next('span').children('div').children('form').children('div').children('div').children('div').children('input.texteperso').val();
    var adjoint = $('.textepersoadj').next('span').children('div').children('form').children('div').children('div').children('div').children('input.texteperso').val();

    if(cmsperso === undefined) { var cmsperso = $(this).closest('td').children('.textepersocms').html(); }
    if(chefdequart === undefined) { var chefdequart = $(this).closest('td').children('.textepersocdq').html(); }
    if(adjoint === undefined) { var adjoint = $(this).closest('td').children('.textepersoadj').html(); }

    var cmsperso2 = $(this).closest('td').children('.textepersocms').html();
    var chefdequart2 = $(this).closest('td').children('.textepersocdq').html();
    var adjoint2 = $(this).closest('td').children('.textepersoadj').html();

    var pattern = /^[\-.,_ a-zA-ZáàâäãéèêëíìîïóòôöõúùûüýÿÁÀÂÄÃÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝ]+$/;
    var patterncms = pattern.test(cmsperso);
    var patterncdq = pattern.test(chefdequart);
    var patternadj = pattern.test(adjoint);

    if (patterncms == true && patterncdq == true && patternadj == true) {
      $.ajax({
        type: "POST",
        url: "form/update/updateperso.php",
        data: { cmsperso: cmsperso, cmsperso2: cmsperso2, chefdequart: chefdequart, chefdequart2: chefdequart2, adjoint: adjoint, adjoint2: adjoint2 }
      });
    }
    else {
      $('input.texteperso').parents('div.control-group').each(function() {
        $(this).addClass('error');
        console.log($(this));
      });
      return false;
    }
  }
  });
}
}); 
```

addClass 不起作用，我使用 jquery 1.9.1 和 Bootstrap 2.3.0。在此代码之前，我在 div 中使用“控制组”类创建了一个动态输入。如果没有错误，一切正常，但如果有问题，我想添加类“错误”，但 console.log 返回“ `jQuery(div.control-group)`”，没有错误类。

和“这个”返回到`<div class="control-group">`

当我尝试时`addClass`，没有任何改变。

当我尝试时`attr('class', 'error')`，我有错误。

当我尝试时`attr('class', 'control-group error')`，我只有对照组

当我尝试时`attr('class', 'control-group'+ 'error')`，我有控制组错误（没有空格）

谢谢你帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:41:13.883

使用 jquery migrate 而不是 jquery 1.9 最新版本存在正弦错误。而是我会说最新版本不稳定

jquery.com/download/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:59:47.907

你应该试试`.parents`jQuery 函数。

如何`.parents`工作。

**例子**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        console.log($("#getMe").parents('div#main'));
        console.log($("#getMe").parents('div#second'));
    });

</script>

<div id="main">
    <div id="second">
        <div id="first">
            <div>1</div>
            <div>2</div>
            <div id="getMe">3</div>
        </div>
    </div>
</div>
```

`.parents`获取使用 jQuery 选择器选择的**特定**`dom`的所有父级。`dom`

 **现在将选择器传递给`.parents`then 它将返回 pass `dom`。

在你的情况下，它必须是`$("input.texteperso").parents('div.control-group')`

也`patterncms===true && patterncdq===true && patternadj===true`改成`patterncms == true && patterncdq == true && patternadj == true`**

# android - 如何只显示小数点后两位

> ID：14972989
> 
> 赞同：1
> 
> 时间：2013-02-20T05:37:36.897
> 
> 标签：android

我得到 mGTotal 的价值，例如：179.257856

但现在我只想显示小数点后的两位数字，例如：179.25

```
 @Override
    protected void onResume() 
    {
        super.onResume();
        if (Constants.mItem_Detail.size() == 0) 
        {
            return;
        }

        Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(SingleProductActivity.KEY_TOTAL));
        for (int i = 1; i < Constants.mItem_Detail.size(); i++) 
        {   
        mGTotal = mGTotal + Double.parseDouble(Constants.mItem_Detail.get(i).get(SingleProductActivity.KEY_TOTAL));
        }
        mGrandTotal = String.valueOf(mGTotal);
        mTxtViewGrandTotal.setText(mGrandTotal);
        myTextVeiwGrandTotal.setText(mGrandTotal);
        mTotal = String.valueOf(Constants.mItem_Detail.size());
        mItems.setText(mTotal);

}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T05:39:24.483

采用[`Decimalformat`](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DecimalFormat.html)

```
DecimalFormat df = new DecimalFormat("#.##");
System.out.println(df.format("179.257856"));// which gives result as 179.25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T05:46:05.703

你非常接近你的答案，我想下面的行对你有用：

```
 mTxtViewGrandTotal.setText(new DecimalFormat("##.##").format(mGTotal)); 
```

和完整的方法应该是这样的：

```
 @Override
    protected void onResume() 
    {
        super.onResume();
        if (Constants.mItem_Detail.size() == 0) 
        {
            return;
        }

        Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(SingleProductActivity.KEY_TOTAL));
        for (int i = 1; i < Constants.mItem_Detail.size(); i++) 
        {   
        mGTotal = mGTotal + Double.parseDouble(Constants.mItem_Detail.get(i).get(SingleProductActivity.KEY_TOTAL));
        }
        mGrandTotal = String.valueOf(mGTotal);
        mTxtViewGrandTotal.setText(mGrandTotal);
        myTextVeiwGrandTotal.setText(mGrandTotal);
        mTxtViewGrandTotal.setText(new DecimalFormat("##.##").format(mGTotal));
        mTotal = String.valueOf(Constants.mItem_Detail.size());
        mItems.setText(mTotal);

} 
```

# javascript - 悬停时将状态重置为原始状态

> ID：14972990
> 
> 赞同：0
> 
> 时间：2013-02-20T05:37:42.013
> 
> 标签：javascript, jquery, html, css

我有类似的东西：

```
 $(".leftCues").hover(
        function(){
                $(".item1", ".item2", ".item3", ".item4", ".item5").stop(true,true)
                $(".item1").animate({opacity:1.0}, 2000, function()  {
                  $(".item1").animate({opacity:0.0},2000, function() {
                    $(".item2").animate({opacity:1.0},2000, function()  {
                      $(".item2").animate({opacity:0.0}, 2000, function() {
                        $(".item3").animate({opacity:1.0}, 2000, function()  {
                          $(".item3").animate({opacity:0.0}, 2000, function() {
                            $(".item4").animate({opacity:1.0},2000, function()  {
                              $(".item4").animate({opacity:0.0}, 2000, function() {
                                $(".item5").animate({opacity:1.0}, 2000, function()  {
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
        },
        function(){
                $(".item5").css('opacity', 0.0);
        }       
  ); 
```

CSS：

```
.item5, .item3, .item1 {
  clear: both;
  float:left;
  margin-top: 6%;
  color: #999999;
  font-size: 40px;
  margin-left: 25px;
  opacity:0.0;
}

.item2, .item4 {
  clear: both;
  float:right;
  margin-top: 6%;
  color: #999999;
  font-size: 40px;
  margin-right: 25px;
  opacity:0.0;
} 
```

当我悬停时，我的动画效果很好，但是当我悬停时，我之前的状态没有被重置。现在，当再次悬停时，新动画开始，而前一个动画仍在运行。

如何重置我之前的悬停状态？悬停时，我想回到原始状态（就像我第一次悬停之前一样）

在我的动画中，我只是将不透明度从 1.0 切换到 0.0，我的 css 以不透明度 0.0 开始。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:42:03.783

您可以使用`.fadeIn()`，或者`fadeOut()`如果没有其他动画。

像这样的东西

```
$('#item').hover( function() {
      $('#item2, #item3, #item4, #item5').stop(true, true).fadeIn();
  },
  function () {
    $('#item2, #item3, #item4, #item5').stop(true, true).fadeOut();
  }
); 
```

这`.stop(true, true)`很重要，因为它使它在动画结束时跳转。[这是文档](http://api.jquery.com/stop/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:43:58.410

您可以使用 jQuery`.mouseover()`和`.mouseout()`函数。

[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

[http://api.jquery.com/mouseout/](http://api.jquery.com/mouseout/)

```
$(".leftCues").mouseover(function(){
                $(".item1").animate({opacity:1.0}, 2000, function()  {
                  $(".item1").animate({opacity:0.0},2000, function() {
                    $(".item2").animate({opacity:1.0},2000, function()  {
                      $(".item2").animate({opacity:0.0}, 2000, function() {
                        $(".item3").animate({opacity:1.0}, 2000, function()  {
                          $(".item3").animate({opacity:0.0}, 2000, function() {
                            $(".item4").animate({opacity:1.0},2000, function()  {
                              $(".item4").animate({opacity:0.0}, 2000, function() {
                                $(".item5").animate({opacity:1.0}, 2000, function()  {
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
}).mouseout(function(){
    $(".item5").css('opacity', 0.0);
}); 
```

# android - 在 FragmentActivity 中带有 setAnimationListener() 的 NullPointerException

> ID：14972997
> 
> 赞同：0
> 
> 时间：2013-02-20T05:38:06.417
> 
> 标签：android, android-actionbar, actionbarsherlock, android-animation, android-fragmentactivity

我正在尝试让取景器翻转。似乎在常规活动中工作，但是当我将所有内容更改为片段时，我不断获得 NPE。

这是我的代码：

```
Animation in, out;
ViewFlipper customActionBarFlipper;

MyFragmentActivity mfa = MyFragmentActivity.this;
Context ctx = mfa; //Originally I was using this context in the loadAnimation.

in = AnimationUtils.loadAnimation(getBaseContext(), R.anim.push_left_in_80);
out = AnimationUtils.loadAnimation(getBaseContext(), R.anim.push_left_out_80);

in.setAnimationListener(mfa);
out.setAnimationListener(mfa);

customActionBarFlipper.setInAnimation(in);
customActionBarFlipper.setOutAnimation(out); 
```

我有一种很好的感觉，我只是忘记了显而易见的事情，但睡眠不足是致命的。如果有人能如此友善并把我推向正确的方向，那将不胜感激。

如果您想查看更多代码，我很乐意提供。我认为这应该足够了。具有脚蹼的布局也膨胀了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:57:54.597

你`customActionBarFlipper`没有在任何地方初始化。您只需创建它，然后尝试在不初始化的情况下使用它。这使其为空，并导致`NullPointerException`.

您的脚蹼可能在充气布局中可用，但您仍必须获得对它的引用。

# r - 在 do.call 中使用 rbind 时如何避免重命名行？

> ID：14972998
> 
> 赞同：11
> 
> 时间：2013-02-20T05:38:13.967
> 
> 标签：r, rbind, do.call

我正在尝试绑定列表中元素的一些子元素

名单`OC`如下

```
> library(quantmod)
> OC <- getOptionChain('AAPL', NULL)

> str(OC)
List of 9
 $ Feb 2013:List of 3
  ..$ calls :'data.frame':  35 obs. of  7 variables:
  .. ..$ Strike: num [1:35] 380 390 400 410 420 430 440 445 450 455 ...
  .. ..$ Last  : num [1:35] 89.9 86 60 49.5 39.8 ...
  .. ..$ Chg   : num [1:35] 0 0 -0.4 -4.4 -0.7 -1.9 -0.55 -0.7 -0.95 -1 ...
  .. ..$ Bid   : num [1:35] 79.5 69.8 59.8 49.8 39.6 ...
  .. ..$ Ask   : num [1:35] 80.2 70.2 60.2 50.2 40.2 ...
  .. ..$ Vol   : num [1:35] 1 1 48 11 61 ...
  .. ..$ OI    : num [1:35] 2 2 55 29 41 ...
  ..$ puts  :'data.frame':  40 obs. of  7 variables:
  .. ..$ Strike: num [1:40] 380 385 390 395 400 405 410 415 420 425 ...
  .. ..$ Last  : num [1:40] 0.01 0.05 0.07 0.08 0.03 0.04 0.02 0.04 0.06 0.06 ...
  .. ..$ Chg   : num [1:40] -0.03 0 0 0 -0.08 -0.06 -0.1 -0.08 -0.11 -0.17 ...
  .. ..$ Bid   : num [1:40] NA 0.01 NA NA 0.02 0.01 0.01 0.04 0.05 0.06 ...
  .. ..$ Ask   : num [1:40] 0.01 0.02 0.03 0.03 0.03 0.04 0.06 0.06 0.07 0.09 ...
  .. ..$ Vol   : num [1:40] 15 122 1 117 186 ...
  .. ..$ OI    : num [1:40] 120 99 638 95 1319 ...
  ..$ symbol: chr "AAPL"
 $ Mar 2013:List of 3
  ..$ calls :'data.frame':  221 obs. of  7 variables:
  .. ..$ Strike: num [1:221] 255 265 
##.............truncated manually for post........... 
```

我正在`puts`对 OC 的每个列表元素中的所有数据框进行基本的 rbind，

```
> allputs <- do.call('rbind', lapply(OC, FUN = function(x) x$puts))
> head(allputs)
                             Strike Last   Chg  Bid  Ask Vol   OI
Feb 2013.AAPL130222P00380000    380 0.01 -0.03   NA 0.01  15  120
Feb 2013.AAPL130222P00385000    385 0.05  0.00 0.01 0.02 122   99
Feb 2013.AAPL130222P00390000    390 0.07  0.00   NA 0.03   1  638
Feb 2013.AAPL130222P00395000    395 0.08  0.00   NA 0.03 117   95
Feb 2013.AAPL130222P00400000    400 0.03 -0.08 0.02 0.03 186 1319
Feb 2013.AAPL130222P00405000    405 0.04 -0.06 0.01 0.04   1   76 
```

**但是，每个行名都会附加其父元素的名称。有没有办法避免这种情况？**

我尝试设置`deparse.level = 0`为`rbind`，但结果不是我想要的..

```
> allputs <- do.call('rbind', list(lapply(OC, FUN = function(x) x$puts), deparse.level=0))
> head(allputs)
     Feb 2013 Mar 2013 Apr 2013 May 2013 Jun 2013 Jul 2013 Oct 2013 Jan 2014 Jan 2015
[1,] List,7   List,7   List,7   List,7   List,7   List,7   List,7   List,7   List,7  

> str(allputs[1])
List of 1
 $ :'data.frame':   40 obs. of  7 variables:
  ..$ Strike: num [1:40] 380 385 390 395 400 405 410 415 420 425 ...
  ..$ Last  : num [1:40] 0.01 0.05 0.07 0.08 0.03 0.04 0.02 0.04 0.06 0.06 ...
  ..$ Chg   : num [1:40] -0.03 0 0 0 -0.08 -0.06 -0.1 -0.08 -0.11 -0.17 ...
  ..$ Bid   : num [1:40] NA 0.01 NA NA 0.02 0.01 0.01 0.04 0.05 0.06 ...
  ..$ Ask   : num [1:40] 0.01 0.02 0.03 0.03 0.03 0.04 0.06 0.06 0.07 0.09 ...
  ..$ Vol   : num [1:40] 15 122 1 117 186 ...
  ..$ OI    : num [1:40] 120 99 638 95 1319 ...
> str(allputs[2])
List of 1
 $ :'data.frame':   207 obs. of  7 variables:
  ..$ Strike: num [1:207] 255 260 265 270 275 280 285 290 295 300 ...
  ..$ Last  : num [1:207] 0.08 0.03 0.06 0.01 0.03 0.1 0.02 0.02 0.05 0.02 ...
  ..$ Chg   : num [1:207] 0 0.02 0 0 0 0 0 0 0 0 ...
  ..$ Bid   : num [1:207] NA NA NA NA NA NA NA NA NA NA ...
  ..$ Ask   : num [1:207] 0.02 0.01 0.02 0.02 0.02 0.02 0.02 0.03 0.03 0.03 ...
  ..$ Vol   : num [1:207] 5 30 5 10 3 6 1 10 5 2 ...
  ..$ OI    : num [1:207] 33 668 541 512 455 ... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T05:43:57.567

`do.call(rbind,...)`您可以通过使用来避免`data.table::rbindlist`。

这将返回一个`data.table`. `data.tables`没有行名。

它也快得令人眼花缭乱！

```
library(data.table)
allputs <- rbindlist(lapply(OC, FUN = function(x) x$puts))
# my eyes, I'm blinded! 
```

如果要将原始行名包含为列，则

```
lputs <- lapply(OC, FUN = function(x) x$puts)

 allputs <- rbindlist(lputs)
 # add the column with rownames
 allputs[,rn := unlist(lapply(lputs, rownames))] 
```

如果您不想移动到 data.tables，那么您可以将父名称设置为`NULL`

```
 names(lputs) <- NULL

 do.call('rbind', lputs) 
```

# ember.js - 使用 Ember 数据，但未渲染模型上的属性

> ID：14972999
> 
> 赞同：1
> 
> 时间：2013-02-20T05:38:18.877
> 
> 标签：ember.js, ember-data

我刚刚开始使用 Ember 和 Ember Data。我有一个非常简单的服务，它正在访问我的后端服务（用 Node 编写）。我的服务返回两个项目。在我的 HTML 中，我的两个项目显示，或者至少它们的 ID 显示。其他属性没有被渲染。

结果：

```
* Hello, 1 !
* Hello, 2 ! 
```

应用程序.js

```
var App = Ember.Application.create();

App.Store = DS.Store.extend({
    revision: 11
});

App.Grunt = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string')
});

App.Router.map(function() {
    this.route("grunts", { path: "/grunts" });
});

App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('grunts');
    }
});

App.GruntsRoute = Ember.Route.extend({
    model: function() {
        return App.Grunt.find();
    }
}); 
```

索引.html

```
<script type="text/x-handlebars" data-template-name="application">
    <div>
        <p>{{outlet}}</p>
    </div>
</script>

<script type="text/x-handlebars" data-template-name="grunts">
    <ul>
        {{#each controller}}
            <li>Hello, {{id}} {{firstName}} {{lastName}}!</li>
        {{/each}}
    </ul>
</script> 
```

JSON：

```
{
    "grunts": [
        {
            "id": 1,
            "firstName": "Joe",
            "lastName": "Bloggs"
        },
        {
            "id": 2,
            "firstName": "Someone",
            "lastName": "Else"
        }
    ]
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:01:08.467

默认`RESTAdapter`映射是下划线 -> 驼峰形式。这意味着如果您的模型的属性是`firstName`，服务器应该发送包含`first_name`.

要解决此问题，您可以发送如下所示的 JSON：

```
"grunts": [
  {
    "id": 1,
    "first_name": "Joe",
    "last_name": "Bloggs"
  }] 
```

或者覆盖`keyForAttributeName`你的函数`RESTSerializer`。对于一对一映射，您可以执行以下操作：

```
keyForAttributeName: function(type, name) {
  return name;
} 
```

或者像这样映射单个模型：

```
adapter.map('App.Grunt', { 
  firstName: { keyName: 'firstName'},
  lastName: { keyName: 'lastName'}
}); 
```