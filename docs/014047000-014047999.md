# StackOverflow 问答 14047000-14047999

# jquery - 切换下拉菜单

> ID：14047006
> 
> 赞同：0
> 
> 时间：2012-12-26T22:26:46.983
> 
> 标签：jquery

我正在尝试创建一个带有下拉列表的菜单，使用 jQuery 到 onclick 切换以将类从“隐藏”更改为“显示”。虽然我想不通。

这是我所拥有的：

```
<style type="text/css">
    nav ul li.hide ul {
        display: none;
    }
    nav ul li.show ul {
        display: block;
    }
</style>

<nav>
  <ul>
      <li class="hide">Home
        <ul>
          <li>Dropdown Link</li>
        </ul>
      </li>
 </ul>
</nav>

<script type="text/javascript">
  $(document).ready(function(){
      $('li').toggleClass('hide', 'show');
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:35:23.523

我变了：

```
<script type="text/javascript">
  $(document).ready(function(){
      $('li').toggleClass('hide', 'show');
  });
</script> 
```

对此：

```
<script type="text/javascript">
  $(document).ready(function(){
      $("li").click(function () {
      $(this).toggleClass("hide show");
   });
  });
</script> 
```

# javascript - HTML表单调用javascript函数

> ID：14047013
> 
> 赞同：4
> 
> 时间：2012-12-26T22:27:17.060
> 
> 标签：javascript, jquery, html

这将是一个愚蠢的问题，只是想弄清楚与 HTML 表单交互的 Javascript 函数，却无法让它工作。

非常简单，把它放在[小提琴里](http://jsfiddle.net/ZAHZ2/30/)

```
$('#test').submit(function(){
    var battery = $('#battery').value();
    $('#output').text(battery);
});

<form id="test" action="">
    <fieldset>
        <label for="battery">Cell Count</label><br />
        <input type="number" size="3" name="battery" id="battery" /><br />
        <input type="submit" name="submit" id="submit" onclick="submit()" />
    </fieldset>
</form>

<div id="output">

</div>​​​​ 
```

总是返回错误，我不知道为什么。玩过和其他的东西，不能让它工作总是错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:29:37.527

错误可能`.value()`不是函数。你想要`.val()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:29:51.377

`input`jQuery 返回元素值的函数是`val()`，而不是`value()`。您的代码应该是：

```
$('#test').submit(function(){
    var battery = $('#battery').val();
    $('#output').text(battery);
});

<form id="test" action="">
    <fieldset>
        <label for="battery">Cell Count</label><br />
        <input type="number" size="3" name="battery" id="battery" /><br />
        <input type="submit" name="submit" id="submit" onclick="submit()" />
    </fieldset>
</form>

<div id="output">

</div>​​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T22:33:54.917

如果您使用适当的开发人员工具（例如 Firefox 中的 Firebug），那么您可以很容易地找出问题所在，因为在控制台中它会向您显示如下内容：

```
Uncaught TypeError: Object [object Object] has no method 'value' 
```

这意味着没有`value`方法，`val()`而是应该使用的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T19:06:31.010

正确的函数是 val() no value() 在 jquery 中。

通过使用方法 .submit keep in the **"return false"**来不运行你没有考虑过的**"form"的****"action" 。**

 **```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    $(document).on('ready', function() {
        $('#test').submit(function(){
            var battery = $('#battery').val();
            $('#output').text(battery);
            return false;
        });        
    })

</script> 
```

如果您使用的是 jQuery，则不需要输入对象中的 onclick="submit()" 参数

```
<form id="test" action="#">
    <fieldset>
        <label for="battery">Cell Count</label><br />
        <input type="number" size="3" name="battery" id="battery" /><br />
        <input type="submit" name="submit" id="submit"/>
    </fieldset>
</form>
<div id="output"></div>​​​​ 
```

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T22:29:44.510

要使用 jQuery 从输入中检索值，您需要使用[.val()](http://api.jquery.com/val/)

**改变：**

```
var battery = $('#battery').value(); 
```

**至：**

```
var battery = $('#battery').val(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T22:36:20.937

我不确定这是否正确，但我认为您的 javascript 代码看起来像 php，并且`action=""`引号中的字段中没有任何内容。另外，我认为这个值应该是 val。**

# c# - 查找锯齿状数组的唯一行

> ID：14047014
> 
> 赞同：4
> 
> 时间：2012-12-26T22:27:32.910
> 
> 标签：c#, jagged-arrays

我有一个锯齿状的字符串数组，我需要找到所有唯一的行。例如，

```
[ 
 ["A","B"] , 
 ["C","D","E"], 
 ["B", "A"],
 ["E","A"] 
] 
```

这应该返回第 1 行和第 3 行，因为第 0 行和第 2 行是重复的。如何才能做到这一点？我可以使用 hashets 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:05:34.313

首先，作为数组，第0行和第2行不重复。它们只是具有相同的元素集。但是，如果您只想删除这些行，您可以执行以下操作：

```
string[][] GetNonDuplicates(string[][] jagged)
{
  //not a hashset, but a dictionary. A value of false means that the row 
  //is not duplicate, a value of true means that at least one dulicate was found
  Dictionary<string[], bool> dict = 
          new Dictionary<string[], bool>(new RowEqualityComparer());

  foreach(string[] row in jagged)
  {
    //if a duplicate is found - using the hash and the compare method
    if (dict.ContainsKey(row)) 
    {
       dict[row] = true;  //set value to true
    }
    else
    {
      dict.Add(row, false);  //first time we see this row, add it
    }
  }

  //just pop out all the keys which have a value of false
  string[][] result = dict.Where(item => !item.Value)
                          .Select(item => item.Key)
                          .ToArray();
  return result;
}

...
string[][] jagged = new []{new []{"A","B"} , 
                           new []{"C","D","E"}, 
                           new []{"B", "A"},
                           new []{"E","A"}};

string[][] nonDuplicates = GetNonDuplicates(jagged); 
```

哪里`RowEqualityComparer`是：

```
class RowEqualityComparer : IEqualityComparer<string[]>
{
    public bool Equals(string[] first, string[] second)
    {
        // different legths - different rows
        if (first.Length != second.Length)
          return false;

        //we need to copy the arrays because Array.Sort 
        //will change the original rows
        var flist = first.ToList();
        flist.Sort();
        var slist = second.ToList();
        slist.Sort();

        //loop and compare one by one
        for (int i=0; i < flist.Count; i++)
        {
            if (flist[i]!=slist[i])
              return false;
        }
        return true;
    }

    public int GetHashCode(string[] row)
    {
       //I have no idea what I'm doing, just some generic hash code calculation
       if (row.Length == 0)
         return 0;
       int hash = row[0].GetHashCode();
       for (int i = 1; i < row.Length; i++)
         hash ^= row[i].GetHashCode();
       return hash;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T23:18:16.527

假设您想忽略顺序，重复项（因为您已经提到 a `HashSet`）并且结果应该只包含没有重复项的数组。

您可以实现自定义`IEqualityComparer<String[]>`并`Enumerable.GroupBy`仅选择唯一的数组（group-count==1）：

```
class IgnoreOrderComparer : IEqualityComparer<string[]>
{
    public bool Equals(string[] x, string[] y)
    {
        if (x == null || y == null) return false;
        return !x.Distinct().Except(y.Distinct()).Any();
    }

    public int GetHashCode(string[] arr)
    {
        if (arr == null) return int.MinValue;
        int hash = 19;
        foreach (string s in arr.Distinct())
        {
            hash = hash + s.GetHashCode();
        }
        return hash;
    }
} 
```

其余的很简单：

```
String[][] uniques = arrays.GroupBy(arr => arr, new IgnoreOrderComparer())
                           .Where(g => g.Count() == 1)
                           .Select(g => g.First())
                           .ToArray(); 
```

**编辑**：这是使用相同比较器的可能更有效的版本：

```
IEqualityComparer<string[]> comparer = new IgnoreOrderComparer();
String[][] uniques = arrays.Where(a1 =>
    !arrays.Any(a2 => a1 != a2 && comparer.Equals(a1, a2)))
                           .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T22:33:13.183

就算法解决方案而言，我会

1.  对你的行进行排序（你可以使用任何你喜欢的排序指标，只要它能区分任何 2 个不同的行。）
2.  选择没有相同相邻行的行。

如果这样做，您应该能够在**O(m*n*lg(n))**中完成您的要求， 其中**m**是行的长度，**n**是行数

鉴于一组值意味着相等，您可以对每行的单元格进行排序以帮助您对行列表进行排序。这将导致**O(n*m*lg(m) + m*n*lg(n))**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T23:14:27.303

我将按如下方式计算每一行的哈希：

```
[ 
 ["A","B"] , // hash of this row :10 as example 
 ["C","D","E"], // hash of this row  : 20
 ["B", "A"], // hash of this row would be 10 as well
 ["E","A"] 
] 
```

由于它们都是字符串，因此您可以计算散列值并为每行创建一个散列。

您可以使用 HashSet 的方式如下，每行创建 hashset，然后找到一行与其他行的差异，如果差异为空，则它们是相同的。

您也可以使用交集，如果交集不为空，则该行不是唯一的。

# java - Solr - Java 内存不足

> ID：14047016
> 
> 赞同：2
> 
> 时间：2012-12-26T22:27:49.020
> 
> 标签：java, solr, lucene

我有一个创建一个相当大的 Solr 3.6 索引的应用程序，大约。300GB 1B 文档，每天分为 10 个核心。索引效果很好，我使用循环算法在核心之间均匀分布文档。搜索对我来说也很有效，直到返回结果集大于 100K+ 文档。

那时，我返回一个 java 错误：OutOfMemoryError 或 SolrException：解析错误

我的搜索很简单，不使用通配符或排序或分面搜索，但它似乎在返回之前缓冲了整个结果集。我服务器上的物理内存是 256G，我运行的是 Solaris 10。我使用的是 32 位的默认 java，但也尝试了 32 位和 64 位的 java 7。

当我使用 64 位 java 时，我可以使用 –Xmx 选项将最大内存增加到足以返回 1M+ 文档，但它实际上只需要一个 Solr 进程所需的所有内存。

除了用数百个小索引重新设计我的应用程序之外，是否有人对如何在没有大量 RAM 的情况下从 Solr 获取大型搜索结果集有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:52:54.213

您可以尝试禁用各种[缓存](http://wiki.apache.org/solr/SolrCaching)（例如`filterCache`、`queryResultCache`和`documentCache`）。这可能会损害性能，但可能会给一些喘息空间。

如果您的 Solr HTTP/XML 响应很大，您可以考虑[将 Solr 放在同一个 JVM 下，](https://wiki.apache.org/solr/Solrj)甚至使用原始 Lucene 来节省 XML 开销。

除此之外，恐怕您需要研究分片。

# ajax - 将 AJAX 变量传递给 rails 控制器

> ID：14047018
> 
> 赞同：1
> 
> 时间：2012-12-26T22:28:08.257
> 
> 标签：ajax, ruby-on-rails-3

我在 javascript 回调函数中使用 gmaps4rails 来确定用户的位置，然后在地图上绘制该位置。然后我想在控制器中访问这个位置信息并使用 ruby​​ 地理编码器来查询附近的事件。根据萤火虫控制台，我可以看到纬度，经度坐标正在发布，但是当我尝试在控制器中访问这些参数时它不起作用 - 也就是说我没有收到任何错误，但没有显示任何事件地图（但是，如果我将用户地址直接输入到控制器代码中，则会显示附近的事件）。请参阅下面的代码。任何帮助/建议将不胜感激。

**events/index.html.erb 中的回调**

```
 <% content_for :scripts do %>
    <script type="text/javascript">
    var lat;
    var lng;

Gmaps.map.geolocationSuccess = function(){
      if(Gmaps.map.callback){
        lng = Gmaps.map.userLocation.lng();
        lat = Gmaps.map.userLocation.lat();
        Gmaps.map.addMarkers([{
            "lng": lng,
            "lat": lat,
            "picture": "http://gmaps-samples.googlecode.com/svn/trunk/markers/pink/blank.png",
            "width": "37",
            "height": "34"
        }]);

    $.ajax({
            type: 'POST',
            url: 'events/index',
            dataType: 'json',
            data: "latitude=" + lat + "&longitude=" + lng,          
          });
      }
    };     

    </script>
    <% end %> 
```

**事件控制器**

```
 def index
    @events = Event.near(params[:latitude], params[:longitude],2)
    @json = @events.to_gmaps4rails

    respond_to do |format|
      format.html # index.html.erb
      format.js {render json: @events, content_type: 'text/json' }
   end
 end 
```

# sql - 创建没有索引的表的副本

> ID：14047021
> 
> 赞同：1
> 
> 时间：2012-12-26T22:28:14.780
> 
> 标签：sql, sql-server, sql-server-2008, tsql

1.  我从一个`myview`基于另一个视图的视图和一个`mytable`没有索引的表中选择，查询运行了**40 分钟**
2.  我添加了 5 个索引`mytable`并重新运行`myview`，查询运行了**3 分钟**
3.  我制作了这样的 mytable 副本：

    **select * into mytableNEW from mytable**

4.  请注意，没有复制任何索引。
5.  我重新运行`myview`（不要忘记指向新表），它花了**3 分钟！**

**问题：**为什么我的查询最初在没有索引的情况下需要 40 分钟，但是在表上创建索引然后将数据（**没有索引**）复制到另一个表后，查询速度非常显着？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:38:18.177

我的猜测（对于评论来说太长了）是视图的次优查询计划。

视图的查询计划基于视图首次运行的时间，而不是当前运行。随着时间的推移，表发生了变化，环境发生了变化，但视图继续使用原来的查询计划。我怀疑它正在执行嵌套循环连接，并且执行引擎足够聪明，可以动态查找和使用索引，即使没有重新编译查询。

当您将视图重新指向新表时，会针对当前环境重新编译视图，因此执行计划是最佳的。

这是一个猜测。由于缓存未命中造成的 40 分钟差异似乎非常大，除非数据非常非常大。

# java - 使用 Ivy/ant 从命令行将符号名称解析为版本号？

> ID：14047024
> 
> 赞同：0
> 
> 时间：2012-12-26T22:28:27.753
> 
> 标签：java, ant, ivy

我想知道是否有人知道解决常春藤从命令行获取特定包的版本的方法？

我正在寻找类似的东西，说

```
$ ant resolve com.internal.shared.pkg latest.release 
```

然后会返回，比如说，“1.1.18”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:32:37.540

是的和不...

这是可能的，但它会占用您大量的肘部油脂。你必须`<target>`在你的`build.xml`文件中为它写一个 Ant。

目标将**以内联**模式使用[`<ivy:resolve>`](http://ant.apache.org/ivy/history/latest-milestone/use/resolve.html)任务。这意味着你给它*组织*、*模块*和*修订*，Ivy 会尝试下载它。

 *****从那里，您有几个选择。我看了看，[`<ivy:report>`](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)因为它似乎是生成报告的最简单方法。但是，通过 下载它[`<ivy:retrieve>`](http://ant.apache.org/ivy/history/latest-milestone/use/retrieve.html)并查看您下载的内容可能会更容易。

这是我的`<ivy:resolve>`样子：

```
<ivy:resolve
    inline="true"
    organisation="${my.org}"
    module="${my.module}"
    revision="${my.rev}"
    conf="master"
    resolveId="test.me"/> 
```

然后，您可以通过以下方式调用它：

```
$ ant -Dmy.org=commmons-logging \
    -Dmy.module="commons-logging" \
    -Drev="latest.release" resolve.me 
```

仍然有兴趣这样做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:16:36.877

有一个 ivy 任务可用，它可以根据已解析的工件属性创建属性：

```
<project name="demo" default="resolve" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:artifactproperty name="[artifact].version" value="[revision]">
            <dependency org="commons-logging" name="commons-logging" rev="latest.integration"/>
        </ivy:artifactproperty>

        <echo message="Commons logging latest  = ${commons-logging.version}"/>
    </target>

</project> 
```

没有方便的方法可以从命令行执行此操作。希望这可以帮助。

笔记：

*   ivy 2.3 版支持在[解析后任务](http://ant.apache.org/ivy/history/latest-milestone/use/postresolvetask.html)中嵌套依赖标签。*****

# c# - 为什么使用 ASP.NET 验证器进行验证？

> ID：14047029
> 
> 赞同：2
> 
> 时间：2012-12-26T22:29:02.080
> 
> 标签：c#, asp.net, validation, textbox

我正在制作我的第一个真正的 ASP 页面，我需要在 14 个不同的文本框字段中验证一天中的某个时间（两者都存在一个值，并且该值最终介于 0:00:00-23:59:59 ）。我在想写一个验证函数然后在某个时候显式调用它会容易得多（即当用户点击“提交”时，或者在 TextChanged 事件处理程序中）而不是添加 14 个自定义验证器或 14 个范围（或 RegEx）验证器和 14 个必填字段验证器。

我认为验证器必须存在是有原因的，但是在这种情况下使用它们来验证看起来比不使用它们做的工作要多得多，而且我看不出有任何优势来证明它的合理性。

ASP.NET 验证器有我没有看到的优势吗？在 ASP 标记中制作 14 个相同验证器的副本似乎不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:11:49.903

经过一番思考，我对这种情况最好的想法是 a`WebUserControl`将有 a`TextBox`和 a `CustomFieldValidator`or `RequiredFieldValidator`。然后只需将其拖放`WebUserControl`到您的页面中即可。这是一个使用`RequiredFieldValidator`.

**ASCX 文件 (WebControl)：**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="SelfValidationTextBox.ascx.cs" Inherits="SelfValidationTextBox" %>
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="TextBox1" ErrorMessage="* Required Field"></asp:RequiredFieldValidator> 
```

**ASPX 文件：**

```
<%@ Register Src="SelfValidationTextBox.ascx" TagName="SelfValidationTextBox" TagPrefix="uc1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <uc1:SelfValidationTextBox ID="SelfValidationTextBox1" runat="server" />
    <br />
    <uc1:SelfValidationTextBox ID="SelfValidationTextBox2" runat="server" />
    <br />
    <uc1:SelfValidationTextBox ID="SelfValidationTextBox3" runat="server" />
    <br />
    <uc1:SelfValidationTextBox ID="SelfValidationTextBox4" runat="server" />
    <br />
    <uc1:SelfValidationTextBox ID="SelfValidationTextBox5" runat="server" />
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" Text="Click Me" />
    </form>
</body>
</html> 
```

我认为这将是一个很好的解决方法，您甚至可以按照您的建议使用 CustomFieldValidators 和使用此解决方案的一个函数。

![在 WebUserControl 中使用 RequiredFieldValidators 的结果](../Images/b518a0d5f549d12bf75581dda34277cc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:32:20.927

如果可能，请使用 ASP.NET 验证器。

其他人很容易看到你在做什么：

*   应用规则
*   本土化
*   客户方面的冒犯

如果我需要处理相同的东西 14 次，我也会担心重复的代码。但即使您为文本框编写代码也是如此。我会以动态方式将控件（文本框和验证器）从代码隐藏放置在页面上。这不是 ASP.NET 中最简单的部分，但从长远来看它会对您有所帮助。

在这里看看你是怎么做的。 [http://geekswithblogs.net/shahed/archive/2008/06/26/123391.aspx](http://geekswithblogs.net/shahed/archive/2008/06/26/123391.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:50:39.153

恕我直言，我主要将 ASP.Net 验证器视为“服务器端”验证——正如你所说——“提交后”/回发。

在您的特定情况下，如果您需要 14 个框（必需 + 范围）的相同例程，则使用 ASP.Net 验证器进行**客户端**验证的优势可以被其他客户端选项（例如 jQuery 验证）“替换”，以便您可以（重新）获得它并仍然保持服务器端验证（并完成 14 次使用的单服务器端例程 - 也称为“自定义验证”）。

客户端验证的“优势”（无论是通过 ASP.Net 验证器还是其他框架）是在用户提供条目时对其进行验证（无回发/提交），并且在提交本身时也是如此 - 没有服务器工作/回发，直到客户端验证完成（您将工作移交给客户端，而不是全部在服务器上，并且不必连接 14 个验证器执行相同的例程）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T00:33:35.607

我将使用Repeater 控件并将其绑定到将保存每个项目的数据的对象列表。您可以在后面的代码中轻松快速地完成这一切，验证将在客户端和服务器端都有效，换句话说，如果用户关闭 javascript，它将有效。

定义一个数据类，例如：

```
 public class InputDataItem
  {
    public string Text { get; set; }

    public InputDataItem()
    {
    }

    public InputDataItem(string text)
    {
      this.Text = text;
    }
  } 
```

和标记：

```
<asp:Repeater ID="rptInputs" runat="server">
  <ItemTemplate>
    <asp:TextBox ID="tbxInput" runat="server" Text='<%# Eval("Text") %>'></asp:TextBox>
    <asp:RequiredFieldValidator ID="rqfValidator" runat="server" ControlToValidate="tbxInput" ErrorMessage="* Required!"></asp:RequiredFieldValidator>
  </ItemTemplate>
</asp:Repeater>
<br />
<asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="btnSubmit_Click" /> 
```

并绑定转发器并获取用户使用此代码输入的值

```
protected void Page_Init(object sender, EventArgs e)
{
  if (!IsPostBack)
  {
    var data = new List<InputDataItem>();
    for (int i = 0; i < 5; i++)
    {
      data.Add(new InputDataItem("Item " + i.ToString()));
    }
    rptInputs.DataSource = data;
    rptInputs.DataBind();
  }
}

protected void btnSubmit_Click(object sender, EventArgs e)
{
  if (IsValid)
  {
    var data = new List<InputDataItem>();
    foreach (RepeaterItem rit in rptInputs.Items)
    {
      Control cnt = rit.FindControl("tbxInput");
      if (cnt != null && cnt is TextBox)
        data.Add(new InputDataItem((cnt as TextBox).Text));
    }
    /// here you have list of POCO objects filled with user input
  }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T22:31:42.997

为什么要做已经完成的事情？Asp.net 验证器提供客户端和服务器端验证。干燥 - 不要重复自己。只需使用 ASP.net 验证器

# cocos2d-iphone - 将精灵添加到 Cocos2d CCSpriteBatchNode 似乎忽略了位置

> ID：14047036
> 
> 赞同：0
> 
> 时间：2012-12-26T22:29:49.150
> 
> 标签：cocos2d-iphone, ccspritebatchnode

作为测试，我向批处理节点添加了一些精灵。它们都在 0,0 处绘制，它似乎忽略了精灵的位置，我认为它现在是相对于批处理节点的。我错过了什么？

```
CCLayer* splash = [[CCLayerColor alloc]initWithColor:ccc4(255,255,255,255)];
[self addChild:splash];

CCSpriteFrame* cf = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"circle.png"];

CCSpriteBatchNode* batch = [CCSpriteBatchNode batchNodeWithTexture:cf.texture];

CCSprite* test = [CCSprite  spriteWithSpriteFrameName:@"circle.png"];
test.position = CGPointMake(20,20);
test.color = ccc3(255,255,0);
[batch appendChild:test];
test = [CCSprite  spriteWithSpriteFrameName:@"square.png"];
test.position = CGPointMake(60,60);
test.color = ccc3(255,0,0);
[batch appendChild:test];
test = [CCSprite  spriteWithSpriteFrameName:@"square.png"];
test.position = CGPointMake(100,60);
test.color = ccc3(255,125,125);
[batch appendChild:test];
test = [CCSprite  spriteWithSpriteFrameName:@"bomb.png"];
test.position = CGPointMake(100,100);
test.color = ccc3(255,0,255);
[batch appendChild:test];
[splash addChild:batch]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:08:59.023

I've never seen [batch appendChild: ] being used before. on the cocos2d class reference I couldn't find it. Have you tried [batch addChild: child]; ? There might also be an issue with adding the same CCSprite several times, try making a new sprite for each image and adding it.

For example:

```
 CCSprite* test = [CCSprite  spriteWithSpriteFrameName:@"circle.png"];
    test.position = CGPointMake(20,20);
    test.color = ccc3(255,255,0);
    [batch addChild:test];
    CCSprite* second = [CCSprite  spriteWithSpriteFrameName:@"square.png"];
    second.position = CGPointMake(60,60);
    second.color = ccc3(255,0,0);
    [batch addChild:second]; 
```

# java - Java - 屏幕上的矩形随播放器移动

> ID：14047040
> 
> 赞同：0
> 
> 时间：2012-12-26T22:29:56.693
> 
> 标签：java, rectangles, 2d-games

我制作了一个 2D Java 游戏，其中我在 2D 地图上有一个有障碍物的矩形，我一直在设置与矩形的碰撞，但它们没有工作，经过更多的实验后，我很快意识到我为障碍物制作的矩形与我的播放器一起移动，我的意思是如果我在坐标 0、0 上设置一个矩形，它将停留在我的 GUI 的左上角并且当我移动我的播放器时会移动，它会一直停留在那里而不是固定在地图上。

我设置了以下变量：

```
Animation bucky, movingUp, movingDown, movingLeft, movingRight
Image worldMap;
boolean quit = false;
int[] duration = {200, 200};
int buckyPositionX = 0;
int buckyPositionY = 0;
int shiftX = buckyPositionX + 320;
int shiftY = buckyPositionY + 160; 
```

在我的渲染方法下，我有以下内容：

```
public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
worldMap.draw(buckyPositionX, buckyPositionY);//position 0,0
bucky.draw(shiftX, shiftY);//makes him appear at center of map

if(quit==true){
    g.drawString("Resume(R)", 250, 100);
    g.drawString("Main(M)", 250, 150);
    g.drawString("Quit Game(Q)", 250, 200);      
    if(quit==false){
        g.clear();
    }
}
} 
```

如果我放入我的渲染方法：

```
g.fillRect(0,0,100,100); 
```

一个矩形将留在我的屏幕的左上角，我假设当我用我的变量设置我的矩形并尝试创建碰撞时会发生这种情况，这就是我的碰撞不起作用的原因。总的问题是，我如何编辑我的代码以使我的矩形保持在地图上并且不与我的播放器一起移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:48:06.993

```
 if(quit==false){
        g.clear();
 } 
```

部分将永远不会被执行，如果它永远不会被执行，那有什么意义呢？

# google-app-engine - 有没有办法使用 python 开发服务器加速任务队列的执行？

> ID：14047041
> 
> 赞同：1
> 
> 时间：2012-12-26T22:30:00.383
> 
> 标签：google-app-engine

看起来开发服务器附带的模拟任务队列是串行处理任务的。有没有办法与**开发服务器**同时运行任务？我假设使用 2.7 线程安全的东西，这应该是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:54:03.313

简而言之，不！我的建议是忘记开发服务器以进行更高级的工作，部署部署部署！

GVR 说：

> dev_appserver 不模拟生产服务器的线程行为，您会惊讶地发现它在部署应用程序后工作得很好。

来自一个类似的问题：[GAE python threads not executed in parallel](https://stackoverflow.com/questions/9351719/gae-python-threads-not-executing-in-parallel)

尽管这与任务相关，但您必须假设如果服务器的线程行为未在开发服务器上模拟，则“线程”任务行为也不是。

# python - NSTextView 突出显示不触发

> ID：14047042
> 
> 赞同：1
> 
> 时间：2012-12-26T22:30:01.390
> 
> 标签：python, objective-c, cocoa

我已经下载：`NSTextView`突出显示：[在此处输入链接描述](http://www.programmish.com/?p=30)

它可以正常工作，如果您打开应用程序并输入符号“-”它会变成红色，但是我遇到了一个问题。我`IBOutlet NSTextView * change_text`在**.h**文件中写道：在**.m**文件中写道：

```
-(void)awakeFromNib {

    [text_View setString:@"-"];

} 
```

这个想法是当应用程序打开时，它应该在屏幕上将符号“-”显示为红色。它确实显示了标志：“-”但没有突出显示它，直到我手动单击返回或空格然后它变成红色。我希望它把标志变成红色，而不是等待有人再次更改文本。请帮帮我

python 脚本如下所示：

```
from Foundation import *
from AppKit import *

import objc

class PyObjC_HighlightAppDelegate(NSObject):

    # The connection to our NSTextView in the UI
    highlightedText = objc.IBOutlet()

    # Default font size to use when highlighting
    fontSize = 12

    def applicationDidFinishLaunching_(self, sender):
        NSLog("Application did finish launching.")

    def textDidChange_(self, notification):

        """
        Delegate method called by the NSTextView whenever the contents of the
        text view have changed. This is called after the text has changed and
        been committed to the view. See the Cocoa reference documents:

        http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSText_Class/Reference/Reference.html
        http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html

        Specifically the sections on Delegate Methods for information on additional
        delegate methods relating to text control is NSTextView objects.
        """

        # Retrieve the current contents of the document and start highlighting

        content = self.highlightedText.string()
        self.highlightText(content)

    def setAttributesForRange(self, color, font, rangeStart, rangeLength):
        """
        Set the visual attributes for a range of characters in the NSTextView. If
        values for the color and font are None, defaults will be used.

        The rangeStart is an index into the contents of the NSTextView, and
        rangeLength is used in combination with this index to create an NSRange
        structure, which is passed to the NSTextView methods for setting
        text attributes. If either of these values are None, defaults will
        be provided.

        The "font" parameter is used as an key for the "fontMap", which contains
        the associated NSFont objects for each font style.
        """
        fontMap = {
                    "normal" : NSFont.systemFontOfSize_(self.fontSize),
                    "bold" : NSFont.boldSystemFontOfSize_(self.fontSize)
                    }

        # Setup sane defaults for the color, font and range if no values
        # are provided
        if color is None:
            color = NSColor.blackColor()
        if font is None:
            font = "normal"        

        if font not in fontMap:
            font = "normal"

        displayFont = fontMap[font]

        if rangeStart is None:
            rangeStart = 0

        if rangeLength is None:
            rangeLength = len(self.highlightedText.string()) - rangeStart

        # Set the attributes for the specified character range
        range = NSRange(rangeStart, rangeLength)
        self.highlightedText.setTextColor_range_(color, range)
        self.highlightedText.setFont_range_(displayFont, range)

    def highlightText(self, content):
        """
        Apply our customized highlighting to the provided content. It is assumed that
        this content was extracted from the NSTextView.
        """

        # Calling the setAttributesForRange with no values creates
        # a default that "resets" the formatting on all of the content
        self.setAttributesForRange(None, None, None, None)

        # We'll highlight the content by breaking it down into lines, and
        # processing each line one by one. By storing how many characters
        # have been processed we can maintain an "offset" into the overall
        # content that we use to specify the range of text that is currently
        # being highlighted.
        contentLines = content.split("\n")
        highlightOffset = 0

        for line in contentLines:

            if line.strip().startswith("#"):
                # Comment - we want to highlight the whole comment line
                self.setAttributesForRange(NSColor.greenColor(), None, highlightOffset, len(line))

            elif line.find(":") > -1:
                # Tag - we only want to highlight the tag, not the colon or the remainder of the line
                startOfLine = line[0: line.find(":")]
                yamlTag = startOfLine.strip("\t ")
                yamlTagStart = line.find(yamlTag)
                self.setAttributesForRange(NSColor.blueColor(), "bold", highlightOffset + yamlTagStart, len(yamlTag))

            elif line.strip().startswith("-"):
                # List item - we only want to highlight the dash
                listIndex = line.find("-")
                self.setAttributesForRange(NSColor.redColor(), None, highlightOffset + listIndex, 1)

            # Add the processed line to our offset, as well as the newline that terminated the line
            highlightOffset += len(line) + 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:30:27.600

我认为这里的核心问题是调用`-[NSTextView setString]`不会发布`NSTextDidChangeNotification`，因此代码永远不会调用该`textDidChange_`方法。所以我认为最简单的解决方案就是在设置字符串后发布该通知。我真的不知道 PyObjC，但这是你在 Objective-C 中的做法：

```
[[NSNotificationCenter defaultCenter] postNotificationName:NSTextDidChangeNotification object:text_view]; 
```

我不建议`textDidChange_`直接调用方法方法，就好像您（或您使用的任何库）曾经依赖于在文本更改时调用的方法，它们需要对相同的通知做出反应。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-27T00:27:25.397

如果我理解正确，只需调用`textDidChange`in 。`applicationDidFinishLaunching`

# routes - 在 ViewHelper 中访问路由器以匹配路由或 child_routes

> ID：14047043
> 
> 赞同：2
> 
> 时间：2012-12-26T22:30:12.000
> 
> 标签：routes, zend-framework2, view-helpers

我遇到了一个我目前不了解框架功能的问题。我想设置一个`ViewHelper`根据我所在的站点返回输出的设置。如果我匹配两个特定的`routes`or `child_routes`，我希望 ViewHelper 根据该路线输出链接列表。如果我不在那些匹配的路线上，我不想输出任何内容。

设置 ViewHelper 非常简单，现在我的 ViewHelper 看起来像这样：

```
'factories' => array(
    'myViewHelper' => function($sm) {
        $service = $sm->getServiceLocator()->get('some-doctrine-entity');
        return new \Mynamespace\View\Helper\ViewHelper($service);
    }
) 
```

输出是一个类似的链接列表

```
$this->url('someLink', array('id', $service->getId()); 
```

现在我的问题是`someLink`零件需要可变。它应该是`foo`或`bar`。两者都`foo`可以`bar`，`child_routes`我`foo/index, foo/details, foo/etc`需要匹配所有这些。

所以我的问题是如何写这个

```
$currentRoute = somehowGetTheCurrentRoute();
if ($currentRoute matching `foo` or `foo/child_routes`
  or is matching `bar` or `bar/child_routes`) {
    echo "im happy";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:07:58.283

您可以在视图助手上定义一个方法，它假定您有权访问服务管理器。以下是解决您的问题的一种方法：

```
//$sm is the service manager

$router=$sm->get('Router');
$request=$sm->get('Request');
$routeMatch=$router->match($request);

//get an array of the route params and their values
$routeparams=$routeMatch->getParams();

//get the matched route name
$routename=$routeMatch->getMatchedRouteName();

//The previous parameters can be injected directly into the url plugin call
//$this->url($routename,$routeparams)

//the full path can also be obtained from the router
//(you can test it within a controller)
$path=$router->assemble($routeparams,$options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:15:16.263

没有新匹配的另一种解决方案

$serviceLocator->get('Application')->getMvcEvent()->getRouteMatch();

# json - 如何格式化Json输出

> ID：14047050
> 
> 赞同：2
> 
> 时间：2012-12-26T22:30:40.373
> 
> 标签：json, eclipselink, moxy

请帮助我如何获取 JSON 输出，如下所示：

```
{
   "_costMethod": "Average",
   "fundingDate": 2008-10-02,
   "fundingAmount": 2510959.95
} 
```

代替：

```
{
   "@type": "sma",
   "costMethod": "Average",
   "fundingDate": "2008-10-02",
   "fundingAmount": "2510959.95"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:44:38.473

根据您的问题的输出，您当前没有使用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的本机 JSON 绑定。以下应该会有所帮助。

**Java 模型**

以下是我根据您的帖子对您​​的对象模型的最佳猜测。我添加了获取您正在寻找的输出所需的元数据。

*   `@XmlElement`注释可用于更改键的名称。
*   我使用`@XmlSchemaType`注解来控制`Date`属性的格式。

```
package forum14047050;

import java.util.Date;
import javax.xml.bind.annotation.*;

@XmlType(propOrder={"costMethod", "fundingDate", "fundingAmount"})
public class Sma {

    private String costMethod;
    private Date fundingDate;
    private double fundingAmount;

    @XmlElement(name="_costMethod")
    public String getCostMethod() {
        return costMethod;
    }

    public void setCostMethod(String costMethod) {
        this.costMethod = costMethod;
    }

    @XmlSchemaType(name="date")
    public Date getFundingDate() {
        return fundingDate;
    }

    public void setFundingDate(Date fundingDate) {
        this.fundingDate = fundingDate;
    }

    public double getFundingAmount() {
        return fundingAmount;
    }

    public void setFundingAmount(double fundingAmount) {
        this.fundingAmount = fundingAmount;
    }

} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB (JSR-222) 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy- as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示代码**

```
package forum14047050;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Sma.class}, properties);

        Sma sma = new Sma();
        sma.setCostMethod("Average");
        sma.setFundingDate(new Date(108, 9, 2));
        sma.setFundingAmount(2510959.95);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(sma, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。与您的问题不同，我在日期值周围有引号。这是使其成为有效 JSON 所必需的。

```
{
   "_costMethod" : "Average",
   "fundingDate" : "2008-10-02",
   "fundingAmount" : 2510959.95
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# c# - 在 Windows 8 应用程序中从导航堆栈弹出页面

> ID：14047054
> 
> 赞同：7
> 
> 时间：2012-12-26T22:31:05.167
> 
> 标签：c#, .net, windows-8, microsoft-metro

在页面之间导航时，我看到有一些功能可以让您返回/前进或返回“主页”。但是，我需要的是能够返回但跳过用户不应再访问的页面。我四处搜索，发现以下内容：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/3819f389-3bfc-4c59-a919-272927fc9229](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/3819f389-3bfc-4c59-a919-272927fc9229)

我尝试使用 GetNavigationStack，但由于无法序列化和我作为 NavigationParameter 传递的对象，它一直失败。我必须使用元组来传递 2 个参数，但这无法序列化，因此我无法让导航堆栈对其进行编辑并手动删除页面。

然后我找到了这个[WinRT - 如何从导航历史记录中忽略或删除页面，](https://stackoverflow.com/questions/12712562/winrt-how-to-ignore-or-delete-page-from-navigation-history)并认为我可以包含一个布尔值，如果要跳过页面，可以设置该值

在`LayoutAwarePage.cs`（所有屏幕继承自的类，由 Visual Studio 生成）中，我添加了`protected bool CanGoBackToThisPage { get; set; }`如果您不想访问此页面可以设置，但是这也存在问题，因为有时我不知道您是否想成为能够再次访问页面，直到您在当前页面上完成了某些操作。我不认为你可以做类似的事情`previousFrame.CanGoBackToThisPage = true`。此外，`Frame`您有权访问的对象（我认为）不能访问实际的页面对象，而是一些摘要对象，我不知道如何将这个布尔值放入该摘要对象中。

有谁知道从导航堆栈中删除上一个/当前页面的简单方法？这似乎是一个非常普遍的问题，所以我很难认为微软没有给我们一些方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:49:59.803

好的，我不知道为什么在发布问题之前我没有想到它。也许我只是累了。

我只打`Frame.GoBack()`了两次电话，然后导航到我想去的页面：

```
// If the user presses back we don't want them to visit this page or the previous page they were on so remove them from the navigation stack
Frame.GoBack();
Frame.GoBack();

// Go to the detail page
this.Frame.Navigate(typeof(GroupDetailPage), mGroup); 
```

我想我认为调用`GoBack()`实际上会使页面动画到前一个页面，但事实并非如此

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-11T08:46:38.720

```
Frame.BackStack.RemoveAt(Frame.BackStack.Count - 1); 
```

尽管我必须向 gvmani 提供道具，因为他的回答有所帮助，尽管它不是很完整。

这将避免上面提到的触发 loadstate 事件的问题，是一种更优雅的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-16T09:55:16.157

我遇到了同样的问题，并通过在导航离开后从 BackStack 中删除当前页面解决了这个问题：

```
protected override void OnNavigatedFrom(NavigationEventArgs e)
{
  base.OnNavigatedFrom(e);

  // Remove current page from history
  var pageStackEntry = Frame.BackStack.Last(entry => entry.SourcePageType == this.GetType());
  Frame.BackStack.Remove(pageStackEntry);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T05:58:46.153

我使用 NavigationCacheMode 来避免在导航到 Frame 中的其他页面时创建多个实例。

```
public SamplePage()
    {
        this.InitializeComponent();
        this.NavigationCacheMode = global::Windows.UI.Xaml.Navigation.NavigationCacheMode.Required;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-20T07:03:29.270

如果您使用框架导航，请在新框架的加载状态中执行 this.Frame.BackStack.Remove 并清除之前的页面。

# gnuplot - 如何从 CLI 调用 gnuplot 并将输出图保存到图像文件中？

> ID：14047061
> 
> 赞同：7
> 
> 时间：2012-12-26T22:31:42.107
> 
> 标签：gnuplot

我正在编写一个批处理文件，它还将从 dat 文件生成一个 gnuplot 图。

我希望使用我编写的 gnuplot“gnu”脚本从命令行调用 gnuplot，并将输出图保存到图像中。

就像是：

```
gnuplot.exe script.gnu > image.png 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T04:34:32.787

您不必将 gnuplot 的输出重定向到图像文件中；您可以在 gnuplot 脚本本身中设置它：

```
set terminal png
set output 'image.png' 
```

如果您想要一个变量输出名称，在 bash 中实现此目的的一种简单方法是这样包装 gnuplot 命令：

```
#!/bin/bash

echo "set terminal png
set output '$1'
plot 'data.dat'" | gnuplot 
```

这样，您可以使用输出文件名的参数运行 bash 脚本：

```
./plotscript.sh image.png 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T07:15:53.827

只需输入以下行将使 gnuplot 返回 png 格式的字节码。因此，您可以将输出重定向到 png 文件。

```
set terminal png 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-19T09:08:25.750

当您的批处理文件仅运行 gnuplot（使用脚本）并且不执行任何其他操作时，您可以将批处理文件与 gnuplot 脚本结合使用：

```
@echo off & call gnuplot -e "echo='#';set macros" "%~f0" & goto :eof

set terminal png
set output 'image.png'
... 
```

**使用.cmd**扩展名保存它。
这样做的好处是：

*   你只有 1 个文件而不是 2 个
*   该文件可从 Explorer/TaskScheduler/etc 运行。以可移植的方式
    （无需将新扩展与 gnuplot.exe 关联）

换句话说，这是`#!/usr/bin/env gnuplot`Unix 解决方案的 Windows“等效”（？）
（这就是为什么我在 Windows 下使用 gnuplot 脚本时觉得它很舒服的原因）。
（注意：'call gnuplot' 用于允许在 PATH 中的某处使用 gnuplot.cmd 文件，而不是使用 gnuplot.exe（和许多其他程序）的文件夹污染 PATH。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-12T22:53:04.390

之前的解决方案都行不通，需要实现：

首先：像这样创建script.sh：

```
#!/bin/sh  
gnuplot << EOF  
set terminal postscript eps color enhanced  
set output "$1.eps" # all the declarations that you need  
set xlabel "Energy [MeV]"  
plot "$1.dat" using 1:2 notitle w l  
EOF 
```

二：执行脚本：

```
$ ./script.sh data 
```

参数数据是您将用于绘制图形的 .dat 文件...

真的行！

# apache-poi - 无法使用 apache POI 中的 RGB 值为某些单元格设置填充背景颜色

> ID：14047062
> 
> 赞同：3
> 
> 时间：2012-12-26T22:31:44.370
> 
> 标签：apache-poi, background-color, rgb, xssf

我在 Apache POI 中使用 XSSF 来生成 Xlsx 文件。我进口了`org.apache.poi.xssf.usermodel.XSSFColor`. 我的目的是`RGB(141,180,226)`为某个单元格设置填充背景颜色。我尝试使用

```
XSSFColor bg=getXSSFColor("8DB4E2"); 
```

首先获取颜色的代码。然后使用，

```
setFillBackgroundColor(bg) 
```

设置颜色。但是，`getXSSFColor`找不到方法。我不知道为什么以及是否有其他方法可以达到相同的目的。

# momentjs - 在 Moment.js 中，如何获取特定月份的下一次出现的日期（例如：'next January' => 2013-01-01）？

> ID：14047063
> 
> 赞同：3
> 
> 时间：2012-12-26T22:31:45.623
> 
> 标签：momentjs

例子：

*   现在是 2012 年 3 月 26 日。我要求明年 2 月。它应该返回 2013-01-01
*   现在是 2012 年 3 月 26 日。我要求明年 4 月。它应该返回 2012-04-01

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:46:51.757

你可以做这样的事情。

```
// date is a JS date or moment
// month is the zero indexed month (0 - 11)
function nextMonth(date, month) {
    var input = moment(date);
    var output = input.clone().startOf('month').month(month);
    return output > input ? output : output.add(1, 'years');
} 
```

请参阅有关操作片刻的文档。[http://momentjs.com/docs/#/manipulating/](http://momentjs.com/docs/#/manipulating/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T23:13:30.360

写了这个：

```
 /**
        @var date is a JS date or moment
        @var month is the month in the 0-11 format
     */
    var getNextMonthOccurrence: function(date, month){
        var m = moment(date);

        var this_year = new Date(m.year(), month, 1);
        var next_year = new Date(m.year() + 1, month, 1);

        return this_year > m ? this_year : next_year;
    } 
```

但是必须有更好的方法来做到这一点......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-22T20:50:02.433

明年1月1日： `moment().month(0+12).date(1).hour(0).minute(0).second(0)`

明年3月17日： `moment().month(2).date(17).hour(0).minute(0).second(0)`

编辑：您只需要注意创建日期是否小于现在。由于现在是 2 月，因此获得下一个 1 月需要增加 12 个月，但获得下一个 3 月则不需要。

```
function getNextJan(){
    var j = moment().month(0).date(1).hour(0).minute(0).second(0)
    if(j < moment()) return j.month(12)
    return j
} 
```

# c# - 不断收到“对象引用未设置为对象的实例”。复制字符串时

> ID：14047065
> 
> 赞同：1
> 
> 时间：2012-12-26T22:31:47.460
> 
> 标签：c#

```
int PlayerAmount = 10;
int CurrentPlayer = 0;
Player[] player = new Player[PlayerAmount];

while (true)
{
    string Input;
    Console.WriteLine("What would you like to do?");
    Console.WriteLine("1\. Create new player and score.");
    Console.WriteLine("2\. Display Highscores.");
    Console.WriteLine("3\. Write out to XML file.");
    Console.Write("Input Number: ");
    Input = Console.ReadLine();
    if (Input == "1")
    {
        if (CurrentPlayer >= PlayerAmount)
        {
            Console.WriteLine();
            Console.WriteLine("MAX AMOUNT OF PLAYERS HAS BEEN REACHED!");
            Console.WriteLine();
        }
        else
        {
            string PlayerName;
            string Score;

            Console.WriteLine();
            Console.WriteLine("-=CREATE NEW PLAYER=-");
            Console.Write("Player name: ");
            PlayerName = Console.ReadLine();
            Console.Write("Player score: ");
            Score = Console.ReadLine();

            //=========================================
            //THIS IS WHERE THE ERROR OCCURS===========
            //=========================================
            player[CurrentPlayer].Name = PlayerName;

            Console.WriteLine("Player \"" + player[CurrentPlayer].Name + "\" with the score of \"" + player[CurrentPlayer].Score + "\" has been created successfully!" );
            Console.WriteLine();
        }
    }
    else if (Input == "2")
    {
        Console.WriteLine("Displaying the highscores");
    }
    else if (Input == "3")
    {
        Console.WriteLine("Writing to XML file");
    }
    else
    {
        Console.WriteLine("INVALID INPUT");
    }
} 
```

我已经尝试使用字符串复制，但这只是给了我同样的错误，我已经在代码中指出了问题，但是如果你看不到它是复制玩家名称的位置：“玩家 [ CurrentPlayer].Name = PlayerName;"

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:33:30.183

在我看来：

```
player[CurrentPlayer].Name 
```

一片空白。确保索引处的播放器对象`currentPlayer`不为空。

初始化数组时，所有对象默认为空（非基元）。因此，您必须根据数组中的索引实例化每个玩家。

这一行：

```
Player[] player = new Player[PlayerAmount]; 
```

仅分配一个大小数组`playerAmount`（在您的情况下为 10）；

你需要这个来初始化它们：

```
for(int i =0; i < player.length;i++)  
{  
     player[i] = new Player();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:36:34.993

您不会初始化`Player`数组的每个成员。做完之后：

```
Player[] player = new Player[PlayerAmount]; 
```

您可能也想这样做：

```
for (int i = 0; i < PlayerAmount; i++)
{
    Player[i] = new Player();
} 
```

因为事先，数组只包含一堆`null`引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:09:02.347

您也可以制作类似懒惰的东西

```
player[CurrentPlayer] = new Player();
player[CurrentPlayer].Name = PlayerName; 
```

# python - Python Pyplot Bar 使用对数刻度时，绘图条消失

> ID：14047068
> 
> 赞同：11
> 
> 时间：2012-12-26T22:32:29.217
> 
> 标签：python, matplotlib, plot

我有以下数据：

```
20120219,\\n,43166053
20120220,\\n,46813269
20120221,\\n,47277204
20120222,\\n,46344556
20120223,\\n,26926236
20120224,\\n,6472506
20120225,\\n,39580476
20120226,\\n,55968342
20120227,\\n,32889948
20120228,\\n,32116361
20120229,\\n,32424829
20120301,\\n,56123889
20120302,\\n,67102459
20120303,\\n,81681885
20120304,\\n,85740021
20120305,\\n,83874668
20120306,\\n,83606683
20120307,\\n,56660981
20120308,\\n,44534668
20120309,\\n,37532071
20120310,\\n,39260242
20120311,\\n,40491186
20120312,\\n,39041085
20120313,\\n,27010562
20120314,\\n,44121900
20120315,\\n,87750645
20120316,\\n,86588523
20120317,\\n,86121469
20120318,\\n,89343506
20120319,\\n,89198664
20120320,\\n,90273127 
```

我有以下代码来创建条形图：

```
import matplotlib
matplotlib.use('Agg')
from matplotlib.mlab import csv2rec
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from pylab import *
from datetime import datetime
import dateutil
import sys
import matplotlib.ticker as mticker

y = []                                                                                                    

input = open(sys.argv[1], 'r')                                                                                                                                          

data = csv2rec(input, names=['date', 'symbol', 'count'])                      

for item in data['count']:
        y.append(item)

time_vec = [datetime.strptime(str(x),'%Y%m%d') for x in data['date']]

rcParams['figure.figsize'] = 18, 7
rcParams['font.size'] = 8

N = len(y)

ind = range(N)

fig = plt.figure()                              # Setup the figure

ax = fig.add_subplot(111)                       # Setup the subplot
ax.bar(ind, y, align='center')                  # Setup the Y Bars

ax.set_ylabel('Counts') 

ax.set_title('Collected By Day')               

ax.set_xticks(ind)
ax.set_xticklabels(time_vec)
ax.grid()                                      

fig.autofmt_xdate(bottom=0.2, rotation=90, ha='left')

plt.yscale('log')

plt.savefig(str(sys.argv[1] + ".png")) 
```

这将创建以下图表：

![日条形图](../Images/5cb3e0e4ad1043413684a73b6dce7da9.png)

如果我删除“plt.yscale（'log'）”行，那么我会得到完整的条形图。但是，因为我想添加其他行，所以我真的需要这个具有对数 y 刻度。基于一些搜索，我认为这是 pyplot 中的一个错误，但我似乎找不到解决方案。有谁知道如何获得对数条形图来实际显示条形图？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-26T22:45:49.353

该`bar`函数有一个`log`参数，在使用对数刻度时需要设置为 true：http: [//matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.bar](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.bar)

# c# - 在数据库中插入图像

> ID：14047069
> 
> 赞同：0
> 
> 时间：2012-12-26T22:32:33.730
> 
> 标签：c#, asp.net, sql, sql-server

PLZ，任何人都可以在这段代码中提供帮助吗？

```
string imagename="test.png";
        string imagepath=Server.MapPath("\\images");
        SqlConnection con = new SqlConnection();
        SqlConnectionStringBuilder S = new SqlConnectionStringBuilder("data source=hima-pc\\sql8;initial catalog=test; integrated security= True;pooling=false ");
        con.ConnectionString = S.ConnectionString;
        con.Open();
        string sqlcon = "insert into images(imgname,imgpath)values("+imagename+","+imagepath+")";

        SqlCommand myCom = new SqlCommand(sqlcon,con);
        int numrow = myCom.ExecuteNonQuery();
        con.Close(); 
```

请我需要将图像的路径保存在我的数据库中但没有上传文件我的图像已经在服务器的文件夹中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:38:31.253

好像'不见了

```
string sqlcon = "insert into images(imgname,imgpath)values('"+imagename+"','"+imagepath+"')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:40:20.037

您的 SQL 语句中有两个错误：

1.  ' 不见了。

2.  在 table(columns..) 和 VALUES 之间缺少空间：

    ```
    string sqlcon = "INSERT INTO images(imgname,imgpath) VALUES ('"+imagename+"','"+imagepath+"');"; 
    ```

看看这个： [http ://www.w3schools.com/sql/sql_insert.asp](http://www.w3schools.com/sql/sql_insert.asp)

它描述了 INSERT INTO 语句。

# c# - 反序列化多个不同的派生类型

> ID：14047073
> 
> 赞同：1
> 
> 时间：2012-12-26T22:32:52.740
> 
> 标签：c#, .net, xml, web-services, deserialization

在这里遇到一点问题。我有一些从 3rd 方服务返回的 xml，看起来像这样（简化）

```
<Root>
    <Response>
        <Record></Record>   
    </Response>
    <Response>
        <Record></Record>   
    </Response>
</Root> 
```

每条记录都有可能成为不同类型的对象，一条 xml 消息可能有多个响应

我的课程看起来像这样

```
public class Response
{
    [XmlElement(typeof(DerivedRecord1))]
    [XmlElement(typeof(DerivedRecord2))]
    public BaseRecord Record { get; set;}
}

public class BaseRecord { }
public class DerivedRecord1 : BaseRecord { }
public class DerivedRecord2 : BaseRecord { } 
```

当我在反序列化后查看 Record 对象时，它对于两个响应都返回为 null。

现在，当我在基类上使用 XmlInclude 元素而不是属性上的 XmlElement 属性时，Record 属于基类而不是派生类型。

我在这里做错了什么？

# android - android服务线程进程

> ID：14047074
> 
> 赞同：0
> 
> 时间：2012-12-26T22:32:53.883
> 
> 标签：android, multithreading, service, process, ocr

根据我的研究，我相信它们是您可以在 Android 中运行服务的 3 种方式：

1.  在应用程序的主线程中。
2.  在与应用程序的主线程分开的线程中。
3.  在一个完全独立的过程中。

我的目标是制作一个具有对图片运行 OCR 并返回文本的功能的应用程序。我知道选项 1 已退出，因为我的原型需要很长时间才能在具有双核 CPU 的手机上运行 OCR。我找不到关于线程与服务的不同进程的讨论。

那么选项 2 和 3 的优缺点是什么？

编辑：我可能会使用 IntentService 因为我希望服务在它给我图像中的文本后终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:10:06.033

> 根据我的研究，我相信它们是您可以在 Android 中运行服务的 3 种方式：

不，有两个，你所拥有的 #1 和 #3。一个服务可以*启动*一个线程，但该服务的所有生命周期方法都在主应用程序线程上。因此，从组件架构的角度来看，#1 和#2 是同一件事。

> 那么选项 2 和 3 的优缺点是什么？

选项＃3浪费CPU和RAM几乎没有附加值，恕我直言。

> 我可能会使用 IntentService，因为我希望服务在它为我提供图像中的文本后终止。

`IntentService` [自动为您提供后台线程](http://developer.android.com/reference/android/app/IntentService.html)。

# c# - 获取“源文件与构建模块时不同。” 当我刚刚建造它时

> ID：14047075
> 
> 赞同：1
> 
> 时间：2012-12-26T22:32:56.103
> 
> 标签：c#, asp.net, visual-studio-2010

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:47:45.587

您使用的是 iis 还是集成的 Web 开发服务器？只是在这里猜测，但您的 Web 服务器可能仍在使用您的 dll 的旧副本，因此请在重建项目后尝试重新启动它。

我目前无法访问 VS，但如果我没记错的话，当您在 VS 中点击运行按钮时，输出窗口包含所有加载的 dll 的路径。检查那里，看看您是否确实在加载正确的模块。

希望这可以帮助

编辑：另外，记得复制 pdb 文件！由于您引用的是 dll，因此 bin 文件夹中该 dll 的 pdb 文件很可能与您刚刚构建的版本不同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:21:08.960

我想我明白了为什么 IIS 和 VS 使用的是旧版本的 DLL。这是因为我在 DotNetNuke bin 文件夹中还有一个旧版本。一旦我将新的 DLL 从构建项目复制到 DNN bin 中，我就能够很好地单步执行代码。我从没想过出于某种原因实际检查那里。

# wpf - Tab 专注于我隐式生成的 ListBoxItem

> ID：14047081
> 
> 赞同：0
> 
> 时间：2012-12-26T22:34:00.900
> 
> 标签：wpf, xaml

我有一个承载控件的 ListBox。我希望能够从一个控件切换到下一行的控件。在我点击选项卡后，隐式生成的 ListBoxItem 似乎正在获得焦点。我怎样才能解决这个问题？

```
<ListBox ItemsSource="{Binding UiControls}" 
         DockPanel.Dock="Top"
         BorderThickness="0"
         Background="{DynamicResource ControlInteriorBrush}"
         KeyboardNavigation.TabNavigation="Continue"
         KeyboardNavigation.ControlTabNavigation="Continue">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="col1"/>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="col2"/>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="col3"/>
                </Grid.ColumnDefinitions>
                <Border Grid.Column="0">
                    <TextBlock Text="{Binding Path=Label}" 
                               FontWeight="Bold"
                               VerticalAlignment="Center"     
                               Background="{DynamicResource ControlInteriorBrush}"
                               Foreground="{DynamicResource FontBrush}"
                               Margin="0,0,25,0"
                               KeyboardNavigation.TabNavigation="Continue"/>
                </Border>
                <Controls:AutoCompleteTextBox Default="{Binding Path=DefaultValue}"  
                                              Items="{Binding Path=DropDownValues}"
                                              Tag="{Binding}"
                                              DataContext="{Binding}"
                                              Width="300" 
                                              Grid.Column="1" 
                                              Height="30"
                                              Background="{DynamicResource ControlInteriorBrush}"
                                              Margin="0,0,10,0"
                                              KeyboardNavigation.IsTabStop="True"
                                              FocusManager.IsFocusScope="True"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:14:00.153

这是一种可用于允许列表框项中的各个控件参与选项卡导航的模式。我只包含了所需的 XAML - 您必须对其进行自定义以满足您的需求。

```
<ListBox Focusable="False" KeyboardNavigation.TabNavigation="Continue">
  <ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
      <Setter Property="Focusable" Value="False"/>
      <Style.Triggers>
        <Trigger Property="IsKeyboardFocusWithin" Value="true">
          <Setter Property="IsSelected" Value="true" />
        </Trigger>
      </Style.Triggers>
    </Style>
  </ListBox.ItemContainerStyle>
</ListBox> 
```

当进入此列表框时，第一项中的第一个可聚焦控件将获得焦点。再次 Tab 键将移动到第一个项目中的下一个可聚焦控件，当没有更多控件时，焦点（和选择）将移动到列表框中的下一个项目。当到达最后一项中的最后一个控件时，制表符将移动到包含元素中列表框之后的下一个控件。

因为`ListBoxItem`无法接收焦点，您无法使用箭头键在列表中的项目之间导航。您必须在`ListBoxItem`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T23:41:29.327

不要使用 ListBox，而是使用不带焦点的 ItemsControl。

```
<ItemsControl ItemsSource="{Binding UiControls}" >
 ...
</ItemsControl> 
```

# git - 设置复杂的 git 别名

> ID：14047082
> 
> 赞同：7
> 
> 时间：2012-12-26T22:34:00.783
> 
> 标签：git

我想设置一个 git 别名，它`git log`会运行

```
git log --pretty=format:"%C(yellow)%h  %C(red)%an, %C(green)%ar %""s" 
           --since=2.weeks –n20 
```

我试着跑步

```
git config --global alias.log 'log --pretty=format:"%C(yellow)%h  
           %C(red)%an, %C(green)%ar %""s" --since=2.weeks –n20' 
```

并确认它在 .gitconfig 中记录为

```
 28 [alias]
       …
 34   log = log --pretty=format:\"%C(yellow)%h  %C(red)%an,
                 %C(green)%ar %\"\"s\" --since=2.weeks –n20 
```

然而，这并没有按预期格式化 git 输出。

请问我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T22:36:27.940

来自 git 文档：

> 为了避免脚本使用的混乱和麻烦，隐藏现有 git 命令的别名将被忽略。

您必须重命名您的别名。

# sql - 基于其他列的最常见的 2 个值

> ID：14047088
> 
> 赞同：2
> 
> 时间：2012-12-26T22:35:03.403
> 
> 标签：sql, sql-server

我有这张桌子：

```
Team | Player
Barca | Messi
Chelsea | Lampard
Barca | Messi
Barca | Messi
Chelsea | Lampard
Chelsea | Drogba
Barca | Iniesta
Barca | Xavi
Barca | Iniesta
Barca | Puyol 
```

所以我需要一个查询来检索每支球队中排名前两名的普通球员。像这样的东西：

```
Team | Player
Barca | Messi
Barca | Iniesta
Chelsea | Lampard
Chelsea | Drogba 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:41:23.587

您可以使用子查询/CTE 来计算每个玩家的计数和排名，方法是根据每个团队的计数降序对行进行编号。然后从每支球队中抽出前两名球员：

**查询**（[**演示**](http://www.sqlfiddle.com/#!6/21711/12)）：

```
with ranks as (
  select
    team, player, count(*) as count,
    row_number() over (partition by team order by count(*) desc) as teamrank
  from players p
  group by team, player
)
select
  team, player
from
  ranks
where teamrank <= 2
order by team, teamrank 
```

**结果**：

```
|    TEAM |  PLAYER |
---------------------
|   Barca |   Messi |
|   Barca | Iniesta |
| Chelsea | Lampard |
| Chelsea |  Drogba | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T22:41:59.593

这是您需要窗口功能的地方：

```
select team, player
from (select team, player, count(*) as cnt,
             row_number() over (partition by team order by count(*) desc) as seqnum
      from team_player tp
      group by team, player
     ) tp
where seqnum in (1, 2) 
```

请注意，这将聚合函数嵌套`count(*)`在 windows 函数中。

# vb.net - 如何让 directx 媒体播放器在 vb.net 中连续循环播放一个或多个视频？当我尝试时出现错误

> ID：14047090
> 
> 赞同：0
> 
> 时间：2012-12-26T22:35:16.393
> 
> 标签：vb.net, directx, media-player

如何让 directx 媒体播放器在 vb.net 中连续循环播放一个或多个视频？当我尝试时出现错误

错误：

mscorlib.dll 中出现“System.ArgumentOutOfRangeException”类型的未处理异常

附加信息：索引超出范围。必须是非负数且小于集合的大小。

到目前为止，这是我的代码：

```
Imports Microsoft.DirectX
Imports Microsoft.DirectX.AudioVideoPlayback
Imports System.Text.RegularExpressions
Imports System.Net
Imports System.IO

Public Class Form1
    Dim PlayorPause As Integer = 0
    Dim MovieN As Integer = 0
    Dim NowPlaying As List(Of String) = New List(Of String)
    Friend WithEvents videoFile As Video
    Sub Pause()
        If PlayorPause = 0 Then
            videoFile.Play()
            PlayorPause = 1
        Else
            videoFile.Pause()
            PlayorPause = 0
        End If
    End Sub
    Sub Nextvid()
        videoFile.Dispose()
        Dim WindowSize As Size = Panel1.Size
        If MovieN > NowPlaying.Count - 1 Then
            MovieN = 0
            Nextvid()
        Else
            videoFile = New Video(NowPlaying(MovieN))
            videoFile.Owner = Panel1
            Panel1.Size = WindowSize
            videoFile.Play()
        End If
    End Sub
    Private Sub Video_End(ByVal sender As Object, ByVal e As EventArgs) Handles videoFile.Ending

        Dim WindowSize As Size = Panel1.Size
        If MovieN > NowPlaying.Count Then
            MovieN = 0
        Else
            Dim CurrenN As Integer = MovieN - 1
            MovieN = MovieN + 1
            videoFile = New Video(NowPlaying(MovieN))

        End If
        videoFile.Owner = Panel1
        Panel1.Size = WindowSize
        videoFile.Play()
    End Sub
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        NowPlaying.Add(" C:\Users\Adminx\Downloads\ShortestVid.avi")
        Dim WindowSize As Size = Panel1.Size
        videoFile = New Video(NowPlaying(0))
        videoFile.Owner = Panel1
        Panel1.Size = WindowSize
        Me.KeyPreview = True
        Me.MinimumSize = New Size(319, 444)
        Me.Size = Me.MinimumSize
        Me.DoubleBuffered = True
    End Sub
    Sub NextPress()
        MovieN = MovieN + 1
        Nextvid()
    End Sub

    Sub PrePress()
        MovieN = MovieN - 1
        Nextvid()
    End Sub

    Sub Watchbtn()
        Me.MinimumSize = New Size(660, 444)
        Panel1.Visible = True
        Panel1.Focus()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:21:22.960

在 Video_End 中，替换

```
If MovieN > NowPlaying.Count Then 
```

和

```
If MovieN > NowPlaying.Count - 1 Then 
```

# java - 使用 NetBeans 时在 tomcat 中出现错误

> ID：14047091
> 
> 赞同：0
> 
> 时间：2012-12-26T22:35:19.693
> 
> 标签：java, jakarta-ee, tomcat, netbeans

当我运行一个jsp页面时，Tomcat说

> 尝试对锁定的用户“admin”org.apache.catalina.realm.LockOutRealm 进行身份验证。

我已经设置了用户并以管理员身份传递，管理员。不久前，当我使用 net-beans 和捆绑的 tomcate 时，我曾经没有任何问题，在 Linux 上也是如此。

这次我使用的是 Windows 7 64bit（但我不认为它是 Windows 问题）它锁定了我给它的每个用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T01:41:24.940

Tomcat 中的配置可能发生在某些级别：

从 tomcat 安装目录开始，检查您的**TOMCAT_HOME/conf/server.xml**文件。也许某个地方是 LockOutRealm。或者查看**TOMCAT_HOME/conf/Catalina/localhost**。此外，war/webapp 本身可能会定义一个**META-INF/context.xml**文件。

此外，您可以在 IDE 之外独立运行 Tomcat。

NetBeans 也有设置。

你真的以用户身份运行你的应用程序`admin`吗？我不会在生产环境中这样做。

# c# - 如何从列表框中选择一个 url？

> ID：14047094
> 
> 赞同：0
> 
> 时间：2012-12-26T22:35:37.240
> 
> 标签：c#, visual-studio-2010, windows-phone-7

在后退按钮单击事件上，Web 浏览器应该转到列表中的第一项（返回一页）。我在 VB 中对此进行了编码并且它可以工作，但是在我的应用程序所在的 C# 中却没有。

这是我的代码：

```
 private void back_Click(object sender, RoutedEventArgs e)
    {
        web.Navigate(new Uri(hlist.Items.First, UriKind.Absolute));
    } 
```

-web 是我的网络浏览器的名称

-hlist 是历史列表

*   Windows Phone 不支持 GoBack

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:46:03.173

尝试创建一个变量 i，而不是让 webbrowser 转到首先，尝试使其类似于：`i--`so`hlist.SelectedItem=i`或某事然后你可以说`i--`然后让 webbrowser 导航到 i，即 hlist 的值。我有一段时间没有做过 c#，所以`hlist.SelectedItem=i`可能行不通。

# html - div 使页面太高

> ID：14047096
> 
> 赞同：1
> 
> 时间：2012-12-26T22:36:03.090
> 
> 标签：html, screen

所以，我有一个页面，在屏幕上重新定位了多个 div。问题是，当我向其添加 div 时，页面会变得更高。

观察。这是页脚。*我用 php 包含标签提到它以将其添加到页面的其余部分。

（对不起我的英语）

html:

```
<div id="rodape_content">
<div id="conteudo"><br/>
        <center>
            <img src="img/sonhe_as_solucao.png" width="300" height="66"/>
        </center>
        <br/>

        <div id="modelo01">
            <p><img src="img/modelos/comercio.png" width="50" height="50" align="left"/>
                <font color="#fff">COMÉRCIO ELETRÔNICO
                    <p align="justify">Sites de comércio eletrônico (e-commerce/ loja virtual) é um grande diferencial
                        competitivo para qualquer empresa, independente do porte da mesma. Com a After Solutions, você
                        poderá vender suas mercadorias on-line com facilidade e profissionalismo, dispondo das mais
                        modernas ferramentas do mercado.</p>
                </font>
        </div>
        <div id="modelo02">
            <p><img src="img/modelos/dinamicos.png" width="50" height="50" align="left"/>
                <font color="#fff">SITE DINÂMICO (PHP)
                    <p align="justify">Sites dinâmicos, em PHP, são sites "programados" para uma finalidade específica,
                        seja gerenciar uma área do cliente ou então ter uma interface de manutenção do seu próprio
                        website. Exemplos de plataformas em PHP: Wordpress (gerenciamento de website), WHMCS
                        (gerenciamento de clientes e produtos) e PHPbb (gerenciamento de forum).</p>
                </font>
        </div>
        <div id="modelo03">
            <p><img src="img/modelos/blogs.png" width="50" height="50" align="left"/>
                <font color="#fff">BLOGS
                    <p align="justify">Os blogs, atualmente, destacam-se pela facilidade de adicionar e expor conteúdos.
                        Exemplos? Blogs de Humor integrados com as redes sociais, blogs de notícias, pessoais entre
                        outros. Na After Solutions, você tem a comodidade de ter um blog "desenhado" em sintonia com o
                        conteúdo postado.</p>
                </font>
        </div>
        <div id="modelo04">
            <p><img src="img/modelos/blogs.png" width="50" height="50" align="left"/>
                <font color="#fff">PORTFÓLIO
                    <p align="justify">Um portfólio, é a melhor maneira para um artista expor seu trabalho. A After
                        Solutions desenvolve portfólios para todo o tipo de artista, seja para músicos, pintores,
                        fotográfos... Além disso, é possível integrar seu portfólio com um blog, com uma loja virtual ou
                        ambos! Exponha, anuncie, venda sua obra! </p>
                </font>
        </div>
    </div> 
```

CSS：

```
body, td, th {
    color: #999;
    background-image: url(../img/fundo.png);
    background-repeat: repeat;
    margin: auto;
    font-family: "Arial Narrow", cursive;
}
#conteudo {
    width: 920px;
    margin: auto
}
#modelo01 {
    width:220px;
    height:250px;
    position:relative;
    background-image:url(../img/sub_cabecalho_bg.png);
    -moz-border-radius: 5px;  /* for Firefox */
    -webkit-border-radius: 5px; /* for Webkit-Browsers */
    border-radius: 5px; /* regular */
    border: 2px solid #CCC;
    clear:both;
}
#modelo02 {
    width:220px;
    height:250px;
    position:relative;
    top: -254px;
    left:230px;
    background-image:url(../img/sub_cabecalho_bg.png);
    -moz-border-radius: 5px;  /* for Firefox */
    -webkit-border-radius: 5px; /* for Webkit-Browsers */
    border-radius: 5px; /* regular */
    border: 2px solid #CCC;
    clear:both;
}
#modelo03 {
    width:220px;
    height:250px;
    position:relative;
    top: -508px;
    left:460px;
    background-image:url(../img/sub_cabecalho_bg.png);
    -moz-border-radius: 5px;  /* for Firefox */
    -webkit-border-radius: 5px; /* for Webkit-Browsers */
    border-radius: 5px; /* regular */
    border: 2px solid #CCC;
    clear:both;
}
#modelo04 {
    width:220px;
    height:250px;
    position:relative;
    top: -762px;
    left:690px;
    background-image:url(../img/sub_cabecalho_bg.png);
    -moz-border-radius: 5px;  /* for Firefox */
    -webkit-border-radius: 5px; /* for Webkit-Browsers */
    border-radius: 5px; /* regular */
    border: 2px solid #CCC;
    clear:both;
}
#rodape_content {
    width: 100%;
    height: auto;
    background-color: #099;
    margin-top: 0px;
    border-top: 5px solid #ccc;
} 
```

图片：

![在此处输入图像描述](../Images/65d5aaecff78545e8a3803b2c3ecff30.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:46:46.657

好吧，这就是`position: relative`它的作用——它将元素从它们的原始位置移动而不影响页面的布局。

你最好使用浮动来实现这种布局。由于四个内容框具有相似的样式，我还建议给它们一个通用的类名，而不是为每个内容框分配一个唯一的 ID。

# google-tv - 通过 Anymote 协议重启 Google TV 设备？

> ID：14047097
> 
> 赞同：2
> 
> 时间：2012-12-26T22:36:03.560
> 
> 标签：google-tv, anymote

我正在尝试通过 Anymote 协议远程重启 Google TV 设备。当我通过任何方式发送 CTRL+ALT+DEL 时，什么也没有发生。是否可以远程重启 Google TV 设备？是否可以通过发送 Android Intent 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T02:31:40.057

我认为这是故意的。

通常，应用程序需要权限：“android.intent.action.REBOOT”才能成功[重启（）设备](http://developer.android.com/reference/android/os/PowerManager.html#reboot%28java.lang.String%29)。但是，此权限只能授予系统应用程序。

允许设备通过 Anymote 协议重新启动将是[权限提升](http://en.wikipedia.org/wiki/Privilege_escalation)的一个很好的示例，其中系统应用程序将此安全功能公开给其他应用程序而无需强制执行权限。

因此，回答您的问题：如果 Anymote 协议确实支持重新启动，那将违反安全规定。而且由于它显然没有，如果没有系统应用程序，根本无法重新启动电视......

* * *

（相关的：这就是为什么检查**您的应用程序**是否存在潜在的安全漏洞总是很重要的原因。如果您请求许可并且没有正确限制对它的访问，您将允许其他应用程序利用该漏洞）

# php - Emberjs，服务器端与客户端，All in？

> ID：14047099
> 
> 赞同：23
> 
> 时间：2012-12-26T22:36:11.200
> 
> 标签：php, javascript, rest, yii, ember.js

我一直在研究[Ember.js](http://emberjs.com)，它看起来真的很棒，但我担心的一件事是，我无法理解它，如果我开始在已经运行的项目中使用它。

我最终是否必须移动客户端的所有内容，并在某个时候使我的应用程序成为单页应用程序？

让我澄清一下……

到目前为止，使用 Ember 在客户端和服务器之间进行通信的最佳方式是 REST。这看起来很棒，但我不喜欢第一次加载所有模板。并将我的服务器中的所有逻辑移动到客户端（或者我错了？），因为看起来我的服务器端将成为一个无逻辑的 REST API。

另外，我正在使用[Yii 框架](http://www.yiiframework.com/)，它具有一些 JavaScript（启用 Ajax）组件，例如[grids](http://www.yiiframework.com/doc/api/1.1/CGridView)。我怎样才能让 ember 在[导航](http://emberjs.com/guides/router_primer/#toc_navigation)上与所有这些交互，而不必重写一堆已经在我的应用程序上工作的东西？

我在登录页面（或状态）上，然后登录后，我必须显示一个[网格](http://www.yiiframework.com/doc/api/1.1/CGridView)，这对 Yii 来说很容易，并且可以加载整个页面，但是如果我使用的是 Ember，我怎么能拥有我的像往常一样显示网格？我是否必须为网格预加载把手模板以及控制它的 JavaScript？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T17:25:34.483

不，您不应该将所有内容都移到客户端，尤其是可以绕过的身份验证和验证。

移到 Emberjs 的是 MVC 的 yii-s View 部分，控制器将输出即 JSON。

然后，该数据通过 Ember 路由和控制器等映射到 Embers 模型部分。

因为你用 ember 替换了 Yii 的表示逻辑，所以你不应该使用 Yii 的 UI 类，比如 CGridView。混合它们可能是可能的，但这似乎不是一个好主意。你必须在 Ember 中运行你自己的。

[http://www.yiiframework.com/wiki/409/ember-js-with-yii-rest-backend-demo-application/](http://www.yiiframework.com/wiki/409/ember-js-with-yii-rest-backend-demo-application/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T15:06:46.950

只是在这里添加一个 Yii 视角。网格视图/列表的许多“魔力”发生在数据提供者中（用于复杂的搜索、排序和过滤），并通过模型上的已解析字段格式化数据。

因此，您可以在服务器端使用相同的概念，并从您自己的小部件中输出最终的 JSON、分页和所有内容；甚至在所有数据/配置处理后覆盖网格视图并输出 json 而不是视图。

一旦你得到 JSON 而不是 HTML，就很容易复制网格的前端，那里真的没有太多功能。

这可能并不理想，但这意味着您不必将分页、搜索和过滤的所有逻辑移动到客户端。

**TL;博士;**
覆盖您已经为其构建功能的 Yii 小部件，并使用它们输出 JSON 而不是 HTML。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T09:51:07.713

根据我的经验，您可以使用服务器端 JS 访问现有的控制器和操作（通过 cli 或 http）。我对与 node.js 集成的现有应用程序做了同样的事情。

这样做的一个好处是，您可以保留现有代码作为不完全支持您的新实现的浏览器或首先不擅长使用 javascript 的搜索机器人的后备代码。

[无论如何，我在我的模型中](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)编写了整个应用程序，我的意思是数据控制等，实际功能在命令中。如果浏览器不支持或禁用 javascript，则一切都将使用 UrlManager 和实际的控制器和操作返回到正常的锚点和页面加载方式。那些控制器一个动作简单[地调用命令](http://www.yiiframework.com/wiki/226/run-yiic-directly-from-your-app-without-a-shell/)。当然，使用助手将 json 输出转换为视图的可用数据。

无论如何，页面加载都是默认的 php 和控制器视图，因为它已经存在。

# javascript - javascript 如何 Array.prototype.push 连接

> ID：14047102
> 
> 赞同：4
> 
> 时间：2012-12-26T22:36:13.583
> 
> 标签：javascript, arrays, concatenation

我已经看到用于替换串联的 Array 的 push 方法，但我不完全确定它是如何工作的。

```
var a = [1,2,3];
var b = [4,5,6];
Array.prototype.push.apply(a,b); 
```

这如何连接到位而不是返回一个新数组？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T22:38:28.663

[`.apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)接受两个参数：

```
fun.apply(thisArg[, argsArray]) 
```

你`a`作为你的`this`对象和`b`你的参数列表传递，所以你的代码实际上是用你的参数调用`.push()`的元素`b`：

```
var a = [1, 2, 3];
a.push(4, 5, 6); 
```

现在，`.push()`只需改变您的原始数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T22:40:19.060

使用`this`. 要尝试描述它，请参阅这个 customPush 函数。

```
function customPush() {
    var i = 0,
        len = arguments.length;

    for(; i < len; i++) {
        this[this.length] = arguments[i];
    }
};

var a = [1,2,3];
var b = [4,5,6];
customPush.apply(a,b); 
```

# c++ - 如何为抽象类的未知子类分配内存

> ID：14047110
> 
> 赞同：2
> 
> 时间：2012-12-26T22:36:46.267
> 
> 标签：c++, pointers, abstract-class

我有一个抽象类，它的一个子类有一个指向抽象类的成员指针。

我必须为另一个类编写一个复制构造函数和赋值运算符。如何为复制的类的成员分配内存？

```
class Foo{
public:
    virtual ~Foo() = 0;
};

class Bar: public Foo{
private:
    int a;
public:
    ~Bar(){
        ;
    }
};

class Qwe: public Foo{
private:
    Foo *pointer;
public:
    ~Qwe(){
        delete pointer;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:41:15.010

这应该通过在抽象类（在派生类中实现）中添加一个复制（或克隆）成员函数来解决。只有类本身才能知道如何复制类的内容，所以应该这样做。

# sql - 发生数百万笔交易时如何插入最后一条记录？

> ID：14047111
> 
> 赞同：3
> 
> 时间：2012-12-26T22:36:46.863
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2012

> **可能重复：**
> [获取插入行标识的最佳方法？](https://stackoverflow.com/questions/42648/best-way-to-get-identity-of-inserted-row)

假设我第一次使用 SQL Server 2012 构建拍卖数据库。

有人创建了一个拍卖列表，它被插入到数据库中，并被赋予了一个新的唯一 AuctionID。随着拍卖的插入，还有许多其他数据需要存储并与拍卖相关联，例如图像、产品属性等。

有一个包含基本拍卖数据的表，然后是其他表来存储允许与拍卖的多对多关系的所有其他信息。

现在，在保存有关拍卖数据的其他表中，至少有一列包含 AuctionID，另一列包含一些其他信息，例如产品规格。

我实现这一点的方法（到目前为止）是首先插入基本的拍卖列表，然后让数据库给它一个新的 AuctionID。极好的。接下来我这样做：

```
SELECT TOP 1 AuctionID FROM Auction
ORDER BY Timestamp DESC 
```

这应该返回最后插入的 AuctionID，如果在插入后立即运行应该是正确的。

然后，我获取此 AuctionID，并在将附加信息片段插入另一个表时使用该值，从而创建多对多关系。中提琴！

但是，当同时发生数百万个事务时，这是正确的方法吗？所以理论上插入可能发生在彼此相隔几毫秒的时间内。在插入发生和我检索最后插入的 AuctionID 之间，我可能会得到错误的 AuctionID。

任何人都可以原谅我的新手帖子并建议最好的方法吗？我面前有很多 SQL 书籍，但找不到与此相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:54:13.227

假设这个问题没有结束，SQL Server 2012 为 SQL Server 引入了一个新的功能，称为[序列](http://msdn.microsoft.com/en-us/library/ff878058.aspx)号。它们类似于将列定义为标识，但它们只是一个全局数字分配器——只与它们自己相关联。

与身份属性相比，序列号可以提供更好的性能，因为使用它们所需的元数据操作更少，并且能够设置显式缓存而不是 IDENTITY 的硬编码 10。[参考](https://dba.stackexchange.com/questions/1635/why-are-denali-sequences-supposed-to-perform-better-than-identity-columns)

# sql-server-2008-express - Microsoft SQL Server 2008 Express 减少内存使用

> ID：14047118
> 
> 赞同：1
> 
> 时间：2012-12-26T22:38:06.607
> 
> 标签：sql-server-2008-express

我有一台运行 Windows 2008 标准 R2 sp1 和 Forefront TMG 2010 的虚拟机。TMG 2010 还安装 SQL Server 2008 Express 以记录活动。根据 perfmon，SQL Server Express 使用了大约 1 GB 的内存。我试图将缓冲池最大内存使用量减少到 100mb（下面的代码），重新启动 sql 进程，但稍后它再次上升大约 1gb 内存使用量。SQL 仅用于记录 TMG 活动，并不重要，因此我想减少 SQL 总使用量的内存占用。如果可以通过 Microsoft 实施。

```
EXEC sp_configure 'show advanced options', 1
RECONFIGURE WITH OVERRIDE
GO

EXEC sp_configure 'max server memory (MB)', 100
GO

EXEC sp_configure 'show advanced options', 0
RECONFIGURE WITH OVERRIDE 
```

# gwt - GXT3 VerticalLayoutContainer 高度错误

> ID：14047128
> 
> 赞同：0
> 
> 时间：2012-12-26T22:38:40.597
> 
> 标签：gwt, gxt

我很少说英语:(（我使用gtranslate ...）

我创建 GWT2.5(with requestfactory)+GXT3 MVP 应用程序

我的主视图是 BorderLayout

西：快捷面板（verticalLayoutContainer）

南：工具栏（状态）

北：工具栏（菜单）

我的代码：

DesktopView.ui.xml（主视图）： [http ://pastebin.com/xbeUzDwi](http://pastebin.com/xbeUzDwi)

DesktopView.java [http://pastebin.com/WguE6CVf](http://pastebin.com/WguE6CVf)

DesktopActivity.java [http://pastebin.com/adejJwu0](http://pastebin.com/adejJwu0)

关于网格视图： [http://pastebin.com/nFPrGpd1](http://pastebin.com/nFPrGpd1) 我的 MVP 自动调用 createGrid()

错误图像（分页工具栏）![在此处输入图像描述](../Images/d6c88593f05f66b6251f6229b92b572e.png)

如果我在 gridView verticalLayoutContainer.add(grid, new VerticalLayoutData(1, -1)) 中替换；=> verticalLayoutContainer.add(grid, new VerticalLayoutData(1, 1)); 错误图像（不显示网格）![在此处输入图像描述](../Images/d28d1e4e3f1e89bd853ebc7ed6d99f50.png)

我的代码有什么问题？？？？

但是如果我将代码添加到 DesktopActivity：

公共无效 onEvent(....){ 。.

```
 DesktopActivity.getContentPanel().setWidget(event.getWidget());
                                                    if (event.getWidget() instanceof VerticalLayoutContainer) {
                                                        ((VerticalLayoutContainer) event.getWidget()).onResize();
                                                    } 
```

直接调用onResize，那么添加就没有问题了...

这个 GXT3 错误，或者我在某事上犯了错误

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:38:24.423

BorderLayoutContainer 不会自动查找边缘组件的大小。您必须手动定义这些区域的大小。

```
<ui:with type="com.sencha.gxt.widget.core.client.container.BorderLayoutContainer.BorderLayoutData"
         field="northData">
    <ui:attributes size="30" />
</ui:with> 
```

这部分说容器的北部分应该是 30 像素高。对所有边缘都可以这样做。

# entity-framework - 如何使用 EF5 查询多对多是否缺少记录

> ID：14047129
> 
> 赞同：0
> 
> 时间：2012-12-26T22:38:41.033
> 
> 标签：entity-framework, oracle11g, many-to-many, ora-00904

假设纯多对多，其中主键是两个外键的组合。例如，Northwind 中的“Employee Privileges”具有 EmployeeID 和 PrivilegeID。这个 m2m 显然将Employees 表与Privilege 表相关联。

我需要使用 EF 编写一个查询，该查询返回与指定 PrivilegeID 无关的所有员工，无论它是否与其他 PrivilegeID 相关。

我有一个适用于 Sql Server 的 EF 查询，`Except()`但它不适用于 Oracle。

如果我在 t-sql 中编写查询，我会编写一个查询来过滤具有所需特权的员工特权“请参阅下面的 EmpPrivQuery”。然后，我会将 EmpPrivQuery 加入到 Employee 中，如EmployeesMissingPrivileges 中所见，以完成过滤器。

我们目前有具有关系属性的 Employee 和 Privilege 模型来创建多对多表。该项目首先使用 EF 代码来创建架构。

这可以用 EF 连接语法来完成吗？可以在不为 EmployeePrivilege 表创建实体模型的情况下完成吗？

```
EmpPrivQuery:
SELECT [Employee Privileges].[Employee ID], [Employee Privileges].[Privilege ID] 
FROM [Privileges] INNER JOIN [Employee Privileges] ON Privileges.[Privilege ID] = [Employee Privileges].[Privilege ID]
WHERE (((Privileges.[Privilege Name])="P3"));

EmployeesMissingPrivileges:
SELECT EmpPrivQuery.[Employee ID], Employees.*
FROM Employees LEFT JOIN EmpPrivQuery ON Employees.ID = EmpPrivQuery.[Employee ID]
WHERE (((EmpPrivQuery.[Employee ID]) Is Null)); 
```

> > *该块位于原始帖子中，但使问题变得模糊。保留评论上下文。* 我使用 Devart dotConnect 作为 Oracle 数据提供者。Oracle 抛出的错误是`ORA-00904: "Extent1"."EmployeeID": invalid identifier`. 在调整为 sql server 编写的代码库以针对 oracle 工作时，这是我需要解决的常见错误。在大多数情况下，我已经能够通过重写查询来解决它，以便使用 SelectMany() 将与其他表的关系从 WHERE 谓词（它很容易成为动态）移到查询的主体中。这往往会使发送到数据库服务器的查询变平，而 Oracle 似乎需要这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:07:22.127

您可以使用 EF 创建与问题中发布的基本相同的查询。我首先创建了一个具有以下属性的 poco 模型 EmployeePrivilege：int PrivilegeID 和 int EmployeeID。我没有将此添加到 DbContext。

```
var EmpPrivQuery = ctx.Privileges
                       .Where(p => p.PrivilegeName == "P3")
                       .SelectMany(p => p.Employees, (p, e) => new EmployeePrivilege{EmployeeID = e.EmployeeID, PrivilegeID = p.PrivilegeID}
                       .Distinct();

var employeesMissingPrivilege = from e in Employees
                                join epq in EmpPrivQuery
                                on e.EmployeeID equals epq.EmployeeID
                                into jointable
                                where jointable.Count()==0
                                select e; 
```

我刚刚意识到您也可以在不创建 poco EmployeePrivilege 的情况下获得相同的结果，如下所示：

```
var EmpPrivQuery = ctx.Privileges
                        .Where(p => p.PrivilegeName == "P3")
                        .SelectMany(p => p.Employees.Select(e => e.EmployeeID)
                        .Distinct();

var employeesMissingPrivilege = from e in Employees
                                join epq in EmpPrivQuery
                                on e.EmployeeID equals epq
                                into jointable
                                where jointable.Count()==0
                                select e; 
```

这两个 EF 查询都返回员工缺少针对 Sql Server 和 Oracle 的指定权限（使用 Devart 的 dotConnect for Oracle）。

我读过的许多帖子都提到了使用`DefaultIfEmpty()`左外连接来实现。上面的查询有效，但是，如果有更好的方法使用`DefaultIfEmpty()`.

# c++ - 在类中保存函数指针

> ID：14047130
> 
> 赞同：1
> 
> 时间：2012-12-26T22:39:00.643
> 
> 标签：c++

> **可能重复：**
> [如何将类成员函数作为回调传递？](https://stackoverflow.com/questions/400257/how-can-i-pass-a-class-member-function-as-a-callback)

我有两个班级 A 和 B

```
class A
{
public:
   void SetHandler(void (*p)(OMX_BUFFERHEADERTYPE*)){ Handler = p; };
private:
  void (*Handler)(OMX_BUFFERHEADERTYPE*);
} 
```

和

在BI中有一个功能

```
void B::handler(OMX_BUFFERHEADERTYPE* p){}; 
```

现在当（来自B）我打电话给

```
inst_a.SetHandler(&B::handler); 
```

我收到以下错误：

```
B.cpp:740:69: error: no matching function for call to ‘A::SetHandler(void (COMXVideo::*)(OMX_BUFFERHEADERTYPE*))’
B.cpp:740:69: note: candidate is:
A.h:161:8: note: void A::SetHandler(void (*)(OMX_BUFFERHEADERTYPE*))
A.h:161:8: note:   no known conversion for argument 1 from ‘void (B::*)(OMX_BUFFERHEADERTYPE*)’ to ‘void (*)(OMX_BUFFERHEADERTYPE*)’ 
```

我究竟做错了什么？

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:43:06.200

`&B::handler`不是函数指针，而是[指向成员函数](http://www.parashift.com/c++-faq/pointers-to-members.html)的指针。如果`B::handler`不需要 的成员`B`，您可以定义它`static`。然后`SetHandler(&B::handler)`会工作。

如果你必须有一个指向成员函数的指针，你可以将它定义为

```
void (B::*Handler)(OMX_BUFFERHEADERTYPE*); 
```

当你调用这样的成员函数时，你还需要一个指向对象的指针

```
(inst_b->*Handler)(omxbuffer); 
```

或参考

```
(inst_b.*Handler)(omxbuffer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:26:27.127

尝试这样的事情：

```
template<typename C>
class EventObject
{

    public:
        typedef void (C::*FunctionType)();

        template <typename ... T>
        EventObject(C& obj,FunctionType methode): obj (obj), callback (methode) {};

       void execute(){obj.*callback();};

    private:
        C& obj;
        FunctionType callback;
}; 
```

# java - java自定义类不可序列化

> ID：14047133
> 
> 赞同：0
> 
> 时间：2012-12-26T22:39:02.250
> 
> 标签：java, class, serialization, deserialization

我有一个似乎无法序列化的自定义类（下面的构造函数）。

```
public ObjectNode(String name, int crackLevel,ArrayList<ObjectNode> filesOnComputer) 
```

每次我尝试从对象节点的 ArrayList 序列化此类的对象时，我都会得到一个 Class cast 异常。ArrayList 不能转换为 ObjectNode

代码 - 全局变量：

```
 ArrayList<ObjectNode>a=new ArrayList<ObjectNode>();
File file = new File("/mnt/sdcard/","cheesepuff.txt"); 
```

相关代码：

```
 public void serializeFile()
{       
    a.add(new ObjectNode("Level 1 Waterwall","ww1", 1, 5));
    try { 
        Log.i("AAA","before serialize: "+a.toString());
        FileOutputStream fos = new FileOutputStream(file); 
        ObjectOutputStream oos = new ObjectOutputStream(fos); 
        oos.writeObject(a); 
        oos.flush(); 
        oos.close(); 
        Log.i("AAA","finished serialize");
        } 
        catch(Exception e) { 
        Log.i("aaa","Exception during serialization: " + e); 
        System.exit(0); 
        } 
}

public void deserializeFile()
{
    try { 
        FileInputStream fis = new FileInputStream(file); 
        ObjectInputStream ois = new ObjectInputStream(fis); 
        ObjectNode obj=(ObjectNode)ois.readObject();
        Log.i("aaa","obj: "+obj.ts());
        //a.add((ObjectNode) ois.readObject()); 
        ois.close(); 
        Log.i("aaa","after serialize: " + a); 
        } 
        catch(Exception e) { 
        Log.i("aaa","Exception during deserialization: " + 
        e); 
        System.exit(0); 
        } 
        } 
```

我最好的选择是将所有内容都变成字符串以便对其进行序列化，然后在反序列化后将字符串转换回我实际需要的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:42:25.383

您正在序列化`a`哪个是`ArrayList<ObjectNode>`.

```
oos.writeObject(a); 
```

反序列化时，您会得到准确的结果，但您尝试将其存储为`ObjectNode`

```
ObjectNode obj=(ObjectNode)ois.readObject(); 
```

你应该做

```
ArrayList<ObjectNode> obj = (ArrayList<ObjectNode>)ois.readObject(); 
```

更新：或者，正如 PeterLawrey 正确指出的那样，

```
List<ObjectNode> obj = (List<ObjectNode>) ois.readObject; 
```

（可能那时您必须重新定义`a`as `List<ObjectNode>`，但这是另一件好事）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:42:44.943

您正在编写一个 ArrayList，这意味着您在阅读它时必须将其转换为 ArrayList（或者更好的 List）。

# c++ - C/C++ - 如何通过 UDP 套接字以“数据包”形式发送视频文件？

> ID：14047135
> 
> 赞同：0
> 
> 时间：2012-12-26T22:39:09.677
> 
> 标签：c++, c, sockets, udp, packet

对于一个项目，我正在寻找模拟通信协议。我计划添加我自己的模拟丢包和什么不。但是，我想在 UDP 套接字之上构建这个模拟。这样 UDP 套接字实际上将是发送和接收文件的那个，然后我可以在此之上模拟我自己的数据包丢失和协议。我不知道该怎么做是获取一个示例（视频）文件并将其分解为数据包，然后我通过 UDP 套接字发送这些数据包，然后重新组合它们以获取视频。有人可以指导我完成我需要做的事情吗？可能是一个例子？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:50:17.627

'Boost 提供了创建 TCP 和 UDP 套接字的工具[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime4.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime4.html)提供了一个实现同步 UDP 连接的简短教程，以及除了可能有用之外，boost 还提供了更多。为简短的回答道歉，但我目前正在打电话我意识到这个例子是针对异步包的，但是这个具体的例子是针对同步版本的

# c# - WPF 动态控件

> ID：14047136
> 
> 赞同：1
> 
> 时间：2012-12-26T22:39:12.050
> 
> 标签：c#, wpf, wpf-controls

我想遍历文件夹中的所有文件，并为找到的每个 JPEG 文件动态创建图像控件。完成后，我想要一个包含动态创建的图像控件的表单（想想几乎任何照片查看软件，例如具有缩略图视图的 Picasa）。

我希望能够通过实现某种拖放事件处理程序来重新排序表单上这些动态创建的图像控件。我不知道我会遇到多少图像，因此无法为每个可能存在或不存在的图像控件硬编码事件处理程序。所以我正在寻找一种将事件处理程序动态添加到动态创建的控件的方法。

下面代码中使用的方法几乎就是我要找的。下面方法的问题是，如果我不知道控件的名称，我就无法对事件处理程序进行硬编码。

```
public partial class RoutedEventAddRemoveHandler {
  void MakeButton(object sender, RoutedEventArgs e)
  {
      Button b2 = new Button();
      b2.Content = "New Button";
      // Associate event handler to the button. You can remove the event  
      // handler using "-=" syntax rather than "+=".
      b2.Click  += new RoutedEventHandler(Onb2Click);
      root.Children.Insert(root.Children.Count, b2);
      DockPanel.SetDock(b2, Dock.Top);
      text1.Text = "Now click the second button...";
      b1.IsEnabled = false;
  }
  void Onb2Click(object sender, RoutedEventArgs e)
  {
      text1.Text = "New Button (b2) Was Clicked!!";
  } 
} 
```

注意我正在寻找 C# 代码而不是 XAML 的解决方案。这是使用这样的代码添加控件的解决方案：

```
// What I want
Fields.Add(new Field() { Name = "Username", Length = 100, Required = true }); 
```

不是这样的：

```
// What I do not want
<TextBox Width="100" Canvas.Left="50" Canvas.Top="20" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:36:48.003

我不会在代码隐藏中做太多事情。只为获取文件。我会得到一个 ObservableCollection，其中字符串是文件的全名。然后我会将它呈现在 ListBox 或 ListView 中，并将 ItemSource 绑定到集合并为控件定义一个好的 ItemTemplate。在模板中，您可以使用转换器为模板中的图像创建 å Source。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:19:51.917

添加一个小示例只是为了节省您在 WPF 代码隐藏中加载图像的痛苦。

```
void OnButtonClick(object sender, RoutedEventArgs routedEventArgs)
{
    var files = Directory.GetFiles(@"C:\img");
    foreach (var file in files)
    {
        var bitmap = new BitmapImage();
        bitmap.BeginInit();
        bitmap.UriSource = new Uri(file);
        bitmap.CacheOption = BitmapCacheOption.OnLoad;
        bitmap.EndInit();
        var img = new Image { Source = bitmap };
        img.MouseDown += OnImageMouseDown;
        //Add img to your container
    }
}

void OnImageMouseDown(object sender, MouseButtonEventArgs e)
{
    var img = sender as Image;
    //Operate
} 
```

# google-maps - 谷歌地图嵌入最小尺寸要求？

> ID：14047138
> 
> 赞同：1
> 
> 时间：2012-12-26T22:39:25.697
> 
> 标签：google-maps, google-maps-embed

我目前将 iframe 大小设置为 190px x 190px。是否有谷歌不会显示地图的最小尺寸？谷歌不会显示地图的每个页面是否有最大的地图？

[这里](http://mgoode.com/index.php?option=com_mls&view=list)的例子。代码在那里，它只是不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:00:44.360

你检查了javascript控制台吗？我看到看起来像是在解释问题的错误：

> Uncaught TypeError: Object [object Object] has no method 'getElements' /index.php?option=com_mls&view=list (1):1
> 
> 未捕获的类型错误：对象 [对象对象] 没有方法 'getProperty' /index.php?option=com_mls&view=list (1):1
> 
> 16 拒绝显示文档，因为 X-Frame-Options 禁止显示。

看起来您正试图将谷歌地图放在 iframe 中，而不是使用它们提供的嵌入式代码。

> 粘贴 HTML 以嵌入网站

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q=719+NORTH+CHARLES++BELLEVILLE&amp;ie=UTF8&amp;hq=&amp;hnear=719+N+Charles+St,+Belleville,+St+Clair,+Illinois+62220&amp;t=h&amp;z=14&amp;ll=38.521293,-89.978031&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/maps?q=719+NORTH+CHARLES++BELLEVILLE&amp;ie=UTF8&amp;hq=&amp;hnear=719+N+Charles+St,+Belleville,+St+Clair,+Illinois+62220&amp;t=h&amp;z=14&amp;ll=38.521293,-89.978031&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

# php - 将 const 添加到 PHP 中现有接口的最佳实践是什么？

> ID：14047141
> 
> 赞同：0
> 
> 时间：2012-12-26T22:39:29.430
> 
> 标签：php, symfony, interface

我正在使用 Symfony2 的 VoterInterface 来实现[选民](http://symfony.com/doc/2.0/cookbook/security/voters.html)来确定用户访问权限。

该接口声明了三个 const 变量：

```
interface VoterInterface
{
    const ACCESS_GRANTED = 1;
    const ACCESS_ABSTAIN = 0;
    const ACCESS_DENIED  = -1;
... 
```

我想添加第四个名为 ACCESS_READONLY 的只读访问权限，但据我所知，无法在 PHP 中“继承”接口。

我认为更改界面不是一个好主意，因为它是 Symfony2 供应商库的一部分。一个选项是将接口复制到我自己的命名空间并进行修改。但是，我希望能以更好的方式来完成这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:46:02.237

你能不能扩展一个接口。例如。

```
interface abc extends VoterInterface
{
    const ACCESS_READONLY = 1;
} 
```

然后执行 abc。我还没有尝试过，但也许值得一试。

# c# - 创建新的自定义项目模板类别在 Visual Studio 2010 中无法按预期工作

> ID：14047142
> 
> 赞同：0
> 
> 时间：2012-12-26T22:39:31.177
> 
> 标签：c#, visual-studio-2010, project-template

我按照msdn的这篇文章中提到的步骤： [创建新的自定义项目模板类别](http://msdn.microsoft.com/en-us/library/y3kkate1.aspx)

但它不会创建我的自定义类别，而是在根类别下显示自定义项目模板，即 Visual C#。

有谁可能在“新项目”对话框的“Visual C#”下成功创建了一个子类别？

我想要这样的东西，其中**“我自己的模板”**应该在左窗格中，并且应该在右窗格中显示它下面的所有自定义模板：

![在此处输入图像描述](../Images/cdce823caa9737c2b98f59cfddbe7521.png)

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:02:13.230

我以前试过这个，但没有得到它的工作。但现在它就像一个魅力。这是真正简单易懂的链接： [VS Custom Templates](http://visualstudiomagazine.com/Articles/2012/08/20/Visual-Studio-custom-templates.aspx?Page=1)

我错过`Uncheck the option to "Automatically import the template into Visual Studio" for better control of how the template will appear in the Visual Studio.`了这篇文章第二页中提到的[我猜]。

# c# - 为什么此 CollectionAssert.AreEquivalent() 测试失败？

> ID：14047147
> 
> 赞同：5
> 
> 时间：2012-12-26T22:40:14.400
> 
> 标签：c#, linq, unit-testing

正如在[这个问题](https://stackoverflow.com/questions/14045758/having-trouble-with-linq-left-join-on-listfileinfo/)中所描述的，我正在研究一种方法，该方法从一个返回的元素`List<FileInfo>`在另一个中不存在`List<FileInfo>`。我已经实现了 Nawfal 的解决方案，如下所示：

```
public List<FileInfo> SourceNotInDest(List<FileInfo> SourceFiles, List<FileInfo> DestFiles)
{
 var notInDest = SourceFiles.Where(c => !DestFiles.Any(p => p.Name == c.Name)).ToList();
 return notInDest;
} 
```

我的 SourceFiles 数据集是：

```
u:\folder1\a.txt
u:\folder1\b.txt
u:\folder1\c.txt
u:\folder1\d.txt 
```

目标文件是：

```
u:\folder2\a.txt
u:\folder2\b.txt
u:\folder2\c.txt 
```

当我单步执行代码并检查列表的值时，这似乎返回了预期的结果。但单元测试失败，代码如下：

```
public void SourceNotInDestTest()
    {
        //arrange
        FileListComparer flc = new FileListComparer(); //class that has the list compare method
        FolderReader fr = new FolderReader(); //class for getting FileInfo from folder
        List<FileInfo> expectedResult = new List<FileInfo>();
        expectedResult.Add(new FileInfo(@"U:\folder1\d.txt"));
        List<FileInfo> SourceFiles = fr.fileList(@"U:\folder1");  //gets the FileInfo for each file in the folder
        List<FileInfo> DestFiles = fr.fileList(@"U:\folder2");

        //act
        List<FileInfo> result = flc.SourceNotInDest(FTPFiles, LocalFiles);

        //assert
        CollectionAssert.AreEquivalent(result, expectedResult);
    } 
```

即使`result`和`expectedResult`具有相同的内容——两个列表都有一个元素具有相同的文件路径和相同的其他属性——测试失败并显示以下消息：

```
CollectionAssert.AreEquivalent failed. The expected collection contains 1 occurrence(s)
of <U:\folder1\d.txt>. The actual collection contains 0 occurrence(s). 
```

`expectedResult`但是，确实发生了`U:\folder1\d.txt`。我在想问题可能是我正在比较两个对象的内存地址而不是这些对象的内容，但我认为这`AreEquivalent()`是在比较属性。不是这样吗？

编辑：根据关于比较属性而不是地址的建议，我改用了这个 Assert，它允许测试通过：

```
foreach (FileInfo fi1 in result)
    {
     Assert.IsNotNull(expectedResult.Find(fi2 => fi2.FullName == fi1.FullName));
    }
foreach (FileInfo fi1 in expectedResult)
    {
     Assert.IsNotNull(result.Find(fi2 => fi2.FullName == fi1.FullName));
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T22:48:16.630

可能是因为`FileInfo`是引用类型，默认比较器只检查两个元素的地址是否相等。由于`FileInfo`是密封的，因此您不能从中派生并覆盖相等比较器。在我看来，最好的选择是编写自己的集合比较器方法（因为您不能将`IEqualityComparer`实例传递给`CollectionAssert.AreEquivalent`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T22:49:48.970

测试失败，因为您的集合中有不同的对象。如果您有 2 个`FileInfo`引用同一文件的类实例，并且您调用`instanceA.Equals(instanceB)`，则结果为`false`.

如果您可以将代码更改为使用字符串而不是`FileInfo`s，那么它将按您的预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T19:49:38.117

在我看来，我可以建议 2 种比你的更好的方法 :)

1.  选择 2 个文件名集合并比较这些集合：

    ```
    CollectionAssert.AreEquivalent(
        result.Select(fi => fi.FullName).ToArray(),
        expectedResult.Select(fi => fi.FullName).ToArray()
    );
    // ToArray() is added just for better output when test fails. 
    ```

2.  使用用户定义的比较器和比较`FileInfo`列表：

    ```
    Assert.That(
        result,
        Is
            .EquivalentTo(expectedResult)
            .Using((Comparison<FileInfo>)((fi1, fi2) => fi1.FullName.CompareTo(fi2.FullName)))
    ); 
    ```

在以下情况下，您当前使用两个 foreach 循环的实现不会失败：

```
result =
    u:\folder1\a.txt
    u:\folder1\a.txt

expectedResult =
    u:\folder1\a.txt 
```

是的，文件列表似乎不是真正的情况，但通常用两个循环替换`AreEquivalent()`/并不是一个好主意。`Is.EquivalentTo()`

# jquery - 在日期选择器中合并月份

> ID：14047148
> 
> 赞同：0
> 
> 时间：2012-12-26T22:40:17.440
> 
> 标签：jquery, css, jquery-ui-datepicker

使用 jquery ui datepicker，

1.  我可以同时显示和合并两个月吗？
2.  我可以设置滑动顶部（向后）-向下（向前）的月份吗？

这是我需要的一个例子：

![在此处输入图像描述](../Images/bcb702e6a4cc713a917a3b7eb656b434.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:45:12.847

使用`numberOfMonths`字段，您可以指定一次显示多个月。在此处查看演示：http: [//jqueryui.com/datepicker/#multiple-calendars](http://jqueryui.com/datepicker/#multiple-calendars)

你可以这样设置：

```
$('#datepicker').datepicker({
    numberOfMonths: [2,1]
}); 
```

关于在另一个下方显示它也应该有一些字段。在这里查看它的文档：http: [//api.jqueryui.com/datepicker/](http://api.jqueryui.com/datepicker/)

# php - Xdebug 已安装，但未在 Xampp 的 Phpinfo 中显示

> ID：14047152
> 
> 赞同：2
> 
> 时间：2012-12-26T22:40:24.217
> 
> 标签：php, eclipse, xampp, xdebug

我在 Mac Mountain Lion osX 10.8.2 上有最新的 Xampp 和 Php 5.3。我刚刚安装了 Xdebug 并在 php.ini 中进行了配置。我从此链接下载[并](http://xdebug.org/wizard.php)按照说明进行操作。还将以下条目放入 php.ini

```
[Xdebug]
zend_extension=”/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/xdebug.so”
xdebug.remote_port = 9000
xdebug.profiler_enable = 1
xdebug.profiler_output_dir = "/Applications/XAMPP/xamppfiles/temp"
xdebug.remote_handler = "dbgp"
xdebug.remote_host = "localhost"
xdebug.remote_enable = On
xdebug.trace_output_dir = "/Applications/XAMPP/xamppfiles/temp" 
```

php -m 显示 Xdebug 模块，但 phpinfo() 不显示 Xdebug。阅读问题的解决方案[为什么 xdebug 没有出现在 phpinfo()](https://stackoverflow.com/questions/5503859/why-is-xdebug-not-showing-up-in-phpinfo)中和[没有 xdebug 出现在 phpinfo() 中](https://stackoverflow.com/questions/3793390/no-xdebug-in-phpinfo)，它对我不起作用。**注意：**我已经多次从 Xampp Control 重新启动我的 Apache。

建议

1.  有什么办法可以纠正这个？
2.  Xdebug 在我的 Eclipse Studio 上还能为我工作吗？
3.  如何向 httpd 提供访问 Moutain Lion 上的 Xdebug 的权限？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T01:26:37.617

**确保 zend_extension 路径确实存在于您的机器上。**

您的特定路径似乎无效。

```
zend_extension=”/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/xdebug.so” 
```

我犯了从一些教程中复制和粘贴路径的错误，但我的实际上位于这条路径上：

```
/Applications/XAMPP/xamppfiles/lib/php/extensions/no-debug-non-zts-20121212/xdebug.so 
```

另外，请确保您正在编辑`/Applications//XAMPP/xamppfiles/etc/php.ini`，这是与 XAMPP 关联的 php.ini。这很容易与您机器上可能存在的 /etc/php.ini 混淆。

这是我添加到我的 php.ini 以供参考的内容：

```
[xdebug]
zend_extension="/Applications/XAMPP/xamppfiles/lib/php/extensions/no-debug-non-zts-2012121/xdebug.so"
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:02:00.690

所以这更像是山狮的一个港口问题。默认情况下，Mac 将 9000 分配给防火墙的东西，并且它一直为一个或另一个东西分配各种端口。我使用 Mac 上的 Network Utility Port Scan 来检查可用端口。此外，运行下面描述的 php 脚本可能会提供一些调试信息，如此[处提供](http://allcodeverything.blogspot.com/2012/07/code-debugging-with-xdebug-and-eclipse.html)

[这个](https://stackoverflow.com/questions/6092838/can-i-link-the-zend-pdt-eclipse-to-a-browser-action/6180742#6180742)Stack Overflow Question 中详细的配置 Eclipse 部分帮助最大。

# ruby-on-rails - TinyMCE：在 Rails 中使用 maxchars 插件

> ID：14047156
> 
> 赞同：1
> 
> 时间：2012-12-26T22:40:43.087
> 
> 标签：ruby-on-rails, tinymce

我有一个使用 TinyMCE 的 Rails 应用程序，通过 TinyMCE-Rails gem。我正在尝试使用 maxchars 插件来统计字数。我已将插件添加到 config/tinymce.yml

```
plugins:
  - fullscreen
  - maxchars 
```

我已将 max_chars 和 max_chars_indicators 添加到我的视图中。

```
<%= simple_form_for @project |f| %>
  <%= f.input :overview, input_html: { :class => "tinymce", :rows => 70, :cols => 140 } %>
  <%= tinymce max_chars: 6000, max_chars_indicator: "characterCounter" %>
  <div id="characterCounter">

   </div>

   <div class="form-actions add-top">
     <hr>
     <p>
       <%= f.button :submit, :class => 'inline-block large_button add-bottom' %>
     </p>
    </div>
<% end %> 
```

但是现在编辑器甚至没有出现。在添加这个插件时我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:33:35.777

这个问题的复杂解决方案：必须实际阅读文档！（太离谱了，对吧？！）

我忽略了实际下载插件文件。我创建了一个目录，`app/assets/javascripts/tinymce/plugins/`并弹出了包含必要 JS 文件的文件夹。一旦我启动我的服务器，一切都很好。

# c++ - 我的 C++ 游戏架构

> ID：14047165
> 
> 赞同：7
> 
> 时间：2012-12-26T22:41:30.330
> 
> 标签：c++, oop, architecture, interface, game-engine

我是一个相当有经验的程序员，但我对 C++ 中的 OOP 架构和设计还是比较陌生。我的大部分经验是使用 C# 和 Java。我最近尝试用 C++ 编写一个简单的游戏引擎。我将 SDL 用于图形。在这篇文章中，我想讨论我的架构并获得一些反馈。特别是，我遇到了一个需要帮助的设计问题。所以，这里是：

*   在我的主要功能中，我初始化了所有用于绘制到屏幕等的 SDL 内容。
*   然后我实例化所有我打算使用的对象：地板、墙壁、播放器等。
*   接下来我开始主循环。该循环执行每个对象的移动、碰撞检测和碰撞处理功能，并重新绘制它们。
*   主循环一直运行直到应用程序退出，每次迭代绘制一帧。

我的问题是这样的：我尝试做一种界面风格的设计。它涉及一系列允许每个对象实现行为的抽象基类。例如，如果我希望一个对象是可移动的，它必须继承自可移动基类，该基类包含一个名为的虚函数`move()`和一些位置坐标。如果我希望它是可碰撞的，则该对象将从可碰撞抽象类继承，该抽象类包含虚函数`checkCollision()`和`handleCollision()`hitbox 成员变量。像播放器这样的对象继承自这两个基类以及其他几个基类。

只要我在主循环中手动完成所有操作，这就足够了。我只能说：

```
player.move();
player.checkCollision();
player.handleCollision();
player.draw(). 
```

没关系。但我希望能够在主循环中有一个向量或通用对象数组并执行以下操作：

```
for each object in vector
    if object is of type movable
        object.move();
    if object is of type collidable
        object.checkCollision(); 
```

我以为我可以通过动态投射来完成这一点，但我真的什么都想不出来。我已经尝试将它们存储为 void 指针，但这并不像我想要的那样工作。我一直在阅读我可能会尝试的视频游戏的游戏对象组件架构，但我真的很想挽救我已经写过的东西。我认为这是一个很好的学习机会。如果有人有任何想法，我将不胜感激。我的架构与其他简单的游戏引擎设计相比如何？我的界面架构有意义还是完全靠不住？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T23:12:52.730

如果您使用 C++ 工作，请尝试**SFML**，它比**SDL**更快，如果您了解**OpenGL**，您也可以使用它。
对于您的问题：

```
class Entity {
     //constructor and other stuff
     void virtual exec() =0; ///<= pure virtual method
};

class Movable : Entity {
    void move(); //do somthing
    void exec() {move();};
};

class Collidable : Entity {
   void col(); //do your job
   void exec(){col();};
};

std::vector<Entity*> e_v;
///push some instance
for (Entity* e : e_v)
   e->exec(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:39:22.360

在基类中使用模板方法模式和非抽象空虚函数怎么样？

```
class Entity
{
    void update()
    {
        move();
        checkCollision();
    }

    virtual void move() {}
    virtual void checkCollision() {}
};

class Movable : public virtual Entity
{
    virtual void move() {}   // Stuff
};

class Collidable : public virtual Entity
{
    virtual void checkCollision() {}   // Stuff
}; 
```

# c++ - 为一个类实现多个顺序关系？

> ID：14047166
> 
> 赞同：-2
> 
> 时间：2012-12-26T22:41:34.187
> 
> 标签：c++

哪种方法最好只为一个类实现多个顺序关系？[我对策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)有一个想法，但我不确定这是一个好主意。如果没有最好的方法，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:52:45.163

创建一个仿函数类并使用您要使用的顺序关系初始化一个成员。已经`operator()`使用成员来决定两个操作数的顺序。

```
class Ordering
{
public:
    Ordering(int method) : _method(method) {}
    bool operator()(const MyObject & first, const MoObject & second) const
    {
        switch(_method)
        {
            case 0:
                return first.name < second.name;
            case 1:
                return first.age < second.age;
            // ...
        }
    }
    int _method;  // an enum would be better
};

std::sort(myobjs.begin(), myobjs.end(), Ordering(selected_method)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:19:32.800

我认为 Strategy 在这里是一种更好的方法，而且我不太确定 switch 结构是否是个好主意（想象一下，一个 switch 中有 1000 个比较方法......太重了，不是吗？）

所以让A，一个需要方法比较的类。

我建议为每个方法创建一个类，哪个实例将是 A 的组件。

例如 ：

```
class A{
    private:
    //Some attributes
    Comparator<A> comp_;

    public:
    //Some methods (including constructor)
    bool operator()(const MyObject & first, const MoObject & second) const
    {
        return comp_.compare(first,second);
    }
     void setComparator(Comparator<A>& comp){
        comp_ = comp;
    }
}

//Forgot the syntax about template. So there is a template with one parameter
class Comparator{
     public:
     //Constructor

     //To overwrite on subclasses
     virtual bool compare(T& first, T& second) = 0;

} 
```

使用该配置，您可以轻松添加方法，而无需修改 A，只需在程序执行的任何时刻设置正确的比较器即可。

# objective-c - 声明和访问 BOOL 类方法

> ID：14047176
> 
> 赞同：3
> 
> 时间：2012-12-26T22:42:46.180
> 
> 标签：objective-c, xcode, class, methods

[Mehul 定义了这种方法。](https://stackoverflow.com/questions/13699256/)

```
+(BOOL)isCameraDeviceAvailable
{
    BOOL isCameraAvailable=NO;
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        if([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront] || [UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceRear])
            isCameraAvailable = YES;
    }
    return isCameraAvailable;
} 
```

但我无法正确声明它并收到错误

```
Instance method '-isCameraDeviceAvailable' not found (return type defaults to 'id') 
```

当我声明如下。

```
+ (BOOL)isCameraDeviceAvailable; 
```

然后以这种方式使用它

```
if([self isCameraDeviceAvailable]){
 } 
```

我想我需要在不同的地方或以不同的方式声明它。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:45:46.573

```
[self isCameraDeviceAvailable] 
```

是***实例*方法调用**，不是***类*方法调用**。

你必须像这样使用它：

```
[MyClass isCameraDeviceAvailable] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T22:55:27.260

```
+(BOOL)isCameraDeviceAvailable 
```

行首`+`的 使 this 成为一个类方法，这意味着您只能发送`isCameraDeviceAvailable`到*该类*。如果您想将该方法与该类的*实例*`-`一起使用，则需要使用 a而不是`+`：

```
-(BOOL)isCameraDeviceAvailable 
```

或者，正如 Kashiv 解释的那样，您可以通过发送`isCameraDeviceAvailable`到类来使用您拥有的方法。有关更多信息，请参阅[*Objective-C 类也是对象*](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/DefiningClasses/DefiningClasses.html#//apple_ref/doc/uid/TP40011210-CH3-SW18)。

# ruby-on-rails-3 - 在 Rails 中实现“复杂”url 的最佳实践

> ID：14047179
> 
> 赞同：1
> 
> 时间：2012-12-26T22:43:12.077
> 
> 标签：ruby-on-rails-3

我正在开发一个企业应用程序，并希望使用具有长/非平凡 id 的 url，而不是常规的增量 id。

例如，我想要[http://mysite.com/users/23lkfjls0934](http://mysite.com/users/23lkfjls0934)或[http://mysite.com/companies/23lkfjls0934](http://mysite.com/companies/23lkfjls0934)而不是[http://mysite.com/users/3](http://mysite.com/users/3)或[http:// /mysite.com/companies/company-name](http://mysite.com/companies/company-name)

实现此结果要遵循哪些步骤（迁移、关联、模型...）以及在构建此功能时要记住哪些重要事项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:05:35.773

您可以使用[friendly_id](https://github.com/norman/friendly_id) gem 来做相反的事情：使 URL 尽可能不友好:)

向您的表添加一个新字段，它将存储您的长密钥。然后像这样使用它：

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, use: :long_random_key
end 
```

`before_create`例如，您可以在挂钩中初始化这个长键。

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, use: :long_random_key

  before_create :generate_long_random_key

  private
  def generate_long_random_key
    self.long_random_key = SecureRandom.hex(32)
    # TODO: Make sure it's unique
  end
end 
```

# java - Beagleboard/Angstrom 冻结串口应用

> ID：14047180
> 
> 赞同：1
> 
> 时间：2012-12-26T22:43:14.807
> 
> 标签：java, serial-port, freeze, beagleboard, angstrom-linux

我有一个在 Beagleboard-xM/Angstrom 上运行的 java 应用程序，但是当串行通信开始时，一段时间后，应用程序冻结，我必须取消进程（终端上的 ctrl + c）。我已经尝试在 C 中做同样的事情，但它也冻结了。

在 Java 中，我使用的是 RxTx 库，在另一个论坛中有人告诉我 Raspberry Pi 也有类似的问题。有人可以给我一些建议吗？有没有人已经发现了这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-06T22:20:26.357

很长一段时间过去了...如果有人发现这个问题，使用usb电缆而不是串行电缆为我解决了...也许问题出在beagleboard硬件上，正如我在一些论坛上看到的关于raspberryPy硬件问题的评论导致这种错误。我希望它可以帮助某人。

# css - 滚动菜单不适用于一页布局

> ID：14047181
> 
> 赞同：0
> 
> 时间：2012-12-26T22:43:18.977
> 
> 标签：css, layout

我已经对此进行了一段时间的故障排除，但没有运气，所以我在这里询问以防有人倾向于看一看。先感谢您。

在这个网站上：

[http://www.oldsaltmerchants.com/](http://www.oldsaltmerchants.com/)

我有一个带有菜单的单页布局，可以将页面滚动到正确的位置。一旦页面滚动到顶部，导航菜单就会从窗口的顶部边缘下拉。黄色条应该跨越页面的整个宽度，但它隐藏在边缘区域中，仅显示在“内容”区域中。

如果有人感兴趣，我真的可以用另一双眼睛。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:01:22.553

问题在于您的`#menu.pinned ul`CSS 选择器的`width: 910px`属性。删除它，它应该显示得很好。

![在此处输入图像描述](../Images/4ad740293c8df4d7eec88f03af2de87e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:55:18.440

可能不是正确的答案，但可能会提供一些线索。我将宽度更改为 100% 并添加`text-align: center`

![css](../Images/0dde58a0aee8e32c0450cedeefddcc11.png)

# pointers - 字节数组指针

> ID：14047182
> 
> 赞同：0
> 
> 时间：2012-12-26T22:43:29.033
> 
> 标签：pointers, vb6, casting

所以，我基本上是想知道如何把这个

```
BYTE *b
func(b); 
```

当 b 是一个已经被重新调整的动态数组时，进入 VB6。可不可能是

```
func(b) 
```

或者

```
func(VarPtr(b)) 
```

谢谢，iDomo。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:47:28.153

你可以两者都做，真的。

但简单的方法是`func(b)`，`func`类似的东西在哪里`func(b() as byte)`。然后`b`通过引用传递数组。

# ios4 - Twitter API：如何从个人资料所有者关注的用户那里获取最近的推文

> ID：14047184
> 
> 赞同：0
> 
> 时间：2012-12-26T22:43:34.153
> 
> 标签：ios4, twitter

我的问题可能看起来有点复杂，但让我澄清一下。使用 Twitter 的 Api 系统，我能够获得特定用户的 20 条最新推文。然而，这并不是我真正想要的。当我正在制作一个 iPhone 应用程序时，用户看到他关注的其他人的最新推文似乎比他自己撰写的推文更有趣。那么，有没有办法从某个特定人关注的用户那里获得 20 条最新的推文？如果问题不够清楚，请告诉我，以便我澄清，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:57:06.997

您最多可以从用户的关注者那里获得 800 条推文

[https://api.twitter.com/1.1/statuses/home_timeline.json](https://dev.twitter.com/docs/api/1.1/get/statuses/home_timeline)

例如，如果您想要 20 条推文，但没有回复，请使用

```
https://api.twitter.com/1.1/statuses/home_timeline.json?count=20&exclude_replies=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:35:01.153

尝试获取关注者的 ID [https://dev.twitter.com/docs/api/1.1/get/followers/ids](https://dev.twitter.com/docs/api/1.1/get/followers/ids) 应该类似于... /followers/ids.json?screen_name=xxx 或者可能是 /followers/ ids.json?user_id=xxx

然后，从这些 id 获取推文 [https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

/statuses/user_timeline.json?screen_name=twitterapi&count=20

# ios - 在原生 iOS 应用中启用自动播放

> ID：14047185
> 
> 赞同：3
> 
> 时间：2012-12-26T22:43:36.337
> 
> 标签：ios, html, video, uiwebview, autoplay

我正在尝试在我正在开发的本机 iOS 应用程序中启用视频自动播放。我的公司将在明年开发一个成熟的应用程序，但我的任务是构建一个快速原型。[这个原型的目的是为我们提供一个快速的工具来使用通过UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)提供的自动播放功能。

只是为了画更多的图片。我们当前的网站用户体验最适合自动播放功能，我们的许多用户都在我们的移动版网站上要求使用此功能。目前，我们确实提供了一个稍微不同的移动网站，但您可能知道 Apple（由于数据问题）已禁用通过 JS/HTML5 等的自动播放。这就是我们希望在不远的将来。

所以我是 Objective-C 和 iOS 开发的新手，但是在阅读了大约半天的 Apple 开发人员文档后，我已经设法将我们的网站加载到 UIWebView 中。然后我设置`mediaPlaybackRequiresUserAction = NO`. 但是，我没有在 iOS 模拟器中看到自动播放功能。

在此处查看更多详细信息：

> mediaPlaybackRequiresUserAction 一个布尔值，用于确定 HTML5 视频是可以自动播放还是要求用户开始播放。
> 
> @property(nonatomic) BOOL mediaPlaybackRequiresUserAction 讨论 iPad 和 iPhone 上的默认值都是 YES。
> 
> 可用性 适用于 iOS 4.0 及更高版本。在 UIWebView.h 中声明

这是我的 ViewController.h 的内容：

```
#import <UIKit/UIKit.h>    
@interface myCompanyViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIWebView *webView;

@end 
```

这是我的 ViewController.m：

```
#import "myCompanyViewController.h"

@interface myCompanyViewController ()

@end

@implementation myCompanyViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSString *fullURL = @"http://www.mycompany.com";
    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [_webView loadRequest:requestObj];
    _webView.allowsInlineMediaPlayback = YES;
    _webView.mediaPlaybackRequiresUserAction = NO;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

那么我错过了什么？感谢您提供的任何帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T23:30:24.037

发现这个stackoverflow：

“Apple 已决定通过脚本和属性实现禁用 iOS 设备上的视频自动播放。

在 Safari 中，在 iOS 上（适用于所有设备，包括 iPad），用户可能在蜂窝网络上并按数据单位收费，预加载和自动播放被禁用。在用户启动数据之前，不会加载任何数据。” - Apple 文档。

苹果的保姆状态！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T07:44:16.437

使用它来启用 webview 的自动播放

```
NSString *Str_embbed_video = [NSString stringWithFormat:@"\
                              <html><head>\
                              <style type=\"text/css\">\
                              body {\
                              background-color: black;\
                              color: transparent;\
                              }\
                              </style>\
                              </head><body style=\"margin:0\">\
                              <video width=\"%0.0f\" height=\"%0.0f\" controls autoplay=\"true\" poster=\"%@\" webkit-playsinline\> <source src=\"%@\" type=\"video/mp4\" ></video>\
                              </body></html>",webviewFrame.size.width,webviewFrame.size.height,imageurlString,videoUrlString];

[webView loadHTMLString:Str_embbed_video baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

# haskell - 将字符串的 UTF-8 编码存储在 ByteString 中

> ID：14047190
> 
> 赞同：8
> 
> 时间：2012-12-26T22:44:09.487
> 
> 标签：haskell, utf-8, bytestring

所以我想访问字符串的 UTF-8 编码的各个字节。

我尝试使用[`Data.ByteString.Char8.pack`](http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString-Char8.html#v:pack)，但这似乎只是将其截断为每个字符的最后一个字节：

```
ghci> Char8.pack "\945\946\947" 
"\177\178\179" 
```

如果我可以从文件中读取字符串，这不是问题：

```
ghci> Prelude.writeFile "temp.txt" "\945\946\947" >> Char8.readFile "temp.txt"
"\206\177\206\178\206\179" 
```

但我想要一种`String -> ByteString`无需截断的纯粹转换方式，而[hoogle 并不是很有帮助](http://www.haskell.org/hoogle/?hoogle=String+-%3E+ByteString)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T23:26:51.760

您可以使用[`Data.ByteString.UTF8.fromString`](http://hackage.haskell.org/packages/archive/utf8-string/latest/doc/html/Data-ByteString-UTF8.html#v%3afromString)：

```
ghci> import Data.ByteString.UTF8 as BSUTF8
ghci> :t BSUTF8.fromString
BSUTF8.fromString :: String -> ByteString
ghci> BSUTF8.fromString "\945\946\947"
"\206\177\206\178\206\179" 
```

或者，您可以[`encode{Strict,Lazy}ByteString`](http://hackage.haskell.org/packages/archive/encoding/latest/doc/html/Data-Encoding.html#v%3aencodeStrictByteString)从[`encoding`](http://hackage.haskell.org/package/encoding)包中使用，它提供了比 UTF-8 更多的编码：

```
ghci> import Data.Encoding as E
ghci> import Data.Encoding.UTF8
ghci> E.encodeStrictByteString UTF8 "\945\946\947"
"\206\177\206\178\206\179" 
```

# c++ - typedef 结构中的重载运算符 (c++)

> ID：14047191
> 
> 赞同：42
> 
> 时间：2012-12-26T22:44:13.510
> 
> 标签：c++, struct, typedef, operator-keyword

我想创建一个名为`pos`（从位置）存储坐标 x 和 y 的 typedef 结构。我正在尝试为此结构重载一些运算符，但它无法编译。

```
typedef struct {
    int x;
    int y;

    inline pos operator=(pos a) {
        x=a.x;
        y=a.y;
        return a;
    }

    inline pos operator+(pos a) {
        return {a.x+x,a.y+y};
    }

    inline bool operator==(pos a) {
       if (a.x==x && a.y== y)
          return true;
       else
          return false;
    }
} pos; 
```

我也想知道这之间的区别：

```
inline bool operator==(pos a) {
    if(a.x==x && a.y== y)
       return true;
      else
       return false;
} 
```

和这个：

```
bool operator==(pos a) const {
      if(a.x==x && a.y== y)
         return true;
      else
         return false;
} 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-26T23:24:13.687

您的声明及其成员的细分有些乱七八糟：

**去除`typedef`**

这`typedef`既不是必需的，也不是 C++ 中的类/结构声明所需要的。您的成员不知道`pos`as-written 的声明，这是您当前编译失败的核心。

改变这个：

```
typedef struct {....} pos; 
```

对此：

```
struct pos { ... }; 
```

* * *

**删除多余的内联**

您在类定义本身中声明*和*定义您的成员运算符。`inline`只要您的实现保留在其当前位置（类定义），就不需要该关键字

* * *

**`*this`在适当的地方返回引用**

这与您的实现中的大量复制构造有关，如果没有充分的理由，则不应这样做。它与以下的表达思想有关：

```
a = b = c; 
```

这分配`c`给`b`，然后将结果值`b`分配给`a`。这**不**等同于以下代码，与您的想法相反：

```
a = c;
b = c; 
```

因此，您的赋值运算符应该这样实现：

```
pos& operator =(const pos& a)
{
    x = a.x;
    y = a.y;
    return *this;
} 
```

即使在这里，也不需要这样做。默认的复制分配操作员将免费为您执行上述操作（和代码！哇！）

***注意***：有时应避免上述情况以支持**复制/交换习语**。虽然在这种特定情况下不需要，但它可能看起来像这样：

```
pos& operator=(pos a) // by-value param invokes class copy-ctor
{
    this->swap(a);
    return *this;
} 
```

然后实现一个swap方法：

```
void pos::swap(pos& obj)
{
    // TODO: swap object guts with obj
} 
```

您这样做是为了利用类 copy-ctor 进行复制，然后利用异常安全交换来执行交换。结果是传入的副本离开（并破坏）了您的对象的旧内脏，而您的对象承担了那里的所有权。[在此处阅读更多复制/交换习语](https://stackoverflow.com/a/3279550/1322972)，以及其中的优缺点。

* * *

**适当时通过 const 引用传递对象**

您对所有成员的所有输入参数当前正在复制调用时传递的任何内容。虽然这样的代码可能很简单，但对于较大的对象类型来说可能*非常昂贵。*这里给出一个例子：

改变这个：

```
bool operator==(pos a) const{
    if(a.x==x && a.y== y)return true;
    else return false;
} 
```

对此：（也简化了）

```
bool operator==(const pos& a) const
{
    return (x == a.x && y == a.y);
} 
```

不会复制*任何内容*，从而产生更高效的代码。

* * *

最后，在回答您的问题时，声明为的成员函数或运算符与未声明的成员函数或运算符有什么区别`const`？

`const`成员声明调用该成员不会*修改*底层对象（不支持可变声明）。只能针对对象或引用和指针`const`调用成员函数。例如，您不会修改本地对象，因此应声明为. 您清楚地修改了本地对象，因此运算符**不**应该是.`const``const``operator +()``const``operator =()`**`const`**

 *** * *

**概括**

```
struct pos
{
    int x;
    int y;

    // default + parameterized constructor
    pos(int x=0, int y=0) 
        : x(x), y(y)
    {
    }

    // assignment operator modifies object, therefore non-const
    pos& operator=(const pos& a)
    {
        x=a.x;
        y=a.y;
        return *this;
    }

    // addop. doesn't modify object. therefore const.
    pos operator+(const pos& a) const
    {
        return pos(a.x+x, a.y+y);
    }

    // equality comparison. doesn't modify object. therefore const.
    bool operator==(const pos& a) const
    {
        return (x == a.x && y == a.y);
    }
}; 
```

* * *

**EDIT** OP 想看看赋值运算符链是如何工作的。下面演示了这是如何做到的：

```
a = b = c; 
```

相当于这个：

```
b = c;
a = b; 
```

而且这并不总是等同于：

```
a = c;
b = c; 
```

**示例代码**：

```
#include <iostream>
#include <string>
using namespace std;

struct obj
{
    std::string name;
    int value;

    obj(const std::string& name, int value)
        : name(name), value(value)
    {
    }

    obj& operator =(const obj& o)
    {
        cout << name << " = " << o.name << endl;
        value = (o.value+1); // note: our value is one more than the rhs.
        return *this;
    }    
};

int main(int argc, char *argv[])
{

    obj a("a", 1), b("b", 2), c("c", 3);

    a = b = c;
    cout << "a.value = " << a.value << endl;
    cout << "b.value = " << b.value << endl;
    cout << "c.value = " << c.value << endl;

    a = c;
    b = c;
    cout << "a.value = " << a.value << endl;
    cout << "b.value = " << b.value << endl;
    cout << "c.value = " << c.value << endl;

    return 0;
} 
```

**输出**

```
b = c
a = b
a.value = 5
b.value = 4
c.value = 3
a = c
b = c
a.value = 4
b.value = 4
c.value = 3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T22:46:13.047

而不是`typedef struct { ... } pos;`你应该做的`struct pos { ... };`。这里的问题是您在`pos`定义之前使用类型名称。通过将名称移动到结构定义的顶部，您可以在结构定义本身中使用该名称。

此外，该`typedef struct { ... } name;`模式是 C 主义，在 C++ 中没有太多位置。

要回答关于 的问题`inline`，在这种情况下没有区别。在结构/类定义中定义方法时，它被*隐式*声明为内联。当您显式指定`inline`时，编译器实际上会忽略它，因为该方法已被内联声明。

(`inline`如果在多个目标文件中定义了相同的方法，则方法不会触发链接器错误；链接器将简单地忽略除其中一个之外的所有方法，假设它们都是相同的实现。这是内联方法唯一保证的行为变化. 现在，它们不会影响编译器关于是否内联函数的决定；它们只是有助于使函数实现在所有翻译单元中可用，这使编译器*可以选择*内联函数，如果它认为这对这样做。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-26T23:01:30.373

尝试这个：

```
struct Pos{
    int x;
    int y;

    inline Pos& operator=(const Pos& other){
        x=other.x;
        y=other.y;
        return *this;
    }

    inline Pos operator+(const Pos& other) const {
        Pos res {x+other.x,y+other.y};
        return res;
    }

    const inline bool operator==(const Pos& other) const {
        return (x==other.x and y == other.y);
    }
 }; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-26T22:59:04.787

1.  bool operator==(pos a) const{ - 此方法不会更改对象的元素。
2.  bool operator==(pos a) { - 它可能会改变对象的元素。**

# c - C 修改结构中的 const 成员

> ID：14047193
> 
> 赞同：2
> 
> 时间：2012-12-26T22:44:19.703
> 
> 标签：c, casting, struct, constants

我正在设计一个 API，它的关键部分是由 API 返回的具有大量 const 成员的结构。此外，还有 const 指针和指向 const 变量的指针。在实现内部，我需要修改这个结构。目前，我已经定义了完全相同的结构，但删除了 const 关键字和不同的名称。在 API 调用中，我只是将外部结构转换为内部结构。

有没有更好的编码方式？如果我修改了一个结构而忘记了另一个，当前的设计很容易出错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:52:40.540

使用[不透明的结构和访问器函数](https://stackoverflow.com/questions/2001637/opaque-abstract-data-types-in-c)

不透明结构为您的 API 提供了一个名称，但无法解决这些字段。

API 中的访问器函数提供您喜欢的任何受控访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:26:40.187

在这里请注意：这些字段并不是真正不可写的。
你想让它们有点“私有”，但每个程序员都可以通过这种方式访问​​它们：

```
typedef struct
{
    const int x;
}mystruct; 
```

然后：

```
mystruct ms= {0};
*((int*)&(ms.x)) =4;
printf("%d",ms.x); 
```

因为 const 说明符只是阻止程序员在编译时修改它们。但在运行时内存不是只读的。

我仍然认为 const 说明符很有用：如果一个优秀的程序员看到它，就会说我不应该访问该字段。如果相反，想让聪明人访问这些字段并可能冒着不一致的状态的风险。
因此，如果您确定可以更改这些 const 字段，那么在您的位置我会使用这种方式。我知道迂腐的程序员不会喜欢它，我也不喜欢它，但有时我们必须绕过它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T22:54:47.243

复制是万恶之源，因此您可以执行以下操作，而不是复制结构定义：

```
#ifndef CONST
#define CONST const
#endif

struct mystruct
{
    CONST void * my_data;
}; 
```

现在您只需`CONST`在私有实现中包含头文件之前定义为空。

但是，就像其他答案所暗示的那样，这不是一个好主意。首先，可能有更好、更清洁的方法来实现你想要的。其次，这可能会导致奇怪和不需要的结果，因为编译器可能会使用字段的常量来优化代码。

简而言之，我认为你最好重新考虑你的 API。

# scala - Scala 构造函数参数修饰符

> ID：14047194
> 
> 赞同：4
> 
> 时间：2012-12-26T22:44:44.867
> 
> 标签：scala, constructor

我想澄清scala中的一些概念

```
class Test(a:Int) {
 def print = println(a)
}

class Test1(val a:Int) {
 def print = println(a)
}

class Test2(private val a:Int) {
 def print = println(a)
}

val test = new Test(1)
val test1 = new Test1(1)
val test2 = new Test2(1) 
```

现在，当我尝试访问一个 in test、test1、test2 时。

斯卡拉打印

```
scala> test.a
<console>:11: error: value a is not a member of Test

scala> test1.a
res5: Int = 1

scala> test2.a
<console>:10: error: value a cannot be accessed in Test2 
```

我了解整数 a 是 Test1 和 Test2 的一个字段。但是 Integer a 和类 Test 是什么关系呢？显然 Integer a 不是 Test 类的字段，但它可以在 print 函数中访问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T23:44:40.240

查看发生了什么的最好方法是反编译生成的 Java 类。他们来了：

```
public class Test
{
  private final int a;

  public void print()
  {
    Predef..MODULE$.println(BoxesRunTime.boxToInteger(this.a));
  }

  public Test(int a)
  {
  }
}

public class Test1
{
  private final int a;

  public int a()
  {
    return this.a; } 
  public void print() { Predef..MODULE$.println(BoxesRunTime.boxToInteger(a())); }

  public Test1(int a)
  {
  }
}

public class Test2
{
  private final int a;

  private int a()
  {
    return this.a; } 
  public void print() { Predef..MODULE$.println(BoxesRunTime.boxToInteger(a())); }

  public Test2(int a)
  {
  }
} 
```

如您所见，在每种情况下`a`都成为`private final int`成员变量。唯一的区别在于生成了什么样的访问器。在第一种情况下，不生成访问器，在第二种情况下，生成公共访问器，在第三种情况下，它是私有的。

# html - 如何以负责任的形式替换固定值css

> ID：14047195
> 
> 赞同：1
> 
> 时间：2012-12-26T22:44:46.683
> 
> 标签：html, css, asp.net-mvc, forms, jquery-ui

责任表格是使用下面的代码创建的。如果调整窗口大小，它会自动调整大小，标题和输入元素保持对齐。

它包含固定值 210px、75px、100px、120 px 是下面的 css。是否合理，如果是，如何用百分比或 em 等其他值删除/替换这些固定值？

使用输入、选择元素和带有下拉按钮的 jquery-ui 自动完成功能。

```
<form class='ui-widget-content form-document'>

<div class='form-field'>
<label class='form-label' for='nimi'>Customer name</label>
<span class='form-fullwidth'>
<input class='ui-widget-content ui-corner-all form-autocomplete' name='nimi' value='Karu Org AS' ></input>
<button type='button' class='form-combobutton' tabindex=-1 ></button>
</span>
</div>

<div class='form-field'>
<label class='form-label' for='Number'>Number</label>
<input class='ui-widget-content ui-corner-all form-fullwidth' name='Number' />
</div>

<div class='form-field'>
<label class='form-label' for='payterm'>Pay term</label>
<span id='span_Maksetin1_tingimus' class='form-fullwidth'>
<select class='ui-widget-content ui-corner-all form-fullwidth' name='payterm'>

<option value='' selected='selected'></option>
<option value='0'>0 days</option>
</select>
</span>
</div>

... lot of similar form-field divs
</form> 
```

CSS：

```
.form-document
{
    padding: 0.5%;
}

.form-field
{
    display: inline-block;
    margin: 2px;
    width: 210px; /* label width + input field width */
}

.form-label
{
    padding-left: 5px;
    padding-right: 5px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: smaller;
    display: inline-block;
    text-align: right;
    width: 75px;  /* determine by max caption width */
}

.form-fullwidth
{
    width: 120px; /* 210-5-75 */
}

.form-autocomplete
{
    width: 100px; /* 210-5-75-combobutton width*/
}

.form-combobutton
{
    height: 1.09em;
    margin: 0 0 0px;
    padding: 0;
    margin-left: -6px;
    vertical-align: middle;
    width: 1em !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:41:25.500

尽管我个人在大多数情况下都使用 em，但对我来说看起来还不错。

如果你想使用变量来避免重复，你也可以考虑使用像 LESS 这样的预处理器。你可以通过 nuget 获得 LESS 或 SASS，那里有无数的教程。

# unity3d - Unity3d c# TCP客户端代码无法连续接收第二条消息

> ID：14047200
> 
> 赞同：1
> 
> 时间：2012-12-26T22:45:21.130
> 
> 标签：unity3d, tcpclient, tcpserver, tcpsocket

我有类似的问题，可能和[这里](http://answers.unity3d.com/questions/241384/why-i-cant-receive-2-messages-in-a-row-from-my-ser.html)一样。

从服务器（Java TCP Server）我这样做：

```
public void sendMsg(String msg) {

    out.println(msg); // msg is: "MSG Hello" without quetes

    out.flush();

} 
```

当我推它两次或更多次时，我只收到客户端代码中的第一条消息，即 unity3d 代码 c# 套接字

```
void Update() {

    if(connected) {

        try {

            if(theStream.DataAvailable) {

                String data = sr.ReadLine();
// bla bla 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:59:10.573

摆脱`if(theStream.DataAvailable)`. 您无法以这种方式检查数据是否可用，因为如果您已经收到数据，则它不可用。虽然该`ReadLine`函数只向您返回一行，但它可能读取的内容远不止一行。

所以这就是发生的事情：

1.  发送所有数据。

2.  数据可用，您调用`ReadLine`。它读取所有数据并向您返回一行。

3.  现在没有可用的数据，因为它已经从连接中读取。

该检查还有其他问题。如果它试图避免`ReadLine`在线路不可用时调用，它不会那样做。某些数据可用并不意味着整行可用。（想象一下，如果另一端恶意只发送一个`X`字节。）

# php - 如何使用 MySQLi 防止/捕获连接错误

> ID：14047204
> 
> 赞同：5
> 
> 时间：2012-12-26T22:45:50.387
> 
> 标签：php, database, mysqli, try-catch, connect

例如，对于以下给定代码，如果数据库名称无效，您如何防止连接错误？

```
$mysql = new mysqli('localhost', 'user', 'pass', 'wrongdatabase');

if($mysql->connect_errno)
    die($mysql->connect_error); 
```

if 语句会输出正确的错误信息，但还是会从第一行发出警告，上面写着

```
Warning: mysqli::mysqli() [<a href='mysqli.mysqli'>mysqli.mysqli</a>]: (42000/1049): Unknown database 'wrongdatabase' in C:\wamp\www\example.php on line 14 
```

我知道使用 PDO 您只需将其包装在 try/catch 块中，但是如何使用 MySQLi 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T03:53:34.973

这里的答案是不正确且过时的。可以在[此处找到此问题的最新答案](https://stackoverflow.com/a/58808333/285587)

# .net - 结合 .NET 项目和性能？

> ID：14047212
> 
> 赞同：1
> 
> 时间：2012-12-26T22:46:53.023
> 
> 标签：.net, performance

目前我有两个彼此独立的项目。第一个是 VB.NET 桌面应用程序，它已经相当大而且可能有点臃肿。另一个是较旧的 ASP.NET 项目。我的任务是将 ASP.NET 项目的功能集成到桌面应用程序中。我还没有关于如何完成的规范。我们仍在计划/谈论它。但团队最大的担忧之一是桌面应用程序是否会因添加一个非常大的新功能而受到性能影响。我倾向于认为 .exe 会变得更大一点。但是加载时间等不应该变得更长吗？

我认为它的实现方式是作为一个单独的窗口，在功能上类似于 Web 应用程序。按下主菜单栏上的按钮即可访问此窗口。

我知道这里没有太多细节，但我是否应该期望应用程序的其余部分通过添加大型新功能来影响性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:50:24.957

用好的设计把事情做好应该是你最初关心的问题，而不是性能。

我什至会努力将这两个应用程序分成更多的层。如果您有两个项目中通用的模型、业务对象使它们成为新的类库，那么您可以有更多的抽象，而不必在项目中包含所有内容。

对你的两个项目进行抽象和分层。然后你可以担心性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:51:01.410

我根本不会期望性能受到影响 - 如果有的话，可能会花费一些额外的时间来使用预编译器或从磁盘加载程序集，但这是最小的 - 但是一旦将内容加载到内存中，应用程序的其余部分应该您的新功能不会对性能产生任何影响。唯一让你的应用程序变慢的是*让它做更多事情*，如果你的用户没有访问新功能，并且应用程序没有在后台使用任何新功能，那么用户的性能和体验应该是不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:51:41.217

EXE 和 DLL 文件是在您使用其中的方法时编译的，而不是在它们被加载到内存中时编译的。因此，如果您将新内容放入 DLL 中，加载和编译新 DLL 所需的时间会稍有延迟，但如果您在特定情况下不使用这些方法，则不会受到任何惩罚。采用。（如果在特定使用情况下不使用 DLL，则根本不会将 DLL 加载到内存中。）

我希望您实际上不会看到任何区别。（如果设计好的话。）它根本不应该伤害你。

# xamarin.ios - MonoDevelop 的默认字体是什么？

> ID：14047217
> 
> 赞同：1
> 
> 时间：2012-12-26T22:47:32.180
> 
> 标签：xamarin.ios, monodevelop

我想知道它是什么——我特别喜欢它们如何渲染小写“l”并越过零——恕我直言，它们看起来比 Consolas / Inconsolata 更好。

我已经尝试过使用谷歌搜索以及在“开始”>“控制面板”>“字体”中寻找它，但均无济于事。

如果 Stackoverflow 不适合提出此类问题 - 请引导我到更合适的堆栈/论坛，我会将其移至那里。

截屏：

![MonoDevelop 截图](../Images/bbcb9f92998d2c0b9756894343c42d5e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:54:35.087

字体看起来很像 DejaVu Sans Mono：

[http://dejavu-fonts.org/wiki/Main_Page](http://dejavu-fonts.org/wiki/Main_Page)

他们特别像你建议的那样标记了 0 和 l 。有一个 Ubuntu 字体可以做同样的事情，并且具有 ubuntu 特定的 'u' 字符。

至于 Inconsolata，它是一款华丽的字体，但它确实需要高 PPI 才能正常工作。比大多数屏幕提供的更多。你至少需要 200 才能让它看起来不错。

# java - 如何在 JFrame 上添加对象

> ID：14047220
> 
> 赞同：1
> 
> 时间：2012-12-26T22:47:55.020
> 
> 标签：java, swing, jdbc, jtable, tablemodel

您好，我是 Java 新手，我正在通过创建一个简单的待办事项列表应用程序来练习。

到目前为止一切正常，但我有一个简单的问题。如何以表格形式在我的屏幕上打印值

```
 To Do     Date added
Delete nothing   1-1-2012
Delete something 2-2-2013
Delete test      3-2-2012 
```

我已经通过 println 获得了控制台中的每条记录

```
while(rs.next()) {
    System.out.println(rs.getInt("id") + "\n" + rs.getString("item") + "\n" + rs.getDate("datum"));
} 
```

我现在用 MVC 设计创建了这一切，但正如你所料，我的 VIEW 是空的。我的问题是在视图的帮助下在我的 JFrame 上打印出来的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:03:37.017

您不能使用`System.out.println();`在框架上打印任何内容。改用`JTable`：

```
import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import java.awt.*;

public class Reshad {

    public static void main(String [] args){
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                //Create frame
                JFrame frame = new JFrame();
                //Create table
                JTable table = new JTable();
                //Create table model (DefaultTableModel in this case)
                DefaultTableModel model = new DefaultTableModel(new Object[][]{},new String[]{"To do","Date added"});
                //set model
                table.setModel(model);
                //To populate table call this method from model:
                model.addRow(new Object[]{"something","1-1-2012"});

                //Create scroll pane
                JScrollPane scrollPane = new JScrollPane(table);
                //Add scroll pane to center of your frame

                frame.add(scrollPane, BorderLayout.CENTER);
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T22:58:41.007

填充[DefaultTableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)，如下所示：

```
public class TodoModel extends DefaultTableModel {
    public TodoModel(ResultSet rs) {
        this.dataVector = new Vector<Vector<String>>();
        for(rs.first();!rs.isAfterLast(); rs.next()) {
             Vector<String> row = new Vector<String>();
             row.add("Delete?");
             row.add(rs.getString(1));
             row.add(rs.getString(2));
             this.dataVector.add(row);
        }
        this.columnIdentifiers = new Vector<String>();
        this.columnIdentifiers.add("");
        this.columnIdentifiers.add("To Do");
        this.columnIdentifiers.add("Date added");
    }
} 
```

将 this 的一个实例传递给您的[JTable](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)构造函数，您应该会很成功。让我知道你是怎么办的。

# html - 使文本区域高度为容器的 100%

> ID：14047225
> 
> 赞同：0
> 
> 时间：2012-12-26T22:48:48.963
> 
> 标签：html, css

我有一个文本区域，我希望高度与容器相同。

我试过使用`height: 100%;`虽然它似乎没有工作。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:00:17.613

你能发布一些你的代码吗？可以是任何东西。如果您尝试基础知识，它应该适用于所有浏览器。

```
.container {
    border: 1px solid #000000;
    height: 300px;
}

.container textarea{
    border: 1px solid red;
    height: 100%;
}

<div class="container">
    <textarea>Hello world!</textarea>
</div> 
```

这里有一个例子：[Textarea](http://jsfiddle.net/fedeleoncba/UVxvd/)

问候和新年**快乐**！:)

# c - 如何在 Linux 应用程序中触发虚假唤醒？

> ID：14047227
> 
> 赞同：12
> 
> 时间：2012-12-26T22:49:24.040
> 
> 标签：c, linux, multithreading, posix

**一些背景：**

我有一个依赖于第三方硬件和闭源驱动程序的应用程序。驱动程序当前有一个错误，导致设备在随机时间后停止响应。这是由驱动程序中明显的死锁引起的，并中断了我的应用程序的正常运行，该应用程序处于始终在线的 24/7 高度可见的环境中。

我发现将 GDB 附加到进程，并立即从进程中分离 GDB 会导致设备恢复功能。这是我第一次表明驱动程序本身存在线程锁定问题。有某种竞争条件会导致死锁。附加 GDB 显然会导致一些线程重新洗牌，并可能将它们推出等待状态，导致它们重新评估它们的条件，从而打破死锁。

**问题：**

我的问题很简单：是否有一个干净的等待应用程序触发程序中的所有线程来中断它们的等待状态？肯定有效的一件事（至少在我的实现中）是发送一个 SIGSTOP，然后立即从另一个进程（即来自 bash）发送一个 SIGCONT：

```
kill -19 `cat /var/run/mypidfile` ; kill -18 `cat /var/run/mypidfile` 
```

这会在过程中触发虚假唤醒，一切都恢复生机。

我希望有一种智能方法可以触发我进程中所有线程的虚假唤醒。思考`pthread_cond_broadcast(...)`但无法访问正在等待的实际条件变量。

这是可能的，还是依赖像`kill`我唯一的方法这样的程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T23:22:33.473

你现在做的方式可能是最正确和最简单的。内核中没有“唤醒给定进程中所有等待的 futexes”操作，这是您更直接地实现此目的所需要的。

请注意，如果唤醒失败的“死锁”在`pthread_cond_wait`但用信号中断它以打破死锁，则该错误不能在应用程序中；它实际上必须在 pthread 条件变量中执行。glibc 在其条件变量实现中已知未修复的错误；请参阅[http://sourceware.org/bugzilla/show_bug.cgi?id=13165](http://sourceware.org/bugzilla/show_bug.cgi?id=13165)和相关的错误报告。但是，您可能已经找到了一个新的，因为我认为现有的已知的不能通过用信号中断 futex 等待来修复。如果您可以将此错误报告给 glibc 错误跟踪器，那将非常有帮助。

# jetty - Scalatra 主机静态

> ID：14047228
> 
> 赞同：0
> 
> 时间：2012-12-26T22:49:26.390
> 
> 标签：jetty, scalatra

如果我为 /static 注册默认 servlet，我可以从 /static 托管 scalatra 静态文件（例如 js），如何在类路径之外指定 /static，即 c:/path/static 这样我就可以开发网络部分与嵌入式主机分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:33:49.903

将 DefaultServlet 上的“resourceBase”设置为您要从中提供内容的位置

# php - 使用 php 和 Zend 进行会话，无法写入会话数据

> ID：14047232
> 
> 赞同：0
> 
> 时间：2012-12-26T22:49:54.577
> 
> 标签：php, zend-framework, session, xampp

首先，我必须为我的英语感到抱歉，这不是很好，但我希望你能理解。我开始研究 Zend 框架，我的会话有问题，但我认为这与 zend 无关......无论如何我在使用时有一条错误消息：

`$risultato=$auth->authenticate($adapter);`

在我的登录页面上，我收到以下消息：

`Message: Zend_Session::start() - C:\ZendFramework-1.12.0\library\Zend\Session.php(Line:477): Error #2 session_start(): open(C:\xampp\htdocs\ZendDue\application/../data/session\sess_4beo9fvfqenb6s2b67q5cj5ap6, O_RDWR) failed: No such file or directory (2) C:\ZendFramework-1.12.0\library\Zend\Session.php(Line:487): Error #2 session_write_close(): open(C:\xampp\htdocs\ZendDue\application/../data/session\sess_4beo9fvfqenb6s2b67q5cj5ap6, O_RDWR) failed: No such file or directory (2) C:\ZendFramework-1.12.0\library\Zend\Session.php(Line:487): Error #2 session_write_close(): Failed to write session data (files). Please verify that the current setting of session.save_path is correct (C:\xampp\htdocs\ZendDue\application/../data/session)`

我正在使用 xampp 并且在 php.ini 文件中我有 `session.save_path = "C:\xampp\tmp"`

我不知道该怎么办，我因此而变得沮丧，现在我以为我明白了……

# android - 如何检索先前在列表视图中选择了哪个子视图

> ID：14047236
> 
> 赞同：1
> 
> 时间：2012-12-26T22:50:18.413
> 
> 标签：android, listview

我有一个列表视图并为其设置 BaseAdapter，行布局只有文本视图。

我通过拥有视图对象来跟踪以前的 textview，现在当我滚动 listview 视图时，previoustextview obj 不起作用。

如何知道之前选择了哪个子视图。

```
public View getView(final int position, final View convertView, final ViewGroup parent) {
        TextView txtview = (TextView) convertView;            
        boolean flag = false;
        final Resources res = getResources();
        final Drawable actbtnDoneDraw = res.getDrawable(R.drawable.action_done_button);
        final Drawable actbtnSelectedDraw = res.getDrawable(R.drawable.action_button_selected);
        final Drawable actbtnDraw = res.getDrawable(R.drawable.action_button);

        if (null == convertView) {

                if (DeviceDetail.isGalaxyTabOriginal()) {
                    txtview = (TextView) inflater.inflate(R.layout.list_txtview_gtab0, parent,
                            true);
                } else {

                    txtview = (TextView) inflater.inflate(R.layout.list_txtview, parent, false);

                }

            } else {
                txtview = (TextView) convertView;
                if (selectedposition != position) {
                    txtview.setBackgroundDrawable(actbtnDraw);
                    txtview.setSelected(false);

                } else {

                    txtview.setBackgroundDrawable(actbtnSelectedDraw);
                    txtview.setSelected(true);

                }
            }
            final Activity activity = activities.get(position);
            txtview.setText(activity.name);
            txtview.setTag(Integer.valueOf(activity.id));

            txtview.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(final View v) {
                    selectedposition = position;
                    Log.i("Onclick position = " + position);
                    modifyButtonView(v, position);
                }
            });

        }

public void modifyButtonView(final View view, final int position) {

        final TextView v = (TextView) view;
        final TextView pv = (TextView) previousview;

        final Resources res = getResources();
        final Drawable actbtnSelectedDraw = res.getDrawable(R.drawable.action_button_selected);
        final Drawable actbtnDraw = res.getDrawable(R.drawable.action_button);

        if (NoSelection) {
            v.setSelected(true);
            v.setBackgroundDrawable(actbtnSelectedDraw);

        } else {
            if (previousposition != position) {

                v.setSelected(true);
                pv.setBackgroundDrawable(actbtnDraw);
                v.setBackgroundDrawable(actbtnSelectedDraw);
                pv.setSelected(false);
            }
        }            

        previousview = v;
        previousposition = position;
        NoSelection = false;
        mListener.onActivityButtonClicked(v);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:09:08.680

> 如何知道之前选择了哪个子视图。

将两个字段变量添加到您的 Adapter 类，调用它们`public int previousChoice`和`currentChoice`. 在您的`onItemClick()`or`onListItemClick()`方法中，使用第三个参数更新此值 `position`。

```
mAdapter.previousChoice = mAdapter.currentChoice;
mAdapter.currentChoice = position; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:31:25.640

// 获取上一个视图，取决于位置，.... method(view,position)

```
 final int wantedPosition = previousposition;
            final int firstPosition = listview.getFirstVisiblePosition()
                    - listview.getHeaderViewsCount();
            final int wantedChild = wantedPosition - firstPosition;
            if (!(wantedChild > firstPosition && wantedPosition < listview
                    .getLastVisiblePosition())) { 
```

// 如果你有 textview 仅作为行视图而不是

```
 pv = (TextView) listview.getChildAt(wantedChild);
                if (pv == null) {
                    pv = (TextView) previousview;
                }
            }
            if (previousposition != position) {
                // perform the operation on the pv view or current v view
            }
        }
        previousview = v;
        previousposition = position; 
```

# jquery - JQuery Sortable - 对绝对定位的元素和占位符进行排序

> ID：14047238
> 
> 赞同：0
> 
> 时间：2012-12-26T22:50:25.503
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, absolute

在与这个问题斗争和斗争之后，我别无选择，只能寻求帮助！我的情况是这样的：我有一些**绝对定位**的元素。这些元素中的每一个都有自己的属性“ **top** ”和“ **left** ”。我遇到的最大问题是当我尝试对物品进行分类时。

```
$(".container").sortable({
    containment: ".container",
    cursor: 'move',
    items: '.element',
    helper: 'clone',
    placeholder: 'new-placeholder',
    forcePlaceholderSize: true,
    tolerance: 'pointer',
    revert: true,
    scroll: false,
    start: function(event, ui) {
        event.stopPropagation();
        $(".new-placeholder").css("left", ui.helper.position().left);
        $(".new-placeholder").css("top", ui.helper.position().top);
        $(".new-placeholder").css("height", ui.helper.height());
        $(".new-placeholder").css("width", ui.helper.width());
    },
    change: function(event, ui) {
        console.log("Placeholder index: " + ui.placeholder.index());
    }
}).disableSelection(); 
```

这是[当前行为](http://jsfiddle.net/fedeleoncba/K79KN/)，这是[预期行为](http://jsfiddle.net/fedeleoncba/Zuxpn/)

如您所见，当拖动元素结束时，元素应该改变它们的位置。有没有更好的方法来做到这一点？我无法摆脱绝对位置，这是主要问题。我知道解决方案必须是更改、更新和停止方法，但我自己无法弄清楚。

到目前为止，我得到的只是在将项目拖到另一个元素上时获取占位符的新索引，但是¿我怎样才能更改占位符的位置并根据它对其余元素进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:32:16.880

重现所有元素是不切实际的，但我自己的更新（让它工作）的基本想法是这样的：

1.  从容器和“portlet”中删除所有绝对定位

2.  每个可排序容器都向左浮动，相对定位，并具有底部填充。这种填充意味着即使是空容器也可以成为目标

3.  容器中的每个“portlet”都将宽度设置为 100%，并且还通过相对定位和底部边距向左浮动（以将它们隔开）。

4.  使用“开始”参数动态设置占位符大小。我将占位符的大小限制为 350 像素高，但对于任何小于该值的小部件，占位符将等于 portlet 的大小。

5.  使用“connectWith”参数链接容器。

基本 HTML：

```
<div class="portletContainer"> <!-- floated left, has padding -->

  <div class="portlet"> <!-- floated left, margin-bottom, 100% width -->
    <div> some stuff </div>
  </div>

  <div class="portlet"> <!-- floated left, margin-bottom, 100% width -->
    <div> some more stuff </div>
  </div>

</div>

<div class="portletContainer">
  <!-- repeat the above pattern; the two containers are then linked -->
</div> 
```

基本的可排序 JavaScript：

```
$('.portletContainer').sortable({
  connectWith: ".portletContainer",
  start: function(e, ui) {
    var elementHeight = ui.item.height();
    if(elementHeight < 350) {
      ui.placeholder.height(elementHeight);
    }
  }
}); 
```

如果这仍然不适合您，则可能只是忽略了某些内容。要么是继承了绝对定位，要么是 JavaScript 正在添加它。

我认为这涵盖了所有基础，但更短的版本是：我将其剥离，直到我的标记和 CSS 类似于 jQuery UI 可排序演示页面中的“portlet”示例中的标记和 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T14:30:50.733

有两种方法可以实现这一目标。`nth-child`您可以使用带有or选择器的一些 CSS 技巧`nth-type-of`将绝对定位应用于索引而不是直接应用于元素。因此，当项目由于可排序插件的工作方式而在 DOM 树中移动时，它们将捕获正确的位置属性，因为索引将保持不变。

另一种方法是使用`sortchange`插件的事件，只要列表中项目的顺序发生更改，就会触发该事件。因此，在事件函数中，您需要遍历您的项目并重新应用正确的定位。

[在此处](http://www.nightcrawler.ro/2014/01/jquery-sortable-with-absolute-position.html)查看有关如何使用这两种方法的更多详细信息：

# haskell - ImpredicativeTypes 的简单示例

> ID：14047241
> 
> 赞同：12
> 
> 时间：2012-12-26T22:50:42.533
> 
> 标签：haskell, impredicativetypes

GHC 用户指南参考以下示例描述了[暗示性多态性扩展：](http://www.haskell.org/ghc/docs/latest/html/users_guide/other-type-extensions.html#impredicative-polymorphism)

```
f :: Maybe (forall a. [a] -> [a]) -> Maybe ([Int], [Char])
f (Just g) = Just (g [3], g "hello")
f Nothing  = Nothing 
```

但是，当我在文件中定义此示例并尝试调用它时，出现类型错误：

```
ghci> f (Just reverse)

<interactive>:8:9:
    Couldn't match expected type `forall a. [a] -> [a]'
                with actual type `[a0] -> [a0]'
    In the first argument of `Just', namely `reverse'
    In the first argument of `f', namely `(Just reverse)'
    In the expression: f (Just reverse)
ghci> f (Just id)

<interactive>:9:9:
    Couldn't match expected type `forall a. [a] -> [a]'
                with actual type `a0 -> a0'
    In the first argument of `Just', namely `id'
    In the first argument of `f', namely `(Just id)'
    In the expression: f (Just id) 
```

似乎只有`undefined`, `Nothing`, or`Just undefined`满足类型检查器。

因此，我有两个问题：

*   可以`Just f`为任何非底部调用上述函数`f`吗？
*   有人可以提供一个值的示例，该值只能用暗示性多态性来定义，并且可以以非平凡的方式使用吗？

后者尤其是考虑到[有关 Impredicative Polymorphism 的 HaskellWiki 页面](http://www.haskell.org/haskellwiki/Impredicative_types)，这目前为扩展的存在提供了一个绝对没有说服力的案例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T02:16:41.943

`ImpredicativeTypes`ghc-7+ 中的新类型检查器不只是悄悄地放弃了这一点吗？请注意，ideone.com 仍然使用 ghc-6.8，而且您的程序确实可以正常运行：

```
{-# OPTIONS -fglasgow-exts  #-}

f :: Maybe (forall a. [a] -> [a]) -> Maybe ([Int], [Char])
f (Just g) = Just (g [3], g "hello")
f Nothing  = Nothing

main   = print $ f (Just reverse) 
```

`Just ([3],"olleh")`按预期打印；见[http://ideone.com/KMASZy](http://ideone.com/KMASZy)

`augustss`给出了一个漂亮的用例——某种模仿 Python dsl——并在这里为扩展辩护：http: [//augustss.blogspot.com/2011/07/impredicative-polymorphism-use-case-in.html](http://augustss.blogspot.com/2011/07/impredicative-polymorphism-use-case-in.html)提到在这里的票[http://hackage.haskell.org/trac/ghc/ticket/4295](http://hackage.haskell.org/trac/ghc/ticket/4295)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-28T06:22:20.500

下面是一个项目[const-math-ghc-plugin](https://github.com/kfish/const-math-ghc-plugin)如何用于`ImpredicativeTypes`指定匹配规则列表的示例。

这个想法是，当我们有 form 的表达式时`App (PrimOp nameStr) (Lit litVal)`，我们希望根据 primop 名称查找适当的规则。A`litVal`将是 a`MachFloat d`或`MachDouble d`(`d`是 a `Rational`)。如果我们找到一条规则，我们想应用该规则的函数来`d`转换为正确的类型。

该函数`mkUnaryCollapseIEEE`对一元函数执行此操作。

```
mkUnaryCollapseIEEE :: (forall a. RealFloat a => (a -> a))
                    -> Opts
                    -> CoreExpr
                    -> CoreM CoreExpr
mkUnaryCollapseIEEE fnE opts expr@(App f1 (App f2 (Lit lit)))
    | isDHash f2, MachDouble d <- lit = e d mkDoubleLitDouble
    | isFHash f2, MachFloat d  <- lit = e d mkFloatLitFloat
    where
        e d = evalUnaryIEEE opts fnE f1 f2 d expr 
```

第一个参数需要具有 Rank-2 类型，因为它将在任一处`Float`或`Double`取决于文字构造函数进行实例化。规则列表如下所示：

```
unarySubIEEE :: String -> (forall a. RealFloat a => a -> a) -> CMSub
unarySubIEEE nm fn = CMSub nm (mkUnaryCollapseIEEE fn)

subs =
    [ unarySubIEEE "GHC.Float.exp"    exp
    , unarySubIEEE "GHC.Float.log"    log
    , unarySubIEEE "GHC.Float.sqrt"   sqrt
    -- lines omitted
    , unarySubIEEE "GHC.Float.atanh"  atanh
    ] 
```

没关系，如果我的口味有点太多样板。

但是，有一个类似的功能`mkUnaryCollapsePrimIEEE`。在这种情况下，对于不同的 GHC 版本，规则是不同的。如果我们想支持多个 GHC，那就有点棘手了。如果我们采用相同的方法，则`subs`定义将需要大量 CPP，而这可能无法维护。相反，我们在一个单独的文件中为每个 GHC 版本定义了规则。但是，`mkUnaryCollapsePrimIEEE`由于循环导入问题，在这些模块中不可用。我们可能可以重新构建模块以使其工作，但我们将规则集定义为：

```
unaryPrimRules :: [(String, (forall a. RealFloat a => a -> a))]
unaryPrimRules =
    [ ("GHC.Prim.expDouble#"    , exp)
    , ("GHC.Prim.logDouble#"    , log)
    -- lines omitted
    , ("GHC.Prim.expFloat#"     , exp)
    , ("GHC.Prim.logFloat#"     , log)
    ] 
```

通过使用`ImpredicativeTypes`，我们可以保留 Rank-2 函数的列表，准备用于 的第一个参数`mkUnaryCollapsePrimIEEE`。替代方案将是更多的 CPP/样板、更改模块结构（或循环导入）或大量代码重复。没有一个是我想要的。

我似乎确实记得 GHC 总部表示他们想放弃对扩展的支持，但也许他们已经重新考虑过了。它有时非常有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-27T00:09:05.450

请注意此解决方法：

```
justForF :: (forall a. [a] -> [a]) -> Maybe (forall a. [a] -> [a])
justForF = Just

ghci> f (justForF reverse)
Just ([3],"olleh") 
```

或者这个（基本上是内联的东西）：

```
ghci> f $ (Just :: (forall a. [a] -> [a]) -> Maybe (forall a. [a] -> [a])) reverse
Just ([3],"olleh") 
```

似乎类型推断`Just`在您的情况下推断类型有问题，我们必须告诉它类型。

我不知道这是一个错误还是有充分的理由.. :)

# asp.net - 如何在 WebMatrix 上的 ASP.NET 项目上安装 socket.io？

> ID：14047244
> 
> 赞同：0
> 
> 时间：2012-12-26T22:50:48.850
> 
> 标签：asp.net, web-applications, socket.io, webmatrix

我最近才开始研究 WebMatrix 2，我一直在读到 socket.io 是在我的应用程序中发送和接收事件的好工具。

问题是我对 socket.io 完全陌生，我不知道在哪里可以安装它，我尝试了 NugGet，但找不到提供对 socket.io 支持的帮助程序。我读到我应该从 Node.js 模板创建一个项目，但我想在 ASP.NET 上工作，而且我不熟悉 Node.js。

如何将 socket.io 安装到我的 WebMatrix 中？在 ASP.NET 项目中使用 socket.io 的准则是什么？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:50:25.807

你有点转身了 :) Socket.io 是一个与 nodejs 一起使用的 NPM 模块。这与编写 ASP.NET 网页站点不同。如果你想使用 socket.io，你需要使用 node。WebMatrix 中的 Node Starter 站点有一个使用 socket.io 做基本聊天应用程序的示例。要查看如何使用它：

[http://www.youtube.com/watch?v=aUT0ez6B-5w](http://www.youtube.com/watch?v=aUT0ez6B-5w)

如果你想使用 ASP.NET，你应该使用 SignalR。这是一个很好的教程，可以帮助您入门：

[http://www.mikesdotnetting.com/Article/206/SignalR-And-Knockout-In-ASP.NET-Web-Pages-Using-WebMatrix](http://www.mikesdotnetting.com/Article/206/SignalR-And-Knockout-In-ASP.NET-Web-Pages-Using-WebMatrix)

您还可以查看此视频： [http ://channel9.msdn.com/Shows/Web+Camps+TV/WebcampsTV-Justin-and-Vishal-Build-an-Image-sharing-Site-with-Windows-Azure-网站](http://channel9.msdn.com/Shows/Web+Camps+TV/WebcampsTV-Justin-and-Vishal-Build-an-Image-sharing-Site-with-Windows-Azure-Web-Sites)

快乐编码！

# haskell - 在 javascript 中嵌入 Heist 标签

> ID：14047248
> 
> 赞同：3
> 
> 时间：2012-12-26T22:51:01.800
> 
> 标签：haskell, heist

由于某些库不兼容，我无法在同一个应用程序中同时使用 Pandoc 和 Heist。因此，我决定使用[Markdown.JS](https://github.com/evilstreak/markdown-js)在客户端浏览器中处理从 Markdown 格式数据到 HTML 的转换。从长远来看，这可能会带来一些额外的好处，但从短期来看，这只是因为 Pandoc 依赖于 Blaze-HTML 0.4 而 Heist 依赖于 Blaze-HTML 0.5。

所以，在一个类似博客的应用程序中，我有一个用于填写每个条目的模板，但是每个条目的内容需要在页面加载后转换为 HTML。因此，我创建了一个如下所示的模板：

```
<h2> <a href="wiki/${target}"><entryTitle /></a> </h2>
<p class="entryDate"> <entryDate /> </p>
<div id="body_${entryDate}">
<entryBody />
</div>

<script type="text/javascript">
renderDiv("body_" + <entryDate />)
</script> 
```

不幸的是，renderDiv 调用最终呈现如下：

```
<script type='text/javascript'>
renderDiv("body_" + <entryDate />)
</script> 
```

我也尝试过使用字符串嵌入形式（就像我为模板中的 div id 所做的那样）：

```
<script type="text/javascript">
renderDiv("body_${entryDate}")
</script> 
```

再次，它逐字呈现。

如何说服 Heist 在 javascript 中拼接 entryDate？

或者，我使用[Prototype.JS](http://prototypejs.org/)作为 Javascript 库。有没有办法让我将脚本放在 div 中并基本上用“self”调用脚本？

```
<div id="body_${entryDate}">
<entryBody />
<script type="text/javascript">
renderDiv($(self))
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:52:24.897

Heist 故意不在脚本标签内进行拼接替换，因为拼接是在 DOM 元素上完成的，并且脚本标签的内容是纯文本，而不是 DOM。我们这样做是因为如果我们按照您的意愿进行操作，解析器将无法判断“<”字符是表示二进制小于运算符还是标记的开头。user1891025 建议生成完整的脚本标签是一种方法。

然而，Heist 和 Pandoc 之间的依赖冲突不应阻止您使用我们内置的降价拼接。我们实际上并没有链接 Pandoc 库。我们只依赖 pandoc 可执行程序。因此，要使其正常工作，您所要做的就是从一个干净的存储库（或使用构建沙箱）构建 pandoc，将 pandoc 二进制文件放在您的路径中，然后从另一个干净的存储库/沙箱构建 Heist。然后你就不必担心这些 javascript 的东西了。

如果您仍想为此或其他用途使用 javascript，我建议您不要从 Heist 生成 javascript。Heist 是为 HTML 生成而设计的，而不是为 javascript 生成而设计的。我更喜欢将我所有的 javascript 放在独立的 .js 文件中。[然后，您可以使用snap-extras](http://hackage.haskell.org/package/snap-extras)库中的[此拼接](http://hackage.haskell.org/packages/archive/snap-extras/0.3/doc/html/Snap-Extras-SpliceUtils.html#v%3ascriptsSplice)方便地加载它们。

要回答您的最后一个问题，您可以使用`renderDiv(this)`.

# ios - 即使应用程序未处于活动状态，您如何安排任务？

> ID：14047249
> 
> 赞同：2
> 
> 时间：2012-12-26T22:51:10.783
> 
> 标签：ios, cocoa-touch, apple-push-notifications

我看到像 Facebook 这样的 iOS 应用程序会发送通知，即使应用程序尚未启动。

我需要使用在每个时间间隔执行的计时器来安排一个任务，并且这个任务（应该在同一个应用程序中）应该提供一个`NSUserNotification`if 满足某些条件。

即使应用程序没有运行，您如何设置这样的通知？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T22:56:48.317

Facebook 应用程序和其他在未启动时发送通知的应用程序通过使用远程通知机制来执行此操作。

要使用它，您需要设置服务器、创建推送证书并为您的首选服务器使用 APNS 库。

在这里查看详细信息：[http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T00:45:20.520

[使用UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)可以通过本地通知完成计划通知。但是，与推送通知一样，本地通知无法运行代码。他们向用户显示通知，用户可能会或可能不会选择启动您的应用程序作为响应。

如果你想在你的应用程序中按时运行代码，那么你的应用程序必须在后台运行。Apple 将后台应用程序限制为仅用于几个特定目的。如果您的应用不属于这些类别之一，则您的应用无法在后台运行（请参阅 UIBackgroundModes 键）。

当位置发生变化时，重要的位置变化监控可以启动您的应用程序，但这是基于位置而不是基于时间并且无法安排。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T22:54:43.400

它不能以您认为的方式完成，您（如 Facebook）应该使用 Apple 推送通知服务。

# magento - Magento 可配置产品及其数量逻辑

> ID：14047250
> 
> 赞同：2
> 
> 时间：2012-12-26T22:51:19.743
> 
> 标签：magento, product, configurable

Magento 版本 - 1.7.0.2

可配置产品的工作量 ( **CP** )

例如，我有一个属性“size”，其值从 20 到 32

因此，我创建了**12 个简单的产品，尺寸分别为 20、21、22 等**c（**每个产品的 **quantity = 1）

然后我创建了两个不同的 CP（**cp1 和 cp2**）并在 Associated Product 选项卡中选择了那些 s* imple *products* with size *

如果用户购买size = 20的cp1，那么什么系统呢？

我想知道这种情况下的详细系统逻辑

大小为 20 的简单产品的数量为**0**，而 cp1 是否**“缺货”**？

对不起我的英语，感谢任何关于我的问题的咨询！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T08:15:02.280

Magento 严格地说，可配置产品（**CP**）本身并不是一个产品，而是简单产品的集合。当你在一个**CP**的10种颜色中进行选择时，无非是选择了10种不同的同种颜色的简单产品。

假设一家商店只有**一个** *RED Ball*和两个魔术盒**CP1**和**CP2**。

现在您可以从任何盒子中取出**红球**，因为它是一个魔法盒子。但是当您从其中一个盒子（**CP1**）中取出球时，**红色球**不能从另一个盒子（**CP2**）或**CP1**中取出，因为只有一个**红色球**。

现在你可以拥有数百个魔术盒，你可以从任何一个盒子里取出**红球**（如果魔术师允许的话——在这种情况下是店主），但是当红球的存货用完时，没有人可以取出**红****球**从任何一个盒子里的**球。**

当数量变为零时，要使产品缺货，你必须去

> 系统->配置->库存（在目录选项卡下）

如下图所示，将红色标记的字段设置为零。 ![在此处输入图像描述](../Images/b648cacfce46644bf121bf35175a2acc.png)

而已。希望我让您对可配置产品的概念清楚。享受...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T06:13:06.900

是的，如果您减少相关简单产品的库存，则包含该简单产品的所有父可配置产品的库存状态都会更新。仅当所有关联的子产品都缺货时，可配置产品才会缺货。

系统逻辑相当复杂，因为 Magento 可容纳许多内置产品类型，但也旨在适应自定义产品类型。在这些不同的产品类型中，可以通过多种方式管理（或不管理）库存。

当您在 Magento 中完成订单时，代表购物车的报价对象将转换为订单对象。如果您查看，`Mage/CatalogInventory/etc/config.xml`您会看到该模块正在观察系统中与库存水平相关的事件。很多这些事件是由`Mage_Sales_Model_Service_Quote::submitOrder()`哪个方法发出的，它是推动从报价到订单的大部分转换的方法。CatalogInventory 观察者方法既可以降低库存水平，又可以发出重新索引库存水平的请求。

在`Mage_CatalogInventory_Model_Stock_Status::updateStatus()`第 266 行，您可以看到当简单产品的库存状态发生变化时更新该简单产品的所有父项的库存状态的调用。

# mongodb - 将单独的 MongoDB 与流星一起使用时，流星重置停止工作

> ID：14047251
> 
> 赞同：4
> 
> 时间：2012-12-26T22:51:29.320
> 
> 标签：mongodb, url, meteor, reset

我将 MONGO_URL 设置为 mongodb://localhost:27017/meteor 并让 MongoDB 作为服务运行。

在运行我的项目时，在我尝试运行流星重置之前，将数据存储到单独的 MongoDB 似乎是可以的。

我的假设是它试图删除其默认数据库。该错误抱怨 myproject.meteor\local 不为空，并指向 fs.js:456 转到 files.js:256 (rm_recursive) 等等。

知道什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T00:40:15.053

`$ meteor reset`仅重置捆绑的 MongoDB。它不会重置外部 Mongo 数据库。

（我们应该在文档中更好地解释这一点。）

`mongo`在您的情况下，尝试直接（使用命令行 shell）连接到 Mongo 数据库并运行`> db.dropDatabase()`

# javascript - JavaScript：将对象绑定到 DOM 元素

> ID：14047254
> 
> 赞同：2
> 
> 时间：2012-12-26T22:51:44.657
> 
> 标签：javascript, jquery, dom, data-binding, bind

我正在返回一个对象，我希望它能够循环并通过类或 ID 将其内容绑定到 DOM 对象。

有没有推荐的方法来做到这一点而不必手动分配每个元素？

最佳案例场景是一个函数，它实际上将创建一个包含数据的元素。

...否则我会手动创建和分配所有数据，而且还有很多。

```
{
    "user_profile": {
        "user_meta_first_name": "asdasd",
        "user_meta_last_name": "asdasd",
        "user_meta_billing_first_name": "asdasd",
        "user_meta_billing_last_name": "asdasd",
        "user_meta_billing_address_1": "2589 asdasd Rd.",
        "user_meta_billing_address_2": "",
        "user_meta_billing_city": "asdsdasd",
        "user_meta_billing_postcode": "VVV 344",
        "user_meta_billing_country": "CA",
        "user_meta_billing_state": "AB",
        "user_meta_billing_email": "admin@thebandagency.ca",
        "user_meta_billing_phone": "2343423434",
        "user_meta_shipping_first_name": "asdasd",
        "user_meta_shipping_last_name": "asdasd",
        "user_meta_shipping_address_1": "2589 asdasd Rd.",
        "user_meta_shipping_address_2": "",
        "user_meta_shipping_city": "asdasd",
        "user_meta_shipping_postcode": "VVV 344",
        "user_meta_shipping_country": "CA",
        "user_meta_shipping_state": "AB",
        "user_meta_shipping_email": "",
        "user_meta_shipping_phone": "",
        "user_meta_paying_customer": "1"
    },
    "pet_profiles": {
        "2000": {
            "pet_name": "Wally the Wonder Pup",
            "pet_tag_serial": "V140000",
            "pet_tag_pin": "XGZSVEMZ",
            "pet_tag_expiry": "December 8, 2013",
            "pet_tag_active": "1",
            "pet_tag_size": "1",
            "pet_tag_design": "Basket Case"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:00:33.553

我假设您的对象是一个数组。您可以使用`each`JQuery 函数循环遍历您的对象，然后在其中创建一个包含您的对象数据的元素。

```
$.each(map, function(key, value) { 
  $('#mainContainer').append('<div id="'+key+'">'+value+'</div>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:04:01.387

如果这只是 jsonData，而您想将其全部显示在屏幕上，则可以使用这种递归方法。我建议对其进行编辑，因为它非常简单。[http://pastebin.com/EzTZHJxW](http://pastebin.com/EzTZHJxW)

```
(function () {
     var jsonData = dataSentFromServer();
     var detailsElement = document.getElementById("Details");
     function newDiv(txt) {
         var createDiv = document.createElement("div");
         if (txt != undefined)
             createDiv.innerHTML = txt;
         return createDiv;
     }

     var depth = 1;
     (function ComposeGraph(obj, el) {
         var ElementArray = [];
         var ChildArray = [];
         $.each(obj, function (name, value) {
             if (!$.isArray(value)) {

                 var appender = newDiv(name + " __:__ " + value);
                 appender.setAttribute("style", "margin-left:" + 10 * depth + "px;");
                 if ($.isPlainObject(value)) {
                     appender.innerHTML = "<b>" + appender.innerHTML + "</b>";
                     depth++;
                     ComposeGraph(value, appender);
                     depth--;
                     ElementArray.push(el);
                     ChildArray.push(appender);
                 } else {
                     el.appendChild(appender);
                 }
             } else {
                 var appender = newDiv(name + " __:__ " + value);
                 appender.setAttribute("style", "margin-left:" + 10 * depth + "px;");
                 appender.innerHTML = "<b>" + appender.innerHTML + "</b>";
                 for (var i = 0, len = value.length; i < len; i++) {
                     depth++;
                     ComposeGraph(value[i], appender);
                     depth--;
                 }
                 ElementArray.push(el);
                 ChildArray.push(appender);
             }
         });
         for (var i = 0, len = ElementArray.length; i < len; i++) {
             ElementArray[i].appendChild(ChildArray[i]);
         }
     })(jsonData, detailsElement);
 })(); 
```

# android - 使用 SupportMapFragment 时，我如何知道地图已准备好使用？

> ID：14047257
> 
> 赞同：30
> 
> 时间：2012-12-26T22:52:17.310
> 
> 标签：android, google-maps, google-maps-android-api-2

在该`onCreate`方法中，我正在使用`SupportMapFragment`来显示地图。

```
 SupportMapFragment fragment = new SupportMapFragment();
    getSupportFragmentManager().beginTransaction()
            .add(android.R.id.content, fragment).commit(); 
```

结合这一点，我想添加一个标记。问题是当调用`getMap`为空时，我什么时候可以再试一次？是否有我可以注册的活动，或者我的方法本身是错误的？

```
 mMap = ((SupportMapFragment)(getSupportFragmentManager().findFragmentById(R.id.map))).getMap();
    if(mMap == null)
        //what do I do here? 
```

该地图实际上显示在手机上，但是我似乎没有运气获得添加标记的参考。

**更新：**

`SupportMapFragment`我通过构造函数创建的原因是因为典型`setContentView`的崩溃并且不起作用。这使我陷入了无法在`onCreate`方法中获得参考的困境，因为我当时实际上正在创建`SupportMapFragment`。在进一步调查中，我的问题似乎`setContentView`是没有将 Google-play-services jar 和 module/src 作为整个项目的一部分设置的副产品。在完成这两项工作后，`setContentView`现在可以正常工作，我可以通过`getMap()`我所期望的方式获得参考。

很多.xml...

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:name="com.google.android.gms.maps.SupportMapFragment"
          android:layout_width="match_parent"
          android:layout_height="match_parent" /> 
```

很多活动.java...

```
public class LotsActivity extends FragmentActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lots);

        GoogleMap mMap;
        mMap = ((SupportMapFragment)(getSupportFragmentManager().findFragmentById(R.id.map))).getMap();
        if(mMap == null)
            //this should not occur now
    } 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-26T23:01:54.443

编辑：[`getMap`现在已弃用](http://android-developers.blogspot.com/2014/11/google-play-services-65.html)

> 问题是当对 getMap 的调用为空时，我什么时候可以再试一次？

这取决于问题的性质。

如果在布局中设置了`SupportMapFragment`via元素，就可以在. 但是，如果您通过构造函数创建 ，那还为时过早——尚不存在。您可以扩展和覆盖，因为那时已经准备好了。`<fragment>``getMap()``onCreate()``SupportMapFragment``GoogleMap``SupportMapFragment``onActivityCreated()``getMap()`

但是，`getMap()`也*可以*返回`null`更大的问题，例如未安装 Google Play 服务。您将需要使用类似的东西`GooglePlayServicesUtil.isGooglePlayServicesAvailable()`来检测这种情况并根据需要进行处理。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-08T21:15:39.263

我最终扩展了 SupportMapFragment 类并使用了回调。代码在这里：

```
public class MySupportMapFragment extends SupportMapFragment {

public MapViewCreatedListener itsMapViewCreatedListener;

// Callback for results

public abstract static class MapViewCreatedListener {
    public abstract void onMapCreated();
}

@Override
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = super.onCreateView(inflater, container, savedInstanceState);
    // Notify the view has been created
    if( itsMapViewCreatedListener != null ) {
        itsMapViewCreatedListener.onMapCreated();
    }
    return view;
}
} 
```

我宁愿使用一个接口并覆盖 onAttach(activity) 方法，但就我而言，我不希望回调返回到我的 MainActivity。我希望它返回到 Fragment 的一个实例。（GoogleMap 本质上是一个片段中的一个片段）我设置了回调并用它以编程方式加载了地图。我想在 MySupportMapFragment 的构造函数中设置 itsMapViewCreatedListener，但不鼓励使用除无参数构造函数以外的任何东西。

```
itsMySupportMapFragment = new MySupportMapFragment();
MapViewCreatedListener mapViewCreatedListener = new MapViewCreatedListener() {
    @Override
    public void onMapCreated() {
        initPlacesGoogleMapCtrl();
    }
};
itsMySupportMapFragment.itsMapViewCreatedListener = mapViewCreatedListener;
FragmentTransaction transaction = getActivity().getSupportFragmentManager().beginTransaction();
transaction.replace(R.id.mapFragmentContainer, itsMySupportMapFragment);
transaction.addToBackStack(null);
transaction.commit(); 
```

然后，当我接到电话时，我可以拿到地图；不再为空！

```
public void initPlacesGoogleMapCtrl() {
    // Map ready, get it.
    GoogleMap googleMap = itsMySupportMapFragment.getMap();
    // Do what you want...
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-19T11:56:33.403

我会评论 CommonsWare 的答案，但我没有足够的代表。无论如何，我也遇到了 getMap() 会在 onActivityCreated 中返回 null 的问题。我的设置是这样的：我的 MainActivity 包含一个片段。在该片段的 onCreateView 方法中，我创建了 SupportMapFragment，然后通过 childFragmentManager 将其添加到片段中。我一直引用 SupportMapFragment 并希望它给我 onActivityCreated 中的地图，但它没有。该问题的解决方案是覆盖**SupportMapFragment**的 onActivityCreated而不是父片段。我在 onCreateView 中是这样做的：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment_location, container, false);
    mMapFragment = new SupportMapFragment() {
        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            mMap = mMapFragment.getMap();
            if (mMap != null) {
                setupMap();
            }
        }
    };
    getChildFragmentManager().beginTransaction().add(R.id.framelayout_location_container, mMapFragment).commit();
return v;   
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-03T01:12:57.060

上个月（2014 年 12 月）谷歌给出了这个问题的官方解决方案。在[最新的 (6.5) Google Play 服务](https://developer.android.com/google/play-services/index.html#)中：

> MapView 和 MapFragment 中的 getMap() 方法现已弃用，取而代之的是新的 getMapAsync() 方法。

[`getMapAsync(OnMapReadyCallback callback)`](https://developer.android.com/reference/com/google/android/gms/maps/MapView.html#getMapAsync%28com.google.android.gms.maps.OnMapReadyCallback%29)您可以为 GoogleMap 准备就绪时设置监听器。它在回调中传递，并提供为非空值。

谷歌为此提供了[示例代码](https://developers.google.com/maps/documentation/android/map#add_map_code)：

```
public class MainActivity extends FragmentActivity
    implements OnMapReadyCallback {
...
} 
```

并在初始化片段时：

```
MapFragment mapFragment = (MapFragment) getFragmentManager().findFragmentById(R.id.map);
mapFragment.getMapAsync(this); 
```

当地图准备好时，您的回调将被调用

```
@Override
public void onMapReady(GoogleMap map) {
    map.addMarker(new MarkerOptions()
        .position(new LatLng(0, 0))
        .title("Marker"));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T22:38:39.183

`MapsInitializer.initialize(context);`如果问题与未初始化的库有关，您也可以使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-31T16:44:15.393

使用最新的 GoogleServices，您可以使用[MapFragment.getMapAsync](http://developer.android.com/reference/com/google/android/gms/maps/MapFragment.html#getMapAsync(com.google.android.gms.maps.OnMapReadyCallback))。直接来自文档

> 设置一个回调对象，该对象将在 GoogleMap 实例准备好使用时触发。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-30T12:56:57.797

如果 map == null 然后找到地图

```
 if (mGoogleMap == null)
    {
        SupportMapFragment mapFragment1 = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

        mapFragment1.getMapAsync(this);
    } 
```

然后调用你的函数 onMapReady();

# objective-c - 从 NSMutableArray 中检索自定义对象

> ID：14047261
> 
> 赞同：-1
> 
> 时间：2012-12-26T22:52:41.600
> 
> 标签：objective-c

[我的问题与这个](https://stackoverflow.com/questions/5435758/iphone-obj-c-retrieve-custom-object-from-nsmutablearray)问题非常相似，但是我没有`nil`从我的问题中返回，`NSMutableArray`我已经分配并初始化了我的`NSMutableArray`. 我将如何`name`从索引处的对象中检索值`Timeline`，例如 3。类似于以下内容：

```
NSLog(@"tlresults: %@",(Timeline *)[tlresults objectAtIndex:3].name); 
```

并返回索引 3 的 Timeline.name 值。

时间线.h

```
@interface Timeline : NSObject
{
    NSString *_name;
    NSInteger _up;
    NSInteger _down;
    NSInteger _timeofdatapoint;
}

@property (nonatomic,retain) NSString *name;
@property (nonatomic) NSInteger up;
@property (nonatomic) NSInteger down;
@property (nonatomic) NSInteger timeofdatapoint;

@end 
```

时间线.m

```
#import "Timeline.h"

@implementation Timeline

@synthesize name = _name;
@synthesize up = _up;
@synthesize down = _down;
@synthesize timeofdatapoint = _timeofdatapoint;

@end 
```

添加对象和测试检索的功能：

```
#import "Timeline.h"
...
NSMutableArray *tlresults = [[NSMutableArray alloc] init];

for (int i=0; i<10; i++) {

    Timeline *tlobj = [Timeline new];
    tlobj.name = username;
    tlobj.up = 2*i;
    tlobj.down = 5*i;
    tlobj.timeofdatapoint = 2300*i;

    [tlresults addObject:tlobj];
    [tlobj release];
}
NSLog(@"tlresults count: %d",[tlresults count]);
NSLog(@"marray tlresults: %@",(Timeline *)[tlresults objectAtIndex:3]);
... 
```

输出：

```
tlresults count: 10
tlresults: Timeline: 0x7292eb0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:24:28.213

编写强制转换以便您可以访问类实例的声明属性的正确方法是：

```
NSLog(@"tlresults: %@",((Timeline *)[tlresults objectAtIndex:3]).name); 
```

或者

```
NSLog(@"tlresults: %@",[(Timeline *)[tlresults objectAtIndex:3] name]); 
```

或者，如果您需要访问很多属性：

```
Timeline *timelineAtIndex3 = [tlresults objectAtIndex:3];
NSLog(@"tlresults: %@", timelineAtIndex3.name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:59:31.507

您需要重写 description 方法来为将使用 NSLog() 打印的对象提供您自己的描述。
由于您没有重写此方法，因此它使用了 NSObject 的方法，它只打印对象的内存地址。

例如：

```
- (NSString*) description
{
    return [NSString stringWithFormat: @"Name: %@ up: %li down: %li time of data point: %li",_name,_up,_down,_timeofdatapoint);
} 
```

此外，按照惯例，属性名称不应该是这样的：

```
@property (nonatomic) NSInteger timeofdatapoint; 
```

但是这个：

```
@property (nonatomic) NSInteger timeOfDataPoint; 
```

# node.js - Node.js 如何处理连接？

> ID：14047277
> 
> 赞同：1
> 
> 时间：2012-12-26T22:53:45.617
> 
> 标签：node.js, http, asynchronous, socket.io, serverside-javascript

我想知道Node如何处理连接。我的意思是：当我跑...

```
node myserver.js 
```

...我提出一个请求，Node 是做什么的？

我做了一个测试。我有一个运行 socket.io 的服务器。我在浏览器中打开了两个选项卡，用于建立 WebSockets 连接。我检查线程（**ps -eLf**）并且总是运行相同的 6 个线程：

```
node     12837 12518 12837  1    6 22:29 pts/0    00:01:10 node /usr/local/lib/node_modules/node-dev/wrapper.js prueba1.js
node     12837 12518 12838  0    6 22:29 pts/0    00:00:00 node /usr/local/lib/node_modules/node-dev/wrapper.js prueba1.js
node     12837 12518 12839  0    6 22:29 pts/0    00:00:14 node /usr/local/lib/node_modules/node-dev/wrapper.js prueba1.js
node     12837 12518 12840  0    6 22:29 pts/0    00:00:14 node /usr/local/lib/node_modules/node-dev/wrapper.js prueba1.js
node     12837 12518 12841  0    6 22:29 pts/0    00:00:14 node /usr/local/lib/node_modules/node-dev/wrapper.js prueba1.js
node     12837 12518 12842  0    6 22:29 pts/0    00:00:14 node /usr/local/lib/node_modules/node-dev/wrapper.js prueba1.js 
```

我问这个是因为我试图了解**阻塞代码实际上阻塞了什么**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:26:25.920

如果您需要了解节点中的异步 IO 如何在低级别工作，我建议您阅读以下文档：

*   [libuv书](http://nikhilm.github.com/uvbook/introduction.html)
*   epoll（[教程](http://www.devshed.com/c/a/BrainDump/Linux-Files-and-the-Event-Poll-Interface/)、[手册页](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)、[维基百科](http://en.wikipedia.org/wiki/Epoll)）
*   kqueue（[联机帮助页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/kqueue.2.html)，[维基百科](http://en.wikipedia.org/wiki/Kqueue)）
*   [I/O 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)

# c# - EF 自定义结果集映射

> ID：14047287
> 
> 赞同：2
> 
> 时间：2012-12-26T22:54:48.410
> 
> 标签：c#, entity-framework-5, objectcontext

我想知道是否有一种方法可以使用实体框架来映射任意 sql 的结果，例如Doctrine 中的[ResultSetMapping](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)。我知道我可以创建一个配置类来进行映射，但这需要我将该类注册为实体类型。我想要做的是利用 EF 的物化元素（对象服务）而不使用 EF 的其余部分。有时我会从带有神秘或不太有意义的列名的 proc 中得到结果，但需要映射到具有更有意义的属性名称但无权更改 proc 定义的类，例如：

```
exec dbo.getRecDetail @var 
```

返回列：

```
sd, ed, nm, .... 
```

应该映射到一个类，例如：

```
 class Obj{
       public DateTime StartDate; //sd
       public DateTime EndDate; //ed
       public String Name; //nm
       ....
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:22:19.960

如果您使用 .EDMX 文件（设计器）和数据库优先方法，您可以将存储过程导入模型（只需在向导中选择存储过程）并将[其结果映射到复杂类型](http://msdn.microsoft.com/en-us/library/vstudio/dd456824%28v=vs.100%29.aspx)。

它实际上也适用于任意 SQL 查询，但这些查询不能自动导入到模型中（因为它们不存在于您的数据库中）。它需要手动修改 EDMX 文件中的存储模型（它是 XML - 检查文档[`Function`和`CommandText`元素](http://msdn.microsoft.com/en-us/data/jj652016)）。一旦你这样做了，你就不能再使用设计器的数据库功能更新，因为它会删除你的自定义查询。

如果您首先使用代码，则目前没有映射存储过程或自定义查询结果的选项。您只能使用自动映射，这要求您的类具有与结果集中的列名称完全相同的属性。

# c# - 我可以扫描文档并提取某些单词吗？

> ID：14047288
> 
> 赞同：2
> 
> 时间：2012-12-26T22:54:51.997
> 
> 标签：c#, ms-word

我有一个 word 文档，其中包含用“[[]]”表示的标签，例如 [[sqlscript1]]。我想扫描文档并在文本框中显示 sqlscript1。我只能阅读包含 [[]] 的单词吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:02:23.473

正如millimoose 所说，OpenXML SDK 正是您所寻找的。我们在动态PowerPoint幻灯片的文档生成中做了类似的事情。SDK 使您能够对相关文档的对象模型进行编程处理，并根据需要对其进行更改/搜索/操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:04:07.803

首先，[将 Word 文档的内容加载](https://stackoverflow.com/questions/8100019/reading-word-file-in-c-sharp)到内存中。其次，使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)查找由双方括号表示的标签（必需的模式：）`"\[\[(?<tag>[^\]]*)\]\]"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T23:05:56.257

您需要使用 Interop-DLL 从 Word 文档中提取文本。看看这个： http: [//msdn.microsoft.com/en-US/library/ms173188 (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/ms173188(v=vs.80).aspx)

然后使用以下内容读取文件：

```
object file = Path.GetDirectoryName(Application.ExecutablePath) + @"\Answer.doc";

Word.Application wordObject = new Word.ApplicationClass();
wordObject.Visible = false;

object nullobject = Missing.Value;
Word.Document docs = wordObject.Documents.Open
    (ref file, ref nullobject, ref nullobject, ref nullobject,
    ref nullobject, ref nullobject, ref nullobject, ref nullobject,
    ref nullobject, ref nullobject, ref nullobject, ref nullobject,
    ref nullobject, ref nullobject, ref nullobject, ref nullobject);

String strLine;
bool bolEOF = false;

docs.Characters[1].Select();

int index = 0;
do
{
    object unit = Word.WdUnits.wdLine;
    object count = 1;
    wordObject.Selection.MoveEnd(ref unit, ref count);

    strLine = wordObject.Selection.Text;
    richTextBox1.Text += ++index + " - " + strLine + "\r\n"; //for our understanding

    object direction = Word.WdCollapseDirection.wdCollapseEnd;
    wordObject.Selection.Collapse(ref direction);

    if (wordObject.Selection.Bookmarks.Exists(@"\EndOfDoc"))
        bolEOF = true;
} while (!bolEOF);

docs.Close(ref nullobject, ref nullobject, ref nullobject);
wordObject.Quit(ref nullobject, ref nullobject, ref nullobject);
docs = null;
wordObject = null; 
```

来源：[有没有办法逐行阅读word文档](https://stackoverflow.com/questions/6924056/is-there-a-way-to-read-a-word-document-line-by-line)

现在将每一行复制到一个变量中并使用这个正则表达式命令来检查你的模式：

```
Regex.Match(MYTEXT, @"\[[([^)]*)\]]").Groups[1].Value 
```

# iphone - 更新即将到期的企业配置文件，以及其他恶化

> ID：14047289
> 
> 赞同：0
> 
> 时间：2012-12-26T22:54:55.227
> 
> 标签：iphone, ios, xcode, keychain, provisioning-profile

现在我去年创建的应用程序已经享受了一年的功能成功，我的企业用户开始看到指示配置文件即将到期的警报。

该应用程序的代码签名业务一开始给我带来了巨大的困难，现在它又在做。我认为这是因为我能找到的所有关于它的信息都是指要在 App Store 中分发的应用程序，而不是企业应用程序。“IOS 工具工作流程指南”似乎只对 App Store 分发有帮助。

我终于通过反复试验，通过将所有代码签名身份设置为“iPhone Developer”来让它工作，但我真的需要了解正确的方法以及它为什么会这样工作。我需要“白痴指南”版本。

首先，我认为困扰我的是理解分发方面。“分发”是否仅指绑定到 App Store 的应用程序？这是一个企业应用程序，分发是否适用？每当我尝试创建分发配置文件并将其包含在代码签名身份的分发/发布中时，编译都会失败。如果所有代码签名身份都设置为“iPhone 开发者”，它就可以正常工作。这是否意味着它将始终需要开发人员配置文件，而不是分发配置文件？

“iPhone 开发人员”配置文件始终出现在构建设置的代码签名身份部分中，为“（当前匹配 'iOS 团队中的 'iPhone 开发人员：比尔诺曼（4GR2 等）”。但任何其他配置文件都没有这样说，所以其他配置文件都不起作用。如果它们不起作用，为什么它们在那里？我需要删除它们吗？

是的，列出了许多配置文件，这些配置文件是许多试验和错误的结果。只有一个出现在 iPhone 设置的 Profiles 部分，那就是 iOS Team Provisioning Profile。

如果它确实需要“分发”配置文件，我该如何使其工作？

下一个问题：我的企业用户是否需要下载并重新安装应用程序才能获得新的配置文件？还是它会自己无缝地完成？或者它会通知我的用户个人资料已过期，他们需要做某事才能让他们的应用程序正常工作？

更多：开发者配置文件仅持续一年，而分发配置文件持续三年。显然，让它持续三年会很有帮助，但我们可以用企业应用程序做到这一点吗？

对于我一直无法理解这些东西的内部运作，我深表歉意。非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:54:53.620

您要做的第一件事是删除您通过反复试验创建的所有额外配置文件。只需将它们从组织者中完全删除即可。开发人员配置文件和分发配置文件之间的区别在于，开发人员配置文件仅适用于使用该开发人员配置文件注册的设备，即测试设备。您将无法使用开发人员配置文件签署应用程序，然后将其放在任何设备上，只能是您已注册使用该配置文件的设备。在分发区，您将拥有应用商店分发和 Ad Hoc 分发。应用商店是指苹果应用商店，您必须为此向苹果提交您的应用。Ad Hoc 分发允许拥有企业帐户的开发人员通过 Internet 或其他方法分发到任何设备。

当您说编译因分发而失败时，我需要更多信息，但一般来说，您会单击产品选项卡，然后单击存档。存档完成并弹出存档窗口后，您将单击右下角的“分发”按钮。然后，您将单击 Save for Enterprise 或 Ad-Hoc 部署选项。当被问及要使用哪个身份并点击下一步时，您选择您的分发代码签名身份。棘手的部分来了：在您选择保存应用程序的下一部分中，您单击选项，保存为企业分发。这里需要填写两个字段，第一个是应用程序 url，这是您将托管 ipa 文件的确切 url，例如[http://www.somewebsiteyouown.com/myApplication.ipa](http://www.somewebsiteyouown.com/myApplication.ipa) 第二个是ApplicationTitle，它就是你的应用程序标题：myApplication。此过程将为您生成一个 plist 和一个 ipa 文件，您将它们放在服务器上并从网页上的按钮或链接链接到 plist。plist 就像关于 ipa 文件在哪里以及如何处理它的说明。

# php - Ajax Post Type 不会将数据发送到 php 页面

> ID：14047293
> 
> 赞同：1
> 
> 时间：2012-12-26T22:55:18.223
> 
> 标签：php, jquery, ajax

我有以下表格供用户重置密码，它位于根目录下的文件 forget.php 中。

```
<form id="pass_form" action="" method="post" name="pass_form">
  <label>Username:</label>
  <input type="text" class="blank" name="name" id="name" value="Trader Username" data-default="Trader Username" data-message="Please enter your username..."> *<br>
  <input class="sub-btn" type="submit" value="Submit">
</form> 
```

我想将用户名发布到 inc/sendreset.php 所以我在 js/scripts.js 中有以下 Ajax

```
 $("#pass_form").validator({
    offset: [0, 354],
    position: 'center left',
    messageClass: 'conerror'
}).submit(function(e) {
    if (!e.isDefaultPrevented()) {
        var form = $(this);
        var serdata = form.serialize();
        $.ajax({
            type: "POST",
            url: "sendreset",
            data: serdata,
            cache: false,
            success: function (html) {
                log('inside ajax sendreset', this, arguments);
                $('#pass_form').fadeOut(400,function(){
                    if (html=="0") {

                    } else {
                        $('#pass_form').html('<p>The password reset instructions have been sent. Please check your email.</p>');
                    }
                    $('#pass_form').fadeIn();
                });
            },
            error: function (err) {
                log('error inside ajax sendreset', this, arguments);
            }
        });
        //$('#pass_form').fadeOut(400);
        e.preventDefault();
    }
}); 
```

但是，它似乎没有将用户名发布到文件中。inc/sendreset.php 如下

```
<?php
        require_once('./library.php');
        require_once('./PHPMailer/class.phpmailer.php');

        $Trader = new CompanyTrader();

        $resetdata = $Trader->resetTrader($_POST['name']);
        print_arr($resetdata);

        //more php which isn't relevant
?> 
```

我知道文件 inc/sendreset.php 的工作方式与我使用 $_GET['name'] 的文件时一样，并且我使用 inc/sendreset.php?name=username 为相关用户返回数组。但是，它不能从使用 Ajax 的遗忘.php 中工作。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:10:31.577

我真的认为这是错误的：

```
url: "sendreset", 
```

尝试使用相对或绝对网址，例如`http://mysite.com`

# tcl - tcl 命名空间错误

> ID：14047294
> 
> 赞同：1
> 
> 时间：2012-12-26T22:55:20.827
> 
> 标签：tcl

我在导出的命名空间“b”中定义了几个函数。然后我将这些函数导入命名空间 ::x::Y，因此：

```
namespace eval ::x::y "namespace import fun" 
```

一段时间后，我这样做：

```
namespace eval ::x::y fun 
```

有趣的地方：

```
proc fun {} {
   puts "[namespace current]"
   uplevel {puts "[namespace current]"}
} 
```

打印的内容是：

```
::b
::x::y

```

我想要和需要的是在 ::x::y 中而不是在 ::b 中发生“乐趣”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:27:13.623

Tcl 的命名空间不是这样工作的。每个过程都与一个名称空间相关联，该名称空间就是其名称所在的名称空间。当您使用`namespace import`时，该过程的别名被放置在导入命名空间中，该命名空间允许从另一个命名空间调用该过程，但该过程本身仍保留在其原始命名空间中并在该命名空间中执行。

如果您想知道调用者的命名空间，请使用`uplevel namespace current`（或`uplevel 1 {namespace current}`使用稍微复杂但更高效的版本）。这实际上并没有告诉您哪个名称空间包含用于调用该过程的命令；为此，您需要这个怪物（在调用的命令中）：

```
namespace qualifiers [uplevel 1 [list namespace which [lindex [info level 0] 0]]] 
```

当然，如果你需要这么多，那么你可能做错了什么。（这很明显，考虑到获取信息所需的代码长度和复杂性。）

特别是，如果你假装用它做面向对象，请停下来使用一个真实的对象系统，它可以正确处理所有棘手的细节。Tcl 8.6.0 包括[一个](http://www.tcl.tk/man/tcl8.6/TclCmd/class.htm)（[两个](http://www.tcl.tk/man/tcl8.6/ItclCmd/contents.htm)，如果您有贡献的扩展），并且有许多旧版本可用作扩展包。

# php - 将数组显示为表格

> ID：14047296
> 
> 赞同：8
> 
> 时间：2012-12-26T22:55:30.250
> 
> 标签：php, html, arrays, html-table

我正在尝试使用 PHP/HTML 打印表格。存储在数组中的数据如下：

```
Array ( [id] => 1 [first_name] => mike [last_name] => lastname ) 
```

我的代码如下。它运行并且没有错误，但是输出不如预期。这是 PHP/HTML 代码：

```
<table>

<tr>
    <th>1</th>
    <th>2</th>
    <th>3</th>
</tr>

<?php foreach ($res as $item): ?>
<tr>
     <td><?php echo $item['id'] ?></td>
     <td><?php echo $item['first_name'] ?></td>
     <td><?php echo $item['last_name'] ?></td>
</tr>
<?php endforeach; ?>

</table> 
```

我得到的结果是项目的第一个字符：

```
1       2      3
1       1      1
m       m      m
l       l      l 
```

不知道我做错了什么？我真的很感激解释。

更新：

没有错误的 PHP 代码：

```
<?php 
    foreach ($result as $row) 
    { 
        echo '<tr>';
        echo '<td>' . $row['id'] . '</td>';
        echo '<td>' . $row['first_name'] . '</td>';
        echo '<td>' . $row['last_name'] . '</td>';
        echo '</tr>';
    }
?> 
```

这是我的数组，其中只有一个“行”：

使用 <PRE> 标签包裹的 print_r($result) 输出 $result 变量

```
Array
(
    [id] => 3
    [first_name] => Jim
    [last_name] => Dude
) 
```

这是我得到的结果：

实际表结果：

```
ID    First Name  Last Name
3     3           3
J     J           J
D     D           D 
```

但是，如果我在数组中有 0 或超过 1（意味着 2 或更多），它就可以完美地工作。当我在数组中只有一个“行”元素时，它就不起作用了。例如这个数组，完美地工作：

```
 Array
    (
    [0] => Array
        (
            [id] => 3
            [first_name] => Jim
            [last_name] => Dude
        )

    [1] => Array
        (
            [id] => 4
            [first_name] => John
            [last_name] => Dude2
        )
    ) 
```

我得到这个结果：

```
ID      First Name    Last Name
3       Jim         Dude
4       John            Dude2 
```

我不确定我做错了什么。这个想法是不知道表中有多少项目将其读入`$result`变量，然后使用此变量打印 HTML 表中的所有元素。表可以包含 O 个元素、1 行元素、1 行或更多行元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:18:50.930

不要删除你的 foreach 循环。在没有看到构建数组的代码的情况下，我猜你正在这样做：

```
$res = array('id' => 1, 'first_name'=>'mike', 'last_name'=>'lastname'); 
```

实际上，您可能想要做的是：

```
$res[] = array('id' => 1, 'first_name'=>'mike', 'last_name'=>'lastname'); 
```

括号 [ ] 将所有值的数组添加到您的数组中。这样，您可以将每个值作为值的集合而不是单个值进行循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:59:38.020

您的数据结构不是矩阵而是数组：

`Array ( [id] => 1 [first_name] => mike [last_name] => lastname )`

你需要这样的东西来做你想做的事：

```
Array(
    [0] => Array ( [id] => 1 [first_name] => mike [last_name] => lastname ),
    [1] => Array ( [id] => 1 [first_name] => mike [last_name] => lastname )
    ........
); 
```

除此之外，代码似乎很好......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-15T19:19:02.047

```
<? Php
echo "<table border="2">";

foreach($ array as $ values)
{

echo "<tr><td>";

echo "$ values";

echo "</td></tr>";
}

?> 
```

我写这个是为了将单个数组值打印到表中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-11T13:01:07.630

这就是我如何解决我在网页上遇到的类似问题的方法。我希望该页面显示特定教师使用会话变量教授的所有课程的数组。我希望，即使该主题可能与您无关，但一般要点将帮助人们。

```
<?php 

    echo "<table border='1' style='border-collapse: 
    collapse;border-color: silver;'>";  
    echo "<tr style='font-weight: bold;'>";  
    echo "<td width='150' align='center'>Class</td>";  
    echo "</tr>";

    foreach ($query_class_array as $row) 
     { 
      echo '<td width="150" align=center>' . $row['Class'] . '</td>';
      echo '</tr>';
     }
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-21T01:50:10.770

这将以比 print_r 更具可读性的格式显示任何多维数组...可以使用不同颜色升级为连续单元格以快速滚动数组...您看不到数组名称（键）或值的空间如果您将其悬停，它将告诉您键/值...视觉上不愉快但有效。

```
function show_array_as_table($array,$key_color='blue',$value_color="black",$fontfamily="arial",$fontsize="12pt") {
echo "<table style='color:{$color}; font-family:{$fontfamily}; font-size:{$fontsize}'>";
    foreach($array as $key => $value) {
    echo "<tr>";
        // key cell
    echo "<td title=\"{$key}\" style='width:150pt; height:25pt; text-align:right; vertical-align:top; background-color:cccccc; color:{$key_color}'><b>{$key}</b></td>";
        // value cell (will contain a table if the value is an array)
    echo "<td style='width:300pt; height:25pt; text-align:justify; vertical-align:top; color:{$value_color}'>";
        if (is_array($value)) {
        show_array_as_table($value,$key_color,$color,$fontfamily,$fontsize);
        } else {
        echo "<i>{$value}</i>";
        }
    echo "</td>";
    echo "</tr>";
    }
echo "</table>";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-07T06:28:17.880

如果数组是std对象类型，则不能使用[]，而是使用->来获取特定实体

```
<!DOCTYPE html>
<html>
<body>
<table>

<tr>
    <th>id</th>
    <th>First name</th>
    <th>Last name</th>
    <th>email</th>
    </tr>

<?php 

foreach($data as $item) {?>

<tr>
     <td><?php echo $item->id; ?></td>
     <td><?php echo $item->first_name; ?></td>
     <td><?php echo $item->last_name ;?></td>
     <td><?php echo $item->email;?></td>

 </tr>

<?php  }?>

</table>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-08T11:44:17.060

这也将起作用：

```
echo "<table>";
foreach ($result as $key){
echo "
<tr>
<td>'".$key['id']."'</td>
<td>'".$key['first_name']."'</td>
<td>'".$key['last_name']."'</td>
</tr></table>
";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-10T11:03:29.067

**除了@Phrank，当我这样做时，它对我更有用**

```
function  show_array_as_table($array,$key_color='blue',$value_color="black",$fontfamily="arial",$fontsize="12pt") {

    foreach($array as $key => $value) {
        if (is_array($value)) {
    echo "<tr>";
    echo "<td title=\"{$key}\" style='width:150pt; height:25pt; text-align:right; vertical-align:top; background-color:cccccc; color:{$key_color}'><b>{$key}</b></td>";
        show_array_as_table($value,$key_color,$value_color,$fontfamily,$fontsize);
    echo "</tr>";
        } else {
    echo "<td style='width:300pt; height:25pt; text-align:justify; vertical-align:top; color:{$value_color}'>";
        echo "<i>{$value}</i>";
    echo "</td>";
        }
    }
}

echo "<table class='table'>";
echo show_array_as_table($reader);
echo "</table>"; 
```

# ruby-on-rails - 使用表单重定向

> ID：14047297
> 
> 赞同：2
> 
> 时间：2012-12-26T22:55:49.580
> 
> 标签：ruby-on-rails, forms, redirect

在我按下“创建任务管理员”按钮后，此表单 (views/workers/_form.html.erb) 将我重定向到任务管理员的索引。

我希望它将我重定向到“工人/索引”并将按钮更改为“更新任务”。

请问我该怎么做？

```
<%= form_for(@tasksadmin) do |f| %>
  <% if @tasksadmin.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@tasksadmin.errors.count, "error") %> prohibited this tasksadmin from being saved:</h2>

      <ul>
      <% @tasksadmin.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.hidden_field :admin_mail, :value => @tasksadmin.admin_mail %>

  <%= f.hidden_field :worker_mail, :value => @worker_mail %>

  <%= f.hidden_field :task, :value => @tasksadmin.task %>

<div class="field">
  <%= f.label :done %><br />
  <%= f.check_box :done %>
</div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**这是我的workers_controller**：

```
class WorkersController < ApplicationController
  # GET /workers
  # GET /workers.json
  def index
    @tasks_worker = Tasksadmin.where(:worker_mail => "alon.shmiel@gmail.com")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @workers }
    end
  end

  # GET /workers/1
  # GET /workers/1.json
  def show
    @task_worker = Tasksadmin.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @worker }
    end
  end

  # GET /workers/new
  # GET /workers/new.json
  def new
    @worker = Worker.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @worker }
    end
  end

  # GET /workers/1/edit
  def edit
    @tasksadmin = Tasksadmin.find(params[:id])
    @worker_mail = "alon.shmiel@gmail.com"

  end

  # POST /workers
  # POST /workers.json
  def create
    @worker = Worker.new(params[:worker])

    respond_to do |format|
      if @worker.save
        format.html { redirect_to "@worker", notice: 'Worker was successfully created.' }
        format.json { render json: @worker, status: :created, location: @worker }
      else
        format.html { render action: "new" }
        format.json { render json: @worker.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /workers/1
  # PUT /workers/1.json
  def update
    @worker = Tasksadmin.find(params[:id])

    respond_to do |format|
      if @worker.update_attributes(params[:worker])
        format.html { render action: "index", notice: 'Worker was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @worker.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /workers/1
  # DELETE /workers/1.json
  def destroy
    @worker = Tasksadmin.find(params[:id])
    @worker.destroy

    respond_to do |format|
      format.html { render action: "index" }
      format.json { render json: @worker }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T23:19:47.417

在您的控制器中，您必须像这样重定向到适当的路径：

```
def update
  redirect_to "workers/index"
end 
```

我建议使用路径助手，所以如果您将路线设置为资源，您可以这样做：

```
redirect_to workers_path 
```

至于更改按钮文本，只需将其更改为：

```
f.submit("update the task") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:10:39.507

你为一个对象创建一个表单`@tasksadmin`，它在你`WorkersController#edit`的设置如下：

```
@tasksadmin = Tasksadmin.find(params[:id] 
```

这意味着该参数包含 class 的对象`Tasksadmin`，如果您让 rails 为 a 构建路径`Tasksadmin`，它会将您发送到`TasksadminsController#update`，这就是您的代码不起作用的原因。你永远不会到达`WorkersController#update`. 检查您的日志以验证这一点。

让我非常清楚这一点：您不应该`Tasksadmin`在`WorkersController`.

我不明白你为什么要那样做。

# php - 悬停功能显示产品标题

> ID：14047299
> 
> 赞同：0
> 
> 时间：2012-12-26T22:55:51.030
> 
> 标签：php, jquery, hover

我正在尝试使用 jquery 在悬停时显示从数据库返回的产品的标题。就目前而言，它可以工作，但会在悬停时显示列表中所有产品的标题，而不是悬停的产品标题。我只想显示激活悬停的产品。我试图插入变量但没有运气。就目前而言，下面的代码显示了图像悬停时的所有标题（headhighlight）（imagefeat）。

谢谢你的帮助。

**jQuery**

```
 <script type="text/javascript">
$(function() {
    $('.imagefeat,.pricehigh,.headhighlight').hover(function() { 
        $('.headhighlight').show(); 
    }, function() { 
        $('.headhighlight').hide(); 
    });
});</script> 
```

**php**

```
 $name = $info['name'];
    $price = $info['price'];
    $imagefile = $info['picture'];

    echo "<ul class='featured'>";

                echo "<li class='headhighlight'>$name</li>";  
                echo  "<li class='pricehigh'>£ $price</li>";
                echo  "<li class='imagefeat'><img src='$imagefile'></li>";
                    echo "</ul>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:00:40.530

而不是绑定到列表中的每个项目，只需将处理程序绑定到列表本身。然后调整您的处理程序以显示`headhighlight`作为当前悬停列表的后代的项目：

```
$(function() {
    $('.featured').hover(function() { 
        $('.headhighlight', this).show(); 
    }, function() { 
        $('.headhighlight', this).hide(); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:59:39.340

尝试：

```
$('.imagefeat,.pricehigh,.headhighlight').hover(function() { 
    $(this).find('.headhighlight').eq(0).show(); 
}, function() { 
    $(this).find('.headhighlight').eq(0).hide(); 
}); 
```

# asp.net - 我需要为 wif 学习多少 ASP.NET

> ID：14047301
> 
> 赞同：0
> 
> 时间：2012-12-26T22:56:05.193
> 
> 标签：asp.net, wif, claims-based-identity

我打算在我的毕业项目中使用基于声明的身份，我知道我需要学习一些 ASP.NET，因为没有时间研究整个 ASP.NET 我想知道什么是核心概念学习 ASP.NET 以开始使用 WIF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:08:42.260

我的几个团队最近一直致力于将 WIF 引入我们现有的产品中。根据我对他们遇到的问题的了解，您将更容易尝试设计 WIF，而不是像他们那样对其进行改装。

但是，我认为了解表单身份验证以及 ASP.NET 页面生命周期对您来说仍然是明智的。您显然想了解更多信息以使您的网站做任何有趣/有用的事情，但从纯粹的 WIF 角度来看，我认为您可以从那里开始涉足它。

关于 WIF 和 STS' 的全部意义在于它们在逻辑上与您的应用程序或站点的其余部分分开 - 因此您不需要太多关于 ASP.NET 的知识来使用 WIF - 在某些方面它应该就像管道一样你的洗衣机，你不需要了解水是如何到达你家的，你不需要深入了解洗衣机旋转周期是如何编程的，你只需要知道如何连接它们。

# python - 如何使 fetch 方法返回 INTEGER 列的 int 值而不是字符串 Python sqlite？

> ID：14047303
> 
> 赞同：4
> 
> 时间：2012-12-26T22:56:14.010
> 
> 标签：python, sqlite

我正在尝试使用此代码从 sqlite 数据库列中读取所有温度值，但输出显示`[(u'29',), (u'29',), (u'29',)]`并且我仅将数值存储在数据库中。我希望输出是`[29, 29, 29]`

```
import sqlite3

conn = sqlite3.connect("growll.db")
cursor = conn.cursor()

print "\nHere's a listing of all the records in the table:\n"
cursor.execute("select lchar from GrowLLDados")

print cursor.fetchall() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T23:03:44.227

尝试这个：

```
import sqlite3

conn = sqlite3.connect("growll.db")
cursor = conn.cursor()

print "\nHere's a listing of all the records in the table:\n"
cursor.execute("select lchar from GrowLLDados")    

print [int(record[0]) for record in cursor.fetchall()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:00:17.543

`print [int(i[0]) for i in cursor.fetchall()]`

让我知道你是怎么办的。

# php - 取消工作链接

> ID：14047304
> 
> 赞同：0
> 
> 时间：2012-12-26T22:56:22.197
> 
> 标签：php

试图删除一个文件，但它拒绝被删除。我尝试了以下内容，其中包含检查文件已存在且其他 .db 文件为空白的 if 语句。路径是正确的，将其设置为 666，以便可以删除，然后取消链接，然后将文件写回，其中包含“打开”一词。

```
if(file_exists("results_files/linktracker/linktrackerlock.txt") && file_get_contents("results_files/linktracker/linktracker.db") == "") {  // check for reset condition, ie. db file wiped
    chmod("results_files/linktracker/linktrackerlock.txt", 0666);
    unlink("results_files/linktracker/linktrackerlock.txt");
    file_put_contents("results_files/linktracker/linktrackerlock.txt", "open");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:59:41.737

`chown`将更改作为第一个参数传递的文件的所有权，您最好使用`chmod`（用于更改权限）。

# wordpress - 使用 Wordpress 安装在本地服务器中重定向域

> ID：14047305
> 
> 赞同：2
> 
> 时间：2012-12-26T22:56:30.343
> 
> 标签：wordpress, .htaccess, mod-rewrite

我使用 Uniserver 作为本地服务器，并且在其下有几个子目录`www`，每个子目录模拟不同的域。

例子：

`http://localhost/WPTest/`是安装了 Wordpress 的 WPTest 站点

`http://localhost/WPTest1/`是有另一个 Wordpress 安装的 WPTest1 站点

我想做但没能做的就是重定向 `http://localhost/WPTest/`到`http://WPTest`和`http://localhost/WPTest1/`只是到`http://WPTest1`，等等。

我将不胜感激任何帮助，或者至少告诉我是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:09:53.657

让 Uniserver 为您完成工作：

创建一个`Virtual Host`开口`Server Configuration -> Apache -> Apache Vhosts`

输入`Document Root`路径（即 ./whatever/www/WPTest）。

输入`Server Name`（即“wptest”）。仅使用小写字母。

选择`Confirm`

重新启动 Apache 服务器。

现在在 Wordpress 中，转到`http://localhost/WPTest/wp-admin`.

中`Settings -> General`，修改：

`WordPress Address (URL)`并将`Site Address (URL)`实际的 URL 替换为 `http://wptest`

重启WP。

就这样。现在可以在以下位置访问虚拟 Wordpress 站点`http://wptest`

对每个子目录重复相同的步骤。

# javascript - Post 200 OK 页面未上传

> ID：14047310
> 
> 赞同：0
> 
> 时间：2012-12-26T22:56:51.933
> 
> 标签：javascript, express

我正在快速运行一个应用程序。我有一个 Button。当它被推送时，它会向服务器发送一个 Post。200 好的，我有 HTML 页面。在 Firebug 中，我可以在 200 OK 中看到 HTML 有效负载。

但是我在 Broswer 上的页面没有刷新/上传。

是否应该做任何事情来刷新（或）类似的 url。

我正在使用这个： res.sendfile('./temp.html');

节点片段是：

```
app.get('/', function(req, res){                                      
res.sendfile('./temp1.html');
});

app.post('/next', function(req, res){
res.sendfile('./temp3.html');                                   
}); 
```

我试图理解为什么当 200 OK to post 有数据但它没有显示在浏览器中时。它仍然有 temp1.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:39:13.977

您希望发出重定向，而不是 200 ok。

使用 Express.js 就是这行代码

`res.redirect('./temp3.html');`

代替

`res.sendfile('./temp3.html)`

对于您的另一个问题，它试图访问位于此路径的文件：`./temp3.html`，`./`表示当前目录`../`是父目录，我假设它是您所追求的。

至于你的第三个问题，如果你不希望它在重定向时附加到 url，据我所知，如果你使用“普通帖子”行为，恐怕你会不走运。

我认为它可以使用 ajax 魔法，但是其他人必须纠正我。

[在此处阅读 Express res.redirect() 文档](http://expressjs.com/api.html#res.redirect)

# smalltalk - Zinc HTTP 组件和 VisualWorks

> ID：14047313
> 
> 赞同：1
> 
> 时间：2012-12-26T22:57:08.330
> 
> 标签：smalltalk, visualworks

有没有办法在 VisualWorks 中使用 Zinc HTTP 组件，有人成功地做到了这一点吗？

亨里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:36:56.997

VisualWorks 有自己的 HTTP 框架（包 HTTP、HTTPS 等）。从网络下的 Parcel Manager 加载 NetClients。它的 API 与 Zinc 相似但不等同。

您可以查看 CloudFork（用于 OpenID、OAuth AWS 等云服务的 API）作为可移植层的示例，以便以可移植的方式使用来自 Squeak、Pharo、VA 和 VisualWorks 的 HTTP 客户端。

# ruby - 使用来自 Twitter 的 javascript 的 bootstrap-sass gem

> ID：14047316
> 
> 赞同：3
> 
> 时间：2012-12-26T22:57:32.650
> 
> 标签：ruby, ruby-on-rails-3, html, twitter-bootstrap, bootstrap-sass

我正在尝试实现工具提示功能，如下所示：http: [//twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)使用 Ruby on Rails 3 的 Bootstrap-sass gem。我已经完成了以下操作，但它没有'不起作用（当我将鼠标悬停在文本上时，文本不会出现）：

在宝石文件中：

```
gem 'bootstrap-sass', '2.1' 
```

在 application.js 中：

```
//= require bootstrap 
```

在 show.js.erb 中：

```
$('#example').tooltip(options); 
```

在 show.html.erb 中：

```
<a href="#" id="example" title="first tooltip" data-placement="right">
  hover over me</a> 
```

为什么这不起作用？

应用程序.js：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

视图/布局/application.html.erb：

```
<!DOCTYPE html>
<html>
<head>
<title><%= full_title(yield(:title)) %></title>
<%= stylesheet_link_tag "application", media: "all" %>
<%= javascript_include_tag "application" %>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js?ver=1.4.0"></script> 
<%= csrf_meta_tags %>
<%= render 'layouts/shim' %>
</head>
<body>
<%= render 'layouts/header' %>
<div class="container">
  <%= yield %>
  <%= render 'layouts/footer' %>
  <%= debug(params) if Rails.env.development? %>
 </div>
</body>
</html> 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'
gem 'bootstrap-sass', '2.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

gem 'uglifier', '>= 1.0.3'
end

group :development do
  gem 'annotate', '2.5.0'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T20:44:27.817

你需要这个：

```
// Loads all Bootstrap javascripts
//= require bootstrap 
```

来自[https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)

# delphi - Delphi XE3 DataSnap 服务器中的访问请求标头

> ID：14047317
> 
> 赞同：5
> 
> 时间：2012-12-26T22:57:49.370
> 
> 标签：delphi, datasnap, delphi-xe3

我正在 Delphi XE3 中实现一个 REST 服务器 API（大约十年来第一次使用 Delphi，所以有点生疏）。目前它正在使用 Indy 服务器进行调试，但最终它将是一个 ISAPI dll。

现在我已经实现了许多 TDSServerClass 类，并希望在类方法中访问请求标头。因此，例如，当用户请求 mysite.com/datasnap/rest/foo/bar 时，我希望能够读取名为 bar 的 foo 类方法中的标题。这可能吗？

如果没有，是否可以在传入请求到达 REST 类方法之前创建一个全局过滤器？我需要检查传入请求的 API 密钥和用户身份验证，并且不确定实现的最佳方式。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:48:47.137

我不知道 XE3 中是否有任何变化，但在 XE2 中您可以执行以下操作：

```
uses
  Web.HTTPApp,
  Datasnap.DSHTTPWebBroker;

function TServerMethods1.EchoString(Value: string): string;
var
  Module: TWebModule;
begin
  Module := GetDataSnapWebModule;
  Result := Module.Request.RemoteIP + ': ' + Value;
end; 
```

# php - mysql查询到数组

> ID：14047323
> 
> 赞同：1
> 
> 时间：2012-12-26T22:58:30.680
> 
> 标签：php, mysql, arrays

我是 php 新手。我不知道如何查询我的数据库来列出这个模型。对于每个数组，我想查询数据库以仅列出与“”中左侧相关的内容。我的数据库由 2 个表组成。

表 1 = 专辑

身份证，姓名

表 2 = 图片

id、专辑、picPath

```
$q_albums = array(

            'People' => array(
                        ALBUM_PATH.'4.jpg',
                        ALBUM_PATH.'11.jpg',
                        ALBUM_PATH.'10.jpg'),               
            'Nature' => array(
                        ALBUM_PATH.'2.jpg',
                        ALBUM_PATH.'3.jpg',
                        ALBUM_PATH.'5.jpg',
                        ALBUM_PATH.'6.jpg',
                        ALBUM_PATH.'7.jpg'),                            
            'Art'   => array(
                        ALBUM_PATH.'1.jpg',
                        ALBUM_PATH.'8.jpg',
                        ALBUM_PATH.'9.jpg',
                        ALBUM_PATH.'2.jpg'),                
            'Wilderness' => array(
                        ALBUM_PATH.'3.jpg',
                        ALBUM_PATH.'2.jpg',
                        ALBUM_PATH.'5.jpg',
                        ALBUM_PATH.'7.jpg',
                        ALBUM_PATH.'6.jpg'),                            
            'Photography' => array(
                        ALBUM_PATH.'8.jpg',
                        ALBUM_PATH.'1.jpg',
                        ALBUM_PATH.'9.jpg',
                        ALBUM_PATH.'12.jpg'),                           
            'Fashion' => array(
                        ALBUM_PATH.'11.jpg',
                        ALBUM_PATH.'4.jpg',
                        ALBUM_PATH.'10.jpg'),

        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:24:55.950

正如 dev-null-dweller 所说，您需要在循环中从查询结果构建数组。幸运的是，这很容易：

```
$sql = <<<END
  SELECT album.name AS albumName, picture.picPath AS picPath
  FROM album JOIN picture ON album.id = picture.album
END;

$res = $mysqli->query( $sql );
$q_albums = array();
while ( $row = $res->fetch_object() ) {
    // this line actually build the array, entry by entry:
    $q_albums[ $row->albumName ][] = $row->picPath; 
}
$res->close(); 
```

**编辑：**正如 Radical 先生所说，如果您希望结果包含空专辑，您应该将 更改`JOIN`为`LEFT JOIN`. 如果你这样做，查询将为任何空专辑返回一个带有空值的行`picPath`，因此你必须以某种方式处理这些空路径。一种方法是在构建数组后包含类似以下代码的内容：

```
foreach ( $q_albums as $album => &$pics ) {
    // remove dummy null entries from empty albums
    if ( !isset( $pics[0] ) ) array_shift( $pics );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:33:01.207

@Ilmari Karonen 我会使用**LEFT JOIN**而不是**JOIN**。 `SELECT album.name AS albumName, picture.picPath AS picPath FROM album LEFT JOIN picture ON album.id = picture.album`

# android - 动态创建的表行未显示在视图中

> ID：14047331
> 
> 赞同：0
> 
> 时间：2012-12-26T22:59:06.443
> 
> 标签：android

> **可能重复：**
> [以编程方式将 TableRow 添加到 TableLayout 不起作用](https://stackoverflow.com/questions/7279501/programatically-adding-tablerow-to-tablelayout-not-working)

这里的代码：

```
DtoCbpOutcome[] outcomes = cbp.Outcomes;
Log.d(_logTag, "# of outcomes: " + Integer.toString(outcomes.length));
TableLayout tl = (TableLayout) findViewById(R.id.tbl_cbp_outcomes);
for (int i = 0; i < outcomes.length; i++) {

    // Text Views:
    // public String Description;

    TableRow tr = new TableRow(appCtx);
    tr.setLayoutParams(tbl_lay_parms);

    // Row Count
    TextView row_num = new TextView(appCtx);
    temp_string = Integer.toString(i + 1);
    row_num.setText(temp_string);
    row_num.setLayoutParams(lay_parms);
    tr.addView(row_num);

    // Description
    TextView desc = new TextView(appCtx);
    temp_string = outcomes[i].Description;
    desc.setText(temp_string);
    desc.setLayoutParams(lay_parms);
    tr.addView(desc);

    tl.addView(tr, tbl_lay_parms);
} 
```

从布局文件：

```
 <TableLayout
            android:id="@+id/tbl_cbp_outcomes"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingBottom="5dp" >
        </TableLayout> 
```

我认为这是我正在构建的结构：

```
TableLayout (R.id.tbl_cbp_outcomes)
    TableRow (tr)
        TextView (row_num)
        TextView (desc) 
```

但该行未显示在布局视图 (activity_business_plan.xml) 中。

我在这里做错了什么？

谢谢

**更新 1**

从日志*中：结果数：5*，由`outcomes.length`

**更新 2**

完整的布局xml：

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_project_relationships"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TextView
            android:id="@+id/tv_cbp_rel_global_priorities"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="3dp"
            android:text="@string/double_dash" />
        <TextView
            android:id="@+id/tv_cbp_related_regional_priority_strategies"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="3dp"
            android:text="@string/double_dash" />
        <TextView
            android:id="@+id/tv_cbp_related_whole_system_priorities"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="3dp"
            android:text="@string/double_dash" />
        <TextView
            android:id="@+id/tv_cbp_related_demonstration_priorities"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="3dp"
            android:text="@string/double_dash" />
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_vision_statement"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TextView
            android:id="@+id/tv_cbp_vision_statement"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="3dp"
            android:text="@string/double_dash" />
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_outcomes"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TableLayout
            android:id="@+id/tbl_cbp_outcomes"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingBottom="5dp" >
        </TableLayout>
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_strategies"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TableLayout
            android:id="@+id/tbl_cbp_strategies"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingBottom="5dp" >
        </TableLayout>
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_intermediate_results"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TableLayout
            android:id="@+id/tbl_cbp_intermediate_results"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingBottom="5dp" >
        </TableLayout>
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_activities"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TableLayout
            android:id="@+id/tbl_cbp_activities"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingBottom="5dp" >
        </TableLayout>
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_risks"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TableLayout
            android:id="@+id/tbl_cbp_risks"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingBottom="5dp" >
        </TableLayout>
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@color/green_nature_header"
            android:padding="3dp"
            android:text="@string/label_keywords"
            android:textColor="@color/White"
            android:textStyle="bold" />
        <TextView
            android:id="@+id/tv_cbp_keywords"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="3dp"
            android:text="@string/double_dash" />
        <TextView
            android:id="@+id/tv_cbp_modified"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:padding="3dp"
            android:text="@string/double_dash"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:18:49.043

我不知道是不是这样，但是：

你在 *tl.addView(tr, tbl_lay_parms);中使用“TableLayout.LayoutParams”吗？*

*以及tr.setLayoutParams(tbl_lay_parms)*中的“TableRow.LayoutParams” ；

 *我认为它是不同的，请检查这个[http://en.androidwiki.com/wiki/Dynamically_adding_rows_to_TableLayout](http://en.androidwiki.com/wiki/Dynamically_adding_rows_to_TableLayout)

最好的祝福*

# ios - 在使用 AFNetworking/RestKit 发送的 PATCH 请求上获取 401，但从浏览器发送 202

> ID：14047333
> 
> 赞同：0
> 
> 时间：2012-12-26T22:59:18.310
> 
> 标签：ios, django, restkit, afnetworking, tastypie

所以我使用 Tastypie 在我的 Django 服务器上运行了这个 RESTful API。所以我正在从 javascript 中执行以下代码，一切正常。

```
 var newData = {};
       newData["content"] = "This is a new test";
       $.ajax({ 
           type: 'patch',
           contentType: "application/json; charset=utf-8",
           url: "/api/rest/sopsteps/17/",
           data: JSON.stringify(newData),
           dataType: "json",                    
           success: function(data, status) {
               alert("success");
           },
           error: function(data, status){
               alert(data + " STATUS : " + status);
           },
       }); 
```

现在，如果我使用 AFNetworking/RestKit 执行以下操作，我总是会返回 401。

[26/Dec/2012 16:20:20]“补丁/api/rest/sopsteps/17/HTTP/1.1”401 0

```
NSDictionary* params = [[NSDictionary alloc] initWithObjectsAndKeys: _contentTextView.text, @"content", nil];

NSString *path = [NSString stringWithFormat:@"/api/rest/sopsteps/%@/",((PokaSOPStep *)_step).identifier];

[[objectManager HTTPClient]patchPath:path parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject)
 {
     _step.content = _contentTextView.text;
     NSLog(@"%@", operation.responseString);
 }
                            failure:^(AFHTTPRequestOperation *operation, NSError *error)
 {
     if(operation.responseData)
     {
         id json = [NSJSONSerialization JSONObjectWithData:operation.responseData options:0 error:nil];
         if(!json)
         {
             NSLog(@"An unexpected error occurred. No JSON from Server");
         }
         else
         {
             NSLog(@"An unexpected error occurred.");
         }
     }
     else
     {
         NSLog(@"The Server is currently not responding.");
     }

 }]; 
```

但如果我从浏览器中执行此操作，我会得到：

[26/Dec/2012 16:54:57]“补丁/api/rest/sopsteps/17/HTTP/1.1”202 0

有任何想法吗？！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:06:57.480

401 是“未授权”的 HTTP 代码。您在浏览器和 AFNetworking 中获得不同结果的原因是您登录的是前者，而不是后者（您可以通过在另一个浏览器中尝试进行检查）。

我不知道您为服务器设置了哪种身份验证方案，但您需要先在 iOS 上登录，然后才能发出该请求。

# android-layout - 布局未按计划进行。权重已设置但越过屏幕边缘

> ID：14047336
> 
> 赞同：0
> 
> 时间：2012-12-26T22:59:35.577
> 
> 标签：android-layout

我正在尝试创建一个新布局。我使用的最后一个布局是 GridLayout，基本上创建了一个 3 列 8 行的表格。使用 rowspan，我能够在 Eclipse 中实现我想要的外观，但是我的手机屏幕比 Eclipse 长一点，它显示第 1 列和第 2 列看起来不错，但第 3 列向右拉伸。

新布局如下所示： ![在此处输入图像描述](../Images/6b6ff26efbf990105761b8b6e3e52d07.png)

** 您可以看到右侧的箭头远远超出屏幕边缘，我不知道为什么。我正在尝试创建一个在不同设备上使用时会适当缩放的布局。

XML 代码如下：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:weightsum="1.0" >

            <ImageView
                android:id="@+id/arrowLeft"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight=".33"
                android:src="@drawable/arrowleftoff" />

            <Space 
                android:layout_width="0dp" 
                android:layout_height="match_parent"
                android:layout_weight=".34" />

            <ImageView
                android:id="@+id/arrowRight"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight=".33"
                android:src="@drawable/arrowrightoff" />

        </LinearLayout>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </LinearLayout>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </LinearLayout>

    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:51:37.140

该问题是由于缺乏对 Eclipse 在布局方面的工作方式的理解引起的。首先，Eclipse 可视化布局编辑器中显示的屏幕是一个“示例”，说明在窗口顶部选定设备（在我的情况下为 Nexus S）时它的外观。

其次，我使用的布局没有锚定到某些元素或父元素。因此，当屏幕尺寸发生变化时，布局也会随之变化。

结论：我现在正在使用和理解RelativeLayout，一旦你弄清楚它就会产生奇迹。

这是一个很好的资源，它真正帮助我了解发生了什么： [Mobile Tuts Plus：布局基础](http://mobile.tutsplus.com/tutorials/android/android-layout/)

# mongodb - 解释 Mongo 的 serverStatus 数据

> ID：14047340
> 
> 赞同：0
> 
> 时间：2012-12-26T22:59:42.607
> 
> 标签：mongodb, health-monitoring

我们正在为使用 Mongo DB 的服务器构建监控程序。关于健康检查，我看到很多评论说“serverStatus”命令提供了很多信息，而且看起来确实如此。我正在寻找的是关于解释这些数据和随着时间的推移返回数据的趋势的讨论。

有没有人有这样的参考链接？我知道我离直接的编程问题有点远。也许 StackOverflow 是错误的论坛；在这种情况下，你能指出我正确的方向吗？

（2013 年向所有代码抛投者致以最良好的祝愿！）

CVSDave

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-01T09:55:23.970

Indeed`serverStatus`是 MongoDB 提供的最完整的原生指标收集命令。它返回一个文档，其中包含您应该跟踪的大多数关键指标的统计信息，以便正确监控您的 MongoDB 集群：连接、操作、日志、后台刷新、锁定、游标、内存、断言......您可以找到它[在此处](https://docs.mongodb.com/manual/reference/command/serverStatus/#output)返回的完整指标列表。

为了回答您的问题，[这篇文章](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-wiredtiger/)详细介绍了如何正确解释这些统计信息（来自此`serverStatus`命令以及来自`dbStats`and `replSetGetStatus`）、如何关联它们、它们应该具有什么值以及它们不应随着时间的推移而超过的阈值。（这篇文章是针对 WiredTiger 存储引擎的，但也有[一个专门针对 MMAPv1 的](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-mmap/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:10:53.103

文档中有一个页面涵盖了服务器状态命令的输出。你可以在[这里](http://docs.mongodb.org/manual/reference/server-status/)找到它。该页面并不是真正讨论随时间变化的趋势，因此它不完全是您正在寻找的内容，但它应该涵盖所有输出值及其含义。

您可以查看 MMS，它利用了[此处](http://mms.10gen.com)的服务器状态输出中的大部分信息。MM 还根据时间测量此活动。

有关监控 MongoDB 数据库的更一般概述，您可以查看文档中的[此页面](http://docs.mongodb.org/manual/administration/monitoring/)。这也与其他第三方监控解决方案有链接。

# windows - 使用 FileSystemWatcher 在 Windows 服务中一次处理多个文件时出现问题

> ID：14047341
> 
> 赞同：1
> 
> 时间：2012-12-26T22:59:54.030
> 
> 标签：windows, multithreading, windows-services, filesystemwatcher

当我尝试同时处理多个文件时（它们同时被创建并转储到一个文件夹中），我的服务就会终止。

当我没有尝试使用线程并且在 Watcher_Created 事件中进行了所有处理（ProcessFiles 方法中的代码现在所在的位置）时，至少有一个文件成功通过。

当我添加线程时（我很确定我必须为此做，但完全不确定使用线程的确切流程和语法），我在我的 ProcessFiles 方法中得到以下消息：

System.ArgumentException：空路径名不合法。在 System.IO.FileStream.Init（字符串路径、FileMode 模式、FileAccess 访问、Int32 权限、Boolean useRights、FileShare 共享、Int32 bufferSize、FileOptions 选项、SECURITY_ATTRIBUTES secAttrs、String msgPath、Boolean bFromProxy、Boolean useLongPath）

上面的 msg 出现在 using 行：

```
private static void ProcessFiles()
        {
            try
            {
Thread.Sleep(500);

GetCruiseLineShipName(fullFileName, ref cruiseLine, ref shipName);
using (StreamReader sr = new StreamReader(File.Open(fullFileName, FileMode.Open, FileAccess.Read, FileShare.Read))) 
```

这很明显，因为“fullFileName”是一个空字符串。但是，它确实在 Watcher_Created 事件中设置：

```
private static void Watcher_Created(object sender, FileSystemEventArgs e)
        {
            fullFileName = e.FullPath;
        } 
```

所以，我不明白为什么 fullFileName 变量是一个空字符串。我知道它一定与我正在尝试的线程有关。

我的 OnStart 事件如下所示：

```
protected override void OnStart(string[] args)
        {
            FileSystemWatcher Watcher = new FileSystemWatcher(@"C:\DropOff_FTP\MIS");

            Watcher.EnableRaisingEvents = true;
            Watcher.Created += new FileSystemEventHandler(Watcher_Created);
            Watcher.Filter = "*.txt";
            Watcher.IncludeSubdirectories = false;
            Watcher.InternalBufferSize = 64;

            Thread t = new Thread(new ThreadStart(ProcessFiles));
            t.Start();
        } 
```

有人可以告诉我如何使用 FileSystemWatcher 来处理同时转储在那里的多个文件。如果我需要使用线程，您能否根据上面的代码提供我将如何使用线程？

顺便说一句，我正在使用 4.0 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:27:25.613

从概念上讲，这里有问题。如果我理解正确，您在同一个文件夹中创建了两个时间差很短的文件。然后您收到第一个事件并在全局变量 fullFileName 中设置一个文件的名称，并且您希望正在运行的线程使用全局变量处理此文件，但同时发生另一个事件 Created 并且您更改了全局变量单独的线程正在处理

我将尝试以这种方式更改您的代码：

该`OnStart`方法释放了启动线程的代码

该`Watcher_Created`事件将启动传递引发事件的文件名的线程

```
.....
Thread t = new Thread(ProcessFiles);
t.Start(e.FullPath);
..... 
```

`ProcessFiles`接收带有要处理的文件名的参数...

```
public void ProcessFiles(object argument) 
{
      string fullFileName = (string)argument;
      GetCruiseLineShipName(fullFileName, ref cruiseLine, ref shipName);
      using (StreamReader sr = new StreamReader(File.Open(fullFileName, ....))
      .....
} 
```

# javascript - 升级到 rails 3.2.9 后无法专注于输入

> ID：14047353
> 
> 赞同：0
> 
> 时间：2012-12-26T23:00:45.920
> 
> 标签：javascript, jquery, ruby-on-rails

我将rails升级到`3.2.9`之后我不能`focus`在这个脚本中使用jQuery函数：

```
$('#password-clear').show();
$('#password-password').hide();

$('#password-clear').focus(function() {
    $('#password-clear').hide();
    $('#password-password').show();
    $('#password-password').focus();
});
$('#password-password').blur(function() {
    if($('#password-password').val() == '') {
        $('#password-clear').show();
        $('#password-password').hide();
    }
}); 
```

在我关注 #password-clear 之后，我仍然看到 #password-clear

如何调试发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:48:02.497

你是否也改变了你的 jQuery 版本？你有任何 JavaScript 错误吗？如果您使用的是 Chrome，您可以打开 Web 检查器（查看 > 开发人员 > 检查器）并检查是否有任何错误阻止您的代码运行。

# javascript - 命名空间内的公共函数内的静态成员

> ID：14047360
> 
> 赞同：2
> 
> 时间：2012-12-26T23:01:34.100
> 
> 标签：javascript

如何使函数内的静态成员在命名空间内公开

```
var myNamespace= new function()
{
    this.myClass= function Page()
    {
        this.MyStaticVar = "myValue";
    }
}

$("#block").html(myNamespace.myClass.MyStaticVar); 
```

[http://jsfiddle.net/DSs6r/97/](http://jsfiddle.net/DSs6r/96/)

请在那里尝试...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:04:05.410

“命名空间”不应该是一个函数，`this`在任何一种情况下都不正确。

```
var myNamespace = {
    myClass: function Page() {
    }
};

myNamespace.myClass.MyStaticVar = "myValue"; 
```

[（更新 jsFiddle）](http://jsfiddle.net/DSs6r/98/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:08:20.000

像这样：

```
var ns = {
   Class: {
       myStaticVar: 'myValue' 
   }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:35:30.507

这里唯一真正的主要问题是您使用了命名函数而不是匿名函数 ( `function Page()`)。没有名称，您的代码可以正常工作：

```
var myNamespace = new function()
{
 this.myClass = new function()
 {
  this.MyStaticVar = "myValue";
 };
}; 
```

这是一个显示代码工作的 jsfiddle：http: [//jsfiddle.net/DSs6r/101/](http://jsfiddle.net/DSs6r/101/)

您很可能正在寻找这样的设置：

```
var myNamespace = new function()
{
 var Page = function(){
     var MyStaticVar = "myValue";
     var MyDynamicVar = "";

     function SetDynamicVar(val){
      MyDynamicVar = val;  
     };

     function GetDynamicVar(){
      return MyDynamicVar;  
     }

     return{
         MyStaticVar: MyStaticVar,
         SetDynamicVar: SetDynamicVar,
         GetDynamicVar: GetDynamicVar
     };
 };
 this.myClass = new Page();
}; 
```

这将允许这样的事情：

```
myNamespace.myClass.SetDynamicVar("someValue")
$("#block").html(myNamespace.myClass.GetDynamicVar()); 
```

和：

```
$("#block").html(myNamespace.myClass.MyStaticVar); 
```

这是工作小提琴：http: [//jsfiddle.net/DSs6r/102/](http://jsfiddle.net/DSs6r/102/)

# php - 不同的标题图像取决于类别页面

> ID：14047361
> 
> 赞同：0
> 
> 时间：2012-12-26T23:01:49.383
> 
> 标签：php, wordpress, if-statement

我正在编辑 wordpress 的第二十二个主题。我希望通过 slug 名称根据类别存档页面获得不同的标题图像。这不是真正的问题，我缺乏 php 知识，而且我的标记有问题，或者缺少一些括号或关闭 php 标记，我会很感激看到问题所在！

这是下面的代码，我想要它做的是当查看足球页面时，它将具有与该页面不同的图像，与棒球相同。每个其他页面将只使用在二十二个主题选项的后端使用的标题图像。

```
 <?php $header_image = get_header_image();

 if(    is_category( 'basball' ) )  : 

<img src="banner1.jpg" alt="baseball"/>

elseif( is_category( 'football' ) )  : 

 <img src="banner2.jpg" alt="football"/>

else ( ! empty( $header_image ) ) : ?>
        <a href="<?php echo esc_url( home_url( '/' ) ); ?>"><img src="<?php echo esc_url( $header_image ); ?>" class="header-image" width="<?php echo get_custom_header()->width; ?>" height="<?php echo get_custom_header()->height; ?>" alt="" /></a>
    <?php endif; ?> 
```

错误消息：解析错误：语法错误，第 60 行 /home/topteamf/public_html/wp-content/themes/twentytwelve/header.php 中的意外 '<'

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:12:21.480

你没有关闭你的 PHP 标签。您必须将 HTML 和 PHP 分开。像这样：

```
<?php $header_image = get_header_image();

if(    is_category( 'basball' ) )  : ?>

<img src="banner1.jpg" alt="baseball"/>

<?php elseif( is_category( 'football' ) )  : ?>

<img src="banner2.jpg" alt="football"/>

<?php elseif( ! empty( $header_image ) ) : ?>
    <a href="<?php echo esc_url( home_url( '/' ) ); ?>"><img src="<?php echo esc_url( $header_image ); ?>" class="header-image" width="<?php echo get_custom_header()->width; ?>" height="<?php echo get_custom_header()->height; ?>" alt="" /></a>
<?php endif; ?> 
```

# multithreading - C、确定第三方函数的栈使用情况

> ID：14047365
> 
> 赞同：1
> 
> 时间：2012-12-26T23:02:06.470
> 
> 标签：multithreading, function, gcc, posix, stack-overflow

不完全是一个不常见的问题，但不是一个我还没有找到适当答案的问题。

基本上，我正在尝试研究如何在我打算编写的线程程序中计算新线程中所需的堆栈大小。

如我所见，我需要确定我调用的每个函数使用多少堆栈，然后使用可能的函数调用链来确定正确的堆栈大小。

现在，使用我自己编写的函数，我可以看到我只是计算出每个函数在使用它使用的变量调用时最多会放入堆栈中的内容。

但是，我不能确定的是第三方函数（例如 glibc 函数）将在堆栈空间方面使用什么。我还决定监视他们的堆栈使用不是一种可接受的方法，因为我不能确定我分析了可能影响第三方函数堆栈使用的所有内容，我也不能确定较新版本的函数可能不会使用比我更多的堆栈空间必需的。

所以我需要一种方法来准确找到任何第三方函数可以使用多少堆栈空间。

建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:41:13.980

通常，这只有在第三方功能的源代码已知时才有可能。有一些工具可以分析每个函数所需的最大堆栈空间并检测递归调用。我在工作中使用的这样一种工具是 Gimpel 的 FlexeLint (Unix) == PClint (Windows)。

# python - 为什么包含'end ='参数的python打印语句在while循环中表现不同？

> ID：14047372
> 
> 赞同：6
> 
> 时间：2012-12-26T23:02:58.233
> 
> 标签：python, while-loop

我在 MacOSX 上运行 python 版本 2.7.3。

考虑这个代码块：

```
from __future__ import print_function
import time
x = 0
while x < 5:
    print(x)
    x += 1
    time.sleep(1) 
```

如果我运行这个脚本，我会观察到我期望的输出：`0`通过每个数字附加`4`一个字符的数字。`\n`此外，每个数字都会在暂停一秒后显示。

```
0
1
2
3
4 
```

现在考虑这个代码块：

```
from __future__ import print_function
import time
x = 0
while x < 5:
    print(x, end='')
    x += 1
    time.sleep(1) 
```

输出是我所期望`01234`的，没有`\n`'s，但*时间*出乎意料。该过程不是在暂停一秒钟后显示每个数字，而是等待四秒钟，然后显示所有五个数字。

为什么它的`print('string')`行为与`print('string', end='')`while 循环不同？有没有办法一次显示没有换行符的字符？我试过`sys.stdout.write(str(x))`了，但它的行为方式与`print(end='')`.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-26T23:04:53.877

因为输出流是行缓冲的——因为它没有在打印语句之间显式刷新，所以它会一直等到看到换行符来刷新输出。

您可以通过 强制冲洗`sys.stdout.flush()`。

或者，如果您使用该`-u`标志运行 Python，它将禁用行缓冲。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T23:08:18.540

这只是 python 缓冲标准输出。[这个答案](https://stackoverflow.com/questions/107705/python-output-buffering)有更多信息。

你可以这样冲洗它：

```
import sys
from __future__ import print_function
import time
x = 0
while x < 5:
    print(x, end='')
    x += 1
    sys.stdout.flush()
    time.sleep(1) 
```

或者启动python `python -u`，它不会被缓冲。

# asp.net - 使用 asp.net 4.5 OAuth 使用 clientid 和 secret 注册 google

> ID：14047382
> 
> 赞同：5
> 
> 时间：2012-12-26T23:04:16.563
> 
> 标签：asp.net, asp.net-mvc, visual-studio, oauth-2.0, oauth-provider

我注意到在 asp.net 4.5 模板中，除了 google 之外的所有授权示例都传入了 secret 和 clientid。如何传递我的谷歌密码和客户端 ID？Brock 在这里有一个很好的讨论，我正在关注：

[http://info.develop.com/blogs/bid/232864/ASP-NET-Using-OAuthWebSecurity-without-SimpleMembership#.UNuBh2_Adv9](http://info.develop.com/blogs/bid/232864/ASP-NET-Using-OAuthWebSecurity-without-SimpleMembership#.UNuBh2_Adv9)

模板附带的示例代码如下。

```
internal static class AuthConfig
{
    public static void RegisterOpenAuth()
    {
        // See http://go.microsoft.com/fwlink/?LinkId=252803 for details on setting up this ASP.NET
        // application to support logging in via external services.

        //OpenAuth.AuthenticationClients.AddTwitter(
        //    consumerKey: "your Twitter consumer key",
        //    consumerSecret: "your Twitter consumer secret");

        //OpenAuth.AuthenticationClients.AddFacebook(
        //    appId: "your Facebook app id",
        //    appSecret: "your Facebook app secret");

        //OpenAuth.AuthenticationClients.AddMicrosoft(
        //    clientId: "your Microsoft account client id",
        //    clientSecret: "your Microsoft account client secret");

       // OpenAuth.AuthenticationClients.AddGoogle();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:24:45.787

我查看了该类的[源代码。](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5cb74eb3b2f3#src/Microsoft.Web.WebPages.OAuth/OAuthWebSecurity.cs)[`OAuthWebSecurity`](http://msdn.microsoft.com/en-us/library/microsoft.web.webpages.oauth.oauthwebsecurity%28v=vs.111%29.aspx)

Google 的身份验证客户端不需要 AppId/AppSecret 的原因是因为它的实现使用的是**[OpenId](http://en.wikipedia.org/wiki/OpenID)**而**不是[OAuth](http://en.wikipedia.org/wiki/OAuth)**。

如果您想在 Google 中使用 OAuth，则必须编写自己的客户端（至少现在是这样）。

# javascript - Node.js/Express/Jade Javascripts 未按正确顺序加载

> ID：14047386
> 
> 赞同：0
> 
> 时间：2012-12-26T23:05:06.010
> 
> 标签：javascript, node.js, express, pug

假设我在 .jade 文件中有这个

```
doctype 5
html
 head
  title= title
  link(rel='stylesheet', href='/stylesheets/style.css')
  script(src='/javascripts/ocanvas-2.2.2.min.js', type='text/javascript')
  script(src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js")
body
 script(src='/javascripts/main.js') 
```

main.js 文件应该使用之前包含的 ocanvas 中的各种功能。

但是，在我的 node.js 服务器中，它无法这样做，因为 ocanvas 出于某种原因在运行服务器的终端中的 main.js 之后加载：

```
 GET /stylesheets/style.css 304 1ms
 GET /javascripts/main.js 304 1ms
 GET /javascripts/ocanvas-2.2.2.min.js 304 0ms 
```

为什么不按玉文件中的顺序加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:07:40.373

浏览器注意到它已经缓存了这些资源的版本，因此它发送条件请求以检查它们是否已被更改。（304 表示他们没有。）这不一定要以任何特定的顺序发生，浏览器也可以自由地在加载它想要的资源时执行任何优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:12:09.157

我注意到您的 body 标签与您的 html 标签的高度相同，这可能会导致问题。缩进正文标签。

# optimization - 负载平衡加权报告？

> ID：14047387
> 
> 赞同：0
> 
> 时间：2012-12-26T23:05:07.907
> 
> 标签：optimization, language-agnostic, load-balancing

我在一家车队跟踪公司工作，这个问题专门关于我打算如何做报告。让我解释一下我们的环境。我们有 1x 数据库、1x 负载分配进程和 3x 报告处理服务器（假设它们在各个方面都是相等的）。当客户请求报告时，该报告的所有参数都会进入数据库。我目前正在开发一个负载分配应用程序，该应用程序将从数据库中获取待处理的报告，并将它们委托给 3 个报告处理服务器，这些服务器构建并通过电子邮件发送报告。当服务器完成报告（或出现错误）时，它会通知负载分配应用程序。报告可以有各种大小，从 1 天的 1 辆车的 GPS 数据到 3 个月的数百辆车的 GPS 数据。

我可以想到几种方法来进行负载平衡，但我对它们不太满意。我可以让每台服务器最多只做 5 个报告，但是一台服务器可能会得到 5 个小报告，而另一台服务器可能会得到 5 个大报告。我可以做一个“循环”的方法，只是在服务器上按顺序分发报告，但这仍然不能防止任何服务器过载。

我认为我现在最好的想法是计算每个报告需要多少 GPS 数据（这是一项简单的任务），并且当我将报告分配给每个服务器时，我会为每个服务器保留一个运行总数。当服务器完成报告（并通知负载平衡器）时，从该服务器的运行总数中减去该报告的 GPS 数据量。这样，我可以将下一个报告分配给使用最少 GPS 数据的服务器。我还可以设置一个最大值，这样服务器就不会过度工作（导致我们从一开始就重构整个报告流程的问题）。如果在所有服务器都达到最大值时还有更多报告，它可以将它们排队并稍后在服务器完成一些报告时尝试它们。

我不相信这是尽快完成报告的最佳方法。这些只是我迄今为止想出的最好的。

如何优化我的方法以在多台服务器上平衡不同大小的报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:20:25.993

假设您只有一个从中选择数据的主表，那么我将配置一台服务器首先处理所有大报告，然后让其他两个从最小到最大处理。否则可能永远无法完成大型报告。

对于较小的报告，您想在没有更好的情况下尝试让他们尝试运行“类似”报告，这意味着那些围绕主要使用的索引中的相似值聚集的报告。例如，如果服务器刚刚完成了 2011 年 6 月的报告，那么下一个要运行的最佳报告是同一时期，而不是跳到 2012 年 11 月。虽然这取决于实际表格，但我假设您订购了很多日期包含大部分选择的数据。您真正想做的只是将可能重用缓存索引/等的报告分组，因为这应该可以提供最佳吞吐量。

我有一个类似的调度问题，任何针对主要表的查询都转到一台服务器（慢队列），而其他任何查询都转到另一台服务器（快速队列），特殊情况除外。

# asp.net-mvc - MVC模型绑定不绑定嵌套循环上的简单对象

> ID：14047388
> 
> 赞同：2
> 
> 时间：2012-12-26T23:05:23.963
> 
> 标签：asp.net-mvc, binding, model-binding

有这个结构：

索引.cshtml：

```
@foreach (var category in Model) {
    @Html.DisplayFor(m => category.Products)
} 
```

产品.cshtml：

```
...
@Html.Partial("_AddToCartProductViewModel", new CheckoutVC.Models.ModelView.AddToCartProductViewModel(Model))
... 
```

_AddToCartProductViewModel.cshtml ：

```
@model CheckoutVC.Models.ModelView.AddToCartProductViewModel
@using (Ajax.BeginForm("AddToCart", "Cart", new AjaxOptions { LoadingElementId = "loading" + Model.IdProduct, OnSuccess = "showMessage", UpdateTargetId = "cart_widget" })) {
    @Html.HiddenFor(m => m.IdProduct)
    @Html.HiddenFor(m => m.IdPrescriptionType)
    @Html.HiddenFor(m => m.PrescriptionRequired)
    @Html.HiddenFor(m => m.Quantity)
    <span class="p-r-s">@Html.LabelFor(m=>m.IdPrescriptionType)</span>
    @Html.DropDownListFor(m=>m.IdPrescriptionType, new SelectList(Model.PrescriptionOptions, "Item1", "Item2"), String.Empty) 
    <button class="action add @Html.PrescriptionRequiredCss(Model.PrescriptionRequired)" type="submit">agregar al carrito<img class="loading" id="loading@(Model.IdProduct)" alt="" src="@Url.Content("~/Content/images/shared/loading_16x16.gif")" width="16" height="16" /></button>
} 
```

使用此 AddToCartProductViewModel.cs 构造函数：

```
public AddToCartProductViewModel(ProductCheckoutMinVO product, int quantity = 1) {
    IdProduct = product.Id;
    PrescriptionRequired = product.PrescriptionRequired;
    Quantity = 1;
    Promotions = product.Promotions;
}

[Required]
[Min(1)]
public int IdProduct { get; set; }

public int Quantity { get; set; }

public bool? PrescriptionRequired { get; set; }

[Min(0)]
public int IdPrescriptionType { get; set; } 
```

MVC 在提交时生成此请求：

```
category.Products[0].IdProduct:826
category.Products[0].IdPrescriptionType:0
category.Products[0].PrescriptionRequired:False
category.Products[0].Quantity:1
category.Products[0].IdPrescriptionType:1
X-Requested-With:XMLHttpRequest 
```

问题是，我的控制器 CartController.cs ：

```
public RedirectToRouteResult AddToCart(AddToCartProductViewModel product, FormCollection form, string returnUrl = null) {
...
} 
```

FormCollection (form) 确实接收参数，而 AddToCartProductViewModel (product) 不绑定。

我有一些想法，为什么属性没有绑定到产品，以及我如何在这里和那里做一些魔术来从一些嵌套循环中填充一个单一对象表单（其中一个期望请求中的集合对象[一个是框架]） ，但找不到将这种表单场景绑定到 AddToCartProductViewModel 的优雅解决方案。

我可以使用属性直接将其“以某种方式”工作到 AddToCart 方法中，但随后我失去了模型视图上的验证（数据注释）。

如何让 MVC 将这些属性绑定到 AddToCartProductViewModel 视图模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:08:29.913

我想你可以试试：

```
public RedirectToRouteResult AddToCart([Bind(Prefix="category.Products[0]")]AddToCartProductViewModel product, FormCollectionform, string returnUrl = null) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:18:12.870

解决一些问题会带来另一个问题。最终使用 html 标记手动完成，并将数据注释验证排除在外。

*可能*是一个混乱的视图模型问题，我只是不知道，也没有时间或资源让它像我现在想要的那样工作。也许我会在未来尝试解决。

不知道是否有办法结束问题或该怎么做？编辑器可以随意更新。:D

# android - Google maps api v2 - android.app.Fragment 类型无法解析。它是从所需的 .class 文件中间接引用的

> ID：14047391
> 
> 赞同：11
> 
> 时间：2012-12-26T23:05:34.237
> 
> 标签：android, google-maps, android-2.3-gingerbread

我在这里发现了一些关于这个主题的问题，但他们的答案似乎并不适用，因为我的项目正在引用包含该类的库。这是我的代码：

```
 package com.demo.app;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

public class Mapview extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        GPSTracker gps = new GPSTracker(Mapview.this);

        // check if GPS enabled     
        if(gps.canGetLocation()){

            double latitude = gps.getLatitude();
            double longitude = gps.getLongitude();

            // \n is for new line
            // Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show(); 
        }else{
            // can't get location
            // GPS or Network is not enabled
            // Ask user to enable GPS/network in settings
            gps.showSettingsAlert();
        }

        double latitude = gps.getLatitude();
        double longitude = gps.getLongitude();

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();

        GoogleMap mMap;
        mMap = ((MapFragment) getSupportFragmentManager().findFragmentById(android.R.id.content)).getMap();
        mMap.addMarker(new MarkerOptions()
                .position(new LatLng(0, 0))
                .title("Hello world"));

    }
} 
```

所以你可以看到我在导入中引用了 Fragment 库，Eclipse 没有抛出任何错误，所以它似乎承认它存在。在下图中，您可以看到我的 Eclipse 项目显示了引用的库。在其中您可以看到带有 findFragmentById() 的 FragmentManager 类。我还以类似的方式找到了我引用的其他类。所以总而言之，我在 lib 文件夹中有库，它们被 eclipse 确认并且在代码中没有抛出任何错误，但是由于错误，包不会导出，唯一的错误是在 " p" 在包中指出：'类型 android.app.Fragment 无法解析。它是从所需的 .class 文件中间接引用的

[引用的库](https://i.stack.imgur.com/PcLEi.jpg)

有任何想法吗？

我确实尝试过几次清理和重建路径。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-26T23:36:13.077

尝试改变

```
mMap = ((MapFragment) getSupportFragmentManager().findFragmentById(android.R.id.content)).getMap(); 
```

到

```
mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(android.R.id.content)).getMap(); 
```

您必须运行 ICS 之前的 Android 版本，并且您正在使用“MapFragment”，它使用 Fragments 的内置版本而不是支持库版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T22:13:03.783

确保您的目标 SDK 是 3.0 或更高版本。

在Eclipse中，点击Project菜单，点击Properties，点击左侧Android，选择3.0以上的目标SDK。

# python - 烧瓶请求调试

> ID：14047393
> 
> 赞同：8
> 
> 时间：2012-12-26T23:05:37.193
> 
> 标签：python, debugging, flask, tostring

有没有办法将烧瓶中的请求打印为字符串以进行调试？我只想打印发布请求的所有参数，而不必为请求对象编写我自己的格式化程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-01T10:44:41.497

您可以使用[pprint](https://docs.python.org/2/library/pprint.html)模块。

但是，打印请求对象本身不会显示任何有用的信息，因此您可能想要打印*request.environ*。

举个例子：

```
from flask import Flask, Response, request
import pprint

app = Flask(__name__)

@app.route("/test")
def test():
    str = pprint.pformat(request.environ, depth=5)
    return Response(str, mimetype="text/text")

app.run(debug=True) 
```

产量：

```
{'CONTENT_LENGTH': '',
 'CONTENT_TYPE': '',
 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
 'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',
 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8,es;q=0.6',
 'HTTP_CACHE_CONTROL': 'max-age=0',
 'HTTP_CONNECTION': 'keep-alive',
 'HTTP_COOKIE': 'session=eyJsYXN0X2FwcGlkIjoiMiI',
 'HTTP_HOST': '127.0.0.1:5000',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.94 Safari/537.36',
 'PATH_INFO': '/test',
 'QUERY_STRING': '',
 'REMOTE_ADDR': '127.0.0.1',
 'REMOTE_PORT': 36547,
 'REQUEST_METHOD': 'GET',
 'SCRIPT_NAME': '',
 'SERVER_NAME': '127.0.0.1',
 'SERVER_PORT': '5000',
 'SERVER_PROTOCOL': 'HTTP/1.1',
 'SERVER_SOFTWARE': 'Werkzeug/0.9.4',
 'werkzeug.request': <Request 'http://127.0.0.1:5000/test' [GET]>,
 'werkzeug.server.shutdown': <function shutdown_server at 0x10cd1b8>,
 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x7f5211b911e0>,
 'wsgi.input': <socket._fileobject object at 0x1083f50>,
 'wsgi.multiprocess': False,
 'wsgi.multithread': False,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T07:12:16.647

好吧，您可以将请求对象打印为 dict 并在那里查看信息，但我建议尝试[Flask Debug Toolbar](http://pypi.python.org/pypi/Flask-DebugToolbar)，查看所有请求数据等可能会有所帮助。此工具栏是 Django 调试工具栏的端口。

# javascript - 如何使用 Javascript 找到网络访问者的位置？

> ID：14047396
> 
> 赞同：2
> 
> 时间：2012-12-26T23:05:47.737
> 
> 标签：javascript, google-analytics, dom-events, unobtrusive-javascript

谷歌分析能够使用 Javascript 库找到访问者的位置。这如何用 Javascript 来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:12:24.460

navigator.geolocation 对象是您向用户代理询问其位置的方式。根据 UA 的设置，这可能会或可能不会提示用户允许/拒绝发送数据。此外，地理位置数据本身的精度可能非常多变（不过，它们会给您一个余量或误差，因此您可以将其考虑在内）。

```
if (navigator.geolocation) {
    navigator.geolocation.getPosition(
        successFunction,
        failureFunction
    );
} else {
    noGeolocationFunction();
}; 
```

还有一个 watchPosition 方法。两者都是异步的，因此您将成功/失败函数传递给它来处理返回的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:24:02.900

谷歌有一个用于查询访问者位置的 API。[使用 javascript 和 Google API 自动查找网络访问者的位置](http://briancray.com/posts/find-web-visitors-location-javascript-google-api/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Get web visitor's location</title>
        <meta name="robots" value="none" />
    </head>
    <body>
    <div id="yourinfo"></div>
    <script type="text/javascript" src="http://www.google.com/jsapi?key=[apikey]"></script>
    <script type="text/javascript">
        if(google.loader.ClientLocation)
        {
            visitor_lat = google.loader.ClientLocation.latitude;
            visitor_lon = google.loader.ClientLocation.longitude;
            visitor_city = google.loader.ClientLocation.address.city;
            visitor_region = google.loader.ClientLocation.address.region;
            visitor_country = google.loader.ClientLocation.address.country;
            visitor_countrycode = google.loader.ClientLocation.address.country_code;
            document.getElementById('yourinfo').innerHTML = '<p>Lat/Lon: ' + visitor_lat + ' / ' + visitor_lon + '</p><p>Location: ' + visitor_city + ', ' + visitor_region + ', ' + visitor_country + ' (' + visitor_countrycode + ')</p>';
        }
        else
        {
            document.getElementById('yourinfo').innerHTML = '<p>Whoops!</p>';
        }
    </script>
    </body>
</html> 
```

# magento - 调用 Magento TAF 的未定义函数 curl_init()

> ID：14047397
> 
> 赞同：0
> 
> 时间：2012-12-26T23:05:53.947
> 
> 标签：magento, netbeans, selenium, wamp

我正在尝试让 Selenium 在 Wamp 服务器上的 Netbeans 中与 Magento TAF 一起工作。当我运行测试时，我收到以下错误：

> 在第 995 行调用 C:\wamp\bin\php\php5.4.3\pear\PHPUnit\Extensions\SeleniumTestCase\Driver.php 中未定义的函数 curl_init()

当我尝试进行谷歌搜索时，我不断收到启用 curl 的结果，这对我来说毫无意义，因为我确实启用了它。已经启用了一段时间。curl部分的phpinfo中的信息如下：

## 卷曲

*   cURL 支持：**启用**

*   卷曲信息：**7.24.0**

*   年龄：**3**

*   特征

    *   异步DNS：**是的**

    *   调试：**否**

    *   GSS-协商：**是**

    *   国际化域名：**没有**

    *   IPv6：**是的**

    *   大文件：**是的**

    *   NTLM：**是的**

    *   SPNEGO：**没有**

    *   SSL：**是的**

    *   SSPI：**是的**

    *   krb4：**没有**

    *   库：**是的**

    *   CharConv：**没有**

*   协议：**dict、file、ftp、ftps、gopher、http、https、imap、imaps、ldap、pop3、pop3s、rtsp、scp、sftp、smtp、smtps、telnet、tftp**

*   主机：**i386-pc-win32**

*   SSL 版本：**OpenSSL/0.9.8u**

*   ZLib 版本：**1.2.5**

*   libSSH 版本：**libssh2/1.3.0**

在文件的第 995 行，我有以下行：

```
$curl = curl_init(); 
```

当我 ctrl+单击 phpstorm 中的函数时，我被带到：

> C:\Program 文件 (x86)\JetBrains\PhpStorm
> 
> 5.0.4\plugins\php\lib\php.jar!\com\jetbrains\php\lang\psi\stubs\data\curl.php 在那一行我有

```
function curl_init ($url = null) {} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T01:47:16.443

看来您的 IDE 正在引用一个 php.ini，而当您在 WAMP 服务器上运行测试时，它正在引用另一个。

任何一个：

a) 确保您在 IDE 和 WAMP 服务器之间使用相同的 pho.ini 文件，或者；

b) 确保所有 php.ini 文件都没有`extension=php_curl.dll`注释。

# iphone - GL_LINES 画回到顶点末端的第一个点

> ID：14047398
> 
> 赞同：0
> 
> 时间：2012-12-26T23:05:54.647
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0, glkit

在 iOS 上使用 GLKit (OpenGLES 2.0)。

我正在修改一些在 3d 环境中渲染立方体的代码，以便它将在 3d 场景中渲染二维波形。我让它工作得很好，除了一个问题是：

假设我使用 GL_LINES 渲染 nx/y 坐标。它将从 0 -> 1 画一条线，然后是 1 -> 2，依此类推。但是随后点 N 将始终有一条线回到点 0。我希望 GL_LINE_LOOP 对此，但不是 GL_LINES。

如果我不能解决这个问题，我有一个解决方法，那就是使用 2 GL_TRIANGLE_STRIP 来绘制每个线段。我真的很想明白为什么这不起作用。

以下是代码的重要部分：

```
typedef struct {
    float Position[3];
} Vertex;

const NSUInteger kVerticiesSize = 320;
Vertex Vertices[kVersiciesSize] = {};
const GLubyte Indices[] = {
    0,1,
    1,2,
    2,3,
    3,4,
    4,5,
    5,6,
    6,7,
    7,8,
    8,9,
    9,10,
// keeps going to kVerticiesSize 
```

GL 设置

```
- (void)setupGL {
    [EAGLContext setCurrentContext:self.context];
    self.effect = [[GLKBaseEffect alloc] init];

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    glGenBuffers(1, &_indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition,
                          3,
                          GL_FLOAT,
                          GL_FALSE,
                          sizeof(Vertex),
                          offsetof(Vertex, Position));

    float aspect = fabsf(self.bounds.size.width / self.bounds.size.height);
    GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 0.0f, 50.0f);
    self.effect.transform.projectionMatrix = projectionMatrix;
} 
```

以及 Update 和 Render 方法：

```
// Always called once before "render"
-(void)update {
    static bool hasRun = NO;
    for(int x = 0; x < kVersiciesSize; x++){
        // normalize x variable to x coord -1 .. 1 and set Y to math function
        Vertex v = Vertices[x];
        v.Position[0] = [self normalizedX:x];
        v.Position[1] = cos(x);
        v.Position[2] = 0;
        Vertices[x] = v;
        if(!hasRun){
            NSLog(@"x=%f y=%f z=%f", v.Position[0], v.Position[1], v.Position[2]);
        }
    }
    hasRun = YES;
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);
    [self updateTransforms];
}

-(void)render {
    [self.effect prepareToDraw];

    glBindVertexArrayOES(_vertexArray);
    glDrawElements(GL_LINE_STRIP,
                   sizeof(Indices)/sizeof(Indices[0]),
                   GL_UNSIGNED_BYTE,
                   0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:05:42.787

你有：

```
glVertexAttribPointer(GLKVertexAttribPosition,
                      3,
                      GL_FLOAT,
                      GL_FALSE,
                      sizeof(Vertex),
                      offsetof(Vertex, Position)); 
```

但签名`glVertexAttribPointer`是：

```
glVertexAttribPointer (GLuint indx,          // GLKVertexAttribPosition
                       GLint size,           // 3 floats per vertex
                       GLenum type,          // Vertices are GL_FLOAT-s
                       GLboolean normalized, // GL_FALSE
                       GLsizei stride,       // *** Should be 0, no?
                       const GLvoid* ptr);   // *** Should be &Vertices[0], no? 
```

我很确定，如果您提出上面的评论建议，它会起作用。然后你只需渲染整个事情：

```
glDrawArrays(GL_LINES, 0, kVerticiesSize); 
```

或者

```
glDrawArrays(GL_LINES, startIndex, lineCount); 
```

...正确的？

**免责声明：**我不熟悉整个绑定缓冲区管道，但在这种情况下，它让我觉得不必要的复杂性。

**另请注意：**您的文本中提到了 GL_LINES，但您的示例代码使用了 GL_LINE_STRIP。线段的工作方式类似于三角形条，其中前 2 个顶点定义第一条线段，但之后，*每个单个顶点*定义下一条线段，该线段从前一个停止的位置开始。因此，您的顶点索引对于 GL_LINES 是正确的，但是对于 GL_LINE_STRIP，您只需要`{ 0, 1, 2, 3, 4, 5... }`

# objective-c - 如何以相反的方式对 UITableView 进行排序或添加项目？

> ID：14047400
> 
> 赞同：1
> 
> 时间：2012-12-26T23:05:55.450
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

所以，我有一个`UITableView`包含我正在制作的应用程序的条目。这`entriesViewController`是它自己的类，带有一个**.xib**文件。我有一个添加新项目的按钮。

它使用以下代码执行此操作：

```
-(IBAction)newItem:(id)sender {
    LEItem *newItem = [[LEItemStore sharedStore] createItem];
    NSLog(@"New Item = %@", newItem);
    [TableView reloadData];
} 
```

现在这有效，并添加了该项目，但是它将它放在列表的底部。由于此应用程序记录了几天的内容，因此我不希望按此顺序排列这些项目。最新的项目应该放在列表的顶部。我该怎么做呢？我没有看到任何简单的方法可以将项目添加到顶部的表格视图中，但我可能会遗漏一些非常基本的东西。

这似乎不应该很难，我可能只是忽略了一些东西。

欢迎提出想法。

**编辑：**

这里是`LEItem`商店：

```
//
//  LEItemStore.m
//
//  Created by Josiah Bruner on 10/16/12.
//  Copyright (c) 2012 Infinite Software Technologies. All rights reserved.
//

#import "LEItemStore.h"
#import "LEItem.h"

@implementation LEItemStore
+ (LEItemStore *)sharedStore
{
    static LEItemStore *sharedStore = nil;
    if (!sharedStore)
        sharedStore = [[super allocWithZone:nil] init];

    return sharedStore;
}

+ (id)allocWithZone:(NSZone *)zone
{
    return [self sharedStore];
}

-(id)init
{
    self = [super init];
    if (self) {
        NSString *path = [self itemArchivePath];
        allItems = [NSKeyedUnarchiver  unarchiveObjectWithFile:path];

        if (!allItems)
        {
            allItems = [[NSMutableArray alloc] init];
        }
    }

    return self;
}

- (NSArray * )allItems
{
    return allItems;
}
-(LEItem *)createItem
{
    LEItem *p = [LEItem addNewItem];

    [allItems addObject:p];

    return p;
}

- (void)removeItem:(LEItem *)p
{
    [allItems removeObjectIdenticalTo:p];
}

-(void)moveItemAtIndex:(int)from toIndex:(int)to
{
    if (from == to) {
        return;
    }
    LEItem *p = [allItems objectAtIndex:from];

    [allItems removeObjectAtIndex:from];

    [allItems insertObject:p atIndex:to];
}

- (NSString *)itemArchivePath {
    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [documentDirectories objectAtIndex:0];

    return [documentDirectory stringByAppendingPathComponent:@"item.archive"];
}

-(BOOL)saveChanges {
    NSString *path = [self itemArchivePath];

    return [NSKeyedArchiver archiveRootObject:allItems toFile:path];
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:28:09.137

看起来最简单的解决方案是修改`-[LEItemStore createItem]`为：

```
-(LEItem *)createItem {
    LEItem *p = [LEItem addNewItem];
    [allItems insertObject:p atIndex:0];    
    return p;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:14:10.490

即使没有在内部重新排列数组，您也可以这样做。如果您实现数据源并定义此方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

假设您的数组中最旧的对象位于最低索引处，假设您的表格视图有 M 行，则返回一个单元格，其格式为索引 M-rowIndex-1 处的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T23:29:28.457

除非我遗漏了什么，否则在您创建新项目后，而不是使用

```
[allItems addObject:p]; 
```

您只需：

```
[allItems insertObject:p atIndex:0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T23:13:14.840

您是否在项目上有任何类型的 createdDate 或其他可排序属性？只需对您保留的项目列表（或 NSFetchedResultsController）或您通过该属性绑定的任何内容进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T23:28:33.240

您可以覆盖 LEItem 类中的比较机制，并让它轻松比较日期：

```
-(NSComparisonResult)compare:(LEItem*)otherItem {
     return [self.dateCreated compare:otherItem.dateCreated];
} 
```

然后，只需使用`sortArrayUsingSelector:`selector即可`compare:`。

# python - python / django中让用户将文件添加到数据库的最佳方法是什么？

> ID：14047401
> 
> 赞同：0
> 
> 时间：2012-12-26T23:06:04.483
> 
> 标签：python, html, django, url-routing

我试图让用户创建他们可以在我的网站上查看的 html 页面。所以主页只有一个文件上传的地方，然后我网站上的一些脚本会获取文件并将其转换为 html 页面并将其放置在 mysite.com/23klj4d（识别文件名）。据我了解，这意味着 urls.py 文件被更新以路由该 url 以显示文件的 html 页面。是否可以让用户这样做？我将把转换脚本放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:34:32.523

您可以简单地将静态文件写入光盘，然后将它们作为静态文件提供。那会更容易，但这取决于您的其他要求。

但是，根据我对您的问题的理解，您需要：

1.  要上传的表格
2.  插入数据库的上传处理程序本身
3.  基于路径呈现的视图
4.  不确定 urls.py 条目。您需要在其中将这些内容与站点的其余部分分开，并且您可能还需要一些东西来保护您在那里提供的文件扩展名。

*注意：这上面写满了安全漏洞。我会非常小心你如何测试这个。*

# gwt - 这是可接受的 GWT 解决方案吗

> ID：14047403
> 
> 赞同：1
> 
> 时间：2012-12-26T23:06:16.153
> 
> 标签：gwt, user-interface

我想创建一个 GWT UI，我基本上将有一个加载 PanelA 对象的 HTML 页面。然后用户将做他们的事情并最终执行将他们移动到另一个视图/屏幕的操作。
我已经简化了我现有的视图，只包含一个按钮，它将用户移动到下一页等。为简单起见，我只有 2 个视图可以开始。这是我的启动入口点。

```
public class StockWatcher implements EntryPoint 

{
    public void onModuleLoad()
    {
        final RootPanel rootPanel = RootPanel.get();
        rootPanel.add( PanelA.getInstance() );
    }
} 
```

这是 PanelA 类

```
 public class PanelA extends HTMLPanel
    {
        private static PanelA panel;            
        private PanelA()
        {
            super("Panel A");
            final RootPanel rootPanel = RootPanel.get();

            Button btnNewButton = new Button("Go to panel B");
            btnNewButton.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) 
                {
                    rootPanel.clear();
                    rootPanel.add( PanelB.getInstance() );
                }
            });

            add(btnNewButton);
        }

        public static PanelA getInstance()
        {
            if (panel == null)
            {
                panel = new PanelA();
            }
            return panel;
        }
    } 
```

我的其他 PanelB 类与 PanelA 几乎相同，即让我回到 PanelA 的按钮 我的 UI 按需要工作。我的问题是，这种单例类型模式是正确或正确的方法吗？即有一堆单例 UI 视图在主面板上弹出/弹出？此外，通过 GWT 应用程序处理历史/面包屑跟踪的最佳方式是什么，即允许用户返回上一个屏幕，记住他们可能从 PanelA、PanelB 或 PanelC 导航到 PanelX

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:16:07.470

我使用“活动和地点”来管理所有这些，并且它在生产中运行了一年左右。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

我认为为您的视图使用单例机制很好，但您必须确保完全重置您存储的任何状态。对我来说，每次用户导航到新位置时创建新视图会更容易，然后如果我检测到加载时间问题或其他问题，可以追溯导致视图重用其组件。我建议您先让导航正常工作，然后再担心单例（或不）优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:52:13.893

我推荐[活动和地点设计模式](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)。

它涵盖了您在问题中提出的所有问题，以及您尚未想到（或未询问）的更多问题，例如本机浏览器历史管理和在应用程序中为不同位置添加书签的能力、页面重新加载处理、高效内存管理与优化的 DOM 操作、可扩展性（构建具有数十个/数百个视图且代码重复最少的应用程序）、可测试性和代码拆分（在哪里拆分大型应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T04:58:43.677

建议你参考“ [GWTP](http://code.google.com/p/gwt-platform/) ”框架做一个GWT项目，GWTP目前支持的一些特性：

*   通过 GIN 和 Guice 进行依赖注入；
*   简单但强大的历史管理机制；
*   支持嵌套演示者；
*   演示者和视图的延迟实例化；
*   轻松高效的代码拆分；
*   支持撤消/重做的集成命令模式；

因此，您的问题和查询（如 Singleton UI 视图、处理历史/面包屑跟踪和单例类型模式的最佳方式）将涵盖并且一个好的框架将使项目管理变得容易。

# java - 在多用户环境中使 grails 服务方法原子化

> ID：14047404
> 
> 赞同：3
> 
> 时间：2012-12-26T23:06:21.067
> 
> 标签：java, grails, parallel-processing, atomic

我有一个 grails 服务方法 load，我一次只希望一个用户能够运行。我曾尝试使用 Grails 悲观锁，但它有时才有效。在我的控制器中，我有：

```
try {
    def country = Country.lock(id)
    myService.load(country)
} catch (CannotAcquireLockException ex) {
    flash.message = "Another user is modifying ${Country.get(id)}"
} 
```

使 myService 的加载方法原子的最佳方法是什么？

如果我希望两种方法是原子的（当一个方法正在执行时，两者都不能执行）怎么办？

我的服务方法：

```
def load(id) {
    def country = Country.get(id)
    country.states.each {
        ...
        it.save(flush: true)
    }
} 
```

将 synchronized 关键字添加到此方法会导致保存时出现 StaleObjectStateException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T15:05:49.657

您可以使用`@synchronized`带有自定义同步锁的注释。这样你就不会同步`this`（整个服务类），只有给定的方法。

代码示例

```
class MyCustomService

private final myLock = new Object()

@Synchronized("myLock")
def myRunOneAtATimeMethod(int x, int y)
    return x+y 
```

有关同步的更多信息：http: [//groovy.codehaus.org/gapi/groovy/transform/Synchronized.html](http://groovy.codehaus.org/gapi/groovy/transform/Synchronized.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T00:18:19.083

Grails 服务默认是单例的，它可以解决您的部分问题。您还应该使您的服务方法同步以实现您想要的：

```
def synchronized load(country) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T01:31:00.657

这可以使用[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)作为一个普通的 Java 同步问题来解决。我可以使用 isLocked 返回错误，而不是让用户等待锁做同样的事情。

# perl - 从调用脚本中扩展 perl 模块

> ID：14047407
> 
> 赞同：1
> 
> 时间：2012-12-26T23:06:55.880
> 
> 标签：perl, module

是否可以从调用脚本中扩展 perl 模块？

像这样的东西：

```
#!/usr/bin/perl 

use strict; 
use Some::Module; 

Some::Module::func = sub {
  my $self = shift; 
  # ...
}

my $obj = new Some::Module; 

$obj->func(); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T23:41:50.250

您似乎想将 subs 添加到*package*。你几乎拥有它：

```
|
v
*Some::Package::func = sub {
   ...
};
 ^
 | 
```

但是如果你知道名字和子体，你为什么要在运行时做呢？也许你真的想要

```
sub Some::Package::func {
   ...
} 
```

或者

```
{
   package Some::Package;
   sub func {
      ...
   }
} 
```

或者从最近开始，

```
package Some::Package {
   sub func {
      ...
   }
} 
```

请注意，如果您这样做，几乎可以肯定您的设计很糟糕。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T23:09:47.317

你可以用 typeglobs 做你所说的事情，但更简单的方法是这样做：

```
use Some::Module; 

package Some::Module;

sub func {
  my $self = shift; 
  # ...
}

package main;

my $obj = new Some::Module; 

$obj->func(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T23:09:55.273

是的。您可以声明要添加 subs 的包，然后添加它们。

```
package Some::Module {
  sub func {
  my $self = shift;
  # ...  
  }
} 
```

或查看[perldoc 包](http://perldoc.perl.org/functions/package.html)了解更多信息。

如果你想覆盖一个 sub，你需要使用 typeglobs。

# jquery - jquery asp.net mvc 提交表单不起作用

> ID：14047408
> 
> 赞同：-1
> 
> 时间：2012-12-26T23:06:58.407
> 
> 标签：jquery, asp.net-mvc

为什么此代码不起作用？为什么我无法收到警报消息..？问题出在哪里？

```
 $('.msg_txt).keypress(function (e) {
                    if (e.which == 13) {

                        $("#sendform").submit(function () {
                                                $.post($(this).attr("action"),
                                    $(this).serialize(),
                                    function (data) {
                                        alert("ok, this work");
                                    });
                            e.preventDefault();

                        });

                    }
                }); 
```

我的cshtml文件..

```
@using (Html.BeginForm("Send", "Mycontroller", FormMethod.Post, new { id = "sendform" }))
              {
        <textarea id="TextArea1" class="msg_txt" name="poruka" cols="20" rows="2"></textarea>
                  <input id="Submit1" type="submit" value="Send"  />         
              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T01:57:10.000

您的代码部分：

```
$('.msg_txt).keypress(function (e) { 
```

应该：

```
$('.msg_txt').keypress(function (e) { 
```

# wordpress - Wordpress：在幻灯片上显示静态图像

> ID：14047412
> 
> 赞同：0
> 
> 时间：2012-12-26T23:07:36.060
> 
> 标签：wordpress, plugins, slider, themes

我有一个客户正在寻找一个 Wordpress 插件或主题，它将在旋转滑块上显示图像，类似于此处的主页：[https ://www.threebakers.com/](https://www.threebakers.com/)

关于开箱即用解决方案的任何想法，还是我需要手动构建这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:15:38.303

具有讽刺意味的是，我在这个网站上做了这件事：

[http://www.gilbertmeatlocker.com](http://www.gilbertmeatlocker.com)

它使用流行的 Flex Slider，但不是 Wordpress。我在那个特定站点上与 Drupal 合作，因此它是独立 javascript Flex Slider 的自定义实现。

我不得不摆弄 z-index 并使用负边距将元素移动到位。

gilbertmeatlocker.com 上的特定实现更加复杂，因为边缘周围的银色框架也与 Flex Slider 重叠。不过，如果可能的话，我建议*不要*做这样的框架。它添加了一些难以在所有浏览器上运行的严重错误。

不过，将单个图像放在滑块上（例如面包店示例或 gilbertmeatlocker.com 徽标）应该不是问题。

如果没有人推荐更好的东西，你可以试试 Flex Slider。它有一个 Wordpress 版本。

# string - 将 String^ 转换为 wstring C++

> ID：14047414
> 
> 赞同：7
> 
> 时间：2012-12-26T23:07:53.307
> 
> 标签：string, visual-studio-2012, c++-cli, wstring

我用 C++ 编写了一个小应用程序。UI 中有一个 ListBox。我想将 ListBox 的选定项用于只能使用 wstrings 的算法。

总而言之，我有两个问题：-如何转换我的

```
 String^ curItem = listBox2->SelectedItem->ToString(); 
```

到 wstring 测试？

- 代码中的 ^ 是什么意思？

非常感谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-26T23:16:00.923

它应该很简单：

```
std::wstring result = msclr::interop::marshal_as<std::wstring>(curItem); 
```

您还需要头文件来完成这项工作：

```
#include <msclr\marshal.h>
#include <msclr\marshal_cppstd.h> 
```

* * *

对于好奇的人来说，这个`marshal_as`专业化的内部是什么样的：

```
#include <vcclr.h>
pin_ptr<WCHAR> content = PtrToStringChars(curItem);
std::wstring result(content, curItem->Length); 
```

这是有效的，因为`System::String`在内部存储为宽字符。如果你想要一个`std::string`，你必须使用例如执行 Unicode 转换`WideCharToMultiByte`。方便`marshal_as`为您处理所有细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:15:23.607

我将此标记为重复项，但这是有关如何`System.String^`从`std::string`.

```
String^ test = L"I am a .Net string of type System::String";
IntPtr ptrToNativeString = Marshal::StringToHGlobalAnsi(test);
char* nativeString = static_cast<char*>(ptrToNativeString.ToPointer()); 
```

诀窍是确保您使用互操作和编组，因为您必须跨越从托管代码到非托管代码的边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T00:05:14.267

我的版本是：

```
Platform::String^ str = L"my text";

std::wstring wstring = str->Data(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-20T21:06:36.867

据微软称：

参考[如何：将 System::String 转换为标准字符串](https://docs.microsoft.com/en-us/cpp/dotnet/how-to-convert-system-string-to-standard-string?view=msvc-160)

> 您可以将字符串转换为 std::string 或 std::wstring，而无需在 Vcclr.h 中使用 PtrToStringChars。

```
// convert_system_string.cpp
// compile with: /clr
#include <string>
#include <iostream>
using namespace std;
using namespace System;

void MarshalString ( String ^ s, string& os ) {
   using namespace Runtime::InteropServices;
   const char* chars =
      (const char*)(Marshal::StringToHGlobalAnsi(s)).ToPointer();
   os = chars;
   Marshal::FreeHGlobal(IntPtr((void*)chars));
}

void MarshalString ( String ^ s, wstring& os ) {
   using namespace Runtime::InteropServices;
   const wchar_t* chars =
      (const wchar_t*)(Marshal::StringToHGlobalUni(s)).ToPointer();
   os = chars;
   Marshal::FreeHGlobal(IntPtr((void*)chars));
}

int main() {
   string a = "test";
   wstring b = L"test2";
   String ^ c = gcnew String("abcd");

   cout << a << endl;
   MarshalString(c, a);
   c = "efgh";
   MarshalString(c, b);
   cout << a << endl;
   wcout << b << endl;
} 
```

输出：

```
test
abcd
efgh 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-12T00:15:55.217

使用 Visual Studio 2015，只需执行以下操作：

```
String^ s = "Bonjour!"; 
```

**C++/CLI**

```
#include <vcclr.h>
pin_ptr<const wchar_t> ptr = PtrToStringChars(s); 
```

**C++/CX**

```
const wchart_t* ptr = s->Data(); 
```

# php - 表格不发送图像以外的文件

> ID：14047422
> 
> 赞同：1
> 
> 时间：2012-12-26T23:08:43.557
> 
> 标签：php, forms, file-upload

我正在尝试使用 php 上传文件，并且正在从其他实际工作的实例中复制和重命名文件（上传图片）。但是由于某种原因，表单没有传递（POST）任何不是图像的文件：-/因此，在简历中，我得到了这个（Google）图像文件的“请求有效负载”：

```
------WebKitFormBoundaryrHOYostaC2KnUDlD
Content-Disposition: form-data; name="uploaded_file[]"; filename="image.jpg"
Content-Type: image/jpeg

------WebKitFormBoundaryrHOYostaC2KnUDlD-- 
```

但这对于 txt 或 pdf 文件：

```
------WebKitFormBoundaryc1RJOtSOpYKAZiBz-- 
```

这是表单和脚本（功能是避免用户单击“提交”，这些都很好用）：

```
echo '
<script language="JavaScript" type="text/javascript">
function HandleBrowseClick()
{
    var fileinput = document.getElementById("uploaded_file");
    fileinput.click();
}
function Handlechange()
{
var fileinput = document.getElementById("uploaded_file");
var textinput = document.getElementById("filename");
textinput.value = fileinput.value;
}
</script>';

echo '    
<form enctype="multipart/form-data" target="_blank" name="send_file" id="send_file" method="post" action="file_upload.php">

<input type="file" class="hide button" id="uploaded_file" name="uploaded_file" onChange="Handlechange();"/>

<button type="submit" id="btn">Upload!</button>
</form>';

echo '
<div onclick="HandleBrowseClick();" id="fakeBrowse" >Load a file</div>
<input type="text" id="filename" size="50" readonly="true" />
   '; 
```

所以，因为它没有传递任何东西，所以`file_upload.php`我得到了“ `ERROR: Please browse for a file before clicking the upload button.`”或“ `Invalid argument supplied for foreach()`”（如果我期望一个数组）错误。
我尝试使用`application/x-www-form-urlencoded`允许相同的结果。
现在对于那些如果没有问号就会生气的人：为什么该表格适用于图像但不适用于其他类型的文件？我哪里错了？
这是前几行`file_upload.php`（我认为没有必要，但你永远不知道）：

```
$target = "../files/temp/"; 

foreach ($_FILES["uploaded_file"]["error"] as $key => $error) {
    if ($error != UPLOAD_ERR_OK) { echo "error"; die;}

$fileName = $target . $_FILES["uploaded_file"]["name"][$key];  // The file name
$fileTmpLoc = $_FILES["uploaded_file"]["tmp_name"][$key];     // File in the PHP tmp folder
$fileType = $_FILES["uploaded_file"]["type"][$key];           // The type of file it is
$fileSize = $_FILES["uploaded_file"]["size"][$key];           // File size in bytes
$fileErrorMsg = $_FILES["uploaded_file"]["error"][$key];      // 0 for false... and 1 for true last $key!!!

$fileName = preg_replace('#[^a-z.0-9]#i', '', $fileName); // filter the $filename
$fileName = strtolower($fileName);
$kaboom = explode(".", $fileName);    // Split file name into an array using the dot
$fileExt = end($kaboom);              // Now target the last array element to get the file extension

if (!$fileTmpLoc) { // if file not chosen
    echo "ERROR: Please browse for a file before clicking the upload button.";
    exit();
    } 
else if ($fileErrorMsg == 1) { // if file upload error key is equal to 1
    echo "ERROR: An error occurred while processing the file. Try again.";
    exit();
} 
```

最后，还有一些js：

```
 if (window.FormData) {
        formdata = new FormData();
        document.getElementById("btn").style.display = "none";

    }

    input.addEventListener("change", function (evt) {
        document.getElementById("response").innerHTML = "Loading . . ."

        var i = 0, len = this.files.length, img, reader, file;

        for ( ; i < len; i++ ) {    
            file = this.files[i];
            if (!!file.type.match(/image.*/)) {
                if (formdata) {
                    formdata.append("uploaded_file[]", file);
                }
            }   
        }

        if (formdata) {
            $.ajax({
                url: "file_upload.php",
                type: "POST",
                data:  formdata,
                processData: false,
                contentType: false
            }).done(function (res) {
                document.getElementById("response").innerHTML = res;
                if ( window.FileReader ) {
                    reader = new FileReader();
                    reader.onloadend = function (e) { 
                        showUploadedItem(e.target.result, file.fileName);
                    };
                    reader.readAsDataURL(file);
                }
                });
        }
    }, false); 
```

更改 contentType 没有任何区别谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:14:25.463

您必须为文件定义 MIME 类型。例如

```
.pdf    application/pdf
.doc    application/msword 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:02:40.770

好吧，我的坏。js 文件有一个图像过滤器。我删除它后它立即开始工作。

# c++ - 将代码从 Windows 移植到 Linux 时删除阵列时出错

> ID：14047426
> 
> 赞同：2
> 
> 时间：2012-12-26T23:09:31.337
> 
> 标签：c++, linux, porting

我正在尝试将在 Windows 中正确运行的库移植到 Linux。

在这些代码行中，我收到一个错误：

```
long* permutation = new long[result->getGeneListCount()];
for(long i=0; i<result->getGeneListCount(); i++) 
        permutation[i]=i;
Util::ArrayUtil::DurstenfeldArrayPermutation<long>(permutation, result->getGeneListCount()); 

//result->PerformGenePermutation(permutation);
std::cout << "Just skipped the permutation" << std::endl;

delete[] permutation; 
```

在我看来，错误似乎是在删除期间发生的。我知道，既然我已经评论了`PerformGenePermutation()`，我可以简单地评论其他行，但类似的问题可能会再次出现在其他代码中，所以我想了解错误。

我得到的错误输出是：

```
*** glibc detected *** /usr/lib/jvm/java-7-oracle/bin/java: munmap_chunk(): invalid pointer: 0x09f287f8 *** 
```

任何人都可以帮助我吗？

请询问我是否需要更多详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:24:42.817

给定的代码和信息不足以确定问题的原因，但您可以执行以下操作：

替换代码

```
long* permutation = new long[result->getGeneListCount()];
for(long i=0; i<result->getGeneListCount(); i++) 
        permutation[i]=i;
Util::ArrayUtil::DurstenfeldArrayPermutation<long>(permutation, result->getGeneListCount()); 

//result->PerformGenePermutation(permutation);
std::cout << "Just skipped the permutation" << std::endl;

delete[] permutation; 
```

和

```
std::vector<long> permutation( result->getGeneListCount() );
for(long i=0; i<long(permutation.size()); i++) 
        permutation[i]=i;
Util::ArrayUtil::DurstenfeldArrayPermutation<long>(&permutation.at( 0 ), permutation.size()); 

//result->PerformGenePermutation(permutation);
std::cout << "Just skipped the permutation" << std::endl;

//delete[] permutation; 
```

请注意，由于会自动为您`delete`删除，因此已删除。`std::vector`

如果现在从范围错误中抛出异常`std::vector::at`，那么您知道大小可能为零。无论如何，您现在可以非常简单地在调试器中检查它。更重要的是，如果它*没有*抛出异常，那么您就知道这段代码一切正常（因为`std::vector`它是可靠的），所以问题出在其他地方。

不幸的是，这太长了，无法作为评论发布，但这并不是真正的*答案*。这是 SO 的问题。由于它是为纯答案而设计的，因此不支持一般*帮助*。

# qt - Windows 标题栏使用 QDockWidget 消失——使用非暴露窗口调用 qbackingstore::flush()

> ID：14047431
> 
> 赞同：0
> 
> 时间：2012-12-26T23:09:53.637
> 
> 标签：qt, opencv, qdockwidget

我在使用 QDockWidget 时遇到了一个奇怪的问题：

我的基本代码：

```
void iMainWindow::createDockWindows()
 {
    camera = cvCreateCameraCapture(0);
assert(camera);

QDockWidget *dock = new QDockWidget(tr("2D Camera"), this);
dock->setAllowedAreas(Qt::RightDockWidgetArea);
pixmapLabel = new MyCameraWindow(camera, dock);//class MyCameraWindow : public QWidget
dock->setWidget(pixmapLabel);
addDockWidget(Qt::RightDockWidgetArea, dock);
 } 
```

当我运行我的程序时，它是正常的

但是，如果我将停靠部分拖到外面，Windows 标题栏就会消失。

参考：[图片和我的解释](http://qt-project.org/forums/viewthread/23084/)

此外，将dock小部件拖到外面后，命令窗口显示qbackingstore::flush() 调用非暴露窗口

将停靠小部件拖到外面后，如何保留 Windows 标题栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:10:19.567

假设 MyCameraWindow 是（或包含）QGLWidget，您遇到了我在这里报告的错误：[https](https://bugreports.qt-project.org/browse/QTBUG-29359) ://bugreports.qt-project.org/browse/QTBUG-29359 。没有我知道的解决方法（在 Qt 5.0.0 中）

# html - 使用 CSS 在预先格式化的纸张上打印发票

> ID：14047440
> 
> 赞同：7
> 
> 时间：2012-12-26T23:11:13.690
> 
> 标签：html, css, printing

我有一张 html 格式的发票，可以很好地显示在屏幕上。我想把它打印到预先格式化的纸上。论文分为三个部分

页眉（距页面顶部的固定高度）

正文（由 1 - N 行组成的表格）

页脚（距页面底部的固定高度）

我尝试使用 CSS 并使用 #InvFooter 和 CSS 创建 div

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

```
@page { size:8.5in 11in; margin: 2cm }

#InvFooter {position:absolute;left:50px;bottom:0px;} 
```

我有两个问题我无法弄清楚。

1.  如何将页脚锚定到打印页面的底部。
2.  如果表格的行数过多，如何将正文限制在页面的固定部分并溢出到另一个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:26:51.873

简单的回答：不要，html/css 从未用于打印。即使您可以“破解”绝对尺寸以适合您当前的打印机，也不能保证它们会适合下一个（或客户的）。

出于这个原因，发明了 PDF，以提供您所期望的打印格式（以及高便携性）。

通过使用 PDF，您可以保证获得固定的（纸张）尺寸。

您将能够找到免费的 pdf 解决方案（开源）以及商业解决方案（例如[Dynamic PDF](http://www.dynamicpdf.com/Generate-PDF-.NET.aspx) - 还有许多其他解决方案），它们允许您从 .Net 动态/从基于服务器的动态生成 PDF不依赖 Adob​​e 产品的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T03:53:14.703

这是我遇到的最好的 CSS 打印技术汇编。它具有 W3 标准的深度链接、优秀的示例、第 3 方推荐的 HTML -> PDF 软件和一个方便的 JPEG，它显示了 16 个不同的页边距选择器。它让我开始了，现在我可以打印 100 多个不同长度的项目摘要，以供执行审查。

1.  文章： [https ://www.smashingmagazine.com/2015/01/designing-for-print-with-css/](https://www.smashingmagazine.com/2015/01/designing-for-print-with-css/)

2.  方便的页边距 JPEG： [https ://media-mediatemple.netdna-ssl.com/wp-content/uploads/2014/12/1-image-margin-boxes-large-opt.jpg](https://media-mediatemple.netdna-ssl.com/wp-content/uploads/2014/12/1-image-margin-boxes-large-opt.jpg)

3.  演示 HTML 书： [https ://github.com/rachelandrew/css-for-print/blob/master/book.html](https://github.com/rachelandrew/css-for-print/blob/master/book.html)

4.  演示打印 CSS： [https ://github.com/rachelandrew/css-for-print/blob/master/pdf-styles.css](https://github.com/rachelandrew/css-for-print/blob/master/pdf-styles.css)

希望这可以帮助！

编辑这些可能是您正在寻找的：

```
.invoice {
   page-break-before: always;
}

.invoice h1.title {
   page-break-after: avoid;
}

.invoice .line-item {
   page-break-inside: avoid;
   page-break-after: auto;
} 
```

编辑格式化的纸张如何容纳多页发票？您必须单独打印每张发票......呃

# actionscript-3 - Flash 的 AS3 主文档类作为 dispatchEvent 中继

> ID：14047449
> 
> 赞同：0
> 
> 时间：2012-12-26T23:12:29.063
> 
> 标签：actionscript-3, flash, events, listener, dispatcher

`DisplayObject`我需要一个位于层次结构顶部的事件重新调度程序。

[从我的其他](https://stackoverflow.com/questions/13792248/how-can-i-trigger-a-function-at-main-from-an-instanced-object-the-right-way) [问题](https://stackoverflow.com/questions/14028444/can-dispatchevent-carry-arguments-in-as3)构建的简单情况：

```
public class Main extends MovieClip { // Document Class at Flash
    private var objectA:ClassA;
    private var objectB:ClassB;

    public function Main() {
        objectA = new ClassA();
        addChild(objectA);
        objectB = new ClassB();
        addChild(objectB);
    }
} 
```

```
public class ClassA extends Sprite {
    public function ClassA() {
        addChild(new Bitmap(new BitmapData(20, 20, false, 0))); // A black square
        addEventListener(MouseEvent.CLICK, clickedA);
    }

    public function clickedA(evt:MouseEvent):void {
        dispatchEvent(new TextEvent("myEventType", true, false, "success"));
    }
} 
```

```
public class ClassB extends Sprite {
    public function ClassB() {
        addEventListener("myEventType", myFunction);
    }

    public function myFunction(evt:TextEvent):void {
        trace(evt.text);
        var color:uint = evt.text == "success" ? 0x00FF00 : 0xFF0000;
        addChild(new Bitmap(new BitmapData(20, 20, false, color)));
    }
} 
```

`myFunction`应该通过`Main`.

我必须实施什么才能`Main`使其充当从孩子到其他孩子的调度事件的中继？

考虑它可以有许多孩子作为调度员和接收者/听众。换句话说，它必须是通用的，所以我不必为每种情况实施一个中继。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:10:17.220

在`ClassB`你应该`addEventListener`对主类，例如，如果`var main`是对主类的引用，

> main.addEventListener("myEventType", myFunction);

将是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:12:50.293

您真的不想通过 修补所有事件`Main`，而只想通过某些东西修补它们。一个术语是**事件总线**。

有一些独立的事件总线实现（例如[as3commons-event-bus](http://www.as3commons.org/as3-commons-eventbus/introduction.html)），或者您可以转向完整的 MVC 框架（例如 RobotLegs、PureMVC）。

对于使用事件总线是否是一件好事，人们意见不一。它对于解耦通信很方便（pro），但它通常是每个人都订阅的大单例（con）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:55:48.360

**解决方案#1：**

主要的：

```
objectB = new ClassB();
objectA = new ClassA(objectB); 
```

A类：

```
objectB.myFunction("success"); 
```

B类：

```
public function myFunction(text:String):void {/*...*/} 
```

* * *

**解决方案#2：**

主要的：

```
public var objectB:ClassB;
//objectB.name = "b"; 
```

A类：

```
var main = root;
//var main = stage.getChildAt(0);
//var main = stage.getChildByName("root1");

Main(main).objectB.myFunction("success");
//ClassB(Main(main).getChildByName("b")).myFunction("success"); 
```

B类：

```
public function myFunction(text:String):void {/*...*/} 
```

# javascript - Google Analyics _trackEvent 在 Internet Explorer 中不起作用

> ID：14047450
> 
> 赞同：1
> 
> 时间：2012-12-26T23:12:39.080
> 
> 标签：javascript, google-analytics, google-analytics-api

我正在尝试在 Google Analytics 中跟踪我们网站的一些出站链接。根据 Google 的文档（见下文），我已将 trackEvent 代码添加到链接中。它适用于 FireFox 和 Chrome，但不适用于 Internet Explorer (v9)。使用 Fiddler，我可以看到 IE 没有为 /__utm.gif 生成请求。

有任何想法吗？

```
<a onclick="_gaq.push(['_trackEvent', 'event', 'action', 'label']); popup_url('https://www.google.com/', '_blank', 'width=800,height=600,resizable=1,scrollbars=1,menubar=1,location=1,titlebar=1')" href="#">Google</a> 
```

popup_url 是一种包装 window.open 的 JavaScript 方法，是用户要求的。

# c# - Java 中 C# 格式化字符串 cout 的等效语句

> ID：14047457
> 
> 赞同：0
> 
> 时间：2012-12-26T23:13:34.163
> 
> 标签：c#, java

以下语句的 Java 等效指令是什么：

```
String name;
cout << "So your name is  " << name << endl; 
```

或者在 C# 中

```
console.writeline("So your name is {0} ", name); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T23:16:55.257

```
String name;
cout<<"So your name is  "<<name<<endl; 
```

相当于：

```
String name = ...;
System.out.println("So your name is " + name); 
```

* * *

和：

```
Console.WriteLine("So your name is {0}", name); 
```

相当于：

```
System.out.printf("So your name is %s", name); 
```

# cognos - 为不在报告中的属性创建总计

> ID：14047461
> 
> 赞同：0
> 
> 时间：2012-12-26T23:14:24.430
> 
> 标签：cognos

我为我的用户创建了一个交叉表报告，该报告表示电子元件的平均测试时间摘要。属性是：

```
COMPONENT, WEEKTEST BEGIN DATE, TEST NAME, AUTOTESTER SOFTWARE VERSION, TEST TIME IN SECS, AVG TEST TIME IN SECS 
```

这是我的交叉表布局

```
 WEEKTEST BEGIN DATE
    COMPONENT TESTNAME AUTOTESTERSW TOTAL(AVG TEST TIME IN SECS)
TOTAL BY COMPONENT 
```

当我在报告中添加总计时，它会按照您的预期添加平均测试时间（）的所有记录。但是，我的用户希望总数改为以秒为单位的测试时间。

我尝试将 Total 计算从“total(currentMeasure within detail [COMPONENT])”修改为“total(currentMeasure within set [COMPONENT])”，但结果没有任何意义。

我还尝试将计算更改为“total(currentMeasure within set [TEST TIME IN SECS])”，但它失败了：Report Studio 抛出错误，因为该属性不在报告中（即使它在查询中）。

这完全可以做到吗？

Cognos Report Studio 8.4 IBM DB2 UDB

在此先感谢您的帮助。

# ruby-on-rails - Ubuntu 12.10 上 Rails 3.0.6 上的 cURL SSL 对等证书异常

> ID：14047472
> 
> 赞同：0
> 
> 时间：2012-12-26T23:15:47.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ubuntu, curl, apache2

使用 rails 3.0.6，rake 0.8.7 和路边。

我正在尝试使用 SSL 连接远程 Android 客户端，但出现以下异常`Curl::Err::SSLPeerCertificateError`

我得到的错误跟踪如下：

```
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/curb-0.8.3/lib/curl/easy.rb:60:in `perform'
/home/user/releases/20121226212154/webapp/lib/android_push.rb:24:in `http_post'
/home/user/releases/20121226212154/webapp/lib/android_push.rb:24:in `send_command'
/home/user/releases/20121226212154/webapp/lib/device_commands.rb:14:in `command_on_demand'
/home/user/releases/20121226212154/webapp/app/controllers/positions_controller.rb:70:in `on_demand'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/abstract_controller/base.rb:150:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal/rendering.rb:11:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/abstract_controller/callbacks.rb:18:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/callbacks.rb:506:in `_run__891378805__process_action__691620700__callbacks'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/callbacks.rb:410:in `send'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/callbacks.rb:410:in `_run_process_action_callbacks'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/callbacks.rb:94:in `send'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/callbacks.rb:94:in `run_callbacks'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/abstract_controller/callbacks.rb:17:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/notifications.rb:52:in `instrument'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/notifications.rb:52:in `instrument'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal/rescue.rb:17:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/newrelic_rpm-3.5.3.25/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:34:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/newrelic_rpm-3.5.3.25/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:268:in `perform_action_with_newrelic_trace'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/newrelic_rpm-3.5.3.25/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/newrelic_rpm-3.5.3.25/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:263:in `perform_action_with_newrelic_trace'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/newrelic_rpm-3.5.3.25/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:33:in `process_action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/abstract_controller/base.rb:119:in `process'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/abstract_controller/rendering.rb:41:in `process'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal.rb:138:in `dispatch'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_controller/metal.rb:178:in `action'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/routing/route_set.rb:62:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/routing/route_set.rb:62:in `dispatch'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/routing/route_set.rb:27:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-mount-0.6.14/lib/rack/mount/route_set.rb:148:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-mount-0.6.14/lib/rack/mount/code_generation.rb:93:in `recognize'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-mount-0.6.14/lib/rack/mount/code_generation.rb:96:in `optimized_each'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-mount-0.6.14/lib/rack/mount/code_generation.rb:92:in `recognize'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-mount-0.6.14/lib/rack/mount/route_set.rb:139:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/routing/route_set.rb:493:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/newrelic_rpm-3.5.3.25/lib/new_relic/rack/error_collector.rb:8:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/newrelic_rpm-3.5.3.25/lib/new_relic/rack/browser_monitoring.rb:12:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/mongoid-2.2.6/lib/rack/mongoid/middleware/identity_map.rb:33:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/mongoid-2.2.6/lib/mongoid.rb:130:in `unit_of_work'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/mongoid-2.2.6/lib/rack/mongoid/middleware/identity_map.rb:33:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/warden-1.0.6/lib/warden/manager.rb:35:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/warden-1.0.6/lib/warden/manager.rb:34:in `catch'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/warden-1.0.6/lib/warden/manager.rb:34:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/head.rb:14:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-1.2.5/lib/rack/methodoverride.rb:24:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/flash.rb:182:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/cookies.rb:302:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activerecord-3.0.6/lib/active_record/query_cache.rb:32:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activerecord-3.0.6/lib/active_record/connection_adapters/abstract/query_cache.rb:28:in `cache'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activerecord-3.0.6/lib/active_record/query_cache.rb:12:in `cache'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activerecord-3.0.6/lib/active_record/query_cache.rb:31:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activerecord-3.0.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:354:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/callbacks.rb:46:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/activesupport-3.0.6/lib/active_support/callbacks.rb:416:in `_run_call_callbacks'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-1.2.5/lib/rack/sendfile.rb:106:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/actionpack-3.0.6/lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/railties-3.0.6/lib/rails/rack/logger.rb:13:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-1.2.5/lib/rack/runtime.rb:17:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-1.2.5/lib/rack/lock.rb:1Server version: Apache/2.2.22 (Ubuntu) Server built:   Nov  6 2012 20:27:22 3:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-1.2.5/lib/rack/lock.rb:13:in `synchronize'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/rack-1.2.5/lib/rack/lock.rb:13:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/railties-3.0.6/lib/rails/application.rb:168:in `call'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/railties-3.0.6/lib/rails/application.rb:77:in `send'
/home/user/releases/20121226212154/webapp/vendor/ruby/1.8/gems/railties-3.0.6/lib/rails/application.rb:77:in `method_missing'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb:171:in `send'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb:171:in `handle_spawn_application'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/utils.rb:470:in `safe_fork'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb:180:in `start'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rack_application'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb:246:in `spawn_rack_application'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
/home/user/.rvm/gems/ruby-1.8.7-p371/gems/passenger-3.0.18/helper-scripts/passenger-spawn-server:99 
```

我正在使用 Ubuntu 12.10、Apache 2.2.22、Phusion Passenger 3.0.18 和 Ruby 1.8.7。

如何修复此 cURL 异常？是 rails 问题还是 apache2、ssl 和 phusion 乘客配置问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:48:32.603

我用这个howto解决了这个问题

[http://lowtek.ca/roo/2012/ubuntu-apache2-trusted-ssl-certificate-from-startssl/](http://lowtek.ca/roo/2012/ubuntu-apache2-trusted-ssl-certificate-from-startssl/)

使用 StartSSL 免费证书进行 https 连接。

# msbuild - 使用 XmlUpdate 从程序集中设置版本信息

> ID：14047477
> 
> 赞同：9
> 
> 时间：2012-12-26T23:16:16.240
> 
> 标签：msbuild, msbuildcommunitytasks

使用 MSBuild 和 MSBuild 社区任务我正在尝试做一些非常简单的事情：

1.  从程序集中获取版本信息。
2.  使用该版本信息更新 .nuspec 文件。

我的 MSBuild 目标如下所示：

```
<Target Name="Package">
  <GetAssemblyIdentity AssemblyFiles="%(PackageDir.FullPath)\MyAssembly.dll">
    <Output TaskParameter="Assemblies" ItemName="AssemblyIdentity" />
  </GetAssemblyIdentity>
  <XmlUpdate 
     Prefix="nu"
     Namespace="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd"
     XmlFileName="%(PackageDir.FullPath)\MyAssembly.nuspec"
     XPath="/nu:package/nu:metadata/nu:version"
     Value="%(AssemblyIdentity.Version)" />
</Target> 
```

我遇到的问题是 NuGetPack 任务运行两次：第一次，程序集版本丢失但路径正确，第二次程序集版本正确但路径丢失！

这是输出：

```
Updating Xml Document "D:\MyProject\package\MyAssembly.nuspec".
    1 node(s) selected for update.
  XmlUpdate Wrote: "".
  Updating Xml Document "\MyAssembly.nuspec".
D:\MyProject\MyProject.build(64,9): error : Could not find file
 'D:\MyAssembly.nuspec'.
Done Building Project "D:\MyProject\MyProject.build" (Package target(s)
) -- FAILED. 
```

我也尝试使用 NuGetPack 任务，但得到了类似的结果。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T17:38:34.813

我似乎已经解决了它，但我仍然不确定为什么我原来的问题中的代码不起作用。

我没有通过连接指定路径（例如 AssemblyFiles="%(PackageDir.FullPath)\MyAssembly.dll"），而是将每个路径放入其自己的项目中：

```
<ItemGroup>
...
  <PackageVersionAssembly Include=".\build-artifacts\package\MyAssembly.dll"/>
  <NuSpecFile Include=".\build-artifacts\package\MyAssembly.nuspec"/>
...
</ItemGroup> 
```

我对任务进行了相同的更改，并对 .nuspec 文件的引用进行了相同的更改。

新的 Package 目标如下所示：

```
<Target Name="Package">
  <GetAssemblyIdentity AssemblyFiles="@(PackageVersionAssembly)">
    <Output TaskParameter="Assemblies" ItemName="AssemblyIdentity" />
  </GetAssemblyIdentity>
  <XmlUpdate 
     Prefix="nu"
     Namespace="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd"
     XmlFileName="@(NuSpecFile)"
     XPath="/nu:package/nu:metadata/nu:version"
     Value="%(AssemblyIdentity.Version)" />
</Target> 
```

我希望这对其他人有帮助！

# sqlite - Lua SQLite3 更新值

> ID：14047483
> 
> 赞同：3
> 
> 时间：2012-12-26T23:17:27.463
> 
> 标签：sqlite, lua

我是新来的，所以我首先想打个招呼。

我的问题是我正在 Lua 中开发我的游戏，例如，当我想更新数据库中的值时，它需要动态地（由用户）完成。

当数据库中的值等于 1 时，用户可能希望将其更改为 0（当他设置`bloom`关闭时）。

我可以使用以下方法对其进行硬编码：

```
for test in db:nrows("UPDATE test SET bloom = 1 WHERE bloom = 0") do 
```

我想允许用户更改该值。但是我该怎么做呢？我已经有一个占位符了

```
local bloom = 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:03:21.607

使用占位符，因为您应该使用基于用户输入的任何查询来避免将数据作为命令传递（也称为 SQL 注入）。

```
local stmt = db:prepare[[
  UPDATE test SET bloom = ? WHERE bloom = ?
]]
stmt:bind(new_bloom, previous_bloom)
stmt:exec() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:45:40.187

我假设您知道如何从用户那里捕获程序中的值，然后您可以动态构建一个字符串以传递给 SQL，例如

```
local sql = string.format([["UPDATE test SET bloom = 1 WHERE bloom = %s"]],bloom)
local res = assert(db:execute(sql)) 
```

我通常使用执行更新语句而不是 nrows。

# java - 防止在多个浏览器中共享会话

> ID：14047486
> 
> 赞同：0
> 
> 时间：2012-12-26T23:17:40.873
> 
> 标签：java, session, session-variables

我正在开发旧版 Java Web 应用程序，当用户登录应用程序并单击客户链接（来自客户列表页面）时，我们将客户信息与用户信息一起保留在会话中。现在，如果用户想同时处理多个客户（通过在另一个浏览器中打开新客户），会话中的旧客户将被新客户信息替换。我知道如果我们重新设计会话（可能通过将客户保留在哈希图中），这个问题就会得到解决。有没有更好的方法来解决这个问题？在将客户打开到新浏览器时，我不希望用户再次登录。我使用 IE8 作为浏览器，应用程序不支持多个浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:46:50.880

所以你想要一个包含多个状态的会话？更好地完全取决于您的架构和用例。但本质上，您需要跟踪每个客户实例并将其存储在每个页面/url 中。在每次提交时，都会询问客户 ID 并更新相应的客户。

# java - 使用安卓计算

> ID：14047487
> 
> 赞同：1
> 
> 时间：2012-12-26T23:18:11.783
> 
> 标签：java, android, math, calculator

今天有一个个人应用程序的小想法。从来没有尝试过Android所以......任何帮助表示赞赏。

我想要的是 2 个输入字段，在点击 calc 按钮后将这些值和 * 它们相互对照给出结果。

对我来说看起来不错，但就像我说的那样，我对 Java 和 Android 的新手并不那么好。我的问题是当我点击 Calc 按钮时，它会强制关闭/停止工作。提前致谢！

**activity_main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" 

    >

    <EditText android:id="@+id/fuel"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/fuel" />

    <EditText android:id="@+id/numLaps"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/numLaps" />

    <Button
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:id="@+id/calc"
        android:text="@string/calc"
        android:onClick="calc"/>

    <EditText
        android:layout_weight="1"
        android:layout_width="0dp" 
        android:layout_height="wrap_content" 
        android:id="@+id/output"
        android:inputType="number"
        />

</LinearLayout> 
```

**MainActivity.java**

```
package com.example.iracingfuelcalc;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity implements android.view.View.OnClickListener {

    Button calc;
    EditText numLaps,fuel, output;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        fuel = (EditText)findViewById(R.id.fuel);
        numLaps = (EditText)findViewById(R.id.numLaps);
        output = (EditText)findViewById(R.id.output);
        calc = (Button)findViewById(R.id.calc);

        calc.setOnClickListener(this);  

    }
public void onClick(View arg0){

    int fuelValue = -1;
    try {
    fuelValue = Integer.parseInt(fuel.getText().toString());
    }
    catch (NumberFormatException e)
    {
    //you don't have to do much here since fuelValue already has a default value (-1)
    }

    int lapsValue = -1;
    try {
        lapsValue = Integer.parseInt(numLaps.getText().toString());
    }
    catch (NumberFormatException e)
    {

    }

    int result = 0;

        result = fuelValue * lapsValue; 

    result += Integer.parseInt(output.getText().toString());
    output.setText("" + result);

}

} 
```

**字符串.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">iRacing Fuel Calc</string>
    <string name="fuel">Fuel per lap</string>
    <string name="numLaps">Number of laps</string>
    <string name="calc">Calculate</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_display_message">TEST</string>
    <string name="output">0</string>

</resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T23:22:57.703

你的第一个问题是你实际上并没有给`output`. 在`onCreate()`做

```
output = (EditText)findViewById(R.id.output); 
```

您可能还对 Integer 解析有问题，因为任何不是数字的东西都会抛出`NumberFormatException`. 确保只输入数字或将 EditText 设置为以编程方式接受或验证。一种验证方法是使用 try/catch 块。例如

```
int fuelValue = -1;
try {
fuelValue = Integer.parseInt(fuel.getText().toString());
}
catch (NumberFormatException e)
{
//you don't have to do much here since fuelValue already has a default value (-1)
} 
```

如果需要，您可以通过 将 EditText 设置为仅接受数字`android:inputType`。[文档](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)有更多信息。

```
<EditText android:id="@+id/fuel"
android:layout_weight="1"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:hint="@string/fuel" 

android:inputType = "number"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:24:20.310

第二个是：

```
Integer.parseInt(fuel.getText().toString()); 
```

您没有验证该字段的值。您可以在操作线程中获得 NumberFormaException，这会导致应用程序崩溃

# javascript - 从父域中删除 cookie

> ID：14047490
> 
> 赞同：3
> 
> 时间：2012-12-26T23:18:37.743
> 
> 标签：javascript, cookies

我在“foo.bar.com”中，我正在为域“.bar.com”设置带有键“abc”的cookie

到目前为止，一切都很好。

现在，我仍在“foo.bar.com”中，但我想从域“.bar.com”中删除键为“abc”的 cookie

我怎么做？我正在做 JavaScript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:49:34.580

您需要明确提供域

```
document.cookie = 'abc=' + ";expires=Thu, 01 Jan 1970 00:00:01 GMT ;domain=.foo.com;path=/"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T22:43:21.200

如果使用`jquery.cookie`，则指定域和路径：

```
$.removeCookie('cookie_name', {domain: '.food', path:'/'}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-05T13:46:43.543

虽然违反直觉，但我发现 OP 看到的行为在 Chrome 和 Firefox 中都是可以预料的。可以从子域在父域中创建 cookie，但之后无法将其删除。[This answer to another post](https://stackoverflow.com/a/18367855/12662876)更详细地描述了这一点。

# c++ - 我是否需要释放由 _Type::get_FullName 填充的 BSTR

> ID：14047491
> 
> 赞同：0
> 
> 时间：2012-12-26T23:18:40.973
> 
> 标签：c++, bstr, clr-hosting

我有一些看起来像这样的代码：

```
_TypePtr spType = NULL;
. . . // host the CLR and populate that type
{
    BSTR fullName;
    spType->get_FullName(&fullName);
    wprintf(L"Got type %s\n", fullName);
} 
```

我需要释放那个 bstr 吗？如何释放它[SysFreeString()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221481%28v=vs.85%29.aspx)？如果不是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:36:35.123

A`BSTR`是由动态分配的`SysAllocString`（如果我没记错名称，请检查它！）。

有相应的解除分配功能。

只需***阅读文档***。

* * *

如果您使用的是 Visual C++ 编译器，并且不打算将代码移植到其他编译器，那么您可以使用与 Visual C++ 捆绑在一起的“智能 BSTR”类。我记不起名字了。但是像`_bstr_t`. 等等，检查文档...好吧，在提供名称的索引中键入“_bstr”，这`_bstr_t`和我想的一样！:-)

通过使用“智能”类，它会为您处理释放。

# android - Lint：“ <key>没有被翻译成 “ 错误</key>

> ID：14047495
> 
> 赞同：0
> 
> 时间：2012-12-26T23:18:57.680
> 
> 标签：android, eclipse, android-lint

我的 Android 应用程序最近在编译时开始抛出 Lint 错误。我得到`<key> is not translated in <language>.`它告诉我`If an application has more than one locale, then all the strings declared in one language should also be translated in all other languages.`

与有关此主题的其他一些类似问题不同，我目前仅支持一种语言环境。Eclipse 不知何故开始认为我想支持多个，现在编译时抛出错误。是的，我可以在构建时关闭 lint 检查，或者我可以将其设置为警告而不是致命错误，但这只是隐藏了问题，即 Eclipse 认为有多个语言环境。我该如何解决？

**编辑：**我追踪了源代码 - 我添加了一个包含 values-da 文件夹的库项目。有什么方法可以让我的应用程序的其余部分忽略该文件夹，还是我必须删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:57:48.287

唯一可行的方法是删除文件夹（感谢@323go 的建议）。重命名文件可能对您有用，但我收到间歇性的“资源目录名称无效”错误。

# c# - 试图将对象转换为 javascript []{}- C# Key Value Collection OR Dictionary 或者

> ID：14047505
> 
> 赞同：2
> 
> 时间：2012-12-26T23:20:35.997
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我想更好地理解将对象转换为名称与值集合的问题

说……如果我能那样做

**1）** java脚本是否需要一些微调？打包数据..

**2）**对我来说最重要的是：从该键值转换`Js`为 a的正确方法是`Dictionary<T,T> C#`什么？

`Aspx / Html`部分_

```
<input type="text" id="tbx_Name" value="Avi" />
<input type="text" id="tbx_City" value="TelAviv" />
<input type="text" id="tbx_Country" value="Israel" />

<select id="ChosenRandomClass" style="display:none">
<option selected="selected" value="0">(choose a random)</option>
<option value="1">random Top Beach</option>
<option value="2">random Top Center</option>
<option value="3">random Local Pub</option>
</select> 
```

`JavaScript / jQuery`部分_

```
 function AddNew() {

        if (!confirm("would you like to add this contact ?")) return;

        var Name = $('#tbx_Name').val();
        var City = $('#tbx_City').val();
        var Country = $('#tbx_Country').val();

        var selectedRC = $('#ChosenRandomClass option:selected').val();

        var hDate = []

        var param1 = { key: "Name", value: Name };
        var param2 = { key: "City", value: City };
        var param3 = { key: "Country", value: Country };
        var param4 = { key: "SelctedClass", value: selectedRC };

        hDate.push(param1);
        hDate.push(param2);
        hDate.push(param3);
        hDate.push(param4);
                                         // is this part necessary the data will not get to
                                         // code behind properly without the serializing ?
        var startPrt = Sys.Serialization.JavaScriptSerializer.serialize(hDate);
              ajaxUpdate("addNew", startPrt);

    } 
```

`Code behind C#`部分_

```
public void AddNewRecord(object startPrt)
{
    Dictionary<string, string> SenthDate = new Dictionary<string, string>();
   //        .....etc

} 
```

我会很感激正确的答案

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:57:31.803

我试了一下您的示例，发现**startPrt**参数实际上是作为**Dictionary(string, object)****数组**接收的。因此，如果您像这样进行 AJAX 调用：

 **```
var hDate = [];
hDate.push({ key: "Name", value: Name });
hDate.push({ key: "City", value: City });
hDate.push({ key: "Country", value: Country });
hDate.push({ key: "SelctedClass", value: selectedRC });

$.ajax({
    contentType: 'application/json; charset=utf-8',
    url: 'MyPage.aspx/AddNewRecord',
    type: 'POST',
    data: JSON.stringify({ startPrt: hDate }),
    success: success, // success callback
    error: error // error callback
}); 
```

您可以定义您的**WebMethod**，如下所示，将**startPrt**参数转换为字典：

```
[WebMethod]
public static void AddNewRecord(object startPrt)
{
    var dict = new Dictionary<string, object>();
    foreach (Dictionary<string, object> pair in (Array)startPrt)
        dict.Add((string)pair["key"], pair["value"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:54:31.973

传统的方法是构造一个纯 javascript 对象，`jQuery.ajax(...)`无需任何预处理即可使用。

```
var hDate = {
    "Name": $('#tbx_Name').val(),
    "City": $('#tbx_City').val(),
    "Country": $('#tbx_Country').val(),
    "SelctedClass": $('#ChosenRandomClass').val()
};
ajaxUpdate("addNew", hDate); 
```

在`ajaxUpdate()`中，ajax 表达式将是这样的：

```
function ajaxUpdate(action, data) {
    ...
    $.ajax({
        url: '...',
        data: data,
        ...
        success: function(){
            ...
        }
    });
} 
```

因此，序列化的数据将提供给任何风格的服务器端脚本。**

# ruby-on-rails - 我将如何根据 Rails 中的位置来路由访问者？

> ID：14047508
> 
> 赞同：1
> 
> 时间：2012-12-26T23:21:03.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在开发一个 Rails 应用程序，该应用程序需要根据用户的位置将用户路由到特定的 URL。最好是能够根据位置向他们呈现适当内容的东西，使他们能够查看其他位置的内容。

具体来说，想一想 Craigslist 的位置界面... 向用户呈现来自他们所在城市的内容，并且仍然允许选择和查看另一个城市。

我看过一些回答部分问题的帖子，但我正在尝试制定最佳解决方案。

看起来需要一些东西，可能是基于 cookie 的，为给定用户设置一个“默认”位置，并仍然允许他们选择其他位置。

再次，只是寻找概念/规划帮助和任何可能适用的宝石的任何方向。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:40:21.470

[http://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)是一个运行良好的免费 geo-ip 数据库。它犯了一些错误（它把我的客户办公室放在华盛顿州柯克兰，而他们实际上在华盛顿州西雅图市中心）。当然对于 Craigslist 级别的特异性来说已经足够好了，因为无论如何你都会将这两个人重新路由到“西雅图”。还有一个红宝石宝石 - “geoip-c”。它非常易于使用。

另一种选择是使用 HTML5 的“给我你的位置”功能。对用户来说更具侵入性，但可能更具体。

# c# - SQLite 报告插入查询错误，即使插入的行

> ID：14047510
> 
> 赞同：1
> 
> 时间：2012-12-26T23:21:11.480
> 
> 标签：c#, sqlite

我正在使用[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)版本 1.0.82.0

当我像这样插入一行时：

```
"INSERT INTO [testtable] (col1,col2) values ('','')" 
```

我总是从`SQLiteCommand.ExecuteNonQuery();`应该返回 0（OK）或 101（DONE）的地方得到 1 的结果。我知道该行插入得很好，因为每次运行该方法时自动增量值都会增加。

班上

```
readonly object _threadlock = new object();
readonly string _file;

public CSQLite(string file)
{
    _file = file;
}

private SQLiteConnection _sqlCon;
private SQLiteCommand _sqlCmd;
private SQLiteDataAdapter _db;

private void SetConnection()
{
    lock (_threadlock)
    {
        _sqlCon = new SQLiteConnection(String.Format("Data Source={0};Version=3;New=False;Compress=True;", _file));
    }
}

public int SimpleInsertAndGetlastID(out int id)
{
    lock (_threadlock)
    {
        SetConnection();
        _sqlCon.Open();

        //Execute
        _sqlCmd = _sqlCon.CreateCommand();
        _sqlCmd.CommandText = "INSERT INTO [testtable] (col1,col2) values ('','')";
        var res = _sqlCmd.ExecuteNonQuery();

        //Get id
        _db = new SQLiteDataAdapter("select last_insert_rowid();", _sqlCon);
        var ds = new DataSet();
        _db.Fill(ds);
        DataTable dt = ds.Tables[0];
        var val = dt.Rows[0][0].ToString();

        Int32.TryParse(val, out id);

        _sqlCon.Close();
        return res;
    }
} 
```

考试：

```
/// <summary>
///A test for SimpleInsertAndGetlastID
///</summary>
[TestMethod()]
public void SimpleInsertAndGetlastIDTest()
{
    var file = "dbs\\test.db";
    var target = new CSQLite(file);
    var id = -1;
    var res = -1;

    try
    {
        res = target.SimpleInsertAndGetlastID(out id);
    }
    catch (Exception ex){/*Breakpoint*/}

    Assert.IsTrue(id > 0); //id gets +1 every time the test is run so the row *is* getting inserted
    Assert.IsTrue(res==0||res==101); //Res is always 1 for some reason
} 
```

表创建（以防出现问题）：

```
public List<string> Columns { get; set; }

if (!File.Exists(_dbFile))
    SQLiteConnection.CreateFile(_dbFile);

var fieldqry = "";
var count = 0;
Columns.ForEach((field) =>
    {
        count++;

        fieldqry += String.Format("[{0}] TEXT NULL", field);

        if (count < Columns.Count)
            fieldqry += ",";
    });

var qry = String.Format("CREATE TABLE IF NOT EXISTS [{0}](" +
                        "[ID] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT," +
                        "{1}" +
                        ");", TableName, fieldqry);

var sql = new CSQLite(_dbFile);
var res = sql.Execute(qry);
if(res!=SqLiteErrorCodes.SQLITE_OK)
    throw new SqLiteImplementationException("Query failed."); 
```

列在哪里`new List<string> { "col1", "col2" } };`

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:23:41.207

[`ExecuteNonQuery()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)不返回 SQLite 错误代码，它返回受查询影响的行数。如果您要插入一行，如果操作成功，则 1 听起来像是预期的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T23:28:13.210

ExecuteNonQuery 的结果被认为是“受影响的行数”而不是错误代码:-)

# java - 基础控制器，设置私有成员变量，这样安全吗？

> ID：14047513
> 
> 赞同：0
> 
> 时间：2012-12-26T23:22:19.223
> 
> 标签：java, spring, spring-mvc

我想创建一个基本控制器类，我的其他控制器将从中继承。我有一个简单的公共 api，它通过查询字符串获取身份验证令牌，所以我想这样做：

```
public class MyBaseController {
   private String token = "";
   public MyBaseController() {
   }
} 
```

然后我真正的控制器就像：

```
@Controller
@RequestMapping("/api/users")
public class UserController extends MyBaseControler {

  // controller methods here
} 
```

我的问题是，我如何才能访问我的基本控制器中的 HttpServletRequest，并获取查询字符串参数“？token=abc123”的值并使用该值设置令牌变量。

这个线程安全吗？ **我的理解是每个请求都会有一个新的控制器实例，对吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:28:00.747

如果他们是无状态的，你的控制器会更好。

您可以根据需要向它们注入 Spring 服务，但我看不出它们有任何理由必须将令牌的值作为成员变量。

您更有可能希望将令牌存储在会话范围内。我认为你的想法是错误的。

我会指出 Spring 本身已经远离了控制器的继承。它们现在都是基于注释的，没有通用的基类或接口。为什么你认为回归他们放弃的设计是一件好事？

您也不需要基本控制器。

# c++ - Juno CDT 插件无法运行 C++ 应用程序

> ID：14047522
> 
> 赞同：1
> 
> 时间：2012-12-26T23:24:19.217
> 
> 标签：c++, eclipse, eclipse-cdt

我有一个简单的混合 C/C++ 应用程序（OpenGL 示例），我使用 Juno 中的 Eclipse CDT（MinGW 工具链）成功构建了它。

我可以从 Win7 命令控制台手动运行此应用程序，但从 Eclipse 的“运行方式”菜单运行时，它似乎很少工作。它是否有效似乎取决于代码中看似无关的更改，即使在应用程序开始附近没有任何代码发生更改时，我对 Eclipse 运行控制台（只是一个 <terminated> 状态）也没有任何兴趣。

我想，有时我现在可以解决这个问题，但如果有人有任何想法，让它工作会很好 - 这似乎是让调试环境在 Eclipse 中工作的重要垫脚石。

*编辑*方面的想法 - 当这样的事情失败时，eclipse 在调试诊断上似乎非常薄弱。如果有任何方法可以打开更多调试，我会欢迎知识=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:58:21.673

已解决 - 问题归结于为应用程序提供的路径，或者更具体地说是操作系统启动器（因此它可以找到所需的 DLL）。

即使通过默认的“运行”配置声称继承父环境，它似乎也没有获得与 Win7 命令控制台相同的环境。我必须在 Eclipse 中手动编辑“运行方式”配置，以获得包含我需要的目录（MinGW/bin 和包含一些自定义 DLL 的目录）的自定义 PATH 环境变量。

干杯，伊索

# javascript - 谁能告诉我代码有什么问题

> ID：14047524
> 
> 赞同：0
> 
> 时间：2012-12-26T23:24:37.930
> 
> 标签：javascript

```
function MoveAddToCartAccordingly()
{
  var elems = document.getElementsByClassName('box-collateral box-related');
  var av = document.getElementsByClassName('availability in-stock');
  var sp = document.getElementsByClassName('product-options');
  var ac = document.getElementsByClassName('add-to-cart');
  var first = document.getElementsByClassName('item first');
  var second = document.getElementsByClassName('item');
  for(var k = 0; k < sp.length; k++){
   if (getComputedStyle(sp[k]).visibility == "visible")
   {  
     for (var i = 0; i < elems.length; i++) {
      if (getComputedStyle(elems[i]).visibility == 'visible') {
       for (var j = 0; j < av.length; j++) {
        av[j].style.visibility = 'visible';
        av[j].id = "someID";
        elems[i].appendChild(av[j]);
       }     
      }
      else
      {  
        for (var s = 0; s < av.length; s++) {
         av[s].style.visibility = 'hidden';
        }
        for (var l = 0; l < ac.length; l++) {
         ac[l].style.marginTop = "-500px";
         ac[l].style.marginLeft = "-20px";
        }
      }
     }

   }
   return;
  }
  for (var p = 0; p < elems.length; p++) {
   if (getComputedStyle(elems[p]).visibility == 'visible') {
     for (var q = 0; q < av.length; q++) {
        av[q].style.visibility = 'visible';
        av[q].id = "someID";
        elems[p].appendChild(av[q]);
     }     
     if(elems[p].style.marginTop == "-610px")
     { 
        elems[p].style.marginTop = "-640px";
     }
     for(var r = 0; r < first.length; r++)
     {
       if(getComputedStyle(first[r]).visiblity == 'visible'){
        for(var m = 0; m < ac.length; m++)
        { 
          if(ac[m].style.marginTop == "-120px")
          {
            ac[m].style.marginTop ="-140px";
          }   
        } 
       }
       else if(getComputedStyle(first[r]).visiblity == 'visible' && getComputedStyle(second[r]).visiblity == 'visible' )
       {
         for(var n = 0; n < ac.length; n++)
         { 
           if(ac[n].style.marginTop == "-120px")
          {
            ac[n].style.marginTop ="-140px";
          }
         }
       } 
     }
   }
 }
}
window.onload = MoveAddToCartAccordingly; 
```

任何人都可以在这里的代码有什么问题吗？实际上我正在检查 div 产品选项是否可见然后我再次检查具有类“box-colatral box-related”的 div 是否可见，如果不可见，那么我将隐藏其他标签 p类Availability-in-stock 并将添加到购物车的 div 移动到顶部位置，但那个不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:27:50.717

您的第一个 for 循环中有一个`return`语句。我想你总是会在该循环的第一次迭代之后放弃函数调用。

# opengl - SDL2 能否与 OpenGL 3.2 核心一起正常工作？

> ID：14047527
> 
> 赞同：1
> 
> 时间：2012-12-26T23:24:46.477
> 
> 标签：opengl, sdl

我的项目有问题，我似乎无法弄清楚到底出了什么问题。我一直在搜索，但我找不到 SDL2 与 OpenGL 3.2 核心一起工作的明确构象。我只需要将其作为可能的问题之一进行检查。那么它是否适用于 OpenGL 3.2 核心，有什么特别需要我知道的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:46:01.230

是的，SDL 确实适用于 OpenGL 3.2。我使用的名为 CG 工具包的库似乎无法与导致我的问题的核心配置文件一起使用，但似乎没有人确切知道 CG 是否可以与核心配置文件一起使用。

# javascript - 在周一至周五定义的时间之间显示 html 内容

> ID：14047529
> 
> 赞同：0
> 
> 时间：2012-12-26T23:25:28.347
> 
> 标签：javascript, jquery, time, timezone

我想知道是否有一个非常简单的解决方案可以在特定时间之间以及仅在欧洲时区的工作日期间显示内容？

时间将是每天上午 9 点到下午 5 点之间（周末除外），在这些时间之间应该显示 html 内容。如果可能，从下午 5 点到上午 9 点提供不同的 html 内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:28:58.767

简短的版本是您`new Date()`用来获取当前日期/时间，然后使用 DOM 操作来添加/删除适当的内容。如果您希望在页面加载之间更改内容，您可能还希望运行 window.setInterval 以不断更新内容。

您可能想查看 Moment.js 库 (http://momentjs.com/)，因为它有许多功能可以更轻松地处理日期/时间。

这是一个快速示例（不使用 Moment），它只检查“我们是否超过 5？”：

```
window.setInterval(function() {
    if (new Date().getHours() > 17) { // if it's after 5pm (17:00 military time)
        $('#someContent').hide();
    } else {
        $('#someContent').show();
    }
}, 1000 * 60) // this will run every minute 
```

有了这个希望你可以弄清楚如何添加其他需要的 if 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:33:14.070

干得好！:)

```
<html>
<head>
<script type="text/javascript">
var date=new Date();
var year=date.getFullYear();
var month=date.getMonth();
var day=date.getDate(); // fixed
function SetDivContent() {
    var div=document.getElementById('date_dependent');
    if (year==2010 && month==11) { // fixed (the JavaScript months order is 0-11, not 1-12)
        if (day>=3 && day<11) { // the following content will be displayed 12/03/2010, 12/04/2010, [...], 12/09/2010, 12/10/2010
            div.innerHTML='content 1';
        }
        else if (day==11 || day==12) { // this one will be displayed 12/11/2010 and 12/12/2010
            div.innerHTML='content 2';
        }
        else if (day>12) { // this one - 12/13/2010 and later, until the end of December
            div.innerHTML='content 3';
        }
    }
    else if (year==2011 && month>=0) div.innerHTML='content 3'; // OPTIONAL - just to ensure that content 3 is displayed even after December.
}
</script>
</head>
<body onload="SetDivContent()">
<div id="date_dependent"></div>
</body>
</html> 
```

2010 年 11 月 30 日 22:16 回答

犀牛

# text - 文本在 IE 8 中以粗体显示

> ID：14047530
> 
> 赞同：0
> 
> 时间：2012-12-26T23:25:38.743
> 
> 标签：text, internet-explorer-8, bold

我网站上的所有文本在 IE 8 中都以粗体显示。其他浏览器（例如 IE 9、Chrome 和 FF）仅在指定时显示粗体。是否有我可以使用的 IE 8 特定修复程序？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:29:56.970

看看[HTML 条件。](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)您可以针对 ie-8 并添加具有特定规则的 css 文件。

# c# - 从 RSACryptoServiceProvider 获取公钥？

> ID：14047532
> 
> 赞同：6
> 
> 时间：2012-12-26T23:25:43.863
> 
> 标签：c#, encryption, rsa

我正在尝试使用公钥加密与客户端和服务器进行通信。服务器应该生成一个 1024 位的公钥并将其发送给客户端，客户端将使用该密钥将加密数据发送回服务器。到目前为止，我已经用这个初始化了 RSACryptoServiceProvider：

```
RSACryptoServiceProvider rsaEncryption = new RSACryptoServiceProvider(1024); 
```

现在，我知道我可以用来`ExportParameters`从 RSACryptoServiceProvider 获取指数和模数。但是，我想知道，我如何使用这些数据将公钥发送回客户端（也将使用`RSACryptoServiceProvider`），以及客户端如何使用这些数据加密某些内容以发回给我？还是我这样做完全错了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-26T23:46:29.813

您的逻辑似乎没问题，似乎您只需要一些示例代码。

```
 using System;
    using System.Security.Cryptography;
    using System.Text;

    namespace RSA
    {
        class Program
        {
            static void Main(string[] args)
            {
                try
                {
                    var rsaServer = new RSACryptoServiceProvider(1024);
                    var publicKeyXml = rsaServer.ToXmlString(false);

                    var rsaClient = new RSACryptoServiceProvider(1024);
                    rsaClient.FromXmlString(publicKeyXml);

                    var data = Encoding.UTF8.GetBytes("Data To Be Encrypted");

                    var encryptedData = rsaClient.Encrypt(data, false);
                    var decryptedData = rsaServer.Decrypt(encryptedData, false);

                    Console.WriteLine(Encoding.UTF8.GetString(decryptedData));

                    Console.WriteLine("OK");
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
                Console.Read();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-21T03:25:38.817

# 1 -*请*在您的密钥中使用 >= 2048 位以保护到 ~2025。

以上来自 2012 年，但我在尝试为 Putty / Linux 服务器连接创建 ssh-rsa 密钥时遇到了它。

我刚刚解决了以正确格式创建公共 ssh-rsa 密钥以匹配 PuttyGen 的类似问题。

对于 Microsoft .net **RSACryptoServiceProvider**，它看起来像这样

```
 RSACryptoServiceProvider RSA = new RSACryptoServiceProvider(3072);
            byte[] sshrsa_bytes = Encoding.Default.GetBytes("ssh-rsa");
            byte[] n = RSA.ExportParameters(false).Modulus;
            byte[] e = RSA.ExportParameters(false).Exponent;
            string buffer64;
            using (MemoryStream ms = new MemoryStream())
            {
                ms.Write(ToBytes(sshrsa_bytes.Length), 0, 4);
                ms.Write(sshrsa_bytes, 0, sshrsa_bytes.Length);
                ms.Write(ToBytes(e.Length), 0, 4);
                ms.Write(e, 0, e.Length);
                ms.Write(ToBytes(n.Length+1), 0, 4); //Remove the +1 if not Emulating Putty Gen
                ms.Write(new byte[] { 0 }, 0, 1); //Add a 0 to Emulate PuttyGen (remove it not emulating)
                ms.Write(n, 0, n.Length);
                ms.Flush();
                buffer64 = Convert.ToBase64String(ms.ToArray());
            }

            string pubssh = string.Format("ssh-rsa {0} generated-key", buffer64); 
```

您可以查看我用于测试的私钥和 putty gen 源代码链接[https://www.cameronmoten.com/2017/12/21/rsacryptoserviceprovider-create-a-ssh-rsa-public-key/](https://www.cameronmoten.com/2017/12/21/rsacryptoserviceprovider-create-a-ssh-rsa-public-key/)

我在微软工作，但这是个人答案，不是微软的答案。

BouncyCastle 的原始帖子（[链接](https://stackoverflow.com/questions/15457710/converting-an-rsa-public-key-into-a-rfc-4716-public-key-with-bouncy-castle/47917364#47917364)）

# ruby-on-rails - 从 Rails 表单创建一个 json 对象

> ID：14047533
> 
> 赞同：9
> 
> 时间：2012-12-26T23:25:46.550
> 
> 标签：ruby-on-rails, json

我有一个 Ruby on Rails 表单，它接受输入并将其保存为模型属性。但是，其中一个属性包含 json 数据。我希望能够将输入到多个字段中的数据保存为我的模型属性中的单个 JSON 对象。有没有办法我可以做到这一点？

如果有帮助，我还可以制作一个哈希并将其转换为 json。基本上我只想将多个输入字段合并为一个，然后从那里传递出去。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T11:05:11.233

这里有很多事情需要考虑。

第一个问题是从 HTML 表单中获取数据。如果您使用标准 Rails 命名表单输入的方式，则非常简单。

```
<input name="my_fields[value1]">
<input name="my_fields[value2]">
<input name="my_fields[sub1][value1]">
<input name="my_fields[sub1][value2]"> 
```

`params`如果您这样命名它们，则可以使用哈希通过“整体”访问它们`params[:my_fields]`，这将为您提供另一个包含您的数据的哈希。

然后你必须选择在你的模型中保存这些数据的方式。有几种选择：

1.**使用字符串属性**

只需使用`string`or`text`列并分配一个 JSON 字符串：

```
@my_model.my_data = params[:my_fields].to_json 
```

*   Pro：一个非常简单的解决方案。
*   相反：SQL 查询几乎是不可能的。使用 Rails 进行处理需要手动解析数据字符串。

2.**使用序列化哈希**

使用`string`or`text`列并在模型上将其声明为可序列化

```
serialize :my_data, Hash 
```

然后你可以使用这个列，因为它是一个简单的哈希，Rails 将执行读取和写入操作。

```
@my_model.my_data = params[:my_fields] 
```

*   Pro：仍然是一个简单的解决方案。没有搞乱 JSON 字符串。使用 Rails 处理更容易。
*   相反：SQL 查询几乎是不可能的。`to_json`如果您需要真正的 JSON 字符串，则需要调用。

3.**使用专门的 JSON 数据库类型**

如果您需要能够使用 SQL 查询数据库，上述解决方案将不起作用。您必须为此使用专门的类型。

许多 DBMS 以 XML 甚至 JSON 类型的形式提供结构化数据类型。（例如 PostgreSQL）

*   优点：可以进行数据库查询。
*   相反：需要自定义解析和序列化，迁移同上。这个解决方案可能是过度设计的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T23:42:55.403

您可以将所有多个文件保存为 JSON 格式的文本，并在需要时解析该字段。

前任：

```
a = JSON.parse('{"k1":"val1"}')
a['k1'] => "val1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:34:24.477

您可能会寻找一个`before_save`包含所有模型属性并使用方法创建 JSON 格式的`.to_json`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-07T15:36:33.440

您可能应该研究一下 Postgres 的新 JSONB 格式。我认为这可以让您获得所有优点，而没有任何缺点：

[http://robertbeene.com/rails-4-2-and-postgresql-9-4/](http://robertbeene.com/rails-4-2-and-postgresql-9-4/)

# iphone - viewController 没有全屏

> ID：14047543
> 
> 赞同：0
> 
> 时间：2012-12-26T23:26:52.480
> 
> 标签：iphone, ipad, ios5

任何人都知道如何实现类似 viewController 的东西，就像我们在 iPhone 中点击搜索时一样，没有全屏？我希望当用户向上滑动时显示 viewController（半高）。没有转场！！我希望同时显示旧的视图控制器。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:23:05.183

I Add this type of functionality for whole project, i add the QRView in window so user swip up the view from any view of project...

See the Example of my code..

Just set the `UISwipeGestureRecognizer` to your second view which you want to present like bellow...

```
 CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.view layer] addAnimation:animation forKey:kAnimationKey];
    UISwipeGestureRecognizer *swipeGesture = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(addCustomBottomBar)] autorelease];
    swipeGesture.numberOfTouchesRequired = 1;
    swipeGesture.direction = (UISwipeGestureRecognizerDirectionDown);
    [yourViewController.view addGestureRecognizer:swipeGesture];/// use your view name here, its depends on your requirement
    UISwipeGestureRecognizer *swipeGestureTop = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(addCustomBottomBar)] autorelease];
    swipeGestureTop.numberOfTouchesRequired = 1;
    swipeGestureTop.direction = (UISwipeGestureRecognizerDirectionUp);

    [yourViewController.view addGestureRecognizer:swipeGestureTop]; 
```

and this bellow method called when you swipe up view...

Also just add one `BOOL` variable with name `isViewPop` and set it to `NO` in your `viewDidLoad:` method ..

```
-(void)addCustomBottomBar{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.window cache:YES];

    if (isqrcodepop) {
        isViewPop=NO;

        yourViewController.view.frame=CGRectMake(0, 430, 320, 70);
    }
    else{
        isViewPop=YES;

        yourViewController.view.frame=CGRectMake(0, 210, 320, 270);
        [self.view bringSubviewToFront:yourViewController.view];
    }
    [UIView commitAnimations];
} 
```

i hope this answer helpful for you...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:58:15.460

如果它很简单，我会在`UIView`您`UIViewController`的底部下方添加一个 - 然后当您点击“搜索”或其他任何内容时，`UIView`使用动画块将其动画化：

```
- (IBAction)btnTouch:(id)sender
{
        [UIView animateWithDuration:0.3
                              delay:0.0
                            options: UIViewAnimationCurveEaseInOut
                         animations:^{

                              //bring searchView up
                             _searchView.transform = CGAffineTransformMakeTranslation(0, -80);

                         }
                         completion:^(BOOL finished){

                         }

         ];
} 
```

然后当你完成后，通过使用与此行相同的动画块将视图推回其原点：

```
_searchView.transform = CGAffineTransformMakeTranslation(0, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:49:03.527

您可以拥有背景视图控制器`[self presentViewController:vc animated:YES completion:nil];`并将前视图控制器的框架设置为屏幕的一半。这样，由于前视图的下半部分是透明的，因此您的背景视图控制器仍然可见

# rss - Joomla 中受密码保护的 RSS 提要

> ID：14047546
> 
> 赞同：2
> 
> 时间：2012-12-26T23:27:09.623
> 
> 标签：rss, passwords, joomla2.5

我想从 Joomla 2.5 中的帖子生成 RSS 提要，这些提要仅供登录用户使用。RSS 阅读器需要主要在移动设备上访问这些提要。

我如何对它们进行密码保护，以使用户 RSS 阅读器使用他们也用于访问网站上的新闻的相同登录名和密码访问它们？

理想情况下，RSS 提要应该可以通过 http 身份验证访问（即[http://user:password@sitename.com/?feed=1](http://user:password@sitename.com/?feed=1) ...）

这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T12:22:05.600

这难道不是通过使相关页面上的 RSS 提要模块可供包含您登录用户的组访问...通常“已注册”但理论上您可以为不同的组设置不同的模块来实现吗？不知道你为什么需要这个......但它可能会为你的问题提供解决方案。

# c# - 由于母版页中的更新面板，内容页中的 asp FileUpload 无法正常工作

> ID：14047550
> 
> 赞同：2
> 
> 时间：2012-12-26T23:27:30.510
> 
> 标签：c#, asp.net, updatepanel

我有一个母版页，其中更新面板包含内容页面的主要占位符。

在其中一个内容页面中，我需要以任何方式禁用更新面板，因为我有一个带有 asp:fileupload 控件的表单，由于更新面板，该表单始终返回 null。

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T04:13:15.213

将您的文件上传器和提交按钮放在另一个更新面板中，并为此更新面板添加回发触发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:37:45.923

在内容页面的页面加载时，尝试使用 FindControl 方法获取母版页的更新面板，然后将文件上传作为 post pack 触发器动态附加到它。这可能有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:55:09.553

我有一个坏消息要告诉你。！

看看这个

[http://ajax.asp.net/docs/overview/UpdatePanelOverview.aspx](http://ajax.asp.net/docs/overview/UpdatePanelOverview.aspx)

以下 ASP.NET 控件与部分页面更新不兼容，因此在 UpdatePanel 控件中不受支持：

`TreeView`和`Menu`控制。

Web 部件控件。有关详细信息，请参阅 ASP.NET Web 部件控件。

`FileUpload controls`当它们用于作为异步回发的一部分上传文件时。

`GridView and DetailsView controls`当他们的 EnableSortingAndPagingCallbacks 属性设置为 true 时。默认值为假。

```
Login, PasswordRecovery, ChangePassword, and CreateUserWizard controls 
```

其内容尚未转换为可编辑模板。

```
The Substitution control. 
```

验证控件，包括 BaseCompareValidator、BaseValidator、CompareValidator、CustomValidator、RangeValidator、RegularExpressionValidator、RequiredFieldValidator 和 ValidationSummary 控件。

**解决方案：** 您可能希望[使用 Jquery 来使用 Ajax FileUpload 来](http://www.c-sharpcorner.com/uploadfile/satisharveti/ajax-file-upload-using-jquery/)代替更新面板。请记住，开源始终是更好的选择。:)

# c# - 正则表达式

> ID：14047553
> 
> 赞同：0
> 
> 时间：2012-12-26T23:27:39.123
> 
> 标签：c#, regex

我正在用 C# 编写一个计算器来开始。我将在两个变量中分隔一个字符串 = Nb1 和 Nb2。我在网上找了一些例子，我发现了一些东西：

```
var numAlpha = new Regex("(?<Alpha>[a-zA-Z]*)(?<Numeric>[0-9]*)");
var match = numAlpha.Match("codename123");
var alpha = match.Groups["Alpha"].Value; // Alpha = codename
var num = match.Groups["Numeric"].Value; // Numeric = 123 
```

我无法只适应数字：“121165468746*1132”或“4586/6953”Nb1 =121165468746 || 4586 铌=1132 || 6953

你能帮助我吗 ？我要疯了 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:36:40.210

```
var numAlpha = new Regex("(?<NumOne>[0-9]+)(?<Operator>[^0-9])(?<NumTwo>[0-9]+)");
var match = numAlpha.Match("121165468746*1132");
var nb1 = match.Groups["NumOne"].Value; // nb1 = 121165468746
var nb2 = match.Groups["NumTwo"].Value; // nb2 = 1132
var op = match.Groups["Operator"].Value; // op = * 
```

看起来您要做的是匹配由运算符分隔的一对整数。上面的正则表达式使用命名组`(?<GroupName> ... )`和两个简单​​的正则表达式来实现这一点。 `[0-9]+`将匹配一个或多个数字，`[^0-9]`并将匹配任何一个非数字字符，这里假定为运算符。

如果这不是您想要的，请发表评论，我会尽力帮助您。同时，一些阅读材料：

*   [正则表达式页面，包含大量教程和参考资料](http://www.regular-expressions.info/)
*   [带有语法高亮的 Javascript 正则表达式测试器](http://regexpal.com)
*   [Java 正则表达式测试器。功能更强大，装饰更少。](http://gskinner.com/RegExr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:37:51.367

尝试将此模式用于您的正则表达式：它假定至少有两个具有一个或多个数字的数字，由一个或多个非数字字符分隔（如果运算符不仅仅是一个字符）。这些组称为`n1`和`n2`。

```
^(?<n1>\d+)[^\d]+?(?<n2>\d+)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:58:04.640

使用以下内容将数字与预定义的 4 种基本运算相乘、减、加、除。您可以根据需要在“op”表达式中添加更多运算符。

```
Regex rg = new Regex(@"(?<num1>[0-9]+)(?<op>[\*\-\+\\])(?<num2>[0-9]+)"); 
```

# javascript - 如何将 json/object 转换为数组以进行循环

> ID：14047558
> 
> 赞同：1
> 
> 时间：2012-12-26T23:28:00.230
> 
> 标签：javascript, arrays, json, object

我有一个调用 api 的 javascript 应用程序，并且 api 返回 json。使用 json，我选择了一个特定的对象，然后循环遍历它。

我的代码流程是这样的：服务调用-> GetResults 循环通过结果和构建页面

但问题是，有时 api 只返回一个结果，这意味着它返回一个对象而不是数组，所以我不能循环遍历结果。解决这个问题的最佳方法是什么？

我应该将我的对象或单个结果转换为数组吗？将其放入/推送到数组中？或者我应该做一个 typeof 并检查元素是否是一个数组，然后进行循环？

谢谢您的帮助。

```
//this is what is return when there are more than one results
var results = {
pages:  [
        {"pageNumber":204},
        {"pageNumber":1024},
        {"pageNumber":3012}
    ]
}

//this is what is returned when there is only one result
var results = {
    pages: {"pageNumber": 105}
} 
```

我的代码循环遍历结果，只使用一个 for 循环，但它会产生错误，因为有时结果不是数组。再说一遍，我是否检查它是否是一个数组？将结果推送到新数组中？什么会更好。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T23:38:39.707

如果您无法控制服务器端，您可以做一个简单的检查以确保它是一个数组：

```
if (!(results.pages instanceof Array)) {
    results.pages = [results.pages];
}

// Do your loop here. 
```

否则，理想情况下这应该发生在服务器上；始终可以以类似方式访问结果应该是合同的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:03:35.847

将您对循环内的对象所做的任何事情安排到一个单独的过程中，如果您发现该对象不是数组，请直接将该过程应用于它，否则，将其多次应用于该对象的每个元素：

```
function processPage(page) { /* do something to your page */ }

if (pages instanceof Array) pages.forEach(processPage);
else processPage(pages); 
```

Obvious benefits of this approach as compared to the one, where you create a redundant array is that, well, you don't create a redundant array and you don't modify the data that you received. While at this stage it may not be important that the data is intact, in general it might cause you more troubles, when running integration and regression tests.

# iphone - 为 Story Board 中的 2 个视图控制器使用相同的 ViewController h 和 m 文件

> ID：14047560
> 
> 赞同：1
> 
> 时间：2012-12-26T23:28:11.417
> 
> 标签：iphone, xcode

所以我几乎构建了我的第一个应用程序（单一视图），但我现在决定我应该添加一个小“关于/信息”按钮，并提供关于如何使用应用程序和网站的少量信息。

我不确定解决这个问题的最佳方法，但故事板似乎真的很方便。这里的一位用户回答了我关于在我现有的项目中添加故事板的问题，这似乎可行。

现在的一个问题是我可以将我当前的 viewcontroller h 和 m 文件用于第二个视图（关于屏幕）。我想如果我将 Viewcontroller 设置为与我的主要应用程序视图相同的视图，它在技术上会起作用。

第二个视图唯一的东西是文本和一个返回按钮。是否可以在情节提要中设置连接并让它们使用相同的 Viewcontroller 文件，或者这是一个很大的禁忌？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:36:34.570

建议您为每个视图使用不同的视图控制器。在静态视图控制器的情况下，用户除了导航之外不与视图交互（在许多情况下可以在情节提要中处理），我只会将该视图控制器保留为泛型`UIViewController`，而不是子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:37:55.610

是的，您可以使用同一个视图控制器来控制多个视图，但是，据我了解，在您的情况下，这似乎不是一个好习惯

例如，如果您有类似的视图，具有几乎相同的插座（例如，视图具有相同的 UI 小部件，例如按钮、标题，但它们的布局差异很大），您可以[可以为每个不同的布局创建单独的视图并使用单个视图控制器. 但据我了解，在您的情况下，这两个视图将有不同的出口（按钮、标签等）

出于这个原因，我建议创建一个新的视图控制器。然后，当您想显示第二个视图时，您必须从活动视图控制器中显示它。我强烈建议您阅读 Apple 开发人员资源中有关视图控制器的教程。但很快，我会建议以下

```
UIViewController *vc2 = [[UIViewController alloc] initWithNibName:@"View2" bundle:[NSBundle mainBundle]]
[self presentViewController:vc2 animated:YES completion:nil]; 
```

要返回主视图，您必须关闭第二个视图控制器

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

当然，它们不必是动画的，您可以将它们设置为 NO。

# asp.net - 为什么 MVC4 WebApi 控制器操作中需要“全部”？

> ID：14047564
> 
> 赞同：2
> 
> 时间：2012-12-26T23:28:41.530
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

在我迄今为止看到的 MVC4 WebApi 示例中，以下 URL

```
/api/products 
```

映射到 Products 控制器中的以下操作

```
GetAllProducts 
```

是否需要“全部”？只使用会更合乎逻辑

```
GetProducts 
```

这在我的应用程序中令人困惑的原因是 /api/products 接受一个“过滤器”对象，该对象返回产品的子集而不是“所有”产品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:35:15.907

“全部”不是必需的。唯一重要的是方法名称以“Get”开头。之后，如果有来自 URI 的参数，方法参数也会影响选择哪个操作。

尝试将适用于您的“GetAllProducts”方法重命名为“GetProducts”，如果您不更改任何其他内容，它应该可以正常工作。

# python - 在蜘蛛完成后存储要处理的scrapy项目

> ID：14047567
> 
> 赞同：2
> 
> 时间：2012-12-26T23:28:59.107
> 
> 标签：python, signals, scrapy, pipeline

我正在编写一个scrapy管道，该管道将调用一个函数来清除我们cdn的边缘服务器的抓取的url。我想出了如何轻松地存储访问过的 url 列表，但问题是知道爬虫何时完成。

cdn 的 api 以 100 个为一组获取 url，所以我可以很容易地每 100 个 url 调用它的 clear 函数，但是如果有 543 个 url 要抓取最后 43 个将不会发送到 cdn 的 clear 函数。

我一直在查看scrapy信号文档，但我不知道是否

1.  当收到最后一个请求或所有项目都通过管道时，将调用 spider_close 信号。如果是后者，不知道用最后43个url调用api就来不及了
2.  另一种选择是添加一个扩展，当它接收到 spider_close 信号时调用 cdn 的 api，但是它如何知道蜘蛛看到的所有 url？我可以在项目管道中构建它们的列表，但是如何将其添加到扩展中？（我也许可以使用我刚刚想到的 item_scraped 信号。）

所以，是的，有没有办法知道，在管道内，什么时候没有更多的项目来了？是否有多个管道同时运行，或者每个管道都是单例的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:32:12.977

所以我发现当蜘蛛完成爬行后关闭并且一切都通过管道时，每个管道中都会调用一个函数，即

```
def close_spider(self, spider):
    pass 
```

还有一个在启动时调用的函数，即

```
def open_spider(self, spider):
    pass 
```

# android - ImageView 只是消失了，我无法让它显示

> ID：14047569
> 
> 赞同：0
> 
> 时间：2012-12-26T23:29:32.350
> 
> 标签：android, listview

我正在尝试显示项目列表并能够在某些项目上放置标记。但是，无论标记不会显示而视图的其余部分会显示，但在 Eclipse 中，布局编辑器会显示它。

布局在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="100dp" >

<ImageView 
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:scaleType="centerCrop"
    android:src="#322"
    android:id="@+id/image" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:layout_alignParentBottom="true"
    android:padding="5dp"
    android:background="@android:color/holo_blue_dark"
    android:text="Hello world"
    android:textColor="@android:color/primary_text_dark"
    android:id="@+id/title" />

<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_above="@+id/title"
    android:layout_alignParentRight="true"
    android:paddingRight="10dp"
    android:src="@drawable/ic_tick" />

</RelativeLayout> 
```

在我的 ListAdapter 中，我尝试让它显示如下：

```
 iv = (ImageView)convertView.findViewById(R.id.icon);
    Log.d("trakt", ti.glyph + "");
    if(ti.glyph == 0){
        iv.setVisibility(View.GONE);
    } else{
        Log.d("trakt", "showing glyph");
        iv.setVisibility(View.VISIBLE);
        // iv.setImageResource(ti.glyph); - this is disabled for now
    } 
```

日志显示正确的数字和“显示字形”，但它没有出现在屏幕上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:46:31.780

我认为您在文本视图后面有标记，尝试使用 iv.bringToFront() 将其移动到前面

# mongodb - MongoDB，使用 group by 聚合框架来获取唯一的字符串

> ID：14047572
> 
> 赞同：1
> 
> 时间：2012-12-26T23:29:43.540
> 
> 标签：mongodb, aggregation-framework

我正在尝试使用聚合框架将许多字符串组合在一起以识别唯一的字符串。我还必须保留有关其余字段的一些信息。这类似于我在 mysql 中使用 * 运算符和 group by 语句。

```
SELECT * 
FROM my_table
GROUP BY field1 
```

我试过使用聚合框架，它只是为了获得唯一的字段而工作得很好。

```
db.mycollection.aggregate({ 
    $group : { _id : "$field1"}
    }) 
```

如果我想要与此相关的其他领域怎么办。MySQL 只会给我出现在组中的第一个（我很好）。这就是我认为 $first 运算符所做的。

```
db.mycollection.aggregate({
  $group : { 
       _id : "$field1",
       another_field : {$first : "$field2"}
  }}) 
```

这样，它按 field1 分组，但仍然让我返回附加到文档的其他字段。当我尝试这个时，我得到：

```
 exception: aggregation result exceeds maximum document size (16MB) 
```

我有一种感觉是因为它将整个聚合返回为一个文档。我可以将它作为另一个 json 数组返回吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T01:21:30.080

您正在正确地进行聚合，但正如错误消息所示，调用的完整结果[不能](http://docs.mongodb.org/manual/applications/aggregation/#result)`aggregate`大于 16 MB。

解决方法是添加一个过滤器以减小结果的大小，或者使用 map-reduce 代替并将结果输出到另一个集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:06:25.537

如果结果的唯一值不超过 2000，则可以使用 group() 函数，例如

```
db.mycollection.group( {key : {field1 : 1, field2 : 1}}, reduce: function(curr, result){}, initial{} }) 
```

最后一个选项是 map reduce：

```
db.mycollection.mapReduce( function() { emit( {field1 :1, field2: 1}, 1); }, function(key, values) { return 1;}, {out: {replace: "unique_field1_field2"}}) 
```

并且您的结果将在“unique_field1_field2”集合中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T01:24:44.893

另一种选择是使用以下`distinct`功能：

```
db.mycollection.distinct('field1') 
```

此函数接受第二个参数，即查询，您可以在其中过滤文档。

# qt - 如何在 Qt WebView 中显示嵌入的 html

> ID：14047576
> 
> 赞同：5
> 
> 时间：2012-12-26T23:30:11.043
> 
> 标签：qt, qml, embedded-resource, qtwebkit, qt5

我试图让 Qt WebView 显示一个嵌入为 Qt 资源的 html 文件，但我似乎无法让它工作。我创建了一个新的 Qt Quick 应用程序并添加了一个简单的 qml 文件：

```
import QtQuick 2.0
import QtWebKit 3.0

Rectangle {
    id: content
    width: 800
    height: 600
    color: "black"

    WebView {
        id: webView
        anchors.fill: parent
        url: "qrc:/res/test.html"
    }
} 
```

然后我（使用设计器）创建了一个如下所示的资源文件：

```
<RCC>
    <qresource prefix="/res">
        <file>test.html</file>
    </qresource>
</RCC> 
```

并创建了一个简单的 test.html 文件（与 .qrc 文件在同一目录中）：

```
<html>
<head><title>Hello</title></head>
<body>
  <h1>Hello World!</h1>
</body>
</html> 
```

结果只是一个空白的白色窗口。如果我`http://www.stackoverflow.com`在 qml 文件中使用常规 url ( ) 作为它工作的 url - 将显示页面。如果我使用嵌入图像 ( `qrc:/qt-project.org/mac/cursors/images/pluscursor.png`) 的名称，则会显示该图像。

在我看来，好像确实添加了html文件（至少在我枚举嵌入式资源时列出了它），但是我对Qt资源系统的理解有限，所以我很可能误解了一些基本的东西。

**谁能告诉我我做错了什么？**

更新：如果我尝试告诉 Web 视图也从 C++ 加载 url，我已经验证了行为是相同的。我还验证了资源确实是嵌入的——我可以使用 QResource 打开和读取资源。此外，这似乎并不特定于 Qt5：http://qt-project.org/forums/viewthread/18181 [（](http://qt-project.org/forums/viewthread/18181)有人对 Qt 4.8 有类似问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T22:13:45.587

首先，确保资源文件在编译文件夹（一个`.RCC`文件或一个`qrc_<Resource name>.cpp`）上正确编译
其次，确保您的文件路径正确（在我的情况下`qrc:/images/resource/html/test.html`）。您可以打开 QRC 文件并右键单击 html 文件，然后单击`Copy Resource Path to Clipboard`.
第三，请注意，某些 url 需要更多时间才能完全加载。

最后，我测试了这个场景，效果很好（使用 Qt 5.1.0）

祝你好运 - SMMousavi

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-21T07:29:14.260

我不认为可以直接在 WebView 中从 qrc 打开资源（我已经尝试了所有 url 变体）。我现在正在做的是将文件复制到本地临时目录然后打开。

```
QString helpHTMLFile = QStandardPaths::writableLocation(QStandardPaths::TempLocation);
helpHTMLFile.append(QDir::separator());
helpHTMLFile.append("software_manual.html");
QFile(helpHTMLFile).remove();
QFile(":/software_manual.html").copy(helpHTMLFile);

QQmlApplicationEngine engine;
engine.rootContext()->setContextProperty("pathToFile", "file:///"+helpHTMLFile); 
```

然后 QML 看起来像：

```
WebView {
         anchors.fill: parent
         url: pathToFile
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-26T15:24:14.293

好的，这就是我最终解决这个问题的方法。我最终使用了一个普通的小部件而不是基于 qml 的界面。

然后我必须手动从资源中读取第一个 html 页面并提供基本 url。之后，作为资源嵌入的后续页面和资源可以正常加载。

这是有问题的代码：

```
QResource res(":/html/index.html");
ui->webView->setHtml(reinterpret_cast<const char *>(res.data()), QUrl("qrc:/html/")); 
```

哪里`webView`是`QWebView`。我的 .qrc 文件如下所示：

```
<RCC>
    <qresource prefix="/">
        <file>html/index.html</file>
    </qresource>
</RCC> 
```

这适用于 Qt 5.5.0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-27T08:08:36.093

加载资源文件的最快方法是使用`XMLHttpRequest`and `loadHtml()`。这适用于移动平台的 Qt 5.10.1。

```
import QtQuick 2.10
import QtQuick.Controls 2.3
import QtWebView 1.1

Page {
    anchors.fill: parent

    WebView {
        id: webView
        anchors.fill: parent

        Component.onCompleted: {

            var resource = 'qrc:/path/to/your/resource.html';

            var xhr = new XMLHttpRequest;
            xhr.open('GET', resource);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    var response = xhr.responseText;
                    webView.loadHtml(response);
                }
            };
            xhr.send();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T21:26:15.633

为什么不直接使用

```
url: "res/test.html" 
```

代替

```
url: "qrc:/res/test.html" 
```

?

然后你就不需要使用任何资源文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-10T07:07:34.487

您可以在 QApplication a(argc, argv); 之后放置以下行

```
QtWebView::initialize(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-11T10:26:30.877

至少`WebEngineView`在 QML 中，最新的 Qt 中提供了 Web 引擎支持的嵌入式资源 URL 加载支持。我无法找到有关此的官方文档，但[一个官方示例](https://doc.qt.io/qt-5/qtwebengine-webengine-customdialogs-example.html#form-validation-message-requests)从资源中加载页面：

```
WebEngineView {

    url: "qrc:/index.html"
...
} 
```

它也适用于我`Qt 5.8.0`。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-07-08T22:23:38.877

只需使用 Path-To-File & 如果您将其保存在项目目录中，只需设置文件 url 的名称：“/res/test.html”

& 如果文件在项目目录 url 中：“test.html”

# c++ - For循环初始化

> ID：14047577
> 
> 赞同：-1
> 
> 时间：2012-12-26T23:30:14.817
> 
> 标签：c++, visual-studio-2010, visual-c++, loops, for-loop

所以我想知道是否可以在 for 循环的声明中声明一个变量。此代码有效吗？

```
for (int a = 0;a < len + 1;a++); 
```

`a`会存在于什么范围内？它会在 for 循环之外无效，还是我仍然可以访问它？

另外，我是否可以在单个 for 循环语句中声明或初始化 2 个变量？

```
for (int a = 0, b = len + 1;a < b;a++); 
```

这是一个有效的陈述吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T23:32:51.837

两者都是完全有效的，因为语句的初始化部分`for`（称为*for-init-statement*）要么是*表达式语句*，要么是*简单声明*。您的两个示例都是*简单声明*-第二个示例只有两个声明符。

*在for-init-statement*中声明的变量的范围是`for`循环本身，因此它在循环之外不可用`for`（第 6.5.3/3 节）：

> 如果*for-init-statement*是一个声明，则声明的名称的范围会扩展到*for-statement*的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T23:33:47.407

您可以在 for 循环中声明 then ，这是这样做的正常方法。

通常它的范围与 for 循环的 {} 一样长。

Visual Studio（不确定其他编译器）可以设置标志以扩展 for 循环之外的范围。不要那样做。

您可以在 for 循环初始化中声明多个变量，只要它们属于同一类型即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T23:31:47.837

它在循环之外是无效的，`for`因为它的范围是`for`循环，是的。是的，这也是一个有效的声明。

[工作](http://codepad.org/fcqnQtf8)和[不工作](http://codepad.org/LafVcZg9)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T23:45:52.437

两者都是有效的，但在这种情况下：

```
for (int a = 0, b = len + 1;a < b;++a); 
```

会更快

```
for (int a = 0;a < len + 1;++a); 
```

因为 len+1 是预先计算的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-01-21T15:11:33.493

```
for (int a = 0;a < len + 1;a++); 
```

如果在此语句之前未声明“int i”，这完全没问题。

无法在 for 循环之外访问“a”。

```
for (int a = 0, b = len + 1;a < b;a++); 
```

这也很好，但是

```
for (int a = 0;int b = len + 1;a < b;a++); 
```

或者

```
for (int a = 0;double b = len + 1;a < b;a++); 
```

以上两个语句都无效b'se你必须用“分号”替换“逗号”和

# java - 在Java中将*s打印为三角形？

> ID：14047583
> 
> 赞同：7
> 
> 时间：2012-12-26T23:31:48.117
> 
> 标签：java, loops

我在 Java 课程中的任务是制作 3 个三角形。一个左对齐，一个右对齐，一个居中。我必须为什么类型的三角形制作一个菜单，然后输入需要多少行。三角形必须看起来像这样

```
*
**
***
****

   *
  **
 ***
****

  *
 ***
***** 
```

到目前为止，我能够做左对齐的三角形，但我似乎无法得到另外两个。我尝试使用谷歌搜索，但没有任何结果。任何人都可以帮忙吗？到目前为止我有这个。

```
import java.util.*;
public class Prog673A
{
    public static void leftTriangle()
    {
        Scanner input = new Scanner (System.in);
        System.out.print("How many rows: ");
        int rows = input.nextInt();
        for (int x = 1; x <= rows; x++)
        {
            for (int i = 1; i <= x; i++)
            {
                System.out.print("*");
            }
            System.out.println("");
        }
    }
    public static void rightTriangle()
    {
        Scanner input = new Scanner (System.in);
        System.out.print("How many rows: ");
        int rows = input.nextInt();
        for (int x = 1; x <= rows; x++)
        {
            for (int i = 1; i >= x; i--)
            {
                System.out.print(" ");
            }
            System.out.println("*");
        }
    }
    public static void centerTriangle()
    {

    }
    public static void main (String args [])
    {
        Scanner input = new Scanner (System.in);
        System.out.println("Types of Triangles");
        System.out.println("\t1\. Left");
        System.out.println("\t2\. Right");
        System.out.println("\t3\. Center");
        System.out.print("Enter a number: ");
        int menu = input.nextInt();
        if (menu == 1)
            leftTriangle();
        if (menu == 2)
            rightTriangle();
        if (menu == 3)
            centerTriangle();
    }
} 
```

样本输出：

```
Types of Triangles
1\.  Left
2\.  Right
3\.  Center
Enter a number (1-3):  3
How many rows?: 6

     *
    ***
   *****
  *******
 *********
*********** 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T23:44:06.037

**提示：**对于每一行，您需要*先*打印一些空格，*然后再*打印一些星号。空格数应每行减少一个，而星数应增加。

对于居中的输出，将每行的星数增加*两个*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T00:15:48.677

Ilmari Karonen 有很好的建议，我想概括一下。一般来说，在你问“我怎样才能让电脑来做这件事？”之前。问“我该怎么*做*？”

所以，如果有人给你一个空的 Word 文档并要求你创建三角形，你会怎么做呢？无论您想出什么解决方案，通常都不难将其翻译成 Java（或任何其他编程语言）。它可能不是最好的解决方案，但（希望如此！）它会起作用，它可能会为您指明更好的解决方案。

例如，也许你会说你要输入基数，然后上一行，然后输入下一个最高的行，等等。这表明你可以在 Java 中做同样的事情——创建一个字符串列表，从底部到顶部，然后将它们反转。这可能表明您可以按相反的顺序创建它们，然后不必颠倒它们。然后*这*可能表明您不再需要该列表，因为您只需按照相同的顺序创建和打印它们——此时您基本上已经提出了 Ilmari Karonen 的建议。

或者，也许你会想出另一种方法——也许你会更直接地想出 Ilmari Karonen 的想法。无论如何，它应该可以帮助您解决这个问题和许多其他问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-02T06:42:48.113

这是正常三角形：

```
for (int i = 0; i < 5; i++) {
    for (int j = 5; j > i; j--) {
        System.out.print(" ");
    }
    for (int k = 1; k <= i + 1; k++) {
        System.out.print(" *");
    }
    System.out.print("\n");
} 
```

输出：

```
 *
     * *
    * * *
   * * * *
  * * * * * 
```

这是左三角形，只是在打印前删除了空间`*`：

```
for (int i = 0; i < 5; i++) {
    for (int j = 5; j > i; j--) {
        System.out.print(" ");
    }
    for (int k = 1; k <= i + 1; k++) {
        System.out.print("*");
    }
    System.out.print("\n");
} 
```

输出：

```
 *
    **
   ***
  ****
 ***** 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-07T13:03:01.440

```
package apple;

public class Triangle {
    private static final int row = 3;

    public static void main(String... strings) {
        printLeftTriangle();
        System.out.println();
        printRightTriangle();
        System.out.println();
        printTriangle();
    }

    // Pattern will be
    // *
    // **
    // ***
    public static void printLeftTriangle() {
        for (int y = 1; y <= row; y++) {
            for (int x = 1; x <= y; x++)
                System.out.print("*");
            System.out.println();
        }
    }

    // Pattern will be
    //   *
    //  **
    // ***
    public static void printRightTriangle() {
        for (int y = 1; y <= row; y++) {
            for (int space = row; space > y; space--)
                System.out.print(" ");
            for (int x = 1; x <= y; x++)
                System.out.print("*");
            System.out.println();
        }
    }

    // Pattern will be
    //   *
    //  ***
    // *****
    public static void printTriangle() {
        for (int y = 1, star = 1; y <= row; y++, star += 2) {
            for (int space = row; space > y; space--)
                System.out.print(" ");
            for (int x = 1; x <= star; x++)
                System.out.print("*");
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-21T17:02:53.913

左对齐三角形- * **

* * *

* * *

```
from above pattern we come to know that-
1)we need to print pattern containing n rows (for above pattern n is 4).
2)each  row contains star and no of stars i each row is incremented by 1.
So for Left alinged triangle we need to use 2 for loop.
1st "for loop" for printing n row.
2nd  "for loop for printing stars in each rows. 

 Code for  Left alinged triangle-

 public static void leftTriangle()
{
       /// here  no of rows is 4
 for (int a=1;a<=4;a++)// for loop for row
 {   
 for (int b=1;b<=a;b++)for loop for column
 {
 System.out.print("*");
 }

System.out.println();}
} 
```

* * *

直角三角形- *
**

* * *

* * *

```
from above pattern we come to know that-
1)we need to print pattern containing n rows (for above pattern n is 4).
 2)In each  row we need to print spaces followed by a star & no of spaces            in each row is decremented by 1.
 So for Right alinged triangle we need to use 3 for loop.
 1st "for loop" for printing n row.
 2nd  "for loop for printing spaces.
 3rd "for loop" for printing stars.

Code for Right alinged triangle -

public void rightTriangle()
{
    // here 1st print space and then print star
  for (int a=1;a<=4;a++)// for loop for row
 { 
 for (int c =3;c>=a;c--)// for loop fr space
 {  
 System.out.print(" ");
 }
 for (int d=1;d<=a;d++)// for loop for column
 { 
 System.out.print("*");   
 }
 System.out.println(); 
 }
 } 
```

* * *

中心三角形- *
* *

* * *

* * *

从上面的模式我们知道 - 1）我们需要打印包含 n 行的模式（因为上面的模式 n 是 4）。2）最初在每一行中，我们需要打印空格，后跟一个星号，然后再打印一个空格。开始时每行中的空格数减 1。因此对于直角三角形，我们需要使用 3 for 循环。第一个用于打印 n 行的“for 循环”。第二个“for循环”用于打印空间。第三个“for循环”用于打印星星。

中心三角形的代码-

```
public  void centerTriangle()
{   
for (int a=1;a<=4;a++)// for lop for row
{   
for (int c =4;c>=a;c--)// for loop for space
{  
System.out.print(" ");
}
for (int b=1;b<=a;b++)// for loop for column
{
System.out.print("*"+" ");
}
System.out.println();}
} 
```

* * *

打印所有 3 种模式的代码 - public class space4 { public static void leftTriangle() { /// 这里的行数是 4 for (int a=1;a<=4;a++)// for loop for row {
for ( int b=1;b<=a;b++)for 列循环 { System.out.print("*"); }

```
System.out.println();}
}

public static void rightTriangle()
{
    // here 1st print space and then print star
  for (int a=1;a<=4;a++)// for loop for row
 { 
 for (int c =3;c>=a;c--)// for loop for space
 {  
 System.out.print(" ");
 }
 for (int d=1;d<=a;d++)// for loop for column
 { 
 System.out.print("*");   
 }
 System.out.println(); 
 }
 }

public static void centerTriangle()
{   
for (int a=1;a<=4;a++)// for lop for row
{   
for (int c =4;c>=a;c--)// for loop for space
{  
System.out.print(" ");
}
for (int b=1;b<=a;b++)// for loop for column
{
System.out.print("*"+" ");
}
System.out.println();}
}
public static void main (String args [])
{
space4 s=new space4();
s.leftTriangle();
s.rightTriangle();
s.centerTriangle();
}
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-08T06:06:48.350

**1) 法线三角形**

```
package test1;

 class Test1 {

     public static void main(String args[])
     {
         int n=5;
     for(int i=0;i<n;i++)
     {

         for(int j=0;j<=n-i;j++)
         {

             System.out.print(" ");
         }

         for(int k=0;k<=2*i;k++)
         {
         System.out.print("*");
         }

         System.out.println("\n");

     }

     } 
```

**2）直角三角形**

```
package test1;

 class Test1 {

     public static void main(String args[])
     {
         int n=5;
     for(int i=0;i<n;i++)
     {

         for(int j=0;j<=n-i;j++)
         {

             System.out.print(" ");
         }

         for(int k=0;k<=i;k++)
         {
         System.out.print("*");
         }

         System.out.println("\n");

     }

     }

}

     } 
```

**3) 左角三角形**

```
package test1;

 class Test1 {

     public static void main(String args[])
     {
         int n=5;
     for(int i=0;i<n;i++)
     {

         for(int j=0;j<=i;j++)
         {

             System.out.print("*");
         }

         System.out.println("\n");

     }

     }

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-24T17:38:13.997

我知道这已经很晚了，但我想分享我的解决方案。

```
public static void main(String[] args) {
    String whatToPrint = "aword";
    int strLen = whatToPrint.length(); //var used for auto adjusting the padding
    int floors = 8;
    for (int f = 1, h = strLen * floors; f < floors * 2; f += 2, h -= strLen) {
        for (int k = 1; k < h; k++) {
                System.out.print(" ");//padding
            }
        for (int g = 0; g < f; g++) {
            System.out.print(whatToPrint);
        }
        System.out.println();
    }
} 
```

三角形左侧的空格会根据您要打印的字符或单词自动调整。

如果`whatToPrint = "x"`它`floors = 3`会打印

`x xxx xxxxx` 如果没有自动调整空间，它看起来像这样（`whatToPrint = "xxx"`相同的楼层数）

`xxx xxxxxxxxx xxxxxxxxxxxxxxx`

所以我添加了一个简单的代码，这样它就不会发生。

对于左半三角形，只需更改`strLen * floors`to`strLen * (floors * 2)`和`f +=2`to `f++`。

对于右半三角形，只需删除此循环`for (int k = 1; k < h; k++)`或更改`h`为`0`，如果您选择删除它，请不要删除`System.out.print(" ");`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-24T12:57:35.557

```
import java.util.Scanner;

public class A {

    public void triagle_center(int max){//max means maximum star having
        int n=max/2;
        for(int m=0;m<((2*n)-1);m++){//for upper star
            System.out.print(" ");
        }
        System.out.println("*");

        for(int j=1;j<=n;j++){
            for(int i=1;i<=n-j; i++){
                System.out.print("  ");
            }
            for(int k=1;k<=2*j;k++){
            System.out.print("* ");
            }

            System.out.println();
        }

    }

    public void triagle_right(int max){
        for(int j=1;j<=max;j++){
            for(int i=1;i<=j; i++){
                System.out.print("* ");
            }

            System.out.println();
        }
    }

    public void triagle_left(int max){
        for(int j=1;j<=max;j++){
            for(int i=1;i<=max-j; i++){
                System.out.print("  ");
            }
            for(int k=1;k<=j; k++){
                System.out.print("* ");
            }

            System.out.println();
        }
    }

    public static void main(String args[]){
        A a=new A();
        Scanner input = new Scanner (System.in);
        System.out.println("Types of Triangles");
        System.out.println("\t1\. Left");
        System.out.println("\t2\. Right");
        System.out.println("\t3\. Center");
        System.out.print("Enter a number: ");
        int menu = input.nextInt();
        Scanner input1 = new Scanner (System.in);
        System.out.print("maximum Stars in last row: ");
        int row = input1.nextInt();
        if (menu == 1)
            a.triagle_left(row);
        if (menu == 2)
            a.triagle_right(row);
        if (menu == 3)
            a.triagle_center(row);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-28T12:43:59.660

对于三角形来说，你需要三个循环来代替两个循环，一个外循环来迭代主循环内的两个并行循环第一个循环打印减少循环数第二个循环打印增加没有' *'我可以也给出确切的逻辑，但如果你首先尝试集中在每行中需要多少个空格和多少个'* ''将符号的数量与循环迭代的行数联系起来，你就完成了......如果更麻烦，请告诉我，我也会用逻辑和代码解释

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-27T09:15:17.583

对于直角三角形，对于每一行：

*   首先：您需要打印从 0 到`rowNumber - 1 - i`.
*   第二：您需要`\*`从`rowNumber - 1 - i`to打印`rowNumber`。

**注意：** `i`是从 0 到的行索引，`rowNumber`是`rowNumber`行数。

对于中心三角形：它看起来像“直角三角形”加上 `\*`根据行索引添加（例如：在第一行中您将不添加任何内容，因为索引为 0 ，在第二行中您将添加一个 ' * '，等等上）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-05T09:12:03.600

这将以三角形打印星星：

```
`   
public class printstar{
public static void main (String args[]){
int m = 0;
for(int i=1;i<=4;i++){
for(int j=1;j<=4-i;j++){
System.out.print("");}

for (int n=0;n<=i+m;n++){
if (n%2==0){
System.out.print("*");}
else {System.out.print(" ");}
}
m = m+1;
System.out.println("");
}
}
}' 
```

阅读和理解这应该有助于您下次设计逻辑。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-18T12:43:56.090

找到以下内容，它将帮助您打印完整的三角形。

```
package com.raju.arrays; 
```

公共类 CompleteTringe {

```
public static void main(String[] args) {
    int nuberOfRows = 10;
      for(int row = 0; row<nuberOfRows;row++){

          for(int leftspace =0;leftspace<(nuberOfRows-row);leftspace++){
              System.out.print(" ");
          }
          for(int star = 0;star<2*row+1;star++){
              System.out.print("*");
          }
          for(int rightSpace =0;rightSpace<(nuberOfRows-row);rightSpace++){
              System.out.print(" ");
          }
          System.out.println("");
      }

} 
```

}

```
 *          
     ***         
    *****        
   *******       
  *********      
 ***********     
************* 
```

* * *

* * *

* * *

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-03T14:06:42.630

目标输出：

```
 *
     ***
    ***** 
```

执行：

```
for (int i = 5; i >= 3; i--)
    for (int a = 1; a <= i; a++)
    {   
        System.out.print(" ");
    }

    for (int j = 10; j/2>=i; j--)
    {
        System.out.print("*");
    }
    System.out.println("");
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-31T19:11:57.497

```
public static void main(String[] args) {

    System.out.print("Enter the number: ");
    Scanner userInput = new Scanner(System.in);
    int myNum = userInput.nextInt();
    userInput.close();

    System.out.println("Centered Triange");
    for (int i = 1; i <= myNum; i+=1) {//This tells how many lines to print (height)

        for (int k = 0; k < (myNum-i); k+=1) {//Prints spaces before the '*'
            System.out.print(" ");
        }

        for (int j = 0; j < i; j++) { //Prints a " " followed by '*'.   
            System.out.print(" *");
        }

        System.out.println(""); //Next Line     
    }

    System.out.println("Left Triange");
    for (int i = 1; i <= myNum; i+=1) {//This tells how many lines to print (height)

        for (int j = 0; j < i; j++) { //Prints the '*' first in each line then spaces.  
            System.out.print("* ");
        }

        System.out.println(""); //Next Line         
    }

    System.out.println("Right Triange");
    for (int i = 1; i <= myNum; i+=1) {//This tells how many lines to print (height)

        for (int k = 0; k < (myNum-i); k+=1) {//Prints spaces before the '*'
            System.out.print("  ");
        }

        for (int j = 0; j < i; j+=1) { //Prints the " " first in each line then a "*".  
            System.out.print(" *");
        }

        System.out.println(""); //Next Line         
    }

} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-02-13T04:39:40.653

这是最简单的程序，它只需要 1 个 for 循环来打印三角形。这仅适用于中心三角形，但小的调整也可以使其适用于其他三角形 -

```
import java.io.DataInputStream;

public class Triangle {
    public static void main(String a[]) throws Exception{
        DataInputStream in = new DataInputStream(System.in);

        int n = Integer.parseInt(in.readLine());
        String b = new String(new char[n]).replaceAll("\0", " ");
        String s = "*";
        for(int i=1; i<=n; i++){
            System.out.print(b);
            System.out.println(s);
            s += "**";
            b = b.substring(0, n-i);
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-09T08:05:23.967

对于中心三角形

```
 Scanner sc = new Scanner(System.in);
      int n=sc.nextInt();
      int b=(n-1)*2;  
      for(int i=1;i<=n;i++){
      int t= i;
      for(int k=1;k<=b;k++){
      System.out.print(" ");
       }
       if(i!=1){
        t=i*2-1;
       }
       for(int j=1;j<=t;j++){
       System.out.print("*");
       if(j!=t){
       System.out.print(" ");
       }
        }
        System.out.println();
            b=b-2;  
        } 
```

输出：

```
 *
          * * * 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-17T10:27:33.510

对于左对齐的直角三角形，您可以在 java 中尝试这个简单的代码：

```
import java.io.*;
import java.util.*;

public class Solution {

    public static void main(String[] args) {
      Scanner sc=new Scanner(System.in);
      int size=sc.nextInt();
       for(int i=0;i<size;i++){
           for(int k=1;k<size-i;k++){
                   System.out.print(" ");
               }
           for(int j=size;j>=size-i;j--){

               System.out.print("#");
           }
           System.out.println();
       }
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-30T10:05:53.810

```
 for(int i=1;i<=5;i++)
    {
        for(int j=5;j>=i;j--)
        {
            System.out.print(" ");
        }
        for(int j=1;j<=i;j++)
        {
            System.out.print("*");
        }

        for(int j=1;j<=i-1;j++)
        {
            System.out.print("*");
        }
        System.out.println("");
    }

 *
*** 
```

* * *

* * *

* * *

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-02-20T16:25:43.457

```
public class Triangle {
    public static void main ( String arg[] ) {
        System.out.print("Enter Triangle Size : ");
        int num = 0;
        try {
            num = Integer.parseInt( read.readLine() );
        } catch(Exception Number) {
            System.out.println("Invalid Number!");
        }
        for(int i=1; i<=num; i++) {
            for(int j=1; j<num-(i-1); j++) {
                System.out.print(" ");
            }
            for(int k=1; k<=i; k++) {
                System.out.print("*");
                for(int k1=1; k1<k; k1+=k) {
                    System.out.print("*");
                }
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2014-01-24T07:21:52.217

```
(a)   (b)        (c)   (d)
* ********** ********** *
** ********* ********* **
*** ******** ******** ***
**** ******* ******* ****
***** ****** ****** *****
****** ***** ***** ******
******* **** **** *******
******** *** *** ********
********* ** ** *********
********** * * **********

int line;
int star;
System.out.println("Triangle a");
        for( line = 1; line <= 10; line++ )
        {
            for( star = 1; star <= line; star++ )
            {

                System.out.print( "*" );
            }
            System.out.println();
        }

 System.out.println("Triangle b");

          for( line = 1; line <= 10; line++ )
        {
            for( star = 1; star <= 10; star++ )
            {

        if(line<star)
                System.out.print( "*" );
                else
                  System.out.print(" ");
            }
            System.out.println();
        }

 System.out.println("Triangle c");

          for( line = 1; line <= 10; line++ )
        {
            for( star = 1; star <= 10; star++ )
            {

        if(line<=star)
                System.out.print( "*" );
                //else
                 // System.out.print(" ");
            }
            System.out.println();
        }

 System.out.println("Triangle d");

          for( line = 1; line <= 10; line++ )
        {
            for( star = 1; star <= 10; star++ )
            {

        if(line>10-star)
                System.out.print( "*" );
                else
                  System.out.print(" ");
            }
            System.out.println();
        } 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2017-07-09T06:20:14.110

你可能也对此感兴趣

```
 Scanner sc = new Scanner(System.in);
      int n=sc.nextInt();
      int b=0;
      for(int i=n;i>=1;i--){
      if(i!=n){
      for(int k=1;k<=b;k++){
      System.out.print(" ");
        }
            }
       for(int j=i;j>=1;j--){
       System.out.print("*");
       if(i!=1){
       System.out.print(" ");
        }
            }
       System.out.println();
       b=b+2;
        } 
```

输出:: 5

```
 * * * * * 
         * * * * 
           * * * 
             * * 
               * 
```

# jquery - 悬停时，div 占据整个 li

> ID：14047585
> 
> 赞同：0
> 
> 时间：2012-12-26T23:32:03.743
> 
> 标签：jquery, css, animation, hover

我有一个无序列表，每个 li 包含一个 img 和一个 div。我的目标是悬停在 div 上将使 img 做一些事情。现在它只是添加/删除类，但这是一个占位符。添加/删除有效，但这不是问题（尽管如果您对此有提示，总是很乐意从更有经验的人那里获得意见）。

问题是悬停的 div 在悬停时突然膨胀以填满整个 li，并且似乎也暂时失去了其上部填充。这意味着当那个 div 被一个花哨的按钮替换时......该按钮可能会像当前的纯文本一样跳跃。

的HTML：

```
<ul id="headmenu">
    <li id="kite1">
        <img src="img/kitesani1a.png" id="kites1a" />
        <div id="attend" class="headmenulink">attending</div>
    </li>
</ul> 
```

的CSS：

```
ul#headmenu { margin: 2em 0 0 0; padding: 0; }
ul#headmenu li { margin: 0 1% 0 0; padding: 0; width: 19%; float: left; display: inline; list-style: none;}
ul#headmenu img { padding-bottom: 5em; position: relative; top: 0; left: 0; z-index: 100; }
li .headmenulink { padding-top: 2em; position: relative; bottom: 0; left: 0; border:1px solid blue; }

ul#headmenu li img {
    transition-duration: 0.8s;
    transition-property: transform;
}

.kite1ahover {
    float: right;
    position: relative;
    -webkit-transform:rotate(10deg);
    -moz-transform:rotate(10deg);
} 
```

（在实际版本中，css 更加冗长。）最后，当前的 jQuery 草案位：

```
$("#attend").hover(function(){
    $("#kites1a").addClass('kite1ahover').delay(500).queue(function(next){
        $(this).removeClass('kite1ahover');
        next();
}); 
```

我做了一个jsfiddle，但它给了我奇怪的错误。不确定它是否可以编辑，但以防万一，它位于[http://jsfiddle.net/klh02/5UMK5/7/](http://jsfiddle.net/klh02/5UMK5/7/) - 然后我还在 http://jsfiddle.net/klh02/5UMK5/7/ 上做了一个精简的真实[示例/www.karinoyo.com/temp/index.php](http://www.karinoyo.com/temp/index.php)。如果您打开实时版本（不是小提琴），您会看到临时蓝色边框在悬停时扩展，同时文本跳上一两行。（注意：唯一的“实时”悬停在“参加”李，左起第一个李。）

扩展 div 是因为 CSS 吗？还是因为 jQuery？或者这只是在这种情况下发生的事情，我需要做一些创造性的定位来让 div 保持原样而不是扩展/跳跃？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:45:55.817

弹跳是因为您使用“kite1ahover”类使 img 浮动

当元素浮动时，它们占据的大小被忽略（好像它们是空心的），因此 div 成为该框中的顶部元素，因此跳转到顶部。

如果您停止使用浮动，而是使用左、右、上、下的组合，您应该可以随意移动 img

例如 `position:relative; left:100px;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:48:12.187

在您的小提琴中，DIV 会增长，因为悬停类内部有一个浮点数：

```
.kite1ahover {
    float:right; /* remove this */
    position: relative;
    -webkit-transform:rotate(10deg);
    -moz-transform:rotate(10deg); 
    -o-transform:rotate(10deg);
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    -moz-opacity:1;
    -khtml-opacity: 1;
    opacity: 1;
}​ 
```

这打破了盒子的高度。一旦你删除它，DIV 就会停止增长。您得到的“奇怪”错误来自 jQuery 代码中缺少的右括号：

```
$(document).ready(function(){
    $("#attend").hover(function(){
        $("#kites1a").addClass('kite1ahover').delay(500).queue(function(next){
            $(this).removeClass('kite1ahover');
            next();
        });
    });
// missing brackets here...
}); 
```

你会在[这里](http://jsfiddle.net/axelmichel/rjT4M/)找到一个工作变体。

# javascript - 从页面获取 div

> ID：14047591
> 
> 赞同：2
> 
> 时间：2012-12-26T23:32:47.777
> 
> 标签：javascript, jquery

我到处寻找一种技术，但没有找到适合我需要的技术。

基本上，我想利用 JavaScript 或 jQuery（可能使用 Ajax）从我的网站页面中获取一个包含单词的 div。

我不是要求任何人为我编写代码，我只是想指出正确的方向。

例如，假设我有这个 HTML 页面：

```
<div class='findfromthis'>hello guys</div>
<div class='findfromthis'>goodbye guys</div>
<div class='findfromthis'>goodbye people</div> 
```

我想显示`divs`其中包含“家伙”一词的所有内容。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:40:43.340

JQuery 有一个`contains`选择器，可以找到包含特定文本的所有元素。类似的东西`$("div:contains('guys')")`应该可以解决问题。然后您可以使用 .each 或 .show 等来处理选定的元素。

有关更多详细信息，请参阅[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)。

**编辑 ：**

OP 认为以下代码很有用。它将选择所有类别为“findfromthis”*且不*包含短语“guys”的 div，并将它们从 DOM 中删除：

```
$("div.findfromthis:not(:contains('guys'))").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:35:00.497

给你的 div 一个类，比如“.myDiv”，然后通过 jQuery：

```
$('.myDiv').doSomething... 
```

我不完全确定 AJAX 将如何发挥作用，但为您指明正确的方向：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您的编辑是一个完全不同的问题。但是你会做同样的事情来获取 div。在这种情况下，您将使用“每个”：

```
$('.findfromthis').each(function(){
    // for each div you can now grab the text it contains:
    DivText = $(this).text();
    // now you could use a variety of different JS seach techniques to find
    // your content. But one example to search for a word or word fragment would be:
    if (DivText.indexOf("guys") !== -1)){
        // then this div has the word 'guys' in its text somewhere
    }
}) 
```

如果搜索词更复杂（比如不想查找片段），那么您可能希望使用 REGEX 作为搜索部分。

不过，同样，不确定 AJAX 是否适合这一点。这一切都可能发生在客户端。

# java - 创建一个采用已发布 xml 并创建实体的 restful 方法

> ID：14047595
> 
> 赞同：2
> 
> 时间：2012-12-26T23:33:07.750
> 
> 标签：java, spring, rest, spring-mvc

我怎样才能得到一个看起来像这样的xml：

```
<request>
  <User>
    <name>name value</name>
    <age>13</age>
  </User>
</request> 
```

然后我可以将其反序列化为具有匹配属性的用户对象。

```
public class User {
  private String name;
  private Integer age;

  // getter and setters
} 
```

有什么简单的我可以做的还是我必须为此手动解析xml？

我正在使用spring mvc，这是一种将发布xml的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T01:30:57.240

你的控制器方法应该接受一个类型为 的参数`User`，并用 注释[`@RequestBody`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/RequestBody.html)。然后你需要配置一个[`MarshallingHttpMessageConverter`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/xml/MarshallingHttpMessageConverter.html)适当的编组器/解组器。直接来自参考指南的示例：

```
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="messageConverters">
      <util:list id="beanList">
        <ref bean="stringHttpMessageConverter"/>
        <ref bean="marshallingHttpMessageConverter"/>
      </util:list>
    </property
</bean>

<bean id="stringHttpMessageConverter" 
       class="org.springframework.http.converter.StringHttpMessageConverter"/>

<bean id="marshallingHttpMessageConverter" 
      class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
  <property name="marshaller" ref="castorMarshaller" />
  <property name="unmarshaller" ref="castorMarshaller" />
</bean>

<bean id="castorMarshaller" class="org.springframework.oxm.castor.CastorMarshaller"/> 
```

请查看参考指南中的[“支持的方法参数类型”](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-arguments)和[“使用 @RequestBody 注释映射请求正文”](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestbody)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:20:00.883

您可以使用摘要。它将您的 XML 元素绑定到您的 POJO。这是一个完整的教程： http: [//onjava.com/pub/a/onjava/2002/10/23/digester.html](http://onjava.com/pub/a/onjava/2002/10/23/digester.html)

# macros - Common Lisp：控制宏扩展时间

> ID：14047600
> 
> 赞同：1
> 
> 时间：2012-12-26T23:34:03.670
> 
> 标签：macros, common-lisp, clos

我正在使用 common lisp，发现自己经常输入以下形式的插槽定义：

```
(name :initarg :name :accessor name) 
```

所以我想编造一个宏来加速这个。我想出了以下内容：

```
(defmacro quickslot (name)
`(,name :initarg ,(intern (string-upcase name) "KEYWORD") :accessor ,name)) 
```

毫无疑问，这是一个肮脏的黑客，但很实用。或者我是这么想的。当我试图运行我的代码时，我遇到了一个障碍：因为 defclass 是一个宏，所以传递给它的参数是未经评估的。这意味着，而不是看到

```
(x :initarg :x :accessor x) 
```

它看到

```
(quickslot x) 
```

当然，这表明一个错误。

在我看来，答案是以某种方式控制宏扩展的顺序，以确保在 defclass 之前扩展快速槽。这让我想到了我的问题：如何做到这一点？或者，如果您对我最初的难题有不同的解决方案，那也不会不受欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:23:51.213

这真的不值得一个宏。宏通常将文字 Lisp 源代码作为输入。

相反，您可以只使用一个函数。来自[*实用通用 Lisp*，第 24 章](http://www.gigamonkeys.com/book/practical-parsing-binary-files.html)：

```
(defun as-keyword (sym) (intern (string sym) :keyword))

(defun slot->defclass-slot (spec)
  (let ((name (first spec)))
    `(,name :initarg ,(as-keyword name) :accessor ,name))) 
```

然后你可以做类似的事情（再次改编自[PCL](http://www.gigamonkeys.com/book/practical-parsing-binary-files.html)）：

```
(defmacro my-defclass (name slots)
  `(defclass ,name ()
     ,(mapcar #'slot->defclass-slot slots))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:37:28.777

不，你不能这样做。不过，您可以编写一个宏`defclass`（这对您的快速插槽有一些特殊的语法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:09:52.860

您可以完全以不同的方式解决问题，并提出一个阅读器宏，指示阅读器调用其后面`macroexpand`的代码，这将比在类中声明槽的唯一目的更通用。但是完整的解决方案会有些涉及，因为您必须考虑读者的许多特点和要求，但是，即使是像这样丑陋的东西也可以完成这项工作：

```
(defmacro quickslot (name)
`(,name :initarg ,(intern (string-upcase name) "KEYWORD") :accessor ,name))

(macroexpand '(defclass test-class ()
               (#.(macroexpand '(quickslot some-slot))))) 
```

所以，你必须做的就像一个别名`#.(macroexpand ...)`

* * *

而且...给你：

```
(set-macro-character
 #\{
 #'(lambda (str char)
     (declare (ignore char))
     (let ((*readtable* (copy-readtable *readtable* nil))
           (reading-p t))
       (set-macro-character
        #\}
        #'(lambda (stream char)
            (declare (ignore char stream))
            (setf reading-p nil)))
       (loop for exp = (read str nil nil t)
          while reading-p
          collect (macroexpand exp)))))

(read-from-string "'(defclass test-class ()
               {(quickslot some-slot)
               (quickslot some-other-slot)})")
'(DEFCLASS TEST-CLASS NIL
           ((SOME-SLOT :INITARG :SOME-SLOT :ACCESSOR SOME-SLOT)
            (SOME-OTHER-SLOT :INITARG :SOME-OTHER-SLOT :ACCESSOR
             SOME-OTHER-SLOT))) 
```

:)

# python - 试图抓取一个网站但没有得到

> ID：14047601
> 
> 赞同：0
> 
> 时间：2012-12-26T23:34:04.270
> 
> 标签：python, beautifulsoup

我在玩，想在论坛帖子出现新帖子时给自己发一封电子邮件，但是当我用 urllib.urlopen 打开网址时，我会返回网页但没有页面正文。有人可以告诉我为什么会这样吗？我怎样才能得到尸体？

```
def loadUrl(adress): 
  adress = urllib.unquote(adress)
  print("Loading " + adress)
  socket =urllib.urlopen(adress)
  html = socket.read()
  socket.close()
  soup = BeautifulSoup(html)
  return soup

soup = loadUrl("http://de.pokerstrategy.com/forum/thread.php?threadid=498111") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:46:51.243

另外，我建议使用[Pyquery](http://pypi.python.org/pypi/pyquery)。

```
from pyquery import PyQuery
d = PyQuery("http://de.pokerstrategy.com/forum/thread.php?threadid=498111")

print d("body").html() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:40:44.473

**编辑**对不起，我没有意识到您已经发布了您要检索的网址。我得到了和你一样的反应，不知道为什么。正如我在下面建议的那样，我在 javascript 中看不到任何内容。

我测试了你的代码，它似乎工作正常。也许您尝试检索的页面会通过 javascript 或类似的方式生成 body 元素。在这种情况下，我相信您可以使用[selenium](http://pypi.python.org/pypi/selenium)之类的东西来模拟浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:40:55.180

我已经成功使用`BeautifulSoup`with `urllib2`，例如：

```
from urllib2 import urlopen
...
html = urlopen(...)
soup = BeautifulSoup(html) 
```

# javascript - 如何松开耦合 html 和 javascript

> ID：14047602
> 
> 赞同：-1
> 
> 时间：2012-12-26T23:34:18.287
> 
> 标签：javascript

如何松散夫妇 html 和 javascript... 有必要，值得吗？您必须始终在 javascript 逻辑中使用一些 html 元素...我从 c# 知道您可能会因维护和测试场景而失去一对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:37:02.973

分离 DOM 和 javascript 的最佳框架之一是 Knockout.JS。

我发现关注点分离非常聪明。视图模型可以完全单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:38:07.670

您可以很容易地将它们分开；只需将大部分 JavaScript 与使用函数等与 DOM 交互的 JavaScript 分开即可。有点像视图和控制器。

# wpf - 如何禁止用户删除数据网格中的一行？

> ID：14047605
> 
> 赞同：0
> 
> 时间：2012-12-26T23:34:55.973
> 
> 标签：wpf, wpfdatagrid

假设一个以 ICollectionView 作为其 ItemsSource 的数据网格，允许用户删除/添加/编辑行。问题是如果行中单元格的值具有特定值，如何禁止用户删除行。换句话说：

```
id   Name    IsSpecial
-----------------------
1    Foo      true
2    Bar      false 
```

我希望用户能够更改 Foo 的名称但不能删除它，并且不允许用户在该行上将 IsSpecial 更改为 false。但允许用户自由更改 IsSpecial 为 false 的任何其他行上的任何值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:33:03.477

If code behind is OK, to prevent an edit use [CellEditEnding](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.celleditending.aspx) event. if you set `e.Cancel=true` It will not commit the edit.

Of course, you want to stop user from deleting a row too. So, My suggestion is to handle [CurrentChanging](http://msdn.microsoft.com/en-us/library/system.componentmodel.icollectionview.currentchanging.aspx) event of a ICollectionView and Cancel those changes you want.

# ios - 在 iOS 6 上隐藏地址栏而不隐藏智能应用横幅

> ID：14047610
> 
> 赞同：5
> 
> 时间：2012-12-26T23:36:27.403
> 
> 标签：ios, web-applications, ios6

我目前正在使用标准 scrollTo 技术（类似[这样](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)）在 iOS 上隐藏地址栏。我也在使用[iOS 6 智能应用横幅](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)，但是当使用上述技术隐藏地址栏时，智能应用横幅也会被屏幕顶部的地址栏隐藏起来。

有什么办法可以隐藏地址栏而不是智能横幅？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T07:12:51.920

长话短说，[HTML5 Boilerplate](http://html5boilerplate.com)的聪明人已经在他们的[移动版本](http://html5boilerplate.com/mobile/)中解决了这个问题。

查看[helper.js](https://github.com/h5bp/mobile-boilerplate/blob/master/js/helper.js)`MBP.hideUrlBarOnLoad`，它隐藏了地址栏并且不隐藏智能应用横幅。看来关键区别可能是，它比简单地滚动到 1 获得更智能的滚动点。`MBP.getScrollTop`

# internet-explorer - 让页面在 IE7 中正确呈现

> ID：14047617
> 
> 赞同：0
> 
> 时间：2012-12-26T23:37:13.883
> 
> 标签：internet-explorer

我只是想知道仍然使用 IE7 浏览网页的用户百分比是多少？我有一个网页在 Firefox、IE8 和 9 和 Google Chrome 中呈现得很好，但是当涉及到任何 IE 7 或更低版本时，它完全是垃圾。是否值得让页面在 IE7 中正确查看，还是我应该坚持在 IE8 及更高版本中查看？

该网站是一家草坪护理公司，仅供参考。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:43:45.230

[根据w3counter.com](http://www.w3counter.com/globalstats.php)的数据，4.81% 的全球互联网用户使用 IE7 作为浏览器。它很小，但仍然相当数量。可能值得为 IE7 优化您的网站。

如果您的网站仍然可以正常运行（从您上次的评论看来是这样），即使它在美学上不是那么好，也可能不值得麻烦。由你决定。

[请记住，如果您在 Google 上进行简单搜索](https://www.google.com/search?q=ie7%20percentage%20users)，您可以找到大量有关 Internet Explorer 7 百分比的数据。

**编辑：**经过进一步研究，看起来虽然 w3counter 说 IE7 的市场份额约为 5%，但其他计数器如[statcounter](http://gs.statcounter.com/#browser_version_partially_combined-ww-monthly-201112-201212-bar)实际上将其置于 1% 左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:40:35.427

如果您希望人们在工作时访问您的网站，我建议您考虑使用 IE7。大公司，由于许可和维护费用，多年来一直坚持使用 IE 版本。IE6 现在几乎绝迹，但 IE7 仍然存在。您可以通过 Google 查找有关您所在国家/地区的浏览器使用情况的统计信息。

# c# - asp.net 缓存限制？

> ID：14047619
> 
> 赞同：8
> 
> 时间：2012-12-26T23:37:29.720
> 
> 标签：c#, asp.net, sql-server, windows, iis-7

> **可能重复：**
> [ASP.NET 缓存最大大小](https://stackoverflow.com/questions/2928857/asp-net-cache-maximum-size)

我正在使用 asp.net 缓存（流式代码）缓存很多数据表：

```
HttpContext.Current.Cache.Insert(GlobalVars.Current.applicationID + "_" + cacheName, itemToCache, null, System.Web.Caching.Cache.NoAbsoluteExpiration, TimeSpan.FromMinutes(240)); 
```

但是我*认为*服务器上的缓存已经满了，不得不从数据库中重新获取数据表数据。可以在服务器上缓存的数据量或可以调整的任何 IIS 设置是否有任何限制？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T23:57:45.190

有一种方法可以升级限制，但我**强烈建议**您使用其他类型的缓存系统（更多信息请参见下文）。

## .NET 缓存

要了解有关 .NET 缓存限制的更多信息，请阅读来自[Microsoft .NET 团队成员的](http://forums.asp.net/members/tmarq.aspx)[出色回答](http://forums.asp.net/post/1199949.aspx)。

如果您想查看 .NET Cache 的当前限制，可以尝试：

```
var r = new Dictionary<string, string>();

using (var pc = new PerformanceCounter("ASP.NET Applications", "Cache % Machine Memory Limit Used", true))
{
    pc.InstanceName = "__Total__";
    r.Add("Total_MachineMemoryUsed", String.Concat(pc.NextValue().ToString("N1"), "%"));
}
using (var pc = new PerformanceCounter("ASP.NET Applications", "Cache % Process Memory Limit Used", true))
{
    pc.InstanceName = "__Total__";
    r.Add("Total_ProcessMemoryUsed", String.Concat(pc.NextValue().ToString("N1"), "%"));
}
using (var pc = new PerformanceCounter("ASP.NET Applications", "Cache API Entries", true))
{
    pc.InstanceName = "__Total__";
    r.Add("Total_Entries", pc.NextValue().ToString("N0"));
}
using (var pc = new PerformanceCounter("ASP.NET Applications", "Cache API Misses", true))
{
    pc.InstanceName = "__Total__";
    r.Add("Total_Misses", pc.NextValue().ToString("N0"));
}
using (var pc = new PerformanceCounter("ASP.NET Applications", "Cache API Hit Ratio", true))
{
    pc.InstanceName = "__Total__";
    r.Add("Total_HitRatio", String.Concat(pc.NextValue().ToString("N1"), "%"));
}
using (var pc = new PerformanceCounter("ASP.NET Applications", "Cache API Trims", true))
{
    pc.InstanceName = "__Total__";
    r.Add("Total_Trims", pc.NextValue().ToString());
} 
```

## 内存缓存

我目前正在使用**Memcached**，如果您将网站托管在某个地方，则可以使用以下付费服务：

*   [http://www.memcachier.com/](http://www.memcachier.com/)

或者，如果您使用自己的服务器，您可以下载[Couchbase 社区版](http://www.couchbase.com/download)并托管我们自己的服务器。

您会在这里找到更多关于 MemCache 使用的问题，例如：

*   [您使用哪个 .NET Memcached 客户端，EnyimMemcached 与 BeITMemcached？](https://stackoverflow.com/questions/694928/which-net-memcached-client-do-you-use-enyimmemcached-vs-beitmemcached)
*   [如何从 memcached 开始](https://stackoverflow.com/questions/4848200/how-to-start-with-memcache)

## 为任何缓存系统腾出空间

要在不更改代码的情况下使用其他缓存系统，您可以采用创建一个接口，例如

```
public interface ICacheService
{
    T Get<T>(string cacheID, Func<T> getItemCallback) where T : class;
    void Clear();
} 
```

那么您是否正在使用.NET Cache，您的实现将类似于

```
public class InMemoryCache : ICacheService
{
    private int minutes = 15;

    public T Get<T>(string cacheID, Func<T> getItemCallback) where T : class
    {
        T item = HttpRuntime.Cache.Get(cacheID) as T;
        if (item == null)
        {
            item = getItemCallback();
            HttpRuntime.Cache.Insert(
                cacheID,
                item,
                null,
                DateTime.Now.AddMinutes(minutes),
                System.Web.Caching.Cache.NoSlidingExpiration);
        }
        return item;
    }

    public void Clear()
    {
        IDictionaryEnumerator enumerator = HttpRuntime.Cache.GetEnumerator();

        while (enumerator.MoveNext())
            HttpRuntime.Cache.Remove(enumerator.Key.ToString());
    }
} 
```

你会用它作为：

```
string cacheId = string.Concat("myinfo-", customer_id);
MyInfo model = cacheProvider.Get<MyInfo>(cacheId, () =>
{
    MyInfo info = db.GetMyStuff(customer_id);
    return info;
}); 
```

如果您使用的是 Memcached，您需要做的就是创建一个新类，`ICacheService`通过使用 IoC 或直接调用来实现并选择您想要的类：

```
private ICacheService cacheProvider;

protected override void Initialize(System.Web.Routing.RequestContext requestContext)
{
    if (cacheProvider == null) cacheProvider = new InMemoryCache();

    base.Initialize(requestContext);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T23:44:45.243

缓存使用工作进程的内存分配。[默认情况下，工作进程被允许获得 60% 的机器内存](http://www.guidanceshare.com/wiki/ASP.NET_2.0_Performance_Guidelines_-_Caching#Configure_the_Memory_Limit)以完成其工作。

根据链接，这可以通过编辑 machine.config 文件进行更改，以允许工作进程使用更多的机器内存。大概您已经构建了缓存，以便在检测到数据过时时已经更新，因此这应该允许您将更多对象放入缓存中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T23:46:40.033

将项目插入缓存时，添加一个 CacheItemRemovedCallback 方法。

在回调日志中，项目被删除的原因。通过这种方式，您可以查看是内存压力还是其他问题。

```
public static void OnRemove(string key, 
   object cacheItem, 
   System.Web.Caching.CacheItemRemovedReason reason)
   {
      AppendLog("The cached value with key '" + key + 
            "' was removed from the cache.  Reason: " + 
            reason.ToString()); 
} 
```

[http://msdn.microsoft.com/en-us/library/aa478965.aspx](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

# internet-explorer - 如何在 JSF 中使用 Internet Explorer 条件注释？

> ID：14047620
> 
> 赞同：17
> 
> 时间：2012-12-26T23:37:50.697
> 
> 标签：internet-explorer, jsf, jsf-2, facelets, conditional-comments

这是我在 Eclipse 中的源代码文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>

<body>

</body>
</html> 
```

当我在 IE9 中查看它时，它会呈现文本：

```
<!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]--> 
```

如果我查看源代码，它会说：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<!--[if lt IE 9]&gt;

      &lt;script src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;

    &lt;![endif]-->
</head>

<body>

</body>
</html> 
```

Faces Servlet 提供服务后源发生变化的任何原因？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T23:53:31.983

已知问题，JSF 渲染逃脱了评论。您可以通过使用`<h:outputText escape="false">`HTML 实体来解决它。您还可以使用 OmniFaces`<o:conditionalComment>`以更好的方式解决它。[另见展示网站：](http://showcase.omnifaces.org/components/conditionalComment)

> `<o:conditionalComment>`呈现有条件的评论。条件注释是 IE 特有的功能，它使开发人员能够（out）注释 HTML 块，具体取决于客户端是否使用 IE，如果是，甚至是哪个版本。它们经常与 CSS 样式表结合使用，如下所示：
> 
> ```
> <!--[if lte IE 7]>
>     <link rel="stylesheet" href="ie6-ie7.css" />
> <![endif]--> 
> ```
> 
> 然而，Facelets 将评论的内容呈现为 HTML 转义，使其无法使用。
> 
> ```
> <!--[if lte IE 7]&gt;
>     &lt;link rel=&quot;stylesheet&quot; href=&quot;ie6-ie7.css&quot; /&gt;
> &lt;![endif]--> 
> ```
> 
> 此外，如果`javax.faces.FACELETS_SKIP_COMMENTS`上下文参数设置为，`true`那么它甚至根本不会被渲染。您需要使用丑陋的`<h:outputText escape="false">`.
> 
> ```
> <h:outputText 
>     value="&lt;!--[if lte IE 7]&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;ie6-ie7.css&quot; /&gt;&lt;![endif]--&gt;"
>     escape="false" /> 
> ```
> 
> 该组件旨在解决此问题。
> 
> ```
> <o:conditionalComment if="lte IE 7">
>     <link rel="stylesheet" href="ie6-ie7.css" />
> </o:conditionalComment> 
> ```
> 
> 请注意，您不能将其与它一起使用，`<h:outputStylesheet>`因为它会隐式地重新定位为`<h:head>`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-26T23:58:48.980

这有效：

```
<h:outputText escape="false" value="&lt;!--[if lt IE 9]&gt;   &lt;script src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;  &lt;![endif]--&gt;"></h:outputText> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-29T22:52:07.863

我使用了 f:verbatim，更清晰。

例如

```
<f:verbatim>
    <!--[if gte IE 8]>
       <script type="text/javascript">
        //<![CDATA[
        /** Javascript **/
        //]]>
        </script>
    <![endif]-->
</f:verbatim> 
```

[JSF 核心标记参考](http://www.jsftoolbox.com/documentation/help/12-TagReference/core/f_verbatim.html)

**注意：** *此标记自 JSF 2.0（2009 年 12 月）起已弃用。它仅适用于 JSP*

# php - pdf 内容呈现到浏览器而不是显示

> ID：14047636
> 
> 赞同：0
> 
> 时间：2012-12-26T23:40:13.073
> 
> 标签：php, symfony1, download

使用 symfony1 我在服务器端准备了一个 pdf 文件并将其返回给浏览器。在多个服务器/站点上使用相同的浏览器运行此代码时，它工作正常，除了一台服务器。在这种情况下，pdf 内容呈现到浏览器窗口中，而不是嵌入显示（甚至弹出下载窗口）。这种奇怪的行为与浏览器无关（在最新的 Chrome、Firefox 和 Safari 上尝试过）。请在日志行下方找到，这些在每台服务器上都是相同的。

```
Dec 27 00:03:30 frontend: {sfView} initialize view for "report/runReport"
Dec 27 00:03:30 frontend: {sfView} render ".../frontend/modules/report/templates/runReportSuccess.php"
Dec 27 00:03:30 frontend: {sfFilter} render to client
Dec 27 00:03:30 frontend: {sfResponse} send status "HTTP/1.0 200 OK"
Dec 27 00:03:30 frontend: {sfResponse} send header "Pragma": "public"
Dec 27 00:03:30 frontend: {sfResponse} send header "Cache-Control": "cache-control=max-age=0,must-revalidate, post-check=0, pre-check=0"
Dec 27 00:03:30 frontend: {sfResponse} send header "Content-Transfer-Encoding": "binary"
Dec 27 00:03:30 frontend: {sfResponse} send header "Content-Type": "application/pdf"
Dec 27 00:03:30 frontend: {sfResponse} send header "Content-Length": "77225"
Dec 27 00:03:30 frontend: {sfResponse} send header "Content-Disposition": "inline; filename="aging-debt.pdf""
Dec 27 00:03:30 frontend: {sfResponse} send header "Charset": "utf-8"
Dec 27 00:03:30 frontend: {sfResponse} send content (77225 o) 
```

将服务器环境与工作服务器和非工作服务器进行比较，两者都运行 Debian 6.0 和 PHP 5.3.3-7+squeeze14 和 Suhosin-Patch。

该 url 使用简单的 JavaScript window.open 打开，客户端没有运行其他代码或事件侦听器。请告知，我应该检查什么设置来解决这个问题。谷歌搜索它，但只找到未回答的问题，例如[浏览器有时会显示 pdf 内容而不是 html 页面？[关闭]](https://stackoverflow.com/questions/7618605/browser-shows-pdf-content-instead-of-html-page-some-times)。

# c# - 由于自动增量字段，无法使用 tableadapter.insert 方法插入数据

> ID：14047644
> 
> 赞同：4
> 
> 时间：2012-12-26T23:41:12.840
> 
> 标签：c#, database

我需要您的帮助，因为我无法在网络上的任何地方找到我的问题的答案。

我正在使用 C#，我有一个名为“People”的表，我想使用 TableAdapter 来添加/删除/形成该表。我使用 sdf 文件作为我的数据库作为“Microsoft SQL Server Compact 4.0（Microsoft SQL Server Compact 4.0 的 .NET Framework 数据提供程序）”数据源。

我的代码如下所示：

* **peopleTableAdapter.Insert(0, byte.Parse(cbAddType.SelectedIndex.ToString()), txtAddName.Text, txtAddCompany.Text, txtAddPhone.Text, txtAddMobile.Text, txtAddEmail.Text, txtAddress.Text, txtAddNotes.Text); peopleTableAdapter.Update(this.hisabati_DBDataSet.People);***

该表包含一个名为“ID”的字段，它是一个自动递增字段，具有以下内容

属性：允许 Nulls：否唯一性：是 PK：否

Insert 方法中的第一个参数是询问 ID，如果我不输入值，我会得到一个需要值的编译错误。如果我输入一个值（因为我在上面输入 0），我会收到以下错误： Err Msg: Cannot modify that column Err HRESULT: -2​​147467259

我知道如何使用 Command.ExecuteNonQuery 方法插入，但我正在尝试在整个应用程序中使用 TableAdapters，因为它看起来像是一种更优雅的方式来编写和维护代码......有什么建议吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T18:25:23.573

您需要更改表适配器的 InsertCommand 和 UpdateCommand。从这些命令的 set 部分中删除 Auto-Increment 列名称和值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T00:04:32.913

不要专门使用该方法，而是通过您的人员数据集创建一个新行，然后使用 TableAdapter 从中更新。

# javascript - Javascript中的部分正则表达式匹配

> ID：14047651
> 
> 赞同：2
> 
> 时间：2012-12-26T23:42:08.787
> 
> 标签：javascript, regex

我有一个很长的正则表达式，它生成以匹配 URL，例如

```
/^\/([^\/.?]+)(?:\/([^\/.?]+)(?:\/([^\/.?]+)(?:\.([^\/.?]+))?)?)?$/ 
```

将匹配：

```
/foo/bar/1.html 
```

作为`['foo', 'bar', '1', 'html']`

在 Javascript 中，我希望在用户键入 url 时获得匹配的部分（如预先输入）。例如，如果他们输入：

```
/foo 
```

它会告诉我这`/foo`是匹配的，但整个正则表达式并不满意。Ruby 可以返回一个仅包含匹配部分元素的数组，例如：`['foo', nil, nil, nil]`这可能吗，或者在 Javascript 中容易做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:46:50.807

@minitech 基本上给出了一半的答案：`?`在每个组之后使用，然后即使它们丢失，您也可以匹配正则表达式。一旦你可以做到这一点，那么只需检查正则表达式结果的组，看看哪些位已匹配，哪些未匹配。

例如：

```
/^\/([^\/.?]+)?(?:\/([^\/.?]+)?(?:\/([^\/.?]+)?(?:\.([^\/.?]+))?)?)?$/.exec('/ab/c') 
```

将返回：

```
["/ab:c", "ab:c", "c", undefined, undefined] 
```

通过检查并查看返回的第四个值是未定义的，您可以确定哪些块已输入/未输入。

附带说明一下，如果您要使用大量这样的正则表达式，那么您很容易失去理智，只是试图跟踪哪个组是哪个组。出于这个原因，我强烈建议使用“命名组”正则表达式。如果您使用 XRegxp 库 (http://xregexp.com/)，则可以创建其他正常的正则表达式，如下所示：

```
var result = XRegExp.exec('/ab/c', /^\/(?<fooPart>[^\/.?]+)?(?<barPart>?:\/([^\/.?]+)?(?:\/([^\/.?]+)?(?:\.([^\/.?]+))?)?)?$/)
var fooPart = result.fooPart 
```

该库还具有其他方便的功能，例如可以类似地帮助控制正则表达式的注释。如果你只使用这一个正则表达式，那可能有点矫枉过正，但如果你正在做大量的 JS 正则表达式工作，我不能推荐这个库。

# python - libtorrent-rasterbar 的 Python 绑定不起作用

> ID：14047653
> 
> 赞同：2
> 
> 时间：2012-12-26T23:42:16.840
> 
> 标签：python, ubuntu, debian, libtorrent

我正在运行 Debian 6.0.6

我已经从这里下载了最新版本的 libtorrent-rasterbar：[http](http://code.google.com/p/libtorrent/downloads/detail?name=libtorrent-rasterbar-0.16.6.tar.gz&can=2) ://code.google.com/p/libtorrent/downloads/detail?name=libtorrent-rasterbar-0.16.6.tar.gz&can=2并安装了它：

```
./configure --enable-python-binding
make
make install
cd bindings/python
python setup.py build
python setup.py install 
```

现在我想测试该库是否有效：

```
>>> import libtorrent
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: libtorrent-rasterbar.so.7: cannot open shared object file: No such file or directory 
```

来自发行版存储库的打包版本的 libtorrent 有一些有趣的行为（抱怨增强依赖），所以我决定升级。我的两个 debian 盒子上的情况相同，但 ubuntu 盒子很好。

来自我的 debian 盒子的旧错误消息：

```
 File "ar.py", line 15, in create
    s.start_dht()
Boost.Python.ArgumentError: Python argument types in
    session.start_dht(session)
did not match C++ signature:
    start_dht(libtorrent::session {lvalue}, libtorrent::entry) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T01:48:24.243

搜索共享对象文件并将其添加到您的路径中。

```
sudo updatedb
locate libtorrent-rasterbar.so.7 
```

这应该输出`/<path_to_directory>/libtorrent-rasterbar.so.7`

将此添加到您的`~/.profile`或临时告诉 Python 在哪里查找：

```
export LD_LIBRARY_PATH=/<path_to_directory>/ 
```

[在此处](https://coderwall.com/p/muvnow "在 Linux 上安装 libtorrent")查看更详细的安装说明。

# c - 代码给了我一个无限循环

> ID：14047654
> 
> 赞同：1
> 
> 时间：2012-12-26T23:42:40.363
> 
> 标签：c

```
#include <stdio.h>
void load_menu(void);

int main(void)
{
    load_menu();
    return 0;
}

void load_menu(void)
{
int choice;
int loopagain;

do
{
    printf("Menu \n\n");
    printf("Please enter your choice: \n");
    printf("1\. \n");
    printf("2.\n");
    printf("3.\n");
    printf("4\. Exit\n");
    if (scanf("%d",&choice)==1)
    {

        switch(choice)
        {
            case 1:
                    break;
            case 2:
                    break;
            case 3:
                    break;
            case 4: printf("Quitting program!\n");
                    break;
            default: printf("Invalid choice! Please try again\n");
                    printf("\n");
                break;
        }
    }

    else
    {
        printf("Characters are invalid, please enter a number: \n ");
        if (scanf("%d",&loopagain)==1)
            load_menu();
    }

}while((choice !=4));
} 
```

为什么当我输入一个字符时这仍然给我一个无限循环？这是一个菜单（case 语句仍然需要填写），但我正在处理 if 语句输入的字符，但它似乎仍然不起作用。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T23:45:33.430

如果字符输入无效，`loopagain`则新调用`load_menu()`者中的 将与调用者中的不同。根本不递归：

```
else
{
    printf("Characters are invalid, please enter a number: \n ");
    choice = 0; // Unused, so continue the loop
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:55:47.377

我相信，除了到目前为止发现的问题之外，有问题的“字母”卡在输入缓冲区中。使用 scanf 读取数字时，它会在遇到任何非白板和数字时立即停止。因此，如果缓冲区包含“a\n”，并且我们调用了`scanf("%d", ...)`，那么 scanf 将立即返回，并将继续这样做，直到从缓冲区中删除有问题的“a”。

我们需要的是一个小循环来从输入缓冲区中删除有问题的“垃圾”。

这是之前问的那个问题（虽然冲洗的原因略有不同，但解决方案是一样的）： [关于冲洗缓冲区的问题](https://stackoverflow.com/questions/7898215/how-to-clear-input-buffer-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:53:46.877

输入内容后，不是数字，`scanf("%d",&choice)`因此输入缓冲区不接受，因此不会刷新。`fflush(stdin)`我相信您应该能够在处理不可接受的输入时通过调用来解决此问题。更好的是，每次调用 scanf 后，您可能会更好地 servde 刷新输入缓冲区。

在我看来，您对错误输入的处理没有意义。我认为它应该更像你的`default:`情况来处理。正如其他人所说，递归调用没有意义，当您要返回显示菜单并再次获取用户输入时，再次调用 scanf 进行输入也没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T00:36:02.693

我认为你的问题是 loopagain 变量。顾名思义，您正在考虑将此变量视为是否再次循环的标志，并管理您的第二个循环的方式。由于您是从 stdin(scanf) 读取它，因此您将失去对它的控制。由于您的实现中已经有一个 scanf 并且它是一个循环，因此您不需要递归调用，并且您可以始终使用相同的 scanf，以正确的方式使用 loopagain 变量/标志。更好的是，通过这种方式，除了 EOT (ascii - cntr-D) 之外，没有它的整数值为 4 的字符（它永远不会通过值为 1 的 scanf 测试，但仍然......）常见的一种，您可以将其视为破坏程序的另一种方法。

一个解决方案是这样的（我猜，根据我的解释）：

```
 #include <stdio.h>
    void load_menu(void);

    int main(void)
    {
        load_menu();
        return 0;
    }

    void load_menu(void)
    {
    int choice;
    int loopagain = 1;

    do
    {
        if(loopagain != 0){    /*You'll set it to different from 0 if the user entered a 'bad' number so the menu is only printed once*/
           printf("Menu \n\n");
           printf("Please enter your choice: \n");
           printf("1\. \n");
           printf("2.\n");
           printf("3.\n");
           printf("4\. Exit\n");
        }
        if (scanf("%d",&choice)==1)
        {

            switch(choice)
            {
                case 1:
                        break;
                case 2:
                        break;
                case 3:
                        break;
                case 4: printf("Quitting program!\n");
                        break;
                default:printf("Invalid choice! Please try again\n");
                        loopagain = 0;
                        printf("\n");
                    break;
            }
        }else{
            printf("Characters are invalid, please enter a number: \n ");
            loopagain = 0;
        }

    }while(choice !=4);
 } 
```

希望它有所帮助。

# binding - 绑定到复杂列表的特定部分

> ID：14047657
> 
> 赞同：0
> 
> 时间：2012-12-26T23:43:11.487
> 
> 标签：binding, winrt-xaml

我有一个复杂的列表作为以下形式的资源：-

```
sectionList
       Sections
               Section 0
               Section 1
               .
               .
               Section 12 
```

其中每一个都有一些属性，例如“名称”，即。第 0 节有一个属性“名称”等等。

在我的 Xaml 中，我有一个 ComboBox，我想将它绑定到 ItemsSource 以获取此 ComboBox 中每个部分的 Name 属性。当我使用 ItemsSource="{Binding Path=Section}" 时，我只得到 Types 的列表，而不是实际的 Name 属性。我的意思是列表如下所示： -

```
AppName.ClassName+Section  (This is the Type)
AppName.ClassName+Section
.
.
.
AppName.ClassName+Section 
```

所以我的问题是，如何在这个 ComboBox 中获取属性名称而不是类型？

希望这是一个足够的描述，否则我会很乐意解释更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:57:20.067

使用组合框上的“DisplayMemberName”来传递您希望显示的字段的名称。

有关用法示例，请参阅[WPF Combobox DisplayMemberPath](https://stackoverflow.com/questions/1460612/wpf-combobox-displaymemberpath)（使用解决方案，而不是问题，因为它不正确！）

# php - PDO 提取问题

> ID：14047658
> 
> 赞同：1
> 
> 时间：2012-12-26T23:43:17.660
> 
> 标签：php, pdo

我有这段代码在我运行它时完全搞砸了。它甚至不会抛出异常。它只会导致服务器错误。

```
 try {
        $stmt = $this->database->prepare(
                "SELECT * FROM news_posts");
        $result = $stmt->execute();
        $array = $result->fetch(PDO::FETCH_ASSOC);
        print_r($array);
    } catch (PDOException $e) {
        echo "error?";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:57:50.133

`PDOStatement::execute()`不返回结果；你调用`fetch`查询。

```
$stmt = $this->database->prepare(
        "SELECT * FROM news_posts");
$stmt->execute();
$array = $stmt->fetch(PDO::FETCH_ASSOC);
print_r($array); 
```

您也可以将其缩短为`query()`，因为您没有添加任何参数：

```
$stmt = $this->database->query('SELECT * FROM news_posts');
$array = $stmt->fetch(PDO::FETCH_ASSOC);
print_r($array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:46:42.993

检查是否在 php.ini 中打开了 PDO。您也可以通过 phpinfo() 脚本检查它。请记住通过以下方式设置适当的错误级别：

错误报告（1）；ini_set('display_errors',1);

# memory-management - require_once：无法分配内存

> ID：14047660
> 
> 赞同：1
> 
> 时间：2012-12-26T23:43:29.453
> 
> 标签：memory-management, php

我有一个非常“非常规”的设置，如下所示：

我有一个运行 Ubuntu Desktop 12.10 的 VMware 虚拟机，网络设置为桥接。安装在 VM 内部的是 nginx、php-fpm、php-cli 和 MySQL。PHP 是 5.4.10。

我有一个文件夹，其中包含我在主机（Windows 7）中正在处理的应用程序的所有文件。然后，此文件夹可用作网络共享。

然后虚拟机通过 samba 将 windows 共享挂载到一个目录中。然后这个目录由 nginx 和 php-fpm 提供服务。到目前为止，一切正常。

我有一个通过 php CLI 运行的脚本来帮助我构建和处理一些文件。以前，这个脚本在我的 Windows 主机上运行良好。`cannot allocate memory`但是，当我在 Ubuntu VM 中运行它时，它似乎会抛出错误。奇怪的是，它也是零星的，并不总是发生。

```
user@ubuntu:~$ sudo /usr/local/php/bin/php -f /www/app/process.php 

Warning: require_once(/www/app/somecomponent.php): failed to open stream: Cannot allocate memory in /www/app/loader.php on line 130

Fatal error: require_once(): Failed opening required '/www/app/somecomponent.php' (include_path='.:/usr/local/php/lib/php') in /www/app/loader.php on line 130 
```

我已检查并确认以下内容：

*   `/www/app/somecomponent.php`肯定存在。

*   内部所有文件和子目录的权限`/www`设置为所有者，组和其他人的执行和读写。

*   [阅读此问题](https://stackoverflow.com/questions/3723316/warning-require-once-function-require-once-unable-to-allocate-memory-for-p)后，我已关闭 APC以查看 APC 是否是原因，但这样做后问题仍然存在。

*   `php-cli`与 相同`php.ini`，`php-fpm`位于 中`/etc/php/php.ini`。

*   `memory_limit`in`php.ini`设置为`128M`（默认），这对于应用程序来说似乎足够了。

*   即使将内存限制增加到`256M`，错误仍然会发生。

*   VM 有 2GB 内存。

我一直在谷歌搜索以找出导致`cannot allocate memory`错误的原因，但没有发现任何有用的信息。什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:27:48.287

事实证明这是我的 Windows 共享的问题。也许是因为 Windows 7 是一个客户端操作系统，它没有被调整为经常提供大量文件（这在我的情况下正在发生）。

要修复，请在注册表中设置以下键：

`HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\LargeSystemCache`至`1`

`HKLM\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters\Size`至`3`

我已经使用这些新设置运行我的设置大约一个星期，并且自从进行更改后没有遇到任何内存分配错误。

# php - 链接到内部页面 wordpress

> ID：14047661
> 
> 赞同：9
> 
> 时间：2012-12-26T23:43:34.480
> 
> 标签：php, wordpress, function, hyperlink

我是 wordpress 的新手，我通过仪表板添加了一个新页面，我想从主页创建一个指向该页面的链接，所以我很想知道这是什么功能，

我想应该是这样的：>LINK

提前致谢！！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-27T05:08:58.787

你可以使用

```
<a href="<?php echo get_page_link( get_page_by_title( PAGE_NAME )->ID ); ?>">Link Title</a> 
```

`PAGE_NAME`您在仪表板中设置的页面标题在哪里。

[get_page_by_title()](http://codex.wordpress.org/Function_Reference/get_page_by_title)返回一个对象，我们`get_page_by_title( PAGE_NAME )->ID`用来返回该页面的页面 ID。请注意，依赖页面标题（您自己设置）与页面 ID（由 wordpress 设置）更加一致。

[get_page_link()](http://codex.wordpress.org/Function_Reference/get_page_link)检索您作为参数传递的该页面 ID 的永久链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T23:48:25.273

您可以简单地链接到主页的 HTML 正文中的页面。例如：

`<a href="/index.php/your-page">your page</a>`

或者

`<a href="index.php?page_id=###">your page</a>`

其中###，放帖子ID。

[更多示例](http://codex.wordpress.org/Linking_Posts_Pages_and_Categories)

编辑：

如果您正在编辑模板，并希望使用其 ID 获取帖子的永久链接，请使用`get_permalink($id)`

[有关此功能的更多信息](http://codex.wordpress.org/Function_Reference/get_permalink)

编辑2：

根据您的评论，您必须切换永久链接格式。在 WP Admin 中，找到永久链接设置，并将它们设置为 /%postname%/

[在此处阅读有关这些设置的更多信息](http://codex.wordpress.org/Using_Permalinks)

# javascript - Bootstrap 预输入自动完成，源在页面加载时仅加载一次

> ID：14047663
> 
> 赞同：0
> 
> 时间：2012-12-26T23:43:54.640
> 
> 标签：javascript, jquery, twitter-bootstrap, bootstrap-typeahead

我想通过 jquery 从服务器加载整个源数据，但在页面加载时只加载一次。我想将它存储在一个变量中。jquery 部分可以工作，但输入不会自动完成。它什么也不做。它只有在源代码写成 source: ["blablabla","dadadada"] 时才有效。

这是我的 Javascript 代码：

```
var datasource;          // this is the variable where my source will be stored

$.post("typeahead.php",
  {
    query: 'query'       // 'query' has no meaning ;)
  }, 
  function(data) {       // data looks like ["asd","fds"] thanks to json_encode on the server side
    datasource = data;
});

$('#searchInput').typeahead( {
  source: datasource
}); 
```

服务器端php代码：

```
 /* connect to the db */
    $con = mysql_connect("localhost","fahrschulesql1","******");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }
    // Select Database
    $db_selected = mysql_select_db("fahrschulesql1", $con);
    if (!$db_selected) {
        die ("Select DB error: " . mysql_error());
    }
    $query = "SELECT Vorname, Nachname FROM Benutzer b, Fahrlehrer f WHERE b.BenutzerID = f.BenutzerID";
    $result = mysql_query($query) or die ("MySQL-Error: " . mysql_error());
    while($row = mysql_fetch_array($result)){
        $array[] = $row["Vorname"] . " " . $row["Nachname"]; 
    }
    echo json_encode($array);
    mysql_close($con); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T00:16:04.673

`datasource`通过分配一个新数组，您正在丢失对数组的引用。您将需要操作数组以避免丢失对它的引用。

```
var datasource = [];

$.post("typeahead.php", {
    query: 'query'
}, function(data) {
    /* Add the responses to the datasource, don't mess up the reference */
    [].push.apply(datasource, data);
});

$('#searchInput').typeahead({
    source: datasource
}); 
```

[**看这里。**](http://jsfiddle.net/7f4Mc/)

* * *

另一种选择是缓存响应。我个人更喜欢这种方法而不是前一种方法。

您可以`process`在发送第一个请求并缓存数据后使用回调。之后，使用缓存的数据。

```
var cachedsource = (function(){
    var datasource = null;
    return function(query, process){
        if(datasource !== null) {
            /* use cached data */
            return datasource;
        } else {
            $.post("typeahead.php", {
                query: 'query'
            }, function(data) {
                /* cache data */
                datasource = data;
                process(datasource);
            });
        }
    };
})(); 
```

```
$('#searchInput').typeahead({
    source: cachedsource
}); 
```

[**看这里。**](http://jsfiddle.net/JBAS2/)

* * *

PHP 返回不正确`Content-Type`。尝试`$.ajax`代替`$.post`.

```
$.ajax({
  url: "typeahead.php", 
  data: {
    query: 'query'
  },
  success: function(data) {
    /* cache data */
    datasource = data;
    process(datasource);
  },
  dataType: "json"
}); 
```

注意`dataType`设置为`json`。

您还可以`Content-Type`在 PHP 中使用[`header()`](http://php.net/manual/en/function.header.php).

```
header('Content-Type: application/json');
echo json_encode($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:47:42.043

你的html代码在哪里？

你在用这个吗：

```
<input id="searchInput" type="text" data-provide="typeahead"> 
```

?

然后确保您的回调在 firebug 中正常并返回数据，因为您没有指定任何 url，例如：

```
$.post("typeahead.php", 
```

然后确保你在 document.ready 中运行你的 js

```
$(document).ready(function(){

//do my js
}); 
```

也试试：

`console.log(datasource);`在将该 var 传递给引导插件之前

一定要试试这个：

```
$(function(){

$.post("typeahead.php",
  {
    query: 'query'       // 'query' has no meaning ;)
  }, 
  function(data) {       // data looks like ["asd","fds"] thanks to json_encode on the server side
    $('#searchInput').typeahead( {
  source: data
});
});

}); 
```

# linux - 创建 .deb 包 - 无法获取依赖项

> ID：14047667
> 
> 赞同：0
> 
> 时间：2012-12-26T23:44:28.047
> 
> 标签：linux, installation, dependencies, package, debian

我正在尝试按照[精彩的教程](http://www.webupd8.org/2010/01/how-to-create-deb-package-ubuntu-debian.html)创建一个简单的 .deb 包，我的问题是，当我尝试通过执行此命令获取包的依赖项时：

```
dpkg-depcheck -d ./configure 
```

我收到此错误：

```
strace: ./configure: command not found
Running strace failed (command line:
strace -e trace=open,execve -f -q -o /tmp/depchqCdeiv ./configure 
```

我不明白。您对可能导致这种情况的原因有任何想法吗？这在 Ubuntu 12.04 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:54:08.277

我认为该教程不是创建高质量 deb 包的更好方法。

更好的资源是：

*   [Debian 新维护者指南](http://www.debian.org/doc/manuals/maint-guide/)
*   [介绍 Debian 打包教程](http://www.lucas-nussbaum.net/blog/?p=640)

关于错误，我想您尝试打包的软件不使用自动工具，因此它没有任何`configure`脚本。检查依赖项的方式取决于使用的构建系统。如果您没有`configure`脚本，那么您的项目根目录可能有一个`SConstructp`、 a`setup.py`或只是一个`Makefile`.

提供有关您尝试打包的软件的更多信息，我可以提供进一步的帮助。

最好的祝福

# image-processing - Python：想要像 Photoshop 一样改变图像 HSL

> ID：14047671
> 
> 赞同：0
> 
> 时间：2012-12-26T23:45:25.993
> 
> 标签：image-processing, python-imaging-library

我想在 Python 中实现此功能（更改 HSL 并勾选该颜色），最好使用 PIL 或 numpy。

![在此处输入图像描述](../Images/1d80896120cb150bce8bee346725e17a.png)

有人可以解释这是如何工作的吗？

据我所知是使用内置函数 color_to_hsl 获取 hsl 值，更改它，然后将 ti 转换回 rgb，最后写入单个像素。

有什么线索可以让它更接近吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:26:20.783

```
from PIL import Image
import colorsys

def colorize(im, h, s, l_adjust):
    h /= 360.0
    s /= 100.0
    l_adjust /= 100.0
    if im.mode != 'L':
        im = im.convert('L')
    result = Image.new('RGB', im.size)
    pixin = im.load()
    pixout = result.load()
    for y in range(im.size[1]):
        for x in range(im.size[0]):
            l = pixin[x, y] / 255.99
            l += l_adjust
            l = min(max(l, 0.0), 1.0)
            r, g, b = colorsys.hls_to_rgb(h, l, s)
            r, g, b = int(r * 255.99), int(g * 255.99), int(b * 255.99)
            pixout[x, y] = (r, g, b)
    return result 
```

![原来的](../Images/ea9aecb9d814f8bc5a3fb299f4b3d4fe.png) ![彩色](../Images/2429b1a7b5d5f5f9c491ea7c18393e91.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-07T07:04:54.270

这就是你在 Photoshop 中使用 colorize check 所做的事情

```
from PIL import Image
import colorsys

def rgbLuminance(r, g, b):
    luminanceR = 0.22248840
    luminanceG = 0.71690369
    luminanceB = 0.06060791
    return (r * luminanceR) + (g * luminanceG) + (b * luminanceB)

def colorize(im, h, s, l_adjust):
    h /= 360.0
    s /= 100.0
    l_adjust /= 100.0
    result = Image.new('RGBA', im.size)
    pixin = im.load()
    pixout = result.load()
    for y in range(im.size[1]):
        for x in range(im.size[0]):
            currentR = pixin[x, y][0]/255
            currentG = pixin[x, y][1]/255
            currentB = pixin[x, y][2]/255
            lum = rgbLuminance(currentR, currentG, currentB)
            if l_adjust > 0:
                lum = lum * (1 - l_adjust)
                lum = lum + (1.0 - (1.0 - l_adjust))
            else:
                lum = lum * (l_adjust + 1)
            l = lum
            r, g, b = colorsys.hls_to_rgb(h, l, s)
            r, g, b = int(r * 255.99), int(g * 255.99), int(b * 255.99)
            pixout[x, y] = (r, g, b, 255)
    return result 
```

# javascript - 从 Firefox 运行 EXE - 在特定路径中

> ID：14047672
> 
> 赞同：0
> 
> 时间：2012-12-26T23:45:27.833
> 
> 标签：javascript, firefox, batch-file, execute, xpcom

[我找到了从 Firefox 中的本地 html 页面运行可执行文件（.bat 或 .exe）的解决方案 -这里](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess#See_also)有很好的文档记录

但是，我需要在它所在的文件夹中启动可执行文件。我的可执行文件是一个 .bat 文件 (D:\Test\file.bat)，它包含以下命令：echo %cd%

当我运行它时，它会打印：

```
C:\Programs\FirefoxPortableLegacy36 
```

而不是打印

```
D:\Test 
```

有没有办法在 htm/javascript 中指定启动我的可执行文件的确切位置（在哪个目录中）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:42:40.570

所以你想让工作目录设置为你的批处理脚本所在的目录？如果是这种情况，那么只需在批处理脚本的开头添加这一行：

```
pushd "%~dp0" 
```

您还可以阅读该命令的命令行帮助`for`。它很好地解释了参数替换。

# javascript - 为什么我的 Ajax 代码将空的作为第一项？

> ID：14047686
> 
> 赞同：0
> 
> 时间：2012-12-26T23:47:06.707
> 
> 标签：javascript, html, json, jquery

我收到以下 JSON 对象：

```
[Object, Object, Object]
0: Object
a: "a"
b: "b"
c: "c"
__proto__: Object
1: Object
a: "a"
b: "b"
c: "c"
__proto__: Object
2: Object
a: "a"
b: "b"
c: "c"
__proto__: Object
length: 3
__proto__: Array[0] 
```

使用以下 ajax 代码：

```
function describeItems() {

 var html;
 var loadingContainer = $("<div class='containerLoading'></div>");
 var emptyContainer = $('<div class="emptyContainer"><div style="width: 400px; margin-left:20px;"><h4>Let\'s get started!</h4>You do not have anything in your bucket.<br \>Click the shop button to start shopping items.<button style="margin-top: 20px;" class="btn btn-large btn-primary" type="button" data-toggle="modal" data-target="#shop-items">Shop Items</button></div></div>');
 $("#items-table").append(loadingContainer.fadeIn(100));

 $.ajax( { 
  type: "POST", 
  url: "function.php", 
  data: {action: 'test'}, 
  dataType: "json", 
  cache: "false",
  success: function(data) { 

  // DEBUG
  console.log(data)
  if (data != null)
  {
      // DEBUG
      //console.log(data);
      html = html + '<tr>';
      html = html + '<td><input type="checkbox" value=""></td>';

      $.each(data, function(key,value) {
       if (!$.isPlainObject(value)) {
        html = html + '<td>' + value + '</td>'; 
       };
      });

     html = html + '</tr>';

     $.each(data, function(key,value) {  
      html = html + '<tr>';
      html = html + '<td><input type="checkbox" value=""></td>';

      if ($.isPlainObject(value)) { 

       // DEBUG   
       //console.log(value);
       $.each(data[key], function(key, value) {
        html = html + '<td>' + value + '</td>';     
       }); 
      };

     html = html + '</tr>';
     });

     html = html + '</tbody>';

     // ADD THE HTML TO THE DIV.
     $('#innerContent').html(html);

     // WHEN LOADING IS DONE, REMOVE OVERLAY.
     $("#item-table .containerLoading").fadeOut(100, function() {
      $(this).remove();
     }); 
 }
 else
 {
     // WHEN LOADING IS DONE, REMOVE OVERLAY.
     $("#item-table .containerLoading").fadeOut(100, function() {
      $(this).remove();
     });

    $("#item-table").append(emptyContainer.fadeIn(100));

 }
     }, // END OF SUCCESS
     error: function (xhr, ajaxOptions, thrownError) {
      alert('Response Code: ' + xhr.status);
      alert(thrownError);
      alert(xhr.responseText);
     }

 }); // END OF $.AJAX 
}; 
```

但不知何故，我的 html 表中有一个空`<tr>`的，至少它没有对象内容..：

```
<table class="table table-striped table-condensed">
    <thead>
        <tr>
            <th></th>
            <th>a</th>
            <th>b</th>
            <th>c</th>
        </tr>
    </thead>
    <tbody id="innerContent">
    <tr>
        <td>
            <input type="checkbox" value="">
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" value="">
        </td>
        <td>
            a
        </td>
        <td>
            b
        </td>
        <td>
            c
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" value="">
        </td>
        <td>
            a
        </td>
        <td>
            b
        </td>
        <td>
            c
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" value="">
        </td>
        <td>
            a
        </td>
        <td>
            b
        </td>
        <td>
            c
        </td>
    </tr>       
    </tbody>
</table> 
```

我需要改变什么来删除第一个空的`<tr>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:57:34.547

这个循环不会产生任何`TD`其他东西`checkbox`

```
 html = html + '<tr>';
  html = html + '<td><input type="checkbox" value=""></td>';

  $.each(data, function(key,value) {
   if (!$.isPlainObject(value)) {
    html = html + '<td>' + value + '</td>'; 
   };
  });

 html = html + '</tr>'; 
```

您的数据是一个数组，数组的每个元素都是一个对象。

`if (!$.isPlainObject(value))`总是错误的，但无论如何你都在创建行

# javascript - 完成某个级别后，我的 1 页 Web 应用程序将变量减少 2 而不是 1

> ID：14047692
> 
> 赞同：0
> 
> 时间：2012-12-26T23:47:57.833
> 
> 标签：javascript, jquery, html

出于某种原因，在用户猜对了数字并按照确认再次玩游戏但猜测次数较少（比原来少 2 次）后，每次用户猜测一个数字时，剩余的猜测数会减去 2，有时只是随机数通常的 1\. 我尝试更改代码以各种不同的方式进行扣除，但无济于事：

```
j--;
j -= 1;
j = j - 1; 
```

[Fiddle](http://jsfiddle.net/n5dzt/)中的完整代码，如果有人可以提供帮助，那将是很棒的，我已经在这几个小时了！谢谢

部分猜测按钮点击事件

```
if (currentGuess < numberToGuess) { 
        $hintBox.html('<p class="blue">Try higher</p>');
        } else {
            $hintBox.html('<p class="blue">Go lower</p>');
                }
        j = j - 1;
        $('.numberGuesses').html(j);
}  // end of if guess is not correct

else if (currentGuess === numberToGuess) {
    alert('Well done the correct number was '+ numberToGuess);
  var playAgain = confirm("Let's see if you can do that again with less guesses.");
    if (playAgain){
        $('#gameDiv').hide('pulsate', 100, function(){
            $('#mode').delay(200).show('pulsate', 500);
        });
        lowerGuesses = lowerGuesses - 2;
        $('.numberGuesses').html(lowerGuesses);                
    } else { 
        location.reload();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:26:32.050

在获得正确的数字后，您不会将计数器重置`j`为`lowerGuesses`。

代码很难理解，而且 IMO 有点破。事情需要更好地解决。当实际上有新游戏时，将“新游戏”代码隔离为您调用的代码。创建一个新的随机数。清除它记住的数字；在我修复它之后它再次是相同的数字（可能但不太可能，所以我假设逻辑也被破坏了）所以它都警告我我已经猜到了这个数字，*并*告诉我我猜对了这个数字。

基本上，您的游戏循环应该只用于游戏，而不是用于准备新游戏等。考虑将玩家应该进入函数的猜测次数传递给`newGame`函数（以及许多其他重构）。

# c++ - 如何从命令行编译 WindRiver/Eclipse C++ 项目？

> ID：14047694
> 
> 赞同：4
> 
> 时间：2012-12-26T23:48:07.010
> 
> 标签：c++, eclipse, command-line, compilation, makefile

我目前正在运行一个名为 WindRiver 的 Eclipse 变体，它专为使用 C++ 进行嵌入式系统编程而设计（具体来说，我是高中 FIRST 机器人团队的一员）。

我能够从 Eclipse（项目 > 构建项目）中成功编译和构建项目，但我正在寻找通过使用命令行编译来自动化此过程的方法。

该项目已经包含一个 makefile 和所有内容，所以理想情况下我希望能够在不进行任何手动更改的情况下运行它。我[粘贴](http://pastebin.com/Bt1GyaDh)了makefile以防万一。

有谁知道我在哪里可以找到更多关于从命令行为 Eclipse 或 WindRiver 编译 C++ 程序或在 Windows 上运行 makefile 的信息？我尝试查看[*“如何在 Windows 中运行生成文件？”*](https://stackoverflow.com/q/2532234/646543) 但是按照第一个答案没有用（它给出了makefile的语法错误）。

我目前使用的是 Windows 8 笔记本电脑。据我所知，我正在使用的当前 WindRiver 变体基于 Eclipse 版本 3.3.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T00:07:12.293

您将需要一个 make 实用程序，我相信您的 WindRiver / Eclipse 设置将附带“gnumake”（可能称为`make`or 或`gmake`）。您需要设置命令行路径以通向编译器和 make 可执行文件。不幸的是，这不是一个很好的答案，因为我无法为您提供指向 make 和编译器位置的确切链接（这当然也取决于您安装东西的位置）。我只是想我会带你走上正确的道路，因为这个问题已经提出了一段时间，没有人跳过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:07:14.213

感谢 Mat Petersson 的回答，我能够确定我需要的一切并创建一个可以为我编译文件的批处理文件：

```
@echo off

setlocal

set PATH=%PATH%;C:\WindRiver\gnu\3.4.4-vxworks-6.3\x86-win32\bin;C:\WindRiver\utilities-1.0\x86-win32\bin;C:\WindRiver\setup\x86-win32\bin
set WIND_BASE=C:\WindRiver\vxworks-6.3

cd My_Project\PPC603gnu

make --no-print-directory BUILD_SPEC=PPC603gnu DEBUG_MODE=1 TRACE=1 
```

# php - 结合两个 foreach 循环

> ID：14047696
> 
> 赞同：4
> 
> 时间：2012-12-26T23:48:13.420
> 
> 标签：php, foreach

我有两个 foreach 循环：第一个：

```
 foreach ($items as $key => $item) 
        {   
        $keywords = explode(' ', $qsvarus);
        $title[$key] = preg_replace('/\b('.implode('|', $keywords).')\b(?![^<]*[>])/i', '<b>$0</b>', $title[$key]);
        $infoo[$key] = preg_replace('/\b('.implode('|', $keywords).')\b(?![^<]*[>])/i', '<b>$0</b>', $infoo[$key]);
        echo '<tr><td>'.$title[$key].$infoo[$key].$item.'</tr></td>';
} 
```

第二个：

```
foreach ($linkai as $key => $linkas) {
    $i++;
    $a1 = $linkas[1];
$a2 = str_replace("download/", "files/", $a1);
$a3 = str_replace("&","&amp;", $a2);
$a4 = str_replace("amp;nbsp;","nbsp;", $a3);
echo "<div class=\"bgframe".str_replace("/i/", "/IMG/", $a4)."</div></div>";
} 
```

问题是如何使这两个循环显示如下结果：

```
Result1 from Loop1
Result1 from Loop2
Result2 from Loop1
Result2 from Loop2
Result3 from Loop1
Result3 from Loop2
And so on... 
```

代替：

```
Result1 from Loop1
Result2 from Loop1
Result3 from Loop1
...
Result1 from Loop2
Result2 from Loop2
Result3 from Loop2 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:06:19.033

你可以使用[`MultipleIterator`](http://www.php.net/multipleiterator)这个：

```
$m = new MultipleIterator();
$m->attachIterator(new ArrayIterator($items), 'item');
$m->attachIterator(new ArrayIterator($linkai), 'linkas');

foreach ($m as $unit) {
    // $unit['item'] contains an entry from $items
    // $unit['linkas'] contains an entry from $linkai

    // your logic here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T23:59:49.520

显而易见的解决方案：

```
$output1 = array();
$output2 = array();

foreach ($items as $key => $item) 
{   
    $keywords = explode(' ', $qsvarus);
    $title[$key] = preg_replace('/\b('.implode('|', $keywords).')\b(?![^<]*[>])/i', '<b>$0</b>', $title[$key]);
    $infoo[$key] = preg_replace('/\b('.implode('|', $keywords).')\b(?![^<]*[>])/i', '<b>$0</b>', $infoo[$key]);
    $output1[] = '<tr><td>'.$title[$key].$infoo[$key].$item.'</tr></td>';
}

foreach ($linkai as $key => $linkas) {
    $i++;
    $a1 = $linkas[1];
    $a2 = str_replace("download/", "files/", $a1);
    $a3 = str_replace("&","&amp;", $a2);
    $a4 = str_replace("amp;nbsp;","nbsp;", $a3);
    $output2[] = "<div class=\"bgframe".str_replace("/i/", "/IMG/", $a4)."</div></div>";
}

$output = array_map( null, $output1, $output2 );
foreach ( $output as $lines ) {
    $lines = array_filter( $lines );
    foreach ( $lines as $line ) {
        echo $line;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T01:50:34.477

最好的答案可能来自 Jack，但我认为我的解决方案很有趣。我还尝试改进您的代码：

```
do {
    if ($item = current($items)) {
        $key = key($items);
        $keywords = str_replace(' ', '|');
        list($infoo_str, $title_str) = preg_replace(
            "/\b({$keywords})\b(?![^<]*[>])/i",
            '<b>$0</b>',
            array($infoo[$key], $title[$key])
        );

        echo "<tr><td>{$infoo_str}{$title_str}{$item}</tr></td>";

        next($items);
    }

    if ($linkas = current($linkai)) {
        $characters = array('download/', '&', 'amp;nbsp;', '/i/');
        $replacements = array('files/', '&amp;', '&nbsp;', '/IMG/');
        $linkas = str_replace($characters, $replacements, $linkas);

        echo "<div class='bgframe{$linkas}'</div></div>";

        next($linkai);
    }
} while ($item or $linkas); 
```

# c# - 如何从 WPF 画笔中获取数组？

> ID：14047700
> 
> 赞同：3
> 
> 时间：2012-12-26T23:48:38.913
> 
> 标签：c#, wpf, arrays, foreach, brush

我想制作一个现有的数组，`Brushes`以便`WPF`我可以循环它们并在组合框中显示列表。我怎样才能做到这一点？

我有这样的东西，但它不会工作，因为`Brushes`它不是一个数组。

```
string[] brushes = Brushes;

foreach (string s in brushes)
{
    comboBox.Items.Add(s);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T23:52:40.000

您可以使用反射。您可以使用匿名类型来保存名称和画笔。

```
var values = typeof (Brushes).GetProperties().
    Select(p => new { Name = p.Name, Brush = p.GetValue(null) as Brush }).
    ToArray(); 
```

您只能通过以下方式访问名称：

```
var brushNames = values.Select(v => v.Name); 
```

# java - 在没有那么多相同的 else 语句的情况下，如何有效地验证小于零的输入？

> ID：14047704
> 
> 赞同：-2
> 
> 时间：2012-12-26T23:49:25.010
> 
> 标签：java

我正在尝试创建一个计算机模拟二十一点游戏的金钱损失。但是我遇到了一个错误，如果我在其中一个提示中输入小于零的值，程序必须在警告小于零之前通过所有其他提示。

有没有办法立即警告小于零的值，而不必一遍又一遍地为每个 if 放置相同的 else 语句？

```
private void menu()
{
    boolean NonNumeric=false;
    //This is so a different exception is thrown for the minimum stakes since it's a float.
    boolean isDecimal=false;
    while(getRounds()<=0 || getPlayers()<=0 || getStakes()<=0 )
    {
        try
        {
            Scanner input = new Scanner(System.in);
            if(getRounds()<=0)
            {
                System.out.println("Enter number of rounds.");
                setRounds(input.nextInt());
            }
            if(getPlayers()<=0)
            {
                System.out.println("Enter number of players.");
                setPlayers(input.nextInt());
            }
            if(getStakes()<=0)
            {
                System.out.println("Enter minimum stakes.(Note: All players bet minimum only)");
                isDecimal=true;
                setStakes(input.nextFloat());
            }

        }

        catch (InputMismatchException e ) //In case some idiot enters a letter or symbol.
        {
            //This if statement is so that a different message comes if the invalid entry is a float.
            if(isDecimal==true)
            {
                System.out.println("Entry must be a number. Not a letter or symbol. Try Again.\n");
            }
            else
            {
                System.out.println("Entry must be a whole number. Not a letter, decimal, or symbol. Try Again.\n");
            }
            /*This boolean is so that the below if statement does not run if the user enters a letter
            since the integer defaults back to a 0 on exception.*/
            NonNumeric = true;
        }
        if(getRounds()<=0 || getPlayers()<=0 || getStakes()<=0)
        {
            System.out.println("Number must be greater than 0.\n");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:59:01.540

模块化。创建一个方法（甚至是一个类），它接受输入并仅在满足条件时才接受它。例如

```
 private int myIntGetter(String caption, boolean forcePositive) {
    System.out.println(caption);
    Scanner input = new Scanner(System.in);
    int intValue = input.nextInt();
    while ((forcePositive) && (intValue <=0)) {
      System.out.println("Number must be greater than \0");
      System.out.println(caption);
      intValue = input.nextInt();
    }
    // here intValue is valid
    return intValue;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:57:23.213

如果您不关心对用户友好：

```
do{
   System.out.println("Enter number of rounds.  Rounds must greater than zero.");
   setRounds(input.nextInt());
}while( getRounds()<=0); 
```

您可以为用户必须输入的每件事执行此操作。它又快又脏。

# javascript - 访问特定数组

> ID：14047708
> 
> 赞同：0
> 
> 时间：2012-12-26T23:49:55.540
> 
> 标签：javascript

我有一组以下列方式命名的数组：`question0, question1, question2`等等。
我还有一个对应于问题编号的变量。

有了这个，我将如何访问数组`question0`而不必输入整个名称。例如，在 for 循环中，如果循环号为`5`，我想对`question5`. 我知道这很简单，但我一直无法找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:51:32.217

以连续数字结尾的变量通常是使用数组的提示。听起来你需要一个数组数组，然后你可以：

```
doOperation(question[somenumber]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:51:06.070

为什么不只使用一个大数组，`question`每个项目本身就是一个数组？

除此之外，如果变量是全局变量，那么您可以使用`window['question'+i]`,`i`作为问题的编号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T23:52:11.977

不要使用带有序号作为后缀的变量名；使用适当的结构，例如数组：

```
var questions = ['why?', 'what?', 'where?'],
nr = 2; // the question number

alert(questions[nr]); 
```

在我的示例中，每个“问题”都是一个字符串，但它可以是任何其他结构，包括另一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T23:56:26.903

我认为将您的 question(n) 值作为数组会更简单。从那里您可以使用以下内容：`questions[i]`其中 i 表示当前循环编号，从而改进操作。

```
var questions = [["What?", "Why?"], ["When?", "How?"]];
for(var i = 0; i < questions.length; i++) {
 for(var j = 0; j < questions[i].length; j++) {
  console.info(questions[i][j]);
 }
} 
```

# php - 仅在未登录时运行脚本？

> ID：14047715
> 
> 赞同：1
> 
> 时间：2012-12-26T23:51:07.857
> 
> 标签：php, session

> **可能重复：**
> [向页数添加 else 语句？](https://stackoverflow.com/questions/14045922/adding-an-else-statement-to-page-count)

我正在使用 php 页计数脚本。它计算未登录用户在将其重定向到注册页面之前可以访问页面的次数。

基本上未登录的用户在被重定向注册之前最多可以查看其他用户的个人资料 5 次。但这也发生在登录用户身上，页面计数正在计算次数并重定向登录的用户。我只希望页面计数在用户未登录时运行并重定向。

有人可以告诉我我需要在代码中输入什么才能做到这一点吗？我已经尝试了一切，但无法弄清楚。

```
<?
!session_id() ? session_start() : null;

verify_profile_visit_limit();

function verify_profile_visit_limit(){
    $free_profiles = array(99999,99998,99997,99996,99995,99994,99993);

    if(in_array($_GET["id"], $free_profiles)) return;

    if(! isset($_SESSION["page_access_count"])){
        $_SESSION["page_access_count"] = 1;
    }

    $_SESSION["page_access_count"]++;

    if($_SESSION["page_access_count"] > 6){
        header("Location: limit.php");
        exit();
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:57:17.263

在你调用函数之前，`verify_profile_visit_limit()`你应该有这样的东西：

```
if(!isset($_SESSION['logged_in']) && empty($_SESSION['logged_in'])){
    verify_profile_visit_limit();
} 
```

为此，您需要设置一个标志变量，例如`$_SESSION['logged_in']`用户何时登录，以检查用户是否已登录。

因此，您的`verify_profile_visit_limit()`功能只会在用户未登录时运行。

希望这可以帮助。

# c# - 实体框架：包括和明确定义的外键

> ID：14047716
> 
> 赞同：0
> 
> 时间：2012-12-26T23:51:10.297
> 
> 标签：c#, linq, entity-framework, linq-to-entities

> **可能重复：**
> [Linq-to-entities - Include() 方法未加载](https://stackoverflow.com/questions/794283/linq-to-entities-include-method-not-loading)

我有这样**的**东西

```
public class Product
{
    public int ProductId { get; set; }
    public string Name { get; set; }

    public int CategoryId { get; set; }
    [ForeignKey("CategoryId")]
    public virtual Category Category { get; set; }
}

public class Category
{
    public int CategoryId { get; set; }
    public string Name { get; set; }
} 
```

在上下文中，我有：

```
public DbSet<Product> Products { get; set; } 
```

但是当我尝试像这样使用它时：

```
List<Product> foo = (from p in Context.Products 
                     where p.Category.Name = "something" 
                     select p).ToList();

Product first = foo.First(); 
```

我设置了 Product.CategoryId 的值，但在 Category 中为 null

注意：我已经尝试使用 'Context.Products.Include("Category")' 并且不起作用。

这有效（类别首先加载）：

```
List<Product> foo = (from p in Context.Products 
                     where p.Category.Name = "something" 
                     select p).ToList();

Product first = foo.First();

List<Category> categories = Context.Categories.ToList(); 
```

那么我每次都必须加载类别吗？为什么包含不起作用？

# c++ - 在 C++ 中声明一个缓冲区数组

> ID：14047718
> 
> 赞同：-1
> 
> 时间：2012-12-26T23:51:19.550
> 
> 标签：c++, buffer, opencl

我目前正在学习 OpenCL 并构建多个内核，每个函数都需要一个缓冲区，因此需要一个缓冲区数组。如何构建这样的数据结构？有人可以给我一个缓冲区结构的示例，以便我可以声明这些结构的数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:31:08.963

如果您使用的是 C++ 绑定，则可以使用向量而不是原始数组。

因此，您可以将缓冲区存储在如下数据结构中：

```
std::vector<cl::Buffer> 
```

# c# - 如何绘制一个看起来像 CAD 立面图的矩形

> ID：14047719
> 
> 赞同：2
> 
> 时间：2012-12-26T23:51:23.443
> 
> 标签：c#, winforms, graphics, system.drawing, cad

我应该使用什么画笔来绘制具有白色内部线条和矩形周边线条的矩形，例如下面的高程。

form1 winform 是我正在处理的，winform 后面的图像是我需要矩形在我的 winform 中查看的方式。

为了使问题更容易，我怎样才能用白色填充矩形的内部？

如何用白色填充矩形的线条？我不需要填充矩形的内部，我需要用白色填充构成矩形的 4 条线的一部分。

![CAD 示例](../Images/ce21e7663328373e981146a2d766b7b0.png)

```
 void BuildShopDrawing(ElevationResponse elevation)
    {

        float penWidth = (float)((2f / 12f) * PIXELS_PER_FOOT);
        Pen blackPen = new Pen(Color.FromArgb(40, 84, 149), penWidth);
        Bitmap canvas = new Bitmap((((int)elevation.TotalWidthFeet) * PIXELS_PER_FOOT) + 55, (((int)elevation.TotalHeightFeet) * PIXELS_PER_FOOT) + 25);
        Graphics dc = Graphics.FromImage(canvas);

        RectangleF[] bays = new RectangleF[elevation.Bays.Count];
        float x = 10F;
        float width = 0F;
        float height = 0F;

        for (int i = 0; i < elevation.Bays.Count; i++)
        {
            if (i > 0)
            {
                x += (float)((elevation.Bays[i - 1].WidthInches / 12) * PIXELS_PER_FOOT);
            }
            width = (float)(elevation.Bays[i].WidthInches / 12) * PIXELS_PER_FOOT;
            height = (float)(elevation.Bays[i].HeightInches / 12) * PIXELS_PER_FOOT;
            bays[i] =
                 new RectangleF(new PointF(x, 10),
                 new SizeF(width, height));
        }

        dc.DrawRectangles(blackPen, bays);
        this.picBx.Image = canvas;
        this.Size = new System.Drawing.Size(canvas.Width + 10, canvas.Height + 50);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T02:27:24.387

您需要更彻底地查看[Pen 类](http://msdn.microsoft.com/en-us/library/9f23c0f4%28v=vs.100%29.aspx)，更具体地说是[CompoundArray 属性](http://msdn.microsoft.com/en-us/library/system.drawing.pen.compoundarray%28v=vs.100%29.aspx)，它会为您提供您想要的东西，您将需要使用 Pen Class 的其他一些属性来获得正确的转换。作为一个旁注，当您发布依赖于外部自定义类的示例代码时，您会更难有人提供帮助，最好确保代码可以自行运行。

在您声明您的笔后尝试添加它。

```
float[] cmpArray = new float[4]{0.0F, 0.2F, 0.7F, 1.0F};
blackPen.CompoundArray = cmpArray; 
```

它看起来像这样：

![在此处输入图像描述](../Images/3901433d86797c0a1ae60a06a846bb15.png)

# iphone - 检索移动、工作和 iPhone 电话号码的通讯簿

> ID：14047721
> 
> 赞同：2
> 
> 时间：2012-12-26T23:51:33.707
> 
> 标签：iphone, objective-c, ios, abpeoplepickerview

我开始为我的应用程序开发设置页面。

在此页面上，用户可以点击**“+”**按钮，该按钮将打开`ABPeoplePickerNavigationController`. 点击联系人时，设置页面上的文本字段将使用来自所选用户的正确数据进行适当填充。

我了解，如果我想检索某人的工作电子邮件，它是：

```
NSString *workEmail = (__bridge NSString *)ABMultiValueCopyValueAtIndex(emails, 1); 
```

对于家庭来说，它将是：

```
NSString *homeEmail = (__bridge NSString *)ABMultiValueCopyValueAtIndex(emails, 0); 
```

但就检索不同类型的电话号码而言，我被卡住了。

如果有人能告诉我如何获得不同类型的电话号码，希望类似于我收到两封电子邮件的方式，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T00:17:04.550

好吧，首先，你理解错了——不能保证用户的家庭电子邮件地址是#0。如果您*只有*该用户的工作电子邮件怎么办？然后*它将*在插槽 0 中。

你想要的是`ABMultiValueCopyLabelAtIndex()`，它与命名常量一起使用时会告诉你哪个是哪个：

```
ABPersonRef person = ...;
ABMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty);
if (phoneNumbers) {
    CFIndex numberOfPhoneNumbers = ABMultiValueGetCount(phoneNumbers);
    for (CFIndex i = 0; i < numberOfPhoneNumbers; i++) {
        CFStringRef label = ABMultiValueCopyLabelAtIndex(phoneNumbers, i);
        if (label) {
            if (CFEqual(label, kABWorkLabel)) {
                /* it's the user's work phone */
            } else if (CFEqual(label, kABHomeLabel)) {
                /* it's the user's home phone */
            } else if (...) {
                /* other specific cases of your choosing... */
            } else {
                /* it's some other label, such as a custom label */
            }
            CFRelease(label);
        }
    }
    CFRelease(phoneNumbers);
} 
```

# assembly - 可以存储在 dword 类型变量中的以 16 为底的最大整数是多少？

> ID：14047722
> 
> 赞同：1
> 
> 时间：2012-12-26T23:52:05.143
> 
> 标签：assembly, masm

它可以存储的最大数字是多少？

更重要的是，有人可以解释为什么 dword 不能存储更大的数字吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T23:55:00.830

它与使用的基础本身无关。DWORD 可以存储的最大数字受以下事实的限制：DWORD（至少在 DWORD 的典型用法中，它是 Microsoft 的 typedef）是 32 位宽的无符号整数。这意味着它可以存储的最大数字是 2^32-1。

*   在二进制中是`11111111111111111111111111111111`.
*   `0xFFFFFFFF,`正如@GregHewgill 所说，在十六进制中。
*   在十进制中是`4294967295`.
*   用八进制表示`37777777777`。

这些是相同的数字，只是使用不同的基数。二进制显示了机器级别的真实情况。DWORD 的最大值是 32 位宽，所有 32 位都打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:54:46.027

假设你`dword`是 32 位。可以存储在 32 位二进制中的最大数是全 1：

```
11111111111111111111111111111111 
```

在基数 16（十六进制）中，这是

```
0xFFFFFFFF 
```

您不能存储比这更大的整数，因为那样您将需要 33 位。

# hibernate - playframework 捕获 PersistenceException

> ID：14047727
> 
> 赞同：0
> 
> 时间：2012-12-26T23:52:33.723
> 
> 标签：hibernate, jpa, playframework

在测试中，我尝试捕获异常：

在这里，我期望该软件没有标题-因此我期望在保存该实体时会引发 PersistenceException。

```
@Test
public void saveWithoutTitle() {

    Software software = ...

    try {
        software.save();
        fail("software.title should not be null");
    } catch (PersistenceException ex) {}
} 
```

我的测试失败（即异常永远不会发生）

**我的带有@Column(nullable = false !** )的软件实体类：

```
@Entity
public class Software extends Model {

    @Column(nullable = false)
    public String title; 
```

我做错了什么？

--

我已经找到了解决方法：

```
 import javax.validation.constraints.NotNull;

  @Entity
  public class Software extends Model {

    @NotNull
    String title; 
```

但同样，有什么意义：

> @Column（可为空=假）

如果它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:09:41.277

[`javax.persistence.Column`](http://docs.oracle.com/javaee/6/api/javax/persistence/Column.html#nullable%28%29)用于指定数据库列的详细信息。nullable 属性一般只在生成表定义时使用，在运行时不用于验证。

[`javax.validation.constraints.NotNull`](http://jackson.codehaus.org/javadoc/bean-validation-api/1.0/javax/validation/constraints/NotNull.html)在运行时用于在持久化数据之前验证数据。

这就是为什么您在使用时收到 PersistenceException 的原因`@NotNull`。使用时也不例外`@Column(nullable = false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:03:19.730

我想通了：

我在构建软件实例时犯了一个错误。因此，它可以工作并引发异常。我应该使用构建器实例 - 一个构建器对一个测试。然后一切都按预期进行。

```
@Test
public void saveWithoutTitle() {

    SoftwareTemplateBuilder builder = new SoftwareTemplateBuilder();
    Software software = builder.template1().withTitle(null).create();

    try {
        software.save();
        fail("software.title should not be null");
    } catch (ConstraintViolationException ex) {}
} 
```

# vb.net - 您如何随机化从 VB.NET 中的文件夹中绘制的图片？

> ID：14047728
> 
> 赞同：0
> 
> 时间：2012-12-26T23:52:31.723
> 
> 标签：vb.net, random, picturebox

你如何随机化从文件夹中绘制的图片以加载到 VB.NET 的图片框中？我正在从文件夹到图片框定期绘制一张图片。我想知道如何从文件夹中随机选择图片。关键是这个文件夹偶尔会增加几个图片文件，所以为每个初始文件创建一个变量的明显方法是行不通的。我对编程非常陌生，因此非常感谢示例代码。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:55:02.217

```
 Dim rnd As New Random
    Dim alljpgs() As String = IO.Directory.GetFiles(path, "*.jpg", IO.SearchOption.TopDirectoryOnly)
    Dim jpg As New Bitmap(alljpgs(rnd.Next(0, alljpgs.Count - 1)))
    PictureBox1.Image = jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:56:11.447

看起来类似的问题已经发布并回答，这里：[从文件夹中选择随机图像以显示在图片框中，vb.net](https://stackoverflow.com/questions/10916491/select-random-image-from-folder-to-display-in-picturebox-vb-net)

# c - 接受呼叫不会阻塞第二次（或不止一次）？

> ID：14047733
> 
> 赞同：1
> 
> 时间：2012-12-26T23:53:35.477
> 
> 标签：c, winapi, winsock, winsock2, winsockets

我有以下代码，我不确定为什么它不能正常工作。

它是一个多线程 TCP 服务器，循环 accept() 调用并触发指定的

每次线程。

问题是接受有时不会阻塞，从而导致

当理论上没有连接时打开一个新线程的程序。

这就是循环 -

```
 for (dwI = 0;; dwI++)                       //Accept MAX_CLIENTS connections
{
    if(MAX_CLIENTS == dwI)
    {
        dwI=0;
        continue;
    }//if

    if(clients[dwI].bIsInUse)
    {
        continue;
    }//if

    ZeroMemory(&from,sizeof(from));

    if(!AcceptConnection(&ServerSock,&from,&ClientSock))
    {
        PRINT_LE("AcceptConnection",ERROR_ACCEPT_SERVER_CONNECTION);
        closesocket(ServerSock);
        WSACleanup();
        return EXIT_FAILURE;
    }//if

    clients[dwI].ClientSock = ClientSock;

    if(! (clients[dwI].hThread = CreateThread(
            NULL,               //Not inheritable
            0,                  //Default stack size
            ThreadedAcceptTCP,       //ThreadedAccept - function
            &clients[dwI],//Pass pointer to the socket
            0,                  //Start immidiately
            &clients[dwI].dwThreadId                //Save thread id
            )))
    {
        PRINT_GLE("CreateThread");
        closesocket(ServerSock);
        WSACleanup();
        return EXIT_FAILURE;
    }//if

    #ifdef PRINT_STATUS                     //Print status if macro is defined
        printf("Server responce message has been sent.\n");
    #endif
}//for 
```

每个函数都有我自己的包装器。

AcceptConnection 具有以下代码 -

```
 SOCKET ClientSocket = INVALID_SOCKET;       //Client socket
INT sockaddrSize = sizeof(*pSockAddr);

ClientSocket = accept(          //Create client accepting socket
                *pSock,         //Listen-ed socket
                pSockAddr,      
                &sockaddrSize   
                );

if (INVALID_SOCKET == ClientSocket)     //Check for errors - if any - cleanup and return failure
{
    PRINT_WSAGLE("socket");
    return FAILURE;
}//if

*pClientSock = ClientSocket;        //Pass socket

return SUCCESS; 
```

当我通过浏览器连接到服务器时出现问题，

例如 ，

在第一个线程完成后（我已经通过暂时休眠主线程 5 秒来确保这一点）

它清理一切并关闭客户端套接字，

虽然在第二次接受呼叫 - 它会以相同的方式返回

SOCKADDR 信息并导致一个额外的线程上去，

接收完全相同的数据，发送完全相同的数据。

并打印 2 次（有时甚至更多）次：

“服务器响应消息已发送。”

我无法弄清楚为什么会发生这种情况，希望你们能帮助我。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:09:05.793

这有点猜测，但我想知道这行代码中的逻辑：

```
if(!AcceptConnection(&ServerSock,&from,&ClientSock)) 
```

它期望`AcceptConnection`在成功时返回非零值，在失败时返回零值。`SUCCESS`但是，该函数在成功时返回一个常量。但是，一些 Windows 头文件将常量 SUCCESS 定义为 0。而各种失败的常量是一些非零值。

即使您在自己的代码中定义了 SUCCESS 和 FAILURE，也可能需要专门检查返回值，例如：

```
if (FAILURE == AcceptConnection(&ServerSock,&from,&ClientSock)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T06:30:49.830

一个可能的问题：在分配一个新的客户端 SOCKET 后，您似乎没有设置`clients[dwI].bIsInUse`为 true，这会弄乱您的 for 循环中的逻辑。

# android - Android/Java 字符串连接与不需要的“\n”

> ID：14047738
> 
> 赞同：1
> 
> 时间：2012-12-26T23:54:40.860
> 
> 标签：android, string, jsoup

我正在编写一个从 Translink API 网页解析数据的 Android 程序。该程序有效，但我存储的数据有问题。似乎每次程序循环时，都会在字符串本身中添加一个“\n”。这是代码本身：

```
private class DownloadWebpageText extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String...urls) {
        // params comes from the execute() call: params[0] is the url.
        try {
            // Test Code
            for(int h=0; h<prev_stops.size(); h++) {
                Document doc = Jsoup.connect("http://api.translink.ca/rttiapi/v1/stops/" + prev_stops.get(h) + "/estimates?&timeframe=120&apikey=XMy98rbwFPLcWWmNcKHc").get();
                nextbuses = doc.select("nextbus");
                schedules = doc.select("schedules");
                String bus_times = "";

                temp += "Arrival Times for Stop " + prev_stops.get(h) /*+ " (Previous Stop: " + prev_stop + "): \n" + "\nPrevious Stops: " + prev_stop*/;

                for(int i=0; i<nextbuses.size(); i++) {
                    temp += parseData(nextbuses.get(i).select("routeno").toString()) + ": ";

                    schedule = schedules.get(i).children();
                    expectedleavetime = schedule.select("expectedleavetime");

                    for(int j=0; j<expectedleavetime.size(); j++) {
                        if(j != 0) {
                            temp = temp.concat(", ");
                        }
                        temp = temp.concat(parseData(expectedleavetime.get(j).toString()));

                    }
                    temp += "\n";
                }
                temp += "\n";
            }

            return "";
        } catch (IOException e) {
            return "Unable to retrieve web page. URL may be invalid.";
        }
    } 
```

parseData() 函数就是这样的：

```
public String parseData(String input) {
       int beg = input.indexOf(">") + 1;
       int end = input.lastIndexOf("<") - 1;
       return input.substring(beg, end);
     } 
```

这是控制台的输出：

```
Arrival Times for Stop 56549
402: 
4:10pm, 
4:40pm, 
5:10pm, 
5:40pm 
```

我希望输出是这样的：

```
Arrival Times for Stop 56549
402: 3:40pm, 4:10pm, 4:40pm, 5:10pm
403: ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:46:37.513

您可以使用在所有 for 循环之外定义的 ArrayList

```
// Define our ArrayList
ArrayList<String> allStops = new ArrayList<String>();

// Define a string that holds information about the current stop
String currentStopInfo = "Arrival Times for Stop " + prev_stops.get(h);

for(int i=0; i<nextbuses.size(); i++) {

    // Define a temporary String that holds all the times for a specific bus
    String temp_2 = parseData(nextbuses.get(i).select("routeno").toString()) + ": ";

    schedule = schedules.get(i).children();
    expectedleavetime = schedule.select("expectedleavetime");

    for(int j=0; j<expectedleavetime.size(); j++) {
        if(j != 0) {
            temp_2 += ", ";
        }
        temp_2 = temp_2.concat(parseData(expectedleavetime.get(j).toString()));

     }

     // Add the string that holds info for one bus to our Array
     allStops.add(temp_2);
} 
```

当您想打印所有字符串（每辆公共汽车的所有站点）（每个字符串都包含有关一辆公共汽车的信息）时，您只需执行以下操作：

```
//Print the line that holds the current stop information
System.out.println(currentStopInfo);
for(String x : allStops) {

     // Loop through our ArrayList, and print the information
     System.out.println(x);
} 
```

# java - 获取 Swing 表中的数据库信息作为输出

> ID：14047742
> 
> 赞同：0
> 
> 时间：2012-12-26T23:55:26.637
> 
> 标签：java, swing, jtable, resultset

我是 Java 新手，我正在练习一些新东西。我已经开始使用数据库。因此，我使用 MVC 模式制作了一个待办事项列表应用程序。

在我的模型中，我得到了所有结果。在我看来，我尝试将这些数据输出为一个漂亮的表格。问题是我没有得到任何输出，除了一段硬编码的代码..

这是我的观点的代码

```
JTable table = null;

public ToDoListView(ToDoListModel model) {
    this.model = model;

    setBackground(Color.WHITE);

    JTable table = new JTable();

    DefaultTableModel tableModel = new DefaultTableModel(new Object[][]{},new String[]{"To do","Date added"});

    table.setModel(tableModel);

    // this one below is outputted
    tableModel.addRow(new Object[]{"something","1-1-2012"});

    // this should give me all the results.. 
    for(int i = 0; i < model.getRows().size(); i++) {
        tableModel.addRow(model.getRows());
        System.out.println("added");
    }

    add(table);

} 
```

在我的模型中我有这个

```
private Vector<String> rijen = new Vector<String>();

    public void getValue() {
    Connection con = null;
    Statement st = null;
    ResultSet rs = null;
     try {

        con = db.connectToAndQueryDatabase("test", "root", "root");
        System.out.println("connection established");

        st = con.createStatement();
        String query = "SELECT id, item, datum FROM toDoList";
        rs = st.executeQuery(query);

        while(rs.next()) {
            System.out.println(rs.getInt("id") + "\n" + rs.getString("item") + "\n" + rs.getDate("datum"));
            rijen.add(rs.getInt("id") + "");
            rijen.add(rs.getString("item"));
            rijen.add(rs.getDate("datum") + "");
        }

    public Vector<String> getRows() {
    return rijen;
} 
```

这是所有相关代码..我不知道我错过了什么或我做错了什么。有人可以告诉我如何解决它:)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:24:00.787

```
// This JTable attribut ...
JTable table = null;

public ToDoListView (ToDoListModel model) {
    this.model = model;
    setBackground (Color.WHITE);

    // is hidden by this local variable: 
    JTable table = new JTable(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T00:27:09.360

在您的`ToDoModel`班级中，您将所有数据添加到一个大文件中`Vector`

```
 while(rs.next()) {
        System.out.println(rs.getInt("id") + "\n" + rs.getString("item") + "\n" + rs.getDate("datum"));
        rijen.add(rs.getInt("id") + "");
        rijen.add(rs.getString("item"));
        rijen.add(rs.getDate("datum") + "");
    } 
```

然后您循环`Vector`将所有这些项目添加到`TableModel`，但该循环不正确

```
for(int i = 0; i < model.getRows().size(); i++) {
    tableModel.addRow(model.getRows());
    System.out.println("added");
} 
```

您总是添加整个向量，而不仅仅是该行的数据。

将其与@user unknown 的答案结合起来，您也许可以解决您的问题

# android - 是否可以通过触摸 Android V2 地图 API 中的地图来添加地图标记？

> ID：14047745
> 
> 赞同：0
> 
> 时间：2012-12-26T23:56:09.047
> 
> 标签：android, android-maps

我只想触摸屏幕，使用侦听器检测并在触摸的位置添加标记，并允许用户向标记添加书面信息。不久前，我使用现已弃用的 API 完成了这项工作，经过长时间的搜索，我在标记和 V2 API 上看到的只是如何制作动画、添加自定义标记或阴影，这一切都超出了我需要知道的范围。我在 Google 上通读了一段时间的文档，然后迷路了。

似乎很难找到基本的东西。我只想知道这是否可能，以及一些关于它在 V2 中有何不同的指示。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T00:05:07.660

> 我只想知道这是否可能

我不明白为什么不。

> 以及一些关于它在 V2 中有何不同的指示

实施 an`OnMapClickListener`并将其附加到您的`GoogleMap`via `setOnMapClickListener()`。`onMapClick()`当用户点击地图时，您的方法将被调用。在那里，添加一个新的标记。AFAIK，这应该可以正常工作。

# html - 为什么 CSS section:only-child 选择器不起作用？

> ID：14047749
> 
> 赞同：3
> 
> 时间：2012-12-26T23:56:52.107
> 
> 标签：html, css, css-selectors, pseudo-class

我只是在搞乱新的 HTML5 标记和伪选择器，并注意到 section:only-child 选择器似乎不起作用。我正在最新版本的 Chrome (23.0) 上对此进行测试。

我的代码是：

```
<section id="s1">
    <div id="div1">abc</div>
    <div id="div2">
        <span>first span</span>
        <span class="sp">second span</span>
    </div>
</section>

<section>
    <div>first child test</div>
</section>​ 
```

CSS是：

```
section {
background-color: brown;
width: 400px;
height: 200px;
}

#s1 {
position: relative; 
background-color: rgba(0,255,0,0.5); 
border: 1px solid #000; width: 50%;
}

#div1 {
background-color: #0f0; 
position: relative;
}

#div2 {
background-color: #0ff; 
width: 200px; 
color: red;
}

#div2 .sp {
color: white;
text-decoration:line-through;
}

section:only-child {
color: yellow;

    }​ 
```

理论上，文本“first child test”应该是黄色的，因为第二部分只有一个div，但它并没有得到黄色的字体。

如果我将选择器更改为 div:only-child 它会工作得很好。

你可以在这里看到 jsfiddle：http: [//jsfiddle.net/KwzZs/3/](http://jsfiddle.net/KwzZs/3/)

为什么这不起作用？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T00:03:05.753

这条规则：

```
section:only-child 
```

匹配`section`一个`only-child`.

这条规则（注意空格）：

```
section :only-child 
```

`only-child`匹配属于a的元素`section`。 [这是你所期望的](http://jsfiddle.net/KwzZs/4/)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:03:17.220

`x:only-child`意味着该`x`元素*是*其父元素的唯一子元素 - 而不是`x`只有一个子元素。

# facebook - Facebook like 按钮 iframe 代码未显示

> ID：14047750
> 
> 赞同：0
> 
> 时间：2012-12-26T23:56:53.950
> 
> 标签：facebook, iframe, facebook-like

我刚刚开始创建一个新网站，目前还没有在互联网上。我的第一个网站，所以一切对我来说都是新的。我正在尝试实现 Facebook like 按钮。我已输入代码，但没有显示任何内容。我正在使用 TextWrangler 创建网站并使用 MacBook Air。不确定这些信息是否会有所帮助。也许由于元属性而无法正常工作？我不太明白我需要在那里输入什么信息。

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>[]</title>
<meta property="og:title" content="The []" />
<meta property="og:type" content="website" />
<meta property="og:url" content="file:///Users/[]/Documents/Sites/IBS.html" />
<meta property="og:image" content="http://[].jpeg" />
<meta property="og:site_name" content="The []" />
<meta property="fb:admins" content="218100060" />
</head>
<body>
<p>hello</p>
<iframe   src="//www.facebook.com/plugins/like.phphref=file%3A%2F%2F%2FUsers%2Fshikhaverma%2FDocuments%2FSites%2FIBS.html&amp;
send=false&amp;layout=standard&amp;width=450&amp;show_faces=true&amp;font=arial&amp;
colorscheme=light&amp;action=like&amp;height=80" scrolling="no" frameborder="0" 
style="border:none; overflow:hidden; width:450px; height:40px;" allowTransparency="true">
</iframe>
</body>
</html> 
```

如果您能提供帮助，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:06:05.077

The problem is that the code you provided is double escaped. Which means that they are "&amp"s everywhere in the iFrame URL (src) code you provided:

```
//www.facebook.com/plugins/like.phphref=file%3A%2F%2F%2FUsers%2Fshikhaverma%2FDocuments%2FSites%2FIBS.html&amp;
send=false&amp;layout=standard&amp;width=450&amp;show_faces=true&amp;font=arial&amp;
colorscheme=light&amp;action=like&amp;height=80 
```

Try pasting the url in your web browser, and it won't work, because it's so mal-formed.

Besides, Facebook like button can't use a local url to like, (in this case you used file:///Users/shikhaverma/Documents/Sites/IBS.html. ). It has to be using an online, functioning URL. So for now, just enter any random URL of an online website untill you get your site hosted online.

I un-escaped the url, and it's still mal-formed. It should be "like.php?href=file" instead of "like.phphref=file". Why don't you just go back to Facebook and re-generate the code.

Also, is there a problem with your code editor? Why is everything getting double-escaped?

**Edit:** By the way, you can always utilize the unescape() JavaScript command to unescape text. More [here on Mozilla dev](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide%2FFunctions#escape_and_unescape_functions).

# c# - 如何向 WCF 服务添加跨域支持

> ID：14047754
> 
> 赞同：21
> 
> 时间：2012-12-26T23:57:21.873
> 
> 标签：c#, asp.net, wcf, http-headers, cross-domain

我试图允许来自托管在 localhost:80 上的 javascript 应用程序的 POST 请求到托管在不同端口的 WCF RESTful 服务，但不知何故它不起作用。我尝试将自定义属性添加到标头，并以编程方式将其添加到我的服务`JSONData`方法中，但我的响应中仍然出现“405 Method not allowed”。这里的正确方法是什么？

这是我的界面：

```
namespace RestService
{
    public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestServiceImpl Members

        public string JSONData()
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
            return "Your POST request";
        }

        #endregion
    }
} 
```

和服务代码：

```
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Web.Script.Services;

namespace RestService
{

    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [ScriptMethod]
        [WebInvoke(Method = "POST",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Bare,
            UriTemplate = "export")]
        string JSONData();
    }
} 
```

最后是配置：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">
        <endpoint address ="" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <httpProtocol>
      <customHeaders>
         <add name="Access-Control-Allow-Origin" value="*" />
      </customHeaders>
</httpProtocol>  
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-09-25T13:46:03.800

这对我来说比 Web.config 版本更好：

创建一个`Global.asax`

将此方法添加到`Global.asax.cs`：

```
using System.Web;

namespace StackOverflow
{
    public class Global : System.Web.HttpApplication
    {
        protected void Application_BeginRequest(object sender, EventArgs e)
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
            if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
            {
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
                HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
                HttpContext.Current.Response.End();
            }
        }
    }
} 
```

参考： http: [//www.dotnet-tricks.com/Tutorial/wcf/X8QN260412-Calling-Cross-Domain-WCF-Service-using-Jquery.html](http://www.dotnet-tricks.com/Tutorial/wcf/X8QN260412-Calling-Cross-Domain-WCF-Service-using-Jquery.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-18T14:25:44.957

将这些节点添加到您的 Web.config：

```
<configuration>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*"/>
        <add name="Access-Control-Allow-Headers" value="Content-Type, Accept" />
        <add name="Access-Control-Allow-Methods" value="POST,GET,OPTIONS" />
        <add name="Access-Control-Max-Age" value="1728000" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>
</configuration> 
```

参考：[http ://theagilecoder.wordpress.com/2014/07/07/wcf-and-cors-no-access-control-allow-origin-header-is-present-on-the-requested-resource/](http://theagilecoder.wordpress.com/2014/07/07/wcf-and-cors-no-access-control-allow-origin-header-is-present-on-the-requested-resource/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-27T03:12:32.643

为非 GET 请求启用 CORS 不仅需要设置`Access-Control-Allow-Origin`标头 - 它还需要处理*预检*请求，这些`OPTIONS`请求会询问服务器是否可以安全地执行可能更改数据的操作（例如，POST、PUT、DELETE ) 在发送实际请求之前。

我写了一篇关于为 WCF 添加 CORS 支持的博客文章。这不是最简单的实现，但希望帖子中的代码可以简单地复制/粘贴到您的项目中。该帖子可在[http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf.aspx)找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T02:16:31.933

下面的 .NET 代码 (global.asax) 有一个重要的区别，即代替 *，回显 Origin 域可能会更好，因为这可以通过 CORS（例如 NTLM / Kerberos）以及 Preflight 进行身份验证。

```
void Application_BeginRequest(object sender, EventArgs e)
{
    if (Request.HttpMethod == "OPTIONS")
    {
        Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
        Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
        Response.AddHeader("Access-Control-Max-Age", "1728000");
        Response.End();
    }
    else
    {
        Response.AddHeader("Access-Control-Allow-Credentials", "true");

        if (Request.Headers["Origin"] != null)
            Response.AddHeader("Access-Control-Allow-Origin" , Request.Headers["Origin"]);
        else
            Response.AddHeader("Access-Control-Allow-Origin" , "*");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-08T21:43:07.347

上述所有解决方案都修改了 CORS 响应，以允许使用 * 属性启用所有站点的 CORS。这对我来说似乎是一个安全风险，因为我想控制哪些站点可以访问我的 REST 服务。我希望这可以帮助其他人解决相同类型的问题。

我首先通过使用允许将字符串数组存储在 MySettings 中的 SpecializedString 集合来修改 web.config 文件以包含我允许的源站点。该代码位于 VB.Net 中，因此如果需要，应该可以轻松移植到 c#。

```
<applicationSettings>
    <YourService.My.MySettings>
        <setting name="AllowedOrigins" serializeAs="Xml">
            <value>
                <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                    <string>http://localhost:62087</string>
                    <string>https://yourallowedorign2:3344</string>
                </ArrayOfString>
            </value>
        </setting>
    </YourService.My.MySettings>
</applicationSettings> 
```

并且在 Global.asax.vb 文件中，我对 Application_BeginRequest 代码做了如下调整。

注意获取 Allowed Origins 的支持函数

```
Private allowedOrigins As String()

Public Function GetAllowedOrigins() As String()
    Dim mySetting As StringCollection = My.Settings.AllowedOrigins

    If mySetting IsNot Nothing Then
        ' If you're using .NET 3.5 or greater:
        Return mySetting.Cast(Of String)().ToArray()

        ' Otherwise:
        Dim array(mySetting.Count - 1) As String
        mySetting.CopyTo(array, 0)

        Return array
    Else
        Dim strEmpty() As String = Enumerable.Empty(Of String).ToArray
        Return strEmpty
    End If
End Function

Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
    ' Fires at the beginning of each request
    Dim origin As String = sender.Request.Headers("Origin")
    If origin IsNot Nothing Then
        Dim originURI As Uri = New Uri(origin)
        Dim requestHost As String = originURI.Scheme + Uri.SchemeDelimiter + originURI.Host
        If originURI.Port <> 80 Then
            requestHost += ":" + originURI.Port.ToString
        End If

        If allowedOrigins Is Nothing Then
            allowedOrigins = GetAllowedOrigins()
        End If
        If allowedOrigins IsNot Nothing AndAlso allowedOrigins.Contains(requestHost) Then
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", requestHost)
            If HttpContext.Current.Request.HttpMethod = "OPTIONS" Then
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE")
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept, X-Requested-With")
                HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000")
                HttpContext.Current.Response.End()
            End If
        End If
    End If

End Sub 
```

我发现的另一个警告是我需要在 Access-Control-Allow-Headers 标头中添加 X-Requested-With 值。如果您收到 CORS 错误，请先检查该标头以查看是否需要其他选项。

我希望这有助于其他可能对这个太常见的问题感到沮丧的人。

# ada - 如何添加ahven框架

> ID：14047756
> 
> 赞同：1
> 
> 时间：2012-12-26T23:57:32.030
> 
> 标签：ada, gnat

我刚刚安装了 ahven，但是如果我用 Ahven.Framework 编译一个测试程序，我总是得到一个编译器错误：

```
file "ahven.ads" not found 
```

我的 ahven 文件就在这里：

```
/opt/ada/include/ahven/ahven.ads
/usr/share/ada/adainclude/ahven/ahven.ads 
```

我怎样才能告诉 gnat 在哪里搜索？

编辑：我在 Linux 上使用 gnatmake，没有任何项目文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:52:02.680

有一个 ahven.gpr 文件，它应该处理依赖关系。找到该文件的放置位置，然后在项目的 .gpr 文件中添加对它的引用，或者如果您使用的是 gps IDE，右键单击项目名称，选择 Project/Dependencies，然后执行“添加从文件”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:24:01.600

**假设**您使用的是*gnatmake* **和**基于*unix/linux*的系统，您需要为您的 gnatmake 命令添加路径。要查找如何执行此类型`gnatmake`并在随后的帮助屏幕中查找`-I`选项。我不确定您的哪个目录适合包括在内。这应该在您的 ahven 文档中找到。

# php - php 操作码缓存 (apc) 如何处理特定于会话的变量？

> ID：14047760
> 
> 赞同：0
> 
> 时间：2012-12-26T23:58:08.940
> 
> 标签：php, caching, apc, opcode

着眼于使用 php 和操作码缓存创建我的第一个 Web 应用程序。

我模糊地理解为什么它在理论上是有益的。

但是，在实践中 - apc 如何处理从会话特定变量编译的操作码？如果缓存了一个页面（比如 somesharedpage.php），如何处理和处理其中的变量（每个用户可能不同）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:59:49.057

简单地说，APC 使用代码而不是数据，因为数据不包含任何操作码。

> 什么时候应该将数据添加到 apc？

理想情况下，您希望使用 等缓存的数据是`apc_fetch()`需要`apd_store()`一些处理时间才能生成的值，而不是简单的“我所有的全局变量”。

# c++ - 我可以在 VS 2010 C++ 项目中使用来自 VS 6.0 的 Dll 吗？

> ID：14047761
> 
> 赞同：1
> 
> 时间：2012-12-26T23:58:12.643
> 
> 标签：c++, visual-studio-2010, dll, visual-c++-6

我不是 C++ 编程专家，我不确定我问的问题是否正确。我有一个 DLL，我必须从中使用一些函数和类型。此 DLL 是在 Microsoft Visual Studio 6.0 中创建的。我有 VS2010，在 VS 2010 C++ 中创建一个新项目并在项目中使用上述 Dll 是一种直接的方法吗？

提前致谢。干杯，CPP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T22:29:54.870

只要 DLL 中的函数调用采用标准 C 类型而不是类，您就可以确定。

如果将 MFC 类传递给 DLL，则您可能不正常，因为类可能从 VC6 更改为 VS2010。

如果将非 MFC 类/结构传递给 DLL，则只要将结构打包到正确的对齐方式，就可以了。

# linker - 为什么 g++ 链接器允许接口更改？

> ID：14047763
> 
> 赞同：0
> 
> 时间：2012-12-26T23:58:18.410
> 
> 标签：linker, g++

考虑以下内容：我有两个类（A，B），它们都使用单个头文件（H）。我将 B 预编译为目标文件，然后将 A 编译为调用 B 中的函数的二进制文件。

我现在在头文件中进行更改，然后重新编译 A。这现在会产生垃圾输出。我的问题是，为什么编译器首先允许这种情况发生？

具体示例如下：

**猫.h**

```
#include <string>
using namespace std;
class cat_bus;

class catStr {
  private:
    string *a;
  public:
    catStr(string *a)
    {
      this->a = a;
    }
    string chars()
    {
      return a->c_str();
    }
};

class cat {
   friend class cat_bus;
   private:
   catStr a;
   //catStr z; //version X +1
   catStr b;
   catStr c;
   catStr d;
   public :
   cat()
   :a(new string("str1")),
    //z(new string("strz")), //version X +1
    b(new string("str2")),
    c(new string("str3")),
    d(new string("str4"))
  {
  }
};

class cat_bus
{
  private:
    cat myCat;
  public:
    string getA()
    {
      return myCat.a.chars();
    }
    string getB()
    {
      return myCat.b.chars();
 }
    string getC()
    {
      return myCat.c.chars();
    }
}; 
```

**用户.cpp**

```
#include <iostream>
#include "cat.h"
using namespace std;

void userLibA()
{
   cat_bus catbus;
   cout <<"\nA:"<< catbus.getA() << "\n";
}

void userLibB()
{
   cat_bus catbus;
   cout << "B:"<< catbus.getB()<<"\n";
}

void userLibC()
{
   cat_bus catbus;
   cout << "C:" <<catbus.getC()<<"\n";
} 
```

**用户.h**

```
void userLibA();

void userLibB();

void userLibC(); 
```

**主文件**

```
#include <iostream>
#include "user.h"
#include "cat.h"
using namespace std;
int main ()
{
  userLibA();
  userLibB();
  userLibC();
  cat_bus catbus;
} 
```

**STEPS** 编译用户：

```
g++ -c user.cpp 
```

编译主要：

```
g++ main.cpp user.o 
```

运行主程序：

```
./a.out 
```

产生：

```
A:str1
B:str2
C:str3 
```

现在取消注释 cat.h 中的注释。重新编译 main 并运行它。现在产生：

```
A:str1
B:strz <<<< This line is garbage
C:str3 
```

在我看来，这是直接访问内存位置，链接器不应该按符号名称吗？

# c# - 如何阻止 webbrowser c# 的对话框

> ID：14047765
> 
> 赞同：-1
> 
> 时间：2012-12-26T23:58:29.187
> 
> 标签：c#, .net, c#-4.0, browser, webbrowser-control

如何阻止网络浏览器的对话框？

在对话框中。我的程序被暂停了......我怎样才能阻止对话框。我可以使用此代码，但它不起作用。

```
 private void webExplorer_NewWindow(object sender, CancelEventArgs e)
    {
        e.Cancel = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:00:17.207

这是一个javascript`alert()`调用。见[这里](http://www.w3schools.com/js/js_popup.asp)。

# git - Git commit 修改时在 Github 出现两次

> ID：14047766
> 
> 赞同：0
> 
> 时间：2012-12-26T23:58:35.983
> 
> 标签：git, github

我有一个提交信息`#1 an old message`

我做了

```
git commit --amend -m '#1 a new message' # to change commit message
git push origin +master:master # to force the update 
```

然后在 Github 问题 #1 中，我看到了两条消息。

这是 git 或 Github 的问题吗？

# python - Django 这段代码中的保存命令在哪里？

> ID：14047773
> 
> 赞同：0
> 
> 时间：2012-12-26T23:59:26.717
> 
> 标签：python, django

我试图在我的计算机上运行这个示例，但是当我重新启动 python 时，令人惊讶的是，创建的民意调查被保存到数据库中，而没有可见的保存语句。

这是代码：

```
>>> from polls.models import Poll, Choice
>>> Poll.objects.all()[0].choice_set.create(choice='Not much', votes=0)
<Choice: Not much> 
```

所以我想知道哪些语句暗示了保存指令？因为如果我这样创建它，它将无法在重新启动后继续存在。

```
>>> c = Choice(choice='Not much3', votes=0)
>>> c.poll_id = 1 
```

我正在创建一个选择，并将外键 poll_id 分配给第一个投票。我知道这不应该持续，因为我没有保存。这是第一个欺骗我的，我假设如果我在关联集中创建它，它还会自动保存，不仅给出正确的外国 ID。

我也是 python 新手，根据我之前在这个问题上的经验，语义似乎有点松散。我希望第一个代码只分配正确的外国 ID，而不是将其保存到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:04:22.760

在 QuerySet 上使用 create() 方法将自动保存对象，如[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#create)中所述。

您可以将其视为有效的 SQL INSERT 语句。

# sql-server-2008 - row_number() 从 #3 开始

> ID：14047776
> 
> 赞同：0
> 
> 时间：2012-12-26T23:59:49.050
> 
> 标签：sql-server-2008, tsql

我正在`B Record`为 IRS 1099 创建一个列表（以防其他人熟悉该过程）。有两个标题记录 ( `T Record and A Record)`，它们是文件的前两行，它们也需要行数，所以当我创建 my 时`B Record`，我希望它从第 3 行开始，因为前两行是固定的，但我无法让它在我的选择语句中工作。

--填充的行号

```
select right('00000000' ++ cast(row_number () over (order by column1) as varchar (10)),8) 
```

- 结果

```
00000001
00000002
00000003
00000004
00000005
00000006 
```

- 想;

```
00000003
00000004
00000005
00000006 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T02:25:36.583

您需要添加的表达式 is not `row_number()`。您需要添加的表达式是`row_number () over (order by column1)`.

```
create table test (
  column1 integer 
  );

insert into test values (1),(2),(3),(4),(5);

select right('00000000' + cast((row_number ()  over (order by column1)) + 2 as varchar (10)),8)
from test; 
```

# ruby-on-rails - 从用户那里获取小时并存储在rails模型+时区中

> ID：14047780
> 
> 赞同：0
> 
> 时间：2012-12-27T00:00:01.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 视图，其中向用户显示了一个下拉列表，显示小时“00:00”、“01:00”等。

一旦用户选择了这个小时，它就会与其他一些字段一起存储在模型中。

我的应用程序在 UTC+2 时区工作（我已设置`config.time_zone = 'Jerusalem'`）。
在从视图到模型的路径上处理这个时间时，我在哪个阶段与时区相关？如果我使用 eg `DateTime.strptime("10:00", "%H:%M").in_time_zone(Time.zone)`，那么我会在 '12:00' 得到一个时间 - 而我真正想要的是数据库以 UTF 存储（这应该是`08:00`当网站的其余部分使用当地时间时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:06:56.613

You can use TZInfo ruby library [http://tzinfo.rubyforge.org](http://tzinfo.rubyforge.org) and convert your time with following method

```
def local_to_utc(date, time_zone)
  begin
    unless time_zone.nil?
      tz = TZInfo::Timezone.get(time_zone)
      return tz.local_to_utc(date)
    end
  rescue 
    return nil
  end
end 
```

# javascript - RequireJS 和 Backbone 入门

> ID：14047783
> 
> 赞同：2
> 
> 时间：2012-12-27T00:00:33.193
> 
> 标签：javascript, backbone.js, requirejs

我是 Backbone 和 Require JS 的新手。

我收到以下错误：

> 无法读取未定义的属性视图。

所以 Backbone 不可用，但我看不出问题出在哪里。任何帮助将非常感激。

我有以下 3 个文件：

### 索引.html：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <script data-main="boot" src="../libs/require/require.js"></script>
  </head>
  <body>
    <div id="main">Magic!</div>
  </body>
</html> 
```

### 引导.js：

> ```
> require.config({
>   baseUrl: "../",
>   paths: {
>       jquery : "libs/jquery/jquery-1.8.3.min",
>       underscore : "libs/underscore/underscore-min",
>       backbone : "libs/backbone/backbone-min"
>   }
> });
> 
> require( [ "app/views/app" ], function(AppView) {
>   var app = new AppView();
> }); 
> ```

### 应用程序.js：

```
define([
    "jquery",
    "underscore",
    "backbone"
    ], function( $, _, Backbone ) {

    var AppView = Backbone.View.extend({
        el: $( "#main" ),
        initialize: function () {
             this.render();
        },
        render: function() {
            this.el.html("huzzah!");
        }
    });
    return AppView;

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T00:27:10.717

您将需要填充主干才能使其与 requirejs 一起使用。

从[RequireJS 文档](http://requirejs.org/docs/api.html#config-shim)：

```
requirejs.config({
    shim: {
        'backbone': {
            //These script dependencies should be loaded before loading
            //backbone.js
            deps: ['underscore', 'jquery'],
            //Once loaded, use the global 'Backbone' as the
            //module value.
            exports: 'Backbone'
        }
    }
}); 
```

# css - 内联 css 背景尺寸封面

> ID：14047784
> 
> 赞同：4
> 
> 时间：2012-12-27T00:00:46.983
> 
> 标签：css

我有以下CSS代码

```
.imgf{
    background: url(/thatscooking/FotoTC/FotoTC/ALWIN01.JPG) no-repeat center center ; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

多数民众赞成在工作，因为它应该现在我需要用 php 更改 img 所以我正在尝试使用内联 css

```
 <div style="background: url(/thatscooking/FotoTC/FotoTC/ALWIN01.JPG) no-repeat center center" 
    style="background-size: cover"
    style="-webkit-background-size: cover" 
    style="-moz-background-size: cover" 
    style="-o-background-size: cover" 
    class="imgf ">
<div id="naamb"><p>Album Naam</p></div></div> 
```

只有现在背景大小的封面不起作用并且没有出现在萤火虫中

我使用内联 css 错了吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-07-29T15:42:15.437

使用此代码，比@RAS 版本更干净：

```
background: url(image.jpg) no-repeat center center / cover; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T00:03:21.740

您需要使用单个`style`标签。

```
<div style="background: url(/thatscooking/FotoTC/FotoTC/ALWIN01.JPG) no-repeat center center;
            background-size: cover;
            -webkit-background-size: cover;
            -moz-background-size: cover; 
            -o-background-size: cover;" 
    class="imgf ">
<div id="naamb"><p>Album Naam</p></div></div> 
```

# ruby-on-rails - Rails 嵌套资源错误数量的参数

> ID：14047789
> 
> 赞同：0
> 
> 时间：2012-12-27T00:01:27.373
> 
> 标签：ruby-on-rails, ruby, routing

我正在尝试找出 Ruby on Rails 路由问题。这是 routes.rb 文件的相关部分：

```
resources :clients do
  resources :campaigns do
    resources :targets do
      member do
        post 'send'
      end
    end
  end
end 
```

`rake routes`包括：

```
send_client_campaign_target POST   /clients/:client_id/campaigns/:campaign_id/targets/:id/send(.:format) targets#send 
```

但是，一个 POST`/clients/1/campaigns/1/targets/30/send`返回以下错误：

```
ArgumentError in TargetsController#send

wrong number of arguments (2 for 0) 
```

错误页面显示参数为：

```
{"client_id"=>"1",
 "campaign_id"=>"1",
 "id"=>"30"} 
```

知道有什么问题吗？我是对的，这是一个路由问题吗？目标控制器中存在 send 方法，但它是一个空的存根方法，并且仍在生成此问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T00:09:46.037

`Object#send`在 Ruby 中定义，在 Rails 框架中被频繁调用。重写此方法是个坏主意。您需要选择其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:18:35.080

接受参数，它只是一个参数错误。您在#send 操作中没有采取任何论据。

# php - Php apc 操作码缓存 - 缓存整个文件与变量

> ID：14047790
> 
> 赞同：2
> 
> 时间：2012-12-27T00:01:28.577
> 
> 标签：php, caching, apc, opcode

是否仅通过使用和启用将整个 php 文件添加到 apc 中？

我了解 fetch 和 store 如何与变量一起工作，但是什么时候应该使用呢？整个文件的缓存是否自动完成？如果一个变量被缓存 - 它应该只是一个全局变量还是一个用户特定的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T00:12:53.037

通常，您应该缓存不需要经常更新但经常*访问的**数据库响应*。这些数据不必来自数据库——也可以来自文件或任何类型的数据存储。关键是从缓存/内存中提供最流行的东西，以避免代价高昂的[i/o](http://en.wikipedia.org/wiki/Input/output)。

 *[看看这个答案](https://stackoverflow.com/questions/1462447/basics-of-php-opcode-cache)以获得对操作码缓存的一个很好的解释。操作码缓存基本上只是将您的 PHP 文件存储在内存中，以便在运行时可以更快地解释它。

APC 会自动工作，并检测文件的更改以查看是否需要重新缓存。引用上面的答案：

> apc.stat 选项定义 APC 是否应该检查文件的最后修改日期/时间，以决定是使用 RAM 中的操作码，还是重新编译文件（如果它比 RAM 中的操作码更新）。

此外，要回答您的*全球*与*用户特定*问题。这一切都取决于曝光，你应该缓存任何曝光量大的东西。但一般而言，特定于用户的数据的曝光率低于全球数据。*

# silverlight - 在后面的代码中设置 ItemTemplate 不会刷新显示

> ID：14047791
> 
> 赞同：1
> 
> 时间：2012-12-27T00:01:31.400
> 
> 标签：silverlight, windows-phone-7

我有一个 ListBox，它根据用户选择的详细信息级别显示更多或更少的数据。ListBox`ItemsSource`在 XAML 中有一个动态集：

```
ItemsSource="{Binding Items}" 
```

并且它的默认`ItemTemplate`设置是使用

```
ItemTemplate="{StaticResource FewDetails}" 
```

在我使用的代码后面

```
MyListBox.ItemTemplate = this.Resources["LotsOfDetails"] as DataTemplate 
```

但列表框不刷新。

我发现完成这项工作的唯一方法是使用 a`CollectionViewSource`作为我的 ItemsSource，并使用`View.Refresh()`.

任何想法为什么简单的解决方案不起作用？

# javascript - 使用 jquery 定位特定的 Javascript 对象文字字段和数组

> ID：14047794
> 
> 赞同：2
> 
> 时间：2012-12-27T00:01:45.537
> 
> 标签：javascript, jquery

我似乎无法让它工作。我试图做两件事

一种）。获取以下代码以正确显示。第一个元素是 show 'undefined

```
<ul>
<li>Button
<ul>
 <li>x:1</li>
 <li>y:2</li>
 <li>width:3</li>
 <li>height:4</li>
</ul>
</ul> 
```

这是我的代码：

```
$(document).ready(function() {
var data = {
    "Controls": [{
            "Button":[{ "x": "1","y": "2","width": "3","height": "4" }],

            "Image":[{"x": "5","y": "6","width": "7","height": "8"}],

            "TextField":[{"x": "9","y": "10","width": "11","height": "12"}]
        }]
}

var str = '<ul>';
$.each(data.Controls, function(k, v) {
    str += '<li>' + k[0] + '</li><ul>';
    for(var kk in v.Button[0]){
        str += '<li>' + kk + ':' + v.Button[0][kk] + '</li>';
    }
    str += '</ul>';
});
str += '</ul>';
$('div').append(str);
}) 
```

和

乙）。试图仅显示字段的列表（与上面的单独列表）。像这样：

```
<li>Button</li>
<li>Image</li>
<li>TextField</li> 
```

我认为第二个的答案在于第一个，但我似乎无法正确定位。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:07:06.103

**[演示](http://jsfiddle.net/R2c4k/2/)**

获取第一个列表：

```
var str = '<ul>';
var target = "Button";

str += '<li>' + target + '<ul>';
$.each(data.Controls[0][target][0], function(kk, vv){
    str += '<li>' + kk + ':' + vv + '</li>';
});
str += '</ul></li>';

str += '</ul>'; 
```

要获得第二个列表：

```
var str = '<ul>';
$.each(data.Controls[0], function(k,v) {
    str += '<li>' + k + '</li>';
});
str += '</ul>'; 
```

要按索引定位它们，`Button`如下所示`0`：

```
var str = '<ul>';
var target = 0;
var count = 0;

$.each(data.Controls[0], function(k,v) {
    if(count == target)
    {
        str += '<li>' + k + '<ul>';

        $.each(v[0], function(kk, vv){
            str += '<li>' + kk + ':' + vv + '</li>';
        });
        str += '</ul></li>';
        return false; // <-- break because we got what we wanted
    }
    count++;
});

str += '</ul>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:41:43.537

首先，这与 JSON 无关。JSON 是一种字符串序列化格式。您在这里拥有的是一个对象文字。

其次，我不知道你为什么用数组将所有对象定义包装在控件中，这似乎很麻烦。您也在以非常非 jQuery 的方式做事。

你可以尝试这样的事情：

```
var data = {
    "Controls": {
            "Button":{ "x": "1","y": "2","width": "3","height": "4" },

            "Image":{"x": "5","y": "6","width": "7","height": "8"},

            "TextField":{"x": "9","y": "10","width": "11","height": "12"}
        }
}

$('div').append('<ul id="outer_ul">');
$.each(data.Controls, function(key, value) {
    $('#outer_ul').append('<li>' + key + '</li>', '<ul id="' + key +'">');
    $('#field_list').append('<li>' + key + '</li>');
    $.each(value, function(key2, value2) {
        $('#' + key).append('<li>' + key2 + ':' + value2 + '</li>');
    }
} 
```

这段代码填充了你`div`和 a `ul`，其中的 id`field_list`代表你想要放入第二个列表的容器（所以根据你想要使用的正确的 jQuery 选择器调整这段代码。

# java - java: Sleep until website is fully loaded

> ID：14047797
> 
> 赞同：4
> 
> 时间：2012-12-27T00:02:26.690
> 
> 标签：java, selenium, web, webdriver

I want to open a website with selenium and extract some text via xpath. It's working but I can get the text only if I wait a few seconds until the whole website is loaded, but it would be nicer to check if the website is fully loaded. I guess I should check for any background connections (ajax calls, GETs, POSTs or whatever), what is the best way to do it? At the moment I'm trying to extract the text in a while loop (ugly solution):

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.website.com");

// Try to get text
 while (true) {
   try {
     WebElement findElement = driver.findElement(By.xpath("expression-here"));
     System.out.println(findElement.getText());
     break;
// If there is no text sleep one second and try again
   } catch (org.openqa.selenium.NoSuchElementException e) {
     System.out.println("Waiting...");
     Thread.sleep(1000);
   }
 } 
```

How would you solve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T00:08:32.457

Selenium has already timeouts for this.

Look here: [http://seleniumhq.org/docs/04_webdriver_advanced.jsp](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)

I have solve it with:

```
webDriver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:35:57.463

更喜欢显式等待：
1）更具可读性
2）已经使用了很长时间
3）如果您知道该元素不存在（您的测试是验证它）并且不需要轮询 10 秒怎么办？使用隐式你现在正在浪费时间。

```
WebElement myDynamicElement = (new WebDriverWait(driver, 10))
  .until(new ExpectedCondition<WebElement>(){
    @Override
    public WebElement apply(WebDriver d) {
        return d.findElement(By.id("myDynamicElement"));
    }}); 
```

# linux - How does one replace only the three first octects of an IP address in Perl

> ID：14047798
> 
> 赞同：1
> 
> 时间：2012-12-26T12:15:22.543
> 
> 标签：linux, bash, perl, shell, regex

My target is to replace only the three first digits in IP address with new IP address For example

```
 NEW three first three digits – 17.100.10
 OLD three first three digits - 12.200.10 
 Existing IP address in file  - 12.200.10.2 
```

Then I will get the new IP as **17.100.10.2**

So I write the following Perl command in order to perform the replace action

But the problem is that if the NEW IP matches the three last digits then it will replace them also

So

What need to change in my Perl command in order to replace only the three first digits in IP address?

Real Example1 that described the problem:

```
export OLD_IP=192.9.1
export NEW_IP=172.192.9 
```

.

```
echo 1.192.9.1 | perl -i -pe 'next if /^ *#/; s/(\b|\D)$ENV{OLD_IP}(\b|\D)/$1$ENV      {NEW_IP}$2/g'  
 1.172.192.9 
```

.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:44:39.520

```
#!/bin/perl

my @ip = split('\.', $old_ip);
$ip[0] = 172;
$ip[1] = 16;
$ip[2] = 0;
$new_ip = join(".", @ip); 
```

**OR**

```
#!/bin/perl

my @ip = split('\.', $old_ip);
$new_ip = '172.16.0.' . $ip[3]; 
```

**OR**

```
s/(\d{1,3}\.){3}(?=(\d+$))/$ENV{new_ip}/ 
```

For the single line, WTF, version; that should drop into your shell script...

```
# export new_ip=172.168.0.
# echo 192.168.5.6 | perl -i pe 's/(\d{1,3}\.){3}(?=(\d+$))/$ENV{new_ip}/'
172.16.0.6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T00:12:00.523

这只是您的代码存在的三个问题之一。另外两个是：

*   您的代码`192.9.100.1`（OLD_IP=192.9.1）更改为`172.192.900.1`（NEW_IP=172.192.9）。

*   您的代码`192.101.1.2`（OLD_IP=192.1.1）更改为`172.192.9.1.2`（NEW_IP=172.192.9）。

解决方案：

```
perl -pe's/(?<![\d.])\Q$ENV{OLD_IP}\E(?=\.\d)/$ENV{NEW_IP}/g' 
```

笔记：

*   `^`会比`(?<![\d.])`IP 地址总是在一行的开头更好。（这`/g`将变得无用。）
*   `(?<!\S)``(?<![\d.])`如果 IP 地址总是以空格、制表符开头或总是在行首找到，那会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:13:58.027

如果每个 IP 地址都出现在自己的一行中，这很容易：

```
s/^\Q$ENV{OLD_IP}\E/$ENV{NEW_IP}/mg 
```

如果没有，您可以使用否定的lookbehind断言：

```
s/(?<![\d.])\Q$ENV{OLD_IP}\E/$ENV{NEW_IP}/g 
```

这将匹配并替换 中给出的字符串`OLD_IP`，除非它跟在数字或句点之后。

**编辑：**要解决 ikegami 指出的问题，您还应该确保匹配的字符串后面没有数字：

```
s/(?<![\d.])\Q$ENV{OLD_IP}\E(?!\d)/$ENV{NEW_IP}/g 
```

与 ikegami 的解决方案不同，这适用于任意数量的八位字节，而不仅仅是三个或更少。

# jquery - jQuery：鼠标移动事件 - 在元素内左，右

> ID：14047801
> 
> 赞同：4
> 
> 时间：2012-12-27T00:02:37.560
> 
> 标签：jquery

我想获得一个 div 的鼠标坐标，如下所示：

```
$("#box").mousemove(function(e){
var x = e.pageX - this.offsetLeft;
var y = e.pageY - this.offsetTop;

document.getElementById("coords").innerHTML = x + ", " + y; }); 
```

但我也希望能够判断光标是向左还是向右移动；我知道我只需要将当前鼠标位置与之前的鼠标位置进行比较，但在这种情况下我不知道该怎么做。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T00:08:14.527

获取鼠标位置的jquery代码如下

```
jQuery(document).ready(function(){

   $(document).mousemove(function(e){
      $('#status').html(e.pageX +', '+ e.pageY);
   }); 
}) 
```

显然你必须有一个名为“状态”的 div

```
<div id="status">0, 0</div> 
```

要检查光标是向左移动还是向右移动，您必须存储前一个位置，然后将其与新位置进行比较。

在这里，我给你写了完整的例子：

[http://jsfiddle.net/cB9Wq/](http://jsfiddle.net/cB9Wq/)

*_* **编辑：**

如果您需要获取 div 内的坐标，您还需要知道 div 的位置：

```
$(".div_container").mousemove(function(e){
        var relativeXPosition = (e.pageX - this.offsetLeft); //offset -> method allows you to retrieve the current position of an element 'relative' to the document
        var relativeYPosition = (e.pageY - this.offsetTop);
        $("#header").html("<p><strong>X-Position: </strong>"+relativeXPosition+" | <strong>Y-Position: </strong>"+relativeYPosition+"</p>")
    }).mouseout(function(){
        $("#header").html("<p>Move mouse on the below blue div container! :)</p>")
    }); 
```

为了检查鼠标是向左还是向右，我使用了这个语法：

```
xPrev<e.pageX ? $('#lr').html("right") : $('#lr').html("left");
xPrev=e.pageX; 
```

注意：这相当于：

```
if(xPrev<e.pageX) { 
   $('#lr').html("right"); 
}
else {
   $('#lr').html("left"); 
}
xPrev=e.pageX; 
```

这里有工作示例：http: [//jsfiddle.net/cB9Wq/2/](http://jsfiddle.net/cB9Wq/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-08T10:03:43.353

**您可以使用以下解决方案：**

```
var plotSliderLastPostion = 0; //Placed outside the scope of function (fxp like private member)

slider.addEventListener(EVENT.MOUSE_MOVE, function(e){
var relativePlotBoxPositionX = e.clientX - rect.left;
 //CHECK THAT CURSOR IS MOVING RIGHT OR LEFT
                    if(relativePlotBoxPositionX > plotSliderLastPostion) {
                        console.log("right");
                        plotSliderLastPostion = relativePlotBoxPositionX;
                    }
                    else {
                        console.log("left");
                        plotSliderLastPostion = relativePlotBoxPositionX;
                    }
  }, true); 
```

# c - How to check amount of data available for a socket in C and Linux

> ID：14047802
> 
> 赞同：36
> 
> 时间：2012-12-27T00:02:53.960
> 
> 标签：c, linux, sockets

I have a server that receives a continuous stream of data. As opposed to reading multiple times from a socket, I would like to read the entire data in socket receive buffer with one system call to `read()`.

Of course I can pass a large buffer and `read()` will try to fill it with all available data. But this would waste a lot of memory as most of the times the malloc'ed buffer would be bigger than actual data available on socket. Is there a way to query the available data on a socket?

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-27T21:55:01.330

是的：

```
#include <sys/ioctl.h>

...

int count;
ioctl(fd, FIONREAD, &count); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T00:06:38.897

No, there is not. Even if there were a way to do this, any answer you get would be immediately out of date (because new data may arrive at any time).

Note that when you pass a buffer to `read()`, the function will return when there is *any* amount of data to read (at least one byte), instead of waiting for the buffer to completely fill.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T01:34:08.803

您可以使用[Non-bloking sockets](http://www.kegel.com/dkftpbench/nonblocking.html)或 select()/poll() 。我更喜欢非阻塞套接字，因为我可以在等待新数据的同时做其他事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T02:08:22.513

这是一个“有点”的答案：`recv(char* buffer, size_t nytes, int flags)`其中 flags 与：

```
MSG_PEEK
This flag causes the receive operation to return data from the beginning of the receive queue without removing that data from the queue. Thus, a subsequent receive call will return the same data. 
```

这样您就可以查看缓冲区中是否存在任意数量的字节，而不会不可逆地读取缓冲区。这是一个半答案，因为它不是最有效的方法，并且当消息具有已知长度的标头时通常使用 MSG_PEEK 可能如下所示：

```
000123DT001 
```

其中`00123`是包括标头在内的整个消息的长度，是消息`DT`的类型，并且`001`是发送方的重试次数。这个想法是你可以获取一些东西，告诉你有多少字节可以完整读取一条消息。您对消息不感兴趣。但这就是背后的原因`MSG_PEEK`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T16:11:34.943

您必须尝试发送和接收命令，并且能够逐个字符地在套接字中读取和写入，这样就不会浪费内存，甚至可以更好地进行通信。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T09:44:06.377

我认为您正在尝试通过单个系统调用来获取许多数据包，以减少系统调用造成的开销。

所以你可以尝试**Linux 2.4 或 2.6+ 内核的 PACKET 套接字接口**试试这个[http://lxr.free-electrons.com/source/Documentation/networking/packet_mmap.txt](http://lxr.free-electrons.com/source/Documentation/networking/packet_mmap.txt)

# javascript - JS 定义属性和原型

> ID：14047809
> 
> 赞同：35
> 
> 时间：2012-12-27T00:03:53.290
> 
> 标签：javascript, prototype, defineproperty

如您所知，我们可以在 JS 中使用`defineProperty()`. 尝试使用`defineProperty()`.

这是一个示例代码：

我有一个必须添加到对象的字段数组

```
fields = ["id", "name", "last_login"] 
```

我也有一堂课会被修改

```
var User = (function(){
    // constructor
    function User(id, name){
        this.id     = id
        this.name   = name
    }
    return User;
})(); 
```

以及一个将字段添加到类的函数`defineProperty()`

```
var define_fields = function (fields){
    fields.forEach(function(field_name){
        var value = null
        Object.defineProperty(User.prototype, field_name, {
            get: function(){ return value }
            set: function(new_value){
                /* some business logic goes here */
                value = new_value
            }
        })
    })
}; 
```

运行后，`define_fields()`我在实例中有我的字段`User`

```
define_fields(fields);
user1 = new User(1, "Thomas")
user2 = new User(2, "John") 
```

但是这些属性的值是相同的

```
console.log(user2.id, user2.name) // 2, John
console.log(user1.id, user1.name) // 2, John 
```

`defineProperty()`在这种情况下有什么办法可以正常工作吗？如果我理解问题是`value`哪个类的每个实例都相同，但我不知道如何解决它。提前感谢您的回答。

**UPD：** 这种方式抛出“RangeError：超出最大调用堆栈大小”

```
var define_fields = function (fields){
    fields.forEach(function(field_name){
        Object.defineProperty(User.prototype, field_name, {
            get: function(){ return this[field_name] }
            set: function(new_value){
                /* some business logic goes here */
                this[field_name] = new_value
            }
        })
    })
}; 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-10-03T14:48:26.690

请不要实现任何其他版本，因为它会占用您应用程序中的所有内存：

```
var Player = function(){this.__gold = 0};

Player.prototype = {

    get gold(){
        return this.__gold * 2;
    },

    set gold(gold){
        this.__gold = gold;
    },
};

var p = new Player();
p.gold = 2;
alert(p.gold); // 4 
```

如果实例化 10000 个对象：

*   使用我的方法：内存中只有两个函数；
*   使用其他方法：10000 * 2 = 20000 个函数在内存中；

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-27T11:18:04.597

在他回答三分钟后，我得出了与[Mikhail Kraynov](https://stackoverflow.com/users/1931738/mikhail-kraynov)相同的结论。每次调用构造函数时，该解决方案都会定义新属性。我想知道，正如你所问的，是否有一种方法可以将 getter 和 setter 放入原型中。这是我想出的：

```
var User = (function () {
  function User (id, nam) {
    Object.defineProperty (this, '__',  // Define property for field values   
       { value: {} });

    this.id = id;
    this.nam = nam;
  }

  (function define_fields (fields){
    fields.forEach (function (field_name) {
      Object.defineProperty (User.prototype, field_name, {
        get: function () { return this.__ [field_name]; },
        set: function (new_value) {
               // some business logic goes here 
               this.__[field_name] = new_value;
             }
      });
    });
  }) (fields);

  return User;
}) (); 
```

在这个解决方案中，我在原型中定义了字段 getter 和 setter，但在每个保存字段值的实例中引用了一个（隐藏的）属性。

在这里查看小提琴：http: [//jsfiddle.net/Ca7yq](http://jsfiddle.net/Ca7yq)

我在小提琴中添加了更多代码以显示对属性枚举的一些影响：http: [//jsfiddle.net/Ca7yq/1/](http://jsfiddle.net/Ca7yq/1/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-27T09:40:21.830

在我看来，当您为原型定义属性时，所有实例都共享该属性。所以正确的变体可能是

```
var User = (function(){
// constructor
function User(id, name){
    this.id     = id
    this.name   = name

    Object.defineProperty(this, "name", {
        get: function(){ return name },
        set: function(new_value){
            //Some business logic, upperCase, for example
            new_value = new_value.toUpperCase();
            name = new_value
        }
    })
}
return User;
})(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-27T11:16:49.417

*当您在所有用户实例的原型*对象上定义属性时，所有这些对象将共享同一个`value`变量。如果这不是您想要的，您将需要分别调用`defineFields`每个用户实例 - 在构造函数中：

```
function User(id, name){
    this.define_fields(["name", "id"]);
    this.id     = id
    this.name   = name
}
User.prototype.define_fields = function(fields) {
    var user = this;
    fields.forEach(function(field_name) {
        var value;
        Object.defineProperty(user, field_name, {
            get: function(){ return value; },
            set: function(new_value){
                /* some business logic goes here */
                value = new_value;
            }
        });
    });
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-29T19:53:29.727

此解决方案没有额外的内存消耗。您更新的代码已接近。你只需要使用 this.props[field_name] 而不是直接使用 this[field_name]。

请注意，defineProperty 调用替换为 Object.create

Js 小提琴[http://jsfiddle.net/amuzalevskyi/65hnpad8/](http://jsfiddle.net/amuzalevskyi/65hnpad8/)

```
// util
function createFieldDeclaration(fields) {
    var decl = {};
    for (var i = 0; i < fields.length; i++) {
        (function(fieldName) {
            decl[fieldName] = {
                get: function () {
                    return this.props[fieldName];
                },
                set: function (value) {
                    this.props[fieldName] = value;
                }
            }
        })(fields[i]);
    }
    return decl;
}

// class definition
function User(id, name) {
    this.props = {};
    this.id = id;
    this.name = name;
}
User.prototype = Object.create(Object.prototype, createFieldDeclaration(['id','name']));

// tests
var Alex = new User(0, 'Alex'),
    Andrey = new User(1, 'Andrey');

document.write(Alex.name + '<br/>'); // Alex
document.write(Andrey.name + '<br/>'); // Andrey

Alex.name = "Alexander";
document.write(Alex.name + '<br/>'); // Alexander
document.write(Andrey.name + '<br/>'); //Andrey 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-21T17:05:21.800

从接受的答案中，我意识到我们在这里要做的是定义**私有实例变量**。这些变量应该在实例（this）上，而不是在原型对象上。通常我们通过在属性名称前加上下划线来命名私有变量。

```
var Vehicle = {};
Object.defineProperty(Vehicle, "make", {
    get: function() { return this._make; }
    set: function(value) { this._make = value; }
});

function Car(m) { this.make = m; }    //this will set the private var _make
Car.prototype = Vehicle; 
```

接受的答案基本上将所有私有变量放在一个容器中，这实际上更好。

# java - kSOAP2：在 Java 中将 anyType 转换为 complexType

> ID：14047811
> 
> 赞同：0
> 
> 时间：2012-12-27T00:04:07.207
> 
> 标签：java, web-services, ksoap2

我有一个网络服务，我正在使用 kSOAP2 发送请求并从此网络服务获取响应。我制作了类实现`KvmSerializable`以将 complexTypes 发送到 Web 服务，但是当我收到响应时，我无法将其转换为我的 complexType。例如：我得到'anyType'，我想将它转换为我的类'User'，但后来我得到一个`ClassCastException`

> 无法将 SoapObject 转换为 User 类。

有什么办法吗？

感谢您在这种情况下的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:11:48.003

您必须使用 Soap 信封注册您的课程，如下所示：

```
 envelope.addMapping(NAMESPACE, "user", User.class); 
```

检查[这个对我有用的答案](https://stackoverflow.com/a/12912334/719212)。

# google-apps-script - copyValuesToRange 同一行

> ID：14047814
> 
> 赞同：3
> 
> 时间：2012-12-27T00:04:56.107
> 
> 标签：google-apps-script, google-sheets

我想制作一个小脚本，将公式获得的所有行值复制到没有公式的同一行。

我正在尝试`copyValuesToRange`在同一条线上使用。（我会得到在某条线上计算的值，我会将它们与那些相同的值重叠，不含公式）。

一点语境化……我正在对游戏的价值进行一种记录/预测。在同一张纸上，我有过去的记录、今天的记录和即将发生的价值。

为了获得这些值，工作表每行执行一些计算，但我希望它只计算尚未发生的值。因此，每天，工作表都应执行清除前一天公式的操作。为此，我尝试执行以下操作：

```
function example(oRow){

    var app = SpreadsheetApp.getActiveSpreadsheet();
    var sheetRecord = app.getSheetByName("Record");

    sheetRecord.getRange(oRow-1,1,1,18)
      .copyValuesToRange(sheetRecord,1,18,oRow-1,oRow-1);
} 
```

oRow 是我希望此操作发生的行的行号。

这要么什么都不做，要么仍然将公式复制到相同的单元格中。

我确定这是我想念的一些愚蠢的小东西，但我不能指望它。

我怎样才能解决这个问题？或者有没有更简单的方法来做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:47:28.380

我上面在问题上显示的函数 getRange() 和 copyValuesToRange() 的参数放错了位置。

功能是：

```
getRange(row, column, optNumRows, optNumColumns)

copyValuesToRange(sheet, startColumn, endColumn, startRow, endRow) 
```

因此，如果我想将例如第 9 行的值从第 1 列复制到第 15 列（“A9:P9”）到同一行，我必须执行以下操作：

```
sheetRecord.getRange(oRow-1,1,1,18).copyValuesToRange(sheetRecord,1,18,oRow-1,oRow-1); 
```

而不是上面的问题。

# jquery-mobile - jQuery Mobile: Partial page view

> ID：14047816
> 
> 赞同：1
> 
> 时间：2012-12-27T00:05:25.990
> 
> 标签：jquery-mobile

jQuery Mobile is excellent when it comes to managing pages and page transitions, but does anyone know of a good way to produce partial page views (preferably in response to a swipe event)? For example, the user performs a right swipe to reveal a hidden menu similar to the Facebook app.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:39:52.843

jQuery Mobile v1.3 侧面板。测试版应该很快就会发布（一月？）。

[http://jquerymobile.com/branches/slide-panel-refactor/docs/panels/index.html](http://jquerymobile.com/branches/slide-panel-refactor/docs/panels/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:59:33.777

是的，有一个为 jQuery Mobile 创建的 facebook 幻灯片菜单的工作插件。

你可以在这里找到它：[https ://github.com/tegansnyder/JQuery-Mobile-Slide-Menu](https://github.com/tegansnyder/JQuery-Mobile-Slide-Menu)

这是一个例子：[http ://www.tegdesign.com/tegansnyder-JQuery-Mobile-Slide-Menu/](http://www.tegdesign.com/tegansnyder-JQuery-Mobile-Slide-Menu/)

它适用于滑动事件，也可以由点击事件触发。

您可以使用此插件/示例来创建局部视图组件。

# google-app-engine - Moving a Web app to Google App Engine. is it right?

> ID：14047817
> 
> 赞同：0
> 
> 时间：2012-12-27T00:05:34.197
> 
> 标签：google-app-engine

I am building a Web App using Codeigniter and MySQL and completed most of the part.

But then i encounter with Google App Engine that offer great features like one dont have to worry about scalability and infrastructure.

Now i was thinking of Hosting it on Google app Engine rather than on a Dedicated Server.

Before asking a question i want to make a few points.

1.  It will consume time as i have to rewrite the code in Django(Yes i can use quercus but i think there will be some performance issue).
2.  I read some other answers saying that "GAE better if your site is 'Huge'". this app could be but for now its not "HUGE".
3.  i am developing the App by my own so it could be better since i dont have to worry about Scaling and all... i can concentrate more on Logic Part.
4.  Final solution would be wait for app's eligibility criteria("Huge") and then Port it in to App engine.

So is it better idea to build a Web App on GAE with Datastore or should i use a Traditional Server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:32:39.780

如果可扩展性和基础架构让您考虑使用 Google appengine，但您的项目已经开始使用 PHP+MySQL 进行开发，那么也许您应该看看 Appengine 的其他 IaaS 替代品，例如 Appfog 和 Dotcloud（这两个提供免费层，就像 appengine 一样）其他的，因为它们提供了更广泛的运行时环境（包括 php）和各种数据库后端，例如 MySQL。这样您就不必移植任何代码。

[http://www.appfog.com](http://www.appfog.com) http://www.dotcloud.com

# html - 后续兄弟节点与当前 xslt/xpath

> ID：14047820
> 
> 赞同：1
> 
> 时间：2012-12-27T00:06:07.843
> 
> 标签：html, css, xml, xslt, xpath

我需要选择所有奇数位置元素并将它们放在左浮动 div 中，并将所有偶数元素放在右浮动 div 中，如下所示：

```
<rows>
  <row title="A" />
  <row title="B" />
  <row title="C" />
  <row title="D" />
  <row title="E" />
  <row title="F" />
</rows> 
```

==================变换为===>

```
A-----B
C-----D
E-----F 
```

我正在使用以下 xsl：

```
 <div class="content-left" style="width:250px; float:left;"> 
    <span class="NewsHeading">
    <h4><xsl:value-of select="@Title"/></h4>
    </span> 
    </div> 
    <div class="content-right" style="float:right"> 
    <span class="NewsHeading">
    <h4><xsl:value-of select="following-sibling::*[1]/@Title"/></h4>
    </span> 
</div> 
```

但我的 XSLT 产生以下内容：

```
A----B
B----C
C----D
D----E
E----F 
```

如何使第二行从第一行的follow-sibling 的following 兄弟开始？

听起来有点奇怪..基本上我只是不想重复..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:16:05.573

您可能在某处有一个 'xsl:for-each select="rows/row"' 元素？

然后只需将其替换为

```
<xsl:for-each select="rows/row[position() mod 2 = 1]"> 
```

仅将模板应用于每隔一行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:34:21.523

**这是一个完整的解决方案：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <div class="content-carousel">
     <ul class="bjqs">
      <xsl:apply-templates select="*[position() mod 2 =1]"/>
     </ul>
   </div>
 </xsl:template>

 <xsl:template match="row">
   <li>
     <div class="content-left">
        <h4><xsl:value-of select="@title"/></h4>
     </div>
       <div class="content-right">
         <h4><xsl:value-of select="following-sibling::*[1]/@title"/></h4>
       </div>
  </li>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<rows>
  <row title="A" />
  <row title="B" />
  <row title="C" />
  <row title="D" />
  <row title="E" />
  <row title="F" />
</rows> 
```

**产生了想要的正确结果：**

```
<div class="content-carousel">
   <ul class="bjqs">
      <li>
         <div class="content-left">
            <h4>A</h4>
         </div>
         <div class="content-right">
            <h4>B</h4>
         </div>
      </li>
      <li>
         <div class="content-left">
            <h4>C</h4>
         </div>
         <div class="content-right">
            <h4>D</h4>
         </div>
      </li>
      <li>
         <div class="content-left">
            <h4>E</h4>
         </div>
         <div class="content-right">
            <h4>F</h4>
         </div>
      </li>
   </ul>
</div> 
```

# winforms - Getting VB.NET line numbers in stack trace

> ID：14047821
> 
> 赞同：11
> 
> 时间：2012-12-27T00:06:10.020
> 
> 标签：winforms, stack-trace, vb.net-2010

I have a VB.NET 2010 Winforms application where I'd like to include line numbers in the stack trace. I've read the following question and answers:

[how to print out line number during application run in VB.net](https://stackoverflow.com/questions/5817796/how-to-print-out-line-number-during-application-run-in-vb-net)

Which mentions "you always need to include the PDB file with your code, which contains debugging information that is used in situations like this". Under advanced compiler settings I've tried "Generate debug info" as "pdb-only" and "full" for my release build and confirmed that a fresh PDB file is generated in the same directory as my EXE. However the following test code generates a line number of zero for each stack frame and doesn't return a filename:

```
 Dim st As StackTrace = New StackTrace(ex)
    For Each sf As StackFrame In st.GetFrames
        MsgBox("Line " & sf.GetFileLineNumber() & sf.GetFileName)
    Next 
```

However the following code straight after it generates an otherwise good looking stack trace so it doesn't seem to be a problem with the exception handler in general:

```
ExceptionDetails.Text = ex.GetType.ToString & "(0x" & hr.ToString("X8") & "): " & ex.Message & vbCrLf & ex.StackTrace 
```

I can't seem to find any other likely settings under the project configuration and wondered if anyone had ideas on other things that may cause this problem. All the solutions I've found searching here and elsewhere just seem to suggest making sure the PDB is in the same path as the executable.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-11T23:19:07.213

这个问题已经解决了一段时间，但我想我会分享我最近在我的项目中包含的最终工作功能。它返回初始异常信息和该点的完整堆栈跟踪，后跟从堆栈跟踪导致异常的行号和文件名。

```
Public Function GetExceptionInfo(ex As Exception) As String
    Dim Result As String
    Dim hr As Integer = Runtime.InteropServices.Marshal.GetHRForException(ex)
    Result = ex.GetType.ToString & "(0x" & hr.ToString("X8") & "): " & ex.Message & Environment.NewLine & ex.StackTrace & Environment.NewLine
    Dim st As StackTrace = New StackTrace(ex, True)
    For Each sf As StackFrame In st.GetFrames
        If sf.GetFileLineNumber() > 0 Then
            Result &= "Line:" & sf.GetFileLineNumber() & " Filename: " & IO.Path.GetFileName(sf.GetFileName) & Environment.NewLine
        End If
    Next
    Return Result
End Function 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T00:37:16.827

从您正在调用的构造函数的[文档中：](http://msdn.microsoft.com/en-us/library/25h0kw08.aspx)

> StackTrace 是使用调用者的当前线程创建的，不包含文件名、行号或列信息。

尝试使用：

```
Dim st As StackTrace = New StackTrace(ex, True) 
```

相反，它使用[这个构造函数](http://msdn.microsoft.com/en-us/library/dsay49kt.aspx)。第二个构造函数参数描述为：

> true 捕获文件名、行号和列号；否则为假。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T00:39:03.163

尝试使用

```
public StackTrace(Exception e, bool fNeedFileInfo); 
```

构造函数并将 fNeedFileInfo 设置为 true

# mod-rewrite - lighttpd url.rewrite-once += (...) erasing earlier rules?

> ID：14047823
> 
> 赞同：2
> 
> 时间：2012-12-27T00:06:24.977
> 
> 标签：mod-rewrite, lighttpd

In my lighttpd.conf:

```
$HTTP["host"] =~ "^(www\.|foo\.|bar\.)?domain\.com$" {
    url.rewrite-once += (
        "^/favicon.ico$"        => "/images/favicon_cd.ico",
        "^/course/?$"           => "/course/index.php",
        "^/course/([^./]+)$"    => "/course/index.php?w=$1"
    )   
}
...
# don't allow spiders to crawl subdomains
$HTTP["host"] =~ "^(foo\.|bar\.)?domain\.com$" {
   url.rewrite-once += (
       "^/robots.txt$"          => "/robots_nocrawl.txt"
   )
} 
```

We have `www.domain.com` as well as `foo.domain.com` and `bar.domain.com` for specific clients. And plain `domain.com` should work too.

The first set of rewrite rules send `.../course/x` to `.../course/index.php?w=x`. Those work for `domain.com` and `www.domain.com`, but for `foo.domain.com` and `bar.domain.com` the rewrite doesn't work. I can see the rewrite is not happening by turning on lighttpd's debug logging.

If I disable the second block of `rewrite-once` rules that just try to prevent robots crawling `foo.domain.com` and `bar.domain.com` the first set of rewrites will work for all subdomains.

I am pretty sure `url.rewrite-once += (...)` works because I have an earlier set of global rewrite-once rules that are applied.

Any idea why the last set of rewrite-once rules that are only supposed to be applied to foo and bar subdomains would prevent the earlier rules working?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:22:36.093

您是否尝试过类似的方法：

```
$HTTP["host"] =~ "^(www\.)?domain\.com$" {
    url.rewrite-once += (
        "^/favicon.ico$"        => "/images/favicon_cd.ico",
        "^/course/?$"           => "/course/index.php",
        "^/course/([^./]+)$"    => "/course/index.php?w=$1"
    )   
}

# don't allow spiders to crawl subdomains
$HTTP["host"] =~ "^(foo\.|bar\.)?domain\.com$" {
   url.rewrite-once += (
        "^/favicon.ico$"        => "/images/favicon_cd.ico",
        "^/course/?$"           => "/course/index.php",
        "^/course/([^./]+)$"    => "/course/index.php?w=$1",
        "^/robots.txt$"         => "/robots_nocrawl.txt"
   )
} 
```

我不认为 Lighttpd 喜欢为相同的匹配设置多个规则，我的意思是在您的情况`foo.`下匹配`bar.`多个正则表达式。在这里，只有一个可以匹配。

# c# - How can I grab results from a query even if an SQL exception occurs during command.executeReader()?

> ID：14047824
> 
> 赞同：0
> 
> 时间：2012-12-27T00:06:35.150
> 
> 标签：c#, silverlight

I have this slice of code that works sometimes and sometimes not. The query that is being executed has not been written by myself, but I am told that all I have to do is run it against the database to get the results I need. Here is my code:

```
try {
  using (SqlDataReader dr = cmd.ExecuteReader()) {
    while (dr.Read()) {
      try {
        list.Add(dr.GetString(3) + " " + dr.GetInt32(4).ToString() + " " + dr.GetString(5) + " " + dr.GetDecimal(8).ToString());
      } catch (Exception e) {
        list.Add("fail");
      }
    }
  }
} catch (SqlException sqlException) {
  Debug.WriteLine(sqlException.Message);
} 
```

The error that I sometimes receive is that I cannot drop a table because I do not have permission or the table does not exist. Other times the query executes without any problems and I am able to retrieve and store my results in a list.

When I run the query in SQL Server 2008, sometimes I do indeed get errors but the results still show up and are what I expect. So my question is: How can I grab these results regardless of the error that seems to come up whenever it feels like?

Here is a tiny piece of the query that is causing me my troubles:

```
IF  EXISTS (SELECT * from tempdb..sysobjects where name like '#TABLE%')  
DROP #TABLE 
```

There are many of these if statements in the query that i am running and it's unpredictable which one is going to cause an error. So what i have done for right now is surround the DROP #TABLE in a try-catch block so that at least i can still get retrieve the results in my silverlight program. I will get with my higher up and ask him why the query is returning these errors spontaneously..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:30:00.090

**编辑**

没关系，我看到了问题。我忘记了临时表名称附加了其他字符以防止不同进程之间的命名冲突（例如`#TABLE___...___0000000064E2`）。

我的猜测是，在某些情况下，存储过程正在创建一个名为“#TABLE”的临时表，而您发布的那段 SQL 代码旨在执行清理。单独运行时，这可能工作正常。

当存储过程由多个客户端同时运行时，或者如果先前的查询之一以某种方式未能执行清理（可能是由于中途出现错误），问题可能开始出现。在这种情况下，会产生误报（存储过程认为清理是必要的，但它实际上看到的是另一个进程创建的临时表）。然后你会得到错误，因为没有与当前进程关联的#TABLE。

无论如何，将语句包装在 try-catch 中似乎是一种不错的方法。更好的方法是对代码进行彻底检查，可能设置某种标志以帮助指示清理是必要的，或者使用公用表和某种事务键（删除与当前事务关联的所有记录，而不是删除桌子）。

您可能还想考虑使用表变量而不是临时表。

请参阅：
[http ://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/02337dd5-5cfd-40d8-b529-12dc557d6a7e/](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/02337dd5-5cfd-40d8-b529-12dc557d6a7e/)

或者，您也可以考虑`DROP`完全跳过以下语句：
[Temporary Table Scope？](https://stackoverflow.com/questions/3331807/temporary-table-scope)

* * *

为了回答您最初的问题，我不知道有任何方法可以从 SQL 查询中检索结果，一旦它引发异常，而不是通过 .NET 程序集。SQL Server Management Studio 使用一些重型、定制的 API，这些 API 可能不值得您学习和使用。

* * *

***忽略以下***
（留作参考）

如果可以，请尝试将 SQL 查询更改为

```
IF  EXISTS (SELECT * from tempdb..sysobjects where name = '#TABLE')
DROP #TABLE 
```

（`like '#TABLE%'`改为`= '#TABLE'`）

该`like`语句没有任何意义......是否有其他以“#TABLE”*开头*的表都没关系......您只想知道是否有一个*完全*命名为“#TABLE”的表。

我的猜测是，这是逻辑被改变的情况之一，但只是中途改变，可能是两个不同的人。

# javascript - 函数是javascript中的对象吗？

> ID：14047832
> 
> 赞同：4
> 
> 时间：2012-12-27T00:08:05.697
> 
> 标签：javascript

```
var obj = {};
var fn = function(){};
obj.prop = "some value";
fn.prop = "some value";
assert( obj.prop == fn.prop, "Both are objects, both have the property." );
assert(typeof(obj) === 'object', "Yes its an object");
assert(typeof(fn) === 'object', "why is this not an object"); 
```

我从周围的一些人那里听说，`functions are objects`这是我目前所相信的，但为什么第一个条件`passes`很好，而第三个条件很好`fails`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T00:09:35.933

函数*是*对象，但它们是特定*类型*的对象。 `typeof(fn)`应该评估为“函数”，它是“对象”的子类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T00:10:15.543

那是因为函数的*直接*类型是`"function"`.

但是，您错过了这个断言：

```
fn instanceof Object // true 
```

顺便说一句，诸如`"number"`和之类的类型`"string"`严格来说*不是*的后代`Object`，即使它们在具有方法的意义上*就像*对象一样；只是让 JavaScript 变得有趣的事情之一 :)

另请参阅：[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)及其值范围。

# objective-c - 在 OpenGL 屏幕保护程序中使用 HiDPI 渲染 (Retina)

> ID：14047840
> 
> 赞同：1
> 
> 时间：2012-12-27T00:09:03.267
> 
> 标签：objective-c, opengl, xcode4.5, retina-display, screensaver

几年来，我一直在使用 Chris 移植到 Mac OS X 的 Noof 屏幕保护程序：

[斯科罗世界](http://www.skoroworld.com/~chrish/osx/)

我让它在 10.8 下运行良好，并且已经用高分辨率艺术品更新了项目，并对 prefs 面板进行了一些其他调整以使其正常工作，但是我似乎无法弄清楚如何让它使用更高分辨率的渲染而不是像素- Retina 显示屏上的东西翻倍。下面的代码似乎在 2880x1800 处绘制窗口，但它仍然是像素的两倍。

我已经粘贴了我认为是代码的相关部分。

* * *

## 代码

```
static void
reshape_noof(int w, int h)
{
     glViewport(0, 0, w, h);
 glMatrixMode(GL_PROJECTION);
 glLoadIdentity();
 if (w <= h) {
      wd = 1.0;
      ht = (GLfloat) h / (GLfloat) w;
      glOrtho(0.0, 1.0,
                0.0, 1.0 * (GLfloat) h / (GLfloat) w,
                -16.0, 4.0);
 } else {
      wd = (GLfloat) w / (GLfloat) h;
      ht = 1.0;
      glOrtho(0.0, 1.0 * (GLfloat) w / (GLfloat) h,
                0.0, 1.0,
                -16.0, 4.0);
 }
 glMatrixMode(GL_MODELVIEW);
 glLoadIdentity();

 glClearColor( 0.0, 0.0, 0.0, 1.0 );
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
} 
```

## 剪辑

```
// ScreenSaverView methods

- (id)initWithFrame:(NSRect)frame isPreview:(BOOL)isPreview
{
self = [super initWithFrame:frame isPreview:isPreview];
if (self) {
      [self loadSettings];
    [self setAnimationTimeInterval:1.0/delay];

      NSRect newFrame = frame;
      newFrame.origin.x = 0.0;
      newFrame.origin.y = 0.0;

      glView = [[NSOpenGLView alloc] initWithFrame:newFrame pixelFormat:[NSOpenGLView defaultPixelFormat]];
    if( glView ) {
        [self setAutoresizesSubviews:YES];
           [self addSubview:glView];
      }
 }

return self;
}

- (void)startAnimation
{
[super startAnimation];

 // Load our settings
 [self loadSettings];

 // Turn off the cursor; this doesn't always seem to happen on Tiger. :-(
 if( ![self isPreview] ) [NSCursor hide];

 firstRun = YES;

 // Prepare OpenGL.
 [[glView openGLContext] makeCurrentContext];
[self setWantsBestResolutionOpenGLSurface:YES];
[self convertRectToBacking:[self bounds]];
// Get view dimensions in pixels
NSRect backingBounds = [self convertRectToBacking:[self bounds]];

GLsizei backingPixelWidth  = (GLsizei)(backingBounds.size.width),
backingPixelHeight = (GLsizei)(backingBounds.size.height);
 float w = backingPixelWidth;
 float h = backingPixelHeight;
 reshape_noof( w, h );

 // from init_noof
 glEnable(GL_LINE_SMOOTH);
 glShadeModel(GL_FLAT);
 glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
 int i;
 for (i = 0; i < N_SHAPES; i++)
      initshapes(i);

 //[self animateOneFrame];
 glClearColor( 0.0, 0.0, 0.0, 0.0 );
 glClear( GL_COLOR_BUFFER_BIT );
 glFlush();
}

- (void)stopAnimation
{
 // Turn on the cursor.
 if( ![self isPreview] ) [NSCursor unhide];

[super stopAnimation];
}

- (void)animateOneFrame
{
 int i;

 if( firstRun ) {
      // Make **** sure our view port is correct.
    [self setWantsBestResolutionOpenGLSurface:YES];
    [self convertRectToBacking:[self bounds]];
    // Get view dimensions in pixels
    NSRect backingBounds = [self convertRectToBacking:[self bounds]];

    GLsizei backingPixelWidth  = (GLsizei)(backingBounds.size.width),
    backingPixelHeight = (GLsizei)(backingBounds.size.height);

    // Set viewport
      reshape_noof( backingPixelWidth, backingPixelHeight );
      firstRun = NO;
 }

 gravity( -2.0 );
 for( i = 0; i < N_SHAPES; i++ ) {
      motionUpdate( i );
      colorUpdate( i );
      drawleaf( i );
 }

 glFinish();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T17:07:45.297

在你初始化之后，我会把这条线`[self setWantsBestResolutionOpenGLSurface:YES];`移到右边`NSOpenGLView`

```
glView = [[NSOpenGLView alloc] initWithFrame:newFrame pixelFormat:[NSOpenGLView defaultPixelFormat]];
[glView setWantsBestResolutionOpenGLSurface:YES]; 
```

至少这就是我做屏幕保护程序的方式，而且它似乎有效。

# common-lisp - 使用 Common Lisp CFFI 的嵌套结构和联合

> ID：14047845
> 
> 赞同：2
> 
> 时间：2012-12-27T00:09:26.750
> 
> 标签：common-lisp, zeromq, ffi

我想为 C 库（ZeroMQ v3，更具体地说）编写一个小型包装库。

但是，我想知道如何在 CFFI 中声明外部嵌套结构和联合。

可以在[此处](https://github.com/zeromq/zeromq3-x/blob/master/include/zmq.h#L293)找到包含相应结构/联合组合的 C 头文件。

到目前为止，CFFI 的文档无济于事，我也无法在网上找到类似的问题。

我会很高兴得到任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:32:02.420

`defcstruct`在这种情况下可以使用。此外，在[文档](http://common-lisp.net/project/cffi/manual/html_node/defcstruct.html)中，您会找到定义外部结构的示例，并且两种可能的插槽是简单的（类型如`:int`）和聚合（其他结构的名称），因此没有什么能阻止您定义形成那个大联合然后组成联合的不同结构（还有一个`defcunion`构造）。

自己的 CFFI 实现有这样的结构示例和测试：

```
(defcstruct s-short
  (a-char :char)
  (another-char :char)
  (a-short :short))

(defcstruct s-s-short
  (yet-another-char :char)
  (a-s-short s-short)) 
```

请注意，它`a-s-short`是上面定义的类型`s-short`。

# javascript - 我可以在服务器端标签中使用 JavaScript 变量吗？

> ID：14047850
> 
> 赞同：0
> 
> 时间：2012-12-27T00:09:59.943
> 
> 标签：javascript, jquery, asp.net

我正在尝试将 JavaScript 变量传递给服务器端标记以避免回发。

我希望解决方案看起来像这样：

代码背后：

```
Public Property NameCollection As Dictionary(Of String, String) 
```

我希望拥有的 JavaScript：

```
$('#<%= txtIDNumber.ClientID %>').change(function(){
    var idNumber = $('#<%= txtIDNumber.ClientID %>').val();
    var lblName = $('#<%= lblName.ClientID %>');

    <%If NameCollection.ContainsKey(idNumber) Then %>
        lblName.html('<%=NameCollection(idNumber)%>');
    <%Else%>
        lblName.html('<span class="error">Not a User</span>');
    <%End If %>
}); 
```

如果我对 idNumber 进行硬编码（比如“1234”或其他内容），这些服务器端标签可以正常工作，所以我知道我的对象/代码本身工作正常，但是有没有办法让它识别/传递 JavaScript 变量这里？

**额外信息：** 我确实有一个实用的解决方法，但它是循环遍历集合中所有项目的丑陋且低效的方法，所以我想知道如果有办法更好地做到这一点。感谢帮助。:)

**编辑澄清：**

这是我目前的解决方法。非常难看，因为我想不出一种仅使用 idnumber 作为索引而不是循环遍历所有项目的方法。NameCollection 已经加载了 ASP.NET 页面加载事件中的数据，所以虽然我不确定服务器端标签在后台发生了什么，但我假设数据应该以静态方式存在于该对象中在最后一次调用服务器时，但*快照*这些数据的一部分物理存在于客户端（它必须避免回发，对吗？）？因此，我应该能够避免在这里与服务器交谈，因为我只访问应该已经在客户端的数据？如果我错了，请纠正我（请很好地），因为我不是 JavaScript 或 Web 编程方面的专家，而且我在服务器端标签上几乎找不到像样的参考资料。

```
$('#<%= txtIDNumber.ClientID %>').change(function(){
    var idnumber = $('#<%= txtIDNumber.ClientID %>').val();
    var lblName = $('#<%= lblName.ClientID %>');
    var tempJSKey = '';
    var tempJSValue = '<span class="error">Not a Member</span>';

    <%If Not NameCollection Is Nothing Then%>
        <%For Each kvp As System.Collections.Generic.KeyValuePair(Of String, String) In NameCollection %>
            tempJSKey = '<%=kvp.Key %>';
            if (tempJSKey == idnumber)
            {
                tempJSValue = '<%=kvp.Value%>';
            }
        <%Next%>
    <%End If%>
    lblName.html(tempJSValue);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T00:13:19.777

不，您不能将服务器端代码与 javascript 混合使用。

解析甚至在传递给客户端之前就发生在服务器上。

如果您出于某种原因想在服务器上使用客户端 ID，请使用：

```
ClientIDMode="Static" 
```

例如：

```
<asp:TextBox ID="txtIDNumber" runat="server" ClientIDMode="Static" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T00:13:13.833

我认为您对 ASP 的工作原理感到困惑。当您`<% anything %>`在服务器上进行评估时，在任何东西到达客户端/浏览器之前。一旦被评估，页面的评估版本被发送给客户端；从那时起`<% anything %>`就完全没有意义了。

鉴于此，希望您能理解为什么将世界上所有的 ASP 都投入到您的 JS 中根本无济于事：当涉及 JS 代码时已经“为时已晚”。

如果要将数据发送回服务器，有两种选择：

1) 传统的 HTML 表单

2) AJAX 请求

两者都有其优点/缺点，并且都要求您在服务器上创建提交点，但是详细介绍超出了此答案的范围。可以这么说，阅读处理表单提交和使用 ASP 处理 AJAX 请求，您应该会发现很多可用的材料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:16:39.993

您不能将 javascript 传递给服务器端“元素”，但为什么不将代码更改为：

```
$('#<%= txtIDNumber.ClientID %>').change(function(){

    var lblName = $('#<%= lblName.ClientID %>');

    <%If NameCollection.ContainsKey(txtIDNumber.ClientID) Then %>
        lblName.html('<%=NameCollection(txtIDNumber.ClientID)%>');
    <%Else%>
        lblName.html('<span class="error">Not a User</span>');
    <%End If %>
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T00:18:32.710

在这里做你想做的事情的唯一方法是使用 Ajax 或表单。

```
$('#<%= txtIDNumber.ClientID %>').change(function(){
    var idNumber = $('#<%= txtIDNumber.ClientID %>').val();
    var lblName = $('#<%= lblName.ClientID %>');

    $.ajax({
       "url": "YourServerURLHere",  
       "data":{
           "idNumber":idNumber
       },
       "success": function(data)
       {
          lblName.text(data);
       }
    });
}); 
```

# c# - 在内存中缓存数据库表

> ID：14047855
> 
> 赞同：2
> 
> 时间：2012-12-27T00:11:03.367
> 
> 标签：c#, .net, database, caching

编辑：

> 我正在寻找是否可以缓存大数据（整个数据库或大量表）的原因是因为数据库列是加密的，即使对于具有不同对称 rijndael 密钥的不同 IV 向量的不同行也是如此。因此 SQL 过滤是没有选择的，或者索引没有意义。此外，应用程序，实际上是云和商业应用程序的框架，被设计为尽可能独立于数据库。您建议仅加密包含真正敏感信息（例如电子邮件地址或 SSN）的表的某些列，但这会使框架不标准，您需要为加密列和未加密列编写新代码应用。如果缓存没有问题，那么我可以基于对象、字典、linq 等进行所有操作。

我计划在内存中缓存所有或大部分数据库表（加密）。

我正在开发一个基于云的应用程序，它将有 100MB SQL Server / MySQL 限制，将由不同的客户端共享。（所以我可以在缓存时按客户端对它们进行分组；甚至根据业务模型创建更小的缓存组）

我不知道；`SELECT * FROM`获取 100000 行、10 MB 或 20 MB 的数据等需要多少时间。

我进行了快速搜索，但找不到任何基准来说明检索大量行的“大致”持续时间。

我的公司正在使用现代世界中大多数中小型公司常用的商业软件。据说每天都有活跃记录，4.5年只有20MB的MySQL数据。

我检查了 MySQL Administrator，发现最大的表是 inventory_movements，有 7MB 的数据和 45000 行。

我使用 MySQL Query Browser 并执行以从该表中选择所有记录。软件工具指出它花费了**0.4971 秒**。现在我想我有一个想法。

`SELECT * FROM`在 C# .NET 中获取所有行（仅纯、无过滤器、连接）；来自 SQL Server 数据库的 7MB 数据 - 45000 行会产生相似的持续时间，对吗？我还可以，如果是 2 或 3 秒。

这边走; 至少我有一个想法；如果我缓存 100MB 数据；这可能需要 5 到 30 秒。（数据在获取期间不会被解密）（稍后会在需要时在 RAM 中解密）（我知道我失去了大部分数据库功能。查询将基于缓存中的对象）（我是刚开始在写这篇评论时思考；如果我成功了；我什至可以使用 xml 作为免费的数据库源，因为我正在为这个应用程序设计类似 OR/M 的函数）

我的问题是；

只要我有足够的资源，缓存100MB的数据没有任何问题，对吧？换句话说; 只要我有内存资源就缓存 100 MB，甚至 500 MB，1 GB 并不奇怪？

第二; 你认为我用 SELECT 获取记录的时间计算是乐观的吗？

在应用程序开始时；我可以缓存数据；并管理缓存和数据库中修改/添加/删除的数据，而无需频繁重新加载缓存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T04:09:24.640

> 我进行了快速搜索，但找不到任何说明检索大量记录的“大致”持续时间的基准。

你永远不会。数据库的响应速度取决于很多变量，以至于无法为某人回答这个问题。服务器的技术规格是什么？你允许服务器有多少个处理器？你是如何索引表格以供阅读的？

如您所见，组织之外的人无法回答。

> 只要我有足够的资源，缓存100MB的数据没有任何问题，对吧？换句话说; 只要我有内存资源就缓存 100MB，甚至 500MB，1GB 不是很奇怪吗？

简而言之，在我开始之前，您从错误的角度看待缓存。让我们考虑一下*处理器上的缓存*。它是干什么用的？它是用来确保频繁操作发生得更快对吧？好吧，这就是数据缓存的用途——但这只是硬币的一方面。

让我们谈谈数据缓存存在的第二个原因。假设您有一个每天执行超过 300 万次操作的应用程序。看起来很多，但在财富 500 强公司中是现实的，是吗？好吧，然后使用缓存来确保对经常使用的数据（甚至是事务驱动的数据）的数据访问没有用户可视化的瓶颈。

请看，一般来说，瓶颈不会是数据库引擎、处理器、RAM、缓存，甚至网络。一般来说，瓶颈是I/O。好吧，即使是最大和最强大的运行 16K RPM 的 SAN 驱动器，每天读/写 300 万次以上的数据库也太难了。

所以，我们该怎么做，我们将数据分布在多台机器上（以防万一出现故障*并*进行负载平衡）并将其存储在 RAM 中。为什么？因为它是最快的 I/O，所以很简单。

所以，我说了这么多，这么说，除非您每天执行数百万次操作，否则您可能需要缓存 500MB 或 1GB 的数据。实际上，从您的问题中不清楚您到底要执行什么，因为那里没有*“这是我的应用程序所做的”*，但您可能**根本不需要缓存**。

记住这一切。数据缓存绝非易事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:29:02.173

鉴于数据库服务器和 Web 服务器在同一台机器上，您不会受到网络延迟的影响，因此唯一需要考虑的时间是从数据库中获取数据的时间，以及在数据库中构建对象的时间。网络服务器。如果您可以使对象实例化快速（如果它们是数据表的表示，这应该是可能的），那么您的估计并不是非常乐观 - 这确实取决于您需要执行的选择语句的数量。

就我个人而言，我只建议缓存很少更改的数据表，除非缓存到位以避免繁重的查询——我将假设您的设计决策是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:50:59.277

如果要缓存大量数据，则需要考虑对这些数据进行操作，例如排序或搜索将需要时间。现在，如果您从不执行这些任务，则无需担心。

另一方面，它可能会质疑需要在内存中缓存大量数据，特别是当您说数据库在同一台服务器上时。

当您拥有静态且不会更改的数据时，最好使用缓存。您处理它并在您的情况下包括解密它并存储它，从而避免将来每次都做同样的工作。

# matlab - matlab imread 还是 fread？

> ID：14047856
> 
> 赞同：0
> 
> 时间：2012-12-27T00:11:04.563
> 
> 标签：matlab, fread

我有一个问题：D

对不起，我的英语不好。

我有一个灰度 3D 图像，我想用 matlab 做一些图像处理，我可以将这个 3D 图像（1000*1000*1000）读取为 .raw 或图像序列。

如果我将其读取为 .raw 我将使用 fread 并且我将拥有一维数组。如果我将它作为图像序列读取，我将拥有一个 3D 数组。

那么执行时间短的最佳解决方案是什么？...我们假设我的程序只会浏览所有像素...

我的真实程序会对 3D 图像进行标记...在 matlab 下最好的数据结构是什么？

多谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:24:57.187

阅读有关 DICOM 的信息。它是医学图像的标准，例如断层扫描（3D 图像）。Matlab 有一个函数 dicomread。 [链接在这里](http://www.mathworks.com/help/images/ref/dicomread.html)

# ios - UIImage 缓存：仅影响性能？

> ID：14047858
> 
> 赞同：1
> 
> 时间：2012-12-27T00:11:12.620
> 
> 标签：ios, memory-management, uiimage

直觉上，我一直觉得使用缓存 UIImage 初始化 ( `imageNamed`) 不仅仅是从磁盘加载时节省时间。我认为这也是一个内存问题：不是有几个`UIImage`具有相似数据的不同实例，而是将数据加载到内存中一次。

使用会`imageNamed`导致更有效的**内存**使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:52:32.063

是的，它也可以提高内存使用效率。

根据`imageNamed:`文档：

> 此方法在系统缓存中查找具有指定名称的图像对象，如果存在则返回该对象。如果匹配的图像对象尚未在缓存中，则此方法从指定文件加载图像数据，缓存它，然后返回结果对象。

这里的关键是它“在系统缓存中查找图像**对象**”。

而且，为了确认，我制作了一个带有五个图像视图和一个按钮的示例项目。当调用`imageNamed`五次来设置所有五次时，我的 Instruments 堆增加了 19.5k。使用`imageWithContentsOfFile:`，它增长了 66.5k。

# javascript - 即席修改 JavaScript 中的对象实例方法和属性

> ID：14047859
> 
> 赞同：1
> 
> 时间：2012-12-27T00:11:25.380
> 
> 标签：javascript, scope, this

我希望能够添加/修改对象的属性和方法，而不必经常引用对象变量。例如：

```
var myObj = new MyClass();

myObj.function() {
    this.str = 'String';
    this.fn =  function() {
        // Function here...
    }
} 
```

相对于：

```
var myObj = new MyClass();

myObj.str = 'String';
myObj.fn = function() {
    // Function here...
} 
```

我知道第一个示例不起作用，因为您不能以这种方式调用匿名函数。但是，有没有办法能够做这样的事情，以便可以在对象变量范围内编写代码块。我希望能够使用“this”而不是变量名。

请注意，我只想对对象的单个实例执行此操作……我不需要修改类或创建新类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T00:16:07.780

你可以这样做：

```
(function () {
    this.str = 'String';
    this.fn = function () { /* ... */ };
}).call(myObj); 
```

或者，更简单：

```
(function (x) {
    x.str = 'String';
    x.fn = function () { /* ... */ };
})(myObj); 
```

但我不得不问你为什么要这样做。是不是`myObj`有些长得离谱的名字？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T00:16:53.880

```
function decorateInstance() {
    this.foo = "42";

    this.go = function() {
        return this.foo;
    }
}

var o = {};
decorateInstance.call(o);
console.log(o.foo);
console.log(o.go());​ 
```

# android - findViewById 在 4.2 上失败

> ID：14047860
> 
> 赞同：1
> 
> 时间：2012-12-27T00:11:31.760
> 
> 标签：android, android-4.2-jelly-bean

更新商店中的应用程序后，我遇到了一个随机问题。该更新适用于所有 2.3-4.1 设备，但我在 4.2 上遇到了一些崩溃。

崩溃回到仅对我的 XML 中存在的 ID 执行 findViewById 的行（在 onCreate 期间正确设置）。视图始终存在，它永远不会被删除、隐藏或以其他方式更改，除非设置文本值。

有没有人在 4.2 上注意到类似的问题？除了增量二进制更新之外，我想不出任何会使查找视图在 4.2 上突然失败的事情？

我没有机会在假期里调试太多，想问一个简单的问题来判断其他人是否看过这个？

编辑：

来自 Play 的堆栈跟踪。onCreate 中的第 295 行是 findViewById。

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{redacted.namespace.LocationDetailActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
at android.app.ActivityThread.access$600(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4575)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at redacted.namespace.LocationDetailActivity.onCreate(LocationDetailActivity.java:295) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:13:58.053

如果`View`它引用的不是任何自定义或特殊的，那么它可能与`R`文件有关。我每次的建议是：

> 项目->清理，重启eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:16:11.640

首先尝试修复项目。

在您的项目上 > Android 工具 > 修复项目

# python - 以错误 webapp2 响应

> ID：14047861
> 
> 赞同：0
> 
> 时间：2012-12-27T00:11:42.223
> 
> 标签：python, google-app-engine, webapp2

这似乎相当微不足道，但只需要一些最佳实践指导。

构建一个 webapp2 Python 项目（两者都相当新）

我有一个个人资料页面，您可以从中上传新的个人资料图片。

我的个人资料页面相当简单，它有一个带有文件输入的表单，提交给 ProfileImageUpload 处理程序。

```
class Profile(Handler):
def get(self):
    #renders page 
```

和一个图像上传处理程序

```
class ProfileImageUpload(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload_files = self.get_uploads('img')  
        blob_info = upload_files[0]

        if self.validate_file(blob_info):
            #save the user blob
            #redirect to profile page
        else:
            #redirect to profile page with error 
```

我的映射是

```
('/user([0-9]+)', Profile),
('/profileupload', ProfileImageUpload), 
```

所以在快乐的情况下，我的 imageUpload 处理程序重定向回个人资料页面，即

```
/user<userid> 
```

但是在错误情况下，我想重定向回来并显示错误，但是如果没有 URL 中的错误，我就无法找到一种方法来执行此操作，即 /user?error='something'

理想情况下，我不希望在 URL 中出现这个我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:17:59.463

我想最简单，最直接的方法是使用[会话](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)

你可以有一个会话密钥，比如错误，这将是一个列表。如果列表存在且非空，则显示错误。如果列表为空，则没有错误。您需要确保将当前错误提取到变量中以进行显示，然后擦除会话变量，以便错误仅显示一次。

# c# - 在可序列化的类中存储引用 (C# - XNA)

> ID：14047862
> 
> 赞同：0
> 
> 时间：2012-12-27T00:11:47.293
> 
> 标签：c#, serialization, reference, xna-4.0

在过去的几周里，我一直在 XNA 中创建游戏。在这个过程中，我在没有完全理解问题的情况下，试图在遇到问题之前解决它。

那个问题是我将如何处理保存和检索“蓝图”对象。由于我正在制作内容创建者（游戏是基于内容的），因此我需要此功能。所以目标是，我创建内容（粗略的例子，一个具有 100 生命值的“地精”类型的敌人和一个地精精灵），将其保存到序列化对象中，将其加载到游戏中，然后它可以在游戏中使用和复制-游戏。

现在很明显，当对象具有诸如 Texture2D（精灵）之类的不可序列化的东西时，您无法对它们进行序列化。我通过将所有纹理添加到静态类并仅存储对象中纹理的索引（例如，不包含 Texture2D 属性， Goblin 将包含一个链接到适当纹理的索引 - 稍微过于简单，但你明白了）。

但随后病毒传播开来，我开始为我的所有对象引用这样做。例如，地精也需要对 AI 对象的引用。该 AI 对象只有方法，因此显然是可序列化的，但我将它存储在与纹理相同的静态类中，并通过 index.html 链接到它。现在回想起来，我不禁为自己的想法而战栗。

所以我的问题是，除了纹理之外的所有内容都应该通过直接引用存储在可序列化类中，而不是通过索引引用吗？或者有没有可行的理由去做我所做的事情？

序列化是一项棘手的工作，我正在努力思考使用它的最佳方法以及避免它的正确时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:21:04.213

正如您所说，序列化无法跟踪引用。要么序列化整个对象图，要么在反序列化时提出自己的解决引用的方法。因此，您所做的事情是正确的，尽管您可能希望找到更好的解决方案，而不是仅仅将所有内容都挂在静态类中。

此外，您可能想改变策略。您可以只保存所需的信息，而不是使用所有索引保存对象本身，然后拥有一个解析器工厂，它将读取此信息并使用正确的值填充对象。

# wpf - 在 DataTemplate 中使用自定义控件时绑定不起作用

> ID：14047869
> 
> 赞同：2
> 
> 时间：2012-12-27T00:12:46.030
> 
> 标签：wpf, data-binding, custom-controls, datatemplate

我正在尝试用自定义控件替换 ListView DataTemplate 中的标准控件，但绑定似乎无法正常工作。下面是 ListView 的定义：

```
<Grid>
    <ListView ItemsSource="{Binding DataItemsCollection}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="Static text" />
                    <TextBlock Text="{Binding DataItemText}" />
                    <BindingTest:CustomControl CustomText="{Binding DataItemText}" />
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid> 
```

其中 DataItemsCollection 是一个可观察的类型集合

```
public class DataItemClass : INotifyPropertyChanged
{
    string _dataItemText;
    public string DataItemText
    {
        get { return _dataItemText; }
        set { _dataItemText = value; Notify("DataItemText");  }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void Notify(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

主窗口代码如下所示：

```
public partial class MainWindow : Window
{
    public ObservableCollection<DataItemClass> _dataItemsCollection = new ObservableCollection<DataItemClass>
        { 
            new DataItemClass { DataItemText = "Test one" },
            new DataItemClass { DataItemText = "Test two" },
            new DataItemClass { DataItemText = "Test three" }
        };

    public ObservableCollection<DataItemClass> DataItemsCollection
    {
        get { return _dataItemsCollection; }
    }

    public MainWindow()
    {
        InitializeComponent();

        DataContext = this;
    }
} 
```

自定义控件很简单：

```
<StackPanel Orientation="Horizontal">
    <Label Content="Data Item:" />
    <TextBlock Text="{Binding CustomText, Mode=OneWay}" />
</StackPanel> 
```

将 CustomText 定义为

```
 public static DependencyProperty CustomTextProperty = DependencyProperty.Register(
        "CustomText", typeof(string), typeof(CustomControl), new FrameworkPropertyMetadata("", FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));

    public string CustomText
    {
        get { return (string)GetValue(CustomTextProperty); }
        set { SetValue(CustomTextProperty, value); }
    } 
```

当我运行这个项目时，我在 DataTemplate 的第二个 TextBlock 中看到了正确的文本，但在自定义控件中却没有。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T00:22:45.450

默认情况下`Binding`是相对于`DataContext`，`DataItemClass`在您的情况下，但`CustomText`属性是在 中声明的`CustomControl`。您需要指定相对绑定源：

```
<TextBlock Text="{Binding Path=CustomText,
                          RelativeSource={RelativeSource Mode=FindAncestor,
                                    AncestorType=BindingTest:CustomControl}}" /> 
```

如果您的控件保持如此简单，您可以完全删除`CustomText`属性并更改`<TextBlock Text="{Binding CustomText, Mode=OneWay}" />`为 just `<TextBlock Text="{Binding DataItemText} />`。

# android - (FrameLayout) findViewById - 返回 null？

> ID：14047876
> 
> 赞同：0
> 
> 时间：2012-12-27T00:13:24.813
> 
> 标签：android, android-layout, android-framelayout

为什么我总是（FrameLayout）findViewById 总是返回null？该文件存在。使用谷歌地图。我阅读了相关主题。技术支持：项目清洁。删除文件夹生成。

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.travel_map_activity);
    mapView = (MapView) findViewById(R.id.travelMapView);

    FrameLayout mainLayout = (FrameLayout) findViewById(R.id.mapFrame);//null

} 
```

有什么问题？

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapFrame"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/tvTop"
    android:layout_width="fill_parent"
    android:layout_height="20dip"
    android:background="#FFFFFF"
    android:gravity="top|center_horizontal"
    android:text="FLOATING VIEW - TOP"
    android:textColor="#000000"
    android:textStyle="bold" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/lvMain"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout></FrameLayout> 
```

travel_map_activity.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
    android:id="@+id/travelMapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="key" />

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:35:23.923

您正在从 膨胀布局`travel_map_activity.xml`，其中仅包含一个 ID: `R.id.travelMapView`。您不能从其他布局中选择项目（*有一些小例外，更像是对系统的滥用*）。

您要么需要将内容视图设置为它包含的任何布局`R.id.mapFrame`，要么您需要找到另一种方式来传递该数据（例如，可能使用与with和`Bundle`打包的方式；还有[其他问题](https://stackoverflow.com/questions/4308232/passing-data-through-intent-and-receiving-it)和[博客](http://mobileorchard.com/android-app-development-using-intents-to-pass-data-and-return-results-between-activities/)涵盖此之类的事情）。`Intent``.putExtra()``.getIntExtra()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:18:44.077

您在相同的布局中找到（`travelMapView`和）这两个视图。因为您提供的布局根本不存在，但您却没有在那里。`mapFrame``travel_map_activity``travelMapView``NullPointerException`

**编辑**：正如你现在所展示的，`mapFrame`不在同一个视图中，所以没有办法做到这一点......

*嗯*，有一个，但它不会有用，因为`setContentView`一次只显示**一个**布局。无论如何，您*仍然*可以`mapFrame`使用膨胀的布局进行访问，而无需实际使用它（那是因为它**完全没用**）：

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
View view = inflater.inflate( R.layout.your_other_layout_with_framelayout, null );
FrameLayout mainLayout = (FrameLayout) view.findViewById(R.id.mapFrame); 
```

使用它可以让您摆脱该空值，但**同样**，如果 FrameLayout 不在您当前的视图中，您就不可能使用它。

# mongodb - 带有 servicestack 的 Mongodb auth 抛出缺少方法异常

> ID：14047877
> 
> 赞同：2
> 
> 时间：2012-12-27T00:13:49.197
> 
> 标签：mongodb, servicestack, mongodb-.net-driver

我刚刚将 ServiceStack 配置为在本地使用 Mongodb 进行身份验证

```
public override void Configure(Container container)
{
    Plugins.Add(new AuthFeature(()=> new AuthUserSession(), new IAuthProvider[]{new BasicAuthProvider(), }));

    var mongoClient = new MongoClient("mongodb://localhost");
    var server = mongoClient.GetServer();
    var db = server.GetDatabase("letters");

    container.Register<ICacheClient>(new MemoryCacheClient());
    container.Register<IUserAuthRepository>(new MongoDBAuthRepository(db, true));
} 
```

当我启动服务时，出现以下异常： MissingMethodException: Method not found: 'MongoDB.Driver.SafeModeResult MongoDB.Driver.MongoCollection`1.Save(!0)'

这是提供程序中的错误还是我缺少使用提供程序的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:44:20.307

将 Mongo Csharp 驱动程序降级到 1.6.1 版，现在它可以工作了。提供者可能需要更新。在这里提交了一张票：

[https://github.com/ServiceStack/ServiceStack.Contrib/issues/16](https://github.com/ServiceStack/ServiceStack.Contrib/issues/16)

# java - HibernateTemplate().update(object) 不更新数据库

> ID：14047884
> 
> 赞同：0
> 
> 时间：2012-12-27T00:14:54.473
> 
> 标签：java, spring, hibernate, orm

我正在使用以下方法来更新对象，但它没有做任何事情。奇怪的是，它也不会抛出任何错误。

```
public void updateObject(Object object) {
    getHibernateTemplate().update(object);
} 
```

我正在使用如下映射的复合 ID：

```
<composite-id class="com.company.project.model.ObjectPK" mapped="true">
    <key-property name="col1" type="string" column="COL1"/>
    <key-property name="col2" type="string" column="COL2"/>
</composite-id>
<property name="col3" type="string" column="COL3"/> 
```

我在某处读到我需要在尝试更新对象之前获取该对象。这是我需要在这里做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:21:17.193

[文档](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/orm/hibernate3/HibernateOperations.html#update%28java.lang.Object%29)说明您可以通过这种方式更新“给定的持久[实例](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-overview)”，因此您需要先获取对象并在返回的实例上进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:23:20.707

更新不能孤立地工作。您必须在交易中。由于您没有提及有关它们的任何内容，因此我猜您没有正确[管理交易](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)。

# python - 在 Python 中对一对（或更多）索引求和

> ID：14047885
> 
> 赞同：10
> 
> 时间：2012-12-27T00:15:00.613
> 
> 标签：python, numpy, sum

计算样本基尼系数的一种方法是使用相对平均差 (RMD)，它是基尼系数的 2 倍。RMD 取决于由下式给出的平均差：

![在此处输入图像描述](../Images/fccade4a58139d76d252c4344dde6ae1.png)

所以我需要计算样本中一对元素之间的每个差异`(yi - yj)`。我花了很多时间才想出一种方法来做到这一点，但我想知道是否有一个函数可以为你做到这一点。

起初我试过这个，但我敢打赌它在大数据集中非常慢（顺便说一下，s 是样本）：

```
In [124]:

%%timeit
from itertools import permutations
k = 0
for i, j in list(permutations(s,2)):
    k += abs(i-j)
MD = k/float(len(s)**2)
G = MD / float(mean(s))
G = G/2
G
10000 loops, best of 3: 78 us per loop 
```

然后我尝试了以下不太容易理解但更快的方法：

```
In [126]:
%%timeit
m = abs(s - s.reshape(len(s), 1))
MD = np.sum(m)/float((len(s)**2))
G = MD / float(mean(s))
G = G/2
G
10000 loops, best of 3: 46.8 us per loop 
```

有什么有效但易于概括的东西吗？例如，如果我想对三个索引求和怎么办？

这是我使用的示例：

```
sample = array([5487574374,     686306,    5092789,   17264231,   41733014,
         60870152,   82204091,  227787612,  264942911,  716909668,
        679759369, 1336605253,  788028471,  331434695,  146295398,
         88673463,  224589748,  128576176,  346121028])

gini(sample)
Out[155]:
0.2692307692307692 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:54:48.343

对于您给出的MD示例，可以通过排序来利用它，您可以实现O（N * Log（N））而不是O（N ^ 2）

```
y = [2,3,2,34]

def slow(y):
    tot = 0
    for i in range(len(y)):
        for j in range(len(y)):
            if i != j:
                tot += abs(y[i] - y[j])
    return float(tot)/len(y)**2

print slow(y)

def fast(y):
    sorted_y = sorted(y)
    tot = 0
    for i, yi in enumerate(sorted_y):
        smaller = i
        bigger = len(y) - i - 1
        tot += smaller * yi - bigger * yi
    return float(2*tot)/len(y)**2

print fast(y) 
```

通常您将不得不使用动态编程或其他技术来使这些更快，我不确定是否有“一种方法适合所有人”的解决方案。

# css - 如何在 Wordpress 中促进主题自定义

> ID：14047886
> 
> 赞同：0
> 
> 时间：2012-12-27T00:15:17.807
> 
> 标签：css, wordpress, wordpress-theming

我创建了一个 Wordpress 主题，我决定对其进行一些额外的开发，以便可以将它打包并部署为任何想要下载和使用它的人的主题

作为 Wordpress 主题的标准，我添加了一个选项页面，用户可以在其中自定义主题，即更改背景颜色、字体大小等。

目前，我正在通过`<?php print "background-color: {$options['user_selected_bg_color']"}; ?>`在页面中嵌入新样式（即样式标记在头部）来促进这些主题定制

我能想到的唯一另一种方法是在主要样式表下方添加一个辅助样式表，该样式表实际上是 PHP，并且标题 mime 类型发生了变化。

还有什么其他方法可以做到这一点？是否有一种“公认”的方法来促进 Wordpress 主题开发人员之间的用户主题定制？

# oop - 为什么方法在 Smalltalk 中默认返回“self”？

> ID：14047887
> 
> 赞同：13
> 
> 时间：2012-12-27T00:15:23.533
> 
> 标签：oop, smalltalk, pharo, squeak, visualworks

## 背景

在 Smalltalk 中，如果您没有明确返回任何内容，则传递的消息将评估为接收者（或消息上下文中的“自我”）。

例如，给定这个方法：

```
MyClass >> myMethod
  Transcript show: 'hello'; cr. 
```

评估（点“打印”）这个：

```
| myInstance |
myInstance := MyClass new.
myInstance myMethod. 
```

如果 <print-it> 执行到最后一次调用，则结果将是实例本身。

## 问题

*   为什么这样设计？
*   它背后的想法是什么？
*   哲学背景是什么？
*   它有什么实际好处？是为了方便方法链接吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-30T15:40:08.913

一个非常简单的原因还没有说明：在虚拟机中，返回 self 比返回任何其他对象更简单、更有效。

Smalltalk 字节码实现了堆栈机。这意味着通过将参数推入堆栈而不是将它们放入寄存器来传递参数。除了方法签名中列出的参数之外，始终传递一个隐藏参数，它是消息的接收者。因此，即使对于一元方法（那些没有参数的方法），接收者也被压入堆栈，然后执行该方法，堆栈上的接收者值是该方法如何知道“自我”的方式。如果没有给出明确的 return 语句，则通过返回“self”，VM 可以将“self” oop 留在堆栈上，这至少节省了一次内存存储操作。所以从效率和简单的角度来看，回归“自我”是最优雅的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T02:11:49.847

Smalltalk-80 的蓝皮书（*语言及其实现*）没有说明**为什么**它默认返回接收者。

但是，第 27 页（*“返回值”*部分）中的引用可能对您有所帮助：

> “即使不需要将任何信息传回发送者，接收者也**总是会**返回消息表达式的值。返回值表示对消息的响应已完成。(...)”

请记住，在 Smalltalk 中，方法是通过消息发送来激活的，因此消息有一个完整的往返行程（可能以 MessageNotUnderstood 异常结束）。消息发送的概念是最重要的。

根据消息的意图，有一些关于返回什么的良好实践模式，但这是其他故事的主题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-05T01:45:12.630

方法默认返回 self 有几个原因。

1.  Smalltalk 方法必须返回一些东西
2.  self 是最容易返回的对象
3.  self 是最快返回的对象
4.  返回 self 允许几种设计模式自然地工作

让我再解释一下#4。对象初始化的一种常见模式是为类定义一个**新**方法，如下所示：

```
new
   ^super new initialize 
```

这种模式取决于初始化返回的自我。但是，在**初始化**方法的末尾添加**^self是不正常的。**这是不必要的，因为该方法无论如何都会返回 self 。

 **最后，返回 self 只是默认情况下的自然选择，因为您必须返回一些东西。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-27T00:55:02.337

我不是闲聊的创造者，但这似乎是最好的选择。

例如，如果您将执行：

```
var := myInstance myMethod. 
```

那么问题来了：你想`var`成为什么样的人？一种选择是`nil`. 但这有点令人困惑，因为您正在使用已定义的对象并且`nil`实际上是未定义的对象。因此，您可以将其视为分配`myInstance`给它，`var`并在此过程中调用 myMethod。这也可能被视为

```
 var := myInstance myMethod; yourself. 
```

如果您从内部看，那么从对象本身可用的所有数据来看，最合适的可能也是`self`. 再一次，`nil`可以退回，但我之前已经说过我的意见。

在 Smalltalk 中，没有不返回任何内容的*void*方法，也没有类型检查。所以一个方法只需要返回一些东西。就像对象说：

> 默认情况下，我可以为任何方法调用返回自己，因为我始终了解自己，并且您可以重新定义此行为，以防您希望我返回其他内容。

我个人认为返回`nil`可能也不错，*Objective-C*应用程序`nil`经常使用这些东西，但是 Smalltalk 是这样制作的，我认为这是一个很好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T15:12:50.837

来自 Java 的您在处理未定义的返回值时知道 NullPointExceptions。此外，您的代码必须在这里和那里对 null 进行条件检查。

因此，我很高兴为 Smalltalk 中的每个方法调用或消息发送找到一个返回值。如果您决定让每个方法都返回一些值，那么您将要问您的默认值可能是什么。对象本身（self）是一种非常自然的方式来用作默认值。或者反过来问：什么是更好的回报值？**

# javascript - 从 WinJS.xhr 响应获取 URL

> ID：14047892
> 
> 赞同：3
> 
> 时间：2012-12-27T00:16:08.850
> 
> 标签：javascript, xmlhttprequest, windows-store-apps, winjs

假设我有一个循环调用`WinJS.xhr()`多个地址。在响应处理程序中，有没有办法确定处理响应的地址？通过从传递给处理程序的 XmlHttpRequest 对象中辨别它`xhr()`还是通过手动传递其他东西？

我一直在查看[文档](http://msdn.microsoft.com/en-us/library/windows/apps/ms535874.aspx)并检查调试器中的响应，但找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:57:44.893

我不认为响应中包含信息，但它不需要。每个 xhr 调用都有自己的 Promise，该 Promise 会针对该特定调用返回。我喜欢这样做...

```
//start with an array of some kind
var urls = [
    "http://something.com/1",
    "http://something.com/2",
    "http://something.com/3",
];

//map the array to a list of calls adding your url in so you have it
var results = urls.map(function(u) {
    return {url:u, response:WinJS.xhr({url:u})};
} 
```

然后你可以循环结果数组，你就有了 url。您可能希望将其包装在另一个承诺中，以便整个事情是异步的。

```
function xhrCallsAsync() {

    //start with an array of some kind
    var urls = [
        "http://something.com/1",
        "http://something.com/2",
        "http://something.com/3",
    ];

    //map the array to a list of calls adding your url in so you have it
    var results = urls.map(function(u) {
        return {url:u, response:WinJS.xhr({url:u})};
    }

    //return a Promise that completes when all of the Promises are complete
    return WinJS.Promise.join(results);
} 
```

希望有帮助！

# android - Android Activity SingleTask 启动方式 = 独立自己的内存

> ID：14047893
> 
> 赞同：0
> 
> 时间：2012-12-27T00:16:28.453
> 
> 标签：android

我有一个可以从设备的相机拍摄照片的 android 应用程序。照片质量高，尺寸大，这张照片可以显示在我的活动（PhotoDisplayActivity）中。我知道`OutOfMemoryException`，它包含在我的任务中，所以我尝试将启动模式更改`PhotoDisplayActivity`为“单任务”。如果我分开`PhotoDisplayActivity`到另一个任务，这是否也会分开记忆并避免`OutOfMemoryException`？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:18:08.873

不会。任务控制诸如“返回”按钮的行为和最近的任务列表之类的东西。

在单独的*进程*中运行该活动将为您提供一个独立的堆，但不会在独立的任务中运行它。

# java - 清除另一个应用程序缓存

> ID：14047895
> 
> 赞同：2
> 
> 时间：2012-12-27T00:16:49.083
> 
> 标签：java, android, caching, securityexception

我一直在这里阅读有关清理另一个应用程序cahce-memory 的信息，并且我还尝试编写自己的应用程序。我得到的结果是，使用 Android 当前的安全层，这是不可能的。

但是，目前市场上有许多缓存清理应用程序（Google Play）？

当我启动我授予`android.permission.DELETE_CACHE_FILES`权限的应用程序时，LogCat 打印了

```
Not granting permission android.permission.DELETE_CACHE_FILES to package <MY_PACKAGE_NAME> (protectionLevel=3 flags=0x8be46) 
```

经过一些研究，我发现 3:rd 方应用程序不会被授予权限，`protectionLevel=3`所以每当我尝试删除另一个应用程序缓存（逻辑上）时，我都会遇到 java.lang.SecurityException

我的问题是：“Google Play 上的这些应用程序如何允许并能够删除其他应用程序缓存？”

*对不起我的英语不好，不是母语人士*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:19:02.093

只有当设备被 root 并且您的应用程序具有超级用户权限时，您才能执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T08:32:17.700

让我告诉你这些应用程序是如何实现这一点的。

一些默认情况下`android classes have methods`是`private(@hidden)`用户的。我们**不能直接访问它们**。但你有更好的方法来使用`Reflection`.

添加权限。

```
<uses-permission android:name="android.permission.CLEAR_APP_CACHE"/> 
```

并按照这些答案

[https://stackoverflow.com/a/17334600/3496570](https://stackoverflow.com/a/17334600/3496570)

[https://stackoverflow.com/a/14509140/3496570](https://stackoverflow.com/a/14509140/3496570)

并且不要忘记创建一个`package`名称`android.content.pm`并将[**IPackageDataObserver.aidl**](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/content/pm/IPackageDataObserver.aidl)添加到 package 。那你就可以走了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-03T10:28:59.080

对于 Android 11 及更高版本，您可以使用 ACTION_CLEAR_APP_CACHE。此操作不会自动清除应用缓存，但会显示一个系统对话框并让用户决定。

它还需要 MANAGE_EXTERNAL_STORAGE 权限，[请查看文档。](https://developer.android.com/reference/android/os/storage/StorageManager#ACTION_CLEAR_APP_CACHE)

用法：

安卓清单：

```
<uses-permission android:name="android.permission.MANAGE_EXTERNAL_STORAGE"
    android:minSdkVersion="30"
    tools:ignore="ScopedStorage" /> 
```

清除所有缓存：

```
//Get the cache dialog
int requestCode = 999;
Intent intent = new Intent(StorageManager.ACTION_CLEAR_APP_CACHE);
activity.startActivityForResult(intent, requestCode); 
```

# javascript - 日期（值）和新日期（值）

> ID：14047896
> 
> 赞同：0
> 
> 时间：2012-12-27T00:16:51.137
> 
> 标签：javascript, date

> **可能重复：**
> [Date(dateString) 和 new Date(dateString) 之间的差异](https://stackoverflow.com/questions/3505693/difference-between-datedatestring-and-new-datedatestring)

和有什么区别

```
Date(1356567322705)
"Thu Dec 27 2012 03:13:37 GMT+0300 (Kaliningrad Standard Time)" 
```

和

```
new Date(1356567322705)
Thu Dec 27 2012 03:15:22 GMT+0300 (Kaliningrad Standard Time) 
```

为什么会有大约 2 分钟的间隔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:18:36.567

> **注意**：请注意，JavaScript`Date`对象只能通过调用 JavaScript`Date`作为构造函数来实例化：调用它作为常规函数（即不带`new`运算符）将返回字符串而不是`Date`对象；与其他 JavaScript 对象类型不同，JavaScript`Date`对象没有文字语法。

-- [Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

# python - 带有 def 函数的 Python 3 语法错误（（x，y））

> ID：14047899
> 
> 赞同：1
> 
> 时间：2012-12-27T00:17:18.063
> 
> 标签：python, function, parameters, python-3.x, python-2.x

所以我正在分析这段代码，我有理由相信这是用 python 2.X 编码的，但我使用的是 3.2 并且想转换它以便它可以工作。

我遇到的第一个错误是带有语法的函数

```
def function((x,y)) 
```

为什么它在 Py3 中不起作用，还有什么替代方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T00:24:15.803

正如 E 先生在评论中已经说过的那样，这个特性在 Python 3 中被[PEP 3113](http://www.python.org/dev/peps/pep-3113/)删除了。替代方案非常简单，您只需手动解压缩一个参数：

```
def func (xy):
    x, y = xy
    # ... 
```

或者你用两个参数定义函数，并让函数的用户自己解包他们的值：

```
def func (x, y):
    # ...

t = (1, 2)
func(*t) 
```

顺便提一句。运行 Python 的`2to3`工具来转换现有的 Python 2 代码以匹配 Python 3 的语法和库更改是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:25:51.683

[理论上， 2to3](http://svn.python.org/view/sandbox/trunk/2to3/fixes/fix_tuple_params.py)会为您解决这个问题。我说“理论上”是因为我没有使用过它，但大多数 Python 都像宣传的那样工作。

# hadoop - 使用 Hadoop 进行个性化

> ID：14047900
> 
> 赞同：0
> 
> 时间：2012-12-27T00:17:45.310
> 
> 标签：hadoop, personalization

任何人都可以提供任何关于个性化（尤其是 Hadoop）的好书或用例的指针吗？有没有关于这个主题的好的网络资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:05:03.023

与个性化和 hadoop（或一般的大数据）最接近的应用程序是根据用户与公司的特定交易历史以及所有用户观察到的模式向用户推荐一组产品的应用程序。一个例子是 Netflix 如何使用 hadoop。

这与个性化的传统含义略有不同，后者与基于用户角色、状态或组成员身份的内容交付有关。

# javascript - 对象文字 JavaScript 模式未识别对象变量

> ID：14047902
> 
> 赞同：1
> 
> 时间：2012-12-27T00:17:48.337
> 
> 标签：javascript, oop, requirejs

我正在尝试使用套接字创建一个 javascript 游戏，但我陷入了对象的 OOP 问题。我在从对象函数内部引用对象变量时遇到问题。

这里可能有几个问题。我从对象内部调用绘图函数，而不是渲染函数。我也不确定对象字面量设计是否正确。

使用 Require.js 和 class.js，我们有 User.js ：

```
 define(['entity'],function(Entity){
var User = Entity.extend({
    init: function(){
        this.health= 10;

    },

    draw: function(ctx){
        img = new Image();   // Create new img element
        img.onload = function(){
        // execute drawImage statements here
        ctx.drawImage(img, this.posx, this.posy);
        };
        img.src = '/images/object.PNG'; // Set source path
    }
})
return User;}) 
```

从 Entity.js 扩展

```
 define(function(){
var Entity= Class.extend({
    init: function(){
        //object image
        this.img.src = '/images/Blue-soldier.PNG';
        //location
        this.posx=50;
        this.posy=50;
        //gameplay values
        this.health=1;
        this.speed=0;

    }, 
```

User.draw(ctx) 在 game.js 中被调用：

```
 var entity = new User;
    this.users.push(entityid);
    entity.draw(ctx);
}, 
```

this.posx 和 this.posy 在 user.draw() 中无法识别。当它们被硬值替换时，它工作正常。我错过了什么？

我的完整代码有点混乱，但您可以在[https://github.com/mtbarta/canvas/blob/master/public/javascripts/client.js找到它](https://github.com/mtbarta/canvas/blob/master/public/javascripts/client.js)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:22:20.847

问题是您试图`this`在“加载”处理程序中使用，其中的值不会是“绘制”函数中的值。尝试这个：

```
 var entity = this;
    img.onload = function(){
      // execute drawImage statements here
      ctx.drawImage(img, entity.posx, entity.posy);
    }; 
```

通过在局部变量“entity”中保留一个副本`this`，处理程序将可以访问它。

# python - 谷歌日历 API Python 文档

> ID：14047905
> 
> 赞同：0
> 
> 时间：2012-12-27T00:18:17.883
> 
> 标签：python, google-api, google-calendar-api, gdata-api

是否有任何地方有在 Google Calendar API（或任何其他 Google API）中使用的方法和类的文档？我知道 REST 文档有示例代码，但我想要一个方便的地方，在那里我可以阅读有关特定方法的所有选项的信息。例如，我正在尝试使用

```
gdata.calendar.service.CalendarEventQuery('default', 'private', 'full') 
```

方法，但我希望它包括公共和私人条目。我不知道我会怎么做，因为谷歌的例子没有解释“私人”和“完整”的替代品。我知道我可以在库中打开代码，但我希望有更方便的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T01:24:56.550

在以下位置尝试 PyDocs：

[https://google-api-client-libraries.appspot.com/documentation/calendar/v3/python/latest/](https://google-api-client-libraries.appspot.com/documentation/calendar/v3/python/latest/)

它们可用于每个 API。

**编辑：**刚刚意识到你正在使用旧的 GData 库和旧版本的日历 API。您真的应该更新到 Calendar v3 和[Google API Python Client](http://code.google.com/p/google-api-python-client/)。

关于公共与私人。私人提要应包括日历的所有公共数据。私人意味着将包含仅对日历所有者可见的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T12:48:12.083

我在弄清楚如何将谷歌日历 API 与 OAuth 等一起使用时遇到了一些困难。我终于让一切正常工作，并且在此过程中我编写了一个非常简单易用的包。我将它发布到 github，它可以使用“pip install gback”从 pypi 安装。该文档还包含有关 google 帐户设置的说明。

[https://github.com/Schwarzschild/gback](https://github.com/Schwarzschild/gback)

例如，您可以使用此代码段列出所有日历：

```
>>> from gback import GCalSession
>>> session = GCalSession('~/gback.oauth')
>>>
>>> for c in session.names: print c 
```

该文档有更多示例。

享受吧，马克

# parsing - 分析没有固定/静态语义的树？

> ID：14047913
> 
> 赞同：3
> 
> 时间：2012-12-27T00:19:46.273
> 
> 标签：parsing, dynamic, compiler-construction, antlr, abstract-syntax-tree

我正在尝试根据概率分析可以具有多种翻译的动态语言。我的语言中有一些已定义的类型，例如数字、向量等...

例如，如果我们看到表达式“a+b”，那么这可能是两个数字的相加，也可能是两个向量的相加。一个数字更有可能，因此我们认为“最佳”表示是两个数字的总和。然而，它们有可能是向量，所以我仍然想保留这种“不太可能”的表示。

如果后来我看到“a/b”，那么我知道它们不能是向量，因为向量除法是未定义的。所以我会抛弃“矢量”表示，正确的表示占上风。

我想通过分析 AST 来做到这一点。问题是由于类型和运算符的许多可能组合，我们有一个组合爆炸。

关于我可以使用的合适策略或模式的任何想法？我正在考虑一种用于不同组合的访问者，它们并行运行以赋予结构最佳含义。有点像在自然语言处理中分析句子。

我正在使用 ANTLR 的树行走机制进行分析，因此任何特定于该系统的引用，或为动态语言实现语义将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:26:59.500

在我看来，你需要的本质上是一个**类型推断**系统，它是编程语言中表达式类型的自动推导。您可以从[关于类型推断的维基百科页面](http://en.wikipedia.org/wiki/Type_inference)开始，然后花一些时间了解[Hindley-Milner 算法](http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner)。

AST 只是一个编译器的开始，所以你应该尽量习惯于构建一个具体的 AST 数据结构，并编写访问者来多次遍历树。语义部分仅在您构建了整个 AST 之后才开始。

# php - 强制更新php apc缓存数据变量？

> ID：14047915
> 
> 赞同：0
> 
> 时间：2012-12-27T00:20:06.583
> 
> 标签：php, caching, apc

假设我有一个 config.php 文件，其中包含一堆首选项的定义。我的初始化脚本将这些值加载到内存中。

假设我没有将它们加载到内存中，而是将它们加载到 apc 中。当我手动更改 config.php 的内容时，如何强制 apc 更新变量？我是否需要创建某种执行更改的实用程序脚本，以确保自动更新缓存的变量？

如果 apc 中存在一个变量，并且添加了一个与现有（更新版本）同名的新变量，是否会覆盖旧的缓存值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:34:09.250

> 当我手动更改 config.php 的内容时，如何强制 apc 更新变量？

您在这里有几个选择。

1.  当您调用 时[`apc_store`](http://php.net/apc_store)，您可以以秒为单位设置“生存时间”值。例如，您可以将每个配置值设置为恰好持续五分钟。当一次丢失（[`apc_exists`](http://php.net/apc_exists)）时，您可以触发重新生成和重新缓存它们的代码。
2.  您可以将“最后更新”时间存储在代码可以到达的地方和 APC 内部。比较两者。如果 APC 缓存过期，则触发刷新。
3.  如果您已经自动缓存值，则可以使用[`apc_delete`](http://php.net/apc_delete)对键执行配置更新调用的东西。
4.  如果您*还没有*自动缓存值，您希望让执行配置更新的东西简单地调用`apc_store`它自己。

第一个是最少的努力，第二个是最理智的，第三个和第四个可能是正确的做法，假设配置更新是程序化的事情，而不是完全手动的事情，正如你在这里暗示的那样。

如果配置更新*始终*是手动的，那么值得编写一个您可以手动调用的小脚本来清除或更新缓存。

也就是说，坦率地说，如果您还使用 APC 作为字节码缓存，那么在每次浏览量上解析纯 PHP 配置文件的成本是*不存在的。*在这种情况下，缓存其中定义的值是非常愚蠢的。

> 如果 apc 中存在一个变量，并且添加了一个与现有（更新版本）同名的新变量，是否会覆盖旧的缓存值？

正确，除非您使用[`apc_add`](http://php.net/apc_add)而不是`apc_store`.

# linq - 如何分组和求和操作数据表

> ID：14047918
> 
> 赞同：1
> 
> 时间：2012-12-27T00:20:24.967
> 
> 标签：linq, group-by, sum

这是我的数据表

```
Id    Article    Lot      Ordered      Unit Shipment    Difference
1     32207      21309    80           Case 80          0
2     32218      21309    70           Case 60          10
3     32237      22359    50           Case 50          0
4     32255      24299    100          Case 100         0
5     32207      24299    110          Case 110         0
6     32218      21309    80           Case 75          5
7     32237      21309    60           Case 60          0
8     32255      21309    75           Case 75          0 
```

我需要 Group By 列 Article 和 Lot，以及 Sum 数量列（Ordered、Shipment 和 Difference）。

预期的结果是：

```
Article Lot Ordered Unit    Shipment    Difference
32207   21309   80  Case    80          0
32218   21309   150 Case    135         15
32237   22359   50  Case    50          0
32255   24299   100 Case    100         0
32207   24299   110 Case    110         0
32237   21309   60  Case    60          0
32255   21309   75  Case    75          0 
```

我希望使用 Linq 获得结果。谁能帮我？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:37:58.617

尝试将其转换为**可枚举**然后使用 linq

**更新**

```
from v in mytable
group v by new {v.Article,v.Lot} into g
select new
{
    Article = g.Key.Article ,
    Lot = g.Key.Lot ,
    Ordered = g.Sum(X=>X.Ordered),
    Unit = g.First(),
    Shipment = g.Sum(X=>X.Shipment),
    Difference = g.Sum(X=>X.Difference) 
} 
```

# java - Wso2 ESB - 同时向 Web 服务发送多个请求

> ID：14047923
> 
> 赞同：2
> 
> 时间：2012-12-27T00:22:02.593
> 
> 标签：java, client, benchmarking, esb, wso2esb

如何从 Java 客户端向已部署的 Web 服务发送多个同时 Java 请求？知道客户端是从 WSO2ESB 生成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:57:14.567

如果您不需要为每个请求编写自定义逻辑，我会更喜欢 SoapUI 或 LoadUI 之类的东西。使用它们很容易创建一种压力测试。如果您需要创建自定义测试，您可以自己编写：

1.  生成客户端
2.  使用 ThreadPool 创建任意数量的线程
3.  如果您的网络服务上的操作是双向的 - 测量从发送请求到获得响应的时间
4.  收集统计信息（这可以帮助您了解您的 esb 模块是否应对负载）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T06:06:10.780

有几种选择：

*   **编写您自己的基准驱动程序**- 这很容易，您将完全控制您测量的内容和方式。

*   **网络服务工具**——网络服务器通常带有某种形式的压力测试客户端，您可以直接从网络服务器控制台使用，或者您可以尝试例如 SoapUI。

*   **Http Benchmark Frameworks** - 使用可以让您编写灵活而强大的基准测试驱动程序的基准测试框架。您可以使用 ：

    *   [HttpBenchmark](http://httpd.apache.org/docs/2.2/programs/ab.html) - 这是一个开源 HttpBenchmark，您可以轻松修改并使用它来驱动 Web 服务/ESB 的工作负载。
    *   [Faban](http://faban.org/)框架，用于驱动各种 web 服务基准测试（例如 SPECjEnterprise2010）。Faban 有很好的文档记录，并且包含教程，如果您想设计自己的驱动程序，这些教程也很有帮助/鼓舞人心。

# javascript - JavaScript 如何在内部存储空值？

> ID：14047932
> 
> 赞同：8
> 
> 时间：2012-12-27T00:23:26.553
> 
> 标签：javascript, c++, null, internal

我一直想知道 JavaScript 如何在`null`内部存储值。`null`不同于任何值。我想象作用域的变量存储在某种结构数组中，每个结构对应一个变量。该结构是否具有某种称为“null”的布尔属性？

我会自己在 V8 源代码中寻找它，但我很迷失在 C++ 代码中:(

我在谷歌上找不到任何东西。大多数结果都与诸如“如何确定变量是未定义还是为空？”之类的问题有关。或类似的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:29:49.043

JavaScript 作为一种弱类型的脚本语言，可能有一个变体类型，它支持各种类型的值。我相信 PHP 使用相同类型的变量，尽管它们在其他语言中也是众所周知的，并且在 COM 自动化中发挥着重要作用。

它们基本上是包含类型和值的结构。该值可以是简单值，也可以是指向更大或更复杂值的指针。`null`只是受支持的类型之一，在这种情况下，值本身不起作用。

但是由于 JavaScript 知道很多解释器，所以它的实现方式没有规则，这是你不应该担心的。通常，您只需要了解诸如此类用于时间关键型应用程序的底层技术，无论如何都不应该用 JavaScript 编写。

# css - CSS不会显示div背景图片

> ID：14047938
> 
> 赞同：1
> 
> 时间：2012-12-27T00:24:28.107
> 
> 标签：css, image, html, background

它在我的计算机上完美显示，并且在我尝试替换该背景图片之前可以正常在线显示，我不知道发生了什么，我尝试恢复到旧的，现在一个也不起作用。

正如我所看到的，所有其他样式都适用，图片也是如此（它们都在同一个文件夹中 - 它们通过 css 加载）。所以 CSS 没问题，格式适用于文本、div、按钮和所有内容。该路径也应该没问题，因为背景图像通过相同的代码正常加载并且位于同一文件夹中。

这个加载完美：

```
html {
    background: url(images/background.png) repeat;
} 
```

这个无论如何都不会加载：

```
#container {
    width: 588px;
    height: 617px;
    background-image:url(images/maintext60.png);
    margin: auto;    
} 
```

图片存在于我检查了一百万次的那条路径中。我可以通过浏览器中的直接链接访问它。我也试过

```
('images/maintext60.png');
(/images/maintext60.png);
(../images/maintext60.png); 
```

以及我在网上找到的所有其他内容。发生了什么？除了图片名称和现在第一个起作用的图片名称之外，我没有更改任何内容 - 没有！互联网讨厌我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T01:29:36.677

我建议您尝试解决 Chrome 的问题。

1.  打开您的站点（本地或远程服务器）并打开 Chrome 开发工具（在 OS-X 上为 Cmd+ALt+I，在 Linux 和 Windows 上类似的组合键）。

2.  转到元素面板并查找具有`container`id 的元素。

3.  检查右侧子面板上的“指标”选项卡，看看它是否具有您预期的大小。如果不是，则问题可能不在图像文件 url 上。

4.  如果`container`宽度和高度符合您的预期，请检查“样式”选项卡并查找`background-image`属性。如果图像未正确加载，属性内容可能会显示浏览器在哪里寻找您的图像。

5.  您还可以检查“资源”面板以查看图像是否正确加载。

6.  我能想到的最后一件事：打开网络面板并重新加载页面。您将获得关于您的站点发出的每个 http 请求以及相应服务器响应的指示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T01:53:40.373

对我来说，如果我改变它会起作用：

```
background-image:url(/images/maintext60.png); 
```

到：

```
background-image:url(images/maintext60.png); 
```

所以仔细检查这不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T02:07:34.223

在图片没有上传之前，实际上你在这里看到：

![前](../Images/0804064a259d76603a3bad4bd9464bdf.png)

但后来我看到了。这是我在浏览网站时看到的证明：

![后](../Images/fa6971a92e3d60e2b932a38acb2a85f3.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T11:51:47.357

这是一个缓存问题，但不是我这边。当服务器仍在查看相同的旧文件时，我正在更新并尝试修复它。以下是官方回复：

你好，

对于由此给您带来的任何不便，我们深表歉意。您遇到 CSS 文件问题是因为服务器设置。我们在我们的服务器上缓存。Varnish 缓存软件用于缓存静态页面以获得更好的性能。现在，我已更新您帐户中的 .htaccess 文件以删除您帐户中的缓存。我在 .htaccess 文件中更新了以下代码：

```
<Files *> 
Header set Cache-Control: "private, pre-check=0, post-check=0, max-age=0" 
Header set Expires: 0 
Header set Pragma: no-cache 
</Files> 
```

请通过从您的端更新 CSS 文件来检查这一点。

# oop - 为什么 add: 返回添加到 Smalltalk 集合中的对象？

> ID：14047940
> 
> 赞同：9
> 
> 时间：2012-12-27T00:24:36.237
> 
> 标签：oop, smalltalk, pharo, squeak, visualworks

## 背景

抓住每个 Smalltalk 新手的东西是`add:`不返回“自我”，而是返回被添加的对象。

例如，使用以下代码：

```
myCollection := OrderedCollection new 
  add: 'Peter';
  add: 'John';
  add: 'Paul'. 
```

`myCollection`将包含字符串“Paul”，而不是集合本身。

这是因为`add:`返回要添加的对象，整个级联表达式的计算结果是最后发送的消息。

相反，它应该写`yourself`在最后：

```
myCollection := OrderedCollection new 
  add: 'Peter';
  add: 'John';
  add: 'Paul';
  yourself. 
```

## 问题

*   为什么会这样？
*   这是怎么设计的？
*   `add:`以这种方式行事有什么好处？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T07:52:45.143

我想了很多。我从未听说过 Smalltalk 的任何原始设计者为这个决定辩护，所以我们不确定他们为什么这样做。我已经确定原因是由于级联。如果 add: 返回接收者，那么 (things add: thing1) add: thing2 将与 things add: thing1; 相同。添加：东西2。通过 add: 返回参数，这两个表达式是不同的，程序员可以在适当的时候使用它们。

然而，我认为这是一个错误。我教 Smalltalk 已经超过 25 年了，每次我教它时，人们都会遇到麻烦。我总是警告他们，但他们仍然会在 add: 时出错。所以，我认为这是一个糟糕的设计决定。

这个设计决定是关于库的，而不是编译器。您可以通过进入集合类并更改它们来更改它。当然，无法预测有多少 Smalltalk 程序会崩溃。集合是如此基础，以至于这种改变与对语言的真正改变一样难。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T01:22:09.063

在其他语言中，您可以编写：

```
b[j] = a[i] = e; 
```

如果 `at:put:`返回 put 对象，这会以某种方式保留在 Smalltalk 中：

```
collectionB at: j put: (collectionA at: i put: e). 
```

允许这种链接的`add:`/也存在同样的兴趣：`remove:`

```
collectionB add: (collectionA add: anElement).
collectionB add: (collectionA remove: anElement). 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T08:12:31.600

最好将此类方法发送级联起来，并且永远不要依赖它们的返回值。setter 方法也是如此，有时可能返回 self，有时返回参数。假设这些方法的返回值接近随机并且永远不会使用它是最安全的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T20:27:00.637

我不能为它辩护，我也不能反驳拉尔夫的经历。

对对称的渴望可能是一个促成因素。鉴于 #remove: 返回已删除的对象，因此 #add: 返回已添加的对象是有意义的。

我认为，简单的例子也会使我们产生偏见。当我们已经有对象要添加到变量中时，或者它是一个简单的文字时，返回的值似乎毫无意义。但是如果我们有（有问题的）代码看起来像这样：

```
someProfile add: VirtualMachine youngSpaceEnd - VirtualMachine oldSpaceEnd 
```

如果 someProfile 是一个线性列表，我想你可以获取你刚刚添加的值：'ed via last. 但它可能只是一个袋子，或一套。在这种情况下，可以很方便地执行以下操作：

```
currentSize := someProfile add: VirtualMachine youngSpaceEnd - VirtualMachine oldSpaceEnd 
```

有些人会认为这比：

```
someProfile add: (currentSize := VirtualMachine youngSpaceEnd - VirtualMachine oldSpaceEnd) 
```

虽然最好的是：

```
currentSize := VirtualMachine youngSpaceEnd - VirtualMachine oldSpaceEnd.
someProfile add: currentSize 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T01:33:50.790

我想出的最好的解释是让它等同于一个作业。假设你有这样的代码：

```
(stream := WriteStream on: String new) nextPutAll: 'hello'.
stream nextPut: $! 
```

赋值给一个变量会计算出所赋值的对象。我应该能够用集合替换变量并获得等效的行为：

```
(array at: 1 put: (WriteStream on: String new)) nextPutAll: 'hello'.
(array at: 1) nextPut: $! 
```

现在，话虽如此，我会责备任何编写此代码的开发人员，因为它不可读。我宁愿把它分成两行：

```
array at: 1 put: (WriteStream on: String new).
array first
   nextPutAll: 'hello';
   nextPut: $! 
```

这是我能给出的最好理由。这样做是为了使对集合的赋值与对变量的赋值一致，但是如果您利用该功能，您的代码将难以阅读。

# javascript - JavaScript Base64 加密 url，在 Objective-C 中解密

> ID：14047941
> 
> 赞同：1
> 
> 时间：2012-12-27T00:24:39.497
> 
> 标签：javascript, iphone, ios, base64

我正在尝试解密在 javascript 中生成的 url，这是我在 html 页面中找到的：

```
Base64.encrypt(Base64.decode('Zk05NUQ6YUZVcERKd3pCdlkucUIrbnFtdldTdW5mbkZnZFk5TVFpV3N0NHRaTF9FV1RWSHhjX1pFMDNacmxwUy5JalF3Yw==')); 
```

我的问题是如何在 Objective-C 中解密它，我在我的 Xcode 项目中添加了一个 Base64，并且我使用以下函数对其进行了解码：

```
+ (NSData*) decode:(NSString*) string; 
```

并解码它，但我怎么能加密它？是什么：

```
Base64.encrypt 
```

我如何在 Objective-C 中处理它？

**编辑2：**

我尝试使用 64 位解码，输出是这样的：

```
fM95D:aFUpDJwzBvY.qB+nqmvWSunfnFgdY9MQiWst4tZL_EWTVHxc_ZE03ZrlpS.IjQwc 
```

那我该怎么办？javascript 做这个 Base.encrypt，我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:26:48.460

您需要使用一些实用程序类或某些类别来进行解码和转换。

你可以[在这个非常相关的问题](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)的答案中找到合适的东西。

# ruby - Ruby Koans 关于消息传递“发送”块和参数

> ID：14047942
> 
> 赞同：3
> 
> 时间：2012-12-27T00:24:41.413
> 
> 标签：ruby, methods, block, send, splat

我正在研究 Ruby Koans about_message_passing.rb 并获得了适用于 method_missing 的代码，如下所示：

```
def method_missing(method_name, *args, &block)
  @messages << method_name
  @object.__send__(method_name, *args, &block)
end 
```

这段代码似乎有效，但我不太明白为什么 *args 中需要 splat 并且块需要 & 。

如果我在定义一个方法，我知道 * 和 & 分别用于表示数组参数和块参数，但是当它们与 send 方法一起使用来调用对象上的方法时，这意味着什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T00:37:51.947

我会一次拿这些。完全摆脱`method_missing`这一点，因为它只会让正在发生的事情变得混乱。它实际上与此完全无关。

* * *

splat`*`做了两件事。在方法*定义*的参数中，它将多个参数吸收到一个数组中。在方法*调用*中使用时，它将一个数组分解为单个参数。使用两者允许您将任意数量的参数转发给另一个方法。

```
def foo(*args)
  bar(*args)
end

def bar(a, b, c)
  puts a
  puts b
  puts c
end

foo(1,2,3) # prints 1, 2 and then 3 
```

由于您基本上是在转发所有参数，因此这是相同的模式。

* * *

`&`用于块参数。每个方法调用都可以有其中一个，它是挂在最后的块。这是一个特殊的论点，因为它不直接进入论点。您可以通过捕获 add`&someblock`作为方法*定义*中的最后一个参数来将块捕获到变量中。

然后，您可以使用相同的语法在方法*调用*中传递一个块。

```
def foo(&block)
  bar(&block)
end

def bar
  yield
end

foo { puts 'hello' } # prints hello 
```

这允许您将挂起的块传递给另一个方法，而无需调用它。它并不总是必需的，因为您通常只是`yield`用来执行传递的任何块。但是如果你想做一些除了执行它之外的事情，你需要捕获对块本身的引用。

* * *

所以如果你把这两件事结合起来，你就得到了终极的方法转发器。您捕获所有任意数量的参数，以及挂在末尾的任何块，并将它们发送到另一个方法。

```
# forwards everything to the method `bar`
def foo(*args, &block)
  bar(*args, &block)
end 
```

最后，`send`只是*一种方法*。它需要一个方法的名称，后跟任意数量的参数（不是数组），并且可以选择处理挂起的块。

换句话说：

```
foo.send methodName, *args, &block 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:31:12.637

方法定义中的 splat 意味着“获取所有不匹配的参数并将它们放入一个数组中”（在 ruby​​ 1.8 中，这始终是最后一个参数，但在 1.9 中，splats 可能出现在中间）。

在方法调用中使用它是相反的：这意味着获取这个数组并将其内容用作参数

```
foo(a,b) #call foo with 2 arguments: a and b
foo([a,b]) #call foo with a single array argument 
foo(*[a,b]) # call foo with 2 arguments: a and b 
```

& 类似：在方法定义中，它捕获块并将其转换为 proc，但在方法调用中，它会将 proc（或类似 proc 的对象 - 任何响应`to_proc`都可以）转换为该方法的块

您需要这两个，`method_missing`因为（通常）您想要传递原始方法调用中的所有参数和块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:30:29.787

据我所知，只要你直接传递一个块，它的语法就是 &block_name。

此外，[Object#send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)的方法签名采用无限参数，而不是数组。因此，通过传递 splatted 值 *args，它与传递逗号分隔的 args 相同。

# c++ - 将大量整数输入数组

> ID：14047946
> 
> 赞同：0
> 
> 时间：2012-12-27T00:25:01.113
> 
> 标签：c++, arrays, input, dynamic-arrays

使用 std::cin 将大量数字输入到数组中时，我遇到了一个令人沮丧的问题（尽管我不在乎它是 cin 还是其他东西）。例如，我必须将多达一百万个整数存储到一个整数数组中，并且已经找到了一个解决方案，由于某种原因，该解决方案仅适用于 842-843 的第一个输入。

我目前的代码：

```
#include <iostream>

int main()
{

    size_t array_size;
    size_t sum;

    std::cin >> array_size; //let's say array_size = 10000

    int* _nums = new int[array_size];

    for(int i = 0; i < (int)array_size; i++)
    {
        //everything goes fine if I put something like 500 as the array_size
        std::cin >> _nums[i];
    }

    return 0;

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:43:04.150

作为第一步，添加错误检查，即替换您当前的代码

```
#include <iostream>

int main()
{
    size_t array_size;
    size_t sum;

    std::cin >> array_size; //let's say array_size = 10000

    int* _nums = new int[array_size];

    for(int i = 0; i < (int)array_size; i++)
    {
        //everything goes fine if I put something like 500 as the array_size
        std::cin >> _nums[i];
    }
    return 0;
} 
```

与例如

```
#include <iostream>
#include <vector>        // std::vector
#include <stdexcept>     // std::runtime_error, std::exception
#include <stdlib.h>      // EXIT_FAILURE, EXIT_SUCCESS
#include <string>        // std::string

bool throwX( std::string const& s ) { throw std::runtime_error( s ); }

void cppMain()
{
    int array_size;

    std::cin >> array_size; //let's say array_size = 10000

    std::vector<int> nums( array_size );

    for( int i = 0; i < array_size; ++i )
    {
        //everything goes fine if I put something like 500 as the array_size
        std::cin >> _nums[i]
            || throwX( "Oops, input failed!" );
    }
}

int main()
{
    try
    {
        cppMain();
        return EXIT_SUCCESS;
    }
    catch( std::exception const& x )
    {
        cerr << "!" << x.what() << endl;
    }
    return EXIT_FAILURE;
} 
```

免责声明：现成的代码，可能需要修复拼写错误。

# app-store-connect - iTunes Connect 假期关闭时如何查看销售结果？

> ID：14047950
> 
> 赞同：-1
> 
> 时间：2012-12-27T00:25:43.827
> 
> 标签：app-store-connect

12 月是应用程序开发者的最佳时间，但苹果关闭 iTunes Connect 一个多星期导致无法访问销售数据？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:25:43.827

我偶然注意到这是可能的！我就是这样做的：

1.  **iAd 未关闭，因此您可以通过**[iad.apple.com/itcportal](https://iad.apple.com/itcportal/)登录您的 iAd 帐户，这应该可以**验证**您的 iTunes Connect 身份。

2.  输入此地址以**绕过 ITC 登录**（和假日消息）：[https ://reportingitc.apple.com](https://reportingitc.apple.com)

您可以看到该地址不是[https://itunesconnect.apple.com/](https://itunesconnect.apple.com/)被假期消息阻止。

我为此使用 Chrome，但应该适用于任何浏览器

我可以访问 12 月 22 日以来的所有销售数据，但我仍然无法访问任何其他页面。

![在此处输入图像描述](../Images/0a668969e30c52899b23402a162ad5b8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:05:54.967

如果你已经使用了销售数据剥头皮服务，比如**Distimo Monitor** ，那么他们可能能够从 iTunes Connect API 中提取一些数据，但是我猜你还没有设置过类似的东西。

你自己提供的绕过登录对我不起作用，尽管我当然希望它对你有用。

请注意，您设法访问的任何报告都有可能不完整或不准确，因为 Apple 明确表示在假期关闭期间报告将不可用/不可靠。

如果您现在设置[Distimo Monitor](https://analytics.distimo.com)，您可能能够从今天开始访问销售数据：我也很确定它无法获取对历史数据的访问权限。

你只剩下一天了！

*注意：*我个人使用 Distimo Monitor，过去几天的结果略显粗略，尽管看起来很可靠。

# android - 如何在三星 S3 上的电源关闭“设备选项”列表中添加额外的项目？

> ID：14047956
> 
> 赞同：1
> 
> 时间：2012-12-27T00:26:43.493
> 
> 标签：android, events, broadcastreceiver, android-button, android-event

我需要在 S3 上长按电源按钮时弹出的微调器列表中添加一个额外的选项。该列表已经包含以下项目 -

1.  关机
2.  飞行模式
3.  重新开始
4.  静音 - 振动 - 声音
5.  ***需要在这里添加我的新选项。***

如何将我的选项添加到此列表中？我通读了 Intent 和[ACTION_SHUTDOWN](http://developer.android.com/reference/android/content/Intent.html#ACTION_SHUTDOWN)文档。但是这个广播是在用户已经选择了 POWER OFF 之后触发的。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:31:14.870

> 如何得到这个？

第 1 步：将源代码下载到 Android。

第 2 步：修改该源代码以包含您的应用，并将您的应用置于关机菜单中。

第 3 步：将您的 Android 修订版构建到 ROM 模块中。

步骤#4：在任何设备上安装该 ROM 模块。我不能说你是否可以在 Galaxy S III 上做到这一点。

您无法从普通的 SDK 应用程序修改此菜单。

# javascript - div在一个盒子里

> ID：14047962
> 
> 赞同：3
> 
> 时间：2012-12-27T00:27:14.047
> 
> 标签：javascript, html, css

我花了很多时间试图做到这一点：

![在此处输入图像描述](../Images/9f980afa76311fe78a50b04334043d76.png)

黑色方块是 a `div`（不一定是 a `div`）`container`。

所有其他方块都是`div`s 或`span`s 或其他任何东西（这不是问题）

有人可以指导我如何使用纯 HTML、CSS 和 Javascript 来完成此任务吗？

*我尝试制作所有正方形`div`，但是因为在一行中它们是一个高度不同的正方形，下一行将缺少“部分”，然后尝试使用边距来解决这个问题 - 但它没有成功，我我相信它并不难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:56:45.557

您需要使用的是 CSS3 属性`column-count`。它显示任何类型的容器内的列数。所以如果你想把它用作相册

```
#photos {
   /* Prevent vertical gaps */
   line-height: 0;

-webkit-column-count: 3;
-webkit-column-gap:   0px;
-moz-column-count:    3;
-moz-column-gap:      0px;
column-count:         3;
column-gap:           0px;

}
#photos img {
/* Just in case there are inline attributes */
width: 100% !important;
height: auto !important;
} 
```

#photos 将是您的容器。

感谢 Chris Coyier 的文章[http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:34:01.223

尝试绝对定位：

```
<style>
.rect {
    position: absolute;
    width: 100px ;
    height: 200px;
}

</style>
<div class="rect" style="top:0;left:0;border:3px solid blue"></div>
<div class="rect" style="top:206px;left:0;border:3px solid green"></div>
<div class="rect" style="top:0;left:106px;border:3px solid red; height: 300px"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:41:19.377

由于您没有代码可以向我们展示，我不会为您编写代码......但我可以告诉您什么可能对此有用。

以下是一些可以帮助您实现此目的的 css 参数：

*   `position`

*   `margin`

*   `display`

*   `float`

这里的每一个方块都应该是`DIV`一个很好的组合，它们应该可以解决问题！

# c# - 在 C# 中生成唯一但可读的名称

> ID：14047963
> 
> 赞同：4
> 
> 时间：2012-12-27T00:27:24.593
> 
> 标签：c#

我正在尝试编写一个服务，当每个用户第一次使用该服务时，他将被分配一个唯一的名称。我希望生成此名称，而不是让用户设置它。另外，我希望这个名称有点可读性和令人难忘，而不是听起来像 GUID 或时间戳。本质上，我希望这类似于 Xbox 玩家代号。

我知道永远不会有超过 1000 个用户，因此保持唯一性不会成为问题（我可以避免使用 GUID 的另一个原因）

我正在考虑从字典中提取一些形容词、名词等，并生成它们的随机但独特的组合。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:49:14.967

您可以使用英语 n-gram 语料库（例如三个字母序列）并使用它们来生成看起来像英语但实际上完全是胡言乱语的单词。这种数据本质上是随机的，但对人类语言和记忆的性质具有柔软性。

[这与我正在谈论的类似](http://nlpb.blogspot.co.uk/2011/01/experiments-with-statistical-language.html)，只是它将整个单词概率性地组合成句子。我更多地考虑通过将字母序列组合成虚构的单词来做到这一点。

**编辑**实际上[这个页面](http://www.mathsisfun.com/data/random-words.html)讨论了我在说什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:39:58.540

这只是一个完全解决您的问题的代码示例。如果它不能解决它，请尝试在您的问题中更具体。`System.Random`将类的实例和单词列表（您的字典）传递给以下方法。

```
static string GetGuid(Random random, IList<string> words)
{
    const int minGuidSize = 10;
    const int maxGuidSize = 15;
    var builder = new StringBuilder();
    while (builder.Length < minGuidSize)
        builder.Append(words[random.Next(words.Count)]);
    return builder.ToString(0, Math.Min(builder.Length, maxGuidSize));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T00:50:11.617

您可以使用此 10 000 个随机名称列表： [http ://www.opensourcecf.com/1/2009/05/10000-Random-Names-Database.cfm](http://www.opensourcecf.com/1/2009/05/10000-Random-Names-Database.cfm)

或者使用这个网站生成一个随机的名字列表：http: [//www.fakenamegenerator.com/order.php](http://www.fakenamegenerator.com/order.php)

安全的方式。维护剩余未使用名称的列表。

简单的方法（也非常可扩展）但不安全。依靠 2 个用户随机获得相同 id 的可能性。

我会尝试获取大约一千种模式的 3 或 4 个列表，然后在每个列表中随机选择一个值。这将产生大约 10E12 种可能性，足以避免 1000 个用户发生冲突。

JohnLampMartin2212

# c# - 获取 MySql 上的最后一行列

> ID：14047971
> 
> 赞同：0
> 
> 时间：2012-12-27T00:28:52.817
> 
> 标签：c#, mysql, sql

我有 1 个列名：`PersonID`它包含名称 ex john doe

```
Table name: Person
Column name: PersonID

line1: John Doe
line2: Doe john 
```

现在提取最后一行？

此代码返回总行数，但不返回行文本

```
SELECT "PersonID", COUNT(*) FROM "Person"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:36:37.277

降序排列，然后使用限制返回最后一行——现在在第一个位置！

```
SELECT *
FROM Person
ORDER BY PersonId DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:41:06.303

```
select * from Person order by PERSONID DESC Limit 0,1 
```

# jenkins - Jenkins - 在构建步骤期间更新构建更改日志

> ID：14047974
> 
> 赞同：4
> 
> 时间：2012-12-27T00:29:18.283
> 
> 标签：jenkins

我注意到，如果您将 Jenkins 与 SVN 或 CVS 选项一起使用，则会为每个构建创建一个 changelog.xml，其中包含该构建的作者和提交消息。

不幸的是，在我的设置中，我没有使用 SVN 或 CVS，所以我无法利用 changelog 解析器。我想知道是否可以使用相同的格式（如 SVN XML 更改日志）创建您自己的更改日志，然后在构建过程中将 Jenkins 指向它。这样，当有人单击构建的更改时，他们将能够看到更改的内容以及更改的人员。

我尝试创建一个 changelog.xml，然后更新 build.xml 以使用 SVN 解析器，但我注意到了两个问题：
1）您必须重新加载配置文件才能显示
2）Build.xml在作业完成之前似乎不会创建

有关更改日志解析器的一些信息，但您似乎无法在构建步骤中访问它：[https ://wiki.jenkins-ci.org/display/JENKINS/Change+log](https://wiki.jenkins-ci.org/display/JENKINS/Change+log)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:20:05.540

Maybe a **system groovy scripts** would be a good direction (groovy script plugin). Just add a new script as your build step. You can access your AbstractBuild object by running the following code:

```
import hudson.model.*
import hudson.util.*
import hudson.scm.*

def thr = Thread.currentThread()
def build = thr?.executable 
```

I'm trying to solve a similar problem currently, but my use case change a bit. I try to copy the changes from Upstream project in the similar way that **BlameSubversion** plugin does. Unfortunately I can't use the mentioned above SCM plugin because it doesn't work with post-commit-hook, so I have to write my own solution.

Take a look at copyChangeLogFromTriggerJob and copyRevisionFromTriggerJob methods to get know how BlameSubversion does that.

I'm able to copy changes and revision but I'm still fighting with ChangeLogParser. I would be gladfull for any help as well.

# php - 在 PHP 中执行 Python 脚本并在两者之间交换数据

> ID：14047979
> 
> 赞同：29
> 
> 时间：2012-12-27T00:30:23.603
> 
> 标签：php, python

是否可以在 PHP 中运行 Python 脚本并相互传输变量？

我有一门课，它以某种全球方式从网站上删除数据。我想让它变得更具体，并且已经有针对多个网站的 python 脚本。

我正在寻找一种方法将这些内容纳入我的课堂。

两者之间是否有可能进行安全可靠的数据传输？如果是这样，让这样的事情发生有多困难？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-27T00:41:10.627

您通常可以通过使用通用语言格式以及使用`stdin`和`stdout`来传达数据来进行语言之间的交流。

**使用 shell 参数通过 JSON 发送初始数据的 PHP/Python 示例**

PHP：

```
// This is the data you want to pass to Python
$data = array('as', 'df', 'gh');

// Execute the python script with the JSON data
$result = shell_exec('python /path/to/myScript.py ' . escapeshellarg(json_encode($data)));

// Decode the result
$resultData = json_decode($result, true);

// This will contain: array('status' => 'Yes!')
var_dump($resultData); 
```

Python：

```
import sys, json

# Load the data that PHP sent us
try:
    data = json.loads(sys.argv[1])
except:
    print "ERROR"
    sys.exit(1)

# Generate some data to send to PHP
result = {'status': 'Yes!'}

# Send it to stdout (to PHP)
print json.dumps(result) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T01:22:27.837

您正在寻找“进程间通信”（IPC） - 您可以使用 XML-RPC 之类的东西，它基本上可以让您在远程进程中调用一个函数，并处理语言之间所有参数数据类型的翻译（这样您就可以从 Python 调用 PHP 函数，反之亦然 - 只要参数是[受支持的类型](http://en.wikipedia.org/wiki/XML-RPC#Data_types)）

Python 有一个内置的[XML-RPC 服务器](http://docs.python.org/2/library/simplexmlrpcserver.html)和一个[客户端](http://docs.python.org/2/library/xmlrpclib.html)

phpxmlrpc库既有客户端也有[服务器](http://phpxmlrpc.sourceforge.net/)

都有[Python 服务器和客户端](http://docs.python.org/2/library/simplexmlrpcserver.html#simplexmlrpcserver-example)以及[PHP 客户端](http://phpxmlrpc.sourceforge.net/doc-1.1/ch09s01.html)和[服务器的示例](http://phpxmlrpc.sourceforge.net/doc-1.1/ch05s05.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-28T17:08:35.297

刚遇到同样的问题，想分享我的解决方案。（密切遵循 Amadan 的建议）

## 蟒蛇片

```
import subprocess

output = subprocess.check_output(["php", path-to-my-php-script, input1]) 
```

* * *

你也可以这样做：blah = input1 而不是仅仅提交一个未命名的参数......然后使用 $_GET['blah'].

## php片断

```
$blah = $argv[1];

if( isset($blah)){

    // do stuff with $blah

}else{
    throw new \Exception('No blah.');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T00:36:10.710

最好的办法是将 python 作为子进程运行并捕获其输出，然后对其进行解析。

```
$pythonoutput = `/usr/bin/env python pythoncode.py`; 
```

使用 JSON 可能有助于简化两种语言的生成和解析，因为它是标准的并且两种语言都支持它（嗯，至少非古代版本支持）。在 Python 中，

```
json.dumps(stuff) 
```

然后在 PHP

```
$stuff = json_decode($pythonoutput); 
```

您还可以根据您需要的确切场景将数据显式保存为文件，或使用套接字，或者有许多不同的方法来提高效率（也更复杂），但这是最简单的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-27T11:03:53.940

对我来说，`escapeshellarg(json_encode($data))`给出的不是一个 json 格式的字符串，而是像 { name : Carl , age : 23 } 这样的东西。所以在python中我需要`.replace(' ', '"')`空格来获得一些真正的json并能够对其进行转换`json.loads(sys.argv[1])`。

问题是，当有人输入一个已经有空格的名字时，比如“Ca rl”。

# android - 奇怪的 NetworkOnMainThread 异常

> ID：14047982
> 
> 赞同：0
> 
> 时间：2012-12-27T00:30:41.297
> 
> 标签：android

我是android新手，请停下来。

这是一个非常简单的场景，有一个操作栏，当一个选项卡被选中时，我需要发送一个 http 请求来获取一个文章列表，当响应到达时，更新一个列表视图，这就是我得到这个异常的地方。

我知道我应该将网络操作与 UI 线程隔离开来，因此我在 AsyncTask 类中实现了网络功能。

最奇怪的是，在我尝试获取文章列表之前，我实际上已经调用了一次网络函数来登录，并且运行良好，没有任何异常！猜猜看，如果我用登录调用替换获取文章列表调用，它也可以正常工作。所有的代码都是一样的，只是参数不同。

我是这样做的，因为太多的模块会使用网络模块，所以我使用静态包装器：

UI -> 静态工厂 -> 新建 AsyncTask -> 响应到达 -> 在静态工厂中调用静态回调函数 -> 在 UI 中调用回调函数

AsyncTask doInBackground

```
@Override
protected HttpResponse doInBackground(String... params) {
    // TODO Auto-generated method stub
    String uri = params[0];
    HttpGet get = new HttpGet(uri);
    try {
        return _client.execute(get);
    }
    catch(Exception e) {
        e.printStackTrace();
        return null;
    }   
} 
```

AsyncTask 后执行

```
 @Override
    protected void onPostExecute(HttpResponse result) {
        //Do something with result
        if (result != null) {
            try {
                JSONObject json = FormJsonFromResponse();
                Command.OnTaskComplete(json);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    } 
```

静态包装代码：

```
@Override
    public static void OnTaskComplete(JSONObject json) {
        // TODO Auto-generated method stub
        if(_callback != null) {
            _callback.OnCommandComplete(json);
        }
    } 
```

这是我在静态包装器中调用 asynctask 的方式：

```
public static void LogIn(String user, String pass) {
    new NetworkTask().execute(_uriPrefix + login, _user, _pass);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:54:54.537

按照以下模式修改您的 AsyncTask：

```
@Override
protected JSONObject doInBackground(String... params) {
    // TODO Auto-generated method stub
    String uri = params[0];
    HttpGet get = new HttpGet(uri);
    try {
        HttpResponse response = _client.execute(get);
        return FormJsonFromResponse();
    }
    catch(Exception e) {
        e.printStackTrace();
        return null;
    }   
} 
```

AsyncTask 后执行

```
@Override
protected void onPostExecute(JSONObject result) {
    //Do something with result
    if (result != null) {
        try {
            Command.OnTaskComplete( result );
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

# netty - Netty ChannelPipelinefactory getPipeline() 输入参数

> ID：14047988
> 
> 赞同：0
> 
> 时间：2012-12-27T00:31:52.983
> 
> 标签：netty

我有一个关于可以向 getPipeline() 提供什么类型的输入的问题...

我希望该方法为不同的 ip 地址返回不同的管道，基本上管道是相同的，但是考虑到客户端 IP，每个阶段的某些处理程序使用的某些资源可能相同，也可能不同。例如。我想共享一个基于 IP 输入到阶段（处理程序）的对象，相同的 IP = 相同的对象。

如果可能的话，我希望这发生在 getPipeline() 本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:38:14.093

因为`ChannelPipelineFactory.getPipeline()`不接受任何参数，所以你不能用`ChannelPipelineFactory`.

相反，我建议您`ChannelPipelineFactory.getPipeline()`使用设置管道的处理程序返回一个新管道。也就是说，通道将从具有单个处理程序的管道开始，并且单个处理程序`channelConnected()`可以将实际处理程序附加到管道并删除自己。

这是一个例子：

```
public class MyChannelPipelineFactory implements ChannelPipelineFactory {
    public ChannelPipeline getPipeline() {
        return Channels.pipeline(new MyChannelInitializer());
    }
}

public class MyChannelInitializer extends SimpleChannelUpstreamHandler {
    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent evt) {
        Channel ch = ctx.getChannel();
        ChannelPipeline p = ch.getPipeline();
        if (matchesA(ch.getRemoteAddress()) { // Protocol A
            p.addLast("A.decoder", new DecoderA());
            p.addLast("A.encoder", new EncoderA());
        } else { // Protocol B
            p.addLast("ssl", new SslHandler(...));
            p.addLast("B.decoder", new DecoderB());
            p.addLast("B.encoder", new EncoderB());
        }
        p.addLast("commonLogic", new CommonLogicHandler());
        p.remove(this);
        ctx.sendUpstream(evt);
    }
} 
```

# php - 将特定数据库列放入数组

> ID：14047991
> 
> 赞同：1
> 
> 时间：2012-12-27T00:32:04.260
> 
> 标签：php, mysql, arrays, formatting, ip

最初，这个简单的数组和 foreach 语句可以完美运行，但我需要从 php 数组更改为从数据库中获取信息：

```
$serversArray = array(
    "domainname1.com",
    "domainname2.com:port",
    "domainname3.org",
    "000.000.000.000:port");

foreach($serversArray as $server) 
```

.

```
ID    IP                Port
1     domainname1.com   
2     domainname2.com   12345
3     domainname3.org   
4     000.000.000.000   54321 
```

我需要弄清楚的是如何将 IP 和 Port 列格式化为 ip:port （中间有冒号），然后让 foreach 语句识别每一个，以便它可以使用其他脚本处理它，就像如何它已经适用于数组。（我也尝试在 foreach 中使用 sprintf，但这打破了页面。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:52:06.413

以下是如何让查询以正确的格式返回：

```
SELECT IF(`PORT` IS NULL, `IP`, CONCAT(`IP`,":",`PORT`)) as `Formatted IP`
FROM YOUR_TABLE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T00:52:23.580

你想从数据库查询中构建 $serversArray 吗？

```
$serversArray = array();
$sql     = "SELECT ip, port FROM my_table";
$result = mysql_query($sql);
while ($row  = mysql_fetch_array($result))
{
    // if have port include it after : otherwise just include ip
    $serversArray[] = $row['port'] ? "{$row['ip']}:{$row['port']}" : $row['ip'];
} 
```

* * *

老式的 sql 查询只是为了显示构建数组的过程。目前我们应该使用[MySQL Functions (PDO_MYSQL)](http://php.net/manual/en/ref.pdo-mysql.php)

# jquery - jQuery 在“每个”中包含隐藏的 div

> ID：14047992
> 
> 赞同：4
> 
> 时间：2012-12-27T00:32:15.353
> 
> 标签：jquery

我需要找到一种在`each`下面的语句中包含隐藏 div 的方法。我似乎找不到答案。它不仅适用于隐藏元素的孩子，所以我无法根据`display:none`

```
$("div").each(function(){
    if ($(this).hasScrollBar()){
        $(this).addClass('scrollable');
    }
}); 
```

hasScrollBar 功能：

```
(function($) {
    $.fn.hasScrollBar = function() {
        return this.get(0).scrollHeight > this.innerHeight();
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T00:34:23.863

```
$('div')         finds all divs
$('div:hidden')  finds only hidden divs
$('div:visible') finds only visible divs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:58:30.067

您似乎正在尝试识别所有显示时需要滚动条的元素。一种方法是克隆元素，将其渲染到屏幕外，然后确定它是否需要滚动条。

```
$("div").each(function(){
    var clone = $(this).clone();
    clone.show()
         .css('position','fixed')
         .css('left','-10000000');
    $(document).append(clone);
    if (clone.hasScrollBar()){
        $(this).addClass('scrollable');
    }
    clone.remove();
}); 
```

# objective-c - autorelease 在自动引用计数模式下不可用

> ID：14047993
> 
> 赞同：2
> 
> 时间：2012-12-27T00:33:03.203
> 
> 标签：objective-c, ios, memory-management

> **可能重复：**
> [我收到此错误“自动释放”不可用：在自动引用计数模式下不可用](https://stackoverflow.com/questions/6363566/im-getting-this-error-autorelease-is-unavailable-not-available-in-automatic-r)

我正在通过 2011 年出版的名为 Objective-C 基础知识的书学习 Objective-C。它正在构建一个简单的应用程序来介绍 iOS 概念并教授 Objective-C 语言。自本书出版以来，平台或语言似乎发生了一些变化。当我尝试从书中构建代码时（关键段落摘录如下），我收​​到了这个错误：

```
autorelease is unavailable: not available in automatic reference counting mode
ARC forbids explicit message send of 'autorelease' 
```

错误消息出现在代码中实际使用自动释放的几行上方。

我只有大约 1 小时的 Objective-C 和 iOS 经验，所以我不知道如何解决这个问题，所以我可以继续阅读本书。任何帮助，将不胜感激。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){                        #### error message here
        cell = [[[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                 reuseIdentifier:CellIdentifier]autorelease];  ### autorelease used here
    }
    cell.textLabel.text = [NSString
                           stringWithFormat:@"Rental Property %d", indexPath.row];
    NSLog(@"Rental Property %d", indexPath.row);
    return cell; 
} 
```

如果我不能解决这些类型的小问题，那么我将无法跟随这本书。如果我可以使用某种版本系统（例如 rvm for Ruby）来避免此类问题，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T00:37:51.300

如果你只有一个小时，我建议重新启动。

在 Xcode 中构建 Objective-C 项目有一个称为自动引用计数的特性。你的书没有使用它。

重新启动时，请密切注意通过向导创建项目。您需要确保

> 使用自动引用计数

未选中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T00:36:13.520

阅读 iOS 的[高级内存管理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。这是一本很好的读物，即使您继续使用 ARC，也很容易理解。仍然存在需要了解它的场景。

autorelease 是手动内存管理的一部分。

后来在 iOS 5 中，添加了 ARC（自动引用计数）以避免手动管理内存。

这是比较[manual 和 ARC](http://blog.teamtreehouse.com/ios-5-automatic-reference-counting-arc)的文章。

# python - 从多用户 Google 日历中获取所有条目

> ID：14047994
> 
> 赞同：0
> 
> 时间：2012-12-27T00:33:18.897
> 
> 标签：python, google-api, google-calendar-api, gdata

所以我有一个企业日历，它是组织中一位经理的默认 Google 日历。她在日历上有自己的条目，但也有许多条目似乎最初是在其他用户的日历上输入并与此默认日历共享或复制的。我正在尝试使用 Python Google Calendars API 来获取日历上所有事件的列表。不幸的是，它只列出了经理添加的事件，即使经理可以看到所有其他事件。这是我在特定日期范围内检索条目的代码：

```
def dateRangeQuery(calendar_service, startDate, endDate):
    query = gdata.calendar.service.CalendarEventQuery('default', 'private', 'full')
    query.start_min = startDate
    query.start_max = endDate
    feed = calendar_service.CalendarQuery(query)
    for entry in feed.entry:
        print entry.title.text 
```

有没有办法在没有登录信息的情况下检索其他用户的条目？

抱歉，我对 Google 日历本身并不熟悉。在进一步调查中，我很确定正在发生的事情是其他用户正在保留日历并与经理共享某些事件。所以我的问题归结为：有没有办法使用 Google Calendars API 列出共享事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:00:05.100

您应该使用新的 Google Calendar API v3 和[Google API Python Client](http://code.google.com/p/google-api-python-client/)。针对旧的、已弃用的 API 版本进行开发是没有用的。

听起来上面包含所有条目的日历是资源日历。如果是这种情况，您应该以对资源日历拥有所有权的用户身份进行身份验证，但您应该检索资源日历的条目，而不是用户的主日历：

```
events = service.events().list(calendarId='resource@email-address.com').execute()

while True:
  for event in events.get('items', []):
    print event['summary']
  page_token = events.get('nextPageToken')
  if page_token:
    events = service.events().list(calendarId='resource@email-address.com', pageToken=page_token).execute()
  else:
    break 
```

# java - Java JPanel 不会在 JFrame 中显示

> ID：14047996
> 
> 赞同：1
> 
> 时间：2012-12-27T00:33:51.987
> 
> 标签：java, swing, jframe, jpanel

这是我第一次使用 stackoverflow，我遇到了一个我似乎无法深入了解的问题。我正在尝试独立开发一个小型桌面游戏，它使用一个名为“Frame.java”的类来创建一个包含所有菜单的 JFrame，因此我需要使用一个名为“create()”的方法来返回框架。我还使用了另一个名为“MainPanel.java”的类，它扩展了 JPanel，以创建 MainPanel 的实例以添加到框架的内容窗格中。但是，当我在我的小驱动程序中运行所有代码时，似乎什么都没有显示。任何帮助，将不胜感激！

```
public class MainPanel extends JPanel{

    //the background image of the game
    private BufferedImage img = null; 
    //GUI components of the game
    private JPanel gameWindow, gameWindowHolder, gameInfoHolder, LevelPanel, RevenuePanel,
                    ActionPanel, TimePanel;

    public MainPanel(String path, int width, int height){

        //create BufferedImage based on path
        img = new ImageHelper().createBufferedImage(path);
        //use img to create JPanel gameWindow
        gameWindow = ImageHelper.makeImageComponent(img, width, height);

        gameInfoHolder = new JPanel();
        gameInfoHolder.setPreferredSize(new Dimension(width+10, height+10));
        gameInfoHolder.setBackground(Color.black);
        gameInfoHolder.add(gameWindow);

        //set size of this MainPanel
        setPreferredSize(new Dimension(width+300, height+10));
        //add gameInfoHolder to MainPanel
        add(gameInfoHolder);

    }

    public void paint(Graphics g) {
        super.paintComponent(g);

    }
} 
```

* * *

```
public class Driver {

public static void main( String []args){
    JFrame frame = Frame.create();

    JPanel panel = new MainPanel("images/backgrounds/jessicaAlba.jpg", 330, 500);

    frame.getContentPane().add(panel);

    frame.pack();
    frame.setVisible(true);
}

} 
```

* * *

```
public class ImageHelper {

//
//Returns an ImageIcon object based on the path
//
public ImageIcon createImageIcon(String path, String description){

    URL imgURL = getClass().getResource(path);
    if (imgURL != null)
        return new ImageIcon(imgURL, description);
    else {
        System.err.println("Couldn't find this file: " + path + ". Check path.");
        return null;
    }
}

//
//Returns an Image object based on the path
//
public Image createImage(String path){

    URL imgURL = getClass().getResource(path);
    Toolkit kit = Toolkit.getDefaultToolkit();

    if (imgURL != null){
        return kit.createImage(imgURL);
    }
    else {
        System.err.println("Couldn't find this file: " + path + ". Check path.");
        return null;
    }

}

//
//Returns a BufferedImage object based on the path
//
public BufferedImage createBufferedImage(String path){
    BufferedImage image;
    URL imgURL = getClass().getResource(path);
    try
    {
        image = ImageIO.read(imgURL);
    }
    catch (IOException e)
    {
        System.err.println("Couldn't find this file: \""+ path +"\". Check path.");
        return null;
    }
    return image;
}

//
//Returns a JPanel object composed of the image found in the path.
//
public static JPanel makeImageComponent(String path, int width, int height){
    BufferedImage image;
    JLabel picLabel;
    ImageIcon icon;

    JPanel panel = new JPanel();
    JPanel panel2 = new JPanel();
    ImageHelper h = new ImageHelper();

    image = h.createBufferedImage(path);
    image = resize(image, width, height);
    icon = new ImageIcon(image);

    panel.setPreferredSize(new Dimension(width, height));
    panel2.setPreferredSize(new Dimension(width+10, height+10));

    panel2.setBackground(Color.black);
    picLabel = new JLabel(icon);
    panel.add(picLabel);
    panel2.add(panel);

    return panel2;
}

//
//Returns a JPanel object composed of the BufferedImage object in the argument
//
public static JPanel makeImageComponent(BufferedImage image, int width, int height){
    JLabel picLabel;
    ImageIcon icon;

    JPanel panel = new JPanel();
    image = resize(image, width, height);
    icon = new ImageIcon(image);
    panel.setPreferredSize(new Dimension(width, height));
    picLabel = new JLabel(icon);
    panel.add(picLabel);

    return panel;
}

//
//Resizes the BufferedImage object to the specified new width and new height.
//
public static BufferedImage resize(BufferedImage img, int newW, int newH) {  
    int w = img.getWidth();  
    int h = img.getHeight();  
    BufferedImage dimg = new BufferedImage(newW, newH, img.getType());  
    Graphics2D g = dimg.createGraphics();  
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);  
    g.drawImage(img, 0, 0, newW, newH, 0, 0, w, h, null);  
    g.dispose();  
    return dimg;  
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T01:24:47.033

没有任何内容显示，因为您正在短路油漆“堆栈”，`super.paintComponent`因此不会绘制任何子组件。

```
public void paint(Graphics g) {
   super.paintComponent(g);
} 
```

由于这实际上没有任何作用，因此可以将其删除并显示添加的面板。