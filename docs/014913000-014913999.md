# StackOverflow 问答 14913000-14913999

# android - pygame android prelash 图像永远存在

> ID：14913000
> 
> 赞同：0
> 
> 时间：2013-02-16T17:23:18.220
> 
> 标签：android, pygame

我用 python 编写的小游戏遇到了奇怪的问题，我正在使用这个文档[http://pygame.renpy.org/index.html将它推送到 andorid](http://pygame.renpy.org/index.html)

但是我的 android-presplash.jpg 永远停留在屏幕上。尽管我正在播放不同的介绍屏幕。( [http://pygame.renpy.org/android-advanced.html](http://pygame.renpy.org/android-advanced.html) )

我尝试使用我的所有虚拟设备和带有 2.3 android 的 LG 手机。

请提出一些解决方案来解决这个问题。以下是我的部分代码：

```
import pygame

class Game:
    def __init__(self):
        pygame.init()
        self.window = pygame.display.set_mode((1300,500))

    def checkRectCollidePoint(self,rect,pos,x):
        NewRect=pygame.Rect(rect.left+x[0], rect.top+x[1], rect.width, rect.height)
        if NewRect.collidepoint(pos):
            return True

    def loadingScreen(self):
        loadingScreenSprite=pygame.image.load('Intro.jpg').convert_alpha()  
        loadingScreenSprite = loadingScreenSprite.convert_alpha() 

        myfont = pygame.font.Font("comic.ttf", 40)
        ExitText  = myfont.render("Exit    :", 1,[0,0,128])

        dirty=[]
        dirty.append(self.window.blit(loadingScreenSprite,(0,0)))
        dirty.append(self.window.blit(ExitText, [120,300]))
        pygame.display.update(dirty)

        needgoodVarRunning=True
        while needgoodVarRunning:
            for event in pygame.event.get():
                if event.type == pygame.MOUSEBUTTONDOWN:
                    pos = pygame.mouse.get_pos()
                    if self.checkRectCollidePoint(ExitText.get_rect(),pos,[120,300]):
                        needgoodVarRunning=False
def main():
    game = Game() 
    game.loadingScreen()

if __name__ == "__main__":
    main() 
```

# mysql - 事件未按照 MySQL 中的代码执行

> ID：14913003
> 
> 赞同：1
> 
> 时间：2013-02-16T17:23:30.207
> 
> 标签：mysql

我创建了一个事件，该事件将根据插入行的余额和时间每 5 分钟更新一次表“try_event”中的余额。

活动代码：

```
delimiter $$

CREATE EVENT `event`
ON SCHEDULE every 1 second  
DO 
begin
-- update balance by 2%
UPDATE try_event 
SET Balance = case 
WHEN timestampdiff(minute,date_created,current_timestamp) >0 and timestampdiff(minute,date_created,current_timestamp) MOD 5 = 0 and (balance>2000 and balance<3000) then Balance * 1.02 
end;
 end $$
delimiter ; 
```

桌子 ：

```
create table try_event(balance numeric(10,2) not null,date_created timestamp); 
```

插入行：

```
insert into try_event values(2500,default);

insert into try_event values(1000,default); 
```

但它仍然`balance=2500`在 5 分钟后给出。

当我删除“ `(balance>2000 and balance<3000)`”时，整个余额列都会更新，结果是：

```
2550

1020 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:42:27.903

我刚刚在 MySQL 5.5.29 的一个实例上创建了一个测试表（实际上是 Percona Server，它是带有一些补丁和新功能的 MySQL）。它工作正常，它更新了 2500 余额并没有更新 1000 余额。

这是显示更新发生的检查（包括自动更新 TIMESTAMP 列）：

```
mysql> SELECT timestampdiff(MINUTE, date_created, current_timestamp) AS td, 
              balance FROM try_event;
+------+---------+
| td   | balance |
+------+---------+
|    8 |    1000 |
|    3 |    2550 |
+------+---------+ 
```

我对事件定义做了些微改动：

使用 CASE 表达式时，表示“ELSE”子句是值得的，否则如果 WHEN 条件为假，并且您没有 ELSE 子句，则 CASE 表达式的结果只是 NULL。

```
UPDATE try_event 
SET Balance = CASE 
WHEN timestampdiff(minute,date_created,current_timestamp) >0 
 AND timestampdiff(minute,date_created,current_timestamp) MOD 5 = 0 
 AND balance>2000 and balance<3000 
THEN Balance * 1.02 
ELSE Balance  -- this is what I added.
END; 
```

是否有可能您的*balance*列被声明为 NOT NULL，因此 UPDATE 试图将 balance 设置为 NULL 并且它只是失败了？

我还删除了平衡范围比较周围的括号，但这应该没有任何区别。

# php - 适合现场网络聊天应用程序的工具

> ID：14913005
> 
> 赞同：0
> 
> 时间：2013-02-16T17:23:49.123
> 
> 标签：php, node.js, knockout.js, websocket, socket.io

我正在创建应该成为我网站一部分的实时聊天应用程序。网站完全使用 PHP 开发。现在的问题是我处于两难境地，对于将成为我网站一部分的实时聊天应用程序平台来说，什么是最合适的工具。它应该使用我网站上的用户并与它所属的 PHP 应用程序共享会话。

我做了一些研究，正如我所想的那样——PHP+Apache 并不是像我的实时聊天那样基于 Web 套接字开发应用程序的最佳工具。Node.js 等其他平台看起来是正确的选择，但我不确定让 Node 与我的 PHP 应用程序共享资源是否容易。

我很感兴趣你会在这种情况下使用什么方法？您将实施哪种系统架构？

最后，我想告诉您，我的 PHP 网站是基于 MySQL 的，并且我正在使用 knockoutJS 进行客户端实现。它将在客户端使用 SocketIO，因为它具有后备策略和对非 HTML5 浏览器的支持。我知道它也可以在服务器端使用，但我怀疑它与 Node 或我目前不知道的其他解决方案之间。这就是我在这里问这个问题的主要原因。它在共享主机上运行的可能性很小，但我完全理解共享主机和套接字连接的问题（关闭端口、安装 Node 的无 SSH 等）。如果您对这种可能性有建议 - 写下来。否则就忘掉它，像在 VPS 上运行一样回答。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:56:47.457

如果您打算使用 node.js，有一些解决方案可以帮助您将 node.js 集成到您现有的 php 环境中。（例如[，与 node.js 共享 PHP 会话](http://gonzalo123.com/2011/07/25/using-node-js-to-store-php-sessions/)） Node 不能很好地与 apache 配合使用，因此您可能需要考虑切换到 Nginx 和 PHP-fpm。

就个人而言，为了让这个“运行良好”，这对于一个简单的“聊天”应用程序来说是一个很好的变化。我可能会考虑集成已经开发的解决方案[Comet Chat](http://www.cometchat.com/)。或者，如果我想让它更加定制化，我会在单独的平台上构建使用现有架构的东西。 [Firebase](https://www.firebase.com/)是一项非常棒的服务，它刚刚问世，看起来非常适合您的需求。如果这对您的用户来说是一个很好的解决方案，那么我将努力实现一些在 Node.JS 中构建的自定义内容。

内部解决方案将从评估您的服务器的需求开始。您期望有多少并发连接？您是否可以控制低级操作系统功能。打开套接字和打开文件限制似乎是共享主机计划的主要限制因素。因此，您可能需要评估不同的托管计划。适用于 Node 和 PHP 的一个好的 PaaS 解决方案是[AppFog](https://www.appfog.com/)。Appfog 最多可免费使用 2gb 和 10 个实例，这可能会帮助您入门。如果您想要完全控制，我会推荐一个专用服务器，或者类似亚马逊 AWS 的东西。

然后你需要评估你的架构。就像我说的，Nginx 在为 PHP 和 node.js 提供服务方面做得非常好，但是还有更多选项可以更好地满足您的需求。

[Ballons.io](https://github.com/gravityonmars/Balloons.IO)的源代码是查看和开始学习的好地方。这是一个写得很好的开源聊天，它利用了 redis，这是 PHP 和 node.js 之间会话管理的常用解决方案。最重要的是，您可以在 AppFog 上构建源代码，并在几分钟内测试出一些内部解决方案和代码，而无需您支付任何费用！

祝你好运！

# c# - 通过 ASP.NET Web 应用程序和 iOS 移动应用程序访问的 Web API 服务层进行身份验证和授权

> ID：14913006
> 
> 赞同：1
> 
> 时间：2013-02-16T17:23:49.203
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-web-api

我即将开始开发一个新的 ASP.NET MVC Web 应用程序，我也打算构建一个 iOS 移动版本。

我计划使用 MVC 4 Web API 作为服务层，它将位于业务层的前面，并且可以被 Web 应用程序和移动应用程序访问。

但是，我对如何在此架构中实现身份验证和授权感到有些困惑。

通常在 MVC 应用程序中，一旦用户提交了正确的凭据，我会调用

```
FormsAuthentication.SetAuthCookie(username, false); 
```

这将创建一个 cookie，然后从一个请求到另一个请求来回传递，以维护应用程序中的用户会话。

当从 Web 应用程序访问时，我对这将如何通过服务层起作用感到困惑。或者从移动应用程序调用服务时它将如何运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:28:01.247

您可以设计您的 Web API，使其要求在每个请求上都发送表单身份验证 cookie。然后，您将使用此 cookie 从中提取当前经过身份验证的用户的用户名。

但是在设计 API 时，通常最好使用一些其他的身份验证方式而不是 cookie。例如，您可以`Authorization`在要求客户端发送表单身份验证票证的加密值的地方使用 HTTP 标头。

您还可以查看[`following article`](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)关于基于令牌的安全性。

# ruby-on-rails - 正确使用 .includes 和 .joins

> ID：14913009
> 
> 赞同：1
> 
> 时间：2013-02-16T17:23:55.503
> 
> 标签：ruby-on-rails, rails-activerecord

我有 3 个模型

选项：

```
class Option < ActiveRecord::Base
  attr_accessible :key, :name
  belongs_to :item_options
end 
```

项目选项

```
class ItemOption < ActiveRecord::Base
  # attr_accessible :title, :body
  belongs_to :item
  belongs_to :option
end 
```

和项目：

```
class Item < ActiveRecord::Base
  has_many :item_options
  has_many :options, :through => :item_options
end 
```

我需要我的控制器以 JSON 格式返回所有项目及其选项，所以我尝试使用 .includes 但没有运气：

```
items = Item
  .order('id')
  .where(manufacturer)
  .where('is_active')
render :json => {:data => items.offset(offset), :total => items.count}.to_json(
  :include => :options
) 
```

结果不包含选项，但我在控制台中看到有适当的数据库请求。但是，只有当我在 to_json 中使用 :include 时它才有效：

```
items = Item
  .order('id')
  .where(manufacturer)
  .where('is_active')
render :json => {:data => items.offset(offset), :total => items.count}.to_json(
  :include => :options
) 
```

所以第一个问题是我做错了什么，所以 .include 不起作用？

但我也有工作代码的问题。我需要将选项与 item_options 连接起来，因为选项只存储选项名称、选项组 ID 等，而 item_options 为已定义项目保留已定义选项的值。所以我试图扩展我的代码如下：

```
items = Item
  .order('id')
  .where(manufacturer)
  .where('is_active')
render :json => {:data => items.offset(offset), :total => items.count}.to_json(
  :include => {
    :options => {
      :joins => :item_options
    }
  }
) 
```

但是，我仍然收到未与 item_options 连接的选项。为什么？

另外，如果我在 optoins 中使用连接，如果它们在 item_options 中加载而没有附加信息，我是否需要在项目中定义 has_many？

**========== 更新：**

现在我只是替换了`options`Items 模型中与方法的关系：

```
item = Item
  .includes(:item_options)
  .find(params[:id])
render :json => item.to_json(:methods => :options) 
```

在项目模型中：

```
has_many :item_options
def options
  self.item_options.select('item_options.value, options.name, options.is_feature, options.root').joins('left join options on options.id = item_options.option_id')
end 
```

但是，不知道这个解决方案是否是最优的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:48:43.380

您调用`to_json`的是哈希而不是模型，而哈希对包含或连接一无所知。

尝试将您的 json 选项放在模型上

```
data = items.offset(offset).as_json(include: :options)
render json: {data: data, total: items.count} 
```

另外，我认为你`Option belongs_to :item_options`应该是`Option has_many :item_options`

在 as_json 中使用 :include 是对 ActiveModel json 序列化程序的指令，告诉它在输出 JSON 中包含来自关联的数据。

[ActiveModel::Serializers::JSON](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html) ( [github](https://github.com/rails/rails/blob/v3.2.12/activemodel/lib/active_model/serializers/json.rb) )

连接和包含方法是 ActiveRecord 的一部分，用于添加连接条件和执行预加载。

[ActiveRecord 加入](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)
[ActiveRecord 包括](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

# windows-firewall - 使用 netsh 命令创建防火墙异常

> ID：14913010
> 
> 赞同：0
> 
> 时间：2013-02-16T17:24:02.820
> 
> 标签：windows-firewall

我正在尝试使用 netsh 命令创建 Windows 防火墙异常。下面的命令给出了 Syntex 错误。请告知在哪里进行更改。

谢谢

```
netsh firewall add allowedprogram C:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Binn\ sqlservr.exe “SQL Server Windows NT” ENABLE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:30:25.017

如果您使用的是 Vista/Win2008 或更高版本，请执行以下操作：

在一行中，我在这里添加了换行符以提高可读性：

```
netsh advfirewall firewall add rule 
          name="SQL Server Windows NT" 
          dir=in 
          action=allow 
          program="C:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Binn\sqlservr.exe " 
          enable=yes 
```

[kb-article](http://support.microsoft.com/kb/947709)详细介绍了新命令。

# android - 许多数组，一个列表视图，一个适配器

> ID：14913012
> 
> 赞同：1
> 
> 时间：2013-02-16T17:24:02.883
> 
> 标签：android, android-listview, android-arrayadapter

为了告诉我的问题，我想用一个例子来解释

假设我们有 12 个数组，我们称它们为 List1 到 List12，每个数组都有不同的大小。

我想在一个屏幕中显示每 3 个列表-我有 4 个屏幕-，所以我为列表项创建了一个 xml，并创建了一个扩展 ArrayAdapter 的新适配器（MyAdapter）。我还通过使用 if 语句解决了在一个屏幕中显示它们的问题。

但是这 4 个屏幕有不同的大小，即使我控制`ArrayIndexOutOfBoundsException`问题，我写的列表也有空行

```
MyAdapter<String> adapter = new MyAdapter<String>(this,
                android.R.layout.simple_list_item_1, R.id.MyListView,
                List1) 
```

我是否必须将 4 个适配器写为

```
MyAdapter<String> adapter1 = new MyAdapter<String>(this,
                android.R.layout.simple_list_item_1, R.id.MyListView,
                List1)
MyAdapter<String> adapter2 = new MyAdapter<String>(this,
                android.R.layout.simple_list_item_1, R.id.MyListView,
                List4)
MyAdapter<String> adapter3 = new MyAdapter<String>(this,
                android.R.layout.simple_list_item_1, R.id.MyListView,
                List7)
MyAdapter<String> adapter4 = new MyAdapter<String>(this,
                android.R.layout.simple_list_item_1, R.id.MyListView,
                List10) 
```

还是有更简单的解决方案？

感谢您的帮助！

我的适配器类：

```
public class MyAdapter<String> extends ArrayAdapter<String> {

        public MyAdapter(Context context, int resource, int textViewResourceId,
                String[] listname) {
            super(context, resource, textViewResourceId, listname);
        }

        public MyAdapter(MainActivity mainActivity, int simpleSpinnerItem,
                String[] listlist) {
            super(mainActivity, simpleSpinnerItem, listlist);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View row = inflater.inflate(R.layout.list_item, parent, false);

            TextView tv1 = (TextView) row.findViewById(R.id.textview1);
            TextView tv2 = (TextView) row.findViewById(R.id.textview2);
            TextView tv3 = (TextView) row.findViewById(R.id.textview3);
            if (ListID == 1) {
                tv1.setText(List1[position]);
                if (position < List3.length) {
                    tv2.setText(List2[position]);
                    tv3.setText(List3[position]);
                } else if (position < List2.length) {
                    tv2.setText(List4[position]);
                }
            } else if (ListID == 2) {
                       ...
            }

            else
                tv1.setText(list0[position]);
            return row;
        }
    } 
```

列表长度 List1 > List2 > List3

两个构造函数只是因为我在屏幕上有一个微调器可以在屏幕之间移动。

ListID 是微调器的位置。

Padma Kumar 的解决方案通过添加这个来起作用。我使用了 Spinner 的默认适配器，这解决了我的问题。

```
 @Override
    public int getCount() {
        if (ListID == 1) {
            return List1.length;
        } else if (ListID == 2) {
            return List4.length;
        } else if (ListID == 3) {
            return List7.length;
        } else if (ListID == 4) {
            return List10.length;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:36:57.340

我认为您正在对您的 getcount 方法进行硬编码，使其如下所示。

```
public int getCount() {
        return list.size();
    } 
```

它将返回您传递的列表中的长度数。

这样你就永远不会得到任何空行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:46:58.627

我不确定我是否理解您的问题，但如果您尝试在适配器上使用不同的列表，则应确保`notifyDataSetChanged`在修改基础 List 对象后调用适配器。例如，将如下代码添加到您的自定义适配器中。

```
public void swapList(List<String> list) {
  mList = list;
  this.notifyDataSetChanged();
} 
```

每当您想在列表视图中显示不同的列表时，只需从您的代码中调用它：

```
mAdapter.swapList(ListX); 
```

# c++ - 类和函数返回类型混淆的实例

> ID：14913016
> 
> 赞同：-1
> 
> 时间：2013-02-16T17:24:20.253
> 
> 标签：c++, class, function-prototypes

我不能做到这一点：

```
class A
{
    public:
    A()
    {
    }

};

A a1(); 
```

因为`A a1();`看起来像一个函数原型。

但我可以这样做：

```
class B
{
    public:
    B(std::string argument)
    {
        std::cout << argument;
    }
};

B b1("Text"); 
```

这两件事本质上是相同的，只是编译器能够区分 `B b1("Text");`不是函数原型，因为括号中传递了一些数据。

是否有任何理由必须为 A 省略括号，或者是因为编译器认为它是一个函数定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:26:12.407

就是这样，它被称为**最令人烦恼的 parse**。原因是如果`A a1();`被视为对象声明，您将无法使用该原型声明函数。你希望能够声明一个函数，对吧？

`B b1("Text");`之所以有效，是因为它不能被视为函数原型，但是，例如，`B b(A());`可以并且将。

# python - Reportlab：带有页面数据的标题

> ID：14913018
> 
> 赞同：6
> 
> 时间：2013-02-16T17:24:24.870
> 
> 标签：python, reportlab

我正在使用页面上的功能和页面模板为我的文档中的页面子集制作标题：

```
templates.append(PageTemplate(id='Overview', frames=frame, onPage=HeaderOverview)) 
```

此模板的标头函数：

```
################################
# Function HeaderOverview - header for overview page
def HeaderOverview(canvas,doc):
    canvas.saveState()
    headboxh = 15
    headboxx = 20
    headboxy = 730
    headboxw = 570
    canvas.rect(headboxx, headboxy, headboxw, headboxh, fill=1)  
    canvas.setFillColor(colors.black)
    canvas.setFont("Helvetica", 14)
    canvas.setFillColor(colors.white)

    canvas.drawString(headboxx + 15,headboxy+.25*headboxh,"Mathematics")
    textWidth = stringWidth("Mathematics", "Helvetica", 12) 
    canvas.setFont("Helvetica", 12)
    canvas.drawString(headboxw - 15 - textWidth,headboxy+.25*headboxh,course)

    canvas.restoreState() 
```

这很好用，除了传递的 course 变量（随部分中的每一页而变化）是序列中的最后一个变量，因为直到最终构建才真正调用此函数（我认为这就是它的工作原理）。我需要这样做，以便该值是页面上的值。如果我可以在编写页面本身时绘制它，那也很好。这是我的尝试：

```
####################################################################################
# Function makeGradeOverview(course): makes Overview chart for grade
#
def makeGradeOverview(canvas, course):
    report.append(NextPageTemplate("Overview"))
    report.append(PageBreak())

    headboxh = 50
    headboxx = 20
    headboxy = 600#730
    headboxw = 540

    canvas.saveState()
    canvas.setFont("Helvetica", 12)
    textWidth = stringWidth(course, "Helvetica", 12)
    canvas.drawString(headboxw - 15 - textWidth,headboxy+.25*headboxh,course)
    canvas.restoreState()
    # put course name as title
    if len(course)<=2:
        headerrow = ''.join(['Grade ', course, ' Overview'])
    else:
        headerrow = ''.join([course, ' Overview'])
    report.append(Paragraph(headerrow, styles["Overview Title"]))

    report.append(Spacer(1, 16))

    GridInfo = []
    topics = topiclist(course)

    for topic in topics:
        report.append(Paragraph(topic, styles["Overview Sub"]))
        report.append(Spacer(1, 8))

        subtopics = subtopiclist(course, topic)

        sublist = []
        for subtopic in subtopics:
             report.append(Paragraph(''.join([r'<bullet>&bull</bullet>',subtopic]), styles["Overview Table"])) 
```

这不会抛出错误或任何东西，但它似乎也没有实际绘制任何东西。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T00:22:53.467

这是另一个想法...

也许使用可以识别的特定流来更新课程会起作用。如有必要，您可以将自定义属性添加到 flowables 以帮助识别它们（参见[这篇](https://stackoverflow.com/a/9047171/645956)文章）。

例如，您可能可以执行以下操作：

```
...
report.append(some_content)

report.append(PageBreak())
report[-1].new_course = True  # gives that PageBreak flowable a custom attribute

report.append(some_more_content)
... 
```

并设置一些变量：

```
course_list = [...]
course_iter = iter(course_list)
current_course = next(course_iter) 
```

然后，您可以在渲染后检查每个 flowable 以查看它是否具有该属性，如果有，则更新当前课程。

```
def afterFlowable(flowable):
    global current_course
    if hasattr(flowable, 'new_course'):
        current_course = next(course_iter)

doc.afterFlowable = afterFlowable 
```

`HeaderOverview`将能够使用该`current_course`变量来获得正确的课程，因为两者`HeaderOverview`和`afterFlowable`在最终构建期间的不同点被调用。

# ruby-on-rails - 如何将这个 ruby on rails 代码也转换为包含 html

> ID：14913024
> 
> 赞同：0
> 
> 时间：2013-02-16T17:24:52.727
> 
> 标签：ruby-on-rails

我怎么能接受这个。。

```
 <li>
  <%= link_to image_tag(product.photo.url(:small)), product_path(product.id, :forum_id => params[:forum_id]) %> 
<% if params[:forum_id] %>
  <%= link_to "Add", addtoforum_user_path(:products => [product.id],:forum_id => params[:forum_id], tp: "add") %>
  </li> 
```

像这样..（现在它只包括图像）

```
<li>
   <a href="">
       <figure>
       <img src="image-url....">
       </figure>
       <span>product name</span>
   </a>
</li> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:36:18.703

不确定我是否理解这个问题，但我想问题是在 a 标签内输出图形、img 标签等？

这可以通过将块传递给 link_to 方法来实现，如下所示：

```
<li>
  <%= link_to product_path(product.id, :forum_id => params[:forum_id]) do %>
   <figure>
   <%= image_tag(product.photo.url(:small)) %>
   </figure>
   <span><%= product.name %></span>
  <% end %>
</li> 
```

# android - 从 DDMS 编辑共享首选项

> ID：14913026
> 
> 赞同：9
> 
> 时间：2013-02-16T17:24:58.970
> 
> 标签：android, android-emulator, sharedpreferences, ddms

我想从 DDMS 编辑共享首选项值，如果我双击该文件，它不会保存更改。我做错了什么还是有特殊的插件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T18:26:46.057

首先，在执行此操作之前，您可能应该确保您的应用程序没有运行。

您必须使用文件资源管理器选项。导航

> 数据 -> com.yourpackage -> shared_pref

单击 xml 并在右上角单击`pull`。

在您的计算机上编辑 xml。

完成后，单击`push`（也是右上角）。

![在此处输入图像描述](../Images/384d5fc38eb079932e9ec98db604092a.png)

如果您将同一文件推送到同一设备的同一目录中，则下次启动应用程序时，您应该会看到更新后的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-10-29T06:40:19.737

只需按照步骤操作，很容易。

步骤1：[![在此处输入图像描述](../Images/1a7f2f5b092d1a9c22d55a2187b487b2.png)](https://i.stack.imgur.com/3PM2J.jpg)

第 2 步：打开数据/数据/你的包名/shared_prefs -> 选择你的共享首选项 -> 右键单击​​并提供另存为。

[![在此处输入图像描述](../Images/c4290b1492c19c322ce3e4de4ddfc5d2.png)](https://i.stack.imgur.com/mBLFc.png)

第3步：保存在您想要的文件夹中。我保存在桌面文件夹中。不要改名字 [![在此处输入图像描述](../Images/15e6d05effd355fbcae9636fd06850fe.png)](https://i.stack.imgur.com/V8Nfu.png)

第 4 步：现在在保存的文件中编辑所需的值。

步骤 5：将编辑后的文件上传到 shared_pref 目录 [![在此处输入图像描述](../Images/2165cd1f118be2e79e12d181edf4c928.png)](https://i.stack.imgur.com/51sMC.png)

最后关闭并打开应用程序以使其工作。就这样。

# android - 如何合并 CursorLoader

> ID：14913036
> 
> 赞同：2
> 
> 时间：2013-02-16T17:25:44.720
> 
> 标签：android

在以下情况下如何合并游标加载器以获得一个游标加载器。我不止一个调用内容提供者来创建我的数据库适配器以与简单的游标适配器一起使用。请在下面查看我的代码。

```
@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {

    productIdCursor.moveToFirst();
    CursorLoader cursorLoader;

    // CursorLoader cursorLoader;

    int i = 0;

    while (productIdCursor.isLast()) {

        String[] Projection = { "p.id as _id", "p.name", "p.subTitle",
                "p.textColour", "pi.thumb" };

        String userSelectionCritera = "p.id = pp.prod_id and pp.imag_id = pi.id and p.id= ? and p.id = pc. prod_id and pc.coun_id = ?";

        String[] selecttionArgs = new String[] {
                productIdCursor.getString(productIdCursor
                        .getColumnIndex("prod_id")),
                String.valueOf(countryId) };

        cursorLoader = new CursorLoader(getActivity(),
                DatabaseContentProvider.CONTENT_URI_PRODUCTCATEGORY,
                Projection, userSelectionCritera, selecttionArgs, null);

        productIdCursor.moveToNext();

    }

    return cursorLoader; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:33:14.453

你不能真正合并游标加载器，但你可以尝试一些不同的东西。您最好的选择可能是将您的 SQL 选择语句从 更改`p.id = ?`为`p.id in (...id list here...)`. 您可以通过查看[此答案](https://stackoverflow.com/questions/7418849/android-sqlite-in-clause-and-placeholders)为 id 列表创建一个字符串。

您还可以创建自己的自定义加载器，该加载器接受一系列产品 ID，并在后台单独加载它们，将它们合并到 MergeCursor 对象中。这将为您提供一个加载器和一个游标，其中包含您需要的所有数据。IMO 这第二种方法真的很混乱。如果这是唯一可行的解​​决方案，那么您可能应该返回并查看您的数据库表模式。

# php - 在进行长民意调查时，您会发回旧数据吗？

> ID：14913039
> 
> 赞同：0
> 
> 时间：2013-02-16T17:26:01.273
> 
> 标签：php, long-polling

我想我很好地理解了投票的概念。您基本上只是从服务器请求数据，但只有在数据更改后，服务器才会返回它。直截了当的东西。我的问题来自这个例子。

假设我的拍卖数据不断变化。这些数据中包括

*   拍卖结束时间
*   拍卖中的当前投标人数量

当我开始长民意调查时，我基本上有这样的事情：

```
while($counter < $MESSAGE_TIMEOUT_SECONDS) {
  $newData = getNewData();
  $hasDataChanged = hasDataChanged($newData, $oldData);
  if (  $hasDataChanged  ) {
     return $newData;
  }

  usleep($MESSAGE_POLL_MICROSECONDS);

} 
```

我从哪里获取旧数据？我的意思是，在发出请求时，我可以发布上次给我的当前状态，或者我可以将数据存储在 Session 中。在进行长轮询时，我是否可以在会话中存储内容，或者我应该使用该页面的当前状态从 Javascript 进行 POST？

另外，我将如何阻止打开 50 页的人杀死数据库？我的意思是，getNewData() 有效地进入了数据库。如果轮询间隔约为半秒，这可能意味着每半秒有 50 个请求，如果他决定打开 50 个选项卡，这可能意味着仅一个用户在 30 秒内向数据库发出 50 x 2 x 30 = 3000 个请求？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:47:52.317

我会将所有 ajax 响应数据以及每次拍卖有任何更改的最后日期缓存在内存中，这样您就不必比较新旧数据，而只需比较日期时间。对拍卖的某些更改（已关闭、新出价等）使缓存无效。

然后从客户端从最后一个已知数据（最后一个 ajax 调用或用户打开页面时）发送时间并比较日期以查看是否有更改，如果它不只是返回 status:nochange（现在客户端知道没有什么要更新）如果它确实从缓存和更新用户页面返回所有必要的数据。

该模型应保护数据库免于过载。

# objective-c - 自定义容器视图控制器 + 故事板？

> ID：14913041
> 
> 赞同：3
> 
> 时间：2013-02-16T17:26:06.653
> 
> 标签：objective-c, ipad, storyboard, uistoryboardsegue, container-view

我想实现我自己的容器视图控制器。请想象这是我的ipad

![在此处输入图像描述](../Images/2e3a999c966d35084cb4062149f35504.png)

一种通常的拆分视图控制器，但我想扩展它：视图“a”的宽度应该可以调整大小，当我点击视图“B”时 - 视图“C”进入可见区域

![在此处输入图像描述](../Images/7021cde4ef9a8b5f9087ca8311c5f8a4.png)

例如，在我的故事板中，我有 3 个容器视图：AViewController（用于 A 视图）、BViewController、CViewController 和一个组合视图控制器（初始视图控制器）。在组合视图控制器中，我将从容器视图中实现嵌入 segue，并通过以下代码初始化容器视图之间的关系：

```
@property ... *aViewController,*bViewController,*cViewController;
    - (void)prepareForSegue:(UIStoryboardSegue *)segue
    sender:(id)sender
    {
    if ([segue.identifier isEqualToString:@"EmbedAViewController"])
    {
    self.aViewController =
    segue.destinationViewController;
    }
    if ([segue.identifier isEqualToString:@"EmbedBViewController"])
    {
    self.bViewController=segue.destinationViewController
    }

   -(void)viewDidLoad
   {
     [super viewDidLoad];
     self.aViewController.bViewController=self.bViewController;
   } 
```

**问题1**：使用情节提要完成我的任务是否正确？ **问题2**：容器视图有哪些限制？它是 addChildViewController API 的视觉替代品吗？如果不是，我应该在哪里实现子父关系？我应该在 prepareForSegue 方法中的组合视图控制器中使用

```
 [self addChildViewController:aViewController]; 
    [self.view addSubview:aViewController.view]; 
```

**问题**3：如何将容器视图放在可见区域之外？

如果我在某个地方犯了错误或对基本概念有很大的误解，请不要打败我。我做了很多 google-foo，我非常感谢任何帮助。非常感谢提前！

编辑：
我想在所有人之间建立关系。“B”视图的内容依赖于“A”，“C”视图的内容依赖于“B”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T17:47:44.127

我认为你确实有一些误解。如果你想在故事板中实现容器视图控制器，你不需要在代码中做任何事情。从一个控制器开始，您称为组合视图控制器的控制器，然后拖入 3 个容器视图。最初，您可能希望调整它们的大小，使它们都是全高的，并使它们在主视图中并排放置。然后，您可以使用尺寸检查器更改它们的尺寸和位置，以便 C 的视图从组合控制器视图的右边缘开始，这样它就会在屏幕外开始。您将使用嵌入 segue 自动获得三个视图控制器连接到它们各自的容器视图。所有这三个控制器都将作为组合控制器同时实例化。

# c++ - 从txt文件c ++中读取浮点错误值

> ID：14913043
> 
> 赞同：2
> 
> 时间：2013-02-16T17:26:13.117
> 
> 标签：c++, floating-point

我有一个值的文本文件：

```
133.25 129.40 41.69 2.915 
```

当我读到它时：

```
fscanf(File, "%f", &floatNumber[i]); 
```

我得到这些值：

```
1.3325000000000000e+002, 1.2939999389648437e+002, 4.1689998626708984e+001 2.9149999618530273e+000 
```

第一个值没问题，但其他三个值为什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:30:24.317

值是相同的，您需要更改 printf 中的特定格式。

此外，浮点数具有离散精度，因此不可能将任意浮点数表示为无限精度。

这是 IEEE 规范的众所周知的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:31:26.470

值不同的原因是除了第一个数字之外的所有数字都不能完全表示为二进制浮点值。如果您需要精确的小数表示，则[需要使用非标准库](https://stackoverflow.com/q/4798777/335858)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T17:29:32.427

他们没有什么不同。浮点数仅精确到一个点*[原文如此]*。这些是这些值的最接近的表示。[浮点是一种特殊的野兽](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T23:06:19.840

尽管您的大多数输入无法以任何一种格式精确表示，但使用 double 而不是 float，您将获得更多匹配的数字。

我认为 float 是一种非常专业的类型。如果你有一个非常大的低精度浮点数据数组，并且只对它进行性能非常好的计算，你可以通过使用浮点数来获得一些性能。您在例如高速缓存行中获得两倍的浮点数。对于其他任何事情，更喜欢双浮动。

# java - 局部变量的声明和定义

> ID：14913046
> 
> 赞同：1
> 
> 时间：2013-02-16T17:26:34.567
> 
> 标签：java, variables

是在函数的开头声明变量还是在我使用它们的地方更好？

在开头声明它们的好处是我可以很容易地看到局部变量的列表。但我在某处读到这会增加出错的可能性。

那么，有什么更好的呢？

如果最好在开始时声明它们，我应该总是用一个值来初始化它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T17:31:05.450

由于方法应该很短，因此局部变量的数量相当少，我认为最好在使用它们之前声明局部变量（不是所有的都在顶部）。

如果可能，它们应该立即初始化以增强可读性。如果在需要它们的地方声明它们，您几乎总是可以使用有意义的值进行初始化，而不是 null、0 或“”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T17:34:33.913

在某些情况下，编译器会强制您分配一个值[定义赋值分析 - 维基百科，免费的百科全书](http://en.wikipedia.org/wiki/Definite_assignment_analysis)。但是，在这种情况下，为什么要初始化为 0 - 只需将变量初始化为第一个赋值。

**您不需要立即初始化它，但您必须在使用它之前对其进行初始化。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:30:29.680

就像 Josh Bloch 在他的“Effective Java”中解释的那样，您应该只在需要之前声明本地变量 - 以使代码更具可读性、可维护性并防止错误。

如果不应该在本地上下文中再次获得新对象或原始值，则将本地变量声明为 final 也是一种好习惯。

# vba - 宏编译错误

> ID：14913048
> 
> 赞同：0
> 
> 时间：2013-02-16T17:26:43.910
> 
> 标签：vba, excel

我有一个 Excel 表“b.xls”，其中 A 列和 B 列的内容如下：

```
Column A  Column B
C1         F1
C2         F2
C3         Z3 
```

我想将“b.xls”工作簿的工作表“Sheet1”的位置 C1 、 C2 和 C3 的内容复制到工作簿“a.xlsm”的工作表“Sheet1”的位置 F1 、 F2 、 Z3 我已经编写了以下宏。在 GetData 行中的点 srcAddress 处显示运行类型不匹配错误。请帮忙

要求是在不打开 b.xls 的情况下复制数据。

```
Sub Update_Data()
Dim rngA As Range
Dim rngB As Range
Dim srcAddress As Range
Dim destAddress As Range
Dim r As Long   'row iterator
Dim MyPath As String

MyPath = ActiveWorkbook.Path
If Right(MyPath, 1) <> "\" Then
    MyPath = MyPath & "\"
End If
Set rngA = Range("A2", Range("A2").End(xlDown))
Set rngB = rngA.Offset(0, 1)

For r = 1 To rngA.Rows.Count
Set srcAddress = Range(rngA(r).Value)
Set destAddress = Workbooks("a.xlsm").Sheets("Test_data").Range(rngB(r).Value)
GetData MyPath & "b.xls", "Sheet1", srcAddress, destAddress, True, True
'destAddress.Value = srcAddress.Value
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:25:37.037

我刚刚写了以下代码 - 但后来读到 b.xls 不应该打开，所以它可能不是你想要的。但是，如果不允许打开 b.xls，如何访问 b.xls 中的映射？

无论如何，这是代码，也许您可​​以使用其中的一部分。它会阻止屏幕更新，因此用户不会看到打开了另一个文件：

```
Sub UpdateData()
    Dim rngSource As Range
    Dim wbTarget As Workbook
    Dim wsTarget As Worksheet

    Application.ScreenUpdating = False 'This will prevent the workbook to be displayed during execution
    On Error Resume Next
    Set wbTarget = Workbooks("a.xls")
    If Err.Number Then
        Err.Clear
        Set wbTarget = Workbooks.Open(YourPath & "a.xls")
    End If

    Set wsTarget = wbTarget.Worksheets("Sheet1")

    With Worksheets("Sheet1")
        For Each rngSource In .Range("A1").Resize(.Range("A" & .Rows.Count).End(xlUp).Row)
            wsTarget.Range(rngSource.Offset(, 1).Value) = .Range(rngSource.Value).Value
        Next
    End With
    wbTarget.Save
    wbTarget.Close

    Application.ScreenUpdating = True
End Sub 
```

# css - 背景图像宽度为 100% 中心以固定位置

> ID：14913049
> 
> 赞同：0
> 
> 时间：2013-02-16T17:26:49.770
> 
> 标签：css, header, position, background-image

首先，我要感谢大家一直以来的回答。作为学生和工作，我通过该网站从我的项目中找到了很多解决方案。

在问这个问题之前，我进行了很多搜索，但找不到有效的解决方案。

对不起标题。想不出更好的了。

我尝试开发一个网站，但标题有问题。主页面容器的固定大小为 1024 像素，内部内容限制为 960 像素。只有页眉和页脚占据了整个窗口。

我有两个图像：第一个是 2000x250（后面的建筑物），第二个是 2000x58（带有房屋的语言）。让我们分别将它们命名为 img_A 和 img_B。我希望他们两个都根据用户分辨率（如页脚）占据整个屏幕，但也可以缩放它以响应高度。

问题是无论屏幕分辨率如何，我都希望 img_B 居中在 1024px 内，因此 ES 按钮将位于主页的末尾（1024px），因此徽标居中，边距为 0 auto；不要盖房子。

这里有一些图片可以更好地说明我的要求。

错误（1920x1200）：

[http://imageshack.us/photo/my-images/577/headerwrong.jpg/](http://imageshack.us/photo/my-images/577/headerwrong.jpg/)

右 (1680x1050)：

[http://imageshack.us/photo/my-images/20/headercorrect.jpg/](http://imageshack.us/photo/my-images/20/headercorrect.jpg/)

这是我的CSS代码：

```
#header{
    height: 140px;
    width: 100%;
    background: url(images/background_home.jpg) center center no-repeat;
}

#header .language_banner{
    background: transparent url(images/header_en.png) right bottom no-repeat;
}

#header .logo{
    display:block; 
    width:242px; 
    margin:0 auto;
    padding-top: 63px;
} 
```

和html代码：

```
<div id="header">
    <div class="language_banner">
        <div class="logo">
            <img alt="athens insiders" src="<?php    bloginfo("template_directory"); ?>/images/logo.png">
        </div>
    </div>
</div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:43:32.377

我不太明白你想要实现什么，但我*认为*你想尝试查看（并添加！）你的#header （或任何地方）的 background-size css （可能还有 background-clip ）属性，定义背景后。

请注意，早期版本的 IE 中不提供支持，因此如果您要实现通用兼容性，则可能需要另一种解决方法。

# mysql - 根据结果 表中的顺序更新行

> ID：14913054
> 
> 赞同：2
> 
> 时间：2013-02-16T17:27:29.187
> 
> 标签：mysql, sql

我正在编写一个在线数学测试程序，目前正在编写脚本来计算每个用户获得的排名。以下代码有效，但每次看到它我都会畏缩。

get_set() 将查询结果放入 $users

```
function rank_users_in_test($tid){
  $GLOBALS['DB']->get_set($users,"select user,test from user_results where test=$tid order by points desc,time");
  // $users are already in order by rank thanks to ORDER BY
  $rank = 1;
  foreach ($users as $u){
    $GLOBALS['DB']->query("update user_results set world_rank=$rank where user={$u['user']} and test={$u['test']}");
    $rank++;
  }
} 
```

循环中的查询让我有点哭了。我的问题是，有没有一种方法可以让 MySQL 根据用户在第一次查询结果中出现的顺序自动更新每个用户的排名？[这里](https://stackoverflow.com/questions/3333665/mysql-rank-function)有一个相关的问题，但它不使用 UPDATE。

我正在使用 MySQL 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:56:22.030

感谢上面的 ring0，以下将运行时间从几分钟减少到几秒钟：D

```
create table temp (
  rank int auto_increment,
  user int,
  test int,
  primary key(rank)
);

insert into temp(user,test) (select user,test from user_results where test=$tid order by points desc,time);

update user_results ur, temp t set ur.world_rank=t.rank where ur.user=t.user and ur.test=t.test;

drop table temp; 
```

# sql - 需要使用vb8 express将数据保存在sql数据库中

> ID：14913061
> 
> 赞同：1
> 
> 时间：2013-02-16T17:28:15.433
> 
> 标签：sql, vb.net, sql-server-express

我需要保存在运行时输入的数据。我怎么做？我尝试了很多代码。我的代码中没有任何错误，但是当我退出并检查我的数据表时，数据库中不存在数据。

这是我的代码：

```
Dim con As New SqlClient.SqlConnection
Dim cmd As New SqlClient.SqlCommand

Try
    con.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirector y|\ClubDatabase.mdf;Integrated Security=True;User Instance=True"
    con.Open()
    cmd.Connection = con
    cmd.CommandText = "INSERT INTO Liquor([Product ID], [Name], [Quantity], [Cost Price], [Selling Price]) VALUES('" & Product_IDTextBox.Text & "','" & NameTextBox.Text & "','" & QuantityTextBox.Text & "','" & Cost_PriceTextBox.Text & "','" & Selling_PriceTextBox.Text & "')"
    cmd.ExecuteNonQuery()
    MessageBox.Show("added")
Catch ex As Exception
    MessageBox.Show("Error while inserting record on table..." & ex.Message, "Insert Records")
Finally
    con.Close()
End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:11:37.910

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！在 Visual Studio 中运行您的应用程序时，它将围绕`.mdf`文件进行复制（从您的`App_Data`目录到输出目录 - 通常`.\bin\debug`是您的应用程序运行的位置），并且**很可能**，您的`INSERT`工作正常 - 但您只是**看错了 . mdf文件**到底！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`ClubDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=ClubDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样......

# gwt - GWT - 全局 clickHandler 处理 HTML 类属性元素？

> ID：14913062
> 
> 赞同：1
> 
> 时间：2013-02-16T17:28:18.367
> 
> 标签：gwt, widget, html

我有一个按钮，我将一个 HTML 类和 java 类 clickHandler 添加到：

```
Button someButton = new Button();
someButton.getElement().setClassName("someClass");
someButton.addClickHandler(this); 
```

然后我的java类clickHandler看起来像：

```
public void onClick(ClickEvent event){
    Widget sender = (Widget) event.getSource();
    if(sender == someOtherWidget){
        ...
    }else if(...){
    ...
} 
```

我想做的是向 clickHandler 添加一些东西，如果发送者widger 有`someClass`HTML 类，它会做一些事情。就像是：

```
else if(sender.getClassName().equals("someClass")){
    doSomething();
} 
```

但是，小部件没有 getClassName()。有人对如何在小部件上应用 HTML 类有任何建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:27:39.890

弄清楚我做错了什么。这：

```
else if(sender.getClassName().equals("someClass")){
    doSomething();
} 
```

应该是这样的：

```
else if(sender.getElement().getClassName().equals("someClass")){
    doSomething();
} 
```

# jsf-2 - jsf2 viewscoped托管bean多次启动

> ID：14913063
> 
> 赞同：1
> 
> 时间：2013-02-16T17:28:27.727
> 
> 标签：jsf-2, cdi, view-scope

我对视图范围的 bean 有疑问。我知道这是常见的问题，但我没有得到正确的答案。我有一个数据表，负责在用户输入搜索某些条件时显示搜索结果。这是xhtml：

```
<html   xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns="http://www.w3.org/1999/xhtml"

    xmlns:p="http://primefaces.org/ui">

<h:panelGroup id ="adminReportLogList">

<p:dataTable value="#{adminLogView.lazyModelReport}" var="model" id="reportLogList" lazy="true" paginator="true" rows="20" paginatorAlwaysVisible="false" paginatorPosition="bottom" emptyMessage="emppty list" styleClass="dtable" style="table-layout: fixed; width: 100%"
             paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}" rowsPerPageTemplate="5,10,15,20">

    <p:column headerText="Report number" sortBy="#{model.reportNumber}">
        <h:outputText value="#{model.reportLogId}"/>
    </p:column>
    <p:column headerText="Report date" sortBy="#{model.reportDate}">
            <h:outputText value="#{model.reportDate}">
                <f:convertDateTime pattern="yyyy/MM/dd hh:mm:ss"/>
            </h:outputText>
    </p:column>
    <p:column headerText="Search date" sortBy="#{model.searchLogId.searchDate}">
        <h:outputText value="#{model.searchLogId.searchdate}">
                <f:convertDateTime pattern="yyyy/MM/dd hh:mm:ss"/>
            </h:outputText>
    </p:column>
    <p:column headerText="User name" sortBy="#{model.searchLogId.loginLogId.username}">
        <h:outputText value="#{model.searchLogId.loginLogId.username}"/>
    </p:column>
    <p:column headerText="Customer number" sortBy="#{model.customerId}">
        <h:outputText value="#{model.customerId.registernumber}"/>
    </p:column>
    <p:column headerText="Customer name" sortBy="#{model.customerId}">
        <h:outputText value="#{model.customerId.name}"/>
    </p:column>
</p:dataTable>

</h:panelGroup>
<br/>

// SEARCH PANEL
<p:panel>
    <h:panelGrid columns="3" styleClass="insGrid" id="reportLogSearchPanel">
        <h:outputText value="User: "/>
        <p:inputText id="reportLogSearchByUserName" value="#{adminLogView.searchUserName}">
            <p:watermark for="reportLogSearchByUserName" value ="Customer name"/>
        </p:inputText>
        <h:message for="reportLogSearchByUserName" id="msgReportLogSearchByUserName" styleClass="errorMessage"/>

        <h:outputText value="Customer id number: "/>
        <p:inputText id="reportLogSearchByCustomerName" value="#{adminLogView.searchCustomerName}">
            <p:watermark for="reportLogSearchByCustomerName" value="Customer id number"/>
        </p:inputText>
        <h:message for="reportLogSearchByCustomerName" id="msgReportLogSearchBySearchDate" styleClass="errorMessage"/>

        <h:outputText value="Report date "/>
        <p:inputText id="reportLogSearchByReportDate" value="#{adminLogView.searchReportDate}">
            <p:watermark for="reportLogSearchByReportDate" value="Report date YYYY/MM/DD"/>
        </p:inputText>
        <h:message for="reportLogSearchByReportDate" id="msgReportLogSearchByReportDate" styleClass="errorMessage"/>

        <h:panelGroup/>
        <h:commandButton value="Search" styleClass="btn" action="#{adminLogView.searchReport()}">
            <f:ajax render =":form:adminReportLogList :form:reportLogList" execute=":form:reportLogSearchPanel"/>
        </h:commandButton>

    </h:panelGrid>

</p:panel> 
```

在另一个 xhtml 中的标记中使用它是：/我认为在这种情况下不是原因/

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../templates/admin_main.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <h:panelGroup id="include">
        <ui:include src="#{adminLogView.page}.xhtml"/>
        </h:panelGroup>
    </ui:define>

</ui:composition> 
```

这是我的豆子

```
@Named(value = "adminLogView")
@ViewScoped
public class AdminLogView implements Serializable{
    @EJB
    private LogServiceLocal logService;
    private List<Reportlog> ReportLogList;

    String page = "reportLog";
    LazyDataModel<Reportlog> lazyModelReport;
    LazyDataModel<Loginlog>  lazyModelLogin;
    LazyDataModel<Searchlog> lazyModelSearch;

    String searchCustomerName;
    String searchUserName;
    String searchReportDate;

    @PostConstruct
    public void init(){

        this.lazyModelReport = new LazyReportLogDataModel(this.logService);
    }

    public void searchReport(){
        Map<String, String> filter = new HashMap<String, String>();
        if(this.searchCustomerName != null && !this.searchCustomerName.isEmpty())
            filter.put("customerName", this.searchCustomerName);
        if(this.searchReportDate != null && !this.searchReportDate.isEmpty())
            filter.put("reportDate", this.searchReportDate);
        if(this.searchUserName != null && !this.searchUserName.isEmpty())
            filter.put("userName", this.searchUserName);

        this.lazyModelReport.load(0, 30, null, SortOrder.UNSORTED, filter);

    }
} 
```

当我们导航到上面的页面时，即使使用 sessionScoped，也会多次调用 @postConstruct 方法。即使我们在同一视图中单击搜索按钮，bean 也会再次初始化。只有 RequestScope 可以正常工作。是不是我误解或忘记了。PS。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T22:11:39.837

@javax.faces.bean.ViewScoped 不能与 CDI 一起使用。出于这个原因，您需要使用 SeamFaces 或 MyFaces CODI 从 viewscope 服务中受益。

CDI 提供扩展来创建您自己的范围，因此您可以实现上下文并使用 @NormalScope 来执行此操作。

*   CDI在每个 bean 调用后触发一个事件**AfterBeanDiscovery**
*   您可以使用 CDI 扩展来**@Observes**此事件并添加您的上下文实现
*   在您的范围实施中，您可以：
    1.  使用**Contextual通过****FacesContext ViewRoot Map**的名称获取您的 bean，并**在每次 ajax 回调后**返回它
    ***   如果找不到第一步中的 bean 名称，请使用**CreationalContext在****FacesContext ViewRoot Map中创建它****

 **为了更深入的解释，我推荐这个链接：[http ://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/](http://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T22:04:35.540

你有正确的 SessionScoped 吗？javax.enterprise.context.SessionScoped

类路径上是否有 Myfaces CODI 或任何其他适配器？否则，@ViewScoped 具有未记录的行为，因为它是 JSF-2 范围。

如果你有正确`@SessionScoped`的行为，至少对我来说是完全未知的问题。

还：

```
@Named(value = "adminLogView") 
```

您在此处给出的值是默认值。还不如跳过这样的设置值。

祝你好运**

# php - 无法在数组php中获得喜欢的数量

> ID：14913068
> 
> 赞同：0
> 
> 时间：2013-02-16T17:29:37.653
> 
> 标签：php, arrays, facebook, multidimensional-array

我正在使用以下代码来获取页面上的喜欢数。

```
 <?php
    $site="http://graph.facebook.com/?ids=http%3a%2f%2fXXXXXXXX/svce.php";
    $graph= file_get_contents($site);

    $json_string=$graph; 
    $array  = json_decode($json_string, true);

    //echo "<pre>";
    //print_r($array);

    $var = $array['shares'];
    echo $var;

    ?> 
```

但是每当我尝试回显以下代码时。我总是得到一个未识别的索引通知，如下所示： 注意：未定义的索引：第 19 行 C:\xampp\htdocs\graphapi.php 中的共享

我哪里错了？

这是 print_r 输出：

```
 Array
(
     [http://xxxxxxxxx/svce.php] => Array

    (
        [id] => http://xxxxxxxxx/svce.php
        [shares] => 7
        [comments] => 3
     )

 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:35:00.133

您之前必须使用站点名称作为密钥。

结构：

```
- http://example.com
  - id
  - shares 
```

这意味着在 PHP 中：

```
$array["http://example.com/path/to/site"]["shares"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:37:08.213

根据您的打印输出看起来像在`$array`. 试试这个;

```
echo $array['http://xxxxxxxxx/svce.php']['shares']; 
```

# asynchronous - 我可以在 Play Framework 2.x (Scala) 中进行异步表单验证吗？

> ID：14913074
> 
> 赞同：31
> 
> 时间：2013-02-16T17:30:18.897
> 
> 标签：asynchronous, playframework-2.0

我正在努力理解 Play 的异步功能，但在异步调用适合的地方和框架似乎合谋反对其使用的地方方面发现了很多冲突。

我的示例与表单验证有关。Play 允许定义临时约束 - 请参阅文档：

```
val loginForm = Form(
  tuple(
    "email" -> email,
    "password" -> text
  ) verifying("Invalid user name or password", fields => fields match { 
      case (e, p) => User.authenticate(e,p).isDefined 
  })
) 
```

干净整洁。但是，如果我使用的是完全异步的数据访问层（例如 ReactiveMongo），这样的调用`User.authenticate(...)`将返回 a `Future`，因此我不知道如何利用内置表单绑定功能和异步工具。

宣传异步方法固然很好，但我对框架的某些部分不能很好地配合它感到沮丧。如果验证必须同步完成，它似乎违背了异步方法的要点。我在使用`Action`组合时遇到了类似的问题 - 例如，与安全相关`Action`的会调用 ReactiveMongo。

谁能阐明我的理解力不足的地方？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T07:38:05.530

是的，Play 中的验证是同步设计的。我认为这是因为假设大多数时候表单验证中没有 I/O：字段值仅检查大小、长度、与正则表达式的匹配等。

验证建立在[`play.api.data.validation.Constraint`](https://github.com/playframework/Play20/blob/2.1.0/framework/src/play/src/main/scala/play/api/data/validation/Validation.scala#L13)从验证值到存储函数的基础上`ValidationResult`（`Valid`或者`Invalid`，这里没有地方放`Future`）。

```
/**
 * A form constraint.
 *
 * @tparam T type of values handled by this constraint
 * @param name the constraint name, to be displayed to final user
 * @param args the message arguments, to format the constraint name
 * @param f the validation function
 */
case class Constraint[-T](name: Option[String], args: Seq[Any])(f: (T => ValidationResult)) {

  /**
   * Run the constraint validation.
   *
   * @param t the value to validate
   * @return the validation result
   */
  def apply(t: T): ValidationResult = f(t)
} 
```

`verifying`只需使用用户定义的函数添加另一个约束。

所以我认为 Play 中的数据绑定并不是为在验证时执行 I/O 而设计的。使其异步会使其更复杂且更难使用，因此它保持简单。让框架中的每一段代码都处理包装在`Future`s 中的数据是多余的。

如果您需要使用 ReactiveMongo 进行验证，您可以使用`Await.result`. ReactiveMongo 在任何地方都返回 Futures，您可以阻塞直到这些 Futures 完成以在`verifying`函数内部获取结果。是的，它会在 MongoDB 查询运行时浪费一个线程。

```
object Application extends Controller {
  def checkUser(e:String, p:String):Boolean = {
    // ... construct cursor, etc
    val result = cursor.toList().map( _.length != 0)

    Await.result(result, 5 seconds)
  }

  val loginForm = Form(
    tuple(
      "email" -> email,
      "password" -> text
    ) verifying("Invalid user name or password", fields => fields match { 
      case (e, p) => checkUser(e, p)
    })
  )

  def index = Action { implicit request =>
    if (loginForm.bindFromRequest.hasErrors) 
      Ok("Invalid user name")
    else
      Ok("Login ok")
  }
} 
```

也许有办法通过使用[continuations](http://www.scala-lang.org/node/2096)不浪费线程，而不是尝试过。

我认为在 Play 邮件列表中讨论这个很好，也许很多人想在 Play 数据绑定中做异步 I/O（例如，用于检查数据库的值），所以有人可能会在 Play 的未来版本中实现它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-04T16:23:05.157

我也一直在为此苦苦挣扎。现实的应用程序通常会有某种用户帐户和身份验证。除了阻塞线程，另一种方法是从表单中获取参数并在控制器方法本身中处理身份验证调用，如下所示：

```
def authenticate = Action { implicit request =>
  Async {
    val (username, password) = loginForm.bindFromRequest.get
    User.authenticate(username, password).map { user =>
      user match {
        case Some(u: User) => Redirect(routes.Application.index).withSession("username" -> username)
        case None => Redirect(routes.Application.login).withNewSession.flashing("Login Failed" -> "Invalid username or password.")
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-03T19:45:21.303

表单验证意味着字段的语法验证，一一进行。如果一个文件没有通过验证，它可以被标记（例如带有消息的红色条）。

身份验证应放置在操作的主体中，该主体可能位于异步块中。应该是在`bindFromRequest`调用之后，所以必须有我之后的验证，所以之后每个字段不为空，等等。

根据异步调用的结果（例如 ReactiveMongo 调用），操作的结果可以是 BadRequest 或 Ok。

如果身份验证失败，BadRequest 和 Ok 都可以重新显示带有错误消息的表单。这些助手只指定响应的 HTTP 状态代码，独立于响应正文。

`play.api.mvc.Security.Authenticated`使用（或编写类似的自定义操作合成器）进行身份验证并使用 Flash 范围消息将是一个优雅的解决方案。因此，如果用户未通过身份验证，则始终会将用户重定向到登录页面，但如果她使用错误的凭据提交登录表单，则会在重定向之外显示错误消息。

请查看您的 play 安装的 ZenTasks 示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-03T22:05:23.080

在 Play 邮件列表中，Johan Andrén 回复了同样的问题[：](https://groups.google.com/forum/#!searchin/play-framework/async$20validation/play-framework/dGc4MKyDSX4/gsW3druteckJ)

我会将实际身份验证从表单验证中移出，而是在您的操作中进行，并且仅将验证用于验证必填字段等。像这样：

```
val loginForm = Form(
  tuple(
    "email" -> email,
    "password" -> text
  )
)

def authenticate = Action { implicit request =>
  loginForm.bindFromRequest.fold(
    formWithErrors => BadRequest(html.login(formWithErrors)),
    auth => Async {
      User.authenticate(auth._1, auth._2).map { maybeUser =>
        maybeUser.map(user => gotoLoginSucceeded(user.get.id))
        .getOrElse(... failed login page ...)
      }
    }
  )
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-23T05:30:28.053

我在 theguardian 的 GH repo 上看到了他们如何以异步方式处理这种情况，同时仍然获得表单错误助手的支持。乍一看，他们似乎将表单错误存储在加密的 cookie 中，以便在用户下次进入登录页面时将这些错误显示给用户。

摘自：[https ://github.com/guardian/facia-tool/blob/9ec455804edbd104861117d477de9a0565776767/identity/app/controllers/ReauthenticationController.scala](https://github.com/guardian/facia-tool/blob/9ec455804edbd104861117d477de9a0565776767/identity/app/controllers/ReauthenticationController.scala)

```
def processForm = authenticatedActions.authActionWithUser.async { implicit request =>
  val idRequest = idRequestParser(request)
  val boundForm = formWithConstraints.bindFromRequest
  val verifiedReturnUrlAsOpt = returnUrlVerifier.getVerifiedReturnUrl(request)

  def onError(formWithErrors: Form[String]): Future[Result] = {
    logger.info("Invalid reauthentication form submission")
    Future.successful {
      redirectToSigninPage(formWithErrors, verifiedReturnUrlAsOpt)
    }
  }

  def onSuccess(password: String): Future[Result] = {
      logger.trace("reauthenticating with ID API")
      val persistent = request.user.auth match {
        case ScGuU(_, v) => v.isPersistent
        case _ => false
      }
      val auth = EmailPassword(request.user.primaryEmailAddress, password, idRequest.clientIp)
      val authResponse = api.authBrowser(auth, idRequest.trackingData, Some(persistent))

      signInService.getCookies(authResponse, persistent) map {
        case Left(errors) =>
          logger.error(errors.toString())
          logger.info(s"Reauthentication failed for user, ${errors.toString()}")
          val formWithErrors = errors.foldLeft(boundForm) { (formFold, error) =>
            val errorMessage =
              if ("Invalid email or password" == error.message) Messages("error.login")
              else error.description
            formFold.withError(error.context.getOrElse(""), errorMessage)
          }

          redirectToSigninPage(formWithErrors, verifiedReturnUrlAsOpt)

        case Right(responseCookies) =>
          logger.trace("Logging user in")
          SeeOther(verifiedReturnUrlAsOpt.getOrElse(returnUrlVerifier.defaultReturnUrl))
            .withCookies(responseCookies:_*)
      }
  }

  boundForm.fold[Future[Result]](onError, onSuccess)
}

def redirectToSigninPage(formWithErrors: Form[String], returnUrl: Option[String]): Result = {
  NoCache(SeeOther(routes.ReauthenticationController.renderForm(returnUrl).url).flashing(clearPassword(formWithErrors).toFlash))
} 
```

# javascript - HTML Javascript 拖放：Onmousedown 或 ondragstart

> ID：14913079
> 
> 赞同：1
> 
> 时间：2013-02-16T17:30:29.757
> 
> 标签：javascript, drag-and-drop, event-listener

我有一些 javascript 允许将元素从一个 div 拖到另一个。我想编写一些代码，在拖动过程中将元素附加到鼠标光标，以便用户可以看到它移动位置。

我已经尝试了两件不太奏效的事情。关于如何调整代码的任何建议？

**尝试一**

将拖动元素的位置更改为绝对位置并将顶部，左侧设置为鼠标坐标。问题在于它只在 mouseup 上触发。元素有一个*ondragstart*监听器。当我拖动元素时，什么也没有发生；只有当它掉落时，它才会附着在鼠标上。

```
function drag(ev)
{

 ev.dataTransfer.setData("Text",ev.target.id);
 var data=ev.dataTransfer.getData("Text");

 body = document.getElementById('body');
 mouse = captureMouse(body);

body.addEventListener('mousemove',function(event)
   {
   document.getElementById(data).style.position="absolute";
   document.getElementById(data).style.top=mouse.y+"px";
   document.getElementById(data).style.left=mouse.x+"px";
   },false);

}

captureMouse = function(element)
{
var mouse = {x:100, y:100}

element.addEventListener('mousemove',function(event)
{
    var x,y;
    if(event.pageX||event.pageY)
    {
        x=event.pageX;
        y=event.pageY;
    }else{
        x=event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;
        y=event.clientX+document.body.scrollTop+document.documentElement.scrollTop
    }

    x-=element.offsetLeft;
    y-=element.offsetTop;

    mouse.x=x;
    mouse.y=y;

},false);

return mouse;
} 
```

**尝试两次**

这使用与上面相同的捕获鼠标功能。这一次，除了分配给 HTML 中元素的 ondragstart 侦听器外，我还放置了一个**onmousedown**侦听器，它会触发以下内容。这里的问题是它与 ondragstart 冲突。当我给目标元素一个绝对位置时，它旁边的 inline-block 元素会取而代之，并被 ondragstart 拾取。

有什么建议么？也许我应该完全摆脱我的 ondragstart ondragover 等并用 onmousedown 和 onmouseup 监听器替换？

```
function absolute(x){
body = document.getElementById('body');
mouse = captureMouse(body);
body.addEventListener('mousemove',function(event){
document.getElementById(x).style.position="absolute";
document.getElementById(x).style.top=mouse.y+"px";
document.getElementById(x).style.left=mouse.x+"px";
},false);
} 
```

# java - 更改 eclipse 自动生成的代码的外观

> ID：14913080
> 
> 赞同：0
> 
> 时间：2013-02-16T17:30:50.770
> 
> 标签：java, eclipse

有没有办法改变自动生成的代码在 eclipse 中的外观？

目前它生成类似的代码

```
 int a = something; 
```

但我真的很喜欢这样做

```
 int a=something 
```

那就是：没有所有额外的空间。这也适用于函数，在 , 之前有一个额外的空间

我真的更喜欢 f(int a,int b); 而不是 f(int a, int b);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:36:02.520

您始终可以在 Java --> Code-Style --> Formatter 下的首选项中更改代码的格式化方式。修改现有样式或创建自己的样式。
还有一个空格选项卡。只需取消选中这些`before/after comma`选项。
已经编写的代码可以通过按 自动格式化`ctrl + shift + f`。（或`cmd + shift + f`在 Mac 上）。 ![在此处输入图像描述](../Images/659025259551da8081c37a2f8cdcfe3d.png) 方法示例：
![在此处输入图像描述](../Images/6cd107e7571fec2b482df5ebea9ae3d4.png) 不带空格的赋值： ![在此处输入图像描述](../Images/21870f11fbf0eb012069c30c4ecc7431.png)

# excel - 将数据复制到特定列的最后使用的行

> ID：14913083
> 
> 赞同：1
> 
> 时间：2013-02-16T17:31:04.733
> 
> 标签：excel, vbscript, vba

我正在使用此代码来获取最后使用的行-

`rowNo=objExcel.Activeworkbook.Sheets(1).UsedRange.Rows.count`

现在，我想将特定列的数据复制到使用的最后一行。

//在下面的代码中要写什么来使用rowNo //

`Set Source=objExcel.Activeworkbook.Sheets(1).Column("G")`

`Source.Copy`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:01:36.167

这是找到最后一行的错误方法。请参阅有关如何找到最后一行的[链接。](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)

找到最后一行后，只需使用此代码复制

```
ws.Range("G1:G" & rowNo).Copy 
```

`ws`工作表对象在哪里。

# java - 子类中具有不同值的静态参数

> ID：14913089
> 
> 赞同：0
> 
> 时间：2013-02-16T17:31:29.847
> 
> 标签：java, parameters, static, subclass

我想为以下问题创建一个没有太多冗余的解决方案：

我有一个抽象类`Unit`、子类`SubUnit1`和`SubUnit2`. 所有`Unit`s 都有一个`maxValue`，它不同于`SubUnit1`to `SubUnit2`，但对于同一子单元的所有实例在任何时候都应该是相同的。

我不想围绕这些值复制所有的 setter、getter 或某种方法，因为它们对于所有子类都是相同的。我也不想使用普通参数并将方法传递给子类并在必要时更新这些子类的每个实例。当我创建一个新实例时，以某种方式获取当前值。

有没有办法在父类中声明某种静态参数和方法，`Unit`在不同的子类中有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:43:13.910

您可以在接受 MAXVALUE 值的父类中定义受保护的构造函数

```
public abstract class Unit {
   private final int maximum;

   protected Unit(int maximum) {
      this.maximum = maximum;
   }

   public int getMaximum() {
      return maximum;
   }
} 
```

然后在您的派生类中公开构造函数，这些构造函数使用固定值调用父构造函数，每个子类都是唯一的。

```
public class SubUnit1 {
   private static final int SUBUNIT1_MAX = 10;

   public SubUnit1() {
      super(SUBUNIT1_MAX);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:34:05.463

不，但是`interface`您可以使用一个 UNIT 应该有一个 MAXVALUE。

```
public interface IUnit
{
   public int getMaxValue();
}

public class SubUnit implements IUnit
{
   private static final int MAX_VALUE = 48;

   @Override
   public int getMaxValue() {
      return MAX_VALUE;
   }
} 
```

# algorithm - location Points：到指定路线的距离

> ID：14913091
> 
> 赞同：2
> 
> 时间：2013-02-16T17:31:38.197
> 
> 标签：algorithm, geolocation, vector-graphics, android-location, quadtree

先说一下思路：

我想检查用户到指定路线的距离。路线由多个位置点组成（图中为点 a、b、c、d）。两个相邻点描述一个向量（图中蓝线ab、bc、cd）

![矢量位置距离](../Images/71f0ba88b0663d05983fb6c9ca5a04b6.png)

现在到应用程序（特别是android，但这不是这个问题的一部分）用户的位置在他沿着路线旅行时被跟踪。对于我要检查的每个新位置，用户是否仍在路线上（或距离 X 内）。

我沿着路线画了 3 个可能的位置：

*   位置1没问题。我将垂线从点 1 下降到矢量 ab。这给了我这个向量上的一个位置点，我可以计算两点之间的距离（使用 android: `Location.distanceTo()`）

*   位置 2 当我处理向量时，它们没有开始也没有结束。黑线是向量ab的投影。计算最近距离将使我与向量 ab 的距离很近，但与向量 bc 的距离很远。事实上，我需要计算到 bc 的距离，因为这就是路线的前进方式。但是我怎么知道在我的算法中我需要选择哪个向量来计算距离？

*   位置 3 使我可以使用向量 ab 或 bc 进行计算。两者几乎同样接近。如何知道选择哪一个？

**四舍五入：**

我有一个带有位置点的数组：

```
{[lat1, lon1], [lat2, lon2],[...]} 
```

我的应用程序正在跟踪用户的位置。我现在想将新位置与数组中的这条轨道进行比较。

有人知道解决问题的算法，还是有人可以帮助我解决算法？（伪代码就足够了）

//编辑：我刚读到四叉树算法。除了Soonts的实施之外，这也许是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:51:16.960

首先使用以下公式将所有数据（用户位置、点）从 lat/lon 转换为 x / y km：

Y = 纬度 * 111，X = 经度 * 111 * cos( 纬度 )

（如果路线长度超过 1000 英里，这将略微失败，并且在两极附近或当您的路径穿过 180 条子午线时会严重失败，希望这对您的任务来说没问题）。

然后使用以下公式找到点与每个段之间的距离：[https](https://stackoverflow.com/a/1501725/126995) ://stackoverflow.com/a/1501725/126995 ，并搜索最小距离。您的路线有超过 200 个航段，需要进行一些性能优化。

PS如果您对这种方法的局限性不满意 - 寻找球体上点和线段之间距离的公式，但我可以向您保证，这些将包含很多三角函数，我怀疑廉价的安卓手机会做它的速度很快，路线很长。

# css - 在彼此下方显示相对容器（高度可变）

> ID：14913096
> 
> 赞同：0
> 
> 时间：2013-02-16T17:32:32.650
> 
> 标签：css, position, css-position

我有一些相对定位的容器（高度不同），我想将它们显示在彼此下方。发生的事情是它们彼此重叠显示（参见小提琴）。

我`position:relative`在容器上使用是因为我希望子元素`position:absolute`相对于它们的容器具有并显示。例如，我认为可能有一个固定高度的快速修复，但这不是很灵活，我的容器（或他们的孩子）的高度会有所不同。

[期望的结果 - 小提琴](http://jsfiddle.net/DHA3b/)

[实际结果 - 小提琴](http://jsfiddle.net/erZcE/)

代码：

```
<style type="text/css">
.outside
{
    position:relative;
    border:1px solid red;
}

.inside
{
    position:absolute;
    top:0;
    left:0;
}
</style>

<div class="outside">
    <div class="inside"><p>absolute 1</p></div>
</div>
<div class="outside">
    <div class="inside"><p>absolute 2</p></div>
</div>
<div class="outside">
    <div class="inside"><p>absolute 3</p></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:34:52.847

当你在**相对元素中放置****绝对**的东西时，这个相对元素不会考虑绝对元素的宽度或高度，所以只需添加一个- [**DEMO**](http://jsfiddle.net/Dsaff/) -**`height:30px;`[](http://jsfiddle.net/Dsaff/)**

 ****如果您不希望有一个固定的高度，那么至少使用一个`min-height`. -[**演示**](http://jsfiddle.net/dCMcC/)-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:37:36.450

您遇到的问题是您的`outside`容器没有尺寸，因为`inside`div 是**绝对**定位的。

既然你说这些是可变高度的容器，我知道没有办法解决这个问题。

“期望的结果”小提琴有什么问题？您似乎正在尝试重新创建框呈现方式的默认行为。****

# c# - MySql 数据库连接问题

> ID：14913099
> 
> 赞同：0
> 
> 时间：2013-02-16T17:32:47.033
> 
> 标签：c#, asp.net, mysql

我有一个 ASP.NET 应用程序，它连接到一个 mysql 数据库。如果在服务器上我在visual studio（使用开发服务器）中运行网站，它可以正确连接到mysql数据库。

但是，如果在同一台服务器上我使用 IIS，`'Unable to connect to any of the specified MySQL hosts'`则会引发异常。它被配置为使用身份为 的应用程序池`'ApplicationPoolIdentity'`。

连接字符串如下：

```
<add name="MYSQLConnectionString" connectionString="uid=name;server=111.11.111.111;Pwd=password;database=dbname" providerName ="MySql.Data.MySqlClient"/> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:13:45.020

当您使用 Visual Studio 进行调试时，该帐户是本地管理员，并且很可能拥有一切权限。IIS 默认应用程序池帐户没有这些提升的权限。确保您的 IIS 站点应用程序池在其下运行的帐户具有正确的权限，或者暂时将帐户更改为本地系统，以查看是否与权限相关的问题。您可以使用它[`FileMon`](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)来跟踪默认帐户无法访问的文件或注册表项。

[编辑]

很可能您将 MySQL 安装到某个地方`C:\MySQL`，您只需要授予 IIS 应用程序池帐户对该目录的读取访问权限，并且可能还需要一个或两个注册表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:33:17.380

该站点未安装在根目录中，而是作为默认网站中的应用程序安装。如果我们将它作为根站点运行，它就可以工作。不知道为什么。

# java - getClassLoader().getResourceAsStream("../resources/config.properties") 返回 null

> ID：14913100
> 
> 赞同：2
> 
> 时间：2013-02-16T17:32:49.050
> 
> 标签：java

大家好，我收到错误消息

```
Caused by: java.lang.NullPointerException
    at java.util.Properties$LineReader.readLine(Properties.java:434)
    at java.util.Properties.load0(Properties.java:353)
    at java.util.Properties.load(Properties.java:341)
    at richard.fileupload.FileUploadController.loadProp(FileUploadController.java:48)
    ... 60 more 
```

每当我的属性类被调用时，这就是代码

```
 private Properties configProp = new Properties();

    @PostConstruct
    public void loadProp() {
        System.out.println("Loading properties");
        InputStream in = this.getClass().getClassLoader().getResourceAsStream("../resources/config.properties");
        try {
            configProp.load(in);
            System.out.println(configProp.getProperty("destinationPDF"));
            System.out.println(configProp.getProperty("destination"));
            System.out.println(configProp.getProperty("fileList"));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    private String destinationPDF = configProp.getProperty("destinationPDF");
    public String destination = configProp.getProperty("destination");
    private String username; 
```

错误似乎来自这一行：

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream("../resources/config.properties");
        try {
            configProp.load(in); 
```

是什么导致了这个错误，我该如何解决？

上面的代码应该指向属性文件，然后从中检索三个变量值，它没有达到

```
System.out.println(configProp.getProperty("destinationPDF"));
System.out.println(configProp.getProperty("destination"));
System.out.println(configProp.getProperty("fileList 
```

在我得到错误之前

这是我的目录结构

![在此处输入图像描述](../Images/2174129ad9ec848786494c90ec9d86bd.png)

如您所见，属性文件位于资源/中，我将如何获得指向此的链接

**编辑 ：**

好的，所以它与文件的完整链接完美结合：

```
configProp.load(new FileInputStream("D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/WEB-INF/config.properties")); 
```

但是无论我将文件放在项目中的哪个位置，我都无法加载它，这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T17:39:48.817

这行没有意义：

```
this.getClass().getClassLoader().getResourceAsStream("../resources/config.properties") 
```

`ClassLoader.getResourceAsStream()`使用从根包开始的包路径从类路径加载资源。根包之上没有任何东西。

# c# - 查看几个 DateTime 数组中是否有任何匹配项的最简单方法是什么？

> ID：14913101
> 
> 赞同：5
> 
> 时间：2013-02-16T17:32:50.210
> 
> 标签：c#, linq, datetime, collections

如果我有 3 个来自不同来源的 DateTime 列表

```
 List<Datetime> list1 = GetListOfDates();
 List<Datetime> list2 = GetAnotherListOfDates();
 List<Datetime> list3 = GetYetAnotherListOfDates(); 
```

返回所有 3 个列表中存在的 DateTime 列表的最快方法是什么。有一些 LINQ 语句吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T17:34:25.050

```
List<DateTime> common = list1.Intersect(list2).Intersect(list3).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T17:39:55.677

```
HashSet<DateTime> common = new HashSet<DateTime>( list1 );
common.IntersectWith( list2 );
common.IntersectWith( list3 ); 
```

对于`HashSet`此类任务，该类比使用`Enumerable.Intersect`.

**更新：**确保您的所有值都相同`DateTimeKind`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T17:35:39.050

```
var resultSet = list1.Intersect<DateTime>(list2).Intersect<DateTime>(list3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T17:35:54.540

您可以与列表相交：

```
var resultSet = list1.Intersect<DateTime>(list2);
var finalResults = resultSet.Intersect<DateTime>(list3);

foreach (var result in finalResults) {
   Console.WriteLine(result.ToString());
} 
```

# django - 运行 django 测试时，在南迁移之前运行 db 语句

> ID：14913103
> 
> 赞同：0
> 
> 时间：2013-02-16T17:33:41.143
> 
> 标签：django, django-south

当我运行 django 测试时，我需要在创建测试数据库之后，但在我的南迁移运行之前执行一个 DB 语句。

该语句如下，必须由具有管理员权限的用户执行（Postgres 9.1）：`CREATE EXTENSION pg_trgm;`

我在哪里可以连接到数据库创建逻辑来执行这个语句？我最好只想在测试运行期间执行此语句，因为数据库已经在生产中正确配置，并且生产数据库用户没有足够高的权限来执行该语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:13:40.843

我想你总是可以进行一个执行你的语句的迁移并`depend`在它上面进行所有其他迁移（以确保它首先运行）

在生产中你可以运行它`--fake`

# objective-c - 关于目标 c 中的初始化属性类

> ID：14913105
> 
> 赞同：0
> 
> 时间：2013-02-16T17:34:05.630
> 
> 标签：objective-c, cocoa-touch

好吧，我在目标 c 中的初始化类属性方面遇到了一些麻烦。我已经阅读了很多信息，但我没有找到我的问题的答案。所以我举个例子。1)

```
//Ex_1.h
@interface Ex_1: UIView {
   IBOutlet UIButton *playBut;
}

@property(retain, nonatomic) IBOutlet UIButton *playBut;
-(void) method1;

@end

//Ex_1.m
@implementation Ex_1
@synthesize playBut;

-(id) initWithFrame:(CGRect)frame {
  self = [super initWithFrame : frame];
  if (self != nil)
      playBut = [UIButton buttonWithType:UIButtonTypeRoundedRect]; //retainCount of playBut = 1;
  return self;

}

-(void) method1 {
   [playBut setTitle:@"pause" forState:UIControlStateNormal];
}

@end 
```

我首先主程序我初始化 Ex_1 的对象，然后在一段时间后调用该对象的方法 1（[对象方法 1]），我得到运行时错误（错误告诉我 playBut 是 dealloc，但我认为 playBut 的保留计数 = 1）。所以我有一些问题：

1.  可能吗 ？
2.  为什么垃圾收集器会释放 playBut 如果它的保留计数 = 1？（因为我不调用 [playBut release];
3.  如何初始化类属性？

我熟悉 C++ 和 actionScript，但我一生中第一次看到垃圾收集器释放了类属性。我使用非ARC。这对我很重要。感谢您的关注和解答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:41:20.100

`[UIButton buttonWithType:]`返回一个`autoreleased`对象。它将在您调用它的范围的生命周期内保持有效，即，`initWithFrame:`但自动释放池可以在此之后回收它。你应该在你的初始化选择器中说：

```
playBut = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain]; 
```

然后将其发送到您的`dealloc`：

```
[playBut release]; 
```

现在，如果您将`playBut`作为孩子添加到另一个`UIView`，该视图将保留孩子并且您不需要，只要您只在超级视图的生命周期内使用它。这是一个正常的模式。您可以更进一步，将 a 分配`tag`给 playBut 然后使用[viewWithTag:](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)在需要时找到您的`UIButton`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:46:21.813

您可能会感到困惑，因为您的属性声明包含一个`retain`. 但是，您在这里直接分配给您的 iVar：

```
 playBut = [UIButton buttonWithType:UIButtonTypeRoundedRect]; //retainCount of playBut = 1; 
```

所以不要利用属性设置器，所以它不会为你保留。

所以要么：

```
 self.playBut = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

或者：

```
 playBut = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain]; 
```

在这两者中，使用 self.playBut*要好得多*——除非你有充分的理由不这样做，否则你应该一直使用属性及其访问器。并且无需单独声明 iVar（或这些天 @synthesize）。在这里查看我的答案： [我应该在接口中声明变量还是在 Objective-C 弧中使用属性？](https://stackoverflow.com/questions/14236799/should-i-declare-variables-in-interface-or-using-property-in-objective-c-arc/14236931#14236931)

至于您使用 UIButtons 的特定示例，它们通常会直接添加到 UI 中，它会为您保留，因此您不会遇到这种情况。这就是为什么`IBOutlets`通常声明为`weak`(ARC) 或`assign`(nonARC)。

# java - Java遍历优先级队列

> ID：14913106
> 
> 赞同：1
> 
> 时间：2013-02-16T17:34:07.153
> 
> 标签：java, priority-queue

我正在尝试做一个while循环，它将遍历java优先级队列并读取队列日期的顶部。它具有日期值，查看队列的其余部分以查看该日期是否正在其他地方使用，如果是，则将这些元素临时添加到它们自己的队列中，以便我可以调用不同的比较器方法来对它们进行排序。

```
public JobRequest closestDeadlineJob(int freeCPUS) {
    // find top job to determine if other jobs for date need to be considered
    JobRequest nextJob = scheduledJobs.peek(); // return top most job
    // what is it's date?
    Date currentDate = nextJob.getConvertedDeadlineDate();
    JobPriorityQueue schedulerPriorityQueue = new JobPriorityQueue();
    schedulerPriorityQueue.addJob( nextJob );

    while(true) {

    }

    // this is the item at the top of the PRIORTY JOB queue to return 
    // remove that item from scheduledJobs
   // return null; // replace with to the one you want to return
} 
```

到目前为止我所拥有的，你看的不是很多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:35:54.017

PriorityQueue 不为您提供排序的迭代顺序。PriorityQueue 的唯一保证是提取方法（peek/poll/remove）将根据您的比较器返回集合中的最小元素。如果您需要排序的迭代顺序 - 请改用 TreeSet/TreeMap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:55:18.920

```
import java.util.Date;
import java.util.Comparator;
import java.util.PriorityQueue;

class Job implements Runnable{

 Priority priority;
 Date dateOccurance;

 public Job(Priority priority, Date occurance){
    this.priority = priority;
    this.dateOccurance = occurance;
 }

 public void run(){
    //Job execution
    System.out.println("executed");
 }
}

enum Priority {
 High,
 Medium,
 Low
}

class JobComparator implements Comparator<Job>  {

 @Override
 public int compare(Job j1, Job j2) {

    if(j1.priority.ordinal() > j2.priority.ordinal()) {
        return 1;
    } else if (j1.priority == j2.priority) {
        if(j1.dateOccurance.after(j2.dateOccurance)) {
            return 1;
        } else if (j1.dateOccurance.before(j2.dateOccurance)) {
            return -1;
        } else {
            return 0;
        }
    }  
    return -1;
 }

}

public class PriorityQueueTest {

public static void main(String[] args) throws InterruptedException {
    Date d = new Date();
    Job job1 = new Job(Priority.High, d);
    Job job2 = new Job(Priority.High, d);
    Job job3 = new Job(Priority.Medium, d);
    Job job4 = new Job(Priority.Low, d);    
    Thread.sleep(2000);
    Date l = new Date();
    Job job5 = new Job(Priority.Low, l);    

    Comparator<Job> jComp = new JobComparator();
    PriorityQueue<Job> queue = 
        new PriorityQueue<Job>(10, jComp);

    queue.add(job4);
    queue.add(job3);
    queue.add(job1);
    queue.add(job2);
    queue.add(job5);

    while (queue.size() != 0)
    {
        Job j = queue.remove();
        System.out.println(j.priority +"     "+j.dateOccurance);
    }
 }      

} 
```

# r - 如何在ggplot2中指定回归线的方程？

> ID：14913109
> 
> 赞同：2
> 
> 时间：2013-02-16T17:34:17.873
> 
> 标签：r, ggplot2

我想在 ggplot2 中创建一个散点图，其中覆盖了一条或多条线。查看 geom_smooth() 和 geom_line() 的文档后，我仍然不清楚如何为要添加到绘图中的线指定方程。我知道这必须是非常基本的，所以请随时简单地向我指出我必须忽略的适当文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T17:52:58.240

`geom_abline()`是您要查找的 geom 的名称，例如`geom_abline(aes(intercept=a,slope=b))`. [在线文档](http://docs.ggplot2.org/current/geom_abline.html)中有示例。

# spring - 在 Spring 中创建安全页面

> ID：14913110
> 
> 赞同：1
> 
> 时间：2013-02-16T17:34:23.087
> 
> 标签：spring

我正在使用 Spring 创建一个网站，并希望文件夹“/admin”下的所有页面都是安全的。但是真的不知道从哪里开始，只有一个复杂的例子可以继续。

在工作中，我们将详细信息存储在数据库中，但我希望它可以比这更简单，可能存储在 context.xml 或其他东西中？我遇到了这个页面：

![在此处输入图像描述](../Images/71de5961cd2c7d07da758638f6cc3abb.png)

网页.xml：

```
 <security-constraint>
    <display-name>admin pages</display-name>
    <web-resource-collection>
        <web-resource-name>Administration Pages</web-resource-name>
        <description/>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <description/>
        <role-name>userAdmin</role-name>
    </auth-constraint>
    <!--  <user-data-constraint>
        <description/>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>-->
</security-constraint> 
```

在 tomcat-users.xml 我有以下密码信息：

```
<user password="password" roles="tomcat,role1,manager-script,manager-gui,admin,manager" username="user"/> 
```

但是当我尝试访问页面 /admin/adminindex.htm 时，我收到了一个禁止的错误：

> 对指定资源的访问（对请求的资源的访问已被拒绝）已被禁止。

理想情况下，我想将用户详细信息存储在数据库中，但目前都无法进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:38:45.837

我会研究[Spring Security](http://static.springsource.org/spring-security/site/)，它提供了大量用于保护网站的选项（包括 DB 支持或 JNDI 支持的安全性）。本[教程](http://static.springsource.org/spring-security/site/tutorial.html)可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T19:23:10.997

我将从这个开始： http:

[//docs.spring.io/autorepo/docs/spring-security/3.0.x/reference/springsecurity.html](http://docs.spring.io/autorepo/docs/spring-security/3.0.x/reference/springsecurity.html)
您还可以查看这个已经有基本代码开始使用Spring的项目安全

[https://github.com/pgardunoc/spring-security](https://github.com/pgardunoc/spring-security)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:50:09.483

```
This is how I secure applications using Spring Security, here is the web.xml

<filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    </filter-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-servlet.xml
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring-servlet.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/myapp/*</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

spring-security.xml

     <security:http auto-config="true" use-expressions="true" access-denied-page="/" create-session="never" disable-url-rewriting="true">

    <security:intercept-url pattern="/myapp/auth/login" access="permitAll" />
    <security:intercept-url pattern="/myapp/main/**"  access="hasRole('ROLE_USER')" />

    <security:form-login login-page="/" authentication-failure-url="/myapp/auth/login?error=true" default-target-url="/myapp/main/default"/>
    <security:logout invalidate-session="true" logout-success-url="/myapp/auth/login" logout-url="/myapp/auth/logout" />

</security:http>

In order to authenticate using a Database you can use an Authentication Manager like this in spring-security.xml

 <security:authentication-manager>
        <security:authentication-provider user-service-ref="userService">
            <security:password-encoder ref="passwordEncoder" />
        </security:authentication-provider>
    </security:authentication-manager>

Where "userService" is a service you define that has access to the Database, your service must implement org.springframework.security.core.userdetails.UserDetailsService and write the method 

 public UserDetails loadUserByUsername(String userName)
        throws UsernameNotFoundException, DataAccessException {
    UserDetails user = null;
    try {
        // Replace loadUserFromDB with your Data access method to pull the user and encrypted password from the database
        Users u = loadUserFromDB(userName);
        if(u != null)
            user = new User(u.getEmail(), u.getPassword().toLowerCase(), true, true, true, true, getAuthorities(0));
    } catch (Exception e) {
        e.printStackTrace();
    }
    return user;
 }

Spring security will use this method to secure your pages. Make sure to include this method:

    public Collection<GrantedAuthority> getAuthorities(Integer access) {
    // Create a list of grants for this user
    List<GrantedAuthority> authList = new ArrayList<GrantedAuthority>(1);
    authList.add(new GrantedAuthorityImpl("ROLE_USER"));
    authList.add(new GrantedAuthorityImpl("ROLE_ANONYMOUS"));
    return authList;
    } 
```

# hash - 远程密码哈希

> ID：14913126
> 
> 赞同：0
> 
> 时间：2013-02-16T17:36:16.613
> 
> 标签：hash

让外部机器为密码创建哈希值有多安全。因此，您将拥有简单的网络服务器和一台重型机器，网络服务器正在使用该机器来创建强大的 Bcrypt 哈希。该系统不需要用户的帐户名，只需要密码，这样就不会成为安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T11:32:59.577

它的安全性较低，因为您有额外的机器和通信通道需要保护。通过远程散列密码，您一无所获。

# python - 路由器后面的服务器

> ID：14913128
> 
> 赞同：1
> 
> 时间：2013-02-16T17:36:21.053
> 
> 标签：python, apache, networking, router

我正在尝试在路由器后面设置服务器，并且已经能够将其减少到以下问题：

我用：

1.  西门子 SL2-141 路由器。
2.  带有 Python 2.7 的 Windows 7 64 位。

我跑：

*   服务器.py：

    ```
    import socket
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.bind((IP, 8080))
    sock.listen(1)
    sock.accept()
    print 'success'
    sock.close() 
    ```

*   客户端.py：

    ```
    import socket
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.connect((IP, 8080))
    sock.close() 
    ```

* * *

1.  当 IP = '127.0.0.1'**时，它可以工作**。
2.  我设置了一个静态IP：

    ```
    > Network And Sharing Center > Change Adaper Settings > Local Area Connection
    > Properties > Internet Protocol Version 4 (TCP/IPv4) > Properties
    > Use The Following IP Address:

        IP Address:      10.0.0.200
        Subnet Mask:     255.0.0.0
        Default Gateway: 10.0.0.138

    > Use The Following DNS Server Addresses:

        Preferred DNS Server: 10.0.0.138
        Alternate DNS Server: - - - - 
    ```

    当 IP = '10.0.0.200'**时，它可以工作**。

3.  我在路由器上设置了端口转发：

    ```
    > http://10.0.0.138/
    > Username: Admin
    > Password: Admin
    > Advanced > Virtual Server > Port Forwarding > Add:

        User Defined: Test

        From Internal Host IP Address:       ALL
        Forward to Internal Host IP Address: 10.0.0.200

        Protocol:                            TCP
        External Packet Port Start:          8080
        External Packet Port End:            8080
        Forward To Internal Host Port Start: 8080
        Forward To Internal Host Port End:   8080

    > Apply (and reboot router, just in case). 
    ```

    据我了解，如果我离开服务器 IP '10.0.0.200' 并将客户端 IP 设置为我的公共 IP，它应该可以工作，但**它不起作用**（“无法建立连接，因为目标机器主动拒绝它”） .

我尝试在 Apache 服务器上做同样的事情，结果相似：浏览 localhost 有效，浏览静态 IP 有效，但浏览公共 IP 无效（端口 80 给了我路由器设置页面，而端口 8080 只是不能'不连接）。

最后注意事项：

*   我关闭了防火墙。
*   我检查了端口是否打开（[http://www.canyouseeme.org/](http://www.canyouseeme.org/)）并且确实如此。
*   我检查了服务器是否正在监听（netstat -na | find /i "8080"），它确实在监听。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:49:35.667

> 据我了解，如果我离开服务器 IP '10.0.0.200' 并将客户端 IP 设置为我的公共 IP，它应该可以工作，但它不起作用。

没错，如果客户端在外部网络上。在本地网络上，如果您使用公共地址，它可能会或可能不会工作，具体取决于您的路由器是否实施 NAT 反射（如果没有，它将丢弃数据包）。您应该使用本地网络上的本地（私有）IP 地址。许多路由器允许您为本地资源配置 DNS 记录（覆盖来自 DNS 服务器的记录，实现一种“拆分 DNS”）。这样您就可以使用一个 DNS 名称来获取正确的地址。

如果您的问题是来自外部网络上的客户端的连接，那么听起来您的 NAT 路由器不是端口转发。我没有你的路由器型号，但我看到这条线：

> 来自内部主机 IP 地址：ALL

并想知道您是否必须允许`From External`.

您还确定启用了此规则吗？（我只是问，因为我上次遇到这样的问题时，我已经正确创建了转发规则，但它没有启用。）

如果您仍然卡住，请尝试删除规则并重新测试端口是否对[http://www.canyouseeme.org/](http://www.canyouseeme.org/)开放。我还会在不运行您的服务器程序时重新测试（以测试外部端口扫描是否具有误导性，这可能会发生）。

最后，当你写：

> 我关闭了防火墙。

你是说Windows防火墙吗？您还需要仔细检查，因为 Windows 防火墙可以允许本地连接同时阻止远程连接。

# c - char * 的大小是否与 int * 的大小相同？

> ID：14913131
> 
> 赞同：7
> 
> 时间：2013-02-16T17:36:56.110
> 
> 标签：c, pointers, assembly, dereference

我知道：char * 是指向 char 的指针。int * 是一个指向 int 的指针。

所以，我想确认以下两件事：

1.  所以现在假设我在 32 位机器上，那么这意味着内存地址是 32 位宽的。因此，这意味着 char * 和 int * 的大小都是 32 位（4 个字节），对吧？char * * 的大小也与 int * 的大小相同吗？

2.  假设我有： int * ptr;

因此，现在 *((char * *) ptr) = 0x154 与 *((int *) ptr) = 0x514 相同，对吧？（ 0x514 只是任何随机内存地址）

平台：我在 x86 上。

PS：我知道类型转换不是建议的编码方式。但是我正在做内核编码，因此我必须进行类型转换！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T17:42:17.793

在 C 中，指针[不保证具有相同的大小](http://c-faq.com/null/machexamp.html)。现在实际上大多数实现指针将具有相同的大小，但这是编译器的实现细节。

来自[C 常见问题解答](http://c-faq.com/null/machexamp.html)：

> 旧的 HP 3000 系列对字节地址使用与字地址不同的寻址方案；像上面的几台机器一样，它因此对 char * 和 void * 指针使用与其他指针不同的表示
> 
> 根据使用的“内存模型”，8086 系列处理器（PC 兼容）可以使用 16 位数据指针和 32 位函数指针，反之亦然。

也不`*((char *)ptr) = 0x154`一样。`*((int *)ptr) = 0x154`因为您正在取消引用指针，所以您会将 a`char`大小和 an大小的数据写入 指向`int`的位置`ptr`。假设一个 8 位 char 和一个 32 位 int，`*((char *)ptr) = 0x154`将写入`0x154`分配给的内存地址`ptr`， `*((int *)ptr) = 0x154` 并将写入`0x0000000154`从分配给的地址开始的 4 个字节`ptr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:42:09.610

从技术上讲，C 标准只保证 sizeof(char) == 1，其余的取决于实现。但在现代 x86 架构（例如 Intel/AMD 芯片）上，这是相当可预测的。

您可能听说过将处理器描述为 16 位、32 位、64 位等。这通常意味着处理器使用 N 位来表示整数。由于指针存储内存地址，并且内存地址是整数，因此这有效地告诉您指针将使用多少位。sizeof 通常以字节为单位，因此为 32 位处理器编译的代码将报告指针的大小为 4（32 位/每字节 8 位），而为 64 位处理器编译的代码将报告指针的大小为 8 （每字节 64 位 / 8 位）。这就是 32 位处理器的 4GB RAM 限制的来源——如果每个内存地址对应一个字节，则要寻址更多内存，您需要大于 32 位的整数。

在实践中，指针在 16 位系统上的大小为 2（如果你能找到的话），在 32 位系统上为 4，在 64 位系统上为 8，但是依赖给定的指针并没有什么好处尺寸

# node.js - grunt 异步任务超时

> ID：14913134
> 
> 赞同：2
> 
> 时间：2013-02-16T17:37:21.067
> 
> 标签：node.js, gruntjs, yeoman

我有一个异步任务，但它在 5 秒内超时，然后 grunt 继续执行下一个任务：

```
grunt.registerTask("something", '', function(target){

    var done = this.async();

    function checkStatus ()
    {
        console.log('test');
        if(someCondition)
            done();
    }
    setInterval(checkStatus, 500);
}); 
```

我在终端中看到 9 条“测试”消息，然后它只是移动到下一个任务，而无需进一步等待“完成”。我在 grunt 的代码中没有发现任何限制或时间限制。
为什么会这样？

`grunt 0.4.8rc1`

# forms - Cake PHP 将参数与表单一起传递给控制器

> ID：14913136
> 
> 赞同：1
> 
> 时间：2013-02-16T17:37:26.117
> 
> 标签：forms, cakephp, parameters

我不知道如何通过 Cake 的表单安全地传递参数。我现在使用的方法如下：

```
$this->Form->create('Post', array('label' => '', 'action' => '', 'url' => 'inseratAngenommen/'.$postId)); 
```

在控制器中有支架：

```
function inseratAngenommen($id = null, $bs = null){
    //stuff
} 
```

问题是用户可以在浏览器中修改$postId的输出数：

```
action="/cakephp/posts/inseratAngenommen/149" 
```

对于这种情况，我想传递 HTML 中不可见的参数。那可能吗？我想到了 Form->PostLink 提供的方法。我什么也找不到。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:43:32.107

由于数据是由用户发送的，因此**无法**通过网站安全地发送参数。

使用 cakephp 的验证方法来确保数据是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:48:56.703

1]方法一：添加模糊性：通过以下方式将$id隐藏到发布的字段中：

```
$this->Form->hidden('id');
$this->Form-field('id');  // even this one will do as cake hides ids by default 
```

2]方法二：将id保存在服务器上，例如在会话中

```
$this->Session->write('current-edited-post-id', $id); // upon form display
$id = $this->Session->read('current-edited-post-id'); // upon form submission 
```

但请注意，如果用户打开多个选项卡并从这两个选项卡操作一个会话，则方法 2 表现不佳:(

# linux - 如何使用 rtorrent 中的移动/删除文件自动删除种子？

> ID：14913137
> 
> 赞同：2
> 
> 时间：2013-02-16T17:37:30.620
> 
> 标签：linux, libtorrent

在 rtorrent 中，假设我正在播种一个 torrent，并从我的硬盘驱动器中删除它的内容。rtorrent 最终注意到并且 torrent 显示“下载注册为已完成，但哈希检查返回未完成的块”。发生这种情况时，我可以让 rtorrent 自动删除种子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:16:11.280

手动运行

> rtcontrol --from-view 开始 is_complete=yes is_ghost=yes --delete

或者把它放在一个 cron 计划中，如果这是一个常规的事情。

有关更多信息，请参阅[https://code.google.com/p/pyroscope/wiki/RtControlExamples#Automatic_stop_of_torrents_have_problems](https://code.google.com/p/pyroscope/wiki/RtControlExamples#Automatic_stop_of_torrents_having_problems)。

# c# - 编写缓存模拟器程序需要什么？

> ID：14913140
> 
> 赞同：0
> 
> 时间：2013-02-16T17:37:49.677
> 
> 标签：c#, c++

任何人都可以解释或指向我解释编写缓存模拟器程序的来源。

这是一个学校项目，我无意使用其他人的代码，因为它对我没有好处。我将对程序和概念的理解进行测试，但我希望看到一些详细的材料，伪代码或甘特图或其他东西。

我在这里问是因为教科书和讲座没有给我足够的信息，而且我这周在谷歌上搜索了几个小时，没有发现任何相关的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T17:50:15.020

试试[这个](http://www.cs.umd.edu/class/spring2012/cmsc411/p1/)。但请记住在页面底部发布的学术诚信。它可能不是你去的同一所学校，但我相信无论你完成什么学校作业，人工智能都是通用的。你也可以尝试用[谷歌搜索你的问题](https://www.google.com/search?q=how+to+write+a+cache+simulator+program&aq=f&oq=how+to+write+a+cache+simulator+program&aqs=chrome.0.57j62l2.6055j0&sourceid=chrome&ie=UTF-8)，我发现了~五个这样做的参考资料。

# android - 如何去除图像之间的空白？

> ID：14913143
> 
> 赞同：1
> 
> 时间：2013-02-16T17:38:22.787
> 
> 标签：android, android-layout, imageview, margin

我正在开发我的第一个 Android 应用程序，我想用两个连续的图像构建一个主菜单，然后是一个带有一些选项卡的 TabWidget。我使用的是安卓 2.3。

我不知道为什么，但是，在图像之间，出现了一些看起来很丑陋的空白......我一直在尝试修改 paddin 和 margin 但没有工作......任何人都知道会发生什么？

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <!--  android:background="#000000" -->

<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <ImageView android:id="@+id/TwiceBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/twice_bar"
        android:scaleType="fitStart"
        />

    <ImageView
        android:id="@+id/Banner_publicidad"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/banner_publicidad"
        android:scaleType="fitStart" />

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

     </LinearLayout>
</TabHost> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:39:19.803

您是否尝试将 android:adjustViewBounds="true" 添加到您的 ImageViews？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:09:04.160

稍微调整一下，`fitStart`只会将图像移动到图像视图的顶部/左侧，它不会填充空间。

`cropCenter`允许图像按您的要求填充空间，因此，如果图像视图比图像宽，这意味着它需要裁剪底部和顶部以填充空间，它会这样做。

一般来说，`Center`scaleTypes 是最好的填充空间。

```
<LinearLayout
 android:orientation="vertical"
 android:layout_width="match_parent"
 android:layout_height="match_parent">

 <ImageView android:id="@+id/TwiceBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/twice_bar"
    android:scaleType="centerCrop"
    />

 <ImageView
    android:id="@+id/Banner_publicidad"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/banner_publicidad"
    android:scaleType="centerCrop" />

 <TabWidget
    android:id="@android:id/tabs"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

 <FrameLayout
    android:id="@android:id/tabcontent"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</LinearLayout> 
```

# php - Symfony2 表单 - 如何用默认值覆盖字段

> ID：14913144
> 
> 赞同：1
> 
> 时间：2013-02-16T17:38:24.780
> 
> 标签：php, forms, symfony

我有一个带有一个默认值的表单：

```
class GearType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('options')
            ->add('model', 'choice', array('choices' => $this->getModelChoices(), 'data' => 2));
    } 
```

要求之一是转售商可以通过在 URL 中传递参数来预先填充表单。对于潜在客户来说，复制和粘贴电子邮件、通讯器等的链接也是一个不错的功能。

我是这样做的：

```
 /**
 * @Route("/car/gear")
 * @Template()
 */
public function gearAction(Request $request)
{
    $form = $this->createForm(new GearType());

    if ($request->isMethod('POST')) {
        $form->bind($request);
        if ($form->isValid()) {
            return 'is valid';
        }
    } else {
        $get = $this->getRequest()->query->all();
        if (!empty($get)) {
            $normalizer = new GetSetMethodNormalizer();
            $form->setData($normalizer->denormalize($get, new Gear())); # look here 
        }
    }

    return array('form' => $form->createView());
} 
```

不幸的是，“选项”字段始终具有默认值，而不是作为参数传递的值。我试图改变线#看看这里

```
 $gear =  $normalizer->denormalize($get, new Gear());
        $form = $this->createForm(new GearType(), $gear); 
```

但没有结果。

似乎解决方案正在将附加参数传递给 GearType 对象。我不喜欢这个解决方案。有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:38:26.170

该字段`options`始终具有默认值的原因可能是实际查询。不要直接对数据进行非规范化和设置，而是将`else`片段修改为：

```
} else {
    $form = $this->createForm(new GearType(), new Gear(), array(
        'validation_groups' => array('not-validating')
    ));
    $form->bind($request);
} 
```

该表单将仅针对与该组关联的验证进行验证，这将避免在表单构建为 form`not-validating`时显示常见警报。`required``GET`

关于“验证组”的文档： http: [//symfony.com/doc/current/book/forms.html#validation-groups](http://symfony.com/doc/current/book/forms.html#validation-groups)

问题类似于：[Symfony2 中的实体表单字段和验证？](https://stackoverflow.com/questions/8988718/entity-form-field-and-validation-in-symfony2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:04:10.690

添加此代码段，并根据需要在 [ ] 之间进行修改

```
 $form->bind($request);
        if ( [ passed parameters from querystring ] ){               //// New Code
            $form->getData()->setOptions( [ processed parameter ]);  //// New Code 
        }                                                            //// New Code
        if ($form->isValid()) {
            return 'is valid';
        } 
```

# iphone - iOS - 在 UIWebView 中显示谷歌结果

> ID：14913147
> 
> 赞同：2
> 
> 时间：2013-02-16T17:38:33.253
> 
> 标签：iphone, ios

我对在 UIWebView 中显示谷歌结果有疑问 - 使用正常请求，例如[http://www.google.pl/search?q=ios](http://www.google.pl/search?q=ios) 。我想在商业应用中使用它，是否有任何谷歌许可限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T18:18:51.797

只要您不修改标准网络搜索返回的网页（如[http://www.google.pl/search?q=ios](http://www.google.pl/search?q=ios)），就可以了。

> 不要滥用我们的服务。例如，不要干扰我们的服务或尝试使用我们提供的界面和说明以外的方法访问它们。您只能在法律允许的情况下使用我们的服务，包括适用的出口和再出口管制法律和法规。如果您不遵守我们的条款或政策，或者我们正在调查可疑的不当行为，我们可能会暂停或停止向您提供我们的服务。

来源：[谷歌服务条款](https://www.google.com/intl/en/policies/terms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T10:05:31.557

试试这个：

**搜索引擎查询的类型**

1.  谷歌搜索 = [http://google.com/search?q=ios](http://google.com/search?q=ios)
2.  雅虎搜索 = [http://search.yahoo.com/?q=ios](http://search.yahoo.com/?q=ios)
3.  必应搜索 = [http://www.bing.com/search?q=ios](http://www.bing.com/search?q=ios)
4.  询问搜索 = [http://www.ask.com/web?q=ios](http://www.ask.com/web?q=ios)

# python - “模块”对象没有属性“PortScanner”

> ID：14913153
> 
> 赞同：10
> 
> 时间：2013-02-16T17:39:20.473
> 
> 标签：python, eclipse

我正在使用 Ubuntu 12.04 并安装了 python-nmap 来创建脚本。如果我使用 IDLE 并输入以下内容，它运行良好：

```
import nmap
nm = nmap.PortScanner()
nm.scan('127.0.0.1', '22-443') 
```

但是，如果我在 Eclipse 中执行此操作，我会收到以下错误：

```
Traceback (most recent call last):
  File "/home/russ/workspace/ViPyNmap/MyFiles/nmaptest.py", line 2, in <module>
    nm = nmap.PortScanner()
AttributeError: 'module' object has no attribute 'PortScanner' 
```

我已经将 egg 文件和文件夹添加到项目的 Eclipse 路径中，但没有成功。这样做后我也重新启动了 Eclipse，但没有运气。对于我对 Eclipse 和 Python 的缺乏经验，我深表歉意，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2017-07-06T10:20:27.667

您可能安装了包“nmap”，而不是“python-nmap”：

[![在此处输入图像描述](../Images/64a2891f19692b58f811f10f4bf69f99.png)](https://i.stack.imgur.com/tINb0.png)

所以，只需卸载“nmap”并安装“python-nmap”：

```
pip uninstall nmap
pip install python-nmap 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-12T11:44:19.783

# 1 分析

如果您`nmap.py`在 directory中查看源代码`/usr/local/lib/python2.7/dist-packages/nmap/`，您会发现没有类 PortScanner。

# 2 解决方案

## 2.1 方法一

您应该删除`.../nmap/`包含文件的目录，并安装新的包`nmap`或`python setup.py install`在新的包目录中。

## 2.2 方法二

您还可以使用 py 文件`nmap.py`将新包中的文件复制到您的目录 ，然后运行您的命令。`.../MyFiles/``nmaptest.py``python nmaptest.py`

***祝你好运 ！***

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-02T17:47:22.427

发生这种情况的原因是您命名为 nmap.py 的模块现在隐藏了您尝试使用的预期请求模块。

为避免这种情况，您应该将模块重命名为其他名称以避免这些情况。此外，您可能还会生成一个 nmap.pyc 文件，该文件位于您的 nmap.py 所在的本地。确保在重命名后也将其删除，因为解释器仍会引用该文件，从而重现错误。

问题解决示例：

将文件重命名为 nmapscan.py，删除 nmap.pyc 并再次运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-28T11:49:32.933

上面的答案在 python 2.7 中运行良好，但是当我们在 python3 环境中工作时，以下将有助于解决它

*pip卸载nmap pip卸载python-nmap pip3安装python-nmap*

# ruby-on-rails - 如何编写（和测试）不是控制器或模型的 Rails 类

> ID：14913160
> 
> 赞同：1
> 
> 时间：2013-02-16T17:40:24.430
> 
> 标签：ruby-on-rails, rspec

我正在编写一个专注于搜索的 Rails 应用程序。为此，我觉得我应该将`search`控制器上的实际操作与另一种方法分开来准备搜索参数，以确保我可以准确地测试。但是，我不确定在哪里放置这种方法。[其他](https://stackoverflow.com/questions/14664618/rspec-testing-a-controller-search-method)人告诉我将它放入一个新类中，但我不确定您在 Rails 项目中将额外的类文件放在哪里。是否存在人们通常存储额外类的习惯目录位置？如果不是，这种方法将如何在调用它的同一控制器中作为私有方法工作/测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:28:16.160

您通常会将额外的类放在 lib 文件夹中。至于测试，真的没什么特别的。如果您使用的是 RSpec，只需执行以下操作：

```
describe ExtraClass do    
  it 'saves the day'    
end 
```

# django - Django + Apache - wsgi 麻烦

> ID：14913161
> 
> 赞同：-1
> 
> 时间：2013-02-16T17:40:51.963
> 
> 标签：django, apache, configuration, wsgi

我一直在本地使用 Django，现在我正在尝试将一些代码推送到我正在运行的 Ubuntu 服务器上的生产 Apache 环境（[http://www.youtube.com/watch?v=hBMVVruB9Vs](http://www.youtube.com/watch?v=hBMVVruB9Vs)）。

但是，我只得到目录中的文件列表，没有别的。首先，我通过在终端运行命令 Python 来确保安装了 Python。

我已经使用以下命令安装了 apaache 和 mod wsgi：

sudo apt-get install apache2 sudo apt-get install libapache2-mod-wsgi

而且我已经测试过它已启用。

这是我位于根目录下的 wsgi 文件 firstweb.wsgi：

```
import os
import sys
sys.path.append('/var/www/firstweb')
os.environ['DJANGO_SETTINGS_MODULE'] = 'firstweb.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

这是我的 firstweb.conf 文件：

```
<VirtualHost *:80>

WSGIScriptAlias / /firstweb.wsgi

Alias /static /var/www/firstweb/static 

<Directory /var/www/firstweb/>
Order allow,deny
Allow from all 
</Directory>

</VirtualHost> 
```

我的 Django 项目位于：/var/www/firstweb/

老实说，我无法弄清楚这里出了什么问题，在视频中它运行良好！:(

编辑，这里是错误日志：

```
[Sat Feb 16 16:19:31 2013] [notice] Apache/2.2.22 (Ubuntu) configured -- resuming normal operations
[Sat Feb 16 16:20:46 2013] [notice] caught SIGTERM, shutting down
[Sat Feb 16 16:20:47 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Sat Feb 16 16:20:47 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Sat Feb 16 16:20:47 2013] [notice] Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations
[Sat Feb 16 16:37:05 2013] [notice] caught SIGTERM, shutting down
[Sat Feb 16 16:37:06 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Sat Feb 16 16:37:06 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Sat Feb 16 16:37:06 2013] [notice] Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations
[Sat Feb 16 16:37:17 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:37:20 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:37:24 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:37:24 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:37:24 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:37:25 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:37:25 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:37:26 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:38:01 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:39:19 2013] [notice] caught SIGTERM, shutting down
[Sat Feb 16 16:39:20 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Sat Feb 16 16:39:20 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Sat Feb 16 16:39:20 2013] [notice] Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations
[Sat Feb 16 16:39:24 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:39:42 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:48:00 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:48:02 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:49:51 2013] [notice] caught SIGTERM, shutting down
[Sat Feb 16 16:49:52 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Sat Feb 16 16:49:52 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Sat Feb 16 16:49:52 2013] [notice] Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations
[Sat Feb 16 16:49:55 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:49:56 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:49:58 2013] [error] [client 131.231.153.48] File does not exist: /var/www/favicon.ico
[Sat Feb 16 16:53:21 2013] [notice] caught SIGTERM, shutting down
[Sat Feb 16 16:53:22 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Sat Feb 16 16:53:22 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Sat Feb 16 16:53:22 2013] [notice] Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations
[Sat Feb 16 16:55:34 2013] [notice] caught SIGTERM, shutting down
[Sat Feb 16 16:55:35 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Sat Feb 16 16:55:35 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Sat Feb 16 16:55:35 2013] [notice] Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations
[Sat Feb 16 17:00:07 2013] [notice] caught SIGTERM, shutting down
[Sat Feb 16 17:00:08 2013] [warn] mod_wsgi: Compiled for Python/2.7.2+.
[Sat Feb 16 17:00:08 2013] [warn] mod_wsgi: Runtime using Python/2.7.3.
[Sat Feb 16 17:00:08 2013] [notice] Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured -- resuming normal operations 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:27:03.057

尝试像这样配置您的虚拟主机：

```
 <Directory /var/www/firstweb/static>
   Order allow,deny
    Option Indexes
    Allow from all 
  </Directory>

   WSGIScriptAlias / /full-system-path-to/firstweb/wsgi.py 
```

如果这不起作用 - 只需更改目录标记并像我上面那样在末尾添加静态 - 我认为通过不添加静态，它会显示目录中的文件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-28T10:24:21.693

配置您的虚拟主机，如：

```
<VirtualHost *:80>
ServerName mysite.com
ServerAlias www.mysite.com
DocumentRoot /var/production/myApp

<Directory />
    Order Deny,Allow
    Deny from all
    Options None
    AllowOverride None
</Directory>
<Directory /var/production/myApp>
    Options None
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

WSGIDaemonProcess mysite.com python-path=/var/production/myApp:/var/production/myApp/venv/lib/python2.7/site-packages
WSGIProcessGroup misite.com
WSGIScriptAlias / /var/production/myApp/myApp/wsgi.py

Alias /static   /var/production/myApp/static

<Directory /var/production/myApp/static>
    Options None
    AllowOverride None
    Order Allow,Deny
    Allow from all
</Directory> 
```

将“/var/production/myApp”替换为您的应用程序路径

如果您需要更多帮助，请查看本[教程](http://www.qlubox.com/blog/?p=17)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-23T21:53:16.307

问题1：你启用了wsgi mod吗？

```
sudo a2enmod mod-wsgi 
```

问题 2：您的 AddHandler 语句在哪里？

```
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews ExecCGI
    AddHandler cgi-script .cgi
    AddHandler wsgi-script .wsgi
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

我不认为 apache 知道如何将`.wsgi`文件关联到 wsgi 应用程序。

# couchdb - CouchDB 在 OS X 上失败

> ID：14913165
> 
> 赞同：0
> 
> 时间：2013-02-16T17:41:16.057
> 
> 标签：couchdb, macports, homebrew

我最近使用 Homebrew 安装了 CouchDB，并且在运行“couchdb”命令时遇到了以下错误。我在 OS X 10.7.5 上：

```
Apache CouchDB 1.2.1 (LogLevel=info) is starting.
{"init terminating in do_boot",{{badmatch,{error,{bad_return,{{couch_app,start,[normal,["/usr/local/etc/couchdb/default.ini","/usr/local/etc/couchdb/local.ini"]]},{'EXIT',{{badmatch,{error,shutdown}},[{couch_server_sup,start_server,1,[{file,"couch_server_sup.erl"},{line,98}]},{application_master,start_it_old,4,[{file,"application_master.erl"},{line,274}]}]}}}}}},[{couch,start,0,[{file,"couch.erl"},{line,18}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot () 
```

我以前的 couchdb 运行得很好，但最近重新安装以尝试升级。我完全不确定如何诊断这个问题。

我试过设置我的文件权限，但它们似乎很好，对这个问题没有任何影响。

我也试过从自制软件中卸载并使用`sudo port install couchdb`. 似乎没有任何效果。

我在 Macbook Pro 和 iMac 上遇到了这个问题。同样的错误，同样的安装方法。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:25:03.493

这个链接有你需要的一切。 [http://wiki.apache.org/couchdb/Installing_on_OSX](http://wiki.apache.org/couchdb/Installing_on_OSX)

这条线对你来说似乎特别感兴趣：

```
brew remove --force openssl erlang couchdb icu4c spidermonkey nspr 
```

然后

```
brew update
brew outdated
brew install erlang
brew install couchdb 
```

如果所有其他方法都失败，请向下滚动以从源安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:56:25.980

抱歉，关于 Homebrew 问题我不能说，但你可以试试[Jan Lehnardt](https://stackoverflow.com/users/21269/jan-lehnardt)制作的[二进制包](http://people.apache.org/~jan/dist/packages/mac/1.2.1/)。目前，它应该可以成功处理 1.2.0 的更新 - 请关注邮件列表[讨论](http://thread.gmane.org/gmane.comp.db.couchdb.devel/23787/focus=24341)以获取更多信息。

请注意，这个包现在有点实验性，但欢迎任何反馈！

# javascript - 如何跟踪用户步骤

> ID：14913169
> 
> 赞同：1
> 
> 时间：2013-02-16T17:41:39.947
> 
> 标签：javascript, user-input

我们有一个**难以跟踪**的间歇性错误，该错误在兑换代码时随机存在（所以我们认为），整个代码值在下订单时消失......

手动执行我们自己的相同过程，它永远不会发生！

所以我想记录用户的动作，每一个动作：

*   点击链接
*   提交输入
*   页面浏览量

最终组成了这组规则，并附加到母版页的末尾：

```
$(function() {

    // log this page view
    log2Loggly('Page View', '');

    // for each click
    $("a").click(function() { 
        var ref = $(this).attr("onclick").length > 0 ? $(this).attr("onclick") : $(this).attr("href");
        log2Loggly('Link clicked', ref);
    });

    // forms
    $("form").submit(function() { 
        var dt = $(this).serialize();
        log2Loggly('Form submited', dt);
    });
}); 
```

并且使用[Loggly](http://loggly.com/)我可以发送每个操作，因为他们掌握了日期和 IP，因此在我们的系统上匹配用户 IP 更容易。

我一直看到像[CrazyEgg](http://www.crazyegg.com/)这样的服务记录所有用户操作，但我们无法匹配用户，它是匿名数据！

我真正喜欢的是搜索 IP 并将整个用户树作为用户所做操作的组织图……也许我可以用我拥有的数据来实现这一点，但我想在冒险之前就这个想法问两件事

1.  您以前可能遇到过这种服务吗？
2.  我还应该跟踪什么以使其“几乎完美”？

# performance - 谷歌地图预加载更近缩放/快速缩放

> ID：14913173
> 
> 赞同：1
> 
> 时间：2013-02-16T17:42:06.667
> 
> 标签：performance, maps, zooming, preload

我使用带有一些标记的谷歌地图。单击标记会放大到它。但我看起来很糟糕，因为谷歌地图首先放大并加载更近的地图。如果有办法让它看起来像我 iPhone 上的谷歌地图，那就太棒了！

（我希望你能得到问题，如果没有，请问）

所以我的问题是：有没有办法/破解来预加载更近的地图？

# java - jsp无法显示希伯来字符

> ID：14913175
> 
> 赞同：0
> 
> 时间：2013-02-16T17:42:10.410
> 
> 标签：java, eclipse, jsp, tomcat

我在 jsp 上显示 UTF-8 字符时遇到问题。

我在eclipse中使用eclipse、jsp文件、java类和tomcat 7 buit。我有 3 个文件：

```
 - index.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
    </head>
    <body>
        <form action="getProperties.jsp" method="post" name="GettingMovieParameters">
        Choose your name : <input type="text" name="hebrewMovieName"> 
        <input type="submit" value="send">
        </form>
    </body>
    </html> 
```

*   获取属性.jsp

```
<jsp:useBean id="propertiesBean" class="my.movieDownloader.org.UserData" scope="session"/>
<jsp:setProperty name="propertiesBean" property="*"/> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
    Movie hebrew name is : <%= propertiesBean.getHebrewMovieName() %>
</body>
</html>

  UserData.java

    public class UserData {
    private String hebrewMovieName;

    public String getHebrewMovieName() {
        return hebrewMovieName;
    }
    public void setHebrewMovieName(String hebrewMovieName) {
        System.out.println("Setting up: "  +hebrewMovieName);
        this.hebrewMovieName = hebrewMovieName;
    }
} 
```

我尝试在 Eclipse 编辑器、jsp 文件、html 文件等中设置 UTF-8 编码，但没有任何效果。我不知道我错过了什么，但如果有人可以帮助我，我会很高兴.. 谢谢，或者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:39:51.060

### 服务器端

过滤器可能是解决方案，我使用了 Spring 的 CharacterEncodingFilter：

```
 <filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
      <param-name>forceEncoding</param-name>
      <param-value>true</param-value>
    </init-param>
  </filter>
  ...
  <filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping> 
```

### 客户端

如果您在显示或发送字符时遇到问题，请尝试使用 jsp page 指令设置页面编码：

```
<jsp:directive.page contentType="text/html;charset=UTF-8"/> 
```

（应该同时替换 <%@page> 和 <meta> 标签）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T20:10:48.680

您似乎需要配置 webapp 以正确设置传入帖子数据的字符编码。不幸的是，这里的默认值是 ISO-8859-1，而 tomcat 坚持规范中的默认设置。您需要手动将其设置为 UTF-8。这在这里解释：

[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q3](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q3)

简短版本：将其添加到`web.xml`应该有帮助：

```
<filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# python - 为什么这个简单的代码对 Python 不起作用？

> ID：14913176
> 
> 赞同：1
> 
> 时间：2013-02-16T17:42:10.150
> 
> 标签：python, python-2.7

```
x = raw_input("Write a number")
if x.isalpha():
    print "Invalid!"
elif x%2==0:
    print "The number you have written is EVEN"
elif x%2!=0:
    print "The number you have written is ODD"
else:
    print "Invalid!" 
```

它应该检查数字是奇数还是偶数并打印出来。我的 if 语句检查 raw_input 是否是字母表，因为那是行不通的。我的 elif 语句检查奇数或偶数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T17:44:07.450

的返回值`raw_input`始终是一个字符串。如果要在其上使用`%`运算符，则需要将其转换为整数：

```
x = raw_input("Write a number")
if x.isalpha():
    print "Invalid!"
x = int(x) 
```

`x.isalpha()`你可以使用[异常处理](http://docs.python.org/2/tutorial/errors.html)来代替：

```
try:
    x = int(raw_input("Write a number"))
except ValueError:
    print 'Invalid!'
else:
    if x % 2 == 0:
        print "The number you have written is EVEN"
    else:
        print "The number you have written is ODD" 
```

因为如果输入不是有效的整数，`int()`将引发。`ValueError`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:53:37.173

的返回值`raw_input`是一个字符串，但是你需要一个数字来做奇偶校验。您可以检查它是否为 alpha 字符串，如果不是，则将其转换为 int。例如：

```
xs = raw_input("Write a number")
if xs.isalpha():
    print "Invalid!"
else:
    xn = int(xs)
    if xn % 2 == 0:
        print "The number you have written is EVEN"
    elif xn % 2 != 0:
        print "The number you have written is ODD"
    else:
        print "The universe is about to end." 
```

# ios6 - dateFormatter 返回一月作为 json 数组中的数据为二月的月份

> ID：14913179
> 
> 赞同：-1
> 
> 时间：2013-02-16T17:42:21.043
> 
> 标签：ios6, xcode4.5, nsdateformatter

我正在尝试将存储在我的 json 数组中的日期转换为 yyyy-mm-dd （即 2013-02-14）到日期、日期月份年份（即 2013 年 2 月 14 日星期四），并且由于某种原因它将月份转换为 1 月，谁能告诉我为什么？谢谢你。

```
NSString *endDate = [info objectForKey:@"EndDate"];
[dateFormatter setDateFormat:@"yyyy-mm-dd"];
NSDate *edate = [dateFormatter dateFromString:endDate];
[dateFormatter setDateFormat:@"EEE d MMM yyyy"];
NSString *convertedEndDate = [dateFormatter stringFromDate:edate]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:49:36.100

月份的格式是“MM”，而不是“mm”（表示分钟）：

```
NSString *endDate = @"2013-02-14";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSDate *edate = [dateFormatter dateFromString:endDate];
[dateFormatter setDateFormat:@"EEE d MMM yyyy"];
NSString *convertedEndDate = [dateFormatter stringFromDate:edate];
NSLog(@"%@", convertedEndDate); 
```

*输出：*

```
Thu 14 Feb 2013 
```

# forms - 如何在 Symfony 2 中设置一个或多个不同的 form_row 模板？

> ID：14913183
> 
> 赞同：0
> 
> 时间：2013-02-16T17:43:18.867
> 
> 标签：forms, symfony, twig, symfony-2.1

我在 Symfony2 中有一个项目，其中有很多不同的表单，它们可以做很多不同的事情，而我目前正在努力解决的一件事是研究如何设置两个不同的模板来处理 form_rows。

我在一个处理表单行的 fiels.html.twig 文件中指定了一个 form_row 模板，如下所示：

```
{% block form_row %}
    {% spaceless %}
        <div class="form-element{% if errors %} form-element-error{% endif %} widget-group clearfix">
            <div class="widget widget-1-of-3">
                {{ form_label(form) }}
            </div>
            <div class="widget widget-2-of-3">
                {{ form_widget(form) }}
                {% if errors %}
                    <small>{{ form_errors(form) }}</small>
                {% else %}
                    {% if help is defined %}
                        <small>{{ help }}</small>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    {% endspaceless %}
{% endblock form_row %} 
```

这对我来说非常适合一般表单，但我也有许多表格元素。这通常用于我正在更新的表单数据组。

在这种情况下，我希望能够使用不同的 form_rows 模板来指定。

我知道我可以通过字段名称或组来指定行，但是我有很多，我只是想要一种更通用的方式来执行此操作。

有谁知道如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:20:44.033

您可以在不同的模板中定义许多表单主题。只需在要使用主题的顶部添加树枝文件：

```
{% form_theme form 'AcmeDemoBundle:Form:fields.html.twig' %}

{{ form_widget(form) }} 
```

其中 form_theme 文件可以是任何带有主题定义的树枝文件。现在表单小部件装饰有附加主题。

# api - 在 REST 架构中处理唯一 ID 的正确方法是什么？

> ID：14913184
> 
> 赞同：0
> 
> 时间：2013-02-16T17:43:20.757
> 
> 标签：api, rest, mobile

我的申请分为两部分：

*   允许`android app`用户对内容创建评论。每个评论都有一个唯一的 id（一个字符串）
*   具有收集数据的 REST api（基于 json）的服务器。服务器生成唯一标识。

通过`android app`将评论数据 POST 到`server`减去唯一 id（它`server`在评论创建时由 生成）来创建新评论。唯一的 id 将在后续请求中使用（例如`<myserver>/api/v1/comment/<id>`：）

**问题是** 在 POST 之后，`server`需要一种方法来告诉`android app`新创建的评论的 id 是什么。

获取新 id 的 REST 方法是什么？

注意：我想避免创建一个额外的调用来获取新的标识符，然后发表我的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:42:58.923

[https://www.rfc-editor.org/rfc/rfc2616#section-10.2.2](https://www.rfc-editor.org/rfc/rfc2616#section-10.2.2)

您使用包含创建资源的 URI的`201 Created`状态和标头进行响应。`Location`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:44:42.197

只需用 id 回复 POST

# android - 开始时触发的广播接收器

> ID：14913190
> 
> 赞同：0
> 
> 时间：2013-02-16T17:44:19.807
> 
> 标签：android, broadcastreceiver, alarmmanager

我把闹钟定在午夜。但是设置警报会触发我的广播接收器？我在应用程序启动时设置了闹钟。编码：

```
 //set the alarm
    protected void onCreate(Bundle savedInstanceState) {
            as=new AlarmSetter();
            as.SetAlarma(this); .........

    //the AlarmSetter
    public class AlarmSetter  {

        public void SetAlarma(Context context){

        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.HOUR, 0);
        calendar.set(Calendar.AM_PM, Calendar.AM); 

         Intent intent = new Intent(context, AlarmKicked.class);
         PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 1333333, intent, PendingIntent.FLAG_UPDATE_CURRENT);
         AlarmManager am =(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),AlarmManager.INTERVAL_DAY,
                 pendingIntent);
        }

    }

    //and my Broadcast reciever 
    public class AlarmKicked extends BroadcastReceiver{

        @Override
        public void onReceive(Context context, Intent intent) {

            NotificationsA.Notizer(context);

            System.out.println("IT IS MIDNIGHT! SETTING TIMER..");

        }

    }

//Manifest
<receiver android:name=".AlarmKicked" android:process=":remote"/> 
```

当我启动应用程序时，我设置了 Allarm.. 但同时我进入了 Logcat：它是午夜！设置计时器.. 是什么在开始时触发了我的广播接收器？

编辑：

作品！：

```
public void SetAlarma(Context context){

    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.HOUR, 0);
    calendar.add(Calendar.DAY_OF_MONTH, 1);
    calendar.set(Calendar.AM_PM, Calendar.AM); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:49:37.867

您设置为午夜，但是您的日历时间现在是当天的午夜，这已经过去了。

这会导致警报在注册后立即响起。

引用[文档](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)：

> 如果时间发生在过去，将立即触发警报，警报计数取决于触发时间相对于重复间隔过去多长时间。

相反，在您的日历中添加一天，这应该可以阻止它发生。

```
Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.HOUR, 0);
        calendar.set(Calendar.AM_PM, Calendar.AM); 
        calendar.add(Calendar.DATE, 1); 
```

# javascript - 骨干网没有与 REST 请求一起发送属性

> ID：14913193
> 
> 赞同：1
> 
> 时间：2013-02-16T17:44:36.630
> 
> 标签：javascript, rest, backbone.js

我目前正在开发一个主干应用程序，您必须在其中指定来宾名称才能进入。

```
 Guest = Backbone.Model.extend({

    urlRoot : ftd.settings.rest + '/guest',

    defaults: {
      name : '',
    },

    validate: function( attr ) {
      var errors = [];
      if(attr.name.length < 4) {
        errors.push({message : "You nickname, must be atleast 4 chars", name : 'guestNickname'});
      }

      if(errors.length > 0) {
        return errors;
      }
    }
  });

  return Guest; 
```

所以在我的首页上，用户设置了一个用户名并实例化了一个新的来宾，这是我处理来宾创建的首页视图。

```
createGuest: function( ev ) {
  ev.preventDefault();
  // Get nickname.
  var guest = new Guest();
  guest.bind( 'error', function( model, errors ) {
        _.each( errors, function( err ) {
      $('input[name=' + err.name + ']').addClass('invalid');
      // add a meesage somewhere, using err.message
          }, this );
  });
  guest.save({'name' : $('input[name="guestNickname"]').val()}, {
    success:function(model, response) {
      console.log('Successfully saved!');
    },
    error: function(model, error) {
      console.log(model);
      console.log(error.error());
    }
  });
}, 
```

我的问题是，当主干发出请求时，它发送了一个没有指定名称的 OPTIONS 请求，我什至在 Wireshark 中检查了数据包，我做错了什么？

额外问题：为什么骨干网发送 OPTIONS 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:55:36.550

显然，Backbone（或者实际上是您的浏览器）在主干保存期间发送了一个 OPTIONS 请求，因为它试图模拟“真正的”REST，包括 PUT 和 DELETE 请求，并且并非所有服务器都支持这些命令。

根据这个：

[http://backbonejs.org/#Sync-emulateHTTP](http://backbonejs.org/#Sync-emulateHTTP)

如果你设置

```
Backbone.emulateHTTP = true; 
```

然后它会尝试发布。

# vhdl - VHDL LFSR 通过 FPGA 板 SMA 连接器输出

> ID：14913196
> 
> 赞同：2
> 
> 时间：2013-02-16T17:44:48.010
> 
> 标签：vhdl, fpga, xilinx

我最近开始为学校做一个 FPGA 项目，我以前从未使用过 VHDL，所以我尽力将我的程序拼凑在一起。总的来说，我的目标是让 prbs 或 LFSR 随机生成。我的 vhdl 代码在 xilinx ISE 软件中检出并在测试台中正常运行，但我需要将项目闪存到板上并将示波器连接到板上的一个 SMA 连接器，我的问题是如何将我的输出转发到Spartan 6 板上的单个 SMA 连接器

```
library IEEE;
use IEEE.std_logic_1164.all;

entity LFSR is
port (
  clock    : std_logic;
  reset    : std_logic;
  data_out : out std_logic_vector(9 downto 0)
 );
 end LFSR;

 architecture Behavioral of LFSR is

 signal lfsr_reg : std_logic_vector(9 downto 0);

begin

 process (clock)
variable lfsr_tap : std_logic;
begin
if clock'EVENT and clock='1' then
  if reset = '1' then
    lfsr_reg <= (others => '1');
  else
    lfsr_tap := lfsr_reg(6) xor lfsr_reg(9);
    lfsr_reg <= lfsr_reg(8 downto 0) & lfsr_tap;
  end if;
end if;
 end process;

  data_out <= lfsr_reg;

end Behavioral; 
```

现在我只想将输出/输出转发到 SMA 连接器，这样我就可以在示波器上得到结果，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T17:56:13.743

您只需要将 I/O 映射到 FPGA 芯片上的实际引脚。这是在一个约束文件（通常是 a `.ucf`）中完成的，您可以手动编辑（它只是文本），或者让工具为您处理。

在较新的 ISE 工具中，PlanAhead 对此负责 - 您可以从 ISE Processes 窗格中打开它（选择用户约束 -> I/O 引脚规划（PlanAhead） - 综合后）。

这将打开 PlanAhead 并为您提供设计中的 I/O 列表（您的`clock`和`reset`）`data_out`。现在您只需要将它们映射到正确的 FPGA 引脚。查看您的电路板文档以找到时钟输入、按钮（用于复位）和 SMA 连接器的位置。

PlanAhead 应该`.ucf`为您创建文件，并将其添加到您的项目中。之后，您可以在 ISE 编辑器中对其进行编辑 - 一旦您在其中包含一些初始内容，它就会非常不言自明。

此外，请查看[此 Xilinx 指南](http://www.xilinx.com/support/documentation/sw_manuals/xilinx14_4/ise_tutorial_ug695.pdf)（从第 100 页起）以获取分步指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:59:34.670

您的 SMA 连接器只能容纳单个输出，不能容纳总线。要查看 LFSR 的 MSB，只需将以下行添加到 .ucf 文件中：

```
NET clock        LOC = $PIN; 
NET reset        LOC = $PIN; 
NET dataout<9>   LOC = $PIN; # your SMA output
NET dataout<8>   LOC = $PIN;
NET dataout<7>   LOC = $PIN;
NET dataout<6>   LOC = $PIN;
NET dataout<5>   LOC = $PIN;
NET dataout<4>   LOC = $PIN;
NET dataout<3>   LOC = $PIN;
NET dataout<2>   LOC = $PIN;
NET dataout<1>   LOC = $PIN;
NET dataout<0>   LOC = $PIN; 
```

在您的电路板文档（或原理图）中查看正确的引脚，并在您的 .ucf 文件中添加正确的引脚名称。我建议为 dataout 的剩余输出使用一些 LED。

# php - 添加 CSS 类以动态链接

> ID：14913200
> 
> 赞同：1
> 
> 时间：2013-02-16T17:45:11.613
> 
> 标签：php

任何人都可以告诉我单击它时如何向此链接添加一个 CSS 类？

这是我的链接：

```
echo '<li><a href="?tutor=link&subject='.urlencode($subject).'">Tutor</a></li>
      <li><a href="?institute=link&subject='.urlencode($subject).'">Institute</a></li>'; 
```

我的问题是如何确定用户点击了哪个链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:47:38.697

您可以使用 javascript 或 jquery 来实现这一点

```
$(this).css('newclassname') 
```

这就是jquery的例子

**更新** 后，您可以将其绑定到函数以获取单击元素的保留
`$('a').click(function() { $(this).css('current');
alert($(this).html()); // this will pop up tutor if its clicked });`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:48:46.323

使用纯 JavaScript 解决方案，您可以：

```
<a id="tutor" href="?tutor=link&subject='.urlencode($subject).'" onclick="changeClass(this)">Tutor</a>

function changeClass(link) {
    if (link.id == "tutor") {
       link.className = "current";
    } 
} 
```

**编辑：**

`link`您可以识别传递给`changeClass`函数的变量单击了哪个链接。链接变量将包含一个`id`属性，它将告诉您标签的`a`标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T17:56:32.053

如果它是正在查看的当前链接，我假设您想向链接添加一个类。

由于每个链接都有不同的 GET 参数，您可以使用它来识别它。

```
echo '<li><a '. (isset($_GET['tutor']) ? 'class="current"' : '') .' href="?tutor=link&subject='.urlencode($subject).'">Tutor</a></li>
      <li><a '. (isset($_GET['institute']) ? 'class="current"' : '') .' href="?institute=link&subject='.urlencode($subject).'">Institute</a></li>'; 
```

# facebook - 每次用户登录时如何在 Facebook 用户的个人资料上发帖？

> ID：14913201
> 
> 赞同：0
> 
> 时间：2013-02-16T17:45:18.163
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我是 facebook 应用程序的新手。发展。作为我学期项目的一部分，我必须设计一个应用程序。

**每次用户登录他的帐户时**，我都想调用方法“提要对话”或想在用户的墙上发帖……这意味着我想触发我的应用程序。每次用户登录时自动自动登录............或者我的应用程序。**每次用户发布一些东西时都会自动**触发??.....我应该制作我的应用程序吗？在后台运行......或者我应该怎么做......？？

给我一些参考或任何东西...

谢谢

# javascript - 使用 JavaScript 检查浏览器是否支持 css3 和/或 HTML5 属性

> ID：14913202
> 
> 赞同：1
> 
> 时间：2013-02-16T17:45:20.010
> 
> 标签：javascript, jquery, html, css

我想检查用户浏览器**是否支持“contenteditable”或任何 HTML5 属性？**

所以这是我的 JavaScript：

```
var isEditable=false;
function chk() {
    var z=document.getElementById("mydivid");

    if(typeof(z["isContentEditable"])==="boolean") {
        isEditable=true;
    }
}

function doEdit() {
    chk();
    var z=document.getElementById("mydivid");
    if(isEditable) {
        z.setAttribute("contenteditable","true");
        z.focus();
    } else {
        /* add a texbox and put all div's innerHTML into it, All in all:  a Boring Stuff. */
    }
} 
```

这是HTML：

```
<a href="#" onclick="doEdit();">Click To Edit </a>
<div id="mydivid"> Hi Ssup ?? <img src='' alt="some image" /></div> 
```

谁能告诉我我的方法是否正确？它可以在 IE(version<8.0) 中工作吗？而且还需要更好的方法！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T17:48:02.350

简单检查：

```
if ('isContentEditable' in document.createElement('span')) {
    // supported
} 
```

我还将分享这些精选的片段，将来会对您有所帮助：http: [//diveintohtml5.info/everything.html](http://diveintohtml5.info/everything.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T18:00:30.543

检查元素是否存在任何属性。你可以这样做

```
var element = document.createElement('__ELEMENT__');
if ('__PROPERTY__' in element ) {
    // property supported in the browser
} 
```

**或者**

```
if ('__PROPERTY__' in document.createElement('__ELEMENT__') ) {
    // property supported in the browser
} 
```

以下链接包含所有内容。

1.  [https://github.com/Modernizr/Modernizr/issues/570](https://github.com/Modernizr/Modernizr/issues/570)
2.  [http://diveintohtml5.info/everything.html#contenteditable](http://diveintohtml5.info/everything.html#contenteditable)

# php - 将 php 应用程序从 linux 系统移动到使用 wamp 运行 Windows 7 的 php 定义语句失败

> ID：14913203
> 
> 赞同：0
> 
> 时间：2013-02-16T17:45:29.447
> 
> 标签：php, linux, wamp

我正在建立一个开发环境以在 php 站点上工作。我已将所有源代码复制到运行 wamp 的 Windows 7 机器上。

我正在尝试更新所有路径以反映我的开发箱上的正确位置。但是我对我的一些定义语句有疑问。例如，我有以下代码：

```
define ('DOCUMENT_ROOT', 'c:\wamp\www\myapplicationname\members\');
define ('DB_LOG', 'c:\wamp\www\myapplicationname\members\log\db');
define ('ERROR_LOG', 'c:\wamp\www\myapplicationname\members\log\errors'); 
```

当我尝试运行站点站点时，我收到以下错误消息：

> 解析错误：语法错误，第 39 行 C:\wamp\www\myapplicationname\members\includes\init.php 中的意外 T_STRING

第 39 行是我上面列出的第二个定义语句。我可以说存在问题，因为第二行的语法突出显示不起作用。它不识别“定义”语句。
如果我将第一行更改为：

```
 define ('DOCUMENT_ROOT', 'c:\wamp\www\myapplicationname\members\\'); 
```

然后突出显示再次起作用，但是当然，路径是错误的。

你能告诉我我错过了什么吗？

**编辑 1**

我试图将其更改为：

'define ('DOCUMENT_ROOT', 'c:\wamp\www\myapplicationname\members\'');

但是稍后在代码中，当我们像这样附加到 DOCUMENT_ROOT 时，

```
require_once DOCUMENT_ROOT.'\inc\exception.class.php'; 
```

我收到以下错误：

警告：require_once(c:\wamp\www\myapplicationname\members'\inc\exception.class.php) [function.require-once]：无法打开流：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:06:59.110

SO代码突出显示清楚地显示了问题：`\`是一个转义字符，它正在转义以下字符。`'`不被解释为字符串结尾，而是作为`'`该字符串中的一个字符。然后你的字符串跨越到下一行，这是不允许的，PHP 会抛出一个错误。

如果要`\`在字符串中使用，则需要键入`\\`- 第一个将转义第二个：

```
define ('DOCUMENT_ROOT', 'c:\\wamp\\www\\myapplicationname\\members\\');
define ('DB_LOG', 'c:\\wamp\\www\\myapplicationname\\members\\log\\db');
define ('ERROR_LOG', 'c:\\wamp\\www\\myapplicationname\\members\\log\\errors'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:04:13.540

您想转义所有反斜杠，因为它们是 PHP 中的特殊字符：

```
define ('DOCUMENT_ROOT', 'c:\\wamp\\www\\myapplicationname\\members\\');
define ('DB_LOG', 'c:\\wamp\\www\\myapplicationname\\members\\log\\db');
define ('ERROR_LOG', 'c:\\wamp\www\\myapplicationname\\members\\log\\errors'); 
```

# c - 使用 SQLite3 和 C 的分段错误

> ID：14913214
> 
> 赞同：0
> 
> 时间：2013-02-16T17:46:27.847
> 
> 标签：c, sqlite, segmentation-fault

我正在尝试使 C 程序正常工作，但我很生气。这是我为查找错误而简化的代码：

```
#include <stdio.h>
#include <unistd.h>
#include <sqlite3.h>

int main(){
    sqlite3 *conn;
    sqlite3_stmt *res;
    const char *tail, *sqlresult;
    sqlite3_open("cubecat", &conn);
    char buffer,query;
    int id;

    id= 1;
    buffer = 'a';
    if(buffer == 'a') snprintf(&query,100,"SELECT start FROM payloads WHERE id=%d", id);

    printf("%s",&query);
    int error = sqlite3_prepare_v2(conn, &query, 100, &res, &tail);
    printf("%d",error);
} 
```

错误正是在“sqlite_prepare_v2”函数上，因为如果我评论那行，就没有分段错误。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:49:03.940

```
char query;
snprintf(&query,100,"SELECT start FROM payloads WHERE id=%d", id); 
```

这就是问题所在。`query`只为一个字符保留内存。的第二个参数`snprintf()`指定大小是有原因的。这段代码应该这样修改：

```
char query[100];
snprintf(query, sizeof(query), "SELECT start FROM payloads WHERE id=%d", id); 
```

# php - 将文本框中的单词分成数组

> ID：14913215
> 
> 赞同：1
> 
> 时间：2013-02-16T17:46:42.107
> 
> 标签：php

在 PHP 中，如何获取一个字符串并将单词分成一个数组？有没有办法通过字符串中的空格来分割它们？另外，如何检查数组中的单词是否以字符开头？这个想法是有一个带有普通单词和标签的文本框。当您提交表单时，PHP 脚本可能会下划线或更改主题标签的颜色。它基本上会在任何以哈希开头的单词下划线。对不起，如果这没有任何意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:48:20.520

要将字符串转换为数组，请使用 PHP 的[`explode`](http://php.net/manual/en/function.explode.php)函数：

```
$array = explode(' ', $string); 
```

要检查每个单词是否以某个字符开头，可以[`strpos`](http://php.net/manual/en/function.strpos.php)在循环中使用：

```
// Pick a letter
$char = 'a';
foreach ($array as $word) {
   if (strpos($word, $char) === 0) { 
      // Echo out what you want
      echo "$word contains $char\r\n"; 
      // Halt loop if necessary:
      break;
   }
} 
```

# java - 未初始化的字段会消耗内存吗？

> ID：14913218
> 
> 赞同：2
> 
> 时间：2013-02-16T17:47:05.437
> 
> 标签：java, memory, memory-management

我知道只要对象存在，字段就会粘在对象上，因此它们分配了一些内存，但是如果我不初始化某些字段并且不使用它们怎么办？例如：

```
public class TEST {
   public static void main(String[] args) {
      Foo C = new Foo(5, 7);
      Foo D = new Foo(5);
      ...
}

public class Foo{
   private int A;
   private float B;

   public Foo (int A, float B){
      this.A = A;
      this.B = B;
    }
    public Foo (int A){
        this.A = A;
    }
    ...
} 
```

会`C`消耗更多的内存`D`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T17:55:13.307

Java 中的字段**总是**被初始化的。基元初始化为 0 或`false`，引用（和数组）初始化为`null`。

此外，一旦您声明了一个字段，该字段将始终在每个实例中占用相同的空间。引用只占用与指针一样多的空间，但被引用的对象可能会占用额外的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:49:34.643

您没有在构造函数中初始化字段这一事实并不意味着它们没有被初始化。

当您使用`new`运算符创建类的实例时，会创建对象并为新创建的实例分配内存，以及该类的所有实例字段及其所有超类，并使用它们的默认值初始化它们。

所有这些都发生**在**你的构造函数被调用之前。所以，是的，在这种情况下，两者都`C`将`D`分配相同的内存。

现在考虑这种情况，您的字段不是原始的，而是对其他实例的引用（例如，`Integer`而不是`int`）。`Integer`在这种情况下，默认值为`null`。如果您为一个引用初始化它`C`，而不是为`D`，那么该`C`引用将拥有更多内存（为引用字段创建的实例的额外内存将在那里。）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T18:11:16.147

首先，对风格的琐碎评论。代码在我看来是 Java 的。所以所有的变量都应该是小写的。然后，对于您的问题，在您的示例中，对象 C 和 D 消耗的内存量相同。

这些字段是原始类型，堆上的一个 Foo 对象将占用 4 个字节用于 int，另外 4 个字节用于 float。即使您不初始化它们，它们也会采用默认值（由编译器设置）。

再深入一点，Foo 对象在 32 位 JVM 上将消耗 16 个字节。

8 个字节用于标头（对象 id、对类对象的引用、锁等），8 个字节用于字段（int 和 float）。

有关更多详细信息，请参阅[这篇不错的文章](http://www.codeinstructions.com/2008/12/java-objects-memory-structure.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T17:49:06.993

只`new`分配内存。Sizeof(Foo) 是常量，因为它完全由原始类型组成。

如果您在 Foo 中添加一些对象类型的属性，则无论您是否分配它们，消耗的大小都会发生变化。

```
public class Foo{
   private int A;
   private float B;
   private Date  C;

   public Foo (int A, float B){
      this.A = A;
      this.B = B;
      this.C = new Date();
    }
    public Foo (int A){
        this.A = A;
    }
    ...
}

public class TEST {
   public static void main(String[] args) {
      Foo C = new Foo(5, 7);
      Foo D = new Foo(5);
      ...
   }
} 
```

在这种情况下，D 消耗的内存比 C 少。

# database - 持有票数的数据类型

> ID：14913220
> 
> 赞同：1
> 
> 时间：2013-02-16T17:47:18.030
> 
> 标签：database, vote

我可以使用数据库中的哪种数据类型来保存投票数，例如 Facebook 上的点赞按钮？我不是在寻找一个评级系统，它的值在 1 到 5 之间。我正在寻找一种数据类型，它可以让用户投票赞成或反对，或者用户只能投票赞成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:02:27.967

如果您打算将它用于数学，例如在某个时候将选票相加，请使用 int （可能无论如何都应该使用，因为在某些时候您可能想要做一些加法或其他数学运算）。否则，使用 CHAR。

# ruby-on-rails - 使用适当的 Ruby 结构（如数组和哈希）来填充数据

> ID：14913221
> 
> 赞同：0
> 
> 时间：2013-02-16T17:47:33.923
> 
> 标签：ruby-on-rails, ruby

要在 Rake 任务 curretnyl 中填充一些示例数据，我有这样的方法：

```
def create_population_summaries
  PopulationSummary.where(year: 2009).first_or_create(member_count: 12, organization_id: 1)
  PopulationSummary.where(year: 2010).first_or_create(member_count: 5, organization_id: 1)
  PopulationSummary.where(year: 2011).first_or_create(member_count: 99, organization_id: 1)
  PopulationSummary.where(year: 2008).first_or_create(member_count: 52, organization_id: 1)
  PopulationSummary.where(year: 2012).first_or_create(member_count: 30, organization_id: 1)
  PopulationSummary.where(year: 2013).first_or_create(member_count: 25, organization_id: 1)
  PopulationSummary.where(year: 2008).first_or_create(member_count: 46, organization_id: 1)
end 
```

所以这意味着有一个 PopulationSummary 表，其中包含如下列

```
member_count
year
organization_id 
```

我们已经用老板的数据填充了它们！给了我。

现在我想以某种方式重构它，它使用一些 Ruby 结构，如哈希、数组，甚至哈希数组等......**这样**在重构后我的方法不**包括**方法中的那些手动输入的数据和那些手动输入的数据应该来自那个 Ruby 结构、哈希等...仍然在我可以手动输入数据库字段名称的方法中，例如 year、member_count 等...但是我想从中读取的值红宝石数据结构..

您建议如何编写该数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:51:04.643

```
data = [{'year'=>2009, 'members'=>12}, {'year'=>2010, 'members'=>5}....] 
```

然后循环

```
data.each do |d|
  PopulationSummary.where(year: d['year']).first_or_create(member_count: d['members'], organization_id: 1)   
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:56:22.277

怎么样的东西：

```
DATA = [[ 2009, 12, 1], 
        [ 2010,  5, 1], 
       ... ]

DATA.each do |d|
  PopulationSummary.where(year: d[0]).first_or_create(member_count: d[1], organization_id: d[2])
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T01:02:27.707

只是出于好奇，您可以将元编程（业务规则，来自老板）和总体本身完全分开：

```
data = [ {
           'year'=>2009,'members'=>12,'organization_id'=>1
         }, {
           'year'=>2010,'members'=>5,'organization_id'=>1
         }, {
           …
       } ] 
```

然后填充：

```
data.each do |d| 
  d.inject (PopulationSummary) do |rec, val|
    rec.where val
  end.first_or_create
end 
```

但恐怕几个月后老板会带来新的数据部分，你会讨厌这个提示。

# jquery - 使用 jQuery 获取 CSS 的前内容

> ID：14913227
> 
> 赞同：11
> 
> 时间：2013-02-16T17:47:58.717
> 
> 标签：jquery, css

我有以下CSS

```
h1:before {
    content: "Chapter " counter(lvl1) "\000d\000a";
    counter-increment: lvl1;
    white-space: pre-wrap;
}
h1 {
    page-break-before: right;
} 
```

和这个 HTML

```
<p>...</p>
<h1>A Title</h1>
<p>...</p> 
```

使用给定的CSS，我得到类似

```
Chapter 1
A Title 
```

当我尝试使用 jQuery 获取文本时，我得到“A Title”。是否有可能获得“Chapter 1\nA Title”？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-16T17:54:28.363

使用`getComputedStyle()`：

```
$('h1').each(function(){
    console.log(window.getComputedStyle(this,':before').content);
}); 
```

`before()`是一个用于遍历 DOM 的 jQuery 方法，它获取/设置前面的元素，它不*访问*伪元素。

[工作 JS Fiddle](http://jsfiddle.net/YdMcv/2/)，由[Eric](https://stackoverflow.com/questions/14913227/get-before-content-of-css-with-jquery#comment20921247_14913306)提供。

虽然不幸的是，这种方法返回声明中使用的*文字*字符串`content`，而不是*实际*生成的内容。

# javascript - extjs 4：显示来自 Mysql blob 值的图像

> ID：14913229
> 
> 赞同：3
> 
> 时间：2013-02-16T17:48:07.673
> 
> 标签：javascript, ajax, extjs, extjs4

```
Ext.define('ImageModel', {
        extend: 'Ext.data.Model',
        fields: ['PicID', 'PicUploadedDateTime','PicData']
    });

    var ImgStore = Ext.create('Ext.data.JsonStore', {
        model: 'ImageModel',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'get-image.php',
            baseParams: {  //here you can define params you want to be sent on each request from this store
                        mainid: 'value1',
                        startdate: 'value2',
                        enddate: 'value3'
                        },
            reader: {
                type: 'json',
                root: 'images'
            }
        }
    });

    var listView = Ext.create('Ext.grid.Panel', {
        region: 'west',
        id : 'imagelist',
        title: 'Select Image',
        width: 200,
        split: true,
        collapsible: true,
        floatable: false,
        title:'Select Image',
        renderTo: Ext.getBody(),
        store: ImgStore,
        multiSelect: true,
        viewConfig: {
            emptyText: 'No images to display'
        },

        columns: [
            {
            text: 'Date Time Uploaded',
            //xtype: 'datecolumn',
            //format: 'Y-m-d H:i:s',
            flex: 65,
            width: 100,
            dataIndex: 'PicUploadedDateTime'
        }]
    });

listView.on('selectionchange', function(view, nodes){
        Ext.getCmp('displayimage') = nodes[0].get("PicData") // display the image on here
        //when listview selected the image,will display the image at here.
    }); 
```

我创建了一个列表视图，当列表视图上的选择更改时，将显示图像`Ext.getCmp('displayimage')` 。

`nodes[0].get("PicData")`是选择
的图像数据图像数据是blob值（都是JPEG十六进制值），如何从extjs显示图像？

## 更新

这是我的显示图像代码

```
button.on('click', function(){
        if (!win) {
            win = Ext.create('widget.window', {
                title: 'View Image',
                closable: true,
                closeAction: 'hide',
                width: 600,
                minWidth: 350,
                height: 550,
                layout: {
                    type: 'border',
                    padding: 5
                        },
                items:[
                        listView, 
                    {                           
                    region: 'center',
                    //xtype: 'tabpanel',
                    minheight: 350,
                    items: [{
                        //title: 'Bogus Tab',
                        xtype : 'image',
                        id : 'displayimage',
                            }]
                    },
                    {
                    region: 'north',
                    margin : "5 0 5 0",
                    //xtype: 'tabpanel',
                    minheight: 350,
                    items: [dr]
                    }]
            }); 
```

在我将代码更改为之后

```
Ext.getCmp('displayimage').src = 'data:image/jpeg;base64,'+nodes[0].get("PicData") // 

Image corrupt or truncated 
```

这是我从萤火虫得到的错误消息，但我可以确定我的二进制数据是正确的，因为我尝试使用 python 将其转换为 .jpeg 文件

这是来自数据库的 .jpeg 示例 blob 值（二进制字符串）， http:
[//pastebin.ca/raw/2314500](http://pastebin.ca/raw/2314500)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:22:01.787

Need to adding in model methods (and use converter from my answer of you another question):

```
getImage: function() {
    return this.getBase64(this.get('PicData'));
},
getBase64: function(str) {
    return btoa(String.fromCharCode.apply(null, str.replace(/\r|\n/g, "").replace(/([\da-fA-F]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ")));
} 
```

Example on **[jsfiddle](http://jsfiddle.net/mzRKE/)** with your image & my wife photo.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:04:45.853

假设你的**Ext.getCmp('displayimage')**代表一个 Ext.Img 组件，你可以设置它的“src”属性来包含图像数据，但是

*   您必须将其编码为 base64，而不是十六进制

*   您必须添加一个前缀（例如**data:image/jpeg;base64，**如果图像是 Jpeg 图像），表明您将传递实际数据而不是常规 Url

所以你应该写这样的东西：

```
listView.on('selectionchange', function(view, nodes){
    Ext.getCmp('displayimage').src = 'data:image/jpeg;base64,'+nodes[0].get("PicData") // display the image on here
    //when listview selected the image,will display the image at here.
}); 
```

# javascript - 如何将此sql查询字符串转换为solr查询

> ID：14913234
> 
> 赞同：0
> 
> 时间：2013-02-16T17:48:23.233
> 
> 标签：javascript, solr

您好，我在 java 的 Web 服务中有查询，它从 biz_subjec 字段中选择所有以特定字符串开头的记录

```
"select biz_subject from pl_biz WHERE biz_subject ILIKE '"+ myel + "%'"; 
```

所以今天我安装了 solr 并付出了很多努力——为我的数据库建立了索引！现在我应该开始查询了！但是似乎无论我读了多少我都无法理解语法所以我正在寻求帮助，如果您可以向我发送一些带有大量示例的好文章和文档，以便我可以理解它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:16:08.220

检查[Solr 查询语法](http://www.solrtutorial.com/solr-query-syntax.html)

对于类似查询，您需要触发[通配符查询](http://lucidworks.lucidimagination.com/display/lweug/Wildcard+Queries)。

因此，对于 biz_subject 字段，您需要触发`biz_subject=myvel*`

# php - 如何拆分一个php字符串

> ID：14913235
> 
> 赞同：0
> 
> 时间：2013-02-16T17:48:24.947
> 
> 标签：php, variables, echo

堆栈溢出者，

我可以`$raw_date`通过简单地使用将变量输出为 20130216 `echo $raw_date;`，但是我希望能够从同一`$raw_date`变量输出 16/02 或 16/02/2013。

这可能吗，如果可以，怎么办？

谢谢，杰米

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T17:50:06.300

```
$d = DateTime::createFromFormat('Ymd', $raw_data);
echo $d->format('d/m/Y'); 
```

# vb.net - 如何计算字符串 vb.net 中的不同字符串

> ID：14913240
> 
> 赞同：2
> 
> 时间：2013-02-16T17:48:44.253
> 
> 标签：vb.net

我正在开发一个 vb.net 实用程序，并且需要在字符串中查找所有不同的字符串。

所以基本上我会有一个看起来像这样的字符串。 `1.875{0};10;0.25|1.875;9;0.25|{2}1.875;1.875;0.25|14.125;{1}1.875;0.25|{0}14.125;16.125{1};0.25|1.875;{0}16.125;0.25|1.875;9;0.25{2}|1.875;8;0.25`

所以你可以看到我在字符串 {0}、{1}、{2} 中有这些字符

然而，可以这么说，每个“占位符”都有多个。

因此，我需要帮助编写一个函数，该函数将采用上面的字符串字符串并在此示例中返回计数 3，因为源字符串中有 3 个不同的占位符。它会模仿 sql 中的不同命令。

我确定这使用了某种正则表达式，但我无法绕开它来仅检索不同的正则表达式。不是所有的倍数。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:29:03.600

使用正则表达式和一点 LINQ 就可以达到预期的效果

```
Imports System.Text.RegularExpressions
Imports System.Linq

Private Function CountPlaceholders(source As String) As Integer
    Dim matches As MatchCollection = Regex.Matches(source, "{[0-9]+}")
    Return matches.Cast(Of Match)().Select(Function(m) m.Value).Distinct().Count()
End Function 
```

首先，使用相当简单的正则表达式查找所有占位符。`+`after数字搜索将`[0-9]`找到一个或多个出现的数字，因此将找到占位符 0 到 n。

下一行是计算不同事件的原因。为了使 LINQ-to-Objects 扩展能够运行`matches` `MatchCollection`，必须将其中的每个项目强制转换为。`Match`之后，您选择对象的`Value`属性`Match`，过滤不同的值，并对它们进行计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:02:16.880

是的，您可以使用正则表达式`{\d+}`进行匹配，但您是正确的，不会给您一个不同的列表。但是您可以遍历[Regex.Matches](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)返回的 Match 集合，提取`Value`并使用[Distinct](http://msdn.microsoft.com/en-us/library/bb348436.aspx) Linq 方法来获取不同条目的列表。

# c++ - Netbeans 7.2 显示“无法解析标识符”，尽管构建成功

> ID：14913243
> 
> 赞同：62
> 
> 时间：2013-02-16T17:48:51.473
> 
> 标签：c++, linux, netbeans, netbeans-7

我正在使用带有**C/C++ 插件（最新版本 1.18.1.1）的****Netbeans IDE 7.2** ，如果我构建我的项目一切都很好，但 IDE 显示错误（例如无法解析标识符......）

 **其他人有这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-02-16T20:11:42.137

这是我对另一个问题的回答的摘录。

**未解析的标识符**

如果 .cpp 文件的源代码如下所示

![在此处输入图像描述](../Images/a7969f289036718430619470663701b0.png)

在您的项目上单击鼠标右键。
检查`C/C++ Code As...`
运行 `Reparse Project.`

![在此处输入图像描述](../Images/88904c09f29f882b70607c0ebbd980a7.png)

如果这还不够。
转到按照说明`Project Properties`
填写`Include`输入字段。

![在此处输入图像描述](../Images/d4fda1e4ad70f14062a4047d950f2972.png)

正确设置包含路径。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-14T21:47:45.730

i had the same problem, but i recognized it appears after i changed properties-> c++ compiler -> Compilation Line -> additional options to -std=c++11\. if change the settings to default the error "unable to resolve identifier" disapears.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-22T12:54:08.870

## TL;博士

UTF-8 ***WITH*** BOM 也会导致问题。

## 问题

我刚刚遇到同样的问题，尝试了很多可能的解决方案，但都没有奏效，直到我找到了问题的根源，这有点好笑。我知道这个问题已经得到解答，但我写下我的解决方案，也许它会解决其他人遇到同样问题的问题。

例如，我在定义时得到*“无法解析标识符向量”*`struct Vector`，但它是正确的：

![无法解析标识符向量](../Images/cbdf304460571684193c99d290cc7f3c.png)

在声明/定义函数等时，我遇到了许多与此类似的错误。此外，由于错误的数量，我的代码帮助不起作用。

## 解决方案

1.  我在**[Notepad++](http://notepad-plus-plus.org)**`.cpp`中打开文件，看到文件以常规**UTF-8**编码，这意味着**文件以****[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)****字符**开头：

     **![Notepad++ - 以 UTF-8 WITH BOM 编码的文件](../Images/c64dc47bda45097a851180fd01b82481.png)** 
***   所以我点击了*Encoding* → **Convert to UTF-8 without BOM**：

    ![Notepad++：编码 - 无 BOM 转换为 UTF-8](../Images/73ecbc14cc00b145d94be553938a6adb.png)

    *注意：*不要只切换到*“在没有 BOM 的情况下以 UTF-8 编码”*，因为它会弄乱一些特殊字符（例如包含重音符号等的字符）。所以*转换*它。

    *   节省

    *   问题消失了：NetBeans 中不再报告错误：

    ![NetBeans - 不再报告错误，问题已解决](../Images/a88ce3cf9223db32de362c270bb34ca0.png)

    我希望它也可以为其他人节省一些时间。** 

 *** * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-07T13:22:55.127

我最近在 OS X 上使用 netbeans 8.0.2 时遇到了这个错误，并且找不到要做什么的答案。

我通过卸载 C/C++ 插件解决了这个问题，当我重新打开 netbeans 时，它提示我“修复代码帮助......”。

单击提示并让它运行问题已得到修复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-30T23:44:49.440

我正在使用 NetBeans 8.1，当我开始一个新的 C++ 项目时出现了同样的问题。它在通过调试器运行项目后自行解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-13T12:26:53.540

我们在一台计算机上开发代码并在另一台计算机上编译。在我将“构建主机”设置为远程机器（在项目的右键菜单中）之前，我得到了这些令人分心的标记。

我仍然不确定开发计算机上的问题是什么，因为未解析的标识符是来自标准库（等）的东西，`size_t`而`std::vector`这里的答案似乎没有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-26T05:31:30.923

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-05T19:33:29.790

我经常遇到这个错误，正如其他人提到的，通常我添加空格字符，保存文件，删除空格字符......并且所有标识符都已解决。

这一次它没有工作。我的项目，我编译了数千次，它总是有效，在输入文本时突然崩溃 MPLAB X IDE v3.35（Mac OSX，但可能没关系）。在此之后，我仅在一个文件中且仅针对一种结构，所有标识符均未解析。

profile.h 文件中的结构是：

```
typedef struct
{
    int state;                      ///< state machine current state
    int enabled;                    ///< machine can be ENABLED or DISABLED
    int flag;                       ///< to initiate profile execution
   ... many variables here ...
    unsigned long timestamp;        ///< variable used for local timing
} profile_struct; 
```

在我的 profile.c 文件中，此结构中的任何变量都无法解析，但项目已编译并运行良好。

经过一个令人沮丧的尝试，这解决了我的问题：**擦除了整个 MPLABX 缓存目录。**

就我而言，它位于：

```
/Users/USER_NAME/Library/Caches/mplab_ide/dev/v3.35/var 
```

（需要删除整个 'var' 目录；当然，将 USER_NAME 替换为您的用户名）

请注意，“库”是一个隐藏目录，但如果您启用查看隐藏文件，您仍然可以访问它，或者通过终端直接访问它。

最后，在您的计算机上，它可能在其他地方。我通过使用终端命令查看最近 2 分钟内在我的计算机上修改了哪些文件找到了我的：

```
/usr/bin/find /Users/USER_NAME/ -mmin -2 –ls 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-05T15:29:47.797

解决 Netbeans 12 中“无法解析标识符”错误问题的三种方法。

1.  右键单击“项目”。选择“代码帮助”。清理 C/C++ 缓存。重启IDE。
2.  右键单击“项目属性”--->转到构建->在 C/c++ 编译器下，在每个 C/C++ 项目上将 C 和 C++ 编译器设置为相同的标准。
3.  在工具--> 选项--> C/C++--> 代码帮助下，将：__cplusplus=199711L 更改为：__cplusplus=201402L 用于 C++14 或 __cplusplus=201103L 用于 C++11

我意识到在解决我自己的问题时，正确/对齐的括号可能会导致上述错误。确保您的牙套平衡且对齐。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-17T20:47:19.610

发生这种情况时，我总是必须重新安装 MPLAB X。其他事情有时会起作用，但这总是有效的。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-05-13T09:17:36.207

一旦我将我的 main.c 重命名为 main.cpp，我的就工作了。

根据文件扩展名，Netbeans Code Assistance 的行为发生变化

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2014-12-23T09:17:16.923

尝试通过右键单击文件，属性->常规->从代码帮助中排除（禁用）****

# sublimetext2 - Sublime 解析错误默认（windows）.sublime-keymap:221

> ID：14913247
> 
> 赞同：1
> 
> 时间：2013-02-16T17:49:08.163
> 
> 标签：sublimetext2

当我尝试启动 sublime 时，出现以下错误；

```
Error trying to parse file: Unexpected charachter, expected a comma or closing 
bracket in c:\Users\Victor\AppData\RoaminSublime Text 2\Packages\User\
Default (Windows).sublime-keymap:221. 
```

Sublime 没有启动，只是显示这个错误。所以我不知道如何编辑额外的逗号或括号。

我下载了一个新的 sublime 副本，但我最终遇到了同样的错误；sublime 无法启动，这是我的障碍。

我不知道该怎么做。我该如何解决我的问题？？？

这是我可以从我的 uer.sublime-package 文件中复制的点点滴滴。它真的是空的，因为我安装了一个新的副本 PK,)>nDefault (Linux).sublime-keymap[]

```
PK,)>nDefault (OSX).sublime-keymap[
]

PK,)>nDefault (Windows).sublime-keymap[
]

Preferences.sublime-settings// Settings in here override those in "Default/Preferences.sublime-settings", and
// are overridden in turn by file type specific settings.
{
}
Preferences.sublime-settingsPK 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:22:14.793

您应该能够通过另一个编辑器（例如 Notepad++）打开该文件。从那里您可以编辑文件。请注意，键盘映射文件只是 JSON。该错误只是告诉您解析它时出现了一些问题。如果您可以发布整个文件，我们可以帮助您修复它。

我不建议简单地删除该文件，因为根据给出错误的行号，您有许多键绑定。我怀疑你不想再输入所有这些。

编辑：您不应该查看 sublime-package 文件，而应该查看其中的`User`目录`Packages`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T07:17:05.530

它是由于对默认设置的错误解析而发生的。你可以通过访问 c:\Users\Victor\AppData\Roaming\Sublime Text 2\Packages\User 来解决这个问题。在此位置，您将找到 sublime-settings 文件。您只需在另一个文本编辑器（如记事本）中打开它们并更正它们的语法。对于 EG：不正确：auto_complete:false 正确：“auto_complete”:false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-21T15:34:52.440

这个错误可以很容易地消除，因为键盘映射的代码中只缺少一些分号或括号。因此，要更正它...只需转到Sublime Text 3 中的**Preferences**，然后单击**Key Bindings**。您将被重定向到 keymap 目录，在这里可以很容易地发现错误，因为 Sublime 将使用某种颜色指示错误。就是这样......繁荣......错误被删除！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-16T18:50:39.743

文件似乎已损坏。

删除文件，然后重新安装 Sublime Text 2。应该可以。

# php - 从数组中解析 JSON

> ID：14913257
> 
> 赞同：0
> 
> 时间：2013-02-16T17:50:30.880
> 
> 标签：php, json

我有来自 YouTube v2 的 JSON 响应：`http://gdata.youtube.com/feeds/api/users/youtube/uploads?orderby=published&max-results=1&alt=json`。

它只返回一个**我想要**的视频条目。我想得到那个视频的**标题？**我目前使用了以下代码：

```
$URL = file_get_contents('http://gdata.youtube.com/feeds/api/users/youtube/uploads?orderby=published&max-results=1&alt=json');
$readjson = json_decode($URL);
$title = $readjson->{'feed'}->{'entry'}->{'title'}->{'$t'};
echo $title; 
```

但它看起来不是普通的 JSON 树，因为它在视频中有一个数组，`entry` 所以我的代码不起作用。任何想法如何得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:53:28.560

```
$title = $readjson->{'feed'}->{'entry'}[0]->{'title'}->{'$t'}; 
```

# web-services - 带有 xsd 和 wsdl 的免费网络服务

> ID：14913261
> 
> 赞同：0
> 
> 时间：2013-02-16T17:50:56.427
> 
> 标签：web-services, xsd, wsdl

我正在寻找网络服务

1.  用户免费
2.  有xsd
3.  有wsdl

我已经搜索了很多，但是那里的大多数 web 服务只有 wsdl 而没有 xsd。

如果有人可以发布链接，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:53:12.683

如果您正在寻找 XSD 未嵌入在 WSDL 文件中的 Web 服务，那么请寻找 JAX-WS Web 服务。在 JAX-WS 样式中，XSD 没有嵌入到 WSDL 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:34:15.587

[http://www.w3schools.com/webservices/tempconvert.asmx?WSDL](http://www.w3schools.com/webservices/tempconvert.asmx?WSDL)。XSD 嵌入在 WSDL 中。

# c++ - C++ 如何加快我的程序设计

> ID：14913263
> 
> 赞同：0
> 
> 时间：2013-02-16T17:51:00.430
> 
> 标签：c++

我正在尝试设计一个和弦系统..

问题是我的系统工作正常，如果大小像 10-20 行 addPeer、removePeer 等。

但是当我用 5000 行命令文件测试它时。

前几百个相当快，但随着程序加载越来越多的行，它开始变慢..

由于程序的要求是测试我的程序设计，我不能使用线程。

我听说指针是让事情更快完成的好方法，但是我如何在我的情况下使用指针。

这是我的班级标题..

```
class chord 
{
public:
chord();
~chord();

struct fingerTable {
int index;
int key;
};

struct node {
int nodeid;
vector<fingerTable> fTable;
vector<string> data;
};

void addPeer(int);

vector<node> cNode;
vector<fingerTable> fTable;

/* SOME more functions ..*/
}; 
```

这是我的 addPeer 函数

```
void chord::addPeer(int id)
{
//id = node ID
int fIndex,nextNode;
node newNode;
vector<fingerTable> ft1;
vector<string> data1;
//increment indexCounter
//indexCounter++;

newNode.nodeid = id;
//insert a blank fingerTable first.
newNode.fTable = ft1;
//insert a blank data first.
newNode.data = data1;

//push back node to vector chord Index Node
cNode.push_back(newNode);
//indexCounter++;
//perform finger table computation

//sort it base on its NodeID
sort(cNode.begin(),cNode.end(),sortByNodeID);

for(int i=0;i<cNode.size();i++)
{
if(cNode[i].nodeid==id)
{
fIndex=i;
}
}//end for loop to loop finding index of node

if(fIndex!=cNode.size()-1)
{
//if not last element
nextNode=fIndex+1;
}
else
{
nextNode=0;
}

//now we get the message vector of the next node and do a datashift on it.
data1 = cNode[nextNode].data;
//clear its data away so we can empty it and re-arrange it.
cNode[nextNode].data.clear();
//performing data shift function
dataShift(data1,fIndex-1);

if(id!=0)
{
cout << "PEER " << id << " inserted."<< endl;
}

}//end addPeer 
```

我的问题是，我可以为这个函数 addPeer 即兴创作哪一部分来使整个程序更快地执行这些行。因为执行几百行时它变得非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:24:57.343

这正在减慢速度，因为您不断地进行分类。你应该试探。使用排序结构，如`std::map<int,node>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:54:08.000

改变你的容器。

通过使用`std::vector`，您的算法大部分时间都在将和弦复制到*错误*的位置。

如果您希望对和弦进行排序，请考虑使用`std::set`而不是`std::vector`.

# javascript - 如何在没有 JavaScript 的情况下在流体容器中垂直居中文本？

> ID：14913264
> 
> 赞同：1
> 
> 时间：2013-02-16T17:51:01.657
> 
> 标签：javascript, html, css, responsive-design

我有一个基于流体百分比的容器，其中包含一个包含标题的 div。每当调整浏览器大小或视口更改时，我希望此标题始终保持垂直定位在此容器的中心。是否有可能在没有 JavaScript 的情况下完成这种垂直重新定位？

```
<div class="fluid-container">
    <div class="meta">Title</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:03:23.243

这是我最喜欢的方法。我使用两个辅助类来实现这个目标：

```
.valign:after {
    display: inline-block;
    height: 100%;
    width: 0;
    vertical-align: middle;
    content: '';
}
.valign > .valigned {
    display: inline-block;
    vertical-align: middle;
    text-align: left;
} 
```

现在，当您需要垂直对齐某些东西时，只需将`valign`类添加到父元素和`valigned`实际元素即可。像这样：

```
<div class="fluid-container valign">
    <div class="meta valigned">Title</div>
</div> 
```

[http://jsfiddle.net/dfsq/MQMEZ/](http://jsfiddle.net/dfsq/MQMEZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:55:14.010

如果你知道“title”标签的高度，或者你可以用`line-height`and设置它`height`，你可以这样做：

```
.fluid-container {
  position: relative;
}
.fluid-container > .meta {
  width: 100%;
  height: 20px;
  line-height: 20px;
  position: absolute;
  top: 50%;
  margin-top: -10px;
  text-align: center;
} 
```

示例：http: [//jsfiddle.net/Yjy5C/2/](http://jsfiddle.net/Yjy5C/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:06:59.583

您可以（ab）使用`line-height`、`inline-block`和`vertical-align:middle`来获得所需的效果。它适用于所有体面的浏览器。（我曾经在[这里](http://www.student.oulu.fi/~laurirai/www/css/middle/#valhib)发现过这种技术）

```
.fluid-container {
    line-height: 8em; /* some abundant value, around the max height */
}
.fluid-container > div.meta {
    vertical-align: middle; /* center… */
    display: inline-block; /* …like text */
} 
```

# php - php订阅RSS提要

> ID：14913267
> 
> 赞同：0
> 
> 时间：2013-02-16T17:51:07.437
> 
> 标签：php

我正在尝试将 rss 提要添加到我的网站。不同的主题有不同的 RSS 提要。我不知道该怎么做是允许用户订阅 rss 提要？我想放一个链接，上面写着“订阅 rss 提要”或只是 rss 图标。 `Feed.php`有 rss 提要，因此将根据`$id`不同的 rss 提要显示。

饲料.php

```
 <?php
header("Content-Type: application/xml; charset=ISO-8859-1"); 

include "database.php";

$id = $_GET['id'];
$type = $_GET['type'];
$position = $_GET['position'];

$database = new Database();
$database->opendb();
$items = $database->rssfeed($id,$position,$type);
$database->closedb();

?>
<?xml version="1.0" encoding="ISO-8859-1" ?> 
<rss version="2.0"> 
<channel>
<?php

echo $items;

?>
</channel>
</rss> 
```

我允许用户订阅 rss 提要的方式是什么？例如，我网站上某个主题的提要 URL 可能是`www.example.com/feed/12`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:59:07.347

试试 application/rss+xml mime 类型。浏览器和插件会自动检测您的提要，并启用订阅。在谷歌阅读器或 som 上试试。

# java - 将项目添加到自定义列表视图仅在触摸时显示新项目

> ID：14913268
> 
> 赞同：1
> 
> 时间：2013-02-16T17:51:08.083
> 
> 标签：java, android, android-listview

我正在动态地将项目添加到 ListView 中，并且我遇到了新条目仅在我触摸手机屏幕时才会显示的问题。

我正在使用此代码添加一个新项目：

```
public TimerTask tt = new TimerTask() {
    @Override
    public void run() {
        LoadChatData bdl = new LoadChatData(new OnTaskComplete() {
            @Override
            public void onTaskCompleted(ArrayList<ChatListItem> item, int id) {
                currid = id;
                for (ChatListItem i : item) {
                    dataarr.add(i);
                }
                chatList.notifyDataSetChanged();
            }
        });
        bdl.execute(XXX);
    }
}; 
```

chatList 是适配器，dataarr 是适配器持有的数据。条目被添加，但只有当我触摸手机屏幕时才会显示它们。

我的自定义适配器如下所示：

```
import java.util.ArrayList;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class ChatList extends BaseAdapter {

    java.util.List<ChatListItem> data = null;
    Context context;
    int layoutResourceId;
    public String me = null;

    public void setId(String aid){
        this.me = aid;
    }

    public ChatList(Context context, int layoutResourceId, ArrayList<ChatListItem> data) {
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ChatHolder holder = null;
        ChatListItem entry = data.get(position);

        if (row == null) {
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ChatHolder();
            holder.txtText = (TextView) row.findViewById(R.id.txtText);
            holder.txtUser = (TextView) row.findViewById(R.id.txtUser);
            holder.txtVersion = (TextView) row.findViewById(R.id.txtVersion);
            holder.txtZeit = (TextView) row.findViewById(R.id.txtZeit);
            holder.background = (RelativeLayout) row.findViewById(R.id.backgroundlayout);

            row.setTag(holder);

        } else {
            holder = (ChatHolder) row.getTag();
        }

        int status = Integer.parseInt(entry.status);

        /*
         * android:paddingBottom="5dp" android:paddingLeft="5dp"
         * android:paddingRight="15dp" android:paddingTop="5dp"
         */

        if (entry.uid.equals(me)) {
            holder.background.setPadding(20, 5, 30, 5);
            holder.background.setBackgroundResource(R.drawable.chatitem_me);
        } else {
            holder.background.setPadding(30, 5, 20, 5);
            holder.background.setBackgroundResource(R.drawable.chatitem);
        }

        holder.txtUser.setTextColor(0xFF000000);
        holder.txtText.setTextColor(0xFF000000);

        Log.d("Info", "status is : " + status);
        if (status == 1) {
            holder.txtUser.setTextColor(0xFF005CE6);
        } else if (status == 2) {
            holder.txtUser.setTextColor(0xFFD67600);
        } else if (status == 3) {
            holder.txtUser.setTextColor(0xFF000000);
        } else if (status == 4) {
            holder.txtUser.setTextColor(0xFFDB0000);
            holder.txtText.setTextColor(0xFF660000);
        } else if (status == 5) {
            holder.txtUser.setTextColor(0xFF009933);
            holder.txtText.setTextColor(0xFF003300);
        }

        holder.txtText.setText(entry.text);
        holder.txtUser.setText(entry.user);
        holder.txtVersion.setText(entry.v);
        holder.txtZeit.setText(entry.time);

        return row;
    }

    static class ChatHolder {
        RelativeLayout background;
        TextView txtText;
        TextView txtUser;
        TextView txtVersion;
        TextView txtZeit;
    }

    @Override
    public int getCount() {
        return data.size();
    }

    @Override
    public ChatListItem getItem(int arg0) {
        return data.get(arg0);
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:52:43.690

计时器的愚蠢之处。我不得不在 UI 线程中更新我的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:42:44.833

您还记得使用[Timer.schedule()](http://developer.android.com/reference/java/util/Timer.html#schedule%28java.util.TimerTask,%20java.util.Date,%20long%29)方法启动计时器吗？

# ios - iOS替换uitextfield中的字符

> ID：14913269
> 
> 赞同：1
> 
> 时间：2013-02-16T17:51:16.320
> 
> 标签：ios, uitextfield

我发现了一个烦人的问题。我有一个带有数字十进制键盘的文本字段，但模拟器有重点，设备有逗号（都是 6.1）。我该怎么办，如果你插入一个逗号，这会被一个点代替？

谢谢

编辑：

这个过程，必须在这个方法中，实时发生

```
- (BOOL) textField: (UITextField *) theTextField shouldChangeCharactersInRange: (NSRange) range ReplacementString: (NSString *) string 
```

否则写入逗号，并在下一个字符处替换它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T17:58:41.013

您可以使用

```
- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target 
                                        withString:(NSString *)replacement 
```

例如：

```
NSString *str = myTextfield.text;

str = [str stringByReplacingOccurrencesOfString:@"."
                                     withString:@","]; 
```

对于自定义键盘，请参阅此[链接](https://stackoverflow.com/questions/7189287/create-custom-keyboard-and-configure-it-on-your-iphone)

**编辑** 您可以检查在此函数中输入的字符串以及是否为@"。" 然后你可以用@","来改变它

```
 // using something this

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
        NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
        [self updateTextLabelsWithText: newString];
        NSLog(@"Changed Str: %@",newString);

        return YES;
    }

    -(void)updateTextLabelsWithText:(NSString *)str
    {
     str = [str stringByReplacingOccurrencesOfString:@"."
                                             withString:@","];
         [myTextFiled setText:str];
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T18:20:43.937

您正在错误地看待这个问题。当您使用十进制小键盘设置文本字段时，小键盘将根据用户的区域设置显示句点或逗号。这就是你想要的。一些用户希望输入十进制数字，`3.14`而其他用户希望输入`3,14`.

运行设置应用程序并转到常规，然后转到国际。查看区域格式设置。这决定了用户的区域设置以及是否使用句点或逗号。您的设备和模拟器必须使用不同的区域格式设置进行设置。

这是最后一部分 - 一旦用户输入一个十进制值，您必须使用 an`NSNumberFormatter`将输入到文本字段中的字符串正确转换为`NSNumber`. 将`NSNumberFormatter`根据用户的区域设置正确处理数字中的逗号或句点。此外，当您需要向用户显示数字时，请使用 an`NSNumberFormatter`将数字转换为字符串。这将确保数字以用户期望的格式显示给用户。

在用户输入值期间，请勿将逗号替换为句点。它会使用户感到困惑。

**更新**

您可以在`shouldChangeCharactersInRange`委托方法中做的一件事是确保输入的所有字符都是有效的数字字符。我不会做诸如检查两个小数分隔符之类的事情。只需让用户输入与数字相关的字符即可。

当用户尝试离开文本字段时，您进行最终验证。例子：

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterDecimalStyle];

    NSNumber *val = [formatter numberFromString:textField.text];

    return val != nil; // don't let the user leave if text is not a valid number
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-17T17:33:10.230

**斯威夫特 3.1**

1）用点（。）替换逗号（，）

2）只允许一个点（。）

```
func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {

    let dotsCount = textField.text!.componentsSeparatedByString(".").count - 1
    if dotsCount > 0 && (string == "." || string == ",") {
        return false
    }

    if string == "," {
        textField.text! += "."
        return false
    }

    return true
} 
```

# asp.net-mvc - 为什么使用告诉 .net 关于提供者？

> ID：14913271
> 
> 赞同：0
> 
> 时间：2013-02-16T17:51:20.563
> 
> 标签：asp.net-mvc, membership

我不明白为什么很多人谈论创建从 asp.net 库中的某些基类继承的成员资格提供程序并在 web.config 文件中注册提供程序。因为我们可以在不这样做的情况下得到任何我们想要的东西。我编写了一个静态类，它可以检查用户是否存在于相应的数据库中，添加用户，通过调用对用户进行身份验证 `FormsAuthentication.SetAuthCookie`，一切正常。简而言之，为什么我们需要告诉 web.config 文件我们使用哪个提供程序。为什么我们的提供者需要继承 Membership Provider ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:52:36.980

> 为什么我们需要告诉 web.config 文件我们使用哪个提供者。

因为这就是提供程序模型在 ASP.NET 中的工作方式。如果您编写自定义提供程序，则需要在 web.config 中注册它。您还需要指明您的应用程序将使用哪个默认提供程序。角色提供者也是如此。

> 我们的提供者需要继承 Membership Provider 吗？

不，您不需要这样做。您可以有一个完全自定义的代码来执行会员提供者的任务，例如验证用户的凭据或创建新用户。

成员资格提供程序只是在大多数开发人员熟悉的 ASP.NET 应用程序中执行这些任务的标准方式。如果您决定推出自己的自定义代码，那么如果新开发人员加入您的团队，他将需要了解所有这些自定义代码。

您还提到您编写了一个静态类。对于这类事情，静态类的缺点是您将应用程序的不同层强耦合，从而难以单独测试和重用它们。成员资格提供者的全部意义在于它是一个抽象。此外，如果您不需要所有功能，则在编写自定义成员资格提供程序时无需覆盖所有方法。只有那些你实际使用的。

# ms-access - 将代码与访问中的数据分开

> ID：14913278
> 
> 赞同：2
> 
> 时间：2013-02-16T17:51:50.883
> 
> 标签：ms-access, vba

我正在扩展访问应用程序，同时一些用户正在使用它。这意味着用户正在更改数据库。我创建了访问文件的备份并正在处理它。通过这种方式，我可以确保在测试系统时不会对更改数据库的系统进行任何更改。但我只能在用户不使用系统时进行开发，因此他们不会更改数据库（表中的数据）。这不好，因为我不能在用户工作的同时工作。

有什么解决办法吗？

进行此开发的一个好方法是将 VBA 代码与表格分开。我的意思是拥有一个包含 VBA 代码的访问文件和另一个包含表格的访问文件。

是否可以？

我怎样才能做到这一点？

有没有关于如何做到这一点的文档？这方面的最佳做法是什么？

编辑：

在此问题的第一条评论中的链接中提供了良好的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T23:07:38.317

您需要将数据库拆分为两个数据库：前端和后端。将后端保持在中心位置并在那里更改数据结构。将前端副本分发给每个用户，让他们在自己的副本上运行查询、报告、表单等。在前端为他们提供一组一致的基本查询，这样他们就永远不需要使用实际的表——然后您可以自由地更改这些表。

[您可以在Microsoft 的 Office 网站](http://office.microsoft.com/en-001/access-help/split-an-access-database-HA010342026.aspx)上找到有关数据库拆分的演练教程。但基本思想是前端包含指向后端实际表的链接表。您也可以使用 Access 数据导入向导手动执行此操作，并选择链接到表而不是导入其数据。请注意确保链接表指向共享文件夹中的数据库，而不是指向您的个人文件夹。您可以通过右键单击链接表、选择链接表管理器并在必要时更新所有表的链接来执行此操作。

# angularjs - 根据元素大小处理范围变量

> ID：14913279
> 
> 赞同：1
> 
> 时间：2013-02-16T17:52:09.987
> 
> 标签：angularjs

## 已编辑

`$scope.images`我需要根据元素大小使用函数处理数组。

test.html 看起来像这样

```
<div image-gallery>
  <div ng-repeat='img in images'>
    <img ng-src='{{img.thumbnail}}' style='width: {{img.newwidth}}'>
  </div>
</div> 
```

我只是想知道如何创建一个简单的图像库指令，该指令将在函数上使用它自己的宽度，例如

> $scope.images = CreateThumbnails($scope.images, element.innerWidth())

CreateThumbnails计算`newwidth`. `$scope.images`当然，如果在浏览器大小发生变化时计算它们会很好，但简单的负载计算就足够了。

## 更多编辑

`$scope.images`对，所以如果我这样称呼它，我至少可以修改

```
$scope.images = Images.get({}, function(images) {
  CreateThumbnails(images, 1000)
} 
```

可悲的是，这是在控制器中，所以仍然想知道如何在指令中访问 $scope.images 以便我可以使用该元素。

## 更新

呼，终于至少有一些工作了。我只要

```
$scope.images = Images.get({}, function() {
  CreateThumbnails($scope.images, $scope.elementwidth)
) 
```

然后在包含图像的指令中

```
app.directive("imageGallery", function() {
  return function(scope, element, attrs) {
    scope.elementwidth = element.innerWidth();
  };
}); 
```

所以至少它会在加载时创建缩略图，我会尝试看看如何检查浏览器何时调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:43:32.943

好吧，我可以在指令中收听窗口事件，让它工作：

```
app.directive("imageGallery", function($window) {
  return function(scope, element) {
    scope.elementwidth = element.innerWidth();
    angular.element($window).bind("resize", function() {
      scope.elementwidth = element.innerWidth();
    });
  };
});

app.controller("ImageTestCtrl", function($scope, Imgs) {
  $scope.images = Imgs.index({}, function() {
    $scope.thumbs();
  });
  $scope.$watch("elementwidth", function() {
    $scope.thumbs();
  });
  return $scope.thumbs = function() {
    CalculateThumbnails($scope.images, $scope.elementwidth);
  };
}); 
```

仍然有些重复，因为我认为我必须继续使用资源回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:27:24.897

`ngRepeat`指令以 1000 优先级运行，如果你想在给你之前处理数据，`ngRepeat`你需要设置`priotity`属性值高于`1000`. 但大多数时候你不需要这样做。您可以创建一个指令来封装该`ngRepeat`部分，甚至更好（这也适合您的情况），在重复元素处创建一个指令，在您的情况下，它将是`img`元素本身。

# html - CSS 中的数学 - 更精确的百分比

> ID：14913286
> 
> 赞同：1
> 
> 时间：2013-02-16T17:52:38.073
> 
> 标签：html, css

这就是我制作大小相等的 3 列页面的方法：

```
<div class="wrapper">
   <div style="width:33%;float:left;background-color:red;"></div>
    <div style="width:33%;float:left;background-color:green;"></div>
   <div style="width:33%;float:left;background-color:blue;"></div>
</div> 
```

有没有办法避免使用`width:33%`和输入更准确的数字？我对 javascript 选项没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:51:47.607

首先 - 从 html 中获取这些样式：

```
<body>
    <section class="main-content">
        <div class="colum01">Column01</div>
        <div class="colum02">Column01</div>
        <div class="colum02">Column01</div>
    </section>
</body> 
```

在您的 CSS 中：

```
.main-content {
    width: 100%;
    float: left;
    overflow: hidden;
}

.column01 {
    width: 33%;
    float: left;
    background-color: red;
}

.column02 {
    width: 34%;
    float: left;
    background-color: orange;
}

.column03 {
    width: 33%;
    float: left;
    background-color: yellow;
} 
```

或者您可以使用 33.3 和 33.4 和 33.3%

我一直假设每个人都使用边界框：一旦你开始填充，这将使一切变得神奇。将填充推入盒子内部而不是外部，因此您不必担心将所有填充和宽度相加以达到 100%

[保罗·爱尔兰关于这个问题](http://paulirish.com/2012/box-sizing-border-box-ftw/)

`* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }`

如果您使用列表在列中显示内容，您可以 :nth 以每列中的第 3 个项目为目标，并仅在这些项目上放置 33.4%... 目前还没有广泛支持使用 calc 并且使用 javaScript 仍然只是将为您创建样式。所以我建议让事情尽可能简单。这对我很有用。（它消除了当你在所有 3 上使用 33.3% 时出现的那个讨厌的小黑线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:06:21.947

这可以使用[CSS3`calc()`属性](https://developer.mozilla.org/en-US/docs/CSS/calc)来完成。

**CSS**：

```
div.column {
    width: 33.33%; /* Fallback in case the browser does not support calc() */
    width: -webkit-calc(100% / 3); /* Chrome 19 and above */
    width:    -moz-calc(100% / 3); /* Firefox 4 and above */
    width:         calc(100% / 3); /* IE 9 and above */
} 
```

**HTML**：

```
<div class="wrapper">
   <div class="column" style="float:left;background-color:red;"></div>
   <div class="column" style="float:left;background-color:green;"></div>
   <div class="column" style="float:left;background-color:blue;"></div>
</div> 
```

[JS 小提琴示例](http://jsfiddle.net/KjWsa/1/)

[浏览器兼容性表](http://caniuse.com/calc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T17:56:27.673

不能直接用`width:33.33%`吗？这并非不可能。这甚至不是特别难，如果你知道你的屏幕尺寸，使用`display: table.`表格效果很好。然而，响应表仍在制定中

支持在桌面和移动浏览器中显示 CSS 表的[兼容性表。](http://caniuse.com/css-table)一些与 CSS 表相关的 IE 7 修复在[这里](http://tanalin.com/en/projects/display-table-htc/)。

# linux - Linux中的OpenCl看门狗

> ID：14913287
> 
> 赞同：1
> 
> 时间：2013-02-16T17:52:40.417
> 
> 标签：linux, opencl, watchdog

之前我在 Windows 系统上开发 OpenCl 内核，现在我使用 Linux 系统。在 Windows 上，有一个称为 watchdog 的简洁功能，如果 OpenCl 计算持续时间超过 5 秒（默认情况下），它会自动停止，如果代码中的某些错误导致非常长时间或无限运行，它非常有用。有没有办法在 Linux 中实现这样的目标？

我有一张 AMD Mobility 显卡和最新的 AMD 驱动程序。如果没有看门狗，有没有办法手动终止 OpenCl 内核？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:10:37.440

Nvidia 在 Linux 上的 X11 驱动程序确实包含一个默认开启的看门狗。它由 xorg.conf 中的“交互式”标志控制。[请参阅此处](http://nvidia.custhelp.com/app/answers/detail/a_id/3029/~/using-cuda-and-x)的“选项 4” 。

由于它是特定于 Nvidia 驱动程序的，因此 AMD 的解决方案会有所不同（如果有的话）。

# wpf - WPF 边距不加起来

> ID：14913291
> 
> 赞同：0
> 
> 时间：2013-02-16T17:53:05.707
> 
> 标签：wpf, grid

我刚开始使用 WPF，我正在尝试设置一个包含四行高度为 150 的网格。这将占用我为高度设置的 800 个像素中的 600 个。然后，我将上边距设置为 30，将下边距设置为 170，以便为底部的控件留出一些空间。

设计视图中的一切看起来都很棒，但是当我运行我的应用程序时，底行有一些区域被截断。

设计视图 ![在此处输入图像描述](../Images/d130a35701ceac8a551986439ca3de13.png)

运行视图 ![在此处输入图像描述](../Images/8f1760461432f8680e69ae2dbcafe3c5.png)

我不明白是什么导致了这些观点之间的这种差异。

```
 <Page x:Class="EzTargetProject.HomePage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  mc:Ignorable="d" 
  d:DesignHeight="800" d:DesignWidth="1280"
Title="HomePage">

<Grid  Margin="20,30,20, 170" Grid.Column="4" Grid.Row="4" Background="Gray" ShowGridLines="True">
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="150"/>
        <RowDefinition Height="150"/>
        <RowDefinition Height="150"/>
        <RowDefinition Height="150"/>
    </Grid.RowDefinitions>

    <!-- Name -->
    <StackPanel Grid.Column="0" Grid.Row="0" Orientation="Vertical" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:58:46.723

如果要设置网格的高度，可以避免底部边距。

如果你总是想要一个 600px 高度的网格，只需设置它。

我会使用 ScrollViewer 作为父级，让用户看到您要在网格下设置的控件（例如，如果用户想要一个小窗口）： [在 WPF 中启用滚动条](https://stackoverflow.com/questions/736153/enabling-scrollbar-in-wpf)

# ios - 如何通过 iOS 应用分享或参加 Facebook 活动？

> ID：14913292
> 
> 赞同：1
> 
> 时间：2013-02-16T17:53:12.057
> 
> 标签：ios, facebook

我想通过一项功能扩展我的应用程序，以在用户的​​墙上分享列出的 Facebook 事件。另外，我希望能够将用户标记为活动的参与者。

不幸的是，我在 FB 开发者页面上没有找到任何有用的提示。

# vb.net - 如何设置 ToolTip 的最大宽度

> ID：14913299
> 
> 赞同：1
> 
> 时间：2013-02-16T17:54:04.157
> 
> 标签：vb.net, winforms, tooltip

我有一个工具提示，我想为其分配最大宽度，每当工具提示达到该宽度时，它就会向下跳一行，就像标签一样。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:31:39.847

该功能未在 Winforms 中公开。一种解决方法是在字符串中插入换行符以获得多行提示。例如：

```
Public Class Form1
    Public Sub New()
        InitializeComponent()
        ToolTip1.SetToolTip(Me, "Hello" + vbCrLf + "world")
    End Sub
End Class 
```

![在此处输入图像描述](../Images/e274af15984857f0434c1f9b12d02c0f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:41:57.087

如果您绝对需要，您可以设置`OwnerDraw`= true 并自己处理 Draw 事件。可以在此[MSDN 站点](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.ownerdraw.aspx)上找到一个示例。

# c++ - c++中的指针和引用作为参数

> ID：14913300
> 
> 赞同：3
> 
> 时间：2013-02-16T17:54:04.097
> 
> 标签：c++

这到底是做什么的？

```
void insertar (struct pila *&p); 
```

`*&`与仅像这样声明方法相比，使用的优点是什么：

```
void insertar (struct pila *p); 
```

或者像这样：

```
void insertar (struct pila &p); 
```

我知道`*`是指针和`&`地址，但都在方法签名中？

有什么好处？

它们是用来做什么的？

它有什么作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T17:58:21.423

您混淆了 的两种含义`&`。在表达式中使用时，它是“地址”运算符。也就是说，如果你有`int x;`并且你有`&x`，你会得到 的地址`x`。但是，在一个类型中，`&`意味着它是一个引用类型。这是两个完全不同的概念。

以下采用`pila`, 将其复制到函数中。修改`p`只会影响函数内部的副本：

```
void insertar(pila p); 
```

下面`pila`通过引用，使函数内部的对象与外部相同。这里修改`p`会修改传入的对象：

```
void insertar(pila& p); 
```

下面是一个指向 a 的指针`pila`，将指针复制到函数中。修改指针只会在函数内部产生影响。它指向的对象与外部相同：

```
void insertar(pila* p); 
```

下面通过引用获取指向 a 的指针`pila`，因此函数内部的指针与外部的指针相同。如果你修改了*指针*，你也会在外面修改指针：

```
void insertar(pila*& p); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:08:53.137

这`&`是一个参考。A`*&`非常类似于`**`. 它将允许您更改指针。

```
int u = 3;

void change( int *& p ) {
    p = &u;
}

void main() {
    int *p;
    change( p );
    // p == &u
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T17:58:26.403

`*&`是对您示例中的指针的引用。总之，可以修改指针指向的数据*和*指针本身。例子：

```
int global1 = 0, global2 = 1;
void func(int*& p)
{
    *p = 42;
    p = &global1;
}

int main()
{
    int* p = &global2;
    func(p); // Now global2 == 42 and p points to global1 (p == &global1).
} 
```

# javafx-2 - 如何创建从一种形状到另一种形状的变形效果？

> ID：14913303
> 
> 赞同：3
> 
> 时间：2013-02-16T17:54:08.200
> 
> 标签：javafx-2

javafx 1.3 教程描述[了如何将矩形变形为圆形？](http://docs.oracle.com/javafx/1.3/howto/Shapes-Tutorial.html#morph).

![在此处输入图像描述](../Images/3750a9faa957f250f834f3e05ba94bc4.png)

代码清晰且非常……简单。

javafx 2.2 中是否有等效的转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:38:41.660

等待更好的解决方案，我找到了解决方法。

我的解决方案基于 jfxrt.jar( `com.sun.javafx.sg.prism.ShapeEvaluator`) 中可用的变形算法和方法`javafx.scene.shape.Shape#createFromGeomShape`。由于这些代码部分不可见，因此我复制了它们。

该代码可在[此 gist](https://gist.github.com/gontard/5029764)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:09:50.997

根据现有的 javadoc，以及功能描述：

[http://javafx-jira.kenai.com/browse/RT-11089](http://javafx-jira.kenai.com/browse/RT-11089)

JavaFX 2.2 不支持这种转换。

目前，该功能没有修复版本，因此，它不打算出现在 JavaFX 8 中（至少目前是这样）。有可能，它会在未来出现。

顺便说一句，您可以投票支持该功能。如果它具有高优先级，它更有可能被修复。

# ruby-on-rails - 带有咖啡脚本和导轨的内联生态模板

> ID：14913304
> 
> 赞同：2
> 
> 时间：2013-02-16T17:54:09.450
> 
> 标签：ruby-on-rails, coffeescript, eco

是否可以`eco.render`在 rails coffeescript 文件中使用？

`JST`只有在我们包含模板后才可用，所以也许我们可以需要一些文件（在 application.js 中）才能`eco`使用

# forms - Symfony2 和 Doctrine - 嵌入表单集合 - 编辑表单

> ID：14913305
> 
> 赞同：0
> 
> 时间：2013-02-16T17:54:18.363
> 
> 标签：forms, symfony, collections, doctrine-orm

我正在尝试为我的一个实体制作编辑表单。我已经成功创建了一个添加表单，但是在编辑视图上它根本不起作用。我只得到错误：

> 表单的视图数据应为标量、数组或\ArrayAccess 的实例类型，但它是类TA\ManagerBundle\Entity\TaReservation 的实例。您可以通过将“data_class”选项设置为“TA\ManagerBundle\Entity\TaReservation”或添加将 TA\ManagerBundle\Entity\TaReservation 类的实例转换为标量、数组或 \ 的实例的视图转换器来避免此错误数组访问。

TaReservation 有 TaReservationType，其中有两个集合：

```
->add('topay', 'collection', array(
  'required' => false,
  'type' => new TaTopayType(),
  'allow_add' => true,
  'allow_delete' => true,
  'by_reference' => false,
  'options' => array('data_class' => 'TA\ManagerBundle\Entity\TaTopay'), 
->add('client', 'collection', array(
  'required' => false,
  'type' => new TaClientType(),
  'allow_add' => true,
  'allow_delete' => true,
  'by_reference' => false,
  'options' => array('data_class' => 'TA\ManagerBundle\Entity\TaClient'), 
```

在删除该集合或更改之后

```
$entity = $em->getRepository('TA\ManagerBundle\Entity\TaReservation')->find($id); 
```

至

```
$entity = new TaReservation(); 
```

一切正常 - 编辑字段中没有数据。谁能告诉我如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:36:25.343

[解决了]

我发现，其中一个集合有一个隐藏字段，其中包含预订 ID；）删除它解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:47:06.333

“集合”表单字段没有选项“data_class”，我不知道你从哪里得到的。

检查您的表单类中是否有定义数据类的 getDefaultOptions() 方法，如下例所示：

```
 public function getDefaultOptions(array $options)
{
    return array(
        'data_class' => 'Acme\DemoBundle\Entity\EntityName',
    );
} 
```

# java - 成员初始化与构造函数初始化

> ID：14913307
> 
> 赞同：0
> 
> 时间：2013-02-16T17:54:43.410
> 
> 标签：java, oop

两个声明之间有区别吗？有什么优点和缺点吗？哪个是首选。

```
class Car
{
   CarLoan loan= new CarLoan();
} 
```

VS

```
class Car
{
   CarLoan loan;

   Car()
   {
       loan = new CarLoan();
   }
} 
```

我认为在构造函数调用之前调用成员初始化。还有其他区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:04:41.327

如果您有两个或多个构造函数并且每个构造函数的初始化值不同，那么您应该使用构造函数初始化，因为没有办法对成员初始化做同样的事情......

但是，如果您只有一个构造函数...您可以使用成员初始化来提高代码清晰度...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:22:49.807

最后你的两个例子没有区别。

但是，如果您有多个成员，则直接初始化的成员将在调用的构造函数中的代码被调用之前构造。

您只需将其视为在所有构造函数中内联所有直接初始化的成员。

在对象创建期间，您可以在 Eclipse 调试器中很好地看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:04:33.330

如果您使用**预初始化（成员初始化），那么 JVM 将像****final**关键字一样获得速度提升。类成员使用**默认值**初始化。这是一个好处。您是您的代码的所有者。我同意在某些情况下您可能会更改默认值，然后更改它并使用构造函数。我希望它有所帮助。

# emacs - 自定义 repl/nrepl 错误消息

> ID：14913308
> 
> 赞同：0
> 
> 时间：2013-02-16T17:54:44.440
> 
> 标签：emacs, error-handling, clojure, runtime-error

我偶尔会在 Clojure 中犯一个错误，而且我做的次数不够多，还没有立即知道我忘记了什么，但我仍然经常这样做，以至于它*真的很*烦人。

基本上在 using 之后`nrepl-jack-in`，我经常忘记更改为正确的命名空间。

所以在 nrepl`user>`提示符下，我输入一个函数，我得到：

```
CompilerException java.lang.RuntimeException: Unable to resolve symbol: foo-bar-baz in this context, compiling:(NO_SOURCE_PATH:1) 
```

在给我返回提示之前打印在`nrepl`缓冲区中。`user>`

所以我发现与其试图搞乱 Java/Clojure，可能有一种简单的方法可以直接从 Emacs 给出提示，只使用一些 Emacs 魔法。

如何添加钩子（？）或类似于 Emacs / nrepl-mode 的东西，以便在打印特定消息时（例如，包含“无法解析符号”和“在此上下文中”的消息）我可以添加一行这样说：

```
"Didn't you forget to change namespace?" 
```

甚至：

```
"There's a .clj buffer opened using namespace abc.defk, didn't you forget to enter: (ns  abc.def) ?" 
```

在 Clojure 中有相当多的错误消息我觉得很神秘，而且我通常需要一段时间才能弄清楚我做错了什么。如果我可以直接从 Emacs 中“个性化”这些错误消息，我会赢得相当长的时间。

那么我怎样才能“拦截”nrepl 输出并根据我的需要调整它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:17:09.820

您必须`nrepl-default-err-handler`在 nrepl.el 中进行更改才能达到预期的效果。或者，如果它与某个模式匹配，您可以建议 (with `defadvice`)替换其输出。`nrepl-default-err-handler`不过，从 nrepl.el 执行此操作对我来说似乎不是特别好的主意。也许 nREPL 中间件会是更好的方法。

# php - 使用正则表达式查找正则表达式字符类

> ID：14913310
> 
> 赞同：1
> 
> 时间：2013-02-16T17:55:09.827
> 
> 标签：php, regex, preg-match, notepad++

我需要用正则表达式找到一个正则表达式字符类（即方括号之间的所有内容）。所以我想出了以下正则表达式：

```
(?<!\\)\[(?:\^\])?(?:[^]\\]+|\\.)*\] 
```

当我在 Notepad++ 中测试它时，该正则表达式工作得非常好——在搜索窗口 (Ctrl-F) 和 RegEx Helper 插件中——但是当我尝试在 PHP 代码中使用它时出现错误。

```
$string = '[^abcd\]efgh]';

$pattern = '/
(?<!\\) \[              # an opening square bracket not preceded by a backslash
  (?:\^\])?             # circumflex and closing bracket 0 or 1 times
(?:
  [^]\\]+               # not a closing bracket, nor a backslash 1-n times
 |                      # or
   \\.                  # any escaped character (including an escaped closing bracket)
)*                      # 0-n times
\]                      # closing bracket
/x';

preg_match_all($pattern, $string, $matches);

print_r($matches); 
```

输出：

> 警告：preg_match_all(): Compilation failed: missing terminating ] for character class at offset 33 in C:...\test.php on line 21

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:17:20.650

文字反斜杠需要在 PHP 正则表达式中用四个反斜杠表示。因此，尝试

```
$pattern = '/(?<!\\\\)\[(?:\^\])?(?:[^]\\\\]+|\\\\.)*\]/' 
```

# c# - 使多个矩形或区域无效

> ID：14913317
> 
> 赞同：2
> 
> 时间：2013-02-16T17:55:44.533
> 
> 标签：c#, .net, winforms, invalidation, onpaint

我遇到了问题，`Invalidate()`因为它`OnPaint`在我准备好之前调用...... `Invalidate(new Rectangle(x, y, width, height))`当我需要重新绘制一个且只有一个区域时工作正常，但我需要做的是创建一组矩形以使其无效，然后使用`Update()`方法重新绘制所有无效区域。我在`Invalidate()`and之间有点迷失`Update()`：如何使用它们以及这样做的干净方法是什么。

我需要实现这一点，因为我正在研究诸如“兰顿的蚂蚁”或“康威的生命游戏”之类的元胞自动机。小网格不是问题，但是对于大尺寸的网格（700x500），绘画是一个非常重要的问题。

所以我的问题是如何使 X 矩形无效而不`OnPaint`在每次失效时调用，然后调用`OnPaint`以仅刷新指定区域（X 矩形将 = 至少数百，数千肯定）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:08:29.573

调用[`Invalidate`](http://msdn.microsoft.com/en-us/library/598t492a.aspx)方法不会立即引发[`Paint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)事件。它仅将指定区域设置为*无效*并将绘制事件排队。下一次调用[`Invalidate`](http://msdn.microsoft.com/en-us/library/598t492a.aspx)仅将区域添加到先前无效的区域。只有当队列`Paint`中没有事件时，它才会放置一个新事件。`Paint`

从方法的**备注**部分[`Invalidate`](http://msdn.microsoft.com/en-us/library/598t492a.aspx)：

> 调用 Invalidate 方法不会强制同步绘制；要强制同步绘制，请[`Update`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.update.aspx)在调用 Invalidate 方法后调用该方法。不带参数调用此方法时，会将整个客户区添加到更新区域。

* * *

**更多解释：**

Windows Forms 技术是`Win32`'s`user32`库的包装器。要了解绘制事件的底层原理，您需要了解 user32 的工作原理。

### [消息队列：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927.aspx)

Windows 中的每个进程都有一个[消息队列](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927.aspx)。当属于进程的窗口发生任何事情时，Windows 会将事件推送到进程的[消息队列](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927.aspx)中。每个应用程序中都有一个[消息循环](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927.aspx#loop)，它从队列中提取消息（通过调用）并分派消息（通过调用[DispatchMessage()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644934.aspx)[`GetMessage()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644936.aspx)调用适当的函数，称为 a ）。所以消息一个接一个地被处理。这意味着当正在处理一条消息时，无法处理其他消息。 这就是为什么当您在表单中执行耗时的操作（没有启动新线程）时，应用程序停止响应：您卡在处理一条消息（例如[`Window Procedure`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632593.aspx)
`Click`按钮事件），因此应用程序无法处理其他消息（鼠标事件、绘画事件等）。

在 Windows 窗体中，[`Application.Run`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.run.aspx)方法运行应用程序的消息循环。消息传递给[Control.WndProc](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)方法，该方法确定`OnXxxx`要调用的适当方法（`OnKeyPress`、`OnMouseMove`、`OnResize`等），并且该方法引发相应的事件（`KeyPress`、`MouseMove`、`Rezie`等）。

### [WM_PAINT：](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213.aspx)

当需要绘制程序的窗口时（例如，当它首次显示或从最小化状态恢复时），Windows[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213.aspx)将消息排队到消息队列中，前提是消息队列中没有未处理[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213.aspx)的窗口。此外，消息循环仅[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213.aspx)在队列中没有其他消息时才从队列中提取消息。来自[`WM_PAINT`MSDN 页面的](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213.aspx)引用：

> 当应用程序的消息队列中没有其他消息时，GetMessage 返回 WM_PAINT 消息，并且 DispatchMessage 将消息发送到相应的窗口过程。

在 Windows 窗体中，[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213.aspx)转换为`OnPaint`引发[`Paint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)事件的方法。

当您在一个方法中多次调用`Invalidate`（调用 Win32函数）时，事件仍然没有机会被引发。当前正在处理的事件必须完成，同时发送的其他消息也应该被处理，然后引发事件。[`InvalidateRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145002.aspx)`Paint``Paint`

请按照答案中的链接仔细阅读。

# c# - 棱镜相关模块

> ID：14913322
> 
> 赞同：0
> 
> 时间：2013-02-16T17:56:22.073
> 
> 标签：c#, wpf, prism

这应该是一件容易的事，

我有一个`DomainModule`和一个`ServicesModule`where`DomainModule`使用`ServicesModule`.

```
DomainModule --> ServicesModule 
```

**模块定义：**

```
 [ModuleDependency("ServicesModule")]
    [Module(ModuleName = "DomainModule")]    
    public class DomainModule : ModuleBase
...

[Module(ModuleName = "ServicesModule")]
public class ServicesModule : ModuleBase 
```

**我得到的错误：**

> *一个模块声明了对另一个未声明要加载的模块的依赖关系。缺少模块：ServicesModule*

不确定如果我添加对`ServicesModule`遗嘱的引用，我是否会失去松散耦合规则，但我尽量不这样做，如果我错了，请告诉我。

您对此有何建议/提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:11:01.563

复合应用程序库的当前版本不支持按需加载具有依赖关系的模块。

但是有一种解决方法，方法是创建一个`extension method to load the dependent modules`可以在[此处](http://blogs.southworks.net/mconverti/2008/11/13/how-to-load-modules-on-demand-that-have-dependencies-using-composite-wpf-prism/)找到的。

# asp.net-mvc-4 - 在 FB C# 客户端中使用 Newtonsoft JsonConvert 时，Json 结构返回空，没有属性名称和值

> ID：14913324
> 
> 赞同：1
> 
> 时间：2013-02-16T17:56:21.893
> 
> 标签：asp.net-mvc-4, facebook-c#-sdk, json.net, jsonserializer, jsonresult

我正在开发使用 Facebook C# SDK (6.0.10.0) 和 Newtonsoft.Json (4.5.0.0) 的 asp.net mvc 4 应用程序。

使用 FacebookClient 的请求返回 expando 对象：

```
[Authorize]
public ActionResult GetFbData(string path = "me"){
    var expando = this.fb.Get(path);

    return Json(expando);
} 
```

返回的 Json 看起来像：

```
[{"Key":"id","Value":"100000xxxxxxxx"},{"Key":"name","Value":"John Doe"} ... ] 
```

我想以格式返回它，`{id:100000xxxxxxx, name:"John Doe", ... }`所以我将它添加到创建我的 fb 客户端的代码中：

```
fb.SetJsonSerializers(JsonConvert.SerializeObject,
                      JsonConvert.DeserializeObject); 
```

上面的相同代码现在返回：

```
[[[]],[[]],[[]],[[]],[[]],[[]],[[[[]],[[]]]],[[[[]],[[]]]],[[]],[[]],[[[[[[[]],[[]]...] 
```

我可以通过以下方式获得所需的结果：

```
return Content(JsonConvert.SerializeObject(Expando)); 
```

这会返回正确的 Json，但 Content-Type 是`text/html; charset=utf-8`，我想知道如何在不手动设置响应标头等的情况下将所需的格式返回为 JsonResult，我只想更改默认序列化行为而不重新实现序列化程序等。

必须通过**单行代码**完成一些简单的事情来改变这种行为，我希望有人已经找到了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:50:46.550

不确定您是否仍在寻找答案，但您几乎已经找到了。Content 接受第二个参数，即内容类型，因此如果您将其更改为

```
return Content(JsonConvert.SerializeObject(Expando), "application/json"); 
```

它应该按预期工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T15:05:42.490

对于将来可能会看到这一点的任何人，当我遇到同样的错误时，根本原因是 Json 序列化失败，因为我的结果对象上没有设置显式类型。

即在我的控制器里面得到

`return Json(res.Data, JsonRequestBehavior.AllowGet);`where`res.Data`是类型`object Result<object>.Data`而不是类。

# ruby - 为什么我不能让 Nanoc 在 Windows 8 上编译我的网站？

> ID：14913330
> 
> 赞同：0
> 
> 时间：2013-02-16T17:56:33.920
> 
> 标签：ruby, nanoc

我已经更新到 Windows 8，我的同一个站点曾经在 Windows 7 中编译，并且仍然在另一台 Windows 7 机器上编译，但我无法让它工作。这是我尝试进行`nanoc compile`操作时控制台的输出：

```
nanoc compile

Loading site data... done

Captain! We've been hit!

Message:

EOFError: end of file reached

Compilation stack:

  (empty)

Stack trace:

  0\. lib/static.rb:41:in `readpartial'
  1\. lib/static.rb:41:in `block (2 levels) in checksum_for'
  2\. lib/static.rb:39:in `open'
  3\. lib/static.rb:39:in `block in checksum_for'
  4\. lib/static.rb:37:in `map'
  5\. lib/static.rb:37:in `checksum_for'
  6\. lib/static.rb:21:in `block in items'
  7\. lib/static.rb:13:in `map'
  8\. lib/static.rb:13:in `items'
  9\. C:/Ruby193/lib/ruby/gems/1.9.1/gems/nanoc-3.5.0/lib/nanoc/base/source_data/
site.rb:310:in `block in load_items'
  ... 35 more lines omitted. See full crash log for details.

If you believe this is a bug in nanoc, please do report it at
-> https://github.com/ddfreyne/nanoc/issues/new <-

A detailed crash log has been written to ./crash.log. 
```

明显的错误消息很明显，但我实际上无法弄清楚如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:11:45.483

好的，问题似乎出在我使用的静态数据源插件上。我删除了`static.rb`文件`libs/`夹中的文件，结果发现它现在已内置到最新版本的 nanoc (3.5.x) 中，所以我什至不需要它。

问题没有回答，但无关紧要。

# cascade - 是否可以在 Tiki 中级联 Wiki 页面？

> ID：14913332
> 
> 赞同：0
> 
> 时间：2013-02-16T17:56:37.097
> 
> 标签：cascade, tiki-wiki

我正在 Tiki 中记录对象，并希望在当前 Wiki 页面的末尾级联所有后代对象（Wiki 页面）。

到目前为止，我只看到了如何创建指向 Wiki 页面的链接，但我想嵌入完整的 wiki 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:10:08.267

您可以使用结构功能在 Tiki 中级联 wiki 页面。见[http://doc.tiki.org/Structures](http://doc.tiki.org/Structures)

要显示结构的目录，您可以使用 {toc} 语法。

要将完整的 wiki 页面“嵌入”到另一个页面，您可以使用 INCLUDE wikiplugin：[http ://doc.tiki.org/PluginInclude](http://doc.tiki.org/PluginInclude)

# html - 保存部分表单进度

> ID：14913333
> 
> 赞同：0
> 
> 时间：2013-02-16T17:56:37.777
> 
> 标签：html, css

我即将开始编写一个相当长的 HTML 表单。我真的很想看到我的客户可以选择“保存并稍后完成”部分表格。我希望他们能够启动表单，决定他们需要稍后完成其余部分，然后保存并稍后返回，使用用户名/密码登录以完成表单并最终完整提交。

很抱歉，上面的问题听起来好像我希望有人为我建造这个。最近几周我开始学习 PHP。我正在寻找建议和想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:15:38.297

像[http://garlicjs.org/](http://garlicjs.org/)这样的 javascript 会做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:03:59.417

您需要将数据永久保存在文件或数据库中，然后在用户返回时将其提取。使用用户名和密码的登录功能是一个涉及众多主题的复杂问题。我并不真正了解您的编码背景，但从您的问题来看，您似乎应该研究学习编程基础和概念。[PHP](http://www.php.net)是一种非常流行的 Web 编程语言，通常使用此功能。

# google-chrome-extension - Chrome 的入门示例未运行。

> ID：14913336
> 
> 赞同：1
> 
> 时间：2013-02-16T17:57:10.577
> 
> 标签：google-chrome-extension

我正在尝试构建一个 Chrome 扩展来运行一些 JSON 帖子，但我什至在开始时遇到了麻烦。

当我使用[http://developer.chrome.com/trunk/extensions/getstarted.html](http://developer.chrome.com/trunk/extensions/getstarted.html)上的示例时，我得到一个弹出窗口但没有图片。

我已经运行了 Charles [http://www.charlesproxy.com/](http://www.charlesproxy.com/)并且我确定没有提出任何请求。

这里发生了什么？这个教程过时了吗？谁能解释我需要做些什么才能让这个示例运行或指出我正在工作的入门教程的方向？

总的来说，我真正想做的是将 JSON 发布到 API，然后在弹出窗口中显示响应。如果有人有一个非常基本的例子，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:38:09.890

popup.js 中有一个错误。本教程提供的脚本现在使用`this.kittensOnFlickr_`而不是`this.searchOnFlickr_`在`requestKittens`函数中。

替换`requestKittens`为以下内容：

```
requestKittens: function() {
  var req = new XMLHttpRequest();
  req.open("GET", this.searchOnFlickr_, true);
  req.onload = this.showPhotos_.bind(this);
  req.send(null);
} 
```

你应该很高兴。

# c++ - 如何检查具有电子邮件格式的用户输入字符串

> ID：14913341
> 
> 赞同：-1
> 
> 时间：2013-02-16T17:57:45.570
> 
> 标签：c++

如何检查用户是否输入了电子邮件格式的字符串，

例如`Ted@Ted.com`

我想检查是否有“@”和“。”

除了使用 ispunct 函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:00:37.317

您可以使用`std::string::find_first_of`.

```
// Check that the string contains at least one '@' and a '.'
// after it. This will have lots of false negatives (but no
// false negative), like "a@b@c.com" or "toto@com.".
bool is_email(std::string const& address) {
    size_t at_index = address.find_first_of('@', 0);
    return at_index != std::string::npos 
        && address.find_first_of('.', at_index) != std::string::npos;
} 
```

但通常解析电子邮件地址的免责声明：这是一个非常复杂的主题，因为有效的电子邮件地址是一头奇怪的野兽。检查[RFC 5322](http://www.faqs.org/rfcs/rfc5322.html)以了解什么是有效地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:02:07.370

使用正则表达式，您可以评估

```
^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$ 
```

它几乎匹配**所有**合法的电子邮件地址。看到[这个问题](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

如果您使用的是 C++11，则可以使用`std::regex`，否则您必须使用 3rdparty 正则表达式解析器，例如`boost::regex`

# visual-studio-2012 - 使用 Visual Studio 2012 签署 Click Once 应用程序组件

> ID：14913343
> 
> 赞同：0
> 
> 时间：2013-02-16T17:58:10.083
> 
> 标签：visual-studio-2012, certificate, code-signing, assembly-signing

我想使用 Microsoft 的 Click-Once 技术部署一个 Visual Studio 2012 项目。对于开发，我使用 Windows 7 机器并以普通用户（而不是 root）身份运行 Visual Studio。对于部署，我也使用 Visual Studio 2012。

我的问题是当用户执行 Click Once Deployment File 时，PC 上的安全软件会将我的软件标记为未知，并要求用户停止执行。为了避免这种情况，我订购了一个 Trustcenter 证书并将其用于签署 Click Once 部署文件，效果很好。直到在安装过程中下载程序集。Visual Studio 也有一个用于签署程序集的选项，但起初它给出了一个导入错误。在我修复它在编译过程中给我一个错误之后，它无法签署程序集。因此我使用了构建后选项。在那里我插入了一个 signtool 命令，效果很好。但是在部署时，签名丢失了。

我已经给 Trustcenter Support 打了 3 次电话，他们在对证书进行分析后对我说，这看起来相当不错。但是，当我想将它导入 Visual Studio 时，由于程序集签名选项，Visual Studio 会发出警报，即无法找到证书。

有谁知道，如何部署带有签名程序集的 Click Once 应用程序？（Visual Studio 2012 的最佳案例）

最好的问候，
Clemens

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:21:37.590

好吧，经过几个小时的尝试错误方法，我解决了这个问题。基本上不应设置“导出路径中的所有证书”选项（就像 Trustcenter 支持告诉我的那样）。如果没有这个选项，我会收到来自 Visual Studio 的错误，这可以通过一些 OpenSSL 命令解决：
`openssl pkcs12 -in cert.pfx -out backup.key`
`openssl pkcs12 -export -out out.pfx -keysig -in backup.key`
out.pfx 可以毫无问题地使用。

# node.js - 运行节点命令作为 grunt 驱动的 QUnit 测试的一部分

> ID：14913344
> 
> 赞同：2
> 
> 时间：2013-02-16T17:58:18.673
> 
> 标签：node.js, qunit, gruntjs

我正在使用 grunt 来打包我的 jQuery 插件。作为 QUnit 测试的一部分，我需要在测试开始之前运行 node 命令以获得一致的结果（就像`process.env.TZ = 'Europe/London'`我的插件处理时区一样，因此不同时区的结果会有所不同）。

所以我的问题是：如何在 qunit 测试中运行特定于节点的命令？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:11:16.563

创建您自己的 grunt 任务并从其中调用 qunit 任务：

```
var exec = require('child_process').exec;

grunt.registerTask('qunit-plus', 'Custom qunit task', function() {
    exec('/usr/bin/mycmd', function(err, stdout, stderr) {
        grunt.task.run('qunit');
    });
}); 
```

然后调用它：

```
$ grunt qunit-plus 
```

注意：未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:27:15.190

好吧，经过更多研究，我遇到了 grunt-env @ [https://github.com/onehealth/grunt-env](https://github.com/onehealth/grunt-env)

这允许在 gruntfile 中定义不同的环境任务，例如

```
env: {
    setTZ : {
        TZ : 'Europe/London'
    }
} 
```

这将定义`env:setTZ`设置时区的任务。是的，虽然设置时区可能会出现问题，但建议似乎是只要您只执行一次，就可以了：[https ://groups.google.com/d/msg/nodejs/rt8EFR6gdi8/i2Fdp2vDPFQJ](https://groups.google.com/d/msg/nodejs/rt8EFR6gdi8/i2Fdp2vDPFQJ)

> 您可以只设置一次 TZ，不会获取进一步的更改。

幸运的是，这对我的用例来说已经足够了，而且对我来说也很好用。

# mysql - 显示表格中的所有列，除了一些

> ID：14913345
> 
> 赞同：0
> 
> 时间：2013-02-16T17:58:19.097
> 
> 标签：mysql, sql

这是我的声明：

```
SHOW FULL COLUMNS IN tbl_name WHERE NOT (
FIELD = 'col1' OR FIELD =  'col2'
) 
```

我想将它减少到这样的东西，以便 PHP 代码更高效：

```
SHOW FULL COLUMNS IN tbl_name WHERE NOT (
FIELD = 'col1','col2'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:12:13.107

```
select  COLUMN_NAME
from    INFORMATION_SCHEMA.COLUMNS
where   TABLE_NAME = 'tbl_name'
        and COLUMN_NAME not in ('col1', 'col2') 
```

# php - 摆脱mysql中的撇号？

> ID：14913349
> 
> 赞同：0
> 
> 时间：2013-02-16T17:58:31.820
> 
> 标签：php, html, mysql

有人可以帮忙吗，我有一个文本区域表单，用户可以输入内容并提交，然后内容存储在 mysql 表中。

我遇到的问题是，每当用户键入撇号时，它都会插入 / 并且我想摆脱 /。

我的专栏是 utf8_general_ci 格式（长文本）我什至在这里使用了正确的格式类型吗？

这也是我的代码也许我需要在mysql中放一些东西？

请有人告诉我我哪里出错了谢谢。

html表单：

```
<form action="includes/changebio.php" method="post" id="form1">         
 <textarea id="bio" style="width: 448px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 120px;
    resize: none; 
    border: hidden;" textarea name="bio" data-id="bio" maxlength="710"><?php echo htmlspecialchars($profile['bio']); ?></textarea>
<input type="image" src="assets/img/icons/save-edit.png"class="bio-submit" name="submit" value="submit" id="submit"/>
</form> 
```

mysql:

```
<?php ob_start(); ?>
<?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');
?>
<?php 
session_start();
include '_config/connection.php'; 
$bio = $_POST['bio'];
$result = mysql_query("SELECT bio FROM ptb_profiles WHERE id=".$_SESSION['user_id']."");
if(!$result) 
{ 
echo "The username you entered does not exist"; 
} 
else 
if($bio!= mysql_result($result, 0)) 
{ 
echo ""; 
    $sql=mysql_query("UPDATE ptb_profiles SET bio ='".mysql_real_escape_string($bio)."' WHERE id=".$_SESSION['user_id'].""); 
}
header("Location: {$_SERVER['HTTP_REFERER']}");
?>
<?php ob_end_flush() ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:02:26.273

有2种可能的情况

1.  你有魔术引号。[关闭它们。](http://www.php.net/manual/en/security.magicquotes.disabling.php)
2.  某种**Sanitize Them All**功能在您的所有输入数据上运行。摆脱它。

# java - 针对时间戳列的 Oracle SQL where 子句

> ID：14913354
> 
> 赞同：0
> 
> 时间：2013-02-16T17:58:43.213
> 
> 标签：java, sql, oracle

我正在执行以下 SQL 查询，但即使表中存在与所选日期对应的条目，该查询也不返回任何行。

```
 Date getdatetemp =  datechooser.getDate();     // getting the date selected by user
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
    java.sql.Date extdate=new java.sql.Date(getdatetemp.getTime());
    String getdate=sdf.format(extdate);
    String sql="SELECT * from registration_timestamp where timestamp_registered=TO_DATE('"+getdate+"','dd/MM/yyyy')";
    PreparedStatement pst=connection.prepareStatement(sql);
    ResultSet res=pst.executeQuery();  
    pst.close();
    res.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:04:24.940

[了解prepared statements](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)，并使用本机类型而不是字符串：

```
java.sql.Date extDate = new java.sql.Date(getDateTemp.getTime());
String sql = "SELECT * from registration_timestamp where timestamp_registered=?";
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setDate(1, extDate);
ResultSet rs = stmt.executeQuery(); 
```

也就是说，由于您在谈论时间戳，并且时间戳的精度可以达到纳秒，所以问题可能是存储在数据库中的日期除了日期部分之外还有时间部分：

```
16/02/2013 != 16/02/2013 18:54:32 123421 
```

如果是这种情况（看起来确实如此），请将所选日期与截断为日期的时间戳进行比较：

```
select * from registration_timestamp where trunc(timestamp_registered) = ? 
```

请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions201.htm#i79761](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions201.htm#i79761)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:16:53.787

当您的列是日期时间并且您想要搜索日期范围时，您可以这样做：

```
select whatever
from yourtables
where yourdatefield >= DateA
and yourdatefield < the day after DateB 
```

将此逻辑与@JBNizet 的答案结合起来，鲍勃是你的叔叔。

# c# - 查看移除 USB 设备的确切时间 Windows 7

> ID：14913360
> 
> 赞同：0
> 
> 时间：2013-02-16T17:59:19.817
> 
> 标签：c#, windows-7, usb

一点背景知识，我正在尝试校准一个 USB 加速度计，它在从 USB 驱动器中取出的那一刻开始计时，我怀疑计时有点不对，这导致了我的问题......

有没有办法查看设备被移除的确切时间？

我可以以毫秒为单位处理时间，这是可以使用 c# 以编程方式解决的问题，还是 Windows 7 中某处有日志？我愿意接受任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:01:56.323

您可以编写一个简单的 C# 应用程序并订阅系统的设备节点更改的 Win API 通知。

API 函数[RegisterDeviceNotification](http://msdn.microsoft.com/en-us/library/aa363431%28VS.85%29.aspx)允许您订阅您的应用程序或服务，以便在设备发生更改（即热插拔或拔出）时由 Windows 通知。

您的 C# 应用程序必须在启动时调用 register 方法，然后应用程序必须在应用程序的 WndProc中处理[WM_DEVICECHANGED事件。](http://msdn.microsoft.com/en-us/library/aa363480%28VS.85%29.aspx)根据您选择编写 WPF 应用程序还是 WinForms 应用程序，访问 WndProc 的方式会略有不同。

WM_DEVICECHANGED 消息将 WParam 设置为特定值，具体取决于设备是刚刚插入、正在移除还是完全移除。在您的情况下，您可能希望使用[DBT_DEVICEREMOVECOMPLETE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363208%28v=vs.85%29.aspx)消息。

然后，您可以让您的 C# 应用程序记录设备被移除的*确切时间。*请注意，时间戳的准确性将取决于实际移除设备与您的应用程序接收和处理通知之间存在的延迟。没有可用的系统级时间戳，因此必须这样做。但它应该在*“几”*毫秒内准确。

# assembly - NASM 中的冒泡排序

> ID：14913361
> 
> 赞同：-3
> 
> 时间：2013-02-16T17:59:22.690
> 
> 标签：assembly, nasm

我在 NASM 中编写了一个冒泡排序程序。但它显示分段错误。我试图生成以下 c 代码的汇编版本：

```
 for(k=0;k<n;k++){
       ptr=0;
       while(ptr<=n-k){

          if(data[ptr]>data[ptr+1])
             do swap
          ptr++;  
       }
     } 
```

以下 NASM 代码是：

```
 section .data
      msg db "%d"
      four dd 4
      msga db "%d ",0

    section .bss
      arr resd 8

    section .text
      global main
      extern printf,scanf
    main:
      xor ecx,ecx
    lp:
      mov ebx,arr     ;; from this line to jnz lp is using for taking 8 inputs
      mov eax,ecx
      mul dword[four]
      add ebx,eax
      pusha

      push ebx
      push msg
      call scanf
      add esp,8
      popa

      inc ecx
      cmp ecx,8
      jnz lp

      mov ecx,0   ;; sorting replication of the above c program is starting
      mov ebx,7   ;; outerloop will execute from 0 to 7
    outerLoop:  
      mov eax,0   ;; it sets ptr=0
    .innerLoop:
      mov edx,8
      sub edx,ecx
      cmp eax,edx  ;; its using for cheking ptr<=n-k

      push ebx
      push ecx
      push edx
      add esp,12

      jle .task
      pop edx
      pop ecx
      pop ebx
      inc ecx

      cmp ecx, ebx ;; its using for cheking whether k is in between 0 to 7
      jl outerLoop

      xor ecx,ecx
      jmp lp1
  .task:
      mov ebx,dword[arr+eax*4]   ;; its using to get data[ptr]
      mov ecx,eax
      push eax
      add esp,4

      add ecx,1
      mov edx,dword[arr+ecx*4]   ;; its using to get data[ptr+1]

      cmp ebx,edx
      jl .activity
      xchg ebx,edx
      mov dword[arr+eax*4],ebx
      mov dword[arr+ecx*4],edx
 .activity:
     pop eax
     pop edx
     pop ecx
     pop ebx

     inc eax
     jmp .innerLoop

 lp1:                 ;; its using for print the output
   mov ebx,arr
   mov eax,ecx

   mul dword[four]
   add ebx,eax
   pusha

   push dword[ebx]
   push msga
   call printf
   add esp,8
   popa
   inc ecx
   cmp ecx,8
   jne lp1 
```

你能帮我找出我的错误吗？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:46:52.943

你为什么要进行冒泡排序？从更简单的事情开始。跑之前先走。

看看内部循环，你有：

```
 push ebx
  push ecx
  push edx
  add esp,12

  jle .task 
```

您将这 3 个寄存器推入堆栈并立即删除它们（您甚至没有将它们弹回各自的寄存器，因此不仅堆栈不平衡，而且寄存器包含错误的值）。既然你用 s “清理了堆栈” `add esp, 12`，只要你有你`pop`的 s，堆栈就是错误的。

# svn - 无法使用 Sonatype Nexus 为 java.net 上的 maven 项目准备发布

> ID：14913368
> 
> 赞同：0
> 
> 时间：2013-02-16T17:59:39.957
> 
> 标签：svn, maven, nexus, sonatype

无法使用 OSS 在 java.net 上为 maven 项目准备发布

我按照说明进行操作

[http://java.net/projects/maven2-repository/pages/MigrationAndCleanupRelatedDocumentation#Stage_a_Release](http://java.net/projects/maven2-repository/pages/MigrationAndCleanupRelatedDocumentation#Stage_a_Release)

```
mvn release:clean 
```

没关系

```
mvn release:prepare 
```

似乎没问题，在此过程中，它会询问我接受的 gpg 密码（我已在下面的输出中将其更改为密码）

但最后它失败了：

```
svn: OPTIONS of 'https://svn.java.net/svn/jaudiotagger/tags':
 authorization failed: Could not authenticate to server: 
 rejected Basic challenge (https://svn.java.net) 
```

这是更多的输出

```
 GPG Passphrase: *password
*gpg: WARNING: "--no-use-agent" is an obsolete option - it has no effect
    gpg: WARNING: "--no-use-agent" is an obsolete option - it has no effect
    gpg: WARNING: "--no-use-agent" is an obsolete option - it has no effect
    gpg: WARNING: "--no-use-agent" is an obsolete option - it has no effect
    gpg: WARNING: "--no-use-agent" is an obsolete option - it has no effect
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESSFUL
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 8 minutes 21 seconds
    [INFO] Finished at: Sat Feb 16 17:48:05 GMT 2013
    [INFO] Final Memory: 42M/282M
    [INFO] ------------------------------------------------------------------------
[INFO] Checking in modified POMs...
[INFO] Executing: cmd.exe /X /C "svn --non-interactive commit --file C:\Users\MESH\AppData\Local\Temp\maven-scm-1694916625.commit --targets C:\Users\MESH\AppDat
a\Local\Temp\maven-scm-4871080818615227594-targets"
[INFO] Working directory: c:\Code\jthink\opensrc\jaudiotagger
[INFO] Tagging release with the label 2.0.4...
[INFO] Executing: cmd.exe /X /C "svn --non-interactive copy --file C:\Users\MESH\AppData\Local\Temp\maven-scm-1619719744.commit --revision 1106 https://svn.java
.net/svn/jaudiotagger/tags/2.0.4 https://svn.java.net/svn/jaudiotagger/tags/2.0.4"
[INFO] Working directory: c:\code\jthink\opensrc\jaudiotagger
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Unable to tag SCM
Provider message:
The svn tag command failed.
Command output:
svn: OPTIONS of 'https://svn.java.net/svn/jaudiotagger/tags': authorization failed: Could not authenticate to server: rejected Basic challenge (https://svn.java
.net) 
```

**更新** 所以阅读链接中的评论，据说你可以将用户名和参数作为密码传递，所以我尝试使用

```
 mvn release:prepare -Dusername=paultaylor
    -Dpassword=xxxxxx -Dgpg.passphrase=xxxxxx 
```

以及传递给 svn 命令的参数，如下所示，但它仍然以同样的方式失败。

```
[INFO] Checking in modified POMs...
[INFO] Executing: cmd.exe /X /C "svn --username paultaylor --password ***** --no-auth-cache --non-interactive commit --file C:\Users\MESH\AppData\Local\Temp\mav
en-scm-264158387.commit --targets C:\Users\MESH\AppData\Local\Temp\maven-scm-6229037003047930707-targets"
[INFO] Working directory: c:\Code\jthink\opensrc\jaudiotagger
[INFO] Tagging release with the label jaudiotagger-2.0.4...
[INFO] Executing: cmd.exe /X /C "svn --username paultaylor --password ***** --no-auth-cache --non-interactive copy --file C:\Users\MESH\AppData\Local\Temp\maven
-scm-617643506.commit --revision 1113 https://svn.java.net/svn/jaudiotagger/tags/jaudiotagger-2.0.4 https://svn.java.net/svn/jaudiotagger/tags/jaudiotagger-2.0.
4"
[INFO] Working directory: c:\code\jthink\opensrc\jaudiotagger
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Unable to tag SCM
Provider message:
The svn tag command failed.
Command output:
svn: OPTIONS of 'https://svn.java.net/svn/jaudiotagger/tags': authorization failed: Could not authenticate to server: rejected Basic challenge (https://svn.java
.net) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:58:21.460

我最终发现了问题，问题出在我的 pom 中

我有

```
 <connection>scm:svn:http://svn.java.net/svn/jaudiotagger/trunk
    </connection>
    <developerConnection>scm:svn:https://svn.java.net/svn/jaudiotagger
        /trunk</developerConnection> 
```

当我需要的时候

```
 <connection>scm:svn:http://svn.java.net/svn/jaudiotagger~svn/trunk
    </connection>
    <developerConnection>scm:svn:https://svn.java.net/svn/jaudiotagger~svn
         /trunk</developerConnection> 
```

# python - 在 Python 中与 Rar.exe 通信

> ID：14913369
> 
> 赞同：0
> 
> 时间：2013-02-16T17:59:51.517
> 
> 标签：python, subprocess, interactive, rar, pexpect

我想从 Python 脚本创建一个 RAR 文件。我需要与 Rar.exe 通信，因为我只想要多卷存档集中的第一个 RAR 卷，仅此而已。确保在每卷后都会询问该`-vp`开关。`Create next volume ? [Y]es, [N]o, [A]ll`第一次出现这个问题时，我想回答“否”。我该如何做到这一点？

我一直在阅读并尝试了很多东西，我发现这样的事情可以用[pexpect](http://www.noah.org/wiki/Pexpect)来完成。我一直在尝试两种不同的 Windows 端口：[wexpect](https://web.archive.org/web/20090205040528/http://sage.math.washington.edu:80/home/goreckc/sage/wexpect/)和[winpexpect](https://github.com/geertj/winpexpect)。结果是我的脚本会挂起。没有创建 RAR 文件。这是我的代码：

```
import wexpect
import sys

rarexe = "C:\Program Files\WinRAR\Rar.exe"
args = ['a', '-vp', '-v2000000b', 'only_first.rar', 'a_big_file.ext']

child = wexpect.spawn(rarexe, args)
child.logfile = sys.stdout
index = child.expect(["Create next volume ? [Y]es, [N]o, [A]ll", 
        wexpect.EOF, wexpect.TIMEOUT], timeout=10)
if index == 0:
     child.sendline("N")
else:
     print('error') 
```

也欢迎其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-29T13:09:10.313

我遇到了同样的问题，因为网络上有几个（错误的）版本的 wexpect。

查看[我的变体](https://github.com/raczben/wexpect/blob/master/wexpect.py)，它是一个实例的副本，它对我有用。

这可以使用安装

`pip install wexpect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-15T22:07:34.017

我的问题的答案有两个部分。

正如 betontalpfa 所指出的，我必须使用他[的 wexpect 版本](https://github.com/raczben/wexpect)。它可以轻松安装：

```
pip install wexpect 
```

[Pexpect](https://pexpect.readthedocs.io/en/stable/api/pexpect.html#pexpect.spawn.expect_exact)的`expect_exact`文档解释说它在列表中使用纯字符串匹配而不是编译的正则表达式模式。这意味着必须正确转义参数或必须使用方法而不是. 它给了我这个工作代码：`expect_exact``expect`

```
import wexpect
import sys

rarexe = "C:\Program Files\WinRAR\Rar.exe"
args = ['a', '-vp', '-v2000000b', 'only_first.rar', 'a_big_file.ext']

child = wexpect.spawn(rarexe, args)
# child.logfile = sys.stdout
rar_prompts = [
        "Create next volume \? \[Y\]es, \[N\]o, \[A\]ll",
        "\[Y\]es, \[N\]o, \[A\]ll, n\[E\]ver, \[R\]ename, \[Q\]uit",
        wexpect.EOF, wexpect.TIMEOUT]
index = child.expect(rar_prompts, timeout=8)

while index < 2:
        # print(child.before)
        if index == 0:
                print("No next volume")
                child.sendline("N")
        elif index == 1:
                print("Overwriting existing volume")
                child.sendline("Y")
        index = child.expect(rar_prompts, timeout=8)
else:
        print('Index: %d' % index)
        if index == 2:
                print("Success!")
        else:
                print("Time out!") 
```

输出给出：

```
Overwriting existing volume
No next volume
Index: 2
Success! 
```

# entity-framework - EF 代码优先模型是否旨在全面描述数据库的结构？

> ID：14913372
> 
> 赞同：4
> 
> 时间：2013-02-16T18:00:08.753
> 
> 标签：entity-framework, ef-code-first, data-migration

对于实体框架代码优先中数据模型的目的，我有点困惑。因为如果 EF 仅使用数据模型（包括数据注释和 Fluent API 中的内容），EF 将自动为您从头开始生成一个数据库`DbContext.OnModelCreating`，我假设数据模型应该完全描述您的数据库的结构，之后您无需修改​​任何基本内容。

但是，我遇到了[这个 Codeplex 问题](http://entityframework.codeplex.com/workitem/57)，其中一位 EF Triage Team 成员建议在数据迁移中添加自定义索引，而不是作为数据模型字段或 Fluent API 代码的注释。

但这是否意味着任何从头开始自动生成数据库的人都不会将这些自定义索引添加到他们的数据库中？假设似乎是，一旦您开始使用数据迁移，您将永远不会再从头开始创建数据库。如果您在一个团队中工作并且新的团队成员安装了新的 SQL Server，该怎么办？您是否希望从其他团队成员那里复制数据库？如果您想开始使用新的 DBMS，比如 Postgres，该怎么办？我认为 EF 的一个很酷的事情是它独立于 DBMS，但是如果你不再能够从头开始创建数据库，你就不能再以独立于 DBMS 的方式来做事。

由于我上面概述的原因，在数据迁移中而不是在数据模型中添加自定义索引不是一个坏主意吗？就此而言，在迁移中而不是在数据模型中添加任何数据库结构更改不是一个坏主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:07:42.887

> EF 代码优先模型是否旨在全面描述数据库的结构？

**不**，它们没有完全描述数据库结构或架构。仍然有一些方法可以使用 EF 完全描述数据库。它们如下：

您可以在 Database 类上使用新的 CTP5`ExecuteSqlCommand`方法，该方法允许对数据库执行原始 SQL 命令。

`SqlCommand`为此目的调用方法的最佳位置是在自定义类`Seed`中已被**覆盖的方法内。**`Initializer`例如：

```
protected override void Seed(EntityMappingContext context)
{
    context.Database.ExecuteSqlCommand("CREATE INDEX IX_NAME ON ...");
} 
```

您甚至可以通过这种方式添加唯一约束。这不是一种解决方法，但将在生成数据库时强制执行。

**或者**

如果您非常需要该属性，那么就在这里

```
[AttributeUsage(AttributeTargets.Property, Inherited = false, AllowMultiple = true)]
public class IndexAttribute : Attribute
{
    public IndexAttribute(string name, bool unique = false)
    {
        this.Name = name;
        this.IsUnique = unique;
    }

    public string Name { get; private set; }

    public bool IsUnique { get; private set; }
} 
```

在此之后，您将有一个初始化程序，您将在您的`OnModelCreating`方法中调用它，如下所示：

```
public class IndexInitializer<T> : IDatabaseInitializer<T> where T : DbContext
{
    private const string CreateIndexQueryTemplate = "CREATE {unique} INDEX {indexName} ON {tableName} ({columnName});";

    public void InitializeDatabase(T context)
    {
        const BindingFlags PublicInstance = BindingFlags.Public | BindingFlags.Instance;
        Dictionary<IndexAttribute, List<string>> indexes = new Dictionary<IndexAttribute, List<string>>();
        string query = string.Empty;

        foreach (var dataSetProperty in typeof(T).GetProperties(PublicInstance).Where(p => p.PropertyType.Name == typeof(DbSet<>).Name))
        {
            var entityType = dataSetProperty.PropertyType.GetGenericArguments().Single();
            TableAttribute[] tableAttributes = (TableAttribute[])entityType.GetCustomAttributes(typeof(TableAttribute), false);

            indexes.Clear();
            string tableName = tableAttributes.Length != 0 ? tableAttributes[0].Name : dataSetProperty.Name;

            foreach (PropertyInfo property in entityType.GetProperties(PublicInstance))
            {
                IndexAttribute[] indexAttributes = (IndexAttribute[])property.GetCustomAttributes(typeof(IndexAttribute), false);
                NotMappedAttribute[] notMappedAttributes = (NotMappedAttribute[])property.GetCustomAttributes(typeof(NotMappedAttribute), false);
                if (indexAttributes.Length > 0 && notMappedAttributes.Length == 0)
                {
                    ColumnAttribute[] columnAttributes = (ColumnAttribute[])property.GetCustomAttributes(typeof(ColumnAttribute), false);

                    foreach (IndexAttribute indexAttribute in indexAttributes)
                    {
                        if (!indexes.ContainsKey(indexAttribute))
                        {
                            indexes.Add(indexAttribute, new List<string>());
                        }

                        if (property.PropertyType.IsValueType || property.PropertyType == typeof(string))
                        {
                            string columnName = columnAttributes.Length != 0 ? columnAttributes[0].Name : property.Name;
                            indexes[indexAttribute].Add(columnName);
                        }
                        else
                        {
                            indexes[indexAttribute].Add(property.PropertyType.Name + "_" + GetKeyName(property.PropertyType));
                        }
                    }
                }
            }

            foreach (IndexAttribute indexAttribute in indexes.Keys)
            {
                query += CreateIndexQueryTemplate.Replace("{indexName}", indexAttribute.Name)
                .Replace("{tableName}", tableName)
                .Replace("{columnName}", string.Join(", ", indexes[indexAttribute].ToArray()))
                .Replace("{unique}", indexAttribute.IsUnique ? "UNIQUE" : string.Empty);
            }
        }

        if (context.Database.CreateIfNotExists())
        {
            context.Database.ExecuteSqlCommand(query);
        }
    }

    private string GetKeyName(Type type)
    {
        PropertyInfo[] propertyInfos = type.GetProperties(BindingFlags.FlattenHierarchy | BindingFlags.Instance | BindingFlags.Public);
        foreach (PropertyInfo propertyInfo in propertyInfos)
        {
            if (propertyInfo.GetCustomAttribute(typeof(KeyAttribute), true) != null)
            return propertyInfo.Name;
        }
        throw new Exception("No property was found with the attribute Key");
    }
} 
```

然后`OnModelCreating`在你的 DbContext 中重载

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    Database.SetInitializer(new IndexInitializer<MyContext>());
    base.OnModelCreating(modelBuilder);
} 
```

将索引属性应用于您的实体类型，使用此解决方案，您可以在同一索引中拥有多个字段，只需使用相同的名称和唯一性。

**或者**

您可以稍后进行迁移。

**注意：** 我从[这里](http://blogs.southworks.net/dschenkelman/2012/08/18/creating-indexes-via-data-annotations-with-entity-framework-5-0/)获取了很多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:15:20.827

问题似乎是在中途添加迁移是否有价值，或者这些是否会导致未来不同机器上的数据库初始化出现问题。

创建的初始迁移还包含存在的整个数据模型，因此通过添加迁移（`enable-migrations`在包管理器控制台中），您实际上是在为您的数据库创建内置机制，以便在以后正确创建其他开发商。

如果您这样做，我建议您修改数据库初始化策略以运行所有现有迁移，以免 EF 启动并使下一个开发人员的数据库不同步。

像这样的东西会起作用：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<YourNamespace.YourDataContext, Migrations.Configuration>()); 
```

所以，不，这本质上不会给未来的工作/开发人员带来问题。请记住，迁移只是变成了对数据库执行的有效 SQL……您甚至可以使用脚本模式来输出根据您创建的迁移中的任何内容进行数据库修改所需的 TSQL。

干杯。

# sockets - 如何处理 java.net.SocketException：调度/重启中打开的文件过多？

> ID：14913373
> 
> 赞同：1
> 
> 时间：2013-02-16T18:00:16.723
> 
> 标签：sockets, scala, future

我有一个方法，它接受一个 url 并返回一个 Promise[Stuff]：

```
def getStuff(url: String): Promise[Stuff] = Http(...).map(...) 
```

我把它称为一个大的（~ 1300 项）字符串列表：

```
Http.promise.all(urls.map(getStuff)).apply 
```

一些承诺正确完成，但大约 50 会导致“java.net.SocketException: Too many open files”。我究竟做错了什么？也许我应该使用其他方式来完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:29:56.693

这是操作系统的限制。

参见[http://wiki.magnolia-cms.com/display/WIKI/Too+Many+Open+Files](http://wiki.magnolia-cms.com/display/WIKI/Too+Many+Open+Files)例如在 linux 上

# xml - 需要使用 XSLT 从 xml 获取特定值

> ID：14913374
> 
> 赞同：0
> 
> 时间：2013-02-16T18:00:17.420
> 
> 标签：xml, xslt

嗨，我有以下示例 xml，我需要从 xml 文档中获取不同的无效电子邮件。我想所有时间项目都像“嵌套异常是：com.sun.mail.smtp.SMTPAddressFailedException：550 5.1.1 <”和“：收件人地址被拒绝：虚拟别名表中的用户未知；” 是恒定的

```
<?xml version = "1.0" encoding = "UTF-8"?>
<root>
    <Error_Message>Error sending mail message. Cause: javax.mail.SendFailedException: Invalid Addresses;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;abcdef@gmail.com>: Recipient address rejected: User unknown in virtual alias table
;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;abcdefgh@gmail.com>: Recipient address rejected: User unknown in virtual alias table
;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;12345678@gmail.com>: Recipient address rejected: User unknown in virtual alias table
;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;12345678@gmail.com>: Recipient address rejected: User unknown in virtual alias table
;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;abcdefgh@gmail.com>: Recipient address rejected: User unknown in virtual alias table
;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;12345678@gmail.com>: Recipient address rejected: User unknown in virtual alias table
;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;12345678@gmail.com>: Recipient address rejected: User unknown in virtual alias table
    </Error_Message>
    <err_mesage>5</err_mesage>
</root> 
```

预期输出为：

```
<root>
<EMAILID>abcdef@gmail.com</EMAILID>
<EMAILID>abcdefgh@gmail.com@gmail.com</EMAILID>
<EMAILID>12345678@gmail.com</EMAILID>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:27:09.923

正如 Martin Honnen 所建议的，analyze-string 在这里是一个不错的选择。但是您的消息格式非常简单，您不需要比 XSLT 1.0 的简单字符串操作函数和递归命名模板更复杂的任何东西。这是一个带有嵌入式注释的 XSLT 1.0 样式表，用于解释发生了什么。

样式表的开头非常传统：

```
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:output method="xml" indent="yes"/> 
```

我们在错误消息中为一些常量文本声明了两个变量（没有特别的原因，只是想避免多次给出这些长常量字符串）：

```
 <xsl:variable name="prefix"
                select="'    com.sun.mail.smtp.SMTPAddressFailedException: 550 5.1.1 &lt;'"/>
  <xsl:variable name="suffix"
                select="'>: Recipient address rejected: User unknown in virtual alias table'"/> 
```

`root`元素自我复制：

```
 <xsl:template match="root">
    <root>
      <xsl:apply-templates/>
    </root>
  </xsl:template> 
```

该`Error_Message`元素将其字符串值传递给命名的模板`extract-email-addresses`，该模板执行其名称所暗示的操作（详细信息如下）。

```
 <xsl:template match="Error_Message">
    <xsl:call-template 
        name="extract-email-addresses">
      <xsl:with-param name="s" 
                      select="string(.)"/>
    </xsl:call-template>
  </xsl:template> 
```

`err_mesage`元素和文本节点被抑制：

```
 <xsl:template match="err_mesage | text()"/> 
```

模板接受一个字符串作为参数，`extract-email-addresses`默认为空字符串。

```
 <xsl:template name="extract-email-addresses">
    <xsl:param name="s" select="''"/> 
```

我们将一次咬掉一根绳子`s`，处理我们咬掉的部分，然后重复其余部分。所以我们要做的第一件事就是检查我们是否完成了。如果`$s`是空字符串，则无事可做；我们停止递归并允许堆栈弹出。

```
 <xsl:choose>
      <xsl:when test="$s = ''">
        <!--* end of string, we are done. *-->
      </xsl:when> 
```

当字符串不为空时，我们`$s`在第一个换行符处拆分字符串，将两部分分配给变量`$s1`和`$rest`：

```
 <xsl:otherwise>
        <xsl:variable name="s1" 
            select="substring-before($s,'&#xA;')"/>
        <xsl:variable name="rest" 
            select="substring-after($s,'&#xA;')"/> 
```

现在我们寻找这条线可以采取的各种形式。错误消息中的大多数行都是要忽略的样板：

```
 <xsl:choose>
          <xsl:when test="$s1 = 'Error sending mail message. Cause: javax.mail.SendFailedException: Invalid Addresses;'">
            <!--* this line is of no 
                * interest, continue *-->    
          </xsl:when>
          <xsl:when test="$s1 = '  nested exception is:'">
            <!--* skip this line *-->    
          </xsl:when>
          <xsl:when test="$s1 = ';'">
            <!--* skip this line *-->    
          </xsl:when>
          <xsl:when test="$s1 = ''">
            <!--* skip this line *-->    
          </xsl:when> 
```

当我们看到以 SMTPAddressFailedException 的标签开头并以关于拒绝收件人地址的样板文件结尾的行时，我们将出现在前缀之后和后缀之前的子字符串，并将其包装在一个`EMAILID`元素中：

```
 <xsl:when test="starts-with($s1,$prefix)
                          and
                          contains($s1,$suffix)">
            <EMAILID>
              <xsl:value-of select="
                substring-before(
                  substring-after($s1,$prefix),
                  $suffix)
                "/>
            </EMAILID>
            <xsl:text>&#xA;</xsl:text>
          </xsl:when> 
```

如果我们看到任何其他形式的线，那么输入不是预期的，所以我们发出一条诊断消息并继续：

```
 <xsl:otherwise>
            <xsl:message>Unrecognized line: |<xsl:value-of
              select="$s1"/>|</xsl:message>
          </xsl:otherwise>
        </xsl:choose> 
```

无论我们在第一行做了什么，我们现在递归处理字符串中的其余行：

```
 <xsl:call-template name="extract-email-addresses">
          <xsl:with-param name="s" select="$rest"/>
        </xsl:call-template>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

XSLT 2.0 的分析字符串指令当然会比这更紧凑，而且 XSLT 2.0 的正则表达式使得做复杂的事情比 XSLT 1.0 库更方便。（但是如果您知道如何使用分析字符串，您就不会问您的问题。XSLT 1.0 中较小的库和语言的一个优点是，有时用 1.0 解决问题比理解更多问题要快XSLT 2.0 的复杂结构以及如何将它们应用于一个简单的问题。当然，这是关于小型和大型语言的普遍事实。）

应用于您显示的输入，刚刚列出的样式表几乎完全生成了您显示的输出：

```
<?xml version="1.0"?>
<root><EMAILID>abcdef@gmail.com</EMAILID>
<EMAILID>abcdefgh@gmail.com</EMAILID>
<EMAILID>12345678@gmail.com</EMAILID>
<EMAILID>12345678@gmail.com</EMAILID>
<EMAILID>abcdefgh@gmail.com</EMAILID>
<EMAILID>12345678@gmail.com</EMAILID>
<EMAILID>12345678@gmail.com</EMAILID>
</root> 
```

它不包括 abcdefgh@gmail.com@gmail.com 的行；我猜想这可能是问题中的剪切/粘贴错误。

它也不会检查给定行中的电子邮件地址是否已经发出；如果这在实践中是必不可少的，我希望您很清楚如何传递包含迄今为止提取的所有电子邮件地址的第二个参数（由空格或 U+A0 或您喜欢的任何字符分隔，不能出现在电子邮件中address) 并在发出 EMAILID 元素之前使用它来测试重复项。

# ios - UIWebView 和 NSURLConnection 共享 cookie 存储吗？

> ID：14913377
> 
> 赞同：24
> 
> 时间：2013-02-16T18:00:38.010
> 
> 标签：ios, objective-c, google-app-engine, uiwebview, nsurlconnection

我正在构建一个使用 Google App Engine 作为后端的 iOS 应用程序。Google 提供了一个存储身份验证 cookie 的 HTML 登录站点。如果我在 UIWebView 中访问该站点，并且用户登录，这些 cookie 是否会存储在向同一站点发出请求时将被 NSURLConnection 拾取的存储空间中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-13T23:08:22.837

UIWebView 的 cookie 将存储在沙盒 cookie 存储中，可通过`NSHTTPCookieStorage sharedHTTPCookieStorage]`. 你可以通过这种方式在 NSURLConnection 中使用这个 cookie 存储：

```
NSArray *cookies = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookiesForURL:[NSURL URLWithString:@"__YOUR_URL__"]];
NSDictionary *headers = [NSHTTPCookie requestHeaderFieldsWithCookies:cookies];
[request setAllHTTPHeaderFields:headers]; //A previously created NSMutableURLRequest 
```

现在您可以正常在 NSURLConnection 中使用 NSURLRequest 了，它会在 UIWebView 中发送登录后创建的 cookie

# sql - 批量更新表记录并审核

> ID：14913379
> 
> 赞同：0
> 
> 时间：2013-02-16T18:00:47.187
> 
> 标签：sql, database, oracle, batch-processing

考虑这张表：

表：订单列：id、order_num、order_date、order_status

该表有 100 万条记录。我想将 order_status 的值更新为“5”，以获取我将从输入文本文件中读取的一堆（大约 10,000 个）order_num。

```
My SQL could be:
(A) update ORDER set order_status=5 where order_num in ('34343', '34454', '454545',...)
OR
(B) update ORDER set order_status=5 where order_num='34343' 
```

我可以多次循环这个更新，直到我完成了我的 10,000 个订单更新。（另请注意，我几乎没有像 ORDER_ITEMS 这样的 ORDER 子表，其中必须更新类似的状态并审核信息）

我的问题是：
我如何在单独的 ORDER_AUDIT 表中审核此更新：
Order_Num：34343 - 已**成功更新**
Order_Num：34454 -**未找到订单**
Order_Num：454545 - 已**成功更新**
Order_Num：45457 -**未找到订单**

如果我像 (A) 那样进行批量更新，我无法在订单级别进行审计。
如果我在 (B) 中的时间更新时选择单一订单，我将不得不循环 10,000 次——这可能很慢——但在这种情况下，我可以在订单级别进行审计。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:56:19.623

首先，在您的“输入文本文件”上构建一个外部表。这样您就可以运行一个简单的单个 UPDATE 语句：

```
update ORDER 
set order_status=5 
where order_num in ( select col1 from ext_table order by col1) 
```

整洁高效。（对子查询进行排序是可选的：它可能会提高更新的性能，但关键是，我们可以将外部表视为常规表，并对其使用完整的 SELECT 语法。） [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e22490/et_concepts.htm#SUTIL011)。

其次，使用 RETURNING 子句捕获命中。

```
update ORDER 
set order_status=5 
where order_num in ( select col1 from ext_table order by col1)
returning order_num bulk collect into l_nums; 
```

`l_nums`在这个上下文中是一个编号类型的 PL/SQL 集合。RETURNING 子句只会为您提供更新行的所有 ORDER_NUM 值。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/tuning.htm#LNPLS899)。

如果将 for 的类型声明`l_nums`为[SQL 嵌套表对象](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_type.htm#LNPLS01375)，则可以在进一步的 SQL 语句中使用它进行审计：

```
 insert into order_audit 
 select 'Order_Num: '||to_char(t.column_value)||' - Updated Succesfully'    
 from table ( l_nums ) t
 /

 insert into order_audit 
 select 'Order_Num: '||to_char(col1)||' - Order Not Found'    
 from ext_table 
 minus 
 select * from table ( l_nums ) 
 / 
```

* * *

性能说明：

您没有说输入文本文件中有多少行将匹配。也许您不知道（实际上在重新阅读时并不清楚 10,000 是文件中的行数还是匹配的行数）。Pl/SQL 集合使用私有会话内存，因此非常大的集合可能会破坏 PGA。但是，您应该能够应付一万个 NUMBER 实例而不会眨眼。

我的解决方案确实需要您读取外部表两次。这应该不是问题。而且它肯定比动态组装一千个数字的一​​百个 IN 子句并循环遍历每个子句要*快得多。*

请注意，更新通常是人类已知的最慢的批量操作。有一些方法可以加快它们的速度，但这些方法可能会涉及很多。但是，如果这是您经常想要做的事情并且性能成为一个症结，您应该[阅读这篇 OraFAQ 文章](http://www.orafaq.com/node/2450 "8 种批量更新方法比较")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:21:02.570

使用合并。首先将数据加载到一个名为 ORDER_UPD_TMP 的临时表中，其中只有一个列 ID。您可以使用 SQLDeveloper 导入功能来做到这一点。然后使用 MERGE 来更新您的基表：

```
MERGE INTO ORDER b
USING (
  SELECT order_id
  FROM ORDER_UPD_TMP 
) e
ON (b.id = e.id)
WHEN MATCHED THEN
  UPDATE SET b.status = 5 
```

当记录不匹配时，您还可以使用不同的状态进行更新。查看文档以获取更多详细信息：

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T21:08:11.503

我认为最好的方法是：

*   首先将文件导入数据库
*   然后在一个事务中执行少量 SQL UPDATE/INSERT 查询以更新`status`所有订单并创建审计记录。

# asp.net - 为什么在客户端通过 '<%=controlid.ClientID%>' 格式访问 asp.net 控件

> ID：14913381
> 
> 赞同：0
> 
> 时间：2013-02-16T18:01:03.183
> 
> 标签：asp.net, html, rendering

为什么在客户端通过 '<%=controlid.ClientID%>' 格式访问 asp.net 控件。

而 html 控件是通过它们的 id 直接访问的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:03:57.827

因为默认情况下，ASP.NET Web 控件`ClientID`是动态生成的。如果您想以与 HTML 控件相同的方式访问它，可以`ClientIDMode`将`Static`.

[http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

# php - 如何在 MySQL 中按喜欢/不喜欢排序评论

> ID：14913385
> 
> 赞同：0
> 
> 时间：2013-02-16T18:01:21.150
> 
> 标签：php, mysql, sql

在我的网站上，人们可以点赞或不看评论。为此，我使用两个表：

```
$sql = "CREATE TABLE content
(
id INT NOT NULL AUTO_INCREMENT, 
PRIMARY KEY(id),
content TEXT NOT NULL,
date date,
time time
)"; 
```

和

```
$sql2 = "CREATE TABLE ratings 
(
rating_id INT AUTO_INCREMENT PRIMARY KEY NOT NULL ,
rating VARCHAR (10) NOT NULL ,
id INT NOT NULL ,
ip VARCHAR (50) NOT NULL
)"; 
```

存储在评级中的数据如下：

```
Comment ID   like/dislike    user IP
1            l               86.42.173.83
1            d               86.42.173.43
2            l               86.42.173.79
2            l               86.42.173.34
2            d               86.42.173.22 
```

我遇到的问题是，我发现创建一个 SQL 语句来根据评论的点赞数对评论进行排序非常困难。

如果有人对如何做到这一点有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:13:35.853

如果您将喜欢存储为整数而不是字母会更容易。

我使用案例语句添加了喜欢并按评论分组。

```
SELECT C.content, 
    SUM(CASE WHEN R.rating = 'l' THEN 1 ELSE -1 END) AS overallRating
FROM content C
LEFT JOIN ratings R ON R.id = C.id
GROUP BY C.content
ORDER BY overallRating 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:08:42.983

像这样的东西会起作用

```
select content.text, count(*) likes
from content join ratings on content.id = ratings.id
group by context.text
order by likes 
```

# php - 在我的费率计算器中，我的 AJAX 操作导致白屏

> ID：14913387
> 
> 赞同：0
> 
> 时间：2013-02-16T18:01:44.360
> 
> 标签：php, jquery, google-maps-api-3

在我的距离/速率计算器（距离我使用谷歌地图）中，我实现了 AJAX，但出现错误白屏。

```
<?
session_start();
ob_start();
require_once("patch/require.php");
function curl_request($sURL,$sQueryString=null)
{
    $cURL=curl_init();
    curl_setopt($cURL,CURLOPT_URL,$sURL.'?'.$sQueryString);
    curl_setopt($cURL,CURLOPT_RETURNTRANSFER, TRUE);
    $cResponse=trim(curl_exec($cURL));
    curl_close($cURL);
    return $cResponse;
}
if(isset($_POST))
{
$dest= str_replace(',','',str_replace(' ','+',trim($_POST['to'])));
$origin =str_replace(',','',str_replace(' ','+',trim($_POST['from']))); 
$sResponse=curl_request('http://maps.googleapis.com/maps/api/distancematrix/json','origins='.$origin.'&destinations='.$dest.'&mode=driving&units=metric&sensor=false');
$oJSON=json_decode($sResponse);
if ($oJSON->status=='OK')
    $fDistanceInKM=(float)preg_replace('/[^\d\.]/','',$oJSON->rows[0]->elements[0]->distance->text);
else
    $fDistanceInKM=0;
      $oJSON->destination_addresses[0];
      $oJSON->origin_addresses[0];
    if(!isset($_SESSION['getTravel']))
    {
        $_SESSION['getTravel']=time();
    }
    $session_id=$_SESSION['getTravel'];
    $origin=mysql_real_escape_string($oJSON->origin_addresses[0]);
    $destination=mysql_real_escape_string($oJSON->destination_addresses[0]);
    $distance=mysql_real_escape_string($fDistanceInKM.PHP_EOL);
    $increase=(int)$_POST['inc'];
    $checkQ=mysql_query("select * from temp_travel where `session_id`='$session_id'")or die(mysql_error());
    $cms_distance_lower=number_format(Functions::getConf(3113),2);
    $cms_distance_upper=number_format(Functions::getConf(3116),2);
    $cms_lower_price=number_format(Functions::getConf(3111),2);
    $cms_between_price=number_format(Functions::getConf(3112),2);
    $cms_upper_price=number_format(Functions::getConf(3117),2);
    $cms_bag_price=number_format(Functions::getConf(3114),2);
    $cms_handcarry_price=number_format(Functions::getConf(3115),2);
    $distance=(int)$distance;
    if($distance<=$cms_distance_lower)
    {
        $pr=$cms_lower_price;
    }
    else if($distance>$cms_distance_lower && $distance<=$cms_distance_upper)
    {
        $pr=$cms_between_price;
    }
    else
    {
        $pr=$distance*$cms_upper_price;
    }

    if(mysql_num_rows($checkQ)>0)
    {
        $check=mysql_fetch_array($checkQ);
        $check_id=(int)$check['Id'];
        $passenger=$check['passenger'];
        if($passenger<4)
    {
        $hd=3;
        $bg=3;
    }
    else 
    {
        $pr+=($passenger-3)*8;
        if($passenger<6 )
        {
            $hd=3;
        }
        else
        {
            $hd=$passenger-2;
        }
        $bg=$passenger;
    }
        $handcarry=$check['handcarry'];
        $baggage=$check['baggage'];
        $price=number_format($pr+($cms_handcarry_price*($handcarry))+($cms_bag_price*($baggage))+$check['increase'],2);
        mysql_query("update temp_travel set `origin`='$origin',`destination`='$destination',`distance`='$distance',`increase`='$increase',`price`='$price' where `Id`='$check_id'")or die(mysql_error());
    }
    else
    {
        $price=number_format(($pr+$increase),2);
        mysql_query("insert into temp_travel (`session_id`,`origin`,`destination`,`distance`,`increase`,`price`,`handcarry`,`baggage`) values ('$session_id','$origin','$destination','$distance','$increase','$price','','')")or die(mysql_error());
    }

}           
        include('infotable.php');
?> 
```

我正在将此页面的响应保存在 ajax 调用的 getValue 中，但收到有问题的错误。当我提交请求时，会出现一个空白页，但它什么也没做；不知道原因：

> 端口错误：无法建立连接。接收端不存在。

转到此链接[http://www.airporttaxibooking.ca/](http://www.airporttaxibooking.ca/)并检查 RateCalculator。

这是我从中发送请求的 .js 文件：

```
$('#ptext').focus(function () { $('input:text[name=pearson-code]').val('');  });
$('#ptext').blur(function () {      
if($('input:text[name=pearson-code]').val()!='')
        {
        $('input:text[name=tpearson-code]').val('');
        $('.ptext').attr('disabled','true');
            var from= $('input:text[name=pearson-code]').val();
            var inc=$('input:radio[name=pdestination]:checked').val();  
            var to ="Mississauga, ON L4W 1S9, Canada";
            var data='from='+from+'&inc='+inc+'&to='+to;
            $.ajax({
            type: "POST",
            url: "distance.php",
            data: data,
            success: function(getValue) {
            $('#cbox-2').html(getValue);
        }
        });
    $('.ptext').removeAttr('disabled','true');      
        }
    return false;
}); 
```

这是 infotable.php 文件：

```
<?
include("patch/require.php");
if(isset($_SESSION['getTravel']))
{
    $session_id=$_SESSION['getTravel'];
    $travel_infoQ=mysql_query("select * from temp_travel where `session_id`='$session_id'")or die(mysql_error());
    if(mysql_num_rows($travel_infoQ)>0)
    {
        $travel_info=mysql_fetch_array($travel_infoQ);
        $destination=stripslashes($travel_info['destination']);
        $origin=stripslashes($travel_info['origin']);
        $distance=stripslashes($travel_info['distance']);
        $passenger=stripslashes($travel_info['passenger']);
        $handcarry=stripslashes($travel_info['handcarry']);
        $baggage=stripslashes($travel_info['baggage']);
        $increase=stripslashes($travel_info['increase']);
        $cms_distance_lower=Functions::getConf(3113);
        $cms_distance_upper=Functions::getConf(3116);
        $cms_lower_price=Functions::getConf(3111);
        $cms_between_price=Functions::getConf(3112);
        $cms_upper_price=Functions::getConf(3117);
        $cms_bag_price=Functions::getConf(3114);
        $cms_handcarry_price=Functions::getConf(3115);
        $distance=(int)$distance;
        if($distance<=$cms_distance_lower)
        {
            $pr=$cms_lower_price;
        }
        else if($distance>$cms_distance_lower && $distance<=$cms_distance_upper)
        {
            $pr=$cms_between_price;
        }
        else
        {
            $pr=$distance*$cms_upper_price;
        }

        if($passenger<4)
        {
            $hd=3;
            $bg=3;
        }
        else 
        {
            $pr+=($passenger-3)*8;
            if($passenger<6 )
            {
                $hd=3;
            }
            else
            {
                $hd=$passenger-2;
            }
            $bg=$passenger;
        }   
        $price=$pr+$cms_handcarry_price*($handcarry)+$cms_bag_price*($baggage)+$increase;
        mysql_query("update temp_travel set `price`='$price' where `session_id`='$session_id'");
    }
}
?>
<table border="0" width="100%" cellpadding="0" style="margin:0px; padding:0px;"   cellspacing="0">
    <tr>
        <td class="td" valign="top" width="35%" ><strong>From :</strong></td>
        <td class="td" valign="top"><? echo $destination; ?></td>
    </tr>
    <tr>
        <td class="td" valign="top"><strong>To :</strong> </td>
        <td class="td" valign="top"><? echo $origin; ?></td>
    </tr>
    <tr>
        <td class="td" valign="top"><strong>Passengers :</strong> </td>
        <td class="td" valign="top"><div id="passenger"><? echo $passenger; ?></div></td>
    </tr>
    <tr>
        <td class="td" colspan="2" style="text-align:center; background:#ffffff;" valign="top"><strong>Number of Baggages</strong> </td>

    </tr>
    <tr>
        <td class="td" valign="top"><strong>Large Baggages :</strong> </td>
        <td class="td" valign="top"><? if(!empty($baggage)){ echo '<div id="luggage2">'.$bg.'</div> <div id="baggage"> + '. $baggage.'</div>'; }else { echo $bg; } ?></td>
    </tr>
    <tr>
        <td class="td" valign="top"><strong>Hand Carries :</strong> </td>
        <td class="td" valign="top"><? if(!empty($handcarry)){ echo '<div id="luggage1">'.$hd.'</div> + <div id="baggage">'. $handcarry.'</div>';}else { echo $hd; } ?></td>
    </tr>       
    <tr>
        <td class="td" style="text-align:center" colspan="2"><strong >Price : $<div id="price"><? echo $price ?></div></strong></td>
    </tr>
    <tr>
        <td class="td" colspan="2" style="text-align:center;" align="center"><button id="button" onclick="document.location='<?=_WEB_URL?>bookingform.php'">Book Now</button></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:09:59.240

你有几个问题。您的直接错误是，当您输入邮政编码“123”并单击“刷新”时，AJAX 操作开始但您没有阻止事件冒泡到默认操作 - 即将表单提交给另一个页。因此，AJAX 操作经常（但不总是）终止，因为它的父页面正在重新加载——这取决于哪个先加载。（如果您的事件处理程序中有 JavaScript 错误，也可能发生这种情况）。

还有与单击单选按钮相关的 JS 错误。您使用的是开发人员工具栏吗？Safari 和 Chrome 有一个原生的，Firefox 有一个优秀的 Firebug 插件。这是您的 AJAX 调试工具包的*重要*组成部分，并且应该在屏幕上显示所有此类内容。

如果在 AJAX 请求之外查看，我注意到您的 AJAX 网址（[此 GET](http://www.airporttaxibooking.ca/passenger.php?score=3)和[此 POST](http://www.airporttaxibooking.ca/distance.php)）呈现整个页面。这使得单独测试变得更加困难 - 您应该能够在单独的浏览器窗口中加载它们并获得 JSON 答案。最后，除非 POST 操作更改了服务器上的某些内容，否则这也应该是 GET 操作。

# c++ - cout 无法识别但具有正确的包含目录？

> ID：14913392
> 
> 赞同：0
> 
> 时间：2013-02-16T18:02:14.177
> 
> 标签：c++, linux, eclipse, ubuntu, icc

我在 Linux 上使用英特尔编译器、Eclipse 和以下代码：

```
#include <iostream>
#include <cstdio>

using namespace std;

int main(){
    cout << "test";
} 
```

cout 不被识别。

如果我转到项目属性，然后是“C/C++ 常规”，然后是“路径和符号”，我有：

> /opt/intel/composer_xe_2013.2.146/compiler/include
> 
> /usr/include/c++/4.7
> 
> /usr/include/c++/4.7/backward
> 
> /usr/local/包括
> 
> /usr/lib/gcc/x86_64-linux-gnu/4.7/include
> 
> /usr/lib/gcc/x86_64-linux-gnu/4.7/include-fixed
> 
> /usr/包括
> 
> /usr/include/x86_64-linux-gnu

有人可以帮忙吗？谢谢

编辑 Eclipse 中使用的命令行：

> icpc -MMD -MP -MF"Main.d" -MT"Main.d" -c -o "Main.o" "../Main.cpp"

确切的错误信息：

> 灾难性错误：无法打开源文件“bits/c++config.h”

# emacs - 在 emacs 中，如何在不运行保存挂钩的情况下进行保存？

> ID：14913398
> 
> 赞同：21
> 
> 时间：2013-02-16T18:02:39.060
> 
> 标签：emacs, elisp

我在我的`'before-save-hook`. 例如，我运行`'delete-trailing-whitespace`. 这是我几乎在所有场合都想要的。

但有时，我正在处理与其他人共享的文件，并且该文件已经有一堆尾随空格。如果我保存文件，我会得到一个非常令人困惑的大差异，因为我的更改隐藏在数十或数百个无意义的更改中。是的，每个人都可以告诉他们的差异工具不要显示空白更改，但这是每个人每次查看差异时都必须做的事情。我什至不想改变空格。

我有什么办法可以在不更改空格的情况下保存文件，除了启动一个没有`init.el`文件的新 Emacs 实例，或者使用`init.el`没有钩子的修改？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-11-25T12:43:01.310

这是我在不触发的情况下保存的方法`delete-trailing-whitespace`：： `C-x C-q C-x C-s C-x C-q`只读，保存，恢复只读

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-20T11:44:31.070

我想出的一个更简单的解决方案是我`fundamental-mode`没有安装任何挂钩，因为我希望它尽可能简单。因此，如果我想在不运行钩子的情况下保存文件，我会暂时切换到`fundamental-mode`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-18T22:44:10.173

根据与@Stefan 的评论讨论，这里有两种可能的（未经测试的）解决方案：

使用`let`：

```
(defun save-buffer-without-dtw ()
  (interactive)
  (let ((b (current-buffer)))   ; memorize the buffer
    (with-temp-buffer ; new temp buffer to bind the global value of before-save-hook
      (let ((before-save-hook (remove 'delete-trailing-whitespace before-save-hook))) 
        (with-current-buffer b  ; go back to the current buffer, before-save-hook is now buffer-local
          (let ((before-save-hook (remove 'delete-trailing-whitespace before-save-hook)))
            (save-buffer))))))) 
```

使用`unwind-protect`：

```
(defun save-buffer-without-dtw ()
  (interactive)
  (let ((restore-global
         (memq 'delete-trailing-whitespace (default-value before-save-hook)))
        (restore-local
         (and (local-variable-p 'before-save-hook)
              (memq 'delete-trailing-whitespace before-save-hook))))
    (unwind-protect
         (progn
           (when restore-global
             (remove-hook 'before-save-hook 'delete-trailing-whitespace))
           (when restore-local
             (remove-hook 'before-save-hook 'delete-trailing-whitespace t))
           (save-buffer))
      (when restore-global
        (add-hook 'before-save-hook 'delete-trailing-whitespace))
      (when restore-local
        (add-hook 'before-save-hook 'delete-trailing-whitespace nil t))))) 
```

第二种解决方案的问题是函数的顺序`before-save-hook`可能会改变。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-19T14:08:57.293

这是另一个解决方案：

```
(defvar my-inhibit-dtw nil)
(defun my-delete-trailing-whitespace ()
  (unless my-inhibit-dtw (delete-trailing-whitespace)))
(add-hook 'before-save-hook 'my-delete-trailing-whitespace) 
```

进而

```
(defun my-inhibit-dtw ()
  (interactive)
  (set (make-local-variable 'my-inhibit-dtw) t)) 
```

所以你可以`M-x my-inhibit-dtw RET`在你不想修剪空白的缓冲区中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-12T13:34:45.190

我写了一个受 Nicholas Douma 解决方案启发的命令。

```
(defun olav-save-buffer-as-is ()
  "Save file \"as is\", that is in read-only-mode."
  (interactive)
  (if buffer-read-only
      (save-buffer)
    (read-only-mode 1)
    (save-buffer)
    (read-only-mode 0))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-16T18:02:39.060

我们需要做的是从 中删除`'delete-trailing-whitespace`，`before-save-hook`保存缓冲区，然后将其添加回来。

此代码将执行此操作，但只有在它开始时才删除和添加它。

```
;; save the buffer, removing and readding the 'delete-trailing-whitespace function
;; to 'before-save-hook if it's there
(defun save-buffer-no-delete-trailing-whitespace ()
  (interactive)
  (let ((normally-should-delete-trailing-whitespace (memq 'delete-trailing-whitespace before-save-hook)))
    (when normally-should-delete-trailing-whitespace
      (remove-hook 'before-save-hook 'delete-trailing-whitespace))
    (save-buffer)
    (when normally-should-delete-trailing-whitespace
      (add-hook 'before-save-hook 'delete-trailing-whitespace))))
(global-set-key (kbd "C-c C-s") 'save-buffer-no-delete-trailing-whitespace) 
```

为方便起见，它还将命令绑定到`(kbd C-c C-s)`。

# parsing - Haskell：遍历字符串/文本文件

> ID：14913399
> 
> 赞同：3
> 
> 时间：2013-02-16T18:02:41.540
> 
> 标签：parsing, haskell, parsec, attoparsec

我正在尝试读取脚本文件，然后处理并将其输出到 html 文件。在我的脚本文件中，只要有**@title(this is a title)** ，我就会在我的 html 输出中添加标签**[header] 这是一个标题 [/header] 。**所以我的做法是先读取脚本文件，将内容写入字符串，处理字符串，再将字符串写入html文件。

为了识别@title，我需要逐个字符地读取字符串中的字符。当我阅读“@”时，我需要检测下一个字符以查看它们是否是标题 e。

问题：如何在 Haskell 中遍历一个字符串（这是一个字符列表）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:17:05.527

例如，您可以使用简单的递归技巧

```
findTag [] = -- end of list code.
findTag ('@':xs)
  | take 5 xs == "title" = -- your code for @title
  | otherwise            = findTag xs
findTag (_:xs) = findTag xs 
```

所以基本上你只是模式匹配，如果下一个字符（列表头）是'@'，然后你检查接下来的 5 个字符是否形成“标题”。如果是这样，您可以继续解析代码。如果下一个字符不是'@'，你只需继续递归。一旦列表为空，您将到达第一个模式匹配。

其他人可能有更好的解决方案。

我希望这回答了你的问题。

编辑：

为了获得更多的灵活性，如果你想找到一个特定的标签，你可以这样做：

```
findTag [] _ = -- end of list code.
findTag ('@':xs) tagName
  | take (length tagName) xs == tagName = -- your code for @title
  | otherwise = findTag xs
findTag (_:xs) _ = findTag xs 
```

这样，如果你这样做

```
findTag text "title" 
```

您将专门寻找标题，并且您可以随时将标记名更改为您想要的任何内容。

另一个编辑：

```
findTag [] _ = -- end of list code.
findTag ('@':xs) tagName
  | take tLength xs == tagName = getTagContents tLength xs
  | otherwise = findTag xs
  where tLength = length tagName
findTag (_:xs) _ = findTag xs

getTagContents :: Int -> String -> String
getTagContents len = takeWhile (/=')') . drop (len + 1) 
```

老实说，它变得有点混乱，但这就是正在发生的事情：

您首先删除 tagName 的长度，然后再删除一个用于左括号的长度，然后使用 takeWhile 将字符提取到右括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T22:19:31.290

显然您的问题属于解析类别。正如 Daniel Wagner 明智地指出的那样，出于可维护性的原因，您最好使用解析器来处理它。

另一件事是，如果您想有效地处理文本数据，最好使用`Text`而不是`String`.

以下是使用[Attoparsec](http://hackage.haskell.org/packages/archive/attoparsec)解析器库解决问题的方法：

```
-- For autocasting of hardcoded strings to `Text` type
{-# LANGUAGE OverloadedStrings #-}

-- Import a way more convenient prelude, excluding symbols conflicting 
-- with the parser library. See
-- http://hackage.haskell.org/package/classy-prelude
import ClassyPrelude hiding (takeWhile, try)
-- Exclude the standard Prelude
import Prelude ()
import Data.Attoparsec.Text

-- A parser and an inplace converter for title
title = do
  string "@title("
  r <- takeWhile $ notInClass ")"
  string ")"
  return $ "[header]" ++ r ++ "[/header]"

-- A parser which parses the whole document to parts which are either
-- single-character `Text`s or modified titles
parts = 
  (try endOfInput >> return []) ++
    ((:) <$> (try title ++ (singleton <$> anyChar)) <*> parts)

-- The topmost parser which concats all parts into a single text
top = concat <$> parts

-- A sample input
input = "aldsfj@title(this is a title)sdlfkj@title(this is a title2)"

-- Run the parser and output result
main = print $ parseOnly top input 
```

这输出

```
Right "aldsfj[header]this is a title[/header]sdlfkj[header]this is a title2[/header]" 
```

* * *

PS ClassyPrelude 重新实现`++`为`Monoid`'s的别名`mappend`，因此您可以根据需要将其替换为`mappend`,`<>`或`Alternative`'s `<|>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-31T11:29:46.590

对于模式搜索和替换，您可以使用 [`streamEdit`](https://hackage.haskell.org/package/replace-megaparsec/docs/Replace-Megaparsec.html#v:streamEdit).

```
import Replace.Megaparsec
import Text.Megaparsec
import Text.Megaparsec.Char

title :: Parsec Void String String
title = do
    void $ string "@title("
    someTill anySingle $ string ")"

editor t = "[header]" ++ t ++ "[/header]"

streamEdit title editor " @title(this is a title) " 
```

```
" [header]this is a title[/header] " 
```

# sql - st_distance 使用父几何

> ID：14913401
> 
> 赞同：0
> 
> 时间：2013-02-16T18:02:42.237
> 
> 标签：sql, postgresql, distance, postgis

我有两个父表如下

```
CREATE TABLE GISD.CUSTOMERS
(CUSTOMER_ID INTEGER NOT NULL, 
FIRST_NAME VARCHAR (15) NOT NULL, 
SURNAME VARCHAR (20) NOT NULL, 
DATE_OF_BIRTH DATE NOT NULL, 
HOUSE_NUMBER VARCHAR (5) NOT NULL                       
POST_CODE VARCHAR(8) NOT NULL,
STREET VARCHAR (25) NOT NULL,
TOWN VARCHAR (25) NOT NULL
);

SELECT ADDGEOMETRYCOLUMN('gisd','customers', 'customers_geom', '27700','POINT',2); 
```

和

```
CREATE TABLE GISD.CINEMAS
(CINEMA_ID INTEGER NOT NULL,
CINEMA_NAME VARCHAR(25) NOT NULL,
ADDRESS_NUMBER INTEGER NOT NULL,
POST_CODE VARCHAR(8) NOT NULL,
STREET VARCHAR (25) NOT NULL,
TOWN VARCHAR (25) NOT NULL,
OPENING_TIME TIME NOT NULL,
CLOSING_TIME TIME NOT NULL
);

SELECT ADDGEOMETRYCOLUMN('gisd','cinemas', 'cinemas_geom', '27700','POLYGON',2);
SELECT ADDGEOMETRYCOLUMN('gisd','cinemas', 'centroid', '27700','POINT',2); 
```

我有一个孩子，它使用这两个表中的外键：

```
CREATE TABLE GISD.BOOKING
(BOOKING_ID INTEGER NOT NULL,
CUSTOMER_ID INTEGER NOT NULL,
CINEMA_ID INTEGER NOT NULL,
TIME TIME NOT NULL,
DATE DATE NOT NULL,
FILM VARCHAR(50) NOT NULL, 
BOOKING_METHOD VARCHAR (15) NOT NULL,
BOOKING_FEE NUMERIC NOT NULL -- Numeric is suggested by postgresql.org for currency
TICKET_PRICE NUMERIC NOT NULL
); 
```

有没有一种方法可以让我获取唯一的预订 ID 并参考客户几何和影院几何来计算 ST_Distance？我假设某种嵌套查询可以做到这一点，但没有运气？

干杯

更新（来自评论）

我尝试了以下代码：

```
SELECT (ST_DISTANCE(
     (SELECT centroid 
      FROM GISD.CINEMAS
      INNER JOIN GISD.BOOKING ON CINEMAS.CINEMA_ID=BOOKING.CINEMA_ID
      ),(
      SELECT customers_geom
      FROM GISD.CUSTOMERS
      INNER JOIN GISD.BOOKING ON CUSTOMERS.CUSTOMER_ID=BOOKING.CUSTOMER_ID
      )
   )) 
```

但是得到一个错误，说“用作表达式的子查询返回了不止一行”有什么想法可以解决这个问题吗？理想情况下，我希望它返回每个预订 ID 的距离

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:42:08.123

使用主键/外键和小写名称更正了架构。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp;
SET search_path=tmp;

CREATE TABLE tmp.customers
        ( customer_id INTEGER NOT NULL PRIMARY KEY
        , first_name VARCHAR (15) NOT NULL
        , surname VARCHAR (20) NOT NULL
        , date_of_birth DATE NOT NULL
        , house_number VARCHAR (5) NOT NULL
        , post_code VARCHAR(8) NOT NULL
        , street VARCHAR (25) NOT NULL
        , town VARCHAR (25) NOT NULL
        );

SELECT addgeometrycolumn('tmp','customers', 'customers_geom', '27700','POINT',2);

-- and

CREATE TABLE tmp.cinemas
        ( cinema_id INTEGER NOT NULL PRIMARY KEY
        , cinema_name VARCHAR(25) NOT NULL
        , address_number INTEGER NOT NULL
        , post_code VARCHAR(8) NOT NULL
        , street VARCHAR (25) NOT NULL
        , town VARCHAR (25) NOT NULL
        , opening_time TIME NOT NULL
        , closing_time TIME NOT NULL
        );

SELECT addgeometrycolumn('tmp','cinemas', 'cinemas_geom', '27700','POLYGON',2);
SELECT addgeometrycolumn('tmp','cinemas', 'centroid', '27700','POINT',2);

-- I have a junction table between these tables as such:

CREATE TABLE tmp.BOOKING
        ( booking_id INTEGER NOT NULL PRIMARY KEY
        , customer_id INTEGER NOT NULL REFERENCES tmp.customers (customet_id)
        , cinema_id INTEGER NOT NULL REFERENCES tmp.cinemas (cinema_id)
        , zdatetime timestamp NOT NULL
        , film VARCHAR(50) NOT NULL
        , booking_method VARCHAR (15) NOT NULL
        , booking_fee NUMERIC NOT NULL
        , ticket_price NUMERIC NOT NULL
        ); 
```

用于 3 向连接的骨架：

```
SELECT bo.booking_id, bo.zdatetime, bo.film
        , ci.cinemas_geom
        , ci.centroid
        , cu.customers_geom
FROM booking bo
JOIN customers cu ON cu.customer_id = bo.customer_id
JOIN cinemas ci ON ci.cinema_id = bo.cinema_id
        ; 
```

现在，只需添加函数调用，使用骨架的结果作为函数参数（我对 GIS 不是很流利，这只是一个演示语法的示例）：

```
SELECT bo.booking_id, bo.zdatetime, bo.film
        , st_distance(ci.centroid , cu.customers_geom ) AS the_distance
FROM booking bo
JOIN customers cu ON cu.customer_id = bo.customer_id
JOIN cinemas ci ON ci.cinema_id = bo.cinema_id
        ; 
```

# database - 通过 web 应用程序存储多媒体文件上传

> ID：14913402
> 
> 赞同：0
> 
> 时间：2013-02-16T18:02:57.410
> 
> 标签：database, web-applications, file-upload, filesystems, store

我正在开发一个基于 Spring with Hibernate 的 webapp，我想使用 MySQL 数据库通过文件上传机制存储多媒体文件。我不知道最好的方法是什么，我的意思是，我可以将文件直接存储到数据库中吗？还是我必须在数据库中保留引用并将文件存储在文件系统中？

我正在考虑第二种方法，但我不知道如何为数据库设计模型。我有一个用户个人资料，用户可以存储不同的文件，如照片、音乐或视频。然后我在考虑与具有 N 到 N 关系的实体 MultimediaAlbum 相关的实体用户。这意味着我有 3 个表（User、MultimediaAlbum 和一个关系表）。

此外，我想通过网络服务访问这些多媒体文件，所以我需要这些文件的链接。最后，我不知道将这些文件存储在文件系统中的什么位置。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:30:04.163

查看这篇文章以在 MySQL 中将文件存储为 blob：[如何使用 PHP 将 .pdf 文件作为 BLOB 存储到 MySQL 中？](https://stackoverflow.com/questions/4813913/how-to-store-pdf-files-into-mysql-as-blob-from-php)

我个人更喜欢将上传的文件存储在数据库中。我只做过几次，但有一些简单的原因：

1.  更容易避免孤立文件。如果有人删除了文件，您只需将其从数据库中删除。您不必搜索文件系统并在那里删除它。

2.  如果您没有安全权利并且人们上传脚本/程序，那么将它们放在数据库中而不是服务器的文件系统中应该更安全。（虽然我确信有创造力的人仍然可以对数据库中的文件造成损害。）

# c# - 从读取器填充的数组中删除重复项

> ID：14913404
> 
> 赞同：0
> 
> 时间：2013-02-16T18:03:18.107
> 
> 标签：c#, sql, arrays, sqldatareader

我有一个数据库列，每行中有几个用逗号分隔的名称。我正在尝试填充一个包含所有名称但没有重复的数据表。

目前该列表已填充，但仍会出现重复的名称。

我的代码是：

```
while (reader.Read())
        {
            string[] array = reader[0].ToString().Split(',');
            string[] unique = array.Distinct().ToArray();
            foreach (string s in unique)
                dt.Rows.Add(s);
        } 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:14:31.487

这是使用的数据库解决方案`CROSS APPLY`：

```
CREATE TABLE YourTable (YourColumn varchar(100));

INSERT INTO YourTable VALUES ('John,Jack,Jill,John'), 
('Mike,John,Jack,Jill,John');

SELECT DISTINCT
   Split.a.value('.', 'VARCHAR(100)') AS UniqueName
FROM  
   (SELECT   
    CAST ('<M>' + REPLACE(YourColumn, ',', '</M><M>') + '</M>' AS XML) AS String  
    FROM  YourTable
) AS A 
CROSS APPLY String.nodes ('/M') AS Split(a) 
```

产生这些结果：

```
UNIQUENAME
Jack
Jill
John
Mike 
```

和一些样品[小提琴](http://sqlfiddle.com/#!3/5c2f4/3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:08:32.797

试试这个

```
List<string> distinctValues = new List<string>();

while (reader.Read())
{
    string[] unique = reader[0].ToString().Split(',').Distinct().ToArray();

    foreach (string s in unique)
        if (!distinctValues.Contains(s))
            distinctValues.Add(s);
}

foreach (string s in distinctValues)
    dt.Rows.Add(s) 
```

# node.js - 如何在 Node.js 中包含不是模块的文件（以制作它的模块）？

> ID：14913407
> 
> 赞同：7
> 
> 时间：2013-02-16T18:03:27.440
> 
> 标签：node.js

**目的**：从一个普通的旧 JavaScript 文件制作一个 Node.js 模块或一个 Requirejs AMD 模块，如下所示：

```
var foo = function () {}; 
```

我**没有控制权，也无法编辑** `foo.js`。

为什么`foo`第一个里面是一个普通的空对象`if`？如何在我的模块中“包含”纯 JavaScript 文件？文件`mymodule.js`：

```
(function(root) {
    if(typeof exports === 'object') { // Node.js
        var foo = require('./foo');

        console.log(foo); // { }
    } else if (typeof define === 'function' && define.amd) { // RequireJS AMD
        define(['foo'], function () {
            return foo;
        });
    }
}()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T19:49:29.343

加载的节点模块必须使用模块想要公开的所有内容`require`填充对象。`exports`在您的情况下，当您需要该文件时，不会将任何内容添加到 中`exports`，因此它显示为空。所以简短的回答是你需要以`foo.js`某种方式修改内容。如果您不能手动完成，那么您需要以编程方式完成。为什么你无法控制它？

最简单的方法是，如果`foo.js`需要在代码中使其成为正确的模块，则以编程方式包装内容。

```
// Add an 'exports' line to the end of the module before loading it.
var originalFoo = fs.readFileSync('./foo.js', 'utf8');
fs.writeFileSync('./foo-module.js', originalFoo + "\nexports.foo = foo;");
var foo = require('./foo-module.js'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:09:11.533

你可以试试：

```
var fs = require('fs');

var foo = fs.readFileSync('foo.js', 'utf8') // Or request it somehow, just get it as a string

foo += "module.exports.foo = module.exports = foo;";

fs.writeFileSync('fooModule.js',foo);

var foo = require('./fooModule');

// foo() and foo.foo() are both the same 
```

注意：这需要节点。

# c++ - OpenCV将PCA特征向量写入yaml文件，失去精度？

> ID：14913408
> 
> 赞同：0
> 
> 时间：2013-02-16T18:03:36.980
> 
> 标签：c++, opencv, yaml, pca

我需要将一组训练图像的 OpenCV PCA 对象（特征值、特征向量）存储到持久存储中，以便稍后重新加载以进行测试。我正在使用 OpenCV 2.4 功能[XML/YAML 文件存储](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html)将我的特征向量和特征值矩阵写入 yaml 文件。但是，当重新加载文件并将相同的输入图像投影到重新加载的 PCA 空间时，我没有得到 0 的投影之间的差异？我相信我以某种方式失去了精度，但似乎无法弄清楚为什么？我的代码基于@Link 在他的解决方案“ [Saving pca object in opencv”中给出的答案](https://stackoverflow.com/questions/8066370/saving-pca-object-in-opencv)

```
int numPrincipalComponents = db.size()-1;
Mat output1, output2;
PCA pca(matrix, global_mean_vec, CV_PCA_DATA_AS_ROW, numPrincipalComponents);

pca.project(matrix.row(0), output1); //Project first image into orig. PCA

Mat eigenvalues = pca.eigenvalues.clone();
Mat eigenvectors = pca.eigenvectors.clone(); 

//Write matrices to pca_happy.yml
FileStorage fs("./Train/FileStore/pca_happy.yml", FileStorage::WRITE);
fs << "Eigenvalues" << eigenvalues;
fs << "Eigenvector" << eigenvectors;
fs.release();

//Load matrices from pca_happy.yml
FileStorage fs1("./Train/FileStore/pca_happy.yml", FileStorage::READ);
Mat loadeigenvectors, loadeigenvalues;
fs1["Eigenvalues"] >> eigenvalues;
fs1["Eigenvector"] >> eigenvectors;
fs1.release();

PCA pca2;
pca2.mean = global_mean_vec;
pca2.eigenvalues = loadeigenvalues;
pca2.eigenvectors = loadeigenvectors;

pca2.project(matrix.row(0), output2);

Mat diff;
absdiff(output1, output2, diff);

cout<<sum(diff)[0]<<endl; 
```

然而差异是 88.4 并且应该是 0，因为我正在投影完全相同的图像。我需要存储特征向量矩阵的每一行吗？任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T08:27:02.060

您是否正确计算了平均向量？我只做了两个小的修改：（用我自己的`matrix`）

```
PCA pca(matrix, Mat(), CV_PCA_DATA_AS_ROW, numPrincipalComponents);//compute mean automatically
pca2.mean = pca.mean; 
```

是`diff`零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:24:42.237

我在设置特征值、特征向量和均值或pca2时犯了一个非常愚蠢的错误！

```
PCA pca2;
pca2.mean = global_mean_vec;
pca2.eigenvalues = loadeigenvalues;
pca2.eigenvectors = loadeigenvectors; 
```

应该：

```
PCA pca2;
pca2.mean = global_mean_vec.clone();
pca2.eigenvalues = loadeigenvalues.clone();
pca2.eigenvectors = loadeigenvectors.clone(); 
```

希望这也可以帮助其他人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T10:34:59.720

我想，PCA2 应该是：

```
Mat eigenvalues1,eigenvectors1;
FileStorage fs1("fileName.yml", FileStorage::READ);
//Mat loadeigenvectors, loadeigenvalues;
fs1["Eigenvalues"] >> eigenvalues1;
fs1["Eigenvector"] >> eigenvectors1;
fs1.release();

PCA pca2;
pca2.mean = pca.mean;
pca2.eigenvalues = eigenvalues1;
pca2.eigenvectors = eigenvectors1; 
```

# php - 将函数从 Javascript 转换为 PHP

> ID：14913409
> 
> 赞同：0
> 
> 时间：2013-02-16T18:03:51.453
> 
> 标签：php, javascript, regex, preg-replace, slug

我有这个 javascript 函数，可以将任何字符串转换*为完美的 slug*（在我看来）。

```
function slugGenerator(str) {
  str = str.replace(/^\s+|\s+$/g, '');
  str = str.toLowerCase();

  var from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
  var to   = "aaaaeeeeiiiioooouuuunc------";
  for (var i=0, l=from.length ; i<l ; i++) {
    str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
  }
  str = str.replace(/[^a-z0-9 -]/g, '').replace(/\s+/g, '_').replace(/-+/g, '-'); 
  return str;
} 
```

我需要将其转换为 PHP，我已经尝试过，结果是：

```
function slugGenerator($str) {
  $str = preg_replace('/^\s+|\s+$/g', '', $str);
  $str = strtolower($str);

  $from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
  $to   = "aaaaeeeeiiiioooouuuunc------";

  for ($i = 0, $l = strlen($from); $i<$l ; $i++) {
    $str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
  }

  $str = preg_replace('/[^a-z0-9 -]/g', '', $str)
  $str = preg_replace('/\s+/g', '_', $str)

  $str = preg_replace('/-+/g', '-', $str); 
  return $str;
} 
```

我有这个for循环的问题：

```
for ($i = 0, $l = strlen($from); $i<$l ; $i++) {

  // This string
  $str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
} 
```

我不知道如何将其转换为 PHP，有人可以尝试转换它吗？

**解决方案：** 添加[strtr_unicode](https://github.com/qeremy/unicode-tools.php/blob/master/unicode-tools.php#L223)函数并使用此脚本：

```
function slugGenerator($str) {

    $str = preg_replace('/^\s+|\s+$/', '', $str);
    $str = strtolower($str);

    $from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
    $to   = "aaaaeeeeiiiioooouuuunc------";
    $str = strtr_unicode($str, $from, $to);

    $str = preg_replace(
      array("~[^a-z0-9 -]~i", "~\s+~", "~-+~"),
      array("", "_", "-"),
      $str
    );

    return $str;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:25:00.303

两者都`strtr`对`str_split`您不起作用，因为您的代码包含 unicode 字符。如果您喜欢使用，这里有一些有用的东西。

`str_split_unicode`：[https](https://github.com/qeremy/unicode-tools.php/blob/master/unicode-tools.php#L145)
`strtr_unicode` : //github.com/qeremy/unicode-tools.php/blob/master/unicode-tools.php#L145：https: [//github.com/qeremy/unicode-tools.php/blob/master/unicode -tools.php#L223](https://github.com/qeremy/unicode-tools.php/blob/master/unicode-tools.php#L223)

测试：

```
echo strtr_unicode("Hëëëy, hôw ärê yôü!", $from, $to);
// outs: Heeey- how are you! 
```

之后，您可以将数组用作`preg_replace`;的参数。

```
$from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
$to   = "aaaaeeeeiiiioooouuuunc------";
$str = strtr_unicode("Hëëëy, hôw ärê yôü!", $from, $to);
echo $str ."\n";
// according to this line: 
// str = str.replace(/[^a-z0-9 -]/g, '').replace(/\s+/g, '_').replace(/-+/g, '-');
$str = preg_replace(
    array("~[^a-z0-9 -]~i", "~\s+~", "~-+~"),
    array("-", "_", "-"),
    $str
);
echo $str; 
```

出局；

```
嘿嘿-你好吗！
嘿嘿-_how_are_you-

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:06:09.593

这段代码应该可以工作：

```
$str = preg_replace('/'.$from[$i].'/', $to[$i], $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:11:52.793

PHP 函数 str_replace 可以接受数组参数。因此，如果您将`$from`and转换`$to`为数组，您将能够使用：

```
$str = str_replace($from, $to, $str); 
```

将所有出现的 替换为内部`$from`的相应项目，而不是 for 循环。`$to``$str`

要快速转换`$from`并转换`$to`为数组，您可以使用`str_split`：

```
$from = str_split($from); // meaning your original string from the question
// same for $to 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T18:28:43.153

删除`for`循环。 [`strtr`](http://www.php.net/manual/en/function.strtr.php)基本上是为你想要做的事情而设计的：

```
$str = strtr($str, $from, $to); 
```

# java - ant run app ，命令 dosnt 被分叉

> ID：14913417
> 
> 赞同：0
> 
> 时间：2013-02-16T18:04:29.667
> 
> 标签：java, ant

我从 ant 启动我的应用程序，但是当它通过命令 cmd 命令行启动时。
它刚刚在前台运行，并没有继续到下一个目标。
我如何执行该应用程序，然后通过 ant 使用 junit 任务对其进行测试？

```
<target name="init" depends="compile,run,test" description="init build ">
</target>

<target name="compile" depends="build_dirs"
        description="compile the source " >
    <javac srcdir="${src}" destdir="${build}" verbose="${TALK}" includeantruntime="false" >

        <classpath refid="class.path" />
    </javac>    
  </target>

<target name="run">

        <java classname="${main-class}" fork="true">    
            <env key="LD_LIBRARY_PATH" value="${libs_java_library_path}:${env.LD_LIBRARY_PATH}"/>       

             <classpath>                
               <pathelement location="../lib/misc/log4j.jar"/>             
               <pathelement path="conf"/>
               <pathelement path="dist/lib"/>
             </classpath>             
        </java>
</target>

<target name="test"  >
    <junit printsummary="no" showoutput="true">
      <classpath refid="test.classpath"/>      
      <formatter type="brief" usefile="false" />
      <test name="com.controller.core.workflowShouldHaveValidXML" />          
    </junit>
  </target> 
```

测试目标从未执行，为什么？

# wpf - 使用 WPF，想要在主屏幕中全屏打开第二个窗口

> ID：14913419
> 
> 赞同：0
> 
> 时间：2013-02-16T18:04:37.243
> 
> 标签：wpf, window, screen

使用 WPF，想要全屏打开第二个窗口。问题是当主窗口不在主屏幕中时，第二个窗口不会像主窗口一样在同一个屏幕中打开。它在主屏幕内弹出。无论如何我可以像主窗口一样在同一屏幕内打开它吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:58:19.837

您应该可以通过将新窗口的启动位置设置为以其所有者为中心来执行此操作。这样做的问题是您不会自动将打开的窗口设置为所有者，因此您需要自己做。从另一个人执行此操作`Window`应在同一监视器上打开`Window2`实例全屏：

```
Window2 newWindow = new Window2
{
    Owner = this,
    WindowStartupLocation = WindowStartupLocation.CenterOwner,
    WindowState = WindowState.Maximized
};
newWindow.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T10:34:34.880

给定的窗口是要居中的窗口的实例

```
var window = new MyWpfWindow();

var handle = Process.GetCurrentProcess().MainWindowHandle;
var helper = new WindowInteropHelper(window);
helper.Owner = handle; 
window.WindowState = WindowState.Maximized;         
window.WindowStartupLocation = WindowStartupLocation.CenterOwner;

window.ShowDialog(); 
```

这将自动检索当前主窗口并居中并在同一屏幕中最大化孩子，它适用于 Excel VSTO 加载项

# ruby-on-rails - 捆绑安装失败 - 使用 github url 的 Gem - 出了什么问题？

> ID：14913423
> 
> 赞同：2
> 
> 时间：2013-02-16T18:04:49.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 gemfile 中，我有：

```
 gem 'capistrano-cook', github: "subsis/capistrano-cook" 
```

`bundle install`这是在 ruby​​/rails 控制台中运行时的错误日志：http: [//pastie.org/private/aftbq3rukjdthua4lfjzbw](http://pastie.org/private/aftbq3rukjdthua4lfjzbw)

```
C:\rails\app>bundle install
Unfortunately, a fatal error has occurred. Please see the Bundler
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!
C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/capistrano-cook-d0d4f904a443/capistr
ano-cook.gemspec:17:in ``': No such file or directory - git ls-files (Errno::ENO 
```

在运行 bundle install 时，在 Git Bash 控制台中它工作正常。但是当需要 capistrano 部署文件中的 gem 时，它不会被加载。好像它毕竟没有安装。

捆绑器 gem 版本为 1.2.3

```
C:\rails\app>gem show capistrano-cook
ERROR:  While executing gem ... (RuntimeError)
    Unknown command show

C:\rails\app>bundle show capistrano-cook
C:/Ruby193/lib/ruby/gems/1.9.1/bundler/gems/capistrano-cook-d0d4f904a443

C:\rails\app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:13:05.493

尝试：

```
gem 'capistrano-cook', :git => 'git://github.com/subsis/capistrano-cook.git' 
```

# google-maps-api-3 - 是否可以将静态 Google 地图标记设置为不同的颜色和标签作为 url 中的参数？

> ID：14913429
> 
> 赞同：0
> 
> 时间：2013-02-16T18:05:13.837
> 
> 标签：google-maps-api-3, google-maps-markers, google-static-maps

我正在尝试将地图标记设置为两种不同的颜色，一种带有标签 A 的蓝色和一种带有标签 B 的红色。在以下 URL 中，您可以看到所有标记的标记都已命名和着色，可以为每个标记完成吗单独地图标记？

```
http://maps.googleapis.com/maps/api/staticmap?center=Williamsburg,Brooklyn,NY&zoom=13&size=400x400&
markers=color:blue%7Clabel:S%7C11211%7C11206%7C11222&sensor=true_or_false 
```

我正在尝试这个：

```
http://maps.googleapis.com/maps/api/staticmap?center=Williamsburg,Brooklyn,NY&zoom=13&size=400x400&
marker=color:blue%7Clabel:A%markers=color:red%7Clabel:B%7C11211%7C11206%7C11222&sensor=true_or_false 
```

但这是错误的，这能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:33:19.380

我通过执行以下操作来完成此操作：

```
"http://maps.google.com/maps/api/staticmap?size=300x270&amp;zoom=1
                    &amp;markers=color%3ablue|label%3aA|
                    0,0|&amp;markers=color%3agreen|label%3aB|0,0
                    &amp;sensor=false" 
```

有效链接：

[http://maps.google.com/maps/api/staticmap?size=300x270&zoom=1&markers=color%3ablue|label%3aA|0,0|&markers=color%3agreen|label%3aB|0,0&sensor=false](http://maps.google.com/maps/api/staticmap?size=300x270&zoom=1&markers=color%3ablue|label%3aA|0,0|&markers=color%3agreen|label%3aB|0,0&sensor=false)

# .net - 爬取基于表单身份验证的 https 网站

> ID：14913431
> 
> 赞同：0
> 
> 时间：2013-02-16T18:05:20.783
> 
> 标签：.net, asp.net-mvc-3, c#-4.0

嗨，我能够抓取未使用 html 敏捷包保护的 http 网站。但是某些受 https 保护的网站将需要身份验证（可能是表单身份验证）才能查看其内容，因此我无法抓取。我看到了 IBM 的 omnifind 爬虫插件，我们可以将它用于 .net。你们可以请提示如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:11:06.927

您显然需要凭据，因此您应该理清身份验证位是如何工作的。

[假设它是基于表单的，那么使用 CookieContainer （ http://msdn.microsoft.com/en-us/library/dd920298(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd920298(v=vs.95).aspx)）实现某些东西应该不会有任何问题

该链接底部的示例显示了如何迭代从站点返回的 cookie。

这是一个现有的问题，也应该可以帮助指导您：[WebRequest class to post data to login form](https://stackoverflow.com/questions/10260080/webrequest-class-to-post-data-to-login-form)

干杯。

# c# - 如何实现 CollectionLengthToVisibility 转换器？

> ID：14913434
> 
> 赞同：3
> 
> 时间：2013-02-16T18:05:39.830
> 
> 标签：c#, windows-phone-7, xaml, binding

我想实现一个转换器，以便某些 XAML 元素仅在`ObservableCollection`.

我已经引用[了如何在不知道封闭泛型类型的情况下访问泛型属性，](https://stackoverflow.com/questions/4592644/how-to-access-generic-property-without-knowing-the-closed-generic-type)但无法使其与我的实现一起使用。它构建和部署 OK（到 Windows Phone 7 模拟器和设备）但不起作用。而且Blend会抛出异常，不再渲染页面，

> NullReferenceException：对象引用未设置为对象的实例。

这是我到目前为止所拥有的，

```
// Sets the vsibility depending on whether the collection is empty or not depending if parameter is "VisibleOnEmpty" or "CollapsedOnEmpty"
public class CollectionLengthToVisibility : System.Windows.Data.IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo cultureInfo)
    {
        // From https://stackoverflow.com/questions/4592644/how-to-access-generic-property-without-knowing-the-closed-generic-type
        var p = value.GetType().GetProperty("Length");
        int? length = p.GetValue(value, new object[] { }) as int?;

        string s = (string)parameter;
        if ( ((length == 0) && (s == "VisibleOnEmpty")) 
            || ((length != 0) && (s == "CollapsedOnEmpty")) )
        {
            return Visibility.Visible;
        }
        else
        {
            return Visibility.Collapsed;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo cultureInfo)
    {
        return null;
    }

} 
```

这是我在 Blend/XAML 上引用转换器的方式

```
<TextBlock Visibility="{Binding QuickProfiles, ConverterParameter=CollapsedOnEmpty, Converter={StaticResource CollectionLengthToVisibility}}">Some Text</TextBlock> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:17:23.677

我会使用`Enumerable.Any()`扩展方法。它适用于任何`IEnumerable<T>`类型，并且避免您必须知道您正在处理哪种类型的集合。既然你不知道`T`你可以使用`.Cast<object>()`

```
public class CollectionLengthToVisibility : System.Windows.Data.IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo cultureInfo)
    {
        var collection = value as System.Collections.IEnumerable;
        if (collection == null)
            throw new ArgumentException("value");

        if (collection.Cast<object>().Any())
               return Visibility.Visible;
        else
               return Visibility.Collapsed;    
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo cultureInfo)
    {
        throw new NotImplementedException();
    }

} 
```

# javascript - 如何通过javascript将类型属性注入所有脚本标签

> ID：14913437
> 
> 赞同：1
> 
> 时间：2013-02-16T18:06:12.733
> 
> 标签：javascript, html

我想知道如何查询所有脚本标签并设置随机属性。我尝试过的不起作用：

```
document.getElementsByTagName("script")[0].setAttribute("data-foo", "bar"); 
```

它只匹配第一个脚本标签。（请不要使用 jQuery。我喜欢它，但不是现在。它还需要跨浏览器，因此`querySelectorAll`无法使用）。

# 编辑：

好的，事实证明，纯 JavaScript 查询选择器仅在加载时选择它们（正如 Kolink 指出的和系统解释的那样）。所以我必须在其他脚本标签之后添加设置属性的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:20:27.937

一种可能性是让您的其他脚本使用`document.write`.

`document.write`这是一个非常有用的经典案例。

```
// In main/powerhouse

// list of script sources
var scripts = ["script1.js", "script2.js", "script3.js"]

for (var i = 0; i < scripts.length; i++)
    document.write('<scr', 'ipt type="text/javascript" src="', scripts[i], '"></scr', 'ipt>'); 
```

现在脚本将在当前运行的脚本之后编写，并按预期同步加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:15:23.167

你不能。

看，当“主”脚本运行时，其他脚本还不存在。

唯一的解决方案是使用`onload`或`DOMContentLoaded`事件推迟类型设置。

问题在于，在触发其他脚本时，其他脚本将被添加到页面并运行（大多数浏览器）或忽略（旧 IE）。在此阶段设置`type`它们没有任何效果。

因此，与其尝试寻找永远不会奏效的变通方法，为什么不首先尝试编写正确的 HTML 呢？

PS。您对它在 IE8 中不起作用的评论表明您处于 Quirks 模式。`<!DOCTYPE>`如果您还没有，请添加。

# python - 异常列表行为

> ID：14913441
> 
> 赞同：1
> 
> 时间：2013-02-16T18:06:23.440
> 
> 标签：python

我正在解决一些问题并遇到了这个问题。

Python代码

```
row=[]
col=[]
init=[-1,-1] 
```

现在我将它附加`init`到`row`and `col`。

```
row.append(init)
row.append(init)

col.append(init)
col.append(init) 
```

因此`row = [[-1,-1],[-1,-1]]`和`col = [[-1,-1],[-1,-1]]`

现在当我改变`init[0] = 9`我的`row`并`col`成为 `row = [[9,-1],[9,-1]]``col = [[9,-1],[9,-1]]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:08:22.487

`init`发生这种情况是因为您一遍又一遍地存储对对象的相同引用。因此，当您修改对象时，每个人都会看到它。

您可以尝试`append`ing 列表的副本。例如，一种方法可能是：

```
row.append(list(init)) 
```

[克隆列表](https://stackoverflow.com/a/2612815/714501)的方法不止一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:16:17.290

这可能有助于解释原因

[http://www.jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/](http://www.jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/)

# java - java 类的最终字段是否应该始终是静态的？

> ID：14913442
> 
> 赞同：22
> 
> 时间：2013-02-16T18:06:33.460
> 
> 标签：java, static, final

我在网上找不到任何关于此的参考资料。但只是想知道一个类中的最终字段是否应该总是`static`或者只是一个约定。根据我对它们用途的理解，我觉得这更像是一种合乎逻辑的事情，而不是语言强加的事情。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-16T18:09:30.377

当然不是。如果它们属于类，它们必须是静态的，如果它们属于类的实例，它们就不是静态的：

```
public class ImmutablePerson {
    private static final int MAX_LAST_NAME_LENGTH = 255; // belongs to the type
    private final String firstName; // belongs to the instance
    private final String lastName; // belongs to the instance

    public ImmutablePerson(String firstName, String lastName) {
        if (lastName.length() > MAX_LAST_NAME_LENGTH) {
            throw new IllegalArgumentException("last name too large");
        }
        this.firstName = firstName;
        this.lastName = lastName;
    }

    // getters omitted for brevity
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-16T18:09:06.267

不，绝对不是——而且这*不是*惯例。

`static`并且`final`是*完全*不同的东西。`static`表示该字段与*类型*相关，而不是与该类型的任何特定实例相关。`final`表示该字段在初始分配后不能更改值（必须在类型/实例初始化期间发生）。

`static final`字段通常用于常量 - 而*实例*字段`final`通常用于创建不可变类型。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-16T18:09:01.007

他们并不总是聚在一起，这也不是约定俗成的。`final`字段通常用于创建不可变类型：

```
class Person {

    private final String name;
    private final int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

} 
```

另一方面`static`，但不是`final`领域并不常见，而且非常棘手。`static final`经常看到，因为它意味着应用程序¹范围内的常量。

^(1 - 准确地说，类加载器范围内)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-16T18:10:03.873

最终字段*不需要*是静态的，有时拥有一个非静态的最终实例变量会很有用。标记为 static 和 final 的字段通常用于常量，如下所示：

```
public static final int BORDER_WIDTH = 5; 
```

但是，当对象具有不可变属性时，有时您会看到非静态 final 字段。通常，由于通常的原因，非静态`final`字段仍然被标记`private`，所以它更多的是额外的检查，所以编译器可以确保你永远不会再次设置属性。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-16T18:08:26.603

如果您想像 一样访问它们`ClassName.FIELD`，那么是的，您必须这样做。如果您不使其成为静态，则必须执行类似 的操作`new ClassName().FIELD`，这是不必要且毫无意义的对象创建。

但是，如果您只是在课堂上使用它或制作它`private`，那么不要让它成为静态的。如果您在实际班级中，则可以执行`FIELD`.

要完全掌握这个概念，你必须知道是什么`static`意思。静态意味着它属于实际类，而不是它的实例。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-16T18:11:21.630

绝对不。考虑：

```
class Point {
    public final int x;
    public final int y;

    public Point(int _x, int _y) {
        x = _x;
        y = _y;
    }
} 
```

删除`final`，该类变为可变的。加一个`static`，你所有的点都是一样的，没有合法的方法来写构造函数。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-16T18:08:47.040

绝对不。例如，不可变对象具有`final`只能由构造函数设置一次的属性。

更多信息，请参见：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html)

不可变对象不是`final`使用属性的唯一情况，但它们提供了一个明显的例子来说明它们的用处。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-31T22:12:50.237

答案是不。

**静止的**

*   > “表示只有一个这样的数据字段可用于此类的所有实例。没有此修饰符，每个实例都有自己的数据字段副本”

    ...意味着只能有一个

**最后**

*   > “无法修改为数据字段提供的值”

    ...意味着这是一个常数

# regex - Beanshell 错误消息

> ID：14913444
> 
> 赞同：0
> 
> 时间：2013-02-16T18:06:50.413
> 
> 标签：regex, jmeter, beanshell

我一直在尝试使用以下正则表达式提取器

```
Reference Name: FMSFlightPlan
Regular Expression: (?s)<FMSFlightPlan>(.*?)</FMSFlightPlan>
Template: $1$
Match No. 1 
```

匹配 XML 中两个 FMSFlightPlan 标签之间的字符串（标签之间的行数不同，因此`(?s)`建立 dotall 模式）

```
<FMSFlightPlan>
6500
AN NTEST/GL 
- FPN/FN/RP:DA:LEMG:AA:LEXJ:F:BLN,N38092W003375.UN865\. 
BUGIX,N42215W003381.R753.EMANU,N42575W003469 
 </FMSFlightPlan> 
```

几个测试应用程序告诉我我的正则表达式是正确的。但是，当我尝试使用 Beanshell 断言打印出捕获的字符串时，我收到错误消息：

> 断言错误：true 断言失败：false 断言失败消息：org.apache.jorphan.util.JMeterException：调用 bsh 方法时出错：eval 源文件：内联评估：``import java.io.*; //将数据结果写入文件 outfile = "/Users/Dani . . . '' Token Parsing Error: Lexical error at line 12, column 380\. Encountered: "\n" (10), after : "\" 3811\t是\tAAR\tSTN\t835\t\t$B738\tfp,nradps,art,CCAAN,EXCD,wp00,p00\t37919\ta0\ti\t10\t0\t3\t0\t \t14\t 25 /M\t0000ADF\t140785\t133806\t006979\t01:15:00\t0484\t360\t0379\t360\t0112\t 000932\tP00 \t007115\t2013-02-13T21:23:00Z\t2013-02-1: 35:00+00:00\t000837\t00:10:00\t000000\t00:00:00\t000837\t00:10:00\t000000\t000000\t000000\t00:00:00\t000000\t00:00： 00\t"

因此，提取器似乎返回了一个字符串，但 Beanshell 断言并未将其识别为变量。为什么建立dotall模式后会出现这种情况？某处是否存在转义错误？我也不明白错误消息是什么意思

```
Encountered: "\n" 
```

因为在被解析的文本中没有 \n 字符。

我曾考虑使用 XPath 提取器而不是正则表达式提取器，但听说在涉及大量操作或线程时这不是最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:36:25.067

(?s) - 表示单行，对吗？然后它击中一个 \n 这是一个新的线路信号。这可能是导致错误的原因。它不需要换行符。

你可以使用常规的响应断言吗？我认为您可以使用 Patterns 中的正则表达式进行测试。

# c - 二叉树实现

> ID：14913448
> 
> 赞同：1
> 
> 时间：2013-02-16T18:07:09.060
> 
> 标签：c, binary-tree, binary-search-tree

我似乎遇到了分段错误，并且似乎错误来自对 tra 的调用，但我无法确切地看到我编写的代码有什么问题。真的没有头绪，有没有想给我提示的？非常感谢。

```
struct node *tra(struct node * start) {
  struct node * current = start;       
  return current; }

Table ins(Key_Type input, Table table) {
  if ((find(input, table)) == FALSE) {
    struct node *newVal = tra(table -> head, input);
    newVal -> element = input; 
```

我已经定义了一个结构节点，其中包含头、左和右元素。我确定 tra 在为空时返回 current，因为我正在创建一棵一开始为空的树，因此所有节点都将为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:12:17.527

`tra`看起来很可疑。支票有什么用？如果`current`是`NULL`返回它，否则从堆栈中落下并将垃圾返回给调用者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:13:40.790

那里发生了一些奇怪的事情。

```
if (current == NULL)
  return current; 
```

为什么`return current`？电流是`null`?

```
struct node *new = tra(table -> head, input); 
```

`tra`接受一个论点？

I'd recommend you use `gdb`. Learn to use it now, and it will give you the power to answer this question yourself. It's not difficult.

# android - Android如何在缩放和拖动后将ImageView布局重置为原始布局

> ID：14913465
> 
> 赞同：1
> 
> 时间：2013-02-16T18:08:49.567
> 
> 标签：android, android-layout, imageview, zooming

我需要实现缩放、平移，然后将 ImageView 重置为原始比例/位置。我使用 view.setImageMatrix(matrix) 在 FrameLayout 中执行缩放和移动。到目前为止完美运行。为了恢复到原始布局，我尝试保存原始矩阵并重置它，它不起作用，我有点卡住了。感谢任何建议或提示！

以下是我当前的代码：

*   ViewPager 包含每个图像的片段

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.ViewPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

*   该片段包含 ImageView

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/ivPage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:scaleType="matrix"
        android:src="@drawable/catalogue_test" />
</FrameLayout> 
```

*   Java 代码可以很好地完成缩放和平移工作，这实际上是来自教程页面的原创：

```
@Override
public boolean onTouch(View v, MotionEvent event) {

      ImageView view = (ImageView) v;

      switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
         Log.d(tag, "ACTION_DOWN");
         isDoubleTap = false;

         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());
         Log.d(tag, "mode=DRAG");
         mode = DRAG;
         break;
      case MotionEvent.ACTION_UP:
      case MotionEvent.ACTION_POINTER_UP:
         Log.d(tag, "ACTION_POINTER_UP");
         mode = NONE;
         Log.d(tag, "mode=NONE");
         break;
      case MotionEvent.ACTION_MOVE:
         Log.d(tag, "ACTION_MOVE");
         if (mode == DRAG) {
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
         } else if (mode == ZOOM) {
            double newDist = spacing(event);
            Log.d(tag, "newDist=" + newDist);
            if (newDist > 10f) {
               matrix.set(savedMatrix);
               float scale = (float) (newDist / oldDist);
               matrix.postScale(scale, scale, mid.x, mid.y);
            }
         }

         if(isDoubleTap == false) {
            view.setImageMatrix(matrix);
            Log.d(tag, String.format("(%d, %d) - scale(%f, %f) xy(%f, %f)", view.getTop(), view.getLeft(),  view.getScaleX(), view.getScaleY(), view.getX(), view.getY()));
         }

         break;

      case MotionEvent.ACTION_POINTER_DOWN:
         oldDist = spacing(event);
         Log.d(tag, "oldDist=" + oldDist);
         if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(tag, "mode=ZOOM");
         }
         break;
      }

      gestureDetector.onTouchEvent(event);
      return true; // indicate event was handled
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T21:45:10.450

我对 setImageMatrix(new Matrix()) 方法没有任何运气，但是设置比例类型然后重置它有效。

```
setScaleType(ScaleType.CENTER_CROP); 
setScaleType(ScaleType.MATRIX); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T08:49:35.130

我知道这很旧，但这是我的答案。

1-)开始imageView的矩阵onCreate方法

2-) 并将 ACTION_POINTER 和 ACTION_POINTER_UP 方法更改为这些

```
 --- case MotionEvent.ACTION_UP: // first finger lifted
               mode = NONE;
               break;
           case MotionEvent.ACTION_POINTER_UP:// second finger lifted
               fingerLifted();
               matrix.set(startedMatrix);
               view.setScaleType(ImageView.ScaleType.MATRIX);
               mode = NONE;
               Log.d(TAG, "mode=NONE");
               break; 
```

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-14T08:54:55.757

根据我的研究......将 ImageView 重置为原始比例/位置尝试这个非常简单的代码......只要把这个

```
setCotentView(R.layout.activity_image); 
```

这将从一开始就重置您的 ImageView :) 并且它将起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-23T19:26:55.003

原来的 imageView Matrix 不就是一个单位矩阵吗？

`imageView.setImageMatrix(new Matrix());`-- 这将是一个没有平移/缩放/等的矩阵，也就是默认/原始矩阵

# ruby - 无法构建 gem 原生扩展 (em-irc)

> ID：14913467
> 
> 赞同：-1
> 
> 时间：2013-02-16T18:08:55.277
> 
> 标签：ruby, gem, require, mkmf

尝试安装 em-irc，得到：

```
/usr/bin/ruby1.9.1 extconf.rb
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from extconf.rb:2:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:04:34.180

尝试以 root 身份运行：`sudo gem install em-irc`

# jquery - Jquery使用目标偏移量为子级设置动画，父级设置为相对位置

> ID：14913474
> 
> 赞同：0
> 
> 时间：2013-02-16T18:09:28.387
> 
> 标签：jquery

在将小图像从一个地方动画化到另一个地方时，我遇到了一些严重的问题。

我得到目标偏移量并尝试使用偏移量内容作为坐标将我的图像动画到所需位置。但它总是以错误的方式结束。

我知道问题是位置：相对，位置：绝对；但我无法摆脱这些，因为我的布局......

有没有更好的方法来计算窗口坐标？

我做了简化的小提琴，所以你可以明白我的意思......

[http://jsfiddle.net/9WMGk/1/](http://jsfiddle.net/9WMGk/1/)

```
$("#thirdBA a").on("click", function(){
    $("#thirdBA").append('<p class="animated">This is me</p>');
    var offset = $("#second").offset();
    console.dir(offset.left);
    console.dir(offset.top);
    $(".animated").animate({left: offset.left, top: offset.top},"slow");
}); 
```

当您单击链接框时附加。而且它必须移动到“来到这里” div。

任何想法如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:27:59.397

您不能根据第二个 div 的位置进行动画处理吗：`$('#second').position()` 查看下面的小提琴以获取更多信息

[http://jsfiddle.net/davidchase03/9WMGk/3/](http://jsfiddle.net/davidchase03/9WMGk/3/)

让我知道-大卫

# arrays - 如何在处理中使用回调函数？

> ID：14913477
> 
> 赞同：1
> 
> 时间：2013-02-16T18:09:35.617
> 
> 标签：arrays, arraylist, processing

我如何在一定时间后调用我的数组，以便它以特定间隔创建一个对象。我希望我的阵列每 3 秒创建一个球体。

```
Ball [] ball;

void setup()
{
  size(600,600,P3D);

  ball = new Ball[3];
  ball[0] = new Ball();
  ball[1] = new Ball();
  ball[2] = new Ball();
}

void draw()
{
  background(255);
  for (int i = 0; i < ball.length; i++) {
      ball[i].drawBall();
  }
}

class Ball
{
  float sphereSize = random(30, 90);
  float sphereX = random(-2200, 2800);
  float sphereY = 0;
  float sphereZ = random(-2200, 2800);

  void drawBall()
  {
    translate(sphereX, sphereY, sphereZ);
    sphere(sphereSize);
    sphereY +=1;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:12:45.583

[最简单的方法是使用类似millis()](http://processing.org/reference/millis_.html)的计时函数将时间存储在变量中。

这个想法很简单：

1.  存储先前的时间和延迟量
2.  持续跟踪时间
3.  如果当前时间大于先前存储的时间和延迟，则该延迟间隔已经过去。

这是一个简单的草图来说明这个想法：

```
 int now,delay = 1000;
    void setup(){
      now = millis();
    }
    void draw(){
      if(millis() >= (now+delay)){//if the interval passed
        //do something cool here
        println((int)(frameCount/frameRate)%2==1 ? "tick":"tock");
        background((int)(frameCount/frameRate)%2==1 ? 0 : 255);
        //finally update the previously store time
        now = millis();
      }
    } 
```

并与您的代码集成：

```
int ballsAdded = 0;
int ballsTotal = 10;
Ball [] ball;

int now,delay = 1500;

void setup()
{
  size(600,600,P3D);sphereDetail(6);noStroke();
  ball = new Ball[ballsTotal];
  now = millis();
}

void draw()
{
  //update based on time
  if(millis() >= (now+delay)){//if the current time is greater than the previous time+the delay, the delay has passed, therefore update at that interval
    if(ballsAdded < ballsTotal) {
      ball[ballsAdded] = new Ball();
      ballsAdded++;
      println("added new ball: " + ballsAdded +"/"+ballsTotal);
    }
    now = millis();
  }
  //render
  background(255);
  lights();
  //quick'n'dirty scene rotation
  translate(width * .5, height * .5, -1000);
  rotateX(map(mouseY,0,height,-PI,PI));
  rotateY(map(mouseX,0,width,PI,-PI));
  //finally draw the spheres
  for (int i = 0; i < ballsAdded; i++) {
      fill(map(i,0,ballsAdded,0,255));//visual cue to sphere's 'age'
      ball[i].drawBall();
  }
}

class Ball
{
  float sphereSize = random(30, 90);
  float sphereX = random(-2200, 2800);
  float sphereY = 0;
  float sphereZ = random(-2200, 2800);

  void drawBall()
  {
    pushMatrix();
    translate(sphereX, sphereY, sphereZ);
    sphere(sphereSize);
    sphereY +=1;
    popMatrix();
  }
} 
```

# android - 使用jackson对android进行嵌套json解析

> ID：14913478
> 
> 赞同：1
> 
> 时间：2013-02-16T18:09:43.457
> 
> 标签：android, json, jackson

我刚开始使用 android 编程，并通过使用 imdb api 找到了不错的教程。而不是在本教程中使用 xml 我想使用 json 并且对于收到的 json 我有一个问题。这是person.json：

```
 [
        {
    "score":1,
    "popularity":3,
    "name":"Brad Pitt",
    "id":287,
    "biography":"test",
    "url":"http://www.themoviedb.org/person/287",
    "profile":[
        {
            "image":{
                "type":"profile",
                "size":"thumb",
                "height":68,
                "width":45,
                "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w45/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
                "id":"4ea5cb8c2c0588394800006f"
            }
        },
        {
            "image":{
                "type":"profile",
                "size":"profile",
                "height":281,
                "width":185,
                "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/w185/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
                "id":"4ea5cb8c2c0588394800006f"
            }
        },
        {
            "image":{
                "type":"profile",
                "size":"h632",
                "height":632,
                "width":416,
                "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/h632/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
                "id":"4ea5cb8c2c0588394800006f"
            }
        },
        {
            "image":{
                "type":"profile",
                "size":"original",
                "height":1969,
                "width":1295,
                "url":"http://d3gtl9l2a4fn1j.cloudfront.net/t/p/original/w8zJQuN7tzlm6FY9mfGKihxp3Cb.jpg",
                "id":"4ea5cb8c2c0588394800006f"
            }
        }
    ],
    "version":685,
    "last_modified_at":"2013-02-16 07:11:15 UTC"
}
] 
```

我对他们的两个目标：

```
 public class Person implements Serializable {

   private static final long serialVersionUID = 6794898677027141412L;

   public String score;
   public String popularity;
   public String name;
   public String id;
   public String biography;
   public String url;
   public String version;
   public String lastModifiedAt;
   public Profile profile;
    }

    public class Profile implements Serializable {

   private static final long serialVersionUID = -8735669377345509929L;

   public ArrayList<Image> imagesList;

    }

    public class Image implements Serializable {

   private static final long serialVersionUID = -2428562977284114465L;

   public String type;
   public String url;
   public String size;
   public int width;
   public int height;   
    } 
```

我无法弄清楚如何使用杰克逊对象映射器检索人员列表。当我使用这个时：

```
 ObjectMapper mapper = new ObjectMapper();
    Person person= mapper.readValue(jsonResponseString, Person.class); 
```

我有：

02-16 18:34:48.010: W/System.err(376): com.fasterxml.jackson.databind.JsonMappingException: 无法反序列化 com.example.imdbsearcher.model.Person 的实例出 START_ARRAY 令牌 02-16 18 :34:48.180: W/System.err(376): 在 [来源: java.io.StringReader@40a81778; 行：1，列：1] 02-16 18:34:48.554：W/System.err(376)：在 com.fasterxml.jackson.databind.DeserializationContext.mappingException(DeserializationContext.java:599) 02-16 18： 34：48.830：W/System.err（376）：在 com.fasterxml.jackson.databind.DeserializationContext.mappingException（DeserializationContext.java:593）

我已经根据 Keith 和 crdnilfan 的建议更改了检索方法。但现在我对配置文件的属性有疑问。

我意识到我错过了那个人对象，基本上我已经创建了新的配置文件对象并将 imageList 移动到这个类。

我已经如上所述更新了 POJO。

但现在我在配置文件中遇到了同样的错误。

无法从 START_ARRAY 令牌中反序列化 com.example.imdbsearcher.model.Profile 的实例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:53:21.557

那是因为您试图反序列化 Person.class 列表，而不是一个实例。像这样创建另一个类

```
public class PersonList extends ArrayList<Person> {} 
```

然后使用

```
ArrayList<Person> people = mapper.readValue(jsonResponseString, PersonList.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T18:58:47.190

您需要反序列化列表，因为您的 JSON 是一个数组：

```
List<Person> people = mapper.readValue(
                      jsonResponseString, new TypeReference<List<Person >>(){}); 
```

但是，在您这样做之后，由于 JSON 中的配置文件属性，您将遇到一些额外的反序列化错误。结帐：http: [//jackson.codehaus.org/1.5.7/javadoc/org/codehaus/jackson/annotate/JsonIgnoreProperties.html](http://jackson.codehaus.org/1.5.7/javadoc/org/codehaus/jackson/annotate/JsonIgnoreProperties.html)

更新：

```
public class Person implements Serializable 
{

  public List<Object> profile;

  public String score;
  public String popularity;
  public String name;
  public String id;
  public String biography;
  public String url;
  public String version;
  public String last_modified_at;
} 
```

有几种方法可以解决这个问题。这将为您提供 Profile 的链接哈希映射。

或者，如果您控制 JSON 格式，请将配置文件语法更改为：

```
"profile":[
      image:...,
      image:...
 ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T19:08:37.750

其他两个答案清楚地解释了错误的原因，它将摆脱错误并解析 Person 对象。但对我来说，它无法解析图像对象。使用下面的 POJO，我们可以完全解析指定的 json，即使没有任何问题

```
@JsonIgnoreProperties

or 

mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false); 
```

POJO定义：

```
public  class PersonList extends ArrayList<Person> {}

public class Person implements Serializable {

    private static final long serialVersionUID = 6794898677027141412L;

    public String score;
    public String popularity;
    public String name;
    public String id;
    public String biography;
    public String url;
    public String version;
    @JsonProperty(value="last_modified_at")
    public String lastModifiedAt;

    public List<Profile> profile;

}

public class Profile implements Serializable {

private static final long serialVersionUID = -8735669377345509929L;
    @JsonProperty(value="image")
    public Image imagesList;

 }

public class Image implements Serializable {

    private static final long serialVersionUID = -2428562977284114465L;

    public String id;
    public String type;
    public String url;
    public String size;
    public int width;
    public int height;

} 
```

这应该解析json

```
String jsonResponseString = readJsonFile("person.json"); 
ObjectMapper mapper = new ObjectMapper();

PersonList person= mapper.readValue(jsonResponseString, PersonList.class);
       or
List<Person> person= mapper.readValue(jsonResponseString, 
new TypeReference<List< Person>>(){}); //if we use this we dont have to define PersonList class 
```

# javascript - 使用javascript从html列表中过滤元素

> ID：14913485
> 
> 赞同：0
> 
> 时间：2013-02-16T18:10:15.087
> 
> 标签：javascript, list

所以我有一个项目列表和一个文本框，我想将隐藏属性应用于与文本框中的内容不匹配的项目。我正在使用 javascript 在浏览器上实时执行此操作。这是我的 HTML（不要担心 g:textbox，我在 grails 中这样做）

```
Filter List :<g:textBox id = filter onkeyup = Javascript:filter()>

<ul id = 'terms'>
    <li id = 'AFUE'>AFUE
        <p> Annualized Fuel Utilization Efficiency is a measure of your furnace’s heating efficiency. The higher the AFUE percentage, the more efficient the furnace. The minimum percentage established by the DOE for furnaces is 78.</p>
    </li>
    <li id = 'Airflow'>Airflow
        <p> The distribution or movement of air. </p>
    </li>
    <li id = 'Air Handler/Coil Blower'>Air Handler/Coil Blower
        <p> The indoor part of an air conditioner or heat pump that moves cooled or heated air throughout the ductwork of your home. An air handler is usually a furnace or a blower coil.</p>
    </li>
    <li id = 'Bioaerosols'>Bioaerosols
        <p>Microscopic living organisms that grow and multiply in warm, humid places.</p>
    </li>
</ul> 
```

所以我有html设置，现在我需要编写javascript。
1\. 我不确定我是否正确使用了 filter.text 并且 2\. 不确定如何获取 ul id 中的 li id

```
function filter(){
   // on each li item in ul where ul id = 'terms'
   {
      if //li item id.match(${filter.text})
      {
           //li item.hidden = "false"
      }
      else if !//li item id.match(${filter.text})
      {
           //li item.hidden = "true"
      }
      else if ${filter.text} = ""
      {
           //set all items hidden = "false"
      }
   }
} 
```

我想说我需要遍历一组元素，但这可能是我身上的红宝石/黄瓜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:38:20.387

```
var filterText = document.getElementById('filter').value,
    lis = document.querySelectorAll('#terms li'),
    x;

for (x = 0; x < lis.length; x++) {
    if (filterText === '' || lis[x].innerHTML.indexOf(filterText) > -1) {
        lis[x].removeAttribute('hidden');
    }
    else {
        lis[x].setAttribute('hidden', true);
    }
} 
```

[http://jsfiddle.net/ExplosionPIlls/bWRkz/](http://jsfiddle.net/ExplosionPIlls/bWRkz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:45:39.687

这是一种`<li>`在纯 javascript 中搜索 id 值的方法：

```
function keyTyped(e) {
    var items = document.getElementById("terms").getElementsByTagName("li");
    var matches = [];
    var typed = e.target.value;
    var text, i;
    for (i = 0; i < items.length; i++) {
        text = items[i].id;
        if (!typed || text.indexOf(typed) != -1) {
            matches.push(items[i]);
        }
    }
    // now hide all li tags and show all matches
    for (i = 0; i < items.length; i++) {
        items[i].style.display = "none";
    }
    // now show all matches
    for (i = 0; i < matches.length; i++) {
        matches[i].style.display = "";
    }
} 
```

演示：http: [//jsfiddle.net/jfriend00/wFEJ5/](http://jsfiddle.net/jfriend00/wFEJ5/)

这个演示实际上隐藏了元素，因此您可以在演示中直观地看到它们。如果这是您最终想要的最终结果，您显然可以更改代码以添加/删除隐藏属性。

# linux - 在 Ubuntu 12.04 64 位上为 MATLAB 安装 lpsolve？

> ID：14913488
> 
> 赞同：1
> 
> 时间：2013-02-16T18:10:57.660
> 
> 标签：linux, ubuntu, matlab, lpsolve

我试图安装这个工具包 3 小时.. 首先，对于 Python.. 我放弃了。然后对于 MATLAB...

[http://web.mit.edu/lpsolve/doc/MATLAB.htm](http://web.mit.edu/lpsolve/doc/MATLAB.htm)

它说了一些关于安装的信息（我在所有其他网站上都阅读了所有内容），但我不知道它在说什么......

为什么这么复杂？它不像 Windows，对于我想要安装的所有东西，双击 .zip 文件上的“设置”或“安装”文件会安装我需要的所有东西。

我很困惑和苦恼..请帮助我...

我对 Ubuntu 不太了解，所以请解释一下我应该下载哪些文件（有很多文件但我不知道要下载什么...），以及如何使用哪些命令安装它。

谢谢你。

# objective-c - 如何使 NSURLRequest 获取 Twitter 请求令牌？

> ID：14913491
> 
> 赞同：1
> 
> 时间：2013-02-16T18:11:04.840
> 
> 标签：objective-c, http, twitter, nsurlrequest

我正在尝试使用以下代码从 Twitter 获取请求令牌：

```
NSMutableURLRequest *mURLRequest = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:@"https://api.twitter.com/oauth/request_token"]];
mURLRequest.HTTPMethod = @"POST /oauth/request_token HTTP/1.1";
[mURLRequest setValue:@"User-Agent" forHTTPHeaderField:@"Coupled HTTP"];
[mURLRequest setValue:@"OAuth oauth_callback=\"http%3A%2F%2Fbytolution.com\"" forHTTPHeaderField:@"Authorization"];
[mURLRequest setValue:@"api.twitter.com" forHTTPHeaderField:@"Host"];
[mURLRequest setValue:@"Accept" forHTTPHeaderField:@"*/*"];

NSHTTPURLResponse *urlResponse;
NSError *error;
NSError *serializationError;
NSData *responseData = [NSURLConnection sendSynchronousRequest:mURLRequest returningResponse:&urlResponse error:&error];
NSLog(@"data: %@, response:%@, error: %@", [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&serializationError], urlResponse.allHeaderFields, error); 
```

但我得到的只是：

`data: (null), response:{ Connection = close; "Content-Length" = 0; }, error: (null)`

[这](https://dev.twitter.com/docs/auth/implementing-sign-twitter)是 Twitter 针对该主题的文档。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T13:56:10.680

经过两天的挫折和诅咒推特，我终于设法做到了。这是我的实现。用于发出请求的类是“BL_TwitterRequest”。这仅用于获取 twitter 请求令牌。

BL_TwitterRequest.h：

```
#import <Foundation/Foundation.h>

@interface BL_Request : NSObject <NSURLConnectionDelegate>

@property (nonatomic, strong) NSMutableData *webData;

-(void) makeRequest; 
```

在实现类 (BL_TwitterRequest.m) 的顶部添加以下 NSString 类别。这将用于获取 NSString 的 URL 编码版本。

```
@implementation NSString (NSString_Extended)

- (NSString *)urlencode {
    NSMutableString *output = [NSMutableString string];
    const unsigned char *source = (const unsigned char *)[self UTF8String];
    int sourceLen = strlen((const char *)source);
    for (int i = 0; i < sourceLen; ++i) {
        const unsigned char thisChar = source[i];
        if (thisChar == ' '){
            [output appendString:@"+"];
        } else if (thisChar == '.' || thisChar == '-' || thisChar == '_' || thisChar == '~' ||
                   (thisChar >= 'a' && thisChar <= 'z') ||
                   (thisChar >= 'A' && thisChar <= 'Z') ||
                   (thisChar >= '0' && thisChar <= '9')) {
            [output appendFormat:@"%c", thisChar];
        } else {
            [output appendFormat:@"%%%02X", thisChar];
        }
    }
    return output;
}

@end 
```

在“BL_TwitterRequest.m”中添加以下函数。它将用于生成 oAuth 随机数。该函数基本上生成一个指定长度的随机字符串。

```
-(NSString*) generateRandomStringOfLength:(int)length {

    NSString *letters = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    NSMutableString *randomString = [NSMutableString stringWithCapacity: length];
    for (int i = 0; i < length; i++) {
        [randomString appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
    }

    return randomString;
} 
```

[从此处](https://github.com/nicklockwood/Base64)包含 Base64 库。您所要做的就是将“Base64.h”和“Base64.m”文件拖到您的项目中。添加以下导入：

```
#include <CommonCrypto/CommonDigest.h>
#include <CommonCrypto/CommonHMAC.h>
#include <sys/types.h>
#include <errno.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#import "Base64.h" 
```

添加另一个函数，如下所示。这将用于获取 HMAC-SHA1 值。

```
- (NSString *)hmacsha1:(NSString *)data secret:(NSString *)key {

    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];

    unsigned char cHMAC[CC_SHA1_DIGEST_LENGTH];

    CCHmac(kCCHmacAlgSHA1, cKey, strlen(cKey), cData, strlen(cData), cHMAC);

    NSData *HMAC = [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];

    NSString *hash = [HMAC base64EncodedString];

    return hash;
} 
```

现在是发出请求的主要功能。

```
-(void) makeRequest {

    _webData = [[NSMutableData alloc]init]; // WILL BE USED BY NSURLConnection

    NSString *httpMethod = @"POST";
    NSString *baseURL = @"https://api.twitter.com/oauth/request_token";
    NSString *oauthConsumerKey = @"YOUR_CONSUMER_KEY";
    NSString *oauthConsumerSecret = @"YOUR_CONSUMER_SECRET";
    NSString *oauth_timestamp = [NSString stringWithFormat:@"%.f", [[NSDate date]timeIntervalSince1970]];
    NSString *oauthNonce = [self generateRandomStringOfLength:42];
    NSString *oauthSignatureMethod = @"HMAC-SHA1";
    NSString *oauthVersion = @"1.0";
    NSString *oauthCallback = @"YOUR_TWITTER_CALLBACK_URL"; 

    //1\. PERCENT CODE EVERY KEY AND VALUE THAT WILL BE SIGNED AND
    //   APPEND KEY AND VALUE WITH = AND &

    NSMutableString *parameterString = [[NSMutableString alloc]initWithFormat:@""];

    [parameterString appendFormat:@"oauth_callback=%@", [oauthCallback urlencode]];
    [parameterString appendFormat:@"&oauth_consumer_key=%@", [oauthConsumerKey urlencode]];
    [parameterString appendFormat:@"&oauth_nonce=%@", [oauthNonce urlencode]];
    [parameterString appendFormat:@"&oauth_signature_method=%@", [oauthSignatureMethod urlencode]];
    [parameterString appendFormat:@"&oauth_timestamp=%@", [oauth_timestamp urlencode]];
    [parameterString appendFormat:@"&oauth_version=%@", [oauthVersion urlencode]];

    //2\. CREATE SIGNATURE STRING WITH HTTP METHOD AND ENCODED BASE URL AND PARAMETER STRING

    NSString *signatureBaseString = [NSString stringWithFormat:@"%@&%@&%@", httpMethod, [baseURL urlencode], [parameterString urlencode]];

    //3\. GET THE SIGNING KEY NOW FROM CONSUMER SECRET

    NSString *signingKey = [NSString stringWithFormat:@"%@&", [oauthConsumerSecret urlencode]];

    //4\. GET THE OUTPUT OF THE HMAC ALOGRITHM

    NSString *oauthSignature = [self hmacsha1:signatureBaseString secret:signingKey];

    // TIME TO MAKE THE CALL NOW

    NSMutableString *urlString = [[NSMutableString alloc]initWithFormat:@""];

    [urlString appendFormat:@"%@", baseURL];

    // INITIALIZE AUTHORIZATION HEADER

    NSMutableString *authHeader = [[NSMutableString alloc]initWithFormat:@""];

    [authHeader appendFormat:@"OAuth "]; // MIND THE SPACE AFTER 'OAuth'

    [authHeader appendFormat:@"oauth_nonce=\"%@\",", [oauthNonce urlencode]];
    [authHeader appendFormat:@"oauth_callback=\"%@\",", [oauthCallback urlencode]];
    [authHeader appendFormat:@"oauth_signature_method=\"%@\",", [oauthSignatureMethod urlencode]];
    [authHeader appendFormat:@"oauth_timestamp=\"%@\",", [oauth_timestamp urlencode]];
    [authHeader appendFormat:@"oauth_consumer_key=\"%@\",", [oauthConsumerKey urlencode]];
    [authHeader appendFormat:@"oauth_signature=\"%@\",", [oauthSignature urlencode]];
    [authHeader appendFormat:@"oauth_version=\"%@\"", [oauthVersion urlencode]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:urlString]] ;

    [request setHTTPMethod:httpMethod];

    [request setValue:authHeader forHTTPHeaderField:@"Authorization"];

    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];

    [connection start];

} 
```

现在只需实现 NSURLConnection 委托方法来获取响应。

```
#pragma mark - Connection Delegate

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    [_webData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSString *resultString = [[NSString alloc]initWithData:_webData encoding:NSUTF8StringEncoding];

    NSLog(@"RESULT STRING : %@", resultString);  
} 
```

如果一切顺利，'resultString' 将具有 oauth_token 和 oauth_token_secret。

要拨打电话，只需执行以下操作：

```
 BL_TwitterRequest *twitterRequest = [[BL_TwitterRequest alloc]init];
 [twitterRequest makeRequest]; 
```

请记住，任何遗漏的空格或逗号都可能导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:17:36.550

多个错误（不确定列表是否完整，这是我第一眼发现的）：

*   HTTP 方法应该是 simple 、`@"POST"`not或其他任何东西；`@"POST foo"``@"POST or I will kill you"`
*   同样，`@"OAuth oauth_callback=\""`应该是`@"oauth_callback=\""`；
*   您没有包括所有必要的标头字段，例如`oauth_consumer_key`、`oauth_signature`、`oauth_signature_method`和;`oauth_nonce``oauth_timestamp`
*   这不会返回 JSON。它返回一个 URL 编码的响应，类似于[官方文档](https://dev.twitter.com/docs/api/1/post/oauth/request_token)中的示例。

# javascript - 碰撞检测难度，玩家飞行

> ID：14913497
> 
> 赞同：1
> 
> 时间：2013-02-16T18:11:39.600
> 
> 标签：javascript, canvas, collision-detection, 2d-games

我今天创建了一个 2d 平台游戏。玩家可以左右移动和跳跃。不允许爬上墙的一侧。当您在墙壁旁边按例如向右和向上时，它会爬上墙壁。你能看看，说我错过了什么。

```
function updateMe()
{
    x+=vx;
    y+=vy;

    //gravity
    vy+= gravity;
    if(y>=HEIGHT-playerH)
    {
        y=HEIGHT-playerH;
        vy=0;
    }

    //collision y
    var maxR=WIDTH/tileW-1;
    if(vy>0)
    {
        //going down
        var temp2 = Math.floor((y+vy+playerH)/tileH);
        for(var i=Math.max(0,Math.floor(x/tileW)),len=Math.min(maxR,Math.ceil((x+playerW)/tileW)); i<len; i++)
        {
            if(map[temp2][i]!=0)
            {   
                y=temp2*tileH-playerH;
                vy=0;
                break;
            }
        }
    }
    else if(vy<0)
    {
        //going down
        var temp2 = Math.floor((y+vy)/tileH);
        for(var i=Math.max(0,Math.floor(x/tileW)),len=Math.min(maxR,Math.ceil((x+playerW)/tileW)); i<len; i++)
        {
            if(map[temp2][i]!=0)
            {   
                y=temp2*tileH+tileH;
                vy=0.01;//make it fall down
                break;
            }
        }
    }

    //momentum
    if(vx>0)
        vx-=momentum/2;
    else if(vx<0)
        vx+=momentum/2;

    //collsion
    maxR=WIDTH-playerW;
    if(vx>0)
    {
        //going right
        if(x+vx<maxR)
        {
            var temp2 = Math.floor((x+vx+playerW)/tileW);
            for(var i=Math.floor(y/tileH),len=Math.ceil((y+playerH)/tileH); i<len; i++)
            {
                if(map[i][temp2]!=0)
                {   
                    x=temp2*tileW-playerW;
                    vx=0;
                    break;
                }
            }
        }
        else
        {
            vx=maxR-x;
        }
    }
    else if(vx<0)
    {
        //going left
        if(x+vx>0)
        {
            var temp2 = Math.floor((x+vx)/tileW);
            for(var i=Math.floor(y/tileH),len=Math.ceil((y+playerH)/tileH); i<len; i++)
            {
                if(map[i][temp2]!=0)
                {   
                    x=temp2*tileW+tileW;
                    vx=0;
                    break;
                }
            }
        }
        else
        {
            vx=x;
        }
    }

    //x boundaries
    if(x<=0)
    {
        x=vx=0;
    }
    else if(x>=WIDTH-playerW)
    {
        x=WIDTH-playerW;
    }

    //draw
    ctx.fillRect(x,y,playerW,playerH);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:41:16.327

问题多半是操作顺序问题，没看太多，但相信感动

```
x+=vx; 
```

到之间

```
else if(vy<0)
{
    //going down
    var temp2 = Math.floor((y+vy)/tileH);
    for(var i=Math.max(0,Math.floor(x/tileW)),len=Math.min(maxR,Math.ceil((x+playerW)/tileW)); i<len; i++)
    {
        if(map[temp2][i]!=0)
        {   
            y=temp2*tileH+tileH;
            vy=0.01;//make it fall down
            break;
        }
    }
} 
```

和

```
//momentum
if(vx>0)
    vx-=momentum/2;
else if(vx<0)
    vx+=momentum/2; 
```

而不是在顶部将意味着您不会遇到将其稍微移入墙壁并尝试根据它是否与下面的物体碰撞来调整 y 的问题，它将是。

# breeze - 如何在保存之前检查服务器上的变更集数据？

> ID：14913498
> 
> 赞同：2
> 
> 时间：2013-02-16T18:11:39.547
> 
> 标签：breeze

一位朋友问“您是否有关于如何检查服务器上的 Breeze 变更集数据并在将数据提交到数据库之前执行服务器端验证和安全检查的示例或文档？” 我的回答如下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:37:40.563

请参阅描述用于此目的的 Breeze.NET 工具的文档中的“[自定义 EFContextProvider ”主题。](http://www.breezejs.com/documentation/custom-efcontextprovider)

> *尽管本主题`EFContextProvider<T>`专门针对，但大多数要点适用于基类 ，`ContextProvider<T>`这在保存到任何类型的数据存储时都很有用（例如，请参见[“NoDb”示例](http://www.breezejs.com/samples/nodb)）。*

由**BreezeMvcSpa 模板**生成的应用程序提供了保存验证的味道（从广义上理解为包括安全检查）。

> *BreezeMvcSpa 模板将于 2013 年 2 月与“ASP.NET 和 Web 工具 2012.2”一起发布*）

查看继承自的 Models/ **TodoRepository.cs**`EFContextProvider<T>`。它覆盖**`BeforeSaveEntity(entityInfo)`**以确认您始终在更新/删除`TodoList`属于`TodoItem`当前用户的 /。它还将当前用户分配给一个新的`TodoList`. 在一个真实的应用程序中，这将是一些专门用于验证特定实体类型的辅助类的调度程序，我将在下面稍微详细说明这一点。

还有另外两个重要的覆盖：

**`BeforeSaveEntities(saveMap)`**让您有机会一次检查整个变更集。这是验证整个变更集作为一个整体的好方法，也许可以确保此保存请求作为单个事务有意义。这也是进行一些跨实体检查的好地方。`BeforeSaveEntities(saveMap)`在单独调用`BeforeSaveEntity(entityInfo)`每个实体后调用。

`BeforeSaveEntities(saveMap)`可能是将验证委托给专用助手类的一个很好的调度点。我怀疑我会将我所有的验证逻辑放在一个`ContextProvider`大类中。我不介意所有保存活动都通过`ContextProvider.SaveChanges`大门，但我不想自己完成所有工作`ContextProvider`。

**`SaveChangesCore`**是另一个重要的覆盖。在那里您进行任何最终的预保存准备并将更改集交给实际执行数据库保存的东西（例如，`DbContext.SaveChanges`方法）。您可以在将控制权返回给`ContextProvider`.

另请注意，在使用 时`DbContext`，**EF 会应用您在模型属性中规定的验证**，包括标准集和自定义验证属性。

我有更多保存建议，但这可能足以立即消化。

# eclipse - 尝试在 Eclipse 中安装新功能（使用 ADT 作为基础包）

> ID：14913499
> 
> 赞同：12
> 
> 时间：2013-02-16T18:11:49.857
> 
> 标签：eclipse, osgi, bundle, runtime-error, adt

当我尝试在 Eclipse 中安装新功能（使用 ADT 作为基础包）时，我得到

```
‘Installing Software’ has encountered a problem.
An error occurred while collecting items to be installed
An error occurred while collecting items to be installed
session context was:(profile=profile, hase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).  No repository found containing: osgi.bundle,com.android.ide.eclipse.base,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685 
```

我已经安装了许多插件，但我不确定哪个插件可能会出错。如果其他人遇到此错误并找到解决方案，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-17T18:29:45.383

尝试将 repo 的地址从 http 更改为 https，反之亦然

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-04-25T12:26:08.490

这对我有用：

> 在 Eclipse 中，尝试：
> 
> 帮助 > 安装新软件
> 
> 选择“使用：[https](https://dl-ssl.google.com/android/eclipse/) ://dl-ssl.google.com/android/eclipse/ ”
> 
> 选择要安装的更新并***取消选中“安装期间联系所有更新站点以查找所需软件”***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:10:35.993

我在“Android - 开放手机联盟项目”上找到了类似的信息以及如何修复它，这是链接[http://code.google.com/p/android/issues/detail?id=38267](http://code.google.com/p/android/issues/detail?id=38267)我希望这会有所帮助你。

您可以尝试的另一件事是导出您的工作空间并重新安装您的 Eclipse。有时兼容性问题可能会导致这种情况。我知道这可能需要一些工作，因为您必须重新添加所有插件，但如果您找不到解决方法或修复，这可能是您可能要考虑的最后一个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T08:50:08.453

我能够通过使用“http”而不是“https”来解决它（[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T13:01:33.950

太棒了，我使用的是 21.0.1 版本，而我的工具出于某种原因使用的是 21.1，并且从 http 更改为 https，即[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)似乎可以工作，并且 ADT 已下载并更新.

在启动 Eclipse 时没有错误消息。

可悲的是，在进入工作区时发生的事情是：

1.  我所有用于 ADT 的工具栏和菜单快捷方式（帮助/关于除外）都已被擦除
2.  我在“可用”网站中的所有网站都已被清除
3.  总的来说，我的 Eclipse 现在是 shagged

做得好 Eclipse，您创建的插件噩梦系统已经破坏了我的另一个安装。也就是说，当我敢于安装或使用插件时，就像我曾经遇到的每个实例都失败了一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T17:30:54.347

它也在安装更新的文件夹位置，它没有完整的写入权限，所以我更改了它并将 http 更改为 https。这对我有用。

# c# - 不是所有的代码路径都返回一个值？

> ID：14913502
> 
> 赞同：1
> 
> 时间：2013-02-16T18:12:04.093
> 
> 标签：c#, return

我不断收到标题中命名的错误，但似乎无论如何都会返回 l 的值。这里有什么问题？如果没有变化，我有一个 else 语句来处理 out l ：

```
 public int validate(int zip, int i, out int l)
{
    if ((zip < 10000) || (zip > 99999))
    {

        Console.WriteLine("Input not accepted. Zips are 6-digits long.");
        error = true;

    }
    else {
        listzip[i] = zip;
        error = false; }

    for (int g = 1; (g <= (i - 1)); g++)
    {
        if (listzip[i] == listzip[g])
        {
            Console.WriteLine("Repeated zip detected, please re-enter.");
            if (!error) error = true;
        } else error = false;
    }

    if (error)
    {
        l = i--; // forces a step back if an error was detected
    }else l = i;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:14:09.863

您的方法的返回类型是`int`，因此您需要从您的方法中返回一个`int`值。您应该使用该[`return`](http://msdn.microsoft.com/en-us/library/1h3swy84.aspx)语句返回值（[请参阅链接](http://msdn.microsoft.com/en-us/library/1h3swy84.aspx)）

如果方法的签名是，`public void validate(...)`则不需要[`return`](http://msdn.microsoft.com/en-us/library/1h3swy84.aspx)声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:15:43.823

您的方法返回类型是`int`，但在您的方法中没有*返回值*。

如果您不想从您的方法返回任何值，请将您的返回类型定义为`void`. 像;

```
public void validate(int zip, int i, out int l)
{
  // No need return statement
} 
```

签出*return* statement from**[`MSDN`](http://msdn.microsoft.com/en-us/library/1h3swy84.aspx)**

> return 语句终止它出现的方法的执行，并将控制权返回给调用方法。它还可以返回一个可选值。如果方法是**void**类型，return 语句可以省略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T18:18:21.400

您的方法被声明为，C# 编译器需要您`return`一个`int`值。但是从您的代码的外观来看，您可能希望返回类型是`void`而不是`int`.

```
public void validate(int zip, int i, out int l)
{
    if ((zip < 10000) || (zip > 99999))
    {
        Console.WriteLine("Input not accepted. Zips are 6-digits long.");
        error = true;
    } 
```

# c# - 具有自定义操作的 API 控制器

> ID：14913510
> 
> 赞同：2
> 
> 时间：2013-02-16T18:13:21.810
> 
> 标签：c#, asp.net-mvc

我需要为我的 api 控制器自定义操作，例如 api/{controller}/{action}/{id}

这是我的配置

```
config.Routes.MapHttpRoute(
    name: "DefaultMethodApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
);

config.Routes.MapHttpRoute(
    name: "ApiByAction",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { action = "Browse", id = RouteParameter.Optional }
); 
```

这击中了默认路由 /api/dropzone/1 但我尝试通过“ApiByAction”配置击中 /api/dropzone/browse/1，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:14:49.670

路由定义的顺序很重要，请确保尊重它，因为它们的评估顺序与您声明它们的顺序相同：

```
config.Routes.MapHttpRoute(
    name: "ApiByAction",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional },
    constraints: new { action = @"^(?!\d)[a-z0-9]+$" }
);

config.Routes.MapHttpRoute(
    name: "DefaultMethodApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

另请注意，您可能需要`{action}`在第一个路由定义中为令牌指定约束。

# objective-c - 两个图片相互循环objective-c

> ID：14913511
> 
> 赞同：0
> 
> 时间：2013-02-16T18:13:30.427
> 
> 标签：objective-c, animation, loops

我正在尝试使用以下代码制作带有图片的动画：

```
NSMutableArray *imageArray = [[NSMutableArray alloc] initWithCapacity:22];
int i;
for (i =1; i < 22; i++) {
    [imageArray addObject:[UIImage imageNamed:[NSString stringWithFormat:@"fbAnimation%d.png", i]]];
    //make it animate
    self.fbLogin.animationImages = [NSArray arrayWithArray:imageArray];
    self.fbLogin.animationDuration =0.8;
    self.fbLogin.animationRepeatCount = 5;
    [self.fbLogin startAnimating];
}
    int j;
    NSMutableArray *imageLoading = [[NSMutableArray alloc] initWithCapacity:4];
    for (j = 1; j < 4; j++) {
        [imageLoading addObject:[UIImage imageNamed:[NSString stringWithFormat:@"loading%d.png", j]]];

        //make it animate
        self.fbLogin.animationImages = [NSArray arrayWithArray:imageLoading];
        self.fbLogin.animationDuration = 1;
        self.fbLogin.animationRepeatCount = 5;
        [self.fbLogin startAnimating];
} 
```

}

问题是，到目前为止，无论哪种方式我都尝试过，只有一个动画会在屏幕上执行。我希望运行第一个动画，然后运行第二个“正在加载...”，直到来自 facebook 的所有其他数据都准备好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:41:28.403

首先，每次循环每个循环时，您都在调用`[self.fbLogin startAnimating]`和重置数组。您应该将它们移到循环之外 - 您只需启动每个动画一次。其次，第二个 for 循环将在第一个之后立即执行，所以我期望的结果是第二个动画出现，而不是第一个。解决这个问题的一种方法是将第二个动画的代码放在一个单独的方法中，然后安排在第一个动画完成后调用它：`animationImages``for`

```
[self performSelector:@selector(animation2) withObject:nil afterDelay:durationOfPreviousAnimation]; 
```

在第一个`for`循环结束时。我假设由于这是动画代码，我们保证在主线程上。

# c# - 将 Web MVC 应用程序导入 Forms 桌面应用程序 App.Config 返回 Null

> ID：14913519
> 
> 赞同：0
> 
> 时间：2013-02-16T18:14:18.367
> 
> 标签：c#, .net, web-applications, configuration

我们有一个 Windows 窗体桌面应用程序，我们正在制作一个单独的 MVC Web 应用程序，它将使用桌面应用程序业务对象。我们将 mvc 应用程序作为解决方案导入到桌面解决方案中。问题是当我们的启动项目设置为 MVC 解决方案时，从 App.Config 中获取 ConnectionString 似乎不起作用。我们将 App.Config 文件复制到我们的 MVC 网络解决方案中，但是声明

```
string remote = ConfigurationManager.AppSettings["RMSRemoteConnection"]; 
```

始终加载 null。该语句是从桌面表单应用程序中的一个类调用的。当我们的启动项目是 Web MVC 解决方案时，这个 ConfigManager 有问题。我们需要使用主桌面解决方案的现有业务对象。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:18:21.153

> 我们将 App.Config 文件复制到我们的 MVC 网络解决方案中

ASP.NET Web 应用程序使用`web.config`，而不是`app.config`. 因此，请确保`web.config`您的 Web 应用程序的根目录中有一个包含此连接字符串的文件。

# xaml - XAML StackPanel 划分

> ID：14913520
> 
> 赞同：0
> 
> 时间：2013-02-16T18:14:18.457
> 
> 标签：xaml, stackpanel, separator

XAML 中是否可以在 StackPanel 控件（或任何一般容器）中用线分隔行和列？所以它看起来像一个棋盘？而且当用户调整窗口大小时，面板也会调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:13:42.563

唯一一个绘制线条的内置`Panels`函数是`Grid`带有`ShowGridLines="True"`集合的，但绘制的线条只是一种难看的虚线，无法更改，实际上仅适用于调试目的。

要绘制自己的线条，您可以在每个单元格中添加相同的边框，或者如果您希望它们在整个布局中延伸，则可以在每一行或每一列中添加相同的边框。进行棋盘布局的最简单方法是使用`UniformGrid`：

```
<UniformGrid Rows="2" Columns="2">
    <Border BorderBrush="Gray" BorderThickness="1" />
    <Border BorderBrush="Gray" BorderThickness="1" />
    <Border BorderBrush="Gray" BorderThickness="1" />
    <Border BorderBrush="Gray" BorderThickness="1" />
</UniformGrid> 
```

对于一个完整的板，您可以保存键入并使用绑定到一些 64 项集合的 ItemsControl 以及行的模板：

```
<ItemsControl ItemsSource="{Binding ListOf64Items}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Border BorderBrush="Gray" BorderThickness="1"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Rows="8" Columns="8"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

也有很多可能的变化，这取决于你到底想从网格中得到什么。

# ruby - 为什么“<<”和“+”对冻结的字符串对象表现不同？

> ID：14913522
> 
> 赞同：1
> 
> 时间：2013-02-16T18:14:45.193
> 
> 标签：ruby, ruby-1.9.3

```
irb(main):009:0> a = "good"
=> "good"
irb(main):010:0> a = "good" + "morning"
=> "goodmorning"
irb(main):011:0> a = "good"
=> "good"
irb(main):012:0> a << " morning"
=> "good morning" 
```

到目前为止，两个*`concatenation`*操作员都工作正常。

```
irb(main):013:0> a = "good"
=> "good"

irb(main):014:0> a.freeze
=> "good"

irb(main):015:0> a.frozen?
=> true

irb(main):016:0> a << " welcome"
RuntimeError: can't modify frozen String
    from (irb):16
    from /usr/bin/irb:12:in `<main>'

irb(main):017:0> a = a +  " welcome"
=> "good welcome" 
```

但是对于*`frozen`*字符串，可以清楚地看到差异`IRB`，`<<`并且`+`不会像他们应该的那样表现。谁能告诉我这是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T18:16:51.747

他们正在做*他们*应该做的事情。`<<` *修改*调用它的字符串，而`+`更接近`str.dup << arg`. 此行为是已定义的、记录在案的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:23:24.237

@Linuxios 的答案是完美的。

但仍然在这里，我试图以更透明的方式展示这种修改：

```
@ubuntu:~$ irb --simple-prompt
>> a = "good"
=> "good"

>> a.freeze
=> "good"

>> a.frozen?
=> true

>> a.object_id
=> 10557720 # holds the reference to the "good" string object.

>> a = a + " morning"
=> "good morning"

>> a.object_id
=> 10415700 # holds the reference to the new string object "good morning". 

>> a.frozen?
=> false

>> ObjectSpace._id2ref(10415700)
=> "good morning"
>> ObjectSpace._id2ref(10557720)
=> "good"
>> ObjectSpace._id2ref(10557720).frozen?
=> true 
```

我们可以得出结论 - 是的，字符串“good”仍然被冻结。只有发生的事情是`a`引用新对象“早上好”。只有引用分配`a`已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T19:13:06.203

[`<<`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-3C-3C)并且[`+`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-2B)在所有字符串对象上表现不同，而不仅仅是冻结的对象。一个 ( [`<<`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-3C-3C)) 修改一个字符串，另一个 ( [`+`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-2B)) 返回一个新字符串而不修改原始字符串：

与[`<<`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-3C-3C)：

```
string1 = "good"
#=> "good"
string2 = string1
#=> "good"
string1 << " morning"
#=> "good morning"
string1
#=> "good morning"
string2
#=> "good morning" 
```

与[`+`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-2B)：

```
string1 = "good"
#=> "good"
string2 = string1
#=> "good"
string1 = string1 + " morning"
#=> "good morning"
string1
#=> "good morning"
string2
#=> "good" 
```

[`Object#freeze`](http://www.ruby-doc.org/core-2.1.2/Object.html#method-i-freeze)专门设计用于禁止我在上面演示的那种行为[`<<`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-3C-3C)（它防止对象被修改），因此调用[`<<`](http://www.ruby-doc.org/core-2.1.2/String.html#method-i-3C-3C)冻结的字符串会导致错误。

# python - Tarfile 在第一个常规文件后停止

> ID：14913524
> 
> 赞同：1
> 
> 时间：2013-02-16T18:14:54.493
> 
> 标签：python, tar

我有`.tar.bz2`很多小文件的`json`文件。一个存档可能有大约数千个，并且 json 很小（低于 10kB，通常也低于 1kb）。因此，压缩后的单个存档不超过 100kB。

根据[文档](http://docs.python.org/2.6/library/tarfile.html)，以下函数应在 tar 文件中返回所有常规文件的迭代器，返回它们的 tarinfo 结构和数据。

```
import tarfile

def tariter(filename):
    with tarfile.open(filename) as archive:
        while True:
            tarinfo = archive.next()
            if tarinfo is None:
                break

            if tarinfo.isreg():
                handle = archive.extractfile(tarinfo.name)
                data = handle.read()
                handle.close()

                yield tarinfo, data 
```

然而，它只是返回一个迭代器，它返回它的第一个文件（连同内容），然后停止。显然，`archive.next()`在读取第二个成员后返回 None ，即使存档有很多文件。

我在这段代码的某个地方有错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:06:01.757

一种解决方法是`extractfile`直接使用 tarinfo 而不是名称。这有效：

```
def tariter(filename):
    with tarfile.open(filename) as archive:
        while True:
            tarinfo = archive.next()
            if tarinfo is None:
                break

            if tarinfo.isreg():
                handle = archive.extractfile(tarinfo) # LINE CHANGED
                data = handle.read()
                handle.close()

                yield tarinfo, data 
```

至于*为什么*会这样：`TarFile.next()`没有实现迭代器协议，因为它返回而*不是*`None`raise `StopIteration`。

迭代器协议有两部分：容器元素上的“外部”部分返回迭代器，以及“内部”部分，即迭代器本身。

容器必须实现`__iter__()`，它返回一个*新*对象，即迭代器。`TarFile.__iter__()`返回一个新`TarIter`对象。

迭代器本身 ( `TarIter`) 实现`__iter__()`（总是返回`self`）和`next()`. 它还必须对原始容器中的项目有自己的独立索引。这允许您在同一个容器上生成多个不同的迭代器，而不会使单独的迭代相互混淆。

`TarFile.next()`但是，它的迭代*没有*使用单独的索引，所以如果其他人使用由他们提供的伪迭代协议，`TarFile`他们会搞乱迭代。

这似乎就是这里发生的事情。在当前使用`TarFile.extractfile(filename)`中查找匹配文件，而不是您正在使用的文件。这会破坏“下一项”索引，导致在第一次调用后返回。`TarFile``TarFile.next()``TarFile.__iter__()``archive.next()``None``extractfile()`

但是，如果您使用`extractfile(tarinfo)`，则该`tarinfo`对象中有足够的元数据`TarFile`来提取字符串内容，而无需通过`archive`对象查找匹配的文件名。因此，`archive.extractfile(tarinfo)`可能比 快`archive.extractfile(tarinfo.name)`。

一般来说，集合对象（如`TarFile`）不应该*迭代*自己，而是生成一个新对象来迭代它们。仅仅存在一种`TarFile.next()`糟糕设计的气味。也许有一个很好的理由，但*你*不必使用它！

改为这样做：

```
def tariter(filename):
    with tarfile.open(filename) as archive:
        # use TarIter object for iteration over archive
        for tarinfo in archive:
            if tarinfo.isreg():
                handle = archive.extractfile(tarinfo)
                data = handle.read()
                handle.close()
                yield tarinfo, data 
```

这更清楚，我敢打赌它也会快一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:27:19.677

我不知道为什么`next()`会失败（我在本地也失败了），但这有效（并且看起来更干净）：

```
import tarfile

def tariter(filename):
    with tarfile.open(filename) as archive:
        for tarinfo in archive:
            if tarinfo.isreg():
                handle = archive.extractfile(tarinfo.name)
                data = handle.read()
                handle.close()

                yield tarinfo, data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:42:49.543

只是出于兴趣，将原始 OP 代码更改为以下作品，尽管 @upside 代码更有意义。

```
import tarfile
def tariter(filename):
    with tarfile.open(filename) as archive:
        it = archive.__iter__() # CHANGE
        while True:
            tarinfo = it.next() # CHANGE
            if tarinfo is None:
                break

            if tarinfo.isreg():
                handle = archive.extractfile(tarinfo.name)
                data = handle.read()
                handle.close()

                yield tarinfo, data 
```

# c++ - c ++：创建一个不带#include的insert_iterator

> ID：14913531
> 
> 赞同：2
> 
> 时间：2013-02-16T18:15:44.880
> 
> 标签：c++, insert-iterator

在下面的代码中，我创建了一个不包含迭代器标头的 insert_iterator。这怎么可能编译？我是 c/c++ 的新手，所以这可能会有一个明显的解释。

```
#include <list>
//#include <iterator>

int main()
{

    std::list<int> mylist(10,1);
    std::insert_iterator<std::list<int> > it(mylist,mylist.begin());

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T18:16:56.037

它恰好可以编译，因为`<list>`在您的情况下，其他一些标头也在拉动`<iterator>`。这可能适用于一个实现，但在另一个实现上会失败，甚至在当前库实现的下一个版本上也会失败。

您应该始终包含定义您使用的东西的标头，以确保它可以在任何地方编译。请注意，其他标准标头可以保证标准标头，但我认为这不是这些例外之一。

# php - 修改查找条件的哪种方法最易读和首选？

> ID：14913536
> 
> 赞同：0
> 
> 时间：2013-02-16T18:16:45.683
> 
> 标签：php, cakephp, cakephp-2.3

我经常在我的模型和行为中创建小函数，为`array`CakePHP 中的查找操作添加额外的条件，并且我一直在思考三种可能的实现这些函数的方法。它似乎总是归结为三种可能的代码模式。

我将使用一个名为的函数来演示这三种模式，该函数`limitErrorCount`将为查找查询添加一个额外的规则。

## 模式#1：参数和返回

```
public function limitErrorCount(array $conditions)
{
    $conditions['AND'][] = 'Document.errors <'=>10;
    return $conditions;
}

$conditions = array(....);
$conditions = limitErrorCount($conditions);
$records = $this->find('all',$conditions); 
```

## 模式 #2：通过引用传递

```
public function limitErrorCount(array &$conditions)
{
    $conditions['AND'][] = 'Document.errors <'=>10;
    return $conditions;
}

$conditions = array(....);
limitErrorCount($conditions);
$records = $this->find('all',$conditions); 
```

## 模式#3：返回和合并

```
public function limitErrorCount()
{
    $conditions = array('AND'=>array('Document.errors <'=>10));
    return $conditions;
}

$conditions = array(....);
$conditions = Hash::merge($conditions,limitErrorCount());
$records = $this->find('all',array('conditions'=>$conditions)); 
```

所有三种模式都有效。

我想知道这三种方法中哪种方法最好，也许有一些 PHP 专家对为什么它更好的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:34:19.513

好主意，我希望能像在 jQuery 中那样以链式方式实现它

```
$cnd = $this->Document->filterFreshOnes()->filterStarred()->filterByDaysAge('3');
$res = $this->Document->find('all', array('conditions'=>$cnd); 
```

但这需要将它保存在模型变量中，如果您忘记已经有一些过滤器，这可能会适得其反...... ;(

# php - foreach 循环，如果这个结果和上一个结果一样，跳到下一个不一样的地方

> ID：14913546
> 
> 赞同：0
> 
> 时间：2013-02-16T18:17:35.800
> 
> 标签：php, object, xpath, foreach, skip

我正在运行一个 foreach 循环以从 xml 文件中获取数据。xml 文件多次列出相同的日期，每次都有不同的数据。我需要做的是每个日期只显示一次。

基本上我需要 foreach 循环在第一个循环上显示第一个日期（对象）。如果日期（对象）在第二个、第三个、第四个循环等上相同，则跳过该循环并移至日期（对象）不同的下一个循环。这是我现在拥有的：

```
$dateResults = $xml->xpath('/rtnshowtime/filmtitle/show[preceding-sibling::shortname="AGOODDAYTODIEHARD"]');
foreach ($dateResults as $dateResult) {
    print_r($dateResult->date);
    echo "<br>";
} 
```

产生：

```
SimpleXMLElement Object ( [0] => 02152013 ) 
SimpleXMLElement Object ( [0] => 02152013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02152013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02162013 ) 
SimpleXMLElement Object ( [0] => 02162013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02162013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02162013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02162013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02172013 ) 
SimpleXMLElement Object ( [0] => 02172013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02172013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02172013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02172013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02182013 ) 
SimpleXMLElement Object ( [0] => 02182013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02192013 ) 
SimpleXMLElement Object ( [0] => 02192013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02202013 ) 
SimpleXMLElement Object ( [0] => 02202013 ) <-- this one needs to be skipped
SimpleXMLElement Object ( [0] => 02212013 ) 
SimpleXMLElement Object ( [0] => 02212013 ) <-- this one needs to be skipped 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:24:49.403

您可以尝试将日期作为键并检查日期是否已被使用。

```
$dateResults = $xml->xpath('/rtnshowtime/filmtitle/show[preceding-sibling::shortname="AGOODDAYTODIEHARD"]');

$finalResults = array();

foreach ($dateResults as $dateResult) {

    // change your simplexml object to either (int) or (string)
    $date = (int) $dateResult->date;

    // checks key for repeating date
    if (!array_key_exists($date, $finalResults)){
        // assuming you want the entire $dateResult match with date as key
        $finalResults[$date] = $dateResult
    }       

}

//  to print out the results
foreach ( $finalResult as $result ){
    foreach ( $results as $key => $value ){
        echo $key." : ".$value;
    }
}

// or if you know the date and what you want from that array
echo (string) $finalResult[2152013]['salelink'] 
```

未经测试，如果有什么不工作请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:26:30.247

您可以将日期添加到数组中，然后在循环期间检查是否存在：

```
// create array for storing unique dates
$unique_dates = array();

$dateResults = $xml->xpath('/rtnshowtime/filmtitle/show[preceding-sibling::shortname="AGOODDAYTODIEHARD"]');
foreach ($dateResults as $dateResult) 
{
    // need this to get the time attribute from the object
    $time_index = 0;

    // if the date does not exist in unique dates array
    if ( ! in_array($dateResult->date->$time_index, $unique_dates))
    {
        // add to unique dates array
        $unique_dates[] = $dateResult->date->$time_index;

        print_r($dateResult->date);
        echo "<br>";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T02:56:24.730

好的，这就是我选择的。

```
$shortname = $_GET['shortname'];
$dateURL = $_GET['date'];
$use_errors = libxml_use_internal_errors(true);
$xml = simplexml_load_file('XML/showtimes.xml');
if (!$xml) {echo "NO XML loaded<br>";}else{echo "XML IS loaded<br>";}
$results = $xml->xpath('/rtnshowtime/filmtitle[child::shortname="'.$shortname.'"]');

foreach ($results as $result) {
    echo "showtimes for ".$dateURL."<br>";
    foreach ($result->show as $result2) {
        if ($result2->date == $dateURL) {
            echo " -".$result2->time."- ";
        }
    }
} 
```

例如产生这个：

```
showtimes for 02152013
 -1300-  -1400-  -1500-  -1600-  -1700- 
```

我使用 $_GET 从 URL 获取日期和短名称，然后我使用短名称来决定我将处理 xml 中的哪部电影。然后我用第一个 foreach 产生结果。然后我在第一个 foreach 中运行第二个 foreach，专门处理包含日期和时间的子元素。然后，我使用 if 语句根据 URL 分隔我将处理的日期。由于该 if 语句，我可以在该结果中回显兄弟日期相同的所有时间。我想呼应时间，例如：1300、1400、1500、1600，最后一次后面没有逗号，但我不知道该怎么做。我尝试使用 implode()，但因为每次回显都在 if 语句中，它是一个对象而不是数组结果。我假设...我' m 对术语不是很熟悉。相反，我选择了一个空格和 - 每次之前和 - 每次之后都有空格。它现在必须工作。:)

感谢大家的帮助！堆栈溢出摇滚！

# c# - 自定义 Xml 序列化中断列表功能

> ID：14913547
> 
> 赞同：0
> 
> 时间：2013-02-16T18:17:54.600
> 
> 标签：c#, xml-serialization

好的，所以我有一个类型：

```
public class MonitorConfiguration 
{

    private string m_sourcePath;
    private string m_targetPath;

    public string TargetPath
    {
        get { return m_targetPath; }
        set { m_targetPath = value; }
    }

    public string SourcePath
    {
        get { return m_sourcePath; }
        set { m_sourcePath = value; }
    }

    //need a parameterless constructor, just for serialization
    private MonitorConfiguration()
    {
    }

    public MonitorConfiguration(string source, string target)
    {
        m_sourcePath = source;
        m_targetPath = target;
    }

} 
```

当我序列化和反序列化这些列表时，像这样

```
 XmlSerializer xs = new XmlSerializer(typeof(List<MonitorConfiguration>));

        using (Stream isfStreamOut = isf.OpenFile("Test1.xml", FileMode.Create))
        {
            xs.Serialize(isfStreamOut, monitoringPaths);
        }
        using (Stream isfStreamIn = isf.OpenFile("Test1.xml", FileMode.Open))
        {
            monitoringPaths = xs.Deserialize(isfStreamIn) as List<MonitorConfiguration>;
        } 
```

一切正常。

但是，我真的想隐藏属性的公共设置器。这可以防止它们被 XML 序列化程序序列化。所以，我实现了我自己的，像这样：

将类声明更改为：`public class MonitorConfiguration : IXmlSerializable` 并添加以下内容：

```
 public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        //make sure we read everything
        while (reader.Read())
        {
            //find the first element we care about...
            if (reader.Name == "SourcePath")
            {
                m_sourcePath = reader.ReadElementString("SourcePath");
                m_targetPath = reader.ReadElementString("TargetPath");
                // return;
            }
        }
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        writer.WriteElementString("SourcePath", m_sourcePath);
        writer.WriteElementString("TargetPath", m_targetPath);
    } 
```

这似乎可行，但是，我只从列表中取出第一个项目，所有其他项目都被遗忘了。我已经尝试过使用和不使用当前注释掉的返回。我在这里做错了什么？

需要注意的是，这只是说明问题的一段代码；我使用的 XML 序列化技术仅限于我的永恒技工。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:09:06.253

[这篇 CodeProject 文章](http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly)解释了如何在使用 IXmlSerializable 时避开一些陷阱。

具体来说，您可能需要`reader.ReadEndElement();`在找到所有元素后调用`ReadXml`（请参阅文章中的*如何实现 ReadXml？*部分）。

# php - 从附加的字符串创建新类

> ID：14913548
> 
> 赞同：0
> 
> 时间：2013-02-16T18:18:02.630
> 
> 标签：php

是否可以在一行中执行以下操作？例如，像`$obj=new "entry_{$type}";` 谢谢

```
$class="entry_{$type}";
$obj=new $class(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:34:33.753

是的，但前提是你真的想要它。有点尴尬：

```
$obj = new ${!${''}="entry_$type"}(); 
```

来自：[Code-Golf：一行 PHP 语法](https://stackoverflow.com/questions/3011595/code-golf-one-line-php-syntax)

PHP 希望最终[转移到](https://wiki.php.net/rfc/ast_based_parsing_compilation_process#request_for_commentsmoving_to_an_ast-based_parsingcompilation_process)使用抽象语法树的适当解析器，这可能会收紧当前阻止的语法漏洞，例如，`new ("entry_$type")()`或类似的东西。

# php - 在客户后端和我的前端之间创建一个“中间件后端”是个好主意吗？

> ID：14913549
> 
> 赞同：1
> 
> 时间：2013-02-16T18:18:03.693
> 
> 标签：php, performance, frameworks, proxy, backend

事情是这样的，我有几个项目，其中客户有一个可怕的后端定义，以多种格式返回数据和很多我不需要的东西。由于我在做移动 webapps，我在 php 中创建了一个中间层，使用 slimframework (www.slimframework.com)，它基本上给了我一个 RESTFUL 语法，也删除了我不需要的所有数据，并且采用了我想要的格式 (JSON) . 当然，这个中间层将部署在客户后端，所以即使让我很容易前端实现，我有点担心性能，也给“链”增加了另一个断点。为了提高性能，每次调用我的 slimframework 时，我都会将唯一的 JSON 数据保存为缓存，并且我有一个文本文件，我可以在其中轻松配置每个请求的最大秒数。

从技术上讲，我用 curl 阅读真正的 Web 服务，转换为 PHP 对象，删除并更改我需要的所有数据，然后制作一个 json_encode ......另外，我还有另一个想法，比如在 cron 中创建一个批处理，拉所有来自客户的 Web 服务并生成本地 jsons ......不要担心没有得到最新的数据，因为它是一个视频追赶应用程序，所以我缓存了每个 WS，但最终的 url 没有被缓存。

我的工作流程有更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:22:59.140

听起来不错。

当然，您添加了一个新的潜在故障点，但您也添加了一个新的位置，可以在该位置上灵活地捕获和处理问题——听起来现有的后端本身不能被信任。对您的拦截层进行单元/压力测试，并完全相信您不会增加*不必要*的新风险。

至于性能？好吧，与任何事情一样，您需要对其进行基准测试，然后平衡结果与其他好处。我喜欢一个好的抽象层^†，只要你没有看到拒绝服务的性能下降（而且我不明白你为什么应该这样做），它几乎肯定是值得的。

如果没有别的，您将抽象出您似乎无法控制的数据后端，这将有效地让您完全灵活地在某天将其切换为其他东西。

如果后端自发改变？好吧，至少您只需要调整拦截层的一些隔离部分，而不是依赖于第三方数据的面向客户的前端的每一部分。

总之，在我看来，这似乎是一个非常强大的解决方案，我认为您绝对应该继续使用它。

* * *

^(^†当然，您不需要*太多*。由我们决定有多少是合适的。我通常发现*零*是一个不可接受的答案。:))

# mysql - mysql 将列数据类型复制到另一个表

> ID：14913555
> 
> 赞同：5
> 
> 时间：2013-02-16T18:18:25.567
> 
> 标签：mysql

有没有办法将列的结构从已经填充的表复制到一个空的新表？我只是询问是否复制没有数据的结构

示例：我们有一张桌子

```
CREATE TABLE `animals` (
`animal` varchar(11) NOT NULL,
   `food` varchar(11) NOT NULL,
  PRIMARY KEY (`animal`)
 ) ENGINE=InnoDB

INSERT INTO `animals` (`animal`, `food`) VALUES
('cat', 'chips'),
('dog', 'bones'),
('shark', 'ppl'); 
```

还有一个新表`predators`，我只想创建一个列，但数据类型与动物的列类型相同。

有没有办法将 SHOW COLUMNS/FIELDS 与 CREATE TABLE 结合起来，或者使用具有某种类型（如 VARCHAR(17)）的列创建表，然后将其更改为与`animal`列相同的类型？

我知道这是一个简单的问题，但我没有找到答案

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T18:22:15.997

如果要复制数据：

```
INSERT INTO newTable (col1, col2) 
SELECT col1, col2 FROM otherTable 
```

如果要复制表结构：

> 用于`LIKE`根据另一个表的定义创建一个空表，包括在原始表中定义的任何列属性和索引：
> 
> ```
> CREATE TABLE new_tbl LIKE orig_tbl; 
> ```
> 
> 使用与原始表相同版本的表存储格式创建副本。原始表需要 SELECT 权限。

[文档](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

如果要复制结构和数据：

```
CREATE TABLE animals2 AS 
SELECT *
FROM animals ; 
```

如果您想复制没有数据的结构（但不是所有列）：

```
CREATE TABLE animals2 AS 
SELECT animal                -- only the columns you want
FROM animals 
WHERE FALSE;                 -- and no data 
```

# arrays - 如何找到落在给定区间内的数组元素？

> ID：14913556
> 
> 赞同：5
> 
> 时间：2013-02-16T18:18:26.143
> 
> 标签：arrays, algorithm

这是一道面试题。

给定一个整数数组和一个区间*流*（整数对），找出该数组中落入流的每个区间的元素。你会使用什么数组预处理？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T18:24:33.110

一种选择是通过将数组按升序排序来预处理数组。完成此操作后，您可以通过对已排序的数组进行两次二进制搜索来找到位于某个区间内的所有元素 - 一次查找大于或等于区间开始的第一个元素，另一次查找最后一个元素不大于间隔的端点 - 然后遍历数组以输出该范围内的所有元素。

如果使用快速排序或堆排序等标准排序算法，这需要 O(n log n) 时间进行预处理，但如果使用基数排序，则可以在 O(n log U) 时间内完成（这里，U 是范围）。然后每个查询花费时间 O(log n + k)，其中 n 是元素的数量，k 是范围内的元素数量。

如果您想变得花哨，可以使用[van Emde Boas 树](http://en.wikipedia.org/wiki/Van_Emde_Boas_tree)（一种用于存储整数的专用数据结构）以指数方式加快速度。如果您正在使用的最大整数值是 U，那么您可以在 O(n log log U) 时间内构建结构，然后在 O(log log U) 时间内进行端点范围搜索。然后，您可以在 O(log log U) 的时间内找到范围内的所有元素，给出一个 O(k log log U) 算法来查找范围内的所有匹配项。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T13:55:47.600

答案取决于您的要求：

> 你有多少间隔说M？

当然，使用 M * O(N logN) 是矫枉过正的，尤其是当 M 很大并且间隔也很大时。

**另一种方法：** 使用 O(N) 额外空间。

```
prefix[i] = number of numbers in range 0 to i 
```

可以在 O(N) 时间内完成。

现在，每个查询都需要 O(1) 时间：

```
query[l,r] = prefix[r] - prefix[l - 1] + 1 
```

所以总时间复杂度是`O(N logN + M)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T18:25:40.320

对数组进行排序，然后进行二分查找，查找数组中大于区间 start 的第一个元素的索引，然后再次查找小于区间 end 的第一个元素，并返回其间的所有整数. 对于`O(log N)`每个查找，其中 N 是整数的数量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T20:11:38.540

如何根据元素索引数组呢？

```
for (i in original_array) indexed_array[original_array[i]] = original_array[i]

for (j in stream) {
  for (k=stream[j][0]; k<=stream[j][1]; k++) 
    if (indexed_array[k]) return indexed_array[k]
} 
```

或者放置索引而不是整数：

```
for (i in original_array) indexed_array[original_array[i]] = i 
```

# c - Apache Web 服务器 - 用 c 编写的页面

> ID：14913559
> 
> 赞同：1
> 
> 时间：2013-02-16T18:18:43.357
> 
> 标签：c, apache, web-applications, apache2

我想用 c 编写一个网页并由 apache 提供服务，纯粹是作为一个学习练习。

问题是我不知道从哪里开始 - apache 将如何为页面提供服务？

有 mod php 和 mod perl 等，但使用普通的旧 c，我不确定这将如何工作。

一旦收到请求，我想向标准输出发送一些 html 就足以发送响应，我只是不知道从哪里开始请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:21:09.437

您可以将您的 C 程序制作成二进制文件（即编译它）并将其放入`cgi-bin`文件夹中。

查看[教程](http://www.cs.tut.fi/~jkorpela/forms/cgic.html) 或者，您可以看到[`Wt`](http://www.webtoolkit.eu/wt)虽然它是 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:56:50.633

或者您可以在 Apache 中使用服务器端包含（SSI）。那里有很多不错的教程，尤其是 Apache 的官方文档。

# java - 为什么动作映射“*_*”和“*”一样工作？

> ID：14913560
> 
> 赞同：2
> 
> 时间：2013-02-16T18:18:46.483
> 
> 标签：java, struts2, struts, url-mapping, wildcard-mapping

有两个动作，`*_*`前面是`**`（默认命名空间在特定命名空间之后才起作用（除非特定命名空间扩展它），这无关紧要）

```
<package name="default" namespace="" extends="struts-default"></package>
<package name="admin" namespace="/admin" extends="default">
    <global-results>
       <result>/admin/result.jsp</result>
    </global-results>

    <action name="login" class="org.cc.action.AdminAction">
       <result>/admin/admin.jsp</result>
    </action>
    <action name="*_*" class=org.cc.action.{1}Action" method="{2}">
    </action>
</package>

<package name="error" namespace="" extends="default">
   <action name="**" >
     <result>/error.jsp</result>
   </action>
</package> 
```

我为捕获不存在的操作定义了一个错误页面

然后我测试了这个动作

```
localhost:8080/myProjectName/admin/AdminAction.action 
```

（它不存在）

但它被命名的操作捕获，`"*_*"`因为显示`AdminActionAction.class`未找到异常。

然后我用了`*__*`（有两个`'_'`）。它运行良好并显示了`error.jsp`.

格式喜欢`"*a*"`或`"*#*"`不起作用，即使`#`在动作的名称中没有 a 和，他们也会捕捉到任何动作。

我使用 Struts 2.3.4。

之间是否有任何文件，`*`并且`*`必须至少有两个字符，否则就像 一样`*`？

这是异常的详细信息

```
Unable to instantiate Action, org.cc.action.AdminActionAction,  defined for     'AdminAction' in namespace '/admin'org.cc.action.AdminActionAction
com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:319)
com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:400)
com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:194)
org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)

java.lang.ClassNotFoundException: org.cc.action.AdminActionAction
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
com.opensymphony.xwork2.util.ClassLoaderUtil.loadClass(ClassLoaderUtil.java:152)
com.opensymphony.xwork2.ObjectFactory.getClassInstance(ObjectFactory.java:108)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:161)
com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:151)
com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:121)
com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:300)
com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:400)
com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:194)
org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) 
```

很容易看出

```
localhost:8080/myProjectName/admin/AdminAction.action 
```

（它不存在）被抓住了

```
<action name="*_*" class="net.org.cc.{1}Action" method="{2}"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:44:54.350

注册了一个错误[https://issues.apache.org/jira/browse/WW-3985](https://issues.apache.org/jira/browse/WW-3985)，但是快速解决方法是使用`**_**`它将提供所需的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:28:15.023

在上面的配置中，映射是使用操作名称`AdminAction`和命名空间创建的`/admin`。这就是为什么你得到一个异常的原因，因为动作配置匹配器找到了 patten 的动作配置`"*_*"`。但它找不到`"*__*"`相同动作名称的模式。因此回退到默认命名空间`""`，并且在这个命名空间中它匹配`"**"`模式作为错误页面的结果。

实际上对于这个动作名称创建了两个相似的匹配器，其中一个匹配。创建什么匹配器以及使用什么模式？

默认运行时配置实现使用`looseMatch`硬编码为`true`. javadoc中有描述

> 模式可以选择“松散地”匹配。当模式的结尾匹配*[^*]*$（通配符，无通配符，通配​​符）时，如果模式失败，它也被匹配，就好像最后两个字符不存在一样。目标是支持传统的“*！*”语法，其中“！*”是可选的。

正如评论中提到的@Quaternion，带有paterrn 的匹配器已`*`添加到列表中。如前所述的任何其他内容。

# html - 如何为 Aptana 添加自定义 html 属性描述？

> ID：14913563
> 
> 赞同：0
> 
> 时间：2013-02-16T18:19:13.650
> 
> 标签：html, angularjs, aptana

我正在使用一个 javascript 框架，该框架需要 HTML 中的自定义属性...而 Aptana 将其显示为无效（带下划线）且没有描述。我想添加其中一些，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-09T07:08:12.527

阻止编辑器显示我所做的属性警告的快速修复是：转到 Windows > Preferences > Aptana Studio > Validation > HTML Tidy Validator > Attributes。然后将“专有属性”设置为忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:14:54.643

您可以为 AngularJS 属性和指令添加前缀`data-`，它们仍然可以工作。例如：

```
<body data-ng-app="app" >
    <div data-ng-controller="TestController">
        <span test-directive>
            {{test}}     
        </span>                        
    </div>        
</body> 
```

这是[JSFiddle](http://jsfiddle.net/FDKVC/5/)来检查一下。

以这种方式认为 Aptana 会将属性视为有效，但您必须验证这一点。

* * *

要手动添加属性，请查看此[答案](https://stackoverflow.com/a/8917925/617996)。

# scheme - 颠倒的文字

> ID：14913568
> 
> 赞同：1
> 
> 时间：2013-02-16T18:20:04.017
> 
> 标签：scheme, racket

你将如何设计一个程序来接收一串小写字母并产生颠倒的字符串？

所以如果我输入`home`

我 `ǝɯoɥ`倒过来了。

我已经尝试在书中寻找入门，但没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T21:39:05.820

试试这个，有点蛮力的方法，但对大写、小写和数字字符效果很好——所有其他字符都按原样显示：

```
(define upside-map '#hash(
  (#\a . #\ɐ) (#\b . #\q) (#\c . #\ɔ) (#\d . #\p) (#\e . #\ǝ) (#\f . #\ɟ)
  (#\g . #\ƃ) (#\h . #\ɥ) (#\i . #\ı) (#\j . #\ɾ) (#\k . #\ʞ) (#\l . #\ן)
  (#\m . #\ɯ) (#\n . #\u) (#\o . #\o) (#\p . #\d) (#\q . #\b) (#\r . #\ɹ)
  (#\s . #\s) (#\t . #\ʇ) (#\u . #\n) (#\v . #\ʌ) (#\w . #\ʍ) (#\x . #\x)
  (#\y . #\ʎ) (#\z . #\z) (#\A . #\∀) (#\B . #\) (#\C . #\Ɔ) (#\D . #\◖)
  (#\E . #\Ǝ) (#\F . #\Ⅎ) (#\G . #\⅁) (#\H . #\H) (#\I . #\I) (#\J . #\s)
  (#\K . #\⋊) (#\L . #\˥) (#\M . #\W) (#\N . #\N) (#\O . #\O) (#\P . #\Ԁ)
  (#\Q . #\Ό) (#\R . #\ᴚ) (#\S . #\S) (#\T . #\⊥) (#\U . #\∩) (#\V . #\Λ)
  (#\W . #\M) (#\X . #\X) (#\Y . #\⅄) (#\Z . #\Z) (#\0 . #\0) (#\1 . #\Ɩ)
  (#\2 . #\ᄅ) (#\3 . #\Ɛ) (#\4 . #\ㄣ) (#\5 . #\ϛ) (#\6 . #\9) (#\7 . #\ㄥ)
  (#\8 . #\8) (#\9 . #\6)))

(define (flip-string str)
  (list->string
   (map (lambda (c)
          (hash-ref upside-map c (const c)))
        (reverse (string->list str))))) 
```

例如：

```
(flip-string "Hello World")
=> "pןɹoM oןןǝH" 
```

作为参考，我使用了这个取自维基百科的转换[表。](http://en.wikipedia.org/wiki/Transformation_of_text#Upside-down_text)上面的解决方案有一点小问题：我无法使它适用于`字符（翻转`B`），unicode 值为`#\u10412`- 因为它不适合 16 位 unicode 字符，因此无法表示. 我不知道 Racket 不支持编码要求超过 16 位的字符。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:06:51.320

首先你的网站必须支持Unicode，Unicode由数千个字符组成，Unicode的前127个是ASCII。可以通过将一个字符一个字符转换为一个 Unicode 符号来创建看起来是颠倒的文本，该符号看起来像字符的颠倒版本，例如，要转换“6”，您可以使用“9”，但翻转版本的“f”是“ɟ”，它是一个拉丁字符，Unicode 编号为 607（十六进制代码 025F）

从技术上讲，您需要两个文本区域框，一个用于原始文本，另一个用于翻转文本，还需要一个 Javascript，使用第一个文本框中的 onkeyup Javascript 钩子在每次按键时调用 upsideDownText() 函数是这样发布的：

```
<textarea rows="5" cols="70" id="src" onkeyup="upsideDownText()"></textarea> 
```

然后在 upsideDownText() Javascript 函数中进行文本处理，如下所示：

```
<script type="text/javascript">
function upsideDownText() {
  var srcText = document.getElementById( 'src' ).value.toLowerCase();
  var out = '';
  for( var i = srcText.length - 1; i >= 0; --i ) {
    var ch = srcText.charAt( i );
    if( ch == 'a' ) {
      out += '\u0250' }
    } else if( ch == 'b' ) {
      out += 'q' }
    } else if( ch == 'c' ) {
      out += '\u0254'
    // etc....
    } else {
      out += ch
    }
  }
  document.getElementById( 'dest' ).value = out;
}
</script> 
```

获取由 id="src" 标识的文本框的内容，并使用 toLowerCase() 方法将字符串转换为小写。然后从字符串的末尾开始逐个字符地循环遍历字符串。一个大的 if-then-else-if 块处理字符转换。最后将转换后的字符串推送到id="dest"标识的文本框中，也就是下方的文本框。

[您可以从 Source twiki.org](http://twiki.org/cgi-bin/view/Blog/BlogEntry201110x2?raw=on)找到有关如何逐步执行此操作的完整列表`

# ruby - 无法安装 pg gem

> ID：14913572
> 
> 赞同：1
> 
> 时间：2013-02-16T18:20:16.053
> 
> 标签：ruby, gem, pg

尝试安装 pg gem 时遇到以下问题。我的操作系统是 Ubuntu 12.10。我已经安装了 postgresql（通过 postgres 页面上的安装程序）。我也完成了 apt-get install of `libpq5`and `libpq-dev`。这是错误：

```
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /home/sauronnikko/.rvm/rubies/ruby-1.9.3-p385/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/sauronnikko/.rvm/rubies/ruby-1.9.3-p385/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib 
```

你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-10T21:21:51.380

```
sudo apt-get install postgresql libpq-dev 
```

然后

```
bundle install 
```

看到这个页面： [Rails 3 - 无法安装 pg gem](https://stackoverflow.com/questions/9668753/rails-3-cant-install-pg-gem)

# vb.net - 未定义类型“DoWorkEventArgs”

> ID：14913578
> 
> 赞同：0
> 
> 时间：2013-02-16T18:20:30.667
> 
> 标签：vb.net

```
Public Sub Is_Prime(sender As Object, e As DoWorkEventArgs) Handles BackgroundWorker1.DoWork 
```

我收到错误“未定义类型'DoWorkEventArgs'。”。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:22:32.147

> 怎么了？

您可能忘记导入定义类的`System.ComponentModel`名称空间。[`DoWorkEventArgs`](http://msdn.microsoft.com/en-us/library/system.componentmodel.doworkeventargs.aspx)

您可以将以下语句添加到文件顶部：

```
Imports System.ComponentModel 
```

或者，如果您不想导入命名空间，则可以完全限定该类：

```
Public Sub Is_Prime(sender As Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork 
```

# android - Android Activity 高度太长，如何滑动到底部？

> ID：14913580
> 
> 赞同：0
> 
> 时间：2013-02-16T18:20:40.743
> 
> 标签：android, device, swipe, flip

我有一个活动（单个），如果我翻转设备，我只能看到活动的一半。我有两个 EditText 和一个 Button，因为我无法滑动到底部，所以我无法到达它们。如果我翻转设备一切正常。

有什么我必须调用的方法才能刷卡吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:31:09.173

1.  `ScrollView`正如尼克所说的那样使用。

2.如果您没有为景观模式设计，请设置固定方向（即纵向或横向）您可以像这样在清单文件中设置固定方向 `android:screenOrientation="portrait"`（您可以将其应用于您的活动以及整个应用程序)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:22:23.813

使用[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)来包装您的布局。

# jquery - 如何为图片添加外部链接？

> ID：14913582
> 
> 赞同：0
> 
> 时间：2013-02-16T18:21:06.710
> 
> 标签：jquery, hyperlink

想要将图像链接到外部链接，我会说它在 .wrap 中，但似乎无法开始工作。我检查了大部分问题，但我尝试的一切都无济于事。

```
var photos = [
{ file: 'image1.png', tag: 'search', href: 'http://www.googl.com'},
{ file: 'image2.png', tag: 'search', href: 'http://www.bing.com'},
{ file: 'image3.png', tag: 'search', href: 'http://www.yahoo.com' }
];

var photoCount = photos.length;
var pageItems = [];
for (var i = 0; i < photoCount; i++) {
    if (photos[i].tag != tag && tag != 'all') {
        continue;
    }
    var img = $('<img></img>')
    .attr('src', 'static/images/tv/' + photos[i].file)
    .addClass('slider-photo');
    pageItems.push({item: img,caption: descDiv});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:36:47.313

```
var photos = [
    { file: 'image1.png', tag: 'search', href: 'http://www.googl.com'},
    { file: 'image2.png', tag: 'search', href: 'http://www.bing.com'},
    { file: 'image3.png', tag: 'search', href: 'http://www.yahoo.com' }
];

$.each(photos,function(k,v){
    $('<img />')
        .attr('src', '../static/images/tv/' + v.file)
        .addClass('slider-photo')
        .append('body')
        .click(function(){
            document.location.href = v.href;
        })
}) 
```

[http://codepen.io/anon/pen/npsAz](http://codepen.io/anon/pen/npsAz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:40:34.997

只需`<a>`在它周围添加一个标签..

```
 var img = $('<img></img>')
.attr('src', 'static/images/tv/' + photos[i].file)
.addClass('slider-photo');
var finalOutput='<a href="externallink">'+img+'<a>'; //<-----here
pageItems.push({item: finalOutput,caption: descDiv}); 
```

但是..希望您也有其他代码，将创建的图像附加到文档中..

# c - calloc() 替换中的内存对齐问题？

> ID：14913585
> 
> 赞同：1
> 
> 时间：2013-02-16T18:21:48.213
> 
> 标签：c, embedded, heap-memory

使用下面的代码，我正在尝试编写一个包装器，`calloc()`以便我可以通过将大小存储在分配内存的第一个 2/4 字节中来跟踪分配的堆内存。当我单独测试时，它似乎没问题。但是，当我将它替换为我的系统时`calloc()`，它会产生问题......有时意味着它会返回`NULL`，即使有很多可用的堆。

我正在使用 IAR 编译器在 ARM 板上运行它：

```
void *MyCalloc(size_t size) {
    size_t new_size = ((size + 3) & ~0x3); 
    size_t *result = calloc(1,new_size + sizeof(size_t)); 
    if ( result ) { 
        printf("MyCalloc addr: %p\n", result);
        *result = (new_size + sizeof(size_t));
        result = result + sizeof(size_t);
    } 
return result;
} 
```

知道为什么这会导致问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T18:59:16.963

您的代码有几个问题：

1.  在编写堆函数或堆包装器时，不要使用指针算法来存储堆头。使用结构。这就是他们的目的。

2.  您在代码中引入了许多整数溢出错误。如果有人向您询问`calloc()`0xffffffffe 字节，您将返回 4 个字节。如果他们向该分配写入超过 4 个字节，则会发生堆溢出。

3.  您`calloc()`的签名与`calloc()`. 根据您换出的方式`calloc()`，这可能会成为一个问题。

4.  `calloc()`并`malloc()`自然返回对齐的指针。在 x86 中，它们需要返回一个指向至少 8 字节对齐的应用程序的指针，而在 x64 中，它们需要返回一个至少 16 字节对齐的指针。

    在您的代码中，您使用真正的 calloc 来执行“繁重的工作”（即作为“原始分配器”），这很好，这将返回一个 8 或 16 字节对齐的指针，但是当您返回一个指针时在该结构的 4 字节中，您的 calloc 最终会返回一个指向调用者的非对齐指针，这可能会给调用您的 calloc 替换的人带来问题。

尝试一些类似这样的代码：

```
 typedef struct 
 {
    size_t cbSize;
 } MyAwesomeHeapHeader;
 // TODO: ensure that MyAwesomeHeapHeader is 8-byte aligned on x86 and 16-byte aligned on x64 (or just 16-byte aligned on both).

 void* MyAwesomeMalloc(size_t cbSize)
 {
    MyAwesomeHeapHeader* header;
    void* internalAllocatorPtr;
    size_t cbAlloc;
    // TODO: Maybe I want a heap footer as well?

    // TODO: I should really check the following for an integer overflow:
    cbAlloc = sizeof(MyAwesomeHeapHeader) + cbSize; 
    internalAllocatorPtr = MyAwesomeRawAllocator(cbAlloc); // at the moment you're using the real calloc for this, but you could use malloc or write your own raw allocator
    // TODO: Check for null

    header = (MyAwesomeHeapHeader*)internalAllocatorPtr;
    header->heapSize = cbSize;
    // TODO: other fields here.

    return (uint8_t*)(internalAllocatorPtr) + sizeof(MyAwesomeHeapHeader);
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T18:36:56.430

你的问题是这一行：

```
result = result + sizeof(size_t); 
```

通过指针加法，数字隐式乘以指针的大小。所以

```
result = result + 1; 
```

将结果指针向前移动`sizeof(size_t)`字节。这就是你想要的。因为

```
result = result + sizeof(size_t); 
```

将结果指针向前移动`sizeof(size_t) * sizeof(size_t)`字节。

因此，`result`指针没有指向正确的位置，调用代码将溢出分配的缓冲区的末尾，从而破坏堆。

# codeigniter - 如何将杂货杂货嵌入另一个视图中？

> ID：14913586
> 
> 赞同：0
> 
> 时间：2013-02-16T18:21:49.270
> 
> 标签：codeigniter, continuous-integration, grocery-crud

我有一个 CI 视图，它使用 jquery 选项卡来显示一些内容。其中一个选项卡加载另一个使用杂货杂货的控制器。所以初始显示嵌入在这个视图中。但是，如果我尝试编辑或更新它会在一个完全独立的页面中打开它，然后对杂货店的所有操作都在一个单独的页面中。如何在 CI 视图中嵌入杂货杂货？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T01:20:04.747

杂货店 CRUD 尚不支持此功能，但对于尚未发布的 1.4 版的新大版本将支持此功能。如果你想在你的项目中实现 alpha 版本，你可以简单地从 github [https://github.com/scoumbourdis/grocery-crud](https://github.com/scoumbourdis/grocery-crud) ( [https://github.com/scoumbourdis/grocery-crud下载最新的 zip 文件archive/master.zip](https://github.com/scoumbourdis/grocery-crud/archive/master.zip)）并简单地转到： application/config/grocery_crud.php 并更改行：

```
 $config['grocery_crud_dialog_forms'] = false; 
```

到：

```
 $config['grocery_crud_dialog_forms'] = true; 
```

实际上就是这样:)。您可以查看一些 scrennshort 以确保这是您所需要的。

![在此处输入图像描述](../Images/518c2df681fde10eb6b4d0417148dba7.png)

![在此处输入图像描述](../Images/cfd6356130a4c7f2bb1bf3b2d70eda1a.png)

我建议您等待，至少等待 BETA 版本发布，因为它还没有 100% 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T09:11:52.300

您应该允许使用 ajax 调用发送 csrf 以允许在我们使用时使用 ajax 加载文件

```
$config['csrf_protection'] = TRUE; 
```

我可以在哪里编辑以通过 ajax 调用发送 codeigniter 的 CSRF？

# css - 使用 Sass 时出错

> ID：14913588
> 
> 赞同：0
> 
> 时间：2013-02-16T18:22:08.593
> 
> 标签：css, sass, compass-sass

您好，我正在尝试在项目中使用 SASS，但遇到了问题，我想知道是否有人可以提供帮助？

我创建了两个样式表。一种称为defaults.scss，一种称为styles.scss。在 defaults.scss 我声明了以下内容：

`$mainColor: #848484;`

然后我尝试使用以下命令在我的 styles.scss 中调用 $mainColor：

```
nav ul { 
 list-style: none outside none;
 margin: 0; font-size: 1.2em;
 color: $mainColor; 
 padding: 50px 0 0 0; 
 font-weight: bold; 
 text-align: center;
} 
```

但我收到以下错误消息：`Syntax error: Undefined variable: "$mainColor".`

谁能看到我做错了什么？我有指南针在运行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:35:45.270

如果理解正确，您有两个 .scss 文件。我通常做的是有一个 styles.scss 并在该文件中导入所有其他 .scss 样式表。我认为他们称它们为局部或其他东西。这样您的主要 style.scss 会将所有 .scss 文件一起编译到 .css 文件中。现在我不认为你的两个文件是相互了解的。您的主要样式.scss 应该看起来像这样：

```
@import "reset.scss";
@import "global.scss";
@import "structure.scss";
@import "colors.scss";
@import "etc.scss"; 
```

确保它们符合您的预期级联顺序 - 因为这就是它们将被混合在一起的方式。在您的情况下，先默认，然后再主。

当您也开始添加媒体查询时会变得很棘手 - 但我认为这应该可以解决您的问题。

在您的 html 中，您只需要调用整个操作输出的 .css 文件。

`<link rel="stylesheet" href="css/style.css">`或者无论你要去哪里。只有一个。

# css - IE 10 中 colgroup 的渐变背景

> ID：14913598
> 
> 赞同：1
> 
> 时间：2013-02-16T18:23:19.163
> 
> 标签：css, gradient, internet-explorer-10, linear-gradients

我正在尝试在使用 colgroup 的列中使用渐变背景。这适用于除 IE10 之外的所有新浏览器。这是我的样式代码：

```
background: linear-gradient(to bottom,  #ffffff 0%,#ebebeb 100%); 
```

渐变确实适用于像 div 这样的块元素。这是一个错误吗？有没有办法来解决这个问题？ [![例子](../Images/08725f3533394ef1ca06882734a1ca9a.png)](https://i.stack.imgur.com/cW2FO.png)

# javascript - 在函数声明之前使用否定的目的是什么？

> ID：14913599
> 
> 赞同：1
> 
> 时间：2013-02-16T18:23:27.260
> 
> 标签：javascript, twitter-bootstrap

在 twitter bootstrap 源代码中，我发现了以下内容：

```
!function ($) {

  "use strict"; // jshint ;_; 
```

我以前从未遇到过这样的建筑。这是什么意思？它看起来像 IIFE，但我不确定它是否等同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:24:43.467

它将它变成一个表达式，通常后跟`()`. 它比使用括号节省了一个字节，代价是浪费了大约一百个 StackOverflow 问题。

# verilog - Verilog 到 FSM 转换

> ID：14913601
> 
> 赞同：1
> 
> 时间：2013-02-16T18:23:52.603
> 
> 标签：verilog, fsm, system-verilog

我有一个用 Verilog 编写的程序，我想自动将其转换为 FSM。这可能吗（只是为了形象化）？

这是代码：

```
module pci(reset,clk,frame,irdy,trdy,devsel,idsel,ad,cbe,par,stop,inta,led_out);
    input reset;
    input clk;
    input frame;
    input irdy;
    output trdy;
    output devsel;
    input idsel;
    inout [31:0] ad;
    input [3:0] cbe;
    inout par;
    output stop;
    output inta;
    output [3:0] led_out;

parameter DEVICE_ID = 16'h9500;
parameter VENDOR_ID = 16'h106d;     // Sequent!
parameter DEVICE_CLASS = 24'hFF0000;    // Misc
parameter DEVICE_REV = 8'h01;
parameter SUBSYSTEM_ID = 16'h0001;  // Card identifier
parameter SUBSYSTEM_VENDOR_ID = 16'hBEBE; // Card identifier
parameter DEVSEL_TIMING = 2'b00;    // Fast!

reg [2:0] state;
reg [31:0] data;

reg [1:0] enable;
parameter EN_NONE = 0;
parameter EN_RD = 1;
parameter EN_WR = 2;
parameter EN_TR = 3;

reg memen; // respond to baseaddr?
reg [7:0] baseaddr;
reg [5:0] address;

parameter ST_IDLE = 3'b000;
parameter ST_BUSY = 3'b010;
parameter ST_MEMREAD = 3'b100;
parameter ST_MEMWRITE = 3'b101;
parameter ST_CFGREAD = 3'b110;
parameter ST_CFGWRITE = 3'b111;

parameter MEMREAD = 4'b0110;
parameter MEMWRITE = 4'b0111;
parameter CFGREAD = 4'b1010;
parameter CFGWRITE = 4'b1011;

`define LED
`ifdef LED
reg [3:0] led;
`endif

`undef STATE_DEBUG_LED
`ifdef STATE_DEBUG_LED
assign led_out = ~state;
`else
`ifdef LED
assign led_out = ~led;  // board is wired for active low LEDs
`endif
`endif

assign ad = (enable == EN_RD) ? data : 32'bZ;
assign trdy = (enable == EN_NONE) ? 'bZ : (enable == EN_TR ? 1 : 0);
assign par = (enable == EN_RD) ? 0 : 'bZ;
reg devsel;

assign stop = 1'bZ;
assign inta = 1'bZ;

wire cfg_hit = ((cbe == CFGREAD || cbe == CFGWRITE) && idsel && ad[1:0] == 2'b00);
wire addr_hit = ((cbe == MEMREAD || cbe == MEMWRITE) && memen && ad[31:12] == {12'b0, baseaddr});
wire hit = cfg_hit | addr_hit;

always @(posedge clk)
begin
    if (~reset) begin
        state <= ST_IDLE;
        enable <= EN_NONE;
        baseaddr <= 0;
        devsel <= 'bZ;
        memen <= 0;
`ifdef LED
        led <= 0;
`endif
    end
    else    begin

    case (state)
        ST_IDLE: begin
            enable <= EN_NONE;
            devsel <= 'bZ;
            if (~frame) begin
                address <= ad[7:2];
                if (hit) begin
                    state <= {1'b1, cbe[3], cbe[0]};
                    devsel <= 0;
                    // pipeline the write enable
                    if (cbe[0])
                        enable <= EN_WR;
                end
                else begin
                    state <= ST_BUSY;
                    enable <= EN_NONE;
                end
            end
        end

        ST_BUSY: begin
            devsel <= 'bZ;
            enable <= EN_NONE;
            if (frame)
                state <= ST_IDLE;
        end

        ST_CFGREAD: begin
            enable <= EN_RD;
            if (~irdy || trdy) begin
                case (address)
                    0: data <= { DEVICE_ID, VENDOR_ID };
                    1: data <= { 5'b0, DEVSEL_TIMING, 9'b0,  14'b0, memen, 1'b0};
                    2: data <= { DEVICE_CLASS, DEVICE_REV };
                    4: data <= { 12'b0, baseaddr, 8'b0, 4'b0010 }; // baseaddr + request mem < 1Mbyte
                    11: data <= {SUBSYSTEM_ID, SUBSYSTEM_VENDOR_ID };
                    16: data <= { 24'b0, baseaddr };
                    default: data <= 'h00000000;
                endcase
                address <= address + 1;
            end
            if (frame && ~irdy && ~trdy) begin
                devsel <= 1;
                state <= ST_IDLE;
                enable <= EN_TR;
            end
        end

        ST_CFGWRITE: begin
            enable <= EN_WR;
            if (~irdy) begin
                case (address)
                    4: baseaddr <= ad[19:12];  // XXX examine cbe
                    1: memen <= ad[1];
                    default: ;
                endcase
                address <= address + 1;
                if (frame) begin
                    devsel <= 1;
                    state <= ST_IDLE;
                    enable <= EN_TR;
                end
            end
        end

        ST_MEMREAD: begin
            enable <= EN_RD;
            if (~irdy || trdy) begin
                case (address)
`ifdef LED
                    0: data <= { 28'b0, led };
`endif
                    default: data <= 'h00000000;
                endcase
                address <= address + 1;
            end
            if (frame && ~irdy && ~trdy) begin
                devsel <= 1;
                state <= ST_IDLE;
                enable <= EN_TR;
            end
        end

        ST_MEMWRITE: begin
            enable <= EN_WR;
            if (~irdy) begin
                case (address)
`ifdef LED
                    0: led <= ad[3:0];
`endif
                    default: ;
                endcase
                address <= address + 1;
                if (frame) begin
                    devsel <= 1;
                    state <= ST_IDLE;
                    enable <= EN_TR;
                end
            end
        end

    endcase
    end
end
endmodule 
```

如果没有自动的方法，你能解释一下这样做的方法吗？

这是一个手工制作的 FSM，但无法测试......

![fsm](../Images/11a0d838001ffc7a2b8e86c4dd1e4658.png)

好像没问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:44:53.480

更好和更昂贵的模拟器可以检测代码中的 FSM 并对其进行可视化。例如 Modelsim SE 版本。这些可以很好地理解代码并检查覆盖率。但是让你自己绘制一个 6 态 FSM 并不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T08:37:12.973

有时编写代码并从中生成文档会更容易。有时您在没有文档的情况下继承遗留代码，在这些情况下，特别是如果新的语言工具有助于可视化正在发生的事情可能非常有用。

使用 cadence 工具，您可以使用“代码覆盖率”运行代码，然后**imc**可以加载覆盖率数据并运行**FSM 分析**。

我在下面包含了一个简单的 FSM 并显示了生成的状态图。

```
module simple_fsm(); 
  //Inputs to FSM
  logic clk;
  logic rst_n;

  logic [1:0] state    ;
  logic [1:0] nextstate;
  logic       turn_on  ;
  logic       turn_off ;

  localparam  S_OFF    = 2'b00;
  localparam  S_GO_ON  = 2'b01;
  localparam  S_ON     = 2'b10;
  localparam  S_GO_OFF = 2'b11;

  // State FlipFlop
  always @(posedge clk or negedge rst_n) begin
    if (~rst_n) begin
      state <= 2'b0;
    end
    else begin
      state <= nextstate;
    end
  end

  //Nextstate Logic
  always @* begin
    case (state)
      2'd0 : if (turn_on) begin
        nextstate = S_GO_ON;
      end
      2'd1 : nextstate = S_ON;
      2'd2 : if (turn_off) begin
        nextstate = S_GO_OFF ;
      end
      2'd3 : nextstate = S_OFF;
    endcase
  end    

//TB clk
initial begin
 #1ns;
 clk = 0;
 forever begin
  #20ns;
  clk = ~clk;
 end
end

//The Test
initial begin
  rst_n    = 1'b0;
  turn_on  = 1'b0;
  turn_off = 1'b0;
  @(posedge clk);
  @(posedge clk);
  rst_n = 1'b1 ;

  @(posedge clk);
  turn_on = 1'b1;
  @(posedge clk);
  turn_on = 1'b0;

  @(posedge clk);
  @(posedge clk);
  #100ms;

  $finish();
end
endmodule 
```

执行：

```
$ irun simple_fsm.sv -coverage all -covdut simple_fsm
$ imc & 
```

在imc中加载cov_work（上述模拟创建的文件夹），选择simple_fsm并选择FSM分析。

![simple_fsm 可视化](../Images/fd9de3e30913768843702f74b7acd1f3.png)

imc 还有助于可视化您的测试覆盖率。未命中的弧和状态以红色显示。

我们已经看到有一些工具可以可视化 FSM，问题的另一部分是；是适用于这些工具的专用 FSM 的语法。

@vermaete 报告说 Modelsim SE 看不到 FSM。从 imc 我得到：

![来自问题的 OPs FSM](../Images/144de1e96b0593a01a39eade6fca31f1.png)

这似乎没有涵盖代码的复杂性，并且显示为只有 2 个可达状态，IDLE 和 BUSY。如果 OP 正在使用工具进行可视化，我建议采用更简单的（语法）FSM 结构，以便工具可以更好地解析它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:47:40.193

检查是否正常的方法是编写一个模拟并检查行为是否符合您的要求。拿出气泡图并查看它是否与您的手绘图相匹配是没有意义的，因为您无法知道您的手绘图是否正确......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-03T22:20:22.873

```
case(segmentRead)
            //-------------------
            SEGMENT0: begin
                READ_Ready_EEPROM <= 1'b0;
                READ_RDSR_Enable <= 1'b0;
                Read_Enable <= 1'b0;
                READ_RDSR_DATA_REG <= 8'b0;
//              READ_DATA_REG <= 8'b0;
            end 
            //-------------------
            SEGMENT2: begin          
                READ_RDSR_Enable <= 1'b1;
                READ_RDSR_DATA_REG <= 8'b0;
            end
//          //-------------------
            SEGMENT3: begin          
                READ_RDSR_Enable <= 1'b0;   
                READ_RDSR_DATA_REG <= RDSR_Data;
            end
            //-------------------
            SEGMENT4: begin
                Read_Enable <= 1'b1;
            end
            //-------------------
            SEGMENT5: begin
                Read_Enable <= 1'b0;
                READ_DATA_REG <= Read_Data;
            end
            //-------------------
            SEGMENT6: begin
                READ_Ready_EEPROM <= 1'b1;
            end
            //-------------------
        endcase 
```

# c# - 内存不足异常 .SetSource()

> ID：14913604
> 
> 赞同：3
> 
> 时间：2013-02-16T18:24:19.273
> 
> 标签：c#, windows-phone-8

我创建了一个可以动态下载并保存多个大图像的枢轴。我首先使用 webclient 下载图像并将其写入磁盘。而不是创建一个包含所有图像的图像列表数组。基本思想是我只在需要时才加载图像。假设我的列表中有 12 张图片。Pivot 每张幻灯片仅显示 1 张图像。假设我们正在查看图像 7。我继续为下一张幻灯片预加载图像 6 和 8。

```
1, 2, 3, 4, 5, [6, {7}, 8], 9, 10, 11, 12 
```

当用户浏览幻灯片时，我将图像预加载在“[]”之间并在“[]”之外卸载。

我用来预加载图像的代码：

```
BitmapImage bi = new BitmapImage();
bi.SetSource(GetStream(fileName);
IMGSource = bi; // IMGSource<ImageSource> referenced by the xaml in Image Binding IMGSource. 
```

我用来卸载图像的代码：

```
IMGSource = null;
GC.Collect(); // I force the program to Garbage collect since the image is really large. 
```

问题是，在查看了几张图像后（大约 9 张图像）。它在以下行中引发 OutOfMemory 异常：`bi.SetSource`。

我检查了卸载功能是否正常工作（它确实在调用收集后释放了内存，并且内存保持在一个稳定点）

但它仍然会引发`OutOfMemory`异常。我应该怎么办？

编辑：
我刚刚发现
在浏览幻灯片时内存实际上一直在增加。通过调用：

```
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage; 
```

它给人的回忆如下：

```
54.7 MB, 76.91 MB, 111.94 MB, 105 MB, 112.71 MB, 141.93 MB, 148.42 MB, Exception thrown 
```

但是通过调用：

```
GC.GetTotalMemory(false); 
```

它只显示在周围`1.2~1.3 MB`。
发生了什么？不应该释放内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:11:21.077

我最终为图像源设置了一个 Empty 1x1 透明 GIF 以释放内存。

```
public static byte[] EMPTY_IMAGE = new byte[]{
    71, 73, 70, 56, 57, 97, 1, 0, 1
    , 0, 128, 0, 0, 255, 255, 255
    , 0, 0, 0, 33, 249, 4, 1, 0, 0
    , 0, 0, 44, 0, 0, 0, 0, 1, 0, 1
    , 0, 0, 2, 2, 68, 1, 0, 59
}; 
```

然后只需使用：

```
bi.SetSource(new System.IO.MemoryStream(MYCLASS.EMPTY_IMAGE)); 
```

并且内存似乎已正确释放。

# java - Mysql查询参数和传值

> ID：14913605
> 
> 赞同：-1
> 
> 时间：2013-02-16T18:24:19.427
> 
> 标签：java, mysql

我有一个关于 mysql 查询和 java 的一般性问题。您能否获取用户已输入文本框中的值，然后将其分配给 a `String`，然后在整个单独的类中捕获该值`String`以实现 mysql 查询中的参数。mysql 查询将运行，如果参数等于表中的数据，它将返回成功登录等消息。所以我要求对此给出是或否风格的答案......任何额外的输入都会有所帮助，但不需要。我知道您可以将值从一个类传递到另一个类，但在这种情况下，我想知道在运行 mysql 查询时是否有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:30:17.783

当然有可能。如果不是，我们将如何使用数据库实现应用程序：

在图形用户界面中：

```
String login = loginField.getText();
boolean exists = userDao.checkUserExistence(login);

... 
```

在 UserDAO 中：

```
public boolean checkUserExistence(String login) {
    String sql = "select u.id from user u where u.login = ?";
    PreparedStatement stmt = connection.prepareStatement(sql);
    stmt.setString(1, login);
    ResultSet rs = stmt.executeQuery();
    return rs.next();
} 
```

请注意，以上只是伪代码。它不处理异常并且不正确关闭资源。这只是给你一个想法。

[了解准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

# python - 如何在 virtualenv 中安装 win32com 模块？

> ID：14913607
> 
> 赞同：18
> 
> 时间：2013-02-16T18:24:25.483
> 
> 标签：python, virtualenv, pywin32

我已经在我的 Windows 7 64 位笔记本电脑上安装了两者`virtualenv`，`pywin32`它们似乎都可以工作，但不能相互配合。

更具体地说，如果 virtualenv 处于活动状态，则`import win32com.client`在 python 交互式 shell 中运行会失败，并显示`No module named win32com.client`. 但是，如果没有 virtualenv 处于活动状态，则相同的表达式会成功。

当我尝试安装`pywin32`时`pip`（这是我通常在 virtualenv 处于活动状态时安装模块的方式），我收到错误：

```
 Could not find any downloads that satisfy the requirement pywin32
No distributions at all found for pywin32 
```

...即使`pywin32`是输出中列出的模块之一

```
pip search pywin32 
```

因此，要安装它`pywin32` *，*我必须使用从 SourceForge 下载的 *.exe 安装程序来安装它。

有没有办法`pywin32`在 virtualenv 中安装？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-07-03T05:36:45.947

### 2016 年更新

现在 PyPI 上有一个可以用 pip 安装的 pywin32 版本。它被称为`pypiwin32`，它使用二进制`wheel`格式安装包。

[https://pypi.python.org/pypi/pypiwin32](https://pypi.python.org/pypi/pypiwin32)

```
pip install pypiwin32 
```

这将在 virtualenv 或 tox 等中工作。

* * *

这条线下面是我以前的旧答案。那是现在过时的信息。

> 旧答案 - 已过时。现代版本的 virtualenv 默认为 --no-site-packages。这意味着无法访问全局站点包现在是默认行为。遗憾的是，（截至 2014 年 7 月）您无法将 pip install pywin32 安装到您的 virtualenv 中。（[这里是错误报告](http://sourceforge.net/p/pywin32/bugs/669/)）如果你想让 pywin32 在 vi​​rtualenv 中运行，请激活 virtualenv 并使用 easy_install 和 pywin32 安装程序 exe 文件。例如 easy_install "C:\Path\To\Downloads\pywin32-219.win32-py3.4.exe"

[相关问题](https://stackoverflow.com/questions/26639947/how-do-you-install-pywin32-from-a-binary-file-in-tox-on-windows)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T19:02:39.427

尝试这个：

1.  [直接下载](https://sourceforge.net/projects/pywin32/files/pywin32/)
2.  启用您的虚拟环境
3.  `pip install --no-index --find-links:/local/dir/ SomePackage`

查看[pip-installer.org](http://www.pip-installer.org/en/latest/usage.html)上的 #8 （抱歉没有永久链接）/

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-09T12:25:48.303

创建一个 virtualenv 并激活它： `cd c:\Users\ernesto.luzon virtualenv --no-site-packages py351env py351env\Scripts\activate`

从这里，您有两个选择：

1.  从 sourceforge 项目下载 pywin32：http: [//sourceforge.net/projects/pywin32/files/pywin32/](http://sourceforge.net/projects/pywin32/files/pywin32/)

2.  从非官方（但非常有用）二进制站点下载 pywin32： [http ://www.lfd.uci.edu/~gohlke/pythonlibs/#pywin32](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pywin32)

确保为您的环境中安装的 Python Interpreter 下载正确的版本，否则稍后您将遇到[ImportError: DLL load failed: %1 is not a valid Win32 application](https://stackoverflow.com/questions/12434283/dll-load-failed-1-is-not-a-valid-win32-application/35291566#35291566)。

如果您从 sourceforge 下载，请使用 easy_install 进行安装： `(py351env) C:\Users\ernesto.luzon\Downloads>easy_install pywin32-220.win-amd64-py3.5.exe`

如果您是从 gohlke 下载的，请使用 pip 安装它： `(py351env) C:\Users\ernesto.luzon\Downloads>pip install pywin32-220-cp35-none-win_amd64.whl`

如果您稍后遇到[ImportError: DLL load failed: The specified module could not be found](https://stackoverflow.com/questions/7238403/import-win32api-error-in-python-2-6)错误，您需要以下额外步骤：

运行安装后脚本： `(py351env) C:\Users\ernesto.luzon>python py351env\Scripts\pywin32_postinstall.py -install Copied pythoncom35.dll to C:\Users\ernesto.luzon\py351env\pythoncom35.dll Copied pywintypes35.dll to C:\Users\ernesto.luzon\py351env\pywintypes35.dll ....`

注意它复制了“pythoncom35.dll”和“pywintypes35.dll”文件的位置。您需要将这些文件移动到该文件夹​​： `C:\Users\ernesto.luzon\py351env\Lib\site-packages\win32`

# c# - 使这两个列表相交的最佳方法是什么？

> ID：14913610
> 
> 赞同：1
> 
> 时间：2013-02-16T18:24:43.253
> 
> 标签：c#, collections, intersect

我在 C# 中有 2 个列表：

```
public class AvailableSlot
{
     public DateTime DateTime;
     public string Name
}

 List<AvailableSlot> list1 = GetList();
 List<AvailableSlot> list2 = GetAnotherList(); 
```

我想在这些列表上调用 intersect 以找出两个列表中同一日期的项目。我知道我可以使用 .Intersect 来获取此信息，但我有一个稍微复杂的要求。我想返回一个相交列表，但我希望这个列表包含一个对象列表，其中包含所有名称。所以是这样的：

```
 List<AvailableSlot2> intersectedList  . .. 
```

其中 AvailableSlot2 如下：

```
public class AvailableSlot2
{
     public DateTime DateTime;
     public string[] Names;
} 
```

尝试在两个列表之间相交后是否有能力进行这种转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:48:15.217

我只需将两个列表合并，按 DateTime 分组，然后从组中提取名称：

```
var list1 = new List<AvailableSlot>
{
    new AvailableSlot { DateTime = new DateTime(2013, 2, 1), Name = "Alpha" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 2), Name = "Bravo" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 3), Name = "Charlie" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 1), Name = "Delta" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 2), Name = "Echo" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 3), Name = "Foxtrot" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 4), Name = "Golf" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 5), Name = "Hotel" }
};

var list2 = new List<AvailableSlot>
{
    new AvailableSlot { DateTime = new DateTime(2013, 2, 1), Name = "Apple" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 2), Name = "Bannana" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 1), Name = "Dog" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 2), Name = "Egg" },
    new AvailableSlot { DateTime = new DateTime(2013, 2, 5), Name = "Hi" }
};

var list3 = list1.Where (l => list2.Where (li => l.DateTime == li.DateTime).Any ())
   .Union(list2.Where (l => list1.Where (li => l.DateTime == li.DateTime).Any ()));

var groupedItems = from slot in list3
    group slot by slot.DateTime into grp
    select new AvailableSlot2 {
        DateTime = grp.Key,
        Names = grp.Select (g => g.Name).ToArray()
    };

foreach(var g in groupedItems)
{
    Console.WriteLine(g.DateTime);
    foreach(var name in g.Names)
        Console.WriteLine(name);
    Console.WriteLine("---------------------");
} 
```

输出：

```
2/1/2013 12:00:00 AM
Alpha
Delta
Apple
Dog
---------------------
2/2/2013 12:00:00 AM
Bravo
Echo
Bannana
Egg
---------------------
2/5/2013 12:00:00 AM
Hotel
Hi
--------------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:30:43.390

您可以使用 LINQ to Objects`Join()`来排列具有相同 DateTime 属性的项目，然后将所有名称收集到一个数组中

```
var joinedItems = from slot1 in list1
                  join slot2 in list2
                  on slot1.DateTime equals slot2.DateTime into g
                  where g.Any()
                  select new AvailableSlot2
                  {
                      DateTime = slot1.DateTime,
                      Names = Enumerable.Range(slot1.Name,1).Union(g.Select(s => s.Name)).ToArray()
                  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:02:46.910

您可以使用[ToLookup](http://msdn.microsoft.com/en-gb/library/system.linq.enumerable.tolookup.aspx)：

```
DateTime dt1 = new DateTime(2013, 2, 1);
DateTime dt2 = new DateTime(2013, 3, 1);
DateTime dt3 = new DateTime(2013, 4, 1);

var list1 = new List<AvailableSlot>
{
    new AvailableSlot{DateTime = dt1, Name = "n1",},
    new AvailableSlot{DateTime = dt2, Name = "n2",},
    new AvailableSlot{DateTime = dt1, Name = "n3",},
};

var list2 = new List<AvailableSlot>
{
    new AvailableSlot{DateTime = dt1, Name = "n1",},
    new AvailableSlot{DateTime = dt2, Name = "n2",},
    new AvailableSlot{DateTime = dt3, Name = "n3",},
};

var intersected = list1.Select (l => l.DateTime).
                        Intersect(list2.Select (l => l.DateTime));

var lookup = list1.Union(list2).ToLookup (
                                slot => slot.DateTime, slot => slot);

lookup.Where (l => intersected.Contains(l.Key)).Select (
    slot => new 
    {
        DateTime=slot.Key, 
        Names=slot.Select (s => s.Name)
    }); 
```

在这种情况下给出了结果：

```
DateTime            Names

01/02/2013 00:00    n1
                    n3
                    n1

01/03/2013 00:00    n2
                    n2 
```

您当然可以使用 Names=slot.Select(s => s.Name).Distinct() 来获取不同的名称列表。

# maven - OSGI Bundle vs jar 依赖

> ID：14913615
> 
> 赞同：8
> 
> 时间：2013-02-16T18:25:02.443
> 
> 标签：maven, jar, dependencies, osgi, bundle

我试图了解以下内容之间的区别

```
 <dependency>
        <groupId>com.myspace.order</groupId>
        <artifactId>dal</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </dependency> 
```

和

```
 <dependency>
        <groupId>com.myspace.order</groupId>
        <artifactId>dal</artifactId>
        <version>1.0.0-SNAPSHOT</version>
        <type>bundle</type>
    </dependency> 
```

dal 工件本身具有指定为 bundle 的包装：

```
<packaging>bundle</packaging> 
```

现在，当我部署 dal 工件时，我看到它作为 jar 发布在 repo 中（其中包含清单）。在这种情况下，我对 dal 的依赖应该是什么。它应该是 bundle 还是 jar 类型？如果我在做 OSGI，我认为方法是将类型指定为 bundle。这个对吗？或者，我可以在这里有一个 jar 依赖项吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T22:04:17.033

当你在 Maven 中声明一个依赖时，你只能依赖一个普通的 Jar，而不是一个 bundle，因为 Maven 不承认 OSGi 环境的限制。

看到这个问题：

[为什么maven找不到osgi bundle依赖？](https://stackoverflow.com/questions/9932923/why-cant-maven-find-an-osgi-bundle-dependency?lq=1)

在你编译你的项目时，你不需要担心（但应该！）关于 OSGi 环境......例如，如果你尝试使用不是由你依赖的包导出的包，它不会抱怨之上....

当您尝试在 OSGi 容器中部署您的包时，如果您正确声明了对您使用的“dal”包的依赖项，当然包括版本（通常您应该让 maven-bundle-plugin 为您做基于在您的 POM 上），只有在容器中有一个包以正确的版本（或版本范围）导出所需的包时，它才会被解决。

考虑到“dal”似乎已经是一个捆绑包，您只需确保将捆绑包和“dal”部署在一起，一切都会正常工作。

但是，如果您错误地添加了对“dal”的私有包的依赖，尽管 Maven 会很乐意为您编译它，但当您将它扔到 OSGi 中时，您会遇到一个讨厌的接线异常:)

请注意，bundle 只是一个普通的 jar，其中包含清单中的 OSGi 元数据（Bundle-SymbolicName、Bundle-Version 等）。因此，如果您不使用 OSGi，则捆绑包将像任何其他 jar 一样工作。

但是无论如何，如果您想了解更多信息，请检查以下问题：

[maven依赖项中类型“bundle”的含义是什么？](https://stackoverflow.com/questions/5389691/what-is-the-meaning-of-type-bundle-in-a-maven-dependency)

# sas - SAS 问题 - 无法读取此数据集的数字列

> ID：14913618
> 
> 赞同：1
> 
> 时间：2013-02-16T18:25:42.407
> 
> 标签：sas

我有一个像这样的 blood.txt 数据集（前 5 个 obs）：

```
1    Female AB Young 7710   7.4  258
2    Male   AB Old   6560   4.7  .
3    Male   A  Young 5690   7.53 184
4    Male   B  Old   6680   6.85 .
5    Male   A  Young .      7.72 187 
```

我使用以下程序来阅读它：

```
data blood_sum;
infile "/path/blood.txt";
input @1 SubjID $
      @6 Gender $
      @13 BloodType $
      @16 AgeGrp $
      @22 RBC 
      @29 WBC
      @34 Cholesterol ;
run; 
```

但是最后一列“Cholesterol”无法显示；所有值都替换为“。” 我的日志有很多这样的 NOTE 错误：

```
NOTE: Invalid data for Cholesterol in line 1 34-37.
 RULE:     ----+----1----+----2----+----3----+----4----+----5----+----6----+----7----+----8----+----9----+----0                      

 1   CHAR  1    Female AB Young 7710   7.4  258\. 37
     ZONE  3222246666624425676623333222323223330
     NUMR  1000065D1C501209F5E7077100007E400258D
 SubjID=1 Gender=Female BloodType=AB AgeGrp=Young RBC=7710 WBC=7.4 Cholesterol=. _ERROR_=1 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:48:39.727

我猜你是在 UNIX 系统上运行它，但你正在阅读的文件 (blood.txt) 是在 Windows 系统上创建的，并以二进制模式复制到你的系统中。

如果您查看日志，您应该注意到在输入行的最后一个值之后有一个“点”（在第 37 列中）。显示屏的 ZONE 和 NUMR 部分显示该位置的十六进制代码，在本例中为“0D”，它是一个回车符。如果您使用 UNIX 编辑器（如 vi）打开文件，您将看到这些字符表示为`^M`每行的末尾。

您可以从您收到它的地方下载一个新副本（确保以 TEXT 模式传输文件），也可以将您的副本转换为 UNIX 文本文件。要进行转换，您可以使用如下`dos2unix`命令：

```
dos2unix /path/blood.txt /path/blood.txt 
```

请注意，如果您使用相同的名称，它将覆盖原始文件。当然，我假设您有权这样做。

如果由于某种原因无法转换文件，可以使用管道进行转换。换句话说，使用此 FILENAME 语句并将您的 INFILE 语句更改为从文件名中读取：

```
filename mydata pipe "tr -d '\r' < /path/blood.txt";
data blood_sum;
   infile mydata truncover;
   input @1 SubjID $
         @6 Gender $
        @13 BloodType $
        @16 AgeGrp $
        @22 RBC 
        @29 WBC
        @34 Cholesterol ;
run; 
```

`truncover`尽管您可能不需要它，但我添加了该选项。如果有兴趣，请在文档中阅读有关它的更多信息。

顺便说一句，这是一个非常常见的错误，每个人都至少发生一次。欢迎来到 StackOverflow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:33:22.420

对于这个问题，我将给出一个稍微不同的解决方案，我同意 Bob 是由行尾的回车引起的。

您可以使用 infile 上的 TERMSTR 选项控制行的终止字符（通常，对于 Windows，CR/LF 或 '0d'x '0a'x ；对于 Unix，仅 '0a'x 或 LF）。

[http://support.sas.com/kb/14/178.html](http://support.sas.com/kb/14/178.html)

```
data blood_sum;
   infile "/path/blood.txt" termstr=CRLF;
   input @1 SubjID $
         @6 Gender $
        @13 BloodType $
        @16 AgeGrp $
        @22 RBC 
        @29 WBC
        @34 Cholesterol ;
run; 
```

顺便说一句，我觉得你的输入法有点混乱。你在这里混合了输入类型，所以你可能并不总是得到一致的结果。事实上，如果您明确指定了格式，这可能永远不会发生！

```
input
@1 subjid $4.
@6 gender $6.
@13 bloodtype $2.
@16 agegrp $5.
@22 rbc best8.
@29 wbc best4.
@34 Cholesterol 3.
; 
```

然后将从 34-36 读取胆固醇，并且您永远不会让 SAS 尝试将 37 包含在变量中。

# android - 在 Android webView 中使用 POST 的外部站点按钮不起作用

> ID：14913619
> 
> 赞同：2
> 
> 时间：2013-02-16T18:25:56.983
> 
> 标签：android, post, webview, android-webview

我无法从 webView 中的外部网站获取按钮。该按钮似乎使用 PHP Post。我注意到的一件事是 URL 使用参数，并且当按下按钮时这些参数会发生变化。我在android浏览器中测试了外部站点并且没有问题，但是当我使用webView时我遇到了问题。

对不起，如果这篇文章中的任何内容格式错误，这是我第一次在这里发帖。我在互联网上广泛搜索了这个问题，但没有找到解决方案。

这是Java代码

```
package com.example.jbzapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;

public class ScavHuntActivity extends Activity implements OnClickListener {

    Button events, scavHunt, gInfo, donations, home, animals, map, social;
    WebView webQuiz;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        initLayout();
    }

    private void initLayout(){

        setContentView(R.layout.activity_scav_hunt);

        //load quiz from web
        webQuiz = (WebView)findViewById(R.id.webViewQuiz);

        //Alternative site, not going to use but it works fine.
        //webQuiz.loadUrl("http://www.qfeast.com/scored/quiz/10285/Quiz-Test");

        webQuiz.loadUrl("http://www.proprofs.com/quiz-school/story.php?title=quiz-test_103");       
        WebSettings webSettings = webQuiz.getSettings();
        //This did nothing
        //webSettings.setSupportMultipleWindows(true);
        webSettings.setJavaScriptEnabled(true);
        //webQuiz.reload();

        this.webQuiz.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url){

                view.loadUrl(url);
                view.loadUrl("javascript:window.location.reload( true )" );
                return true;
            }
        });

        events = (Button) findViewById(R.id.eventsButton); //Creating the button referencing it to the xml button created by ID.
        events.setOnClickListener(this); //Creates the on click listener that listens for the button click.

        scavHunt = (Button) findViewById(R.id.scavangerButton);
        scavHunt.setOnClickListener(this);

        gInfo = (Button) findViewById(R.id.generalButton);
        gInfo.setOnClickListener(this);

        donations = (Button) findViewById(R.id.donationsButton);
        donations.setOnClickListener(this);

        home = (Button) findViewById(R.id.homeButton);
        home.setOnClickListener(this);

        animals = (Button) findViewById(R.id.animalsButton);
        animals.setOnClickListener(this);

        map = (Button) findViewById(R.id.mapButton);
        map.setOnClickListener(this);

        social = (Button) findViewById(R.id.socialButton);
        social.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {

        final Intent eventsIntent = new Intent(this, EventsActivity.class); //Creating an intent that connects the HomeActivity.class with the EventsActivity.class
        final Intent scavHuntIntent = new Intent(this, ScavHuntActivity.class);
        final Intent gInfoIntent = new Intent(this, GInfoActivity.class);
        final Intent donationsIntent = new Intent(this, DonationsActivity.class);

        final Intent homeIntent = new Intent(this, HomeActivity.class);
        final Intent animalsIntent = new Intent(this, AnimalsActivity.class);
        final Intent mapIntent = new Intent(this, MapActivity.class);
        final Intent socialIntent = new Intent(this, SocialActivity.class);

        switch(v.getId()){
        case R.id.eventsButton:
            startActivity(eventsIntent); //on button click start activity with the intent to change view to EventsActivity.class
            break;
        case R.id.scavangerButton:
            startActivity(scavHuntIntent);
            break;
        case R.id.generalButton:
            startActivity(gInfoIntent);
            break;
        case R.id.donationsButton:
            startActivity(donationsIntent);
            break;

        case R.id.homeButton:
            startActivity(homeIntent);
            break;
        case R.id.animalsButton:
            startActivity(animalsIntent);
            break;
        case R.id.mapButton:
            startActivity(mapIntent);
            break;
        case R.id.socialButton:
            startActivity(socialIntent);
            break;

        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_scav_hunt, menu);
        return true;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Check if the key event was the Back button and if there's history
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webQuiz.canGoBack()) {
            webQuiz.goBack();
            return true;
        }
        // If it wasn't the Back key or there's no web page history, bubble up to the default
        // system behavior (probably exit the activity)
        return super.onKeyDown(keyCode, event);
    }

} 
```

这是我的 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ScavHuntActivity" >

   <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="bottom"
            android:maxHeight="75dp"
            android:weightSum="4" >

            <Button
                android:id="@+id/homeButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/beige"
                android:gravity="top|left"
                android:minHeight="75dp"
                android:minWidth="75dp"
                android:text="@string/home"
                android:textColor="@color/white"
                android:textSize="20sp" />

            <Button
                android:id="@+id/animalsButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/Yay"
                android:gravity="top|left"
                android:minHeight="75dp"
                android:minWidth="75dp"
                android:text="@string/animals"
                android:textColor="@color/white"
                android:textSize="20sp" />

            <Button
                android:id="@+id/scavangerButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/Yo"
                android:ellipsize="none"
                android:gravity="top|left"
                android:maxLines="100"
                android:minHeight="75dp"
                android:minWidth="75dp"
                android:scrollHorizontally="false"
                android:text="@string/scavanger_hunt"
                android:textColor="@color/white"
                android:textSize="16sp" />

            <Button
                android:id="@+id/eventsButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/green"
                android:gravity="top|left"
                android:minHeight="75dp"
                android:minWidth="75dp"
                android:text="@string/events"
                android:textColor="@color/white"
                android:textSize="20sp" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="top"
            android:minHeight="75dp"
            android:weightSum="4" >

            <Button
                android:id="@+id/mapButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/lightGreen"
                android:gravity="top|left"
                android:minHeight="75dp"
                android:text="@string/map"
                android:textColor="@color/white"
                android:textSize="20sp" />

            <Button
                android:id="@+id/generalButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/haha"
                android:ellipsize="none"
                android:gravity="top|left"
                android:maxLines="100"
                android:minHeight="75dp"
                android:scrollHorizontally="false"
                android:text="@string/general_information"
                android:textColor="@color/white"
                android:textSize="20sp" />

            <Button
                android:id="@+id/donationsButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/bla"
                android:ellipsize="none"
                android:gravity="top|left"
                android:maxLines="100"
                android:minHeight="75dp"
                android:minWidth="75dp"
                android:scrollHorizontally="false"
                android:text="@string/donations"
                android:textColor="@color/white"
                android:textSize="16sp" />

            <Button
                android:id="@+id/socialButton"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="0dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="0dp"
                android:layout_weight="1"
                android:background="@color/meh"
                android:gravity="top|left"
                android:minHeight="75dp"
                android:text="@string/social"
                android:textColor="@color/white"
                android:textSize="20sp" />

        </LinearLayout>
    </LinearLayout>

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/linearLayout1"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/otter" >

        <WebView
            android:id="@+id/webViewQuiz"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

    </FrameLayout>

</RelativeLayout> 
```

# django - 如何使用 SPDY 协议为 Django 应用程序提供服务？

> ID：14913622
> 
> 赞同：4
> 
> 时间：2013-02-16T18:26:28.180
> 
> 标签：django, hosting, spdy

通过 SPDY [1] 协议为 Django 应用程序提供服务的最佳方式是什么？

[1] [http://www.chromium.org/spdy](http://www.chromium.org/spdy)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:21:15.497

一种方法是使用 Jetty 在 Jython 上运行 Django - [http://www.evonove.it/blog/en/2012/12/28/django-jetty-spdy-blazing-fast/](http://www.evonove.it/blog/en/2012/12/28/django-jetty-spdy-blazing-fast/)

此外，显然 nginx 有一些用于 SPDY 的[草稿模块](http://nginx.org/patches/spdy/README.txt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T18:27:01.330

它适用于 nginx > 1.5.10 和 Django 作为 fastcgi 服务器运行。

最近版本的 Chrome 和 Firefox[放弃了对 SPDY v2](http://en.wikipedia.org/wiki/SPDY#cite_note-Fx28beta-23)的支持。因此，您至少需要服务器端的 SPDY3 支持。[高于 1.5.10 的 Nginx 版本](http://nginx.org/en/docs/http/ngx_http_spdy_module.html)支持该协议的版本 3。

**Django主线安装**

目前（截至 2014 年 2 月）Nginx > 1.5.10 只能从主线分支获得，不能从稳定版获得。在大多数 Linux 发行版上，安装[nginx 项目提供的主线包](http://nginx.org/en/linux_packages.html#mainline)是最容易的。

**Nginx 和 Django 配置**

Django 文档解释了如何[通过 fastcgi 使用 Nginx 运行 Django](https://code.djangoproject.com/wiki/DjangoAndNginx)。那里提供的配置可以用作起点。

此外，您需要为您的主机提供 SSL 证书，并通过以下方式扩展 Nginx 配置：

*   监听配置选项需要修改为： from `listen 80;`to `listen 443 ssl spdy;`。

*   您需要添加基本的 ssl 配置选项，最重要的是证书和密钥。

因此，结合这两种修改，配置可能如下所示：

```
server {
    listen       443 ssl spdy;
    server_name  yourhost.example.com;

    ssl_certificate      <yourhostscertificate>.pem;
    ssl_certificate_key  <yourhostskey>.key;
    ssl_prefer_server_ciphers   on;

    location / {
        include fastcgi_params;
        fastcgi_pass 127.0.0.1:8080;
    }
} 
```

然后以 fastcgi 模式运行 Django，如下所示：

```
python ./manage.py runfcgi host=127.0.0.1 port=8080 
```

**测试您的设置**

*   将浏览器指向[https://yourhost.example.com](https://yourhost.example.com)
*   您应该能够验证连接是通过 SPDY 完成的：
    *   Chrome：在中查找活动的 SPDY 会话`chrome://net-internals/#spdy`
    *   Firefox：检查 Firebug Network 选项卡并查找`X-Firefox-Spdy:"3.1"`响应标头。

# java - 播放框架 2.1 junit 测试在 Eclipse 中不起作用

> ID：14913627
> 
> 赞同：14
> 
> 时间：2013-02-16T18:26:49.457
> 
> 标签：java, eclipse, playframework-2.0, playframework-2.1

我遵循 zentask 教程并编写了一个 junit 测试，该测试不会从 eclipse IDE 运行它给出以下异常

```
javax.persistence.PersistenceException: java.lang.IllegalStateException: Class [class play.db.ebean.Model] is enhanced and [class models.User] is not - (you can not mix!!)
    at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.setEntityBeanClass(BeanDescriptorManager.java:1475)
    at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.createByteCode(BeanDescriptorManager.java:1138)
    at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.readDeployAssociations(BeanDescriptorManager.java:1058)
    at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.readEntityDeploymentAssociations(BeanDescriptorManager.java:565)
    at com.avaje.ebeaninternal.server.deploy.BeanDescriptorManager.deploy(BeanDescriptorManager.java:252)
    at com.avaje.ebeaninternal.server.core.InternalConfiguration.<init>(InternalConfiguration.java:124)
    at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:210)
    at com.avaje.ebeaninternal.server.core.DefaultServerFactory.createServer(DefaultServerFactory.java:64) 
```

我读了一点，发现对于一些编辑 buils.scala 的人在 main 中添加以下行有帮助：ebeanEnabled := true

对我来说，它并没有关闭 ide 运行 play clean compile

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-17T13:34:09.100

有[一篇](http://blog.matthieuguillermin.fr/2012/03/unit-testing-tricks-for-play-2-0-and-ebean/)关于设置单元测试以在 IDE 中运行的博客文章。它建议将以下命令行添加到运行测试时使用的 java：

```
-javaagent:/path/to/ebean/ebean-2.7.3-agent.jar 
```

似乎 Play 没有附带 ebean 代理，它应该首先从 Ebean 网站下载（在主 ebean 包中）。

我没试过。

[Ebean 用户指南](http://www.avaje.org/doc/ebean-userguide.pdf)也提到了它（*15.5.2 javaagent*部分），甚至还有配置 Eclipse 的示例。

此外，为了加快增强，也许这会更好：

```
-javaagent:/path/to/ebean/ebean-2.7.3-agent.jar;packages=models.* 
```

所以它只会查看`models.*`（Play 中 ORM 模型的默认包）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-30T10:01:04.207

您可以使用 Avaje Ebean Eclipse 插件：

[http://www.avaje.org/eclipseupdate/site.xml](http://www.avaje.org/eclipseupdate/site.xml)

安装后，通过右键单击您的项目并选择启用 Ebean 增强来激活 Ebean 增强。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T17:20:38.870

当我尝试从扩展 Model 的类之一的声明中删除 public 修饰符时出现此错误。

我正在使用一个模型来制作一个“通过”表（与附加信息的多对多关系），因此受保护的访问是有意义的。也许还有另一种方法可以做到这一点，但玩 javadoc 非常稀少。

# c# - 在 MVVM 中解析 Prism 服务

> ID：14913628
> 
> 赞同：0
> 
> 时间：2013-02-16T18:26:50.360
> 
> 标签：c#, mvvm, prism, unity-container

尝试在容器中解析我的存储服务对象（主要作为单例接口），

有一个**域模块**，它的**ViewModels**将使用**服务**模块的服务。

你在哪里以及如何推荐这个，在域**模块**内或域模块的视图模型内**解析**？

如果我可以在 ViewModel 的构造函数中执行此操作，以下代码是否足够，在服务注册后，如果我不想这样做怎么办：

```
 public DetailsViewModel(IWService wSvc,)
    {
        wService = wSvc;
    } 
```

在“视图模型”中获取服务对象（存储在容器中）的最佳方法是什么？

*我在这里提供的只是一个样本。谢谢你的帮助*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:32:31.623

我建议您的 ViewModel 通过构造函数的依赖注入来获取他们使用的服务。无论您决定采用哪种方法，您都应该记住，主要概念之一是测试 ViewModel 的能力。通常，这将涉及能够为您的 ViewModels 提供服务的模拟实现，以独立于这些服务测试它们的行为。如果你使用构造函数注入，你可以简单地创建你的模拟服务，然后将它们传递给你的 ViewModel 的构造函数来测试你是否要编写单元测试。即使您此时不打算编写单元测试，我认为这是养成遵循某种设计方案的习惯的正当理由。

```
public class SomeViewModel
{
    private IEventAggregator events;
    private ISomeService someService;

    public SomeViewModel(IEventAggregator events, ISomeService someService)
    {
        this.events = events;
        this.someService = someService;
    }
} 
```

# arrays - 使用数组将图像转换为灰度

> ID：14913631
> 
> 赞同：0
> 
> 时间：2013-02-16T18:27:00.620
> 
> 标签：arrays, matlab, nested, nested-loops, grayscale

这是我的代码。我不确定为什么这不起作用。它说索引超过矩阵尺寸。然后它说 Grayscale1 中的错误（第 7 行） avg=mean(pic(col, row, :)); 我想通过输入 image(grayscale1(imagename)) 来使用该功能

这也是我的提示写一个名为“grayscale1.m”的函数，它接收图像文件的文件名并返回具有图像灰度版本的 3-D 数组。它应该适用于任何大小的图像。您的解决方案应该使用嵌套循环来设置每个像素的值。

```
function grayscale1(picture)
pic = imread(picture);
[r c] = size(pic); 
    for row = 1:r 
         for col = 1:c 
             avg=mean(pic(row, col, :));
               pic(row,col,:)=avg;
          end
    end   
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:43:07.933

如果`pic`是一个 3 维数组，那么：

```
[r c] = size(pic); 
```

将为您提供 1 维的大小`r`以及2 维和 3 维大小的**乘积**`c`。这可能不是你想要的。所以你应该这样做：

```
[r c ignore] = size(pic); 
```

或者

```
r = size(pic, 1);
c = size(pic, 2); 
```

# html - 为什么要使用 span 而不是纯文本？

> ID：14913635
> 
> 赞同：1
> 
> 时间：2013-02-16T18:27:46.593
> 
> 标签：html

当我的文本没有任何特殊的 css 也不需要通过 JavaScript 修改时，是否有任何意义（不包括无意义的标准）使用`<span>`而不是仅仅输入文本？例如

```
<body>
   <span>Text</span>
</body> 
```

对比

```
<body>
   Text
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:38:08.707

它不应该。

正如 steveax 建议的那样，[MDN 参考](https://developer.mozilla.org/en-US/docs/HTML/Element/span)

> HTML 元素是用于分句内容的通用内联容器，它本身并不代表任何内容。它可用于对元素进行分组以进行样式化（使用 class 或 id 属性），或者因为它们共享属性值，例如 lang。只有在没有其他语义元素是合适的时候才应该使用它。非常像一个元素，但它是一个块级元素，而 a 是一个内联元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:45:56.760

如果 上没有样式`<span>`，并且通常没有样式，那并没有太大的区别。 [甚至 W3C 也表示这`<span>`本身并不意味着什么。](http://www.w3.org/community/webed/wiki/HTML/Elements/span)

它是为将样式应用于通用文本而创建的（很像`<div>`）。

您没有问，但是 和 之间的区别在于`<div>`前者`<span>`用于对元素进行分组，而后者用于对文本进行分组——同样没有语义。在适当的时候最好使用语义元素。

添加跨度的唯一可能优势是您以后需要更改该特定文本的样式。

# c# - List中使用了哪种算法 动态分配内存？

> ID：14913640
> 
> 赞同：6
> 
> 时间：2013-02-16T18:28:07.997
> 
> 标签：c#, .net, arrays, algorithm, data-structures

现在我有一个在数组上动态分配内存的算法：

*   如果数组已满，我创建一个两倍大小的新数组，并复制项目。
*   如果数组是四分之一满，我创建一个一半大小的新数组，并复制项目。

尽管将元素复制到新分配的数组需要额外的开销，但这是用于动态内存分配的相当快的算法。

1.  `List<T>`基于数组的更快或这样的算法是什么？你会推荐使用什么？

2.  `List<T>`使用简单数组作为内部数据结构吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T18:38:41.103

回答你的问题：

确实，C# 的`List<T>`实现使用了一个内部数组，即

1.  可序列化
2.  线程安全
3.  实现`IEnumerable<T>`（这意味着它可以被 LINQ 查询、`foreach`编辑等）
4.  二进制搜索

等等

因此，我会要求您使用`List<T>`而不是您自己的列表。

哦，顺便说一句，如果你想要**来自 Microsoft的****源代码`List<T>`**，那么这里就是

[列表.cs](http://reflector.webtropy.com/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/whidbey/netfxsp/ndp/clr/src/BCL/System/Collections/Generic/List@cs/2/List@cs)

**编辑**

`EnsureCapacity`in的源代码`List<T>`是：

```
 // Ensures that the capacity of this list is at least the given minimum
    // value. If the currect capacity of the list is less than min, the
    // capacity is increased to twice the current capacity or to min,
    // whichever is larger.
    private void EnsureCapacity(int min) {
        if (_items.Length < min) {
            int newCapacity = _items.Length == 0? _defaultCapacity : _items.Length * 2;
            if (newCapacity < min) newCapacity = min;
            Capacity = newCapacity;
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T18:35:31.913

除非您有特定的理由不相信，否则使用 C# 附带的提供的库几乎是一个普遍的好主意。这些实现都得到了很好的实现、很好的调试和很好的测试。

您描述的数据结构是动态数组数据结构的标准实现，大多数语言都将其用作默认列表实现。查看[文档`List<T>`](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)，似乎`List<T>`使用了这个实现，因为它的文档引用了内部容量并保证 O(1) 附加，只要大小小于容量。

简而言之，除非必须，否则避免重新发明轮子。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-16T18:35:23.187

`List<T>`在内部使用数组，并且它使用与您类似的策略 - 如果长度超过数组的长度，它会将数组的大小加倍。但是，如果尺寸更小，它不会变小。

中的相关方法`mscorlib`：

```
private void EnsureCapacity(int min)
{
    if (this._items.Length < min)
    {
        int num = (this._items.Length == 0) ? 4 : (this._items.Length * 2);
        if (num < min)
        {
            num = min;
        }
        this.Capacity = num;
    }
} 
```

数组的大小调整实际上发生在`List<T>.Capacity`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T04:08:26.470

无需重新发明轮子。

来自 MSDN：

> 容量是在需要调整大小之前 List<(Of <(T>)>) 可以存储的元素数，而 Count 是实际在 List<(Of <(T>)>) 中的元素数。
> 
> 容量始终大于或等于 Count。如果在添加元素时 Count 超过了容量，则通过在复制旧元素和添加新元素之前自动重新分配内部数组来增加容量。
> 
> 可以通过调用 TrimExcess 方法或显式设置容量属性来减少容量。当显式设置容量的值时，内部数组也会重新分配以容纳指定的容量，并复制所有元素。
> 
> 检索此属性的值是 O(1) 操作；设置属性是一个 O(n) 操作，其中 n 是新容量。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-16T18:35:30.653

是的，在内部`List<T>`使用 a`T[]`来保存您的对象。

据我记得 .NET 4.0 源代码，在添加新对象之前，它确保数组有足够的容量来容纳新数量的对象。如果现有数组不能容纳新数量的对象，则将其替换为两倍大小的新数组，并将所有对象和所有现有引用复制到新数组中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T18:36:10.127

这*基本上*也是`List<T>`（以及许多其他语言的动态数组）所做的。调整大小的因素可能不同，我*认为*在删除元素时它不会自行缩小支持数组 - 但是`TrimToSize`你可以设置`Capacity`自己，如果客户端代码很好地使用了这个特性，这可能会允许更有效的策略。但基本上，它是渐近等价的。

至于使用哪一个：除非您拥有`List<T>`对您的用例而言不是最佳的冷硬数据并且差异很重要（您显然还没有这方面的知识），否则您应该使用它。您自己的实现将是错误的，功能较少（参见`IEnumerable<T>`，，`IList<T>`许多方法），优化较少，不太容易识别，不被其他库接受（因此您可能必须创建昂贵的副本，或者至少比使用`List<T>`互动）等，而且很可能绝对没有任何收获。

# eclipse - Eclipse 构建路径：带有本机库文件夹的库

> ID：14913642
> 
> 赞同：1
> 
> 时间：2013-02-16T18:28:28.597
> 
> 标签：eclipse, dozer, buildpath, supercsv

我创建了一个 Eclipse 项目，我需要将 Super CSV 库与 Dozer 一起使用。我下载了 Super CSV 并在 /usr/lib 中创建了一个新文件夹“super-csv”。

现在我有了：`/usr/lib/super-csv/super-csv`包含超级 csv jar（+ javadoc 和源代码）， `/usr/lib/super-csv/super-csv-dozer`包含超级 csv 推土机 jar、javadoc 和源代码以及“lib”文件夹。

里面`/usr/lib/super-csv/super-csv-dozer/lib`有很多 .jar 文件是 super-csv-dozer 工作所需要的，所以我在 Eclipse 的 java build path 的 library 选项卡中将它添加为 super-csv-dozer 条目的本机库。

当我尝试编译项目时，我收到一个`java.lang.ClassNotFoundException`指向包含在 lib 文件夹中的一个 jar 文件中的类。

只有当我手动将 lib 文件夹中的每个 jar 添加为外部 jar 时，一切都有效。

有人可以解释我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:57:41.450

我推荐使用[Maven——](http://www.sonatype.com/books/mvnref-book/reference/public-book.html)它是一个广泛使用的 Java 构建工具。要开始使用 Super CSV，只需添加 2 个依赖项（在 Super CSV[网站](http://supercsv.sourceforge.net/downloading.html)上列出），您的 Eclipse 项目就可以开始了。

虽然有一点学习曲线，所以如果你只想手动将 jar 添加到 Eclipse 的构建路径中，我建议`lib`在项目的根目录下创建一个目录并将所有 jar 放在那里。

```
my-project
    |-src
    |  |- (your source in here)
    |
    |-lib
       |-commons-beanutils-1.8.3.jar
       |-commons-lang-2.5.jar
       |-commons-logging-1.1.1.jar
       |-dozer-5.3.2.jar
       |-slf4j-api-1.7.1.jar
       |-super-csv-2.0.1.jar
       |-super-csv-dozer-2.0.1.jar 
```

然后，您可以将它们添加到构建路径（[这是](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-(Java))一个很好的指南）。

请注意：如果您不使用 Dozer 扩展，那么您只需要`super-csv-2.0.1.jar`在构建路径上。

# php - 该代码用于下载excel文件（.xls）

> ID：14913646
> 
> 赞同：4
> 
> 时间：2013-02-16T18:28:44.487
> 
> 标签：php

问题：下载后，文件不包含数据。即它变成空白。

所以请帮助我。

```
<?php

    session_start();
    include_once 'oesdb.php';
    $id=$_REQUEST['id'];

    if(isset($_REQUEST['id']))
    {
      $sql=executeQuery("SELECT * FROM file where id=$id");
      $rows = mysql_fetch_array($sql);
      $file =$rows['file'];

          header('Content-Description: File Transfer');
          header('Content-Type: application/vnd.ms-excel');
          header('Content-Disposition: attachment; filename='.basename($file));
          header('Content-Transfer-Encoding: binary');
          header('Expires: 0');
          header('Cache-Control: must-revalidate');
          header('Pragma: public');
          header('Content-Length: ' . filesize($file));
          ob_clean();
          flush();
          readfile('uploads/'.$file);
          exit;

     }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:36:00.163

为什么不在上传文件夹中创建一个 HTACCESS 文件然后说明

```
 Allow From 127.0.0.1
    Deny From All 
```

然后只需创建一个 URL，使用 HTML5 的新下载功能，执行以下操作：

```
 <a href="uploads/filenamehere.txt" download="filenamehere.txt">click to download</a> 
```

它节省了尝试使用 PHP 制作下载脚本的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:40:36.290

尝试替换这个：

```
$file =$rows['file']; 
```

这样：

```
$file = "uploads/".$rows['file']; 
```

和这个：

```
readfile('uploads/'.$file); 
```

这样

```
readfile($file); 
```

如果仍然无法正常工作，则将函数返回的`readfile`值

**重要的**

请考虑 sql 注入问题（参见 Ondřej Mirtes 的评论）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:53:51.357

问题在这里：

```
header('Content-Length: ' . filesize($file)); 
```

`Content-Length`正如您告诉他的那样，接收零值并且浏览器下载零长度文件。如果`$file`是相对于 的路径`upload/`，你应该这样做：

```
header('Content-Length: ' . filesize('upload/'.$file)); 
```

确保`filezise()`返回正确的大小并`readfile()`真正输出它。

但另一个问题是您提到了`UPLOAD`文件夹并使用`uploads`. 它们不相同，大小写很重要。另外，可能使用相对路径`'uploads/'.$file`不是一个好主意，最好使用绝对路径。例如，`'/var/www/upload/'.$file`。

# xcode - 无法将 cv.h 添加到项目中

> ID：14913647
> 
> 赞同：3
> 
> 时间：2013-02-16T18:29:00.383
> 
> 标签：xcode, opencv

我是 Xcode 的新手。我需要帮助才能将 lib 添加到我的项目中。我已经下载了 opencv 框架。我已将其添加到我的项目中。在 main.hi 中有：

```
#include <stdio.h>  
#include <cv.h> 
#include <highgui.h>

#import <UIKit/UIKit.h>   
#import "AppDelegate.h"

int main(int argc, char *argv[])

{
    @autoreleasepool {

    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
} 
```

}

当我运行我的项目时，出现这样的错误：找不到 cv.h，找不到 highgui.h。我通过终端检查 /usr/include ，我看到 cv.h 和 highgui.h 位于那里。告诉我某人我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T18:32:52.553

尝试

```
#include <opencv/cv.h>

OR

#include <opencv2/opencv.hpp> 
```

有关 OpenCV 安装的更多信息 -[单击此处](https://sites.google.com/site/learningopencv1/installing-opencv)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-06T11:02:51.027

试试这个：

```
#include <opencv/cv.h> 
#include <opencv/highgui.h> 
```

如果这仍然对您不起作用，请尝试使用 MacPorts 安装 opencv。您可以在此链接上找到模块：[https ://www.macports.org/ports.php?by=library&substr=opencv](https://www.macports.org/ports.php?by=library&substr=opencv)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T18:37:38.663

您必须在 xcode 中更新您的构建设置。错误消息告诉您 xcode 不知道在哪里可以找到这些文件。您需要在 xcode 构建设置中更新两个设置。

1.  **图书馆搜索路径**

xcode中有很多设置。要减少您必须搜索的字段数量，请使用右上角的搜索框。如果您在**Library**中输入，您将看到具有设置**Library Search Paths**的部分标题**搜索**路径。使用库标题的位置更新该字段。最常见的地方是 /usr/local/lib。

 **1.  **标头搜索路径**

就像第 1 步一样，您可以使用搜索框减少 xcode 显示的选项数量。搜索**Header**，您将看到一个标有**Search Paths的部分，其中包含****Header Search Paths**选项。使用库标题的位置更新该字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T18:35:03.373

确保 OpenCV 头文件的安装位置在 Xcode 中的用户头文件搜索路径中。您可以在项目设置或目标的构建设置中进行设置。**

# jquery - 如何更改加载到 iframe 中的外部页面的背景颜色

> ID：14913649
> 
> 赞同：1
> 
> 时间：2013-02-16T18:29:04.243
> 
> 标签：jquery, css, iframe

我尝试将外部页面加载到 iframe 中并更改该页面的背景颜色
这是代码（它不起作用 - 它更改父页面的颜色而不是 iframe 页面）：

```
<style type="text/css">
iframe {
    background-color: #F00;
}
</style>

<iframe src="http://www.filehippo.com/" height="100%" width="100%">
</iframe>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('body').css('background-color', '#F00');
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T18:31:47.310

> 其父页面的`src`属性是否具有匹配的域、协议和端口？`iframe`

如果不是并且`iframe`是外部的，那么您无法更改它的原因是由于[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)。

如果是，那么您可以添加`<body>`到 iframe 并使用它

```
$(document).ready(function(){
    $('iframe').contents().find('body').css('backgroundColor', 'Your Color');
}); 
```

所以你的代码将是

```
<html>
<body>
<style type="text/css">
iframe {
    background-color: #F00;
}
</style>
<iframe src="http://www.filehippo.com/" height="100%" width="100%"></iframe>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('iframe').contents().find('body').css('backgroundColor', 'white');
});
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T18:31:32.050

你不能；不能修改来自不同域（例如[filehippo.com](http://filehippo.com) ）的 s 的内部结构是一种[**安全限制**](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)（例如，想想修改其他站点的登录页面是多么危险）。`iframe`

另一方面，请注意，即使`iframe`' 的内容来自同一个域，您的方法也不起作用。请参阅[此问题](https://stackoverflow.com/questions/583753/using-css-to-affect-div-style-inside-iframe)以了解正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T13:41:05.393

纯 Javascript 在正文上存档此覆盖颜色

### Javascript

```
var x = document.getElementById("myframe");
var y = x.contentWindow.document;
y.body.style.backgroundColor = "red"; 
```

现场观看`[W3Schools](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_iframe_contentwindow)`

# c# - 如何估计一个项目的工时长度：评论代码

> ID：14913652
> 
> 赞同：-1
> 
> 时间：2013-02-16T18:29:49.283
> 
> 标签：c#, time, comments, estimation, reorganize

有人对如何估计评论和重组整个项目的代码需要多长时间有任何建议吗？

我刚开始和另一位程序员一起为一家公司做合同工作：他正在修复错误，而我正在重新组织代码。我想估计一下我需要多长时间才能逐行浏览代码并评论和/或重新组织代码。这是一个非常大的解决方案：它有两个项目，每个项目都有多个文件。

有人建议我计算每个文件中的所有代码行数，把它们加起来，然后加倍你的时间来给你填充。还建议我在估计之前对代码的大小进行平方。但是我不知道注释 100 行代码需要多长时间。

任何建议都会受到欢迎。如果有所作为，项目是使用 Visual Studio 2012 在 Windows 窗体中创建的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:37:18.443

我建议你选择一个小的随机样本（20 行）并尝试重新组织它。这会让你知道它需要多长时间（如果你乘法），并且不会被低估，因为样本的随机性实际上会使工作稍微复杂一些。也可以做两三次，看看方差是否小。任何其他不基于*您*的方法可能会在时间上更便宜，但不会产生为您量身定制的结果。在我看来，这种方法是一项不错的投资。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:20:42.133

首先，这是一个*估计值*——估计值不是精确的数字，它们是近似值和范围。一旦你开始进入它，你一开始的估计可能会大大偏离，估计需要改进。在进行估算时要考虑[不确定性代码。](http://www.construx.com/Page.aspx?cid=1648)

存在许多完善的软件估计模型。COCOMO II 就是其中之一。我相信这种特殊方法为其技术增加了价值，因为它可以在已知数量的基础上发挥作用。

可在[usc找到](http://csse.usc.edu/tools/COCOMOII.php)[COCOMO II](http://sunset.usc.edu/csse/research/COCOMOII/cocomo_main.html)的网络工具。数一数你现在拥有的代码行数。估算一下您需要多少行新注释，有多少可以重复使用，有多少需要修改。插入这些数字。COCOMO II 工作原理的定义和所有术语都可以在[usc ftp 站点中找到](ftp://ftp.usc.edu/pub/soft_engineering/COCOMOII/cocomo97docs/modelman.pdf)

假设您有一个 10k SLOC 现有代码，其中 75% 可以重用，25% 需要修改（75% 设计修改，100% 代码修改......），另外 10% 用于注释。有支持和反对调整各种成本驱动因素的争论（改变“名义”或保持原样）。

将其插入，您将获得 2825 SLOC 的等效大小，然后转化为 9.2 个人月的工作量（请记住，这不仅仅是逐行遍历代码 - 还要确保您重新设计正确并对其进行测试） . 九个月大约是 1500 个工作小时。

考虑获取[软件估算：揭开黑艺术的神秘面纱，](https://rads.stackoverflow.com/amzn/click/com/0735605351)它涉及估算的更多方面以及进行估算的其他技术（这是通过代理进行的估算，只是众多技术中的一种）。

请记住保存有关花费多长时间和您的估计的数据 - 随着时间的推移，历史数据可以帮助改进估计。

进一步阅读 Wikipedia[软件工程中的成本估算](http://en.wikipedia.org/wiki/Cost_estimation_in_software_engineering)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:45:15.567

您可能可以通过使用某种[代码分析](http://msdn.microsoft.com/en-us/library/dd264939.aspx)来找到令人讨厌的位，这些代码分析向您展示了类的复杂性。

检查单元测试未[涵盖的](http://msdn.microsoft.com/en-us/library/dd537628.aspx)代码也将帮助您找到更难重构的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T19:38:57.803

就注释代码而言，大概意味着阅读每一行并描述每个方法/有趣的部分？忽略所有关于这个的通常辩论，首先，你有我的同情，其次，我建议选择一些课程，做这项工作，并测量需要多长时间：你应该能够从那里推断（并加上 30 ％ 然后）

至于重组，除非您已经知道需要进行某些特定的大规模重构，否则我通常对“需要多长时间”的回答是“您希望它变得更好多少？” - 最终的答案，总是以你和老板/客户都同意的有时间限制的金额而告终。提出*x*天的建议，并在那段时间内尽你所能做好。另外，有人提到集成测试：如果这是一个可行的选择，那么它肯定有助于控制时间

# python - 替换文本文件中的特定行

> ID：14913658
> 
> 赞同：1
> 
> 时间：2013-02-16T18:30:17.250
> 
> 标签：python, subprocess

我需要为 Windows 编写代码，该代码将运行一个 exe 调用`foil2w.exe` ，该调用从翼型进行一些空气动力学计算。这有一个包含很多变量`exe`的输入文本文件 ( )。`dfile_bl`然后每次运行后，我必须打开它，将一个值（攻角）从 0 更改为 16，然后再次运行。还会生成一个名为的输出文件`aerola.dat`，我必须在其中保存最后一行，这是具有结果的那一行。我正在尝试做的是自动化该过程，运行程序，保存结果更改角度并再次运行它。我已经为 Linux 完成了它，并使用该`sed`命令来查找并用角度替换线。现在我必须为 Windows 做这件事，我不知道如何开始。我为 Linux 编写的代码，运行良好：

```
import subprocess
import os

input_file = 'dfile_bl'
output_file = 'aerloa.dat'
results_file = 'results.txt'

try:
    os.remove(output_file)
    os.remove(results_file)
except OSError:
    pass

for i in [0, 2, 4, 6, 8, 10, 12, 14, 16]:
    subprocess.call('./exe', shell=True)
    f = open(output_file, 'r').readlines()[-1]
    r = open(results_file, 'a')
    r.write(f)
    r.close()
    subprocess.call('sed -i "s/%s.00       ! ANGL/%s.00       ! ANGL/g" %s' % (i, i+2, input_file), shell=True)

subprocess.call('sed -i "s/18.00       ! ANGL/0.00       ! ANGL/g" %s' % input_file, shell=True) 
```

dfile 看起来像：

```
3.0          ! IFOIL
n2412aN    
0.00       ! ANGL
1.0        ! UINF 
300        ! NTIMEM 
```

编辑：现在工作正常

```
import subprocess
import os
import platform

input_file = 'dfile_bl'
output_file = 'aerloa.dat'
results_file = 'results.txt'
OS = platform.system()
if OS == 'Windows':
    exe = 'foil2w.exe'
elif OS == 'Linux':
    exe = './exe'

try:
    os.remove(output_file)
    os.remove(results_file)
except OSError:
    pass

for i in [0, 2, 4, 6, 8, 10, 12, 14, 16]:
    subprocess.call(exe, shell=OS == 'Linux')
    f = open(output_file, 'r').readlines()[-1]
    r = open(results_file, 'a')
    r.write(f)
    r.close()
    s = open(input_file).read()
    s = s.replace('%s.00       ! ANGL' % str(i), '%s.00       ! ANGL' % str(i+2))
    s2 = open(input_file, 'w')
    s2.write(s)
    s2.close()
# Volver el angulo de dfile_bl a 0
s = open(input_file).read()
s = s.replace('%s.00       ! ANGL' % str(i+2), '0.00       ! ANGL')
s2 = open(input_file, 'w')
s2.write(s)
s2.close()
b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:20:04.447

你不能换吗

```
subprocess.call('sed -i "s/%s.00       ! ANGL/%s.00       ! ANGL/g" %s' % (i, i+2, input_file), shell=True) 
```

有类似的东西，

```
with open('input_file', 'r') as input_file_o:
    for line in input_file_o.readlines():
        outputline = line.replace('%s.00       ! ANGL' % i, '%s.00       ! ANGL' % i+2) 
```

[1] [http://docs.python.org/2/library/stdtypes.html#str.replace](http://docs.python.org/2/library/stdtypes.html#str.replace)

# c++ - 如何在这里创建一个循环？C++

> ID：14913662
> 
> 赞同：0
> 
> 时间：2013-02-16T18:30:38.557
> 
> 标签：c++, loops

这是我的代码。我希望它询问文件的名称，直到它是一个有效的名称。我将如何做？在我当前的代码中，它在失败后停止。

```
void X() {
    string fileName;
    ifstream inFile;

    cout << "Enter the name of the file: " << endl;
    cin >> fileName;
    ifstream input;
    input.open(fileName);

    if (input.fail()) {
        cout << "Could not open the file " << fileName << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:35:41.803

```
void X() 
{
  string fileName;
  ifstream inFile;
  do {
    cout << "Enter the name of the file: " << endl;
    cin >> fileName;
    ifstream input;
    input.open(fileName);
    if(input.fail())
    {
       cout<< "Could not open the file "<< fileName<< endl;
    }
  }
  while(input.fail())
} 
```

应该做的伎俩。这样，只要文件打开操作不成功，代码就会继续尝试。

# java - getNodeValue() 返回一些随机字符串

> ID：14913666
> 
> 赞同：0
> 
> 时间：2013-02-16T18:31:15.320
> 
> 标签：java, android, xml

我有一个带有文件 res/raw/lvl.xml 的 android 项目

```
<?xml version="1.0"  encoding="utf-8"?>

<Level>

  <dimensions>
    <a>5</a>
    <b>5</b>
  </dimensions>

    .
    .
    .
</Level> 
```

我的java代码如下

```
InputStream input = this.getResources().openRawResource(R.raw.lvl);
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = buider.parse(input);
doc.getDocumentElement().normalize();
NodeList nList = doc.getElementsByTagName("dimensions");
Node node = nList.item(0);
int a = Integer.parseInt(node.getFirstChild().getNodeValue().trim()); 
```

最后一行抛出解析异常，node.getNodeValue().trim() 为 "\t\t\n\t"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:39:03.887

无法理解您到底要做什么...但是..如果有帮助，您可以参考下面

```
public class Parsing {

    public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException {
        Parsing parse = new Parsing();
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document doc = builder.parse(new File("x.xml"));
        doc.getDocumentElement().normalize();
        NodeList nList = doc.getElementsByTagName("dimensions");
        Node node = nList.item(0);
        for (Node childNode = node.getFirstChild();
                childNode != null;) {
            //do something 
            System.out.println(childNode.getNodeName());
            System.out.println(childNode.getTextContent());
            Node nextChild = childNode.getNextSibling();
            childNode = nextChild;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:34:19.243

您正在查看`<dimensions>`标签，而不是`a`and `b`。看：

```
NodeList nList = doc.getElementsByTagName("dimensions");
Node node = nList.item(0);
int a = Integer.parseInt(node.getNodeValue().trim()); 
```

您将获得`0`name 的第一个（索引）元素`dimensions`。不是它的孩子。

您看到的值 ( ) 是删除子节点后 ' 内容`\t\t\n\t`的剩余值。`dimensions`

# c++ - 如何让 BucketSort 算法工作？

> ID：14913668
> 
> 赞同：0
> 
> 时间：2013-02-16T18:31:29.337
> 
> 标签：c++, algorithm, sorting, bucket-sort

我正在尝试在 C++ 中创建一个桶排序算法，但它根本不起作用。每次运行时，它都会将许多新数字添加到数组中，这些数字通常非常大，例如数十亿。有人知道为什么是这样吗？这是代码 - （请注意，我传入一个大小为 100 的数组，随机数从 0 到 ~37000，并且插入排序功能功能齐全并经过多次测试）

如果有人能指出问题所在，将不胜感激。

```
void bucketSort(int* n, int k) 
{
    int c = int(floor(k/10)), s = *n, l = *n;
    for(int i = 0; i < k; i++) {
        if(s > *(n + i)) s = *(n + i);
        else if(l < *(n + i)) l = *(n + i);
    }
    int bucket[c][k + 1];
    for(int i = 0; i < c; i++) {
        bucket[i][k] = 0;
    }

    for(int i = 0; i < k; i++) {
        for(int j = 0; j < c; j++) {
            if(*(n + i) >= (l - s)*j/c) {
                continue;
            } else {
                bucket[j][bucket[j][k]++] = *(n + i);
                break;
            }
        }
    }

    for(int i = 0; i < c; i++) {
        insertionSort(&bucket[i][0], k);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:54:03.010

此行不编译。`int bucket[c][k + 1];`

我认为问题出在您的存储桶索引上。这部分在这里

```
for(int j = 0; j < c; j++) {
   if(*(n + i) >= (l - s)*j/c) {
        continue;
   } else {
        bucket[j][bucket[j][k]++] = *(n + i);
        break;
   }
} 
```

不等同于：

```
 insert n[i] into bucket[ bucketIndexFor( n[i]) ] 
```

首先，它将索引减一。因此，它也错过了最后一个桶的数字的中断。还引入了一个小错误，因为索引计算使用的是 range`[0,l-s]`而不是，只有当equals`[s,l]`时才相同。`s``0`

当我写成`bucketIndex`：

```
int bucketIndex( int n, int c, int s, int l )
{
    for(int j = 1; j <= c; j++) {
        if(n > s + (l-s)*j/c) {
            continue;
        } else {
            return j-1;
        }
    }
    return c-1;
} 
```

并将算法的主要部分重写为：

```
std::vector< std::vector<int> > bucket( c );

for(int i = 0; i < k; i++) {
    bucket[ bucketIndex( n[i], c, s, l ) ].push_back( n[i] );
} 
```

我将物品正确插入他们的桶中。

# sed - 使用 sed 从文件中删除第一行和最后一行或记录

> ID：14913669
> 
> 赞同：14
> 
> 时间：2013-02-16T18:31:30.550
> 
> 标签：sed, awk

我想从文件中删除第一行和最后一行

文件1代码：

```
H|ACCT|XEC|1|TEMP|20130215035845|

849002|48|1208004|1

849007|28|1208004|1

T|2 
```

删除后的输出应该是

```
849002|48|1208004|1

849007|28|1208004|1 
```

我已经尝试过以下方法，但必须运行 2 次，我想要一种衬垫解决方案一次性移除两者！

```
sed '1,1d' file1.txt  >> file1.out
sed '$d' file1.out  >> file2 
```

请建议一个班轮代码....

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-16T18:41:18.703

你可以使用`;`

```
sed '1d; $d' file 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-16T18:41:25.407

### 使用命令分隔符

在 sed 中，您可以使用分号分隔命令。例如：

```
sed '1d; $d' /path/to/file 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T18:38:42.590

怎么样：

```
sed '$d' < file1.txt | sed "1d" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-01T11:16:28.603

尝试`sed -i '1d;$d' /path/to/file`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-25T01:58:58.003

```
awk 'NR>2{print v}{v=$0}' 
```

从第 3 行开始，每次都打印上一行。这意味着不会打印第一行和最后一行。

# java - Base64 - python 与 java 值大于 63

> ID：14913673
> 
> 赞同：1
> 
> 时间：2013-02-16T18:31:36.533
> 
> 标签：java, python, base64

我正在尝试将一些python代码转换为java。现在坚持使用值大于 63 的 python base64 编码器。

*Python：*

```
s = chr(59) + chr(234)
print(base64.b64encode(s))
 >> O+o= 
```

*爪哇*

```
char[] chars = {59, 234};
String data = new String(chars);
byte[] encoded = Base64.encodeBase64(data.getBytes());
System.out.println(new String(encoded));
 >> O8Oq 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:38:26.973

请注意，您在 Python 中的代码段已经处理字节，而 Java 版本以 Unicode 字符开头，然后通过调用将它们转换为字节`data.getBytes()`。

您可以通过首先编码为 UTF-8 在 Python 中实现相同的结果：

```
>>> (unichr(59) + unichr(234)).encode('utf-8').encode('base64')
'O8Oq\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:48:04.697

这是最终的java代码：

```
char[] chars = {59, 234};
String data = new String(chars);
byte[] encoded = Base64.encodeBase64(data.getBytes("ISO-8859-1"));
System.out.println(new String(encoded));
 >> O+o= 
```

谢谢大家的帮助。:)

# jquery - JQuery Validation 插件消息样式

> ID：14913677
> 
> 赞同：5
> 
> 时间：2013-02-16T18:32:12.247
> 
> 标签：jquery, css, jquery-validate

我正在为[Jquery Validation 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)的错误消息设置样式，但遇到了一些困难。

我已经编辑了插件的代码来更改消息的语言。我知道这可以用 javascript 完成，但最好是“硬编码”。不过，这在现场示例中看不到。

这是[现场示例](http://jsfiddle.net/FaRrR/)。我需要以`<span></span>`某种方式在错误消息之前插入一个，但我不知道该怎么做。有任何想法吗？

需要明确的是：而不是插件显示一个带有“错误”类的元素，它应该显示如下：

`<span class='pointer'></span><label class='error'>This is the error</label>`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-16T19:26:01.123

我认为你最好的选择是错误元素的包装和一些 CSS 样式：

```
$('#myform').validate({
    errorPlacement: function(label, element) {
        label.addClass('arrow');
        label.insertAfter(element);
    },
    wrapper: 'span'
}); 
```

这会给你这样的错误：

```
<span class='arrow'>
    <label class='error'>Error</label>
</span> 
```

并使用一些 CSS 来完成它。

```
span.arrow {
    margin-left: 6px;
    height:17px;
    background: url('http://i45.tinypic.com/f9ifz6.png') no-repeat left center;
}
label.error {
    height:17px;
    border-top:1px solid #99182c;
    border-right:1px solid #99182c;
    border-bottom:1px solid #99182c;
    margin-left:9px;
    padding:1px 5px 0px 5px;
    font-size:small;
} 
```

[现场演示](http://jsfiddle.net/FaRrR/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T18:49:27.387

您可以使用**errorElement**属性来指定错误容器应该是什么。即使您想为错误容器指定类，也可以使用**errorClass**指定它。

[请参阅此处](http://docs.jquery.com/Plugins/Validation/validate)的 jquery 验证文档

例如 ：

```
$(".selector").validate({
    errorElement: "em"
}); 
```

将错误元素设置为“em”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T21:20:42.210

找到了解决方案，这里是：

HTML：

```
<script src='http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js'></script>Desired error:
<br />
<input type='text' name='username' class='error' />
<span class='arrow'></span>
<label class='error'>Error</label>
<br />
<br />
<br />
<form action='' method='post' id='myform'>
    <input type='text' name='username' required />
    <br />
    <input type='email' name='email' required />
    <br />
    <input type='submit' value='submit' />
</form> 
```

CSS：

```
input {
    padding:5px;
}
input.error {
    border:1px solid #99182c;
}
span.arrow {
    height:17px;
    background: url('http://i45.tinypic.com/f9ifz6.png') no-repeat center left;
    top:4px;
}
label.error {
    border-top:1px solid #99182c;
    border-bottom:1px solid #99182c;
    border-right:1px solid #99182c;    
    color:black;
    padding:1px 5px 1px 5px;
    font-size:small;

} 
```

JavaScript：

```
$('#myform').validate({
    wrapper: 'span',
    errorPlacement: function (error, element) {
        error.css({'padding-left':'10px','margin-right':'20px','padding-bottom':'2px'});
        error.addClass("arrow")
        error.insertAfter(element);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-01T10:03:27.327

当我在样式表末尾写这个时，这对我有用

```
label.error{}
label.error{
    color:red;
} 
```

# bash - 根据shell参数规则将字符串拆分为令牌而不使用eval

> ID：14913678
> 
> 赞同：2
> 
> 时间：2013-02-16T18:32:26.997
> 
> 标签：bash, shell, sh

我有一个字符串

```
$ str="abc 'e f g' hij" 
```

我希望得到`e f g`它的全部。换句话说，我希望根据 shell 参数规则对字符串进行标记。

目前，我正在这样做

```
$ str="abc 'e f g' hij"; (eval "set -- $str"; echo $2) 
```

但是如果一个`*`人超出`'`-ticks，这是完全不安全的。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:20:26.657

您可以使用`set -f`完全禁用文件名扩展。

```
$ str="* 'e f g' hij"
$ ( set -f; eval "set -- $str"; echo $2 )
e f g 
```

这仅解决了您可能预期的一个问题，但您可能还可以探索`eval`其他选项。`set`

# vb.net - VB.NET多线程和系统架构

> ID：14913679
> 
> 赞同：1
> 
> 时间：2013-02-16T18:32:43.947
> 
> 标签：vb.net, multithreading

我相信我使用 Thread 类和 Runnable 接口从面向对象的角度对线程有一个合理的理解。在我的一个应用程序中，有一个“下载”按钮，允许用户在后台运行需要大约半小时的任务，同时继续使用 VB.NET 应用程序。

但是，我不明白线程如何映射到计算机的物理体系结构。如果您有一个在具有四核处理器的 PC 上运行的单线程应用程序，那么 .net 程序是否使用所有四个处理器？

如果您在四核处理器上有一个多线程应用程序（比如四个线程），那么每个线程是否在不同的内核上执行？

作为开发人员，您对此有任何控制权吗？

我参考了我在大学读过的一本名为《操作系统概念》的书，但我还没有找到具体的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:40:57.880

> 如果您有一个在具有四核处理器的 PC 上运行的单线程应用程序，那么 .net 程序是否使用所有四个处理器？

不，它不能，至少不能同时。但是，从理论上讲，[操作系统的调度程序](http://en.wikipedia.org/wiki/Scheduling_%28computing%29#Windows)可能首先在一个处理器上执行您的线程，然后再将其移动到另一个处理器。这样的调度程序对于允许同时运行比现有物理处理器更多的应用程序/线程是必要的：线程的执行被切成小块，这些小块一个接一个地馈送到处理器。每个线程都会分配一些时间片，在此期间它可以在 CPU 使用率切换到另一个线程之前进行计算。

> 作为开发人员，您对此有任何控制权吗？

不是直接的。您*可以*控制的是线程的优先级，以使其对任务调度程序更重要。

更笼统地说，*你不应该**在**你的用例中使用线程*——至少不应该直接使用。线程实际上是非常低级的原语。对于您的特定用例，有一个名为的组件为您[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)抽象了线程管理的许多低级细节。

> 如果您在四核处理器上有一个多线程应用程序（比如四个线程），那么每个线程是否在不同的内核上执行？

不必要; 同样，应用程序几乎无法控制其线程的执行方式；然而，操作系统非常努力地“智能”地调度线程。这意味着在实践中，如果您的应用程序有几个繁忙的线程，它们会尽可能均匀地分布在可用内核中。特别是，如果线程数不超过核心数，则每个线程都有自己的核心数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:18:47.703

通常，您无需担心映射到物理架构，.NET 和操作系统将尽最大努力最大限度地提高应用程序的效率。只需使其成为多线程，即使在单线程计算机上速度较慢。但是，您可以将最大线程数（如果您的应用程序理论上可以扩展到无穷大）限制为内核数，或者将其加倍。测试每种情况的性能，并确定最适合您的最大值。

有时设置一个核心 # 会使您的应用程序的性能更差。例如，如果核心 #1 当前正在扫描您的 PC 以查找病毒，并且您的防病毒软件是单线程的。在上述情况下，假设一台四核 PC，您不想在每核 1 个的基础上运行 4 线程应用程序。

话虽如此，如果你真的想在特定的核心上运行一个线程，这是可能的 - 看到这个：

*   [如何在特定核心启动线程](https://stackoverflow.com/questions/6584397/how-to-start-a-thread-at-specific-coresolved)
*   [如何在 .NET 中设置处理器关联？](https://stackoverflow.com/questions/2510593/how-can-i-set-processor-affinity-in-net/)

还要检查一下：

*   [如何控制进程在哪个核心上运行？](https://stackoverflow.com/questions/663958/how-to-control-which-core-a-process-runs-on)

# php - 仅允许来自指定域的 file_get_contents() / curl()

> ID：14913683
> 
> 赞同：0
> 
> 时间：2013-02-16T18:33:00.440
> 
> 标签：php

我正在构建一个脚本，它使用 file_get_contents 从我的网站获取数据，这些数据将分发给我的客户。我不希望每个人都能够获取这些数据，因此我希望包含数据的页面受到保护，以便只允许来自特定域的 file_get_contents 请求。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:35:13.923

使用 HTTP 身份验证和/或基于 IP 的限制。

前者最好通过您的网络服务器配置完成（例如 .htaccess 在 apache 的情况下），后者可以通过检查是否`$_SERVER['REMOTE_ADDR']`在您的白名单中来完成。

# ios - NSURLConnectionDownload 建议

> ID：14913684
> 
> 赞同：0
> 
> 时间：2013-02-16T18:33:07.400
> 
> 标签：ios, objective-c

我正在对 Foundation 网络 API 进行一些实验，并且正在尝试下载文件。所以我创建了一个`NSURLRequest`：

```
NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.mysite.it/something.something"]]; 
```

现在我有一个问题 NSURLConnectionDownload。我必须实现这个方法

```
- (void)connection:(NSURLConnection *)connection didWriteData:(long long)bytesWritten totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long)expectedTotalBytes 
```

在连接时，我创建了一个 NSURLConnection 对象，但我不知道我必须实现哪些方法......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:23:49.130

如果您使用 `NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];`，您可能需要实现 3 种方法：

```
 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data;
  - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error;
  - (void)connectionDidFinishLoading:(NSURLConnection *)connection; 
```

有可能

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response; 
```

我建议你看看这里：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html 。希望它有所帮助！

# php - 根据特定参数过滤 Twitter API 数组。获取总和并显示结果

> ID：14913685
> 
> 赞同：0
> 
> 时间：2013-02-16T18:33:07.780
> 
> 标签：php, if-statement, foreach

我正在使用[140 dev Twitter 框架](http://140dev.com/free-twitter-api-source-code-library/)来提取 100 条推文的数组并过滤结果以仅显示过去 60 分钟的推文。我还希望这是过去 60 分钟内的推文总数。注意：这是来自 140 dev 的代码，我正在调整以实现这一目标。

```
<?php 

// The search terms are passed in the q parameter
// search_server.php?q=[search terms]
if (!empty($_GET['q'])) {

    // Remove any hack attempts from input data
    $search_terms = htmlspecialchars($_GET['q']);

    // Get the application OAuth tokens
    require 'app_tokens.php';

    // Create an OAuth connection
    require 'tmhOAuth.php';
    $connection = new tmhOAuth(array(
      'consumer_key'    => $consumer_key,
      'consumer_secret' => $consumer_secret,
      'user_token'      => $user_token,
      'user_secret'     => $user_secret
    ));

    // Request the most recent 100 matching tweets
    $http_code = $connection->request('GET',$connection->url('1.1/search/tweets'), 
                array('q' => $search_terms,
                'count' => 100,
                'lang' => 'en',
                'type' => 'recent'));

    // Search was successful
    if ($http_code == 200) {

        // Extract the tweets from the API response
        $response = json_decode($connection->response['response'],true);
        $tweet_data = $response['statuses']; 

        // Load the template for tweet display
        $tweet_template= file_get_contents('tweet_template.html');

        // Load the library of tweet display functions
        require 'display_lib.php';      

        // Create a stream of formatted tweets as HTML
        $tweet_stream = '';

        $sumArray = array();

        foreach($tweet_data as $key=>$tweet) {  

            $hourcount = $tweet['created_at'];

            $deltatime2 = time() - strtotime($hourcount);

            if ($deltatime2 < (60 * 60)) {
                $deltasum = floor($deltatime2 / 60);
            } 

            // Ignore any retweets
            if (isset($tweet['retweeted_status'])) {
                continue;
            }

            if ($deltasum < 60) {

                $i++;
                // Get a fresh copy of the tweet template
                $tweet_html = $tweet_template;

                // Insert this tweet into the html
                $tweet_html = str_replace('[screen_name]',
                    $tweet['user']['screen_name'],$tweet_html);
                $tweet_html = str_replace('[name]',
                    $tweet['user']['name'],$tweet_html);        
                $tweet_html = str_replace('[profile_image_url]',
                    $tweet['user']['profile_image_url'],$tweet_html);
                $tweet_html = str_replace('[tweet_id]',
                    $tweet['id'],$tweet_html);
                $tweet_html = str_replace('[tweet_text]',
                    linkify($tweet['text']),$tweet_html);
                $tweet_html = str_replace('[created_at]',
                    twitter_time($tweet['created_at']),$tweet_html);
                $tweet_html = str_replace('[retweet_count]',
                    $tweet['retweet_count'],$tweet_html);   
                // Get time value
                $tweet_html = str_replace('[minute_count]', 
                    time_value($tweet['created_at']),$tweet_html);
                // Add the HTML for this tweet to the stream
                $tweet_stream .= $tweet_html;

            } 

        }

        // Pass the tweets HTML back to the Ajax request
        print $tweet_stream;

    // Handle errors from API request
    } else {
        if ($http_code == 429) {
            print 'Error: Twitter API rate limit reached';
        } else {
            print 'Error: Twitter was not able to process that search';
        }
    }

} else {
    print 'No search terms found';
}   

?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:50:12.327

在您的代码中，我阅读了以下内容：

```
 $http_code = $connection->request('GET',$connection->url('1.1/search/tweets'), 
            array('q' => $search_terms,
            'count' => 100,
            'lang' => 'en',
            'type' => 'recent')); 
```

这意味着您将其设置为“最近”并且计数为 100。它将自动从给定的搜索中获取最近的 100 条推文。时间限制不是多余的吗？

# vim - 如何设置 vim 允许使用制表符和 4 个空格

> ID：14913690
> 
> 赞同：1
> 
> 时间：2013-02-16T18:33:47.097
> 
> 标签：vim, editor, vi

我通常希望始终使用四个空格来缩进代码。不幸的是，例如 Makefiles 强制使用制表符作为分隔符。

我现在的想法是将制表键设置为四个空格，并为真正的制表符设置一些额外的键（例如制表符+移位）。

我该如何设置这样的东西？

目前我的 ~/.vimrc 看起来像：

```
syntax on
:set tabstop=4
:set cindent
:set autoindent 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:54:57.937

你可能也喜欢这样的东西：

```
set expandtab
autocmd FileType make setlocal noexpandtab 
```

这将始终将制表符转换为空格，除非您正在编辑 Makefile。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T18:36:23.143

您需要使用 shiftwidth，例如，

```
:set shiftwidth=4
:set expandtab 
```

您可能还需要使用此命令将现有制表符转换为空格：

```
:retab 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T18:47:12.807

`Ctrl`+`V` `Tab`将插入一个文字选项卡，即使`expandtab`已设置。如果您愿意，可以将其映射到`Shift`+ `Tab`with `:inoremap <s-tab> <c-v><tab>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T22:31:39.020

`:filetype plugin on`应该足以让 tab 键始终在 makefile 中插入真正的选项卡，使用文件类型检测。见`:help vimrc-filetype`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T21:36:48.083

虽然我通常更喜欢将所有内容都转换为空格，但我在 .vimrc 中有一个特定的命令来防止在 makefile 中这样做。首先我激活 expandtab 并设置 shiftwidth，然后我关闭了 makefile 的 expandtab。顺序在这里很重要。

```
set shiftwidth=4
set expandtab
if has('autocmd')
    autocmd FileType make set noexpandtab
endif 
```

我还推荐以下内容，因为它们有些相关并且可能有帮助：

```
set softtabstop=4
set shiftwidth=4
set smarttab
set autoindent 
```

# c++ - 在 C++ 应用程序中集成 ANTLR 4

> ID：14913691
> 
> 赞同：7
> 
> 时间：2013-02-16T18:33:57.870
> 
> 标签：c++, antlr, dsl

最近我拿起了一个副本，`The Definitive ANTLR 4 Reference`因为我在处理语法和语言方面很老练，所以我想在我曾经使用`yacc`and编写的 DSL 上工作`bison`。总体思路是编写一个翻译器（包括对类型安全的验证^((1))），它在运行时将 DSL 翻译成 JavaScript，然后由 v8 执行。

尽管 ANTLR 是为包含在 Java 应用程序中而设计的，但我想继续使用本机 C++。ANTLR 4 能否生成这样的 C 解析器/词法分析器^((2))，我可以使用 C++ 样式的包装器将其包含在内？以及如何做到这一点？

* * *

^((1))这本书有一些很好的例子，我将用作模板。
^((2))我不确定，但我认为我在某处读到 ANTLR 不支持 C++ 输出，对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T23:17:56.860

我发现 ANTLR 3 C/C++ 目标几乎无法使用。它包含许多技巧来规避 C 语言中缺少异常的情况，因此仅推荐给专家使用。尽管这是 Terr 的要求，但我希望 ANTLR 4 不支持没有本地异常的目标语言，除非它可以将任何需要这样做的黑客与最终用户隔离开来。ANTLR 2 C++ 目标比 ANTLR 3 更干净，但 ANTLR 2 本身有局限性，包括极其混乱的许可（使其难以在商业产品中使用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T18:50:36.190

ANTLR v3 有各种不同的目标，最值得注意的是 Java（当然）、C、C#、JavaScript 和 Python。如需完整列表，请参阅：[http ://www.antlr.org/wiki/display/ANTLR3/Code+Generation+Targets](http://www.antlr.org/wiki/display/ANTLR3/Code+Generation+Targets)

然而，ANTLR v4 目前只有一个 Java 目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-30T13:57:08.050

如果您仍然感兴趣，antlr 4.7 版确实有一个 c++ 目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-05T12:20:13.377

约翰 G. 回答

*   我同意 ANTLR3 C 目标非常黑客。我，20 年的 C/C++ 专家，如果没有作者的回答，我什至无法猜测如何使用它。是的，想法非常好，但没有文档几乎无法理解。

*   我不同意例外的主要问题。在 ANTLR2 和 C++ 实现 fir v2 的时代，确实存在异常......并且有人认为如果删除异常会更快。在 v3 中，他们尝试过这样做，但是......

*   但是速度并没有变得更好。我们希望在我们的 Valentina 数据库引擎中从 ANTRL2 切换到 ANTLR3，我们花了几个月的时间重新编写 v3 语法，并且......零加速。只是零。所以我们使用 ANTLR 到现在 v2。

*   我认为，如果 ANTLR 的速度是每个规则产生单独功能的事实，那么主要问题是。是的，这是它强大的一面，这也是它的弱点。

在 v4 中，Terrence 发明了如何在 Lexer 中使用状态机。如果我们也能为解析器得到它。我认为理想情况下，ANTLR 可以像现在一样产生功能，同时我们开发语法和状态机以供发布。但到目前为止，这是一个梦想。

# php - 检查数组中的任何数字是否不是 int

> ID：14913692
> 
> 赞同：0
> 
> 时间：2013-02-16T18:34:06.840
> 
> 标签：php, arrays

我制作了一个表格，您可以使用例如发送号码

1 2 3 4 5 6 7 8 9 10

然后我编写了一个 PHP 代码，它将在一个数组和循环中获取这些数字，该循环将计算有多少数组项，然后进行计算。

我使用 is_numeric 检查数组是否只包含整数。但由于某种原因，它并没有真正起作用。

```
<?php
$total = null;
$number = $_POST['number'];
$numbers = explode(" ", $number);
foreach($numbers as $number) {
$total = $total + $number;
}
$notnumber = '<center>You must enter a number</center>';
$empty = '<center>The field is empty.</center>';

if ($numbers == is_numeric($numbers) && $total != null) {
    $avg = $total / $number;
    echo '<center>Avarge is:  <b>'.$avg.'</b></center>';
    } else if ($_POST['number'] == "") {
    echo $empty;        
    } else if ($numbers != is_numeric($numbers)) {
    echo $notnumber;
    }
?> 
```

这是表格

```
<form action="index.php" method="post">
<input type="text" name="number" class="input"><br /><br />
<input type="submit" value="Calculate results">
</form> 
```

发生什么了：

当我输入数字时，它会回显错误“$notnumbers”，但它们是数字。我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:37:43.537

这是不正确的：`$numbers == is_numeric($numbers)`。

**替代解决方案：**
您可以试试这个，前提是您算作`0`无效号码。

```
$number = $_POST['number'];
$numbers = explode(" ", $number);
$total = 0;
foreach($numbers as &$number) {

    // covert value to integer
    // any non-numerics become 0
    $number = (int) $number;
    $total += $number;

} 
```

现在您不必担心检查`is_numeric`或`is_int`因为它们都是整数。您只需要检查`0`值即可。

**额外提示：**
`<center>`标签在 HTML 中也已弃用。
CSS 应该用于显示居中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:37:50.657

if($numbers == is_numeric($numbers) ... 不正确

采用

```
if (is_numeric($numbers) && $total != null) { 
```

更好的功能是[`ctype_digit`](http://php.net/manual/en/function.ctype-digit.php)

请试试这个，不要使用你的！

```
//$_POST['number'] = '1 2 3 4 5 6 7 8 9 10';
$notnumber = '<center>You must enter a number</center>';
$empty = '<center>The field is empty.</center>';

if(!isset($_POST['number']) || strlen($_POST['number']) <= 0){
 echo $empty;
}
else{
 if( !preg_match('/^([1-9]{1})([0-9]*)(\s)([0-9]+)/', $_POST['number']) ){
    echo $notnumber;
 }else{
    $total = null;
    $number = $_POST['number'];
    $numbers = explode(" ", $number);
    //remove after test
    echo "<pre>";
    print_r($numbers);
    echo "</pre>";
    //end remove
    $total = array_sum($numbers);
    //count(array) = number of elements inside $array
    $avg = $total / count($numbers);
    echo '<center>Avarge is:  <b>'.$avg.'</b></center>';
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:54:41.980

试试这个我解决了一些代码问题

```
 <?php
 $total = NULL;
 $number = @$_POST['number'];
 $numbers = explode(" ", $number);
 $Num=0;
 foreach($numbers as $number) {
   $total = $total + $number;
   $Num++;
 }
 $notnumber = '<center>You must enter a number</center>';
 $empty = '<center>The field is empty.</center>';
 if (is_array($numbers) && $total != NULL) {
     $avg = $total / $Num;
     echo '<center>Avarge is:  <b>'.$avg.'</b></center>';
     } else if (!isset($_POST['number'])) {
        echo $empty;        
     } else if (!is_numeric($number)) {
        echo $notnumber;
     } 
```

# internet-explorer - JSF页面在生产websphere7 ie8中挂起/冻结

> ID：14913696
> 
> 赞同：0
> 
> 时间：2013-02-16T18:34:48.600
> 
> 标签：internet-explorer, jsf, websphere

我有一个使用 facelets 和 icefaces 构建的 jsf 页面。该页面包含一个数据表和一个 commandButton ，当按下命令按钮时会显示一个确认面板，如果我们确认弹出面板，值将填充到数据表中并插入到数据库中，但之后我们无法与页。页面冻结。在一个带有 ie8 的生产服务器（WebSphere 7）上我有这个问题，但是在带有 ie8 的开发服务器（WebSphere 7）上我没有这个问题。我可以多次与页面交互。该应用程序非常简单，一页登录，主页，然后搜索页面。一次交互后，搜索页面在生产中挂起/冻结，但我无法在我的开发/登台机器上生成它。我应该调查什么。

# windows - 在 Windows 7 cmd 上运行 Scons 2.2.0

> ID：14913701
> 
> 赞同：5
> 
> 时间：2013-02-16T18:35:22.253
> 
> 标签：windows, cmd, scons

我在 Windows 7 上的 Python 2.7 中安装了 SCons 2.2.0。当从 cmd 运行“scons”时，我收到错误消息“scons 无法识别并且是内部或外部命令”我该如何解决这个问题？

* * *

问题是 scons-2.2.0-setup.exe 没有在系统中设置路径。scons.bat 和 scons-2.2.0.bat 都位于“C:/Python27/Scripts”文件夹中。将此设置为路径确实可以解决问题。现在，当尝试编译带有消息“cl”的简单 C++ 文件时出现了一个新问题，该文件不被识别为内部或外部命令。（Windows 7 64 位）。请任何想法可能会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T19:44:01.403

您是否使用[SCons Windows 安装程序](http://www.scons.org/doc/production/HTML/scons-user/x121.html#AEN158)安装它？它应该为您设置一切。

根据[SCons 安装说明](http://www.scons.org/doc/production/HTML/scons-user/x167.html)，SCons 应该安装在这里：

*   C:\Python25\脚本
*   C:\Python25\scons

在您的情况下，替换`c:\Python25`为您的 pythong 2.7 安装位置。

此外，确保 SCons python 脚本在您的路径中。您可能必须重新启动 cmd 才能使对路径的更改生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:49:37.277

要使用 cl，您需要使用 Visual Studio 命令行，然后从那里运行 scons，它是一个 .bat 文件和 Python 安装中的脚本文件夹。将脚本放在您的路径中应该可以解决它，就像我最近自己做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T15:45:48.603

我安装了 2 个最新版本（3.0.0 和 3.0.1）。

同样的问题，可能是因为

1.  *Windows 安装程序正在C:/Program Files 中寻找 Python 的安装...*它只能*找到*Python **3.x**（不兼容）

****   `setup.py`有一个小问题。*** 

 ***无论如何，我提出了以下解决方案。

1.  安装`python setup.py install`
2.  转到您的 Python 安装目录
3.  将以下文件中的一个（或两个）放在子文件夹**Scripts**中：

    *   `scons.bat`如果你从*cmd运行 scons*
    *   `scons`如果你从*Msys*或*Cygwin运行 scons*

我已经把这两个脚本的代码放在下面（这`.bat`是源代码的一部分，并且`.sh`受到了它的启发）。

文件`<Python_dir>/Scripts/scons.bat`

```
@REM Copyright (c) 2001 - 2017 The SCons Foundation
@REM src/script/scons.bat rel_3.0.0:4395:8972f6a2f699 2017/09/18 12:59:24 bdbaddog
@echo off
set SCONS_ERRORLEVEL=
if "%OS%" == "Windows_NT" goto WinNT

@REM for 9x/Me you better not have more than 9 args
python -c "from os.path import join; import sys; sys.path = [ join(sys.prefix, 'Lib', 'site-packages', 'scons-3.0.0'), join(sys.prefix, 'Lib', 'site-packages', 'scons'), join(sys.prefix, 'scons-3.0.0'), join(sys.prefix, 'scons')] + sys.path; import SCons.Script; SCons.Script.main()" %1 %2 %3 %4 %5 %6 %7 %8 %9
@REM no way to set exit status of this script for 9x/Me
goto endscons

@REM Credit where credit is due:  we return the exit code despite our
@REM use of setlocal+endlocal using a technique from Bear's Journal:
@REM http://code-bear.com/bearlog/2007/06/01/getting-the-exit-code-from-a-batch-file-that-is-run-from-a-python-program/

:WinNT
setlocal
@REM ensure the script will be executed with the Python it was installed for
set path=%~dp0;%~dp0..;%path%
@REM try the script named as the .bat file in current dir, then in Scripts subdir
set scriptname=%~dp0%~n0.py
if not exist "%scriptname%" set scriptname=%~dp0Scripts\%~n0.py
python "%scriptname%" %*
endlocal & set SCONS_ERRORLEVEL=%ERRORLEVEL%

if NOT "%COMSPEC%" == "%SystemRoot%\system32\cmd.exe" goto returncode
if errorlevel 9009 echo you do not have python in your PATH
goto endscons

:returncode
exit /B %SCONS_ERRORLEVEL%

:endscons
call :returncode %SCONS_ERRORLEVEL% 
```

文件`<Python_dir>/Scripts/scons`

```
#!/bin/bash

# Script to launch scons from MSys or Cygwin
# Inspired by scons.bat delivered with SCons

# Ensure the script will be executed with the Python it was installed for
BASEDIR=$(dirname "$0")
PATH="$BASEDIR:$BASEDIR/..:$PATH"

# Try the script named as the .bat file in current dir, then in Scripts subdir
BASENAME=$(basename "$0")
SCRIPT=${BASENAME%.*}
SCRIPTNAME="$BASEDIR/$SCRIPT.py"
if ! [ -f "$SCRIPTNAME" ]; then
    SCRIPTNAME="$BASEDIR/Scripts/$SCRIPT.py"
fi

# Run
python "$SCRIPTNAME" $@
SCONS_ERRORLEVEL=$?

# Check error code
if [ SCONS_ERRORLEVEL == 9009 ]; then
    echo "You do not have python in your PATH"
fi

# End
exit $SCONS_ERRORLEVEL 
```***

# jquery - 选中/取消选中单击处理程序仅在第一次切换

> ID：14913705
> 
> 赞同：0
> 
> 时间：2013-02-16T18:35:33.707
> 
> 标签：jquery

我有这个代码。

```
 var check = true;
        $('#selectall').click(function () {
            $("form input[type='checkbox']").attr ("checked", true);
            if (check){
                check = false;
                $('#checktodos').attr("src", "check_off.png");
            }
            else {
                $('#checktodos').attr("src", "check_on.png");
                $("form input[type='checkbox']").attr ("checked", false);
            }
        }); 
```

当我单击 ID = "selectall" 的按钮时，所有复选框都被选中，并且图像按钮发生变化。然后我再次单击同一个按钮，所有复选框都未选中，图像再次变为第一个。

但我不能再这样做了，我第三次点击按钮，图像按钮没有改变，也没有选中任何复选框。我想无限次这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:40:32.503

尝试将以下内容添加到您的 else 条件中：

```
check = true; 
```

您将 var check 设置为 false，但永远不会返回 true。

更新：

JSFiddle 示例：http: [//jsfiddle.net/4ZzUc/](http://jsfiddle.net/4ZzUc/)

您似乎正在使用 jQuery > 1.5 的版本，因此您需要使用 .prop("checked", true); 而不是 .attr("checked", true);

# php - Javascript、PHP json 不会解析？

> ID：14913709
> 
> 赞同：1
> 
> 时间：2013-02-16T18:35:44.637
> 
> 标签：php, javascript, json

我将其发送给 PHP：

```
 {'command' : 'move', 'data' : { 'seat_id' : '"+seat+"'}} 
```

但无法通过 PHP 解析它。我从 PHP 得到的正确数据是：

```
 {'command' : 'move', 'data' : { 'seat_id' : '44'}} 
```

我试过以下：

```
 <?php
 $in = $Server->output(); //this is the json text
 $o = json_decode($in); //has also tried put "TRUE" in the function.
 print_r($o); ?> 
```

它只是输出

```
 {'command' : 'move', 'data' : { 'seat_id' : '44'}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:38:53.863

正确的 JSON 使用双引号，而不是单引号。

# google-app-engine - 将图像文件上传到 GAE 数据存储

> ID：14913716
> 
> 赞同：1
> 
> 时间：2013-02-16T18:37:03.390
> 
> 标签：google-app-engine, upload

我正在尝试使用 CoffeScript 中的 jQuery 将图像文件上传到 GAE 数据存储区。

我正在使用的上传 jQuery Post 功能是：

```
$.post "/uploadBTS?bts_spriteSheet=#{@bts_spritesheet_url}", (data) =>
      console.log 'succsess' 
```

@bts_spritesheet_url 是从 html5 File Api 获取的：

```
handleSpritesheetSelection = (evt) => 
      files = evt.target.files
      f = files[0]
      reader = new FileReader()

      # Closure to capture the file information.
      reader.onload = ((theFile) =>
        return (e) =>   
          @bts_spritesheet_url = e.target
        )(f)
      reader.readAsDataURL(f)
document.getElementById('upload_spritesheet').addEventListener('change', handleSpritesheetSelection, false) 
```

GAE 中对 /uploadBTS 的 post 调用的处理程序是：

```
class UploadBTS(webapp2.RequestHandler):
  def post(self):

    # get information from form post upload
    bts_spriteSheet = self.request.get('bts_spriteSheet') 

    # create database entry for uploaded image 
    bts_entry = Building_Tile_Sets()
    bts_entry.image = db.Blob(bts_spriteSheet)
    bts_entry.put() 
```

最后，我试图输入信息的数据库是这样定义的：

```
# Database containg the bts
class Building_Tile_Sets(db.Model):
  image = db.BlobProperty(default=None) 
```

尝试上传时出现以下错误：

```
POST http://localhost:8080/uploadBTS?bts_spriteSheet=[object%20FileReader]&bts_jason=[object%20Object]&bts_name=one 500 (OK) 
```

谁能看到我哪里出错了？

# php - 加载页面中的全局变量

> ID：14913718
> 
> 赞同：0
> 
> 时间：2013-02-16T18:37:15.917
> 
> 标签：php, jquery

我有我的索引页面，它使用脚本将另一个页面加载到 div

```
 $('#TransportPlanning').click(function() { 
      mainpage = $('#FloatMain')

      mainpage.load('create_diary.php') 

  }); 
```

该页面可以正常加载到我的div中，但是我想将php变量从一个页面共享到另一个页面，我认为新加载的页面将能够引用主索引变量但事实并非如此，我尝试了全局但仍然没有在职的

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:40:19.337

全局变量不跨脚本共享。

将它们作为查询参数传递，例如：

```
mainpage.load('create_diary.php?key=value'); 
```

该值将在您的`create_diary`脚本中可用`$_GET['key']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:47:35.353

要在两个不同的 PHP 脚本之间共享变量，请使其超级全局：

采用

```
session_start();
// store session data
$_SESSION['key']=value; 
```

在 index.php 并在 crate_diary.php 中读取为：

```
session_start();
$key=$_SESSION['key']; 
```

并在 create_diary.php 中执行 ($key) 变量特定代码。

使用 Session 或 Cookie 可防止不道德地使用您的敏感数据。您还可以使用 Cookie 代替 Session。但是不要忘记在完成后取消设置会话。特别是当您处理 cookie 时，因为 Session 会在用户关闭浏览器时自动销毁，但 cookie 并非如此。

# python - 学习如何在我的 Python 类中定义函数并对我的代码输出感到困惑

> ID：14913719
> 
> 赞同：1
> 
> 时间：2013-02-16T18:37:17.227
> 
> 标签：python, python-2.7

问题：编写一个 Python 函数 square，它接受一个数字并返回该数字的平方。

该函数接受一个数字并返回一个数字。

给出的代码：

```
def square(x):
    '''
    x: int or float.
    ''' 
```

我的代码：

```
def square(x):
    '''
    x: int or float.
    '''
    x = x * x
    print x 
```

输出：

```
Test: square(-5.0)
Your output:
25.0
None

Correct output:
25.0

Test: square(3.17)
Your output:
10.0489
None

Correct output:
10.0489

Test: square(-3.4)
Your output:
11.56
None

Correct output:
11.559999999999999 
```

为什么我的代码打印出 (a) “无”，在某些情况下 (b) 打印出不正确的答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:39:09.137

如果你的函数没有返回任何值，它会`None`默认返回。

因此，如果您尝试打印函数的返回值，您将得到`None`. 所以，根本不打印函数调用的结果。

您可以更改函数以返回计算的*平方*而不是打印它：

```
def square(x):
    '''
    x: int or float.
    '''
    return x * x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:44:27.343

你得到`None`是因为你这样调用你的函数：

```
print square(3.17) 
```

换句话说，您正在打印函数的返回值。但是该函数不返回任何内容；换句话说，它返回`None`.

没有理由以这种方式调用该函数，因为它*已经*打印了结果。简单地这样称呼它：

```
square(3.17) 
```

或者更改函数，使其返回结果而不是打印结果。（这可能是更好的方法，因为它使函数更普遍有用——毕竟有时你可能不想打印结果。）

至于不正确的答案，二进制浮点数学不能完美地表示所有小数。在十进制中看起来有限的数字可能有无限的二进制表示；例如，`3.4`就是这样一个。因此，根据定义，所有有限表示都是近似值，数学运算通常会给出稍微“偏离”的结果。Python 在打印数字时试图隐藏这些差异，但它不能总是这样做。一个解决方案是使用`Decimal`类（在`decimal`模块中）来表示您的数字。

# actionscript-3 - Action Script 3 计时器问题

> ID：14913726
> 
> 赞同：0
> 
> 时间：2013-02-16T18:37:59.580
> 
> 标签：actionscript-3, timer

所以，我有一个游戏，你必须活着 45 秒，但是如果你死了，它会进入场景 4，你可以点击重新开始场景 3（这是你尽量不死的地方）。我的问题是我的计时器。我在场景 3 中声明了计时器，但它似乎在场景 1 中开始，而且，当我死时，计时器不会重新启动或停止，所以我可以一遍又一遍地死去，只要我一直在玩一共45秒，我自动获胜。我不确定这个错误发生在哪里，所以我将粘贴我所有的代码。//场景一

```
import flash.events.Event;
addEventListener(Event.ENTER_FRAME,Intro);

function Intro(e:Event)

{
var mySound:Sound = new E(); 
mySound.play();

Asteroid1.y = Asteroid1.y + 20;
Asteroid2.y = Asteroid2.y + 24;
Asteroid3.y = Asteroid3.y + 16;
Asteroid4.y = Asteroid4.y + 28;
Asteroid5.y = Asteroid5.y + 17
Asteroid6.y = Asteroid5.y + 22
Asteroid1.x = Asteroid1.x + 19;
Asteroid2.x = Asteroid2.x + 18;
Asteroid3.x = Asteroid3.x + 14;
Asteroid4.x = Asteroid4.x + 17;
Asteroid5.x = Asteroid5.x + 21
Asteroid6.x = Asteroid6.x + 20
if(Asteroid1.y > 768){
Asteroid1.y = -40;
}
if(Asteroid2.y > 768){
   Asteroid2.y = -40;
}
if(Asteroid2.x > 1024){
   Asteroid2.x = -40;
}
if (Asteroid1.x > 1024){
   Asteroid1.x = -40
   }
   if(Asteroid3.x > 1024){
       Asteroid3.x = -20;
   }
   if (Asteroid3.y > 768){
       Asteroid3.y = -20;
   }
   if (Asteroid4.y > 768){
       Asteroid4.y = -20;
   }
   if(Asteroid4.x > 1024){
       Asteroid4.x = -20;

   }
   if (Asteroid5.y > 768) {
       Asteroid5.y = -30;
   }
   if (Asteroid5.x > 1024) {
       Asteroid5.x = -40;
   }
    if (Asteroid6.y > 768){
        Asteroid6.y = -30;
    }
    if (Asteroid6.x > 1024) {
        Asteroid6.x = -30;
    }
}

//Scene 2

import flash.events.Event;
addEventListener(Event.ENTER_FRAME,IntroS2);

function IntroS2(e:Event) {

Asteroid5.y = Asteroid5.y + 20;
Asteroid6.y = Asteroid6.y + 18;
Asteroid7.y = Asteroid7.y + 16;
Asteroid8.y = Asteroid8.y + 22;
Asteroid9B.y = Asteroid9B.y + 17
Asteroid5.x = Asteroid5.x + 20;
Asteroid6.x = Asteroid6.x + 22;
Asteroid7.x = Asteroid7.x + 14;
Asteroid8.x = Asteroid8.x + 18;
Asteroid9B.x = Asteroid9B.x + 16
if (Asteroid5.y > 768) {
   Asteroid5.y = -40;
}
if (Asteroid6.y > 768) {
   Asteroid6.y = -40;
}
if (Asteroid5.x > 1024) {
   Asteroid5.x = -40;
}
if (Asteroid6.x > 1024) {
   Asteroid6.x = -20;
}
if (Asteroid7.x > 1024) {
   Asteroid7.x = -20;
}
if (Asteroid7.y > 768) {
   Asteroid7.y = -20;
}
if (Asteroid8.y > 768) {
   Asteroid8.y = -20;
}
if (Asteroid8.x > 1024) {
   Asteroid8.x = -20;
   }
   if (Asteroid9B.x > 1024){
       Asteroid9B.x = -30;
   }
   if (Asteroid9B.Y >768){
       Asteroid9B.y = -20;
   }
}
//Scene 2 last frame

stop();

stage.addEventListener(MouseEvent.CLICK, _onStageMouseDown);

function _onStageMouseDown(e:MouseEvent):void
{ 
removeEventListener(Event.ENTER_FRAME,IntroS2);
 gotoAndStop(1, "Scene 5");

}

//Scene 3
import flash.events.Event;
addEventListener(Event.ENTER_FRAME,ms3);
addEventListener(Event.ENTER_FRAME, onEnterFrame);
myTimer.addEventListener(TimerEvent.TIMER, handleTimerTick);

stage.removeEventListener(MouseEvent.CLICK, _onStageMouseDown1);
stage.removeEventListener(MouseEvent.CLICK, _onStageMouseDown);
Mouse.hide();

//TIMER
var myTimer:Timer = new Timer(1000, 1); // 1 second
myTimer.addEventListener(TimerEvent.TIMER, onEnterFrame);
myTimer.start(); 
//TIMER

function ms3(e:Event){
Mouse.hide();

Planet3.y = mouseY;
Planet3.x = mouseX;

Asteroid9.x = Asteroid9.x + 26;
Asteroid9.y = Asteroid9.y + 21;

if (Asteroid9.x > 1024){
Asteroid9.x = -40
}
if (Asteroid9.y > 768){
Asteroid9.y = -40
}

Asteroid10.x = Asteroid10.x + 22;
Asteroid10.y = Asteroid10.y + 23;

if (Asteroid10.x > 1024){
Asteroid10.x = -40
}
if (Asteroid10.y > 768){
Asteroid10.y = -40
}

Asteroid11.x = Asteroid11.x + 18;
Asteroid11.y = Asteroid11.y + 21;

if (Asteroid11.x > 1024){
Asteroid11.x = -40
}
if (Asteroid11.y > 768){
Asteroid11.y = -40
}

Asteroid12.x = Asteroid12.x + 24;
Asteroid12.y = Asteroid12.y + 22;

if (Asteroid12.x > 1024){
Asteroid12.x = -40
}
if (Asteroid12.y > 768){
Asteroid12.y = -40
}

// Hit Test
if(Planet3.hitTestObject(Asteroid9)||
Planet3.hitTestObject(Asteroid10)||
Planet3.hitTestObject(Asteroid11)||
Planet3.hitTestObject(Asteroid12))
{

gotoAndStop(1, "Scene 4");
}
}

//TIMER SECTION

function resetTimer():void
{
// check if timer already initialize
if(myTimer != null)
{
// just reset
myTimer.stop();
myTimer.reset();
}
else
{
// initialize timer and set a 45 sec delay;
myTimer = new Timer(4500,1);
myTimer.addEventListener(TimerEvent.TIMER, handleTimerTick);
}    

myTimer.start();

}

function handleTimerTick(event:TimerEvent):void
{ 
// stop and null timer;
myTimer.stop();
myTimer.removeEventListener(TimerEvent.TIMER, handleTimerTick);
myTimer = null;

// goto my 4th scene 
gotoAndStop(1, "Scene 4");
}

// whenever a hit test is performed and a timer reset is needed just call
resetTimer();

function onEnterFrame(e:Event):void {

var startTime:int=getTimer();

var currentTime:int=getTimer();
trace(currentTime);

if (currentTime>45000){
gotoAndStop(1, "Scene 6");

}
} 
```

这些都是真正重要的场景，4-6大部分只是动画和一些鼠标点击等。场景4-6中没有引用计时器。有任何想法吗？如果需要，我会编辑额外的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:55:13.097

1 - getTimer() 计算自 Flash 运行时执行开始以来的时间，因此您的条件应该是这样的：

```
if ( (currentTime - startTime) > 45000){
gotoAndStop(1, "Scene 6");
} 
```

但是你需要从 enterFrame 中删除这一行，并让它运行一次，当你的游戏开始时

```
var startTime:int=getTimer(); 
```

* * *

2 - 4500ms = 4.5 秒，而不是 45 秒

```
 // initialize timer and set a 45 sec delay;
 myTimer = new Timer(4500,1); 
```

# opengl - 还有 OpenGL 1.2 的教程吗？

> ID：14913727
> 
> 赞同：4
> 
> 时间：2013-02-16T18:38:02.560
> 
> 标签：opengl

我在一台相当旧的计算机上，它只支持 OpenGL 1.2（我的驱动程序是最新的）。是否还有免费的 OpenGL 1.2 在线教程可用？实际上，我在谷歌搜索时看到的都是 3.x（只有少数 2.x）。当然还有许多 OpenGL ES 教程（但我使用的是旧 MacBook，而不是 iPhone）。

**编辑：**
有人告诉我 OpenGL 1.2 何时发布也会很有帮助，谷歌可以根据日期进行过滤。

**编辑 2：**
1998 年 3 月。不幸的是，谷歌不允许我输入日期。它只允许我指定某个时期，从“所有时间”到“过去 24 小时”到“去年”……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:29:04.863

您可以看一下原始的“红皮书”——它很好地介绍了传统的 OpenGL。

[http://www.glprogramming.com/red/](http://www.glprogramming.com/red/)

# uitableview - iOS - 带有表格视图和子视图的选项卡式应用程序

> ID：14913731
> 
> 赞同：0
> 
> 时间：2013-02-16T18:38:20.530
> 
> 标签：uitableview, subview, tabbed-view

我有一个问题。在我的应用程序（它是选项卡式）中，我有一个带有一些文本的视图控制器和第二个带有表格视图（RSS 阅读器）的视图控制器。当我只有 RSS 并将其设置为单视图应用程序时，子视图表单 rss 可以工作，但是当我设置选项卡式应用程序并单击表格视图中的某些帖子时，子视图没有出现......有人可以帮我吗？

这是我的代码：

AppDelegate.h

```
 #import <UIKit/UIKit.h>

@interface MWFeedParserAppDelegate : NSObject <UIApplicationDelegate> {

    UIWindow *window;
    UINavigationController *navigationController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;

@end 
```

AppDelegate.m

```
#import "MWFeedParserAppDelegate.h"
#import "ViewController1.h"
#import "RootViewController.h"

@implementation MWFeedParserAppDelegate

@synthesize window;
@synthesize navigationController;

#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Override point for customization after app launch
    UITabBarController *tbc = [[UITabBarController alloc]init];

    ViewController1 *vc1 = [[ViewController1 alloc]init];
    RootViewController *vc2 = [[RootViewController alloc]init];

    [vc1.tabBarItem setTitle:@"Tab1"];
    [vc2.tabBarItem setTitle:@"Tab2"];

    [tbc setViewControllers:[NSArray arrayWithObjects:vc1, vc2, nil]];
    [window addSubview:[navigationController view]];
    [window makeKeyAndVisible];
    [window setRootViewController:tbc];
    return YES;
}

- (void)applicationWillTerminate:(UIApplication *)application {
    // Save data if appropriate
}

#pragma mark -
#pragma mark Memory management

- (void)dealloc {
    [navigationController release];
    [window release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:47:37.177

从 dealloc 中，我看到您没有使用 arc。你有一些内存泄漏；确保释放`vc1`并`vc2`在您的`didFinishLaunchingWithOptions`中，标签栏控制器将保留它们。

您可能不需要`navigationController`财产，建议您将其删除，直到您知道需要它为止。

我认为您需要在添加到标签栏控制器之前将您的 RSS 视图（vc2？）添加到导航控制器，如下所示：

```
[tbc setViewControllers:[NSArray arrayWithObjects:vc1, [[[UINavigationController alloc] initWithRootViewController:vc2] autorelease], nil]]; 
```

并删除这一行：

```
[window addSubview:[navigationController view]]; 
```

祝你好运！！

**编辑**详细说明：

```
ViewController1 *vc1 = [[[ViewController1 alloc] init] autorelease];
RootViewController *vc2 = [[[RootViewController alloc] init] autorelease];
UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:vc2] autorelease];
UITabBarController *tbc = [[[UITabBarController alloc] init] autorelease];
[tbc setViewControllers:@[vc1, navController]];
[window makeKeyAndVisible];
[window setRootViewController:tbc]; 
```

# javascript - 继承后无法让Javascript对象构造（在对象内）

> ID：14913737
> 
> 赞同：2
> 
> 时间：2013-02-16T18:39:17.310
> 
> 标签：javascript, object, inheritance

我已经为我一直在研究的游戏的 Player 类创建了一个 Javascript 对象，该游戏使用以下行从 Collidable 类“继承”：

```
Player.prototype = new Collidable(50, 50, 70); 
```

这个 Collidable 类有一个 Vector 类的实例，它在我的代码中被实例化，例如：

```
this.pos = new Vector(x, y) || new Vector(50, 50); 
```

我的问题是我可以很好地创建一个新的 Collidable 对象，并且里面的向量将具有在该`new Collidable(x, y, diameter)`部分的前两个参数中给出的 x 和 y 的值。但是，当创建一个新玩家 ( `current = new Player();`) 时，向量的 x 和 y 值变为 NaN。

下面我包含了 Collidable 构造函数和 Player 构造函数的代码。

可碰撞：

```
Collidable = function Collidable(x, y, d){
    this.pos = new Vector(x, y) || new Vector(50, 50); // Position of centre
    this.diam = d || 50; // Diameter
    this.col = new Color().randomRGB(); // For debug
}
// More functions below 
```

玩家：

```
Player = function Player(){
    this.health = 100;
    this.facing = 0;
    this.sprites = new Image();
    this.sprites.src = "./npc-oldman1.png";
    this.spriteNo = 0;
    this.moveSpeed = 2;
}

Player.prototype = new Collidable(50, 50, 70);
// More functions below 
```

我怀疑这与[这个](https://stackoverflow.com/questions/11836580/javascript-objects-object-values-getting-undefined-after-constructing)问题有关，但无法弄清楚出了什么问题。

我的完整代码[在这里](http://devio.us/~jxtc/try/)可用。它应该做的是显示一个老人的图像，该图像移动到鼠标单击的位置（它会在开始时闪烁（50, 50）（创建播放器的位置），或者当您手动更改 pos 值时） . 在添加 Collisions 类之前，我已经让代码工作了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:56:56.810

问题似乎是[嵌套对象的继承问题](https://stackoverflow.com/q/10131052/1048572)[和*`new`*](https://stackoverflow.com/q/12592913/1048572)*[[*不]*](https://stackoverflow.com/q/12592913/1048572)[使用](https://stackoverflow.com/q/12592913/1048572)[构造函数继承的](https://stackoverflow.com/q/1485824/1048572)[关键字](https://stackoverflow.com/q/12592913/1048572)/共享属性之间的混合。解决方案将是*

 *```
function Player(){
    Collidable.call(this, 50, 50, 70); // give *this* instance an *own* Vector
    this.health = 100;
    this.facing = 0;
    this.sprites = new Image();
    this.sprites.src = "./npc-oldman1.png";
    this.spriteNo = 0;
    this.moveSpeed = 2;
}

Player.prototype = Object.create(Collidable.prototype); // without creating instance 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:33:45.533

您的`vector.js`代码会执行以下检查：

```
if (typeof x === 'NaN' || typeof y === 'NaN') 
```

然而，`typeof NaN == 'number'`. 你想要`isNaN(x)`，或者更神秘地说，`x != x`

* * *

解决这个问题，很明显您的问题出在其他地方。这一行：

```
var diff = new Vector(this.getCentre.x - x, this.getCentre.y - y); 
```

应该是以下之一：

```
var diff = new Vector(this.getCentre().x - x, this.getCentre().y - y);
var diff = this.getCentre().diff(new Vector(x, y)) 
```

有很多组缺少括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:48:09.843

您的代码可能与您显示的问题不同。也许它不正常？我无法重现`NaN`，这是我使用的：

html

```
<div>Vector</div>
<div><span>X: </span><span id="x"></span><div>
<div><span>Y: </span><span id="y"></span></div> 
```

js

```
var Vector = function(x,y){
 this.x = x;
 this.y = y;
}
var Collidable = function Collidable(x, y, d){
    this.pos = new Vector(x, y) || new Vector(50, 50);
}
var Player = function Player(){
    this.health = 100;
}
Player.prototype = new Collidable(50, 50, 70);

var current = new Player();

console.log(current);
console.log(current.pos);

document.getElementById("x").innerHTML = current.pos.x;
document.getElementById("y").innerHTML = current.pos.y; 
```

演示：http: [//jsfiddle.net/MuRNx/](http://jsfiddle.net/MuRNx/)*

# c - MATLAB C 矩阵接口：mxDestroyArray 是否递归地破坏单元格和结构的元素？

> ID：14913739
> 
> 赞同：1
> 
> 时间：2013-02-16T18:39:23.733
> 
> 标签：c, matlab, mex, matlab-engine

问题就在标题中：`mxDestroyArray()`递归地破坏*单元*格和结构的元素吗？是关于 MATLAB 的[C 矩阵库接口](http://www.mathworks.com/help/matlab/cc-mx-matrix-library.html)。

通过一个具体示例更详细地解释，假设我使用 创建一个 1×1 单元格`mxCreateCellArray()`，然后使用 创建一个数字矩阵`mxCreateNumericArray()`并将其设置为单元格的唯一元素。现在调用`mxDestroyArray()`单元格是否也会一次性破坏数字数组？还是我需要为数字数组单独调用它，然后是单元格？我希望是后者，因为这对于复杂的操作更合理。

[文档](http://www.mathworks.com/help/matlab/apiref/mxdestroyarray.html)在这一点上是模棱两可的。此外，设计一个可以给出明确答案的测试并不容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:52:30.350

根据[我在 MATLAB answers 上得到的回复](http://www.mathworks.com/matlabcentral/answers/63726#answer_75323)，`mxDestroyArray()`可以递归地释放单元格和结构的元素。请参阅该答案以获取证实这一点的示例程序。

# ruby-on-rails - 如何更新/销毁集合中所有文档中的一个嵌入文档

> ID：14913740
> 
> 赞同：1
> 
> 时间：2013-02-16T18:39:23.573
> 
> 标签：ruby-on-rails, mongoid

我的应用程序模型允许患者拥有自定义字段。所有患者都有相同的海关字段。海关字段嵌入在患者文档中。我应该能够添加、更新和删除自定义字段，并且此类操作扩展到所有患者。

```
class Patient
  include Mongoid::Document
  embeds_many :custom_fields, as: :customizable_field

  def self.add_custom_field_to_all_patients(custom_field)
    Patient.all.add_to_set(:custom_fields, custom_field.as_document)
  end

  def self.update_custom_field_on_all_patients(custom_field)       
    Patient.all.each { |patient| patient.update_custom_field(custom_field) }
  end

  def update_custom_field(custom_field)
    self.custom_fields.find(custom_field).update_attributes({ name: custom_field.name, show_on_table: custom_field.show_on_table } )
  end

  def self.destroy_custom_field_on_all_patients(custom_field)
    Patient.all.each { |patient| patient.remove_custom_field(custom_field) }
  end    

  def remove_custom_field(custom_field)
    self.custom_fields.find(custom_field).destroy
  end
end

class CustomField
  include Mongoid::Document

  field :name,          type: String
  field :model,         type: Symbol
  field :value,         type: String
  field :show_on_table, type: Boolean, default: false

  embedded_in :customizable_field, polymorphic: true
end 
```

所有的病人都嵌入了相同的海关字段。添加自定义字段效果很好。我的疑问是关于更新和销毁。

这有效，但速度很慢。它对每个病人进行查询。理想情况下，我只能对 MongoDB 说“使用*id 更新文档：*该文档嵌入在*Patient*集合中所有文档的数组 *custom_fields* 中”。同理销毁。

我怎样才能在 Mongoid 中做到这一点？

我正在使用 Mongoid 3.1.0 和 Rails 3.2.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:58:15.100

我认为没有一种方法可以通过嵌入文档高效地做到这一点。

也许您应该考虑在模型之间建立引用关系，以便您可以在集合上使用`delete_all`and方法。`update_all`

# ios - 如何将 NSCoding 用于结构的 c 数组？（MK折线）

> ID：14913744
> 
> 赞同：2
> 
> 时间：2013-02-16T18:39:59.373
> 
> 标签：ios, objective-c, cocoa-touch, nscoding

我想将 NSCoding 支持添加到 c 结构数组中。具体来说，这是针对 的子类[`MKPolyline`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKPolyline_class/Reference/Reference.html)，即这是我必须使用的：

```
@property (nonatomic, readonly) MKMapPoint *points;
@property (nonatomic, readonly) NSUInteger pointCount;

+ (MKPolyline *)polylineWithPoints:(MKMapPoint *)points count:(NSUInteger)count; 
```

[我找到了一个关于如何编码*单个*struct](https://stackoverflow.com/q/448173/296446)的好答案。例如

```
NSValue* point = [NSValue value:&aPoint withObjCType:@encode(MKMapPoint)];
[aCoder encodeObject:point forKey:@"point"];

.... 

NSValue* point = [aDecoder decodeObjectForKey:@"point"];
[endCoordinateValue getValue:&aPoint]; 
```

有没有一种很好的方法可以将它应用到 ac 数组 - 或者我只需要遍历 c 数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:50:21.137

**注意**：这种方法只有在数据不在具有不同“字节序”的处理器之间传递时才有效。从 iOS 到 iOS 应该是安全的，当然如果只在给定的设备上使用的话。

您应该能够将 C 数组的内存加载到一个`NSData`对象中，然后对该对象进行编码`NSData`。

```
MKMapPoint *points = self.points;
NSData *pointData = [NSData dataWithBytes:points length:self.pointCount * sizeof(MKMapPoint)];
[aCoder encodeObject:pointData forKey:@"points"]; 
```

更新：取回数据：

```
NSData *pointData = [aCode decodeObjectForKey:@"points"];
MKMapPoint *points = malloc(pointData.length);
memcpy([pointData bytes], points);
self.points = points; 
```

# scala - 为什么 TypeTag 不适用于返回类型？

> ID：14913746
> 
> 赞同：3
> 
> 时间：2013-02-16T18:40:04.317
> 
> 标签：scala, scala-2.10

似乎`TypeTags`只适用于被调用方法的参数中使用的类型参数，而不是返回类型：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

import scala.reflect.runtime.universe._

object Test {
  def withParam[T: TypeTag](v: T): T = {
    println(typeOf[T])
    0.asInstanceOf[T]
  }

  def justReturn[T: TypeTag](): T = {
    println(typeOf[T])
    0.asInstanceOf[T]
  }
}

// Exiting paste mode, now interpreting.

import scala.reflect.runtime.universe._
defined module Test

scala> val i: Int = Test.withParam(17)
Int
i: Int = 0

scala> val j: Int = Test.justReturn()
Nothing
j: Int = 0 
```

这和2.9中Manifest的行为是一致的，但是有什么理由做不到，有没有其他方法可以达到这个效果呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:21:29.143

`T`为了扩展 Rex Kerr 的评论，在`justReturn`此案中没有什么可以推动推断。如果你提供一个（合适的）类型参数，你会得到：

```
scala> val j: Int = Test.justReturn[Int]()
Int
j: Int = 0 
```

如果你改成`justReturn`这样：

```
def justReturn[T: TypeTag]() {
  println(typeOf[T])
} 
```

...那么你可以这样做：

```
scala> justReturn[String]()
String

scala> justReturn[java.io.File]()
java.io.File 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T19:25:55.627

类型系统从最严格的类型开始（即`Nothing`，其中不能有实例；如果有的话，它将是一个能够代表任何事情并做任何事情的神一般的值）。然后根据需要扩大类型，但由于返回处于逆变位置，因此没有理由扩大。如果您实际上可以返回 a `Nothing`，那么您将在所有情况下都被设置。

然后，您通过告诉类型系统`0`是`Nothing`. 当然，这完全是错误的，但是编译器尽职尽责地相信您，并且您通过将其分配给 an 来挽救这种情况`Int`，这就是它一直以来的真实情况。（它也会很高兴地尝试将它分配给 a `String`，然后你会在运行时得到一个异常，因为此时它是无意义的。）

理论上，这可以以不同的方式完成，但这是类型推断算法的一个非常基本的部分。

# hibernate - 如何从休眠日志中删除无意义的代码（HHH000 ...）

> ID：14913748
> 
> 赞同：4
> 
> 时间：2013-02-16T18:40:15.230
> 
> 标签：hibernate, logging, jboss-logging

我正在尝试新版本的 Hibernate（到目前为止我使用的是 3.x），并且无论出于何种原因，Hibernate 都切换到了 jboss-logging。这是我可以轻松忍受的东西，但我喜欢保持我的日志干净和可读，并将代码插入到日志消息中：

```
16 Feb 2013 19:25:08,352 INFO  [Version:37] - HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
16 Feb 2013 19:25:08,357 INFO  [Version:41] - HHH000412: Hibernate Core {4.1.9.Final}
16 Feb 2013 19:25:08,358 INFO  [Environment:239] - HHH000206: hibernate.properties not found
16 Feb 2013 19:25:08,359 INFO  [Environment:342] - HHH000021: Bytecode provider name : javassist 
```

我使用 log4j 作为日志库，我的模式是

```
log4j.appender.stdout.layout.ConversionPattern=%d{dd MMM yyyy HH:mm:ss,SSS} %-5p [%c{1}:%L] - %m%n 
```

这表明该代码已经是发送到 log4j 的消息的一部分。

那么有没有办法从日志消息中删除代码

```
16 Feb 2013 19:25:08,357 INFO  [Version:41] - Hibernate Core {4.1.9.Final} 
```

我不想完全关闭休眠日志记录，我只是不希望其中包含 HHH000412 之类的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:32:33.363

请参阅[此](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/session-configuration.html#configuration-logging)内容以查看 hibernate 内部使用的 log4j 记录器的名称。

通过将这些 log4j 记录器的日志级别配置为不同的值，您可以配置要记录的消息。

例如，`log4j.logger.org.hibernate=OFF`禁用休眠中的所有日志记录。`log4j.logger.org.hibernate=ERROR`只会记录日志级别最低的消息`ERROR`（即`INFO`不会输出级别日志消息）

# ruby-on-rails - 在 2.3 和 3.2 应用程序之间共享会话

> ID：14913753
> 
> 赞同：0
> 
> 时间：2013-02-16T18:40:37.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, device, omniauth, ruby-on-rails-2

我有一个用 rails 2.3 编写的应用程序。此应用程序使用设备进行身份验证。我需要与其他一些项目（如 Worpdress）创建 SSO。

因为较新版本的设计包含omniauth 支持，所以我需要创建一个中间应用程序作为身份验证端点。此工具仅会验证用户并重定向到 2.3 应用程序，用户已登录。

这是流程：

用户登录 2.3 应用程序 => 请求 3.2 应用程序 => 使用外部系统进行 OAuth => 登录 2.3 应用程序

我做了所有需要的配置。基本上是共享相同的密钥和秘密以允许应用程序共享会话。问题是在成功登录后，我在 2.3 应用程序中收到以下错误：

```
Status: 500 Internal Server Error
Session contains objects whose class definition isn\'t available.
Remember to require the classes for all objects kept in the session.
(Original exception: #{const_error.message} [#{const_error.class}]) 
```

我猜这个错误意味着我的会话包含一些 2.3 应用程序不知道如何实例化的类。我只是不知道如何找到哪些类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:15:50.460

解决了。问题是在 3.2 rails 应用程序中添加的 Flash 消息。此消息的类是 ActionDispatch::Flash::FlashHash，2.3 应用程序的类是 ActionController::Flash::FlashHash。

我的解决方案是删除调用 set_flash_message。既然你解决了 3.2 => 2.3，也许你需要回到 3.2 应用程序。由于 2.3 应用程序将添加带有“错误”类的 Flash 消息，因此您需要在 3.2 应用程序中添加这个新类的定义：

```
# config/initializers/session_store.rb
module ActionController
  module Flash
    class FlashHash < Hash
      def method_missing(m, *a, &;b)
      end
    end
  end
end 
```

参考：

导轨 3.2 => 2.3。[这个帖子](http://blog.kabisa.nl/2010/10/27/share-sessions-between-rails-2-and-rails-3-applications/)

Rails 2.3 => 3.2[这篇文章](http://corrupt.net/2010/08/04/Sharing-Sessions-Between-Rails-2-and-Rails-3-Applications/)

# java - String.replaceAll() - 将“I”替换为“You”，反之亦然

> ID：14913758
> 
> 赞同：1
> 
> 时间：2013-02-16T18:41:08.727
> 
> 标签：java, string, replaceall

```
String inputString = args[0];
String out2 = inputString.replaceAll("I", "you");
String out1 = out2.replaceAll("you", "I");
System.out.println(out1); 
```

以上是main方法中的代码。它应该将“I”替换为“you”，将“you”替换为“I”，但只有后一个对 replaceAll() 的调用才有效（如调用 out2 的那个）。运行时，我将作为输入字符串的第一个参数设置为“我讨厌关于你的一切”，这应该为你切换 I，反之亦然，而是输出“我讨厌关于我的一切”。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T18:43:52.450

那是因为`I's`当`you`你更换`you's`.

您需要为这些类型的替换使用中间替换值才能像这样工作：

```
inputString = inputString.replaceAll("I", "_I_")
                         .replaceAll("you", "I")
                         .replaceAll("_I_", "you"); 
```

这假设您的中间值（`"_I_"`）尚未在您的字符串中。因此，您必须谨慎选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:44:03.037

你变回来了 你需要的是一个临时符号的交换，即#TEMP#代表我，我代表你，你代表#TEMP#。

# javascript - 将用户重定向到特定时间并返回

> ID：14913759
> 
> 赞同：0
> 
> 时间：2013-02-16T18:41:14.740
> 
> 标签：javascript

我的目标是将用户重定向到特定网站 18 秒，然后重定向回我的网站。为此，我编写了下面的代码。我面临的问题是网站开始循环重定向，所以我必须想出一个条件来避免这种情况。为此，我检查了用户是否来自我的重定向网站，但现在重定向根本不起作用。请指导。谢谢

注意：startupsandfinance 是用户被重定向回来的域名。

```
<script type='text/javascript'>
if !(( document.referrer.search(&quot;startupsandfinance&quot;))){

                        document.cookie=&quot;toURL&quot;+ &quot;=&quot; +escape(document.URL)+&quot;;path=/; domain=.mycsnippets.com&quot;;
                        document.cookie=&quot;refURL&quot;+ &quot;=&quot; +escape(document.referrer)+&quot;;path=/; domain=.mycsnippets.com&quot;;
                        this.location=&#39;http://www.startupsandfinance.com/welcome.htm&#39;;

}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:44:50.453

> 请指导

*   `if !((`是语法错误
*   `!search()`将不起作用，因为在没有找到任何内容时`search`返回`-1`并且索引为其他
*   不要使用`this.location`，但是`window.location`
*   无需在`<script>`标签内使用实体转义
*   永远不要依赖`referer`，它很容易被欺骗或被禁用。改用cookies：在重定向之前设置它，回来时你可以检查它。

# c++ - 共享文件视图 - 访问控制

> ID：14913762
> 
> 赞同：0
> 
> 时间：2013-02-16T18:41:21.460
> 
> 标签：c++, windows, winapi, acl, shared-memory

我想知道是否可以对共享文件视图设置访问控制，所以只有我的应用程序启动的进程才能访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:17:51.283

用于`CreateFileMapping`创建具有可继承句柄的未命名文件映射。

子进程将继承句柄，因此它们可以在文件上创建视图。其他进程将无法访问映射。

# c# - WPF和Caliburn C#编译后不渲染窗口

> ID：14913763
> 
> 赞同：1
> 
> 时间：2013-02-16T18:41:24.970
> 
> 标签：c#, wpf, caliburn

我想尝试用 Caliburn.Micro 框架创建一个 WPF 应用程序，但是我遇到了一个问题。我在 Silverlight 中看到了许多教程资源，但在 WPF 上并不好。我拥有 Silverlight 教程中的所有内容，所有内容都已编译但未渲染。

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:CaliburnTest"
             x:Class="CaliburnTest.App">
    <Application.Resources>
        <local:AppBootstrapper x:Key="Bootstrapper" />
    </Application.Resources>
</Application> 
```

引导程序

```
namespace CaliburnTest
{
    class AppBootstrapper : Bootstrapper<AppViewModel> {}
} 
```

应用视图

```
<Window x:Class="CaliburnTest.Views.AppView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AppView" Height="350" Width="525">
    <Grid>

    </Grid>
</Window> 
```

```
namespace CaliburnTest.Views
{
    public partial class AppView
    {
        public AppView()
        {
            InitializeComponent();
        }
    }
} 
```

应用模型视图

```
using Caliburn.Micro;

    namespace CaliburnTest.ViewModels
    {
        class AppViewModel : PropertyChangedBase
        {
        }
    } 
```

谢谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:49:44.037

我发现了问题。写得很糟糕 app.xaml 应用程序资源 这是 xaml 文件的正确内容

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:CaliburnTest"
             x:Class="CaliburnTest.App">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary>
                    <local:AppBootstrapper x:Key="Bootstrapper" />
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

# ruby - 为什么带有字符串数组的ruby并行赋值返回字符串

> ID：14913765
> 
> 赞同：7
> 
> 时间：2013-02-16T18:41:29.527
> 
> 标签：ruby

我不确定下面的代码片段到底发生了什么。

```
>> a, b = ["ho", "hey"]
=> ["ho", "hey"]
>> a
=> "ho"
>> b
=> "hey"    
>> c, d = "foo", "bar"
=> ["foo", "bar"]
>> c 
=> "foo"
>> d
=> "bar"
>> a, b = ["blerg"], ["baz"]
=> [["blerg"], ["baz"]]
>> a
=> ["blerg"]
>> b 
=> ["baz"] 
```

为什么第 1 行不返回`a => ["ho"]`？

`a, b = ["ho", "hey"]`那么在幕后，这三个赋值（ , `c, d = "foo", "bar"`, `a, b = ["blerg"], ["baz"]`）有什么区别呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T18:48:35.043

```
a, b = ["ho", "hey"] 
```

`a`分配数组的第一个元素，即字符串“ho”。没什么奇怪的。

```
a, b = ["blerg"], ["baz"]

a, b = [["blerg"], ["baz"]] 
```

这两个是相同的，从它们的返回值可以看出。所以 a 被分配了第一个元素，它是一个包含一个元素的数组：`["blerg"]`。

相似地，

```
c, d = "foo", "bar" 
```

是相同的

```
c, d = ["foo", "bar"] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T20:23:38.493

在 Ruby 中，`=` 左侧是变量列表，右侧是表达式列表。它将第一个变量分配给第一个表达式的值，将第二个变量分配给第二个表达式的值，依此类推。如果变量多于表达式，剩余的变量将被赋值`nil`。

```
> a, b, c, d = "foo", 2+3, Array.new(2, 3), [:c, :d]
> a     # => "foo"
> b     # => 5
> c     # => [3, 3]
> d     # => [:c, :d]
> e     # => nil 
```

有两个例外：

**左侧只有一个变量，右侧有多个表达式**

在这种情况下，上面的规则会说变量只是被设置为右边第一个表达式的值。相反，该变量被设置为由右侧表达式的值组成的数组。在下面的示例中，我们看到`a`获取值`[:b, :c]`，而不仅仅是`:b`：

```
> a = :b, :c
> a    # => [:b, :c] 
```

这相当于：

```
> *a = :b , :c
> a    # => [:b, :c] 
```

另一个例外：

**左边有多个变量，右边只有一个表达式*，*它是一个数组**

同样，原始规则意味着第一个变量被设置为整个数组，其余变量将为 nil。但是，该数组实际上最终会被其元素列表替换，然后`=`恢复为开头描述的“默认”行为：

```
> a, b, c = [:d, [:e, :f]]
> a    # => :d
> b    # => [:e, :f]
> c    # => nil 
```

这相当于`a, b, c = *[:d, [:e, :f]]`，或者只是`a, b, c = :d, [:e, :f]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:55:49.727

在您指出的示例中，多重赋值的右侧使用了 2 种不同的结构：

**来自简单数组的多重赋值**

```
array = ["item1", "item2"]
a, b = array
# a => "item1"
# b => "item2" 
```

**来自数组的多重赋值，其元素本身就是单元素数组（又名：多维数组）**

```
array = [["item1"], ["item2"]]
a, b = array
# a => ["item1"]
# b => ["item2"] 
```

多重赋值*仅展开多维数组的第一级*，并允许您将这些元素分配给表达式左侧的多个变量。因此，当您使用多维数组执行此操作时，它会获取第一个元素`["item1"]`并将其分配给`a`，然后移动到下一个元素，即`["item2"]`并将其分配给`b`。多重赋值不会“深入”到多维数组中，它从第一级元素执行赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T19:47:55.957

Ruby 语言中的赋值运算符允许[多重赋值](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators) （又名：并行赋值）。

对赋值运算符 (=) 左侧的左侧变量或属性说*左*值，对右侧值说*右值。*

通过*多次赋值*，您可以将一个逗号分隔列表分配给另一个，左侧的相应变量从右侧获取相应的值

### 第一次并行分配

```
a, b = ["ho", "hey"] 
```

如果最后一个*右值*是一个数组，你可以在它前面加上一个星号，这可以**有效地将它扩展成它的组成值**。*如果右值*是右侧唯一的东西，则不需要星号**，数组将自动展开**。

为了更好地理解，试试这个：

```
>> a,b,c =  "1",*["ho", "hey"]
=> ["1", "ho", "hey"]
>> a
=> "1"
>> b
=> "ho"
>> c
=> "hey" 
```

让我们再看看：

```
>> a,b,c =  "1",["ho", "hey"]
=> ["1", ["ho", "hey"]]
>> a
=> "1"
>> b
=> ["ho", "hey"]
>> c
=> nil 
```

如您所见，如果我们不使用 * 作为数组前缀，则不会扩展数组。

### 第二次并行分配

```
c, d = "foo", "bar" 
```

"foo", "bar" 是分配给左侧相应变量的两个[**文字字符串。**](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals)

### 第三次并行分配

```
a, b = ["blerg"], ["baz"])? 
```

`["blerg"]`并且`["baz"]` 是两个**数组**，每个数组包含一个**String**类的元素；

因此，每个“单个字符串的数组”都分配给左侧的相应变量。

# wordpress - wordpress.com上的博客创建时间可以确定吗？

> ID：14913768
> 
> 赞同：0
> 
> 时间：2013-02-16T18:42:01.603
> 
> 标签：wordpress, alexa, webarchive, wordpress.com

是否有可能今天在 wordpress.com 上写博客，并给它一个过去另一个时间的日期？

另一个问题是如何找到[http://wordpress.com/](http://wordpress.com/)中的博客的创建时间？我所说的博客是指用户的博客，其 URL 类似于 user.wordpress.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:13:23.897

`Is it possible to write a blog in wordpress.com today and give it a date of another time in the past?`
这是可能的。

`Another question is how do I find when a blog in http://wordpress.com/ was created? By saying blog I meant a user's blog with a URL like user.wordpress.com.`
通过访问[http://en.forums.wordpress.com/profile/wordpress-username](http://en.forums.wordpress.com/profile/wordpress-username)

# c# - 获取有关连接到计算机的显示器、键盘和鼠标的信息

> ID：14913770
> 
> 赞同：-1
> 
> 时间：2013-02-16T18:42:31.067
> 
> 标签：c#, get, product, device

有没有一种有效的方法来获取产品名称、制造商、一些唯一的 ID 或类似的东西在 c# 中连接到计算机的显示器、键盘和鼠标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:47:14.010

您可以为此使用[WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)，您可以在此处找到示例：

[http://www.codeproject.com/Articles/7365/Retrieving-Hardware-Information-in-C](http://www.codeproject.com/Articles/7365/Retrieving-Hardware-Information-in-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:26:14.027

要获取有关监视器的信息，您可以使用 OpenSource 项目 ( [https://sourceforge.net/projects/wmimonitor/](https://sourceforge.net/projects/wmimonitor/) ) 是一个用 C# 编写的简单 WMI 提供程序（需要 .NET 3.5 SP1）来列出序列号和型号名称附加监视器。** 或使用此代码

```
try
        {
            ManagementObjectSearcher searcher = 
                new ManagementObjectSearcher("root\\CIMV2", 
                "SELECT * FROM Win32_DesktopMonitor"); 

            foreach (ManagementObject queryObj in searcher.Get())
            {
                Console.WriteLine("-----------------------------------");
                Console.WriteLine("Win32_DesktopMonitor instance");
                Console.WriteLine("-----------------------------------");
                Console.WriteLine("Description: {0}", queryObj["Description"]);
            }
        }
        catch (ManagementException e)
        {
            MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
        } 
```

要获取有关麦克风的信息，请查看使用[NAudio的开源 .NET](http://naudio.codeplex.com/) [Voice Recorder](http://voicerecorder.codeplex.com/)项目。或查看此文章，要获取[keboard](http://channel9.msdn.com/coding4fun/articles/NET-Voice-Recorder)信息，请使用此[示例](http://code.msdn.microsoft.com/windowsdesktop/CCS-LABS-WMI-Getting-bc106fa2)

# linux - 如何不使用正则表达式和 sed 检测结尾“/”？

> ID：14913771
> 
> 赞同：0
> 
> 时间：2013-02-16T18:42:35.133
> 
> 标签：linux, shell, sed

我一直在使用从“ls -lF”中查找目录的正则表达式：

```
sed -n '/\/$/p' 
```

现在，我希望它适用于 NOT 目录（即文件，但不是符号链接）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:23:21.910

[不要试图解析`ls`](http://mywiki.wooledge.org/ParsingLs). 对命令使用适当的谓词`find`，或查看该`test`命令可用的初级。

```
find . ! -type d 
```

或者

```
for f in *; do
    if ! [ -d "$f" ]; then
        echo "$f"
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:03:11.487

```
ls -lF | sed -n '/\/$/!p'
# --------------------^------ 
```

与 Unix 中的许多地方一样，! 否定测试。或者您可能熟悉工具系列中的`-v`否定。`grep`

IHTH

# ruby-on-rails - 如何让 TextMate 自动完成你的 Ruby 代码？

> ID：14913773
> 
> 赞同：2
> 
> 时间：2013-02-16T18:42:54.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, autocomplete, textmate

我一直在关注 Michael Hartl 的 Rails 教程，我注意到他的 TextMate 对代码进行自动假设，并提供建议和关闭标签等，而我的没有。如何启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:43:20.703

这主要是通过片段、包和宏来完成的。有很多是预加载的，但您可以自定义自己的。当您观看 Ryan Bates 的“RailsCasts”时，您可以在右上角看到他正在按下哪些快捷键，这可以帮助您学到很多东西。

[TextMate 基础知识](http://projects.serenity.de/textmate/tutorials/basics/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T21:00:19.440

我知道你的问题是关于 TextMate，但 Michael 有一个非常有用的页面，介绍[如何为 Ruby/Rails 设置 Sublime](https://github.com/mhartl/rails_tutorial_sublime_text)

# php - PHP图像脚本经常报错500 internal server error

> ID：14913775
> 
> 赞同：0
> 
> 时间：2013-02-16T18:43:01.500
> 
> 标签：php, image, error-handling

我的 PHP 脚本将 Retina 图像服务器提供给具有高分辨率显示器的设备通常会给出错误 500，我不知道为什么。这是我的脚本：

```
<?php

/**********************/
/*    SETTING VARS    */
/**********************/
define('CACHE_TIME', 24*60*60);

$document_root   = $_SERVER['DOCUMENT_ROOT'];
$source_file     = $document_root."/".$_GET['img'];
$source_ext      = strtolower(pathinfo($source_file, PATHINFO_EXTENSION));
$retina_file     = pathinfo($source_file, PATHINFO_DIRNAME).'/'.pathinfo($source_file, PATHINFO_FILENAME).'@2x.'.pathinfo($source_file, PATHINFO_EXTENSION);
$cache_directive = 'must-revalidate';
$dpr             = $_COOKIE['dpr'];

/*********************/
/*    WHICH FILE?    */
/*********************/
if($dpr == 2){
    if(file_exists($retina_file)){
        $serve_file = $retina_file;
    }else{
        $serve_file = $source_file;
    }
}else{
    if(file_exists($source_file)){
        $serve_file = $source_file;
    }else{
        $serve_file = $retina_file;
    }
}

/**********************/
/*    SERVING FILE    */
/**********************/
if (!file_exists($serve_file)) {
    header('HTTP/1.1 404 Not Found', true);
    exit();
}

// Send cache headers
header("Cache-Control: private, {$cache_directive}, max-age=".CACHE_TIME, true);
date_default_timezone_set('GMT');
header('Expires: '.gmdate('D, d M Y H:i:s', time()+CACHE_TIME).' GMT', true);

$etag = '"'.filemtime($serve_file).fileinode($serve_file).'"';
header("ETag: $etag", true);
if (isset($_SERVER['HTTP_IF_NONE_MATCH']) && ($_SERVER['HTTP_IF_NONE_MATCH']) === $etag) {
    // File in cache hasn't change
    header('Last-Modified: '.gmdate('D, d M Y H:i:s', filemtime($serve_file)).' GMT', true, 304);
    exit();
}

// Send image headers
if (in_array($source_ext, array('png', 'gif', 'jpeg', 'bmp'))) {
    header("Content-Type: image/".$source_ext, true);
}
else {
    header("Content-Type: image/jpeg", true);
}
header('Content-Length: '.filesize($serve_file), true);

// Send file
readfile($serve_file);
exit();
?> 
```

这是我的错误日志：

```
[13-Feb-2013 06:51:10 America/Chicago] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdo_sqlite.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdo_sqlite.so: cannot make segment writable for relocation: Cannot allocate memory in Unknown on line 0
[13-Feb-2013 06:51:42 America/Chicago] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/ssh2.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/ssh2.so: failed to map segment from shared object: Cannot allocate memory in Unknown on line 0
[13-Feb-2013 08:23:21 America/Chicago] PHP Fatal error:  Out of memory (allocated 262144) (tried to allocate 261900 bytes) in Unknown on line 0
[13-Feb-2013 08:55:36 America/Chicago] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/ssh2.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/ssh2.so: failed to map segment from shared object: Cannot allocate memory in Unknown on line 0
[16-Feb-2013 04:24:10 America/Chicago] PHP Fatal error:  Out of memory (allocated 262144) (tried to allocate 261900 bytes) in Unknown on line 0 
```

错误发生在页面中的随机图像上，它总是不同的。有时页面甚至在我的图像上加载时没有任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:57:28.737

检查 memory_limit ini php.ini 并在需要时提高。还要确保使用 ob_get_level() 关闭输出缓冲。如果打开，在 readfile() 之前调用 ob_end_flush()。

# jquery - 使用 jQuery 更改 iframe 的宽度和高度？

> ID：14913784
> 
> 赞同：14
> 
> 时间：2013-02-16T18:43:51.193
> 
> 标签：jquery, css, iframe

我尝试了在这个网站上找到的解决方案。但是，它对我不起作用。我在想有一个脚本在其他地方设置这个，所以我需要在页面中添加一些代码来覆盖样式。

我试过这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#frame1").width(578);
        $("#frame1").height(326);
    });
</script> 
```

但是，html 仍然是这样的：

```
<iframe frameborder="0" src="http://player.vimeo.com/video/20657168?color=fc030f" style="width: 500px; height: 281.25px;"></iframe> 
```

我想`width`成为`578`和`height`成为`326`。这是网站：[http ://beckindesigns.tumblr.com/](http://beckindesigns.tumblr.com/)

PS 如果我添加一个类或 ID，它会从 html 中删除它。我用的是豆瓣。。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-16T18:51:57.040

如果您添加`id="frame1"`到您的`iframe`.

```
<iframe frameborder="0" id="frame1" src="http://player.vimeo.com/video/20657168?color=fc030f" style="width: 500px; height: 281.25px;"></iframe> 
```

将`$("#frame1")`选择具有 id 属性的元素`frame1`。供参考：[jQuery 选择器](http://api.jquery.com/category/selectors/)和[ID 选择器](http://api.jquery.com/id-selector/)。

**更新：**由于您说 ID 被剥离，您可以更改选择器的工作方式，并将其应用于所有 iFrame：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("iframe").width(678);
        $("iframe").height(526);
    });
</script> 
```

如果页面上有多个 iFrame，并且不希望它们大小相同，则可以使用[:eq(index)](http://docs.jquery.com/Selectors/eq)选择器，它将匹配从零开始的索引。因此，如果页面上有两个 iFrame，并且只想更改第二个，请使用：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("iframe:eq(1)").width(678);
        $("iframe:eq(1)").height(526);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-25T18:56:12.103

将 iframe 调整为窗口大小

```
<iframe frameborder="0" src="http://player.vimeo.com/video/20657168?color=fc030f" style="width: 500px; height: 281.25px;"></iframe>

<script>
    $(document).ready(function(){
       $("iframe").height($(window).height());
       $("iframe").width($(window).width());

       $( window ).resize(function() {
            $("iframe").height($(window).height());
            $("iframe").width($(window).width());
        });
    });
  </script> 
```

# javascript - Jquery - 使整个页面变暗并淡出一个 div 元素

> ID：14913788
> 
> 赞同：10
> 
> 时间：2013-02-16T18:44:17.297
> 
> 标签：javascript, jquery, z-index, opacity

我正在尝试执行以下操作： - 单击链接会触发一个功能，该功能将显示一个 DIV（#page-cover）使我的整个背景变暗。这个 div 的 z-index 为 999 - 然后我希望另一个 div (#red) 出现在具有更高 z-index 的变暗背景/淡入淡出/显示上

我的 CSS：

```
#page-cover {
    display: none;
    position: fixed;
    width: 100%;
    height: 100%;
    background-color: #000;
    z-index: 999;
    top: 0;
    left: 0;
}
    #red {
    background-color: red;
    width: 100px;
    height: 100px;
} 
```

HTML

```
//Triggering link
<a href="#" onclick="dimBackground("Element1")">Element 1</a>
//Div to appear upon dimmed DIV
<div id="red">hejsa</div>
//Dimming DIV
<div id="page-cover"></div> 
```

jQuery

```
function dimBackground() {
    $("#page-cover").css("opacity",0.6).fadeIn(300, function () {
        //Attempting to set/make #red appear upon the dimmed DIV
        $('#red').css('zIndex', 10000);
    });
} 
```

# page-cover 按预期消失，但是我没有成功让#red 出现。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T18:55:30.760

CSS

```
#page-cover {
    display: none;
    position: fixed;
    width: 100%;
    height: 100%;
    background-color: #000;
    z-index: 999;
    top: 0;
    left: 0;
}
    #red {
    background-color: red;
    width: 100px;
    height: 100px;
} 
```

HTML：

```
//Triggering link
<a id="triggeringlink" href="#">Element 1</a>
//Div to appear upon dimmed DIV
<div id="red">hejsa</div>
//Dimming DIV
<div id="page-cover"></div> 
```

JS

```
$(window).load(function(e){
  $('#triggeringlink').on('click',function(e){
     $("#page-cover").css("opacity",0.6).fadeIn(300, function () {            
        $('#red').css({'position':'absolute','z-index':9999});
     });
   e.preventDefault();
   });
}); 
```

这是一种略有不同的方法，但我认为这就是您所追求的。当页面加载时，我们将点击事件绑定到`<a>`标签，而不是内联 JS。我已经更新了 CSS，以便隐藏 RED div，并绝对定位 - 在覆盖层之上。您可能需要在淡入之前拉出屏幕尺寸并将其居中放置，让我知道这是否是您的意图，我会更新答案。

# typescript - TypeScript：导入的模块类不可见

> ID：14913793
> 
> 赞同：2
> 
> 时间：2013-02-16T18:44:56.660
> 
> 标签：typescript

我正在测试带有多个模块的打字稿编译器，这些模块将被编译为 AMD 模块。

我有一个模块“测试”和一个单独的文件将使用它

测试.ts：

```
export module test {
'use strict';

  export class Person {
      age:number = 0;
      sin:number = 1;
  }

  var pp = new Person();

} 
```

test.ts 声明模块“test”并导出它。文件编译和js输出如预期：

测试.js：

```
define(["require", "exports"], function(require, exports) {
(function (test) {
    'use strict';
    var Person = (function () {
        function Person() {
            this.age = 0;
            this.sin = 1;
        }
        return Person;
    })();
    test.Person = Person;        
    var pp = new Person();
})(exports.test || (exports.test = {}));
var test = exports.test;
}) 
```

现在在同一个文件夹中有 test2.ts 将使用模块“test”

测试2.ts：

```
///<reference path="test.ts"/>

import TT = module("test");

var p = TT.Person; 
```

编译器在这里抱怨：

> src/ts/test2.ts(5,11)：“TT”类型的值上不存在“Person”属性

输出 js 文件似乎是正确的：test2.js：

```
define(["require", "exports", "test"], function(require, exports, __TT__) {
  ///<reference path="test.ts"/>
  var TT = __TT__;

  var p = TT.Person;
}) 
```

编译器版本是：

> 0.8.2.0

命令行是：

> tsc --comments --declaration --target ES5 --module AMD $FilePath$

这里的编译器有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T08:57:10.090

这是您需要的代码...

```
import TT = module("test");

var p = new TT.test.Person(); 
```

和一个快速的解释。

当您使用 AMD 或 CommonJS 加载模块并使用`import`语句时，您不需要使用`reference`注释。做你需要的`import`一切。

此外，文件本身就是模块，因此`TT`在您的代码中表示`test.ts`. 在这个文件（它是一个模块）内部是另一个显式调用的模块`test`，所以实际上你有一个这样的结构：`test.test.Person`.

您可以选择只使用文件模块而不添加另一个嵌套模块，如下所示：

*测试.ts*

```
export class Person {
    age:number = 0;
    sin:number = 1;
}

var pp = new Person(); 
```

这将允许您使用非嵌套版本，即：

```
import TT = module("test");

var p = new TT.Person(); 
```

# latex - Texstudio 词库已损坏

> ID：14913794
> 
> 赞同：8
> 
> 时间：2013-02-16T18:44:56.653
> 
> 标签：latex, thesaurus

我刚刚安装了 TeXStudio，因为我认为它比 TeXmaker 有更多的功能。

我无法开始工作的一件事是词库。我已经[从 LibreOffice 下载并安装了丹麦语词库，](http://extensions.libreoffice.org/extension-center/stavekontrolden-danish-dictionary/pscreleasefolder.2011-09-30.0280139318/2.1/dict-da-2.1.oxt)但它似乎不起作用。

我试过 tex.stackexchange，但没有运气。我认为这是一个错误，或者是来自 Libreoffice 的 .dat 文件中的语法错误。它可能有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-30T12:23:13.563

*（这个答案用TeX StackExchange 中的[图片进行了扩展](https://tex.stackexchange.com/questions/385157/how-to-set-up-thesaurus-in-texstudio#387327)*） 。

到目前为止，您肯定已经解决了这个问题，但是对于所有遇到同样问题的人来说，这里有一个经过测试**的任何语言**的解决方案。:-)

解决问题有两个主要步骤：

1.  下载**同义词库文件**（*.dat*和*.idx*）
2.  使*TexStudio*使用**同义词库文件**。

开始了：

1.  下载同义词库文件

* * *

对我来说，获取这些文件的最简单方法是：

1.  下载所需语言词典的 LibreOffice/OpenOffice 扩展名*.oxt*（检查扩展名是否包含**同义词库**，否则无用！;-)）
    例如，对于丹麦语，可以在 [http://extensions.libreoffice.org找到](http://extensions.libreoffice.org/extension-center/stavekontrolden-danish-dictionary)*.oxt文件*[/扩展中心/stavekontrolden-丹麦语词典](http://extensions.libreoffice.org/extension-center/stavekontrolden-danish-dictionary)

2.  解压缩*.oxt*文件并获取两个词库文件（*.dat*和*.idx*）。 **是的，您可以**解压缩*.oxt*文件！使用你喜欢的解压程序（如LINUX：unzip，WINDOWS：winzip）。解压后会看到文件。对于丹麦语，词库文件是：

*   *th_da_DK.dat*
*   *th_da_DK.idx*

3.  将词库文件存储在您选择的文件夹中。现在您可以自由选择存储它们的位置。我对 LINUX 的建议：`/usr/share/mythes`但`~/mythesfolder`也应该这样做。

您已准备好下载同义词库文件！

2.  使 TexStudio 与同义词库文件一起工作

* * *

在 TexStudio 中激活**同义词库：**

1.  转到： *选项 -> 配置 TexStudio -> 常规*
2.  现在您在一个包含一些部分的对话框中：*外观*、*字典*等。您可以在*字典部分中看到**词库数据库*字段。好吧，这是您必须在该字段中输入*.dat*同义词库文件的完整路径（在此步骤中您可以忽略*.idx*文件）的问题的关键。
    示例：如果您在路径上安装了丹麦语词库，`/usr/share/mythes`则应在此处写入 `/usr/share/mythes/th_da_DK.dat`

**而已！**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-19T17:11:32.023

我找到了一种更简单的方法，以防万一有人还在为这个问题苦苦挣扎。只需将您要使用的语言的 LibreOffice 位置放入同义词词典路径即可。例如对于西班牙语和 Windows 操作系统的使用
`"C:\Program Files\LibreOffice 5\share\extensions\dict-es\th_es_ANY_v2.dat"`
，就是这样。这个对我有用

# java - 使用java按指定顺序排列arrayList的值

> ID：14913795
> 
> 赞同：0
> 
> 时间：2013-02-16T18:45:07.333
> 
> 标签：java, arraylist

我试图为以下场景找到更好和优化的解决方案
我有一个 arrayList

```
ArrayList<Order> orders = new ArrayList<Order>(); 
```

排序后的结果值如下

```
 {  
     medicine,    
     medicine,  
     milk,    
     milk,    
     pillow,  
     Soap,         
     toy       
} 
```

我对所有这些项目都有一个 ENUM

```
public Enum Items{  
PILLOW("pillow"),  
HARDDISK("harddisk"),  
MILK("milk"),  
SOAP("soap"),  
MEDICINE("medicine"),  
TOY("toy")    
} 
```

我的输出顺序应该如下

```
{    
milk,  
milk,  
harddisk,  
medicine,  
medicine,  
toy,  
soap,  
pillow  
} 
```

为了做到这一点，我想做的就是

```
ArrayList<Order> resultList = new ArrayList<Order>();  
for(Order order: orders){  
if(order.getItemName.equals(Items.MILK){  
resultList.add(order);  
}    

for(Order order: orders){    
if(order.getItemName.equals(Items.MEDICINE){  
resultList.add(order);    
}  

.......  

for(Order order: orders){  
if(order.getItemName.equals(Items.PILLOW){  
resultList.add(order);  
} 
```

如果我遵循上述方法，我能够以上述指定顺序获得输出顺序，但我担心的是因为我在这里循环了许多 for 循环，我想要优化方法的建议。

输出应按以下顺序排序

1) 牛奶 2) 硬盘 3) 药品 4) 玩具 5) 肥皂 6) 枕头

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:48:15.023

取而代之的是，您可以使用`Collections#sort(list,comparator)`可以传递自定义比较器的地方以特定顺序获取结果。

```
Collections.sort(list, new Comparator<Order>() {

    @Override
    public int compare(Order obj1, Order obj2) {
         // write the custom logic 
         // a negative integer, zero, or a positive integer as the first argument
         // is less than, equal to, or greater than the second
         return 0;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T18:51:48.187

枚举具有自然顺序，即枚举成员的声明顺序。因此，如果您想要指定的顺序，则应将枚举声明为：

```
public Enum Item {  
    MILK("milk"),  
    HARDDISK("harddisk"),  
    MEDICINE("medicine"),  
    TOY("toy"),
    SOAP("soap"),  
    PILLOW("pillow");    
} 
```

然后你可以像这样对你的订单进行排序：

```
Collections.sort(orders, new Comparator<Order>() {
    @Override
    public int compare(Order o1, Order o2) {
        return o1.getItem().compareTo(o2.getItem());
    }
}); 
```

如果您无法修改枚举，请使用以下技巧：

```
private static final List<Item> ITEMS_IN_ORDER = Arrays.asList(new Item[] {
    Item.MILK,  
    Item.HARDDISK,  
    Item.MEDICINE,  
    Item.TOY,
    Item.SOAP,  
    Item.PILLOW
});

...

Collections.sort(orders, new Comparator<Order>() {
    @Override
    public int compare(Order o1, Order o2) {
        return Integer.compare(ITEMS_IN_ORDER.indexOf(o1.getItem()),
                               ITEMS_IN_ORDER.indexOf(o2.getItem()));
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:59:03.487

那么另一种选择，将您的枚举类修改为

```
public Enum Items{ 
 MILK("milk",1),     
 HARDDISK("harddisk",2),
 MEDICINE("medicine",3),  
 TOY("toy",4)  
 SOAP("soap",5),  
 PILLOW("pillow",6), 

 private String name;
 private sortValue;

Items(double name, double sortValue) {
    this.name= name;
    this.sortValue= sortValue;
} 
} 
```

使用比较器，根据排序值进行排序

```
Collections.sort(list,new Comparator<Fruit>() {

        public int compare(Items item1, Items item2) {
                   return item1.sortValue - item2.sortValue;

}); 
```

与 JB Nizet 相比，它的一个优势是它不依赖于您在 Enum 类中声明值的顺序

# javascript - Chrome 扩展如何将我的内容脚本注入所有 Facebook 页面

> ID：14913797
> 
> 赞同：1
> 
> 时间：2013-02-16T18:45:22.860
> 
> 标签：javascript, google-chrome-extension

我的清单如下所示：

```
{
  "manifest_version": 2,

  "name": "Facebook Extension",
  "version": "1.0",

  "browser_action": {
    "default_icon": "images/fbh.png",
    "default_popup": "fbh-popup.html"
  },

  "permissions": [
    "storage",
    "background",
    "tabs",
    "http://www.facebook.com/*",
    "https://www.facebook.com/*"
  ],

  "content_scripts": [
    {
      "matches": [
        "http://www.facebook.com/*", 
        "https://www.facebook.com/*"
      ],
      "js": ["js/jquery-1.9.1.min.js", "js/fbh-main.js"],
      "css": ["css/fbh-main.css"],
      "run_at": "document_end"
    }
  ],

  "background":{
    "persistent": true,
    "scripts": ["js/jquery-1.9.1.min.js","js/fbh-background.js"]
  }
} 
```

每次进入 Facebook 中的新页面时，我都想注入我的内容脚本。例如，如果我单击用户的个人资料，我想注入内容脚本。

在我的背景页面中，我有以下监听器：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo) {
    console.log(changeInfo);
    if (changeInfo.status === 'complete') {
        chrome.tabs.executeScript(null, {file: "js/fbh-main.js"});
    }
}); 
```

然而，这有几个问题。首先，此函数尝试将我的内容脚本注入所有页面。我需要能够读取清单权限。其次，如果我从 www.facebook.com 开始，内容脚本会做它应该做的事情。但是，如果从那里单击“foo”的配置文件并转到 www.facebook.com/foo，则会注入内容脚本（如 console.log 消息所证明的那样），但它没有做它应该做的事情. 我认为它被注入得太早了，因为如果我直接导​​航到 www.facebook.com/foo，内容脚本就会被加载并执行它的工作。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:05:04.080

试试这个代码

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo,tab) {
    console.log(changeInfo);
    if ((tab.url.indexOf("http://www.facebook.com/") !=-1 || tab.url.indexOf("https://www.facebook.com/") !=-1) && changeInfo.status === 'complete') {
        chrome.tabs.executeScript(tabId, {file: "js/fbh-main.js"});
    }
}); 
```

*   `chrome.tabs.executeScript(null,`将在当前窗口的活动选项卡中执行脚本，这可能会随着用户交互而改变，`chrome.tabs.executeScript(tabId`将始终确保脚本注入目标选项卡。
*   **`chrome.tabs.onUpdated.addListener`**将为每个选项卡触发，添加过滤器**`tab.url.indexOf("https://www.facebook.com/")`**以确保将脚本注入到 Facebook 页面中。

如果问题仍然存在，请分享您的清单、内容脚本和相关文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:51:27.627

If your script is executed to soon, you can always use the `$.(your code here);` of jQuery

EDIT : For auto upadate issue, you can simply add a listener in the content script

```
document.addEventListener("DOMSubtreeModified", function(event){
    //something on the page has changed
}); 
```

# java - Java中的递归下降解析器

> ID：14913804
> 
> 赞同：5
> 
> 时间：2013-02-16T18:46:08.697
> 
> 标签：java, parsing, recursion

我想先说这是我第三年编程语言课的家庭作业，我正在寻求一些帮助。我的作业内容如下：

> 截止日期：2013 年 2 月 22 日晚上 11:55
> 提交：请将以下内容上传到 CMS。
> 
> 1\. 源代码
> 2\. 程序执行的屏幕截图，包括您使用的输入文件
> 
> 使用您喜欢的任何编程语言编写递归下降解析器，解析由以下 EBNF 描述生成的语言。您的解析器应该检测输入程序是否有任何语法错误。它不必指定错误的内容和位置。

```
<program>   begin <stmt_list> end
<stmt_list>  <stmt> {;<stmt_list>}
<stmt>    <assign_stmt> | <while_stmt>
<assign_stmt>  <var> = <expr>
<var>  identifier  (An identifier is a string that begins with a letter followed by 0     or more letters and digits)
<expr>  <var> { (+|-) <var>}           
<while_stmt>   while (<logic_expr>)  <stmt>
<logic_expr> ® <var> (< | >) <var>  (Assume that logic expressions have only less than     or greater than operators) 
```

看起来很有趣的符号只是指向右边的箭头。

我现在的问题比编程更合乎逻辑：在我的第一次尝试中，我读入了整个输入程序，将其保存为一个字符串，然后解析该字符串并将每个符号转换为终端、expr 或具有你。

我最终发现这种方式行不通，因为，A：我不认为它是 RDP，B：许多非终端是由超过 1 个语句组成的。

我放弃了这种方法，并决定在我浪费更多时间编程之前，我会把所有东西都伪掉。我的新想法是为每个非终端符号创建 1 个方法，然后逐个符号解析输入字符串，希望在这些方法之间。这种方法似乎是合乎逻辑的，但是当我开始编写伪代码时，我对我需要做什么感到非常迷茫和困惑。 **我将如何完成这段代码？**

以下是 RDP 的一些伪代码：

```
intputString;

public void parseProgram (Symbol.typeIsProgram) {
    if getNextSymbol == "begin" {
        if (intputString.substring (inputString.length()-3,
                inputString.length()) == "end") {
            Symbol stmt_lsit = new Symbol (intputString)
            parseStmt_list(stmt_list);              
        } else {
            Out "error, prog must end with end"
        }
    } else {
        Out "error, prog must begin with begin"
    }   
}

public void parseStmt_list (Stmbol.typeIsStmt_list) {
    symbol = getNextSymbol;
    if (Symbol.typeIsVar) {
        parseVar(symbol)
    } else if (Symbol.typeIsWhile)  {
        // weve only capture if the first word return is a while, we dont have the whole while statement yet
        ParseWhile_stmt(symbol)
    } else { }
}

public void parseStmt () { }
public void parseAssign_stmt () { }
public void parseVar () { }
public void parseExpr () { }
public void parseWhile_stmt () { }
public void parseLogic_expr () { }

public Symbol getNextSymbol() {
    //returns the next symbol in input string and removes it from the input string
} 
```

仅供参考，我的解析器的示例输入程序将是。

```
begin 
total = var1 + var2; 
while (var1 < var2) 
while ( var3 > var4)
var2 = var2 - var1 
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T19:30:25.780

根据这个特定的任务，可以以函数方式使用字符串处理。

试试这个算法：

1.  检查，该行`begin`以`end`
2.  如果是 - 拆分剩余字符串`;`并为每个部分执行以下步骤（语句）
3.  检查语句是否包含一个`=`或`while`子字符串
4.  `+`对于分配检查，您可以使用or拆分输入，`-`并为每个部分检查变量条件（字母数字内容）
5.  for while - 检查`(`并`)`递归处理括号之间和之后的两个字符串
6.  `<`最后，对于由子字符串or分割的逻辑表达式`>`，并检查部分是否为变量（字母数字）

也许，这不是非常灵活的解决方案，但我认为它可以满足您的任务。

**编辑：**

我发现这个任务很有趣，并尝试编写一个完整的解决方案。

```
public enum Parser {
PROGRAM {
    void parse(String s) throws ParseException {
        s = s.trim();
        if (s.startsWith("begin") && s.endsWith("end")) {
            STATEMENT_LIST.parse(s.substring(5, s.length() - 3));
        } else {
            throw new ParseException("Illegal begin/end");
        }
    }
},

STATEMENT_LIST {
    void parse(String s) throws ParseException {
        String[] parts = s.trim().split(";");
        for (String part : parts) {
            STATEMENT.parse(part.trim());
        }
    }
},

STATEMENT {
    void parse(String s) throws ParseException {
        if (s.startsWith("while")) {
            WHILE.parse(s.substring(5));
        } else if (s.contains("=")) {
            ASSIGNMENT.parse(s);
        } else {
            throw new ParseException("Illegal statement: " + s);
        }
    }
},

WHILE {
    void parse(String s) throws ParseException {
        int i = s.indexOf("(");
        int j = s.indexOf(")");
        if (i != -1 && j != -1) {
            LOGICAL.parse(s.substring(i + 1, j).trim());
            STATEMENT.parse(s.substring(j + 1).trim());
        } else {
            throw new ParseException("Illegal while: " + s);
        }
    }
},

ASSIGNMENT {
    void parse(String s) throws ParseException {
        int i = s.indexOf("=");
        if (i != -1) {
            VARIABLE.parse(s.substring(0, i).trim());
            EXPRESSION.parse(s.substring(i + 1).trim());
        }
    }
},

EXPRESSION {
    void parse(String s) throws ParseException {
        String[] parts = s.split("\\+|-");
        for (String part : parts) {
            VARIABLE.parse(part.trim());
        }
    }
},

LOGICAL {
    void parse(String s) throws ParseException {
        int i;
        if (s.contains("<")) {
            i = s.indexOf("<");
        } else if (s.contains(">")) {
            i = s.indexOf(">");
        } else {
            throw new ParseException("Illegal logical: " + s);
        }

        VARIABLE.parse(s.substring(0, i).trim());
        VARIABLE.parse(s.substring(i + 1).trim());
    }
},

VARIABLE {
    void parse(String s) throws ParseException {
        if (!s.matches("^[a-zA-Z][a-zA-Z0-9]*$")) {
            throw new ParseException("Illegal variable: " + s);
        }
    }
};

abstract void parse(String s) throws ParseException;

public static void main(String[] args) {
    try {
        PROGRAM.parse("begin \n" +
                "total = var1 + var2; \n" +
                "while (var1 < var2) \n" +
                "while ( var3 > var4)\n" +
                "var2 = var2 - var1 \n" +
                "end");
        System.out.println("OK");
    } catch (ParseException e) {
        System.out.println(e.getMessage());
    }
}
}

class ParseException extends Exception {
public ParseException(String message) {
    super(message);
}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T19:22:24.160

1) 代币化

首先将输入分解为令牌。在这种情况下，每个标识符和运算符和文字。列出所有输入标记的大列表。一旦你有了令牌，你就可以开始解析了。将标记设为链表，因此您可以只说 Token.Next 来读取下一个标记，或者说 Token.Next.Next 来读取前面的 2 个标记。最后放一堆 EOF 令牌，这样你就永远不会跳过它。

2) 解析

解析就像你已经拥有的一样。因此，不要考虑 Symbol 而是考虑 Token。Parse Statements 列表是一个 while 循环，它会一直解析语句直到结束。

解析语句

```
public void parseStmt ()
{
  if (Token.kind == KEYWORD && Token.id == kw_while) {
    return ParseWhileStatement();
  }
  else {
    return ParseAssignStatement();
  }
} 
```

解析while语句将循环回解析语句，因此它将“递归下降”回Parse语句，产生嵌套的while循环等......

解析赋值语句非常相似。解析左侧，然后解析右侧。为此，您需要一堆功能....

这里的 Node 是一个 Ast 节点。抽象语法树。

之类的...

```
class Node {

}
class OpNode {
  OpNode Lhs;
  OpNode Rhs;
}
class MultiplyNode : OpNode {
  MultiplyNode(byref Token tok, OpNode Left, OpNode right) {
    tok = tok.Next;
    Lhs = left;
    Rhs = right;
  }
}

Node ParseSimpleExp() {
  if (Token.kind == Identifier) {
    Node n = new IdentNode;
    NextToken();
    return n;
  }
  if (Token.kind == Number) {
    Node n = new NumberNode;
    NextToken();
    return n;
  }
}

// In these examples move the token to next token when you create the new nodes
Node ParseMulExp() {
  Node n = ParseSimpleExp();
  while (1) {
    if (Token.Kind == Multiply) {
      n = new MultiplyNode(Token,n,ParseSimpleExp());
      continue;
    }
    if (Token.Kind == Divide) {
      n = new DivideNode(Token,n,ParseSimpleExp());
      continue;
    }
    return n;
 }
}

Node ParseAddExp() {
  Node n = ParseMulExp();
  while (1) {
    if (Token.Kind == Add) {
      n = new AddNode(Token,n,ParseMulExp());
      continue;
    }
    if (Token.Kind == Subtract) {
      n = new SubtractNode(Token,n,ParseMulExp());
      continue;
    }
    return n;
  }
}

Node ParseAssignStatement() {
  Node n = ParseAddExp();
  if (Token.kind == ASSIGN) {
    return new AssignStatement(Token,n,ParseAddExp());
  }
} 
```

如果您遵循逻辑，您可以看到如何通过递归到达每个目标来遵循优先规则。解析表达式并从分配开始不是循环。就像这里显示的一样。显然这很简单，但它显示了技术。

所以RDP是通过查看当前token然后跳转到某个函数来处理token引起的。自然这可以返回到相同的函数，因此是递归的。如果您查看 ParseSimpleExp 函数，那么您会发现这是处理带括号的表达式的好地方。parens 表达式将导致递归回到简单的 exp 并可能所有其他表达式，如 mul 和 add。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:17:47.377

解析器代码的结构应该类似于语言语法的结构。例如

```
 <program>  ::= begin <stmt_list> end 
```

会翻译成类似的东西

```
function parse_program() {
  parse_begin();
  repeat parse_stmt();
  parse_end();
} 
```

您可能不希望将令牌处理（扫描器）与结构解析（解析器）混淆。

我会使用异常处理而不是 if / else 结构来进行错误处理。您可能希望跟踪您在源（扫描仪）部分中的位置，以显示正确的错误消息。只需询问扫描仪的状态即可。

幸运的是，这项任务似乎不需要解决冲突，所以你的递归体面应该运作良好。有趣的部分是在解析

```
<while_stmt> ::= while (<logic_expr>)  <stmt> 
```

你最终会`parse_stmt()`递归调用。这就是递归下降解析的整个想法。

# c++ - 简单数组无法正常工作

> ID：14913806
> 
> 赞同：0
> 
> 时间：2013-02-16T18:46:16.007
> 
> 标签：c++, arrays, random

这应该模拟投掷 2 个 6 面骰子，将 +1 添加到熟悉结果的数组的元素上。例如：a[4] 保存有多少个 4 被掷出。出于某种原因，无论它滚动多少次，它都会为数组中的每个元素给我 1。即：（a[2] = 1，a[3] = 1，a[4] = 1 等）

```
#include <iostream>
#include <cmath>
#include <cstdlib>
#include <ctime>

using namespace std;

int throwDice()         // generates random number ranging 2-12
{
    int x = (rand() % 6) + 1;
    int p = (rand() % 6) + 1;
    return x + p;
}

int main()
{
    srand (time(NULL));
    int y;
    cout << "Roll dice how many times?" << endl;
    cin >> y;

    int a2[12];                   // initializes and declares elements a[2] - a[12] with value 0
    for (int i = 2; i <= 12; i++)
        a2[i] = 0;

    for (int i = 0; i <= y; i++)   // runs random number generator, adds +1 to that element
        {
        a2[throwDice()]++;
        }

    for (int i = 2; i <= 12; i++)   // prints how many results per element
    cout << i << " = " << throwDice[i] << endl;
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:47:39.660

```
cout << i << " = " << throwDice[i] << endl; 
```

应该

```
cout << i << " = " << a2[i] << endl; 
```

您应该在编译代码时始终使用`-Wall`它，这会立即向您表明有问题：

```
Compilation finished with warnings:
source.cpp: In function 'int main()':
source.cpp:33:38: warning: pointer to a function used in arithmetic 
                           [-Wpointer-arith] 
```

* * *

此外，数组索引从 0 开始，因此要能够访问`a2[12]`，它的大小必须至少为 13。

* * *

最后，`system("pause");`是一个有问题的想法。我宁愿`cin.get();`等待用户按任意键。

# selenium - Selenium google Chrome c# 无法打开 https 页面

> ID：14913807
> 
> 赞同：2
> 
> 时间：2013-02-16T18:46:15.187
> 
> 标签：selenium, selenium-chromedriver

尝试将 selenium 定向到 https 页面并且没有发生任何事情，chrome 浏览器不会定向到 url，如果我提供 http url 它可以工作。

对这个问题有任何帮助吗？：

这是我的代码：

```
 IWebDriver driver = new ChromeDriver("C://Users//boaz//Desktop//ChromeDriver");
 driver.Navigate().GoToUrl(url); 
```

当 url beeing 我的 https url 时，浏览器停留在它所在的页面中并且不会重定向到 url

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:44:14.680

您是否尝试过[此问题](https://stackoverflow.com/questions/6774235/chromedriver-in-selenium-and-ssl-certificate)中提供的答案？我认为这是 HTTPS 和证书的浏览器安全问题，因此忽略这些错误可能会解决问题（或在测试机器上提供证书）。由于我也听说过用户配置文件（我自己被迫在 IE =[ 中进行测试），因此许多人对 Firefox 有这个问题。

# android - Android - 在整个应用程序中保持屏幕亮度

> ID：14913808
> 
> 赞同：1
> 
> 时间：2013-02-16T18:46:19.427
> 
> 标签：android, android-windowmanager, screen-brightness

我目前在我的应用程序中有一个按钮可以更改屏幕亮度，但是当我离开该活动时，它会将屏幕亮度重置为正常。我希望它在整个应用程序中设置亮度，但在我关闭应用程序时恢复正常。

这是我现在的代码：

```
public void lower(View view) {
    WindowManager.LayoutParams lp = getWindow().getAttributes();
    float brightness = (float) 0.01;
    lp.screenBrightness = brightness;
    getWindow().setAttributes(lp);  
}

public void raise(View view) {
    WindowManager.LayoutParams lp = getWindow().getAttributes();
    float brightness = (float) -1;
    lp.screenBrightness = brightness;
    getWindow().setAttributes(lp);
} 
```

我在想我也许可以对我的其他活动`getScreenBrightness`的方法做一种类型的方法`onCreate()`，但这不起作用。

谢谢你的时间。

# iphone - UINavigation Bar 位置错误

> ID：14913820
> 
> 赞同：0
> 
> 时间：2013-02-16T18:48:07.320
> 
> 标签：iphone, objective-c, uinavigationcontroller

我开始为 iPhone 5（4 英寸屏幕）设计一个应用程序，并决定稍后将其调整为 3,5 英寸屏幕，但我遇到了一个非常奇怪的问题......

UINavigationBar 放置正确（4 英寸）：

[http://s7.directupload.net/file/d/3168/yrwzr498_png.htm](http://s7.directupload.net/file/d/3168/yrwzr498_png.htm)

UINavigationBar 放在底部（3.5 英寸）： [http ://s14.directupload.net/file/d/3168/6dmsf238_png.htm](http://s14.directupload.net/file/d/3168/6dmsf238_png.htm)

（顺便说一句，自动布局已关闭）

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:04:42.347

我想你自己已经暗示了答案：自动布局。没有更多信息，很难提供和回答......

但是，自动布局和/或 autoResizingMask 可以让您的视图和 UI 对象动态响应大小变化。如果您在 4" 屏幕和 3.5" 屏幕之间遇到布局问题，您可能需要使用自动布局。

# html - 在浏览器中测试媒体查询

> ID：14913824
> 
> 赞同：0
> 
> 时间：2013-02-16T18:48:16.180
> 
> 标签：html, css, mobile, responsive-design, media-queries

知道有人好的网站，我可以在哪里在不同的移动视口上测试我的网站？

Chrome“开发人员工具”不会给我带来我想要的东西！

有没有像[http://quirktools.com/screenfly/](http://quirktools.com/screenfly/)这样的东西可以上传我的文件？

并且不必先在我的服务器上推送文件？

```
<a>Greetings from Bavaria and sorry for my englisch!</a> 
```

希望有人可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:51:25.813

[http://testsize.com/](http://testsize.com/)您可以根据需要输入自定义宽度和高度。

如果您没有虚拟主机，您可以在此处上传您的 html 页面。[http://pastehtml.com/](http://pastehtml.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:07:16.417

通过手动更改浏览器的宽度或高度，可以成功测试大多数 css 宽度和高度功能。我的意思是在浏览器窗口未最大化时按住它的边缘并将其向右、向左、向上或向下移动。

# php - Wordpress - 循环图像描述

> ID：14913826
> 
> 赞同：0
> 
> 时间：2013-02-16T18:48:29.520
> 
> 标签：php, wordpress

```
 function the_post_thumbnail_caption() {
  global $post;
  $thumbnail_id    = get_post_thumbnail_id($post->ID);
  $thumbnail_image = get_posts(array('p' => $thumbnail_id, 'post_type' => 'attachment'));

  if ($thumbnail_image && isset($thumbnail_image[0])) {
    echo '<p>'.$thumbnail_image[0]->post_content.'</p>';
  }
 } 
```

我在网上看到过这段代码。但它只显示已附加的第一个图像描述。我是 wordpress 的新手，但仍然遇到编码问题。我怎样才能把它放在一个循环中，以显示所有已附加的图像描述。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:39:41.667

尝试这个

```
<?php 
     function the_post_thumbnail_caption() {
        global $post;
        $childs = get_children(array('post_parent' => $post->ID));
        if($childs) {
         foreach($childs as $child) {
         echo '<p>'.$child->post_content.'</p>';
         }
        }
      }
?> 
```

# java - 使用 JGit 获取存储库的所有标签

> ID：14913829
> 
> 赞同：5
> 
> 时间：2013-02-16T18:48:39.217
> 
> 标签：java, tags, jgit

我想使用 JGit 获取存储库的所有标记以及标记器和提交 ID 的列表。

首先我尝试了`Git.tagList().call()`命令并解析标签：

```
objectIdOfTag = oneResultOfTheTagList.getObjectId(); 
// or should I call getPeeledObjectId() here?

RevWalk walk = new RevWalk(repository);
RevTag tag = walk.parseTag(objectIdOfTag); 
```

这适用于我的存储库，但我不确定这是否是正确的方法：调用是正确的`Ref.getObjectId()`还是应该调用`Ref.getPeeledObjectId()`？（什么是“*剥离*的ObjectId”？）

使用 JGit 检索标签列表时，轻量级和带注释的标签有区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T10:11:04.933

`getObjectId`在这里是正确的。对于带注释的标签，您想要获取带注释的标签对象的 ID，而不是标签最终指向的提交的 ID。另请参阅[Ref 的 Javadoc](http://download.eclipse.org/jgit/docs/latest/apidocs/org/eclipse/jgit/lib/Ref.html)。

要解析标签，您必须同时处理轻量级和带注释的情况：

```
RevObject object = walk.parseAny(objectIdOfTag);
if (object instanceof RevTag) {
    // annotated
} else if (object instanceof RevCommit) {
    // lightweight
} else {
    // invalid
} 
```

# mysql - 基于多行的复杂 SQL 选择

> ID：14913832
> 
> 赞同：-4
> 
> 时间：2013-02-16T18:48:57.250
> 
> 标签：mysql, sql

我有这张桌子：

```
id        item_id         attribute           quantity
1         1               a                   2
2         1               b                   3
3         1               c                   4
4         2               a                   3
5         2               b                   3
6         3               a                   2
7         3               b                   1 
```

我想获取所有不同的 item_id，其属性“a”的数量超过 1，同时属性“b”的数量超过 2。

如果我把

```
select item_id
from table_name
where (attribute = a and quantity > 1) and (attribute = b and quantity >2) 
```

我没有得到任何结果...

我如何做到这一点？请有人帮忙，这是我下周要交的一篇论文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:51:16.723

将 where 子句更改为：

```
WHERE (attribute = a and quantity > 1) OR (attribute = b and quantity >2) 
```

并且您选择：

```
SELECT DISTINCT item_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:03:01.583

编辑：解决了！经过一个小时的搜索，我发现了这个问题，它与我的基本相同，并且有一个有效的答案（第一个）。

[SQL - 为复杂的动态行选择查询](https://stackoverflow.com/questions/9376514/sql-select-query-for-complex-dynamic-rows)

基本上，这个人所做的就是根据需要多次将表连接到自身，添加下一个条件作为后续连接表的条件，名称不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:51:01.310

尝试这个

```
 select item_id
   from Table1
   where (attribute = 'a' and quantity > 1) or (attribute = 'b' and quantity >2)
   group by item_id 
```

[**SQL 演示在这里**](http://sqlfiddle.com/#!2/3d7cf/8)

# sass - 基础框架 - 轨道滑块

> ID：14913836
> 
> 赞同：2
> 
> 时间：2013-02-16T18:49:22.460
> 
> 标签：sass, zurb-foundation, orbit

我已经设法将 Orbit Slider 放到我的页面上，但它没有像[Foundation Framework 网站](http://foundation.zurb.com/docs/orbit.php)上给出的示例那样的计时器或导航按钮。

我使用 Sass 下载了框架，它在文档中说 Orbit JS 和 CSS 已经成为我环境的一部分。

我如何让这些显示？当我使用 Firebug 进行检查时，它们不会加载。

使用 Firebug 时，它显示以下内容：

```
.orbit-wrapper .slider-nav span.right {
    background: url("../images/foundation/orbit/right-arrow.png?1360951464") repeat scroll 0 0 / 100% auto transparent;
    right: 0;
} 
```

在`_orbit.scss`.

但据说无法加载图像。我不知道如何让图像加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:46:53.770

听起来您错过了解压缩要查找的资产所需的命令。由于您已经开始了您的项目，您只需要运行以下命令：

```
compass install foundation 
```

[http://foundation.zurb.com/docs/compass.php](http://foundation.zurb.com/docs/compass.php)

# android - 我无法让 LinearLayout 出现在滚动视图下方

> ID：14913837
> 
> 赞同：-1
> 
> 时间：2013-02-16T18:49:25.037
> 
> 标签：android

我希望按钮出现在滚动视图下，但它们不显示。我究竟做错了什么？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/tvLabel1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Task ID:"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tvTask_taskId"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="929333" />

            <TextView
                android:id="@+id/tvLabel2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Task Name:"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tvTask_taskName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="Test Task Name" />

            <TextView
                android:id="@+id/tvLabel3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Date:"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tvTask_taskDate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="15/01/2013" />

            <TextView
                android:id="@+id/tvLabel4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Status:"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tvTask_taskStatus"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="Active" />

            <TextView
                android:id="@+id/tvLabel5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Type:"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tvTask_taskType"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="Standard" />

            <TextView
                android:id="@+id/tvLabel6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Description:"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/tvTask_taskDescription"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here Long description goes here " />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/background_light"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnStart"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="0.33"
            android:text="Start" />

        <Button
            android:id="@+id/btnReject"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="0.33"
            android:text="Reject" />

        <Button
            android:id="@+id/btnFinish"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="0.33"
            android:text="Finish" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:53:52.713

您可能需要告诉他们一个“layout_weight”，以便您的孩子 ScrollView 和 LinearLayout 知道他们使用了多少空间。

尝试：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
...
 android:weightSum="2" />
    <ScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
    android:layout_weight="1" >
    ...
    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/background_light"
            android:orientation="horizontal"
            android:layout_weight="1" > 
```

...

# javascript - javascript：页面上两次相同的div id

> ID：14913844
> 
> 赞同：0
> 
> 时间：2013-02-16T18:50:33.727
> 
> 标签：javascript

我需要弄清楚是否可以对具有相同 ID 的两个相同元素执行相同的 javascript 操作。

我有一个在页面上出现两次的框，内容相同：

```
<div class="my_box" id="23"> Some bit 23 </div>

<div class="my_box" id="23"> Some bit 23 </div> 
```

然后我找到那个元素：（或那些？）

```
var my_box_find = document.getElementsByClassName('my_box'); 
```

并且经过一些处理/计算后想要替换 /both/ 框的 innerHTML：

```
document.getElementById(my_box_find[i].id).innerHTML = 'New bit 23'; 
```

这是一个极其简化的例子。但是当我尝试更改的元素只出现一次时，它会起作用。如果它出现两次，只有第一个实例会被改变......

*大声思考：*我想我可以在 ID 上附加一些随机数，以使每个框都具有伪唯一性……但这会不必要地进行两次计算……我希望它们同时更新信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:52:31.107

ID在页面中**必须**是唯一的。具有非唯一元素是[无效](http://www.w3.org/TR/1999/REC-html401-19991224/struct/global.html#adef-id)`id`的。

如果要对多个元素进行操作，请为每个元素分配一个类并循环选择结果。一个类可以被多次使用，一个元素可以被分配多个类。

```
var els = document.getElementsByClassName('my_box');
for (var i = 0; i < els.length; i++) els[i].innerHTML = 'New bit 23'; 
```

或者，使用 jQuery：

```
$('.my_box').html('New bit 23'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:00:14.780

*真正的*答案是您应该**使您的所有 ID 都是唯一的**。请改用该`data-id`属性（不必是唯一的）。你甚至可以用同样的方式处理它。

如果您*必须*有重复的 ID，即使我对此表示怀疑，但仍有可能。你让它变得更加困难，因为它`querySelectorAll`不适用于以数字开头的 ID 属性（即使它们在 HTML5 .. ACK 中有效）。无论如何，您都可以检查`.my_box`div 上的 ID 属性。

```
Array.prototype.forEach.call(document.querySelectorAll('.my_box'),
function (elem) {
    if (elem.id === '23') {
       elem.innerHTML = elem.innerHTML.replace('23', '24');
    }
}); 
```

[http://jsfiddle.net/ExplosionPIlls/39nk2/](http://jsfiddle.net/ExplosionPIlls/39nk2/)

# jquery - jQuery：检查禁用属性并添加/删除它？

> ID：14913845
> 
> 赞同：22
> 
> 时间：2013-02-16T18:50:35.800
> 
> 标签：jquery, forms, serialization, attributes

我选择这样一个表单的所有输入元素：

```
var fields = $( form + " :input" ).not( "button" ); 
```

如何检查这些输入中的任何一个是否`disabled`设置了属性并在存在时将其删除？

另外，我需要在删除它之后添加它（并序列化其间的字段），有没有一种优雅的方法？`toggle`除了属性之外的东西吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-16T18:54:30.280

假设您使用的是 jQuery 1.6 或更高版本，建议的方法是使用[.prop()](http://api.jquery.com/prop/)。

`fields.prop("disabled", false);`

如果你需要围绕每一个逻辑，你可以做一些事情到

```
var fields = $( form + " :input" ).not( "button" );
fields.each(function(index, element) {
    var isDisabled = $(element).is(':disabled');
    if (isDisabled) {
        $(element).prop('disabled', false);
    } else {
        // Handle input is not disabled
    }
}); 
```

[jsfiddle](http://jsfiddle.net/EBntG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T18:59:48.760

您可以使用`disabled`选择器

```
$('input:disabled').attr('disabled', ''); 
```

看[这里](http://api.jquery.com/disabled-selector/)

[http://jsfiddle.net/JngR9/](http://jsfiddle.net/JngR9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T18:58:53.860

使用[：禁用选择器](http://api.jquery.com/disabled-selector/)`试试这个

```
$('input:disabled').remove(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-10T16:14:30.753

去除

```
$('input:disabled').removeProp('disabled'); 
```

或者

```
$('input:disabled').prop('disabled', 'disabled'); 
```

添加

```
$('input:disabled').prop('disabled', 'disabled'); 
```

# javascript - 无法使用 mysql_fetch_array() 获得响应，期望参数 1 是资源

> ID：14913850
> 
> 赞同：-3
> 
> 时间：2013-02-16T18:51:09.703
> 
> 标签：javascript

我有这个**错误：警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 149 行的 /home/xgamming/public_html/list.php 中给出**

这是我`list.php`在第 1 行文件中的代码。149

```
 while($row = mysql_fetch_array($result))    {
        echo "<tr>

        <td>{$count}</td>
        <td><font \color=\"blue\">{$row['ip']}:{$row['port']}</b></font></td>
        <td> {$row['drops']}</td>
        <td>{$row['last']}</td>
        <td><a href=\"http://www.gametracker.com/server_info/{$row['ip']}:{$row['port']}/\" target=\"_blank\"><img src=\"http://cache.www.gametracker.com/server_info/{$row['ip']}:{$row['port']}/b_350_20_FFFFFF_FFFFFF_000000_000000.png\" border=\"0\" width=\"300\" height=\"20\" alt=\"\"/></a></td>

        </tr>";

       $count++;

     }

     echo "</table></font>";
 ?>

 </div> 
```

我有一个 MySQL 数据库，空的，没有表。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:58:00.803

如果查询失败，则`mysql_query`返回布尔值，而不是结果集指针。

当你直接将结果集传递给任何`mysql_fetch_*`操作时，你会得到这个错误。

每当发生查询失败时，您都需要自己优雅地处理查询失败。

```
$result = mysql_query($someQuery);
if(!$result) {
    echo "An error occurred!";
    //Any more handling.
}
else {
    //Normal query processing.
} 
```

或者，您可以使用`Exceptions`.

**作为旁注，请不要使用`MySQL`它，因为它现在已被弃用。使用`MySQLi`或`PDO`。**

# android - 无法创建 2.3.3 Intel Atom AVD（未找到 userdata.img）

> ID：14913852
> 
> 赞同：21
> 
> 时间：2013-02-16T18:51:24.553
> 
> 标签：android, eclipse

我已阅读所有相关问题，但没有任何解决方案对我有用（[“无法找到 ABI armeabi 的 userdata.img 文件......”](https://stackoverflow.com/questions/9086630/unable-to-find-a-userdata-img-file-for-abi-armeabi)）

我可以毫无问题地在 4.2.2 下创建/运行 Intel Atom AVD。

但是当我选择 2.3.3 作为目标时，我得到以下控制台错误：

```
[2013-02-16 20:44:04 - SDK Manager] Unable to find a 'userdata.img' file for ABI x86 to copy into the AVD folder. 
```

我尝试卸载/重新安装英特尔映像但没有成功。

我正在使用 Android 开发者工具构建：v21.1.0-569685

![在此处输入图像描述](../Images/86f27b08df8f7a912ac9bb3fdfaa9175.png)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-18T06:06:09.797

我搜索了这个问题的答案，在空手而归后，我研究了通过管理器添加/删除 SDK 级别时正在安装/删除的文件。

这对我有用。这是一个带有 android-10 x86 系统图像文件夹位置的错误。我通过与其他像 android-17 一样工作的版本进行比较来发现它。

我从文件夹中复制了文件

> <sdk>/system-images/android-10/ **x86/images/x86**

到正确的文件夹

> <sdk>/system-images/android-10/ **x86**

我没有尝试删除任何现有文件，我只是将文件合并到现有文件中。

（顺便说一句，这是在 Mac 上）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T11:27:11.787

*图像的修订版 1 需要此解决方法，从修订版 2**开始不再需要**。请参阅下面的拉尔夫的回答。*

显然，android-10 的 x86 系统映像（从 Android SDK 管理器下载）将一些文件安装在错误的位置。

`<sdk root>/system-images/android-10/x86/`您可以通过创建指向所有文件的符号链接来使其工作`<sdk root>/system-images/android-10/x86/images/x86/`。

这应该适用于任何 Unix 系统（在 Linux 上测试）：

```
cd $ANDROID_HOME/system-images/android-10/x86/
for F in `ls images/x86/`; do ln -s images/x86/$F; done 
```

其中`$ANDROID_HOME`指向您的 SDK 安装。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-29T21:31:46.380

注意到此处列出的问题后，我们修复了 SDK 存储库中的系统映像。如果您打开 SDK 管理器并安装适用于 API 10 的英特尔 x86 系统映像的修订版 2，它现在应该可以正常工作，而无需四处移动文件。尽管存在打包问题，但系统映像是相同的。模拟器会显示“Android 2.3.7”（Android 2.3.3 和 2.3.7 都是 API 10。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T20:44:56.537

手动安装 Atom x86 系统映像。[您可以在此处](http://software.intel.com/en-us/articles/alternate-method-installing-the-intel-atom-android-x86-emulator-image-manually)找到正确的图像和详细的安装说明，但首先从 Android SDK 管理器中删除旧的 x86 图像。它对我有用。

# java - 长时间的尝试语句

> ID：14913854
> 
> 赞同：4
> 
> 时间：2013-02-16T18:51:34.957
> 
> 标签：java, exception, variables, try-catch

将函数的大部分代码放在`try statement`. 如果我做一些需要 a 的事情`try statement`，我通常最终会在 try 语句中为该函数做很多工作，因为我通常在那里声明我的变量，并且如果我这样做，就不能在该范围之外使用它们。这是否普遍并被接受？人们是否通常在没有初始化变量之前声明变量，所以他们没有在 a 中做所有事情（包括对其他函数的调用）`try statement`？或者如果它很长也没关系？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:56:24.503

一个方法应该做一件事并且做好。在这种情况下，您的方法正在做两件事：业务逻辑和错误处理：

```
public Foo bar() {
    try {
        //business logic that may throw
        //...
        //end even more
    } catch(BuzzException e) {
        //Error handling
    }
} 
```

很多时候，我发现自己将`try`块的内容提取到一个单独的方法中，而没有错误处理：

```
public Foo bar() {
    try {
        return unsafeBar();
    } catch(BuzzException e) {
        //Error handling
    }
}

public Foo unsafeBar() throws BuzzException {
    //business logic that may throw
    //...
    //end even more
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T18:56:42.263

如果它很长，这很重要，但不是你想的那样。这很重要，因为它使您的代码难以阅读和测试。您最好将其重构为几种方法：

```
public void doComplexThing() {
    try {
        SomeObject o1 = doSomethingLessComplex();
        SomeOtherObject o2 = doSomethingElse(o1);
        doFinalThing(o2);
    }
    catch (SomeException e) {
        // handle the exception
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T19:13:19.583

如果一个`try`块变得有点长，最好隔离实际上将异常抛出到它们自己的方法中的调用。这样，您就可以单独解决该块中可能引发的几种异常。

如果您试图测试或发现一个“神秘”的错误，那么`try`用一个普通的旧代码覆盖许多异常会在以后引起头痛。`catch(Exception ex)`更不用说诸如适当的资源/流处理之类的事情了，这是许多检查异常的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T05:39:39.933

作为一名高级程序员，我理解完美地使用 try catch 而不是抛出异常的语句与代码整洁之间的混淆。

在这里我会倾向于`try catch over the statements that need it`。

首先让我们了解一下 try catch 的必要性。我们捕获异常，因为我们想在此时此地处理它。如果我们不把它扔给调用者。我们扔掉它是为了以后不会忘记处理它。从来没有，`Oh!, let me finish this method and then I will worry about the exception handling later`。在编写代码时执行此操作，想一想，您是否需要打印错误并返回 null，或者您是否需要用户知道有些事情搞砸了？您想将所有连接问题合并到`recycle the connection`一条消息中吗？如果是，则抛出您自己的自定义异常。但一定要处理好。忽略和做不好的异常处理是项目维护成本增加和客户烧心的根本原因。这就是好产品和马虎产品的区别。

As for code neatness, I have found that comments in catch blocks make it all worth your while. Yes, there will be someone senior to you who will not understand the importance of catching the exact statement, and will catch `catch (Exception e)` directly. Pathetic, I would say. But you should stick to your ethics when you code. Do it right and do it ONCE.

# python - 如何从 ArgumentParser 对象中获取可用标志？

> ID：14913855
> 
> 赞同：0
> 
> 时间：2013-02-16T18:51:46.847
> 
> 标签：python, command-line-arguments, argparse

我正在`argparse`为这个 python 项目使用该模块。我希望`ArgumentParser`在调用`parse_args()`. 有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:29:22.850

从 add_argument() 的源代码中得到这个：

```
>>> import argparse
>>> parser = argparse.ArgumentParser()
>>> parser.add_argument('-v', '--verbosity', help='more debug info', action='store_true')
_StoreTrueAction(option_strings=['-v', '--verbosity'], dest='verbosity', nargs=0, const=True, default=False, type=None, choices=None, help='more debug info', metavar=None)
>>> parser._option_string_actions.keys()
['-v', '-h', '--verbosity', '--help']
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:52:35.597

前几天我试图解决这个问题，但除了@vvoody 所做的事情之外，我从未得到令人满意的答案。

```
In [117]: map(lambda x : x.dest,parser._actions)
Out[117]: ['help', 'verbosity'] 
```

好处是它删除了所有别名`-v`==`--verbosity`等。 **但是**，如果您更改`dest`为，`--verbosity` 例如`dest='loud'` ，它会返回`loud`，这可能是也可能不是问题。

`argsparse`开箱即用似乎是一件显而易见的事情。

# php - if($a) 和 if($a==1) 有什么区别？

> ID：14913858
> 
> 赞同：0
> 
> 时间：2013-02-16T18:51:52.720
> 
> 标签：php

```
 function foo($a)
    { 
      if($a) {return "a";}
      else if($a==2) {return "b";}
      else {return "c";}
     }

     -----------------------------------------

     function foo2($a)
     {
       if($a==1){return "a";}
       if($a==2){return "b";}
       if($a==3){return "c";}

     } 
```

当我传递任何数字 frim 1,2 或 3 时？它将返回 1。当我在函数 foo2 中传递值时，它将返回值作为传递的值。

但是为什么会出现差异呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T18:55:04.720

当您执行类似的操作时`if ($a)`，请考虑 PHP 是一种[弱类型语言](http://php.net/manual/en/language.types.type-juggling.php)。要了解计算的内容`if ($a)`，请参阅[布尔值的转换规则](http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)。

引用手册：

> 转换为布尔值时，会考虑以下值`FALSE`：
> 
> *   布尔值`FALSE`本身
> *   整数`0`（零）
> *   浮点数`0.0`（零）
> *   空字符串和字符串`"0"`
> *   一个元素为零的数组
> *   具有零成员变量的对象（仅限 PHP 4）
> *   特殊类型`NULL`（包括未设置的变量）
> *   `SimpleXML`从空标签创建的对象

所有其他都被考虑`TRUE`在内，包括`-1`（了不起的！）。

另一方面，当您这样做时`if ($somevar == 1)`， then`$somevar == 1`已经是 a `boolean`，并且转换规则不适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:57:47.073

`if($a)` **任何**非零值都是`true`。

`if($a==1)` **只有**1 个值是`true`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T18:55:36.427

如果`$a`是`true`，它*不会*返回`1`，*这*就是区别。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-16T18:55:08.370

`if($a)`意思与：“如果 a 为真，则执行此操作”相同

在 PHP（和大多数其他语言）中，值 0 表示假，任何其他值都是“真”

# symfony - Twig 的转储函数返回一个空白屏幕

> ID：14913859
> 
> 赞同：8
> 
> 时间：2013-02-16T18:51:52.710
> 
> 标签：symfony, twig

我在 Symfony2 中使用 Twig 的[转储功能。](http://twig.sensiolabs.org/doc/functions/dump.html)我已经按照 Symfony[的说明](http://symfony.com/doc/2.0/book/templating.html#debugging)配置了它。

我有一个`page`变量和一个`orders`数组。`dump`适用于页面，但不适用于订单。当我在订单上调用它时，我得到一个白屏 - 没有 php 错误或任何东西。我不知道如何调试它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-27T13:40:11.323

## 一点解释

在这种情况下，白色（空白）屏幕表示 PHP 致命错误：允许的内存大小已用尽。在我的调查中，我发现twig 在我安装 VarDumper 组件时**使用了该`var_dump`功能。**

我认为它可以在未安装 VarDumper 组件的情况下工作，但是`dump()`symfony 的 VarDumper 组件文档中涵盖的 twig 的功能就像一个复杂的解决方案，这很奇怪。

因此，**使用 VarDumper 的`dump()`函数而不是 native`var_dump()`可以解决内存问题**（因为 VarDumper 将结果转储收集限制在足够的数量）。VarDumper 还`dump()`提供了更方便的结果 - 您可以单击树叶以显示/隐藏其内容。

## 你具体需要做什么

*   如果未安装，[请安装 VarDumper 组件](http://symfony.com/doc/current/components/var_dumper/introduction.html)
*   转到文件：`vendor/twig/twig/lib/Twig/Extension/Debug.php`
*   查找`twig_var_dump`功能
*   替换所有`var_dump()`呼叫`dump()`
*   删除/评论`ob_start() + ob_get_clean()`构造（如果您使用它是需要的，`var_dump()`因为它会立即回显数据，但`dump()`行为更智能）

或者

使用以下方法复制 + 替换整个函数：

```
function twig_var_dump(Twig_Environment $env, $context)
{
    if (!$env->isDebug()) {
        return;
    }

    $count = func_num_args();
    if (2 === $count) {
        $vars = array();
        foreach ($context as $key => $value) {
            if (!$value instanceof Twig_Template) {
                $vars[$key] = $value;
            }
        }

        dump($vars);
    } else {
        for ($i = 2; $i < $count; $i++) {
            dump(func_get_arg($i));
        }
    }

} 
```

PS：问题是在2013年提出的，但我希望它有所帮助，因为我现在遇到了这个问题。

我的背景：

```
"symfony/symfony": "2.5.*"
"symfony/var-dumper": "~2.6" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:24:23.400

我有同样的问题，将 memory_limit 增加到 1Gb 并没有帮助。就我而言，我想打电话给

```
 {{ dump() }} 
```

没有参数（在当前模板的上下文中查看所有可用的变量。在我的情况下，以下帮助：[https](https://stackoverflow.com/a/11500141/2166261) ://stackoverflow.com/a/11500141/2166261 ，尽管 memory_limit 问题仍然存在）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:52:37.833

您很可能正在达到 PHP 内存限制。尝试在 php.ini 中增加它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-10T19:57:41.367

这个问题可能没有单一的答案，因为一系列的事情都可能导致它。正如其他人所建议的那样，增加 PHP 的内存限制可能会有所帮助。在我的情况下，这并没有帮助，但是，我能够通过安装 xdebug 来解决这个问题。

到目前为止，解决此问题的清单似乎如下所示：

1.  确保安装了最新版本的 xdebug
2.  如果这不能解决问题，请尝试增加 PHP 内存限制

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-09T12:03:18.577

Arkemlar 的答案很好用。

但

之后，在我的情况下，twig dump() 在使用 phpunit 的功能测试中导致了 RuntimeException。

# php - PHP - 从 JSON 中的字符串中删除 HTML 属性

> ID：14913860
> 
> 赞同：0
> 
> 时间：2013-02-16T18:51:52.740
> 
> 标签：php, json, attributes, replace

我有一个来自 embed.ly 的 JSON 响应，我在我的 PHP 脚本中得到这样的响应：

```
// jSON URL which should be requested
    $json_url = 'http://api.embed.ly/1/oembed?key=hidden&url='.$_POST['url'];

    // Initializing curl
    $ch = curl_init( $json_url );

    // Configuring curl options
    $options = array(
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_HTTPHEADER => array('Content-type: application/json') ,
    );

    // Setting curl options
    curl_setopt_array( $ch, $options );

    // Getting results
    $result =  curl_exec($ch); // Getting jSON result string 
```

我的问题是我希望 embed.ly 的响应嵌入到我的响应式布局中，但视频的 embed.ly-responses 包含带有 & 高度属性：

```
{"provider_url": "http://www.youtube.com/", "description": "Markus Eisenrings Stromboli electric car on swiss television broadcast. See www.stromboli.ch for more information.", "title": "Stromboli Electric Car", "url": "http://www.youtube.com/watch?v=TJCZnpHuFS8", "author_name": "hangflug", "height": 360, "thumbnail_width": 480, "width": 640, "html": "<iframe width=\"640\" height=\"360\" src=\"http://www.youtube.com/embed/TJCZnpHuFS8?feature=oembed\" frameborder=\"0\" allowfullscreen></iframe>", "author_url": "http://www.youtube.com/user/hangflug", "version": "1.0", "provider_name": "YouTube", "thumbnail_url": "http://i1.ytimg.com/vi/TJCZnpHuFS8/hqdefault.jpg", "type": "video", "thumbnail_height": 360} 
```

我尝试从该 JSON 字符串中删除所有宽度和高度属性，如下所示：

```
$result = json_encode(preg_replace('/\<(.*?)(width="(.*?)")(.*?)(height="(.*?)")(.*?)\>/i', '<$1$4$7>', json_decode($result))); 
```

但是，这给了我一个 PHP 错误。

```
Catchable fatal error:  Object of class stdClass could not be converted to string in /Applications/XAMPP/xamppfiles/htdocs/projectname/ajax.php on line 22 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:09:37.347

你不能这样做：

```
$arr = json_decode($result, true); 
unset($arr["height"], $arr["width"]);
$result = json_encode($arr); 
```

更新：对于您的具体示例：

```
$arr = json_decode($result, true);
unset($arr["height"], $arr["width"]);
$arr_temp = explode(' ', $arr["html"]);
foreach ($arr_temp as $i => $val) {
    if ((substr($val, 0, 7) != "height=") && (substr($val, 0, 6) != "width="))
        $arr_html[] = $val;
}
$arr["html"] = implode(' ', $arr_html);
$json_result = json_encode($arr); 
```

[PHP沙箱](http://sandbox.onlinephpfunctions.com/code/641e857da016ca3915bcefea480b59f401693044)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:34:40.583

终于让它在这里与帮助表格一起工作，如下所示：

```
$arr = json_decode($result, true);
foreach ($arr as $key => & $val) {
    if($key=='html'){
        $html = preg_replace('/\<(.*?)(width="(.*?)")(.*?)(height="(.*?)")(.*?)\>/i','<$1$4$7>', $arr['html']);
        $arr[$key] = $html;
    }

}
$result = json_encode($arr); 
```

# xamarin.ios - 按钮单击时出现 NSInvalidArgumentException 错误 - xamarin

> ID：14913862
> 
> 赞同：8
> 
> 时间：2013-02-16T18:52:01.047
> 
> 标签：xamarin.ios, xamarin

我一直在关注 xamarin 网站上提供的“ [Hello, iPhone ”教程。](http://docs.xamarin.com/guides/ios/getting_started/hello,_world)我现在已经完成了所有的步骤。现在，我运行应用程序并单击“操作 1”按钮我收到此错误

抛出 Objective-C 异常。名称：NSInvalidArgumentException 原因：-[HelloWorld_iPhoneViewController actionButtonClick:]：无法识别的选择器发送到实例 0xb3a5a30 ![在此处输入图像描述](../Images/eca09164d6ae508de83904628d7077a1.png) 我该如何解决这个问题？我正在使用最新版本的 MonoDevelop + MonoTouch

```
static void Main (string[] args)
    {
        // if you want to use a different Application Delegate class from "AppDelegate"
        // you can specify it here.
        UIApplication.Main (args, null, "AppDelegate"); <-- HERE
    } 
```

我的代码上传到[这里](http://www.2shared.com/file/FjwbriYd/HelloWorld_iPhone.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T22:14:24.623

如果您查看按钮的连接（在 Xcode 中），您会看到您已向按钮添加了 2 个操作 - 一个称为 actionButtonClick，另一个称为 actnButtonClick。

在控制器中，MonoTouch 似乎只为第二个动作添加了一个部分方法，这不是崩溃的那个。

我删除了名为 actionButtonClick 的操作（离开 actnButtonClick）并运行了运行良好的示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-18T16:47:44.703

In the "Xamarin Cross-platform Application Development" book by Jonathan Peppers I ran into the same "very newby" problem with his "Hello Phone" example.

This is what I did to fix it.

First, I switched into Xamarin Studio, clicked on the MainStoryboard.storyboard file or tab (to show the phone layout), clicked on the "button" within the layout, to display its "Properties" in the lower right window.

Then I selected "Events" within the "Properties" window (from the buttons showing "Widget", "Layout", "Events".

Lastly, under the item called "Up Inside" there was a small "x" available to delete the event handler that was listed there -- which I recall was named button_TouchUpInside (or something like that).

The example code (page 25 of the book) is adding an event handler for the button, so this other handler is an extra (unwritten?) one, and removing reference to it made the example work fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T08:23:55.300

只需使用源代码编辑器打开故事板文件，然后删除您不想在按钮下列出的任何连接。

```
<button ...>
  .
  .
  .

   <connections>
         <!-- remove any connections here that you don't want -->             
   </connections>

</button> 
```

# assembly - 8086 程序集 - 如何添加总和大于一个字节的 2 个字节

> ID：14913867
> 
> 赞同：2
> 
> 时间：2013-02-16T18:53:04.217
> 
> 标签：assembly, x86, x86-16

好的，所以问题很简单。如果我有 2 个随机字节，比如 150 (a[0]) 和 215(b[0])，我想添加它们。显然它们的总和不适合一个字节，所以如果我添加它们，我会溢出。我已经尝试将其中一个字节存储在 al 中并执行 cbw，以便我将仅在单词 ax 上表示相同的数量，并将第二个字节添加到其中，但有些东西我无法理解，因为它不起作用。这是一个示例代码：

```
data segment
  a db 150,182,211
  b db 215,214,236
data ends

code segment
start:
  mov ax,data
  mov ds,ax

  lea si,a          ; these 2 shouldn't be here since i realised eventually that
                    ; i could use
  lea di,b          ; a constant for memory addressing and not necessarily a
                    ; a register
  mov ax,0000
  mov bl,a[0]
  mov al,b[0]
  cbw
  adc bx,ax      ; so this didn't work out well

  mov ax,0000
  mov al,a[0] 
  cbw            ; convert one of the bytes into a word
  mov cx,ax      ; and save it in cx
  mov al,b[0]    
  cbw            ; also convert the other byte into the word ax
  add ax,cx      ; add the two words
                 ; and that also failed 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T19:07:17.960

比如说，您需要添加两个字节，每个字节的值都在 0 到 255 之间。

您需要添加这些字节并在添加后保存进位标志的值，这将是和的第 9 位。

你可以这样做：

```
mov al, byte1
mov ah, 0 ; ax = byte1
add al, byte2
adc ah, 0 ; ax = byte1 + byte2 
```

请注意，我在将 8 位值扩展到 16 位时使用`mov ah, 0`而不是。如果你的字节应该代表负值和正值，IOW，如果它在 -128 到 127 而不是 0 到 255 的范围内，则有效。你说你有 150 (0x96) 和 215 (0xD7) ，因此它们必须用作无符号或非负值。如果你还是申请它们，你会得到：-106 (0xFF96) 和 -41 (0xFFD7)。这几乎不是你原来的数字，对吧？`cbw``cbw``cbw`

# c++ - 将文件读入内存，遍历数据，然后写入文件

> ID：14913870
> 
> 赞同：1
> 
> 时间：2013-02-16T18:53:26.800
> 
> 标签：c++, file, memory

我试图向这篇文章提出类似的问题： [C: read binary file to memory, alter buffer, write buffer to file](https://stackoverflow.com/questions/5134404/c-read-binary-file-to-memory-alter-buffer-write-buffer-to-file) 但答案对我没有帮助（我是 C++ 新手，所以我无法理解所有其中）

如何循环访问内存中的数据，并逐行遍历，以便我可以将其写入不同格式的文件？

这就是我所拥有的：

```
#include <fstream>
#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <stdlib.h>

using namespace std;

int main()
{
    char* buffer;
    char linearray[250];
    int lineposition;
    double filesize;
    string linedata;
    string a;

    //obtain the file
    FILE *inputfile;
    inputfile = fopen("S050508-v3.txt", "r");

    //find the filesize
    fseek(inputfile, 0, SEEK_END);
    filesize = ftell(inputfile);
    rewind(inputfile);

    //load the file into memory
    buffer = (char*) malloc (sizeof(char)*filesize);      //allocate mem
    fread (buffer,filesize,1,inputfile);         //read the file to the memory
    fclose(inputfile);

    //Check to see if file is correct in Memory
    cout.write(buffer,filesize);

    free(buffer);
} 
```

我很感激任何帮助！

**编辑（有关数据的更多信息）：**

我的数据是不同的文件，大小在 5 到 10GB 之间。大约有3亿行数据。每条线看起来像

M359

T359 3520 359

M400

A3592 zng 392

其中第一个元素是字符，其余项可以是数字或字符。我正在尝试将其读入内存，因为逐行循环比读取一行、处理然后写入要快得多。我在 64 位 linux 上编译。让我知道是否需要进一步澄清。再次谢谢你。

**编辑 2** 我正在使用 switch 语句来处理每一行，其中每行的第一个字符决定了如何格式化该行的其余部分。例如“M”表示毫秒，我将接下来的三个数字放入一个结构中。每行都有一个不同的第一个字符，我需要做一些不同的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:07:30.723

所以请原谅潜在的明显明显，但如果你想逐行处理这个，那么......

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char *argv[])
{
    // read lines one at a time
    ifstream inf("S050508-v3.txt");
    string line;
    while (getline(inf, line))
    {
        // ... process line ...
    }
    inf.close();

    return 0;
} 
```

只需填写while循环的主体？也许我没有看到*真正的*问题（有点像树木的森林）。

**编辑**

OP 与使用自定义 streambuf 内联，这可能不一定是世界上最便携的东西，但他更感兴趣的是避免在输入和输出文件之间来回翻转。有了足够的 RAM，这应该可以解决问题。

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <memory>
using namespace std;

struct membuf : public std::streambuf
{
    membuf(size_t len)
        : streambuf()
        , len(len)
        , src(new char[ len ] )
    { 
        setg(src.get(), src.get(), src.get() + len);
    }

    // direct buffer access for file load.
    char * get() { return src.get(); };
    size_t size() const { return len; };

private:
    std::unique_ptr<char> src;
    size_t len;
};

int main(int argc, char *argv[])
{
    // open file in binary, retrieve length-by-end-seek
    ifstream inf(argv[1], ios::in|ios::binary);
    inf.seekg(0,inf.end);
    size_t len = inf.tellg();
    inf.seekg(0, inf.beg);

    // allocate a steam buffer with an internal block
    //  large enough to hold the entire file.
    membuf mb(len+1);

    // use our membuf buffer for our file read-op.
    inf.read(mb.get(), len);
    mb.get()[len] = 0;

    // use iss for your nefarious purposes
    std::istream iss(&mb);
    std::string s;
    while (iss >> s)
        cout << s << endl;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:07:56.820

如果我必须这样做，我可能会使用这样的代码：

```
std::ifstream in("S050508-v3.txt");

std::istringstream buffer;

buffer << in.rdbuf();

std::string data = buffer.str();

if (check_for_good_data(data))
    std::cout << data; 
```

这假设您确实需要一次在内存中输入文件的全部内容来确定是否应该将其复制到输出。如果（例如）您可以一次查看一个字节的数据，并确定是否应该复制该字节而不查看其他字节，您可以执行更多类似的操作：

```
std::ifstream in(...);

std::copy_if(std::istreambuf_iterator<char>(in),
             std::istreambuf_iterator<char>(),
             std::ostream_iterator<char>(std::cout, ""),
             is_good_char); 
```

... where`is_good_char`是一个函数，它返回一个`bool`说法是否`char`应该包含在输出中。

编辑：您正在处理的文件的大小*主要*排除了我上面给出的第一种可能性。你也是正确的，读取和写入大量数据几乎肯定会提高一次处理一行的速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:18:27.820

您应该研究 fgets 和 scanf，您可以在其中提取匹配的数据片段，以便更容易操作，假设这是您想要做的。像这样的东西可能看起来像：

```
FILE *input = fopen("file.txt", "r");
FILE *output = fopen("out.txt","w");

int bufferSize = 64;
char buffer[bufferSize];

while(fgets(buffer,bufferSize,input) != EOF){
   char data[16];
   sscanf(buffer,"regex",data);
   //manipulate data
   fprintf(output,"%s",data);
}
fclose(output);
fclose(input); 
```

那将是更多的 C 方式来做到这一点，C++ 通过使用 istream 来更雄辩地处理事情： [http ://www.cplusplus.com/reference/istream/istream/](http://www.cplusplus.com/reference/istream/istream/)

# mysql - mysql左连接重复

> ID：14913871
> 
> 赞同：-1
> 
> 时间：2013-02-16T18:53:33.307
> 
> 标签：mysql, sql

我一直在寻找几个小时，但找不到解决方案。它有点复杂，所以我将把它分解成一个非常简单的例子

我有两张桌子；人和汽车

人们：

```
name_id    firstname
  1          john
  2          tony
  3          peter
  4          henry 
```

汽车：

```
name_id   car_name
   1      vw gulf
   1      ferrari
   2      mustang
   4      toyota 
```

可以看出，它们是通过 name_id 链接的，john 有 2 辆汽车，tony 有 1 辆，peter 有 0 辆，henry 有 1 辆。

我只是想对谁拥有（1 辆或更多）汽车进行一次 mysql 搜索。所以anwser应该是john, tony, henry。

people 表是主表，我`LEFT JOIN`用来添加汽车。我的问题来自重复。事实上，我加入的表在主服务器中有 1 个 id 的 2 个条目。

我在玩`DISTINCT`，`GROUP BY`但我似乎无法让它工作。

任何帮助深表感谢。

编辑：添加查询：

```
$query = "
SELECT profiles.*, invoices.paid, COUNT(*) as num 
FROM profiles 
    LEFT JOIN invoices ON (profiles.id=invoices.profileid) 
WHERE (profiles.id LIKE '%$id%') 
GROUP BY invoices.profileid
"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:02:23.517

尝试这个
`select distinct p.name_id, firstname from people p, cars c where p.name_id = c.name_id`

或使用连接
`select distinct p.name_id, firstname from people p inner join cars c on p.name_id = c.name_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:56:23.557

```
SELECT DISTINCT firstname 
FROM people 
    JOIN cars ON cars.name_id = people.name_id; 
```

如果这不起作用，您可能必须向我们展示完整的问题。

提出它的方式不需要左连接，因为您每人至少需要一辆车。左连接隐含地是一个外连接，旨在返回连接表中具有 0 个对应记录的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:06:50.993

如果您只想显示有车的人，那么您应该使用`RIGHT JOIN`. 如果汽车表中没有匹配项，这将停止返回左表（人员）中的任何结果。

按人名分组以删除重复项。

```
SELECT firstname
FROM people P
RIGHT JOIN cars C ON C.name_id = P.name_id
GROUP BY firstname 
```

# android - 打开原始文本资源并显示错误的下一行

> ID：14913873
> 
> 赞同：0
> 
> 时间：2013-02-16T18:53:50.633
> 
> 标签：android, text

```
InputStream inputStream = getResources().openRawResource(idtext);
ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
String myText = "";
int in;
try {
    in = inputStream.read();
    while (in != -1) {
        byteArrayOutputStream.write(in);
        in = inputStream.read();
    }
    inputStream.close();
    myText = byteArrayOutputStream.toString();
} catch (IOException e) {
    e.printStackTrace();
}
myTextView.setText(myText); ` 
```

我的代码用于在原始 res 中显示长文本文件。我不知道为什么，但是下一行的一些文本文件显示错误，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:05:28.540

如果您可以与您的预期输出共享一些示例显示，那就太好了。

从最初的猜测来看，这可能是由于以下几个原因：

1.  文本文件中使用的编码。因此，如果您已经用 ASCII 编写文本并在使用 UTF-8 字符串时显示它，它会搞砸一些事情。这应该是一致的。

2.  可能是换行符如何在文件中编码的一个很好的例子，比如`\r\n`或只是`\n`.

3.  您还可以尝试封装您的`InputStream`to`FileReader`和 line reading 流，这些流更专门用于直接读取字符串，而不是转换它。

4.  您可能可以使用[Apache Commons IO](http://commons.apache.org/io/)之类的库来为您管理所有内容。

# scala - 如何将 Seq[Option[A]] 转换为 Seq[A]？

> ID：14913875
> 
> 赞同：1
> 
> 时间：2013-02-16T18:53:53.727
> 
> 标签：scala

我想过滤选项类型`Seq`，`Some`并提取内容。

是否有一个函数调用来执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T19:04:40.893

```
val list = optionList.flatMap(_.toList) 
```

正如 sschaef 在评论中指出的那样，您可以使用`flatten`：

```
val list = optionList.flatten 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T12:23:49.283

```
optionList.collect { case Some(x) => x } 
```

# php - 链接到 Web 根目录之外的文档

> ID：14913878
> 
> 赞同：1
> 
> 时间：2013-02-16T18:54:15.267
> 
> 标签：php, .htaccess

我一直在寻找这个问题的答案几个小时，虽然上面有数百个帖子，但我找不到专门针对我的问题的答案......

我创建了一个站点，人们可以在其中下载条形码包的 zip 文件。最初，我使用 web 根目录中的客户/代码文件夹创建了该站点。我正在用这个创建zip文件：

```
$_SERVER['DOCUMENT_ROOT'].'/speedy/customers/codes/' 
```

哪个输出`'/var/www/html/speedy/customers/codes/'`

完成站点后，我的客户决定他不希望登录用户以外的任何人能够访问他们的文件。因此，我认为最简单的主要系统更改最少的方法是将客户/代码文件夹移到 Web 根目录之外。

所以我在 /var/www/customers/codes 中制作了文件

如何链接到 Web 根目录之外的这些文件？我已经尝试了一些东西，但没有任何效果。我试过这个...

```
'../../'.$_SERVER['DOCUMENT_ROOT'].'/customers/codes/'; 
```

...但它实际上呼应了“../”。

这是生成 zip 文件的代码部分。我需要链接到 /var/www/customers/codes

```
system('/usr/bin/zip -j ' . $_SERVER['DOCUMENT_ROOT'].'/speedy/customers/codes/'.$order_id.'.zip ' . escapeshellarg($_SERVER['DOCUMENT_ROOT'].'/speedy/certificates/'.$order_id.'-certificate.pdf')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:16:11.747

您可以按照文件系统上显示的路径编写路径。在你的情况下：

```
system('/usr/bin/zip -j ' . '/var/www/customers/codes/'.$order_id.'.zip ' . escapeshellarg($_SERVER['DOCUMENT_ROOT'].'/speedy/certificates/'.$order_id.'-certificate.pdf')); 
```

# jsf - Jsf bean 值设置为 null 而不是空字符串

> ID：14913879
> 
> 赞同：1
> 
> 时间：2013-02-16T18:54:18.530
> 
> 标签：jsf

我有一个 JSF 1.2 应用程序，我使用以下代码：

```
<h:selectOneMenu value="#{MyBean.countryType}">
        <f:selectItem itemLabel=" " itemValue=""/>
    <f:selectItems value="#{MyBean.allCounytryItems}" />
  </h:selectOneMenu> 
```

当用户单击提交时，bean 'countryType' 的属性设置为 null 而不是其空字符串 ("") 的默认值。

为了`<h:inputText id="username_label" value="#{MyBean.username}"/>`

属性用户名设置为空字符串，这是默认值。

selectOneMenu 的不同行为的任何输入？

# python - Python：如何区分套接字错误和超时？

> ID：14913880
> 
> 赞同：7
> 
> 时间：2013-02-16T18:54:23.097
> 
> 标签：python, sockets, exception

我有以下代码：

```
try:
    while 1:
        s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
        s.settimeout(5);
        s.connect((HOST,PORT))
        print("before send")
        #time.sleep(10);
        #s.sendall('GET / HTTP/1.1\r\nConnection: Keep-Alive\r\nHost: www.google.lt\r\n\r\n')
        data=s.recv(52)
        print("after send");
        s.close()
        if string.find(data,"HTTP/1.1 200 OK") == -1:
            print("Lost Connection")
        print(data)
        time.sleep(2)
except KeyboardInterrupt:
    print("CTRL C occured")
except socket.error:
    print("socket error occured: ")
except socket.timeout:
    print("timeout error") 
```

我已经注释了 sendall 函数来测试 recv 如何生成超时异常。但问题是我得到了 socket.error 异常。如果我将最后几行代码更改为：

```
except socket.timeout:
    print("timeout error")
except socket.error:
     print("socket error occured: ") 
```

然后我得到 socket.timeout 异常。那么真正产生了什么异常呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-16T18:56:17.257

`socket.timeout`是 的子类`socket.error`。真的是`socket.timeout`。当你抓住`socket.error`第一个时，你会抓住一个更普遍的情况。

```
>>> issubclass(socket.timeout, socket.error)
True 
```

这段代码是正确的：

```
except socket.timeout:
 print("timeout error")
except socket.error:
 print("socket error occured: ") 
```

试着抓一下`socket.timeout`，然后是其他`socket.error`的。

# java - 我们如何逆时针旋转俄罗斯方块？

> ID：14913882
> 
> 赞同：0
> 
> 时间：2013-02-16T18:54:31.260
> 
> 标签：java, matrix, rotation

我在这里查看了顺时针旋转的算法，但我不能反过来做。所以基本上，对于顺时针旋转，你需要将转置乘以一个旋转矩阵，但是你如何做同样的事情呢？

这是我的代码：

```
public class rotation2 {

    public static int [][] multiplyMatrix(int [][] m1) {
        int [][] m2 = {{0,0,0,1},
                       {0,0,1,0},
                       {0,1,0,0},
                       {1,0,0,0}};
        int[][] result = new int[4][4];

        // multiply
        for (int i=0; i<4; i++)
            for (int j=0; j<4; j++)
                for (int k=0; k<4; k++)
                    result[i][j] += m1[i][k] * m2[k][j];

        return result;
    }

    public static int [][] multiplyMatrix2(int [][] m2) {
        int [][] m1 = {{0,0,0,1},
                       {0,0,1,0},
                       {0,-1,0,0},
                       {-1,0,0,0}};
        int[][] result = new int[4][4];

        // multiply
        for (int i=0; i<4; i++)
            for (int j=0; j<4; j++)
                for (int k=0; k<4; k++)
                    result[i][j] += m1[i][k] * m2[k][j];

        return result;
    }

    public static void printArray(int [][] array) {
        for(int row = 0; row < array.length; row++) {
            for(int col = 0; col < array[row].length; col++) {
                if (array[row][col] > 0) {
                    System.out.printf("1");
                } else {
                    System.out.printf("0");
                }
            }
            System.out.printf("\n");
        }
    }

    public static int [][] transpose(int [][] m1) {
        int m = 4;
        int n = 4;
        int c = 0;
        int d = 0;

        int[][] transpose = new int [n][m];

        for ( c = 0 ; c < m ; c++ ) {
            for ( d = 0 ; d < n ; d++ ) {
                transpose[d][c] = m1[c][d];
            }
        }
        return transpose;
    }

    public static void main(String[] args) {
        int [][] m1 = {{1,0,0,0},
                       {1,0,0,0},
                       {1,1,0,0},
                       {0,0,0,0}};

        int [][] transpose = transpose(m1);
        printArray(transpose);
        transpose = multiplyMatrix(transpose);
        printArray(transpose);

        int [][] transpose2 = transpose(m1);
        printArray(transpose2);
        transpose2 = multiplyMatrix(transpose2);
        printArray(transpose2);
    }
} 
```

您不会为计数器时钟旋转转调，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:31:17.953

您要做的是（1）转置矩阵，（2）分别反转行（顺时针）或列（逆时针）。

您可以只使用双循环为单个单元格设置新值，同时执行这两个步骤。在代码中，这可能如下所示：

```
public static int[][] rotate(int[][] m, boolean left) {
    int rows = m.length, cols = m[0].length;
    int[][] m2 = new int[cols][rows]; // swap rows and cols
    for (int r = 0; r < rows; r++)
        for (int c = 0; c < cols; c++)
            if (left) // rotate left
                m2[c][r] = m[r][cols - c - 1];
            else      // rotate right
                m2[c][r] = m[rows - r - 1][c];
    return m2;
} 
```

有关更多信息和替代方法，请查看[此相关问题](https://stackoverflow.com/questions/42519/how-do-you-rotate-a-two-dimensional-array)的答案。

# html - CSS某些部分不刷新

> ID：14913889
> 
> 赞同：1
> 
> 时间：2013-02-16T18:55:12.570
> 
> 标签：html, css, jsf-2, refresh

这是我的CSS：

```
 @CHARSET "UTF-8";

.commandLinks {
    margin: 5px;
    padding: 5px 5px 5px 20px; /* 20px makes room for your background image */
    /*border: 1px solid #aaa; */

}

.commandLinks .create {
    margin-right: 10px;
    color: red;
}

.commandLinks .vote {
    color: blue;
}

.commandLinks .link {
    color: orange;
    font-weight: bold;
    font-size: 16;
}

.button {
    margin-right: 10;
    margin-left: 5;
} 
```

我尝试了不同的方法，刷新浏览器 CTRL - F5，重新启动 eclipse 等。但是 font-size: 16; 或者

```
margin-right: 10;
        margin-left: 5; 
```

无论如何都不会出现。例如，当我添加 font-weight: bold; 它看起来没有问题。

我的jsf代码：

```
 <div id="links" class="commandLinks" >
    <h:link styleClass="link" outcome="Answers">answers</h:link>
</div> 
```

我做错了什么或如何刷​​新 css ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:08:08.307

使用 16px 而不是 16。从技术上讲，字体大小（没有 px）的范围是 1 到 7。因此 16 是无效的。[类似的问题](https://stackoverflow.com/questions/819079/how-to-convert-font-size-10-to-px)

# objective-c - 公共静态最终变量的等价物

> ID：14913894
> 
> 赞同：7
> 
> 时间：2013-02-16T18:55:47.743
> 
> 标签：objective-c, syntax, extern, variable-declaration

我知道将这个词放在`extern`头文件中的变量声明之前声明了全局静态变量的存在而不初始化它。我也明白，如果我导入包含`extern`变量的文件，我可以在没有类/文件名的情况下引用它们。但是在哪里定义它们和它们的价值呢？

我想做的是创建一个带有全局常量的常量类，我想在整个 iOS 应用程序的代码中使用它。

是否将它们放在这样的界面中？

**例子.h**

```
#import <Foundation/Foundation.h>
@interface Constraints : NSObject
{

extern   NSString * const PREFS_NAME;

} 
```

还是像这样放在界面之外

**例子.h**

```
#import <Foundation/Foundation.h>

extern   NSString * const PREFS_NAME;    

@interface Constraints : NSObject
{

} 
```

然后在实现 .m 文件中如何初始化外部值？

在这样的实施区域内？

**例子.m**

```
#import "Constraints.h"

@implementation Constraints

/**PRefecences name for the application**/
const  NSString * PREFS_NAME = @"MyApp_Prefs";

@end 
```

或者像这样在实现区域之外初始化它们：

**例子.m**

```
#import "Constraints.h"

/**PRefecences name for the application**/
const  NSString * PREFS_NAME = @"MyApp_Prefs";

@implementation Constraints

@end 
```

还是我在构造函数中为它们提供初始值？或一些任意的静态样式方法，`+`前面有，即`+(void) setAppConstraints`；

我尝试了几种组合，但总是遇到错误，例如“使用不同类型重新定义'xVariable'”。或者关于“外部没有初始化接口”的东西（或者类似的东西，我忘记了）。所以我想知道如何正确地声明和初始化它们以形成与`public static final`Java 中的变量相同的角色。

还有什么是`extern`命令的限制？我知道我可以`extern`使用`NSInteger`or `NSString`，但那又如何`NSArray`呢？

`extern`我问这个问题是因为关于在 Objective-C中使用的信息似乎有很多误导性或不完整的信息。许多答案似乎是推测性的。我希望这个问题不仅对我来说是一个很好的资源，而且可以限制关于`extern`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T19:53:11.823

您在声明它的文件中定义它的值，在您的情况下是 Example.m；您仍然可以重新分配此变量，因此 Example.h 中的声明如下所示：

```
extern  NSString * PREFS_NAME; 
```

这样每个导入 Example.h 的文件都可以访问这个变量。Objective-C 中 public static final 的等价物是 const。如果您还希望它是公共的，您应该将其设为类实例变量，但在这种情况下您不需要它，因为它已经可以在任何地方访问。所以在这种情况下，它将是：

```
// .m file
NSString* const PREFS_NAME = @"MyApp_Prefs";
// .h file
extern NSString* const PREFS_NAME; 
```

另请注意，const NSString* 与 NSString* const 不同。后者是一个指向 NSString 的 const 指针。前者没有意义，即使它是正确的语法。在 Objective-C 中， const 限定符不影响对象，而是有可变和不可变类。这在 C++ 中是有意义的，这意味着您可以在实例上只使用 const 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T19:17:09.797

`extern`用于向编译器发出信号，表明您将使用在另一个编译单元中定义的变量或函数。

当您说 时`extern const NSString *PREFS_NAME`，您是在说“将此编译单元中对 PREFS_NAME 的所有引用替换为在另一个文件中定义的变量 PREFS_NAME。” 因此，当您尝试在 .m 中分配 PREFS_NAME 时，您所做的只是尝试分配一个变量，尽管它有名称，但它并不存在。声明一个变量`extern`只是一个变量或函数的声明，而不是该变量或函数的*定义*。它让编译器知道该*名称*正在使用中，并且链接器将处理如何处理它，但即使您在此处提供了一个类型，它实际上并没有为变量留出空间，它期待在实际定义变量的编译单元中留出空间。

您一起编译三个或四个不同的源代码文件，其中三个可能声明：

`extern int buffer[];`

并且可以声明

`int buffer[BUFSIZE];`

在其全局范围内，链接器的工作是将三个声明的引用解析为`extern buffer`第四个缓冲区的实际定义。

`extern`对于 C 变量和函数，就像`@class`对于 Objective-C 类一样，它是一个前向声明，是对编译器的一个承诺，当你在这里看到一个未定义的名称时，你不必惊慌失措，因为链接器会回答任何挥之不去的东西您可能有的问题。

# php - jQuery 中的跨域 URL

> ID：14913901
> 
> 赞同：0
> 
> 时间：2013-02-16T18:56:25.683
> 
> 标签：php, javascript, jquery, cross-domain, cross-domain-policy

我做了一个非常简单的 index.php 代码如下

```
<!DOCTYPE html> 
<head> 
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/httpGet.js"></script>
<script type="text/javascript" src="js/jquery.mobile.js"></script>   

</head> 

<body>
 <input id="string" type="text"/>
 <input id="button" type= "button" value="Check" />

</body>
</html> 
```

在这段 HTML 代码中，我们从用户那里得到一个号码并调用 httpgGet.js 文件。httpGet.js 是：

```
$('#button').click(function() {
        var string = $('#string').val();
    $.post('http://...../isprime.php',{number: string},function(data){
      alert(data);
            } 
     } 
```

我们将用户编号发送到 isprime.php 文件，它会检查用户编号是否为质数。当我说 $.post('php/isprime.php',.....) 它工作得很好，但是当我想从另一台计算机调用 isprime.php 时，它就不起作用了。

我的意思是 $.post('192.168.1.1/test/isprime.php'....) 给了我一个未找到的错误。

该文件存在，我可以使用来自浏览器的直接调用来运行代码。当我在浏览器中输入 192.168.1.1/test/isprime.php 时，该文件是可访问的，但是从 js 文件中，它失败了。显然，我也可以 ping 192.168.1.1。即使使用 FireBug，我也检查了代码并且没有彻底。

我进行了很多搜索，发现浏览器不允许跨域调用（我猜是出于安全目的），但我找不到解决这个问题的解决方案。YQL 有一些东西（这是一种查询语言，我不知道我是否可以使用它）。我也看到了一些关于 cULR 的东西，但我不确定它是否也有效。

请帮忙。我真的需要它。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:42:16.673

在我看来，最明显的解决方案是使用 cURL 库在没有跨域请求限制的服务器端发出请求（正如您所提到的，是的，它会起作用）。当然，您需要在服务器上安装 cURL 库。[PHP cURL 手册](http://php.net/manual/en/book.curl.php)应该有足够的信息来帮助您入门。

# flash - 如何使用 Adob e Scout (profiler) 比较优化是否更快

> ID：14913903
> 
> 赞同：0
> 
> 时间：2013-02-16T18:56:35.803
> 
> 标签：flash, optimization, adobe, profiling, adobe-scout

我使用[Adob​​e Scout](http://gaming.adobe.com/technologies/scout/)跟踪一两个瓶颈，我认为它是一个出色的分析器，尤其是与 Flash Builder 中内置的分析器相比。

我有一些我想优化的功能，但我宁愿避免使用 getTimer() 或类似的东西 - 我想在当前上下文中优化。考虑到环境是完全可重复的（即游戏状态可以运行到这样一个点，以至于每次后续游戏调用完全相同的函数），使用 Adob​​e Scout 比较不​​同优化的最佳方法是什么？有没有可能，或者我应该从一个完全不同的方向来完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T15:59:11.160

您可以在每次更改时多次运行代码，Scout 将记录每个会话。然后，您可以使用 ActionScript 采样器在比较函数中花费的时间的会话之间切换。如果您想要更准确的时间，您可以使用 Telemetry API 将自定义指标添加到您的函数中。（Telemetry.sendSpanMetric() - 请参阅[自定义遥测](http://www.adobe.com/devnet/scout/articles/adobe-scout-custom-telemetry.html)）。这将以精确的微秒精度记录您的函数时间，并在 Scout 中显示。

# haskell - 什么是具有“减法”但没有逆的结构？

> ID：14913904
> 
> 赞同：15
> 
> 时间：2013-02-16T18:56:36.597
> 
> 标签：haskell, abstract-algebra

一个群扩展了幺半群的想法以允许逆。这允许：

```
gremove :: (Group a) => a -> a -> a
gremove x y = x `mappend` (invert y) 
```

但是像自然数这样没有逆的结构呢？我在想：

```
class (Monoid a) => MRemove a where
    mremove :: a -> a -> a 
```

与法律：

```
x `mremove` x = mempty
x `mremove` mempty = x
(x `mappend` y) `mremove` y = x 
```

另外：

```
class (MRemove a) => Group a where
    invert :: a -> a
    invert x = mempty `mremove` x

-- | For defining MRemove in terms of Group
defaultMRemove :: (Group a) => a -> a -> a
defaultMRemove x y = x `mappend` (invert y) 
```

所以，我的问题是：什么是`MRemove`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T15:20:14.923

我能想到的最接近的常见结构是躯干，但它并不真正以明显的方式适用于自然。想想您可以对时间值执行的操作：

*   “减”两次，产生一个时间间隔（不同的类型）
*   将时间间隔添加到时间以获得另一个时间
*   添加或减去时间间隔以获得另一个间隔

对时间值对的其他操作很少有意义。你不能加时间，或者乘它们，或者我们在代数中习惯的任何东西。另一方面，区间类型更加灵活，支持加法、减法、反演等。因此，在 Haskell 中，torsor 可以定义为：

```
class Group (Diff a) => Torsor a where
  type Diff a
  subtract : a -> a -> Diff a
  add      : a -> Diff a -> a 
```

无论如何，这是尝试回答您的直接问题（您可以在 John Baez 的优秀[页面上](http://math.ucr.edu/home/baez/torsors.html)找到更多信息），即使它没有涵盖您的自然示例。

据我所知，唯一接近回答您的问题的另一件事是[Coq (semi)ring solver tactic](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.61.3041)中代码重用的解决方案。他们引入了一个“几乎环”的概念，其公理类似于您所描述的公理，以允许他们将大部分代码重用于自然环和完整环。不过，我不认为这个想法很普遍。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T04:59:37.623

您正在寻找的名称是*抵消幺半群*，但严格来说，*抵消半群*足以捕捉减法的概念。大约一年前，我在想同样的问题，我通过挖掘数学术语找到了答案。查看增量解析器包中的[CancellativeMonoid](http://hackage.haskell.org/packages/archive/incremental-parser/0.2.1/doc/html/Data-Monoid-Cancellative.html#t%3aCancellativeMonoid)类。我目前正在准备一个只包含 monoid 子类和它们的一些实例的新包，我希望尽快发布它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-26T16:34:54.487

一个类似的问题已经被问到[here](https://math.stackexchange.com/questions/2729623/is-there-a-name-for-an-algebraic-structure-with-only-addition-and-truncated-s)。给出的答案是[与 monus 的可交换幺半群](https://en.wikipedia.org/wiki/Monus)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-26T02:02:12.533

编辑：这个答案是错误的。请参阅下面的评论。我会保留答案以防万一。

看看[减法半群](https://dml.cz/bitstream/handle/10338.dmlcz/126093/MathBohem_120-1995-4_10.pdf)。它是一个带有减法运算符的半群，它遵循以下定律：

```
x - (y - x) = x
x - (x - y) = y - (y - x)
(x - y) - z = (x - z) - y

x <> (y - z) = (x <> y) - (x <> z)
(y - z) <> x = (y <> x) - (z <> x) 
```

可悲的是，我找不到讨论“减法幺半群”的资源，但我认为它需要遵守以下附加定律：

```
x - x = 0 
```

# php - 修改 WordPress Jetpack 插件以使用“类”而不是“ID”属性

> ID：14913905
> 
> 赞同：7
> 
> 时间：2013-02-16T18:56:36.537
> 
> 标签：php, javascript, wordpress, infinite-scroll, jetpack

**我想要达到的目标：**为同一页面上的多个列启用无缝和同时无限滚动，每个列都引入一组不同的内容，即一个列显示最新帖子，而另一列显示来自*特定的最新帖子标记*。

每列使用不同的循环，这样它们就不会相互混淆，这是我使用的代码（只是为了让您了解我是如何做到的）：

文件：index.php *（[代码也在 pastebin 上](http://pastebin.com/LVUuLy5C)）*

```
<?php
/**
 * The main template file.
 *
 * This is the most generic template file in a WordPress theme
 * and one of the two required files for a theme (the other being style.css).
 * It is used to display a page when nothing more specific matches a query.
 * E.g., it puts together the home page when no home.php file exists.
 * Learn more: http://codex.wordpress.org/Template_Hierarchy
 *
 * @package Twenty Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

        <div id="primary" class="content-area">
            <section id="content" class="site-content" role="main">
                <?php if ( have_posts() ) : ?>
                    <?php //twentytwelve_content_nav( 'nav-above' ); ?>
                    <?php /* Start the Loop */ ?>
                    <?php while ( have_posts() ) : the_post(); ?>
                        <article id="post-<?php the_ID(); ?>" <?php post_class('clearfix content-articles'); ?>>
                            <a class="archives-thumb-link" href="<?php the_permalink(); ?>" title="<?php echo esc_attr( sprintf( __( 'Permalink to %s', 'twentytwelve' ), the_title_attribute( 'echo=0' ) ) ); ?>" rel="bookmark"><?php the_post_thumbnail( 'archives-thumb' ); ?></a>

                            <div class="entry-text-wrapper">
                                <header class="entry-header">
                                    <h1 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php echo esc_attr( sprintf( __( 'Permalink to %s', 'twentytwelve' ), the_title_attribute( 'echo=0' ) ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h1>
                                </header><!-- .entry-header -->
                            </div>
                        </article><!-- #post-<?php the_ID(); ?> -->
                    <?php endwhile; ?>
                    <?php twentytwelve_content_nav( 'nav-below' ); ?>
                <?php else : ?>
                    <?php get_template_part( 'no-results', 'index' ); ?>
                <?php endif; ?>
            </section><!-- #content .site-content -->

            <section id="highlights-container" class="site-content">
                <?php $latest_highlights = new WP_Query('tag=highlights&showposts=20&paged=' . $paged); ?>
                <?php if ( $latest_highlights->have_posts() ) : ?>
                    <?php while ($latest_highlights->have_posts()) : $latest_highlights->the_post(); $the_highlights_counter++; ?>
                        <article id="highlights-<?php echo $the_highlights_counter; ?>" class="highlights-wrapper">
                            <a class="highlights-link" href="<?php the_permalink(); ?>" title="<?php echo esc_attr( sprintf( __( 'Permalink to %s', 'twentytwelve' ), the_title_attribute( 'echo=0' ) ) ); ?>" rel="bookmark">
                                <?php the_post_thumbnail( 'highlights-thumb' ); ?>
                                <h1 class="highlights-title"><?php the_title(); ?> <span>/ <?php echo the_time('M. n'); ?></span></h1>
                            </a>
                        </article>
                    <?php endwhile; ?>
                <?php else : ?>
                    <?php get_template_part( 'no-results', 'index' ); ?>
                <?php endif; ?>
            </section><!-- #content .site-content -->
        </div><!-- #primary .content-area -->

<?php get_footer(); ?> 
```

**我打算怎么做：** Jetpack 中的“无限滚动”模块只包含两个文件—— *[infinity.php](http://plugins.trac.wordpress.org/browser/jetpack/trunk/modules/infinite-scroll/infinity.php)*和*[infinity.js](http://plugins.trac.wordpress.org/browser/jetpack/trunk/modules/infinite-scroll/infinity.js)*，所以对于了解 JavaScript 和 PHP 的人来说，它会更容易研究一些。

现在问题是，[正如这里所说](http://jetpack.me/support/infinite-scroll/)，要启用无限滚动，我们需要首先为其提供*“无限滚动应向其添加附加帖子的 HTML 元素的 ID”。*而且由于它不接受多个 ID，因此无法在同一页面上的多个列上同时无限滚动。

**这个想法：**所以，也许如果我修改它以接受 a`class`而不是`id`属性，我可以在多个列上无限滚动工作。

**问题是**，我该怎么做？

* * *

在尽我最大努力自己解决问题（我不能）的同时，这里有一些我遇到的重要问题，我认为这会让你更容易提供帮助。

在`[infinity.php][5]`

*   `'container' => 'content'`表示这`content`是容器元素的默认 ID。

*   `'id' => self::get_settings()->container,`为要调用的 JavaScript定义`id`。

在`[infinity.js][6]`

*   `var id = $( this ).attr( 'id' ),`确保它是一个`id`属性而不是一个`class`.

因为，我不懂 JS 和足够的 PHP，我可能错过了许多其他重要的部分。只是认为这些信息会帮助那些试图提供帮助的人。

如果我不清楚，请告诉我。

***注意：**如果您在某处运行测试/开发 WordPress 站点，并希望提供帮助，请安装**[Slim Jetpack](http://wordpress.org/extend/plugins/slimjetpack/)**插件（不需要您连接到 WordPress.com的[Jetpack 插件](http://jetpack.me/)版本），并启用“ “Jetpack”菜单中的“无限滚动”模块。进一步的说明可以在[这里](http://jetpack.me/support/infinite-scroll/)找到。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T17:49:46.543

Jetpack[为循环运行部分模板（例如 content.php）](http://jetpack.me/support/infinite-scroll/)，通过 AJAX 检索 HTML 输出，然后将其“实时”附加到当前页面。它从不使用原始模板 (index.php)，因此您在那里编写了 2 个不同的循环并不重要。

您可以通过借用 Jetpack 的滚动检测和 AJAX 请求并调整其余部分来编写自己的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:46:43.643

您的服务器是否允许您在两个不同的端口上监听请求？当它们进入视野时过滤掉你不想要的对象？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T19:25:28.220

将滚动事件绑定到四个 Ajax 调用，使用不同的 id 怎么样。

除此之外，您可以尝试重写有人在[此处讨论的插件](https://wordpress.stackexchange.com/questions/84547/jetpack-infinite-scrolling-for-multiple-columns-on-same-page)

# javascript - HTML 和 VB.NET 网络浏览器

> ID：14913909
> 
> 赞同：0
> 
> 时间：2013-02-16T18:56:53.927
> 
> 标签：javascript, html, vb.net, browser

我对这个主题有一些疑问：

1.  如何单击没有可识别的 ID 或名称的按钮？

    例子：

    ```
    <input type="submit" value="Login" style="width:100%;"/> 
    ```

2.  这是一个有点菜鸟的问题，但我如何只在页面上加载基本的 html 对象，而不是图像，只是文本和按钮

3.  如何从网页加载 javascript？Webbrowser.Document.InvokeScript("script") - 对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:19:25.257

1个问题：使用其他属性找到那个按钮

2问题：您可以关注[WebBrowser Customization](http://msdn.microsoft.com/en-us/library/aa770041(v=vs.85).aspx)，特别是“控制下载和执行”部分：

> WebBrowser 控件让您可以控制它下载、显示和执行的内容。要获得这种控制，您需要实现主机的 IDispatch，以便它处理 DISPID_AMBIENT_DLCONTROL。当 WebBrowser 控件被实例化时，它将使用此 ID 调用您的 IDispatch::Invoke。使用按位 OR 运算符将 pvarResult 设置为以下标志的组合，以指示您的偏好。

*   DLCTL_DLIMAGES、DLCTL_VIDEOS 和 DLCTL_BGSOUNDS：如果设置了这些标志，将从服务器下载图像、视频和背景声音并显示或播放。如果未设置标志，它们将不会被下载和显示。

附加信息：[实现 IDispatch::Invoke 以由 WebBrowser 控件调用](https://stackoverflow.com/questions/7608550/implement-idispatchinvoke-to-be-called-by-a-webbrowser-control)

# java - Math.round() 方法的奇怪行为

> ID：14913912
> 
> 赞同：1
> 
> 时间：2013-02-16T18:57:01.710
> 
> 标签：java, math, jvm, rounding

[在Math](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)类的静态方法[round()](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)中，我注意到一件令我难以理解的事情：

```
Math.round(0.4999999999999999);  // is 0
Math.round(0.49999999999999999); // is 1 
```

为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T18:58:41.410

`0.49999999999999999`有效数字太多，一个`double`变量不能全部存储。所以隐式舍入发生在*编译*期间。当您调用`Math.round()`时，参数已经是 0.5（检查自己：`0.49999999999999999 == 0.5`yield `true`）。

# php - 在 PHP 中，记录应用程序性能日志的简单方法是什么？

> ID：14913915
> 
> 赞同：0
> 
> 时间：2013-02-16T18:57:18.177
> 
> 标签：php, performance, logging

我的应用程序在生产服务器上运行速度非常慢（我不控制 PHP/apache 来安装调试器/分析器），所以我想在我的项目中添加一个性能监控库，看看什么需要这么多时间来处理。

理想情况下，我想要一些我只是添加到我的项目中的东西，它开始记录所有函数调用和它们所花费的时间（但我不知道如果没有在 PHP 服务器上安装探查器，这是否可能）。

在最坏的情况下，我想要一个基准/性能日志库来轻松地执行以下操作：

```
benchmark_start("web service call");
benchmark_end(); // prints the time it took 
```

我完全知道这是一个简单的类，只需使用 microtime。我只是想知道是否有“更强大”的库可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:12:02.807

Symfony 1.x（现在被一个新的主要版本取代——在撰写本文时为 2.1）提供了一个调试工具栏，它创建了一个基于 JavaScript 的可点击小部件，列出了各种日志事件、数据库调用和 PHP 配置详细信息。

如果您不想切换到全新的框架，请尝试[PHP Debug](http://php-debug.com) - 它本质上是 1.x 的调试工具栏，移植到独立项目。我认为这些天来它对开发的影响不大，但它可能仍然值得一试。

# r - 操作 data.frames

> ID：14913918
> 
> 赞同：0
> 
> 时间：2013-02-16T18:57:35.757
> 
> 标签：r, dataframe

我有一份样本调查表；人口统计之类的东西。其中一列是`country (factor)`另一列`annual income`。现在，我需要计算*每个国家的平均值*并存储在新`data.frame`的`country`和相应的*平均值*中。它应该很简单，但我迷路了。数据类似于下图所示：

```
Country  Income($) Education ... ... ...
1\. USA    90000      Phd
2\. UK     94000      Undergrad
3\. USA    94000      Highschool
4\. UK     87000      Phd
5\. Russia 77000      Undergrad
6\. Norway 60000      Masters
7\. Korea  90000      Phd
8\. USA    110000     Masters
.
. 
```

我需要一个最终结果，例如：

```
USA   UK    Russia ...
98000 90000 75000 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:33:06.000

数据示例：

```
dat <- read.table(text="Country  Income Education 
 USA    90000      Phd
 UK     94000      Undergrad
 USA    94000      Highschool
 UK     87000      Phd
 Russia 77000      Undergrad
 Norway 60000      Masters
 Korea  90000      Phd
 USA    110000     Masters",header=TRUE) 
```

做你想做的事`plyr`：

如果您的数据被调用`dat`：

```
library(plyr)
newdf <- ddply(dat, .(Country), function(x) Countrymean = mean(x$Income))

# newdf <- ddply(dat, .(Country), function(x) data.frame(Income = mean(x$Income))) 
```

和聚合：

```
 newdf <- aggregate(Income ~ Country, data = dat, FUN = mean) 
```

对于您最后显示的输出可能`tapply`吗？

```
tapply(dat$Income, dat$Country, mean) 
```

# ios - 我可以序列化持有授权 Twitter 帐户的 ACAccount 对象吗？

> ID：14913922
> 
> 赞同：0
> 
> 时间：2013-02-16T18:57:51.457
> 
> 标签：ios, objective-c, twitter, acaccount

我已经实现了内置的 twitter API，一切运行良好，但是我正在尝试确定当用户设置了多个 twitter 帐户时，如何最好地在会话之间保留一个 twitter 帐户。

如果我只收到一个`ACAccount`using `-[ACAccountStore accountsWithAccountType:]`，这很容易......我只是使用那个。但是，如果有多个`ACAccounts`我不想每次进入应用程序时都询问他们要使用哪个。

到目前为止，我的看法是：

1.  使用序列化`ACAccount`对象`NSKeyedArchiver`（如果可能，这将是理想的）

2.  每次都给用户带来错误（不想这样做）

3.  仅存储所选 的用户名`ACAccount`，然后在下一个会话中比较 中每个帐户的用户名`ACAccountStore`，然后选择该帐户（尽管出于某种原因，这似乎是一种不雅的解决方法）。

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T06:24:57.853

`ACAccount`有一个属性[`identifier`](http://developer.apple.com/library/ios/documentation/Accounts/Reference/ACAccountClassRef/Reference/Reference.html#//apple_ref/occ/instp/ACAccount/identifier)，用于唯一标识单个帐户。该属性的类型是 an，`NSString`因此您可以使用`NSUserDefaults`or `NSCoding`（或您使用的任何其他持久性解决方案）轻松地保留其值。当您要检索属于此标识符的帐户时，只需使用方法[-[ACAccountStore accountWithIdentifier:]](http://developer.apple.com/library/ios/documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/ACAccountStore/accountWithIdentifier%3a)并将标识符作为参数传递。

# asp-classic - 如何隔离 IIS 线程池崩溃

> ID：14913923
> 
> 赞同：0
> 
> 时间：2013-02-16T18:57:54.377
> 
> 标签：asp-classic, iis-6, threadpool, windows-server-2003

这个问题与我最近问的一个[连接重置问题有关。](https://stackoverflow.com/questions/14885631/how-to-find-source-of-connection-reset-error)我也在追求这篇[SO 文章](https://stackoverflow.com/questions/476473/iis-6-0-application-pool-crash)和这篇[SO 文章中](http://blogs.msdn.com/b/david.wang/archive/2005/08/29/howto-understand-and-diagnose-an-apppool-crash.aspx)的信息。我想知道的是追踪 IIS 线程池崩溃原因的最佳方法。我也在与我们的供应商一起解决这个问题。这是详细信息。

我有一个 IIS 应用程序。它使用一个非常简单的 ASP 页面，以我们的供应商提供的样本为模型，当我们几年前购买我们的第一个 COM 工具包时。此应用程序在 Windows Server 2003 上的 IIS 上运行。该应用程序是一个单独的 Web 服务，而不是虚拟根，并且它的端口号与 80 不同。换句话说，我们没有使用另一个 NIC 或虚拟 IP 地址。该站点的流量很少，但被配置为具有 DMZ。整个配置对我来说看起来有点时髦。

地址验证请求从使用 http 协议的无浏览器应用程序发送到 IIS 应用程序。街道号、街道名称、城市和州与其他一些标识一起发送，并发送回响应。其中一个应用程序是用 C 编写的；另一个是用 Clojure 编写的。

向新构建的 IIS 应用程序发送“单次”请求在两个应用程序中都可以正常工作。发送大量请求，很难确定是超过 25 还是其他数字，导致 IIS 线程池崩溃。这或多或少是错误日志所说的。

这个应用程序在 W2K/IIS 服务器上运行多年，没有发生任何事故。ASP 页面通过我们从供应商处购买的 COM 工具包与地址验证引擎对话。我们不得不升级到新的服务器（和 2012 COM 工具包），只是因为最新的 COM 工具包不会安装在 W2K 上，而且新的 COM 工具包包含对新的 USPS 地址验证规定的支持。在没有新工具包的情况下，我们将验证更少的地址，而您对地址进行条形码并获得折扣的唯一方法是验证地址。（当您发出 29,000 份机动车消费税账单时，折扣会有所帮助。）

追查此问题的最佳方法是什么，以便我找到罪魁祸首？我正在寻找与答案一样多的优质信息的链接。很抱歉含糊其辞；我知道 SO 的规则，并努力提供尽可能多的细节。如果有人想查看这些，我可以重新编辑这篇文章并提供日志条目。底线是我的 Clojure 客户端（处理批处理请求）在 IIS 线程池崩溃时开始重置并崩溃。

结语：

我们认为 COM 对象的快速打开和关闭是问题所在，并且我们以这种方式编写 ASP 页面得到了我们的供应商的认可。为了解决这个问题以及我们还需要安装 MS Access 来获得额外的地址验证功能这一事实，我们最终编写了一个 ActiveState Perl 程序来解决多种需求。

首先，我们购买了一个 ActiveState 产品，它将我们的 Perl 程序作为服务运行。该服务将以允许发送基于 http 的请求的参数和端口号开始，就像以前一样。在这种情况下，COM 对象将在 Perl 程序启动时打开一次，并在 Perl 程序退出时关闭。

Perl 程序提供的其他功能与本文无关，但编写此 Perl 程序消除了对旧配置所需的 IIS 和 MS Access 的需要。

所以，如果你想从这篇文章中得到一些东西，它会在打开程序时打开一个 COM 对象并在程序关闭时关闭，至少对于 W2K Server 2003 及更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:18:34.420

我们在工作中遇到了应用程序缓慢的问题。我们做了一个应用程序池内存转储，然后分析了转储。

[http://support.microsoft.com/kb/919790](http://support.microsoft.com/kb/919790)

# design-patterns - 模块化 UI 和事件管理模式

> ID：14913924
> 
> 赞同：1
> 
> 时间：2013-02-16T18:57:59.920
> 
> 标签：design-patterns

在我的应用程序中，我为 UI 组件及其事件管理提供了不同的类。

虽然我最初的想法是为 Window 和 Frames 设置单独的类，然后一个 Window 将具有 Frames 的组合。

并且应该有一个条目用于创建和委派在窗口或框架/控制级别发生的事件。

但是，我无法就这种模式得出结论。

因此，目前以单独的事件处理程序结束，这些事件处理程序直接链接到它们各自的 UI 框架/控件。

请指导我为这个用例选择一个好的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:01:32.850

[EventAggregator](http://www.martinfowler.com/eaaDev/EventAggregator.html)模式应该是您的选择。它完全将您的模块彼此分离。通过这种方式，模块不需要知道（或引用）另一个模块。

[您可以在此处](https://stackoverflow.com/a/14775654/1313030)查看我关于同一主题的另一个（更详细）答案。

如果你不需要那么多松散耦合（例如模块之间有相互引用），你应该看看[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。这是实现分布式事件处理机制的另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:05:01.747

您正在寻找的是[`Command`](http://en.wikipedia.org/wiki/Command_pattern)模式。命令模式基本上允许您将请求/消息封装到一个完整的对象中，以便请求消息的对象不必知道最终将处理请求的对象。例如，您有可以发出事件的菜单项、按钮等，基本上当您编写这些元素时，您不知道谁将处理这些事件（我假设您正在开发一个处理事件的 UI 框架）。因此，您基本上将有关事件接收者的信息编码在一个名为的类中`Command`，它将引用实际的接收者。它还将有一个`execute`基本上将调用域特定代码的方法。您将拥有 Command 类的各种子类，它们将处理特定的请求`CopyCommand`，例如`PasteCommand`等。

```
abstract class Command {
  private Receiver receiver;
  public void setReceiver(Rceceiver receiver){
     this.receiver = receiver;
  }

  public Rceiver getReceiver(){
     return this.receiver;
   }

  abstract execute();
} 
```

基本上现在您可以使用api为单个`UI`组件设置命令。`setCommand`UI 组件将只委托给底层命令。

```
class Button {

private Command command; 

public void setCommand(Command command){
 this.command = command;
} 

 public void onClick(){
    command.execute();
  }
} 
```

有关更多详细信息，请查看 Gof Book 中的命令模式。

# sql - 子查询返回数字行

> ID：14913926
> 
> 赞同：0
> 
> 时间：2013-02-16T18:58:10.150
> 
> 标签：sql, count, sum

有两张桌子：银行和分行。

银行有：**bank_name** [red, blue, green,] **bank_ID** [1, 2 ,3]
分行：**bank_ID** [1, 1, 2, 3], **branch_name** [wright, james, will, phil]

我需要**返回带有更多分行的银行名称**，它是数字。

是否可以使用子查询来做到这一点？谢谢！

* * *

编辑答案：

**选择 ban.bank_name, COUNT(bra.branch_name)**

**FROM 分行文胸 NATURAL JOIN 银行禁令**

**按银行名称分组**

**HAVING COUNT(bra.branch_name)=(SELECT MAX(COUNT(branch_name)) FROM branch GROUP BY bank_id);**

我遇到了自然连接的问题，以及子查询如何影响它。

希望它可以帮助某人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:09:16.947

```
SELECT b.bank_id, COUNT(*)
FROM 
    bank b
        LEFT JOIN branches br ON br.bank_ID = b.bank_ID
GROUP BY b.bank_id
ORDER BY COUNT(*) DESC
LIMIT 1 
```

小提琴：[http ://sqlfiddle.com/#!2/68af9/3](http://sqlfiddle.com/#!2/68af9/3)

# configuration - 如何让 log4J 工作 - 我得到“包 org.apache.log4j 不存在”

> ID：14913927
> 
> 赞同：10
> 
> 时间：2013-02-16T18:58:12.800
> 
> 标签：configuration, log4j

我知道这可能是一个新手问题，但我在设置 Log4J 时遇到了问题：

我想运行一个 log4j 演示，这是我的代码：

```
import org.apache.log4j.Logger;
import org.apache.log4j.BasicConfigurator;

public class HelloLOG4j {

  private static final Logger logger = Logger.getLogger(Hello.class);

  public static  void main(String argv[]) {
 BasicConfigurator.configure();
 logger.debug("Hello world.");
 logger.info("What a beatiful day.");
  }
} 
```

我在 System 和 User var 中设置了我的 Classpath: C:\Users\Adel\Downloads\apache-log4j-1.2.17\log4j-1.2.17.jar

![在此处输入图像描述](../Images/a35557fd2447ad80400a86753d5802db.png)

但是当我运行我的程序时，我仍然得到

```
errors found:
File: C:\Users\Adel\Desktop\various_topics\JavaProjects\HelloLOG4j.java  [line: 2]
Error: package org.apache.log4j does not exist 
```

我知道我设置了正确的类路径 - 如果我运行 cmd 行：

```
C:\Program Files\Java\jdk1.6.0_20>print %LOG4J_HOME%
C:\Users\Adel\Downloads\apache-log4j-1.2.17\log4j-1.2.17.jar is currently bein
g printed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:54:36.827

您需要将 log4j home 添加到类路径，因为 JVM 需要 log4j 类的路径

如果在 Windows 上，您可以使用

```
set classpath=%classpath%;%LOG4J_HOME% 
```

在 linux/ubuntu 上（比开发和服务器的 windows 好得多）

```
export classpath=$classpath:$LOG4J_HOME 
```

然后在向类路径添加其他路径后运行您的应用程序，例如

```
set classpath=%classpath%;c:\users\adel\.... 
```

您不需要再次添加 log4JHOME -`%classpath%;`将添加到当前类路径。

Java 不知道 LOG4J_HOME。在自动配置/默认配置的情况下，它仅由 log4j 使用。

在旁注中尝试使用新的 log4j2 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:17:52.467

你能展示你是如何编译代码的吗？

此外，尝试将 log4j.jar 添加到“lib”目录并使用引用此 jar 的类路径进行编译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-09T09:40:16.240

只是想提醒一下，不要大写`Log4j`关键字，不像`Logger`：

```
import org.apache.Log4j.Logger; //typo
import org.apache.log4j.Logger; //correct 
```

`/usr/share/java/log4j-1.2-api-2.8.2.jar`路径可以通过 issue `dpkg -L liblog4j2-java`(debian-based) 命令定位，然后执行：

```
$ sudo javac -cp .:xxx.jar:/usr/share/java/log4j-1.2-api-2.8.2.jar xxx.java 
```

# java - Miglayout，动态插入面板

> ID：14913930
> 
> 赞同：3
> 
> 时间：2013-02-16T18:58:32.033
> 
> 标签：java, swing, miglayout

我正在使用 MiG 布局创建 Java Swing 应用程序，GUI 由一系列自定义 JPanel 行组成，我创建了初始布局：

面板 x

面板 y

但后来我希望能够在这些中间插入一个面板并将其他的向下推，

面板 x

面板 z

面板 y

目前，我通过遍历布局中的所有组件并重新添加它们来做到这一点：

```
 Map<Component, Object> constraintMap = ((MigLayout)this.getLayout()).getConstraintMap();
    Component[] allComps = this.getComponents();
    this.removeAll();
    for(Component c : allComps){
        if('met some insert condition'){
            this.add('new component to insert', new CC().wrap());
        this.add(c, new CC().wrap());
    }
    this.revalidate(); 
```

虽然没有很多组件，这感觉非常不理想，但有更好的方法吗？任何帮助将不胜感激。

# javascript - 循环中的 setTimeout：回调发生时没有延迟

> ID：14913931
> 
> 赞同：0
> 
> 时间：2013-02-16T18:58:39.103
> 
> 标签：javascript, for-loop, settimeout

我四处搜索，发现其他一些有类似问题的人，但我似乎找不到解决方案或明确的解释。

```
var content = 'test<br />';

for( var i = 1; i < 6; i++ ) {
    setTimeout(function() {
        document.write(content);
    }, 3000);
} 
```

我希望 for 循环中的代码执行 5 次，每个循环之间有 3 秒的延迟。当它运行时，至少从表面上看，页面加载时看起来像是延迟了三秒，然后毫无延迟地通过所有循环。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:09:31.673

您的问题是所有呼叫都在 3000 毫秒后发生。每隔 3 秒执行一次呼叫，请执行以下操作：

```
var content = 'test<br />';

for( var i = 1; i < 6; i++ ) {
    setTimeout(function() {
        document.write(content);
    }, 3000 * i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T19:04:41.100

您可能需要使用[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)（因为您试图以某个“间隔”运行代码）

```
// first create an isolated namespace because we don't need to dirty the global ns //
(function(){
  var counter = 0;
  var maxIterations = 6;
  var intervalReference = setInterval(function(){

    // your code goes here //
    alert('test');

    // the stop condition //
    ++counter;
    if (counter == maxIterations) {
      clearInterval(intervalReference);
    }
  }, 3000);
}()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:08:16.750

setInterval 可能是要走的路（请参阅 Alin 的回答），但如果您想沿着 setTimeout 路线走，代码将如下所示：

```
var loop = 0;
var content = "test<br>";

function startTimeout(init){
  if(init!==true){
    document.write(content);
    loop++;
  }

  if(loop<5){
    setTimeout(startTimeout, 3000);
  }
}

startTimeout(true); 
```

# cocoa - 帮助手册中的锚点不起作用

> ID：14913937
> 
> 赞同：8
> 
> 时间：2013-02-16T18:59:04.017
> 
> 标签：cocoa, xcode4, help-viewer, apple-help

我已经仔细检查了所有内容，并希望有人能找到我没有看到的愚蠢错误。

我正在尝试为我的应用程序构建一个 Apple 帮助部分，它正确地进入了登录页面，但是没有一个锚点起作用。登录页面被调用`index.html`，另一个页面被调用，该页面`test.html`位于`pgs`目录中。

在 index.html 我有：

```
<a href="help:anchor=support bookID=com.company.app_name.help">Link to another page</a> 
```

在 test.html 我有：

```
<a name="support"></a> 
```

所以这是我为了到达现在的位置而遵循的步骤：

[1）我建立了Apple文档](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHEAADH)指定的目录

```
AppName.help/
    Contents/
        Info.plist
        Resources/
            shrd/
            English.lproj/
                index.html
                search.helpindex
                pgs/
                    test.html 
```

2) 我按照 Apple 文档中的说明构建了 Help Info.plist。包含在 Info.plist 中，我将其设置`CFBundleIdentifier`为`com.company.app_name.help`.

3）在我的应用程序 Info.plist 中，我设置`CFBundleHelpBookFolder`为`AppName.help`并设置`CFBundleHelpBookName`为`com.company.app_name.help`

4) 然后我复制了我在 Xcode 中构建的目录，同时确保选择了*Create Folder References for any added folder*选项。

5）然后我使用*帮助索引器*来索引目录`AppName.help`。确保我选择了*在所有文件中索引锚信息*的选项。然后我将 .helpindex 文件复制到它应该在的*English.lproj文件夹中。*

而已。如果我将以下链接放在*index.html*文件中，我注意到我的应用程序可以正常工作。

```
<a href="pgs/test.html">Click this link</a> 
```

这也是我的*index.html*代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>AppName Help</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="noindex" />
    <meta name="AppleTitle" content="AppName Help" />
    <meta name="AppleIcon" content="../shrd/icon.png" />
</head>
<body>
    <a href="help:anchor=support bookID=com.company.app_name.help">Link to another page</a>
</body> 
```

这是*test.html 的代码。*

 *```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Testing Links</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="robots" content="anchors" />
    </head>
    <body>
        <a name="support"></a>Does linking work?<br/>

    </body>
</html> 
```* 

*这是我的帮助文件的 Info.plist*。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>en_us</string>
    <key>CFBundleIdentifier</key>
    <string>com.company.app_name.help</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>AppName</string>
    <key>CFBundlePackageType</key>
    <string>BNDL</string>
    <key>CFBundleShortVersionString</key>
    <string>2</string>
    <key>CFBundleSignature</key>
    <string>hbwr</string>
    <key>CFBundleVersion</key>
    <string>2</string>
    <key>CFBundleHelpBookName</key>
    <string>AppName Help</string>
    <key>HPDBookAccessPath</key>
    <string>index.html</string>
    <key>HPDBookIconPath</key>
    <string>shrd/icon.png</string>
    <key>HPDBookIndexPath</key>
    <string>search.helpindex</string>
    <key>HPDBookKBProduct</key>
    <string>app_name1</string>
    <key>HPDBookKBURL</key>
    <string>http://www.company.com</string>
    <key>HPDBookRemoteURL</key>
    <string>http://www.company.com</string>
    <key>HPDBookTitle</key>
    <string>AppName Help</string>
    <key>HPDBookType</key>
    <string>3</string>
</dict>
</plist> 
```

我也关注了这篇文章：[http](http://www.cocoabuilder.com/archive/cocoa/312037-updating-an-app-help.html) ://www.cocoabuilder.com/archive/cocoa/312037-updating-an-app-help.html除了重新索引目录之外，每次我进行更改时都清除缓存.

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T21:46:38.217

当然大卫，谢谢你的提醒。

根据我的回忆和我草率的文档，我运行以下命令来索引帮助文档文件：

```
hiutil -vCaf ./search.helpindex English.lproj 
```

然而，我意识到的一件事是索引实用程序会在任何时候使用该`&nbsp;`字符时抱怨。而是替换字符`&#32;`

我认为这是我的情况的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-04T14:07:43.313

如果一切正常并且如果帮助不起作用，请使用下面的代码。不确定您的安全问题，您可能需要研究从应用程序中删除文件。有时升级时的应用程序不会更新帮助文件并显示旧帮助文件的缓存副本，其中不包含新的锚点。因此下面的代码清除了帮助缓存。还有另一种更简洁的方法，您可以在 Info.plist 中增加帮助文件的构建版本，该文件位于帮助包中，而不是应用程序信息 plist。这些字段是 CFBundleShortVersionString CFBundleVersion

```
-(void)clearCacheHelp {
NSArray *arguments1 = [NSArray arrayWithObjects:@"helpd",nil];

NSTask * list1 = [[NSTask alloc] init];
[list1 setLaunchPath:@"/usr/bin/killall"];
[list1 setArguments:arguments1];

NSPipe * out1 = [NSPipe pipe];
[list1 setStandardOutput:out1];

[list1 launch];
[list1 waitUntilExit];

NSString *home = [self homeDirectory];

home = [home stringByAppendingPathComponent:@"Library/Caches/com.apple.helpd"];

NSArray *arguments  = [NSArray arrayWithObjects:@"-rf",home,nil];

NSTask * list = [[NSTask alloc] init];
[list setLaunchPath:@"/bin/rm"];
[list setArguments:arguments];

NSPipe * out = [NSPipe pipe];
[list setStandardOutput:out];

[list launch];
[list waitUntilExit];

NSString *home2 = [self homeDirectory];

home2 = [home2 stringByAppendingPathComponent:@"Library/Caches/com.apple.helpviewer"];

NSArray *arguments2  = [NSArray arrayWithObjects:@"-rf",home2,nil];

NSTask * list2 = [[NSTask alloc] init];
[list2 setLaunchPath:@"/bin/rm"];
[list2 setArguments:arguments2];

NSPipe * out2 = [NSPipe pipe];
[list2 setStandardOutput:out2];

[list2 launch];
[list2 waitUntilExit];

NSArray *arguments3  = [NSArray arrayWithObjects:@"-rf",@"~/Library/Caches/com.apple.helpd",nil];

NSTask * list3 = [[NSTask alloc] init];
[list3 setLaunchPath:@"/bin/rm"];
[list3 setArguments:arguments3];

NSPipe * out3 = [NSPipe pipe];
[list3 setStandardOutput:out3];

[list3 launch];
[list3 waitUntilExit];

NSArray *arguments4  = [NSArray arrayWithObjects:@"-rf",@"~/Library/Caches/com.apple.helpviewer",nil];

NSTask * list4 = [[NSTask alloc] init];
[list4 setLaunchPath:@"/bin/rm"];
[list4 setArguments:arguments4];

NSPipe * out4 = [NSPipe pipe];
[list4 setStandardOutput:out4];

[list4 launch];
[list4 waitUntilExit];

} 
```

# wordpress - .htaccess 子目录中的执行顺序（wordpress/laravel）

> ID：14913938
> 
> 赞同：0
> 
> 时间：2013-02-16T18:59:09.760
> 
> 标签：wordpress, .htaccess, laravel, laravel-4

早上好堆栈！我的网站目前的结构是这样的：

1.  [http://www.mywordpressite.com/](http://www.mywordpressite.com/)
2.  [http://www.mywordpressite.com/.htaccess](http://www.mywordpressite.com/.htaccess)
3.  [http://www.mywordpressite.com/portal/](http://www.mywordpressite.com/portal/)
4.  [http://www.mywordpressite.com/portal/.htaccess](http://www.mywordpressite.com/portal/.htaccess)

我对宇宙的理解是，如果我导航到门户，（4）的 .htaccess 将被解析而不是（或优先于）（2）的 .htaccess。实际上，我观察到即使在导航到 (3) [http://www.mywordpressite.com/portal/](http://www.mywordpressite.com/portal/)时，来自 (2) 的 .htaccess 也正在接管。

可以想象，根目录是一个带有标准 wordpress .htaccess 文件的 wordpress 站点：

/.htaccess

```
<files wp-config.php>
Order deny,allow
deny from all
</files>
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

该门户是一个 Laravel 门户，带有一个标准的 Laravel .htaccess 文件

/portal/.htaccess

```
<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

我注意到的是，如果我突然删除 (2) /.htaccess，一切都可以在门户网站上运行，所以肯定会发生冲突。我不会在这里发布我的虚拟主机的东西，因为 .htaccess 的工作/做他们应该做的事情 - 只是不同时：

/.htaccess 将几乎所有输入与文件或目录不对应的输入重定向到 index.php 文件中，以便更好地解析。

/portal/.htaccess 做了类似的事情。

我注意到的是，对于两个 .htaccess，如果我导航到通常会被门户的 .htaccess 解析的路由，例如[http://www.mywordpressite.com/portal/this/is/a/route](http://www.mywordpressite.com/portal/this/is/a/route)我最终从我的*wordpress*站点得到了 404（例如，它通过管道将 url 传送到 wordpress 根目录的 /index.php 文件中），当然该页面在 WP 中不存在。

当我删除 wp /.htaccess 时，当然 wordpress 不再正常工作了，但是突然之间，门户网站的 .htaccess 开始正常工作并且[http://www.mywordpressite.com/portal/this/is/a /route](http://www.mywordpressite.com/portal/this/is/a/route)通过将 url 参数传送到 /portal/index.php 来触发适当的路由以进行处理。

这对我来说似乎倒退了。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:36:53.920

我认为您的问题在于您`RewriteBase`在门户访问文件中遗漏了 a ：

```
RewriteBase /portal/ 
```

我不是超文本访问天才，所以我无法解释当你忽略它时会发生什么。但我确信这就是解决方案。

# jquery - 如何通过该div之外的li元素引用div

> ID：14913943
> 
> 赞同：0
> 
> 时间：2013-02-16T18:59:57.490
> 
> 标签：jquery, html, refer

一开始我不得不承认我对编程的了解是非常基础的。我不明白一切，所以也许我的问题看起来有点蹩脚，但我的想法仍然用完了，我需要问。

我使用了一个幻灯片元素教程，并在我的网站上添加了一些滑动 Div，一切正常，但在本教程中，作者在父 div 中使用了一个按钮元素，然后单击内部 div 幻灯片。我想使用导航部分中的 li 元素，该元素位于该 div 之外，但我不知道如何更改脚本代码以将动画保留在该 div 中。基本上它看起来：

HTML：

```
 <ul id="navigation">
 <li class="about"><a title="A" href="#" > </a></li>
 <li class="search"><a title="P" href="#" ></a></li>
 <li class="photos"><a title="G" href="#" ></a></li>
 <li class="rssfeed"><a title="U" href="#" ></a></li>
 <li class="contact"><a title="K" href="#" ></a></li>
</ul>

    <div id="IDcontent" class="slide" >
<button>slide it</button>
<div class="inner"  style="margin-left: 100%"> test </div>
</div> 
```

我设法更改 li 元素触发单击操作而不是按钮的脚本代码，但单击后，它不会滑动 div 但会滑动下一个 li 元素。

脚本代码：

```
<script>

$(document).ready(function() {
  $('#navigation li').click(function() {
    var $marginLefty = $(this).next();
    $marginLefty.animate({
      marginLeft: parseInt($marginLefty.css('marginLeft'),10) == 0 ?
        $marginLefty.outerWidth() :
        0
    });
  });
});

  </script> 
```

有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:07:14.257

试试这个：

```
 $(document).ready(function() {
      $('#navigation li').click(function() {
        var $marginLefty = $('a', this);
        $marginLefty.animate({
          marginLeft: parseInt($marginLefty.css('marginLeft'),10) == 0 ?
            $marginLefty.outerWidth() :
            0
        });
      });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:09:09.230

因为这行代码，

```
var $marginLefty = $(this).next(); 
```

单击后的下一个 li 元素是动画的，因为您稍后会执行 $marginLefty.animate()。如果要为 div 设置动画，则应将 marginLefty 设置为 div 元素。因此，将该行替换为：

```
var $marginLefty = $('.inner'); 
```

要找出点击了哪个 li，你可以这样做

```
// $(this) refers to the element that was clicked
$liClass = $(this).attr("class") 
```

在点击处理程序中。然后，您可以根据单击的 li 更改 div 的内容，并使用 html() 函数。例如，

```
var content;
if($liClass == 'about'){
 content = 'about clicked';
}
else if($liClass == 'search'){
    content = 'search clicked';
}
//more code here
//more code here
$marginLefty.html(content); 
```

您可以在此处找到有关 .attr() 和 .html() 的更多信息：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)和[http://api.jquery.com/html/](http://api.jquery.com/html/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:14:27.040

如果我理解正确，您是否希望 LI 元素执行按钮元素正在执行的相同操作？您只需点击按钮即可：

```
$(document).ready(function() {
  $('#navigation li').click(function() {
      $('#IDcontent').find('button').trigger('click');
  });
}); 
```

您的按钮元素需要保留在页面上。这基本上将运行附加到按钮的单击事件的任何代码 - 每当您单击任何 LI 元素时。您可以通过更改选择器将其设置为仅对 1 个列表元素起作用：

```
 $('#navigation li.about').click(function() {
   ...
  }); 
```

这只会将此功能附加到 li class="about" 元素。

如果您打算将按钮留在页面上，则此方法有效。您可以简单地将按钮隐藏在 CSS 中，但这有点草率。如果您决定完全删除该按钮，只需找到该按钮正在使用的 Javascript 代码。它看起来像这样：

```
$('#IDcontent button').click(function(){ ... }); 
```

或类似的东西。然后只需将该按钮的单击事件中的代码移动到列表元素的单击事件中。

# opencv - 协助 CVLine/CVPoint

> ID：14913944
> 
> 赞同：0
> 
> 时间：2013-02-16T18:59:59.727
> 
> 标签：opencv

在文本文件 npoints3 中，我的坐标格式为 1 242 2 242 3 242 ... 900 242，它是我图像上的一条直线；但是，下面的代码会打印一条直线加上一条额外的线段。我不确定我做错了什么。有人可以帮我解释为什么我会得到额外的线段吗？提前致谢！

```
 IplImage* InputImg = cvLoadImage("image.jpg", CV_LOAD_IMAGE_GRAYSCALE);
    CVPoint * points  = (CvPoint*)malloc(length*sizeof(CvPoint*));
    FILE *fp;

    fp = fopen("npoints3", "r");

    for(i=1; i <= length; i++)
    {
    fscanf(fp, "%d", &(points[i].x));
    fscanf(fp, "%d", &(points[i].y));
    printf("%d  %d\n",points[i].x, points[i].y);

    }
   for(i=1; i < length; i++)
   cvLine(InputImg, points[i], points[i+1], red, 3, 1); 
```

* * *

感谢您的回复。为了确保我清楚地理解你，我已经发布了你的建议编辑。以下循环是您建议的吗？提前致谢。

```
IplImage* InputImg = cvLoadImage("image.jpg", CV_LOAD_IMAGE_GRAYSCALE);

    if (!InputImg) {
       printf("Could not load Input Image");
       exit(0);
    }

    points1 = (CvPoint*)malloc(length*sizeof(CvPoint*));
           points2 = (CvPoint*)malloc(length*sizeof(CvPoint*));
    points  = (CvPoint*)malloc(length*sizeof(CvPoint*));

    fp = fopen("points", "r");

    for(i=0; i < length; i++)
    {
    fscanf(fp, "%d", &(points[i].x));
    fscanf(fp, "%d", &(points[i].y));

    }
   for(i=0; i < length; i++)
   {

       points1[i].x = points[i].x;
       points1[i].y = points[i].y;

       points2[i].x = points[i+1].x; points2[i].y = points[i+1].y;
      //   cvLine(InputImg, points1[i], points2[i], red, 3, 1);
    }

  cvSnakeImage(InputImg, points, length, alpha, beta, gamma, CV_VALUE, winni, criteria, calcGradient);

    for (i = 0; i <length-1; i++)
    {

           points1[i].x = points[i].x;
           points1[i].y = points[i].y;

           points2[i].x = points[i+1].x; points2[i].y = points[i+1].y;
             cvLine(InputImg, points1[i], points2[i], red, 3, 1);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:04:34.060

在我看来，这可能是一个错误的错误。当您调用 时，您正在为一组元素`malloc`分配足够的空间。`length`数组是 0 索引的——也就是说，`points[0]`to`points[length-1]`是有效的内存地址，而`points[length]`不是。

在第一个循环结束时，您设置的最后一个点是数组末尾之后的一个元素，并且在您尝试绘制最后一条线段时，该值可能会被某些东西覆盖。

尝试将您的第一个循环更改为：

```
for(i=0; i < length; i++) {
    // scanf stuff here
} 
```

和你的第二个循环：

```
for(i=0; i < length-1; i++)
    // cvLine stuff here 
```

# php - 如何在 php/html doc 中添加两个 mysql 列的结果并回显结果

> ID：14913946
> 
> 赞同：0
> 
> 时间：2013-02-16T19:00:27.170
> 
> 标签：php, mysql, addition, calculated-columns

我正在为我的妻子和我使用 PHP/MySQL 构建费用跟踪器。我已经成功构建了数据库、表格、适当的 PHP 文件等。我现在希望做的是将费用列中输入的所有数值加在一起，并将存款列中输入的所有数值也加起来并让它们显示在我构建的 PHP“echo”文件中相应列下的表格底部。

这是我建立的：

```
<html>
<head>  
   <title>Budget</title>  
   <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
        <style type="text/css">
             INPUT[type="text"] { font-size: 14pt }
             INPUT[type="password"] { font-size: 14pt }
        </style>  
        <link rel="apple-touch-icon" href="images/template/engage.png"/>
   </head>  
   <body BGCOLOR=#FFFFFF onorientationchange="updateOrientation();" >
<div id="page_wrapper">
    <h1><img src="Budjet1.gif"></h1>
    <div id="content_left">

<hr>
<?php
$username="username";
$password="password";
$database="database_name";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT * FROM table";
$result=mysql_query($query);
$num=mysql_numrows($result);

mysql_close();
?>
<table border="1" cellspacing="2" cellpadding="2">
<tr>
<td><font face="Arial, Helvetica, sans-serif"><b>Day</b></font></td>
<td><font face="Arial, Helvetica, sans-serif"><b>Month</b></font></td>
<td><font face="Arial, Helvetica, sans-serif"><b>Year</b></font></td>
<td><font face="Arial, Helvetica, sans-serif"><b>Transaction</b></font></td>
<td><font face="Arial, Helvetica, sans-serif"><b>Category</b></font></td>
<td><font face="Arial, Helvetica, sans-serif"><b>Deposit</b></font></td>
<td><font face="Arial, Helvetica, sans-serif"><b>Expense</b></font></td>
<td><font face="Arial, Helvetica, sans-serif"><b>Notes</b></font></td>
</tr>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"Day");
$f2=mysql_result($result,$i,"Month");
$f3=mysql_result($result,$i,"Year");
$f4=mysql_result($result,$i,"Transaction");
$f5=mysql_result($result,$i,"Category");
$f6=mysql_result($result,$i,"Deposit");
$f7=mysql_result($result,$i,"Expense");
$f8=mysql_result($result,$i,"Notes");
?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f5; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f6; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f7; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f8; ?></font></td>
</tr>
<?php
$i++;
}
?>
</table>
                 <p><font face="arial" color="#000000" size="4"><a href="enter.php">Make another entry!</a></font></p>
                 <p><font face="arial" color="#000000" size="4"><a href="logout.php">Logout</a></font></p>
</div>
</div>
</body>
</html> 
```

所以我想要做的是让脚本将“费用”列中的所有值加在一起，并在费用列下方显示该结果。与“存款”列相同。

我对这些东西有点陌生，所以您可以提供的任何帮助将不胜感激。我使用以下方法进行了测试：

```
$sql = "select sum(column) from table";
$q = mysql_query($sql);
$row = mysql_fetch_array($q); 
```

接着...

```
echo 'Sum: ' . $row[0]; 
```

但我无法让它显示在表格的底部。相反，它显示在每隔一行之间。另外，我不确定如何获取两个单独行的结果。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:30:50.023

由于无论如何您都在查询所有数据，因此您可以只计算 PHP 代码中的总数。像这样的东西：

```
$expenseTotal = 0;

while ($row = mysql_fetch_assoc($result)) 
{
    $expense = $row['Expense'];
    $expenseTotal += $expense;

    echo "<tr><td>$expense</td></tr>"; //TODO: add other columns
}

echo "<tr><td>$expenseTotal</td></tr>"; 
```

# c# - TypeModel.Create 的作用是什么？

> ID：14913947
> 
> 赞同：2
> 
> 时间：2013-02-16T19:00:33.270
> 
> 标签：c#, serialization, protobuf-net

首先，如果这是一个菜鸟问题，请原谅我 - 但我是新手`protobuf-net`。

我注意到有些人`TypeModel.Create()`在序列化时使用 with `protobuf-net`，而其他人只是`Serializer`直接调用（意思是使用默认的单例`RuntimeTypeModel.Default`）。

有什么区别？我会假设如果我一直重复使用相同`RuntimeTypeModel.Default`的东西，我会获得一些性能优势，但我放弃了什么作为交换？

如果我在调用序列化时已经知道`Type`我的对象，哪种方法更好？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:52:47.730

ķ; 现在的方法`Serializer.*`主要用作`RuntimeTypeModel.Default.*`. 它们仍然存在的三个原因：

*   方便
*   许多现有的示例代码
*   v1 API 兼容性

大多数人只需要一个模型。*但是，如果您需要，*系统支持具有不同配置的不同并行模型。然而，在大多数情况下，这不太可能：它确实使它更易于测试，因为我可以简单地使用*不同*的模型实例来重置整个系统。所以：你可以（如果你愿意，大多数人不会）有多个模型实例的原因：

*   测试，主要是我:)
*   在不同的布局/版本之间迁移

`TypeModel`顺便说一句，如果您使用“预编译”功能（主要针对电话设备之类的东西）， API 也会暴露出来。这将生成具有自定义模型类型的程序集，可通过以下方式使用：

```
var serializer = new MyCustomSerializer(); 
```

where `MyCustomSerializer : TypeModel`- 虽然在这种情况下它不会是`RuntimeTypeModel`.

# mysql - 为什么mysql会在这里死锁？

> ID：14913948
> 
> 赞同：1
> 
> 时间：2013-02-16T19:00:35.587
> 
> 标签：mysql

偶尔我得到一个mysql错误。错误是

```
Deadlock found when trying to get lock; try restarting transaction 
```

查询是

```
var res = cn.Execute("insert ignore into 
    Post(desc, item_id, user, flags)
    select @desc, @itemid, @userid, 0", 
    new { desc, itemid, userid }); 
```

这个查询到底是怎么引起的？谷歌搜索时，我看到了一些关于如何使用长锁定行并导致此问题的查询，但此插入不需要触及任何行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:52:39.967

死锁是由*事务间*排序和锁获取引起的。通常每个连接有一个活动事务（尽管不同的数据库可能工作方式不同）。因此，只有在*多个连接*以及*多个重叠事务*的情况下才会发生死锁。单个连接/事务不能自行死锁，因为没有它无法获取的锁：它拥有它，或者它可以获得它。

插入死锁可能[是由唯一约束引起的](http://thushw.blogspot.com/2010/11/mysql-deadlocks-with-concurrent-inserts.html)- 因此检查唯一键约束是否是罪魁祸首。其他原因可能是为选择“for update”语句等而持有的锁。

此外，确保所有事务在需要它们的操作之后*立即完成*（提交或回滚）。如果事务没有及时关闭，它可能会导致这种死锁行为。虽然[“自动提交”](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_autocommit)通常会处理此问题，但它可以更改且不应依赖：我建议正确使用手动事务。

有关更多信息，请参阅[需要的 Mysql 死锁解释](https://stackoverflow.com/questions/1851528/mysql-deadlock-explanation-needed)和[如何应对死锁](http://dev.mysql.com/doc/refman/5.6/en/innodb-deadlocks.html)。在这种情况下，“再试一次”可能就足够了。

# ios - 以编程方式使用约束将 UIImageView（视图）从 A 点设置为 B 点

> ID：14913949
> 
> 赞同：2
> 
> 时间：2013-02-16T19:01:08.777
> 
> 标签：ios, uiimageview, uiviewanimation, nslayoutconstraint

我有一个图像视图，我在屏幕的中央右侧排列。当自己添加带有约束的图像视图时，一切都很好。我需要将图像视图从原始位置（A 点）动画到屏幕的底部（B 点）；问题是当我尝试从 A 点到 B 点进行动画处理时，图像视图从屏幕的左上角开始，就像它只是在没有约束的情况下添加的一样（而不是我希望它从中央） 。

这是代码和一些评论：

```
#define DEGREES_TO_RADIANS(x) (M_PI * x / 180.0) //defined above
- (void)viewDidLoad
{
UIImage *cardFaceDownImage = [UIImage imageNamed:@"b-top@2x.png"];
UIImageView *dealCardDown = [[UIImageView alloc] initWithImage:cardFaceDownImage];
dealCardDown.translatesAutoresizingMaskIntoConstraints = NO;

NSLayoutConstraint *dealCardConstraintY = [NSLayoutConstraint constraintWithItem:dealCardDown attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterY multiplier:1 constant:1];

NSLayoutConstraint *dealCardConstraintX = [NSLayoutConstraint constraintWithItem:dealCardDown attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1 constant:130];

[self.view addConstraint:dealCardConstraintY];
[self.view addConstraint:dealCardConstraintX];
[self.view addSubview:dealCardDown];

//IF I comment out the below code the UIImageView lines up where I want it (Point A)
//IF I don't coment it out, the imageview starts in the upper left hand corner of the screen
//where it normally would as if just adding an image view programatically without
//constraints would, but it does end up where I want it to (Point B)

[self.view removeConstraint:dealCardConstraintX];
[self.view removeConstraint:dealCardConstraintY];

dealCardConstraintY = [NSLayoutConstraint constraintWithItem:dealCardDown attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeBottom multiplier:1 constant:1];

dealCardConstraintX = [NSLayoutConstraint constraintWithItem:dealCardDown attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeLeft multiplier:1 constant:130];

[self.view addConstraint:dealCardConstraintY];
[self.view addConstraint:dealCardConstraintX];

[self.view setNeedsUpdateConstraints];

[UIView animateWithDuration:2.0 delay:2.0 options:UIViewAnimationCurveEaseIn animations:^(void)
 {
     dealCardDown.transform = CGAffineTransformRotate(dealCardDown.transform, DEGREES_TO_RADIANS(90));

     [self.view layoutIfNeeded];

 }
 completion:^(BOOL finished)
 { 
 }
 ];
 } 
```

..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T21:01:01.283

您需要将约束更改移动到动画块中，以便正确动画。这段代码很适合我。

```
- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];

UIView *dealCardDown = [[UIView alloc] initWithFrame:(CGRect){0,0,50,50}];
dealCardDown.backgroundColor = [UIColor redColor];
dealCardDown.translatesAutoresizingMaskIntoConstraints = NO;
NSLayoutConstraint *sizeConstraint = [NSLayoutConstraint constraintWithItem: dealCardDown attribute: NSLayoutAttributeWidth relatedBy: NSLayoutRelationEqual toItem: nil attribute:NSLayoutAttributeNotAnAttribute multiplier: 1 constant: 50];
[dealCardDown addConstraint:sizeConstraint];
sizeConstraint = [NSLayoutConstraint constraintWithItem: dealCardDown attribute: NSLayoutAttributeHeight relatedBy: NSLayoutRelationEqual toItem: nil attribute:NSLayoutAttributeNotAnAttribute multiplier: 1 constant: 50];
[dealCardDown addConstraint:sizeConstraint];
[self.view addSubview:dealCardDown];

NSLayoutConstraint *dealCardConstraintX = [NSLayoutConstraint constraintWithItem:dealCardDown attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1.f constant:0.f];
NSLayoutConstraint *dealCardConstraintY = [NSLayoutConstraint constraintWithItem:dealCardDown attribute:NSLayoutAttributeBottom relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeBottom multiplier:1.f constant:-self.view.center.y+dealCardDown.frame.size.height/2];

[self.view addConstraint:dealCardConstraintX];
[self.view addConstraint:dealCardConstraintY];
[self.view layoutIfNeeded];

[UIView animateWithDuration:2.0 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^(void)
 {
     dealCardDown.transform = CGAffineTransformRotate(dealCardDown.transform, 90*M_PI/180);
     dealCardConstraintY.constant = 0;
     [self.view layoutIfNeeded];

 }
                 completion:^(BOOL finished)
 { 
 }
 ];
} 
```

# sql - SQL Server - 从多个客户端同时插入到表中 - 检查限制和阻止

> ID：14913953
> 
> 赞同：5
> 
> 时间：2013-02-16T19:01:58.520
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, unlock

我们最近面临一个问题，即从多个客户端同时插入到我们的一个 sal 服务器表中。我希望你们能帮助我们度过难关。

我们正在使用存储过程来进行交易。在该存储过程中，对于每笔交易，我们计算到目前为止的总销售额。如果总销售额低于设定的限额，则允许交易。否则，交易将被拒绝。

它在大多数情况下都能正常工作。但是，有时当多个客户端试图同时进行事务时，限制检查会失败，因为两个事务都完成了。

你们能建议我们如何始终有效地执行限制吗？有没有更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:19:44.723

我认为不可能以声明方式执行此操作。

如果保证所有插入都通过存储过程，并且一旦插入 SaleValue 就不会更新，那么以下应该可以工作（我组成了表和列名，因为这些在最初的问题中没有提供）

```
DECLARE @SumSaleValue MONEY

BEGIN TRAN

SELECT @SumSaleValue = SUM(SaleValue)
FROM dbo.Orders WITH (UPDLOCK, HOLDLOCK)
WHERE TransactionId = @TransactionId

IF @SumSaleValue > 1000
    BEGIN
    RAISERROR('Cannot do insert as total would exceed order limit',16,1);
    ROLLBACK;
    RETURN;
    END

/*Code for INSERT goes here*/

COMMIT 
```

提供`HOLDLOCK`可序列化的语义并锁定匹配的整个范围，`TransactionId`并`UPDLOCK`防止两个并发事务锁定相同的范围，从而降低死锁的风险。

最好有一个索引`TransactionId,SaleValue`来支持这个查询。

# mysql - 根据搜索结果进行更改

> ID：14913957
> 
> 赞同：0
> 
> 时间：2013-02-16T19:02:20.677
> 
> 标签：mysql, replace

我有一个充满企业信息的数据库。从律师到快餐店！实施数据的人都将不同的业务归为同一类别。

我想根据搜索结果更改业务的类别。例如：我搜索名称栏中有“律师”的企业，并将 category_ID 从 35 更改为 15。

**从：**

```
NAME          | category_ID|
----------------------------
Attorney 1     |      35
Attorney 2     |      35
restaurant     |      35 
```

**至**

```
NAME           | category_ID|
-----------------------------
Attorney 1     |      18
Attorney 2     |      18
Restaurant     |      35 
```

我是 MySql 的新手，我仍在寻找神奇的公式来做到这一点。

有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:05:44.153

尝试这个
`update tablename
set category_d = 18
where lower(name) like 'attorney%'`

这将使类别 ID 为 18（根据您的示例），其中名称包含 Attorney。我使用 lower 只是为了使其不区分大小写。你可以避免，只是写`name = 'Attorney%'`

# android - 缩放大位图替代方法

> ID：14913959
> 
> 赞同：1
> 
> 时间：2013-02-16T19:02:30.480
> 
> 标签：android, bitmap, scaling

首先，我知道使用`inJustDecodeBounds`和`inSample`size 以接近所需大小的大小加载位图的推荐方法。然而，这是一种相当广泛的方法，只能获得与目标近似的图像。

我想利用`options.inDensity`并`options.inTargetDensity`欺骗本机加载程序将图像更精确地缩放到所需的目标大小。基本上我设置`options.inDensity`为图像的实际宽度和`options.inTargetDensity`所需的宽度，我确实得到了所需尺寸的图像（在这种情况下，纵横比恰好保持不变）。然后我设置`image.setDensity(DENSITY_NONE)`生成的图像，一切似乎都可以正常工作。

有人知道这种方法有什么问题吗？关于内存效率和图像质量的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:47:23.380

对我来说听起来很棒！（不敢相信 android 开发人员编写了代码，但没有以理智和明智的方式公开功能）。

我确实有一个担心。我有充分的理由相信 Android 无法处理任一维度上大于 2048x2048 像素的实例化位图。如果执行重新缩放的内部代码不够智能，则在加载大于 2048x2048 的位图时可能会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:07:39.803

我总是使用 Opengl 2.0 和表面视图获得更好的图像管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:49:34.400

我自己也在考虑这个问题，使用 inDensity 和 inTargetDensity 在解码时放大/缩小位图。它运行良好，但不幸的是它会产生非常糟糕的性能（动画）结果。我希望我可以将其用作“通用”方法来按比例放大/缩小解码，类似于 inSampleSize，不幸的是它仅用于下采样。似乎有不同的原生实现：inSampleSize 表现良好，没有明显的性能影响，其中 inDensity/inTargetDensity 引入了显着的性能影响（如慢动作）。

还是我错过了什么？

# c++ - 获取对 unique_ptr<> 数组项的引用？

> ID：14913961
> 
> 赞同：0
> 
> 时间：2013-02-16T19:02:33.280
> 
> 标签：c++, pointers

我有以下

```
class Panel {
public:
  std::array<std::array<std::unique_ptr<fb::Block>, Panel::Y>, Panel::X> blocks;
}; 
```

我有一个这样的成员函数：

```
void Panel::processMove() {
  if (move == nullptr) {
    return;
  }
  MoveType type = move->type;
  switch (type) {
    case MoveType::BLOCK_SWITCH: {
      std::unique_ptr<fb::Block> src = blocks[cursor.x][cursor.y];
      std::unique_ptr<fb::Block> dst = blocks[cursor.x + 1][cursor.y];

      if ((src == nullptr) && (dst == nullptr)) {
        break;
      }
      ...
    }
  } 
```

我不知道如何获得对指向项目的临时引用，因为此代码无法编译并出现以下错误：

`call to implicitly-deleted copy constructor of 'std::unique_ptr<fb::Block>'`

我应该如何获得对指向项目的临时参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:05:01.093

只需将其作为参考：

```
std::unique_ptr<fb::Block>& src = blocks[cursor.x][cursor.y]
std::unique_ptr<fb::Block>& dst = blocks[cursor.x + 1][cursor.y] 
```

实际上，由于您使用的是 C++11，因此您可以使用`auto`

```
auto& src = blocks[cursor.x][cursor.y]
auto& dst = blocks[cursor.x + 1][cursor.y] 
```

或者，如果您知道所有唯一指针都包含指向有效对象的指针，您可以获得对对象本身的引用，完全绕过指针（感谢@ChrisHartman）

```
fb::Block& src = *(blocks[cursor.x][cursor.y]);
fb::Block& dst = *(blocks[cursor.x + 1][cursor.y]);

//C++11 auto:
auto& src = *(blocks[cursor.x][cursor.y])
auto& dst = *(blocks[cursor.x + 1][cursor.y]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:08:12.920

`std::unique_ptr` [可以评估为 a`bool`](http://en.cppreference.com/w/cpp/memory/unique_ptr/operator_bool)以检查它是否指向对象。

改变这个：

```
 std::unique_ptr<fb::Block> src = blocks[cursor.x][cursor.y];
  std::unique_ptr<fb::Block> dst = blocks[cursor.x + 1][cursor.y];

  if ((src == nullptr) && (dst == nullptr)) {
    break;
  } 
```

对此：

```
 std::unique_ptr<fb::Block> &src = blocks[cursor.x][cursor.y];
  std::unique_ptr<fb::Block> &dst = blocks[cursor.x + 1][cursor.y];

  if ( !src && !dst )) {
    break;
  } 
```

# c - 从内核空间中的文件指针获取 fd

> ID：14913965
> 
> 赞同：2
> 
> 时间：2013-02-16T19:02:53.953
> 
> 标签：c, linux-kernel, file-permissions, kernel

给定一个结构文件，是否可以在 linux 内核空间中获取关联的文件描述符？我正在尝试使用 sys_chmod 或 sys_fchmod 更改权限。一个接受文件描述符，另一个需要来自用户空间的文件名。我可以弄清楚如何获取文件名，但是如何将其转换为用户空间指针？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:15:04.917

您追求的功能是`chmod_common`：

```
static int chmod_common(struct path *path, umode_t mode) 
```

需要 a`path`和您要设置的模式。不幸的是，正如您所注意到的，**它是静态的**，显然没有导出。所以你可以采取多种方式：

*   在你自己的函数中复制它所做的一切
*   `struct file`从（丑陋的）获取“文件描述符”
*   想办法打电话`sys_chmod`

现在`sys_chmod`需要一个用户指针，但您在内核中。您可以采取以下措施来欺骗它：

```
mm_segment_t oldfs = get_fs();

char __user *userptr;
userptr = (char __user __force *) kernptr;

set_fs(KERNEL_DS);

/* call sys_chmod */

set_fs(oldfs); 
```

这一切都非常符合[“你永远不应该在内核中做的事情”](http://www.linuxjournal.com/node/8110/print)。

# javascript - 自动点击闪光按钮

> ID：14913970
> 
> 赞同：1
> 
> 时间：2013-02-16T19:03:12.653
> 
> 标签：javascript, jquery, ajax, flash, curl

是否可以自动单击 Flash 按钮？如果是这样，您将如何自动单击此网页上的“选择图像”按钮：

[http://johannesburg.gumtree.co.za/c-SelectCategory?CatId=9109](http://johannesburg.gumtree.co.za/c-SelectCategory?CatId=9109)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:32:10.587

如果 flash 有一个 ExternalInterface 回调，您可以使用 javascript 来触发它。但是，如果它是一个您无法控制的网站，那么您将很难触发这样的事情。

# android - 适用于 Android NDK 的 Dropbox API

> ID：14913971
> 
> 赞同：0
> 
> 时间：2013-02-16T19:03:28.830
> 
> 标签：android, android-ndk, dropbox, dropbox-api

我将如何直接从 android NDK（不是 java，而是 c/c++）使用 Dropbox API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:12:52.483

C++ 中没有标准的 HTTP 库，因此没有用于 C/C++ 的官方 Dropbox API。你最好链接到Java。或者通过您选择的 HTTP 库手动实现 OAuth 和 Dropbox REST 调用。这很可行，如果耗时的话。

由于手动实现 Dropbox 的一部分是弹出一些登录 UI，因此回调到 Java 世界几乎是必要的。

# android - 从自定义视图访问 RelativeLayout 时出现 NullPointerException

> ID：14913973
> 
> 赞同：2
> 
> 时间：2013-02-16T19:03:48.867
> 
> 标签：android, nullpointerexception, fragment, android-relativelayout, findviewbyid

我对 Android 比较陌生，并且完全坚持如何在我的自定义视图中访问我以编程方式定义的相对布局（在片段中定义）。

在片段中，这就是我所拥有的：

```
...
    @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment1, container,false);
    RelativeLayout rl1 = new RelativeLayout(view.getContext());
    TextView tView1 = new TextView(view.getContext()); 
    tView1.setText("test");
    rl1.addView(tView1); 
    rl1.setId(1);
    tView1.setId(2);
...
} 
```

然后在自定义视图中，我通过 id 调用相对 Layout 和 TextView。当我尝试做任何事情时，我得到一个 NullPointer 异常。

```
...
RelativeLayout rl1 = (RelativeLayout) findViewById(1);
TextView tView1 = (TextView) findViewById(2);
tView1.getText(); 
```

上面的代码显示了在 TextView 上的尝试`.getText()`，但我对 RelativeLayout 所做的任何事情也会导致 NullPointer 异常。

所以基本上，看起来我没有正确找到 RelativeLayout 和 TextViews。仅供参考，我已经看到[了这个类似的问题](https://stackoverflow.com/questions/12915856/android-nullpointerexception-in-custom-view-access)，但它不适用于这里，我的构造函数已经正确设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:12:46.987

您必须将您的相对布局添加到您的布局组......并且从您的布局的父视图中，您可以访问您的相对布局及其子布局

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:19:11.383

您应该将布局添加到主视图，但是，您需要先将其转换为布局：

```
YourLayout view = (YourLayout) inflater.inflate(R.layout.fragment1, container,false);
RelativeLayout rl1 = new RelativeLayout(view.getContext());
TextView tView1 = new TextView(view.getContext()); 
tView1.setText("test");
rl1.addView(tView1); 
rl1.setId(1);
tView1.setId(2);
view.addView (rl1);//add rl1 to the main View 
```

然后访问，如果您在外面工作`onCreateView()` *并且* [`onCreateView()`已经被调用：](http://developer.android.com/images/fragment_lifecycle.png)

```
RelativeLayout rl1 = (RelativeLayout) getView().findViewById(1);
TextView tView1 = (TextView) rl1.findViewById(2);
tView1.getText(); 
```

如果您仍在尝试访问 中的视图`onCreateView()`，`findViewById()`没关系 - 您已经拥有视图的引用，因此请使用它们。

还值得注意的是，可以添加侦听器等`onCreateView()`来更新 UI，因此您可以简单地做一些事情。

# ios - Game Center 排行榜得分 - “20 分”而不是“20 分”

> ID：14913976
> 
> 赞同：4
> 
> 时间：2013-02-16T19:03:55.190
> 
> 标签：ios, game-center

我目前正在为我的应用测试 Game Center 排行榜。验证和提交分数时一切正常，但是当我查看 Game Center 中的排行榜时，它显示的是“200 分”而不是“200 分”。

为什么分数和分数类型之间没有空格？我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-13T08:22:25.090

因此，由于我了解更多人遇到相同的问题，并且按照公认的答案在标签前添加空格似乎不起作用，我想我会发布一个适用于其他任何登陆此页面的人的解决方案：

`"points"`我没有写or `" points"`，而是写了`"&nbsp;points"`标签。

这似乎是唯一对我有用的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T19:16:13.180

我是个白痴——你只需要在 iTunes Connect 中的乐谱后缀前添加一个空格。留下这个而不是删除它，以防其他人做同样的事情:)

# java - NullPointerException 通过搜索另一个屏幕来填充 JTextField

> ID：14913978
> 
> 赞同：0
> 
> 时间：2013-02-16T19:03:59.137
> 
> 标签：java, swing, nullpointerexception, jtextfield

下午好！`NullPointerException` 在另一个搜索屏幕中选择所需记录后，当我尝试将数据加载到注册屏幕时遇到问题。我的代码。：搜索屏幕：

```
public int retornaSelecao() {
    return (int) tablePesquisa.getValueAt(tablePesquisa.getSelectedRow(), 0);
}
private void tablePesquisaMouseClicked(java.awt.event.MouseEvent evt){                                           
    if (evt.getClickCount() == 2) {
         CadastroCliente cliente = new CadastroCliente(this.retornaSelecao());
         this.dispose();
    }
} 
```

这个屏幕我得到了记录的 id`JTable`并调用屏幕寄存器作为传递 id 参数

现在是注册屏幕

```
public CadastroCliente() {
    initComponents();
    this.desabilitaCampos();
    btnAlterar.setEnabled(false);
    btnExcluir.setEnabled(false);
    btnCancelar.setEnabled(false);
    btnSalvar.setEnabled(false);
    btnNovo.setEnabled(true);
    btnPesquisa.setEnabled(true);
    btnSair.setEnabled(true);    
}

public CadastroCliente(int codigo){
    String sql = "SELECT * FROM CLIENTE WHERE CODIGO = " + codigo;
    Conexao conexao = new Conexao();
    ResultSet rst;
    //System.out.println("" + codigo);
    try {
        pstm = conexao.conectar().prepareStatement("SELECT * FROM CLIENTE WHERE CODIGO = '" + codigo + "';");
        rst = pstm.executeQuery();
        while (rst.next()) {
            txtCodigo.setText("" + rst.getString("codigo"));
            System.out.println("" + rst.getString("codigo"));
            txtDataCadastro.setText(rst.getDate("datacadastro").toString());
            txtDataNascimento.setDate(rst.getDate("datanascimento"));
            txtNome.setText(rst.getString("nome").toUpperCase());
            txtApelido.setText(rst.getString("apelido").toUpperCase());
            txtEndereco.setText(rst.getString("endereco").toUpperCase());
            txtNumero.setText(rst.getString("numero"));
            txtComplemento.setText(rst.getString("complemento").toUpperCase());
            txtBairro.setText(rst.getString("bairro").toUpperCase());
            txtCep.setText(rst.getString("cep"));
            txtNomeCidade.setText(rst.getString("cidade").toUpperCase());
            txtRg.setText(rst.getString("rg"));
            txtCpf.setText(rst.getString("cpf"));
            cbPagamento.setSelectedItem(rst.getInt("diapagamento"));
            txtMensalidade.setText("" + rst.getFloat("mensalidade"));
            txtTelefoneResidencial.setText(rst.getString("telres"));
            txtTelefoneComercial.setText(rst.getString("telcom"));
            txtTelefoneCelular.setText(rst.getString("celular"));
            txtInformacoes.setText(rst.getString("informacoes"));
        }
    } catch (SQLException ex) {
        Logger.getLogger(CadastroCliente.class.getName()).log(Level.SEVERE, null, ex);
    }
}
public static void main(String args[]) {
java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new CadastroCliente().setVisible(true);
        }
    });
} 
```

我创建了两个构造函数`NullPointerException`，在第一个完成后给予更多的`JTextField`. 为什么给出这个错误？谁能帮我？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:13:00.230

这将有助于发布堆栈跟踪和发生错误的行。

但是通过查看 2 个构造函数：

```
public CadastroCliente() {
    initComponents();
    this.desabilitaCampos();
    btnAlterar.setEnabled(false);
    btnExcluir.setEnabled(false);
    btnCancelar.setEnabled(false);
    btnSalvar.setEnabled(false);
    btnNovo.setEnabled(true);
    btnPesquisa.setEnabled(true);
    btnSair.setEnabled(true);
}

public CadastroCliente(int codigo){
    String sql = "SELECT * FROM CLIENTE WHERE CODIGO = " + codigo;
    Conexao conexao = new Conexao();
    ResultSet rst;
    ...
} 
```

`initComponents()`您不会像在构造函数中那样调用`CadastroCliente(int codigo)`最有可能初始化您的 GUI（以及大多数`JTextField`等）的方法。

它应该是：

```
public CadastroCliente(int codigo){
    initComponents();//initialize components
     //if the buttons need to be set do that here
    String sql = "SELECT * FROM CLIENTE WHERE CODIGO = " + codigo;
    Conexao conexao = new Conexao();
    ResultSet rst;
    ...
} 
```

**更新：**

此外，您不希望在 GUI 事件调度线程上执行长时间运行的任务，例如数据库查询，因为这可能会导致 UI*冻结*并且仅在任务完成后才变为活动状态，因此不会显示中间结果：

```
ResultSet rst;
//System.out.println("" + codigo);
try {
    pstm = conexao.conectar().prepareStatement("SELECT * FROM CLIENTE WHERE CODIGO = '" + codigo + "';");
    rst = pstm.executeQuery();
    while (rst.next()) {
        txtCodigo.setText("" + rst.getString("codigo"));//wont show until the while loop is done
        ...
    }
} catch (SQLException ex) {
    Logger.getLogger(CadastroCliente.class.getName()).log(Level.SEVERE, null, ex);
} 
```

最好也将这项工作交给[Swing Worker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)并使用它的[`publish(..)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#publish%28V...%29)方法来获得中间结果。

[根据甲骨文](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)：

> SwingWorker 提供了许多通信和控制功能：
> 
> *   SwingWorker 子类可以定义一个方法 done，当后台任务完成时，该方法会在事件调度线程上自动调用。
>     
>     
> *   SwingWorker 实现 java.util.concurrent.Future。该接口允许后台任务向其他线程提供返回值。此接口中的其他方法允许取消后台任务并发现后台任务是否已完成或已取消。
>     
>     
> *   后台任务可以通过调用 SwingWorker.publish 来提供中间结果，从而从事件调度线程调用 SwingWorker.process。
>     
>     
> *   后台任务可以定义绑定属性。对这些属性的更改会触发事件，从而在事件调度线程上调用事件处理方法。

还可以阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

# ruby-on-rails - Rails 参数未接收从视图传递的变量

> ID：14913980
> 
> 赞同：0
> 
> 时间：2013-02-16T19:04:15.410
> 
> 标签：ruby-on-rails, ruby, view, controller, rails-routing

我已经定义了一个名为 的 CRUD 资源`items`，我已经将一个集合路由添加到了 called `similar_items`。

在 中`view/show`，我有：`link_to similar_items_items_path(), :similar_to => @item`

在我的`similar_items`控制器方法中，获取从中传递的项目的最佳方法是`link_to`什么？params 哈希不包含`similar_to`我清楚地传递的内容，如上所示。为什么它不被传递给参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:09:26.883

您应该在路径助手中传递参数：

```
link_to 'Your link label here', similar_items_items_path(:similar_to => @item) 
```

# java - Java 编译器显示错误“整数太大”

> ID：14913985
> 
> 赞同：0
> 
> 时间：2013-02-16T19:04:45.027
> 
> 标签：java, compiler-errors, integer

我正在编写一个代码，我试图在长变量中分配一个值。但是java编译器显示整数太大的错误。我仍在尝试存储`600851475143`类型`long`。

```
class Sum {
    static public void main(String args[]){
        long num=600851475143;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T19:05:25.330

在数字末尾附加“L”或“l”以使其成为长文字。您可以同时使用小写 (l) 或大写 (L)，但为了便于阅读，建议使用大写 (L)。

```
 long num=600851475143L; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T19:06:20.610

> 如果整数文字以字母 L 或 l 结尾，则它是 long 类型；否则它是 int 类型。建议您使用大写字母 L，因为小写字母 l 很难与数字 1 区分开来。

[参考](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

所以用这个 -

```
long num=600851475143l; 
```

或更好

```
long num=600851475143L; 
```

# function - Matlab gui 用于选择文本文件并在进一步的代码中使用它

> ID：14913989
> 
> 赞同：0
> 
> 时间：2013-02-16T19:05:15.273
> 
> 标签：function, matlab, user-interface, callback

我花了很长时间研究gui。我制作了包含所有按钮和输入可编辑文本框的空白模板。但我面临回调函数的问题。

我编写了一个代码，需要手动将包含数据的文本文件输入到脚本文件中，然后输入一个变量的值（在本例中为“b”），然后在代码的后面部分使用该值。我想让程序对用户更加友好，以便可以通过按下按钮从任何目录中选择文本文件，并可以在提供的框中更改 b 的值。另外我没有在主代码中包含任何功能......所以它是一个基本的数据拟合代码。

我尝试在 matlab 和其他资源中研究 gui，但无法理解和使用它。因此我不能把我的任何工作完成到现在。请帮我解决问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:34:21.280

您可以在 GUI 中创建一个按钮，并在关联的回调函数中包含以下代码：

```
[aux_file,aux_path]=uigetfile();
if ~isempty('aux_file')
  handles.data.file_name = fullfile(aux_path,aux_file);
  handles.data.file_data = load(handles.data.file_name);
  guidata(handles.figure_window, handles);
end 
```

现在，您可以在其他功能中使用数据。

# sql - sql连接中'on子句'上的未知列？

> ID：14913990
> 
> 赞同：3
> 
> 时间：2013-02-16T19:05:19.080
> 
> 标签：sql

你们能帮我理解加入的 SQL 规范吗？我不明白。我不断收到错误，称为 on 子句上的 Unknown column list。我在我的 SQL 语法上遇到了这个错误，我几乎把它擦在了脸上在这里做错了。

```
select product.name , product.price from product inner join product_category on          
(product_category.product_no = product.product_no ) where product_category.sub_category = 
"COFFIN"; 
```

我知道这个问题已经在这里被问了亿万次了，但是我看到的那些在这个非常基本的 sql 语法中很复杂。

谢谢你的协助。

编辑：我刚刚意识到我的 product_category 不是我的产品表的直接孩子，所以我只是输入了

```
 select * from product 
 join specifications 
 join product_category on ( specifications.product_no = product_category.product_no); 
```

但这仍然给了我一个错误，未知列product_category。

我已阅读并遵循与此站点类似的一些说明： [MYSQL unknown Clause join column in next join](https://stackoverflow.com/questions/13783669/mysql-unknown-clause-join-column-in-next-join) [Unknown column {0} in on](https://stackoverflow.com/questions/1753837/unknown-column-0-in-on-clause) [Clause MySQL "Unknown Column in On Clause"](https://stackoverflow.com/questions/10483421/mysql-unknown-column-in-on-clause)

我真的很沮丧。我真的无法让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:17:43.057

对于您在查询中加入的每个新表，每个表必须至少有一个 ON 子句。在不知道架构（表名、列等）的情况下，很难确切知道您要做什么，但这里有一个示例

```
select *
from product p
join specifications s
    on p.product_no = s.product_no
join product_category pc
    on pc.spec_no = p.spec_no 
```

也可以查看有关表别名的链接。给出了一个关于连接的好例子 + 关于如何提高 SQL 可读性的非常有用的信息 [http://msdn.microsoft.com/en-us/library/ms187455(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms187455(v=sql.90).aspx)

我发现这篇文章很有用，它直观地显示了不同类型的连接 [http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:08:38.237

您缺少指定产品和规格之间的连接条件的部分。

```
select * from product 
join specifications YOU NEED SOMETHING HERE
join product_category on etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:18:03.933

我将 SQL 语法修改为如下所示，我忽略了将 product_category 连接到规范的键，因此我创建了必要的链接并且它起作用了！！！

```
SELECT *
FROM product
JOIN specifications ON ( product.product_no = specifications.product_no )
JOIN product_category ON ( specifications.spec_no = product_category.spec_no )
WHERE product_category.sub_category = "COFFIN"
LIMIT 0 , 30 
```

还要感谢您对规格上缺少连接条件的提醒。哎呀，这种粗心大意花费了很多时间。太感谢了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T19:21:20.427

默认连接类型是`inner join`. 所以如果你写`join`，数据库读`inner join`，并坚持你包含一个`on`子句。

如果您想无条件加入，请`cross join`明确指定：

```
 select  * 
 from    product p
 cross join 
         specifications s
 inner join 
         product_category pc 
 on      pc.product_no = p.product_no
 left join
         some_other_table sot
 on      1=1 
```

最后一个加入`on 1=1`条件，是另一种方法`cross join`。它的细微差别在于，即使右表为空，它也会从左表返回行。

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/91efd/2/0)

# database - 使用格式文件批量插入

> ID：14913995
> 
> 赞同：0
> 
> 时间：2013-02-16T19:05:33.860
> 
> 标签：database, sql-server-2008, bulkinsert, bcp

我的名为“字典”的数据库有两列名为“column1”和“column2”。两者都可以接受`NULL`价值。两列的数据类型都是`INT`. 现在我想使用 bcp 从文本文件中仅插入 column2。我做了一个格式文件。我的格式文件是这样的

```
<?xml version="1.0"?>
  <BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <RECORD>
      <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="," MAX_LENGTH="7"/>
      <FIELD ID="2" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="24"/>
     </RECORD>
      <ROW>
        <COLUMN SOURCE="1" NAME="column2" xsi:type="SQLINT"/>
      </ROW>
   </BCPFORMAT> 
```

我的批量声明就像

```
BULK INSERT dictionary
 FROM 'C:\Users\jka\Desktop\n.txt'
  WITH
  (
   FIELDTERMINATOR = '\n',
    ROWTERMINATOR = '\n',
   FORMATFILE = 'path to my format file.xml'
   ) 
```

但它没有工作？我该如何解决这个问题？

N:B：我的 txt 文件看起来像

```
123 
456
4101 
```

……

另一个问题已编辑：我可以通过这种技术填充一列，但是当我从第一行填充文本文件中的另一列时。我怎样才能做到这一点 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:24:24.200

假设您的格式文件是正确的，我相信您需要放弃`FIELDTERMINATOR`并`ROWTERMINATOR`从您的`BULK INSERT`

```
BULK INSERT dictionary
FROM 'C:\Users\jka\Desktop\n.txt'
WITH (FORMATFILE = 'path to my format file.xml') 
```

还要**确保**：

1.  输入文件的编码是正确的。在您的情况下，它很可能应该是 ANSI 而不是 UTF-8 或 Unicode。
2.  行终止符（这是格式文件中的第二个字段终止符）实际上是`\r\n`而不是`\n`.

**更新**由于您需要跳过第一列：

`BULK INSERT`使用 XML 格式文件，当您使用语句直接导入表时，无法跳过列。为了达到预期的结果并仍然使用 XML 格式文件，您需要`OPENROWSET(BULK...)`在选择列表和目标表中使用并提供明确的列列表。

所以插入数据只能`column2`使用：

```
INSERT INTO dictionary(column2)
SELECT column2
  FROM OPENROWSET(BULK 'C:\temp\infile1.txt',
       FORMATFILE='C:\temp\bulkfmt.xml') as t1; 
```

如果您的数据文件只有一个字段，您的格式文件可能如下所示

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <RECORD>
        <FIELD ID="C1" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="24"/>
    </RECORD>
    <ROW>
        <COLUMN SOURCE="C1" NAME="column2" xsi:type="SQLINT"/>
    </ROW>
</BCPFORMAT> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:56:35.950

您的数据文件包含一个字段，因此您的格式文件应反映

```
<RECORD>
  <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="\r\n"/>
</RECORD> 
```

# javascript - jquery 是否适用于 SVG 节点？

> ID：14913996
> 
> 赞同：0
> 
> 时间：2013-02-16T19:05:37.327
> 
> 标签：javascript, jquery, svg

一个简单的问题...... jQuery 是否适用于 SVG 节点？我想像使用 HTMLElement 一样更改 SVG 节点上的属性。

奥利维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:29:56.913

更新：使用 jQuery 1.9.1 我可以更改 SVG 元素的属性。

奥利维尔

# android - 来自另一个活动的 SetText()

> ID：14913998
> 
> 赞同：0
> 
> 时间：2013-02-16T19:05:42.207
> 
> 标签：android, android-activity, android-edittext

我的 MainActivity 中有一个 EditText。当用户单击 NewFile 活动时，此活动的布局是透明的，因此仍然可以看到 EditText。我希望能够从 NewFile 活动在后台更新 EditText。这是我尝试过的，这会导致 NullPointerException。我明白为什么这不起作用，但我能做些什么来获得我正在寻找的结果。

新文件.java

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newfile);

        newet = (EditTextLineNumbers) findViewById(R.id.ide);
        newet.setText("Testing");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:09:22.477

你认为它会如何工作..？您如何访问不在您的活动布局中的视图..？说不可能...

您可以通过将布局充气服务用于您的布局并从您的视图中获取先前布局的 EditText

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:11:10.970

您的背景 EditText 不是来自当前为用户设置的布局，因此您遇到了异常。

关于更新 UI，您可能需要两件事。

1.  将后台活动的处理程序传递给新的
2.  将新的作为一个对话框而不是一个透明的活动。
3.  使用处理程序发送通知并相应地更新 UI

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:12:55.067

在 NewFile 活动中，有一个覆盖透明 editTextView 的编辑文本（可能对此文本视图有一个透明的 BG，这可能会让人产生它在背景中的错觉），现在更新这个 editTextView
，
一旦你返回，从这个 edittext 获取数据（使用 setActivityForResult 和那些机制）并填写以前的活动。